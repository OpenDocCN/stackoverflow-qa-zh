# StackOverflow 问答 10699000-10699999

# java - retainAll 不打印值

> ID：10699001
> 
> 赞同：0
> 
> 时间：2012-05-22T09:09:47.727
> 
> 标签：java

嗨，我正在尝试从两个字符串列表中获取公共值...列表 A 具有通过查询 Excel 数据库获得的值，而列表 B 具有通过查询 SQL 数据库获得的值。我想从 A 和 B 中获得共同的值。为此我使用了 retainAll 集合。但它没有打印共同的价值观。而是给了我[]。请帮我解决这个问题。除了使用retainAll之外，如何获得共同值。请更正我的代码片段。

```
 //connecting excel database and storing its values
      Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
      conn=DriverManager.getConnection("jdbc:odbc:spreadsheetdb","","");
      out.println("Excel Database connected" +"<br>");

      Statement stmt=conn.createStatement();
      String excelquery="Select * from [Sheet1$]";
      ResultSet excelvalues= stmt.executeQuery(excelquery);

      List A= new  ArrayList();
      while(excelvalues.next()){
            A.add(excelvalues.getString("name"));}

   //connection sql Db and storing its values

   Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
   connection = DriverManager.getConnection("jdbc:odbc:copyknowledgebase","sa","sqladmin");
   out.println("<br>"+"MSSQL connected " +"<br>")

   Statement statement=connection.createStatement();
   String conceptquery="Select * from dbo.conc";
   ResultSet conceptdetails=statement.executeQuery(conceptquery);
   Timestamp ts = new Timestamp(new java.util.Date().getTime());

  List B = new  ArrayList();
  while(conceptdetails.next()){
  B.add(conceptdetails.getString("Cname"));
  }
  B.retainAll (A);
  out.println(B); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:00:07.987

这强烈表明您的列表`A`和`B`. 您是否尝试过调试/单步检查？

`retainAll(collection)`应该做你对它的期望。考虑以下简单示例：

```
public static void main(String[] args) throws DataException {
  List<Integer> all = new ArrayList<Integer>(Arrays.asList(1,2,3,4,5,6,7,8));
  List<Integer> even = Arrays.asList(2,4,6,8);
  all.retainAll(even);
  System.out.println(all);
} 
```

...打印 [2, 4, 6, 8] - 即共同值。

至于替代方案，有很多方法可以做到这一点 - 这是一个例子：

```
public static void main(String[] args) throws DataException {
  List<Integer> all = new ArrayList<Integer>(Arrays.asList(1,2,3,4,5,6,7,8));
  List<Integer> even = Arrays.asList(2,4,6,8);

  List<Integer> common = new ArrayList<Integer>(all);
  for (Integer i : all){
    if (!even.contains(i)){
      common.remove(i);
    }
  }
  System.out.println(common);
} 
```

...再次打印 [2, 4, 6, 8]

（实际上，这与 的方式非常相似，只是它使用的`AbstractCollection`是循环而不是循环，因此它可以随时修改集合，而不必创建副本。）`retainAll()``Iterator``for each`

# ruby-on-rails - Rails - 在表循环中访问一对多变量

> ID：10699011
> 
> 赞同：1
> 
> 时间：2012-05-22T09:10:17.260
> 
> 标签：ruby-on-rails

我在任务和优先级之间建立了简单的一对多关系。

```
class Task < ActiveRecord::Base
    attr_accessible :subject, :body, :priority_id, :company_id, :status_id, :user_ids
    has_and_belongs_to_many :users
    belongs_to :priority
    belongs_to :company
    belongs_to :status
end

class Priority < ActiveRecord::Base
    attr_accessible :name
    has_many :tasks
end 
```

从我的任务/show.html.erb 视图

```
<%= @task.priority.name %> 
```

这行得通。

但是在我的任务/index.html.erb

```
<% @tasks.each do |task| %>
  <tr>
    <td><%= task.subject %></td>
    <td><%= task.body %></td>
    <td><%= task.priority.name %></td>
    <td><%= link_to 'Show', task %></td>
    <td><%= link_to 'Edit', edit_task_path(task) %></td>
    <td><%= link_to 'Destroy', task, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %> 
```

对 task.priority.name 的调用不起作用。

它抛出一个 NoMethodError。

我猜这是一个非常愚蠢的新手错误，但我一生都无法弄清楚。它会假设 Active Record 的魔法会过滤成这样的样子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:25:34.353

我猜你的 NoMethodError 出现在 nil:NilClass 上。尝试：

```
 <%= task.priority.name if task.priority %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:15:38.630

您确定您已经在数据库中创建了所有带有主键的模型和链接吗？我认为您链接到具有不存在的优先级 id (prority_id) 的任务。

检查您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:26:16.450

鉴于没有验证任务中是否存在优先级，您很有可能在 nil 上调用“名称”。验证优先级的存在（使用 validates_presence_of）或在打印之前检查它是否存在，如 Christoph 所说。

# android - 可以在 Android ImageViews 中添加 IOS Style 后阴影吗？

> ID：10699014
> 
> 赞同：0
> 
> 时间：2012-05-22T09:10:30.927
> 
> 标签：android, android-layout, imageview

我正在尝试在 Android 上的 imageview 后面添加这些 IOS 阴影：

![在此处输入图像描述](../Images/60e66647f7f7e5235fd274f993d5824e.png)

我的意思是每个正方形后面的后阴影。想象一下，每个正方形都是一个 Android IMAGEVIEW，我如何在 Android 中添加这个阴影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:14:04.613

试试下面这个链接到你的影子问题

[带有阴影的自定义 ImageView](https://stackoverflow.com/questions/3693234/custom-imageview-with-drop-shadow)

欢迎

# linux - 我收到“无法分配请求的地址”错误

> ID：10699017
> 
> 赞同：0
> 
> 时间：2012-05-22T09:10:45.343
> 
> 标签：linux, apache, port, beanstalkd

我正在尝试运行 beanstalkd

如果我使用 127.0.0.1 和端口号 11300 它可以工作或任何其他端口

```
beanstalkd -d -l 127.0.0.1 -p 11300 
```

但是如果使用外部IP它不起作用。

```
beanstalkd -d -l 107.0.1.5 -p 11300 
```

**我应该启用端口还是什么**。如果我应该如何在第一种情况下而不是第二种情况下工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:23:17.263

您传递给的 IP 地址`beanstalkd`就是它`binds`要传递的地址 - 如果给定，它将只接受到它运行的机器上的该地址的连接。所以地址 107.0.1.5 必须在您运行它的机器上的网络接口之一上。

如果您愿意，您可以简单地省略监听主机上所有地址的`-l <address>`选项。`beanstalkd`

# java - IceSSL NullPointerException (java)

> ID：10699018
> 
> 赞同：0
> 
> 时间：2012-05-22T09:10:47.290
> 
> 标签：java, ssl, ice

我正在使用 ICE 中间件开发应用程序。我对 IceSSL 有疑问。像这样配置客户端和服务器后：

```
Ice.Plugin.IceSSL=IceSSL.PluginFactory
IceSSL.DefaultDir=.
IceSSL.Keystore=ssl/s/s.jks
IceSSL.Password=qwerty
IceSSL.Truststore=ssl/s/s.jks 
```

我收到这样的错误：

```
 -- 23.05.12 10:57:55:913 ServerApplication: Network: accepting ssl connection
   local address = 127.0.0.1:10001
   remote address = 127.0.0.1:65415
!! 23.05.12 10:57:56:086 ServerApplication: error: Ice.ThreadPool.Server-0: exception in `Ice.ThreadPool.Server':
   java.lang.NullPointerException
    at IceInternal.Network.addrToString(Network.java:1044)
    at IceSSL.TransceiverI.initialize(TransceiverI.java:60)
    at Ice.ConnectionI.initialize(ConnectionI.java:1831)
    at Ice.ConnectionI.message(ConnectionI.java:1038)
    at IceInternal.ThreadPool.run(ThreadPool.java:302)
    at IceInternal.ThreadPool.access$300(ThreadPool.java:12)
    at IceInternal.ThreadPool$EventHandlerThread.run(ThreadPool.java:643)
    at java.lang.Thread.run(Unknown Source)

   event handler: local address = 127.0.0.1:10001
   remote address = 127.0.0.1:65415 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:52:28.877

错误地将证书添加到密钥库后，我遇到了同样的问题。如果您查看 的输出`keytool -list -keystore yourkeystore.jsk`，您将看到证书列表。在我的情况下，两者都被列为`trustedCertEntry`（这是 afaik keytool 如何在没有私钥的情况下显示证书）。

```
Enter keystore password:  

(...)
Your keystore contains 2 entries

cacert, May 23, 2012, trustedCertEntry, 
Certificate fingerprint (SHA1): 47:...:5C
rsakey, May 23, 2012, trustedCertEntry, 
Certificate fingerprint (SHA1): D2:...:61 
```

您的证书可能应该列为`PrivateKeyEntry`，而 CA 的列为`trustedCertEntry`.

您可以尝试仅使用 keytool 生成证书。它在我的情况下有效。希望能帮助到你。

# php - php foreach 重复两次

> ID：10699025
> 
> 赞同：0
> 
> 时间：2012-05-22T09:11:11.223
> 
> 标签：php, foreach, zend-lucene

我一直在尝试不同的解决方案来解决这个问题，但没有成功。问题是这样的：

我有一些来自 Zend_Search_Lucene 的结果，它给出了 3 个结果，ID 为：2、3、4

然后我从一个用 Doctrine 制作的不相关查询中获得了一些记录，它给了我两条 ID 为 ID 的记录：2 和 3。

Search Lucene 的结果应该在页面上显示为总共 3 条记录。其中我需要检查一个ID是否等于Docrine查询的另一个ID，即是否存在匹配，即： 2=2 ， 3=3 显示某些内容，如果不是，即： 2=3 显示其他内容。

尝试使用 FOREACH 两次和 IF ELSE 语句执行此操作，但我在页面上得到双重结果：

```
foreach($this->results as $r):    //  records form search Lucene ie 2, 3, 4

    foreach($this->records2 as $r2){     // records from another table (query) 2 and 3

          if(($r2['id']) == ($r->id)) { 
                                      // do something

                            } else {
                              // dosothing else

    } 
```

...ETC。

我理解为什么记录重复两次，但我不知道什么是获得正确结果的正确方法。有人可以帮忙吗？如果我在做一些愚蠢的事情，我很抱歉。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:14:37.353

```
foreach(... $r) {
  $found = false;
  foreach(... $r2) {
    if (... == ...) {
      $found = true; break;
    }
  }
  if ($found) {
    // something
  } else {
    // something else
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:18:45.607

`foreach`如果数组 in`$this->records2`是这样的映射，则可以消除内部：

```
array(2 => array('id' => 2)); 
```

然后在第一个 foreach 中：

```
if (isset($this->records2[$r->id])) {
    // do something
} else {
    // do something else
} 
```

这样，`// do something else`每个`// do something`循环最多执行一次。

# java - 我该如何处理这个错误“java.io.NotSerializableException”？

> ID：10699027
> 
> 赞同：0
> 
> 时间：2012-05-22T09:11:22.743
> 
> 标签：java

我正在处理一个java项目，我想在程序的请求中从文件中加载东西，然后添加一些东西......我收到了这个错误

```
"java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException:      pcshop.Pc 

at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at java.util.ArrayList.readObject(ArrayList.java:733)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at pcshop.PcShop.loadPcFiles(PcShop.java:48)
at pcshop.PcShop.main(PcShop.java:212)
  Caused by: java.io.NotSerializableException: pcshop.Pc
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at java.util.ArrayList.writeObject(ArrayList.java:710)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at pcshop.PcShop.main(PcShop.java:255)" 
```

我会给你一些代码..

```
//add the elements to an array list
public static void Insert()
{ 
                         Pc pc1=new Pc();
                         System.out.println("Price: \n");
                         n=in.nextFloat();
                         pc1.setPrice(n);
                         System.out.println("Quantity: \n");
                         m=in.nextInt();
                         pc1.setQuantity(m);
                         pcList.add(pc1);//pcList is an array list of Pc class
 }
 //load the file
  public static void loadPcFiles()
{
  try{

  FileInputStream input1=new FileInputStream("Users.txt");

  ObjectInputStream ob1=new ObjectInputStream(input1);
  //pcList is an array list of PC
  pcList =( ArrayList<Pc>) ob1.readObject();

  ob1.close();

  input1.close();

  } catch (ClassNotFoundException e) {
          e.printStackTrace();
  } catch(FileNotFoundException e) {
           e.printStackTrace();
   } catch (IOException e) {
  e.printStackTrace();}
 }

//print the lements from the arraylist
private static void PrintProducts ()
{
System.out.println("---------------------");
System.out.println("|  pc              :  |\n");
System.out.println("---------------------");
   for(Pc A: pcList)
   {

       A.printPc();
   }
 }

//PC class
public class Pc  extends Products implements Serializable {

 private String type;
 private float frequency;

 public Pc() {}

public Pc(String type, float frequency) {
    this.type = type;
    this.frequency = frequency;
}
 //and the products class
 public class Products implements Serializable{

private float price;
private int quantity;
private int id;
private String description;

public Products(){}

public String getDescription() {
    return description;
}

public void setDescription(String description) {
    this.description = description;
}

public float getPrice() {
    return price;
}

public void setPrice(float price) {
    this.price = price;
}

public int getQuantity() {
    return quantity;
}

public void setQuantity(int quantity) {
    this.quantity = quantity;
}

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

 @Override
 public String toString() {
     return "Products{" + "price=" + price + ", quantity=" + quantity + ", id=" + id +        ", description=" + description + '}';
}

}

public float getFrequency() {
    return frequency;
}

public void setFrequency(float frequency) {
    this.frequency = frequency;
}

public String getType() {
    return type;
}

public void setType(String type) {
    this.type = type;
}

 public void printPc()
 {
  System.out.println("Price: "+getPrice()+"Quantity"+getQuantity());

  System.out.println("---------------------");
 }

 @Override
public String toString() {
    return "Pc{" + "type=" + type + ", frequency=" + frequency + '}';
 }
} 
```

为什么即使我的类是可序列化的，我也会收到 NotSerializable 错误？现在有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:15:35.030

正如其他回答者指出的那样，最可能的原因是您的`Pc`课程没有实现。`Serializable`如果不是这种情况，请检查您的类的**成员**`Pc`：该类的每个字段也必须是可序列化的，以便主类成为。如果您正在处理继承，还要检查超类的每个字段。

**更新：**啊，刚刚看到还提供了类的代码（以前没有看到，因为缩进很乱），字段一切都很好。也许问题与[`serialVersionUID`](http://www.javapractices.com/topic/TopicAction.do?Id=45)那时有关？我看到你的班级没有。您是否尝试在保存对象的同一环境中加载对象？

# xml - XSLT 跨多个元素添加值

> ID：10699030
> 
> 赞同：0
> 
> 时间：2012-05-22T09:11:49.677
> 
> 标签：xml, xslt

我在我的 XML/XSLT 中遇到了一个简单的问题

我真的不能为这个问题取一个合适的名字，因此似乎找不到任何解决方案。

XML:

```
<root>
   <entry gid ="001">
      <level_1>
         <target_value>50</target_value>
      </level_1>
   </entry>

   <entry gid ="001">
      <level_1>
         <target_value>30</target_value>
      </level_1>
   </entry>

   <entry gid ="002">
      <level_1>
         <target_value>40</target_value>
      </level_1>
   </entry>

   <entry gid ="002">
      <level_1>
         <target_value>20</target_value>
      </level_1>
   </entry>
</root> 
```

XSL：

```
<xsl:for-each select="entry[@gid='001']">
   <xsl:if test="level_1/target_value != ''">
      <xsl:value-of select="sum(level_1/target_value)" />
   </xsl:if>
</xsl:for-each> 
```

结果：5030

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:29:33.680

如您所见，您的转换总计唯一`level_1/target_value`元素并为每个元素输出该`entry[@gid='001']`元素。

由于您想要一个包含 a的*所有* `<entry>`元素的总数，因此您必须将其写入您提交到的节点集中。`gid``001``sum()`

XSLT 看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:output method="text" />

  <xsl:template match="/root">
    <xsl:value-of select="sum(entry[@gid='001']/level_1/target_value)" />
  </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
80 
```

# node.js - 如何在 expressjs 中使用 streamlinejs？

> ID：10699036
> 
> 赞同：2
> 
> 时间：2012-05-22T09:12:07.947
> 
> 标签：node.js, express

当我使用 expressjs 时，但我不知道如何将它与[streamlinejs](https://github.com/Sage/streamlinejs)一起使用。

看快递代码：

```
var app = express.createServer();

app.get('/', function(req,res) {
   User.find({name:'Jack'}, function(err, users) {
      res.send(users);
   });
}); 
```

如何在代码中使用streamlinejs？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:31:00.763

这是我在常见问题解答中快速介绍的一点（https://github.com/Sage/streamlinejs/blob/master/FAQ.md#the-underscore-trick-is-design-for-callbacks-but-not-事件如何做我处理事件）。

最简单的解决方案是将下划线作为额外参数添加到`get`回调：

```
app.get('/', function(req,res, next, _) {
   var users = User.find({name:'Jack'}, _);
   res.send(users);
}); 
```

唯一的问题是如果`connect`有一天在其回调中添加第四个参数。以下是更安全一些（但可能是矫枉过正，因为我不明白为什么`connect`会改变它的回调 API）：

```
app.get('/', function(req,res) {
   (function(_) {
      var users = User.find({name:'Jack'}, _);
      res.send(users);
   })(trap); // trap is a generic callback that handles errors
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:04:49.523

[我们为Thingdom](http://www.thethingdom.com/)使用 Express 和 Streamline，为此，我们构建了一个简单的包装器，允许`next`回调（第三个参数）成为 Streamline 友好的回调，用于路由处理程序和中间件处理程序。

干得好：

[https://gist.github.com/1087991](https://gist.github.com/1087991)

=)

~~我一直想把它变成一个通用模块并发布到 npm——我很快就会这样做。~~ **编辑：[https ://github.com/aseemk/express-streamline](https://github.com/aseemk/express-streamline)**

请注意，这样做的结果是一个权衡——您不能让路由处理程序“继续”（失败）到其他路由处理程序。不过，我们从未使用过该功能，也没有预见到自己会这样做——知道每个路由处理程序都是最终目的地要简单得多——所以我们可以接受这种权衡。

**编辑：**这仅使用 Express 2.x 进行测试。

# java - 从 JAXB 和 Jersey 生成更多类似 json 的 json

> ID：10699038
> 
> 赞同：5
> 
> 时间：2012-05-22T09:12:27.790
> 
> 标签：java, json, jaxb, jersey

我使用使用 JAXB 创建的数据模型，从中我可以直接生成 XML

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\
<metadata xmlns="http://musicbrainz.org/ns/mmd-2.0#" xmlns:ext="http://musicbrainz.org/ns/ext#-2.0">
<artist-list offset="0" count="1">
   <artist ext:score="100" type="Group" id="4302e264-1cf0-4d1f-aca7-2a6f89e34b36">       
       <name>Farming Incident</name>
       <ipi-list>
          <ipi>1001</ipi>
       </ipi-list>
   </artist>
</artist-list>
</metadata> 
```

在 Jersey 的帮助下，还使用自然表示法生成 JSON

```
"artist-list":
    {"offset":0,
     "count":1,
     "artist":[
         {"score":"100",
          "type":"Group",
          "id":"4302e264-1cf0-4d1faca7-2a6f89e34b36",
          "name":"Farming Incident",
          "ipi-list":
              {
                  "ipi":[
                       "1001"
                    ]
             }
          }]
     } 
```

Xml很好，json几乎很好，除了因为Json直接支持具有ipi-list和artist-list等元素的数组似乎不是很json，是否可以从我的模型中生成更多json之类的json？

**请求的附加信息**json 是使用 JAXB 和 Jersey 从此 MMD 模式 [http://svn.musicbrainz.org/mmd-schema/trunk/brainz-mmd2-jaxb/src/main/resources/musicbrainz_mmd-2.0.xsd](http://svn.musicbrainz.org/mmd-schema/trunk/brainz-mmd2-jaxb/src/main/resources/musicbrainz_mmd-2.0.xsd)生成的，见 [http://svn.musicbrainz.org/search_server/trunk/servlet/src/main/java/org/musicbrainz/search/servlet/mmd2/ResultsWriter.java](http://svn.musicbrainz.org/search_server/trunk/servlet/src/main/java/org/musicbrainz/search/servlet/mmd2/ResultsWriter.java)和 [http://svn.musicbrainz.org/search_server/trunk /servlet/src/main/java/org/musicbrainz/search/servlet/mmd2/ArtistWriter.java](http://svn.musicbrainz.org/search_server/trunk/servlet/src/main/java/org/musicbrainz/search/servlet/mmd2/ArtistWriter.java)

关键是我希望能够以最小的麻烦从一个模式生成 Json 和 XML，但显然 Json 看起来不正确，所以我正在寻找一种改进它的方法（我真的没有任何经验我自己的json）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:47:38.570

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以利用 EclipseLink JAXB (MOXy) 中的 JSON 绑定和外部映射文档来支持您的用例。

**外部映射文件 (oxml.xml)**

您可以使用`@XmlPath(".")`MOXy 中的扩展来展平对象模型的某些部分。指定路径`"."`告诉 MOXy 将引用的对象包含在父节点中。

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum10699038">
    <java-types>
        <java-type name="Metadata">
            <java-attributes>
                <xml-element java-attribute="artistList" xml-path="."/>
            </java-attributes>
        </java-type>
        <java-type name="Artist">
            <java-attributes>
                <xml-element java-attribute="ipiList" xml-path="."/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要添加一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其中包含以下条目。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面的代码从您的 XML 文档填充对象模型，然后编组为 JSON。它演示了如何利用外部映射文件并将 MOXy 置于 JSON 模式。

```
package forum10699038;

import java.io.File;
import java.util.*;
import javax.xml.bind.*;

import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        // READ FROM XML
        JAXBContext jcXML = JAXBContext.newInstance(Metadata.class);

        File xml = new File("src/forum10699038/input.xml");
        Unmarshaller unmarshaller = jcXML.createUnmarshaller();
        Metadata metadata = (Metadata) unmarshaller.unmarshal(xml);

        // WRITE TO JSON
        Map<String, Object> properties = new HashMap<String, Object>(3);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum10699038/oxm.xml");
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jcJSON = JAXBContext.newInstance(new Class[] {Metadata.class}, properties);

        Marshaller marshaller = jcJSON.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(metadata, System.out);
    }

} 
```

**输出**

```
{
   "artist" : [ {
      "id" : "4302e264-1cf0-4d1f-aca7-2a6f89e34b36",
      "type" : "Group",
      "score" : "100",
      "name" : "Farming Incident",
      "ipi" : [ "1001" ]
   } ]
} 
```

**MOXy 和泽西岛**

您可以在 JAXB-RS 环境（例如 Jersey）中轻松使用 MOXy 作为 JSON 提供程序：

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

* * *

**其他文件**

以下是我创建的文件版本，以确保一切正常。

**输入.xml**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<metadata xmlns="http://musicbrainz.org/ns/mmd-2.0#" xmlns:ext="http://musicbrainz.org/ns/ext#-2.0">
    <artist-list offset="0" count="1">
        <artist ext:score="100" type="Group"
            id="4302e264-1cf0-4d1f-aca7-2a6f89e34b36">
            <name>Farming Incident</name>
            <ipi-list>
                <ipi>1001</ipi>
            </ipi-list>
        </artist>
    </artist-list>
</metadata> 
```

**元数据**

```
package forum10699038;

import javax.xml.bind.annotation.*;

@XmlRootElement
public class Metadata {

    @XmlElement(name="artist-list")
    ArtistList artistList;

} 
```

**艺术家名单**

```
package forum10699038;

import java.util.List;

public class ArtistList {

    private List<Artist> artist;

} 
```

**艺术家**

```
package forum10699038;

import javax.xml.bind.annotation.*;

@XmlType(propOrder={"name", "ipiList"})
public class Artist {

    @XmlAttribute
    private String id;

    @XmlAttribute
    private String type;

    @XmlAttribute(namespace="http://musicbrainz.org/ns/ext#-2.0")
    private String score;

    @XmlElement(name="ipi-list")
    private IPIList ipiList;

    private String name;

} 
```

**IP列表**

```
package forum10699038;

import java.util.List;

public class IPIList {

    private List<String> ipi;

} 
```

**包信息**

```
@XmlSchema( 
    namespace = "http://musicbrainz.org/ns/mmd-2.0#", 
    elementFormDefault = XmlNsForm.QUALIFIED,
    xmlns={
        @XmlNs(prefix="", namespaceURI = "http://musicbrainz.org/ns/mmd-2.0#")
    }
) 
@XmlAccessorType(XmlAccessType.FIELD)
package forum10699038;

import javax.xml.bind.annotation.*; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T20:15:48.600

Jersey 创建的 JSON 是网站上提供的该模型的精确 JSOON 表示。您在这里面临的问题是该站点提供了一个笨拙的数据模型，而不是该框架没有做正确的事情。

为什么此服务返回艺术家列表类型的对象而不是返回艺术家列表？为什么服务也有一个 ipi-list 对象？您应该问的真正问题应该是，应该如何对其建模以更好地与所有技术一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T21:50:50.710

我个人不太喜欢注释。有用纯代码生成 JSON/XML 的习惯。:)

例如杰克逊（Gson 也类似）：

```
mapper = new ObjectMapper();
JsonNode root = mapper.createObjectNode();

JsonNode artist = mapper.createObjectNode();
artist.put("score", "100");
root.put("artist-list", artist);

ArrayNode ipiList = mapper.createArrayNode();
ipi.add("1001");
artist.put("ipi-list", ipiList); 
```

表面上看起来可能需要做很多工作。但对我来说，这是将 JSON 映射到对象的非常清晰的方法。基本上在实体类中拥有 toJson() 方法是我的惯常做法。这是一个示例：[https ://github.com/richardzcode/metrics/blob/master/src/main/java/com/rz/metrics/core/entities](https://github.com/richardzcode/metrics/blob/master/src/main/java/com/rz/metrics/core/entities)

虽然只是我。

对于 JAXB，我相信您需要如下注释您的实体：

```
@XmlElement(name = "ipi-list")
private List<Ipi> ipi; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T22:10:37.077

我认为您在 ipiList 中看到的问题是由于 Jersey 用于映射到 JSON 的底层库中的单元素数组/列表存在问题。

以下博客文章（不是我的）显示了配置 Jersey 的一种方法，并且评论链接到替代（可能更简单）的方法，以使 JSON 表示对数组正确：

[http://tugdualgrall.blogspot.co.uk/2011/09/jax-rs-jersey-and-single-element-arrays.html](http://tugdualgrall.blogspot.co.uk/2011/09/jax-rs-jersey-and-single-element-arrays.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T16:14:54.550

我设法解决了 Jersey json 库中的 JSON 数组和原始字段“bug”。秘密成分是前面提到的 JSONConfiguration 和 ContextResolver 魔术。请参阅我的以下帖子，它有一个完整的代码示例，自定义的 ContextResolver 和 rest Application 类乍一看可能有点模糊逻辑。

[如何使用 Jersey REST 序列化 Java 原语](https://stackoverflow.com/questions/2629544/how-to-serialize-java-primitives-using-jersey-rest/12624152#12624152)

*   用于零或单元素 Java 列表的 json 数组
*   没有引号字符的原始整数或布尔字段

# javascript - 如何通过javascript将颜色从（rrr ggg bbb）转换为RRGGBB

> ID：10699039
> 
> 赞同：1
> 
> 时间：2012-05-22T09:12:29.210
> 
> 标签：javascript, selenium, ide

我有这段代码（在 Selenium IDE 中）： `storeEval | window.document.defaultView.getComputedStyle(window.document.getElementsByTagName('input')[0]).getPropertyValue('background-color') | result`

它返回我的颜色`(rrr, ggg, bbb)`，我怎样才能得到这个颜色`RRGGBB`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:26:38.970

试试这个：

```
command: storeEval
target : color = window.document.defaultView.getComputedStyle(window.document.getElementsByTagName('input')[0]).getPropertyValue('background-color'); colorArr = color.replace(/[(rgb()\)]/g, '').split(','); hexString = parseInt(colorArr[0]).toString(16) + parseInt(colorArr[1]).toString(16) + parseInt(colorArr[2]).toString(16);
value  : result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:17:23.610

您可以将十进制值 (0 - 255) 转换为十六进制 (0 - FF)

```
var hexString = redNumber.toString(16) + greenNumber.toString(16) + blueNumber.toString(16); 
```

# php - 防止文件上传填充POST数组

> ID：10699040
> 
> 赞同：0
> 
> 时间：2012-05-22T09:12:31.503
> 
> 标签：php, codeigniter, file-upload

上传文件大小很小的文件时，我收到以下 PHP 错误：

`Warning: POST Content-Length of 9999378 bytes exceeds the limit of 8388608 bytes in Unknown on line 0`

显然文件大小比默认的 PHP 大`memory_limit`，而且我不希望用户上传这么大的文件，这很好，但是它产生的错误并不好。

有没有一种方法可以抑制此错误并稍后在页面上显示我自己的格式错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:22:54.843

使用`ini_set()`. 将 xx 替换为您需要的值。

```
<?php
  ini_set('memory_limit', 'xxM');   
  ini_set('post_max_size', 'xxM');   
  ini_set('upload_max_filesize', 'xxM');   
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:20:20.597

它在 CI 文档中非常清楚地说明使用 max_size 配置项来设置限制（以 KB 为单位）。所以像：

```
$config['max_size'] = '100';
...
$this->load->library('upload', $config); 
```

为什么这不起作用？

另外，请注意您`post_max_size`在 Apache 中的设置也可以上传。

从这里[http://codeigniter.com/user_guide/libraries/file_uploading.html](http://codeigniter.com/user_guide/libraries/file_uploading.html)

# java - 使 word 解析 HTML 格式

> ID：10699049
> 
> 赞同：0
> 
> 时间：2012-05-22T09:13:14.547
> 
> 标签：java, javascript, html, ms-word, apache-poi

我们有一个利用 NicEdit 在线文本编辑器使用 JavaScript 格式化文本的 JSP。“提交”按钮运行一个 servlet，它将消息字符串上传到我们的 MySQL 数据库，然后使用以下代码在纸上打印字符串：

```
POIFSFileSystem fs = new POIFSFileSystem();
DirectoryEntry directory = fs.getRoot();
directory.createDocument("WordDocument", new ByteArrayInputStream(content.getBytes()));
                        FileOutputStream out = new FileOutputStream(filename);
fs.writeFilesystem(out);
out.close();

Desktop.getDesktop().print(destinationFile); 
```

我的问题是，我们如何保持打印页面上的格式（粗体、斜体等）而不是打印

<b>、<i>、<u> 标签？

我必须承认我没有做太多的预研究，因为我真的不知道要寻找什么？

非常感谢，

卡姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:09:23.297

首先，您可以向 Word 提交多种格式：doc、docx、rtf、html、Word 2003 XML、Flat OPC XML ...

这个答案是特定于 docx 的（尽管看起来您可能正在发送 .doc - 不确定您是否致力于此），您可以通过两种方式处理 HTML。

首先是创建一个包含 HTML 的 altChunk/alternative 格式输入部分，Word 可以在第一次打开 docx 时对其进行处理。

第二种是自己转换HTML。从 2.8.0 开始，docx4j（我是提交者）可以将 XHTML 转换为 docx 内容。

# cuda - 在“便宜”的 GPU 上开发 CUDA

> ID：10699052
> 
> 赞同：3
> 
> 时间：2012-05-22T09:13:19.007
> 
> 标签：cuda, gpu, gpgpu

我在我的桌面上用 CUDA 开发算法，以后应该在服务器上运行。

是否可以使用最近的低端卡（如计算能力 2.1）来获得所有不错的调试和分析功能，然后使用高端卡（具有相同的 cc）将代码放在服务器上？我是否只需要调整线程/网格尺寸，或者它会改变一切™。

示例：我将在[Quadro 600](http://www.nvidia.com/object/product-quadro-600-us.html)上进行开发，服务器将使用[Tesla C2075](http://www.nvidia.com/object/personal-supercomputing.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:58:32.913

只要您的内核调用和内核本身是可扩展的，您就没有问题。

看看这个问题：

[CUDA开发在不同的卡上？](https://stackoverflow.com/questions/10473046/cuda-development-on-different-cards)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:35:31.663

存在一些问题，例如内存带宽不同（根据您的链接，Quadro 上为 25.6 GiB/s，Tesla 上为 148 GiB/s），或者 SM 的数量不同（驱动程序可以在 SM 之间以不同的方式分配块）。然而，在大多数情况下，这种小的差异并不重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T10:19:55.060

如果服务器安装了多个 GPU，那么您需要更改代码以在多 GPU 上运行，以充分利用服务器的功能。虽然相同的代码可以正常运行，但在一张卡上。

如果服务器上只有一张卡；一般的经验法则是，您**无需**更改任何代码行即可利用更强大的 GPU 的功能，因为驱动程序会自动在 SM 之间分配负载。

# android - 服务器向安卓手机发送通知

> ID：10699053
> 
> 赞同：0
> 
> 时间：2012-05-22T09:13:23.110
> 
> 标签：android

我想创建一个即时消息应用程序。我面临的问题是我怎么知道其他人已经向我发送了消息，而我的手机可以从服务器获得通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:00:20.390

开发客户端应用程序必须从服务器通知更新，必须不断运行后台[服务](http://www.vogella.com/articles/AndroidServices/article.html)才能找到更新。

如果你是访问android收件箱消息，不需要创建自己的服务，我们可以在这里使用android服务

# java - 如何在属性文件中转义冒号 (:)？

> ID：10699055
> 
> 赞同：22
> 
> 时间：2012-05-22T09:13:25.433
> 
> 标签：java, properties, escaping, key-value, colon

我正在使用属性文件来存储我的应用程序的配置值。在其中一种情况下，我必须将值存储为 `xxx:yyy:zzz`. 当我这样做时，冒号用反斜杠转义，`\`导致值显示为`xxx\:yyy\:zzz`属性文件中的值。

我知道冒号`:`是`Properties`Java 类的标准分隔符。但是我仍然需要保存没有反斜杠的值`\`。

有关如何处理此问题的任何建议？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-22T09:19:27.757

将属性放入`Properties`对象并使用`store(...)`方法保存。该方法将执行所需的任何转义。[Java 文档](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#store%28java.io.Writer,%20java.lang.String%29)说：

> *"... 对于键，所有空格字符都写有前面的 \ 字符。对于元素，前导空格字符，但不是嵌入或尾随空格字符，前面写有 \ 字符。键和元素字符 #， !、= 和 : 前面带有反斜杠，以确保它们被正确加载。”*

如果您手动创建/写入文件，则只需要手动转义字符。

* * *

相反，如果您希望文件包含未转义的冒号字符，那么您就不走运了。这样的文件格式错误，可能无法使用这些`Properties.load(...)`方法正确加载。如果您沿着这条路线走，您将需要实现自己的自定义加载和/或存储方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-21T01:34:37.110

我遇到了同样的问题。正斜杠`/`也可以通过`store()`.`Properties`

我通过创建自己的`CustomProperties`类（扩展`java.util.Properties`）并注释掉方法中的调用来`saveConvert()`解决了这个问题`customStore0()`。

这是我的`CustomProperties`课：

```
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.util.Date;
import java.util.Enumeration;
import java.util.Properties;

public class CustomProperties extends Properties {
  private static final long serialVersionUID = 1L;
  @Override
  public void store(OutputStream out, String comments) throws IOException {
      customStore0(new BufferedWriter(new OutputStreamWriter(out, "8859_1")),
                   comments, true);
  }
  //Override to stop '/' or ':' chars from being replaced by not called 
  //saveConvert(key, true, escUnicode)
  private void customStore0(BufferedWriter bw, String comments, boolean escUnicode)
          throws IOException {
      bw.write("#" + new Date().toString());
      bw.newLine();
      synchronized (this) {
          for (Enumeration e = keys(); e.hasMoreElements();) {
              String key = (String) e.nextElement();
              String val = (String) get(key);
              // Commented out to stop '/' or ':' chars being replaced
              //key = saveConvert(key, true, escUnicode);
              //val = saveConvert(val, false, escUnicode);
              bw.write(key + "=" + val);
              bw.newLine();
          }
      }
      bw.flush();
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T19:43:33.890

几天前我们遇到了这个问题。我们正在使用 URL 作为值来操作现有的属性文件。

这是有风险的，但如果您的属性值少于 40 个字符，那么您可以使用“list”方法而不是“store”：

[http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#list(java.io.PrintWriter)](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#list(java.io.PrintWriter))

我们快速查看了 JDK 代码，并破解了一个自定义的 store 实现，该实现适用于我们的目的：

```
public void store(Properties props, String propertyFilePath) throws FileNotFoundException {
    PrintWriter pw = new PrintWriter(propertyFilePath); 
    for (Enumeration e = props.propertyNames(); e.hasMoreElements();) {
        String key = (String) e.nextElement();
        pw.println(key + "=" + props.getProperty(key));
    }
    pw.close();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:18:34.423

如果您使用属性文件的 xml 变体（使用`loadFromXML`and `storeToXML`），这应该不是问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-06T17:49:57.387

**尝试使用 unicode。**

冒号的 unicode 是`\u003A`

此外，空间的 unicode 是：`\u0020`

有关基本拉丁字符的列表，请参见：[https://en.wikipedia.org/wiki/Basic_Latin_(Unicode_block)](https://en.wikipedia.org/wiki/Basic_Latin_(Unicode_block))

**例如：**

`ProperName\u003A\NameContinues=Some property value`

将期望一个带有键的属性：

`ProperName:NameContinues`

并且将具有以下值：

`Some property value`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-03T09:16:05.887

对我来说，它通过`\`在特殊字符之前使用，

例如，

```
Before: VCS\u003aIC\u0020Server\u003a=Migration
After: VCS\:IC\ Server\:=Migration 
```

`:``\:`与(space) 与`\` (`\`后跟 <Space>) 进行转义。

欲了解更多信息：[https ://en.wikipedia.org/wiki/.properties](https://en.wikipedia.org/wiki/.properties)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-02T08:47:29.577

它很简单，只需在那里使用**撇号** **''**例如：

而不是这个（案例1）

```
File file= new File("f:\\properties\\gog\\esave\\apple");
prop.setProperty("basedir",file.toString()); 
```

**使用这个（案例2）**

```
File file= new File("f':'\\properties\\gog\\esave\\apple");
prop.setProperty("basedir",file.toString()); 
```

输出将是

* * *

情况1：`basedir = f\:\\properties\\gog\\esave\\apple`

案例二：`basedir = f:\\properties\\gog\\esave\\apple`

我希望这能帮到您

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-08T08:56:02.180

对于像我这样在使用 Spring Boot 配置属性文件时为此而来的人：您需要包含在`[..]`：

例如：

```
my.test\:key=value 
```

还不够，你需要在你`application.properties`的例子中：

```
my.[test\:key]=value 
```

另请参阅[SpringBoot2 ConfigurationProperties 从 yaml 键中删除冒号](https://github.com/spring-projects/spring-boot/issues/11386)

# android - 安卓画线

> ID：10699058
> 
> 赞同：0
> 
> 时间：2012-05-22T09:13:28.740
> 
> 标签：android

我想在屏幕上画线，但我的应用程序只画了虚线。那么我应该在我的代码中添加什么？

```
List<Point> points = new ArrayList<Point>();
Paint paint = new Paint();

public DrawView(Context context) {
    super(context);
    setFocusable(true);
    setFocusableInTouchMode(true);

    this.setOnTouchListener(this);

    paint.setColor(Color.BLUE);
    paint.setAntiAlias(true);
}

@Override
public void onDraw(Canvas canvas) {
    for (Point point : points) {
        canvas.drawCircle(point.x, point.y, 5, paint);
        // Log.d(TAG, "Painting: "+point);
    }
}

public boolean onTouch(View view, MotionEvent event) {
    // if(event.getAction() != MotionEvent.ACTION_DOWN)
    // return super.onTouchEvent(event);
    Point point = new Point();
    point.x = event.getX();
    point.y = event.getY();
    points.add(point);
    invalidate();
    Log.d(TAG, "point: " + point);
    return true;
    }
}

class Point 
{
    float x, y;
    @Override
    public String toString() {
        return x + ", " + y;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:19:18.613

**编辑**

使用 drawLine 或 drawPath 而不是 drawCircle。

我建议你看看[API Demos](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html)`Fingerpaint`的例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:02:03.623

1.  在 2 组点之间使用 drawLine
2.  对于更平滑的线条，在 onTouch 中获取所有历史事件并首先处理它们
3.  为了更快/更流畅，仅使点发生变化的矩形无效

[在这里](http://corner.squareup.com/2010/07/smooth-signatures.html)阅读更多

# sencha-touch - 构建煎茶Touch 2登录系统

> ID：10699071
> 
> 赞同：1
> 
> 时间：2012-05-22T09:14:17.243
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试使用 Sencha Touch 2 构建一个多登录系统，用户是否必须选择他是代理还是追随者。到目前为止，我已经能够想出一个简单的登录表单。没有功能。我的代码是这样的：

```
Ext.define("ikhlas.view.login", {
extend: 'Ext.Panel',
xtype: 'loginpanel',

    config:{
        title: 'Login',
        iconCls: 'more',
        styleHtmlContent: true,

    layout:{
        type: 'vbox',

        },

    items: [
        {
       xtype: 'fieldset',
       iconCls: 'add',

    items: [

        {
            xtype: 'emailfield',
            name: 'email',
            placeHolder: 'Username'
        },

        {
            xtype: 'passwordfield',
            name: 'password',
            placeHolder: 'Password'
        },

        {
            xtype: 'selectfield',
            label: 'User Type',
            options: [
            {text: 'Agent',  value: '0'},
            {text: 'Follower', value: '1'}
            ]
        }

   ]},
        {
            xtype: 'button',
            text: 'LogIn',
            ui: 'confirm',
            width: '40%',
            height: '7%',
            flex: 1,
            left: '55%',
            action: 'submitContact'
        },
        {
            xtype: 'button',
            text: 'Forgot Username',
            ui: 'confirm',
            width: '41%',
            height: '4%',
            top: '90%',
            flex: 1,
            action: 'ForgotUsername'   
        },
        {
            xtype: 'button',
            text: 'Forgot Password',
            ui: 'confirm',
            width: '40%',
            height: '4%',
            top: '90%',
            flex: 1,
            left: '47%',
            action: 'ForgotPassword'  
        },
    ]}
}); 
```

现在我想知道如何从 API 验证用户信息（用户名和密码）（将给出一个 url），以便在允许他们访问应用程序之前确认登录用户名和密码是正确的。其次，如果用户名或密码不正确，我想抛出一条错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:28:20.957

很明显，您必须在服务器端进行身份验证。假设你已经拥有了一个，那么剩下的不是很困难。

最简单的方法就是发送一个`Ext.Ajax.request`：

```
Ext.Ajax.request({
        url: your_API_url,
        params: {
                       username: your_username_from_formpanel, 
                       password: your_password_from_formpanel
                    },
        timeout: 10000, // time out for your request

        success: function(result) {
                      // here, base on your response, provide suitable messages
                      // and further processes for your users
        },

        failure: function(){
            Ext.Msg.alert("Could not connect to server.");
        }   
    }); 
```

注意：出于安全原因，您应该在将用户密码发送到服务器之前对其进行加密。

# android - Android：在菜单中显示 EditText

> ID：10699073
> 
> 赞同：4
> 
> 时间：2012-05-22T09:14:25.543
> 
> 标签：android, android-edittext, contextmenu

我目前正在为 Android 开发一个 mp3 库。问题是，我希望用户选择他想添加的播放列表的名称（有用的 innit ？）。因此，我在播放列表列表上创建了一个上下文菜单，允许用户在 3 个选项之间进行选择，创建、删除、重命名。为什么我要做的是在用户单击“创建”时显示一个 EditText 字段，以便他可以编写新播放列表的名称。但是，我无法显示它。这是我为菜单制作的听众：

```
 //creation onLongClickListener : display the menu on long lick
    playlistView.setOnLongClickListener(new OnLongClickListener(){
        public boolean onLongClick(View v) {
            ((Activity) context).openContextMenu(v);
            return true;
    }});

    //contextMenuListener of the view
    playlistView.setOnCreateContextMenuListener(new View.OnCreateContextMenuListener(){

        public void onCreateContextMenu(ContextMenu cMenu, View v, ContextMenu.ContextMenuInfo menuInfo) {
            MenuInflater inflater = ((Activity) context).getMenuInflater();
            inflater.inflate(R.menu.playlist_menu, cMenu);

            lastLongClickedView = v;
    }}); 
```

在 menu.xml 文件中，我这样做了：

```
<item android:id="@+id/playlist_create"
      android:title="Create a playlist"
      >
      <menu>
        <EditText
        android:id="@+id/playlist_choice"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:hint="@string/playlist_name"
        android:lines="1"
        />
      </menu>
</item> 
```

我尝试了一个项目，它显示了，但是 EditText. 我认为我犯的错误很愚蠢，但我找不到它:(

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:35:13.333

抱歉，没办法.. 你不能在菜单中定义我们自己的视图。菜单主标签只有一个子标签，即项目。使用项目标签我们只能显示图像或字符串

# datetime - XPage 中存储的时间不一致

> ID：10699074
> 
> 赞同：3
> 
> 时间：2012-05-22T09:14:30.100
> 
> 标签：datetime, xpages

如果我有一个带有时间字段的 XPage：

```
<xp:inputText id="inputText2" value="#{document1.Time}"
    defaultValue="#{javascript:@Now()}">
    <xp:this.converter>
        <xp:convertDateTime type="time"
            ignoreUserTimeZone="false"
            timeStyle="full">
        </xp:convertDateTime>
    </xp:this.converter>
</xp:inputText> 
```

我的服务器设置为英国时间，当我保存文档然后再次查看它时，时间将移动一小时。

在我的 xsp.properties 文件中，我有：

```
xsp.user.timezone=true
xsp.user.timezone.roundtrip=true 
```

这是一个错误还是我没有正确配置我的服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:28:57.207

这是一个错误和回归（以上适用于 852）。IBM 正在努力修复。稍后会详细介绍，但与此同时，请与支持人员联系，当有可用的修补程序时，我们会为您提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:21:01.047

我要感谢马克迈尔斯的回答。

似乎问题与时区有关，但很奇怪。服务器设置为观察夏令时，如果我们将其关闭，那么代码将按预期工作。那么问题是“经典”Domino 应用程序不再工作。所以，在我看来，我认为这是一个错误。但至少目前我们有一个解决方案。

感谢您的帮助。

马特

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-12T09:10:08.030

我遇到了同样的问题，在 Lotus Notes 客户端 8.5.3 中安装 FixPack3 后，问题已解决

谢谢

理查德·阿伦·库马尔

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:23:39.813

这可能是夏令时设置的问题吗？

# matlab - Matlab中的RTL msgbox

> ID：10699085
> 
> 赞同：2
> 
> 时间：2012-05-22T09:14:56.133
> 
> 标签：matlab, right-to-left

我正在尝试在 MATLAB 中显示一个使用水平文本对齐“正确”的 msgbox。
问题是当我更改文本对齐方式时，消息文本出现在框外。

```
h = msgbox('Sample Text');
th = findall(0, 'Tag','MessageBox' );
set(th, 'HorizontalAlignment', 'right'); 
```

有谁知道从 Matlab 向用户展示从右到左的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:09:39.340

消息框中的消息字符串实际上是使用[`text`](http://www.mathworks.de/help/techdoc/ref/text.html) 函数创建的，即通​​过两个坐标定位（忽略z坐标）。要将其定位到对齐右侧，您需要获取`position`消息框的 并使用其`width`参数来定义消息文本的 x 位置：

```
h = msgbox('Sample Text');
th = findall(0, 'Tag','MessageBox' );

boxPosition = get(h,'position');
textPosition = get(th, 'position'); 

set(th, 'position', [boxPosition(3) textPosition(2) textPosition(3)]);

set(th, 'HorizontalAlignment', 'right'); 
```

由于这会将您的文本完全放在框的右边框上，因此您需要稍微向左调整文本：

```
set(th, 'position', [boxPosition(3).*0.95 textPosition(2) textPosition(3)]); 
```

# logging - Nginx 日志轮换正在发生，logrotation.d 中没有任何文件

> ID：10699086
> 
> 赞同：0
> 
> 时间：2012-05-22T09:14:56.480
> 
> 标签：logging, nginx, log-rotation

我刚刚在基于 RPM 的 Linux 中编译并安装了 nginx。注意到访问日志和错误日志的日志轮换正在发生。但是没有`/logrotation.d/`对目录进行操作的文件`/var/log/nginx/`。

我需要更改归档日志的文件名格式，但由于 logrotation.d 中没有文件，不知道要更改什么。

任何帮助将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:33:10.240

nginx 有一些默认策略。只需在 logrotation.d 中创建一个条目，它将覆盖。

# jquery - 检测实时浏览器大小并显示 UI

> ID：10699089
> 
> 赞同：0
> 
> 时间：2012-05-22T09:15:02.703
> 
> 标签：jquery, html, css, modernizr

我设计了一个页面，它使用modernizr 根据宽度检测设备。问题是，如果我调整浏览器窗口的大小，UI 会变坏。我想让 UI 如此灵活，如果我调整浏览器窗口的大小，它应该会正确显示，如果窗口宽度将调整为 320px，浏览器将显示 jquery-mobile ui。

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Social Search</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="text/javascript" src="jquery-1.6.4.min.js"></script>
        <script type="text/javascript" src="modernizr.custom.15317.js"></script>
    </head>
    <body>
        <div data-role="page" data-title="Social Search" data-theme="b">
            <header data-role="header" data-theme="b">
                <h1>Social Media Search</h1>
            </header>
            <div id="wrapper" data-role="content">
                <form id="frmSearch" action="#" method="POST">
                    <div data-role="fieldcontain">
                        <label for="txtSearch">Search:</label>
                        <input type="search" name="txtSearch" id="txtSearch" required />
                    </div>

                    <input type="submit" name="btnSubmit" value="Go" />
                </form>
            </div>
            <footer data-role="footer" data-theme="b">
                <p>Powered by my company</p>
            </footer> 
        </div>
        <script type="text/javascript">
            Modernizr.load([
                {
                    test: Modernizr.mq('(min-device-width: 320px) and (max-device-width: 728px)'),
                    yep : ['mob.css', 'jquery.mobile-1.1.0.css', 'jquery.mobile-1.1.0.js'],
                    nope : 'pc.css'
                }
            ]);

            if (!Modernizr.borderradius) {
                $.getScript("jquery.corner.js", function () {
                    $("input").corner();
                });
            }

            if(!Modernizr.required) {
                $("#frmSearch").submit(function(){
                    if($.trim($("#txtSearch").val().length) == 0){
                        alert('Please, Enter some keyword');
                        return false;
                    }
                });
            }

            $(window).resize(function(){
                if($(window).width() 

            })
        </script>
    </body>
</html> 
```

# compilation - 使用 uCLibc 编译 valgrind

> ID：10699093
> 
> 赞同：3
> 
> 时间：2012-05-22T09:15:24.000
> 
> 标签：compilation, valgrind, uclibc

我正在做一个项目，我想使用**uClibc编译****valgrind**。谁能给我一些关于如何进行的建议？

 **我正在使用 Fedora 和 i386 平台。目标平台也是 i386，稍后将在 MIPS 上运行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:39:47.360

Valgrind 不支持 MIPS 指令集，因此除非您付出很大的努力将 Valgrind 移植到 MIPS 上，否则不可能在此架构上使用 Valgrind。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T04:40:12.147

我们可以使用buildroot 提供的[工具链。](http://buildroot.uclibc.org/downloads/buildroot-2012.02.tar.gz)只需安装它并交叉编译 valgind 。**

# iphone - 如何在目标 C 中更新 SQLite 数据库中的表？

> ID：10699100
> 
> 赞同：2
> 
> 时间：2012-05-22T09:16:02.327
> 
> 标签：iphone, objective-c, xcode, sqlite

我在 sqlite 中手动创建了一个名为“dept”的表，其中包含用户名（作为 Varchar）和密码（作为整数）。

我使用以下代码更新表

```
NSString *database2=[[NSBundle mainBundle]pathForResource:@"deptDatabase" ofType:@"sqlite"];
NSString *databasePath2=[NSString stringWithFormat:@"%@",database2];

const char *dbPath=[databasePath2 UTF8String];
if (sqlite3_open(dbPath, &dbHandler)==SQLITE_OK) {
    NSLog(@"database Opened");
    const char* updateQuery="update dept set password=1234 where username='suren'";
    sqlite3_stmt *stmt;
    if (sqlite3_prepare_v2(dbHandler, updateQuery, -1, &stmt, NULL)==SQLITE_OK) {
        NSLog(@"Query Executed");
    }
}

sqlite3_close(dbHandler); 
```

但表格似乎没有更新。谁能告诉我如何通过更改上述代码来更新表格。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:18:40.253

您不能不更新 mainBundle 中的文件，这些文件是只读的。

要更改数据库，您必须将其复制到文档目录。并使用文档目录中的数据库，而不是主包中的数据库。如果没有文件，则仅将主包中的一个用作要复制到文档目录的有效负载文件。

* * *

为什么在这里创建一个新字符串：

```
NSString *database2=[[NSBundle mainBundle]pathForResource:@"deptDatabase" ofType:@"sqlite"];
NSString *databasePath2=[NSString stringWithFormat:@"%@",database2]; 
```

与`database2`相同`databasePath2`。你只是在这里用尽内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T10:17:02.160

将文件从捆绑包复制到文档目录

```
NSString *databaseName = @"YOUR DB NAME WITH EXTENSION";
// Get the path to the documents directory and append the databaseName
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSString *databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

NSFileManager *fileManager = [NSFileManager defaultManager];
BOOL success=[fileManager fileExistsAtPath:databasePath];

if (!success) {

    NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

    // Copy the database from the package to the users filesystem
    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];  
} 
```

然后你可以在路径 databasePath （文档目录）中工作

```
const char *dbPath=[databasePath UTF8String];
if (sqlite3_open(dbPath, &dbHandler)==SQLITE_OK) {
    NSLog(@"database Opened");
    const char* updateQuery="update dept set password=1234 where username='suren'";
    sqlite3_stmt *stmt;
    if (sqlite3_prepare_v2(dbHandler, updateQuery, -1, &stmt, NULL)==SQLITE_OK) {
        NSLog(@"Query Executed");
    }
}

sqlite3_close(dbHandler); 
```

希望它有帮助..快乐编码:)

# javascript - 从使用 $(#id).val() 获取的值中减去一个整数

> ID：10699102
> 
> 赞同：0
> 
> 时间：2012-05-22T09:16:13.063
> 
> 标签：javascript, jquery, html

为了从使用获取的值中减去整数，`$(#id).val()`我尝试过：

```
$("#hid_count").val() = $("#hid_count").val() - 1; 
```

和：

```
count = $("#hid_count").val(); 
```

这`hid_count`是页面上的隐藏字段。但是，这两种方法都不起作用。页面出现错误。谁能解释这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:18:11.377

```
$("#hid_count").val(parseInt($("#hid_count").val(), 10) - 1); 
```

由于您正在读取字符串，因此您必须先进行`parseInt`算术运算

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:18:21.407

您需要使用`parseInt()`将`val()`字符串从字符串转换为整数，以便算术运算正常工作。

```
$("#hid_count").val(parseInt($("#hid_count").val(),10) - 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T09:17:33.533

```
$("#hid_count").val($("#hid_count").val() - 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:19:57.540

[**工作演示点击这里**](http://jsfiddle.net/Scmsc/5/)

`parseInt`

[http://www.minihowtos.net/jquery-parseint](http://www.minihowtos.net/jquery-parseint)

**代码**

```
alert(" ===> " + (parseInt($("#hid_count").val()) - 1));​ 
```

# c#-4.0 - 如何传递字符串类型的属性

> ID：10699103
> 
> 赞同：2
> 
> 时间：2012-05-22T09:16:13.970
> 
> 标签：c#-4.0, properties

我有以下代码（注意下面的代码不会更新属性）

```
private void queryResultsFilePath_Click(object sender, EventArgs e)
{
        Library.SProc.Browse browser = new Browse();
        browser.selectFile(QueryResultFilePath);
} 
```

和

```
public class Browse
{

    public void selectFile(string propertyName)
    {
        ...
        propertyName = browserWindow.FileName;  
    }
} 
```

现在我意识到我需要更改第二种方法，以便它返回一个字符串并手动将其分配给第一个示例中的属性。

我不确定的是，我认为当我将 ref 类型分配为方法的实际参数时，它在堆栈上的值的副本（即它在堆中的内存地址）被复制到堆栈上的新位置方法形式参数，因此它们都指向堆上的相同内存地址。因此，当我更改形式参数的值时，它实际上会更改存储在堆上的值，从而更改实际参数值。

显然我错过了一些东西，因为我必须返回一个字符串并将其手动分配给属性。如果有人能指出我误解了什么，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:18:20.923

我相信这里缺少的部分是：字符串是不可变的。

尽管您通过引用传递它，但只要有任何尝试改变字符串，就会创建一个新字符串，而旧字符串保持不变。

我相信它是唯一强制不变的引用类型。

来自[MSDN](http://msdn.microsoft.com/en-us/library/362314fe.aspx)：

> 字符串是不可变的——字符串对象的内容在创建对象后不能更改，尽管语法使它看起来好像您可以这样做。例如，当您编写此代码时，编译器实际上会创建一个新的字符串对象来保存新的字符序列，并将该新对象分配给 b。然后字符串“h”就可以进行垃圾回收了。

进一步阅读：

[http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/e755cbcd-4b09-4a61-b31f-e46e48d1b2eb](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/e755cbcd-4b09-4a61-b31f-e46e48d1b2eb)

如果您希望该方法“更改”调用者的字符串，那么您可以使用关键字来*模拟它：*`ref`

```
public void SelectFile(ref string propertyName)
{
    propertyName = browserWindow.FileName;  
} 
```

在这个例子中，参数`propertyName`将被分配到方法中，因为`ref`被使用，这也改变了调用者指向的字符串。请注意，仍然强制执行不变性。`propertyName`曾经指向字符串 A，但在分配后现在指向字符串 B - 旧字符串 A 现在未被引用，将被垃圾收集（但重要的是仍然存在并且没有更改 - 不可变）。如果`ref`不使用关键字，调用者仍将指向 A，而方法将指向 B。但是，由于`ref`使用了关键字，调用者变量现在指向字符串 B。

这与以下示例的效果相同：

```
static void Main(string[] args)
{
    MyClass classRef = new MyClass("A");
    PointToANewClass(ref classRef);
    // classRef now points to a brand new instance containing "B".
}

public static void PointToANewClass(ref MyClass classRef)
{
    classRef = new MyClass("B");
} 
```

**如果您在没有**`ref`关键字的情况下尝试上述操作，即使该类是通过引用传递的，它仍会`classRef`指向包含“A”的对象。

不要混淆字符串语义和`ref`语义。并且不要在通过引用传递某些东西和赋值之间感到困惑。从技术上讲，东西***永远不会***通过引用传递，***指向堆上对象的指针是通过值传递的***——因此`ref`在引用类型上具有上面指定的行为。同样因此不使用`ref`将不允许调用者和方法之间“共享”新的分配，该方法已经收到了它自己的指向堆上对象的指针*副本*，取消引用指针具有通常的效果（查看相同的底层object），但分配给指针不会影响指针的调用者副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:00:01.530

我真的很感谢[Adam Houldsworth](https://stackoverflow.com/users/358221/adam-houldsworth)，因为我终于明白了 .NET 框架如何使用引用参数以及字符串会发生什么。

在 .NET 中有两种数据类型：

*   值类型：原始类型，如 int、float、bool 等
*   引用类型：所有其他对象，包括字符串

在**引用类型**的情况下，对象存储在堆中，变量只保存指向该对象的引用。您可以通过引用访问对象的属性并对其进行修改。当您将其中一个变量作为参数传递时，指向同一对象的引用副本将传递给方法体。因此，当您访问和修改属性时，您正在修改存储在堆上的同一个对象。即，这个类是一个引用对象：

```
 public class ClassOne
    {
        public string Desc { get; set; }
    } 
```

当你这样做时

```
 ClassOne one = new { Desc = "I'm a class one!" }; 
```

引用指向的堆上有一个对象`one`。如果你这样做：

```
 one.Desc = "Changed value!"; 
```

堆上的对象已被修改。如果将此引用作为参数传递：

```
 public void ChangeOne(ClassOne one)
    {
        one.Desc = "Changed value!"
    } 
```

堆上的原始对象也发生了变化，因为`one`持有指向堆上相同对象的原始引用的副本。

但如果你这样做：

```
 public void ChangeOne(ClassOne one)
    {
        one = new ClassOne { Desc ="Changed value!" };
    } 
```

原始对象不变。那是因为`one`它现在指向另一个对象的引用的副本。

如果您通过引用显式传递它：

```
 public void ChangeOne(ref ClassOne one)
    {
        one = new ClassOne { Desc ="Changed value!" };
    } 
```

`one`这个方法内部不是外部引用的副本，而是引用本身，因此，原始引用现在指向这个新对象。

字符串是不可变的。这意味着您不能更改字符串。如果您尝试这样做，则会创建一个新字符串。所以，如果你这样做：

```
 string s = "HELL";
  s = s + "O"; 
```

第二行创建一个新的字符串实例，其值为“HELLO”，“HELL”在堆上被丢弃（留待垃圾回收）。

因此，如果您将它作为这样的参数传递，则无法更改它：

```
 public void AppendO(string one)
    {
        one = one + "O";
    }

    string original =  "HELL";
    AppendO(original); 
```

字符串保持`original`原样。函数内部的代码创建一个新对象，并将其分配给一个对象，该对象是原始引用的副本。但原来一直指向“地狱”。

在**值类型**的情况下，当它们作为参数传递给函数时，它们**是按值传递的**，即函数接收原始值的副本。因此，对函数体内部的对象所做的任何修改都不会影响函数外部的原始值。

问题是，**虽然 string 是一个引用类型，**但它看起来**就像一个值类型**（这适用于比较、传递参数等）。

但是，如上所述，可以使编译器使用`ref`关键字通过引用传递引用类型。这也适用于字符串。

您可以检查此代码，您会看到字符串已被修改（这也适用于`int`或`float`任何其他值类型）：

```
 public static class StringTest
    {
        public static void AppednO(ref string toModify)
        {
            toModify = toModify + "O";
        }
    }

    // test:
    string hell = "HELL";
    StringTest.AppendO(ref hell);
    if (hell == "HELLO")
    {
       // here, hell is "HELLO"
    } 
```

请注意，为避免错误，当您将参数定义为 ref 时，您还必须使用此修饰符传递参数。

无论如何，对于这种情况（和类似情况），我建议您使用更自然的功能语法：

```
 var hell = StringTest.AppendO(hell); 
```

（当然，在这种情况下，该函数将具有此签名和相应的实现：

```
 public static string AppendO(string value)
  {
      return value + "O";
  } 
```

如果要对字符串进行许多更改，则应使用 StringBuilder 类，该类适用于“可变字符串”。

[如何传递字符串类型的属性](https://stackoverflow.com/questions/10699103/how-a-property-of-type-string-is-passed/10699760#10699130)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T09:18:24.220

字符串是不可变的，因此您将它们的副本传递给方法。这意味着副本更改但原始参数保持不变。

# c# - C# - 抓取 XML RESTful Web 服务

> ID：10699106
> 
> 赞同：0
> 
> 时间：2012-05-22T09:16:28.213
> 
> 标签：c#, xml, web-services, rest

我需要从 Web 服务中获取大量 xml 数据。

我使用像这个片段这样的任务发送异步请求

```
LimitedConcurrencyLevelTaskScheduler lcts = new LimitedConcurrencyLevelTaskScheduler(10);
TaskFactory factory = new TaskFactory(lcts);
List<Task> tasks = new List<Task>();
...
tasks.Add(factory.StartNew(() => GetRecords(country, names)));
...
Task.WaitAll(tasks.ToArray()); 
```

Web 服务在后端有很多工作要做，因此很多请求超时，或者我从 Web 服务收到一般错误。

我试图首先调整 LimitedConcurrencyLevelTask​​Scheduler 的数量来解决这个问题。

一些 XML 的大小为 2Mb，所以我使用 XmlReader 读取流并`XmlNode node = new XmlDocument().ReadNode(reader);`用于我需要的数据，但有时程序崩溃或进入死循环（我认为原因是 web 服务的 xml 响应不正确）。

我认为直接从整个响应创建 XDoc 更糟糕。

你能建议我一个可能可靠的解决方案吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:24:02.420

如果格式错误的 XML 是问题的根源，您应该只将 XML 响应作为字符串进行爬网，并将它们保存/排队在本地进行后续处理，当您看到解析爬网 XML 时收到的错误类型时，您可以随着时间的推移进行改进。

在 web 服务超时的情况下，任务应该暂停一段时间然后重试。

**[编辑：]** 对于处理重试，您可以在重试之间使用指数增加的间隔（就像 TCP/IP 一样） - 这样您将获得快速重新连接，以防超时只是非常暂时的并且服务器负载将被缓解快速，以防它严重超载。

重试之间的间隔序列可以是例如 1、2、4、8 秒，...最多 32 秒或另一个经验值，这将是您的最大重试间隔。

您还应该保留未能下载的条目的积压 - 超时可能不是唯一的原因。

# python - 用python搜索句子的词

> ID：10699107
> 
> 赞同：1
> 
> 时间：2012-05-22T09:16:31.330
> 
> 标签：python, mongodb, dictionary, matching, text-mining

我有几个句子存储在 MongoDB 中，还有几个术语词典（每个术语由一个或多个单词组成）。我想在句子上搜索词，但是尝试匹配每个句子中的每个词真的很慢，这将是精确匹配。我怎样才能轻松地进行模糊匹配或类似的事情来找到我的句子术语？

例如，

句子：

时钟基因NPAS2中的Ala394Thr多态性：非霍奇金淋巴瘤风险的昼夜节律调节剂

字典：

Ala394Thr | NPAS-2 | 霍奇金淋巴瘤

结果应该是：

**时钟基因**NPAS2中的****Ala394Thr**多态性：非**霍奇金淋巴瘤风险的昼夜调节因子****

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:30:48.937

我可能会建议您查看专门的搜索引擎，例如 Solr 或 ElasticSearch。它们更适合此类任务。

看看[https://github.com/renctan/mongo-solr](https://github.com/renctan/mongo-solr)如何使用 oplog tailing 做到这一点。**

# asp.net - 如何选择网格的 Datakey 值

> ID：10699110
> 
> 赞同：0
> 
> 时间：2012-05-22T09:16:58.757
> 
> 标签：asp.net

如何选择网格的 Datakey 值。？我试过但只进入选定的索引更改事件。[在我的应用程序中有一个网格。在那个网格中有链接按钮。我的问题是当我单击链接按钮时，我想访问 Datakeynames 中的值。是否有任何方法可以访问 Datakeynames 中的值。或者网格是否有任何其他属性来保留键值]。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:22:23.150

你有你的答案在下面的链接

[如何获取gridview的行数据绑定事件的命令参数](https://stackoverflow.com/questions/7213492/how-to-get-the-command-argument-on-row-data-bound-event-of-gridview)

快乐编码！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:31:53.973

Try like this, Assign your Value in the Command Argument. In RowCommand Event,

```
 if (e.CommandName == "Link")
    {            
        string Value = e.CommandArgument.ToString();
    } 
```

# java - jMeter Slave - 服务器无法启动：java.rmi.RemoteException：无法启动。ip-10-142-111-66 是环回地址

> ID：10699115
> 
> 赞同：7
> 
> 时间：2012-05-22T09:17:23.233
> 
> 标签：java, jmeter, load-testing

我创建了一个准系统 ec2 ubuntu 服务器，仅使用 hte 安装了 jmeter。

```
sudo apt-get install jmeter 
```

该服务器被设计为从属服务器。当我运行 sudo jmeter-server 时，出现以下错误。这个错误让我无处可去，因为它是一个简单的 ubuntu 服务器，据我所知，jmeter apt-get install 安装了所有依赖项。我已经看过这篇文章，但对于解决问题的方法仍然含糊不清。

[JMeter - 在 Linux 上启动 jmeter-server 时出现环回地址错误](https://stackoverflow.com/questions/3150448/jmeter-loopback-address-error-when-launching-jmeter-server-on-linux)

```
 sudo jmeter-server
    [warning] /usr/bin/jmeter: Unable to locate commons-net in /usr/share/java
    [warning] /usr/bin/jmeter: Unable to locate geronimo-activation-1.1-spec in /usr/share/java
    [warning] /usr/bin/jmeter: Unable to locate geronimo-javamail-1.4-provider in /usr/share/java
    [warning] /usr/bin/jmeter: Unable to locate jboss-j2ee in /usr/share/java
    [warning] /usr/bin/jmeter: Unable to locate jdom1 in /usr/share/java
    [warning] /usr/bin/jmeter: No JAVA_CMD set for run_java, falling back to JAVA_CMD = java
    java.lang.Throwable: Could not access /usr/share/jmeter/lib/junit
        at org.apache.jmeter.NewDriver.<clinit>(NewDriver.java:96)
    Created remote object: UnicastServerRef [liveRef: [endpoint:[127.0.1.1:56808](local),objID:[22c4bd9a:13773cb6090:-7fff, 2168779335812031976]]]
    Server failed to start: java.rmi.RemoteException: Cannot start. ip-10-142-111-66 is a loopback address. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-09T02:08:31.103

我遇到了类似的问题，我放弃了 jmeter 的 ubuntu 打包版本，转而使用更新的版本。

你可以在这里找到它们：http: [//archive.apache.org/dist/jmeter/binaries/](http://archive.apache.org/dist/jmeter/binaries/)

我能够像这样启动服务器：

```
wget http://archive.apache.org/dist/jmeter/binaries/apache-jmeter-2.8.tgz
tar -xzf apache-jmeter-2.8.tgz 
export RMI_HOST_DEF=-Djava.rmi.server.hostname=XXX.XXX.XXX.XXX
apache-jmeter-2.8/bin/jmeter-server 
```

注意：这也解决了[这里讨论的问题](https://stackoverflow.com/questions/3150448/jmeter-loopback-address-error-when-launching-jmeter-server-on-linux)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T19:09:19.577

我记得遇到过这样的问题。

从 jmeter 盒子上的 /etc/hosts 文件中有什么？

也许尝试改变这个

```
127.0.1.1 <your server name> localhost 
```

对此

```
127.0.1.1 localhost 
```

# android - 用于 Android 上 BPM 跟踪的 Aubio

> ID：10699117
> 
> 赞同：6
> 
> 时间：2012-05-22T09:17:28.257
> 
> 标签：android, c, audio-processing, aubio, beat-detection

我正在开发一个需要 BPM 跟踪的 android 音频项目。我决定自己写不是一个好主意，环顾四周后，我发现了一些进行 BPM 跟踪的库，例如 aubio、vamp、echonest 等。在很多情况下，aubio 似乎是一个不错的选择。问题是我找不到可以帮助理解如何使用该库的好的文档，例如兼容哪种输入音频格式（我应该在将音频传递给函数之前对其进行预处理）等。

您能否向我指出一些开源项目的一些文档或 aubio 实现（在 android 上将是一个奖励）。

如果您认为有一种更简单的方法（另一种算法/库）可以移植到 android（最好在 c 中），请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:53:39.257

我使用 aubio 提供的 make 文件为 android 交叉编译它。我遵循了一些这样的教程，这些教程[展示](http://www.cmumobileapps.com/2011/08/31/compiling-open-source-libraries-with-android-ndk-part-2/)了如何交叉编译开源库。至于 aubio 的文档，我只是用它几次来了解它是如何工作的（我研​​究了这些例子是如何工作的）并阅读了作者的博士论文，以大致了解技术内容。

# php - AdLDAP -- 验证测试失败。它本质上是否需要 SSL？

> ID：10699121
> 
> 赞同：1
> 
> 时间：2012-05-22T09:17:40.910
> 
> 标签：php, ldap, adldap

我正在用我的 PHP 测试 AdLDAP 库。由于我是 LDAP 的新手，我不确定出了什么问题。

这就是我开始上课的方式：

```
$adldap = new adLDAP( array(
    'base_dn'=>'DC=xxxx,DC=xxxx,DC=sg',
    'account_suffix'=>'@xxxx.xxxx.sg',
    'domain_controllers'=>array('ns01.xxxx.xxxx.sg','dc02.xxxx.xxxx.sg'),
    'ad_port'=>389,
    'use_tls'=>true
)); 
```

然后当我测试`Authentication`样品时，它总是说`"Failed!"`。
唯一的一件事是我们的服务器不**使用 SSL**。
是因素吗？
或者
还有什么其他错误（或）需要检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T07:55:14.407

这是不正确的，TLS 使用端口 389，SSL 使用 636。

看来您有正确的 TLS 设置，但您的服务器没有配置它。也许它仅配置为 SSL。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T02:51:51.073

如果使用 TLS，则默认端口为 636。

# vb.net - Alpha透明窗口窗体

> ID：10699124
> 
> 赞同：0
> 
> 时间：2012-05-22T09:18:06.960
> 
> 标签：vb.net, winforms, vb.net-2010, windows-applications

我得到了以下代码，将带有 alpha 通道的 PNG 加载到表单上并重塑表单以匹配 alpha 通道。

```
Public Function applyAlphaForm(ByVal f As Form, ByVal bitmap As Bitmap, Optional ByVal opacity As Byte = 255) As Boolean
    f.FormBorderStyle = FormBorderStyle.None
    Dim style As Long
    style = Win32.GetWindowLong(f.Handle, Win32.GWL_EXSTYLE)
    If Not (style And Win32.WS_EX_LAYERED = Win32.WS_EX_LAYERED) Then
        style = style Or Win32.WS_EX_LAYERED
        Win32.SetWindowLong(f.Handle, Win32.GWL_EXSTYLE, style)
    End If
    Return SetBitmap(f, bitmap, opacity)
End Function

Public Function SetBitmap(ByVal f As Form, ByVal bitmap As Bitmap, ByVal opacity As Byte) As Boolean
    f.Height = bitmap.Height
    f.Width = bitmap.Width
    If bitmap.PixelFormat <> PixelFormat.Format32bppArgb Then
        f.BackgroundImage = bitmap
        f.TransparencyKey = bitmap.GetPixel(0, 0)
        Return True
    End If

    Dim screenDC As IntPtr = Win32.GetDC(IntPtr.Zero)
    Dim memDC As IntPtr = Win32.CreateCompatibleDC(screenDC)
    Dim hBitmap As IntPtr = IntPtr.Zero
    Dim oldBitmap As IntPtr = IntPtr.Zero

    Try
        hBitmap = bitmap.GetHbitmap(Color.FromArgb(0)) 'grab a GDI handle from this GDI+ bitmap
        oldBitmap = Win32.SelectObject(memDC, hBitmap)

        Dim size As Win32.Size = New Win32.Size(bitmap.Width, bitmap.Height)
        Dim pointSource As Win32.Point = New Win32.Point(0, 0)
        Dim topPos As Win32.Point = New Win32.Point(f.Left, f.Top)
        Dim blend As Win32.BLENDFUNCTION = New Win32.BLENDFUNCTION()
        blend.BlendOp = Win32.AC_SRC_OVER
        blend.BlendFlags = 0
        blend.SourceConstantAlpha = opacity
        blend.AlphaFormat = Win32.AC_SRC_ALPHA

        Win32.UpdateLayeredWindow(f.Handle, screenDC, topPos, size, memDC, pointSource, 0, blend, Win32.ULW_ALPHA)

    Catch ex As Exception
    Finally
        Win32.ReleaseDC(IntPtr.Zero, screenDC)
        If hBitmap <> IntPtr.Zero Then
            Win32.SelectObject(memDC, oldBitmap)
            Win32.DeleteObject(hBitmap)
        End If
        Win32.DeleteDC(memDC)
    End Try
    Return True
End Function 
```

很好很简单，但是如果我在表单上放置一些控件（按钮、文本框...），它们就会消失。我邀请**UpdateLayeredWindow**将在表单 hDC 上绘制，因此我们看不到它后面的任何内容。那么如何在表单上绘制一些表单控件呢？在调用 api 之前，我尝试遍历所有控件并渲染为 png 位图，但这将是静态图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:28:17.933

所以我客人我必须创建两个，一个是透明的背景表单，一个是带有控件的前景表单。控制窗体将只显示控制区域。

# android - 预缩放并支持不同尺寸的Android屏幕

> ID：10699125
> 
> 赞同：0
> 
> 时间：2012-05-22T09:18:07.413
> 
> 标签：android, screen, screen-resolution

我正在阅读[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)并试图了解预缩放的工作原理。

我有以下针对银河选项卡优化的布局文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativelayoutmain"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/mainmenu"
>
<ImageButton
android:id="@+id/start_button"
android:layout_marginLeft="150dip"
android:layout_marginTop ="70dip"
android:layout_width="500dip"
android:layout_height="214dip"
android:background="@drawable/startsession"
android:contentDescription="@string/descbuttonstart"
/> 
```

我已将屏幕图像放在 drawable-ldpi 文件夹中。问题是，当我在较小的屏幕上（使用模拟器）测试应用程序时，屏幕无法正确缩放 - 按钮很大且位置不正确。

是否有可能只为所有屏幕提供一个布局文件，如果是这样，让它工作的秘诀是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:22:16.587

屏幕尺寸和屏幕分辨率是两个独立的东西。ldpi 文件夹中的资源用于低分辨率且不需要小屏幕尺寸。我更喜欢的方式是为高分辨率定义资源并让它们按比例缩小到其他资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:50:57.490

不，AFAIK不可能你需要三个不同的文件夹（hdpi，mdpi，ldpi），按钮，图像等具有不同的尺寸，并且再次布局你需要三个布局文件夹（布局小，布局中，布局-大的）

# wso2 - WSO2 BPS - 消息的到达顺序

> ID：10699137
> 
> 赞同：1
> 
> 时间：2012-05-22T09:18:46.717
> 
> 标签：wso2, bpel, business-process

我已经在[这里](https://stackoverflow.com/q/10348635/1360773)发布了一个问题，我终于自己找到了问题的根源。但问题仍未解决。

到达的消息存储在队列中，直到找到匹配的活动。但是，如果活动没有按照消息到达的顺序被激活，则该进程将阻塞。

我建模了一个图表，可以从[这里](https://i.imgur.com/3hQiR.png)获得，相应的 BPEL 包可以从[这里](http://dl.dropbox.com/u/21678026/testCase.zip)下载。第一个进程在 Receive2 上保持阻塞，而第二个进程完成。

我正在测试 BPS 版本 2.1.2

当多个进程相互通信时，我并不总是知道一条消息会在另一个消息之前还是之后到达。我认为这应该是可能的，我认为没有理由不这样做：消息存在于 H2 数据库中，因此合适的查询应该能够返回它们。

在此先感谢您的帮助。

# c# - ValidateRequest="false" 无效

> ID：10699138
> 
> 赞同：0
> 
> 时间：2012-05-22T09:18:47.200
> 
> 标签：c#, asp.net-mvc-3, validation

我需要发送 html。我得到错误（这台机器翻译）：

> 检测到从客户端收到的 Request.Form 的潜在危险值 (Description = "eqqdaqd asda
> 
> 说明：验证请求的过程发现客户端输入值存在潜在危险，查询处理被中断。此值可能表示试图破坏应用程序的安全性，例如“跨站点脚本”攻击。要允许页面覆盖应用程序的默认扫描请求，请参阅 httpRuntime 配置属性以设置 requestValidationMode requestValidationMode = "2.0"。例子： 。设置此值后，您可以通过在 Page 指令或配置部分中设置 validateRequest = "false" 来禁用请求验证。但是，在这种情况下，敦促在应用程序中明确检查所有条目。有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkId=153133](http://go.microsoft.com/fwlink/?LinkId=153133)。

```
 public ActionResult Create()
        {
            this.ValidateRequest = false;
            return View();
        }

        //
        // POST: /Admin/News/Create

        [HttpPost]
        public ActionResult Create(NewsView model)
        {
            this.ValidateRequest = false;
            try
            {
               //logic

                return RedirectToAction("Index");
            }
            catch
            {
                return View();
            }
        } 
```

This controller is in the arena admin. I set in web.config

```
<system.web>
    <httpRuntime requestValidationMode="2.0" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:27:17.330

You could decorate your controller action with the [`ValidateInput`](http://msdn.microsoft.com/en-us/library/system.web.mvc.validateinputattribute.aspx) attribute:

```
[HttpPost]
[ValidateInput(false)]
public ActionResult Create(NewsView model)
{
    ...
} 
```

In your example you are setting the property inside the POST controller action but that's too late because validation is performed before invoking the action. Or if you want to disable validation only for a given property on your view model you could decorate it with the [`AllowHtml`](http://msdn.microsoft.com/en-us/library/system.web.mvc.allowhtmlattribute.aspx) attribute:

```
[AllowHtml]
public string Description { get; set; } 
```

Now you no longer need to decorate the controller action with the `ValidateInput` attribute.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:22:18.770

You can try to use [AllowHtmlAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.allowhtmlattribute%28v=vs.98%29.aspx) Or if , you want to use `ValidateRequest` you should also set `requestValidationMode = "2.0"`

# android - ViewPager 中的 VideoView

> ID：10699139
> 
> 赞同：0
> 
> 时间：2012-05-22T09:18:48.927
> 
> 标签：android

我的主要活动布局由 ViewPager 组成。这个 ViewPager 中有各种页面，它们通过一组 XML 布局文件进行扩展。

我拥有的一个 XML 布局文件中有一个 VideoView。如何在其中初始化此 VideoView？

这是Activity的onCreate方法。我无法初始化 VideoView，因为它没有被 ViewPagerAdapter 充气。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);      

    ViewPagerAdapter adapter = new ViewPagerAdapter(this);
    ViewPager pager = (ViewPager) findViewById(R.id.viewpager);
    TitlePageIndicator indicator = (TitlePageIndicator) findViewById(R.id.indicator);
    pager.setAdapter(adapter);
    indicator.setViewPager(pager);

// mVideoView is null.. where should I init this?   
    VideoView mVideoView = (VideoView) findViewById(R.id.myvideoview);
    mVideoView.setVideoPath(path);
    mVideoView.setMediaController(new MediaController(this)); 
    mVideoView.start();

} 
```

这是 ViewPagerAdapter 中的 instantiateItem 方法。

```
public Object instantiateItem( View pager, int position )
{
    //Inflate the correct layout
    LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    //layouts[] is an int[] that points to resources such as R.layout.start_page
    View inflatedView = layoutInflater.inflate(layouts[position], null);

    ((ViewPager)pager).addView(inflatedView,0);

    // is this the correct way to do this?
    if (position == 1) {
        VideoView mVideoView = (VideoView) inflatedView.findViewById(R.id.myvideoview);
        mVideoView.setVideoPath(path);
        mVideoView.start();
    }
    return inflatedView;

} 
```

我认为它应该在这里初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:44:42.293

由于允许适配器删除视图，因此您必须在代码中对其进行初始化，并为适配器提供一种访问它的方法，以便在需要时使用它。

# android - SpinnerButtonAdapter 使用 ASyncTask 自动从数据库中选择

> ID：10699145
> 
> 赞同：0
> 
> 时间：2012-05-22T09:19:11.297
> 
> 标签：android, android-asynctask

我有一个从数据库填充的微调器。这又是从 Web 服务中提取的，因此不可能对值进行硬编码。

微调器是用户填写并保存的表单的一部分，我需要他们能够返回并编辑值，所以我试图根据选择的内容自动填充它。

问题是微调器并不总是选择，这种情况经常发生。我认为这是因为我正在使用 asynctask 异步加载数据，并且在它检索数据时微调器尚未加载。我有记录显示，例如，微调器项目 4 是从数据库中提取的，但微调器显示没有任何选择。

找出加载程序何时完成以便我可以填充（即选择）列表中的相关项目的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:01:44.877

我把调用放在加载完成方法的末尾，

```
@Override
    public void onLoadFinished(Loader<Cursor> aLoader, Cursor aCursor) {
        int id = aLoader.getId();

        Loader<Cursor> cursorLoader = null;
        switch (id) {
            mAdapter.swapCursor(aCursor);
        }
        if (inEditMode) {
            fillInValues();
        }
    } 
```

# apache-flex - 为什么我的网格布局太奇怪了

> ID：10699146
> 
> 赞同：0
> 
> 时间：2012-05-22T09:19:12.207
> 
> 标签：apache-flex, flash-builder, flex4.5, mxml

我试图了解 gridlayout 是如何工作的，我对结果感到非常失望。

事实上，我的布局并不适用宽度 GridItem。

对于每个 mx:GridRow，GridItem 的总 colspan 为 6。

起初，我定义了 GridRow，宽度为百分比，但正如您所见，即使宽度和 colspan 数相同，GridItem 的大小也不相同！

主要问题在 GridRow 1 和 GridRow 2 上，两个 dropdowlist 都太大了！

```
 <s:VGroup id="mainContainer" width="{contentGroup.width}" height="{contentGroup.height}"  >

    <!-- partie centrale-->

    <s:VGroup  height="100%" width="100%">

        <s:BorderContainer width="100%" verticalCenter="0">
            <mx:Grid width="100%" height="100%"
                     paddingBottom="5" paddingTop="5" paddingLeft="5" paddingRight="5">

                <mx:GridRow id="l1" width="100%">
                    <mx:GridItem colSpan="1" width="15%" verticalAlign="middle" horizontalAlign="right">
                        <s:Label text="Label" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="2" width="35%" horizontalAlign="left">
                        <s:DropDownList id="cbCivilCor" width="100%"
                                        prompt="" />
                    </mx:GridItem>
                    <mx:GridItem colSpan="1" width="15%" verticalAlign="middle" horizontalAlign="right">
                        <s:Label text="Label"  width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="2" horizontalAlign="left" width="35%">
                        <s:DropDownList id="cbSpecCor" width="100%"
                                        prompt=""/>
                    </mx:GridItem>
                </mx:GridRow>

                <mx:GridRow id="l2" width="100%">
                    <mx:GridItem colSpan="1" verticalAlign="middle" horizontalAlign="right">
                        <s:Label text="Label" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="2" horizontalAlign="left" >
                        <s:TextInput id="tiNom" width="100%"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="1" verticalAlign="middle" horizontalAlign="left">
                        <s:Label text="Label" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="2" horizontalAlign="left" width="100%">
                        <s:TextInput id="tiPrenom" width="100%"/>
                    </mx:GridItem>
                </mx:GridRow>

                <mx:GridRow id="l3" width="100%">
                    <mx:GridItem colSpan="1" verticalAlign="middle" horizontalAlign="right">
                        <s:Label text="Label" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="4" horizontalAlign="left" width="100%">
                        <s:TextInput id="tiAdr1" width="100%"/>
                    </mx:GridItem>

                </mx:GridRow>
                <mx:GridRow id="l4" width="100%">
                    <mx:GridItem colSpan="1" verticalAlign="middle" horizontalAlign="right">
                    </mx:GridItem>
                    <mx:GridItem colSpan="4" horizontalAlign="left">
                        <s:TextInput id="tiAdr2" width="100%"/>
                    </mx:GridItem>
                </mx:GridRow>

                <mx:GridRow id="l5" width="100%">
                    <mx:GridItem colSpan="1" verticalAlign="middle" horizontalAlign="right">
                        <s:Label text="Label" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="1" horizontalAlign="left">
                        <s:TextInput id="tiCP" width="100%"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="1" verticalAlign="middle" horizontalAlign="right">
                        <s:Label text="Label" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="2" horizontalAlign="left">
                        <s:TextInput id="tiVille" width="100%"/>
                    </mx:GridItem>
                </mx:GridRow>

                <mx:GridRow id="l6" width="100%">
                    <mx:GridItem colSpan="1" verticalAlign="middle" horizontalAlign="right">
                        <s:Label text="Label" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="1" horizontalAlign="left">
                        <s:DropDownList id="cbTypeTel1" 
                                        prompt="" width="100%"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="1" horizontalAlign="left">
                        <s:TextInput id="tiNumTel1" width="100%"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="2" horizontalAlign="left">
                        <s:TextInput id="tiRemTel1" width="100%"/>
                    </mx:GridItem>
                </mx:GridRow>

                <mx:GridRow id="l7" width="100%">
                    <mx:GridItem colSpan="1" verticalAlign="middle" horizontalAlign="right">
                    </mx:GridItem>
                    <mx:GridItem colSpan="1" horizontalAlign="left">
                        <s:DropDownList id="cbTypeTel2" 
                                        prompt="" width="100%"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="1" horizontalAlign="left">
                        <s:TextInput id="tiNumTel2" width="100%"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="2" horizontalAlign="left">
                        <s:TextInput id="tiRemTel2" width="100%"/>
                    </mx:GridItem>
                </mx:GridRow>

                <mx:GridRow id="l8" width="100%">
                    <mx:GridItem colSpan="1" verticalAlign="middle" horizontalAlign="right">
                        <s:Label text="Label" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="1" horizontalAlign="left">
                        <s:TextInput id="tiFax" width="100%"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="1" horizontalAlign="left">
                        <s:Label text="Label" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="2" horizontalAlign="left">
                        <s:TextInput id="tiMail" width="100%"/>
                    </mx:GridItem>
                </mx:GridRow>

                <mx:GridRow id="l9" width="100%">
                    <mx:GridItem colSpan="3" verticalAlign="middle" horizontalAlign="right">
                        <s:Label text="Label tres long" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="3" horizontalAlign="left">
                        <s:DropDownList id="cbAppelCourr" 
                                        prompt="" width="100%"/>
                    </mx:GridItem>
                </mx:GridRow>

                <mx:GridRow id="l10" width="100%">
                    <mx:GridItem colSpan="3" verticalAlign="middle" horizontalAlign="right">
                        <s:Label text="Label tres long" width="100%" horizontalCenter="0" textAlign="right"/>
                    </mx:GridItem>
                    <mx:GridItem colSpan="3" horizontalAlign="left">
                        <s:DropDownList id="cbPoliCourr" 
                                        prompt="" width="100%"/>
                    </mx:GridItem>
                </mx:GridRow>
            </mx:Grid>
        </s:BorderContainer>

        <customNavTab:IconToggleButtonBar id="tbbAction" height="6%" 
                                          dataProvider="{buttons}"
                                          itemClick="changeBbHandler(event)" labelPlacement="bottom"
                                          paddingBottom="2" selectedIndex="-1" toggleOnClick="false"
                                          horizontalAlign="center"
                                          bottom="3"
                                          width="100%"/>

    </s:VGroup>

</s:VGroup> 
```

![在此处输入图像描述](../Images/1f7ffca367b1ad0627a4f9a533fb401f.png)

那么，你能向我解释为什么布局不符合我的希望！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:46:43.553

问题是您`GridItem`的 s 不一致。您可以在所有单元格线下绘制一条假想线，并且它们需要对齐，因为这是网格布局。如果在一种情况下，您说您希望一个单元格为 35%，而将其正下方的一个单元格设置为 100%，那么您手头就有问题了。如果您要使用网格布局，单元格宽度需要保持一致......出于这个原因，我更喜欢网格布局，但我相信您可以解决它。

采取这种方法：

`1`. 注释掉除第一行之外的所有内容。凉爽的！它以您想要的方式布置。

`2`. 现在取消注释第二行。

你的布局已经搞砸了。为什么？因为`GridItem`第二行所有的s都`width="100%"`设置了，与第一行的宽度不一致。

`3`. 将宽度设置为与第一行相同的百分比。还要确保将其中的输入控件拉伸到 100%。

冲洗并重复。

# c# - 使用 selenium webdriver C# 获取 DOCTYPE

> ID：10699148
> 
> 赞同：2
> 
> 时间：2012-05-22T09:19:13.330
> 
> 标签：c#, selenium, webdriver, doctype, w3c-validation

我将 Selenium webdriver 用于 UI 自动化目的。下面是我的示例代码

```
IWebDriver driver = new OpenQA.Selenium.IE.InternetExplorerDriver();
    string url ="http://stackoverflow.com";
    driver.Navigate().GoToUrl(url);
    string pagesource = driver.PageSource; 
```

pagesource 变量没有文档类型。我需要知道用于[W3C 验证](http://validator.w3.org)的 DOCTYPE 。有什么方法可以通过 selenium 获取 html 源的 DOCTYPE 吗？

[该线程](https://groups.google.com/group/webdriver/browse_thread/thread/e8fc1d5b77ec3a9d "这个线程")显示无法通过 selenium 获取 html 源的 Doctype，而是您可以从 .net 发出 HTTP 请求并获取 DOCTYPE。我不想为获取 DOCTYPE 做一个单独的 HTTP 请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:52:28.677

使用 FirefoxDriver 而不是 InternetExplorerDriver 将为您提供 DOCTYPE。不幸的是，这不能解决您的问题 - 您使用 driver.PageSource 获得的源代码已经被浏览器预处理，因此尝试验证该代码不会给出可靠的结果。

不幸的是，没有简单的解决方案。

如果您的页面没有密码保护，您可以使用“通过 uri 验证”方法。

否则需要获取页面源。我知道两种方法（我在我的项目中都实现了）。一种是使用代理。如果您使用 C#，请查看[FiddlerCore](http://www.fiddler2.com/fiddler/Core/)。另一种方法是使用 javascript 和 XMLHttpRequest 发出另一个请求。您可以[在此处找到示例](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/events/EventFiringWebDriver.html)（在页面中搜索 XMLHttpRequest）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:33:31.937

对于 W3C 验证，如果我们通过 selenium webdriver 进行自动化，基本上我们会遇到 3 个问题。

1.  由于 driver.Pagesource 不可靠，因此获取正确的页面源。
2.  获取 HTML 源的 doctype。
3.  处理通过 ajax 调用呈现的控件。由于我们无法在页面源中访问这些控件，我们如何获得页面的确切“生成源”？

上述所有事情都可以通过 selenium web driver 执行 javascript 来完成。

在名为“htmlsource.txt”的文本文件中，将其存储在下面的代码片段中。

* * *

```
function outerHTML(node){
    // if IE, Chrome take the internal method otherwise build one as lower versions of firefox
        //does not support element.outerHTML property
  return node.outerHTML || (
      function(n){
          var div = document.createElement('div'), h;
          div.appendChild( n.cloneNode(true) );
          h = div.innerHTML;
          div = null;
          return h;
      })(node);
  }

 var outerhtml = outerHTML(document.getElementsByTagName('html')[0]);
var node = document.doctype;
var doctypestring="";
if(node)
{
     // IE8 and below does not have document.doctype and you will get null if you access it.

 doctypestring = "<!DOCTYPE "
         + node.name
         + (node.publicId ? ' PUBLIC "' + node.publicId + '"' : '')
         + (!node.publicId && node.systemId ? ' SYSTEM' : '') 
         + (node.systemId ? ' "' + node.systemId + '"' : '')
         + '>';
         }
         else

         {

             // for IE8 and below you can access doctype like this

         doctypestring = document.all[0].text;
         }
return doctypestring +outerhtml ; 
```

* * *

现在使用 doctype 访问完整的 AJAX 呈现的 HTML 源的 C# 代码

* * *

```
 IJavaScriptExecutor js = (IJavaScriptExecutor)driver;
            string jsToexecute =File.ReadAlltext("htmlsource.txt");
            string completeHTMLGeneratedSourceWithDoctype = (string)js.ExecuteScript(jsToexecute); 
```

# javascript - 为什么 .next('li:visible') 或 .prev('li:visible') 不能跳过不可见元素？

> ID：10699149
> 
> 赞同：2
> 
> 时间：2012-05-22T09:19:13.683
> 
> 标签：javascript, jquery, html, combobox

我正在制作一个选择控件，它在“li”中显示选项列表，并允许用户在 li 中上下滚动。由于 li 有时可以被过滤，它们将通过“.hide”呈现为不可见，给我以下标记：

```
<input type="text" id="comboBox" />
<ul id="comboBoxData">
    <li style="display:none">1</li>
    <li>12</li>
    <li>123</li>
    <li>1234</li>
    <li style="display:none">12345</li>
    <li style="display:none">123456</li>
    <li>1234567</li>
    <li>12345678</li>
</ul> 
```

我有以下 JQuery 代码来处理箭头键控件：

```
$('#comboBox').bind('keypress', function(e) {
    if (e.keyCode >= 38 && e.keyCode <= 41) {
        if ($("#comboBoxData li.selected").length > 0) {
            var current = $("#comboBoxData li.selected");
            if (e.keyCode == 38) {
                $("#comboBoxData li.selected").prev('li:visible').addClass('selected');
            } else if (e.keyCode == 40) {
                $("#comboBoxData li.selected").next('li:visible').addClass('selected');
            }
            current.removeClass('selected');
        } else {
            $("#comboBoxData li:visible:first").addClass('selected');
        }
        $("#comboBox").val($("#comboBoxData li.selected").html());
    }
}); 
```

使用以下 CSS 清楚地标记我选择了哪个元素：

```
.selected
{
    background-color:Navy;
    color:White;
} 
```

我的问题是这样的，在我给出的示例中，当用户按下“向下”按钮时，正在选择“12”的 LI，并且向上和向下按钮对于“12”到“1234”正常工作，但是在那里他们停下来找不到“1234567”，因为设置为“显示：无”的两个 li 之间存在间隙。有没有解决的办法？也许可以替代 .next() 和 .previous()？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T09:21:13.167

您需要使用[`nextAll()`](http://api.jquery.com/nextAll)or[`prevAll()`](http://api.jquery.com/prevAll)代替。

`next()`并且`prev()`只有匹配选择器时才会匹配上一个/下一个元素。`nextAll()`并`prevAll()`在所有下一个/上一个元素中搜索匹配项。

要选择第*一个*上一个/下一个元素，请尝试；

```
nextAll('your-selector').first() 
```

或者

```
nextAll('your-selector:first') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:23:28.677

您使用的方法仅适用于下一个项目，如果该项目与选择器不匹配，则无法返回任何项目。您需要使用[`nextAll`](http://api.jquery.com/nextAll)或[`prevAll`](http://api.jquery.com/pervAll)收集所有可能的元素，以使用您的选择器进行过滤。

看看这个jsfiddle：

[http://jsfiddle.net/6WxAZ/2/](http://jsfiddle.net/6WxAZ/2/)

# iphone - RESTKIT：请求不发送到服务器

> ID：10699156
> 
> 赞同：-1
> 
> 时间：2012-05-22T09:19:31.907
> 
> 标签：iphone, restkit

我向服务器发送请求但未成功执行。

这是纽约代码：

```
RKClient *client = [RKClient clientWithBaseURL:@"http://10.0.0.37:7070/TPServer/ws/feedback/"]; 

    RKParams *rkp = [RKParams params]; 
    [rkp setValue:@"ek367t27856vuth45tyv45th89" forParam:@"deviceid"]; 
    [rkp setValue:@"demo" forParam:@"source"]; 
    [rkp setValue:@"3.4" forParam:@"rating"]; 

    [client post:@"new" params:rkp delegate:self]; 
```

我做错了吗？？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-31T09:36:22.737

似乎在 restkit **v0.10.0**中，我们可以通过 NSDictionary 将数据发送到服务器。

但是如果我们想通过多部分发布数据，我们可以使用：

```
RKParams *rkp = [RKParams params]; 
```

来自 RKParams 的数据会将数据发送到服务器的多部分部分。因此，服务器可能不应该包含任何简单的 Post 部分。

# java - 在 NetBeans 中工作正常，构建时有一些错误

> ID：10699157
> 
> 赞同：0
> 
> 时间：2012-05-22T09:19:35.730
> 
> 标签：java, netbeans

我处于非常非常沮丧的境地。我的程序在 netbeans 中运行 100%，但是当我构建它时它有一些问题。也就是说，在我的程序中，有一个接口和10个实现类。程序根据用户保存文件的方式调用正确正确的实现类（例如：如果用户将其保存为game.yellow，它将调用“YellowImpl.java”，如果保存为game.red，那么“RedImpl.java”同样） .

但是当它建成时，它称一切都很好，而不是 YellowImpl！这意味着，如果用户将其保存为 game.red，它将正确调用“RedImpl”，并且与所有其他实现相同，而不是 YellowImpl。当用户将文件保存为 game.yellow 时，程序什么也不做！！！但是，当它在 netbeans 中时，这不会发生！我也尝试过清洁和构建，但仍然不好！这是什么原因造成的？请帮忙！

但是，我无法提供代码，因为它有很多编码

PS：我也在使用一些库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:23:47.727

很难准确理解您的解释和没有代码存在什么问题。但是，我假设您对实现命名约定有疑问。

也许下面的链接可以提供帮助。

[Java 接口/实现命名约定](https://stackoverflow.com/questions/2814805/java-interfaces-implementation-naming-convention)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:22:32.467

非常感谢各位的回复。但是，我设法找到了问题所在。那是一个简单的，大写的案例！我有一个名为“kolor”的包，所有的实现都在里面。在我的“YelloImpl”课程中，我将包称为“Kolor”（注意“K”是大写字母）。在netbeans中很好，但在外面却不是。清除这一切后，一切顺利。再次感谢大家的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:40:55.297

我同意@Rhys：很难理解您的应用程序中发生了什么。让我给你一个建议：不要认为（即使是 1 秒）Java 编译器、JVM 等存在错误。这绝对是你的错误。

如何找到它？我建议你使用远程调试。使用启用的远程调试器在 IDE（在您的情况下为 NetBeans）之外运行您的应用程序，使用 net bean 连接到它并调试您的应用程序。我相信你会在几分钟内解决这个问题。

如何启用远程调试？将以下长字符串添加到您的 java 执行命令行：

`-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n`

如果在程序执行的最开始发生了一些事情，请使用`suspend=y`.

现在从 NetBeans 连接到此应用程序。很简单，`8000`根据你的应用配置配置成port即可。

而已。祝你好运。

# php - 从查询字符串中获取变量

> ID：10699159
> 
> 赞同：0
> 
> 时间：2012-05-22T09:19:40.250
> 
> 标签：php

我试图从 URL 获取查询字符串中的变量。但不知何故，它只是得到一个变量，而不是从查询字符串中获取所有变量。我真的不知道我的代码出了什么问题。这是我想从无效表单中打印出错误的代码：

```
<?php       
            displayForm();
            function displayForm(){
                ?>                    
                <form action="./prod_add_action.php" method="post" name="addproductForm">
                    <fieldset>
                        <legend>Online Ordering System Setup</legend>                        
                        <label for="product_name">Product Name: </label><input type="text" name="product_name" value="" /><?php echo $_GET["name_error"]; ?>
                        <label for="product_date">Product Date: </label><input type="text" name="product_date" value="" /><?php echo $_GET["date_error"]; ?>
                        <label for="product_price">Product Price: </label><input type="text" name="product_price" value="" /><?php echo $_GET["price_error"]; ?>
                        <input name="add_button" type="submit" value="Add" />
                        <input name="reset_button" type="reset" value="Clear" />
                    </fieldset>
                </form>
                <?php
            }
            ?> 
```

这是我创建查询字符串的代码：

```
$query_string = "name_error=" .urlencode($name_error) ."&amp;date_error=" .urlencode($date_error) ."&amp;price_error=" .urlencode($price_error);
            header("Location: ./prod_add.php?$query_string");
            exit(); 
```

在第一个代码中，页面只打印第一个 $_GET['name_error']，而它应该包括 $_GET['date_error'] 和 $_GET['price_error。'] 这是地址：

> [http://example.com/prod_add.php?name_error=Product+name+must+be+characters+only&date_error=Product+date+must+be+input+as+this+formate+DD-MM-YYYY&price_error=Product+ price+must+be+float+number+only](http://example.com/prod_add.php?name_error=Product+name+must+be+characters+only&date_error=Product+date+must+be+input+as+this+formate+DD-MM-YYYY&price_error=Product+price+must+be+float+number+only)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:21:50.920

您应该使用`&`而不是`&amp;`'s ？

```
$query_string = "name_error=" .urlencode($name_error) ."&date_error=" .urlencode($date_error) ."&price_error=" .urlencode($price_error);
            header("Location: ./prod_add.php?$query_string");
            exit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:25:58.130

改为：`&amp;`_`&`

```
$query_string = "name_error=" . urlencode($name_error) . "&date_error=" . urlencode($date_error) . "&price_error=" . urlencode($price_error);
header("Location: ./prod_add.php?$query_string");
exit(); 
```

# c# - 从 wpf 中的复选框列表中查找特定复选框

> ID：10699160
> 
> 赞同：0
> 
> 时间：2012-05-22T09:19:57.647
> 
> 标签：c#, wpf, checkbox

我的代码如下

```
 <ListBox x:Name="lstbxRefMarket" Margin="5,5,5,5" BorderThickness="0" Height="100" VerticalAlignment="Stretch">
        <ListBox.ItemTemplate>
            <HierarchicalDataTemplate>
                <CheckBox Name="chkbxRefMarket" Content="{Binding Market}" CommandParameter="{Binding MarketId}" Tag="{Binding MarketId}" IsChecked="{Binding Checked}" Checked="chkbxRefMarket_Checked" Unchecked="chkbxRefMarket_Unchecked"  Foreground="Blue"/>
            </HierarchicalDataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

现在在后面的代码中，我需要从 chkbxRefMarket 列表中取消选中 MarketId 为 8 的特定复选框正如您从代码中看到的那样，复选框将具有 CommandParameter ，标记为 MarketId

如何在列表中找到具有该市场 id 的特定复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:42:22.830

为什么不简单地找到正确的项目并设置其`Checked`属性。关联的 CheckBox 绑定到该属性并将自动取消选中。

下面的代码假定您的数据项类是`MyItem`.

```
IEnumerable<MyItem> items = lstbxRefMarket.Items.OfType<MyItem>();
MyItem item = items.FirstOrDefault(i => i.MarketId == 8);

if (item != null)
{
    item.Checked = false;
} 
```

# c# - 检索 SQL 表中的列数 - C#

> ID：10699166
> 
> 赞同：4
> 
> 时间：2012-05-22T09:20:19.447
> 
> 标签：c#, .net, sql, sql-server, ado.net

我对 C# 很陌生。我正在尝试使用以下方法检索列数：

```
SELECT count(*) FROM sys.columns 
```

您能否解释一下如何使用该命令并将其放入变量中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:23:29.033

要连接到数据库，您可以使用`SqlConnection`该类，然后检索行数，您可以使用该`Execute Scalar`函数。来自 MSDN 的示例：

```
cmd.CommandText = "SELECT count(*) FROM sys.columns;";
Int32 count = (Int32) cmd.ExecuteScalar(); 
```

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T09:26:38.107

您将需要`ExecuteScalar`像其他人所说的那样使用。此外，您将需要过滤您`SELECT`的`object_id`列以获取**特定表中**的列。

```
SELECT count(*) FROM sys.columns WHERE object_id = OBJECT_ID(N'table_name') 
```

或者，您可能比熟悉[ANSI 标准`INFORMATION_SCHEMA`视图](http://msdn.microsoft.com/en-us/library/ms186778.aspx)以面向未来的跨 RDBMS 方式查找相同信息更糟糕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T09:26:24.773

您必须使用命令并取回标量变量：

```
SqlCommand cmd = new SqlCommand(sql, conn);
Int32 count = (Int32)cmd.ExecuteScalar(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:24:07.777

```
string connectionString =
            "Data Source=(local);Initial Catalog=Northwind;"
            + "Integrated Security=true";

        // Provide the query string with a parameter placeholder.
        string queryString =
            "SELECT Count(*) from sys.columns";

        // Specify the parameter value.
        int paramValue = 5;

        // Create and open the connection in a using block. This
        // ensures that all resources will be closed and disposed
        // when the code exits.
        using (SqlConnection connection =
            new SqlConnection(connectionString))
        {
            // Create the Command and Parameter objects.
            SqlCommand command = new SqlCommand(queryString, connection);

            // Open the connection in a try/catch block. 
            // Create and execute the DataReader, writing the result
            // set to the console window.
            try
            {
                connection.Open();
                SqlDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {
                    Console.WriteLine("\t{0}",
                        reader[0]);
                }
                reader.Close();
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            Console.ReadLine();
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T09:24:52.420

使用 Executescalar() 获取单个元素。

```
 using (SqlConnection con = new SqlConnection(ConnectionString)) //for connecting to database
            {
                con.Open();
                try
                {
                    using (SqlCommand getchild = new SqlCommand("select count(*) from table1 ", con)) //SQL queries
                    {
                        Int32 count = (Int32)getchild.ExecuteScalar();
                     }
                }
             } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T09:27:31.590

您需要在 System.Data.SqlClient 命名空间中使用 ADO .NET 函数。当您只想获得单个结果时，ExecuteScalar 是一种易于使用的方法。对于多个结果，您可以使用 SqlDataReader。

```
using System.Data.SqlClient;
string resultVar = String.Empty;
string ServerName="localhost";
string DatabaseName="foo";
        SqlConnection conn=new SqlConnection(String.Format("Data Source={0};Initial Catalog={1};Integrated Security=SSPI",ServerName,DatabaseName));
        SqlCommand cmd=new SqlCommand(Query,conn);
        try
        {
            conn.Open();
        }
        catch (SqlException se)
        {
            throw new InvalidOperationException(String.Format(
                "Connection error: {0} Num:{1} State:{2}",
                se.Message,se.Number, se.State));
        }
        resultVar = (string)cmd.ExecuteScalar().ToString();
        conn.Close(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T09:22:01.070

利用[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

执行查询，并返回查询返回的结果集中第一行的第一列。其他列或行将被忽略。

```
Int32 colnumber = 0;
string sql = "SELECT count(*) FROM sys.columns";
using (SqlConnection conn = new SqlConnection(connString))
{
    SqlCommand cmd = new SqlCommand(sql, conn);
    try
    {
        conn.Open();
        colnumber = (Int32)cmd.ExecuteScalar();
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
} 
```

# ruby-on-rails - Ubuntu上的Rails3.2+Passenger3+Apache2+RVM

> ID：10699167
> 
> 赞同：1
> 
> 时间：2012-05-22T09:20:19.520
> 
> 标签：ruby-on-rails, ubuntu, rvm, passenger, rvm-capistrano

我正在努力让乘客+rvm+apache+rails 工作。打开页面时，我从乘客那里收到以下错误消息：

* * *

```
Ruby (Rack) 应用程序无法启动
这些是可能的原因：
应用程序代码中可能存在语法错误。请检查此类错误并修复它们。
可能未安装所需的库。请安装此应用程序所需的所有库。
应用程序可能未正确配置。请检查所有配置文件是否正确写入，修复任何不正确的配置，然后重新启动该应用程序。
应用程序依赖的服务（例如数据库服务器或 Ferret 搜索引擎服务器）可能尚未启动。请启动该服务。
有关错误的更多信息可能已写入应用程序的日志文件。请检查它以便分析问题。

错误信息：
未初始化的常量 Capistrano
异常类：
名称错误
应用程序根：
/var/www/www.pixtur.org/rails/current
回溯：
    文件行位置
0 /var/www/www.------------.----/rails/shared/bundle/ruby/1.9.1/gems/rvm-capistrano-1.2.0/lib/ rvm/capistrano.rb 3 in `'
1 /home/pixtur/.rvm/gems/ruby-1.9.2-p180@global/gems/bundler-1.1.3/lib/bundler/runtime.rb 74 在“要求”
2 /home/pixtur/.rvm/gems/ruby-1.9.2-p180@global/gems/bundler-1.1.3/lib/bundler/runtime.rb 74 在“rescue in block in require”
3 /home/pixtur/.rvm/gems/ruby-1.9.2-p180@global/gems/bundler-1.1.3/lib/bundler/runtime.rb 62 在`block in require'
4 /home/pixtur/.rvm/gems/ruby-1.9.2-p180@global/gems/bundler-1.1.3/lib/bundler/runtime.rb 55 在“每个”
5 /home/pixtur/.rvm/gems/ruby-1.9.2-p180@global/gems/bundler-1.1.3/lib/bundler/runtime.rb 55 在“要求”
6 /home/pixtur/.rvm/gems/ruby-1.9.2-p180@global/gems/bundler-1.1.3/lib/bundler.rb 119 在“要求”

```

* * *

我不明白，这个错误消息试图告诉我什么。令人困惑的是，它似乎指的是 ruby​​-1.9.1，而 rvm 应该映射到 1.9.2-p180。

欢迎任何帮助、指示或后续步骤来找到我们的更多信息。

## $GEM_PATH

在远程机器上使用 ssh： $echo $GEM_PATH /home/pixtur/.rvm/gems/ruby-1.9.2-p180@pixtur-org:/home/pixtur/.rvm/gems/ruby-1.9.2-p180@全球的

## 当前部署.rb

```
require "bundler/capistrano"

set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"") # Read from local system

# Load RVM's capistrano plugin:
require "rvm/capistrano"

set :user, 'pixtur'
set :domain, 'www.--------------.com'
set :applicationdir, "/var/www/www.somedomain.com/rails"

set :scm, 'git'
set :repository,  "gitosis@------------------.git"
#set :git_enable_submodules, 1 # if you have vendored rails
set :branch, 'master'
set :git_shallow_clone, 1
set :scm_verbose, true

set :deploy_to, applicationdir
set :use_sudo, false

#set :scm, :git
role :app, domain
role :web, domain
role :db,  domain, :primary => true

# additional settings
default_run_options[:pty] = true  # Forgo errors when deploying from windows

namespace :deploy do
  task :start, :roles => :app do
    run "touch #{current_release}/tmp/restart.txt"
  end

  task :stop, :roles => :app do
  end

  task :restart, :roles => :app do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end

  desc "Install bundler"
  task :bundle_install do
    begin
      run "bundle install"
    rescue
      gem_install_bundler
    end
  end  

end 
```

## .bundle/配置

```
---
BUNDLE_FROZEN: '1'
BUNDLE_PATH: /var/www/www.----------.---/rails/shared/bundle
BUNDLE_DISABLE_SHARED_GEMS: '1'
BUNDLE_WITHOUT: development:test 
```

## .rvmrc

```
if [[ -s "/Users/pixtur/.rvm/environments/ruby-1.9.2-p180@pixtur-org" ]] ; then
  . "/Users/pixtur/.rvm/environments/ruby-1.9.2-p180@pixtur-org"
else
  rvm --create use  "ruby-1.9.2-p180@pixtur-org" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:08:47.327

问题来自您的 Gemfile，

1）您需要移动`gem 'rvm-capistrano'`到开发组 - 这样它就不会安装到`shared/bundle`.

2）你是否有机会使用`gem 'rvm-capistrano', :lib => 'rvm/capistrano'`，lib部分不是必需的，实际上很可能它正在破坏东西。

在再次部署之前，您应该清除`shared/bundle`服务器上的。

# java - 修改快速修复“将可见性更改为默认值”

> ID：10699169
> 
> 赞同：2
> 
> 时间：2012-05-22T09:20:21.250
> 
> 标签：java, eclipse

假设以下情况：我有一个*私有*字段和一个内部类引用或修改该字段。编译器将此标记为警告，因为该字段应受到*保护*（默认可见性）。到目前为止，一切都很好。

Eclipse 足够聪明，可以为这种情况提供快速修复，当我使用它时，它只是删除了*private*修饰符。

这将删除警告，但与我的代码样式不匹配。我希望它用*受保护的词替换**私有*这个词。

 *有没有办法修改 Quickfix 的行为方式？

更好理解的示例代码：ActionListener 中的 foo 被标记为警告

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Test {

    private String foo = "bar";

    public void bla() {

        ActionListener al = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                foo = "whatev";
            }
        };
    }
} 
```

提前致谢！

编辑：感谢 Aleks 和 Thin Pham。我误解了*default*和*protected*的可见性。不过，有没有办法修改 Quickfix？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:29:00.017

我的“风格”是为私有字段创建某种（必要时受保护）设置器，因为我尽量避免使用非私有字段。非私有字段的问题在于，您必须在基类中添加大量额外代码，以捕获可能来自后代类的所有可能和无效更改。如果你有一个受保护的/公共的 setter，你可以捕捉到这个 setter 中的每一个无效的变化，而类的其他人不必担心它。

在某些情况下，创建一个非私有字段绝对有意义，但您的代码示例通常不是其中之一（至少对我而言）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T15:40:52.943

与 Eclipse 中的其他所有内容一样，快速修复由插件提供。很可能是 JDT 插件之一。我认为你唯一能做的就是在你自己的插件中编写你自己的快速修复。*

# forms - 表单未出现在自定义模板页面中

> ID：10699175
> 
> 赞同：0
> 
> 时间：2012-05-22T09:20:43.920
> 
> 标签：forms, wordpress

我是 wordpress 的新手。我使用表单生成器创建了一个表单。并包含在一个页面中。表单显示在默认模板中，但不在自定义模板中。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:08:13.427

```
// Formbuilder manual form display. Replace the # in the following line with the ID number of the form to be displayed.
if(function_exists('formbuilder_process_form')) echo formbuilder_process_form(#);
// End of FormBuilder manual form display. 
```

# ember.js - 如何观察 Ember 对象中的嵌入数组？

> ID：10699181
> 
> 赞同：1
> 
> 时间：2012-05-22T09:20:59.267
> 
> 标签：ember.js

在 Ember.js 中，创建一个对子属性（数组）的变化做出反应的观察者会导致不直观的行为。如果观察者直接*观察*到数组属性，它不会触发，而如果它观察到同一个属性的绑定，它会按预期工作。

一个简单的例子：

**车把：**

```
<script type="text/x-handlebars">
    <b>App.View1.name:</b> {{App.View1.name}} <br />
    <b>App.View2.name:</b> {{App.View2.name}}
</script> 
```

**Javascript：**

```
App = Em.Application.create();

// A common dependency for two views
var dependency = Em.Object.create({
    prop: []
});

// Directly observes dependency.prop
App.View1 = Em.View.create({
    dependency: dependency,
    name: "Foo",
    changeName: function () {
        this.set("name", "Bar");
    }.observes("dependency.prop")
});

// Indirectly observes dependency.prop via a binding
App.View2 = Em.View.create({
    dependency: dependency,
    name: "Foo",
    changeName: function () {
        this.set("name", "Bar");
    }.observes("prop"),
    propBinding: "dependency.prop"
});

// Updating the 'prop' property of dependency with an element.
dependency.get("prop").pushObject("An object."); 
```

我在这里把它放在 JSFiddle 上：http: [//jsfiddle.net/kbaXG/50/](http://jsfiddle.net/kbaXG/50/)

在这里，`App.View1.name`不更新（保持“Foo”）而`App.View2.name`更新（到“Bar”）。

这是预期的行为，并且创建*绑定*是可接受的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:41:56.217

绑定是 Ember.js 中的一个基本概念，所以不要犹豫使用它 :)

如果您为自己创建绑定，则您的示例有效`dependency`，请参阅[http://jsfiddle.net/pangratz666/Gqc7Q/](http://jsfiddle.net/pangratz666/Gqc7Q/)：

```
App = Em.Application.create({
    VERSION: "0.1"
});

App.dependency = Em.Object.create({
    prop: []
});

App.View1 = Em.View.create({
    dependencyBinding: 'App.dependency',
    name: "Foo",
    changeName: function () {
        this.set("name", "Bar");
    }.observes("dependency.prop")
});

App.View2 = Em.View.create({
    dependencyBinding: 'App.dependency',
    name: "Foo",
    changeName: function () {
        this.set("name", "Bar");
    }.observes("prop"),
    propBinding: "dependency.prop"
});

// Updating the 'prop' property of dependency.
dependency.get("prop").pushObject("An object."); 
```

* * *

**更新**

问题是您正在更改数组的内容，而不是数组本身。因此，您必须将观察者路径更改为`dependency.prop.@each`，请参阅[http://jsfiddle.net/pangratz666/3QccA/](http://jsfiddle.net/pangratz666/3QccA/)。但我不知道为什么它使用绑定方法而不是这个方法......你应该在[GitHub 上](https://github.com/emberjs/ember.js/issues)提交一张票。

最后一点，上述使用绑定的解决方案是更像 Ember 的方法......

```
var dependency = Em.Object.create({
    prop: []
});

App.View1 = Em.View.create({
    dependency: dependency,
    name: "Foo",
    changeName: function () {
        this.set("name", "Bar");
    }.observes("dependency.prop.@each")
});

App.View2 = Em.View.create({
    dependency: dependency,
    name: "Foo",
    changeName: function () {
        this.set("name", "Bar");
    }.observes("prop"),
    propBinding: "dependency.prop.@each"
});

// Updating the 'prop' property of dependency.
dependency.get("prop").pushObject("An object."); 
```

# cloud - 在多个节点上的短期 Akka 部署

> ID：10699182
> 
> 赞同：4
> 
> 时间：2012-05-22T09:21:00.127
> 
> 标签：cloud, cluster-computing, akka, apache-zookeeper, grid-computing

我正在用 Akka 编写一个分布式研究应用程序，使用一个简单的主节点和多个工作节点拓扑，目的是部署到内部节点集群或企业云中。（当 Akka 2.1 可用时，我会考虑使用集群支持）

**我的问题：** 将我的代码（以包含 Akka 微内核的文件夹的形式）部署到每个节点上，启动它，让它做它的事情，然后拆除并根据需要重复的最简单/最好的方法是什么？

*   每个工作节点的微内核目录和可执行文件都是相同的，并且只有几 MB。Config 包含他们将连接到的 master 的 IP。
*   我打算手动启动master。
*   弹性不是问题，因为这不是关键业务应用程序，而是私人研究问题。
*   没有重要的数据存储在本地给工人。
*   应用程序完成后，我可能想重新部署一个不同的应用程序而不拆除节点（例如，改进了代码库）。

**更新：**发现 Condor 节点支持在整机模式下运行的作业。这应该支持将微内核作为作业运行，并且只需要确保工作人员在完成后正确退出。

**更新 2：**有人提到 Zookeeper 可能很适合这个。希望有经验的人提供意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:26:17.317

这里有一些想法。我没有使用 Akka 的经验，但我知道网格计算和部署。

1.  使用现有的网格工具，例如[http://www.gridgain.com](http://www.gridgain.com)（具有 GPL 版本）。我也听说有人用[http://www.hazelcast.com/建立一个网格](http://www.hazelcast.com/)

2.  使用云盒，如 Airframe，[http:](http://www.pistoncloud.com/press-releases/piston-cloud-launches-free-openstack-distribution/) //www.pistoncloud.com/press-releases/piston-cloud-launches-free-openstack-distribution/ 。我敢肯定肯定还有其他人。

3.  我相信 Airframe 带有 Cloud Foundry，但您可以直接使用它：[https](https://micro.cloudfoundry.com/) ://micro.cloudfoundry.com/但不确定该版本如何扩展。

4.  滚动您自己的系统，安装到一个 VM 映像中，然后将其克隆到您的其他节点上。

当涉及到自己滚动时，您可以按如下方式进行，这与我已经开发并且运行良好的东西非常相似。

*   使用 Maven 构建您的应用程序，使用您喜欢的任何库。

*   将构建的二进制文件推送到 Sonatype Nexus。

*   构建一个自定义启动器，它给定一个模块的 maven 坐标可以运行它。我的 laucher 首先检查本地 maven 存储库中的 jar，如果它们不存在，那么它会从 nexus 下载它们。然后它构造传递依赖树中所有 jar 的类路径。然后它使用新的类路径创建一个新的类加载器，并通过类加载器启动主类。

*   使用 java-service-wrappe 或类似方法编写一个服务，在启动时通过读取一些 maven 坐标和 config.xml 中的主类的名称来检查要运行的代码版本。Config 可以是网络驱动器上的文件、预配置的 URL，甚至是 zookeeper。然后它将它传递给下载并运行代码的启动器。

*   手动或通过克隆 vm 将此服务安装到多台机器上。

*   利润！

我没有特别提到 Akka，因为您的大部分问题似乎是如何让代码在多个节点上运行。

自定义路由对我来说效果很好，但是我只有几台服务器使用它，我所有的适当网格计算都是在数据突触中完成的。但我确实想知道我是否要重新开始这些开源 PaaS 中的一个是否适合。

# x11 - 轻量级 X 窗口库

> ID：10699183
> 
> 赞同：1
> 
> 时间：2012-05-22T09:21:06.943
> 
> 标签：x11

我想将我正在开发的 Windows 程序移植到 linux 上。它完全使用 d3d11 来绘制输出，所以我需要编写一个 opengl 替代方案。没关系。但我需要创建一个窗口和一些基本操作，如调整大小、设置全屏、获取用户键盘和鼠标输入的通知，以及关闭和调整大小通知。

我不需要任何子窗口或控件，因为一切都是由 opengl 绘制的。

那么什么是合适的方法呢？我查看了原始 Xlib，但它似乎相当低级。我已经准备好学习它，但是所有的例子看起来都很老，所以我不确定它是否仍然是最好的方法，而且在用户拥有的任何环境（kde、gnome 等）下都能做到这一点？

我可以使用 qt、kde 等，但它们远比我需要的复杂得多，因此引入了一个我宁愿尽可能避免的大依赖。

那么，Xlib 是一种合适的技术，还是有其他一些我不知道的轻量级库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:22:19.780

看看[SDL](http://www.libsdl.org/)。它几乎是像您这样的应用程序的标准选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:44:28.290

看起来[GLUT](http://www.opengl.org/resources/libraries/glut/)可以满足您的需求。

# svn - Powershell：SVN恢复匹配给定模式的所有文件

> ID：10699184
> 
> 赞同：2
> 
> 时间：2012-05-22T09:21:11.927
> 
> 标签：svn, powershell, windows-7

我不小心将几十个备份文件添加到 SVN 并希望递归还原所有匹配给定模式的文件 (*.~sql)

在 UNIX 上，我只需使用

```
svn revert `svn status .|grep "~sql$"|awk '{print $2}'` 
```

这是[How do I 'svn add' all unversioned files to SVN？](https://stackoverflow.com/questions/1071857/how-do-i-svn-add-all-unversioned-files-to-svn)

使用 Powershell，我想出了

```
svn status|findstr "~sql" | %{ $_.Split('`t')[1]; } 
```

但这似乎删除了文件名的第一个字符（例如，我得到 ch_sys.~sql 而不是 scratch_sys.~sql）。

我在这里想念什么？还是有更强大的方式来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T09:26:55.710

你需要使用

```
$_.Split("`t") 
```

作为代码的快速修复，因为目前您有一个包含``t`而不是包含制表符的字符串，因为单引号字符串不允许转义序列（除了`""`）。`string.Split`获取`char[]`as 参数并在您传递的任何字符处拆分，因此在这种情况下，它会在重音和 . 上拆分`t`。

但你是对的，这并不是真正的 PowerShell 方式。首先，您使用`findstr`的是具有大量 PowerShell 等效项的，例如

```
svn status | where { $_ -match '~sql' }
(svn status) -match '~sql' 
```

不过，在 PowerShell 中使用 SVN 时，您还有另一种选择。大多数 SVN 命令可以输出 XML，这通常比文本输出更易于处理。

```
([xml](svn status --xml)).status.target.entry |
  select -exp path |
  where {$_ -match '~sql'} |
  foreach { svn revert $_ } 
```

这是否更漂亮可能值得商榷，但我更喜欢尽可能使用结构化数据。

然而，

```
svn revert -R *~sql* 
```

我猜应该也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-29T10:32:30.530

如果您使用 Select-String，别名 sls 您也可以使用正则表达式进行匹配。

```
([xml](svn status --xml)).status.target.entry.path | sls ".+sql" | %{svn revert $_} 
```

（nb $_ 是一个匹配信息，它被转换成一个字符串）

# c# - 在安装过程中创建防火墙规则：netsh 或 WindowsFirewall API？

> ID：10699187
> 
> 赞同：4
> 
> 时间：2012-05-22T09:21:18.410
> 
> 标签：c#, windows, installation, windows-firewall

我在这里为我们的程序构建安装程序，我想在安装时添加防火墙规则。我进行了一些研究，发现了两种方法：

1.  运行 netsh 命令
2.  以编程方式使用防火墙 API

关于netsh-记录了两种类型的命令-

*   "netsh firewall add allowedprogram C:\MyApp\MyApp.exe "My Application" ENABLE",

    和-

*   "netsh advfirewall 防火墙添加规则名称="My Application" dir=in action=allow program="C:\MyApp\MyApp.exe" enable=yes"

..哪个操作系统支持哪个？我想我可以同时运行两者来确定（我想支持 xp、vista 和 win7）

关于firewallAPI-使用它有什么好处吗？表面上看起来有点复杂（我需要找出我正在运行的操作系统，因为我需要连接到 vista 中的不同 dll）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:42:49.400

如果您只是检查防火墙是否已启用；你可以这样做：

```
NetFwMgrType = Type.GetTypeFromProgID("HNetCfg.FwMgr", false);
INetFwMgr Manage = (INetFwMgr)Activator.CreateInstance(NetFwMgrType);
bool Firewallenabled = Manage.LocalPolicy.CurrentProfile.FirewallEnabled; 
```

然后您可以将您的应用程序添加到授权应用程序中；

```
INetFwAuthorizedApplications applications;
INetFwAuthorizedApplication application;

// Input Application Name
application.Name = “Internet Explorer”;

// Locate .exe
 application.ProcessImageFileName = "C:\\Program Files\\Internet Explorer\\iexplore.exe"

// Enable
application.Enabled =  true; 

// Authorize the Application
Type NetFwMgrType = Type.GetTypeFromProgID("HNetCfg.FwMgr", false); 
         INetFwMgr Manage = (INetFwMgr)Activator.CreateInstance(NetFwMgrType); 
         applications = (INetFwAuthorizedApplications)mgr.LocalPolicy.CurrentProfile.AuthorizedApplications;
applications.Add(application); 
```

您需要访问这些 COM 对象：

*   *NetFwTypeLib*
*   *HNetCfg.FwMgr*

请记住，这些是用 XP SP2 的旧 COM 对象编写的；Microsoft 建议您使用的地方：*INetFwPolicy2*。它适用于 Vista、7 和 8。这是一些文档，包括文章以及使用旧代码的几个示例；不知道这是否有帮助。希望确实如此。

[维斯塔, 7, 8](http://msdn.microsoft.com/en-us/library/aa366418%28VS.85%29.aspx)

[XP 服务包 2：](http://msdn.microsoft.com/en-us/library/aa366453%28VS.85%29.aspx)

[详细介绍这些示例的博客；和解释。](http://blogs.msdn.com/b/securitytools/archive/2009/08/21/automating-windows-firewall-settings-with-c.aspx)

# ruby-on-rails - 通过设计将外键id数组保存在has_many中

> ID：10699190
> 
> 赞同：1
> 
> 时间：2012-05-22T09:21:38.300
> 
> 标签：ruby-on-rails

当我提交样式创建表单时，我想创建一个具有一些功能的新样式。这些特征是从一个多选框中选择的，该框是从数据库中的特征表中填充的。根据从多选中选择的功能，**直通表应适当更新。**

我可以在 Rails 控制台中执行以下操作：

```
@style = Style.first
@style.feature_ids = ['','2','4','6'] 
```

输入上述内容后，我将看到我的**直通**表更新为三行适当的 style_id 和 feature_id。

在我的样式创建**表单**中，我有以下内容：

```
<%= m.input :feature_ids, :label => "Features", :collection => @features, :input_html => { :multiple => true } %> 
```

提交表单后，我收到以下 PG 错误：

```
PG::Error: ERROR:  column "feature_id" is of type integer but expression is of type character varying at character 96
HINT:  You will need to rewrite or cast the expression.
: INSERT INTO "stylefeatures" ("created_at", "feature_id", "style_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id" 
```

从参数哈希：

```
{"utf8"=>"✓",
 "authenticity_token"=>"lkdI9jhlhPW1P2Tyb8jFMKFM/kVXvgcJfSkL0qNH7xk=",
 "style"=>{"name"=>"123",
 "feature_ids"=>["",
 "2",
 "4",
 "6"],
 "commit"=>"Create Style"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:34:48.063

您`@features`是字符串的集合，将其更改为整数，您会很好（这就是您的数据库所抱怨的）。

# views - Plone 4：创建新的模板视图

> ID：10699192
> 
> 赞同：2
> 
> 时间：2012-05-22T09:21:43.370
> 
> 标签：views, plone

我创建了一个新产品。我能够安装和卸载它。

但是，我创建了一个视图，可从操作（actions.xml）调用，但我不断收到错误消息，提示该页面不存在

```
This page does not seem to exist… 
```

这是我的actions.xml

```
<?xml version="1.0"?>
<object name="portal_actions" meta_type="Plone Actions Tool"
   xmlns:i18n="http://xml.zope.org/namespaces/i18n">

<action-provider name="portal_workflow"/>
<action-provider name="portal_types"/>
<action-provider name="portal_actions"/>

<object name="document_actions" meta_type="CMF Action Category">

    <object name="viewCatTree" meta_type="CMF Action" i18n:domain="plone">
        <property name="title" i18n:translate="">Category Tree</property>
        <property name="description" i18n:translate=""></property>
        <property name="url_expr">string:${object_url}/visual_tree_view</property>
        <property name="icon_expr"></property>
        <property name="available_expr"></property>
        <property name="permissions">
            <element value="View"/>
        </property>
        <property name="visible">True</property>
    </object>

    <!-- more actions here -->

</object> 
```

这就是我在 configure.zcml 中指定的方式

```
<browser:page
    for="*"
    name="visual_tree_view"
    class=".viewlets.CategoryTreeSettingsView"
    template="../skins/category_customizations/category_view.pt"
    permission="zope2.View"
/> 
```

我也尝试在浏览器中的视图名称前添加@@，但找不到该页面。模板存在于 skins 文件夹中，我是否将上面的代码更改为指向都没有关系`/templates/category_view.pt`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:06:53.067

我怀疑您的视图在呈现时会引发 AttributeError 或 KeyError，这也会导致 Plone 显示 NotFound 错误。

`__call__`在您的视图和/或方法中放置一个调试断点，`__init__`以查看您的视图是否正在被查找和调用。

那，或者你`configure.zcml`根本没有被加载；确保你的包被包含在某个地方，可能在你的构建部分的`zcml`变量中`plone.recipe.zope2instance`，或者`<include />`在另一个 configure.zcml 文件的语句中。

# soap - wsdl2 在 ColdFusion 10 中不显示扩展功能

> ID：10699197
> 
> 赞同：4
> 
> 时间：2012-05-22T09:22:02.123
> 
> 标签：soap, coldfusion, wsdl, axis2, coldfusion-10

我有一个简单的测试设置：

```
component displayname="test1" extends="test2"
{
    remote Any function ping1() {}
}

component displayname="test2"
{
    remote Any function ping2() {}
} 
```

`test1.cfc?wsdl`当我使用奇怪的东西来调用 cfc时。

当我告诉我的应用程序使用 WSDL 版本 1 时，`this.wssettings.version`一切看起来都很好，与 CF9 中的几乎相同。但是当我告诉它使用版本 2 时，函数“ping2”没有出现在我的定义 xml 中。

为什么 WSDL 2 在我调用时不显示我的扩展函数“test2” `test1.cfc?wsdl`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:02:11.607

我在 ColdFusion 10 上试过这个，WSDL 和 WSDL2 都没有显示继承的方法。我只看到 test1.cfc 的 ping1() 函数，我没有看到从 test2.cfc 继承的 ping2()。如果您将 ColdFusion Administrator 中的“选择 Web 服务版本”值从 2（默认值）更改为 1，则 ColdFusion 10 会像 ColdFusion 9 一样执行并显示这两种方法。

在 ColdFusion 9 上，WSDL 显示了这两种方法。

在我看来，这是 ColdFusion 10 中的一个错误，您应该使用 Adob​​e ( [https://bugbase.adobe.com/](https://bugbase.adobe.com/) ) 记录它，并在此处发布错误编号，以便其他人可以投票。如果人们在不更改默认 Web 服务版本的情况下进行升级，这可能会破坏现有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:58:54.567

我在 CF 9.01 上尝试了这个确切的代码，但没有得到相同的结果。我的 WSDL 显示了这两种方法。您的 CF 安装有一些独特之处 - 可能是错误的 Axis 版本或其他什么？很抱歉，我无法提供更多帮助 - 但我正在努力寻找一种方法来复制您的问题。

# android - 如何在更改 EditText 的文本时更改 TextView 的文本？

> ID：10699202
> 
> 赞同：7
> 
> 时间：2012-05-22T09:22:21.490
> 
> 标签：android, android-edittext, textview

我有一个`EditText`框，用户可以在其中输入输入。当用户输入文本时，我需要在 a `TextView`（位于 EditText 下方）中显示输入文本。

**例子：**

如果用户在 EditText 框中输入任何字符，我需要在 TextView 中显示相同的字符。同样，如果用户从 EditText 中删除任何字符，我需要从 TextView 中删除相同的字符。（最终，我想在更改 EditText 的文本时更改 TextView 的文本）。我希望我的要求现在很清楚。我怎样才能做到这一点？请指导我。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-22T09:23:52.573

将 TextWatcher 添加到您的 Edittext。在`afterTextChanged()`做你的操作。 [http://developer.android.com/reference/android/text/TextWatcher.html](http://developer.android.com/reference/android/text/TextWatcher.html)

```
TextWatcher inputTextWatcher = new TextWatcher() {
    public void afterTextChanged(Editable s) { 
                textview.setText(s.toString());
    }
    public void beforeTextChanged(CharSequence s, int start, int count, int after){
    }
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }
};

editText.addTextChangedListener(inputTextWatcher); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T09:29:08.797

您应该覆盖此方法：

```
editText.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void afterTextChanged(Editable s) {
        if(editText.getText().length() >= 0) {
            textView.setText(editText.getText().toString())
        } 
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T09:30:06.270

```
edtText.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                if (!edtText.getText().toString().equalsIgnoreCase("")){

                    // here textview.setText(edtText.getText());

                }
            }
        });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-16T14:56:41.020

解决方案是将[TextWatcher](https://developer.android.com/reference/android/text/TextWatcher)添加到`EditText`by using`addTextChangedListener()`函数中。在`TextWatcher`您需要在 3 个函数之一中编写转换/验证逻辑，`afterTextChanged()`具体取决于您想要执行这些操作的时间。`beforeTextChanged()``onTextChanged()`

使用 Kotlin 你会做这样的事情：

```
editText.addTextChangedListener(object : android.text.TextWatcher {
        override fun afterTextChanged(s: Editable?) {

        }

        override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {
        }

        override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {
            s?.let { textView.text = s.toString() }
        }
    }) 
```

# jquery - jQuery Mobile 使用 AJAX 数据增长文本区域

> ID：10699210
> 
> 赞同：5
> 
> 时间：2012-05-22T09:22:56.553
> 
> 标签：jquery, jquery-mobile

我正在通过 将文本加载到输入框中，`$("textarea").val(ajaxData);`但是它不会自动增长，并且我的数据没有完全显示。我可以调用任何方法或任何方法来强制更新吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T13:23:15.597

确实有一个内部函数负责调整大小，称为`resizeCheck()`. 但是，该函数是私有的实现细节，并且不会被小部件作为公共方法公开。

不过，您可以解决此问题：由于`resizeCheck()`由小部件的`keyup`事件处理程序调用，您可以在设置新值后自己触发该事件：

```
$("textarea").val(ajaxData).keyup(); 
```

这将以与您“手动”键入新文本完全相同的方式调整小部件的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:37:24.097

```
var offset=15;
$("textarea").val(ajaxData);
$("textarea").height($("textarea").innerHeight() + offset) 
```

如果它适用于您的情况，您可以尝试不使用任何偏移量。如果需要，您还可以更改偏移值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:29:48.280

您必须使用 CSS 在您的容器元素中指定一个高度：'auto'。

如果你写了一个静态高度，它不会自动增长。

# keyboard - 我在哪里可以获得一套完整的键盘按键图标？

> ID：10699211
> 
> 赞同：5
> 
> 时间：2012-05-22T09:23:04.340
> 
> 标签：keyboard, icons

我正在寻找代表键盘上按键的完整图标集。最好获得许可，以便我可以使用它们。

如果每个键都有一个相应的“按下”图标，那就太棒了。

有谁知道我在哪里可以找到一个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-16T22:49:39.347

我想这就是您要搜索的内容：[免费键盘图形和按键图标 - speedflips](https://github.com/q2apro/keyboard-keys-speedflips)。键盘按键图标为 SVG 和 PNG 图形。

许可证：**公共领域 - 免费用于商业和私人用途**

截屏：

![键盘按键图标](../Images/93a3535694328c861c68e09e0b13d8da.png)

演示视频：

[https://www.youtube.com/watch?v=9eUWKDNdg1E](https://www.youtube.com/watch?v=9eUWKDNdg1E)

希望有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:42:54.660

这就是我发现的：http: [//www.iconarchive.com/show/keyboard-keys-icons-by-chromatix.html](http://www.iconarchive.com/show/keyboard-keys-icons-by-chromatix.html)

您不能将它们用于商业用途，必须发布归属，并且每个键都没有“按下”版本。

# java - 关于秒表或计时器或其他一些实用程序

> ID：10699215
> 
> 赞同：0
> 
> 时间：2012-05-22T09:23:16.757
> 
> 标签：java

我需要启动一个任务。现在很多线程都可以启动这个任务，这个任务通常需要 4-5 秒才能完成。如果该任务已由其他线程启动，我想阻止该任务的启动。为了实现此要求，我正在考虑在某个线程启动任务时在不同的线程中启动计时器或秒表。现在，当定时器在配置的时间间隔后超时时，另一个线程可以启动一个任务。那么，在不同的线程中启动计时器或秒表以查看是否已达到特定时间是一个好的解决方案吗？有什么好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:28:24.897

如果我理解正确，这是一个坏主意。基本上你假设你的工作永远不会运行超过 5 秒，所以如果手表告诉你某个工作是在不到 5 秒前开始的，你就不会开始另一个工作。这是非常不可靠的。

而是创建某种标志，您在作业开始时设置并在结束时取消设置。`AtomicBoolean`非常适合：

```
private AtomicBoolean flag = new AtomicBoolean();

//...

if(!flag.getAndSet(true)) {
    try {
        //do your work
    } finally {
        flag.set(false);
    }
} else {
    //Already running
} 
```

如果您希望另一个作业等待前一个作业而不是简单地被丢弃，只需使用`synchronized`或使用一些不同的锁定机制围绕您的任务。

注意：如果您的工作是分布式的，您将需要一个分布式锁定机制，例如数据库或[hazelcast](/questions/tagged/hazelcast "显示标记为“hazelcast”的问题")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:26:17.207

如果你想安排任务，选择的框架通常类似于[Quartz](http://quartz-scheduler.org/)。它应该允许您做您需要做的事情以及更多。关于非运行并发任务的问题，我建议您看一下[之前](https://stackoverflow.com/questions/2676295/quartz-preventing-concurrent-instances-of-a-job-in-jobs-xml)的 SO 帖子，它应该会为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:34:26.140

如果您尝试在 java 中执行此操作，那么您可以考虑在 JAVA 的面向对象方法上使用同步块。

因此，您要确保的任何任务一次由一个线程完成，然后在该类中创建一个类和一个同步方法，还要确保所有线程共享该类的相同对象并调用它们所在的方法想要执行任务。

例如

```
Class SyncTask{

synchronized void task1(){

//Perform your task here

}

} 
```

在应用程序的生命周期中创建一次此类的对象，然后在所有线程中使用相同的对象，并让它们调用您想要执行任务的此方法。

在多个线程同时调用此方法的情况下。JVM 会处理这个序列，如果一个线程已经在执行任务，其他调用它的线程将等待第一个线程完成。

通过这种方式，您将确保在任何给定时间只有在线程上执行任务。

我希望这有帮助。

# android - 无法获取 webview 的绘图缓存：android

> ID：10699225
> 
> 赞同：2
> 
> 时间：2012-05-22T09:23:40.660
> 
> 标签：android, webview, bitmap

我有一个网络视图。我想获取它的绘图缓存并将其保存为 sdcard 中的文件。我使用了以下代码：

```
WebView wv=new WebView(this);
wv.loadData(rawHtml,"text/html",null); // rawHtml is my html code
wv.buildDrawingCacheEnabled(true);
Bitmap bmp=wv.getDrawingCache(); 
```

不知道为什么`wv.getDrawingCache()`总是返回`null`。我已经使用以下方法测试了我的 html 代码：

```
setContentView(wv); 
```

它的显示正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:27:31.823

您是否在“如果是”中立即使用此方法，`onCreate()?`那么您可能必须考虑覆盖以下方法，

```
@Override 
public void onWindowFocusChanged(boolean hasFocus) 
{ 
     // TODO Auto-generated method stub 
     super.onWindowFocusChanged(hasFocus);
    Bitmap bmp=wv.getDrawingCache();
} 
```

一旦你的视图被绘制，这个方法就会被调用。这就是您可以看到的地方。

# magento - magento产品属性的自定义“商店所有者的目录输入类型”

> ID：10699226
> 
> 赞同：6
> 
> 时间：2012-05-22T09:23:40.797
> 
> 标签：magento, input, attributes, magento-1.6, catalog

在 magento 中，您可以使用某些类型创建新属性（然后将其添加到产品继承的属性集中）。

默认选项（文本字段/区域、数据、布尔值）相当有限，我想添加我自己的，包括后端字段渲染器和它自己的验证。这将创建一个 youtube 字段，该字段接受一系列 url，这些 url 仅转换为 youtube id。

但我真的很想很好地解释如何添加您自己的“商店所有者的目录输入类型”。我见过其他插件这样做，但是挖掘代码很乏味，这绝对是其他人感兴趣的事情（问题在网络上被问了很多）。

我一直在寻找一段时间，但无济于事，我将继续寻找答案，直到找到它为止。

**tl;博士**

所以我的问题是：如何添加“商店所有者的目录输入类型”，也许可以参考如何向该字段类型添加自定义验证。这是正确的 MVC 风格，所以如果可能的话不要编辑核心文件。

详细的、通用的解释和代码示例的奖励积分，如果值得的话，我将根据答案的质量奖励赏金（因为这*将*适用于更多的受众）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:35:45.387

对不起，我没有时间写长答案。来自 Wee 模块的接下来 4 位观察者将为您提供所需的指示：

```
<config>
    <global>
        <events>
            <catalog_entity_attribute_save_before>
                <observers>
                    <weee>
                        <type>model</type>
                        <class>weee/observer</class>
                        <method>assignBackendModelToAttribute</method>
                    </weee>
                </observers>
            </catalog_entity_attribute_save_before>
        </events>
    </global>
...

    <adminhtml>
        <events>
            <adminhtml_catalog_product_edit_prepare_form>
                <observers>
                    <weee>
                        <class>weee/observer</class>
                        <method>setWeeeRendererInForm</method>
                    </weee>
                </observers>
            </adminhtml_catalog_product_edit_prepare_form>
            <adminhtml_product_attribute_types>
                <observers>
                    <weee>
                        <type>model</type>
                        <class>weee/observer</class>
                        <method>addWeeeTaxAttributeType</method>
                    </weee>
                </observers>
            </adminhtml_product_attribute_types>
            <adminhtml_catalog_product_edit_element_types>
                <observers>
                    <weee>
                        <class>weee/observer</class>
                        <method>updateElementTypes</method>
                    </weee>
                </observers>
            </adminhtml_catalog_product_edit_element_types>
        </events>
    </adminhtml>
</config> 
```

# ruby-on-rails - 如何使用 ruby 1.9.2 删除 csv 中的特定列

> ID：10699233
> 
> 赞同：1
> 
> 时间：2012-05-22T09:24:01.997
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我试图将 csv 导出到数据库。CSV 包含一些我不想存储在数据库中的不需要的数据。我需要从获取的 csv 中跳过特定列，并将其余数据存储在我的数据库中。在将数据推送到数据库之前，如何以编程方式从 csv 中删除特定列。我正在使用红宝石 1.9.2。

请帮帮我

```
def csv_import 
    #@parsed_file = csv.open(params[:dump][:file])
    puts "before CSV Reader"

    file = params["dump"]["file"]
    directory = "#{Rails.root.to_s}/public/dump"
      # create the file path
      path = File.join(directory, "#{file.original_filename}")
      # write the file
      File.open(path, "wb") { |f| f.write(file.read) }

     @parsed_file=CSV.open(path, "r")
     @parsed_file.drop(1).each do |row|

     n=0

     c=ModelName.new
     c.invoiceno=row[2]
     c.invoice_date=row[3]
     c.orderrefno = row[4]
     c.skucode = row[7]
     c.quantiy = row[8]
     c.amount = row[9]
     c.trackno=row[11]
     c.dispatched = "No"
     c.mailsenttoc = "No"
     c.mailsenttobluedart = "No"

     if c.save
        n=n+1
        GC.start if n%50==0
     end
   end 
end 
```

如您所见，我跳过了几列，例如 1,5,6,10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:43:49.363

不确定这是否有帮助，但您也可以使用[remote_table](https://github.com/seamusabshere/remote_table)：

```
require 'remote_table'
def csv_import
  # [...]
  RemoteTable.new("file://#{path}", :format => :csv, :headers => :false).each do |row|
    c = ModelName.new
    c.invoiceno = row[2]
    c.invoice_date = row[3]
    c.orderrefno = row[4]
    c.skucode = row[7]
    c.quantiy = row[8]
    c.amount = row[9]
    c.trackno = row[11]
    c.dispatched = "No"
    c.mailsenttoc = "No"
    c.mailsenttobluedart = "No"
    if c.save
      # [...]
    end
  end
  # [...]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:51:05.100

您可以使用 activewarehouse-etl 来执行此操作。

[https://github.com/activewarehouse/activewarehouse-etl](https://github.com/activewarehouse/activewarehouse-etl)

它将允许您指定要从 csv 文件中提取的列，然后将其批量上传到您的数据库。

您还可以使用它来清理和验证您输入的数据以及设置默认值。

# c - Signal Raised 事件停止我在 Linux 中的复制过程

> ID：10699236
> 
> 赞同：0
> 
> 时间：2012-05-22T09:24:03.137
> 
> 标签：c, linux, signals

在这里，我有一个用于信号处理和复制过程的示例代码。在这里，我想使用信号动作调用一个计时器，每一秒。它在这里工作正常，但是当我在启动和停止计时器函数之间添加我的复制过程代码时，当第一次信号发出意味着 1 秒后，我的复制过程将被终止。

在这里，我尝试了这些`SIGRTMAX ,SIGUSR1, SIGALRM`信号，但它们都给出了相同的结果。

为什么我的复制过程在信号发出时停止。？

代码 ：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <signal.h>
#include <sys/time.h>
#include <unistd.h>

#define SIGTIMER SIGRTMAX

timer_t KeepAliveTimerId;

void stopKeepAlive()
{
    if(KeepAliveTimerId != NULL)
    {
        timer_delete(KeepAliveTimerId);
        printf("timer delete\n");

    }
}

void  signalHandler(int signo, siginfo_t* info, void* context)
{
    if (signo == SIGTIMER)
    {
        printf("Signal Raised\n");
    }
}

int startKeepAlive()
{
    struct sigevent sigev; //signal event struct
    struct itimerspec itval;
    struct itimerspec oitval;
    struct sigaction sigact;

    sigemptyset(&sigact.sa_mask);
    sigact.sa_flags = SA_SIGINFO;
    sigact.sa_sigaction = signalHandler;

    // set up sigaction to catch signal
    if (sigaction(SIGTIMER, &sigact, NULL) == -1)
    {
        printf("time_settime error \n");
        return -1;
    }

    //Create the POSIX timer to generate signo
    sigev.sigev_notify = SIGEV_SIGNAL;
    sigev.sigev_signo = SIGTIMER;
    sigev.sigev_value.sival_int = 2;

    if (timer_create(CLOCK_REALTIME, &sigev, &KeepAliveTimerId) == 0)
     {
        itval.it_value.tv_sec = 1;
        itval.it_value.tv_nsec = 0L;
        itval.it_interval.tv_sec = itval.it_value.tv_sec;
        itval.it_interval.tv_nsec = itval.it_value.tv_nsec;

        if (timer_settime(KeepAliveTimerId, 0, &itval, &oitval) != 0)
        {
            printf("Error in set time \n");
            return -2;
        }
    }
    else
    {
        printf("Error in creating timer \n");
        return -3;
    }
    return 0;
}

int main()
{
    int result; 
    // Start Timer
    startKeepAlive();

    result = system("cp /mnt/bct/package.QuipC /Download/ 2>&1");
    if (result == 0)
    {
        printf("result is %d\n",result);
        //stop timer
        stopKeepAlive();
        return EXIT_SUCCESS;
    }
    printf("result is %d\n",result);
    // Stop Timer
    stopKeepAlive();
   return EXIT_FAILURE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:04:06.997

只是为了确保我添加了这个：

```
#include <stdarg.h>
int zprintf(char *fmt, ...);
int zprintf(char *fmt, ...)
{
int rc;
char buff[100];
va_list aaa;

va_start(aaa, fmt);
rc = sprintf(buff, fmt, aaa);
va_end(aaa);

rc = write(2, buff, rc);
return rc;
} 
```

并将信号处理程序替换为：

```
void  signalHandler(int signo, siginfo_t* info, void* context)
{
    if (signo == SIGTIMER)
    {
        zprintf("Signal Raised\n");
    }
    else
    {
        zprintf("Signal %d Raised\n", signo);
    }
} 
```

...并替换了 system() 字符串，例如：

```
result = system("cp ../wakker/megahal-9.1.1.dld/tele/megahal.brn /tmp/ 2>&1"); 
```

它奏效了：

```
$ ./a.out
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
result is 0
timer delete 
```

可能是巧合。（但未定义的行为也是巧合！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:32:20.967

[您使用来自http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)的实时信号：

> ...未处理的实时信号的默认操作是终止接收过程...

因此，调用 system(...) 似乎会以某种方式影响您的信号处理程序。我会建议（正如 Wildplasser 已经提到的）摆脱明显的错误（信号处理程序中的 printf）。在上面的链接下，您还有可以在信号处理程序中使用的很好的函数列表（Async-signal-safe functions 段落）。完成后，请告诉我们是否有任何不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:27:46.327

我编译了这段代码（对原始代码的微小变化——添加了显式`void`参数列表，并`#define _XOPEN_SOURCE 700`获取`timer_t`声明，简化了信号处理程序，并在 Linux（RHEL 5）上进行了链接和测试，`-lrt`因为 Mac OS X`timer_t`在下面的任何标题中都没有`/usr/include`— 使用更简单的命令来执行（echo、sleep、echo），并得到看似合理的输出：

```
Started
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Signal Raised
Done
result is 0
timer delete 
```

我由此推断时序信号不会影响由 运行的命令`system()`，因为它们确实不应该。

```
gcc -Wall -Wextra -g -O3 -std=c99 sau.c -o sau -lrt 
```

该`-std=c99`选项可能说明我需要指定`_XOPEN_SOURCE`. 如果我可以费心用 编译`-std=gnu99`，它可能就不需要了。

### 代码

```
#define _XOPEN_SOURCE 700
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <signal.h>
#include <sys/time.h>
#include <unistd.h>

#define SIGTIMER SIGRTMAX

timer_t KeepAliveTimerId;

void stopKeepAlive(void)
{
    if(KeepAliveTimerId != NULL)
    {
        timer_delete(KeepAliveTimerId);
        printf("timer delete\n");
    }
}

void  signalHandler(int signo)
{
    if (signo == SIGTIMER)
    {
        printf("Signal Raised\n");
    }
}

int startKeepAlive(void)
{
    struct sigevent sigev; //signal event struct
    struct itimerspec itval;
    struct itimerspec oitval;
    struct sigaction sigact;

    sigemptyset(&sigact.sa_mask);
    sigact.sa_flags = 0;
    sigact.sa_handler = signalHandler;

    // set up sigaction to catch signal
    if (sigaction(SIGTIMER, &sigact, NULL) == -1)
    {
        printf("time_settime error \n");
        return -1;
    }

    //Create the POSIX timer to generate signo
    sigev.sigev_notify = SIGEV_SIGNAL;
    sigev.sigev_signo = SIGTIMER;
    sigev.sigev_value.sival_int = 2;

    if (timer_create(CLOCK_REALTIME, &sigev, &KeepAliveTimerId) == 0)
     {
        itval.it_value.tv_sec = 1;
        itval.it_value.tv_nsec = 0L;
        itval.it_interval.tv_sec = itval.it_value.tv_sec;
        itval.it_interval.tv_nsec = itval.it_value.tv_nsec;

        if (timer_settime(KeepAliveTimerId, 0, &itval, &oitval) != 0)
        {
            printf("Error in set time \n");
            return -2;
        }
    }
    else
    {
        printf("Error in creating timer \n");
        return -3;
    }
    return 0;
}

int main(void)
{
    int result; 
    // Start Timer
    startKeepAlive();

    result = system("echo Started; sleep 10; echo Done");
    if (result == 0)
    {
        printf("result is %d\n",result);
        //stop timer
        stopKeepAlive();
        return EXIT_SUCCESS;
    }
    printf("result is %d\n",result);
    // Stop Timer
    stopKeepAlive();
   return EXIT_FAILURE;
} 
```

# c# - 将标题标签添加到项目符号列表中的超链接

> ID：10699237
> 
> 赞同：1
> 
> 时间：2012-05-22T09:24:04.557
> 
> 标签：c#, asp.net

我有一个项目符号列表设置为`BulletedListDisplayMode.HyperLink`显示模式，它工作正常，但我找不到为每个超链接指定标题标签的方法。这可以做到吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:37:22.193

这不可能开箱即用，因为 BulletedList 绑定到没有任何此类属性的 ListItem 。

您可以通过以下几种方式处理此问题-

1) 处理 OnPreRender 事件，遍历所有项目并使用 Attributes.Add() 添加

2) 创建一个继承自 BulletedList 的自定义控件并添加一个 title 属性。

3）一起摆脱 BulletList 并使用中继器

就我个人而言，我会选择 3)，因为这样你的输出就有了更大的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:34:01.803

您是否尝试过使用该`BulletedList.AddAttributesToRender`方法？

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.bulletedlist.addattributestorender.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.bulletedlist.addattributestorender.aspx)

# sql-server-2008 - SQL Server 2008 R2 中的统计过程控制图

> ID：10699239
> 
> 赞同：3
> 
> 时间：2012-05-22T09:24:16.810
> 
> 标签：sql-server-2008, statistics, sql-server-2008-r2

我希望你能指出我正确的方向。

我正在尝试使用 SQL Server 2008 生成控制图 ( [http://en.wikipedia.org/wiki/Control_chart](http://en.wikipedia.org/wiki/Control_chart) )。创建基本控制图很容易。我只是计算平均值和标准差，然后绘制它们。

复杂的一点（至少对我来说）是我希望图表在识别出阶跃变化时重置平均值和控制限制。

目前我只对一种非常简单的识别阶跃变化的方法感兴趣，5 个点连续出现在平均值之上或之下。有更复杂的方法来识别它们（[http://en.wikipedia.org/wiki/Western_Electric_rules](http://en.wikipedia.org/wiki/Western_Electric_rules)），但我只想先搞清楚这个。

我制定的过程是：

1.  按月和年汇总和排序，应用行号。
2.  计算整体平均值
3.  确定每个数据项是否高于、低于或等于平均值​​，用 +1、-1 或 0 标记。
4.  识别它们何时是高于或低于平均值的 5 个连续数据项（当前使用光标）。
5.  如果 5 个点高于或 5 个点低于平均值，则重新计算平均值。
6.  重复直到表格结束。

在 SQL Server 中可以进行这种过程吗？感觉我可能需要一个递归 UDF，但递归有点超出我的能力！

向正确方向轻推将不胜感激！

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T14:17:25.893

好的，我最终只使用 WHILE 循环进行迭代。我不会发布完整的代码，但步骤是：

1.  设置用户定义的表数据类型，以便将数据传递到存储过程参数。

2.  编写了附带的存储过程，该存储过程使用行号和 while 循环沿输入表中的每个数据值进行迭代，然后使用当前行号对输入数据的子集进行基于集合的处理（检查以下 5 点是否高于/低于平均值并在触发此标志时重新计算平均值和标准偏差）。

3.  输出带有原始值、行号、月份、平均值、控制上限和控制下限的表格。

我还启动并运行了一个基于完整 Nelson 规则的工作，并且还将说明数据失败的测试。

目前它只在我进一步开发时被我使用，所以我设置了一个带有一些 VBA 的 Excel 表来动态构造一个 SQL 字符串，它作为命令文本传递给数据透视表。这样，您可以使用不同的数据集重复 ping USP，还可以更改有关程序运行方式的一些其他参数（例如调整控制限制等）。

最终，我希望能够将生成的数据传递给我们正在处理的 Business Objects 报告和仪表板。

# forms - JQuery 移动选择选项文本太长

> ID：10699241
> 
> 赞同：3
> 
> 时间：2012-05-22T09:24:32.900
> 
> 标签：forms, css, jquery-mobile

我的表单中的选择字段有问题。这是一个单一的选择字段，所以 JQuery 将它变成了一个按钮，我可以点击它来选择相应的选项。如果该选项的文本相当长，则选择按钮会变得比屏幕宽，因此它仅部分可见。

我检查了由 JQuery 创建的以显示按钮，它设置了 CSS 'overflow: ellipse'，所以当我给所说的 span 一个小于屏幕宽度的固定宽度时，选项文本会被截断为 '...' 和一切看起来都很好。

有没有办法自动触发该行为？

'viewport' 元标记设置为 'width=device-width, user-scalable=no'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:15:34.157

可能晚了，但我希望其他人能发现这有帮助。如果 select 包含在**fieldset**标记中，则将其替换为**div**可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:40:45.900

我也在寻找设置选择框宽度的方法，但是谷歌搜索了很长时间后，我屈服了，只是缩短了选择控件中显示的文本。

```
 <script type="text/javascript">
            $('#myselect').change(function () {

                var sel = $("#myselect option:selected").text().substring(0, 20);
                $("#myselect option:selected").text(sel);

            });
        </script> 
```

我知道这没有多大帮助，但据我了解，选择框是最难交互的框之一，或者至少，这就是互联网所说的。

我将提供一个“JQuery 选择备忘单”，我发现它对我寻求解决方案很有帮助-> [http://comp345.awardspace.com/select_element_cheatsheet.pdf](http://comp345.awardspace.com/select_element_cheatsheet.pdf)

# c# - 自定义类型对象的C#序列化实践

> ID：10699245
> 
> 赞同：3
> 
> 时间：2012-05-22T09:24:43.653
> 
> 标签：c#, .net-3.5, binary-serialization

我创建了一些自定义类型，例如：

```
public class Temperature
{
    protected double _celcius;

    public Temperature(){}

    public Temperature(double celcius)
    {
        _celcius = celcius;
    }

    public double Celcius
    {
        //sets & returns temperature in Celcius
    }

    public double Fahrenheit
    {
        //sets & returns temperature in Fahrenheit
    }
} 
```

和一个类似的`Mass`，等等。

我还有一个自定义对象，例如`Planet`，它使用这些自定义类型作为属性。

```
[Serializable]
public class Planet
{
    public int PositionFromSun;
    public Mass Mass;
    public Temperature Temperature;
} 
```

`Planet`考虑到这一点，在这种情况下进行序列化的最佳实践是什么，`Mass`并且`Temperature`将来可能会略有变化（例如添加`Kelvin`到`Temperature`）？我是否应该拥有`Mass`并`Temperature`继承类似`IQuantity`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:20:23.637

请参阅@Adriano 的[评论](https://stackoverflow.com/questions/10699245/c-sharp-serialization-practices-of-object-with-custom-types#comment13890086_10699245)。这就是我需要的。

> 是的，您可以根据需要添加任意数量的公共属性。为了进行比较，请在此处查看此帖子：[XmlSerializer 和 BinaryFormatter 之间的区别是什么](https://stackoverflow.com/questions/1154198/what-are-the-differences-between-the-xmlserializer-and-binaryformatter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:29:35.453

二进制序列化对添加和删除类型的属性非常挑剔。如果您使用版本兼容的序列化程序（例如基于 xml 的序列化程序），您将能够可靠地在类版本之间进行序列化/反序列化。

您可能需要考虑使用[protobuf.Net](http://code.google.com/p/protobuf-net/)进行序列化 - 它成熟、非常快速且版本容错。

# javascript - 如何创建独立于应用程序的通知服务器？

> ID：10699246
> 
> 赞同：2
> 
> 时间：2012-05-22T09:24:48.690
> 
> 标签：javascript, node.js, redis, socket.io

我已经创建了一个通知服务器，它是特定于应用程序的，现在正在准备一个独立于应用程序的服务器，以使用该应用程序向客户端发送通知以进行同步，我不问代码等等，你能给我建议吗？开发独立于应用程序的组件的基本需求是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:06:46.267

最好的办法是创建一个不同应用程序可以轻松连接的消息队列（pub-sub）。

如果您的应用程序不是那么大，您可以创建一个 TCP 服务器并将信息发送给所有连接的人。如果您需要扩展您的应用程序，您可以使用 Redis、ZeroMQ、RabbitMQ 等。

你可以查看我的 Twitter Steam 应用程序，看看我是如何实现的：

*   应用程序：[https ://github.com/alessioalex/Presentations/tree/master/WebUp4/applications](https://github.com/alessioalex/Presentations/tree/master/WebUp4/applications)
*   TCP 服务器实现：[https ://github.com/alessioalex/Presentations/blob/master/WebUp4/applications/twitter-streaming/tweetBroadcaster.coffee](https://github.com/alessioalex/Presentations/blob/master/WebUp4/applications/twitter-streaming/tweetBroadcaster.coffee)

# mysql - 触发 bash 命令的非生产 MySQL 查询/UDF

> ID：10699256
> 
> 赞同：0
> 
> 时间：2012-05-22T09:25:38.687
> 
> 标签：mysql, linux, bash, user-defined-functions, navicat

如何制作一个 MySQL 查询/脚本来触发 bash 命令并在完成后完成？

这是我的想法：

1.  制作一个 bash 守护进程，它将监视 MySql 表并在更改时执行命令
2.  使用 bash 脚本在完成时更新表和修改表睡眠/循环的 MySQL 脚本，直到它发生

这可能吗？或者，还有更好的方法？
我想制作这个 sql 脚本，这样我就可以将它合并到 Navicat MySQL-MSSQL Batch 作业中

* * *

**更新：**
这不是生产服务器或公共服务器，我只是将它用于数据过滤，所以如果我可以引入 UDF 或更改服务器以执行 shell 命令就可以了，只要它可以使用远程 CLI 触发即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:05:16.027

您可以使用 mysql 脚本执行 shell 命令！外壳命令。或者您可以创建一个包含 mysql 命令的 shell 脚本。任何一个都可以为你工作。

# .net - azure webrole 中的 paypal 支付集成

> ID：10699262
> 
> 赞同：1
> 
> 时间：2012-05-22T09:26:05.973
> 
> 标签：.net, c#-4.0, azure, paypal

我是 Windows Azure 的新手，我需要在我的 Web 角色中集成 paypal 支付。

如何在不使用 asp.net 会话变量的情况下实现 paypal？是否有任何解决方案可以实现它，或者是否必须拥有会话变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:39:36.373

您不需要在 Windows Azure 中使用会话变量，而是可以为此目的使用 Windows Azure 缓存，并且它在过去也已完成。尝试在需要的地方使用 Azure 缓存以及有关 Azure 缓存的更多信息，您可以在下面的链接中获得：

[http://msdn.microsoft.com/en-us/library/windowsazure/gg278356](http://msdn.microsoft.com/en-us/library/windowsazure/gg278356)

# security - 如何在 Windows Mobile 6 上禁用安全警报？

> ID：10699263
> 
> 赞同：0
> 
> 时间：2012-05-22T09:26:07.100
> 
> 标签：security, windows-mobile

每次尝试将一些数据发布到其他机器时，我都会遇到此安全警报。有人知道如何禁用此提示吗？

![在此处输入图像描述](../Images/3ea0045da6d4e986a8ddda2b06f1b553.png)

# c++ - 如何在 C++11 中有效地选择标准库容器？

> ID：10699265
> 
> 赞同：139
> 
> 时间：2012-05-22T09:26:12.400
> 
> 标签：c++, c++11, c++-faq

有一个众所周知的图像（备忘单）称为“C++ 容器选择”。这是为所需用途选择最佳容器的流程图。

有人知道它是否已经有 C++11 版本吗？

这是上一张： ![eC++ 容器选择](../Images/1835233f0faaefd992510284ffcd9f83.png)

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-05-22T11:26:23.053

不是我知道的，但是我猜它可以通过文字完成。此外，图表略有偏差，因为`list`一​​般来说不是一个很好的容器，也不是`forward_list`。这两个列表都是针对小众应用的非常专业的容器。

要构建这样的图表，您只需要两个简单的准则：

*   首先选择语义
*   当有多种选择时，选择最简单的

一开始担心性能通常是没有用的。只有当您开始处理数千个（或更多）项目时，才会真正开始考虑大 O。

容器有两大类：

*   **关联**容器：它们有一个`find`操作
*   **简单序列**容器

然后您可以在它们之上构建几个适配器：`stack`, `queue`, `priority_queue`. 我将把适配器放在这里，它们足够专业，可以识别。

* * *

问题1：**联想**？

*   **如果您需要一**键轻松搜索，那么您需要一个关联容器
*   如果您需要对元素进行排序，那么您需要一个有序的关联容器
*   否则，跳至问题 2。

问题 1.1：**已订购**？

*   如果您不需要特定订单，请使用`unordered_`容器，否则使用其传统的有序对应物。

问题 1.2：**单独的密钥**？

*   如果键与值分开，则使用 a `map`，否则使用 a`set`

问题 1.3：**重复**？

*   如果要保留重复项，请使用 a `multi`，否则不要。

例子：

假设我有几个人与他们关联的唯一 ID，我想尽可能简单地从其 ID 中检索一个人的数据。

1.  我想要一个`find`函数，因此是一个关联容器

1.1。我不在乎订单，因此是一个`unordered_`容器

1.2\. 我的键 (ID) 与其关联的值是分开的，因此`map`

1.3\. ID 是唯一的，因此不应出现重复项。

最后的答案是：`std::unordered_map<ID, PersonData>`。

* * *

问题2：**内存稳定**？

*   如果元素在内存中应该是稳定的（即，当容器本身被修改时它们不应该移动），那么使用一些`list`
*   否则，跳至问题 3。

问题 2.1：**哪个**？

*   安顿下来`list`；a`forward_list`仅对较小的内存占用有用。

* * *

问题 3：**动态调整大小**？

*   如果容器有一个已知大小（在编译时），*并且*这个大小在程序运行过程中不会改变，*并且*元素是默认可构造的*，或者*您可以提供完整的初始化列表（使用`{ ... }`语法），那么使用`array`. 它取代了传统的 C 数组，但具有方便的功能。
*   否则，跳至问题 4。

* * *

问题4：**双端**？

*   如果您希望能够从正面和背面移除项目，则使用 a `deque`，否则使用 a `vector`。

* * *

您会注意到，默认情况下，除非您需要关联容器，否则您的选择将是`vector`. 事实证明，这也是[Sutter 和 Stroustrup 的推荐](https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#slcon2-prefer-using-stl-vector-by-default-unless-you-have-a-reason-to-use-a-different-container)。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-05-23T07:35:25.400

我喜欢马蒂厄的回答，但我将重述流程图如下：

## 何时不使用 std::vector

默认情况下，如果您需要一个容器，请使用`std::vector`. 因此，只有通过提供一些替代`std::vector`.

### 构造函数

`std::vector`要求其内容是可移动构造的，因为它需要能够随机播放项目。这对内容来说并不是一个可怕的负担（请注意，*不需要*默认构造函数，多亏了`emplace`等等）。但是，大多数其他容器不需要任何特定的构造函数（再次感谢`emplace`）。因此，如果您有一个绝对*无法*实现移动构造函数的对象，那么您将不得不选择其他东西。

A`std::deque`将是一般替代品，具有 的许多属性`std::vector`，但您只能在双端队列的任一端插入。中间的插入物需要移动。A`std::list`对其内容没有要求。

### 需要布尔值

`std::vector<bool>`不是。嗯，这是标准的。但这不是`vector`通常意义上的 a，因为`std::vector`通常允许的操作是被禁止的。而且它肯定*不包含`bool`s*。

因此，如果您需要`vector`来自 s 容器的真实行为`bool`，您不会从`std::vector<bool>`. 因此，您必须使用`std::deque<bool>`.

### 搜索

如果你需要在容器中查找元素，而搜索标签又不能只是一个索引，那么你可能需要放弃`std::vector`使用`set`and `map`。注意关键词“*可能*”；排序`std::vector`有时是一个合理的选择。或者 Boost.Container 的[`flat_set/map`](http://www.boost.org/doc/libs/1_49_0/doc/html/container/non_standard_containers.html#container.non_standard_containers.flat_xxx)，它实现了一个 sorted `std::vector`。

现在有四种变体，每种都有自己的需求。

*   `map`当搜索标签与您要查找的项目本身不同时，请使用 a 。否则使用`set`.
*   `unordered`当您在容器中有*很多*项目并且搜索性能绝对需要时使用，`O(1)`而不是`O(logn)`。
*   如果`multi`您需要多个项目具有相同的搜索标签，请使用。

### 订购

如果您需要始终根据特定的比较操作对项目容器进行排序，则可以使用`set`. 或者，`multi_set`如果您需要多个项目具有相同的值。

或者您可以使用 sorted `std::vector`，但您必须保持排序。

### 稳定

迭代器和引用何时失效有时是一个问题。如果您需要一个项目列表，以便在其他各个地方都有指向这些项目的迭代器/指针，那么`std::vector`的失效方法可能不合适。任何插入操作都可能导致失效，具体取决于当前的大小和容量。

`std::list`提供坚定的保证：迭代器及其关联的引用/指针仅在项目本身从容器中删除时才会失效。`std::forward_list`如果记忆是一个严重的问题，是否存在。

如果保证太强，则`std::deque`提供较弱但有用的保证。无效是由中间的插入导致的，但在头部或尾部的插入只会导致*迭代器*的无效，而不是容器中项目的指针/引用。

### 插入性能

`std::vector`只在最后提供便宜的插入（即使那样，如果你破坏容量，它也会变得昂贵）。

`std::list`在性能方面是昂贵的（每个新插入的项目都需要分配内存），但它是*一致*的。它还提供了偶尔必不可少的能力，可以在几乎没有性能成本的情况下随机移动物品，以及`std::list`在不损失性能的情况下与其他相同类型的容器交易物品。如果您需要*大量*调整内容，请使用`std::list`.

`std::deque`在头部和尾部提供恒定时间的插入/移除，但在中间插入可能相当昂贵。因此，如果您需要从正面和背面添加/删除东西，`std::deque`可能就是您所需要的。

应该注意的是，由于移动语义，`std::vector`插入性能可能不像以前那么糟糕了。一些实现实现了一种基于移动语义的项目复制形式（所谓的“swaptimization”），但现在移动是语言的一部分，它是由标准强制执行的。

### 没有动态分配

`std::array`如果您想要尽可能少的动态分配，这是一个很好的容器。它只是一个 C 数组的包装器；这意味着它的大小必须在*编译时*知道。如果您可以忍受，请使用`std::array`.

话虽如此，使用`std::vector`和`reserve`ing 大小对于 bounded 也同样有效`std::vector`。这样，实际大小可能会有所不同，并且您只能获得一个内存分配（除非您破坏了容量）。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-06-22T01:47:27.467

这是上述流程图的 C++11 版本。[最初发布时未注明原作者[Mikael Persson](https://stackoverflow.com/a/22671607/2757035) ]

![](../Images/bb5f49ac48fd27e29e484f424369cb06.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-16T16:55:38.087

这是一个快速旋转，虽然它可能需要工作

```
Should the container let you manage the order of the elements?
Yes:
  Will the container contain always exactly the same number of elements? 
  Yes:
    Does the container need a fast move operator?
    Yes: std::vector
    No: std::array
  No:
    Do you absolutely need stable iterators? (be certain!)
    Yes: boost::stable_vector (as a last case fallback, std::list)
    No: 
      Do inserts happen only at the ends?
      Yes: std::deque
      No: std::vector
No: 
  Are keys associated with Values?
  Yes:
    Do the keys need to be sorted?
    Yes: 
      Are there more than one value per key?
      Yes: boost::flat_map (as a last case fallback, std::map)
      No: boost::flat_multimap (as a last case fallback, std::map)
    No:
      Are there more than one value per key?
      Yes: std::unordered_multimap
      No: std::unordered_map
  No:
    Are elements read then removed in a certain order?
    Yes:
      Order is:
      Ordered by element: std::priority_queue
      First in First out: std::queue
      First in Last out: std::stack
      Other: Custom based on std::vector????? 
    No:
      Should the elements be sorted by value?
      Yes: boost::flat_set
      No: std::vector 
```

您可能会注意到这与C++03 版本有*很大*不同，主要是因为我真的不喜欢链接节点。链接节点容器通常可以在性能上被非链接容器击败，除非在极少数情况下。如果您不知道这些情况是什么，并且可以访问 boost，请不要使用链接节点容器。（std::list、std::slist、std::map、std::multimap、std::set、std::multiset）。此列表主要关注小型和中型容器，因为 (A) 这是我们在代码中处理的 99.99%，并且 (B) 大量元素需要自定义算法，而不是不同的容器。

# python - 如何保持字典的结构

> ID：10699271
> 
> 赞同：1
> 
> 时间：2012-05-22T09:26:31.557
> 
> 标签：python

好吧，我有以下字典：

```
 {'3d1011c0bade5f0a064f7daeef09e7acf900cfe8af09e025859b3426': ['mils news 02122002_0005.txt', 1] } 
```

在哪里

```
 ['mils news 02122002_0005.txt', 1] 
```

是一个列表。现在我有以下内容：

```
result_array = {k: db_array.get(k, 0)[1] + db_array.get(k, 0)[1] for k in set(db_array) | set(db_array)} 
```

有了这个，我想将列表中的数字与另一本字典相加。所以我的问题是如何保持字典不变，因为我得到以下信息：

```
{'3d1011c0bade5f0a064f7daeef09e7acf900cfe8af09e025859b3426': 2} 
```

因此。

预期输出：

```
{'3d1011c0bade5f0a064f7daeef09e7acf900cfe8af09e025859b3426': ['mils news 02122002_0005.txt', 2] } 
```

根据用户的第一个答案，解决方案是 tnx，但我得到以下不同键的信息：

```
db_array = {'a': ['mils news 02122002_0005.txt', 3]}
>>> result_array = {'b': ['mils news 02122002_0005.txt', 3]}
>>> result_array = {k: [db_array[k][0],db_array[k][1] + result_array.get(k, ['', 0])[1]] for k in set(db_array) | set(result_array)}
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 1, in <dictcomp>
KeyError: 'b' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:33:58.730

在 dict 生成器表达式中包含 db_array[k][0] 值：

```
dv = ['', 0]
result_array = {k: [
        db_array.get(k, result_array.get(k))[0],
        db_array.get(k, dv)[1] + result_array.get(k, dv)[1]
    ] for k in set(db_array) | set(result_array)} 
```

请注意，`['', 0]`如果密钥尚未出现在任一字典中，我将默认值更新为（并使用变量来增加可读性）。请注意，对于列表中的第一项，如果 db_array 中不存在键，我们将回退到 result_array；密钥始终存在于两个字典中的至少一个中，这样您就不会得到空字符串值。

如果键不在`result_array`字典中，那么您的原始默认值会导致问题，因为您使用 int`0`然后索引为数组：

```
>>> result_array.get('foobar', 0)[1]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not subscriptable 
```

（更新以反映您显示原始代码的评论）。

# javascript - jqPlot - 使用什么工具来缩小 jqPlot JavaScript 文件

> ID：10699272
> 
> 赞同：3
> 
> 时间：2012-05-22T09:26:32.980
> 
> 标签：javascript, jquery, jqplot

我对其中一个 jqPlot 插件文件 ( `jqplot.highlighter.js`) 进行了一些更改，我想在部署之前将其缩小。

有谁知道 jqPlot 开发人员使用什么工具来缩小与 jqPlot 相关的 .js 文件？也许他们使用 JSMin？

在`jqplot.json2.js`文件中我发现：

```
This code should be minified before deployment.
See http://javascript.crockford.com/jsmin.html 
```

但我想仔细检查一致性。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:26:25.677

缩小 jqPlot 文件比我最初想象的要复杂得多。

方法如下：[如何正确缩小 jqPlot 文件](https://groups.google.com/group/jqplot-users/browse_thread/thread/5afa9b238f67da2d)

# localization - 如何根据当前用户区域设置对 Wicket 下拉列表中的选项进行排序？

> ID：10699275
> 
> 赞同：4
> 
> 时间：2012-05-22T09:26:42.043
> 
> 标签：localization, wicket

我有以下问题：

*   带有元素列表的下拉菜单
*   这些元素中的每一个都有一个固定的键，IChoiceRenderer 实现使用它来查找键的本地化版本（它是在不同包中实现的标准实用渲染器）
*   本地化键列表位于属性文件中，链接到实例化下拉列表的面板。

是否有一个优雅/可重用的解决方案让下拉列表按字母顺序显示其元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:06:26.123

最后，我认为使用渲染可能是最好的方法。为了使其可重用和高效，我将其隔离在一个行为中。

这是代码：

```
import org.apache.wicket.Component;
import org.apache.wicket.behavior.Behavior;
import org.apache.wicket.markup.html.form.AbstractChoice;
import org.apache.wicket.markup.html.form.IChoiceRenderer;

import java.util.ArrayList;
import java.util.Comparator;
import java.util.List;

import static java.util.Arrays.sort;

/**
 * This {@link Behavior} can only be used on {@link AbstractChoice} subclasses. It will sort the choices
 * according to their "natural display order" (i.e. the natural order of the display values of the choices).
 * This assumes that the display value implements {@link Comparable}. If this is not the case, you should
 * provide a comparator for the display value. An instance of this class <em>cannot be shared</em> between components.
 * Because the rendering can be costly, the sort-computation is done only once, by default,
 * unless you set to <code>false</code> the <code>sortOnlyOnce</code> argument in the constructor.
 *
 * @author donckels (created on 2012-06-07)
 */
@SuppressWarnings({"unchecked"})
public class OrderedChoiceBehavior extends Behavior {

    // ----- instance fields -----

    private Comparator displayValueComparator;
    private boolean sortOnlyOnce = true;
    private boolean sorted;

    // ----- constructors -----

    public OrderedChoiceBehavior() {
    }

    public OrderedChoiceBehavior(boolean sortOnlyOnce) {
        this.sortOnlyOnce = sortOnlyOnce;
    }

    public OrderedChoiceBehavior(boolean sortOnlyOnce, Comparator displayValueComparator) {
        this.sortOnlyOnce = sortOnlyOnce;
        this.displayValueComparator = displayValueComparator;
    }

    // ----- public methods -----

    @Override
    public void beforeRender(Component component) {
        if (this.sorted && this.sortOnlyOnce) { return;}
        AbstractChoice owner = (AbstractChoice) component;
        IChoiceRenderer choiceRenderer = owner.getChoiceRenderer();
        List choices = owner.getChoices();

        // Temporary data structure: store the actual rendered value with its initial index
        Object[][] displayValuesWithIndex = new Object[choices.size()][2];
        for (int i = 0, valuesSize = choices.size(); i < valuesSize; i++) {
            Object value = choices.get(i);
            displayValuesWithIndex[i][0] = choiceRenderer.getDisplayValue(value);
            displayValuesWithIndex[i][1] = i;
        }

        sort(displayValuesWithIndex, new DisplayValueWithIndexComparator());
        List valuesCopy = new ArrayList(choices);
        for (int i = 0, length = displayValuesWithIndex.length; i < length; i++) {
            Object[] displayValueWithIndex = displayValuesWithIndex[i];
            int originalIndex = (Integer) displayValueWithIndex[1];
            choices.set(i, valuesCopy.get(originalIndex));
        }
        this.sorted = true;
    }

    public Comparator getDisplayValueComparator() {
        return this.displayValueComparator;
    }

    // ----- inner classes -----

    private class DisplayValueWithIndexComparator implements Comparator<Object[]> {

        // ----- Comparator -----

        public int compare(Object[] left, Object[] right) {
            Object leftDisplayValue = left[0];
            Object rightDisplayValue = right[0];
            if (null == leftDisplayValue) { return -1;}
            if (null == rightDisplayValue) { return 1;}

            if (null == getDisplayValueComparator()) {
                return ((Comparable) leftDisplayValue).compareTo(rightDisplayValue);
            } else {
                return getDisplayValueComparator().compare(leftDisplayValue, rightDisplayValue);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:10:53.360

如果您想要一个基于 Wicket 的解决方案，您可以尝试使用以下内容对列表进行排序：

```
public class ChoiceRendererComparator<T> implements Comparator<T> {

    private final IChoiceRenderer<T> renderer;

    public ChoiceRendererComparator(IChoiceRenderer<T> renderer) {
        this.renderer = renderer;
    }

    @SuppressWarnings("unchecked")
    public int compare(T o1, T o2) {
        return ((Comparable<Object>) renderer.getDisplayValue(o1)).compareTo(renderer.getDisplayValue(o2));
    }
} 
```

用法：

```
 List<Entity> list = ...
    IChoiceRenderer<Entity> renderer = ...
    Collections.sort(list, new ChoiceRendererComparator<Entity>(renderer));
    DropDownChoice<Entity> dropdown = new DropDownChoice<Entity>("dropdown", list, renderer); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-30T17:06:57.953

使用 Java 的[Collat](https://docs.oracle.com/javase/7/docs/api/java/text/Collator.html) ​​or 使用 DropDownChoice 的这个扩展（基本上区域敏感排序 - 考虑国家字符和国家排序规则）

使用 Wicket 6 和 Java 5+ 测试的代码：

```
import java.text.Collator;
import java.util.Comparator;
import java.util.List;
import java.util.Locale;

import org.apache.wicket.Session;
import org.apache.wicket.markup.html.form.DropDownChoice;
import org.apache.wicket.markup.html.form.IChoiceRenderer;
import org.apache.wicket.model.IModel;

import com.google.common.collect.Ordering;

/**
 * DropDownChoice which sort its choices (or in HTML's terminology select's options) according it's localized value
 * and using current locale based Collator so it's sorted how it should be in particular language (ie. including national characters, 
 * using right order).
 * 
 * @author Michal Bernhard michal@bernhard.cz 2013
 *
 * @param <T>
 */
public class OrderedDropDownChoice<T> extends DropDownChoice<T> {

    public OrderedDropDownChoice(String id, IModel<? extends List<? extends T>> choices, IChoiceRenderer<? super T> renderer) {
        super(id, choices, renderer);
    }

    public OrderedDropDownChoice(String id, IModel<? extends List<? extends T>> choices) {
        super(id, choices);
    }

    public OrderedDropDownChoice(String id) {
        super(id);
    }

    public OrderedDropDownChoice(
            String id,
            IModel<T> model,
            IModel<? extends List<? extends T>> choices,
                    IChoiceRenderer<? super T> renderer) {

        super(id, model, choices, renderer);
    }

    @Override
    public List<? extends T> getChoices() {
        List<? extends T> unsortedChoices = super.getChoices();
        List<? extends T> sortedChoices = Ordering.from(displayValueAlphabeticComparator()).sortedCopy(unsortedChoices);

        return sortedChoices;
    }

    private Collator localeBasedTertiaryCollator() {
        Locale currentLocale = Session.get().getLocale();
        Collator collator = Collator.getInstance(currentLocale);
        collator.setStrength(Collator.TERTIARY);

        return collator;
    }

    private Comparator<T> displayValueAlphabeticComparator() {

        final IChoiceRenderer<? super T> renderer = getChoiceRenderer();

        return new Comparator<T>() {

            @Override
            public int compare(T o1, T o2) {
                Object o1DisplayValue = renderer.getDisplayValue(o1);
                Object o2DisplayValue = renderer.getDisplayValue(o2);

                return localeBasedTertiaryCollator().compare(o1DisplayValue, o2DisplayValue);
            }
        };

    }

} 
```

复制自[https://gist.github.com/michalbcz/7236242](https://gist.github.com/michalbcz/7236242)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:02:01.133

我们在我公司使用的解决方案是基于 Javascript 的，我们在要排序的下拉列表上设置了一个特殊的 css 类，并使用 jQuery 小技巧进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T09:09:14.437

面对同样的问题，我将部分本地化数据从我的 XML 移动到数据库，实现了匹配的解析器，并且能够使用本地化的字符串进行排序。表格设计和休眠配置有点棘手，如下所述：[休眠@ElementCollection - 需要更好的解决方案](https://stackoverflow.com/a/6103300/682559 "接受的答案")。

ResourceLoader 遵循以下原则：

```
public class DataBaseStringResourceLoader extends ComponentStringResourceLoader {

    private static final transient Logger logger = Logger
            .getLogger(DataBaseStringResourceLoader.class);

    @Inject
    private ISomeDAO someDao;
    @Inject
    private IOtherDao otherDao;
    @Inject
    private IThisDAO thisDao;
    @Inject
    private IThatDAO thatDao;

    @Override
    public String loadStringResource(Class<?> clazz, String key, Locale locale,
            String style, String variation) {
        String resource = loadFromDB(key, new Locale(locale.getLanguage()));
        if (resource == null) {
            resource = super.loadStringResource(clazz, key, locale, style, variation);
        }
        return resource;
    }

    private String loadFromDB(String key, Locale locale) {
        String resource = null;
        if (locale.getLanguage() != Locale.GERMAN.getLanguage()
                && locale.getLanguage() != Locale.ENGLISH.getLanguage()) {
            locale = Locale.ENGLISH;
        }
        if (key.startsWith("some") || key.startsWith("other")
                || key.startsWith("this") || key.startsWith("that")) {
            Integer id = Integer.valueOf(key.substring(key.indexOf(".") + 1));
            ILocalizedObject master;
            if (key.startsWith("some")) {
                master = someDao.findById(id);
            } else if (key.startsWith("other")) {
                master = otherDao.findById(id);
            } else if (key.startsWith("this") ){
                master = thisDao.findById(id);
            } else {
                master = thatDao.findById(id);
            }
            if (master != null && master.getNames().get(locale) != null) {
                resource = master.getNames().get(locale).getName();
            } else if (master == null) {
                logger.debug("For key " + key + " there is no master.");
            }
        }
        return resource;
    }
[...]
    } 
```

# java - 是否可以使用 GridBagLayout 使 JPanel 中的元素从左上角开始？

> ID：10699277
> 
> 赞同：2
> 
> 时间：2012-05-22T09:26:43.387
> 
> 标签：java, swing, gridbaglayout

我有一个 Swing 表单，其中包含`activityScrollPane`用于 JPanel( ) 的 JScrollPane( `activityPanel`)。该面板包含一个 JTextField 和一个 JButton（用于向面板添加更多字段）。现在的问题是元素从面板的中心开始，如下图所示（边界标记`activityScrollPane`边界）

![在此处输入图像描述](../Images/8f93efecab8a93a469e807fb6a6b2ef5.png)

以下是我目前用来制作滚动窗格和相关组件的代码。

```
 //part of the code for creating the ScrollPane

        final JPanel activityPanel = new JPanel(new GridBagLayout());
        gbc.gridx=0;
        gbc.gridy=0;
        JScrollPane activityScrollPane = new JScrollPane(activityPanel); 
        //adding activity fields
        activityFields = new ArrayList<JTextField>();
        fieldIndex = 0;
        activityFields.add(new JTextField(30));

        final GridBagConstraints activityGBC = new GridBagConstraints();
        activityGBC.gridx=0;
        activityGBC.gridy=0;
        activityGBC.anchor = GridBagConstraints.FIRST_LINE_START;
        activityPanel.add(activityFields.get(fieldIndex),activityGBC);

        fieldIndex++;
        JButton btn_more = (new JButton("more"));
        activityGBC.gridx=1;
        activityPanel.add(btn_more,activityGBC); 
```

如何使 JTextField 和 JButton 或任何组件出现在 JScrollPane 的左上角。我已经尝试过使用

```
activityConstraints.anchor = GridBagConstraints.NORTHWEST; 
```

正如 SO [post](https://stackoverflow.com/questions/6364280/starting-gridbaglayout-from-top-left-corner-in-java-swing)中所指出的，但它似乎根本不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:54:51.733

您只是忘记提供任何`weightx/weighty`值，至少一个具有非零值的值就可以了。看看这个代码示例：

```
import java.awt.*;
import javax.swing.*;
public class GridBagLayoutDemo
{
    private JTextField tfield1;
    private JButton button1;

    private void displayGUI()
    {
        JFrame frame = new JFrame("GridBagLayout Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridBagLayout());

        tfield1 = new JTextField(10);
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;   
        gbc.weightx = 1.0;
        gbc.weighty = 1.0;  
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.fill = GridBagConstraints.HORIZONTAL;       
        contentPane.add(tfield1, gbc);

        button1 = new JButton("More");
        gbc.gridx = 1;
        gbc.gridy = 0;
        gbc.fill = GridBagConstraints.NONE;
        contentPane.add(button1, gbc);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new GridBagLayoutDemo().displayGUI();
            }
        });
    }
} 
```

**最新编辑：沿 Y 轴没有间距**

```
import java.awt.*;
import javax.swing.*;
public class GridBagLayoutDemo
{
    private JTextField tfield1;
    private JButton button1;
    private JTextField tfield2;
    private JButton button2;

    private void displayGUI()
    {
        JFrame frame = new JFrame("GridBagLayout Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridBagLayout());

        tfield1 = new JTextField(10);
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;   
        gbc.weightx = 1.0;
        //gbc.weighty = 0.2;    
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.fill = GridBagConstraints.HORIZONTAL;       
        contentPane.add(tfield1, gbc);

        button1 = new JButton("More");
        gbc.gridx = 1;
        gbc.gridy = 0;
        gbc.fill = GridBagConstraints.NONE;
        contentPane.add(button1, gbc);

        tfield2 = new JTextField(10);
        gbc.weightx = 1.0;
        gbc.weighty = 0.2;  
        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.HORIZONTAL;       
        contentPane.add(tfield2, gbc);

        button2 = new JButton("More");
        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.NONE;
        contentPane.add(button2, gbc);

        JScrollPane scroller = new JScrollPane(contentPane);

        frame.add(scroller);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new GridBagLayoutDemo().displayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:31:18.077

尝试使用**BorderLayout**：`controls.setLayout(new BorderLayout());`然后将其应用于您的 JPanel`controls.add(yourPanel, BorderLayout.PAGE_START);`

我也有问题，`GridBagLayout`所以我解决了它，`BorderLayout`它工作得很好。

* * *

所以我为你的小例子写了：

```
private void initComponents() {

        controls = new Container();
        controls = getContentPane();
        controls.setLayout(new BorderLayout());

        panel = new JPanel();
        panel.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        field = new JTextField(20);
        c.gridx = 0;
        c.gridy = 0;
        panel.add(field, c);

        one = new JButton("Go!");
        c.gridx = 1;
        c.gridy = 0;
        panel.add(one, c);

        controls.add(panel, BorderLayout.PAGE_START);

    } 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T09:32:17.810

抱歉，我的回答与您的要求不符，但是您为什么不使用 GroupLayout 而不是 GridBag Layout，这样更容易处理

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T09:43:13.113

我认为这可能是简单和可能的，你可以

*   将嵌套的[JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)放到[JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)

对此`JPanel`

*   将`JPanels`包含`JComponent`到[GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)（关于滚动的通知，您必须更改滚动增量）

或使用最复杂`JComponents`的

*   将`JPanels`包含`JComponent`作为项目添加到[JList](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)

*   将`JPanels`包含`JComponent`作为[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)的行（只有一列，有或没有`TableHeader`）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-22T07:27:53.833

在右侧添加一个面板，在底部添加一个面板。

**右面板：** 将权**重 X**设置为**1.0**。将**填充**设置为**水平**。

**底部面板：** 将**权重 Y**设置为**1.0**。将**填充**设置为**垂直**

可能有更好的方法，但这对我有用。

# vb.net - VB：是否可以从 List(Of DataRow) 转换/转换为 List(Of String)？

> ID：10699278
> 
> 赞同：2
> 
> 时间：2012-05-22T09:26:45.693
> 
> 标签：vb.net, list, datatable

我正在尝试解决有关列表类型的问题。首先，我的数据库中有一个存储过程，它选择单个列，我尝试在我的 VB 应用程序中继续它。通过创建一个方法函数，我声明了一个通过 SqlCommand 加载的 DataTable（具有 CloseConnection 行为）。之后，我公开声明了一个 List(Of String) ，它需要使用正在进行的存储过程中的行/项目来填充。下面是我的代码片段：

```
Dim dt As New DataTable()

        Try
            If conn.State = ConnectionState.Open Then
                conn.Close()
            Else
                conn.Open()
                Dim cmd = New SqlCommand("LoadCodes", conn)
                cmd.CommandType = CommandType.StoredProcedure

                dt.Load(cmd.ExecuteReader(CommandBehavior.CloseConnection))
                Dim collection As New List(Of DataRow)
                collection = dt.AsEnumerable.ToList

                LPrefix = collection.Cast(Of String)()

            End If
        Catch ex As Exception
            MsgBox(ex.Message + vbCritical)
        End Try 
```

这是`LPrefix = collection.Cast(Of String)()`我收到异常错误的地方，告诉我我无法真正转换它。旧的时尚方式是使用 for/for 每个循环进行迭代，但这不是我想要最好地利用性能的方式，特别是如果列表将包含来自单个列的数千行。所以基本上我想在不使用 For/For Each 循环的情况下将该 DataTable 中的这些项目插入到 List(Of String) 中。

在 Visual Studio 2010 Ultimate、.NET Framework 4.0 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:05:28.093

你根本不需要你`collection`的。使用 LINQ，您可以直接从数据表中提取第一列：

```
dt.Load(cmd.ExecuteReader(CommandBehavior.CloseConnection))  
LPrefix = (From row In dt.AsEnumerable()
           Select row.Field(Of String)(0)).ToList() 
```

当然，这可能会在内部使用循环，但由于您想*将每个值复制*到字符串列表中，如果不循环遍历数据行*就无法做到这一点。*

* * *

另一种选择是使用 an`IEnumerable(Of String)`而不是 a `List(Of String)`：

```
dt.Load(cmd.ExecuteReader(CommandBehavior.CloseConnection))  
Dim LPrefixNew As IEnumerable(Of String) = _
    From row In dt.AsEnumerable()
    Select row.Field(Of String)(0) 
```

您可以像遍历列表一样遍历 IEnumerable，但评估是惰性的：只要您不访问元素，就不会遍历 DataTable。因此，访问这个 IEnumerable 就像直接从 DataTable 中读取元素一样，只是以更方便的方式。

* * *

另一个忠告：在你*衡量*它之前，你不应该尝试对性能进行推理。例如，您的行`collection = dt.AsEnumerable.ToList`可能已经遍历整个 DataTable 并将每个 DataRow 引用复制到 DataRows 列表中；所以，有了这条线，你*已经有了*你试图避免的性能损失。

所以，不要自动假设某个`For`循环总是比某个单一语句慢。[测量它](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)，*然后*优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:01:24.667

假设您`DataRow`只有一列，您只需要指示`ConvertAll`转换它：

```
LPrefix = collection.ConvertAll(Function(x) x[0].ToString) 
```

*感谢**Binary Warrier**的 c#-2-vb 翻译！*

# c# - C# 聊天应用 AppendText 导致问题

> ID：10699286
> 
> 赞同：0
> 
> 时间：2012-05-22T09:27:10.477
> 
> 标签：c#, multithreading, appendtext

我编写了一个聊天应用程序，除了导致我出现问题的 1 行代码外，它可以正常工作。

在我的 MainForm 中，我有：

```
 ChatBox cb = new ChatBox(person); 
        this.AddOwnedForm(cb);
        cb.Show(); 
```

这是显示我的聊天框，问题是这只能使用一次如果我尝试在我的聊天框线程中附加文本：

```
 if (Ex.Message.Contains("chat ended"))
           {
             entryBox.Enabled = false;
             send.Enabled = false;
            if (displayBox.Enabled == true)
               {
                displayBox.AppendText("The User has left chat" + Environment.NewLine); // <- PROBLEM LINE OF CODE
                displayBox.Enabled = false; 
               }
           } 
```

在未注释 appendtext 行的情况下，该程序将打开一个聊天框并正常关闭，但如果我尝试打开另一个，它将冻结。如果没有这行代码，应用程序可以正常工作。我相信这可能是线程未正确结束或类似问题的问题。

对此问题的任何帮助将不胜感激。如果我解释得不好，请询问并尝试做得更好。

**编辑：**

我尝试使用委托，但我仍然遇到同样的问题。

```
private void setDisplayBox(RichTextBox db)
    {
        if (this.InvokeRequired == false)
        {
            db.SelectionColor = Color.Red;
            db.AppendText("The User has left chat" + Environment.NewLine);
        }
        else
        {
        SetDisplayBox setDb = new SetDisplayBox(setDisplayBox);
        this.Invoke(setDb, new object[] { db });
        }
    } 
```

这真的让我现在很难过：/。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:38:43.970

我认为您正在尝试在用户线程中设置文本。`Control.Enabled`将在另一个线程中正常工作，但您不能在那里设置任何值，例如 Text 。因此，将文本附加到主线程中。你可以使用`displayBox.Invoke`方法来实现这一点。

# android - 使用 gcc 的 C++ 前端编译 C 代码的好处

> ID：10699287
> 
> 赞同：13
> 
> 时间：2012-05-22T09:27:11.920
> 
> 标签：android, c++, c, gcc, dalvik

我对一年前[在 android 的 dalvik 平台上提交的这个提交感到非常疑惑和困惑。](https://github.com/android/platform_dalvik/commit/cd8f5e701547739f241594b43e9470c92d98e9cf)

文件扩展名已更改为 C++ 扩展名，以便“将解释器移至 C++” - 使用编译器的 C++ 前端。

这种变化有什么好处？[Dalvik 平台](https://github.com/android/platform_dalvik)是一个 100% C & asm 项目，*不使用任何 C++ 特性*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:46:16.927

我只能推测，但考虑到 Android 系统的复杂性如何增长，C++ 的作用域特性（类和命名空间）可能会使代码库更易于管理。

**编辑**

即使该项目目前没有使用任何 C++ 功能，他们也可能只是提前计划。

~~除了一些小的差异（即大多数人无论如何都避免的一些参数约定）之外，C 源代码无需修改即可编译为 C++。话虽如此，在某些领域，C++ 语法比 C 更严格（C 允许您将 void 指针分配给另一个指针类型而无需强制转换；在 C++ 中，这是一个错误），并且强制执行这种严格性可以避免以后出现问题。~~ *

*) *（这是一个过于简单化的观点，请参阅评论）*

改变的另一个原因可能是因为大多数现代开发更喜欢 C++ 而不是 C，所以可以使用更丰富的工具集。

再次猜测，但在诞生之初，Android C 可能是嵌入式设备开发的唯一可行选择，现在这种限制已不再是问题。

# objective-c - iPad 应用程序在 NSOperationQueue 期间冻结

> ID：10699291
> 
> 赞同：0
> 
> 时间：2012-05-22T09:27:28.760
> 
> 标签：objective-c, ios, nsoperationqueue

我在实现 NSOperationQueue 的应用程序中遇到问题。似乎按下 iPad 的关闭按钮会使 UI 冻结。应用程序本身仍在后台运行，UI 已更新，只是它不再响应触摸或旋转，也没有按应有的方式关闭。

我有一个更新模块，它下载相当长的 xml 文件列表并将它们保存在设备上。操作队列的 MaxConcurentOperations 值为 2。通常一切正常，应用程序运行良好且花花公子，响应我的触摸和旋转，直到我按下设备的按钮。在此之后，用户界面只是冻结。进度仍然更新（一个 UILabel），仍然显示循环动画，但应用程序不会关闭，直到所有操作完成。

我没有在队列中调用 waitUntilAllOperationsAreFinished，所以我不知道是什么原因造成的。到目前为止，我只在 iOs 5.0 的第一代 iPad 上进行了测试

如果有人能给我一些建议，我将不胜感激。如有必要，我可以发布 NSOperationQueue 和 NSOperation 类代码，但不知何故，我有这样的感觉：我错误地处理了这个问题，而不是错误的代码行

[编辑] 我还使用计时器定期检查下载状态，但我注意到不调用计时器并不能消除问题

> self.timer = [NSTimer scheduleTimerWithTimeInterval:2.0 target:self 选择器:@selector(xmlDownloaded) userInfo:nil repeats:YES];

[edit2] 经过一些进一步的研究，我确保我的操作是并发的，为了确定，我改变了将操作添加到队列中的方式。代替

> [下载队列添加操作：op]；

我将它们添加到一个名为“操作”的可变数组中，最后我使用了

> [downloadQueue addOperations:operations waitUntilFinished:NO];

但是当我按下关闭按钮时，我的应用程序仍然冻结...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:05:36.530

疯狂的猜测，您正在锁定主线程等待您的操作完成/您正在销毁您的操作委托`viewWillDisappear`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:29:56.917

似乎有另一个功能导致了这种情况，即使我不明白为什么......

我有一个标签动画

> CABasicAnimation *fadey = [CABasicAnimation animationWithKeyPath:@"opacity"];
> 
> [fadey setToValue:[NSNumber numberWithFloat:0.35f]];
> 
> fadey.repeatCount = HUGE_VALF;
> 
> [fadey setAutoreverses:YES];
> 
> [fadey setDuration:0.6f];

这个小功能导致应用程序等待所有操作完成才能关闭应用程序。奇怪的是，这个函数甚至没有被 NSOperations 调用，但是在它们之前，我不知道为什么......当我按下关闭按钮时一切都会中断，否则没有问题。因此，如果其他人遇到类似的问题，检查一些重复的动画可能会有所帮助

# c - 在C中更改GTK中标签的文本颜色

> ID：10699294
> 
> 赞同：1
> 
> 时间：2012-05-22T09:27:41.527
> 
> 标签：c, gtk, pango

我正在使用 Gtk 2.0。

我正在尝试更改标签的文本颜色/字体颜色。

能有多难？我只是在尝试诸如 gtk_widget_modify_text 之类的东西，但无济于事。我想通过添加一个包含所有样式的简单资源文件来采用“android”或“Qt”方式。我应该在哪里以及作为什么（.rc？）添加这个文件？如何解析这个文件？

我已经用很多小部件编写了我的应用程序，我不想全部更改/重做它们。有人可以给我看一个简单的例子吗？

我什至从网上尝试了一个 Pango 示例，但问题是我标签中的文本不断变化，因此我无法遵循这一点。请帮忙。这是我迄今为止尝试过的，但没有成功。

```
 GtkWidget *label1;    
    label1= gtk_label_new(" ");
    gtk_box_pack_start (GTK_BOX(box1), label1,TRUE,TRUE, 0);

    GdkColor color;

    gdk_color_parse ("white", &color);

    gtk_widget_modify_text ( GTK_WIDGET(label1), GTK_STATE_NORMAL, &color);

    gchar *stringMarkupText = "<span foreground=\"white\">   <b>Bold</b></span>"; //white color and bold--> the length of this text is fixed by number of spaces. I need to call a function that would set this text on a g_signal_connect so do not want to fix spaces!!
    gchar *stringPlainText;

    PangoAttrList  *attrList;

    pango_parse_markup(stringMarkupText, -1, 0, &attrList, &stringPlainText, NULL, NULL);
    gtk_label_set_attributes(GTK_LABEL(label1), attrList); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:07:34.113

在我看来，在这种情况下，您可以使用 GTK 资源文件（rc 文件）。

您可以使用 gtk_rc_parse 函数来加载您的 rc 文件。

```
void gtk_rc_parse(const gchar *filename); 
```

# c# - SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。

> ID：10699296
> 
> 赞同：7
> 
> 时间：2012-05-22T09:27:46.170
> 
> 标签：c#, sql-server-2008, gmail, smtp-auth

> **可能重复：**
> [SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应是：5.5.1 Authentication Required](https://stackoverflow.com/questions/10698779/the-smtp-server-requires-a-secure-connection-or-the-client-was-not-authenticated)

我在运行此代码时遇到问题，然后出现错误“SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。”

我的代码是：

*代码*

```
protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
{

    MailMessage mail = new MailMessage();
    mail.To.Add("info@msslindia.com");
    mail.From = new MailAddress("info@msslindia.com");
    string body = "<table><tr><td>Company Name:</td><td>" + txt_cname.Text + "</td></tr><tr><td>Address With No.:</td><td>" + txt_addwithno.Text + "</td></tr><tr><td>Contact Person:</td><td>" + txt_conperson.Text + "</td></tr><tr><td>Email Id</td><td>" + txt_email.Text + "</td></tr><tr><td>Description</td><td>" + txt_description.Text + "</td></tr></table>";
    mail.Body = body;
    mail.IsBodyHtml = true;
    SmtpClient smtp = new SmtpClient();
    smtp.Host = "smtp.gmail.com";
    smtp.Port = 587;

    smtp.Credentials = new System.Net.NetworkCredential("info@msslindia.com", "12345");
    smtp.EnableSsl = true;
    smtp.Send(mail);

    txt_cname.Focus();
    txt_cname.Text = "";
    txt_addwithno.Text = "";
    txt_conperson.Text = "";
    txt_email.Text = "";
    txt_description.Text = "";

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T10:30:19.833

您在哪里托管您的网站？Gmail 可防止对您的帐户进行无法识别的访问。尝试执行此代码，然后转到您的 gmail，它会询问您访问尝试是否来自您。允许应用程序，您就完成了。

# java - 用于横向滚动空间射击游戏的 Java 游戏服务器

> ID：10699300
> 
> 赞同：1
> 
> 时间：2012-05-22T09:27:53.447
> 
> 标签：java, sockets, network-programming

我的朋友使用 java 开发了这个游戏，他们让我为它做多层。它是像小行星一样的横向滚动射击游戏。我知道它必须处理套接字，并且 id 更喜欢使用 tcp 而不是 udp 来保持连接并且没有来回的数据集群。我有一个原型，可以从客户端到服务器来回发送字符串，反之亦然。但是我将如何将其实现到游戏中？我会将船的 x 和 y 坐标发送到托管游戏的游戏，然后发回其他游戏坐标吗？任何帮助将不胜感激，谢谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:19:08.303

我会为你的游戏推荐这个结构：

*   创建一个托管游戏并进行计算的服务器。
*   让服务器创建和处理在屏幕中移动的对象（敌人）。这样你只需要发送数据服务器 -> 客户端来更新用户界面。
*   至于太空船，服务器必须同时更新所有客户端，因此在客户端，每次有运动时将 x,y 坐标发送到服务器，然后将新位置广播给每个玩家。拍摄或任何其他在客户端生成的事件也是如此。
*   因为当两个物体发生碰撞时（例如激光和敌人），这应该由服务器处理，同时具有物体和船只的位置。

**客户端**只需读取对象坐标，绘制它们并将船舶/激光位置发送到服务器。**服务器**
将生成对象并将其位置发送给所有客户端。同时读取船舶位置并更新用户界面。 发送/读取数据可能很困难。有几种方法可以做到这一点，具体取决于您现在更容易理解什么。以后可以改进。

 ***   在整个游戏过程中，服务器不断发送对象位置。
    如果屏幕上的对象数量并不总是相同，请发送一个包含当前对象数量 + 坐标的字符串。客户端使用您之前指定的数字循环遍历这些坐标。
*   船只也是如此。我想这些将是一个固定的数字，所以你可以发送他们的坐标。
*   在字符串内部，坐标应该用一些东西分隔，这样您就可以在收到它们时读取它们。
    一种方法是将它们与特定字符分开

    ```
    "x1,y1;x2,y2;x3,y3;x4,y4; ..." 
    ("," 在 xy 和 ";" 之间的坐标集之间)
    ```

    或者，由于您要发送 a `String`，因此始终使用相同数量的字符（例如 4）编写它们

    ```
    “0012054201620104”（x1：12，y1：542；x2：162，y2：104）
    ```

*   最后，我建议在您发送的每个数据包中添加一个标头，以了解它是对象坐标列表还是船舶坐标列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:38:56.047

好吧，这可以通过多种方式完成，假设我们有对象： - Space_1，Space_2，....Space_n 作为航天器对象

随着游戏的进行，屏幕将充满航天器对象每次您将获得游戏中所有 space_x 元素的 x,y 坐标并且您还将发送您的坐标

因此，客户端计算机上的游戏将具有 - 您的坐标的 point1 (x,y) - point_2....point_n (x,y) 用于（您的对手的）其他航天器 - 每次刷新 x,y对手变

您将在本地应用程序中处理航天器的射击假设您射击并击中 space_3 您将向服务器发送 space_3 已被击中，因此在服务器中将这艘船标记为死亡当其他客户端（其他用户/玩家）从服务器获取刷新调用，他们都会看到 space_3 已被击中

希望这有帮助，如果它太抽象的话**

# android - AsyncTask 取消方法抛出处理程序错误

> ID：10699302
> 
> 赞同：0
> 
> 时间：2012-05-22T09:28:14.727
> 
> 标签：android, android-asynctask, handler, locationlistener, looper

我有一个简单的活动，我用一个按钮启动一个 AsyncTask 并用另一个按钮停止它。

在 AsyncTask 中，我使用 LocationListner 从 GPS 传感器获取更新并计算获得的位置之间的距离。

当我按下开始按钮时，会创建新线程并且代码工作正常。从调试的角度来看，我可以看到 GPS 更新被定期捕获，并且我的变量也相应地更新。

但是，当我按下取消按钮时，问题就开始了。在文档（[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)）中，我读到 cancel() 方法应该在 doInBackground 代码完成时调用 onCancelled() 。出于这个原因，我提出：

```
if (isCancelled()){
    locManager.removeUpdates(locListener);
} 
```

到处都是 doInBackground 方法，希望它能让我摆脱困境。不幸的是，我什至没有到达那部分。有一次，当我按下结束按钮时，我收到以下错误：

```
05-22 11:10:05.043: E/Handler(6353): java.lang.NullPointerException
05-22 11:10:05.043: E/Handler(6353):    at com.pavle.taximetar.TaximetarActivity$2.onClick(TaximetarActivity.java:43)
05-22 11:10:05.043: E/Handler(6353):    at android.view.View.performClick(View.java:3538)
05-22 11:10:05.043: E/Handler(6353):    at android.view.View$PerformClick.run(View.java:14330)
05-22 11:10:05.043: E/Handler(6353):    at android.os.Handler.handleCallback(Handler.java:607)
05-22 11:10:05.043: E/Handler(6353):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-22 11:10:05.043: E/Handler(6353):    at android.os.Looper.loop(Looper.java:154)
05-22 11:10:05.043: E/Handler(6353):    at android.app.ActivityThread.main(ActivityThread.java:4974)
05-22 11:10:05.043: E/Handler(6353):    at java.lang.reflect.Method.invokeNative(Native Method)
05-22 11:10:05.043: E/Handler(6353):    at java.lang.reflect.Method.invoke(Method.java:511)
05-22 11:10:05.043: E/Handler(6353):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-22 11:10:05.043: E/Handler(6353):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-22 11:10:05.043: E/Handler(6353):    at dalvik.system.NativeStart.main(Native Method) 
```

任何想法，这个错误的背后是什么。这是完整的代码。（构建目标是 Android 4.0.3）。该代码在 HTC One V 上进行了测试。

```
public class TaximetarActivity extends Activity {

DistanceCalculator distanceCalculator;
public ArrayList<Drive> listOfRides = new ArrayList<Drive>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button startRide = (Button) findViewById(R.id.button1);
    final Button endRide = (Button) findViewById(R.id.button2);

    startRide.setOnClickListener(new OnClickListener() {        
        public void onClick(View v) {
            distanceCalculator = new DistanceCalculator();
            distanceCalculator.execute(getApplicationContext());
        }   
    });

    endRide.setOnClickListener(new OnClickListener() {  
        public void onClick(View v) {
            distanceCalculator.cancel(true);
        }
    });
}
}

public class DistanceCalculator extends AsyncTask<Context, Void, Void> {

Drive currentRide = new Drive();
Float distanceOfaRide = (float) 0;
LocationManager locManager;
LocationListener locListener;
Context mCtx;
boolean startPointEntered = false;

@Override
protected Void doInBackground(Context... params) {

    mCtx = params[0];

    Looper.prepare();

    if (isCancelled()){
        locManager.removeUpdates(locListener);
    }

    locManager = (LocationManager) mCtx.getSystemService(Context.LOCATION_SERVICE);
    locListener = new LocationListener() {

        public void onStatusChanged(String provider, int status, Bundle extras) {
            if (isCancelled()){
                locManager.removeUpdates(locListener);
            }
        }

        public void onProviderEnabled(String provider) {
            if (isCancelled()){
                locManager.removeUpdates(locListener);
            }
        }

        public void onProviderDisabled(String provider) {
            if (isCancelled()){
                locManager.removeUpdates(locListener);
            }               
        }

        public void onLocationChanged(Location location) {
            if (DistanceCalculator.this.isCancelled()){
                locManager.removeUpdates(locListener);
            }
            calculateDistance(location);
        }
    };

    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 0, locListener);
    Looper.loop();
    return null;
}

@Override
protected void onCancelled() {
    locManager.removeUpdates(locListener);
    Intent intent = new Intent(mCtx, DisplayRide.class);
    intent.putExtra("Distance", distanceOfaRide);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    mCtx.startActivity(intent);
}

private void calculateDistance(Location location){
    if (startPointEntered){
        Location lastPoint = currentRide.drivePoints.get(currentRide.drivePoints.size()-1);
        currentRide.addNewPoint(location);
        distanceOfaRide = distanceOfaRide + location.distanceTo(lastPoint);
    }
    else{
        currentRide.setStartPoint(location);
        startPointEntered = true;
    }
}
}

public class Drive {

    Location startPoint;
    Location endPoint;
    ArrayList<Location> drivePoints = new ArrayList<Location>();

    public Drive() {
        // TODO Auto-generated constructor stub
    }

    public void setStartPoint(Location location){
            startPoint = new Location(location);
        drivePoints.add(0, startPoint);
    }
    public void setEndPoint(Location location){
        endPoint = new Location(location);  
    }
    public void addNewPoint(Location location){
        drivePoints.add(location);
    }
    public Location getStartPoint(){
        return startPoint;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:05:56.923

问题出在这部分代码中：

```
endRide.setOnClickListener(new OnClickListener() {  
    public void onClick(View v) {
        distanceCalculator.cancel(true);
    }
}); 
```

在这里，需要向异步任务中创建的处理程序发送消息。作为对该消息的响应，消息处理函数应该取消该任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:12:28.757

`locManager`在分配它之前，您正在执行操作。

```
if (isCancelled()){
    locManager.removeUpdates(locListener);
}

locManager = (LocationManager) mCtx.getSystemService(Context.LOCATION_SERVICE); 
```

相对...

```
locManager = (LocationManager) mCtx.getSystemService(Context.LOCATION_SERVICE);
if (isCancelled()){
    locManager.removeUpdates(locListener);
} 
```

# mysql - Mysql查询：在网格视图中获取所有结果

> ID：10699303
> 
> 赞同：0
> 
> 时间：2012-05-22T09:28:18.687
> 
> 标签：mysql

我有四张桌子：

1.  类别
2.  类型
3.  疾病 - 有相关疾病。使用同表中的**childOf**字段来关联父子疾病的父子关系。你可以说有不同程度的疾病。疾病等级 1 然后是它之下的许多其他疾病。使用单表管理。
4.  治疗疾病 - 治疗疾病

除了这些之外，我还有所有其他表用于它们之间的关系，例如

1.  类别有类型
2.  类型有病
3.  疾病有治疗

我有一个搜索按钮。我想在搜索后在网格视图中显示所有记录。像这样 。如果我没有选择任何东西并点击搜索..

```
Category name  -  Type     - disease                         - Treat
--------------------------------------------------------------------------------
record 1       -   type    -  level 1                        - treatment

record 1       -   type    -  level 1.1 (child of level 1)   - treatment

record 1       -   type    -  level 1.2 (child of level )    - treatment 
```

任何机构都可以建议我如何实现这一目标。只是一个提示。我会写查询。我不知道我应该从哪个表开始获取数据

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:48:44.527

查看数据，我想您的描述应该是

1.  疾病有一个类型
2.  类型有一个类别
3.  疾病有治疗
4.  疾病可以有父母疾病

所以你应该从疾病开始，加入类型并进一步加入类别，并从疾病加入治疗。

关于层次结构：

解决方案很大程度上取决于您的疾病层次结构是否具有固定的深度。如果你有一个固定的深度，例如最大。1 个孩子，您可以通过 childOF 列添加从“疾病 d_child”到“疾病 d_parent”的外部连接。您也可以将检索所有“根本疾病”的查询与所有“儿童疾病”联合起来。如果您的层次结构没有固定深度，您应该考虑进行多个查询并以编程方式组合结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:33:17.467

Well, that all seems a little complicated and too inter-dependant.

I would have separate tables and a relationship table between them all which links the whole lot of them up and select from that joining the data as and when needed.

This will return rows with all the data on the different disease's that you require.

Question is a little vague though.

# javascript - 单击启动btn时如何允许数组中的多个图像移动？

> ID：10699306
> 
> 赞同：0
> 
> 时间：2012-05-22T09:28:49.623
> 
> 标签：javascript, animation, canvas

我需要一些帮助来移动我创建的名为“Predator”数组的数组中的元素。现在，我将所有图像都显示在 SVG 框上并存储在数组中。

我很难在“for”循环中调用它们并随机移动它们。此外，我想让图像更接近现实生活。示例请查看此网站。

```
<script>

    var startPredator = 20; //number of fish to start with
    var Predator = []; //array of fish
    var predatorW = 307; //fish width
    var predatorH = 313; //fish height
    var velocity = 100; //base velocity
    var imageStrip; //predator image strip
    //var backgroundImage; //background image
    //var backgroundImageW = 981; //background image width
    //var backgroundImageH = 767; //background image height
    //var WIDTH = document.body.offsetWidth;
    //var HEIGHT = document.body.offsetHeight;

    function animate(){
        document.animation.src = arraylist[imgNum].src
        imgNum++

        for (var i=arraylist[].length; i--;){
            arraylist[i].move();
        }

        setInterval(function () { draw(); }, 16.7);
    }       

    function start() {
        for (var i = 0; i < arraylist.length; i++) {
            var image = document.createElement("img");
            image.alt = images[i][0];
            image.width = "150";
            image.height = "150";
            image.src = images[i][1];
            var j = i;
            if (j > 2) j = i - 3;
            document.getElementsByTagName("div")[j].appendChild(image);
        }
    }

    function Predator() {
        var angle = Math.PI * 2 * Math.random(); //set the x,y direction this predator swims
        var xAngle = Math.cos(angle); //set the x value of the angle
        var yAngle = Math.sin(angle); //set the y value of the angle
        var zAngle = 1+-2*Math.round(Math.random()); //set if the predator is swimming toward us or away. 1 = toward us; -1 = away from us
        var x = Math.floor(Math.random() * (WIDTH - predatorW) + predatorW / 2); //set the starting x location
        var y = Math.floor(Math.random() * (HEIGHT - predatorH) + predatorH / 2); //set the starting y location
        var zFar = 100; //set how far away can a predator go
        var zFarFactor = 1; //set the max size the predator can be. 1=100%
        var zClose = 0; //set how near a predator can come
        var z = Math.floor(Math.random() * ((zFar - zClose))); //set the starting z location
        var scale = .1; //set the rate of scaling each frame
        var flip = 1; //set the direction of the fish. 1=right; -1=left
        var cellCount = 16; //set the number of cells (columns) in the image strip animation
        var cell = Math.floor(Math.random() * (cellCount-1)); //set the first cell (columns) of the image strip animation
        var cellReverse = -1; //set which direction we go through the image strip
        var species = Math.floor(Math.random() * 3); //set which species of predator this predator is. each species is a row in the image strip

        // stop predator from swimming straight up or down
        if (angle > Math.PI * 4 / 3 && angle < Math.PI * 5 / 3 || angle > Math.PI * 1 / 3 && angle < Math.PI * 2 / 3) {
            angle = Math.PI * 1 / 3 * Math.random();
            xAngle = Math.cos(angle);
            yAngle = Math.sin(angle);
        }

        // face the predator the right way if angle is between 6 o'clock and 12 o'clock
        if (angle > Math.PI / 2 && angle < Math.PI / 2 * 3) {
            flip = -1;
        }

    function swim() {
            // Calculate next position of species
            var nextX = x + xAngle * velocity * fpsMeter.timeDeltaS;
            var nextY = y + yAngle * velocity * fpsMeter.timeDeltaS;
            var nextZ = z + zAngle * .1 * velocity * fpsMeter.timeDeltaS;
            var nextScale = Math.abs(nextZ) / (zFar - zClose);

            // If species is going to move off right side of screen
            if (nextX + fishW / 2 * scale > WIDTH) {
                // If angle is between 3 o'clock and 6 o'clock
                if ((angle >= 0 && angle < Math.PI / 2)) {
                    angle = Math.PI - angle;
                    xAngle = Math.cos(angle);
                    yAngle = Math.sin(angle) * Math.random();
                    flip = -flip;
                }
                // If angle is between 12 o'clock and 3 o'clock
                else if (angle > Math.PI / 2 * 3) {
                    angle = angle - (angle - Math.PI / 2 * 3) * 2
                    xAngle = Math.cos(angle);
                    yAngle = Math.sin(angle) * Math.random();
                    flip = -flip;
                }
            }
            // If fish is going to move off left side of screen
            if (nextX - fishW / 2 * scale < 0) {
                // If angle is between 6 o'clock and 9 o'clock
                if ((angle > Math.PI / 2 && angle < Math.PI)) {
                    angle = Math.PI - angle;
                    xAngle = Math.cos(angle);
                    yAngle = Math.sin(angle) * Math.random();
                    flip = -flip;
                }
                // If angle is between 9 o'clock and 12 o'clock
                else if (angle > Math.PI && angle < Math.PI / 2 * 3) {
                    angle = angle + (Math.PI / 2 * 3 - angle) * 2
                    xAngle = Math.cos(angle);
                    yAngle = Math.sin(angle) * Math.random();
                    flip = -flip;
                }
            }
            // If fish is going to move off bottom side of screen
            if (nextY + fishH / 2 * scale > HEIGHT) {
                // If angle is between 3 o'clock and 9 o'clock
                if ((angle > 0 && angle < Math.PI)) {
                    angle = Math.PI * 2 - angle;
                    xAngle = Math.cos(angle);
                    yAngle = Math.sin(angle) * Math.random();
                }
            }
            // If fish is going to move off top side of screen
            if (nextY - fishH / 2 * scale < 0) {
                // If angle is between 9 o'clock and 3 o'clock
                if ((angle > Math.PI && angle < Math.PI * 2)) {
                    angle = angle - (angle - Math.PI) * 2;
                    xAngle = Math.cos(angle);
                    yAngle = Math.sin(angle);
                }
            }
            // If fish is going too far (getting too small)
            if (nextZ <= zClose && zAngle < 0) {
                zAngle = -zAngle;
            }
            // If fish is getting to close (getting too large)
            if (((WIDTH / fishW) * 10) < ((fishW * fish.length) / WIDTH)) {
                zFarFactor = .3
            }
            else if (((WIDTH / fishW) * 2) < ((fishW * fish.length) / WIDTH)) {
                zFarFactor = .5
            }
            else { zFarFactor = 1 }
            if (nextZ >= zFar * zFarFactor && zAngle > 0) {
                zAngle = -zAngle;
            }
            if (scale < .1) { scale = .1 }; //don't let fish get too tiny
            //draw the fish
            //locate the fish
            ctx.save();
            ctx.translate(x, y);
            ctx.scale(scale, scale); // make the fish bigger or smaller depending on how far away it is.
            ctx.transform(flip, 0, 0, 1, 0, 0); //make the fish face the way he's swimming.
            ctx.drawImage(imageStrip, fishW * cell, fishH * species, fishW, fishH, -fishW / 2, -fishH / 2, fishW, fishH); //draw the fish
            ctx.save();
            scale = nextScale // increment scale for next time
            ctx.restore();
            ctx.restore();
            //increment to next state
            x = nextX;
            y = nextY;
            z = nextZ;
            if (cell >= cellCount-1 || cell <= 0) { cellReverse = cellReverse * -1; } //go through each cell in the animation
            cell = cell + 1 * cellReverse; //go back down once we hit the end of the animation
        }
        return {
            swim: swim
        }
    } 

</script> 
```

我更关心的是动画和启动功能。我是在调用数组中的图像来移动吗？

请伸出援助之手。谢谢

# html - 在现有窗口中打开链接时 Firefox 不聚焦窗口

> ID：10699310
> 
> 赞同：1
> 
> 时间：2012-05-22T09:29:09.873
> 
> 标签：html, firefox

我有一个问题，我认为最好的办法是实际描述它：

1.  用户在主窗口上（这通过 JavaScript 被正确地称为“主窗口” `self.name = "main-window";`：）
2.  用户单击在新窗口中打开的链接
3.  在新窗口中，用户单击如下链接：`<a href="..." target="main-window">`

预期的行为是浏览器专注于主窗口（“主窗口”）并打开请求的页面（IE 和 Chrome 正确执行此操作）。Firefox 在主窗口中打开链接，但不关注它。结果是用户想知道为什么链接不起作用，因为他没有意识到它是在当前链接后面的窗口上打开的。

这是一个已知的问题？有什么解决办法吗？

谢谢你。

# c# - 在 Visual Studio 中引用用户目录中的 dll 失败

> ID：10699313
> 
> 赞同：1
> 
> 时间：2012-05-22T09:29:18.437
> 
> 标签：c#, visual-studio, dll, telerik

我有一些项目的 ac# 解决方案。对于解决方案，我为外部库创建了一个文件夹。我已将一些 Telerik-dll 从安装文件复制到 libs 文件夹。

现在我的问题：当我将 dll 添加到项目中时（我从 libs 文件夹中选择复制的 dll），Visual Studio 总是使用安装源的 dll，而不是我的 libs 文件夹的 dll。

我怎样才能解决这个问题？恐怕我的同事无法编译解决方案，因为 dll 引用了一个丢失的目录（如果他们没有安装正确的 Telerik 版本，就会发生这种情况）。

谢谢

**编辑：** 例如：我引用文件选择器“C:\vendors\Libs\Telerik.Windows.Controls.Input.dll”Visual Studio 引用“C:\Program Files (x86)\Telerik\RadControls for Silverlight Q2 2011\ Binaries\Silverlight\Telerik.Windows.Controls.Input.dll"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:34:49.373

引用的属性 - 将*Embed Interop Type*设置为**false**并将*Copy Local*设置为**true**

# domain-driven-design - 领域驱动设计建模查询

> ID：10699314
> 
> 赞同：0
> 
> 时间：2012-05-22T09:29:23.540
> 
> 标签：domain-driven-design

我正在构建一个新应用程序，并且是域驱动设计的新手。我一直在阅读文档，并且设法对大部分域模型进行建模，但我想要一些关于两个查询的建议：

1.  我有两个域对象通道和程序。我已经将它们建模为实体，因为它们都可以独立访问。一个频道可以有一个节目列表，所以我把它作为频道的一个属性。我的问题是我应该如何填充程序列表。ChannelService 中的 getChannerById 方法是否可以先获取频道信息，然后调用 ProgramService 获取频道的节目列表，例如：

    ```
    Channel {
      String channelId
      List <Program> programList
    }

    Program {
      String programId {
    }

    ChannelService {
       Channel getChannelById(String channelId)
    }

    ProgramService {  
       Program getProgramById(String programId)
       List <Program> getProgramsByChannelById(String channelId)  
    } 
    ```

2.  我有一个产品域对象，但它的一些属性（例如规范和兼容性）涉及相当耗时的操作。这些属性并不是一直都需要的，因此可以将它们作为域对象的一部分并在需要时使用单独的服务方法填充这些属性，例如

    ```
    Product {
        String productId
        Specification specification
        List <Product> compatibleProducts
    }

    ProductService {
        Product getProduct(String productId);
        void getProductSpecifications(Product product);
        void getCompatibleProducts(Product product);
    } 
    ```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T16:54:53.463

在 DDD 中设计实体时，您不应创建从一个实体到另一个实体的关联，以便该关联仅用于显示或查询目的。虽然一个频道确实有一组节目，但频道与其节目集之间的关联是频道实体所必需的吗？更重要的是，如果您只考虑查询方面，那么您可能不需要对代码强制 DDD。相反，在设计实体时要考虑这些实体需要实现的行为。如果您的实体没有行为但仅用作数据容器，那么您不需要 DDD。为了回答您的问题，我将使用满足每个查询要求的读取模型类。例如，对于您的产品模型，如果一个查询需要规范属性而另一个不需要，为这些查询创建不同的读取模型类。这些类不是实体，它们是简单的只读值对象，它们没有任何行为，它们的工作是表示数据。关于实现查询，您有几个选择。调用 ChannelService 和 ProgramService 是一种选择。但是，如果数据全部存储在一个数据库中，为什么不创建一个存储库，一次调用即可返回所有需要的数据呢？看看我的 如果数据全部存储在一个数据库中，为什么不创建一个存储库，一次调用即可返回所有需要的数据？看看我的 如果数据全部存储在一个数据库中，为什么不创建一个存储库，一次调用即可返回所有需要的数据？看看我的[在 DDD 中的读取模型上发布](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)有关此主题的更多信息。

# iphone - 使用级联关系删除核心数据中的对象

> ID：10699322
> 
> 赞同：0
> 
> 时间：2012-05-22T09:29:46.437
> 
> 标签：iphone, objective-c, core-data, ios5

嗨，我有类别实体和子类别实体，当我同时删除类别对象时，子类别对象也在这里删除（类别---->两个多关系并设置为级联）和子类别（设置无效）所以在类别实体中，我有两种方法

```
- (void)addDeletionObject:(SubCategoryEntity *)value;
- (void)removeDeletionObject:(SubCategoryEntity *)value;
- (void)addDeletion:(NSSet *)values;
- (void)removeDeletion:(NSSet *)values; 
```

谁能指导我如何删除与 categoryId 相关的子类别我什么时候使用这些方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:44:37.940

只需调用`[context deleteObject:category];`，如果您已将删除规则设置为 Category 级联，则您的相关`SubCategory`s 将像 Will 一样被删除。不要忘记保存。

# c++ - 在 C++ 中获取动态指针的大小

> ID：10699326
> 
> 赞同：2
> 
> 时间：2012-05-22T09:29:57.497
> 
> 标签：c++

我想用 C++ 写一个指向文件的动态指针。

这是我在头文件中的声明：

```
byte* buffer; 
```

然后在 Cpp 文件中，我分配了它：

```
buffer = new byte[1000]; 
```

但是，在动态分配中大小将大于 1000。

然后我写入文件：

我的文件流；

```
myfile.open("test.txt", ios::binary);
myfile.write((char*)buffer, 1000);  
myfile.close(); 
```

如果我将缓冲区的长度指定为 1000，那么 1000 之后的其余字节将被丢弃。如果我使用： sizeof(buffer) 那么它只写入 1 个字节。

如何获取缓冲区的动态大小？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T09:31:39.217

Simple:

```
std::vector<byte> buffer;
buffer.resize(1000);
myfile.write(&buffer[0], buffer.size()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:34:28.043

The size of the buffer is 1000\. It's true that when you use "new" it sometimes can allocate more memory but this is done in order to fasten the next "new". so every other memory that was allocated after the 1000 first bytes may and probably will be used in future "new"s.
bottom line you can't and should assume you have any more then 1000 bytes.

# ajax - 使用 AJAX 请求链接服务器端消息/异常

> ID：10699327
> 
> 赞同：2
> 
> 时间：2012-05-22T09:30:00.263
> 
> 标签：ajax, jsf-2, exception-handling, glassfish, primefaces

我正在使用 Primefaces 进行 ajax 提交，但在将服务器端消息与我的 ajax 请求链接时遇到问题。假设我有一个调用动作的按钮。在我的托管 bean 中，我需要引发异常吗？如何将此消息传递到我的 ajax 请求中

```
public void checkout(ActionEvent event){
    if(expression){
        throw new CustomException("Account balance is not enough!");
    }
}

public class CustomException extends RuntimeException { 
    public CustomException(String message) {
        super(message);
    }
} 
```

我该如何处理这种情况？我的 onerror javascript 方法能处理这个问题吗？

此外，在一种情况下，假设数据库已关闭，那么我该如何处理异常？我是否已经访问了我的 javascript 函数中的错误消息？

```
public void checkout(ActionEvent event){
    try{
        //DB is down
        if(expression){
            throw new CustomException("Account balance is not enough!");
        }
    }catch(Exception e){

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:20:36.233

至于您的具体问题，您需要为此实现一个自定义，当 ajax 请求中发生异常时，[`ExceptionHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExceptionHandler.html)它*基本上执行以下操作：*

```
String errorPageLocation = "/WEB-INF/errorpages/500.xhtml";
context.setViewRoot(context.getApplication().getViewHandler().createView(context, errorPageLocation));
context.getPartialViewContext().setRenderAll(true);
context.renderResponse(); 
```

`web.xml`如果您想考虑错误页面，这并非微不足道。您需要解析整个内容`web.xml`以找到错误页面位置。OmniFaces实用程序库[正好](http://omnifaces.org)有这样一个异常处理程序，[`FullAjaxExceptionHandler`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/exceptionhandler/FullAjaxExceptionHandler.html). 您可以在此处找到完整的源代码，并[在](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)[此处](https://github.com/omnifaces/omnifaces/blob/master/src/org/omnifaces/exceptionhandler/FullAjaxExceptionHandler.java)找到展示示例。

至于您的具体功能要求，当只有用户错误时，我不会抛出异常。这是完全可以恢复的。您需要创建并添加`FacesMessage`ajax 来更新`<h:messages>`,`<p:messages>`或`<p:growl>`. PrimeFaces 支持`autoUpdate="true"`在 ajax 请求时自动更新自身。例如

```
context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Insufficient balance", null)); 
```

和

```
<p:messages autoUpdate="true" /> 
```

抛出异常仅在不可恢复的情况下才有意义，例如数据库关闭时。请注意，您通常不会*自己*抛出这样的异常。在 JPA 的情况下，它已经被抛出，`PersistenceException`而您又不应该在 JSF 托管 bean 中捕获它，而只是放手。

# jquery - 如何在 kindo grid TD(grid cell) 中初始化自定义 Widget？

> ID：10699332
> 
> 赞同：2
> 
> 时间：2012-05-22T09:30:18.033
> 
> 标签：jquery

我有一个 jQuery 自定义小部件，如何使用模板在 Kendo Grid 单元格中初始化该小部件？

这是我的模板

```
<script id="IDCOL-tmpl" type="text/x-kendo-tmpl">

            <div class="IDCOL">
                <script type="text/javascript">
                    $('.IDCOL').Block();
                {{html "</sc"+"ript>"}}
            </div>

    </script> 
```

和剑道网格初始化

```
$("#container").kendoGrid({
    ..........
    columns : [{
        title : "ID",
        template : kendo.template($("#IDCOL-tmpl").html())
    }, "StartTime", "EndTime"]
}); 
```

这是错误：

> “Microsoft JScript 运行时错误：由于错误 80020101 无法完成操作。”）在 globalEval（在 jquery-1.7.1.js 中）

# git - Vagrant 测试厨师食谱 - 但如何处理私人 git

> ID：10699333
> 
> 赞同：3
> 
> 时间：2012-05-22T09:30:31.107
> 
> 标签：git, github, chef-infra, vagrant

我使用 vagrant 来测试我的厨师食谱。问题是我已经克隆了我的私人存储库并且机器没有经过验证。我如何自动 git 身份验证来引导厨师？我正在使用 vagrant ubuntu 11.10 和厨师。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T17:47:32.600

[在 vagrant+chef 设置中使用带有密码短语的 ssh 密钥](https://stackoverflow.com/questions/7211287/use-ssh-keys-with-passphrase-on-a-vagrantchef-setup) 将得到类似的答案，可能会有所帮助。

不知道 chef-solo 或 chef-client + chef-server 的更多细节。它归结为 ssh 密钥。

确保您正在使用类似的东西进行身份验证 `git@github.com:user/repo.git`

然后，您将需要确保您的 VM 和底层主机是 ssh 代理转发。

确保您的 ~/.ssh/config 具有适当的行。一个普遍的例子是。

```
host *
    ForwardAgent yes 
```

请记住，第一场比赛在 ~/.ssh/config 中获胜，而不是最具体的

然后您可能必须添加任何身份`ssh-add`并确保`ssh-agent`也存在。

最后，在 Vagrantfile 中， `config.ssh.forward_agent = true`

# java - 更改 ZipEntry 的权限

> ID：10699334
> 
> 赞同：2
> 
> 时间：2012-05-22T09:30:36.923
> 
> 标签：java, zip

我正在尝试使用`java.util.zip`API 生成一个 zip 文件，但我还没有找到任何方法来设置[ZipEntry](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipEntry.html)的权限。一个主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:05:42.827

使用 是不可能的`java.util.zip`。尝试 Apache [commons-compress](http://commons.apache.org/compress/)。具体来说，您想在 AsiExtraField 上调用[setMode](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/zip/AsiExtraField.html#setMode%28int%29)，[然后](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/zip/AsiExtraField.html)将其添加到您放入 ZipArchiveOutputStream 的[ZipArchiveEntry](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html)[中](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/zip/ZipArchiveOutputStream.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:37:32.243

AFAIK, you can't do that using [ZipEntry](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipEntry.html) apis. Though you use the [File](http://docs.oracle.com/javase/6/docs/api/java/io/File.html) apis `setWritable(), setReadable()` and `setExecutable()` etc. to change permissions on the file.

# sqlite - Sqlite 数据库异常：文件被加密或不是黑莓中的数据库？

> ID：10699336
> 
> 赞同：2
> 
> 时间：2012-05-22T09:30:40.140
> 
> 标签：sqlite, blackberry

我正在开发一个需要在我的设备上创建本地数据库的公司应用程序。

我通过create语句创建我的本地数据库[**效果很好**]

然后我使用该文件并通过fire-fox sqlite插件执行插入操作，我需要一次插入aprox 2000行，所以我不能使用代码。我只是通过 fir-fox 中的 sqlite 插件手动运行插入。

之后，我只是在我的本地数据库中使用该文件。

当我通过我的代码运行选择查询时，它显示 Exception:java.lang.Exception: Exception: In create or prepare statement in DBnet.rim.device.api.database.DatabaseException: SELECT distinct productline FROM T_Electrical ORDER BY productline: **file is加密或不是数据库**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:29:01.533

我得到了这个问题的解决方案，我犯了一个愚蠢的错误，通过右键单击我的 RES 文件夹手动创建一个文件，这是不正确的。我们需要完全从 SQlite 插件创建数据库，然后它才能正常工作。“从 SQLITE（文件）创建数据库并从 SQLITE 执行插入操作，然后它会正常工作”

这是一个非常罕见的问题，但我认为它可能对像我这样的人有帮助......！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:48:20.287

You should check to see if there is a version problem between the SQLite used by your Firefox installation and that on the BlackBerry. I think I had the same error when I tried to build a database file with SQLite version 2.

You also shouldn't need to create the database file on the device. To create large tables I use a Ubuntu machine and the sqlite3 command line. Create the file, create the tables, insert the data and build indexes. Then I just copy the file onto the device in the proper directory.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T11:34:06.303

对我来说，这是一件简单的事情。为该数据库设置了一个密码。我刚刚使用它，问题得到了解决。

# iphone - 适用于 iOS 的 Phonegap-plugin 条形码扫描仪：不支持 PDF417？

> ID：10699340
> 
> 赞同：1
> 
> 时间：2012-05-22T09:30:47.360
> 
> 标签：iphone, cordova, barcode, barcode-scanner, phonegap-plugins

我正在为 Android 和 iPhone 构建一个条形码扫描仪，它需要支持多种格式，包括 PDF417。我从[github](https://github.com/phonegap/phonegap-plugins)获得了在 Android 上工作的 phonegap 插件（运行良好，非常酷），并研究了 iPhone/iOS 版本。但似乎（尚）[不支持 PDF417 格式。](https://github.com/phonegap/phonegap-plugins/issues/284)

有谁知道 PDF417 格式是否会很快得到支持，或者我应该考虑自己构建一些东西？还是他们的其他用于phonegap的插件/库可以顺利集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T06:59:44.910

看起来 iOS7 支持这个，你可以使用 AVCapture 和 AVMetadataObjectTypePDF417Code。

# html - 使用 :after 清除浮动元素

> ID：10699343
> 
> 赞同：109
> 
> 时间：2012-05-22T09:31:02.880
> 
> 标签：html, css

我有一个清单，李有一个`float:left;`. 后面的内容`<ul>`应该正确对齐。因此我可以构建以下内容：

[http://jsfiddle.net/8unU8/](http://jsfiddle.net/8unU8/)

我想，我可以`<div class="clear">`通过使用 :after 之类的伪选择器来删除 。

但是这个例子不起作用：

[http://jsfiddle.net/EyNnk/](http://jsfiddle.net/EyNnk/)

我是否总是必须创建一个单独的 div 来清除浮动元素？

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2012-05-22T09:33:29.637

像这样写：

```
.wrapper:after {
    content: '';
    display: block;
    clear: both;
} 
```

检查这个[http://jsfiddle.net/EyNnk/1/](http://jsfiddle.net/EyNnk/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T09:36:07.577

不，你做这样的事情还不够：

```
<ul class="clearfix">
  <li>one</li>
  <li>two></li>
</ul> 
```

以及以下 CSS：

```
ul li {float: left;}

.clearfix:after {
  content: ".";
  display: block;
  clear: both;
  visibility: hidden;
  line-height: 0;
  height: 0;
}

.clearfix {
  display: inline-block;
}

html[xmlns] .clearfix {
   display: block;
}

* html .clearfix {
   height: 1%;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-20T07:27:52.847

这也将起作用：

```
.clearfix:before,
.clearfix:after {
    content: "";
    display: table;
} 

.clearfix:after {
    clear: both;
}

/* IE 6 & 7 */
.clearfix {
    zoom: 1;
} 
```

将类`clearfix`赋予*父*元素，例如您的`ul`元素。

来源[here](http://css-tricks.com/snippets/css/clear-fix/)和[here](http://nicolasgallagher.com/micro-clearfix-hack/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:35:16.627

文本“dasda”永远不会不在标签内，对吧？从语义上讲，要成为有效的 HTML，只需将 clear 类添加到其中：

[http://jsfiddle.net/EyNnk/2/](http://jsfiddle.net/EyNnk/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T09:49:24.917

采用

```
.wrapper:after {
    content : '\n';
} 
```

很像 Roko 提供的解决方案。它允许使用 :after 和 :before psuedo 插入/更改内容。有关详细信息，请查看 [http://www.quirksmode.org/css/content.html](http://www.quirksmode.org/css/content.html)

# java - 使用 Java Mail api 发送 Java 邮件

> ID：10699344
> 
> 赞同：-2
> 
> 时间：2012-05-22T09:31:07.220
> 
> 标签：java, email, jakarta-mail

我在我的项目中使用 JavaMail api 来发送邮件。但是当我编写代码来附加邮件文件时，发送邮件需要很多时间。而且 5 次中有 4 次出现连接超时错误。我找不到具体的原因。文件数据大约 400 到 500 KB 这是代码

```
public static void sendMailTo(String receiverEmailID, String emailSubject,String emailBody,ArrayList<String> attachmentFilepath) throws AddressException, MessagingException, IOException {

        Properties properties = new Properties();           
        properties.put("mail.transport.protocol", "smtp");
        properties.put("mail.smtp.host", "smtp.gmail.com");
        properties.put("mail.smtp.auth", "true");
        properties.put("mail.smtp.port", "587");
        properties.put("mail.smtp.starttls.enable", "true");
        properties.put("mail.smtp.text", "text/plain");
        properties.put("mail.smtp.debug", "true");

        // Authentication For Sender.
        if (session == null)
            session = Session.getInstance(properties,
                    new javax.mail.Authenticator() {
                        protected PasswordAuthentication getPasswordAuthentication() {
                            return new PasswordAuthentication("username","password"
                            );
                        }
                    });

        // This block process to send mail on particular UserID
        Message message = new MimeMessage(session); 
        message.setFrom(new InternetAddress(""));
        message.setRecipients(Message.RecipientType.TO,InternetAddress.parse(receiverEmailID));
        message.setSubject(emailSubject);
        BodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setContent(emailBody, "text/html");
        messageBodyPart.setDisposition(Part.INLINE);
        Multipart multipart = new MimeMultipart("mixed");

        multipart.addBodyPart(messageBodyPart); 
        int i=0;
        while(i<attachmentFilepath.size()){
              BodyPart attachment = new MimeBodyPart();
              DataSource source = new FileDataSource(new File(attachmentFilepath.get(i)));
              attachment.setDataHandler(new DataHandler(source));
              attachment.setFileName(source.getName());
              attachment.setDisposition(Part.ATTACHMENT);
              multipart.addBodyPart(attachment);              
              i++;
        }    
        message.setContent(multipart);
        Transport.send(message);// This statement send Message.             
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:31:25.680

尝试**ping smtp.gmail.com -t**

你有丢失包裹吗？如果是，这就是您的问题的答案（网络问题）

# asp.net - 我的代码的异常性质是什么？它没有被重定向到适当的页面

> ID：10699347
> 
> 赞同：0
> 
> 时间：2012-05-22T09:31:16.130
> 
> 标签：asp.net, ajax

在单击某些按钮时，我使用 Ajax 模型弹出以下代码：

```
if (SurveyCount == 1)
{
    DateTime FreeSurveyDate = (DateTime)dtCountClientSurvey.Rows[0]["SurveyDate"];

    if ((DateTime.Now - FreeSurveyDate).Days > 90)
    {

        Session["YourAssessment"] = false;
        Session["MyAssessment"] = false;
        modelPopUp.Visible = true;
        ModalPopupExtender1.Show();

    }
    else
    {
        Response.Redirect("~/yourAssessment.aspx");
        Session["YourAssessment"] = true;
        Session["MyAssessment"] = false;
    }
} 
```

我面临的问题是，在`else`某种程度上，它不是重定向到`yourAssessment.aspx`而是回发到同一页面。

然后，当我在那里添加一个断点时，它会移动到该`else`部分并停止调试并抱怨以下内容：

```
Locating source for 'C:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ExtenderControlBase.cs'. (No checksum.)
The file 'C:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ExtenderControlBase.cs' does not exist.
Looking in script documents for 'C:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ExtenderControlBase.cs'...
Looking in the projects for 'C:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ExtenderControlBase.cs'.
The file was not found in a project.
Looking in directory 'C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\vc7\atlmfc'...
Looking in directory 'C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\vc7\crt'...
The debug source files settings for the active solution indicate that the debugger will not ask the user to find the file: C:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ExtenderControlBase.cs.
The debugger could not locate the source file 'C:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ExtenderControlBase.cs'. 
```

已经有一段时间了，我仍然无法修复这个错误，我想知道它没有被重定向的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:06:54.147

你的代码很好。问题在于您正在使用的 Ajax 控制工具包。从您提供的日志看来，ajax 工具包的文件（**ExtenderControlBase.cs**）之一丢失，因此是问题所在。

也许您可以考虑重新安装 Ajax 工具包。

> 调试器找不到源文件“C:\Users\Stephen\Documents\Repos\Superexpert\AjaxControlToolkit\Server\AjaxControlToolkit\ExtenderBase\ExtenderControlBase.cs”。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-11T18:15:49.593

从 .aspx 中的 Ajax 控件中删除 Runat 服务器标记，重新构建它。如果它有效，则再次添加 runat 服务器标签。它对我有用。

# android - 如何解析具有多个值的json

> ID：10699348
> 
> 赞同：0
> 
> 时间：2012-05-22T09:31:16.577
> 
> 标签：android, json

我正在尝试解析一个json

```
{"objects":[{"obimages":["obj_icon\/133431837745.jpg","obj_icon\/1334318377319.jpg","obj_icon\/1334318378384.jpg","obj_icon\/1334318378ajmer21.jpg","obj_icon\/1334318378df.jpg"]}
} 
```

我必须单独获取“obimages”中的值。谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:35:23.880

使用 JSONObject 和 JSONArray 类来解析 JSON

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:40:27.293

参考这个网站，这将解释如何解析一个 jason 链接，[http ://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

# android - 为什么 ImageView 不是全屏？

> ID：10699350
> 
> 赞同：6
> 
> 时间：2012-05-22T09:31:18.857
> 
> 标签：android, imageview

我正在做一个[安卓](http://en.wikipedia.org/wiki/Android_%28operating_system%29)项目。为什么 ImageView id iv1 和 iv2 没有全屏显示？我把我的[XML](http://en.wikipedia.org/wiki/XML)放在这里：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/layout1"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:paddingBottom="10px"
              android:paddingLeft="10px"
>
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    >
        <ImageView
            android:id="@+id/iv1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:visibility="invisible"
        />

        <ImageView
            android:id="@+id/iv2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:visibility="invisible"
        />

           <ImageButton
            android:id="@+id/menu_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_toRightOf="@+id/BunyiIng"
            android:src="@drawable/menu_btn"
            android:background="@null"
        />

        <ImageView
            android:id="@+id/image_logo"
             android:src="@drawable/logo_vehicle"
               android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:layout_marginTop="5px"
        />

    </RelativeLayout>
</LinearLayout> 
```

如果我将 ImageViews 放在 LinearLayout 中，它会阻止 RelativeLayout。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/layout1"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:paddingBottom="10px"
              android:paddingLeft="10px"
>
    <ImageView
            android:id="@+id/iv1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:visibility="invisible"
    />

    <ImageView
        android:id="@+id/iv2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="invisible"
    />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    > 
```

但是如果 Imageview 放在 RelativeLayout 下面，但在 LinearLayout 里面，那么 ImageView 就不会显示图像。

```
 </RelativeLayout>

    <ImageView
            android:id="@+id/iv1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:visibility="invisible"
    />

    <ImageView
            android:id="@+id/iv2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:visibility="invisible"
    />
</LinearLayout> 
```

我该如何解决？我希望 ImageView 全屏显示图像。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-22T09:40:39.437

1.  您有线性布局的填充。
2.  你在 imageview 中没有任何东西可以看到它的内容，所以你看不到它的内容。
3.  您已将 imageview 设置为不可见，因此您看不到它的内容。
4.  如果您不关心纵横比，请使用 android:adjustViewBounds="false" 和 android:scaleType="fitXY"。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T09:37:28.077

将此属性用于图像视图：

```
android:scaleType="fitXY" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:46:38.740

我看到你的 ImageViews 的高度和宽度都设置为“fill_parent”，所以我猜你希望它们都缩放到整个屏幕。如果您希望它们只是坐在那里而不打算在以后使用它们，请添加

```
android:background="@drawable/your_drawable_here" 
```

到你的线性和相对布局。它将在布局的背景中添加一个图像，将其缩放以适应整个布局，如果我没记错的话，还可以节省一些资源。

# c# - Change inner user control in Silverlight/WPF by a property at design time

> ID：10699353
> 
> 赞同：2
> 
> 时间：2012-05-22T09:31:33.070
> 
> 标签：c#, wpf, silverlight, xaml, user-controls

I am creating some custom user controls for WPF. This user controls contain custom dependency properties so I can fill them in the designer.

One of this properties is called "InnerUserControlType". This dependency proeprty is a custom enumeration containing some values like TextBox, ComboBox, Label, CheckBox, etc.

I would like to be able to set this property in my XAML pages in the designer and then see the user control change the displayed inner control depending on the property.

How should I implement this? The grid which will contain the inner control in my user control is a normal field, so it cannot be accessed from a static method property (like the dependency properties).

I want it to have it working in the designer so the designers can work easily.

Thanks a lot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:00:02.503

将 a 放`ContentControl`入网格中，将`Content`属性绑定到`UserControl`via 相对源

```
<ContentControl Content="{Binding RelativeSource={RelativeSource FindAnsector,
                                  AncestorType={x:Tyle myNamespace:MyControl}}}" 
```

并制作一个`DataTemplateSelector`将检查的值`InnerUserControlType`并将返回一个适当的数据模板，其中包含在属性中要求的控件。

根据您的方案，您可能需要确保数据模板中的控件具有正确的数据上下文。如果控件的数据上下文应该与用户控件的数据上下文相同，则在数据模板的根元素上，为数据上下文添加相对绑定。类似于（对于文本框数据模板）：

```
<TextBox DataContext="{Binding DataContext,
                               RelativeSource={RelativeSource FindAnsector,
                               AncestorType={x:Tyle myNamespace:MyControl}}}"
 ......
</TextBox> 
```

### 编辑：

我只注意到 wpf 标签并错过了 silverlight 一个。在 Silverlight 中，您没有`...TemplateSelector`属性，因此请改用转换器。

# java - Log4j : Creating/Modifying appenders at runtime, log file recreated and not appended

> ID：10699358
> 
> 赞同：9
> 
> 时间：2012-05-22T09:31:52.853
> 
> 标签：java, log4j

I want to create and enable an appender for a particular method call MyMethod(), whose log output is supposed to go to a file present at "logFilePath".

I do not want to include this appender in the xml configuration file, so I thought to create it at run time.

First, I tried to modify the logger properties at runtime and then calling activateOptions, eg. setting level to DEBUG before and setting it to Off in the finally block, so that output is logged only while the method is in use. That didn't work.

My problem here is that appender recreates a file everytime, and does not append to the same file. This is inspite of setAppend being true.

I am not very familiar with log4j, so please feel free to suggest an alternative approach. The following is sample code to explain what I am trying.

```
private static FileAppender createNewAppender(String logFilePath) {
    FileAppender appender = new FileAppender();
    appender.setName("MyFileAppender");
    appender.setLayout(new PatternLayout("%d %-5p [%c{1}] %m%n"));
    appender.setFile(logFilePath);
    appender.setAppend(true);
    appender.setThreshold(Level.INFO);
    appender.activateOptions();
    Logger.getRootLogger().addAppender(appender);
    return appender;
}

private static void removeAppender() {
    Logger.getRootLogger().removeAppender(fileAppender) ; // ("MyFileAppender");
} 
```

I call the above methods in the following way:

```
private static FileAppender fileAppender = null;

private static void myMethod(String logFilePath) {        
    try {
        fileAppender = createNewAppender();
        someOperation();
    }
    finally {
        removeAppender();
        fileAppender=null; 
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T13:43:13.327

非常简单，只需创建一个方法并添加它

```
String targetLog="where ever you want your log"

FileAppender apndr = new FileAppender(new PatternLayout("%d %-5p [%c{1}] %m%n"),targetLog,true);    
logger.addAppender(apndr);
logger.setLevel((Level) Level.ALL); 
```

然后在任何需要记录的方法中，只需执行以下操作： logger.error("your error here");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T06:59:40.050

我从 scala 执行以下操作（基本相同）：

将我的根日志记录级别设置为 TRACE，但将我的全局附加程序的阈值设置为 info。

```
# Root logger option
log4j.rootLogger=TRACE, file, stdout

# log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=./log.log
log4j.appender.file.MaxFileSize=100MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{HH:mm:ss} %m%n
log4j.appender.file.Threshold=INFO

# log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{HH:mm:ss} %m%n
log4j.appender.stdout.Threshold=INFO 
```

然后在我要登录的课程中：

```
private def set_debug_level(debug: String) {
  import org.apache.log4j._
  def create_appender(level: Level) {
    val console_appender = new ConsoleAppender()
    val pattern = "%d %p [%c,%C{1}] %m%n"
    console_appender.setLayout(new PatternLayout(pattern))
    console_appender.setThreshold(level)
    console_appender.activateOptions()
    Logger.getRootLogger().addAppender(console_appender)
  }
  debug match {
    case "TRACE" => create_appender(Level.TRACE)
    case "DEBUG" => create_appender(Level.DEBUG)
    case _ => // just ignore other levels
  }
} 
```

所以基本上，因为我将新附加程序的阈值设置为 TRACE 或 DEBUG 它实际上会附加。如果我将根更改为另一个级别，它将不会记录较低级别。

# python - 使用python将文件上传到Tomcat服务器

> ID：10699362
> 
> 赞同：0
> 
> 时间：2012-05-22T09:32:00.807
> 
> 标签：python, servlets, urllib

我写了一个上传多个文件的java servlet，我使用cURL来上传文件

`curl -F filedata=@myfile.txt http://127.0.0.1/test_Server/multipleupload` 这会将文件上传到 `uploads`位于文件夹中的`webapps`文件夹。我正在编写一个可以用来代替 curl 的 python 模块，原因是这个服务器将被构建农场使用，所以使用 cURL 不是一个选项，并且理智地使用 pycURL。我正在处理的 python 模块以前是为在 pastebin 上执行此操作而编写的，所以我所做的只是编辑它以使用我的服务器，它看起来`urllib`不这样做`multipart/form-data`？如果有人能指出我正确的方向，那就太好了，我还没有发布代码，但如果有人想要，我会这样做，作为开始，代码中没有太多内容，我所做的只是将 URL 更改为我的服务器，那是我发现它正在使用的时候`application/x-www-form-urlencoded`（谢谢 Wireshark！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:42:21.877

您可以使用[Request-class](http://docs.python.org/library/urllib2.html#urllib2.Request)发送您自己的标头。也许你想使用[requests](http://docs.python-requests.org/en/latest/index.html)，它让生活更轻松。

**编辑：** [使用请求上传文件](http://docs.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file)

# components - Talend - 组件创建 - 在输出中添加一行

> ID：10699365
> 
> 赞同：0
> 
> 时间：2012-05-22T09:32:22.397
> 
> 标签：components, talend

我正在创建一个新组件 Talend。该组件有许多输入数据（例如：标题、内容、摘录和作者），它返回相同的数据（但标题、摘录和内容已被修改）。因此，在输出中，我修改了标题、修改了内容、修改了摘录和作者（尚未修改）。

我希望我的组件返回另一行。多了一条线。以 id 为例。我的组件是否有可能创建新的“行”并返回它们？

我不知道我是否可以理解...你能帮帮我吗？

再见。

PS：如果你是法国人：[这是一个有我问题的法语论坛](http://www.developpez.net/forums/d1223838/logiciels/solutions-dentreprise/business-intelligence/etl/talend/talend-creation-composant-ajout-ligne-sortie/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:17:33.583

我解决了我的问题。

我必须在 xml 文件中添加它：

```
<PARAMETER NAME="SCHEMA" FIELD="SCHEMA_TYPE" REQUIRED="true" NUM_ROW="10">
   <TABLE READONLY="false">
       <COLUMN NAME="id" TYPE="id_String" LENGTH="255" READONLY="true" CUSTOM="true" />
   </TABLE>
</PARAMETER> 
```

# c# - Concatenating strings in DataSource for data-driven unit test

> ID：10699366
> 
> 赞同：0
> 
> 时间：2012-05-22T09:32:29.357
> 
> 标签：c#, datasource, mstest, data-driven-tests

I am experiencing a strange problem with a data driven unit test. The data is stored in an `xls`-file. When I use the following connection string, everything works fine.

```
 [TestMethod()]
    [DataSource(
        "System.Data.Odbc",
        @"Driver={Microsoft Excel Driver (*.xls)};DriverId=790;dbq=MyFolder\TestData.xls;defaultdir=.",
        "Tabelle1$",
       DataAccessMethod.Sequential)]
    public void DataDrivenTest() {...} 
```

What I would like to do now is to extract the filename from the connection string into some constant, e.g.

```
 const string FilePath = "MyFolder\TestData.xls"; 
```

But as soon as I start splitting up the connection string, I get errors in the unit test. Interestingly, even splitting the string into two parts does not work:

```
 ...
        @"Driver={Microsoft Excel Driver (*.xls)};DriverId=790;" + @"dbq=MyFolder\TestData.xls;defaultdir=.",
        ... 
```

Instead, I get the following error message

> The unit test adapter failed to connect to the data source or to read the data. For more information on troubleshooting this error, see "Troubleshooting Data-Driven Unit Tests" (http://go.microsoft.com/fwlink/?LinkId=62412) in the MSDN Library.
> 
> Error details: ERROR [42S02] [Microsoft][ODBC Excel Driver] The Microsoft Jet database engine could not find the object 'Tabelle1$'. Make sure the object exists and that you spell its name and the path name correctly.

Any idea where this difference in behavior can come from?

What is most confusing for me, is that even in `ildasm` I could not see any obvious differences between the two variants (i.e, seemingly the compiler already concatenates the two strings).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:32:05.087

问题可能在于使用@添加字符串，您可以尝试：

```
"Driver={Microsoft Excel Driver (*.xls)};DriverId=790;" + "dbq=MyFolder\\TestData.xls;defaultdir=." 
```

# c++ - 子类化提升异常

> ID：10699367
> 
> 赞同：1
> 
> 时间：2012-05-22T09:32:29.700
> 
> 标签：c++, exception, boost, subclass

我有一个自定义异常类，继承自`boost::exception`如下：

```
class ConfigurationException : public boost::exception
{
public:
    ConfigurationException(const std::string & title, const std::string & message) {
        QMessageBox box(QMessageBox::Critical, QString::fromStdString(title), QString::fromStdString( parse(message) ), QMessageBox::Ok);
        box.exec();
    }
} 
```

它可以从这样的代码中调用：

```
try {
   // Do some stuff here
} catch (std::exception e) {
    BOOST_THROW_EXCEPTION( ConfigurationException("Configuration Error", e.what()) );
} 
```

但是，当我尝试编译时，我得到了错误

```
Libs\boost\include\boost/throw_exception.hpp(58): error C2664:'boost::throw_exception_assert_compatibility' : cannot convert parameter 1 from 'const ConfigurationException' to 'const std::exception &'
          Reason: cannot convert from 'const ConfigurationException' to 'const std::exception'
          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
          Libs\boost\include\boost/throw_exception.hpp(85) : see reference to function template instantiation 'void boost::throw_exception<E>(const E &)' being compiled
          with
          [
              E=ConfigurationException
          ]
          src\ConfigurationReader.cpp(81) : see reference to function template instantiation 'void boost::exception_detail::throw_exception_<ConfigurationException>(const E &,const char *,const char *,int)' being compiled
          with
          [
              E=ConfigurationException
          ] 
```

我不太确定为什么它试图将我的异常转换为`std::exception`. 有人能告诉我如何抛出这个异常并获取文件、函数等数据吗？（我应该说显然`throw ConfigurationException("some title", "some message");`效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:37:32.457

1.  `std::exception`从两者和`boost::exception` *虚拟*中派生：`struct ConfigurationException : virtual std::exception, virtual boost::exception`。
2.  通过 const 引用捕获：`catch (const std::exception& e)`.
3.  不要将 GUI 逻辑放在异常构造函数中。将其放入异常处理程序（即`catch`块）中。
4.  考虑使用`error_info`附加信息（如您的标题和消息）。

通常，在将 Qt 与异常混合时要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:40:44.830

BOOST_THROW_EXCEPTION 调用 boost::throw_exception，它要求异常对象从 std::exception 派生（参见 www.boost.org/doc/libs/release/libs/exception/doc/throw_exception.html）。编译错误强制执行该要求。

另一件事，通过引用捕获异常。不要 catch(std::exception e)，而是 catch(std::exception & e)。

# url - web2py, URL() error when dynamically serving static files

> ID：10699368
> 
> 赞同：2
> 
> 时间：2012-05-22T09:32:51.040
> 
> 标签：url, static, web2py

I am generating static files on the fly but cannot get the URL function to work: NB: here `filename` is a key-value returned by the controller

```
{{=P(A('Download ', filename,_href=URL('static', filename)))}} 
```

generates an error:

```
type 'exceptions.SyntaxError'> when calling URL, function or function name required 
```

However if I replace the filename variable with a string (as follows) the link is generated OK

```
{{=P(A('Download ', filename,_href=URL('static', 'abcis_data_42Data_.NO2.__.zip')))}} 
```

Any ideas?

* * *

**OK solved.** *filename is of type unicode and using str(filename) solves the problem.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:16:41.997

我认为您可能需要做的是沿着 MVC 层次结构向下移动，因此您的代码可能如下所示：

```
{{=P(A('Download',filename,_href=URL(r=request,c='static',f=filename)))}} 
```

# windows - 如何访问 Windows PC 的 ISA 总线？

> ID：10699370
> 
> 赞同：1
> 
> 时间：2012-05-22T09:33:03.710
> 
> 标签：windows, bus, isa-bus

我想访问我主板的 ISA 总线以读取温度传感器值并设置冷却风扇速度。除了使用“GiveIO”的提示外，我找不到任何实用的信息，这是一个非通用 I/O 驱动程序，不幸的是它与 Windows 7 不兼容。

如果无法避免对驱动程序进行编码，那么任何有关如何入门的有用信息都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:50:38.833

要在 Windows 下直接访问硬件，必须编写设备驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:36:45.737

[http://code.google.com/p/open-hardware-monitor](http://code.google.com/p/open-hardware-monitor)上有一个开源硬件监视器，它似乎可以满足您的需求。它使用 WinRing0 驱动程序进行硬件访问。

# spring - Symfony2 和 SpringMVC 上下文中的 XML 和 YML

> ID：10699374
> 
> 赞同：3
> 
> 时间：2012-05-22T09:33:23.413
> 
> 标签：spring, symfony

我正在寻找一个像样的程序员，但似乎要学习的东西数不胜数。我知道当有人问哪个更好时，永远没有确定的答案，但我会尽量让我的问题更具体，希望得到更确定的答案。

我正在使用/使用 PHP 一年了。从最简单的例子开始，现在我在前端使用 CodeIgniter 和各种库/框架，我觉得我需要向前迈出一步，在我的例子中，我正在学习另一个 PHP 框架 - Symfony2，而且，因为我我现在和那里都在获得“软件技术”的硕士学位我大量使用 Java，我想尝试开始学习 Symfony2 和 Spring。在众多问题中，如何在不浪费时间的情况下实现这一目标，XML、YML 的使用是我认为在工作中获得优势的一种选择。

Java 很大程度上是 XML，据我所知，Java 中没有从 XML 中转义。但是在 Symfony2 中有一个选择，在那里使用 XML 非常诱人，所以我不需要再学习一件事，但是我看到的 Symfony2 的大多数示例都使用 YML，我不太确定跳过 yml并试图严格遵守 XML 不会背叛我。

我在 Spring 或 Symfony 中都没有经验，所以如果你同时学习它们，你会如何处理？两者都使用 XML，还是 Symfony2 使用 YML？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T10:07:29.117

作为一名 Symfony 开发人员，我正在赚钱，同时在 Spring MVC 中开发我的个人项目，所以，既然我已经看到了这两个世界，我想我有一些关于这个话题的分享。

我用 PHP 开发了 7 年，我知道 Java 作为一门语言也有 5 年了，但我开发我的第一个“真正的”Java 项目只有一两个月。最终，我想彻底抛弃 PHP，转而使用 Java 和/或其他 JVM 语言，如 Scala。

这是什么原因？好吧，不要误会我的意思，Symfony2 是一个很棒的框架，我真的很喜欢它。我相信它是*目前*最好的 PHP 框架。但是......它仍然是 PHP，你知道的。无论 PHP 框架多么出色，我都无法忍受 PHP 作为一门语言太久。你问 PHP 有什么问题？有[一篇很棒的文章](http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/)准确地解释了我长期以来对它的感受（至少阅读[类比部分](http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/#an-analogy)）。

而且由于我更喜欢​​静态绑定和强类型，因此我也更喜欢 Java。与最好的 PHP IDE 相比，Java IDE 的功能真是太棒了。我认为我正在为这些语言使用最好的 IDE——IDEA（带有 PHP 插件）或 PhpStorm——Java 支持好得多，这让我想跳舞。

我并不是说 Java 是最伟大的语言，但它是对 PHP 的巨大改进。我认为 Scala 非常有前途，但由于它的基础设施/生态系统对我来说还不够成熟——与那些自己破解语言和开发框架的人相比，我是一个喜欢完成最终用户项目的务实主义者——我将继续使用 Java目前。

所以，对我来说，它归结为语言、社区和生态系统。虽然 PHP 社区有一些优秀的开发人员，我喜欢在 IRC 或其他地方与他们交谈，但 Java 社区有很多很多很棒的开发人员为更大的 Java 生态系统开发了很多很多很棒的东西。

除了这三件事之外，我可以补充一点，Symfony 更容易学习——它的书和食谱都很棒而且非常中肯，而我必须在大量书籍、博客及其大量文档中寻找大量关于 Spring 的信息.

说到 YML 和 XML，你可以只用 XML 来做一个 Symfony 项目，你可以完全或几乎完全不用 XML 来做一个 Spring 项目——尤其是从 3.1 版开始。我在我的 Symfony 项目中使用 YML，但在[我共享的包](https://github.com/elnur)中使用 XML 。

并且由于 Symfony DIC 和 security 基于 Spring 和 Spring Security，而 Doctrine 基于 JPA，学习其中一个框架的习语，你会学到很多关于另一个框架的知识。我真正缺少的是 Spring MVC 世界中的 Twig 类比——JSP 完成了工作，但它并不是那么好。我知道 Spring MVC 集成了其他视图技术，但在我看来，JSP 似乎是最受认可的一种。

# android - Start marquee after touch event in android

> ID：10699375
> 
> 赞同：1
> 
> 时间：2012-05-22T09:33:28.140
> 
> 标签：android, android-layout, marquee

I have one Linear Layout which contains three List Views and Three Buttons. I have customized the List View elements. I just want that if anyone touches the element of a List View then the corresponding text view should give effect as a marquee.

The main Linear Layout is as below -

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:orientation="vertical" >

<ListView
    android:id="@+id/list1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="5dip"
    android:layout_marginRight="5dip"
    android:layout_marginTop="5dip"
    android:layout_weight="1"
    android:drawSelectorOnTop="false"
    android:textSize="16dip" />

<Button
    android:id="@+id/more_button1"
    android:layout_width="130dip"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dip"
    android:layout_marginRight="5dip"
    android:layout_marginTop="5dip"
    android:text="More" >
</Button>

<ListView
    android:id="@+id/list2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="5dip"
    android:layout_marginRight="5dip"
    android:layout_marginTop="5dip"
    android:layout_weight="1"
    android:drawSelectorOnTop="false"
    android:textSize="16dip" />

<Button
    android:id="@+id/more_button2"
    android:layout_width="130dip"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dip"
    android:layout_marginRight="5dip"
    android:layout_marginTop="5dip"
    android:text="More" >
</Button>

<ListView
    android:id="@+id/list3"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="5dip"
    android:layout_marginRight="5dip"
    android:layout_marginTop="5dip"
    android:layout_weight="1"
    android:drawSelectorOnTop="false"
    android:textSize="16dip" />

<Button
    android:id="@+id/more_button3"
    android:layout_width="130dip"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dip"
    android:layout_marginRight="5dip"
    android:layout_marginTop="5dip"
    android:text="More" >
</Button>

</LinearLayout> 
```

Customized List Items are as below (list_item_1, list_item_2, list_item_3)-

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:ellipsize="marquee"
android:focusableInTouchMode="true"
android:freezesText="true"
android:lines="1"
android:marqueeRepeatLimit="marquee_forever"
android:padding="10dp"
android:scrollHorizontally="true"
android:scrollbarAlwaysDrawVerticalTrack="false"
android:singleLine="true"
android:textSize="20sp" >

</TextView> 
```

And the activity is as below -

```
public class MarqueeActivity extends Activity {

ListView lv1 = null;
ListView lv2 = null;
ListView lv3 = null;

String s1[] = {"Hello This is a long Text which will help in tsting", "How", "Are", "You"};
String s2[] = {"I", "Am", "Fine"};
String s3[] = {"Welcome", "In", "New", "World"};    

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    lv1 = (ListView) findViewById(R.id.list1);
    lv2 = (ListView) findViewById(R.id.list2);
    lv3 = (ListView) findViewById(R.id.list3);

    lv1.setAdapter(new ArrayAdapter<String>(this, R.layout.list_item_1, s1));
    lv2.setAdapter(new ArrayAdapter<String>(this, R.layout.list_item_2, s2));
    lv3.setAdapter(new ArrayAdapter<String>(this, R.layout.list_item_3, s3));

    }
} 
```

For e.g. If the activity is started and then someone touches the first element in first list view (Hello This is a long Text which will help in testing) then it should start marquee.

Thanks in advance!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:20:27.770

这有效：

```
lv1.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                long arg3) {
            // TODO Auto-generated method stub
            Log.e("Child at 0 pos"," "+lv1.getChildAt(pos));
            txtv = (TextView)lv1.getChildAt(pos);
            txtv.setSelected(true);

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:37:28.823

您可以`android:marqueeRepeatLimit="marquee_forever"`在 Touch 事件上为 textview设置运行时

# facebook - Allowing an internal site URL as well as web-visible site URL in app config

> ID：10699377
> 
> 赞同：0
> 
> 时间：2012-05-22T09:33:43.693
> 
> 标签：facebook, url, redirect, dns, internal

I've read around but I can't find any similar questions so here goes...

I have a facebook application which is configured and working fine, Lets take my website URL to be:

```
http://adminpanel.its.a.very.long.url.mywebsite.com 
```

This is configured as the 'site URL' in the application config and it works fine.

However, the website is also used on our internal network with a DNS that allows us to use

```
http://adminpanel/ 
```

The problem is that the facebook app wont allow a'redirect_uri' to be

```
http://adminpanel/ 
```

and fails with the following:

API Error Code: 191 API Error Description: The specified URL is not owned by the application Error Message: Invalid redirect_uri: Given URL is not permitted by the application configuration.

Is it possible to allow both

```
http://adminpanel.its.a.very.long.url.mywebsite.com 
```

and

```
http://adminpanel/ 
```

Thanks in advance,

Oli

**UPDATE**: I can't use two apps as I rely the 'Add Page Tab Dialogue' to add my application to various Pages.

What I need is both of these redirects (specified by the 'next' param) to be allowed by facebook.

[https://www.facebook.com/dialog/pagetab?app_id=12345678&display=popup&next=http://adminpanel/Success](https://www.facebook.com/dialog/pagetab?app_id=12345678&display=popup&next=http://adminpanel/Success)

[https://www.facebook.com/dialog/pagetab?app_id=12345678&display=popup&next=http://adminpanel.its.a.very.long.url.mywebsite.com/Success](https://www.facebook.com/dialog/pagetab?app_id=12345678&display=popup&next=http://adminpanel.its.a.very.long.url.mywebsite.com/Success)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:41:59.047

一个常见的问题，很容易解决。在下面查看我的 PHP 代码：

```
if ( strstr( 'adminpanel', $_SERVER['HTTP_HOST'] ) ) {
    // this is the localhost settings

    $facebook = new Facebook(array(
        'appId'  => 'xxx',
        'secret' => 'xxx',
    ));

    $app_url = 'http://adminpanel/';
    $fb_url = 'http://apps.facebook.com/xxx/';

    //  other settings can go here too

} else {
    // this is the main / live site settings

    $facebook = new Facebook(array(
        'appId'  => 'yyy',
        'secret' => 'yyy',
    ));

    $app_url = 'http://adminpanel.its.a.very.long.url.mywebsite.com';
    $fb_url = 'http://apps.facebook.com/yyy';

    //  other settings can go here too

} 
```

问题解决了！

代码检查`host`它在哪个运行并为每个加载正确的设置。您需要在 Facebook 上拥有两个不同版本的应用程序。这将允许您分别为每个应用程序配置 URL（如上面的 PHP 代码中所示）。

如果您使用不同的语言，您可以通过检测`host`并将您的配置设置放在条件语句的相关部分中来轻松地做同样的事情。它甚至允许您配置多个（即超过 2 个）环境。

# iphone - DST file reader for iOS

> ID：10699381
> 
> 赞同：0
> 
> 时间：2012-05-22T09:33:59.793
> 
> 标签：iphone, ios, ios4, ios5, file-format

I have a requirement to write an iOS app that can read and edit PDF files. I am confused where to start digging. Please shed some light on where should I start and what all technologies I should use to accomplish this task.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:23:18.377

我不知道 DST 是什么，但是对于 PDF，您可以查看一些现有的框架。PSPDFKit：[http](http://pspdfkit.com/) ://pspdfkit.com/ ，阅读器：[https ://github.com/vfr/Reader，FastPDFKit：](https://github.com/vfr/Reader) [http](http://fastpdfkit.com/) : //fastpdfkit.com/ 看看这些，看看它们是否符合您的需求。如果他们不这样做，请澄清他们缺少什么，这可能会帮助您找到您需要的东西。

# iphone - UIDeviceRGBColor getRed:green:blue:alpha - unrecognized selector, not due to memory management

> ID：10699385
> 
> 赞同：4
> 
> 时间：2012-05-22T09:34:25.533
> 
> 标签：iphone, objective-c, ios, uicolor, unrecognized-selector

I solved my problem by using `CGColorGetComponents`, but I would like to understand exactly what was the reason.

I was doing the following with an instance of `UIColor *firstColour` :

```
[firstColour getRed:&r green:&g blue:&b alpha:nil]; 
```

This was working perfectly fine on simulator. Then I tested it on my device, and got this error :

*UIDeviceRGBColor getRed:green:blue:alpha unrecognized selector sent to instance*

After some research on the Internet I found that `UIColor` is actually replaced by subclasses, like `UIDeviceRGBColor`. Fine, but shouldn't subclasses work just like `UIColor` and accept (at least) the same methods ?

I enabled Zombie but apparently this wasn't a memory management issue, like most people say on forums. And I can't find documentation for `UIDeviceRGBColor` so I don't know how it is supposed to behave. Does someone know why it happened, and above all, if this is likely to happen again with another method ?

Thank you.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T09:37:07.267

`getRed:green:blue:alpha:`UIColor 中的方法从 iOS 5.0 开始可用。最有可能的问题是您的设备具有较旧的操作系统版本，该方法不可用。

在较旧的操作系统上，您可能必须使用/函数从底层`CGColorRef`结构中检索颜色组件`CGColorGetComponents``CGColorGetNumberOfComponents`

# macos - 如何在 macintosh（可可或任何编程语言）上添加自定义的右键菜单，如 dropbox

> ID：10699390
> 
> 赞同：3
> 
> 时间：2012-05-22T09:34:33.413
> 
> 标签：macos, menu, contextmenu

有没有办法像 dropbox 一样添加自定义的右键菜单。我确实检查了 Automator 中的服务，但没有发现它有用（实际上我不确定如何仅将 automator 用于文件夹中的一组文件）。

有没有人在 Macintosh 中自定义右键菜单？

# c++ - 如何使用 cpuid 获取 TLB 页面大小

> ID：10699393
> 
> 赞同：0
> 
> 时间：2012-05-22T09:34:47.187
> 
> 标签：c++, assembly, cpuid

对于英特尔，我使用：

```
mov, eax, 2h
cpuid 
```

它给出“描述符解码值” - 好的；

对于 AMD，我使用：

```
mov, eax, 80000005h
cpuid 
```

它提供了 eax 中 4MB（ebx 中 4KB）的关联性和条目。

这里是 ：

> EAX = FF30FF10 EBX = FF30FF20" FF - 完整关联数据，48d 条目数据，FF - 完整关联指令，16d 条目指令

所以我有 4KB 和 4MB 还是什么？

PS我是对的，TLB页面和L1缓存-不同的东西？或者也许是 L1 指令。缓存大小是我需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:25:21.013

[维基百科上](http://en.wikipedia.org/wiki/Translation_lookaside_buffer)的这个条目可能会帮助您消除对不同 TLB 大小的一些混淆。它在“多个 TLB”的标题下：

> 例如，英特尔的 Nehalem 微架构有一个四路集关联 L1 DTLB，其中 64 个条目用于 4 KiB 页面，32 个条目用于 2/4 MiB 页面，L1 ITLB 有 128 个条目用于 4 KiB 页面，使用四向关联性，14 个完全2/4 MiB 页面的关联条目（ITLB 的两个部分在两个线程之间静态划分）[1](http://en.wikipedia.org/wiki/Translation_lookaside_buffer)和 4 KiB 页面的统一 512 条目 L2 TLB，[2] 都是 4 路关联的。[3]

# google-app-engine - 当部署到 GAE 时，它会在 Eclipse 上发出警报：无法更新：appengine-api-1.0-sdk-1.5.0.jar (Access is denied)

> ID：10699400
> 
> 赞同：1
> 
> 时间：2012-05-22T09:35:16.453
> 
> 标签：google-app-engine

我无法将我的应用程序部署到谷歌应用程序引擎，但是当我第二次或第三次尝试时我可以部署它。我收到有关 ecrise 的警报以及控制台登录，如下所示：

------------ 部署前端 ------------

准备部署：在以下位置创建暂存目录：'C:\DOCUME~1\bg92344\LOCALS~1\Temp\appcfg2387862893654282649.tmp' 扫描 jsp 文件。编译jsp文件。扫描本地磁盘上的文件。java.io.FileNotFoundException: C:\DOCUME~1\bg92344\LOCALS~1\Temp\appcfg2387862893654282649.tmp\WEB-INF\lib\appengine-api-1.0-sdk-1.5.0.jar（访问被拒绝）

调试信息可以在 C:\Documents and Settings\bg92344\Local Settings\Temp\appengine-deploy8040646126412995823.log 中找到

我发现一件事很奇怪，当我转到 Temp\appcfg2387862893654282649.tmp\WEB-INF\lib\ jar appengine-api-1.0-sdk-1.5.0.jar 在我收到此警报后消失，我想它不是完全复制罐子。我不知道为什么 :( 任何人都可以帮我解决这个问题。提前谢谢。

问候， 贝尔萨布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:46:11.153

1 从 Eclipse 登录到您的 Google 帐户（左下角图标）

2 在部署之前检查您的应用程序 ID。应该与您的应用程序相同。

3 您的用户应该具有您要部署的应用程序的所有者或管理员角色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T18:24:58.990

在尝试再次部署之前尝试清理并重建您的项目。或者尝试重新启动 IDE 或计算机。这修复了我在 Android Studio 中的错误。

# c# - 比较忽略 alpha 分量的颜色

> ID：10699418
> 
> 赞同：0
> 
> 时间：2012-05-22T09:36:37.780
> 
> 标签：c#, .net

我有一种情况，我想`Bitmap`通过它用不同的颜色替换给定的颜色。我最初的计划是传入 a`Dictionary<Color, Color>`然后循环遍历所有像素，检查当前颜色是否在字典/地图中，然后在需要时替换。

但是，如果原始图像有任何 alpha，我想保留该 alpha。我对检查颜色是否在字典中忽略 alpha 分量的最佳方法感到困惑。

到目前为止，我想出的方法只是创建一个新`RGBOnlyColor`类或类似的类并使用它而不是在我的字典中，并在查找之前`Color`将我得到的颜色转换为这个。`GetPixel`不过，这似乎有点矫枉过正，所以我想知道是否有什么我遗漏的东西可以让它变得更简单......

另一种选择是创建一个 ColorMap 类，这将是字典的简单扩展，在设置和检索时仅将 alpha 强制为已知值以确保它无关紧要......

那么任何人都可以帮助我解决这个问题的最佳方法是什么？总之，我想在图像中交换颜色，使 alpha 部分保持不变，但它比看起来更难...... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:45:59.787

要比较颜色，不包括 alpha 的比较，您不需要更多：

```
bool RGBequal(Color c1, Color c2)
{
    return c1.R==c2.R && c1.G==c2.G && c1.B==c2.B;
} 
```

要实现基于字典的方法，您可以使用 alpha 值为 255 的颜色填充字典`Color.FromArgb(r, g, b)`。也许使用扩展方法：

```
Color Opaque(this Color color)
{
    return Color.FromArgb(color.R, color.G, color.B);
} 
```

创建一种新颜色，将一种颜色的 Alpha 通道与另一种颜色的 RGB 相结合，非常简单：

```
Color.FromArgb(color1.A, color2.R, color2.G, color2.B); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:59:59.890

一种简单的方法是在字典中查找每种颜色的 alpha 通道之前将其清零，然后在解析映射颜色后注入正确的 alpha 值。

例子：

```
Color colorFromBitmap; // assume already have this
var colorToLookup = Color.FromArgb(0, colorFromBitmap);
var mappedColor = dictionary[colorToLookup];
var finalResult = Color.FromArgb(colorFromBitmap.A, mappedColor); 
```

由于`0`在字典中查找颜色之前设置了 alpha，因此字典中的颜色也应该都有一个`0`alpha。

# android - Android：listview：自定义项：nullpointerexception，findviewbyid返回null

> ID：10699422
> 
> 赞同：0
> 
> 时间：2012-05-22T09:36:48.073
> 
> 标签：android, listview, android-listview, nullpointerexception, adapter

一段时间以来，我一直在谷歌搜索和搜索以解决此错误，但我似乎无法找出原因以及如何解决它。

我正在使用 customAdapter 来填写我的列表视图。我膨胀了描述我的 listItem 的 xml。我使用 findViewById 制作 viewHolder 对象并加载到我的文本视图中。之后我想设置该文本视图的文本，但它 findViewbyid 返回一个空值。因此自动解析为空指针异常。

适配器：

```
/** CLASS : Custom Adapter for the listview */
private class CustomAdapter extends ArrayAdapter<Track>{
    private List<Track> items;
    private Context mContext;
    private int layoutResourceId;       
    private ViewHolder mHolder;

    public CustomAdapter(Context context, int layoutId, List<Track> objects) {
        super(context, layoutId, objects);
        layoutResourceId=layoutId;
        items = objects;
        mContext=context;       
    }       

    public View getView(int position, View convertView, ViewGroup parent) {
         if(convertView == null){
             LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             convertView = inflater.inflate(layoutResourceId, parent, false);
             mHolder = new ViewHolder();
             ****** RETURNS NULL DURING DEBUGGING ******
             mHolder.textViewCenter = (TextView)findViewById(R.id.textview_list_item_central);
             convertView.setTag(mHolder);
         }else{
             mHolder = (ViewHolder) convertView.getTag();
         }
         Track track = items.get(position);
         ****** ERROR HAPPENS HERE ******
         mHolder.textViewCenter.setText(track.getTrack());
         return convertView;
    }

    class ViewHolder{
        ImageView imageView;
        TextView textViewCenter;
        TextView textViewRight;
    }
} 
```

XML:

```
?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/imageview_list_albumart_icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:src="@drawable/ic_music" />

<TextView
    android:id="@+id/textview_list_item_central"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight="0.5"
    android:text="Center"
    android:textSize="20sp" >
</TextView>

<TextView
    android:id="@+id/textview_list_item_right"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:paddingRight="10dip"
    android:text="Right" /> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T09:38:44.500

`convertView`在您膨胀的视图中搜索（而不是`Activity`像您当前所做的那样在当前布局中）：

```
 mHolder.textViewCenter = (TextView) 
                convertView.findViewById(R.id.textview_list_item_central); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:39:46.250

您正在夸大布局，但在获取视图时不使用它

做这个：

```
 mHolder.textViewCenter = (TextView)convertView.findViewById(R.id.textview_list_item_central) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:43:01.803

TextView初始化错误

```
if(convertView == null){
             LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             convertView = inflater.inflate(layoutResourceId, parent, false);
             mHolder = new ViewHolder();
             ****** RETURNS NULL DURING DEBUGGING ******
             mHolder.textViewCenter = (TextView) convertView .findViewById(R.id.textview_list_item_central); //Change done
             convertView.setTag(mHolder);
         }else{
             mHolder = (ViewHolder) convertView.getTag();
         } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:53:15.040

尝试替换这个：

```
convertView = inflater.inflate(R.layout.listitemview, null); 
```

`listitemview`你`xml`在哪里定义你的**和**`ImageView`s `TextView`..
希望这对你有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T09:53:36.570

换行

```
mHolder.textViewCenter = (TextView)findViewById(R.id.textview_list_item_central); 
```

低于 *******调试期间返回 NULL******** 由***

 ***```
mHolder.textViewCenter = (TextView) convertView.findViewById(R.id.textview_list_item_central); 
```***

# select - JPA - MAX of COUNT 或 SELECT FROM SELECT

> ID：10699423
> 
> 赞同：7
> 
> 时间：2012-05-22T09:36:47.967
> 
> 标签：select, jpa, count, subquery, max

我为 MySQL 编写了以下查询：

```
SELECT subquery.t1_column1, 
    subquery.t2_id, 
    MAX(subquery.val)
FROM (
    SELECT t1.column1 as t1_column1, 
        t1.id_t2 AS t2_id,
        count(1) AS val
    FROM table1 t1
    INNER JOIN table2 t2
    ON t2.id = t1.id_t2
    GROUP BY t1.id_t2
) subquery
GROUP BY t1_column1 
```

我想把它翻译成 JPA（JPQL 或标准查询）。

我不知道如何制作这个 max(count) 东西，而且 JPA 似乎不喜欢 SELECT FROM SELECT ...

如果有人有原生查询以外的想法（我现在就去做），那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:40:28.047

我没有检查过 JPA 规范，但鉴于[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-subqueries)说

> 请注意，HQL 子查询只能出现在 select 或 where 子句中。

我非常怀疑您的查询是否可以转换为有效的 JPQL 查询。

您必须继续使用这个原生 SQL 查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T15:31:27.707

JPA 2.0 JPQL 不支持 from 子句中的子选择。您可能想尝试重写您的查询，或使用本机 SQL 查询。

EclipseLink 2.4 将支持 FROM 子句中的子选择，

看，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Sub-selects_in_FROM_clause](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Sub-selects_in_FROM_clause)

# connection - 本地主机不起作用（仍在加载）

> ID：10699427
> 
> 赞同：-3
> 
> 时间：2012-05-22T09:37:12.147
> 
> 标签：connection, localhost

我正在使用 xamp。在我的 xamp 中，Apache 正在运行，MySql 也在运行，但是当我转到 localhost 时，它仍在加载、加载和加载，但没有任何反应。

有谁知道出了什么问题？

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:41:27.373

检查您是否没有在 localhost 上运行其他任何内容。您也可以尝试在不同的端口上运行它。您将能够在 apache conf 中更改它。

# ruby-on-rails - will_paginate 找出我是否在最后一页

> ID：10699436
> 
> 赞同：14
> 
> 时间：2012-05-22T09:37:46.407
> 
> 标签：ruby-on-rails, ruby, ajax, will-paginate

我正在尝试使用将使用 ajax 进行分页，但我不显示`will_paginate`按钮...而是使用一个`see more`按钮，它发出 Ajax 请求并将结果附加到页面。`see more`如果我点击记录的最后一页，我想要做的是禁用此按钮！知道如何知道当前页面是最后一页吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-22T10:10:19.073

```
@collection.total_pages == @collection.current_page 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:23:12.673

访问该`@collection.total_pages`方法将为您提供当前返回的页面总数。您可以使用该`@collection.current_page`方法对您的活动页面进行评估。如果您在每次扩展时重新加载您的收藏，这仍然适用。

如果此评估为真，则实施将使用 AJAX 调用来替换 HTML 内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-22T06:53:53.907

您可以使用`next_page`条件

```
@collection.next_page.present? 
```

# android - AAPT 失败，错误代码为 -1073741819

> ID：10699439
> 
> 赞同：21
> 
> 时间：2012-05-22T09:37:52.473
> 
> 标签：android, intellij-idea, actionbarsherlock

构建项目会从 AAPT 引发以下错误。我已经重建了这个项目，但它仍然失败。我在任何地方都找不到此错误代码实际含义的任何引用。我在带有 ActionBarSherlock v4.1.0 的 IntelliJ 中使用 Java 6 和 Android 工具 r19。

```
I/O error: Command
"C:\android-sdk-windows\platform-tools\aapt.exe package -m --auto-add-overlay --extra-packages com.actionbarsherlock -J C:\Users\Ollie\.IntelliJIdea11\system\compiler\project6.b9f5599b\.generated\aapt\Project.9617c193\production -M C:/Users/Ollie/Documents/Dropbox/Tech/project6/Source/project6/AndroidManifest.xml -S C:/Users/Ollie/Documents/Dropbox/Tech/project6/Source/project6/res -S C:/Users/Ollie/Documents/Dropbox/Tech/project6/Source/actionbarsherlock/res -I C:\android-sdk-windows\platforms\android-14\android.jar"
execution failed with exit code -1073741819 
```

在我将项目中的依赖项添加到 ActionBarSherlock 库项目后，此构建失败开始发生。如果我删除该依赖项，则项目构建良好。如果我重新添加它，它会再次失败。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-13T07:29:58.280

我在windows下遇到了这个问题，我通过删除styles.xml中样式项目定义中的@+id来修复它。我与其他不知道确切原因但发现在样式文件中使用 +id 经常导致问题的人交谈。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-18T16:24:42.267

### 2014 年 10 月 27 日更新 -

该问题已通过 Android SDK Build-tools rel 修复。21.0.2，松了一口气......我想我会保留这篇文章的其余部分，以防万一使用 v. 21.0.1 的人遇到这个问题，或者如果该错误在工具的未来版本中再次出现。也许它可以避免有人一头撞在工具漏洞墙上，花一整天时间审查所有其他帖子和他们的代码。

### 2014 年 10 月 18 日的原始帖子

这个老问题的新变化......今天，2014 年 10 月 18 日，在我的 Windows 7 计算机上升级到刚刚发布的 Android SDK v. 21 后，使用 android-sdk\build-tools\21.01\ 目录中的 aapt.exe每次都使用相同的退出代码 -1073741819 崩溃。在我的帖子之前尝试了此线程中建议的所有答案，但无济于事。然后只需从 20.0.0 复制旧版本的 aapt.exe（也从 19.1.0 工具目录尝试过），并且在每种情况下都可以正常工作。没有问题（只需使用测试的每个版本的 aapt.exe 清理重建项目）。

用于 Windows 的 aapt.exe，在 Android SDK 内置工具版本 21.0.1 中是否损坏？有没有其他人看到这个问题？

格雷格

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-21T20:20:37.823

对于在 Android Studio 中遇到此问题的任何其他人，这就是我解决它的方法：

我复制了输出窗口中显示的 aapt.exe 命令。例如：

```
C:\android-sdk-windows\platform-tools\aapt.exe package -m --auto-add-overlay --extra-packages com.actionbarsherlock -J C:\Users\Ollie\.IntelliJIdea11\system\compiler\project6.b9f5599b\.generated\aapt\Project.9617c193\production -M C:/Users/Ollie/Documents/Dropbox/Tech/project6/Source/project6/AndroidManifest.xml -S C:/Users/Ollie/Documents/Dropbox/Tech/project6/Source/project6/res -S C:/Users/Ollie/Documents/Dropbox/Tech/project6/Source/actionbarsherlock/res -I C:\android-sdk-windows\platforms\android-14\android.jar 
```

最后，我将 附加`-v`到该命令的末尾并在命令提示符窗口中运行它。该开关打开详细日志记录。最终该命令将失败，但它尝试打包的最后一个文件是罪魁祸首。我建议您将精力集中在该文件上。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-18T12:22:43.653

这个问题的一般解决方案在于 XML 代码。XML 代码中有一些东西被指出，但不存在。就我而言，无法访问的字符串会导致此错误。

```
<item android:title="@string/action_settings"> 
```

由于一些代码合并，这个字符串代码被删除了，编译器无法找到它。我改变了它&哎呀..错误消失了。
在大多数语言中，当**访问资源**出现问题时，通常会抛出**1073741819错误**

 *** * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-22T03:47:36.330

确保您的所有@+id/...（在 main.xml 和其他文件中）也在 strings.xml 中注册。

我遇到的问题是 `<item android:id="@+id/menu_help" android:title="@string/menu_help"/>`我的***main.xml***文件中没有在我的***strings.xml***文件中定义。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-13T15:29:29.457

看看[这里](https://stackoverflow.com/questions/18094313/android-development-unable-to-create-an-icon-drawable-ic-action-search)。
它与Android Develop的[第二类](http://developer.android.com/training/basics/actionbar/adding-buttons.html#Respond)，添加动作按钮有关。
只是不存在可绘制的“ **ic_action_search** ”。嗯，对我来说就是这样。
该类链接到[操作栏图标包](http://developer.android.com/design/downloads/index.html#action-bar-icon-pack)，您可以在其中找到丢失的 PNG 并将其添加到项目中。

希望有帮助，
SJ

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-04T04:07:01.473

我认为 aapt ErrorCode -1073741819 表示 Android 资源冲突或非法。每当我在别人或我自己的android项目上遇到这个错误时，我通常会发现layout/xxx.xml中缺少必需的属性，或者id，name属性在不同的layout/xxx.xml中冲突

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-02T18:36:03.217

我在 Eclipse 中遇到了同样的问题。Eclipse 不时显示这些错误，我的项目中的简单刷新为我修复了该错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-30T17:56:28.110

有同样的问题。布局 xml 文件中有一个引用指向源代码中不再存在的对象。您可能应该首先检查您的主布局文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-05T14:11:00.880

我刚刚又遇到了这个问题。上一次找不到错误原因，只好清空一切，小心翼翼地一一添加文件和资源。但现在我发现了这个错误的另一个原因。我使用了 Software.Developer 提供的方法，但就我而言，罪魁祸首不是最后一行，而是倒数第二行。这是一个菜单 xml 文件，问题出在该文件的第一行。它是空的，并且 xml 声明

> xml 版本="1.0" 编码="utf-8"

被放置在第二行。IntelliJ IDEA 静态分析器不会突出显示此错误，直到您打开文件并且编译器在编译时才会崩溃。因此，请确保您的所有 xml 文件（布局、样式、菜单）都在文件的第一行放置了正确的 xml 声明。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-28T05:49:24.363

我通过在再次编译之前清理项目来解决这个问题。

我得到的错误代码是-1073741502，略有不同，但我认为这只是之前构建的aapt生成的id。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-10T06:35:33.757

就我而言，问题出在我的 menu.xml 中。看看这个：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    >

    <item android:id="@+id/action_help"
        android:title="@string/help"
        android:orderInCategory="100"
        app:showAsAction="never"
        />
</menu> 
```

将 app:showAsAction 的命名空间从 app 重命名为 android 解决了这个问题。这是正确的方法

```
<item android:id="@+id/action_help"
    android:title="@string/help"
    android:orderInCategory="100"
    android:showAsAction="never"
    /> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-17T10:08:10.497

另一个资源问题 - 添加`formatting="false"`到包含`%s`格式字符的字符串中。

[在Android XML 百分比符号](https://stackoverflow.com/questions/4414389/android-xml-percent-symbol)中查看更多信息

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-10-21T09:49:30.723

在我的情况下（Windows 8.1 上的 Android Studio）`aapt`有时会卡住，每次从命令行启动都会崩溃（但在资源管理器中双击时不会崩溃）。当我终止任务管理器中的所有进程时，清理`cmd.exe`和`conhost.exe`构建一切正常。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-05-12T05:20:19.213

当您的XML有一些问题但Eclipse时，将生成此错误将在选中项目>构建时不会显示实际问题

您必须做的第一件事是取消选中该选项，全部构建，然后查看问题窗口。

对我来说，我从资源中删除了一个字符串，但没有删除它的使用情况，所以我需要 2 个工作日才能找出问题所在

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-20T09:20:19.153

通常，由于 xml 文件中缺少某些参数或某些语法错误，会观察到此错误。

您可以参考消息视图以进行 gradle 构建。它在那里指出，哪个文件有错误。就我而言，在其中一个布局 xml 中，有一些额外的字符。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2016-06-24T16:38:23.410

尝试从 android build tool 文件夹中删除版本早于 19 的 build tool，然后从 sdk manager 安装 build tool 19，将 lib 文件夹和 aapt.exe 复制到 platform-b​​uild 文件夹。**

# c# - 删除 DateTime.ParseExact 的时区

> ID：10699440
> 
> 赞同：3
> 
> 时间：2012-05-22T09:37:54.720
> 
> 标签：c#, datetime, timezone

我正在尝试将字符串解析为具有以下格式的日期时间：

[Day],[Date] [Month] [Year] [Time][am/pm] [timezone]（例如：）

“美国东部标准时间 2011 年 12 月 1 日星期四晚上 8:30”

我使用格式为（“dddd，dd MMM yyyy hh:mmtt”）的 DateTime.ParseExact 完成了此操作。但是时区给了我一个问题。没有用于读取以这种方式编写的时区的代码。无论如何我都不关心时区，所以我想把它去掉或阅读它——只要 parsexact 可以工作。

删除它的一种方法是从字符串中实际删除它（使用 .Replace） - 但是我不知道源会产生多少个不同的时区，而且无论如何我认为一长串替换看起来很丑陋且容易出错。

那么有没有办法删除它，或者阅读它（然后我可以忽略它）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:05:13.327

您可以扫描字符串中的空格，并剪切第五个空格之后的所有内容。如果只有四个空格，则保留整个字符串（这意味着没有时区）。

*此答案已在[Jon](https://stackoverflow.com/users/50079/jon)发表评论后进行了编辑。*

# c# - 自动复制多个图像并显示图块通知？

> ID：10699441
> 
> 赞同：3
> 
> 时间：2012-05-22T09:37:58.793
> 
> 标签：c#, windows-8

这是我的 Windows 8 Metro 应用程序代码，其中我将 1 个图像从本地文件夹复制到我的应用程序存储文件夹，然后它显示一个磁贴通知。请帮我自动复制图片库中的所有图像，然后这些图像显示在平铺通知中。我不知道如何访问或复制图片库中的所有图像...没有用于复制图像的用户界面。

公共密封部分类 BlankPage : Page { string imageRelativePath = String.Empty;

```
 public BlankPage()
    {
        this.InitializeComponent();
        CopyImages();
    }

    public async void CopyImages()
    {

        FileOpenPicker picker = new Windows.Storage.Pickers.FileOpenPicker();
        picker.ViewMode = PickerViewMode.Thumbnail;
        picker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
        picker.FileTypeFilter.Add(".jpg");
        picker.FileTypeFilter.Add(".jpeg");
        picker.FileTypeFilter.Add(".png");
        picker.CommitButtonText = "Copy";
        StorageFile file = await picker.PickSingleFileAsync();
        StorageFile newFile = await Windows.Storage.ApplicationData.Current.LocalFolder.CreateFileAsync(file.Name);
        await file.CopyAndReplaceAsync(newFile);
        this.imageRelativePath = newFile.Path.Substring(newFile.Path.LastIndexOf("\\") + 1);

                IWideTileNotificationContent tileContent = null;
                ITileWideImage wideContent = TileContentFactory.CreateTileWideImage();
                wideContent.RequireSquareContent = false;
                wideContent.Image.Src = "ms-appdata:///local/" + this.imageRelativePath;
                wideContent.Image.Alt = "App data";
                tileContent = wideContent;
                tileContent.RequireSquareContent = false;
                TileUpdateManager.CreateTileUpdaterForApplication().Update(tileContent.CreateNotification());
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:03:49.817

首先给出图像文件夹的路径，然后通过 IReadOnlyList 列出这些图像，并将复制图像上的循环设置为结束，然后在 TileUpdateManager 上设置计时器。它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:27:04.070

枚举 PicturesLibrary 中的文件：

```
// from my sample app "MetroContractSample" http://metrocontractsample.codeplex.com/documentation
var queryOptions = new QueryOptions(CommonFileQuery.DefaultQuery, new[] { ".jpg", ".png", ".bmp", ".gif", }) { FolderDepth = FolderDepth.Deep, };
StorageFileQueryResult query = KnownFolders.PicturesLibrary.CreateFileQueryWithOptions(queryOptions);
var fileInfoFactory = new FileInformationFactory(query, ThumbnailMode.SingleItem);
IReadOnlyList<FileInformation> fileInfoList = await fileInfoFactory.GetFilesAsync(); 
```

注意：您必须在 Package.appxmanifest 中声明 PicturesLibrary 的功能。

# java - 我们如何使用带有 where 子句的 Hibernate 计算行数？

> ID：10699442
> 
> 赞同：1
> 
> 时间：2012-05-22T09:37:59.667
> 
> 标签：java, hibernate

> **可能重复：**
> [我们如何使用 Hibernate 计算行数？](https://stackoverflow.com/questions/1372317/how-do-we-count-rows-using-hibernate)

我们如何使用带有 where 子句的 Hibernate 计算行数？

```
select count(*) from table where recName = 'any' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T10:03:17.127

这个问题基本上已经在stackoverflow上得到了回答：

[我们如何使用 Hibernate 计算行数？](https://stackoverflow.com/questions/1372317/how-do-we-count-rows-using-hibernate)

除了使用 Projections 的解决方案之外，您只需将 where 子句作为附加标准添加到标准。

```
Criteria criteria = session.createCriteria("Book");
criteria.add(Restrictions.eq("title", "My Title"));
criteria.setProjection(Projections.rowCount());
Number numRows = (Number)criteria.uniqueResult(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:40:50.633

```
SELECT Count(*) from DomainClass d where d.someProperty='someValue' 
```

# ruby-on-rails - rails slim 语法错误

> ID：10699445
> 
> 赞同：6
> 
> 时间：2012-05-22T09:38:12.053
> 
> 标签：ruby-on-rails, slim-lang

我试着用苗条做一张简单的桌子

```
table class="table table-striped"
  thead
    tr
      th username 
```

它工作正常，但是当我尝试添加另一个 th 或 tbody 时出现错误缩进格式错误，例如此代码对我不起作用

```
table class="table table-striped"
  thead
    tr
      th username
      th provider 
```

或者

```
table class="table table-striped"
  thead
    tr
      th username
  tbody
    tr
      td test 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T09:47:03.407

在没有看到原始源代码的情况下，我只能猜测[您的文本编辑器在相同缩进级别的后续行中插入了制表符而不是空格](https://github.com/slim-template/slim/issues/153#issuecomment-2573547)。确保一切都是空格？

# iphone - 将应用程序部分添加到设置？

> ID：10699447
> 
> 赞同：2
> 
> 时间：2012-05-22T09:38:29.387
> 
> 标签：iphone, ios, cocoa-touch

如何在应用程序的设置中添加一个部分，它与 NSUserDefaults 相关还是完全不同？只是不确定这叫什么或从哪里开始。

![在此处输入图像描述](../Images/c84850f953b607cbc1f06b18168a78ee.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:41:21.660

这是您添加到应用程序中的一个 Bundle，称为设置。

这是文档：http: [//developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/Preferences/Preferences.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

要添加`settings.bundle`，请选择`New File..`然后在列表中选择`Resource`> `Settings Bundle`。这将为您的项目添加一个设置包。其中包含一些默认示例设置。

在设置应用程序中所做的所有设置更改都存储在 中，`NSUserDefaults`因此您可以轻松访问它们。

# json - !e.eoo() MongoDB 查询中的错误

> ID：10699448
> 
> 赞同：5
> 
> 时间：2012-05-22T09:38:38.483
> 
> 标签：json, mongodb, bson

这个查询有问题，我不知道它是什么。我相信这很简单：

```
db.foo.insert({
    'created at': new Date(),
    ooc: false,
    body: '<p>Moo</p>\n',
    keywords: [ 'Moo' ],
    mentioned: [],
    tags: [],
    sender: {
        _id: 'stuff',
        name: 'lambdadusk',
        'display name': 'Lambda'
    }
}); 
```

我从 Mongo 得到的错误很简单

```
!e.eoo() 
```

我正在使用 MongoDB 2.0.5。谷歌搜索错误并没有告诉我太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:20:35.953

我应该早点尝试的。

问题不在于查询，而是集合的 BSON 数据文件以某种方式损坏。我不得不放弃收藏，然后重试。

幸运的是，由于我处于开发初期，因此该系列是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:24:16.743

eoo 表示对象结束，如果它不存在，您的 JSON 中很可能存在解析错误。可能 Mongo 需要严格有效的 JSON，因此您可能需要对所有字符串使用双引号，并且可能需要删除新的 Date() 位。

[http://jsonlint.com/](http://jsonlint.com/)建议这将是有效的，而您发布的代码不是。不确定这是否会有所帮助，因为 Mongo 使用 BSON，所以可能更灵活。

```
{
    "created at": {},
    "ooc": false,
    "body": "<p>Moo</p>\n",
    "keywords": [
        "Moo"
    ],
    "mentioned": [],
    "tags": [],
    "sender": {
        "_id": "stuff",
        "name": "lambdadusk",
        "displayname": "Lambda"
    }
} 
```

# linux - 如何使用管道解析命令的输出

> ID：10699452
> 
> 赞同：2
> 
> 时间：2012-05-22T09:38:47.767
> 
> 标签：linux, shell, ubuntu, pipe, ifconfig

我想处理一个进程的输出，比如 ifconfig。大家都知道 ifconfig 的输出是包含`inet addr:`掩码的行列表：等。但我想单独提取 ip [来自 inet addr: field] 并列出它。管道命令可以吗？喜欢

```
ifconfig | What should be here? 
```

我希望将此命令的输出作为`inet addresses`（不同接入点（如果存在）的列表）的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:46:37.673

[您可以使用awk](http://en.wikipedia.org/wiki/AWK)来实现这一点，如[本](http://www.catonmat.net/blog/golfing-the-extraction-of-ip-addresses-from-ifconfig/)网站所示。我在这里发布了一段摘录，可以产生您想要的结果：

`ifconfig | awk '/dr:/{gsub(/.*:/,"",$2);print$2}'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:47:08.470

你可以做

```
 ifconfig -a|grep inet| awk -F' ' '{print $2}' 
```

# objective-c - 轻量级迁移麻烦 iOS

> ID：10699458
> 
> 赞同：0
> 
> 时间：2012-05-22T09:39:15.500
> 
> 标签：objective-c, ios, core-data, migration

我有点麻烦，我创建了一个新版本的上下文并将其设为默认版本，之后我根据苹果文档更改了我的代码，现在看起来像这样：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{

    if (persistentStoreCoordinator != nil)
    {
        return persistentStoreCoordinator;
    }
    NSError *error = nil;
    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"database.sqlite"];
    NSPersistentStoreCoordinator *psc = persistentStoreCoordinator;
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    BOOL success = [psc addPersistentStoreWithType:NSSQLiteStoreType
                                     configuration:nil URL:storeURL
                                           options:options error:&error];
    if (!success) {
        NSLog(@"Unresolved Error");
        abort();
    }

    return persistentStoreCoordinator;
} 
```

但我得到一个错误，即使它是 1:1 相同的代码，在`BOOL sucess`我得到一个`incompatible pointer to integer conversion 'BOOL' with 'NSPersistentstore'`

不知何故，映射虽然有效，但我得到了新模型，让我们说 5 次中有 4 次有效，第 5 次在该行中引发错误。

任何想法如何解决它？

**更新**我稍微更改了代码，现在看起来像这样

```
NSPersistentStore *store = [psc addPersistentStoreWithType:NSSQLiteStoreType
                                     configuration:nil URL:storeURL
                                           options:options error:&error];
if (!store) {
        NSLog(@"Unresolved Error");
        abort();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:04:35.893

警告和错误是两个不同的东西。

警告是您将指针视为数字。 `addPersistentStoreWithType:configuration:URL:options:error`不返回 a `BOOL`（本质上是一个数字），它返回`NSPersistentStore`您正在创建的对象。您应该将结果分配给变量，而不是布尔成功`NSPersistentStore *`变量。

在失败的情况下，它返回`nil`并填充`error`对象。您可以从此对象获取有关错误的更多信息，例如记录其`localizedDescription`.

# java - Xpath 计算 "[ ]" 中的计数

> ID：10699459
> 
> 赞同：4
> 
> 时间：2012-05-22T09:39:22.600
> 
> 标签：java, xml, xpath, evaluate

我和成员们一起上课-

```
private Document myDoc;
XPath xpath = XPathFactory.newInstance().newXPath(); 
```

我尝试使用`evaluate`功能 -

```
Object result = xpath.evaluate(expression, this.myDoc,
                XPathConstants.NODESET); 
```

什么时候`expression`是`string`st

```
expression = "inventory/book[" +
                "count(following-sibling::book/price/text()=14.95)=0 ]"  ; 
```

我得到以下异常 -

```
java.lang.RuntimeException: Can not convert #BOOLEAN to a NodeList! 
```

即使我更改`XPathConstants.NODESET`为`XPathConstants.NUMBER`我得到相同的异常。提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:01:43.407

This is one of the few cases where XPath 1.0 returns a type error: the argument to the count() function is a boolean expression (path/a/b = 14.94), and count() requires it to be a node-set. (In XPath 2.0 the count of a single boolean is 1, so your query would run successfully, and give wrong answers).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:53:46.227

尝试这个 ：

```
expression = "inventory/book[" +
         "count(following-sibling::book[price/text()=14.95])=0]"; 
```

# javascript - 如何计算时差？

> ID：10699463
> 
> 赞同：0
> 
> 时间：2012-05-22T09:39:53.347
> 
> 标签：javascript, jquery

我怎样才能计算得到时差。我有`isoDate`日期格式的服务器时间和客户端系统时间。这是我的输出数据：

以 UTC 表示的服务器时间转换为本地系统时区时间：

`Tue May 22 2012 14:29:51 GMT+0530 (India Standard Time)`

本地系统时间：

`Tue May 22 2012 14:31:51 GMT+0530 (India Standard Time)`

我想以这样的方式进行计算，如果本地系统时间小于或大于 5 分钟（可配置值），则忽略与服务器时间显示的秒数之间的差异想要执行某些任务，否则执行另一个任务. 我不知道如何进行计算，因为根据服务器时间，当它是午夜 12:01 时，日期、小时和分钟会发生变化，而如果本地系统仅落后 4 分钟，如何确定差异不小于 5分钟虽然日期改变了。我的主要想法是检查所有内容以匹配日期、时间并检查差异。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:42:51.097

```
function getDateDiff(date1, date2) {
    var second = 1000,
    minute = second * 60,
    date1 = new Date(date1).getTime();
    date2 = (date2 == 'now') ? new Date().getTime() : new Date(date2).getTime(); // now means current date
    var timediff = date2 - date1;
    if (isNaN(timediff)) return NaN;
    return Math.floor(timediff / minute);
} 
```

**利用：**

```
getDateDiff(YOUR_SERVER_DATE, YOUR_CLIENT_DATE); // output will be in unit minute 
```

或者

```
getDateDiff(YOUR_SERVER_DATE, 'now'); // for current date 
```

# android - 动态调整片段android

> ID：10699464
> 
> 赞同：5
> 
> 时间：2012-05-22T09:40:03.270
> 
> 标签：android, android-fragments

我想更改我在 MaiActivity 中使用的片段的宽度？但我找不到它`LayoutParams`来改变它的默认宽度：

```
public class MainActivity extends Activity {

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        int widthFfragment = 300;

        Display display = getWindowManager().getDefaultDisplay();
        Point size = new Point();
        display.getSize(size);
        widthTot = size.x;
        heightTot = size.y;

        findViewById(R.id.f1).getLayoutParams().width = widthTot-widthFfragment;
    }
} 
```

这是我的片段代码：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/f1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#330000"
    android:gravity="center_horizontal|center_vertical"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Fragment 1"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

**片段1.java**

```
public class Fragment1 extends Fragment{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        //---Inflate the layout for this fragment---
        return inflater.inflate( R.layout.fragment1, container, false);
    }
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-07T15:06:09.023

您可以通过使用从 Fragment.getView() 获得的 View 的 LayoutParams 实例来实现。我的示例代码：

```
private void resizeFragment(Fragment f, int newWidth, int newHeight) {
    if (f != null) {
        View view = f.getView();
        RelativeLayout.LayoutParams p = new RelativeLayout.LayoutParams(newWidth, newHeight);
        view.setLayoutParams(p);
        view.requestLayout();       

    }
} 
```

并且可以如下使用：

```
resizeFragment(myFragment, 200, 500);
resizeFragment(otherFragment, LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T10:21:08.523

您的权利，Fragment 没有 LayoutParams 因为它是一个概念容器，您要么需要调整片段中膨胀视图的布局参数，要么调整将片段附加到的容器。

```
public class Fragment1 extends Fragment{
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    ViewGroup view = (ViewGroup) inflater.inflate( R.layout.fragment1, container, false);

    // TODO Adjust layout params of inflated view here

    return view;
} 
```

该示例假设您正在对 ViewGroup 进行膨胀。

希望有帮助。

# javascript - jQuery basic：如何使用这种结构创建循环？

> ID：10699466
> 
> 赞同：1
> 
> 时间：2012-05-22T09:40:09.850
> 
> 标签：javascript, jquery

这是一个非常简单的问题，但我不知道如何在互联网上搜索它。

我有一个空`<div id="wrap"></div>`的，最终需要如下所示：

```
<div id="wrap>
    <div class="container">
        <div class="apples"></div>
    </div>
    <div class="container">
        <div class="banana"></div>
    </div>
    <div class="container">
        <div class="orange"></div>
    </div>
    <div class="container">
        <div class="grapes"></div>
    </div>
</div> 
```

在 jquery 中我有：

```
$(#wrap).html(''); // need this bit
var fruitArray = ['apples','banana','orange','grapes'];
for (fruit in fruitArray) {
    $('<div class="'+fruitArray[fruit]+'"></div>').appendTo('#wrap').doSomething(); 
} 
```

因为我需要带有 fruitArray 类的 div 来做某事，所以我不能只用容器类将它包装起来：

```
$('<div class="container"><div class="'+fruitArray[fruit]+'"></div></div>').appendTo... 
```

在这种情况下，我该如何生成容器类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:42:17.980

.wrap方法返回用于链接目的的原始[元素](http://api.jquery.com/wrap/)集。

```
$('<div class="'+fruitArray[fruit]+'" />')
.appendTo('#wrap')
.wrap('<div class="container" />')
.doSomething(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:46:54.650

```
var fruitArray = ['apples','banana','orange','grapes'];
for (fruit in fruitArray) {
    $('<div class="'+fruitArray[fruit]+'" />').wrap('<div class="container" />').appendTo('#wrap').doSomething();
} 
```

或者你也可以这样做

```
var fruitArray = ['apples','banana','orange','grapes'];
for (fruit in fruitArray) {
    $('<div class="'+fruitArray[fruit]+'" />').appendTo('#wrap').doSomething().wrap('<div class="container" />');
// this will work if the doSomething is a jquery/plugin method that is using chaining (usually they do)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:42:38.353

尝试这个：

```
var fruitArray = ['apples','banana','orange','grapes'];
for (fruit in fruitArray) {
    $('<div class="' + fruitArray[fruit] + '"></div>').appendTo('#wrap').wrap('<div class="container"></div>');
} 
```

[**示例小提琴**](http://jsfiddle.net/wX6sL/1/)

# c# - 跨线程的简单入队/出队是否需要 Queue.SyncRoot？

> ID：10699471
> 
> 赞同：3
> 
> 时间：2012-05-22T09:40:31.787
> 
> 标签：c#, .net-3.5, thread-safety, queue

我有一个`WorkerThread`在队列中的元素上做的工作和几个`MiningThread`创建东西的 s 需要由`WorkerThread`.

总结一下：一个线程Dequeues和几个Enqueue。

我是否需要使用 msdn 中提出的同步模式，或者在这种特定情况下我是线程安全的？

来自[msdn](http://msdn.microsoft.com/en-us/library/system.collections.queue.syncroot.aspx)的简单同步访问模式

```
Queue myCollection = new Queue();
lock(myCollection.SyncRoot)
{
    foreach (object item in myCollection)
    {
        // Insert your code here.
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T09:52:07.750

是的，您需要同步。

有一个不需要同步的 .NET4 队列，称为“ConcurrentQueue”：http: [//msdn.microsoft.com/en-us/library/dd267265.aspx](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

但是您必须迁移到 .NET4，在此之前，您只能自己进行同步

**更新：** 对于您的特定模式，.NET4 中甚至还有一个更专业的类，即包含生产者/消费者模式的 BlockingCollection：http: [//msdn.microsoft.com/en-us/library/dd267312.aspx](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

.NET4 仍然很艰难... :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:49:22.763

`Queue`并不是说是线程安全的，所以你不能只在多线程应用程序中使用它。您可以使用`SyncRoot`属性或[Synchronized](http://msdn.microsoft.com/en-us/library/system.collections.queue.synchronized.aspx)方法来实现同步。

# c# - C# <--> VB.NET DLL 转换

> ID：10699472
> 
> 赞同：2
> 
> 时间：2012-05-22T09:40:34.800
> 
> 标签：c#, vb.net, dll, c#-to-vb.net, raw-input

我是一名 VB.NET 开发人员，我正在尝试使用这个名为 Raw Input Sharp ( [http://www.jstookey.com/arcade/rawmouse/](http://www.jstookey.com/arcade/rawmouse/) ) 的库，它允许我一次从多个鼠标接收原始数据。该库最初是用 C# 编写的，但由于我使用的是 .NET，所以原始语言是什么并不重要。

我引用它并得到一个错误，说该库有多个同名定义。经过大约几个小时的努力，我意识到在 c# 中我们区分大小写，而在 vb 中则相反。例如，RAWMOUSE 结构与 RawMouse 类一致。

现在我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:42:53.283

重命名您的结构或将其放在不同的命名空间中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:27:47.363

Hans Passant 已经在[https://stackoverflow.com/a/2302109/292411中提供了答案](https://stackoverflow.com/a/2302109/292411)

> 要使两个标识符被认为是不同的，它们的区别必须不仅仅在于它们的大小写。

因此，不幸的是，您似乎无法在不遇到该问题的情况下以当前形式使用该库。

# wso2 - 建立 GREG 上下文根会使仪表板失败

> ID：10699473
> 
> 赞同：0
> 
> 时间：2012-05-22T09:40:36.123
> 
> 标签：wso2, wso2greg

我有一个已建立上下文根的 greg 实例（url 访问

```
https://host:9443/greg/carbon/admin/index.jsp 
```

当我尝试访问管理仪表板时，所有小工具都显示相同的消息。

```
Unable to retrieve spec for http://host:80/registry/resource/_system/config/repository/dashboards/gadgets/impact-analysis.xml. HTTP error 404 
```

请注意，该小工具正在尝试访问没有`/greg/`我已建立的前缀的根上下文。

任何解决此问题的帮助将不胜感激。

谢谢巴勃罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:02:04.180

当您在 carbon.xml 中同时设置 HostName 和 WebContextRoot 时，会出现此问题。如果您仅更改 WebContextRoot，则不会出现此问题。这是在 WSO2 GREG 4.1.1 中发现的已知问题，现在已在主干 [1] 中修复.

作为一种解决方法，您可以将 <HostName> 条目保留在 carbon.xml 中，并且只更改 Web 上下文根并尝试。

[1] [https://wso2.org/jira/browse/CARBON-11839](https://wso2.org/jira/browse/CARBON-11839)

谢谢;

/拉拉吉

# php - PHP中的XML排序

> ID：10699489
> 
> 赞同：3
> 
> 时间：2012-05-22T09:41:58.983
> 
> 标签：php, xml, sorting

> **可能重复：**
> [SimpleXMLElement 对象](https://stackoverflow.com/questions/10685139/simplexmlelement-object)

嗨，我想对 XML 文档进行排序 - 我这样做是这样的：

```
public function xsort(&$nodes, $child_name, $order=SORT_ASC)
{
    $sort_proxy = array();

    foreach($nodes as $k => $node) {
        $sort_proxy[$k] = (string) $node->$child_name;
    }

    array_multisort($sort_proxy, $order, $nodes);

} 
```

我得到了`$nodes`变量中的排序数组。在代码中它以这种方式使用：

```
$this->xsort($nodes, 'kategoria_6', SORT_DESC); 
```

当我做 print_r($nodes); 我得到排序视图

```
SimpleXMLElement Object (
  [kategoria_6] => kat4 
  [opis_6] => opis4 
  [img] => slides/slide3.jpg
) 
SimpleXMLElement Object ( 
  [kategoria_6] => kat3 
  [opis_6] => opis3 
  [img] => slides/slide2.jpg 
) 
SimpleXMLElement Object ( 
  [kategoria_6] => kat2 
  [opis_6] => opis2 
  [img] => slides/slide1.jpg 
) 
SimpleXMLElement Object ( 
  [kategoria_6] => kat1 
  [opis_6] => opis1 
  [img] => slides/slide0.jpg 
) 
SimpleXMLElement Object ( 
  [kategoria_6] => kat1 
  [opis_6] => opis1 
  [img] => slides/slide4.jpg 
) 
```

但是当我想将它保存到文件中时，它是未排序的。文件保存代码：

```
$dom = new DOMDocument('1.0', 'utf-8');
foreach ($nodes as $element) {
    $dom = dom_import_simplexml($element)->ownerDocument;
}
$dom->save("c:\\aaa.xml"); 
```

有谁知道为什么它保存未排序？

# java - 如何使用commons math3.0在java中生成直方图数据

> ID：10699490
> 
> 赞同：0
> 
> 时间：2012-05-22T09:42:01.693
> 
> 标签：java, statistics

我想使用 apache commons math 3.0 库从一组数据中生成直方图。我一直在查看他们的文档（[http://commons.apache.org/math/apidocs/index.html](http://commons.apache.org/math/apidocs/index.html)），但找不到。有谁知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:23:00.550

您需要在这里使用频率类，检查 API 文档：http: [//commons.apache.org/math/apidocs/org/apache/commons/math3/stat/Frequency.html](http://commons.apache.org/math/apidocs/org/apache/commons/math3/stat/Frequency.html)

# iphone - 使用ARC时将对象设置为零？

> ID：10699491
> 
> 赞同：6
> 
> 时间：2012-05-22T09:42:01.723
> 
> 标签：iphone, memory, automatic-ref-counting, allocation, viewdidunload

我正在使用`ARC`. 该应用程序是一个基于导航的应用程序，使用`UINavigationController`.

典型的用例是从“主要”`UIViewController`到“次要”`UIViewController`多次，可能多达 100 次。辅助控制器有很多静态的本地 PNG 图像，其中一些是重复的。

我正在分析应用程序，我可以看到，当从“主”控制器转到“辅助”控制器时，它分配了大约 0.8 MB，但是，当按下后退按钮时，它不会释放内存。因此，当我再次访问辅助控制器时，分配了其他 0.8 MB，依此类推...

调试时，我注意到从不调用`viewDidUnload:`辅助`UIViewController`的方法，但我还读到这是我应该将控制器保存的引用设置为零的方法。这样做`viewDidDisappear:`无济于事，因为我希望仅在按下后退按钮时发生这种情况，即从堆栈中弹出控制器时（在堆栈中`viewDidDisappear:`推送另一个控制器时也会调用该方法）。

所以问题是：在哪里我必须这样做？我可以强制调用该方法吗？这种行为是否正常（分析，在“main”->“secondary”->“main”->“secondary”-> ...的一些循环之后分配增加到 20MB）？？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:18:40.970

ARC只是用来减少代码和内部管理内存。有关更多详细信息，请阅读下面的教程，以便您能够更轻松地理解这些概念。

[了解 Objective-C 中的自动引用计数](http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)

我希望这可以帮助你。

# java - Java中的双向地图？

> ID：10699492
> 
> 赞同：103
> 
> 时间：2012-05-22T09:42:03.393
> 
> 标签：java, map, guava, apache-commons

我在 Java 中有一个简单的整数到字符串的映射，但我需要能够轻松地从整数中检索字符串，以及从字符串中检索整数。我试过 Map，但它只能从整数中检索字符串，这是一种方法：

```
private static final Map<Integer, String> myMap = new HashMap<Integer, String>();
// This works one way:
String myString = myMap.get(myInteger);

// I would need something like:
Integer myInteger = myMap.getKey(myString); 
```

有没有正确的方法可以做到双向？

另一个问题是我只有几个不变的值 ( `1->"low", 2->"mid", 3->"high"`，所以不值得去寻求一个复杂的解决方案。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-05-22T09:44:40.333

~~您可以为此使用最近~~重命名为[Guava](https://github.com/google/guava)的 Google Collections API ，特别是[BiMap](https://github.com/google/guava/wiki/NewCollectionTypesExplained#bimap)

> 双映射（或“双向映射”）是一种映射，它保留其值的唯一性以及其键的唯一性。此约束使 bimap 能够支持“反向视图”，这是另一个 bimap，包含与此 bimap 相同的条目，但具有相反的键和值。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-03-21T07:15:48.973

创建 Guava BiMap 并获取其反转值并非易事。

一个简单的例子：

```
import com.google.common.collect.BiMap;
import com.google.common.collect.HashBiMap;

public class BiMapTest {

  public static void main(String[] args) {

    BiMap<String, String> biMap = HashBiMap.create();

    biMap.put("k1", "v1");
    biMap.put("k2", "v2");

    System.out.println("k1 = " + biMap.get("k1"));
    System.out.println("v2 = " + biMap.inverse().get("v2"));
  }
} 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-05-22T09:45:23.220

Java 标准 API 中没有双向映射。您可以自己维护两个地图，也可以使用 Apache Collections 中的[BidiMap](http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/BidiMap.html)。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-11-19T17:12:42.760

您可以将键、值对及其逆对插入映射结构，但必须将 Integer 转换为字符串：

```
map.put("theKey", "theValue");
map.put("theValue", "theKey"); 
```

然后使用 map.get("theValue") 将返回“theKey”。

这是我制作常量映射的一种快速而肮脏的方式，它只适用于少数几个数据集：

*   仅包含 1 对 1 对
*   值集与键集不相交（1->2、2->3 破坏它）

如果你想保留`<Integer, String>`，你可以维护第二个`<String, Integer>`映射来“放置”值 -> 键对。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-05-22T09:45:50.333

Apache commons 集合有一个[BidiMap](http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/BidiMap.html)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-22T09:51:29.720

使用谷歌的[BiMap](https://guava.dev/releases/29.0-jre/api/docs/com/google/common/collect/BiMap.html)

它更方便。

# c++ - 将自定义元数据添加到 jpeg 文件

> ID：10699494
> 
> 赞同：5
> 
> 时间：2012-05-22T09:42:16.950
> 
> 标签：c++, metadata, jpeg

我正在处理一个图像处理项目（C++），我需要在处理完成后将自定义元数据写入 jpeg 文件。我怎样才能做到这一点？有没有图书馆可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T09:49:35.257

如果您在谈论 EXIF 元数据，您可能需要查看[exiv2](http://www.exiv2.org/)，它是一个用于处理 EXIF 元数据的 C++ 库。还有一个名为[libexif](http://libexif.sourceforge.net/)的库，它是用 C语言编写的。

Exiv2 在他们的网站上有一个视图示例，并且 API 有很好的文档记录。

更新：如果您想添加自定义元数据，您可以使用`MakerNote`或`Comment`标签。

Exif 标准：[PDF](http://www.cipa.jp/std/documents/e/DC-008-2012_E.pdf)请参阅第 4.6.5 节 EXIF IFD 属性信息表 7，与用户信息相关的标签。

```
 MakerNote    Type Undefined Count Any
     Comment      Type Undefined Count Any 
```

这意味着您可以将这两个标签用于您想要的任何数据。

# asp.net - ASP.NET 自定义 MembershipProvider 和共享 DbContexts

> ID：10699505
> 
> 赞同：0
> 
> 时间：2012-05-22T09:42:54.397
> 
> 标签：asp.net, entity-framework, asp.net-membership

我在 MVC Web 应用程序中创建了一个自定义 MembershipProvider。我的 GetUser 函数返回我自己的自定义 Employee 类的实例，该类继承自标准 MembershipUser。这使我可以为每个用户提供其他详细信息，例如各种员工详细信息。

```
 public override MembershipUser GetUser(string username, bool userIsOnline)
    {   
        return new ModelRepository().GetModels<Employee>().Where(e => e.UserName == username).FirstOrDefault();
    } 
```

我遇到的问题是，成员资格提供程序生成了我的存储库类的一个新实例（它创建了一个新的 DbContext）来检索 Employee 对象。然后将此 Employee 对象传递给称为 Membership api 的任何请求/控制器操作。

```
Employee currentUser = (Employee)Membership.GetUser(); 
```

该调用请求通常希望在内存中创建一个新对象，比如说一个新的 SicknessRecord 并将之前检索到的用户分配给该记录，然后将其保存到具有**自己的**模型存储库的数据库中。您可能会看到这是怎么回事，框架抱怨说我正在尝试使用最初未检索到的上下文来保存对象（用户）。

我当前的相当老套的解决方案是只使用从 Membership.GetUser 检索到的用户 ID，然后从我当前的模型存储库中重新检索 Employee 对象。

```
newSickness.Employee = this.modelRepository.GetModelById<Employee>(this.me.Id.Value); 
```

我尝试分离 Employee 对象，但它失去了延迟加载的属性，我必须记住尝试再次将其附加到我当前的存储库/上下文。

我还读到让您的自定义成员资格提供程序共享当前请求将使用的相同上下文是很好的。任何想法如何实现这一点，我如何确保会员提供者使用与用户执行控制器操作时产生的上下文相同的上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:00:07.313

您可以为每个控制器拥有一个单独的 DbContext 实例。

```
public class SomeController : Controller
{
    private DbContext context = new DbContext();
    private CustomMembershipProvider membershipProvider = new CutomMembershipProvider(this.context);

    ... Actions ....
} 
```

据我所知，每个控制器一个上下文是很好的做法。

顺便说一句，如果您有多个存储库，请尝试将 UnitOfWork 与 Repository 模式一起使用。

# xcode - 如何在 XCode 使用的钥匙串中设置身份偏好？

> ID：10699507
> 
> 赞同：6
> 
> 时间：2012-05-22T09:43:03.367
> 
> 标签：xcode, build, certificate, code-signing, keychain

XCode 在“构建设置”的“代码签名身份”下有一个“自动配置文件选择器”。

在钥匙串中有 2 个“iPhone 开发者”证书，似乎没有一种方法可以引导 XCode 偏好其中一个。

[Codesign](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/codesign.1.html)列出了以下用于解析身份的规则。

1.  身份首先被认为是钥匙串身份偏好的全名

2.  身份是通过在所有钥匙串中搜索其主题公用名（仅）包含身份的证书来定位的

    *   如果有多个匹配，则操作失败，不进行签名
3.  如果标识正好由 40 个十六进制数字组成，则将其解释为 SHA-1 哈希

“iPhone Developer”上有 2 个部分匹配的事实表明 XCode 具有不同的身份解析方式。

尝试在提示输入“位置（URL）或电子邮件地址”的证书上创建身份首选项。不确定 URL 应指什么或电子邮件。

改为使用“iPhone Developer”作为值（很高兴接受钥匙串），但 XCode 没有选择首选证书。

**有没有办法使用“自动配置文件选择器”，但可以解决“身份偏好”？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-19T11:23:55.737

我想现在为时已晚，但在 Xcode 9 中，在`"Build Settings" -> "Code Signing Identity"`, with`"Code Signing Style"=Manual/Auto`中，现在有两个下拉列表可供您选择，对于两个目标，a) iOS Developer/Distribution 配置文件类型之一，b) KeyChains 的身份对于开发商/分销商。

对我有用的是：

1.  使用相同或两个不同的 Provisioning Profiles 进行调试和发布（从我的开发者帐户网站创建和导出，并在 Xcode 中导入）
2.  设置`"Code Signing Style"`为`"Manual"`
3.  为两个目标选择导入的 PP
4.  将 a) 和 b) 列表设置为其证书包含在 1) 中创建的 PP(s) 中的开发者/分销商身份

现在我可以使用“运行”按钮从 Xcode 正常运行调试目标，同时使用分发 PP 归档和导出发布目标。

# javascript - 使用 Object.defineProperties 提供两个属性

> ID：10699510
> 
> 赞同：1
> 
> 时间：2012-05-22T09:43:21.283
> 
> 标签：javascript, properties, ecmascript-5

我正在尝试创建一个对象。但我不明白为什么我的属性 getter setter 不能简单地调用`this.bar`. 因此，我的 foo 对象似乎最终有两个属性。

这是正确的还是我：

1.  使用defineProperties错误
2.  错过了重点

`foo`使用`bar`属性创建

```
var foo = function ()
{   
    Object.defineProperties(this, {
        bar : {
            get : function () {return this.barVal},
            set : function(value) { this.barVal = value},
            enumerable: true,
            configurable: true
        }
    })
};

var o = new foo();
o.bar = "Hello";
console.log(JSON.stringify(o));

//output {"bar":"Hello","barVal":"Hello"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:51:13.217

JSON.stringify 激活 getter 来解析属性。您的 setter 设置了第二个属性，因此您最终会同时看到这两个属性。您需要的是一种存储 foo.bar 的“内部”值的方法，该值不是 ON foo 本身。

```
function Foo(){
  var secret = {};
  Object.defineProperties(this, {
    bar: {
      get: function( ){ return secret.bar },
      set: function(v){ secret.bar = v },
      enumerable: true,
      configurable: true
    }
  });
}

var foo = new Foo;
foo.bar = 'Hello';
console.log(JSON.stringify(foo)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T05:31:11.080

您正在创建两个属性，一个名为“bar”，另一个名为“barVal”。“bar”由 defineProperties 调用创建，“barVal”由 set 函数中的 this.barVal 赋值创建。它们的可枚举属性都有一个真值（您为 varVal 显式设置它，赋值为 barVal 隐式设置它），因此它们都由 JSON.stringify 列出。

如果您打算将 barVal 视为未显示在 JSON 或 for-in 枚举中的私有值，则可以将其可枚举属性显式设置为 false：

```
var foo = function ()
{   
    Object.defineProperties(this, {
        bar : {
            get : function () {return this.barVal},
            set : function(value) { this.barVal = value},
            enumerable: true,
            configurable: true
        },
        barVal : {
            value: undefined,
            enumerable: false, writable: true, configurable: true
        }
    })
}; 
```

# r - as.POSIXct/as.POSIXlt 和 strptime 之间的区别，用于将字符向量转换为 POSIXct/POSIXlt

> ID：10699511
> 
> 赞同：106
> 
> 时间：2012-05-22T09:43:21.597
> 
> 标签：r, date, time, benchmarking

我在这里关注了一些关于如何将字符向量转换为日期时间类的问题。我经常看到两种方法，strptime 和 as.POSIXct/as.POSIXlt 方法。我查看了这两个功能，但不清楚有什么区别。

## 字符串时间

```
function (x, format, tz = "") 
{
    y <- .Internal(strptime(as.character(x), format, tz))
    names(y$year) <- names(x)
    y
}
<bytecode: 0x045fcea8>
<environment: namespace:base> 
```

## as.POSIXct

```
function (x, tz = "", ...) 
UseMethod("as.POSIXct")
<bytecode: 0x069efeb8>
<environment: namespace:base> 
```

## as.POSIXlt

```
function (x, tz = "", ...) 
UseMethod("as.POSIXlt")
<bytecode: 0x03ac029c>
<environment: namespace:base> 
```

做一个微基准测试，看看是否存在性能差异：

```
library(microbenchmark)
Dates <- sample(c(dates = format(seq(ISOdate(2010,1,1), by='day', length=365), format='%d-%m-%Y')), 5000, replace = TRUE)
df <- microbenchmark(strptime(Dates, "%d-%m-%Y"), as.POSIXlt(Dates, format = "%d-%m-%Y"), times = 1000)

Unit: milliseconds
                                    expr      min       lq   median       uq      max
1 as.POSIXlt(Dates, format = "%d-%m-%Y") 32.38596 33.81324 34.78487 35.52183 61.80171
2            strptime(Dates, "%d-%m-%Y") 31.73224 33.22964 34.20407 34.88167 52.12422 
```

strptime 似乎稍快一些。那么什么给了？为什么会有 2 个类似的功能，或者我错过了它们之间的差异？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-05-22T10:14:26.417

好吧，这些功能做不同的事情。

首先，日期/时间有两个内部实现：`POSIXct`，它存储自 UNIX 纪元以来的秒数（+一些其他数据），以及`POSIXlt`，它存储日、月、年、小时、分钟、秒等的列表。

`strptime`是一个将字符向量（多种格式）直接转换为格式的函数`POSIXlt`。

`as.POSIXlt`将各种数据类型转换为`POSIXlt`. 它试图变得聪明并做明智的事情——就性格而言，它充当了`strptime`.

`as.POSIXct`将各种数据类型转换为`POSIXct`. 它还尝试变得聪明并做明智的事情——在字符的情况下，它`strptime`首先运行，然后进行从`POSIXlt`到的转换`POSIXct`。

更快是有道理`strptime`的，因为`strptime`只处理字符输入，而其他人试图从输入类型中确定使用哪种方法。它也应该更安全一些，因为收到意外数据只会给出错误，而不是尝试做可能不是你想要的智能事情。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-10-27T16:00:37.907

有两种 POSIXt 类型，POSIXct 和 POSIXlt。“ct”可以代表日历时间，它存储了从起源开始的秒数。“lt”或本地时间，将日期保存为时间属性列表（例如“小时”和“星期一”）。试试这些例子：

```
date.hour=strptime("2011-03-27 01:30:00", "%Y-%m-%d %H:%M:%S")

date=c("26/10/2016")

time=c("19:51:30")

day<-paste(date,"T", time)

day.time1=as.POSIXct(day,format="%d/%m/%Y T %H:%M:%S",tz="Europe/Paris")

day.time1

day.time1$year

day.time2=as.POSIXlt(day,format="%d/%m/%Y T %H:%M:%S",tz="Europe/Paris")

day.time2

day.time2$year 
```

# c# - 如何检查计时器触发下一个事件之前还剩多少时间？

> ID：10699517
> 
> 赞同：4
> 
> 时间：2012-05-22T09:43:37.150
> 
> 标签：c#

例如，我已经设置`timer1.Interval`为`5000`并且我想知道在计时器滴答之前这个间隔还有多少。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:01:01.323

> 如何查看定时器时间？

你不能。计时器类无法检查计时器触发前还剩多长时间。您可以做的最好的事情是跟踪计时器上次触发的时间并计算自己在下一次滴答之前还剩多长时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-21T11:57:36.110

```
 DateTime MainTimer_last_Tick = DateTime.Now;
        System.Windows.Forms.Timer timer_Calc_Remaining;
        timer_Calc_Remaining.Enabled = true;
        timer_Calc_Remaining.Interval = 100;
        timer_Calc_Remaining.Tick += new System.EventHandler(this.timer_Calc_Remaining_Tick); 
```

在主计时器开始或打勾时：

```
 timer_Main.Enabled = true;
        MainTimer_last_Tick = DateTime.Now;

 private void timer_Calc_Remaining_Tick(object sender, EventArgs e)
        {
            int remaining_Milliseconds = (int)(MainTimer_last_Tick.AddMilliseconds(timer_Main.Interval).Subtract(DateTime.Now).TotalMilliseconds);
.../*
        int newValue = (timer_Main.Interval -remaining_Milliseconds) ;

        progressBar1.Maximum = timer_Main.Interval+1;

        progressBar1.Value = newValue ;*/

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T10:25:03.543

您可以使用间隔为 1000（毫秒）的替代计时器。我不认为 1ms 的间隔真的是一个选择，因为这会给系统带来太多压力并且无论如何都不可靠。

每次经过此计时器时，您都可以检查滴答数（这是否总是 1000 的倍数？）并从（或使用模数）5000 中减去它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:48:05.320

> 但我不能：

那是因为小于号出现在等号之前，而不是相反

它`<=`不是`=<`

```
if (timer1.Interval <= 5000)
{
    //do something
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T09:48:57.073

您正在使用不会更改的属性 Interval（它始终为 5000，因此检查它是否小于 5000 是没有意义的）。此外，如果此代码在`Timer1_Tick`函数中，则效率将不高。但是，我认为您需要的代码是：

```
if (timer1.Interval <= 5000)
{
  //do something
} 
```

# c# - 了解虚拟目录消耗的资源

> ID：10699518
> 
> 赞同：0
> 
> 时间：2012-05-22T09:43:40.100
> 
> 标签：c#, iis, resources, application-pool, virtual-directory

我在不同网站的 IIS 上有许多应用程序。其中一些使用 4 个核心，其中一些仅使用 1 个 CPU 核心。为了做到这一点，我分成不同的应用程序池（命名为 4.0Framework_1CPU、3.5Framework_4CPU 等）

我想知道哪个虚拟目录实时消耗了多少内存、CPU、磁盘空间。以及如何以编程方式获取这些信息以发出警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:21:39.647

AFAIK 无法监视单个虚拟目录消耗的资源，但对于运行 .NET Framework 4 的应用程序池，您可以通过启用[AppDomain.MonitoringIsEnabled](http://msdn.microsoft.com/en-us/library/system.appdomain.monitoringisenabled.aspx?queryresult=true)属性来启用对单个应用程序的监视。

对于运行旧版本 .NET 框架的应用程序池，您只能在每个进程（每个应用程序池）的基础上监视资源。为此，您可以使用[System.Web.Management](http://msdn.microsoft.com/en-us/library/system.web.management.aspx)命名空间中的类（尤其是[WebProcessStatistics ），或者从](http://msdn.microsoft.com/en-us/library/system.web.management.webprocessstatistics.aspx)[PerformanceCounter](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)获取有关 ASP.NET的数据。

# joomla - Joomla 媒体管理器无法打开视频文件

> ID：10699519
> 
> 赞同：1
> 
> 时间：2012-05-22T09:43:42.730
> 
> 标签：joomla, joomla2.5

在模块的配置文件中，我将参数设置为

```
 <field
                name="file"
                type="media"
                default="video.mp4"
                directory="videos"
                label="MOD_PLAYER_FIELD_FILE_LABEL"
                description="MOD_PLAYER_FIELD_FILE_DESC"/> 
```

然后我以管理员身份登录，打开模块管理器和该模块。当我单击“文件”字段旁边的选择按钮时，媒体管理器窗口会加载，但它只能查看/选择图像文件。如何使它能够选择视频文件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T15:07:25.707

By default this sadly doesn't work (at least in Joomla 2.5.*). In an older project we had to hack the `com_media` component for this to work. You need to apply the following change

```
diff --git a/administrator/components/com_media/models/list.php b/administrator/components/com_media/models/list.php
index b97a930..ebee3f4 100644
--- a/administrator/components/com_media/models/list.php
+++ b/administrator/components/com_media/models/list.php
@@ -156,7 +156,7 @@ class MediaModelList extends JModel
                        default:
                            $tmp->icon_32 = "media/mime-icon-32/".$ext.".png";
                            $tmp->icon_16 = "media/mime-icon-16/".$ext.".png";
-                           $docs[] = $tmp;
+                           $images[] = $tmp;
                            break;
                    }
                } 
```

Video and audio files will now show up using the "media" type, albeit with a broken image icon (as they have none). This patch could obviously be improved further by adding the necessary image information manually.

# javascript - IE7 新函数返回对象而不是函数

> ID：10699521
> 
> 赞同：2
> 
> 时间：2012-05-22T09:43:44.640
> 
> 标签：javascript

什么会导致 IE7 中出现这种行为？我无法在 jsfiddle 上重现此问题...

```
var func=new Function('arg','return 2*2;');
alert(typeof func); 
```

返回对象。

我完全糊涂了。

如何调试这个问题？如何弄清楚为什么 new Function 返回一个对象？

**更新**

不应该是这样吧？或者我只是不明白什么？对我来说，它看起来像 Windows 8 错误。

[https://www.dropbox.com/s/mhyuab3mhj2yu59/ie7_windows8_bug.png](https://www.dropbox.com/s/mhyuab3mhj2yu59/ie7_windows8_bug.png)

**更新**

这取决于 IE8，在 IE9 中它消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:55:10.890

我无法在我的机器上复制它，你的权利 - 这是错误的。根据[EMCA 规范](http://ecma262-5.com/ELS5_HTML.htm#Section_11.4.3)，任何`callable`应该返回`function`给操作员的东西。面对这个问题，如果你想测试给定变量是否是一个函数，你可以使用：`typeof`

```
function isFunction(func){
    return  typeof func === 'function' ||
           (typeof func === 'object' && func instanceof Function); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:49:39.763

通过此解决方案解决的问题：

```
var func=eval('(function(){return function(){ your code here }})()'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:11:16.873

扩展[Mark Rhodes 的](https://stackoverflow.com/a/10699692/887539)答案

```
function realType( t ) {
    return Object.prototype.toString.call(t).slice(8, -1);
}; 
```

* * *

```
var func=new Function('arg','return 2*2;');

alert( realType(func) ); // Function/Object
alert( realType([]) ); // Array
alert( typeof [] ) // object

alert( realType(new Date) ); // Date
alert( typeof (new Date) ); // object 
```

# command-line - 在 makefile 中定义默认值

> ID：10699523
> 
> 赞同：23
> 
> 时间：2012-05-22T09:43:53.407
> 
> 标签：command-line, makefile

我的makefile有这样的行

```
 CFLAGS = -c -g -D OPT1 -D OPT2 
```

我想像这样通过命令行传递这个参数

```
 make ARG1= OPT1 ARG2 =OPT2 
```

如果我不通过命令行传递这些参数，我希望 makefile 使用 makefile 中定义的默认值。我怎么做 ？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-22T09:48:10.123

只需在 makefile 中执行以下操作：

```
OPT1 = MY_OPT_1 # defaults
OPT2 = MY_OPT_2

CFLAGS = -c -g -D $(OPT1) -D $(OPT2) 
```

然后在命令行上：

```
$ make -e OPT1=SOME_OTHER_OPT1 OPT2=SOME_OTHER_OPT2 
```

当您为`OPT1`和/或`OPT2`在命令行上指定 falues 时，这些将覆盖 makefile 中的默认值。

请注意，在大多数情况下，您可能希望`-e`选项 with强制使用新的,值`make`重新构建所有内容。`OPT1``OPT2`

# iphone - 如何在右侧的tableviewcell中显示徽章计数

> ID：10699524
> 
> 赞同：0
> 
> 时间：2012-05-22T09:44:05.367
> 
> 标签：iphone, objective-c

我想在 tableview 单元格右侧显示徽章计数如果数组有值然后徽章应该计数如果删除行然后徽章应该从单元格中隐藏如何做到这一点我尝试了很多但它不能正常工作。

在我的情况下，我面临的问题是 mu 徽章计算价值，但是当我删除行时，时间徽章没有隐藏。如果停止应用程序并再次运行，那么徽章不会显示，因为数组中没有值，但它不对我只想要运行时间如果数组中没有数据，徽章应该从单元格中隐藏请查看这个链接，我问同样的问题

[https://stackoverflow.com/questions/10547941/how-to-create-badge-icon-on-tableview-cell-in-iphone](https://stackoverflow.com/questions/10547941/how-to-create-badge-icon-on-tableview-cell-in-iphone)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:50:56.400

在这种情况下，您将需要创建一个带有子视图和标签的自定义表格单元格。然后，您可以使用代码相应地分配值。

请检查[此处提供的解决方案](https://stackoverflow.com/questions/731185/iphone-badge-to-uitableviewcell)

# vba - 多个文本框和查找

> ID：10699530
> 
> 赞同：0
> 
> 时间：2012-05-22T09:44:43.347
> 
> 标签：vba, ms-access

我目前正在尝试改进我从工作中的前任那里继承的 Access Database VBA。我已经摆脱了一种特定的形式。

我有一个表单，目前只是一个包含 32 个单独文本框的大型表单，每个文本框后面都有相同的代码，但每个文本框重复相同的代码，只是对文本框的引用在每个文本框发生变化。

```
Private Sub Cand_No2_AfterUpdate()
Cand_Name2 = DLookup("[Name]", "[qryExamAbsences]", "[Cand_No] = Cand_No2")
End Sub 
```

然后一旦按下按钮

```
If Not IsNull([Cand_Name1]) Then
 Rope = Rope & " Or Cand_No = " & [Cand_No1]
End If 
```

（If 语句包含在按钮 mousedown 事件中。）

出现在每个文本框上，然后该文本框会过滤为办公室打印而打印的报告。这有很多问题，但我要解决的主要问题是条目数量有上限，如果我需要过滤超过 32 个，我需要删除文本并重新开始。

有没有办法将所有这些组合成一段代码，在需要时创建文本框？

编辑。

我找到了一种方法给用户留下这样的印象，即在每个条目之后创建文本框，这从用户的角度改进了表单（不再有 32 个文本框或必须向下滚动到打印按钮。）但是这个仍然没有解决代码混乱的问题，因为我不得不再次为每个框重复额外的代码，它也给我留下了最多 32 个条目。

新代码如下：

```
If Not IsNull(Cand_Name1.value) Then
 Cand_No2.Visible = True
 Cand_Name2.Visible = True
 cmdPrint.Top = 2500
 cmdPrint.Left = 2500
 DoCmd.MoveSize 1440, 2201, , 4000
Else
 Cand_No2.Visible = False
 Cand_Name2.Visible = False
 cmdPrint.Top = 2000
 DoCmd.MoveSize 1440, 2201, , 3500
End If 
```

本质上使下一个文本框可见并向下移动打印按钮以为新文本框腾出空间。它还扩大了窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:43:23.173

你能不能只有 2 个文本框，一个用于 CAND_NO，另一个用于 CAND_NAME，然后在这两个框旁边放置一个 ADD CAND_NO 按钮。

创建一个列表框，在他们按下添加按钮后列出每个 CAND_NO / CAND_NAME，这样他们就可以看到他们到目前为止添加的内容。然后遍历您的列表框以构建您的绳索，或者将您的绳索作为表单上的全局变量并在它们添加数字时构建它，或者存储在隐藏的文本框中，如果您不喜欢，它们会在添加数字时存储值全球的。

# android - android中的双击事件

> ID：10699531
> 
> 赞同：4
> 
> 时间：2012-05-22T09:44:45.833
> 
> 标签：android

我需要在双击屏幕上烤点东西。我尝试了以下代码。但它不起作用。双击没有吐司。这些代码有什么问题？

```
package a.b.c;

import android.app.Activity;
import android.os.Bundle;
import android.view.GestureDetector.OnDoubleTapListener;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.widget.Toast;

public class SampleActivity extends Activity implements OnDoubleTapListener,OnGestureListener
{
        @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public boolean onDoubleTap(MotionEvent e) {
        if(e.getAction()==1)
        {
        Toast.makeText(getBaseContext(), "onDoubleTap", Toast.LENGTH_LONG).show();
        }
        return true;
    }

    @Override
    public boolean onDoubleTapEvent(MotionEvent e) {
        if(e.getAction()==1)
        {
        Toast.makeText(getBaseContext(), "onDoubleTapEvent", Toast.LENGTH_LONG).show();
        }
        return true;
    }

    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        if(e.getAction()==1)
        {
        Toast.makeText(getBaseContext(), "onSingleTapConfirmed", Toast.LENGTH_LONG).show();
        }
        return true;
    } 
```

我还实现了 OnGestureListener 方法。但是没有效果。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:00:19.130

你在哪里设置双击监听器？尝试将此添加到您的 oncreate 中，看看它是否可以解决问题

```
GestureDetector detector = new GestureDetector(this, this); 
```

# haskell - 为什么 GHC 抱怨非详尽的模式？

> ID：10699532
> 
> 赞同：29
> 
> 时间：2012-05-22T09:44:50.267
> 
> 标签：haskell, ghc, non-exhaustive-patterns

当我用 GHC 编译以下代码时（使用`-Wall`标志）：

```
module Main where

data Tree a = EmptyTree | Node a (Tree a) (Tree a) deriving (Show)

insert :: (Ord a) => a -> Tree a -> Tree a
insert x EmptyTree = Node x EmptyTree EmptyTree
insert x (Node a left right)
    | x == a = Node a left right
    | x < a = Node a (insert x left) right
    | x > a = Node a left (insert x right)

main :: IO()
main = do
    let nums = [1..10]::[Int]
    print . foldr insert EmptyTree $ nums 
```

GHC 抱怨模式匹配`insert`并不详尽：

```
test.hs|6| 1:
||     Warning: Pattern match(es) are non-exhaustive
||              In an equation for `insert': Patterns not matched: _ (Node _ _ _) 
```

为什么 GHC 会发出此警告？很明显，GHC 抱怨的模式是在`insert x (Node a left right)`.

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-22T12:39:26.573

这是因为模式匹配不完整。不能保证`x==a`、`x<a`或之一`x>a`成立。例如，如果类型是`Double`并且`x`是 NaN，那么它们都不是`True`.

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-05-22T10:03:27.267

Riccardo 是正确的，GHC 并没有推断出你的警卫不可能都是假的。所以请接受他的回答。

我要跑题了，谈谈编码风格。

您不使用的动机`otherwise`可能是它看起来难看：

```
insert :: (Ord a) => a -> Tree a -> Tree a
insert x EmptyTree = Node x EmptyTree EmptyTree
insert x (Node a left right)
    | x == a    = Node a left right
    | x < a     = Node a (insert x left) right
    | otherwise = Node a left (insert x right) 
```

看着这段代码，人类读者必须向自己确认最终的守卫恰好接受了那些`x > a`.

我们可以改为这样写：

```
insert :: (Ord a) => a -> Tree a -> Tree a
insert x EmptyTree = Node x EmptyTree EmptyTree
insert x (Node a left right) = case x `compare` a of
    EQ -> Node a left right
    LT -> Node a (insert x left) right
    GT -> Node a left (insert x right) 
```

返回的`Ordering`类型`compare`只有、 和三个值`EQ`，因此 GHC 可以确认您已经涵盖了所有可能性，并且人类读者可以很容易地看到您已经正确地涵盖了它们。`LT``GT`

这也是更高效的代码：我们调用`compare`一次，而不是调用`==`然后可能也调用`<`。

现在我要离题一些，谈谈懒惰。

您可能还编写了一个类似的函数：

```
contains :: (Ord a) => a -> Tree a -> Bool
contains _ EmptyTree = False
contains x (Node a left right) = case x `compare` a of
    EQ -> True
    ... 
```

当 时`x == a`，您需要知道树使用`Node`构造函数，并且它的第一个参数等于`x`。您不需要知道任何一个子树是什么。

但现在回头看看我对`insert`上面的定义。当它给出的树是 a`Node`时，它总是返回 a ，它`Node`的第一个参数是 always `a`。但它并没有预先说明：而是评估`x `compare` a`.

我们可以重写`insert`以尽可能晚地执行比较：

```
insert :: (Ord a) => a -> Tree a -> Tree a
insert x EmptyTree = Node x EmptyTree EmptyTree
insert x (Node a left right) = Node a newLeft newRight
  where comparison = x `compare` a
        newLeft  = if comparison == LT then insert x left  else left
        newRight = if comparison == GT then insert x right else right 
```

现在我们`Node a`尽快返回该位 --- 即使比较抛出错误！--- 我们仍然最多执行一次比较。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-05-22T09:51:20.823

GHC 无法推断出你的三个后卫是否`insert x (Node a left right)`覆盖了所有可能的情况，因此不会有任何身体可以关联`insert x (Node a left right)`。尝试用（的同义词）替换最后`x > a`一个`otherwise`条件`True`。但是，在这种特定情况下，守卫确实不能涵盖所有情况，请参见augustss关于双数的示例。

# pic - PIC 16F88 ADC 示例？

> ID：10699535
> 
> 赞同：0
> 
> 时间：2012-05-22T09:44:56.620
> 
> 标签：pic, microchip

所以我有一个 PIC 16F88，我设法用它做了几件事，但现在我想知道如何进行模数转换？

我在互联网上尝试了很多例子，但没有成功:(如果有人能说明如何使用 ADCON0/1 和类似的东西，我将不胜感激。

非常感谢。

编辑：这是我的代码：

```
START
    banksel TRISA
    clrf    TRISB
    movlw   0xff
    movwf   TRISA
    movlw   b'11000111'
    movwf   OPTION_REG
    movlw   b'00000001'
    movwf   ADCON1
    banksel PORTB
    clrf    PORTB   
LOOP
    btfss   PIR1,ADIF
    goto    LOOP
    bsf ADCON0,GO   
WAIT
    btfsc   ADCON0,GO
    goto    WAIT
    movf    ADRESH,W
    movwf   PORTB,W
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:06:38.070

从 PIC 数据表：

> ADRESH:ADRESL 寄存器包含 A/D 转换的 10 位结果。当 A/D 转换完成时，结果被装入该 A/D 结果寄存器对，GO/DONE 位（ADCON0<2>）被清零，A/D 中断标志​​位 ADIF 被置位。A/D 模块的框图如图 11-1 所示。
> 
> 根据需要配置 A/D 模块后，**必须在开始转换之前获取所选通道。** 模拟输入通道必须选择其对应的 TRIS 位作为输入。要确定采样时间，请参见第 11.1 节。经过这段采集时间后，可以开始 A/D 转换。进行 A/D 转换应遵循以下步骤：
> 
> 1.  配置 A/D 模块： • 配置模拟引脚/电压基准/和数字 I/O (ADCON1) • 选择 A/D 输入通道 (ADCON0) • 选择 A/D 转换时钟 (ADCON0) • 打开 A/D 模块(ADCON0)
> 2.  配置 A/D 中断（如果需要）： • 清除 ADIF 位 • 设置 ADIE 位 • 设置 GIE 位 **3。等待所需的采集时间。**
> 3.  开始转换： • 设置 GO/DONE 位 (ADCON0)
> 4.  等待 A/D 转换完成，通过以下方式之一： • 轮询 GO/DONE 位以清除或 • 等待 A/D 中断
> 5.  读取 A/D 结果寄存器对 (ADRESH:ADRESL)，如果需要，清除位 ADIF。
> 6.  对于下一次转换，根据需要转到第 1 步或第 2 步。每个位的 A/D 转换时间定义为 TAD。在下一次采集开始之前，至少需要等待 2TAD。

在开始转换之前，您无需等待采集时间。其他一切似乎都是正确的。

# soundcloud - Soundcloud 自定义播放器仅适用于 soundcloud？

> ID：10699536
> 
> 赞同：1
> 
> 时间：2012-05-22T09:45:04.227
> 
> 标签：soundcloud

是仅适用于 soundcloud mp3 的自定义播放器，还是可以将播放器用于任何项目，例如从服务器播放您自己的 mp3 文件。

谢谢帕斯卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:55:18.013

为了使用 Soundcloud 播放器播放音频，您必须创建一个 Soundcloud 帐户并将您的音乐上传到您的“自己的”帐户。

但是，如果这恰好是您的意思，您实际上可以自定义您的播放器。通过连接到 Soundcloud API，该 API 然后从 Soundcloud 返回数据，然后。您使用 CSS/ 来设置输出结果的样式。

希望我能帮上忙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T18:07:41.720

它只能与 SoundCloud 上的音频一起使用。

# php - 使用关联数组在 PHP 中准备的 PDO 语句会产生错误的结果

> ID：10699543
> 
> 赞同：1
> 
> 时间：2012-05-22T09:45:23.907
> 
> 标签：php, pdo, associative-array, insert-update

我正在开发一个非常小的 PHP 和 MySQL 应用程序。我有一个名为 User 的类，用于操作数据库中的用户数据，其中包含一个 createUser 方法，如下所示：-

```
/**
* Creates a new user record in the users table for a new user
*   
* @return void
*/
public function createUser($user_id, $user_name, $location_id) {

    // query to execute
    $query = "INSERT INTO 
                      users(user_id,user_name,location_id)
                      VALUES(:id,:name,:location)";

    // query parameters
    $parameters = array (
        ':id' => $user_id,
        ':name' => $user_name,
        ':location' => $location_id
    );

    $databaseInteractions = new DatabaseInteractions();
    $databaseInteractions->executeUpdate($this->_connection, $query, $parameters);

} 
```

我有另一个类，它将包含与数据库交互的常用方法，称为 DatabaseInteractions，如上面的代码所示。此类包含一个名为 executeUpdate 的方法，用于执行 DML 查询，如下所示：-

```
/**
 * A function for executing DML queries using a prepared statement
 * @param $connection The database connection object
 * @param $query The dml query to be executed
 * @param $parameters The input parameters for the query as a hash 
 */
public function executeUpdate($connection,$query, $parameters) {

    if ($stmt = $connection->prepare($query)) {

        //bind query parameters
        foreach ($parameters as $key => $value) {
            $stmt->bindParam($key, $value);
        }
        //begin transaction
        $connection->beginTransaction();

        $stmt->execute();
        $stmt->closeCursor();

        //commit transaction
        $connection->commit();
    }
} 
```

当我在 User 类中调用 createUser 方法时，如下所示，

```
$user->createUser(3,"NewUser",1); 
```

插入数据库的值如下：-

```
 user_id   user_name  location_id
    1              1             1 
```

我花了一些时间调试代码，但似乎仍然找不到发生这种情况的原因。user_id 是 PK 并且是一个 int。user_name 是 varchar，location_id 是 FK 并且是 int。

我是一名 Java 开发人员，并且是 PHP 的新手，因此任何与 php 命名约定、编码标准等相关的输入都是受欢迎的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:51:06.897

答案：参考语义陷阱。

的第二个参数[`bindParam`](http://php.net/manual/en/pdostatement.bindparam.php)是通过引用传递的：

> 将 PHP 变量绑定到用于准备语句的 SQL 语句中相应的命名或问号占位符。与 PDOStatement::bindValue() 不同，该变量被绑定为引用，并且只会在调用 PDOStatement::execute() 时进行评估。

因此，当执行该语句时，所有三个参数都将评估为最后一个值`$value`是什么——在这种情况下，`1`.

要解决该问题，请使用可选参数 of[`execute`](http://php.net/manual/en/pdostatement.execute.php)而不是显式绑定参数：

```
public function executeUpdate($connection,$query, $parameters) {
    if ($stmt = $connection->prepare($query)) {
        $connection->beginTransaction();

        $stmt->execute($parameters);
        $stmt->closeCursor();

        //commit transaction
        $connection->commit();
    }
} 
```

# java - xacml实现介绍

> ID：10699544
> 
> 赞同：0
> 
> 时间：2012-05-22T09:45:25.850
> 
> 标签：java, xml, xacml

我想知道是否有人可以为想要实施 xacml 的 novoice 指出正确的方向。我已经查看了 suns 在 java 中的 xacml 实现，它非常方便，但它并没有告诉我我需要什么，例如，什么样的服务器、配置和那种性质的东西。如果有人可以帮助我，我真的很感激。预先感谢大家的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:15:45.653

您可以尝试[Enterprise XACML](http://code.google.com/p/enterprise-java-xacml/)，因为它经常更新并且仍然有效。您所说的[SunXACML已过时。](http://sunxacml.sourceforge.net/)您还可以查看[Axiomatics XACML](http://www.axiomatics.com/pure-xacml.html)实现，但它是该公司的特定实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:08:46.500

您可以从此处 [1] 找到 XACML 3.0 的开源实现，称为“Balana”。它是对现已过时的 sun-xacml 的改进。WSO2 Identity Server，它是一个开源的企业级 XACML 引擎 [2]；使用“Balana”作为其内部 XACML 引擎。由于所有资源都是开放的，您可以浏览这些资源并查看它是如何实现的。它会让你很好地理解事物。您还可以从这里找到更多关于 WSO2 Identity Server 的 XACML 引擎的文档 [3]

[1] [https://svn.wso2.org/repos/wso2/trunk/commons/balana](https://svn.wso2.org/repos/wso2/trunk/commons/balana)

[2] [http://wso2.com/products/identity-server/](http://wso2.com/products/identity-server/)

[3] [http://xacmlinfo.com/category/xacml/](http://xacmlinfo.com/category/xacml/)

# android - 为此目的使用日期的最佳方式

> ID：10699546
> 
> 赞同：0
> 
> 时间：2012-05-22T09:45:40.863
> 
> 标签：android, sqlite, date, time, calendar

这是我的第一个应用程序，我需要使用日期

我想使用 sqlite 数据库来存储单击按钮时的当前日期

另外，当单击该按钮时，我希望它在文本视图中显示当前日期

现在我白天是一名 PHP 程序员，但这对我来说是全新的。我很好奇尝试使用 unix 时间戳（int）是否是最好的解决方案，因为我习惯于在 PHP 中存储我的日期。

这是我现在正在做什么的一个例子，以便在单击按钮后显示日期。以下代码在我的按钮的 onClick 函数中：

```
 long currentTimestamp = System.currentTimeMillis();
    Date theDate = new Date(currentTimestamp);
    String showDate = theDate.getDay() + "/" + theDate.getMonth() + "/" + theDate.getYear() + " " + theDate.getHours() + ":" + theDate.getMinutes(); 
```

我开始这样做了，但是，在 android 文档中它告诉我 getDay 和 getMonth 之类的函数已被弃用并使用 Calendar 函数。

现在我当然不想开始使用不推荐使用的函数，因为我对此完全陌生并且不想陷入不良做法，但我在另一个堆栈溢出问题中读到使用日历比其他解决方案慢。

我只是在寻找有关如何以最适当和最有效的方式进行此操作的答案....谢谢。

编辑：

我刚读到这个问题：[How to store and get datetime value in SQLite](https://stackoverflow.com/questions/1409453/how-to-store-and-get-datetime-value-in-sqlite)

其中一个答案建议使用我最初想做的 unix 时间戳。有没有办法通过在显示和存储它时将 unix 时间戳（长）转换为字符串来做到这一点，并且仍然使用日历功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:04:52.310

获取当前时间并将其转换为时间戳：

```
long dateInMillis = Calendar.getInstance().getTimeInMillis(); 
```

转换回来：

```
Calendar date = Calendar.getInstance();
date.setTimeInMillis(dateInMillis); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:49:09.093

使用此代码

```
Calendar month = Calendar.getInstance();

int cal_for_month = month.get(Calendar.MONTH);
int cal_for_year = month.get(Calendar.YEAR);
int cal_for_day = month.get(Calendar.DAY_OF_MONTH); 
```

# c# - 缓慢处理 UserControl

> ID：10699547
> 
> 赞同：1
> 
> 时间：2012-05-22T09:45:46.510
> 
> 标签：c#, .net, winforms, devexpress

我的表单上有两个控件：一个带有工作人员列表的列表框和一个面板，该面板用作显示有关其工作的详细信息（卡片）的容器。当用户点击工人的名字时，我会在面板上显示卡片。卡片是一个用户控件，具有一些相当简单的 UI（2 个组框、3 个文本框和几个标签）和简单的逻辑（设置标签的前景色）。

卡片是在运行时创建的。以前的卡片从面板中删除，新的卡片被添加 - 每个工人的卡片数量是 1 到 4。这里很有趣。一切正常，直到大约。第五次点击工人。似乎 GC 开始了，大约需要两秒钟（0.3sx 数量的先前移除的卡）来处理旧卡（之前移除）并显示新卡。如果以前在工人之间移动效果很好，那么它会变得非常缓慢。经过一番探索，我发现问题在于`Dispose`我使用的控件的方法。通话`base.Dispose()`大约需要 0.3 秒。

这是我的代码：

```
private void ShowCards(List<Work> workItems) {
  var y = 5;
  panelControl1.SuspendLayout();
  panelControl1.Controls.Clear();

  foreach (var work in workItems) {
    var card = new Components.WorkDisplayControl(work);
    card.Top = y;
    card.Left = 10;

    y += card.Height + 5;

    panelControl1.Controls.Add(card);
  }

  panelControl1.ResumeLayout(true);
  Application.DoEvents();
} 
```

到目前为止我已经尝试过：

*   隐藏卡片而不是丢弃 - 在工人之间移动时它工作得更快，但在关闭表格时会支付罚款
*   隐藏卡片并有一个单独的线程来处理它们 - 没有变化
*   添加 10 张卡片并立即处理它们进行测试 - 慢
*   **添加 10 张卡片并立即在构造函数中**处理它们进行测试- 快！
*   用“正常”替换了 DevExpress 控件——没有变化
*   更换工人时手动处理旧卡而不是移除它们 - 工人之间的每一次移动都会变慢：`for (var ix = panelControl1.Controls.Count - 1; ix >= 0; --ix) { panelControl1.Controls[ix].Dispose();}`
*   分析它 - 这就是我在`Dispose`. 我可以追溯到`Control.DestroyHandle`
*   调用我控制`Controls.Clear()`的`Dispose`方法 - 超级奇怪的行为和异常
*   从我的用户控件中删除了所有控件 - 快一点，但仍然很慢
*   `panelControl1`移除和添加卡片时隐藏- 没有变化
*   关闭后台 GC - 没有变化
*   添加卡片`AddRange`

由于从构造函数调用相同的功能时运行速度很快，我相信原因必须在（控制）句柄中的某个地方。

我只是找不到这种奇怪行为的原因。我会很感激任何想法....

更新：在研究 GC 和 Control.Dispose 之间的联系时，我发现[了这个很好的答案](https://stackoverflow.com/a/9432317/820604)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:15:37.007

在 [来自 DevExpress 的支持失败] 之后，我做了一些测试和代码，终于找到了解决方案。

诀窍是在`UserControl`处理之前清除控件。

可以修改`Dispose`UC 上的方法（此解决方案在某些情况下有效，但并非在所有情况下都有效）或隐藏 UC 而不是从面板中删除它并清除它`Controls`

**解决方案1：**

```
protected override void Dispose(bool disposing) {
  if (disposing && (components != null)) {
    components.Dispose();
  }

  Controls.Clear(); // <--- Add this line

  base.Dispose(disposing); 
  } 
```

**解决方案2：**

向 UC 添加新方法：

```
public void ClearControls() {
  Controls.Clear();
} 
```

在我原来的问题中替换这一行

```
panelControl1.Controls.Clear(); 
```

有了这个：

```
for (var ii = panelControl1.Controls.Count - 1; ii >= 0; --ii) { 
  var wdc = panelControl1.Controls[ii] as Components.WorkDisplayControl;
  wdc.Visible = false;
  wdc.ClearControls();
} 
```

它的工作速度（至少）快了 20 倍，这已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:39:20.457

问题的原因与 DevExpress 和标准控件无关。但是，它与创建和销毁控制句柄有关。为了改进您的卡片的实施，尽可能避免这些操作。我建议您对卡片使用缓存：

```
void ShowCards(List<Work> workItems) {
    cardsPanel.SuspendLayout();
    CacheCards(cardsPanel.Controls);
    int y = 5;
    foreach(var work in workItems) {
        var card = GetCardFromCache(work);
        card.Top = y;
        card.Left = 10;
        y += card.Height + 5;
        cardsPanel.Controls.Add(card);
    }
    cardsPanel.ResumeLayout(true);
}
//
Stack<WorkDisplayControl> cache;
void CacheCards(Control.ControlCollection controls) {
    if(cache == null)
        cache = new Stack<WorkDisplayControl>();
    foreach(WorkDisplayControl wdc in controls)
        cache.Push(wdc);
    controls.Clear();
}
WorkDisplayControl GetCardFromCache(Work data) {
    WorkDisplayControl result = (cache.Count > 0) ?
        cache.Pop() : new WorkDisplayControl();
    result.InitData(data);
    return result;
} 
```

优化卡片的下一步是减少使用的控制手柄的总数。由于您使用的是 DevExpress 控件，因此最适合您的选择是[XtraLayoutControl](http://help.devexpress.com/#WindowsForms/CustomDocument3407)。使用 XtraLayoutControl 可以显着减少控制句柄的总数。它只为您描述的布局创建 4 个句柄（在几个组框中带有标签的 3 个编辑器），而不是使用标准控件时的 8 个句柄。XtraLayoutControl 不会为编辑器的标签、组、选项卡创建句柄。另请查看[XtraGrid LayoutView](http://help.devexpress.com/#WindowsForms/CustomDocument3465) - 它提供了使用网格数据绑定架构和卡片布局虚拟化的好处，无需任何额外编码。

# ruby-on-rails - ActiveRecord::UnknownAttributeError：未知属性：audited_changes

> ID：10699548
> 
> 赞同：0
> 
> 时间：2012-05-22T09:45:50.067
> 
> 标签：ruby-on-rails

ActiveRecord::UnknownAttributeError: unknown attribute: audited_changes 当我尝试通过 rails 控制台创建新记录时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:43:42.117

审计表的架构已更改。'changes' 列变成了 'audited_changes' 列。您当前的架构可能与您正在使用的acts_as_audited 版本不匹配。

升级您的acts_as_audited 版本或更正架构:) 为我工作。

# wpf - MVVM 检测视图模型中的 Validation.HasError

> ID：10699550
> 
> 赞同：1
> 
> 时间：2012-05-22T09:45:54.200
> 
> 标签：wpf

我正在使用 MVVM 并使用 IDataErrorInfo 完成大部分验证，并且我的 ViewModel 有一个 IsValid 属性，用于检查每个需要验证的成员的有效性。但是我有几个文本框绑定到不能为空的整数，所以我使用 ValidationRule 来提醒用户（使用比“无法转换值”更友好的消息）如果他们空白该字段显然，属性设置器永远不会被调用，因此不会调用 IDataErrorInfo 代码。

问题是我有一个保存按钮（这是一个 RelayCommand），如果有任何验证错误，我想禁用它。因此，该命令的 CanExecute 会检查 VM 的 IsValid 属性。但显然，如果用户将我的 int 字段置空，则 IDataErrorInfo 对此一无所知，并且当前该按钮不会被禁用。有没有办法让 ViewModel 检测到该错误？

我以为我在这里找到了解决方案 [http://wpfglue.wordpress.com/2009/12/03/forwarding-the-result-of-wpf-validation-in-mvvm/](http://wpfglue.wordpress.com/2009/12/03/forwarding-the-result-of-wpf-validation-in-mvvm/) 但是已经将它翻译成 C# 我可以'让它工作（从未调用强制回调）。我还不太了解依赖属性和对象（对 WPF 来说非常新），这个解决方案对我来说看起来很复杂。

我唯一能想到的就是摆脱验证规则并制作一个可为空的 int 包装器，将 TargetNullValue='' 放入绑定中，然后我可以在 IDataErrorInfo 代码中检查它们是否为空。如果有更好的方法，我宁愿不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:07:57.530

为什么不在视图模型中使用字符串属性而不是 int 和 IDataErrorInfo 验证？在你的保存命令中，如果 IDataErrorInfo 当然没有错误，你可以安全地将你的字符串转换为你的 int 值。将字符串属性与 IDataErrorInfo 一起使用是最简单的方法。

编辑：再想一想，如果您不使用字符串属性，还有另一个问题。假设您有一个 int 属性，并且用户在您的文本框中设置了 10。所以在你的viewmodel中你有10。现在用户删除10并在你的文本框中设置一个abc。由于 bindingconversationexception，您的 viewmodel 仍然得到了 10。这就是为什么我几乎使用字符串属性。公平地说，您可以使用文本框的行为来设置掩码，这样用户就不能输入无效数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:21:33.207

我可以马上想到两个强有力的选择。一种是绑定到 ViewModel 中的字符串属性，而该属性又被编程为仅在确定字符串有效时才解析和存储底层的“int”值。这可确保您的 TextBox 始终成功存储其数据绑定值。

第二种是拦截你的 View 中发生的 ValidationExceptions，通过自定义的 Behavior 将它们存储在你的 ViewModel 中。 [本文](http://www.codeproject.com/Articles/97564/Attributes-based-Validation-in-a-WPF-MVVM-Applicat)基本上将完全按照您在问题中的描述进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:29:47.250

您可以尝试的是`BindingGroups`对整个元素进行验证，而不仅仅是单个属性。例如，我将它用于我们的模态对话框来创建一个项目，其中必须在完成对话框之前设置某些设置。这个[链接](http://blogs.msdn.com/b/vinsibal/archive/2008/08/11/wpf-3-5-sp1-feature-bindinggroups-with-item-level-validation.aspx)很好地解释了它。[这个](http://msdn.microsoft.com/en-us/magazine/ff714593.aspx)也很详细。

# apache - 在 Windows 中将 Apache 连接到 Tomcat

> ID：10699552
> 
> 赞同：0
> 
> 时间：2012-05-22T09:45:58.033
> 
> 标签：apache, tomcat, nosuchmethoderror

如何使用 mod_jk 模块将 Apache 连接到 Tomcat？

```
`May 22, 2012 3:10:54 PM org.apache.tomcat.util.digester.Digester startElement
SEVERE: Begin event threw error
java.lang.NoSuchMethodError: org.apache.tomcat.util.ExceptionUtils.unwrapInvocationTargetException(Ljava/lang/Throwable;)Ljava/lang/Throwable;
    at org.apache.catalina.core.AprLifecycleListener.init(AprLifecycleListener.java:185)
    at org.apache.catalina.core.AprLifecycleListener.isAprAvailable(AprLifecycleListener.java:84)
    at org.apache.catalina.connector.Connector.setProtocol(Connector.java:577)
    at org.apache.catalina.connector.Connector.<init>(Connector.java:69)
    at org.apache.catalina.startup.ConnectorCreateRule.begin(ConnectorCreateRule.java:62)
    at org.apache.tomcat.util.digester.Digester.startElement(Digester.java:1356)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:182)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1302)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2715)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1642)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:576)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:619)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:449)

java.lang.NoSuchMethodError: org.apache.tomcat.util.ExceptionUtils.unwrapInvocationTargetException(Ljava/lang/Throwable;)Ljava/lang/Throwable;
    at org.apache.catalina.core.AprLifecycleListener.init(AprLifecycleListener.java:185)
    at org.apache.catalina.core.AprLifecycleListener.isAprAvailable(AprLifecycleListener.java:84)
    at org.apache.catalina.connector.Connector.setProtocol(Connector.java:577)
    at org.apache.catalina.connector.Connector.<init>(Connector.java:69)
    at org.apache.catalina.startup.ConnectorCreateRule.begin(ConnectorCreateRule.java:62)
    at org.apache.tomcat.util.digester.Digester.startElement(Digester.java:1356)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:182)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1302)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2715)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1642)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:576)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:619)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:449)` 
```

# ruby-on-rails - ActiveRecord::StatementInvalid 在渲染 xml 和使用 :include 方法时列名无效

> ID：10699557
> 
> 赞同：0
> 
> 时间：2012-05-22T09:46:20.067
> 
> 标签：ruby-on-rails, xml, activerecord

我正在使用 rails 2.3.4、rubygems 1.8.24、mac os x lion 和 ruby​​ 1.9.3

我正在尝试将 xml 呈现给一个名为 invoice 的对象。现在，我将发票与 invoice_detail 相关联，所以在我的渲染 :xml 中我写道：

```
format.xml  { render :xml => @invoice.to_xml(:include => :invoice_detail) } 
```

但发生错误：ActiveRecord::StatementInvalid Invalid column name 'invoice_id'

我的数据库中没有 invoice_id 列，现在我希望 rails 能够理解这一点。我希望它查看 inventoryDocId 列，而不是查找不存在的 invoice_id 列。我怎么做？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:59:05.083

创建模型 invoice_detail 时，您必须指定外键列：

```
class InvoiceDetail < ActiveRecord::Base
  belongs_to :invoice, :foreign_key => "inventoryDocId"
end 
```

您在这里有 belongs_to 选项：http: [//api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)

# javascript - 使用 JavaScript 获取 UTF-8 URL 参数

> ID：10699561
> 
> 赞同：1
> 
> 时间：2012-05-22T09:46:38.757
> 
> 标签：javascript, utf-8

我正在尝试获取一个文本输入字段，其值作为在 JavaScript 中执行的 XSL 转换的参数发送。我已经使用 get 方法设置了一个表单，我的脚本获取 URL 参数，如下所示：

```
var word=unescape((''+self.location.search).substring(5)).toLowerCase(); 
```

这工作正常，除非输入包含特殊字符。我已将 HTML 页面的编码设置为 UTF-8，并添加了

```
accept-charset="utf-8" 
```

到表格。我还在脚本标签中指定了 charset="utf-8" ，但它仍然不起作用。我的浏览器 (Firefox) 设置为 UTF-8 作为默认编码。我也尝试过删除 unescape 功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T10:06:35.300

尝试

```
decodeURIComponent() 
```

代替

```
unescape 
```

见@http [://www.w3schools.com/jsref/jsref_decodeuricomponent.asp](http://www.w3schools.com/jsref/jsref_decodeuricomponent.asp)

# java - 使用 JGAP API 时出现 NoClassDefinitionFoundError

> ID：10699562
> 
> 赞同：0
> 
> 时间：2012-05-22T09:46:38.797
> 
> 标签：java

java.lang.NoClassDefFoundError: gnu/trove/THashMap

我正在使用 JGAP API 使用遗传算法解决负载分布问题。我现在面临的问题与 Jgap 并没有真正的关系。我正在尝试创建 WeightedRoulleteSelector 类的对象，但我遇到了异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: gnu/trove/THashMap
at org.jgap.impl.WeightedRouletteSelector.<init>(WeightedRouletteSelector.java:48)
    ....
Caused by: java.lang.ClassNotFoundException: gnu.trove.THashMap
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:248) 
```

不知道如何克服这一点。我需要为此添加jar文件吗？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:48:02.440

您需要在运行时类路径中添加[trove 库](http://findjar.com/jar/trove/trove/1.0.2/trove-1.0.2.jar.html)

# html - Joomla - 在所有页面上显示所有页面的子菜单

> ID：10699570
> 
> 赞同：0
> 
> 时间：2012-05-22T09:47:17.523
> 
> 标签：html, joomla, joomla2.5

我在使用 Joomla 2.5 时遇到问题。

我以与平时不同的方式显示我的导航。我的 mainMenu 和 subMenu 彼此分开放置。（我实现的 jQuery 动画需要）

需要保留 menuStructure 为此我创建了以下菜单：（
*在这个例子中，我只给前 2 个 mainMenuItems 一个 subMenu）*

*   mainMenuItem #1 {subMenuHead #1 的别名}
*   mainMenuItem #2 {subMenuHead #2 的别名}
*   主菜单项 #3
*   主菜单项 #4

子菜单：
*在设置中，只显示第一级儿童！*

*   subMenuHead #1
*   *   子菜单项 #1.1
*   *   子菜单项 #1.2

*   subMenuHead #2
*   *   子菜单项 #2.1
*   *   子菜单项 #2.2

我的问题？**只有**当用户在父页面或它自己的实际页面上时，才会显示
子菜单。即使设置它们也应该显示在所有页面上。

 **例如：
当我导航到 mainMenuItem #3 时，我看不到任何子菜单。
当我导航到 subMenuItem #1.2 时，我只看到 mainMenuItem #1 的 subMenu。
当我导航到 subMenuItem #2.1 时，我只看到 mainMenuItem #2 的 subMenu。

我想要什么：
在所有页面上显示所有子*菜单（菜单分配设置如下）*。

不明白？也许直接链接可能会有所帮助: *)（荷兰文）*：[http ://www.notabilisweb.nl/tenc2012/](http://www.notabilisweb.nl/tenc2012/)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:17:42.917

我假设您使用的是默认的 Joomla 菜单模块。在您用来显示子菜单的模块中，您应该确保“显示子菜单项”设置为“是”。**

# java - 我无法从 Java 中的数组列表中删除最后一个元素

> ID：10699571
> 
> 赞同：0
> 
> 时间：2012-05-22T09:47:21.707
> 
> 标签：java, arrays

我的程序包含 3 个类 Student 、 Aplt 和 Aplt3 类

* * *

```
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;

public class Student {

    String name;
    int mark;

    Student(String name, int mark) {
        this.name = name;
        this.mark = mark;
    }
} 
```

## 带构造函数的学生班

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.TextFiEld;
import java.awt.event.ActioNevent;
import java.awt.event.ActionListener;

public class Aplt extends Applet {

    TextField tf[] = new TextField[2];
    Student prs[] = new Student[0];
    ActionListener ins;

    public void init() {
        tf[0] = new TextField("name?", 10);
        tf[1] = new TextField("mark", 5);
        add(tf[0]);
        add(tf[1]);
        tf[1].addActionListener(ins = new Ins());
    }

    class Ins implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            String n = tf[0].getText();
            int nt = Integer.parseInt(tf[1].getText());
            Student help[] = new Student[prs.length + 1];
            System.arraycopy(prs, 0, help, 0, prs.length);
            help[help.length - 1] = new Student(n, nt);
            prs = help;
            tf[0].setText("next name");
            tf[1].setText("next mark");
            repaint();
        }
    }

    public void paint(Graphics g) {
        for (int i = 0; i < prs.length; i++) {
            g.drawString(prs.name, 10, 50 + 12 * i);
            g.drawString(prs.mark + "", 130, 50 + 12 * i);
        }
    }
} 
```

## 这是aplt类。类列出了我们给定的名称和标记

```
import java.applet.Applet;
import java.awt.Button;
import java.awt.event.*;

public class Aplt3 extends Aplt {

    Button b1, b2;

    public void init() {
        super.init();
        b1 = new Button("remove");
        b1.addActionListener(new B1());
        add(b1);
    }

    class B1 implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            int i;
            for (i = 0; i < prs.length; i++) {
                Student help[] = new Student[prs.length - 1];
                System.arraycopy(help, 0, help, 0, help.length);
            }
            repaint();
        }
    }
} 
```

aplt3 类。在这里，当我单击删除按钮时，我想删除数组的最后一个元素，但它没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:01:25.880

这在我看来非常可疑：

```
for ( i=0 ; i<prs.length; i++) { 
Student help[] = new Student[prs.length-1]; 

System.arraycopy(help, 0, help, 0, help.length); 

} 
```

您将数组帮助复制到自身并使用数组的完整大小。此外，您在一个看起来不太好的循环中执行此操作。我认为你所有的寻找都是这样的：

```
Student help[] = new Student[prs.length-1]; 
System.arraycopy(prs, 0, help, 0, help.length); 
```

并且根本没有循环。确保prs不为空，否则会遇到问题。

顺便说一句，括号表示“数组”而不是“ArrayList”。An[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)是一个 Java 集合类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:06:34.940

这是您用来添加学生的代码：

```
Student help[] = new Student[prs.length+1]; 
System.arraycopy(prs, 0, help, 0, prs.length); 
help[help.length-1]= new Student (n,nt); 
prs=help; 
```

只需使用相同的想法删除一个：

```
Student help[] = new Student[prs.length-1]; 
System.arraycopy(prs, 0, help, 0, help.length); 
prs=help; 
```

# java - Best way to define Logger instance in the class

> ID：10699573
> 
> 赞同：2
> 
> 时间：2012-05-22T09:47:23.093
> 
> 标签：java, logging, log4j, slf4j

I am looking at some code and have seen a lot of way to define the log instance in the class.here are few of them

```
protected static final Logger LOG
final Logger LOG 
```

few have

```
protected static final Logger log
final Logger log 
```

this got me all confused as some have defined it as static final and protected where as some defined it as only final, few have declared the variable in all caps and some is normal form.

Can any one have idea what is the proper way for declaration or its a matter of personal choice or project specific decision?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:53:18.987

i always go for

`private static final Logger logger.`

The reason being that it should not be accessible to any class extending this class (as it would be with protected). The exteneding class should define it's own logger.

Using default (no protected/private/public) is even worse as it allows classes in the same package or subclasses to access the logger.

As for the comment about about using protected to avoid warnings - that is just lazy and bad coding. Warnings are there for a reason, they don't block compilation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T06:34:15.893

The best way is work without such a variable in every class, but use a static utility wrapper around slf4j from [jcabi-log](http://log.jcabi.com/):

```
Logger.debug(this, "some variable = %s", value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:57:21.827

I also use

`private static final Logger logger = Logger.getLogger(MyClass.class)`.

The only reason to use non-static declaration:

`private final Logger logger = Logger.getLogger(getClass())`

is that it can be safely copy/pasted from one class to another without mistakes. Very often you copy-paste or refactor your classes and then use `Logger.getLogger(One.class)` inside class `Two` that may be confusing when configuring logger for debugging.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:31:29.797

If I understood you correctly, what confuses you is:

1.  the first example's variable name is uppercase: `LOG`.
2.  the second example's variable name is lowercase: `log`.
3.  In one case it's declared simply as a `final` type variable, whereas in the other it's declared as a `protected static final` type variable.

If so,

`LOG` and `log` are exactly the same. However, you should know it is common practice for programmers to declare their constants in uppercase. The `final` keyword in Java defines a variable which you want to remain constant. So again, it is not required by the compiler to write your constants in uppercase, but it is common practice to do so - that's why you see some programmers use lowercase and others uppercase; it is a matter of preference.

The `protected` keyword in Java means you want the variable to be accessible by not only the methods of the class, but any methods of any subclass that inherits from it.

The static keyword in Java, when applied to variables/fields, states that these fields can only be referenced by static methods.

So,

`protected static final Logger LOG` means `LOG` will be a constant variable and will not change, and it can be accessed by static methods of this class, which can in turn be accessed by objects of any class that inherits from this class.

And,

`final Logger LOG` means `LOG` will be a constant variable and will not change, and it can be accessed by ANY method in the PACKAGE - it does not matter if inheritance is present or not.

Like the others, I would go with `private static final logger LOG` as well.

Please read the following documentation on Java Access Controls for a deeper understanding of what's going on:

[Access Controls in Java](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

Hope this helps you.

# delphi - 通过 AT 命令发送短信行为怪异

> ID：10699574
> 
> 赞同：6
> 
> 时间：2012-05-22T09:47:23.167
> 
> 标签：delphi, sms, serial-port

我正在使用 ComPort 组件通过调制解调器发送 SMS 消息，问题是有时我会收到短信，有时我会收到短信正文中的 at 命令。

这是我的代码：

```
procedure SendSmsCosmote(numar,text : string);
const
  buf : Byte = 26;
begin
  Form1.ComPort1.WriteStr('AT+CMGF=1'+#13#10);
  Form1.ComPort1.WriteStr('AT+CMGS="'+ numar + '"'+#13);
  Form1.ComPort1.WriteStr(text);
  Form1.ComPort1.Write(buf,1);
end; 
```

我究竟做错了什么？为什么当我从调制解调器读取时，我得到了我在 tx 线上发送的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:28:24.877

尝试在命令之间添加轻微的延迟（或等待调制解调器回复，通常是“OK”）。

# c# - 为什么 Random() 在 .Net 中以这种方式实现？

> ID：10699579
> 
> 赞同：2
> 
> 时间：2012-05-22T09:47:43.150
> 
> 标签：c#, .net, random

我最近在这里回答了一个问题，由成员@dtb 编辑。

[在c#中用0-9之间的唯一随机数填充数组](https://stackoverflow.com/questions/10688044/filling-a-array-with-uniqe-random-numbers-between-0-9-in-c-sharp/10688068#10688068)

问题涉及使用 Random() - 并且说成员编辑了我的答案以避免这种[常见的陷阱](https://stackoverflow.com/questions/767999)（正如他所说）

我的原始代码孤立地不容易受到此问题的影响，如下所示：

```
public void DoStuff()
{
    var rand = new Random();
    while() {} //Inner loop that uses 'rand'
} 
```

答案已被编辑，因为它的意图似乎是在循环中调用该函数 - 这会使代码易受攻击 - 它本质上被更改为：

```
public void DoStuff(Random R)
{
    while() {} //Inner loop that uses 'rand'
} 
```

我的直接想法是——这只是将维护 Random 实例的负担推到了更高的堆栈上——如果有问题的程序员不理解它是如何实现的，他们仍然会陷入这个陷阱。

我想我的问题是 - 为什么 .Net 中的 Random() 不以与 Javascript 中相同的方式实现，例如 - 使用一个静态的全局 Random() （比如说，每个 AppDomain？）？自然地，您仍然可以提供更明确的重载/方法，将当前时间用作种子，用于需要控制种子的极少数情况。

当然，这将避免这个非常常见的陷阱。谁能告诉我.Net方法的好处？

编辑：我知道控制种子很重要 - 但是，*默认情况下*强制执行似乎是一个奇怪的选择。如果有人想控制种子，他们很可能知道自己在做什么。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T09:56:10.063

因为这种方式可以控制多个随机生成源。通过为每个实例设置相同的种子，您可以根据需要生成相同的序列。有时您不希望其他操作影响您的数字流。

想想一个游戏：每一个随机都是从一个种子数产生的，所以如果你保存玩家输入和随机种子，你就可以从头到尾重现整个游戏。但是，如果您在播放过程中生成随机（例如粒子）或其他不相关但随机的东西，您也不想保存这些。最简单的方法是声明两个随机的，一个用于重要的事情，另一个用于其他所有事情。但这只是一个例子。

因此，您可以根据需要自由声明随机序列，如果您想以这种方式使用它，则无需使用技巧。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T09:56:20.843

.NET 解决方案比涉及单个全局生成器的解决方案更灵活。它允许应用程序的每个部分创建和使用独立的可重复伪随机数序列，这对于调试目的至关重要。开始调试依赖伪随机数的代码并不好玩；当从代码的不同部分访问同一个生成器时，它就变得不可能了。

同时，如果您想拥有 的共享实例`Random`，只需几行代码即可轻松地将其提供给您的应用程序：

```
// !!! This is not thread safe!!!
static class RandomHelper {
    private static readonly Random rnd = new Random();
    public static Random Instance {get { return rnd; } }
} 
```

# apache - 阿帕奇档案 Maven

> ID：10699581
> 
> 赞同：-6
> 
> 时间：2012-05-22T09:47:49.037
> 
> 标签：apache, maven, archiva

无法从中央 Maven 存储库下载工件。

```
<mirrors>
    <!-- mirror
     | Specifies a repository mirror site to use instead of a given repository. The repository that
     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used
     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.
     |
    <mirror>
      <id>mirrorId</id>
      <mirrorOf>repositoryId</mirrorOf>
      <name>Human Readable Name for this Mirror.</name>
      <url>http://my.repository.com/repo/path</url>
    </mirror>
     -->
    <mirror>
        <id>internal</id>
        <name>Proxy Cache - Internal Repository</name>
        <url>http://localhost:8080/archiva/repository/internal</url>
        <mirrorOf>*</mirrorOf>
    </mirror>

  </mirrors> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:51:36.040

请添加信息，例如错误日志，以及您真正需要的信息！

首先，您归档存储库是否需要凭据。如果为真，请考虑像这样添加它们：

```
 <!-- servers
   | This is a list of authentication profiles, keyed by the server-id used within the system.
   | Authentication profiles can be used whenever maven must make a connection to a remote server.
   |-->
  <servers>
        <server>
            <id>internal</id>
            <username>username</username>
            <password>password</password>
        </server>
  </servers> 
```

# netlogo - 为 NXT 砖分组 RGB 颜色

> ID：10699593
> 
> 赞同：0
> 
> 时间：2012-05-22T09:48:30.143
> 
> 标签：netlogo, lejos-nxj, mindstorms

我正在尝试在 netlogo 中为 Nxt 砖编写扩展。为了连接砖块，我使用的是 Lejos。我的颜色传感器有问题。我想编写一个简单的方法，将传感器颜色作为数字返回，例如黄色：1、红色：2 等。但是传感器电机总是在同一表面上返回不同的 RGB 颜色。例如，我把它放在一张黄纸上，rgb 颜色是：[236 189 104]，[247 202 108].. 如果它返回相同表面颜色的唯一 RGB 数字，我会根据 RGB 颜色范围对它们进行分类并给出每种颜色的唯一编号。你知道我该怎么做吗？此外，它不会在不同的表面上运行。只为我的纸张颜色（黄色、蓝色、绿色）这样做就足够了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:01:43.803

如果我正确理解您的意思，[java.awt.Color.RGBtoHSB](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Color.html#RGBtoHSB%28int,%20int,%20int,%20float%5B%5D%29)方法可能会对您有所帮助。像这样的Java代码：

```
float[] hsb = Color.RGBtoHSB(red, green, blue, null);  
float hue = hsb[0]; 
```

（其中`red`和是包含传感器结果的变量`green`）`blue`

...将为您提供介于 0 和 1 之间的颜色的“色调” `float`，如果您定义了适当的范围，这应该足以判断它是黄色、蓝色、绿色还是其他颜色。这应该**非常**近似地类似于：

```
Yellow: 0.1  < hue < 0.2
Blue:   0.5  < hue < 0.7
Green:  0.25 < hue < 0.45 
```

...但不要相信我的话！您应该尝试查看在黄纸等上方时传感器保持在什么范围内。

# java - 如何在 Play Framework 中手动抛出错误页面？

> ID：10699595
> 
> 赞同：2
> 
> 时间：2012-05-22T09:48:37.757
> 
> 标签：java, http, playframework, http-status-code-404

如何在 Play framework 1.2.x 中手动抛出错误`404`？`500`

我目前正在使用方法渲染`404.html`和`500.html`模板`renderTemplate()`。但是我该如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T09:57:51.110

Play 有用于此目的[`Controller`](http://www.playframework.org/documentation/api/1.2.3/play/mvc/Controller.html)的方法。`error()``notFound()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:58:09.737

在您的控制器中，您可以`error()`从 Controller 调用静态方法，该方法将提供 500 状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T09:34:15.200

返回 internalServerError(filledForm.errorsAsJson());

# facebook-graph-api - 上传照片 -> 错误的相册

> ID：10699603
> 
> 赞同：2
> 
> 时间：2012-05-22T09:49:13.930
> 
> 标签：facebook-graph-api, upload, facebook-php-sdk, photo, facebook-page

我正在尝试使用 php sdk 将照片上传到粉丝页面的相册：

```
$this->facebook->setFileUploadSupport(true);

$fields['image']        = '@'.realpath($source);
$fields['message']      = $message;
$fields['access_token'] = $this->settings['access_token'];

$return = $this->facebook->api($albumID.'/photos', 'POST', $fields); 
```

*   `$this->facebook`是 facebook SDK 的一个对象
*   `$albumID`是属于粉丝页面的专辑的 ID
*   我的应用程序具有权限 `publish_stream`,`user_photos`等等`manage_pages`

上传工作，但图片被放置在`[myAppName] Photos`属于页面所有者的相册中。

我怎样才能完成，照片被上传到指定的相册？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:16:43.660

您应该使用[Page`access_token`](https://developers.facebook.com/docs/authentication/pages/)上传照片到 Page 的相册，否则内容将发布给拥有 active 的用户`access_token`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:27:50.480

解决方案是，要使用`id`通过图形 API 获得的 ，。不是 AID，不是 object_id（通过 FQL）。

# jquery-ui-datepicker - 用于未来预订的 jQuery UI Datepicker

> ID：10699617
> 
> 赞同：0
> 
> 时间：2012-05-22T09:49:49.003
> 
> 标签：jquery-ui-datepicker

很明显，酒店预订只能从当前日期开始到至少第二天。我正在使用 jQuery UI 日期选择器，我想添加这个链接显示的功能，

[www.phpjabbers.com/hotels-booking-system/demo.php](http://www.phpjabbers.com/hotels-booking-system/demo.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T06:17:54.820

让我们试试这个。

```
 <script>
 jQuery(function() {
    jQuery( "#datepicker1" ).datepicker({
        minDate: 0,
        dateFormat: "yy-mm-dd",
        onSelect: function(date){
        //alert("none");
        var date1 = jQuery('#datepicker1').datepicker('getDate');           
        var date = new Date( Date.parse( date1 ) ); 
        date.setDate( date.getDate() + 1 );        
        var newDate = date.toDateString(); 
        newDate = new Date( Date.parse( newDate ) );                      
        jQuery('#datepicker2').datepicker("option","minDate",newDate);            
    } 
    });
    jQuery( "#datepicker2" ).datepicker({
        minDate: '+1d',
        dateFormat: "yy-mm-dd"
       });
 });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:05:58.173

您可以尝试以下代码：

```
var objDate = new Date();
var sToday =(objDate.getMonth()+1) + '/' + objDate.getDate() + '/' + objDate.getFullYear();
var sTomorrow =(objDate.getMonth()+1) + '/' + (objDate.getDate()+1) + '/' + objDate.getFullYear();

$("#dtPickerFrom").val(sToday);
$("#dtPickerTo").val(sTomorrow); 
```

让我知道，如果这对你有用。

# mysql - 如何创建带有重音的 Mysql 唯一不区分大小写的索引 - （或使用 NO 排序规则）

> ID：10699618
> 
> 赞同：3
> 
> 时间：2012-05-22T09:49:52.810
> 
> 标签：mysql, indexing, collation, case-insensitive, unique-key

我正在与排序规则作斗争。我想建立一个表，该表具有不区分大小写但区分“a”和“à”的单词的唯一索引。这意味着“de”和“dé”应该是 2 个不同的条目，但 de、De、DE、dE 应该相同。

是否有一个 utf8 排序规则可以完成这项工作（似乎并非如此）？有没有办法对 mysql 说不使用任何排序规则？还有其他解决方案吗？我不想把我的话改成小写或大写

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T14:30:59.653

1.  > 是否有一个 utf8 排序规则可以完成这项工作（似乎并非如此）？

    MySQL 附带的所有排序规则都不会这样做：`utf8_*_ci`排序规则*不会*区分重音变化，`utf8_bin`排序规则*会*区分字母大小写。

2.  > 有没有办法对 mysql 说不使用任何排序规则？

    文本比较总是需要一个排序规则（没有一个比较文本是没有意义的）；为避免完全使用排序规则，您必须将文本转换为二进制字符串（例如使用[`BINARY`](http://dev.mysql.com/doc/en/cast-functions.html#operator_binary)运算符），在这种情况下，字符串通过其二进制编码进行比较。

    但是，即使完全相同的字符以不同的方式编码，这也会导致差异（这可能会发生！）。因此，您应该使用`utf8_bin`排序规则，其中字符通过其代码点进行比较（但是，如上所述，这*将*区分字母大小写）。

3.  > 有什么解决办法吗？我不想把我的话改成小写或大写

    我建议使用[`UPPER()`](http://dev.mysql.com/doc/en/string-functions.html#function_upper)or[`LOWER()`](http://dev.mysql.com/doc/en/string-functions.html#function_lower)函数来更改*表达式*的大小写（注意基础数据保持不变），然后使用`utf8_bin`排序规则进行比较。因此，不同的字母大小写将是等价的，但*所有其他差异*（包括重音，但也包括缩略语和扩展名）不会。例如：

    ```
    SELECT col FROM my_table WHERE UPPER(col) LIKE UPPER('de') COLLATE utf8_bin 
    ```

    在[sqlfiddle](http://sqlfiddle.com/#!2/6490e/1)上查看。

    或者，您可以[添加自己的 collat​​ion](http://dev.mysql.com/doc/refman//5.5/en/adding-collation-unicode-uca.html)，但是（除非您重新编译 MySQL）您必须相对于它来定义它，`utf8_unicode_ci`这将需要重置每个重音变化的权重 - 很多努力（尽管您可能会发现您可以从某人那里获得它谁已经完成了，或者您可以以编程方式创建规则）。

# jquery-ui - 如何在 Ember 中创建对话框等控件？

> ID：10699619
> 
> 赞同：5
> 
> 时间：2012-05-22T09:49:55.490
> 
> 标签：jquery-ui, ember.js

我想创建一个类似对话框的控件，以便在需要使用 Ember 时重用。Dialog 将使用 Jquery 库的 $('foo').dialog 函数来实现它。前任：

![Ember 中的对话框控件](../Images/22b3144c87a0a56ba53e2d1ab656d0b8.png)

你能给我任何想法和例子吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T11:33:37.150

Luke Melia 创建了一个[存储库](https://github.com/lukemelia/jquery-ui-ember)，展示了如何将 Ember.js 与 jQuery UI 一起使用。

基于 Luke 的示例，我创建了一个`JQ.Dialog`代表 jQuery UI 对话框的类，请参见[http://jsfiddle.net/pangratz666/aX7x8/](http://jsfiddle.net/pangratz666/aX7x8/)：

```
// Create a new mixin for jQuery UI widgets using the Ember
// mixin syntax.
JQ.Widget = Em.Mixin.create({
    // as defined in
    // https://github.com/lukemelia/jquery-ui-ember/blob/master/js/app.js#L9-95
    ...
});

JQ.Dialog = Ember.View.extend(JQ.Widget, {
    uiType: 'dialog',
    uiOptions: 'autoOpen height width'.w(),

    autoOpen: false,

    open: function() {
        this.get('ui').dialog('open');
    },
    close: function() {
        this.get('ui').dialog('close');
    }
}); 
```

然后像这样创建对话框：

```
var dialog = JQ.Dialog.create({
    height: 100,
    width: 200,
    templateName: 'dialog-content'
});
dialog.append();

Ember.run.later(function(){
    dialog.open();
}, 1000); 
```

​</p>

* * *

除了 jQuery UI，您还可以使用[Flame.js](https://github.com/flamejs/flame.js)，这是 Ember.js 的一个小部件/UI 库。该项目支持面板，请参阅[http://jsfiddle.net/qUBQg/](http://jsfiddle.net/qUBQg/)：

```
// the following code sample has been taken from http://jsfiddle.net/qUBQg/
App.TestPanel = Flame.Panel.extend({
    layout: { width: 400, height: 200, centerX: 0, centerY: -50 },
    // Controls whether all other controls are obscured (i.e. blocked
    // from any input while the panel is shown)
    isModal: true,
    // This controls the visual effect only, and works only if
    // isModal is set to true
    dimBackground: true,
    // Set to false if you want to e.g. allow closing the panel only
    // by clicking some button on the panel (has no effect if isModal
    // is false)
    allowClosingByClickingOutside: true,
    // Allow moving by dragging on the title bar - default is false
    allowMoving: true,
    // Title is optional - if not defined, no title bar is shown
    title: 'Test Panel',

    // A Panel must have exactly one child view named contentView
    contentView: Flame.LabelView.extend({
        layout: { left: 20, top: 90, right: 20, bottom: 20 },
        textAlign: Flame.ALIGN_CENTER,
        value: 'This is a panel.'
    })
});

// later in the code
App.TestPanel.create().popup(); 
```

# backbone.js - 比较主干中的两个集合

> ID：10699620
> 
> 赞同：2
> 
> 时间：2012-05-22T09:50:02.097
> 
> 标签：backbone.js

我如何比较主干中的两个集合？

我有两个集合 1C 包含`1,2,3`而 2C 包含`2,4,5`我想要做的是`2`从 2C 中删除，因为 1C 在通常呈现集合之后已经具有值 2。

我试过这个

```
this.1C.each(function(model1){
  this.2C.each(function(model2){
     if(model1 === model2){
        2C.remove(model2);
     }
  });
}); 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T10:02:37.533

你有一个叫做差异运算符[http://underscorejs.org/#difference](http://underscorejs.org/#difference)的东西。您可以使用如下

`var x = _.difference([1,2,3,4],[1,2]); console.log(x); //gives [3,4]`

在您的情况下，您可能应该这样做

```
var reducedCollection = _.difference(this.1C.toJSON(),this.2C.toJSON()); 
```

现在将提供预期的结果

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T10:07:51.603

我会冒险猜测 model1 和 model2 永远不是模型的同一个实例，因此永远不会匹配。您是否尝试过比较模型 ID 或类似的？例如。模型1.id == 模型2.id

也许添加一些调试，这样你就可以看到发生了什么..

```
this.1C.each(function(model1){
  console.log('m1:'+model1.categoryCode);
  this.2C.each(function(model2){
     console.log('  m2:'+model2.categoryCode);
     if(model1.categoryCode == model2.categoryCode){
        console.log('removing m2:'+model2.categoryCode);
        2C.remove(model2);
     }
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T05:04:23.787

我为基于事件的集合比较编写了一个库。基本上，我认为你可以像这样使用这个库来实现你正在寻找的结果（没有测试过这个特定的案例）：

```
cocomp = new Backbone.CoComp({
  comparator: function(obj) {
    obj["1C"] === obj["2C"]
  }
});

// Listen for "cocomp:in:1C" on the 2C collection. This will be
// triggered if there is a match based on the comparator above.
2C.on("cocomp:in:1C", function(value) {
  2C.remove(value);
});

cocomp.set("1C", 1C)
cocomp.set("2C", 2C) 
```

GitHub 存储库在这里：[https ://github.com/davidbiehl/backbone.cocomp](https://github.com/davidbiehl/backbone.cocomp)

让我知道这是否有帮助！这个库的额外好处是，如果 1C 或 2C 发生变化（添加、删除或重置），如果匹配，将触发事件，有效地保持 1C 和 2C 同步。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:57:20.000

代理的[Underscore 方法](http://documentcloud.github.com/backbone/#Collection-Underscore-Methods)可以在这里为您提供帮助。尝试：

```
2C.without(1C.models); 
```

`without`并且其他代理方法返回数组，因此您必须将结果包装在另一个`Backbone.Collection`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-10T06:06:42.397

这对我有用：

```
2C.remove(1C.models); 
```

（如果模型ID是比较检查的基础）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T22:15:08.363

此代码中的函数 updateCollection [https://github.com/3-16/Backbone-poller/blob/master/pusher.js](https://github.com/3-16/Backbone-poller/blob/master/pusher.js)非常适合我比较两个集合。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-22T10:43:48.193

```
var checked = [];

arrNewCollection.forEach(function(item){ //get new collection
         if (!_.findWhere(arrOldCollection, {id: item.id})) { // find in old collection our property
                checked.push(item.id); // if in old collection can not find property then add this property in array
         }
    }); 
```

# c# - url 编码实现是否跨语言标准化？

> ID：10699621
> 
> 赞同：0
> 
> 时间：2012-05-22T09:50:08.570
> 
> 标签：c#, url, url-encoding

我正在用 c# 构建一个 Web 服务，我想检索作为 url 参数传递的字符串。我打算使用 c# 的 HttpUtility.UrlDecode 方法解码这些字符串。显然，对于使用 c# 中相应的 urlencode 方法对参数进行编码的客户端，该服务可以正常工作，但是对于使用其他编程语言的 url 编码方法的客户端，它是否可以工作？

我知道有一个为 url 编码定义的标准，[http://en.wikipedia.org/wiki/Percent-encoding#Current_standard](http://en.wikipedia.org/wiki/Percent-encoding#Current_standard)，但是（最常见的）语言是否符合它，并且彼此愉快地交互？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:53:26.960

这就是标准的意义所在。允许使用不同平台/语言构建的系统之间的互操作性。因此，除非您使用的特定实现或库中存在错误，否则不应该有任何问题。

# algorithm - 数独，回溯算法

> ID：10699627
> 
> 赞同：2
> 
> 时间：2012-05-22T09:50:52.980
> 
> 标签：algorithm, sudoku

数独回溯法

```
int xx = (pos.getX() / 3) * 3;          
int yy = (pos.getY() / 3) * 3;           
for (int y = 0; y < 3; y++) {              
    for (int x = 0; x < 3; x++) {               
        if ((xx + x != pos.getX()) && (yy + y != pos.getY())) {            
            possible[work[xx + x][yy + y]] = false; 
```

其中 x 和 y =

```
private byte x;
private byte y; 
```

有人可以解释为什么我们除以三并乘以三吗？

```
(pos.getY() / 3) * 3;                      
(pos.getX() / 3) * 3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:52:28.473

因为我们想要 3 的倍数。我们想要小于 pos.getX() 的 3 的最大倍数。它对应于当前 3x3 正方形中的左上角单元格。

请记住 X/3 必须是整数，因此 (X/3)*3 可能不等于 X。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:09:54.923

除法是整数除法，因此它将删除余数。在乘法之后进行整数除法将为您提供正确 3x3 块的第一个单元格索引。

例如

```
pos    0    1    2    3    4    5    6    7    8
/3     0    0    0    1    1    1    2    2    2
*3     0    0    0    3    3    3    6    6    6 
```

# grid - 网格未加载 ExtJs4 中搜索到的 json 数据

> ID：10699634
> 
> 赞同：1
> 
> 时间：2012-05-22T09:51:15.650
> 
> 标签：grid, extjs4

我有带有表格和网格的表格面板。

我的网格加载了 120 行的 JSON 数据和带有 5 个组合字段的表单以搜索所需的行。

现在，当我单击搜索按钮时，PHP 脚本返回正确的 JSON 数据，但该数据未加载到网格中。

我是 ExtJs4 的新手，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:32:16.493

您已经粘贴了您的应用程序的一些代码，让我知道您如何将 Json 加载到网格中以及您希望如何过滤网格的行。

无论如何，如果我很好地理解网格不显示 Json 数据？

您是否为网格设置了存储并通过 PHP 将 Json 文件加载到存储中？

参考： [http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.Panel](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.Panel)

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store)

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Model](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Model)

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.proxy.Proxy](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.proxy.Proxy)

# jsf-1.2 - 简单列表 JSF 1.2 中的内容将不会显示

> ID：10699635
> 
> 赞同：0
> 
> 时间：2012-05-22T09:51:19.707
> 
> 标签：jsf-1.2, icefaces-1.8

我有一个简单的类（the），其中包含一个

```
List<String> whatEver; 
```

加上适当的getter/setter。

在 JSF 中，我不想通过 ice:DataTable 组件显示此信息，如下所示：

```
<ice:dataTable id="XXX" var="item" value="#{the.whatEver}" style="empty-cells: show;">
  <f:facet name="header">
      <ice:outputText value="XYZ:"/>
  </f:facet>
  <ice:outputText value="#{item}" />
</ice:dataTable> 
```

但它不会通过项目显示值。只是标题“XYZ：”而不是值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:29:41.943

经过战斗，我找到了非常简单的解决方案：

用 ice:column 标签包围它后，它按预期工作。

```
<ice:column>
  <f:facet name="header">
    <ice:outputText value="Kontonummer:"/>
  </f:facet>
  <ice:outputText value="#{konto}" />
</ice:column> 
```

# jquery - 细丝组平面菜单和 FancyBox 冲突

> ID：10699638
> 
> 赞同：0
> 
> 时间：2012-05-22T09:51:37.000
> 
> 标签：jquery, jquery-ui, fancybox, conflict

我正在使用灯丝组平面菜单。单击第一个锚点时，我想在 FancyBox 中打开另一个页面，但它似乎不起作用。单击时，另一个页面将在同一窗口中打开，而不是在 FancyBox 中。如果，我在菜单 div 之外使用相同的锚，FancyBox 可以正常工作。请帮忙。

*开发环境：ASP.NET 4.0、JQuery v1.7、JQuery UI v1.8.18、FancyBox v1.3.4*

以下是供参考的JQuery代码：

```
$('a#aShowLevels').live('mousedown', function() {
    var l_sHref = "./tbl.aspx?iframe?id=" + $("#hftbTID").val();
    $("a#aShowLevels").attr("href", l_sHref);
    $(this).trigger('click');
});

$("a#aShowLevels").fancybox({
    'showIframeLoading': true,
    'enableEscapeButton': true,
    'width': 680,
    'height': 540
}); 
```

以下是 HTML 代码：

```
<a tabindex="0" href="#divMenuOptions" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="flatMenu"><span class="ui-icon ui-icon-triangle-1-s"></span>Options</a>
<div id="divMenuOptions" class="hidden">
    <ul>
    <li><a id="aShowLevels" href="#" class="iframe" runat="server">Show Bids</a></li>
    <li><asp:LinkButton ID="lkbtnConvertToPO" runat="server" PostBackUrl="~/po.aspx">Convert to PO</asp:LinkButton></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:33:03.417

我找到了如下解决方案：

将锚属性从 ...

```
<li><a id="aShowLevels" href="#" class="iframe" runat="server">Show Bids</a></li> 
```

到

```
<li><a id="aShowLevels" href="#" runat="server" onclick="var goURL='./tbl.aspx?id=' + $('#hftbTID').val();openFB(goURL)">Show Bids</a></li> 
```

移除了附加到**a#aShowLevels元素的****live** event 和 fancybox 函数，并添加了以下函数：

 **```
 function openFB(url) {
        $.fancybox({
            'href': url,
            'type': 'iframe',
            'width': '95%',
            'height': '90%'
        });
    } 
```

credit goes to @JFK (url: [http://groups.google.com/group/fancybox/browse_thread/thread/4449cbde5e004365/98735950117f861b](http://groups.google.com/group/fancybox/browse_thread/thread/4449cbde5e004365/98735950117f861b))**

# java - 更新 Nutch 以获取每个获取的 URL 的父级

> ID：10699639
> 
> 赞同：1
> 
> 时间：2012-05-22T09:51:39.113
> 
> 标签：java, nutch

当我运行 Apache Nutch 1.4 爬虫时，我想存储一些额外的信息。我想存储每个 URL 的父级。

例如，我想抓取一个页面 a.html，它有 2 个指向 b.html 和 c.html 的锚链接所以当我抓取 a.html 时，我应该得到这样的东西：-

```
a.html null
b.html a.html
c.html a.html 
```

我想存储这样的东西。我已经阅读了 nutch 的工作原理，并且也在 eclipse 中运行了 nutch。我还阅读了 fetcher.java 并记录了它获取内容的位置。但是我没有成功知道 Nutch 在哪里获取给定页面的子 URL。我认为这一步发生在解析步骤之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T03:35:02.380

我觉得可以通过生成linkdb来获取信息。

**链接数据库或 linkdb**：这包含指向每个 URL 的已知链接列表，包括源 URL 和链接的锚文本。它维护一个反向链接映射，列出每个 url 的传入链接。

```
bin/nutch invertlinks crawldb/linkdb -dir crawldb/segments 
```

在解析阶段，nutch 从爬取的内容中生成外链，然后在更新阶段将新发现的 url 存储到 crawldb。新的 url 在下一个周期/轮 nutch crawl 中被获取。

# css - 将 CSS 添加到 GWT 小部件

> ID：10699641
> 
> 赞同：0
> 
> 时间：2012-05-22T09:51:47.490
> 
> 标签：css, gwt

如何仅将一些样式添加到 GWT 容器，而不是容器包含的所有小部件？例如，我需要为 CaptionPanel 的标题设置样式（使其变大并更改颜色）。但是当我向整个 CaptionPanel 添加样式时，里面的所有小部件也会继承添加的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:34:34.773

CSS 101：将您的样式限制`legend`为`CaptionPanel`. 例如

```
myCaptionPanel.addStyleName("foo"); 
```

```
.foo > legend { color: red; }
/* use ".foo legend" above, without the ">" if you need to support IE6 */ 
```

# android - 在 AlertDialog 中显示长消息

> ID：10699644
> 
> 赞同：3
> 
> 时间：2012-05-22T09:51:58.690
> 
> 标签：android, android-alertdialog, android-dialog

我正在尝试使用以下代码在 Default AlertDialog 中显示一条冗长的消息。

```
public static void showAlert(String message, Context con) {
    AlertDialog.Builder dialog = new AlertDialog.Builder(con);
    dialog.setTitle(message);
    dialog.setPositiveButton(" OK ", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.dismiss();

        }
    });
    dialog.show();

} 
```

但是当我传递长消息时，警报对话框不显示完整消息。我可以按中心对齐对话框的文本吗？我不想使用自定义对话框。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T10:02:30.793

改变

```
dialog.setTitle(message); 
```

到

```
dialog.setMessage(message); 
```

如果要居中对齐文本，则必须创建一个文本视图，如下例所示：

```
 AlertDialog.Builder dialog = new AlertDialog.Builder(con);
    dialog.setTitle(message);
    dialog.setPositiveButton(" OK ", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.dismiss();

        }
    });
    dialog.show();

// Must call show() prior to fetching text view
TextView messageView = (TextView)dialog.findViewById(android.R.id.message);
messageView.setGravity(Gravity.CENTER); 
```

取自：[Android对话框中的中心消息](https://stackoverflow.com/questions/4954130/message-text-in-android-dialog-box)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:02:32.353

尝试以下代码

```
public static void showAlert(String message, Context con) {
    AlertDialog.Builder dialog = new AlertDialog.Builder(con);
    dialog.setMessage(message);
    dialog.setPositiveButton(" OK ", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.dismiss();

        }
    });
    dialog.show();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-30T05:32:28.463

```
AlertDialog.Builder builder1 = new AlertDialog.Builder(getParent());

builder1.setTitle("Login Alert");

TextView myMsg = new TextView(getParent());

myMsg.setText("You have not logged in to save the product.Do you want to login?");

myMsg.setTextSize(20);

myMsg.setGravity(Gravity.CENTER_HORIZONTAL);

builder1.setView(myMsg); 
```

# android - 安卓通用补间引擎

> ID：10699648
> 
> 赞同：2
> 
> 时间：2012-05-22T09:52:05.820
> 
> 标签：android, android-animation, tween, android-resources

我可以将通用补间引擎用于 android 补间动画吗？

```
Tween.to(getResources().getDrawable(R.drawable.ic_launcher),  ParticleAccessor.POSITION_XY, 0.5f)
     .target(0, 0)
     .ease(Bounce.OUT)
     .delay(1.0f)
     .repeatYoyo(2, 0.5f)
     .start(manager); 
```

我已从 wiki 页面复制此代码并将目标更改为可绘制资源。如何将此可绘制对象更改为目标对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T06:12:23.853

[通用补间引擎](http://code.google.com/p/java-universal-tween-engine/)能够计算任何内容的唯一要求是您创建的和`Tweens`定期`Timelines`更新（在每一帧上）。

在大多数情况下，您应该使用 a`TweenManager`来处理所有补间的更新过程。因此，您需要做的就是`.update()`在每一帧上调用管理器的方法。对于安卓游戏，这真的很容易做到，因为每个游戏都有一个“游戏循环”，一个无限循环，在每一帧上重新计算和重绘世界。因此，您需要做的就是在此循环中插入管理器更新调用，然后瞧。但是，纯 android UI 应用程序不会公开它们的循环，因此您不能在任何地方插入更新调用。

但是，您应该做的是创建一个内部带有无限循环的单独线程，并将 manager.update() 方法放入其中。它应该毫不费力地工作:)

首先，您需要在某处创建一个经理：

```
private final TweenManager tweenManager = new TweenManager(); 
```

以及用于停止 ativity 的 onPause() 方法中的动画的布尔值：

```
private boolean isAnimationRunning = true; 
```

然后您需要创建线程（例如在 Activity 构造函数中）：

```
new Thread(new Runnable() {
    private long lastMillis = -1;

    @Override
    public void run() {
        while (isAnimationRunning) {
            if (lastMillis > 0) {
                long currentMillis = System.currentTimeMillis();
                final float delta = (currentMillis - lastMillis) / 1000f;

                view.post(new Runnable() {) {
                    @Override public void run() {
                        tweenManager.update(delta);
                    }
                };

                lastMillis = currentMillis;
            } else {
                lastMillis = System.currentTimeMillis();
            }

            try {
                Thread.sleep(1000/60);
            } catch(InterruptedException ex) {
            }
        }
    }
}).start(); 
```

然后你可以在你的 android UI 代码的任何地方创建补间。如您所见，更新调用被包围`view.post()`，因此更新将在主 Android UI 线程中完成，因此您不会遇到任何同步问题。

除了游戏之外，我从未尝试过引擎，但这个解决方案应该可以正常工作。

# c# - C# - Linq - XPathSelectElement 每次都返回相同的结果

> ID：10699654
> 
> 赞同：1
> 
> 时间：2012-05-22T09:52:15.353
> 
> 标签：c#, linq

在阅读一些 xml 行时，我遇到了 XPathSelectElement 的问题......

函数 handleEachSession 从我的另一个函数的 mathod childList.ForEach() 调用了两次：

```
private void handleMonitorResponse(XElement receivedSessions)
 {
 List<XElement> childList = receivedSessions.Elements().ToList();
 childList.ForEach(handleEachSession); 
```

childList 有两个元素（两条 XML 行，我希望它有） 然后我可以在调试器中看到，handleEachSession() 的两个调用都获得了正确的 XElement 会话。这两个我想要它。

现在有了这些 XPathSelectElement。它适用于第一次通话，但不适用于第二次通话。第二次我得到新的 XElement 会话，但 XPathSelectElement 仍然返回第一次调用的旧值。哼！？？我无法理解这种行为。

```
private void handleEachSession(XElement session)
 {
 XElement receivedSessionId = session.XPathSelectElement("//sessionId");
 XElement receivedQuality = session.XPathSelectElement("//quality");
 XElement receivedContentStatus = session.XPathSelectElement("//contentStatus");
… 
```

谁能帮帮我吗？

XML 是：

```
receivedSessions = 
<sessions type="array">
  <item type="object">
    <sessionId type="string">8c86716a87</sessionId>
    <quality type="string">mid</quality>
    <addressUri type="string">http://192.168.6.234/media/SorrowPinkFloyd_.mp4</addressUri>
    <currentTime type="number">1.5542887</currentTime>
    <contentStatus type="string">paused</contentStatus>
  </item>
  <item type="object">
    <sessionId type="string">c795067c4e</sessionId>
    <quality type="string">mid</quality>
    <addressUri type="string">http://192.168.6.234/media/trailer.mp4</addressUri>
    <currentTime type="number">3.3492105</currentTime>
    <contentStatus type="string">playing</contentStatus>
  </item>
</sessions>

session = (first call)
<item type="object">
  <sessionId type="string">8c86716a87</sessionId>
  <quality type="string">mid</quality>
  <addressUri type="string">http://192.168.6.234/media/SorrowPinkFloyd_.mp4</addressUri>
  <currentTime type="number">1.5542887</currentTime>
  <contentStatus type="string">paused</contentStatus>
</item>

session = (second call)
<item type="object">
  <sessionId type="string">c795067c4e</sessionId>
  <quality type="string">mid</quality>
  <addressUri type="string">http://192.168.6.234/media/trailer.mp4</addressUri>
  <currentTime type="number">3.3492105</currentTime>
  <contentStatus type="string">playing</contentStatus>
</item> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T10:06:12.963

根据[xpath-syntax](http://www.w3schools.com/xpath/xpath_syntax.asp)，双斜杠 (//) 表示：从当前节点中选择文档中与选择匹配的节点，无论它们在哪里。因此考虑到这一点，您可能必须将`handleEachSession`功能更改为

```
private void handleEachSession(XElement session)
{
    XElement receivedSessionId = session.XPathSelectElement("sessionId");
    XElement receivedQuality = session.XPathSelectElement("quality");
    XElement receivedContentStatus = session.XPathSelectElement("contentStatus");
} 
```

# java - JavaFX 2 中的组合框键值对

> ID：10699655
> 
> 赞同：21
> 
> 时间：2012-05-22T09:52:15.853
> 
> 标签：java, javafx-2

我刚刚开始学习 JavaFX 2。
现在我正在尝试构建一个示例应用程序。然后我陷入了组合框。
我没有在 JavaFX 中找到任何对组合框键值对的引用。[http://docs.oracle.com/javafx/2/api/index.html](http://docs.oracle.com/javafx/2/api/index.html)
上 的组合框 javadoc对键值对没有多说。

如何创建一个组合框，其中的项目具有不同的显示值和实际值？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-22T10:56:54.463

您有 2 种方法：
1\. 只需覆盖`toString()`数据模型类中的方法。例子：

```
public class Demo extends Application {

    private final ObservableList<Employee> data =
            FXCollections.observableArrayList(
            new Employee("Azamat", 2200.15),
            new Employee("Veli", 1400.0),
            new Employee("Nurbek", 900.5));

    @Override
    public void start(Stage primaryStage) {

        ComboBox<Employee> combobox = new ComboBox<>(data);
        combobox.getSelectionModel().selectFirst(); // Select first as default
        combobox.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<Employee>() {

            @Override
            public void changed(ObservableValue<? extends Employee> arg0, Employee arg1, Employee arg2) {
                if (arg2 != null) {
                    System.out.println("Selected employee: " + arg2.getName());
                }
            }
        });
        StackPane root = new StackPane();
        root.getChildren().add(combobox);
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();
    }

    public static class Employee {
        private String name;
        private Double salary;

        @Override
        public String toString() {
            return name + " (sal:" + salary + ")";
        }

        public Employee(String name, Double salary) {
            this.name = name;
            this.salary = salary;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public Double getSalary() {
            return salary;
        }

        public void setSalary(Double salary) {
            this.salary = salary;
        }
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

请注意 Employee 类的覆盖 toString() 。组合框的键（实际值）将是实例，在这种情况下`Employee`显示值是。 2\. 第二种方法是设置组合框的 cellFactory 属性。 `employee.toString()`

```
combobox.setCellFactory(new Callback<ListView<Employee>, ListCell<Employee>>() {

    @Override
    public ListCell<Employee> call(ListView<Employee> arg0) {
        return new ListCell<Employee>() {

            private final Button btn;
            {
                setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
                btn = new Button();
            }

            @Override
            protected void updateItem(Employee item, boolean empty) {
                super.updateItem(item, empty);

                if (item == null || empty) {
                    setGraphic(null);
                } else {
                    btn.setStyle(item.getSalary() > 1000 ? "-fx-base:red" : "-fx-base: green");
                    btn.setText(item.getName() + "=" + item.getSalary());
                    setGraphic(btn);
                }
            }
        };
    }
}); 
```

这种方法对单元格渲染提供了更强大的控制。您不仅可以格式化显示值，还可以将任何节点（控件）包含到单元格（在本例中为按钮）并添加一些查看逻辑（item.getSalary()?"":""）。实际值保持不变，即 Employee 实例。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-08T22:45:23.797

还有另一种解决方案，实现[StringConverter](http://docs.oracle.com/javafx/2/api/javafx/util/StringConverter.html)。它对对象非常有用：

```
public class Product {

    private String code;
    private String name;

    public Product(String code, String name) {
        this.code = code;
        this.name = name;
    }

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

转换器实现：

```
public class ProductConverter extends StringConverter<Product> {

    /** Cache of Products */
    private Map<String, Product> productMap = new HashMap<String, Product>();

    @Override
    public String toString(Product product) {
        productMap.put(product.getName(), product);
        return product.getName();
    }

    @Override
    public Product fromString(String name) {
        return productMap.get(name);
    }

} 
```

视图中的代码：

```
 ComboBox<Product> cboProducts  = new ComboBox<Product>;
    cboProducts.setConverter(new ProductConverter());
    cboProducts.getItems().addAll(serviceManager.getProductList()); 
```

要获取产品的价值，可以调用 getValue() 方法：

```
cboProducts.getValue() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T08:10:23.137

我知道这个问题很老，但是因为我只是花了几个小时在这个问题上毫无意义地挖掘，所以我必须分享结果。似乎具有覆盖 toString() 方法的 ComboBox 将字符串解析回恰到好处的对象，即使列表中有字符串重复也是如此。分辨率必须基于索引，并且 toString() 仅用于演示。

# dynamics-crm - Dynamics CRM 2011 开发人员是否有任何好的控件可用？

> ID：10699657
> 
> 赞同：3
> 
> 时间：2012-05-22T09:52:19.037
> 
> 标签：dynamics-crm, dynamics-crm-2011

与其花费大量时间尝试在 CRM2011 中重新创建控件（网格等），我更愿意购买一些可重用的控件。谁能推荐一个有一些好的供应商？

## 编辑

我希望控件适用于所有托管变体，这意味着理想情况下它们将基于 HTML/CSS/JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:53:35.167

查看剑道用户界面。他们有一些使用 JS 构建良好的控件。
[http://www.kendoui.c​​om/](http://www.kendoui.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:39:05.480

如果您正在处理 Web 资源，jQueryUI 或 Telerik ASP.Net Ajax Controls 可能会对您有所帮助。

# android - 无法让加速度计感应震动事件

> ID：10699660
> 
> 赞同：2
> 
> 时间：2012-05-22T09:52:21.033
> 
> 标签：android, android-sensors

我正在尝试将一些功能与“摇晃”事件联系起来。我在这里使用了教程：

[http://www.vogella.com/articles/AndroidSensor/article.html](http://www.vogella.com/articles/AndroidSensor/article.html)

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/os/Sensors.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/os/Sensors.html)

我正在使用 OpenIntents 的[SensorSimulator](http://code.google.com/p/openintents/wiki/SensorSimulator)进行测试。我能够将模拟器连接到 SensorSimulator。当我在模拟器中移动设备时，模拟器上的加速度计读数完全反映了模拟器的读数。

在我的代码中，我添加了一些日志语句，例如：

```
public class ShakeEventListener implements SensorEventListener {

private void getAccelerometer(SensorEvent event) {

    float[] values = event.values;
// Movement
float x = values[0];
float y = values[1];
float z = values[2];

float accelationSquareRoot = (x * x + y * y + z * z)
        / (SensorManager.GRAVITY_EARTH * SensorManager.GRAVITY_EARTH);
long actualTime = System.currentTimeMillis();
Log.i("onSensorChanged", "accelationSquareRoot: " + accelationSquareRoot);

if (accelationSquareRoot >= 2) //
{
    if (actualTime - lastUpdate < 200) {
    return;
    }
    lastUpdate = actualTime;

        // Shake Detected
    Log.i("onSensorChanged", "Shakie Shakie!");
    }
}

public void onSensorChanged(SensorEvent se) {

    Log.d("onSensorChanged", "X: " + se.values[SensorManager.DATA_X] + 
               " Y: " + se.values[SensorManager.DATA_Y] + 
               " Z: " + se.values[SensorManager.DATA_Z]);

    if (se.sensor.getType() == Sensor.TYPE_ACCELEROMETER) 
    {
    getAccelerometer(se);
    }
}
} 
```

如果我在模拟器中移动设备，log cat 中的输出似乎没有改变。它总是显示这些读数（读数每分钟都会更新很多次，但它们总是一样的）：

```
05-22 15:09:07.717: I/onSensorChanged(686): accelationSquareRoot: 1.0006835
05-22 15:09:08.518: D/onSensorChanged(686): X: 0.0 Y: 9.77622 Z: 0.813417
05-22 15:09:08.518: I/onSensorChanged(686): accelationSquareRoot: 1.0006835 
```

我尝试了`APIDemos`示例`sensors.java`，但这也注册了相同的行为。我会错过什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:40:09.833

这是适用于我的应用程序的加速度计代码：

```
// shake
private SensorManager mSensorManager;
private float mAccel; // acceleration apart from gravity
private float mAccelCurrent; // current acceleration including gravity
private float mAccelLast; // last acceleration including gravity

    //Shake
    private final SensorEventListener mSensorListener = new SensorEventListener() {
        int count = 0;
        public void onSensorChanged(SensorEvent se) {

          float x = se.values[0];
          float y = se.values[1];
          float z = se.values[2];
          mAccelLast = mAccelCurrent;
          mAccelCurrent = (float) Math.sqrt((double) (x*x + y*y + z*z));
          float delta = mAccelCurrent - mAccelLast;
          mAccel = mAccel * 0.9f + delta; // perform low-cut filter
          if (mAccel > 5) {
              //do something
          }
        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {

        }
      }; 
```

这是我如何获得这段代码的[来源。](https://stackoverflow.com/questions/2317428/android-i-want-to-shake-it)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:03:18.037

在我的游戏中，我[从这里实现了这个东西](http://www.anddev.org/example_detecting_-und-quotshake-und-quot_with_the_accelerometer-t4451.html)

示例代码真的非常简单易懂。

我的活动.java

```
public class MyActivity extends Activity
{
    private MyView m_myView;
    private SensorManager m_sensorManager;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {           
        super.onCreate(savedInstanceState);

        m_myView = (MyView)findViewById(R.id.my_view);

        m_sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        m_sensorManager.registerListener(m_myView,
                SensorManager.SENSOR_ACCELEROMETER,
                SensorManager.SENSOR_DELAY_GAME);
    }

        @Override
        protected void onPause()
        {
                super.onPause();

                m_sensorManager.unregisterListener(m_myView);
        }

        @Override
        protected void onResume()
        {               
                super.onResume();

                m_sensorManager.registerListener(m_myView,
                        SensorManager.SENSOR_ACCELEROMETER,
                        SensorManager.SENSOR_DELAY_GAME;
        }
} 
```

我的视图.java

```
public class MyView extends View implements SensorListener
{
    private float m_totalForcePrev; // stores the previous total force value

    // do your constructor and all other important stuff here
    // make sure you set totalForcePrev to 0
    // ...

        public void onAccuracyChanged(int arg0, int arg1)
        {
                // I have no desire to deal with the accuracy events
        }

        public void onSensorChanged(int sensor, float[] values)
        {       
                if(sensor == SensorManager.SENSOR_ACCELEROMETER)
                {
                        double forceThreshHold = 1.5f;

                        double totalForce = 0.0f;
                        totalForce += Math.pow(values[SensorManager.DATA_X]/SensorManager.GRAVITY_EARTH, 2.0);
                        totalForce += Math.pow(values[SensorManager.DATA_Y]/SensorManager.GRAVITY_EARTH, 2.0);
                        totalForce += Math.pow(values[SensorManager.DATA_Z]/SensorManager.GRAVITY_EARTH, 2.0);
                        totalForce = Math.sqrt(totalForce);

                        if((m_gameState == STATE_RUNNING) && (totalForce < forceThreshHold) && (m_totalForcePrev > forceThreshHold))
                        {
                                doWrenchWord();
                        }

                        m_totalForcePrev = totalForce;
                }
        }

} 
```

你身边的问题可能是，

功能代码`getAccelerometer(se);`或者您在将[SensorSimulator](http://code.google.com/p/openintents/wiki/SensorSimulator)连接到仿真器时犯了一些错误，我认为您需要断开它并重新连接它检查 ip 和端口以及设置选项卡并检查传感器是否被选中/可用。以及更新和刷新的时间延迟的一些附加设置。请按照他们在文档中所写的内容进行操作。

# python - 龙卷风应用程序布局。选项。

> ID：10699665
> 
> 赞同：1
> 
> 时间：2012-05-22T09:52:54.900
> 
> 标签：python, tornado

现在我在同一个文件中有龙卷风选项，就像在龙卷风应用程序中一样。他们定义如下：

```
import tornado.options
tornado.options.define(<name>, default=<value>) 
```

有没有办法将它们移出单独的文件？

此外，默认访问的选项如下：

```
tornado.options.options.<name> 
```

有什么方法可以像访问它们一样访问它们`settings.<name>`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:03:49.560

该文档非常适合 Tornado。

[http://www.tornadoweb.org/en/latest/options.html](http://www.tornadoweb.org/en/latest/options.html)

> 应用程序的 main() 方法不需要了解整个程序中使用的所有选项；它们都是在加载模块时自动加载的。您的 main() 方法可以解析命令行或解析配置文件：
> 
> ```
> import tornado.options
> tornado.options.parse_config_file("/etc/server.conf")
> tornado.options.parse_command_line() 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:01:07.633

如果您不想使用 conf 文件，您可以简单地在另一个文件（例如 settings.py）中定义它们，然后导入该文件。

所以，settings.py：

```
import tornado.options
tornado.options.define(<name>, default=<value>) 
```

别的地方：

```
import settings
from tornado.options import options 
```

导入 with`from tornado.options import options`让您获得价值`options.<name>`

# eclipse - HelloWorld 程序上的 NoClassDefFoundError

> ID：10699667
> 
> 赞同：1
> 
> 时间：2012-05-22T09:52:57.350
> 
> 标签：eclipse, java, noclassdeffounderror

我查看了其他 NoClassDefFoundError 问题，但没有找到适合我的解决方案。我正在使用 Eclipse IDE 编写程序，当我右键单击 -> 在 Eclipse 中作为 Java 应用程序运行时它运行良好，但尝试通过命令行运行它会遇到上述错误。我正在使用的 JRE 是（我认为）Java60。该程序使用运行良好的 javac HelloWorld.java 编译，然后调用 java -cp 。HelloWorld 抛出错误。任何有关故障排除的帮助将不胜感激。

代码是：

```
package tool;

public class HelloWorld {

public static void main(String[] args){
    System.out.println("Hello World!");
}

} 
```

从“C:\MADtool\HostDBtoMADTool\src\tool”运行

命令行的输出是：

```
C:\MADtool\HostDBtoMADtool\src\tool>java -cp . HelloWorld
Exception in thread "main" java.lang.NoClassDefFoundError: HelloWorld (wrong nam
e: tool/HelloWorld)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$100(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:32:19.327

执行将在**默认包**`$ java HelloWorld`中搜索类。不存在这样的类，只有.`HelloWorld`**`tool.HelloWorld`**

 **此外，如果您运行`$ java tool.HelloWorld`，那么 java 将尝试查找该文件`tool/HelloWorld.class`，因此您需要确保您的工作目录是**包含** `tool/`的目录，**而不是** `tool/`它本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:02:20.513

根据我非常古老的命令行经验，我编译了我的 java 程序：

```
javac MyClass.java 
```

然后尝试运行它解析带有扩展的编译类参数：

```
java MaClass.class 
```

然后我得到这个异常。当我只解析没有扩展名的文件名时，它可以工作：

```
java MyClass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:03:56.300

也许您的类路径中缺少一些依赖项？

我的意思是您的 HelloWorld 类可能依赖于其他应该包含在类路径中的 jar。Eclipse 会为您完成，但使用命令行您必须提供适当的类路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:17:32.500

您输入包“工具”并创建一个 javac（这是正确的），但随后您尝试从该包文件夹中启动该类（出了什么问题）。

您必须先更改到 src 目录，因为类路径是相对于源文件夹的。如果你使用包（你真正应该做的）。您必须确保从正确的起始文件夹开始您的代码：

```
C:\MADtool\HostDBtoMADtool\src>java -cp . HelloWorld 
```

**更新** 看看类路径定义：[维基百科](http://en.wikipedia.org/wiki/Classpath_%28Java%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-26T22:48:44.980

我认为出现问题时完整的命令总是有帮助的：

```
C:\MADtool\HostDBtoMADtool\src>java -cp "C:\MADtool\HostDBtoMADtool\src" tool.HelloWorld
C:\MADtool\HostDBtoMADtool\src\tool>java -cp "C:\MADtool\HostDBtoMADtool\src" tool.HelloWorld 
```**

# php - $_GET 不在文本框中显示数据，url 中的单词之间有空格

> ID：10699669
> 
> 赞同：-1
> 
> 时间：2012-05-22T09:53:08.893
> 
> 标签：php, url, textbox, get

我有一个页面`index.php`，我正在从 url 中获取一个单词的值。

```
<a href="index.php?skills=software engineer">Software Job</a> 
```

在下面的代码中，它显示来自 的完整值`$_GET`，但未显示在文本框中

和网址是

```
http://localhost/mysite/index.php?skills=software%20engineer

<?php

    if (isset($_GET['skills']) and !empty($_GET['skills'])) {
        $is_skill = 1;  // true and has value
        $skill_data = $_GET['skills'];
        echo "The searched skills : " . $skill_data; // Here its displaying full values
    } else {
        $is_skill = 0;  // false and has no value
    }

?>

<input type="text" name="textbo1" <?php if ($is_skill == 1) { echo "value=" . $skill_data; } ?> /> 
```

现在，在文本框中，它不显示完整的值，即`software engineer`在 php 代码输出中的位置

```
The searched skills : software engineer 
```

和文本框中的值：`software`

不知道是什么问题，需要帮助，为什么它不接受

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T09:55:36.303

必须引用其中包含空格的属性值。

```
value=software engineer 
```

... 被解析为“具有值‘软件’和‘工程师属性’的值属性

您也容易受到 XSS 攻击，并且您的 URL 无效。

更正的代码：

```
<a href="index.php?skills=software%20engineer">Software Job</a> 
```

和

```
<input type="text" name="textbo1" <?php 
    if ($is_skill == 1) { 
        echo 'value="' . htmlspecialchars($skill_data) . '"'; 
    } 
?> /> 
```

请注意，您需要使用 使*所有*外部数据实例对 HTML 安全`htmlspecialchars`，而不仅仅是我在此示例中修复的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:57:03.170

```
<input type="text" name="textbo1" value="<?php if ($is_skill == 1) { echo $skill_data; } ?>" /> 
```

您的 html 标记不正确。您必须用引号将您的值括起来。如果`$is_skill`为 0，则文本字段中将没有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:57:57.787

您的属性值需要用引号引起来。使用 addlashes 在字符串本身中转义和双引号。

尝试这个：

```
<?php if ($is_skill == 1) { echo 'value="' . addslashes($skill_data) . '"'; } ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:57:59.767

你需要报价

```
<input type="text" name="textbo1" <?php if ($is_skill == 1) { echo "value=\"" . $skill_data . "\""; } ?> /> 
```

# mysql - 触发另一个触发循环的触发器

> ID：10699673
> 
> 赞同：0
> 
> 时间：2012-05-22T09:53:28.583
> 
> 标签：mysql, triggers

我在插入表 A 时有一个 MySQL 触发器，它在表 B 中插入一行，在表 B 上插入一行，在表 A 上插入一行。问题是它们在无限循环中相互触发，MySQL 停止了，因为这是不允许的。

我如何判断我的插入是否是从另一个触发器触发的而不是这样做？

# objective-c - 识别数据模型版本并执行某些操作

> ID：10699676
> 
> 赞同：0
> 
> 时间：2012-05-22T09:53:44.900
> 
> 标签：objective-c, core-data, core-data-migration

当用户使用较新的模型版本升级到较新版本时，我想远程所有实体。例如，

应用程序版本 1.0 和模型版本 1 表 X 表 Y

升级到应用程序版本 1.1 和模型版本 2 时，我添加了两个表 Table H Table K

表 X 和 Y 应删除。

如何识别当前数据模型版本并执行这些删除操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:14:02.870

您可以使用自定义迁移策略和映射模型进行迁移。

1.  您有一个模型版本 1.0 和表 A，版本 1.1 和表 B，*没有表 A*
2.  您创建一个映射模型，从版本 1.0 作为源到 1.1 作为目标。
3.  您创建一个新文件，NSEntityMigrationPolicy 的子类，但如果您不打算在代码中进行一些棘手的转换，则不必实现任何方法。
4.  在您的映射模型中，您有实体映射，并将表 A 设置为源，表 B 设置为目标。类型将自动设置为自定义。
5.  您在自定义策略字段中键入 NSEntityMigrationPolicy 子类名称。您可以使用 NSEntityMigrationPolicy 本身，因为我们没有覆盖任何东西，但我没有尝试过。
6.  在属性映射选项卡上，您会看到表 A 中所有字段的值表达式字段。您在每个字段中键入 $source.attributeNameInYourOldTableGoesHere。
7.  初始化持久存储时，将 NSInferMappingModelAutomaticallyOption 更改为 NO 并将 NSMigratePersistentStoresAutomaticallyOption 更改为 YES。

最好的祝福，

斯文。

# ruby-on-rails - Rails3：带有mongoid的Gem Gmap4rails不显示地图

> ID：10699678
> 
> 赞同：0
> 
> 时间：2012-05-22T09:53:47.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, gmaps4rails

我按照 github 上的说明安装了所有东西。( [Gmaps4Rails-github](https://github.com/apneadiving/Google-Maps-for-Rails) )

问题是地图是空白的，我只能从css看到地图的边框。

模型：

```
class Recipe
  include Mongoid::Document
  include Gmaps4rails::ActsAsGmappable
  acts_as_gmappable 

  field :name, :type => String
  field :city, :type => String
  field :country, :type => String
  field :latitude, :type => Float
  field :longitude, :type => Float
  field :gmaps, :type => Boolean

  def gmaps4rails_address
    "#{self.city}, #{self.country}" 
  end
end 
```

控制器：

```
class RecipesController < ApplicationController
  def index
   @location = Recipe.all.to_gmaps4rails
  end
end 
```

看法：

```
= gmaps4rails(@location) 
```

@location 在数组中包含 lat 和 lng

```
[{"lat":13.055363,"lng":47.811886},{"lat":13.055363,"lng":47.811886}] 
```

正在加载所需的 JS 和 CSS 文件：gmaps4rails.base.js、gmaps4rails.googlemaps.js、gmaps4rails.bing.js、gmaps4rails.mapquest.js、gmaps4rails.openlayers.js、gmaps4rails.css

我在服务器日志或 JS 控制台中没有收到任何错误。我不知道我在这里做错了什么。

任何建议都会非常有帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:37:14.043

我看不到任何提及：

```
<%= yield :scripts %> 
```

在您的代码中。虽然这是强制性的！

# java - 在 JSF 中将 inputText 映射到 Date 对象

> ID：10699680
> 
> 赞同：8
> 
> 时间：2012-05-22T09:53:58.527
> 
> 标签：java, jsf

我对 JSF 很陌生。我正在尝试使用自定义日期选择器（使用 jquery 制作并且不能使用日历组件）在 JSF inpuText 组件中获取日期。我想将此 inputText 映射到 bean 中的 Java Date 对象（最终将作为 Date 存储在 DB 中）。实现此目的的一种方法是将 String 保留在 bean 中，并在 getter 和 setter 中编写转换器，这对我来说看起来不太好。有没有推荐的方法来解决这个问题。任何帮助/提示/链接表示赞赏。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-22T11:24:39.723

你可以这样尝试

```
<h:inputText value="#{backingBean.someDate}">  
   <f:convertDateTime pattern="yyyy-MM-dd"/>  
</h:inputText> 
```

哪里`someDate`是 util date & 在后备 bean 中有访问器方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:40:28.243

我不确定我是否很好地理解了你的问题，尽管从我目前的理解来看，你的问题看起来一点也不复杂。只需以正确的方式保存您的输入并将值传递给您的 bean。日期类的属性，如小时、分钟秒已被弃用（尽管您仍然可以使用它们）。您也可以尝试只传递 long 值，但我不确定它是如何工作的。[你应该在这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Date.html#Date%28int,%20int,%20int%29)找到所有需要的规范

# mobile - 不同分辨率设备的移动网站

> ID：10699683
> 
> 赞同：0
> 
> 时间：2012-05-22T09:54:07.427
> 
> 标签：mobile, views, resolution

我正在创建一个移动网站。我想为分辨率较低的手机加载特定视图，为分辨率较高的手机加载其他视图，例如，

我希望菜单页面采用较低分辨率设备的列表行形式和较高分辨率的图标形式。

我应该使用什么方法？

- 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:05:46.063

Boostrap 响应式设计看起来很适合该场景。

从 twitter 看一下这个库。[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# java - Hibernate Projection 将结果返回为对象

> ID：10699684
> 
> 赞同：0
> 
> 时间：2012-05-22T09:54:09.673
> 
> 标签：java, sql, hibernate, postgresql

我想在休眠中使用投影编写以下sql

```
SELECT id, name, MAX(ver)
  FROM bizterm
 WHERE name ILIKE '%AB%'
 GROUP BY name, id  order by name asc 
```

我写了以下代码

```
Session session=sessionFactory.getCurrentSession();
            Criteria criteria=session.createCriteria(BizTerm.class);
            criteria.add(Restrictions.ilike("name", searchString,MatchMode.ANYWHERE));
            criteria.addOrder(Order.asc("name"));
            ProjectionList projList=Projections.projectionList();
            projList.add(Projections.max("ver"));
            projList.add(Projections.groupProperty("id"));
            projList.add(Projections.groupProperty("name"));
            criteria.setProjection(projList); 
```

在表 id 中，ver 是 PKEY。此查询运行良好，但结果我只得到 3 列的值，即 ver、id、名称也为 Object，还有其他列，如 BizTerm 表中的状态、级别，这些值没有在结果集中返回. 我怎样才能得到那些使用投影？我试过`projList.add(Projections.property("status"));`但它不起作用。我希望执行此查询

```
SELECT id, name,status,level MAX(ver)
  FROM bizterm
 WHERE name ILIKE '%AB%'
 GROUP BY name, id  order by name asc using projection in hibernate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:30:01.217

喜欢这个..现在它的工作没有错误

```
Criteria criteria=session.createCriteria(BizTerm.class);
            criteria.add(Restrictions.ilike("bizTermName", searchString,MatchMode.ANYWHERE));
            criteria.addOrder(Order.asc("bizTermName"));
            ProjectionList projList=Projections.projectionList();
            projList.add(Projections.max("bizTermversion"));
            projList.add(Projections.groupProperty("bizTermId"));
            projList.add(Projections.groupProperty("bizTermName"));
            projList.add(Projections.max("status"));
            projList.add(Projections.max("levels"));
            projList.add(Projections.max("createDate"));
            projList.add(Projections.max("modifyDate")); 
```

注意：我不需要最大状态、级别、创建日期、修改日期，但如果我没有在 max 函数中编写它们，则会出现以下错误

```
[Error Code: 0, SQL State: 42803]  : column "levels" must appear in the GROUP BY clause or be used in an aggregate function 
```

使用 max 功能一切似乎都很好

# android - Android绑定服务-我应该在onServiceDisconnected中手动重新连接还是尝试自动重新连接？

> ID：10699685
> 
> 赞同：9
> 
> 时间：2012-05-22T09:54:11.437
> 
> 标签：android, android-service

如果由于某些意外情况而与绑定服务断开连接，在我调用之后，我应该在 onServiceDisconnected 中手动重新连接还是尝试自动重新连接？

```
public class MyServiceConnection extends Activity implements ServiceConnection {

    MyBinder binder;

    @Override
    protected void onStart() {
        super.onStart();

        connect();
    }

    private void connect() {
        bindService(new Intent(this, MyService.class), 
                this, Service.BIND_AUTO_CREATE);
    }

    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {
        binder = (MyBinder) service;
    }

    @Override
    public void onServiceDisconnected(ComponentName name) {

        binder = null;

        //should i reconnect here ?
        connect();
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T23:31:35.327

根据[ServiceConnection API](http://developer.android.com/reference/android/content/ServiceConnection.html#onServiceDisconnected%28android.content.ComponentName%29)：

> 公共抽象无效 onServiceDisconnected（组件名称名称）
> 
> 当与服务的连接丢失时调用。这通常发生在托管服务的进程崩溃或被终止时。这不会删除 ServiceConnection 本身 - 与服务的绑定将保持活动状态，并且当服务下次运行时，您将收到对 onServiceConnected(ComponentName, IBinder) 的调用。

回到你的问题：

```
@Override
public void onServiceDisconnected(ComponentName name) {
    binder = null;
    //should i reconnect here ?
    connect();
} 
```

这完全取决于实际服务的进程。

**本地服务：**

服务与来自同一个应用程序的其他组件（即绑定到它的活动）在同一进程中运行，当这个单个应用程序范围的进程崩溃或被杀死时，很可能该进程中的所有组件（包括活动绑定到该服务的）也被销毁。在这种情况下，在 onServiceDisconnected() 中调用 connect() 不会产生任何效果，因为当应用程序进程恢复时，一切都从头开始滚动，并且再次重新创建活动，并且服务绑定在活动的 onStart() 回调中。

**远程服务：**

服务在单独的进程中运行，当该进程崩溃或被杀死时，只有实际的服务被销毁，活动在另一个绑定到该服务的进程中仍然存在，因此在其 onServiceDisconnected 中调用 connect() 可能是可以的() 回调以重新创建/重新绑定服务。

在[此处](http://developer.android.com/guide/topics/manifest/service-element.html#proc)查看如何在 AndroidManifest.xml 中配置在单独进程上运行的服务。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-09T23:30:29.033

Bumped into this old question when making a research for a blog post. The accepted answer is quite good, but does not show the entire picture when it comes to bound IPC (remote) services.

State diagram of a connection to bound IPC service looks like this:

[![enter image description here](../Images/498f1df8c280571102e9528fdb1716b2.png)](https://i.stack.imgur.com/VxM9P.png)

And the answer to OP's question is: it depends.

First of all - when service crashes or being killed by OS it **remains bound**. So the question becomes whether the system will re-create the service or not...

*   In case bound IPC service is being killed by OS, it will be re-created and you'll get a call to `onServiceConnected()`, therefore no need to "reconnect".
*   In case bound IPC service crashes, the system will attempt to re-create it once - if it crashes for the second time the system will not re-create it again (tested on JellyBean, Lollipop and Marshmallow).

Theoretically, you could `unbindService()` and then `bindService()` on each call to `onServiceDisconnected()` - this should work (I think).

However, writing a really reliable client for bound IPC service is a bit more work, and the general idea (alongside tutorial app) could be found [here](http://www.techyourchance.com/life-cycle-of-connection-to-bound-ipc-service-in-android/).

# objective-c - 删除 2 行标签上的边距？

> ID：10699686
> 
> 赞同：-1
> 
> 时间：2012-05-22T09:54:23.840
> 
> 标签：objective-c, ios, label, margin

我只是有一点图形问题，我有一个标签，其中包含 2 行文本，但有一个可怕的边距，比如 10px ...

是否有消除或减少此边距的解决方案？

我必须使用 web 视图来使用 css 吗？：/

谢谢，

![在此处输入图像描述](../Images/f9a115ce549ab6c6d08ad6e1abff1f83.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:39:00.443

恐怕没有一个简单的解决方案。您可以尝试此处介绍的一些技巧：[http](http://www.iphonedevsdk.com/forum/iphone-sdk-development/14178-spacing-between-lines-multiline-uilabel.html#) ://www.iphonedevsdk.com/forum/iphone-sdk-development/14178-spacing-between-lines-multiline-uilabel.html# 或将您的标签分成两个不同的标签或使用 uiwebview。

无论如何，除了你有一个本地化标签的情况，使用基于 xml 的动态文本，只需为每一行使用两个不同的标签并随意放置它们

# java - netty的并发编码

> ID：10699688
> 
> 赞同：3
> 
> 时间：2012-05-22T09:54:34.197
> 
> 标签：java, concurrency, netty

编码器的编码方法会同时执行吗？我观察到编码方法可能由不同的线程并发。管道定义为：

```
Channels.pipeline(
    idleHandler,
    new AmfDecoder<GameEvent>(GameEvent.class),
    new AmfEncoder<GameEvent>(),
    concurrencyHandler,
    new WebHandler()); 
```

编码器：

```
public class AmfEncoder<T extends IAmfEvent> extends OneToOneEncoder{
private final SerializationContext serializationContext = new SerializationContext();
private final Amf3Output amfout = new Amf3Output(serializationContext);

@Override
protected Object encode(ChannelHandlerContext arg0, Channel arg1,
        Object arg2) throws Exception {
    T e = (T)arg2;
    ByteArrayOutputStream byteoutStreamSize = new ByteArrayOutputStream();
    amfout.setOutputStream(byteoutStreamSize);
    amfout.writeObject(e.getBody());
    // byteoutStreamSize has small probability become empty at here, in debug mode I can sure e.getBody() has data
    // I thought byteoutStreamSize might be empty by another thread call "amfout.flush()" or "amfout.reset()"
    amfout.flush();
    //...
    amfout.reset();
} 
```

}

Channel.write的调用不仅是属于netty工作线程的线程，还是属于Exeutionhandler中的线程。有一个我自己创建的线程池将调用 Channel.write()。在我将 amfout 和 serializationContext 的 2 个变量移动到 encode() 函数中作为局部变量后，问题就消失了。

Doc 说 ChannelPipeline 是线程安全的，我阅读 netty 3.4.5 发现“添加”、“删除”......操作被锁定，但 sendDownstream 和 sendUpstream 没有锁定。所以如果有不属于worker线程池或ExecutionHandler线程池的线程，并且所有这些线程都调用Channel.write()，解码器和编码器会出现并发问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T12:39:29.630

Channel 管道是线程安全的，但这里的问题是下游事件和上游事件的事件执行模型不同：

*   默认情况下，使用（多个）用户线程执行下游处理程序。

*   默认情况下，下游处理程序不是线程安全的，因为它们可以由多个用户线程以任何顺序执行（通常`DownstreamEvents`是轻量级的，因此它们的处理程序不会在实例变量中维护状态）。查看`OneToOneEncoder`Netty 代码库中的实现。他们都没有保持状态。

*   上游处理程序默认使用单个线程或一个一个地使用多个线程执行（如果使用执行处理程序）。

*   由于单线程事件执行（即使它们可以保持可变状态），上游处理程序是线程安全的。

因此，有人可能会错误地认为下游处理程序与上游处理程序一样是线程安全的。

正如您所说，如果不需要状态，解决方案是将实例变量移动到本地范围。否则，使下游处理方法线程安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:58:26.153

我认为您正确理解了并发性。您必须：

1.  确保您的通道处理程序是线程安全的（没有变异的实例变量）
2.  使用 ChannelPipelineFactory 以便为每个通道创建一个新管道。

# c++ - 如何从地图中获取值？

> ID：10699689
> 
> 赞同：76
> 
> 时间：2012-05-22T09:54:45.930
> 
> 标签：c++, dictionary, stdmap

我有一个如下`map`命名：`valueMap`

```
typedef std::map<std::string, std::string>MAP;
MAP valueMap;
...
// Entering data. 
```

然后我通过引用将此映射传递给函数：

```
void function(const MAP &map)
{
  std::string value = map["string"];
  // By doing so I am getting an error.
} 
```

如何从映射中获取值，该值作为对函数的引用传递？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-05-22T09:59:21.247

`std::map::operator[]`是一个非常量成员函数，并且您有一个 const 引用。

您需要更改签名`function`或执行以下操作：

```
MAP::const_iterator pos = map.find("string");
if (pos == map.end()) {
    //handle the error
} else {
    std::string value = pos->second;
    ...
} 
```

`operator[]`通过向映射添加默认构造的值并返回对它的引用来处理错误。当您只有一个 const 引用时，这是没有用的，因此您需要做一些不同的事情。

如果您的程序逻辑以某种方式保证这已经是关键，您*可以*忽略这种可能性并编写。明显的问题是，如果你错了，那么你会得到未定义的行为。`string value = map.find("string")->second;``"string"`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-01-13T07:12:11.337

`map.at("key")`如果缺少密钥，则抛出异常。

> 如果 k 不匹配容器中任何元素的键，该函数将抛出一个 out_of_range 异常。

[http://www.cplusplus.com/reference/map/map/at/](http://www.cplusplus.com/reference/map/map/at/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-08T16:02:11.173

*Steve Jessop*的[回答](https://stackoverflow.com/a/10699752/2675154)很好地解释了为什么你不能在. *Gabe Rainbow 的*[回答](https://stackoverflow.com/a/21085734/2675154)提出了一个不错的选择。我只想提供一些关于如何使用的示例代码。因此，这是您的增强示例：*`std::map::operator[]``const std::map` *[`map::at()`](http://www.cplusplus.com/reference/map/map/at/)`function()`**

 **```
void function(const MAP &map, const std::string &findMe) {
    try {
        const std::string& value = map.at(findMe);
        std::cout << "Value of key \"" << findMe.c_str() << "\": " << value.c_str() << std::endl;
        // TODO: Handle the element found.
    }
    catch (const std::out_of_range&) {
        std::cout << "Key \"" << findMe.c_str() << "\" not found" << std::endl;
        // TODO: Deal with the missing element.
    }
} 
```

这是一个示例`main()`函数：

```
int main() {
    MAP valueMap;
    valueMap["string"] = "abc";
    function(valueMap, "string");
    function(valueMap, "strong");
    return 0;
} 
```

输出：

> 键“字符串”的值：
> 未找到 abc 键“强”

[Ideone 上的代码](https://ideone.com/VDvdag)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-27T20:14:12.973

主要问题是`operator[]`用于在映射中插入和读取值，因此它不能是 const。
如果键不存在，它将创建一个带有默认值的新条目，增加映射的大小，其中将包含一个带有空字符串的新键，在这种特殊情况下，如果键不存在，则作为值还不存在。
如前所述，您应该避免`operator[]`从地图中读取并使用，`map.at(key)`以确保边界检查。这是人们在使用地图时经常犯的最常见错误之一。你应该使用`insert`and`at`除非你的代码知道这个事实。查看这个关于常见错误的讨论[Facebook 上奇怪地重复出现的 C++ 错误](https://www.youtube.com/watch?v=lkgszkPnV8g&t=1081s)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-08T16:36:34.903

> 如何从映射中获取值，该值作为对函数的引用传递？

好吧，您可以将其作为参考传递。[标准参考包装器](https://en.cppreference.com/w/cpp/utility/functional/reference_wrapper)。

```
typedef std::map<std::string, std::string> MAP;
// create your map reference type
using map_ref_t = std::reference_wrapper<MAP>;

// use it 
void function(map_ref_t map_r)
{
    // get to the map from inside the
    // std::reference_wrapper
    // see the alternatives behind that link
    MAP & the_map = map_r;
    // take the value from the map
    // by reference
    auto & value_r = the_map["key"];
    // change it, "in place"
    value_r = "new!";
} 
```

和测试。

```
 void test_ref_to_map() {

    MAP valueMap;
    valueMap["key"] = "value";
    // pass it by reference
    function(valueMap);
    // check that the value has changed
    assert( "new!" == valueMap["key"] );
} 
```

我认为这很好也很简单。享受 ...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-09T05:19:59.347

虽然有点晚了，但我还是会回答，感谢之前对这个问题的回答，我能够伪造这个重用指针和值的类，它创建了两个映射来存储数据，如果有人感兴趣，这里是代码..

```
template<class T1, class T2> class Bimap
{
std::map<T1, T2*> map1;
std::map<T2, T1*> map2;
public:
    void addRow(T1 &t1, T2 &t2){
        map1.insert(make_pair(t1, &t2));
        map2.insert(make_pair(t2, &t1));
    }
    T2* findForward(T1 t1){
        T2* value = map1.find(t1)->second;
        return value;
    }
    T1* findBackward(T2 t2){
        T1* value = map2.find(t2)->first;
        return value;
    }
}; 
```

使用类：

```
//Init mapp with int,int
Bimap<int,int> mapp;

//Add a row(Record) in bimap
int a = 5;
int b = 7002;
mapp.addRow(a, b);

//Print a record
int *ans= mapp.findForward(a);
cout<<"Bimap Returned:"<<*ans<<endl; 
```**

# javascript - 使用 JavaScript 将 onrightclick 属性添加到画布

> ID：10699693
> 
> 赞同：1
> 
> 时间：2012-05-22T09:55:28.597
> 
> 标签：javascript, html, canvas, event-handling, dojo

我正在尝试将 onrightclick 属性添加到我的画布中，如下所示：

```
canvas.onclick = function(evnt) {
    doSomethingClick();
}

canvas.onrightclick = function(evnt) {
    doSomethingRightClick();              
} 
```

代码很简单，我对“onclick”和“onrightclick”做同样的事情。onclick 部分正在工作，但是当我右键单击时，我会右键单击浏览器。如何按预期覆盖浏览器右键单击？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:56:56.943

可能你正在寻找[`oncontextmenu`](https://developer.mozilla.org/en/DOM/window.oncontextmenu)

```
<canvas id="cnv" width="200" height="200"></canvas>

var cnv = document.getElementById('cnv');
cnv.oncontextmenu = function() {
   alert('right click');  
   return false; 
} 
```

小提琴示例（在 Fx12/MacOS 上试过）：http: [//jsfiddle.net/Jk3Jx/1](http://jsfiddle.net/Jk3Jx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:05:13.413

```
dojo.connect(canvas, 'onclick', function(e) {
  if (dojo.mouse.isRight(e)) {
    ...
  }
}); 
```

如果您想要使用 dojo 小部件的上下文菜单，请查看

[http://dojotoolkit.org/reference-guide/1.7/dijit/Menu.html](http://dojotoolkit.org/reference-guide/1.7/dijit/Menu.html)

# user-interface - 请在黑莓应用程序导航期间等待弹出窗口

> ID：10699694
> 
> 赞同：0
> 
> 时间：2012-05-22T09:55:29.690
> 
> 标签：user-interface, popup, loading, blackberry-jde, listfield

> **可能重复：**
> [黑莓 - 应用程序加载屏幕](https://stackoverflow.com/questions/1503313/blackberry-application-loading-screen)

请等待应在单击时显示，然后应加载数据。加载数据后，pleasewait poup 应该被关闭..如何实现它？代码：1.在SplashScreen的末尾：

```
UiApplication.getUiApplication().invokeLater(new Runnable()
    {
        public void run()
           {
               try 
               {
                   Thread.sleep(2000);                  
               } 
               catch (InterruptedException e)
               {
                   Dialog.alert(e.getMessage());
               }
               UiApplication.getUiApplication().popScreen(SplashScreen.this);                 
               UiApplication.getUiApplication().pushScreen(new ListScreen1());                                                        
           }
    }
    ); 
```

2.列表屏幕1

```
class ListScreen1 extends MainScreen 
{
    //
    //
    //
    public ListScreen1()
    {
        ObjectListField lf = new ObjectListField()
        {           
            protected boolean navigationClick(int status, int time)
            {
                return true;
                //HttpRequest
                //push(new ListScreen2) 
            }
        };
                    //httpRequest
                    //addlist
    }
    class ListCallBack implements ListFieldCallback
    {       
       public  void drawListRow(final ListField list, final net.rim.device.api.ui.Graphics g, final int index, final int y, final int w)
       {               
          //                    
       }
       public Object get(ListField list, int index)
       { 
           //return 
       } 
       public int getPreferredWidth(ListField list)
       {
           //return
       }
       public int indexOfList(ListField listField, String prefix, int start) 
       {
          //return 
       }       
    }           
} 
```

3.列表屏幕2：

```
class ListScreen2 extends MainScreen 
{
    //
    //
    //
    public ListScreen2()
    {
        ObjectListField lf = new ObjectListField();
        /httpRequest
                    //addlist
    }
    class ListCallBack implements ListFieldCallback
    {       
       public  void drawListRow(final ListField list, final net.rim.device.api.ui.Graphics g, final int index, final int y, final int w)
       {               
          //                    
       }
       public Object get(ListField list, int index)
       { 
           //return 
       } 
       public int getPreferredWidth(ListField list)
       {
           //return
       }
       public int indexOfList(ListField listField, String prefix, int start) 
       {
          //return 
       }       
    } 
```

如何管理请在这些课程之间等待？请帮忙

# visual-studio-2008 - 不允许访问数据库文件

> ID：10699702
> 
> 赞同：1
> 
> 时间：2012-05-22T09:56:22.653
> 
> 标签：visual-studio-2008, windows-7, .net-3.5, windows-xp

我有一个试图在 Win7 上安装的 WinXP 应用程序（在 WinXP 中完美运行）。安装很好，但是当我双击应用程序加载它时，我收到一条消息：

```
Access to the database file is not allowed [file path goes here]. 
```

目前，我将连接设置为：

```
SqlCeConnection("Data Source=|DataDirectory|/db.sdf") 
```

我也试过：

```
SqlCeConnection("Data Source=*|DataDirectory|*db.sdf") 
```

和

```
SqlCeConnection("Data Source=*|DataDirectory|*/db.sdf") 
```

为此我收到了不同的错误消息：

```
The file name is not valid 
```

为什么会发生这种情况，我该如何阻止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:48:45.840

默认情况下，|DataDirectory| 变量将扩展如下：

*   对于放置在用户计算机目录中的应用程序，这将是应用程序的 (.exe) 文件夹。
*   对于在 ClickOnce 下运行的应用程序，这将是 ClickOnce 创建的特殊数据文件夹
*   对于 Web 应用程序，这将是 App_Data 文件夹

在 Windows7`C:\program files (x86)\yourexefolder`中无法写入目录。如果将数据库安装在应用程序的子文件夹或同一文件夹中，则会出现此错误。

您应该将数据库安装到 %APPDATA% 目录

例如在 C# 中，您可以通过这种方式设置 DataDirectory 路径

```
string myDataDir = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData) + "\\yourAppDataFolder";

// Set |DataDirectory| value 
AppDomain.CurrentDomain.SetData("DataDirectory",myDataDir); 
```

# ios - 找不到实体名称的 NSManagedObjectModel

> ID：10699707
> 
> 赞同：0
> 
> 时间：2012-05-22T09:56:54.947
> 
> 标签：ios, core-data

我得到错误：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“+entityForName：找不到实体名称“CorePlaylist”的 NSManagedObjectModel

但它在不久前奏效了！`didFinishLaunchingWithOptions`现在我在终止之前收到错误消息。

我的代码是：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.
    NSLog(@"DID finish launching %@", [self managedObjectContext]);

    PlaylistsViewController *table = [[PlaylistsViewController alloc] init];

    NSManagedObjectContext *context = [self managedObjectContext];

    if (!context) {
        NSLog(@"\nCould not create *context for self");
    }

    table.context = context;

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

编辑：

```
-(void) getData {
context = [(ClientAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
NSEntityDescription *entity = [NSEntityDescription entityForName:@"CorePlaylist" inManagedObjectContext:context];
NSFetchRequest *request = [[NSFetchRequest alloc] init];

[request setFetchBatchSize:20];
[request setEntity:entity];

NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"playlistid" ascending:YES];

NSArray *newArray = [NSArray arrayWithObject:sort];

[request setSortDescriptors:newArray];

NSError *error;

NSMutableArray *results = [[context executeFetchRequest:request error:&error] mutableCopy];

[self setArr:results];

[self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:01:31.760

确保您的 coreDataModel 文件在项目中，并且您调用的实体拼写正确（区分大小写）。

如果您在您的设备上进行测试，您可能需要完全删除应用程序以再次部署它以防止损坏的数据库问题。

# json - 如何将单个标记添加到 Google Map v3？

> ID：10699708
> 
> 赞同：0
> 
> 时间：2012-05-22T09:56:56.020
> 
> 标签：json, google-maps, google-maps-api-3, map

在下面的代码中，我一直在使用 Google Maps v3 显示地图的灰度，其中包含来自数据库的所需纬度和经度。有人可以帮我弄清楚如何在所需的纬度和经度上只放置一个标记。

```
<script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?sensor=false">
</script>

<script type="text/javascript">
var map;
var latitude = <?php echo $store_details->latitude; ?>; 
var longitude = <?php echo $store_details->longitude; ?>;
var brooklyn = new google.maps.LatLng(latitude, longitude);
var MY_MAPTYPE_ID = 'Greyscale';

function initialize() {
    var graystyle = [{
        featureType: "all",
        elementType: "all",
        stylers: [ { saturation: -100 }, { visibility: "on" } ]
    }];

    var mapOptions = {
        zoom: 15,
        center: brooklyn,
        mapTypeControlOptions: {
            mapTypeIds: [google.maps.MapTypeId.ROADMAP, MY_MAPTYPE_ID]
        },
        mapTypeId: MY_MAPTYPE_ID
    };

    map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);

    var styledMapOptions = {
        name: "Greyscale"
    };

    var grayMapType = new google.maps.StyledMapType(graystyle, styledMapOptions);
    map.mapTypes.set(MY_MAPTYPE_ID, grayMapType);
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:04:10.107

```
 var latlng = new google.maps.LatLng(latitude,longitude);

  var marker = new google.maps.Marker({
      position: latlng,
      map: map
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:00:40.747

你试过文档吗？ [https://developers.google.com/maps/documentation/javascript/overlays#Markers](https://developers.google.com/maps/documentation/javascript/overlays#Markers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:02:26.753

```
 var marker = new google.maps.Marker({
      position: latLng,
      map: map
    }); 
```

这是语法，如果您想要示例，[请单击此处](http://code.google.com/apis/ajax/playground/?exp=maps#markers_v3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T07:18:30.210

我使用一个函数来放置尽可能多的标记，而无需一次又一次地编码相同的行（标记是一个全局数组）：

```
var markers = createMarker(map, new google.maps.LatLng(50.746853, 5.497167), MyTitle, MyMarkerImage, '#FF0099');

function createMarker(map, pos, titleString, myJPGfile, colorCode) {

    var marker = new google.maps.Marker({ 
                        map: map, 
                        position: pos, 
                        title: titleString, 
                        icon: myJPGfile,
                        color: colorCode });

    return marker;
} 
```

# javascript - 当用户点击离开它时，我不希望弹出窗口最小化

> ID：10699712
> 
> 赞同：0
> 
> 时间：2012-05-22T09:57:05.837
> 
> 标签：javascript, html, css

下面是我在用户单击图像链接时显示弹出窗口的代码：

Javasript

```
 function plusbutton(mylink, windowname)
    {
    if (! window.focus)return true;
    var href;
    if (typeof(mylink) == 'string')
       href=mylink;
    else
       href=mylink.href;
    window.open(href, windowname, 'width=800,height=550,scrollbars=yes');
    return false;
} 
```

HTML

```
<a href="previousquestions.php" onclick="return plusbutton(this, 'previousquestions');">
<image src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage"/>
</a> 
```

我的问题是，当用户打开窗口时，当用户点击离开窗口时，窗口会最小化。我不希望这种情况发生。如果用户点击离开窗口，那么它仍然应该显示窗口。

就像在Microsfot Word上单击“另存为”时，出现“另存为”窗口时，如果单击它，窗口仍然出现，说明您必须保存文档或取消另存为才能被能够对文档执行任何其他操作。我希望上面的弹出窗口也发生同样的情况，如何实现？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:10:29.647

您正在尝试做的事情称为“模态窗口”，而***使用浏览器窗口无法实现此目标***。事实上，你甚至不能保证它是一个窗口：某些浏览器在某些情况下只会打开一个新标签页。

您应该做的是在您的应用程序中打开一个带有纯 HTML 的窗口。一些库允许您轻松地做到这一点：例如 jQuery UI 对话框。查看[http://jqueryui.com/demos/dialog/#modal](http://jqueryui.com/demos/dialog/#modal)

如果您的所有架构都将您的弹出内容限制为通过单独的 URL 传递，您可以执行以下操作之一：

*   在弹出窗口中放置和 iframe（简单但肮脏）
*   或者使用 XMLHttpRequest 检索 HTML 内容并使用它来定义弹出窗口的内容。也许有点棘手，但更清洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:06:10.887

您应该显示一个模态 div，它看起来像一个窗口，但是当您单击时它不会关闭

如果你可以使用像 jQuery 这样的 javascript 库，你可以这样做：

```
$('yourdivselector').dialog({modal : true}); 
```

将 modal 选项设置为 true

[http://docs.jquery.com/UI/Dialog](http://docs.jquery.com/UI/Dialog)

# android - Titanium Mobile：如何在 Android 上镜像 ImageView？

> ID：10699713
> 
> 赞同：1
> 
> 时间：2012-05-22T09:57:06.617
> 
> 标签：android, imageview, titanium-mobile, mirror

> **可能重复：**
> [在android中绘制镜像位图](https://stackoverflow.com/questions/7925278/drawing-mirrored-bitmaps-in-android)

我正在使用 Titanium Mobile 开发 iOS 和 Android 应用程序并遇到以下问题：我想镜像 ImageView 并为此创建以下代码：

```
var transformation = Ti.UI.create2DMatrix();
transformation = transformation.scale(-1, 1);
imageView.transform = transformation; 
```

这在 iOS 上运行良好，但在 Android 上不会显示图像。我还能做些什么来在 Android 上使用 Titanium 镜像图像？还是我的实际代码做错了什么？

非常感谢您的任何回答！托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:24:00.340

现在我可以自己回答这个问题了。我做了一些进一步的测试，最终解决方案非常简单。ImageView 将移动到镜像的左侧（在我的情况下为 320px）。将 ImageView 的“left”参数设置为相应的值会在屏幕上显示 ImageView。所以它是正确创建的，但在屏幕上不可见。

也许这有助于其他在 Titanium 上遇到相同问题的用户，因为在 iOS 中，left-value 没有设置为新值；我上面发布的代码一切正常。

# python - 将多个查询与 numpy 掩码相结合

> ID：10699715
> 
> 赞同：0
> 
> 时间：2012-05-22T09:57:13.103
> 
> 标签：python, numpy, masking

我想做的是从一个文件中绘制两行，如下所示：

```
number          pair        atom       count         shift      error
 1            ALA ALA       CA         7624           1.35           0.13
 1            ALA ALA       HA         7494          19.67          11.44
38            ARG LYS       CA         3395          35.32           9.52
38            ARG LYS       HA         3217           1.19           0.38
38            ARG LYS       CB         3061           0.54           1.47
39            ARG MET       CA         1115          35.62          13.08
39            ARG MET       HA         1018           1.93           0.20
39            ARG MET       CB          976           1.80           0.34 
```

我想要做的是使用它们的原子值绘制包含原子 CA 和 CB 的行。所以基本上我想做：

```
atomtypemask_ca = data['atom'] == 'CA'
xaxis = np.array(data['shift'][atomtypemask_ca])
aa, atom = data['aa'][atomtypemask_ca], data['atom'][atomtypemask_ca]

atomtypemask_cb = data['atom'] == 'CB'
yaxis = np.array(data['shift'][atomtypemask_cb])

plot (xaxis, yaxis) 
```

破坏我的一天的原因是某些值没有 CB 条目。我如何绘制这种东西，忽略只设置了两个原子值之一的条目？我当然可以对其进行编程，但我认为这应该可以使用掩码来实现，从而产生更清晰的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:24:09.597

我猜，第一列是残数。用那个。我不知道您的数据结构或`shift`指的是什么，但您应该能够执行以下操作：

```
In : residues
Out: array([ 1,  1, 38, 38, 38, 39, 39, 39])

In : atom
Out: 
array(['CA', 'HA', 'CA', 'HA', 'CB', 'CA', 'HA', 'CB'], 
      dtype='|S2')

In : shift
Out: array([7624, 7494, 3395, 3217, 3061, 1115, 1018,  976])

# rows with name 'CB'
In : cb = atom=='CB'

# rows with name 'CA' _and_ residues same as 'CB'
In : ca = numpy.logical_and(numpy.in1d(residues, residues[cb]), atom=='CA')
# or if in1d is not available
# ca = numpy.logical_and([(residue in residues[cb]) for residue in residues], atom=='CA')

In : shift[ca]
Out: array([3395, 1115])

In : shift[cb]
Out: array([3061,  976]) 
```

# sql - SQL Server：备份所有数据库

> ID：10699716
> 
> 赞同：3
> 
> 时间：2012-05-22T09:57:16.397
> 
> 标签：sql, sql-server, tsql, sql-server-2008, backup

我想知道是否有任何方法可以定期将整个 SQL Server（我们使用 SQL Server 2008）备份到特定位置。我知道我们可以备份单个特定的数据库，但是为了便于使用，并且每次我想要一个新数据库时都不必设置备份，有没有办法做到这一点？

但是，如果有的话，我必须有一种方法可以轻松地从该服务器备份中恢复单个数据库，就好像我已经单独备份了它们一样。

使用的方法只是一个纯粹的备份，没有区别，所以不必担心并发症。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:00:40.093

您可以运行以下脚本，只需将 @path 变量更改为您要存储数据库的位置。

```
DECLARE @name VARCHAR(50) -- database name  
DECLARE @path VARCHAR(256) -- path for backup files  
DECLARE @fileName VARCHAR(256) -- filename for backup  
DECLARE @fileDate VARCHAR(20) -- used for file name 

SET @path = 'C:\Backup\'  

SELECT @fileDate = CONVERT(VARCHAR(20),GETDATE(),112) 

DECLARE db_cursor CURSOR FOR  
SELECT name 
FROM master.dbo.sysdatabases 
WHERE name NOT IN ('master','model','msdb','tempdb')  

OPEN db_cursor   
FETCH NEXT FROM db_cursor INTO @name   

WHILE @@FETCH_STATUS = 0   
BEGIN   
       SET @fileName = @path + @name + '_' + @fileDate + '.BAK'  
       BACKUP DATABASE @name TO DISK = @fileName  

       FETCH NEXT FROM db_cursor INTO @name   
END   

CLOSE db_cursor   
DEALLOCATE db_cursor 
```

从...获取：

[http://www.mssqltips.com/sqlservertip/1070/simple-script-to-backup-all-sql-server-databases/](http://www.mssqltips.com/sqlservertip/1070/simple-script-to-backup-all-sql-server-databases/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-11T10:08:24.397

考虑备份隐藏的资源数据库

```
Use master
GO

--enable
sp_configure 'show advanced options'
GO
/* 0 = Disabled , 1 = Enabled */
sp_configure 'xp_cmdshell', 1
GO
RECONFIGURE WITH OVERRIDE
GO

--===Resource file details
SELECT 'ResourceDB' AS 'Database Name'
    , NAME AS [Database File]
    , FILENAME AS [Database File Location] 
FROM sys.sysaltfiles 
    WHERE DBID = 32767
ORDER BY [Database File]
GO

--===Copy resource files
DECLARE @ResDataFile VARCHAR(1000), @ResLogFile VARCHAR(1000)
SELECT 
    @ResDataFile = CASE NAME WHEN  'Data' THEN FILENAME ELSE @ResDataFile END,
    @ResLogFile = CASE NAME WHEN 'Log' THEN FILENAME ELSE @ResLogFile END
FROM sys.sysaltfiles 
WHERE DBID = 32767

SELECT @ResDataFile, @ResLogFile

DECLARE @cmd VARCHAR(1000)

--===Copy data file
SELECT @cmd = 'COPY /Y "' + @ResDataFile + '" "G:\SQLBackups"'
--PRINT @cmd
EXEC xp_cmdshell @cmd

--===Copy log file
SELECT @cmd = 'COPY /Y "' + @ResLogFile + '" "G:\SQLBackups"'
--PRINT @cmd
EXEC xp_cmdshell @cmd

GO
--Disable
sp_configure 'show advanced options'
GO
/* 0 = Disabled , 1 = Enabled */
sp_configure 'xp_cmdshell', 0
GO
RECONFIGURE WITH OVERRIDE
GO 
```

# c# - 使用 IXmlSerializable 时未调用 ReadXml

> ID：10699717
> 
> 赞同：1
> 
> 时间：2012-05-22T09:57:17.613
> 
> 标签：c#, .net, xml, serialization, deserialization

我在尝试使用 IXmlSerializable 时遇到了一些问题。反序列化时，ReadXml 方法似乎没有被调用，而 WriteXml 确实如此。

这是代码的精简版本。

```
public interface ICharacter { 
string FullName { get; set; }
}

public class Character : ICharacter, IXmlSerializable {
    public string FullName { get; set; }

    public Character() {
        //apply default character information
        FullName = string.Empty;
    }
}

public void ReadXml(XmlReader reader) {
    if (reader == null) return;
    //just using null to see if it's called, i've used a break point to check if it was fired
}

public void WriteXml(XmlWriter writer) {
    writer.WriteElementString("FullName", FullName);
}
} 
```

要序列化和反序列化，我执行以下操作：

```
 //serialise example
        Character character = new Character();
        using (StringWriter stringWriter = new StringWriter()) {
            XmlSerializer xmlSerializer = new XmlSerializer(typeof(Character));
            xmlSerializer.Serialize(stringWriter, character);
            xml = stringWriter.ToString();
        }            

        //deserialise example 
        using (StringReader stringReader = new StringReader(xml)) {
            XmlSerializer xmlSerializer = new XmlSerializer(typeof(UserCharacter));
            _character = (Character)xmlSerializer.Deserialize(stringReader);
        } 
```

我只是在设置这个类时做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:29:38.297

我最初的印象是从 IXmlSerializable 继承使我能够读取和写入所有传入的 xml 数据。但是，会进行验证以确保类类型相同。因此我需要序列化和反序列化`Character`。

我的意图是能够序列化子类。我通过使用该`WriteXml`方法并在该方法中使用反射来基于根节点获取关联类型来管理这一点。

我希望这个解释对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:35:20.967

```
public class UserCharacter : Character
{
    public void ReadXml(XmlReader reader)
    {
        base.ReadXml(reader);
    }
    public void WriteXml(XmlWriter writer)
    {
        base.WriteXml(writer);
    }
} 
```

# html - CSS box-shadow，顶部插入和底部标准

> ID：10699722
> 
> 赞同：4
> 
> 时间：2012-05-22T09:57:25.677
> 
> 标签：html, css

我有`p`元素，我想放置顶部盒子阴影插图和底部标准。这可以通过 CSS 完成，还是最好使用图像来实现这种效果？

```
.mali_oglas_text:before{
    content: "";
    width: 100%; height: 20px;
    top:0; left:0;    
    z-index: -1;
     box-shadow: inset 0 0 5px 0 5px rgba(0, 0, 0, 0.4);
     -moz-box-shadow: inset 0 0 5px 5px rgba(0, 0, 0, 0.4);
}
.mali_oglas_text {clear: both; margin: 0 5px; padding: 7px; background: white; position: relative;
-webkit-box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.4);
-moz-box-shadow:    0px 3px 10px rgba(0, 0, 0, 0.4);
box-shadow:         0px 3px 10px rgba(0, 0, 0, 0.4);
}
```

```
<p class="mali_oglas_text">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis. 
 </p>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:29:46.333

尝试这个。

```
.shadow
{
-webkit-box-shadow: inset 0px 8px 4px -4px #0f0, 
-moz-box-shadow: inset    0px 3px 10px #0f0;

-webkit-box-shadow: 0px 3px 10px #2a2a2a;
-moz-box-shadow:    0px 3px 10px #2a2a2a;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-19T06:20:50.793

您可以使用此代码

```
body {
            margin: 0px;
            padding: 0px;
        }
        .mali_oglas_text:before{
            content: "";
            width: 100%;
            height: 164px;
            top:0;
            left:0;    
            z-index: 9999;
            box-shadow: 0px 10px rgba(221,221,221);
            position: absolute;
        }
        .mali_oglas_text {
            clear: both;
            margin: 30px;
            padding: 30px;
            font-size: 18px;
            line-height: 26px;
            background: white;
            position: relative;
            -webkit-box-shadow: inset 0 20px 20px -20px rgba(0,0,0,0.8);
            -moz-box-shadow: inset 0 20px 20px -20px rgba(0,0,0,0.8);
            box-shadow: inset 0 20px 20px -20px rgba(0,0,0,0.8);
        }
        h1 {
            clear: both;
            margin: 30px;
            padding: 30px;
            font-size: 18px;
            line-height: 26px;
            background: white;
            box-shadow: inset 0 10px 5px #dbdbdb, 0 6px 0px #dbdbdb;
        }
```

```
<p class="mali_oglas_text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis.</p>
<h1>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mi mauris, egestas ut luctus sit amet, gravida et libero. Morbi mollis nisi vitae urna rhoncus tristique. Vivamus egestas ornare facilisis.</h1>
```

# extjs4 - ExtJS4 控制器未获取存储（空）

> ID：10699723
> 
> 赞同：2
> 
> 时间：2012-05-22T09:57:28.813
> 
> 标签：extjs4

我有一个`ProjectsController`赞：

```
Ext.define('SimpleTodo.controller.ProjectsController', {
    extend: 'Ext.app.Controller',
    refs: [
        { ref: 'addProjectPanel', selector: '#addProjectPanel' }
    ],
    init: function() {
        this.control({
            'button[action=addProject]': {
                click: this.addProject
            }
        });
    },
    addProject: function() {
        var form = this.getAddProjectPanel().getForm();
        if (form.isValid()) {
            var projectsStore = Ext.data.StoreManager.lookup('projects'); // Am getting null here
            projectsStore.add(form.getFieldValues());
            projectsStore.sync();
        } else {
            Ext.Msg.alert('INVALID!');
        }
    }
}); 
```

我相信问题是因为商店还没有初始化？那我应该如何修改我的代码？我的商店定义如下：

```
Ext.define('SimpleTodo.store.Projects', {
    extend: 'Ext.data.Store',
    requires: [
        'SimpleTodo.model.Project'
    ],
    model: 'SimpleTodo.model.Project',
    storeId: 'projects'    
}); 
```

我在尝试加载我的商店时遇到了同样的问题，从而填充了我的 Gridview/Table。我通过将功能移动到启动来修复它，不知道这是不是正确的方法？在文档中，`init`使用

```
Ext.define('SimpleTodo.controller.SidebarController', {
    extend: 'Ext.app.Controller',
    ...
    launch: function() {
        var projectsStore = Ext.data.StoreManager.lookup('projects');
        projectsStore.load();
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:42:08.023

添加

```
stores:
[
  'Projects'
], 
```

到控制器代码，然后你可以使用

```
getProjectsStore(); 
```

参考。看看[http://docs.sencha.com/ext-js/4-0/#!/guide/mvc_pt3](http://docs.sencha.com/ext-js/4-0/#!/guide/mvc_pt3)， 1\. 获取参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:17:39.920

您是否配置了代理来加载数据？

无论如何放置模型：[模型名称]，商店：[商店名称]，

进入控制器

设置成 Store autoLoad:true;

在模型中设置一个代理来告诉如何将数据加载到存储中。

参考： [http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Proxy](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Proxy)

# .net - 卸载前关闭 .NET 应用程序

> ID：10699724
> 
> 赞同：1
> 
> 时间：2012-05-22T09:57:33.227
> 
> 标签：.net, windows-installer

我继承了一个现有的 .NET 应用程序 (C#)，它由一个 Windows 服务和一个控制 GUI 组成。GUI 应用程序、服务和设置项目嵌入在 vs2010 解决方案中。GUI 是一个由静态主类启动的 Windows 窗体，因为它在最小化时必须驻留在托盘中。GUI 有一个计时器，它定期检查服务是否处于活动状态，并相应地启用/禁用弹出菜单“启动服务”和“停止服务”条目。问题是，当我尝试卸载时，该服务在 GUI 之前被删除，并且 GUI 中的 timer_Tick 抛出异常，因为它没有找到该服务。这是主类用来启动应用程序的代码：

```
static class Program
{
    /// <summary>
    /// Punto di ingresso principale dell'applicazione.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new frmMain());
    }
} 
```

计时器执行的代码（我添加了 try/catch 块来捕获异常）：

```
private void tmrCheckService_Tick(object sender, EventArgs e)
    {
        try
        {
            ServiceController service = new ServiceController("MyService");
            if (service.Status == ServiceControllerStatus.Running)
            {
                startToolStripMenuItem.Enabled = false;
            }
            else
            {
                startToolStripMenuItem.Enabled = true;
            }

            service = null;
        }
        catch (InvalidOperationException oEx)
        {
            //tmrCheckService.Stop();
            //this.Close();
        }
    } 
```

如果我取消注释 catch 块中的代码，应用程序将退出并且卸载成功。我不确定这是管理错误的最佳方法。我更喜欢管理卸载过程，在删除服务之前停止和删除 GUI，但我找不到这样做的方法。我认为一个可能的解决方案是覆盖服务安装程序的 on beforeuninstall 方法，找到附加到我的 GUI 应用程序的进程并以编程方式将其终止。如果这个解决方案更好，我怎么能实现它？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:43:57.773

我认为，如果您已卸载该服务，则可能会出现异常..您需要处理的异常。你唯一的选择是从服务到用户界面的某种形式的卸载通知，但这似乎过于复杂。只需处理任何异常并整理任何资源

# javascript - JavaScript 单引号和双引号中的转义字符

> ID：10699726
> 
> 赞同：5
> 
> 时间：2012-05-22T09:57:47.190
> 
> 标签：javascript, escaping

我有一个关于在 JavaScript 中转义字符的问题，希望您能提供帮助。假设我有以下 JavaScript 代码：

```
document.write("<img src=\"http://www.google.com\" />"); 
```

现在在上面的示例中，您可以看到我已经开始`document.write`使用双引号`"`，因此为什么我需要转义 < 中的引号`img src="" />`以确保 JavaScript 仍然认为它是一个字符串。

但在下面的示例中，您可以看到我使用单引号`'`来开始`document.write`语句。我的问题是我还需要转义双引号吗？我知道如果没有这个声明将起作用，但最佳实践是什么？

```
document.write('<img src=\"http://www.google.com\" />'); 
```

我问的原因是我写了一个条件语句，它会触发一个图像（根据上面的行），但它似乎没有工作，并排除了可能导致这种情况的所有可能性。我几乎每天都会遇到这样的事情，所以任何帮助都将不胜感激。这可能是一个愚蠢的问题，所以提前道歉......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T09:59:04.307

使用单引号时，您只需要转义单引号，而不是双引号。

（编辑：反之亦然！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T10:00:54.637

```
document.write('<img src="http://www.google.com" onClick="foo(\'bar\');" />'); 
```

您只需要转义您正在使用的相同类型的引号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T10:07:50.713

到现在为止，您已经了解了情况：无需转义您未用作该特定字符串分隔符的引号。但是：最佳实践是另一回事。我知道有些人会告诉你“总是转义引号”是养成的好习惯。我不同意。与其他一些语言不同，JavaScript 在转义字符方面相当宽松：在您的第二个示例中，不会打印出反斜杠。

情况并非总是如此，所以我的建议是：在使用的引号中保持一致（单 || 双），并且只转义需要转义的引号。根据您使用的其他语言，您可能需要考虑一下您将使用哪些引号。例如，如果您使用 PHP，请坚持使用单引号，因为双引号不仅仅用于分隔字符串。如果您习惯于编写类 C 语言（或 Java），最好保持使用双引号的习惯，因为这些语言中单引号和双引号之间的区别更大

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T10:00:48.750

`document.write('<img src="http://www.google.com" />');`会工作得很好。

同样重要`document.write("<img src='http://www.google.com' />");`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T10:01:24.337

```
<html>
<body>

<script type="text/javascript">

document.write(escape("<img src=\"http://www.google.com\" />"));

</script>

</body>
</html> 
```

# java - 如何在 Maven 中使 PROVIDED 成为 POM 类型的依赖项

> ID：10699734
> 
> 赞同：3
> 
> 时间：2012-05-22T09:58:05.490
> 
> 标签：java, maven, build, pom.xml

我在我的 pom 文件中使用以下依赖项来解决编译错误。我已经提供了它的范围，但是在构建 WAR 文件时仍然添加了相关的依赖 jar。请帮助我了解如何进行此操作。

提前致谢！

```
 <dependency>
        <groupId>groupId</groupId>
        <artifactId>artifactId</artifactId>
        <version>version</version>
        <type>pom</type>            
        <scope>provided</scope>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:00:00.173

您确定提供范围的依赖项没有包含在其他依赖项中吗？你检查过你的 pom 的依赖图吗？

# vb.net - VB.net 中的 If() 函数之谜

> ID：10699740
> 
> 赞同：5
> 
> 时间：2012-05-22T09:58:38.787
> 
> 标签：vb.net, if-statement

我有这个代码：

```
dstCell.CELL_VALUE_INT = If(srcCell.CELL_VALUE_FLOAT IsNot Nothing,
                            Math.Round(CDbl(srcCell.CELL_VALUE_FLOAT)),
                            Nothing) 
```

当**srcCell.CELL_VALUE_FLOAT 是 Nothing**它神秘地评估为 True 部分！

有趣的是，一个正常的 If 语句正确地评估为 False 部分：

```
If (srcCell.CELL_VALUE_FLOAT IsNot Nothing) Then
    dstCell.CELL_VALUE_INT = Math.Round(CDbl(srcCell.CELL_VALUE_FLOAT))
Else
    dstCell.CELL_VALUE_INT = Nothing
End If 
```

有任何想法吗？

感谢你！

编辑： CELL_VALUE_FLOAT 是 Nullable（双精度）， CELL_VALUE_INT 是 Nullable（整数）

在 Quickwatch 中，条件将 correclty 评估为 False，但在运行 If() 函数时，评估为 True 部分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T10:19:44.967

> 当 srcCell.CELL_VALUE_FLOAT 是 Nothing 它神秘地评估为 True 部分！

不，它没有。它只是将错误部分 ( `Nothing`) 评估为`0`，因此设置`CELL_VALUE_INT`为 0。

* * *

让我详细说明：表达式

```
Dim i As Integer? = If(False, 1, Nothing) 
```

充满。`i`_ `0`（测试一下，如果你不相信我的话。）

为什么会这样？`Nothing`在 VB.NET 中与`null`在 C# 中不同。如果与值类型一起使用，`Nothing`则表示“该类型的默认值”。将(not )`If`推断为and的常见类型，因此计算结果为.`Integer``Integer?``1``Nothing``Nothing``default(Integer) = 0`

您可以按如下方式解决此问题：

```
Dim i As Integer? = If(False, 1, DirectCast(Nothing, Integer?)) 
```

在您的示例中，这意味着

```
dstCell.CELL_VALUE_INT = If(srcCell.CELL_VALUE_FLOAT IsNot Nothing,   
                            Math.Round(CDbl(srcCell.CELL_VALUE_FLOAT)),   
                            DirectCast(Nothing, Integer?)) 
```

这现在应该产生正确的值。

* * *

由于这是非常令人惊讶的行为，我前段时间提交了[Microsoft Connect 建议以添加编译器警告。](http://connect.microsoft.com/VisualStudio/feedback/details/496905/if-operator-not-returning-a-nullable-type)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T10:30:18.410

`Nothing`在 VB.NET 中并不完全等于`null`在 C# 中它更像是`default(T)`T 是一个类型。

```
' VB:
dim x as DateTime = DateTime.MinValue
If x Is Nothing then
    Console.WriteLine("True")
End if

' C#
var x = DateTime.MinValue
if (x == default(DateTime))
    Console.WriteLine("True");

if (x == null) ' throw a compile time error 
```

和

```
dim x as Double = nothing ' x will be 0 (default for Double) 
```

如果期望两个返回值是相同的类型，则内联构建。所以你真正在做的是：

```
dstCell.CELL_VALUE_INT = If(srcCell.CELL_VALUE_FLOAT IsNot Nothing,
                            Math.Round(CDbl(srcCell.CELL_VALUE_FLOAT)),
                            Convert.ToDouble(Nothing)) 
```

因为 false 部分在内部被转换为 double 并且`dstCell.CELL_VALUE_INT`将是 0 而不是什么都没有。

试试这个：

```
dstCell.CELL_VALUE_INT = If(srcCell.CELL_VALUE_FLOAT IsNot Nothing,
                         Ctype(Math.Round(CDbl(srcCell.CELL_VALUE_FLOAT)), Integer?),
                         Nothing) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:07:37.523

假设您的价值是[`Single`](http://msdn.microsoft.com/en-us/library/xay7978z%28v=vs.80%29.aspx)（浮动）：

的默认值为`Single`0 不是`Nothing`。

[`Nullable(Of T)`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)如果要检查空值，可以使用 a 。

```
Dim srcCell.CELL_VALUE_FLOAT As Nullable(Of Single)
srcCell_CELL.VALUE_FLOAT = Nothing
Dim dstCell.CELL_VALUE_INT As Nullable(Of Int32) = _
    (If(srcCell.CELL_VALUE_FLOAT.HasValue,
        CInt(Math.Round(CDbl(srcCell.CELL_VALUE_FLOAT))),
        Nothing)) 
```

# android - 通过它的 ArrayAdapter 过滤多行列表视图

> ID：10699742
> 
> 赞同：3
> 
> 时间：2012-05-22T09:58:52.777
> 
> 标签：android, listview, filter, android-arrayadapter

我正在使用这样的 ArrayAdapter 创建一个 ListView：

```
final ListView lv = (ListView) findViewById(R.id.listView1);

final EntryAdapter adapter = new EntryAdapter(this, items);
        lv.setAdapter(adapter); 
```

和适配器看起来像：

```
this.items = items;
        vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        ViewHolder holder;

        final Item i = items.get(position);
        if (i != null) {
            if(i.isSection()){
                SectionItem si = (SectionItem)i;
                v = vi.inflate(R.layout.list_item_section, null);

                v.setOnClickListener(null);
                v.setOnLongClickListener(null);
                v.setLongClickable(false);

                final TextView sectionView = (TextView) v.findViewById(R.id.list_item_section_text);
                sectionView.setText(si.getTitle());
            }else{
                EntryItem ei = (EntryItem)i;
                v = vi.inflate(R.layout.carlistdetails, null);
                holder = new ViewHolder();
                final TextView name = (TextView)v.findViewById(R.id.name);
                final TextView location = (TextView)v.findViewById(R.id.location);
                final TextView speed = (TextView)v.findViewById(R.id.speed);
                final ImageView image = (ImageView) v.findViewById(R.id.imageView1);

                if (name != null) 
                    name.setText(ei.name);
                if(location != null)
                    location.setText(ei.location);
                if(speedandcontact != null)
                    speed.setText(ei.speed);
                    image.setImageResource(R.drawable.car);

            }
        }
        return v;
    } 
```

我有一个列表视图，每个项目由 3 个 TextViews 和 1 个 ImageView 组成。现在我正在尝试过滤适配器

```
TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        adapter.getFilter().filter(s);
    }

};

EditText filterText = (EditText) findViewById(R.id.sb);
filterText.addTextChangedListener(filterTextWatcher); 
```

这有点工作但给出了奇怪的结果（大多数时候所有项目都从列表中消失）。我只想按适配器/项目的名称字段进行过滤。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:39:13.337

```
this issue as like as from that: http://stackoverflow.com/a/13156885/1752867
you can try use your custom adapter and filter. 
```

在代码中：

```
a: for (int i = 0; i < allObjectItemsArray.size(); i++) {
                T m = allObjectItemsArray.get(i);
                        // cast m to your class
                String fistnameAndLastName = ((your object class) m).getFirstName() + ((your object class) m).getLastName();

                if (fistnameAndLastName.toLowerCase().contains(constraint)) {
                    filteredItems.add(m);
                    continue a;
                }

            }

you can modify this line String fistnameAndLastName = ((your object class) m).getFirstName() + ((your object class) m).getLastName();

to 

like : String name = ((your object class) m).getName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T04:26:53.673

此链接显示如何实现自定义过滤器：

[http://www.mokasocial.com/2010/07/arrayadapte-filtering-and-you/](http://www.mokasocial.com/2010/07/arrayadapte-filtering-and-you/)

如果您的列表视图是一个对象数组，您将需要这样做。过滤器需要知道要过滤视图的哪一部分。

# android - 如何在 Android 中使用 Web 服务？

> ID：10699745
> 
> 赞同：-6
> 
> 时间：2012-05-22T09:59:05.350
> 
> 标签：android, web-services, soap, consuming

我想从 Android 应用程序中使用肥皂网络服务。我正在使用`ksoap2`，但我没有得到输出。请告诉我从 Android 应用程序使用 Web 服务的替代方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:11:08.917

用户 HttpPost 或 HttpGet 请求其达到您的要求。

# objective-c - UIWebView 尖角

> ID：10699747
> 
> 赞同：1
> 
> 时间：2012-05-22T09:59:07.113
> 
> 标签：objective-c, ios, uiwebview, quartz-core

我有一个 UIWebView 并使用 QuartzCore 为其添加一些样式。但是当我执行时：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(10, 10, self.view.bounds.size.width-20.0, self.view.bounds.size.height-30.0)];

NSString *urlAddress = @"http://www.google.com/";
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj];

webView.layer.cornerRadius = 10;
webView.layer.borderColor = [UIColor whiteColor].CGColor;
webView.layer.borderWidth = 3.0f;
[self.view addSubview:webView]; 
```

我得到了一个更全面的视图，但内容很清晰。有一种方法可以在 WebView 的内容中圆角 ![在此处输入图像描述](../Images/ee8981a329ea211b37cb4362446766db.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T10:09:58.637

内容视图实际上是`scrollView`of `UIWebView`，所以

```
webView.scrollView.layer.cornerRadius = 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:20:06.343

同意@graver 答案，但不完全同意，因为他的工作不适用于 iphone 3g 和 iPod 第二代。

```
webView.layer.cornerRadius = 10;
[webView setClipsToBounds:YES]; 
```

ClipsToBound 将简单地调整 webView 下所有子视图的大小。

# nginx - 如何让 nginx 停止处理其他规则并服务于特定位置？

> ID：10699755
> 
> 赞同：21
> 
> 时间：2012-05-22T09:59:43.820
> 
> 标签：nginx

`server { }`我有这个配置在空定义中按预期工作

```
location ^~ /foo/ {
    alias /var/www/foo/;
} 
```

但是，当我将它移到一个更大的服务器定义中（用于 WordPress 多站点配置）时，它会停止工作并且 wordpress 会响应它（这显然不是我的意图）。

我试图放在服务器块的开头或结尾，但这并没有改变它。

如何强制 Nginx 使用此位置？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-27T05:39:29.570

您可能正在寻找`break`.

```
location ^~ /foo/ {
    alias /var/www/foo/;
    break;
} 
```

从[`HttpRewriteModule`文档](http://wiki.nginx.org/HttpRewriteModule)中：

> `last`- 完成当前重写指令的处理并重新启动该过程（包括重写），并从所有可用位置搜索 URI 上的匹配项。
> 
> `break`- 完成当前重写指令的处理，非重写处理仅在当前位置块内继续。
> 
> 请注意，外部位置块，last 和 break 实际上是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-05T10:35:20.850

Nginx 中的位置块是独占的。如果您使用`location ^~`其他规则，则静态对象的到期标头可能不适用，除非您将这些规则复制为嵌套在同一位置块下。

如果你可以分享你的完整配置，那么我可以让它为你工作。您很可能需要使用嵌套的位置块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T20:36:06.180

```
location = /aliasname/ { 
  alias /path/to/alias/
} 
```

如果 URI 中不存在尾随斜杠，则会出现问题。请参阅[https://www.digitalocean.com/community/tutorials/understanding-nginx-server-and-location-block-selection-algorithms#matching-location-blocks](https://www.digitalocean.com/community/tutorials/understanding-nginx-server-and-location-block-selection-algorithms#matching-location-blocks)

# c# - 如何以编程方式将事件接收器附加到 SPList？

> ID：10699757
> 
> 赞同：4
> 
> 时间：2012-05-22T09:59:53.403
> 
> 标签：c#, sharepoint, events, splist

我正在开发一个项目 i SharePoint 2010，其中有几个站点。每个站点下都包含一个包含新闻的列表，我想将一个事件接收器附加到这些列表中。

下面的站点和列表是以编程方式创建的，但我无法附加我在 VS2010 解决方案中拥有的事件接收器。

我试过这个：

```
SPList list = new SPSite(siteURL).OpenWeb().Lists[listName]; 
SPEventReceiverDefinitionCollection eventReceivers = list.EventReceivers;

SPEventReceiverDefinition eventReceiver = eventReceivers.Add();
eventReceiver.Name = receiverName;
eventReceiver.Synchronization = SPEventReceiverSynchronization.Synchronous; 
eventReceiver.Type = SPEventReceiverType.ItemAdded;
eventReceiver.SequenceNumber = sequenceNumber; 
eventReceiver.Assembly = assemblyFullName;
eventReceiver.Class = assemblyClassName;
eventReceiver.Data = receiverData;

eventReceiver.Update(); 
```

但它不起作用。

错误消息是“无法加载文件或程序集 'Projekt_Test1\, \, Version\=1.0.1777.23493\, Culture\=neutral\, PublicKeyToken\=49c7547d535382ab' 或其依赖项之一。给定的程序集名称或代码库无效.（来自 HRESULT 的异常：0x80131047）”

感谢帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T07:49:13.177

我最终为此创建了一个列表扩展方法：

```
public static void EnsureEventReceiver(this SPList list,IEnumerable<SPEventReceiverType> receiverTypes, Type eventHander, SPEventReceiverSynchronization synchronization, int sequenceNumber)
{
   foreach (SPEventReceiverType spEventReceiverType in receiverTypes)
   {
      string name = list.Title + spEventReceiverType.ToString();

      if (list.EventReceivers.Cast<SPEventReceiverDefinition>().All(i => i.Name != name))
      {
          SPEventReceiverDefinition eventReceiver = list.EventReceivers.Add();
          eventReceiver.Name = name;
          eventReceiver.Type = spEventReceiverType;
          eventReceiver.Assembly = eventHander.Assembly.FullName;
          eventReceiver.Class = eventHander.FullName;
          eventReceiver.SequenceNumber = sequenceNumber;
          eventReceiver.Synchronization = synchronization;
          eventReceiver.Update();
      }
   }    
} 
```

注意事项，此方法的局限性：

*   每个列表只有一个事件，因为这对我来说已经足够了，如果您需要更多，则需要将名称作为参数传递
*   事件处理程序方法在同一个类中

你可以像这样使用它：

```
list.EnsureEventReceiver(
     new[] { SPEventReceiverType.ItemAdded, SPEventReceiverType.ItemUpdated },
     typeof(NewsItemsHandler),
     SPEventReceiverSynchronization.Synchronous, 
     10000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T14:34:12.667

你使用的这个版本我从来没有成功过`eventReceivers.Add()`。

这是我正在使用的 powershell 框架，它在 C# 中非常相似

```
$ev = $currentList.EventReceivers.Add([Microsoft.SharePoint.SPEventReceiverType]::ItemAdded, $assemblyName, $className); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T14:43:28.990

有几件事要看：

1.  您的程序集版本列为 1.0.1777.23493。看起来它正在自动递增。您将需要设置一个固定的程序集版本，否则它将随着每次构建而更新，从而破坏您的代码。
2.  您正在设置 eventReceiver.Synchronization = SPEventReceiverSynchronization.Synchronous，但 ItemAdded 是一个异步事件。
3.  确保您的事件接收器程序集已部署到 SharePoint 服务器上的 GAC，并且在运行代码之前已在 IIS 中回收了 SharePoint 应用程序池。

# php - php中的定时循环

> ID：10699762
> 
> 赞同：1
> 
> 时间：2012-05-22T10:00:12.733
> 
> 标签：php, loops, timed

我只想在每个整数之间以 10 秒的间隔打印从 1 到 10 的计数。

例如。

```
$i=10; //Time delay    
for($j=1;$j<11;$j++)  
{  
    echo $j;  
    //do something to delay the execution by $i seconds  
} 
```

我已经尝试了一切`including flush()`，但我得到的只是一个冻结的屏幕`ob_flush()`，`ob_implicit_flush()`直到整个时间都被执行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T10:03:37.393

[http://php.net/manual/en/function.sleep.php](http://php.net/manual/en/function.sleep.php)

sleep 函数将中断脚本的执行。

但是你有没有考虑过使用 Javascript 来做这样的事情？您的脚本可能会达到最大执行时间，并且会占用服务器上的资源。而是使用客户的资源！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T10:02:47.290

你想要的比 PHP 更与 javascript 相关。因为 PHP 是服务器端的，所以它不是为执行此类操作而设计的。你可以让它工作，但它不会很漂亮。

在我的逻辑中；从 1 数到 10 根本不应该涉及服务器。您可以直接在浏览器中执行此操作，因此使用 javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:14:57.857

使用 jQuery。添加10`$(document).ready`秒的延迟以显示特定的 div，该 div 将包含 10 秒后出现的信息。

准备就绪 - [http://api.jquery.com/ready/](http://api.jquery.com/ready/)

对于延迟 - [http://api.jquery.com/delay/](http://api.jquery.com/delay/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T10:34:50.123

您想在 php 脚本运行时打印倒计时？如果是，请尝试该非推荐片段：

```
ob_start();
for($i=0;$i<10;$i++) {
   echo str_repeat(" ",10000);
   echo 'printing...<br />';
   ob_flush();
   flush();
   sleep(1);
} 
```

你看，奇怪的线：

```
echo str_repeat(" ",10000); 
```

在决定真正刷新您的数据之前，浏览器似乎需要一些“数据”。使用 javascript 实时计数器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T10:06:32.867

是的，请使用 Javascript，因为由于输出缓冲，使用 HTTP 无法使用 PHP 完成此任务。

# php - PHP REST Tonic 和身份验证

> ID：10699763
> 
> 赞同：1
> 
> 时间：2012-05-22T10:00:18.990
> 
> 标签：php, authentication, rest, cookies

我正在使用 PHP Tonic 框架。我以这个例子为起点：[GitHub 链接](https://github.com/peej/tonic/tree/master/examples/filesystem)

我想添加一个基于 cookie 的身份验证方法。这是正确的解决方案吗？前一个基于查询字符串中的令牌变量，例如： /serviceName?token=XXXXXXXXxxxXX* *** & 令牌有效期为 10 秒。

当然，这不是一个适当的解决方案。我不能使用浏览器缓存，因为每次调用都会更改令牌。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:00:33.147

一种可能的解决方案是使用 HTTP 标头。

```
$urlToCall = '<get the link>';
$credentials =  Crypt::createToken();
$reqHeaders = apache_request_headers();

// Configuring curl options extra:CURLOPT_HEADER => 1,
$options = array(
    CURLOPT_RETURNTRANSFER => true, 
    CURLOPT_HTTPHEADER => array('Authorization: ' . $credentials)
);

$ch = curl_init($urlToCall);
curl_setopt_array($ch, $options);
$response = curl_exec($ch);

/*
//$header_size = curl_getinfo($ch, CURLINFO_HEADER_SIZE);
//$header = substr($response, 0, $header_size);
//$body = substr($response, $header_size);

if (curl_errno($ch)) {
    print curl_error($ch);
} else {
    list($headers, $content) = explode("\r\n\r\n", $response, 2);
    foreach (explode("\r\n", $headers) as $hdr) {
        header($hdr);   
    //echo $hdr . '<br>';
    //print_r($hdr);
    }
    echo $content;
}
*/

if (curl_errno($ch)) {
    print curl_error($ch);
} else {
    header("Accept: " . $reqHeaders['Accept']);
    $finfo = new finfo(FILEINFO_MIME);
    header("Content-Type: " . $finfo->buffer($response));
    print $response;
}
curl_close($ch); 
```

# javascript - jQuery fadeIn() 间隔多个 div

> ID：10699769
> 
> 赞同：2
> 
> 时间：2012-05-22T10:00:29.843
> 
> 标签：javascript, jquery, html, fadein, fadeout

我正在关注帖子上的指示： [jQuery fadeIn() different interval with multiple div's](https://stackoverflow.com/questions/6769895/jquery-fadein-different-intervals-with-multiple-divs)

但我就是不能让它工作..有什么问题

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>

<script type="text/javascript">
$('.fadeIn').each(function(){
        var $this = $(this);
        $this.before('<div>&nbsp;</div>');
        setTimeout(function(){ 
            $this.prev().remove(); 
            $this.fadeIn(Math.floor(Math.random()*1500)); 
        }, Math.floor(Math.random()*1500));
    }
);​

</script>       

<style>

.fadeIn{
   display: none; 
}​
​
</style>

</head>

<body>

<div class="fadeIn">Test 1</div>
<div class="fadeIn">Test 2</div>
<div class="fadeIn">Test 3</div>
<div class="fadeIn">Test 4</div>
<div class="fadeIn">Test 5</div>
<div class="fadeIn">Test 6</div>​
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:01:53.320

[实际演示](http://jsbin.com/adefez/edit#javascript,html,live)

您必须导入 jQuery 库！
在你之前添加它`<script>`：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

它应该看起来像：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>    
<script type="text/javascript">

(function($){ // remap the '$' character to jQuery

$('.fadeIn').each(function(){
        var $this = $(this);
        $this.before('<div>&nbsp;</div>');
        setTimeout(function(){ 
            $this.prev().remove(); 
            $this.fadeIn(Math.floor(Math.random()*1500)); 
        }, Math.floor(Math.random()*1500));
)};

})(jQuery);

</script> 
```

或使用`$(document).ready(function(){ /*your code here*/ });`!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:03:13.030

1）您需要包含jquery库

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

2）您需要将代码包装在一个 `$(function()`或`jQuery(function($)`

```
jQuery(function($) {
    $('.fadeIn').each(function(){
            var $this = $(this);
            $this.before('<div>&nbsp;</div>');
            setTimeout(function(){ 
                $this.prev().remove(); 
                $this.fadeIn(Math.floor(Math.random()*1500)); 
            }, Math.floor(Math.random()*1500));
        }
    );​
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:03:39.780

您需要更新您的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
$(function () {
    $('.fadeIn').each(function () {
        var $this = $(this);
        $this.before('<div>&nbsp;</div>');
        setTimeout(function () {
            $this.prev().remove();
            $this.fadeIn(Math.floor(Math.random() * 1500));
        }, Math.floor(Math.random() * 1500));
    });​
})
</script> 
```

这

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

将 jQuery 库添加到您的页面 - 这使您能够使用 jQuery 函数。你需要将你的代码包装在

```
$(function() {

}); 
```

阻塞，以便在 DOM 准备好之前它不会执行。[请参阅此处的文档](http://api.jquery.com/ready/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:06:11.667

首先[，这](http://jsfiddle.net/Q9YbR/1/)是您的代码工作的小提琴。

您没有做的只是在 head 元素中导入 jquery 库。

# html - 960 网格对齐问题

> ID：10699772
> 
> 赞同：1
> 
> 时间：2012-05-22T10:00:40.690
> 
> 标签：html, css, layout, 960.gs

当涉及到 960 网格时，我遇到了麻烦。下面的代码描述了我想要使用的布局，即 6 个容器均匀分布。

```
<div class="container_12" style="background:blue";>
    <div class="grid_2 alpha" style="background:red";>
        Alpha
    </div>
    <div class="grid_2" style="background:orange";>
        1
    </div>
    <div class="grid_2 " style="background:yellow";>
        2
    </div>
    <div class="grid_2" style="background:green";>
        3
    </div>
    <div class="grid_2" style="background:teal";>
        4
    </div>
    <div class="grid_2 omega" style="background:red";>
        omega
    </div>
</div> 
```

我遇到的问题是......当我为每个网格分配边框时，每个边框都会进入下一个网格，从而导致对齐问题。

我遇到问题的html代码是：

```
<div class="container_12 ">
    <ul class="a-tab">
        <li>
            <a href="" class="grid_2 alpha">Today</a>
        </li>
        <li>
            <a href="" class="grid_2">Restaurants</a>
        </li>
        <li>
            <a href="" class="grid_2">Shops</a>
        </li>
        <li>
            <a href="" class="grid_2">Accomodation</a>
        </li>
        <li>
            <a href="" class="grid_2">Property</a>
        </li>
        <li>
            <a href="" class="grid_2 omega">Nightlife</a>
        </li>
    </ul> 
```

我使用的边界控制的 CSS 是：

```
.a-tab li{
    list-style-type: none;
    display: inline-block;
    float: center;
    border-color: #000;
    border-top:solid;
    border-right: solid;
    border-left: solid;
    -webkit-border-top-left-radius: 7px;
    -webkit-border-top-right-radius: 7px;
    -moz-border-radius-topleft: 7px;
    -moz-border-radius-topright: 7px;
    border-top-left-radius: 7px;
    border-top-right-radius: 7px;
    font-size: 16px;
    margin:0 0 0 0;
} 
```

这显示在[http://www.virtualharrogate.co.uk](http://www.virtualharrogate.co.uk)

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:16:00.660

在查看网站后（按照您问题的实时链接），问题似乎不是源自网格系统，而是源自不正确的标记 - 您将`div`元素嵌套在无序列表 ( `ul`) 中。这是从网站复制的相关片段：

```
<div class="container_12 ">
    <ul>
        <div class="grid_2 alpha">
            <div class="tabframe" id="tabdetail">
                <li>
                    <a href="">Today</a>
                </li>
            </div>
        </div>
        <!-- etcetera -->
    </ul>
</div> 
```

从层次结构中删除`ul`位于下`div.container_12`的，或者将嵌套`div`的s更改为`li`s，问题将得到解决。

# java - PrintWriter println(String s) 方法：\r\n 不支持？

> ID：10699776
> 
> 赞同：1
> 
> 时间：2012-05-22T10:00:54.040
> 
> 标签：java, printwriter, println

我正在创建一个多线程聊天客户端服务器应用程序。在服务器连接中，我使用 PrintWriter println(String s) 方法将响应写入客户端。

```
PrintWriter out;
String msg = in.readLine();
String response = "";
if (msg.startsWith("nick: ") {
    response = protocol.authenticate(msg); //returns a String that says "welcome " + nick
    //if there are messages pending for the author who logged in add them to the response String
         response+="\r\n"+textmsg;
} else { ... }
out.println(response); 
```

当我运行使用 BufferedReader readLine() 方法从服务器读取的客户端时，我收到了欢迎消息，但没有收到客户端的待处理消息，但是如果我使用

```
response+=textmsg; 
```

它有效，所以我认为这是因为我正在使用 \r\n 但我仍然需要在这两条消息之间打印一个新行。我该怎么办？

**接受答案后编辑**：最后我选择使用 OutputStream 和 InputStream 这样我就可以发送我想要的各种字符串，即使使用 \r\n。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:07:34.583

`println`为每一行输出调用一次（所以两次）或仅使用`\n`，而不使用`\r`. 这是 Java 的标准换行符，`\r\n`是特定于 Windows 的行尾序列。当然，在客户端，您现在也必须调用`readLine`两次。没有办法调用`readLine`一次并获得两条线路。如果您需要自定义分隔符，那么您必须使用其他东西，而不是`\n`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T12:51:13.040

将 println 与 PrintWriter 一起用于 \n。

# macos - 如何在 OSX 上使用 CGContext 绘制图像

> ID：10699780
> 
> 赞同：1
> 
> 时间：2012-05-22T10:01:05.460
> 
> 标签：macos, cgcontext, nsimage

我有一个 CGContext，我试图在上面画一个图像。我有一个用于其他方法的 NSImage * 负载。

```
NSImage *check = [[NSImage alloc] initWithContentsOfFile:@"check.icns"];
CGContextDrawImage(arg2, CGRectMake(0, 0, 145, 15), check); 
```

但是 CGContext 想要一个 CGImage * 我怎样才能使用我的 NSImage * ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:53:12.277

在这种情况下，您应该考虑仅将其打开`CGImage`，如果您只需要它。如果 an`NSImage` *是*您需要的，请参阅`-[NSImage CGImageForProposedRect:context:hints:]`. 此方法可能不需要副本，并且可以生成`CGImage`理想的表示以绘制到目标上下文中。

如果需要，您可以`NSGraphicsContext`从`CGContext`using创建一个`+[NSGraphicsContext graphicsContextWithGraphicsPort:flipped:]`。

# java - 如何以编程方式调整 BorderLayout 中组件的大小？

> ID：10699781
> 
> 赞同：1
> 
> 时间：2012-05-22T10:01:10.607
> 
> 标签：java, swing, layout-manager, border-layout

我有一个 JPanel，它位于父 JPanel 的 BorderLayout.SOUTH 位置。我想以编程方式更改此子 JPanel 的高度。

我正在打电话`childPanel.setPreferredSize(new Dimension(getWidth(), newHeight));`，但它没有效果。（我也尝试设置最大和最小尺寸。）

我错过了什么（可能非常简单的事情）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:04:54.333

更改首选大小后，您需要在该子面板上调用[revalidate()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#revalidate%28%29)。

您可能想阅读[有关 LayoutManagers 的 Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

# javascript - 悬停事件上的图像

> ID：10699788
> 
> 赞同：0
> 
> 时间：2012-05-22T10:01:30.963
> 
> 标签：javascript, jquery, css

这是我所拥有的：

```
.error
{
background: url(error.jpg) no-repeat right top;
} 
```

并通过 JQuery 我将“错误”类提供或带入文本框。因此，文本框将图像作为背景，但不是整个文本框，而只是其右侧部分。我现在要做的是悬停在图像（而不是文本框）上以显示图像的标题。如何为图像添加标题以及如何使其悬停事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:04:24.227

因为图像是输入背景的一部分，所以不能将事件附加到它。

但是，您可以在其本身上放置一个`alt`或`title`属性，`input`这将在所有浏览器中充当工具提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:13:51.193

对于悬停，您可以使用：

```
$('#myElement').hover( function () {/*in focus code */},
                       function () {/*out of focus code*/}); 
```

要确定是否只有该图像已悬停，您需要附加到 mousemove 事件并在元素上方获取鼠标坐标并自行解决。我会在元素的每个 mousemove 事件之后存储当前鼠标坐标，然后在悬停函数中确定您是否在图像区域内。

```
var currentMousePos;
$('#myElement').mousemove(function (event) {
  currentMousePos = {(event.pageX - $('#myElement').left), 
                     (event.pageY - $('#myElement').top)};
}); 
```

# objective-c - NSPredicate 搜索对象

> ID：10699789
> 
> 赞同：0
> 
> 时间：2012-05-22T10:01:31.657
> 
> 标签：objective-c, nspredicate

我必须通过引入搜索关键字并在运行时过滤来过滤一组对象。我该怎么做？

```
//this is my Article class
@property  int intID;
@property (nonatomic, strong) NSString *strName;
@property (nonatomic, strong) NSString *strTitle;
@property (nonatomic, strong) NSString *strDescription;
@property (nonatomic, strong) NSString *lang;
@property (nonatomic, strong) NSString *dateDate;
@property (nonatomic, strong) NSData *dataPicture;
@property (nonatomic, strong) NSString *link;
@property (nonatomic, strong) NSString *gallery;
@property int flag;
@property int subcat;
@property int cat;
@property int idpic; 
```

我必须选择包含带有引入字符串的文本的文章

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{   
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"strName MATCHES '.*(%@).*'", searchText];

    NSLog(@"%@", [NSString stringWithFormat:@"strName MATCHES '.*%@.*' OR strTitle MATCHES '.*%@.*'", searchText, searchText]);

    articleSearchArray=[NSMutableArray array];
    articleSearchArray = [NSMutableArray arrayWithArray:[allArticleArr filteredArrayUsingPredicate:predicate]];

    for(Article *article in articleSearchArray)
    {

        NSLog(@"Article id is %i", article.intID);
    }
    [mytableView reloadData];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:36:27.783

```
[NSPredicate predicateWithFormat:@"strName contains[c] '%@'", searchText]; 
```

这将使用不区分大小写的比较（`strName`用 之后，您只需将哪个作为您的数据源设置为过滤后的数据源并执行.`searchText``[c]``NSArray``reloadData`

# sql - sql查询唯一记录集

> ID：10699792
> 
> 赞同：1
> 
> 时间：2012-05-22T10:01:42.390
> 
> 标签：sql

我有一个 sql 查询作为 -

```
SELECT name_1, dpid_clid, city 
 FROM dts_master_dividend 
 WHERE upper(name_1) like upper('%') 
   AND dpid_clid like upper('IN30290243450560%')
 ORDER BY name_1 asc, dpid_clid asc, dividend_type desc 
```

它将结果显示为 -

```
ABHINAV  BHARTI IN30290243450560    PUNE
ABHINAV  BHARTI IN30290243450560    DELHI
ABHINAV  BHARTI IN30290243450560    PUNE
ABHINAV  DUBEY  IN30290243450560    PUNE
ABHINAV  BHARTI IN30290243450560    PUNE 
```

但我希望我的结果为 -

```
ABHINAV  BHARTI IN30290243450560    PUNE
ABHINAV  BHARTI IN30290243450560    DELHI
ABHINAV  DUBEY  IN30290243450560    PUNE 
```

这意味着只有唯一的记录集。
我怎样才能得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:05:41.493

尝试：

```
select distinct name_1, dpid_clid, city
  from dts_master_dividend
 where upper(name_1) like upper('%')
   and dpid_clid like upper('IN30290243450560%')
 order by name_1 asc, dpid_clid asc, dividend_type desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:27:46.117

试试这个

```
select name_1, dpid_clid, city 
from dts_master_dividend 
where upper(name_1) like upper('%') and dpid_clid like upper('IN30290243450560%')
group by name_1, dpid_clid ,city 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:05:56.503

只需添加`DISTINCT`关键字：

```
SELECT DISTINCT name_1, dpid_clid, city 
 FROM dts_master_dividend 
 WHERE upper(name_1) like upper('%') 
   AND dpid_clid like upper('IN30290243450560%')
 ORDER BY name_1 asc, dpid_clid asc, dividend_type desc 
```

这会从结果集中删除重复的行。对于 MySQL 文档，请参见[此处](http://dev.mysql.com/doc/refman/5.5/en/select.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:06:06.660

使用`DISTINCT`：

```
SELECT distinct name_1, dpid_clid, city 
 FROM dts_master_dividend 
 WHERE upper(name_1) like upper('%') 
   AND dpid_clid like upper('IN30290243450560%')
 ORDER BY name_1 asc, dpid_clid asc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T10:08:13.677

它可能取决于您的数据库服务器，但执行此操作的标准方法是使用

```
SELECT DISTINCT [columns] FROM [table]. 
```

所以试着在你的查询中加入一个 DISTINCT

```
select distinct name_1, dpid_clid, city from dts_master_dividend where upper(name_1) like  upper('%') and dpid_clid like upper('IN30290243450560%') order by name_1 asc, dpid_clid asc, dividend_type desc 
```

有关更多信息，请参阅[选择不同的 w3schools 页面](http://www.w3schools.com/sql/sql_distinct.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T10:09:23.393

避免使用`upper(name_1) like upper('%')`and 而不是`upper('IN30290243450560%')`只使用`'IN30290243450560%'`.

所以你的查询应该看起来像 -

```
SELECT DISTINT name_1, dpid_clid, city
FROM dts_master_dividend
WHERE dpid_clid like 'IN30290243450560%'
ORDER BY name_1 asc, dpid_clid asc, dividend_type desc; 
```

# c# - VS Team Test：测试类中的多个测试初始化 方法

> ID：10699795
> 
> 赞同：11
> 
> 时间：2012-05-22T10:01:56.020
> 
> 标签：c#, .net, visual-studio-2010, unit-testing

我在 TeamTest 中有一个名为“MyClassTest”的单元测试项目。这个项目有三个TestMethods。每个方法都需要自己的测试初始化​​步骤。但是当我将**TestInitializeAttribute**应用于三个初始化方法时，它说该属性不应多次使用。那么在 Visual Studio Team Test 中用于初始化每个测试方法的属性应该是什么？

参考：

1.  [VS 团队测试：使用 Excel 作为数据源的 .Net 单元测试：适配器失败](https://stackoverflow.com/questions/10684441/vs-team-test-net-unit-testing-with-excel-as-data-source-adapter-failed)

2.  [如何为 Visual Studio 测试项目创建启动和清理脚本？](https://stackoverflow.com/questions/2304549/how-to-create-startup-and-cleanup-script-for-visual-studio-test-project)

3.  [带有自定义计数器的 VS 2010 负载测试结果](https://stackoverflow.com/questions/8990448/vs-2010-load-tests-results-with-custom-counters)

4.  [如何在 MSTest 中记录单元测试进入和离开](https://stackoverflow.com/questions/3879819/how-to-log-unit-test-entry-and-leave-in-mstest)

5.  [单元测试项目可以加载目标应用程序的 app.config 文件吗？](https://stackoverflow.com/questions/344069/can-a-unit-test-project-load-the-target-applications-app-config-file)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-22T10:33:57.080

根据[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testinitializeattribute%28v=vs.100%29.aspx)`TestInitializeAttribute`：_

*   不能多次使用（*AllowMultiple = false*），并且
*   不能继承来创建自己的`TestInitializeAttribute`.

所以，我的建议是创建没有该`TestInitialize`属性的测试初始化​​方法。然后在唯一`TestInitialize`方法中检查当前执行`TestMethod`的方法并调用适当的初始化方法：

```
[TestClass]
public class UnitTest
{
    public TestContext TestContext { get; set; }

    [TestInitialize]
    public void Initialize()
    {
        switch (TestContext.TestName)
        {
            case "TestMethod1":
                this.IntializeTestMethod1();
                break;
            case "TestMethod2":
                this.IntializeTestMethod2();
                break;
            default:
                break;
        }
    }

    [TestMethod]
    public void TestMethod1()
    {
    }

    [TestMethod]
    public void TestMethod2()
    {
    }

    public void IntializeTestMethod1()
    {
        //Initialize Test Method 1
    }

    public void IntializeTestMethod2()
    {
        //Initialize Test Method 2
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-22T12:35:39.643

如果您有三个测试方法，并且**每个方法都有自己的初始化步骤**，那么为什么要将初始化转移到将在每次测试之前运行的方法？我看到的唯一好处是那个不错的 switch 块，它在你的源文件中添加了一些行。但它给您带来了缺点 - 查看这些测试方法中的任何一种，您都无法真正判断将在哪个上下文方法中执行。所以，我使用初始化方法来设置基本的上下文，这是真正被夹具中的所有测试使用的。

只需将上下文创建移动到`arrange`每个方法的一部分。

如果您有几个使用公共上下文的方法，那么只需提取方法，它将为它们设置上下文，并在`arrange`部分调用它。您还可以将每个上下文设置拆分为多个步骤并重用这些步骤（就像在[Specflow](http://www.specflow.org/)等 Given-When-Then 工具中所做的那样）。

当然，创建不同的固定装置也是一种选择。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-27T16:44:21.013

这有点老帖子，但我想出了以下似乎工作正常：首先，定义一个属性类：

```
[AttributeUsage(AttributeTargets.Method, Inherited = true)]
public class InitialiseWithAttribute : Attribute
{
    public string Id { get; private set; }

    public InitialiseWithAttribute(string id)
    {
        Id = id;
    }
} 
```

然后在一些方便的实用程序类中定义一个扩展方法：

```
 public static bool IsInitialisedWith(this string testName, string value)
    {
        bool result = false;
        Type testClassType = new StackFrame(1).GetMethod().DeclaringType;
        MethodInfo methodInfo = testClassType.GetMethod(testName);
        if (methodInfo != null)
        {
            InitialiseWithAttribute initialiseWithAttribute =
                methodInfo.GetCustomAttribute<InitialiseWithAttribute>(true);
            if (initialiseWithAttribute != null)
            {
                result = initialiseWithAttribute.Id == value;
            }
        }
        return result;
    } 
```

现在编写您的测试，因此：

```
 public TestContext TestContext {get; set;}
    [TestInitialize]
    public void TestInitialise()
    {
        if (TestContext.TestName.IsInitalisedWith("DoSomethingSpecial")
        {
             // ... Do something special
        }
        else
        {
             // ... Do something normal
        }
    }

    [TestMethod]
    [InitialiseWith("DoSomethingSpecial")]
    public void MySpecialTest()
    {
         // The test
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-22T10:26:19.333

如果他们需要三个单独的初始化；那么它们可能应该在三个独立的装置中，每个装置都有自己的 init！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-21T14:49:11.297

在我的工作中，我们将一个参数传递给 TestInitialize 方法以确定我们希望初始化如何工作。

```
public partial class CommonActions
{
   public void TestInitialize(bool adminTest)
   {
      try
      {
         if (adminTest)
         {
            //do stuff
         } 
```

然后我们在类定义中有一个标准的初始化，默认为 false。

```
[TestClass]
public class ProjectTestBase : FrameworkTestBase
{ 
  public CommonActions common { get; set; } = new CommonActions();

  [TestInitialize]
   public void TestInitialize() => common.TestInitialize(false); 
```

然后在测试用例本身中，您可以为您想要的任何测试覆盖 TestInitialize。

```
[TestClass]
public class SetReportsInAdmin : ProjectTestBase
{
    [TestInitialize]
    public new void TestInitialize() => common.TestInitialize(true); 
```

我们使用布尔值来判断是否需要进行管理员测试，这需要额外的设置开销。采取这个并应用您想要的任何变量，通过使用一种方法为您提供多个初始化。

# java - 如何在鼠标悬停时使 JLable 可见和半透明（几乎不可见）

> ID：10699796
> 
> 赞同：1
> 
> 时间：2012-05-22T10:01:57.143
> 
> 标签：java, swing, jlabel, repaint, translucency

我制作了一个 Wrappable `JLabel`，它在标签内显示多行文本消息。标签和文本（即前景和背景）始终可见。

现在我想改变`JLabel`它，使它只有在鼠标悬停后才可见，其余时间它应该是半透明的。我怎样才能做到这一点？请帮助我..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:45:33.467

对于鼠标悬停在`JLabel`你必须从[MouseXxxListener](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)`repaint()`调用所有方法，原因是 this 通知程序没有在[JLabel API](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)中实现，更多公司。[@kleopatra](https://stackoverflow.com/a/7634488/714968)的帖子中的描述

# xml - xslt : 如何根据兄弟元素的值选择 XML 元素

> ID：10699797
> 
> 赞同：2
> 
> 时间：2012-05-22T10:01:58.173
> 
> 标签：xml, xslt

这是我的 XML：

```
<root>
<parameters>
<parameter>
    <key>sEmail</key>
    <value>cauchyjp@gmail.com</value>
    <type>string</type>
    <length>255</length>
</parameter>
<parameter>
    <key>sFirstName</key>
    <value>Bill</value>
    <type>string</type>
    <length>40</length>
</parameter>
</parameters>
<root> 
```

我想检索键 sEmail 的值并将其作为属性添加到使用 XML 到 XML xslt 的根元素。

这是预期的结果：

```
<root email="cauchyjp@gmail.com">
<parameters>
    <parameter>
        <key>sEmail</key>
        <value>cauchyjp@gmail.com</value>
        <type>string</type>
        <length>255</length>
    </parameter>
    <parameter>
        <key>sFirstName</key>
        <value>Bill</value>
        <type>string</type>
        <length>40</length>
    </parameter>
</parameters>
<root> 
```

类似于[此链接](https://stackoverflow.com/questions/541370/xslt-how-to-select-xml-attribute-by-attribute)的内容，但具有元素而不是属性的值。

有人能帮我吗 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:09:36.857

您可以测试子元素的值是否为“sEmail”：

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="parameters">
    <parameters>
      <xsl:attribute name="email">
        <xsl:value-of select="parameter[key='sEmail']/value"/>
      </xsl:attribute>
      <xsl:copy-of select="*"/>
    </parameters>
  </xsl:template>

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:50:34.847

**可以使用[AVT](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)**以更清洁的方式完成：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <root email="{*/*[key = 'sEmail']/value}">
    <xsl:apply-templates/>
  </root>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <parameters>
        <parameter>
            <key>sEmail</key>
            <value>cauchyjp@gmail.com</value>
            <type>string</type>
            <length>255</length>
        </parameter>
        <parameter>
            <key>sFirstName</key>
            <value>Bill</value>
            <type>string</type>
            <length>40</length>
        </parameter>
    </parameters>
</root> 
```

**产生了想要的正确结果：**

```
<root email="cauchyjp@gmail.com">
   <parameters>
      <parameter>
         <key>sEmail</key>
         <value>cauchyjp@gmail.com</value>
         <type>string</type>
         <length>255</length>
      </parameter>
      <parameter>
         <key>sFirstName</key>
         <value>Bill</value>
         <type>string</type>
         <length>40</length>
      </parameter>
   </parameters>
</root> 
```

# c - 通过 c / libcurl 使用有效密码访问受密码保护的新闻站点

> ID：10699813
> 
> 赞同：0
> 
> 时间：2012-05-22T10:02:46.283
> 
> 标签：c, web-scraping, libcurl, password-protection, http-authentication

我使用 libcurl 用 C 语言编写了一个网站爬虫，如果我们愿意，它可以从任何网站上抓取文本内容。

但是，我们需要的是能够抓取具有有效订阅的受密码保护的网站，例如大型新闻出版商。所以我们有这些网站的用户名/密码。

任何人都可以提供有关使用 libcurl 实现这一目标的建议。我知道您可以将用户名/密码添加到 libcurl 选项中。我认为这样做，只需访问可能受密码保护的正确页面，就可以了。这是 CURL 代码的摘录：

```
curl_easy_setopt(curlTestHandle, CURLOPT_URL, "mypasswordprotectedwebsiteurl");
curl_easy_setopt(curlTestHandle, CURLOPT_WRITEFUNCTION, WriteMemoryCallback);
curl_easy_setopt(curlTestHandle, CURLOPT_FOLLOWLOCATION, 1);
curl_easy_setopt(curlTestHandle, CURLOPT_MAXREDIRS, 5);

curl_easy_setopt(curlTestHandle, CURLOPT_USERPWD, "myusername:mypassword");

res = curl_easy_perform(curlTestHandle);
curl_easy_getinfo (curlTestHandle, CURLINFO_RESPONSE_CODE, &httpResponse); 
```

但是，也许我简化了太多？也许它可能适用于某些网站，但不适用于其他网站？有没有人做过并实现了类似的事情？

谢谢，

马诺伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:12:28.493

这取决于。如果站点为登录表单中的隐藏字段生成不同的编号，那么您必须解析（或简单搜索）HTML 文件以将隐藏字段附加到请求中。否则，您可以硬编码代码中的值。

这还取决于您要抓取多少个不同的网站。如果有很多不同的网站，那么最好的办法是解析 HTML（或以某种方式通过字符串搜索读取表单）并获取登录时要填写的字段。

您还必须阅读和设置 cookie。我认为 libcurl 应该具有轻松处理此问题的功能。

--- 我困了，我可能跑题了。如果这篇文章根本没有帮助，请告诉我删除它。

# python - QFileSystemModel 未检测到 Python 生成的文件更改

> ID：10699815
> 
> 赞同：1
> 
> 时间：2012-05-22T10:02:48.733
> 
> 标签：python, qt, pyqt, qfilesystemmodel

使用 PyQt 和 Python 我遇到了以下问题：

1.  设置一个 QFileSystemModel，调用 setRootPath() 并连接到 dataChanged 信号。
2.  从 Python 打开一个新文件并在其中写入一些文本。然后关闭它。
3.  以追加模式重新打开文件并在其中写入更多文本。然后关闭它。
4.  在外部编辑器中打开文件。写点东西。节省。多写点东西。节省。

如果您执行 (3)，则不会发出 dataChanged 信号。但是，如果您执行 (4)，则会发出 dataChanged 信号。

有什么线索吗？下面包含一个重现该问题的代码片段。

此致，

麦兹

```
import sys
import os

from PyQt4 import QtGui, QtCore

class Widget(QtGui.QWidget):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)

        layout = QtGui.QVBoxLayout()
        self.setLayout(layout)
        self._view = QtGui.QListView()
        layout.addWidget(self._view)

        # Add the model
        self._model = QtGui.QFileSystemModel()
        self._model.setRootPath(QtCore.QDir().rootPath())
        self._model.setReadOnly(False)
        self._model.setFilter(QtCore.QDir.AllDirs | QtCore.QDir.AllEntries)        
        self._view.setModel(self._model)

        # Root path
        path = os.path.dirname(os.path.abspath(__file__))
        self._model.setRootPath(path)

        # Set a root index
        index = self._model.index(path)
        self._view.setRootIndex(index)

        # Generate a file with some text
        print 'Making file'
        f = open('foo.dat', 'w')
        f.write('Some stuff\n')
        f.close()

        self.connect(self._model, QtCore.SIGNAL('dataChanged(const QModelIndex &, const QModelIndex &)'), self.dataChanged)

        # Append more text - this should trigger a signal call
        print 'Modifying file'
        f = open('foo.dat', 'w+')
        f.write('Some more stuff\n')
        f.close()

    def dataChanged(self, index_0, index_1):
        print 'dataChanged', self._model.filePath(index_0), self._model.filePath(index_1)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)

    widget = Widget()
    widget.show()

    sys.exit(app.exec_()) 
```

以下是一些更一般的观察：

基本问题是 QFileSystemModel 显然没有以正确的方式监视文件更改：

# 案例 1（Ubuntu）：

1) 在后台运行脚本作为 'python fsm.py &' 2) 在启动脚本的同一目录中启动 Python 提示符 3) 键入：

```
f = open('foo.txt', 'w')
f.write('eyeyehydhdhdhdhdhdhhdhdshshs')
f.close() 
```

当调用 open() 时，QFileSystemModel 检测到新文件。但是，没有检测到由 f.write() 和 f.close() 引起的文件修改。

# 案例 2（Ubuntu）：

1）当脚本'fsm.py'仍在运行时，使用一些外部编辑器（gedit，emacs等）打开一个新文件2）写一些东西并保存

在这种情况下，新文件和修改都会被检测到。这是我不明白的第一件事。为什么没有检测到 Python IO 但来自编辑器的 IO 是？

# 案例 3（Ubuntu）：

使用 Ubuntu：我启动 Nautilus 文件浏览器并重复案例 1-2 中的步骤 1-3。然后 nautilus 检测到新文件和修改。所以那里 Python 生成的 IO 被监控，但显然是使用 GNOME 文件监控系统。

# 案例 1（Windows 7）：

相同的行为。

# 案例 2（Windows 7）：

如果使用记事本或写字板，则不会检测到文件修改。如果使用 GVim 7.3，则会检测到文件修改。

# 案例 3（Windows 7）：

启动本机 Windows 7 文件浏览器，检测到案例 1-2 中的所有模块。

你能理解这个吗？

# javascript - Dojo，Contentpane 的 href 中的引用页面未加载网格

> ID：10699817
> 
> 赞同：0
> 
> 时间：2012-05-22T10:02:54.013
> 
> 标签：javascript, html, dojo, dojox.grid

```
<script type="text/javascript">
dojo.ready(function(){
    var dataStore;
    var grid;
    dojo.xhrGet({
            url: "/mediation1.0.1/processConfig/getAll",
            handleAs: "json",
            headers:{"Accept" : "application/json"}
    }).then(function(data) {
    dataStore = new dojo.data.ObjectStore({ objectStore:new dojo.store.Memory({ data: data }) });
    grid = new dojox.grid.EnhancedGrid({
    id : "gatewayGrid",
    name : "gatewayGrid",
    store : dataStore,
    query : {id : "*"},
    plugins: {indirectSelection: true,
        pagination: {
        pageSizes: ["10", "20", "30", "All"],
        description: true,
        sizeSwitch: true,
        pageStepper: true,
        gotoButton: true,
        maxPageStep: 2,
        position: "bottom"
    }},
    selectionMode:'single',
    structure : [ 
          {name:"ID", field:"id",hidden:"true"},
          {name : "Name",           field : "name",         width : "auto"}, 
          {name : "IP Address",     field : "_item",    width : "auto",
          formatter: function(item){
              return item.collectorParams.host;
          }}
          , 
          {name : "Cron Interval",  field : "cronExpression",   width : "auto"}, 
          {name : "Status",         field : "active",   width : "auto"}
          ]
}, document.createElement('div'));
dojo.byId("cmdGateway").appendChild(grid.domNode);
grid.startup();
});  
});
</script>
<div id="switchConfigBorder" dojoType="dijit.layout.BorderContainer"
    style="background-color: white">
    <div id="switchConfigWholePane" dojoType="dojox.layout.ContentPane"
        style="background-color: white" region="top">
        <div id="cmdGateway">

        </div>
    </div>
</div> 
```

这是从带有 href 的 dojox.layout.ContentPane 引用的页面内容。我可以在萤火虫中看到 xhrGet 请求被触发并且数据即将到来。令人惊讶的是，如果我填充选择，这种技术就会起作用。但是这个 EnhancedGrid 没有被渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:22:35.260

div cmdGateway 的溢出属性是什么？它应该是自动或滚动。还可以尝试将网格的 autoHeight 属性设置为某个整数。

几天前，我在 DataGrid 上也遇到了同样的问题。我建议从设置 cmdGateway div 的高度开始，看看 Grid 是否可见。

# xcode - Xcode 脚本构建步骤，复制框架失败

> ID：10699821
> 
> 赞同：0
> 
> 时间：2012-05-22T10:03:11.510
> 
> 标签：xcode, sh

```
CONTENTS_PATH="${TARGET_BUILD_DIR}/${CONTENTS_FOLDER_PATH}"
mkdir -p $CONTENTS_PATH/Frameworks
cp -R /Library/Frameworks/Cg.Framework $CONTENTS_PATH/Frameworks
cp -R /$OGRE_PATH/lib/$CONFIGURATION/Ogre.Framework $CONTENTS_PATH/Frameworks 
```

我在 XCode 3.2.6 脚本 (sh) 构建阶段使用它来将框架复制到应用程序包中。它第一次运行良好，但在随后的构建中，我获得了权限/取消链接/无法覆盖错误 - 它似乎不喜欢在自身之上复制框架。其他复制操作按预期工作。

cp 是使用错误的工具还是我应该做的其他事情？

**错误：**

> cp：取消链接：build/Release/Mac1.7to1.8Test.app/Contents/Frameworks/Cg.Framework/Cg：权限被拒绝
> 
> cp：构建/发布/Mac1.7to1.8Test.app/Contents/Frameworks/Cg.Framework/Versions/1.0/Headers/cg.h：权限被拒绝
> 
> cp：构建/发布/Mac1.7to1.8Test.app/Contents/Frameworks/Cg.Framework/Versions/1.0/Headers/cgGL.h：权限被拒绝
> 
> cp：构建/发布/Mac1.7to1.8Test.app/Contents/Frameworks/Cg.Framework/Versions/1.0/Resources/Info.plist：权限被拒绝
> 
> cp: 不能用非目录//usr/local/Ogre.Framework/Headers 覆盖目录 build/Release/Mac1.7to1.8Test.app/Contents/Frameworks/Ogre.Framework/Headers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:31:26.500

刚刚遇到同样的问题。对我有用的是手动删除构建文件夹。尝试从 Xcode 清理构建文件夹（在产品菜单中保留选项），但它不会让我，因为它说我没有正确的文件权限。手动删除 Finder 中的文件夹解决了这个问题。

# facebook-javascript-sdk - 像按钮一样来自 js sdk 的应用程序

> ID：10699830
> 
> 赞同：0
> 
> 时间：2012-05-22T10:03:42.070
> 
> 标签：facebook-javascript-sdk

我目前正在构建一个应用程序，您可以通过框架内的“赞”按钮为应用程序本身点赞。所以，我加载了 js sdk：

```
<script>
  window.fbAsyncInit = function() {
    FB.init({
       appId      : '<?php echo $appid; ?>', // App ID
       status     : true, 
       cookie     : true,
       xfbml      : true,
       oauth      : true,
    });
    FB.Canvas.setSize()
    checkIfLoaded();
    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

然后我只是在 html 中写一个like按钮：

```
<div id="page" class="page-01">
    <div id="content">
        <h1><a href="#"><img src="img/skin/logo.png" alt=""/></a></h1>
        <div class="block-01">
            <div id="fb-root"></div>
            <div class="fb-like" data-send="false" data-layout="button_count" data-width="105" data-show-faces="false"></div>
        </div>
    </div>
    <div id="footer">

    </div>

</div> 
```

我期待通过此按钮在我的应用程序上获得一个赞，但它就像托管我的应用程序的 url。

我是 js sdk 的新手，有没有办法做这种事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:12:53.813

没有“点赞应用程序”之类的东西，实际上你唯一可以绑定你的点赞按钮的是 URL（它可能代表 OpenGraph 对象）。

您不能使用点赞按钮来点赞任何内部 Facebook 对象，例如页面、应用程序、用户等。

如果您谈到喜欢与特定应用程序关联的页面，您应该使用 [Like Box 社交插件](http://developers.facebook.com/docs/reference/plugins/like-box)（旨在与 Pages 一起使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T12:31:07.833

您需要使用 data-href="url to like" 指定要喜欢的 URL

# javascript - 如何将javascript变量/对象从一个页面传递到另一个页面？

> ID：10699835
> 
> 赞同：0
> 
> 时间：2012-05-22T10:04:00.497
> 
> 标签：javascript, html

我想将 javascript 对象/变量从页面传递到另一个页面。这样我就可以将数据用于某些字段，我希望这些值在我将值从一个页面传递到另一个页面时隐藏而不可见在服务器端管理，因为该页面无需在服务器端管理任何内容。

我想将值作为隐藏字段或值传递到下一页。当我通过打开新页面时如何将其传递到新页面

```
window.location="website/nextpage.jsp"; 
```

另外请注意，我是初学者，所以如果问题似乎含糊不清，请见谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:09:34.253

你可以：

*   通过阅读[`window.location.hash`](https://developer.mozilla.org/en/DOM/window.location#Properties). 类似于 GET 请求，但不需要服务器来传递。但是，参数在 url 中可见。

*   使用[cookie](https://developer.mozilla.org/en/DOM/document.cookie)。让 JS 在前一页“植入” cookie 并在接收页面上读取它们。

*   您也可以使用[DOM 存储](https://developer.mozilla.org/en/DOM/Storage)。类似于 cookie、种植和阅读的例程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:12:34.203

假设您不想使用会话变量、cookie 或本地存储：

您不能“隐藏”一个参数，以使您的网站用户无法看到它。

如果您通过 POST 请求提交数据 - 您可以使用隐藏的表单元素。

```
<form method="post">
<input type="hidden" name="state" value="{YOUR PARAMETER}" /> 
```

如果您使用 window.location - 您将不得不使用 GET 请求

```
window.location="website/nextpage.jsp/param/{YOUR PARAMETER}"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:07:49.100

我不具体了解 JSP，但是使用带有 POST 方法的表单会隐藏（标准）用户的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:07:51.600

你为什么不使用 html5 的 localStorage 和 sessionStorage 来达到目的。如需更多帮助，请访问[此处](http://diveintohtml5.info/storage.html)

# wordpress - 位置和主题作为子域和文件夹的 SEO 影响

> ID：10699837
> 
> 赞同：-1
> 
> 时间：2012-05-22T10:04:08.410
> 
> 标签：wordpress, seo, subdomain, sitemap, multilingual

我目前正在开发我的新网站的布局。我计划为我的在线形象的不同方面建立一个中央网站和子域。

*   姓名-姓氏.de
*   投资组合.name-lastname.de
*   webdesign.name-lastname.de
*   昵称.name-lastname.de

我决定创建中央网站作为我其他网站的中心，因为即使我的网站的主题和目标群体不同，我也希望他们保持联系。我将使用 Wordpress 作为我的 CMS/Blog 选择，WPML 用于本地化（英语/德语）和 Wordpress 3.0 多站点功能为所有联网博客（子域）提供相同的 wordpress 安装。

在我的中心网站 (name-lastname.de) 上，我将展示我对其他网站以及社交媒体流和内容的最新添加的摘录。其他网站的内容是

1.  潜在客户/员工，
2.  对我编写的网络内容感兴趣的人（阅读：脚本、css 和 html 技巧等）
3.  我认识并在线互动的人（更随意的内容）

如果我想要这些主题的子域以及英语和德语的不同版本，那么最好的方法是什么。我不确定我是否喜欢 /de/ 和 /en/ 方法，但 en.portfolio.name-lastname.de 也感觉不对。

我应该将语言或主题作为子域，将另一个作为文件夹吗？我应该同时注册 .de 和中立的 tld（.com 或 .net）吗？

**< 编辑 >** 阅读史蒂夫 H 的评论后，我会将昵称网站放在一个单独的域中，以方便其他网站。除此之外，我将适当地使用带有主题子域或主题子目录的语言子目录。 **</编辑>**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:07:03.947

我认为这在很大程度上取决于个人选择，但如果我是你，我会在你的每个方面完全独立的域之间进行选择，或者只有一个主域（name-lastname.de），然后使用 Wordpress 的类别来分隔每个部分.

就 tld 而言，如果您想打入国际市场，我会选择 .com，否则就使用您的本地 tld（.de ？）。

我真的看不出您的子域方法对 SEO 或用户有任何优势（除非您希望服务之间有更多的分离，在这种情况下，新的顶级域会更好），那么如何：

姓名-姓氏.de

姓名-姓氏.de/portfolio

姓名-姓氏.de/webdesign

name-lastname.de/nickname（如果不是太随便）

ETC...

因此，实际上由您来决定这些关注点与您的列表的分离程度，我认为 1 和 2 肯定会匹配，因为任何客户都会对您的代码/投资组合感兴趣，但也许第 3 点最好在单独的域上提供，如果这确实太随意了/您不希望客户过多提及它。

最后，在语言方面，您能否将其留给用户，即选择英语或德语作为您的默认语言，而只需在页面上添加一个链接以查看“其他”语言。同样，我不愿意用不同的语言制作同一页面的 2 个版本，因为维护工作量是你的两倍，例如在 Chrome 中，语言翻译是一件微不足道的事情。

# c# - 字段定义语法错误

> ID：10699841
> 
> 赞同：0
> 
> 时间：2012-05-22T10:04:15.550
> 
> 标签：c#, sql

我正在尝试使用以下方法通过 C# 在我的数据库中创建一个表：

```
 private static void CreateTables()
    {
        _commandtext = "CREATE TABLE Users(" +
                        "ID Integer PRIMARY KEY, " +
                        "Username Text(20), " +
                        "Password Text(25), " +
                        "IBAN Text(18)" +
                        ");";
        _command = new OleDbCommand(_commandtext, _connection);

        _connection.Open();

        int number = _command.ExecuteNonQuery();  <<< Error

        _connection.Close();
    } 
```

不知何故，它返回一个错误：“字段定义中的语法错误”我做错了什么？

编辑：已解决但仍然：我将其用于访问

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:06:56.250

您是否尝试在您的姓名周围添加方括号？

```
private static void CreateTables()
{
    _commandtext = "CREATE TABLE [Users](" +
                    "[ID] Integer PRIMARY KEY, " +
                    "[Username] Text(20), " +
                    "[Password] Text(25), " +
                    "[IBAN] Text(18)" +
                    ");";
    _command = new OleDbCommand(_commandtext, _connection);

    _connection.Open();

    int number = _command.ExecuteNonQuery();  <<< Error

    _connection.Close();
} 
```

也许您的数据库认为您正在引用其他字段，而不是使用您输入的名称创建新字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:08:07.407

如果您使用的是 SQL Server，您应该尝试：

```
_commandtext = "CREATE TABLE Users(" +
               "ID Integer PRIMARY KEY, " +
               "Username VARCHAR(20), " +
               "[Password] VARCHAR(25), " +
               "IBAN VARCHAR(18)" +
               ");"; 
```

# ruby-on-rails - rails，用于索引的对象的唯一标识符

> ID：10699845
> 
> 赞同：0
> 
> 时间：2012-05-22T10:04:50.527
> 
> 标签：ruby-on-rails, database, indexing, uniqueidentifier

我想知道唯一识别 Rails 对象的最佳方法是什么。我将它们存储在索引中，目前我一直在这样做

```
$index.document(@paper.id).add(fields, :variable => variables) 
```

@paper.id 唯一标识它的位置。但是当我存储其他对象时，即@card

```
$index.document(@card.id).add(fields, :variable => variables) 
```

它将覆盖我的索引，因为我使用数据库自​​动增量（这不是唯一的，因为它们都开始并以 1 递增）。在我的所有 rails 对象中拥有唯一标识符的最佳解决方案是什么？

我查看了 UUID，并对将它们作为我的主键有所保留，例如...

[http://ariejan.net/2008/08/12/ruby-on-rails-uuid-as-your-activerecord-primary-key/](http://ariejan.net/2008/08/12/ruby-on-rails-uuid-as-your-activerecord-primary-key/)

我想我总是可以单独写一个专栏。或者我可以做一些事情，比如获取对象的 id，然后将其附加到 creation_time。这些是好主意吗？如果没有，什么是一个好的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:12:49.307

我会使用对象 id 和对象表名称的组合。

# java - 从Java中的字符串中删除变音符号

> ID：10699849
> 
> 赞同：8
> 
> 时间：2012-05-22T10:04:57.260
> 
> 标签：java, android, string

> **可能重复：**
> [ń ǹ ň ñ ṅ ņ ṇ ṋ ṉ ̈ ɲ ƞ ᶇ ɳ ȵ --> n 或从 unicode 字符中删除变音符号](https://stackoverflow.com/questions/1453171/n-n-n-or-remove-diacritical-marks-from-unicode-cha)

如何从字符串中删除变音符号？

例如，转换所有适用于所有语言的 á->a、č->c 等。

我正在进行全文搜索，并且需要忽略搜索文本上的任何变音符号。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-22T10:14:13.813

使用 API 级别 9+，您可以使用[Normalizer](http://developer.android.com/reference/java/text/Normalizer.html)类，例如

```
String normalized = Normalizer.normalize("âbĉdêéè", Form.NFD)
    .replaceAll("\\p{InCombiningDiacriticalMarks}+", ""); 
```

（Keysers 链接的答案看起来更好，它清除了更多的废话）

这将返回`"abcdeee"`。

# javascript - 将 JavaScript 日期转换为 .NET 日期时间

> ID：10699851
> 
> 赞同：10
> 
> 时间：2012-05-22T10:05:02.210
> 
> 标签：javascript, .net, date, datetime

我从 JavaScript 获取 Date 值到 MVC 中的控制器，我想将其解析为 .NET 格式的 DateTime 但它给了我一个错误，例如：

> 该字符串未被识别为有效的日期时间。

JavaScript 日期的格式为：

```
"Wed May 23 2012 01:40:00 GMT+0200 (W. Europe Daylight Time)" 
```

我已经尝试过了，但它不起作用：

```
DateTime.ParseExact(begin.Substring(1, 24), "ddd MMM d yyyy HH:mm:ss", CultureInfo.InvariantCulture); 
```

任何人都可以给我一个示例代码吗？谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-05-12T07:27:35.903

以下内容可以很好地使用 .NET MVC 控制器中的默认 DateTime 模型绑定器进行解析：

```
var myJsDate = new Date();
var myDotNetDate = myJsDate.toISOString(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T10:11:11.910

`DateTime`与其解析文本表示，不如从时间戳构造 a 会更健壮。从 JS 获取时间戳`Date`：

```
var msec = date.getTime(); 
```

并将`msec`（表示毫秒数）转换为`DateTime`：

```
var date = new DateTime(1970, 1, 1, 0, 0, 0, 0); // epoch start
date = date.AddMilliseconds(msec); // you have to get this from JS of course 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-19T17:51:07.510

这是我做了什么以及为什么。我希望这有帮助。

JS 日期`var d = new Date()`

返回：2015 年 11 月 19 日星期四 08:30:18 PST

C# 不喜欢这种格式，所以将其转换为 UTC：

```
var dc = d.toUTCString() 
```

返回：2015 年 11 月 19 日星期四 16:30:18 UTC

UTC – 世界时间标准不是时区，因此您需要将其更改为时区

```
var cr = dc.replace("UTC","GMT") 
```

现在它准备好了

格林威治标准时间 2015 年 11 月 19 日星期四 16:30:18

在一行中

```
var ol = d.toUTCString().replace("UTC","GMT")` 
```

格林威治标准时间 2015 年 11 月 19 日星期四 16:30:18

对于 C#

```
DateTime DateCreated= DateTime.Parse(ol); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-03T14:25:04.230

您不需要任何转换：.NET MVC 控制器中的默认 DateTime 模型绑定器可以很好地与 JavaScript Date 对象配合使用。

使用[Moment.js](http://momentjs.com/)

1) **.NET 日期时间 -> JavaScript 日期**

```
var jsDate = moment(dotNetDateTime).toDate(); 
```

2) **JavaScript 日期 -> .NET 日期时间**

```
var dotNetDateTime = jsDate; 
```

# html - 在 Firefox 和 Opera 中标记 HTML5 缓存

> ID：10699857
> 
> 赞同：1
> 
> 时间：2012-05-22T10:05:22.820
> 
> 标签：html, firefox, caching, video, opera

我在 Firefox 和 Opera 中使用 HTML5 标签的缓存有问题。

我的页面有一个按钮，当它被点击时会在服务器中生成一个新视频（总是同名），当视频生成时，页面中会显示视频.../video。

问题是 Firefox 和 Opera 总是在页面中显示视频的第一个版本，如果我直接输入视频 URL，则显示最后一个版本（正确）。

我曾尝试使用“meta http-equiv="Cache-control" content="no-cache" " 删除缓存，但它没用。

在 Chrome 和 Safari 中它可以完美运行。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T08:06:55.353

3个选项：

1.  **为 video-file**发送适当的缓存控制标头。这将通过 htaccess 文件或 web.config 文件 (Apache / IIS) 完成。虽然本质上是一个很好的解决方案，但在某些浏览器中可能仍然会失败
2.  像这样将时间码附加到路径：`http://mydomain.com/mypath/myvideo.mp4?t=13591239123`
3.  始终为视频文件使用新名称 - 例如通过计算生成的视频并按顺序编号

选项 3 连同删除旧视频的 cronjob 可能是最好的 - 否则两个用户同时查看您的页面会覆盖彼此的视频。

选项 1 / 2 适用于单用户环境。

`<video id='myvideo'>`选项 2 将在完成生成新视频后重置元素的路径：

```
document.getElementById('myvideo').setAttribute("http://mydomain.com/mypath/myvideo.mp4?t="+(+new Date()); 
```

请注意，此解决方案仅处理一个源文件。要在所有浏览器中工作，您需要 mp4 和 webm（或 ogv）文件 --> 两个视频文件比较[http://caniuse.com/webm](http://caniuse.com/webm)和[http://caniuse.com/mpeg4](http://caniuse.com/mpeg4)

# vba - 使用 VBA 在 Word 模板中填充表格？

> ID：10699872
> 
> 赞同：4
> 
> 时间：2012-05-22T10:05:58.373
> 
> 标签：vba, templates, ms-word

我正在使用从用户输入中收集的数据填写 Word 模板。特别是选择（可变）数量的文档，并且关于每个文档的信息填满表格的一行。

我已经为模板中的几个项目添加了书签，并成功地在我的宏的标题中填写了信息，但我不太确定该表。我为第一个单元格添加了书签，并尝试通过标签（使用 Chr(9)），还尝试传递一个数组。（在模板中，表格只有第一行。通常在最后一列之后按 Tab 键会创建一个额外的行。）

我可以用

```
 Word.Application.ActiveDocument.Tables(1).Cell(3, 1).Range.Text 
```

但不能写入除第一个单元格之外的任何单元格，我在其中放置了书签。

谁能提供一个可能的解决方案来填充表格？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T11:28:36.617

要填充表格，请使用此代码

```
ActiveDocument.Tables(1).Cell(1, 1).Range.Text = "Blah Blah" 
```

这将写入第一个表中的第一个单元格。使用循环填充其余单元格。

我还建议查看此链接。

**主题：自动化数据插入和提取的词表**

**链接**： http: [//msdn.microsoft.com/en-us/library/aa537149%28v=office.11​​%29.aspx#Y1254](http://msdn.microsoft.com/en-us/library/aa537149%28v=office.11%29.aspx#Y1254)

**提取物**：

> 摘要：了解如何在 Word 中自动创建和格式化表格。获取有关优化性能、用数据填充表、格式化表结构、链接表数据以及从表中提取数据的信息。（25 页）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T15:50:03.647

实际上，我在使用 Access 自动填写 Word 表格模板时遇到了类似的问题。我发现如果我在运行 VBA 脚本之前在 Word 中打开了模板，那么 Word 文档中的表格信息就成功填写了。就逐行添加而言，我的代码看起来与您的相似。因为要传输到表单的字段数量是动态的，所以每个部分的书签似乎都不起作用。如果您有任何更新，我很高兴听到解决此问题的不同方法。

# javascript - jQuery 变量包含 " 和 '

> ID：10699877
> 
> 赞同：0
> 
> 时间：2012-05-22T10:06:11.823
> 
> 标签：javascript, jquery

是否可以在不实际编辑 postbody 变量内容的情况下替换`'`postbody 变量中的`&#39;`

```
var postbody = '<div class="postbody">this is tom's and bill's post</div>';
var postid = $('#post-content');
postid.append(postbody);​ 
```

[http://jsfiddle.net/3nVrZ/](http://jsfiddle.net/3nVrZ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:15:11.397

创建一个元素并设置其文本，然后您不必对其进行编码：

```
var post = $('<div/>', { 'class': 'postbody' });
post.text("this is tom's and bill's post");
$('#post-content').append(post);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:09:28.963

你可以使用

```
var postbody = '<div class="postbody">this is tom\'s and bill\'s post</div>'; 
```

或者

```
var postbody = "<div class=\"postbody\">this is tom's and bill's post</div>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:17:41.320

如果您真的想替换字符串中的某些内容，只需使用 replace()：

```
var postbody = "<div class=\"postbody\">this is tom's and bill's post</div>";
postbody = postbody.replace(/\'/g, "&#39;"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:19:14.453

尝试使用这个

```
var postbody = "<div class='postbody'>this is tom's and bill's post</div>";
var postid = $('#post-content');
postid.append(postbody);​ 
```

[http://jsfiddle.net/ipsjolly/3nVrZ/1/](http://jsfiddle.net/ipsjolly/3nVrZ/1/)

# android - 如何纠正错误解析数据：必须以 JsonObject 文本“{”开头？

> ID：10699882
> 
> 赞同：-1
> 
> 时间：2012-05-22T10:06:26.437
> 
> 标签：android, getjson, json

EnregistrerActivity.java - 处理注册事件的活动

```
package tn.pack.ordre.enregistrer;

    import org.json.JSONException;
    import org.json.JSONObject;

    import tn.pack.ordre.enregistrer.UserFunctions;

    import tn.pack.ordre.R;
    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.EditText;
    import android.widget.TextView;

    public class EnregistrerActivity extends Activity {

       /** Called when the activity is first created. */
        @Override
      public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
             // Fixe la mise en page d’une activité
            setContentView(R.layout.inscription);

        } 

      public void btn_valider(View v) {     

          String  userName=((EditText)findViewById(R.id.et_un)).getText().toString();
          String  password=((EditText)findViewById(R.id.et_pw)).getText().toString();
          String  cin=((EditText) findViewById(R.id.et_cin)).getText().toString();

            UserFunctions userFunction = new UserFunctions();
            JSONObject json = userFunction.registerUser(userName,cin,password);
            TextView errorE = (TextView)findViewById(R.id.textViewerrer);

            try {

                if (json.getString("success") != null) {

                    String res = json.getString("success");
                    if (Integer.parseInt(res) == 1) {

                        errorE.setText("enregistrement ok");

                    } else {
                        errorE.setText("erreur pendant l'enregistrement");

                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
                System.out.println("btnRegister:  "+e.toString());
            }

         }

      public void Annuler(View v) {

                        startActivity(new Intent(getApplicationContext(),LoginActivity.class));

                       }
    } 
```

UserFunctions.java - 在这个类中，所有函数都将与 JSONParser 交互

```
package tn.pack.ordre.enregistrer;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

public class UserFunctions {

    private JSONParser jsonParser;

    private static String loginURL = "http://10.0.2.2/webservice/index.php";
    private static String registerURL = loginURL;

    private static String login_tag = "login";
    private static String register_tag = "register";

    // constructor
    public UserFunctions(){
        jsonParser = new JSONParser();
    }

    public JSONObject loginUser(String userName, String password){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", login_tag));
        params.add(new BasicNameValuePair("userName", userName));
        params.add(new BasicNameValuePair("password", password));
        JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);

        return json;
    }

    /**
     * function make Login Request
     * @param userName
     * @param cin
     * @param password
     * */

    public JSONObject registerUser(String userName, String cin,String password){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", register_tag));
        params.add(new BasicNameValuePair("userName", userName));
        params.add(new BasicNameValuePair("cin", cin));
        params.add(new BasicNameValuePair("password", password));

        // getting JSON Object
        JSONObject json = jsonParser.getJSONFromUrl(registerURL, params);

        // return json
        return json;
    }

} 
```

JSONParser.java - 解析 api 响应 JSON。

```
package tn.pack.ordre.enregistrer;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    } 

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

错误的 logCat： **E/JSON 解析器（261）**

```
 05-22 09:28:44.699: E/Buffer Error(261): Error converting result java.lang.NullPointerException
    05-22 09:28:44.708: E/JSON Parser(261): Error parsing data org.json.JSONException: A JSONObject text must begin with '{' at character 0 of...
    05-22 09:28:44.750: E/AndroidRuntime(261): Uncaught handler: thread main exiting due to uncaught exception
    05-22 09:28:44.798: E/AndroidRuntime(261): java.lang.IllegalStateException: Could not execute method of the activity
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.View$1.onClick(View.java:2031)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.View.performClick(View.java:2364)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.View.onTouchEvent(View.java:4179)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.View.dispatchTouchEvent(View.java:3709)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.os.Handler.dispatchMessage(Handler.java:99)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.os.Looper.loop(Looper.java:123)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.app.ActivityThread.main(ActivityThread.java:4363)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at java.lang.reflect.Method.invokeNative(Native Method)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at java.lang.reflect.Method.invoke(Method.java:521)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at dalvik.system.NativeStart.main(Native Method)
    05-22 09:28:44.798: E/AndroidRuntime(261): Caused by: java.lang.reflect.InvocationTargetException
    05-22 09:28:44.798: E/AndroidRuntime(261):  at tn.pack.ordre.enregistrer.EnregistrerActivity.btn_valider(EnregistrerActivity.java:45)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at java.lang.reflect.Method.invokeNative(Native Method)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at java.lang.reflect.Method.invoke(Method.java:521)
    05-22 09:28:44.798: E/AndroidRuntime(261):  at android.view.View$1.onClick(View.java:2026)
    05-22 09:28:44.798: E/AndroidRuntime(261):  ... 23 more
    05-22 09:28:44.798: E/AndroidRuntime(261): Caused by: java.lang.NullPointerException
    05-22 09:28:44.798: E/AndroidRuntime(261):  ... 27 more
    05-22 09:37:39.449: E/Buffer Error(354): Error converting result java.lang.NullPointerException
    05-22 09:37:39.449: E/JSON Parser(354): Error parsing data org.json.JSONException: A JSONObject text must begin with '{' at character 0 of 
    05-22 09:37:39.459: E/AndroidRuntime(354): Uncaught handler: thread main exiting due to uncaught exception
    05-22 09:37:39.499: E/AndroidRuntime(354): java.lang.IllegalStateException: Could not execute method of the activity
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.View$1.onClick(View.java:2031)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.View.performClick(View.java:2364)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.View.onTouchEvent(View.java:4179)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.View.dispatchTouchEvent(View.java:3709)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.os.Handler.dispatchMessage(Handler.java:99)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.os.Looper.loop(Looper.java:123)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.app.ActivityThread.main(ActivityThread.java:4363)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at java.lang.reflect.Method.invokeNative(Native Method)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at java.lang.reflect.Method.invoke(Method.java:521)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at dalvik.system.NativeStart.main(Native Method)
    05-22 09:37:39.499: E/AndroidRuntime(354): Caused by: java.lang.reflect.InvocationTargetException
    05-22 09:37:39.499: E/AndroidRuntime(354):  at tn.pack.ordre.enregistrer.EnregistrerActivity.btn_valider(EnregistrerActivity.java:39)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at java.lang.reflect.Method.invokeNative(Native Method)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at java.lang.reflect.Method.invoke(Method.java:521)
    05-22 09:37:39.499: E/AndroidRuntime(354):  at android.view.View$1.onClick(View.java:2026)
    05-22 09:37:39.499: E/AndroidRuntime(354):  ... 23 more
    05-22 09:37:39.499: E/AndroidRuntime(354): Caused by: java.lang.NullPointerException
    05-22 09:37:39.499: E/AndroidRuntime(354):  at tn.pack.ordre.enregistrer.UserFunctions.registerUser(UserFunctions.java:60)
    05-22 09:37:39.499: E/AndroidRuntime(354):  ... 27 more
05-22 09:37:39.499: E/AndroidRuntime(354):  ... 27 more
05-22 09:37:39.539: I/Process(52): Sending signal. PID: 354 SIG: 3
05-22 09:37:39.539: I/dalvikvm(354): threadid=7: reacting to signal 3
05-22 09:37:39.709: I/dalvikvm(354): Wrote stack trace to '/data/anr/traces.txt'
05-22 09:37:42.819: I/Process(354): Sending signal. PID: 354 SIG: 9
05-22 09:37:42.869: I/WindowManager(52): WIN DEATH: Window{44e2a0e0 tn.pack.ordre/tn.pack.ordre.enregistrer.EnregistrerActivity paused=false}
05-22 09:37:42.869: I/ActivityManager(52): Process tn.pack.ordre (pid 354) has died.
05-22 09:37:42.879: I/WindowManager(52): WIN DEATH: Window{44e00b30 tn.pack.ordre/tn.pack.ordre.enregistrer.LoginActivity paused=false}
05-22 09:37:42.909: I/ActivityManager(52): Start proc tn.pack.ordre for activity tn.pack.ordre/.enregistrer.LoginActivity: pid=363 uid=10028 gids={3003, 1015}
05-22 09:37:43.119: D/ddm-heap(363): Got feature list request
05-22 09:37:43.189: I/UsageStats(52): Unexpected resume of tn.pack.ordre while already resumed in tn.pack.ordre
05-22 09:37:43.349: D/dalvikvm(363): GC freed 719 objects / 54696 bytes in 72ms
05-22 09:37:45.359: W/InputManagerService(52): Got RemoteException sending setActive(false) notification to pid 354 uid 10028
05-22 09:37:45.741: I/ActivityManager(52): Displayed activity tn.pack.ordre/.enregistrer.LoginActivity: 2862 ms (total 2862 ms)
05-22 09:37:46.958: I/ActivityManager(52): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.android.launcher/.Launcher }
05-22 09:37:47.228: W/InputManagerService(52): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@44e3eaf8 (uid=10028 pid=363)
05-22 09:37:52.699: D/dalvikvm(111): GC freed 164 objects / 6600 bytes in 140ms
05-22 09:46:00.269: D/dalvikvm(52): GC freed 11198 objects / 572384 bytes in 213ms
05-22 09:56:13.229: D/dalvikvm(52): threadid=15: bogus mon 1+0>0; adjusting
05-22 10:05:11.108: D/dalvikvm(104): GC freed 10860 objects / 507696 bytes in 131ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:11:15.000

这是因为数据流开头的[UTF BOM 字节不可打印。](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)对于 UTF-8，它应该是 EFBBBFh。

当您删除（或跳过）这些字节时，它将得到解决。

# blackberry - 黑莓：从 SD 卡图像创建位图对象

> ID：10699885
> 
> 赞同：0
> 
> 时间：2012-05-22T10:06:34.533
> 
> 标签：blackberry

我们可以`Bitmap`从 SD 卡图像文件路径创建一个对象吗？

我已经编写了一个示例方法来创建它。这是正确的方法吗？

```
public Bitmap createBitmap(String filepath){    
    try {
        // filepath e.g. "file:///SDCard/test.jpg"
        FileConnection fc = (FileConnection)Connector.open(filepath);
        byte[] responseData = new byte[10000];
        InputStream inputStream =fc.openDataInputStream();
        int length = 0;
        StringBuffer rawResponse = new StringBuffer();
        while (-1 != (length = inputStream.read(responseData))) {
            rawResponse.append(new String(responseData, 0, length));
        }

        byte[] dataArray = rawResponse.toString().getBytes();
        Bitmap bitmap = Bitmap.createBitmapFromBytes(dataArray, 0, dataArray.length, 1);
        // EncodedImage.createEncodedImage(dataArray, 0, dataArray.length);

        return bitmap;
    } catch (IOException e) {
        return null;
        // TODO Auto-generated catch block
        // e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:31:22.883

公共最终类 MyScreen 扩展 MainScreen {

```
Bitmap bit, bit1;

BitmapField bitf[] = new BitmapField[12];

FileConnection fc;

FlowFieldManager grid;

String[] imgpath = { "bharat.png", "fighter1.jpg", "fighter2.jpg",
        "fighter3.jpg", "fighter4.jpg", "fighter5.jpg", "fighter7.jpg",
        "fighter8.jpg", "fighter9.jpg", "fighter10.jpg", "fighter11.jpg",
        "fighter6.jpg" };
String compath = "file:///SDCard/";`enter code here`

public MyScreen() {
    grid = new FlowFieldManager();
    try {

        setTitle("Bharat Title");

        for (int i = 0; i < imgpath.length; i++) {

            fc = (FileConnection) Connector.open(compath + imgpath[i]);
            DataInputStream in = fc.openDataInputStream();
            int size = (int) fc.fileSize();
            byte[] bb = new byte[size];
            bb = IOUtilities.streamToBytes(in);
            bit = bit.createBitmapFromBytes(bb, 0, bb.length, 1);
            bit1 = new Bitmap(120, 120);
            bit.scaleInto(bit1, Bitmap.FILTER_BOX);
            bitf[i] = new BitmapField(bit1, FOCUSABLE);
            grid.add(bitf[i]);
            fc.close();

        }
    }

    catch (Exception ex) 
    {
        ex.getMessage();
    }
    finally {
        try {
            fc.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    add(grid);
} 
```

}

# java - list.get().method 生成强制转换异常

> ID：10699888
> 
> 赞同：0
> 
> 时间：2012-05-22T10:06:41.150
> 
> 标签：java

我编写了这样的代码来使用 HQL 从数据库中获取数据：

```
Query qr=sess.createQuery("select i.contract_Vcode,i.installment_date from Installment i where i.vcode=:instalVcode").setParameter("instalVcode", installVcode);
        qr.getNamedParameters();
List<Installment> li=null;
        li=qr.list();
int coVcode=li.get(0).getContract_Vcode(); 
```

据我所知，`contract_Vcode`是一个整数。但是当我想运行它时，会发生以下错误：

```
Error invoking Action using Hibernate Core Session / Transaction injection
java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to information.Installment 
```

当我想看到这样的确切元素时，

```
System.out.println("contract installDate is: "+li.get(0).getContract_Vcode()); 
```

发生同样的错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:10:33.503

您目前只查询分期付款的两个部分。如果您想获取整个内容，我希望是这样的：

```
Query qr = sess.createQuery(
                    "select from Installment as i where i.vcode=:instalVcode")
               .setParameter("instalVcode", installVcode); 
```

如果您获取多个属性（而不是整个实体），您只需`Object[]`为结果中的每一行返回一个。

因此，您可以使用原始查询，但是：

```
List<Object[]> li = qr.list();
int coVcode = (Integer) li.get(0)[0]; // 1st column of 1st row 
```

# iphone - 呈现带有动画效果的模态视图

> ID：10699891
> 
> 赞同：0
> 
> 时间：2012-05-22T10:06:49.917
> 
> 标签：iphone, objective-c, ios, animation

在我的 iPhone 应用程序中，我需要显示一个具有透明背景的模态视图，它应该出现动画，就像它从视图中心出现并且它的大小正在增加一样。

当我们单击设置按钮时，类似于“绘制某些东西”iPhone App。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:16:26.170

您可以执行以下 4 种过渡样式之一：

```
viewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
viewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
viewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
viewController.modalTransitionStyle = UIModalTransitionStylePartialCurl;

[self presentModalViewController:viewController animated:YES]; 
```

如果你想要一些不包含在这些默认值中的东西，你将不得不构建自己的自定义动画来呈现模态视图。像下面这样，但显然是你想要的风格。

[UIModalTransitionStyle 水平移动](https://stackoverflow.com/questions/3509869/uimodaltransitionstyle-horizontal-movement)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T06:21:27.617

假设您有一个要呈现的名为 aScoreSheet 的 viewController。尝试在将要进行呈现的视图控制器中定义此方法。

```
-(void) presentTransparentModalViewController: (ScoreSheet *) aViewController 
{

    scoreSheet = aViewController;
    UIView *view = aViewController.view;

view.opaque = NO;
[view.subviews enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    UIView *each = obj;
    each.opaque = NO;
}];
    [self.view addSubview:view];

    view.center = CGPointMake(160, 800); //for iPhone

    [UIView animateWithDuration:0.9 delay:0 options:UIViewAnimationCurveEaseInOut animations:^{
         view.center = CGPointMake(160, 240);
    } completion:^(BOOL finished) {

        self.view.userInteractionEnabled=YES;
    }];

} 
```

然后解雇控制器：

```
-(void) dismissTransparentModalViewControllerAnimated:(BOOL) animated{

if (animated) {

    [UIView animateWithDuration:0.4
                     animations:^{
                         scoreSheet.view.center = CGPointMake(scoreSheet.view.center.x, scoreSheet.view.center.y + 480);
                     } completion:^(BOOL finished) {
                         [scoreSheet.view removeFromSuperview];
                         scoreSheet = nil;
                     }];
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:19:21.923

不是一个完整的答案，但也许你可以看看这个开源库：

[https://github.com/Split82/HMGLTransitions](https://github.com/Split82/HMGLTransitions)

它有一些自定义的模态转换，可能不完全是您正在寻找的那个，但您可以通过子类轻松添加您的转换`HMGLTransition`。

希望这可以帮助

# bash - 退出在 Bash 中没有按预期工作

> ID：10699896
> 
> 赞同：0
> 
> 时间：2012-05-22T10:07:01.587
> 
> 标签：bash, ssh

我使用 SSH Secure Shell 客户端连接到服务器并运行我的脚本。

我想在某些情况下停止脚本，所以当我使用退出时，不仅脚本停止，而且所有客户端都与服务器断开连接！，这是代码：

```
if [[ `echo $#` -eq 0 ]]; then
        echo "Missing argument- must to get a friend list";
        exit
fi

for user in $*; do
        if [[ !(-f `echo ${user}.user`) ]]; then
                echo "The user name ${user} doesn't exist.";
                exit
        fi
done 
```

客户照片：
![在此处输入图像描述](../Images/d0f5781663872137725d3fe6073cfb51.png)

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:11:04.267

您用于`source`运行脚本，这将在当前 shell 中运行它。这意味着`exit`终止当前的 shell 和 ssh 会话。

替换`source`为 `bash`它应该可以工作，或者更好地放

```
#!/bin/bash 
```

到文件并使其可执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:49:32.337

`exit`从当前**shell**返回- 如果您通过直接运行脚本来启动它，这将退出正在运行脚本的 shell。

`return`从**函数**或**源文件**返回（TY Dennis Williamson） - 同样的事情，但它不会终止您当前的 shell。

`break`从**循环**返回- 类似于`return`，但可以在循环中的任何位置使用以停止处理更多项目。这可能就是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:15:46.997

如果您从当前 shell 运行，exit 显然会从 shell 退出并断开您的连接。尝试在新的 shell 中运行它（在脚本之前使用 .）或者使用 'return' 而不是 exit

# jquery - 带有附加重新加载页面的jquery排序

> ID：10699897
> 
> 赞同：0
> 
> 时间：2012-05-22T10:07:10.107
> 
> 标签：jquery, sorting, append, reload

我有非常简单的代码，可以在我的其他网站上正常工作......我有一个文本。在这个范围内，我绑定了 onclick 事件。如果有人单击它，跨度下的表格将被排序。但是，如果我点击它，站点会重新加载并且在新页面上我只能看到表格中的第一张图片（使用 FF，在 Chrome 上我可以看到所有图片，但只能看到图片）。

重新加载是在追加时进行的。我不知道如何修复，特别是如果我有相同的代码在其他网站上正常工作......

```
<span id="tableSort">Sort</span> 
```

和简短的JS代码：

```
jQuery(function(){

    var sortOrder = '';
    function tableSort(e) {
            e.preventDefault();
            var mylist = jQuery('table#pcWide');
            var listitems = mylist.children('tbody').children('tr').get();
            (sortOrder === '') ? sortOrder = 'd': (sortOrder == 'a')? sortOrder = 'd': sortOrder = 'a';
            listitems.sort(function(a, b) {
                    var ca = jQuery(a).attr('id');
                    var compA = ca.substr(1);
                    var cb = jQuery(b).attr('id');
                    var compB = cb.substr(1);
                    if (sortOrder === 'd') {
                            jQuery('#tableSort').removeClass('sl-down').addClass('sl-up');
                            return compB - compA;
                    } else {
                            jQuery('#tableSort').removeClass('sl-up').addClass('sl-down');
                            return compA - compB;
                    }
            });
            jQuery.each(listitems, function(idx, itm) {mylist.append(itm);});
    }
    jQuery('span#tableSort').click(function(e) {tableSort(e);});
}); 
```

# c++ - 事件系统优化

> ID：10699899
> 
> 赞同：2
> 
> 时间：2012-05-22T10:07:20.227
> 
> 标签：c++, templates

如果我有这些声明和定义：

```
enum Events
{
  INIT,
  RENDER
};

struct EventBase
{
  typedef void (EventBase::*event_callback_type)();

  ~EventBase() {}

  virtual void init() { assert(0); }
  virtual void render() { assert(0); }
};

template <enum Events>
struct EventTraits
{
  static EventBase::event_callback_type const event_callback;
};

// in a .cpp file
template <>
EventBase::event_callback_type const
EventTraits<INIT>::event_callback(
  &EventBase::init);

template <>
EventBase::event_callback_type const
EventTraits<RENDER>::event_callback(
  &EventBase::render);

// in another class *i are pointers to objects that inherit EventBase
template <enum Events event>
inline void EventNotifier::notify()
{
  for (events_type::const_iterator i(event_handlers[event].begin());
    i != event_handlers[event].begin() + num_event_handlers[event];
    ++i)
  {
    ((*i)->*EventTraits<event>::event_callback)();

    if ((*i)->num_event_handlers[event])
    {
      (*i)->notify<event>();
    }
    // else do nothing
  }
} 
```

说，事件 RENDER 需要尽可能快的处理，你认为是否值得做一个成员模板专业化：

```
template <>
inline void EventNotifier::notify<RENDER>()
{
  for (events_type::const_iterator i(event_handlers[RENDER].begin());
    i != event_handlers[RENDER].begin() + num_event_handlers[RENDER];
    ++i)
  {
    (*i)->render();

    if ((*i)->num_event_handlers[RENDER])
    {
      (*i)->notify<RENDER>();
    }
    // else do nothing
  }
} 
```

这不需要获取指向成员函数的静态指针。或者我应该这样做：

```
template <enum Events>
struct EventTraits
{
  static EventBase::event_callback_type event_callback();
}; 
```

并专门化结构模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:27:44.020

只需额外的 5 美分。EventNotifier::notify() 看起来完全是线程不安全的。此外，如果任何事件处理程序生成新事件，可能会发生坏事。我建议以这种方式进行通知（C++ 11，只是不知道您的所有类型）：

```
template <> inline void EventNotifier::notify<RENDER>()
{
  decltype(event_handlers[RENDER]) local;
  decltype(num_event_handlers[RENDER]) local_num;

  {
    std::lock_guard<std::mutex> guard(my_mutex);
    local = event_handlers[RENDER];
    local_num = num_event_handlers[RENDER];
  }

  for (events_type::const_iterator i(local.begin()); i != local.begin() + local_num; ++i)
  {
    (*i)->render();

    if ((*i)->num_event_handlers[RENDER]) (*i)->notify<RENDER>();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:51:17.513

成员专业化不会对其当前形式产生任何影响，因为您编写的代码与编译器将为您生成的代码相同。

这是一个小的改进：

```
template <enum Events event>
inline void EventNotifier::notify()
{
  for (events_type::const_iterator i(event_handlers[event].begin()),
       end (event_handlers[event].begin() + num_event_handlers[event]);
       i != end; ++i)
  {
    ((*i)->*EventTraits<event>::event_callback)();

    if ((*i)->num_event_handlers[event])
    {
      (*i)->notify<event>();
    }
    // else do nothing
  }
} 
```

# asp.net - 当我们在浏览器中前进一页并返回一页时会发生什么它会访问服务器并重新加载页面？

> ID：10699901
> 
> 赞同：0
> 
> 时间：2012-05-22T10:07:30.590
> 
> 标签：asp.net

在我的代码中，我在页面加载和一些按钮单击时维护了一些会话。它工作正常，但在浏览器中，如果返回一页或前进一页，它会干扰所有会话。

那么在浏览器中后退一页，前进一页背后的概念是什么。

当我们前进或后退时，是否会从服务器重新加载页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:12:40.727

这取决于您的配置。

您可以将以下代码添加到您的母版页以强制重新加载所有页面

```
protected override void OnInit(EventArgs e)
    {
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        Response.Cache.SetNoStore();
        Response.Cache.SetExpires(DateTime.MinValue);

        base.OnInit(e);
    } 
```

# java - 如何禁用 Wicket DynamicWizardStep 上的完成按钮？

> ID：10699905
> 
> 赞同：1
> 
> 时间：2012-05-22T10:07:37.703
> 
> 标签：java, wicket

我正在使用 Wicket DynamicWizardStep（检票口扩展），它提供了许多导航按钮（上一个、下一个、取消、完成）

在我的最后一个向导步骤中，如果不满足某些条件，我需要禁用“完成”按钮。

DynamicWizardStep 可以实现某些方法来控制按钮的行为，但我不清楚它是否可能，或者需要满足哪些条件才能禁用 Finish 按钮。目前我已经实现了以下方法，因为这个特定的步骤是我的向导中的最后一步。

有没有办法选择性地启用/禁用“完成”按钮？

```
@Override
public boolean isNextAvailable() {
    return false;
}

@Override
public IDynamicWizardStep next() {
    return null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:19:18.570

答案是执行

```
@Override
public boolean isLastStep() {
    return false;
} 
```

# wordpress - 显示其他页面的自定义字段

> ID：10699906
> 
> 赞同：0
> 
> 时间：2012-05-22T10:07:38.157
> 
> 标签：wordpress, custom-fields

我有一些带有自定义字段的页面，这些自定义字段信息我将通过翻转显示在我的菜单下，作为其他页面的页面描述动态。

```
get_post_meta($post->ID, 'page_desc', true) 
```

这些工作正常，但仅适用于当前页面。我无法从其他页面获取自定义字段信息。我该如何解决这个问题？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:36:50.170

There is no way using this function.

But if you know other post id or logic to get it

pass that id to

```
get_post_meta($post_ID, 'page_desc', true) 
```

Where $post_ID id is the other post id.

# c# - TFS 的 Sharepoint 合并

> ID：10699907
> 
> 赞同：0
> 
> 时间：2012-05-22T10:07:40.353
> 
> 标签：c#, sharepoint, dll, tfs

是否可以使用 SharePoint 调用工具的特性/功能或操作 TFS 工作项的 TFS 的 API？

有没有办法在 SharePoint 中调用 ac# DLL 的方法？

你能告诉我这是怎么发生的吗？

先感谢您。这对我会有很大的帮助。

# java - JTable表头的不同颜色

> ID：10699909
> 
> 赞同：0
> 
> 时间：2012-05-22T10:07:43.773
> 
> 标签：java, swing, jtable, jframe, jtableheader

我遇到了一个问题，如果我在同一个 java 文件中使用 main 方法，该文件包含包含 JTable 的 JFrame 的代码，并且我将标题颜色设置为黄色，当我运行它时，标题将为黄色。但是，如果我通过从其他类调用它来实例化 JFRame，则标题将不是黄色，而是默认颜色。即使我从其他类实例化 JFrame 并因此实例化 JTable，是否有任何方法可以确保颜色保持不变？非常感谢！如果我没有解释清楚，我很乐意澄清事情。

嗨，我很抱歉没有事先提供代码。这里是 ：

```
EquityFrame eq= new EquityFrame(file,"Apr2012");
this.dispose();// this code is in another class of a JFrame which will call the constructor of EquityFrame class 
```

EquityFrame 类的代码

```
 public EquityFrame(File file, String nameTab){
    createAndShowGUI( file,  nameTab);
}

    private  void createAndShowGUI(File file, String nameTab){
    //create frame

    JTabbedPane  tabPane= new JTabbedPane();
    //pre-processing
    init(file,nameTab);
    //adding tabs
    tabPane.addTab("Proposal", makeAdminPanel());
    JFrame.setDefaultLookAndFeelDecorated(true);
    JFrame jf= new JFrame("CGH Equity Program");
    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    jf.setLayout(new BorderLayout());
    jf.add(tabPane,BorderLayout.CENTER);
    int w = Toolkit.getDefaultToolkit().getScreenSize().width;
    int h = Toolkit.getDefaultToolkit().getScreenSize().height;
    jf.setSize(w, h);
    jf.setVisible(true);
}
private JPanel makeAdminPanel(){
    JPanel jp=new JPanel();
    String[] column = {"Job Grade", "Job Title", "Min", "Midpoint", "Max", 
        "Lowest", "P10", "P25", "Median", "P65", "P75", "P90", 
        "Highest", "Average"};
    String[][] data= getArrayOfValuesForEachJobGrade();
    jp.setLayout(new BorderLayout());
    JTable jt= new JTable(data,column);
    JTableHeader th=jt.getTableHeader();
    th.setBackground(java.awt.Color.pink);
    th.setEnabled(false);
    jt.setTableHeader(th);
    jt.setEnabled(false);
    jp.add(jt,BorderLayout.CENTER);
    JScrollPane scrollPane = new JScrollPane(jt, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
    scrollPane.setEnabled(false);
    jp.add(scrollPane, BorderLayout.CENTER);
    return jp;
} 
```

我将首先运行第一个 java 文件，该文件将创建一个 EquityFrame 实例，该实例将显示一个带有 JTable 的 tabbedPane。但是，我通过使用自己的 main 方法运行 EquityFrame 获得的 GUI 与我在另一个代码中创建它的实例获得的 GUI 不同。如果我使用它自己的 main 方法运行它，表头的颜色会发生变化。但是，如果我从其他 java 类运行它，颜色仍然是默认值。

如果我使用它的主要方法运行它：http: [//tinypic.com/r/2r5yjdj/6](http://tinypic.com/r/2r5yjdj/6)

如果我使用其他类运行它来调用它的构造函数来生成 JFrame： [http ://tinypic.com/r/3523yax/6](http://tinypic.com/r/3523yax/6)

再次感谢您提供的任何帮助！希望这能更清楚地说明我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:36:59.010

在构造任何依赖于新值的东西之前，一定要更改 UI 属性，最好是在启动[事件调度线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)之前。

```
UIManager.put("TableHeader.background", Color.yellow);
EventQueue.invokeLater(new Runnable() {

    @Override
    public void run() {
        new Application();
    }
}); 
```

或者，您可以调整方法中显示[的](https://stackoverflow.com/a/7137801/230513)方法`applyUI()`；它可以在构造函数中调用，如图所示，或者在系统调用`updateUI()`.

附录：您的第一张[图片](http://tinypic.com/view.php?pic=2r5yjdj&s=6)显示了支持`TableHeader.background`UI 属性的外观。第二张[图片](http://tinypic.com/view.php?pic=3523yax&s=6)似乎是 Nimbus L&F，它[*不*](http://java.net/jira/browse/NIMBUS-14)支持该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:26:36.150

是在你的主要方法的定义中设置颜色的代码吗？如果是这样，请将其放在 JFrame 或 JTable 的构造函数中。

# java - Java Cryptography - 真的这么难吗？

> ID：10699910
> 
> 赞同：0
> 
> 时间：2012-05-22T10:07:45.333
> 
> 标签：java, cryptography

我最近一直在尝试制作一个允许您加密和解密文本文件的应用程序，但您也可以传输密钥和文本文件。这只是为了进一步加深我有限的 Java 知识，但我终其一生都找不到任何好的指南或教程。

我要做的就是，生成一个加密密钥，加载一个texfile，用密钥加密文件，将密钥保存到一个单独的文件，将文件和密钥通过电子邮件发送到另一台机器，加载密钥，加载文本文件，解密文本文件。

这真的需要使用私钥和公钥等吗？我不担心它的安全性，它只是一个实验，任何帮助，指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:17:28.930

不，您不需要使用私钥/公钥，这将通过非对称加密。我猜你正在尝试做的是对称加密，这意味着相同的密钥用于加密和解密。

由于您的问题是如何编写的，我怀疑您没有很多关于密码学的知识，在这种情况下，在开始任何类型的实现之前先阅读一些内容可能会更好（例如关于对称/非对称的维基百科文章密码学、流密码、块密码等）。

关于实现，您必须选择一种加密算法。例如，我建议您使用 AES，因为知道他们在说什么的人经常推荐它（例如，在“实用密码学”一书中，如果您对更多细节感兴趣，这也是一本不错的书！）。如果你想这样做，网上有很多例子，或者看看 SO 上的 question like [this one](https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:15:56.340

公钥密码学目前被认为是最省钱的。这是因为在这里您不必通过安全通道传输“共享秘密”。人们只能用公钥加密数据，但需要私钥才能解密。有关更多信息，请参阅有关[公钥密码学的 Wikipedia 页面](http://en.wikipedia.org/wiki/Public-key_cryptography)。

更容易处理密钥伴随着加密本身的成本。一般来说，与对称方法相比，公钥算法具有性能劣势。

如果您想避免使用公钥加密，您可以使用对称算法，例如[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)。

一个快速的谷歌搜索显示了这个链接，它应该可以帮助你开始：

*   [http://java.sun.com/developer/technicalArticles/Security/AES/AES_v1.html](http://java.sun.com/developer/technicalArticles/Security/AES/AES_v1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:50:04.750

在评估加密 API 时请记住一件事：它们的设计以安全为首要考虑（显然 :)。这意味着他们会特别注意在任何地方写入的敏感信息的每个字节。这包括密码和明文。例如，如果一个框架接受一个字符串密码，这违反了安全性，因为 Stringg 失控，躺在堆上。如果它接受一个 char 数组，客户端可以在使用后将数组**清零**。在这些 API 中还会遇到许多源自相同原理的其他示例。

# ruby - 基于先前断开连接的 HTML 元素匹配 DOM 节点的子集

> ID：10699915
> 
> 赞同：0
> 
> 时间：2012-05-22T10:07:55.407
> 
> 标签：ruby, csv, nokogiri, mechanize

我试图抓取到 CSV 数据库/Ruby 数组的页面列出了 470 个大小不一的组的总记录，每个组前面都有一个日期（总共 22 个唯一日期）。

我不知道该怎么做，因为组没有被组织到任何 HTML 表中，也没有在 DOM 中的任何层次结构中，“父”可能导致每个组的日期，只有`<div class="line">`可见记录 div 的干列表，有时前面只有a`<span class="date">Thursday, May 24, 2012</span>`保存仅适用于下 X 条记录的日期，直到打印新日期。

在`irb`其中正确显示：

```
$page = $agent.get(pageurl) # gets page with Mechanize
doc = $page.parser # returns Nokogiri::HTML 

(records = doc.search('html body div#wrapper div#innerwrapper div#content div.line')).size 
=> 470
(dates = doc.search('html body div#wrapper div#innerwrapper div#content span.date')).size 
=> 22 
```

例如显示第一个日期：

```
doc.search('html body div#wrapper div#innerwrapper div#content span.date')[0].text
=> "Wednesday, May 23, 2012" 
```

我的目标是将正确的日期作为字段附加到上面找到的 470**条记录**doc.search 中，然后保存到 CSV 文件中。

Nokogiri（或 Mechanize）可以帮助我根据它们在 DOM 中的位置分组检索这些记录，即紧随其后`dates[N].text`但在下一个之前`<span class="date">`？

我可以将 N 从 0 迭代到 21，附加到所有 470 条记录的主数组/CSV 对象，但对于每个组，添加适当的`date`字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:51:01.207

首先，您可以稍微简化一下搜索。由于 content 是一个`id`，并且它根据定义唯一标识该特定`div`，因此您不需要任何前面的路径信息。

```
records = doc.search('div#content div.line') 
```

`preceding-sibling`从每条记录中，您可以使用 xpath 的轴提取日期。共：

```
doc.search('div#content div.line').each do |record|
  date = record.xpath('preceding-sibling::span[@class="date"][1]').text
  #append to CSV
end 
```

XPath 表示：在同一级别 ( `preceding-sibling::span`) 中找到具有“日期”类( ) 的前面的跨度`[@class="date"]`，并取第一个这样的跨度 ( `[1]`) 以确保您获得最近的日期跨度)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:13:11.287

这是另一个使用 traverse 的好时机：

```
doc.traverse do |node|
  @date = node.text if 'span' == node.name && 'date' == node[:class]
  puts [@date, node.text].join(', ') if 'div' == node.name && 'line' == node[:class]
end 
```

# flash - 指向 Flash 内容的链接不起作用

> ID：10699916
> 
> 赞同：0
> 
> 时间：2012-05-22T10:07:58.017
> 
> 标签：flash, hyperlink, shockwave

我将图形 Flash 内容链接到我的主页：

```
<object width="710" height="260" data="http://www.admaris.net/vindagarden/HiiMEX_Intro/fs_aux.html" type="application/x-shockwave-flash">
<param name="data" value="http://www.admaris.net/vindagarden/HiiMEX_Intro/fs_aux.html" >
<param name="src" value="http://www.admaris.net/vindagarden/HiiMEX_Intro/fs_aux.html" >
</object> 
```

但是，当我转到我网站的主页时，它应该是空白的空间。你可以在这里自己检查：[http ://www.hiimex.se/](http://www.hiimex.se/)

可以在此处查看应该存在的 Flash 图形：http: [//www.admaris.net/vindagarden/HiiMEX_Intro/fs_aux.html](http://www.admaris.net/vindagarden/HiiMEX_Intro/fs_aux.html)

现在不寻常的部分是它在我的计算机上的 Internet Explorer 上运行 - 但是我的 Modzilla 没有显示它，并且在大多数其他计算机上（也在 Internet Explorer 上）它也没有显示。

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:37:49.377

而不是使用这个：

```
<object width="710" height="260" data="http://www.admaris.net/vindagarden/HiiMEX_Intro/fs_aux.html" type="application/x-shockwave-flash">
<param name="data" value="http://www.admaris.net/vindagarden/HiiMEX_Intro/fs_aux.html" >
<param name="src" value="http://www.admaris.net/vindagarden/HiiMEX_Intro/fs_aux.html" >
</object> 
```

尝试使用以下代码嵌入 .swf 文件：

```
<object width='710' height='260' id='player1' name='player1'>
   <param name='movie' value='http://www.admaris.net/vindagarden/HiiMEX_Intro/HiiMEX_Intro.swf'>
   <param name='allowfullscreen' value='true'>
   <param name='allowscriptaccess' value='always'>
   <param name='flashvars' value='file=playlist.xml&dock=true'>
</object> 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:16:53.717

将 myanimation.swf 中的 flash 文件集成到您的 falsh 文件中。它可以帮助你

# iphone - 从屏蔽 UIImage 中获取 UIBezierpath

> ID：10699917
> 
> 赞同：6
> 
> 时间：2012-05-22T10:08:05.520
> 
> 标签：iphone, objective-c, ipad, masking, uibezierpath

我怎么能得到`UIBezierpath`这样的`UIImage`..

![在此处输入图像描述](../Images/f5b1f692806dca5ee2192e35f32e1988.png)

我不想要完整的方形路径，只想要 UIImage 中红色边框所示的路径。

我已经通过[链接 1](https://stackoverflow.com/questions/7071815/ios-mask-a-uiimage-using-uibezierpath)和[链接 2](https://stackoverflow.com/questions/2776747/masking-a-uiimage)但无法成功..

我已经完成了以下代码来获取屏蔽路径..

```
CAShapeLayer *maskLayer = [CAShapeLayer layer];
maskLayer.frame = imgView.frame;
UIBezierPath *roundedPath = [UIBezierPath bezierPathWithRoundedRect:maskLayer.bounds byRoundingCorners:UIRectCornerAllCorners cornerRadii:CGSizeMake(50.f, 50.f)]; 
```

基本上我想得到`UIBezierpath`它遵循字母的形状，如 A，B .. 等。

请告诉我这是否可能获得这种类型的路径？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-09T22:19:25.027

对于寻找答案的其他用户，可以在[此处](https://stackoverflow.com/questions/15252237/uibezierpath-from-image)找到另一种方法（使用 SVG 作为源图像文件和 PocketSVG 转换为路径）

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-05-22T11:53:49.370

试试这个代码：

```
CAKeyframeAnimation *pathAnimation = [CAKeyframeAnimation 
animationWithKeyPath:@"position"];
pathAnimation.calculationMode = kCAAnimationPaced;
pathAnimation.fillMode = kCAFillModeForwards;
pathAnimation.removedOnCompletion = NO;
pathAnimation.duration = 15.0;
pathAnimation.repeatCount = 1;
CGMutablePathRef curvedPath = CGPathCreateMutable();
CGPathMoveToPoint(curvedPath, NULL, x+15, y);
CGPathAddQuadCurveToPoint(curvedPath, NULL, 20, 10, 100, 330);
pathAnimation.path = curvedPath;
CGPathRelease(curvedPath);
Yourimage.center=CGPointMake(x, y);
[Yourimage.layer addAnimation:pathAnimation forKey:@"moveTheSquare"]; 
```

# java - 遍历列表

> ID：10699925
> 
> 赞同：-1
> 
> 时间：2012-05-22T10:08:28.873
> 
> 标签：java, for-loop

看看这段代码：

```
/*   Implementation to populate List<String[]> schedule  */

public List<String[]> getSchedBySIN(String sin) {
    List<String[]> listBySin = null;

    for (String[] temp : schedule) {
        if(temp[0].equals(sin)) listBySin.add(temp);
    }

    return listBySin;
} 
```

`listBySin`该行`...listBySin.add(temp);`带有黄色下划线，Eclipse 告诉我：*Null pointer access: The variable listBySin can only be null at this location*

这是为什么？我想要做的是填充`listBySin`字符串数组，`schedule`如果它们的第一个元素等于`sin`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:10:28.777

您需要为`List`var 分配一个对象。

```
List<String[]> listBySin = new ArrayList<String[]>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T10:10:33.287

您必须实例化列表。

```
List<String[]> listBySin = new ArrayList<String[]>(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T10:10:50.883

初始化/分配您的列表而不是

```
List<String[]> listBySin = null; 
```

使用以下来初始化您的列表

```
List<String[]> listBySin = new ArrayList<String[]>(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T10:12:56.543

您需要先创建对象，然后才能对其调用方法。就像是

```
listBySin = new ArrayList<String[]>(); 
```

在进入循环之前

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-22T10:43:17.493

`You must initialize` `List`根据。您可以使用 ArrayList 或 Vector 或 Stack 或 CopyOnWriteArrayList 进行初始化。

```
 List<String[]> str=new ArrayList<String[]>();
    List<String[]> str=new LinkedList<String[]>();
    List<String[]> str=new Stack<String[]>();
    List<String[]> str=new Vector<String[]>();
    List<String[]> str=new CopyOnWriteArrayList<String[]>(); 
```

这一切都取决于您的需要。

# database - 使用 HeidiSql 访问数据库，例如 PHPMyAdmin (localhost)

> ID：10699926
> 
> 赞同：2
> 
> 时间：2012-05-22T10:08:30.493
> 
> 标签：database, phpmyadmin, heidisql

如果只能通过网络访问数据库（本地主机设置），是否可以使用像 PHPMyAdmin 这样的 HeidiSql 访问数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T03:13:31.050

是的，HeidiSQl 是 Windows 上最好的免费 mysql 客户端。您可以按照以下步骤操作：

STEP1：创建会话，网络类型选择“MySQL（SSH隧道）”。主机名/IP 作为“localhost”。用户为“yourmysqllocaluser”，密码也是。

STEP2：选择 SSH 隧道选项卡，选择您的 plink.exe 位置。SSH 主机+端口使用“远程 IP 地址”和端口。用户名是“远程 Linux ssh 登录用户”，密码也是。如果您使用 Putty Pagent+ssh KEY，请将密码字段和私钥文件留空！

STEP3（重要）：使用你的putty.exe访问远程IP地址，它会提示一个ssh访问授权窗口。请务必选择“是”。

STEP4：回到HeidiSQL，选择session并打开。像当地人一样享受它。

如果你没有做STEP3，打开会话会报错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T08:13:53.067

自从很多版本以来，HeidiSQL 原生支持 SSH 隧道连接。只需`MySQL (SSH tunnel)`在会话中选择网络类型，然后在下一个选项卡中设置 putty `SSH tunnel`。

这在[http://www.heidisql.com/help.php#connecting上有详细记录](http://www.heidisql.com/help.php#connecting)

# xlib - Xlib ARGB 窗口图标

> ID：10699927
> 
> 赞同：3
> 
> 时间：2012-05-22T10:08:36.627
> 
> 标签：xlib, window-managers

我有一个 ARGB 图像数据。我希望将我的窗口图标设置为此数据。在搜索了几个小时后，我仍然一无所有。我知道我需要为图像数据创建一个像素图和（可能是）另一个用于掩码的像素图，并使用提示来提示窗口管理器。但是，我不知道如何设置 32bit ARGB 或 24bit RGB + 8bit alpha 图像。样品真的很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T05:42:24.500

在对该主题进行了相当多的调查后，我偶然发现了这个线程，我什至无法让示例代码在我的系统上运行。

原来缓冲区需要在 64 位系统上`long`而*不是* `int`在 64 位系统上。

更正示例如下

```
/* gcc -Wall -Wextra -Og -lX11 -lstdc++ -L/usr/X11/lib -o native foo.c */
#include <stdlib.h>
#include <X11/Xlib.h>
int main( int argc, char **argv )
{
    unsigned long buffer[] = {
            16, 16,
            4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 338034905, 3657433343, 0, 184483840, 234881279, 3053453567, 3221225727, 1879048447, 0, 0, 0, 0, 0, 0, 0, 1224737023, 3305111807, 3875537151,0, 0, 2063597823, 1291845887, 0, 67109119, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 50266112, 3422552319, 0, 0, 3070230783, 2063597823, 2986344703, 771752191, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3422552319, 0, 0, 3372220671, 1509949695, 704643327, 3355443455, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 0, 3422552319, 0, 134152192, 3187671295, 251658495, 0, 3439329535, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3422552319, 0, 0, 2332033279, 1342177535, 167772415, 3338666239, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 0, 3422552319, 0, 0, 436207871, 3322085628, 3456106751, 1375731967, 4278255360, 4026597120, 3758161664, 3489726208, 3204513536, 2952855296, 2684419840, 2399207168, 2130771712, 1845559040, 1593900800, 1308688128, 1040252672, 755040000, 486604544, 234946304, 4278255360, 4043374336, 3774938880, 3506503424, 3221290752, 2952855296, 2667642624, 2399207168, 2130771712, 1862336256, 1627453957, 1359017481, 1073805064, 788591627, 503379721, 218169088, 4278255360, 4043374336, 3758161664, 3506503424, 3221290752, 2952855296, 2684419840, 2415984384, 2130771712, 1862336256, 1577123584, 1308688128, 1040252672, 755040000, 486604544, 218169088, 4278190335, 4026532095, 3758096639, 3489661183, 3221225727, 2952790271, 2667577599, 2415919359, 2130706687, 1862271231, 1593835775, 1325400319, 1056964863, 771752191, 520093951, 234881279, 4278190335, 4026532095, 3758096639, 3489661183, 3221225727, 2952790271, 2667577599, 2415919359, 2130706687, 1862271231, 1593835775, 1325400319, 1056964863, 771752191, 503316735, 234881279, 4278190335, 4026532095, 3758096639, 3489661183, 3221225727, 2952790271, 2684354815, 2399142143, 2130706687, 1862271231, 1593835775, 1325400319, 1040187647, 771752191, 520093951, 234881279, 4294901760, 4043243520, 3774808064, 3506372608, 3221159936, 2952724480, 2684289024, 2399076352, 2147418112, 1862205440, 1593769984, 1308557312, 1040121856, 771686400, 503250944, 234815488, 4294901760, 4060020736, 3758030848, 3506372608, 3221159936, 2952724480, 2684289024, 2415853568, 2130640896, 1862205440, 1593769984, 1308557312, 1040121856, 771686400, 503250944, 234815488, 4294901760, 4043243520, 3774808064, 3489595392, 3237937152, 2952724480, 2684289024, 2415853568, 2147418112, 1862205440, 1593769984, 1325334528, 1056899072, 788463616, 503250944, 234815488,
            32, 32,
            4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 0, 0, 0, 0, 0, 0, 0, 0, 0, 268369920, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 1509949695, 3120562431, 4009754879, 4194304255, 3690987775, 2130706687, 83886335, 0, 50331903, 1694499071, 3170894079, 3992977663, 4211081471, 3657433343, 1879048447, 16777471, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3087007999, 2281701631, 1191182591, 1040187647, 2030043391, 4127195391, 2566914303, 0, 16777471, 3254780159, 2181038335, 1191182591, 973078783, 2030043391,4177527039, 2130706687, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 0, 0, 0, 0, 0, 2214592767, 4093640959, 0, 0, 0, 0, 0, 0, 0, 2298478847, 3909091583, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2214592767, 3607101695, 0, 0, 0, 0, 0, 0, 0, 1946157311, 4093640959, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 0, 0, 536871167, 1191182591, 2281701631,3019899135, 637534463, 0, 0, 0, 100597760, 251592704, 33488896, 0, 3321889023, 2919235839, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2550137087, 4278190335, 4278190335, 3405775103, 570425599, 0, 0, 0, 0, 0, 0, 2046820607, 4043309311, 620757247, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 33488896, 0, 0, 218104063, 1291845887, 3841982719, 3388997887, 0, 0, 0, 0, 0, 1996488959, 4093640959, 1073742079, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1761607935, 4278190335, 150995199, 0, 0, 67109119, 2550137087, 3909091583, 889192703, 0, 0, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 0, 0, 0, 0, 0, 2181038335, 3925868799, 0, 0, 218104063, 3070230783, 3623878911, 570425599, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 805306623, 3288334591, 1795162367, 1040187647, 1023410431, 2231369983, 4211081471, 1694499071, 0, 369099007, 3456106751, 3825205503, 1174405375, 872415487, 872415487, 872415487, 872415487, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4293984270, 2046951677, 3422552319, 4110418175, 4177527039, 3405775103, 1409286399, 0, 0, 1409286399, 4278190335, 4278190335, 4278190335, 4278190335, 4278190335, 4278190335, 4278190335, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760,4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 4294901760, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4278255360, 4144037632, 4009819904, 3875602176, 3741384448, 3607166720, 3472948992, 3338731264, 3204513536, 3053518592, 2936078080, 2801860352, 2650865408, 2516647680, 2382429952, 2264989440, 2113994496, 1996553984, 1862336256, 1728118528, 1577123584, 1459683072, 1325465344, 1191247616, 1040252672, 922812160, 771817216, 637599488, 503381760, 385941248, 234946304, 100728576, 4278255360, 4144037632, 4009819904, 3875602176, 3724607232, 3607166720, 3472948992, 3338731264, 3204513536, 3070295808, 2936078080, 2801860352, 2667642624, 2516647680, 2399207168, 2264989440, 2130771712, 1996553984, 1845559040, 1728118528, 1593900800, 1459683072, 1308688128, 1191247616, 1057029888, 922812160, 788594432, 637599488, 503381760, 369164032, 234946304, 117505792, 4278255360, 4144037632, 4009819904, 3875602176, 3741384448, 3607166720, 3472948992, 3338731264, 3204513536, 3053518592, 2919300864, 2801860352, 2650865408, 2533424896, 2399207168, 2264989440, 2113994496, 1996553984, 1862336256, 1728118528,1593900800, 1459683072, 1325465344, 1191247616, 1040252672, 906034944, 771817216, 654376704, 503381760, 369164032, 234946304, 117505792, 4278255360, 4144037632, 4009819904, 3858824960, 3741384448, 3607166720, 3472948992, 3338731264, 3204513536, 3070295808, 2936078080, 2801860352, 2667642624, 2533424896, 2382429952, 2264989440, 2130771712, 1979776768, 1862336256, 1728118528, 1577123584, 1442905856, 1325465344, 1191247616, 1040252672, 922812160, 771817216, 637599488, 503381760, 369164032, 234946304, 100728576, 4278255360, 4144037632, 4009819904, 3875602176, 3741384448, 3607166720, 3472948992, 3338731264, 3204513536, 3070295808, 2919300864, 2801860352, 2667642624, 2533424896, 2399207168, 2264989440, 2113994496, 1996553984, 1862336256, 1728118528, 1593900800, 1442905856, 1342241795, 1174470400, 1057029888, 906034944, 788594432, 654376704, 503381760, 385941248, 251723520, 100728576, 4278190335, 4160749823, 4026532095, 3892314367, 3741319423, 3623878911, 3472883967, 3338666239, 3221225727, 3070230783, 2952790271, 2818572543, 2667577599, 2533359871, 2399142143, 2264924415, 2147483903, 1996488959, 1862271231, 1728053503, 1593835775, 1459618047, 1325400319, 1191182591, 1056964863, 922747135, 788529407, 654311679, 520093951,385876223, 251658495, 117440767, 4278190335, 4160749823, 4026532095, 3892314367, 3741319423, 3623878911, 3489661183, 3355443455, 3221225727, 3087007999, 2936013055, 2801795327, 2667577599, 2533359871, 2399142143, 2281701631, 2130706687, 1996488959, 1862271231, 1728053503, 1593835775,1459618047, 1325400319, 1191182591, 1056964863, 922747135, 788529407, 654311679, 520093951, 385876223, 234881279, 100663551, 4278190335, 4160749823, 4026532095, 3892314367, 3758096639, 3623878911, 3489661183, 3355443455, 3221225727, 3087007999, 2936013055, 2801795327, 2667577599, 2550137087, 2415919359, 2264924415, 2130706687, 1996488959, 1862271231, 1728053503, 1593835775, 1459618047, 1325400319, 1191182591, 1056964863, 922747135, 788529407, 654311679, 503316735, 369099007, 251658495, 100663551, 4278190335, 4160749823, 4026532095, 3892314367, 3758096639, 3623878911, 3489661183, 3355443455, 3204448511, 3087007999, 2936013055, 2818572543, 2667577599, 2533359871, 2399142143, 2264924415, 2130706687, 1996488959, 1879048447, 1728053503, 1593835775, 1459618047, 1325400319, 1191182591, 1056964863, 922747135, 788529407, 654311679, 520093951, 385876223, 251658495, 117440767, 4278190335, 4160749823, 4026532095, 3892314367, 3758096639, 3623878911, 3489661183, 3355443455, 3221225727, 3087007999, 2952790271, 2818572543, 2667577599, 2533359871, 2399142143, 2264924415, 2147483903, 2013266175, 1862271231, 1744830719, 1610612991, 1476395263, 1342177535, 1191182591, 1056964863, 922747135, 788529407, 654311679, 520093951, 385876223, 251658495, 100663551, 4294901760, 4160684032, 4026466304, 3909025792, 3774808064, 3623813120, 3489595392, 3355377664, 3237937152, 3103719424, 2952724480, 2818506752, 2684289024, 2550071296, 2415853568, 2281635840, 2147418112, 2013200384, 1878982656, 1744764928, 1593769984, 1476329472,1325334528, 1207894016, 1056899072, 939458560, 788463616, 654245888, 520028160, 385810432, 251592704, 117374976, 4294901760, 4177461248, 4043243520, 3909025792, 3774808064, 3640590336, 3506372608, 3355377664, 3221159936, 3086942208, 2952724480, 2818506752, 2701066240, 2550071296, 2415853568, 2281635840, 2147418112, 2013200384, 1878982656, 1727987712, 1610547200, 1476329472, 1325334528, 1191116800, 1073676288, 922681344, 788463616, 654245888, 520028160, 385810432, 251592704, 100597760, 4294901760, 4177461248, 4043243520, 3909025792, 3774808064, 3640590336, 3489595392, 3372154880, 3237937152, 3103719424, 2952724480, 2818506752, 2700935170, 2550071296, 2415853568, 2281635840, 2147418112, 2013200384, 1878982656, 1744764928, 1610547200, 1459552256, 1342111744, 1191116800, 1056899072, 922681344, 788463616, 671023104, 520028160, 385810432, 251592704, 100597760, 4294901760, 4177461248, 4043243520, 3909025792, 3774808064, 3640590336, 3489595392, 3372154880, 3237937152, 3086942208, 2969501696, 2818506752, 2684289024, 2550071296, 2432630784, 2281635840, 2147418112, 2013200384, 1862205440, 1744764928, 1610547200, 1476329472, 1342111744, 1191116800, 1056899072, 922681344, 788463616, 654245888, 520028160, 385810432, 251592704, 117374976, 4294901760, 4177461248, 4043243520, 3909025792, 3774808064, 3623813120, 3506372608, 3372154880, 3237937152, 3103719424, 2952724480, 2835283968, 2684289024, 2550071296, 2432630784, 2281635840, 2147418112, 2046492676, 1862205440, 1744764928, 1610547200, 1476329472, 1342111744,1207894016, 1056899072, 939458560, 788463616, 654245888, 536281096, 385810432, 251592704, 134152192,
    };
    Display *d = XOpenDisplay(0);
    int s = DefaultScreen(d);
    Atom net_wm_icon = XInternAtom(d, "_NET_WM_ICON", False);
    Atom cardinal = XInternAtom(d, "CARDINAL", False);
    Window w;
    XEvent e; w = XCreateWindow(d, RootWindow(d, s), 0, 0, 200, 200, 0,
    CopyFromParent, InputOutput, CopyFromParent, 0, 0);
    int length = 2 + 16 * 16 + 2 + 32 * 32;
    XChangeProperty(d, w, net_wm_icon, cardinal, 32, PropModeReplace, (const unsigned char*) buffer, length);
    XMapWindow(d, w);
    while(1)
    XNextEvent(d, &e);
    (void)argc, (void)argv;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:40:28.363

如果 32 位深度视觉可用（检查 xdpyinfo），那么[我的问题](https://stackoverflow.com/questions/10492275/how-to-upload-32-bit-image-to-server-side-pixmap)中的代码应该适合你。创建 RGBA 像素图后，只需将其句柄分配给[_NET_WM_ICON](http://standards.freedesktop.org/wm-spec/wm-spec-latest.html#id2578661)属性

# jsf - 有没有办法在 Web 应用程序中同时使用 Struts 2.0 和 JSF？

> ID：10699933
> 
> 赞同：1
> 
> 时间：2012-05-22T10:09:14.423
> 
> 标签：jsf, jsf-2, struts2, struts

我已经使用 Struts 1.x 一年多了，最近我一直在学习 JSF。我知道 JSF 和 Struts 都是不同的框架，但我想在我的 Web 应用程序中使用 Struts 作为 Action 框架和 JSF 作为 Component 框架。我不确定我们是否可以这样做，并且在网上找不到任何有关此的材料。

欢迎提出建议和链接，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:18:49.310

Struts 和 JSF 可以在 Web 应用程序中使用，后端可能需要一些（或不需要）更改，但由于两个框架都遵循 MVC，“VIEW”层将非常相似。由于 JSF 和 Struts 各有优势，我们可以结合使用各自的优势，如 Struts 中的 ValidationFramework 和 JSF 组件（Struts 中的 html 组件）

所有这一切我只希望你有一个现有的 Struts 应用程序，可以[在这里找到更详细的信息](http://www.theserverside.com/news/thread.tss?thread_id=29068)

虽然链接谈论的是旧版本，但我希望它提供基本信息

# java - 使用Mule3.2在重负载下GC太频繁

> ID：10699940
> 
> 赞同：2
> 
> 时间：2012-05-22T10:09:45.703
> 
> 标签：java, garbage-collection, out-of-memory, mule

在Mule 3.2的重负载下（100个线程并发发送请求），通过jprofiler，我可以看到创建了大量的对象实例（大约每秒500mb），并且占据了堆的年轻区域90％以上的空间，这导致jvm每2秒触发一次gc。

为什么？这正常吗？或者它是一个错误

jvm参数：

> -Xms=2048m -Xmx=2048m -Xmn=768m -XX:PermSize=256m -XX:MaxPermSize=512m -Xss256k -XX:+UseConcMarkSweepGC

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:30:29.810

对于 Mule 收到的每个请求，都会创建许多对象（会话、事件、消息、在许多地方充当闭包的匿名类）。

此外，某些传输可能会创建更多对象，而其他传输则更少，这取决于它们的技术需求（例如，HTTP 将创建额外的对象来存储标头、cookie...）。

所以这不是一个错误，但我也不能说它是一个功能。而且我认为减少每个请求创建的对象数量对于 Mule 来说是一个很好的举措......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T08:38:37.683

您不应该使用 jProfiler 来测量应用程序的分配率。jPROfiler 会影响您的应用程序的性能并产生巨大的开销。

您应该使用**gc-logging/jmap/jstat**或其他工具来观察和计算应用程序的真实内存统计信息。

然后，您可以在工作负载适中的应用上使用 jProfiler 来分析和研究堆分配。

# c# - 从 C# 中的另一个表单填充创建的表单组件

> ID：10699941
> 
> 赞同：0
> 
> 时间：2012-05-22T10:09:51.580
> 
> 标签：c#, forms

我使用下面的代码创建了一个新表单。

```
private void CNPictureBox2_DoubleClick(object sender, EventArgs e)
{
    RefImgForm RefImgForm = new RefImgForm();
    RefImgForm.MainFrm = this;
    RefImgForm.Show();
} 
```

我想从我创建第二个表单的表单中发送数据。问题是我在创建新表单时无法将数据发送到新表单。当我从用户那里获取一些数据然后通过按钮单击事件发送这些数据时，我想发送数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:13:43.643

以第二种形式定义一个新方法

```
public void ReceiveData(....)
{
...
} 
```

并在单击按钮时从第一个表单中调用它

```
private RefImgForm frm2 = null;
private void CNPictureBox2_DoubleClick(object sender, EventArgs e)
{
    frm2 = new RefImgForm();
    frm2.MainFrm = this;
    frm2.Show();
}
private void Button_Click(...)
{
    if (frm2 != null)
        frm2.ReceiveData(...);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:28:17.863

在父表单中创建一个委托，如下所示：

```
 delegate void SendData(object data);
      SendData sendDataobj; 
```

在子表单中创建一个方法，`ProcessData`并使用以下代码：

```
private void CNPictureBox2_DoubleClick(object sender, EventArgs e)
{
    RefImgForm RefImgForm = new RefImgForm();
    RefImgForm.MainFrm = this;
    sendDataobj = new SendData(RefImgForm.ProcessData)
    RefImgForm.Show();
} 
```

要调用委托，您可以使用：

```
 sendDataobj(data);
    sendDataobj.Invoke(data); 
```

两者都是同步调用。

如果你想异步调用它，你可以使用：

```
sendDataobj.BeginInvoke 
```

# gcc - 尝试安装 gcc 时权限被拒绝，即使以 root 身份登录

> ID：10699949
> 
> 赞同：0
> 
> 时间：2012-05-22T10:10:16.713
> 
> 标签：gcc, makefile, installation, root, permission-denied

我正在尝试按照该教程[http://www.tellurian.com.au/whitepapers/multiplegcc.php](http://www.tellurian.com.au/whitepapers/multiplegcc.php)在 ubuntu 10.04 上安装 gcc 4.7.0 。经过一段时间安装依赖项后，我已经能够毫无错误地运行 make，但最后一步，make install 不想成功，最终导致权限被拒绝。

这是我所做的：

```
../gcc-4.7.0/configure --prefix=/usr/local/gcc/4.7.7 --enable-languages=c,c++
make
su -l
cd /groups/gobj
make install 
```

最后一个命令的结果：

```
make[1]: Entering directory `/groups/gobj'
/bin/bash ../gcc-4.7.0/mkinstalldirs /usr/local/gcc/4.7.7 /usr/local/gcc/4.7.7
make[2]: Entering directory `/groups/gobj/fixincludes' 
rm -rf /usr/local/gcc/4.7.7/libexec/gcc/x86_64-unknown-linux-gnu/4.7.0/install-tools
/bin/bash ../../gcc-4.7.0/fixincludes/../mkinstalldirs /usr/local/gcc/4.7.7/libexec
...
rm -f /usr/local/gcc/4.7.7/share/info/gccinstall.info
if [ -f doc/gccinstall.info ]; then \
      for f in doc/gccinstall.info*; do \
        realfile=`echo $f | sed -e 's|.*/\([^/]*\)$|\1|'`; \
        /usr/bin/install -c -m 644 $f /usr/local/gcc/4.7.7/share/info/$realfile; \
        chmod a-x /usr/local/gcc/4.7.7/share/info/$realfile; \
      done; \
    else true; fi
if /bin/bash -c 'install-info --version' >/dev/null 2>&1; then \
      if [ -f /usr/local/gcc/4.7.7/share/info/gccinstall.info ]; then \
        install-info --dir-file=/usr/local/gcc/4.7.7/share/info/dir /usr/local/gcc/4.7.7/share/info/gccinstall.info; \
      else true; fi; \
    else true; fi;
build/genhooks -d \
                    ../../gcc-4.7.0/gcc/doc/tm.texi.in > tmp-tm.texi
/bin/bash: tmp-tm.texi: Permission denied
make[2]: *** [s-tm-texi] Error 1
make[2]: Leaving directory `/groups/gobj/gcc'
make[1]: *** [install-gcc] Error 2
make[1]: Leaving directory `/groups/gobj'
make: *** [install] Error 2 
```

我已经尝试过 su root, su -, su 没有成功。一些文件被有效地复制到 /usr/local/gcc/4.7.0 但进程停止了，我不明白为什么我以 root 身份登录。我检查过，文件 /groups/gcc-4.7.0/gcc/doc/tm.texi.in 存在。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-19T01:47:47.190

听起来令人费解的是，超级用户“root”不能创建文件，而普通用户可以，一个可能的情况是您的构建目录（即您运行“ `make install`”的目录）正在从 NFS 服务器提供服务，并且它可能已安装，因此服务器不信任您的构建机器以root身份写入文件的请求。

`touch test`作为一个简单的测试，看看您是否可以通过以 root 身份运行将一个空文件写入构建目录。如果失败，那么您已经找到了问题的根源。确认它的另一种方法是检查“ `mount`”的输出，至少确认您的构建目录是通过 NFS 提供的。

```
server:/groups      20G  948M   19G   5% /groups 
```

如果您在挂载输出中看到这样的一行，那么您肯定知道您的构建目录正在被 NFS 挂载。但是，要判断 root 是否受信任，您最终必须检查 NFS 服务器上的设置。

# 解决问题

解决这个问题的最快方法是在你的构建机器上找到一个本地文件系统并将你的构建目录的内容移动到那里，然后重新运行“ `make install`”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:18:40.783

你试过sudo吗？

```
sudo make install 
```

编辑：

作为 root，您可以将自己添加到 sudoers。如果您无法通过 sudo 获取 root，请尝试

```
su - root 
```

或者

```
ssh root@... 
```

# json - 编写 JSON 日志文件的格式？

> ID：10699953
> 
> 赞同：32
> 
> 时间：2012-05-22T10:10:26.297
> 
> 标签：json, logging, syntax, standards

是否有写入和解析`JSON`日志文件的格式标准？

我看到的问题是您不能拥有“纯”`JSON`日志文件，因为您需要匹配的括号并且禁止使用尾随逗号。因此，虽然以下内容可能是由应用程序编写的，但它不能被标准解析`JSON parsers:`

```
[{date:'2012-01-01 02:00:01', severity:"ERROR", msg:"Foo failed"},
{date:'2012-01-01 02:04:02', severity:"INFO", msg:"Bar was successful"},
{date:'2012-01-01 02:10:12', severity:"DEBUG", msg:"Baz was notified"}, 
```

因此，您必须对如何以解析器可以处理它们的方式构造日志文件有一些约定。最简单的事情是“每行一个日志消息对象，字符串值中的换行符被转义”。有没有现成的标准和工具？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-06-21T22:46:21.400

您不会为每个 FILE 编写一个 JSON 对象，而是要为每个 LINE 编写一个 JSON 对象。然后可以单独解析每一行。您无需担心尾随逗号并将整个对象集用括号等括起来。请参阅[http://blog.nodejs.org/2012/03/28/service-logging-in-json-with- bunyan/](http://blog.nodejs.org/2012/03/28/service-logging-in-json-with-bunyan/)以更详细地解释这可能是什么样子。

另请查看 Fluentd [http://fluentd.org/](http://fluentd.org/)以获取可使用的简洁工具集。

编辑：这种格式现在称为 JSONLines 或`jsonl`如下 @Mnebuerquo 所指出的 - 请参阅[http://jsonlines.org/](http://jsonlines.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-08T07:49:07.870

gem`log_formatter`是 ruby​​ 的选择，作为格式化程序组，现在支持 ruby​​ 和 log4r 的 json 格式化程序。

很容易得到红宝石的说明。

```
gem 'log_formatter'

require 'log_formatter'
require 'log_formatter/ruby_json_formatter'

logger.debug({data: "test data", author: 'chad'}) 
```

结果

```
{
  "source": "examples",
  "data": "test data",
  "author": "chad",
  "log_level": "DEBUG",
  "log_type": null,
  "log_app": "app",
  "log_timestamp": "2016-08-25T15:34:25+08:00"
} 
```

对于 log4r：

```
require 'log4r'
require 'log_formatter'
require 'log_formatter/log4r_json_formatter'

logger = Log4r::Logger.new('Log4RTest')
outputter = Log4r::StdoutOutputter.new(
  "console",
  :formatter => Log4r::JSONFormatter::Base.new
)
logger.add(outputter)

logger.debug( {data: "test data", author: 'chad'} ) 
```

高级用法：[README](https://github.com/chadlwm/log_formatter)

完整示例代码：[示例](https://github.com/chadlwm/log_formatter/tree/master/examples)

# asp.net - 在 asp 主机中找不到文件

> ID：10699955
> 
> 赞同：0
> 
> 时间：2012-05-22T10:10:27.203
> 
> 标签：asp.net, url

我最近在aspspider上上传了一个asp网站，我在webroot上传了两个文件

```
UniversityRDF.rdf
UniversityRDFS.rdf 
```

但是由于我不知道的原因，当我浏览到时我无法联系到他们

```
www.aspspider.ws/#####/UniversityRDFS.rdf
or
www.aspspider.ws/#####/UniversityRDF.rdf 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:13:03.550

IIS 可能未配置为允许 rdf 文件通过。如果你放一个简单的html文件，你能看到吗？

# objective-c - 在 UIImagePickerController 之后切换视图

> ID：10699963
> 
> 赞同：2
> 
> 时间：2012-05-22T10:10:41.880
> 
> 标签：objective-c, ios, uiimagepickercontroller

当用户完成选择图像时，我试图让我的应用程序切换到另一个视图，但是当用户完成选择图像时，它会关闭选择器并返回到相同的视图。
这是我的代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    [picker dismissModalViewControllerAnimated:YES];

    DrawingViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"Drawing"];
    viewController.image.image = image;
    [self presentModalViewController:viewController animated:NO];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T10:16:14.297

发生这种情况是因为您正在关闭带有动画的选取器模态视图控制器并立即呈现新的视图控制器。您只能在前一个模式视图控制器被关闭后呈现一个新的模式视图控制器。一个解决方案是在没有动画的情况下关闭选择器模式：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    [picker dismissModalViewControllerAnimated:NO];

    DrawingViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"Drawing"];
    viewController.image.image = image;
    [self presentModalViewController:viewController animated:NO];
} 
```

另一种解决方案（**仅适用于 iOS 5**）是使用以下`dismissViewControllerAnimated: completion:`方法：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
   [picker dismissViewControllerAnimated:YES completion:^(){
        DrawingViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"Drawing"];
        viewController.image.image = image;
        [self presentModalViewController:viewController animated:NO];
    }];

} 
```

# database - 查询 Excel 表格

> ID：10699964
> 
> 赞同：1
> 
> 时间：2012-05-22T10:10:42.367
> 
> 标签：database, excel, excel-2007

是否可以查询位于 Excel 工作表内的表？具体来说，我正在寻找类似 SQL`SELECT`的所有功能（排序、分组、过滤等）

是否可以在不同的工作表中显示结果并动态绑定两者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:56:34.580

听起来像 MS Query 可能是适合您的工具。基本上它是一个从 MS Office 连接到各种外部数据源的工具，它也可以从 Excel 连接到 Excel。在 Excel 2010 中，事情变得更容易，但您使用的是 2007。

检查[this](http://office.microsoft.com/en-us/excel-help/use-microsoft-query-to-retrieve-external-data-HA010099664.aspx)或[this](http://www.exceluser.com/explore/msquery1_1.htm)或 Google 以找到有关如何实现此功能的各种示例。

# apache - htaccess RewriteRule 从不存在的目录重定向

> ID：10699965
> 
> 赞同：0
> 
> 时间：2012-05-22T10:10:44.550
> 
> 标签：apache, .htaccess, url, redirect, url-rewriting

我正在尝试重定向任何尝试访问不存在的目录的 URL，但是在尝试以下操作时我收到 404：

```
RewriteRule ^picco/(.*)$ /rangers/$1 [L,R=301] 
```

但是，当有人`picco`尝试访问一个页面`picco/index.php`时，例如我想重定向到`rangers/index.php`.

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:02:34.770

我明白了——下面的作品，看来RewriteBase的引入起到了实质性的作用。

```
RewriteBase /
RewriteRule ^picco(.*)$ /rangers/$1 [R=301,L] 
```

# jquery - index() 在 Internet Explorer 上不起作用

> ID：10699973
> 
> 赞同：0
> 
> 时间：2012-05-22T10:11:13.283
> 
> 标签：jquery, internet-explorer

我有一个奇怪的问题。Internet Explorer 总是在第 2 行给出错误：

```
this_parent=this_btn.parent(); //.first_cat
joza=this_parent.index()+1; //get element number 
```

此代码适用于 Chrome 和 Firefox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:12:14.627

```
this_parent=this_btn.parent(); 
```

应该

```
this_parent=$(this_btn).parent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:16:03.610

尝试更改变量名称，资源管理器有一些保留变量。写 Joza，而不是 joza

```
Joza=this_parent.index()+1; //get element number 
```

# iphone - 更改 csv 上的边距 在 UIWebView 中使用它

> ID：10699980
> 
> 赞同：0
> 
> 时间：2012-05-22T10:11:44.467
> 
> 标签：iphone, objective-c, css, ipad, csv

我正在使用此代码在我的 ipad 上显示 epub 书。现在问题是我想在左侧显示一些边距。..我试图在这里改变边距，但它不起作用。

```
 - (void)webViewDidFinishLoad:(UIWebView *)theWebView{

NSString *varMySheet = @"var mySheet = document.styleSheets[0];";

NSString *addCSSRule =  @"function addCSSRule(selector, newRule) {"
"if (mySheet.addRule) {"
"mySheet.addRule(selector, newRule);"                               // For Internet Explorer
"} else {"
"ruleIndex = mySheet.cssRules.length;"
"mySheet.insertRule(selector + '{' + newRule + ';}', ruleIndex);"   // For Firefox, Chrome, etc.
"}"
"}";

NSString *insertRule1 = [NSString stringWithFormat:@"addCSSRule('html', 'padding: 0px; height: %fpx; -webkit-column-gap: 0px; -webkit-column-width: %fpx;')", webView.frame.size.height, webView.frame.size.width/2];
NSString *insertRule2 = [NSString stringWithFormat:@"addCSSRule('p', 'text-align: justify;')"];
NSString *setTextSizeRule = [NSString stringWithFormat:@"addCSSRule('body', '-webkit-text-size-adjust: %d%%;')", currentTextSize];
NSString *setHighlightColorRule = [NSString stringWithFormat:@"addCSSRule('highlight', 'background-color: yellow;')"];

NSString *setImageRule = [NSString stringWithFormat:@"addCSSRule('img', 'max-width: %fpx; height:auto;')", webView.frame.size.width/2 *0.75];
NSString *setFontRule = [NSString stringWithFormat:@"addCSSRule('body', 'font-family: Arial;' , 'font-name: Arial-BoldItalicMT;')"];

[webView stringByEvaluatingJavaScriptFromString:setFontRule];

[webView stringByEvaluatingJavaScriptFromString:setImageRule];

[webView stringByEvaluatingJavaScriptFromString:varMySheet];

[webView stringByEvaluatingJavaScriptFromString:addCSSRule];

[webView stringByEvaluatingJavaScriptFromString:insertRule1];

[webView stringByEvaluatingJavaScriptFromString:insertRule2];

[webView stringByEvaluatingJavaScriptFromString:setTextSizeRule];

[webView stringByEvaluatingJavaScriptFromString:setHighlightColorRule];

if(currentSearchResult!=nil){
//  NSLog(@"Highlighting %@", currentSearchResult.originatingQuery);
    [webView highlightAllOccurencesOfString:currentSearchResult.originatingQuery];
}

int totalWidth = [[webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.scrollWidth"] intValue];
pagesInCurrentSpineCount = (int)((float)totalWidth/(webView.bounds.size.width/2));

NSLog(@"pagesInCurrentSpineCount is %d",pagesInCurrentSpineCount);

[self gotoPageInCurrentSpine:currentPageInSpineIndex]; 
```

}

# iphone - 如何处理文件错误？

> ID：10699981
> 
> 赞同：0
> 
> 时间：2012-05-22T10:11:46.997
> 
> 标签：iphone

当我尝试将字符串写入文件时出现文件错误：

```
 NSFileManager *filemgr;

    filemgr = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex: 0];
    NSString *docFile = [docDir stringByAppendingPathComponent:fileName];
  if ([file fileExistsAtPath: docFile] == YES)
    {    if(![formatedlogStr writeToFile:LOG_FILE_V1  atomically:YES encoding:NSUTF8StringEncoding error:&error])
            {
                NSLog(@"Error: %@", [error userInfo]);
            }

        } 
```

这给了我一个错误：

```
Error: {
    NSFilePath = "error_log_V1.txt";
    NSUnderlyingError = "Error Domain=NSPOSIXErrorDomain Code=13 \"The operation couldn\U2019t be completed. Permission denied\"";
    NSUserStringVariant = Folder; 
```

如何解决我不知道的问题。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:19:23.903

您在文档目录中正确找到了路径，但您正在尝试将信息记录到裸路径。您应该按照相同的过程在您的沙箱中为日志文件构建一个文件路径，并使用它而不是`LOG_FILE_V1`.

# asp.net-mvc - ASP.NET MVC 粘贴到剪贴板

> ID：10699983
> 
> 赞同：1
> 
> 时间：2012-05-22T10:11:52.317
> 
> 标签：asp.net-mvc, asp.net-mvc-4, clipboard

我有一个 ASP.NET MVC 4 应用程序。

我想复制文本（来自 PDF）CTRL+C 并将其作为参数粘贴到控制器的方法中。

我的 webgrid 有一个带有 ActionLink 的列

```
grid.Column(" ", " ", format: @<a href="@Url.Action("Clipboard", "People", new { cbdata = window.clipboardData.getData('Text') })">Clipboard</a>), 
```

...

```
 [HttpPost]
    public ActionResult Clipboard(string cbdata) // is string ok ?
    {
        //I'm doing something with my clipboard data ..
        return View();
    } 
```

这部分不起作用：*window.clipboardData.getData('Text')* 我必须在 Global.asax.cs 中修改我的 MapRoute 吗？

**问**：如何通过控制器的方法从剪贴板中获取数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:15:29.227

您想从客户端的剪贴板获取数据到 Web 服务器吗？

你不能。安全是一个问题。如果有人从以前的副本中将信用卡详细信息保存在剪贴板中，该怎么办！

做到这一点的唯一方法是要求用户将其显式粘贴到文本控件中并以表单形式发送。

# android - 在运行时从内部存储读取/写入一些文件

> ID：10699990
> 
> 赞同：1
> 
> 时间：2012-05-22T10:12:23.287
> 
> 标签：android, android-file

我正在开发一个程序，该程序需要在运行时从 sdcard 或内部存储中读取/写入一些文件。当我在手机中安装 sdcard 时，它运行正常，但是如果我卸载 sdcard，我的应用程序会引发一些错误。对于没有像 Htc one x 这样的卡槽的手机或没有插入任何 sdcard 的手机，我必须做什么？我怎样才能在那些手机存储上写字？**我不想将此文件写入 /data/data/my.app.package 文件夹。我想写一个可以从其他应用程序读取文件的地方。** 首先我用这个代码检查存储状态，如果 sdcard 被插入并且可写，我没有任何问题。但如果 sdcard 不存在，我真的不知道我必须做什么。

```
string _location;  
if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){
          _location=Environment.getExternalStorageDirectory()+"/myfolder/";
          Toast.makeText(context, _location, 1000).show();
      }
      else
      {
          _location="/myfolder/"
          Toast.makeText(context, Environment.getExternalStorageDirectory().toString(), 1000).show();

      }

      mysync mys=new mysync(); // Asynctasc that writes some file on _location path
      mys.execute(_location); 
```

我很困惑，不幸的是我没有任何带有大内存的手机。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:48:53.600

> 我正在开发一个程序，该程序需要在运行时从 sdcard 或内部存储中读取/写入一些文件。

在这里，在您的问题标题中，您说您**要**写入内部存储。后来，您说您**不想**写入内部存储。

它是哪一个？

> 对于没有像 Htc one x 这样的卡槽的手机或没有插入任何 sdcard 的手机，我必须做什么？

外部存储！=“sdcard”。外部存储可以是设备制造商想要的任何东西，只要它符合兼容性定义文档的条款。因此，外部存储设备可以是可移动的（例如，SD 卡）或不可移动的（例如，板载闪存的专用部分）。而且，在 Android 3.0+ 上，外部存储只是包含内部存储的同一分区上的一个特殊子目录。

您只关心外部存储当前是否可用。它应该在 Android 3.0+ 设备上几乎一直可用。如果设备插入主机并且主机已安装设备的外部存储（例如，作为 Windows 上的驱动器号），它将在 Android 1.x 和 2.x 设备上不可用。

> 如果 sdcard 不存在，我真的不知道我要做什么。

您要求用户从他们的主机上卸载他们的设备。或者，您决定在这些情况下写入内部存储。

# osgi - 找出 OBR 认为需要捆绑包的原因

> ID：10699995
> 
> 赞同：1
> 
> 时间：2012-05-22T10:12:30.430
> 
> 标签：osgi, bnd, obr, bndtools

有没有一种简单的方法来理解为什么 Bndtools OBR 分辨率决定它需要一个特定的包来满足运行要求？在我的特殊情况下，我有所有`org.slf4j.*`的包`-runsystempackages`，但它仍然坚持包括`slf4j-api`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:03:35.530

是否涉及捆绑片段？片段需要安装到主机包中，在 SLF4J 的情况下，静态绑定机制需要安装到 slf4j.api 包中。

# javascript - 在超大的 jquery 中，如何使用 java 动态传递一堆图像

> ID：10699996
> 
> 赞同：0
> 
> 时间：2012-05-22T10:12:30.383
> 
> 标签：javascript, jquery, html, jsp

我正在使用 jsp 实现超大 j 查询问题是如何将一堆图像发送到 jquery 函数中。

```
<script type="text/javascript">  

    $(function(){

        $.fn.supersized.options = {
            <% String str="Hello World"; %>
            <%System.out.println("am from function1");%>
            startwidth: $("#name").val(),  
            startheight: 480,
            vertical_center: 1,
            slideshow: 1,
            navigation: 1,
            thumbnail_navigation: 1,
            transition: 1, //0-None, 1-Fade, 2-slide top, 3-slide right, 4-slide bottom, 5-slide left
            pause_hover: 0,
            slide_counter: 1,
            slide_captions: 1,
            slide_interval: 3000,
            slides :  [ {image : '/Email/slides/tower.jpg', title : 'City Clock Tower', url : 'http://www.flickr.com/photos/wumbus/4582735030/in/set-72157623876357531/'},
                {image : '/Email/slides/fence.jpg', title : 'Canal Park Fence', url : 'http://www.flickr.com/photos/wumbus/4582735030/sizes/l/in/set-72157623876357531/'},  
                {image : '/Email/slides/tracks.jpg', title : 'Old Train Tracks', url : 'http://www.flickr.com/photos/wumbus/4582733542/in/set-72157623876357531/'},
                {image : '/Email/slides/001.jpg', title : 'Old1 Train Tracks', url : 'http://www.flickr.com/photos/wumbus/4582733542/in/set-72157623876357531/'} ]

        };
        $('#supersized').supersized(); 
    });
</script> 
```

在上面的脚本中，slides:[{image:'/Email/slides/tower.jpg'}{}...] 数组可以静态添加图片。但是如何动态地使用java传递一些图像

.

如果有人知道回答我，我很感激他。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:26:00.160

1 将图像集合放入您的 servlet/控制器中的请求中：

```
Collection<String> images = ... ; // loading from your source

request.setAttribute("images", images); 
```

2 在 jsp 中使用 JSTL 循环：

```
<c:forEach var="image" items=${images}>
    <c:out value="${image}"/>
</c:forEach> 
```

就这样。

# sql-server - SQL Server - 将行转换为列

> ID：10699997
> 
> 赞同：2
> 
> 时间：2012-05-22T10:12:30.757
> 
> 标签：sql-server, sql-server-2005, pivot

我已经在高处和低处搜索了这个问题的答案，如果已经回答了，我深表歉意！我从 SQL 2005 中的查询得到以下结果：

```
ID

1234

1235

1236

1267

1278 
```

我想要的是

```
column1|column2|column3|column4|column5
---------------------------------------
1234   |1235   |1236   |1267   |1278 
```

我无法完全理解枢轴运算符，但这看起来会涉及到它。我现在可以使用只有 5 行，但好处是它是动态的，即可以扩展到 x 行。

编辑：我最终想要的是将每个结果列的值分配给变量，例如

```
DECLARE @id1 int, @id2 int, @id3 int, @id4 int, @id5 int

SELECT @id1 = column1, @id2 = column2, @id3 = column3, @id4 = column4, 
@id5 = column5 FROM [transposed_table] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T10:23:24.400

您还需要在查询中为每个 id 聚合一个值字段。然后你可以做这样的事情

```
select [1234], [1235]
from
(
    -- replace code below with your query, e.g. select id, value from table
    select
    id = 1234,
    value = 1
    union
    select
    id = 1235,
    value = 2
) a
pivot
(
  avg(value) for id in ([1234], [1235])
) as pvt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:20:14.920

我想你会在这个答案中找到一个稍微不同的问题的答案：[Generate "scatter plot" result of members against sets from SQL query](https://stackoverflow.com/questions/10334806/generate-scatter-plot-result-of-members-against-sets-from-sql-query/10335020#comment13309897_10335020)

答案使用动态 SQL。查看 mellamokb 答案中的最后一个链接：[http](http://www.sqlfiddle.com/#!3/c136d/14) ://www.sqlfiddle.com/#!3/c136d/14 ，他在其中从行数据创建列名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-02T03:48:25.403

如果您有一个要分组转置的分组平面数据结构，如下所示：

```
GRP  | ID
---------------
1    | 1234
1    | 1235
1    | 1236
1    | 1267
1    | 1278
2    | 1234
2    | 1235
2    | 1267
2    | 1289 
```

你希望它的组换位看起来像：

```
GRP | Column 1 | Column 2 | Column 3 | Column 4 | Column 5
-------------------------------------------------------------
1   | 1234     | 1235     | 1236     | 1267     | 1278
2   | 1234     | 1235     | NULL     | 1267     | NULL 
```

您可以使用这样的查询来完成它：

```
SELECT
    Column1.ID As column1,
    Column2.ID AS column2,
    Column3.ID AS column3,
    Column4.ID AS column4,
    Column5.ID AS column5
FROM
    (SELECT GRP, ID FROM FlatTable WHERE ID = 1234) AS Column1
LEFT OUTER JOIN
    (SELECT GRP, ID FROM FlatTable WHERE ID = 1235) AS Column2
ON Column1.GRP = Column2.GRP
LEFT OUTER JOIN
    (SELECT GRP, ID FROM FlatTable WHERE ID = 1236) AS Column3
ON Column1.GRP = Column3.GRP
LEFT OUTER JOIN
    (SELECT GRP, ID FROM FlatTable WHERE ID = 1267) AS Column4
ON Column1.GRP = Column4.GRP
LEFT OUTER JOIN
    (SELECT GRP, ID FROM FlatTable WHERE ID = 1278) AS Column5
ON Column1.GRP = Column5.GRP 
```

(1) 这假设您提前知道需要哪些列 — 请注意，我故意在此示例中省略了 ID = 1289

(2) 这基本上是使用一堆左外连接来一次附加一列，从而创建转置。如果某些列没有来自平面表的对应值，则左外连接（而不是内连接）允许它们为空，而不会影响任何后续列。