# StackOverflow 问答 10278000-10278999

# android - android 文本视图覆盖有按钮

> ID：10278002
> 
> 赞同：3
> 
> 时间：2012-04-23T09:33:06.857
> 
> 标签：android, android-layout, button, overlay, transparent

在线性布局中，我需要使用填充整个布局大小（宽度/高度）的透明按钮覆盖一些文本视图。我尝试使用匹配父布局属性，但这不起作用。感谢您的帮助。

```
<LinearLayout
                android:id="@+id/layout1"
                android:layout_width="38dp"
                android:layout_height="match_parent"
                android:gravity="bottom"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/TVBlack"
                    android:layout_width="28dp"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center|bottom"
                    android:background="@color/black"
                    android:text="test"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/TVWhite"
                    android:layout_width="28dp"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center|bottom"
                    android:text="test"
                    android:textColor="@color/black" />

                <Button
                    android:id="@+id/button1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:background="@null"
                    android:text="Button" />

            </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:40:14.770

您尝试做的事情对于线性布局是不可能的，它不会将对象重叠在一起，它只会按照声明的顺序并排放置对象。您需要使用 a`FrameLayout`来实现您所描述的，请参阅此处的文档：

[http://developer.android.com/reference/android/widget/FrameLayout.html](http://developer.android.com/reference/android/widget/FrameLayout.html)

# python - 如何订购此计算以实现数值稳定性？

> ID：10278004
> 
> 赞同：2
> 
> 时间：2012-04-23T09:33:13.240
> 
> 标签：python, numpy, numerical, exponential, stability

我正在尝试计算一个向量，其总和为 1，其元素定义如下：

```
v[i] = exp(tmp[i])/exp(tmp).sum() 
```

问题是指数中的值可能很大（介于 -10^2 和 10^2 之间），使得指数评估为 inf 或 0。

我尝试了一些变化，例如将最大元素或 tmp 的平均值减去分子和分母，但仍然不够。

基本上，我需要一个减少平均值和 tmp 离散度的转换，或者这个计算的巧妙排序。

我使用 numpy 数组作为容器，exp 是 numpy.exp。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T09:55:14.600

```
>>> tmp = np.array([-10**10, 10**10])
>>> tmp_max = tmp.max()
>>> log_D = log(sum(exp(tmp - tmp_max))) + tmp_max
>>> log_v = tmp - log_D
>>> v = np.exp(log_v)
>>> v
array([ 0.,  1.]) 
```

或者使用[`scipy.misc.logsumexp`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.misc.logsumexp.html)，它使用[完全相同的算法](https://github.com/scipy/scipy/blob/master/scipy/misc/common.py#L16)。

# c# - Silverlight 文件处理线程

> ID：10278009
> 
> 赞同：0
> 
> 时间：2012-04-23T09:33:41.293
> 
> 标签：c#, multithreading, silverlight, file-io

我有一个在浏览器中运行的 SL 应用程序。用户按下按钮并`OpenFiledDialog`显示a。当用户选择了一个文件后，我想对其进行一些处理。但是，我还想显示一个进度条并允许用户取消操作。

我的代码：

```
var dialog = new OpenFileDoalog { Filter = ... };

if(dialog.ShowDialog() != true)
    return;

// Show the Progress bar
MyProgressBar.Visibility = System.Windows.Visibility.Visible;

// Do the processing on another thread
new Thread(() =>
{   
    var stream = dialog.File.OpenRead();
    var data = Process(stream);
    Dispatcher.BeginInvoke(() => IGotSomeDataForYou(data));
}).Start(); 
```

但是，我得到了一个`InvalidOperationException`，`FileInfo.OpenRead()`因为`This operation can only occur on the UI Thread.`.

但是，如果我在 UI 线程上进行工作，只要处理完成，UI 就会冻结。而且我无法在 UI 线程上打开流，然后在后台线程上处理它，因为这会导致跨线程使用错误。

我认为这是一个常见问题，但我没有找到解决方案。在这种情况下我有什么选择？先将其读入内存字节数组，然后再证明？还要别的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:54:46.213

不要调用 dialog.File.OpenRead(); 在一个单独的线程中。在 UI 线程上调用它，他们获取从 opendialog 返回的文件并将其设置为私有属性，然后在后台线程上处理它，例如上传它。

OpenFileDialog 在 SL 中有一些限制。查看我的问题了解更多详情。[对话框必须由用户启动。银光](https://stackoverflow.com/questions/10105197/dialogs-must-be-user-initiated-silverlight)

问候。

# java - Java 桌面应用程序：如何固定高度和宽度

> ID：10278015
> 
> 赞同：2
> 
> 时间：2012-04-23T09:34:00.290
> 
> 标签：java, swing, resize, netbeans-7, layout-manager

我正在使用 Netbeans 开发桌面应用程序（SingleFrameApplication）。当我运行应用程序时，我可以调整它的大小。我在那里设置了如下属性：最大尺寸、最小尺寸和首选尺寸，但即使在运行时它也可以调整大小。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:35:43.640

如果使用`JFrame`：

```
 frame.setResizable(false); 
```

在扩展`SingleFrameApplication`以下内容的应用程序类中将起作用：

```
 this.getFrame().setResizable(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:37:20.630

您可能想在框架等上调用“setResizable(false)”。

见：[http ://www.roseindia.net/java/example/java/awt/AwtFrameNonResizable.shtml](http://www.roseindia.net/java/example/java/awt/AwtFrameNonResizable.shtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T09:52:20.863

> 当我运行应用程序时，我可以调整它的大小。..我该如何解决？

使用布局使主要`JFrame`可调整大小。然后打包，在框架上设置一个最小尺寸（等于打包后的尺寸），让用户拥有他们喜欢的任何尺寸。

> 我认为它使用 jPanel

我怀疑 GUI 的主要类是`JFrame`. 正是`JFrame`需要此操作，因为布局通常会忽略面板上的约束。

# git - 子模块的几个网址？

> ID：10278016
> 
> 赞同：3
> 
> 时间：2012-04-23T09:34:03.827
> 
> 标签：git, git-submodules

假设您有一个带有子模块的 git 项目，该子模块可以通过多个 url 访问，比如`$url1`和`$url2`（支持同步）。在团队中，有些人无权访问`$url1`，而另一些人则无权访问`$url2`。

是否可以在 git 中添加一个带有“`$url1`或`$url2`”的子模块，这样如果`$url1`无法访问，它会尝试`$url2`？

# search - 我想要 yii 中的搜索功能

> ID：10278018
> 
> 赞同：0
> 
> 时间：2012-04-23T09:34:09.703
> 
> 标签：search, yii

我的代码在这里用于搜索 index.php

```
Search: <?php echo CHtml::textField(
        'search', 
        '',
        array(
            'style'=>'width:150px',
            'placeholder'=>Yii::t('app', 'User name...'),
            'onchange'=>'$.fn.yiiGridView.update("user-grid", {
                data: { "Users[username]": $(this).val() 
                    }
            });
            return false;'
        )); ?> 
```

它的设计 ![在此处输入图像描述](../Images/9b5fa85ad15da5c0a391d5cea6fbde3e.png)

它现在正确搜索用户名我想在这个（相同）框中搜索名字和姓氏请帮助我为此做些什么改变

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:01:50.777

```
data: { "Users[username]": $(this).val() } 
```

应该成为

```
data: { "Users[username]": $(this).val(), "Users[first_name]": $(this).val(), "Users[last_name]": $(this).val() } 
```

也许您应该在查询中添加`AND`或`OR`

# jquery - 交换 od div 的内容（超过 3 个 div）

> ID：10278021
> 
> 赞同：0
> 
> 时间：2012-04-23T09:34:24.607
> 
> 标签：jquery

我在 j 查询中有一个 RSS 阅读器应用程序，有 8 个 div 部分和 8 个类别。在 div 中选择特定类别时，具有该类别的 div 应该自动被第一个 div 中的内容替换。

我需要一个演示来交换 div 上的内容（超过 3 个 div）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:40:40.117

看看[http://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)它有许多演示可以满足您的需求。

# python - 图的节点数不匹配

> ID：10278023
> 
> 赞同：2
> 
> 时间：2012-04-23T09:34:31.610
> 
> 标签：python, mongodb, social-networking, data-visualization, networkx

我有一个 MDB 数据库，其中包含有关论坛帖子的以下属性：

```
thread
author (posted in the thread)
children (a list of authors who replied to the post)
child_count (number of children in the list) 
```

我正在尝试使用以下节点构建图表：

```
thread
author
child authors 
```

我的数据库中的不同作者总数超过 30,000，但生成的作者数约为 3000。或者，在总共 33000 个节点中，以下代码生成大约 5000 个。这是怎么回事？

```
for doc in coll.find():

    thread = doc['thread'].encode('utf-8')
    author_parent = doc['author'].encode('utf-8')
    children = doc['children']
    children_count = len(children)
    #print G.nodes()

    #print post_parent, author, doc['thread']
    try:
        if thread in G:
            continue
        else:
            G.add_node(thread, color='red')
            thread_count+=1

        if author_parent in G:
            G.add_edge(author_parent, thread)
        else:
            G.add_node(author_parent, color='green')
            G.add_edge(author_parent, thread, weight=0)
            author_count+=1

        if doc['child_count']!=0:          
            for doc in children:
                if doc['author'].encode("utf-8") in G:
                    print doc['author'].encode("utf-8"), 'in G'
                    G.add_edge(doc['author'].encode("utf-8"), author_parent)
                else:
                    G.add_node(doc['author'].encode("utf-8"),color='green')
                    G.add_edge(doc['author'].encode("utf-8"), author_parent, weight=0)
                    author_count+=1     

    except:
        print "failed"
        nx.write_dot(G,PATH)

    print thread_count, author_count, children_count 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:10:35.907

我得到了答案。continue 语句正在跳到下一次迭代，所以我以这种方式丢失了许多节点。

# javascript - jQuery：添加事件侦听器会覆盖同一事件的先前侦听器吗？

> ID：10278025
> 
> 赞同：38
> 
> 时间：2012-04-23T09:34:39.517
> 
> 标签：javascript, jquery, html

例如，假设我有

```
$(element).on('click', function() {/*Some Stuff*/}); 
```

在某处定义，然后我想为同一个点击事件添加更多功能。如果我做

```
$(element).on('click', function() {/*Other Stuff*/}); 
```

“其他东西”会覆盖“一些东西”吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-23T09:43:09.467

第二个侦听器不会覆盖第一个侦听器。jQuery 事件处理程序是累积添加的，并按照它们附加的顺序执行。

影响一个处理程序是否阻止另一个运行的事情是该函数如何取消浏览器的默认单击处理程序（即如何停止浏览器跟随链接的 url）

如果您使用传统方法：

```
$(element).on('click', function() {

    /* Some Stuff, do your thing */ 

    return false; 
}); 
```

上面的处理程序将停止事件本身并传播到其他处理程序。

但是您可以在不停止其传播或处理程序的情况下停止事件操作：

```
$(element).on('click', function(e) {

    // prevent the default action at first, just to make it clear :)
    e.preventDefault(); 

    /* do your thing */

    return /* what you want */;
}); 
```

这将确保不会发生默认的单击操作，但该事件会继续传递给其他处理程序。jQuery 事件还有一些其他有用的[事件传播方法](http://api.jquery.com/category/events/)（例如`Event.stopPropagation()`）值得了解。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-23T09:37:00.693

不，事件不会被覆盖，它们会被附加或推送到事件处理程序列表中。

这是[观察者模式](https://stackoverflow.com/questions/1005300/example-of-javascript-observer-pattern)的典型用法。

如果使用了事件，可以使用[http://api.jquery.com/off/](http://api.jquery.com/off/)或[http://api.jquery.com/die/](http://api.jquery.com/die/)删除事件`.live`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T09:38:53.593

不，不会的。`on()`就像绑定一样——它将事件添加到`$.data("events")`

不过，您可以通过显式删除内容`off()`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-13T22:37:56.587

这已经得到了回答，但我想我会添加我通常如何解决这个问题，当我遇到点击监听器被重复的情况时。

我只是用户查询*打开*和*关闭*方法......

> $(元素).off('点击'); ***//使用on***方法移除之前添加的点击监听
> 
> $(element).on('click', function() {/*一些东西*/}); //添加回来并且只运行一次

[http://api.jquery.com/off/](http://api.jquery.com/off/)

> .off() 方法删除了使用 .on() 附加的事件处理程序。有关更多信息，请参阅该页面上对委托和直接绑定事件的讨论。不带参数调用 .off() 会删除所有附加到元素的处理程序。通过提供事件名称、命名空间、选择器或处理函数名称的组合，可以在元素上删除特定的事件处理程序。当给定多个过滤参数时，提供的所有参数必须匹配才能删除事件处理程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T09:38:51.760

你误会了；添加另一个处理程序不会覆盖第一个处理程序。

看到这个jsFiddle：http: [//jsfiddle.net/ymuBs/](http://jsfiddle.net/ymuBs/)

单击链接会将“一”写入控制台。单击该按钮会向链接添加另一个处理程序。现在单击链接会将“一”和“二”写入控制台：

# c# - 从 SQL Server 检索时如何以毫秒为单位获取时间戳？

> ID：10278034
> 
> 赞同：1
> 
> 时间：2012-04-23T09:35:16.150
> 
> 标签：c#, .net, sql-server

在 SQL Server 数据库中，时间戳以毫秒为单位。但是在检索时，不会开始返回毫秒，即如果时间戳是`2012-04-23 15:03:35.345 PM`，则在检索时，我只得到`2012-04-23 15:03:35.000 PM`. 我使用以下代码检索数据：

```
query = "Select * from database";
_cmd = new SqlCommand(query, _con);

SqlDataAdapter da = new SqlDataAdapter(_cmd);
DataTable dt = new DataTable();
da.Fill(dt);

foreach (DataRow dr in dt.Rows)
{
    string str = Convert.ToDateTime(dr[0].ToString()).ToString("yyyy-MM-ddhh:mm:ss.fff");
    dt[0] = str;
} 
```

我怎样才能得到毫秒呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:56:44.733

`dr[0]`可能已经是 DateTime 并将其转换为字符串并返回 DateTime 不会有任何好处。我想你需要投射它：

```
string str = ((DateTime)dr[0]).ToString("yyyy-MM-ddhh:mm:ss.fff"); 
```

使用调试器通过选择整个表达式（或者只是有趣的部分，在您的情况下`dr[0]`）来检查表达式的类型，右键单击选择并选择“QuickWatch”。列表中的最后一列是类型。

# ruby-on-rails-3 - 巫术的身份验证错误 - 没有这样的方法创建

> ID：10278037
> 
> 赞同：3
> 
> 时间：2012-04-23T09:35:18.330
> 
> 标签：ruby-on-rails-3, heroku, sorcery

我的 Rails 3.0.9 应用程序遇到了挑战，直到几天前我提交了一些静态内容时，它一直“运行良好”。它在 heroku 上，我使用 Socery Gem 进行身份验证当我尝试访问它时，我从 Heroku 收到应用程序崩溃错误，查看我的日志我看到了这个

```
 Starting process with command `thin -p 38037 -e production 
-R /home/heroku_rack/heroku.ru  start`
2012-04-19T16:17:26+00:00 app[web.1]: 
/app/.bundle/gems/ruby/1.9.1/gems/activesupport-   
3.0.9/lib/active_support/dependencies.rb:304:in `rescue in depend_on':
No such file to load -- bcrypt (LoadError) 
```

在做了一些研究后，补充说

```
 gem 'bcrypt-ruby' 
```

到我的 Gem 文件，现在我的应用程序在 Heroku 上启动，但在日志中使用此用户身份验证失败

```
←[32m2012-04-23T09:15:48+00:00 app[web.1]:←[0m
 ←[32m2012-04-23T09:15:48+00:00 app[web.1]:←[0m
←[32m2012-04-23T09:15:48+00:00 app[web.1]:←[0m Started POST "/sessions" for 94.2
00.71.131 at 2012-04-23 02:15:48 -0700
←[32m2012-04-23T09:15:48+00:00 app[web.1]:←[0m
←[32m2012-04-23T09:15:48+00:00 app[web.1]:←[0m NoMethodError (undefined method `
unlock_token' for #<User:0x000000052f7740>):    
←[32m2012-04-23T09:15:48+00:00 app[web.1]:←[0m   app/controllers/sessions_contro
ller.rb:24:in `create' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:05:03.213

我今天遇到了这个问题。您可能缺少用户表中的“unlock_token”字段。您可能应该添加如下迁移：

```
class AddUnlockTokenToUsers < ActiveRecord::Migration
  def change
    add_column :users, :unlock_token, :string, :default => nil
  end
end 
```

该功能似乎已在此处实现：[https ://github.com/NoamB/sorcery/pull/249](https://github.com/NoamB/sorcery/pull/249)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:11:45.197

当我更新我的宝石时，我也遇到了这个问题。Sorcery 0.7.11 有这个问题。恢复到 0.7.7 工作正常。

# java - Oracle DB，I/O 异常 - 网络适配器无法建立连接

> ID：10278038
> 
> 赞同：0
> 
> 时间：2012-04-23T09:35:23.033
> 
> 标签：java, oracle, netbeans, jdbc

我在使用 Netbeans 或 SQuirrel 等客户端连接到 Oracle 数据库时遇到问题。我的操作系统是 Windows 7。

我位于已为此测试用例停用的防火墙后面。

如果我尝试使用普通 java 连接到数据库，例如：

```
public static void main(String[] args) {
    Connection connection = null;
    try {
        // Load the JDBC driver
        String driverName = "oracle.jdbc.driver.OracleDriver";
        Class.forName(driverName);

        // Create a connection to the database
        String serverName = "servername";
        String portNumber = "1521";
        String sid = "sid";
        String url = "jdbc:oracle:thin:@" + serverName + ":" + portNumber + "/" + sid;
        String username = "user";
        String password = "pass";
        connection = DriverManager.getConnection(url, username, password);
        System.out.println(url);
    } catch (ClassNotFoundException | SQLException e) {
        e.printStackTrace();
    } finally {
        try {
            System.out.println("connection read only:" + connection.isReadOnly());
            System.out.println("connection closed:" + connection.isClosed());
            System.out.println("connection isValid:" + connection.isValid(500));
            connection.close();
            System.out.println("connection closed:" + connection.isClosed());                
        } catch (SQLException ex) {
            Logger.getLogger(JavaApplication3.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

输出是：

```
URL
connection read only:false
connection closed:false
connection isValid:true
connection closed:true 
```

所以，这很好用。

但是，如果我尝试通过 Netbeans、Squirrel 等任何工具进行连接，我总是会遇到类似的错误

```
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the Connection   
// ... 
Caused by: java.net.SocketException: Malformed reply from SOCKS erver 
```

我不知道下一步该做什么.. 有什么好的提示我可以尝试下一步吗？

# c# - XPS - 打印带有图像的文档

> ID：10278041
> 
> 赞同：0
> 
> 时间：2012-04-23T09:35:46.667
> 
> 标签：c#, wpf, xps

我过去曾问过一个类似的问题，但从那时起我就没有解决我的问题的喜悦。我不是 Xps 文档方面的专家，但设法将我的问题归结为...

以下示例接受一个`DocumentPaginator`参数并简单地打印文档。第一个示例有效，第二个示例不打印文档中嵌入的图像。

```
// this works

XpsDocumentWriter xpsDocumentWriter = PrintQueue.CreateXpsDocumentWriter(printQueue);
xpsDocumentWriter.Write(document);  // where document is a DocumentPaginator

// this doesn't work (it prints but no images)

// create new doc
XpsDocument doc = new XpsDocument(package, CompressionOption.NotCompressed, "pack://TempTemporaryPackageUri.xps");

// create writer for new doc
XpsDocumentWriter writer = XpsDocument.CreateXpsDocumentWriter(doc);

// write document
writer.Write(document, printQueue.DefaultPrintTicket);

// create writer for print job
XpsDocumentWriter xpsDocumentWriter = PrintQueue.CreateXpsDocumentWriter(printQueue);

// i think it's here where the resources are being lost 

// write document
xpsDocumentWriter.Write(doc.GetFixedDocumentSequence()); 
```

我需要创建一个新文档的原因是因为我需要在 XpsDocument 分页后对其进行操作。

关于能够将资源从一个文档复制到另一个文档，有人能指出我正确的方向吗？

任何建议表示赞赏。

提前致谢，

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:36:37.283

您可以尝试下面链接中给出的代码。它适用于转换为 XPS 和 PDF 格式。

[http://msdn.microsoft.com/en-us/library/bb412305(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb412305(v=office.12).aspx)

# ruby-on-rails-3 - 如何避免命名空间活动记录模型？

> ID：10278042
> 
> 赞同：3
> 
> 时间：2012-04-23T09:35:51.067
> 
> 标签：ruby-on-rails-3, activerecord

我正在使用具有 100 多个模型的 rails 3.2.3。问题是目录 app/models 太拥挤了。我将目录组织成几个组并添加 autoload_paths（用于新的子目录）。我不希望我的模型使用命名空间，因为它最终会变成几个不利于开发的命名空间。比方说：

```
# app/models/listing.rb
class Listing < ActiveRecord::Base
  has_many :communications
end

# app/models/listing/communication.rb
class Communication < ActiveRecord::Base
end 
```

在我的 rails 控制台中，它适用于任何具有绝对引用的模型，除了 activerecord 关联。我不能调用Listing.first.communications。我看到它正在尝试加载Listing::Communication，它失败了，因为这个文件的内容是Communication（没有命名空间）。

```
LoadError: Expected /home/chamnap/my_app/app/models/listing/communication.rb to define Listing::Communication 
```

有没有办法将模型分组到目录中并在没有命名空间的情况下使用它们？或者有没有办法预加载所有模型，这样 Rails 就不会动态加载模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T12:45:40.240

Rails 3 的子目录和关联中的模型存在问题。我也偶然发现了这一点。

我的解决方案是为每个关联指向一个明确的 :class_name 以在子目录中建模，例如

```
class Listing < ActiveRecord::Base
  has_many :communications, :class_name => "::Communication"
end 
```

注意在模型名称前使用“::”——它告诉 rails 通信模型没有命名空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:11:41.553

```
# e.g. subscription/coupon defines ::Coupon, would would blow up with expected coupon.rb to define Subscription::Coupon
# to remove this:
# a: namespace the models
# b: move them to top-level
# c: add :class_name => "::Coupon" to all places where they are used as associations
ActiveRecord::Reflection::MacroReflection.class_eval do
  def class_name_with_top_level
    "::#{class_name_without_top_level}".sub("::::","::")
  end
  alias_method_chain :class_name, :top_level
end 
```

# c# - 使用 Unity 将对象注入 IValueConverter 实例

> ID：10278044
> 
> 赞同：7
> 
> 时间：2012-04-23T09:36:05.420
> 
> 标签：c#, unity-container, ioc-container, silverlight-5.0, ivalueconverter

我在 Silverlight 5 项目中有一个 IValueConverter 实例，它将自定义数据转换为不同的颜色。我需要从数据库中读取实际的颜色值（因为这些可以由用户编辑）。

由于 Silverlight 使用异步调用通过 Entity Framework 从数据库加载数据，因此我创建了一个简单的存储库，它保存来自 db.xml 的值。

界面：

```
public interface IConfigurationsRepository
{
    string this[string key] { get; }
} 
```

实施：

```
public class ConfigurationRepository : IConfigurationsRepository
{
    private readonly TdTerminalService _service = new TdTerminalService();

    public ConfigurationRepository()
    {
        ConfigurationParameters = new Dictionary<string, string>();
        _service.LoadConfigurations().Completed += (s, e) =>
            {
                var loadOperation = (LoadOperation<Configuration>) s;
                foreach (Configuration configuration in loadOperation.Entities)
                {
                    ConfigurationParameters[configuration.ParameterKey] = configuration.ParameterValue;
                }
            };
    }

    private IDictionary<string, string> ConfigurationParameters { get; set; }

    public string this[string key]
    {
        get
        {
            return ConfigurationParameters[key];
        }
    }
} 
```

现在我想使用 Unity 将我的存储库的这个实例注入到 IValueConverter 实例中......

应用程序.xaml.cs：

```
private void RegisterTypes()
{
    _container = new UnityContainer();
    IConfigurationsRepository configurationsRepository = new ConfigurationRepository();
    _container.RegisterInstance<IConfigurationsRepository>(configurationsRepository);
} 
```

值转换器：

```
public class SomeValueToBrushConverter : IValueConverter
{
    [Dependency]
    private ConfigurationRepository ConfigurationRepository { get; set; }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
       switch ((SomeValue)value)
        {
            case SomeValue.Occupied:
                return new SolidColorBrush(ConfigurationRepository[OccupiedColor]);
            default:
                throw new ArgumentException();
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

问题是，我在转换器实例中没有得到相同的 Unity-Container（即存储库未注册）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-01-12T11:18:02.833

可以使用 a`MarkupExtension`来解决来自 DI 容器的依赖关系：

```
public class IocResolver : MarkupExtension
{
    public IocResolver()
    { }

    public IocResolver(string namedInstance)
    {
        NamedInstance = namedInstance;
    }

    [ConstructorArgument("namedInstance")]
    public string NamedInstance { get; set; }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        var provideValueTarget = (IProvideValueTarget)serviceProvider
            .GetService(typeof(IProvideValueTarget));

        // Find the type of the property we are resolving
        var targetProperty = provideValueTarget.TargetProperty as PropertyInfo;

        if (targetProperty == null)
            throw new InvalidProgramException();

        Debug.Assert(Resolve != null, "Resolve must not be null. Please initialize resolving method during application startup.");
        Debug.Assert(ResolveNamed != null, "Resolve must not be null. Please initialize resolving method during application startup.");

        // Find the implementation of the type in the container
        return NamedInstance == null
            ? (Resolve != null ? Resolve(targetProperty.PropertyType) : DependencyProperty.UnsetValue)
            : (ResolveNamed != null ? ResolveNamed(targetProperty.PropertyType, NamedInstance) : DependencyProperty.UnsetValue);
    }

    public static Func<Type, object> Resolve { get; set; }
    public static Func<Type, string, object> ResolveNamed { get; set; }
} 
```

IocResolver 必须在应用程序启动期间初始化，例如：

```
IocResolver.Resolve = kernel.Get; 
IocResolver.ResolveNamed = kernel.GetNamed;
// or what ever your DI container looks like 
```

之后，您可以在 XAML 中使用它来在 XAML 中注入依赖项：

```
<!-- Resolve an instance based on the type of property 'SomeValueToBrushConverter' -->
<MyConverter SomeValueToBrushConverter="{services:IocResolver}" />

<!-- Resolve a named instance based on the type of property 'SomeValueToBrushConverter' and the name 'MyName' -->
<MyConverter SomeValueToBrushConverter="{services:IocResolver  NamedInstance=MyName}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:15:27.063

根据您的评论，您需要使用 ServiceLocator 来获取 ConfigurationRepository 的实例，因为 Converter 的实例不是由 Unity 创建的，而是由 Silverlight/XAML 引擎创建的。

因此，您的用 DependencyAttribute 装饰的属性将不会被注入。

C＃

```
public class SomeValueToBrushConverter : IValueConverter
{
    public SomeValueToBrushConverter(){
      ConfigurationRepository = ServiceLocator.Current.GetInstance<ConfigurationRepository>();
    }

    private ConfigurationRepository ConfigurationRepository { get; set; }
} 
```

在您的 RegisterTypes 方法中，您需要配置 ServiceLocator：

```
_container = new UnityContainer();
UnityServiceLocator locator = new UnityServiceLocator(_container);
ServiceLocator.SetLocatorProvider(() => locator); 
```

# c# - 为什么/何时适合覆盖 ToString？

> ID：10278049
> 
> 赞同：105
> 
> 时间：2012-04-23T09:36:25.250
> 
> 标签：c#, overriding

我正在学习 C#，我想知道覆盖的意义和好处是什么`ToString`，如下面的示例所示。

这可以通过一些更简单的方式来完成，使用没有覆盖的通用方法吗？

```
public string GetToStringItemsHeadings
{
    get { return string.Format("{0,-20} {1, -20}", "Office Email", "Private Email"); }
}

public override string ToString()
{
    string strOut = string.Format("{0,-20} {1, -20}", m_work, m_personal);
    return strOut;
} 
```

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-04-23T10:02:07.353

我将直接从.NET 开发系列 的[框架设计指南中为您提供答案。](http://search.barnesandnoble.com/Framework-Design-Guidelines/Krzysztof-Cwalina/e/9780321545619?itm=2&usri=framework%20design%20guidelines)

**避免**抛出异常`ToString`

**考虑**返回与实例关联的唯一字符串。

**考虑**将输出作为`ToString`此类型的任何解析方法的有效输入。

**请**确保`ToString`没有可观察到的副作用。

**`ToString`仅在要求适当的许可后才**通过**覆盖报告安全敏感信息。如果权限请求失败，则返回一个不含安全敏感信息的字符串。**

 **该`Object.ToString`方法旨在用于一般显示和调试目的。默认实现只提供对象类型名称。默认实现不是很有用，建议重写该方法。

**`ToString`每当可以返回有趣的人类可读字符串时都应**覆盖**。默认实现不是很有用，自定义实现几乎总能提供更多价值。**

 ****与唯一但不可读**的 ID 相比，更喜欢友好的名称。

值得一提的是，Chris Sells 在指南中也解释了这`ToString`通常对用户界面很危险。一般来说，我的经验法则是公开一个用于将信息绑定到 UI 的属性，并保留`ToString`用于向开发人员显示诊断信息的覆盖。你也可以用它来装饰你的`DebuggerDisplayAttribute`字体。

**请**尽量保持从`ToString`短返回的字符串。调试器用于`ToString`获取要显示给开发人员的对象的文本表示。如果字符串长于调试器可以显示的长度，则会影响调试体验。

**在返回与文化相关的信息时，基于当前线程文化进行字符串格式化**。****

 ****如果返回的字符串是文化敏感的，或者有多种格式化字符串的方法，**请**提供重载`ToString(string format)`或实现。例如，提供重载和实现。`IFormattable``ToString``DateTime``IFormattable`**

 ****不要**从`ToString`

我发誓这些准则，你应该这样做。我无法告诉你我的代码是如何仅通过这一准则来改进的`ToString`。同样的事情也适用于和之类的`IEquatable(Of T)`东西`IComparable(Of T)`。这些东西使您的代码非常实用，您不会后悔花额外的时间来实现它。

就个人而言，我从来没有真正使用`ToString` *过*用户界面，我总是公开某种属性或方法。大多数时间你应该`ToString`用于调试和开发目的。用它来显示重要的诊断信息。

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2012-04-23T09:40:11.173

*   你需要覆盖`ToString`吗？**不。**

*   你能用另一种方式得到你的对象的字符串表示吗？**是的。**

但是通过使用`ToString`，您正在使用*所有对象*通用的方法，因此其他类知道此方法。例如，每当 .NET 框架想要将对象转换为字符串表示时，`ToString`它就是一个主要的候选者（如果您想提供更精细的格式化选项，还有其他的）。

具体来说，

```
Console.WriteLine(yourObject); 
```

会调用`yourObject.ToString()`.

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-04-23T09:38:51.587

覆盖`ToString()`允许您为类提供有用的人类可读的字符串表示。

这意味着输出可以揭示有关您的班级的有用信息。例如，如果您有一个 Person 类，您可能会选择`ToString()`输出人员的 id、他们的名字、他们的姓氏等。这在调试或记录时非常有用。

关于您的示例-在不知道此类是什么的情况下很难判断您的覆盖是否有用-但实现本身还可以。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-27T09:51:39.230

**它总是合适的，但要仔细考虑你所展示的内容背后的意图**

一个更好的问题是问：

> 为什么要覆盖 ToString()？

ToString() 是进入对象状态的窗口。强调**状态**为要求。强烈的 OOP 语言（如 Java/C#）通过将所有内容封装在一个类中来滥用 OOP 模型。想象一下，您正在使用一种不遵循强大的 OOP 模型的语言进行编码；考虑您是使用类还是函数。如果您将其用作函数（即动词、动作）并且内部状态仅在输入/输出之间临时维护，则 ToString() 不会增加价值。

就像其他人提到的那样，考虑使用 ToString() 输出的**内容**很重要，因为调试器或其他系统可以使用它。

我喜欢把 ToString 方法想象成一个对象的 --help 参数。它应该简短、易读、明显且易于显示。它应该显示对象*是*什么而不是它的*作用*。考虑到所有这些，让我们考虑...

**用例 - 解析 TCP 数据包：**

不是仅应用程序级别的网络捕获，而是具有更多内容的东西，例如 pcap 捕获。

您只想为 TCP 层重载 ToString()，以便将数据打印到控制台。它会包括什么？您可能会发疯并解析所有 TCP 详细信息（即 TCP 很复杂）...

其中包括：

*   源端口
*   目的端口
*   序列号
*   确认号码
*   数据偏移
*   标志
*   窗口偏移
*   校验和
*   紧急指针
*   选项（我*什*至不会去那里）

但是，如果您在 100 个数据包上调用 TCP.ToString()，您会想要接收所有这些垃圾吗？当然不是，这将是信息过载。简单明了的选择也是最明智的...

**公开人们期望看到的内容：**

*   源端口
*   目的端口

我更喜欢一个易于人类解析的合理输出，但[YMMV](http://www.urbandictionary.com/define.php?term=YMMV)。

```
TCP:[destination:000, source:000] 
```

没什么复杂的，输出不是供机器解析的（即除非人们滥用您的代码），其预期目的是为了人类可读性。

但是我之前谈到的所有其他有趣的信息呢，不是也很有用吗？我会解决的，但首先...

* * *

**ToString() 是有史以来最有价值和未被充分利用的方法之一**

有两个原因：

1.  人们不明白 ToString() 的用途
2.  基类“对象”缺少另一个同样重要的字符串方法。

**原因 1 - 不要滥用 ToString() 的用处：**

很多人使用 ToString() 来提取对象的简单字符串表示。C# 手册甚至指出：

> ToString 是 .NET Framework 中的主要格式化方法。它将对象转换为其字符串表示形式，以便它适合显示。

**展示，**不做进一步处理。这并不意味着，使用我上面对 TCP 数据包的漂亮字符串表示，并使用正则表达式 ::cringe:: 拉取源端口。

**正确**的做法是直接在 SourcePort 属性上调用 ToString() （顺便说一句，它是一个 ushort 所以 ToString() 应该已经可用）。

如果您需要更健壮的东西来打包复杂对象的状态以进行机器解析，那么最好使用结构化序列化策略。

幸运的是，这样的策略很常见：

*   可序列化 (C#)
*   泡菜（蟒蛇）
*   JSON（Javascript 或任何实现它的语言）
*   肥皂
*   ETC...

*注意：除非您使用 PHP，因为 herp-derp 有一个函数用于该 ::snicker::*

**原因 2 - ToString() 还不够：**

我还没有看到一种在核心实现这一点的语言，但我已经在野外看到并使用了这种方法的变体。

其中一些包括：

*   ToVerboseString()
*   ToString（详细=真）

基本上，*应该*描述 TCP 数据包状态的毛茸茸的混乱，以提高人类可读性。为了避免在谈论 TCP 时“打死马”，我将“指责”我认为 ToString() 和 ToVerboseString() 未得到充分利用的 #1 案例……

**用例 - 数组：**

如果您主要使用一种语言，那么您可能对该语言的方法感到满意。对于像我这样在不同语言之间跳跃的人来说，不同的方法的数量可能会令人恼火。

*也就是说，这让我感到恼火的次数超过了每个印度教神所有手指的总和。*

在[各种](https://stackoverflow.com/questions/1970738/convert-system-array-to-string)情况下，语言使用常见[的](https://stackoverflow.com/questions/409784/simplest-way-to-print-an-array-in-java)[hack](https://stackoverflow.com/questions/2605773/php-array-to-string-equivalent)和[一些](http://www.w3schools.com/jsref/jsref_tostring_array.asp)正确[的](http://docs.python.org/library/array.html#array.array.tostring)方法。有些需要重新发明轮子，有些需要浅转储，有些需要深转储，它们都没有按照我希望的方式工作......

我要的是一个非常简单的方法：

```
print(array.ToString()); 
```

> 输出：'Array[x]' 或 'Array[x][y]'

其中 x 是第一个维度中的项目数，y 是第二个维度中的项目数，或者表示第二个维度是锯齿状的某个值（可能是最小/最大范围？）。

和：

```
print(array.ToVerboseString()); 
```

> 以漂亮的印刷品输出整个she-bang，因为我欣赏漂亮的东西。

希望这能对困扰我很久的话题有所启发。至少我为 PHPers 撒了一点巨魔诱饵来否决这个答案。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-04-23T09:42:27.620

真的，这和任何事情一样都是关于良好实践的。

`ToString()`在许多地方用于返回对象的字符串表示形式，通常供人类使用。通常可以使用相同的字符串来重新水化对象（例如考虑`int`或`DateTime`），但这并不总是给定的（例如，树可能有一个有用的字符串表示，它只显示一个计数，但显然你不能使用重建它）。

特别是调试器将使用它在监视窗口、即时窗口等中显示变量，因此`ToString`对于调试实际上是无价的。

通常，这种类型通常也会有一个显式成员，该成员也返回一个字符串。例如，Lat/Long 对可能有`ToDecimalDegrees`which 返回`"-10, 50"`，但它也可能有`ToDegreesMinutesSeconds`，因为这是 Lat/Long 对的另一种格式。然后，相同的类型也可能会被`ToString`其中一个覆盖，以为调试之类的事情提供一个“默认值”，甚至可能为渲染网页之类的事情提供一个“默认值”（例如，`@`Razor 中的构造将`ToString()`非字符串表达式的结果写入输出流）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-04-23T09:40:22.477

`object.ToString()`将对象转换为其字符串表示形式。如果您想更改用户调用`ToString()`您创建的类时返回的内容，那么您需要`ToString()`在该类中覆盖。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-04-25T22:13:04.573

虽然我认为已经提供了最有用的信息，但我将添加我的两分钱：

*   `ToString()`意味着被覆盖。它的默认实现返回类型名称，虽然有时可能有用（特别是在处理大量对象时），但在大多数情况下是不够的。

*   请记住，出于调试目的，您可以依赖`DebuggerDisplayAttribute`. [你可以在这里](http://blogs.msdn.com/b/jaredpar/archive/2011/03/18/debuggerdisplay-attribute-best-practices.aspx)阅读更多关于它的信息。

*   通常，在 POCO 上，您始终可以覆盖`ToString()`. POCO 是数据的结构化表示，通常可以成为字符串。

*   将 ToString 设计为对象的文本表示。也许是它的主要字段和数据，也许是对集合中有多少项目的描述，等等。

*   始终尝试将该字符串放入一行中，并且只包含基本信息。如果您有一个`Person`具有名称、地址、编号等属性的类，则只返回主要数据（命名一些 ID 号）。

*   小心不要覆盖`ToString()`. 一些框架类已经实现了`ToString()`. 覆盖该默认实现是一件坏事：人们会期望得到某个结果`ToString()`并得到另一个结果。

不要真的害怕使用`ToString()`. 我唯一要小心的是返回敏感信息。除此之外，风险很小。当然，正如一些人所指出的，其他类将在获取信息时使用您的 ToString。但见鬼，**什么时候返回类型名称会比获取一些实际信息更好？**

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-04-23T09:39:42.270

如果您不覆盖`ToString`，那么您将获得基类实现，因为`Object`它只是类的短类型名称。

如果您想要其他一些更有意义或有用的实现，请`ToString`覆盖它。

* * *

这在使用您的类型列表作为数据源时非常有用，`ListBox`因为`ToString`将自动显示。

当您想要将您的类型传递给`String.Format`调用`ToString`以获取您的类型的表示时，会发生另一种情况。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-05-04T22:24:49.053

其他人还没有提到的东西：通过覆盖`ToString()`，您还可以考虑实施`IFormattable`，以便您可以执行以下操作：

```
 public override ToString() {
   return string.Format("{0,-20} {1, -20}", m_work, m_personal);
 }

 public ToString(string formatter) {
   string formattedEmail = this.ToString();
   switch (formatter.ToLower()) {
     case "w":
       formattedEmail = m_Work;
       break;
     case "p":
       formattedEmail = m_Personal;
       break;
     case "hw":
       formattedEmail = string.Format("mailto:{0}", m_Work);
       break;
   }
   return formattedEmail;
} 
```

这可能很有用。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-04-24T21:54:16.853

覆盖 ToString() 的一个好处是 Resharper 的工具支持：Alt + Ins -> "Formatting members"，它会为您编写 ToString()。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-04-23T15:59:06.233

在某些情况下，它可以更轻松地在调试器监视窗口中读取自定义类的值。如果我确切地知道我想在监视窗口中看到什么，当我用该信息覆盖 ToString 时，我就会看到它。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-04-23T15:04:20.947

在定义结构（实际上是用户基元）时，我发现使用 match`ToString`和`Parse`and`TryParse`方法是一种很好的做法，尤其是对于 XML 序列化。在这种情况下，您会将整个状态转换为字符串，以便稍后读取。

然而，类是更复杂的结构，通常对于使用`ToString`和来说过于复杂`Parse`。他们的`ToString`方法，而不是保存整个状态，可以是一个简单的描述，可以帮助您识别他们的状态，例如名称或 ID 等唯一标识符，或者可能是列表的数量。

此外，正如 Robbie 所说，覆盖`ToString`允许您调用`ToString`与 type 一样基本的引用`object`。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-04-25T07:19:42.703

当你有一个字符串表示不直观的对象时，你可以使用它，比如人。因此，如果您需要例如打印此人，您可以使用此覆盖来准备其格式。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-10-03T08:50:48.980

该`Object.ToString`方法应仅用于调试目的。默认实现显示不是很有用的对象类型名称。考虑重写此方法，以便为诊断和调试提供更好的信息。请考虑日志基础设施通常也使用 ToString 方法，因此您会在日志文件中找到这些文本片段。

**不要**在方法中返回本地化的文本资源`Object.ToString`。原因是 ToString 方法应始终返回开发人员可以理解的内容。开发人员可能不会说应用程序支持的所有语言。

**`IFormattable`当您想要返回用户友好的本地化文本时实现**接口。**此接口使用参数`format`和定义 ToString 重载`formatProvider`。formatProvider 可帮助您以文化感知的方式格式化文本。**

 **另请参阅：[Object.ToString 和 IFormattable](https://github.com/jbe2277/waf/wiki/Object.ToString-and-IFormattable)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-04-25T14:49:53.950

更简单取决于您的财产将如何使用。如果您只需要一次格式化字符串，那么覆盖它并没有多大意义。

但是，您似乎正在重写 ToString 方法，以不为您的 property 返回正常的字符串数据，而是执行标准的格式化模式。由于您使用的是带有填充的 string.format 。

因为您说您正在学习，所以该练习似乎还触及了与封装和代码重用相关的面向对象编程的核心原则。

采用您为填充设置的参数的 string.format 可确保每次调用该属性的任何代码都以相同的方式格式化该属性。同样，今后您只需在一处更改而不是多处更改。

很好的问题，也有一些很好的答案！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-04-27T10:05:27.637

我发现覆盖实体类上的 ToString 方法很有用，因为它有助于快速识别测试中的问题，尤其是当断言失败时，测试控制台将调用对象上的 ToString 方法。

但与之前所说的一致，它是为所讨论的对象提供人类可读的表示。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-05-31T07:52:10.663

我对其他答案中提到的框架指南感到满意。但是，我想强调显示和调试目的。

请注意您`ToString`在代码中的使用方式。您的代码不应依赖对象的字符串表示形式。如果是这样，您绝对应该提供相应的`Parse`方法。

由于`ToString`可以在任何地方使用，因此如果您想在以后更改对象的字符串表示形式，这可能是一个可维护性的痛点。在这种情况下，您不能只检查调用层次结构来研究某些代码是否会中断。**********

# couchbase - 关于 API 的问题

> ID：10278055
> 
> 赞同：0
> 
> 时间：2012-04-23T09:37:01.463
> 
> 标签：couchbase

我想出了更多的问题！耶！（对不起）

1.  “libcouchbase_set_cookie”API 是做什么的？

我可以看到它设置了cookie，但是libcouchbase的所有API都有“cookie”作为我们可以放入的参数。为什么还有另一个API这样做？

解释这个“cookie”的东西会非常有帮助，谢谢。

1.  IO_opt ...似乎为我设置了IO选项api...我将查看源文件夹进行检查，但对此的任何解释也会有所帮助，因为我无法在couchbase网站上获得任何信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:20:14.173

在 libcouchbase 中有两种形式的 cookie，一种是用于操作的“用户上下文”（并在回调中传递给您），一种是用于实际 libcouchbase_t 句柄的“用户上下文”。（不要混淆，但还有第三个 cookie 专门与 iops 结构相关联 :)）。

libcouchbase 中的“cookie”类似于您会发现的这个成语：

```
struct frobnicate_st {
/* private library stuff */
...
/* store anything you like here */
void *user_data;
}; 
```

在其他一些图书馆。

因为单个操作的上下文和生命周期可以跨越多个回调，并且因为您通常需要将操作的结果（状态代码和实际值）存储在某个地方，所以 cookie 参数特别有用（如果不是完全必要的话）

您可以浏览 libcouchbase 测试套件，看看它是如何在简单的上下文中使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:36:50.943

cookie 用于允许您将上下文与操作相关联。如果不使用，则不需要设置为 NULL。下面是来自 libcouchbase 项目的 cookie 的文档。

```
<argument id="cookie" type="const void*">
  <m_title>Client cookie</m_title>
  <description>
    This is a cookie the client may attach to all requests that will be
    included in all callbacks. It is not required and may be NULL if
    you have no need for it.
  </description>
  <langtype id="c" type="const void*"/>
</argument> 
```

# api - 从多个 C/C++/Java 程序访问一个 lua 实例

> ID：10278057
> 
> 赞同：0
> 
> 时间：2012-04-23T09:37:05.053
> 
> 标签：api, lua, ipc

我在 lua 方面有一些经验，但现在我面临的挑战是我可以有最简单的解决方案，如果只有主题声明是可能的。

**问题**

简而言之，程序（程序集）要通过lua连接起来，形成某种IPC。现在，我可以在它们中的每一个上创建 Lua 状态，但是我仍然需要使用 Lua-Lua IPC。我可以做到，但我想如果我可以只创建一个实例，并可以从所有这些应用程序中访问它，我就可以大大简化这个过程。

现在我知道中央 lua 应用程序需要以线程安全的方式编写。作为第一种天真的方法，我想将来自所有应用程序的数据排队，然后使用协程来解决事件。

**问题（分成几部分）：**

1.  正在使用可能来自多个“主机”的本机 API 调用访问一个 Lua 状态
2.  如果是，它怎么做，我必须确保我做什么，以确保它能够正确运行。
3.  如果不是，这几乎可以解决问题，因为我将尝试使用 Lua IPC，它非常适合谷歌搜索。

**编辑1：** 我现在正在挖掘不同的lua“通信”库，但真的找不到。问题的第 3 点现在更有价值，因为我现在被困在 localhost TCP + JSON 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:17:46.313

Lua 在 a 内不是线程安全的`lua_State`（跨线程使用多个单独`lua_State`的 s 是安全的，但不能在不同线程中访问同一个）。因此，即使 API 有一些进程间通信的东西，它也不会在多个进程访问它时工作。

# java - 类扩展了另一个类并在java中实现接口可以转换为这些类型中的任何一种吗？

> ID：10278060
> 
> 赞同：1
> 
> 时间：2012-04-23T09:37:32.493
> 
> 标签：java, spring, types, interface, javabeans

我有这样的春豆：

```
 <bean id="testBean" class="TestBean"
  ......
  <property name="resolver" ref="resolver".... 
```

* * *

```
class Resolver extends BaseResolver implements IManagementInterface 
```

在类 TestBean 设置器中：

```
 public void setResolver (IManagementInterface resolver) {
 this.resolver=resolver;
 ... 
```

但是当我运行时，我收到异常：

> 无法将 Resolver 类型的值转换为所需的 IManagementInterface 类型。

但这似乎不正确——因为`Resolver`也是 type `IManagementInterface`。这个错误有什么意义？或者我应该清理安装我所有的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:47:15.510

首先进行全新安装。如果这没有使问题消失，您可能遇到了类加载器问题。如果您的`Resolver`实例（和相应的类声明）由不同的类加载器加载`TestBean`，则它属于不同的类加载器领域，`IManagementInterface`因此 JVM 将它（或特别是它的超级接口）视为与`IManagementInterface`参数类型完全不同的类型的`TestBean.setResolver`。所以一个人不能投给另一个人。

请参阅[我的这个较早的答案，](https://stackoverflow.com/questions/2614989/brainstorming-weird-jpa-problem-possibly-classpath-or-jar-versioning-problem/2615014#2615014)以验证这是否是根本原因。

# ibm-mq - 为什么使用 MQFTE 传输时子文件夹的内容？

> ID：10278061
> 
> 赞同：1
> 
> 时间：2012-04-23T09:37:33.580
> 
> 标签：ibm-mq, mq, websphere-mq-fte

嗨，当我尝试使用 MQFTE ftecreatetransfer 命令传输文件夹的内容（该文件夹有几个子文件夹和几个文件）时，不仅文件夹中的几个文件而且子文件夹的内容都被传输到目标。在目标中创建相同的子文件夹并传输内容。有没有办法避免子文件夹中的文件被传输？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:52:55.703

根据信息中心的[此页面](http://publib.boulder.ibm.com/infocenter/wmqfte/v7r0/topic/com.ibm.wmqfte.doc/start_new_transfer_cmd.htm)：

> 当一个目录被指定为源文件规范时，该目录的内容被复制。更准确地说，目录及其所有子目录中的所有文件，包括隐藏文件，都将被复制。

但是，看起来他们预料到了您的问题，因为该页面最近添加了以下说明：

> 例如，要将 DIR1 的内容仅复制到 DIR2，请指定 fteCreateTransfer ... -dd DIR2 DIR1/*

因此，无需指定文件夹，而是将通配符添加到末尾，您将只获得该文件夹顶层的文件。（当然假设您不使用 -r 选项！）

# jasper-reports - 在 jasperreports 中添加表格边框

> ID：10278067
> 
> 赞同：12
> 
> 时间：2012-04-23T09:38:22.463
> 
> 标签：jasper-reports

如何创建包含表格数据的报告？

我能够创建一个包含以下详细信息的报告。它将数据排列在类似表格的结构中。

```
<jasperReport>  
.
.
    <pageHeader>
        <band height="30">
            <staticText>
                <reportElement x="0" y="0" width="69" height="24" />
                <textElement verticalAlignment="Bottom" />
                <text><![CDATA[ID: ]]></text>
            </staticText>
            <staticText>
                <reportElement x="140" y="0" width="69" height="24" />
                <textElement verticalAlignment="Bottom" />
                <text><![CDATA[NAME: ]]></text>
            </staticText>
            <staticText>
                <reportElement x="280" y="0" width="69" height="24" />
                <textElement verticalAlignment="Bottom" />
                <text><![CDATA[AGE: ]]></text>
            </staticText>
        </band>
    </pageHeader>
    <detail>
        <band height="30">
            <textField>
                <reportElement x="0" y="0" width="69" height="24" />
                <textFieldExpression class="java.lang.String"><![CDATA[$F{id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="140" y="0" width="69" height="24" />
                <textFieldExpression class="java.lang.String"><![CDATA[$F{name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="280" y="0" width="69" height="24" />
                <textFieldExpression class="java.lang.String"><![CDATA[$F{age}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

但是行和列没有边框？我如何在 Jasperreport 4.5 中实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T10:49:29.580

*   *您可以在 GUI 设计器（例如iReport* ）的帮助下添加边框，也可以手动添加***框***元素（编辑*jrxml*文件），如下例所示：

```
<textField>
    <reportElement x="29" y="17" width="100" height="20"/>
    <box>
        <topPen lineWidth="1.0"/>
        <leftPen lineWidth="1.0"/>
        <bottomPen lineWidth="1.0"/>
        <rightPen lineWidth="1.0"/>
    </box>
    <textElement/>
    <textFieldExpression><![CDATA[$F{field}]]></textFieldExpression>
</textField> 
```

*   在*iReport*中，您可以使用*“填充和边框”*上下文菜单。 ![iReport 上下文菜单](../Images/b7bd92b179d3ba03b88d6a5899e10389.png)

*   在*Jaspersoft Studio*中，您可以借助*属性*对话框（选项卡*Borders*）设置边框。

[![在此处输入图像描述](../Images/b2c99f5b635075deb63ceb3b2d2c3ec8.png)](https://i.stack.imgur.com/DsErG.png)

# asp.net - 如何在 EF 中使用共享外键

> ID：10278068
> 
> 赞同：1
> 
> 时间：2012-04-23T09:38:22.503
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, ef-code-first

```
 [Table("Table1")]
    public class Entity1
    {
       [Key, ForeignKey("entity1")]
       public int ID{get;set;}
       public virtual Entity2 entity2{get;set;}
       public virtual Entity3 entity3{get;set;}
    } 
```

这是我的主要实体。在这里，我想将此实体与 Entity2 和 3 映射为具有相同的外键，该外键也是 Entity1,2,3 中的主键。

```
 [Table("Table2")]
    public class Entity2
    {
       [Key]
       public int Entity1ID{get;set;}
       // few entity specific properties
    } 
```

```
 [Table("Table3")]
    public class Entity3
    {
       [Key]
       public int Entity1ID{get;set;}
       // few entity specific properties
    } 
```

什么时候使用我的上下文类进行映射然后我收到一个错误说`the Dependent Role refers to the key properties, the upper bound of the multiplicity of the Dependent Role must`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:19:48.723

```
modelBuilder.Entity<Entity1>().HasOptional(u => u.Entity2)
                           .WithRequired();
        modelBuilder.Entity<Entity1>().HasOptional(u => u.Entity2)
                          .WithRequired(); 
```

如果你只需要共享主键关系，那么使用上面的代码没有什么额外的，所以删除注释属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T09:46:26.733

您不能有两个具有相同名称的属性。尝试这个：

```
[Table("Table1")]
public class Entity1
{
   [Key, ForeignKey("Entity2"), ForeignKey("Entity3")]
   pubic int ID{get;set;}
   public virtual Entity2 Entity2{get;set;}
   public virtual Entity3 Entity3{get;set;}
} 
```

顺便提一句。它看起来像一个非常奇怪的设计。

# php - 数组键存在于多维数组中

> ID：10278070
> 
> 赞同：2
> 
> 时间：2012-04-23T09:38:24.507
> 
> 标签：php, arrays, multidimensional-array, array-key-exists

我正在尝试将一组页面排列到一个数组中，并根据它们的父 ID 号放置它们。如果父 id 为 0，我希望将它作为数组放置在数组中，就像这样......

```
$get_pages = 'DATABASE QUERY'
$sorted = array()

foreach($get_pages as $k => $obj) {
    if(!$obj->parent_id) {
        $sorted[$obj->parent_id] = array();
    }
} 
```

但是如果设置了父ID，我想把它放到相关的数组中，再次像这样的数组......

```
$get_pages = 'DATABASE QUERY'
$sorted = array()

foreach($get_pages as $k => $obj) {
    if(!$obj->parent_id) {
        $sorted[$obj->id] = array();
    } else if($obj->parent_id) {
        $sorted[$obj->parent_id][$obj->id] = array();
    }
} 
```

这是我开始遇到问题的地方。如果我有第 3 个元素需要插入到数组的第 2 维，或者甚至第 4 元素需要插入第 3 维，我无法检查该数组键是否存在。所以我不知道如何检测数组键是否存在于第一个维度之后，以及它是否存在，以便我可以放置新元素。

这是我的数据库表的示例

```
id    page_name    parent_id

1     Products             0
2     Chairs               1
3     Tables               1
4     Green Chairs         2
5     Large Green Chair    4
6     About Us             0 
```

这是我想要获得的输出示例，如果有更好的方法可以做到这一点，我愿意接受建议。

```
Array([1]=>Array([2] => Array([4] => Array([5] => Array())), [3] => Array()), 6 => Array()) 
```

先谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:30:43.943

好吧，基本上你正在构建一棵树，所以其中一种方法是使用[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)：

```
// This function takes an array for a certain level and inserts all of the 
// child nodes into it (then going to build each child node as a parent for
// its respective children):

function addChildren( &$get_pages, &$parentArr, $parentId = 0 )
{
    foreach ( $get_pages as $page )
    {
        // Is the current node a child of the parent we are currently populating?

        if ( $page->parent_id == $parentId )
        {
            // Is there an array for the current parent?

            if ( !isset( $parentArr[ $page->id ] ) )
            {
                // Nop, create one so the current parent's children can
                // be inserted into it.

                $parentArr[ $page->id ] = array();
            }

            // Call the function from within itself to populate the next level
            // in the array:

            addChildren( $get_pages, $parentArr[ $page->id ], $page->id );
        }
    }
}

$result = array();
addChildren( $get_pages, $result );

print_r($result); 
```

这不是最有效的方法，但对于少数页面和层次结构，你应该没问题。

# c++ - C++ - 临界值概率分布

> ID：10278073
> 
> 赞同：5
> 
> 时间：2012-04-23T09:38:35.630
> 
> 标签：c++, statistics, distribution, probability

我能找到概率分布临界值的可靠代码吗？例如，Fisher 检验的 F 临界值...？

感谢您提供任何相关参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:58:33.893

[Boost Math Toolkit](http://www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/index.html)包含F[分布](http://www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/dists/f_dist.html)。要获得临界值，请使用[分位数非成员函数](http://www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/nmp.html#math.dist.quantile)。如果您不能使用任何第三方工具，那么您需要做很多工作，因为大多数发行版都没有临界值的封闭式分析表达式。例如，正态分布需要数值积分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:17:12.763

[我希望他们为 C++ TR2](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1668.pdf)重新提出统计特殊函数。Boost 也有[类似的提议](http://lists.boost.org/Archives/boost/2003/04/46589.php)。我知道现在这没有帮助，但我认为这些东西应该装在罐头上，让每个人都可以拿起和使用。

# image - MATLAB，移动图像

> ID：10278085
> 
> 赞同：2
> 
> 时间：2012-04-23T09:39:12.223
> 
> 标签：image, matlab, animation, matlab-figure

我需要将两个图像添加到 matlab 图形中并将它们移动到设置的路径中。但是当我调整它的大小时，我的图像会加载全尺寸，它只是对其进行像素化，当我尝试移动它时它会失败。这是我的代码：

```
close all
clc
clear all

fh = figure;
bgh = uibuttongroup('Parent',fh,'Title',...
    'John''s Animation','Position',[.1 .2 .8 .6]);
set(bgh,'FontName','Trebuchet MS','FontSize',15)
rbh1 = uicontrol(bgh,'Style','radiobutton','String','START CAR!',...
    'Units','normalized','Position',[.1 .6 .3 .2]);
rbh2 = uicontrol(bgh,'Style','radiobutton','String','STOP!',...
    'Units','normalized','Position',[.1 .4 .3 .2]);
set(rbh1,'FontName','Trebuchet MS', ...
    'FontSize',15,'ForegroundColor','r')
set(rbh2,'FontName','Trebuchet MS', ...
    'FontSize',15,'ForegroundColor','g')

% axis ([2 1 2 1])
axis square off
car = imread('car.jpg');
carg = rgb2gray(car);
% carg = imresize(car,1);
h = imshow(carg);

steps = linspace(0,2,1000);

set(rbh1,'CallBack','for i = 1:200, set(h,''XData'',steps(i)),pause(0.0001),end') 
```

# c# - 在 Windows 服务中托管 Wcf 服务，该服务每 1 分钟运行一次，以使用计时器将文件从一个文件夹移动到另一个文件夹

> ID：10278089
> 
> 赞同：0
> 
> 时间：2012-04-23T09:39:25.347
> 
> 标签：c#

我有一个 wcf 服务，它实现了一些类似的逻辑。如果在源文件夹中添加了新文件，我想每 1 分钟将所有文件从源文件夹移动到目标文件夹。我的服务将文件转换为 Pdf 文件

如果我想一次移动 100 个文件并且每个文件的大小为 1 MB，如何使用线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:43:03.967

这听起来不像 WCF 服务 - 您的逻辑中的 Web 服务/通信组件在哪里？

这听起来更像是一个小控制台应用程序（用于移动文件），您应该使用 Windows 调度程序设置它以每分钟运行一次。

# c# - 方法最佳实践结束时的评论？

> ID：10278090
> 
> 赞同：4
> 
> 时间：2012-04-23T09:39:26.150
> 
> 标签：c#, comments

我有一些代码在每个方法之后都有注释，例如：

```
// End of contructor DbFactoryDBConnection() 
```

是否应该使用这样的注释来指示方法的结束？这是从以前很常见的工作中学到的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T09:44:00.067

我觉得这样的评论是在身体不适合单个屏幕的方法之后。我相信这是重构和拆分如此长的方法以缩短方法甚至提取新实体/服务/助手的好兆头。这就像 C# 区域，有时它被用来隐藏很长的代码块，这表明你有某种[上帝对象的反模式](http://en.wikipedia.org/wiki/God_object)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T09:43:26.137

不。如果您想知道大括号关闭的是什么，而无需滚动，您可以使用[ReSharper](http://www.jetbrains.com/resharper/)。这在很多方面都很棒。

只需将光标放在大括号上，如果看不到它们的开口 - 它会提示它前面的整行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T09:45:07.037

通常这种评论是过度文档化的麻烦。
注释应该存在的正确位置是在您的类和方法的开头，并且就在您的代码中将做出重要决定之前。
如果您发现需要记录 IF、SWITCH 或 METHOD 的结尾，那么很可能应该重新检查您的代码以简化代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T09:44:14.643

我认为这种注释完全没有必要，只会使代码混乱。大多数IDE（例如Visual Studio）多年来都具有突出显示方法（或其他）范围的功能，因此我不确定通过这样做可以为您的代码添加什么价值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T09:50:42.247

你总是可以使用 PowerCommands for Visual Studio 它在大括号的末尾添加评论你在什么大括号结束我使用它，它有很大帮助:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T09:44:37.030

不，不应该使用这样的评论。有人会使用这样的评论的唯一原因是该方法**太长**了。但即便如此，现代 IDE 会在某处向您展示您当前使用的方法，甚至允许将方法折叠回定义。
像这样的评论毫无价值，只会污染代码库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T09:46:38.307

这不属于源恕我直言；与有效的源代码块不同步太容易了。有一些扩展会在 Visual Studio 中为您显示此信息，我认为这很有帮助。

# facebook - Facebook auth 访问链接停止工作，我只收到一般错误消息

> ID：10278094
> 
> 赞同：0
> 
> 时间：2012-04-23T09:39:35.013
> 
> 标签：facebook, facebook-access-token

我有一个 facebook 页面选项卡，我尝试通过链接获取访问令牌

https://www.facebook.com/dialog/oauth?client_id=[APP_ID]&redirect_uri=[REDIRECT_URI]

我一直在工作，但现在突然间我收到一条通用错误消息：“发生错误。请稍后再试。”

我已经检查过，APP_ID 是正确的，据我所知，应用程序设置没问题。这有什么新的变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:12:12.867

当设置中的 url 与您尝试登录的页面不匹配时，会出现此错误消息。

在应用程序设置中，您需要确保所有 url 共享同一个域，此外，如果您有其他不同的域（子域，不可能使用完全不同的 url），然后将它们添加到“应用程序域”字段中设置页面。

确保 redirect_uri 也与您在应用程序设置中的域相同。

可能导致它的另一个原因是您的应用程序可能处于“沙盒模式”。

关于这个问题有很多问题：

*   [重定向到身份验证对话框 - “发生错误。请稍后再试”](https://stackoverflow.com/questions/7231939/redirecting-to-authentication-dialog-an-error-occurred-please-try-again-late)
*   [facebook php sdk server 发生错误。请稍后再试](https://stackoverflow.com/questions/9011936/facebook-php-sdk-server-an-error-occurred-please-try-again-later)
*   [Facebook 连接“发生错误。请稍后再试。”](https://stackoverflow.com/questions/9196247/facebook-connect-an-error-occurred-please-try-again-later)

# java - 对象引用未保存的瞬态实例：在刷新之前保存瞬态实例

> ID：10278096
> 
> 赞同：16
> 
> 时间：2012-04-23T09:39:40.870
> 
> 标签：java, hibernate

我有两个实体：PlayerProfileEntity 和 UserInfoEntity 我加入了 userInfoEntity 和 PlaterProfileEntity，并将我的记录保存在数据库中，如下所示：

```
Session session = sessionFactory.openSession();
Transaction tr = session.beginTransaction();
Criteria crit = session.createCriteria(PlayerProfileEntity.class);
player.setUserId(new UserInfoEntity());
player.getUserId().setAddress(user.getUserId().getAddress());
session.save(player);
tr.commit(); 
```

我在我的 PlayerProfileEntity 类中使​​用了这个关联

```
@ManyToOne (fetch = FetchType.LAZY)
@Cascade({CascadeType.REFRESH})
@JoinColumn(name="userid") 
```

我收到此错误：

```
org.hibernate.TransientObjectException: object references an unsaved transient instance - save     the transient instance before flushing: com.shared.entity.UserInfoEntity 
```

注意：如果我使用 CascadeType.All，我会收到此错误：

```
Cannot add or update a child row: a foreign key constraint fails 
```

知道我该如何解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-23T10:16:28.933

`TransientObjectException`每当您尝试保存对象而不保存适当的联接时，就会出现这种情况。您必须先保存，`UserInfoEntity`然后才能保存您的`PlayerInfoEntity`课程。

```
player.setUserId(new UserInfoEntity()); 
```

通过使用它，您将特定分配`UserInfoEntity`给`PlayerInfoEntity`. 但`UserInfoEntity`没有任何身份证。两者将如何映射？这就是异常到来的原因。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T09:49:05.087

您应该使用 CascadeType.PERSIST 或 CascadeType.ALL

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T17:58:57.140

```
public void savePlayerMethod(PlayerInfoEntity player){

if(player == null){
   player = new PlayerInfoEntity();
}
player.setUserId(getSavedUserInfo());
Session session = SessionFactory.openSession();
Transaction transaction = session.beginTransaction();
session.save(userInfo);
transaction.committ();
}

public UserInfoEntity getSavedUserInfo(){
UserInfoEntity userInfo = new UserInfoEntity();
Session session = SessionFactory.openSession();
Transaction transaction = session.beginTransaction();
session.save(userInfo);
transaction.committ();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:24:37.930

刚才我在尝试通过 Session#save() 方法存储具有分配 ID 的未保存对象时遇到了同样的错误。我认为问题可能是您未保存的对象图已经被赋予了一个 id（这是保存方法试图做的事情），这以某种方式弄乱了保存方法的级联。尝试使用 Session#persist() 代替，级联应该可以使用它，即使对象已经被分配了一个 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-12T03:26:23.993

我遇到了同样的问题，经过大量调试后，我发现从实体中删除 @AllArgsConstructor 并添加

```
@Tolerate
public <ClassName>() {
} 
```

为我工作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-23T10:20:40.447

好，

我有类似的问题，我所做的是

```
Object tmp = session.get(Object.class,ob.getId())
if(tmp!=null){
    session.evit(tmp); // or merge
}
session.saveOrUpdate(ob); 
```

这对我有用。

它获取瞬态对象并将其驱逐或合并。

现在使用 save 或 update 方法来保存你的新对象。

# objective-c - 如果外部 IP 在目标 c 中自己的子网范围内，则查找的干净解决方案

> ID：10278098
> 
> 赞同：1
> 
> 时间：2012-04-23T09:39:46.633
> 
> 标签：objective-c, ios, ip, subnet

大家好，我正在寻找一种更好的解决方案来检查/计算 IP 地址是否与您的 iPhone 位于同一子网中。

背景：我正在通过 Zeroconf / Bonjour 查找设备，这些设备可以有多个 IP 地址。所以我想检查我的设备可以访问其中哪些。我认为最简单的方法是获取外部 IP 并将其与我的子网掩码连接，但我还没有找到任何直接执行此操作的方法（需要两者都为 int），所以我做了一个解决方法。

编码：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <stdio.h>
#include <ifaddrs.h>
#include <netdb.h>
#include <net/if.h>

-(void)netServiceDidResolveAddress:(NSNetService *)service {
  NSLog(@" # # # Bonjour.netServiceDidResolveAddress # # # ");
  self.isConnected = YES;
  self.connectedService = service;

  NSLog(@"service.hostName   : %@", service.hostName);
  NSLog(@"service.name       : %@", service.name);
  NSLog(@"service.description: %@", service.description);

  // # # #

  // get MAC-ADDR from TXTRecordData
  NSData *txtRecord = service.TXTRecordData;

  unsigned char aBuffer[[txtRecord length]];
  [txtRecord getBytes:aBuffer length:[txtRecord length]];
  NSString *macAddr = [NSString stringWithCString:(const char *)aBuffer encoding:NSStringEncodingConversionAllowLossy];
  if(macAddr && macAddr.length >28)
  {
      macAddr = [macAddr substringFromIndex:12];
      macAddr = [macAddr substringToIndex:17];
  }

  NSLog(@"service.macAddr: %@", macAddr);
  // # # #

  NSString           *name = nil;
  NSData             *address = nil;
  struct sockaddr_in *socketAddress = nil;
  NSString           *ipString = nil;
  int       port;
  int   i = 0;

  for (i = 0; i < [[service addresses] count]; i++)
  {
      NSString *ip;
      name = [service name];
      address = [[service addresses] objectAtIndex:i];
      socketAddress = (struct sockaddr_in *)[address bytes];
      ip = [NSString stringWithFormat: @"%s", inet_ntoa (socketAddress->sin_addr)];

      if([ip isEqualToString:@"0.0.0.0"])
          continue;

      NSLog(@"- - - ");
      if([self isIpInSubnet:ip])
      {
          ipString = [ip copy];
          port = service.port;
          NSLog(@"set IP");
      }
      NSLog(@"%@", ipString);
      NSLog(@"%d", port);
 }
....
} 
```

-

```
- (BOOL)isIpInSubnet:(NSString *)targetIP{
// http://www.cocoabuilder.com/archive/cocoa/127230-finding-subnet.html
// http://veys.com/

struct ifaddrs *ifap, *ifp;
char    ip[NI_MAXHOST], nm[NI_MAXHOST];
BOOL isInMask = NO;

if(getifaddrs(&ifap) < 0)
    perror("getifaddrs");

for(ifp = ifap; ifp; ifp = ifp->ifa_next) {
    /* Ignore everything but IPv4 */
    if(ifp->ifa_addr->sa_family != AF_INET )
        continue;

    /* Ignore interfaces marked down. */
    if(!(ifp->ifa_flags & IFF_UP))
        continue;

    /* Ignore interfaces without netmask. */
    if(!ifp->ifa_netmask)
        continue;

    if(getnameinfo(ifp->ifa_addr, ifp->ifa_addr->sa_len, ip, sizeof(ip),
                   NULL, 0, NI_NUMERICHOST) != 0)
        perror("getnameinfo");

    if(getnameinfo(ifp->ifa_netmask, ifp->ifa_netmask->sa_len, nm,
                   sizeof(nm), NULL, 0, NI_NUMERICHOST) != 0)
        perror("getnameinfo");

    /* Ignore interfaces for localhost. */
    if([[NSString stringWithFormat:@"%s", ip] isEqualToString:@"127.0.0.1"])
        continue;

    // # # # # # # # # # # # #

    NSArray *ipChunks = [targetIP componentsSeparatedByString:@"."]; // chunks for extern IP
    NSArray *nmChunks = [[NSString stringWithFormat:@"%s",nm] componentsSeparatedByString:@"."];

    NSUInteger ipRaw = 0;
    NSUInteger nmRaw = 0;
    NSUInteger shift = 24;
    for (NSUInteger i = 0; i < 4; ++i, shift -= 8) {
        ipRaw |= [[ipChunks objectAtIndex:i] intValue] << shift;
        nmRaw |= [[nmChunks objectAtIndex:i] intValue] << shift;
    }

    NSUInteger bcRaw = nmRaw & ipRaw; // lowest interface addr.
    NSString *nw1 = [NSString stringWithFormat:@"%d.%d.%d.%d", (bcRaw & 0xFF000000) >> 24,
                     (bcRaw & 0x00FF0000) >> 16, (bcRaw & 0x0000FF00) >> 8, bcRaw & 0x000000FF];

    ipRaw = nmRaw = 0;
    shift = 24;

    ipChunks = [[NSString stringWithFormat:@"%s",ip] componentsSeparatedByString:@"."]; // chunks for local IP

    for (NSUInteger i = 0; i < 4; ++i, shift -= 8) {
        ipRaw |= [[ipChunks objectAtIndex:i] intValue] << shift;
        nmRaw |= [[nmChunks objectAtIndex:i] intValue] << shift;
    }

    bcRaw = nmRaw & ipRaw;
    NSString *nw2 = [NSString stringWithFormat:@"%d.%d.%d.%d", (bcRaw & 0xFF000000) >> 24,
                     (bcRaw & 0x00FF0000) >> 16, (bcRaw & 0x0000FF00) >> 8, bcRaw & 0x000000FF];

    isInMask = [nw1 isEqualToString:nw2];
    NSLog(@"intern: %@ - extern: %@", nw2, nw1);
    // # # # # # # # # # # # #

    NSLog(@"ip %@ is in range with %s in mask %s ? %@", targetIP, ip, nm, isInMask ? @"YES" : @"NO");
}
// Free memory 
freeifaddrs(ifap);

return isInMask;
} 
```

如果有人暗示要让它变得更容易或更好，总是欢迎他发布他的解决方案:)

# php - 如何在特定时间间隔获取文件备份？

> ID：10278100
> 
> 赞同：0
> 
> 时间：2012-04-23T09:40:00.277
> 
> 标签：php, timer, backup

我创建了一个在线存储文件的 Web 应用程序。我想定期备份这些上传的文件，这意味着一天或一小时后。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:42:18.010

如果你在 Linux 上，你想使用[cron ；如果你在 Windows 上，你想使用](http://www.scrounge.org/linux/cron.html)[任务调度程序](http://support.microsoft.com/kb/308569)来安排定期脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:43:47.367

安排 rsync 命令每小时或每天运行一次，或者在使用 cron 时运行。Rsync 对目录或文件进行逐字节复制。

```
rsync -av --delete /source/folder /destination/folder 
```

将其保存为 backup.sh 然后在服务器上的终端或 ssh 会话上键入：

```
#crontab -e 
5 0 * * * /path/to/backup.sh 
```

这将在每晚午夜 5 分钟后调用您的备份脚本。

# c# - EPPlus 阅读栏标题

> ID：10278101
> 
> 赞同：5
> 
> 时间：2012-04-23T09:40:01.037
> 
> 标签：c#

有没有一种简单的方法可以告诉 EPPlus 一行是标题？或者我应该通过使用 SelectedRange 指定范围来创建标题，将其从工作表中删除并迭代剩余的单元格？

我最终这样做了：

```
class Program
{
    static void Main(string[] args)
    {
        DirectoryInfo outputDir = new DirectoryInfo(@"C:\testdump\excelimports");
        FileInfo existingFile = new FileInfo(outputDir.FullName + @"\Stormers.xlsx");
        Dictionary<string, string> arrColumnNames = new Dictionary<string,string>() { { "First Name", "" }, { "Last Name", "" }, { "Email Address", "" } };
        using (ExcelPackage package = new ExcelPackage(existingFile))
        {
            ExcelWorksheet sheet = package.Workbook.Worksheets[1];
            var q = from cell in sheet.Cells
                    where arrColumnNames.ContainsKey(cell.Value.ToString())
                    select cell;

            foreach (var c in q)
            {
                arrColumnNames[c.Value.ToString()] = c.Address;
            }
            foreach (var ck in arrColumnNames)
            {
                Console.WriteLine("{0} - {1}", ck.Key, ck.Value);
            }

            var qValues = from r in sheet.Cells
                          where !arrColumnNames.ContainsValue(r.Address.ToString())
                          select r;

            foreach (var r in qValues)
            {
                Console.WriteLine("{0} - {1}", r.Address, r.Value);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-31T16:20:28.713

我需要枚举标题并将所有列标题显示给我的最终用户。我以[Muhammad Mubashir](https://stackoverflow.com/questions/10278101/epplus-reading-column-headers/11840041#11840041)代码为基础，并将其更改/转换为扩展方法，并从中删除了硬编码的数字。

```
public static class ExcelWorksheetExtension
{
    public static string[] GetHeaderColumns(this ExcelWorksheet sheet)
    {
        List<string> columnNames = new List<string>();
        foreach (var firstRowCell in sheet.Cells[sheet.Dimension.Start.Row, sheet.Dimension.Start.Column, 1, sheet.Dimension.End.Column]) 
            columnNames.Add(firstRowCell.Text);
        return columnNames.ToArray();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T19:47:42.220

我有一个类似的问题。以下是一些可能有帮助的代码：

```
using (var package = new ExcelPackage(fileStream))
{
    // Get the workbook in the file
    var workbook = package.Workbook;
    if (workbook != null && workbook.Worksheets.Any())
    {
        // Get the first worksheet
        var sheet = workbook.Worksheets.First();

        // Get header values
        var column1Header = sheet.Cells["A1"].GetValue<string>();
        var column2Header = sheet.Cells["B1"].GetValue<string>();

        // "A2:A" means "starting from A2 (1st col, 2nd row),
        // get me all populated cells in Column A" (yes, unusual range syntax)
        var firstColumnRows = sheet.Cells["A2:A"];

        // Loop through rows in the first column, get values based on offset
        foreach (var cell in firstColumnRows)
        {
            var column1CellValue = cell.GetValue<string>();
            var column2CellValue = cell.Offset(0, 1).GetValue<string>();
        }
    }
} 
```

如果有人知道比 更优雅的方式`cell.Offset`，请告诉我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T05:55:06.507

```
var pck = new OfficeOpenXml.ExcelPackage();
pck.Load(new System.IO.FileInfo(path).OpenRead());
var ws = pck.Workbook.Worksheets["Worksheet1"];
DataTable tbl = new DataTable();
var hasHeader = true;
foreach (var firstRowCell in ws.Cells[1, 1, 1, ws.Dimension.End.Column]){
      tbl.Columns.Add(hasHeader ? firstRowCell.Text : string.Format("Column {0}", firstRowCell.Start.Column));
}
var startRow = hasHeader ? 2 : 1;
for (var rowNum = startRow; rowNum <= ws.Dimension.End.Row; rowNum++){
     var wsRow = ws.Cells[rowNum, 1, rowNum, ws.Dimension.End.Column];
     var row = tbl.NewRow();
     foreach (var cell in wsRow){
           row[cell.Start.Column - 1] = cell.Text;
     }
     tbl.Rows.Add(row);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-25T08:01:05.637

我只是使用了[ndd](https://stackoverflow.com/questions/10278101/epplus-reading-column-headers/13162400#13162400)代码并使用 System Linq 对其进行了转换。

```
using System.Linq;
using OfficeOpenXml;

namespace Project.Extensions.Excel
{
    public static class ExcelWorksheetExtension
    {
        /// <summary>
        ///     Get Header row with EPPlus. 
        ///     <a href="https://stackoverflow.com/questions/10278101/epplus-reading-column-headers">
        ///         EPPlus Reading Column Headers
        ///     </a>
        /// </summary>
        /// <param name="sheet"></param>
        /// <returns>Array of headers</returns>
        public static string[] GetHeaderColumns(this ExcelWorksheet sheet)
        {
            return sheet.Cells[sheet.Dimension.Start.Row, sheet.Dimension.Start.Column, 1, sheet.Dimension.End.Column]
                .Select(firstRowCell => firstRowCell.Text).ToArray();
        }
    }
} 
```

# ios - iOS 用户体验指南 - 登录/注册对话框

> ID：10278111
> 
> 赞同：2
> 
> 时间：2012-04-23T09:40:16.673
> 
> 标签：ios, user-experience

我认为[Apple iOS 用户体验指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006556-CH1-SW1)将包括有关提供登录/注册对话框（在两者之间切换等）的建议。我找不到任何东西。有谁知道这方面的建议是否存在，如果有，您能否提供这些建议的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:16:55.343

我认为您不会找到任何与您正在寻找的东西一样具体的东西。如果对所有内容都有指导/限制，那么每个应用程序看起来都一样。

您提到的文档中有一个部分讨论了[警报、操作表和模态视图](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW39)。它有一些关于这些界面元素的更一般的有用信息（您可以使用这些元素来创建所需的登录和注册对话框）。

如果您正在寻找更多彩色登录和注册屏幕的灵感，请查看其中一些非常适合 iOS 平台的设计[。](http://www.webdesignshock.com/login-design/)

如果这还不够，请查看一些现有的应用程序以获取灵感。

我在登录和注册对话框（通常）方面给出的唯一建议是不要向用户询问太多信息。一个电子邮件地址和一个密码就足够了。如果您要求更多信息，我可以保证注册率会受到影响。在人们短时间使用移动设备的移动环境中，情况更是如此。在此人注册后，您始终可以收集更多信息（如果您需要）。

**资料来源：**人机交互和移动交互设计背景。

# iphone - iPhone - UIView 内的 UIScrollView 不滚动

> ID：10278112
> 
> 赞同：12
> 
> 时间：2012-04-23T09:40:19.460
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollview

我有一个`UIView`包含很多标签、按钮、文本视图。`UIView`但是我想让其中的某个部分可滚动。这是我的笔尖的结构。

```
-UIVIew
-UIImageView - backgroundImage
-UILabels
-UIButtons
-UIScrollView
-UITextViews 
```

触摸事件是否被分配到其他地方？这是我写的滚动视图的代码`viewDidLoad`。我只希望里面的 textview`UIScrollview`可以滚动

```
scrollView.delegate = self;    
[scrollView setCanCancelContentTouches:NO];
scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
scrollView.clipsToBounds = YES;
scrollView.scrollEnabled = YES;
scrollView.pagingEnabled = YES;
scrollView.autoresizesSubviews=YES;
[scrollView setContentMode:UIViewContentModeScaleAspectFit];
[scrollView addSubview:textview]; 
```

我错过了什么吗？我的方法对吗？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T09:47:36.380

`scroll.contentSize= CGSizeMake(320,2700);`// 你可以根据自己的要求使用 contentsize

你在这里只放了滚动视图代码。所以，我无法弄清楚出了什么问题。使用以下参考...

[UIScrollView 与 UITextField](http://www.edumobile.org/iphone/iphone-programming-tutorials/scrollview-example-in-iphone/)

希望对你有帮助..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T09:41:12.377

```
[scrollView setContentSize:theSizeYouWantToScroll] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:43:18.667

您最好让编译器计算出高度，而不是自己设置。

```
CGFloat height = 0;
for (UIView *v in _scrollView.subviews) {
    height += v.frame.size.height;
}

_scrollView.contentSize = CGSizeMake(self.view.frame.size.width, height); 
```

# tsql - 如何根据布尔字段在一个列中获取两列值

> ID：10278116
> 
> 赞同：0
> 
> 时间：2012-04-23T09:40:32.830
> 
> 标签：tsql, sql-server-2005, stored-procedures, foreign-keys

我正在使用 SQL Server 2005。我有 3 个表

**产品**

```
PId   |   PName 
```

**服务**

```
SId   |   SName 
```

**账单**

```
BId   |   TypeId   |   IsService 
```

TypeId 是 PId 或 SId。基于 IsService 字段。

如果`IsService`为 1，则 TypeId 为 SId，如果`IsService`为 0，则 TypeId 为 PId

我想用 Bill 获取 PName 和 SName，我该怎么做？

我正在考虑为此编写存储过程..并将动态列添加到存储过程中，该列根据 IsService 包含 SName 或 PName。

但是也不知道怎么写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:46:30.287

也许是这样的：

```
SELECT
    Bill.*,
    CASE 
        WHEN Bill.IsService=1
        THEN Service.SName
        ELSE Product.PName
    END AS Name
FROM
    Bill
    LEFT JOIN Service
        ON Bill.TypeId=Service.SId
    LEFT JOIN Product
        ON Product.TypeId=Bill.BId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:10:41.213

```
SELECT 
    t.BId,
    tt.Name
FROM Bill t
Outer Apply
(
    SELECT PName AS name FROM Product   WHERE 0 = t.IsService AND PId = t.TypeId
    UNION ALL
    SELECT SName AS name FROM Servicess WHERE 1 = t.IsService AND SId = t.TypeId
) tt 
```

# html - 我的输入标签不会与我的输入类型 = 文本对齐

> ID：10278118
> 
> 赞同：1
> 
> 时间：2012-04-23T09:40:38.447
> 
> 标签：html, css, layout

我正在尝试将浮动标签与浮动输入字段对齐。当然，我一直在四处寻找，但没有可用的答案帮助我。

在这里找到它：[jsfiddle](http://jsfiddle.net/AGV6G/1/)

问题与我为 body-tag 设置的字体大小有关。去掉它，你会看到标签和输入是垂直对齐的。

我该如何解决这个问题（不删除正文的字体大小样式，我的整个应用程序都依赖于这个）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:49:01.227

既然你有一个字段列表，我会将每一对都包装`label + field`在 a中，从而像这样对元素`list-item`应用基本清除`<li>`

```
#addagentform li {
   height: auto; overflow: hidden;
} 
```

你达到了效果。见小提琴：http: [//jsfiddle.net/AGV6G/6/](http://jsfiddle.net/AGV6G/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:21:20.110

无需复杂且容易出错的浮动，只需使用一个简单且符合逻辑的表格，其中一列中包含标签，另一列中包含相应的输入项，您将立即完成工作。这也将解决现在标签离输入项非常非常远的问题。

```
<form ...>
<table>
  <tr><td><label for="firstname">*Förnamn:</label> 
      <td><input type="text" name="firstname" id="firstname">
  <tr>...
</table>
</form> 
```

# ruby-on-rails - 运行时错误 - 在 Rails 3 项目中称为 nil 的 id

> ID：10278120
> 
> 赞同：1
> 
> 时间：2012-04-23T09:41:01.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

当我尝试提交表单 (/POSTS/SHOW) 时出现此错误：

```
RuntimeError in Posts#show

Showing /Users/fkhalid2008/loand/app/views/posts/show.html.erb where line #1 raised:

Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id
Extracted source (around line #1):

1: <%= form_remote_tag (:update => 'message', :url => {:controller => 'main', :action => 'send_message', :user_id => @post.user.id}) do %>
2: <br>
3: <br />
4: <br /> 
```

我该如何解决？

相关代码如下：

**/观点/帖子/节目**

```
<%= form_remote_tag (:update => 'message', :url => {:controller => 'main', :action => 'send_message', :user_id => @post.user.id}) do %>
<br>
<br />
<br />
<div class="field"> 
```

你好！我的名字是 <%= f.text_field :subject %>，我正在与您联系以回应您的广告。我有兴趣了解更多，所以取得联系！这是我的联系方式：<%= f.text_field :body %>。提交 <% end %>

**后模型**

```
class Post < ActiveRecord::Base

belongs_to :user

attr_accessible :title, :job, :location, :salary

validates :title, :job, :location, :salary, :presence => true 
validates :salary, :numericality => {:greater_than_or_equal_to => 1} 

default_scope :order => 'posts.created_at DESC'
end 
```

**用户模型**

```
class User < ActiveRecord::Base

has_many :posts  
has_one :profile
has_private_messages

attr_accessible :email

validates_presence_of :email
validates_uniqueness_of :email, :message =>"Hmm, that email's already taken"
validates_format_of :email, :with => /^([^\s]+)((?:[-a-z0-9]\.)[a-z]{2,})$/i, :message => "Hi! Please use a valid email"

end 
```

**帖子控制器**

```
def show
@post = Post.find(params[:id]) 

respond_to do |format|
  format.html # show.html.erb
  format.json { render :json => @post }
end
end

def new
@post = Post.new
@post.user = current_user

respond_to do |format|
  format.html # new.html.erb
  format.json { render :json => @post }
end
end

def edit
@post = Post.find(params[:id])
end

def create
    @post = Post.new(params[:post])
    @post.user = current_user

    respond_to do |format|
        if verify_recaptcha && @post.save
            format.html { redirect_to :action=> "index"}
            format.json { render :json => @post, :status => :created, :location => @post }
        else
            format.html { render :action => "new" }
            format.json { render :json => @post.errors, :status => :unprocessable_entity }
        end
    end
end

def update
@post = Post.find(params[:id])
@post.user = current_user

respond_to do |format|
  if @post.update_attributes(params[:post])
    format.html { redirect_to @post, :notice => 'Post was successfully updated.' }
    format.json { head :ok }
  else
    format.html { render :action => "edit" }
    format.json { render :json => @post.errors, :status => :unprocessable_entity }
  end
end
end 
```

**应用程序控制器（这是我定义 current_user 的地方）**

```
class ApplicationController < ActionController::Base
protect_from_forgery

private

def current_user
    @_current_user ||= session[:current_user_id] &&
    User.find_by_id(session[:current_user_id])
end

end 
```

**主控制器（send_message 在这里定义）**

```
class MainController < ApplicationController

def send_message
message = Message.new
message.subject = params[:subject]
message.body = params[:message]
message.sender = User.find session[:user]
message.recipient = User.find params[:user_id]
if message.save
  ContactMailer.deliver_message_email message.recipient.email, message.id, request.host
  return redirect_to "/posts"
else
  render :text => "Hmm. Something seems to be wrong...let me look into it"
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:45:43.250

您收到错误是`@post.user`因为`nil`在`:user_id => @post.user.id`.

确保您`@post`在后期控制器的显示操作中定义并且它具有有效的用户关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:51:52.383

您没有将用户分配给由 @post 实例变量表示的帖子记录。

大概用户需要登录才能发帖？也可能你在某处定义了当前用户？

使用此表单的控制器操作需要将用户分配给发布记录

```
def new
  @post = Post.new
  @post.user = current_user # You will need to get the current user from somewhere
  respond_to do |format|
    format.html # new.html.erb
    format.json { render :json => @post }
  end
end 
```

**更新**

为了确保您当前的用户被分配，您应该添加一个检查以确保用户在控制器操作中登录。这通常是通过添加一个 before 过滤器来授权当前用户，如果当前用户退出，它将重定向回登录页面。看看这个 rails cast 来解释登录和注销以及在过滤器之前重定向[http://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)

这里有演员表的修订版，但您需要订阅 [http://railscasts.com/episodes/250-authentication-from-scratch-revised](http://railscasts.com/episodes/250-authentication-from-scratch-revised)

值得为 IMO 支付费用

**更新结束**

您将需要/还应该在更新帖子记录的任何操作中分配当前用户 - 即以完全相同的方式创建和更新操作。

此外，由于您没有将用户分配给发布记录，因此您需要在表单中处理这种情况，以免出现 500 错误

您可以使用@post.user.blank？布尔检查以帮助您解决此问题

```
<% if @post.user.blank? %>
  <h2>There is no user assigned to this post record! This should never happen ad you should never see this message, please contact support if etc... </h2>
<% else %>
<!-- Place all your current form code here -->
<% end %> 
```

# validation - WIF - 检测到潜在危险的 Request.Form 值

> ID：10278123
> 
> 赞同：1
> 
> 时间：2012-04-23T09:41:24.877
> 
> 标签：validation, asp.net-3.5, asp.net-4.0, wif

我得到错误：

> 从客户端检测到潜在危险的 Request.Form 值（wresult="

我在我的 .NET 4.0 网站中使用了 WIF，并使用

```
<httpRuntime requestValidationType="Namespace.FederatedRequestValidator"/> 
```

这使我可以处理验证，并且没有问题。

我现在想在 VS 2008 的 .NET 3.5 应用程序中使用 WIF，但是上面的配置无效，而且 .NET 3.5 似乎没有`System.Web.Util.FederatedRequestValidator`

我怎样才能绕过这个错误，最好不要关闭验证。如果我需要关闭验证，在 VS 2008 .NET 3.5 中实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:44:08.677

我最终创建了一个登录 .aspx 页面，它是回复方和 STS 之间的“中间人”。调用该页面，并从 URL 中提取任何额外参数，然后使用登录页面 .aspx 作为返回 url 重定向到 STS。

然后我创建了那个页面，只有那个页面忽略了验证，这不是问题，因为该页面除了调用并从 STS 返回之外什么都不做。

# c# - 其他电脑上的 wcf ssl 客户端

> ID：10278125
> 
> 赞同：0
> 
> 时间：2012-04-23T09:41:35.680
> 
> 标签：c#, wcf

我在服务器 PC 上的 WCF 中构建了一个 web 服务。我已经创建了一个 https 端点并配置了一些本地证书。现在在网络上，我正在尝试创建一个 C# 控制台客户端来测试服务。但我收到此错误：未处理的异常：System.ServiceModel.Security.SecurityNegotiationException：调用者未通过服务进行身份验证。---> System.ServiceModel.FaultE 异常：无法满足对安全令牌的请求，因为身份验证失败。（以及更多）..

这是我要连接到的端点的代码：

[http://pastebin.com/GGe6YaTb](http://pastebin.com/GGe6YaTb)

这将是我的客户：

```
 <bindings>
        <wsHttpBinding>
            <binding name="WebDataServiceHttpBinding" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="TransportWithMessageCredential">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="https://anlocalip:9651/WebDataService" binding="wsHttpBinding"
            bindingConfiguration="WebDataServiceHttpBinding" contract="wcf1.IWebDataService"
            name="WebDataServiceHttpBinding">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

我无法摆脱这个错误，有人可以帮助我吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:56:42.947

您可能需要**在客户端单元中安装/导入证书**。

> ## [如何使用 c# 以编程方式将证书安装到本地机器存储中？](https://stackoverflow.com/questions/566570/how-can-i-install-a-certificate-into-the-local-machine-store-programmatically-us)
> ^(stackoverflow.com)
> 
> 我有一个通过 MakeCert 生成的证书。我想使用 PeerTrust 将此证书用于 WCF 消息安全性。如何使用 c# 或 .NET 以编程方式将证书安装到“受信任的人”本地计算机证书存储中？

> ## ^(将证书安装到 C# stackoverflow.com)[中的 Windows 本地用户证书存储中](https://stackoverflow.com/questions/308554/install-certificates-in-to-the-windows-local-user-certificate-store-in-c-sharp)
> 
> 我正在编写一个 Windows 服务，它需要证书存储中的多个证书才能连接到第三方 Web 服务......

或者**使用证书来保护服务**。

> ## [如何：使用 X.509 证书保护服务](http://msdn.microsoft.com/en-us/library/ms788968.aspx)
> ^(msdn.microsoft.com)
> 
> 使用 X.509 证书保护服务是 Windows Communication Foundation (WCF) 中的大多数绑定使用的一项基本技术。本主题介绍了使用 X.509 证书配置自托管服务的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:21:31.407

在打开代理之前尝试设置模拟级别：

```
serviceProxy.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;
serviceProxy.Open(); 
```

# javascript - jQuery 类选择器：有还是没有标记名？

> ID：10278128
> 
> 赞同：3
> 
> 时间：2012-04-23T09:41:45.103
> 
> 标签：javascript, jquery

我试图找到一个老问题的明确答案“在选择课程时我应该使用标签名称吗？”

我在网上到处寻找 jQuery 最佳实践，几乎总是有使用 jQuery("tag.className"); 的意义。因为这首先使用 getElementByTagName。

所以我在 jsPerf 上设置了一个基准来检查。我使用了我网站上的源标记，因此它更像是一个真实世界的测试，并在所有现代浏览器上运行基准测试，除了 Chrome 和 Opera，所有其他现代浏览器都说 jQuery(".className"); 速度要快一个数量级，尽管这与我在在线书籍和教程中阅读的几乎所有内容背道而驰。我认为它更快，因为这些浏览器本身支持 getElementByClassName。

这是基准：

[http://jsperf.com/length-detection](http://jsperf.com/length-detection)

你认为什么是最好的？

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:02:52.613

如果您真的追求性能，则根本不应该使用 jQuery 来查询元素。看到这个 jsperf：http: [//jsperf.com/jquery-selecting-by-class](http://jsperf.com/jquery-selecting-by-class)

在那里我们可以谈论“数量”。老实说，如果不查看当前的 jQuery 源代码，我不知道 jQuery 在幕后做了什么。即使它正在使用`getElementsByClassNames`，由于 jQuery 带来的所有血液和开销，它对整体性能的影响也很小甚至为零。无论如何，查询元素的基本规则很简单：*不要过于具体*。CSS 选择器从右到左工作，所以当我们有类似的查询时`element.classname`，大多数引擎会首先抓取类名为的所有元素，`classname`然后过滤掉也属于的元素类型的节点`element`。

# macos - 如何调用插件主体类以外的类的方法

> ID：10278130
> 
> 赞同：1
> 
> 时间：2012-04-23T09:42:10.963
> 
> 标签：macos, cocoa, bundle

我创建了一个插件，并有一些名为 PluginPrincipalClass、ClassOne 和 ClassTwo 的 3 个类。我的类中有以下代码片段。

```
#import <Cocoa/Cocoa.h>

@interface PluginPrincipalClass : NSObject

@end

#import "PluginPrincipalClass.h"

@implementation PluginPrincipalClass

- (NSInteger)getDownloadPercentage
{
    NSLog(@"getDownloadPercentage");
    return 10;
}

- (void)downloadSoftwareUpdate
{
     NSLog(@"downloadSoftwareUpdate");
}

@end

#import <Cocoa/Cocoa.h>

@interface ClassOne : NSObject

@end

#import "ClassOneh"

@implementation ClassOne

- (void)ClassOneMethod
{
    NSLog(@"ClassOneMethod");

}    
@end

#import <Cocoa/Cocoa.h>

@interface ClassTwo : NSObject

@end

#import "ClassTwo.h"

@implementation ClassTwo

- (void)ClassTwoMethod
{
    NSLog(@"ClassTwoMethod");

}

@end 
```

在我的 BaseApplication 中加载插件并调用主体类，我有以下代码片段

```
NSString *zStrPlugInsPath = [[NSBundle mainBundle] builtInPlugInsPath];
NSArray *zAryBundlePaths = [NSBundle pathsForResourcesOfType:@"plugin"
                                                 inDirectory:zStrPlugInsPath];
NSString * zStrPathToPlugin = [zAryBundlePaths lastObject];
NSBundle *znsBundlePlugin = [NSBundle bundleWithPath:zStrPathToPlugin];

// instantiate the principal class and call the method
Class zPrincipalClass = [znsBundlePlugin principalClass];
id zPrincipalClassObj = [[zPrincipalClass alloc]init];

NSInteger downloadPer = [zPrincipalClassObj getDownloadPercentage];

NSLog(@"downloadPer  = %ld",downloadPer);

[zPrincipalClassObj downloadSoftwareUpdate]; 
```

这工作正常。如果我想调用 ClassOne 或 ClassTwo 的方法。如何从我的基础应用程序实例化和调用这些方法。是否类似于创建对象 ClassOne 并使用该对象调用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:17:27.080

我（如果我正确理解你的问题），你想使用 NSBundle 的`classNamed:`方法 :)

像这样：

```
Class zSecondaryClass = [znsBundlePlugin classNamed: @"StudentClass"]; 
```

# facebook - facebook查询页面按喜欢排序

> ID：10278133
> 
> 赞同：0
> 
> 时间：2012-04-23T09:42:13.677
> 
> 标签：facebook, search, facebook-fql

我正在寻找一种方法来查询例如与食物有关的 facebook 页面。

不难；）

```
$pages = $facebook->api('search?q=food&type=page'); 
```

但是......我想获得该类别中最大的页面（最喜欢）。搜索已关闭，但我无法影响退货单（我认为）。

我一直在看这里：[https](https://developers.facebook.com/docs/reference/fql/page/) ://developers.facebook.com/docs/reference/fql/page/ 看看我是否可以让它与查询一起工作，但似乎我只能查询有关特定页面的信息。

我一直在寻找几种没有成功的解决方案。这甚至可能吗？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:54:16.150

这个怎么样：

向“ [search?q=food&type=page](http://developers.facebook.com/tools/explorer?method=GET&path=search%3Fq%3Dfood%26type%3Dpage) ”发出请求，然后获取结果并对其进行迭代。

对于每个结果，进行以下 FQL 查询：

```
SELECT 
    name, username, fan_count 
FROM 
    page 
WHERE 
    page_id="ITERATION_PAGE_ID" 
```

例如，我得到的第一个结果的 id 为“25255939006”，FQL 将是：

> [从页面 WHERE page_id="25255939006" 选择名称、用户名、fan_count](http://developers.facebook.com/tools/explorer?method=GET&path=fql?q=SELECT%20name,%20username,%20fan_count%20FROM%20page%20WHERE%20page_id=%2225255939006%22)

结果是：

```
{
  "data": [
    {
      "name": "Food", 
      "username": "", 
      "fan_count": 146291
    }
  ]
} 
```

希望这就是你所追求的。

# c++ - 包含自身实例化的模板，C++ 中的递归

> ID：10278135
> 
> 赞同：3
> 
> 时间：2012-04-23T09:42:24.817
> 
> 标签：c++, templates, recursion

非常快速的问题，假设我有一个模板：

```
template <class T>
class foo {

 private:
   T SubFoo;
  ...

}; 
```

然后我有类似的东西：

```
 foo < foo < int > > myFoo; 
```

效果很好。在这种情况下， myFoo 将有一个名为 myFoo.SubFoo 的成员，其类型为`foo < int >`。

我想在 myFoo.SubFoo 中有一个指向 myFoo 的指针。我不知道如何正确调用它，它是指向整个母类 myFoo 的 SubFoo 的类成员指针。这可能吗？我试图包括声明：

```
template <class T>
class foo {

 private:
  ...
   T SubFoo;
   foo< foo < T > >* p2mother; 
  ...

}; 
```

但这似乎不起作用。

一般来说，我正在做的是建立一个递归结构。在递归中传递通信很容易，但我发现“向上”时遇到了麻烦。也许我一开始就设计错了。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:27:43.853

更一般的情况（这在 g++ 中有效）：

```
template <class T>
struct foo {

 //...
 T SubFoo;
 foo* p2mother; 
 //...
};

foo< int > simple;
foo< foo< int > > complex;

int main() {

  simple.p2mother = &simple;
  complex.p2mother = &complex;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:23:33.780

（而不是评论）这适用于VS2010，gcc-4.3.4

```
template <class T>
struct foo {
   T SubFoo;
   foo< foo < T > >* p2mother; 
};

foo<int> foo_instance;

foo<foo<int> > foo_foo_instance;

int main()
{
  foo_instance.p2mother= &foo_foo_instance;
} 
```

# excel - 在Excel中连接单元格忽略空白单元格

> ID：10278138
> 
> 赞同：2
> 
> 时间：2012-04-23T09:42:39.150
> 
> 标签：excel, if-statement, concatenation

我已经搜索了该站点，但似乎看不到任何适合我的问题的内容。

我有 7 列

用户 ID 会话 1 会话 2 会话 3 会话 4 会话 5 会话 6

在会话 1-6 中，将有一个 P 或 A 来表示用户是“在场”还是“不在场”。基于此主数据，我在其右侧创建了另外 6 个列，它们将具有相同的标题并输入 IF 语句来表示 =IF(B2="P","",B$1) 以便显示会话如果用户不在该会话中，则为 ID。

然后，我需要让所有用户在一列中缺席会话，并且需要用逗号分隔。我无法解决的是如何在没有重复逗号的情况下获得此单元格为空白的。

有任何想法吗？

谢谢詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:53:57.337

获取链接[C Pearson Concatenation page](http://www.cpearson.com/excel/stringconcatenation.aspx)中给出的 StringConcat UDF 。从头到尾复制代码`Function StringConcat(Sep As String, ParamArray Args()) As Variant`，并将其粘贴到 VBA 中的通用模块中。如果您不知道如何执行此操作，请参阅[此链接，该链接解释了这一切。](http://www.rondebruin.nl/code.htm#General)

此 UDF 将忽略空格，并将任何给定范围与您选择的分隔符/定界符连接起来。

然后你的解决方案就变成了

`=StringConcat(", ",H2:M2)`

如果有不清楚的地方，请告诉我。

## 替代解决方案：

或者，如下修改您的公式。

在单元格中，输入以下公式`H2`，而不是`=IF(B2="P","",B$1)`

```
=IF(B2="A",B$1&", ","") 
```

将此公式复制到 M2，并根据需要向下复制任意数量的行。现在，在单元格 N2 中，输入以下公式：

```
=IF(LEN(H2&I2&J2&K2&L2&M2)>2,LEFT(H2&I2&J2&K2&L2&M2,LEN(H2&I2&J2&K2&L2&M2)-2),"") 
```

希望这可以帮助。

# javascript - jquery settimeout 和 .focus() 一起在 Firefox 浏览器中不起作用

> ID：10278139
> 
> 赞同：1
> 
> 时间：2012-04-23T09:42:39.117
> 
> 标签：javascript, jquery, error-handling, focus, settimeout

我有一个表单，当提交时（空字段）在前端 jsp 中显示 spring 验证错误。我需要将显示集中在前端显示的第一条错误消息中。从表单生成的代码（通过查看源代码）：例如 div 元素中包含的 2 条错误消息。我需要将其重点放在第一条错误消息上。

```
 <div id="userid.errors" class="lp">User id is missing</div>
      <div id="age.errors" class="lp">age is missing</div> 
```

我尝试了下面的 jquery 代码，但它只在 IE 中有效，在 firefox 中无效。在 firefox 中，即使 css 样式处理得当，焦点也不起作用。

我确信语法和逻辑是正确的 - 有人可以帮我修复它以用于 Firefox 浏览器吗？

```
<script type="text/javascript" src="/scripts/jquery.min.js"></script>
<script type="text/javascript" src="/scripts/jquery.validate.js"></script>

 <script type="text/javascript">

 $(document).ready(function() {
$("[id$='.errors']:first").css("background-color","#FFFFCC");
     setTimeout(function(){
     $("[id$='.errors']:first").focus();
    },300);

 });
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:25:48.027

我不明白你为什么要关注一个 div 以及你所期望的，通常你不能关注一个 div，但你可以这样做，

```
$(document).ready(function() {
$("[id$='.errors']:first").css("background-color","#FFFFCC");
     setTimeout(function(){
         $("[id$='.errors']:first").attr("tabindex",-1).focus();
         alert(document.activeElement.innerHTML+ "is focussed");
    },300);
 });​​ 
```

[http://jsfiddle.net/x7euD/3/](http://jsfiddle.net/x7euD/3/)

# c++ - 为什么编译器不抛出编译错误？

> ID：10278144
> 
> 赞同：1
> 
> 时间：2012-04-23T09:43:11.880
> 
> 标签：c++, templates

为什么编译器允许这样做？

```
#include <iostream>
using namespace std;

template<typename T>
void func(T t)
{
    cout<<"The value is :"<<t<<"\n";
}

template<>
void func<int>(int d)    //Template Specialization
{
    cout<<"Template function\n";
}

void func(int d)        //Non-template function with same name & signature
{
    cout<<"Non-template function\n";
}

int main()
{
    func(4);
    func(4.67);
    func("TENE");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:51:39.580

因为这段代码是完全合法的。有关解析规则，请参阅[本文](http://www.gotw.ca/publications/mill17.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T10:12:52.507

问题的答案在第 13.3.3 节

> 鉴于这些定义，如果对于所有参数 i，ICSi(F1) 不是比 ICSi(F2) 更差的转换序列，则可行函数 F1 被定义为比另一个可行函数 F2*更好*的函数，然后
> 
> — 对于某些参数 j，ICSj(F1) 是比 ICSj(F2) 更好的转换序列，或者，如果不是，
> 
> — F1 是非模板函数，F2 是函数模板特化，或者，如果不是，
> 
> — F1 和 F2 是函数模板特化，根据 14.5.5.2 中描述的偏序规则，F1 的函数模板比​​ F2 的模板更特化，或者，如果不是这样，......

所以在三个选择（non-templated `func`、 specialization of`func<int>`和generic template `func<typename T>`）中，non-template 版本`func`是最好的。由于这里完美匹配，编译器没有理由甚至查看模板版本的功能。

# javascript - Symfony2：如何检查和显示网站上启用/禁用的 javascript

> ID：10278145
> 
> 赞同：0
> 
> 时间：2012-04-23T09:43:15.500
> 
> 标签：javascript, symfony

我需要检查每个页面上的网站是否启用了 javascript。除了 html 元素之外，要考虑的最佳实践是什么？具体是如何使用 symfony2 完成的？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:52:07.193

这与 Symfony2 或任何 php 框架或任何服务器端语言无关。

您只需要在您的 html 布局中执行此操作。

最佳做法是始终将您的页面设置为**禁用**javascript ，然后再启用它。

通常通过使用此代码段来完成。

```
<html class="no-js" ="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript">
    //<![CDATA[
      (function(H){H.className=H.className.replace(/\bno-js\b/,'js');})(document.documentElement);
    //]]>
    </script>
</head>
<body></body>
</html> 
```

# javascript - 双击移动 Safari

> ID：10278147
> 
> 赞同：8
> 
> 时间：2012-04-23T09:43:17.823
> 
> 标签：javascript, iphone, ipad, mobile-safari

有没有办法绑定到移动 safari 的双击事件（在一行代码中）？或者，另一种方法是实现它拦截在短时间内发生的两个单击事件（例如：[http](http://appcropolis.com/blog/implementing-doubletap-on-iphones-and-ipads/) ://appcropolis.com/blog/implementing-doubletap-on-iphones-and-ipads/ ）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T23:17:05.440

**简短的回答：**您必须通过两次点击来实施。

**实际答案：**这是用于移动 safari 的双击的无 jQuery 实现，只需要一行代码（启用 dblclick 事件）：

*   [https://gist.github.com/2927073](https://gist.github.com/2927073)

此外，您可能需要使用此元标记[禁用移动 Safari 的默认缩放：](https://stackoverflow.com/questions/4389932/how-do-you-disable-viewport-zooming-on-mobile-safari)

```
<meta name="viewport" content="width=device-width,user-scalable=no" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-25T09:16:26.090

如果你想在浏览器和 IOS 平台上双击都可以工作，你应该有以下代码：

```
jQuery.event.special.dblclick = {
    setup: function(data, namespaces) {
        var agent = navigator.userAgent.toLowerCase();
        if (agent.indexOf('iphone') >= 0 || agent.indexOf('ipad') >= 0 || agent.indexOf('ipod') >= 0) {
            var elem = this,
                $elem = jQuery(elem);
            $elem.bind('touchend.dblclick', jQuery.event.special.dblclick.handler);
        } else {
            var elem = this,
                $elem = jQuery(elem);
            $elem.bind('click.dblclick', jQuery.event.special.dblclick.handler);
        }
    },
    teardown: function(namespaces) {
        var agent = navigator.userAgent.toLowerCase();
        if (agent.indexOf('iphone') >= 0 || agent.indexOf('ipad') >= 0 || agent.indexOf('ipod') >= 0) {
            var elem = this,
                $elem = jQuery(elem);
            $elem.unbind('touchend.dblclick');
        } else {
            var elem = this,
                $elem = jQuery(elem);
            $elem.unbind('click.dblclick', jQuery.event.special.dblclick.handler);
        }
    },
    handler: function(event) {
        var elem = event.target,
            $elem = jQuery(elem),
            lastTouch = $elem.data('lastTouch') || 0,
            now = new Date().getTime();
        var delta = now - lastTouch;
        if (delta > 20 && delta < 500) {
            $elem.data('lastTouch', 0);
            $elem.trigger('dblclick');
        } else {
            $elem.data('lastTouch', now);
        }
    }
}; 
```

在这里试试：

[http://jsfiddle.net/UXRF8/](http://jsfiddle.net/UXRF8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:53:02.167

覆盖`dblclick`事件并使用`bind`, `live`, `on`,`delegate`就像任何其他事件一样：

```
jQuery.event.special.dblclick = {
    setup: function(data, namespaces) {
        var elem = this,
            $elem = jQuery(elem);
        $elem.bind('touchend.dblclick', jQuery.event.special.dblclick.handler);
    },

    teardown: function(namespaces) {
        var elem = this,
            $elem = jQuery(elem);
        $elem.unbind('touchend.dblclick');
    },

    handler: function(event) {
        var elem = event.target,
            $elem = jQuery(elem),
            lastTouch = $elem.data('lastTouch') || 0,
            now = new Date().getTime();

        var delta = now - lastTouch;
        if(delta > 20 && delta<500){
            $elem.data('lastTouch', 0);
            $elem.trigger('dblclick');
        }else
            $elem.data('lastTouch', now);
    }
}; 
```

# git - Git子树错误

> ID：10278148
> 
> 赞同：0
> 
> 时间：2012-04-23T09:43:21.710
> 
> 标签：git, macos, osx-lion, git-subtree

我尝试在 Mac 上安装[git-subtree](https://github.com/apenwarr/git-subtree)并在第一步之后：

```
cp git-subtree.sh "$(git --exec-path)"/git-subtree 
```

当我尝试使用 git-subtree 我总是得到一个错误：

```
sudo git subtree split -P ObjectiveBlip export 
fatal: cannot exec 'git-subtree': Operation not permitted 
```

我的 git 版本是 1.7.7.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:38:22.607

我用`xattr -d com.apple.quarantine git-subtree`.

# css - CSS 缩放变换和 z-index

> ID：10278149
> 
> 赞同：1
> 
> 时间：2012-04-23T09:43:22.823
> 
> 标签：css, css-transforms

我有一个 div，它在悬停时会放大 - 这一切都很好，看起来很棒。

但是，如果我悬停的 div 之一靠近容器的边缘，则缩放的 div 不会覆盖。

图片：

悬停前：

![](../Images/22a8a67bbb958adeda2a171d1f4b410f.png)

悬停时：

![在此处输入图像描述](../Images/f1c03b4e31aede600038cacc4c9d435c.png)

如您所见，增大的 div 位于灰色 div 的后面。我尝试过使用 z-index 值，但在这种情况下似乎没有效果。

这可能使用css转换还是我必须使用不同的方法

谢谢啊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:48:06.383

这是一个简单的css问题。您希望显示文档树中 div 内的内容，即使它们在视觉上位于 div 之外。这就是他们所说的溢出，所以：

```
div.outer
{
    overflow: visible;
} 
```

# c# - 如何在 LINQ 中使用 group by？

> ID：10278151
> 
> 赞同：0
> 
> 时间：2012-04-23T09:43:27.913
> 
> 标签：c#

如何在 LINQ 中使用 group by？我想通过 linq 对 C# 中的表的两个字段进行分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:00:44.640

```
var query =
    from t in db.tableName    
    group t by new { t.column1, t.column2 } into g
    select new { g.Key.column1, g.Key.column2 }; 
```

# android - android动画：淡出一个视图并移动它下面的视图以使用平滑动画填充它的空间

> ID：10278154
> 
> 赞同：1
> 
> 时间：2012-04-23T09:43:40.020
> 
> 标签：android, animation

在我的布局中，我有 3 个视图，它们垂直放置在彼此之上

```
view1 
view2
view3 
```

如果用户单击 view1 它应该淡出，当淡出完成时 view2 和 view3 应该向上移动以平滑地填充它
我知道如何为 view1 制作淡出动画并且我知道有一个侦听器来指示动画已完成，但我无法向上移动 view2 和 view3 以平滑地填充剩余空间。也许这是一个简单的问题，也许之前发布过，但我找不到。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:46:12.870

也许您可以尝试：

```
view1.startAnimation( /* your animation */ );
view1.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:48:20.137

```
Animation animationPrevious = AnimationUtils.loadAnimation(this, R.anim.//ur animation type comes here//);
view.startAnimation(animationPrevious); 
```

# android - Android：相机预览旋转

> ID：10278155
> 
> 赞同：1
> 
> 时间：2012-04-23T09:43:41.437
> 
> 标签：android, android-camera

我在我的应用程序中遇到问题，我将其用于相机预览，但在相机预览中，即使是垂直站立的人似乎也水平站立......，我的预览中似乎遗漏了一些东西

```
mSurfaceView = (SurfaceView)findViewById(R.id.surface);
    mSurfaceHolder = mSurfaceView.getHolder();
    mSurfaceHolder.addCallback(this);
    mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
```

请帮帮我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:25:02.190

试试这个：http: [//developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation(int) (int )

我不确定您是说预览不正确，还是预览看起来不错而保存的图片有误。上面的链接应该可以解决预览问题。

如果保存的 JPEG 不正确，试试这个： http: [//developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation(int) (int )

我只是复制并粘贴了两个代码块，它有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:55:20.743

当您从 Camera.Parameters 获取 SupportedPreviewSizes 时，如果您看到支持的 previewSize 具有 height <= width ，则表示相机驱动程序不支持纵向模式的 previewSize（高度 > 宽度）。你可以参考[这个](https://stackoverflow.com/questions/8007194/how-to-use-zxing-in-portrait-mode/9510480#9510480)来获取更多信息

# javascript - 使用 javascript 探测 clientCaps

> ID：10278161
> 
> 赞同：0
> 
> 时间：2012-04-23T09:43:55.110
> 
> 标签：javascript, internet-explorer

我正在尝试在 Javascript 中探测[clientCaps](http://code.google.com/p/jstricks/source/browse/trunk/clientcaps.html?r=2)对象（我对 MSIE 中的行为不太熟悉）。但运气不太好。

由于其他限制，我无法真正修改页面的 HTML，因此尝试动态添加元素。我正在使用的代码如下所示 - 我不断收到异常（对象不支持此属性或方法）。任何想法我做错了什么？

```
 var out="";
                    try {
                      var b = document.getElementsByTagName("body")[0];
                      var s = document.createElement("div");

                      // attempt 1 - exception
                      // s.id="oClientCaps";
                      // s.style.behaviour="url('#default#clientCaps')";
                      //
                      // attempt 2 - exception
                      // s.innerHTML='<a ID="oClientCaps" style="behavior:url(#default#clientcaps)"></a>';
                      //
                      // attempt 3 - exception
                      s.id="oClientCaps";
                      s.addBehavior ("#default#clientCaps");

                      b.appendChild(s);
                      var clids = Array('{7790769C-0471-11D2-AF11-00C04FA35D02}', // address bk
                          ...
                          '{08B0E5C0-4FCB-11CF-AAA5-00401C608500}'); // MS VM

                      for(i=0;i<clids.length;i++) {
                        if(oClientCaps.isComponentInstalled(clids[i],"ComponentID")){
                          out+=clsids[i] 
                             + oClientCaps.getComponentVersion(clids[i],"ComponentID") 
                             + '; ';
                        } else {
                          out+='N; '
                        }
                      }
                    } catch (e) {
                      out+="clientCaps failed";
                    }
                    return out; 
```

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:00:55.200

发现以下工作（虽然我不确定为什么其他方法失败）：

```
var b = document.getElementsByTagName("body")[0];
var s = document.createElement("div");
s.innerHTML="<div style='behavior:url(#default#clientCaps)' ID='oClientCaps' ></div>";
b.appendChild(s);
(etc) 
```

# ruby - Nokogiri 模式限制

> ID：10278162
> 
> 赞同：2
> 
> 时间：2012-04-23T09:43:56.523
> 
> 标签：ruby, xml, xsd, nokogiri

这应该工作吗？

当我使用

```
 <xs:pattern value="(!red|green|blue)"/> 
```

一切都很好，但使用：

```
<xs:pattern value="(?!red|green|blue)"/> 
```

（注意添加的“？”）

**编辑：在另一个 SO 问题中发现了这个，它也不起作用**：

```
^((?!red|green|blue)|((red|green|blue).+)).*$ 
```

两个原因：

```
/home/asdf/.rvm/gems/ruby-1.9.3-p125@tretti_order/gems/nokogiri-1.5.2/lib/nokogiri/xml/schema.rb:37:in `from_document': Element '{http://www.w3.org/2001/XMLSchema}pattern': The value '(?!red|green|blue' of the facet 'pattern' is not a valid regular expression. (Nokogiri::XML::SyntaxError)
    from /home/asdf/.rvm/gems/ruby-1.9.3-p125@tretti_order/gems/nokogiri-1.5.2/lib/nokogiri/xml/schema.rb:37:in `new'
    from /home/asdf/.rvm/gems/ruby-1.9.3-p125@tretti_order/gems/nokogiri-1.5.2/lib/nokogiri/xml/schema.rb:8:in `Schema'
    from xml_validate.rb:12:in `<main>' 
```

**语境：**

```
 <xs:simpleType name="attributeIdType">
    <xs:annotation>
      <xs:appinfo>Attribute Id Type.</xs:appinfo>
      <xs:documentation source="http://www.web3d.org/x3d/specifications/ISO-IEC-19775-1.2-X3D-AbstractSpecification/Part01/fieldsDef.html#SFDouble"/>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:whiteSpace value="collapse"/>
      <xs:pattern value="(?!red|green|blue)"/>
    </xs:restriction>
  </xs:simpleType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:25:45.817

您所拥有`(?!foo)`的称为[“零宽度负前瞻断言”](http://www.regular-expressions.info/lookaround.html)；它说“确保站在这个位置向前看，你*不能*匹配这个模式。”

根据[此页面](http://www.regular-expressions.info/xml.html)， XML Schema`pattern`不支持任何类型的环视（正面或负面，向前或向后）。

但是，既然你说，*“目的是确保如果一个字符串以它开头，`ABC_PRODUCT_`它只以某个字符串结尾。”* 你不需要环顾四周。你可以简单地这样做：

```
pattern="(foo|bar_(jim|jam)" 
```

这将匹配“foo”、“bar_jim”和“bar_jam”，但不匹配“bar_zzz”。

# ruby-on-rails - Gem 未安装，显示连接错误

> ID：10278174
> 
> 赞同：4
> 
> 时间：2012-04-23T09:45:10.317
> 
> 标签：ruby-on-rails, gem

当我在创建新的 gemset 后尝试像 bundler 或 rake 一样安装 gem 时，它没有安装，但是如果我安装旧版本，它对我来说工作正常。这是安装 gems 时的错误日志

`gem install rake`

`Fetching: rake-0.9.2.2.gem ( 7%)ERROR: While executing gem ... (Gem::RemoteFetcher::FetchError)` `too many connection resets (http://cachefly.mirrors.rubygems.org/gems/rake-0.9.2.2.gem)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:37:12.083

此问题是由 cachefly 服务器引起的。

似乎 ruby​​gems.org 上的人禁用了这个镜像，然后人们的下载能够继续成功。

rubygems.org 上有一个[讨论这个问题](http://help.rubygems.org/discussions/problems/1081-gem-install-problems-cannot-get-httpcacheflymirrorsrubygemsorg)的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:47:06.630

使用**[DevKit](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)**单独安装 gem。

**编辑**：

请检查您是否 curl 或 wget 该 URL：

wget [http://production.cf.rubygems.org/gems/rails-2.3.8.gem](http://production.cf.rubygems.org/gems/rails-2.3.8.gem)

curl -O [http://production.cf.rubygems.org/gems/rails-2.3.8.gem](http://production.cf.rubygems.org/gems/rails-2.3.8.gem)

如果不是，那么问题出在您的 Internet 连接、http 代理或提供商。

如果您的浏览器工作正常，可能是由于 HTTP 代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T03:07:40.363

`bundle install`当 Capistrano在远程服务器上运行时，我遇到了类似的问题。这似乎是由我未授权的项目中的 .rvmrc 文件引起的。

所以我所要做的就是通过 ssh 进入服务器，`cd`进入项目并接受 .rvmrc 配置文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T09:43:24.230

有类似的问题

```
gem install rails 
# after 5 minutes
WARNING:  Error fetching data: too many connection resets (http://production.s3.rubygems.org/latest_specs.4.8.gz)

gem install rails --source 'https://rubygems.org'
# after 5 minutes
WARNING:  Error fetching data: too many connection resets (http://production.s3.rubygems.org/latest_specs.4.8.gz) 
```

但是当我创建`Gemfile`

```
 source 'https://rubygems.org'
  gem 'rails', '3.2.13' 
```

并运行`bundle install`它

我的位置是英国伦敦

（还在[http://help.rubygems.org/discussions/problems/4494-too-many-connection-resets-when-gem-install-rails](http://help.rubygems.org/discussions/problems/4494-too-many-connection-resets-when-gem-install-rails)上创建了主题）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-10T21:17:14.463

始终检查您的计算机是否因为管理员权限（在 cmd、shell 或 ruby​​mine 中）而无法下载。

# php - 过滤器打开时如何更改变量

> ID：10278180
> 
> 赞同：0
> 
> 时间：2012-04-23T09:45:44.440
> 
> 标签：php, mysql, variables, permutation

你好我想在我的网站上为搜索引擎编写一个过滤器。现在我认为这将是使用简单过滤器的最佳方式。所以我的代码看起来像：

```
}else if ($filter_a === 1){
        $filter = "WHERE `a` LIKE '%$a%'";
}else if ($filter_b === 1){
        $filter = "WHERE `b` LIKE '%$b%'";
}else if ($filter_c === 1){
        $filter = "WHERE `c` LIKE '%$c%'";
...
}else if ( ($filter_a === 1) && ($filter_b === 1) ){
        $filter = "WHERE `a` LIKE '%$a%' AND `b` LIKE '%$b%'";
}else if ( ($filter_a === 1) && ($filter_c === 1) ){
        $filter = "WHERE `a` LIKE '%$a%' AND `c` LIKE '%$c%'";
... and so on 
```

问题是我有 5x`N`所以这个排列将是 120 possibilites`$filter`

有没有办法解决这个问题？如果有人可以帮助我，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:50:09.760

这条路怎么样？

```
if ($filter_a === 1) {
        $filter[] = "`a` LIKE '%$a%'";
}
if ($filter_b === 1) {
        $filter[] = "`b` LIKE '%$b%'";
}
if ($filter_c === 1) {
        $filter[] = "`c` LIKE '%$c%'";
}
$filter = "WHERE ".implode(" AND ", $filter); 
```

# eclipse - 如果测试方法使用 junit @Ignore 注释，则 eclipse 插件特别突出显示

> ID：10278185
> 
> 赞同：2
> 
> 时间：2012-04-23T09:46:07.090
> 
> 标签：eclipse, junit, plugins, highlight

我想知道是否有可用的 Eclipse 插件突出显示用 @Ignore 注释的 JUnit 测试方法（例如删除属于该方法的所有字符）。我用 Eclipse 设置、首选项 -> Java -> 编辑器 -> 语法着色（Java -> 注释）进行了尝试。它只允许调整所有注释的外观。

我不知道我是否有足够的睡眠，但我试图执行一种测试方法几分钟，并且想知道为什么 Eclipse 不跳入调试模式。我认识到测试方法是用@Ignore 注释的。

如果提供了元信息，为什么不使用它:)

**编辑：**

我在 moreunit[网站上](http://sourceforge.net/tracker/index.php?func=detail&aid=3528334&group_id=156007&atid=798059)要求提供此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-21T12:02:54.240

该功能已由 Vera Henneberger 实现。我用我的设置做了一个屏幕截图。 ![在此处输入图像描述](../Images/91e18f06c346ac5eaf487d7442606c97.png)

# java - 如何在 NDK 中将“int array”从本机方法返回到 java

> ID：10278186
> 
> 赞同：4
> 
> 时间：2012-04-23T09:46:08.043
> 
> 标签：java, android, c, android-ndk

看到我在 nativeLib 中有本机功能

```
 public native int [] getArrayNative(); 
```

我正在使用这样的

```
 private static int[] DEMO_NODES;

 DEMO_NODES =  nativeLib.getArrayNative(); 
```

在 c 代码中它有

```
JNIEXPORT jintArray JNICALL Java_com_testing_NativeLib_getArrayNative
  (JNIEnv *env, jobject obj) {

    int array[] = { 0, 1, 0, 1, 2, 1, 2, 3, 2, 3, 1, 2, 1, 2, 3, 2, 3, 1, 2 };
    jintArray temp = (*env)->NewIntArray(env,20);
    temp[0] = array[0];   // gives error
    return temp;    
} 
```

在这里我想返回整个 arry[] 但我不明白该怎么做。在这里，我采用了新的数组 temp，试图复制 arry[] 的值，但它显示错误。那么怎么做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T09:53:03.417

用于[`SetIntArrayRegion`](http://java.sun.com/docs/books/jni/html/objtypes.html#27761)填充数组，`jintArray`只是一些神奇的内部结构，没有任何东西可以使用索引访问。

> **原型**void SetArrayRegion(JNIEnv *env, array, jsize start, jsize len, *buf);

# php - 在类 php 中随机播放数组为空

> ID：10278187
> 
> 赞同：0
> 
> 时间：2012-04-23T09:46:11.097
> 
> 标签：php, arrays, multidimensional-array, shuffle

不能随机播放类中声明的数组。

它给了我：无法访问空属性。我想展示一个棋盘。使用二维数组。如果不用作类中的函数，该代码可以正常工作。我想打乱数组并显示它。

```
private $board = array(array('k', 'k', 'b', 'q', 'k', 'b', 'k', 'r'),               
             array('p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'),
             array('&nbsp;', '&nbsp;', '&nbsp;', '&nbsp;', '&nbsp;',
             '&nbsp;', '&nbsp;', '&nbsp;'),
             array('p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'),
             array('r', 'k', 'b', 'q', 'k', 'b', 'k', 'r'));

 public function produce()
{

            shuffle($this->$board);     
            echo "<div id='inside'>";

            for($yIndex = 0; $yIndex < count($board); $yIndex++)
            {

                echo "<div class='row'>";

            for($xIndex = 0; $xIndex < count($board[$yIndex]); $xIndex++)
            {
                echo "<div class='column' data-square=$yIndex-$xIndex>
            <div class=".$board[$yIndex][$xIndex]."></div></div>";
            }
            echo "</div>";

            }

}}$a = new Display();$a->produce(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:47:24.993

你有语法错误，它应该`$this->board`代替`$this->$board`. 第二种形式是访问[变量属性](http://php.net/manual/en/language.variables.variable.php)，如

```
$propertyName = 'board';
shuffle($this->$propertyName); 
```

# codeigniter - 如何使用 Elliot Haughin 的 Twitter API 和 Codeigniter 在推文中获取实体

> ID：10278190
> 
> 赞同：0
> 
> 时间：2012-04-23T09:46:13.660
> 
> 标签：codeigniter, twitter

我正在使用 Elliot Haughin 的 Twitter API 和 Codeigniter。我想获取推文的实体。这是我的代码

$user = $this->tweet->call('get', 'statuses/user_timeline', array('include_entities' => 'true', 'count' => '2'));

但它没有显示实体。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T22:32:53.370

像这样添加一个屏幕名称怎么样：

```
$user = $this->tweet->call('get', 'statuses/user_timeline', array('screen_name' => 'biz', 'include_entities' => 'true', 'count' => '2')); 
```

# c# - 我试过了，但 InvokeMember Click 不能在输入按钮上工作，它与其他按钮非常不同

> ID：10278191
> 
> 赞同：1
> 
> 时间：2012-04-23T09:46:21.983
> 
> 标签：c#, javascript, html, button, input

我希望 button9 使用 webbrowser1 自动单击 html 页面中的输入按钮。

这是下面输入按钮的代码。我从页面源中得到了这个。

```
 <input type="image" name="phmiddle_0$ShoppingCartOrderSummary1$btnCheckout"
 id="phmiddle_0_ShoppingCartOrderSummary1_btnCheckout" title="Checkout"
 src="/content/images/global/buttons/checkout.gif" onclick="return
 GMCR.CheckoutValidation();" style="border-width:0px;"> 
```

所以这是我在下面用来点击它的代码。

```
private void button9_Click(object sender, EventArgs e)
{
webBrowser1.Document.GetElementById("phmiddle_0$ShoppingCartOrderSummary1$btnCheckout").InvokeMember("Click");
} 
```

我也试过这个

```
 private void button9_Click(object sender, EventArgs e)
{
webBrowser1.Document.GetElementById("phmiddle_0_ShoppingCartOrderSummary1_btnCheckout").InvokeMember("Click");
} 
```

这两个都没有工作。

我还尝试了其他一些非常长的代码，其中包含 var 和 htmlelement 标签，但它们都不起作用。

请帮助我，我在这里做错了什么。

我点击了button9，但它并没有自动点击输入按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:19:45.573

我找到了答案 我所要做的就是添加这个 webBrowser1.Document.GetElementById("phmiddle_0_ShoppingCartOrderSummary1_btnChe‌​ckout").RaiseEvent("onclick");

# android - 移除未放入 backstack 的碎片

> ID：10278197
> 
> 赞同：4
> 
> 时间：2012-04-23T09:46:53.883
> 
> 标签：android, android-layout, android-intent, android-emulator, android-fragments

我的简单**布局**只有一个片段占位符：

```
<FrameLayout
   android:id="@+id/fragment_placeholder"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
  /> 
```

我首先向这个占位符添加**第一个片段：**

```
fragmentTransaction.add(R.id.fragment_placeholder, firstFragment, "first"); //I did not put to backstack 
```

我有一个**第二个片段**，它替换了上面的片段**并将其放回堆栈**：

```
FragmentManager fragMgr = getSupportFragmentManager();
FragmentTransaction fragTrans = fragMgr.beginTransaction();

//initialize an fragment instance
Fragment secondFragment = initSecondFragment(); 

//replace with the fragment 
fragTrans.replace(R.id.fragment_placeholder, secondFragment, "second");

//Add fragment transaction to back stack
fragTrans.addToBackStack(null);

//commit the transaction
fragTrans.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
fragTrans.commit(); 
```

后来我有一些片段替换了以前的片段，但**没有放在 backstack 上**。

似乎对于那些**没有放在 backstack 上的 Fragment**总是会显示在屏幕上，按下后退按钮对它们没有影响。

那么，如何在我的应用程序**中找到那些不在 backstack 上的片段，以及****如何将它们从屏幕上删除？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:13:23.300

> 如何在我的应用程序中找到那些不在 backstack 上的片段

致电`findFragmentById()`或`findFragmentByTag()`在您的`FragmentManager`.

> 如何从屏幕上删除它们？

`remove()`与`FragmentTransaction`. _

# c++ - C++ 编译器如何优化不正确的分层向下转换以导致真正的未定义行为

> ID：10278199
> 
> 赞同：3
> 
> 时间：2012-04-23T09:47:17.033
> 
> 标签：c++, compiler-optimization, undefined-behavior

考虑以下示例：

```
class Base {
public:
    int data_;
};

class Derived : public Base {
public:
    void fun() { ::std::cout << "Hi, I'm " << this << ::std::endl; }
};

int main() {
    Base base;
    Derived *derived = static_cast<Derived*>(&base); // Undefined behavior!

    derived->fun(); 

    return 0;
} 
```

根据 C++ 标准，函数调用显然是未定义的行为。但在所有可用的机器和编译器（VC2005/2008，RH Linux 和 SunOS 上的 gcc）上，它按预期工作（打印“Hi！”）。有谁知道配置此代码可能无法正常工作？或者可能是具有相同想法的更复杂的示例（请注意，Derived 无论如何都不应该携带任何额外的数据）？

**更新：**

从标准 5.2.9/8 开始：

> “指向 cv1 B 的指针”类型的右值，其中 B 是类类型，可以转换为“指向 cv2 D 的指针”类型的右值，其中 D 是从 B 派生的类（第 10 条），如果一个有效的标准存在从“指向 D 的指针”到“指向 B 的指针”的转换 (4.10)，cv2 的 cvqualification 与 cv1 相同或更高，并且 B 不是 D 的虚拟基类。空指针值 (4.10)转换为目标类型的空指针值。**如果“指向 cv1 B 的指针”类型的右值指向实际上是 D 类型对象的子对象的 B，则生成的指针指向 D 类型的封闭对象。否则，强制转换的结果是未定义的。**

还有一个 9.3.1（感谢@Agent_L）：

> 如果为非 X 类型或从 X 派生的类型的对象调用类 X 的非静态成员函数，则行为未定义。

谢谢，迈克。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T09:51:19.933

该函数`fun()`实际上并没有做任何与指针有关的事情`this`，并且由于它不是一个虚函数，因此查找该函数没有什么特别需要的。基本上，它像任何普通（非成员）函数一样被调用，但`this`指针错误。它只是不会崩溃，这是完全有效的未定义行为（如果这不是矛盾的话）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T11:37:27.017

代码注释不正确。

```
Derived *derived = static_cast<Derived*>(&base);
derived->fun(); // Undefined behavior! 
```

修正版：

```
Derived *derived = static_cast<Derived*>(&base);  // Undefined behavior!
derived->fun(); // Uses result of undefined behavior 
```

未定义的行为以`static_cast`. 对该不正当指针的任何后续使用也是未定义的行为。未定义的行为对于编译器供应商来说是一张摆脱监狱的卡。编译器的几乎所有响应都符合标准。

没有什么可以阻止编译器拒绝您的演员表。一个好的编译器很可能会为此发出一个致命的编译错误`static_cast`。*在这种情况下*，违规很容易看出。一般来说，它不容易看到，所以大多数编译器都不会费心检查。

大多数编译器采用最简单的方法。在这种情况下，简单的方法是简单地假设指向类实例的`Base`指针是指向类实例的指针`Derived`。由于您的功能`Derived::fun()`相当良性，因此*在这种情况下*，简单的方法会产生相当良性的结果。

仅仅因为你得到了一个很好的良性结果并不意味着一切都很酷。它仍然是未定义的行为。最好的选择是永远不要依赖未定义的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T09:51:14.910

在同一台机器上无限次运行相同的代码，如果幸运的话，*也许*你会看到它运行*不正确*并且*出乎意料。*

要理解的是，未定义的行为（UB）并不意味着它*肯定*不会按预期运行；它*可能会*按预期运行，1 次、2 次、10 次，甚至无限次。UB 只是意味着它不能*保证*按预期运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T13:37:13.690

例如，编译器可能会优化代码。考虑稍微不同的程序：

```
if(some_very_complex_condition)
{
  // here is your original snippet:

  Base base;
  Derived *derived = static_cast<Derived*>(&base); // Undefined behavior!

  derived->fun(); 
} 
```

编译器可以

(1) 检测未定义的行为

(2) 假设程序不应该暴露未定义的行为

因此（编译器决定）_some_very_complex_condition_ 应该始终为假。假设这一点，编译器可能会将整个代码删除为不可访问。

**[编辑]**编译器如何消除“服务”UB 案例的代码的真实示例：

[为什么使用 GCC 在 x86 上整数溢出会导致无限循环？](https://stackoverflow.com/questions/7682477/gcc-fail-or-undefined-behavior)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T10:38:38.880

您必须了解您的代码在做什么，然后您才能看到它没有做错任何事情。“this”是一个隐藏指针，由编译器为您生成。

```
class Base
{
public:
    int data_;
};

class Derived : public Base
{

};

void fun(Derived* pThis) 
{
::std::cout << "Hi, I'm " << pThis << ::std::endl; 
}

//because you're JUST getting numerical value of a pointer, it can be same as:
void fun(void* pThis) 
{
    ::std::cout << "Hi, I'm " << pThis << ::std::endl; 
}

//but hey, even this is still same:
void fun(unsigned int pThis) 
{
    ::std::cout << "Hi, I'm " << pThis << ::std::endl; 
} 
```

现在很明显：这个函数不能失败。您甚至可以传递 NULL 或其他一些完全不相关的类。 *行为是未定义的，但这里没有什么可以出错的。*

//编辑：好的，根据标准，情况不相等。((Derived*)NULL)->fun(); 被明确声明为 UB。但是，此行为通常在有关调用约定的编译器文档中定义。我应该写“对于我所知道的所有编译器，什么都不会出错”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T14:06:21.943

这段代码经常工作的实际原因是，任何破坏它的东西都倾向于在发布/优化性能构建中被优化。但是，任何专注于查找错误（例如调试构建）的编译器设置都更有可能在此问题上绊倒。

在这些情况下，您的假设（“请注意，`Derived`无论如何都不应该携带任何额外数据”）不成立。它绝对应该，以方便调试。

一个稍微复杂一点的例子更棘手：

```
class Base {
public:
    int data_;
    virtual void bar() { std::cout << "Base\n"; }
};

class Derived : public Base {
public:
    void fun() { ::std::cout << "Hi, I'm " << this << ::std::endl; }
    virtual void bar() { std::cout << "Derived\n"; }
};

int main() {
    Base base;
    Derived *derived = static_cast<Derived*>(&base); // Undefined behavior!

    derived->fun(); 
    derived->bar();
} 
```

现在，一个合理的编译器可能会决定跳过 vtable 并静态调用`Base::bar()`，因为这是您正在调用的对象`bar()`。或者它可能决定`derived`必须指向一个实数`Derived`，因为你调用`fun`了它，跳过 vtable，然后调用`Derived::bar()`. 如您所见，考虑到这种情况，这两种优化都是相当合理的。

在这里，我们看到了为什么未定义的行为会如此令人惊讶：编译器可以在使用 UB 的代码之后做出错误的假设，即使语句本身编译正确。

# iphone - UIViewController.View.Window 在 ViewDidLoad 方法中为空

> ID：10278204
> 
> 赞同：20
> 
> 时间：2012-04-23T09:47:43.877
> 
> 标签：iphone, ios, cocoa-touch, xamarin.ios

无论在哪种控制器类型 ( `UIViewController`, `UITableViewController`) 上，以下行始终`null`在`ViewDidLoad`方法中产生：

```
this.View.Window 
```

这种行为是正常的，还是我在做一些奇怪的事情？什么会导致`UIViewController.View.Window`存在`null`？

（我想这个问题不仅涉及 MonoTouch，还涉及“正常”的 Objective-C Cocoa）。

(MonoTouch 5.2.11, Xcode 4.2.1 4D502)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-23T09:52:25.113

根据[UIView](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW55)的文档，该`window`属性是`nil`视图是否尚未添加到窗口中，`viewDidLoad`即调用时的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-23T17:02:50.190

而不是`self.view.window`使用

```
[(YourAppDelegate *)[[UIApplication sharedApplication] delegate] window] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-01-17T12:40:05.060

`self.view.window`将在**viewDidAppear**中可用：

```
override func viewDidAppear(_ animated: Bool) {
    print(self.view.window)
    let vc = self.storyboard?.instantiateViewController(identifier: "SecondViewController") as? SecondViewController
    self.view.window?.rootViewController = vc
} 
```

# magento - 在 magento 的类别列表页面上显示自定义选项

> ID：10278205
> 
> 赞同：3
> 
> 时间：2012-04-23T09:47:56.487
> 
> 标签：magento

我想在产品列表页面上显示**产品自定义选项**，当我添加到购物车时它会转到购物车页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:51:43.057

终于在这里找到了解决方案。如果有人需要这样做，可以使用主题 list.phtml 文件中的代码来完成。在此处查看代码：http: [//blog.sparxitprofessionals.com/display-custom-option-on-category-list-page-in-magento/](http://blog.sparxitprofessionals.com/display-custom-option-on-category-list-page-in-magento/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T08:54:57.837

@mugur，对不起，如果上面的链接丢失，你可以使用下面的代码

```
$productSku = $_product->getSku();
$product = Mage::getModel('catalog/product');
$productId = $product->getIdBySku( $productSku );

$product = Mage::getModel("catalog/product")->load($productId);

$attVal = $product->getOptions();

$optStr = "";

// loop through the options
foreach($attVal as $optionKey => $optionVal) {

  //$optStr .= "";

  //$optStr .= $optionVal->getTitle().": ";

  $optStr .= "<select style="display: block; clear: both;" name="options[&quot;.$optionVal->getId().&quot;]">";

  foreach($optionVal->getValues() as $valuesKey => $valuesVal) {
    $optStr .= "<option value="&quot;.$valuesVal->getId().&quot;">".$valuesVal->getTitle()."</option>";
  }

 $optStr .= "</select>";

}

 echo($optStr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-21T11:46:45.033

*   从性能的角度来看，重新加载产品`->load()`不是想法
*   更好的是通过以下方式获得选项：

    Mage::getSingleton('catalog/product_option')->getProductOptionCollection($_product)

*   但最好的解决方案是将自定义选项加入产品系列。如果有人对此有解决方案，请随时在此处发布:)

# c# - 在 C# 中创建自己的“类型”类型对象的集合类型

> ID：10278208
> 
> 赞同：0
> 
> 时间：2012-04-23T09:48:03.200
> 
> 标签：c#, collections

我是 C# 新手，遇到以下问题：

我需要创建一个 TypeCollection，它继承自 Collection，这里的对象类型是我创建的一些类型。

在 InsertItem() 重载方法中，我想检查对象是否来自我创建的特定类型层次结构，否则我会抛出异常。

附上代码片段：

```
public class ObjectTypeCollection<Type> : Collection<Type>
{
    protected override void InsertItem(int index, Type item)
    {   
        if(!(Utility.IsFDTObject(item.GetType())))
        {          
            throw new ArgumentException(string.Format("Type {0} is not valid", item.ToString()));
        }
        base.InsertItem(index, item);
    }
} 
```

这里的问题在于项目实例。它没有任何方法可以让我获取当前传递的类型。GetType() 不会返回我已通过的类型。目前，我使用过：

```
System.Type typ = System.Type.GetType(item.ToString()); 
```

获取类型，然后将其传递给 Utility 方法。这工作正常。这是正确的方法吗？

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:52:56.487

您可以对类型参数设置约束`Type`，请参见此处：http: [//msdn.microsoft.com/en-us/library/d5x73970 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/d5x73970(v=vs.80).aspx)

这是静态检查的，您不需要像目前正在做的那样做任何动态的事情。具体来说：

`public class ObjectTypeCollection<T> : Collection<T> where T : <base class name>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:55:37.047

您可以使用[`Type.IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)检查一个类型的实例是否可以从另一个类型的实例中分配（如果它们兼容）。像这样：

```
if (typeof(FDTObject).IsAssignableFrom(item)) 
```

但是你的问题有点不清楚。也许您不想插入实际类型，而是插入特定类型的对象，并能够用不同类型实例化 Collection？然后你可以在你的类中约束泛型参数：

```
public class ObjectTypeCollection<T> : Collection<T> where T: FDTObject 
```

或者您只想要一个所有对象都是 FDTObject 或其后代的集合。然后你可以只使用 a`List<FDTObject>`并且你有即时静态类型检查（如果这是你想要的最好的解决方案）：

```
List<FDTObject> fdtList = new List<FDTObject>(); 
```

对我来说，它仍然很不清楚。你想向`System.Type`集合中添加实例（然后你需要直接删除类名之后的第一个泛型参数）？还是您只是碰巧选择`Type`了泛型参数的名称（这是一个糟糕的选择，因为已经有一个类型，即`System.Type`这样命名）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:05:29.647

使用[Type.IsAssignableFrom](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)方法：

```
public class FDTObject {}
public class MyDTObject1 : FDTObject {}
public class MyDTObject2 : FDTObject { }

public class ObjectTypeCollection : Collection<Type>
{
    protected override void InsertItem(int index, Type item)
    {
        if (!typeof(FDTObject).IsAssignableFrom(item))
        {
            throw new ArgumentException(string.Format("Type {0} is not valid", item));
        }
        base.InsertItem(index, item);
    }
} 
```

用法：

```
var collection = new ObjectTypeCollection();  
collection.Add(typeof(MyDTObject1)); // ok  
collection.Add(typeof(MyDTObject2)); // ok  
collection.Add(typeof(String)); // throws an exception 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T10:06:47.780

除非我误解了您想要的内容，否则您不能只使用[通用列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)吗？

您可以使用设置为基类的类型参数来初始化列表：

```
var list = new List<FDTObject>(); // assuming this is one of your base classes based upon your example. 
```

然后，您可以将任何对象添加到列表中`FDTObject`或继承自`FDTObject`

# c - 文档互斥定义

> ID：10278211
> 
> 赞同：3
> 
> 时间：2012-04-23T09:48:09.983
> 
> 标签：c, comments, doxygen, cperl-mode

我正在用**C**编写一个小程序，我想记录它，以便其他人可以更改一些细节。我用 s 编写了一个 config.h 文件，`#define`它可以启用或不启用某些操作，其中一些是互斥的，另一些则不是。

不互斥的例子：

```
#define USE_A
#define USE_B
#define USE_C 
```

互斥示例：

```
#define BUILD_FULL
#define BUILD_COMPACT 
```

到目前为止，我通过记录我不想使用的功能来选择要编译的程序的配置，例如：

```
//#define BUILD_FULL
#define BUILD_COMPACT 
```

构建一个 COMPACT 可执行文件。

如何为注释掉的功能编写文档？

我试过：

```
#define USE_A //!< Special Feature
#define USE_B //!< Special Feature
//#define USE_C //!< Special Feature 
```

我没有编译它，`USE_C`但显然我丢失了文档，因为 doxygen 没有解析它。`#define`如果我误解了使用定义的正确方式，你将如何重写流程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:50:15.470

您可以测试宏的*值*，而不仅仅是它的存在。例如，使用 0 禁用选项，或使用 1 启用它。然后，使用`#if`代替`#ifdef`来测试条件。

```
#define USE_A 1    //!< Special Feature
#define USE_B 1    //!< Special Feature
#define USE_C 0    //!< Special Feature

#if USE_A
...
#elif USE_C
...
#endif 
```

# ruby - 如何使用 ruby 生成 40 到 47 之间的随机数？

> ID：10278214
> 
> 赞同：-1
> 
> 时间：2012-04-23T09:48:20.857
> 
> 标签：ruby, random

如何使用 ruby​​ 生成 40 到 47 之间的随机数？我试过了，但无法理解。[如何使用 Ruby 生成一定范围内的随机数？](https://stackoverflow.com/questions/6011425/how-do-i-generate-a-random-number-in-a-certain-range-with-ruby)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T09:53:41.773

`rand(8)`将生成一个介于 0 和 7 之间的随机数（请注意，该范围内确实有 8 个数字）。

你想要做的就是在这个范围内加上 40，所以你会得到 40 到 47 之间的数字。像这样：

`40 + rand(8)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T09:50:22.210

你可以试试这个`rand(40..47)`

# android - Android 2.3.3 和 XmlPullParser.nextText()

> ID：10278215
> 
> 赞同：1
> 
> 时间：2012-04-23T09:48:22.537
> 
> 标签：android, xmlpullparser, android-pullparser

此[链接](http://android-developers.blogspot.com/2011/12/watch-out-for-xmlpullparsernexttext.html)上的文章（android 开发者的博客）说：

> 使用 XmlPullParser 是一种在 Android 上解析 XML 的高效且可维护的方法。从历史上看，Android 有两个该接口的实现：
> 
> ```
> - KXmlParser, via XmlPullParserFactory.newPullParser().
> - ExpatPullParser, via Xml.newPullParser(). 
> ```
> 
> Xml.newPullParser() 的实现有一个错误，即对 nextText() 的调用并不总是像文档所承诺的那样前进到 END_TAG。因此，某些应用程序可能会通过额外调用 next() 或 nextTag() 来解决该错误：
> ...

我不明白这是指`XmlPullParserFactory.newPullParser()`还是指`Xml.newPullParser()`两者。

例如，此代码在 Android 2.3.3 及更低版本上是否会产生错误：

```
XmlPullParser xpp = XmlPullParserFactory.newInstance().newPullParser();
int event = xpp.getEventType();
while (...event not end doc and tag not equal search term...){
     event = xpp.next();
}
myClass.setSomeText(xpp.nextText()); 
```

# spring - javax.xml.soap.SOAPException：InputStream 不代表有效的 SOAP 1.2 消息

> ID：10278216
> 
> 赞同：2
> 
> 时间：2012-04-23T09:48:23.427
> 
> 标签：spring, spring-ws

在 SOAP UI 中测试我的 Spring WS 时出现以下异常。有谁知道这个异常，让我知道在哪里需要查看代码以消除这个异常。

```
javax.xml.soap.SOAPException: InputStream does not represent a valid SOAP 1.2 Message
com.sun.xml.internal.messaging.saaj.soap.ver1_2.SOAPPart1_2Impl.createEnvelopeFromSource(SOAPPart1_2Impl.java:74)
com.sun.xml.internal.messaging.saaj.soap.SOAPPartImpl.getEnvelope(SOAPPartImpl.java:122)
org.springframework.ws.soap.saaj.support.SaajUtils.getSaajVersion(SaajUtils.java:155)
org.springframework.ws.soap.saaj.SaajSoapMessage.getSaajVersion(SaajSoapMessage.java:257)
org.springframework.ws.soap.saaj.SaajSoapMessage.getImplementation(SaajSoapMessage.java:342)
org.springframework.ws.soap.saaj.SaajSoapMessage.&lt;init&gt;(SaajSoapMessage.java:117)
org.springframework.ws.soap.saaj.SaajSoapMessageFactory.createWebServiceMessage(SaajSoapMessageFactory.java:186)
org.springframework.ws.soap.saaj.SaajSoapMessageFactory.createWebServiceMessage(SaajSoapMessageFactory.java:60)
org.springframework.ws.transport.AbstractWebServiceConnection.receive(AbstractWebServiceConnection.java:90)
org.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:86)
org.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:59)
org.springframework.ws.transport.http.MessageDispatcherServlet.doService(MessageDispatcherServlet.java:221)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-28T21:10:18.277

这也可能是由不正确的“Content-Type”标头引起的；我正在使用`application/soap+xml`并且我的基于 Java 的 Web 服务不喜欢它；我用过`text/xml;charset=utf-8`，它似乎工作正常。

# silverlight - 在 silverlight 中禁用 Web 浏览器控件上的右键单击选项

> ID：10278217
> 
> 赞同：0
> 
> 时间：2012-04-23T09:48:28.567
> 
> 标签：silverlight

抱歉，我问的最后一个问题有点错误。我没有提到其中的网络浏览器。我的问题是我可以右键单击 Silverlight 中的网络浏览器控件，我不想这样做。谁能帮助我.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:51:40.897

您可以使用以下代码禁用上下文菜单：

HTML：

```
<div id="silverlightObjDiv">
    <!-- silverlight object here -->
</div> 
```

JavaScript：

```
<script>
document.getElementById('silverlightObjDiv').oncontextmenu = disableRightClick;
function disableRightClick(e) {
    if (!e) e = window.event;
    if (e.preventDefault) {
        e.preventDefault();
    } else {
        e.returnValue = false;
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:12:53.080

要禁用右键单击菜单，只需在页面的主网格上使用以下代码挂钩右键单击事件处理程序。

```
 private void btnRightClick_MouseRightButtonDown(object sender, MouseButtonEventArgs e)
    {
        e.Handled = true;
    } 
```

e.handled = true 确保右键单击由您的代码处理。这也将删除 silverlight 右键单击​​上下文菜单。

如果您需要更多详细信息，请告诉我。

干杯，

# mysql - 从两个或多个现有表创建新表 (MySQL)

> ID：10278218
> 
> 赞同：0
> 
> 时间：2012-04-23T09:48:29.857
> 
> 标签：mysql

# 问题：

是否可以从两个或多个现有表在 mySQL 中创建表？

# 细节：

我可以像这样创建一个表：

```
CREATE TABLE IF NOT EXISTS USERNAME ( AGE INT NOT NULL )
CREATE TABLE IF NOT EXISTS USERAGE ( NAME VARCHAR(100) NOT NULL )
CREATE TABLE IF NOT EXISTS USER LIKE USERNAME LIKE USERAGE; 
```

我无法做出[参考手册](http://dev.mysql.com/doc/refman/5.0/en/create-table.html)的正面或反面：

```
CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
{ LIKE old_tbl_name | (LIKE old_tbl_name) } 
```

尾随是否`(LIKE old_tbl_name)`意味着 1 次或多次出现 `LIKE old_tbl_name`？

如果可能，那么同名列或两个主 ID 会发生什么情况？

**编辑：** 我正在尝试使用现有表的架构来定义一个新表，**而不是**尝试用现有表的内容填充一个新表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T09:57:50.683

怎么样：

```
CREATE TABLE IF NOT EXISTS USER SELECT * FROM USERNAME, USERAGE WHERE FALSE; 
```

您还可以在`SELECT`关键字之前在新表中指定您需要的任何索引，或者像往常一样在右侧重命名列/选择一些子集`SELECT`：

```
CREATE TABLE IF NOT EXISTS USER (PRIMARY KEY(UNAME)) SELECT NAME AS UNAME -- etc 
```

如果要合并所有同名列，只需`NATURAL JOIN`在`SELECT`.

有关[`CREATE TABLE ... SELECT`](http://dev.mysql.com/doc/refman/5.6/en/create-table-select.html)更多信息，请参阅。

# axis - 多个（顶部）自定义轴

> ID：10278219
> 
> 赞同：0
> 
> 时间：2012-04-23T09:48:34.443
> 
> 标签：axis, teechart

我正在为 .Net winform 发现 TeeChart；非常好的产品。

我想比较不同时期的两组或多组值。例如二月和四月的温度。因此，我使用左轴作为温度，并希望每个月都有一个 x 轴，z 轴堆叠图表。它实际上非常“直接”地工作，除了自定义水平轴（用于日期）被绘制在彼此之上。我显然希望它们垂直堆叠。

我在一些与论坛上其他问题相关的屏幕截图中看到这是可能的。我想知道是否有一个已经实现的参数，还是我需要覆盖一个轴事件并自己做？

PS：这是我目前拥有的说明：

![在此处输入图像描述](../Images/a5cbda0d0022ab185081c7d0e62ea274.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:27:03.507

我不是 100% 了解您需要在这里实现什么，但可能您需要自定义每个轴的位置。您将在教程 4 中找到有关此的一些基本信息。功能演示中的*所有功能\欢迎！\Axes部分也可能会有所帮助。*TeeChart 的程序组提供教程和功能演示。对于更复杂和更高级的示例，您可以查看[此论坛主题](http://www.teechart.net/support/viewtopic.php?f=4&t=10165&p=42266&#p42266)。

如果这没有帮助，请不要犹豫，让我知道。

# php - 在模型中调用映射器可以吗？

> ID：10278228
> 
> 赞同：1
> 
> 时间：2012-04-23T09:49:21.397
> 
> 标签：php, oop, domain-driven-design

我正在学习领域建模和映射器。可以在模型中调用另一个映射器吗？例如：

```
class model_project extends model {
  [...]
  public function addTag($tag)
  {
   $tagMapper = new Mapper_Tag;
   $tag = $tagMapper->findByName($tag);
   if(!$tag) {
     // create new $tag
     $tagMapper->save($tag);
   }
  }
  [...]
} 
```

我的意思是，可以在映射器上调用一些保存功能来让一些登录在模型上工作，还是被一个好的做法禁止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:26:57.703

域模型不知道其他基础设施，如映射器。域模型只是对域进行建模的对象。这些对象由域外​​的工厂创建或由存储库恢复。

域模型不应该关心保存或其他在它所属的有界上下文中没有意义的事情。

# xml - 在 Silverlight 中比较两个 Xml 文档

> ID：10278232
> 
> 赞同：0
> 
> 时间：2012-04-23T09:49:36.443
> 
> 标签：xml, silverlight

我需要比较两个 xml 文档是否相等，正如这篇文章中所述：[您将如何比较两个 XML 文档？](https://stackoverflow.com/questions/167946/how-would-you-compare-two-xml-documents) Xml Diff API 会很棒，但不幸的是它不能在 Silverlight 中引用。

有人知道silverlight的类似解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:45:20.263

好吧，如果不使用库，我会 - 在源文档上使用深度优先搜索，将 xpath 与遇到的每个**叶子**相关联，并将 xpath 与其关联的值放在堆栈上。（很可能是一些用于路径和值的 xpath 自定义类）。（也有字典的选项。:)）。一旦深度优先搜索完成，我会弹出堆栈的每个元素，在目标文档上执行 X-path，一旦遇到 xpath 值的差异 - 考虑文档不相等。
只是理论上的建议。

# windows-8 - Metro 应用程序中的漫游文件夹指向 Local\*\*\RoamingState

> ID：10278233
> 
> 赞同：0
> 
> 时间：2012-04-23T09:49:44.977
> 
> 标签：windows-8, microsoft-metro, windows-runtime, .net-4.5

我想将应用程序设置存储在漫游文件夹中。（设置非常小~2KB）。

我存储在 ApplicationData.Current.RoamingFolder 文件夹中。以上是指*`C:\Users\Tilak\AppData\Local\Packages\b5dea8e0-504c-4105-8b4c-6d2da32816f7_vbe7xwj32evkc\RoamingState`*

我很惊讶为什么上面的位置指向 User\Local 文件夹而不是 User\Roaming。

ApplicationData.Current.LocalFolder 指向*`C:\Users\Tilak\AppData\Local\Packages\b5dea8e0-504c-4105-8b4c-6d2da32816f7_vbe7xwj32evkc\LocalState`*. 此外，使用漫游存储在同一个真实帐户上同步多个设备需要遵循哪些额外步骤。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:59:31.870

> 我很惊讶为什么上面的位置指向 User\Local 文件夹而不是 User\Roaming。

这是因为 User\Roaming 用于在域内漫游的用户配置文件。[漫游用户配置文件](http://en.wikipedia.org/wiki/Roaming_user_profile)。它与 Windows 8 Metro 风格应用程序的漫游功能无关。

> 使用漫游存储在同一真实帐户上同步多个设备需要遵循哪些额外步骤。

没有什么。只需将数据设置为漫游存储，它就可以跨设备使用，尽管有一些时间延迟（不是实时同步）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-01T21:42:07.163

此外，UWP 是沙盒化的，无法在其外部读取或写入文件

```
C:\Users\Tilak\AppData\Local\Packages\b5dea8e0-504c-4105-8b4c-6d2da32816f7_vbe7xwj32evkc\RoamingState
C:\Users\Tilak\AppData\Local\Packages\b5dea8e0-504c-4105-8b4c-6d2da32816f7_vbe7xwj32evkc\LocalState
C:\Users\Tilak\AppData\Local\Packages\b5dea8e0-504c-4105-8b4c-6d2da32816f7_vbe7xwj32evkc\TempFolder 
```

等效文件夹，除非用户在文件选择器中选择它。

这种限制表面上是出于安全原因；如果您想访问传统的 AppData 文件夹，请编写一个桌面应用程序。

# java - SNMP：snmp4j / snmpwalk 结果不同

> ID：10278234
> 
> 赞同：3
> 
> 时间：2012-04-23T09:49:51.803
> 
> 标签：java, snmp, snmp4j

`snmp nodes`我正在发送使用[此示例](http://www.snmp4j.org/doc/org/snmp4j/Snmp.html)的请求：

```
PDU pdu = new PDU();
pdu.add(new VariableBinding(new OID("1.3.6.1.2.1.1.1")));
pdu.add(new VariableBinding(new OID("1.3.6.1.2.1.1.9.1.2.1")));
pdu.setType(PDU.GETNEXT); 
```

结果是：

```
Linux pia 2.6.26-2-686 #1 SMP Thu Sep 16 19:35:51 UTC 2010 i686
1.3.6.1.6.3.11.3.1.1 
```

使用监听器：

```
Received response PDU is: RESPONSE[requestID=307256023, errorStatus=Success(0), errorIndex=0, VBS[1.3.6.1.2.1.1.9.1.2.2 = 1.3.6.1.6.3.11.3.1.1]] 
```

和`snmpwalk`命令给了我这些结果：

```
root@pia:~/workspace_c/SNMP# snmpwalk -v2c -c public localhost 1.3.6.1.2.1.1.1
SNMPv2-MIB::sysDescr.0 = STRING: Linux pia 2.6.26-2-686 #1 SMP Thu Sep 16 19:35:51 UTC 2010 i686

root@pia:~/workspace_c/SNMP# snmpwalk -v2c -c public localhost 1.3.6.1.2.1.1.9.1.2.1
SNMPv2-MIB::sysORID.1 = OID: SNMP-FRAMEWORK-MIB::snmpFrameworkMIBCompliance 
```

为什么`snmpwalk`返回`SNMP-FRAMEWORK-MIB::snmpFrameworkMIBCompliance`和`snmp4j` `1.3.6.1.6.3.11.3.1.1`？

**为什么我在第一种情况下得到节点的名称，在第二种情况下得到节点的数量？？？**

**更新：** 啊哈，节点似乎可以是 OID、STRING、Timesticks 对象：

*   1.3.6.1.2.1.1.9.1.2.1 => **OID**：SNMP-FRAMEWORK-MIB::snmpFrameworkMIBCompliance
*   1.3.6.1.2.1.1.9.1.3.1 => **STRING**：SNMP 管理架构 MIB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:19:10.737

不完全一样吗？（SNMP OID 可能采用字符串或“带点的数字”的形式——不同的表示形式，但指向树中完全相同的信息）。

来自 [MIBExplorer：](http://www.mibexplorer.com/export/ietf/SNMP-MPD-MIB.html#snmpMPDMIBCompliances)

> snmpMPDCompliance MODULE-COMPLIANCE STATUS current DESCRIPTION “实现 SNMP-MPD-MIB 的 SNMP 实体的合规性声明。”
> 
> ```
>  MODULE 
>     MANDATORY-GROUPS {
>                     snmpMPDGroup } 
> ```
> 
> -- 1.3.6.1.6.3.11.3.1.1 -- ::= { snmpMPDMIBCompliances 1 }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T22:58:20.087

对于大多数应用程序，MIB 对象的对象名称是不相关的，并且可能模棱两可。SMI 只要求对象名称在 MIB 模块内和所有 IETF 标准 MIB 规范中是唯一的。

因此，最佳实践是尽可能使用点号表示法（例如“1.3.6.1.4.1”）。SNMP4J 默认没有内置 MIB 解析器，因此提供点号 OID 字符串。

但是，如果您想要 MIB 规范定义的对象名称或其他值转换，您可以简单地添加带有几行代码的[SNMP4J-SMI ，并且您可以在任何您想要的地方使用对象名称。](http://www.snmp4j.org/smi/doc/com/snmp4j/smi/SmiManager.html)

# c# - 如何将android应用程序与在pc上运行的windows应用程序接口

> ID：10278236
> 
> 赞同：1
> 
> 时间：2012-04-23T09:49:57.630
> 
> 标签：c#, android, winforms

我需要将安卓手机的输入传递给用 C# 编写的 Windows 应用程序。具体来说，从 android 设备拍摄的图像应该能够转到我在 PC 中的应用程序。我不知道从哪里开始。我试图用谷歌搜索，但没有用。任何人都可以帮助我吗？PC和手机可以通过蓝牙连接。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:55:10.043

我认为您可以使用的最好的方法是套接字。在您的 c# 应用程序中创建一个套接字并从 android 设备连接到它。如果它们都在同一个网络中，这应该可以工作。

否则，您可以尝试使用蓝牙连接设备。

# .net - try catch 的条件编译

> ID：10278243
> 
> 赞同：1
> 
> 时间：2012-04-23T09:50:17.027
> 
> 标签：.net, exception-handling, lambda, try-catch, conditional-compilation

我一直在使用条件编译作为一种允许我使用生产代码轻松调试（通过删除 try catch 块）的方法。我这样做的原因是因为 Visual Studio 将（显然）将抛出异常的位置显示为最顶层处理程序的 catch 块。不幸的是，在您删除处理程序之前，这会阻止调试或至少定位错误的确切位置。

这是我当前方法的一个示例

```
 private void btnConnect_Click(object sender, EventArgs e)
    {
#if DEBUG
        DoSomething();
#else
        try 
        {
            DoSomething();
        } 
        catch (Exception ex) 
        {
            Logger.Log(ex);
            MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        finally 
        {
            CleanUp();
        }
#endif
    } 
```

这种方法会导致大量的代码重复，我希望能找到一种替代方法。

我考虑了一种方法，我将使用 lambdas 创建自定义 try catch 块处理程序，该处理程序在内部使用条件编译来处理或重新抛出这样的异常。

```
 void TryCatchFinally(Action tryBlock, Action<Exception> catchBlock, Action finallyBlock)
    {
#if DEBUG
        tryBlock.Invoke();
        finallyBlock.Invoke();
#else 
        try
        {
            tryBlock.Invoke();
        }
        catch (Exception ex)
        {
            catchBlock.Invoke(ex);
        }
        finally
        {
            finallyBlock.Invoke();
        }
#endif
    } 
```

但我更愿意保留标准的 try catch 语法（另外，这种方法意味着我无法在没有重大更改的情况下将其应用于现有代码）

有没有人找到解决这个问题的好方法，或者有人能想到我的版本的改进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:59:23.630

我不确定你为什么需要这样做——我从未见过有人像这样调试异常。

您是否知道可以将 Visual Studio 配置为在引发异常时中断而无需不同的代码路径？

调试->异常->检查“抛出”

如果我正确理解了这个问题 - 那么这可以解决您在 VS 中调试的问题。

# mysql - 在表上执行 CREATE TRIGGER 时如何删除默认的 DEFINER？

> ID：10278248
> 
> 赞同：8
> 
> 时间：2012-04-23T09:50:25.410
> 
> 标签：mysql, triggers

我正在推出一些软件的更新，其中包括运行 SQL 脚本来创建触发器。

在我的`.sql`文件语法中，我没有包含任何 DEFINER 子句，因为我希望我的客户的生产 MySQL 用户（他们自己设置）能够在程序运行时执行这些触发器。

问题是，测试表明 MySQL 会自动为 TRIGGER 创建一个 DEFINER，使用`'CURRENT_USER'@'%'`. 当您做明智的事情并使用（受限）帐户进行日常数据操作并使用另一个帐户进行大更新（root ？）时，您最终会尝试使用一个或多个没有权限的用户执行 TRIGGER去做吧。

有没有办法删除这个“自动添加定义器”功能？

我尝试输入`DEFINER = '%'@'%'`，但这不被接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-24T02:02:58.287

如果您在 *nix 平台上，则可以通过以下任一命令行脚本删除定义器。

`cat database.sql | sed -e "s/DEFINER=[^*]*\*/\*/" > database_nodefiner.sql`

```
perl -pe 's/\sDEFINER=`[^`]+`@`[^`]+`//' < oldfile.sql > newfile.sql 
```

如果您的 database.sql 非常大，则不要先转储它然后删除定义器，而是在转储期间删除定义器。

`mysqldump database | sed -e "s/DEFINER=[^*]*\*/\*/" > database_nodefiner.sql`

# spring - 停止 h2 嵌入式数据库

> ID：10278252
> 
> 赞同：1
> 
> 时间：2012-04-23T09:50:42.700
> 
> 标签：spring, h2

目前我在我的弹簧上下文中为 h2 嵌入式数据库使用以下配置：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy">
    <constructor-arg>
        <bean class="org.springframework.jdbc.datasource.SimpleDriverDataSource">
            <property name="driverClass" value="org.h2.Driver" />
            <property name="url"
                value="jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;TRACE_LEVEL_SYSTEM_OUT=2" />
        <property name="username" value="sa" />
        <property name="password" value="" />                 
        </bean>
    </constructor-arg>
</bean> 
```

当tomcat启动或停止时，我能够启动和停止数据库。当我重新部署我的应用程序时，我想重新启动我的 h2 嵌入式数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:52:16.040

使用`DB_CLOSE_DELAY=-1`将确保即使所有连接都关闭，也可以保留数据库。如果删除此选项，则一旦关闭最后一个连接，数据就会丢失。

# iphone - 使用 NSFetchedResultsController 和 Search Display Controller 搜索 CoreData

> ID：10278257
> 
> 赞同：1
> 
> 时间：2012-04-23T09:51:21.210
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchedresultscontroller

这可能是一个简单的问题，但是经过大量搜索后，我对正确答案仍然有些困惑。

我有一个使用核心数据的应用程序和一个由 NSFetchedResultsController 填充的 UITableView。我想在表格视图的顶部添加一个搜索栏，并使用搜索栏和搜索显示控制器过滤表格视图中的数据

我想知道的是这样做的正确方法是什么？

每次搜索词更改时，我见过的大多数示例都会修改 NSFetchRequest 谓词？这似乎会给所有请求增加很多开销

苹果示例似乎只处理基于数组的 tableview 结果搜索。

我是否应该基于 fetchedObjects 创建一个数组并在该数组上搜索并将过滤后的结果放入另一个数组中。

非常感谢提前马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:44:18.070

不要过早优化。

更改获取请求的谓词。NSFetchResultsController 非常适合减少对 CoreData 的访问。

一旦你让它工作，使用仪器来隔离任何性能问题。

如果您自己搜索对象数组，则必须将每个对象都放入内存中，然后搜索所有对象。是的，你仍然需要搜索它们，但是让 CoreData 来做，因为它几乎总是更快。

**编辑**

关于 iOS 应用程序开发的斯坦福 iTunes U 课程是免费视频指导的不错选择。Ray Wenderleich 在这里有一个很好的关于 NSFetchedResultsController 的教程：[http ://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)

# uitableview - TableViewCell 带有 3 个带有图像和标签的按钮

> ID：10278261
> 
> 赞同：0
> 
> 时间：2012-04-23T09:51:42.077
> 
> 标签：uitableview, uibutton

我正在尝试创建一个具有 3 个自定义按钮和标签的 tableView，我有 12 个图像，相当于 4 行，每行 3 个按钮。现在的代码现在显示所有行中的前 3 个图像，我想要所有 12 个按钮中的所有 12 个图像。

所以每个按钮都需要有一个图像和一个与其他按钮不同的标签。

有人可以帮我创建这个吗，这是我到目前为止的代码 **编辑格式**

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

}

btnImages = [[NSMutableArray alloc] initWithObjects:@"dog1.png",@"dog2.png",@"dog3.png",@"dog4.png",@"dog5.png",@"dog6.png"
             @"dog7.png",@"dog8.png",@"dog9.png",@"dog10.png",@"dog11.png",@"dog12.png",nil];

for (int i = 0; i < 3; i++) {
    //position the UiButtons in the scrollView
    CGRect frame = CGRectMake((i*100) + 35, 35, 45, 45);

    //Create the UIbuttons
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button setTag:i];
    [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    button.frame = frame;
    button.clipsToBounds = NO;
    button.contentMode = UIViewContentModeCenter;

    //Add images to the button
    UIImage *btnImg = [UIImage imageNamed:[btnImages objectAtIndex:i]];
    [button setBackgroundImage:btnImg forState:UIControlStateNormal];
     [cell.contentView addSubview:button];   
}

return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:16:58.453

只是把行

```
btnImages = [[NSMutableArray alloc] initWithObjects:@"dog1.png",@"dog2.png",@"dog3.png",@"dog4.png",@"dog5.png",@"dog6.png"
         @"dog7.png",@"dog8.png",@"dog9.png",@"dog10.png",@"dog11.png",@"dog12.png",nil]; 
```

方法里面`viewDidLoad:`

# jquery - 以不同图像尺寸为中心的幻灯片页面

> ID：10278262
> 
> 赞同：0
> 
> 时间：2012-04-23T09:51:58.800
> 
> 标签：jquery, slideshow, html, center, css-position

我有一个幻灯片，在页面中垂直/水平居中（通过窗口调整 jquery）。

它适用于相同大小的图像。但是，如果我希望不同尺寸的图像在 div 中垂直/水平居中，这是如何工作的？

更新：我设法解决了它。这是 JSFIDDLE：http: [//jsfiddle.net/mihaene/FSeAe/3/](http://jsfiddle.net/mihaene/FSeAe/3/)

解决方案是将此属性赋予居中 DIV 中的 IMG：

```
margin:auto; top:0; bottom:0; left:0; right:0; 
```

我不确定，但也许，这可以用更简单的方式完成。欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:57:11.150

在幻灯片导航单击时调用调整大小方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:07:14.457

试试这个 css，它适用于尺寸小于 div #slideshow 的图像

```
#slideshow img { margin:0 auto;} 
```

我使用我编写的以下方法来调整尺寸。

```
function resizeDimensions(oldW, oldH, nuW, nuH){

        // resize according to given width
        if(nuW!=null){
                nuH = (oldH*nuW)/oldW;
            }
        else
        if(nuH!=null)   // resize according to given Height
            {
                nuW = (nuH*oldW)/oldH;
            }

         var dimensions = new Array(nuW, nuH);
     return dimensions;

     } 
```

# c# - 如何在 EF 5 中初始化数据库期间更改文件路径

> ID：10278263
> 
> 赞同：0
> 
> 时间：2012-04-23T09:52:00.417
> 
> 标签：c#, entity-framework

我开始使用 EF 5 开发一个项目，并在我的 web 文件夹旁边创建一个文件夹并在其中创建我的数据库。当我尝试以下代码时，我的数据库在 * *C:\Program File\Microsoft SQl Server\10.0\中创建数据**

```
DBContext.Database.Delete();
DBContext.Database.Create(); 
```

如何更改数据库文件的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:58:48.373

通过使用正确的连接字符串。您显然正在使用 SQL Server 存储数据库的连接字符串，但您想使用带有[附件](http://www.connectionstrings.com/sql-server-2008)的连接字符串（只有安装了 SQL Server Express 才可能）。

# javascript - 如何连接输入值并将它们转换为总数？

> ID：10278264
> 
> 赞同：2
> 
> 时间：2012-04-23T09:52:07.397
> 
> 标签：javascript, jquery

我有 4 个值为 1 - 4 的按钮，我想在每次单击一个数字时连接按钮值并将其显示在其中，`#result`但我对应该如何完成感到困惑。目前我已经创建了一个数组，然后在单击时将每个值推入数组中，然后将其转换为字符串，然后我将其转换为数字，但我猜这是完全错误的方法，任何人都可以建议我怎么能做到这一点？

JavaScript

```
$(document).ready(function () {

  var arr = [], value;

  $('.num').on('click', function(e) {
    value = $(this).val();
    arr.push(value);
    var test = parseInt(arr.toString());
    console.log(test);
    $('#result').text(test);

  });

}); 
```

HTML

```
 <form id="myForm">
    <input type="text" id="result" />
    <input type="button" class="num" value="1" />
    <input type="button" class="num" value="2" />
    <input type="button" class="num" value="3" />
    <input type="button" class="num" value="4" />
  </form> 
```

JSBIN - [http://jsbin.com/exuwuz/2/edit](http://jsbin.com/exuwuz/2/edit)

所以基本上命中1和#result将显示1命中2和#result将显示12等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:59:14.410

您的代码可以简化。尝试：

```
$('input.num').click(
   function() {
    $('#result')[0].value += this.value;
   }
);​ 
```

看到[这个jsfiddle](http://jsfiddle.net/KooiInc/axnWy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:56:07.550

串联使用`""`以防止数字相加：

```
$(this).val("" + $(this).val() + value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T10:01:36.303

`array.toString()`返回以逗号分隔的数组值列表（例如。`1,2,3,4`）。`parseInt`然后将仅解析第一个值（字符串的第一部分是正确的整数）。

要实现您想要使用的行为，[`array.join()`](http://www.w3schools.com/jsref/jsref_join.asp)而不是`array.toString()`，它只会连接数组的内容：

```
var test = parseInt(arr.join('')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T09:55:59.343

如何连接并直接显示？

```
$(document).ready(function () {
  $('.num').on('click', function(e) {
    $('#result').val("" + $('#result').val() + $(this).val());
  });
}); 
```

# extjs - Sencha Touch Carousel 和 TabPanel

> ID：10278266
> 
> 赞同：0
> 
> 时间：2012-04-23T09:52:07.717
> 
> 标签：extjs, carousel, tabpanel

我想要一个带有 TabPanel 的视图，并在带有两张卡片的 Carousel 内查看。

像这样：

```
var view = Ext.define("abril16.view.Main2", {
extend: 'Ext.tab.Panel',
requires: ['Ext.TitleBar', 'Ext.carousel.Carousel'],
config: {
    tabBarPosition: 'bottom', 
    items: [{
        title: 'Home',
        iconCls: 'home',
        styleHtmlContent: true,
        scrollable: true,
        layout: 'fit',
        flex: 1,
        items: {
            docked: 'top',
            xtype: 'titlebar',
            title: 'Beetoom',
        },
    },
    {
        title: 'Discover',
        iconCls: 'action',
        scrollable: true,
        items: [{
            docked: 'top',
            xtype: 'titlebar',
            title: 'Select',
            layout: 'fit',
            flex: 1,
        }, 
        {
            docked: 'top',
            xtype: 'titlebar',
            title: 'Discover',
        },
        {
            xtype: 'carousel',
            items: [{   
                            xtype: 'checkboxfield',
                            name: 'Hola',
                            label: 'Hola'
                        },
                        {
                            xtype: 'checkboxfield',
                            name: 'Action',
                            label: 'Adventure'
                        }
                    ]
                }

                ]
    }
        ]
    }

            }); 
```

问题是这里什么都没有发生。没有语法错误，但没有显示布局，而是轮播我在面板内有一个空白背景。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:59:57.513

我测试了你的代码。这是我从您的代码中观察到的。

1.  为什么你`['Select','Discover']`的第二个标签需要两个标题栏`'Discover'`。我认为，您在标签中添加了两次标题栏`'Discover'`。同一个标签有两个标题栏绝对没有意义。

2.  包括这样的发现标签代码，

    ```
     {
            title: 'Discover',
            iconCls: 'action',
            styleHtmlContent:true,
            layout:'card',
            items: [
                {
                    docked: 'top',
                    xtype: 'titlebar',
                    title: 'Discover',
                },
                {
                xtype: 'carousel',
                items: [
                    {   
                      xtype: 'checkboxfield',
                      name: 'Hola',
                      label: 'Hola'     
                    },
                    {
                       xtype:'checkboxfield',
                       name:'Action',
                       label:'Adventure'    
                    }
                 ]
              }
            ]
     } 
    ```

# c# - 在 SQL Server CE、C# 中创建自动增量列的查询

> ID：10278277
> 
> 赞同：0
> 
> 时间：2012-04-23T09:52:41.197
> 
> 标签：c#, database, sql-server-ce, auto-increment

SQL Server CE 中创建自增列的查询是什么？

尝试过`IDENTITY(1,1), PRIMARY KEY`..还没有运气:(

请指导我，提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:04:50.667

从[文档](http://msdn.microsoft.com/en-us/library/ms174639%28v=sql.90%29.aspx)中：

```
CREATE TABLE MyCustomers 
    (
      CustID int IDENTITY (100,1) PRIMARY KEY
     ,CompanyName nvarchar (50)
    ) 
```

我认为您的问题是身份条款之后的“，” - 删除它，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:06:27.707

如果你尝试过

```
IDENTITY(1,1), PRIMARY KEY 
```

尝试删除逗号：

```
IDENTITY(1,1) PRIMARY KEY 
```

另外，请注意：

*   一张表最多可以有一个标识列
*   您可以`PRIMARY KEY`在第一次创建表时指定列。如果你正在做一个`ALTER TABLE [...] ADD COLUMN`，这是无效的

# vba - 如何在 Visual Basic Excel 中将数字数组写入 Excel

> ID：10278278
> 
> 赞同：0
> 
> 时间：2012-04-23T09:52:45.020
> 
> 标签：vba

我从 txt 文件中读取数据，然后将其保存到整数数组中。现在我想将该数组导出到 Excel 工作表，但我不知道为什么结果不正确。请帮我。

```
Input #1, n

'Now construct the (n x n) matrix that will hold the problem and read in the problem from the input file
ReDim ProbMatrix(1 To n, 1 To n) As Integer

Dim someNumber As Integer
Dim startPosition As Long
Dim endPosition As Long
Dim temp As String

Do While Not (EOF(1))
    startPosition = Seek(1)  '// capture the current file position'
    Line Input #1, temp      '// read an entire line'
    endPosition = Seek(1)    '// determine the end-of-line file position'
    Seek 1, startPosition    '// jump back to the beginning of the line'

    '// read numbers from the file until the end of the current line'
    For i = 1 To n
        For j = 1 To n
            Do While Not (EOF(1)) And (Seek(1) < endPosition)
                Input #1, someNumber
                ProbMatrix(i, j) = someNumber
                MsgBox ProbMatrix(i, j)
            Loop
        Next j
    Next i        
Loop    
Close #1        

Dim NewProbMatrix() As Integer
Dim act As Action
NewProbMatrix = makeInitialSolution(ProbMatrix, n)
Cells(1, 1) = n
For i = 1 To n
    For j = 1 To n
        Cells(i + 1, j) = ProbMatrix(i, j)
    Next
Next

Application.Save
Workbooks.Close
MsgBox ("Finished") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T00:13:31.540

尝试这个

```
With Thisworkbook.Activesheet
.Cells(1, 1).value = n
For i = 1 To n
    For j = 1 To n
        .Cells(i + 1, j).value = ProbMatrix(i, j)
    Next
Next
End With 
```

希望这有帮助，干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T09:18:53.300

你可能需要**收藏**

参考：[自定义集合类](http://dailydoseofexcel.com/archives/2010/07/04/custom-collection-class/)

# jquery-plugins - jQuery Colorbox，iframe 内容不在 iPad 中滚动

> ID：10278279
> 
> 赞同：4
> 
> 时间：2012-04-23T09:52:48.707
> 
> 标签：jquery-plugins, lightbox, colorbox

在 iPad 上查看时，Colorbox iframe 内容不会滚动，请阅读以下内容：

[https://github.com/jackmoore/colorbox/issues/41#issuecomment-5244379](https://github.com/jackmoore/colorbox/issues/41#issuecomment-5244379)

当显示大于从 Ipad 为颜色框设置的尺寸的网页时，滚动功能被禁用和/或不存在。

有些人可能会建议用一根手指或两根手指滚动，这是行不通的。

先决条件：拥有一台 Ipad，或者去当地的百思买

重现步骤：转到[http://colorpowered.com/colorbox/core/example1/index.html](http://colorpowered.com/colorbox/core/example1/index.html) 点击外部网页（Iframe）链接，在 Google 搜索中输入内容

结果：您无法滚动浏览结果。

有解决办法吗？有什么东西可以解决这个问题吗？顺便说一句，这在 IE、Chrome 和 Firefox 上运行良好。

任何机构都可以解决这个问题？？？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T12:13:11.683

## 更新 - 作者固定问题

显然，截至今天（2013 年 2 月 4 日），杰克已经[解决了这个问题。](https://github.com/jackmoore/colorbox/issues/41#issuecomment-13061816)值得从他的[Github](https://github.com/jackmoore/colorbox/)页面获取最新版本。

* * *

## 以前的解决方案

好的，我无法让 jScrollPane 正常工作。这并不是说你不会，但我也在使用自定义调整大小来调整 iframe 的大小，我认为它在 jScrollPane 的尺寸计算方面表现不佳。

## 解决方案

然而，我确实设法让它工作，这要归功于更一般的 iOS iframe 滚动问题的解决方案，这要归功于[stackoverflow 上的 Sharon](https://stackoverflow.com/questions/5267996/how-to-properly-display-an-iframe-in-mobile-safari/5359546#5359546)。我对她的代码进行了一些调整，以便更好地使用 colorbox。*请注意，这仅适用于您控制 iframe 内容的情况*

只需将以下代码放入您的 iframe 中：

```
setTimeout(function () {
    var startY = 0;
    var startX = 0;
    var b = document.body;
    b.addEventListener('touchstart', function (event) {
        startY = event.targetTouches[0].screenY;
        startX = event.targetTouches[0].screenX;
    });
    b.addEventListener('touchmove', function (event) {
        event.preventDefault();
        var posy = event.targetTouches[0].screenY;
        var h = parent.document.getElementById("cboxLoadedContent");
        var sty = h.scrollTop;

        var posx = event.targetTouches[0].screenX;
        var stx = h.scrollLeft;
        h.scrollTop = sty - (posy - startY);
        h.scrollLeft = stx - (posx - startX);
        startY = posy;
        startX = posx;
    });
}, 1000); 
```

滚动并不紧张，虽然您没有原生滚动的逐渐减慢，但当您抬起手指时它就会停止。另外，没有滚动条。除此之外，它是一个完美的解决方案。

[包含 Sharon 解决方案](https://stackoverflow.com/questions/5267996/how-to-properly-display-an-iframe-in-mobile-safari/5359546#5359546)的页面提供了一种替代方案，可用于尝试不控制 iframe 的场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:32:24.307

我刚刚完成了这个，在我的一般 css 中我添加了`#cboxLoadedContent{-webkit-overflow-scrolling: touch;}`

然后，在我由 colorbox 打开的视图中，我在 css 中添加了以下样式`body{-webkit-transform:translate3d(0, 0, 0);}`

这适用于 iPad 和 iPhone。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:16:16.287

您是在控制自己的 iframe 内容，还是来自外部网站（即不同域）的内容？如果是后者，我无能为力。

如果您可以控制 iframe 内容，则可以使用[jScrollPane 插件](http://jscrollpane.kelvinluck.com)来解决您的问题。

你的 iframe 的主体应该有 CSS overflow:auto，你需要在你的 iframe 内容周围包裹一个 div。在 iframe 内部准备好时，获取 iframe 窗口的高度，将包装器 div 的 css 高度设置为窗口的高度（或稍微低一点），然后将 jScrollPane 应用于包装器 div。

```
$(document).ready(function() {
    var $container = $("#myDiv");
    var $win = $(window);

    if ($container.height() >= $win.height()){
        $container.css({
            'width': $win.width(),
            'height': $win.height()
        });

        $container.jScrollPane();
    }
}); 
```

# mysql - MYSQL 5.5 - 使用插入语句编写文件，该语句应要求输入和插入

> ID：10278281
> 
> 赞同：-1
> 
> 时间：2012-04-23T09:52:53.613
> 
> 标签：mysql

我是Mysql的新手。

我有一个包含许多插入语句的文件，用于插入用户名、密码和其他用户详细信息。

我必须在 mysql 命令提示符中运行它。

在 mysql 中运行插入文件时，命令应该要求我输入用户名，我应该输入用户名，它应该要求我输入密码和其他详细信息。

这样，所有插入语句都应该获取值。

我应该如何编写批处理文件，任何帮助将不胜感激。谢谢， 斯里德维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:21:09.093

据我所知，你不能使用 MySQL 和简单的 SQL 语句来做到这一点。最好的解决方案是使用像 PHP 这样的编程语言。或者，如果您有所有语句，您可以将它们全部放在一个 SQL 文件中并使用 mysqldump 批量执行它们。

# css - 需要 CSS 3 软件

> ID：10278287
> 
> 赞同：-2
> 
> 时间：2012-04-23T09:53:08.840
> 
> 标签：css

我正在开发一个 Web 界面，并希望使用 CSS3 使其美观。我没有使用 HTML5。该页面将具有**边框半径**和**渐变**等样式。

我想要一个可以验证（并支持）CSS3 样式的软件，例如`-moz-border-radius`.

有很多在线工具，但我想要一个可以**安装**在我的电脑上的软件（离线工作）。我希望软件能够自动应用`-moz-border`（`webkit border`我的意思是所有可能的变化和适应）用于单个边框半径控制，所有 CSS 渐变语法自动用于渐变控制等。

简而言之，我想要一个可以让我完全控制**CSS3**的软件，对不懂语法的初学者很友好。该软件可能不仅使用自动完成，因为必须学习要使用的语法，而是具有控件或选项来实现某些元素（如 等）的样式`<div>`。`<span>`该软件可能支持所见即所得的网页编辑，包括实时页面预览（类似于[**Style Master**](http://westciv.com/style_master/)）。该软件还可以通知多个浏览器的兼容性。

帮我选择合适的软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:59:50.960

我不确定当你输入 moz 声明时是否有任何编辑器会自动应用 webkit 声明。话虽如此，您可以尝试 Komodo Edit（它是免费的且独立于平台），它支持所有 CSS3 样式，并会​​在您开始输入 CSS3 属性的前几个字母时为您自动完成它。

我想在这里添加的另一件事是，当然这只会解决边界半径问题，您可以使用 jquery 角插件，在其中指定选择器并像这样为其分配角功能

```
$(".button").corner(); 
```

这将在运行时根据访问它的浏览器自动应用 moz、webkit 等声明。还有更多方法可以使用角插件。

```
$(".button").corner('5px'); //specify border radius 
```

或者

```
$(".button").corner('tl tr'); //apply border radius only to top left and top right 
```

jQuery 角落：http: [//jquery.malsup.com/corner/](http://jquery.malsup.com/corner/)

科莫多编辑：[http ://www.activestate.com/komodo-edit](http://www.activestate.com/komodo-edit)

# android - 如何在其位置上动态旋转图像？

> ID：10278288
> 
> 赞同：1
> 
> 时间：2012-04-23T09:53:08.813
> 
> 标签：android, android-layout, animation, android-animation

我想动态旋转图像（不是通过 XML 代码）。我正在使用此代码来旋转图像：

```
public void rotateAnimation(){
    // Create an animation instance
    Animation an = new RotateAnimation(30, 360);

    // Set the animation's parameters
    an.setDuration(2000);               // duration in ms
    an.setRepeatCount(0);                // -1 = infinite repeated
    an.setRepeatMode(Animation.REVERSE); // reverses each repeat
    an.setFillAfter(true);               // keep rotation after animation

    // Aply animation to image view
    scanCircle.setAnimation(an);
} 
```

使用此代码，我的 ImageView 得到旋转，但它不是在它的位置上，而是在它的位置之外。我想要的是在它自己的位置上旋转它。

那么，如何使其成为可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:57:44.190

我认为位置 pivotx 和 pivotY 会有所帮助[http://developer.android.com/reference/android/view/animation/RotateAnimation.html#RotateAnimation%28float,%20float,%20float,%20float%29](http://developer.android.com/reference/android/view/animation/RotateAnimation.html#RotateAnimation%28float,%20float,%20float,%20float%29)

```
RotateAnimation(float fromDegrees, float toDegrees, float pivotX, float pivotY) 
```

假设如果你想从中间旋转然后

```
RotateAnimation(30, 360, totalWidth/2, totalHeight/2) 
```

# php - 在显示论坛页面上获取最新主题并发布（回复）

> ID：10278293
> 
> 赞同：0
> 
> 时间：2012-04-23T09:53:32.443
> 
> 标签：php, sql, codeigniter

到目前为止，这是我的 Categories_model：

```
<?php
class Categories_model extends CI_Model {

    public function __construct() {
        $this->load->database();
    }

    public function get_categories($parent = NULL) {
        $this->db->from('categories')->where('parent', $parent)->order_by('position');
        $query = $this->db->get();
        return $query->result_array();  
    }

} 
```

SQL结构：

```
CREATE TABLE IF NOT EXISTS `categories` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `parent` int(11) unsigned DEFAULT NULL,
  `title` varchar(100) NOT NULL,
  `description` text NOT NULL,
  `position` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7 ;

CREATE TABLE IF NOT EXISTS `posts` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `tid` int(11) unsigned NOT NULL,
  `title` varchar(100) NOT NULL,
  `body` text NOT NULL,
  `created` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `threads` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `cid` int(11) unsigned NOT NULL,
  `title` varchar(100) NOT NULL,
  `body` text NOT NULL,
  `created` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

在我加载显示所有类别/子类别的视图之前，我的控制器：

```
$data['categories'] = $this->categories_model->get_categories();
$forum = array();

foreach ($data['categories'] as $category) {
    $forum[$category['id']] = $this->categories_model->get_categories($category['id']);
}

$data['subcategories'] = $forum;

$this->template
        ->title('Forum')
        ->build('home', $data); 
```

**我想在主页上显示的每个“子类别”中获取最新的主题和对该主题的回复。但我不太确定如何做到这一点，方法或 SQL 看起来如何以及在我当前的代码中在哪里实现它？**

基本上：

论坛子类别（最新帖子） 类别 2（线程 2） 链接 链接（转到最新回复）

是我试图实现的目标，但我不知道该怎么做。

（显示页面）

```
 <table class="tborder" width="100%" cellspacing="1" cellpadding="6" border="0" align="center">
            <thead>
                <tr align="center">
                    <td class="thead">&nbsp;</td>
                    <td class="thead" width="100%" align="left">Forum</td>
                    <td class="thead">Senaste inlägg</td>
                    <td class="thead">Ämnen</td>
                    <td class="thead">Inlägg</td>
                </tr>
            </thead>
<?php
foreach ($categories as $row) {
?>
            <tbody>
                <tr>
                    <td class="tcat" colspan="5">
                        <a href="forumdisplay.php?f=<?php echo $row['id']; ?>"><?php echo $row['title']; ?></a>
                    </td>
                </tr>
            </tbody>
<?php
    foreach ($subcategories[$row['id']] as $sub_row) {
?>
            <tbody>
                <tr align="center">
                    <td class="alt2">
                        Ikon
                    </td>
                    <td id="f<?php echo $sub_row['id']; ?>" class="alt1Active" align="left">
                        <div>
                            <a href="forumdisplay.php?f=<?php echo $sub_row['id']; ?>">
                                <strong><?php echo $sub_row['title']; ?></strong>
                            </a>
                            <span class="smallfont">(0&nbsp;besökare)</span>
                        </div>
                        <div class="smallfont"><?php echo $sub_row['description']; ?></div>
                    </td>
                    <td class="alt2">
                        <div class="smallfont" align="left">
                            <div>
                                <span style="white-space:nowrap">
                                    <img class="inlineimg" border="0" alt="" src="images/icons/icon1.gif">
                                    <a title="Gå till det första olästa inlägget i ämnet 'Ämne 1'" style="white-space:nowrap" href="#">
                                        <strong>Ämne 1</strong>
                                    </a>
                                </span>
                            </div>
                            <div style="white-space:nowrap">
                                av
                                <a rel="nofollow" href="#">Medlem</a>
                            </div>
                            <div align="right" style="white-space:nowrap">
                                0000-00-00
                                <span class="time">00:00</span>
                                <a href="#">
                                    <img class="inlineimg" border="0" alt="Gå till det senaste inlägget" src="#" title="Gå till det senaste inlägget">
                                </a>
                            </div>
                        </div>
                    </td>
                    <td class="alt1">0</td>
                    <td class="alt2">0</td>
                </tr>
            </tbody>
<?php
    }
}
?>
        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:31:44.120

## 检索最新帖子

**为此，我会像这样查询数据库：** order `DESC`by`id`和 retrieve `id`。由于您要插入一个新行，因此您需要做的就是整理好`id`遗嘱。`auto_increment``DESC`

```
<?php
// This is a model
public function getPosts(){
  $this->db->order_by('id', 'DESC');
  $q = $this->db->get('posts');

  //Make sure we returned something.
  if($q->num_rows() > 0){
    return $q->result();
  }else{
    return false;
  }
} 
```

## 检索最新类别

**为此，我将添加一个`last_posted`字段：** `last_posted int(11) unsigned NOT NULL`并`time()`在您更新帖子或类别时使用。然后据此获取`last_posted`

```
<?php
// This is a model - get latest category
public function getLastPostedCategories(){
  $this->db->order_by('last_posted', 'DESC');
  $q = $this->db->get('categories');

  //Make sure we returned something.
  if($q->num_rows() > 0){
    return $q->result();
  }else{
    return false;
  }
} 
```

## 更新类别

**为此，我将运行两个查询，一个用于插入新帖子，一个用于更新您选择的类别：**我只向您展示更新类别部分。

```
<?php
// this is a model - add the last_posted timestamp to a category
public function updatePostDate($cid){
  // i like to check to make sure, $cid is set.. you could do this in the controller too.
  if($cid){
    $this->db->where('id', $cid);
    $this->db->update('categories', array( 'last_posted' => time() ));
    // Make sure we updated the category
    if($this->db->affected_rows() > 0){
      return true;
    }else{
      return false;
    }
  }else{
    return false;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:27:30.707

我会在表线程中创建一个额外的字段：last_post_time。每次创建新帖子时，都会更新此字段。这不是普通的形式，但对于论坛应用程序来说是最简单的。

# amazon-ec2 - 通道 1 已关闭，您不能再使用了！(AMQP::ChannelClosedError)

> ID：10278294
> 
> 赞同：1
> 
> 时间：2012-04-23T09:53:33.713
> 
> 标签：amazon-ec2, monitoring, sensu

我正在尝试使用 sensu 框架来监控我的 EC2 实例，但不幸的是我面临一个问题`The channel 1 was closed, you can't use it anymore! (AMQP::ChannelClosedError)`。错误堆栈也在这里提出，但可以找出解决方案。 [http://www.sand4.info/index.php?q=aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTQ5MTA0NA%3D%3D](http://www.sand4.info/index.php?q=aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTQ5MTA0NA%3D%3D)

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:53:10.967

从 IRC 获得解决方案...我没有在我的 Windows 系统中配置石墨。我还没有找到任何在 Windows 中配置的方法。我所做的是我删除了石墨处理程序并将默认处理程序放在客户端和服务器端。这是服务器端的 config.json。

```
{
  "rabbitmq": {    
    "port": 5672,
    "host": "127.0.0.1",
    "user": "guest",
    "password": "guest",
    "vhost": "/"    
  },
  "redis": {
    "host": "localhost",
    "port": 6379
  },
  "api": {
    "host": "localhost",
    "port": 4567
  },
  "dashboard": {
    "host": "localhost",
    "port": 8080,
    "user": "admin",
    "password": "admin"
  },
   "handlers": {   
    "default": {
       "type": "pipe",
        "command": "ruby C:/sensuServer/sensuserverSSL/stdout.rb",       
         "send_only_check_output": true
     }
  },
  "checks": {
        "b": {
              "command": "ruby C:/sensuServer/sensuserverSSL/stdout.rb",
              "subscribers": [
                "test"
              ],
              "interval": 10,
              "auto_resolve": true
            }
    }   
} 
```

# ios - 单一语言的 iOS 应用本地化

> ID：10278295
> 
> 赞同：1
> 
> 时间：2012-04-23T09:53:33.917
> 
> 标签：ios, localization

我查看了与该论点相关的堆栈溢出的每个答案，但我找不到对我的情况有用的东西，所以我尝试创建一个更具体的问题：

我必须创建一个**仅用意大利语**本地化的应用程序，这里是我的步骤：

*   `Italian`在 iTunes 连接中设置为默认语言
*   在信息列表中设置`Native development region`为意大利（不确定它是否有用......）
*   从项目本地化中删除了英语
*   在项目 Localizations 中添加了意大利语（截图如下）

![在此处输入图像描述](../Images/a6638dc0261def6ce5a2d151da58e674.png)

在我看来，这将是为单一语言设置应用程序的正确方法（与默认英语不同）。

但是查看目标构建阶段，我发现 infoPlist.string 不再可用： ![在此处输入图像描述](../Images/1f3b9639235288c6151919497276d9a9.png)

这非常奇怪，因为我可以毫无错误地编译我的项目......

最后，此过程将导致 iTunes 应用程序区域中的“语言”属性填充为“意大利语”而不是“英语”。

所以，我想知道我的步骤是否正确，或者我是否犯了一些错误。你觉得这个程序怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:23:26.073

如果您正在做一个只显示意大利语的单语言应用程序，那么您根本不需要本地化。只需用意大利语输入所有字符串！`localizable.strings`使用文件和调用而不是在代码中使用硬编码字符串仍然是一种很好的做法，`NSLocalizedString`这样如果有一天您决定本地化您的应用程序，您就不必更改代码。但是现在您可以删除 XCode 中 Localizations 下的所有内容，只需确保 info.plist 文件中的本地区域（[CFBundleDevelopmentRegion](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW1)）设置为意大利。如果您围绕项目的目标设置进行设置，您可能会在 XCode 中找到一个设置。

# xml - 数据库列类型 CHAR 的 XML OraDbType 代码错误

> ID：10278296
> 
> 赞同：1
> 
> 时间：2012-04-23T09:53:37.220
> 
> 标签：xml, database, oracle11g

从 Oracle DB 检索的 XML 有一个奇怪的问题。我正在使用 OraDB11g，接下来将描述我的问题：

当我创建一个具有 CHAR 类型列的表并从查询中获取 XML 并返回一个带有表行的游标时，我得到了假定的正确 OraDbType 代码 104：

表创建：

```
create table AA_Table1
(
ID number(2,0) not null,
**ColumnA char(1) null,
ColumnB char(1) default 'S' not null,**
constraint PK_AA_Table1
primary key ( ID )
)
tablespace "X"
storage
(
...
)
compress for all operations
; 
```

和返回的 XML：

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema id="o_ListaTable" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop">
<xs:element name="o_ListTable" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
<xs:complexType>
<xs:choice minOccurs="0" maxOccurs="unbounded">
<xs:element name="o_List" msprop:REFCursorName="REFCursor">
<xs:complexType>
<xs:sequence>
<xs:element name="ID" msprop:OraDbType="111" type="xs:short" minOccurs="0" />
**<xs:element name="COLUMNA" msprop:OraDbType="104" type="xs:string" minOccurs="0" />
<xs:element name="COLUMNB" msprop:OraDbType="104" type="xs:string" minOccurs="0" />** 
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:choice>
</xs:complexType>
</xs:element>
</xs:schema> 
```

但是...当我在表上插入另一列并更改它之后，我在返回的 XML 上为新添加的列得到了错误的 OraDBType 代码...

添加了新列： **alter table AA_Table1 add ColumnC char(1) default 'S' not null;**

返回的 XML 是：

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema id="o_ListaTable" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop">
<xs:element name="o_ListTable" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
<xs:complexType>
<xs:choice minOccurs="0" maxOccurs="unbounded">
<xs:element name="o_List" msprop:REFCursorName="REFCursor">
<xs:complexType>
<xs:sequence>
<xs:element name="ID" msprop:OraDbType="111" type="xs:short" minOccurs="0" />
<xs:element name="COLUMNA" msprop:OraDbType="104" type="xs:string" minOccurs="0" />
<xs:element name="COLUMNB" msprop:OraDbType="104" type="xs:string" minOccurs="0" />
**<xs:element name="COLUMNC" msprop:OraDbType="126" type="xs:string" minOccurs="0" />**
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:choice>
</xs:complexType>
</xs:element>
</xs:schema> 
```

**我的问题是：为什么这个 OraDbType 代码不同？检查是否在表创建上创建了相同的列类型 CHAR(1) NOT NULL DEFAULT 'S' 并且 OraDbType 没问题，所以我认为这可能是一个错误......**

因此，我无法使用正确的 XML 解析器将 CHAR(1) 列转换为我想要的其他类型，在这种情况下，将其转换为 .Net bool 类型。我的解析器现在忽略了 OraDbType 代码 126，因为这也是用于 nvarchar2 的代码，我不会将 nvarchar2 转换为 bool。

**我怎么解决这个问题？**

我已经完成了一些额外的测试：还插入了可以为空/不可为空且具有默认值的新列：

```
**alter table AA_Table1 add ColumnD char(1);
alter table AA_Table1 add ColumnE char(1) not null;
alter table AA_Table1 add ColumnF char(1) default 'S';** 
```

返回的 XML 是：

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema id="o_ListTable" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop">
<xs:element name="o_ListTable" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
<xs:complexType>
<xs:choice minOccurs="0" maxOccurs="unbounded">
<xs:element name="o_Lista" msprop:REFCursorName="REFCursor">
<xs:complexType>
<xs:sequence>
<xs:element name="COLUMNA" msprop:OraDbType="104" type="xs:string" minOccurs="0" />
<xs:element name="COLUMNB" msprop:OraDbType="104" type="xs:string" minOccurs="0" />
<xs:element name="COLUMNC" msprop:OraDbType="126" type="xs:string" minOccurs="0" />
**<xs:element name="COLUMND" msprop:OraDbType="104" type="xs:string" minOccurs="0" />
<xs:element name="COLUMNE" msprop:OraDbType="104" type="xs:string" minOccurs="0" />
<xs:element name="COLUMNF" msprop:OraDbType="104" type="xs:string" minOccurs="0" />**
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:choice>
</xs:complexType>
</xs:element>
</xs:schema> 
```

**所有 OraDbTypes 都是正确的，除了一个不为空且具有默认值的列。这个问题有什么解决办法吗？**

如果我将返回错误代码的列的类型 (ColumnC) 更改为**CHAR(1) null default 'S'**然后再次将其更改为原始类型**CHAR(1) not null default 'S'**，我得到了正确的ORaDbType 代码为 104，而不是 126。这种行为很奇怪 - 这可能是 Oracle 错误吗？

**我正在使用以下 Oracle DLL 和相应版本：**

oci.dll（版本 11.2.0.1）

Oracle.DataAccess.dll（版本 4.112.3.0）

orannzsbb11.dll（版本 11.0.0.1）

oraocci11.dll（版本 11.2.0.3）

OraOps11w.dll（版本 2.112.3.0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:02:08.230

您可能对这个[新功能有疑问](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_3001.htm#i2198241)：

> 如果为 NOT NULL 列指定 DEFAULT 子句，则默认值将存储为元数据，但列本身不会填充数据。但是，指定新列的后续查询将被重写，以便在结果集中返回默认值。这种优化行为与早期版本不同，当作为 ALTER TABLE 操作的一部分时，Oracle 数据库使用默认值更新新创建的列中的每一行，然后触发表上定义的任何更新触发器。在此版本中，不会触发任何触发器，因为默认值仅存储为元数据。

虽然我不知道为什么。它似乎在数据库服务器上工作正常。使用 DBMS_METADATA.GET_DDL，无论 DDL 还是 DML，类型信息似乎都是正确的。

这意味着您的工具正在使用自己的元数据查询，可能是错误的。最大的问题是，您使用的是什么工具？什么是“OraDBType”，这个 XML 来自哪里？

您可能需要启用跟踪，以准确查看用于创建 XML 的 SQL 语句。

如果我不得不猜测，问题可能与[延迟段创建](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#CEGJHDEB)有关。如果启用了该功能，则在您第一次创建表时没有段。延迟段创建可以节省大量空间，但它可能会导致假设始终存在段信息的查询出现问题。

# api - 我如何知道我的 IP 是否被列入 Deezer API 的黑名单？

> ID：10278297
> 
> 赞同：1
> 
> 时间：2012-04-23T09:53:38.310
> 
> 标签：api, blacklist, ratelimit, deezer

在我的本地机器上，我访问网址[http://api.deezer.com/2.0/search/artist?q=feeder](http://api.deezer.com/2.0/search/artist?q=feeder)并返回正确的 json 数据。在我的实时服务器上，我卷曲相同的 url，并返回 json。

```
{"data":[],"total":0} 
```

http状态码是200，我不相信我已经达到了速率限制，在我的本地机器上进行了类似负载的测试。

我只能怀疑服务器上的其他人（在此处的共享主机上）已经访问了 API 并被列入黑名单，或者他们在达到速率限制时仍然响应但没有通知这一事实。

有人有什么建议吗？目前没有等待几个小时再试一次，我很难过。

（PS 有足够代表的人想要制作“Deezer”标签吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:12:15.427

我向 Deezer 开发人员提出了这个确切的问题。答案是您需要有一个访问令牌才能以这种方式使用数据。

在此处查看更多信息：http: [//developers.deezer.com/api/oauth](http://developers.deezer.com/api/oauth)

# html - 获得固定高度的 div 以继续下一行

> ID：10278299
> 
> 赞同：6
> 
> 时间：2012-04-23T09:53:43.573
> 
> 标签：html, css

完全不确定这是可能的，但很有可能，这就是我需要的：

*   具有顶部和底部边框的 100 像素高 div。

*   div 中未知数量的项目在父 div 的顶部和底部边框内水平显示。

*   重要的是，如果 div 中包含更多可以水平放置的项目，则 div 应该在下面继续新的一行项目。第二行还应该在父 div 的上下边框之间水平显示项目。我不希望 div 简单地增加高度并开始新行，因为这将不允许顶部和底部边框出现在每行项目的上方和下方。

![在此处输入图像描述](../Images/5fc9748a2bbc27181fe86e34c5494aae.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:12:03.150

您可以设置包装器的宽度并将那些 100px 高的块放入其中。

这是示例：http: [//jsfiddle.net/BVm5h/](http://jsfiddle.net/BVm5h/)

代码：

```
<div class="wrapper">
 <div class="myClass">1</div>
 <div class="myClass">2</div>
 <div class="myClass">3</div>
 <div class="myClass">4</div>
 <div class="myClass">5</div>
 <div class="myClass">6</div>
 <div class="myClass">7</div>
 <div class="myClass">8</div>
 <div class="myClass">9</div>
 <div class="myClass">10</div>
</div> 
```

CSS：

```
.wrapper {width: 600px;}

.myClass {
 border-top: 1px solid #FF0000;
 border-bottom: 1px solid #FF0000;
 width: 100px;
 height: 100px;
 float:left;
 margin-top: 5px;
}

div.myClass:last-child {
 width: 100%;
}​ 
```

JS：

```
var no = $('div.myClass').length;
var wlength = $('div.wrapper').width();
var length = $('div.myClass').width();
var tno = no*length;
while(wlength < tno)
 tno=tno-wlength;
var mw = wlength+length-tno;
$('div.myClass').last().css('max-width',mw); 
```

​ ​ 通过改变wrapper的宽度，你可以设置每行你希望的div块的数量。

编辑：如果要为整行扩展最后一个元素，则添加 JS。​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:39:54.403

利用背景图像的力量。

[http://jsfiddle.net/lollero/UTtVJ/1/](http://jsfiddle.net/lollero/UTtVJ/1/)

编辑：我注意到该`#bottom-line`元素没有出现在 ie7 中。似乎工作+ie8。不过可能很容易修复。由于这个解决方案不是那么受欢迎，我不会对此做任何事情..

CSS：

```
#wrap {
    background: url('http://img209.imageshack.us/img209/5188/linedu.png') repeat top left;
    float:left;
    margin-top: 20px;
    position: relative;
}

#inner-wrap {
    float: left;
    margin-bottom: -40px;
}

#wrap #top-line,
#wrap #bottom-line {
    position: absolute;
    margin: 0px;
    height: 2px;
    background: url('http://img209.imageshack.us/img209/5188/linedu.png') repeat-x 0px -116px;
    left: 0px;
    right: 0px;
}

#wrap #top-line { top: -8px; }
#wrap #bottom-line { bottom: -28px; }

#inner-wrap > div {
    margin-bottom: 20px;
    margin-left:10px;
    float: left;
    width: 100px;
    height: 100px;
    background: #111;
    border: 1px solid red;
    text-align: center;
    color: #888;
}

​ 
```

HTML：

```
<div id="wrap">
    <div id="top-line"></div>
    <div id="bottom-line"></div>
    <div id="inner-wrap">
        <div>1</div>
        <div>2</div>
        <div>3</div>
        <div>4</div>
        <div>5</div>
        <div>6</div>
        <div>7</div>
        <div>8</div>
        <div>9</div>
        <div>10</div>
        <div>11</div>
        <div>12</div>
  </div>  
</div>​ 
```

# jquery - jquery hoverintent - mouseenter 在一个元素上， mouseleave 在另一个元素上

> ID：10278300
> 
> 赞同：1
> 
> 时间：2012-04-23T09:53:51.060
> 
> 标签：jquery, jquery-plugins, hoverintent

我正在尝试使用[hoverintent 插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)来替换以下 javascript 代码：

```
$('#top').on('mouseenter', '#nav', function(e){
    $('#top ul').delay(100).slideDown(300);
    $('#top').stop().animate({
        height: 230
    }, 400);
});

$('body').on('mouseleave', '#top', function(e){
    $('#top ul').slideUp(300);
    $('#top').stop().animate({
        height: 97
    }, 400);
}); 
```

我的html是：

```
<div id="main">
    <div id="top">
        <a href="#" class="logo"></a>
        <ol id="nav">
            <li><a href="#">Home</a></li>
            <li>
                <a href="#">Company</a>
                <ul>
                    <li><a href="#">About us</a></li>
                    <li><a href="#">Management</a></li>
                    <li><a href="#">Careers</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Products</a>
                <ul>
                    <li><a href="#">Product 1</a></li>
                    <li><a href="#">Product 2</a></li>
                    <li><a href="#">Product 3</a></li>
                </ul>
            </li>
            <li><a href="#">Contact Us</a></li>
        </ol>
    </div>
</div> 
```

这是我的CSS：

```
html { background:#fff; font-family: Arial, Helvetica, sans-serif; }

#main { position: relative; width: 860px; margin: 0 auto; text-align: left; padding: 0 40px; }

#top { width: 860px; height: 97px; border-bottom: 1px solid #f0f1f0; padding-bottom: 30px; }
#top a.logo { display: block; float: left; width: 186px; height: 55px; margin-top: 40px; background: #ccc; }
#top a.logo:hover { background: #ddd; }

#top ol { position: absolute; top: 37px; right: 40px; display: block; overflow: visible; z-index: 10; }
#top ol li { display: inline-block; float: left; text-align: right; margin-left: 24px; padding-top: 20px; }
#top ol li a { display: block; font-family: "Arial Narrow", "Helvetica Narrow", sans-serif; font-size: 0.8em; color: #989f98; text-decoration: none; text-transform: uppercase; margin-bottom: 5px; }
#top ol li a.current,
#top ol li a:hover { color: #e9292f; }

#top ul { display: none; padding-bottom: 6px; max-width: 95px; border-top: 1px dotted #d1d1d1; }
#top ul li { display: block; float: none; margin-left: 0; padding-top: 3px; }
#top ul li a { font-size: 0.7em; font-family: Arial, Helvetica, sans-serif; text-transform: none; } 
```

这是我要实现的目标的快速图表：

![图表](../Images/0996c200fa20fb7ca7855854b82f7301.png)

我想要的只是让用户将鼠标悬停在鼠标上，`#nav`并且只有当他们将鼠标移出`#top`（在我的图表中为灰色）时它才会消失。鉴于 hoverintent 网站上的示例，我不知道如何实现这一点:(

有人有任何指示吗？提前致谢！

**- - - 编辑 - - -**

通过执行以下操作使悬停意图达到一定程度：

```
var config = {    
    over: function(){
        $('#top ul').delay(100).slideDown(300);
        $('#top').stop().animate({
            height: 230
        }, 400);
    },
    timeout: 0,    
    out: function(){
        $('#top ul').slideUp(300);
        $('#top').stop().animate({
            height: 97
        }, 400);
    }
};

$('#nav').hoverIntent(config); 
```

现在，当我将鼠标移出而不是div时，问题就`ul`消失了。关闭但没有雪茄:(`#nav``#top`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:27:27.557

如您所见： http: [//jsfiddle.net/Cj8sj/](http://jsfiddle.net/Cj8sj/)您的 jQuery 代码有效。

我认为这是您遇到的 CSS 问题...我假设您已将 #nav 定位为浮动。是什么让#top 仅具有其非浮动内容的高度。您可以使用以下方法解决此问题：`#top { overflow: hidden; }`UL 和 #nav 元素中的相同。

如果这不能解决您的问题，请提供一些 CSS

更新：既然您已经发布了 CSS...对于绝对位置元素的相同效果，它们不会适应父级的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:19:56.993

这可能不适合您的情况，但如果您想要一个非 javascript 方法：

[http://www.ryancollins.me/?p=1041](http://www.ryancollins.me/?p=1041)

这很好用。此外，这里的主体也与任何 javascript 方法相关。

基本上，您需要一些变量。

导航悬停=假；subNavHover = 假；

当鼠标移入和移出明显元素时，只需将它们的变量设置为真/假。

接下来，在鼠标离开时，快速检查一下：

```
if( navHover ) 
```

或者

```
if( subNavHover ) 
```

如果任一变量设置为 true，请不要隐藏导航。如果你想要动画，你需要使用回调，也许还需要一个快速的超时延迟，这样它就不会隐藏得太快。

但如果我是你，我会选择纯 CSS 版本！

希望有帮助:)

# php - CakePHP：循环中的数据库更新 - 服务器响应错误 500

> ID：10278301
> 
> 赞同：1
> 
> 时间：2012-04-23T09:53:52.323
> 
> 标签：php, mysql, cakephp

我想循环更新我的数据库。数据是我加载的 xml 文件中的价格和库存信息。我要更新大约 8000 个项目。服务器响应错误 500 需要相当长的时间，大约在第 3000 项。

我想知道是否没有更好，更Cake'ish的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:33:57.027

对于这样的任务，应该使用[shell](http://book.cakephp.org/2.0/en/console-and-shells.html)或某种事件调度系统。并一次读取要更改的数据块。你这样做的方式只会导致填满内存并出现错误。

如果你想在适当的 CakePHP 中做点什么，请停止编写臃肿的控制器，更关键的是：停止使用 query()。我建议你先学习和理解 MVC 和一些软件设计原则。

也停止使用可怕的变量名称，如“artPriceArr3”或“art”。是艺术品吗？一篇文章？一个艺术家？阅读本文：[清洁代码](http://www.amazon.de/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:02:44.277

这是我的控制器代码——更简洁：

```
$this->Stock->query('TRUNCATE stocks;');

$itemsFromXml   = $this->XmlPricelist->getXml();

$fields = array('id','amount','price'); 
$values     = array();

foreach($itemsFromXml as $key=>$item){
 $values[] = array($item['id'],$item['stock'],$item['price']); 
} 
$this->multiSave($this->Stock,$values,$fields); 
```

# ios - 以编程方式调整大小/对齐加载视图

> ID：10278302
> 
> 赞同：1
> 
> 时间：2012-04-23T09:54:11.153
> 
> 标签：ios, objective-c, cocoa-touch, loading, uiactivityindicatorview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:41:00.243

看来

```
innerView.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin |
                              UIViewAutoresizingFlexibleRightMargin |
                              UIViewAutoresizingFlexibleTopMargin |
                              UIViewAutoresizingFlexibleBottomMargin); 
```

集中内部观点是个坏主意。

我通过重新定义`layoutSubviews`方法解决了它。

代码本身可以在[https://github.com/Uko/UILoadingView/blob/master/UILoadingView.m找到](https://github.com/Uko/UILoadingView/blob/master/UILoadingView.m)

# c# - “找不到模板属性”

> ID：10278303
> 
> 赞同：0
> 
> 时间：2012-04-23T09:54:12.027
> 
> 标签：c#, wpf, xaml, dependency-properties, attached-properties

`ItemsControl.AlternationIndex`我试图附加一个属性，就像`ItemsControl`. 像下面这样使用它会导致构建时出现“找不到模板属性”错误。附加的属性`AlternationIndex`工作正常。

```
 <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Grid SnapsToDevicePixels="true">
                        <Border x:Name="Bd" ... >
                            <ContentPresenter x:Name="Content" ... />
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="ItemsControl.Position" 
                                 Value="Last">
                            <Setter Property="CornerRadius" 
                                    TargetName="Bd" 
                                    Value="0,0,0,4"/>
                        </Trigger>
                        <Trigger Property="ItemsControl.AlternationIndex" 
                                 Value="0">
                            <Setter Property="CornerRadius" 
                                    TargetName="Bd" 
                                    Value="4,0,0,0"/>
                        </Trigger>
                        ...
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter> 
```

该属性的代码放置在包含模板设置器的同一 WPF 控件的代码隐藏中。

```
 public enum Position
    {
        First,
        Normal,
        Last
    }

    private static readonly DependencyPropertyKey PositionPropertyKey =
       DependencyProperty.RegisterAttachedReadOnly(
            "Position",
            typeof(Position),
            typeof(ItemsControl),
            new FrameworkPropertyMetadata(Position.Normal,
                 FrameworkPropertyMetadataOptions.Inherits));

    public static readonly DependencyProperty PositionProperty =
        PositionPropertyKey.DependencyProperty;

    public static Position GetPosition(DependencyObject element)
    {
        if (element == null)
            throw new ArgumentNullException("element");

        var result = element.GetValue(PositionProperty);

        return (Position)result;
    }

    internal static void SetPosition(DependencyObject d, Position value)
    {
        d.SetValue(PositionPropertyKey, value);
    }

    internal static void ClearPosition(DependencyObject d)
    {
        d.ClearValue(PositionPropertyKey);
    } 
```

需要什么才能使该属性在 XAML 中可见和可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:00:24.293

您不应该像这样注册附加属性，拥有的类*不是*您打算在其上设置属性的任何控件（-无论如何您都可以在*任何地方*设置它-），而是定义属性的类。所以更改`typeof(ItemsControl)`为`typeof(WhatEverTheSurroundingClassIs)`.

同样，您需要使用类名称空间的名称空间映射结合类名称来定位 XAML 中的属性：

```
Property="local:WhatEverTheSurroundingClassIs.Position" 
```

# javascript - 跟踪 CSS 中的所有 ID 和 CLASS 确实有任何特定的 jQuery 或 JavaScript 选择器

> ID：10278304
> 
> 赞同：1
> 
> 时间：2012-04-23T09:54:21.383
> 
> 标签：javascript, jquery, css

我确实有一个小问题。实际上，我想跟踪所有类或 ID 是否通过 jQuery 或 JavaScript 在 CSS 中应用了任何特定的选择器。

例如：

**CSS**

```
.even:nth-child(2n) {
 /* declarations goes here */
} 
```

现在我确实想针对所有类或 Id 在 CSS 中应用“nth-child”并获取它的所有声明，以便我可以通过 jQuery 在不支持的浏览器中应用它。

它可以是任何选择器，例如“nth-child”、“>”、“~”。

我知道我们确实有很多像 selectivizr 这样的库为我们做这件事，但我想在不使用任何库的情况下做一些事情。

# .htaccess - 如何重写这个 URL？

> ID：10278305
> 
> 赞同：0
> 
> 时间：2012-04-23T09:54:25.187
> 
> 标签：.htaccess, mod-rewrite

所以我想重写这个网址：

```
http://localhost/mock/foo.php?lang=eng&userID=2 
```

到：

```
http://localhost/apiMethod.pl?lang=eng&userID=2 
```

因此，当我在浏览器中调用[http://localhost/apiMethod.pl?lang=eng&userID=2](http://localhost/apiMethod.pl?lang=eng&userID=2)时，它实际上会转到[http://localhost/mock/foo.php?lang=eng&userID=2](http://localhost/mock/foo.php?lang=eng&userID=2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:44:34.130

```
RewriteRule ^apiMethod\.pl$ mock/foo.php [QSA] 
```

# java - Maven 项目可以从 maven 命令行很好地构建，但不能使用 IntelliJ IDEA 11.1.1

> ID：10278307
> 
> 赞同：2
> 
> 时间：2012-04-23T09:54:34.863
> 
> 标签：java, maven, intellij-idea

1.从 Maven 命令行，我输入`mvn idea:module`所有依赖项都构建良好，并成功导入 IntelliJ IDEA，一切都很好。

2.我输入`mvn idea:clean`后，清理所有构建。在 IntelliJ IDEA 中，在右侧导航栏中，单击*Add Maven Projects*，选择`pom.xml`，然后 IntelliJ 始终显示*Resolving Maven Dependencies* in Background Tasks。

在我的项目中，我使用私有 Nexus 存储库。

很奇怪为什么 IntelliJ 不告诉我为什么总是解决 maven 依赖关系！

我想知道为什么两种导入项目的方式会有不同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:26:04.853

如果你已经有 pom.xml，你可以从`File->Open Project`. Maven 对我来说在 Intellij 中总是很有效，以前从未添加过 Maven 项目。

# android - Android，如何在 C2DMReceiver 构造函数中获取上下文？

> ID：10278309
> 
> 赞同：1
> 
> 时间：2012-04-23T09:54:50.270
> 
> 标签：android, android-c2dm, android-context

我有一个 C2DM 接收器类，它在构造函数中初始化 C2DM 发件人电子邮件。问题是，我需要从资源字符串中获取发件人的电子邮件，因此我需要在构造函数中为接收者获取上下文

接收器看起来像这样

```
public class C2DMReceiver extends C2DMBaseReceiver {

    public C2DMReceiver() {
        super(AppConstants.getC2DMSender(this)); // How do I get the context here?
    }

    @Override
    public void onRegistered(Context context, String registrationId)
            throws java.io.IOException { ... 
```

C2DMBaseReceiver上的相关代码

```
public abstract class C2DMBaseReceiver extends IntentService {
...
    private final String senderId;

    /**
     * The C2DMReceiver class must create a no-arg constructor and pass the 
     * sender id to be used for registration.
     */
    public C2DMBaseReceiver(String senderId) {
        // senderId is used as base name for threads, etc.
        super(senderId);
        this.senderId = senderId;
    }
... 
```

它与问题并不真正相关，但出于背景目的，需要这样做的原因是代码位于一个库项目中，该库项目用于许多 android 项目，每个项目都在资源文件中定义了自己的发件人电子邮件地址。AppConstants 类的任务是读取各种资源字符串，并从我接受的上一个问题的答案开始，[Android, Best way to provide app specific constants in a library project?](https://stackoverflow.com/questions/9761386/android-best-way-to-provide-app-sepcific-constants-in-a-library-project)

最后为了完整性，AppConstants.getC2DMSender 方法看起来像这样

```
public static String getC2DMSender(Context c){
    return c.getResources().getString(uk.co.the_prize_quiz.quiz_template.R.string.c2dm_sender);
} 
```

使用此库的特定应用程序负责在 xml 资源中设置 c2dm_sender 变量。所以为了得到这个变量，我需要上下文

```
<item type="string" name="c2dm_sender" format="string">app_specific_registered_c2dm@email_address</item> 
```

因为这是在资源字符串中设置的，所以特定应用程序可以设置此值，模板将自动使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:15:46.663

将一个单例类添加到您的库中。有一个成员来保存 senderid 和相应的 getter 和 setter 方法......

```
public class ClassicSingleton {
   private static ClassicSingleton instance = null;
   private String mSenderId = nulll; // Your data holder

   protected ClassicSingleton() {
      // Exists only to defeat instantiation.
   }

   public static ClassicSingleton getInstance() {
      if(instance == null) {
         instance = new ClassicSingleton();
      }
      return instance;
   }

   /* Setter and Getter for the mAppContext member here */
   public void setSender(String sender) {
       mSenderId = sender;
   }

} 
```

在您应用的活动中`ClassicSingleton.getInstance().setSender("SENDER_ID")`

在您的 C2DM 课程中

```
public C2DMReceiver() {
    super(ClassicSingleton.getInstance().getSender());
} 
```

尝试将应用程序的上下文作为成员而不是 senderId。然后你可以提取你需要的任何资源我猜..让我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T01:41:34.757

我得出的结论是，这不能以我尝试的方式完成。我通过在每个应用程序中创建一个从库项目中的类派生的新类并仅覆盖每个应用程序中的构造函数来暂时解决了我的问题。

这不是一个想法解决方案，有点违背了拥有图书馆的意义，但至少我可以分享我的大部分代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T05:06:01.177

C2DMBaseReceiver 实际上并不使用 senderId，除非它需要重试注册请求。C2DMBaseReceiver 是为每个操作（注册响应、来自服务器的消息和重试注册）创建和销毁的对象 (IntentService)。只要在注册前设置好 senderId 就可以了。

这似乎有效：

```
public class C2DMReceiver extends C2DMBaseReceiver {
    private static String gSenderId = "dummy";

    public C2DMReceiver() {
        super(gSenderId);
    }

    public static void register(Context context, String senderId) {
        gSenderId = senderId;
        C2DMessaging.register(context, senderId);
    }

    ...
} 
```

由于您正在创建一个提供 C2DM 服务的库，因此您应该考虑 @fargath 所说的并将 c2dm.jar 函数直接合并到您的库中。然后您可以根据需要自定义界面。此外，c2dm.jar 提供对您的库代码的间接访问，然后您的库代码提供对应用程序的等效间接访问。这有点浪费。

c2dm.jar 代码只有三个短文件。我正在编写一个与您的库类似的库，并且可能会自己提取功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T23:08:28.867

```
//As C2DMReceiver receiver extends Intent service, rather than passing this , call getApplicationConext 

public class C2DMReceiver extends C2DMBaseReceiver {

public C2DMReceiver() {
    Context context = getApplicationContext();
    super(AppConstants.getC2DMSender(context); // This way you can pass context.
}

@Override
public void onRegistered(Context context, String registrationId)
        throws java.io.IOException { ... 
```

# java - JVM 启动失败“无法为对象保留足够的空间”

> ID：10278311
> 
> 赞同：0
> 
> 时间：2012-04-23T09:54:53.267
> 
> 标签：java, jvm

无法启动 java 应用程序并出现以下错误：32 位 JVM 窗口

> VM 初始化期间发生错误
> 无法为对象保留足够的空间他
> 无法创建 Java 虚拟机。
> JVM 在加载应用程序时退出。

我检查了进程并观察到没有进程正在使用 jvm。
有人可以帮我解决上述错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:58:05.147

*无法为对象堆保留足够的空间*主要是由于提供了`-Xmx`系统无法分配的内存大小。

Windows 32 位将为您 (IIRC) 每个进程提供大约 2GiB 的最大内存，Java 需要一些空间来存放其内部内容，这使您拥有大约 1.4 到 1.6GiB 的最大堆。

只需尝试降低`-Xmx`参数，直到它创建 VM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:00:23.163

可能的原因之一是您设置了最小堆大小以保留比可用内存更多的内存。使用 -Xms 标志设置 java 命令。如果设置了此标志，请确保此内存量可在您的系统上免费使用。

# ruby-on-rails-3 - Rails 3.0:cancan 角色定义在博客应用的 user.rb 中

> ID：10278318
> 
> 赞同：2
> 
> 时间：2012-04-23T09:55:13.570
> 
> 标签：ruby-on-rails-3

有人可以解释一下这段代码吗，这是在 github 上解释的同一个博客应用程序，但我无法理解这部分的使用，特别是名称空间角色掩码的使用。

此应用程序管理员、版主和作者三个角色。基于 CRUD 功能，他们能够编辑评论或删除评论。

```
 class User < ActiveRecord::Base
                  acts_as_authentic
                  has_many :articles
                  has_many :comments

                  named_scope :with_role, lambda { |role| {:conditions => "roles_mask & #{2**ROLES.index(role.to_s)} > 0"} }

                  ROLES = %w[admin moderator author]

                  def roles=(roles)
                    self.roles_mask = (roles & ROLES).map { |r| 2**ROLES.index(r) }.sum
                  end

                  def roles
                    ROLES.reject { |r| ((roles_mask || 0) & 2**ROLES.index(r)).zero? }
                  end

                  def role_symbols
                    roles.map(&:to_sym)
                  end
                end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:37:08.967

是`role_mask`一个位域。每当将角色分配给 时`User`，`role_mask`都会自动更新。角色掩码和各自角色的可能值：

```
111: author, moderator, admin
110: author, moderator
101: author, admin
100: author
011: moderator, admin
010: moderator
001: admin 
```

位域用于在数据库中快速搜索具有特定角色的用户。这是通过在您要查找的角色的位域`&`上应用运算符来完成的。`role_mask`例如，要获取所有作者用户，范围对所有为真的`with_role`记录进行数据库查询 。`roles_mask & 100`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:53:32.020

有一个 gem 可以让在 cancan 中使用位掩码更容易[role_model](https://github.com/martinrehfeld/role_model)。只需了解位掩码的方式，切勿删除角色，或更改角色的顺序。要添加新角色，请将其添加为最后一个角色。

cancan [wiki](https://github.com/ryanb/cancan/wiki/Role-Based-Authorization)有一些信息，以及其他解决方案。

# excel - Excel：如何根据 2 个下拉菜单中的选择操作值

> ID：10278322
> 
> 赞同：0
> 
> 时间：2012-04-23T09:55:24.147
> 
> 标签：excel

是否可以有 1 个包含如下数据的表：

![带有虚拟数据的示例 Excel 表](../Images/3d57eb630a170334ca544289ba07f61b.png)

并使用它的数据创建2个下拉菜单，这样当两个“chars”都被选中时，就会有一个基于“value”列形成的最终值，它对应于每个char？像这儿：

![示例结果表](../Images/e286626f581d2e521484d5b7210bb430.png)

*黄色的单元格是下拉列表（列表）。*

结果 6 来自 1 + 5。1 是“Char”A 的“Value”，5 是“Char”E 的“Value”。

**编辑**

我的真实表的列比示例中的多得多，因此当我需要从中提供数据以进行最终计算时，我需要能够选择一列。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:26:47.523

这是一个包含四个下拉列表的解决方案——两个用于选择 Char 值，两个用于从哪个列中选择使用值（每个 Char 一个）。这是一个使用具有更多列的表的示例。

![在此处输入图像描述](../Images/bb43582dc2cd4f17c686fbb15e0eb58e.png)

正如@Dan 在评论中指出的那样，您应该使用列表验证来创建下拉列表。我认为下拉菜单不需要级联或相互依赖，所以这应该非常简单。

Result 值可以使用`VLOOKUP`s 和`MATCH`用于选择要从中返回值的列的函数来计算。

```
=VLOOKUP(A9,$A$2:$D$6,MATCH(C9,$A$1:$D$1,0),FALSE)+VLOOKUP(B9,$A$2:$D$6,MATCH(D9,$A$1:$D$1,0),FALSE) 
```

# c - gcc 编译器中结构的大小

> ID：10278324
> 
> 赞同：1
> 
> 时间：2012-04-23T09:55:34.867
> 
> 标签：c

> **可能重复：**
> [为什么结构的 sizeof 不等于每个成员的 sizeof 之和？](https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member)

为什么结构的大小不等于其成员的大小？我能做些什么来减少它们？说我有一个结构`

```
struct a{

int a;
int b[10];
char a;

} 
```

尺寸是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:58:02.480

允许编译器在结构成员之间添加填充以提高处理效率，这就是大小可能不同的原因

前任：

```
struct Message
{
  short opcode;
  char subfield;
  long message_length;
  char version;
  short destination_processor;
}; 
```

**编译器使用的实际结构定义**

```
struct Message
{
  short opcode;
  char subfield;
  char pad1;            // Pad to start the long word at a 4 byte boundary
  long message_length;
  char version;
  char pad2;            // Pad to start a short at a 2 byte boundary
  short destination_processor;
  char pad3[4];         // Pad to align the complete structure to a 16 byte boundary
}; 
```

*在上面的例子中，编译器添加了填充字节来强制目标处理器的字节对齐规则。如果上述消息结构用于不同的编译器/微处理器组合，则该编译器插入的焊盘可能不同。因此，使用相同结构定义头文件的两个应用程序可能彼此不兼容。因此，在编译器和/或微处理器不同的机器之间的接口中共享的所有 C 结构中显式插入填充字节是一种很好的做法。*

[结构填充是如何完成的](http://clinuxpro.com/structure-padding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:58:23.350

因为对齐可能会出现在结构成员之间和之后的填充。

`packed`您可以使用以下属性将结构成员与 gcc 打包：

```
struct a {
    int a;
    int b[10];
    char a;
} __attribute__((packed)); 
```

存储量会减少，但代码的效率也可能会降低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:01:45.013

C 和 C++ 编译器使用填充来对齐（通常）四字节边界上的结构成员，因为这使得它们在 32 位处理器上更有效地访问。

在 GCC 中，您可以覆盖它并请求使用打包属性对结构进行*打包*（删除此填充）：

```
struct a
{
    int a;
    int b[10];
    char c;
} __attribute__((packed)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T09:58:49.217

在 gcc 编译器中，内存分为四个字节块。所以结构的大小将是 48。虽然 char 只占用一个字节，但将提供四个字节给它，最后三个将被填充。您可以使用 pragma 指令来删除此填充。只需使用

```
#pragma pack 1 
```

# jython - 如何（过程）为/在 ANDROID 设备上运行自动化脚本（使用 sikuli）

> ID：10278330
> 
> 赞同：0
> 
> 时间：2012-04-23T09:55:48.700
> 
> 标签：jython

我已经使用 sikuli 为 ANDROID 模拟器中的移动应用程序编写了自动化脚本。你能告诉我如何在 ANDROID 设备中编写或运行的程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:34:12.380

你不能。您有 2 个选项： 1\. 启动模拟器，然后创建将与此模拟器交互的脚本 2\. 使用 Android 设备，通过 VNC 连接到它，然后创建将与 VNC 屏幕交互的脚本，这将模拟真实设备上的操作。网上有更多关于这方面的信息——你可以寻找 Siculi Android，或阅读有关 Eggplant 的信息——他们很好地解释了如何通过 VNC 连接到 Android 设备。

# .net - LINQ 查询分组

> ID：10278333
> 
> 赞同：0
> 
> 时间：2012-04-23T09:56:01.543
> 
> 标签：.net, linq

我对 LINQ 查询有疑问。有人可以帮忙吗？

有一个表内容，其列 ID（唯一）、ContentId、版本。我想为每个唯一的内容 ID 获取最新版本。

所以如果表是：

```
 - Id, ContentId, Version
 - 1, 1, 1
 - 2, 1, 2
 - 3, 2, 1 
```

然后查询应该返回：

```
 - Id, ContentId, Version
 - 2, 1, 2
 - 3, 2, 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:02:20.833

也许是这样的：

```
var result= (
        from c in db.Content
        where db.Content
                  .Where (l =>l.ContentId==c.ContentId)
                  .Max (l=>l.Version)==c.Version
        select c
    ); 
```

其中 db 是 linq 数据上下文

# windows-mobile - Windows Mobile 6.x 和 CDFS

> ID：10278335
> 
> 赞同：0
> 
> 时间：2012-04-23T09:56:08.490
> 
> 标签：windows-mobile, usb, windows-ce

Windows Mobile 6.x 基于 Windows CE 5.x 并且不包含 CDFS 驱动程序，即使 5.x CE 平台支持它。

我有一个 USB 记忆棒的场景，它还包含一个 CDFS 分区，PDA 运行 Windows Mobile 6.x 并支持 OTG（主机或客户端可由用户选择）。以某种方式将 CE 现有驱动程序移动到 Windows Mobile 中是否可行？

任何提示，方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:26:48.507

我不知道回答我自己的问题是否如此合适，但也许这个答案对其他人有用。

正如我所写的那样，WinCE 5.x 平台支持 CDFS，而 Windows Mobile 6.x 不支持。我刚刚将 WinCE 5.x 驱动程序复制`udfs.dll`到 Windows Mobile 设备的“Windows”目录中，并添加了两个注册表设置：

```
; Default values for udfs. These can be overridden per profile.
[HKEY_LOCAL_MACHINE\System\StorageManager\UDFS]
    "FriendlyName"="CDFS/UDFS FileSystem"
    "Dll"="udfs.dll"
    "Paging"=dword:1

[HKEY_LOCAL_MACHINE\System\StorageManager\Profiles\CDProfile]
    "Name"="IDE CDROM/DVD Drive"
    "Folder"="CDROM Drive"
    "DefaultFileSystem"="UDFS"
    "PartitionDriver"="" 
```

我重新启动了 PDA 并启用了 CDFS 支持。[MSDN](http://msdn.microsoft.com/en-us/library/ms885283.aspx)中的模式详细信息。

# asp.net-mvc - 如何从 System.Web.Mvc.WebViewPage 派生基类

> ID：10278338
> 
> 赞同：2
> 
> 时间：2012-04-23T09:56:24.037
> 
> 标签：asp.net-mvc

我正在尝试修改 NearForums-CMS 应用程序，除了扩展 WebViewPage 的此类之外，一切正常。如图所示：

```
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Msupa.Web.Common.State;
using System.Web;
using Msupa.Localization;
using Msupa.Base;
using Msupa.Configurations;
using System.Web.Mvc;
using Msupa.Web.Common.Extensions;

namespace Msupa.Web.Common.UI
{
    public class BaseViewPage<TModel> : WebViewPage<TModel> where TModel : class
    {
        #region Initialization
        public BaseViewPage()
        {

        } 
```

我检查了 MSDN 文档并包含了所有依赖项，在这种情况下是“System.Web.Mvc;”。我不断收到此错误：

```
The type or namespace name 'WebViewPage' does not exist in the namespace 'System.Web.Mvc' (are you missing an assembly reference?) 
```

我究竟做错了什么？？？

# android - 如何将数据从多个数组加载到列表视图？

> ID：10278340
> 
> 赞同：0
> 
> 时间：2012-04-23T09:56:27.720
> 
> 标签：android, android-listview, android-arrayadapter

这是我的列表视图结构：

```
________________________

Job No : 
Address : 

________________________

Job No : 
Address : 

________________________

Job No : 
Address : 

________________________ 
```

所有作业编号都存储在一个数组中，地址存储在另一个数组中。我如何将这些数组加载到我的列表视图中。谁能帮我。请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:05:19.600

创建自定义适配器..

伪代码如下所示..

```
Class Adpter extends BasAdapter{
String[] one;
String[] two;
public Adpter(String[] one, String[] two){
this.one = one;
this.two= two;
}

public getView(convertView){

text1.setText(one[position]);
text12.setText(two[position]);

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:33:39.650

为您的列表视图创建一个适配器，就像桑迪建议的那样，然后在您的活动中调用适配器。这是我的一个适配器的示例：

```
public class DictionaryListAdapter extends BaseAdapter {

private static ArrayList<Term> termsList;

private LayoutInflater mInflater;

public DictionaryListAdapter (Context ctx, ArrayList<Term> results){
    termsList = results;
    mInflater = LayoutInflater.from(ctx);
}

public int getCount() {
    // TODO Auto-generated method stub
    return termsList.size();
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return termsList.get(position);
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ViewHolder holder;
    if (convertView == null){
        convertView = mInflater.inflate(R.layout.dictionarylistinflater, null);
        holder = new ViewHolder();
        holder.tvTerm = (TextView) convertView.findViewById(R.id.tvTerm);
        holder.tvAbbr = (TextView) convertView.findViewById(R.id.tvAbbreviation);

        convertView.setTag(holder);
    }
    else{
        holder = (ViewHolder) convertView.getTag();
    }

    holder.tvTerm.setText(termsList.get(position).getWord());
    holder.tvAbbr.setText(termsList.get(position).getAbbr1() + "   " +termsList.get(position).getAbbr2());

    return convertView;
}

static class ViewHolder{
    TextView tvTerm;
    TextView tvAbbr;
} 
```

}

这是我在活动中的称呼：

```
//set the listview
    final ListView lvTerms = getListView();
    lvTerms.setAdapter(new DictionaryListAdapter(this, terms));
    lvTerms.setTextFilterEnabled(true); 
```

我也会采纳 Stefan 的建议并将其合并为一个数组。“术语”对我来说是一个术语数组列表，每个术语都有一个全名、两个缩写、一个定义和一个公式。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:10:28.770

我建议首先将数组合并到一个包含对象的数组中，这些对象包含列表视图中一行的完整信息。或者，如果信息来自数据库，您可以使用 CursorAdapter。

然后创建一个`ViewBinder`并将其连接到您的适配器 ( `setViewBinder()`)。哪一个取决于您的适配器。例如有a`SimpleCursorAdapater.ViewBinder`或a`SimpleAdapter.ViewBinder`等等。在`ViewBinder`的 setViewValue() 方法中，您填充列表视图中行的字段。在您的示例中，有两个字段，一个用于工作编号，一个用于地址。为此，您需要为包含这些字段的列表项创建自定义布局。布局通常在适配器的构造函数中设置。

有关更多信息，`ViewBinder`请参阅 Android 开发者文档。

# c# - 如何创建一个使用并返回泛型类型的方法？

> ID：10278341
> 
> 赞同：3
> 
> 时间：2012-04-23T09:56:31.693
> 
> 标签：c#, generics

我正在使用此方法制作对象列表的深层副本：

```
public static List<TransformColumn> Clone(List<TransformColumn> original)
        {
            List<TransformColumn> returnValue;
            using (var stream = new System.IO.MemoryStream())
            {
                var binaryFormatter = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
                binaryFormatter.Serialize(stream, original); //serialize to stream
                stream.Position = 0;
                //deserialize from stream.
                returnValue = binaryFormatter.Deserialize(stream) as List<TransformColumn>;
            }
            return returnValue;
        } 
```

我的问题是如何更改此方法以接受任何类型的列表并返回该列表的克隆？

另外，请问您的答案的用法是什么！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T09:59:00.543

```
public static List<TEntity> Clone<TEntity>(List<TEntity> original)
{
   List<TEntity> returnValue = null;
   using (var stream = new System.IO.MemoryStream())
   {
      var binaryFormatter = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();

      //serialize to stream 
      binaryFormatter.Serialize(stream, original);           
      stream.Position = 0;

      //deserialize from stream.
      returnValue = binaryFormatter.Deserialize(stream) as List<TEntity>;
   }

   return returnValue;
} 
```

您可以通过允许任何类型来使您的方法更加通用，不仅可以`List<>`通过一组单元测试、错误处理查看我对同一问题的回答，而且它还被实现为易于使用的扩展方法。请参阅[此 StackOverflow 帖子](https://stackoverflow.com/a/8025905/485076)

方法的签名是：

```
 public static TObject DeepCopy<TObject>(
                      this TObject instance, 
                      bool throwInCaseOfError)         
      where TObject : class 
```

Ans 显然你可以在没有`throwInCaseOfError`参数的情况下创建更简单的重载：

```
 public static TObject DeepCopy<TObject>(this TObject instance)         
      where TObject : class 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T09:58:35.550

将您的原型更改为：

```
public static List<T> Clone<T>(List<T> original) 
```

将对象反序列化到的行：

```
returnValue = binaryFormatter.Deserialize(stream) as List<T>; 
```

有关更多详细信息，请查看 MSDN 上的这篇文章：http: [//msdn.microsoft.com/en-us/library/twcad0zb (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/twcad0zb(v=vs.100).aspx)

# php - 从 jsonobject 获取数据

> ID：10278349
> 
> 赞同：0
> 
> 时间：2012-04-23T09:57:15.190
> 
> 标签：php, android, json

我正在从一个 android 应用程序的 php 脚本中获取数据，该应用程序生成如下数据::

```
while($row=mysql_fetch_row($res))
{
    if(abs(floor(floatval($row[2]))-$lat)<=10  && abs(floor(floatval($row[3]))-$long)<=10)
    {   $tarray=array("latitude"  => $row[2], "longitude"  => $row[3]);
        $tarray=json_encode($tarray);
        array_push($array,$tarray);
    }}
    sort($array);

$array2=array("START"  => "bins");
    array_push($array2,json_encode($array));
print_r(json_encode($array2)); 
```

我得到的数据为

```
{"START":"bins","0":"[\"{\\\"latitude\\\":\\\"25.890765456\\\",\\\"longitude\\\":\\\"69.890456789\\\"}\",\"{\\\"latitude\\\":\\\"28.678912345\\\",\\\"longitude\\\":\\\"80.000000000\\\"}\",\"{\\\"latitude\\\":\\\"28.678922345\\\",\\\"longitude\\\":\\\"80.000000000\\\"}\",\"{\\\"latitude\\\":\\\"28.903123233\\\",\\\"longitude\\\":\\\"76.434343444\\\"}\",\"{\\\"latitude\\\":\\\"30.708923454\\\",\\\"longitude\\\":\\\"78.690002312\\\"}\",\"{\\\"latitude\\\":\\\"32.908923454\\\",\\\"longitude\\\":\\\"79.890002312\\\"}\"]"} 
```

并尝试如下阅读：

```
JSONObject j=null,j2;
            try{
             j=new JSONObject(responseBody);//responsebody is a string.

            }
            catch(Exception r)
            {r.printStackTrace();

            }
            String s1,s2;
        JSONObject ja,jb;
        try{
            ja=j.getJSONObject("0");
             jb=j.getJSONObject("1");

            s1=ja.getString("0");
            s2=ja.getString("1");
            result=s1 + "|" + s2;
            s1=jb.getString("0");
            s2=jb.getString("1");

        } 
```

但是给了我 JSONException。我想要数据为 lat1|long1|lat2|long2 等等（由管道分隔）。我如何读取各个纬度/经度。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:01:37.997

这是因为你的字符串只有元素**0**是数组类型，它没有**1** .. 试试这个。

```
if(j.has("0")){
ja=j.getJSONObject("0");
}
if(j.has("1")){
             jb=j.getJSONObject("1");
}
// similarly for others...

            s1=ja.getString("0");
            s2=ja.getString("1");
            result=s1 + "|" + s2;
            s1=jb.getString("0");
            s2=jb.getString("1"); 
```

# plone - 如何使用 browserlayer 在 Plone 中调试 viewlet 创建

> ID：10278350
> 
> 赞同：2
> 
> 时间：2012-04-23T09:57:17.540
> 
> 标签：plone

我经常面临压倒一切的 viewlet 问题，而且我经常不知道为什么它会起作用。

我现在正在尝试覆盖使用浏览器层但不继承自 plone.app.layout.viewlets.common.BaseViewlet 的collective.googleanalytics 跟踪器视图。

为了实现这一点，我创建了一个从 c.googleanalytics 继承的浏览器层，注册它并验证一切顺利。

我仍然不明白为什么使用 c.googleanalytics viewlet 而不是我的。

代码在这里：[https ://github.com/toutpt/collective.linguaanalytics](https://github.com/toutpt/collective.linguaanalytics)

我希望能够知道我可以在哪里添加 PDB 来调试它。或者什么工具可以提供帮助。

编辑：

```
(Pdb) self.request.__provides__.__iro__
InterfaceClass plonetheme.sunburst.browser.interfaces.IThemeSpecific>, 
InterfaceClass plone.app.z3cform.interfaces.IPloneFormLayer>, 
InterfaceClass z3c.form.interfaces.IFormLayer>, 
InterfaceClass plone.app.discussion.interfaces.IDiscussionLayer>, 
InterfaceClass collective.linguaanalytics.interfaces.ILayer>, 
InterfaceClass collective.googleanalytics.interfaces.browserlayer.IAnalyticsLayer>, InterfaceClass plone.theme.interfaces.IDefaultPloneLayer>, 
InterfaceClass Products.CMFDefault.interfaces.ICMFDefaultSkin>, 
InterfaceClass zope.publisher.interfaces.browser.IDefaultBrowserLayer>, 
InterfaceClass zope.publisher.interfaces.browser.IBrowserRequest>, 
InterfaceClass zope.publisher.interfaces.http.IHTTPRequest>, 
InterfaceClass zope.publisher.interfaces.IRequest>, 
InterfaceClass zope.publisher.interfaces.IPublisherRequest>, 
InterfaceClass zope.publisher.interfaces.IPublicationRequest>, 
InterfaceClass zope.security.interfaces.IParticipation>, 
InterfaceClass zope.publisher.interfaces.IApplicationRequest>, 
InterfaceClass zope.interface.common.mapping.IEnumerableMapping>, 
InterfaceClass zope.interface.common.mapping.IReadMapping>,
InterfaceClass zope.interface.common.mapping.IItemMapping>, 
InterfaceClass zope.publisher.interfaces.ISkinnable>, 
InterfaceClass zope.annotation.interfaces.IAttributeAnnotatable>, 
InterfaceClass zope.annotation.interfaces.IAnnotatable>, 
InterfaceClass zope.interface.Interface>) 
```

编辑：似乎它们不是围绕 plone.browserlayer 中的另一层覆盖层的测试。可能是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:31:34.320

哈哈，愚蠢的错字。在 viewlets/configure.zcml 中，viewlet 是来自collective.googleanalytics 的“AnalyticsTrackingViewlet”。

在您的 viewlets.py 中，您覆盖了此类，但被覆盖类的真实名称是“AnalyticsViewlet”

因此，当加载 zcml 时，它会用 ... c.google.AnalyticsTrackingViewlet :D 覆盖 c.google.AnalyticsTrackingViewlet。

只需更改您的 zcml 即可使用 AnalyticsViewlet 并享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T22:13:52.960

这看起来很hackish。为什么不单独离开上游层？

您应该通过 overrides.zcml 覆盖。一旦工作/没有/层限制，您可以将其绑定到干净的层接口。

替代策略，不要覆盖上游 viewlet，而是通过 GS 隐藏它并给自己的 viewlet 一个不同的名称。再次，在一个干净的层上。

# sql-server-2008 - Powerbuilder 中的多维数据集

> ID：10278352
> 
> 赞同：1
> 
> 时间：2012-04-23T09:57:22.127
> 
> 标签：sql-server-2008, olap, powerbuilder, cube, olap-cube

我是 Powerbuilder/SQL Server Junior Programmer，我需要在我的 Powerbuilder 应用程序中使用 OLAP 多维数据集，但我不知道如何链接它们。

有谁知道该怎么做？

# servlets - 我最近一直在使用velocity，但是我搞得一团糟，我该怎么办？

> ID：10278355
> 
> 赞同：0
> 
> 时间：2012-04-23T09:57:34.477
> 
> 标签：servlets, request, velocity

我得到了我制作的这个程序：[http](http://www.2shared.com/file/73q6K9Yy/testv.html) ://www.2shared.com/file/73q6K9Yy/testv.html Login.java 是 servlet，它应该使用 login.vm 模板，并对其进行修改。它什么也没做，我不明白为什么。在函数中：

```
public Template handleRequest(HttpServletRequest request,HttpServletResponse response, Context ctx ) 
```

如果我放：

```
 error= (String) request.getAttribute("error");
 ctx.put("error", error); 
```

它什么也没做。如果我放：

```
 error= request.getAttribute("error").toString();
 ctx.put("error", error); 
```

我得到一个 Java 空指针异常。但是如果我说：

```
 ctx.put("error","this is a string"); 
```

它将模板 login.vm 的变量更改为该字符串。为什么它没有从请求中获取属性，我做错了什么。

PS：如果我按下注册按钮，它应该将我重定向到“/reg.jsp”页面。我做这个只是为了看看它是否有效，它没有。在 MVC 中使用 jsp 制作了相同的程序，但我需要用速度来制作它，以便我的实习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:58:02.420

我最好的猜测是您的请求中的“错误”键下没有属性。它与 Velocity 本身无关。如果您检查发生空异常的行号，它应该是代码摘录的第一行。

请注意，在 Web 上下文中，您应该使用来自velocity-tools 子项目的 VelocityViewServlet，而不是将在下一个版本中消失的已弃用的 VelocityServlet。

# coronasdk - 没有播放声音

> ID：10278357
> 
> 赞同：1
> 
> 时间：2012-04-23T09:57:36.843
> 
> 标签：coronasdk

我在 Win32 平台上使用 Corona SDK 试用版。该程序工作正常，除了声音播放：

```
media.playEventSound( "beep.caf" ) 
```

我在文件夹中有 beep.caf 文件。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:49:29.207

当我第一次开始使用 Corona 时，我也遇到了这个问题。问题是 windows 不播放 .caf 文件（这是一种 mac 格式）。

我建议获取文件 ...\Corona SDK\Sample Code\Hardware\Accelerometer1\beep_wav.wav 并将其复制到您的项目中。然后你只需要将 beep.caf 替换为 beep_wav.wav。beep_wav.wav 和 beep.caf 是一样的声音！

# android - android API 10 中的网格布局支持

> ID：10278358
> 
> 赞同：26
> 
> 时间：2012-04-23T09:57:38.480
> 
> 标签：android, layout, grid

我开发了一个目标 API 为 15 的应用程序。布局包括网格布局。现在，当我将 Target API 更改为 10 时，我遇到了网格布局和另一个元素“空间”的问题。Eclipse 提示我下载 2.3.3 的支持库，我这样做了……但仍然有问题。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-23T10:16:12.397

`GridLayout`确实已向后移植以兼容 API 7 级及更高级别。它是（某种）支持库的一部分。下载支持库后，您将在本地 sdk 文件夹中找到一个 Android 库项目，该文件夹位于：

```
<sdk_folder>\extras\android\compatibility\v7\gridlayout 
```

将其设置为您正在处理的项目的依赖项。之后，您需要将整个项目中的引用从 15 级版本更改为此兼容性版本，以支持 ICS 之前的设备。在布局文件中，将您的 xml 从 GridLayout 更改为 android.support.v7.widget.GridLayout。用法应该是相似的，如果不完全相同的话。

关于[`Space`](http://developer.android.com/reference/android/widget/Space.html)小部件：我实际上还没有使用过这个小部件，但它似乎可以通过在现有视图上设置边距/填充或添加您自己`View`的完全透明的通用来替换。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-08T01:25:48.930

如果使用 Android Studio，一旦你下载了支持库（如@MH。提到的）你必须使用`File->Import Module...`，然后选择 GridLayout 支持的位置，对我来说位于这里：`<sdk_folder>\extras\android\support\v7\gridlayout`.

接下来，不要`<Gridlayout>`在 xml 布局文件中使用，而是使用`<android.support.v7.widget.GridLayout>`. 这是一个例子：

```
<android.support.v7.widget.GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:useDefaultMargins="true"
    app:alignmentMode="alignBounds"
    app:columnOrderPreserved="false"
    app:columnCount="4"
> 
```

布局中的元素将引用`app`而不是`android`如上所示和子元素中的 GridLayout 属性：

```
 <TextView
        android:textSize="32dip"
        app:layout_columnSpan="4"
        app:layout_gravity="center_horizontal"
    /> 
```

最后，必须将 GridLayout 支持库引用添加到以下`dependencies`部分`\src\build.gradle`：

```
dependencies {
    compile 'com.android.support:appcompat-v7:+'
    compile 'com.android.support:gridlayout-v7:+'
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T10:20:12.260

或者另一种选择是这个[第三方向后兼容的实现：](https://github.com/dlew/android-gridlayout)

这与 API 级别 3 兼容，如果您需要返回那么远，它还包括 Space 小部件。

# iphone - 如何构建一个类似 iPad 的终端应用程序

> ID：10278361
> 
> 赞同：0
> 
> 时间：2012-04-23T09:57:45.940
> 
> 标签：iphone, objective-c, ios, ipad, terminal

我想为 iPad/iPhone 构建一个类似终端的应用程序。我只需要构建GUI部分，即提示、光标（包括正确定位）、黑色背景、滚动行为等。

它只应该看起来和行为像一个终端（例如“提示”、“获取控制台”、“iSSH”、“移动终端”或任何 SSH 应用程序，但没有系统访问权限）。数据来自网络服务，不构成任何设备内部位置。我不想在设备中“扎根”，不需要越狱，我只想构建 GUI 和行为。

有没有人给我一些提示或示例代码。我想知道如何才能完成外观和行为。哪些控件/视图类最适合，从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:02:07.193

正如您所提到的，[MobileTerminal](http://code.google.com/p/mobileterminal/)可能是您正在寻找的。这个项目是开源的，你可以开始它。AFAIK 现在它只能在越狱设备上运行，但你绝对可以只剪掉终端仿真（和屏幕操作、处理输入和输出……）并在其上构建你的项目。

从头开始构建一个终端是相当复杂和复杂的，所以我建议你从这个或其他一些开源项目开始。

我不知道有任何现成的组件，因此您可能需要做一些工作来将终端集成到您的应用程序中。

# excel - 如何与 Excel 加载项 ClickOnce 安装一起发布 PDB 文件？

> ID：10278362
> 
> 赞同：2
> 
> 时间：2012-04-23T09:57:46.300
> 
> 标签：excel, vsto, clickonce, pdb

我需要发布 PDB 文件以及我的 Excel 加载项的 DLL。ClickOnce 允许选择自定义应用程序文件，但对于 Excel 插件，此按钮不可用。
任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:49:19.647

[检查此处](http://social.msdn.microsoft.com/Forums/eu/vsto/thread/3f0b47fa-bd36-4033-a0d4-6875122ab010)讨论的类似问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-13T17:00:22.197

我以这种方式为我的 Outlook AddIn 解决了这个问题：

*   创建一个构建后事件：`copy "$(ProjectDir)$(OutDir)$(TargetName).pdb" "$(ProjectDir)"`。这会在项目的根文件夹中创建 pdb 的副本。
*   将此 pdb 副本添加为项目的链接。

当您现在发布项目时，pdb 也将被部署。跳过第 1 部分并直接链接 debug\bin 文件夹中的 pdb 将不起作用。

# python - MySQL 和 Python 字符集错误

> ID：10278370
> 
> 赞同：0
> 
> 时间：2012-04-23T09:58:14.990
> 
> 标签：python, mysql, mysql-python

我目前正在处理 CSV 文件和 mySQL 数据库之间的数据格式。我正在使用 MySQLdb 库来管理连接，但格式似乎有些问题。我不得不承认，我在 mySQL 或 Python 方面都不是很有经验，但是通过务实的方法，到目前为止，大多数人都做得很好。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import MySQLdb 

QUERY = "SELECT * FROM searches WHERE searchdate BETWEEN '2011-08-08' AND '2011-08-14';"
conn = MySQLdb.connect (unix_socket = '/opt/local/var/run/mysql5/mysqld.sock',host =      "localhost", user = "username", passwd= "passwd", db="db")
c = conn.cursor()
c.execute(QUERY)
for row in c.fetchall():
    print row 
```

这是从数据库中提取记录的脚本。在此过程的后期，我想从每一行中提取数据并将其格式化为 CSV，但目前我的问题是打印到屏幕上的数据如下所示：

```
('\xc3\xa6nima', ' 1', ' 12782027', ' 35', datetime.date(2011, 8, 13))
('\xc3\xa6nima', ' 1', ' 12823616', ' 59', datetime.date(2011, 8, 10))
('\xc3\xa6oc', ' 1', ' 13078573', ' 55', datetime.date(2011, 8, 14))
('\xc3\xa6re', ' 1', ' 12516300', ' 35', datetime.date(2011, 8, 8))
('\xc3\xa6re v\xc3\xa6re deg', ' 1', ' 13145801', ' 59', datetime.date(2011, 8, 13))
('\xc3\xa6re v\xc3\xa6re deg og lammet', ' 1', ' 13145801', ' 59', datetime.date(2011, 8, 13))
('\xc3\xa6re v\xc3\xa6re jesu navn', ' 1', ' 13136667', ' 59', datetime.date(2011, 8, 11))
('\xc3\xa6rlig vuggevise', ' 1', ' 12386933', ' 35', datetime.date(2011, 8, 12))
('\xc3\xa6ror aleina', ' 1', ' 12867037', ' 35', datetime.date(2011, 8, 12))
('\xc3\xa6sj', ' 1', ' 13130891', ' 59', datetime.date(2011, 8, 8))
('\xc3\xa6thenor', ' 1', ' 12555673', ' 35', datetime.date(2011, 8, 10)) 
```

我现在遇到的问题是我应该如何以兼容的格式获取数据。所以我想我想知道如何访问数据库中的字符集并将其更改为 UTF-8，以及是否需要重建所有数据，或者是否有自动处理此问题的方法。如果有人能指出我如何使用内置函数格式化 datatime.date 的方向，我也会非常高兴（我知道我可以正则表达式和重建，但可能有一个更优雅的解决方案）。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:51:00.397

在您的第一列中，某些字符不可打印，因此将其转换为十六进制字符。日期时间对象中的最后一列。Python 提供 strftime 函数将其转换为字符串。

```
for row in c.fetchall():
    print row[0], row[1], row[2], row[3], row[4].strftime('%Y-%m-%d') 
```

将工作。

此外，您可以使用写入文件

```
file.write(",".join((row[0], row[1], row[2], row[3], row[4].strftime('%Y-%m-%d')))) 
```

其中，文件是文件对象。它将写为逗号分隔的列。在这里，您可以在打开文件时看到文件中的原始字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:42:15.883

我不熟悉 MySQLdb 但它应该是这样的

conn = MySQLdb.connect (unix_socket = '/opt/local/var/run/mysql5/mysqld.sock',host = "localhost", user = "username", passwd = "passwd", db="db", ***charset ="utf-8"*** )

确保您的数据库也可以使用 utf-8

使用 pypdbc 这看起来像

```
import pyodbc
con = pyodbc.connect('DRIVER={MySQL ODBC 3.51 Driver};SERVER=localhost;DATABASE=db;UID=user;PWD=blabla',charset='utf8', init_command='SET NAMES UTF8')
cursor = con.cursor()
str=u'''INSERT INTO migdal_hist VALUES("","2011/03/01","0","בלהבלה","0",","0","0")'''
cursor.execute(str.encode('utf-8'))
con.commit() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:22:25.840

也许你需要这样的东西：

```
mysql = MySQLdb.connect(host = '...', [...] use_unicode = True)
cursor = mysql.cursor()
cursor.execute("SET NAMES 'utf8'") 
```

让我们试试吧:)

# emacs - 如何在我的 Emacs 初始化文件中生成键盘宏？

> ID：10278375
> 
> 赞同：3
> 
> 时间：2012-04-23T09:58:48.090
> 
> 标签：emacs, macros

我经常定义一个特定的键盘宏，所以我认为如果每次加载 Emacs 时它都自动可用，它可能会很方便。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:15:29.123

[手册的保存键盘宏](http://www.gnu.org/software/emacs/manual/html_node/emacs/Save-Keyboard-Macro.html)部分怎么样？

```
C-x C-k n
    Give a command name (for the duration of the Emacs session) to the most recently defined keyboard macro (kmacro-name-last-macro).
C-x C-k b
    Bind the most recently defined keyboard macro to a key sequence (for the duration of the session) (kmacro-bind-to-key).
M-x insert-kbd-macro
    Insert in the buffer a keyboard macro's definition, as Lisp code. 
```

# javascript - 寻找一个高度可定制的图像轮播库

> ID：10278378
> 
> 赞同：0
> 
> 时间：2012-04-23T09:58:56.013
> 
> 标签：javascript, css, carousel

我知道这些类型的“问题”是不鼓励的，但由于我有非常具体的需求，我相信这个问题确实有一个明确的答案。

我需要一个满足以下要求的图像轮播：

*   我可以制作自己的过渡（基本上我想应用一个类并进行 CSS 过渡）
*   滑动移动支持
*   如果可能的话，我自己的标记
*   手动切换和自动切换

有这样的图书馆吗？我尝试过[Flexslider](http://www.woothemes.com/flexslider/ "弹性滑块")，但它不允许我拥有自己的过渡。

也许我最好只使用[Swipe JS](http://swipejs.com/)并编写自己的转换，尽管有许多边缘情况需要注意，所以我宁愿自己不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:02:23.907

jQuery Cycle 是一个非常好的插件，它主要做你想要的。

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

您可以使用任何默认转换或在选项中创建自己命名的转换。

[http://jquery.malsup.com/cycle/adv2.html](http://jquery.malsup.com/cycle/adv2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:52:44.933

我最终使用了用于桌面的自定义构建版本和用于触摸设备的 SwipeJS。

# android - 如何限制用户在 EditBox 中输入值

> ID：10278380
> 
> 赞同：0
> 
> 时间：2012-04-23T09:59:08.073
> 
> 标签：android

我有一个`EditBox`允许用户输入数字的地方。但我的问题是如何限制用户在小数点前输入不超过三位数字，并且在小数点后不超过一位数字，例如：`22.1`, `333.3`，`34`但如果用户尝试输入`6666.777`，则不允许他们输入.

请帮我解决这个问题。如果可能的话，举个例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:05:34.560

用于`InputFilter`限制用户。这是另一个这样的话题。[在 Android EditText 中限制小数位数](https://stackoverflow.com/questions/5357455/limit-decimal-places-in-android-edittext)

为你自己修改。我自己用过这个。

```
private class DecimalDigitsInputFilter implements InputFilter
{

    Pattern mPattern;

    public DecimalDigitsInputFilter(int digitsBeforeZero, int digitsAfterZero)
    {
        mPattern = Pattern.compile("[0-9]{0,3}\\.[0-9]{0,1}||[0-9]{1,3}");
    }

    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend)
    {

        Matcher matcher = mPattern.matcher(dest);
        if(!matcher.matches())
            return "";
        return null;
    }

} 
```

现在设置过滤器

```
youEditText.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(3,1)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-17T07:25:55.600

```
private boolean decimalValidation(String str,int decimalDigitCount){
        int positionFromLeft=INT_MAX;
        try {
            if (str.contains(".")) {
                positionFromLeft = str.length() - str.indexOf(".") - 1;
            }else positionFromLeft = 0;
        } catch (Exception e) {
            e.printStackTrace();
        }
        return positionFromLeft <= decimalDigitCount;
    }

Note: str has to be number in string format. 
```

# c# - jsTree：按名称展开节点

> ID：10278384
> 
> 赞同：0
> 
> 时间：2012-04-23T09:59:11.053
> 
> 标签：c#, javascript, jquery, jstree

我有一个通过 ajax 调用从服务器填充的 jQuery jsTree。我如何通过节点名称而不是 id 扩展节点？例如示例节点：

[{"attributes":[],"data":{"title":"mynode1","id":"1a051101-c3fa-48f2-b2e1-c60d1b67ea22"},"children":[{"attributes":[ ],"data":{"title":"mynode2","id":"26d6cff1-3c7f-4a2f-bf5a-422e08127b43"

如果只知道他的名字（“mynode1”），我如何扩展节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:36:48.247

通常，您不希望按标题打开节点，但可以这样做。如果多次找到相同的标题，则两者都会打开。将“.jstree”选择器替换为您的树独有的选择器。

```
var open_node_name="mynode1";
$(".jstree").find("a").each( function(index){
    if($(this).text().trim()==open_node_name){
        $.jstree._reference(".jstree").open_node($(this),function(){;},true);
    }
}); 
```

# javascript - $("a[rel=popover]").popover 不是函数

> ID：10278387
> 
> 赞同：3
> 
> 时间：2012-04-23T09:59:14.910
> 
> 标签：javascript, twitter-bootstrap, popover

我调用库的`js`文件，`bootstrap twitter`但我得到指示的错误

```
$("a[rel=popover]").popover is not a function 
```

.

```
<script src="../../jq/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="../../bootstrap/js/bootstrap.js" type="text/javascript"></script>
<script src="../../bootstrap/js/bootstrap-tooltip.js" type="text/javascript"></script>
<script src="../../bootstrap/js/bootstrap-popover.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {

        // second supervisor popover
        $('a[rel=popover]').popover({
            placement: 'below',
            offset: 20,
            trigger: 'manual'
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:51:59.030

这在 ASP.NET MVC 4 中发生在我身上。在我的项目中，我有一个

```
@Scripts.Render("~/bundles/jquery") 
```

都在我的页面顶部，`<head>`然后这些小`@Scripts.Render("~/bundles/jquery")`傻瓜中的一个又在`</body>`. 我删除了页面末尾的多余行，问题就消失了。

请注意，浏览器`<head>`以正确的顺序呈现：

```
<script src="/Scripts/jquery-1.9.1.js">
<script src="/twitterBootstrap/js/bootstrap.js">
<script src="/Scripts/modernizr-2.5.3.js"> 
```

然而，我结束了另一个

```
<script src="/Scripts/jquery-1.9.1.js"> 
```

在页面的底部。这让浏览器感到困惑，也让我感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:14:49.217

这有效：

~~[http://jsfiddle.net/9W53Q/7/](http://jsfiddle.net/9W53Q/7/)~~

编辑：http: [//jsfiddle.net/9W53Q/272/](http://jsfiddle.net/9W53Q/272/)

确保以正确的顺序添加资源（首先是工具提示）。或者像 Richard Dalton 建议的（我推荐），只需使用编译好的 bootstrap.js 文件。

```
$(document).ready(function() {
    $('a[rel=popover]').popover();
}); 
```

# browser - 中文编码问题

> ID：10278388
> 
> 赞同：0
> 
> 时间：2012-04-23T09:59:22.520
> 
> 标签：browser, encoding, utf-8, cjk

我正在尝试用中文创建一个网页，我意识到虽然在浏览器上运行它时文本看起来不错，但一旦我更改了字符编码，文本就会变得乱码。这是正在发生的事情：

1.  我在 Emacs 中创建了我的 html 文件，以 UTF-8 编码。
2.  我将它上传到服务器，然后在我的浏览器（FF、IE、Chrome、Opera）上查看——没问题。
3.  我尝试通过 FF > View > Character Encoding > All those different Chinese encoding systems, eg Chinese Simplified (HZ) 查看其他编码的页面
4.  除了 UTF-8，在其他所有编码中，文本都会变得乱码。

我假设这不是问题——即浏览器足够聪明，可以知道页面的编码方式，并准确地解析内容。我想知道的是，为什么我更改编码后就无法再阅读中文文本了——是因为我的操作系统上没有安装中文字体吗？如果我的观众是中国人，我应该坚持使用 UTF-8，还是应该从他们的众多编码系统中选择一种？

提前感谢您的帮助/意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:05:13.260

UTF 不是“包罗万象”的编码。它旨在包含国际语言字符符号以便于使用，但*它仍然是一种编码*，就像您选择的其他编码一样。您必须在每种编码中重新键入文本，以使其在使用该编码查看时正确显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:06:09.973

查看器编码必须与正在读取的文件匹配。将 UTF-8 视为其他内容与将 .txt 重命名为 .exe 并尝试运行它具有相同的意义。

您应该在 HTML 中指定正确的编码。您在 Web 浏览器中使用的选项仅在 Web 开发人员搞砸了他的工作并声明其他编码而不是实际使用的编码或在一页上混合 2 种不同的编码时才存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:42:59.270

当然，更改浏览器中的编码会“破坏”文本！浏览器正在获取 UTF-8 代码点流，并尝试对原始数据强制执行另一种编码。不用说，结果并不漂亮。在浏览器中更改编码并不等同于转换。

正如您所猜测的那样，现代浏览器通常会正确猜测 - 但并非总是如此。作为 Agent_L，请确保在标头中声明编码。

# powershell - 具有多个输入的 CMD 批处理文件

> ID：10278390
> 
> 赞同：0
> 
> 时间：2012-04-23T09:59:29.703
> 
> 标签：powershell, batch-file, cmd

我正在尝试自动化一个命令，提示用户输入他们的密码，即有问题的命令；

```
tpmvscmgr.exe create /name "vSmartcard" /pin prompt /adminkey default generate 
```

此时你按下回车，接下来你看到的是

```
Enter Pin: 
```

您输入 pin 并按 enter，然后在再次按 enter 之前会要求您确认 pin。

如何在批处理文件或 powershell 中自动执行此操作？我无法找到任何以类似方式工作的命令，甚至无法开始使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T01:20:11.850

我不确定下面的技巧是否适用于您的特定程序；但即使在这种情况下，如果程序提示输入额外的输入，它也必须放在引脚号旁边的括号内。也许这足以满足您的需求...

```
@echo off
(
echo pinnum
echo pinnum
) | tpmvscmgr.exe create /name "vSmartcard" /pin prompt /adminkey default generate 
```

# ruby-on-rails - 知道为什么 Internet Explorer 不保存会话 cookie 吗？

> ID：10278391
> 
> 赞同：1
> 
> 时间：2012-04-23T09:59:31.633
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, session, session-cookies

我使用导轨 3.0.11。在 Internet Explorer 中，会话 cookie 没有保存（至少我没有看到），但在其他浏览器（chrome、Firefox）中它会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:44:02.213

看起来 Internet Eplorer 确实保存了会话 cookie，但它没有在开发人员工具上显示它。我使用 Fiddler 在 ie 中查看会话 cookie 信息。

# c# - 桌面应用爬虫

> ID：10278393
> 
> 赞同：2
> 
> 时间：2012-04-23T09:59:35.140
> 
> 标签：c#, user-interface, web-crawler

早上好，

我正在研究生成桌面应用程序爬虫的可行性。此应用程序爬虫的工作方式与网络爬虫类似——它会询问应用程序以获取 UI 结构。为了适应其他正在进行的项目，这将在 C# 中编码。

该程序将能够获取 Window 和 Control 属性并生成哪些控件存在于哪些 Windows 上的列表。

这样的事情可能吗？- 我认为它就像微软的 UI Spy 这样的项目做类似的工作。输出将是简单的 XML 格式。

提前致谢，JH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:11:02.653

也不是很清楚你*到底*是什么意思，但是为了调查`.NET`你可以使用[ManagedSpy](http://msdn.microsoft.com/en-us/magazine/cc163617.aspx)编写的指定 WinsowsApp 的内容。

您是否希望以服务方式向您提供一些*mertics*信息，您可以传递一个[Desk Metrics](http://deskmetrics.com/)（他们也有免费计划）

如果这不是您要的，请澄清。

# javascript - 在鼠标向下和向上时获取动态生成的子 div 的索引值

> ID：10278394
> 
> 赞同：0
> 
> 时间：2012-04-23T09:59:37.097
> 
> 标签：javascript, jquery

我正在处理生成动态 DOM 结构的页面，并且该 DOM 中的 div 包含文本。我想创建一个 jQuery 或 JavaScript 函数，以便当用户从页面中选择一些文本时，包含文本的 div 的索引应该存储在鼠标按下和鼠标按下事件的变量中。我创建了以下小提琴，它是我想要的原型，但我希望我的函数更通用，即在任何 pageContainer 中，当用户选择它应该给我初始 div 索引和最终 div 索引的文本时。DOM结构中只有带有id查看器的div不是动态的另一件事是动态的

这是小提琴[链接](http://jsfiddle.net/hiteshtr/pPJj3/)

和我页面的 DOM 结构：

```
<div id="viewer">
    <div id="pageContainer1" >
        <canvas id="page1" ></canvas>
        <div class="textLayer">
            <div>......some text here....</div>
            <div>......some text here....</div>
            <div>......some text here....</div>
        </div>
    </div>

    <div id="pageContainer2" >
        <canvas id="page2" ></canvas>
        <div class="textLayer">
            <div>......some text here....</div>
            <div>......some text here....</div>
            <div>......some text here....</div>
        </div>
    </div>

    <div id="pageContainer3" >
        <canvas id="page3" ></canvas>
        <div class="textLayer">
            <div>......some text here....</div>
            <div>......some text here....</div>
            <div>......some text here....</div>
        </div>
    </div>
</div> 
```

# android - 单选按钮大小

> ID：10278397
> 
> 赞同：1
> 
> 时间：2012-04-23T09:59:55.613
> 
> 标签：android

我正在创建一个应用程序，其中有多个单选按钮。但是单选按钮的尺寸非常大。如何减小这些单选按钮的大小？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:05:40.537

您可以使用自己的图像制作自定义单选按钮。这可能会有所帮助：[是否可以更改 android 单选按钮组中的单选按钮图标](https://stackoverflow.com/questions/3576507/is-it-possible-to-change-the-radio-button-icon-in-an-android-radio-button-group)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:07:24.067

看看这个答案...... [https://stackoverflow.com/a/5547552/1320245](https://stackoverflow.com/a/5547552/1320245) 基本上，您可以在 XML 中设置布局的大小。

# javascript - 刷新后 Internet Explorer 9 中的 Ajax 速度变慢

> ID：10278398
> 
> 赞同：1
> 
> 时间：2012-04-23T10:00:11.557
> 
> 标签：javascript, html, ajax, internet-explorer-9

我正在开发一个大量使用 JavaScript 和 Ajax 来提供所需功能的客户端 Web 应用程序。

对于大多数浏览器（Chrome、Firefox、...）来说，这不是问题，但在 Internet Explorer 中，性能是一个主要问题。

即使在 Internet Explorer 上，初始加载页面也只需不到一秒钟的时间。但是在刷新页面后，加载和显示页面可能需要 1 到 20 秒的时间。

由于应用程序分为多个文件，因此很难发布代码。我只能解释预期的行为。

应用程序初始化两个内容容器，一个用于静态内容，一个用于动态内容。这些内容容器中的每一个都通过 Ajax 填充，并通过 innerHTML 属性影响 DOM 元素。

第一次构建页面需要不到一秒钟的时间。随后的刷新需要更长的时间。

页面的初始加载和页面的刷新之间有什么变化来解释这种巨大的性能下降？我是否需要在卸载页面时取消初始化某些内容？

```
Communication.request = function (method, target, async, data, callback) {
    var types = ['string', 'string', 'boolean', 'null', 'null'];                // Parameter types

    if (data) {                                                                 // Data was provided
        types[3] = 'string';                                                    // Data must be a string
    }

    if (callback) {                                                             // Callback was provided
        types[4] = 'function';                                                  // Callback must be a function
    }

    if (Utils.hasParams(arguments, types)) {                                    // All the required parameters were provided and of the right type
        var request = new XMLHttpRequest();                                     // Create a new request

        request.open(method, target, async);                                    // Open the request

        if (callback) {                                                         // Callback was provided
            request.handleCallback(callback);                                   // Register the callback
        }

        if (data) {                                                             // Data was provided
            var contentType = 'application/x-www-form-urlencoded';              // Prepare the content type

            request.setRequestHeader('Content-Type', contentType);              // Add a content type request header
        }

        request.send(data);                                                     // Send the request
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:40:36.720

这个问题似乎与并发连接的数量有关。根据网络服务器的连接/类型，这在 Internet Explorer 中被限制为 2 或 4 个并发连接。

将连接数限制为 2 后，问题不再出现。其他浏览器似乎有更高的限制，尽管我将这些限制为 4 以防万一。

此外，并发消息的数量是在任何给定时间进行中的消息数量。这以前是无限的，这让 Internet Explorer 非常难过 :-(

# mysql - jpa中正确的外键方法或数据保存基本方法

> ID：10278399
> 
> 赞同：0
> 
> 时间：2012-04-23T10:00:13.037
> 
> 标签：mysql, jpa, jpa-2.0

我的这个问题是主观的

我正在从第三个站点获取对象列表。现在我想将该数据保存在数据库中。假设数据是列表。此响应是针对我向该站点发起的查询。现在我想保存两件事 1）查询名称 2）响应（列表）（答案） myobject 可以有很多与我的查询相对应的答案。现在我想分别保存所有这些答案，以便可以独立获取每个答案。

现在我有这种数据库方法

用于查询和查询 id 的一张表

第二个表将由查询 id 和查询答案组成。（这将是第一个表中的外键

我的问题是我是否遵循正确的方法？

最初我想将整个列表保存在数据库中，但据我所知，我们不能直接将列表保存在数据库中，尽管在 jpa 实现 2.0 中我们可以将列表保存在数据库中（如果我错了，请纠正我）

请用我目前的方法指导我，或者有更好的方法

我正在使用 JPA 2.0 eclipselink。

问候阿尼尔夏尔马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:26:50.220

你的对象模型是什么？

您可以使用 OneToMany 或 ManyToMany 来存储 Entity 对象的集合。

如果您有一个列表或列表，您可以使用 ElementCollection 存储它。但是您最好创建一个 Answer 或 AnswerReference 实体。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/ElementCollection](http://en.wikibooks.org/wiki/Java_Persistence/ElementCollection)

# python - python定义副本集配置

> ID：10278402
> 
> 赞同：0
> 
> 时间：2012-04-23T10:00:17.157
> 
> 标签：python, mongodb

我正在编写脚本以在 python 中为 mongo 设置 replaset。脚本的第一部分启动进程，第二部分应该配置副本集。

从命令行我通常这样做：

```
config={_id:"aaa",members:[{_id:0,host:"localhost:27017"},{_id:1,host:"localhost:27018"},{_id:2,host:"localhost:27019",arbiterOnly:true}]}
rs.initiate(config)
rs.status(); 
```

然后我从 rs.status() 查看所有成员都已初始化我想在 python 脚本中做同样的事情。

一般来说，我正在寻找一个很好的 mongodb 安装脚本参考（也是分片）。我在他们的网站上看到了 python 脚本，这是一个很好的起点（但它仅适用于 replSet 中的单机和单节点）。我需要在不同的机器上进行所有设置。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:24:00.957

如果您运行`rs.initiate`（没有`(config)`），shell 会告诉您它将运行哪个命令。在这种情况下，它将是：

```
function (c) {
    return db._adminCommand({replSetInitiate:c});
} 
```

在 python 中，这应该是这样的：

```
>>> from pymongo import Connection
>>> c = Connection("morton.local:27017", slave_okay=True)
>>> d.command( "replSetInitiate", c ); 
```

作为`c`您的副本集配置。[http://api.mongodb.org/python/current/api/pymongo/database.html#pymongo.database.Database.command](http://api.mongodb.org/python/current/api/pymongo/database.html#pymongo.database.Database.command)有更多关于调用命令的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T09:19:33.017

谢谢德里克。以下是对您的回答的一些评论。**'replSetInitiate'**是 DBA 命令。再次运行**“管理员”**数据库。就像这里：

```
conn = Connection("localhost:27017", slave_okay=True)
conn.admin.command( "replSetInitiate" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T04:56:17.083

要在 pymongo 中获取 rs.status 的输出，我们可以像这样使用

```
def __init__(self):
    '''Constructor'''
    self.mdb=ReplicaSetConnection('localhost:27017',replicaSet='rs0')

def statusofcluster(self):
    '''Check the status of Cluster and gives the output as true'''
    print "We are Inside Status of Cluster"
    output=self.mdb.admin.command('replSetGetStatus') 
```

# java - java获取给定日期的一年中的一周

> ID：10278410
> 
> 赞同：14
> 
> 时间：2012-04-23T10:00:47.073
> 
> 标签：java, calendar

给定日期，我如何获得一年中的一周？我尝试了以下代码：

```
 Calendar sDateCalendar = new GregorianCalendar();
  sDateCalendar.set(Integer.parseInt(sDateYearAAAA), Integer.parseInt(sDateMonthMM)-1, Integer.parseInt(sDateDayDD));
  System.out.format("sDateCalendar %tc\n", sDateCalendar);        
  iStartWeek = sDateCalendar.getWeekYear();
  System.out.println("iStartWeek "+iStartWeek+ " "+sDateCalendar.WEEK_OF_YEAR); 
```

我得到： sDateCalendar lun apr 23 11:58:39 CEST 2012 iStartWeek 2012 3

而一年中正确的星期是 17。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-01-18T01:59:14.740

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-06T12:00:09.537

优雅的方式（不需要 java.util.Calendar）：

```
new SimpleDateFormat("w").format(new java.util.Date()) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-04-23T10:06:04.223

您正在使用 sDateCalendar.WEEK_OF_YEAR，它是静态整数 WEEK_OF_YEAR，请参阅 java.util.Calendar 类的源代码：

```
public final static int WEEK_OF_YEAR = 3; 
```

要获得周数，您应该使用：

```
sDateCalendar.get(Calendar.WEEK_OF_YEAR); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-29T19:33:59.463

```
Calendar calendar = Calendar.getInstance(Locale.WHATEVER);
calendar.set(year, month, day);
calendar.get(Calendar.WEEK_OF_YEAR); 
```

小心日历中的月份，因为它从 0 开始，或者更好地使用 Calendar.WHATEVER_MONTH

# php - 如何将代码直接存储在数据库中？

> ID：10278411
> 
> 赞同：-2
> 
> 时间：2012-04-23T10:00:47.773
> 
> 标签：php, mysql, database

我正在尝试在 mysql 中存储一行 xml，保存后，它会被格式化为一些额外的字符。

```
href=\"\" index=\"My Website\" admin=\"Civillage\" default=\"Borak Obama, Mitt Romney\" country=\"USA\" age=\"\" gender=\'\' usertopicsallowed=\'no\' layout=\'line\' 
```

我怎样才能摆脱反斜杠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:02:26.310

只是在将文本保存到数据库之前不要添加它们。

*   检查`magic_quotes`设置蚂蚁确保它已打开`OFF`
*   检查您的代码是否过度转义。只有字符串数据必须为查询转义，并且只需执行一次。
*   准备好的语句根本不应该被转义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:03:03.120

使用[`stripslashes()`](http://php.net/manual/en/function.stripslashes.php)：

```
$str = "Is your name O\'reilly?";
echo stripslashes($str);    // Outputs: Is your name O'reilly? 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T11:25:02.293

用于[`mysql_real_escape_string($s);`](http://php.net/manual/en/function.mysql-real-escape-string.php)您希望存储在数据库中的任何代码输入，这将成功地转义字符并且不会给您留下任何多余的斜杠。

要使此方法起作用，必须已经建立了一个 mySQL 连接。

希望这可以帮助。

# html - HTML5 应用程序缓存回退在 Firefox 中不起作用

> ID：10278412
> 
> 赞同：3
> 
> 时间：2012-04-23T10:00:54.530
> 
> 标签：html, manifest, html5-appcache

我正在使用最新的 Firefox (11)，并且我已将 IIS 设置为将 *.appcache 作为文本/缓存清单提供服务，并且通过查看“about:cache”“C: \Users\\AppData\Local\Mozilla\Firefox\Profiles\.\OfflineCache”（根据[MDN](https://developer.mozilla.org/en/Using_Application_Cache)），下面是我的 demo.appcache 文件：

```
CACHE MANIFEST
../../js/jquery-1.7.1.js
offline.html

NETWORK:
# Chrome respects *
*
# Firefox respects following, refer: http://appcachefacts.info/
http://*
https://*

FALLBACK:
/ offline.html

CACHE:
foo.js 
```

我的步骤描述如下：

1.  通过选项->高级->“离线Web内容和用户数据”->“立即清除”清除所有缓存。
2.  访问我的html页面`<html manifest="demo.appcache">`
3.  我加倍 Firefox 确实缓存了我在上面的 demo.appcache 中指定的项目。
4.  我通过 Menu -> Web Developer -> Work Offline 将 Firefox 切换到“脱机工作”。
5.  我访问“Online.html”，**我希望 Firefox 会向我呈现 offline.html**，但是，它说“我无法访问该页面，因为我处于离线状态”。

Chrome 一切正常，但无法切换到“离线模式”，请参阅：[Broken Offline Support](http://remysharp.com/2011/04/19/broken-offline-support/) Opera 可以离线工作，但它甚至可以正确缓存，它没有缓存 offline.html 我在“缓存”模块中指定的显然违反了标准。

我在这个问题（第 5 步）上苦苦挣扎超过 3 天，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:27:45.190

在过去的几天里，我也一直在研究这个。读完你的帖子，我正要回复，突然有事打到我。

在 Chrome 中，我一直在使用代理切换器对此进行测试，以在我的连接和错误代理信息之间切换以模拟连接丢失。就像您在 Firefox 中一样，我使用的是“脱机工作”。就我而言，我看到的是“在线”页面的本地缓存版本，而不是我预期的离线后备版本。

在 Firefox 中，我转到工具 -> 选项 -> 网络 -> 设置并更改代理信息以查看会发生什么。有效！

因此，“脱机工作”要么不会触发回退，要么根本不会触发本地存储。

-内森

# android - Android如何处理多个R.java？

> ID：10278413
> 
> 赞同：10
> 
> 时间：2012-04-23T10:00:56.400
> 
> 标签：android, modularity, android-library, r.java-file

我正在为一个项目制作几个 Android 库应用程序。为了简化问题，假设我在这个项目中有两个库（**utilLib**，**screenLib**）（现在将被称为**app**）。

每个项目中都有同名但值不同的字符串资源。像这样：

**工具库**

```
<string name="app_version">1.0</string>
<string name="hello">UtilLib Hello</string> 
```

**屏幕库**

```
<string name="app_version">0.7a</string>
<string name="hello">ScreenLib Hello</string> 
```

**应用程序**

```
<string name="app_version">0.1</string> 
```

我意识到我可以使用**com.package.R**来引用字符串，但是如果我的代码看起来像这样会怎样？

```
<!-- language: java -->
import com.app.R; 
...

private void checkValue(){
    String version = getString(R.app_version);
    Log.d(TAG, "version: " + version); // 0.1 show be here
    String hello = getString(R.hello);
    Log.d(TAG, "Hello: " + hello); // <---- ? ('UtilLib Hello' or 'ScreenLib Hello')
} 
```

我正在尝试在这里进行模块化构建，但不完全了解 Android 如何优先使用其 R.java。有没有人经历过这个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T10:48:02.860

```
Log.d(TAG, "version: " + version); // 0.1 show be here 
```

[来自官方开发指南管理项目 - 图书馆项目](http://developer.android.com/guide/developing/projects/index.html#LibraryProjects)的原因引用：

> 当您构建依赖于库项目的应用程序时，SDK 工具会将库编译为临时 JAR 文件并在主项目中使用它，然后使用结果生成 .apk。如果在应用程序和库中都定义了资源 ID，这些工具会确保应用程序中声明的资源获得优先权，并且库项目中的资源不会编译到应用程序 .apk 中。这使您的应用程序可以灵活地使用或重新定义在任何库中定义的任何资源行为或值。

* * *

```
Log.d(TAG, "Hello: " + hello); // <---- ? ('UtilLib Hello' or 'ScreenLib Hello') 
```

**这是由图书馆项目优先级决定的。**

引用官方开发指南[管理项目 - 库项目](http://developer.android.com/guide/developing/projects/index.html#LibraryProjects)：

> *   **资源冲突**
>     
>     
>     
>     由于这些工具将库项目的资源与依赖应用程序项目的资源合并，因此可以在两个项目中定义给定的资源 ID。在这种情况下，工具从应用程序或具有最高优先级的库中选择资源，并丢弃其他资源。在开发应用程序时，请注意公共资源 ID 可能会在多个项目中定义并且将被合并，应用程序或最高优先级库中的资源优先。

引用官方开发指南[From Eclipse with ADT - 引用库项目](http://developer.android.com/guide/developing/projects/projects-eclipse.html#ReferencingLibraryProject)：

> 如果要添加对多个库的引用，请注意，您可以通过选择一个库并使用 Up 和 Down 控件来设置它们的相对优先级（和合并顺序）。这些工具将引用的库与您的应用程序合并，从最低优先级（列表底部）到最高（列表顶部）。如果多个库定义了相同的资源 ID，则工具会从具有更高优先级的库中选择资源。应用程序本身具有最高优先级，并且其资源始终优先于库中定义的相同资源 ID 使用。

[从命令行](http://developer.android.com/guide/developing/projects/projects-cmdline.html#ReferencingLibraryProject)引用官方开发指南- 引用图书馆项目：

> 如果要添加对多个库的引用，请注意，您可以通过手动编辑 project.properties 文件并适当调整每个引用的 .n 索引来设置它们的相对优先级（和合并顺序）。例如，假设这些引用：
> 
> ```
>  android.library.reference.1=path/to/library_projectA
>  android.library.reference.2=path/to/library_projectB
>  android.library.reference.3=path/to/library_projectC 
> ```
> 
> 您可以通过这种方式对引用重新排序以给予 library_projectC 最高优先级：
> 
> ```
>  android.library.reference.2=path/to/library_projectA
>  android.library.reference.3=path/to/library_projectB
>  android.library.reference.1=path/to/library_projectC 
> ```

我找不到任何可以比官方开发指南更清楚地解释这一点的词。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T10:07:07.023

你将不得不
在你的代码中导入 com.screenLib.R 和 com.utilLib.R 它可能会抛出一个错误“无法解析你好”

让我知道这是否正确！！！！

# sitecore - DMS 2.0 中的自定义广告系列 URL

> ID：10278414
> 
> 赞同：1
> 
> 时间：2012-04-23T10:00:58.733
> 
> 标签：sitecore, sitecore-dms

**已编辑** 该问题 (#347688) 已在 Sitecore CMS 6.5.0 rev 中修复。120427（6.5.0 Update-4）和 DMS 2.0.1 rev。120427

* * *

我们被要求解释编辑可以在哪里自定义活动跟踪 url，他们在参加 Sitecore 培训课程时看到了该功能，但在我们的平台中找不到当前已完全更新的功能。

在我看来，该功能已被删除，否则在查看活动项目的插入选项时，它隐藏在 DMS 安装中缺少的 {3AC13180-912F-4388-AF56-46A0F1172E70} 中。

有人对这个话题有见解吗？以及该功能是否仍然存在或已被其他型号删除。

## OMS / 自定义广告系列跟踪 URL

在查看 Sitecore OMS 的旧文档时，与**OMS 创建活动事件**相关的部分，编辑器应该可以个性化触发页面访问以附加到特定活动的传入 url 参数。

参考：“ *OMS 创建活动事件*”*第 13-14 页* [http://sdn.sitecore.net/upload/sitecore6/64/online%20marketing%20suite%20cookbook-usletter.pdf](http://sdn.sitecore.net/upload/sitecore6/64/online%20marketing%20suite%20cookbook-usletter.pdf)

## 参与度分析/无自定义广告系列跟踪 URL (?)

在新的 DMS 2.0 / Engagement Analytics 中，还有页面事件，它们应该可以附加到活动中。但我们似乎无法在 Campaign 定义下创建任何内容，即使文档中的第一行表明了这一点。查看广告系列的“插入”选项，发现缺少 ID：{3AC13180-912F-4388-AF56-46A0F1172E70}，这表明安装缺少此功能的项目。

参考：“*参与分析页面事件*”*第 6-7 页* [http://sdn.sitecore.net/upload/sitecore6/65/engagement_analytics_configuration_reference_sc65-usletter.pdf](http://sdn.sitecore.net/upload/sitecore6/65/engagement_analytics_configuration_reference_sc65-usletter.pdf)

> **活动**
> 
> 您可以将事件与特定活动相关联。要注册活动事件，请在活动定义项下，使用系统/分析/活动数据模板插入活动事件定义项。您可以使用 sc_camp 查询字符串参数的值激活活动，也可以将活动分配给内容项，例如登录页面。有关活动的更多信息，请参阅活动部分。要更改 sc_camp 查询字符串参数的名称，请参阅 Analytics.CampaignQueryStringKey 设置部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:11:58.167

我已与 Sitecore 支持人员联系，他们回复说自定义触发活动的 url 的选项已被删除。该文档在该主题上具有误导性，并且他们已将其注册为错误。

因此，yoursite.net/?sc_camp={此处的广告系列项目的 ID} 或使用带有广告系列的登录页面作为触发器是目前监控来自广告系列的传入链接的唯一方法，除非构建自定义代码。

感谢您的回答。

已编辑：该问题 (#347688) 已在 Sitecore CMS 6.5.0 rev 中修复。120427（6.5.0 Update-4）和 DMS 2.0.1 rev。120427

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:11:13.007

提到的 ID *{3AC13180-912F-4388-AF56-46A0F1172E70}*曾经是一个**活动事件**模板。不再使用活动事件，因为它们已被Sitecore DMS 中的**活动取代。**

为了跟踪它，请使用以下 URL 格式：yoursite.net/?sc_camp **= {此处的广告系列项目的 ID}**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:43:42.050

我只是想补充一点，虽然这可能是他们所知道的以及他们想要使用的，但它如此模糊的原因是因为这真的不是你应该做的事情，我不建议这样做，因为它不是真正保证被跟踪。DMS 和底层数据库的结构使得我坚持通过将事物与活动相关联来进行设置。跟踪在很大程度上是通过触发的页面事件完成的......但仅修改 url 将触发访问和新页面，但不会创建页面事件，除非有与该项目相关联的东西会触发事件.

活动通常与项目、事件、参与计划或 DMS 的任意数量的不同元素相关联。在所有情况下，项目上都有一个选项卡，可以选择检查要与之关联的活动。这就是您希望执行此操作的方式，以确保正确创建页面事件并与活动相关联。

# hbase - ZK 在运行 hbase 时抛出错误

> ID：10278421
> 
> 赞同：1
> 
> 时间：2012-04-23T10:01:30.437
> 
> 标签：hbase

线程“main”中的异常 java.lang.NoClassDefFoundError: org.apache.hadoop.hbase.zookeeper.HQuorumPeer.main(HQuorumPeer.java:61) 处的 org/apache/zookeeper/server/quorum/QuorumPeerConfig 原因：java.lang .ClassNotFoundException: org.apache.zookeeper.server.quorum.QuorumPeerConfig at java.net.URLClassLoader$1.run(URLClassLoader.java:366) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) at java.security .AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:423) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher .java:308) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) ... 还有 1 个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:04:17.707

和我一起在 cygwin 中运行 hbase 时也有同样的情况。我通过编辑 hbase-env.sh 解决了这个问题，添加以下行：

```
export HBASE_CLASSPATH="C:\hadoop-0.20.2\conf" 
```

# javascript - js中的随机声音

> ID：10278426
> 
> 赞同：0
> 
> 时间：2012-04-23T10:01:38.567
> 
> 标签：javascript, html5-audio

如何在 JavaScript 中创建随机声音并将其保存到桌面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:20:30.080

使用 Riffwave 之类的库：http: [//codebase.es/riffwave/](http://codebase.es/riffwave/)

> “riffwave.js”是一个小型 javascript 库，可将音频数据编码为一种格式（RIFF 容器内的 PCM），该格式可用于播放带有 HTML5 音频元素的合成声音。

例如随机声音生成

```
var data = []; 

for (var i=0; i<1000; i++) {
    // fill data with random samples
    data[i] = Math.round(255 * Math.random()); 
}

var wave = new RIFFWAVE(data); // create the wave file

/*
     pass wave.dataURI property to a server page via POST and 
     then re-send the content along with the right headers 
     for a wav file so  to enforce download

     or just redirect your client using data:uri schema, like
     location.href =  wave.dataURI 
     (but this won't force the download in every browser)
*/ 
```

# java - Java 类作为监视器

> ID：10278432
> 
> 赞同：3
> 
> 时间：2012-04-23T10:02:09.360
> 
> 标签：java, multithreading, concurrency

我需要编写一个 java 程序，但在我自己开始之前我需要一些建议。

**我将要编写的程序是执行以下操作：**

*   模拟一家商店提前订购甜甜圈

*   一旦订购了5000个甜甜圈，该商店将不再接受订单

好吧，如果我应该编写 java 类来充当监视器，或者我应该使用 Java-Semaphore 类，我有点卡住了？

请给我建议。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:03:52.630

任何 java 对象都可以通过继承自的等待/通知方法作为监视器`Object`：

```
Object monitor = new Object();

// thread 1    
synchronized(monitor) {
    monitor.wait();
}

// thread 2
synchronized(monitor) {
    monitor.notify();
} 
```

只需确保在调用这些方法时持有监视器对象上的锁（不用担心`wait`，锁会自动释放以允许其他线程获取它）。这样，您就有了一种方便的机制来在线程之间发出信号。

在我看来，您正在实现一个有界的生产者-消费者队列。在这种情况下：

1.  生产者将继续将项目放入共享队列中。
2.  如果队列大小达到 5000，它将调用`wait`共享监视器并进入睡眠状态。
3.  当它放置一个项目时，它会调用`notify`监视器来唤醒正在等待的消费者。
4.  消费者将继续从队列中取出物品。
5.  当它获取一个项目时，它会调用`notify`监视器来唤醒生产者。
6.  如果队列大小达到 0，则消费者调用`wait`并进入睡眠状态。

对于更简化的方法，在[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)的各种实现处有一个循环，它提供了开箱即用的上述功能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:29:59.057

在我看来，这个练习的核心是以线程安全和原子的方式更新计数器（接受的订单数）。如果实施不正确，您的商店最终可能会收到超过 5000 个预订，因为错过了更新，并且可能不同的线程看到了计数器的陈旧值。

以原子方式更新计数器的最简单方法是使用`synchronized`获取和递增计数器的方法：

```
class DonutShop {

    private int ordersTaken = 0;

    public synchronized int getOrdersTaken() {
        return ordersTaken;
    }

    public synchronized void increaseOrdersBy(int n) {
        ordersTaken += n;
    }

    // Other methods here
} 
```

[同步方法](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)意味着任何时候只有一个线程可以调用任一方法（它们还提供内存屏障以确保不同的线程看到相同的值，而不是本地缓存的可能已过时的值）。这确保了应用程序中所有线程的计数器视图一致。

（请注意，我没有“set”方法，而是“increment”方法。“set”的问题是，如果客户端必须调用`shop.set(shop.get() + 1);`，另一个线程可能会在调用`get`and之间增加值`set`，所以这次更新会丢失。通过使整个增量操作原子化——因为它在同步块中——这种情况不会发生。

* * *

在实践中，我可能会使用[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)代替，它基本上是一个包装器，`int`以允许原子查询和更新，就像`DonutShop`上面的类一样。它还有一个优点，即它在最大限度地减少排他阻塞方面更有效，并且它是标准库的一部分，因此其他开发人员会比您自己编写的类更容易熟悉。

就正确性而言，两者都足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:26:56.687

就像 Tudor 所写的那样，您可以使用任何对象作为通用锁定和同步的监视器。

但是，如果您要求在任何时候只能处理 x 个订单（对于您的情况，x=5000），您可以使用`java.util.concurrent.Semaphore`该类。它专门用于只能运行固定数量的作业的用例 -在术语中称为*许可*`Semaphore`

如果您立即进行处理，则可以使用

```
private Semaphore semaphore = new Semaphore(5000);

public void process(Order order)
{
    if (semaphore.tryAcquire())
    {
        try
        {
            //do your processing here
        }
        finally
        {
            semaphore.release();
        }
    }
    else
    {
        throw new IllegalStateException("can't take more orders");
    }
} 
```

如果 if 需要更多（需要人工输入，启动另一个线程/进程等），则需要在处理结束时添加回调，例如：

```
private Semaphore semaphore = new Semaphore(5000);

public void process(Order order)
{
    if (semaphore.tryAcquire())
    {
        //start a new job to process order
    }
    else
    {
        throw new IllegalStateException("can't take more orders");
    }
}

//call this from the job you started, once it is finished
public void processingFinished(Order order)
{
    semaphore.release();
    //any other post-processing for that order
} 
```

# c - 为什么 文件没有定义套接字类型？

> ID：10278433
> 
> 赞同：2
> 
> 时间：2012-04-23T10:02:15.807
> 
> 标签：c, sockets

Linux 提供的头文件“/usr/include/linux/socket.h”包含支持的地址族和协议族的定义：

```
/* Supported address families. */
#define AF_UNSPEC       0
....

/* Protocol families, same as address families. */
#define PF_UNSPEC       AF_UNSPEC
... 
```

但是为什么它没有定义套接字类型呢？

我可以在“/usr/include/bits/socket.h”中找到它的定义为

```
enum sock_type {
    SOCK_DGRAM  = 1,
    SOCK_STREAM = 2,
    SOCK_RAW    = 3,
    SOCK_RDM    = 4,
    SOCK_SEQPACKET  = 5,
    SOCK_DCCP   = 6,
    SOCK_PACKET = 10,
}; 
```

我想知道为什么Linux提供的头文件中没有定义这些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:08:48.113

用户空间程序应该使用：

```
#include <sys/socket.h> 
```

注意：*`sys`*，不是*`linux`*。

这将`#include`是适当的低级头文件。

`<bits/socket.h>`一些定义在其中，一些定义在其中的事实`<linux/socket.h>`只是一个实现细节。

# c# - 无法加载类型“DataContext”

> ID：10278435
> 
> 赞同：1
> 
> 时间：2012-04-23T10:02:17.840
> 
> 标签：c#, asp.net, .net, visual-studio

我正在使用数据库中的 LINQ to SQL 类。当我尝试创建一个新实例时它崩溃：

```
DataLayerDataContext dataLayerDataContext = new DataLayerDataContext(); 
```

堆栈跟踪：

```
[HttpException (0x80004005): Could not load type 'DataLayerDataContext'.]
System.Web.Compilation.BuildManager.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase) +8941051
System.Web.UI.WebControls.LinqDataSourceView.get_ContextType() +107 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:13:00.330

如果您将您`DataContext`的工作项目与工作项目分开，那么您需要将`connection strings`数据库从工作项目的配置文件添加`DataContext project`到工作项目的配置文件中，以便它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:37:44.957

您还可以将连接字符串传递给 DataContext 构造函数，如下所示：

using(DataLayerDataContext dataLayerDataContext = new DataLayerDataContext("connectionstring")) { 在这里使用 DataLayerDataContext。}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T06:34:43.950

在我将 dbml 移动到一个单独的类库（从视图中提取模型的许多步骤中的一个步骤）之后，我最近遇到了这个问题。就我而言，所有 LinqDataSource 都停止了工作。

我的解决方案是将完整的命名空间添加到 LinqDataSource 中的 ContextTypeName 字段。查找和替换是您的朋友。

# jquery - Jquery在页面加载时一张一张显示矩阵图像

> ID：10278436
> 
> 赞同：0
> 
> 时间：2012-04-23T10:02:18.823
> 
> 标签：jquery

我有一个带有矩阵产品图像的页面，我想用 jquery 动画一个接一个地显示它，我正在使用这样的代码

默认情况下，所有图像都处于隐藏状态。以下代码用于延迟显示每个图像，因此它将一个接一个地显示

`$(".container img").each(function(i) { $(this).delay(100*i).fadeIn(); });`

这很好用，但是问题是我有很多类别，如果用户单击第二个类别，则在加载一个类别时，仍然会在第二个类别中显示第一个类别的图像

我怎么能没有问题地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:35:06.267

将您的类别选项按钮设置为`input type=button`. 只需在加载图像时禁用按钮，并在加载所有图像后，从输入中删除禁用按钮，如下所示：

```
$("div input").click(function() {
   $("div input").attr('disabled',true);

   $(".container img").each(function(i) {
        $(this).delay(100*i).fadeIn();
   });

   $(".container img").promise().done(function() {
        $("div input").removeAttr('disabled');
   });

}); 
```

jQuery Promise 函数用于查找函数的终点`$(".container img)`。[您可以在http://api.jquery.com/promise/](http://api.jquery.com/promise/)阅读更多内容。

# mysql - 在同一查询中重用计算字段以进行新计算

> ID：10278442
> 
> 赞同：1
> 
> 时间：2012-04-23T10:02:31.473
> 
> 标签：mysql, sql

我正在尝试创建一个查询，该查询将计算字段用于同一查询中的另一个计算，但它给了我一个错误。

如何以替代方式完成此操作。

询问 ：

```
SELECT MIN(q.order_created) AS first_ordered,           
       MAX(q.order_created) AS last_ordered,
       SUM(IF(DATE_ADD(q.order_created,INTERVAL 12 MONTH) >= NOW(),pq.product_qty,0))/12 AS monthly_rate,                     
       SUM(pq.product_qty) AS yearly_sales,
       SUM((pq.product_cost_price * pq.product_qty) - pq.product_total_price ) AS **net_sold**,
       SUM(pq.product_cost_price * pq.product_qty)  AS **total_ordered**,
       **100 - ((total_ordered - net_sold)/total_ordered )*100 AS discount**,
       q.billing_account_id AS custid
 FROM quotes q
 LEFT JOIN products_quotes pq
   ON q.id = pq.quote_id
WHERE pq.product_id = '28e96e3d-460f-49fc-7d52-4f390b86d6b8'
  AND q.deleted = 0
  AND pq.deleted = 0
GROUP BY q.billing_account_id
ORDER BY q.order_created
GROUP BY q.billing_account_id
ORDER BY q.order_created 
```

给出错误：“字段列表”中的未知列“total_ordered”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:14:04.170

一开始不能这样使用 SUM 之类的聚合函数，因为它们的最终结果会在完成查询的结果集时计算，所以即使没有语法错误，计算的结果也是无效的。
第二个问题是你不能在同一个查询的同一个选择子句中使用别名，所以你可能想使用像这样的其他方式：

```
SELECT MIN(q.order_created) AS first_ordered,           
       MAX(q.order_created) AS last_ordered,
       SUM(IF(DATE_ADD(q.order_created,INTERVAL 12 MONTH) >= NOW(),pq.product_qty,0))/12 AS monthly_rate,                     
       SUM(pq.product_qty) AS yearly_sales,
       SUM((pq.product_cost_price * pq.product_qty) - pq.product_total_price ) AS net_sold,
       SUM(pq.product_cost_price * pq.product_qty)  AS total_ordered,
       100 - ((SUM(pq.product_cost_price * pq.product_qty) - SUM((pq.product_cost_price * pq.product_qty) - pq.product_total_price ))/SUM(pq.product_cost_price * pq.product_qty) )*100 AS discount,
       q.billing_account_id AS custid
FROM quotes q
LEFT JOIN products_quotes pq
    ON q.id = pq.quote_id
WHERE pq.product_id = '28e96e3d-460f-49fc-7d52-4f390b86d6b8'
    AND q.deleted = 0
        AND pq.deleted = 0
GROUP BY q.billing_account_id
ORDER BY q.order_created
GROUP BY q.billing_account_id
ORDER BY q.order_created 
```

请注意，正如我所说，此查询的语法是有效的，但结果不是，正确的方法要长一点（比如使用子查询）。

# java - JavaFX 2.0 自动安装 dll 文件

> ID：10278444
> 
> 赞同：0
> 
> 时间：2012-04-23T10:02:41.930
> 
> 标签：java, dll, serial-port, javafx-2

我目前正在使用 RxTx 库做一个使用串行端口的应用程序。该应用程序将被许多计算机使用，其中大部分将由没有经验的用户使用。

有必要将适当的 DLL (rxtxSerial.dll) 放在正确的 Java 路径中，但我认为大多数用户将无法完成该任务。有人知道如何将此 DLL 透明地安装到正确的路径吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:19:31.043

在您的 JAR 和代码中的静态初始化程序中包含 DLL，请执行以下操作：

*   将 DLL 复制到 TMPDIR
*   `System.load("full/path/to/DLL/in/TMPDIR")`

应该可以在任何地方工作，不需要有经验的用户，也不需要安装程序。

有关示例，请参见[此处](https://github.com/rjeschke/jpa/tree/master/src/java/com/github/rjeschke/jpa)`JPA`（和`LibraryLoader`类中的静态块）

# mysql - MySQL 超大表大小

> ID：10278451
> 
> 赞同：0
> 
> 时间：2012-04-23T10:03:08.960
> 
> 标签：mysql, database-performance

我们的组织将 MySQL 用于他们的 heklpdesk 票务系统，那里有一个有 14k 行的表，该表是 5.7GB！这是表结构。

![电子票](../Images/5c2d421372d5d84c51b8c4119556d7f9.png)

有什么想法为什么这张桌子会变得这么大，有什么想法可以减小它的大小吗？我已经进行了修复、检查和优化操作，并且即将清除旧记录，但想不出是什么让这张表变得如此之大！大量的中文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:46:37.620

您可以将**内容**字段移动到另一个表

喜欢

```
 ticketpostid |   contents  |
_____________________________ 
```

然后仅在需要时根据 ticketpostid 获取内容。

# cakephp - 将数据保存到新行

> ID：10278454
> 
> 赞同：1
> 
> 时间：2012-04-23T10:03:20.053
> 
> 标签：cakephp, cakephp-1.3

我有一个带有 CakePHP 的应用程序，我需要向表中插入一些数据行。我已按照 CakePHP 书中的教程进行操作，但它不起作用。

```
$this->Temporary->create();
$this->Temporary->set(
    array(
        'Temporary.position_id'=>$employeesAttribute[$arrCount][0]['EmployeeAttribute']['position_id'],
        'Temporary.person_id'=>$employeesAttribute[$arrCount][0]['StatusEmployee']['person_id'],
        'Temporary.job_id'=>$employeesAttribute[$arrCount][0]['Job']['id'],
        'Temporary.unit_id'=>$employeesAttribute[$arrCount][0]['Unit']['id'],
        'Temporary.person_code'=>$employeesAttribute[$arrCount][0]['StatusEmployee']['code'],
        'Temporary.name'=>$employeesAttribute[$arrCount][0]['Person']['first_name'].' '.$employeesAttribute[$arrCount][0]['Person']['middle_name'].' '.$employeesAttribute[$arrCount][0]['Person']['last_name'],
        'Temporary.job'=>$employeesAttribute[$arrCount][0]['Job']['short_desc']
    )
);
$this->Temporary->save(); 
```

我已经使用`create()`了方法，设置了变量并调用了 save 方法，但是这段代码没有将数据保存到我的表中。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:14:56.567

```
$this->Temporary->create();
$data = 
    array(
        'Temporary' => array(
            'position_id'=>$employeesAttribute[$arrCount][0]['EmployeeAttribute']['position_id'],
            'person_id'=>$employeesAttribute[$arrCount][0]['StatusEmployee']['person_id'],
            'job_id'=>$employeesAttribute[$arrCount][0]['Job']['id'],
            'unit_id'=>$employeesAttribute[$arrCount][0]['Unit']['id'],
            'person_code'=>$employeesAttribute[$arrCount][0]['StatusEmployee']['code'],
            'name'=>$employeesAttribute[$arrCount][0]['Person']['first_name'].' '.$employeesAttribute[$arrCount][0]['Person']['middle_name'].' '.$employeesAttribute[$arrCount][0]['Person']['last_name'],
            'job'=>$employeesAttribute[$arrCount][0]['Job']['short_desc']
        )
    )
);
$this->Temporary->save($data); 
```

# ios - UITouch touchesMoved 手指位置通过 CAKeyframeAnimation 动画视图

> ID：10278457
> 
> 赞同：0
> 
> 时间：2012-04-23T10:03:45.450
> 
> 标签：ios, uitouch, cakeyframeanimation

我正在重写我的问题，因为它被修改了很多，现在它变成了一个新问题。

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    location = [touch locationInView:self.view];
    CGPoint prevLocation = [touch previousLocationInView:self.view];
    CGFloat distanceFromPrevious = [self distanceBetweenPoints:location :prevLocation];
    NSTimeInterval timeSincePrevious = event.timestamp - self.previousTimestamp;
    if (locArray == NULL) {
        locArray = [[NSMutableArray alloc] init];
    }
    [locArray addObject:[NSValue valueWithCGPoint:prevLocation]];
    CGFloat speed = distanceFromPrevious/timeSincePrevious;
    self.previousTimestamp = event.timestamp;

    //NSLog(@"speed %f | time %f", speed, timeSincePrevious);

}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    CALayer *animLayer = ball.layer;
    animLayer.bounds = ball.bounds;
    animLayer.position = CGPointMake(self.view.frame.size.width/2, 0);
    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, self.view.frame.size.width/2, 380);

    for (int i=0; i<[locArray count]; i++) {
        NSValue *val = [locArray objectAtIndex:i];
        CGPoint p = [val CGPointValue];
        CGPathAddLineToPoint(path, NULL, p.x, p.y);

        NSLog(@"Points %f %d", p.y, i);
    }
    CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"path"];
    animation.duration = 4.0f;
    animation.path = path;
    animation.removedOnCompletion = NO;
    CGPathRelease(path);

    [animLayer addAnimation:animation forKey:@"path"];
    locArray = nil;

} 
```

我正在尝试基于 UITTouch touchesMoved 事件捕获的名为 ball 的视图类。LocArray 保存移动触摸的 CGPoint 值。我试图将这些值放入我的 CGMutablePathRef 中。然后，我尝试在由用户手指移动输入创建的路径上为球设置动画。

我不能让我的动画工作。它有什么问题？

编辑：

我改变了 ：

```
CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"position"]; 
```

animationWithKeyPath 值现在是位置，现在它正在工作:)

我有一些小问题，但我已经解决了。

但我的新问题是：

完成动画并停止后，球视图正在返回其起点。

**我希望它停留在路径的最后一点。**

解决方案：我终于找到了解决方案。

我添加了一个 CGPoint finalPoint = [locArray count]-1 值。然后，

```
animLayer.position = finalPoint; 
```

这一切都解决了。现在球停留在 touchesMoved 事件捕获的手指触摸的最终位置。

# android - 如何在 Android 3.x 或 4.x 上以编程方式配置静态 IP 地址、网络掩码、网关

> ID：10278461
> 
> 赞同：31
> 
> 时间：2012-04-23T10:04:07.397
> 
> 标签：android, networking, settings, ipv4

我已经检查了 Stack Overflow 问题*[API 以在 Android 应用程序中配置静态 IP 地址](https://stackoverflow.com/questions/2922455)*。

它可以工作到 Android 2.3。但是，在更高的 API 级别上没有运气。例如，我把设置

```
android.provider.Settings.System.putString(getContentResolver(), android.provider.Settings.System.WIFI_USE_STATIC_IP, "1");        
android.provider.Settings.System.putString(getContentResolver(), android.provider.Settings.System.WIFI_STATIC_IP, "192.168.0.100");
android.provider.Settings.System.putString(getContentResolver(), android.provider.Settings.System.WIFI_STATIC_NETMASK, "255.255.255.0");
android.provider.Settings.System.putString(getContentResolver(), android.provider.Settings.System.WIFI_STATIC_DNS1, "192.168.0.254");
android.provider.Settings.System.putString(getContentResolver(), android.provider.Settings.System.WIFI_STATIC_GATEWAY, "192.168.0.254"); 
```

但我回去检查：

```
Setting --> Wi-Fi --> Long Press Access Point SSID --> Modify Network --> check Show advanced options 
```

该`IP Settings`字段仍被声明`DHCP`但未声明`Static`。

确实，我可以用它`android.provider.Settings.System.getString()`来取回我设置的东西。它证明设置保存在某处，但系统只是忽略它。

系统使用`android.provider.Settings.System`Android 3.x 和 4.x 以外的设置，因为该设置是按接入点 SSID 设置的。我可以像在 Android 2.3 上一样修改一个 SSID 上的设置吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-25T04:22:26.533

我意识到对于每个 SSID 的设置，3.x 或 4.x 上没有 API。因此，我查看了源代码，发现每个 SSID 的配置都存储在`android.net.wifi.WifiConfiguration`其中，从`android.net.wifi.WifiManager`.

在下面的代码中，`IpAssignment`是一个枚举，要么`STAIC`，`DHCP`要么`NONE`。并且`linkProperties`是对象存储IP地址、网关、DNS等...

`linkAddress`是 IP 地址及其网络掩码作为 prefixLength（网络掩码中有多少位 1）。

`mRoutes`是可以表示网关`ArrayList`的。`RouteInfo`

`mDnses` 用于DNS `ArrayList`。`InetAddress`

`WifiConfiguration`首先，使用SSID获取当前配置

```
WifiConfiguration wifiConf = null;
WifiManager wifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE);
WifiInfo connectionInfo = wifiManager.getConnectionInfo();
List<WifiConfiguration> configuredNetworks = wifiManager.getConfiguredNetworks();        
for (WifiConfiguration conf : configuredNetworks){
    if (conf.networkId == connectionInfo.getNetworkId()){
        wifiConf = conf;
        break;              
    }
} 
```

由于`IpAssignment`和`linkProperties`是隐藏的，所以可以从反射中得到对象。

以下方法可以在 SSID WifiConfiguration 上设置声明的 IP 地址设置：

```
 public static void setIpAssignment(String assign , WifiConfiguration wifiConf)
    throws SecurityException, IllegalArgumentException, NoSuchFieldException, IllegalAccessException{
        setEnumField(wifiConf, assign, "ipAssignment");     
    }

    public static void setIpAddress(InetAddress addr, int prefixLength, WifiConfiguration wifiConf)
    throws SecurityException, IllegalArgumentException, NoSuchFieldException, IllegalAccessException,
    NoSuchMethodException, ClassNotFoundException, InstantiationException, InvocationTargetException{
        Object linkProperties = getField(wifiConf, "linkProperties");
        if(linkProperties == null)return;
        Class laClass = Class.forName("android.net.LinkAddress");
        Constructor laConstructor = laClass.getConstructor(new Class[]{InetAddress.class, int.class});
        Object linkAddress = laConstructor.newInstance(addr, prefixLength);

        ArrayList mLinkAddresses = (ArrayList)getDeclaredField(linkProperties, "mLinkAddresses");
        mLinkAddresses.clear();
        mLinkAddresses.add(linkAddress);        
    }

    public static void setGateway(InetAddress gateway, WifiConfiguration wifiConf)
    throws SecurityException, IllegalArgumentException, NoSuchFieldException, IllegalAccessException, 
    ClassNotFoundException, NoSuchMethodException, InstantiationException, InvocationTargetException{
        Object linkProperties = getField(wifiConf, "linkProperties");
        if(linkProperties == null)return;
        Class routeInfoClass = Class.forName("android.net.RouteInfo");
        Constructor routeInfoConstructor = routeInfoClass.getConstructor(new Class[]{InetAddress.class});
        Object routeInfo = routeInfoConstructor.newInstance(gateway);

        ArrayList mRoutes = (ArrayList)getDeclaredField(linkProperties, "mRoutes");
        mRoutes.clear();
        mRoutes.add(routeInfo);
    }

    public static void setDNS(InetAddress dns, WifiConfiguration wifiConf)
    throws SecurityException, IllegalArgumentException, NoSuchFieldException, IllegalAccessException{
        Object linkProperties = getField(wifiConf, "linkProperties");
        if(linkProperties == null)return;

        ArrayList<InetAddress> mDnses = (ArrayList<InetAddress>)getDeclaredField(linkProperties, "mDnses");
        mDnses.clear(); //or add a new dns address , here I just want to replace DNS1
        mDnses.add(dns); 
    }

    public static Object getField(Object obj, String name)
    throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException{
        Field f = obj.getClass().getField(name);
        Object out = f.get(obj);
        return out;
    }

    public static Object getDeclaredField(Object obj, String name)
    throws SecurityException, NoSuchFieldException,
    IllegalArgumentException, IllegalAccessException {
        Field f = obj.getClass().getDeclaredField(name);
        f.setAccessible(true);
        Object out = f.get(obj);
        return out;
    }  

    private static void setEnumField(Object obj, String value, String name)
    throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException{
        Field f = obj.getClass().getField(name);
        f.set(obj, Enum.valueOf((Class<Enum>) f.getType(), value));
    } 
```

之后，我可以设置和更新`WifiConfiguration`这个 SSID。

```
 try{
        setIpAssignment("STATIC", wifiConf); //or "DHCP" for dynamic setting
        setIpAddress(InetAddress.getByName("192.168.0.100"), 24, wifiConf);
        setGateway(InetAddress.getByName("4.4.4.4"), wifiConf);
        setDNS(InetAddress.getByName("4.4.4.4"), wifiConf);
        wifiManager.updateNetwork(wifiConf); //apply the setting
            wifiManager.saveConfiguration(); //Save it
    }catch(Exception e){
        e.printStackTrace();
    } 
```

编辑：抱歉，我不检查具有与 Android 4.x 类似 UI 的 Android 3.x 设备。在 Android 3.x 中，网关存储`mGateways`在`linkProperties`. `mGateways`是`Arraylist`类型`InetAddress`。因此，以下应该适用于 Android 3.x。

```
public static void setGateway(InetAddress gateway, WifiConfiguration wifiConf)
        throws SecurityException, IllegalArgumentException, NoSuchFieldException, IllegalAccessException, 
        ClassNotFoundException, NoSuchMethodException, InstantiationException, InvocationTargetException{
            Object linkProperties = getField(wifiConf, "linkProperties");
            if(linkProperties == null)return;
            ArrayList mGateways = (ArrayList)getDeclaredField(linkProperties, "mGateways");
            mGateways.clear();
            mGateways.add(gateway);
        } 
```

Edit2：方法`setIpAddress`, `setGateway`,`setDNS`应该作为`InetAddress`类型输入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-11T10:34:07.823

对于 Android 5.0+，WIP 解决方案。由于某种原因，它还不能工作。欢迎评论。

```
void changeWifiConfiguration(boolean dhcp, String ip, int prefix, String dns1, String gateway) {
    WifiManager wm = (WifiManager) getSystemService(Context.WIFI_SERVICE);
    if(!wm.isWifiEnabled()) {
        // wifi is disabled
        return;
    }
    // get the current wifi configuration
    WifiConfiguration wifiConf = null;
    WifiInfo connectionInfo = wm.getConnectionInfo();
    List<WifiConfiguration> configuredNetworks = wm.getConfiguredNetworks();   
    if(configuredNetworks != null) {
        for (WifiConfiguration conf : configuredNetworks){
            if (conf.networkId == connectionInfo.getNetworkId()){
                wifiConf = conf;
                break;              
            }
        }
    }
    if(wifiConf == null) {
        // wifi is not connected
        return;
    }
    try {
        Class<?> ipAssignment = wifiConf.getClass().getMethod("getIpAssignment").invoke(wifiConf).getClass();
        Object staticConf = wifiConf.getClass().getMethod("getStaticIpConfiguration").invoke(wifiConf);
        if(dhcp) {
            wifiConf.getClass().getMethod("setIpAssignment", ipAssignment).invoke(wifiConf, Enum.valueOf((Class<Enum>) ipAssignment, "DHCP"));
            if(staticConf != null) {
                staticConf.getClass().getMethod("clear").invoke(staticConf);
            }
        } else {
            wifiConf.getClass().getMethod("setIpAssignment", ipAssignment).invoke(wifiConf, Enum.valueOf((Class<Enum>) ipAssignment, "STATIC"));
            if(staticConf == null) {
                Class<?> staticConfigClass = Class.forName("android.net.StaticIpConfiguration");
                staticConf = staticConfigClass.newInstance();
            }
            // STATIC IP AND MASK PREFIX
            Constructor<?> laConstructor = LinkAddress.class.getConstructor(InetAddress.class, int.class);
            LinkAddress linkAddress = (LinkAddress) laConstructor.newInstance(
                    InetAddress.getByName(ip), 
                    prefix);
            staticConf.getClass().getField("ipAddress").set(staticConf, linkAddress);
            // GATEWAY
            staticConf.getClass().getField("gateway").set(staticConf, InetAddress.getByName(gateway));
            // DNS
            List<InetAddress> dnsServers = (List<InetAddress>) staticConf.getClass().getField("dnsServers").get(staticConf);
            dnsServers.clear();
            dnsServers.add(InetAddress.getByName(dns1)); 
            dnsServers.add(InetAddress.getByName("8.8.8.8")); // Google DNS as DNS2 for safety
            // apply the new static configuration
            wifiConf.getClass().getMethod("setStaticIpConfiguration", staticConf.getClass()).invoke(wifiConf, staticConf);
        }
        // apply the configuration change
        boolean result = wm.updateNetwork(wifiConf) != -1; //apply the setting
        if(result) result = wm.saveConfiguration(); //Save it
        if(result) wm.reassociate(); // reconnect with the new static IP
    } catch(Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-08T12:37:26.867

@罗宾

感谢您的解决方案在运行 Android M 6.0.1 的 My Nexus 设备上运行良好。

我已经更换了 `// apply the configuration change boolean result = wm.updateNetwork(wifiConf) != -1; //apply the setting if(result) result = wm.saveConfiguration(); //Save it if(result) wm.reassociate(); // reconnect with the new static IP`

与以下

```
int netId = manager.updateNetwork(wifiConf);
boolean result =  netId!= -1; //apply the setting
if(result){
    boolean isDisconnected =  manager.disconnect();
    boolean configSaved = manager.saveConfiguration(); //Save it
    boolean isEnabled = manager.enableNetwork(wifiConf.networkId, true);
    // reconnect with the new static IP
    boolean isReconnected = manager.reconnect();                        
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-08T12:34:39.710

安卓 5.1.0

```
 WifiConfiguration GetCurrentWifiConfiguration(WifiManager manager)
    {
    if (!manager.isWifiEnabled())
        return null;

    List<WifiConfiguration> configurationList = manager.getConfiguredNetworks();
    WifiConfiguration configuration = null;
    int cur = manager.getConnectionInfo().getNetworkId();
    for (int i = 0; i < configurationList.size(); ++i)
    {
        WifiConfiguration wifiConfiguration = configurationList.get(i);
        if (wifiConfiguration.networkId == cur)
            configuration = wifiConfiguration;
    }

    return configuration;
}

@TargetApi(Build.VERSION_CODES.LOLLIPOP)
public void setWifiProxySettings5()
{
    //get the current wifi configuration
    WifiManager manager = (WifiManager)getSystemService(Context.WIFI_SERVICE);
    WifiConfiguration config = GetCurrentWifiConfiguration(manager);
    if(null == config)
        return;

    try
    {
        //linkProperties is no longer in WifiConfiguration
        Class proxyInfoClass = Class.forName("android.net.ProxyInfo");
        Class[] setHttpProxyParams = new Class[1];
        setHttpProxyParams[0] = proxyInfoClass;
        Class wifiConfigClass = Class.forName("android.net.wifi.WifiConfiguration");
        Method setHttpProxy = wifiConfigClass.getDeclaredMethod("setHttpProxy", setHttpProxyParams);
        setHttpProxy.setAccessible(true);

        //Method 1 to get the ENUM ProxySettings in IpConfiguration
        Class ipConfigClass = Class.forName("android.net.IpConfiguration");
        Field f = ipConfigClass.getField("proxySettings");
        Class proxySettingsClass = f.getType();

        //Method 2 to get the ENUM ProxySettings in IpConfiguration
        //Note the $ between the class and ENUM
        //Class proxySettingsClass = Class.forName("android.net.IpConfiguration$ProxySettings");

        Class[] setProxySettingsParams = new Class[1];
        setProxySettingsParams[0] = proxySettingsClass;
        Method setProxySettings = wifiConfigClass.getDeclaredMethod("setProxySettings", setProxySettingsParams);
        setProxySettings.setAccessible(true);

        ProxyInfo pi = ProxyInfo.buildDirectProxy("127.0.0.1", 8118);
        //Android 5 supports a PAC file
        //ENUM value is "PAC"
        //ProxyInfo pacInfo = ProxyInfo.buildPacProxy(Uri.parse("http://localhost/pac"));

        //pass the new object to setHttpProxy
        Object[] params_SetHttpProxy = new Object[1];
        params_SetHttpProxy[0] = pi;
        setHttpProxy.invoke(config, params_SetHttpProxy);

        //pass the enum to setProxySettings
        Object[] params_setProxySettings = new Object[1];
        params_setProxySettings[0] = Enum.valueOf((Class<Enum>) proxySettingsClass, "STATIC");
        setProxySettings.invoke(config, params_setProxySettings);

        //save the settings
        manager.updateNetwork(config);
        manager.disconnect();
        manager.reconnect();
    }
    catch(Exception e)
    {
        Log.v("wifiProxy", e.toString());
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-28T07:04:22.800

如果您尝试在 6.x 上使用适用于 Android 5.x 的解决方案，您的应用程序将被拒绝这样做。为此，您可能需要 root 设备并使应用程序成为设备所有者。

我已经对这个问题进行了一些研究，我的发现是，如果应用程序设置为设备所有者，那么过去适用于 Andrdoi 5.x 的代码可能会起作用。

如何做到这一点的一个很好的例子是使用这里找到的例子：

[https://github.com/googlesamples/android-DeviceOwner/](https://github.com/googlesamples/android-DeviceOwner/)

使用 adb shell 并运行命令：

dpm set-device-owner com.example.android.deviceowner/.DeviceOwnerReceiver

将使应用程序设备所有者，并且可以设置静态 IP。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-23T16:30:17.480

作为 kotlin 的扩展`WifiConfiguration`，适用于 Android 5+

```
fun WifiConfiguration.setHttpProxyCompat(proxyInfo: ProxyInfo) {
    if (Build.VERSION.SDK_INT >= 26) {
        httpProxy = proxyInfo
        Timber.i("Setting proxy using 26+ method")
    } else {
        val proxySettings = Class.forName("android.net.IpConfiguration\$ProxySettings")
        val valueOf = proxySettings.getMethod("valueOf", String::class.java)
        val static = valueOf.invoke(proxySettings, "STATIC")

        val setProxy = this::class.java.getDeclaredMethod("setProxy", proxySettings, ProxyInfo::class.java)
        setProxy.isAccessible = true

        setProxy.invoke(this, static, proxyInfo)
        Timber.i("Setting proxy using reflection")
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-30T04:17:47.700

@Yeung 大家好

据我了解，Android 会在连接到 SSID 后立即启动 dhclient。

所以代码建议，只有在Android已经获得IP地址（dhcp成功）之后才会应用静态配置，对吗？

这就是我对 Pie 的实验中发生的事情。我尝试通过收听 WifiManager.NETWORK_STATE_CHANGED_ACTION 来应用静态配置

```
intentFilter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
...........
...........
if ( action.equals(WifiManager.NETWORK_STATE_CHANGED_ACTION) )
{
    NetworkInfo info = intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
    if (info.isConnectedOrConnecting())
    {
        //apply static IP to current wifi connnections as per above code
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-26T02:28:02.717

@Robin 非常感谢，您的解决方案完全适用于 Android 7（需要系统应用程序权限）。

*   AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:sharedUserId="android.uid.system"></manifest> 
```

*   app.build.gradle

```
android {
  signingConfigs {
        system_keystore {
            storeFile file('/Users/**/system.keystore')
            storePassword '****'
            keyAlias '****'
            keyPassword '****'
        }
    }

  buildTypes {
    debug {
      signingConfig signingConfigs.system_keystore
    }
    release {
      signingConfig signingConfigs.system_keystore
    }
  }
} 
```

# android - C2DM inapp 注册：无法启动服务 Intent

> ID：10278462
> 
> 赞同：3
> 
> 时间：2012-04-23T10:04:21.270
> 
> 标签：android, broadcastreceiver, android-c2dm

好吧，我真的不知道我在这里缺少什么。我试图让 C2DM 为我们的应用程序工作，尤其是处理广播让我很挣扎。

我们有一个应用范围的广播接收器：

```
public final class AppBroadcastReceiver extends BroadcastReceiver {

    //get an instance if not already present
    public static AppBroadcastReceiver getInstance(final IntentFilter filter) {
        if (instance == null) {
            instance = new GlobalBroadcastReceiver();
        }
        if (filter != null) {
            filter.addAction("com.google.android.c2dm.intent.REGISTRATION";
            filter.addAction("com.google.android.c2dm.intent.RECEIVE");
            filter.addCategory("my.package.name");
        }
        return instance;
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        final String broadcastAction = intent.getAction();
        Log.d(logTag, String.format("GlobalBroadcastReceiver::onReceive for action = %s", broadcastAction));

        if ("com.google.android.c2dm.intent.REGISTRATION".equals(broadcastAction)) {
            for (final AppBroadcastListener l : listeners) {
                l.c2dmRegistration(intent);
            }
        } else if ("com.google.android.c2dm.intent.RECEIVE".equals(broadcastAction)) {
            for (final ApplBroadcastListener l : listeners) {
                l.c2dmReceive(intent);
            }
        }//else
    }//onReceive
} 
```

AppBroadcastListener 是我们所有活动都在实现的接口，以确保至少存在适当的方法。在他们的 onResume() 和 onStop() 方法中，活动分别在 Receiver 注册和取消注册。

出于测试目的，我有一个 Debug Activity 向我证明了以下两种方法：

```
public void sendC2DM(View v){
    Intent intent= new Intent();
    intent.setAction(com.google.android.c2dm.intent.RECEIVE);
    intent.putExtra("message","Bender: \"kiss my shiny metal ass!\"");
    intent.addCategory(getPackageName() );

    sendBroadcast(intent);
}

public void registerC2DM(View v){
    Intent registrationIntent = new Intent(com.google.android.c2dm.intent.REGISTRATION);
    registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0)); // boilerplate
    registrationIntent.putExtra("sender", ourSenderIdregistered@googlemail.com);
    startService(registrationIntent);
} 
```

在 android.manifest 中，我在`<application>`-tag 中添加了以下行：

```
 <receiver
        android:name=".AppBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >

        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />

            <category android:name="my.package.name" />
        </intent-filter>
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="my.package.name" />
        </intent-filter>
    </receiver> 
```

所以我们想要接收广播的每个活动都在它的 onResume() 上的 BroadcastReceiver 上注册自己，当发生某些事情时，BroadcastReceiver 将捕获并调用实现的方法。例如，记录消息或显示 Toast。

但是，当我发送“C2DM 消息”时，我看到这个结构适用于自制广播。（Bender 的消息在 Toast 中弹出）但`registerC2DM().startService(registrationIntent);`只记录：

> 无法启动服务 Intent { act=com.google.android.c2dm.intent.REGISTRATION (has extras) }：未找到

我不知道我在这里缺少什么。一般建议似乎是：检查您的 android.manifest（完成）或：使用注册的 gmail 帐户登录。
不确定这件事。我使用我的 gmail 帐户登录，是的，但不是`ourSenderIdregistered@googlemail.com`我们在注册时设定的意图。我也坚信这不是解决方案。（告诉我们所有的客户使用这个帐户登录......嗯不？！）。
所以我想这是别的东西，但我找不到它：C

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:45:48.730

好的，这真的很容易发现：

如果您想注册 c2dm，请使用

```
com.google.android.c2dm.intent.REGISTER 
```

但是要获取此消息的答案，您必须设置您是广播接收器才能收听

```
com.google.android.c2dm.intent.REGISTRATION 
```

微妙的？是的，这里再次出现错误和更正版本：

```
//false
public void registerC2DM(View v){
    Intent registrationIntent = new Intent(com.google.android.c2dm.intent.REGISTRATION);
    registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0)); // boilerplate
    registrationIntent.putExtra("sender", ourSenderIdregistered@googlemail.com);
    startService(registrationIntent);
}

//true
public void registerC2DM(View v){
    Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0)); // boilerplate
registrationIntent.putExtra("sender", ourSenderIdregistered@googlemail.com);
    startService(registrationIntent);
} 
```

在意识到这一点之前砸了 3 个键盘...... :)

# c# - mvc 路由生成 iis 7.5 错误禁止

> ID：10278463
> 
> 赞同：0
> 
> 时间：2012-04-23T10:04:24.710
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我是我的 WebApplication 我在这里有一个 ASPX WebForms 页面：

> ~/ASPWebforms/MyFolder/Default.aspx

如果我使用此代码：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.MapPageRoute(
                    "SomeRoute",
                    "Test/{reportname}",
                    "~/ASPWebforms/MyFolder/{reportname}.aspx"
       ); 
```

然后在浏览器中输入：

> 本地主机/MySite/测试/默认

**我得到了想要的结果：显示页面 ~/ASPWebforms/MyFolder/Default.aspx。**

但是如果我使用下面的代码

```
routes.MapPageRoute(
                    "SomeRoute",
                    "Test/",
                    "~/ASPWebforms/MyFolder/Default.aspx"
       ); 
```

并尝试

> 本地主机/MySite/测试

IIS 7.5 说：

> HTTP 错误 403.14 - 禁止 Web 服务器配置为不列出此目录的内容。

**我在最后一段代码中做错了吗？**

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T14:12:10.143

我有很多这样的事情，从周围阅读看来，这可能是由几种不同的事情引起的。就我而言，我有这样的路线：

```
routes.MapPageRoute("signin", "signin", "~/SignIn/SignIn.aspx") 
```

所以路由路径是`/signin`，但是还有一个文件夹叫做`/signin`.aspx 页面。

我得到了错误响应 `HTTP Error 403.14 - Forbidden. The Web server is configured to not list the contents of this directory`。

当我将此行添加到路由配置时，此问题已修复：

```
routes.RouteExistingFiles = true; 
```

错误消息中包含一些事实：`/signin`是一个目录，并且 Web 服务器被配置为不列出其中的文件。除非您另行配置，否则此文件路径似乎优先于路由。

我尝试过的其他事情：

*   我不需要使用不同的重载`MapPageRoute`
*   我不需要添加`UrlRoutingModule`到 web.config 下的 `system.webServer|Modules`. 没有它就可以工作。
*   它可以在没有 web.config 设置的情况下工作， `<modules runAllManagedModulesForAllRequests="true">` 我确实有其他原因，但如果我删除它，那么这个修复仍然有效。
*   我确实在机器的对话框中安装了服务器功能“Http Redirection”，`Server Manager|Web Server|Add Role Services`但是在再次删除它之后它仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:17:23.323

尝试使用设置默认值的重载之一来设置路由，如下所示：

```
 routes.MapPageRoute(
                    "SomeRoute",
                    "Test/{reportname}",
                    "~/ASPWebforms/MyFolder/{reportname}.aspx",
                    false,
                    new RouteValueDictionary(new {reportname = "Default"})
            ); 
```

不是非常有信心它会解决你的问题，但它可以很好地处理你的原始示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:29:07.670

在 IIS 7.5 上重新安装 .NET 4 x86 & x64 并设置您的网站 .net 版本。我默认 x86 编写简单的命令。

停止 IIS： 1)iisreset /stop

stup 命令（对于 iis 默认为 .net stup）： 2) cd %windir%\Microsoft.NET\Framework\v4.0.30319 3)aspnet_regiis.exe -i

重置命令（对于 iis 由默认的 .net 更改为 .net 4 版本）：4）aspnet_regiis.exe -iru

启动 IIS： 5)iisreset /start

# maven - Maven 程序集：从依赖项的特定子文件夹复制

> ID：10278465
> 
> 赞同：4
> 
> 时间：2012-04-23T10:04:27.267
> 
> 标签：maven, maven-assembly-plugin

我正在使用 Maven 程序集插件来构建我们产品的 WAR（以前由 Ant 完成）。由于 Apache Ant 有很多剩余部分，因此有一个特定要求可以使构建过程更容易：将依赖项的特定子文件夹（例如，jar 或 war 资源）复制到特定的目标子文件夹。

到目前为止，我了解到程序集描述符允许指定`<outputDirectory>`，但是有没有机会指定一个`<sourceDirectory>`？例如，我想将此规则应用于一个单一的 WAR 或 JAR 类型依赖项。

考虑这个程序集描述符片段的示例（不是 100% 准确）：

```
 <dependencySet>
        <unpack>true</unpack>
        <scope>runtime</scope>
        <useProjectArtifact>false</useProjectArtifact>
        <includes>
            <include>my-specific-dependency:war</include>
        </includes>
        <outputDirectory>WEB-INF/myresources</outputDirectory>
    </dependencySet> 
```

我想说我想将一些文件夹从 my-specific-dependency:war 复制到 WEB-INF/myresources。

**编辑**注意：我知道这不是一个非常正确的要求，因为我们不应该知道工件内部有什么，正确的方法是声明将整个工件提取到目标目录（简洁的声明性方法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:37:24.380

您应该能够使用 Maven 依赖插件来做到这一点，*解压*目标： [http ://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html)

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-dependency-plugin</artifactId>
  <executions>
    <execution>
      <id>unpack-database-scripts</id>
      <phase>compile</phase>
      <goals>
        <goal>unpack</goal>
      </goals>
      <configuration>
          <artifactItems>
           <artifactItem>
             <groupId>myGroup</groupId>
             <artifactId>myArtifact</artifactId>
             <version>1.0</version>
             <type>war</type>
             <overWrite>true</overWrite>
             <includes>...</includes>
             <outputDirectory>…&lt;/outputDirectory>
           </artifactItem>
         </artifactItems>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:38:08.343

首先，我建议您检查[maven-war-plugin](http://maven.apache.org/plugins/maven-war-plugin/)来代替使用[maven-assembly-](http://maven.apache.org/plugins/maven-assembly-plugin/) plugin 来完成这项工作。此外，请检查有关dependencySet 的[文档](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html)，其中包含解包等选项。将模块的打包更改为war 并使其符合maven 约定，并且不要将Maven 用作ant ......目前看起来像它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:35:27.937

事实证明，程序集描述符（从 2.2-beta-1 版开始）提供了[unpackOptions](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_unpackOptions)指令，包括`<dependencySet>`. 正是我需要的。

# android - 如何在android中调用谷歌通知？

> ID：10278466
> 
> 赞同：1
> 
> 时间：2012-04-23T10:04:28.320
> 
> 标签：android, notifications

我需要向我的每个应用程序用户发送谷歌通知并且现在可以这样做但问题是我有超过 4000 个用户并且我正在发送通知我在我的 php 页面中收到一些行，如下所示

```
sending msg response!
string(38) "id=0:1335083238563622%d38626170036452d" 
```

我只收到此响应 1600(aprox) 次，这是否意味着没有用户收到通知？我很担心这个，请给我建议。

谢谢！

# android - SeekBar 未设置实际进度。SetProgress() 不适用于早期的 Android 版本

> ID：10278467
> 
> 赞同：6
> 
> 时间：2012-04-23T10:04:33.993
> 
> 标签：android, seekbar

我有一个应用程序，我想根据从 Web 服务检索到的值设置特定 SeekBar 的进度。但是，当我使用 SetProgress(int) 时，只会设置 SeekBar 的“搜索器”。该栏没有按预期“填充”。

这是它的样子：

![在此处输入图像描述](../Images/eb5cbf5a38e30c2afd04280804838d40.png)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T18:49:57.260

尝试先设置最大值，然后设置进度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T23:40:57.527

原来这是Android中的一个错误。也可以看看：

[http://code.google.com/p/android/issues/detail?id=12945](http://code.google.com/p/android/issues/detail?id=12945)

[使用 setMax 动态设置最大值后，Android SeekBar 不刷新](https://stackoverflow.com/questions/7438198/android-seekbar-doesnt-refresh-after-dynamically-setting-max-value-with-setmax)

[android progressBar 不更新进度视图/可绘制](https://stackoverflow.com/questions/4348032/android-progressbar-does-not-update-progress-view-drawable)

一种解决方法是执行 setMax(0) 后跟 setMax(max) 和 setProgress() 之类的操作。

# mysql - 比较mysql时间戳

> ID：10278468
> 
> 赞同：0
> 
> 时间：2012-04-23T10:04:35.910
> 
> 标签：mysql, sql

我试图通过找出特定时间戳字段是否大于 15 天前来比较时间戳。

所以如果我在我的数据库上尝试这个，我会得到：

```
SELECT DATE_SUB(NOW(), INTERVAL 15 DAY) // 2012-04-08 11:00:54 
```

相关字段有一个值：`2012-04-20 21:18:14`。

所以当我尝试：

```
SELECT * FROM (`payments`) WHERE `LastUpdated` >= 'DATE_SUB(NOW(), INTERVAL 15 DAY)' 
```

我没有返回任何行？我是否错误地比较了日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:05:56.230

您将 DATE_SUB 函数视为字符串。

试试这个：

```
SELECT * FROM (`payments`) WHERE `LastUpdated` >= DATE_SUB(NOW(), INTERVAL 15 DAY) 
```

# php - 如何防止一个文件被 .htaccess 重定向？

> ID：10278472
> 
> 赞同：5
> 
> 时间：2012-04-23T10:04:57.150
> 
> 标签：php, apache, .htaccess

我正在创建 php 前端控制器。这是我的`.htaccess`文件。

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    (.*) controller.php    [L]
</IfModule> 
```

此代码将所有 url 重定向到`controller.php`. 我需要避免重定向`index.php`到`controller.php`. 所有其他 url 应重定向到`controller.php`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T10:20:20.650

您可以使用以下语法进行异常处理：

```
RewriteRule name_of_page_to_exclude.php - [L] 
```

破折号 ( `-`) 很重要。`[L]`确保如果触发此规则，它将是最后一个将被处理的规则。所以很自然，您需要将它放在`.htaccess`文件顶部附近，在问题中的规则之前：

```
RewriteEngine on
RewriteRule name_of_page_to_exclude.php - [L]
RewriteRule (.*) controller.php [L] 
```

该[文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)有以下内容：

> - （破折号）破折号表示不应执行替换（现有路径未触及）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:13:02.820

添加以下条件：

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

这将允许任何实际存在的文件，并假设它不会为已经存在的其他文件弄乱其他任何东西。

# asp.net - 如何将字符串转换为 Uri 类型（简单）

> ID：10278473
> 
> 赞同：2
> 
> 时间：2012-04-23T10:04:59.843
> 
> 标签：asp.net, vb.net

在 VB.NET 中将 URL 的字符串值转换为类型 URI 的最快方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T10:07:36.160

是的。

```
Dim myUri As New Uri("http://www.contoso.com/") 
```

只需用您的变量替换字符串，就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:08:22.423

只需将字符串传递给构造函数。

```
Dim url As String = "http://test.com"
Dim uri As New Uri(url) 
```

# c++ - 将一对插入地图和常量？

> ID：10278474
> 
> 赞同：0
> 
> 时间：2012-04-23T10:05:05.917
> 
> 标签：c++, containers

在以下示例中，是否有任何正当理由为什么人们更喜欢一对而不是另一对而不是第三个而不是第四个？

```
map<const int, int> test;

test.insert(const pair<const int, int>(3, 9));
test.insert(const pair<int, int>(3, 9));
test.insert(pair<int, int>(3, 9));
test.insert(pair<const int, int>(5, 9)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:13:29.590

基本上是的。愚蠢的编译器将在此代码中调用一个额外的转换构造函数

```
test.insert(pair<const int, int>(5, 9)); 
```

但是优化编译器会使它与其他替代方案相同。

我只想问，谁愿意写这样的代码？通常，我会写`test.insert(std::make_pair(3, 9))`，不会在意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:15:23.880

最后两对插入地图时没有区别。map 中的键默认为 const，只需使用 make_pair 函数

# delphi - TIdHTTP：在发送请求之前检查有效的 cookie？

> ID：10278477
> 
> 赞同：1
> 
> 时间：2012-04-23T10:05:19.907
> 
> 标签：delphi, cookies, delphi-xe2, indy, idhttp

我正在使用 Indy`TIdHTTP`和`TIdCookieManager`. 我想检查我即将发送的请求的当前 cookie，并确定它有效的可能性（我知道我不能 100% 确定服务器会接受我的请求）。如果没有 cookie，或者它们已过期，我将首先登录并获取新的 cookie。否则，只需发送请求。

我将如何进行这样的检查？我相信我必须在发送请求之前检查 cookie 管理器，但不知道要检查什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T23:37:23.957

尝试这样的事情：

```
function CheckCookies(Cookies: TIdCookieManager; const TargetURL: String): Boolean; 
var 
  URL: TIdURI;
  Headers: TIdHeaderList;  
begin 
  Result := False; 

  URL := TIdURI.Create(TargetURL);
  try
    Headers := TIdHeaderList.Create(QuoteHTTP);
    try  
      Cookies.GenerateClientCookies(URL, False, Headers);
      Result := Headers.Count > 0;
    finally
      Headers.Free;
    end;
  finally
    URL.Free;
  end;
end; 
```

.

```
if not CheckCookies(IdHTTP1.CookieManager, 'http://www.someurl.com/') then
begin
  // login and get new cookies ...
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:50:08.400

就像评论中已经说明的那样，您不能在客户端上执行实际的验收检查，只有服务器可以这样做。

但是，您可以过滤掉过期或无效的 cookie：

```
function filterInvalidCookies(cookies: TIdCookies; targetURL: TIdURI): Boolean;
var
  c: Integer;
begin
  Result := False;

  c := 0;
  while (cookies.Count > c) do
    if (not cookies[c].IsExpired and cookies[c].IsAllowed(targetURL, False) and 
      (cookies[c].CookieName <> '')) then
      begin
      Result := True;
      Inc(c);
      end
    else
      cookies.Delete(c);
end; 
```

该函数会删除无效的 cookie，如果没有有效的 cookie，则返回 False。在这样的请求之前调用它：

```
if (Assigned(con.CookieManager)) then
  filterInvalidCookies(con.CookieManager.CookieCollection,
    TIdURI.Create('http://www.someurl.com/')); 
```

`con`对象在哪里`TIdHTTP`。

当然，您可以进行额外的，也许是针对特定页面的检查。

# ios - MKAnnotationView - 标注标题或多行描述？

> ID：10278478
> 
> 赞同：4
> 
> 时间：2012-04-23T10:05:19.920
> 
> 标签：ios, mkannotationview

是否可以在标题或描述/副标题中显示几行，而无需使用即 MKPinAnnotationView 编写您自己的自定义注释视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:11:32.957

我相信这是不可能的。

您需要的是创建一个自定义标注，并按照您想要的方式进行布局。您甚至可以模仿原生外观。此页面可以帮助您创建自定义标注：[http ://blog.asolutions.com/2010/09/building-custom-map-annotation-callouts-part-1/](http://blog.asolutions.com/2010/09/building-custom-map-annotation-callouts-part-1/)

# android - osmdroid sqlite 瓦片源码

> ID：10278480
> 
> 赞同：1
> 
> 时间：2012-04-23T10:05:22.897
> 
> 标签：android, sqlite, mapping, offline, osmdroid

我想像 RMaps 一样向 OSMDroid 添加一个 SQLite 磁贴提供程序。我浏览了 OSMDroid 源代码及其磁贴提供程序，发现它们旨在从文件、存档文件和互联网中获取磁贴。

我正在使用 osmdroid-android 3.0.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:24:52.373

我不相信当前的 Osmdroid 库可以做到这一点。如果您想这样做，您将必须创建自己的 TileProvider 以适应应该可能的框架。

我希望为实际地图图块使用存档文件并为元数据使用单独的数据库是迄今为止最简单的解决方案。不建议将大量数据（如磁贴）放入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:09:42.530

看看[这个](https://sourceforge.net/tracker/?func=detail&aid=3154177&group_id=238075&atid=1105496)页面。我想这就是你要找的:o)

*我最近为 osmdroid lib 的磁贴实现了一个 sqlite 存储，唯一缺少的是使用 mobac 创建它的能力。所以我写了这个补丁来提供新的输出选项。如果您喜欢，请查看并提交。如果你认为我应该改变什么，请告诉我。*

# ruby - 国家代码和拨号代码红宝石

> ID：10278482
> 
> 赞同：2
> 
> 时间：2012-04-23T10:05:30.297
> 
> 标签：ruby, arrays, hash

我正在做一个涉及到的小项目

*   国家名单
*   国家缩写列表，例如英国、美国。
*   拨码。

如果用户输入+44，它应该拉出国家和国家缩写

我想知道实现这一点的最佳方法是什么？我应该创建 3 个不同的哈希值吗？或使用嵌套哈希？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T11:43:37.833

在重新发明轮子之前，您应该检查现有的解决方案，例如[国家 gem](https://github.com/hexorx/countries)：

```
c.number #=> "840"
c.alpha2 #=> "US"
c.alpha3 #=> "USA"
c.country_code #=> "1"
c.national_destination_code_lengths #=> 3
c.national_number_lengths #=> 10
c.international_prefix #=> "011"
c.national_prefix #=> "1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:13:46.527

假设您之所以问，是因为您需要能够根据任何字段查找数据，您可以使用以下内容将您的记录映射到三个不同的哈希值，其中每个哈希值都由相关字段索引。

```
country_codes, names, dial_codes = [
  { country_code: "GB", name: "United Kingdom", dial_code: "44" },
  { country_code: "AU", name: "Australia",      dial_code: "61" },
  { country_code: "IT", name: "Italy",          dial_code: "39" }
].inject([{}, {}, {}]) do |(cc, n, dc), record|
  [
    cc.merge(record[:country_code] => record),
    n.merge(record[:name]         => record),
    dc.merge(record[:dial_code]    => record)
  ]
end

p country_codes["AU"]
# => { country_code: "AU", name: "Australia", dial_code: "61" }

p dial_codes["44"]
# => { country_code: "GB", name: "United Kingdom", dial_code: "44" } 
```

另请注意，英国的官方国家代码是 GB，而不是 UK。令人困惑，我知道。

# c++ - Microsoft Visual C++ 与 Unix 环境的连接

> ID：10278488
> 
> 赞同：0
> 
> 时间：2012-04-23T10:05:48.377
> 
> 标签：c++, visual-studio, visual-c++, c++-cli

我想连接到 Solaris 机器并从 Unix 环境中读取日志文件，以便我可以解析日志中的数据并创建报告。对于解析，我想到了使用 VC++。

我正在使用 Visual Studio 2012，因为用户不具备在 Unix 环境（控制台）中工作的知识，并且 GUI 不可用。

如何使用 VC++ 程序连接到 Unix 环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:16:44.883

当然，您最好在 Solaris 机器上运行一个 Perl 脚本来解析日志并将文件本地转储到 Solaris 机器。恕我直言，用 Perl 或 Python 编写这种“日志抓取工具”要容易得多。

然后，您可以安排 Solaris 机器上的目录通过 Samba 以只读方式共享，这样您的 Windows C++ 程序所要做的就是检查共享上是否存在文件并打开它. 这里只需要本地文件打开功能。

如果无法共享，那么您将受到网络团队允许您使用的任何限制。

# asp.net - 改变布尔值

> ID：10278489
> 
> 赞同：0
> 
> 时间：2012-04-23T10:05:52.033
> 
> 标签：asp.net, database, asp.net-mvc-3

嗨，我正在 ASP.NET 中从事酒店预订项目。我想制作一个过滤器，以便我可以按日期（例如 6 月 1 日至 6 月 5 日之间）搜索可用房间，然后预订该房间。我该如何将该房间的状态更改为“不可用”期间，以便想要在 5 月 15 日至 30 日之间预订该房间的人可以这样做。房间的状态是我数据库中的布尔值。

![在此处输入图像描述](../Images/e962c2f60886175b9b132b4457d5ce54.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:14:55.317

该`'Status'`值会发生变化，并且基于多种因素，因此您不应该将其真正存储在您的房间桌子上。

在这种情况下，您需要编写一个查询来查看日期范围，然后根据您的预订表返回状态。因此，用户选择一个日期范围并执行查询并返回所有日期的列表，其中包含可用或已预订状态。

想象一下，如果你这样做

```
SELECT * FROM Reservation res LEFT JOIN Room ON res.Room_ID = Room.RoomId 
```

您的房间桌子的状态为“可用”，因此它将始终为每一行返回可用。如果您将此状态设置为不可用，则即使房间实际可用，它也会为每一行返回不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:30:36.597

尝试这样的事情

在 UI 上显示数据之前，您必须每次都操作房间表

```
var objrum = rum.toList().asQueryable(); // fetches all the rooms
var objreservation = reservation.toList().asQueryable(); // fetches all reservation

foreach(var res in objreservation)
{
    foreach(var rum in objrum)
    {
        if(res.roomid == rum.rumid)
        {
            if(res.checkindate >= currentcheckindate && res.checkoutdate <= currentcheckoutdate)
            {
                rum.status = false // set to unavailable
            }
            else
                rum.status = true // set to available
        }
    }
} 
```

而不是从房间表中获取数据以显示在您的 UI 上

# c - 整个源文件中的头文件重复？

> ID：10278494
> 
> 赞同：3
> 
> 时间：2012-04-23T10:06:16.293
> 
> 标签：c, gcc, c99

```
// File foo1.c :
#include <stdio.h> // once
void foo1(void);
void foo1(void){
    puts("foo1");
}

// File foo2.c :
#include <stdio.h> // again
void foo2(void);
void foo2(void){
    puts("foo2");
}

// File foomain.c :
#include <stdio.h> // yet again
void foo1(void); // again
void foo2(void); // again
int main(void){
    foo1();
    foo2();
    puts("foomain");
    return 0;
}

// create object files
gcc -fPIC foo1.c -o foo1.o // 1 stdio.h
gcc -fPIC foo2.c -o foo2.o // 1 stdio.h

// create shared library
gcc -fPIC -shared foo1.o foo2.o -o foo.so // foo.so contains stdio.h 2 times ?

// build entire program
gcc foo.so foomain.c -o foomain // foomain contains 1 stdio.h plus the 2 from foo.so ? 
```

1.  为什么整个程序包含 3 个 stdio.h ？似乎多余，为什么不只是 1 ？编译器不应该只需要 1 吗？

2.  目标文件包含原型是有意义的，但为什么必须在 foomain.c 中再次指定它们？编译器不应该知道它们已经在 foo.so 中指定了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T10:10:54.613

那是因为每个文件都是单独编译的，所以每次编译器都应该知道用于执行编译时检查的所有函数的签名。因此，每个文件都必须包含所有使用的声明，这些声明在文件编译之前由预处理器包含。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T10:08:28.097

如果您查看大多数头文件的顶部，它们都有一个包含保护来阻止双重包含。

```
#ifndef FOO
#define FOO

#endif 
```

有关详细信息，请参阅[包含防护](https://en.wikipedia.org/wiki/Include_guard)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T10:09:52.027

这些`#include`行实际上不是编译器的一部分，而是[C 预处理器](http://en.wikipedia.org/wiki/C_preprocessor)。

预处理器对`#include`行所做的是将文件实际包含到源代码中，并创建一个包含文件内容的新临时文件，其中`#include`行被包含文件的内容替换。

如果您所做的只是调用函数，那么您实际上根本不需要包含文件。您可能会收到有关未声明函数的警告，但这些警告可能是您自己为这些函数添加原型。例如，在您的主源文件中，您只使用`puts`，而不是包含`<stdio.h>`您可以添加这样的原型：

```
int puts(const char *s); 
```

但是，`<stdio.h>`还定义了一些结构（如`FILE`结构）并声明了一些变量（如`stdout`），如果您使用其中任何一个，则还需要头文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T10:09:35.870

您可以按照@Jeff 的建议使用包含防护，或者只是放在`#pragma once`每个标题的顶部。

# iphone - 对 Cocos2D 的误解：Layers、静态变量和 Model View Controller。这些能共存吗？

> ID：10278495
> 
> 赞同：0
> 
> 时间：2012-04-23T10:06:19.657
> 
> 标签：iphone, cocos2d-iphone, background-music

[对不起，如果这个问题太无聊了，但我一直试图从Itterheim 的](http://www.apress.com/9781430233039/)书的代码示例中尽可能多地理解，但 无法弄清楚它是如何工作的。

在我的“HelloWorldLayer.m”中，我创建了一个名为“MusicLayer”的类的实例，它扩展了 CCLayer。灵感来自于在名为“ShootEmUp”的示例（第 8 章，共[1](http://www.apress.com/9781430233039/)章）中有一个 InputLayer。因此我想我会创建一个 MusicLayer 来处理我在游戏中拥有的各种音乐文件并遇到了一些问题（将在帖子末尾解释）。[我从Cocos2d Cookbook 的 RecipeCollection02、Ch6_FadingSoundsAndMusic 中](http://cocos2dcookbook.com/)获得了大部分与音乐相关的代码。

但首先我想介绍一些可能导致这个问题的背景想法，希望对此有一些明确的参考。

我习惯于“模型视图控制器”（[MVC 维基百科链接](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)）方法，因为我来自 C++ 和 Java 背景，以前从未编写过游戏，在我看来，游戏范例与“经典”有点不同软件工程大学的方法（不要误会我的意思，我确信在许多大学中他们不再教这些东西了:)）。

关键是在我看来，这些示例中丢失了“经典”软件工程方法（例如，在 ShootEmUp 代码中，InputLayer 的实例具有 GameScene 类的引用 - 见下文 - 同时在 InputLayer有对 GameScene 的静态共享实例的引用-见下文-）。

```
//From GameScene
+(id) scene
{
CCScene* scene = [CCScene node];
GameScene* layer = [GameScene node];
[scene addChild:layer z:0 tag:GameSceneLayerTagGame];
InputLayer* inputLayer = [InputLayer node];
[scene addChild:inputLayer z:1 tag:GameSceneLayerTagInput];
return scene;
}

//From InputLayer
-(void) update:(ccTime)delta
{

totalTime += delta;

// Continuous fire
if (fireButton.active && totalTime > nextShotTime)
{
    nextShotTime = totalTime + 0.5f;

    GameScene* game = [GameScene sharedGameScene];
    ShipEntity* ship = [game defaultShip];

           //Code missing
}
} 
```

有人告诉我静态实例是要避免的。尽管如此，我了解拥有 GameScene 静态实例的好处，但我仍然对双向参考感到困惑（从 GameScene 到 InputLayer，反之亦然）..：

**这是游戏编程中的常见做法吗？**

**有没有办法避免这种方法？**

我现在将粘贴我的代码，我承认它可能是垃圾，并且可能会出现一些明显的错误，因为我正在尝试做一件非常简单的事情并且我无法管理。

所以我们在这里。那是 MusicLayer 类（它包含注释掉的代码，因为我之前试图使它成为一个共享类实例）：

```
//
//  MusicLayer.h
//  ShootEmUp
//

//  Copyright 2012 __MyCompanyName__. All rights reserved.
//

//Enumeration files should be the way those are referred from outside the class..
enum music_files {
    PLAYER_STANDARD = 1,
};

enum sound_files{
    A = 0,
    B = 1,
    C = 2,
    ABC = 4,
    AAC = 5,
    ACA = 6,
    //And so on and so forth..
};

#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "CDXPropertyModifierAction.h"

@interface MusicLayer : CCLayer {
    SimpleAudioEngine *sae;
    NSMutableDictionary *soundSources;
    NSMutableDictionary *musicSources;
}

//In this way you can load once the common sounds on the sharedMusicLayer, have the benefit of keep tracks playing on scene switching as well as being able to load tracks and sounds before each level
//+(MusicLayer*) sharedMusicLayer;

/** API **/
//PLAY  - sound undtested
-(void) playBackgroundMusic:(enum music_files) file;
-(void) playSoundFile:(enum sound_files) file;
-(void) loadPopLevel;

/** Private methods **/
//Utilities methods

-(NSString *) _NSStringFromMusicFiles: (enum music_files) file;
-(NSString *) _NSStringFromSoundFiles: (enum sound_files) file;

//LOAD - Meant to be private methods
-(CDLongAudioSource*) _loadMusic:(NSString*)fn;
-(CDSoundSource*) _loadSoundEffect:(NSString*)fn;

//FADE - sound undtested
-(void) _fadeOutPlayingMusic;
-(void) _fadeInMusicFile:(NSString*)fn;
-(void) _playSoundFile:(NSString*)fn;

@end 
```

在这里，我们使用 .m 文件：

```
#import "MusicLayer.h"

@implementation MusicLayer

/**
static MusicLayer* instanceOfMusicLayer;

+(MusicLayer*) sharedMusicLayer
{
    NSAssert(instanceOfMusicLayer != nil, @"MusicLayer instance not yet initialized!");
    return instanceOfMusicLayer;
}**/

-(id) init
{
    CCLOG(@"In Init");
    if ((self = [super init]))
    {
        CCLOG(@"Inside Init");
        //instanceOfMusicLayer = self;

        //Initialize the audio engine
        sae = [SimpleAudioEngine sharedEngine];

        //Background music is stopped on resign and resumed on become active
        [[CDAudioManager sharedManager] setResignBehavior:kAMRBStopPlay autoHandle:YES];

        //Initialize source container
        soundSources = [[NSMutableDictionary alloc] init];
        musicSources = [[NSMutableDictionary alloc] init];

    }

    return self;
}

-(void) loadPopLevel{
    CCLOG(@"In loadPopLevel");
    [self _loadSoundEffect:[self _NSStringFromSoundFiles:A]];
    [self _loadSoundEffect:[self _NSStringFromSoundFiles:B]];
    [self _loadSoundEffect:[self _NSStringFromSoundFiles:C]];
    [self _loadSoundEffect:[self _NSStringFromSoundFiles:ACA]];
    [self _loadSoundEffect:[self _NSStringFromSoundFiles:ABC]];
    [self _loadSoundEffect:[self _NSStringFromSoundFiles:AAC]];

    [self _loadMusic:[self _NSStringFromMusicFiles:PLAYER_STANDARD]];
    [self _loadMusic:[self _NSStringFromMusicFiles:PLAYER_STANDARD]];
    [self _loadMusic:[self _NSStringFromMusicFiles:PLAYER_STANDARD]];
    [self _loadMusic:[self _NSStringFromMusicFiles:PLAYER_STANDARD]];
}

/** UTILITIES METHODS **/
//This function is key to define which files we are going to load..
-(NSString *) _NSStringFromMusicFiles: (enum music_files) file{
    CCLOG(@"In _NSStringFromMusicFiles");

    switch (file) {
        case PLAYER_STANDARD:
            return  @"a.mp3"; 
        default:
            NSAssert(0 == 1, @"Invalid argument");
            break;
    }
}

-(NSString *) _NSStringFromSoundFiles: (enum sound_files) file{
    CCLOG(@"In _NSStringFromSoundFiles");
    switch (file) {
        case A:
            return  @"shot.caf";
        case B:
            return  @"shot.caf";
        case C:
            return  @"shot.caf";
        case AAC:
            return  @"Wow.caf";
        case ABC:
            return  @"Wow.caf";
        case ACA:
            return  @"Wow.caf";
        default:
            NSAssert(0 == 1, @"Invalid argument");
            break;
    }
}

/** PLAY METHODS **/
-(void) _playSoundFile:(NSString*)fn {
    CCLOG(@"In _playSoundFile");
    //Get sound
    CDSoundSource *sound = [soundSources objectForKey:fn];
    sound.looping = YES;

    //Play sound
    if(sound.isPlaying){
        [sound stop];
    }else{
        [sound play];
    }
}

-(void) _fadeInMusicFile:(NSString*)fn {
    CCLOG(@"In _fadeInMusicFile");
    //Stop music if its playing and return
    CDLongAudioSource *source = [musicSources objectForKey:fn];
    if(source.isPlaying){
        [source stop];
        return;
    }

    //Set volume to zero and play
    source.volume = 0.0f;
    [source play];

    //Create fader
    CDLongAudioSourceFader* fader = [[CDLongAudioSourceFader alloc] init:source interpolationType:kIT_Linear startVal:source.volume endVal:1.0f];
    [fader setStopTargetWhenComplete:NO];

    //Create a property modifier action to wrap the fader
    CDXPropertyModifierAction* fadeAction = [CDXPropertyModifierAction actionWithDuration:1.5f modifier:fader];
    [fader release];//Action will retain
    [[CCActionManager sharedManager] addAction:[CCSequence actions:fadeAction, nil] target:source paused:NO];
}

-(void) _fadeOutPlayingMusic {
    CCLOG(@"In _fadeOutPlayingMusic");
    for(id m in musicSources){
        //Release source
        CDLongAudioSource *source = [musicSources objectForKey:m];
        if(source.isPlaying){
            //Create fader
            CDLongAudioSourceFader* fader = [[CDLongAudioSourceFader alloc] init:source interpolationType:kIT_Linear startVal:source.volume endVal:0.0f];
            [fader setStopTargetWhenComplete:NO];

            //Create a property modifier action to wrap the fader
            CDXPropertyModifierAction* fadeAction = [CDXPropertyModifierAction actionWithDuration:3.0f modifier:fader];
            [fader release];//Action will retain
            CCCallFuncN* stopAction = [CCCallFuncN actionWithTarget:source selector:@selector(stop)];
            [[CCActionManager sharedManager] addAction:[CCSequence actions:fadeAction, stopAction, nil] target:source paused:NO];
        }
    }
}

/** LOADING METHODS **/
-(CDLongAudioSource*) _loadMusic:(NSString*)fn {
    CCLOG(@"In _loadMusic" );
    //Init source
    CDLongAudioSource *source = [[CDLongAudioSource alloc] init];
    source.backgroundMusic = NO;  
    [source load:fn];

    //Add sound to container
    [musicSources setObject:source forKey:fn];

    return source;
}

-(CDSoundSource*) _loadSoundEffect:(NSString*)fn {
    CCLOG(@"In _loadSoundEffect" );

    //Pre-load sound
    [sae preloadEffect:fn];

    //Init sound
    CDSoundSource *sound = [[sae soundSourceForFile:fn] retain];

    //Add sound to container
    [soundSources setObject:sound forKey:fn];

    return sound;
}

/** Public methods **/
//Play music callback
-(void) playBackgroundMusicNumber:(enum music_files) file {
    CCLOG(@"In playBackgroundMusic");
    switch (file) {
        case PLAYER_STANDARD:
            [self _fadeOutPlayingMusic];
            [self _fadeInMusicFile: [self _NSStringFromMusicFiles:PLAYER_STANDARD]];
            break;
        default:
            break;
    }         
}

-(void) playSoundFile:(enum sound_files) file {
    CCLOG(@"In playSoundFile");
    switch (file) {
        case A:
            [self _playSoundFile:[self _NSStringFromSoundFiles:A]];
            break;
        case B:
            [self _playSoundFile:[self _NSStringFromSoundFiles:B]];
            break;
        case C:
            [self _playSoundFile:[self _NSStringFromSoundFiles:C]];            
            break;
        case AAC:
            [self _playSoundFile:[self _NSStringFromSoundFiles:AAC]];
            break;
        case ABC:
            [self _playSoundFile:[self _NSStringFromSoundFiles:ABC]];
            break;
        case ACA:
            [self _playSoundFile:[self _NSStringFromSoundFiles:ACA]];
            break;
        default:
            break;
    }
}

/** Dealloc ! **/
-(void) dealloc {
    [sae stopBackgroundMusic];

    for(id s in soundSources){
        //Release source
        CDSoundSource *source = [soundSources objectForKey:s];
        if(source.isPlaying){ [source stop]; }
        [source release];
    }

    [soundSources release];

    for(id m in musicSources){
        //Release source
        CDLongAudioSource *source = [musicSources objectForKey:m];
        if(source.isPlaying){ [source stop]; }
        [source release];
    }

    [musicSources release];

    //End engine
    [SimpleAudioEngine end];
    sae = nil;

    //instanceOfMusicLayer = nil;
    [super dealloc];
}
@end 
```

现在，我创建了一个新的 Ccoos2d Helloworld 模板并将以下内容添加到 .m 类中以测试代码：

```
#import "cocos2d.h"
#import "MusicLayer.h"

enum tags {
    MUSICLAYERTAG = 99,
    };

// HelloWorldLayer
@interface HelloWorldLayer : CCLayer
{

}

+(CCScene *) scene;

@end

//
//  HelloWorldLayer.m
//  MusicFadingTest
//

// Import the interfaces
#import "HelloWorldLayer.h"

// HelloWorldLayer implementation
@implementation HelloWorldLayer

+(CCScene *) scene
{
    CCLOG(@"In helloworld scene");
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];
    // add layer as a child to scene
    [scene addChild: layer];

    MusicLayer *musicLayer = [MusicLayer node];
    [musicLayer loadPopLevel];

    [scene addChild:musicLayer z:-1 tag:MUSICLAYERTAG];

    // return the scene
    return scene;
}

// on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {

        // ask director the the window size
        CGSize size = [[CCDirector sharedDirector] winSize];

        //Add menu items
        [CCMenuItemFont setFontSize:20];

        CCMenuItemFont *music0Item = [CCMenuItemFont itemFromString:@"Song A" target:self selector:@selector(play:)];
        music0Item.tag = 0;
        CCMenuItemFont *music1Item = [CCMenuItemFont itemFromString:@"Song B" target:self selector:@selector(play:)];
        music1Item.tag = 1;
        CCMenuItemFont *music2Item = [CCMenuItemFont itemFromString:@"Song C" target:self selector:@selector(play:)];
        music2Item.tag = 2;
        CCMenuItemFont *music3Item = [CCMenuItemFont itemFromString:@"Song D" target:self selector:@selector(play:)];
        music3Item.tag = 3;
        CCMenuItemFont *music4Item = [CCMenuItemFont itemFromString:@"Sound A" target:self selector:@selector(play:)];
        music2Item.tag = 4;
        CCMenuItemFont *music5Item = [CCMenuItemFont itemFromString:@"Sound B" target:self selector:@selector(play:)];
        music3Item.tag = 5;

        //Create our menus
        CCMenu *menu0 = [CCMenu menuWithItems:music0Item, music1Item,  music2Item,  music3Item,  music4Item,  music5Item, nil];
        [menu0 alignItemsInColumns: [NSNumber numberWithUnsignedInt:6], nil];
        menu0.position = ccp(240,240);
        [self addChild:menu0];
    }
    return self;
}

//Play music callback
-(void) play:(id)sender {

    CCNode* node = [self getChildByTag:MUSICLAYERTAG];
    NSAssert([node isKindOfClass:[MusicLayer class]], @"not a MusicLayer");

    MusicLayer *musicLayer = (MusicLayer*)node;

    CCMenuItem *item = (CCMenuItem*)sender;

    switch (item.tag ) {
        case 1:
            [musicLayer playBackgroundMusic:PLAYER_STANDARD];
            break;
        case 2:
            [musicLayer playBackgroundMusic:PLAYER_STANDARD];            
            break;

        case 3:
            [musicLayer playBackgroundMusic:PLAYER_STANDARD];            
            break;
        case 4:
            [musicLayer playBackgroundMusic:PLAYER_STANDARD];
            break;
        case 5:
            [musicLayer playSoundFile:A];
            break;
        case 6:
            [musicLayer playSoundFile:B];            
            break;
        default:
            break;
    }

 }

- (void) dealloc
{
     [super dealloc];
} 
@end 
```

但这是我在模拟器中尝试按下任何按钮并因此触发 HelloWorld.m 中的播放方法时收到的错误消息

```
2012-04-23 10:39:18.493 MusicFadingTest[1474:10a03] In _loadMusic
2012-04-23 10:39:18.510 MusicFadingTest[1474:10a03] cocos2d: Frame interval: 1
2012-04-23 10:39:19.405 MusicFadingTest[1474:10a03] *** Assertion failure in -[HelloWorldLayer play:], /Users/user/Desktop/MusicFadingTest/MusicFadingTest/HelloWorldLayer.m:76
2012-04-23 10:39:19.406 MusicFadingTest[1474:10a03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'not a MusicLayer'
*** First throw call stack:
(0x17f6022 0x1987cd6 0x179ea48 0x11c62cb 0xc264a 0x175c4ed 0x175c407 0x3a3b5 0x3ad73 0x37772 0x17f7e99 0x92821 0x9336f 0x95221 0x8573c0 0x8575e6 0x83ddc4 0x831634 0x27b1ef5 0x17ca195 0x172eff2 0x172d8da 0x172cd84 0x172cc9b 0x27b07d8 0x27b088a 0x82f626 0xc107f 0x2955) 
```

上面的代码有点模仿 ShootEmUp 示例中发生的事情，但我遗漏了一些东西。因为我不能通过标签得到孩子..

我问了这个问题，因为尽管答案可能很简单，但我希望对游戏编程中的一般 NON-ModelViewController 方法和静态变量的使用有一些澄清。

我想象在 MainMenu 类和实现我的关卡的各个层中使用我的 MusicLayer。我会根据播放器正在播放的级别预加载各种音乐文件，并保留预加载不特定级别的文件（显然要注意 AudioEngine 支持的最大声音文件数量）。

另一种方法是为每个级别设置不同的 MusicLayer 实例，并使用不同的音乐文件对其进行初始化。这种方法的缺点是 sharedAudioEngine 只有一个，当您想让文件在一个场景和另一个场景之间继续播放时，存在无法完全控制 sharedAudioEngine 中使用的曲目编号的风险（我记得应该是32个caf文件用于音效和少量背景音轨）。

因此，我理解为什么静态实例在游戏编程中是有益的，但仍然很想听听您对[1](http://www.apress.com/9781430233039/) ShootEmUp 代码中的双向引用的看法。

另外，想澄清一下，我鼓励购买[1](http://www.apress.com/9781430233039/)，因为这是一个很好的起点。

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:52:55.877

哦，多少代码和字母......首先，关于“静态实例”的问题。这不是静态实例。这是静态构造函数。所以，你可以使用 smth like

```
CCScene* myScene = [GameScene scene]; 
```

代替

```
CCScene* myScene = [[GameScene alloc] init];
// doing smth
[myScene release]; 
```

因此，您只需创建节点的自动发布实例（在这种情况下，就是您的场景）。

关于音乐问题。您已将音乐图层添加到场景中，但您的播放方法中的 self 将是 HelloWorldLayer 实例。所以如果你想得到你的音乐层，你可以像这样尝试

```
MusicLayer* musicLayer = [[self parent] getChildByTag:MUSICLAYERTAG]; 
```

# mysql - 如何使用 BLOB 字段缩小 ibd 文件？

> ID：10278497
> 
> 赞同：4
> 
> 时间：2012-04-23T10:06:43.743
> 
> 标签：mysql, null, blob, shrink

我有一个包含许多 NULL 值的 BLOB 字段的大表。我启用了多个表空间并为每个表获取了一个单独的 ibd 文件。这个表的物理大小远远大于我自己计算的大小，所以我的结论是应该可以缩小这个 ibd 文件，但是我仍然无法做到这一点，即使重新加载了转储文件。我验证了转储文件确实包含插入 NULL 值的 SQL 语句。缩小此表的物理大小的任何提示？或者这是不可能的，因为 MySQL 为 blob 分配了固定大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:12:43.913

删除 BLOB 列上的索引（如果有） 请提供 o/p`SHOW TABLE STATUS LIKE '<table_name>'`

# c# - LINQ如何根据创建日期选择最新的文件夹

> ID：10278502
> 
> 赞同：0
> 
> 时间：2012-04-23T10:06:51.310
> 
> 标签：c#, linq

```
 DirectoryInfo dInfo = new DirectoryInfo(path)
 DirectoryInfo[] directoryInfos = dInfo.GetDirectories(); 
```

如何迭代 directoryInfos 并选择最新的文件夹？

我正在寻找最新文件夹的名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:22:25.693

两种方法之一 - 不确定哪个是“最好的”：

```
var newest1 = directoryInfos.FirstOrDefault(di => di.CreationTime == directoryInfos.Max(d => d.CreationTime)); 
```

或者

```
var newest2 = directoryInfos.OrderByDescending(di => di.CreationTime).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:10:46.693

```
DateTime DD = directoryInfos.Max(x=> x.CreationTime);

string[] ss =  directoryInfos.Where(x=> x.CreationTime == DD).Select(x=> x.Name).ToArray(); 
```

数组，因为可以有超过 1 个文件夹具有相同的最新创建时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:21:51.977

var folder = (from d in directoryInfos orderby d.CreationTime descending select d).First();

但其他答案当然更快:)

# ravendb - RavenDB 磁盘存储

> ID：10278504
> 
> 赞同：1
> 
> 时间：2012-04-23T10:06:56.697
> 
> 标签：ravendb

当主数据库和索引存储的磁盘已满时，我需要保持 RavenDB 数据库运行。我知道我可以使用配置选项配置为存储提供驱动器 - Raven/IndexStoragePath

但是我需要设计这个磁盘已满时的极端情况。在这种情况下使用的通常模式是什么。一种方法是在关闭服务并以编程方式更新配置文件的同时停止所有访问，然后启动服务——但这有点冒险。

我知道分片，这个问题与此无关，假设分片已启用并且我有多个分片，我想通过向每个分片添加新驱动器来增加每个分片的存储空间。有一个优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:51:52.810

user544550, 在磁盘已满的情况下，RavenDB 将继续运行，但将拒绝接受进一步的写入。索引也会失败，并最终将索引标记为永久失败。

你的实际情况是什么？请注意，在 RavenDB 中，索引往往明显小于实际数据大小，因此磁盘空间利用率的主要原因实际上是主数据库，而不是索引。

# java - 从 JSF-repeat 中检索输入值

> ID：10278507
> 
> 赞同：0
> 
> 时间：2012-04-23T10:07:07.727
> 
> 标签：java, jsf, javabeans

我最近遇到了一个涉及 JSF 和 Javabeans 的问题。要从输入中获取值，您需要在 bean 中声明一个带有 getter 和 setter 的属性。现在我正在尝试生成一个实体列表来编辑一个值（在此代码示例中称为数字），但是我如何检索这些值（因为此时 h:inputText 的 ID 为空）？

我曾尝试将此 ID 命名为“name_#{bean.id}”，但无法在 bean 中设置此值。

任何帮助，将不胜感激！

索引.xhtml

```
<ui:repeat var="entity" value="#{bean.getEntities()}"> 
    <p>
    Value:
    <h:inputText id="" value="#{entity.number}" />
    </p>
</ui:repeat> 
```

Bean.java

```
public List<Entity> getEntities() {
    return entities;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:41:30.507

您不需要 inputText 的客户端 ID 即可将值发送到服务器。如丹尼尔评论中所述，如果您提交周围的表格，则会保存更改。

您甚至不需要设置 id 参数。JSF 为您做这件事。

但是您的 value 属性不正确。它需要是

```
value="#{bean.entities}" 
```

# python - 将月份名称转换为其对应的数字

> ID：10278509
> 
> 赞同：3
> 
> 时间：2012-04-23T10:07:14.970
> 
> 标签：python, date

我有一个文件，其中包含条目列表，日期包含“Jan”、“Feb”、“Mar”等。

我想

> 569207,ngph,RUN,512,16, **2012-Jan-23 01:42** ,2012-04-23 10:53

成为

> 569207,ngph,RUN,512,16, **2012-01-23 01:42** ,2012-04-23 10:53。

我写了以下内容：

```
 for line in f:
        if re.search(r'Jan', line):
            f1.write(line.replace('Jan', '01'))
        elif re.search(r'Feb', line):
            f1.write(line.replace('Feb', '02'))
        elif re.search(r'Mar', line):
            f1.write(line.replace('Mar', '03'))
        elif re.search(r'Apr', line):
            f1.write(line.replace('Apr', '04'))
        elif re.search(r'May', line):
            f1.write(line.replace('May', '05'))
        elif re.search(r'Jun', line):
            f1.write(line.replace('Jun', '06'))
        elif re.search(r'Jul', line):
            f1.write(line.replace('Jul', '07'))
        elif re.search(r'Aug', line):
            f1.write(line.replace('Aug', '08'))
        elif re.search(r'Sep', line):
            f1.write(line.replace('Sep', '09'))
        elif re.search(r'Oct', line):
            f1.write(line.replace('Oct', '10'))
        elif re.search(r'Nov', line):
            f1.write(line.replace('Nov', '11'))
        elif re.search(r'Dec', line):
            f1.write(line.replace('Dec', '12')) 
```

哪个有效，但有更清洁的方法吗？我希望它遍历大约 100 行的整个文件并自动将月份更改为数字。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T10:14:50.573

两种可能：

1.  [日期](http://docs.python.org/library/datetime.html)时间模块
2.  像你一样的DIY解决方案

python 文档值得一读，您可能会找到一种更简单的方法来做更多的事情，而不仅仅是回答这个问题。

至于 DIY 解决方案，您似乎有很多重复代码，并且不需要正则表达式。你可以做

```
for i, month in enumerate(months,1): 
    line.replace(month, str(i)) 
```

`months`月份列表在哪里。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-14T10:22:17.847

datetime 是答案，例如：

```
>>> import datetime
>>> datetime.datetime.strptime('Mar 2013',"%b %Y")
datetime.datetime(2013, 3, 1, 0, 0) 
```

[在http://docs.python.org/2/library/datetime.html](http://docs.python.org/2/library/datetime.html)检查格式指令

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T10:29:54.757

你也可以使用字典：

```
month_numbers = {'-Jan-': '-01-', '-Feb-': '-02-', ...}
for k, v in month_numbers.items():
    line = line.replace(k, v)
print(line) 
```

您可以使用正则表达式，您可以使用简单的字符串`replace()`方法，而无需先检查月份名称是否在字符串中。我不知道字符串是否`Jan`可以在输入字符串的其他部分，但 IMO 替换`-Jan-`为`-01-`.

# c# - 转换为 Excel 时从 GridView 中删除列

> ID：10278510
> 
> 赞同：0
> 
> 时间：2012-04-23T10:07:19.307
> 
> 标签：c#, asp.net

我有一个 GridView 并且在后面的代码中，我将其转换为页面中按钮单击事件上的 Excel 工作表............代码在 aspx 中如下所示。

```
<form id="form1" runat="server">
    <table width="1100" border="0" cellpadding="0" cellspacing="0" style="height:100%; background-color:White" align="center">
            <tr><td>&nbsp;</td></tr>
            <tr>
                <td align="center">
                    <asp:Button ID="DividendEportToExcel" runat="server" Text="Convert To Excel" 
                        CssClass="bluesome" onclick="DividendEportToExcel_Click" />      
                </td>
            </tr>
            <tr>
                <td>
                     <asp:GridView ID="MemberDividendView" runat="server">
                               </asp:GridView>
               </td>
           </tr>
     </table>
</form> 
```

在后面的代码中，我正在执行以下操作：

```
protected void DividendEportToExcel_Click(object sender, EventArgs e)
    {
        MemberDividendView.Columns.RemoveAt(5);
        MemberDividendView.ShowHeader = true;
        MemberDividendView.GridLines = GridLines.Both;
        MemberDividendView.PagerSettings.Visible = false;
        MemberDividendView.DataBind();
        ChangeControlsToValue(MemberDividendView);
        Response.ClearContent();
        Response.AddHeader("content-disposition", "attachment; filename=AdjustmentDetialsToExcel.xls");
        Response.ContentType = "application/excel";
        StringWriter sWriter = new StringWriter();
        HtmlTextWriter hTextWriter = new HtmlTextWriter(sWriter);
        HtmlForm hForm = new HtmlForm();
        MemberDividendView.Parent.Controls.Add(hForm);
        hForm.Attributes["runat"] = "server";
        hForm.Controls.Add(MemberDividendView);
        hForm.RenderControl(hTextWriter);
        Response.Write(sWriter.ToString());
        Response.End();
      }

    private void ChangeControlsToValue(Control gridView)
    {
        Literal literal = new Literal();

        for (int i = 0; i < gridView.Controls.Count; i++)
        {
            if (gridView.Controls[i].GetType() == typeof(LinkButton))
            {

                literal.Text = (gridView.Controls[i] as LinkButton).Text;
                gridView.Controls.Remove(gridView.Controls[i]);
                //gridView.Controls.AddAt(i,literal);
            }
            else if (gridView.Controls[i].GetType() == typeof(DropDownList))
            {
                literal.Text = (gridView.Controls[i] as DropDownList).SelectedItem.Text;
                gridView.Controls.Remove(gridView.Controls[i]);
                //gridView.Controls.AddAt(i,literal);
            }
            else if (gridView.Controls[i].GetType() == typeof(CheckBox))
            {
                literal.Text = (gridView.Controls[i] as CheckBox).Checked ? "True" : "False";
                gridView.Controls.Remove(gridView.Controls[i]);
                //gridView.Controls.AddAt(i,literal);
            }
            if (gridView.Controls[i].HasControls())
            {
                ChangeControlsToValue(gridView.Controls[i]);

            }
        }
    } 
```

但是我的列仍然没有在 Excel 表中被删除........错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:21:16.403

1.  `GridView`如果要在导出前删除列，则需要将 DataBind 绑定到它的 DataSource。
2.  尝试设置它们`Viusible=false`而不是删除它们
3.  您不需要创建新的服务器表单来避免服务器控件在表单之外呈现的 ASP.NET 异常。

    [您可以通过覆盖VerifyRenderingInServerForm](http://msdn.microsoft.com/en-us/library/system.web.ui.page.verifyrenderinginserverform.aspx)来避免这种情况

    ```
    public override void VerifyRenderingInServerForm(Control control)
    {
      /* Confirms that an HtmlForm control is rendered for the specified ASP.NET
         server control at run time. */
    } 
    ```

4.  我建议创建一个真正的 excel 文件，而不是仅从 excel 解释的 HTML 表。我可以推荐[`EPPlus`](http://epplus.codeplex.com/releases/view/47316)。

# bash - Bash shell 十进制到二进制基数 2 的转换

> ID：10278513
> 
> 赞同：40
> 
> 时间：2012-04-23T10:07:32.053
> 
> 标签：bash, shell, binary, decimal

我正在寻找一种在 Bash 中将十进制数转换为二进制数的简单方法。我有需要转换的变量：

```
$ip1 $ip2 $ip3 $ip4 
```

有没有一种简单的方法可以在不查看每个数字的情况下做到这一点？

我宁愿不必写很多代码。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-23T10:09:15.760

您可以`bc`用作：

```
echo "obase=2;$ip1" | bc 
```

[**看见**](http://ideone.com/BtD9i)

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-09-19T22:58:38.757

使用 bash 内置命令（范围 0 到 255）将十进制转换为二进制：

```
D2B=({0..1}{0..1}{0..1}{0..1}{0..1}{0..1}{0..1}{0..1})

echo ${D2B[7]} 
```

00000111

```
echo ${D2B[85]} 
```

01010101

```
echo ${D2B[127]} 
```

01111111

* * *

要删除前导零，例如从`${D2B[7]}`：

```
echo $((10#${D2B[7]})) 
```

111

* * *

`00000000 00000001 00000010 ... 11111101 11111110 11111111`这将创建一个带有 bash[大括号扩展](https://www.gnu.org/software/bash/manual/bash.html#Brace-Expansion)的数组。数组 D2B 中的位置表示其十进制值。

另请参阅：[了解代码 ({0..1}{0..1}{0..1}{0..1}{0..1}{0..1}{0..1}{0 ..1})](https://stackoverflow.com/q/44738494/3776858)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-20T20:38:14.483

**Bash 中的十进制到二进制转换：**

我正在使用 Ubuntu 14.04 来执行此操作。

将小数 1 到 5 转换为二进制。

```
el@apollo:~$ bc <<< "obase=2;1"
1
el@apollo:~$ bc <<< "obase=2;2"
10
el@apollo:~$ bc <<< "obase=2;3"
11
el@apollo:~$ bc <<< "obase=2;4"
100
el@apollo:~$ bc <<< "obase=2;5"
101 
```

**奖金示例：**

```
el@apollo:~$ bc <<< "obase=2;1024"
10000000000

el@apollo:~$ bc <<< "obase=2;2^128"
100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-04T16:05:20.793

将整数转换为具有另一个基数的另一种表示形式的通用方法（但基数<=10，因为仅使用数字 0..9 表示）：

```
function convertIntvalToBase () # (Val Base)
{
   val=$1
   base=$2
   result=""
   while [ $val -ne 0 ] ; do
        result=$(( $val % $base ))$result #residual is next digit
        val=$(( $val / $base ))
   done
   echo -n $result
} 
```

例如

```
convertIntvalToBase $ip1 2     # converts $ip1 into binary representation 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-09-19T23:13:03.163

定义为 bash 中的函数：

```
# to Binary:
toBinary(){
    local n bit
    for (( n=$1 ; n>0 ; n >>= 1 )); do  bit="$(( n&1 ))$bit"; done
    printf "%s\n" "$bit"
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-30T11:37:51.150

**仅使用 Bash 将十进制转换为二进制**

任何整数都可以使用它转换为二进制::

```
touch dec2bin.bash && chmod +x "$_" && vim "$_" 
```

然后，复制粘贴以下内容：

```
#!/bin/bash
num=$1;
dec2bin()
{
    op=2; ## Since we're converting to binary
    quo=$(( $num/ $op)); ## quotient
    rem=$(( $num% $op)); ## remainder
    array=(); ## array for putting remainder inside array
    array+=("$rem"); ## array expansion
        until [[ $quo -eq 0 ]]; do
            num=$quo; ## looping to get all remainder, untill the remainder is 0
            quo=$(( $num / $op));
            rem=$(( $num % $op));
            array+="$rem"; ## array expansion
        done
    binary=$(echo "${array[@]}" | rev); ## reversing array
    printf "$binary\n"; ## print array
}
main()
{
[[ -n ${num//[0-9]/} ]] &&
    { printf "$num is not an integer bruv!\n"; return 1;
    } || { dec2bin $num; }
}
main; 
```

例如：

```
./dec2bin.bash $var
110100100 
```

必须加整数！！

```
./dec2bin.bash 420.py
420.py is not an integer bruv! 
```

**另外，**使用 python 的另一种方式：慢得多

```
python -c "print(bin(420))"
0b110100100 
```

**仅使用 Bash 将十六进制转换为二进制**

同样，十六进制转二进制，如下仅使用 bash：

```
#!/usr/local/bin/bash ## For Darwin :( higher bash :)
#!/bin/bash ## Linux :)
hex=$1;
hex2bin()
{
    op=2; num=$((16#$hex));
    quo=$(( $num/ $op));
    rem=$(( $num% $op));
    array=();
    array+=("$rem");
        until [[ $quo -eq 0 ]]; do
            num=$quo;
            quo=$(( $num / $op));
            rem=$(( $num % $op));
            array+="$rem";
        done
    binary=$(echo "${array[@]}" | rev);
    printf "Binary of $1 is: $binary\n";
}
main()
{
[[ -n ${hex//[0-9,A-F,a-f]/} ]] &&
    { printf "$hex is not a hexa decimal number bruv!\n"; return 1;
    } || { hex2bin $hex; }
}
main; 
```

例如：

```
./hex2bin.bash 1aF
Binary of 1aF is: 110101111 
```

必须通过十六进制：

```
./hex2bin.bash XyZ
XyZ is not a hexa decimal number bruv! 
```

# objective-c - 音频缓冲区代码中的内存正在增长

> ID：10278516
> 
> 赞同：0
> 
> 时间：2012-04-23T10:07:45.020
> 
> 标签：objective-c, c, core-audio, audiounit

我有一个我们在应用程序中多次使用的代码，它是一个获取缓冲区样本并处理它的类，然后将通知发送回主类。代码是c和objective-c。

它工作得很好，但是我可以在工具分配工具中看到内存在增长。“总字节数”以每秒 100k 的速度不断增长。因为代码的某些部分**我知道他们是谁**。

这是回调函数，带有产生问题的行。它每秒发生很多次。我也不太明白把我的放在哪里`*pool` ：

```
 static OSStatus recordingCallback(void *inRefCon, 
                                      AudioUnitRenderActionFlags *ioActionFlags, 
                                      const AudioTimeStamp *inTimeStamp, 
                                      UInt32 inBusNumber, 
                                      UInt32 inNumberFrames, 
                                      AudioBufferList *ioData)
    {

        AudioBuffer buffer;
        buffer.mNumberChannels = 1;
        buffer.mDataByteSize = inNumberFrames * 2;
        //NSLog(@"%ld",inNumberFrames);
        buffer.mData = malloc( inNumberFrames * 2 );
        // Put buffer in a AudioBufferList
        AudioBufferList bufferList;
        bufferList.mNumberBuffers = 1;
        bufferList.mBuffers[0] = buffer;

        // block A
        OSStatus status;
        status = AudioUnitRender(audioUnit, 
                                 ioActionFlags, 
                                 inTimeStamp, 
                                 inBusNumber, 
                                 inNumberFrames, 
                                 &bufferList); 

       //end block A

         NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]; 
        int16_t *q = (int16_t *)(&bufferList)->mBuffers[0].mData;
        int16_t average ;

        for(int i=0; i < inNumberFrames; i++)
        {

            average=q[i];   

            if(average>100) // lineB 
                reducer++;

           //blockC
            if(reducer==150 )
            {

                average= preSignal + alpha*(average-preSignal);
                //NSLog(@"average:%d",average);

                //call scene
                [dict setObject:[NSNumber numberWithInt:average] forKey:@"amp" ] ;
                [[NSNotificationCenter defaultCenter] postNotificationName:@"DigitalArrived" object:nil userInfo:dict];
                reducer=0;
                preSignal=average;

            }
//end blockC

        }

         free(buffer.mData);
         [pool release];
        return noErr;

} 
```

OK：暂时忽略 blockC。删除 blockA 和 lineB 解决所有问题。只删除其中一个 - 泄漏。

我只是无法理解这里正在成长的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:24:49.517

只是一个猜测，但在你的录制回调函数（这是一个超级时间关键函数）中分配一个新的 NSAutoreleasePool 可能是一个坏主意。

实际上，你为什么要在这里做这个？您不应该在 main.m 中为整个应用程序设置一个池吗？这可能会导致您的一些泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:56:32.737

您不应该在音频单元渲染回调中做任何需要内存分配的事情。使用通用 Objective C 的实时性要求太高了。

由于您不应在音频单元回调中分配池或任何其他内存，因此不应使用任何可能或实际创建任何对象的 Objective C 方法，例如字典修改或通知创建。您可能不得不退回到在渲染回调中使用纯 C（设置标志），并在另一个线程中的渲染回调之外执行您的 Objective C 消息传递（例如，在计时器回调中轮询标志之后）。

# php - suexec 策略违规

> ID：10278518
> 
> 赞同：4
> 
> 时间：2012-04-23T10:07:50.323
> 
> 标签：php, hosting, suexec

我在 PHP 上开发了一个站点并使用 iPage 托管它。它工作正常，但今天我检查了该网站，它说：

```
The server encountered an unexpected condition which prevented it from fulfilling 
the request. The script had an error or it did not produce any output. If there 
was an error, you should be able to see it in the error log. 
```

错误日志说：

```
20120423T060239: mydomain.com/file.php suexec policy violation: see suexec log for more details 
```

我搜索了错误，它说将权限更改为`755`，但它没有用。`644`我读了另一篇文章，它说将目录和文件的权限更改为`765`. 但它也失败了。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-22T07:14:17.847

正确的文件权限：

*   目录 755
*   php 文件 644

# groovy - 在 Groovy 中读取 Xml 文件

> ID：10278530
> 
> 赞同：0
> 
> 时间：2012-04-23T10:08:43.387
> 
> 标签：groovy

我正在阅读 groovy 中的 xml 文件，如下所示，但不知道出了什么问题。

下面是我的功能

```
def setEnvironment(Map env,Map params)
{
    def records=new XmlSlurper().parse(env.get("ABC_HOME")+"/isp/config/nodemeta.xml")

    def jdbcurl=records.'domainservice:DBConnectivity'[0].@dbConnectString
    params.put("dn", records.'domainservice:GatewayNodeConfig'[0].@domainName)
    params.put("dh", records.'domainservice:GatewayNodeConfig'[0].'address'[0].@host)
    params.put("dp", records.'domainservice:GatewayNodeConfig'[0].'address'[0].@httpPort)
    params.put("u", records.'domainservice:DBConnectivity'[0].@dbUsername)
    if(jdbcurl==null||jdbcurl.size()==0)
    {
        params.put("tns", records.'domainservice:DBConnectivity'[0].@dbHost)
    }
    else
    {
        params.put("tns", jdbcurl.find("(?<=%2F%2F)[\\d\\w_]+"))
    }

    println params

} 
```

我的输出

```
[pd:admin, u:, tns:, dh:, dn:, dp:, un:admin, x:c1164035531] 
```

我的 XML

```
<?xml version="1.0" encoding="UTF-8"?>
    <imx:IMX xmlns:imx="http://com.abc.imx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" serializationSpecVersion="4.0" crcEnabled="0" xmlns:domainservice="http://com.abc.isp.metadata.domainservice/2" versiondomainservice="2.4.1" xmlns:common="http://com.abc.isp.metadata.common/2" versioncommon="2.2.0" xsi:schemaLocation="http://com.abc.imx IMX.xsd http://com.abc.isp.metadata.domainservice/2 com.abc.isp.metadata.domainservice.xsd http://com.abc.isp.metadata.common/2 com.abc.isp.metadata.common.xsd">
<domainservice:GatewayNodeConfig imx:id="U:LtWHxY0ZEeGb2FwhP-xoGw" adminconsolePort="15533" adminconsoleShutdownPort="38207" domainName="D_1035531" nodeName="N_1035531" dbConnectivity="ID_1">
<address imx:id="ID_2" xsi:type="common:NodeAddress" host="absdie" httpPort="1531" port="1532"/>
<portals>
<NodeRef imx:id="ID_3" xsi:type="common:NodeRef" address="ID_2" nodeName="N_1035531"/>
</portals>
</domainservice:GatewayNodeConfig>
<domainservice:DBConnectivity imx:id="ID_1" dbEncryptedPassword="ZmTXZDoYq0TyrU7fSaS9BrAlIuZyS2rw%2FafW1TLWE4g%3D" dbHost="fortuner" dbName="ORCL" dbPort="1521" dbType="ORACLE" dbUsername="zx1649355388"/>
</imx:IMX> 
```

**注意**：pd & x 已经在地图中了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:18:26.407

XmlSlurper 正在为您处理命名空间......只需摆脱节点名称的命名空间部分（请注意更多 Groovy 映射管理）

```
params.dn = records.GatewayNodeConfig[0].@domainName.text()
params.dh = records.GatewayNodeConfig[0].address[0].@host.text()
params.dp = records.GatewayNodeConfig[0].address[0].@httpPort.text()
params.u  = records.DBConnectivity[0].@dbUsername.text() 
```

# android - Android onTouchEvent 聚焦整个活动

> ID：10278536
> 
> 赞同：0
> 
> 时间：2012-04-23T10:08:58.257
> 
> 标签：android, focus, touch-event

我正在开发一个在列表视图之间切换的 viewFlipper，到目前为止，一切都很好。我在 onTouchEvent 上启动动画。我的问题是，要进入 onTouchEvent，我必须点击一个没有组件的区域，就像我的活动是最后一个请求焦点的组件一样。

我想要完全相反的方式。我希望无论我在哪里点击屏幕，尽管有其他组件，它都会启动 onTouchEvent。一定很简单，但到目前为止我做了毫无价值的研究。

谢谢。

# ruby - 将 Ruby 从 1.8.7 升级到 1.9.3 后的 Yaml 编码问题

> ID：10278537
> 
> 赞同：2
> 
> 时间：2012-04-23T10:09:01.420
> 
> 标签：ruby, character-encoding, yaml, upgrade, ruby-1.9.3

也许您可以帮助我使用 Yaml 编码。

我们有一个应用程序，它将一些序列化的设置作为 Yaml 字符串存储在数据库中，例如：

```
---
quantity_units: Stunden,Tage, Monate, Pauschal, Jahre, GB, MB, StÃ¼ck, Seite, SMS
categories: Shirts
number_schema: P-[Y4]-[CY3] 
```

我们正处于从 Ruby 1.8.7 迁移到 Ruby 1.9.3 的过程中，并且 Yaml 解析库在版本之间发生了变化，给我们留下了这样的解码字符串 from `Stück`to `StÃ¼ck`。

我只想知道如何正确地将这些字符串转换为 unicode，剩下的我会处理。

我不知道 1.8.7 Yaml 解析器中使用了哪种编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:24:26.630

这看起来像 utf8 读取为 iso-8895-1，并被 ruby​​ 适配器解释为 utf-8。您可能想要检查您当前的语言环境和数据库服务器的语言环境。另请参阅如果您直接通过控制台访问数据会发生什么，并检查那里的编码。它在数据库上看起来像 utf-8，但在两者之间被解释为 iso-8859-1。

如果没有任何帮助，有一个片段可以传递您的数据（并将其写回）。

```
 "StÃ¼ck".encode('iso-8859-1').force_encoding('utf-8') # I've no idea what I'm doing.
 # => "Stück" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-07T15:04:56.230

谢谢@Tass，我写了一个奇怪的方法，比如你的“#我不知道我在做什么。”

我在 ruby​​ 1.8 下的 rails 2.3 中有一个应用程序，它与 rails 3.2 和 ruby​​ 1.9 共享一个 Mysql 数据库

在 Rails 2.2 上，当我保存序列化数组时，有时我可以在 mysql 中看到“二进制！” 或者我的字符串格式错误，因此，当我使用 rails 3.2 显示文本时，我得到了奇怪的行为。

我写了一个方法来处理这个问题（我希望我们将迁移 rails 2.3）：

```
def self.decode(words)
  temp_name = words || ''
  temp_name_encoding = temp_name.encoding

  if temp_name_encoding == Encoding::ASCII_8BIT
    return temp_name.encode('ASCII-8BIT').force_encoding('utf-8')
  elsif temp_name_encoding == Encoding::UTF_8
    return temp_name.encode('iso-8859-1').force_encoding('utf-8')
  else
    return temp_name
  end
rescue Encoding::UndefinedConversionError
  temp_name
end 
```

# msbuild - Microsoft SDK 的系统变量

> ID：10278541
> 
> 赞同：3
> 
> 时间：2012-04-23T10:09:19.287
> 
> 标签：msbuild, environment-variables, strongname, system-variable

类似于我们为 Windows 目录使用的 %WINDIR% 系统变量，我们是否有任何指向最新版本的 Microsoft SDK 文件夹的系统变量，以便我可以访问我的构建脚本中的 sn.exe？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:09:22.303

我正在运行 MSBuild 4.0，并且在我的项目文件中 ToolsVersion 设置为 4.0。变量 SDK40ToolsPath 指向 .NET 4.0 工具的安装位置。SDK35ToolsPath 指向 .NET 3.5 工具的安装位置。

MSBuild 根据 ToolsVersion 的值从注册表中读取这些变量：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSBuild\ToolsVersions\4.0。

# php - CakePHP 一直让我退出

> ID：10278542
> 
> 赞同：7
> 
> 时间：2012-04-23T10:09:26.563
> 
> 标签：php, session, cakephp, cakephp-2.1

最近我做了三个蛋糕应用程序，所有三个都存在这个问题。配置主要是库存，我将其用作会话选项。

```
Configure::write('Session', array(
    'defaults' => 'php',
    'cookie' => 'test'
)); 
```

经过大量谷歌搜索后，每个人都只是建议安全级别太高，但我从未更改过这个值，它是：

```
Configure::write('Security.level', 'medium'); 
```

**编辑**：我也尝试过低安全性并且没有变化。

我只使用基本身份验证来检查用户是否登录。

登录后cookie设置为三个小时后过期，直到我再次登录后过期日期才更新，这是否正常？

我似乎根本无法复制该问题，有时我会登录，然后下一次单击会再次将我注销，有时会持续一段时间。

我在 Windows 7 上使用 Chrome，网站上没有 AJAX。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:59:08.213

你在使用 Ajax。问题只发生在IE中吗？

IE 对浏览器本身的 Ajax 调用使用不同的浏览器代理字符串。为提高安全性，Cake 检查浏览器代理，在 IE 的情况下，认为另一个浏览器试图劫持会话，因为代理不同。

您可以通过以下方式禁用此检查：

```
Configure::write('Session.checkAgent', false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T10:17:19.937

遇到同样的问题后，我发现这是由 Session.cookieTimeout 值引起的。尽管 php 会话仍然有效，但会话 cookie 上的到期日期不会被刷新。

现在这是我的会话配置

```
Configure::write('Session', array(
        'defaults' => 'php',
        'timeout' => 30, // The session will timeout after 30 minutes of inactivity
        'cookieTimeout' => 1440, // The session cookie will live for at most 24 hours, this does not effect session timeouts
        'checkAgent' => false,
        'autoRegenerate' => true, // causes the session expiration time to reset on each page load
    )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:59:39.797

您不是唯一一个在 Chrome 浏览器上遇到 CakePHP 会话问题的人。

[Pixelastic](http://www.pixelastic.com/)同事编码建议[以下修复](http://www.pixelastic.com/blog/273:losing-session-request-cakephp-chrome)，引用：

只需创建名为`session_custom.php`in`app/config/`的文件，将以下行放入其中：

```
// Killing this config that was causing so much trouble with Chrome
ini_set('session.referer_check', '');

// No session id in url
ini_set('session.use_trans_sid', 0);

// Using custom cookie name instead of PHPSESSID
ini_set('session.name', Configure::read('Session.cookie'));

// Cookie like time, depending on security level
ini_set('session.cookie_lifetime', $this->cookieLifeTime);

// Cookie path
ini_set('session.cookie_path', $this->path); 
```

然后`Configure::write('Session.save', 'session_custom');`在你的`core.php`文件中设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T09:53:47.850

问题在于会话：

首先检查你的 'phpinfo();'

检查会话是否基于文件。

如果是，请完成该过程。

创建一个仅包含以下代码的新脚本文件（php）：`<?php var_dump(session_save_path());?>`

如果得到 null 或空字符串，则运行它，然后执行此过程：

1.  首先在您的根文件夹中创建一个目录，将其命名为“xyz”或您想要的任何名称。
2.  使其可写，即`chmod 777`。
3.  转到开始会话的脚本，在开始会话之前将 session_save_path 更改为新创建的目录。IE：`session_save_path('pathToxyz');`

然后你就完成了。

如果会话设置为内存：不需要配置。他们只使用系统内存。在那种情况下，你永远不会遇到这个问题。

# php - 单页还是多页？

> ID：10278543
> 
> 赞同：0
> 
> 时间：2012-04-23T10:09:26.727
> 
> 标签：php, .htaccess

我想制作一个网络服务，用户可以在其中制作自己的页面。哪个是更好的解决方案：

一种。使用干净的 url 使用 get 变量在一页上执行所有内容

或者...

湾。为每个用户制作单独的 .php 文件

一页有500-1000个用户的全部流量有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:12:08.837

第二根本不是一个选择。*在动态网页*的上下文中没有任何意义

 *去第一个。
这就是世界上每个网站的运作方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:26:43.450

一种不同的方式来查找`Your Common Sense`所说的内容。

想象一下，您确实应用了第二个选项，然后您的网站突然像 facebook 一样蓬勃发展。你认为你会做什么，为每个用户创建数百万个页面。

这是最糟糕的概念之一^(^(*NO OFFENSE*))，为每个用户创建一个公共页面以登陆，根据他们控制内容和元素。*

# android-ndk - 如何在 Android 中运行 *.o 文件

> ID：10278544
> 
> 赞同：0
> 
> 时间：2012-04-23T10:09:29.950
> 
> 标签：android-ndk

我目前在 Linux 中用 C 语言编译了一组源代码，输出是一个 *.o 文件，它是一个目标文件。据说这会进行图像压缩。现在我想在 Android 中使用/测试它。

这可能吗？我只尝试了 Android NDK 开发人员方面的 NDK 示例。没有遇到任何关于如何做到这一点的参考资料。

提前致谢，佩马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:19:41.357

您不运行目标代码文件 (*.o)。您需要将其转换为可执行文件。为此，假设您使用的是 GCC，您将运行`gcc file1.o file2.o -o executable`它将具有 file1.o 和 file2.o 的两个文件程序转换为名为可执行文件的可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:29:01.903

[目标文件](http://en.wikipedia.org/wiki/Object_file)（以 .o 结尾）通常包含不完整的代码。例如，如果您的程序使用某个库在屏幕上打印某些内容以生成可执行文件，则必须将编译后的代码（.o 文件）与该库链接，以便在操作系统加载可执行文件时知道所有代码将会被使用。您可以使用[链接器](http://en.wikipedia.org/wiki/Linker_%28computing%29)（例如 Linux 中的 ld 或 Android 中的 /system/bin/linker）来执行此链接。正如 Jalfor 所指出的，在您的情况下，让 gcc 为您调用链接器会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:42:36.830

答案是肯定的。但是你必须做一些相当多的工作才能看到它在 Android 上运行。

1) 如果您在 Linux 上编译，则意味着正在为 x86 或 AMD 处理器构建目标文件或最终可执行文件（大多数情况下）。但大多数移动设备都在手机上运行 ARM 处理器。所以，虽然你有一个可执行文件，但如果它不是为 ARM Cpu 构建的，你将无法在 Android 中执行它。这正是 android NDK 所做的。

2）因此，我们必须再次为Android（ARM）构建相同的代码，为此我们需要一个交叉编译器和您正在谈论的目标文件的源代码。

3）如果你有可用的源代码，你可以再做两件事。

*   要将其包含在 JNI 文件夹中，请构建共享库，然后执行调用等操作。
*   使用 android NDK 将代码构建为可执行文件（请注意，您需要在代码中包含 main），然后使用 adb 在 Android 中推送可执行文件。

现在终于可以登录然后检查结果了。如果有任何不清楚的地方，请告诉我。我不介意解释。谢谢..

# jquery - jQuery中双引号和单引号有什么区别

> ID：10278545
> 
> 赞同：0
> 
> 时间：2012-04-23T10:09:30.623
> 
> 标签：jquery, jquery-selectors, quotes, double-quotes

> **可能重复：**
> [Javascript中单引号和双引号之间的区别](https://stackoverflow.com/questions/3149192/difference-between-single-quotes-and-double-quotes-in-javascript)

我在 HTML 标记的 id 属性中有一个文档：

我在 ID 选择器中阅读了[jQuery 点？](https://stackoverflow.com/questions/9930577/jquery-dot-in-id-selector)和[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)我意识到我应该添加 2 个反斜杠以转义“。”。

问题是当我使用时`$('#Q0\\.3')`，它可以工作。

但是当我使用时`$("#Q0\\.3")`，jQuery 没有找到该元素。

我认为 jQuery 中的双引号和单引号代表同一个东西，我错了吗？

谢谢。

# c# - C# Encoding.UTF8 弄乱了字节[]

> ID：10278546
> 
> 赞同：3
> 
> 时间：2012-04-23T10:09:32.167
> 
> 标签：c#, utf-8, character-encoding

我面临一个非常奇怪的问题，其中我有 byte[] 并且当我将它传递给 Convert.UTF8.GetString(byte[] bytes) 方法时，系统编码弄乱了我的字节并且只替换了几个特殊字节（我在我的系统中用作标记）到一些三个字符字符串表示。

```
[0] 70  byte
[1] 49  byte
[2] 45  byte
[3] 86  byte
[4] 49  byte
[5] 253 byte     <-- Special byte
[6] 70  byte
[7] 49  byte
[8] 45  byte
[9] 86  byte
[10]50  byte
[11]253 byte     <-- Special byte
[12]70  byte
[13]49  byte
[14]45  byte
[15]86  byte
[16]51  byte 
```

当我将上面的 byte[] 传递给 Encoding.UTF8.GetString(bytes) 方法时，我得到以下输出；

```
private Encoding _encoding = System.Text.Encoding.GetEncoding("UTF-8", new EncoderReplacementFallback("?"), new DecoderReplacementFallback("?"));       
_encoding.GetString(bytes)  "F1-V1�F1-V2�F1-V3" string 
```

实际值不应该有“�”，因为这意味着它无法编码并用“�”替换那些特殊字节。无论如何我可以解决这个问题，即转换为字符串并将特殊字节表示保留为单个字符。

我有以下特殊字节，我试图将其用作标记；

```
byte AM = (byte) 254
byte VM = (byte) 253
byte SM = (byte) 252 
```

您的帮助和意见将不胜感激。

谢谢，

--

希拉兹

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T10:11:39.747

您不能将这些特殊值用作 UTF-8 字符串中的标记，因为根据 UTF-8[编码规则](http://en.wikipedia.org/wiki/UTF-8#Description)，该字符串最终无效。

您*可以*偷偷地插入它们，然后*在*将数据馈送到可识别 UTF-8 的代码*（*如在那里，因此*非常*适得其反）。`Encoding.GetString`

 **更明智的选择是在字符串中简单地插入“特殊”UTF-8 编码字符。这在技术上需要（特别是如果您选择一个编码为 1 字节的字符，因为这些字符也更有可能出现在您的实际有效负载中）您还想出一个方案来在这些字符自然出现在您的有效负载中时对其进行*转义*.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:29:57.530

**标记之间**的数据只是 UTF-8 ，所以如果是我，我会先提取分隔部分**，**然后 UTF-8 分别解码每个部分，即通读查找**二进制**数据`byte[]`中的标记，给你3 个二进制块（70,49,45,86,49；70,49,45,86,50；70,59,45,86,51），然后解码为 3 个字符串。您不能 UTF-8 解码整个二进制序列，因为**它不是有效的 UTF-8**。

 ****但是，就个人而言，我会说在这里使用定界符是危险的。我可能会采用长度前缀方法，这样

*   我知道我不会不小心将分隔符和真实数据混为一谈
*   我可以比逐字节更有效地处理它

例如，如果我们使用“varint”长度前缀，那将是：

```
05,70,49,45,86,49,05,70,49,45,86,50,05,70,59,45,86,51 
```

其中`05`是“varint”长度，我们将其解释为 5 个字节；这意味着我们可以很好地处理：

```
// pseude code
while(!EOF) {
    int len = ReadVarint();
    var blob = ReadBytes(len);
    string s = Utf8Decode(blob);
    // ...
} 
```******

# android - 使用自定义 SimpleCursorAdapter 时 ListView 中的生涩滚动

> ID：10278549
> 
> 赞同：1
> 
> 时间：2012-04-23T10:09:39.143
> 
> 标签：android, android-widget

我正在使用复杂的`ListView`. 这是孩子有`ImageView`s 和`TextView`s。我正在重写 SimpleCursorAdapter 的 bindView() 方法来为这些小部件设置数据。这是代码：

```
public void bindView(View view, Context mContext, Cursor cursor) {
        super.bindView(view, mContext, cursor);
        String vdstatus = cursor.getString(6);
        String mbpath = sdpath + propmanager.mbActivePath();
        String vspath = cursor.getString(7);
        TextView status = (TextView) view.findViewById(R.id.status);
        TextView name = (TextView) view.findViewById(R.id.name);
        ImageView i = (ImageView) view.findViewById(R.id.icon);
        if (vdstatus == "false") {
            status.setTextColor(Color.RED);
        } else {
            status.setTextColor(Color.parseColor("#4B8A08"));
        }
        if (mbpath.equals(vspath)) {
            name.setTextColor(Color.RED);
        }
        switch (Integer.parseInt(cursor.getString(4))) {
        case 0: {
            Drawable drawable = mContext.getResources().getDrawable(
                    R.drawable.a2s_icon);
            i.setImageDrawable(drawable);
            break;
        }
        .....
        .....
        .....
        default: {
            Drawable drawable = mContext.getResources().getDrawable(
                    R.drawable.cid);
            i.setImageDrawable(drawable);
            break;
        }
        }
    } 
```

这是我设置适配器的方法：

```
 MatrixCursor cursor;
    cursor = datasource.getnameList();
    startManagingCursor(cursor);
    String[] from = { "name", "desc", "status", "path", "folder",
            BaseColumns._ID };
    int[] to = { R.id.name, R.id.desc, R.id.status, R.id.path };
    final CustomSCAdapter adapter = new CustomSCAdapter(
            MultiBootManager.this, R.layout.row, cursor, from, to);
    setListAdapter(adapter); 
```

我遇到的问题是滚动浏览`ListView`真的很生涩。我在这里发现了一些类似的问题，但没有一个答案对我有用。如何防止这种抖动？

# java - 从源所在的其他项目中访问文件

> ID：10278551
> 
> 赞同：0
> 
> 时间：2012-04-23T10:09:59.410
> 
> 标签：java

我有一个带有 .txt 文件的项目（项目源），我想从其他项目（项目调用者）访问该文件。调用者对源有依赖性。所以调用者应该将源代码视为 .jar。好吧，问题是，我必须访问这个 .jar 才能获取 .txt 文件，但我不能。我试过这样的想法：getClass().getResourceAsStream("classpath:/cc.txt"); 使用 InsputStream 和 getClass().getResource("cc.txt"); 使用 URL 对象，但我总是得到一个空值。我读过的所有论坛都谈到了这种访问方式。如何访问 .jar 文件以获取 .txt 文件？谢谢大家！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:19:51.033

以编程方式提取 ZIP/JAR 文件的内容。假设 jarFile 是要提取的 jar/zip 文件。destDir 是将被提取的路径：

```
java.util.jar.JarFile jar = new java.util.jar.JarFile(jarFile);
java.util.Enumeration enum = jar.entries();
while (enum.hasMoreElements()) 
{
    java.util.jar.JarEntry file = (java.util.jar.JarEntry) enum.nextElement();
    java.io.File f = new java.io.File(destDir + java.io.File.separator + file.getName());
    if (file.isDirectory())  // if its a directory, create it
    {
        f.mkdir();
        continue;
    }
    java.io.InputStream is = jar.getInputStream(file); // get the input stream
    java.io.FileOutputStream fos = new java.io.FileOutputStream(f);
    while (is.available() > 0)  // write contents of 'is' to 'fos'
    {  
       fos.write(is.read());
    }
    fos.close();
    is.close();
} 
```

[可以在这里找到相同的问题...](https://stackoverflow.com/questions/1529611/how-to-write-a-java-program-which-can-extract-a-jar-file-and-store-its-data-in-s)

# deployment - 从 LightSwitch 部署中删除区域文件

> ID：10278552
> 
> 赞同：3
> 
> 时间：2012-04-23T10:10:01.750
> 
> 标签：deployment, build, visual-studio-lightswitch

有什么方法可以删除 LightSwitch \bin 目录中的大量区域特定文件吗？...*除了手动*

我们只为本地部署，因此拥有各种语言/区域特定文件似乎是一种浪费，增加了构建和部署时间

# php - PHP循环限制次数

> ID：10278553
> 
> 赞同：-1
> 
> 时间：2012-04-23T10:10:03.420
> 
> 标签：php, loops, for-loop, limit

我必须将数据库记录中的所有电话号码提交到 URL，但我需要限制每次仅发送 300 个电话号码。

我需要一个能够运行以下场景的 php 脚本：

1.  从数据库中检索 2,000 条记录。
2.  循环所有行并将每个行保存到变量或其他内容中。（重要的）
3.  计数总计有 2,000 条记录。
4.  每次循环 300 条记录写入 URL。（很重要）
5.  提交网址（这部分无需解释）
6.  循环下 300 条记录以写入 URL，并重复此操作直到记录 2,000 条。

我相信在这种情况下，2,000 / 300 = 7 次循环，前 6 次有 300 条记录，最后一次只发送 200 条记录。

正如我上面提到的，循环 300 条记录非常重要，下一个循环能够知道从记录 301 开始直到 600，依此类推。

**已编辑**

下面是我的原始代码，但它正在读取所有电话号码并将它们全部输入我的 URL：

```
 $smsno = trim($_REQUEST['string_of_phone_number_eg_0123456;0124357;0198723']);
    $message = trim($_REQUEST['message']);

    $phoneNo = explode(";", $smsno);

    // ----------
    //
    // Need to count total $phoneNo, eg total is 2,000 phone numbers
    // Loop 300 times for the phone numbers, eg 001-300, 301-600, 401-900, ..., 1501-1800, 1801-2000
    // Every 300 records, eg $phoneStr =  '0123456;0124357;0198723;...' total 300 phone numbers in this string
    // Write into my URL:  $link = "http://smsexample.com/sms.php?destinationnumber=$phoneStr&messagetosms=$message";
    //
    // ---------- 
```

我正在从这里寻求解决方案，因为我不知道如何循环每 300 条记录并写入字符串，然后将此字符串扔到我的 URL。

我可以制作前 300 条记录，但是如何在前 300 条记录写入字符串并抛出到我的 url 后获取下 300 条记录，并等待执行第二次抛出到 url。

例如，

300 条记录的第一个循环：
$phoneStr = phoneNumber01;phoneNumber02;phoneNumber03;...;phoneNumber300
$link = "http://smsexample.com/sms.php?destinationnumber=$phoneStr&messagetosms=$message";

接下来 300 条记录的第二个循环
$phoneStr = phoneNumber301;phoneNumber302;phoneNumber303;...;phoneNumber600
$link = "http://smsexample.com/sms.php?destinationnumber=$phoneStr&messagetosms=$message";

等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:17:04.777

```
for ($i = 1; $i <= 2000; $i++)
{
    if ($i % 300 == 0 || $i == 2000)
    {
        //Make URL and send
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:15:59.310

```
// Per-request limit
$limit = 300;

// Get array of numbers
$numbers = explode(';', $_REQUEST['string_of_phone_number_eg_0123456;0124357;0198723']);

// Get message
$message = trim($_REQUEST['message']);

// Loop numbers
while ($numbers) {

  // Get a block of numbers
  $thisBlock = array_splice($numbers, 0, $limit);

  // Build request URL
  $url = "http://smsexample.com/sms.php?destinationnumber=".urlencode(implode(';', $thisBlock))."&messagetosms=".urlencode($message);

  // Send the request
  $response = file_get_contents($url);

} 
```

# jquery - 获取 iPad 上的 naturalWidth 值

> ID：10278554
> 
> 赞同：0
> 
> 时间：2012-04-23T10:10:09.650
> 
> 标签：jquery, image, ipad, image-size

有没有办法在 iPad 上获得 naturalWidth ？

**我想要达到的目标**

目前我正在开发一个测验应用程序，它有一个点区域问题类型。要回答这个问题，用户必须在图像上指出一个位置。该位置被提交到服务器，如果单击的位置在正确的区域内，服务器将返回一个布尔值。

它可以在所有浏览器上完美运行，如果图像不太大，它也可以在 ipad 上运行。当图像太大时，它会自动调整大小以适应屏幕。现在点击图像上的某个点会给出不同的坐标，然后它会保持原始大小。

我发现自动调整大小与 ipad 的资源限制有关。显然我无法阻止这一点，但这不是什么大问题。我只想知道调整大小使用了什么因素。

为了得到这个因子，我需要原始宽度和实际宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:24:01.817

我已经通过让服务器将图像的宽度作为 HttpHeader 发送来修复它（服务器端语言是 VB）

```
Dim objImage As Image = Image.FromFile(strFilePath.ToString())
context.Response.AddHeader("imagewidth", objImage.Width.ToString())
context.Response.ContentType = "text/plain" 
```

在下面，您会看到我如何在客户端检索它：

```
cacheImage.imageWidth = $.ajax( arguments[i] + '&returnsize=true', { async: false } ).getResponseHeader( 'imagewidth' ); 
```

arguments[i] 是以媒体 id 作为参数的媒体加载器的 url。

> 返回大小=真

我不需要每种媒体类型的宽度。只有当我在请求之后放置 returnsize=true 时，我才会得到媒体项的宽度。

# python - 可以集成 Vi(m) 的 Python 解释器外壳吗？

> ID：10278560
> 
> 赞同：14
> 
> 时间：2012-04-23T10:10:40.023
> 
> 标签：python, vi

我喜欢使用 bpython，但在 Ruby 中有一个名为 interactive_editor 的 gem，它可以将 Vi(m) 与 Ruby shell 结合起来，从而使开发过程更加舒适。interactive_editor 的一个很好的介绍：http: [//vimcasts.org/episodes/running-vim-within-irb/](http://vimcasts.org/episodes/running-vim-within-irb/)

是否有任何工具（如 Ruby 的 interactive_editor）可用于将 Python shell 与 Vi(m) 结合起来？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T10:20:55.390

你可以看看 vim-ipython vim 插件：

[https://github.com/ivanov/vim-ipython](https://github.com/ivanov/vim-ipython)

这需要您安装 ipython shell（但我还是建议您这样做，因为它为标准 python shell 添加了很多功能）。

如果您不想安装 ipython，我建议您查看适用于 vim 的 ConqueShell 插件：

[http://www.vim.org/scripts/script.php?script_id=2771](http://www.vim.org/scripts/script.php?script_id=2771)

这使您可以在 vim 中运行 shell。一旦你找到了 vim-ball，你需要做的就是

```
:ConqueTerm python 
```

直接在vim中获取python shell。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T01:49:01.697

我无法让 vim-ipython 工作，所以我制作了这个适用于 ConqueShell 的 .vimrc 解决方案：

```
imap <silent> <leader>m <Esc>Vy<C-w><C-w>p
nmap <silent> <leader>m Vy<C-w><C-w>p
vmap <silent> <leader>m y<C-w><C-w>p
imap <silent> <leader>n <Esc><C-w><S-w>']0j
nmap <silent> <leader>n <C-w><S-w>']0j 
```

在新的 Vim 屏幕和安装的 ConqueShell 中，键入`:ConqueTermSplit python`. 现在返回原始窗口（快捷方式为`<C-w><S-w>`）并输入一些 Python 代码。

要将光标下的行发送给解释器，请按`<leader>m`。我将领导者映射到逗号，所以这是一个非常简单的动作。要发送代码块，请在可视模式下突出显示一些行并执行`<leader>m`. 它的工作方式相同。

要返回您的脚本，请`<leader>n`转到您刚刚执行的内容之后的行。作为附带的好处，您还可以使用此命令快速从一个窗口移动到另一个窗口。

编辑（2-20-2015）：如果您使用 ipython 作为解释器，则需要运行`%autoindent`以关闭自动缩进以保留某些代码块的格式。干杯!

# php - 如何在 CentOS 6.2 上安装 PHP mbstring

> ID：10278561
> 
> 赞同：59
> 
> 时间：2012-04-23T10:10:41.943
> 
> 标签：php, linux, centos, mbstring

如何在 CentOS 6.2 上使用 PHP 安装 mbstring

我试过了：

```
$ sudo yum install php-mbstring

Loaded plugins: fastestmirror, security
Loading mirror speeds from cached hostfile
 * base: mirror.net.cen.ct.gov
 * extras: centos.aol.com
 * updates: mirrors.seas.harvard.edu
Setting up Install Process
No package php-mbstring available.
Error: Nothing to do 
```

但是没有找到包裹？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-23T10:39:27.877

请执行下列操作：

```
sudo nano /etc/yum.repos.d/CentOS-Base.repo 
```

在 section 下`updates`，注释掉 mirrorlist 行（在行`#`前放一个），然后在新行上写：

```
baseurl=http://centos.intergenia.de/$releasever/updates/$basearch/ 
```

现在尝试：

```
yum install php-mbstring 
```

（之后您可能想要取消注释镜像列表并注释掉 baseurl）

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-28T16:28:47.610

如果您有 cPanel 托管，您可以使用 Easy Apache 通过 shell 来执行此操作。这些是步骤。

1.  键入 Easy Apache 路径键入 Easy Apache 的路径

    > root@vps#### [~]# /scripts/easyapache

2.  不要对“可用的 cPanel 更新”说“是”。
3.  继续浏览默认设置的屏幕，直到进入“详尽的选项列表”。
4.  向下翻页，直到您看到列出的 Mbstring 扩展名并选择它。
5.  继续执行这些步骤并保存 Apache PHP 构建。

Apache 和 PHP 现在将重新构建以包含 mbstring 扩展。等待该过程完成约 10 到 30 分钟。该过程完成后，您现在应该在 phpinfo 中看到 Mbstring 扩展名。

有关更详细的步骤，请参阅 [使用 Easy Apache 安装 mbstring 扩展一文](http://www.inmotionhosting.com/support/website/general-server-setup/install-mbstring-easy-apache)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-05-15T02:04:09.607

请检查您的`/etc/yum.conf`文件，可能是排除`php`包。

`php*`您应该从此行中删除，以便下载`php-*`包：

```
exclude= courier* dovecot* exim* filesystem httpd* mod_ssl* mydns* php* 
```

您的服务器似乎有一些脚本，例如 cPanel

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-03-06T15:54:49.043

*确保你先更新你的 linux box

```
yum update 
```

如果有人仍然有这个问题，这是一个有效的解决方案：

> centos-release : rpm -q centos-release

**Centos 6.***

```
wget http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
rpm -ivh epel-release-6-8.noarch.rpm
wget http://rpms.famillecollet.com/enterprise/remi-release-6.rpm
rpm -Uvh remi-release-6*.rpm 
```

**Centos 5.***

```
wget http://ftp.jaist.ac.jp/pub/Linux/Fedora/epel/5/x86_64/epel-release-5-4.noarch.rpm
rpm -ivh epel-release-5-4.noarch.rpm
wget http://rpms.famillecollet.com/enterprise/remi-release-5.rpm
rpm -Uvh remi-release-5*.rpm 
```

然后只需执行此操作即可**更新**：

```
yum --enablerepo=remi upgrade php-mbstring 
```

或者这个**安装**：

```
yum --enablerepo=remi install php-mbstring 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-04-18T13:16:04.810

1.  找出 php 版本 -`php -v`
2.  搜索可用的 php 扩展 -`yum search php-`
3.  安装使用 -`yum install ea-php56-php-mbstring.x86_64`
4.  然后`httpd -k restart`

> 包名 - ea-php-php-mbstring.x86_64

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-23T10:18:25.913

yum install php-mbstring (根据[http://php.net/manual/en/mbstring.installation.php](http://php.net/manual/en/mbstring.installation.php) )

我认为您必须安装 EPEL 存储库[http://fedoraproject.org/wiki/EPEL](http://fedoraproject.org/wiki/EPEL)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-11T08:51:03.623

由于`yum install php-mbstring`那时`httpd -k restart`没有为我做，我认为应该编译[这些选项，如此](http://uk3.php.net/manual/en/mbstring.installation.php)[处所述](http://uk3.php.net/manual/en/install.unix.apache2.php)：

> 现在，配置和构建 PHP。在这里您可以使用各种选项自定义 PHP，例如将启用哪些扩展。运行 ./configure --help 以获取可用选项的列表。在我们的示例中，我们将使用 Apache 2 和 MySQL 支持进行简单的配置。
> 
> 如果您从源代码构建 Apache，如上所述，下面的示例将匹配您的 apxs 路径，但如果您以其他方式安装 Apache，则需要相应地调整 apxs 的路径。请注意，某些发行版可能会将 apxs 重命名为 apxs2。
> 
> ```
> cd ../php-NN
> ./configure --with-apxs2=/usr/local/apache2/bin/apxs --with-mysql --enable-mbstring
> make
> make install 
> ```
> 
> 如果您决定在安装后更改配置选项，则需要重新运行 configure、make 和 make 安装步骤。您只需要重新启动 apache 即可使新模块生效。不需要重新编译 Apache。
> 
> 请注意，除非另有说明，否则“make install”还将安装 PEAR、各种 PHP 工具（例如 phpize）、安装 PHP CLI 等。

虽然[这个页面](http://www.mediawiki.org/wiki/PHP_configuration)说它是可选的：

> **--enable-mbstring** 允许多字节字符串支持。这是可选的，因为如果不可用，将使用较慢的自定义代码。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-01T17:45:46.933

我以前也遇到过同样的问题。就我而言，我需要在 GoDaddy VPS 服务器上安装 php-mbstring 扩展。以上解决方案都不适合我。

我发现使用 GoDaddy 的 WHM（Web Hosting Manager）安装 PHP 扩展。任何使用 GoDaddy VPS 服务器的人都可以通过以下地址访问此页面。

> http://{Your_Server_IP_Address}:2087

在此页面上，您可以轻松找到可以帮助您安装/升级 php 组件和扩展的 Easy Apache 软件。您可以选择当前安装的配置文件并自定义然后配置配置文件。Easy Apache 的一切都是解释性的。

我记得我为 HostGator 服务器做了非常相似的事情，但我不记得我实际上是如何进行配置文件更新的。

**编辑：** 当您拥有支持 Web Hosting Manager 的服务器时，您可以在 WHM 上添加/更新/删除 php 扩展。在 godaddy 服务器上，甚至建议在 WHM 上更新 PHP ini 设置。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-20T15:02:22.457

以上均不适用于 godaddy 服务器 centOS 6、apache 2.4、php 5.6

相反，你应该

使用 EasyApache 安装 mbstring PHP 扩展

检查您是否已经通过 putty 或 ssh 拥有它

php -m | grep mbstring

[如果没有，意味着缺少 mbstring]

现在你需要去godaddy你的账户页面，

点击管理服务器，

打开whm-----搜索apache，

打开“easy apache 4”（我的案例）

现在你需要自定义当前安装的包，

经过

单击“当前安装的软件包...”旁边的顶行上的“自定义”按钮

搜索mbstring，

单击它旁边的开/关切换。

单击下一步，下一步，.... privision..done。

现在你应该有 mbstring

通过 putty(ssh) 再次检查

php -m | grep mbstring [应该看到 mbstring]

或者你可以在 phpinfo() 页面找到 mbstring

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-03T07:20:16.887

```
sudo yum install php<version>w-mbstring 
```

前任。须藤百胜安装php56w-mbstring

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-23T16:29:14.003

如果以上都不能帮助您，并且您可以选择，请尝试获取其中一个 rpm 文件，例如：

wget [http://rpms.famillecollet.com/enterprise/6/remi/x86_64/php-mbstring-5.4.45-2.el6.remi.x86_64.rpm](http://rpms.famillecollet.com/enterprise/6/remi/x86_64/php-mbstring-5.4.45-2.el6.remi.x86_64.rpm)

然后使用 rpm 安装它，忽略依赖项，如下所示：

rpm -i --nodeps php-mbstring-5.4.45-2.el6.remi.x86_64.rpm

希望能有所帮助。

# wcf - https 通过 WCF 中的 basicHttpBinding

> ID：10278570
> 
> 赞同：1
> 
> 时间：2012-04-23T10:11:08.723
> 
> 标签：wcf

我正在尝试让 https 在 WCF 中与 basicHttpBinding 一起使用。该服务似乎运行良好，但是当我尝试运行我的客户端并调用服务上的一种方法时，我得到以下异常：

无法为具有权限“sfs-111:20023”的 SSL/TLS 安全通道建立信任关系。

我在下面包含了我的代码和配置文件。如果有人可以提供帮助，我将不胜感激。

请注意，我是 WCF 的新手。

这是我的服务 APP.CONFIG：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>

    <!-- DEBUG - TURN ON TRACING -->
    <system.diagnostics>
        <sources>
            <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
                <listeners>
                    <add name="traceListener"
                            type="System.Diagnostics.XmlWriterTraceListener"
                            initializeData= "c:\tahseen\dd\WCFServer.svclog" />
                </listeners>
            </source>
        </sources>
    </system.diagnostics>

    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>

                <!-- BEHAVIOR FOR META DATA -->
                <behavior name="DeltaServiceBehavior">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceCredentials>
                        <windowsAuthentication includeWindowsGroups="false" allowAnonymousLogons="false" />
                    </serviceCredentials>
                    <dataContractSerializer maxItemsInObjectGraph="100000000" />
                </behavior>

                <!-- BEHAVIOR FOR TRANSPORT SECURITY -->
                <behavior name="SecureBehavior">
                    <serviceMetadata httpGetEnabled="true"/>
                    <serviceCredentials>
                        <clientCertificate>
                            <authentication certificateValidationMode="PeerTrust" />
                        </clientCertificate>
                        <serviceCertificate findValue="sfs-Test" x509FindType="FindBySubjectName" storeLocation="LocalMachine" storeName="My" />
                    </serviceCredentials>
                    <dataContractSerializer maxItemsInObjectGraph="100000000" />
                </behavior>

            </serviceBehaviors>
        </behaviors>

        <bindings>

            <!-- DEFINE BINDING -->
            <basicHttpBinding>
                <binding name="HttpBinding_AlphaSystem">
                    <security mode="Transport">
                        <transport clientCredentialType="Certificate" />
                    </security>
                </binding>
            </basicHttpBinding>

        </bindings>        
        <services>

            <!-- DEFINE SERVICE -->
            <service behaviorConfiguration="SecureBehavior" name="Alpha.Services.DeltaService.DeltaService">

                <!-- ENDPOINT FOR METADATA -->
                <endpoint address="mex" binding="basicHttpBinding" bindingConfiguration="" contract="IMetadataExchange" />

                <!-- ENDPOINT FOR DATA -->
                <endpoint address="" binding="basicHttpBinding" bindingConfiguration="HttpBinding_AlphaSystem" contract="Alpha.Services.DeltaService.IDeltaService"/>                    

                <!-- BASE ADDRESSES FOR SERVICE-->
                <host>
                    <baseAddresses>
                        <add baseAddress="http://SFS-111:20022/DeltaService" />
                        <add baseAddress="https://SFS-111:20023/DeltaService" />
                    </baseAddresses>
                </host>
            </service>

        </services>
    </system.serviceModel>
</configuration> 
```

这是我的客户端 APP.CONFIG：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.diagnostics>
        <sources>
            <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
                <listeners>
                    <add name="traceListener" type="System.Diagnostics.XmlWriterTraceListener" initializeData="c:\tahseen\dd\WCFClient.svclog"    />
                </listeners>
            </source>
        </sources>
    </system.diagnostics>

    <system.serviceModel>

        <!-- DEFINE SECURE BEHAVIOR -->
        <behaviors>
            <endpointBehaviors>
                <behavior name="ClientBehavior">
                    <clientCredentials>
                        <clientCertificate findValue="sfs-Client" x509FindType="FindBySubjectName" storeLocation="LocalMachine" storeName="My" />
                        <serviceCertificate>
                            <authentication certificateValidationMode="PeerTrust"/>
                        </serviceCertificate>
                    </clientCredentials>
                </behavior>
            </endpointBehaviors>
        </behaviors>

        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IDeltaService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" 
        bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="Transport">
                        <transport clientCredentialType="Certificate" realm="" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://sfs-111:20023/DeltaService" binding="basicHttpBinding" behaviorConfiguration ="ClientBehavior"
                bindingConfiguration="BasicHttpBinding_IDeltaService" contract="DeltaService.IDeltaService"
                name="BasicHttpBinding_IDeltaService">
                <identity>
                    <dns value="sfs-Test" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

这是我的服务代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using System.ServiceModel.Description;

namespace Alpha.Services.DeltaService
{
    public class DeltaService : IDeltaService
    {
        public int timesTwo(int n)
        {
            return n * 2;
        }
    }

    [ServiceContract]
    interface IDeltaService
    {
        [OperationContract]
        int timesTwo(int n);
    }

    public class App
    {
        public static void Main(string[] args)
        {
            //DeltaService service = new DeltaService();
            ServiceHost serviceHost = new ServiceHost(typeof(DeltaService));
            serviceHost.Open();

            Console.WriteLine("Press any key to exit");
            Console.ReadKey();

            serviceHost.Close();
        }
    }
} 
```

这是我的客户代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace WCFClient
{
    class Program
    {
        static void Main(string[] args)
        {
            DeltaService.IDeltaService service = new DeltaService.DeltaServiceClient();

            int result = service.timesTwo(5);

            Console.WriteLine(result);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T21:02:49.430

只是为了测试，尝试在客户端禁用 ssl 验证：

[http://webservices20.blogspot.com/2008/12/wcf-gotcha-disabling-ssl-validation.html](http://webservices20.blogspot.com/2008/12/wcf-gotcha-disabling-ssl-validation.html)

```
using System.Net;
using System.Net.Security;
using System.Security.Cryptography.X509Certificates;
...
ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(OnValidationCallback); 
...
public static bool OnValidationCallback(object sender, X509Certificate cert, X509Chain chain, SslPolicyErrors errors)
{ 
return true;
} 
```

# erlang - 如何检查函数对象是否有效

> ID：10278574
> 
> 赞同：2
> 
> 时间：2012-04-23T10:11:21.047
> 
> 标签：erlang

我想检查一个输入参数是否为函数对象。erlang 模块的`is_function`and`fun_info`不行，因为它们不知道该功能是否真的由模块导出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:21:29.157

我不确定我是否正确理解了您的问题，但如果您想了解是否从给定模块导出函数，您可以使用[erlang:function_exported/3](http://www.erlang.org/doc/man/erlang.html#function_exported-3)函数：

> 如果模块 Module 已加载并包含导出的函数 Function/Arity，则返回 true；否则为假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-24T02:23:36.177

要知道一个函数`sort/2`是否由模块导出`lists`，*是否已加载*（请参阅[Amiramix 注释](https://stackoverflow.com/questions/10278574/how-to-check-a-function-object-is-valid-or-not#comment21523782_10278727)），您可以使用：

```
lists:member({sort, 2}, lists:module_info(exports)). 
```

如果您不介意 Arity 功能，可以使用：

```
case lists:keyfind(sort, 1, lists:module_info(exports)) of
    {sort, _} -> true;
    false -> false
end. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:23:34.093

模块：module_info（出口）

[模块信息](http://www.erlang.org/doc/reference_manual/modules.html#id74109)

# javascript - 如何在新页面中打开链接，然后从第二页链接回第一页

> ID：10278578
> 
> 赞同：0
> 
> 时间：2012-04-23T10:11:42.010
> 
> 标签：javascript, jquery, html

我被要求实现一个网页，当您单击链接时会打开一个新的浏览器窗口（第 1 页）。新页面（第 2 页）将有一个链接，单击该链接将在第 1 页中打开一个新 url。这需要在 IE 6、8 和其他当前浏览器中理想地工作。

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:15:58.000

打开窗口：

```
window.open ("http://www.someurl.com/maypage","my window"); 
```

要从弹出窗口更改 url：

```
self.opener.location = "http://www.someurlcom/anotherpage"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:16:58.597

```
//Link in page 1
<a href="" onclick="window.open('someurl','page2'); return false;">open new window</a>

//Link in page 2
<a href="" onclick="opener.location.href='someurl'; return false;">show page in old window</a> 
```

# algorithm - 测试聚类算法的最佳方法

> ID：10278581
> 
> 赞同：5
> 
> 时间：2012-04-23T10:11:56.987
> 
> 标签：algorithm, cluster-analysis, hierarchical-clustering

测试聚类算法的最佳方法是什么？我正在使用带有停止标准的凝聚聚类算法。如何测试集群是否正确形成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T13:56:10.600

评估一个图可以聚集多少（在粗粒度级别上）的一个好的经验法则与“特征值差距”有关。给定一个加权图`A`，计算特征值并对它们进行排序（这是特征值谱）。绘制时，如果频谱在某个点有较大的跳跃，则有一个自然对应的块来划分图形。

下面是一个示例（在 numpy python 中），该示例显示，给定一个几乎块对角矩阵，在块数处的特征值谱中有很大的差距（`c`在代码中参数化）。请注意，矩阵排列（与标记图节点相同）仍然给出相同的光谱间隙：

```
from numpy import *
import pylab as plt

# Make a block diagonal matrix
N = 30
c = 5
A = zeros((N*c,N*c))
for m in xrange(c):
    A[m*N:(m+1)*N, m*N:(m+1)*N] = random.random((N,N))

# Add some noise
A += random.random(A.shape) * 0.1

# Make symmetric
A += A.T - diag(A.diagonal())

# Show the original matrix
plt.subplot(131)
plt.imshow(A.copy(), interpolation='nearest')

# Permute the matrix for effect
idx = random.permutation(N*c)
A = A[idx,:][:,idx]

# Compute eigenvalues
L = linalg.eigvalsh(A)

# Show the results
plt.subplot(132)
plt.imshow(A, interpolation='nearest')
plt.subplot(133)
plt.plot(sorted(L,reverse=True))

plt.plot([c-.5,c-.5],[0,max(L)],'r--')

plt.ylim(0,max(L))
plt.xlim(0,20)
plt.show() 
```

![在此处输入图像描述](../Images/aa3deaf40864040b1a2d4a86932268a1.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T17:34:53.040

这取决于*您*要测试的内容。

在测试您自己的已知算法实现时，您可能希望将结果与已知良好实现的结果进行比较。

分层聚类很难在质量方面进行测试，因为它是分层的。Rand index 等常用度量仅对严格分区有效。您可以从层次聚类中获得严格的分区，但是您需要固定要切割的高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T10:57:27.980

理想情况下，您拥有某种预先聚类的数据（[监督学习](http://en.wikipedia.org/wiki/Supervised_learning)）并在其上测试聚类算法的结果。只需计算正确分类的数量除以执行的分类总数即可获得准确度分数。

如果你在做[无监督学习](http://en.wikipedia.org/wiki/Unsupervised_learning)，那么真的没有办法评估你的算法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T17:27:30.403

有时，在存在已知且可能显而易见的构造答案的情况下构造输入数据是有用的。对于聚类算法，您可以构建具有 N 个聚类的数据，使得同一聚类中任意两点之间的最大距离小于不同聚类中任意两点之间的最小距离。另一种选择是生成许多不同的数据集，这些数据集可绘制为二维散点图，其中集群显而易见，然后将算法的结果与此结构进行比较，也许将集群移动在一起以查看算法何时无法看到他们。

鉴于您对特定聚类算法的了解，您可能会做得更好，但上述内容可能至少有一些机会从掩护中清除明显的错误。

# php - WordPress 发布后发布 HTML

> ID：10278597
> 
> 赞同：0
> 
> 时间：2012-04-23T10:12:58.263
> 
> 标签：php, wordpress, wordpress-theming

我正在为 WordPress 编写一个插件，我需要做的一项任务是在发布时将新帖子的 HTML 内容发送到电子邮件地址，我知道我可以在帖子之后使用某些挂钩来触发已保存，但有没有办法在应用了主题的情况下获取新页面/帖子的完整 HTML 内容？

我在帖子中有自定义字段，所以理想情况下我想从 URL 获取整个帖子，而不是重建所有字段然后以 HTML 格式发送。

任何帮助，将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T01:51:20.013

```
add_action('publish_post', 'email_post');
function email_post($postID)
{
    $post = get_post($postID);
    $content = $post->post_content;
    $content = apply_filters('the_content', $content);
    $content = str_replace(']]>', ']]>', $content);
    $mailto = 'youremail';
    $subject = 'New Post';
    if(mail($mailto, $subject, $content))
        return true;
    else
        return false;
} 
```

请务必设置您的标题或您可能需要正确填充电子邮件的任何其他内容。这是未经测试的，但它应该可以帮助您入门。

# c - C Typedef Struct / Union 自动转换

> ID：10278600
> 
> 赞同：1
> 
> 时间：2012-04-23T10:13:00.750
> 
> 标签：c

我有一个用于 3d 矢量的小型数学库，我试图“统一”它。

而不是为vector3f，vector3i，color3，angles等提供多个typedef结构......我试图将所有内容放在同一个结构中，如下所示：

```
typedef struct
{
    union
    {
            float x;
            float r;
            float ax;

            int   x_int;
    };

    union
    {        
            float y;
            float g;
            float ay;

            int   y_int;
    };

    union
    {
            float z;
            float b;
            float az;

            int   z_int;                
    };

} vec3; 
```

只要类型是浮动的，一切都很好，但是当它下降到 int 时，我有一些奇怪的值（这是可以理解的）。我的问题是：有没有办法在结构定义中直接/自动转换，或者我必须创建额外的函数来在 float 和 int 之间进行类型转换？

* * *

由于下面的答案，也许我应该将我原来的问题修改为以下内容：

什么是“统一”（统一我的意思是有 1 个结构）能够同时处理以下内容的最佳方式：

vector3f (float x,y,z) vector3i (int x,y,z) RGB (float r,g,b) RGB (unsigned char r,g,b) 欧拉角 (ax, ay, az)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:20:34.960

如果您的意思是要将 '360.0f' 放入联合的 float z 并具有 int z_int == 3，反之亦然， **则不能**。这不是联合的目的，3（整数）和 3.0（浮点值）的二进制表示是*不同*的。

但是，您可以删除 int 并将其中一个浮点数转换为 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:19:56.297

```
#include <stdio.h>
#include <stdlib.h>

typedef struct genericStruct
{
    void *valueOne;
    void *valueTwo;
}GS;

int main()
{
    GS *gs = malloc(sizeof(*gs));
    int valueInt = 10;
    float valueFloat = 3.141592653589;
    int *inputIntPtr = (int*)malloc(sizeof(int));
    float *inputFloatPtr = (float*)malloc(sizeof(float));
    void *voidPtr = NULL;
    *inputIntPtr = valueInt;
    *inputFloatPtr = valueFloat;
    voidPtr = inputIntPtr;
    gs->valueOne = voidPtr;
    int *outputIntPtr = (int*)malloc(sizeof(int));
    outputIntPtr = gs->valueOne;
    printf("Input ptr  = %d\n", *inputIntPtr);
    printf("Output ptr = %d\n", *outputIntPtr);
    voidPtr = inputFloatPtr;
    gs->valueTwo = voidPtr;
    float *outputFloatPtr = (float*)malloc(sizeof(float));
    outputFloatPtr = gs->valueTwo;
    printf("Input ptr   = %f\n", *inputFloatPtr);
    printf("output ptr  = %f\n", *outputFloatPtr);
    free(gs);
    free(inputIntPtr);
    free(inputFloatPtr);
    free(outputIntPtr);
    free(outputFloatPtr);
    return 0;
} 
```

这就是我使用 void 类型的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:03:45.050

这是我为您编写的一小段代码。它应该可以完成这项工作。我希望我能够做到您要求的...

```
typedef struct{

        void *ptr1;

        void *ptr2;

        void *ptr3;

}VEC;

main(){

        VEC v ;

        VEC *ptr;

        int a = 5;

        double b = 6;

        float c = 7;

        v.ptr1 = NULL;

        v.ptr2 = NULL;

        v.ptr3 = NULL;

        ptr = &v;

        v.ptr1 = (int *)&a;

        ptr->ptr1 = (int *)&a;

         v.ptr2 = (double *)&b;

        ptr->ptr2 = (double *)&b;

        v.ptr3 = (float *)&c;

        ptr->ptr3 = (float *)&c;

        printf("%d\n",*(int *)v.ptr1);

        printf("%d\n",*(int *)(ptr->ptr1));

        printf("%lf\n",*(double *)v.ptr2);

        printf("%lf\n",*(double *)(ptr->ptr2));

        printf("%f\n",*(float *)v.ptr3);

        printf("%f\n",*(float *)(ptr->ptr3));

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-23T10:27:19.670

或者将所有变量更改为 void 指针类型，然后将它们转换为浮点数或整数。可以吗？

# php - 如何在php中创建一个包含前四个星期的下拉列表

> ID：10278605
> 
> 赞同：2
> 
> 时间：2012-04-23T10:13:25.863
> 
> 标签：php, date

如何在 php.ini 中创建本周和前几周最多四个的下拉导航。 ![在此处输入图像描述](../Images/3ad07205996a4f6d4aedb24b1955b9b9.png)

```
$date = '04/24/20012';
$ts = strtotime($date);
$year = date('o', $ts);
$week = date('W', $ts);
for($i = 1; $i <= 7; $i++) {    
    $ts = strtotime($year.'W'.$week.$i);
    print date("m/d/Y l", $ts) . "\n";
} 
```

此代码用当前周填充下拉列表，但我想要的是用前四个星期填充下拉列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:31:13.707

```
for ($i = 0; $i <= 4; $i++)
{
    $weeks[] = date('m/d/Y', strtotime("-$i week", time()));
} 
```

给出：

```
array
  0 => string '04/23/2012' (length=10)
  1 => string '04/16/2012' (length=10)
  2 => string '04/09/2012' (length=10)
  3 => string '04/02/2012' (length=10)
  4 => string '03/26/2012' (length=10) 
```

**编辑：**如果您想要范围，请执行以下操作：

```
for ($i = 0; $i <= 4; $i++)
{
    $k = $i - 1;
    $weeks[] = date('m/d/Y', strtotime("-$i week")) . ' - ' .
               date('m/d/Y', strtotime("-$k week -1 day"));
} 
```

给出：

```
array
  0 => string '04/23/2012 - 04/29/2012' (length=23)
  1 => string '04/16/2012 - 04/22/2012' (length=23)
  2 => string '04/09/2012 - 04/15/2012' (length=23)
  3 => string '04/02/2012 - 04/08/2012' (length=23)
  4 => string '03/26/2012 - 04/01/2012' (length=23) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T22:39:48.507

如果你想在星期一开始你的一周（并在星期五结束），你可以这样做：

```
$this_monday = strtotime('monday this week');
for ($i = 0; $i <= 4; $i++)
{
    $k = $i - 1;
    $weeks[] = date('m/d/Y', strtotime("-$i week", $this_monday)) . ' - ' .
               date('m/d/Y', strtotime("-$k week -3 day", $this_monday));
} 
```

# c# - Compact Framework - 获取所有打开的表单

> ID：10278606
> 
> 赞同：1
> 
> 时间：2012-04-23T10:13:29.277
> 
> 标签：c#, forms, compact-framework, windows-ce

我正在制作一个 Windows CE 应用程序，用户可以在其中更改运行时的 GUI 语言。我在表单的 Load 事件中实现了自己的翻译逻辑。

现在，我想在用户更改语言时更新所有打开的表单。有没有办法（在 Compact Framework 中！！）检索应用程序的所有打开形式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:26:01.133

您可以创建一个用于实例化所有表单的 FormManager 类。这将使经理有机会通过侦听它们的 Close 事件来跟踪这些表单的生命周期，并在它们使用公共接口（比如使用 OnUiLanguageChanged 方法的接口）时集体调用它们的方法。

或者，您可以在应用程序中创建一个对象，该对象公开每个 Form 可以订阅的事件。这样，您就不需要知道哪些表单是打开的。Intsead 所有打开的表单只要打开，就会监听 UiLanguageChanged 事件，如果他们收到它，他们可以适当地更新自己。

# python - 用字典理解替换两个嵌套循环

> ID：10278608
> 
> 赞同：1
> 
> 时间：2012-04-23T10:13:31.120
> 
> 标签：python, dictionary, list-comprehension

有没有办法用字典理解替换以下代码？

```
d = {}

for i in xrange(A):
    for j in xrange(B):

         d[(i, j)] = f(i, j) 
```

如果这有什么不同，我正在使用 Python2.7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:15:21.200

```
d = {(i,j):f(i,j) for i in xrange(A) for j in xrange(B)} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:56:51.793

将嵌套循环替换为[`itertools.product`](http://docs.python.org/library/itertools.html#itertools.product)：

```
from itertools import product
d = { p: f(*p) for p in product(range(A), range(B))} 
```

# javascript - getSelection 不适用于 Chrome 中的图像

> ID：10278609
> 
> 赞同：3
> 
> 时间：2012-04-23T10:13:42.633
> 
> 标签：javascript, iframe, webkit, wysiwyg, getselection

在我的网站中，我使用的是使用 iframe 的 WYSIWYG 编辑器。

当我通过双击选择文本以添加链接时，在 Chrome、Safari 和 Firefox 中，所选文本是正确的文本并添加了链接。

但是，当我单击图像时，选择仅在 Firefox 中完成。Chrome 和 Safari 有一个空选择，为了选择图像并在其上添加链接，我必须将鼠标拖到它上面，就像手动选择一样。

我的代码是：

```
 var sel = parent.document.getElementById('myframe').contentWindow.document.getSelection();

 if (sel.rangeCount > 0) {
    var range = sel.getRangeAt (0);
    var docFragment = range.cloneContents ();
    var tmpDiv = document.createElement ("div");
    tmpDiv.appendChild (docFragment);
    selHTML = tmpDiv.innerHTML;
 }

 if (selHTML != '') {
     parent.document.getElementById('myframe').contentWindow.document.execCommand(id,false,value);
 } 
```

有没有办法解决这个问题？

提前致谢。

我根据@Tim 的建议将代码更改为该代码：

```
 var iframeWin = parent.document.getElementById('myframe').contentWindow;
 var iframeDoc = iframeWin.document;
 var sel = iframeWin.getSelection();
 var range = iframeDoc.createRange();
 var referenceNode = document.getElementsByTagName("img").item(0);
 range.selectNode(referenceNode);

 sel.removeAllRanges();
 sel.addRange(range);
parent.document.getElementById('myframe').contentWindow.document.execCommand(id,false,value); 
```

但仍然无法正常工作。还有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:33:12.427

您可以使用`dblclick`事件手动执行此操作，但要小心破坏您在非 WebKit 浏览器中获得的常规图像大小调整句柄。

现场演示：http: [//jsfiddle.net/x49hv/3/](http://jsfiddle.net/x49hv/3/)

代码：

```
var iframeWin = parent.document.getElementById('myframe').contentWindow;
var iframeDoc = iframeWin.document;

// Prevent errors in IE < 9, which does not support DOM Range and Selection
if (iframeWin.getSelection && iframeDoc.createRange) {
    iframeDoc.ondblclick = function(e) {
        if (e.target.nodeName.toLowerCase() == "img") {
            var sel = iframeWin.getSelection();
            var range = iframeDoc.createRange();
            range.selectNode(e.target);
            sel.removeAllRanges();
            sel.addRange(range);
        }
    };
} 
```

# c# - 提交到数据库的数据类型

> ID：10278610
> 
> 赞同：0
> 
> 时间：2012-04-23T10:13:44.067
> 
> 标签：c#, wcf, windows-phone-7

我通过 WCF 服务将文本框和复选框的内容发送到我的数据库。

到目前为止，我有

*   fNameTxtBox.Text, - 字符串
*   (日期时间) BirthDate.Value, - System.DateTime
*   toggle1.IsChecked, - bool

但是如果数据类型是 int 会发生什么？

不幸的是，自动完成功能对我没有帮助，当然它也不接受`.Text`作为结局。

任何人都可以伸出援助之手，让我知道这将是什么？

**编辑：**

这是我正在努力完成的完整声明。我正在寻找 ownerTextBox 的结尾，当源是 WP7 应用程序上的文本框时，该方法要求它是一个 int：

```
 private void addAccountBtn_Click(object sender, RoutedEventArgs e)
    {
    _ServiceClient.AddDriverAsync(fnameTxtBox.Text, snameTxtBox.Text, (DateTime)BirthDate.Value, phonemobNumBox.Text, toggle1.IsChecked, toggle2.IsChecked, toggle3.IsChecked, toggle4.IsChecked, toggle5.IsChecked, toggle6.IsChecked, toggle7.IsChecked, toggle8.IsChecked, toggle9.IsChecked, toggle10.IsChecked, toggle11.IsChecked, toggle12.IsChecked, toggle13.IsChecked, toggle14.IsChecked, toggle15.IsChecked, ownerTextBox.????);
    } 
```

即更换???? 以正确的结尾，或重新格式化该部分以使其正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:17:03.667

您需要在客户端上执行验证，以确保永远不会向您的服务发送无效值。您可以通过检查该值是否为整数来做到这一点，如果不是则显示一条消息。仅当满足验证条件时才将数据发送到您的服务。

```
public void OnButtonClick(object sender, EventArgs e) {
    int value;

    bool isValid = int.TryParse(textBox.Text, out value);

    if (isValid) {
        // send to WCF
    }
    else {
        // display a message
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:17:07.997

您将需要使用 int 类解析值，例如

```
int.Parse(myTextBox.Text) 
```

请注意，`int.Parse`如果值不能表示为整数，则会引发异常，因此您可能需要执行适当的验证或异常处理。查看[TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)方法系列。

[您可能会发现阅读Casting、Type Conversion 和 Parsing](http://msdn.microsoft.com/en-us/library/ms173105.aspx)很有用。

使用您发布的源代码，您可以将其更改为：

```
private void addAccountBtn_Click(object sender, RoutedEventArgs e)
{
    _ServiceClient.AddDriverAsync(
        fnameTxtBox.Text, <snip_lots_of_arguments>, 
        toggle15.IsChecked, 
        int.Parse(ownerTextBox.Text)); //I've only changed the very last bit here
} 
```

# xpages - 如何以编程方式将表单转换为 xpages？

> ID：10278614
> 
> 赞同：0
> 
> 时间：2012-04-23T10:13:57.920
> 
> 标签：xpages

我需要以编程方式将 Notes Form 转换为 Xpage 吗？

如果有人知道，请帮助我。提前致谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T10:30:48.483

GBS有一个变压器可以做到这一点：

[http://www.gbs.com/en/GBS-Xcelerator-Suite](http://www.gbs.com/en/GBS-Xcelerator-Suite)

或者一篇关于如何做到这一点的文章（不是程序化的）：

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPages_with_large_notes_forms](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPages_with_large_notes_forms)

但是，我会看以下类似的文章，这些文章争论做这样的事情是否错过了 XPages 的意义，以及重写并获得 XPages 而不是混合的全部优势是否有好处。

[http://www.geniisoft.com/showcase.nsf/archive/20090101-0857](http://www.geniisoft.com/showcase.nsf/archive/20090101-0857)

# android - 获取自己的位置

> ID：10278615
> 
> 赞同：0
> 
> 时间：2012-04-23T10:13:59.143
> 
> 标签：android, gps, location

> **可能重复：**
> [如何在 Android 中以编程方式获取当前 GPS 位置？](https://stackoverflow.com/questions/1513485/how-do-i-get-the-current-gps-location-programmatically-in-android)

下面有一个代码..这会给我自己的位置..？

```
public class MyLocationListener implements LocationListener {  

public static double latitude;  
public static double longitude;  

public void onLocationChanged(Location loc)  
{  
    loc.getLatitude();  
    loc.getLongitude();  
    latitude=loc.getLatitude();  
    longitude=loc.getLongitude();  
}  

public void onProviderDisabled(String provider)  
{  
    //print "Currently GPS is Disabled";  
}  
public void onProviderEnabled(String provider)  
{  
    //print "GPS got Enabled";  
}  
public void onStatusChanged(String provider, int status, Bundle extras)  
{  
}  
} 
```

我知道这已经被问过好几次了。请帮我写代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:26:50.977

您可以使用此代码开始列出 GPS 更新并对收到的数据进行处理。它还在日志文件中打印消息以便于调试。请注意，**此函数不返回任何结果，它只开始收听 GPS**。结果将在稍后`// do something here with the new location data`部分提供，届时您可以将它们保存在某个地方。

```
private void getGpsData() {
    locationManager = (LocationManager) owner.getSystemService(Context.LOCATION_SERVICE);

    locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            Log.i(TAG, "location change:" + location.toString());

            String longitude = "Londitude: " + location.getLongitude();
            String latitude = "Latitude: " + location.getLatitude();

            if( location.hasAccuracy() ) {  // good enough?
                // do something here with the new location data
                ....
                //
                Log.i(TAG, "GPS listener done");
                locationManager.removeUpdates(this);    // don't forget this to save battery
            }
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            Log.i(TAG, provider + " status:" + status);
        }

        public void onProviderEnabled(String provider) {
            Log.i(TAG, provider + " enabled");
        }

        public void onProviderDisabled(String provider) {
            Log.i(TAG, provider + " disabled");
        }
    };
    Log.i(TAG,"GPS listener started");
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener );
} 
```

# iphone - UIsegment Control中如何为每个segment设置图片

> ID：10278619
> 
> 赞同：1
> 
> 时间：2012-04-23T10:14:33.117
> 
> 标签：iphone

我正在开发一个应用程序。我需要在段控件中为段设置图像。所以请告诉我如何做那个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:19:39.640

使用 `[segmentedControl setImage: forSegmentAtIndex: ];` 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:19:55.780

只需为索引设置一个图像

```
[segmentedC setImage:[UIImage imageNamed:@"your image"] forSegmentAtIndex:1]; 
```

# apache - Apache Camel：从数据库路由到 JMS 端点的 GB 数据

> ID：10278621
> 
> 赞同：1
> 
> 时间：2012-04-23T10:14:40.153
> 
> 标签：apache, apache-camel

我现在在骆驼中做了一些小项目，但我很难理解的一件事是在骆驼路线中消费时如何处理大数据（不适合内存）。

我有一个数据库，其中包含我想使用骆驼路由的几 GB 的数据。显然，将所有数据读入内存不是一种选择。

如果我将其作为一个独立的应用程序来执行，我将拥有对数据进行分页并将块发送到我的 JMS 端点的代码。我想使用骆驼，因为它提供了一个很好的模式。如果我从文件中消费，我可以使用 streaming() 调用。

我还应该使用 camel-sql/camel-jdbc/camel-jpa 还是使用 bean 从我的数据库中读取数据。

希望大家还在我身边。我对 Java DSL 更熟悉，但如果有人能提供任何帮助/建议，我将不胜感激。

**更新：2012 年 5 月 2 日**

所以我有一些时间来解决这个问题，我认为我实际上在做的是滥用 Producer 的概念，以便我可以在路线中使用它。

```
public class MyCustomRouteBuilder extends RouteBuilder {

    public void configure(){
         from("timer:foo?period=60s").to("mycustomcomponent:TEST");

         from("direct:msg").process(new Processor() {
               public void process(Exchange ex) throws Exception{
                   System.out.println("Receiving value" : + ex.getIn().getBody() );
               }
         }
    }

} 
```

我的制作人如下所示。为清楚起见，我没有包含 CustomEndpoint 或 CustomComponent，因为它似乎只是一个薄包装器。

```
public class MyCustomProducer extends DefaultProducer{ 

    Endpoint e;
    CamelContext c;

    public MyCustomProducer(Endpoint epoint){
          super(endpoint)   
          this.e = epoint;
          this.c = e.getCamelContext();
    }

    public void process(Exchange ex) throws Exceptions{

        Endpoint directEndpoint = c.getEndpoint("direct:msg");
        ProducerTemplate t = new DefaultProducerTemplate(c);

        // Simulate streaming operation / chunking of BIG data.
        for (int i=0; i <20 ; i++){
           t.start();
           String s ="Value " + i ;                  
           t.sendBody(directEndpoint, value)
           t.stop();         
        }
    }
} 
```

首先，上面看起来不是很干净。执行此操作的最简洁方法似乎是通过计划的石英作业填充 jms 队列（代替直接：msg），然后我的骆驼路线会使用该作业，以便我可以更灵活地控制骆驼中收到的消息大小管道。但是，我非常喜欢将基于时间的激活设置为 Route 的一部分的语义。

有没有人对最好的方法有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:21:23.823

据我了解，您需要做的就是：

```
from("jpa:SomeEntity" + 
    "?consumer.query=select e from SomeEntity e where e.processed = false" +
    "&maximumResults=150" +
    "&consumeDelete=false")
.to("jms:queue:entities"); 
```

`maximumResults`定义每次查询获得的实体数量的限制。

实体实例处理完毕后，需要设置它`e.processed = true;`，`persist()`使实体不再被处理。

一种方法是使用`@Consumed`注释：

```
class SomeEntity {
    @Consumed
    public void markAsProcessed() {
        setProcessed(true);
    }
} 
```

另一件事，您需要注意的是如何在将实体发送到队列之前对其进行序列化。您可能需要在 from 和 to 之间使用**浓缩器。**

# flotr - 如何在 fltr2 条形堆栈上添加标记（标签）？

> ID：10278628
> 
> 赞同：1
> 
> 时间：2012-04-23T10:15:17.357
> 
> 标签：flotr

我用的是 Flotr2，我在这里写了一个测试。 [http://jsfiddle.net/yKqXM/](http://jsfiddle.net/yKqXM/)

如果我想在每个条形堆栈上显示标签，我应该使用“标记”类型吗？以及如何使用它。我是 flotr2 的新手，你能给我一篇好的学习文章或文档，以便我学习它。对不起，如果这个问题很愚蠢，但我对寻找这个例子感到沮丧。

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:48:32.073

是的，您可以使用“标记”属性。您实际上可以将此片段放置在条类型之后（您可以同时使用两者）：

```
markers: {
  show: true,
  position: 'ct',
}, 
```

但是，这有一个小问题。Flotr2 不尊重标记的堆叠位置，因此标记标签最终会出现在错误的位置。

为了解决这个问题，创建一些作为堆栈总和的虚拟数据集，并移动“条”和“标记”以直接在单独的数据源上指定。列出数据后的位只是每个数据源的“默认”模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T12:39:08.570

标记有许多非常有用的选择。请参阅库源。

```
Flotr.addType('markers', {
    options: {
      show: false,           // => setting to true will show markers, false will hide
      lineWidth: 1,          // => line width of the rectangle around the marker
      color: '#000000',      // => text color
      fill: false,           // => fill or not the marekers' rectangles
      fillColor: "#FFFFFF",  // => fill color
      fillOpacity: 0.4,      // => fill opacity
      stroke: false,         // => draw the rectangle around the markers
      position: 'ct',        // => the markers position (vertical align: b, m, t, horizontal align: l, c, r)
      verticalMargin: 0,     // => the margin between the point and the text.
      labelFormatter: Flotr.defaultMarkerFormatter,
      fontSize: Flotr.defaultOptions.fontSize,
      stacked: false,        // => true if markers should be stacked
      stackingType: 'b',     // => define staching behavior, (b- bars like, a - area like) (see Issue 125 for details)
      horizontal: false      // => true if markers should be horizontal (For now only in a case on horizontal stacked bars, stacks should be calculated horizontaly)
  } 
```

# ruby-on-rails - Rails3 以三种方式执行计算有很多通过关系

> ID：10278636
> 
> 赞同：0
> 
> 时间：2012-04-23T10:15:54.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有三个模型：位置>热点>帐户

在我的位置模型中，我有这个：

```
has_many :hotspots
has_many :accounts, :foreign_key => :calledstationidclean, :through => :hotspots 
```

我正在尝试显示每个位置的帐户模型中的一些摘要数据。

以下工作正常：

```
 scope :location_history, lambda { |id|
                               joins('INNER JOIN hotspots b ON locations.id = b.location_id INNER JOIN account ON b.mac = account.calledstationidclean')
                               .where(:id => id)
                               .select("count(locations.id) AS sessions_count, sum(account.acctoutputoctets) AS downloads, sum(account.acctinputoctets) AS uploads, count(distinct account.callingstationid) AS unique_user")
                            } 
```

但我需要进行一些计算，但我不知道该怎么做。

通常，在帐户模型中，我可以执行以下操作：

```
 def self.session_time
   Account.sum("acctsessiontime")
 end

 def self.average_session
   self.session_time / Account.count
 end 
```

我怎样才能在我的位置模型中做类似的事情 - 并且只显示我正在查看的特定位置的信息？我真的需要运行一个联接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:35:33.967

是的，您将不得不加入。

```
 scope :location_history,
        lambda { |id| joins(:hotspots, :accounts).where(:id => id).
                      select("sum(account.acctsessiontime) as acctsessiontime, count(locations.id) AS sessions_count, sum(account.acctoutputoctets) AS downloads, sum(account.acctinputoctets) AS uploads, count(distinct account.callingstationid) AS unique_user")
               } 
```

顺便说一句，您可以使用一个组并将所有这些与来自位置的记录结合起来。

```
 scope :with_history,
        lambda { |id| joins(:hotspots, :accounts).where(:id => id).
                      select("locations.*, sum(account.acctsessiontime) as acctsessiontime, count(locations.id) AS sessions_count, sum(account.acctoutputoctets) AS downloads, sum(account.acctinputoctets) AS uploads, count(distinct account.callingstationid) AS unique_user")
               } 
```

这将返回具有所有 Location 字段的 Location 对象，以及您正在执行的聚合。

# c++ - 不带函数参数的可变参数模板

> ID：10278640
> 
> 赞同：10
> 
> 时间：2012-04-23T10:15:59.730
> 
> 标签：c++, templates, c++11, variadic-templates, function-parameter

我可以使用可变参数模板而不使用模板参数作为函数参数吗？

当我使用它们时，它会编译：

```
#include <iostream>
using namespace std;

template<class First>
void print(First first)
{
    cout << 1 << endl;
}

template<class First, class ... Rest>
void print(First first, Rest ...rest)
{
    cout << 1 << endl;
    print<Rest...>(rest...);
}

int main()
{
    print<int,int,int>(1,2,3);
} 
```

但是当我不使用它们时，它不会编译并抱怨模棱两可：

```
#include <iostream>
using namespace std;

template<class First>
void print()
{
    cout << 1 << endl;
}

template<class First, class ... Rest>
void print()
{
    cout << 1 << endl;
    print<Rest...>();
}

int main()
{
    print<int,int,int>();
} 
```

不幸的是，我想作为模板参数提供的类是不可实例化的（它们具有在模板函数内部调用的静态函数）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-23T10:38:06.783

```
template<class First> // 1 template parameter
void print()
{
    cout << 1 << endl;
}

#if 0
template<class First, class ... Rest> // >=1 template parameters -- ambiguity!
void print()
{
    cout << 1 << endl;
    print<Rest...>();
}
#endif

template<class First, class Second, class ... Rest> // >=2 template parameters
void print()
{
    cout << 1 << endl;
    print<Second, Rest...>();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T10:26:59.103

使其成为一种类型。

```
template <typename... Ts>
struct print_impl;

template <typename T>
struct print_impl<T> {
    static void run() {
        std::cout << 1 << "\n";
    }
};

template <typename T, typename... Ts>
struct print_impl<T, Ts...> {
    static void run() {
        std::cout << 1 << "\n";
        print_impl<Ts...>::run();
    }
};

template <typename... Ts>
void print() {
    print_impl<Ts...>::run();
}

int main() {
    print<int, int, int>();
    return 0;
} 
```

# android - 搜索android代码咀嚼内存

> ID：10278646
> 
> 赞同：0
> 
> 时间：2012-04-23T10:16:27.250
> 
> 标签：android, memory

我想调试我的应用程序。我希望一些软件或代码可以消耗内存并使我的活动重新创建。谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:11:21.830

只需旋转屏幕（例如，`<Ctrl>-<F11>`在 Windows 或 Linux 上）以强制更改配置，这将导致 Android 破坏并重新创建您的活动。

在您的进程中“咀嚼内存”只会导致`OutOfMemoryError`.

# android - 是否可以在 Tomcat 服务器中使用 XMPP 模块？

> ID：10278649
> 
> 赞同：3
> 
> 时间：2012-04-23T10:16:30.187
> 
> 标签：android, tomcat, xmpp, push-notification

我在这里发布这个是因为我在程序员 stackexchange 上创建的线程没有得到任何答案，我需要一个相当快的答案，所以我们开始吧：

对于一个学校项目，我们希望在我们的 Android 应用程序中实现类似推送的技术，我们需要将推送消息从服务器 (Tomcat) 发送到电话 (Android)。

在做了一些研究之后，我发现 XMPP 将是实现这种推送通知的一个不错的选择，现在我的问题是我应该如何将它与我们的 Tomcat 服务器集成，所有的信息和事件都将在其中发生，以及我们所有的其他页面是。

是否有可能在 Tomcat 内部运行 XMPP 服务器或模块，或者我可以构建自己的轻量级模块（我在想像 servlet 之类的东西）来处理这个问题？

如果您对如何实现推送通知有任何更好的想法，我会很高兴听到它们，无论是使用与 XMPP 完全不同的方法（我已经研究过长轮询、MQTT 和其他一些东西）还是其他方式将解决方案集成到 Tomcat 中。

我们的要求是我们必须使用 Tomcat 和 Android 2.1（所以 C2DM 不是一个选项）并在它们之间设置推送通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:16:57.583

您可能可以在 Tomcat 中运行一些服务器，但我认为您不会从 XMPP 的设置中真正获得任何收益。实际上，您将在另一台服务器内部运行一台服务器。

我可以看到的唯一优势是，如果您想从其他 Web 应用程序访问服务器内部，但为此我要么将 Web 应用程序设为另一个客户端，要么在 Web 应用程序的 xmpp 服务器中构建自定义通信模块可用于在标准 XMPP 之外进行通信。

# android - Android：纠正 Lint 警告有用吗？

> ID：10278651
> 
> 赞同：1
> 
> 时间：2012-04-23T10:16:41.007
> 
> 标签：android, seo, android-lint

我已经在 Google Play 上构建并发布了我的应用程序，一切正常。但我想知道如何提高我在市场上的知名度，如何出现在第一页......

所以这是我的问题，

**我是否必须更正出现在 Lint 警告面板（在 Eclipse 中）中的每个小错误才能处于更好的位置，或者它是否无用？**

我一直在网上寻找有关这方面的资源，但我找不到真正有趣的资源。你们知道一个很好的博客来解释如何首先出现在市场上（或者至少，不在 1234555... 页面上）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:59:58.697

[除了广告之外，这个页面](http://www.marketandroidapps.com/advertising/how-to-get-your-application-featured-on-android-market/)上还有一些关于“如何让你的应用程序成为特色”的有用建议，基本上你必须制作一个完美无瑕的应用程序，它使用了很多谷歌 API 功能并且在用户中很受欢迎。

更正 Lint 警告很好，因为它使您的应用程序更加稳定，但不会直接影响您的市场知名度。

如果您需要更多资源，请在 Google 中搜索“在 android 市场上获得特色”，它可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T11:14:20.077

纠正 Lint 警告将使您成为更好的程序员。那不是没用的。

# asp.net-mvc - HttpPost 上的模型是如何填充的？

> ID：10278659
> 
> 赞同：0
> 
> 时间：2012-04-23T10:17:02.017
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我`SomeModel`的定义为：

```
public class SomeModel
{
   public string property1 { get; set }
   public bool property2 { get; set; }
} 
```

我有一个动作：

```
public ActionResult Edit(int id)
{
    SomeModel model = new SomeModel();
    //... populate model ...
    return View(model);
} 
```

假设在视图中`property1`and`property2`被实例化为`@Html.EditorFor`，在这种情况下`property1`将呈现为 a`<input type='text'>`并且`property2`将是 a `<input type='checkbox'>`。

如果我有以下控制器操作来处理来自编辑表单的提交：

```
[HttpPost]
public ActionResult Edit(int id, SomeModel model, FormCollection collection)
{
} 
```

如果有的话，如何填充参数模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:22:21.187

如果你使用类似的东西

```
[HttpPost]
public ActionResult Action(SomeModel model)
{
    //do something
} 
```

如果您在视图中使用标准的 Html.EditorFor 语法，所有模型绑定都将为您处理，正如您所暗示的那样。

```
@Html.EditorFor(model => model.Property1)
@Html.EditorFor(model => model.Property2) 
```

更多关于模型绑定[在这里](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)

# c# - 需要从 C# 中的字符串中提取字段

> ID：10278668
> 
> 赞同：1
> 
> 时间：2012-04-23T10:17:36.990
> 
> 标签：c#, string, operation

我已经从字符串中提取了 3 个可用字段。没有通用的分隔符，可以有空格和制表符。

首先，我正在做的是将所有双空格和制表符替换为 '**'

给定字符串：

续 = Gallipelle 04/04/2012 16.03.03 5678

我在用：

cont.Replace(" ", "**").Replace(" ", "**").Replace(" ", "**").Replace("**", "").Trim()

答案变成：

****** Gallipelle******04/04/2012 16.03.03************************ 5678**** *

方法是否正确？我如何从这里提取东西？我只需要字符串数据类型的所有提取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:19:39.703

只需使用[`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)：

```
var fields = cont.Split(new[] { " ", "\t" },
                        StringSplitOptions.RemoveEmptyEntries); 
```

添加`StringSplitOptions.RemoveEmptyEntries`确保如果有多个连续的制表符和/或空格，它们在提取结果时将“计为一个”。

另一种选择是使用正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:05:04.197

您可以使用正则表达式组来找出三个值名称、日期、数字。

组定义为 (?<group_name><regex_expr>)

所以你可以写

```
 Regex regex = new Regex("(?<name>(\\S*))(\\s*)(?<date>((\\S*)\\s(\\S*)))(\\s*)(?<number>(\\d*))");
            Match match = regex.Match(yourString);
            if (match.Success)
            {
                string name = match.Groups["name"].Value;
                string date = match.Groups["date"].Value;
                string number = match.Groups["number"].Value;
            } 
```

\s* 匹配包含制表符的空格序列。\S* 匹配非空白字符序列。\d* 匹配数字序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:19:48.223

```
(new Regex("\\s+")).Split(yourstring) 
```

[http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T10:21:08.020

```
var myText="cont = Gallipelle 04/04/2012 16.03.03 5678";
var splitString=myText.split(" ");

// splitString[1] == Gallipelle 
// splitString[2] ==  04/04/2012
// splitString[3] == 16.03.03 
// splitString[4] == 5678 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T10:23:14.370

不。不需要用任何其他分隔符替换它。您可以使用字符串的拆分功能并将“空格”作为分隔符。例如在 VB.Net 中：

暗值 As String() = cont.split(CChar(" "))

这将为您提供一个字符串数组，您可以访问其值：value(0)、value(1) 和 value(2)

# jquery - jquery自动完成查询

> ID：10278672
> 
> 赞同：2
> 
> 时间：2012-04-23T10:17:50.130
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我需要在自动完成的结果列表中添加另一个元素。该元素不应该是可点击的，并且应该作为搜索列表中的信息。

我正在尝试下面的代码并使用 appendTo 选项，但它似乎不起作用

```
var acOptions = {
    source: userNames,
    minLength: 1,
    appendTo: "<li class='ui-menu-item' role='menuitem'>Search by username </li>"
};

$('input.userName').autocomplete(acOptions); 
```

有人可以在这里指导我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:22:08.980

这是[http://jqueryui.com/demos/autocomplete/#categories](http://jqueryui.com/demos/autocomplete/#categories)是你要找的吗？这是一个工作演示[http://jsfiddle.net/pomeh/XJ47e/](http://jsfiddle.net/pomeh/XJ47e/)。

HTML 代码

```
<div class="demo">
    <label for="search">Search: </label>
    <input id="search" />
</div>

<p>A categorized search result. Try typing "a" or "n".</p> 
```

​</p>

Javascript代码

```
$.widget("custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function(ul, items) {
        var self = this,
            currentCategory = "";
        $.each(items, function(index, item) {
            if (item.category != currentCategory) {
                ul.append("<li class='ui-autocomplete-category'>" + item.category + "</li>");
                currentCategory = item.category;
            }
            self._renderItem(ul, item);
        });
    }
});

var data = [
    { label: "anders", category: ""},
    { label: "andreas", category: ""},
    { label: "antal", category: ""},
    { label: "annhhx10", category: "Products"},
    { label: "annk K12", category: "Products"},
    { label: "annttop C13", category: "Products"},
    { label: "anders andersson", category: "People"},
    { label: "andreas andersson", category: "People"},
    { label: "andreas johnson", category: "People"}
];

$("#search").catcomplete({
    delay: 0,
    source: data
}); 
```

CSS 代码

```
.ui-autocomplete-category {
    font-weight: bold;
    padding: .2em .4em;
    margin: .8em 0 .2em;
    line-height: 1.5;
}​ 
```

# drupal-6 - 在 Drupal 的模块中挂钩函数

> ID：10278674
> 
> 赞同：0
> 
> 时间：2012-04-23T10:18:03.503
> 
> 标签：drupal-6, hook

如何更改功能`uc_order_view_update_form($form_state, $order)`？这存在于`ubercart\uc_order\uc_order.order_pane.inc`. 我不知道如何为这个功能制作钩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:37:09.613

[您可以使用hook_form_alter](http://api.drupal.org/api/drupal/developer%21hooks%21core.php/function/hook_form_alter/6)从自定义模块安全地修改 Drupal 中的任何表单。

# java - 安卓的巴特沃斯低通滤波器

> ID：10278675
> 
> 赞同：2
> 
> 时间：2012-04-23T10:18:18.033
> 
> 标签：java, android, filtering, accelerometer

我目前正在尝试制作一个粗略的计步器。它已经到了我正在读取信号并将它们绘制在 Excel 上进行分析的阶段......由于步进反弹和各种其他原因，数据非常嘈杂。我正在采用单个加速度矢量，并尝试使用我通过 york cs 部门找到的以下 DSP 滤波器设计工具来设计巴特沃斯低通滤波器：

[http://www-users.cs.york.ac.uk/~fisher/mkfilter/trad.html](http://www-users.cs.york.ac.uk/~fisher/mkfilter/trad.html)

可能是我为必要的字段输入了错误的值，但同时我在将 Ansi“C”代码转换为 Java 时遇到了麻烦！

有人能伸出援助之手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:19:11.490

感谢您的回复，我实际上已经实现了一个非常基本的移动检测版本，基于：[http ://www.vogella.com/articles/AndroidSensor/article.htm](http://www.vogella.com/articles/AndroidSensor/article.htm)

```
if (event.sensor.getType() == Sensor.TYPE_LINEAR_ACCELERATION) { // check sensor type
    float x = event.values[0];
    float y = event.values[1];
    float z = event.values[2];

    float accelationSquareRoot = (x * x + y * y + z * z) / (SensorManager.GRAVITY_EARTH * SensorManager.GRAVITY_EARTH);
    _SR.setText("accelationSquareRoot" + String.valueOf(accelationSquareRoot)); // display 3D acceleration vector
    long actualTime = System.currentTimeMillis();
    if (accelationSquareRoot >= progressDouble) {
        if (actualTime - lastUpdate < 15) { 
            return;
        }
        lastUpdate = actualTime;
        ++count;
    } 
} 
```

过滤器更多的是显示对加速度计工作原理的一些分析，并找出我是否可以使其更准确。

# session - 使用 Redis 存储会话有多安全？

> ID：10278683
> 
> 赞同：104
> 
> 时间：2012-04-23T10:19:18.910
> 
> 标签：session, redis

我目前正在使用 MySql 来存储我的会话。它工作得很好，但它有点慢。

我被要求使用 Redis，但我想知道这是否是个好主意，因为我听说 Redis 会延迟写入操作。我有点害怕，因为会话需要是实时的。

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-04-23T11:22:34.180

Redis 非常适合存储会话。所有操作都在内存中执行，因此读写速度很快。

第二个方面是会话状态的持久性。Redis 在如何将会话状态持久保存到硬盘方面为您提供了很大的灵活性。您可以通过[http://redis.io/topics/persistence](http://redis.io/topics/persistence)了解更多信息，但在高层次上，这是您的选择 -

1.  如果您不能承受丢失任何会话，`appendfsync always`请在配置文件中进行设置。有了这个，Redis 保证任何写操作都保存到磁盘上。缺点是写操作会比较慢。
2.  如果您可以接受丢失大约 1 秒的数据，请使用`appendfsync everysec`. 这将在合理的数据保证下提供出色的性能

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-01T20:44:24.573

基本上有两种主要类型可用：异步 snapsnots 和`fsync()`. 它们分别称为 RDB 和 AOF。更多关于[官方页面上的持久化模式](http://redis.io/topics/persistence)。

例如，当接收到 SIGTERM 时，守护进程的信号处理会同步到磁盘，因此重启后数据仍然存在。我认为守护程序或操作系统必须在您看到完整性损坏之前崩溃，即使使用默认设置（RDB 快照）也是如此。

AOF 设置使用 Append Only File 记录服务器接收到的命令，并在冷启动时从保存的文件从头开始重新创建 DB。默认的磁盘同步策略是每秒刷新一次 (IIRC)，但可以设置为在每个命令上锁定和写入。

同时使用快照和增量日志似乎提供了一种长期的*不介意如果我错过了几秒钟的数据的*方法，它具有更安全但成本更高的增量日志。Redis 支持开箱即用的集群，因此看起来也可以进行复制。

我自己使用默认的 RDB 设置并将快照保存到远程 FTP。我还没有看到导致数据丢失的故障。最有可能发生急性硬件故障或停电，但我托管在 VPS 上。发生这种情况的可能性很小:)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-03-27T04:24:41.120

这个问题实际上是关于*实时会话的，*似乎部分原因是对“延迟写入操作”这个短语的误解虽然细节最终在评论中被梳理出来，但我只是想让它超级清楚。 ..

**实施实时会话不会有任何问题。**

Redis 是一种*内存*键值存储，具有可选的磁盘持久性。“延迟写入操作”是指*写入磁盘*，而不是一般的数据库，它存在于内存中。如果您设置一个键/值对，您可以立即获取它（即实时）。您选择的关于持久性的策略（延迟写入的时间）将决定崩溃中可能丢失多少数据的上限。

# perl - 字符串的数值，反之亦然

> ID：10278684
> 
> 赞同：2
> 
> 时间：2012-04-23T10:19:24.633
> 
> 标签：perl

是否有任何内置函数（例如我们对单个字符有 ord）将字符串转换为其等效数值，反之亦然，即从等效数值中取回字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:55:20.010

除了[涉及`split`](https://stackoverflow.com/a/10278888)来自[nickisfat](https://stackoverflow.com/users/658663/nickisfat)的方法外，还有[`unpack`](http://p3rl.org/unpack)：

```
use Encode qw(encode);
my $characters = 'This is my string.';
my $octets = encode 'UTF-8', $characters;
unpack 'C*', $octets
# expression returns qw(84 104 105 115 32 105 115 32 109 121 32 115 116 114 105 110 103 46)
unpack 'H*', $octets
# expression returns '54686973206973206d7920737472696e672e' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:33:03.253

只需将内置函数依次应用于字符串中的每个字符即可。下面可能会变得更漂亮，但会起作用：

```
#!/usr/bin/perl

use strict ;
use warnings ;

my $string = 'some text' ;
my $num = '115,111,109,101,32,116,101,120,116' ;

strToNum($string) ;
numToStr($num) ;

sub strToNum{
    my $input = shift ;
    local $" = ',' ;
    my @result = map( ord, split(//, $input) ) ;
    print "@result\n" ;
}

sub numToStr{
    my $input = shift ;
    local $" = '' ;
    my @result = map( chr, split(/,/, $input) ) ;
    print "@result\n" ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T10:21:30.027

Perl 是动态类型的。因此，根据上下文，变量将被视为字符串或数字。您不需要显式转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T10:39:31.650

通常，您不需要转换数字和字符串值，因为每个标量在您在新上下文中使用时都会自动更新这些值。因此，当您将数字分配给标量并稍后在字符串上下文中使用它时，Perl 会自动为您生成字符串表示形式。

然而，一些库依赖于检查标量来决定如何处理它们——作为数字还是作为字符串（你好，JSON:XS！）除了手动将数字或字符串值重新分配给标量之外，实际上没有任何干净的方法可以解决这个问题擦除“自动生成”部分。在这种情况下，使用一些简单快速的计算，例如`$var += 0`对变量进行数字化或`$var = "$var"`字符串化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T10:31:38.580

ord 也会在 Perl 中做你想做的事：

```
perl -e '$char = "y"; print ord($char);' 
```

你总是可以使用 perldoc 来检查一个函数是否是 perl 的一部分，`perldoc -f ord`

# jquery - 如何在 jQuery 中仅针对 ul li:nth-child(2)

> ID：10278685
> 
> 赞同：1
> 
> 时间：2012-04-23T10:19:25.407
> 
> 标签：jquery, html, css-selectors

我试图只使`li:nth-child(2)`宽度动画从`230px`到`780px`。

我已经这样做了，但是现在只要`li`在本节中有一个，它就会给出`nth-child(3)`那个宽度`780px`。

我如何只影响我尝试的一个元素的宽度？

**JS：**

```
$(document).ready(function(){
    $("#getsocial").live('click', function(){
        $(".homepage li:nth-child(1)").fadeOut(1000);
        $(".homepage li:nth-child(3)").fadeOut(1000);
        $(".homepage ul > li:nth-child(2)").fadeOut(1000).delay(300).fadeIn(1000).animate({width:'780px'},1000);
        $(".socialshare").hide().delay(2400).fadeIn(1000);
        $(".goback").hide().delay(2400).fadeIn(1000);
    });
}); 
```

我也试过这个：

```
$(document).ready(function(){
    $("#getsocial").live('click', function(){
        $(".homepage li:nth-child(1)").fadeOut(1000);
        $(".homepage li:nth-child(3)").fadeOut(1000);
        $(".homepage li:nth-child(2)").fadeOut(1000).delay(300).fadeIn(1000).animate({width:'780px'},1000);
        $(".socialshare").hide().delay(2400).fadeIn(1000);
        $(".goback").hide().delay(2400).fadeIn(1000);
    });
}); 
```

**HTML：**

```
<div class="homepage">
  <ul>
    <li>content here</li>
    <li>
      <ul>
        <li>content here</li>
        <li>content here</li>
        <li>content here</li>
      </ul>
    </li>
    <li>content here</li>
  </ul>
</div> 
```

提前感谢您提供的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:36:32.833

请改用此选择器：

```
.homepage > ul > li:nth-child(2) 
```

这将适用于您在上面发布的 html，因为现在它仅适用于 a`ul`的直接后代，`<div class="homepage">`因此不适用于您的 sub `ul`。

# android - 内存不足致命异常

> ID：10278686
> 
> 赞同：2
> 
> 时间：2012-04-23T10:19:30.657
> 
> 标签：android, out-of-memory, bitmapfactory

我有一个包含 12 个 ImageViews 的活动。**在 onCreate 方法中，我使用BitmapFactory.decodeStream(...)**在这些 ImageViews 中加载 12 张照片。

当我来到这个页面并返回 10 次时，我得到以下内存不足异常。

为什么会出现此错误，如何释放资源以防止出现此异常？

谢谢，

```
04-24 14:41:00.050: D/TextView(7586): Constructor - Got appearance for textColorPrimaryInverse
04-24 14:41:00.050: D/TextView(7586): Constructor -- Got mEditTextBackgroundColor
04-24 14:41:00.130: I/dalvikvm-heap(7586): Clamp target GC heap from 48.878MB to 48.000MB
04-24 14:41:00.130: D/dalvikvm(7586): GC_FOR_ALLOC freed 495K, 2% free 47950K/48775K, paused 44ms
04-24 14:41:00.130: I/dalvikvm-heap(7586): Forcing collection of SoftReferences for 404616-byte allocation
04-24 14:41:00.180: I/dalvikvm-heap(7586): Clamp target GC heap from 48.856MB to 48.000MB
04-24 14:41:00.180: D/dalvikvm(7586): GC_BEFORE_OOM freed 23K, 2% free 47926K/48775K, paused 48ms
04-24 14:41:00.180: E/dalvikvm-heap(7586): Out of memory on a 404616-byte allocation.
04-24 14:41:00.180: I/dalvikvm(7586): "main" prio=5 tid=1 RUNNABLE
04-24 14:41:00.180: I/dalvikvm(7586):   | group="main" sCount=0 dsCount=0 obj=0x40a54460 self=0x1ad5828
04-24 14:41:00.180: I/dalvikvm(7586):   | sysTid=7586 nice=0 sched=0/0 cgrp=default handle=1074742408
04-24 14:41:00.180: I/dalvikvm(7586):   | schedstat=( 14073874000 2242143000 19299 ) utm=1301 stm=106 core=1
04-24 14:41:00.180: I/dalvikvm(7586):   at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
04-24 14:41:00.180: I/dalvikvm(7586):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
04-24 14:41:00.180: I/dalvikvm(7586):   at org.mabna.order.utils.Utilities.decodeFile(Utilities.java:1220)
04-24 14:41:00.180: I/dalvikvm(7586):   at org.mabna.order.businessLayer.db.BoInvProducts.getProductPhoto(BoInvProducts.java:107)
04-24 14:41:00.180: I/dalvikvm(7586):   at org.mabna.order.ui.ActProductsGallery.loadPageImages(ActProductsGallery.java:729)
04-24 14:41:00.180: I/dalvikvm(7586):   at org.mabna.order.ui.ActProductsGallery.selectItemInGallery(ActProductsGallery.java:611)
04-24 14:41:00.180: I/dalvikvm(7586):   at org.mabna.order.ui.ActProductsGallery.onCreate(ActProductsGallery.java:315)
04-24 14:41:00.180: I/dalvikvm(7586):   at android.app.Activity.performCreate(Activity.java:4465)
04-24 14:41:00.180: I/dalvikvm(7586):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-24 14:41:00.180: I/dalvikvm(7586):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-24 14:41:00.180: I/dalvikvm(7586):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-24 14:41:00.180: I/dalvikvm(7586):   at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-24 14:41:00.180: I/dalvikvm(7586):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-24 14:41:00.180: I/dalvikvm(7586):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 14:41:00.180: I/dalvikvm(7586):   at android.os.Looper.loop(Looper.java:137)
04-24 14:41:00.180: I/dalvikvm(7586):   at android.app.ActivityThread.main(ActivityThread.java:4424)
04-24 14:41:00.180: I/dalvikvm(7586):   at java.lang.reflect.Method.invokeNative(Native Method)
04-24 14:41:00.180: I/dalvikvm(7586):   at java.lang.reflect.Method.invoke(Method.java:511)
04-24 14:41:00.180: I/dalvikvm(7586):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-24 14:41:00.180: I/dalvikvm(7586):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-24 14:41:00.180: I/dalvikvm(7586):   at dalvik.system.NativeStart.main(Native Method)
04-24 14:41:00.180: D/skia(7586): --- decoder->decode returned false
04-24 14:41:00.180: D/AndroidRuntime(7586): Shutting down VM
04-24 14:41:00.180: W/dalvikvm(7586): threadid=1: thread exiting with uncaught exception (group=0x40a531f8)
04-24 14:41:00.180: E/AndroidRuntime(7586): FATAL EXCEPTION: main
04-24 14:41:00.180: E/AndroidRuntime(7586): java.lang.OutOfMemoryError
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at org.mabna.order.utils.Utilities.decodeFile(Utilities.java:1220)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at org.mabna.order.businessLayer.db.BoInvProducts.getProductPhoto(BoInvProducts.java:107)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at org.mabna.order.ui.ActProductsGallery.loadPageImages(ActProductsGallery.java:729)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at org.mabna.order.ui.ActProductsGallery.selectItemInGallery(ActProductsGallery.java:611)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at org.mabna.order.ui.ActProductsGallery.onCreate(ActProductsGallery.java:315)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.app.Activity.performCreate(Activity.java:4465)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.os.Looper.loop(Looper.java:137)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at java.lang.reflect.Method.invoke(Method.java:511)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-24 14:41:00.180: E/AndroidRuntime(7586):     at dalvik.system.NativeStart.main(Native Method)
04-24 14:41:01.350: I/Process(7586): Sending signal. PID: 7586 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:26:33.667

也许，用您的最接近的尺寸解码您的图像`ImageViews`（请参阅：[将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:23:45.367

听起来您以错误的方式切换活动并在内存中保留了许多实例。您可以尝试在打开此活动的意图上设置 FLAG_ACTIVITY_CLEAR_TOP 或查看[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)以确定应在何处加载图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:12:30.180

您是否尝试过以下操作？

1.  像这样回收位图

    ```
    @Override
    public void onDestroy() {
    super.onDestroy();
    for (int i = 0; i < 5; i++) {
        TermElement e = theFiveGaugesInclRPMInPos4[i];
        e.background.recycle();
        e.background = null;
    }
    if (DEBUG)
        Log.i(this.getClass().getSimpleName(), " <<-"
            + Thread.currentThread().getStackTrace()[2].getMethodName());
    } 
    ```

2.  为了重用位图，我将其定义为静态，并像这样初始化：

    ```
     if (faceTexture == null)
        faceTexture = BitmapFactory.decodeResource(getContext()
            .getResources(), faceTextureID); 
    ```

3.  使用 DDMS 检查内存使用情况

现在它不再崩溃了。

ps 对格式化感到抱歉 - 它只是不再让我正确格式化代码 - 必须重新启动？:-(

# database - 使用phonegap时黑莓中的数据库位置是什么

> ID：10278689
> 
> 赞同：0
> 
> 时间：2012-04-23T10:19:33.277
> 
> 标签：database, blackberry, cordova, blackberry-simulator

我有一个 9800 模拟器。我将目录安装为 SD 卡...

现在如果我使用

```
function populateDB(tx) {
     tx.executeSql('DROP TABLE IF EXISTS DEMO');
     tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
}

function errorCB(err) {
    alert("Error processing SQL: "+err.code);
}

function successCB() {
    alert("success!");
}

var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
db.transaction(populateDB, errorCB, successCB); 
```

那么我的数据库将存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:35:30.670

我需要在安装应用程序之前安装 SD 卡，然后我应该执行我的应用程序......

# database - 如何检查我的概念模型是否正确？和规范化示例

> ID：10278705
> 
> 赞同：0
> 
> 时间：2012-04-23T10:20:17.347
> 
> 标签：database, database-design, erd

我正在为我参与的项目设计一个关系数据库。我有一个实体关系和逻辑模型，但我不确定它们是否正确。可以这么说，是否有任何测试数据的石墙方法，看看我是否正确地遵循了正确的路径？

这是一个例子，你能告诉我这是否正确吗？如果是这样，我知道我是对的。

给定以下字段 Galleryid、名称、位置、城市、邮政编码、展出的绘画，数据模型将是

```
Gallery (GalleryID, Location, City, Postcode)
Gallery Items (GalleryID, Paintings on Display) 
```

因为在“展出的绘画”字段中有重复的数据。我认为这现在是第三种正常形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:24:00.280

关于 ER 数据库，值得看看“[数据库规范化规则](http://databases.about.com/od/specificproducts/a/normalization.htm)”

还可以在[这里](http://www.agiledata.org/essays/dataNormalization.html)查看实用的数据库规范化教程

关于逻辑模型很难说，因为它应该围绕您的业务需求进行塑造。无论如何，您可以针对您的模型编写一些测试，看看您是否可以得到您想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T21:25:13.613

快速的经验法则是：

1.  不要违反[原子性原则](http://en.wikipedia.org/wiki/1NF#Atomicity)。尝试将整个集合放在单个字段中会使该字段更加“不透明”，并且不太容易正确索引、查询和与其他表相关联。
2.  并且不要违反[DRY 原则](http://en.wikipedia.org/wiki/DRY)。即使您对函数依赖和数据库规范化一无所知，只要查看您的模型并尝试识别冗余，您也可以了解很多关于模型质量的信息。事实上，规范化的整个目的是避免“重复自己”。

在您的特定情况下，假设`Paintings on Display`只是一个值（在这种情况下应该真正调用它`Painting on Display`），您应该没问题。

感兴趣的重点是`Location`——这到底是什么意思，可以为多个画廊重复吗？

# java - Stackoverflowerror / Hibernate、集合和 Session.refresh(...) 的未解决对象异常

> ID：10278714
> 
> 赞同：3
> 
> 时间：2012-04-23T10:20:43.273
> 
> 标签：java, database, hibernate, orm

在我当前的项目中，我使用的是 Hibernate 3。我正在使用的工具连接到 MS SQL Server 数据库。该工具安装在两台不同的机器上，都连接到同一个数据库。

在第一台机器上，我正在更改一个包含集合的对象。在第二台机器上，我使用 session.refresh(...) 查看在第一台机器上所做的更改。

当我将对象添加到集合并刷新时，我收到 Stackoverflow 错误。当我从集合中删除一个对象并刷新时，我得到一个 UnresolvedObjectException。

```
session.evict(...)
session.get(...) 
```

似乎工作。但是`session.refresh(...)`。为什么？

这是一个完整的堆栈跟踪：

```
java.lang.StackOverflowError
at net.sourceforge.jtds.jdbc.JtdsStatement.<init>(JtdsStatement.java:129)
at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.<init>(JtdsPreparedStatement.java:99)
at net.sourceforge.jtds.jdbc.ConnectionJDBC2.prepareStatement(ConnectionJDBC2.java:2456)
at net.sourceforge.jtds.jdbc.ConnectionJDBC2.prepareStatement(ConnectionJDBC2.java:2414)
at net.sourceforge.jtds.jdbcx.proxy.ConnectionProxy.prepareStatement(ConnectionProxy.java:394)
at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)
at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:452)
at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1573)
at org.hibernate.loader.Loader.doQuery(Loader.java:696)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:207)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.type.ComponentType.resolve(ComponentType.java:607)
at org.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:298)
at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1121)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:588)
at org.hibernate.loader.Loader.doQuery(Loader.java:724)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:207)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.type.ComponentType.resolve(ComponentType.java:607)
at org.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:298)
at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1121)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:588)
at org.hibernate.loader.Loader.doQuery(Loader.java:724)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:207)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.type.ComponentType.resolve(ComponentType.java:607)
at org.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:298)
at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1121)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:588)
at org.hibernate.loader.Loader.doQuery(Loader.java:724)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:207)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.type.ComponentType.resolve(ComponentType.java:607)
at org.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:298)
at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1121)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:588)
at org.hibernate.loader.Loader.doQuery(Loader.java:724)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:207)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.type.ComponentType.resolve(ComponentType.java:607)
at org.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:298)
at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1121)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:588)
at org.hibernate.loader.Loader.doQuery(Loader.java:724)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:207)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.type.ComponentType.resolve(ComponentType.java:607)
at org.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:298)
at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1121)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:588)
at org.hibernate.loader.Loader.doQuery(Loader.java:724)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:207)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.type.ComponentType.resolve(ComponentType.java:607)
at org.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:298)
at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1121)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:588)
at org.hibernate.loader.Loader.doQuery(Loader.java:724)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:207)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.type.ComponentType.resolve(ComponentType.java:607)
at org.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:298)
at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1121)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:588)
at org.hibernate.loader.Loader.doQuery(Loader.java:724)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:207)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.type.ComponentType.resolve(ComponentType.java:607)
at org.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:298)
at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1121)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:588)
at org.hibernate.loader.Loader.doQuery(Loader.java:724)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.loadEntity(Loader.java:1881)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:71)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:65)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3072)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:434)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:415)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:165)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:207)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:126)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:905)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:873)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:590)
at org.hibernate.type.EntityType.resolve(EntityType.java:412)
at org.hibernate.type.ComponentType.resolve(ComponentType.java:607)
at org.hibernate.type.ComponentType.nullSafeGet(ComponentType.java:298)
at org.hibernate.loader.Loader.getKeyFromResultSet(Loader.java:1121) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-25T20:27:01.653

# 解决方案

我的解决方案是不使用`CascadeType.REFRESH`（或`CascadeType.ALL`）任何双向关联。

# 背景

当我`cascade = CascadeType.ALL`在 的父端使用时，我遇到了同样的问题`@OneToMany`，孩子也`@ManyToOne`与这个父级有关系，例如：

```
@OneToMany(mappedBy = "hospital", cascade = CascadeType.ALL) 
```

当我使用 just 时也发生了同样的情况`cascade = CascadeType.REFRESH`。

刷新父级也刷新了子级，从而刷新了父级，从而刷新了子级......

# model-view-controller - 控制器和视图在 MVC 中应该如何解耦？

> ID：10278716
> 
> 赞同：1
> 
> 时间：2012-04-23T10:20:46.397
> 
> 标签：model-view-controller, architecture, views, encapsulation, controllers

根据定义，视图应该是无逻辑的。当用户与视图交互时，它会通知其控制器。当应用程序中的状态发生变化时，控制器会通知视图。但是当需要重新渲染部分或全部视图时，我对视图与其控制器之间的通信性质感到困惑。

让我们假设我正在制作一个两人纸牌游戏。该视图负责显示牌组、弃牌堆、玩家手中的牌以及任何其他 UI 组件。当玩家打牌时，视图需要反映这种变化，而通知视图这样做是控制器的工作。以下哪个选项是处理此事件的最佳方式？

1.  控制器简单地告诉视图重新绘制。视图通过控制器可以访问游戏状态的所有参数。它使用这些参数重新绘制所有内容，包括牌组、玩家的手牌等。

2.  控制器告诉视图玩家打了一张牌。视图知道当玩家出牌时，只有该玩家的手需要重新绘制。与选项 1 一样，视图使用游戏状态的参数来确定如何重新绘制玩家的手。

3.  （与 2 类似但不同）控制器告诉视图重新绘制该玩家的手，并将所有需要的参数传递给它。视图无权访问游戏参数。

4.  我还缺少其他方法吗？

选项 1 似乎是最简单的两个写入，因为视图是无状态的——它只是每次都重新绘制所有内容。但出于同样的原因，这是非常浪费的。当只有一个玩家打出一张牌时，我们不需要两个玩家的手。做动画之类的事情也很困难，因为每次我们重新绘制时，我们基本上都是在扔掉旧的画布并用所有新的视图组件构建一个新的画布。

另一方面，选项 3 在从视图中删除逻辑方面似乎是最好的，但它带来了一些问题。首先，我发现编写起来更加困难，因为必须将所有正确的消息发送到视图。如果有任何遗漏，视图将无法正确反映应用程序的状态。其次，有时似乎仍然需要完全重新绘制，例如，当用户正在恢复正在进行的已保存游戏时。

在选项 1 和 2 中，视图“拉”有关游戏状态的数据，而在选项 3 中，此数据被“推送”给它。视图应该能够请求这样的信息，或者这是否意味着有太多的逻辑风景？

提前感谢您对这个主题的任何启发！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:15:04.080

MVC 并非最适合所有应用程序。它还取决于可用的框架类型。

通过不考虑平台/框架，我会说 HMVC（分层模型-视图-控制器）或 PAC（演示-抽象-控制）更适合您，因为页面可以分成几个部分（三个意见：手和甲板）。

当谈到原生应用程序 (GUI) 时，MVP 似乎比 MVC 更受欢迎。

Martin Fowler 在这里有一篇关于不同 GUI 模式的好文章：http: [//www.martinfowler.com/eaaDev/uiArchs.html](http://www.martinfowler.com/eaaDev/uiArchs.html)

# android - MyLinearLayout.getDrawingCache() 给出 NullPointerException

> ID：10278717
> 
> 赞同：3
> 
> 时间：2012-04-23T10:20:52.903
> 
> 标签：android

编辑：

**没关系，让它这样工作**

```
TopRatedPage.setDrawingCacheEnabled(true);
TopRatedPage.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
TopRatedPage.layout(0, 0, TopRatedPage.getMeasuredWidth(), TopRatedPage.getMeasuredHeight()); 
TopRatedPage.buildDrawingCache(true);
Bitmap screenshot = Bitmap.createBitmap(TopRatedPage.getDrawingCache());
TopRatedPage.setDrawingCacheEnabled(false); 
```

* * *

老的：

我正在尝试从布局中截取屏幕截图，就像这样。

```
LinearLayout TopRatedPage = (LinearLayout)inflater.inflate(R.layout.toprated, null);
...
Bitmap screenshot;
TopRatedPage.setDrawingCacheEnabled(true);
screenshot = Bitmap.createBitmap(TopRatedPage.getDrawingCache()); // Caused by: java.lang.NullPointerException
TopRatedPage.setDrawingCacheEnabled(false); 
```

任何想法我做错了什么？

谢谢！

编辑：也试过这样，它不会抛出错误，但给出一个空位图。

```
Bitmap screenshot = TopRatedPage.getDrawingCache(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:26:38.883

试试这个，让我知道会发生什么..

```
LinearLayout TopRatedPage = (LinearLayout)inflater.inflate(R.layout.toprated, null);
Bitmap screenshot = Bitmap.createBitmap(LinearLayout .getWidth(), LinearLayout .getHeight(), Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(screenshot);
LinearLayout.draw(c);
imageView.setImageBitmap(screenshot); 
```

如果可能的话，使用，

```
View captureView = null;
captureView = inflater.inflate(R.layout.toprated, null);
Bitmap screenshot = Bitmap.createBitmap(captureView.getWidth(), captureView.getHeight(), Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(screenshot);
captureView .draw(c);
imageView.setImageBitmap(screenshot); 
```

# php - 如何在 Zend 框架中使用 Zend_auth 时设置超时

> ID：10278719
> 
> 赞同：-1
> 
> 时间：2012-04-23T10:20:56.757
> 
> 标签：php, zend-framework, zend-auth

我使用 Zend_auth 进行身份验证。相同的代码如下：

```
 $authAdapter = $this->getAuthAdapter();
            $authAdapter->setIdentity($username)
                    ->setCredential($password);
            $auth = Zend_Auth::getInstance();
            $result = $auth->authenticate($authAdapter);
            # is the user a valid one?
            if ($result->isValid()) {
                # all info about this user from the login table
                # ommit only the password, we don't need that
                $userInfo = $authAdapter->getResultRowObject(null, 'password');

                # the default storage is a session with namespace Zend_Auth
                $authStorage = $auth->getStorage();
                $authStorage->write($userInfo);
                $emp_id = $userInfo->employee_id;
                $userInfo = Zend_Auth::getInstance()->getStorage()->read();
                $array_db = new Application_Model_SetMstDb();
                $array_name = $array_db->getName($emp_id);

                foreach ($array_name as $name) :
                    $fname = $name['first_name'];
                    $lname = $name['last_name'];
                endforeach;

                $firstname = new stdClass;
                $lastname = new stdClass;
                $userInfo->firstname = $fname;
                $userInfo->lastname = $lname;

                $privilege_id = $userInfo->privilege_id;
                echo 'privilege in Login: ' . $privilege_id;
                $this->_redirect('index/index');
            } else {
                $errorMessage = "Invalid username or password";
                $this->view->error = $errorMessage;
              } 
```

其中 getAuthAdapter() 如下：

```
 protected function getAuthAdapter() {
    $dbAdapter = Zend_Db_Table::getDefaultAdapter();
    $authAdapter = new Zend_Auth_Adapter_DbTable($dbAdapter);

    $authAdapter->setTableName('credentials')
            ->setIdentityColumn('employee_id')
            ->setCredentialColumn('password');

    return $authAdapter;
} 
```

我想设置会话超时。我想设置 5 分钟的超时，当用户 5 分钟没有处于活动状态时，会话应该过期，即应该调用注销操作，其代码如下：

```
 public function logoutAction() {
    // action body
    Zend_Auth::getInstance()->clearIdentity();
    $this->_redirect('login/index');
   } 
```

提前谢谢。请帮助我。很紧急。

当我使用

```
 $session = new Zend_Session_Namespace( 'Zend_Auth' ); 
    $session->setExpirationSeconds( 60 ); 
```

控件在 60 秒后自动重定向到登录页面，但我希望如果应用程序的用户在 60 秒内处于非活动状态，那么只有它会重定向。目前无论用户是否处于活动状态，都会发生重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:22:23.583

我不会为此使用 init() 。init() 应该用于设置对象状态。

我会使用 preDispatch()。但是要避免使用它所有的控制器或制作一个基本控制器然后扩展。您可以做一个插件并将其添加到 Bootstrap。

```
class YourControllerPlugin extends Zend_Controller_Plugin_Abstract {
   public function preDispatch() {
        //check if expired
       if(hasExpired()) {
          //logout and redirect
       }
   }
} 
```

将其添加到 Bootstrap ：

```
public function __initYourPlugin () {
    $this->bootstrap('frontController');

    $plugin = new YourControllerPlugin();

    $front = Zend_Controller_Front::getInstance();
    $front->registerPlugin($plugin);

    return $plugin;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:36:26.220

我现在正在查看我的代码。此片段来自前端控制器插件。每次经过身份验证的用户请求页面时，我都会重置他们的会话到期时间，以便他们从上次“活动”开始有 60 分钟的时间。

```
 public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request) {

    //check whether the client is authenticated
    if (Zend_Auth::getInstance()->hasIdentity()) {

        $session = $this->_getAuthSession();

        //update session expiry date to 60mins from NOW
        $session->setExpirationSeconds(60*60);

        return;
    } 
```

* * *

另外：我正在查看此代码，以寻找一种向用户显示“您的会话已过期”消息而不是当前“您未通过身份验证”消息的方法。

# javascript - 关于 Node 的代码风格

> ID：10278721
> 
> 赞同：3
> 
> 时间：2012-04-23T10:21:08.643
> 
> 标签：javascript, node.js, coding-style, deferred

**编辑**

感谢所有答案，
最后我决定使用[Step](https://github.com/creationix/step)之类的工具，

我所需要的只是“流量控制”，并且不想要任何可能会降低性能的东西（我不知道它会影响多少，或者效果可以忽略不计）。

所以我只是创建了一个用于流量控制的小工具：

line.js

```
/**
 * Create the "next" function
 * 
 * @param {Array} tasks 
 * @param {Number} index
 * @param {Number} last
 */
var next = function(tasks, index, last) {

    if (index == last) {

        return tasks[index + 1];
    }
    else {

        return function(data) {

            var nextIndex = index + 1;
            tasks[nextIndex](next(tasks, nextIndex, last), data);
        };
    }
};

/**
 * Invoke functions in line.
 */
module.exports = function() {

    var tasks = arguments,
        last = tasks.length - 2;

    tasks[0](next(tasks, 0, last));
}; 
```

用法：

```
var line = require("line.js");
line(function(next) {

    someObj.find(function(err, docs) {

        // codes
        next(docs);
    });
}, function(next, docs) {

    // codes
}); 
```

希望这可以帮助。

**编辑结束**

众所周知，
Node 的内置或第三方模块通常会提供异步 API，
并使用“回调”函数来处理结果。

这很酷，但有时会像这样编写代码：

```
 //some codes
              }
         }
    }
} 
```

像这样的代码很难阅读。

我知道“延迟”库可以解决这样的问题，
Node 有什么好的“延迟”模块吗？
如果我使用“延迟”对 Node 进行编码，性能如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T01:20:00.893

*基于 Node的代码是*一个大问题；你经常增长“回调金字塔”。有几种方法可以解决这个问题：

**代码风格：**

使用这种烦恼作为一个机会，将您的代码分解成一口大小的块。这意味着您可能会拥有大量的小型命名函数 - 不过这可能很好！您可能还会发现更多重用机会。

**流量控制库**

那里正好有 5937.2 亿个流控制库。以下是一些比较流行的：

*   [Step](https://github.com/creationix/step)超级基本的串行和并行流管理。
*   [seq](https://github.com/substack/node-seq)是一个更重但功能更全的流控制库。
*   还有很多。[在 npm 注册表](http://search.npmjs.org/)中搜索“流”和“流控制”（抱歉，似乎不可链接）

**语言扩展**

有几种尝试在 JavaScript（或 CoffeeScript）之上提供更同步的语法，通常基于[tame paper](http://pdos.csail.mit.edu/~max/docs/tame.pdf)背后的概念。

*   [TameJS](http://tamejs.org/)是 OkCupid 团队对此的回答。
*   [IcedCoffeeScript](http://maxtaco.github.com/coffee-script/)他们还在 CoffeeScript 上移植了 TameJS 作为 fork。
*   [streamline.js](https://github.com/Sage/streamlinejs)与 TameJS 非常相似。
*   [StratifiedJS](http://onilabs.com/stratifiedjs)是解决问题的一种更重的方法。

这条路线对某些人来说是一个交易破坏者：

*   它不是标准的 JavaScript；如果您正在构建库/框架/等，寻找帮助将更加困难。
*   变量作用域可能会以意想不到的方式表现，具体取决于库。
*   生成的代码可能难以调试和匹配原始源代码。

**未来：**

节点核心团队非常清楚这个问题，并且也在研究低级组件以帮助缓解痛苦。看起来他们将在 v0.8中引入[域的基本版本](https://groups.google.com/d/msg/nodejs/eVBOYiI_O_A/1ShfZZvb_4QJ)`return err if err`，它提供了一种汇总错误处理的方法（主要是避免通用模式）。

这应该开始为更清洁的流控制库奠定良好的基础，并开始为更一致的方式处理回调金字塔铺平道路。现在有太多的选择，而且社区还没有接近就一些标准达成一致。

**参考：**

*   [Mixu 的 Node book 有一个](http://book.mixu.net/ch7.html)关于这个主题的精彩章节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:43:54.523

有大量的“延迟库”。看看那里[http://eirikb.github.com/nipster/#promise](http://eirikb.github.com/nipster/#promise)和那里[http://eirikb.github.com/nipster/#deferred](http://eirikb.github.com/nipster/#deferred)。选择一个，这只是风格和简单的问题:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T11:15:41.267

如果你真的不喜欢这样，总是可以选择使用**命名函数**，这将减少缩进。

代替

```
setTimeout(function() {
  fs.readFile('file', function (err, data) {
    if (err) throw err;
    console.log(data);
  })
}, 200); 
```

你可以这样做：

```
function dataHandler(err, data)
{
  if (err) throw err;
  console.log(data);
}

function getFile()
{
  fs.readFile('file', dataHandler);
}

setTimeout(getFile, 200); 
```

同样的事情，没有嵌套。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T10:37:44.037

有一些库在某些场景中可能很有用，但总的来说，在将它们用于所有事情之后你不会感到兴奋。

根据慢的问题。由于 node.js 是异步的，因此包装的函数并不是一个很大的性能消耗者。

你可以在这里寻找类似延迟的库

[https://github.com/kriszyp/node-promise](https://github.com/kriszyp/node-promise)

这个问题也很相似

[哪个 nodejs 库最像 jQuery 的 deferreds？](https://stackoverflow.com/questions/7588581/what-nodejs-library-is-most-like-jquerys-deferreds)

作为最后的奖励，我建议你看看[CoffeeScript](http://coffeescript.org/)。它是一种语言，可以编译为 javascript 并且具有更优美的语法，因为函数大括号被删除了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T00:42:19.413

我通常喜欢使用 async.js 库，因为它提供了一些关于如何执行代码的不同选项

# objective-c - 在多个字符串中拆分标签

> ID：10278725
> 
> 赞同：0
> 
> 时间：2012-04-23T10:21:18.527
> 
> 标签：objective-c, xcode, string, nsstring, compare

对于我的应用程序，我需要比较单词而不是整个单词。如果它在单词中的同一位置，我希望它重新识别一个字母。所有单词的最大长度为 6。

这两个词都显示在一个标签中。

标签1和标签2

例如，如果 label1 中的单词是“按钮”，我想将其拆分为 6 个字符串。

```
string1: B
string2: u
string3: t
string4: t 
string5: o
string6: n 
```

然后对于我的 label2 是“砖块”，将其分成 6 份。

```
string7: B
string8: r
string9: i
string10: c 
string11: k
 string12: s 
```

现在我可以比较字符串 1:string7 等。

这样我可以比较单词中的所有字符对吗？我的问题是，这是正确的做法吗？如果是这样，代码会是什么样子？

我希望有人知道我的意思并知道如何做到这一点！谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:27:31.097

我会做这样的事情：

```
- (void)findEqualsIn:(NSString *)string1 and:(NSString *)string2 {
    for (int i = 0; i < [string1 length] && i < [string2 length]; i++) {
        if ([string1 characterAtIndex:i] == [string2 characterAtIndex:i]) {
            NSLog(@"%c is at index %i of both strings", [string1 characterAtIndex:i], i);
        }
    }
} 
```

我不知道你想用它做什么或你想如何返回信息（可能是一个 NSArray，其中包含所有匹配的索引？）

**编辑**

```
- (void)findEqualsIn:(NSString *)string1 and:(NSString *)string2 {
    NSMutableArray *string1chars = [[NSMutableArray alloc] init];
    NSMutableArray *string2chars = [[NSMutableArray alloc] init];

    //filling the string1chars array
    for (int i = 0; i < [string1 length]; i++) {
        [string1chars addObject:[NSString stringWithFormat:@"%c", [string1 characterAtIndex:i]]];
    }

    //filling the string2chars array
    for (int i = 0; i < [string2 length]; i++) {
        [string2chars addObject:[NSString stringWithFormat:@"%c", [string2 characterAtIndex:i]]];
    }

    //checking if they have some letters in common on the same spot
    for (int i = 0; i < [string1chars count] && i < [string2chars count]; i++) {
        if ([[string1chars objectAtIndex:i] isEqualToString:[string2chars objectAtIndex:i]]) {
            //change the color of the character at index i to green
        } else {
            //change the color of the character at index i to the standard color
        }
    }
} 
```

# .htaccess - htaccess 页面重定向，除了我的 ip

> ID：10278730
> 
> 赞同：2
> 
> 时间：2012-04-23T10:21:31.810
> 
> 标签：.htaccess

我正在尝试进行 .htaccess 重定向，它可以执行以下操作：

*   将页面A重定向到页面B；
*   重定向除我的 IP 之外的所有流量。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:34:42.390

* * *

# 重定向到哪里

ErrorDocument 403 [*重定向到哪里*]
命令拒绝，允许

* * *

# 阻止所有人

否认一切

* * *

# 除了...

允许来自 [ *YourIPGoesHere* ]

* * *

# 完整代码示例：

```
ErrorDocument 403 http://www.google.com/
order deny,allow
deny from all
allow from 173.194.41.134 
```

* * *

# 编辑：

你也可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REMOTE_HOST} !^173\.194\.41\.134
RewriteCond %{REQUEST_URI} !/somethingHere\.html$
RewriteRule .* /somethingHere.html [R=302,L] 
```

* * *

# matlab - 了解河豚算法的密钥生成算法的建议

> ID：10278731
> 
> 赞同：0
> 
> 时间：2012-04-23T10:21:35.380
> 
> 标签：matlab, encryption, blowfish

该代码适用于 MATLAB，我想了解他们到底想要做什么。我是 matlab 新手，所以需要一些建议。请帮忙

```
function [key] = keyGen(n)
n = n*8;
% n = 2048*2048*16;
% n = 24 * 24 * 8;
bin_x = zeros(n,1,'uint8');
r = 3.9999998;
bin_x_N_Minus_1 =  0.300001;
x_N = 0;
tic

for ind = 2 : n
     x_N = 1 - 2* bin_x_N_Minus_1 * bin_x_N_Minus_1;    
      if (x_N > 0.0)
         bin_x(ind-1) = 1;
      end 
        bin_x_N_Minus_1 =  x_N;

      end
toc
%save bin_sec bin_x;
t = uint8(0);
key = zeros(n/8,1,'uint8');
for ind1 = 1 : n/8

    for ind2 = 1 : 8
    key(ind1) = key(ind1) + bin_x(ind2*ind1)* 2 ^ (ind2-1);
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:28:55.510

参数`n`是密钥中的字节数。`n*8`是将其转换为位数。`bin_x`用于存储密钥的二进制表示。bin_x_N_Minus_1 是我们用来计算下一位的值。

在第一个 for 循环中，我们遍历键中的位（第一位始终为 0）。我们使用该公式计算 x_N（bin_x_N_Minus_1 是 x_N 的先前值）。如果 x_N 为正，则密钥中的对应位为 1，否则为 0。

`tic`并且`toc`习惯于计算这个 for 循环需要多长时间。

第二个 for 循环将键的位转换为字节，并将它们存储在输出数组中`key`。第 K 个 in`key`是 8 位数，由 bin_x 中的每 (N/8) 个条目表示，从 K 开始。

变量`r`和`t`未使用。

# iphone - NSRegularExpression 发出警告

> ID：10278732
> 
> 赞同：1
> 
> 时间：2012-04-23T10:21:35.600
> 
> 标签：iphone, objective-c, regex, xcode, nsregularexpression

这是代码

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)" options:NSRegularExpressionCaseInsensitive error:&error]; 
```

代码本身可以工作，但会发出以下警告：

```
"Unknown escape sequence \." 
```

我还尝试了以下选项：

```
NSRegularExpressionCaseInsensitive|NSRegularExpressionAnchorsMatchLines 
```

但错误仍然存​​在。谁能解释为什么会出现此错误以及如何将其删除。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:26:11.963

如果您将正则表达式编写为字符串文字并且它包含反斜杠，则必须使用第二个反斜杠对其进行转义，因为反斜杠还用于转义字符串文字中的某些特殊字符（例如`\n`，`\t`等）。

所以如果你想让你的正则表达式包含`\.`，你必须把它写成`\\.`. 同样，这仅适用于您使用字符串文字，而不是从文件加载正则表达式。

如果您确实想要一个没有反斜杠的句点（这实际上就是您现在所拥有的），请删除反斜杠以消除警告。

# objective-c - 1024x768 在 ipad 上使用 MPMoviePlayerController

> ID：10278733
> 
> 赞同：1
> 
> 时间：2012-04-23T10:21:38.993
> 
> 标签：objective-c, xcode, mpmovieplayercontroller

经过漫长的一天研究为什么 1024x768 视频无法在 iPad 3 上运行，以及大量的论坛搜索。我找不到任何合理的解决方案来解决这个问题。似乎很多人都有同样的情况，只显示黑屏。

解决方案是将所需的视频渲染为 1024x 748。原因是 iPad 顶部显示的状态栏是 20px。

我希望这可以解决他们在这种情况下遇到的很多用户问题。

**进入我的下一个问题......**

我目前通过 MPMoviePlayerController 将视频嵌入到我的视图中。该视频在不断循环中（动画菜单）。然后，我在调用方法的视频顶部放置了三个不可见的按钮。我目前只有一个工作，另外两个只是显示警报。

我目前遇到的问题是，当单击按钮时，我想要播放另一个视频。这是完美的工作，但我希望第一个视频首先播放到最后，然后继续播放下一个视频，原因是，我也需要它是无缝的，并且从一个视频到另一个视频不明显。

**对此的任何反馈都会很棒....**

```
#import "MainViewController.h"
#import "VideoPlayerViewController.h"
#import <MediaPlayer/MediaPlayer.h>
#import <UIKit/UIKit.h>

@interface MainViewController () 

@property (nonatomic, retain) MPMoviePlayerController *playerViewController;
@property (nonatomic, retain) VideoPlayerViewController *myPlayerViewController;

@end

@implementation MainViewController

@synthesize playerViewController = _playerViewController;
@synthesize myPlayerViewController = _myPlayerViewController;

- (void)dealloc {
    self.playerViewController = nil;
    self.myPlayerViewController = nil;

    [super dealloc];
}

#pragma mark - View lifecycle

-(void)buttonEventOne:(id)sender {

    //[[[[UIAlertView alloc] initWithTitle:@"CONTENT ONE" message:@"This will link to content one video" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease] show];

    NSURL *urlTwo = [[NSBundle mainBundle] URLForResource:@"BAE_BG_anim_pt2_748" withExtension:@"mov"];
    MPMoviePlayerController *playerViewController = [[MPMoviePlayerController alloc] init];

    playerViewController.contentURL = urlTwo;
    playerViewController.view.frame = CGRectMake(0, 0, 1024, 768);
    playerViewController.controlStyle = MPMovieControlStyleNone;
    //playerViewController.repeatMode = MPMovieRepeatModeOne;

    [self.view addSubview:playerViewController.view];
    [playerViewController play];

    self.playerViewController = playerViewController;
    [playerViewController release];

}

-(void)buttonEventTwo:(id)sender {

    [[[[UIAlertView alloc] initWithTitle:@"CONTENT TWO" message:@"This will link to content one video" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease] show];
}

-(void)buttonEventThree:(id)sender {

    [[[[UIAlertView alloc] initWithTitle:@"CONTENT THREE" message:@"This will link to content one video" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease] show];
}

- (void)viewDidLoad {
    [super viewDidLoad];

    NSURL *url = [[NSBundle mainBundle] URLForResource:@"BAE_Main_Loop_748" withExtension:@"mov"];

    // video player
    MPMoviePlayerController *playerViewController = [[MPMoviePlayerController alloc] init];
    playerViewController.contentURL = url;
    [playerViewController prepareToPlay];
    playerViewController.view.frame = CGRectMake(0, 0, 1024, 768);
    playerViewController.controlStyle = MPMovieControlStyleNone;
    playerViewController.repeatMode = MPMovieRepeatModeOne;

    [self.view addSubview:playerViewController.view];
    [playerViewController play];

    self.playerViewController = playerViewController;
    [playerViewController release];

    UIButton * btnOne = [UIButton buttonWithType:UIButtonTypeCustom];
    btnOne.frame = CGRectMake(260, 350, 150, 50);
    [btnOne setTitle:@"" forState:UIControlStateNormal];
    [btnOne addTarget:self action:@selector(buttonEventOne:)forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btnOne];

    UIButton * btnTwo = [UIButton buttonWithType:UIButtonTypeCustom];
    btnTwo.frame = CGRectMake(620, 350, 150, 50);
    [btnTwo setTitle:@"" forState:UIControlStateNormal];
    [btnTwo addTarget:self action:@selector(buttonEventTwo:)forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btnTwo];

    UIButton * btnThree = [UIButton buttonWithType:UIButtonTypeCustom];
    btnThree.frame = CGRectMake(450, 250, 150, 50);
    [btnThree setTitle:@"" forState:UIControlStateNormal];
    [btnThree addTarget:self action:@selector(buttonEventThree:)forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btnThree];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || 
            interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:51:58.900

您是否尝试过注册播放通知，特别是`MPMoviePlayerPlaybackDidFinishNotification`吸引人的吧？如果您在按下按钮时注册通知：

```
[[NSNotificationCenter defaultCenter] 
  addObserver:self 
  selector:@selector(introMovieFinished:) 
  name:MPMoviePlayerPlaybackDidFinishNotification 
  object:self.playerViewController]; 
```

然后在那个函数中：

```
- (void)introMovieFinished:(NSNotification*)note {
  [[NSNotificationCenter defaultCenter] 
    removeObserver:self 
    name:MPMoviePlayerPlaybackDidFinishNotification
    object:self.playerViewController];
  // Do stuff.
} 
```

您取消注册您对通知的兴趣，然后开始播放下一部电影。因为您仅在按下按钮时才注册兴趣，所以在电影结束之前您不应该收到函数调用。

# sql-server-2008 - T-SQL：具有标识列的 CTE

> ID：10278737
> 
> 赞同：3
> 
> 时间：2012-04-23T10:22:01.467
> 
> 标签：sql-server-2008, common-table-expression, identity-column

我正在构建一棵树（材料清单样式），并转换一些数据。考虑下表：

材料清单

*   BomId
*   父 ID

现在我正在使用 CTE 来填充它：

```
with BOM as 
(
select @@identity as BomId, null as ParentId <some other fields> from MyTable
union all
select @@identity as BomId, 
       parent.BomId as ParentId,
       some other fields
from MyTable2
inner join BOM parent on blabla)

insert into MyTable3
select * from BOM 
```

问题是：@@identity 只会给我在联合之前插入的最后一条记录的身份。

我能做些什么来获得身份？我可以修改 Table3 但不能修改 Table1 或 Table2

`row_number()`对于递归查询有未定义的行为，所以我不能在这里使用它。

我知道我可以使用 GUID，这是唯一的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:20:00.683

您无法在 CTE 中捕获生成的身份。`null`但是，您可以使用as将所有行插入到目标表中`ParentID`，然后`ParentID`在单独的更新语句中进行更新。为此，您可以使用[此处](https://stackoverflow.com/questions/5365629/using-merge-output-to-get-mapping-between-source-id-and-target-id)`merge`描述的技术。

```
-- Helper table to map new id's from source
-- against newly created id's in target
declare @IDs table
( 
  TargetID int,
  SourceID int,
  SourceParentID int
)

-- Use merge to capture generated id's
merge BillOfMaterials as T
using SourceTable as S
on 1 = 0
when not matched then
insert (SomeColumn) values(SomeColumn)
output inserted.BomId, S.BomID, S.ParentID into @IDs;

-- Update the parent id with the new id
update T
set ParentID = I2.TargetID
from BillOfMaterials as T
  inner join @IDs as I1
    on T.BomID = I1.TargetID
  inner join @IDs as I2
    on I1.SourceParentID = I2.SourceID 
```

[这是关于SE-Data](https://data.stackexchange.com/stackoverflow/query/67718)的完整工作示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:52:04.060

`@@identity`向您显示会话的实际身份值。

您不能使用`CTE`with`IDENTITY FUNCTION`但可以使用临时表：

```
SELECT IDENTITY(int,1,1) AS  BomId, un.*
INTO #BOM
FROM <your union> as un 
```

如果您想使用 CTE：

```
with BOM as 
(
  SELECT ROW_NUMBER() OVER(ORDER BY <column> ) AS  BomId, un.*
  FROM <your union> as un
) 
```

# android - 调整 GIF 动画大小

> ID：10278738
> 
> 赞同：2
> 
> 时间：2012-04-23T10:22:05.083
> 
> 标签：android, resize, gif

我在手机上保存了一个 .gif，然后在设备上显示它。它在 WVGA 上运行良好，但在 HVGA 上，由于屏幕尺寸的原因，它会削减大部分动画。**如何调整其大小以适应屏幕？**

```
 private Movie movie;

    //onDraw...     
    long now = android.os.SystemClock.uptimeMillis();

    if (moviestart == 0)
    { // first time
        moviestart = now;
    }

    if (movie != null)
    {
        int relTime = (int) ((now - moviestart) % movie.duration());
        movie.setTime(relTime);
        movie.draw(canvas, -10, -80); 
    } 
```

我也没有展示整个动画，我在上面削减了大约 20% 的折扣。

# c# - K-means 使用 C# 在空间中聚类 3D 点

> ID：10278741
> 
> 赞同：0
> 
> 时间：2012-04-23T10:22:13.337
> 
> 标签：c#, machine-learning, cluster-analysis, k-means

我正在寻找一个在 C# 中实现了 K-means 聚类算法的包（对于 3D 点）。我一直在环顾四周，但不确定某些实现。您有什么建议或使用过其中的任何一个吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:09:15.870

[OpenCV](http://opencv.willowgarage.com/wiki/)做 K-means。有出色的 .NET 端口[EmguCV](http://www.emgu.com/)。

# javascript - 如何在 Internet Explorer 中运行 fullCalendar？

> ID：10278742
> 
> 赞同：0
> 
> 时间：2012-04-23T10:22:19.160
> 
> 标签：javascript, jquery, html, internet-explorer, fullcalendar

我在 chrome/firefox 中运行它没有任何问题，但在 Internet Explorer 中却没有出现：有什么解决方案吗？

html:

```
<div id='calendar'></div> 
```

js：

```
$(document).ready(function() {
var calendar = $('#calendar').fullCalendar({

        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        }, ..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:41:45.740

# 更新

这也适用于 IE：

[http://jsfiddle.net/j6r4D/](http://jsfiddle.net/j6r4D/)

我认为你搞砸了你的一些`{` `}`地方......

# **老的：**

你在用`IE9`吗？

> [http://arshaw.com/fullcalendar/support/](http://arshaw.com/fullcalendar/support/)

Fullcalendar 尚未使用 Internet Explorer 9 进行测试，因此它可能无法正常工作...

**编辑：**

刚刚在 IE9 中测试了演示页面，它可以工作。所以这不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:28:09.593

问题很可能是不应该存在的属性或回调末尾的逗号。确保所有回调都用逗号分隔，最后一个除外。对回调中的所有属性执行相同操作。通常就是这样。如果它没有改变任何东西，请发布日历的整个代码，以便我们可以完整地查看它。我目前正在使用 fullcalendar，它在所有浏览器中都可以使用，包括 ie6、ie7、ie8 和 ie9，开箱即用。

# java - 通过 JPQL 调用 Oracle 函数返回日期但不返回时间

> ID：10278744
> 
> 赞同：0
> 
> 时间：2012-04-23T10:22:21.937
> 
> 标签：java, oracle, date, jpa, jpql

我有一个 Oracle 函数，它接受一个日期作为参数，并返回一个日期。函数是这样的：

```
FUNCTION my_func(par1 IN DATE, par2 IN NUMERIC) RETURN DATE AS
ret_val DATE;
BEGIN
....
END; 
```

我需要在我的 Java 应用程序中调用此函数，并且目前正在使用 JPQL 这样做。该代码适用于在 JBoss 5 上运行的 Web 应用程序，如下所示：

```
 Query q = entityMng.createNativeQuery("SELECT MY_FUNC(?1,?2) FROM DUAL");
   java.util.Date now = new Date();
   long param2 = 110L;
   q.setParameter(1, now);
   q.setParameter(2, param2);
   java.sql.Date retSql = null;
   Object obj = q.getSingleResult();
   if (obj != null) {
      retSql = (java.sql.Date) obj;
   } 
```

执行代码后，`retSql`变量包含正确的日期，但有一个 time = `00.00.000`。即使使用`java.util.Date`而不是`java.sql.Date`, 作为`retSql`.

在调查这个问题时，我遇到了这篇 SO 帖子[How to convert an Oracle Date field into java.util.Date through JPA](https://stackoverflow.com/questions/9298093/how-to-convert-correctly-an-oracle-date-field-into-java-util-date-through-jpa)，但我不明白如何在我的情况下使用“addScalar”。

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:23:18.520

尝试在函数中返回 TIMESTAMP，而不是 DATE。DATE 现在只是 Oracle 中的日期，而 TIMESTAMP 应该用于日期/时间。您可以在 JDBC 中设置一个向后兼容性标志来控制它。

您使用的是哪个 JPA 提供程序？EclipseLink 应该会自动处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:07:46.960

使用 XMLAdapter 怎么样？

公共类 DateAdapter 扩展 XmlAdapter {

```
// the desired format
private String pattern = "yyyy-MM-dd HH:mm:ss";

    /*few more formats http://www.xyzws.com/javafaq/how-to-use-simpledateformat-class-formating-parsing-date-and-time/142    */

public String marshal(Date date) throws Exception {

    return new SimpleDateFormat(pattern).format(date);

}

public Date unmarshal(String dateString) throws Exception {

    return new SimpleDateFormat(pattern).parse(dateString);

} 
```

然后将其添加到您的实体中；例如

```
private java.util.Date originDate;

@XmlJavaTypeAdapter(DateAdapter.class)
@Column(name = "ORIGIN_DATE", nullable = true)
@XmlElement(namespace = "my-namespace")
public Date getOriginDate() {
    return this.originDate;
} 
```

这是我曾经学习过的教程； [http://weblogs.java.net/blog/kohsuke/archive/2005/04/xmladapter_in_j.html](http://weblogs.java.net/blog/kohsuke/archive/2005/04/xmladapter_in_j.html)

# java - 查找 xml dom 树的最大节点深度

> ID：10278746
> 
> 赞同：1
> 
> 时间：2012-04-23T10:22:30.140
> 
> 标签：java, xml, dom, depth

java - 如何在java中使用dom找到xml文件的最大节点深度？

# javascript - 图形用户界面测试工具

> ID：10278749
> 
> 赞同：2
> 
> 时间：2012-04-23T10:22:49.720
> 
> 标签：javascript, selenium, webdriver

这是可以在**所有浏览器**中运行的最好的 GUI 测试工具。可以生成脚本的东西和这些脚本可以在其他应用程序中重用以重新执行。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:31:17.800

你应该看看[WebDriver](https://github.com/seleniumhq/selenium)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:39:56.517

有一些链接可以帮助您：

[http://en.wikipedia.org/wiki/List_of_GUI_testing_tools](http://en.wikipedia.org/wiki/List_of_GUI_testing_tools)

[https://stackoverflow.com/questions/120359/tools-for-automated-gui-testing-on-windows](https://stackoverflow.com/questions/120359/tools-for-automated-gui-testing-on-windows)

# java - 将文件上传到 FTP 服务器时出现异常

> ID：10278752
> 
> 赞同：1
> 
> 时间：2012-04-23T10:23:01.947
> 
> 标签：java, ftp

我想要做的是使用 java 代码将一个简单的文本文件上传到 FTP 服务器，但出现错误。我正在努力使其工作，但无法做到这一点。下面是代码。

```
 File file = new File("testFile.txt");
    FileOutputStream fo = new FileOutputStream(file);
    PrintStream ps = new PrintStream(fo);
    ps.println("BLA");
    ps.close();`enter code here`
    fo.close();
uploadFile(file,file.getName());

public void upload( String ftpServer, String user, String password,
    String fileName, FileInputStream is ) throws MalformedURLException,
    IOException  

            {

        log("inside upload...........");
        if (ftpServer != null && fileName != null && is != null)
        {
            StringBuffer sb = new StringBuffer( "ftp://" );
            // check for authentication else assume its anonymous access. 
            if (user != null && password != null) 
            {
                sb.append( user );
                sb.append( ':' );
                sb.append( password ); 
                sb.append( '@' );
            }
            sb.append( ftpServer );
            sb.append( '/' );
            sb.append( fileName );
            /*
             * type ==> a=ASCII mode, i=image (binary) mode, d= file directory
             * listing
             */
            sb.append( ";type=i" );

            BufferedInputStream bis = null;
            BufferedOutputStream bos = null;
            try
            {
                URL url = new URL( sb.toString() );
                URLConnection urlc = url.openConnection();

                log("urlc::1 "+urlc);

                bos = new BufferedOutputStream( urlc.getOutputStream() );
                log("bos:: "+bos);

                bis = new BufferedInputStream( is );

                int i;
                // read byte by byte until end of stream
                while ((i = bis.read()) != -1)
                {
                    log("i"+i);
                    bos.write( i );
                }
            }
            finally
            {
                if (bis != null)
                    try
                {
                        bis.close();
                }
                catch (IOException ioe)
                {
                    ioe.printStackTrace();
                }
                if (bos != null)
                    try
                {
                        bos.close();
                }
                catch (IOException ioe)
                {
                    ioe.printStackTrace();
                }
            }
        }
        else
        {
            log( "Input not available." );
        }
            } 
```

有关更多详细信息，我正在使用 java.net 导入。

我收到错误：

```
Exception e is :: java.io.IOException: illegal filename for a PUT
    at sun.net.www.protocol.ftp.FtpURLConnection.getOutputStream(Unknown Source)
    at ToolFileUpload.upload(ToolFileUpload.java:72)
    at APInterfaceTool.uploadFile(APInterfaceTool.java:861)
    at APInterfaceTool.createInvoiceTextFile(APInterfaceTool.java:613)
    at APInterfaceTool.generateOutBoundExtract(APInterfaceTool.java:426) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:04:26.577

引发异常的代码`FtpURLConnection.getOutputStream`是：

```
decodePath(url.getPath());
if (filename == null || filename.length() == 0) {
    throw new IOException("illegal filename for a PUT");
} 
```

如您所见，问题在于`filename`从 URL 中解析出来的组件为空或丢失。

最可能的原因是您为该`upload`方法提供了不适当的参数。不幸的是，您没有包含调用该方法的代码，所以我不能再进一步了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:30:30.153

您确定`FileInputStream is`调用函数时传递的参数不为空吗？

# rest - 代表其他事物的事物

> ID：10278753
> 
> 赞同：2
> 
> 时间：2012-04-23T10:23:02.003
> 
> 标签：rest, architecture

假设我想通过 REST 分发代表其他事物（假装电话号码）的事物。我们可以称之为陈述票。

目标是创建一个代表另一个事物但不透露它所代表的事物的内容的事物。让我们假设我们在谈论电话号码。

这里有一个选择。可以从存储在后端的随机数字和字母创建一张票，或者可以根据电话号码计算一张票。

票证创建的 PRO/CON：

*   PRO：无法破解
*   PRO：你可以让一张票过期 - （为什么这很好？）
*   缺点：每个请求的电话号码都有一张票，存储在后端服务器中

计算的优缺点

*   CON：可以破解计算并显示原始内容。
*   CON：计算机制不能改变——（真的？）
*   PRO：不需要后端存储。
*   PRO：计算是 REST 查找 (GET)，而不是 REST (POST)

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:20:54.677

您可以将“*代表票*”视为电话号码的**哈希**。当你这样想时，你会倾向于**Calculation**，你也会从大量的散列知识库中汲取经验。

# continuous-integration - CMake 和与多个依赖项目的持续集成

> ID：10278754
> 
> 赞同：2
> 
> 时间：2012-04-23T10:23:05.783
> 
> 标签：continuous-integration, cmake, ctest

我目前为 CI 配置 CMake/CTest。一切正常，除了以下几点：我们有几个相互依赖的项目。但是，在我们的顶层构建脚本中，它们只是按照正确的顺序构建的。在 CI 期间，对于每个项目，我只需在相应项目的构建目录中执行“make Continuous”。但是，当一个项目中的头文件被更新时，只有在“make Continuous”之后才会构建这个项目。另一个使用相同包含文件的依赖项目在“make Continuous”期间不会重建，因为在此项目中不会发生更新。

所以我的问题是：有什么方法可以强制在“make Continuous”期间完成构建步骤，而与 svn 更新的结果无关？

任何其他想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:37:55.223

add_dependencies 将适用于您的情况。

```
add_dependencies(target-name depend-target1 depend-target2 ...) 
```

也可以看看

[http://cmake.org/cmake/help/v2.8.10/cmake.html#command:add_dependencies](http://cmake.org/cmake/help/v2.8.10/cmake.html#command:add_dependencies)

# erlang - erlang mnesia db 是否适合保存数百万或更多记录？

> ID：10278755
> 
> 赞同：3
> 
> 时间：2012-04-23T10:23:13.320
> 
> 标签：erlang, mnesia

我想知道 mnesia db 是否适合保存百万或更多的记录？

1.  因为mnesia的存储位置只有3个，`ram, disc_only, disc`. 无法将部分记录保存在 ram 中。我怀疑如果我选择`disc`存储和记录的数量很大，内存缓冲区效率很低，如果`disc_only`存储和速度也很慢。

所以在每种情况下，保存多条记录都是不正确的选择，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:59:11.310

Mnesia 并没有那么糟糕，但是...

你可以在这里阅读为什么 mnesia suxs 不： [http ://noss.github.com/2009/04/04/mnesia-sucks-not.html](http://noss.github.com/2009/04/04/mnesia-sucks-not.html)

这是您问题的答案： [生产中的非常大的 Mnesia 表](https://stackoverflow.com/questions/7090193/very-large-mnesia-tables-in-production)

# c# - 使用 AppDomain 从程序集创建对象实例

> ID：10278757
> 
> 赞同：0
> 
> 时间：2012-04-23T10:23:16.413
> 
> 标签：c#, appdomain

我在 c:\MyDll\ClassLibrary1.dll 中有一个类库 ClassLibrary1.dll

```
public class Class1
{
    public void Run()
    {
        Console.WriteLine("Inside Class 1 Library ");
    }
} 
```

使用 AppDomain 我将如何为 Class1 类创建一个实例并在 .net 2.0 中执行方法“Run”注意：我不想使用 Assembly.LoadFile

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:33:28.100

本页讨论创建应用程序域、将程序集和类型加载到该应用程序域，然后关闭应用程序域：

[http://msdn.microsoft.com/en-us/library/yk22e11a.aspx](http://msdn.microsoft.com/en-us/library/yk22e11a.aspx)

# .net - 如何将包还原与仅包含工具的包一起使用？

> ID：10278758
> 
> 赞同：3
> 
> 时间：2012-04-23T10:23:19.240
> 
> 标签：.net, mercurial, nuget

我使用[启用了包还原功能的](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)Nuget 。因此`/packages`文件夹在忽略列表中（`.hgignore`因为我使用 mercurial）。这在我的 CI 服务器（Teamcity）上运行良好。

为了能够运行 xUnit 测试，我添加了[xunit.runners](http://nuget.org/packages/xunit.runners)包。然而，这个包只包含`tools`文件夹，并且在它被添加之后，mercurial 没有检测到任何更改（没有新的提交）。似乎只有`/packages`文件夹得到了更新。

如何为此类包（仅包含`tools`）启用包还原？

目前我发现的唯一解决方案是在以下位置使用正则表达式语法`.hgignore`：

```
syntax: regexp
packages/(?!xunit.runner).* 
```

但在这种情况下，它只是将所有包内容保存在源代码管理中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:44:31.577

您可以尝试手动将包 xunit.runners 添加到您的 packages.config 中。当您首次构建测试或解决方案时，这将解析 runner。

# cassandra - 在 Cassandra 中如何在操作中会像 SQL 一样工作？

> ID：10278760
> 
> 赞同：1
> 
> 时间：2012-04-23T10:23:31.013
> 
> 标签：cassandra

我的要求是我需要从 Cassandra 的一列中获取记录，该列的值不是我传递的字符串列表之外的特定字符串......例如，在数据中有一个列名称服务......列可能包含值 1,2,3,4,5.... 我不想显示 5... 我想显示具有 1 或 2 或 3 或 4 的记录... 如何实现这一点......你能请任何人帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:13:22.990

如果您将 1..5 作为值存储在列中，则别无选择，您只需要从客户端执行此操作。你不能从 cassandra 端过滤

如果 1..5 本身在您的列名中，例如

```
row_1 => { 1: value, 2:value... }
row_2 => { 1: value, 2:value... }
..
row_3 => { 1: value, 2:value... } 
```

那么你可以使用

```
SELECT 1..4 from YOUR_COLUMN_FAMILY where key='yourKey' 
```

作为另一种选择，如果您可以将 1..5 作为单独的行，例如

```
1 => { c1: value, c2:value... }
2 => { c1: value, c2:value... }
..
5 => { c1: value, c2:value... } 
```

你可以做

```
SELECT * from YOUR_COLUMN_FAMILY where key in (1,2,3,4) 
```

[您还可以在此处](http://www.datastax.com/docs/1.0/dml/using_cql#indexing-a-column)查看列上的@secondary Indexes

> 由于在列上创建了二级索引，所以可以直接查询它们的值

# python - Python基本数据结构实现

> ID：10278765
> 
> 赞同：0
> 
> 时间：2012-04-23T10:23:55.630
> 
> 标签：python

我是一名 C++ 程序员。最近开始使用 Python。我正在查看 Python 中的简单链表实现。我在这里有点困惑。不仅在这里，而且在 Tree 实现等中也存在同样的问题。

class Element 包含数据和指向下一个节点的指针。完美没问题。但是在 LinkedList 类中我可以看到 self.tail.next=e，现在 next 是 Element 类的变量，即使它是公共的，但 Element 类的对象也必须访问它。在这里，我们如何编写 self.tail.next = e 之类的东西，因为 tail 只是 LinkedList 类的变量，而不是 Element 类的对象。我很困惑。

```
class Element:
        def __init__(self,x):
                self.data=x
                self.next=None

class LinkedList:
        def __init__(self):
                self.head=None
                self.tail=None

        def append(self,x):
                # create a new Element
                e = Element(x)
                # special case: list is empty
                if self.head==None:
                        self.head=e
                        self.tail=e
                else:
                        # keep head the same
                        self.tail.next=e
                        self.tail=e 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:50:59.370

Python 使用引用。一切总是通过引用传递，值总是通过引用共享（除非明确复制）。

分配对象意味着将引用分配给该对象。这种方式`self.tail.next = e`意味着： self.tail 期望引用 Element 类的对象。该对象具有 .next 属性。这`self.tail.next = e`意味着非空列表的最后一个元素将指向刚刚附加的新元素。然后`self.tail = e`意味着对最后一个元素的引用被移动到刚刚附加的最后一个元素。

Python 中的任何变量都只是具有给定名称的引用变量。它会自动取消引用。因此，对于那些熟悉经典编译语言（如 C++）的人来说，它可能看起来很奇怪。

我不确定您是否可以在不创建帐户的情况下在 Expert Exchange 上显示文章。如果是，请查看[http://www.experts-exchange.com/Programming/Languages/Scripting/Python/A_6589-Python-basics-illustrated-part-2.html](http://www.experts-exchange.com/Programming/Languages/Scripting/Python/A_6589-Python-basics-illustrated-part-2.html)即[http://www.experts -exchange.com/Programming/Languages/Scripting/Python/A_7109-Python-basics-illustrated-part-3.html](http://www.experts-exchange.com/Programming/Languages/Scripting/Python/A_7109-Python-basics-illustrated-part-3.html)用于解释问题的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:37:25.643

唯一初始化 self.tail 的地方是 append ，在那里你将它设置为等于 e。就在你上面一点点`e = Element(x)`，所以 e*是*一个 Element 类型的对象。请注意，在您打电话的那一刻，`self.tail.next=e`您知道 head 不是 none，因此 tail 也不是 None，而是 Element 的一个实例。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T10:37:52.563

你写了：

> 现在 next 是 Element 类的变量，即使它是公共的，但 Element 类的对象也必须访问它。

那里有一个误解。公共成员（即除了以下划线开头的所有成员之外的所有成员）可以从任何地方访问，而不仅仅是从同一类的方法中访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T10:29:44.257

`next`并且`tail` **是**元素，这就是原因。这适用于任何语言的链表，包括 C 或 C++。 *链表是与指针/引用链接在一起的元素列表。*

遍历列表时，这些链接用于从节点（元素）到节点。如果他们引用其他链表就没有意义了，不是吗？列表中的`head`第一个元素是 ，最后一个元素是`tail`，`next`节点中指向的元素是列表中它之后的元素，`previous`节点是它之前的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T12:20:37.680

在 python 中，一切都是参考。

请：将列表实现与您的（应用程序）数据分开。

与在 C++ 中一样，封装访问方法是一种很好的风格——尽管如此，因为对实例字段没有访问限制，所以可以从任何地方访问它们。

一个通用双链表的想法（这只是一个应该增强的骨架 - 但我希望它能够传达这个想法）。

```
class DoubleLinkedList(object):

    class ListNode(object):

        def __init__(self):
            self.__next = None
            self.__prev = None

        def next(self):
            return self.__next

        def prev(self):
            return self.__prev

        def set_next(self, next_node):
            self.__next = next_node

        def set_prev(self, prev_node):
            self.__prev = prev_node

        def is_last(self):
            return self.next()==None

    def __init__(self):
        '''Sets up an empty linked list.'''
        self.__head = DoubleLinkedList.ListNode()
        self.__tail = DoubleLinkedList.ListNode()
        self.__head.set_next(self.__tail)
        self.__tail.set_prev(self.__head)

    def first(self):
        return self.__head.next()

    def last(self):
        return self.__tail.prev()

    def append(self, list_node):
        list_node.set_next(self.__tail)
        list_node.set_prev(self.__tail.prev())
        self.__tail.set_prev(list_node)
        list_node.prev().set_next(list_node)

########################################

class MyData(DoubleLinkedList.ListNode):
    def __init__(self, d):
        DoubleLinkedList.ListNode.__init__(self)
        self.__data = d

    def get_data(self):
        return self.__data

ll = DoubleLinkedList()

md1 = MyData(1)
md2 = MyData(2)
md3 = MyData(3)

ll.append(md1)
ll.append(md2)
ll.append(md3)

node = ll.first()
while not node.is_last():
    print("Data [%s]" % node.get_data())
    node = node.next() 
```

# c++ - 多线程环境中的变量同步

> ID：10278768
> 
> 赞同：0
> 
> 时间：2012-04-23T10:24:00.250
> 
> 标签：c++, c, multithreading

这些问题仅限于 X86/LINUX 环境。

**一个线程写一个带锁的变量，其他线程读取这个变量没有锁。当写线程解锁时，其他线程是否可以立即读取新值？**

```
 volatile int a=0;

   /* thread 1(write) */    
   lock();  
   a = 10;  
   unlock();  

   /* thread 2(read) */  
   printf("%d",a); 
```

**一个线程读取一个带锁的变量，另一个线程不带锁地写入这个变量。当read thread read after write完成后，是否可以立即读取新值？**

```
 volatile int a=0;

   /* thread 1(read) */  
   lock();  
   printf("%d",a);  
   unlock();  

   /* thread 2(write) */  
   a = 10; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:27:12.447

> 一个线程写一个带锁的变量，其他线程读取这个变量没有锁。当写线程解锁时，其他线程是否可以立即读取新值？

是的，他们可以，但是是什么确保所有读取线程在写入开始之前都不会读取？

> 一个线程读取一个带锁的变量，另一个线程不带锁地写入这个变量。当read thread read after write完成后，是否可以立即读取新值？

是的，但又是什么确保了读写的顺序？

由于您需要在特定场景中进行操作，因此您需要在此处提供某种形式的**同步**。最简单的是使用像**Semaphore**这样的信号计数器。
请注意，`volatile`它不为您提供序列的排序，它仅确保不会对编译部分进行优化，因此排序仍然是您的责任。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:56:22.910

他们可以，但不能保证。在这两种情况下，您都有未定义的行为。一旦多个线程访问一个对象，并且至少有一个线程修改它，**所有**访问都必须同步，否则会导致未定义的行为。

根据 C++11 和 Posix，这是正确的。Linux 遵循 Posix 规则。在某些版本的 VC++ 中，`volatile`已经扩展了原子语义。（在 Posix 下，唯一与 `volatile`关注信号和`longjmp`/相关联的语义`setjmp`。它完全不相关，并且在线程中很大程度上被忽略了。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:41:01.777

当心。*仅仅因为变量包含在*锁中，并不意味着如果您的代码的其他部分不保护对`a`. 在您的第一个示例中，您锁定了对更改的代码的访问，`a`但随后`unlock()`您使用了未受保护的读取。就在那次阅读之前或期间，另一个线程可能会改变价值，`a`给你留下非常意想不到和不可预测的结果。

换句话说，您并没有锁定对变量本身的访问，而是将代码中的某些路径限制为*互斥*

此外，您的使用`volatile`令人担忧。我不确定你为什么使用它，但我猜它不会给你你所期望的。请阅读[此](http://software.intel.com/en-us/blogs/2007/11/30/volatile-almost-useless-for-multi-threaded-programming/)内容以获得更完整的解释。

# android - AsyncTask 类中 onPostExecute() 中的 ProgressValue

> ID：10278771
> 
> 赞同：0
> 
> 时间：2012-04-23T10:24:28.847
> 
> 标签：android, android-asynctask, progress

`ProgressValue`（传入 onPostExecute() 中的）如何`AsyncTask`表示。它的价值取决于什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:27:27.237

你的意思是`onProgressUpdate()`？

进度值是您想要的任何值。如果要显示百分比进度条，可以使用 0..100 范围内的整数。如果要显示文本消息，则传递一个字符串。

在后台操作的某些点，`publishProgress()`使用您要发送的任何值（整数、字符串等）进行调用。这将被传递到`onProgressUpdate()`主线程上的方法中，因此您可以根据需要在 UI 中显示该值。

如果您知道要完成多少工作，以及您的操作完成了多远（可能您的后台操作在循环中运行），那么在循环的每次迭代中，您可以将进度发布为剩余工作量的百分比.

如果后台任务包含一堆不同的操作，那么您可能想要发送诸如“正在加载数据”、“正在准备报告”之类的消息。

完全由您决定要发送哪些值以及如何计算它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:41:15.987

创建 AsyncTask 类时，您可以指定参数、进度和结果的类型：

```
private class MyTask extends AsyncTask<ParamType, ProgressType, ResultType> { ... } 
```

如果您想使用进度值来更新进度条，我建议您使用 Integer，这样您的类声明将如下所示：

```
private class MyTask extends AsyncTask<ParamType, Integer, ResultType> { ... } 
```

应在某处进行以下调用`doInBackground()`：

```
publishProgress(progress_value);  // progress_valus is integer 
```

您的`onProgressUpdate()`成员将如下所示：

```
protected void onProgressUpdate(Integer... values)  {
    super.onProgressUpdate(values);
    dialog.setProgress(values[0]);  // dialog is the ProgressDialog
} 
```

# android - android，通过意图发送带有正确顺序幻灯片的彩信

> ID：10278773
> 
> 赞同：0
> 
> 时间：2012-04-23T10:24:43.487
> 
> 标签：android, slideshow, mms

我想将多个图像附加到 mms 并将正文附加到其中一张幻灯片。这是我将位图保存到内部存储代码：

```
Bitmap b2 = DrawingUtil.buildMyBitmap();
                fos = openFileOutput("1.jpg", Context.MODE_WORLD_READABLE);
                b2.compress(Bitmap.CompressFormat.JPEG, 20, fos);
                fos.flush();
                fos.close(); 
```

还有一个几乎可以正常工作的意图。

```
final Intent mmsIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);

mmsIntent.setType("vnd.android-dir/mms-sms");

mmsIntent.putExtra("address", "0123456");
mmsIntent.putExtra("subject", "the subject");
mmsIntent.putExtra("sms_body", "the body");

uris.add(Uri.fromFile(getFileStreamPath("1.jpg")));
uris.add(Uri.fromFile(getFileStreamPath("2.jpg")));
uris.add(Uri.fromFile(getFileStreamPath("3.jpg")));
uris.add(Uri.fromFile(getFileStreamPath("4.jpg")));

mmsIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
MainActivity.this.startActivityForResult(Intent.createChooser(mmsIntent, getString(R.string.chooseIntentMMS)), SEND_EMIAL_INTENT); 
```

正在发送带有幻灯片的彩信，但我有两个问题仍未解决。首先，主体总是附加到第一张幻灯片，但我想将它附加到第三张图像。其次，图像附加的顺序不正确，因此幻灯片首先显示 3.png，然后是 2、4、1。当我将图像更改为另一个位图时，顺序不同，但仍然是“随机的”。

你能帮我吗？预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:11:52.873

好的，顺序不正确，因为第一个位图的尺寸太大。它被压缩，然后添加到幻灯片的末尾。将尺寸缩小到 480x480 解决了问题。

但我仍然不知道如何将文本添加到其他幻灯片。

# android - 无法通过套接字连接

> ID：10278774
> 
> 赞同：0
> 
> 时间：2012-04-23T10:24:45.177
> 
> 标签：android, sockets, connection

美好的一天，我尝试通过 Socket 连接两部安卓手机。我有两个不同的应用程序（服务器和客户端）。服务器由一个 Activity 组成

```
public class ShareCameraActivity extends Activity {
    /** Called when the activity is first created. */
    private TextView serverStatus;

    // default ip
    public static String SERVERIP = "10.0.2.15";

    // designate a port
    public static final int SERVERPORT = 12345;

    private Handler handler = new Handler();

    private ServerSocket serverSocket;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        serverStatus = (TextView) findViewById(R.id.server_status);

        SERVERIP = getLocalIpAddress();

        Thread fst = new Thread(new ServerThread());
        fst.start();
    }

    public class ServerThread implements Runnable {

        public void run() {
            try {
                if (SERVERIP != null) {
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Listening on IP: " + SERVERIP);
                        }
                    });
                    serverSocket = new ServerSocket(SERVERPORT);
                    while (true) {
                        // listen for incoming clients
                        Socket client = serverSocket.accept();
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                serverStatus.setText("Connected.");
                            }
                        });

                        try {
                            BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                            String line = null;
                            while ((line = in.readLine()) != null) {
                                Log.d("ServerActivity", line);
                                handler.post(new Runnable() {
                                    @Override
                                    public void run() {
                                        // do whatever you want to the front end
                                        // this is where you can be creative
                                    }
                                });
                            }
                            break;
                        } catch (Exception e) {
                            handler.post(new Runnable() {
                                @Override
                                public void run() {
                                    serverStatus.setText("Oops. Connection interrupted. Please reconnect your phones.");
                                }
                            });
                            e.printStackTrace();
                        }
                    }
                } else {
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Couldn't detect internet connection.");
                        }
                    });
                }
            } catch (Exception e) {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Error");
                    }
                });
                e.printStackTrace();
            }
        }
    }

    // gets the ip address of your phone's network
    private String getLocalIpAddress() {
        try {
            for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
                NetworkInterface intf = en.nextElement();
                for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                    InetAddress inetAddress = enumIpAddr.nextElement();
                    if (!inetAddress.isLoopbackAddress()) { return inetAddress.getHostAddress().toString(); }
                }
            }
        } catch (SocketException ex) {
            Log.e("ServerActivity", ex.toString());
        }
        return null;
    }

    @Override
    protected void onStop() {
        super.onStop();
        try {
             // make sure you close the socket upon exiting
             serverSocket.close();
         } catch (IOException e) {
             e.printStackTrace();
         }
    }
} 
```

客户是

```
public class ShareCameraClientActivity extends Activity {

        private EditText serverIp;

        private Button connectPhones;

        private String serverIpAddress = "10.48.97.53";

        private boolean connected = false;

        private Handler handler = new Handler();

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            serverIp = (EditText) findViewById(R.id.server_ip);
            connectPhones = (Button) findViewById(R.id.connect_phones);
            connectPhones.setOnClickListener(connectListener);
        }

        private OnClickListener connectListener = new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (!connected) {
                    serverIpAddress = serverIp.getText().toString();
                    if (!serverIpAddress.equals("")) {
                        Thread cThread = new Thread(new ClientThread());
                        cThread.start();
                    }
                }
            }
        };

        public class ClientThread implements Runnable {

            public void run() {
                try {
                    serverIpAddress = "10.48.97.53";
                    InetAddress serverAddr = InetAddress.getByName(serverIpAddress);

                    Log.d("ClientActivity", "C: Connecting...");
                    Socket socket = new Socket(serverAddr, ServerActivity.SERVERPORT);
                    connected = true;
                    while (connected) {
                        try {
                            Log.d("ClientActivity", "C: Sending command.");
                            PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                                        .getOutputStream())), true);
                                // where you issue the commands
                                out.println("Hey Server!");
                                Log.d("ClientActivity", "C: Sent.");
                        } catch (Exception e) {
                            Log.e("ClientActivity", "S: Error", e);
                        }
                    }
                    socket.close();
                    Log.d("ClientActivity", "C: Closed.");
                } catch (Exception e) {
                    Log.e("ClientActivity", "C: Error", e);
                    connected = false;
                }
            }
        }

} 
```

服务器工作正常并获取我的 IP 地址，但是，客户端不想连接他，并且总是会遇到连接超时的异常情况。

# xcode - 我们可以在 Cocos2d 中使用 CoreAnimation 吗？

> ID：10278775
> 
> 赞同：0
> 
> 时间：2012-04-23T10:24:48.633
> 
> 标签：xcode, performance, cocos2d-iphone, core-animation

所以我想知道是否可以在 Cocos2d 中使用 Core Animation（比如在代码中添加 CABAsicAnimation）。请问我该怎么做？如果是，会影响性能吗？谢谢.:) 对不起我的英语我是法国人:/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:16:44.097

您可以将 UIKit 视图与 Cocos2D 视图混合使用，并且由于所有 UIView 都支持 Core Animation，因此您可以同时在屏幕上显示两者。

查看您的 viewController 并注意 Cocos 场景是如何设置为子视图的。只需将另一个子视图添加到视图控制器，两者就可以同时出现在屏幕上，您可以在它们之间移动并进行任何您想要的操作。

# nhibernate - 集成一个依赖于 NHibernate 3.x 的 Orchard 模块

> ID：10278777
> 
> 赞同：0
> 
> 时间：2012-04-23T10:25:17.643
> 
> 标签：nhibernate, orchardcms

我们有一个现有的站点，我们想将其转换为 Orchard 模块。该模块将需要继续使用它自己的数据库和数据访问。

是否可以使用与 Orchard 框架不同版本的 NHibernate (3.2) 以及可以使用哪些扩展点来挂钩 Begin/End 请求以便`ISession`管理 s？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:00:35.433

对不起，不，那是不可能的。或者至少非常非常非常困难。可能不值得。

# http - 互联网数据连接失败

> ID：10278778
> 
> 赞同：0
> 
> 时间：2012-04-23T10:25:35.390
> 
> 标签：http, connection, gson, wifi

我的用户报告说，当他们使用 WiFi 下载 JSON 文件时，该应用程序就像魅力一样工作，但是当他们尝试使用他们的数据连接下载相同的文件时：GPRS、3G、3.5G 等......应用程序强制关闭。并非所有类型的智能手机都会发生这种情况，例如，我的 LG Optimus Black 不会发生这种情况。

为了检索这个文件，我使用了 AsyncTask。

```
private class GetData extends AsyncTask<Void, Void, Void> {
        protected Void doInBackground(Void... args) {

            DefaultHttpClient httpclient = new DefaultHttpClient();
            try {

                HttpGet httpget = new HttpGet("http://url.com);
                HttpResponse response = httpclient.execute(httpget);
                strPlayers = inputStreamToString(response.getEntity().getContent()).toString();
            }
            catch (IOException e) { e.printStackTrace(); } 
            finally { httpclient.getConnectionManager().shutdown(); }

           return null;
        }

        protected void onPostExecute(Void result) {

            Players players = new Gson().fromJson(strPlayers, Players.class);

            quantity_darkmatter.setText(String.valueOf(players.userName));

        }
    } 
```

这是 StackTrace()

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{carl.fri.fer.omegan/carl.fri.fer.omegan.Research}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
at android.app.ActivityThread.access$1500(ActivityThread.java:121)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3701)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at carl.fri.fer.omegan.Research.onStart(Research.java:613)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
at android.app.Activity.performStart(Activity.java:3791)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1632)
... 11 more 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:51:41.197

对于非WIFI，连接可能需要更多时间，因此可能是连接超时问题，发生这种情况时 strPlayers 将为空白，并且由于 onPostExecute 中没有错误处理，这可能会给 Gson.fromJson 打嗝并使其抛出异常...在尝试解析它或将其放入 try-catch 块之前尝试测试 strPlayers!=null 以查看它是否引发某种异常。

doInBackground 函数中是否有 e.printStackTrace() 的输出？

# iphone - Xcode 中的信号 SIGABRT

> ID：10278779
> 
> 赞同：0
> 
> 时间：2012-04-23T10:25:36.717
> 
> 标签：iphone, xcode, uitableview, xcode4.3

我有一张桌子，我想在其中点击单元格，它会将我带到另一张桌子。在 Xcode 4.3.2 中运行时出现此错误：

```
 return UIApplicationMain(argc, argv, nil, NSStringFromClass([RanchForecastTouchAppDelegate class]));

 Thread 1: Signal SIGABRT 
```

我在这个论坛上看到很多与此错误相关的答案，但它没有用，这就是我再次提问的原因。

我的代码是： CreateViewController.h

```
#import <UIKit/UIKit.h>

@interface CreateViewController : UIViewController <
UITableViewDataSource, UITableViewDelegate>
{
NSArray *tableData;

}

@property (nonatomic, retain) NSArray *tableData;
@end 
```

创建视图控制器.m

```
#import "CreateViewController.h"

@implementation CreateViewController
@synthesize tableData;

#pragma mark - View lifecycle

- (void)viewDidLoad
{
tableData = [[NSArray alloc] initWithObjects:@"Johan", @"Paul",@"George",@"Ringo", nil];
[super viewDidLoad];
// Do any additional setup after loading the view.
}

#pragma mark - TableView Data Source methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
{
return [tableData count];

}

  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
UITableViewCell *cell = nil;

cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];
if(cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];

}
cell.textLabel.text = [tableData objectAtIndex:indexPath.row];

return cell;
}

 @end 
```

控制台上的错误消息：

`[UIViewController tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x68ab4d0`

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIViewController tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x68ab4d0'`

编辑：

```
#import "RanchForecastTouchViewController.h"

@interface RanchForecastTouchViewController ()

@end

@implementation RanchForecastTouchViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} else {
    return YES;
}
}

 @end 
```

RanchForecastTouchViewController.h

```
#import <UIKit/UIKit.h>

@interface RanchForecastTouchViewController : UIViewController

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:32:35.847

您在行尾添加了分号

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
{ ...
}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{....
} 
```

只需删除它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T00:26:36.360

检查您的用户界面连接，这将是一些错误的连接！

# hbase - 谁能告诉我如何使用 cygwin 在 Windows 上使用 hadoop 1.0.1 配置 Hbase 0.92.1

> ID：10278780
> 
> 赞同：0
> 
> 时间：2012-04-23T10:25:39.967
> 
> 标签：hbase

我已经尝试了网络上给出的每一个步骤，以在伪分布式模式下配置 hbase，但未能运行。它抛出关于动物园管理员的“找不到类”异常。我是 hbase 新手...请告诉我配置 hbase 的步骤..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:54:19.983

请参阅 Alan S 的教程。将外部 Zookeeper 添加到 hbase。

[http://alans.se/blog/2010/hadoop-hbase-cygwin-windows-7-x64/](http://alans.se/blog/2010/hadoop-hbase-cygwin-windows-7-x64/)

# javascript - 如何使用 javascript 代码删除缓存？

> ID：10278781
> 
> 赞同：0
> 
> 时间：2012-04-23T10:25:46.617
> 
> 标签：javascript, jquery, html, caching

我最近在 HTML 和 Javascript + jQuery 中构建的项目有一个小问题。我想防止页面缓存，因为我需要以一定的时间间隔刷新页面的某些区域。

如果我重新加载页面，那么我们可以将“no-cache”META 标记设置为标题。但是我不会重新加载页面，尽管 jQuery 使用 AJAX 调用 XML 文件，但这些 javascript 文件正在被缓存，并且会发生内存开销。因此，我的 FireFox 崩溃并且内存使用量增加到 2 GB。

任何人都可以建议我一些富有成果的东西，以便我可以解决内存开销问题并在浏览器上顺利运行我的应用程序。

```
function refresh() {
    $('#table_info').remove();
    $('#table').hide();
    if (refreshTimer) {
        clearTimeout(refreshTimer);
        refreshTimer = null ;
    }
    $.ajax({
        document.getElementById('refresh_topology').disabled=true; 
        $('<div id="preload_xml"></div>').html('<img src="pic/dataload.gif" alt="loading data" /><h3>Loading Data...</h3>').prependTo($("#td_123"));
        $("#topo").hide();
        $('#root').remove();
        show_topology();
    });
} 
```

这是代码，并且 show_topology() 被频繁调用以使每次拓扑的不同状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:20:42.287

禁用 jquery ajax 缓存：

```
$.ajax({cache: false}); 
```

# css - CSS 中的“缩放”有什么作用？

> ID：10278783
> 
> 赞同：63
> 
> 时间：2012-04-23T10:25:57.223
> 
> 标签：css

我发现一些 jQuery 插件，在他们的 css 规则中使用了“缩放”描述符，我什至查看了 w3c 网站，发现它是用来放大的，但我该如何实现呢？或者我必须定义一些视口？我如何定义这样的视口？还是我对整个事情都错了？

是否可以像这样使用它

```
a {
    zoom:1;
}

a:hover {
   zoom:2;
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-23T10:34:55.337

`-moz-transform: scale(x)`缩放不包含在 CSS 规范中，但它在 IE、Safari 4、Chrome 中受支持（您可以在 Firefox 3.5 起获得类似的效果）。见[这里](http://www.fix-css.com/2011/05/css-zoom/)。

所以，所有浏览器

```
 zoom: 2;
 zoom: 200%; 
```

会将您的对象放大 2 倍，因此就像将大小加倍。这意味着如果你有

```
a:hover {
   zoom: 2;
} 
```

悬停时，`<a>`标签将放大 200%。

就像我说的，在 FireFox 3.5+ use`-moz-transform: scale(x)`中，它做的事情大致相同。

编辑：针对来自 的评论`thirtydot`，我会说这`scale()`不是一个完整的替代品。它不会像`zoom`做的那样线性扩展，而是会扩展开箱即用的内容，而不是强迫其他内容。[在此处](http://www.w3schools.com/cssref/playit.asp?filename=playcss_transform_scale)查看此操作。此外，Opera 似乎`zoom`不支持。

[这篇](http://htmlcssjavascript.com/css/using-css-zoom-and-css-transforms-for-a-better-increase-text-size-button/)`scale`文章对使用 jQuery 解决不兼容性的方法和解决方法提供了有用的见解。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-04-23T10:49:48.553

令人惊讶的是，没有人提到这`zoom: 1;`对 IE6-7 有用，通过触发[hasLayout](https://msdn.microsoft.com/en-us/library/bb250481(v=vs.85).aspx)来解决大多数仅 IE 的错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-06T11:32:06.540

CSS`zoom`属性现在得到广泛支持，占浏览器总数的 86% 以上。

见：[http ://caniuse.com/#search=zoom](http://caniuse.com/#search=zoom)

```
document.querySelector('#sel-jsz').style.zoom = 4;
```

```
#sel-001 {
  zoom: 2.5;
}
#sel-002 {
  zoom: 5;
}
#sel-003 {
  zoom: 300%;
}
```

```
<div id="sel-000">IMG - Default</div>

<div id="sel-001">IMG - 1X</div>

<div id="sel-002">IMG - 5X</div>

<div id="sel-003">IMG - 3X</div>

<div id="sel-jsz">JS Zoom - 4x</div>
```

[![浏览器支持：caniuse](../Images/31cfb964a9ceada77800b2391c533738.png)](https://i.stack.imgur.com/7A5fD.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T10:28:03.587

此属性控制当前元素的放大级别。元素的渲染效果是相机上的“缩放”功能。即使这个属性没有被继承，它仍然会影响子元素的渲染。

例子

```
 div { zoom: 200% }
 <div style=”zoom: 200%”&gt;This is x2 text </div> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-05T14:39:49.443

zoom 是 @viewport 描述符的 css3 规范，如此处所述

[http://dev.w3.org/csswg/css-device-adapt/#zoom-desc](http://dev.w3.org/csswg/css-device-adapt/#zoom-desc)

用于缩放整个视口（“屏幕”）。它也恰好在许多浏览器中缩放单个元素，但不是全部。css3 指定 transform:scale 应该用来实现这样的效果：

[http://www.w3.org/TR/css3-transforms/#transform-functions](http://www.w3.org/TR/css3-transforms/#transform-functions)

但它与那些支持它的浏览器中的“元素缩放”略有不同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T10:27:59.710

只有 IE 和 WebKit 支持缩放，是的，理论上它完全符合您的要求。

在图像上尝试一下，看看它的完整效果:)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-23T10:33:45.487

正如 Joshua M 指出的那样，缩放功能不仅在 Firefox 中受支持，但您可以简单地修复它，如下所示：

```
div.zoom {
  zoom: 2; /* all browsers */
 -moz-transform: scale(2);  /* Firefox */
} 
```

# iphone - 以下两种方法调用的区别

> ID：10278784
> 
> 赞同：1
> 
> 时间：2012-04-23T10:25:58.753
> 
> 标签：iphone, objective-c, selector

```
[self performSelectorOnMainThread:@selector(customFoo:) withObject:obj waitUntilDone:YES]; 
```

和

```
[self customFoo:obj]; 
```

据我所知，如果在主线程上调用第二个，它们之间没有任何区别......对吗？

他们两个之间的基本区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:30:13.960

运行时行为是相同的。但是在编译代码时有一个区别：第二个只有在定义了方法的情况下才会编译`customFoo:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:40:36.197

**performSelector：**向接收者发送指定的消息，并返回消息的结果。

PerformSelector 用于调用您想要执行的方法，这意味着您可以选择不同的选项来执行特定的任务（方法）示例...

```
– performSelector:withObject:afterDelay: // will execute method after specific delay.. 
– performSelector:withObject:afterDelay:inModes: 
– performSelectorOnMainThread:withObject:waitUntilDone: 
– performSelectorOnMainThread:withObject:waitUntilDone:modes:
– performSelector:onThread:withObject:waitUntilDone: 
– performSelector:onThread:withObject:waitUntilDone:modes: 
```

`– performSelectorInBackground:withObject:`// 在后台执行任务。所以，你的 ManinThread(Application) 不会停止响应......就像多线程一样......

直接方法 ( `[self customFoo:obj];`) 不会提供执行任务的选择。

[有关更多详细说明，请访问此参考。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)

希望对你有帮助...

# iphone - 从 Content-Disposition 标头获取文件名

> ID：10278791
> 
> 赞同：1
> 
> 时间：2012-04-23T10:26:28.953
> 
> 标签：iphone, objective-c, ios, xcode

我目前正在检查此标头，如果可用，我将尝试从中获取文件名。问题是，检索它的最佳方法是什么？我了解 Content-Disposition 标头可能会出现不同的参数。以下示例：

```
Content-Disposition = "inline; filename=sample-file-123.pdf"
Content-Disposition = "attachment; filename="123.zip"" 
```

我只对获取文件名感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:43:12.873

我会按照以下方式做一些事情：

```
- (NSString *)getFilenameFrom:(NSString *)string {
    NSRange startRange = [string rangeOfString:@"filename="];

    if (startRange.location != NSNotFound && startRange.length != NSNotFound) {
        int filenameStart = startRange.location + startRange.length;
        NSRange endRange = [string rangeOfString:@" " options:NSLiteralSearch range:NSMakeRange(filenameStart, [string length] - filenameStart)];
        int filenameLength = 0;

        if (endRange.location != NSNotFound && endRange.length != NSNotFound) {
            filenameLength = endRange.location - filenameStart;
        } else {
            filenameLength = [string length] - filenameStart;
        }

        return [string substringWithRange:NSMakeRange(filenameStart, filenameLength)];
    }
    return nil; //or return @"", whatever you like
} 
```

当我在浏览器中进行此操作时，您必须检查它（无权访问 xcode atm）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-25T20:42:55.967

有一个专用的 API：`URLResponse.suggestedFilename`

因此，如果您从 URLResponse 获取标头，则只需调用

```
let filename: String = response.suggestedFilename ?? "default" 
```

你就完成了。请注意，尽管文档说了什么，但返回值是可选的，因此如果您敢（我不会），您必须提供默认值或强制展开。

从[文档](https://developer.apple.com/documentation/foundation/urlresponse/1415924-suggestedfilename)中：

> 该方法首先检查服务器是否使用内容处置标头指定了文件名。如果使用该机制未指定有效文件名，则此方法检查 URL 的最后一个路径组件。如果使用最后一个路径组件无法获得有效的文件名，则此方法使用 URL 的主机作为文件名。如果 URL 的主机无法转换为有效的文件名，则使用文件名“未知”。在大多数情况下，此方法会根据 MIME 类型附加正确的文件扩展名。此方法总是返回一个有效的文件名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-29T16:04:13.987

```
+ (NSString *)filenameFromContentDispositionHeader:(NSString *)contentDispositionHeader {
  NSString *pattern = @"filename=\"(.*)\"";
  NSRegularExpression *regex =
      [NSRegularExpression regularExpressionWithPattern:pattern options:0 error:nil];
  NSTextCheckingResult *result =
      [regex firstMatchInString:contentDispositionHeader
                        options:0
                          range:NSMakeRange(0, contentDispositionHeader.length)];
  NSRange resultRange = [result rangeAtIndex:0];

  if (resultRange.location == NSNotFound) {
    return nil;
  } else {
    return [contentDispositionHeader substringWithRange:
        NSMakeRange(resultRange.location + 10, resultRange.length - 11)];
  }
} 
```

请注意，如果您不能确定文件名是否用双引号括起来，则需要修改模式。

# vb.net - 尝试使用 SerialPort Control 读取 12 字节的十六进制字符串（RFID 标签 ID）

> ID：10278793
> 
> 赞同：0
> 
> 时间：2012-04-23T10:26:33.947
> 
> 标签：vb.net, visual-studio-2010, serial-port

我正在尝试制作一个可以从串行端口读取 12 字节十六进制字符串并将其显示到文本框中的应用程序，源是使用 RS232-USB 转换器连接到我的 USB 端口的 RFID 模块。

我的第一个问题是由于无效的跨线程操作而访问 datarecieved 事件中的文本框。在谷歌上搜索后，我复制/粘贴了让它工作所需的代码，这些都是跨线程函数。

OpenPort 函数和 Datarecieved 事件是我自己的代码，其余的我从谷歌上下来。

然后应用程序工作了，但我会得到一个不完整的代码，第一次滑动我会得到所有 12 位数字，并且每隔一次滑动，第一个字节就会消失。在阅读更多内容后，我决定创建一个数组，即传入数据的大小（如下面的代码所示），但现在我再次遇到跨线程错误。

我知道我使用数组的方式有问题。这超出了我的 VB 知识范围，我在这里不知所措，可以使用一些专家帮助。我是一名电子工程师，并且自学了一点编程来为我的硬件创建一些应用程序。

谢谢。

更新代码：

```
Public Class Form3
    Dim msg As String

    Private Sub Form3_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        For Each s In System.IO.Ports.SerialPort.GetPortNames()
            lstPorts.Items.Add(s)
        Next s

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        If lstPorts.SelectedIndex = -1 Then
            MessageBox.Show("Please select a port")
            Exit Sub
        Else
            SerialPort1.BaudRate = 9600
            SerialPort1.DataBits = 8
            SerialPort1.Parity = IO.Ports.Parity.None
            SerialPort1.StopBits = IO.Ports.StopBits.One
            SerialPort1.PortName = lstPorts.SelectedItem.ToString
            SerialPort1.Open()
        End If
    End Sub

    Private Sub SerialPort1_DataReceived(ByVal sender As System.Object, ByVal e As System.IO.Ports.SerialDataReceivedEventArgs) Handles SerialPort1.DataReceived

        msg = SerialPort1.ReadExisting

        Me.Invoke(New Action(
        Sub()
            txtReceived.Clear()
            txtReceived.Text += msg
        End Sub))

    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        SerialPort1.Close()
        txtReceived.Text = ""
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:48:05.720

你在这里读到的任何东西：

```
If SerialPort1.IsOpen Then
   msg = SerialPort1.ReadExisting()         
End If 
```

当你在这里覆盖它时你会丢失：

```
msg = enc.GetString(bytesarray) 
```

我通常不建议尝试直接从串行端口（或 TCP/IP 连接）读取字符串。仅坚持使用数组方法并摆脱 ReadExisting。只有当你知道你有一个完整的“消息”时，我才会将字节转换为字符串。

一些通用提示（尽管这因协议而异）：

1.  定义一个缓冲区来读取您的消息，该缓冲区足以容纳您的整个消息，并且不要使其成为局部变量。
2.  跟踪该缓冲区的偏移量。
3.  当您第一次读取时，您的偏移量将为 0，假设您读取了 2 个字节。然后，您的偏移量将为 +2，值为 1。
4.  在您第二次（和第三次等）读取时，您从该偏移量开始插入，有效地附加新字节。
5.  每次读取后，您必须检查缓冲区以查看您是否收到了完整的消息。您可以通过读取的总量（如果您有固定长度的消息）或缓冲区中的某些信息（如长度前缀）来执行此操作。阅读消息后，您需要将其从缓冲区中删除。
6.  我建议从一种简单的方法开始，在删除消息后将偏移量重置为零并继续该过程。如果您收到的数据比您删除的消息长，您需要将这些额外的字节移到“左侧”，以便它们从位置 0 开始。（更有效的方法是使用循环缓冲区，但 KISS for现在）。

* * *

在您的 DataRecv 事件中，您应该执行以下操作来更新您的 UI：

```
 Me.Invoke(New Action(
      Sub()
         'this code runs on the GUI thread, update textboxes!
         Me.Text += msg
      End Sub)) 
```

* * *

我仍然不是 ReadExisting 的粉丝，但如果你确定总是从设备中获取可打印字符，请尝试以下操作：

```
Public Class Form3 

    Private pendingMsg As New StringBuffer()

    Private Sub Form3_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load 
        For Each s In System.IO.Ports.SerialPort.GetPortNames() 
            lstPorts.Items.Add(s) 
        Next s 

    End Sub 

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click 
        If lstPorts.SelectedIndex = -1 Then 
            MessageBox.Show("Please select a port") 
            Exit Sub 
        Else 
            SerialPort1.BaudRate = 9600 
            SerialPort1.DataBits = 8 
            SerialPort1.Parity = IO.Ports.Parity.None 
            SerialPort1.StopBits = IO.Ports.StopBits.One 
            SerialPort1.PortName = lstPorts.SelectedItem.ToString 
            SerialPort1.Open() 
        End If 
    End Sub 

    Private Sub SerialPort1_DataReceived(ByVal sender As System.Object, ByVal e As System.IO.Ports.SerialDataReceivedEventArgs) Handles SerialPort1.DataReceived 

        Dim completedMsg As String
        completedMsg = String.Empty

        pendingMsg.Append(SerialPort1.ReadExisting())

        If pendingMsg.Length >= 24 Then '12 bytes in hex is 24 chars

           completedMsg = pendingMsg.ToString(0, 24) '1st 24 bytes are a msg

           pendingMsg.Remove(0, 24) 'pop off the msg from our buffer

           Me.Invoke(New Action( 
           Sub()                
               txtReceived.Text = completedMsg                               
           End Sub)) 

        End If

    End Sub 

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click 
        SerialPort1.Close() 
        txtReceived.Text = "" 
    End Sub 
End Class 
```

# iphone - 如何在 Root ViewController 中调用邮件功能？

> ID：10278797
> 
> 赞同：1
> 
> 时间：2012-04-23T10:26:41.677
> 
> 标签：iphone, ios, mfmailcomposeviewcontroller

我想发送带有附件的邮件。在我的应用程序中，我为邮件功能创建了一个单独的类，在 rootViewController 中我有按钮**Email It**。当我单击它时，我的邮件功能必须被调用，但它没有。

```
 MFMailViewController *controller = [[MFMailViewController alloc] initWithNibName:"MFMailViewController" bundle:nil];                

[[self navigationController] pushViewController:viewController animated:YES];
[viewController release]; 
```

之后我知道我不能像这样使用邮件功能。谁能帮我找到这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:33:24.690

在 MFMailViewController 类中创建一个实例方法，其中包含一些参数，如字典或 NSArray

当您单击 Email it 按钮时，您正在创建 MFMailViewController 的对象，然后使用控制器对象调用实例方法并将参数或信息传递给。然后将其视图推送到导航。

```
#import <Foundation/Foundation.h> 
```

@interface MFMailViewController : NSObject

```
{} 
```

-(void)sendEmail:(NSMutableDictionary*)withData;

```
@end
#import "MFMailViewController.h"

@implementation MFMailViewController

-(void)sendEmail:(NSMutableDictionary*)withData;
{
    //definition goes here.................

}
@end

MFMailViewController *controller = [[MFMailViewController alloc] initWithNibName:"MFMailViewController" bundle:nil];                

[controller sendEmail:withData];
[[self navigationController] pushViewController:viewController animated:YES];
[viewController release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:55:45.977

它不是 MFMailViewController，它的`MFMailComposeViewController`. 请浏览此[Apple 参考](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)以获取更多详细信息。

这是一个示例代码

```
if([MFMailComposeViewController canSendMail]) {
MFMailComposeViewController *mailController = [[MFMailComposeViewController alloc] init];
if(mailController!=nil) {
        mailController.mailComposeDelegate = self;
            [mailController setSubject:urSubject];
            [mailController setMessageBody:urBody isHTML:NO];
            [mailController addAttachmentData:urData mimeType:type fileName:urfileName];
}
[self presentModalViewController:mailController animated:YES];
[mailController release];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:06:48.320

很简单，您想在哪里发送邮件只需在您的方法中定义此代码.....但首先在您的 viewController 委托的 .h 文件中定义委托`MFMailComposeViewControllerDelegate` ，然后在按钮单击方法中编写此代码......

```
 MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
        controller.mailComposeDelegate = self;
        [controller setToRecipients:@"Recipients Name"];
        [controller setSubject:@"your subject"];
        [controller setMessageBody:@"Your Text Here for Mail" isHTML:YES]; 
        if (controller)
        {
            [self presentModalViewController:controller animated:YES];
            [controller release];
        } 
```

然后你可以在你的ViewController.m文件中粘贴下面的mailComposerDelegate方法.....

```
- (void)mailComposeController:(MFMailComposeViewController*)controller  
          didFinishWithResult:(MFMailComposeResult)result 
                        error:(NSError*)error;
{
    if (result == MFMailComposeResultSent) {
        NSLog(@"Mail Sent");
    }

    [self dismissModalViewControllerAnimated:YES];

} 
```

# php - 在下面显示 $_SESSION 变量的位置

> ID：10278801
> 
> 赞同：0
> 
> 时间：2012-04-23T10:27:03.380
> 
> 标签：php, javascript, jquery

我正在尝试检索上传文件的名称并将其附加到 .list 中。问题是它从 $_SESSION 变量中检索的文件名始终是最后更新的文件，然后它不会改变。

例如，如果我在服务器中上传以下这些文件：

```
desert.jpg
tulips.jpg
lighthouse.jpg
desert_2.jpg 
```

那么它应该从 $_SESSION 附加的文件名应该是：

```
desert.jpg
tulips.jpg
lighthouse.jpg
desert_2.jpg 
```

但相反，它在屏幕上为从 $_SESSION 检索到的文件名附加了以下内容：

```
desert.jpg
desert.jpg
desert.jpg
desert.jpg 
```

如何解决这个问题，以便在将文件上传到服务器时，将其文件名附加到 .list 上？

下面是 $_SESSION 变量在 json 代码中的 javascript 函数，它通过将文件名附加到 .list 上来在屏幕上显示文件名：

```
 function stopImageUpload(success){

          var imagename = <?php echo json_encode(isset($_SESSION ['fileImage']['name']) ? $_SESSION ['fileImage']['name'] : null); ?>;
          if (success == 1){
             $('.listImage').append(imagename + '<br/>');
          }
          else {

            $('.listImage').append('No File');
          }

    return true;

    } 
```

下面是它上传文件的php代码：

```
<?php

session_start();

$result = 0;
$errors = array ();
$dirImage = "ImageFiles/";

$allowedTypes = array (
        "image/jpeg",
        "image/gif",
        "image/pjpeg",
        "image/jpg",
        "image/png",
        "image/tif" 
);

if (isset ( $_FILES ['fileImage'] ) && $_FILES ["fileImage"] ["error"] == UPLOAD_ERR_OK) {

    $fileName = $_FILES ['fileImage'] ['name'];
    $fileSize = $_FILES ['fileImage'] ['size'];
    $fileTemp = $_FILES ['fileImage'] ['tmp_name'];
    $fileType = $_FILES ['fileImage'] ['type'];

    $fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
    $fileExt = strtolower ( $fileExt );

    if (empty ( $fileName ))
        continue;

    if (! in_array ( $fileType, $allowedTypes )) {
        $errors [] = "File Type is not accepted";

    }

    if(!is_writable($dirImage ))
    {
        $errors [] = "File Destination not writeable";
    }

    $fileDst = $dirImage . DIRECTORY_SEPARATOR . $fileName;
    $filePrifix = basename ( $fileName, "." . $fileExt );
    $i = 0;
    while ( file_exists ( $fileDst ) ) {
        $i ++;
        $fileDst = $dirImage . DIRECTORY_SEPARATOR . $filePrifix . "_" . $i . "." . $fileExt;

    }
    // Move the file

    if (count ( $errors ) == 0) {
        if (move_uploaded_file ( $fileTemp, $fileDst )) {
            $result = 1;

        }
    }

}

$_SESSION ['fileImage'][] = $_FILES ['fileImage']['name'];

?>

  <script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result;?>);</script> 
```

在单独的页面上，我有一个检索 $_SESSION 的 JSON：

```
function stopImageUpload(success){

      var imagename = <?php echo json_encode(isset($_SESSION ['fileImage']) ? $_SESSION ['fileImage'] : null); ?>;
      if (success == 1){
         $('.listImage').append(imagename + '<br/>');
      }
      else {
        $('.listImage').append('<br/>');
      }

return true;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:31:03.160

`$_SESSION ['fileImage'][] = $_FILES ['fileImage']['name'];`代替`$_SESSION ['fileImage']['name'] = $_FILES ['fileImage']['name'];`

# iphone - 如何将数据从 NSArrays 插入 coredata

> ID：10278802
> 
> 赞同：1
> 
> 时间：2012-04-23T10:27:06.900
> 
> 标签：iphone, objective-c, sqlite, core-data, nsmanagedobject

我有一个`NSArray`叫`namesArray`.

我需要存储所有存在于`namesArray`using中的名称`coredata`。

我如何做到这一点？

我们是否需要像`'names.sqlite'`使用 sqlite manager 一样创建任何数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:47:44.353

不，您不需要创建`names.sqlite`使用管理器。您应该阅读一些在网上找到的教程，例如：[Here](http://www.techotopia.com/index.php/An_iOS_4_iPhone_Core_Data_Tutorial)或[Here](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。

您基本上需要以`valueForKey`格式保存在数据模型中。

```
 //Coredata saving
 self.theAppDel=[[UIApplication sharedApplication] delegate];
 NSManagedObjectContext*context=[self.theAppDel managedObjectContext];
 NSManagedObject*object=[NSEntityDescription insertNewObjectForEntityForName:@"Contacts" inManagedObjectContext:context];
 NSError*error=nil;

 [object setValue:[namesArray objectAtIndex:0] forKey:@"name"]; //for saving first name 
```

**1.**创建你的 appdelegate 的一个实例。

**2.**访问您的`Managed Object Context`和`Managed Object`

**3.**假设您创建了一个带有姓名联系人的实体描述。根据数组中的项目数，为名为的列添加每个对象`name`（我假设您已经创建了该列）。

这是一个简短的示例，但您应该阅读教程并阅读苹果的文档。

**编辑：**正如 Ondra 提到的，我之前的解决方案只会添加最后一个元素。使用以下添加：[在 CoreData 中添加 NSMutableArray](https://stackoverflow.com/questions/1104075/saving-an-nsmutablearray-to-core-data)感谢[Ondra Peterka](https://stackoverflow.com/users/1185250/ondra-peterka)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:05:51.160

我认为 iNoobs 的答案不起作用 - 循环会多次覆盖该值（只会保存姓氏）。在每种情况下，阅读教程都是个好主意。也许您正在寻找的答案在这里：[将 NSMutableArray 保存到核心数据](https://stackoverflow.com/questions/1104075/saving-an-nsmutablearray-to-core-data)

另外......我知道你明确地说“保存到核心数据”，但以防万一 - 你也可以使用不同的存储，如`NSUserDefaults`：

```
[[NSUserDefaults standardUserDefaults] setObject:namesArray forKey:@"namesArray"]; 
```

并稍后使用以下方法检索它：

```
myArray= [[NSMutableArray alloc] initWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"namesArray"]]; 
```

当然 NSUserDefaults 只用于少量数据。

祝你好运 ;）

# lucene - 具有站点核心异常的 Lucene 拼写检查器

> ID：10278809
> 
> 赞同：0
> 
> 时间：2012-04-23T10:27:34.163
> 
> 标签：lucene, sitecore, spell-checking

我正在尝试在我们的解决方案中实现 Lucene 搜索功能。我们选择解决这个问题的方法是覆盖数据库爬虫功能，而不是更正统的索引编写器/读取器方法。

它工作正常，但尝试实现拼写检查模块会产生以下异常。

```
 System.InvalidOperationException: Lock@C:\Windows\TEMP\lucene-df395a60eeb827dc92350de6e4528673-write.lock# is not locked
 Sitecore.Data.Indexing.FSLock.Release() +198
 Lucene.Net.Index.IndexReader.Unlock(Directory directory) +26
 SpellChecker.Net.Search.Spell.SpellChecker.ClearIndex() +15 
```

我尝试在一个单独的非站点核心项目上运行拼写检查器，它工作正常。

我指的是这篇[文章](http://www.devatwork.nl/articles/lucenenet/alternatives-did-you-mean-lucenenet/)以获得指导

# nosql - 如何组织图数据库中的节点

> ID：10278811
> 
> 赞同：3
> 
> 时间：2012-04-23T10:27:52.283
> 
> 标签：nosql, neo4j, graph-databases

我们正在构建一个图形数据库，并且想知道如何对图形结构进行建模。这个想法是让用户可以与几件事相关（朋友、博客中的帖子等）。我们的疑问是拥有这样的中间节点是否更好：

```
User1 -+-> Friends -+-> User2
       |            |
       |            +-> User3
       |
       +-> Posts -+-> Post1
                  |
                  +-> Post2 
```

或者，如果您将用户直接与他拥有的项目联系起来，如下所示：

```
User1 -+-> User2
       |
       +-> User3
       |
       +-> Post1
       |
       +-> Post2 
```

我们看到了这两种风格的好处和问题。我们很高兴听到有更多使用社交图谱经验的人的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:58:02.353

首先想到的是，如果您有许多（数千个或更多）不同类型的关系，您将遇到当前的问题，即为一个节点加载关系（如果它尚未加载到缓存中），所有节点都有即使您只想获取特定类型的某些关系，也可以加载。我认为这个加载问题很快就会得到解决。

您可以记住的另一件事是，朋友可能不是很多，尽管帖子会，并且所有帖子都直接连接到用户，当帖子数量增加时，您也会遇到排序问题。这就是为什么我建议您将帖子放在用户的链接列表中，最新的在前。这将使它们自然地按日期排序，例如：

```
用户 -+-> Post3 --> Post2 --> Post1
  |
  +-> 用户2
  |
  --> 用户 1

```

# html - 覆盖某些元素的 CSS 选择器

> ID：10278812
> 
> 赞同：0
> 
> 时间：2012-04-23T10:27:52.933
> 
> 标签：html, css

我有一个我想设置样式的 html 页面（使用 IE9）。

以下代码：

```
<style type="text/css">
    #komponenter select,
    #komponenter input
    {
         width: 180px;
         box-sizing:content-box; 
    }

    .special_box { width: 50px; height: 150px; }
</style>

... snipp ...

<div id="col2" class="kolumn">

    @Html.LabelFor(model => Model.Verksamhetskod)
    <br />
    @Html.TextBoxFor(model => Model.Verksamhetskod)
    <br />

    @Html.Label("Lat/Long")
    @Html.TextBoxFor(m => m.LatitudTecken)
    @Html.TextBoxFor(m => m.Latitud)
    @Html.TextBoxFor(m => m.LongitudTecken)
    @Html.TextBoxFor(m => m.Longitud)
    <br />

    @Html.Label("3 Överväganden:")
    <br />
    @Html.TextBoxFor(m => m.Overvagande)
    <br />

    @Html.Label("1 Ingångsvärden:")
    <br />
    @Html.TextBoxFor(m => m.Ingangsvarde, new { @class = "special_box" })
    <br />
</div> 
```

html 渲染得很好，问题是 .special_box 宽度被上面的 css 语句覆盖（高度工作正常）。我尝试将类放在样式部分的首位，但没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:32:18.133

这是一个具体问题：试试这个（假设`.special_box`是一个`input`元素）

```
#komponenter select,
#komponenter input
{
     width: 180px;
     box-sizing:content-box; 
}

#komponenter input.special_box {
     width: 50px; height: 150px; 
} 
```

像这样的规则`#komponenter input`具有`101`（1个id，0个类，1个元素）的特异性，
而`.special_box`具有`10`（1个类，0个元素）的特异性

有关更多信息，请参阅[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:34:25.983

上面的 CSS比您的(0-1-0)具有更高的[特异性](http://htmldog.com/guides/cssadvanced/specificity/)`.specialbox`( 1-0-1)。要提出它，您必须“更具体”：

```
/*here we add a few more selectors to .special_box to be more specific*/
#komponenter input.special_box (1-1-1)
//   1-0-0 for #komponenter
//   0-0-1 for input
// + 0-1-0 for .special_box
// = 1-1-1 
```

或者只是覆盖您想要生效的样式`!important`

```
#komponenter input.special_box{
    width: 50px !important;   /*override width*/
    height: 150px;
} 
```

# php - 为什么在 fetchAll() 之前需要 execute()

> ID：10278813
> 
> 赞同：1
> 
> 时间：2012-04-23T10:27:54.023
> 
> 标签：php, mysql, database, pdo

我有以下代码：

```
$clicks = $statement->prepare($query);
$offers->bindValue(1, $id, PDO::PARAM_INT);
$clicks->execute();
$results = $clicks->fetchAll(); 
```

*   查询工作正常
*   绑定工作正常

实际上让我想知道，为什么我必须首先执行（）查询才能调用 fetchAll（）。我来到了这个解决方案/假设，因为execute() 只返回true/false，并且不调用execute()，fetchAll() 不会返回任何东西。这是正常的做法吗？

很久以前，我一直在使用 PDO，所以我不太记得如何正确处理它。

非常感谢

（我用的是PHP5.3，上面用到的代码是PDO/PDOStatement）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:31:16.933

好吧，`SELECT * FROM myTable`这只是一段文本，您必须先将其发送到服务器，然后服务器对其进行解析等，然后才能`fetchAll()`. `fetchAll`不会自动调用的原因`execute()`是`fetchAll`可以调用两次，如果您只需要执行一次，您不想执行两次查询:)

它还与参数绑定等有关。参数可以更改，但您可能仍希望对原始参数值使用 fetch 函数。

这是一个设计问题，它使使用 PDO 进行编程变得更加容易。它只需要多一行代码:)

您可能可以创建一个包装器并`fetchAll()`同时执行执行和获取，但您肯定会遇到麻烦。

**编辑**：另一个原因是它`execute()`实际上需要一个可选的参数数组，它允许您绑定参数。`$stmt -> execute(array($id));`将允许您跳过`bindValue`通话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:29:32.167

PDO`prepare()`使用[准备好的语句](http://dev.mysql.com/doc/refman/5.6/en/sql-syntax-prepared-statements.html)，所以是的：它们必须准备好，然后执行才能得到任何结果。[`query()`](http://www.php.net/manual/en/pdo.query.php)如果您不需要重复使用该语句，则可以使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T10:30:48.707

因为如果在绑定变量后立即自动执行 SQL，您将无法绑定多个变量。因此，当您完成绑定时，您必须通过显式执行该语句来告诉它。

# jquery - jquery ul li 选择器

> ID：10278819
> 
> 赞同：0
> 
> 时间：2012-04-23T10:28:06.230
> 
> 标签：jquery, jquery-selectors, html-lists

我有这个清单

```
<ul style="display:none">
  <li id="key1" title="Look, a tool tip!">item1 with key and tooltip
  <li id="key2" class="selected">item2: selected on init
  <li id="key3" class="folder">Folder with some children
    <ul>
      <li id="key3.1">Sub-item 3.1
      <li id="key3.2">Sub-item 3.2
    </ul>

  <li id="key4" class="expanded">Document with some children (expanded on init)
    <ul>
      <li id="key4.1">Sub-item 4.1
      <li id="key4.2">Sub-item 4.2
    </ul>
</ul> 
```

有没有办法通过查询的“id”选择每个 <li>？

我试过这样，但现在可以工作了

```
$("ul li:#key1").qtip({
         content: '<img src="icons/Icon.png" />'
    }); 
```

谢谢你的答案，但以上都没有工作..我试过这个

```
$("ul li:first").qtip({
 content: '<img src="icons/Icon.png" />'
}); 
```

并且我能够看到 qtip。但仅适用于列表中的第一个（key1）。试

```
$("ul li#key1").qtip({
 content: '<img src="icons/Icon.png" />'
}); 
```

或者

```
$("#key1").qtip({
 content: '<img src="icons/Icon.png" />'
}); 
```

它不适合我.. =/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:31:18.623

只需使用`id`选择器：

```
$("#key1").qtip(...); 
```

`id`页面上的值**必须**是唯一的，因此将所有其他内容都排除在外，让我们`jQuery`使用`document.getElementByID`，并且选择器很好且简单（例如，快速）解析和应用。（当然，如果您希望选择器归档 if `key1`is not an `li`，那么您需要完整的选择器。但通常这不是您想要的。）

请注意，您的某些`id`值需要转义，因为您`.`在其中。要转义 a `.`，您在选择器的前面放置一个反斜杠。因为选择器位于 JavaScript 字符串中，所以您必须转义反斜杠才能真正将反斜杠放入选择器中，因此您使用两个：

```
$("#key4\\.1").qtip(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:34:32.660

如果是按id选择，则无需指定类型、类或父类。ID 应该是唯一的。

例如，如果要同时选择所有键，可以使用以下选择器来选择键 1、键 2 和键 3：

```
$("#key1, #key2, #key3").qtip({
         content: '<img src="icons/Icon.png" />'
    }); 
```

或者一一选择：

```
$("#key1").qtip({
         content: '<img src="icons/Icon.png" />'
    });

$("#key2").qtip({
         content: '<img src="icons/Icon.png" />'
    }); 
```

或者你可以做这样的事情来指定一个键列表，而不是重复 qtip 的选择和初始化：

```
var keys = ['key1', 'key2', 'key3'];

$(keys).each(function(i, key) {
    $("#" + key).qtip({
         content: '<img src="icons/Icon.png" />'
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:30:09.710

为什么有多余的冒号`:`？你不需要它。

```
$("ul li#key1").qtip({
     content: '<img src="icons/Icon.png" />'
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T10:30:53.650

是的。

```
$("ul li#key1").qtip(); //rest of code 
```

此外，因为它是一个 ID，而且很可能是唯一的。您可以简单地使用：

```
$("#key1") 
```

# svn - 安装了subversion，无法连接到服务器

> ID：10278820
> 
> 赞同：0
> 
> 时间：2012-04-23T10:28:16.067
> 
> 标签：svn, ubuntu

我在 ubuntu 上，我已经安装了 svn 以及使用它所需的任何其他东西（至少这是我从我研究的几十个教程中的想法......）

所以我已经下载了版本颠覆客户端应用程序，当我尝试连接时

svn://user@domain.com

并输入我的密码

我有一个错误

在“svn://user@domain.com/”中找不到存储库

我在名为 /svn 的文件夹中创建了名为 repo 的存储库，但为什么它不让我连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:39:10.840

您知道 domain.com/Path 之后的部分给出了您机器上必须通过 svnadmin create /Path 创建 subversion 存储库的绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:26:34.723

如果您手动将项目复制到本地的另一个存储库并且所有 .svn 目录仍然存在，则可能会发生这种情况。

在复制的目录上使用它

寻找 。-type f -name ".svn" -exec rm -i -f -r '{}' \;

# android - 如何知道 HTML 抛出了哪些异常？

> ID：10278821
> 
> 赞同：0
> 
> 时间：2012-04-23T10:28:20.873
> 
> 标签：android

使用 fromHtml("HTMLString") 时是否需要捕获任何异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:40:15.173

2 例外

org.xml.sax.SAXNotRecognizedException 和 org.xml.sax.SAXNotSupportedException

您可以检查该 [http://www.saxproject.org/apidoc/org/xml/sax/SAXNotSupportedException.html的来源](http://www.saxproject.org/apidoc/org/xml/sax/SAXNotSupportedException.html)

# c# - 仅将特定项目绑定到列表中的 gridview

> ID：10278822
> 
> 赞同：1
> 
> 时间：2012-04-23T10:28:26.840
> 
> 标签：c#, .net, winforms, list, gridview

我有`list`一个项目有 4 个不同的元素

**物品**

```
Id int
Name String
Value String
Enable bool 
```

我想将 绑定`List<item>`到`gridview`. 目前我正在显示所有项目。但我只想显示`Name`and`Enable`字段。这样做的简单方法是什么？不创建新列表

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:41:29.757

```
GridView.DataSource = from t in yourList
                      select new 
                       {
                       t.Name,
                       t.Enable
                       }; 
```

另请查看[使用 LINQ 绑定 GridView的示例](http://www.c-sharpcorner.com/uploadfile/jayendra/binding-gridview-using-linq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:38:04.050

最*简单*的方法？

绑定后，隐藏不想看到的列。

```
GridView1.Columns[0].Visible = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:40:07.243

查看这些 LINQ 文章以帮助您找到正确的方向 - 您真正要寻找的是 LinQ 投影[http://msdn.microsoft.com/en-us/library/bb384087.aspx](http://msdn.microsoft.com/en-us/library/bb384087.aspx)并使用这些基本查询操作进行处理您的选择：http: [//msdn.microsoft.com/en-us/library/bb384087.aspx](http://msdn.microsoft.com/en-us/library/bb384087.aspx)

# android - chartengine 库的 LineChart：x 点与 y 点不匹配

> ID：10278825
> 
> 赞同：1
> 
> 时间：2012-04-23T10:28:39.480
> 
> 标签：android, achartengine

我对折线图的可视化有疑问，正如您在图表中看到的那样，x 点与 y 点不完全匹配，它们稍微正确。

在 2012 年 4 月 12 日，x 值必须正好是 2

在 2012 年 4 月 13 日，x 值必须正好是 3

在 2012 年 4 月 16 日，x 值必须正好是 6

有没有其他人遇到过我同样的问题？有人能帮我吗？

![在此处输入图像描述](../Images/560b4cdace174693120ec07f2894dd13.png)

我的代码非常简单，我有一个对象列表，其中每个元素都包含数据值和 int 值，我将这些值放在两个不同的数组中，用于绘制图表。我正在使用 achartengine-07 库。

```
 XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        XYMultipleSeriesRenderer aRenderer = new XYMultipleSeriesRenderer();
        Date[] x = new Date[list.size()]; 
        for(int j=0;j<list.size();j++){
            x[j] = list.get(j).getData();
        }

        int[] y = new int[list.size()]; 
        for(int j=0;j<list.size();j++){
            y[j] =Integer.parseInt(list.get(j).getRank());
        }

        TimeSeries series = new TimeSeries(h[i]);
        for(int k = 0; k <x.length; k++)
            series.add(x[k], y[k]);

        XYSeriesRenderer renderer = new XYSeriesRenderer();
        renderer.setPointStyle(PointStyle.SQUARE);
        renderer.setFillPoints(true);
        dataset.addSeries(series);
        aRenderer.setXLabels(x.length);
        aRenderer.setYLabels(y.length);
        aRenderer.addSeriesRenderer(renderer); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:00:30.673

我构建了一个常规折线图，就像 Dan 建议的那样，带有自定义标签，并删除了我放置 setXLabels(0) 的先前标签：

```
 aRenderer.addXTextLabel();
      // To remove the previous label put
      aRenderer.setXLabels(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:04:39.523

AChartEngine 中的时间表试图计算最好的“圆形”标签，例如每天午夜左右。

如果您不喜欢这种方法，您可以使用自定义标签构建常规折线图：

```
renderer.addXTextLabel(); 
```

# java - 从 Eclipse 导出 Java 项目，图像不显示

> ID：10278827
> 
> 赞同：1
> 
> 时间：2012-04-23T10:29:06.223
> 
> 标签：java, eclipse, executable-jar

我有一个包含大约 10 个外部 jar 依赖项的 Eclipse Java 项目。它在 Eclipse 中运行良好，我也使用[ONE-JAR](http://one-jar.sourceforge.net/)等工具将其导出，并且运行良好。

我面临的奇怪问题是图像。我在项目内的一个包中拥有所有图像，导出时它们被包含但它们没有显示在正在运行的项目中？

我不知道为什么？奇怪的是，在一些 JPanel 文本中，我使用带有嵌入图像的 HTML，例如：

```
URL url = myClass.class.getResource( "icons/icon.png"); 
```

这可以工作并在输出中显示这些图像，但Java直接引用的图像，例如：

```
this.setIconImage(Toolkit.getDefaultToolkit().getImage("src/icons/icon.png")); 
```

不工作。从 Eclipse 运行时，同一行代码可以完美运行。您能否建议可能是什么问题，或者在导出这个项目时我应该怎么做。我应该切换到 Ant 还是 Maven ？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:37:24.567

你应该做这个：

```
URL url = myClass.class.getResource( "icons/icon.png");
this.setIconImage(Toolkit.getDefaultToolkit().getImage(url)); 
```

`Toolkit`还提供了一个接受 URL 的方法，请参阅[`java.awt.Toolkit#getImage()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#getImage%28java.net.URL%29).

# .net - LINQ to Entities 无法识别 System.String 方法

> ID：10278832
> 
> 赞同：0
> 
> 时间：2012-04-23T10:29:35.497
> 
> 标签：.net, linq, c#-4.0, linq-to-entities

我不断从下面的代码中收到此错误消息。我究竟做错了什么？

*LINQ to Entities 无法识别方法 'System.String ToString(System.Object)' 方法，并且此方法无法转换为存储表达式。*

```
var pros = from programs in db.Programs
           select new {
               programs.ProgramID,
              val = (programs.ProgramShortName + " On: " +  (Convert.ToString(programs.ProgramStartDate) ?? ""))
                           };

lbPrograms.DataTextField = "val";
lbPrograms.DataValueField = "ProgramID";
lbPrograms.DataSource = pros;
lbPrograms.DataBind(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:35:21.220

它不识别`string Convert.ToString(object)`......所以......*不要使用那个*。您*可以*直接尝试`.ToString()`，但坦率地说，我会选择：

```
...
select new {
          programs.ProgramID,
          programs.ProgramShortName,
          programs.ProgramStartDate } 
```

并担心本地的任何字符串化。或者至少是一个单独的投影（注意将`AsEnumerable()`其从*组合*更改为*延迟迭代*）：

```
var formatted = from programs in pros.AsEnumberable()
                select new {
                 programs.ProgramID,
                 val = (programs.ProgramShortName
        + " On: " +  (Convert.ToString(programs.ProgramStartDate) ?? "")) }; 
```

然后绑定到`formatted`. 这将对 3 列进行查询，但在本地格式化。

# android - 可展开列表中的按钮

> ID：10278833
> 
> 赞同：2
> 
> 时间：2012-04-23T10:29:39.327
> 
> 标签：android, button, expandablelistview

我想在可扩展列表的子项中创建一个按钮。

但是我得到空指针异常。

```
btnmore = (Button) findViewById(R.id.btn_more);
    btnmore.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            Intent i = new Intent(getBaseContext(), ParticularNewsDetail.class); <-- got problem here
            startActivity(i);
        }
    }); 
```

我想点击按钮进入下一个活动。

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:42:39.793

而不是给 getBaseContext() 尝试给你的类名.this。我猜这可能有用..

# javascript - 在 flexigrid 中隐藏列

> ID：10278834
> 
> 赞同：0
> 
> 时间：2012-04-23T10:29:42.970
> 
> 标签：javascript, jquery, flexigrid

有没有办法像这样在 jQuery flexigrid 中隐藏和显示列？

```
$('#FlexigridID').hideCol('ColumnName');
$('#FlexigridID').showCol('ColumnName'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:15:09.110

新代码测试：

```
$(function () {

    var visible = true;
    $('#yo').click(function () {
        alert('hello');

        visible = !visible;
        showColumn('#yourFlexigridNameHere', 'Lastname', visible);
    });

});

// you can put this in a separate javascript library
function showColumn(tbl, columnName, visible) {

    var grd = $(tbl).closest('.flexigrid');
    var colHeader = $('th[abbr=' + columnName + ']', grd);
    var colIndex = $(colHeader).attr('axis').replace(/col/, "");

    // queryVisible = $(colHeader).is(':visible');
    // alert(queryVisible);

    $(colHeader).toggle(visible);

    $('tbody tr', grd).each(
        function () {
            $('td:eq(' + colIndex + ')', this).toggle(visible);
        }
    );

} 
```

HTML：

```
<input id='yo' type="button" /> 
```

* * *

您还可以在 flexigrid 的 colModel 设置中将 hide 设置为 false：

```
colModel: [
    {display: 'Row ID', name : 'Lastname', width : 100, 
     sortable : true, align: 'left', hide: false} 
```

* * *

你也可以添加一个针对 flexigrid 的方法，你可以把它放在一个单独的 javascript 库中：

```
(function ($) {

    $.fn.showColumn = function (columnName, visible) {        

        if (visible == undefined) visible = true;

        var grd = this.closest('.flexigrid');        
        var colHeader = $('th[abbr=' + columnName + ']', grd);
        var colIndex = $(colHeader).attr('axis').replace(/col/, "");

        $(colHeader).toggle(visible);

        $('tbody tr', grd).each(
            function () {                
                $('td:eq(' + colIndex + ')', this).toggle(visible);
            }
        ); 
    };

    $.fn.hideColumn = function (columnName) {
        this.showColumn(columnName, false);
    }

})(jQuery); 
```

您现在可以使用这些调用隐藏和显示：

```
$('#FlexigridID').hideColumn('ColumnName');
$('#FlexigridID').showColumn('ColumnName');

visible = !visible; // for toggling need
$('#FlexigridID').showColumn('ColumnName', visible); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:47:11.530

尝试这个：

```
$('#FlexigridID').find("tr td").eq(columnIndex).hide();
$('#FlexigridID').find("tr td").eq(columnIndex).show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:33:54.403

尝试这样的事情

```
$('td:nth-child(2)').hide(); 
```

对于带有标题的表（th）

```
$('td:nth-child(2),th:nth-child(2)').hide(); 
```

阅读有关[使用单行 jQuery 代码隐藏表格列的更多信息](http://www.devcurry.com/2009/07/hide-table-column-with-single-line-of.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-27T08:08:03.460

```
$("#yourFlexigridNameHere").flexToggleCol(columnIndex, false);
//columnIndex - starts from 0 
```

# php - 如何选择提交不同php页面的选项

> ID：10278845
> 
> 赞同：0
> 
> 时间：2012-04-23T10:30:14.443
> 
> 标签：php, forms, submit

下拉选择“销售”转到sales.php，选择其他选项转到addFund.php...

```
<form name='searform' method='post' action='<?php echo $home;?>addFund.php'>
Search : <input type='text' id='sear' name='sear'> by 
<select id='psel' name='psel' onchange='change()'>
<option value='email'>Email</option>
<option value='name'>Username</option>
<option value='domain'>Domain name</option>
<option value='sales'>Sales</option>
</select>
<input type='submit' name='sub' id='sub' value='Go' onclick='gopage()'>
<input type='submit' name='dir' id='dir' value='Direct'>
</form> 
```

如何提交不同的页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:38:07.077

您可以使用一些 Javascript 的麻烦来实现此`change()`功能，但通常的方法是通过控制器和`include()`适当的页面路由所有请求。例如，将您的表单指向`action.php`，然后在该文件中执行以下操作：

动作.php

```
<?php

  if (isset($_POST['psel']) && $_POST['psel'] == 'sales') {
    include 'sales.php';
  } else {
    include 'addFund.php';
  } 
```

...或者您可以粗略地将该代码放入`addFund.php`中，因为您似乎只有一个要向其发送请求的其他脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:43:11.360

你可以用javascript做到这一点：

```
function change(el) {
  if(el.value === 'sales') {
    el.form.action = 'sales.php';
  } else {
    el.form.action = 'addFund.php';
  }
} 
```

将 onchange 更改为`onchange="change(this)"`. 更好的方法是检查服务器端的变量并包含正确的文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T10:41:12.477

将您的选择更改为：

```
<select name="vote" onChange="document.forms['searForm'].submit()"> 
```

并让您的表单操作转到类似 pageChange.php 的地方，它会根据`$_POST`值返回不同的页面。

# android - 如何通过assetManager 在Android 中将.txt 资产读取为UTF-8？

> ID：10278846
> 
> 赞同：2
> 
> 时间：2012-04-23T10:30:31.807
> 
> 标签：android

```
private void copyMB() {
    AssetManager assetManager = this.getResources().getAssets();
    String[] files = null;
    try {
        files = assetManager.list(assetDir);
    } catch (Exception e) {
        e.printStackTrace();
    }
    for(int i=0; i<files.length; i++) {
        InputStream in = null;
        FileOutputStream fos;
        try {
            in = assetManager.open(assetDir+"/" + files[i]);

            fos = openFileOutput(files[i], Context.MODE_PRIVATE);
            copyFile(in, fos);
            in.close();
            in = null;
            fos.flush();
            fos.close();
            fos = null;
        } catch(Exception e) {
            e.printStackTrace();
        }       
    }
}
private void copyFile(InputStream in, OutputStream out) throws IOException {

    byte[] buffer = new byte[1024];
    int read;

    while((read = in.read(buffer)) != -1){
        out.write(buffer, 0, read);
    }
} 
```

我的问题是 åäö 等 UTF-8 字符被看起来很奇怪的字符所取代。如何确保我的 InputStream 阅读器使用 UTF-8？在普通的 Java 中，写起来很容易…… new InputStreamReader(filePath, "UTF-8"); 但是由于我是从 Asset 文件夹中获取它的，所以我不能这样做（我必须使用不会将“UTF-8”作为参数的assetManager.open() 方法。

有任何想法吗？:)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:20:09.840

当你自己写：

```
new InputStreamReader(in, "UTF-8"); 
```

使用 Utf-8 编码创建一个新的流阅读器。只需将其放入`copyFile()`以您`InputStream`为参数的方法中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-17T20:19:06.833

你也可以这样做：

```
new InputStreamReader(is, StandardCharsets.UTF_8) 
```

# ruby - 如何在 Ruby 中使用 net/imap 搜索邮箱中的邮件？

> ID：10278849
> 
> 赞同：4
> 
> 时间：2012-04-23T10:30:42.560
> 
> 标签：ruby, search, imap

我在 Ruby 1.9.3 上有一些脚本：

```
require "net/imap"
imap = Net::IMAP.new(mail_imap_server)
imap.login(mail_login, mail_password)
imap.select("INBOX")
puts imap.search(["FROM", "homer@simpson.com"])
imap.logout
imap.disconnect 
```

如果存在所需的消息，那么一切都很好。如果缺少所需的消息，则会出现错误：

```
/opt/local/lib/ruby1.9/1.9.1/net/imap.rb:1332:in `block in search_internal': undefined method `[]' for nil:NilClass (NoMethodError)
from /opt/local/lib/ruby1.9/1.9.1/monitor.rb:211:in `mon_synchronize'
from /opt/local/lib/ruby1.9/1.9.1/net/imap.rb:1326:in `search_internal'
from /opt/local/lib/ruby1.9/1.9.1/net/imap.rb:752:in `search'
from ./mail.rb:12:in `mail'
from ./mail.rb:26:in `<main>' 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:03:22.917

首先检查结果中是否有消息，以防万一

```
require "net/imap" 
imap = Net::IMAP.new(mail_imap_server) 
imap.login(mail_login, mail_password) 
imap.select("INBOX")
begin
  messages = imap.search(["FROM", "homer@simpson.com"]) 
  puts messages if messages.length > 0
rescue
  puts "Error while retrieving the message" 
end
imap.logout 
imap.disconnect 
```

# ada - Ada 包和方法名称

> ID：10278857
> 
> 赞同：4
> 
> 时间：2012-04-23T10:31:05.180
> 
> 标签：ada

出于好奇，这里有一个问题，是否可以找到您所在方法的名称？像这样的东西应该在不诉诸字符串文字的情况下`Magic`输出。`"foo.bar.foobar"`

```
with ada.text_io;
package body foo.bar is 

   function foobar return boolean is 
   begin
     ada.text_io.put_line ("I am in :" & Magic);
     return true;
   end foobar;

end foo.bar; 
```

我会假设这是信息位于某处，因为堆栈跟踪、异常和分析工具等的输出类似，但我无法在任何地方找到它的记录！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T12:14:56.433

我相信您已经知道，Ada（不幸的是）不支持反射。

但是...如果您使用 GNAT 并且可以使用特定于编译器的实用程序，则可以从包[GNAT.Source_Info](http://www.radford.edu/~nokie/classes/320/std_lib_html/gnat-source_info.html)中获取此类信息。

# validation - 在哪里实施跨实体验证？

> ID：10278859
> 
> 赞同：3
> 
> 时间：2012-04-23T10:31:10.387
> 
> 标签：validation, jakarta-ee, jpa

我有一个项目，其中数据模型和业务层位于两个不同的模块中。当然，业务模块依赖于模型模块。实体验证是通过 java-validation-api 注解实现的。

我想知道我应该在哪里实现跨实体验证（业务验证，验证不同实体类型之间的关系）。目前我看到以下选项：

1.  创建自定义 javax.validation.ConstraintValidators 和相关的注解。问题是，验证器需要访问业务服务，即检索相关实体，但模型模块不应该依赖于业务模块。
2.  在业务服务持久化/合并方法中实现跨实体验证（即通过使用拦截器）。这是可能的，但跨实体验证与实体验证是分开的，我希望只有一个地方进行验证。

哪个选项更可取？有没有更好的建议？

谢谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:31:35.003

从思想上看做法1.比较好。Bean Validation 在 Model 级别（在 Model-View-Controller 中）工作，如果 Model 部分与数据库对话，这没有错。因此，例如，您可以创建 DAO，服务领导者和模型验证器都可以使用它，以避免代码重复。

拦截器也是验证某些东西的好地方，但是您将无法使用 Bean Validation 的全部功能和自动性。可能您需要手动调用模型对象上的 validate 方法，在需要的地方抛出 ConstraintViolationException 等。可行，但需要做一些工作。此外，模型中可能会留下一些验证，因此，正如您所指出的，将有不止一个地方进行验证。

所以我会将必要的数据库代码移动到单独的层并使用选项 1。

# mysql - Mysql查询以选择具有相同列名的所有表

> ID：10278860
> 
> 赞同：0
> 
> 时间：2012-04-23T10:31:10.377
> 
> 标签：mysql

具体来说，我正在使用 MySql。我的数据库中有很多表，比如员工、学生、雇主等。这样的表有 20 多个。在每个表中，我都有一个名为“用户名”和“年龄”的列。现在我想要一个查询，当我给一个特定的用户名='alex'时，它会给我所有的年龄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:35:29.153

您可能应该有一个表（例如`Users`），其中有一*列*指示该用户是什么类型的人（员工、学生、雇主等）。但是，如果您*必须*跨多个此类表进行查询，请使用[`UNION`](http://dev.mysql.com/doc/refman/5.6/en/union.html)：

```
SELECT age FROM employee WHERE username = 'alex' UNION ALL
SELECT age FROM student  WHERE username = 'alex' UNION ALL
SELECT age FROM employer WHERE username = 'alex' -- etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:37:34.610

看起来数据库设计不佳，如果您可以更改数据库结构，那可能就是要走的路。否则，你可以试试这个：

```
(SELECT username, age
 FROM table1)
UNION
(SELECT username, age
 FROM table2)
UNION
(SELECT username, age
 FROM table3)
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:01:49.777

查询以获取具有特定列的表名

```
select table_name from information_schema.columns 
where table_name in (
select table_name from information_schema.tables
where table_schema='databaseName'
) and 
column_name='username'; 
```

从上面的查询中，您将是所有具有字段用户名的表名，然后我可以在 PHP 中构建查询以从所有表中获取值；

# android - 在 Android 中录制、保存和播放视频

> ID：10278865
> 
> 赞同：11
> 
> 时间：2012-04-23T10:31:26.413
> 
> 标签：android, android-camera

我正在尝试制作一个使用相机应用程序录制视频的应用程序，然后将该视频保存在 SD 卡上以便我可以播放它。我有一些代码，但我不知道如何继续，因为我是 Android 的初学者。

我的活动：

```
public class Camcorder extends Activity {

     private CamcorderView camcorderView; 
     private boolean recording = false; 

     /** Called when the activity is first created. */ 
     @Override 
     public void onCreate(Bundle savedInstanceState) { 
          super.onCreate(savedInstanceState);
          //irrelevant code

          camcorderView = (CamcorderView) findViewById(R.id.camcorder_preview); 
     } 

     @Override 
     public boolean onKeyDown(int keyCode, KeyEvent event) 
     { 
         if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER) 
         { 
          if (recording) { 
                camcorderView.stopRecording();
                finish(); 
            } else { 
                recording = true; 
                camcorderView.startRecording(); 
            } 
             return true; 
         } 
         return super.onKeyDown(keyCode, event); 
     }       
} 
```

摄像机视图类：

```
public class CamcorderView extends SurfaceView implements
    SurfaceHolder.Callback {

MediaRecorder recorder;
SurfaceHolder holder;
String outputFile = "/sdcard/default.mp4";

public CamcorderView(Context context, AttributeSet attrs) {
    super(context, attrs);

    holder = getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    // recorder.setVideoSize(480, 320);
    // recorder.setVideoFrameRate(15);
    // recorder.setMaxDuration(10000);
}

public void surfaceCreated(SurfaceHolder holder) {
    recorder.setOutputFile(outputFile);
    recorder.setPreviewDisplay(holder.getSurface());
    if (recorder != null) {
        try {
            recorder.prepare();
        } catch (IllegalStateException e) {
            Log.e("IllegalStateException", e.toString());
        } catch (IOException e) {
            Log.e("IOException", e.toString());
        }
    }
}

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
}

public void surfaceDestroyed(SurfaceHolder holder) {
}

public void setOutputFile(String filename)
{
    outputFile = filename;
    recorder.setOutputFile(filename);
}

public void startRecording()
{
    recorder.start();
}

public void stopRecording()
{
    recorder.stop();
    recorder.release();
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-12T07:50:55.043

那么使用这个简单的代码在android中录制视频非常简单

首先在一个按钮上单击简单的启动一个*Intent*

```
Intent takeVideoIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
if (takeVideoIntent.resolveActivity(getPackageManager()) != null) {
    startActivityForResult(takeVideoIntent, CAMERA_REQUEST_CODE_VEDIO);
} 
```

然后在`onActivityResult`方法中

```
Uri videoUri = data.getData();
path = Utils.getRealPathFromURI(videoUri, this);
manageVideo(path); //Do whatever you want with your video 
```

最后向清单添加权限

```
<uses-feature
    android:name="android.hardware.camera"
    android:required="true" /> 
```

希望它可以帮助其他正在寻求帮助的人:)

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-29T06:05:14.720

```
Uri contentUri="You record video uri";

try {
                                        Date date= new Date();
                                        android.text.format.DateFormat.format("yyyy-MM-dd_hh:mm:ss", date);
                                        String Video_DIRECTORY = Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + getString(R.string.app_name) + "/video/";
                                        File storeDirectory = new File(Video_DIRECTORY);

                                        try {
                                            if (storeDirectory.exists() == false) {
                                                storeDirectory.mkdirs();
                                            }

                                        } catch (Exception e) {
                                            e.printStackTrace();

                                        }
                                        File storeDirectory12 = new File(storeDirectory,date+".mp4");
                                        InputStream inputStream = getContentResolver().openInputStream(contentUri);
                                        FileOutputStream fileOutputStream = new FileOutputStream(storeDirectory12);
                                        copyStream(inputStream, fileOutputStream);
                                        fileOutputStream.close();
                                        inputStream.close();
                                    } catch (FileNotFoundException e) {
                                        Log.e("Exception", "" + e);
                                    } catch (IOException e) {
                                        Log.e("Exception", "" + e);
                                    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-01T07:22:25.590

```
 // Put this code in ,on Button click or in onCreate to Capture the Video 

  Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
    videoUri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, videoUri);
    intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
    startActivityForResult(intent, CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE);

  ////////////////////////////////

private static Uri getOutputMediaFileUri(int type){
    return Uri.fromFile(getOutputMediaFile(type));
}

private static File getOutputMediaFile(int type){
    // Check that the SDCard is mounted
    File mediaStorageDir = new File(Environment.getExternalStorageDirectory() +"/YourDirectoryName");
    // Create the storage directory(MyCameraVideo) if it does not exist
    if (! mediaStorageDir.exists()){

        if (! mediaStorageDir.mkdirs()){

            Log.d("MyCameraVideo", "Failed to create directory MyCameraVideo.");
            return null;
        }
    }

    // Create a media file name
    // For unique file name appending current timeStamp with file name
    java.util.Date date= new java.util.Date();
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(date.getTime());

    File mediaFile;
    if(type == MEDIA_TYPE_VIDEO) {

        // For unique video file name appending current timeStamp with file name
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
                "VID_"+ timeStamp + ".mp4");

    } else {
        return null;
    }

    return mediaFile;
}
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    // After camera screen this code will execute
    if (requestCode == CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE ) {

        if (resultCode == RESULT_OK) {
            videoUri = data.getData();

            // Video captured and saved to fileUri specified in the Intent
          //  Toast.makeText(getActivity(), "Video saved to: " +data.getData(), Toast.LENGTH_LONG).show();

        } else if (resultCode == RESULT_CANCELED) {

            // User cancelled the video capture
            Toast.makeText(getActivity(), "User cancelled the video capture.", Toast.LENGTH_LONG).show();

        } else {
           // Video capture failed, advise user
            Toast.makeText(getActivity(), "Video capture failed.", Toast.LENGTH_LONG).show();
        }
    }
} 
```

# actionscript-3 - 简单游戏的免费图形

> ID：10278866
> 
> 赞同：0
> 
> 时间：2012-04-23T10:31:27.840
> 
> 标签：actionscript-3, flash, graphics, children

我正在为 android 手机 atm 创建一个游戏。这是一个非常简单的游戏。我几乎完成了所有的编程。我开始为游戏制作一些图形。

游戏是关于一只猫，并给猫食等以保持快乐。如果社区可以将我指向提供一些免费游戏简单图形的网站（如果有的话？），我将不胜感激。

游戏是为孩子们准备的，所以我想让猫变得五颜六色。我想我想使用卡通图像而不是猫的真实图像。你觉得这样合适吗？我愿意接受任何建议！

非常感谢！麦克风

PS 我正在使用 Actionscript 在 Flash 中创建游戏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:39:42.330

我倾向于使用 www.openclipart.org

搜索“卡通猫”——那里有一些不错的

您将要确保您的图像不仅免费，而且可以用于商业用途。除非另有说明，否则该站点上的那些通常是（但这些似乎很少见）。

该网站上的大多数图像都是 SVG。我倾向于使用 Inkscape（免费软件）打开这些图像并进行编辑。一个好处是它们是矢量图形（SVG 是），因此您可以在不降低质量的情况下更改它们的大小。然后，您可以将图像导出为 PNG，这将保留您在游戏中所需的透明度

# .net - 在 C#/VB.Net 中使用 Apache FOP.net 或 nFOP 生成 PDF 文件并将其直接发送到打印机

> ID：10278870
> 
> 赞同：0
> 
> 时间：2012-04-23T10:31:42.033
> 
> 标签：.net, pdf-generation, apache-fop, nfop

我正在开发 .Net Frame 中的应用程序，在该应用程序中，我使用 Apache FOP 生成 pdf 文件并将其直接发送到打印机。
此应用程序有两个部分：
**1\. 使用 .Net 中的 .xml、.xsl 和 .fo 文件**
**生成 PDF 文件 2\. 将生成的 PDF 文件直接发送到附加的打印机。**

我成功地使用**[Apache FOP.Net/nFOP](http://sourceforge.net/scm/?type=svn&group_id=65558)库**生成 PDF 文件。但我无法将生成的文件或格式化的 xml 数据（使用 .xml、.xsl、.fo 文件组合）直接发送到打印机。

我曾在 java 中使用 Apache FOP 并完成了具有两个功能（文件生成和打印）的应用程序。但现在我必须在 .Net 应用程序中开发这两个功能。

在 .net 版本的 Apache FOP 中似乎没有可用的打印功能。我在使用 FOP 的 Java 应用程序中发现了一些打印功能，但对于使用 FOP 的 .Net 打印没有帮助。我做了很多研究并检查了互联网上可用的许多解决方案。

**注意：**我还使用了 java 到 .Net 的转换代码。我使用了[**IKVM**](http://www.ikvm.net/)方法，但它没有将 java 代码移植到我的 .net 应用程序中。

如果你们知道我该如何执行这些任务，那么请在这里分享您的经验。

欢迎提出建议和建议。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:48:29.813

您是否尝试从 .NET 代码运行批处理文件 [http://xmlgraphics.apache.org/fop/trunk/output.html#general-direct-output](http://xmlgraphics.apache.org/fop/trunk/output.html#general-direct-output)

# php - PHP 类未加载

> ID：10278871
> 
> 赞同：1
> 
> 时间：2012-04-23T10:31:49.937
> 
> 标签：php, wordpress, classloader

我正在使用 WordPress，并且正在尝试编写一个使用来自另一个插件的文件的插件。获取文件的 URL 是正确的。当我从类中调用静态函数时，我能够包含该文件，这表示该类未加载。

```
//loading the file
$url=plugins_url().'/nextgen-gallery/admin/functions.php';
include $url; 
```

文件名是`functions`.php，其中定义了一个类`nggAdmin`

但是，当我打电话时，`function nggAdmin::create_gallery();,`我收到以下错误：

```
Fatal error: Class 'nggAdmin' not found in /var/www/html/wordpress/wp-content/plugins/Product/addProductForm.php on line 27 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:38:20.777

`plugins_url()`为您提供 url，例如`http://example.com/wordpress/wp-plugins/`，而不是服务器路径 - [http://codex.wordpress.org/Function_Reference/plugins_url](http://codex.wordpress.org/Function_Reference/plugins_url)

改用`WP_PLUGIN_DIR`- [http://codex.wordpress.org/Determining_Plugin_and_Content_Directories](http://codex.wordpress.org/Determining_Plugin_and_Content_Directories)

# c# - 按钮命令不会绑定到 UserControll 类

> ID：10278872
> 
> 赞同：0
> 
> 时间：2012-04-23T10:31:52.110
> 
> 标签：c#, wpf, xaml, data-binding, command

这是我的用户控制代码：

```
<UserControl .... x:Name="UserControl" />
<Grid x:Name="LayoutRoot" DataContext="{Binding ElementName=UserControl, Mode=OneWay}" >
    <DataGrid ItemsSource="{Binding Websites}" AutoGenerateColumns="False" CellEditEnding="DataGrid_CellEditEnding" BeginningEdit="DataGrid_BeginningEdit">
        <DataGrid.Columns>
            ...
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button .... CommandParameter="{Binding}" >
                            <Button.Content>
                                <Image Source="./../Images/close.png" Width="15"></Image>
                            </Button.Content>
                            <Button.Command>                                                            
                                <MultiBinding Converter="{StaticResource TriggerConverter}">
                                    <Binding ElementName="UserControl" Path="DataContext.DeleteCommand" >
                                        </Binding>
                                    <Binding />
                                </MultiBinding> 
                            </Button.Command>                               
                        </Button>
                    </DataTemplate>                                             
                </DataGridTemplateColumn.CellTemplate>                                          
            </DataGridTemplateColumn>
        </DataGrid.Columns>         
    </DataGrid>     
</Grid>

    CDeleteCommand dc = null;

    public ICommand DeleteCommand
    {
        get 
        {
            if (dc!=null)
            {
                return dc;
            }
            return dc = new CDeleteCommand() { Pannel = this };
        }
    } 
```

我在 DeleteCommand.get 有一个断点，它永远不会被触发。

这是我得到的绑定错误：

```
Cannot find source for binding with reference 'ElementName=UserControl'. 
BindingExpression:Path=DataContext.DeleteCommand; DataItem=null; target element is
 'Button' (Name=''); target property is 'Command' (type 'ICommand') 
```

为什么不，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:12:03.117

`UserControl`无法从 访问`DataGridTemplateColumn.CellTemplate`。

你可以试试`RelativeSource`

```
"{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}},
                                Path=DataContext.DeleteCommand}" 
```

或将您的 ViewModel 添加到资源并通过`StaticResource`

```
"{Binding DeleteCommand, Source={StaticResource ViewModel}}" 
```

下面是 MultiBinding 的样子：

```
<MultiBinding Converter="{StaticResource TriggerConverter}">
    <Binding RelativeSource="{RelativeSource AncestorType={x:Type DataGrid}}" 
        Path="DataContext.DeleteCommand" />
    <Binding />
</MultiBinding> 
```

# mysql - MySQL group-by 非常慢

> ID：10278878
> 
> 赞同：19
> 
> 时间：2012-04-23T10:32:31.823
> 
> 标签：mysql, performance, group-by

我有以下 SQL 查询

```
SELECT CustomerID FROM sales WHERE `Date` <= '2012-01-01' GROUP BY CustomerID 
```

该查询执行超过 11400000 行并且运行速度非常慢。执行需要 3 分钟以上。如果我删除分组部分，这将在 1 秒以下运行。这是为什么？

MySQL 服务器版本是 '5.0.21-community-nt'

```
Here is the table schema:
CREATE TABLE `sales` (
  `ID` int(11) NOT NULL auto_increment,
  `DocNo` int(11) default '0',
  `CustomerID` int(11) default '0',
  `OperatorID` int(11) default '0',
  PRIMARY KEY  (`ID`),
  KEY `ID` (`ID`),
  KEY `DocNo` (`DocNo`),
  KEY `CustomerID` (`CustomerID`),
  KEY `Date` (`Date`)
) ENGINE=MyISAM AUTO_INCREMENT=14946509 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-23T10:37:54.270

尝试在 (Date,CustomerID) 上放置一个索引。

查看 mysql 手册以优化按查询分组：-[按优化分组](http://dev.mysql.com/doc/refman/5.0/en/group-by-optimization.html)

`EXPLAIN`如果您使用如下方式，您可以了解 mysql 是如何生成结果的：-

```
EXPLAIN SELECT CustomerID FROM sales WHERE `Date` <= '2012-01-01' GROUP BY CustomerID 
```

这将告诉您 mysql 使用哪些索引（如果有）来优化查询。这在了解哪些索引适用于哪些查询时非常方便，因为您可以尝试创建索引并查看 mysql 是否使用它。因此，即使您不完全了解 mysql 如何计算聚合查询，您也可以通过反复试验创建有用的索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T10:38:19.670

在不知道您的表架构是什么样子的情况下，很难确定，但如果您在`Date`and上添加多列索引可能会有所帮助`CustomerID`。`GROUP BY`这样就省去了 MySQL 对语句进行全表扫描的麻烦。所以试试`ALTER TABLE sales ADD INDEX (Date,CustomerID)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T10:38:41.447

试试这个：

```
SELECT distinct CustomerID FROM sales WHERE `Date` <= '2012-01-01' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-14T02:04:31.130

我遇到了同样的问题，我将关键字段更改为相同的排序规则并解决了问题。加入表格的字段具有不同的 Collat​​e 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T10:38:07.750

这不是更快并且达到同样的效果吗？

```
SELECT DISTINCT CustomerID FROM sales WHERE `Date` <= '2012-01-01' 
```

当然，请确保在 上放置一个索引`Date`。我不完全确定，但索引`CustomerID`也可能有所帮助。

# java - 膨胀类错误 在应用程序的第二次运行

> ID：10278879
> 
> 赞同：1
> 
> 时间：2012-04-23T10:32:34.687
> 
> 标签：java, android, xml, mopub

我有一个已经上市的多活动应用程序，并且通常运行良好。就在最近，我一直在修改代码以以不同的方式处理我的（mopub）广告。当我运行程序并玩多个级别时，这似乎工作正常。广告准确地出现在我想要的时间和地点。问题出现在我退出程序然后尝试重新启动它之后。我的程序的第一个活动是“启动画面”。在第二次运行时，我收到以下错误：

```
04-23 11:16:50.374: W/dalvikvm(10512): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-23 11:16:50.394: E/AndroidRuntime(10512): FATAL EXCEPTION: main
04-23 11:16:50.394: E/AndroidRuntime(10512): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mycompany.mygame/com.mycompany.mygame.Splash}: android.view.InflateException: Binary XML file line #24: Error inflating class <unknown>
04-23 11:16:50.394: E/AndroidRuntime(10512):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-23 11:16:50.394: E/AndroidRuntime(10512):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-23 11:16:50.394: E/AndroidRuntime(10512):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-23 11:16:50.394: E/AndroidRuntime(10512):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-23 11:16:50.394: E/AndroidRuntime(10512):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 11:16:50.394: E/AndroidRuntime(10512):    at android.os.Looper.loop(Looper.java:123)
04-23 11:16:50.394: E/AndroidRuntime(10512):    at android.app.ActivityThread.main(ActivityThread.java:3683) 
```

知道什么可能导致这种情况 - 为什么它在第一次运行时没有抱怨？

**编辑：**

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center|center_horizontal|center_vertical"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=" Blah blah blah"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <ImageView                            <<== THIS IS LINE 24
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/mygame_logo" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="   My company name"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

</LinearLayout> 
```

**编辑：**回应评论......

我有一个应用程序类定义为：

```
public class Globals extends Application
{
} 
```

在它的 onCreate 方法中，我有......

```
 allocate_and_initialise_fresh_new_mAdView();
    load_mopub_banner_ad(); 
```

它们被定义为...

```
void allocate_and_initialise_fresh_new_mAdView()
{
    mAdView = new MoPubView(this);
    mAdView.setAdUnitId("agltb3B1Yi1pbmNyDAsSBFNpdGUYkaoMDA");// PUB_ID_320x50
}

void load_mopub_banner_ad()
{
    if (mAdView != null)
    {
        mAdView.loadAd();
    }
    debug("Completed loadAd");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:47:55.093

您正在 Application 类中初始化一个视图！

这是不可取的，可能会搞砸。视图的上下文应该是包含其生命周期的 Activity。这就是操作系统对您的期望。

只需将其从 Application 类中删除，这些错误就不会再次出现。

# android - Android的NFC前台调度系统有bug吗？

> ID：10278881
> 
> 赞同：5
> 
> 时间：2012-04-23T10:32:39.237
> 
> 标签：android, android-activity, nfc, foreground, dispatch

我对前台调度行为有一个烦人的问题。有时它不会调用`onNewIntent()`，而是完全重新创建活动，这会破坏应用程序的工作流程。

**我的具体情况**：Activity A 是 MainActivity，它使用前台调度。一切正常。但是，在从浏览器（VIEW 操作）启动的活动 B 中，前台调度在某些情况下不再起作用。

**工作流程：**

*   我启动 MainActivity，切换到浏览器（不关闭 MainActivity），启动 Activity B 并附加我的 NFC 设备 --> 它创建了一个新的 Activity B。

*   我启动 MainActivity 并再次关闭它。之后我切换
    到浏览器，启动活动 B 并附加我的 NFC 设备 --> 一切正常`onNewIntent()`

代码是正确的，例如，如果我在第一个场景中两次连接 NFC 设备，它会在第二次正常工作，但不是在第一次。在 MainActivity 和活动 BI 中，明确调用活动的 onPause() 方法中的 disableForegroundDispatch() 方法。

我的具体问题有解决方案吗？对我来说，这听起来像是一个错误。

**编辑：**

```
public void resume(Activity targetActivity) {
    if (nfc != null && nfc.isEnabled()) {
        // nfc is the default NFC adapter and never null on my devices

        Intent intent = new Intent(targetActivity, targetActivity.getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent pendingIntent = PendingIntent.getActivity(targetActivity, 0, intent, 0);
        nfc.enableForegroundDispatch(targetActivity, pendingIntent, null, new String[][] { new String[] { IsoDep.class.getName() } });
    }
}

public void pause(Activity targetActivity) {
    if (nfc != null && nfc.isEnabled()) {
        nfc.disableForegroundDispatch(targetActivity);
    }
} 
```

这些方法在每个活动的相应方法中被调用。谢谢您的帮助！

**解决方案：**经过很长时间的研究，我终于找到了问题所在。Logcat 打印：

*   从非活动上下文调用的 startActivity；强制 Intent.FLAG_ACTIVITY_NEW_TASK 用于：意图

我在 Stackoverflow 发现了其他问题，人们对 NotificationManager 也有同样的问题，但所有的提示都没有帮助我。将标志 singleTask 添加到我的活动 B 对我来说是诀窍，但老实说我不明白，因为上下文始终是一个活动。

我从 MainActivity 中删除了所有代码，第一个场景仍然不起作用。我从清单中删除了 MainActivity，之后一切都很好。也许这是一个问题，应用程序实例正在运行并且活动 B 从浏览器启动？我不知道。

无论如何，感谢NFC家伙的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:53:01.697

`IntentFilter[]`你传递给的那个`enableForegroundDispatch`是空的。因此，由于清单文件中的 IntentFilter(s)，您的 NFC 意图可能会到达您的 Activity。这解释了您观察到的行为，因为 NFC 意图总是在以这种方式交付时创建一个新实例。

将类似这样的内容添加到您的代码中以启用前台调度：

```
IntentFilter[] iFilters = new IntentFilter[2];
iFilters[0] = new IntentFilter();
iFilters[0].addAction("android.nfc.action.TECH_DISCOVERED");
iFilters[1] = new IntentFilter();
iFilters[1].addAction("android.nfc.action.TAG_DISCOVERED");
iFilters[1].addCategory(Intent.CATEGORY_DEFAULT); 
```

并将其作为参数传递给`enableForegroundDispatch`.

更新：我最近了解了更多关于这个特定问题的信息。它是由 Android 确定应该在哪个任务中启动新 Activity 的方式引起的。我不知道或不了解它是如何工作的具体细节，但效果是：

1.  当Activity B从浏览器启动时，它是在浏览器的任务中创建的
2.  当 NFC Intent 到达时，系统确定要在 Activity A 的任务中创建一个新的 Activity B

由于 2.，SINGLE_TOP 没有被忽略：在 A 的任务顶部只有一个 Activity B 实例。当 Activity A 关闭时，它的任务已经消失，所以 Activity B 将始终在 Browser 的任务中创建，正如您所观察到的。

在这种情况下，您可能会觉得这是一个 Android 错误（我认为是这样），但是这种如何创建任务的行为对于 Android 来说是如此基础，以至于许多应用程序都依赖它。因此，这种情况不太可能改变。

可能的解决方法：使用`launchMode`“singleTask”（或“singleInstance”）声明活动 B。然后，当 B 启动时，将创建一个新的（第三个）任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T07:49:18.170

我猜你的工作流程如下： Main --> Detect tag --> Reader Activity --> Writer activity Detect tag --> Write tag

当您的编写器活动（启用了前台的活动，我想这是出于编写目的）属于从先前的标签发现中调用的活动堆栈（例如任务）时，似乎会出现此问题。

特别是，如果您的工作流程如下所示，则不会出现： Main Writer activity Detect tag --> Write tag

我的解决方法是首先在新任务中调用编写器活动。在启动编写器的活动中，只需在启动编写器的意图中添加新任务标志。

```
startActivity(new Intent(this,MyTagWriterActivity.class).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)); 
```

Main --> Detect tag --> Reader Activity -NEW_TASK-> Writer 活动 Detect tag --> Write tag

它确实与活动历史记录混淆，但使作者活动更可预测。

# ruby-on-rails - git clone 通过 ssh 返回 Permission denied (publickey,password)

> ID：10278885
> 
> 赞同：2
> 
> 时间：2012-04-23T10:32:56.363
> 
> 标签：ruby-on-rails, git, ssh, deployment, vlad-deployer

我有 production_server 和 git_repo_server，git_repo_server .ssh/authorized 密钥有生产用户 id_rsa.pub。当我 ssh 到 production_server 并制作 git clone - 它工作正常，不要询问任何密码。当我尝试使用 ssh 将 git repo 克隆到本地机器上的 production_server 时，我看到：

```
Permission denied, please try again.
Permission denied (publickey,password). 
```

看起来 ssh 应该配置为向远程服务器发送命令。但我不知道该怎么做。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T09:22:43.480

问题已解决。我添加了

```
Host * 
    ForwardAgent yes 
```

到 /etc/ssh/ssh_config

请参阅[ssh-agent 教程](http://upc.lbl.gov/docs/user/sshagent.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:59:48.887

我遇到了这个问题，问题是我正在访问 Gitosis 的用户/机器没有在 Gitosis 项目中注册为用户，因此访问被拒绝。

1.  如果您没有，请在您的机器“~/.ssh$ ssh-keygen -t rsa”中生成 SSH 密钥。

2.  使用 scp 命令将您的公钥 (id_ras.pub) 复制到 gitosis_server，到 gitosis_admin/keydir。

3.  确保将 id_rsa.pub 重命名为 USER@SYSTEM.pub，USER = 客户端用户，SYSTEM= 客户端系统名称。

4.  按照此处的说明将用户 (USER@SYSTEM) 添加到项目 [https://help.ubuntu.com/community/Git#Adding_users]

# android - Android 应用签名机制

> ID：10278887
> 
> 赞同：2
> 
> 时间：2012-04-23T10:33:02.613
> 
> 标签：android

为了防止欺诈，我必须验证服务器端，连接到我的服务器的应用程序不是假的。我想知道我是否可以使用内置的android签名机制？也许我可以在每个请求上验证某种*唯一（每个设备不同）的幻数？*

感谢您的任何建议。

米。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:38:03.023

尝试从服务器向设备发送不同的 ID，以便每个设备都拥有唯一的 ID。您可以创建计算不同数字的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:19:19.540

将基本身份验证与 SSL 结合使用如何？设置您的 Web 服务器以仅允许经过身份验证的请求。对您的应用程序进行编码，以通过每个 HTTP 请求传递 Base64 编码的用户名/密码。由于它将通过 SSL，因此获取登录凭据并不容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:04:06.623

在 Android 开发者博客上阅读有关[识别应用程序安装的信息。](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)

# sql-server - SQL Server 一轮又一轮的划分

> ID：10278903
> 
> 赞同：5
> 
> 时间：2012-04-23T10:34:37.640
> 
> 标签：sql-server, division, rounding

在存储过程中，我有一个表达式

```
select @some_val_in_percents = (@total_val / 100) * @some_val 
```

如果我使用这样的`Round`功能：

```
select @some_val_in_percents = Round((@total_val / 100) * @some_val, 0) 
```

当计算整个表达式时，结果会被四舍五入还是`(@total_val / 100)`被四舍五入然后乘以`@some_val`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T10:45:58.390

您似乎错误地计算了百分比值。这是我期望的样子：

```
@some_val * 100 / @total_val 
```

至于`ROUND()`函数，它将作用于表达式的最终结果，而不是部分结果。因此，首先完全评估表达式，然后`ROUND()`将其应用于结果。

另请注意（如果您还不知道），如果除法运算符的两个操作数都是整数，SQL Server 将执行整数除法，即除法的结果将*向下舍入*到最接近的整数，甚至*在* `ROUND()`应用之前. 如果您想避免这种情况，请确保至少有一个操作数不是整数，例如：

```
ROUND(@some_val * **100.0** / @total_val, 2) 
```

[另请注意Transact-SQL`ROUND()`](http://msdn.microsoft.com/en-us/library/ms175003.aspx)中需要的第二个参数（精度）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T10:35:27.623

`Round`将在评估其内容后计算。

因此`(@total_val / 100) * @some_val`会四舍五入。

# linux - 在内核模块中创建一个以太网数据包并发送它

> ID：10278909
> 
> 赞同：4
> 
> 时间：2012-04-23T10:35:21.313
> 
> 标签：linux, networking, module, kernel

我需要创建一个以太网数据包并将其发送到我的内核模块中。有人可以帮我做到这一点吗？

我想我需要使用 dev_alloc_skb 创建一个 skb，然后我需要编写 mac_ethernet，插入数据并使用 dev_queu_xmit 发送它。

但我不确定这是否有效，或者它是否是正确和最简单的方法。

此致

编辑1：

```
int sendpacket ()
{
    unsigned char dest[ETH_ALEN]={0x00,0x25,0x22,0x05,0xF3,0xF0};
    unsigned char src[ETH_ALEN] = {0x90,0xE6,0xBA,0x48,0x7C,0x87};

struct sk_buff * skbt =alloc_skb(ETH_FRAME_LEN,GFP_KERNEL);      
//skb_reserve(skb,ETH_FRAME_LEN);

dev_hard_header(skbt,dev_eth1,ETH_P_802_3,dest,src,dev_eth1->addr_len);

if(dev_queue_xmit(skbt)!=NET_XMIT_SUCCESS)
{
    printk("Not send!!\n");
}

kfree_skb(skbt);
return 0; 
```

}

```
> Dmesg command:
> 
>  677.826933] Hello:I'm the hook module!!!! [  677.826937] 2!!!! [  677.826941] skb_under_panic: text:c0723608 len:14 put:14 head:f1843800 data:f18437f2 tail:0xf1843800 end:0xf1843e00 dev:<NULL> [  677.826959]
> ------------[ cut here ]------------ [  677.826961] kernel BUG at net/core/skbuff.c:146! [  677.826964] invalid opcode: 0000 [#1] SMP  [
> 677.826967] last sysfs file: /sys/devices/system/cpu/cpu1/cache/index2/shared_cpu_map [ 
> 677.826969] Modules linked in: sendpacket(+) bluetooth rfkill vfat fat fuse sunrpc cpufreq_ondemand acpi_cpufreq mperf ip6t_REJECT
> nf_conntrack_ipv6 ip6table_filter ip6_tables ipv6 uinput
> snd_hda_codec_atihdmi snd_hda_codec_realtek snd_hda_intel
> snd_hda_codec snd_hwdep snd_seq snd_seq_device snd_pcm snd_timer snd
> soundcore atl1e snd_page_alloc iTCO_wdt iTCO_vendor_support r8169 mii
> i2c_i801 microcode asus_atk0110 pcspkr ata_generic pata_acpi
> usb_storage pata_marvell radeon ttm drm_kms_helper drm i2c_algo_bit
> i2c_core [last unloaded: sendpacket] [  677.827003]  [  677.827003]
> Pid: 4780, comm: insmod Tainted: G        W   2.6.35101 #7 P5QL
> PRO/P5QL PRO [  677.827003] EIP: 0060:[<c070a192>] EFLAGS: 00210246
> CPU: 0 [  677.827003] EIP is at skb_push+0x57/0x62 [  677.827003] EAX:
> 00000088 EBX: c08f9fdc ECX: f156bf10 EDX: c093b4ca [  677.827003] ESI:
> 00000000 EDI: f51ca000 EBP: f156bf38 ESP: f156bf0c [  677.827003]  DS:
> 007b ES: 007b FS: 00d8 GS: 00e0 SS: 0068 [  677.827003] Process insmod
> (pid: 4780, ti=f156a000 task=f2b071a0 task.ti=f156a000) [  677.827003]
> Stack: [  677.827003]  c093b4ca c0723608 0000000e 0000000e f1843800
> f18437f2 f1843800 f1843e00 [  677.827003] <0> c08f9fdc f156bf64
> f156bf6a f156bf50 c0723608 00000001 c07235e5 f3b6c000 [  677.827003]
> <0> 00835ff4 f156bf78 f7d640a8 f156bf6a f156bf64 00000006 48bae690
> 2500877c [  677.827003] Call Trace: [  677.827003]  [<c0723608>] ?
> eth_header+0x23/0x93 [  677.827003]  [<c0723608>] ?
> eth_header+0x23/0x93 [  677.827003]  [<c07235e5>] ?
> eth_header+0x0/0x93 [  677.827003]  [<f7d640a8>] ?
> sendpacket+0x8f/0xb6 [sendpacket] [  677.827003]  [<f7d67000>] ?
> hook_init+0x0/0x46 [sendpacket] [  677.827003]  [<f7d67044>] ?
> hook_init+0x44/0x46 [sendpacket] [  677.827003]  [<c0401246>] ?
> do_one_initcall+0x4f/0x139 [  677.827003]  [<c0451e29>] ?
> blocking_notifier_call_chain+0x11/0x13 [  677.827003]  [<c046210c>] ?
> sys_init_module+0x7f/0x19b [  677.827003]  [<c040321f>] ?
> sysenter_do_call+0x12/0x28 [  677.827003] Code: c0 85 f6 0f 45 de 53
> ff b0 a8 00 00 00 ff b0 a4 00 00 00 51 ff b0 ac 00 00 00 52 ff 70 50
> ff 75 04 68 ca b4 93 c0 e8 ad 4a 09 00 <0f> 0b 8d 65 f8 89 c8 5b 5e 5d
> c3 55 89 e5 56 53 0f 1f 44 00 00  [  677.827116] EIP: [<c070a192>]
> skb_push+0x57/0x62 SS:ESP 0068:f156bf0c [  677.827154] ---[ end trace
> dee1e3278503a581 ]--- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:58:42.163

在您的情况下，您只想使用来自用户空间的原始数据包，而不是处理内核代码的复杂性。

这篇[博客文章](http://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/)详细介绍了如何做你需要的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T19:33:11.047

冒着听起来像破唱片的风险，您正在了解**为什么**应该从用户空间完成此操作。

因为你似乎决心无论如何都要犯这个错误，让我们试着找出问题所在。

这也很好地说明了拥有源代码的帮助。异常日志告诉您问题发生在 net/core/skbuff.c 的第 146 行。那是在 function`skb_under_panic()`中，它仅在该文件中使用（毕竟它是静态的），来自`skb_push()`.

该`skb_push()`函数向前扩展 skb。基本上，它在缓冲区中为新标头创建空间。它通过`data`向前移动内部指针来做到这一点。

在您的情况下，内部`data`指针仍位于其原始位置：在 skb 的最开始处。您需要先在 skb 前面预留一些空间。使用`skb_reserve()`，几乎就像你有。你为什么把它评论出来？

此外，您需要检查 skb 的分配是否成功。内核分配器有时可以（并且**确实**）返回 NULL。

# jquery - jQuery - 如何使用子 DIV 显示/隐藏多个 DIV

> ID：10278914
> 
> 赞同：1
> 
> 时间：2012-04-23T10:35:30.323
> 
> 标签：jquery, show-hide

我有一个如下标记（代码从[http://jsfiddle.net/nick_craver/srg6g/](http://jsfiddle.net/nick_craver/srg6g/)修改）：

```
<div id="maps">
    <div class="map-box"><h2>London &amp; South East</h2><a href="#london"><img src="http://dummyimage.com/100x100/000/fff&text=London" /></a></div>
    <div class="map-box"><h2>South West, Ireland and Wales</h2><a href="#south-west"><img src="http://dummyimage.com/100x100/000/fff&text=South+West" /></a></div>    
    <div class="map-box"><h2>South Central &amp; Home Counties</h2><a href="#south-central"><img src="http://dummyimage.com/100x100/000/fff&text=South+Central" /></a></div>
    <div class="map-box"><h2>North England, Northern Ireland &amp; Scotland</h2><a href="#north"><img src="http://dummyimage.com/100x100/000/fff&text=North" /></a></div>
    <div class="map-box"><h2>Midlands</h2><a href="#midlands"><img src="http://dummyimage.com/100x100/000/fff&text=Midlands" /></a></div>
</div>
<br /><br/>
<div id="areas">
    <div id="london">
        <div>content london 1</div>
        <div>content london 2</div>
    </div>
    <div id="south-west">
        <div>content south west 1</div>
        <div>content south west 2</div>
    </div>
    <div id="south-central">
        <div>content south central 1</div>
        <div>content south central 2</div>
    </div>
    <div id="north">
        <div>content north 1</div>
        <div>content north 2</div>
    </div>
    <div id="midlands">
        <div>content midlands 1</div>
        <div>content midlands 2</div>
    </div>
</div> 
```

我的 JavaScript 代码如下所示：

```
$(".map-box a").click(function(e) {
    $("#areas div").hide();
    $(this.hash).show();
    e.preventDefault();
});
$("#areas div").not("#london, #london div").hide(); 
```

当用户单击图像时，我想隐藏当前显示的内容并显示与该图像关联的两个内容，但这不起作用。

例如，

*   用户点击“西南”
*   同时显示“内容西南 1”和“内容西南 2”

有人能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:44:08.247

问题是这一行的选择器：

```
$("#areas div").hide(); 
```

这是选择并隐藏所有作为“#areas”div 后代的 div 元素，其中不仅包括 id 为“london”等的 div，还包括这些 div 的子元素。然后，当您显示基于“伦敦​​”之类的 id 的 div 时，其实际内容的子 div 将保持隐藏状态。

试试这个：

```
$("#areas > div").hide(); 
```

同样对于最初隐藏它们的行：

```
$("#areas > div").not("#london, #london div").hide();​ 
```

这将仅隐藏作为“#areas”的直接子级的 div。当他们被隐藏时，他们的孩子也会被隐藏，但是当你展示一个时，它的孩子会自动出现。

演示：http: [//jsfiddle.net/7s5nP/](http://jsfiddle.net/7s5nP/)

# javascript - 阻止 UI 在 IE 8 中不起作用

> ID：10278915
> 
> 赞同：1
> 
> 时间：2012-04-23T10:35:33.210
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-plugins

我正在使用块 UI。

```
$('#divab div[name=divname]').click(function() { 
         $('#divsecond').block({ 
            message: '<img src="ajax-loader(2).gif" />', 
             css: { 
            top:  ($(window).height() - 400) /2 + 'px', 
            left: ($(window).width() - 400) /2 + 'px', 
            width: '100px',
            border: 'none', 

        backgroundColor: 'transparent', 
        '-webkit-border-radius': '10px', 
        '-moz-border-radius': '10px', 
        opacity: 0.5, 
        color: 'transparent'  
        } 

        }); 
    }); ` 
```

代码在 Firefox 和 chrome 中完美运行，但在 ie 8 中无法运行

# image - 从 base64 字符串获取图像尺寸

> ID：10278916
> 
> 赞同：3
> 
> 时间：2012-04-23T10:35:33.637
> 
> 标签：image, png, base64

我收到图像的 base64 字符串并将其用作 html 页面的源。反过来，img 是 div 的子级。我想让 div 按图像尺寸自动调整大小。尝试使用 javascript (... = element.style.height) 获取图像的尺寸，但它不起作用（我认为这是因为图像的异步加载）。现在我认为也许可以提前获取图像尺寸并手动计算父 div 的大小。

是否可以在不完全解码的情况下从 base64 字符串中提取图像尺寸？

**已编辑**我使用 onload 方法来调整父 div 的大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:00:17.277

这将取决于图像格式。

例如，在 PNG 中非常简单：将前 32 个 base64 字符解码为 24 个字节：检查位置 1-3 是否由 ASCII 字符串“PNG”组成，然后读取位置 16-19 和 20-23 [http： //www.libpng.org/pub/png/spec/1.2/PNG-Structure.html](http://www.libpng.org/pub/png/spec/1.2/PNG-Structure.html)

# matlab - 伽辽金投影法

> ID：10278918
> 
> 赞同：0
> 
> 时间：2012-04-23T10:35:39.317
> 
> 标签：matlab

有没有人在 Matlab中有一个有效的和最佳的**Galerkin 投影方法实现？**我尝试实现该方法本身，但由于某种原因，结果与解析解不收敛。我在 Mathworks 的官方[网站](http://www.mathworks.com/matlabcentral/fileexchange/20387-ode-solver-through-galerkin-method/content/odegalerkin/odegalerkin.m)上找到了该方法的实现，但它不起作用。有人知道如何正确运行此代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T22:46:42.710

我不确定这是否是您想要的，但是有两本关于不连续 Galerkin 方法及其一般实现的优秀书籍：

[http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-0-387-72065-4](http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-0-387-72065-4)

[http://books.google.de/books/about/Implementing_Spectral_Methods_for_Partia.html?id=fZyqWPNjx4AC](http://books.google.de/books/about/Implementing_Spectral_Methods_for_Partia.html?id=fZyqWPNjx4AC)

两本书都包含代码片段——第一本（Hesthaven/Warburton 的黄书）使用了实际的 Matlab 代码，第二本仅使用了伪代码。

# android - Android 写入/读取图片到内部存储

> ID：10278919
> 
> 赞同：-1
> 
> 时间：2012-04-23T10:35:41.510
> 
> 标签：android, image, writing

我在 android（图片对象）上保存和加载图片时遇到问题。这是我写入内部存储的代码（我不确定它是否正常工作）：

```
 FileOutputStream fos = null;
            Picture l0 = new Picture();
            fos = openFileOutput("layer0", Context.MODE_PRIVATE);
            InputStream is = new ByteArrayInputStream(layer0.getBytes());
            SVG svg = SVGParser.getSVGFromInputStream(is);
            l0 = svg.getPicture();

            l0.writeToStream(fos);
            fos.close(); 
```

我怎样才能读回这张图片？请检查这种存储方式。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:42:02.290

使用函数[createFromStream](http://developer.android.com/reference/android/graphics/Picture.html#createFromStream%28java.io.InputStream%29)

就像是：

```
Picture myPic = Picture.createFromStream(openFileInput("layer0")); 
```

# sql-server-2008 - 无法连接到报告生成器 2.0

> ID：10278922
> 
> 赞同：1
> 
> 时间：2012-04-23T10:35:49.857
> 
> 标签：sql-server-2008, ssrs-2008, report-builder2.0

我使用 sql server 2008

当我单击报告管理器中的报告生成器按钮时，出现“无法提取应用程序。身份验证错误”框

错误详情

```
* [23/04/2012 09:27:59] System.Deployment.Application.DeploymentDownloadException (sous-type inconnu)
- Échec du téléchargement de http://admin-pc/ReportServer/ReportB...er.application.
- Source*: System.Deployment
- Trace de la pile*:
à System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
à System.Deployment.Application.SystemNetDownloader.DownloadAllFiles()
à System.Deployment.Application.FileDownloader.Download(SubscriptionState subState)
à System.Deployment.Application.DownloadManager.DownloadManifestAsRawFile(Uri& sourceUri, String targetPath, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
à System.Deployment.Application.DownloadManager.DownloadDeploymentManifestDirectBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
à System.Deployment.Application.DownloadManager.DownloadDeploymentManifestBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options)
à System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
à System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
--- Exception interne ---
System.Net.WebException
- Le serveur distant a retourné une erreur*: (401) Non autorisé.
- Source*: System
- Trace de la pile*:
à System.Net.HttpWebRequest.GetResponse()
à System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next) 
```

当我从其目录运行应用程序时

```
C:\Program Files\Microsoft SQL Server\MSRS10.MSSQL2008\Reporting Services\ReportServer\ReportBuilder 
```

它工作正常，但无法连接到报表服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:42:46.827

调用来自配置为运行 SSRS 的用户。它是否有权这样做？如果 SSRS 服务器在您的本地计算机上，请尝试将您的用户设置为运行它，然后再次测试

# java - java中只接受数字的表字段

> ID：10278923
> 
> 赞同：1
> 
> 时间：2012-04-23T10:35:52.850
> 
> 标签：java, swing, jtable

如何使表格字段仅接受数字。如果它是任何其他（键），则不应在该字段中显示它。那可能吗？如果是这样，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:41:38.670

我必须承认我没有测试过这个，但默认`JTable`有一个内部类`NumberEditor`（javax.swing.JTable.NumberEditor）。因此，我假设当您`TableModel`正确指示[列类是数字扩展名](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html#getColumnClass%28int%29)时，默认编辑器将是仅接受数字的编辑器

如果默认编辑器不是您想要的，您可以编写自己的编辑器，例如使用`JFormattedTextField`as 编辑器。有关更多信息，请参阅[秋千表教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。本教程包含有关自定义编辑器的部分，如果您想编写自己的编辑器，应该可以帮助您入门。

# sql - 计算 SQL 中选定 ID 的列总和

> ID：10278924
> 
> 赞同：6
> 
> 时间：2012-04-23T10:35:54.567
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-scripts

这些是我的表：

*   **会员**：`Id, Points`
*   **购物车注册**：`Id, Member_Id, CartId, RegisterDate, Point`
*   **选择成员**：`Id, Member_Id`

会员可以在购物车中注册`CartRegister`，并且在`Member.Points`会员赚取的所有积分中必须计算并插入。所以我需要计算每个点的所有点`SelectedMembers`并更新`Member`表格，但我不知道如何实现它。

以下脚本在我的脑海中：

```
UPDATE [Member]
   SET [Points]=
    (
       SELECT SUM([CR].[Point]) AS [AllPoints]
       FROM  [CartRegister] AS [CR] 
       WHERE [CR].[Member_Id] = --???

    )
    WHERE [Members].[Member].[Id] IN  ( SELECT Member_Id From SelectedMembers  ) 
```

所以我很困惑`Select Sum(Point)`如果我使用where 子句是什么

```
 WHERE [CR].[Member_Id] IN ( Select Member_Id From SelectedMembers  ) 
```

那么所有会员的总和与所有会员积分的总和相同，也许我需要类似`foreach`你的建议是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T10:42:13.317

您可以使用 CTE（通用表表达式）首先计算每个成员的点数，然后使用该信息更新`Members`表：

```
-- this CTE takes all selected members, and calculates their total of points
;WITH MemberPoints AS
(
   SELECT 
       Member_ID,
       AllPoints = SUM(Point)
   FROM  
       CartRegister
   WHERE
       Member_ID IN (SELECT ID FROM SelectedMembers)
   GROUP BY 
       Member_ID
)
UPDATE dbo.Member  
SET Points = mp.AllPoints
FROM MemberPoints mp
WHERE dbo.Member.Member_ID = mp.Member_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:07:23.920

[@marc_s 解决方案的](https://stackoverflow.com/questions/10278924/calculate-sum-of-column-for-selected-ids-in-sql/10279019#10279019)一个变体，基本相同，只是使用了稍微不同的语法：

```
WITH aggregated AS (
  SELECT
    *,
    AllPoints = SUM(Point) OVER (PARTITION BY Member_ID)
  FROM CartRegister
  WHERE Member_ID IN (SELECT ID FROM SelectedMembers)
)
UPDATE aggregated
SET Points = AllPoints 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:29:34.633

检查这个：

```
UPDATE [Member]
SET [Points]=
(
   SELECT SUM([CR].[Point]) AS [AllPoints]
   FROM  [CartRegister] AS [CR] 
   WHERE [CR].[Member_Id] = [Member].[Id]

)
WHERE [Members].[Member].[Id] IN  ( SELECT Member_Id From SelectedMembers  ) 
```

# iphone - UIImage 是否具有指示它是纵向还是横向的属性

> ID：10278925
> 
> 赞同：0
> 
> 时间：2012-04-23T10:36:00.947
> 
> 标签：iphone, objective-c, cocoa-touch, uiimage, orientation

假设您有一个来自图像选择器控制器的 UIImage 。它是否具有可以检查图像是纵向还是横向的属性？换句话说，检查高度是否大于宽度。我查看了参考资料，但没有看到任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T11:48:10.343

也许你可以使用，`imageOrientation`但似乎这段代码更直接：

```
-(BOOL) isPortrait; {
    return image.height > image.width;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:44:49.597

```
if (Yourimage.imageOrientation == UIImageOrientationUp) {
NSLog(@"portrait");
}   
else if (yourimage.imageOrientation == UIImageOrientationLeft || image.imageOrientation == UIImageOrientationRight) {
NSLog(@"landscape");
} 
```

希望对你有帮助..

# javascript - 我用 JS 在下拉框中更改了一些内容，但 innerHTML 不会随更改的内容返回

> ID：10278931
> 
> 赞同：0
> 
> 时间：2012-04-23T10:36:37.390
> 
> 标签：javascript, html, dom, option

我有一个清单：

```
<select id = "opt">
  <option value="a">a</option>
  <option value="b">b</option>
  <option value="c">c</option>
</select> 
```

我们开工吧：

```
alert (document.getElementById('opt').innerHTML); 
```

它将打印：

```
<select id = "opt"><option value="a">a</option><option value="b">b</option><option value="c">c</option></select> 
```

还没有问题。现在我更改所选项目：

```
for (var count = 0; count < document.getElementById('opt').childNodes[0].options.length; count++)
{
 if (document.getElementById('opt').childNodes[0].options[count].value == 'b') { document.getElementById('opt').childNodes[0].options[count].selected = true; break; }
} 
```

并再次打印：

```
alert (document.getElementById('opt').innerHTML); 
```

它会再次打印：

```
<select id = "opt"><option value="a">a</option><option value="b">b</option><option value="c">c</option></select> 
```

但我排除了这样的事情！

```
<select id = "opt"><option value="a">a</option><option value="b" **selected="selected"**>b</option><option value="c">c</option></select> 
```

所以`.innerHTML`不跟随变化。如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:52:57.803

您看到的是属性和属性之间的区别。创建元素时将`selected`属性复制到属性中。`selected`您正在更改属性，但这不会更改属性。

您可以在这里看到设置属性和属性之间的区别：

[http://jsfiddle.net/Guffa/Pec9j/](http://jsfiddle.net/Guffa/Pec9j/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:43:03.377

Java 脚本是一种客户端语言。页面加载后，然后应用 javascript，因此它不会更改已加载的页面源。如果您想知道选择了哪个元素-

```
var value = opt.options[opt.selectedIndex].value; 
```

# emacs - Emacs：（交互式“f”）的默认目录

> ID：10278934
> 
> 赞同：3
> 
> 时间：2012-04-23T10:36:54.147
> 
> 标签：emacs, elisp

我正在编写一个简单的 hacky 解决方案来在 DesktopAid 之上的«项目»（缓冲区和框架集（X 窗口））之间切换。我做了一个程序来编写一个项目文件：

```
(defun project-save-as (project-filename)
  "Save the current session to a new project session file."
  (interactive "FProject file to write: ")
  (copy-file project-default project-filename t)
  ; New project is the new current project.
  (write-cur-project-file project-filename)
  (set-variable 'cur-project-filename project-filename)
  (copy-file cur-project-filename project-default t)
 ) 
```

但是每次都导航到带有项目文件的目录很烦人。有没有办法在`(interactive)`不改变全局变量的情况下设置默认目录？

**更新**：这是我的（有点傻）代码，如果有人感兴趣的话→ [http://paste.lisp.org/display/129116](http://paste.lisp.org/display/129116)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T11:14:30.937

您可以轻松地推出自己的`interactive`功能，方法是向其传递一个计算函数参数列表的表单。

在这种情况下，如果您想避免创建新变量，您可以使用硬编码的默认目录参数直接调用（尽管它看起来确实像您*将*使用变量`read-file-name`的那种事情）。

 *例如：

```
(interactive
  (list (read-file-name "Project file to write: " "~/"))) 
```*

# tridion - Tridion 2009 - 在自定义页面上使用互操作 - 用户应该充当类似管理员的角色

> ID：10278940
> 
> 赞同：1
> 
> 时间：2012-04-23T10:37:21.447
> 
> 标签：tridion, tridion2009

我有一个关于使用 Interops dll 处理自定义页面上的用户访问的说明。

以下是场景：-

1.  `ABC user`没有任何访问权限`CM` （注意：ABC 用户是 tridion 用户）
2.  如果 ABC 用户访问自定义页面，用户应该被模拟为管理员用户
3.  现在 ABC 用户将创建/更新组件/页面并发布组件/页面
4.  但问题是组件/页面的历史显示名称的`admin user`名称，但我想用名称记录更改`ABC user`

> 我怎样才能做到这一点？
> **或者**
> 在不使用模拟的情况下，有没有最好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T11:19:27.563

我想知道你为什么要这样做。当您使用管理员用户模拟用户 ABC 时，ABC 用户可以在系统中执行任何操作。

为什么不将 ABC 用户添加到 CM 系统并赋予用户所需的权限和权限。

据我所知，要在历史记录中记录使用 ABC 用户名称的更改，用户需要是 CM 用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:47:24.383

正如@Bappi 所建议的那样，我很确定您要尝试做的事情是不可能的。对 Tridion 项目执行操作时，您有 2 个选择。要么以有权执行该操作的人的身份执行此操作，要么冒充为具有该权限的用户（即您的管理员用户）。CMS 将存储有关哪个用户执行该操作的系统元数据（这是您看到的创建或修改组件的用户）。不能（也不应该）使用 API 覆盖或修改此数据。

如果您确实需要知道谁执行了该操作，请授予他们这样做的权利（无论如何，当您给他们这个安全漏洞时，这似乎是一个奇怪的要求，也许您可​​以解释更多关于这背后的逻辑），或者可能会在您的架构中添加一个名为“作者”的字段，并使用您的自定义页面使用 ABC 的用户名填充它。

如果这不是一个可行的选择，您还可以考虑让用户 ABC 访问目标出版物中的某种临时文件夹，他们可以在其中使用自己的帐户（仍然通过自定义页面）制作组件，以便您获得历史记录，并且然后模拟管理员用户将其移动到所需位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T12:47:47.733

如何将权限设置为动态发布级别？

1.  在加载自定义页面时，设置用户对特定出版物的权限。
2.  操作完成后，删除用户的权限。

但我想，还是有一个漏洞。

在此自定义页面运行时，如果用户访问内容管理器，他们可以看到出版物，并且可以在此时执行所需的操作。

# jmeter - 我可以在 Jmeter 测试中使用服务器的主机名而不是 IP 地址吗

> ID：10278941
> 
> 赞同：0
> 
> 时间：2012-04-23T10:37:21.650
> 
> 标签：jmeter, load-testing, performance-testing

我正在尝试使用 jmeter 加载测试网站，我可以在 http 请求默认值中给出该服务器的主机名而不是 ip 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:43:12.057

你当然可以。JMeter 将在内部将主机名解析为 IP 地址。

# objective-c - 为什么字符串中的 NSDate 少了一天？

> ID：10278946
> 
> 赞同：12
> 
> 时间：2012-04-23T10:37:27.780
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

如果我尝试：

```
NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyyMMdd"]; 
```

和

```
[formatter dateFromString:@"20120423"]; 
```

我的新 NSDate 对象将是： 2012 04 **22**。为什么少了一天？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-23T10:46:05.223

您有时区问题，可以通过添加以下代码行来解决：

```
formatter.timeZone = [NSTimeZone timeZoneWithName:@"GMT"]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-15T08:38:25.653

对于那些寻找**swift 3**版本的人

```
let formatter        = DateFormatter()
formatter.timezone   = TimeZone(abbreviation: "GMT")
formatter.dateFormat = "yyyyMMdd"
formatter.date(from: "20120423") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T08:07:17.903

**对于使用Swift 3**的一个班轮

 **```
Date.init(dateString: "2014-07-31", format: "yyyy-MM-dd", timeZone: TimeZone.init(abbreviation: "GMT")!) 
```**

# android - 使用 ActionBarSherlock 向 ActionBar 添加按钮

> ID：10278952
> 
> 赞同：19
> 
> 时间：2012-04-23T10:37:47.190
> 
> 标签：android, actionbarsherlock, android-actionbar

我一直在尝试向 SherlockActionBar 添加一个按钮，但我无法让它工作。

这是我拥有的代码：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        android.view.MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, (android.view.Menu) menu);
        return super.onCreateOptionsMenu(menu);
    } 
```

这是我的`menu.xml`代码：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/save_button"
          android:title="i"
          android:showAsAction="always" />
</menu> 
```

这不起作用，因为即使我按下菜单按钮，也没有任何显示。还有其他方法吗？我有什么错误吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-23T10:51:50.753

您正在使用 Android 的 Menu 和 MenuInflater，但应该使用 ActionBarSherlock 附带的类：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
   inflater.inflate(R.menu.menu, (com.actionbarsherlock.view.Menu) menu);
   return super.onCreateOptionsMenu(menu);
} 
```

看来您现在正在将两者混合在一起。确保只导入 com.actionbarsherlock.view.Menu 和 com.actionbarsherlock.view.MenuInflater，而不是其 Android 对应项。我建议您执行以下操作：

```
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;

...

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
       MenuInflater inflater = getSupportMenuInflater();
       inflater.inflate(R.menu.menu, menu);
       return super.onCreateOptionsMenu(menu);
    } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-23T10:55:48.613

我认为在 menu.xml 中。您的项目没有完全声明 android:showAsAction 属性。您必须像这样声明它：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/save_button"
          android:title="i"
          android:showAsAction="always|withText" />
</menu> 
```

由于您没有为项目指定任何图标，因此操作栏无法显示任何项目。默认情况下，图标比文本显示。

# java - android:text="@string/hello" 和普通右键-->文本视图组件-->EditText的区别

> ID：10278953
> 
> 赞同：2
> 
> 时间：2012-04-23T10:37:49.183
> 
> 标签：java, android, android-layout

当我在教程的帮助下工作时，我在 textview android:text-"@string/hello" 中发现了这个，它显示了一些错误。

然后我浏览了图形视图并右键单击组件并输入文本。然后该错误将删除并通知我

```
**Hardcoded string hello should use String resources** 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T11:00:56.567

在 android 中，“@string/”指的是包资源管理器中**Project>res>values>**位置中的**string.xml 。**

 **String.xml 包含一个 xml 文件，它引用一个带有 id 的字符串。例如：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="hello">Hello World</string>
    <string name="app_name">My app</string>
</resources> 
```

这里 name="hello" 是 id & "Hello World" 是它的值。当使用@string/hello 时，将显示该值。

“@drawable/”的情况类似。它将参考使用的图像。还有很多。

您可以以编程方式在文本视图中设置文本。例如：

```
TextView tv = (TextView)findViewById(R.id.text1);     //text1 is the id u provide in xml file
tv.setText("Hello World"); 
```

我希望它对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T10:40:32.470

`@string/hello`只需注意 Android 将字符串加载到位于 /values 目录 (strings.xml) 中的 XML 文件中。

`hello`是该`name="hello"`XML 中指定的字符串的 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-21T02:11:49.200

Android Studio 非常不稳定。以前，它会在`string.xml`. 因此，使用以前版本的教程会让初学者陷入困境。

## `string.xml`工作原理

Android Studio 希望您将所有文本写入文件中的一个位置`string.xml`。在所有其他文件中，您只需输入缩写即可。例如

```
android:text="@string/Hello_world" 
```

表示`Hello_world`在`string.xml`文件中找到缩写并将其替换为预期的文本。

中`string.xml`，对应的应写为：

```
<string name="Hello_world">Hello world!</string> 
```

那应该做的工作！

可以只写`android:text="Hello world!"`（这就是硬编码）。如果您打算成为一名 android 开发人员，那么您将无法最大限度地提高效率。

## 为什么？`string.xml`

将所有文本放在一个文件中可以简化很多事情。如果需要，喜欢翻译，并且易于更改。但是，您应该选择有意义的缩写！**

# wcf - 在 WCF 服务中放置 DTO <==> 实体翻译器的位置？

> ID：10278956
> 
> 赞同：1
> 
> 时间：2012-04-23T10:37:52.600
> 
> 标签：wcf, domain-driven-design, dto, translate

我有以下设计： [我的设计](http://s15.postimg.org/3zha8rzqh/Design_Idea.png) [我的设计 http://s15.postimg.org/3zha8rzqh/Design_Idea.png](http://s15.postimg.org/3zha8rzqh/Design_Idea.png)

我将在我的**服务层**（左侧服务）中有一个名为“ProductDTO”的类。

当调用“更新产品（ProductDTO）”操作合约时 - 它应该调用**业务逻辑层**中的“更新产品”功能。

在数据库（**“数据访问层”**）中有一个名为“Product”的实体，因为我使用 LINQ-To-Entities，所以那里还有一个名为“Product”的类。

我的问题是 - 我在哪里从 'ProductDTO' 翻译成 'Product' ？

**我应该在服务层**中有一个“Translate_ProductDTO_To_Product”功能吗？这似乎是最合乎逻辑的答案，因为这是唯一知道“ProductDTO”是什么的层。

但这意味着**服务层**还必须知道“产品”是什么，因此必须引用**数据访问层**组件。

这个对吗 ？

我认为**服务层**应该只引用**业务逻辑层**，**业务逻辑层**应该只引用**数据访问层**，而服务层应该对DAL一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:55:08.320

看来您的困惑可能源于假设`Product`数据层中的类实际上是`Product`实体。通常在[域驱动程序设计](http://domaindrivendesign.org/resources/what_is_ddd)中，您的业务实体存在/是业务逻辑层。通常这些类“不知道”持久性，这是数据访问层的责任（通常使用对象关系映射器框架）。

在实践中，您的服务将需要对域模型（业务层）和数据访问层的引用才能执行有用的工作。WCF 服务代码和数据访问层都应该依赖于域模型，但域模型不应该依赖于数据访问层或 WCF 服务代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T13:07:16.093

将 DTO 映射到服务层中的域实体。您的服务层需要了解 DTO 及其映射到（和从）的实体。我强烈建议您使用像 [AutoMapper](http://automapper.org/)这样的工具来进行映射而不是手工制作。您的服务层*不应*引用您的 DA 层（或程序集）。您的 BL 稍后将需要引用您的 DA 层来持久化实体。编辑：您的业务实体可能不应该在 DA 命名空间下。如果您使用 ORM 工具来生成它们，请确保将任何 DDD 逻辑放在部分类的另一半中。

# vba - 如何使用 vba 在 Powerpoint 2007 中将图像纵横比设置为 100%？

> ID：10278959
> 
> 赞同：1
> 
> 时间：2012-04-23T10:38:01.877
> 
> 标签：vba, powerpoint, powerpoint-2007

我正在开发自动化工具。我想在每张幻灯片上将图像纵横比设置为 100%。在 vba 中是否有任何属性？

感谢进阶。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:57:15.540

你的意思是这样吗？

```
Option Explicit

Sub Sample()
    Dim shp As Shape

    Set shp = ActivePresentation.Slides(1).Shapes("Picture 1")

    With shp
        .ScaleHeight 1, msoTrue
        .ScaleWidth 1, msoTrue
    End With
End Sub 
```

# sql-server - 将 Oracle 右外连接转换为 SQL Server

> ID：10278966
> 
> 赞同：0
> 
> 时间：2012-04-23T10:38:10.043
> 
> 标签：sql-server, oracle

我对 SQL 很陌生，我正在尝试将一些 Oracle 命令转换为 SQL Server。问题在于转换以下右外连接：

```
where
   SOURCE_FORMATS.LOC_SIMPLE_ENTITY_ID = FILEFORMAT_INTERNAL_SIGNATURES.LOC_FILEFORMAT_ID (+) 
```

据我在 SQL 中的理解，这必须在“from”部分中表示为：

```
from
   SIMPLE_ENTITIES "SOURCE_FORMATS"  
RIGHT OUTER JOIN FILEFORMAT_INTERNAL_SIGNATURES
on SOURCE_FORMATS.LOC_SIMPLE_ENTITY_ID = FILEFORMAT_INTERNAL_SIGNATURES.LOC_FILEFORMAT_ID 
```

这个逻辑正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T12:21:21.313

在用于外连接的 pre-ANSI Oracle 语法中，(+) 用于预计有缺陷的表，而不是用于要保留的表。

所以：

```
select * from t1, t2 where t1.col1 = t2.col2 (+) 
```

是相同的

```
select * from t1 left join t2 on t1.col1 = t2.col2 
```

# asp.net - 如何在变量测试中使用 resx

> ID：10278974
> 
> 赞同：0
> 
> 时间：2012-04-23T10:38:51.220
> 
> 标签：asp.net, vb.net, translation, resx

我一直在寻找使用 resx 的教程，但我只发现了一些 resx 取决于本地化（和浏览器的语言）的地方。

当某个变量具有某个值时，我如何告诉我的应用程序使用某个 resx。例如，当 xyz=1 时，我想使用 default.aspx.de.resx。

提前感谢

编辑：我听说覆盖 InitializeCulture 存在问题。解决方案是：

```
Public Class FormBase
Inherits Page

Protected Overrides Sub InitializeCulture()
    Dim selectedLanguage As String

    Select Case Master.LanguageID
        Case 1
            selectedLanguage = "fr-BE"
        Case 4
            selectedLanguage = "nl-BE"
        Case 5
            selectedLanguage = "en-GB"
        Case 6
            selectedLanguage = "de-DE"
        Case Else
            selectedLanguage = "fr-BE"
    End Select

    UICulture = selectedLanguage
    Culture = selectedLanguage
    Threading.Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(selectedLanguage)
    Threading.Thread.CurrentThread.CurrentUICulture = New CultureInfo(selectedLanguage)

    MyBase.InitializeCulture()
End Sub 
```

结束类

然后在 aspx.vb 上：

部分类默认继承 FormBase

我怎样才能在这个类中访问 Master.LanguageID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:57:20.773

尝试在页面后面的代码中覆盖 InitializeCulture。

```
protected override void InitializeCulture()
{
    if (Request.QueryString["xyz"] == "1")
    {
        String selectedLanguage = "de-DE"
        UICulture = selectedLanguage ;
        Culture = selectedLanguage ;

        Thread.CurrentThread.CurrentCulture = 
            CultureInfo.CreateSpecificCulture(selectedLanguage);
        Thread.CurrentThread.CurrentUICulture = new 
            CultureInfo(selectedLanguage);
    }
    base.InitializeCulture();
} 
```

问候。

# php - 如何获得原始图像扩展名

> ID：10278976
> 
> 赞同：0
> 
> 时间：2012-04-23T10:38:56.907
> 
> 标签：php, image

> **可能重复：**
> [PHP 中的自动图像格式检测](https://stackoverflow.com/questions/189391/automatic-image-format-detection-in-php)

假设我有一个图像“abc.gif”并将其重命名为“abc.jpg”，但两者

```
echo $_FILES['imageupload']['type']; 
```

和

```
echo mime_content_type($_FILES['imageupload']['type']); 
```

输出“图像/jpg”。

我怎样才能得到 .gif 而不是 .jpg 的原始扩展名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:42:14.163

```
<?php

$finfo = finfo_open(FILEINFO_MIME_TYPE); // Returns a magic database resource (we are gone search through mime-types)

foreach ($filenames as $filename) {
    echo finfo_file($finfo, $filename) . "\n"; // Return mime-type of every file
}

finfo_close($finfo);

?> 
```

# graphviz - 在保持现有图形固定的同时添加新边

> ID：10278979
> 
> 赞同：0
> 
> 时间：2012-04-23T10:39:11.197
> 
> 标签：graphviz, dot

考虑此图中手动绘制的红色箭头：

![在此处输入图像描述](../Images/fdc41b745404624dcaeb075936213e59.png)

我想告诉 graphviz 画一个这样的箭头，尽管特定的路径并不重要。重要的是现有图表根本没有改变。本质上，我想指示graphviz

1.  绘制某个图形
2.  保持该图固定，为其添加新边

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:31:42.980

是的，这应该是可能的。

如果您有一个特定的图形（例如）并在未指定输出格式的情况下`data.dot`运行此文件，将输出一个带有添加坐标（节点和边的属性）的点文件。如果保存此输出 ( )，您可以将新边添加到其中，然后生成两个输出文件。 您可能必须放大新边缘的边界框以免与位置混淆。`dot``dot``pos``dot data.dot > data_pos.dot`
`graph [bb="..."];`

# regex - 如何在 Perl 中替换字符串中的一个或多个字符串

> ID：10278980
> 
> 赞同：0
> 
> 时间：2012-04-23T10:39:25.537
> 
> 标签：regex, perl

$args[0] 是对包含一次或多次的字符串的引用。我每次都会移动可变的秒数，但是我需要找到一种方法将更改的时间存储（替换）回原始字符串。任何帮助表示赞赏。以下是我正在使用的大致内容：

```
 my $TIMEREGEX = qr/(\d{2}:\d{2}:\d{2}\.\d{3}|\d{2}:\d{2}:\d{2})/x;
    if ( my @sTime = ${$args[0]} =~ /$TIMEREGEX/g )
    {
        warn "\ttime(s) found @sTime\n" if $main::opt{d};
        for my $i ( 0..$#sTime )
        {
            $sTime[$i] =~ /(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?/;
            my $epoch_time = ( $1 * 3600 ) + ( $2 * 60 ) + $3;
            $epoch_time += $epoch_shift;
            my @f;
            $f[0] = $epoch_time % 86400 / 3600; # hours
            $f[1] = $epoch_time % 3600 / 60;    # minutes
            $f[2] = $epoch_time % 60;           # seconds
            my $save = $sTime[$i];
            $sTime[$i] = sprintf ( "%02d:%02d:%02d", $f[0], $f[1], $f[2] );
            $sTime[$i] .= $4 if defined ( $4 );
            warn "\tTimeShift $save => $sTime[$i]\n" if $main::opt{d};
            ### some other stuff
        }

        # ${$args[0]} = "$1$t[0]$4$t[1]$7$t[2]$10";
        ### save the changes to ${$args[0]} !

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:09:17.413

使用[替换运算符](http://p3rl.org/op#s%2fPATTERN%2fREPLACEMENT%2fmsixpodualgcer)。

```
use 5.010;  # or better for 'say' and '//'
use strictures;
use Time::Piece qw();

my @args; my $epoch_shift = 500;
${$args[0]} = 'foo18:00:00.123bar18:00:00baz18:00:00quux';

${$args[0]} =~
    s{
        (\d{2}:\d{2}:\d{2})  # capture hh:mm:ss
        (\.\d{3})?           # optionally capture
                             #   decimal dot and milliseconds
    }
    {
        (
            $epoch_shift
            + Time::Piece->strptime($1, '%T')
        )->strftime('%T').($2 // '')
    }egx;
say ${$args[0]};
# foo18:08:20.123bar18:08:20baz18:08:20quux 
```

# google-docs-api - Google 文档列表 Java API - 已更新

> ID：10278986
> 
> 赞同：1
> 
> 时间：2012-04-23T10:39:57.823
> 
> 标签：google-docs-api, google-drive-api

似乎使用使用 updatedMin 的 DocumentQuery 似乎无法正常工作。此查询确实找到了自“何时”以来创建的新文件和文件夹，但未能返回自该时间以来被修改、移动、删除或其他任何内容的文件。

```
DocumentQuery myQuery = new DocumentQuery(new URL("https://docs.google.com/feeds/default/private/full/"));
myQuery.setUpdatedMin(when);
DocumentListFeed entries = getDocsService().getFeed(myQuery, DocumentListFeed.class); 
```

我意识到 API 可能会随着即将推出的 Google Drive 发生变化，在此期间有什么变化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:54:54.053

要检索自特定日期以来已编辑的文档，请使用[`edited-min`](https://developers.google.com/google-apps/documents-list/#parameter_reference_for_resources_collection_uri)查询参数。

从一个`DocumentQuery`实例中，您可以使用[`addCustomParameter`](http://code.google.com/apis/gdata/javadoc/com/google/gdata/client/Query.html#addCustomParameter%28com.google.gdata.client.Query.CustomParameter%29)来设置这样的值。

```
query.addCustomParameter(
    new Query.CustomParameter("edited-min", "<DATE_IN_RFC_3339_FORMAT>"); 
```

# php - 如何使用 PHP 在 WAP 中获取 MSISDN 号码？

> ID：10278989
> 
> 赞同：5
> 
> 时间：2012-04-23T10:40:12.477
> 
> 标签：php, phone-number, sim-card, wap, msisdn

我开发了一个 WAP 应用程序，我想获得访问我网站的用户的 MSISDN。

我的运营商已将我的 WAP 应用程序列入白名单。

我在几部三星手机上成功获得了 MSISDN，但在诺基亚、黑莓和 iPhone 设备上却没有获得相同的结果。

请建议我获取所有设备的 MSISDN 号码的最佳方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T07:33:36.993

获取访问 WAP 站点的用户的 MSISDN 的能力取决于许多因素。

首先，用户必须使用移动数据。如果用户在 WiFi 上，那么您将不会收到此信息。

其次，用户的移动网络必须支持 MSISDN 在 HTTP 标头中的传递。

一些移动网络会在所有请求上发送标头。其他人仅在通过特定 APN 时发送。有些只将此标头发送到特定的 IP 地址/块。我什至遇到过将 MSISDN 作为 $_GET 变量发送的网络。您将需要检查您打算支持的每个网络。

例如，直到大约 6 个月前，南非的一个特定网络过去一直在标头中发送 MSISDN，为了在标头中接收 MSISDN，您的服务器地址需要与它们一起列入白名单。

还要记住，标头很容易被欺骗，除非您保证自己是 HTTP 请求的发起者，否则不应依赖标头，例如在您在 Android 应用程序中使用 Web 视图的情况下 - 您需要自己采取足够的措施。

考虑到所有这些，您应该寻找以下内容：

查看您的标题是否有以下任何内容。这根本不是 MSISDN 标头的完整列表，它们只是我在移动开发冒险中遇到的那些。

*   X-MSISDN
*   X_MSISDN
*   HTTP_X_MSISDN
*   X-UP-CALLING-LINE-ID
*   X_UP_CALLING_LINE_ID
*   HTTP_X_UP_CALLING_LINE_ID
*   X_WAP_NETWORK_CLIENT_MSISDN

我所做的是通过标题查找任何匹配项。如果我没有找到任何匹配项，我会再次使用特定于国家/地区的 MSISDN 正则表达式针对这些值运行标头，以查看我不知道的键的标头中是否有任何潜在的 MSISDN。如果我找到一个潜在的匹配项，我会将密钥和数据添加到我以后可以通过的列表中，以便添加到我的已知 MSISDN 标头列表中。

我希望这已经购买了一些清晰度。最重要的是要记住，这不是获取 MSISDN 的可靠方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-10T22:12:54.727

You can try these others (*original: puedes intentar con estas otras*):

*   X-MSISDN
*   X_MSISDN
*   HTTP-X-MSISDN
*   X-UP-CALLING-LINE-ID
*   X_UP_CALLING_LINE_ID
*   HTTP_X_UP_CALLING_LINE_ID
*   X_WAP_NETWORK_CLIENT_MSISDN
*   X-Forwarded-For
*   Proxy-Client-IP
*   WL-Proxy-Client-IP
*   HTTP_CLIENT_IP
*   HTTP_X_FORWARDED_FOR
*   x-real-ip
*   HTTP_X_UP_CALLING_LINE_ID
*   HTTP_MSISDN
*   MSISDN
*   User-Identity-Forward-msisdn
*   HTTP_X_MSISDN
*   HTTP_X_NOKIA_MSISDN
*   HTTP_X_UP_SUBNO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T08:26:23.250

有时标头由移动运营商加密。这可能会更改标题的命名。例如，X-MSISDN 变为 X-ENCR-MSISDN。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-18T11:56:12.367

一些运营商在服务器请求上发送 x 标头，根据我最近的研究，我发现许多运营商隐藏或加密或重命名 x 标头，并且很难检索用户的 MSISDN，我尝试了很多方法，如果你想测试您的运营商，您可以使用本网站测试运营商的 MSISDN 可用性（记得用您的移动设备打开链接）希望对您有所帮助。我已使用 Asp.net Mvc 提取了这些标头

# c# - 泛型方法如何在 C# 中实例化？

> ID：10278994
> 
> 赞同：6
> 
> 时间：2012-04-23T10:40:39.390
> 
> 标签：c#, generics, generic-method

假设我有一个通用方法：

```
void Fun<T>(FunArg arg) {} 
```

是泛型方法`this.Fun<Feature>`的`this.Fun<Category>`不同实例化吗？

一般来说，泛型方法是如何被实例化的？不同的泛型参数会产生不同的方法，还是相同的方法以及运行时使用的不同元数据？

请用语言规范中的一些引用来支持您的回答。

另外，假设我做了这些：

```
client.SomeEvent += this.Fun<Feature>;   //line1
client.SomeEvent += this.Fun<Category>;  //line2
client.SomeEvent += this.Fun<Result>;    //line3 
```

然后后来，

```
client.SomeEvent -= this.Fun<Feature>;   //lineX 
```

`lineX`撤消我所做的事情吗`line1`？或者它也取决于其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:46:59.470

它们都共享一个方法*定义*，但在运行时它们是不同`MethodInfo`的——因为泛型类型参数**定义**了一个泛型方法。

支持插图：

```
 Action<FunArg> a1 = Fun<X>;
    Action<FunArg> a2 = Fun<Y>;
    Action<FunArg> a3 = Fun<Y>;
    Console.WriteLine(a1.Method == a2.Method); // false
    Console.WriteLine(a3.Method == a2.Method); // true 
```

在 JIT 级别，它更复杂；任何引用类型的参数都将**共享**一个实现，因为引用是引用是引用（注意所有这些都`T`必须提前满足任何约束）。如果有 value-type `T`，那么每个泛型类型参数的组合在运行时都会得到一个单独的实现，因为每个组合都需要不同的最终实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T10:46:43.713

这取决于所涉及的类型。

对于所有引用类型（即*classes*），*一种*方法将被 JITted 来处理它们。

对于所有值类型（即*structs*），**每种类型的***一个*方法将被 JITted。

 **所以问题中的信息不够详细，无法回答，如果`Feature`和`Category`是引用类型，那么是的，将为它们 JITted 一种方法。如果其中之一或两者都是值类型，则每种值类型的一个方法将被 JITted。

注意我在这里使用了*JITted*这个词。在编译的程序集中，只有一个方法，但在运行时，JITter 会根据上述规则创建泛型方法的实际实现。

**流行测验**：如果您`NGEN`在具有泛型类型/方法的程序集上使用会发生什么？（提示：[不是你想的那样](https://stackoverflow.com/questions/2644294/any-reason-why-ngen-should-hang-and-never-complete-for-a-particular-assembly/4122253#4122253)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:42:15.500

是的，它们将成为两种不同的方法。**

# erlang - 如何在事务中一起删除两个相关表中的所有记录？

> ID：10278995
> 
> 赞同：1
> 
> 时间：2012-04-23T10:40:48.793
> 
> 标签：erlang, mnesia

两个表是相关的，我想编写函数来删除这两个表中的所有记录，但是输出表明我不能这样做。一条一条删除记录的低效率选择是唯一可用的选择吗？

```
clear_gyne()->
R = execute_mnesia_transaction(
 fun()->
    mnesia:clear_table(bas_gyne),
    mnesia:clear_table(bas_gyne_property)
end),
R.

execute_mnesia_transaction(TxFun) ->
    %% Making this a sync_transaction allows us to use dirty_read
    %% elsewhere and get a consistent result even when that read
    %% executes on a different node.
    %%    case worker_pool:submit(
    %%    fun () ->
    Result_a = case mnesia:is_transaction() of
                         false -> DiskLogBefore = mnesia_dumper:get_log_writes(),
                                  Res = mnesia:sync_transaction(TxFun),
                                                     DiskLogAfter  = mnesia_dumper:get_log_writes(),
                                  case DiskLogAfter == DiskLogBefore of
                                      true  -> Res;
                                      false -> {sync, Res}
                                  end;
                         true  -> mnesia:sync_transaction(TxFun)
                     end,
    case Result_a of
        {sync, {atomic,  Result}} -> mnesia_sync:sync(), Result;
        {sync, {aborted, Reason}} -> throw({error, Reason});
        {atomic,  Result}         -> Result;
        {aborted, Reason}         -> throw({error, Reason})
   end. 
```

`execute_mnesia_transaction`从 rabbitmq 项目的源代码复制而来。

输出是

```
bas_store:clear_gyne().
** exception throw: {error,{aborted,nested_transaction}}
     in function  bas_store:execute_mnesia_transaction/1 (src/bas_store.erl, line 29) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T00:34:13.647

`mnesia:clear_table/1`被归类为模式事务，因此不能嵌套在另一个事务中。

参看。mnesia:clear_table [http://erlang.org/pipermail/erlang-questions/2005-August/016582.html](http://erlang.org/pipermail/erlang-questions/2005-August/016582.html)

# mysql - SQL 中带有 SELECT COUNT 查询的 LIMIT

> ID：10278997
> 
> 赞同：1
> 
> 时间：2012-04-23T10:41:00.070
> 
> 标签：mysql, sql, phpmyadmin

我想用另一个表的行数来限制 INSERT，如下所示：

```
INSERT INTO pacte (alianca_en_pacte, tipus)
SELECT id_alianca_en_pacte1 ,tipus_pacte1
FROM c_alianca
LIMIT 0, SELECT COUNT(tipus_pacte1) FROM c_alianca WHERE tipus_pacte1 IS NOT NULL 
```

以下查询：

```
SELECT COUNT(tipus_pacte1) FROM c_alianca WHERE tipus_pacte1 IS NOT NULL 
```

返回一个**4**

运行脚本时，出现以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“SELECT * FROM c_alianca”附近使用正确的语法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:48:13.033

为什么不只查询您的条件并插入这样的条件？

```
INSERT INTO pacte (alianca_en_pacte, tipus)
SELECT id_alianca_en_pacte1 ,tipus_pacte1
FROM c_alianca
WHERE tipus_pacte1 IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T10:47:55.730

MySQL 目前不支持将子查询作为`LIMIT`. 您将需要在两个查询中使用用户变量：

```
SET @limit = (
    SELECT COUNT(tipus_pacte1) FROM c_alianca WHERE tipus_pacte1 IS NOT NULL
);

INSERT INTO pacte (alianca_en_pacte, tipus)
    SELECT id_alianca_en_pacte1 ,tipus_pacte1
    FROM c_alianca
    LIMIT 0, @limit; 
```

但[正如 Nesim Razon 所建议的](https://stackoverflow.com/a/10279099/623041)，在您的示例中，可以完全避免使用`LIMIT`：

```
INSERT INTO pacte (alianca_en_pacte, tipus)
    SELECT id_alianca_en_pacte1 ,tipus_pacte1
    FROM c_alianca
    WHERE tipus_pacte1 IS NOT NULL; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T10:43:33.257

这就是你所追求的吗

```
INSERT INTO pacte (alianca_en_pacte, tipus)
SELECT id_alianca_en_pacte1, tipus_pacte1, 
    ( SELECT COUNT(tipus_pacte1) FROM c_alianca WHERE tipus_pacte1 IS NOT NULL ) AS tipus 
FROM c_alianca LIMIT 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T08:00:19.847

```
below is the code for Limitation on ID....It is the example for you
Declare @Counter int 
Set @Counter=(SELECT Count(Student_ID) as 'StudentCount' FROM CourseSemOne 
where Student_ID=1 Having Count(Student_ID) < 6 and Count(Student_ID) > 0)
if(@Counter <6)
print'Sorry! You cannot add more than five subject data for a single student'
else
print'Insert Code'; 
```