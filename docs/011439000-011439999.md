# StackOverflow 问答 11439000-11439999

# liferay-6 - 需要将@ApplicationScoped bean“注入”到 Liferay 钩子中

> ID：11439000
> 
> 赞同：0
> 
> 时间：2012-07-11T18:25:55.310
> 
> 标签：liferay-6

托管 bean 和钩子都在同一场战争中。我在 Tomcat 7 上使用 6.1 CE。

我试图在绑定到 logout.events.pre 的 Hook 的 run 方法期间从 ApplicationScoped bean 中删除一些数据。

使用 HttpServletRequest 调用 run 方法，并且我已经读过该 bean 应该可以作为该 HttpServletRequest 的属性或我可以从 HttpServletRequest 获得的 ServletContext 的属性来访问，但是这两种方法都返回 null。

我已经列举了所有的键，它只是不存在。

有谁知道如何实现我所需要的？

谢谢。

```
 @Override
public void run(HttpServletRequest req, HttpServletResponse res) {

    System.out.println("In custom pre LogoutAction....");

    ServletContext servletContext = req.getServletContext(); 
```

// DataBean dataBean = (DataBean) servletContext.getAttribute("com.xvest.hooks.DataBean");

// DataBean dataBean = (DataBean) req.getAttribute("dataBean");

```
 // Find loggedInUser and impersonatedUser.
    ThemeDisplay themeDisplay = (ThemeDisplay) req.getAttribute("THEME_DISPLAY");

    User loggedInUser = themeDisplay.getRealUser();
    User impersonatedUser = themeDisplay.getUser();

    // Fetch CompleterHousehold for impersonatedUser.
    CompleterHousehold completerHousehold = dataBean.fetch(impersonatedUser, loggedInUser);

    // Delete loggedInUser from CompleteHousehold.viewers
    boolean result = completerHousehold.deleteViewer(loggedInUser);

    // If the delete returns true, there are no more viewers for this household, so delete the CompleterHousehold from DataBean.
    if (result)
        dataBean.delete(impersonatedUser);
} 
```

# javascript - 当双击广告在 Flash 中时，自定义滚动在 Chrome Mac 上无法正常工作

> ID：11439001
> 
> 赞同：0
> 
> 时间：2012-07-11T18:26:00.957
> 
> 标签：javascript, jquery, macos, google-chrome, scroll

[http://unique-guides.com/fr/vos-microguides](http://unique-guides.com/fr/vos-microguides)

当下方的广告是 Flash 广告时，上方网站的侧边栏无法正常滚动。这适用于所有其他浏览器（例如 Mac Firefox、Windows Chrome）。如果广告是 HTML 格式，它也可以正常工作。

广告包含在 iframe 中，但当广告位于 div 中时会出现相同的行为。我正在使用 Chrome 20.0.1132.52。wmode 是不透明的，AllowScriptAccess 永远不会

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:51:48.557

我只是看着它。将 #sidebar > .content-holder 的 z-index 更改为高于 Flash 广告的值（我将其设置为 200）并且它可以工作，一定是一个错误，但有一个解决方法

**注意**这个错误不会出现在我的 Chrome 中，但它会出现在 OSX 上的 Safari 5.1.6 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:05:49.283

添加位置：相对于 Chrome 中的#big-box 固定问题

# ravendb - Ravendb - 修补字符串列表

> ID：11439002
> 
> 赞同：1
> 
> 时间：2012-07-11T18:26:03.580
> 
> 标签：ravendb

使用 Ravendb (build 960) 我正在尝试对一组文档执行批量更新，以替换字符串列表中的单个值。我使用[Google Group Question](https://groups.google.com/forum/?fromgroups#!topic/ravendb/5qYWsq_ny0M)作为代码的基础，因为请求几乎相同，但由于某种原因，他们能够在我的错误出现时让他们的问题正常工作。我编写了以下示例控制台应用程序来演示该问题。

```
public class Document
{
    public const string OLD_NAME = "Label A";
    public const string NEW_NAME = "Label B";

    public Document()
    {
        Labels = new List<string> { OLD_NAME };
    }

    public string Id { get; set; }
    public IList<string> Labels { get; set; }
}

public class Document_By_Labels : AbstractIndexCreationTask<Document>
{
    public Document_By_Labels()
    {
        Map = leads => from doc in leads select new {doc.Labels};
    }
}

internal class Program
{
    private static void Main(string[] args)
    {
        IDocumentStore store = new DocumentStore
        {
            Url = "http://localhost:8081",
            DefaultDatabase = "RavendbPatchStringListTest"
        }.Initialize();
        IndexCreation.CreateIndexes(typeof (Program).Assembly, store);

        using (IDocumentSession session = store.OpenSession())
        {
            var s = new Document();
            session.Store(s);
            session.SaveChanges();

            var d = session.Load<Document>(s.Id);
            var m = session.Advanced.GetMetadataFor(d);
        }

        store.DatabaseCommands.UpdateByIndex("Document/By/Labels",
                                             new IndexQuery {Query = string.Format("Labels:\"{0}\"", Document.OLD_NAME)},
                                             new[]
                                             {
                                                 new PatchRequest
                                                 {
                                                     Type = PatchCommandType.Modify,
                                                     Name = "Labels",
                                                     AllPositions = true,
                                                     Nested =
                                                         new[]
                                                         {
                                                             new PatchRequest
                                                             {
                                                                 Type = PatchCommandType.Remove,
                                                                 Value = new RavenJValue(Document.OLD_NAME)
                                                             },
                                                             new PatchRequest
                                                             {
                                                                 Type = PatchCommandType.Add,
                                                                 Value = new RavenJValue(Document.NEW_NAME)
                                                             }
                                                         }
                                                 }
                                             }, allowStale: true);
    }
} 
```

当我跑步时，我得到：

```
System.InvalidCastException: Unable to cast object of type 'Raven.Json.Linq.RavenJValue' to type 'Raven.Json.Linq.RavenJObject'.
   at Raven.Json.Linq.Extensions.Convert[U](RavenJToken token, Boolean cast) in c:\Builds\RavenDB-Stable\Raven.Abstractions\Json\Linq\Extensions.cs:line 131
   at Raven.Json.Linq.Extensions.Convert[U](RavenJToken token) in c:\Builds\RavenDB-Stable\Raven.Abstractions\Json\Linq\Extensions.cs:line 116
   at Raven.Json.Linq.Extensions.Value[U](RavenJToken value) in c:\Builds\RavenDB-Stable\Raven.Abstractions\Json\Linq\Extensions.cs:line 24
   at Raven.Database.Json.JsonPatcher.ModifyValue(PatchRequest patchCmd, String propName, RavenJToken property) in c:\Builds\RavenDB-Stable\Raven.Database\Json\JsonPatcher.cs:line 138
   at Raven.Database.Json.JsonPatcher.Apply(PatchRequest patchCmd) in c:\Builds\RavenDB-Stable\Raven.Database\Json\JsonPatcher.cs:line 61
   at Raven.Database.Json.JsonPatcher.Apply(PatchRequest[] patch) in c:\Builds\RavenDB-Stable\Raven.Database\Json\JsonPatcher.cs:line 30
   at Raven.Database.DocumentDatabase.<>c__DisplayClassc1.<ApplyPatch>b__be(IStorageActionsAccessor actions) in c:\Builds\RavenDB-Stable\Raven.Database\DocumentDatabase.cs:line 1150
   at Raven.Storage.Esent.TransactionalStorage.Batch(Action`1 action) in c:\Builds\RavenDB-Stable\Raven.Storage.Esent\TransactionalStorage.cs:line 330
   at Raven.Database.DocumentDatabase.ApplyPatch(String docId, Nullable`1 etag, PatchRequest[] patchDoc, TransactionInformation transactionInformation) in c:\Builds\RavenDB-Stable\Raven.Database\DocumentDatabase.cs:line 1131
   at Raven.Database.Impl.DatabaseBulkOperations.<>c__DisplayClass2.<UpdateByIndex>b__1(String docId, TransactionInformation tx) in c:\Builds\RavenDB-Stable\Raven.Database\Impl\DatabaseBulkOperations.cs:line 42
   at Raven.Database.Impl.DatabaseBulkOperations.<>c__DisplayClassa.<PerformBulkOperation>b__5(IStorageActionsAccessor actions) in c:\Builds\RavenDB-Stable\Raven.Database\Impl\DatabaseBulkOperations.cs:line 80
   at Raven.Storage.Esent.TransactionalStorage.ExecuteBatch(Action`1 action) in c:\Builds\RavenDB-Stable\Raven.Storage.Esent\TransactionalStorage.cs:line 376
   at Raven.Storage.Esent.TransactionalStorage.Batch(Action`1 action) in c:\Builds\RavenDB-Stable\Raven.Storage.Esent\TransactionalStorage.cs:line 337
   at Raven.Database.Impl.DatabaseBulkOperations.PerformBulkOperation(String index, IndexQuery indexQuery, Boolean allowStale, Func`3 batchOperation) in c:\Builds\RavenDB-Stable\Raven.Database\Impl\DatabaseBulkOperations.cs:line 75
   at Raven.Database.Impl.DatabaseBulkOperations.UpdateByIndex(String indexName, IndexQuery queryToUpdate, PatchRequest[] patchRequests, Boolean allowStale) in c:\Builds\RavenDB-Stable\Raven.Database\Impl\DatabaseBulkOperations.cs:line 40
   at Raven.Database.Server.Responders.DocumentBatch.<>c__DisplayClass3.<Respond>b__0(String index, IndexQuery query, Boolean allowStale) in c:\Builds\RavenDB-Stable\Raven.Database\Server\Responders\DocumentBatch.cs:line 47
   at Raven.Database.Server.Responders.DocumentBatch.OnBulkOperation(IHttpContext context, Func`4 batchOperation) in c:\Builds\RavenDB-Stable\Raven.Database\Server\Responders\DocumentBatch.cs:line 64
   at Raven.Database.Server.Responders.DocumentBatch.Respond(IHttpContext context) in c:\Builds\RavenDB-Stable\Raven.Database\Server\Responders\DocumentBatch.cs:line 46
   at Raven.Database.Server.HttpServer.DispatchRequest(IHttpContext ctx) in c:\Builds\RavenDB-Stable\Raven.Database\Server\HttpServer.cs:line 550
   at Raven.Database.Server.HttpServer.HandleActualRequest(IHttpContext ctx) in c:\Builds\RavenDB-Stable\Raven.Database\Server\HttpServer.cs:line 316 
```

虽然我相信这个过程是正确的，但我一定会遗漏一些东西，否则它不会出错。

请注意，上述嵌套补丁没有名称，因为我尝试了许多不同的组合，但出现相同的错误。尝试示例：“”、“$values”、“Labels”。每次都出现相同的错误，并且由于字符串列表似乎没有名称，因此我故意在上面省略了它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:12:12.477

我最近一直在寻找如何做同样的事情。听起来不可能使用当前的修补 API 来更改字符串数组。

请参阅我在这里的讨论：[https ://groups.google.com/forum/#!topic/ravendb/5qYWsq_ny0M](https://groups.google.com/forum/#!topic/ravendb/5qYWsq_ny0M)

# java - 如何在安装在 Amazon EC2 上的 Tomcat7 中创建 JDBC MySQL 连接池？

> ID：11439009
> 
> 赞同：0
> 
> 时间：2012-07-11T18:26:34.757
> 
> 标签：java, mysql, jdbc, connection-pooling, tomcat7

我是新手，任何帮助将不胜感激。我在 Amazon EC2 上安装了一个 Webapp。我已经在 Amazon EC2 上安装了 Tomcat7 和 MySQL 5.5。

我在 servlet 中使用以下代码进行 JDBC-MySQL 连接

```
 Connection connection;
        Statement statement;
        ResultSet rs = null;
        try {
            // load Connector/J
            Class.forName("com.mysql.jdbc.Driver");
            connection = DriverManager.getConnection(JDBC_MYSQL_STRING);
            System.out.println(TAG + " Connection with MySQL established");
            statement = connection.createStatement();
            ....
            ....
            ....
            rs.close();
            statement.close();
            connection.close();
        } catch (ClassNotFoundException ex) {
            Log.log(Level.SEVERE, "ClassNotFoundException", ex);
        } catch (SQLException e) {
            for (Throwable t : e) {
                System.out.println(t.getMessage());
            } 
```

我已将`mysql-connector-java-5.1.13-bin.jar`Connector/J 包含在 Netabeans 的 Library 文件夹中，并`war`在 Amazon ec2 的 tomcat7 上部署了文件。

**我的问题** 我了解到 JDBC-MySQL 连接是非常耗时的操作，`connection pools`可用于保持实时连接，这将减少连接所消耗的时间。我是新手，已经阅读了我的博客，但无法理解如何设置`connection pool`以及如何在 servlet 中使用它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:32:40.067

您需要在 server.xml 中设置数据库连接

按照这个： http: [//www.mulesoft.com/tomcat-mysql](http://www.mulesoft.com/tomcat-mysql)

您的数据库的 URL 将采用以下形式：

“jdbc:mysql://yourdatabasename.foo.us-east-1.rds.amazonaws.com:3306/”

# windows - 为什么 ping 不需要 Windows 上的管理权限？

> ID：11439011
> 
> 赞同：7
> 
> 时间：2012-07-11T18:26:36.480
> 
> 标签：windows, ping, raw-sockets

> **可能重复：**
> [为什么 ping 在没有管理员权限的情况下工作？](https://stackoverflow.com/questions/7687401/why-does-ping-work-without-administrator-privileges)

来自关于 TCP/IP 原始套接字的[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740548%28v=vs.85%29.aspx)文章：

> ...重要的是要了解某些 SOCK_RAW 类型的套接字可能会收到许多意外的数据报。例如，一个 PING 程序可能会创建一个 SOCK_RAW 类型的套接字来发送 ICMP 回显请求并接收响应......

这段话表明，为了执行 ICMP ping，必须在 Windows 平台上使用原始套接字。但是，同一篇文章也说：

> **注意：** 要使用 SOCK_RAW 类型的套接字需要管理权限。运行使用原始套接字的 Winsock 应用程序的用户*必须是*本地计算机上管理员组的成员，否则原始套接字调用将失败并返回错误代码 WSAEACCES。在 Windows Vista 和更高版本上，对原始套接字的访问是在创建套接字时强制执行的。在早期版本的 Windows 中，对原始套接字的访问是在其他套接字操作期间强制执行的。

我当然不需要成为`ping`其他主机的管理员。那么是否`ping.exe`得到特殊处理，它甚至使用原始套接字还是我还缺少其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:39:22.037

正如 Uwe 评论的那样，`ping`只是不使用原始套接字。它使用特定的 API 来发送称为[IcmpSendEcho](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366050%28v=vs.85%29.aspx)或[IcmpSendEcho2](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366051%28v=vs.85%29.aspx)的回显请求。

您可以使用[Dependency Walker](http://www.dependencywalker.com/)`c:\windows\system32\ping.exe`亲自查看。

# iphone - 表格视图单元格图像在选择时消失并重新出现

> ID：11439015
> 
> 赞同：0
> 
> 时间：2012-07-11T18:27:12.470
> 
> 标签：iphone, ios, uitableview, didselectrowatindexpath

我有一个自定义`UITableViewCell`课程。我在配件类型`UITableViewCellAccessoryCheckmark`和`UITableViewCellAccessoryNone`何时`didSelectRowAtIndexPath`被调用之间切换。以下是选择前后单元格的示例：

前...![选择前](../Images/2529132711ae67c68d518ccc3816a081.png)

后....![选择后](../Images/ac1f6a50072c43edea1fac224c311912.png)

我的问题是：当我选择单元格时，左侧的圆形视图会闪烁。 **选择表格单元格时如何防止圆圈闪烁？我没有手动对单元格进行任何类型的重新加载。它与选择状态有关吗？** 任何帮助将不胜感激; 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:40:11.700

我假设在你的 cellForRowAtIndexPath 方法中你正在做类似的事情

```
[cell setImage:[UIImage imageNamed:@"someImage"] forState:UIControlStateNormal]; 
```

尝试为 UIControlStateHighlighted 设置图像，看看是否有帮助。即使它是相同的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:58:49.487

是的，这就是解决方案。感谢@aking63 激发了我的灵感。通过在我的自定义 UITableViewCell 类中重写 setSelected 方法，并以与设置单元格相同的方式填充指示器视图，所有事情都按需要工作。不再闪烁！

# xml - 在 Adob e Flash Builder 4.6 中为 Blackberry Playbook 编写“文件浏览器”

> ID：11439017
> 
> 赞同：0
> 
> 时间：2012-07-11T18:27:25.323
> 
> 标签：xml, adobe, blackberry-playbook

我正在创建一个应用程序，允许用户从 Playbook 上的书籍目录中导入书籍（当您将其插入计算机时）。我该如何编码？我可以在 Adob​​e Flash Builder 中使用一个类来访问文件目录吗？

如果你看这张图，

[http://cdn.crackberry.com/files/u10880/IMG_00000031.jpg](http://cdn.crackberry.com/files/u10880/IMG_00000031.jpg)

你可以看到我想做一些与此非常相似的东西，用户可以从书籍文件夹中导入所有书籍。

感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:57:26.397

您可以使用 FileFilter 类过滤您的搜索，使用 File.browseToOpen() 根据您的过滤器获取文件。

```
private  var audioFile : File = new File();
private var audioFilter:FileFilter =new FileFilter("files","*.mp3;","*.;"); 
audioFile.browseForOpen("Open", [audioFilter]);
audioFile.addEventListener(Event.SELECT, audiofileSelected);
private function audiofileSelected(event:Event):void
{
var myFile : File= File.documentsDirectory.resolvePath((event.target as File).name);
sourceAudioFile =(event.target as File);
} 
```

# c# - 动态添加的子元素绑定中断

> ID：11439020
> 
> 赞同：0
> 
> 时间：2012-07-11T18:27:34.793
> 
> 标签：c#, .net, wpf, popup, elementname

我在 WPF 中创建了一个 Popup 控件，它动态创建一个弹出窗口并将其添加到显示树中的第一个子项中。在弹出窗口的内容 (PopupContent) 中，绑定有效，但元素绑定似乎被破坏了。

我将此归咎于我创建弹出窗口的方式。有没有办法解决这个问题，以便弹出窗口内容中的元素绑定按预期工作？

```
popupContainer = new PopupContainer();
popupContainer.Content =   PopupContent;
PopupContent.Visibility = Visibility.Visible;
rootContent.Children.Add(popupContainer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:14:12.330

弹出控件有一个单独的`VisualTree`并且不是主窗口/用户控件的一部分`VisualTree`，这就是`Elementname`绑定不起作用的原因。

> Popup 控件没有自己的可视化树；而是在调用 Popup 的 MeasureOverride 方法时返回大小为 0（零）。但是，当您将 Popup 的 IsOpen 属性设置为 true 时，将创建一个具有自己的可视化树的新窗口。新窗口包含 Popup 的子内容。
> 
> [http://msdn.microsoft.com/en-us/library/ms749018.aspx#PopupandtheVisualTree](http://msdn.microsoft.com/en-us/library/ms749018.aspx#PopupandtheVisualTree)

您可以尝试的是一种通常与 ContextMenus 一起使用的解决方法，即将弹出窗口添加到与您的窗口/用户控件相同的名称范围内 -

```
popupContainer = new PopupContainer();       
popupContainer.Content =   PopupContent;       
PopupContent.Visibility = Visibility.Visible;       
rootContent.Children.Add(popupContainer);  
NameScope.SetNameScope(popupContainer, NameScope.GetNameScope(this)); //Or
// NameScope.SetNameScope(popupContainer, NameScope.GetNameScope(rootContent)); 
```

# c# - 如何反序列化这个 JSON。我应该选择什么基类？

> ID：11439028
> 
> 赞同：0
> 
> 时间：2012-07-11T18:28:07.673
> 
> 标签：c#, json

我怎么能把这个 JSON 反序列化成一个实例

`Dictionary<string, List<typeof(new {name=""; call=""})>>`

列表中的类型不必是匿名的。

```
{ "item a": [ { "name": "alpha", "call": "a" } ],
  "item b": [],
  "item c": [ 
                   { "name" : "beta" , "call" : "b" }, 
                   { "name" : "gamma",  "call" : "g" },
                   { "name" : "alpha",  "call" : "a" }
                ]
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:33:41.083

不要使用匿名类型，使用“真实”类型。JSON.NET 可以很好地反序列化它：

```
public class StackOverflow_11439028
{
    public class MyType
    {
        public string name { get; set; }
        public string call { get; set; }
    }

    const string Json = @"{ ""item a"": [ { ""name"": ""alpha"", ""call"": ""a"" } ],
                            ""item b"": [],
                            ""item c"": [ 
                                { ""name"" : ""beta"" , ""call"" : ""b"" }, 
                                { ""name"" : ""gamma"",  ""call"" : ""g"" },
                                { ""name"" : ""alpha"",  ""call"" : ""a"" }
                            ]
                        }";

    public static void Test()
    {
        JsonSerializer js = new JsonSerializer();
        Func<List<MyType>, string> listToString = l =>
            "[" + string.Join(", ", l.Select(t => string.Format("{0}-{1}", t.call, t.name))) + "]";

        using (JsonTextReader jtr = new JsonTextReader(new StringReader(Json)))
        {
            var obj = js.Deserialize<Dictionary<string, List<MyType>>>(jtr);
            Console.WriteLine(string.Join(", ", obj.Select(kvp => string.Format("{{{0}, {1}}}", kvp.Key, listToString(kvp.Value)))));
        }

        JavaScriptSerializer jss = new JavaScriptSerializer();
        var dict = jss.Deserialize<Dictionary<string, List<MyType>>>(Json);
        Console.WriteLine(string.Join(", ", dict.Select(kvp => string.Format("{{{0}, {1}}}", kvp.Key, listToString(kvp.Value)))));
    }
} 
```

# .net - 将连接字符串传递给dll？

> ID：11439029
> 
> 赞同：3
> 
> 时间：2012-07-11T18:28:07.913
> 
> 标签：.net, dll, shared-libraries, app-config

我正在尝试制作一些需要数据库访问的简单库。我没有得到的是如何将连接字符串传递给库......现在我的 dll 中有一个 db.config，但我不确定如何从 dll 等中引用它......

这就是我设置库的方式

**[解决方案文件]**

*   图书馆1
    *   db.config
*   图书馆2
    *   链接的 db.config

```
<configuration>
        <!-- Connection string -->
    </configuration> 
```

1.  如何从 dll 中引用 db.config？
2.  如何从 Web 应用程序 web.config 引用 db.config？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:43:26.970

回答你的第一个问题：

我通常更喜欢使用像这样的 ConfigurationManager 方法之一：

[http://msdn.microsoft.com/en-us/library/ms224437.aspx](http://msdn.microsoft.com/en-us/library/ms224437.aspx)

或者有带有 XPath 的旧式 Xml：

```
XmlDocument webConfig = new XmlDocument();
webConfig.Load(dllConfigFileName);
XmlNode someNode = webConfig.SelectSingleNode("//configuration/appSettings/add[@key='someKey']"); 
```

或者更新的 LINQ to XML：

```
XDocument document = XDocument.Load(configFileFullName);
XElement configurationElement = document.Element("configuration");
XElement appSettingsElement = configurationElement.Element("appSettings");
List<XElement> configSettings = new List<XElement>(appSettingsElement.Descendants("add")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:30:47.947

真的很简单：

1) 如果这恰好是一个 .Net .dll，您可以将其存储在“app.config”或“web.config”中：

[示例](http://www.dreamincode.net/forums/topic/45321-grabbing-connectionstring-from-appconfig/)：

```
<?xml version="1.0" encoding="utf-8" ?>
  <configuration>
    <connectionStrings>
      <add name="DigiBrd"
           connectionString="server=localhost;user id=****;Password=****;database=DigiBrd"
           providerName="MySql.Data.MySqlClient" />
  </connectionStrings>
</configuration>

String cnString =
  ConfigurationManager.ConnectionStrings["DigiBrd"].ConnectionString; 
```

2）您还可以将连接字符串存储在 .dll 可以读取的任何位置。例如，您可以使用 .ini 文件或注册表。

3) 你可以`getConnectionString()`在你的 .dll 中实现一个方法。

4) 等等等等等等等等。

# c# - 等待活动结束

> ID：11439034
> 
> 赞同：6
> 
> 时间：2012-07-11T18:28:14.817
> 
> 标签：c#, windows-phone-7, asynchronous, webclient

我试图将来自 webclient 的响应转换为 Json，但它试图在从服务器下载它之前创建 JSON 对象。有没有一种“好”的方式让我等待 WebOpenReadCompleted 被执行？

不得不提的是，这是一个 WP7 应用，所以一切都是异步的

```
public class Client
{

    public String _url;
    private String _response;
    private WebClient _web;

    private JObject jsonsobject;
    private Boolean blockingCall;

    private Client(String url)
    {
        _web = new WebClient();
        _url = url;
    }

    public JObject Login(String username, String password)
    {
        String uriUsername = HttpUtility.UrlEncode(username);
        String uriPassword = HttpUtility.UrlEncode(password);

        Connect(_url + "/data.php?req=Login&username=" + uriUsername + "&password=" + uriPassword + "");
        jsonsobject = new JObject(_response); 
        return jsonsobject;
    }

    public JObject GetUserInfo()
    {

        Connect(_url + "/data.php?req=GetUserInfo");
        jsonsobject = new JObject(_response); 
        return jsonsobject;
    }

    public JObject Logout()
    {

        Connect(_url + "/data.php?req=Logout");
        jsonsobject = new JObject(_response); 
        return jsonsobject;
    }

    private void Connect(String url)
    {

        _web.Headers["Accept"] = "application/json";
        _web.OpenReadCompleted += new OpenReadCompletedEventHandler(WebOpenReadCompleted);
        _web.OpenReadAsync(new Uri(url));
    }

    private void WebOpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        if (e.Error != null || e.Cancelled)
        {
            MessageBox.Show("Error:" + e.Error.Message);
            _response = "";
        } 
        else
        {
            using (var reader = new StreamReader(e.Result))
            {
                _response = reader.ReadToEnd();
            }    
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:41:09.913

我看到您正在使用 OpenReadAsync()。这是一种异步方法，这意味着调用线程在处理程序执行时不会挂起。

这意味着您的赋值操作设置 jsonsobject 在 WebOpenReadCompleted() 仍在执行时发生。

我想说你最好的选择是在你的 Connect(string url) 方法中用 OpenRead(new Uri(url)) 替换 OpenReadAsync(new Uri(url)) 。

OpenRead() 是一个同步操作，因此调用方法将等到 WebOpenReadCompleted() 方法完成后，才会在 Connect() 方法中进行分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:39:27.977

您可以使用`EventWaitHandle`来很好地阻塞，直到异步读取完成。我对使用`WebClient`. 我的解决方案是子类化`WebClient`. 完整来源如下。具体来说，`DownloadFileWithEvents`在异步下载完成之前很好地阻塞。

为您的目的修改类应该非常简单。

```
public class MyWebClient : WebClient, IDisposable
{
    public int Timeout { get; set; }
    public int TimeUntilFirstByte { get; set; }
    public int TimeBetweenProgressChanges { get; set; }

    public long PreviousBytesReceived { get; private set; }
    public long BytesNotNotified { get; private set; }

    public string Error { get; private set; }
    public bool HasError { get { return Error != null; } }

    private bool firstByteReceived = false;
    private bool success = true;
    private bool cancelDueToError = false;

    private EventWaitHandle asyncWait = new ManualResetEvent(false);
    private Timer abortTimer = null;

    const long ONE_MB = 1024 * 1024;

    public delegate void PerMbHandler(long totalMb);

    public event PerMbHandler NotifyMegabyteIncrement;

    public MyWebClient(int timeout = 60000, int timeUntilFirstByte = 30000, int timeBetweenProgressChanges = 15000)
    {
        this.Timeout = timeout;
        this.TimeUntilFirstByte = timeUntilFirstByte;
        this.TimeBetweenProgressChanges = timeBetweenProgressChanges;

        this.DownloadFileCompleted += new System.ComponentModel.AsyncCompletedEventHandler(MyWebClient_DownloadFileCompleted);
        this.DownloadProgressChanged += new DownloadProgressChangedEventHandler(MyWebClient_DownloadProgressChanged);

        abortTimer = new Timer(AbortDownload, null, TimeUntilFirstByte, System.Threading.Timeout.Infinite);
    }

    protected void OnNotifyMegabyteIncrement(long totalMb)
    {
        if (NotifyMegabyteIncrement != null) NotifyMegabyteIncrement(totalMb);
    }

    void AbortDownload(object state)
    {
        cancelDueToError = true;
        this.CancelAsync();
        success = false;
        Error = firstByteReceived ? "Download aborted due to >" + TimeBetweenProgressChanges + "ms between progress change updates." : "No data was received in " + TimeUntilFirstByte + "ms";
        asyncWait.Set();
    }

    void MyWebClient_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        if (cancelDueToError) return;

        long additionalBytesReceived = e.BytesReceived - PreviousBytesReceived;
        PreviousBytesReceived = e.BytesReceived;
        BytesNotNotified += additionalBytesReceived;

        if (BytesNotNotified > ONE_MB)
        {
            OnNotifyMegabyteIncrement(e.BytesReceived);
            BytesNotNotified = 0;
        }
        firstByteReceived = true;
        abortTimer.Change(TimeBetweenProgressChanges, System.Threading.Timeout.Infinite);
    }

    public bool DownloadFileWithEvents(string url, string outputPath)
    {
        asyncWait.Reset();
        Uri uri = new Uri(url);
        this.DownloadFileAsync(uri, outputPath);
        asyncWait.WaitOne();

        return success;
    }

    void MyWebClient_DownloadFileCompleted(object sender, System.ComponentModel.AsyncCompletedEventArgs e)
    {
        if (cancelDueToError) return;
        asyncWait.Set();
    }

    protected override WebRequest GetWebRequest(Uri address)
    {            
        var result = base.GetWebRequest(address);
        result.Timeout = this.Timeout;
        return result;
    }

    void IDisposable.Dispose()
    {
        if (asyncWait != null) asyncWait.Dispose();
        if (abortTimer != null) abortTimer.Dispose();

        base.Dispose();
    }
} 
```

# c# - 如何用括号替换 c# 中的特定单词？

> ID：11439039
> 
> 赞同：1
> 
> 时间：2012-07-11T18:28:29.427
> 
> 标签：c#, regex, string, replace

考虑以下字符串：

```
string s = "The man is (old)."; 
```

如果我使用：

```
Regex.Replace(s,@"\b\(old\)\b", @"<b>$&</b>"); 
```

输出是：
这个人是（老）。
但我会像这样改变整个（旧）词：
这个人是**（旧）**。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T18:32:40.840

`\b`不会匹配，因为`(`and`)`不是单词字符。你把它们放在那里有什么原因吗，因为你可以把它们排除在外：

```
 string replaced = Regex.Replace(s,@"\(old\)", @"<b>$&</b>"); 
```

根据[规格](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)：

`\b`: 匹配必须出现在 \w（字母数字）和 \W（非字母数字）字符之间的边界上。

`-space-`并且`)`都是非字母数字。`(`和相同`.`，因此`\b`在这两种情况下都不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:55:05.333

您甚至可能不需要正则表达式...尝试

```
string result = s.Replace("(old)", "<b>(old)</b>"); 
```

或者

```
string result = s.Replace("(", "<b>(").Replace(")", ")</b>"); 
```

# php - 上传时获取 php 数组中的所有文件名

> ID：11439040
> 
> 赞同：0
> 
> 时间：2012-07-11T18:28:29.570
> 
> 标签：php, mysql

我想知道的是，当我通过上传按钮选择目录时，如何获取目录中所有文件名的列表[特别是数组]，之后我将该文件数组上传到数据库。作为一个文件作为一个条目。那么我该怎么做呢？不要忘记我只需要文件名，我只需要上传这些名称而不是实际文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:37:22.077

```
 <?
    if (isset($_POST[submit])) {
    $uploadArray= array();
    $uploadArray[] = $_POST['uploadedfile'];
    $uploadArray[] = $_POST['uploadedfile2'];
    $uploadArray[] = $_POST['uploadedfile3'];
    foreach($uploadArray as $file) {
    $target_path = "upload/";
    $target_path = $target_path . basename( $_FILES['$file']['name']);
    if(move_uploaded_file($_FILES['$file']['tmp_name'], $target_path)) {
    echo "The file ". basename( $_FILES['$file']['name']).
    " has been uploaded";
    } else{
    echo "There was an error uploading the file, please try again!";
    }
    }
    }
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>Untitled Document</title>
    </head>
    <body>
    <form enctype="multipart/form-data" action="upload-simple.php" method="POST">
    <p>
    <input type="hidden" name="MAX_FILE_SIZE" value="100000" />
    Choose a file to upload:
    <input name="uploadedfile" type="file" />
    </p>
    <p>Choose a file to upload:
    <input name="uploadedfile2" type="file" />
    </p>
    <p>Choose a file to upload:
    <input name="uploadedfile3" type="file" />
    <input name="submit" type="submit" id="submit" value="submit" />
    </p>
    </form>
    </body>
    </html> 
```

这可能会解决您的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:34:02.770

是服务器上的文件吗？如果您希望有一个按钮，请单击浏览器并在最终用户上打开一个文件夹，这将不起作用。大多数浏览器只允许选择单个文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:32:08.070

如果您使用 ftp，此函数将返回数组中目录的所有文件名。

```
function ftp_searchdir($conn_id, $dir) {
    if(!@ftp_is_dir($conn_id, $dir)) {
        die('No such directory on the ftp-server');
    }
    if(strrchr($dir, '/') != '/') {
        $dir = $dir.'/';
    }

    $dirlist[0] = $dir;
    $list = ftp_nlist($conn_id, $dir);
    foreach($list as $path) {
        $path = './'.$path;
        if($path != $dir.'.' && $path != $dir.'..') {
            if(ftp_is_dir($conn_id, $path)) {
                $temp = ftp_searchdir($conn_id, ($path), 1);
                $dirlist = array_merge($dirlist, $temp);
            }
            else {
                $dirlist[] = $path;
            }
        }

    }

    ftp_chdir($conn_id, '/../');

    return $dirlist;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T18:30:37.147

如果服务器上已经存在文件，您可以使用`glob`

```
$files = glob('*.ext'); // or *.* for all files
foreach($files AS $file){
    // $file is the name of the file
} 
```

# jquery - 将用户输入返回并重新渲染模型

> ID：11439042
> 
> 赞同：0
> 
> 时间：2012-07-11T18:28:37.103
> 
> 标签：jquery, ruby-on-rails, ruby, highcharts

我的视图中有一个 jquery 日期选择器，它将`:start_date`and发送`:end_date`到我的模型中，它成功地在我的模型中创建了一个`queries`具有属性`start_date`和`end_date`.

在我的控制器中，我在 mySQL 查询中有一行接受字符串变量`query.start_date`和`query.end_date`. 如果我用单独的日期手动定义 start_date 和 end_date 方法，那些成功地从模型中提取出来。

在我的控制器中，我还必须`query = Query.new`实例化一个类。

最后，这是我的模型中的代码，我的主页在成功输入日期范围时重新加载（然后应该生成具有所述日期范围的图表）：

```
class Query < ActiveRecord::Base
  attr_accessible :name, :created_at, :start_date, :end_date

  validates_presence_of :start_date, :end_date

  def start_date
    start_date = Query.last.start_date
  end

  def end_date
    end_date = Query.last.end_date
  end 
```

`undefined method`目前，对于 ActiveRecord::AttributeMethods::Query:Module` ，我最后遇到一个错误

我对如何获取最后一个条目并让我的页面重新加载以显示这些日期值有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:33:49.607

尝试`Query.all.last.end_date`或`Query.find(:all).last.end_date`

**编辑**

> 查询可能是一个保留字。它没有在[保留字](http://wiki.rubyonrails.org/rails/pages/ReservedWords)的官方列表中列出，但 rails 正在寻找一个冲突的文件。只需更改模型名称作为解决方法。
> 
> [https://stackoverflow.com/a/4331159/643500](https://stackoverflow.com/a/4331159/643500)

# android - 仅当音频高于特定声级时如何录制音频？

> ID：11439046
> 
> 赞同：4
> 
> 时间：2012-07-11T18:28:59.663
> 
> 标签：android, audio-recording

我试图做一个语音捕捉应用程序，只在有噪音时捕捉。所以我使用了 Media Recorder 类的 getMaxAmplitude() 方法。这是我的想法和工作：我启动了一项**服务**，该服务使用 MediaRecorder 对象记录来自模拟器麦克风的声音，然后我运行一个线程来检查该对象的 getMaxAmplitude() 值，如果它超过特定级别，我使用 MediaRecorder 中的新对象开始另一个录制一段时间，然后保存它。如果在启动我的应用程序的服务后有例如“3 个噪音”，它应该保存 4 个音频文件，包括用于监控幅度级别的主要文件。

但我注意到一个问题，即 android 的麦克风一次只允许 1 个媒体记录器。那么还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:01:24.647

您可能会记下噪音开始和结束的时间戳，然后稍后从音频文件中提取所需的部分。

当然，这可能不完全符合你想要做的事情......在这一点上很难说。

# api - REST API - Put 方法最佳实践

> ID：11439058
> 
> 赞同：1
> 
> 时间：2012-07-11T18:29:38.770
> 
> 标签：api, language-agnostic, asp.net-web-api

我正在使用 ASP.NET MVC Web API 堆栈设计一个宁静的 API。我允许用户使用相关的 HTTP 动词创建/更新/删除记录。我接受 XML 和 JSON 内容类型。我目前正在我的第一个端点上设计 put (update) 方法并遇到了一个问题：

我想知道通过 API 更新时空/空字段的最佳实践是什么。一个空/空字段是否应该表明消费者忽略了该字段并且不希望它更新，或者该字段之前可能有也可能没有值，现在不应该有一个值？

具体来说，当一个字段有数据并且使用空/空数据发送更新时，该字段应该是 a) 忽略 b) 在 DB 中更新并为空

我认为这是经常出现的问题，但我无法找到任何实质性信息（主要是由于缺乏适当的搜索词）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:49:36.720

`PATCH`已创建动词以进行部分更新。

我将`PUT`用于完整更新和`PATCH`部分更新。如果我没记错的话，对 PATCH 的支持是在 ASP.NET Web API RC 中。

# drop-down-menu - Google Apps 脚本列表框到下拉框

> ID：11439059
> 
> 赞同：2
> 
> 时间：2012-07-11T18:29:49.050
> 
> 标签：drop-down-menu, listbox, google-apps-script

我正在使用 Apps 脚本在 Google 协作平台中构建 UI，并且能够创建一个列表框。根据文档，如果您将 setVisibleItemCount 更改为 1，它将成为一个下拉框。

1和0我都试过了。

似乎两者都没有使它成为一个下拉框。使用 Firefox 13.0.1 查看。也试过Safari。

有人对此有任何运气吗？

代码如下所示：

```
var vPanel = container.createVerticalPanel();
    //List box
    var lb = container.createListBox(true).setId('listbox').setName('listbox');

   // add items to ListBox
   for(var i=0;i<LIST_OF_PROJECTS.length;i++){
       lb.addItem(LIST_OF_PROJECTS[i]);
   }

   vPanel.add(lb);
   lb.setVisibleItemCount(1);  //supposed to make it a drop-down but doesn't

   lb.setSelectedIndex(0); 
```

这一切都在 Google 站点内，并且正在显示的页面是 Apps 脚本页面。也许您没有使用 Google 协作平台？上面的代码给了我一行但没有下拉箭头。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:48:51.077

您能否发布您的相关代码？，它在 Firefox（略有不同）、chrome 和 safari 上为我工作。（单击选择器时请查看屏幕截图，SetVisibleItemCount 为 1）

谢谢

![在此处输入图像描述](../Images/97543e52964f349842fa5625b358a8a0.png)

**编辑**：重要的一点：要使列表充当下拉列表，您必须选择“禁用多项选择”，换句话说：createListBox(false) 或无参数...但不是“true” **，因为它在您的代码中**！！*（现在我们知道为什么它在您的情况下不起作用;-)*

将此参数设置为 false ，它可以在独立的 web 应用程序中按预期工作，嵌入站点并链接到电子表格，没有任何区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:29:01.443

不要打电话：

```
setVisibleItemCount 
```

一点也不。

# c++ - 我们可以通过初始化列表中的智能指针来初始化结构成员吗？

> ID：11439064
> 
> 赞同：0
> 
> 时间：2012-07-11T18:29:58.967
> 
> 标签：c++

```
#include <boost/scoped_ptr.hpp>

class classA
{
protected:
    struct StructB
    {
        int iAge;
        double dPrice;
    };

    boost::scoped_ptr<StructB> m_scpStructB;

public:
    classA(int age, double price)
        : m_scpStructB(new StructB)
    {
        m_scpStructB->iAge = age;
        m_scpStructB->dPrice = price;
    }

    /* DO NOT COMPILE  <= second block
    classA(int age, double price)
        : m_scpStructB(new StructB),
          m_scpStructB->iAge(age),
          m_scpStructB->dPrice(price)
    {}
    */

}; 
```

Question1> 我发现我无法使用第二个代码块来初始化智能指针指向的结构成员。这是我们无法做到的一般c ++规则吗？

如果第一个问题的答案是“你做不到”，请放弃这个问题。

Question2> 据我所知，初始化列表的赋值顺序是基于成员变量定义的顺序。假设可以通过智能指针初始化成员变量。您如何保证顺序以便始终首先初始化智能点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:32:15.783

如果您*不需要* `StructB`成为聚合/POD 类型，那么也只需给它一个构造函数：

```
#include <boost/scoped_ptr.hpp>

class classA
{
protected:
    struct StructB
    {
        StructB(int age, double price) : iAge(age), dPrice(price) { }

        int iAge;
        double dPrice;
    };

    boost::scoped_ptr<StructB> m_scpStructB;

public:
    classA(int age, double price) : m_scpStructB(new StructB(age, price)) { }
}; 
```

否则，您可以只使用工厂函数，使其保持 POD 类型：

```
#include <boost/scoped_ptr.hpp>

class classA
{
protected:
    struct StructB
    {
        int iAge;
        double dPrice;

        static StructB* make(int age, double price)
        {
            StructB* ret = new StructB;
            ret->iAge = age;
            ret->dPrice = price;
            return ret;
        }
    };

    boost::scoped_ptr<StructB> m_scpStructB;

public:
    classA(int age, double price) : m_scpStructB(StructB::make(age, price)) { }
}; 
```

# php - 如何随机生成除法 a/b=c 的元素，其中 c 只有一位小数？

> ID：11439065
> 
> 赞同：5
> 
> 时间：2012-07-11T18:29:59.687
> 
> 标签：php, javascript, math

这更像是一个基本的数学/编程问题。我需要生成一个除法a/b=c。我会给用户 a 和 b，他必须回答 c，但 c 只能有一位小数。例如，c=5.2 可以，但 5.23 要求太高，因为用户是孩子。所以我需要一种算法，它可以从所有可能的组合中随机生成这种除法，其中 a 必须小于 x，b 必须小于 y，c 只能有一位小数。此外，a 和 b 必须是整数。

我正在寻找一种比尝试数字并检查它们直到产生正确的组合更优雅的解决方案。另外，这是针对网络内容的，所以我更喜欢用 javascript 来做，但如果需要，也可以用 php 来做。¿ 有人知道我该怎么做吗？我数学没那么好。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:46:04.487

尝试生`C`成为`int/10`.
然后生成`B`：

*   只是 int 如果`(10 * C) % 10 == 0`
*   `int * 2`如果`(10 * C) % 5 == 0`
*   `int * 5`如果`(10 * C) % 2 == 0`
*   `int * 10`别的

然后`A = B * C`它是 int

伪代码：

```
tenC = rnd();
if(tenC % 10 == 0) B = rnd();
elseif(tenC % 5 == 0) B = rnd() * 2;
elseif(tenC % 2 == 0) B = rnd() * 5;
else B = rnd() * 10;
C = tenC / 10.0;
A = tenC * B / 10; 
```

其中 rnd() 生成你喜欢的整数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T19:21:51.673

基本上，我们创建一个包含所有 A * 10 素因子的列表，然后选择因子的随机组合来创建 B。

```
 int[] primes = new int[] { 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997 };
        List<int> factors = new List<int>();
        int x = 1000;
        int y = 650;
        Random rand = new Random();
        int a = rand.Next(x);
        int _a = a * 10;
        int currentPrime = 0;

        //find all factors of a * 10
        while (_a > 1)
        {
            while (_a % primes[currentPrime] == 0)
            {
                factors.Add(primes[currentPrime]);
                _a /= primes[currentPrime];
            }
            currentPrime++;
        }

        int b = 1;
        foreach(int factor in factors)
        {
            if (b * factor > y) break;
            if (rand.Next(2) == 0)
            {
                b *= factor;
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T20:06:38.677

```
// Declare variables
var a, b, c, f = 1,
    highestCommonFactor = function(x, y) {
        var i;
        for (i = Math.min(x, y); i > 1; i--) {
            if (x / i == Math.round(x / i) && y / i == Math.round(y / i)) {
                return i;
            }
        }
        return false;
    };

// Pick two random numbers, b and c
// b should be a fairly small integer, i'll choose 5 as an upper limit
// c should be larger than 10 and not end with a 0
b = Math.floor((Math.random() * 5) + 1);
do {
    c = Math.floor(Math.random() * 100);
} while (c.toString().slice(-1) == "0");

// Multiply b by 10
b *= 10;

// Get a value for a
a = (c * b) / 10;

// Divide c by 10
c /= 10;

// Optional - Cancel a and b down to lowest possible integers
/*
while (f !== false) {
    a /= f;
    b /= f;
    f = highestCommonFactor(a, b);
}
//*/ 
```

没有什么比一个好的数学挑战更能让你保持清醒了。这段代码倾向于产生`a`其中`b`一个是 10 的倍数，即使您取消注释*Optional - Cancel down to minimum possible integers*部分（`b`如果您不这样做，将始终是 10 的倍数）。但是我认为这是您正在做的事情的本质，因为为了`c`在小数点后有 1 个非零数字，它必须可以表示为`int / 10`.

[小提琴](http://jsfiddle.net/ukq5r/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T18:41:12.627

```
function findEquation($maxA, $maxB){
    $x = 2;
    $e = NULL;

    do {
        $a = rand(1, $maxA);
        $b = rand(1, $maxB);
        $e = "$a / $b";
        $y = explode(".", $a/$b);
        if(count($y) > 1){
            $x = strlen($y[1]);
        }else {
            $x = 0;
        }
    } while($x > 1);

    return $e;
}

echo findEquation(100,100); 
```

更好的是，这将找到第一个十进制值长度 < 2 的方程。

JavaScript 解决方案：

```
function findEquation(maxA, maxB){
    var x = 2;
    var e = '';
    var a,b,c,d;

    do {
        a = Math.floor(Math.random() * maxA+1);
        b = Math.floor(Math.random() * maxB+1);
        e = a + '/' + b;
        c = (a/b).toString().split(".");
        if(c.length > 1){
            x = c[1].length;
        }else {
            x = 0;
        }
    } while( x > 1 );

    return e;
}

alert(findEquation(100,100)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T18:48:35.720

[http://jsfiddle.net/eX7fM/2/](http://jsfiddle.net/eX7fM/2/)

```
var upper = getRandomInt(2, 100);

var lower;
var answer = 0.99; // sentinel

while (!numberHasOneOrNoDecimals(answer)) {
    lower = getRandomInt(1, upper);
    answer = upper / lower;
} 
```

这仍然涉及一些循环，但它比纯粹的蛮力更优雅一点，并且比非循环方法更容易理解（质数分解和所有爵士乐都超出了我的数学技能）。

# web - Web 开发 - 删除用户数据？

> ID：11439066
> 
> 赞同：0
> 
> 时间：2012-07-11T18:30:02.003
> 
> 标签：web, filesystems

我已经完成了我的第一个复杂的 Web 应用程序，我发现在 db 中使用“isDeleted”标志可能比硬删除记录更好。但我想知道对于存储在文件系统（例如照片）上的数据的推荐方法是什么。当他们的相关实体被（软）删除时，我应该删除它们还是保持原样？垃圾堆积会导致实际存储空间耗尽吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:34:13.660

绝对可以——您需要收集一些关于典型帐户生成多少数据的统计数据，然后计算出您看到的删除次数，以理清会堆积多少垃圾数据和/或何时填写增加您的存储空间。

您可能还想尝试使用[S3](http://aws.amazon.com/s3/)之类的东西来存储您的数据 - 那时，您需要删除内容的唯一原因是因为存储它的成本太高。

# xslt - XSLT 以非常松散的标准 (EAD) 处理 XML

> ID：11439072
> 
> 赞同：1
> 
> 时间：2012-07-11T18:30:18.920
> 
> 标签：xslt, xml-parsing, standards

我已经花了一周的时间尝试编写可以处理符合（非常宽松的）[EAD 标准](http://www.loc.gov/ead/index.html)的 XML 文档的 XSLT 代码。

EAD 文档中的有用信息很难准确定位。不同的 EAD 文档可以将*相同*的信息位放置在数据树的完全不同的部分。此外，在单个 EAD 文档中，相同的标签可以在不同的位置多次用于*不同*的信息。有关此示例，请参阅此[SO 帖子](https://stackoverflow.com/questions/11233708/exclude-certain-child-nodes-when-data-structure-is-unknown)。这使得很难设计一个能够正确处理这些不同文件的 XSLT 文件。

一般而言，问题可以描述为：

*   如何选择位于未知位置的特定 EAD 节点，
*   不会意外选择具有相同的不需要的节点`name()`？

我终于把我需要的 XSLT 放在一起，并认为最好在此处删除代码的通用版本，以便其他人可以从中受益或改进它。

我很想用“EAD”标签来标记这个问题，但我没有足够的代表。如果有适当数量的代表认为它有用，请这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:30:19.747

首先是解决方案的快速描述，然后是代码。

1.  检查此 EAD 文档是否包含组件（子）记录（用 指定`<cXX>`）。如果没有，我们不必担心重复的 EAD 标签。标签仍然可以隐藏在任意包装器下。要找到它们，请参见步骤 3。
2.  `<dsc>`如果存在子记录，请注意在处理其他标签之前不要处理该标签。要查找其他标签，请参阅第 3 步，然后第 4 步处理子记录。
3.  使用与它们匹配的模板递归遍历各种包装器，并调用`apply-template`树下更远的任何元素节点。
4.  我们现在正在处理一个子记录。通过重复第 2 步（在处理此子记录的子记录之前仔细处理所有其他标签），然后第 4 步来执行此操作。

这是我想出的（通用版本的）XSLT 代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" encoding="ISO-8859-1" indent="yes"/>

<xsl:template match="/ead">
<records>
    <xsl:if test="//dsc">
        <!-- if there are <cXX> nodes, we'll handle the main record differently.
             <cXX> nodes are always found in the 'dsc' node, which contains nothing else -->
        <xsl:call-template name="carefully_process"/>
    </xsl:if>
    <xsl:if test="not(//dsc)">
        <record>
            <!-- Just process the existing nodes -->
            <xsl:apply-templates select="*"/>
        </record>
    </xsl:if>
</records>
</xsl:template>

<xsl:template name="carefully_process">
    <!-- first we'll process all the nodes for the main
         record. Then we'll call the child records -->
    <record>
        <!-- have to be careful not to process //archdesc/dsc yet -->
        <xsl:apply-templates select="*[not(self::archdesc)]"/>
        <xsl:apply-templates select="archdesc/*[not(self::dsc)]"/>

    <!-- Now we can close off the master record, -->
    </record>
    <!-- and process the child records -->
    <xsl:apply-templates select="/ead/archdesc/dsc"/>
</xsl:template>

<xsl:template match="dsc">
    <!-- Start processing the child records (we use for-each to get a good position() -->
    <xsl:for-each select="*[starts-with(name(),'c0') or starts-with(name(),'c1') or name() = 'c']">
        <xsl:apply-templates select=".">
            <!-- we pass the unittitle and unitid of the master record, so that child
                 records can be linked to it. We pass the position of the child so that
                 a unitid can be created if it doesn't exist -->
            <xsl:with-param name="partitle" select="normalize-space(/ead/archdesc/did/unittitle)"/>
            <xsl:with-param name="parid" select="normalize-space(/ead/archdesc/did/unitid)"/>
            <xsl:with-param name="pos" select="position()"/>
        </xsl:apply-templates>
    </xsl:for-each>
</xsl:template>

<!-- process child nodes -->
<xsl:template match="*[starts-with(name(),'c0') or starts-with(name(),'c1') or name() = 'c']" >
<xsl:param name="partitle"/>
<xsl:param name="parid"/>
<xsl:param name="pos"/>
    <!-- start this child record -->
    <record>

        <!-- EAD does not require a unitid, but my code does.
             If it doesn't exist, create it -->
        <xsl:if test="not(./did/unitid)">
            <atom name="unitid">
                <xsl:value-of select="$parid"/><xsl:text>-</xsl:text><xsl:value-of select="$pos"/>
            </atom>
        </xsl:if>

        <!-- get the level of this component -->
        <atom name="eadlevel">
            <xsl:value-of select="concat(translate(substring(@level,1,1),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),substring(@level,2))"/>
        </atom>

        <!-- Do *something* to attach this record to it's parent.
             Probably involves $partitle and $parid. For example: -->
        <ref>
            <atom name="unittitle"><xsl:value-of select="$partitle"/></atom>
            <atom name="unitid"><xsl:value-of select="$parid"/></atom>
        </ref>

        <!-- now process all the other nodes -->
        <xsl:apply-templates select="*[not(starts-with(name(),'c0') or starts-with(name(),'c1') or name() = 'c')]"/>

    <!-- finish this child record -->
    </record>

    <!-- prep the variables we'll need for attaching any child records (<cXX+1>) to this record -->
    <xsl:variable name="this_title">
        <xsl:value-of select="normalize-space(./did/unittitle)"/>
    </xsl:variable> 
    <xsl:variable name="this_id">
        <xsl:if test="./did/unitid">
            <xsl:value-of select="./did/unitid"/>
        </xsl:if>
        <xsl:if test="not(./did/unitid)">
            <xsl:value-of select="$parid"/><xsl:text>-</xsl:text><xsl:value-of select="$pos"/>
        </xsl:if>
    </xsl:variable>

    <!-- now process the children of this node -->
    <xsl:for-each select="*[starts-with(name(),'c0') or starts-with(name(),'c1') or name() = 'c']">
        <xsl:apply-templates select=".">
            <xsl:with-param name="partitle" select="$this_title"/>
            <xsl:with-param name="parid" select="$this_id"/>
            <xsl:with-param name="pos" select="position()"/>
        </xsl:apply-templates>
    </xsl:for-each>
</xsl:template>

<!-- these are usually just wrappers. Go one level deeper -->
<xsl:template match="descgrp|eadheader|revisiondesc|filedesc|titlestmt|profiledesc|archdesc|archdescgrp|daogrp|langusage|did|frontmatter">
    <xsl:apply-templates select="*"/>
</xsl:template>

<!-- below this point, add templates for processing specific EAD units
     of information. For example, the template might look like

<xsl:template match="titleproper">
    <atom name="titleproper">
        <xsl:value-of select="normalize-space(.)"/>
    </atom>
</xsl:template>
-->

<!-- instead of having a template for each EAD information unit, consider
     a generic template that handles them all the same way. For example:
-->
<xsl:template match="*">
    <atom>
        <xsl:attribute name="name"><xsl:value-of select="name()"/></xsl:attribute>
        <xsl:value-of select="normalize-space(.)"/>
    </atom>
</xsl:template>

</xsl:stylesheet> 
```

# android - 从 Google Play 中删除 APK 发布包名称？

> ID：11439073
> 
> 赞同：0
> 
> 时间：2012-07-11T18:30:19.037
> 
> 标签：android, google-play

我的问题很简单，如果我删除一个应用程序（通过删除它的所有 APK 文件），软件包名称是否会被发布以供其他开发人员使用？

实际上我希望它会，因为我们上传了一个包来测试应用内购买，现在是时候在另一个帐户中上传最终版本了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:06:59.620

实际上，如果前一个被删除，则可以在另一个帐户中上传具有相同名称的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:29:03.347

实际上，您不能删除曾经发布过的软件包。您只能取消发布它们。此外，如果已上传具有给定包名称的应用程序，则会保留该应用程序。同一个账号或其他账号都不能上传同包名的应用。时期。

# php - 如何使用 AJAX 检索 PHP 数据？

> ID：11439076
> 
> 赞同：-2
> 
> 时间：2012-07-11T18:30:26.190
> 
> 标签：php, javascript, jquery, ajax

嗨，我是 AJAX 的新手，并且已经避免它很长一段时间了。我目前正在使用 jQuery 插件，我需要使用 AJAX 来传达要使用的数据（来自 PHP）。

这是我正在使用的 jQuery 代码：

```
$("#fancybox-manual-c").click(function () {
    $.fancybox.open([{
        href: '1_b.jpg',
        title: 'My title'
    }, {
        href: '2_b.jpg',
        title: '2nd title'
    }, {
        href: '3_b.jpg'
    }], {
        helpers: {
            thumbs: {
                width: 75,
                height: 50
            }
        }
    });
}); 
```

如何使用 AJAX 检索 PHP 数据以输入 href 和标题。任何信息或教程将不胜感激！

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:39:27.373

文档`ajax()`演示了几个示例，这是另一个基本示例：

*javascript*

```
$.ajax({
  type: "POST",
  url: "some.php",
  dataType:'json',
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  if (msg.err == true) {
     alert('Error: '+msg.msg);
     return;
  }
  alert("A winner is: '+msg.name);
}); 
```

*php*

```
 <?php

        $response = array(
            'err'=>false,
            'msg'=>''
        );
        $name = isset($_POST['name']) ? $_POST['name'] : false;
        $location= isset($_POST['location']) ? $_POST['location'] : false;

        if (!$name) {
            $response['err'] = true;
            $response['msg'] = 'Invalid name';
            die(json_encode($response));
        }

        $response['name'] = $name;
        if ($location)
            $response['name'] .= ' from '.$location;
        die(json_encode($response));
 ?> 
```

正如您所注意到的，大多数开发人员都鼓励彼此先检查文档，事实上，谷歌查询“ajax 教程”会非常有成果！:)

**文档**

*   `jQuery.ajax()`- [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
*   PHP `json_encode`- [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)
*   更多 ajax 教程 - [http://www.tizag.com/ajaxTutorial/](http://www.tizag.com/ajaxTutorial/)
*   AJAX 解释 - [http://www.zdnet.com/blog/service-oriented/ajax-explained/8473](http://www.zdnet.com/blog/service-oriented/ajax-explained/8473)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:55:56.653

我昨天和你的情况完全一样。网上有很多很好的 Ajax 教程，但似乎没有一个给出最基本的示例。这是我要学习的内容。

确保 jquery.js 与此 html 文件位于同一文件夹中。我命名了我的 test.php。

该文件对文件 script.php 进行了非常简单的 POST ajax 调用，它还发送了一个名为 testCheck 的变量，其值为 true。返回数据后，回调函数运行，该函数使用 AJAX 给出的响应填充名为#test 的 DIV。

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<style>
#test {
 width: 200px;
 height: 200px;
 background: gray;
}
</style>
</head>

<script type="text/javascript">
$(document).ready(function() {
$("#test").click(function() {
    $.post("script.php", {testCheck: true}, function(data) {
      $('#test').html(data);
    });     
});   
});
</script>

<body>
  <div id="test">TEST DIV</div>
</body>
</html> 
```

这是具有 php 逻辑的 script.php 文件。如果将这两个文件与 jquery.js 文件一起放入同一个目录并在 Apache 服务器上运行它应该可以正常工作。

```
<?php

$testCheck = $_POST['testCheck'];

if($testCheck)
{
    echo "It is true!";
}
else
{
    echo "It is false!";
}

?> 
```

# python - python - 如何在pymongo中的属性样式访问时严格检查集合是否存在？

> ID：11439079
> 
> 赞同：1
> 
> 时间：2012-07-11T18:30:32.460
> 
> 标签：python, mongodb, pymongo

如果集合名称中有拼写错误，则访问集合`db.mycollection.find()`可能会*静默失败*`db.mycollections.find()`，例如.

如果集合不存在，是否可以将 pymongo 配置为引发异常？

错误是好的！

# php - Symfony2：页面事件监听器

> ID：11439089
> 
> 赞同：1
> 
> 时间：2012-07-11T18:30:54.850
> 
> 标签：php, symfony

我需要实现一个事件监听器来验证用户是否有权访问客户的项目。

我的路线如下所示：

```
/client_a/dashboard/
/client_b/dashboard/ 
```

用户可能只有访问“客户端 A”的权限，因此如果不允许他/她查看该项目，我需要验证并重定向用户。

页面事件监听器是最好的方法吗？如果是这样，我会听什么活动？

或者，如果有更好的方法来处理这种情况，那会是什么样子？

谢谢，

JB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:05:22.553

使用 Symfony2 提供的本机 ACL 功能有一个*更好*的方法来做到这一点。 [这个“书”条目将非常清楚地解释它。](http://symfony.com/doc/current/cookbook/security/acl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:19:53.080

假设`/client_X/dashboard/`不是您想要保护的*唯一路线，您可以侦听*`kernel.request` [event](http://symfony.com/doc/current/book/internals.html#kernel-request-event)。

您的侦听器可能需要将安全上下文服务注入其中，以便您可以访问用户的信息。然后，您只需检查用户是否有权访问某个客户端并做出相应反应。

# ios - uilabel 在对其应用旋转时消失

> ID：11439099
> 
> 赞同：0
> 
> 时间：2012-07-11T18:31:53.960
> 
> 标签：ios, iphone, objective-c, cgaffinetransform

我所拥有的是

```
 UIView
     1.Image1
     2.Image2
     3.UILabel 
```

像下面的图片

![在此处输入图像描述](../Images/d7e5032dce734ea651c5062a541a8866.png)

然后我通过做

```
- (void)viewDidLoad    
    {
        testLabel.transform     =   CGAffineTransformMakeRotation(M_PI*0.25);
        [super viewDidLoad];
    } 
```

当我运行应用程序时，uilabe 毕竟消失了。看第二张图片供您参考

![在此处输入图像描述](../Images/cd4bf5823a15c27488a7cd292393d0c1.png)

请指出我在这里做错了什么......以及如何完成工作

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:25:28.617

注意，因为自动布局会导致很多问题。

尝试取消选择“使用自动布局”

它解决了我试图翻译对象的所有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:17:17.667

尝试将 PI 乘以一个较小的值，看看它是在旋转还是正在消失。如果我没记错的话，旋转不是基于中心，而是基于左上角，所以你必须事后翻译！

例如，要旋转视频剪辑，我必须这样做：

```
CGAffineTransform rotation = CGAffineTransformMakeRotation(M_PI);
CGAffineTransform translateToCenter = CGAffineTransformMakeTranslation(640, 480);
CGAffineTransform mixedTransform = CGAffineTransformConcat(rotation, translateToCenter);
[firstTrackInstruction setTransform:mixedTransform atTime:kCMTimeZero]; 
```

我先旋转了 PI（180 度），但是因为旋转中心是左上角，所以我的视频剪辑现在在相反的象限，需要转换回来！这可能是您的标签正在发生的事情。

所以试试这个，假设你的标签是 42x21 尺寸..

```
CGAffineTransform rotation = CGAffineTransformMakeRotation(M_PI);
CGAffineTransform translateToCenter = CGAffineTransformMakeTranslation(42, 21);
CGAffineTransform mixedTransform = CGAffineTransformConcat(rotation, translateToCenter);
label.transform = mixedTransform; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:00:53.983

尝试将 [super viewDidLoad] 放在首位：

```
- (void)viewDidLoad    
{
[super viewDidLoad];        
testLabel.transform     =   CGAffineTransformMakeRotation(M_PI*0.25);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-15T14:13:56.863

当您应用变换时，AutoLayout 和 AutoResizing 通常会造成困难，因为它们似乎会改变框架而不是视图的边界和中心。因此，自动调整会严重破坏您的布局。尝试将转换后的标签包装在一个视图中，该视图不会根据您的需要更改其父视图中的视图的尺寸和布局。

# android - 双重安全用于意图吗？

> ID：11439105
> 
> 赞同：0
> 
> 时间：2012-07-11T18:32:22.663
> 
> 标签：android

我打算用它作为一个意图的 id，双精度最高的数字是 50,000，意图 id 几乎总是完整的数字，例如 1、2、3、4，但有时它可能有id 为 1.2, 1.3 可以使用 double 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:40:44.900

是的，如果您要添加额外内容，您可以添加、int、double、String、bytes 等。它们非常安全。

就在从 Intent 获取 Extras 时，请注意添加对初始值的检查。所以它避免了异常。

# javascript - 带有 valueBinding 的 Ember TextArea 导致光标跳到 textarea 的末尾

> ID：11439106
> 
> 赞同：0
> 
> 时间：2012-07-11T18:32:23.230
> 
> 标签：javascript, internet-explorer, ember.js

示例：http: [//jsfiddle.net/TAWmx/7/](http://jsfiddle.net/TAWmx/7/)

使用带有 valueBinding 的 Ember.TextArea 视图，当用户在 IE7-9 或 Opera 中键入 textarea 时，每次按键后光标位置都会更改到 textarea 的末尾。

在 JSFiddle 示例中，如果您开始在单词“Test”上方键入，您键入的字符将出现，然后光标将跳转到 textarea 的文本，您键入的任何剩余文本将显示在底部。

这意味着在非最后的文本区域内更改文本是极其困难的。

我相信这[与 IE 的问题](https://stackoverflow.com/questions/6899047/why-does-ie-8-make-the-cursor-jump-to-the-end-of-the-textarea-for-this-js)有关，即每当修改文本区域的内容时，插入符号的位置就会丢失。在 Ember 中是否有解决此问题的方法，例如进行单向数据绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:51:26.110

我向 ember.js 提交了一个[拉取请求](https://github.com/emberjs/ember.js/pull/1154)以保存和恢复光标位置以解决 Ember.TextArea 视图中的此问题。

# android - 在 Android 中创建动态大小的正方形（等高和等宽）UI 元素

> ID：11439112
> 
> 赞同：0
> 
> 时间：2012-07-11T18:32:40.103
> 
> 标签：android, layout, user-interface, height, width

正如标题所述，我试图将布局元素的宽度设置为等于高度（设置为与父级匹配）。我尝试从高度参数以编程方式设置宽度参数，但这显示为 -1 而不是实际高度（因为它与父级匹配）。任何人都知道如何创建大小是动态的方形布局元素？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:43:58.543

所以我一直在为这样的事情做 - 我不知道它是否理想，但它工作得很好 - 是 use `ViewTreeObserver.OnGlobalLayoutListener`。像这样的东西：

```
View myView = findViewById(R.id.myview);
ViewTreeObserver observer = myView.getViewTreeObserver();
observer.addOnGlobalLayoutListener(new SquareLayoutAdjuster());

class SquareLayoutAdjuster 
        implements ViewTreeObserver.OnGlobalLayoutListener {
    @Override
    public void onGlobalLayout() {
        int dimension = myView.getHeight();
        LayoutParams params = myView.getLayoutParams();
        params.width = dimension;
        myView.setLayoutParams(params);
        observer.removeGlobalOnLayoutListener(this);
    }
} 
```

这只是大致思路，不知道是不是按原样编译，但基本上在`onGlobalLayout()`方法上，保证你的观点是有衡量的。您在最后删除侦听器以防止它被多次调用（除非您出于任何原因需要发生这种情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T20:35:00.713

KCOPPOCK 的解决方案对我有用，谢谢。但是我在运行时得到“java.lang.IllegalStateException：这个 ViewTreeObserver 不存在，再次调用 getViewTreeObserver()”。所以我用 `findViewById(R.id.serie_main_layout).getViewTreeObserver().removeOnGlobalLayoutListener(this);`

反而

```
observer.removeGlobalOnLayoutListener(this); 
```

一切都很完美。

# c - 对于下一个 C 标准，我会去哪里提出想法？

> ID：11439117
> 
> 赞同：6
> 
> 时间：2012-07-11T18:33:03.850
> 
> 标签：c, standards, ansi, iso, revision

我一直在阅读很多关于 C 是如何工作的内容，并且我想我对如何使它变得更好有了一个想法。根据我的阅读，标准似乎不时更改，我想知道是否有地方可以为下一次修订提交新想法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T18:57:38.093

该委员会的网站是[http://www.open-std.org/JTC1/SC22/WG14/](http://www.open-std.org/JTC1/SC22/WG14/)。

他们的联系信息位于[http://www.open-std.org/JTC1/SC22/WG14/www/contacts](http://www.open-std.org/JTC1/SC22/WG14/www/contacts)。

最新的 C 标准于去年年底发布；应该与发布的标准几乎相同的草案是[N1570 ，或者您可以从](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)[ANSI 商店](http://webstore.ansi.org/RecordDetail.aspx?sku=INCITS%2fISO%2fIEC+9899-2012)或您的国家标准机构购买官方标准。

想法经常在 comp.std.c Usenet 新闻组上讨论；这是一个获得反馈的好地方，但它与委员会没有正式联系。

如果您可以展示现有实践，即已经将其作为扩展实现的现有 C 编译器，并且如果它不违反模糊定义的“C 精神”，那么您的想法将更有可能被采用。

# charts - FX 2 在折线图中设置填充

> ID：11439119
> 
> 赞同：1
> 
> 时间：2012-07-11T18:33:05.020
> 
> 标签：charts, javafx-2

我有一个 XY 折线图和一个 css 文件，用于设置图表功能。

我不知道如何避免图表上的白色边框

![在此处输入图像描述](../Images/f4905d9d00759b85d9589b965863aa50.png)

我的CSS设置是：

```
.chart-plot-background{
-fx-padding:0px;
-fx-font-family: Verdana;
-fx-background-color: linear-gradient(to bottom right, lightsteelblue, black);
}
.chart-content{
-fx-background-color: linear-gradient(to bottom right, lightsteelblue, black);
-fx-padding:30px;
} 
```

我想用没有白色边框的相同颜色填充框架。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:41:09.593

我找到了解决方案：似乎这些白线充当“边框”，所以我在 css 文件中添加了这些说明：

```
-fx-border-color: linear-gradient(to bottom right, lightsteelblue, black);
-fx-border-width: 5;
-fx-border-insets: -5; 
```

不确定这是否是最佳解决方案，任何建议表示赞赏。

# ruby-on-rails - solr search in rails 3 - 由于目标机器主动拒绝连接，无法建立连接。- 连接（2）

> ID：11439120
> 
> 赞同：0
> 
> 时间：2012-07-11T18:33:07.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, solr

我一直在尝试按照说明在 rails 3 上安装 solr：

[https://github.com/sunspot/sunspot#readme](https://github.com/sunspot/sunspot#readme)

[http://collectiveidea.com/blog/archives/2011/03/08/full-text-searching-with-solr-and-sunspot/](http://collectiveidea.com/blog/archives/2011/03/08/full-text-searching-with-solr-and-sunspot/)

但是，我似乎无法在我的 rails 服务器上进行搜索。我在搜索栏中输入查询并按回车，却收到错误：无法建立连接，因为目标机器主动拒绝了它。- 连接（2）

投诉似乎来自我模型中的“搜索”功能：

```
def search

  @posts = Post.search do
    keywords params[:query]
  end.results

  respond_to do |format|
    format.html { render :action => "index" }
    format.xml  { render :xml => @posts }
  end
end 
```

搜索栏如下所示：

```
<%= form_tag search_posts_path, :method => :get do %>
<p>
  <%= text_field_tag :query, params[:query] %> <%= submit_tag "Search!" %>
</p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:36:20.120

你跑了`bundle exec rake sunspot:solr:start`吗？该错误消息告诉您，当您尝试搜索时，您无法连接到您的应用程序所期望的 Solr 实例。

# google-analytics - 如何在不等待几个小时的情况下测试 Google Analytics Content Experiments？

> ID：11439122
> 
> 赞同：2
> 
> 时间：2012-07-11T18:33:19.427
> 
> 标签：google-analytics, google-website-optimizer

我正在尝试设置一些谷歌分析内容实验，如此处所述： [Google Analytics Content Experiments A/B testing server-side code without page refresh](https://stackoverflow.com/questions/11403778/google-analytics-content-experiments-a-b-testing-server-side-code-without-page-r)

我还没有让它工作得很好，我一直需要调整我的代码并尝试不同的东西。然后我部署到测试服务器（避免[GA 的 localhost 问题](https://stackoverflow.com/questions/4375447/can-you-test-google-analytics-on-a-localhost-address)），然后使用在线代理网站访问测试服务器（因为我的办公室[IP 已从我的 GA 帐户中过滤掉](https://stackoverflow.com/questions/1251922/is-there-a-way-to-stop-google-analytics-counting-development-work-as-hits)）。但是我需要等待大约 3 个小时才能看到 GACE 是否绘制了任何访问图表。

Google Analytics（分析）内容实验图表是否会延迟 3 小时更新？

有没有办法更快地看到结果（让我的迭代调整/测试更省时）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:16:55.420

在测试这类东西时，实时功能（测试版）非常有用。不幸的是它只支持页面视图。不支持事件。

（您必须是帐户的管理员才能看到它）

[http://analytics.blogspot.fr/2011/09/whats-happening-on-your-site-right-now.html](http://analytics.blogspot.fr/2011/09/whats-happening-on-your-site-right-now.html)

# asp.net-mvc-3 - ASP.NET MVC3 自定义路由

> ID：11439124
> 
> 赞同：1
> 
> 时间：2012-07-11T18:33:31.337
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我有三个看起来像这样的路线：

```
all.html

all/page-{numpage}.html

all/page-{numpage}-limit-{limit}.html. 
```

前两个工作正常 - 这意味着在我的控制器中，如果没有给出，我将获得 numpage 或 1 的值：

```
public ViewResult All(int numpage = 1, int limit = 10) {} 
```

numpage 是我在地址栏中输入的任何内容

第三条路线根本不起作用-好像我去了第一条路线（all.html），所以它的值等于1，限制是10-默认值。但是，当我转到 all/page-4.html?limit=3 时，我得到了正确的值。我究竟做错了什么？:D

还有一件事——我动态地创建我的路由，所以注册它们的代码看起来像这样（rcache 返回正确的路由列表）：

```
List<Tuple<Dictionary<string, string>, string, string, string>> routes = rcache.GetRoutes();

            foreach (var route in routes) {
                foreach (KeyValuePair<string, string> kvp in route.Item1) {
                    context.MapRoute(
                        route.Item4,
                        kvp.Value,
                        new { controller = route.Item2, action = route.Item3, id = UrlParameter.Optional, name = UrlParameter.Optional, numpage = UrlParameter.Optional, limit = UrlParameter.Optional }
                    );
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:26:19.150

好吧，你在和自己打架。你为什么不把最后一条规则放在第一位，看看会发生什么？路由规则的顺序有所不同。

只是一个简短的说明。简化您的设计并避免复杂性。你正在做的事情可能会奏效，但这是一个糟糕的选择。不要这样做。

首先，您不应该允许任何人添加/编辑/删除您的路线。如果有人不真正了解它是如何工作的，那么您就是在允许他们破坏您的应用程序。我肯定会避免它。

好吧，可以说你必须这样做。那么您还需要验证路由和规则，您不能将其推送到您的路由表。

另外，假设他们添加了一条路线并且它不起作用，因为您的控制器不支持它。你会承担责任。让他们向您提出请求，然后将其添加到您的路由表中。

您是此代码的作者，其他人将无法维护您编写的内容或您在编写时的想法。

# azure - 需要建议使用 lucene.net 创建索引和搜索

> ID：11439125
> 
> 赞同：1
> 
> 时间：2012-07-11T18:33:35.033
> 
> 标签：azure, storage, blob, lucene.net

我必须在 azure 存储上构建 lucene 索引，我是否必须创建两个工作角色，一个用于搜索，一个用于创建/更新文档？另外，如果我想在每个新文档创建后重建索引。请建议我最好的方法。

谢谢你，拉维克里希纳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:02:42.070

您似乎在询问非常通用的信息。对于具体问题，您需要非常具体。实际上，您可以使用一个 Windows Azure 辅助角色来创建索引，然后您可以使用一个 Web 角色进行搜索。也很有可能将这两个过程放在一个 Web 角色中。您可以直接使用 nuget Lucene.NET 包，然后您可以配置搜索和索引创建。

查看基于 Java 的库[Lucene/Solr](http://www.lucidimagination.com/content/scaling-lucene-and-solr#d0e58)，您可以作为服务运行来管理索引。您当然可以将 Solr 与 Lucene.net 一起使用。

以下是一些可以开始的资源：

*   [简单的 Lucene](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/SimpleLucene-e28093-Lucenenet-made-easy.aspx)
*   [Lucene.Net 教程（涵盖版本 2.9.2）](http://www.d80.co.uk/post/2011/03/29/LuceneNet-Tutorial.aspx)
*   [Azure 目录](http://code.msdn.microsoft.com/AzureDirectory)

# jquery - 如何将变量传递给 jQuery 插件

> ID：11439126
> 
> 赞同：2
> 
> 时间：2012-07-11T18:33:37.387
> 
> 标签：jquery, jquery-plugins

我有一个 jQuery 插件，有人帮我写了。我最初只需要它一次使用，所以直接在插件中硬编码文本框值查找，但现在我想从我调用它的地方传递那个变量，这样我就可以多次重用同一个插件。

这就是我所拥有的，我将发布这两个插件，这样你就会看到我做了什么来让它同时工作。我想传入 UserSearch: 变量而不是对其进行硬编码。

```
(function ($) {
$.checkMultipleUsers = (function (my) {
    my.CheckUsers = function () {
            return $.ajax({
                type: "POST",
                url: "http://localhost:52350/FabRouting/Webservice/UserList.asmx/GetUserCount",
                data: JSON.stringify({ UserSearch: $("[id$=txtSubmittedBy]").val() }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
            });
    };
    return my;
})({});
})(jQuery); 
```

和

```
(function ($) {
$.checkMultipleUsers2 = (function (my) {
    my.CheckUsers2 = function () {

        return $.ajax({
            type: "POST",
            url: "http://localhost:52350/FabRouting/Webservice/UserList.asmx/GetUserCount",
            data: JSON.stringify({ UserSearch: $("[id$=txtOther]").val() }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
        });

    };
    return my;
})({});
})(jQuery); 
```

我这样称呼它：

```
promise = $.checkMultipleUsers.CheckUsers();
                    promise.success(function (count) {
} 
```

和

```
promise2 = $.checkMultipleUsers2.CheckUsers2();
                    promise2.success(function (count) {
} 
```

另外，虽然我已经发布了这个插件，但它写得好吗？我不明白为什么它需要 checkMultipleUsers 和 CheckUsers。似乎它是嵌入在另一个函数中的函数，我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:40:00.547

这不是一个真正的 jQuery 插件，这可以通过一个普通的函数来完成。

```
function CheckUsers(searchValue){
        return $.ajax({
            type: "POST",
            url: "http://localhost:52350/FabRouting/Webservice/UserList.asmx/GetUserCount",
            data: JSON.stringify({ UserSearch: searchValue}),
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        });
} 
```

然后你可以这样称呼它`CheckUsers($('#myInput').val());`

# c++ - 场景刷新冻结

> ID：11439128
> 
> 赞同：3
> 
> 时间：2012-07-11T18:33:44.860
> 
> 标签：c++, linux, opengl, glut

我渲染 2D（基于图块）场景并注册按键。按下箭头键时，我移动相机。虽然按键注册得很好，但**我的场景在我切换到另一个窗口并返回之前不会更新**。

你能给我一个关于是什么导致问题的线索吗？

PS。我在*Linux上工作，在**glut* ( *freeglut* )的帮助下开发*OpenGL应用程序。*

 **我的渲染功能：

```
void render() {
    glClear(GL_COLOR_BUFFER_BIT);
    glLoadIdentity();

    if (s_map)
    for (int i = s_iCameraX; i < sc_iTilesY + s_iCameraY && i < s_map->usiHeight; i++)
    {
        for (int j = s_iCameraY; j < sc_iTilesX + s_iCameraX && j < s_map->usiWidth; j++)
        {
            short val = s_map->data[i][j];              
            if (val == 0x0010) glBindTexture(GL_TEXTURE_2D, texture[0]);
            else if (val == 0x0020) glBindTexture(GL_TEXTURE_2D, texture[1]);

            glBegin(GL_QUADS);
                glTexCoord2f(0.0f, 0.0f);   glVertex2f(j-s_iCameraX, i-s_iCameraY);
                glTexCoord2f(1.0f, 0.0f);   glVertex2f(j-s_iCameraX+1.0f, i-s_iCameraY);
                glTexCoord2f(1.0f, 1.0f);   glVertex2f(j-s_iCameraX+1.0f, i-s_iCameraY+1.0f);
                glTexCoord2f(0.0f, 1.0f);   glVertex2f(j-s_iCameraX, i-s_iCameraY+1.0f);
            glEnd();
        }
    }

glutSwapBuffers();
} 
```

我的特殊按键处理功能：

```
void keyproc(int key, int x, int y) {
    switch (key)
    {
    case GLUT_KEY_UP:
        printf("UP: %d %d\n", s_iCameraX, s_iCameraY);
        if (s_iCameraY - 1 >= 0) s_iCameraY--;
        break;

    case GLUT_KEY_DOWN:
        printf("DOWN: %d %d\n", s_iCameraX, s_iCameraY);
        if (s_map && s_iCameraY + 1 < s_map->usiHeight) s_iCameraY++;
        break;

    case GLUT_KEY_RIGHT:
        printf("RIGHT: %d %d\n", s_iCameraX, s_iCameraY);
        if (s_map && s_iCameraX + 1 < s_map->usiWidth) s_iCameraX++;
        break;

    case GLUT_KEY_LEFT:
        printf("LEFT: %d %d\n", s_iCameraX, s_iCameraY);
        if (s_iCameraX - 1 >= 0) s_iCameraX--;
        break;

    default: break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:54:34.770

以下可能值得一试：添加空闲回调：

```
void idle(void)
{
    // Force GLUT to render the scene
    glutPostRedisplay();
} 
```**

# c# - 插入 SQL 字符串

> ID：11439138
> 
> 赞同：1
> 
> 时间：2012-07-11T18:34:25.417
> 
> 标签：c#, sql, string, stored-procedures, insert

我正在调用存储过程，它返回我计划通过电子邮件发送给我的用户的文章的 html。但是，有些文章的图片会因为地址不完整而导致链接断开。

我想做的，无论是在存储过程中还是在获取字符串的asp.net代码中，都是在长字符串中插入我网站的正确http：。所以我会寻找 /portalname/etc。然后在它前面插入 www.website.com 在它前面。这可以在 SQL 中完成，还是在 C# 中有一个函数可以用来在字符串中插入它？

编辑：这是我得到的那种字符串的例子。我想在存储过程或代码中将 URL 更改为绝对 URL。

> <p><span style="text-decoration: underline;"><strong><img alt="" src=" `/portalname/portals/0/Images/SomeImg.jpg`" style="margin-right: 10px; margin-bottom: 10px; float: left;" /><span style="font-size: 12px; font-family: arial;"> TITLE</span></strong></span></p> <p><span style="font-size: 12px; font-family: arial;">文章摘要强。  </span></p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:36:55.213

使用 RegExp 查找和替换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:39:13.520

正则表达式，如果您无法编辑数据库中字符串的格式，或者如果可以，请用`{<num>}`语法替换实例，以便您可以`String.Format()`在返回的字符串上使用该函数。

> 这是我以 {0} 作为资源的示例文章。

```
var formatted = String.Format(stringFromDB, "http://example.org"); 
```

# java - Java拖动图像更好&重叠图像检测

> ID：11439139
> 
> 赞同：2
> 
> 时间：2012-07-11T18:34:35.110
> 
> 标签：java, image, swing, mouse

我有两个问题要问你：

1.  [已解决] - 在 java 中，我能够使用鼠标侦听器在图像周围移动。不是将图像准确地移动到我的指针所在的位置，而是如何制作它，所以如果我单击并向上移动鼠标，它只会向上移动图像。不要让图像跳转到我的鼠标指针所在的位置。

2.  [已解决] - 由于我正在构建一个编辑器，如果我在窗口上有多个可以移动的图像，如果有两个重叠的图像，我如何检测我应该实际移动哪个图像。如果我想移动图像后面的图像而不是前面的图像会发生什么，反之亦然。你们在这里做过的最好的方法是什么。

一些与这两个问题相关的代码

```
addMouseMotionListener(new MouseMotionListener() {

        @Override
        public void mouseMoved(MouseEvent arg0) {
            // TODO Auto-generated method stub
        }

        @Override
        public void mouseDragged(MouseEvent arg0) {
            // TODO Auto-generated method stub
            //use this
            if(curObj != null){

                Point p = arg0.getPoint();

                curObj.pos.x = p.x;
                curObj.pos.y = p.y;

                ......
            }
        }
    });

addMouseListener(new MouseListener() {

        @Override
        public void mouseReleased(MouseEvent arg0) {
            // TODO Auto-generated method stub
        }

        @Override
        public void mousePressed(MouseEvent arg0) {
            // TODO Auto-generated method stub
            //right now find the first one that contains the mouse.
            //later we can make it so they have an option to pick on that overlaps.

            Point p = arg0.getPoint();
            SwingUtilities.convertPoint(Main.gui, p, instance);

                            ....

                            //this is the code to detect which image to use
            curObj = null;
            for(int i = 0; i < objects.size(); i++){
                StepObject obj = objects.get(i);
                if(obj.isDraggable()){
                    if(p.x >= obj.pos.x && p.y >= obj.pos.y &&
                       p.x <= (obj.pos.x + obj.getWidth()) && p.y <= (obj.pos.y + obj.getHeight())){
                        curObj = obj;
                        break;
                    }
                }
            }

            .....

        }

        @Override
        public void mouseExited(MouseEvent arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mouseEntered(MouseEvent arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mouseClicked(MouseEvent arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

任何反馈表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:54:00.503

> 我实际上是`Graphics`用来绘制图像的。

这一直是一个用户界面问题，可以追溯到最早的、广泛可用的[对象绘图程序](http://en.wikipedia.org/wiki/MacDraw)。常见的方法是实现两个基本操作，使用户能够通过更改其呈现顺序来公开隐藏对象：

*   向后移动：将选择按*z*顺序向后移动。
*   移到后面：将选择移到*z*顺序的后面。

通常包括两个互补的操作：

*   *向前移动：将选择按z*顺序向前移动一步。
*   移到前面：将选择移到*z*顺序的前面。

[`GraphPanel`](https://sites.google.com/site/drjohnbmatthews/graphpanel)说明了在 Java 2D 中命中测试和处理多项选择的几种技术。它说明了至少*一些*对象是可见的更简单的情况。它的渲染顺序是由一个简单的`List<Node>`模型 using定义的`ArrayList`，这对于重新排序并不理想；考虑`LinkedList`作为`List`接口的替代实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:39:24.087

一种解决方案是我如何为棋盘解决这个问题。棋盘由 JPanel 网格组成，每个 JPanel 可以容纳一个或 0 个 JLabel（用于保存带有图像的棋子）。如果我单击包含 JLabel 的 JPanel，则 JLabel 会被踢到顶层窗口的玻璃窗格上，然后用鼠标拖动。释放鼠标时，MouseListener 会检测到我在哪个网格的 JPanel 上，国际象棋引擎确定这是否是有效的移动，如果是，则将 JLabel 添加到鼠标光标所在的 JPanel 中。如果不是，则 JLabel 将返回其原始 JPanel。JPanel 使用 GridBagLayout，因此如果向其中添加 JLabel，它将在 JPanel 单元格中集中显示。

# java - 削减 .jar 文件以减轻 Android 应用程序的重量

> ID：11439146
> 
> 赞同：5
> 
> 时间：2012-07-11T18:34:48.067
> 
> 标签：java, android, jar, size, reduce

背景：在创建 android 应用程序的过程中，我在搞乱不同的哈希技术和速度。在我找到 SpongyCastle（即 BouncyCastle）之前，我一直*在*使用 Android 原生的东西，结果证明它要快得多。SpongyCastle .jar 文件相当大，我的 .apk 超过 800kb，只有 jar 和几个测试类（以及所有必要的 android 绒毛）。

问题 pt 1： .jar 文件对 APK 执行此操作是否正常？他们通常会膨胀文件吗？

问题 pt 2：我有什么办法（通过 source 或 jar ）来减少文件？我只使用 SHA256 和 SHA1 哈希方案，我无法弄清楚如何在不包括整个 jar 的情况下仅使用这两个哈希方案。

想法？

**编辑：** ProGuard 创造奇迹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:42:42.410

使用[ProGuard](http://proguard.sourceforge.net/)。它*擅长*削减您不使用的部分依赖项。[此处](http://developer.android.com/tools/help/proguard.html)特别提到了用于 Android 应用程序。

（我为 Guava 做出了贡献，这是一个非常大的库，但很多人想将它用于 Android。我们将他们指向 ProGuard。）

# windows-phone-7 - 获取当前播放的歌曲名称和艺术家

> ID：11439150
> 
> 赞同：1
> 
> 时间：2012-07-11T18:35:18.043
> 
> 标签：windows-phone-7

如何在 Windows Phone 7 中获取当前播放的歌曲名称和艺术家？我知道我必须使用[MediaHistory.NowPlaying 属性](http://msdn.microsoft.com/en-us/library/microsoft.devices.mediahistory.nowplaying%28VS.92%29.aspx)，但我不知道如何使用它。我试过

```
string title = MediaHistory.Instance.NowPlaying.Title; 
```

但即使在播放歌曲时，它也会给我一个 NullReferenceException 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:54:02.873

我找到了答案：

```
using Microsoft.Xna.Framework.Media; 
```

和

```
string name = MediaPlayer.Queue.ActiveSong.Name;
string album = MediaPlayer.Queue.ActiveSong.Album.Name; 
```

您可以像这样获得有关播放歌曲的更多信息...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:35:29.860

阅读[此处](http://msdn.microsoft.com/en-us/library/microsoft.devices.mediahistory.nowplaying%28v=VS.92%29.aspx)并查看此内容，它解释了为什么会出现错误

> 获取此属性时，仅返回您的应用程序设置的最新 MediaHistoryItem。例如，如果用户通过不同的应用程序播放了更新的 MediaHistoryItem，则该项目将不会与此属性一起返回。而是返回您自己的应用程序设置的最新项目。

# performance - 具有可变密度的欧几里得数据的简单k最近邻算法？

> ID：11439157
> 
> 赞同：2
> 
> 时间：2012-07-11T18:35:37.603
> 
> 标签：performance, algorithm, data-structures, nearest-neighbor, kdtree

关于[这个问题](https://stackoverflow.com/questions/3944649/suitable-choice-of-data-structure-and-algorithm-for-fast-k-nearest-neighbor-sear)的详细说明，但有更多限制。

这个想法是相同的，为 2 维欧几里得的 k 最近邻找到一个简单、快速的算法。如果您能找到合适的网格大小来对数据进行分区，则分桶网格似乎工作得很好。但是，如果数据不是均匀分布的，而是具有非常高和非常低密度的区域（例如，美国人口），那么没有固定的网格大小可以保证足够的邻居和效率怎么办？这种方法还能挽回吗？

如果没有，其他建议会有所帮助，但我希望答案比转移到 kd-trees 等复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:41:29.870

如果您没有太多元素，只需将每个元素与所有其他元素进行比较。这可能比您想象的要快得多；今天的机器*速度很快*。不幸的是，平方因子迟早会抓住你。我认为对一百万个对象进行线性搜索不会花费太长时间，因此最多可以使用 1000 个元素。使用网格，甚至条纹，可能会大大提高这个数字。

但我认为你被四叉树（kd 树的一种特定形式）困住了。您的整个地图是一个块，其中*可以*包含四个子块（左上、右上、左下、右下）。当一个块填充的元素多于您想要对其进行线性搜索时，将其分解为更小的元素并传输元素。（只有叶节点有元素。）在给定点的给定半径内搜索很容易。从顶部开始，如果块的一部分在该点的范围内，则以相同的方式检查它的子块（如果有的话）。如果没有，请检查其元素。

（在搜索“最近”时，请注意。方形网格表示较近的对象可能位于较远的块中。您必须在给定半径内获取所有内容，然后全部检查。如果您想要 10 个最近的对象和您的半径of 20 只捡了 5 个，你需要尝试更大的半径。你可能有一个被拒绝的项目证明在 30 之外，并认为你应该抓住它和其他一些来弥补你的 10。但是，可能有一些25 以外的项目，它们的整个街区都被拒绝了，而你想要它们。应该有更好的解决方案，但我还没有弄清楚。我只是猜测半径并将其翻倍直到我得到足够。）

四叉树很有趣。如果您可以设置数据然后访问它，那就很容易了。当您试图找出谁在什么附近时，当您的映射元素出现、消失和移动时，问题就出现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:41:58.097

你看过这个吗？

[http://www.cs.sunysb.edu/~algorith/major_section/1.4.shtml](http://www.cs.sunysb.edu/~algorith/major_section/1.4.shtml)

kd-trees 实现起来非常简单，有标准的 java/c 实现。

还：

您可能想在此处发布您的问题：

[https://cstheory.stackexchange.com/?as=1](https://cstheory.stackexchange.com/?as=1)

# haskell - GHCi 中与 fromIntegral 的行为不一致

> ID：11439163
> 
> 赞同：4
> 
> 时间：2012-07-11T18:35:58.743
> 
> 标签：haskell, types, ghci

当使用 fromIntegral 函数时，我希望有人可以解释 GHCi 中的以下行为：

```
Prelude> let x = 1 :: Integer                                                                                                                                                    
Prelude> :t x                                                                                                                                                                    
x :: Integer                                                                                                                                                                     
Prelude> sqrt $ fromIntegral x                                                                                                                                                   
1.0                                                                                                                                                                              
Prelude> let y = fromIntegral x                                                                                                                                                  
Prelude> sqrt y                                                                                                                                                                  

<interactive>:181:1:                                                                                                                                                             
No instance for (Floating Integer)                                                                                                                                           
  arising from a use of `sqrt'                                                                                                                                               
Possible fix: add an instance declaration for (Floating Integer)                                                                                                             
In the expression: sqrt y                                                                                                                                                    
In an equation for `it': it = sqrt y 
```

为什么我设置`y`然后取它`sqrt`或直接取它有什么关系`sqrt`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T18:43:35.563

`fromIntegral`它的返回类型是多态的。因此`y`，您的代码中的类型可能是`Num a => a`. 这种类型将允许您毫无问题地`y`用作参数。`sqrt`

但是由于单态性的限制， 的类型`y`不允许是多态的。因此，它默认为默认的 Num 类型，即`Integer`.

当您这样做时`sqrt $ fromIntegral x`，单态限制不适用，因为它仅适用于全局变量，并且这次您不将结果存储`fromIntegral`在变量中。

您可以通过向 y ( ) 添加类型签名`let y :: Num a => a; y = fromIntegal x`或禁用单态限制来解决此问题。

# python - 使用 PyMongo 从 Twitter Streaming API 存储 JSON 字典

> ID：11439164
> 
> 赞同：0
> 
> 时间：2012-07-11T18:35:59.043
> 
> 标签：python, mongodb, twitter

目前，我有很多推文，我打算将它们存储在我实验室的服务器上。但是，我在确定我打算如何执行此操作时遇到了一些问题。

例如，推文具有以下格式：

```
{
    "contributors": null,
    "coordinates": null,
    "created_at": "Tue Jul 10 17:09:12 +0000 2012",
    "entities": {
        "hashtags": [{
            "indices": [62, 78],
            "text": "thestrongnation"
        }],
        "urls": [],
        "user_mentions": [{
            "id": 376483630,
            "id_str": "376483630",
            "indices": [0, 8],
            "name": "SherryHonig",
            "screen_name": "sahonig"
        }]
    },
    "favorited": false,
    "geo": null,
    "id": 222739261219282945,
    "id_str": "222739261219282945",
    "in_reply_to_screen_name": "sahonig",
    "in_reply_to_status_id": 222695060528037889,
    "in_reply_to_status_id_str": "222695060528037889",
    "in_reply_to_user_id": 376483630,
    "in_reply_to_user_id_str": "376483630",
    "place": {
        "attributes": {},
        "bounding_box": {
            "coordinates": [
                [
                    [-106.645646, 25.837164000000001],
                    [-93.508038999999997, 25.837164000000001],
                    [-93.508038999999997, 36.500703999999999],
                    [-106.645646, 36.500703999999999]
                ]
            ],
            "type": "Polygon"
        },
        "country": "United States",
        "country_code": "US",
        "full_name": "Texas, US",
        "id": "e0060cda70f5f341",
        "name": "Texas",
        "place_type": "admin",
        "url": "http://api.twitter.com/1/geo/id/e0060cda70f5f341.json"
    },
    "retweet_count": 0,
    "retweeted": false,
    "source": "web",
    "text": "@sahonig BOOM !!!! I feel a 1 coming on!!! Awesome! #thestrongnation",
    "truncated": false,
    "user": {
        "contributors_enabled": false,
        "created_at": "Wed Feb 15 14:40:48 +0000 2012",
        "default_profile": false,
        "default_profile_image": false,
        "description": "Living life on 30A & doing it my way. My mind is Stronger than physical challenge. Runner, Crosfit, Fitness Challenges. Proud member of #thestrongnation. ",
        "favourites_count": 17,
        "follow_request_sent": null,
        "followers_count": 215,
        "following": null,
        "friends_count": 184,
        "geo_enabled": true,
        "id": 493181025,
        "id_str": "493181025",
        "is_translator": false,
        "lang": "en",
        "listed_count": 4,
        "location": "Seagrove Beach, FL",
        "name": "30A My Way \u2600",
        "notifications": null,
        "profile_background_color": "c0deed",
        "profile_background_image_url": "http://a0.twimg.com/profile_background_images/590670431/aj7p0c6j2oevdj240jz2.jpeg",
        "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/590670431/aj7p0c6j2oevdj240jz2.jpeg",
        "profile_background_tile": true,
        "profile_image_url": "http://a0.twimg.com/profile_images/2381704869/b7bizspexjgmyspqesg0_normal.jpeg",
        "profile_image_url_https": "https://si0.twimg.com/profile_images/2381704869/b7bizspexjgmyspqesg0_normal.jpeg",
        "profile_link_color": "0084B4",
        "profile_sidebar_border_color": "C0DEED",
        "profile_sidebar_fill_color": "DDEEF6",
        "profile_text_color": "333333",
        "profile_use_background_image": true,
        "protected": false,
        "screen_name": "30A_MyWay",
        "show_all_inline_media": false,
        "statuses_count": 1731,
        "time_zone": "Central Time (US & Canada)",
        "url": null,
        "utc_offset": -21600,
        "verified": false
    }
} 
```

这当然是 Python 中的字典，恰好遵循 JSON 格式。MongoDB 以 JSON 格式方便地接受这些，但问题是，我不希望提供*所有*信息。Streaming API 为我提供了 20 个字段，而我现在只想搞乱用户 ID、文本和位置。我最初打算解析它并仅提取我想要的文本，但是我找不到可靠的解析器，而且我觉得写一个解析器只是浪费时间，因为它正在开发的条件下。

但是，我正在考虑的另一个解决方案是，由于这些正在被读入 MongoDB，也许我可以只在字典中存储我想要的内容并摆脱其余的内容。唯一出现的问题是 Twitter 收到的文件格式将所有字典放在同一行 - 我觉得无论如何我都必须进行某种提取。

还有其他人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:01:13.523

如果必须，您可以使用`json.loads`（将返回 a `list`of `dict`s 如上格式）获取结果并将其放入 Python 结构中（如果还没有的话），以便对其进行操作。（但通常会使用一些可以透明地执行此操作的 Python Twitter 库）

只需创建一个`dict`您想要的新数据并将其插入 MongoDB，例如：

**假设`ret`= 上面的推文响应**

```
mydata = {
    'name': ret['user']['screen_name'],
    'text': ret['text']
}

print mydata['name'], 'wrote', mydata['text'] # or something

# insert mydata into appropriate MongoDB DB/collection here 
```

# c++ - 通过值或常量引用传递 boost::python::object？

> ID：11439165
> 
> 赞同：3
> 
> 时间：2012-07-11T18:36:05.087
> 
> 标签：c++, python, boost, boost-python

我应该通过值还是通过 const 引用将 boost::python::object 对象传递给 C++ 函数？我几乎总是通过 const 引用在 C++ 中传递重要的对象。但是，在 Boost Python 文档示例中，它们总是按值传递 boost::python::object。所以我想知道这背后是否有原因，或者他们只是这样做以使文本更易于阅读或其他什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:13:41.507

boost::python::object 是一个微不足道的对象。

它只是 PyObject* 的包装器，因此对 boost::python::object 的引用基本上只是携带指向指针的指针。这有点毫无意义的间接性。

您确实可以通过传递引用来避免增加引用计数。但我猜想间接使用引用比增加引用计数更有害。

**编辑**

我整理了一个基准：

```
void by_value(boost::python::object o)
{
    o + boost::python::object(1);
}

void by_const_ref(const boost::python::object & o)
{
    o + boost::python::object(1);
} 
```

使用 -O3 编译时的结果

```
by-value:       9:215190247
by-const-ref:   5:764022989 
```

鉴于：

```
void by_value(boost::python::object o)
{
    for(int x = 0;x < 1000;x++)
    o + boost::python::object(1);
}

void by_const_ref(const boost::python::object & o)
{
    for(int x = 0;x < 1000;x++)
    o + boost::python::object(1);
} 
```

我得到：

```
by-value:       5:199017623
by-const-ref:   8:720536289 
```

@eudoxous 是正确的，更新引用计数所需的写入非常昂贵。但是，使用引用造成的间接性也是有代价的。但是，它似乎比我预期的要小。

# google-app-engine - 有没有办法使用依赖于语言环境的 wsgi 处理程序来处理请求？

> ID：11439166
> 
> 赞同：0
> 
> 时间：2012-07-11T18:36:05.580
> 
> 标签：google-app-engine, python-2.7, wsgi, webapp2

有没有办法使用不同的 WSGI 处理程序来处理来自不同地理位置的请求？具体来说，我想允许来自一个本地（美国）的所有请求，并将所有其他请求重定向到一个保留页面，例如

```
application_us = webapp2.WSGIApplication([
    ('/.*', MainHandler)
    ], debug=DEBUG)

application_elsewhere = webapp2.WSGIApplication([
    ('/.*', HoldingPageHandler)
    ], debug=DEBUG) 
```

我知道 X-AppEngine-Country 但是我不太确定如何在这种情况下使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:54:08.557

您需要做的是只有一个应用程序，如果不支持该国家/地区，则在处理程序中将用户重定向到 HoldingPageHandler。

请参阅[是否可以在应用程序中使用 X-AppEngine-Country](https://stackoverflow.com/questions/9500604/is-it-possible-to-use-x-appengine-country-within-an-application)。他们在那里解释如何获得这个国家

```
country = self.request.headers.get('X-AppEngine-Country') 
```

所以你的处理程序会是这样的

```
class MainHandler(webapp2.RequestHandler):
  def get(self):
    country = self.request.headers.get('X-AppEngine-Country')
      if country != "US":
        self.redirect_to('hold') #assuming you have a route to hold
      # your logic 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:01:41.600

好的，由 Sebastian Kreft 构建答案我认为将其放入基本处理程序中可能是最简单的，每个其他处理程序都是其子类，如下所示。

```
class BaseHandler(webapp2.RequestHandler):
    def __init__(self, *args, **kwargs):
        super(BaseHandler, self).__init__(*args, **kwargs)
        country = self.request.headers.get('X-AppEngine-Country')
        if not country == "US" and not country == "" and not country == None: # The last two handle local development
            self.redirect('international_holding_page')
            logging.info(country) 
```

这更符合 DRY，尽管我不确定这是最有效的方法。

# c# - 重写一些嵌套 if 语句的选项

> ID：11439169
> 
> 赞同：2
> 
> 时间：2012-07-11T18:36:31.197
> 
> 标签：c#

我有一个使用一些嵌套 if 语句的方法，所以我想知道是否有更好的方法来编写相同的逻辑。

例如我想删除避免两次

```
_typologyRepository.Update(typology);
_typologyRepository.Save(); 
```

你能指出我正确的方向吗？谢谢

```
 public void Update(Typology typology, string nameOriginalValue)
  {
        if (typology.Name == nameOriginalValue)
        {
            _typologyRepository.Update(typology);
            _typologyRepository.Save();
        }
        else
        {
            if (IsUniqueName(typology.Name))
            {
                _typologyRepository.Update(typology);
                _typologyRepository.Save();
            }
            else
                _validatonDictionary.AddError("Name", errorMessageNameUnique);
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T18:38:56.490

```
if (typology.Name == nameOriginalValue || IsUniqueName(typology.Name))
{
    _typologyRepository.Update(typology);
    _typologyRepository.Save();
}
else
{
    _validatonDictionary.AddError("Name", errorMessageNameUnique);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:42:24.763

RedFilter 的回答是应该怎么写。不过，关于您的代码的另一条注释：

通常，当人们进行级联 if/else 时，他们会将所有内容保持在相同的缩进级别。RedFilter 的答案更好，因为您不需要级联 if/else，但如果您确实需要它们，大多数人会这样写：

```
public void Update(Typology typology, string nameOriginalValue)              
  {                                                                             
      if (typology.Name == nameOriginalValue)                                   
      {                                                                         
          _typologyRepository.Update(typology);                                 
          _typologyRepository.Save();                                           
      }                                                                         
      else if (IsUniqueName(typology.Name))                                     
      {                                                                         
          _typologyRepository.Update(typology);                                 
          _typologyRepository.Save();                                           
      }                                                                         
      else                                                                      
          _validatonDictionary.AddError("Name", errorMessageNameUnique);        
      }                                                                         
  } 
```

# php - 具有一对多表的Mysql select语句

> ID：11439172
> 
> 赞同：0
> 
> 时间：2012-07-11T18:36:50.177
> 
> 标签：php, mysql

我试图从传递给我的班级的未知变量数组（在 php 中）构建一个 mysql 语句。问题本身不在于构建语句（我可以做到），而在于创建更好、更有效的语句。

我简化了下表，仅显示核心属性。

我有一张主桌（一份工作）

## 工作

```
jid, j_ref 
```

然后链接到包含所有作业属性的第二个表

## 作业属性

```
jpid,jid,j_arg,j_value 
```

示例数据：

### 工作

```
jid: 1
j_ref: AB12345 
```

### 作业属性

```
jpid: 1, jid: 1, j_arg: address_1, j_value: 123 somewhere street
jpid: 2, jid: 1, j_arg: address_2, j_value: some lovely town
jpid: 3, jid: 1, j_arg: salary, j_value: 50000
jpid: 4, jid: 1, j_arg: job_type, j_value: permanent
.... 
```

所以作业 1 (jid=1) 具有这 4 个属性（jpid 只是一个唯一的自动增量 ID）。

现在，当搜索进入时，我想根据 job_properties 进行搜索。搜索当然可以包括一些和/或任何属性。我只想从查询中收到 jid（显然是唯一的，所以不是 4 个相同的 jid）。

我目前对这个问题进行编码的方式是有多个`IN`子句，它们会产生如下内容：

`select j.jid from job j where
jid in (select jid from job_properties where j_arg='salary' and j_value > '40000')
and
jid in (select jid from job_properties where j_arg='address_2' and j_value='some lovely town') ... (insert more IN clauses for each value that is passed to the search)`

我遍历传递的数组中的每个变量，并将另一个`IN`子句添加到 where 语句。

但是我觉得这效率很低，当我开始接收大量搜索时，它真的会变慢（一个工作可以有 20-30 个属性）。

有没有更好的方法，也许使用 HAVING 和 group by's？

它类似于这个问题：[Select mysql data with where clause in 2 tables](https://stackoverflow.com/questions/4805646/select-mysql-data-with-where-clause-in-2-tables)，但我还需要查询另一个表中的参数，而不仅仅是属性。

提前致谢

缺口

PS 我不能缓存结果，也不用担心创建的开销，因为显然结果取决于搜索时数据库中的作业，并且每小时都会更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:55:47.697

这会导致你的目标吗？

```
SELECT 
  j.jid 
FROM 
  job j
  JOIN jop_properties jp ON j.jid = jp.jid
WHERE 
     ( j_arg = 'salary'    AND j_value > '40000'            )
  OR ( j_arg = 'address_2' AND j_value = 'some lovely town' )
  OR [insert more combinations here] 
```

我想这个解决方案太简单了，我误解了一些东西。

# c# - 如何更新角度中的属性（自定义WPF控件）

> ID：11439174
> 
> 赞同：0
> 
> 时间：2012-07-11T18:36:53.147
> 
> 标签：c#, wpf, xaml, wpf-controls, custom-controls

让我向您展示我正在努力实现的目标。这是表示角度三点的 XAML 代码：

```
 <Border Width="200" Height="200" BorderBrush="Black" BorderThickness="1">
        <Canvas HorizontalAlignment="Center" VerticalAlignment="Center" 
      Width="0" Height="0"
      RenderTransform="1 0 0 -1 0 0">
            <Line X1="0" Y1="0" X2="{Binding CoordinateX}" Y2="{Binding CoordinateY}" Stroke="Black" />
            <Line X1="0" Y1="0" X2="100" Y2="0" Stroke="Black" />
        </Canvas>
    </Border> 
```

我的数据上下文是：

```
 Test a = new Test();

        // degrees * (pi/180)
        a.Angle = 45 * (Math.PI / 180.0);

        this.DataContext = a;

public class Test
{
    public Test() { }
    public double Angle { get; set; }
    public double CoordinateX { get { return Math.Cos(Angle) * 100; } }
    public double CoordinateY { get { return Math.Sin(Angle) * 100; } }
} 
```

但是现在，我想将最后一个用户控件实现为 CUSTOM WPF 控件：

```
public class Angle : Control
{
    static Angle()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(Angle), new FrameworkPropertyMetadata(typeof(Angle)));
    }

    public double Angle
    {
        get { return (double)base.GetValue(AngleProperty); }
        set { base.SetValue(AngleProperty, value); }
    }

    public static readonly DependencyProperty AngleProperty =
      DependencyProperty.Register("Angle", typeof(double), typeof(Angle), new PropertyMetadata(90.0, new PropertyChangedCallback(AngleChanged)));

    public double Radius
    {
        get { return (double)base.GetValue(RadiusProperty); }
        set { base.SetValue(RadiusProperty, value); }
    }

    public static readonly DependencyProperty RadiusProperty =
      DependencyProperty.Register("Radius", typeof(double), typeof(Angle), new PropertyMetadata(100));

    static void AngleChanged(DependencyObject property, DependencyPropertyChangedEventArgs args)
    {
        // here is the part I do not have idea to get "PART_LINE1" and change the values for X2 and Y2
    }
} 
```

请检查最后一个静态空白，我正在尝试做这样的事情：

```
 // var x = Math.Cos(Angle * (Math.PI / 180))
        // var y = Math.Sin(...);

        // PART_LINE.X2 = x;
        // PART_LINE.Y2 = y; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:08:52.293

在您的事件处理程序中，使用 GetTemplateChild 方法来查找适当的元素，有点像这样：

```
static void AngleChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
{
    Angle angleControl = (Angle)obj;
    Line line = angleControl.GetTemplateChild("PART_LINE") as Line;
        if (line!= null)
        {
            //manipulate the line here
        }
} 
```

并确保在您的角度控件的 ControlTemplate 中，为 Line 指定适当的名称：

```
<Line x:Name="PART_LINE" Stroke="Black" /> 
```

# c - 使用协议缓冲区定义 MAC 地址

> ID：11439175
> 
> 赞同：3
> 
> 时间：2012-07-11T18:36:54.643
> 
> 标签：c, protocol-buffers, mac-address, nanopb

我正在尝试使用 C 中的协议缓冲区定义一个八字节的 MAC 地址数据元素。我尝试过：

```
message mac {
    required bytes address = 1 [(nanopb).max_size = 8];
} 
```

但这会创建一个具有大小字段和八字节地址字段的结构。我想只是和八字节的地址字段。

我拒绝使用 fixed64 元素，因为 MAC 地址是一个字节序列。对不起，如果这是一个简单的问题，因为我对协议缓冲区相当陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:52:56.017

生成大小字段是因为无法在“字节”字段上强制设置最小长度。因此，如果创建消息的人没有在字段中提供 8 个字节，那么其余的将是垃圾数据。

尺寸字段是否会引起一些麻烦？它确实会消耗 2-4 字节的 RAM，但仅此而已。

（我是 nanopb 的作者；尽管这可能在所有 protobuf 实现中都是相同的。）

**更新：**自 nanopb 0.3.8（2017 年发布）以来，现在使用选项支持固定长度字节字段`(nanopb).fixed_length = true`。

# iphone - 从 NSArray 中删除空 NSStrings 的最简单方法是什么？

> ID：11439180
> 
> 赞同：17
> 
> 时间：2012-07-11T18:37:02.173
> 
> 标签：iphone, objective-c

在 PHP 中，它是一行代码：

```
$array_without_empty_strs = array_filter($array_with_empty_strs); 
```

什么是目标 C 等价物？

UPDATE - 添加以下测试代码来说明 Nikolai Ruhe 解决方案的使用：

```
// SOLUTION Test Code
NSMutableArray *myArray = [[NSMutableArray alloc] init ];
[myArray addObject:[NSNumber numberWithInt:5]];
[myArray addObject:@""];
[myArray addObject:@"test"];
NSLog(@"%@", myArray);
[myArray removeObject:@""];
NSLog(@"%@", myArray);

// SOLUTION Test Code Output
2012-07-12 08:18:16.271 Calculator[1527:f803] (
    5,
    "",
    test
)
2012-07-12 08:18:16.273 Calculator[1527:f803] (
    5,
    test
) 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-12T08:18:06.263

它更简单：

```
[mutableArrayOfStrings removeObject:@""]; 
```

如果您的数组不可变，则必须先创建一个`mutableCopy`。

`removeObject:`从数组中删除**所有**`isEqual:`返回 YES 的对象。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-11T18:42:37.790

```
NSArray *noEmptyStrings = [maybeEmptyStrings filteredArrayUsingPredicate:
    [NSPredicate predicateWithFormat:@"length > 0"]]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-01T11:07:08.667

我们可以在这里使用 NSPredicate 我的代码

```
NSPredicate *pred = [NSPredicate predicateWithBlock:^BOOL(id str, NSDictionary *unused) {
            return ![str isEqualToString:@""];
        }];

        NSArray *filtered = [yourArray filteredArrayUsingPredicate:pred]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T18:41:03.537

看看[这个问题](https://stackoverflow.com/q/110332/1487063)，和你的几乎一模一样。

我将此方法用于不适用的非字符串（对象）情况`NSPredicate`

数组在哪里`NSMutableArray`

```
- (void) clearArrayOut
{

    for (int j=[array count]-1; j>=0; j--)
        if ([[array objectAtIndex:j] length] == 0)
            [array removeObjectAtIndex:j];
} 
```

我完全只是从 rob mayoff 对我的问题[NSPredicate 的漂亮回答中偷走了这个，而不是循环来过滤对象数组](https://stackoverflow.com/q/11439492/1487063)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T19:28:56.880

这是一种替代方法，它甚至比使用谓词更灵活。

```
NSArray* filteredArray = [arrayToFilter objectsWithIndexes: 
                              [arrayToFilter indexesOfObjectsPassingTest: 
                                 ^((id obj, NSUInteger idx, BOOL *stop)
                                 {
                                     return [obj length] > 0;
                                 }]]; 
```

# ssas - Sql Server 分析服务 2008 年总计

> ID：11439182
> 
> 赞同：1
> 
> 时间：2012-07-11T18:37:09.563
> 
> 标签：ssas

我正在使用 Sql Server Analysis Services 2008 构建一个多维数据集。我有以下情况，想知道是否有人对如何完成它有任何想法。立方体使用第三方工具（主动分析）显示在网络上。有基于角色的安全性，因此用户只能看到他们的数据。我试图让用户查看他们的数据，以及所有其他数据的总数。例如，用户当前只能查看马萨诸塞州的总人口，但还应该看到其下方的一行显示所有州的总人口。

                           **年份**
**州**                 2009 2010 2011
**MA**                1,000,000.00 1,050,000.00 1,102,500.00
**所有州(?)** 365,000,000.00 383,250,000.00 402,412,500.00

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:29:36.137

您可以编辑角色并在 Dimension Data 选项卡上，您可能选择了 Enable Visual Totals，这会阻止用户查看所有状态的总计。当您清除复选框时，用户仍然只能看到 MA，但总数应该是所有状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:59:49.667

补充 Stacia 的答案，因为它可能很难理解：

*   Visual Totals = true -> 仅查看允许用户使用的总计
*   Visual Totals = false -> 查看大总数，即使它可能会因为权限而限制某些部分

![在此处输入图像描述](../Images/5c8e5e37c908249f2267b72aa5d8e524.png)

# ios - 无法触发 AppDelegate 中可访问性的观察者

> ID：11439183
> 
> 赞同：0
> 
> 时间：2012-07-11T18:37:10.173
> 
> 标签：ios, nsnotificationcenter, reachability, nsnotifications, addobserver

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(myReachabilityDidChangedMethod)
                                             name:kReachabilityChangedNotification
                                           object:nil];
Reachability *reachability;
reachability = [Reachability reachabilityForInternetConnection];
[reachability startNotifier]; 
```

我的 AppDelegate 中有上面的代码块，用于创建可达性观察者，旨在通过应用程序触发 myReachabilityDidChangedMethod。

但是，无法触发位于 AppDelegate 中的 myReachabilityDidChangedMethod，当我打开或关闭我的 wifi 时，我在模拟器和 ipad 上都对其进行了测试，但两者都没有任何响应。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T18:50:46.677

要触发您的方法，您需要发布通知：

[[NSNotificationCenter defaultCenter] postNotificationName:@"kReachabilityChangedNotification" object:nil];

顺便说一句，如果我没记错的话，当你注册你的通知时，kReachabilityChangedNotification 应该写成一个字符串@"kReachabilityChangedNotification"

# mysql - 为什么这个 MySQL 查询给我一个错误 1064？

> ID：11439185
> 
> 赞同：-1
> 
> 时间：2012-07-11T18:37:13.193
> 
> 标签：mysql, mysql-error-1064

这个查询给了我一个错误 1064：

```
UPDATE `the_table_name` SET `build` = '7' WHERE `ID` = '820000',
UPDATE `the_table_name` SET `build` = '7' WHERE `ID` = '820400'; 
```

这是表架构：

```
CREATE TABLE `the_table_name` (
`ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
`name` varchar(45) NOT NULL,
`destroyedID` int(10) unsigned NOT NULL,
`flags` int(10) unsigned NOT NULL,
`build` tinyint(3) unsigned NOT NULL,
PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=77000301 DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T18:40:19.930

**MySQL 错误 #1064 - 您的 SQL 语法有错误**

第一`UPDATE`行以逗号结束。将其更改为分号应该可以解决该错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T18:42:13.283

或者，您可以在一个语句中执行此操作。

```
UPDATE `the_table_name` SET `build`= '7' WHERE `ID` IN(820000, 820400) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:49:15.960

你可以做

```
UPDATE `the_table_name` SET `build` = '7' WHERE `ID` = '820000';
UPDATE `the_table_name` SET `build` = '7' WHERE `ID` = '820400'; 
```

# delphi - Delphi 2010 错误打开 SysUtils

> ID：11439188
> 
> 赞同：0
> 
> 时间：2012-07-11T18:37:23.907
> 
> 标签：delphi, delphi-2010

我的问题是，当我在 Delphi 2010 中遇到错误时，它不会显示错误是在哪里或在哪一行创建的，它只会打开一个新页面 SysUtils，它不会告诉我任何信息。如何阻止 Delphi 打开 SysUtils 并将其配置为向我显示错误行？

我真的不太了解 Delphi 配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:33:56.780

如果您被 IDE 带到 SysUtils，这通常是因为问题出在核心编译器内部，并且没有可以显示的源代码。

在编译器中启用“调试 DCU”并进行构建可能是值得的，因为这可能会显示更多信息。

# json - 如何为 jqGrid 设置 JSONstring/将对象转换为 jqGrid 的 Json

> ID：11439194
> 
> 赞同：0
> 
> 时间：2012-07-11T18:37:44.503
> 
> 标签：json, jqgrid

我正在尝试动态填充我的 jqGrid ...

我一直在用数据填充我的 jquery 网格。你将如何设置你的 jquery 字符串？我像这样创建一个对象......

```
public static object JsonHelper(TemplateModel model){

            var values = model.Template;
            var JsonDataList = new {
                total = 1,
                page = 1,
                records = model.Template.Count,
                rows = (from val in values
                        select new {
                            cell = //new string(
                                ":[\"id\" :\"" + val.EncounterId +",\""+
                                "\""+val.MRN + ",\""+                                    
                                "\""+val.HostpitalFinNumber +",\""+                                  
                                "\""+val.FirstName+",\"" +                                    
                                "\""+val.LastName +",\"" +                                    
                                "\""+val.DateOfBirth.ToString() +",\""+                                    
                                "\""+val.CompletedPathway +",\""+                                    
                                "\""+val.CompletedPathwayReason +",\""+                                    
                                "\""+val.PCPAppointmentDateTime.ToString() + ",\""+                                    
                                "\""+ val.SpecialistAppointmentDateTime.ToString() + ",\""+                                    
                                "\""+val.AdminDate.ToString()+"\"]"                            
                        }).ToString()//.ToArray()
            };
            return JsonDataList;
        } 
```

那只是一个对象，但是我使用`Json`方法调用返回对象...

这就是我所做的...

```
return Json(DataRepository.JsonHelper(model.FirstOrDefault()), JsonRequestBehavior.AllowGet); 
```

我从搜索调用中得到模型......我知道我做错了什么......有人可以给我一个简单的例子来说明如何将一个简单的对象变成 json 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:41:30.257

我建议您查看[Google 的 gson 库。](http://code.google.com/p/google-gson/)我在使用 JSON 时使用了它，并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:29:46.557

好吧，我只是使用了一个字符串生成器和一个好的 JSON 调试器来获取正确的字符串，而且它看起来好像可以工作......

# insert - sed 在两个模式匹配之间插入字符

> ID：11439197
> 
> 赞同：2
> 
> 时间：2012-07-11T18:37:53.810
> 
> 标签：insert, sed

我正在处理这个包含数百行的文本文件，看起来像下面的精简版本：

```
# <block_uid>   # <freq> <memop> <fpop> <insn> <line> <fname> <perc>
3941319690354688    # 776547959  2.232946   0
3941427129090048    # 465293088 40  37  74 4.215079 0 
3941427110739968    # 465558912 36  35  68 
```

我正在尝试使用 sed在每行之间和每行上插入**dfpattern** ，因为文件太大需要手动完成。所以在 16 位模式之后和 ie 之前它看起来像这样：`3941319690354688``# 776547959``#`

```
# <block_uid>   # <freq> <memop> <fpop> <insn> <line> <fname> <perc>
3941319690354688 dfpattern  # 776547959  2.232946   0
3941427129090048 dfpattern  # 465293088 40  37  74 4.215079 0
3941427110739968 dfpattern  # 465558912 36  35  68 
```

我是 sed 的新手，我无法想出摆弄的命令，所以我正在寻求帮助。您能否简要解释一下您发布的命令，以便我从中学习。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:43:39.480

尝试以下命令。它从行首 ( `^`) 开始匹配任意数量的数字，后跟具有相同内容的空格 ( ) 并附加`\1`文字。`dfpattern`

```
sed -e 's/^\([0-9]*[ ]\)/\1dfpattern /' infile 
```

输出：

```
# <block_uid>   # <freq> <memop> <fpop> <insn> <line> <fname> <perc>
3941319690354688 dfpattern    # 776547959  2.232946   0
3941427129090048 dfpattern    # 465293088 40  37  74 4.215079 0 
3941427110739968 dfpattern    # 465558912 36  35  68 
```

# jquery - Jquery .on() 不工作

> ID：11439199
> 
> 赞同：6
> 
> 时间：2012-07-11T18:38:01.783
> 
> 标签：jquery, internet-explorer-9

我有以下内容：

```
<input type="submit" id="submit" value="Submit" /> 
```

在 jQuery 内部，我有以下内容：

```
<script type="text/javascript">
$(document).ready(function () {
    $("#submit").on("click", function () { 
        alert('test');
    });
});
</script> 
```

这行不通。我正在使用 IE9。

可能有人知道支持哪个版本的 Jquery`.on()`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T18:40:17.923

使用这个版本的`on`

```
$(function(){
   $(document).on("click","#submit", function (e) { 
    //e.preventDefault();  // if you want to prevent default form submission
     alert('test');
   });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:40:13.953

确保您加载`jQuery.js`然后尝试：

```
$("#submit").click(function(){
   alert("test");
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:41:49.540

尝试以下替代方案：

```
 $('#submit').bind('click', function() {
  alert('Test');
}); 
```

或者

```
$("#submit").click(function(){
   alert("Test");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T18:43:14.143

IE 在使用“保留”名称作为元素 ID 时表现不佳。

看到这个小提琴，如果你将输入的 ID 更改为不同于“#submit”的东西，你的代码会很好用

[http://jsfiddle.net/6yAuz/3/](http://jsfiddle.net/6yAuz/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T19:04:41.867

确保您所指的“提交”元素在文档加载时确实存在。如果您是动态创建它，“on”函数将没有任何东西可以绑定到它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-30T20:37:15.250

我在兼容模式下使用 IE9 时遇到了这个问题。请注意，在常规模式下使用 IE9 时我没有问题。

我能够对我刚刚启动的网站进行更彻底的 QA（除了使用屏幕截图服务之外，时间不允许进行太多的跨浏览器测试）。将 $("something").on("click"...) 更改为 $("something").click() 解决了这个问题。

# jquery - 我需要在打印时隐藏共享点项目的某些方面

> ID：11439201
> 
> 赞同：1
> 
> 时间：2012-07-11T18:38:07.900
> 
> 标签：jquery, sharepoint, printing

特别是我需要隐藏保存/取消按钮和一些图像，如日期选择器。任何帮助将不胜感激。谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:42:02.353

创建打印样式表...

```
<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

例如，在此样式表中，您可以执行此操作...

```
button {
  display: none;
} 
```

在你的 CSS 文件中有一个像这样的部分会**更好......**

```
@media print {
   button: display: none;
} 
```

这将为您节省一个额外的 http 请求，因为浏览器总是下载打印样式表，而不仅仅是在您打印时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:40:53.813

您可能希望包含一个用于打印的单独样式表，语法如下：`<link rel="stylesheet" href="nameofsheet.css" type="text/css" media="print" />`. 在其中，您可能希望为不希望在 print 上显示的按钮和图像赋予`display:none`.

# .net - c++中的invokeOnClick错误

> ID：11439205
> 
> 赞同：0
> 
> 时间：2012-07-11T18:38:17.543
> 
> 标签：.net, winforms, visual-studio-2010, visual-c++, c++-cli

这是我的代码：

```
if (r->Value == "Off"){
     if (checkBox1->Checked)
          checkBox1->Control::InvokeOnClick(checkBox1,EventArgs::Empty);
}
else if (r->Value == "Off") {
     if (!checkBox1->Checked)
          checkBox1->Control::InvokeOnClick(checkBox1,EventArgs::Empty);
} 
```

和错误：

```
1>c:\users\lukasz\desktop\project\General.h(2204): error C3767: 'System::Windows::Forms::Control::InvokeOnClick': candidate function(s) not accessible
1>c:\users\lukasz\desktop\project\General.h(2208): error C3767: 'System::Windows::Forms::Control::InvokeOnClick': candidate function(s) not accessible 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:40:18.927

您没有收到最大的编译器错误消息。但很难责怪它，你是在最大限度地把它弄糊涂。您应该在 之后使用成员的名称`checkbox1->`。相反，您指定了一个*类*名 Control。

请避免寻找从代码中单击控件的方法，这是用户所做的事情。InvokeOnClick 不可访问的事实并非偶然。此处的目的是设置 Checked 属性。所以只需设置它：

```
 if (r->Value == "Off") checkBox1->Checked = false;
 else if (r->Value == "On") checkBox1->Checked = true; 
```

猜测最初的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:51:38.667

好吧，`Control`应该是一个类的名称，以便能够通过 调用其静态成员函数`::`，但它显然不是一个类。要么`Control`是对象，要么是指向对象的指针，我认为您不能`::`与它一起使用。只是从 C++ 的角度推理这个问题（最初）被标记了。

# ruby-on-rails - Rails：安装 pg gem 时出错

> ID：11439207
> 
> 赞同：21
> 
> 时间：2012-07-11T18:38:27.103
> 
> 标签：ruby-on-rails, postgresql

> **可能重复：**
> [Postgres - “pg” gem 的最新版本 0.14.0 给出错误](https://stackoverflow.com/questions/11172264/postgres-the-last-version-0-14-0-of-the-pg-gem-gives-error)

我是新来的铁路。我想使用 PostgreSQL，因为 Heroku 也使用它，但是我在安装`pg`gem 时遇到了麻烦。显然，某些文件丢失并且无法创建 Makefile？

我的 gem 文件如下所示：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'
gem 'faker', '1.0.1'
gem 'pg', '0.12.2'
gem 'json'

group :development, :test do
  gem 'rspec-rails', '2.10.0'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '1.4.0'
end 
```

当我运行`bundle install`时，安装 pg gem 时出现以下错误：

```
 Installing pg (0.14.0) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb 
checking for pg_config... yes
Using config values from /usr/local/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

Gem files will remain installed in /Users/KennyGWang/.bundler/tmp/18833/gems/pg-0.14.0 for inspection.
Results logged to /Users/KennyGWang/.bundler/tmp/18833/gems/pg-0.14.0/ext/gem_make.out
An error occured while installing pg (0.14.0), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.0'` succeeds before bundling. 
```

我使用自制软件安装了 postgresql `brew install postgresql`，因此`which psql`给了我`/usr/local/bin/psql`

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-11T19:32:21.240

你在 Mac 上吗？如果是这样 - 最简单的方法是

1.  确保您已安装 Xcode（您可以从应用商店获取）
2.  使用[自制软件](https://brew.sh/)
3.  `brew install postgresql`
4.  `gem uninstall pg`
5.  在`bundle install`您的应用程序的根目录中或`gem install pg`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-11T19:42:15.340

安装postgresql的步骤

1.  安装 PostgreSQL 及其库

    ```
    sudo apt-get install postgresql postgresql-contrib libpq-dev 
    ```

2.  安装后为postgresql创建一个用户

    ```
    sudo -u postgres createuser --superuser $USER 
    ```

    或者

    ```
    sudo -u postgres createuser pgs_root 
    ```

3.  为 postgresql 用户设置用户密码

    ```
    sudo -u postgres psql postgres --set "user=$USER"
    postgres=# \passsword :user 
    ```

    或者

    ```
    sudo -u postgres psql postgres
    postgres=# \passsword pgs_root 
    ```

4.  配置 postgresql.conf 文件以使 PostgreSQL 侦听 localhost 或侦听外部 IP 或其他内容，将此行更改为 IP 或 'localhost'

    ```
    gedit /etc/postgresql/8.4/main/postgresql.conf listen_addresses = 'localhost' 
    ```

* * *

与 mysql 查询浏览器一样，postgresql 也有一个名为 pgadmin 的 GUI。要安装运行此命令

```
sudo apt-get install pgadmin3 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T18:44:13.750

尝试包括这个而不是 pg

```
gem install postgres-pr 
```

或者

```
gem install ruby-pg 
```

编辑

你已经这样做了吗？

```
$ sudo apt-get install postgresql

$ rails new pg -d postgres 
```

> [http://www.funonrails.com/2011/03/getting-started-with-rails-3-postgres.html](http://www.funonrails.com/2011/03/getting-started-with-rails-3-postgres.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:10:08.860

您是否按照您包含的错误中的建议检查了日志 mkmf.log？

由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。

# jquery - 为什么 jquery.validate 似乎不适用于用户控件？

> ID：11439209
> 
> 赞同：1
> 
> 时间：2012-07-11T18:38:38.577
> 
> 标签：jquery, asp.net, webforms

我正在编写一个用户控件，它使用 jquery.validate 而不是验证控件来处理必填/电子邮件字段。我建立了一个快速测试页面，一切正常。但是，如果我将一些功能提取到 Web 控件中并将其拖放到页面上，那么代码隐藏中的 if(Page.IsValid) { } 检查似乎总是正确的，并且所有验证似乎都不再有效。这是我用于 Web 控件的代码：

前端：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="TestControl.ascx.cs" I          nherits="JqueryValidateTest.TestControl" %>
<div id="control-wrapper">
    <asp:TextBox ID="txtName" runat="server" ClientIDMode="Static"></asp:TextBox>
    <asp:TextBox ID="txtEmail" runat="server" ClientIDMode="Static"></asp:TextBox>
    <asp:Button ID="btnSubmit" runat="server" Text="Submit" 
        onclick="btnSubmit_Click" />
</div> 
```

代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{

}

protected void btnSubmit_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
        Response.Write("Page is valid");
    else
        Response.Write("Page is not valid");
} 
```

这是控件拖放到的页面的 html/js：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="JqueryValidateTest.Default" %>

<%@ Register Src="TestControl.ascx" TagName="TestControl" TagPrefix="uc1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">
        input.valid
        {
            border: 2px solid lime;
        }
        input.error
        {
            border: 2px solid red;
        }
    </style>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js">     </script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
        jQuery.validator.messages.required = "";
        jQuery.validator.messages.email = "";
        $('#form1').validate({
            rules:
            {
                txtName: {
                    required: true
                },
                txtEmail: {
                    required: true,
                    email: true
                }
            },
            messages: {}
        });
    });
    </script>
</head>
<body>
<form id="form1" runat="server">
<div>
    <uc1:TestControl ID="TestControl1" runat="server" />   
</div>
</form>
</body>
</html> 
```

我认为这可能与控件的 id 更改有关，但我已将 ClientIDMode 更改为 static，它们似乎保持不变。

有谁知道为什么会失败？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:45:41.680

用这个 ：

```
<%= txtName.UniqueID %> {
                required: true
            },
 <%= txtEmail.UniqueID %> : {
                required: true,
                email: true
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T21:49:13.293

您的控件 ID 是在 NamingController 层次结构之后动态命名的，其中 UserControl

第一个解决方案：您可以`ClientIDMode=static`为您的字段或 Page 或 UserControl 使用（但您必须注意不要将两个控件命名相同）。

第二种解决方案：在您的用户控件中添加 javascript 验证规则，参考`ClientID`此未经测试的代码中的控件：

```
$(function () {
    $('#form1').rules("add",
        {
            <%= txtName.ClientID %>: {
                required: true
            },
            <%= txtEmail.ClientID %>: {
                required: true,
                email: true
            }
        }
    );
}); 
```

# objective-c - NSSring 错误

> ID：11439210
> 
> 赞同：0
> 
> 时间：2012-07-11T18:38:41.397
> 
> 标签：objective-c, nsstring

我对 Objective-c 很陌生，我遇到了一个基本错误，不确定如何修复它。

```
 for(ZBarSymbol *sym in syms) {
        resultText.text = sym.data; //sym.data = 0012044012482
        [self phpPost:(int)sym.data];
        break;
    }
}

- (void)phpPost: (int)barcode {
    NSString *theValue = [NSString stringWithFormat:@"%@", barcode]; //problem line
    labelScan.text = theValue;
    //labelScan.text = @"Barcode scanned";
} 
```

当我使用@"%@" 时，标签的文本是正确的（0012044012482），但是当我使用@"%d" 时它不是（每次我重新启动应用程序时的随机数）。我想使用 @"%@" （或有效的东西），但由于某种原因，xCode 给了我一个错误。而且我不确定如何解决该错误。

错误是：

> 格式指定类型“id”，但参数的类型为“int”

最后，我计划使用 POST 方法将该代码（sym.data）写入 MySQL 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:43:05.527

如果它是一个对象（如果格式说明符没有导致崩溃`int`，则它必须是） ，您不能只是通过强制转换将它转换为。`%@`

假设您将它直接分配给一个标签`text`，它是一个`NSString`，您应该更改参数类型`phpPost:`

```
- (void)phpPost: (NSString *)barcode {
    labelScan.text = barcode; 
} 
```

或提取`intValue`之前通过`sym.data`：

```
 [self phpPost:[sym.data intValue]]; 
```

然后`%d`在`phpPost:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:42:27.000

您的条形码不是`int`，而是`NSString`。与其做`(int)sym.data`，不如传入`[sym.data intValue]`。那应该正确地将其转换为整数。

你得到一个随机数的原因是你不能只将字符串对象转换为原始数据类型:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:42:19.690

我不知道类型`sym.data`是什么，但它可能是指向对象的指针，而不是值本身。您将该指针转换为`int`，因此当您使用时，您实际上`%d`是在打印对象的内存位置。这就是为什么每次运行程序时它都会发生变化的原因（Objective-C 让您在没有任何警告的情况下执行此操作 - 需要注意的事情）。

`sym.data`要解决此问题，请使用对象的属性从对象中提取所需的整数值；或将对象作为指针传递。例如，您可以尝试像这样调用您的方法：

```
[self phpPost:sym.data]; 
```

然后将您的方法更改为：

```
- (void)phpPost: (id)barcode {
    NSString *theValue = [NSString stringWithFormat:@"%@", barcode];    
    labelScan.text = theValue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T02:21:27.713

好吧，我今天上班的时候想了想，发现 INT 不适合我。如果我将该对象设为 int，我会丢失一些对我正在做的事情至关重要的数据。例如。对象=001234 整数=1234。我需要零。所以，最后，我将它保留为一个对象（字符串）并将其传递给函数。

这是我正常工作后的代码。

```
for(ZBarSymbol *sym in syms) {
        resultText.text = sym.data;
        [self phpPost:sym.data];
        break;
    }
}

- (void)phpPost: (NSString *)barcode {
    labelScan.text = barcode;
    //labelScan.text = @"Barcode scanned"; //My custon label
} 
```

感谢大家的回应。您的答案不会被使用。我相信我很快就会在这里需要这些信息。

哦，如果您发现我做错了，或者方法不正确，请发表评论并告诉我。

# javascript - jqplot 用相同的名称和颜色对多个数据系列进行分组和标记

> ID：11439211
> 
> 赞同：2
> 
> 时间：2012-07-11T18:38:41.317
> 
> 标签：javascript, jquery, jqplot

我有一个填充了六个数据系列的矩阵，我想用相同的名称标记前五个“进程 a”（也给它们相同的颜色），而左边的一个标记为“进程 b”。那么有没有办法在 jqplot 中做到这一点？感谢您的任何建议。

这是代码和[演示](http://jsfiddle.net/JWhmQ/300/)：

```
$(document).ready(function(){
        $.jqplot.config.enablePlugins = true;

        s1 = [[10.0, 11.0, 11.0, 12.0, 12.0, 14.0], [10.0, 11.0, 12.0, 12.0, 12.0, 12.0], [10.0, 13.0, 14.0, 15.0, 15.0, 16.0], [10.0, 10.0, 11.0, 11.0, 11.0, 12.0], [10.0, 10.0, 11.0, 12.0, 12.0, 12.0]];
        s2 = [10.0, 10.4, 10.816, 11.248640000000002, 11.698585600000003, 12.166529024000004];

        s1.push(s2);
        $.jqplot('chart1', s1, {

            seriesDefaults: { 
            showMarker:false,
             pointLabels: { show:false } ,
              },

            series:[
            {label:'Process A'},{label:'Process B'}
            ],

             legend: {
                  show: true,
                  location: 'nw',
                  placement: 'inside',
                fontSize: '11px'
            } 
        })   
    })​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:22:13.123

是的，有办法。[我想这就是你想要的。](http://jsfiddle.net/Boro/JWhmQ/319/) 你已经走在正确的轨道上了。您只需要相应地为每个系列重复设置标签和颜色，如代码示例或以下所示：

```
series:[
  {label:'Process A', color: 'red'}, {label:'Process A', color: 'red'}, {label:'Process A', color: 'red'}, {label:'Process A', color: 'red'}, {label:'Process A', color: 'red'}, {label:'Process B',color:'blue'}
] 
```

* * *

**编辑：**

[这是我展示如何操纵图例的答案。](https://stackoverflow.com/a/10428650/613495)

另请找到此示例，扩展其他答案的代码。[该示例显示了如何隐藏索引为 1 的图例。](http://jsfiddle.net/Boro/NYewy/45/)`jQuery`基本上，您可以使用's 方法获取样本和标签并隐藏它们`hide()`：

```
var swatches = $('table.jqplot-table-legend tr td.jqplot-table-legend-swatch');
var labels = $('table.jqplot-table-legend tr td.jqplot-table-legend-label');
$(swatches[1]).hide();
$(labels[1]).hide(); 
```

# asp.net-mvc - 没有为此对象定义无参数构造函数？

> ID：11439212
> 
> 赞同：3
> 
> 时间：2012-07-11T18:38:46.840
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我在发布表单时遇到了上述错误，我认为导致错误的根本原因是“DropDownListFor”，其中多次调用了 SelectList，如果是，请提出解决方案？

如果我从“x=>x.Values”更改为“x=>x.Name”，那么还会出现错误“没有具有键 'DDLView.Name' 的 'IEnumerable' 类型的 ViewData 项。”

**编辑器模板**

```
@model DropDownListViewModel

@Html.LabelFor(x=>x.Values, Model.Label)
@Html.DropDownListFor(x=>x.Values, Model.Values) 
```

**查看模型**

```
public class HomePageViewModel
{
    public DropDownListViewModel DDLView { get; set; }
}

public class DropDownListViewModel
{
    public string Label { get; set; }
    public string Name { get; set; }
    public SelectList Values { get; set; }
} 
```

**控制器**

```
public ActionResult Index()
    {
        HomePageViewModel homePageViewModel = new HomePageViewModel();

        homePageViewModel.DDLView = new DropDownListViewModel
                                        {
                                            Label = "drop label1",
                                            Name = "DropDown1",
                                            Values = new SelectList(
                                                         new[]
                                                             {
                                                                 new {Value = "1", Text = "text 1"},
                                                                 new {Value = "2", Text = "text 2"},
                                                                 new {Value = "3", Text = "text 3"},
                                                             }, "Value", "Text", "2"
                                                         )
                                        };
}

[HttpPost]
    public ActionResult Index(HomePageViewModel model)
    {
        return View(model);
    } 
```

**看法**

```
@model Dynamic.ViewModels.HomePageViewModel
@using (Html.BeginForm())
{
@Html.EditorFor(x=>x.DDLView)

<input type="submit" value="OK" /> 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T22:04:22.663

问题是 SelectList 没有无参数构造函数，模型绑定器无法实例化它，但您正试图将其发回。

要解决您的问题，请在实施中更改 2 件事：

1）更改编辑器模板

```
 @Html.DropDownListFor(x=>x.Values, Model.Values) 
```

至

```
 @Html.DropDownListFor(x=>x.ValueId, Model.Values) 
```

2）在你原来的 DropDownListViewModel 旁边添加

```
[ScaffoldColumn(false)]
public string ValueId { get; set; } 
```

现在您的 post action 参数将填充正确的值。

# python - 用其他元素的总和分配一个列表元素

> ID：11439213
> 
> 赞同：3
> 
> 时间：2012-07-11T18:38:49.197
> 
> 标签：python, arrays, for-loop, matrix

我有一个二维矩阵，它可以是任何大小，但总是一个正方形。我想遍历矩阵并为每个对角线元素（`x`在示例中）我想分配值，`1-sum_of_all_other_values_in_the_row`例如

```
Mtx = [[ x ,.2 , 0 ,.2,.2]
       [ 0 , x ,.4 ,.2,.2]
       [.2 ,.2 , x , 0, 0]
       [ 0 , 0 ,.2 , x,.2]
       [ 0 , 0 , 0 , 0, x]]

for i in enumerate(Mtx):
    for j in enumerate(Mtx):
        if Mtx[i][j] == 'x'
            Mtx[i][j] = 1-sum of all other [j]'s in the row 
```

我不知道如何获得每行中 j 的总和

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:43:49.887

```
for i,row in enumerate(Mtx): #same thing as `for i in range(len(Mtx)):`
    Mtx[i][i]=0
    Mtx[i][i]=1-sum(Mtx[i])

    ##could also use (if it makes more sense to you):
    #row[i]=0
    #Mtx[i][i]=1-sum(row) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:43:08.227

你可以这样做：

```
from copy import copy
for i, row in enumerate(Mtx):
    row_copy = copy(row)
    row_copy.pop(i)
    row[i] = 1 - sum(row_copy) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:48:03.270

```
mtx = [[ 0 ,.2 , 0 ,.2,.2],
       [ 0 , 0 , .4 ,.2,.2,],
       [.2 ,.2 , 0 , 0, 0],
       [ 0 , 0 ,.2 , 0,.2],
       [ 0 , 0 , 0 , 0, 0]]
for i in range(len(mtx)):
    summ=sum(mtx[i])
    mtx[i][i]=round(1-summ,2) #use round to get 0.4 instead of .39999999999999999
print(mtx) 
```

**输出：**

```
[[0.4, 0.2, 0, 0.2, 0.2], [0, 0.2, 0.4, 0.2, 0.2], [0.2, 0.2, 0.6, 0, 0], [0, 0, 0.2, 0.6, 0.2], [0, 0, 0, 0, 1.0]] 
```

# image - 图像云准备好用于 openstack

> ID：11439214
> 
> 赞同：5
> 
> 时间：2012-07-11T18:38:50.057
> 
> 标签：image, cloud, openstack

我对要在 openStack 上挂载的图像有疑问。我可以使用任何操作系统的任何图像吗？我想不是……但为什么呢？我发现镜像已经适合 openStack，但是云就绪镜像和普通镜像有什么不同呢？

例如，我可以创建一个带有 windows 桌面的虚拟机吗？如果不是，为什么？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T22:17:39.203

发行版制造商已经定制了云就绪映像，以便在诸如 OpenStack、EC2、kvm 和 LXC（严格来说不是虚拟机管理程序）等管理程序下运行良好，而不是在物理硬件上运行。这需要删除仅在物理环境（如无线驱动程序等）中需要的包，并添加在云环境中有用的包。例如，在启动过程中，云就绪映像会从环境中下载元数据，例如主机名和网络信息。此数据用于在新实例首次启动时“个性化”它。

如果你真的想深入了解细节，[Ubuntu UEC 映像页面](https://help.ubuntu.com/community/UEC/Images)有很多关于 Ubuntu 云映像组成的详细信息以及其他信息，例如如何自己构建一个。

我确信你可以创建一个运行 Windows 桌面的虚拟机，但我从来没有机会这样做。如果您查看[有关 Windows 的 Amazon 页面](http://aws.amazon.com/windows/)，所有关于运行服务器应用程序（如 SQL Server 和 ASP.NET 应用程序）的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:57:32.277

正如 Everett Toews 在上面的评论中指出的那样，使图像云就绪的主要事情之一是它可以在启动时从元数据服务器检索数据。这用于检索私钥和收集用户数据等事情。

除了[CloudInit 之外](https://help.ubuntu.com/community/CloudInit)，还有[Condenser](https://github.com/yahoo/Openstack-Condense/)。或者，您可以自己滚动。OpenStack 使用与 Amazon EC2 元数据服务相同的协议，因此[EC2 元数据文档](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/AESDG-chapter-instancedata.html)解释了如何访问这些数据。

# java - 群发邮件应用程序 java 与 php

> ID：11439216
> 
> 赞同：-3
> 
> 时间：2012-07-11T18:38:56.863
> 
> 标签：java, php, sendmail, qmail, massmail

我需要构建一个群发邮件应用程序来每天发送大约 20 封 lacs 邮件。我需要一些关于 php 和 java 之间技术选择的建议。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:44:58.897

要么工作。

Java 通常适用于较大的项目，因为它是强类型的并且有利于协作，但是一个群发邮件应用程序可能足够简单，以至于没有必要这样做。

大多数人认为用 PHP 做 web 东西更容易，所以如果你想把它放在网站上，你可能想使用 PHP。

# c# - 如何创建子对象的 Expression.Property

> ID：11439218
> 
> 赞同：9
> 
> 时间：2012-07-11T18:39:11.030
> 
> 标签：c#, linq, expression-trees, expression, func

通常我以这种方式创建一个表达式。

```
ParameterExpression pe = Expression.Parameter(typeof(object1), "x");

string Name = "property1";

MemberExpression left = Expression.Property(pe, (object1).GetProperty(Name)); 
```

它产生`left = x => x.property1`

我需要知道如何生产

`left = x => x.Object2.property1`

如果名称 = "Object2.property1"; object2 是 object1 的子对象

提前致谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-11T19:13:53.167

我不太明白你想要什么。它是一个属性链（比如：x.Prop1.Prop2）吗？

```
var pe = Expression.Parameter(typeof(object1));
var property1 = typeof(object1).GetProperty(Name1);
var property2 = property1.PropertyType.GetProperty(Name2);
var inner = Expression.Property(pe, property1);
var outer = Expression.Property(inner, property2); 
```

# php - 无法让“get_the_title”在函数中工作

> ID：11439220
> 
> 赞同：0
> 
> 时间：2012-07-11T18:39:13.810
> 
> 标签：php, wordpress

我在其他功能中使用过它，但它似乎不适用于这个特定的功能......

```
 <?php
      $page = get_the_title();
      $blogusers = get_users('orderby=display_name');
      foreach ($blogusers as $user) {
        $cpt_count = wpse31443_author_has_custom_post_type( $user->ID, $page );

        if (!empty($cpt_count)) {
          echo '<li>' . $user->display_name . '' . $cpt_count1 . '</li>';
        }
      }
    ?> 
```

如果我 `$page = get_the_title();`改为 `$page = 'title';`然后它可以工作，所以它是 get_the_title(); 但我不确定是什么，因为它已在其他功能中起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:08:49.967

“get_the_title()”不起作用的最常见原因是它不在“循环”中。确保仅从循环内调用该函数。如果从其他地方调用，您需要将页面/帖子 ID 传递给函数。

您将在此处获得更多信息：http: [//codex.wordpress.org/Function_Reference/get_the_title](http://codex.wordpress.org/Function_Reference/get_the_title)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T19:52:35.270

试试这个：

```
<?php
  global $post;

  $page = $post->post_title;
  $blogusers = get_users('orderby=display_name');
  foreach ($blogusers as $user) {
    $cpt_count = wpse31443_author_has_custom_post_type( $user->ID, $page );

    if (!empty($cpt_count)) {
      echo '<li>' . $user->display_name . '' . $cpt_count1 . '</li>';
    }
  }
?> 
```

# javascript - 使动态宽度表的标题居中

> ID：11439222
> 
> 赞同：0
> 
> 时间：2012-07-11T18:39:20.210
> 
> 标签：javascript, jquery, css

我有一个动态宽度的标题，我希望它在中心`table`，但不能`inline-block`正常工作，`inline`让它在中心，而`td`不是在所有桌子的中心，我怎样才能让它在桌子的中心？这是此 html 的示例：

```
<table class="hours-table" style="width: 100%;" border="0"><caption>Title</caption>
<tbody>
<tr>
<td>1_1</td>
<td>1_2</td>
<td>1_3</td>
<td>1_4</td>
<td>1_5</td>
</tr>
<tr>
<td>2_1</td>
<td>2_2</td>
<td>2_3</td>
<td>2_4</td>
<td>2_5</td>
</tr>
<tr>
<td>3_1</td>
<td>3_2</td>
<td>3_3</td>
<td>3_4</td>
<td>3_5</td>
</tr>
<tr>
<td>4_1</td>
<td>4_2</td>
<td>4_3</td>
<td>4_4</td>
<td>4_5</td>
</tr>
<tr>
<td>5_1</td>
<td>5_2</td>
<td>5_3</td>
<td>5_4</td>
<td>5_5</td>
</tr>
</tbody>
</table> 
```

非常感谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:46:25.020

如果您希望它在中心垂直和水平对齐，您可以使用以下 CSS：

```
table { position: relative; }
caption {
    ​position: absolute;
    top: 50%;
    left: 50%;
    margin: -0.5em -10px; /* Change the -10px part depending on length of title */
}​ 
```

[jsFiddle](http://jsfiddle.net/TxDdv/)

如果您只希望它水平对齐（在表格的顶部，您可以使用：

```
caption { text-align: center; } 
```

[​jsFiddle](http://jsfiddle.net/TxDdv/1/)

**编辑：**这是一个解决方案，它允许在居中的标题后面设置背景，但也可以在标题的文本部分后面创建一个白色背景：

*HTML*

```
<caption>Title</caption> 
```

*CSS*

```
div { background: url('background_image.jpg') repeat; }
caption {
    text-align: center;
    background: rgba(0,0,0,0);
}
span { background: white; } 
```

*JS*

```
$(function() {
    var caption = $('caption');
    caption.html('<span>' + caption.html() + '</span>');
    });​ 
```

[jsFiddle](http://jsfiddle.net/TxDdv/5/)

# android - Droidwall iptables：只允许访问一个网站并重定向到代理

> ID：11439230
> 
> 赞同：3
> 
> 时间：2012-07-11T18:39:50.527
> 
> 标签：android, linux, iptables

背景信息：我已经植根了一部 android 手机并安装了 droidwall 以访问 iptables。内核版本为 2.6.35.7-perf。

目标：通过比较使用和不使用代理的流量来测试代理（在端口 8080 上）的效率。

方法：我在单个 IP 地址上创建了一个测试网站。我正在使用一个应用程序来监控手机发送和接收了多少数据包/字节。

问题：由于未知的背景流量，正在发送和接收不需要的数据包。

解决方案：使用 iptables 只允许连接到一个网站，这样我就可以正确监控流量。

在没有代理的情况下，我可以使用[此处](https://serverfault.com/questions/218707/iptables-rules-to-allow-http-traffic-to-one-domain-only)的规则将连接单独限制到我想要的网站。

在另一个测试中，我可以使用以下 iptable 规则通过代理移动不受限制的流量：

> iptables -t nat -A OUTPUT -p tcp --dport 80 -j ACCEPT -m owner --uid-owner root
> iptables -t nat -A OUTPUT -p tcp --dport 80 -j REDIRECT --to-port 8080

我如何整合这两组规则以将流量从 1.2.3.4（示例）重定向到端口 8080 并丢弃其他所有内容。

任何帮助深表感谢。谢谢！

卢克

# php - Android 应用程序 - HTTPPost 没有按我的意愿行事

> ID：11439231
> 
> 赞同：-2
> 
> 时间：2012-07-11T18:39:57.137
> 
> 标签：php, android, android-intent, http-post, httpresponse

我目前正在使用 Android SDK 和 PHP 服务器端脚本为我的网站开发应用程序。

我正在尝试通过 a和请求发送 POST 数据`username`并获取结果（）。不幸的是，它无法正常工作。请求已发送，结果由我的 PHP 脚本发回，但尚未工作。`password``HttpClient``HttpPost``echo $result;``HttpResponse``Intent`

这是我的 PHP 代码（我隐藏了我的数据库信息，你会明白为什么！）：

```
<?php
    $con = mysql_connect('localhost','','');
    mysql_select_db('', $con);

    $username = $_POST['username'];
    $password = $_POST['password'];

    $users = mysql_query("SELECT * FROM `` WHERE `username`='".$username."' AND `password`='".$password."'");
    if (mysql_num_rows($users) == 1)
    {
        $usr = mysql_fetch_array($users);
        $usr['username'];
    }
    else
    {
        echo "error";
    }
?> 
```

还有我的 Java`login()`方法：

```
public void login()
    {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.creationsmicroweb.com/app/login.php");

        String username = (String) findViewById(R.id.usr1).toString();
        String password = (String) findViewById(R.id.pwd1).toString();
        Button login = (Button) findViewById(R.id.button1);

        try
        {
            // Disabling other request
            login.setEnabled(false);
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("username", username));
            nameValuePairs.add(new BasicNameValuePair("password", password));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            Log.w("http", "Executing HTTP Post Request");
            HttpResponse response = httpclient.execute(httppost);

            String status = inputStreamToString(response.getEntity().getContent()).toString();
            Integer code = response.getStatusLine().getStatusCode();

            if (!status.toString().equalsIgnoreCase("error"))
            {
                Intent myIntent = new Intent(this.getBaseContext(), HomeActivity.class);
                myIntent.putExtra("username", status);
                startActivityForResult(myIntent, 0);
                Toast.makeText(this, "You've been connected!", Toast.LENGTH_LONG).show();
                Log.i("login", "Logged in // " + response);
            }
            else
            {
                Toast.makeText(this, "Bad username/password", Toast.LENGTH_LONG);
                Log.i("login", "Bad username/password // " + response);
                login.setEnabled(true);
            }

        }
        catch (ClientProtocolException e)
        {
            Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
            Log.e("http", e.getMessage());
            login.setEnabled(true);
        }
        catch (IOException e)
        {
            Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
            Log.e("http", e.getMessage());
            login.setEnabled(true);
        }
    }

    private Object inputStreamToString(InputStream is)
    {
        // TODO Auto-generated method stub
        String line = "";
        StringBuilder total = new StringBuilder();
        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        // Read response until the end
        try
        {
            while ((line = rd.readLine()) != null)
            { 
                total.append(line); 
            }
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
         // Return full string
        return total;
    } 
```

PHP 返回的响应无法与我的 Java 代码一起正常工作。很明显，当用户按下“登录”时，凭据被发送到 PHP，然后 PHP 返回一个答案（用户名或错误）。之后，Java 代码检查答案是否等于“错误”，但这不起作用。登录成功（我记录了所有内容），但 Intent 方法没有执行，并且没有显示 Toast 消息。

很明显，我想知道为什么请求不能正常工作。我从 Java 开始，所以我不是最好的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:27:04.853

你有看到`Toasts`吗？如果不是，那么我认为您可能`context`对他们也有错误的这一行：

```
Toast.makeText(this, "Bad username/password", Toast.LENGTH_LONG); 
```

你错过了`.show()`。

如果这是在视图中，则使用`getContext()`or`getBaseContext()`代替`this`.

我建议您使用`Log.d()`记录响应并检查它是否符合您的期望。

# android - 在 Windows 7 中创建战争文件

> ID：11439235
> 
> 赞同：3
> 
> 时间：2012-07-11T18:40:08.590
> 
> 标签：android, ant, war, google-cloud-messaging, java-war

我正在尝试设置 GCM 演示应用程序。[http://developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

我被困在试图创建一个战争文件：在一个 shell 窗口中，转到 gcm-demo-server 目录。

通过运行 ant war 生成服务器的 WAR 文件：

我使用的是 Windows 7，我该如何创建这个 war 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:45:04.740

创建一个名为**build.bat**的批处理程序，其中包含以下内容：

```
call ant war
pause 
```

这将启动一个 shell 窗口，您将在其中看到 ANT 输出。

**笔记：**

*   这假设 ANT 已正确安装，并且“ant”可执行文件在用户的 PATH 中可用

# jquery - 如何取消绑定悬停状态但将其恢复为其他状态？

> ID：11439236
> 
> 赞同：1
> 
> 时间：2012-07-11T18:40:10.353
> 
> 标签：jquery

我希望发生的是这样的

我将鼠标悬停在元素上，它们的标题就会出现。这很容易。

但我也想单击元素并保持悬停状态，而其他元素仍然具有悬停效果。

我似乎无法正确完成第二步。单击其他元素后，我不知道如何重新添加悬停状态。

这是我到目前为止所拥有的：

[http://jsfiddle.net/62cRZ/1/](http://jsfiddle.net/62cRZ/1/)

谢谢

编辑：抱歉描述不好。这就是我的意思。好的，所以有 image1 和 image2 当我单击 image1 时，标题保持不变，不再淡出。当我将鼠标悬停在 image2 上时，标题会淡入淡出。

现在我点击 image2，标题现在保持不变，不再褪色。但是当您将鼠标悬停在进出时，image1 的淡入淡出标题会返回到淡入淡出的原始状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:53:04.323

您可以向“活动”标题添加一个类，而不是取消绑定悬停动作，然后在悬停动作中检查它：

```
$('.pic').hover(function() {
    var caption = $(".caption",this);
    if ( ! caption.hasClass("active") ) { 
        caption.stop().fadeIn();
    }
},
function() {
    var caption = $(".caption",this);
    if ( ! caption.hasClass("active") ) { 
        caption.stop().fadeOut();
    }
});

$('.pic').click(function() {
    //fade out all other captions that have kept their hover states/ This wasn't the first pic clicked on
    $('.caption').fadeOut().removeClass("active");

    //fade in only this caption when clicked
    $(".caption", this).fadeIn().addClass("active");

});​ 
```

示例：http: [//jsfiddle.net/bstakes/62cRZ/9/](http://jsfiddle.net/bstakes/62cRZ/9/)

# domain-driven-design - 在以下模型中，地址不应该是值对象吗？

> ID：11439244
> 
> 赞同：2
> 
> 时间：2012-07-11T18:40:30.400
> 
> 标签：domain-driven-design, entity, value-objects

从[值对象如何存储在数据库中？](https://stackoverflow.com/questions/679005/how-are-value-objects-stored-in-the-database/)：

> 假设公司和个人都具有相同的邮件地址。这些陈述中哪些认为有效？
> 
>    1.“如果我修改 Company.Address，我希望 Person.Address 自动获取这些更改”
> 
>    2.“如果我修改Company.Address，它一定不会影响Person.Address”
> 
> 如果 1 为真，地址应该是一个实体
> 
> 如果 2 为真，地址应该是一个值对象。

在上面的模型中，邮件不`Address`应该是一个*值对象*，因为即使`Company`有`Person`相同的邮件，这封邮件仍然没有概念身份？

换句话说，如果最初`Company`和`Person`共享*initial.address@gmail.com*，然后得到新邮件*new.address@gmail.com*，那么我们可以说邮件地址 *initial.address@gmail.com*本身没有改变，而是`Company`并将`Person`其替换为*new.address@gmail.com*？

因此，据我了解，一个共享的事实`Address`不足以赋予它个性（即身份）？！

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T05:21:57.097

是的，你的理解是正确的。*地址*几乎总是一个值对象，因为在大多数域中，地址确实只是一个值。

一个*公司*和一个*人*今天拥有相同的*地址*这一事实并不意味着如果一个人发生变化，另一个人也应该改变。如果存在这样的关系，它应该通过显式约束而不是通过将*Address*设为实体来建模。

[Eric Evans 在他关于域驱动设计](https://rads.stackoverflow.com/amzn/click/com/0321125215)的优秀著作中谈到了这一点，甚至还提供了一个具体的例子，*地址*可能是一个实体——邮政服务，其域围绕地址展开，并且单个地址的身份很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T21:49:16.187

实际上，邮件*具有*概念上的身份。问题是您并没有真正建模电子邮件地址，而是一个人的联系信息和/或公司的联系信息。继续这个话题，值对象与身份对象更多的是实现决策，而不是“绝对真理”。

您可以使用不可变的值对象，当您告诉系统“将地址 a 更改为地址 b”时，搜索个人和公司中地址 A 的所有实例，并立即更新它们以指向地址 b。（或者你可以只更新其中一个）。

使用非值联系信息对象更强大。和：

```
Contact Information
{
    string email;
} 
```

实际上，您可以让个人和公司都指向同一个联系信息对象，因此当您更新一个时，您也会更新另一个。或者您可以让它们中的每一个指向不同的联系信息对象，因此当您更新一个时，您不会修改另一个...

顺便说一句：电子邮件具有概念上的身份，因为更改电子邮件地址实际上是谷歌上周对我所做的，当时他们将我的电子邮件地址从以@googlemail.com 结尾更改为@gmail.com ......所以如果有人同时拥有我和我公司的电子邮件，则只需一次更新就可以更改两个实例，因为在那种情况下，我的电子邮件地址会自行更改...如果另一方面，我开始使用不同的电子邮件地址，我的联系信息有什么变化......我的旧电子邮件地址仍然存在并且是相同的。

我的建议是使用标识对所有内容进行建模，除非它是一个非常好的域对象，您希望出于任何原因（例如数字、字符串等）将其优化为值对象的使用。但请记住，这通常是一个实施决定，而不是领域的决定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:07:08.107

这是一个断章取义的经典案例。

最初的问题（值对象如何存储在数据库中）并没有质疑模型的有效性，我的示例也没有突出这些问题。我的回答是关于**Persistence vs Entity/VO**。

我使用了 、 和 的示例，`Customer`纯粹是为了与 OP 共享相同的*通用语言*（我没有时间想出更好的示例）。`Person``Address`

 *我会听从[卡萨布兰卡](https://stackoverflow.com/a/11445426/80369)对此的建议（赞成）*

# jquery - 使用 knockoutjs 和 jquery 检索 id 值

> ID：11439245
> 
> 赞同：0
> 
> 时间：2012-07-11T18:40:33.003
> 
> 标签：jquery, knockout.js

我使用了淘汰赛并从我的 ModelView 模板中取回了这些...

我想获取 id 的值并将其显示在我的警报中..

```
$('.my-response').each(function() {
    alert($('id'));
}); 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:41:51.513

```
$('.my-response').each(function() {
    alert($(this).attr('id'));
}); 
```

# mysql - 按最大数字降序排列，但 null 排名更高

> ID：11439246
> 
> 赞同：0
> 
> 时间：2012-07-11T18:40:36.780
> 
> 标签：mysql

我有这个查询：

```
SELECT user.user_id,
       user.user_name,
       user.user_hash,
       suspension.suspension_expireson
FROM   user
       LEFT JOIN suspension
              ON suspension.suspension_user = user.user_id
WHERE  user.user_name = "tester"
ORDER  BY suspension.suspension_expireson DESC
LIMIT  1; 
```

它命令`suspension_expireson`最高的数字（它是 unixtime，所以未来最远）首先出现，但我希望`NULL`排名高于任何数字。所以如果`NULL`在suspension_expireson中有一行值，我想要那个。

我应该如何修改查询来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:43:49.853

在 中使用`CASE`语句`ORDER BY`为空值 0 提供比其他行更低的常量值，其他行得到 1。0 排序在 1 之前，然后其余 (1) 由 子排序`suspension_expireson DESC`。

```
SELECT
  user.user_id, 
  user.user_name, 
  user.user_hash, 
  suspension.suspension_expireson 
FROM 
  user 
  LEFT JOIN suspension ON suspension.suspension_user = user.user_id 
WHERE user.user_name = "Tester" 
ORDER BY
  CASE WHEN suspension_expireson IS NULL THEN 0 ELSE 1 END,
  suspension.suspension_expireson DESC
LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:43:28.437

这将首先对所有 NULL 值进行排序，然后按降序对非 NULL 值进行排序。

```
ORDER BY case when suspension.suspension_expireson is null then 0 else 1 end, suspension.suspension_expireson DESC LIMIT 1; 
```

# c# - WebClient 凭据 SharePoint Intranet

> ID：11439248
> 
> 赞同：1
> 
> 时间：2012-07-11T18:40:43.300
> 
> 标签：c#, asp.net, sharepoint, authentication, webclient

我现在正在解决一个问题，它涉及从我们的 LAN SharePoint 服务器下载多个 PDF 文件到我们的 DMZ。

我们试图完成的是一个“NewsFeed”类型的应用程序。它的作用是从上传的 SharePoint 内容类型中获取列表数据，然后将它们发布到托管在 DMZ 上的外部网站，并附上相应 pdf 文件的链接。我们使用了 sharepoint 必须相当轻松地完成文本布局的 REST API，但我们现在遇到的问题是将上传文档的 .pdf 从 SharePoint 站点复制到 DMZ，因此我们可以将它们存储在缓存中，并且用户可以通过 href 访问它们。

这是访问 SharePoint REST API 的有效代码。

```
 // Create the connection to sharepoint.  Credentials are managed within web.config
        SharePointListsREST.SharePointDataContext dc = new SharePointListsREST.SharePointDataContext(new Uri(ConfigurationManager.AppSettings["spUrl"]));
        CredentialCache cc = new CredentialCache();
        cc.Add(new Uri(ConfigurationManager.AppSettings["spUrl"]), "NTLM", new NetworkCredential(ConfigurationManager.AppSettings["spUser"], ConfigurationManager.AppSettings["spPassword"], ConfigurationManager.AppSettings["spDomain"]));
        dc.Credentials = cc; 
```

这完美地工作，它能够验证、获取数据并显示它。对于 PDF 下载功能，我们有这个。

```
 private void GetPDF(string URL, string path)
    {
        if (System.IO.File.Exists(path))
            System.IO.File.Delete(path);
        WebClient wc = new WebClient();
        CredentialCache cc = new CredentialCache();
        cc.Add(new Uri(ConfigurationManager.AppSettings["spUrl"]), "NTML", new NetworkCredential(ConfigurationManager.AppSettings["spUser"], ConfigurationManager.AppSettings["spPassword"], ConfigurationManager.AppSettings["spDomain"]));

        wc.Credentials = cc;

        wc.DownloadFile(URL, path);
    } 
```

这根本不起作用，并引发 401 Not Authorized 错误。但是，如果您尝试通过访问来访问 pdf 文件，系统`http://XX.XX.XX.XX/.../test.pdf`将提示您输入用户名/密码。输入基于 Windows 的凭据将使我能够访问 pdf。

我尝试过使用`wc.UseDefaultCredentials = true;`，但它也不起作用。有没有人对我如何让它与 webclient 一起工作有任何想法？

这是来自 IIS 的错误日志之一。

```
2012-07-11 00:56:12 XX.XX.XX.XX GET /Employee+Images/_t/sample.jpg - 80 - 192.168.200.12 - 401 2 5 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:51:37.257

在 SharePoint 网站上使用 Windows 身份验证时，可以选择模拟用户并在模拟块内运行整个 WebClient 代码。

请参阅此问题[如何使用具有不同用户 ID 的 Directory.CreateDirectory？](https://stackoverflow.com/questions/11423768/how-can-i-use-directory-createdirectory-with-a-different-user-id/11423829#11423829)关于冒充用户。

或者，您只需使用 Runas 以该特殊用户的身份运行整个过程 - 无需更改代码。

# android - 使用 android 进行地理定位

> ID：11439250
> 
> 赞同：1
> 
> 时间：2012-07-11T18:40:47.230
> 
> 标签：android, map, compass-geolocation

我试图让我的模拟器指示我在地图上的位置，问题是我没有得到我的真实位置，也没有指南针我只在计算机上使用模拟器我整合了谷歌地图、密钥、导入manifest.xml 这里是代码：

```
 package com.training.surveyproject;
     import android.location.Location;
     import android.location.LocationListener;
     import android.location.LocationManager;
     import android.os.Bundle;
     import android.view.KeyEvent;
     import android.widget.Toast;

     import com.google.android.maps.GeoPoint;
     import com.google.android.maps.MapActivity;
     import com.google.android.maps.MapController;
     import com.google.android.maps.MapView;
     import com.google.android.maps.MyLocationOverlay;

     public class SurveyActivity extends MapActivity implements LocationListener
     {

        private MapView mapView = null;
        private LocationManager lm = null;
        private double lat = 0;
        private double lng = 0;
        private MapController mc = null;
        private MyLocationOverlay myLocation = null;

        @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_survey);
        mapView = (MapView) this.findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);

        lm = (LocationManager) this.getSystemService(LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 0, this);
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 0, this);

        mc = mapView.getController();
        mc.setZoom(12);
        myLocation = new MyLocationOverlay(getApplicationContext(),mapView); 
        myLocation.runOnFirstFix(new Runnable(){
    public void run(){
     mc.animateTo(myLocation.getMyLocation());
     mc.setZoom(17);
      }
       });
       mapView.getOverlays().add(myLocation);
       myLocation.enableMyLocation();
       myLocation.enableCompass();
             }

       @Override
       public boolean onKeyDown(int keyCode, KeyEvent event)
                {
                if (keyCode == KeyEvent.KEYCODE_S)
                {
      mapView.setSatellite(!mapView.isSatellite());
      return true;
             }
       return super.onKeyDown(keyCode, event);
      }

      @Override
      public void onLocationChanged(Location location)
      {
            lat = location.getLatitude();
            lng = location.getLongitude();
            Toast.makeText(getBaseContext(),
            "Location change to : Latitude = " + lat + " Longitude = " + lng,
            Toast.LENGTH_SHORT).show();
            GeoPoint p = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
            mc.animateTo(p);
            mc.setCenter(p);
            }

            @Override
            protected boolean isRouteDisplayed()
               {
                    return false;
               }

          @Override
          public void onProviderDisabled(String provider)
                 {
             // TODO Auto-generated method stub

                 }

          @Override
          public void onProviderEnabled(String provider)
                 {
             // TODO Auto-generated method stub

                 }

          @Override
          public void onStatusChanged(String provider, int status, Bundle extras)
                 {
             // TODO Auto-generated method stub

                 }

                } 
```

感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:54:03.737

您可以通过打开 DDMS 透视图和其中的“模拟器控制”选项卡将模拟 GPS 修复发送到模拟器。该选项卡有一个“位置控制”选项，它将把纬度/经度发送到模拟器。

# android - 将我的应用添加到“添加快捷方式”列表以在主屏幕上显示快捷方式

> ID：11439253
> 
> 赞同：2
> 
> 时间：2012-07-11T18:40:57.233
> 
> 标签：android, shortcut, homescreen

如您所知，当您长按主屏幕时，手机会显示一个列表菜单。您可以添加快捷方式、小部件、文件夹等。我希望我的应用程序出现在快捷方式列表中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T10:01:06.570

快捷方式从 API 级别 1 开始就存在，并且也可以被 3rd 方应用程序使用。

要将活动添加到快捷方式手册中，只需将此意图过滤器添加到清单中的活动：

```
 <intent-filter>
        <action android:name="android.intent.action.CREATE_SHORTCUT" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter> 
```

要使活动在主屏幕上植入一个带有意图的新图标，请在完成之前执行以下操作：

```
Intent intent = new Intent();
Intent launchApp = new Intent();
intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, launchApp);
intent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "My shortcut");
intent.putExtra(Intent.EXTRA_SHORTCUT_ICON, myIcon);
setResult(RESULT_OK, intent); 
```

单击此按钮时，将意图更改为`launchApp`您想要启动的任何内容。

见这里：http: [//developer.android.com/reference/android/content/Intent.html#ACTION_CREATE_SHORTCUT](http://developer.android.com/reference/android/content/Intent.html#ACTION_CREATE_SHORTCUT)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T18:47:27.997

默认情况下，该功能已经存在，他们只需从“应用程序”列表中进行选择。您不能直接添加到主快捷方式列表（它会很快变得过于混乱），这是由操作系统提供的，据我所知，第三方应用程序无法填充。

# html - Html 链接不适用于本地主机？

> ID：11439254
> 
> 赞同：0
> 
> 时间：2012-07-11T18:40:59.733
> 
> 标签：html, asp.net-mvc-3, localhost

这是真的？我正在visual studio中开发一个mvc3应用程序，我希望我用作标题的图像成为返回主页的链接，但由于我只是在本地运行它，所以我使用这一行作为代码：

```
<a href="localhost:60060">
<img src="../../Content/images/LionLabs.png" alt="Lion logo">
</a> 
```

这虽然行不​​通！我做错了什么，还是只是不能这样使用本地主机？

我也只是尝试使用 javascript 方法作为 href 来刷新页面，但这也不起作用:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T18:46:13.180

由于默认情况下链接从域开始，因此没有理由指定它。你可以只使用`/`.

```
<a href="/">
    <img src="../../Content/images/LionLabs.png" alt="Lion logo">
</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:58:09.767

HTML 链接在 localhost 上工作得很好：

```
<a href="http://localhost:60060/">
    <img src="../../Content/images/LionLabs.png" alt="Lion logo">
</a> 
```

这里的问题是，只是`localhost:60060`尝试使用相对路径，所以浏览器实际上正在寻找`http://localhost:60060/localhost:60060/`，当然，这是一个无效的路径。

此外，在应用程序页面之间链接时不应使用绝对路径，因为当您需要更改域名（例如，将应用程序部署到 Web）时，这将成为一场噩梦。

要使您的代码对 MVC 更友好，请执行以下操作：

```
<a href="@Url.Action("Index", "Home")">
    <img src="@Url.Content("~/Content/images/LionLabs.png")" alt="Lion logo">
</a> 
```

这里发生的是 ASP.NET MVC`Url`帮助程序在向用户提供页面时提供正确的路径信息，因此它会自动适应服务器中的任何更改。它还允许您使用`Routes`最佳效果，因为您可以轻松更改链接的路由（即 URL），但仍使用相同的控制器和视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:52:00.603

的链接`<a href="">`与 的链接没有区别`<img src="">`。

您不应该使用绝对路径，因为当您部署项目时，站点名称不会是 localhost:60060。

用于主页

```
<a href="/"></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T18:47:32.813

您已`href`用作`localhost:60060`. 它应该是一个页面（可能是`default.html`或类似的东西）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T18:55:56.233

改变这个：

```
<a href="localhost:60060">
    <img src="../../Content/images/LionLabs.png" alt="Lion logo">
</a> 
```

对此：

```
<a href="@Url.Action("Index", "Home")">
    <img src="@Url.Content("~/Content/images/LionLabs.png")" alt="Lion logo">
</a> 
```

* * *

**为什么？**

最好使用它`@Url.Action`，因为它将使用您在 Global.asax 中设置的任何自定义路由。如果您必须更改 url 路由，您能想象修改复杂站点上的每个链接引用吗？:)

使用`@Url.Content`，因为这将正确解析到应用程序的根目录，从而消除使用`../`or `../../`or的不确定性`../../..`。更干净了！

# xcode - 对部署到 ios 5.0 感到困惑，使用哪个 xcode

> ID：11439255
> 
> 赞同：0
> 
> 时间：2012-07-11T18:41:01.100
> 
> 标签：xcode, ios5, deployment, ios6

我希望我的应用程序可以在 iOS 5.0 和所有更新版本上运行。我应该在 Xcode 4.2.1 中完成所有开发工作，还是使用 Xcode 4.5 beta？如果我实现地图，那么运行 ios 5.0 的设备会显示谷歌地图，而未来运行 ios 6.0 的设备会显示苹果地图吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:43:46.153

XCode 4.5 beta 用于测试和向苹果报告错误，测试 iOS 6 等。你不能用它提交应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:56:14.953

我会使用 Xcode 4.4.1，它是最新的非 beta 版本。

[https://developer.apple.com/xcode/](https://developer.apple.com/xcode/)

# xpath - 如何通过xpath中另一个属性的值获取属性值

> ID：11439260
> 
> 赞同：1
> 
> 时间：2012-07-11T18:41:15.770
> 
> 标签：xpath

```
<?xml version="1.0" encoding="UTF-8"?>
<serviceOfferings xmlns="http://www.abc.com/aaa" xmlns:ns2="http://www.w3.org/2005/Atom">
    <serviceOffering type="provider">
        <links>
            <link title="Service Provider" type="application/xml" rel="self" href="https://www.yahoo.com"/>
            <link rel="create" href="https://www.google.com/create"/>
        </links>
    </serviceOffering>
</serviceOfferings> 
```

如何获取`href`属性`rel`是链接的值`create`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:38:47.603

为了完整起见，在大多数情况下，这也可以在不注册命名空间的情况下实现，但会降低可读性：

```
/*/*/*/*[name()='link' and @rel='create'] 
```

这将选择名称为`"link"`（无论它们属于哪个名称空间）且具有`rel`字符串值为 的属性`"create"`以及 XML 文档顶部元素的 grand-grand-children 的所有元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:24:46.170

目标元素位于默认命名空间中。首先，您需要向您的 XPath 引擎注册该名称空间。你如何做到这一点取决于你使用的工具，这意味着它超出了这个问题的范围（因为你还没有告诉我们你是*如何*评估你的表达式的）。

假设您已将命名空间注册到名为`aaa`. 像这样选择所需的`link`：

```
//aaa:link[@rel='create'] 
```

或者，更具体地说：

```
/*/*/*/aaa:link[@rel='create'] 
```

# android-widget - 如何在我的 android 应用程序的每个选项卡中保持一个小部件通用？

> ID：11439261
> 
> 赞同：0
> 
> 时间：2012-07-11T18:41:20.300
> 
> 标签：android-widget, android-tabhost

如果我想通过 XML 文件布局来做到这一点，我该怎么做..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:46:43.110

也许您可以找到一种方法让小部件共享一个 ID？但是，不要认为您可以从布局中做到这一点（如果有的话）。

[Android Widget ID 是否持久](https://stackoverflow.com/questions/7086564/is-android-widget-id-persistent)

# google-closure-compiler - Google Closure 编译器解析错误

> ID：11439265
> 
> 赞同：0
> 
> 时间：2012-07-11T18:41:32.317
> 
> 标签：google-closure-compiler

> **可能重复：**
> [使用 Google Closure Compiler 部分跳过部分](https://stackoverflow.com/questions/10449195/partially-skip-sections-with-google-closure-compiler)

我从编译器收到以下错误：

```
Number of errors: 2

JSC_PARSE_ERROR: Parse error. syntax error at line 17 character 18
window.location = <?php echo $this->baseUrl(); ?>"/";
                  ^
JSC_PARSE_ERROR: Parse error. syntax error at line 17 character 47
window.location = <?php echo $this->baseUrl(); ?>"/";
                                               ^ 
```

它似乎不喜欢 (php) 语法。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:12:00.097

隔离字符串中的代码：

```
window.location = eval("<?php echo $this->baseUrl(); ?>") + "/"; 
```

这是一个类似的问题：

[https://code.google.com/p/closure-compiler/wiki/UsingConditionalCommentWithClosureCompiler](https://code.google.com/p/closure-compiler/wiki/UsingConditionalCommentWithClosureCompiler)

# jackrabbit - 内容存储库的优势是什么（不是在谈论 CMS）

> ID：11439266
> 
> 赞同：12
> 
> 时间：2012-07-11T18:41:44.547
> 
> 标签：jackrabbit, content-repository

鉴于很多人使用内容存储库。一定有充分的理由。我正在构建一个需要存储内容的新 Web 应用程序。有人可以帮助我理解这一点吗？

与编写自己的代码/API 来存储图像或文本页面相比，使用像 Apache Jackrabbit 这样的内容存储库有什么优势？自己编写需要时间等，但实施和学习新框架（如内容存储库 API）也是如此。在我看来，滚动你自己的代码的好处是你了解你的代码，并且如果你需要增强或修复它，你可以立即获得专业知识。使用另一个框架，您需要了解它的弱点，并且修改您知道但不知道的代码总是更容易......即您不知道底层框架代码以及您自己的代码。

正如我所说，很多人都在使用它们。一定是有原因的。我不能把它看作只是另一个“每个人都在使用它们，我们也应该这样”。至少我希望不是这样。:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T14:41:24.110

JCR 存储库允许您将所有内容（从结构化数据库类型的数据到大型多媒体文件）存储在一个地方并使用单个 API，这非常方便并且使您的代码更简单，避免文件和数据之间的阻抗不匹配通常在基于内容的系统中。

JCR 还提供了许多您不必自己构建或组装的基础设施功能：搜索（包括全文）、观察（发生变化时的回调）版本控制、数据类型（包括多值、有序节点等）。 .

[如果你允许一个无耻的插件，我在http://java.dzone.com/articles/java-content-repository-best](http://java.dzone.com/articles/java-content-repository-best)上的“JCR - 两全其美”文章更详细地描述了这一点，并提供了一个阅读列表JCR 规范，应该可以让您在不阅读整个内容的情况下获得一个很好的概述。

本文使用 Apache Sling 作为示例，它与 JCR 存储库相结合，为基于内容的应用程序提供了一个非常好的（IMO，但作为 Sling 提交者，我有偏见 ;-) 平台。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-12T17:59:59.277

我最近的项目涉及两种选择：具有多级缓存机制的定制数据存储（MySQL 和图像文件），以及基于 JCR 的商业存储库。一些想法：

在短期内，DIY 解决方案可以降低复杂性：您只需要构建和学习您需要的东西。并且至少有机会针对您的特定应用程序的需求优化数据存储 - 很可能是检索速度，但可能是存储空间、安全性或可靠性问题对您来说是最重要的。

但是，从长远来看，您将看到大量工作将本土系统扩展到新的内容类型（例如视频）或提供新功能（可能是版本控制）。

此外，很难将数据存储方法的选择与内容提供者用来填充和维护数据存储的工具的选择区分开来。您必须为您的作者提供比带有 textarea 和提交按钮的 HTML 表单更多的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T04:52:34.290

这与[标准化](http://en.wikipedia.org/wiki/Standardization)的优点有关：兼容性和互换性。如果每个人都写自己的库和API，就没有兼容性和互换性，导致成本更高。

# java - Java：释放未使用内存的命令行参数

> ID：11439268
> 
> 赞同：4
> 
> 时间：2012-07-11T18:41:45.810
> 
> 标签：java, bash, garbage-collection

在 Bash 中，我使用该`java -Xmx8192m -Xms512m -jar jarfile`命令启动一个初始堆空间为 512MB，最大堆空间为 8GB 的​​ Java 进程。

我喜欢堆空间如何根据需求增加，但是一旦堆空间增加，它就不会释放，尽管进程不需要内存。如何释放进程未使用的内存？

示例：进程启动，并使用 600MB 内存。堆空间从 512MB 增加到略高于 600MB。然后进程下降到 400MB RAM 使用量，但堆分配保持在 600MB。如何使分配保持在 RAM 使用率附近？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T18:44:25.033

你不能; 它根本不是为了那样工作而设计的。请注意，未使用的内存页面将简单地由您的硬件映射出来，因此不会消耗任何实际内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T19:26:41.937

通常，您不希望 JVM 将内存返回给操作系统，然后再收回，因为这两种操作都不那么便宜。

有几个`XX`参数可能会或可能不会与您首选的垃圾收集器一起使用，即

*   `-XX:MaxHeapFreeRatio=70` *GC 后可用堆的最大百分比以避免收缩。*
*   `-XX:MinHeapFreeRatio=40` *GC 后堆空闲的最小百分比以避免扩展。*

[资源](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)

我相信您需要阻止世界收集器才能强制执行。其他 JVM 可能有自己的参数。

*我通常不会回复，但负面/虚假信息的数量并不酷。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T20:06:06.173

不，这是必需的功能。我认为，Android 中的 JVM 可能可以做到这一点，但我不确定。

但是它们中的大多数——包括所有 Java EE VM——根本对此不感兴趣。

这并不像看起来那么简单——从操作系统的角度来看，VM 是一个进程，并且在某个地方有一个映射的内存区域，它是一个堆栈或数据段。

在大多数情况下，它需要是一个连续的间隔。操作系统视图中的内存分配和释放发生在系统调用中，进程使用该系统调用向操作系统询问其新的段限制。

例如，如果您的 JVM 有 2 GB 的 RAM，它只使用 500 meg，但是这 500 meg 分散在这 2 gig 中的一些 10 字节片段中，该怎么办？此内存释放功能还需要一个碎片整理步骤，这将增加 GC 运行的资源成本。

随着 Java 的运行，垃圾收集器构造和销毁 Java 对象，空闲和分配的内存区域分散在堆栈/数据段中。

当我们看不到java，而是native OS进程时，情况是一样的：如果你malloc() 10个1meg块，然后释放前9个，就没有办法把它还给OS，尽管较新的库和 os apis 对此有广泛的发展。当然，如果您稍后再次分配内存，则此分配将从刚刚释放的区域中完成。

我的观点是，即使这有点昂贵和复杂（并且是一项相当大的编程工作），它也物有所值，而且我认为这不是我们集体编程文化中最好的形象，它不是几十年来所做的一切，包括java vms。

# c# - 实体空间和 Ncache

> ID：11439277
> 
> 赞同：0
> 
> 时间：2012-07-11T18:42:06.967
> 
> 标签：c#, ncache, entityspaces

对不起，这可能是一个糟糕的问题。有没有人有使用实体空间的直写/直读 ncache 的经验？

我还尝试为 nhibernate 和 ncache 搜索 wt/rt 提供程序的实现，以可能为实体空间滚动我自己的实现，但我找不到任何示例代码。是否有任何可以共享的代码（或链接）让我开始使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:25:59.013

抱歉回复晚了。根据 EntitySpaces 员工在其论坛上的以下帖子，他们一开始就不支持缓存。 [http://www.entityspaces.net/portal/Forums/tabid/203/forumid/20/postid/5461/scope/posts/Default.aspx](http://www.entityspaces.net/portal/Forums/tabid/203/forumid/20/postid/5461/scope/posts/Default.aspx)

但是，EntitySpaces 似乎也使用了 ADO.net Provider，我们在 NCache 的 Entity Framework 中的 ADO.net 级别进行缓存。但是我们还没有为 EntitySpaces 提供任何直接的实现/包装器。

# jquery - 将长的单个单词分成多行而不破坏链接或 html 标签

> ID：11439278
> 
> 赞同：2
> 
> 时间：2012-07-11T18:42:07.137
> 
> 标签：jquery, html

我的页面上有以下行`$(document).ready(function(){...}`It is done in ASP.NET

```
$("#standard-styling").html($("#standard-styling").text().replace(/([^\s-]{5})(?=[^\s-])/g, '$1&shy;')); 
```

HTML：

```
<div id="standard-styling" class="description">
    <% Response.Write(Model.Description); %>
</div> 
```

`-<br>`如果浏览器认为有必要则添加 a ，如果不需要则忽略它（[http://www.quirksmode.org/oddsandends/wbr.html](http://www.quirksmode.org/oddsandends/wbr.html)） ，它非常适合将长单词分成多行。但是，如果描述包含链接，则该链接不会显示为超链接。此外，如果有换行符`<br />` 或其他标签，它们也很可能被破坏和忽略。最后，它会导致编码字符出现问题，例如`&lt;br /&gt;`. 然后它被视为`<br />`并且确实在那里插入了一个换行符。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:12:53.223

使用 css：

```
#standard-styling {
   word-wrap: break-word;
} 
```

或者使用 jQuery：

```
$("#standard-styling").css('word-wrap', 'break-word'); 
```

**升级版：**

jQuery 示例：http: [//jsbin.com/ojoges/1/](http://jsbin.com/ojoges/2/)

CSS 示例：http: [//jsbin.com/ojoges/](http://jsbin.com/ojoges/)

# image - 是否可以检索 Coldfusion 图像标签的路径以直接链接到图片？

> ID：11439281
> 
> 赞同：1
> 
> 时间：2012-07-11T18:42:14.563
> 
> 标签：image, url, coldfusion, href, cfimage

我正在尝试使用 Coldfusions CFimage 标签和[Photoswipe](http://www.photoswipe.com/)。

我的问题是，Photoswipe 需要像这样设置图像：

```
<a class="swipeMe" rel="external" href="#myImage#">
   <cfimage source="#myImage#" action="writeToBrowser" class="adaptImg ui-li-thumb">
</a> 
```

所以我需要链接 href 和 cfimage 标记的 url。

如果我解析这个，img 源将是

```
src="/CFFileServlet/_cf_image/_cfimg5722874764512027443.PNG" 
```

而链接href原来是：

```
href="coldfusion.image.Image@1adaa15" 
```

这会破坏 photoswipe 插件，因为找不到图像。

**问题**：
Coldfusion8中有没有办法在href中显示实际的图像路径，以便图像可以链接到？

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:51:07.060

您可以使用正则表达式来解析 URL，或者`<cfxml>`像[Ben Nadel 那样](http://www.bennadel.com/blog/1890-Getting-The-Image-SRC-Of-ColdFusion-s-CFImage-WriteToBrowser-Temporary-Image-With-CFXML.htm)使用：

```
<!---
    Write the image to the output. Except, rather than writing it
    to the screen, write it to an XML data buffer.
--->
<cfxml variable="imageXml">

<!--- Let IMG be the only tag in this XML document. --->
<cfimage
    action="writetobrowser"
    source="#girlsFighting#"/>

</cfxml>

<!---
    At this point, our XML object should have one tag - IMG - from
   which we can extract the SRC attribute as the temporary image
    path on the CFImage file servlet.
--->
<cfset imageSrc = imageXml.xmlRoot.xmlAttributes.src />

<!--- Output the temporary image src: --->
<cfoutput>
    SRC: #imageSrc#
</cfoutput> 
```

# mysql - PHPMyAdmin 导出的替代方案

> ID：11439290
> 
> 赞同：0
> 
> 时间：2012-07-11T18:42:32.320
> 
> 标签：mysql, phpmyadmin, mysqldump

我想将 SELECT 查询的结果导出为有效的 SQL INSERTS 并将其导入另一个数据库（一些记录被意外删除）。通常我会使用 PHPMyAdmin 的导出功能，但 PHPMyAdmin 在其中一台服务器上不可用。我相信我可以使用[VIEW](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)和 mysqldump 但我不确定从哪里开始——我找不到说明如何只转储我的视图的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:45:57.983

好吧，如果您要以 1:1 的比例导入到一个表中，则可以将其导出为 CSV 文件，然后导入结果。

```
SELECT * FROM your_table
INTO OUTFILE '/tmp/table.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n' 
```

然后您可以通过执行手动导入它

```
load data local infile 'table.csv' into table your_new_table fields terminated by ','
enclosed by '"'
lines terminated by '\n'
(your, field, names) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:46:51.580

```
SELECT *
FROM yourtable
INTO OUTFILE '/tmp/yourData.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n' 
```

这将输出到 csv 格式的文件。您还可以返回所需类型的数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T18:45:16.640

只需在查询后追加`INTO OUTFILE "filename"`，您就会得到一个包含该服务器上内容的文件，您可以将其加载到另一台服务器中

# jetty - 未知位置的嵌入式 Jetty 缓存 JSP

> ID：11439294
> 
> 赞同：0
> 
> 时间：2012-07-11T18:42:46.543
> 
> 标签：jetty, embedded-jetty

我有一个带有映射 JspServlet 的简单的嵌入式码头实例。出于性能原因，Jetty 正在某处缓存已编译的 JSP 文件，但我找不到缓存位置。

在生产中，缓存很棒。然而，在开发中，我需要记住运行“find .-exec touch {} \;” 在我的 webapp 上，这是一个令人难以置信的 hack。

无论如何，有人知道码头缓存在哪里吗？在文档中没有看到任何内容。我查看了 /tmp、~、我的工作目录和我的 webapp 目录；没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:11:46.927

Jetty 将生成的文件存储在 tmp 目录中，这通常是系统属性 java.io.tmpdir 指定的目录。在类 UNIX 系统上，这通常是 /tmp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:43:22.463

Jetty 不管理在 Jetty 下运行的 JSP。

Jetty 使用的 Jasper/Glassfish JSP 实现负责管理 JSP。具体来说，org.apache.jasper.servlet.JspServlet 正在完成所有工作。

JspServlet 有许多可配置项，有关所有可配置项的详细信息，请参阅[JSP How-To wiki](http://wiki.eclipse.org/Jetty/Howto/Configure_JSP#Configuring_JSP)。看起来`scratchDir`参数是您正在寻找的。

# javascript - 根据在搜索表单中输入的内容隐藏和显示表格行

> ID：11439295
> 
> 赞同：0
> 
> 时间：2012-07-11T18:42:53.993
> 
> 标签：javascript, jquery, forms

我在带有#attribute 的表下的tbody 下有一个带有多个tr 的表。

```
function searchEnter() {
    var content = $('#search').val();
    $('#search').change(function() {
        if ($('#search').text() != content) {
            content = $('#search').val();
            $('tbody', '#attribute').each(function() {
                $(this).find('tr').each(function() {
                    if ($('tbody>tr>h4:contains(' + content + ')')) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                })
            })
        }
    });
} 
```

我想根据在搜索框中输入的内容来更改表格的内容。虽然我也不确定如何为搜索框构建 html（也使用 Twitter Bootstrap）或者 jquery/javascript 是否正确。也不确定该操作应该是什么，但我希望它引用函数而不是 PHP 文件。

```
<form class="well form-search fill pull-right" action="">
      <input id="search" type="text" class="input-medium search-query"  />
      <button type="submit" class="btn" onclick="searchEnter">Search</button>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:57:34.367

您可以只为行使用选择器，这可能是一种更简洁的开始方式。因此，在您的代码中，确定已输入新文本后，请使用以下内容开始一个块：

```
$('tr').each(function(index){ 
```

这将选择您的所有行。如果您的 TR 元素不仅仅包含在此表中，您可以使用类指定每个元素，例如“table_row”，或者使用 id 指定表本身，例如“data_table”

```
$('.table_row').each(function(index){ //Class based selector
$('#data_table tr').each(function(index){ //Id based selector 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:11:14.773

试试下面的代码...

```
$(document).ready(function () {

  var search$ = $('#search')
    , table$ = $('#mytable')
    , content = search$.val().toLowerCase();

  search$.change(function() {
    if (search$.val() === content) { return; }
    content = search$.val().toLowerCase();

    table$.find('tr').show();

    table$
      .find('h4')
       .filter(function (index, element) { 
           return $(this).text().toLowerCase().indexOf(content) === -1; })
      .closest('tr')
      .hide();    
  });

});​ 
```

我还创建了一个[JSFiddle](http://jsfiddle.net/LsP5a/)来演示和一个[JSFiddle](http://jsfiddle.net/LsP5a/1/)，它适用于一个更好的按键事件。

# ios - 当 webViews 尝试在标签栏控制器中加载时应用程序崩溃

> ID：11439298
> 
> 赞同：3
> 
> 时间：2012-07-11T18:42:59.437
> 
> 标签：ios, uiwebview, uitabbarcontroller

所以我的应用程序的前提是它有多个选项卡，每个 tabViewController 都有一个 webView 属性，可以加载不同的网页。

我不确定到底出了什么问题，以及为什么会崩溃。

`*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIViewController 0x6a7c5b0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key webView.'`

我构建应用程序的方式是为每个选项卡创建单独的 ViewController 类。我将 IBOutlets 包含到 WebView 中，并将它们链接到我包含在情节提要中的 webView。我还将 CustomClass 设置为 ViewController 类。

这是我的代码示例（它在 ViewControllers 中几乎是同义词）：

**AmericaViewController.h**

```
#import <UIKit/UIKit.h>
@interface AmericaViewController : UIViewController
@property (nonatomic, weak) IBOutlet UIWebView *webView;
@end 
```

**AmericaViewController.m**

```
#import "AmericaViewController.h"
@implementation AmericaViewController
@synthesize webView = _webView;

-(void)viewDidLoad
{
    [super viewDidLoad];

    // allow user to pinch-zoom page
    self.webView.scalesPageToFit = YES;
    self.webView.multipleTouchEnabled = YES;

    //load webView
    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://baylornotes.org/articles/America"]]];   
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:06:10.343

根据例外情况，您的 UIViewController 之一没有属性 webView。也许你的一个类写得不好，或者你忘记在 xib 中设置正确的类......

# css - Jquery搜索表单在phonegap中不起作用

> ID：11439300
> 
> 赞同：-1
> 
> 时间：2012-07-11T18:43:04.397
> 
> 标签：css, html, jquery-mobile, cordova, search-form

如果我只使用单个 data-role="page"，这很好用，但是如果我添加更多页面，我的意思是使用多个 data-role="page" 它会停止工作。

```
<div id="studentpage" data-role="page">
<div data-role="header" data-theme="b">
<h1>Search inputs</h1>
<a href="../../" data-icon="home" data-iconpos="notext" data-direction="reverse"   class="ui-btn-right jqm-home">Home</a>
</div><!-- /header -->
<div data-role="content">
<form action="#" method="get">
<p>The search input is displayed like this:</p>
<div data-role="fieldcontain">
<label for="search">Search Input:</label>
<input type="search" name="password" id="search" value="" />
</div>
<p>Themed variation:</p>
<div data-role="fieldcontain">
<label for="searchA">Search Input:</label>
<input type="search" name="searchA" id="searchA" value="" data-theme="a" />
</div></form>
</div><!-- /content -->
</div><!-- /page --> 
```

这很好用，但如果我再添加一个具有页面角色的 div

```
<div id="otherpage" data-role="page">
My second page
</div>

<div id="studentpage" data-role="page">
<div data-role="header" data-theme="b">
<h1>Search inputs</h1>
<a href="../../" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-right jqm-home">Home</a>
</div><!-- /header -->
<div data-role="content">
<form action="#" method="get">
<p>The search input is displayed like this:</p>
<div data-role="fieldcontain">
<label for="search">Search Input:</label>
<input type="search" name="password" id="search" value="" />
</div>

<p>Themed variation:</p>
<div data-role="fieldcontain">
<label for="searchA">Search Input:</label>
<input type="search" name="searchA" id="searchA" value="" data-theme="a" />
</div>

</form>
</div><!-- /content -->
</div><!-- /page --> 
```

这似乎很奇怪，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:05:35.557

我正在使用隐藏显示来切换页面，因此它无法正常工作，因此被 jquery 方法 $.mobile.changePage("#studentpage") 取代，现在可以完美运行

# html - 表格设计与 css 中的浮动 div

> ID：11439304
> 
> 赞同：0
> 
> 时间：2012-07-11T18:43:14.267
> 
> 标签：html, css, tabular

设计师是否应该在他们的 html 页面中使用表格存在着这个由来已久的争论。另一种方法是使用浮动 div。

这两种技术的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:45:01.907

您不应该使用表格来制定您的设计。表格应该用于表格数据，并且只能用于表格数据！

使用 div 正确定位事物，使用 div 保存您的内容。使用表格来均匀显示数据绝对没有问题，但是使用表格作为完整的站点布局存在问题（设计不佳）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:32:40.553

浮动 div 绝不是网页设计中表格的唯一替代方案。尽管浮动 div 是设置网页设计的首选方法，但还有其他定位方法适用于所有主要浏览器。

在表格上构建您的网站设计通常是一个坏主意，因为这极大地限制了您的可能性。使用 div 和 CSS 定位技术（例如浮动）可以让您更好地控制设计。

表格是一种以结构化方式设置数据的好工具，许多网页设计师更喜欢将它们不仅用于表格数据，还用于表单、画廊等。

表格的优点： - 以结构化方式轻松设置数据

桌子的缺点： - 设计不流畅

无表设计的优点： - 更多的控制。可以使网站的外观和行为完全符合您的要求。

无表设计的缺点： - 无。只需在需要的地方使用表格

# android - 未找到处理 market:// URI 的活动

> ID：11439313
> 
> 赞同：4
> 
> 时间：2012-07-11T18:43:35.767
> 
> 标签：android, google-play

我有一个 bugsense 帐户，我用它来跟踪我公司的 android 应用程序的崩溃报告。我们的应用程序需要安装一个单独的应用程序（即服务），否则该应用程序将无法运行。我们通过检查是否安装了其他应用程序（服务）来处理这个问题，如果没有，我们将用户引导到可以安装应用程序的 maket 页面，我们这样做是这样的：

```
Intent market = new Intent(Intent.ACTION_VIEW,
                Uri.parse("market://details?id=com.mycompany.appname")); 
```

startActivityForResult（市场，REQUEST_INSTALL_APK）；

有时我会在此行消息中收到错误消息：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=market://details?id=com.mycompany.appname } 
```

我看到上次发生这种情况是来自三星银河播放器，我们内部有一些播放器，它们一直对我们很好。有谁知道为什么在某些情况下会发生这种情况？我还没有听到客户的任何投诉，但似乎这可能是个问题。

我认为用户可能以某种方式将手机植根并卸载了游戏商店，但我非常怀疑这一点（我们的客户是警察并且高度非技术性）。我想知道手机上是否没有可能导致此功能无法正常工作的设置或其他内容？或者他们有一个尚未升级的旧版市场，它不支持我使用的将用户引导到市场/游戏商店的方法。

另请注意，我们现在仅在 Play 商店中分发此应用程序，而导致此崩溃的版本是最新版本，除了 Play 商店之外，它肯定没有向公众发布。根据崩溃报告中 IP 地址的 GEO IP，并非来自公司内部的任何人拥有未在市场上分发的应用程序副本（只有 3 人）。这不是一个游戏，也不是普通用户愿意使用的任何东西，而是出于特定目的，所以它不是脚本小子和黑客会在地下网站上玩的游戏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T22:34:07.837

> 有谁知道为什么在某些情况下会发生这种情况？

用户没有 Play 商店。例如，他们可能正在运行修改后的 ROM。

> 我想知道手机上是否没有可能导致此功能无法正常工作的设置或其他内容？

通常情况下，如果他们尝试，该设备可能不符合 Play 商店的资格。

> 或者他们有一个尚未升级的旧版市场，它不支持我使用的将用户引导到市场/游戏商店的方法。

`market://`URL 自 2009 年 IIRC 以来一直有效。

> 这次崩溃来自的版本是最新版本，除了 Play 商店之外，它肯定没有向公众公开。

如果你的应用在 100 多个盗版网站上不可用，我会惊呆的。

> 这不是一个游戏，也不是普通用户愿意使用的任何东西，而是出于特定目的，所以它不是脚本小子和黑客会在地下网站上玩的游戏。

哦，他们绝对会把它放在“地下站点”上。盗版是自动化的。正如 Scen 所指出的，机器人会监控 Play Store 中的新来者，并尽可能地抓取任何东西。而且，其中一些机器人甚至可能运行您的应用程序（例如，通过测试猴子）。

# winapi - 在 Windows 7 上禁用 Ctrl+Alt+Del

> ID：11439317
> 
> 赞同：15
> 
> 时间：2012-07-11T18:43:44.973
> 
> 标签：winapi, windows-7

我知道这个问题已经被问过好几次了，而且有几种不同的方式。但是，在所有的问题和答案中，鉴于我的情况，没有人能够完全回答......

我在医疗设备上工作，它们运行 Windows。应用程序作为 shell 运行，用户不应该能够进入应用程序，理想情况下他们将无法做任何表明系统正在运行 Windows 的事情。访问全键盘是必要的，因此禁用、损坏或重新映射键不是解决方案。鉴于此，我们需要特别禁用 SAS/CAD/Ctrl+Alt+Delete；还有一些其他的，但是用钩子很容易。

直到最近我们一直在使用 Windows XP Embedded 并且可以取代 GINA，但我们即将切换到 Windows 7（技术上是 Windows Embedded Standard 7；但在我们的例子中它们本质上是相同的）并且 GINA 不再是选项。必须有办法做到这一点。

因为我在其他问题上看到过对此的评论：我相信这属于 Stack Overflow。替换 GINA 是一个编程问题，没有理由认为这不会是太多。虽然我对非编程解决方案持开放态度，但我怀疑 MS 是否会在注册表等中提供这种更改。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-25T20:39:08.497

除了[重新映射/禁用键](http://www.northcode.com/blog.php/2007/07/25/Securing-Windows-For-Use-As-A-Kiosk)之外，无法阻止`Ctrl + Alt + Delete`内核级代码之外的处理。我认为这是 Windows NT（和所有衍生产品）的基本安全设计特性。[（这里](https://stackoverflow.com/a/9751653/123378)推理。）

我建议编写一个自定义键盘过滤器或设备驱动程序（或者寻找现有的）。这不是一件容易的事，但可行。示例资源：

*   [适用于 Windows Embedded Standard 7 的键盘过滤器驱动程序](http://www.elbacom.com/blog/2010/12/keyboard-filter-driver-for-windows-embedded-standard-7)- Elbacom 提供
*   [Interception](http://oblita.com/interception.html) ( [source](https://github.com/oblitum/Interception) ) - 用于拦截输入设备通信的编程接口。
*   [编写键盘设备驱动程序](https://stackoverflow.com/questions/3527707/writing-a-keyboard-device-driver)

特别是 Elbacom 博客的第一个链接可能很有用，因为您还针对嵌入式 Windows 7。

第二个链接，拦截，更新，也可能非常有用。它提供了内核级模块并抽象了一些处理。

作为一种可能的替代方案，请考虑尽管您无法在`Ctrl + Alt + Delete`没有设备驱动程序/过滤器的情况下禁用挂钩，但您可以阻止每次更改注册表或使用组策略编辑器通过该挂钩访问的所有任务。此答案的先前编辑链接到一个名为“Tweak Ctrl-Alt-Del Options”的实用程序，它可以很容易地禁用通过 Ctrl-Alt-Del 访问的所有活动。该实用程序不再可从原始来源获得，但仍然可以找到，并且还有其他类似的实用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:54:02.913

[您可以通过组策略](http://windows.microsoft.com/en-us/windows-vista/Enable-or-disable-secure-logon-CTRL-ALT-DELETE)禁用 CAD ：HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon 将此值设置为 1。

或者，[通过高级用户帐户菜单](http://www.sevenforums.com/tutorials/612-secure-logon-press-ctrl-alt-delete-log.html)：

1.  打开开始菜单。

2.  在搜索行中，键入 netplwiz 并按 Enter。

3.  单击高级选项卡。

4.  启用安全登录 A) 选中要求用户按`Ctrl`+ `Alt`+`Delete`框。注意：如果设置显示为灰色，请参阅下面的选项三或选项二。

B) 转到步骤 6。 5\. 禁用安全登录 A) 取消选中要求用户按 Ctrl+Alt+Delete 框。注意：如果设置显示为灰色，请参阅下面的选项三或选项二。6\. 单击确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T20:06:57.023

这篇文章[http://www.codeproject.com/Articles/7392/Lock-Windows-Desktop](http://www.codeproject.com/Articles/7392/Lock-Windows-Desktop)似乎有一些很好的指导。我认为可能会起作用的一个：a）在注册表中替换系统的外壳。这意味着资源管理器不是作为默认桌面运行的。这可能让您处理 Ctrl+Alt+Del b) 强制您的应用程序在与默认设置不同的桌面上运行。这将阻止用户在应用程序完成之前切换它。

所有这些都假设您可以完全控制那台机器。

# php - 另一个页面上的 JavaScript 数组到 PHP

> ID：11439329
> 
> 赞同：0
> 
> 时间：2012-07-11T18:44:39.577
> 
> 标签：php, javascript, json, post

我正在尝试将我在 JavaScript 中创建的两个数组传递给另一个 php 页面。我对此进行了研究，但我不知道我做错了什么。我一直在关注许多论坛和教程，但我似乎无法让我的工作。我有一个表格，你可以添加额外的行，这就是我有数组的原因。当用户在“process.php”上按下提交时，这个函数被调用：

```
$("#submit").click(function() {
    var accosArray = new Array();
    accomp = $("#TextBoxDiv1 textarea[name=sacco]").val();
    accosArray.push(accomp);
    alert(accosArray[0]);
    for (var i = 2; i < counter; i++) {
        accomp = $("#TextBoxDiv1" + i + " textarea[name=sacco]").val();
        accosArray.push(accomp);
        alert(accosArray[i - 1]);
    }
    var tasksArray = new Array();
    taskSelect = $("#TextBoxDiv1 select[name=lstDropDown_A]").val();
    if (taskSelect == "") {
        //If user entered a task
        taskOther = $("#TextBoxDiv1 input[name=textboxoption_A]").val();
        tasksArray.push(taskOther);
        alert(tasksArray[0]);
    } else {
        tasksArray.push(taskSelect);
        alert(tasksArray[0]);
    }
    for (var i = 2; i < counter; i++) {
        taskSelect = $("#TextBoxDiv1" + i + " select[name=lstDropDown_A]").val();
        if (taskSelect == "") {
            //If user entered a task
            taskOther = $("#TextBoxDiv1" + i + " input[name=textboxoption_A]").val();
            tasksArray.push(taskOther);
            alert(tasksArray[i - 1]);
        } else {
            tasksArray.push(taskSelect);
            alert(tasksArray[i - 1]);
        }
    }
    $.post('127.0.0.1/Working Files/Best Files/In Progress/status.php';, {
        task: tasksArray
    }, function(result) {
        alert(result[0]);
    }, 'json');
}); 
```

这会将用户输入放入数组中，然后我尝试在最后使用 $.post 方法以便能够将数组传递到下一页，但我不确定语法是否正确。

然后它被传递到下一个文件“status.php”，它在开头声明：

```
<?php
 session_start();
 $task=$_POST['task'];
 echo json_encode($task);
?> 
```

回声显示为“null”。

请让我知道我做错了什么！

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:53:24.113

至少看起来像一个流氓分号：

```
$.post('127.0.0.1/Working Files/Best Files/In Progress/status.php'; 
```

删除该分号作为初学者...

# javascript - Rails 3：如何使用 Jquery 添加/删除一组字段？

> ID：11439331
> 
> 赞同：2
> 
> 时间：2012-07-11T18:44:50.270
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, forms

我试图弄清楚如何使用 Jquery 在我的 Rails 3 应用程序中添加和删除一组字段。我让 jquery 脚本使用纯 html，你可以在这里看到：http: [//jsfiddle.net/beehive/ABvFH/1/](http://jsfiddle.net/beehive/ABvFH/1/)

但是，我不知道如何将其转换为 Rails 3。更具体地说，我应该在 application.js 文件中用什么替换“formfield”才能使其正常工作？

**应用程序.js**

```
$(document).ready(function() {

    $(function() {
        var x = $('#uploadform');
        var i = $('#uploadform ul').size() + 1;

        $('#addmore').live('click', function() {
            if ($(".item", x).length < 9) {
                $('<ul class="item" class="field">formfield ' + i + ' <a href="#" id="remfields">Remove</a></p>').appendTo(x);
                i++;
            }
            return false;
        });

        $('#remfields').live('click', function() {
            if (i > 2) {
                $(this).parents('ul').remove();
                i--;
            }
            return false;
        });
    });​

}); 
```

**form.html.erb**

```
<%= form_for(@upload) do |f| %>
  <% if @upload.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@upload.errors.count, "error") %> prohibited this upload from being saved:</h2>

      <ul>
      <% @upload.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <h2><a href="#" id="addmore">Add More Fields</a></h2>
  <div id="uploadform">
    <ul class="field">
      <li>
        <%= f.label :title %><br />
        <%= f.text_field :title %>
      </li>
      <li>
        <%= f.label :genre %><br />
        <%= f.collection_select :genre, Upload::GENRES, :to_s, :to_s, :include_blank => true %>
      </li>
      <li>
        <%= f.label :category %><br />
        <%= f.collection_select :category, Upload::CATEGORIES, :to_s, :to_s, :include_blank => true %>
      </li>
      <li>
        <%= f.label :age %><br />
        <%= f.collection_select :age, Upload::AGES, :to_s, :to_s, :include_blank => true %>
      </li>
    </ul>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:34:22.440

我猜你想允许用户在提交表单之前添加许多上传。在那种情况下，我使用的是 rails[嵌套属性](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)。

这是示例。**订单有很多照片**

订购型号：

```
class Order < ActiveRecord::Base
  has_many :photos, :dependent=>:destroy, :inverse_of=>:order
  accepts_nested_attributes_for :photos, :allow_destroy=>true,:reject_if=> :all_blank
end 
```

照片模型：

```
class Photo < ActiveRecord::Base
  has_attached_file :photo
  belongs_to :order
end 
```

订购单视图：

```
<%= form_for @order, :html => {:autocomplete => :off, :multipart => true} do |f| %>
    <%= f.label :title %><br />
    <%= f.text_field :title %>
    <h3>Order photos</h3>
        <%= f.fields_for :photos do |photo| %>
        <%= render :partial=>'photo_form', :object=> photo, :as => :f %>
        <% end %>
    <%= link_to 'Add photo', new_photo_path, :remote=>true, :id=>'add_photo'  %>
    <%= f.submit%>
<% end %> 
```

photo_form 部分：

```
<fieldset class="photo" data-status="<%= f.object.persisted? ? 'db':'new' %>">
   <% if f.object.persisted? %>
      <div class="field">
    <label>Photo:</label><br />
    <%= link_to f.object.photo.url, :target=>'_blank' do %><%= image_tag f.object.photo.url(:mini) %><% end %>
      </div>
   <% else %>
      <%= f.label :photo
      <%= f.file_field :photo %>
      <%= f.text_field :description %>
  <%= f.check_box :_destroy, :class=>'delete' %>
</fieldset> 
```

现在在您的控制器中，您需要 3 个操作来编辑带有照片的订单：编辑、更新、添加照片（用户单击添加照片链接时的 ajax 操作）：

```
class OrdersController < ApplicationController
  def edit
    @order = Order.find(params[:id])
  end

  # Action responsible for updating existing order record
  def update
    @order = Order.find(params[:id])
    if @order.update_attributes(params[:order])
       redirect_to @order, :notice=>'Order updated'
    else
       render :action => "edit" #save error, display order form with errors
    end
  end

  # Action responsible for creating nested form for order photo
  def new_photo
    #nothing just renders 'new_photo.js.erb'
  end
end 
```

new_photo.js.erb：

```
$object=$("<%= escape_javascript( render(:partial => "photo_form", :locals=>{
    :f=>FormBuilder.new("order[photos_attributes][#{rand(400000)}]",Photo.new(),self,{},proc {})
}) ) %>").hide();  //generates new photo view
$object.insertBefore("a#add_photo").slideDown(500); 
```

这只是示例，但在您的应用程序中采用它应该没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:59:04.977

我所要做的就是发表评论`$(function() {`

```
$(document).ready(function() {

    //$(function() {
        var x = $('#uploadform');
        var i = $('#uploadform ul').size() + 1;

        $('#addmore').live('click', function() {
            if ($(".item", x).length < 9) {
                $('<ul class="item" class="field">formfield ' + i + ' <a href="#" id="remfields">Remove</a></p>').appendTo(x);
                i++;
            }
            return false;
        });

        $('#remfields').live('click', function() {
            if (i > 2) {
                $(this).parents('ul').remove();
                i--;
            }
            return false;
        });
    //});​

}); 
```

**编辑：**

插入它们是什么意思？

要访问元素，您可以使用

```
 $('#uploadform > ul').each(function(index) {
        alert(index + ': ' + $(this).text());
    }); 
```

注意您生成的 HTML。您正在为每个 li （列表项）创建 ul （无序列表）。您可能希望将其修复为仅附加列表项。

# javascript - the dictionary defined in context processor doesn't refresh without page reload?

> ID：11439332
> 
> 赞同：0
> 
> 时间：2012-07-11T18:44:55.543
> 
> 标签：javascript, jquery, ajax, django, django-context

I created a custom context processor which returns "unread_messages_count".Now when I'm updating it on the template using:

```
var update_message_count = setInterval(function(){
                        $('a#check_messages').text('{{ unread_messages_count }}');
                        console.log('{{ unread_messages_count }}');
                    },1000); 
```

I'm not getting update count of unread messages.But when I reload the page manually, I get updated count. So, I guess that "unread_messages_count" doesn't refresh on it's own. Right?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:50:09.487

The value `{{ unread_message_count }}` in your javascript is calculated at template render time and will be a hardcoded value in your page's JS (view the page source to see it).

Your question is quite unclear but it seems like you want that value to be updated dynamically. You would use an AJAX call to do this.

# python - 三个表之间的 SQLAlchemy 关系

> ID：11439333
> 
> 赞同：0
> 
> 时间：2012-07-11T18:44:57.230
> 
> 标签：python, sqlalchemy, python-2.7

我有三个表：设备、插槽、端口。

1.  设备将有多个插槽
2.  插槽将有多个端口，但属于单个设备
3.  端口属于单个 Slot

根据我的经验，这显示为：

1.  设备（一对多）插槽
2.  插槽（一对多）端口

我正在尝试在我的 Devices 类中建立一个关系，该关系将为我提供所有关联的 Ports 对象（无论插槽如何）。我想不通。关联表看起来很接近，但我无法从周围的例子中辨别出如何做我想做的事。

```
class Devices(Base):
  __tablename__ = 'devices'
  __table_args__ = {
    'mysql_engine' : 'MyISAM',
    'mysql_charset': 'latin1'
  }

  did             = Column( INTEGER, primary_key=True )
  hostname        = Column( VARCHAR(255) )
  site            = Column( INTEGER, ForeignKey('site.sid'), default=0 )
  model           = Column( INTEGER )
  fqdn            = Column( VARCHAR(255) )

  slots   = relationship("Slots")
  changes = relationship("PortStateLog")
  ports   = relationship("Ports", primaryjoin="and_(Slots.device==Devices.did,Ports.slot==Slots.sid)")

class Slots(Base):
  __tablename__ = 'slots'
  __table_args__ = {
    'mysql_engine' : 'MyISAM',
    'mysql_charset': 'latin1'
  }

  sid         = Column( INTEGER, primary_key=True )
  device      = Column( INTEGER, ForeignKey('devices.did'), default=None )
  slot        = Column( VARCHAR(10) )
  module      = Column( INTEGER )
  slot_status = Column( INTEGER )
  card_status = Column( INTEGER )

  ports = relationship("Ports", primaryjoin="Ports.slot==Slots.sid")

class Ports(Base):
  __tablename__ = 'ports'
  __table_args__ = {
    'mysql_engine' : 'MyISAM',
    'mysql_charset': 'latin1'
  }

  pid         = Column( INTEGER, primary_key=True )
  slot        = Column( INTEGER, ForeignKey('slots.sid'), default=None )
  port        = Column( INTEGER )
  name        = Column( VARCHAR(200) )
  status      = Column( INTEGER )
  description = Column( VARCHAR(200) )
  op_status   = Column( VARCHAR(40) )
  substatus   = Column( INTEGER(4) )
  type        = Column( INTEGER )
  clean       = Column( TINYINT(4) )
  speed       = Column( INTEGER(10) )
  duplex      = Column( CHAR(1) )
  sfp         = Column( INTEGER ) 
```

以上是我到目前为止所拥有的。我只是希望下面的最后一行返回所有端口：

```
d = session.query(Devices).first()

d.ports 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:40:04.523

我认为您的设备类定义的最后一行中的端口关系定义存在问题。我必须将其删除才能在本地使用您的架构。此外，您还没有包含任何`__init__`函数，所以我捏造了这些函数来创建一些示例数据。

我确定您已经知道这一点，但是如果您愿意遍历设备的插槽，则可以轻松地使用设备的端口列表：

```
d1 = session.query(Devices).filter_by(hostname='host1').first()
for slot in d1.slots:
    for port in slot.ports:
        #do something with each Ports object 
```

跳过中间 Slots 级别的一种简单方法是在您的 Devices 类中添加一些语法糖：

```
def ports(self):
    my_ports = []
    for slot in self.slots:
        my_ports.extend(slot.ports)
    return(my_ports) 
```

如果您真的想在设备的同一级别上组合端口作为插槽，您将需要构造一个[AssociationProxy](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/associationproxy.html#composite-association-proxy)（而不是[Association](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#association-object)）来映射端口集合。但是，由于您没有维护多对多关系，AssociationProxy 似乎有点矫枉过正，需要一些工作才能使其返回 Ports 对象列表而不是 pid 列表。

# php - 如何使用 PHP 在第一页加载时在下拉列表中设置默认选项？

> ID：11439336
> 
> 赞同：-1
> 
> 时间：2012-07-11T18:45:03.437
> 
> 标签：php, default, drop-down-menu

我用下面的代码创建了一个下拉列表，但我想在第一次加载页面时设置一个默认选项（即显示最近的日期，而不是第一组选项）。我怎样才能做到这一点？

```
<?php
$startyear = ""; 
$startmonth = "";
$startday = "";
$endyear = "";
$endmonth = "";
$endday = "";

$year  = range(1998,2012);
$month = range(01,12);
$day   = range(01,31);

if($_SERVER['REQUEST_METHOD']=='POST')
{
    foreach($_POST as $key=>$value)
    {
        if(is_numeric($value))
        {
            $$key = $value;
        }
    }
}

?> 
```

在这里形成东西

```
<form name='update' action='' method='POST'>
Start: <select name='startyear'>
    <?php foreach(array_reverse($year) as $y):?>
    <option value="<?php echo $y?>"<?php echo((isset($startyear) && $startyear == $y)?' selected':null)?>><?php echo $y?></option>
    <?php endforeach;?>
</select>
<select name='startmonth'>
    <?php foreach($month as $m): $m = str_pad($m, 2, "0", STR_PAD_LEFT);?>
    <option value="<?php echo $m;?>"<?php echo ((isset($startmonth) && $startmonth == $m)?' selected':null)?>><?php echo $m;?></option>
    <?php endforeach;?>
</select>
    <select name='startday'>
    <?php foreach($day as $d): $d = str_pad($d, 2, "0", STR_PAD_LEFT);?>
    <option value="<?php echo $d;?>"<?php echo ((isset($startday) && $startday == $d)?' selected':null)?>><?php echo $d;?></option>
    <?php endforeach;?>
</select>
<input type='submit' value='View'/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:51:54.783

```
if($_SERVER['REQUEST_METHOD']=='POST')
{
    ...
} else {
    // Set your defaults here.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:53:21.527

由于您的选中检查是这样完成的：

```
<?php echo ((isset($startday) && $startday == $d)?' selected':null)?> 
```

只需使用默认值定义变量，它们是空的！

```
$startyear = ""; 
$startmonth = "";
$startday = "";
$endyear = "";
$endmonth = "";
$endday = ""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:58:13.307

这是你想要的吗？

```
$cur_day  = date('j');
$cur_mon  = date('n');
$cur_year = date('Y'); 
```

然后在选项循环里面是这样的

```
if($y == $cur_year) echo 'selected'; 
```

然后默认选择当前年份，对月份和日期执行相同操作。

# redundancy - 给定一组 N 个值，除一个 Y 外，所有值都是 0 或 X，找到 X 的最有效方法是什么？

> ID：11439337
> 
> 赞同：0
> 
> 时间：2012-07-11T18:45:09.603
> 
> 标签：redundancy, error-correction

基本上我有一组冗余数据，其中一个（奖励点：一个或多个）值可能有错误。一些值也可能是 0，这意味着忽略/无效。返回“好”值的最有效方法是什么？

愚蠢的解决方案是一个 for 循环，它遍历集合并在两次找到相同的非零值时返回。但我觉得可能有一些逻辑/位黑客表达会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:52:08.400

“愚蠢”的解决方案可能是最好的解决方案，尤其是在数据集中没有很多零的情况下。在大多数情况下，你会很早就脱离循环。

在有很多零的情况下，如果您的硬件能够快速扫描非零条目，则可以优化您的速度。我想在 FPGA 硬件上搜索非零非常容易，但我自己没有这方面的个人经验。

# java - 将多个 Java 对象作为键值对保存到文件中的最简单方法是什么？

> ID：11439339
> 
> 赞同：0
> 
> 时间：2012-07-11T18:45:16.407
> 
> 标签：java, serialization, key-value-store

我正在寻找最简单的键值存储，它允许我在文件中保存和检索自定义对象，例如：

```
Set obj1;
Map obj2;
...
Store.saveObject(obj1, "mySet", "myFile.dat");
Store.saveObject(obj2, "myMap", "myFile.dat");
...
obj1 = (Set) Store.getObject("mySet", "myFile.dat");
obj2 = (Map) Store.getObject("myMap", "myFile.dat"); 
```

其中 obj1 和 obj2 只是示例对象，“mySet”和“myMap”是键，“myFile.dat”是文件。有没有简单的图书馆接近这个？与我的代码等效的示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:47:23.570

[您可以使用java.util.Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)和[Java serialization](https://stackoverflow.com/questions/2836646/java-serializable-object-to-byte-array)的某种组合。但是，您可能希望对字节数组进行[base64 编码/解码。](http://www.javatips.net/blog/2011/08/how-to-encode-and-decode-in-base64-using-java)

# c# - httplistener 和 http 连接方法

> ID：11439344
> 
> 赞同：1
> 
> 时间：2012-07-11T18:45:27.970
> 
> 标签：c#, .net

我正在使用 ipad 上的 HTTP 代理设置将流量重定向到我的 .net httplistener。如果我使用 ipad 代理发送 http 流量，则会将流量发送到我的 httplistener，然后我的代码就会完成它的工作。如果我使用 ipad 及其 http 代理发送 https 流量，我会看到数据包出现在我的机器上（使用 wireshark 嗅探）的端口 8443，但我的侦听器没有被启动。我的前缀和证书是正确的。我通过指示浏览器使用端口 8443 直接访问我的机器而不使用 http 代理来证明了这一点。

我从对 https 连接尝试的嗅探中注意到 HTTP CONNECT 方法包含在数据包中。它可能试图通过隧道传输 SSL 流量。http.sys 或 httpListener 是否识别/处理 CONNECT 方法？我很好奇为什么我的 httplistener 没有启动？

关于如何进一步解决此问题的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T18:54:13.050

您的问题中没有说明，因此您是否实际设置了 HttpListener 以支持带有本问题中记录的站点证书的 SSL？

[如何将 SSL 添加到使用 httplistener 的 .net 应用程序 - 它*不会*在 IIS 上运行](https://stackoverflow.com/questions/4004/how-do-i-add-ssl-to-a-net-application-that-uses-httplistener-it-will-not-be)

# android - 如何在android应用程序中只显示一次登录屏幕？

> ID：11439345
> 
> 赞同：0
> 
> 时间：2012-07-11T18:45:31.170
> 
> 标签：android, android-activity

我有这个应用程序，它会在启动时提示用户输入密码。成功登录后，下一个活动是菜单。在菜单中，如果我按下后退按钮，我将返回登录活动。是否可以只显示一次登录活动而在用户按下后退按钮时不显示？

流程是这样的：

```
 ______
            |      |
AppStart -> |Login | -> (successful) -> Menu
            |______| > (unsuccessful)    |
                ^_________|<_____________| (Back button) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:55:26.013

**1）第一种方法：**

在使用 开始下一个活动后立即调用`finish()`您的登录活动`startActivity()`。

**2）第二种方法：**

另一种方法是将此属性添加到 AndroidManifest.xml 中的活动中：`android:noHistory="true"`

例子，

```
<activity android:name=".LoginActivity" android:noHistory="true"/> 
```

此属性指示 Android 在其导航离开后从历史堆栈中删除 LoginActivity。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T18:48:14.893

在您的清单中，添加以下属性：

```
android:noHistory="true" 
```

这将防止它被添加到活动堆栈中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:47:23.793

在 Login Activity 的清单声明中使用`android:excludeFromRecent = "true"`标记。

像下面

```
 <activity
       android:name=".loginScreen"
        android:excludeFromRecents="true"

    </activity> 
```

# android - 电话间隙插件未正确创建。未调用 plugin.java

> ID：11439349
> 
> 赞同：0
> 
> 时间：2012-07-11T18:45:49.360
> 
> 标签：android, cordova

我是 Android 和电话差距的新手，我正在尝试同时学习两者。下面我不仅尝试创建一个插件，还尝试查看控制从一个部分到另一个部分的流程。你不仅可以告诉我为什么我的应用程序没有输出我认为它应该输出的内容，而且你可以质疑我的逻辑并清楚我是否做错了。这是我想要做的

1：首先我有从 DroidGap 扩展的“MainActivity.java”

```
public class MainActivity extends DroidGap {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");    
}
} 
```

2：如您所见，我正在从我的 java 类中调用 index.html。所以，这里是'index.html'。

```
<!DOCTYPE html>
<html>

  <head>
  <title></title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="BreakitPlugin.js"></script>
    <script type="text/javascript">
function onBodyLoad()
{       
document.addEventListener("deviceready", onDeviceReady, false);
}
function onDeviceReady()
{
    window.plugins.breakitPlugin.createNavigationBar();
}
</script>
</head>
<body onload="onBodyLoad()">
</body>
</html> 
```

3：然后是脚本文件

```
function BreakitPlugin() {    } 

BreakitPlugin.prototype.createNavigationBar = function() {
cordova.exec(null, null, "BreakitPlugin", "createNavigationBar", []); // Edited the fifth parameter
};

cordova.addConstructor(function(){
cordova.addPlugin("breakitPlugin", new BreakitPlugin());
}); 
```

4：然后是最重要和最关键的部分 从插件扩展而来的plugin.java。这是似乎不起作用的部分。我在这里尝试过设置内容视图，但它不起作用。我也尝试过 log 命令，但运行时没有显示相应的日志语句。所以，这个类中的两个函数似乎都没有被调用。顺便说一句，我的 '.html' 和 '.js' 中有 'alert' 语句，它似乎得到了正确的警告。这是代码。

```
public class BreakitPlugin extends Plugin {
@Override
public PluginResult execute(String action, JSONArray args, String callbackId) {
    PluginResult.Status status = PluginResult.Status.OK;
            String result = "";
    Log.i("Execute", "Log Cat");

    if (action.equals("createNavigationBar")) {

        this.createNavigationBar();
    }
    else {
        status = PluginResult.Status.INVALID_ACTION;
    }
    return new PluginResult(status, result);
}
public void createNavigationBar() {
    //Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.vogella.com")); 
    //Activity act = new Activity();
    //act.setContentView(R.layout.activity_main);
    Log.i("Create navigation bar", "Log Cat");
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:18:22.607

好吧，我可以立即看到一些错误的地方：

1）科尔多瓦应该是科尔多瓦在你的JS文件中。

2) 假设 BreakitPlugin 确实在包“com.example.breakitwebapp”中，那么你的插件行应该是：

```
<plugin name="BreakitPlugin" value="com.example.breakitwebapp.BreakitPlugin"/> 
```

插件的名称必须与您在 codova.exec 上使用的名称相匹配。

3) 在 Java 中永远不会调用“createNavigationBar”。您必须在 exec 中执行此操作：

```
public PluginResult execute(String action, JSONArray args, String callbackId) {
    if ("createNavigationBar".equals(action) {
        Log.i("Log Cat", "Create navigation bar");
        this.createNavigationBar();
    }
    return null;
} 
```

4）除此之外，您不会返回 PluginResult，因此不会调用 onSuccess 或 onFailure 回调。请注意，在您的示例中它们都是空的。

# winforms - 为什么我的 ColumnHeadersDefaultCellStyle 在 Visual Studio 设计器中不断被重置？

> ID：11439352
> 
> 赞同：23
> 
> 时间：2012-07-11T18:46:03.537
> 
> 标签：winforms, visual-studio, visual-studio-2008, datagridview

我正在尝试在 Visual Studio 2008 中将 DataGridView 的列标题设为粗体。

每次我使用属性框将 ColumnHeadersDefaultCellStyle 更改为 Calibri 9.75pt 粗体时，下次我重新打开保存的表单时，ColumnHeadersDefaultCellStyle 已恢复为 Calibri 9.75，没有粗体。

我的表单字体是没有粗体的 Calibri 9.75，我的默认单元格样式也是如此，但我应该能够用我的 ColumnHeader 样式覆盖默认单元格样式，对吗？

我可以通过在显示表单时设置样式以编程方式解决此问题，但我们希望 Visual Studio 设计器显示粗体标题，因此我们可以根据粗体标题文本占用的空间适当地布局列。

此外，实际的设计器文件指定 ColumnHeadersDefaultCellStyle 为粗体，即使设计器界面显示它不是粗体。

```
dataGridViewCellStyle1.Font = new System.Drawing.Font("Calibri", 9.75F,  
    System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
dataGridViewCellStyle1.ForeColor = System.Drawing.SystemColors.WindowText;
dataGridViewCellStyle1.SelectionBackColor = System.Drawing.SystemColors.Highlight;
dataGridViewCellStyle1.SelectionForeColor = System.Drawing.SystemColors.HighlightText;
dataGridViewCellStyle1.WrapMode = System.Windows.Forms.DataGridViewTriState.True;

this.receiptDetailView.ColumnHeadersDefaultCellStyle = dataGridViewCellStyle1; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-05T12:51:29.087

您是否尝试过检查**EnableHeadersVisualStyles**值？

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.columnheadersdefaultcellstyle.aspx)：

> 如果启用了视觉样式并且 EnableHeadersVisualStyles 设置为 true，则除 TopLeftHeaderCell 之外的所有标题单元格都使用当前主题进行绘制，并且 ColumnHeadersDefaultCellStyle 值将被忽略。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-09-19T12:24:33.173

这是一个错误，尽管微软可能会尝试将其称为一项功能。仅当 EnableHeadersVisualStyles 设置为 TRUE 时，DataGridView 标题单元格才应该继承当前主题，如果设置为 false，则使用 ColumnHeaderDefaultCellStyles 中的设置。但是 DGV 会忽略 EnableHeadersVisualStyles 并始终继承它所在的父容器的字体。

rutlean 和 Nico Engler 的建议都有效。这是我一直以来的标准做法：将您的 DGV 放在面板中（根据您的应用程序，您可能希望将 Dock 属性设置为填充。然后将面板的字体设置为您想要的设置。您的 DGV 现在将始终继承那个设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T07:15:24.127

我找到了一种解决方法，只需使用以下代码编辑 XXXX.Designer.cs 就可以了。

```
this.receiptDetailView.ColumnHeadersDefaultCellStyle = dataGridViewCellStyle1;
this.receiptDetailView.ColumnHeadersDefaultCellStyle.Font = new System.Drawing.Font("Calibri", 9.75F, System.Drawing.FontStyle.Bold); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T09:23:57.447

似乎这是一个错误，但我不确定它为什么会发生。我已经以各种可能的方式对其进行了测试，并且该值被父控件值覆盖，无论它是否设置。这与所有其他 WinForms（或任何其他 UI 框架）控件的工作方式相反，并且没有任何意义。我还测试了各种其他控件，但没有发现发生这种情况的另一种情况。

ColumnHeadersDefaultCellStyle Font 仅在父控件（本例中为表单）上未设置 Font 属性时才重要。

我正在为最受支持的答案提供赏金，但这不是这里发生的事情。

我一直在使用的“解决方案”是在表单加载事件中再次设置字体，但这不是一个完美的解决方案，因为这样的代码不属于那里。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-18T23:47:15.887

我遇到了同样的问题。但是，我的 dataGridView 位于 groupbox 中。在 VS 2010 重新启动时，dataGridView 字体将始终是 groupBox 设置的任何内容。绝对是我想要的错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-17T16:53:40.143

我通过添加框架解决了这个问题。对我来说，datagridview 位于 groupbox 内（尽管其他一些容器类型也是如此）。

通过在 groupbox 内放置一个面板来解决，为该面板设置适当的字体，将 datagridview 放在该面板内，默认情况下它继承字体。

我正在使用 VS2010

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-07T08:48:16.423

答案其实很简单。

您将字体样式设置为 Form1 [Arial; 8,25pt]。让我们看看设计师：

```
private void InitializeComponent()
    {
        System.Windows.Forms.DataGridViewCellStyle dataGridViewCellStyle1 = new System.Windows.Forms.DataGridViewCellStyle();
        this.dataGridView1 = new System.Windows.Forms.DataGridView();
        this.Column1 = new System.Windows.Forms.DataGridViewTextBoxColumn();
        this.Column2 = new System.Windows.Forms.DataGridViewTextBoxColumn();
        this.Column3 = new System.Windows.Forms.DataGridViewTextBoxColumn();
        ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).BeginInit();
        this.SuspendLayout();
        // 
        // dataGridView1
        // 
        dataGridViewCellStyle1.Alignment = System.Windows.Forms.DataGridViewContentAlignment.MiddleLeft;
        dataGridViewCellStyle1.BackColor = System.Drawing.SystemColors.Control;
        dataGridViewCellStyle1.Font = new System.Drawing.Font("Calibri", 9.75F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(238)));
        dataGridViewCellStyle1.ForeColor = System.Drawing.SystemColors.WindowText;
        dataGridViewCellStyle1.SelectionBackColor = System.Drawing.SystemColors.Highlight;
        dataGridViewCellStyle1.SelectionForeColor = System.Drawing.SystemColors.HighlightText;
        dataGridViewCellStyle1.WrapMode = System.Windows.Forms.DataGridViewTriState.True;
        this.dataGridView1.ColumnHeadersDefaultCellStyle = dataGridViewCellStyle1;
        this.dataGridView1.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
        this.dataGridView1.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
        this.Column1,
        this.Column2,
        this.Column3});
        this.dataGridView1.EnableHeadersVisualStyles = false;
        this.dataGridView1.Location = new System.Drawing.Point(49, 62);
        this.dataGridView1.Name = "dataGridView1";
        this.dataGridView1.Size = new System.Drawing.Size(443, 309);
        this.dataGridView1.TabIndex = 0;
        // 
        // Column1
        // 
        this.Column1.HeaderText = "Column1";
        this.Column1.Name = "Column1";
        // 
        // Column2
        // 
        this.Column2.HeaderText = "Column2";
        this.Column2.Name = "Column2";
        // 
        // Column3
        // 
        this.Column3.HeaderText = "Column3";
        this.Column3.Name = "Column3";
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 14F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(546, 457);
        this.Controls.Add(this.dataGridView1);
        this.Font = new System.Drawing.Font("Arial", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(238)));
        this.Name = "Form1";
        this.Text = "Form1";
        this.Load += new System.EventHandler(this.Form1_Load);
        ((System.ComponentModel.ISupportInitialize)(this.dataGridView1)).EndInit();
        this.ResumeLayout(false);

    } 
```

现在您可以看到，您的 Datagridview 标头的字体设置已保存。但是，之后出现了表单的字体设置，最终覆盖了 Datagridview 字体设置。

我的建议是将表单字体设置恢复为默认值。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-08T09:34:03.077

使用此代码

```
dataGridView1.EnableHeadersVisualStyles = false;
dataGridView1.SelectionBackColor = System.Drawing.SystemColors.Highlight; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-17T09:33:39.283

试试这个：

```
DataGridView1.ColumnHeadersDefaultCellStyle.Font = new Font("Calibri", 9.75F, FontStyle.Bold); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-16T01:29:07.463

这是一个错误，即使在 .net 4.6 中仍然存在，问题是**ColumnHeadersDefaultCellStyle**字体总是被它的**Parent**字体覆盖，所以我想出了一个解决方法：

首先，您需要将**DataGridView**添加到自己的**Panel**中，Panel 将在这里起到屏蔽作用，我相信您需要将 DataGridView 的 Dock 属性设置为 Fill。

其次，您需要将以下代码添加到**ColumnHeadersDefaultCellStyleChanged**事件中。

```
 If Parent IsNot Nothing Then
       Parent.Font = ColumnHeadersDefaultCellStyle.Font
  End If 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-05-09T10:14:48.450

我今天遇到了同样的问题，似乎 DataGridView 的 ColumnHeadersDefaultCellStyle 被它所属表单的字体样式覆盖。

作为解决方案，我将表单字体的 GdiCharSet 参数设置为 0。完成后，不会覆盖 ColumnHeadersDefaultCellStyle 的字体。

我在 VS 2010 和 Window 8 上。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-16T21:54:25.170

我知道这个话题很老，但是我在 VS 2015 中遇到了同样的问题，ColumnDefaultHeadersCellStyle 字体大小总是恢复到 10pt（我需要它是 14pt）。我可以通过首先更改字体本身来解决这个问题，然后我可以更改字体大小。

我最初使用的字体是 SEGOE UI SEMIBOLD，我将其更改为 SEGOE UI 并且能够更改大小。我还没有研究为什么使用半粗体版本会阻止我改变大小。此外，在启用 VisualStyles 并将 EnableHeadersVisualStyles 设置为 true 的情况下，此方法对我有用。

如果有人仍然遇到此问题，我的建议是尝试更改为另一种字体。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-29T23:48:10.117

你可以试试；

```
Private Sub DgvListeFt_CellPainting(sender As Object, e As DataGridViewCellPaintingEventArgs) Handles DgvListeFt.CellPainting
    Call KolonBaslikDGV(sender, e)
End Sub
Sub KolonBaslikDGV(ByVal S As Object, ByVal E As DataGridViewCellPaintingEventArgs)
    E.PaintBackground(E.CellBounds, True)
    If E.RowIndex = -1 Then
        If E.Value Is Nothing Then
            E.Handled = True
            Return
        End If
        E.Handled = True

        Dim headerFont = New Font("Ariel", 9, FontStyle.Regular)
        Dim myBounds As Rectangle = E.CellBounds
        myBounds.X = E.CellBounds.X + 4
        Dim sf = New StringFormat With {.Alignment = StringAlignment.Near,
                                        .LineAlignment = StringAlignment.Center}
        E.Graphics.DrawString(E.Value.ToString, headerFont, Brushes.MediumVioletRed, myBounds, sf)
        headerFont.Dispose()
        sf.Dispose()
    End If
End Sub 
```

# r - 'show' 是一个普通的 S4 通用函数吗？

> ID：11439357
> 
> 赞同：5
> 
> 时间：2012-07-11T18:46:26.093
> 
> 标签：r, show, s4, generic-function

我正在尝试为我的类创建一个方法，该方法继承自 data.frame。我最初希望也能从 data.frame 继承“show”方法，但我也可以自己编写。我定义了我的类和“显示”方法如下：

```
setClass("SCvec", representation(auth = "character",
    dev = "character",
    sensor = "character",
    channel = "character",
    starttime = "character",
    endtime = "character"),
    contains="data.frame")
setMethod("show", signature(x="SCvec"), function(x) print(x)) 
```

当我`show`在 R 控制台中输入时，它会打印出：

从包“methods”定义的“show”的标准泛型

```
function (object) 
standardGeneric("show")
<bytecode: 0x0396bee8>
<environment: 0x0393ab60>
Methods may be defined for arguments: object
Use  showMethods("show")  for currently available ones.
(This generic function excludes non-simple inheritance; see ?setIs) 
```

所以看起来我不需要自己使用 StandardGeneric() 将它变成泛型。但是当我运行我的`setMethod("show", signature(x="SCvec"), function(x) print(x))`线路时，我得到了错误

```
Error in match.call(definition, call, expand.dots) : 
  unused argument(s) (x = c("SCvec", "")) 
```

我已经定义了这个方法，就像我定义任何其他方法一样。为什么这个方法定义不起作用？“显示”与其他通用功能不同吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T18:56:58.360

该函数`show`接受一个参数`object`，因此您需要针对该正式参数定义您的签名和函数定义：

```
setMethod("show", signature(object="SCvec"), function(object) print(object)) 
```

您还可以`show`通过键入来查看定义的其他方法

```
showMethods(show) 
```

这向您展示了所有其他方法也是根据类定义的`object`。

# php - 如何从另一组日期中减去一组日期，最后添加所有行

> ID：11439360
> 
> 赞同：-1
> 
> 时间：2012-07-11T18:46:32.930
> 
> 标签：php, mysql, sql

我有`data`带有列`start`和的表`End`。列 start 和 end 具有以下格式的日期和时间： 2012-04-06 07:43:05 。我需要这样做：结束 - 开始（显然对于每一行）并将所有结果时间加起来。[仅时间字段减法就足够了，因为开始和结束的日期可能相同]

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:54:18.480

我可能会通过在 MySQL 中使用 UNIX_TIMESTAMP() 将日期转换为 unix 时间戳来解决此问题，然后更容易进行您想要的这些计算。

就像是：

```
SELECT
   SUM(UNIX_TIMESTAMP(`End`) - UNIX_TIMESTAMP(`start`)) AS time_sum
FROM
   data 
```

这将在几秒钟内为您提供所有差异的总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:52:02.257

```
select sum(timediff(`start`, `end`)) as diff_sum
from your_table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:52:18.853

您可以使用 datediff 来获取天数，或者使用 timediff 来获取像“01:23:45”这样的时间，或者我最喜欢的返回秒数的 unix 时间戳

```
UNIX_TIMESTAMP(end) - UNIX_TIMESTAMP(start) AS sec 
```

# c# - WCF REST：期望我的 XML 在请求中看起来像什么？

> ID：11439367
> 
> 赞同：6
> 
> 时间：2012-07-11T18:46:57.623
> 
> 标签：c#, asp.net, wcf, apache-flex, wcf-rest

我的 WCF 服务中有以下方法：

```
[OperationContract]
[WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Xml)]
public int GetOne(string param1, string param2)
{
    return 1;
} 
```

我正在从 Flex 应用程序发送 xml，它需要一个如下所示的对象：`{ param1: "test", param2: "test2" }`并将其转换为以下请求：

```
POST http://localhost:8012/MyService.svc/GetOne HTTP/1.1
Accept: application/xml
Accept-Language: en-US
x-flash-version: 10,1,53,64
Content-Type: application/xml
Content-Length: 52
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: localhost:8012
Connection: Keep-Alive
Pragma: no-cache
Cookie: ASP.NET_SessionId=drsynacw0ignepk4ya4pou23

<param1>something</param1><param2>something</param2> 
```

我得到错误`The incoming message has an unexpected message format 'Raw'. The expected message formats for the operation are 'Xml', 'Json'.`。我读过的所有内容都表明我只需要 content-type 是`application/xml`，但由于某种原因它仍然认为它是 Raw 。鉴于我的方法签名，我对它的期望以及我需要如何形成请求以便它将其作为 XML 接受感到困惑。

我在这里遗漏了一些明显的东西吗？为什么它在指定 XML 和提供 XML 时会认为它是 RAW？

**编辑**- 这是 Flex 方面，以防我在这里遗漏一些东西。

```
var getOneService:HttpService = new HttpService("myURL");

getOneService.method = "POST";
getOneService.resultFormat = "e4x";
getOneService.contentType = HTTPService.CONTENT_TYPE_XML;
getOneService.headers = { Accept: "application/xml" };

getOneService.send({ param1: "test", param2: "test2" }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:48:18.917

我不认为你可以通过一个`POST`操作传递 2 个参数来让框架自动反序列化它。您已经尝试了以下一些方法：

1.  将您的 WCF 方法定义如下：

    ```
    [OperationContract]
    [WebInvoke(Method = "POST", 
        BodyStyle = WebMessageBodyStyle.Bare, 
        ResponseFormat = WebMessageFormat.Xml, 
        RequestFormat = WebMessageFormat.Xml, 
        URITemplate="/GetOne/{param1}")]
    public int GetOne(string param1, string param2)
    {
        return 1;
    } 
    ```

    您的原始 POST 请求如下所示：

    ```
    POST http://localhost/SampleService/RestService/ValidateUser/myparam1 HTTP/1.1
    User-Agent: Fiddler
    Content-Type: application/xml
    Host: localhost
    Content-Length: 86

    <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">my param2</string> 
    ```

2.  将您的 WCF REST 方法更改为如下：

    ```
    [OperationContract]
    [WebInvoke(Method = "POST", 
        BodyStyle = WebMessageBodyStyle.WrappedRequest, 
        ResponseFormat = WebMessageFormat.Json, 
        RequestFormat = WebMessageFormat.Json)]
    public int GetOne(string param1, string param2)
    {
        return 1;
    } 
    ```

    现在您的原始请求应如下所示：

    ```
    POST http://localhost/SampleService/RestService/ValidateUser HTTP/1.1
    User-Agent: Fiddler
    Content-Type: application/json
    Host: localhost
    Content-Length: 86

    {"param1":"my param1","param2":"my param 2"} 
    ```

3.  将您的 WCF REST 方法更改为如下：

    ```
    [OperationContract]
    [WebInvoke(Method="POST", 
        BodyStyle=WebMessageBodyStyle.WrappedRequest, 
        ResponseFormat=WebMessageFormat.Xml, 
        RequestFormat= WebMessageFormat.Xml)]
    public int GetOne(string param1, string param2)
    {
       return 1;
    } 
    ```

    现在您的原始请求如下所示：

    ```
    POST http://localhost/SampleService/RestService/ValidateUser HTTP/1.1
    User-Agent: Fiddler
    Content-Type: application/xml
    Host: localhost
    Content-Length: 116

    <ValidateUser xmlns="http://tempuri.org/"><Username>my param1</Username><Password>myparam2</Password></ValidateUser> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:20:53.847

有效的 XML 必须有一个根元素。WCF REST 中也没有将 XML 元素映射到字符串参数的魔法。您可以将 XElement 作为操作参数。

```
[OperationContract]
[WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Xml)]
public int GetOne(XElement content)
{
    string param1 = content.Elements().First(element => element.Name == "param1").Value;
    string param2 = content.Elements().First(element => element.Name == "param2").Value;

    return 1;
} 
```

您发送的数据将类似于：

```
<parameters>
    <param1>something</param1>
    <param2>something</param2>
</parameters> 
```

# java - 如何开发第一次启动时出现的演练对话框？

> ID：11439378
> 
> 赞同：6
> 
> 时间：2012-07-11T18:47:34.697
> 
> 标签：java, android, android-layout, android-activity, android-dialog

我想开发一个由 3 个步骤组成的对话框，以在用户首次启动应用程序时对其进行指导。

下图是我想要实现的示例：

![在此处输入图像描述](../Images/9d38e0637ec878d0457460b8ac42a339.png)

1-我想知道如何在右上角添加一个关闭对话框的标记？

2-如何实现屏幕底部指示当前步骤的小圆圈？它们可以通过编程方式创建吗？

3-为了确定，我决定使用**ViewFlipper**在 Dialog 步骤之间导航。这是正确的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:54:47.383

> 我想知道如何在右上角添加一个关闭对话框的标记？

不要那样做。看起来它是来自 iphone 应用程序的直接端口。使用原生 android 对话框容器/按钮。

> 如何实现屏幕底部指示当前步骤的小点？

你试过什么？根据工作流程的其余部分，有上百万种方法可以做到这一点。

> 只是为了确定，我决定使用 ViewFlipper 在对话步骤之间导航。这是正确的方法吗？

也许。这取决于您要显示的内容。如果您只显示单个图像或简单的东西，那么这可能是最好的方法。我会为不同的步骤创建不同的对话框片段（您正在使用片段，对吗？）。这样，您可以在工作流程中移动时自动将它们推送到后台堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:10:53.143

实现“底部小点”的方法之一是：

*   在您创建的每个图像中包含点。
*   绘制每个图像中突出显示的点之一
*   按突出显示的点的顺序翻阅图像。（或按您想要显示图像的顺序突出显示点）

但这会使您的点在图像翻转期间消失。

如果你想避免这种情况：

*   创建两个不同的图像视图，一个作为主图像的容器，另一个作为点的容器，将第一个图像视图放在另一个上方。
*   创建一个只包含一个点的图像，每个点都突出显示一个点
*   同步翻阅两个 imageView
*   在上部图像视图中使用“翻转动画”
*   不使用动画，或为点使用最小动画。

这将产生预期的效果。希望这可以帮助 ：-）

# mysql - SQL 从另一列的值创建一列

> ID：11439380
> 
> 赞同：1
> 
> 时间：2012-07-11T18:47:38.803
> 
> 标签：mysql, sql-server

我有下表：

```
|  id  |         name            |
----------------------------------
|  1   | 236 SRTD - Something 1  |
----------------------------------
|  2   | 236 SRTD - Something 2  |
----------------------------------
|  3   | 236 SRTD - Something 3  |
----------------------------------
|  4   | 387 SRTD - Something 1  | 
```

从该表中，我想构建另一个类似的视图，但如下所示：

```
|  id  |  SRTD  |         name            |
-------------------------------------------
|  1   |  236   | 236 SRTD - Something 1  |
-------------------------------------------
|  2   |  236   | 236 SRTD - Something 2  |
-------------------------------------------
|  3   |  236   | 236 SRTD - Something 3  |
-------------------------------------------
|  4   |  387   | 387 SRTD - Something 1  | 
```

如何修改名称列，获取 SRTD 编号，然后创建另一个包含该值的列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:49:09.323

对于 SQL Server：

```
SELECT id, SRTD = SUBSTRING(name, 1, CHARINDEX(' ', name)), name
  FROM dbo.table; 
```

# database - 为什么使用数字而不是字母作为标识？

> ID：11439381
> 
> 赞同：3
> 
> 时间：2012-07-11T18:47:39.200
> 
> 标签：database, structure

为什么在数据库中使用数字作为 ID（想想主键 + AI）并且几乎无处不在而不是字母？有 10 个数字可用，而英文字母表有多达 26 个字母。

假设每个字母/数字都有一个位置。*98*需要两个点，*1202*需要四个点，依此类推。在四个点中，您最多可以存储 10 000 个 ID，但如果使用字母代替，则可以存储多达 456 976 个具有相同点数的 ID。如果您使用区分大小写，则更是如此。**这几乎是 50 倍。**

我确实意识到这对普通用户来说很可能无关紧要，但为什么大型数据库不使用字母而不是数字作为 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T18:51:48.297

您混淆了数字值的字符。

使用整数（例如 32 位整数）作为数据类型的 ID 列*每*行仅占用 4 个字节。它也将是内存中的本机值，并且可以在 CPU 中本机执行（作为二进制表示）。

这对于字符来说是不一样的——即使假设使用了 ASCII（8 位），当你超过 4 个字符时，你正在使用更多的空间。您还需要在值之间进行转换，以便进行有效的比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:51:48.403

数字包装更好。您假设因为数字以十进制显示，所以它们存储为十进制，但它们实际上是二进制的。针对计算机进行了优化:)。

如果要表示 26 个字母之一，则需要 2^(个 5)二进制数字。每个 5 位块丢失 32-26=8 个可能的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:52:40.543

没有硬性规定不能在数据库中使用字母数字字段作为 ID。人们总是这样做。

至于为什么使用数字更常见......

*   大多数数据库系统的设计都具有数字的自动递增能力。（是的，我知道，这是一个鸡/蛋场景）
*   数字可以/通常确实占用更少的存储字节。（是的，您可以存储大量数字和较短的字符串来克服这个问题，但作为一般规则......）

    *   我打算对此进行扩展，但其他人都以准确描述存储 int 与 varchar 所需的字节之间的差异来击败我。现在添加它会很愚蠢。;-)
*   在我使用过的每个系统上，数字排序都不同于字符串排序：
    *   值 1、12、3、2、20 按数字排序为 1、2、3、12、20，但按字母数字排序时：1、12、2、20、3
*   需要更多的计算能力来克服前一点，因此数字的使用效率更高。

    *   这就是为什么大多数数据库都设计为使用自动递增数字而不是第一个项目符号中的自动递增字符串的答案。不管是鸡还是蛋，我都交给你了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T18:50:58.450

因为计算机只能处理数字。甚至字符也被计算机视为数字。

此外，使用字符串的效率远低于数字。

任何小于 4,294,967,296 (2^32) 的数字只能存储在 4 个字节中，而即使是*5 个*字符（每个字符占用一个字节）的字母字符串也只允许 11,881,376 种可能性。

计算机不会在一个字节中记录一个以 10 为基数的数字。每个字节实际上可以保存 256 个不同的可能值。

# android - 以编程方式将视图添加到 LinearLayout 的中间

> ID：11439382
> 
> 赞同：5
> 
> 时间：2012-07-11T18:47:58.140
> 
> 标签：android, android-layout

我有一个带有两个视图的 LinearLayout

```
<LinearLayout>
    <TextView />
    <Textview />
</LinearLayout> 
```

通过我的程序，我想`TextView`在这两个现有`TextViews`的 '. `RelativeLayout`使用with`layout_below`参数很容易做到。我该怎么做`LinearLayout`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-11T18:53:01.510

[`LinearLayout.addView(View v, int index)`](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int%29)

文档是从这类事情开始的好地方。

只需将索引传递到您想要放置的位置（即第二个位置将是索引 1）。

# java - 在 Android 上的 ListFragment 中使用 ArrayAdapter 获取构造函数错误

> ID：11439392
> 
> 赞同：2
> 
> 时间：2012-07-11T18:48:48.543
> 
> 标签：java, android, eclipse, android-listview, android-fragments

这是我的代码。我`The constructor ArrayAdapter<String>(MainFragment, int, String[]) is undefined`在 ArrayAdapter 上遇到错误。

如何填充`listView1`数组`items`？

```
public class MainFragment extends ListFragment {    

    String[] items = { "12 Monkeys", "(500) Days of Summer", "Chariots of Fire" };

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items));
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        return super.onCreateView(inflater, container, savedInstanceState);
    }
} 
```

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T18:51:05.527

片段不是上下文对象。您需要将 Activity 对象 (Fragment.getActivity()) 作为第一个参数传递。

# arrays - oracle package sp，不知道如何调试（带代码）

> ID：11439393
> 
> 赞同：-1
> 
> 时间：2012-07-11T18:48:49.700
> 
> 标签：arrays, oracle, stored-procedures

我正在使用包存储过程接受数组（表）参数，您可以看到相关问题[需要包示例中的 Oracle 存储过程接受数组（表）参数](https://stackoverflow.com/questions/11435201/an-oracle-stored-procedure-accept-arraytable-parameter-in-package-example-need)。创建 storeprocedur 时没有错误，但是当我调用它时，那里是一些错误。这是什么是存储过程：

```
CREATE OR REPLACE TYPE t_table IS TABLE of VARCHAR2(255);
    /
    CREATE OR REPLACE PACKAGE simon_pkg IS
        TYPE t_table IS TABLE of VARCHAR2(255);
        TYPE c_cursor IS ref CURSOR;
        PROCEDURE f (t_input in t_table,c_out out c_cursor);
    END;
    /
    CREATE OR REPLACE PACKAGE BODY simon_pkg IS
        PROCEDURE f (t_input in t_table,c_out out c_cursor) IS
            v_cursor c_cursor;
        BEGIN
            OPEN v_cursor FOR
                SELECT last_name
                FROM employees
                WHERE last_name IN
                    (SELECT * FROM TABLE(t_input));
            c_out := v_cursor;
        END f;
    END;
    / 
```

这就是我调用它时正在做的事情：

```
DECLARE
    TYPE c_cur IS REF CURSOR;
    c_result c_cur;
    m_table t_table := t_table();
BEGIN
    m_table.EXTEND(2);
    m_table(1) := 'Urman';
    m_table(2) := 'Vargas';
    simon_pkg.f(m_table,c_result);
    SELECT * FROM TABLE(c_result);
END;
/ 
```

等待帮助！请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:59:01.687

发布您遇到的错误总是有帮助的。这样我们就不用猜测了。我可以看到的错误...

首先，您不需要在包中声明类型。您已经在定义 SQL 类型

```
CREATE OR REPLACE TYPE t_table IS TABLE of VARCHAR2(255);
/ 
```

您的包声明不应声明具有相同名称的单独 PL/SQL 类型。这只会使您的生活更具挑战性，因为您必须弄清楚任何给定参考`t_table`所使用的​​两种类型中的哪一种。您的包声明也不需要为弱引用游标声明类型——Oracle 已经提供了该`sys_refcursor`类型。因此，您的包装规范只需要

```
CREATE OR REPLACE PACKAGE simon_pkg 
IS
    PROCEDURE f (t_input in t_table,
                 c_out out sys_refcursor);
END;
/ 
```

这意味着您的包裹体可以是

```
 CREATE OR REPLACE PACKAGE BODY simon_pkg IS
    PROCEDURE f (t_input in t_table,
                 c_out  out sys_refcursor) 
    IS
    BEGIN
        OPEN c_out FOR
            SELECT last_name
            FROM employees
            WHERE last_name IN
                (SELECT * FROM TABLE(t_input));
    END f;
END; 
```

根据您要完成的任务，可以通过几种不同的方式调用该过程。您可以编写遍历光标并将输出写入`dbms_output`缓冲区的代码（假设您使用的任何工具都知道如何从缓冲区读取以显示输出）。

```
DECLARE
    c_result sys_refcursor;
    m_table t_table := t_table();
    l_last_name varchar2(100);
BEGIN
    m_table.EXTEND(2);
    m_table(1) := 'Urman';
    m_table(2) := 'Vargas';
    simon_pkg.f(m_table,c_result);

    LOOP
      FETCH c_result INTO l_last_name;
      EXIT WHEN c_result%notfound;
      dbms_output.put_line( l_last_name );
    END LOOP;
    CLOSE c_result;
END;
/ 
```

如果您使用 SQL*Plus（或其他实现 SQL*Plus 变量的工具）

```
VARIABLE rc refcursor;

DECLARE
    m_table t_table := t_table();
BEGIN
    m_table.EXTEND(2);
    m_table(1) := 'Urman';
    m_table(2) := 'Vargas';
    simon_pkg.f(m_table,:rc);
END;

PRINT rc; 
```

假设您使用的是 SQL*Plus 和`HR`架构，您可以看到第一个选项的输出

```
SQL> CREATE OR REPLACE TYPE t_table IS TABLE of VARCHAR2(255);
  2  /

Type created.

SQL> CREATE OR REPLACE PACKAGE simon_pkg
  2  IS
  3      PROCEDURE f (t_input in t_table,
  4                   c_out out sys_refcursor);
  5  END;
  6  /

Package created.

SQL>  CREATE OR REPLACE PACKAGE BODY simon_pkg IS
  2      PROCEDURE f (t_input in t_table,
  3                   c_out  out sys_refcursor)
  4      IS
  5      BEGIN
  6          OPEN c_out FOR
  7              SELECT last_name
  8              FROM employees
  9              WHERE last_name IN
 10                  (SELECT * FROM TABLE(t_input));
 11      END f;
 12  END;
 13  /

Package body created.

SQL> set serveroutput on;
SQL> DECLARE
  2      c_result sys_refcursor;
  3      m_table t_table := t_table();
  4      l_last_name varchar2(100);
  5  BEGIN
  6      m_table.EXTEND(2);
  7      m_table(1) := 'Urman';
  8      m_table(2) := 'Vargas';
  9      simon_pkg.f(m_table,c_result);
 10
 11      LOOP
 12        FETCH c_result INTO l_last_name;
 13        EXIT WHEN c_result%notfound;
 14        dbms_output.put_line( l_last_name );
 15      END LOOP;
 16      CLOSE c_result;
 17  END;
 18  /
Urman
Vargas

PL/SQL procedure successfully completed. 
```

以及第二个选项的输出

```
SQL> VARIABLE rc refcursor;
SQL> DECLARE
  2      m_table t_table := t_table();
  3  BEGIN
  4      m_table.EXTEND(2);
  5      m_table(1) := 'Urman';
  6      m_table(2) := 'Vargas';
  7      simon_pkg.f(m_table,:rc);
  8  END;
  9  /

PL/SQL procedure successfully completed.

SQL> PRINT rc;

LAST_NAME
-------------------------
Urman
Vargas 
```

# c++ - 如何使用 boost::fs 只加载 30 个最新文件而不是整个目录？

> ID：11439399
> 
> 赞同：4
> 
> 时间：2012-07-11T18:49:09.877
> 
> 标签：c++, macos, boost, filesystems, directory

使用 boost 的新手。使用它来加载图像集合。问题是文件夹中的图像数量将继续增长，我最终不想将它们全部添加到我的显示程序中。我在 OS X 上并使用 C++。

如何调整此示例代码以仅从目录的顶部或底部加载 30 张图像？只加载最新的文件会很棒，但我会满足于改变它。不幸的是，在我的循环中只说 (it <30) 是行不通的，因为它需要等效于 fs::directory_iterator。

示例代码：

```
fs::path pPhoto( photobooth_texture_path );
for ( fs::directory_iterator it( pPhoto ); it != fs::directory_iterator(); ++it )
{
    if ( fs::is_regular_file( *it ) )
    {
        // -- Perhaps there is a better way to ignore hidden files
        string photoFileName = it->path().filename().string();
        if( !( photoFileName.compare( ".DS_Store" ) == 0 ) )
        {
            photoboothTex.push_back( gl::Texture( loadImage( photobooth_texture_path + photoFileName ), mipFmt) );
            cout << "Loaded: " << photoFileName <<endl;
        }
    }
} 
```

编辑：这就是我最终这样做的方式。有点混合了这两种方法，但我需要向后排序，即使它不一定是可以预见的倒退……抓住我的机会。不是世界上最干净的东西，但我必须将他们的想法转化为我理解的 C++ 风格

```
 vector<string> fileList;
int count = 0;

photoboothTex.clear();//clear this out to make way for new photos

fs::path pPhoto( photobooth_texture_path );
for ( fs::directory_iterator it( pPhoto ); it != fs::directory_iterator(); ++it )    {
    if ( fs::is_regular_file( *it ) )
    {
        // -- Perhaps there is a better way to ignore hidden files
        string photoFileName = it->path().filename().string();

        if( !( photoFileName.compare( ".DS_Store" ) == 0 ) )
        {
            fileList.push_back(photoFileName);
        }
    }
}
for (int i=(fileList.size()-1); i!=0; i--) {

        photoboothTex.push_back( gl::Texture( loadImage( photobooth_texture_path + fileList[i%fileList.size()] )) );
        cout << "Loaded Photobooth: " << fileList[i%fileList.size()] <<endl;
        if(++count ==40) break; //loads a maximum of 40 images
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T20:27:20.367

这是一个使用 [`boost::filter_iterator`](http://www.boost.org/doc/libs/1_50_0/libs/iterator/doc/filter_iterator.html)with`directory_iterator`将路径存储到向量中的常规文件的工作示例。我根据 对向量进行了排序[`last_write_time()`](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/reference.html#last_write_time)。为简洁起见，我还省略了错误检查 - 如果目录中的文件少于 30 个，此示例将崩溃。

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>
#include <boost/filesystem.hpp>
#include <boost/iterator/filter_iterator.hpp>
namespace fs = boost::filesystem;

int main()
{
    fs::path p("My image directory");
    fs::directory_iterator dir_first(p), dir_last;
    std::vector<fs::path> files;

    auto pred = [](const fs::directory_entry& p)
    {
        return fs::is_regular_file(p);
    };

    std::copy(boost::make_filter_iterator(pred, dir_first, dir_last),
              boost::make_filter_iterator(pred, dir_last, dir_last),
              std::back_inserter(files)
              );

    std::sort(files.begin(), files.end(),
              [](const fs::path& p1, const fs::path& p2)
              {
                  return fs::last_write_time(p1) < fs::last_write_time(p2);
              });

    std::copy_n(files.begin(), 30, std::ostream_iterator<fs::path>(std::cout, "\n"));
} 
```

为了使您的示例正常工作，您可以像这样构造 for 循环：

```
fs::path pPhoto( photobooth_texture_path );
fs::directory_iterator it( pPhoto );

for ( size_t i = 0;  i < 30 && it != fs::directory_iterator(); ++it )
{
    if ( fs::is_regular_file( *it ) )
    {
        // load the image
        ++i;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T00:54:35.670

显然你不能说`it < 30`因为 30 不是 directory_iterator。

而且，即使你可以，那只会计算前 30 个文件期间，而不是前 30 个非隐藏文件，我怀疑这不是你想要的（特别是因为“隐藏”的通常 *nix 规则是“开始'.'”，并且这些文件往往排在第一位）。

但是您可以轻松地自己跟踪计数：

```
int count = 0;

fs::path pPhoto( photobooth_texture_path );
for ( fs::directory_iterator it( pPhoto ); it != fs::directory_iterator(); ++it )
{
    if ( fs::is_regular_file( *it ) )
    {
        // -- Perhaps there is a better way to ignore hidden files
        string photoFileName = it->path().filename().string();
        if( !( photoFileName.compare( ".DS_Store" ) == 0 ) )
        {
            photoboothTex.push_back( gl::Texture( loadImage( photobooth_texture_path + photoFileName ), mipFmt) );
            cout << "Loaded: " << photoFileName <<endl;
            if (++count == 30) break;
        }
    }
} 
```

就是这样。

> 只加载最新的文件会很棒，但我会满足于改变它。

这没有得到最新的 30 个，只有“一些 30 个”。[boost::filesystem](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/reference.html#Class-directory_iterator)迭代“好像通过调用 POSIX readdir_r()”，并且[readdir_r](http://pubs.opengroup.org/onlinepubs/000095399/functions/readdir_r.html)迭代一个目录流，该目录流被指定为“特定目录中所有目录条目的有序序列”，但是没有办法告诉它是什么订购你想要的那个序列。

当然，您可以通过阅读整个列表来添加自己的排序，然后根据需要进行排序。请参阅上面的 jrok 答案。但这也有一些缺点：

*   这不是那么简单。
*   如果你有大目录，它会慢得多（因为你必须读入，可能还有统计，所有 3000 个条目来对它们进行排序，而不是仅仅读取 30 个）。
*   它会占用更多的内存。

最终，这是一个权衡。

虽然没有那么简单，但有人 (jrok) 已经编写了代码，无论如何理解他的代码是一次值得学习的经历。虽然它“慢得多”，但它可能仍然“足够快”。虽然它需要“更多的内存”，但它可能仍然只是杯水车薪。但是您必须评估这些因素并自己决定。

我会提到另外两件事：

首先，如果速度不是问题但内存是问题（非常不可能，但并非完全不可能），您可以通过只保留目前找到的最后 30 个文件而不是所有文件来使代码更复杂一些。（例如，将它们放在集合中而不是向量中；对于每个新值，如果它比集合中最旧的值更旧，则忽略它；否则，将其插入集合中并删除最旧的值。）

其次，如果您不关心可移植性，并且愿意从 boost::filesystem 换成一些丑陋的、特定于平台的、基于 C 的 API，那么您的平台可能有一种按排序顺序读取目录条目的方法。但是我不会追求这个，除非你真的需要排序和效率，以至于你愿意完全牺牲便携性和简单性。

# javascript - 如何在不插入整个代码的情况下嵌入现有的多级下拉菜单？

> ID：11439405
> 
> 赞同：1
> 
> 时间：2012-07-11T18:49:38.310
> 
> 标签：javascript, html, css, iframe, embed

我有一个多级下拉菜单（使用 HTML + CSS 完成），我想将它放在多个不同的页面上。将来我将需要更新此菜单并更改其内容，因此我将 HTML 保存在其自己的文件中，以便我可以一次将更改部署到所有页面（而不必反复浏览每个页面粘贴到更改的列表项中）。

我曾尝试使用 iframe，但这会切断高度有限的菜单项（当然，设置足够大的手动高度会留下大量空白）：

```
<iframe height="100%" src="menu.html" frameborder="no" width="100%" scrolling="no"></iframe> 
```

我也尝试使用嵌入（这看起来很好，直到你将鼠标悬停在菜单项上——它只是在框架内滚动）：

```
<embed type="text/html" src="menu.html" width="100%" height="100%"></embed> 
```

当代码被简单地转储到我需要它的各个页面时，菜单功能正常，所以我知道这不是问题。问题在于嵌入并从其自己的 HTML 文件中调用它。有没有一种简单的方法可以让下拉菜单按原样显示？

我应该提到，虽然我的 IT 部门有幸这样做，但这是一个他们不支持的项目。我只能在正文中编辑我的网页的 HTML，而不是头部。例外是我作为文件上传的 HTML 页面（如菜单代码）。所以有一些限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:37:44.277

好吧，这里有一些冗长的 javascript 方法，可能会让您的 IT 人员满意：

```
window.onload = new Function("load('embed-me.html','content')"); // Replace with URL of your file and ID of div you want to load into.

function ahah(url, target) {
  document.getElementById(target).innerHTML = ' Fetching data...';
  if (window.XMLHttpRequest) {
    req = new XMLHttpRequest();
  } else if (window.ActiveXObject) {
    req = new ActiveXObject("Microsoft.XMLHTTP");
  }
  if (req != undefined) {
    req.onreadystatechange = function() {ahahDone(url, target);};
    req.open("GET", url, true);
    req.send("");
  }
}  

function ahahDone(url, target) {
  if (req.readyState == 4) { // only if req is "loaded"
    if (req.status == 200) { // only if "OK"
      document.getElementById(target).innerHTML = req.responseText;
    } else {
      document.getElementById(target).innerHTML=" AHAH Error:\n"+ req.status + "\n" +req.statusText;
    }
  }
}

function load(name, div) {
    ahah(name,div);
    return false;
} 
```

不是我写的（[链接](http://codesnippets.joyent.com/posts/show/602)）（我只是添加了页面加载位运行）。

经过测试和工作（至少在 Chrome 中）。尽管如果用户禁用了 javascript，您的网站将没有菜单！

编辑：

例子...

```
<body>
    <script type="text/javascript" src="embed-me.js"></script> <!-- load the javascript -->
    <div id="content"></div> <!-- html will be embedded here -->
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:58:55.893

我使用以下 php 代码并且工作得非常好。当您在线查看源代码时，它甚至不会显示。

```
 <?php include("menu.php"); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T01:04:37.810

使用 php 包含！！

好的，首先.. 复制菜单代码并将其保存到名为**menu-1.php的文件中**

然后每当您想使用菜单时；只需输入以下代码：

```
<?php include("menu-1.php"); ?> 
```

这是做菜单的好方法，因为每次您需要更新菜单时，您不必更新每个页面，只需更新您的 menu-1.php

除非您使用 wamp 或 xamp，否则 PS PHP 可能不会显示在您的本地计算机上

# java - 如何使用 Jsch SFTP 传输传输 ascii 模式？

> ID：11439409
> 
> 赞同：1
> 
> 时间：2012-07-11T18:50:00.970
> 
> 标签：java, sftp, jsch

我正在使用 JSch channelSftp 文件传输，它以二进制模式传输文件。谁能告诉我如何设置ascii模式？

# c# - 试图读取或写入受保护的内存和内存不足问题

> ID：11439412
> 
> 赞同：2
> 
> 时间：2012-07-11T18:50:37.373
> 
> 标签：c#, memory-management

我们有一个新的开发服务器，我们的许多项目都是在该服务器上开发的，截至今天，我注意到一些非常不寻常的事情。一段曾经完美运行的代码现在抛出以下错误：

尝试读取或写入受保护的内存。这通常表明其他内存已损坏

它发生的那一行实际上是在外部 API（Sage 200 SDK）中调用一个方法，所以我认为这是一个问题。但是，问题不会发生在任何其他机器上，即使它使用相同的登录名等进入同一个数据库。

我今天注意到的另一件事是，我的代码的一些冗长的“Foreach”部分出现了很多“内存不足”异常，因此.NET 垃圾收集器似乎再次无法正常工作，我在其他服务器上没有这个问题。

有任何想法吗？

# image - 如何在不影响向下滚动性能的情况下将本地图像加载到 UITableView 中？

> ID：11439414
> 
> 赞同：2
> 
> 时间：2012-07-11T18:50:39.183
> 
> 标签：image, uitableview, load, local, lag

在有人说这个话题被重复多次之前，请注意我真的不需要从网络加载远程图像（SDWebImage github解决方案），我正在尝试加载动态保存在文档文件夹中的图像，所以它们是当我想将它们加载到我的 tableView 上时，它们是本地的，通过 sqlite 表上的记录引用它们，我在其中保存了由代码生成的图像名称。

因此，在解析了我所有的 sqlite 数据之后，在我的 CellForRowAtIndexPath 方法中的某个时刻，我有以下代码行：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...
    NSString *imageName = [[favorites objectAtIndex:[indexPath row]] objectForKey:@"imagename"];
    cell.image.image = [self loadImage: imageName]; // Is a custom cell so cell.image is a UIImageView, and I'm setting its image property
    ...
} 
```

我的 loadImage 方法看起来像：

```
- (UIImage*)loadImage:(NSString*)imageName {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", imageName]];

    return [UIImage imageWithContentsOfFile:fullPath];

} 
```

另请注意，此代码确实有效，但向下滚动表格看起来很滞后。如何提高性能，我的意思是在后台加载图像，但图像已经存在。有人可以给我一个具体的解决方案吗？

只是让你知道，我正在使用 iOS 5 和 ARC。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:02:03.860

首先减小您加载的图像的大小。

其次尝试使用 GCD 在 tableView:cellForRowAtIndexPath: 中加载图像。

# data-binding - 如何在 Emberjs 中进行手动绑定而不是速记

> ID：11439415
> 
> 赞同：1
> 
> 时间：2012-07-11T18:50:41.180
> 
> 标签：data-binding, ember.js

我正在尝试为数据属性做一个属性绑定。

这是一个起始小提琴[http://jsfiddle.net/EsF4R/43/](http://jsfiddle.net/EsF4R/43/)它没有被绑定，只是取字符串的值`'App.DateView.endDateString'`。

```
App = Ember.Application.create({});
App.CalendarController= Em.Controller.extend();
App.CalendarView = Em.View.extend({
   templateName: 'calendar',
   attributeBindings: ['data-date'],
   'data-date': 'App.DateView.endDateString',  
});

App.DateView = Em.View.extend({
    endDateString: '7/7/2012' /* This actually is a function */
}); 
```

我想绑定`'data-date'`到`'App.DateView.endDateString'`

我尝试使用

```
'data-date' : function(){
            Em.Binding('App.CalendarView["data-date"]','App.DateView.endDateString');
            return '1/1/1988';
            }.property().cacheable(), 
```

但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:27:45.793

如果要将属性绑定到必须附加`Binding`到属性名称的路径`'data-dateBinding': 'path.to.date'`，请参见[http://jsfiddle.net/pangratz666/tV2Zq/](http://jsfiddle.net/pangratz666/tV2Zq/)：

```
App = Ember.Application.create({
    dateString: '7/7/2012'
});

App.CalendarView = Em.View.extend({
    attributeBindings: ['data-date'],
    'data-dateBinding': 'App.dateString'
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:21:44.987

假设这`App.DateView`是一个 View 实例，即

```
App.DateView = Em.View.create({ // notice that create() is called
    endDateString : '7/7/2012' 
}); 
```

以下应该有效：

```
'data-dateBinding' : 'App.DateView.endDateString', 
```

或者，您可以使用（但实际上不需要）：

```
'data-date': function(){
    return App.DateView.get('endDateString');
}.property('App.DateView.endDateString') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T02:36:26.820

我最终做了类似的事情

```
'data-date' : function(){
        return App.get('router').get('dateController').get('endDate');
        }.property('App.router.dateConroller.endDateString','App.router.currentState.name').cacheable(), 
```

不知道我的问题是否有更好的解决方案

# swagger - Swagger UI 错误：无法获取 API 列表

> ID：11439419
> 
> 赞同：7
> 
> 时间：2012-07-11T18:50:54.197
> 
> 标签：swagger

我正在使用[Swagger](http://swagger.wordnik.com/)记录 REST Web API 。我已经下载了 petstore 示例。它由`resources.json`which 引用`pet.json`和组成`user.json`：

```
{
    "apiVersion":"0.2",
    "swaggerVersion":"1.0",
    "basePath":"http://petstore.swagger.wordnik.com/api",
    "apis":
    [
        {
            "path":"/pet.{format}",
            "description":"Operations about pets"
        },
        {
            "path":"/user.{format}",
            "description":"Operations about user"
        }
    ]
} 
```

但即使在将原始文件上传到我的网络服务器之后，Swagger UI 也会告诉我：

```
Unable to fetch API Listing. Tried the following urls:
http://www.myserver.org/resources.json
http://www.myserver.org
http://www.myserver.org/resources.json
http://www.myserver.org/resources 
```

你能说出是什么原因导致 Swagger 找不到我的 json 文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T03:15:34.300

我假设你要去 www.myserver.org 并且它带来了招摇的用户界面？在 Swagger UI 的“探索”文本框中...确保输入 resources.json 的位置。

我个人以这种方式设置了我的 swagger api 文档...

```
http://adamclerk.com/api            --Swagger UI
http://adamclerk.com/api/doc        --returns json representing resources.js
http://adamclerk.com/api/doc/donuts --returns json representing donut operations 
```

您可以在此处查看更详细的说明 - [Swagger With Static Documentation](https://stackoverflow.com/questions/10560857/swagger-with-static-documentation/10969894#10969894)

如果您还有其他问题，请随时提出。

# jquery - 如何设置对话框的大小，如自动，但添加额外的 10 像素？

> ID：11439421
> 
> 赞同：0
> 
> 时间：2012-07-11T18:50:57.577
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我想要与 jquery ui 的 auto 完全相同的行为，所以我有：

```
$("#d").dialog({
    modal: true,
    autoOpen: false,
    auto: true
}); 
```

现在我想要的是与上面给出的相同大小的行为，但我想将高度增加 10 个像素。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:02:01.907

向对话框内容添加 10px 的 CSS 填充（因为我很确定`dialog`使用它`innerHeight`来计算内容高度），或者在对话框打开后向高度添加 10px。像这样的东西：

```
var my_dialog = $("#d");

my_dialog.dialog({
    modal: true,
    autoOpen: false,
    auto: true,
    open: function() {
        my_dialog.css('height', my_dialog.height() + 10);
    }
}); 
```

*考虑一下这个伪代码——我还没有测试过*

我衷心建议您先尝试 css 解决方案 - 除非必要，否则不要破解

# html - 是否可以使用百分比在另一个 div 内的浮动 div 上设置最小高度？

> ID：11439423
> 
> 赞同：1
> 
> 时间：2012-07-11T18:51:01.290
> 
> 标签：html, css

她是我的CSS：

```
html {
/* force document to be 200% of window size */
min-height: 200%;
}
body {
height:auto; 
margin:0 auto;
}
div#wrapper {
/* so that child divs with floats stay contained */
overflow:hidden; 
margin:auto;
min-width:200%;
min-height:200%; /* doesn't work */
background-color:#000;
border:1px solid red;
}
div#content1 {
float:left;
min-width:45%;
min-height:45%; /* doesn't work */
background-color:#555;
border:1px solid green;
}
div#content2 {
float:right;
min-width:45%;
min-height:45%; /* doesn't work */
background-color:#777;
border:1px solid blue;
} 
```

和html：

```
<div id="wrapper">
<div id="content1"></div>
<div id="content2"></div>
</div> 
```

我希望 #content1 和 #conent2 始终占据窗口的 45%，无论内容如何。至少在 Firefox 中，最小宽度有效，但最小高度无效。在这种情况下是否可以使用百分比设置最小高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:56:31.863

`height`仅当`parent`容器设置为固定高度时，才能以百分比形式引用该属性。在这种情况下，`html`尽管`height:auto`您有明确的`height:200%`. 因此，将`wrapper`分隔线设置为百分比高度将不起作用，随后的百分比`min-height`子元素也将无效。

# c# - 共享交替指数

> ID：11439426
> 
> 赞同：0
> 
> 时间：2012-07-11T18:51:04.237
> 
> 标签：c#, wpf, mvvm

我正在尝试对我的列表框实现奇偶样式，但是对于每一行，我都有三个不同的嵌套列表框，因此我需要在它们之间共享交替索引。

我放了一张我的应用程序的图片，你可以看到一个列表是否以奇数行结尾而另一个列表以奇数行开头，这看起来很奇怪。

谢谢。

![奇偶交替索引](../Images/37513df581a3efb139c35bbe9fcb723f.png)

# java - 在 JPA 中与 JAXB 类型函数不兼容的参数

> ID：11439427
> 
> 赞同：0
> 
> 时间：2012-07-11T18:51:05.237
> 
> 标签：java, jpa, jaxb

如此处所述：[How to map Duration type with JPA](https://stackoverflow.com/questions/2830089/how-to-map-duration-type-with-jpa)

我有相同的代码，而 jaxb 正在生成 getter 和 setter 包装器：

```
@Basic
@Column(name = "VALUEITEM", length = 127)
public String getValueItem() {
    return XmlAdapterUtils.unmarshall(DurationAsString.class, this.getValue());
}

public void setValueItem(String target) {
    setValue(XmlAdapterUtils.marshall(DurationAsString.class, target));
} 
```

但是当试图持久化一个对象时，我得到了：

```
method: pcgetValueItem signature: ()Ljava/lang/String;) Incompatible argument to function 
```

在每个包装字段上。

有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:03:53.130

带有此类消息的 java.lang.VerifyError 的原因（几乎总是）是您编译的类版本与您正在运行的版本不同。这意味着周围可能有两个版本的 getValueItem - 一个具有匹配的签名，另一个没有。

大多数情况下，这个问题当然是面对外部库——例如，针对较新的库进行编译并与较旧的库一起运行。

只需清理垃圾，重建所有内容，也许您会发现编译时错误，或者在最好的情况下问题会立即解决。

# delphi - 客户端如何刷新服务器上的数据

> ID：11439430
> 
> 赞同：0
> 
> 时间：2012-07-11T18:51:13.567
> 
> 标签：delphi, delphi-xe2, firebird, datasnap

我使用 datasnap 开发了一个客户端/服务器应用程序。每当客户端更新表时，我需要知道如何刷新服务器上的数据。原因是当我在客户端上运行查询时，将记录插入表后，新记录不会反映在查询中。

我使用带有datasnap的firebird db，在Delphi XE2中开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:18:51.617

我想说，它还取决于您用来写入 DB 的工具。但是，通常，使用 Firebird，您将激活一个事务，一旦更新完成，您将提交您的更改。在提交之前，无论刷新多少次，其他客户端都无法看到新的更改。一旦提交，我的理解是，您将根据您的标准仅通过调用 SELECT 命令来刷新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T01:22:45.600

在客户端窗体上放置一个`TTimer`控件并指定刷新时间频率，根据需要更改间隔值，例如：

```
procedure TForm1.Timer1Timer(Sender: TObject);
begin
table1.refresh;
end; 
```

# matlab - Kmeans中IDX的输出？

> ID：11439431
> 
> 赞同：0
> 
> 时间：2012-07-11T18:51:20.417
> 
> 标签：matlab, cluster-analysis, k-means

我有一个 1000x6 数据集，使用下面的 kmeans 脚本很好，但是当我想输出其中一个集群时，它只作为一列出现？

```
%% cluster
opts = statset('MaxIter', 100, 'Display', 'iter');
[clustIDX, clusters, interClustSum, Dist] = kmeans(data, K, 'options',opts, ...
'distance','sqEuclidean', 'EmptyAction','singleton', 'replicates',6);

%% plot data+clusters
figure, hold on
scatter3(data(:,1),data(:,2),data(:,3), 5, clustIDX, 'filled')
scatter3(clusters(:,1),clusters(:,2),clusters(:,3), 100, (1:K)', 'filled')
hold off, xlabel('x'), ylabel('y'), zlabel('z')

%% plot clusters quality
figure
[silh,h] = silhouette(data, clustIDX);
avrgScore = mean(silh);

%% Assign data to clusters
% calculate distance (squared) of all instances to each cluster centroid
D = zeros(numObservarations, K);     % init distances
for k=1:K
%d = sum((x-y).^2).^0.5
D(:,k) = sum( ((data - repmat(clusters(k,:),numObservarations,1)).^2), 2);
end

% find  for all instances the cluster closet to it
[minDists, clusterIndices] = min(D, [], 2);

% compare it with what you expect it to be
sum(clusterIndices == clustIDX)

% Output cluster data to K datasets
K1 = data(clustIDX==1)
K2 = data(clustIDX==2)... etc 
```

不应该`K1 = data(clustIDX==1)`输出完整的行信息吗？不只是一列，而是六列，就像原始数据集一样？或者这只是输出距离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:18:29.987

代替

```
K1 = data(clustIDX==1)
K2 = data(clustIDX==2) 
```

和

```
K1 = data(clustIDX==1,:)
K2 = data(clustIDX==2,:) 
```

第一个仅检索对应行的第一列。第二个应该修复它，我已经尝试过并且它有效。

# c++ - MPI 收集/减少操作混乱？

> ID：11439436
> 
> 赞同：6
> 
> 时间：2012-07-11T18:51:45.483
> 
> 标签：c++, boost, mpi, boost-mpi

在[boost 教程](http://www.boost.org/doc/libs/1_50_0/doc/html/mpi/tutorial.html)中有收集和减少操作的示例。收集的代码如下：

```
#include <boost/mpi.hpp>
#include <iostream>
#include <vector>
#include <cstdlib>
namespace mpi = boost::mpi;

int main(int argc, char* argv[])
{
  mpi::environment env(argc, argv);
  mpi::communicator world;

  std::srand(time(0) + world.rank());
  int my_number = std::rand();
  if (world.rank() == 0) {
    std::vector<int> all_numbers;
    gather(world, my_number, all_numbers, 0);
    for (int proc = 0; proc < world.size(); ++proc)
      std::cout << "Process #" << proc << " thought of "
                << all_numbers[proc] << std::endl;
  } else {
    gather(world, my_number, 0);
  }

  return 0;
} 
```

而reduce的例子如下：

```
#include <boost/mpi.hpp>
#include <iostream>
#include <cstdlib>
namespace mpi = boost::mpi;

int main(int argc, char* argv[])
{
  mpi::environment env(argc, argv);
  mpi::communicator world;

  std::srand(time(0) + world.rank());
  int my_number = std::rand();

  if (world.rank() == 0) {
    int minimum;
    reduce(world, my_number, minimum, mpi::minimum<int>(), 0);
    std::cout << "The minimum value is " << minimum << std::endl;
  } else {
    reduce(world, my_number, mpi::minimum<int>(), 0);
  }

  return 0;
} 
```

在这两个示例中，我们都有一个 if/else 条件，如下所示：

```
if(world.rank() == 0){
  //gather or reduce operation
  //Output
}else{
  //gather or reduce operation
} 
```

我在这里无法理解的是 if 中的集体操作与 else 中的集体操作之间的区别？参数的数量有所不同，但我不太明白逻辑是如何运作的。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T20:36:02.540

MPI 有两种类型的集体操作——一种具有指定的“根”进程，另一种没有。具有指定根的操作是广播（根进程向所有进程发送相同的数据）、分散（根进程将其数据分散到所有进程）、收集（根进程从所有进程收集数据）和缩减（根进程从所有进程收集数据）同时对其应用减少）。在 MPI 标准中，这些操作通常具有类似于以下内容的形式：

```
MPI_SCATTER(sendbuf, sendcount, sendtype,
            recvbuf, recvcount, recvtype, root, comm) 
```

此 MPI 调用具有输入和输出参数，它必须在所有进程中使用，包括根进程，但输入参数 ( `sendbuf`, `sendcount`, `sendtype`) 仅在其等级等于的进程中有效，`root`并且在所有其他进程中被忽略。

MPI 是为可移植性而设计的，因此 MPI 调用的设计使得它们可以在 C 和 Fortran 77 中以相同的方式实现——这两种语言在设计 MPI 标准时都不支持函数重载或可选参数。（不）幸运的是，像 C++ 库这样的库`boost::mpi`通过提供有效隐藏未使用参数的那些调用的版本，在重载函数方面提供了 C++ 提供的自由。现在很明显，调用`gather(world, my_number, 0)`没有输出参数，因此它*必须*在不是操作根的进程中使用，而`gather(world, my_number, all_numbers, 0)`具有输出参数，因此*只能*在根中使用。这在编写代码时会造成一些不对称 - 你必须做一些事情`if (world.rank() == root) { ... } else { ... }`.

作为 MPI 的铁杆用户，我认为这很丑陋，但也有其他人不同意我的看法。我想……这取决于。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T19:17:39.317

看看：

boost/mpi/collectives/gather.hpp

您将看到gather_impl 的不同实现，一种在参数列表中有“out”值，另一种没有。没有“输出”值的那个将其数据发送到根进程。所以在收集示例中：

```
gather(world, my_number, 0) 
```

实现一个 mpi 发送和

```
gather(world, my_number, all_numbers, 0) 
```

为根处理器实现本地副本，为其他处理器实现 mpi 接收。

# mysql - 如何在 MySQL 中用子查询表示 count(distinct)？

> ID：11439440
> 
> 赞同：0
> 
> 时间：2012-07-11T18:51:49.420
> 
> 标签：mysql, count, subquery, distinct

一个查询会产生一个特定的数字。查询是：

```
select
count(distinct case when (A or B or C) and D then table_a.field1 else null end)
from table_a
    left join table_b on table_b.x = table_a.y
group by table_a.y
; 
```

其中 A、B、C 和 D 是给定的条件。现在，写成这样的形式：

```
select
sum((select count(1) from table_b where table_b.x = table_a.y and ((A or B or C) and D) ))
from table_a
    left join table_b on table_b.x = table_a.y
group by table_a.y
; 
```

结果与我们使用 count(distinct) 得到的结果不匹配。

用子查询编写 count(distinct) 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:14:15.657

完全不清楚为什么需要子查询。您仍然拥有 JOIN，因此子查询可能会多次“计数”相同的行。

如果您想获得满足一组条件（在 table_a 上）的不同值的数量`field1`，`table_a`那么您实际上不需要 table_b 上的子查询来获得它。至少，无论如何我看不到您可以使用 table_b 上的子查询获得该结果。

这是一个返回等效结果的示例：

```
 select (select sum(1) as mycount
           from ( select a.field1 
                    from table_a a
                    left join table_b on table_b.x = a.y
                   where a.y = t.y
                     and ( (A or B or C) and D )
                     and a.field1 IS NOT NULL
                   group by a.field1
                ) s
        ) as mycount
   from table_a t
  group by t.y 
```

这真的是我所知道的获得等同于 a 的唯一方法`COUNT(DISTINCT expr)`。你必须做 a `SELECT expr FROM ... WHERE expr IS NOT NULL GROUP BY expr`，然后计算它返回的行数。在这种情况下，您可以使用 COUNT(1) 或 SUM(1)。

（我完全不确定这能回答你问的问题，但这是我最好的选择。）

（我们注意到，在您的原始查询中，您有一个`GROUP BY table_a.y`, 以便查询可以返回多行，每行都有自己的计数。

# python - Django - 从单独的应用程序导入视图

> ID：11439447
> 
> 赞同：17
> 
> 时间：2012-07-11T18:52:13.573
> 
> 标签：python, django

我是 Django 新手，正在阅读 Holovaty 和 Kaplan-Moss 的“The Django Book”。我有一个名为“mysite”的项目，其中包含两个名为“books”和“contact”的应用程序。每个都有自己的 view.py 文件。在我的 urls.py 文件中，我有以下内容：

```
from books import views
from contact import views
...
urlpatterns = patterns('',
...
(r'^search/$', views.search),
(r'^contact/$', views.contact),
... 
```

当我运行我的代码时，我得到了这个错误：

/search/ 处的 NameError ... 异常值：“模块”对象没有属性“搜索”

我认为正在发生的事情是，由于最后导入了来自联系人的视图，Django 正在查看不包含搜索的联系人视图（搜索在书籍视图中）。

从 Django urls 文件中的两个不同应用程序导入 views.py 文件的正确方法是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-11T18:56:03.093

**免责声明：**不是 Django 答案

问题在于这两行：

```
from books import views
from contact import views 
```

第二个导入遮住了第一个，因此当您`views`稍后使用时，您只使用`views`from `contact`。

一种解决方案可能是：

```
import books
import contact

urlpatterns = patterns('',
...
(r'^search/$', books.views.search),
(r'^contact/$', contact.views.contact),
... 
```

我不确定，但我也认为您实际上不需要导入任何内容，只需在模式中使用字符串，例如：`'books.views.search'`.

* * *

另一种可能性是遵循[Simon Visser](https://stackoverflow.com/users/1267329/simeon-visser)的建议：

```
from books.views import search
from contact.views import contact 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-11T18:56:49.190

```
from books import views
from contact import views 
```

您正在覆盖 name `views`。您需要将它们作为不同的名称或绝对名称导入。

```
import books.views
import contact.views 
```

... 或者 ...

```
from books import views as books_views
from contact import views as contact_views 
```

然后在定义 URL 时使用正确的名称。（`books.views.search`或`books_views.search`取决于您选择的方法）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-10T09:06:25.420

我回答这个问题的原因是因为它是多年前回答的，而这些答案对于较新的 Django 版本不再正确或有用，或者您应该了解更好的做法。

因此，如果您的 Django 项目中有多个应用程序，那么您应该为每个应用程序使用一个新的 urls.py 文件。这意味着如果您启动一个新应用程序，那么您必须在新应用程序的子文件夹中手动创建一个名为 urls.py 的新文件。许多初学者首先不明白为什么这样做很好，但如果您计划在一个 Django 项目中创建更多应用程序，这是一个很好的做法。

当您启动一个项目时，会在您的项目文件夹中自动创建 urls.py 文件，但是如果您在 Django 中创建/启动一个新应用程序，那么最好为该应用程序自己创建一个单独的 urls.py文件夹。（这样一来，您将永远不会遇到“将不同应用程序的视图导入 urls.py”的问题）。

为您的应用创建 urls.py 文件后，您必须通过以下方式**将该**应用的 urls.py 文件包含在项目的 urls.py 文件中：

让我们看一个创建名为“my_new_app”的新应用程序的示例。这是您项目的主 urls.py 文件的样子：

```
from django.conf.urls import url, include
from django.contrib import admin

urlpatterns = [
    url(r'^admin/', admin.site.urls),
    url(r'^my_new_app/', include('my_new_app.urls')),
] 
```

在项目的 urls.py 文件中，您必须导入“include”方法，然后您可以将 my_new_app urls.py 文件包含在项目的主 urls.py 文件中。在您的 my_new_app 文件夹中，您必须手动创建一个 urls.py 文件，如上所述。然后，您必须将该文件用于 my_new_app 的所有 urlpatterns。当然，这样它会自动包含在项目的主 urls.py 文件中。

所以这就是你的 my_new_app 自己的 urls.py 文件的样子：

```
from django.conf.urls import url
from my_new_app import views

urlpatterns = [
    url(r'^$', views.index, name = "index"),
] 
```

假设您还在“my_new_app/views.py”文件中创建了第一个名为“index”的视图。

my_new_app/views.py 文件如下所示：

```
from django.shortcuts import render
from django.http import HttpResponse

def index(request):
    return HttpResponse("Hello World!") 
```

您可以在浏览器中查看您的 my_new_app：

```
http://localhost:8000/my_new_app 
```

（当然，您可以在项目的 urls.py 文件中为 my_new_app 提供任何 url。）

现在，您可以在 Django 项目中创建另一个名为 my_second_app 的应用程序，您也应该为该应用程序重复上述步骤。这样，您将来自不同应用程序的视图导入 urls.py 文件不会有任何问题。对于 2017 年 Django 1.11 中的这个问题，这将是一个非常基本的“良好实践解决方案”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T19:28:18.447

[URLconfs 文档](https://docs.djangoproject.com/en/1.4/topics/http/urls/#multiple-view-prefixes)给出了相同情况的示例

您可以跳过导入并按应用程序分隔网址，如下所示：

```
urlpatterns = patterns('books.views',
    (r'^/book/search/$', 'search'), #calls books.views.search
)

urlpatterns += patterns('contact.views', #make note of the '+='
    (r'^/contact/search/$', 'search'), #calls contact.views.search
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-16T02:30:14.993

这是我针对不同视图/API 版本采取的方法：

```
from django.urls import path

from my_app import views as api_v1
from my_app import views_v2 as api_v2

urlpatterns = [
    path('view_one', api_v1.ViewOne.as_view()),
    path('view_two', api_v2.ViewTwo.as_view()),
] 
```

# windows - Ubuntu 和 Windows 中 Firefox 浏览器的区别

> ID：11439452
> 
> 赞同：0
> 
> 时间：2012-07-11T18:52:57.700
> 
> 标签：windows, firefox, ubuntu

我昨天参加了创建网页的考试，我要实现以下功能：

1) 从 xml 文件加载 xml 数据，如下所示：

```
<city>  
  <x> </x>  
  <y> </y>  
  <image> </image>  
  ... additional city data  
</city> 
```

`circle.png`2) 将命名为每个城市的 xml 文件中指定的坐标的图像文件定位，在之前加载的国家地图中得到一个代表它的红色圆圈。`mouseover`事件发生时，旁边应出现一个描述矩形，其中包含由“鼠标悬停”:) 图像表示的城市信息。这是我的代码： [http](http://www.megafileupload.com/en/file/360167/strana-html.html)
://www.megafileupload.com/en/file/360167/strana-html.html 和[http://www.megafileupload.com/en/file/360168/strana-css.html](http://www.megafileupload.com/en/file/360168/strana-css.html)
它有效在 Ubuntu 中很好，但在 Windows 中，数据矩形没有出现在地图中城市附近，而是出现在页面顶部，好像从顶部定位不起作用。有谁知道这是为什么？

PS 加载 xml 时出现在 html 文件中的标签 brojStanovnika、nadmorskaVisina、slika 等是上面给出的 xml 模式的塞尔维亚语翻译。我来自那个国家，xml 是塞尔维亚语，但我已经翻译成英文以便更容易理解。:)

# php - for 循环中准备好的插入语句仅适用于第一次迭代..(PHP)

> ID：11439456
> 
> 赞同：0
> 
> 时间：2012-07-11T18:53:02.707
> 
> 标签：php

我想使用以下脚本插入记录数。但是，只有第一个被插入。之后，它只是停止而没有显示任何错误。这些准备好的语句执行有什么问题？

```
//$dbc = database connection  //shortan here 
// $mid[] = {1,2,3,4};  //sortened here.

$q5 = "INSERT INTO user_book_trn(user_id, member_id, book_id, date_read, lang_id) VALUES (?, ?, ?,  now(), ?)";

$s5 = mysqli_prepare($dbc, $q5);
//Bind the variables:
mysqli_stmt_bind_param($s5, 'iiii', $user_id, $member_id, $book_id, $lang_id);

foreach($mid as $mk => $mv) { //check for each selected check box value from member list:

    $q2 = "SELECT user_id, member_id, book_id FROM user_book_trn WHERE user_id = {$_SESSION['myuser']['userid']} and member_id = {$mv} and book_id= {$w}";

    $r3 = mysqli_query($dbc, $q2);

    if (mysqli_num_rows($r3) == 0) { //title is available for this user.

        //Assign the values to variables:
        $user_id = (int)$_SESSION['myuser']['userid'];
        $member_id = (int)$mv;
        $book_id = (int)$w;
        $lang_id = (int)$_SESSION['lid'];

        //just to check each iteration gets new values:
        echo "user_id : $user_id \n";
        echo "member_id : $member_id \n";
        echo "book_id : $book_id \n";

        //Execute the query:
        mysqli_stmt_execute($s5);
        if (mysqli_affected_rows($dbc) == 1) {
            //this runs ok just for the first iteration.. Why?

            echo "<p><b> The book $t is added. </b></p>";
            $_SESSION['bookid'] = $book_id;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:15:58.860

不知道确切的细节，但据我所知，准备好的语句在执行后绑定到一个结果集。您需要先重置它

```
mysqli_stmt_reset($s); 
```

[http://php.net/mysqli-stmt.reset](http://php.net/mysqli-stmt.reset)

另外，您应该考虑使用*有用*的变量名。而且因为您提到，您看不到任何错误：

```
mysqli_stmt_error_list($s5); 
```

[http://php.net/mysqli-stmt.error-list](http://php.net/mysqli-stmt.error-list)

[http://php.net/mysqli-stmt.errno](http://php.net/mysqli-stmt.errno)

[http://php.net/mysqli-stmt.error](http://php.net/mysqli-stmt.error)

# .htaccess - 复杂的 htaccess URL 和变量重写

> ID：11439457
> 
> 赞同：0
> 
> 时间：2012-07-11T18:53:19.370
> 
> 标签：.htaccess, url, variables, dynamic, url-rewriting

我经营一个 mmo 游戏迷网站[http://www.ddmsrealm.com](http://www.ddmsrealm.com)。在这个网站上，我多年来一直在运行一个包含任务和项目信息的数据库。它最初是用 MSSQL/ASP 构建的，我最近将它转换为 MYSQL/PHP。在此转换中，我优化了数据库。在这样做的过程中，我改变了一些结构和变量。现在，新页面已启动并正在运行，但我很难在我的 htaccess 文件中编写规则以适应数百个任务和数千个项目，以使用新的数据库变量重新路由到新的数据库页面。当我努力学习 apache/htaccess 时，任何和所有的帮助都将不胜感激。

我有两个“详细信息”页面需要重新路由以及更改变量名称。实际的 ID 仍然是相同的，所以它应该可以工作。

原始任务页面是一个 asp 页面：

~http://www.ddmsrealm.com/ddo/quests/QDetail.aspx

永久重新路由到新的任务详细信息页面（WordPress 模板页面）：

~http://www.ddmsrealm.com/index.php/dungeons-and-dragons-quest-and-magic-item-database/dungeons-and-dragons-online-quest-info

现在需要像这样重写参数：

旧：QuestID 到新：ddoQuestID

旧：SeriesID 到新：ddoSeriesID

所以这个想法是：

~http://www.ddmsrealm.com/ddo/quests/QDetail.aspx?QuestID=210&SeriesID=30

永久重定向如下：

~http://www.ddmsrealm.com/index.php/dungeons-and-dragons-quest-and-magic-item-database/dungeons-and-dragons-online-quest-info?ddoQuestID=210&ddoSeriesID=30

如果我能得到这个公式和步骤，我相信我可以将它应用到其他页面。作为 htaccess 重写的新手，我很难理解究竟需要发生什么以及以什么顺序发生。正如您可以想象的那样，这让我的 SEO 变得糟糕，现在大约 5000 多个页面变成了 404。再加上数百个网站已经链接了那个旧 URL，现在这些链接被丢弃了，直到我能解决这个问题。

非常感谢您提前帮助解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:06:06.000

URI 重写本身使用 a 非常简单，`RewriteRule`但更改查询字符串您需要使用 a`RewriteCond`并匹配`%{QUERY_STRING}`变量并使用**%**符号反向引用匹配项。有关更多信息，请参阅文档：[http ://httpd.apache.org/docs/2.2/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)

尝试这样的事情：

```
RewriteEngine On

# Match the query string
RewriteCond %{QUERY_STRING} QuestID=([0-9]+)&SeriesID=([0-9]+)
# Rewrite the URI and append the new query string
RewriteRule ^ddo/quests/QDetail.aspx$ /index.php/dungeons-and-dragons-quest-and-magic-item-database/dungeons-and-dragons-online-quest-info?ddoQuestID=%1&ddoSeriesID=%2 [R=301,L] 
```

# ruby-on-rails - 使用 ElasticSearch（或 Thinking Sphinx / pg-search）自动生成标签

> ID：11439463
> 
> 赞同：0
> 
> 时间：2012-07-11T18:53:34.917
> 
> 标签：ruby-on-rails, thinking-sphinx, tagging, elasticsearch, pg-search

我已经考虑过这一点（并查看了 StackOverflow 上的每个“为内容自动生成标签”类型的帖子）。

我有一篇带有多个标签（通过标签连接）的文章（正文：字符串）。

现在在应用程序中，为了建议文章的标签，pgsearch 在其他文章的正文中搜索正文中包含的文本（文本中的词干），并根据这些相关文章的标签建议标签。当然，这只有在类似的文章被标记的情况下才有效，并且随着更多文章在数据库中被标记，也许有更好的标签可以使用。

有没有更聪明的方法，比如使用 ElasticSearch，从其他文章正文文本（唯一和词干）中自动查找流行词并自动生成这些标签的列表。

如果我自己这样做，是否有任何示例可以有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:07:08.210

您可以使用[more-like-this](http://www.elasticsearch.org/guide/reference/query-dsl/mlt-field-query.html)查询来查找类似文章，并使用[术语方面](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)来查找热门标签：

```
curl -XGET 'http://127.0.0.1:9200/myindex/article/_search?pretty=1'  -d '
{
   "query" : {
      "more_like_this_field" : {
         "body" : {
            "min_doc_freq" : 1,
            "like_text" : "BODY OF THE NEW ARTICLE",
            "min_term_freq" : 1,
            "percent_terms_to_match" : 0.2
         }
      }
   },
   "facets" : {
      "tags" : {
         "terms" : {
            "field" : "tags"
         }
      }
   }
}
' 
```

根据您的语料库的大小，您可能需要使用参数来`more_like_this_field`获得最佳匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-01T23:43:54.057

最好的方法是使用 elasticsearch Percolator API。看看这个答案：

[Elasticsearch - 使用“标签”索引来发现给定字符串中的所有标签](https://stackoverflow.com/questions/37889680/elasticsearch-use-a-tags-index-to-discover-all-tags-in-a-given-string/38155073#38155073)

# jquery - 标签在 IE8 twitter 引导程序中不起作用

> ID：11439464
> 
> 赞同：0
> 
> 时间：2012-07-11T18:53:37.887
> 
> 标签：jquery, internet-explorer-8, hover, twitter-bootstrap

所以 + 符号应该显示表单然后被删除，而 - 符号将调用删除用户。我已经编辑了显示客人名单的部分。

[这是jsfiddle](http://jsfiddle.net/xZjM8/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:16:27.987

问题是我正在使用`<icon>`. 这很好用，但是在 IE 8 中您必须使用`<i>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:36:50.430

您需要将`<icon>`标签替换为`<span>`

[http://jsfiddle.net/anAgent/bG4hv/3/](http://jsfiddle.net/anAgent/bG4hv/3/)

附带说明一下，在 IE8 中，您会在控制台中收到此错误。您可能还想深入研究。

```
SCRIPT438: Object doesn't support property or method 'getStyle' 
LayoutCM.js, line 195 character 5 
```

# c++ - C ++中的复杂内存管理问题

> ID：11439465
> 
> 赞同：2
> 
> 时间：2012-07-11T18:53:45.763
> 
> 标签：c++, performance, memory-management, containers

### 我需要在 C++ 中构思一个高效的粒子系统，它可以处理大量粒子并施加力。

*以下是要求：*

*   动态地高效地创建和销毁大量粒子和力。

*   粒子存储 x/y/z 位置和速度、质量、空气摩擦力以及可能的其他一些其他属性。

*   粒子不需要扩展（没有继承图）。

*   力是多态对象，主要有一个 getAcceleration() 虚拟方法。

*   可以对一个粒子施加多个力或不施加力。

*   一种力只作用于一个粒子，当这个粒子死亡时，力就没有意义了，应该删除。

*   一个力可以涉及多个粒子（包括它所施加的那个）。

*   当一个粒子死亡（被移除）时，涉及它的力可能也会也可能不会死亡，具体取决于力的类型。

*   引擎必须能够在每一帧迭代所有粒子和所有力才能执行计算

我想要一个漂亮而清晰的对象模型，以便它可以很好地维护和扩展。

### 附加信息：

可以显示力（在屏幕上绘制小箭头），因此将它们建模为真实对象可能会很好。
粒子通常由“物理对象”创建，该对象创建一个或多个粒子（对它们施加力）并且可以随时移除它们（如果物理对象变得不动，如果它离开屏幕，或任何原因） .
（请注意，力不仅是由“物理对象”产生的。）

到目前为止，我已经完成了一个尝试最小化动态分配的草案，因为它们很慢，并且粒子可能每秒都会大量出现和死亡。

```
#include <vector>

typedef double nb_t;

struct Particle {
    nb_t x, y;
    nb_t sx, sy;
    nb_t mass;
    nb_t air_friction;
};

class Force {
public:
    virtual nb_t get_x_component() = 0;
    virtual nb_t get_y_component() = 0;
    virtual ~Force() = 0;
};

class Engine {
protected:
    std::vector<Particle> particles;
    std::vector<Force*> forces;
public:
    void refresh();
    void addParticle(Particle& p);
    void removeParticle(int index);
    // ...
}; 
```

但是，粒子的所有者（或者更确切地说，它的创造者，物理对象）应该如何跟踪它的粒子，并能够命令它们移除呢？
我认为智能指针可能很有用，但我不确定引用计数是否合适，因为应该立即从内存中删除一个死掉的粒子以让其他粒子被分配。

另外，是否有一个 STL 容器可以将我的对象存储在一个数组中（就像向量一样），而不考虑顺序（unordered_vector？），但这会放置最后一个元素而不是我们尝试删除的元素，所以元素删除不需要翻译以下所有元素？

### 你认为最好的是什么？什么是一个好的折衷方案，试图保持效率、清晰度和可扩展性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:03:56.247

关于创建和删除对象，您永远不想调用 new 或 delete，或尝试将其最小化。这种最小化可以通过创建一个内存池并将其用于对象分配来实现。

看起来你想要一个用于粒子的对象池和一个用于力的对象池。

[http://pastie.org/private/ivmu9ogvrf5vurjrwuqmka](http://pastie.org/private/ivmu9ogvrf5vurjrwuqmka)

该代码是一个非常简单且不太健壮的内存池，但可以为您提供一些关于如何实现它的更好的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:02:45.203

以下是关于架构的一些小观察，我会让其他人解决内存管理本身的问题

虚拟调用需要一次处理尽可能多的粒子，因此您可能希望`getAcceleration()`通过更密集的东西重新考虑您的单个界面，例如`computeAccelerationsForParticles( std::vector<int>& particleIndices)`or `computeAccelerationsForParticles( ParticleGroup& particleGroup)`。通过这种方式，虚拟呼叫的开销从每个粒子一次到每个力组一次

这种架构意味着您需要按力组跟踪粒子。如果您想显示粒子特定数据（如力），您可以添加一个粒子调试结构，该结构仅在不为空时更新，因此在进行“无窗口”模拟时不会获得该开销

# android - 如何在同一线程中等待 onReceive 完成？

> ID：11439466
> 
> 赞同：0
> 
> 时间：2012-07-11T18:53:52.097
> 
> 标签：android, broadcastreceiver

我在 UI 线程中注册了一个 BroadcastReceiver，它在其 onReceive 方法中从 Bundle 中获取一些信息。在我继续我的主线程之前，我需要这些值。

在尝试使用这些值之前，有什么方法可以等待 onReceive 完成？我遇到了时间问题，在我尝试使用它们之后 onReceive 设置值。让线程睡眠不起作用，因为它们在同一个线程上。

在 AsyncTask 中注册接收器并在主线程上调用 wait()，然后在完成后使用 onReceive notify() 是否有意义？

```
String a = "hi";
IntentFilter filter = new IntentFilter();
filter.addAction(MY_CUSTOM_INTENT);
BroadcastReceiver receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        // Set the variable values here
        a = "bye";
    }
};
getApplicationContext().registerReceiver(receiver, filter);

// Get the values, I am getting a = "hi" here because the onReceive code has 
// not been reached yet
// How can I guarantee that a = "bye" from this method?
getA(); 
```

方法类似于

```
String getA() {
    return a;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:04:20.933

你似乎把事情复杂化了。根据示例代码很难知道你真正想要的是什么，但是后面的代码`registerReceiver()`应该只做它需要做的任何其他事情然后返回，而不是等待或希望收到广播。 `onReceive()`应该包括您想要在此时执行的任何代码（很可能只是一个方法调用，例如`updateA("bye")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:04:01.757

好吧，如果您要以任何一种方式阻塞主线程，不妨优雅地完成它。使用 注册接收器`AsyncTask`，并使用[Dialog](http://developer.android.com/guide/topics/ui/dialogs.html)让用户知道您在做什么或您正在加载某些内容。

# c - 定位分段故障的最简单方法

> ID：11439467
> 
> 赞同：10
> 
> 时间：2012-07-11T18:53:55.603
> 
> 标签：c, linux, segmentation-fault

我今天遇到了我的第一个分段错误（新手程序员）。在阅读了分段错误是什么之后（感谢本网站上的所有有用信息，以及 Wikipedia 的冗长解释），我正在尝试确定查找错误发生位置的最简单方法。它是用 C 语言编写的，错误发生在基于 *NIX 的系统上（我不确定哪个是诚实的...... 99% 肯定它是 Linux）。我不能准确地发布我的代码，因为我有很多我正在编译的文件都很长。我只是希望你们都观察到了一些最佳实践。谢谢你的帮助。

Ps 我认为错误来自取消引用 NULL 指针或使用未初始化的指针。但是，我肯定是错的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T18:55:57.263

使用调试器，`gdb`或者如果这不适用，则使用`strace`工具来更好地了解段错误发生的位置。

如果使用`gcc`，请确保使用`-g`switch 进行编译以包含调试信息。然后，`gdb`将在源代码中显示段错误的确切位置。

例如，如果我们有这个明显的段错误程序：

**新的.c**

```
#include <stdio.h>

int main()
{
        int *i = 0x478734;
        printf("%d", *i);
} 
```

我们编译它，`gcc -g new.c -o new`然后运行`gdb`会话`gdb new`：

我们在交互式会话中发出`run`命令，else 很清楚：

```
(gdb) run
Starting program: /home/Tibor/so/new
[New Thread 9596.0x16a0]
[New Thread 9596.0x1de4]

Program received signal SIGSEGV, Segmentation fault.
0x0040118a in main () at new.c:6
6               printf("%d", *i);
(gdb) 
```

正如 DasMoeh 和 netcoder 所指出的，当发生段错误时，您可以使用[`backtrace`](ftp://ftp.gnu.org/pub/old-gnu/Manuals/gdb/html_node/gdb_42.html)交互式会话中的命令来打印调用堆栈。这可以帮助进一步查明段错误的位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T19:07:13.057

最简单的方法是使用`valgrind`. 它将精确定位到发生无效访问的位置（以及其他不会导致崩溃但仍然无效的问题）。当然，真正的问题可能在代码中的其他地方（例如：无效指针），所以下一步是检查源代码，如果仍然感到困惑，请使用调试器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T19:53:06.277

+1 为 Tibors 的回答。

在较大的程序上，或者如果您使用其他库，使用 gdb 查看回溯也可能很有用：ftp: [//ftp.gnu.org/pub/old-gnu/Manuals/gdb/html_node/gdb_42.html](ftp://ftp.gnu.org/pub/old-gnu/Manuals/gdb/html_node/gdb_42.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-29T16:30:53.010

因为我刚刚更正了我使用 gcc 所做的段错误，所以我为经过这里的人重新打开了这篇文章。

您应该考虑使用标志**-fsanitize=address**有时可以高精度地突出您的段错误。

# jquery - Google API 是否有返回最新 jQuery 的热链接？

> ID：11439468
> 
> 赞同：1
> 
> 时间：2012-07-11T18:53:56.373
> 
> 标签：jquery

> **可能重复：**
> [是否有指向 Google API 上“最新”jquery 库的链接？](https://stackoverflow.com/questions/441412/is-there-a-link-to-the-latest-jquery-library-on-google-apis)

因此，而不是包括：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script></pre> 
```

你会有类似的东西：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/current/jquery.min.js"></script> 
```

# javascript - 使用 JavaScript 在 MS Word 中复制代码片段？

> ID：11439475
> 
> 赞同：0
> 
> 时间：2012-07-11T18:54:11.383
> 
> 标签：javascript, ms-word

我遇到了一个包含示例代码部分的 Word 文档，所有这些部分前面都有称为“复制”的超链接，地址格式如下：

```
javascript:CodeSnippet_CopyCode('CodeSnippetContainerCode_538898d8-038f-4f82-9a2d-a558335289ae'); 
```

我的问题是，这到底是*想做*什么，为什么不起作用？

我假设它应该复制代码片段，但是 Ctrl+单击链接的结果是一个安全通知（单击以允许），然后显示 IE 查看下载窗口。

在我不太了解javascript和所有字母数字垃圾混淆我理解语法的努力之间，我无法对此做出正面或反面......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:53:12.353

这是包含在某些网站（例如 MSDN）中的 Javascript 命令，可让您一键将代码片段从网站复制到剪贴板。

当原作者将代码复制到word文档时，他必须错误地复制包含该Javascript命令的链接。这种类型的链接在 Microsoft Word 中没有用，可以删除。

# ruby-on-rails - LocalStorage 中的 Rails 设计/Warden 会话

> ID：11439479
> 
> 赞同：3
> 
> 时间：2012-07-11T18:54:30.433
> 
> 标签：ruby-on-rails, authentication, devise, local-storage, warden

我正在 Rails 3.2 中开发一个使用 Devise 进行身份验证的 Web 应用程序。这在浏览器中运行良好，但是当您将其保存到主屏幕（使其看起来更原生）时，我遇到了我的问题。

每次您退出“应用程序”时，所有 cookie 和会话都会被清除。因此，下次用户打开应用程序时，他们需要再次登录，然后导航回上次的位置。

我正在寻找替代解决方案，可能使用 HTML5 LocalStorage 或 Token Authenticable？

但我只是不知道从哪里开始。非常感谢您的帮助。

# objective-c - 在 init 中设置和发送自定义委托方法？

> ID：11439483
> 
> 赞同：1
> 
> 时间：2012-07-11T18:54:53.237
> 
> 标签：objective-c, ios, delegates, initialization

我有一个关于初始化自定义委托的问题。在 MyScrollView initWithFrame 方法中，有我需要发送我的委托的第一个位置。但是那里仍然未知，因为我在初始化程序之后在 MyCustomView 中设置了委托。

我该如何解决这个问题，所以即使在 init 中也会调用委托？谢谢你的帮助..

```
MyCustomView.m

 self.photoView = [[MyScrollView alloc] initWithFrame:frame withDictionary:mediaContentDict];
 self.photoView.delegate = self;
//....

MyScrollView.h
@protocol MyScrollViewDelegate
-(void) methodName:(NSString*)text;
@end
@interface MyScrollView : UIView{
 //...
    __unsafe_unretained id <MyScrollViewDelegate> delegate;
}
@property(unsafe_unretained) id <MyScrollViewDelegate> delegate;

MyScrollView.m

-(id) initWithFrame:(CGRect)frame withDictionary:(NSDictionary*)dictionary{ 
self.content = [[Content alloc] initWithDictionary:dictionary];

    self = [super initWithFrame:frame];
    if (self) {
      //.... other stuff

     // currently don´t get called
     [self.delegate methodName:@"Test delegate"];
}
return self;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T19:00:24.283

我相信你已经定义了一个：

`- (id)initWithFrame:(CGRect)frame withDictionary:(NSDictionary *)dictionary;`

然后，也只需传递委托：

`- (id)initWithFrame:(CGRect)frame withDictionary:(NSDictionary *)dictionary withDelegate:(id<MyScrollViewDelegate>)del;`

**在实施文件中：**

```
- (id)initWithFrame:(CGRect)frame withDictionary:(NSDictionary *)dictionary withDelegate:(id<MyScrollViewDelegate>)del {
    // your stuff...

    self.delegate = del;
    [self.delegate methodName:@"Test delegate"];

} 
```

**用它：**

```
self.photoView = [[MyScrollView alloc] initWithFrame:frame withDictionary:mediaContentDict withDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:01:36.130

一种选择可能是在您的自定义类的初始化程序中传递您的委托：

```
-(id)initWithFrame:(CGRect)frame withDictionary:(NSDictionary*)dictionary delegate:(id)delegate 
{ 
    self = [super initWithFrame:frame];
    if (self == nil )
    {
        return nil;
    }
    self.content = [[Content alloc] initWithDictionary:dictionary];
    self.delegate = delegate;
    //.... other stuff

    // Delegate would exist now
    [self.delegate methodName:@"Test delegate"];

    return self;
} 
```

# javascript - Meteor.js：客户端不订阅集合

> ID：11439485
> 
> 赞同：0
> 
> 时间：2012-07-11T18:54:57.213
> 
> 标签：javascript, node.js, meteor

我为自己创建了一个小例子，用 Meteor 测试一些东西。但是现在看起来我无法订阅集合，我在服务器端发布。我希望有人能告诉我错误在哪里。

**服务器/model.js**

```
Test = new Meteor.Collection("test");

  if (Test.find().count() < 1) {
    Test.insert({id: 1,
                 name: "test1"});

    Test.insert({id: 2,
                 name: "test2"});
  }

Meteor.publish('test', function () {
  return Test.find();
}); 
```

**客户端/test.js**

```
Meteor.subscribe("test");

Test = new Meteor.Collection("test");

Template.hello.test = function () {
  console.log(Test.find().count());//returns 0
  return Test.findOne();
}

Template.hello.events = {
  'click input' : function () {
    // template data, if any, is available in 'this'
    if (typeof console !== 'undefined')
      console.log("You pressed the button");
  }
}; 
```

**客户端/test.html**

```
<head>
  <title>test</title>
</head>

<body>
  {{> hello}}
</body>

<template name="hello">
  <h1>Hello World!</h1>
  {{#with test}}
    ID: {{id}}  Name: {{name}}
  {{/with}}
  <input type="button" value="Click" />
</template> 
```

**编辑 1**

我想更改对象测试，findOne() 返回。假设添加一个属性 avg，其中包含两个数字（test.number1 和 test.number2）的平均值。在我看来，这应该类似于以下代码。但是javascript不是同步的，所以这行不通。

```
Template.hello.test = function () {
  var test = Test.findOne();
  test.avg = (test.number1 + test.number2) / 2;
  return test;
} 
```

**编辑 2**

这段代码对我有用。现在我必须重新考虑为什么这个带有'if（test）'的解决方案只适用于我原始项目中没有选择器的findOne（）。

```
Template.hello.test = function () {
  var avg = 0, total = 0, cursor = Test.find(), count = cursor.count();
  cursor.forEach(function(e)
  {
    total += e.number;
  });
  avg = total / count;

  var test = Test.findOne({id: 1});
  if (test) {
    test.avg = avg;
  }

  return test;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:15:16.553

客户端 db 用于复制数据的延迟可能会导致游标不计算结果的情况。当应用程序加载时立即呈现模板时，尤其会发生这种情况。

一种解决方法是在查询文档进入结果集时对其进行观察。因此，例如以下内容恰好可以很好地工作：

```
Meteor.subscribe("Coll");

var cursor = Coll.find();

cursor.observe({
  "added": function (doc) {
    ... something...
  }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:52:43.023

尝试`{{#with test}}...{{/with}}`用`{{#if}}...{{/if}}`语句包围（因为在第一次数据推送`test`中没有`id`和`name`字段）：

```
<head>
  <title>test</title>
</head>

<body>
  {{> hello}}
</body>

<template name="hello">
  <h1>Hello World!</h1>
  {{#if test}}
    {{#with test}}
      ID: {{id}}  Name: {{name}}
    {{/with}}
  {{/if}}
  <input type="button" value="Click" />
</template> 
```

因此：

![结果页面](../Images/f664e3c1e0e434e43a2e8d7b7c8469f3.png)

**更新**：

`number`此代码执行所有记录中字段平均值的计算：

模型.js：

```
Test = new Meteor.Collection("test");

Test.remove({});

if (Test.find().count() < 1) 
{
    Test.insert({id: 1,
                 name: "test1",
                 number: 13});

    Test.insert({id: 2,
                 name: "test2",
                 number: 75});
} 
```

测试.js

```
Test = new Meteor.Collection("test");

Template.hello.test = function () {
  var avg = 0, total = 0, cursor = Test.find(), count = cursor.count();
  cursor.forEach(function(e)
  {
    total += e.number;
  });
  avg = total / count;

  return { "obj": Test.findOne(), "avg": avg };
} 
```

**更新 2**：

此代码段适用于我：

```
var test = Test.findOne(); 
if (test) 
{ 
    test.rnd = Math.random(); 
} 
return test; 
```

也许您也应该尝试将赋值代码包装到`if`语句中？

# c# - 抑制来自动态类型的 RuntimeBinderException 消息

> ID：11439486
> 
> 赞同：12
> 
> 时间：2012-07-11T18:54:59.747
> 
> 标签：c#, .net, visual-studio-2010, debugging

我最近开始使用私有 NuGet 服务器来管理我组织的内部库。这意味着为了进入库中我们自己的代码，我需要在调试选项中禁用“仅启用我的代码”，因为我们不再直接引用项目。这是一个非常庞大的 MVC 项目，它使用动态类型并且`ExpandoObjects`除了`ViewBag`. `RuntimeBinderExceptions`每次使用动态类型我都会得到两个......这很多。从我读过的内容来看，这似乎是正常行为。正常它可能是，但它不是有用的。

我的第一个想法是在 Debug-> Exceptions 对话框中禁用这个特定的异常。在那里找不到例外。我想不出任何方法可以跳出直接引用的项目，而不会让自己面对这些例外。（以及我不想听到的所有其他低级框架异常，但这是迄今为止最大的违规者）。

处理这个问题的最佳方法是什么？

编辑：这就是问题所在。如何在禁用“仅启用我的代码”的情况下停止此操作？

![在此处输入图像描述](../Images/1b907790a49237fa9e117d8f1320d859.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T15:03:23.213

您可以添加其他“异常”名称（存在于您自己的代码或其他库中）...只要您知道异常的完全限定类型名称。

使用调试器管理异常
[https://msdn.microsoft.com/en-us/library/x85tt0dd.aspx](https://i.stack.imgur.com/P6C7Y.png)

## 在 Visual Studio 2010 中

通过`Debug | Exceptions...`对话框。

[![在此处输入图像描述](../Images/a50bd6a6353e06040a7da60615b07349.png)](https://i.stack.imgur.com/P6C7Y.png)

*   使用`Add`按钮在组下添加一个新的异常`Common Language Runtime Exceptions`并调用它`Microsoft.CSharp.RuntimeBinder.RuntimeBinderException`

[![在此处输入图像描述](../Images/fade8e9fa71b0dc587f924f0dde9ca75.png)](https://i.stack.imgur.com/YuNSc.png)

*   然后只需确保`Thrown`并且`User-Handled`未勾选 - 从而导致第一次机会异常被忽略，而不是被调试器捕获。

* * *

## 在 Visual Studio 2017 中

通过`Debug | Windows | Exception Settings...`面板

[![在此处输入图像描述](../Images/4af2074ed0f00c8105534f193ca101ba.png)](https://i.stack.imgur.com/cZUw0.png)

[![在此处输入图像描述](../Images/d33619ce895e52db6bebeb4e509f52cb.png)](https://i.stack.imgur.com/yukbh.png)

*   使用 + 添加新的异常名称

[![在此处输入图像描述](../Images/1d159f3a17fd26eb70e6ebe26756040f.png)](https://i.stack.imgur.com/fiQkl.png)

*   确保它没有被勾选

# c# - 在 Resharper ContextAction 中抑制 IProgressIndicator

> ID：11439490
> 
> 赞同：1
> 
> 时间：2012-07-11T18:55:12.183
> 
> 标签：c#, resharper, resharper-6.1, resharper-plugins

我正在编写一个 Resharper ContextAction，一秒钟后弹出的进度指示器不断从我的文本框中窃取焦点。如何抑制传递给 ExecutePsiTransaction 的进度指示器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T19:58:37.483

UPS。尝试覆盖 ExecuteBeforeProgressAndTransaction 并从那里而不是从 ExecutePsiTransaction 调用您的对话框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:18:07.387

只需通过 NullProgressIndicator.INSTANCE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:57:29.287

您最好在开始交易之前获取必要的数据。

# html - 使用onfocus更改带有文本输入表单ID的隐藏表单的值

> ID：11439491
> 
> 赞同：1
> 
> 时间：2012-07-11T18:55:14.653
> 
> 标签：html

如何使用文本表单的 id 更改隐藏表单的值？我有以下内容：

```
<form name="form" action="file.php" method="post">
<input type="hidden" name="dessert" id="dessert" value="">
Favorite cake: <input type="text" name="cake" id="cake" onfocus="dessert.value=this.id"><br>
Favorite pie: <input type="text" name="pie" id="pie" onfocus="dessert.value=this.id"><br>
Favorite taffy: <input type="text" name="taffy" id="taffy" onfocus="dessert.value=this.id"><br>
<input type="submit value="Go."><br> 
```

我对 html 很不熟悉，所以我无法使用文本输入 onfocus 的 id 更改隐藏表单的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:01:33.937

你的代码有效，你只是有一个语法错误。

```
<input="hidden" name="dessert" id="dessert" value=""> 
```

应该：

```
<input type="hidden" name="dessert" id="dessert" value=""> 
```

注意“类型=”

在 Chrome 中工作：[小提琴](http://jsfiddle.net/NNrLT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:08:09.960

尝试：

```
<form name="form" action="file.php" method="post">
<input type="hidden" name="dessert" id="dessert" value="">
Favorite cake: <input type="text" name="cake" id="cake" onfocus="document.getElementById('dessert').value=this.id"><br>
Favorite pie: <input type="text" name="pie" id="pie" onfocus="document.getElementById('dessert').value=this.id"><br>
Favorite taffy: <input type="text" name="taffy" id="taffy" onfocus="document.getElementById('dessert').value=this.id"><br>
<input type="submit value="Go."><br>​​​​​​​ 
```

使用格式：

```
onfocus="document.getElementById('dessert').value=this.id" 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/zLz9u/)**

# objective-c - NSPredicate 代替循环来过滤对象数组

> ID：11439492
> 
> 赞同：2
> 
> 时间：2012-07-11T18:55:20.663
> 
> 标签：objective-c, nspredicate

有人告诉我，我可以`NSPredicate`用来复制这种方法的结果

```
- (void) clearArrayOut
{
    bool goAgain = false;

    for (int j=0; j<[array count]; j++)
    {
        if ([[array objectAtIndex:j] someMethod] == NO)
        {
            [array removeObjectAtIndex:j];
            goAgain = true;
            break;
        }
    }

    if (goAgain) [self clearArrayOut];
} 
```

如何`NSPredicate`根据自定义类调用的某些方法的结果来过滤数组？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T19:02:24.730

要制作应用了过滤器的副本：

```
NSArray *filteredArray = [someArray filteredArrayUsingPredicate:
    [NSPredicate predicateWithBlock:^(id object, NSDictionary *bindings) {
        return [object someMethod]; // if someMethod returns YES, the object is kept
    }]]; 
```

要过滤`NSMutableArray`就地：

```
[someMutableArray filterUsingPredicate:
    [NSPredicate predicateWithBlock:^(id object, NSDictionary *bindings) {
        return [object someMethod]; // if someMethod returns YES, the object is kept
    }]]; 
```

但如果我过滤一个小数组，我可能只会使用一个`for`循环。但是，我会`for`以不同的方式编写循环，以避免必须递减索引变量或递归调用自己：

```
- (void)clearArrayOut:(NSMutableArray *)array {
    for (int i = array.count - 1; i >= 0; --i) {
        if (![[array objectAtIndex:i] someMethod]) {
            [array removeObjectAtIndex:i];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:04:06.727

您只需将其写入您的谓词中，例如，假设您有一个带有调用方法的对象，`isOdd`并且您希望过滤数组以仅包含返回 true for 的对象`isOdd`，您可以这样做：

```
#import <Foundation/Foundation.h>

@interface barfoo : NSObject 
{
    int number;
}

- (BOOL)isOdd;
- (id)initWithNumber:(int)number;

@end

@implementation barfoo

- (NSString *)description
{
    return [NSString stringWithFormat:@"%i", number];
}

- (BOOL)isOdd
{
    return (number % 2);
}
- (id)initWithNumber:(int)tnumber
{
    if((self = [super init]))
    {
        number = tnumber;
    }

    return self;
}

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        NSMutableArray *array = [NSMutableArray array];
        for(int i=0; i<10; i++)
        {
            barfoo *foo = [[barfoo alloc] initWithNumber:i];
            [array addObject:[foo autorelease]];
        }

        NSLog(@"%@", array); // prints 0, 1, 2, 3, 4, 5, 6, 7, 8, 9

        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"isOdd == true"]; // This is oure predicate. isOdd must be true for objects to pass
        NSArray *result = [array filteredArrayUsingPredicate:predicate];

        NSLog(@"%@", result);
    }
} 
```

当然，这也适用于其他方式，您的谓词也可以读取`isOdd == false`，或者您可以添加更多要求以使对象通过。例如`isOdd == true AND foo == bar`。您可以在文档中阅读有关`NSPredicate`语法的更多信息`NSPredicate`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T19:04:41.057

您的实现一开始就非常低效：如果对象已被删除，您可以将循环更改为不前进，而不是递归地继续删除，如下所示：

```
- (void) clearArrayOut {
    int j = 0;
    while (j < [array count]) {
        if ([[array objectAtIndex:j] someMethod] == NO) {
            [array removeObjectAtIndex:j];
        } else {
            j++;
        }
    }
} 
```

您可以使用 做同样的事情`filterUsingPredicate:`，如下所示：

```
- (void) clearArrayOut {
    NSPredicate *p = [NSPredicate predicateWithBlock:^BOOL(id obj, NSDictionary *bindings) {
        return [obj someMethod] == NO
    }];
    [array filterUsingPredicate:p];
} 
```

# c# - 为什么 ListView 拒绝显示其列、项和子项（仅显示组）？

> ID：11439494
> 
> 赞同：2
> 
> 时间：2012-07-11T18:55:24.630
> 
> 标签：c#, .net, winforms, listview, listviewitem

ListView 似乎像鸡貂一样脾气暴躁，像 [被 PC 警察省略] 一样喜怒无常

在 - 和其他人的帮助下，我能够让 ListView 像我想要的那样工作（http://stackoverflow.com/questions/11423537/how-to-add-subitems-to-a-listview）。

现在我正在转换那个简单的演示，以便在真正的应用程序中使用。

我在表单的 Load 事件中创建列：

```
listViewGroupsItems.Columns.Add(colHeadName);
listViewGroupsItems.Columns.Add(colHeadRate); 
```

...但他们不显示。但是，我的第一项上方有一个空行。那么为什么没有显示文本值。他们“在那里”但看不见吗？为什么他们会被消灭？

无论如何，我想看到的是：

```
column1Title    column2Title
Group1Name
Item        subitem
Item        subitem
Group2Name
Item        subitem
Group1Name
Item        subitem
Item        subitem
Item        subitem
Item        subitem 
```

...但我实际看到的只是：

```
[blank line]
Group1Name 
```

...而已！

ListView 的 View 属性设置为 Details；否则，所有属性都是默认值。

我的列表视图代码是：

```
private void AddGroupsAndItems() {
    Dictionary<string, string> GroupsDict = PlatypusData.GetGroupsForTopLevel(Convert.ToInt32(labelTopLevel.Tag));
    int currentGroup = 0;
    foreach (KeyValuePair<string, string> entry in GroupsDict) {
        string GroupNumber = entry.Key;
        string GroupName = entry.Value;
        listViewGroupsItems.Groups.Add(new ListViewGroup(GroupName, HorizontalAlignment.Left));

        Dictionary<string, string> ItemsDict = PlatypusData.GetItemsForGroup(GroupNumber);
        foreach (KeyValuePair<string, string> itemEntry in ItemsDict) {
            string itemID = itemEntry.Key;
            string itemName = itemEntry.Value;
            ListViewItem lvi = new ListViewItem(string.Format("{0} ({1})", itemName, itemID));
            lvi.SubItems.Add(PlatypusData.GetDuckbillNameForItemId(itemID));
            listViewGroupsItems.Items.Add(lvi);
            listViewGroupsItems.Groups[currentGroup].Items.Add(lvi);
        }
        currentGroup++;
    }
} 
```

## 更新

我在表单的 Load 事件中更改了我的代码：

```
var colHeadName = new ColumnHeader { Text = Resources.RateRequestForm_RateRequestForm_Load_Billing_Account_Client, Width = 160 };
var colHeadRate = new ColumnHeader { Text = Resources.RateRequestForm_RateRequestForm_Load_RatePlan_ID, Width = 120 };
listViewCustomerBillAccountsClients.Columns.Add(colheadName); //colHeadName);
listViewCustomerBillAccountsClients.Columns.Add(colheadRate); //colHeadRate); 
```

...至：

```
ColumnHeader colheadName = new ColumnHeader();
ColumnHeader colheadRate = new ColumnHeader();
listViewCustomerBillAccountsClients.Columns.Add(colheadName); 
listViewCustomerBillAccountsClients.Columns.Add(colheadRate); 
```

......它根本没有任何区别。

似乎 ColumnHeader 构造函数应该能够获取它应该显示的字符串，但即使我这样做：

```
ColumnHeader colheadName = new ColumnHeader("This");
ColumnHeader colheadRate = new ColumnHeader("That"); 
```

...仍然没有变化（根据 Intellisense 或其他名称，字符串 arg 是 ImageKey，但我想我会出于彻底/沮丧而尝试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-08T13:10:01.133

聚会迟到了，但我刚刚花了一些时间试图解决一个类似的问题。我找到的答案是，在填写之前清除列表时，您必须使用

```
listviewGroupItems.Items.Clear(); 
```

不是

```
listviewGroupItems.Clear(); 
```

ListView.Clear() 方法清除控件中的所有内容——包括列

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-04T15:09:37.213

我今天有同样的问题。我已经`listView.Clear()`按照提到的 user2867342 进行了编码。我需要将其更改为`listView.Items.Clear()`，但这并没有使列出现。列在那里，我可以单击它们并调整它们的大小，但它们完全是空白的。

我将 ListView 设置为详细信息模式。我还将该[`OwnerDraw`属性](https://msdn.microsoft.com/en-us/library/system.windows.forms.listview.ownerdraw(v=vs.110).aspx)设置为 true，因为我想绘制自己的进度条列。MSDN 对 OwnerDraw 属性（重点是我的）说如下：

> ListView 控件通常由操作系统绘制。为了自定义 ListView 项、子项和列标题的外观，请将 OwnerDraw 属性设置为 true 并为以下一个或多个事件提供处理程序：DrawItem、DrawSubItem、DrawColumnHeader。这称为所有者绘图。**当 View 属性设置为 View.Details 时，所有三个事件都会发生；否则，只会发生 DrawItem 事件。**

我必须实现 DrawColumnHeader 事件。在我的情况下，默认值工作正常，因此该方法将 DrawDefault 事件参数设置为 true。实现此事件处理程序后，列标题正确显示：

```
...Windows.Forms designer code...
listView.DrawColumnHeader += new DrawListViewColumnHeaderEventHandler(this.listView_DrawColumnHeader);
...

private void listView_DrawColumnHeader(object sender, DrawListViewColumnHeaderEventArgs e)
{
    e.DrawDefault = true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T19:49:38.413

您的代码中缺少列标题。（固定的）

根据 MSDN：

“如果您的 ListView 控件没有指定任何列标题并且您将 View 属性设置为 View.Details，则 ListView 控件将不会显示任何项目。如果您的 ListView 控件没有指定任何列标题并且您将 View 属性设置为View.Tile，ListView 控件不会显示任何子项。”

诚然，您可能需要进行比您在我的 SS 中看到的更多的调整，但它至少回答了您为什么会出现空白的问题。

* * *

![在此处输入图像描述](../Images/85e112bde88f8f5d8912785c9b6e8fbe.png)

* * *

编辑（更改的行，尽管将它们更改回您的代码并没有影响我的成功结果）：

```
lvi.Group = listViewGroupsItems.Groups[currentGroup];
listViewGroupsItems.Items.Add(lvi); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-13T10:26:42.473

我刚刚发现要检查的另一件事： **OwnerDraw**必须为假。

从以前的项目复制和粘贴，忘记了我使用 OwnerDraw

# matrix - 矩阵中可能组合的数量

> ID：11439497
> 
> 赞同：1
> 
> 时间：2012-07-11T18:55:41.663
> 
> 标签：matrix, combinations

我的同事给了我一个我认为是 NP 的具有挑战性的问题，但他不会将其作为答案。

给定一个矩阵，通过每列仅选择一个数字来确定有多少非重复数字/字母组合。为此使用蛮力（尝试所有可能的组合）是不可接受的。他想要一个公式来解决这个问题。

**例如他给了我这个矩阵**

1 2 2 3
2 3 3 4
3 4 4 5
4 5 5 6

**一些示例结果是**

1) 1 2 3 4
2) 1 2 3 5
3) 1 2 3 6
4) 1 3 2 4
5) 1 3 2 5
6) 等等...

我编写了一个 java 程序，它基本上由 4 个 for 循环组成，通过所有可能的组合（4x4x4x4=256 组合）得到我相信答案是 36 种可能的组合。但这对他来说是无法接受的。并且对于解决方案，它不能独立于一个矩阵，它必须适用于所有 nxn 矩阵。

一直在为此绞尽脑汁，我相信问题是 np(hard/complete)，因为它可以在多项式时间内解决，但没有通用算法可以做......你必须强行使用它。

任何帮助/指针/参考地点将不胜感激......

# javascript - 如何在 HTML 中每秒调用一个 javascript 函数？

> ID：11439499
> 
> 赞同：0
> 
> 时间：2012-07-11T18:55:53.297
> 
> 标签：javascript, countdown

我在 html 文件中有多个段落，应该显示动态倒计时。所以我在javascript中做了一个倒计时函数，每次调用它都会返回剩余时间。不幸的是，我不知道如何在 html 文件中每秒调用这个函数。你能帮帮我吗？

这就是我的 html 文件的样子： **编辑，我的 html 文件中有很多倒计时段落！**：

```
<p class="countdown"><script>document.write(CountdownAnzeigen('2012-07-16 12:20:00'));</script></p>
<p class="countdown"><script>document.write(CountdownAnzeigen('2012-08-10 10:10:00'));</script></p>
... 
```

javascript函数如下所示：

```
function CountdownAnzeigen(end_datetime){
    var Now = new Date();
    var Countdown = Date.parse(end_datetime);
    var CountdownText = Countdown.getTime()-Now.getTime();
    return CountdownText;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:00:43.057

```
setInterval(function() {
    CountdownAnzeigen('2012-07-16 12:20:00');
}, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:04:14.240

该`setInterval(foobar, x)`函数用于`foobar`每`x` *毫秒*运行一次函数。

请注意，它`foobar`可以是要运行的函数，*也*可以是将被解释为 Javascript 的字符串，但我相信它接受使用字符串方法是不好的做法。

请参阅[MDN setInterval 文档](https://developer.mozilla.org/en/DOM/window.setInterval)。

（另请参阅 setInterval 的姊妹方法[`setTimeout`的文档](https://developer.mozilla.org/en/DOM/window.setTimeout)。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T19:58:47.133

使用`data-`属性将目标时间与每个元素相关联：

```
<p class="countdown" data-target-time="2012-07-06 12:20:00"></p>
<p class="countdown" data-target-time="2012-08-10 10:10:00"></p> 
```

然后使用单个`setInterval`函数用倒计时函数的结果填充每个`countdown`-classed 元素的相关时间数据：

```
setTimeout(function() {
    var countdowns = document.getElementsByClassName("countdown");
    for(var i=0; i < countdowns.length; ++i) {
        var cd = countdowns[i];
        cd.innerHTML = CountdownAnzeigen(cd.getAttribute("data-target-time"));
    }
}, 1000); 
```

这将创建[完全有效的 HTML5](http://ejohn.org/blog/html-5-data-attributes/)，并且在旧浏览器中仍然可以正常运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:28:37.067

[您也可以通过setTimeout()](http://www.w3schools.com/js/js_timing.asp)定期调用函数。

[示例](http://pastebin.com/bwUkq9Q2)：

javascript

```
function CountdownAnzeigen(countdown){
    document.getElementById('countdown').innerHTML = countdown--;
    if (countdown>0) {
       window.setTimeout(function(){CountdownAnzeigen(countdown);}, 1000);
    } else { alert('The End');}
} 
```

html

```
<input type="button" value="count down" onclick="CountdownAnzeigen(10)"/>
<div id="countdown"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T19:29:17.800

除了所有答案如何使用`setInterval()`，没有人解释，如何将结果放入段落中。:)

所以再一次，像这样调用你的函数：

```
setInterval(function() { CountdownAnzeigen('2012-07-16 12:20:00'); }, 1000); 
```

并更新功能：

```
// remove return value
return CountdownText;

// and replace it with this
document.getElementById('countdown').innerHTML = CountdownText; 
```

最后将您的 HTML 更改为：

```
<p class="countdown" id="countdown"></p> 
```

如果您不使用任何“onload”处理程序，请将所有 JavaScript 放在段落下方并手动调用该函数一次，以便立即获得开始时间，而不是一秒钟后的第一次。

### 编辑

如果你有多个段落，你可以这样做：

```
<p class="countdown" id="countdown_1"></p>
<p class="countdown" id="countdown_2"></p>

<script>
    setInterval(function() { CountdownAnzeigen('countdown_1', '2012-07-16 12:20:00'); }, 1000)
    setInterval(function() { CountdownAnzeigen('countdown_2', '2012-07-16 12:20:00'); }, 500)
</script> 
```

并将函数更新为：

```
document.getElementById(id).innerHTML = a; 
```

`ìd`函数调用的新参数在哪里。

# objective-c - 如何在 iPad 应用程序中使用 FMDB 作为框架？

> ID：11439500
> 
> 赞同：5
> 
> 时间：2012-07-11T18:55:53.707
> 
> 标签：objective-c, c, ipad, sqlite, fmdb

我目前正在开发一个 iPad 应用程序。在一个阶段，有一系列滑块和按钮，当您按下按钮时，它将滑块的值存储到表格中。首先，我需要使用 SQLite 来管理数据库。我发现了一个名为 FMDB 的项目，它是 iPhone/Mac 应用程序的 SQLite 包装器。我对 iOS/Objective-c 开发非常陌生，想知道如何将 FMDB（或 FMDB 框架）添加到应用程序中。

-特里斯坦

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T21:08:41.327

在此处下载 FMDB 源：[https ://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)

要导入 src 文件夹，您只需将其拖放到 Xcode 的项目导航器中即可。在提示符下，检查以复制文件。然后您可能希望将文件夹从 src 重命名为 FMDB，并可能创建另一个文件夹来对外部库进行分类。

不要忘记将 libsqlite3.dylib 包含到您的项目中。为此，请在导航器中单击您的项目，单击 TARGETS 下的项目名称，然后转到 Build Phases 选项卡。展开 Link Binary With Libraries 并单击 + 按钮将其添加。

# c# - 当我包含查询时，GetListItems 超时

> ID：11439504
> 
> 赞同：0
> 
> 时间：2012-07-11T18:56:02.440
> 
> 标签：c#, web-services, sharepoint

我正在尝试`Lists.GetListItems`使用 CAML 查询进行调用。当我不包含查询参数时它工作正常，但是当我包含查询时出现超时错误。假设我的网络服务被调用`TestWebService`，代码是：

```
 public static void GetListItemsTest()
    {
        try
        {
            string listName = "TestList";
            string[] fields = { "ID", "Title" };
            string queryStr =
                       "<GroupBy collapse='true'>" +
                          "<FieldRef Name='" + fields[1] + "' />" +
                       "</GroupBy>" +
                       "<OrderBy>" +
                          "<FieldRef Name='ID' Ascending='False' />" +
                       "</OrderBy>";
            XmlDocument xmlDoc = new System.Xml.XmlDocument();
            XmlElement query = xmlDoc.CreateElement("Query");
            XmlElement viewFields = xmlDoc.CreateElement("ViewFields");
            query.InnerXml = queryStr;
            viewFields.InnerXml = "";
            TestWebService.Lists lists = new TestWebService.Lists();
            lists.Url = "http://wss/sites/TestWebService/_vti_bin/lists.asmx";
            lists.Credentials = System.Net.CredentialCache.DefaultCredentials;
            XmlNode responseNode = lists.GetListItems(listName, null, query, viewFields, "1000000", null, null);
            Console.WriteLine("ran successfully");

        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }
        finally
        {
            Console.ReadLine();
        }

    } 
```

调用`GetListItems`挂起，然后抛出带有消息“操作已超时”的 WebException。如果我将`query.InnerXml`作业更改为：

```
query.InnerXml=""; 
```

然后`GetListItems`成功返回`responseNode`. 所以它必须与 CAML 查询片段有关。

经过进一步调查，我发现该`GroupBy`元素是问题的根源；`OrderBy`注释掉元素，查询超时，注释掉`GroupBy`元素，查询成功。我想知道是否`GroupBy`无法处理大型数据集，或者处理速度太慢；这个集合大约有 20,000 个元素，每个 Title 值的重复项一般不超过 5 或 6 个。LINQ 会更适用于这种情况吗？或者有没有办法用直接的 CAML 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:15:05.233

在 SharePoint 2010 系统上有 20,000 个项目时，您可能会遇到*SPQueryThrottledException*的风险。一个典型用户限制为 5000 个，少数特权用户限制为 20,000 个查询返回的项目。

您是否在 Title 列上设置了索引？这可能会提高 GroupBy 的性能。否则我怀疑查询会强制检索所有项目，然后将它们分组。尝试将它们分组，并在页面中检索它们，而不是一次全部检索。

我不知道它是否完全相关，但我只是写了关于[大型列表](http://www.novolocus.com/2012/07/11/dealing-with-large-lists-part-2-coping-with-large-queries/)查询的博客。

# java - 如何保持连接线程处于活动状态？（我需要使用守护进程吗？）

> ID：11439518
> 
> 赞同：4
> 
> 时间：2012-07-11T18:56:29.157
> 
> 标签：java, android, multithreading

我的 Android 应用程序使用线程来侦听来自通过 USB 连接的 PC 的套接字连接。在 PC 打开连接后的某个时刻（响应某些用户驱动的事件），我想通过它发送一些数据。

```
public void onCreate(Bundle savedInstanceState) {

    // SNIP: stuff and nonsense

    connection = new Thread(new ServerThread());
    connection.start();
}

public boolean onTouchEvent(MotionEvent event) {

    // SNIP: decide what to do; create string 'coordString'

    Message coordMsg = coordHandler.obtainMessage();
    Bundle coordMsgData = new Bundle();
    coordMsgData.putString("coords", coordString);
    coordMsg.setData(coordMsgData);
    if(coordHandler!=null)
    {
        coordHandler.sendMessage(coordMsg);
    }

    return false;
}

public class ServerThread extends Thread
{   
    public void run() {

        this.setName("serverThread");

        Looper.prepare();

        coordHandler = new Handler()
        {
            @Override
            public void handleMessage(Message msg) {
                Log.v(INNER_TAG,"here");
            }
        };

        // SNIP: Connection logic here

        Looper.loop();
    }
}. 
```

很长一段时间以来，我一直在挠头，想知道为什么`INNER_TAG`在触摸事件之后我从未在日志中看到 的值。我可以使用日志调试来跟踪`coordHandler!=null`块中的执行，但处理程序似乎从未触发。

然后它让我印象深刻：完成连接后线程可能正在退出。**啊！**不太确定我之前认为发生了什么，但我会将其归咎于一种`Loop`正在做一些神奇事情的信念。

所以我的问题是：我怎样才能保持我的线程运行？关于线程的官方[Android 开发参考](http://developer.android.com/reference/java/lang/Thread.html)简要提到

> 一个线程也可以成为一个守护进程，使它在后台运行。

这自然让我的*nix 感觉刺痛。（顺便说一句，你看过新的蜘蛛侠电影了吗？它很不错。） 守护进程是答案吗？还是我完全失去了情节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:59:14.117

在 Android 中使用**服务。**

您可以使用**服务在后台运行..**

请参阅此链接：

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

有关示例，请参见此链接：

[示例：使用消息传递在 Activity 和 Service 之间进行通信](https://stackoverflow.com/questions/4300291/example-communication-between-activity-and-service-using-messaging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:51:30.683

1.  更改`connection = new Thread(new ServerThread());`为：`connection = new ServerThread();`

2.  可能在设置/获取处理程序实例时添加同步块（毕竟它在不同的线程中:)）

3.  循环实际上具有魔力；）

4.  在 onDestroy 中退出 Looper for serverThread

5.  最后但并非最不重要的一点（尽管它与 Handler/Looper 主题无关，这可能是您在日志中从未看到您所期望的原因）：由于文档而不是用作 onTouchEvent，`boolean onTouchEvent(MotionEvent event)`因此可能永远不会调用此处理程序方法`boolean dispatchTouchEvent(MotionEvent ev)``Called when a touch screen event was not handled by any of the views under it.`

编辑：你确定它执行 sendMessage 吗？顺便说一句，你为什么使用`Log.v`？它假定您将日志记录级别设置为详细，否则日志将被放弃。我建议使用相当`Log.i`。

也许试试这个代码：

```
ServerThread connection;
Handler coordHandler;

public void onCreate(Bundle savedInstanceState) {
    connection = new ServerThread();
    connection.start();
}

@Override
protected void onDestroy() {
    synchronized (this) {
        if(coordHandler != null) {
            coordHandler.getLooper().quit();
        }
    }
    super.onDestroy();
}

public boolean dispatchTouchEvent(MotionEvent event) {

    synchronized (this) {
        if(coordHandler == null) {
            Log.i(INNER_TAG, "Handler is null");
        }
        else {
            Log.i(INNER_TAG, "Handler exists");
            coordHandler.sendMessage(
                    coordHandler.obtainMessage(
                            0, event.toString()));
        }
    }

    return false;
}

synchronized void setCoordHandler(Handler handler) {
    coordHandler = handler;
}

public class ServerThread extends Thread {

    public void run() {

        this.setName("serverThread");

        Looper.prepare();

        setCoordHandler(new Handler() {

            @Override
            public void handleMessage(Message msg) {
                Log.i(INNER_TAG, "Inside handler");
            }
        });

        Looper.loop();
    }
} 
```

# android - 来自 Asynctask 的 JSON 和网络操作？

> ID：11439522
> 
> 赞同：1
> 
> 时间：2012-07-11T18:56:37.013
> 
> 标签：android, json, asynchronous

我在网上找到了一个优秀的 JSON 解析器，我想在我的项目中使用它。会有很多 JSON 请求，所以我希望能够重用代码。这是 JSON 解析器：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url) { 
        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

在我的主要活动中，我需要一种方法来检索解析器返回的 JSONObject。但是，它需要在后台线程中完成。

我不知道如何从 Asynctask 返回对象。我在考虑也许将解析器类包装在 Asynctask 中，并在完成时让它返回，但这给出了同样的难题。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:18:43.827

您可以将已经编写的类放入方法返回的`AsyncTask`地方。在陆地上，从（在后台线程上调用的方法）返回的值被传递给在主线程上调用的值。您可以使用通知您操作已完成，并直接通过您定义的自定义回调接口传递对象，或者仅在操作完成时调用以取回已解析的 JSON。因此，例如，我们可以使用以下内容扩展您的类：`doInBackground()``JSONObject``AsyncTask``doInBackground()``onPostExecute()``onPostExecute()``Activity``Activity``AsyncTask.get()`

```
public class JSONParser extends AsyncTask<String, Void, JSONObject> {
    public interface MyCallbackInterface {
        public void onRequestCompleted(JSONObject result);
    }

    private MyCallbackInterface mCallback;

    public JSONParser(MyCallbackInterface callback) {
        mCallback = callback;
    }

    public JSONObject getJSONFromUrl(String url) { /* Existing Method */ }

    @Override
    protected JSONObject doInBackground(String... params) {
        String url = params[0];            
        return getJSONFromUrl(url);
    }

    @Override
    protected onPostExecute(JSONObject result) {
        //In here, call back to Activity or other listener that things are done
        mCallback.onRequestCompleted(result);
    }
} 
```

并从这样的活动中使用它：

```
public class MyActivity extends Activity implements MyCallbackInterface {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //...existing code...

        JSONParser parser = new JSONParser(this);
        parser.execute("http://my.remote.url");
    }

    @Override
    public void onRequestComplete(JSONObject result) {
        //Hooray, here's my JSONObject for the Activity to use!
    }
} 
```

此外，**作为旁注**，您可以在解析方法中替换以下所有代码：

```
is = httpEntity.getContent();           

try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(
            is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "n");
     }
    is.close();
    json = sb.toString();
} catch (Exception e) {
    Log.e("Buffer Error", "Error converting result " + e.toString());
} 
```

有了这个：

```
json = EntityUtils.toString(httpEntity); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:09:54.657

查看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)文档，第 3 个泛型类型参数是 Result，即后台计算结果的类型。

```
private class MyTask extends AsyncTask<Void, Void, JSONObject> {
    protected JSONObject doInBackground(Void... params) {
        ...
        return json;
    }
    protected void onPostExecute(JSONObject result) {
        // invoked on the UI thread
    }
} 
```

使您的任务成为活动的内部类，创建活动的成员`private JSONObject mJSON = null;`并`onPostExecute()`进行分配`mJSON = result;`

# c++ - GoogleMock 显示更详细的调试信息

> ID：11439525
> 
> 赞同：7
> 
> 时间：2012-07-11T18:56:47.217
> 
> 标签：c++, googletest, googlemock

我在工作中使用 googlemock。我们经常使用 EXPECT_THROW、EXPECT_NO_THROW 等...

我的问题是，当函数包装在 EXPECT_NO_THROW 中但实际上引发异常（即代码错误）时，如何让 googlemock 输出异常详细信息以及堆栈跟踪？

我得到的唯一输出是它引发了异常并且测试失败......这对于调试根本原因没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:44:38.223

`EXPECT_THROW`,`EXPECT_NO_THROW`等确实是[Google Test](https://github.com/google/googletest/blob/master/docs/advanced.md#exception-assertions)的一部分，而不是 Google Mock。

除了破解 gtest 源之外，我不知道有任何方法可以获取有关异常的更多信息。仅对于`std::exception`s，以下更改至少应在a或失败`what()`时输出异常。`EXPECT_NO_THROW``ASSERT_NO_THROW`

在 gtest/include/gtest/internal/gtest-internal.h 中，在第 1140 行附近，将`GTEST_TEST_NO_THROW_`宏更改为：

```
#define GTEST_TEST_NO_THROW_(statement, fail) \
  GTEST_AMBIGUOUS_ELSE_BLOCKER_ \
  if (::testing::internal::AlwaysTrue()) { \
    try { \
      GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_(statement); \
    } \
    catch (...) { \
      try { \
        std::exception_ptr exceptn_ptr(std::current_exception()); \
        std::rethrow_exception(exceptn_ptr); \
      } catch(const std::exception& exceptn) { \
        std::cerr << exceptn.what() << '\n'; \
      } \
      goto GTEST_CONCAT_TOKEN_(gtest_label_testnothrow_, __LINE__); \
    } \
  } else \
    GTEST_CONCAT_TOKEN_(gtest_label_testnothrow_, __LINE__): \
      fail("Expected: " #statement " doesn't throw an exception.\n" \
           "  Actual: it throws.") 
```

您显然可以在这里添加更多功能；捕获自定义异常类型，格式化失败消息以包含异常信息等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-04T10:00:49.737

您也可以一起省略断言，让您的测试用例抛出异常。因此，与其断言`f()`不会抛出：

```
ASSERT_NO_THROW(f()); 
```

您只需调用该函数：

```
f(); 
```

如果它抛出一个异常，它会给你一个像这样的输出：

```
C++ exception with description "something broke in f()" thrown in the test body. 
```

这当然只适用于`ASSERT_NO_THROW`，因为测试用例将终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T12:02:35.273

一般来说，GMock/GTest 无法对捕获的对象做任何事情。它不能仅仅假设你的代码抛出了`std::exception`你想要的尽可能多的子类，并且 C++ 不提供在引发异常时保存堆栈跟踪的任何方法，即使实际上存在堆栈帧和调试符号在你的二进制文件中。

但是，单元测试确实是一种验证技术，其他工具必须是您诊断的朋友。无论是添加临时日志记录（例如`printf`）还是交互式调试器（例如 ） `gdb`，都有更好的工具来完成这项工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T15:46:50.037

我发现在单元测试二进制文件上运行 gdb 是最简单的。幸运的是，我们编译了所有启用调试的代码 =]。

# language-agnostic - 可以通过平均来混合 8 位颜色吗？

> ID：11439530
> 
> 赞同：4
> 
> 时间：2012-07-11T18:57:04.587
> 
> 标签：language-agnostic, colors, color-blending

我有 2 个字节以 8 位格式表示颜色

```
MSB  LSB
01234567
  RRGGBB 
```

位 0 和 1 是垃圾。

要混合两种颜色，我应该只平均每种颜色的位数吗？

```
R1 = ( C1 ^ 00110000B ) >> 4;
G1 = ( C1 ^ 00001100B ) >> 2;
B1 = ( C1 ^ 00000011B );

R2 = ( C2 ^ 00110000B ) >> 4;
G2 = ( C2 ^ 00001100B ) >> 2;
B2 = ( C2 ^ 00000011B );

R3 = avg( R1 , R2 ) << 4;
G3 = avg( G1 , G2 ) << 2;
B3 = avg( B1 , B2 );

C3 = R3 + G3 + B3 
```

其中`C1`是第一种颜色，`C2`是第二种颜色，是`C3`混合颜色，`^`是按位与，`>>`是按位右移，`<<`是按位左移，`xxxxxxxxB`是二进制数，`avg( a , b )`是算术平均值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:21:35.123

您可以认为颜色是 3D 空间中的点。“平均”的定义取决于您使用的空间。如果您平均 RGB、HSL 或更“异国情调”的东西，您将得到不同的结果。

但是，如果您将每种颜色限制为 2 位，那么这些都不会真正重要，并且您的建议很好（除非，如评论中所述，您需要`&`，而不是`^`，来掩盖）。

（通过“平均”，我假设您的意思是添加位（每种颜色）并除以 2（右移）。请注意，如果您重复执行此操作（例如，平均两个图像，然后将结果与第三个平均，然后平均结果其中第四个）然后你最终会得到一些黑色的东西，因为右移向下舍入，所以你稍微偏向于较低的值）。

# ruby-on-rails - Rails 控制器动作中的菊花链条件。

> ID：11439532
> 
> 赞同：0
> 
> 时间：2012-07-11T18:57:11.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的控制器的 index 方法如下所示：

```
 def index
    if params["feed_source_id"]
      @feeds = Feed.find_all_by_feed_source_id(params["feed_source_id"])
    else
      @feeds = Feed.all
  end 
```

我刚刚将 Metasearch Gem 添加到我的应用程序中，它将我的索引中的搜索定义为：

```
@search = Feed.search(params[:search]) 
```

如何以菊花链方式连接这两个条件，以便 @search 执行搜索并包含 find_all_by_feed_source_id 条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:49:20.980

你想要这些条件的与，对吧？

我认为这应该有效：

```
Feed.search({ :feed_source_id_eq => params[:feed_source_id] }.merge(params[:search])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:29:12.370

不确定您的目标是什么 - 除了在索引操作中进行两次搜索之外？您想要两个搜索结果的并集还是交集？

如果你想要一个联合，你*可以*做类似@feeds = @feeds | @search.all 除了上面的所有代码之外，这会给你带来糟糕的表现。

我简要了解了 Metasearch Gem，它应该让您可以将 feed_source_id 作为参数之一包含在内。

# php - 将 Wordpress 帖子发布到外部数据库

> ID：11439534
> 
> 赞同：0
> 
> 时间：2012-07-11T18:57:21.147
> 
> 标签：php, database, codeigniter, wordpress

我正在使用 Codeigniter (PHP) 开发一个 Web 应用程序，我想使用 Wordpress 为应用程序做管理方面的工作，比如添加新帖子、从文件中导入数据等。我的应用程序有自己的单独数据库。如何将从 Wordpress 管理仪表板发布的数据写入我的应用程序数据库？

简而言之，当我点击“发布”按钮发布帖子时，我需要 wordpress 写入两个不同的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:38:51.977

您可以通过创建一个 cronjob 来执行此操作，并检查是否已将一些新帖子添加到 WP 数据库中，并复制到您的 Codeigniter 网站数据库或任何其他需要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:49:16.347

您可以将 WP Multi-User 安装与名为 Multi-post 的插件一起使用，这将允许您将一篇帖子保存到安装中的多个站点。

# maven - 如何使用 Maven 执行当前（顶级）目录中的文件？

> ID：11439536
> 
> 赞同：0
> 
> 时间：2012-07-11T18:57:28.307
> 
> 标签：maven, maven-plugin, exec-maven-plugin

我有一个可以成功构建的项目`mvn clean install`。我还可以使用[mvn exec:java 命令](http://mojo.codehaus.org/exec-maven-plugin)执行包含在 src/com/mycompany/myproject/ 文件夹中的脚本，方法是将 POM 中的“mainClass”完全限定为：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <configuration>
        <mainClass>com.mycompany.myproject.MyMainClass</mainClass>
    </configuration>
</plugin> 
```

但我想执行项目顶级文件夹中包含的脚本，即包含 pom.xml 文件的同一文件夹。这个类是一个示例应用程序，它演示了正在构建的项目的功能，它实际上并不是项目本身的一部分，这就是它不包含在 src/com/mycompany/myproject 中的原因。如果我简单地输入 mainClass `<mainClass>MyClassInCurrentFolder</mainClass>`，则找不到它。

我想我可以创建一个完全独立的 Maven 项目，它只包含 src/com/mycompany/myproject/ 下的这个类，并使用另一个项目作为依赖项。但我宁愿不这样做，毕竟它只是一个非常简单的项目演示应用程序。

关于如何使用 Maven 在顶级文件夹中执行此文件的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:21:23.357

我建议使用您自己提到的单独模块，因为这是分离真实代码和演示的最佳方式。这将使 Demo 的使用和 Demo 模块的配置更简单。

# sdk - 拖动 Corona SDK 中的故障？

> ID：11439537
> 
> 赞同：1
> 
> 时间：2012-07-11T18:57:29.937
> 
> 标签：sdk, lua, coronasdk

我对可拖动对象有疑问。当我将一个对象快速拖过另一个对象时，它会粘在另一个对象内。然后当我释放它时，它会射出。

这是我使用gameUI.lua 编写的代码。有人可以帮我吗？

```
display.setStatusBar(display.HiddenStatusBar)

local physics = require("physics")
physics.start()
physics.setDrawMode("normal")
physics.setGravity(0,5)

local gameUI = require("gameUI")

local floor = display.newImage("floor.jpg")
physics.addBody(floor, "static", {friction = 999, bounce = 0})
floor.y = 900

local box = display.newImage("box.png")
physics.addBody(box, {friction = 99, bounce = 0})
box.x = 100

function localDrag( event )
    gameUI.dragBody( event, { maxForce=100000, frequency=1000, dampingRatio=1,                              center=true })
end

function box:touch( event )
if event.phase == "began" then

    self.markX = self.x
    self.markY = self.y

elseif event.phase == "moved" then

    local x = (event.x - event.xStart) + self.markX
    local y = (event.y - event.yStart) + self.markY

    self.x, self.y = x, y

    if (self.x > 595) then
     self.x = 595
    end
    if (self.x < 46 ) then
    self.x = 46
end
    if (self.y > 795) then
    self.y = 795
    end
end

return true
end

box:addEventListener( "touch", localDrag)

local triangle = display.newImage("triangle.png")
triangle.x = 200
triangleShape = {   -45, 45  ,  -45, -45  ,  45, 45  }
physics.addBody(triangle, {friction = 99, bounce = 0, shape=triangleShape})
function localDrag( event )
gameUI.dragBody( event, { maxForce=1000000, frequency=1000, dampingRatio=1,                 center=true })
end

function triangle:touch( event )
if event.phase == "began" then

    self.markX = self.x
    self.markY = self.y

elseif event.phase == "moved" then

    local x = (event.x - event.xStart) + self.markX
    local y = (event.y - event.yStart) + self.markY

    self.x, self.y = x, y

    if (self.x > 595) then
     self.x = 595
    end
    if (self.x < 46 ) then
    self.x = 46
end
    if (self.y > 795) then
    self.y = 795
end
end

return true
end
triangle:addEventListener( "touch", localDrag)

local wall = display.newImage("wall.jpg")
physics.addBody(wall, "static", {friction = 0, bounce = 0})
wall.x = 665

local wall1 = display.newImage("wall.jpg")
physics.addBody(wall1, "static", {friction = 0, bounce = 0})
wall1.x = -25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:30:03.083

您的摩擦非常非常高，我建议您减少很多。（阅读 Corona SDK 文档中的 body 属性可能不会有什么坏处，它的细节比我在这里的一篇文章中要详细得多。）

对于您的身体卡住，这可能与摩擦有关，尽管如果它们实际上完全重叠，我怀疑这是因为睡觉。您可以在导致问题的主体上设置 obj.isSleepingAllowed = false 并对其进行测试，我相信您可能会看到明显的改进。

# javascript - 如何在 RequireJS 中模拟单元测试的依赖项？

> ID：11439540
> 
> 赞同：129
> 
> 时间：2012-07-11T18:57:34.867
> 
> 标签：javascript, unit-testing, mocking, requirejs

我有一个要测试的 AMD 模块，但我想模拟它的依赖关系而不是加载实际的依赖关系。我正在使用 requirejs，我的模块的代码如下所示：

```
define(['hurp', 'durp'], function(Hurp, Durp) {
  return {
    foo: function () {
      console.log(Hurp.beans)
    },
    bar: function () {
      console.log(Durp.beans)
    }
  }
} 
```

我怎样才能模拟出来`hurp`，`durp`以便有效地进行单元测试？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-27T20:48:34.880

因此，在阅读完[这篇文章后](https://groups.google.com/forum/?fromgroups#!topic/requirejs/UuRL0wQwRRw)，我想出了一个解决方案，它使用 requirejs 配置函数为您的测试创建一个新上下文，您可以在其中简单地模拟您的依赖项：

```
var cnt = 0;
function createContext(stubs) {
  cnt++;
  var map = {};

  var i18n = stubs.i18n;
  stubs.i18n = {
    load: sinon.spy(function(name, req, onLoad) {
      onLoad(i18n);
    })
  };

  _.each(stubs, function(value, key) {
    var stubName = 'stub' + key + cnt;

    map[key] = stubName;

    define(stubName, function() {
      return value;
    });
  });

  return require.config({
    context: "context_" + cnt,
    map: {
      "*": map
    },
    baseUrl: 'js/cfe/app/'
  });
} 
```

`Hurp`因此，它创建了一个新的上下文，其中的定义`Durp`将由您传递给函数的对象设置。名称的 Math.random 可能有点脏，但它有效。因为如果您要进行大量测试，则需要为每个套件创建新的上下文以防止重复使用您的模拟，或者在您需要真正的 requirejs 模块时加载模拟。

在您的情况下，它看起来像这样：

```
(function () {

  var stubs =  {
    hurp: 'hurp',
    durp: 'durp'
  };
  var context = createContext(stubs);

  context(['yourModuleName'], function (yourModule) {

    //your normal jasmine test starts here

    describe("yourModuleName", function () {
      it('should log', function(){
         spyOn(console, 'log');
         yourModule.foo();

         expect(console.log).toHasBeenCalledWith('hurp');
      })
    });
  });
})(); 
```

所以我在生产中使用了这种方法一段时间，它真的很强大。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-12-11T22:41:04.723

您可能想查看新的[Squire.js 库](https://github.com/iammerrick/Squire.js/)

来自文档：

*Squire.js 是一个供 Require.js 用户使用的依赖注入器，可以轻松地模拟依赖！*

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-27T18:48:13.670

对于这个问题，我找到了三种不同的解决方案，但没有一个是令人愉快的。

# 定义内联依赖

```
define('hurp', [], function () {
  return {
    beans: 'Beans'
  };
});

define('durp', [], function () {
  return {
    beans: 'durp beans'
  };
});

require('hurpdhurp', function () {
  // test hurpdurp in here
}); 
```

丑陋的。你必须用大量的 AMD 样板来混淆你的测试。

# 从不同路径加载模拟依赖项

这涉及使用单独的 config.js 文件为每个指向模拟而不是原始依赖项的依赖项定义路径。这也很丑陋，需要创建大量的测试文件和配置文件。

# 在节点中伪造它

这是我目前的解决方案，但仍然是一个糟糕的解决方案。

您创建自己的`define`函数来为模块提供自己的模拟并将测试放入回调中。然后`eval`是运行测试的模块，如下所示：

```
var fs = require('fs')
  , hurp = {
      beans: 'BEANS'
    }
  , durp = {
      beans: 'durp beans'
    }
  , hurpDurp = fs.readFileSync('path/to/hurpDurp', 'utf8');
  ;

function define(deps, cb) {
  var TestableHurpDurp = cb(hurp, durp);
  // now run tests below on TestableHurpDurp, which is using your
  // passed-in mocks as dependencies.
}

// evaluate the AMD module, running your mocked define function and your tests.
eval(hurpDurp); 
```

这是我的首选解决方案。它看起来有点神奇，但它有一些好处。

1.  在节点中运行你的测试，所以不会弄乱浏览器自动化。
2.  在您的测试中减少对凌乱的 AMD 样板的需求。
3.  您可以`eval`在愤怒中使用，并想象 Crockford 因愤怒而爆炸。

显然，它仍然有一些缺点。

1.  由于您在节点中进行测试，因此您无法对浏览器事件或 DOM 操作做任何事情。仅适用于测试逻辑。
2.  设置起来还是有点笨拙。您需要`define`在每个测试中进行模拟，因为那是您的测试实际运行的地方。

我正在开发一个测试运行器，以便为这类东西提供更好的语法，但我仍然没有解决问题 1 的好方法。

# 结论

在 requirejs 中模拟 deps 很糟糕。我找到了一种可行的方法，但我仍然对它不太满意。如果您有更好的想法，请告诉我。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-08-01T12:14:49.677

有一个`config.map`选项[http://requirejs.org/docs/api.html#config-map](http://requirejs.org/docs/api.html#config-map)。

关于如何使用它：

1.  定义普通模块；
2.  定义存根模块；
3.  显式配置RequireJS；

    ```
    requirejs.config({
      map: {
        'source/js': {
          'foo': 'normalModule'
        },
        'source/test': {
          'foo': 'stubModule'
        }
      }
    }); 
    ```

在这种情况下，对于普通代码和测试代码，您可以使用该`foo`模块，该模块将成为真正的模块引用和相应的存根。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-08-23T17:56:50.250

您可以使用[testr.js](https://github.com/mattfysh/testr.js)来模拟依赖项。您可以将 testr 设置为加载模拟依赖项而不是原始依赖项。这是一个示例用法：

```
var fakeDep = function(){
    this.getText = function(){
        return 'Fake Dependancy';
    };
};

var Module1 = testr('module1', {
    'dependancies/dependancy1':fakeDep
}); 
```

看看这个：[http ://cyberasylum.janithw.com/mocking-requirejs-dependencies-for-unit-testing/](http://cyberasylum.janithw.com/mocking-requirejs-dependencies-for-unit-testing/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-09T13:08:54.533

该答案基于[Andreas Köberle 的答案](https://stackoverflow.com/a/11695463/3107430)。
实施和理解他的解决方案对我来说并不容易，所以我将更详细地解释它是如何工作的，以及要避免的一些陷阱，希望它对未来的访问者有所帮助。

所以，首先是设置：
我使用**Karma**作为测试运行器，使用**MochaJs**作为测试框架。

**使用Squire**之类的东西对我不起作用，出于某种原因，当我使用它时，测试框架会抛出错误：

> TypeError：无法读取未定义的属性“调用”

[RequireJs](http://requirejs.org/)可以将模块 ID[映射](http://requirejs.org/docs/api.html#config-map)到其他模块 ID。它还允许创建一个使用不同于全局[配置的](http://requirejs.org/docs/api.html#config-context)[`require`函数](http://requirejs.org/docs/api.html#multiversion)。 这些功能对于此解决方案的工作至关重要。`require`

这是我的模拟代码版本，包括（很多）注释（我希望它可以理解）。我将它包装在一个模块中，以便测试可以轻松地需要它。

```
define([], function () {
    var count = 0;
    var requireJsMock= Object.create(null);
    requireJsMock.createMockRequire = function (mocks) {
        //mocks is an object with the module ids/paths as keys, and the module as value
        count++;
        var map = {};

        //register the mocks with unique names, and create a mapping from the mocked module id to the mock module id
        //this will cause RequireJs to load the mock module instead of the real one
        for (property in mocks) {
            if (mocks.hasOwnProperty(property)) {
                var moduleId = property;  //the object property is the module id
                var module = mocks[property];   //the value is the mock
                var stubId = 'stub' + moduleId + count;   //create a unique name to register the module

                map[moduleId] = stubId;   //add to the mapping

                //register the mock with the unique id, so that RequireJs can actually call it
                define(stubId, function () {
                    return module;
                });
            }
        }

        var defaultContext = requirejs.s.contexts._.config;
        var requireMockContext = { baseUrl: defaultContext.baseUrl };   //use the baseUrl of the global RequireJs config, so that it doesn't have to be repeated here
        requireMockContext.context = "context_" + count;    //use a unique context name, so that the configs dont overlap
        //use the mapping for all modules
        requireMockContext.map = {
            "*": map
        };
        return require.config(requireMockContext);  //create a require function that uses the new config
    };

    return requireJsMock;
}); 
```

我遇到的**最大的陷阱**是创建 RequireJs 配置，这实际上花了我几个小时。我试图（深度）复制它，并且只覆盖必要的属性（如上下文或地图）。这不起作用！只复制`baseUrl`，这工作正常。

# 用法

要使用它，请在测试中使用它，创建模拟，然后将其传递给`createMockRequire`. 例如：

```
var ModuleMock = function () {
    this.method = function () {
        methodCalled += 1;
    };
};
var mocks = {
    "ModuleIdOrPath": ModuleMock
}
var requireMocks = mocker.createMockRequire(mocks); 
```

这里是**一个完整的测试文件的例子**：

```
define(["chai", "requireJsMock"], function (chai, requireJsMock) {
    var expect = chai.expect;

    describe("Module", function () {
        describe("Method", function () {
            it("should work", function () {
                return new Promise(function (resolve, reject) {
                    var handler = { handle: function () { } };

                    var called = 0;
                    var moduleBMock = function () {
                        this.method = function () {
                            methodCalled += 1;
                        };
                    };
                    var mocks = {
                        "ModuleBIdOrPath": moduleBMock
                    }
                    var requireMocks = requireJsMock.createMockRequire(mocks);

                    requireMocks(["js/ModuleA"], function (moduleA) {
                        try {
                            moduleA.method();   //moduleA should call method of moduleBMock
                            expect(called).to.equal(1);
                            resolve();
                        } catch (e) {
                            reject(e);
                        }
                    });
                });
            });
        });
    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-07T14:25:19.293

如果你想做一些简单的 js 测试来隔离一个单元，那么你可以简单地使用这个片段：

```
function define(args, func){
    if(!args.length){
        throw new Error("please stick to the require.js api which wants a: define(['mydependency'], function(){})");
    }

    var fileName = document.scripts[document.scripts.length-1].src;

    // get rid of the url and path elements
    fileName = fileName.split("/");
    fileName = fileName[fileName.length-1];

    // get rid of the file ending
    fileName = fileName.split(".");
    fileName = fileName[0];

    window[fileName] = func;
    return func;
}
window.define = define; 
```

# javascript - 需要数学日期算法

> ID：11439542
> 
> 赞同：2
> 
> 时间：2012-07-11T18:57:40.710
> 
> 标签：javascript, algorithm, date

尴尬的是我需要一个小算法

我正在帮助一个网站，其中 gif B 在 7 月 1 日显示，C 在 3 日显示，A 在 5 日显示。然后在 7 号再次 b 以此类推 - a、b、c 每隔一天早上 8 点改变一次

那么如何使用一个简单的算法使这个脚本返回 0、1 或 2，具体取决于自 7 月 1 日以来的天数

[http://jsfiddle.net/mplungjan/T2Tjh/](http://jsfiddle.net/mplungjan/T2Tjh/)

```
var startDate = new Date(2012,6,1,8,0,0); 
var pics = ["b.gif","c.gif","a.gif"];
var aDay = 24*60*60*1000;
function getDateDiff(startDate,endDate) {
  var diff = endDate.getTime() - startDate.getTime();
  return Math.round(diff/aDay);
}
document.write('<br/>'+getDateDiff(startDate,new Date())); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T19:01:09.193

试试这个：

```
var startDate = new Date(2012, 6, 1, 8, 0, 0);
var pics = ["b.gif", "c.gif", "a.gif"];
var aDay = 24 * 60 * 60 * 1000;

function getDateDiff(startDate, endDate) {
    var diff = endDate.getTime() - startDate.getTime();
    return Math.round(diff / aDay);
}
document.write('<br/>' + pics[Math.floor(getDateDiff(startDate, new Date()) / 2) % 3]); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-11T19:01:09.143

您需要在此处使用[模运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#.C2.A0.25_%28Modulus%29)：

```
document.write('<br/>'+getDateDiff(startDate,new Date())%3); 
```

# java - 如何在 Oracle 的 SQLData.writeSQL() 中将 java.sql.Array 写入 java.sql.SQLOutput

> ID：11439543
> 
> 赞同：5
> 
> 时间：2012-07-11T18:57:43.863
> 
> 标签：java, arrays, oracle, jdbc, user-defined-types

我已经实现[`java.sql.SQLData`](http://docs.oracle.com/javase/7/docs/api/java/sql/SQLData.html)了使用 ojdbc6 将 UDT 对象绑定到准备好的语句。现在，我的一些 UDT 包含数组。我现在需要做的是：

```
class MyType implements SQLData {
  public void writeSQL(SQLOutput stream) throws SQLException {
    Array array = //...
    stream.writeArray(array);
  }
} 
```

为了构造 Oracle 数组，我需要一个 JDBC 连接。通常，这样做是这样的：

```
OracleConnection conn = // ...
Array array = conn.createARRAY("MY_ARRAY_TYPE", new Integer[] { 1, 2, 3 }); 
```

但是，在那种`writeSQL(SQLOutput)`方法中，我没有联系。此外，由于难以在简明问题中解释的原因，我无法在`MyType`. 我可以以某种方式从中提取该连接`SQLOutput`吗？我想避免使用这样的不稳定结构：

```
// In ojdbc6, I have observed a private "conn" member in OracleSQLOutput:
Field field = stream.getClass().getDeclaredField("conn");
field.setAccessible(true);
OracleConnection conn = (OracleConnection) field.get(stream); 
```

有任何想法吗？备择方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T14:47:01.800

这是我为解决此问题所做的工作。它不漂亮，但它有效。

我在我的类实现`SQLData`中添加了一个方法，该方法接收 a`java.sql.Connection`并设置相应的`java.sql.ARRAY`对象。

像这样的东西：

```
public class MyObject01 implements SQLData {
   private String value;
   private MyObject02[] details; // do note that details is a java array
   // ... also added getters and setters for these two properties

   private Array detailsArray;

   public void setupArrays(oracle.jdbc.OracleConnection oconn)
      throws SQLException
   {
       detailsArrays = oconn.createARRAY(MyObject02.ORACLE_OBJECT_ARRAY_NAME, getDetails());
       // MyObject02.ORACLE_OBJECT_ARRAY_NAME must be the name of the oracle "table of" type name
       // Also note that in Oracle you can't use JDBC's default createArray
       // since it's not supported. That's why you need to get a OracleConnection
       // instance here. 
   }       

   @Override
   public void writeSQL(Stream stream) throws SQLException {
       stream.writeString(getValue());
       stream.writeArray(detailsArray); // that's it
   }

   @Override
   public void readSQL(Stream stream) throws SQLException {
       setValue(stream.readString());
       Array array = stream.readArray();
       if (array != null) {
           setDetails((MyObject02[])array.getArray());
       }
   } 
```

这是第一部分。

然后，在过程调用中使用该对象之前，调用`setupArrays` 该对象的方法。例子：

```
public class DB {
    public static String executeProc(Connection conn, MyObject01 obj)
        throws SQLException
    {
        CalllableStatement cs = conn.prepareCall(" { ? = call sch.proc(?) }");
        cs.registerOutParameter(1, Types.VARCHAR);
        obj.setupArrays((oracle.jdbc.Connection)conn);
        cs.setObject(2, obj, Types.STRUCT);
        cs.executeUpdate();
        String ret = cs.getString(1);
        cs.close();
        return ret;
    }
} 
```

当然，在连接时，您需要正确注册您的类型：

```
Connection conn = DriverManager.getConnection("jdbc:oracle://localhost:1521/XE", "scott", "tiger" );
conn.getTypeMap().put(MyObject01.ORACLE_OBJECT_NAME, MyObject01.class);
conn.getTypeMap().put(MyObject02.ORACLE_OBJECT_NAME, MyObject02.class);
conn.getTypeMap().put(MyObject02.ORACLE_OBJECT_ARRAY_NAME, MyObject02[].class); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-04T11:27:50.873

看看这个[SO 答案](https://stackoverflow.com/a/45867910/1654527)。可以从以下位置获取连接`SQLOutput`：

```
 final OracleSQLOutput out = (OracleSQLOutput) sqlOutput;
    OracleConnection conn = (OracleConnection) out.getSTRUCT().getJavaSqlConnection(); 
```

# paypal - Paypal中的“个人支付”按钮？

> ID：11439544
> 
> 赞同：3
> 
> 时间：2012-07-11T18:57:46.613
> 
> 标签：paypal

我们的网站需要促进从一个用户到另一个用户的 Paypal“个人支付”。这是一份礼物（即生日礼物），**不是**对产品/服务的付款，也不是慈善捐赠。

可以从 Paypal 控制面板轻松进行个人付款（如果不使用信用卡，则无需付费）。但是，我找不到一种方法来实现一个简单的 html 按钮来启动个人支付而不是商业支付。

除了告诉用户登录 Paypal 并完成付款（这是我们宁愿避免的笨拙解决方案！）之外，是否有人知道解决方案。我想预先填充将接收付款等的金额和 Paypal 地址，就像正常的“付款”按钮一样，但作为个人付款，而不是商业付款。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:11:52.573

您可以使用[Adaptive Payments](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIntro)执行此操作，特别是在您的请求中将 PAYMENTTYPE 设置为 PERSONAL的[Pay API 。](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)

# c++ - ios::app 导致问题

> ID：11439546
> 
> 赞同：0
> 
> 时间：2012-07-11T18:57:49.220
> 
> 标签：c++, file, binary

```
#include<fstream>
#include<stdlib.h>
#include<stdio.h>
#include<string.h>
#include<iostream>

using namespace std;
char ch;

class book
{
    char *title;
    char *author;
    double price;
    int quantity;
    public:
       book()
       {
            title=NULL;
            author=NULL;
            price=0.00;
            quantity=0;
       }
       void create(char *a, char *b, double x, int q)
       {
            title=new char;
            author=new char;
            strcpy(title, a);
            strcpy(author, b);
            price=x;
            quantity=q;
       }

       void display()
       {
           cout<<"\n"<<title<<"\t"<<author<<"\t"<<price<<"\t"<<quantity;
       }
 };

 book obj, obj2;

 fstream stock;

 void displaystock();

 void addbook()
 {
     cout << "\033[2J\033[1;1H";

     int n, i,q, j;
     stock.open("stock.txt", ios::app|ios::out|ios::binary);

     cout<<"\n\nHow many unique book titles would you like to add?";
     cin>>n;

     char *a, *b;
     double x=0;

     a=new char;
     b= new char;
     for(i=0;i<n;i++)
     {
         while ((ch = getchar()) != '\n' && ch != EOF);
         cout<<stock.tellg();

         cout<<"\n\nEnter book title: ";
         gets(a);
         cout<<"\n\nEnter author: ";
         gets(b);
         cout<<"\n\nEnter price: ";
         cin>>x;
         cout<<"\n\nEnter quantity: ";
         cin>>q;

         obj.create(a,b,x, q);
         stock.write((char*)&obj,sizeof(obj));

    }
    stock.close();
}

void displaystock()
{
    cout << "\033[2J\033[1;1H";

    stock.open("stock.txt", ios::in|ios::binary);
    cout<<stock.tellg();

    while(stock.read((char*)&obj2, sizeof(obj2)))       
    {   

        cout<<"\n"<<stock.tellg();

        //if(!stock.eof())
        {
            obj2.display();
        }
        //else
            //break;
    }

    stock.close();
}

int main()
{
    addbook();    
    displaystock();    
    return 0;
} 
```

这是一个尝试使用类的对象写入和读取二进制文件的代码。当文件不存在（第一次运行）时，它可以工作。但是，只要将某些内容附加到现有文件，就会在读取时出现分段错误（在 displaystock 函数中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:16:58.083

你的代码有很多问题。我要在这里指出的一件事是

```
 void create(char *a, char *b, double x, int q)
 {
     title=new char;
     author=new char;
     strcpy(title, a);
     strcpy(author, b);
     price=x;
     quantity=q;
} 
```

您正在声明`title`并`author`成为类型`char*`，并且您正在使用它们从输入参数 a 和 b 复制数据。您仅在以下内容中为 1 个字符分配内存

```
 title = new char; 
```

很明显，您打算在 strcpy 时将其视为数组。结果将是您很可能正在写入尚未分配的内存，因为您没有提供足够的空间来复制数据。你真的会更好地使用`std::string`这个。此外，您的代码中散布着许多全局变量。还

```
 stock.write((char*)&obj,sizeof(obj)); 
```

不好。`book`将类实例的地址转换为a真的有意义`char*`吗？我会将您的代码分解成更简单的部分，停止使用如此多的全局变量（考虑使用函数参数来传递东西）并尝试通过使用调试器逐步检查您的代码来识别特定问题。希望这将帮助您识别和解决您遇到的一些问题。

最后一点 - 您没有删除您分配的任何内存`new`。

# entity-framework - 使用实体框架选择时的动态 ID 数

> ID：11439547
> 
> 赞同：1
> 
> 时间：2012-07-11T18:57:56.997
> 
> 标签：entity-framework, dynamic, parameters, numbers

我正在创建一个站点，我需要从数据库中选择具有 ID 的动态 nuber 并且我使用实体框架，所以我的问题不是这样做

```
IQueryable source = content.Products;

List<Object> o = new List<Object>();

foreach(int ID in IDS)
 o.Add(content.Where(s => s.id == ID).FirstOrDefault()); // getting the row from DB   foreach loop 
```

而不是这个，我想从数据库中获取所有具有动态 ID 数量的实体 Like

```
o = content.Where(s = s.id == ID || s.id == ID || s.ID == ID).ToList(); 
```

但是 where 条件需要像字符串一样是动态的，所以我可以从循环中添加 id，然后进行选择

```
string s = "where ";

foreach(int id in ids)
s += " id = " + id + " or ";

o = content.Where(s).ToList; 
```

所以我只访问数据库一次，而不是我需要为每一行访问几次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:34:53.237

您可以`Contains`为此使用：

```
List<Product> o = content.Where(s => ids.Contains(s.id)).ToList(); 
```

它转换为 SQL子句，并在单个查询中`IN`加载所有产品。`ids`

# codenameone - 如何设置代号一中单选按钮的显示速度？

> ID：11439550
> 
> 赞同：1
> 
> 时间：2012-07-11T18:58:10.000
> 
> 标签：codenameone

好的，标题很直接..我该怎么做？

我在 DefaultLookAndFeel 类中看到了一些东西......

所以我尝试了 DefaultLookAndFeel abc = new DefaultLookandFeel(UImanager.getinstance());

abc.settickerspeed(1000);

但它没有用。单选按钮 din 的代码速度发生变化。

在这种情况下应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:40:55.850

你需要使用

```
DefaultLookAndFeel d = ((DefaultLookAndFeel)UIManager.getInstamce().getLookAndFeel());
d.settickerspeed(1000); 
```

# java - 方法使用限制

> ID：11439552
> 
> 赞同：2
> 
> 时间：2012-07-11T18:58:11.333
> 
> 标签：java, code-access-security

我想知道是否有一种方法可以阻止一个类使用方法，但让另一个类根据它们扩展的内容使用该方法。

假设 class1 实现 Plugin，class2 实现 Mod，是否可以允许 class2 使用方法 load()；但阻止 class1 使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:03:44.353

也许您可以将调用者的类型传递给方法，然后使用[instanceof 比较运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)。例如：

```
public void myMethod(Object obj){
    if(obj instanceof Mod){
        \\ do something
    } else if(obj instanceof Plugin){
        \\ do not permit
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T19:04:01.187

使用**instanceof**检查实例的类型，然后赋予它方法的权限。

```
Class1 c1 = new Class1();
Class2 c2 = new Class2();

doIt(c1);
doIt(c2);

public void doIt(Object obj){

    if (obj instanceof Class2){

         myRestrictedMethod();

    }

} 
```

# tsql - 为什么“更新后”触发器的 INSERTED 表为空？

> ID：11439556
> 
> 赞同：0
> 
> 时间：2012-07-11T18:58:28.847
> 
> 标签：tsql, triggers

玩触发器；这个概念听起来很简单，但一直停留在为什么我的插入表是空的，正如调试器和打印语句所证明的那样。

上下文是这样的：我们想用一个键更新一个 FlightAudit 表，但我们暂时禁止更改 Flight 表。我们想出了“hack”，用分隔符填充“Comments”列末尾的键，然后将其解析出来。我们正在做一个测试，看看我们是否可以在“更新后”触发器而不是“代替更新”触发器中做我们想做的事情。我们会将注释解析回分号之前的原始值，然后使用分号之后的数据来更新审计表。

```
ALTER TRIGGER [dbo].[tr_Flight2_Upd_Comments] ON [dbo].[Flight2]  
AFTER UPDATE 
AS   
BEGIN  

declare @initial_trancount int = @@TRANCOUNT /* this must be at the very top */;

begin try
    /* For performance reasons */   
    SET NOCOUNT ON;  

    DECLARE @Comments varchar(100); 
    DECLARE @Type char(1);  
    DECLARE @FieldsUpdated XML;      
    DECLARE @ColumnsUpdated VARBINARY(100);  
    DECLARE @AircraftChange bit; 
    DECLARE @NumInsertedRowsForDebug int; 

    SELECT Top 1 @Comments = Inserted.Comments FROM inserted 
    SELECT @NumInsertedRowsForDebug = COUNT(*) from inserted 
-- Here is where see this issue, @Comments is null & 
    print 'Comments=' + IsNull(@Comments,'null') 
    print 'NumRows=' + convert(varchar(10),@NumInsertedRowsForDebug)

    -- Action  
    IF (UPDATE(Comments)) 
           BEGIN 
               Print 'This part works fine' 
               -- logic here removed that sets @NewComments 
               UPDATE Flight 
               SET Comments = @NewComments
               FROM Inserted, Flight2
               WHERE Inserted.FlightId = Flight2.FlightID 
           END 
etc...
END 
```

测试脚本：

```
update flight2 
   set Comments = 'Test22;DL 123420120711SLC;2011-01-01 00:00:00.0000000', 
       ShortCode = 'DL' 
   where FlightId = 'D1448AF1-1F00-41C6-B2F6-2F2EE1BACE07' 
select Comments, ShortCode, * from Flight2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:01:31.107

发布后不久，我看到了这个问题。我们将一个名为“Flight”的真实表克隆到一个名为“Flight2”的测试表中。

我不确定为什么，但下面的第一个 UPDATE 语句似乎是导致 INSERTED 表为空的原因，因为当我将其更改为第二个更新语句时，INSERTED 表按预期工作。

```
UPDATE Flight 
               SET Comments = @NewComments
               FROM Inserted, Flight
               WHERE Inserted.FlightId = Flight.FlightID 

UPDATE Flight 
               SET Comments = @NewComments
               FROM Inserted, Flight2
               WHERE Inserted.FlightId = Flight2.FlightID 
```

# android - 在特定 youtube 帐户中上传视频 - Android

> ID：11439560
> 
> 赞同：1
> 
> 时间：2012-07-11T18:58:47.257
> 
> 标签：android, youtube, youtube-api

我想创建一个应用程序，用户可以上传存储在设备上或用相机录制的视频，并自动将其上传到**我拥有**的特定帐户中。问题是我正在尝试通过网络使用 ytdirect 教程，但是[入门教程](http://code.google.com/p/youtube-direct/wiki/GettingStarted)并不是那么容易解释，而且对于（我认为）必须更简单的东西（我认为）可能使用 API 更简单。

我在这个[答案](https://stackoverflow.com/questions/10246212/android-youtube-upload-video-with-static-username-and-password/10432215#10432215)上遵循了这个步骤，这似乎是一种更好或至少更简单的方法来实现我正在寻找的使用相同的 YouTube Direct，但是在那个答案中用 ClientLoginAuthorizer.java 替换 GlsAuthorizer.java 是在项目中给我一些错误（特别是在使用 GlsAuthorizer.GlsAuthorizerFactory() 的 onCreate 上的 SubmitActivity.java 中）（1）。

我有开发者密钥和应用程序 ID，以及与之关联的 URL (xyz.appspot.com)。我不知道[项目](http://code.google.com/p/ytd-android/downloads/detail?name=ytd-android-0.2.tar.gz&can=2&q=)(2) 中 strings.xml 中的 default_ytd_domain_name 是什么。

还有其他方法可以在 YouTube 中上传视频（带有我可以使用的教程或示例代码），或者有人有更详细的步骤序列可以使用上面的第二个链接实现上传，因为我只是错过了该答案步骤中的两 (2) 点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-29T16:09:35.193

如果它已过期，我会做这样的事情来获取新的访问令牌。然后我将它传递回客户端并使用此令牌进行上传。

```
getYoutubeToken: function() {

        var now = moment();
        var result;
        if (now.diff(Meteor.settings.youtube.expiration, 'minutes') >= 50) {
            console.log('Getting new access token...')

            var options = {
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                content: "client_secret=" + Meteor.settings.youtube.client_secret + "&grant_type=refresh_token&refresh_token=" + Meteor.settings.youtube.refresh_token + "&client_id=" + Meteor.settings.youtube.client_id
            }

            try {
                result = HTTP.call("POST", 'https://www.googleapis.com/oauth2/v3/token', options);
                Meteor.settings.youtube.access_token = result.data.access_token;
                Meteor.settings.youtube.expiration = moment();

                return Meteor.settings.youtube.access_token;
            } catch (e) {
                // Got a network error, time-out or HTTP error in the 400 or 500 range.
                return false;
            }

        } else {
            console.log('Returning access token...')
            return Meteor.settings.youtube.access_token;
        }

    } 
```

# iis - IIS、VMWare、灾难恢复

> ID：11439562
> 
> 赞同：0
> 
> 时间：2012-07-11T18:59:00.610
> 
> 标签：iis, vmware, disaster-recovery

我们的 VMWare 环境中有许多 Web 服务器。我是一名开发人员（不是系统管理员），所以我不熟悉 VMWare，但我们的 IT 团队目前认为维护 DR 站点的最佳方式是维护多个 VMWare 服务器，并且每次我在生产中对 IIS 进行更改时，我需要在 DR VMWare 服务器上进行相同的更改。考虑到它需要手动冗余配置，这似乎是过多的工作和风险。

有没有办法可以将生产 VMWare 服务器复制到 DR 服务器，并保留 IIS 设置、文件权限等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:08:47.630

我们使用[Web Deploy](http://www.iis.net/download/WebDeploy/ "网络部署")在多个位置同步我们的生产服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:36:13.667

*   [Site Recovery Manager](http://www.vmware.com/products/site-recovery-manager/overview.html) 允许您创建一个完整的备用站点。

*   但是在本地级别上，将这些服务器放置在高可用性集群中是非常标准的过程。如果一台服务器出现故障，则机器会在另一个 ESX 中运行。

*   容错在这里也是一个有用的功能，尽管仅限于单 CPU 虚拟机。

# html - Chrome 中的 HTML5 必填字段

> ID：11439565
> 
> 赞同：4
> 
> 时间：2012-07-11T18:59:11.693
> 
> 标签：html, validation, google-chrome

我的表单中有一些 required="required" 输入字段。它在 Firefox 中运行良好，但在 Chrome 中，当字段为空时它不会弹出任何错误，但仍然会阻止表单提交，这不是很用户友好。我知道这可以在旧版本的 Chrome 中使用。

HTML：

```
<form method="post" id="contact-form" action="/kontakt">
                <div id="sylius_core_contact"><div class="form-field"><label for="sylius_core_contact_name" class=" required control-label">
    Ime i prezime
    </label><br><input type="text" id="sylius_core_contact_name" name="sylius_core_contact[name]" required="required"></div><div class="form-field"><label for="sylius_core_contact_email" class=" required control-label">
    Adresa e-pošte
    </label><br><input type="email" id="sylius_core_contact_email" name="sylius_core_contact[email]" required="required"></div><div class="form-field"><label for="sylius_core_contact_message" class=" required control-label">
    Poruka
    </label><br><textarea id="sylius_core_contact_message" name="sylius_core_contact[message]" required="required" rows="9"></textarea></div><input type="hidden" id="sylius_core_contact__token" name="sylius_core_contact[_token]" value="dc6f7bf332ad26f1cd9ae0aeba51f3ab4704578e"></div>
                <input value="Pošalji poruku" class="green-button" type="submit">
            </form> 
```

新 Chrome 有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T07:56:02.173

这是 Chromium [https://code.google.com/p/chromium/issues/detail?id=45804](https://code.google.com/p/chromium/issues/detail?id=45804)中的一个错误。

# java - 停止休眠在关联集合中持久化更改

> ID：11439567
> 
> 赞同：1
> 
> 时间：2012-07-11T18:59:14.367
> 
> 标签：java, hibernate

我正在通过休眠搜索加载一些休眠对象，然后在 UI 中显示它们。在那里，我们的用户选择一个对象并从 @ManyToMany 关联中删除一些元素。

当然，正如刷新会话时在[休眠文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-modifying)中所写的那样，即使我没有在找到的对象中调用 Session#save ，更改也会自动保留。

但这不是我需要的行为。我需要我的用户从关联中删除对象，但只是暂时的，仅用于从修改后的对象生成报告而不更改我的数据库。因此，关联中删除的对象不会显示在我的报告中。

我怎样才能做到这一点？

我正在考虑将关联对象标记为可[克隆](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Cloneable.html)并构建一个新实体并在那里进行更改，因为此特定 UI 中的所有操作都是只读的。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:18:20.083

用 标记集合`cascade="evict"`。然后根据需要删除对象，生成报告，然后`evict()`在刷新之前删除对象。

# foursquare - 有没有办法在 FourSquare 文档中说明哪些端点需要所有权密钥？

> ID：11439571
> 
> 赞同：0
> 
> 时间：2012-07-11T18:59:27.003
> 
> 标签：foursquare

我今天尝试使用统计数据和时间序列端点，在这两种情况下，我都被“用户不管理场地”错误所困扰。有没有办法从文档中判断哪些端点需要用户成为场地管理员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:55:06.210

是的，商家平台下列出了需要代理场地经理的端点： [https ://developer.foursquare.com/overview/merchants](https://developer.foursquare.com/overview/merchants)

# tomcat - EC2 上的休眠搜索？

> ID：11439572
> 
> 赞同：2
> 
> 时间：2012-07-11T18:59:33.493
> 
> 标签：tomcat, jboss, lucene, amazon-ec2, hibernate-search

我们正在最终确定将部署到 Amazon EC2 上的电子商务应用程序之一。该应用程序使用 JBoss Seam 构建，并大量使用 Hibernate/JPA 和 Hibernate Search。我们计划在一个集群中运行多个应用程序服务器，目前目标是 Tomcat 7，尽管我们也在研究将代码库迁移到 JBoss AS 7.1.1。

在考虑我们的集群设置时，我们遇到的一个大问题是 Hibernate Search 索引将如何工作。我们如何可靠地确保发送到应用服务器 #1 的搜索请求将返回与应用服务器 #2 相同的结果？有没有办法让索引在 2 个不同的应用服务器上保持同步？我浏览了 JMS 主/从设置的文档，但我们并没有真正的主/从架构。我们正在寻找更多的主/主，因为任一应用服务器都可能是更新索引的服务器。

有没有人遇到过任何有用的指南、提示或文档来解释如何在 EC2 等环境中最好地运行 Hibernate Search？我们渴望听到您能提供的任何建议；性能、索引、高可用性、集群等。您可以推荐的任何内容都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:13:29.710

我认为使用“主/主架构”是不可能的。但是使用主/从可以使索引保持同步并且应该为您工作。

看看[这里](http://docs.jboss.org/hibernate/search/3.2/reference/en/html_single/#jms-backend)

**Tomcat 不支持 JMS**，但是您可以使用另一个 JMS 提供程序（如[OpenJMS](http://openjms.sourceforge.net/)）或迁移到[tomEE](http://tomee.apache.org/tomcat-jms.html)或 JBoss。

* * *

关于，亚马逊我发现了这个：

*   [在亚马逊 s3 上访问 hiberante 搜索（lucene）文件的最佳方法是什么](https://stackoverflow.com/questions/9946466/what-is-the-best-method-to-access-hiberante-search-lucene-files-on-amazon-s3)
*   [http://aws.amazon.com/pt/search-engines/](http://aws.amazon.com/pt/search-engines/)

# android - 用户输入空指针异常的简单android类

> ID：11439573
> 
> 赞同：0
> 
> 时间：2012-07-11T18:59:34.443
> 
> 标签：android, class, nullpointerexception, user-input

我正在尝试编写这个简单的类，它将接受用户输入并将其显示到文本视图中，但每次我尝试运行它时，我的主类中都会出现致命错误。我是新手，我知道这很简单，但对于我的生活，我找不到它！非常感谢任何帮助。请参阅下面我的代码来创建类

```
 package com.ObComDis.wayne;

import android.app.Activity;
import android.os.Bundle;
import java.util.Date;
import android.app.Activity;
import android.os.Bundle;
import android.text.format.DateFormat;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class ObComDisActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

String name;
EditText et = (EditText) findViewById(R.id.edittext);
TextView t = (TextView) findViewById(R.id.textView1);

public String getName()
{
    String name = et.getText().toString();
    return name;
}
public void main (String args [])
{
    ObComDisActivity myocd = new ObComDisActivity();
    t.setText(name);

}
} 
```

这是我从日志猫那里得到的读数.....

```
07-11 18:55:01.149: D/AndroidRuntime(525): Shutting down VM
07-11 18:55:01.149: W/dalvikvm(525): threadid=1: thread exiting with uncaught exception       (group=0x40015560)
07-11 18:55:01.189: E/AndroidRuntime(525): FATAL EXCEPTION: main
07-11 18:55:01.189: E/AndroidRuntime(525): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.ObComDis.wayne/com.ObComDis.wayne.ObComDisActivity}: java.lang.NullPointerException
07-11 18:55:01.189: E/AndroidRuntime(525):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
07-11 18:55:01.189: E/AndroidRuntime(525):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-11 18:55:01.189: E/AndroidRuntime(525):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-11 18:55:01.189: E/AndroidRuntime(525):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-11 18:55:01.189: E/AndroidRuntime(525):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 18:55:01.189: E/AndroidRuntime(525):  at android.os.Looper.loop(Looper.java:123)
07-11 18:55:01.189: E/AndroidRuntime(525):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-11 18:55:01.189: E/AndroidRuntime(525):  at java.lang.reflect.Method.invokeNative(Native Method)
07-11 18:55:01.189: E/AndroidRuntime(525):  at java.lang.reflect.Method.invoke(Method.java:507)
07-11 18:55:01.189: E/AndroidRuntime(525):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-11 18:55:01.189: E/AndroidRuntime(525):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-11 18:55:01.189: E/AndroidRuntime(525):  at dalvik.system.NativeStart.main(Native Method)
07-11 18:55:01.189: E/AndroidRuntime(525): Caused by: java.lang.NullPointerException
07-11 18:55:01.189: E/AndroidRuntime(525):  at android.app.Activity.findViewById(Activity.java:1647)
07-11 18:55:01.189: E/AndroidRuntime(525):  at com.ObComDis.wayne.ObComDisActivity.<init>(ObComDisActivity.java:25)
07-11 18:55:01.189: E/AndroidRuntime(525):  at java.lang.Class.newInstanceImpl(Native Method)
07-11 18:55:01.189: E/AndroidRuntime(525):  at java.lang.Class.newInstance(Class.java:1409)
07-11 18:55:01.189: E/AndroidRuntime(525):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-11 18:55:01.189: E/AndroidRuntime(525):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
07-11 18:55:01.189: E/AndroidRuntime(525):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:05:33.507

findViewById() 在创建该视图之前返回 null，在您的情况下，这只会作为 onCreate() 中的 setContentView() 的结果发生。

尝试这样的事情：

```
EditText et;
TextView t;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    et = (EditText) findViewById(R.id.edittext);
    t = (TextView) findViewById(R.id.textView1);
} 
```

# magento - 301将简单产品重定向到Magento中的分组父级

> ID：11439575
> 
> 赞同：2
> 
> 时间：2012-07-11T18:59:39.490
> 
> 标签：magento, magento-1.6

我正在将我们目录中的一些简单产品组合到分组产品中。我需要创建从当前简单产品页面到新分组产品页面的 301 重定向。

这是我所拥有的一个例子：

1.  产品 a、b 和 c 是相似的简单产品，每个产品都有自己的 url。
2.  分组产品 z 具有与之关联的 a、b 和 c。
3.  a、b 和 c 的可见性更改为“单独不可见”。
4.  访问产品 c 的旧链接会导致“404 Not Found”错误。

我希望第 4 步产生带有分组产品网址的“301 永久移动”。我知道我可以手动更改 URL 重写列表中的条目，但我正在寻找一种更自动化的方法。

有人可以帮我指出正确的方向吗？

**更新：**

我已将文件 app/code/local/Mage/Catalog/controllers/ProductController.php 更新为：

```
protected function _initProduct()
    {
        $categoryId = (int) $this->getRequest()->getParam('category', false);
        $productId  = (int) $this->getRequest()->getParam('id');

        $params = new Varien_Object();
        $params->setCategoryId($categoryId);

        $parentIds = Mage::getModel('catalog/product_type_grouped')->getParentIdsByChild($productId);
        if(isset($parentIds[0])){
          $parent = Mage::getModel('catalog/product')->load($parentIds[0]);
          die($parent->getProductUrl());
        }

        return Mage::helper('catalog/product')->initProduct($productId, $this, $params);
    } 
```

我希望这会杀死任何简单的产品页面视图，但事实并非如此。似乎没有为设置为不可见的产品调用产品控制器。那是对的吗？

**更新 2：**

如果我修改“核心”文件而不是“本地”版本，则可以。关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:17:35.490

尝试根据[此站点](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller)重写控制器，但我认为您不必重写控制器。我建议你重写助手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:19:53.380

如果您的代码从核心工作，可能您没有使用成功的产品控制器进行扩展，请检查您的模块是否已加载，还要检查其他模块/扩展是否以某种方式未扩展与您要扩展的控制器相同的控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T13:48:11.997

您有 2 个选项：1.）如果您的产品属于分组的一部分，没有将可见性设置为“单独可见”（简单或可下载），您可以按照使用观察者模式的本教程进行操作并且它正在工作。[magento-grouped-product-redirect-tutorial](http://www.solvingmagento.com/magento-grouped-product-redirect-tutorial/) 底线是：

使用这个事件：

```
<events>
            <catalog_controller_product_init_after>
                <observers>
                    <company_catalog>
                        <class>company_catalog/observer</class>
                        <method>redirectGrouped</method>
                    </company_catalog>
                </observers>
            </catalog_controller_product_init_after>
        </events> 
```

以及您的观察者中的代码：

```
public function redirectGrouped(Varien_Event_Observer $observer)
    {
        $product = $observer->getEvent()->getProduct();
        $groupedTypeInstance = Mage::getModel('catalog/product_type_grouped');
        $parentIds = $groupedTypeInstance->getParentIdsByChild($product->getId());

        foreach ($parentIds as $parentId) {
            $parent = Mage::getModel('catalog/product')->load($parentId);
            if ($parent
                && $parent instanceof Mage_Catalog_Model_Product
                && $parent->getTypeId() == 'grouped'
            ) {
                $redirect = Mage::getStoreConfig(
                    'catalog/grouped_options/redirect_enabled',
                    Mage::app()->getStore()->getId()
                );
                if ($redirect) {
                    Mage::app()->getResponse()->setRedirect($parent->getProductUrl());
                }
                break;
            }
        }
    } 
```

2.）如果您像我一样拥有可见性“单独不可见”的产品，您会注意到上述解决方案不起作用。不幸的是，Magento 在我们使用事件之前检查可见性并返回 false。

所以我们能做的就是：rewrite `/app/code/core/Mage/Catalog/Helper/Product.php` and on function `public function initProduct($productId, $controller, $params = null)`

检查后：`if (!$this->canShow($product))`

添加使用与上面相同的代码，因为它可以正常工作。

```
$groupedTypeInstance = Mage::getModel('catalog/product_type_grouped');
            $parentIds = $groupedTypeInstance->getParentIdsByChild($product->getId());

            foreach ($parentIds as $parentId) {
                $parent = Mage::getModel('catalog/product')->load($parentId);
                if ($parent
                    && $parent instanceof Mage_Catalog_Model_Product
                    && $parent->getTypeId() == 'grouped'
                ) {
                    $redirect = Mage::getStoreConfig(
                        'catalog/grouped_options/redirect_enabled',
                        Mage::app()->getStore()->getId()
                    );
                    if ($redirect) {
                        Mage::app()->getResponse()->setRedirect($parent->getProductUrl());
                    }
                    break;
                }
            } 
```

# jquery - jPaginate 获得不正确的子项计数

> ID：11439579
> 
> 赞同：0
> 
> 时间：2012-07-11T18:59:45.947
> 
> 标签：jquery, jquery-plugins

在 jQuery 插件 jPaginate 中，子对象的数量始终返回由此代码确定的值 1（jPaginate.js 中的第 45-48 行）：

```
//getting the amount of elements inside parent element
var number_of_items = obj.children().size();
//calculate the number of pages we are going to have
var number_of_pages = Math.ceil(number_of_items/show_per_page); 
```

我在 document.ready 函数的标题中调用脚本：

```
$("#content").jPaginate({
items: 4,
pagination_class: "pagination",
minimize: true                    
}); 
```

我用 id="content" 将一个 div 包裹在我想要像这样分页的表行周围：

```
 <div id="content">
        <table class="stripeMe center box-shadow-inner">
            <?php foreach ($invoices as $invoice) { ?>
                <tr>
                    <td>
                        <a href='<?php echo $_SERVER['PHP_SELF']; ?>/retrieve?class=InvoiceLineItems&amp;id=<?php echo $invoice['invoice_id']; ?>'><?php echo $invoice['invoice_number']; ?></a>&nbsp;<?php echo $invoice['customer_name'] ?>&nbsp;<?php echo $invoice['invoice_date'] ?> 
                    </td>
                </tr>   
            <?php } ?>    
        </table>
    </div> 
```

我得到的是一长页记录，分页选择器设置为“上一个”1“下一个”。我尽可能地检查、删除和替换了三倍的代码并调试了代码。我仍然无法确定为什么`number_of_items`设置为 1。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:19:56.760

答案是由于选择器。

```
var number_of_items = obj.children().size(); 
```

**obj**是您传递给插件的**#content 。**所以 obj.children() 只返回 obj 中的第一个孩子**table**。由于数组中只有一项，它的大小为 1。

# tsql - 如何使用 tSQL 删除字符串的最后一个字符？

> ID：11439580
> 
> 赞同：2
> 
> 时间：2012-07-11T18:59:51.933
> 
> 标签：tsql

在这种情况下，我只需要删除最后一个逗号 (,) 字符。

我尝试了`Substring, Left, and Right`函数，但它们需要**字符串的长度**。

这是场景： -

```
select 
(Case col1 & 1 When 1 Then 'Case 1,' Else '' End)  + 
(Case Col2 & 2 When 2 Then 'Case 2,' Else '' End)  +
(Case Col3 & 4 When 4 Then 'Case 4,' Else '' End)  
as Case
from table_01 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:27:50.507

好吧，只是不要删除最后一个逗号。改为删除*第一个：*

*   使用[`STUFF()`](http://msdn.microsoft.com/en-us/library/ms188043.aspx "东西（事务处理-SQL）")：

    ```
    SELECT
      STUFF(
        (CASE col1 & 1 WHEN 1 THEN ',Case 1' ELSE '' END)
        + (CASE col1 & 2 WHEN 2 THEN ',Case 2' ELSE '' END)
        + (CASE col1 & 4 WHEN 4 THEN ',Case 4' ELSE '' END),
        1,
        1,
        ''
      ) AS [Case]
    FROM table_01 
    ```

*   使用[`SUBSTRING()`](http://msdn.microsoft.com/en-us/library/ms187748.aspx "SUBSTRING (事务处理-SQL)")：

    ```
    SELECT
      SUBSTRING(
        (CASE col1 & 1 WHEN 1 THEN ',Case 1' ELSE '' END)
        + (CASE col1 & 2 WHEN 2 THEN ',Case 2' ELSE '' END)
        + (CASE col1 & 4 WHEN 4 THEN ',Case 4' ELSE '' END),
        2,
        999999  /* not necessary to calculate LEN()-1, any value
                   that is definitely greater than that will do */
      ) AS [Case]
    FROM table_01 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T19:02:00.187

您可以使用以下内容，它使用长度减一来为您提供所需的长度：

```
declare @string varchar(50)

set @string = 'testing, testing, testing,'

select substring(@string, 1, len(@string) -1) 
```

结果：

```
testing, testing, testing 
```

编辑：

您可以使用以下内容：

```
select substring(c, 1, len(c) -1)
from
(
  select 
    (Case When col1 = '1' Then 'Case 1,' Else '' End) +
    (Case When Col2 = '2' Then 'Case 2,' Else '' End) +
    (Case When Col3 = '4' Then 'Case 4,' Else '' End)  
    as C
  from t
) x 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/12eea/6)

# php - 如何通过 php 从其他 html/php 网站/服务器访问图像和其他数据？

> ID：11439582
> 
> 赞同：0
> 
> 时间：2012-07-11T18:59:58.603
> 
> 标签：php, html, image, tags, cron

我正在为某物的图像和信息创建一种数据库，并且我希望它在将信息添加到其他网站时动态更新。这个另一个站点是一个 wiki 站点，每个“项目”只有一个页面。如果为新项目添加了新页面，是否可以有一种 for 循环或可以每天或每周检查的东西，并且只能将信息保存在特定标签中，例如

或，而不是像页脚等？一些函数可以遍历数据库中我无法访问的所有图像。每个人都可以访问图像，但不能访问图像所在的文件夹。除了实际“尝试”所有图像的名称之外，还有其他方法吗？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:07:19.310

您可以使用 cron 每天/每周检查并使用 PHP 的 cURL 将网站详细信息拉入字符串，然后您可以根据需要解析该字符串。

至于图像，如果您无法获得目录列表，那么您也需要从代码中提取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:04:21.430

如果你想每天做一些事情，编写一个运行一次的脚本并将其设置为 cronjob。

从您的脚本中，您必须调用 wiki 站点以获取项目列表，然后从脚本中解析结果以查找要添加到数据库的新项目。不过，听起来可行。

# java - Java在Eclipse中运行时成功打开文件但在Netbeans中没有

> ID：11439585
> 
> 赞同：2
> 
> 时间：2012-07-11T19:00:14.553
> 
> 标签：java, netbeans, file-io

我一直在 Eclipse 中处理一个需要我打开文件的项目。它按预期工作。我将我的项目导入 Netbeans 只是为了检查它，但是运行时，文件无法打开。我认为在这种情况下截图会最有帮助：

![Netbeans 中的问题截图](../Images/322f114d5bd90b174244b01dbd448a13.png)

知道问题是什么吗？我什至在项目属性中明确指定了运行目录，但这仍然不起作用。

*附加信息：*

*   我只记得我在 Eclipse 中使用的是 JDK 1.6，但 Netbeans 使用的是 JDK 1.7——两个平台之间的文件路径解析处理方式不同吗？

此外，根据一些用户的建议，我在 catch 块中添加了：

```
System.err.println(new File(inFileName).getAbsolutePath(); 
```

它应该返回：

`C:\Users\David\Dev\projects\Autocuration\pearltrees_export_02-07-2012.rdf`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:30:10.683

尝试手动构建 URI 后，

```
System.out.println(new File(System.getProperty("user.dir")).toURI().resolve(inFileName)); 
```

我得到以下异常：

`Exception in thread "main" java.lang.IllegalArgumentException: Illegal character in path at index 32: pearltrees_export_02-07-2012.rdf`

考虑到没有第 32 个字符，我假设 printStackTrace 方法必须在打印之前修剪从异常消息中获得的字符串。

无论如何，Netbeans 似乎使用“”（空格）字符作为分隔符来解析 Run 参数。但是，它在将参数传递给 main 方法时也包括该空间。换句话说，我试图打开：

`"pearltrees_export_02-07-2012.rdf "`

而不是：

`"pearltrees_export_02-07-2012.rdf"`

只需修剪参数即可解决问题：

```
inStream = new FileInputStream(new File(inFileName.trim())); 
```

无论如何，我找不到任何说明这是预期行为的文档，因为它肯定与`java`二进制文件的行为方式（以及我知道的任何其他编辑器）不同。出于这个原因，我认为这是一个错误，并提交了一份错误报告：

[http://netbeans.org/bugzilla/show_bug.cgi?id=215429](http://netbeans.org/bugzilla/show_bug.cgi?id=215429)

我想我们会看看 Netbeans 的伙伴们怎么说..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:02:21.980

是同一个操作系统吗？相同的文件名？根据给出的消息，文件名似乎有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:05:55.937

在 catch 块中，您应该添加以下内容：

```
System.err.println(new File(inFileName).getAbsolutePath()); 
```

# google-maps-api-3 - 多个信息窗口

> ID：11439586
> 
> 赞同：0
> 
> 时间：2012-07-11T19:00:15.310
> 
> 标签：google-maps-api-3

我目前正在开发自定义地图，但有一个问题。我有几个 InfoWindows，但每个标记只显示其中一个。如何让每个标记显示它自己的信息窗口？显示的 InfoWindow 是代码中列出的最后一个（Copley Place Shopping）。此外，不确定这是否重要，但代码中最后列出的 InfoWindow 是为每个标记显示的那个。

链接到我的地图：[http ://www.searchtransparency.net/custom-google-map-v3/local-attractions-test.html](http://www.searchtransparency.net/custom-google-map-v3/local-attractions-test.html)

链接到我的工作地图：[http ://www.searchtransparency.net/custom-google-map-v3/local-attractions-test-working.html](http://www.searchtransparency.net/custom-google-map-v3/local-attractions-test-working.html)

感谢您的时间！

完整代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Custom Google Map</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
    function initialize() {
        var latlng = new google.maps.LatLng(42.3435295,-71.0871923);
        var settings = {
            zoom: 15,
            center: latlng,
            mapTypeControl: true,
            mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
            navigationControl: true,
            navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
            mapTypeId: google.maps.MapTypeId.ROADMAP};
        var map = new google.maps.Map(document.getElementById("map_canvas"), settings);

<!--START Westland Avenue Garage-->     
        var contentStringwesavegar = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">WESTLAND AVENUE GARAGE</h1>'+
            '<div id="bodyContent">'+
            '<p>Westland Avenue Garage is the cleanest, safest, and most convenient place to park in Back Bay Boston.</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentStringwesavegar
        });

        var wesavegarImage = new google.maps.MarkerImage('images/map-icons/parking.png',
            new google.maps.Size(50,50),
            new google.maps.Point(0,0),
            new google.maps.Point(50,50)
        );

        var wesavegarShadow = new google.maps.MarkerImage('images/map-icons/parking-shadow.png',
            new google.maps.Size(50,50),
            new google.maps.Point(0,0),
            new google.maps.Point(65, 50));

        var wesavegarPos = new google.maps.LatLng(42.3435295,-71.0871923);

        var wesavegarMarker = new google.maps.Marker({
            position: wesavegarPos,
            map: map,
            icon: wesavegarImage,
            shadow: wesavegarShadow,
            title:"Westland Avenue Parking Garage",
            zIndex: 3});
<!--STOP Westland Avenue Garage-->

<!--START Fenway Park-->        
        var contentStringfenpar = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">Fenway Park</h1>'+
            '<div id="bodyContent">'+
            '<p>Fenway Park is where you go to see any major league baseball game. Also, home of the Boston Red Sox team.</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentStringfenpar
        });

        var fenparImage = new google.maps.MarkerImage('images/map-icons/fenway-park.png',
            new google.maps.Size(122,50),
            new google.maps.Point(0,0),
            new google.maps.Point(50,50)
        );

        var fenparShadow = new google.maps.MarkerImage('images/map-icons/fenway-park-shadow.png',
            new google.maps.Size(122,50),
            new google.maps.Point(0,0),
            new google.maps.Point(65, 50));

        var fenparPos = new google.maps.LatLng(42.3462509,-71.0981704);

        var fenparMarker = new google.maps.Marker({
            position: fenparPos,
            map: map,
            icon: fenparImage,
            shadow: fenparShadow,
            title:"Fenway Park",
            zIndex: 3});
<!--STOP Fenway Park-->

<!--START Northeastern University-->        
        var contentStringnoruni = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">TITLE HERE</h1>'+
            '<div id="bodyContent">'+
            '<p>DESCRIPTION HERE.</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentStringnoruni
        });

        var noruniImage = new google.maps.MarkerImage('images/map-icons/northeastern-university.png',
            new google.maps.Size(200,50),
            new google.maps.Point(0,0),
            new google.maps.Point(50,50)
        );

        var noruniShadow = new google.maps.MarkerImage('images/map-icons/northeastern-university-shadow.png',
            new google.maps.Size(200,50),
            new google.maps.Point(0,0),
            new google.maps.Point(65, 50));

        var noruniPos = new google.maps.LatLng(42.3385917,-71.0909155);

        var noruniMarker = new google.maps.Marker({
            position: noruniPos,
            map: map,
            icon: noruniImage,
            shadow: noruniShadow,
            title:"Northeastern University",
            zIndex: 3});
<!--STOP Northeastern University-->

<!--START Berklee College of Music-->       
        var contentStringbercol = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">TITLE HERE</h1>'+
            '<div id="bodyContent">'+
            '<p>DESCRIPTION HERE.</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentStringbercol
        });

        var bercolImage = new google.maps.MarkerImage('images/map-icons/berklee-college-of-music.png',
            new google.maps.Size(202,50),
            new google.maps.Point(0,0),
            new google.maps.Point(50,50)
        );

        var bercolShadow = new google.maps.MarkerImage('images/map-icons/berklee-college-of-music-shadow.png',
            new google.maps.Size(202,50),
            new google.maps.Point(0,0),
            new google.maps.Point(65, 50));

        var bercolPos = new google.maps.LatLng(42.3475459,-71.0870190);

        var bercolMarker = new google.maps.Marker({
            position: bercolPos,
            map: map,
            icon: bercolImage,
            shadow: bercolShadow,
            title:"Berklee College of Music",
            zIndex: 3});
<!--STOP Berklee College of Music-->

<!--START Wentworth Institute of Technology-->      
        var contentStringwentec = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">TITLE HERE</h1>'+
            '<div id="bodyContent">'+
            '<p>DESCRIPTION HERE.</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentStringwentec
        });

        var wentecImage = new google.maps.MarkerImage('images/map-icons/wentworth-institute-of-technology.png',
            new google.maps.Size(272,50),
            new google.maps.Point(0,0),
            new google.maps.Point(50,50)
        );

        var wentecShadow = new google.maps.MarkerImage('images/map-icons/wentworth-institute-of-technology-shadow.png',
            new google.maps.Size(272,50),
            new google.maps.Point(0,0),
            new google.maps.Point(65, 50));

        var wentecPos = new google.maps.LatLng(42.3370475,-71.0970402);

        var wentecMarker = new google.maps.Marker({
            position: wentecPos,
            map: map,
            icon: wentecImage,
            shadow: wentecShadow,
            title:"Wentworth Institute of Technology",
            zIndex: 3});
<!--STOP Wentworth Institute of Technology-->

<!--START Symphony Hall-->      
        var contentStringsymhal = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">TITLE HERE</h1>'+
            '<div id="bodyContent">'+
            '<p>DESCRIPTION HERE.</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentStringsymhal
        });

        var symhalImage = new google.maps.MarkerImage('images/map-icons/symphony-hall.png',
            new google.maps.Size(136,50),
            new google.maps.Point(0,0),
            new google.maps.Point(50,50)
        );

        var symhalShadow = new google.maps.MarkerImage('images/map-icons/symphony-hall-shadow.png',
            new google.maps.Size(136,50),
            new google.maps.Point(0,0),
            new google.maps.Point(65, 50));

        var symhalPos = new google.maps.LatLng(42.3430809,-71.0853963);

        var symhalMarker = new google.maps.Marker({
            position: symhalPos,
            map: map,
            icon: symhalImage,
            shadow: symhalShadow,
            title:"Symphony Hall",
            zIndex: 3});
<!--STOP Symphony Hall-->

<!--START Newbury Street Shopping-->        
        var contentStringnewstr = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">TITLE HERE</h1>'+
            '<div id="bodyContent">'+
            '<p>DESCRIPTION HERE.</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentStringnewstr
        });

        var newstrImage = new google.maps.MarkerImage('images/map-icons/newbury-street-shopping.png',
            new google.maps.Size(204,50),
            new google.maps.Point(0,0),
            new google.maps.Point(50,50)
        );

        var newstrShadow = new google.maps.MarkerImage('images/map-icons/newbury-street-shopping-shadow.png',
            new google.maps.Size(204,50),
            new google.maps.Point(0,0),
            new google.maps.Point(65, 50));

        var newstrPos = new google.maps.LatLng(42.3483867,-71.0884548);

        var newstrMarker = new google.maps.Marker({
            position: newstrPos,
            map: map,
            icon: newstrImage,
            shadow: newstrShadow,
            title:"Newbury Street Shopping",
            zIndex: 3});
<!--STOP Newbury Street Shopping-->

<!--START House of Blues-->     
        var contentStringhoublu = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">TITLE HERE</h1>'+
            '<div id="bodyContent">'+
            '<p>DESCRIPTION HERE.</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentStringhoublu
        });

        var houbluImage = new google.maps.MarkerImage('images/map-icons/house-of-blues.png',
            new google.maps.Size(134,50),
            new google.maps.Point(0,0),
            new google.maps.Point(50,50)
        );

        var houbluShadow = new google.maps.MarkerImage('images/map-icons/house-of-blues-shadow.png',
            new google.maps.Size(134,50),
            new google.maps.Point(0,0),
            new google.maps.Point(65, 50));

        var houbluPos = new google.maps.LatLng(42.3471727,-71.0957007);

        var houbluMarker = new google.maps.Marker({
            position: houbluPos,
            map: map,
            icon: houbluImage,
            shadow: houbluShadow,
            title:"House of Blues",
            zIndex: 3});
<!--STOP House of Blues-->

<!--START Prudential Center Shopping-->     
        var contentStringprucen = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">TITLE HERE</h1>'+
            '<div id="bodyContent">'+
            '<p>DESCRIPTION HERE.</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentStringprucen
        });

        var prucenImage = new google.maps.MarkerImage('images/map-icons/prudential-center-shopping.png',
            new google.maps.Size(220,50),
            new google.maps.Point(0,0),
            new google.maps.Point(50,50)
        );

        var prucenShadow = new google.maps.MarkerImage('images/map-icons/prudential-center-shopping-shadow.png',
            new google.maps.Size(220,50),
            new google.maps.Point(0,0),
            new google.maps.Point(65, 50));

        var prucenPos = new google.maps.LatLng(42.3486763,-71.0826469);

        var prucenMarker = new google.maps.Marker({
            position: prucenPos,
            map: map,
            icon: prucenImage,
            shadow: prucenShadow,
            title:"Prudential Center Shopping",
            zIndex: 3});
<!--STOP Prudential Center Shopping-->

<!--START Copley Place Shopping-->      
        var contentStringcoppla = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">Copley Place Shopping <a href="http://www.facebook.com/ShopCopleyPlace">Get Directions</a></h1>'+
            '<div id="bodyContent">'+
            '<p>Copley Place is Boston&#39;s most distinctive shopping destination with 75 fabulous stores including:<br/><ul><li>Neiman Marcus</li><li>Barneys New York</li><li>Tiffany & Co.</li><li>Jimmy Choo</li><li>Intimacy</li><li>Tourneau</li><li>Salvatore Ferragamo</li><li>Porsche Design</li><li>David Yurman</li><li>A|X Armani Exchange</li><li>Louis Vuitton</li><li>Emporio Armani</li><li>Elie Tahari</li><li>Christian Dior</li><li>Burberry</li><li>BCBGMAXAZRIA</li></ul><br/><a href="http://www.facebook.com/ShopCopleyPlace">Get Directions</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://www.facebook.com/ShopCopleyPlace">More information</a></p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
            content: contentStringcoppla
        });

        var copplaImage = new google.maps.MarkerImage('images/map-icons/copley-place-shopping.png',
            new google.maps.Size(186,50),
            new google.maps.Point(0,0),
            new google.maps.Point(50,50)
        );

        var copplaShadow = new google.maps.MarkerImage('images/map-icons/copley-place-shopping-shadow.png',
            new google.maps.Size(186,50),
            new google.maps.Point(0,0),
            new google.maps.Point(65, 50));

        var copplaPos = new google.maps.LatLng(42.3473509,-71.0783045);

        var copplaMarker = new google.maps.Marker({
            position: copplaPos,
            map: map,
            icon: copplaImage,
            shadow: copplaShadow,
            title:"Copley Place Shopping",
            zIndex: 3});
<!--STOP Copley Place Shopping-->

        google.maps.event.addListener(wesavegarMarker, 'click', function() {
            infowindow.open(map,wesavegarMarker);
        });
        google.maps.event.addListener(fenparMarker, 'click', function() {
            infowindow.open(map,fenparMarker);
        });
        google.maps.event.addListener(noruniMarker, 'click', function() {
            infowindow.open(map,noruniMarker);
        });
        google.maps.event.addListener(bercolMarker, 'click', function() {
            infowindow.open(map,bercolMarker);
        });
        google.maps.event.addListener(wentecMarker, 'click', function() {
            infowindow.open(map,wentecMarker);
        });
        google.maps.event.addListener(symhalMarker, 'click', function() {
            infowindow.open(map,symhalMarker);
        });
        google.maps.event.addListener(newstrMarker, 'click', function() {
            infowindow.open(map,newstrMarker);
        });
        google.maps.event.addListener(houbluMarker, 'click', function() {
            infowindow.open(map,houbluMarker);
        });
        google.maps.event.addListener(prucenMarker, 'click', function() {
            infowindow.open(map,prucenMarker);
        });
        google.maps.event.addListener(copplaMarker, 'click', function() {
            infowindow.open(map,copplaMarker);
        });

    }
</script>
</head>
<body onLoad="initialize()">

<div style="width:960px; margin-left:auto; margin-right:auto; clear:both;">

    <h1 style="width:500px; float:left;">Google Custom Map</h1>

    <select style="float:right; margin-top:37px; margin-bottom:20px; color:#09F; font-size:18px; margin-left:20px;" name="categories">
        <option>Select Location</option>
        <option>Berklee College of Music</option>
        <option>Copley Place Shopping</option>
        <option>Fenway Park</option>
        <option>House of Blues</option>
        <option>Newbury Street Shopping</option>
        <option>Northeastern University</option>
        <option>Prudential Center Shopping</option>
        <option>Symphony Hall</option>
        <option>Wentworth Institute of Technology</option>
        <option>Westland Avenue Parking Garage</option>
    </select>

    <div id="map_canvas" style="width:960px; height:500px; margin-bottom:40px; float:left;"></div>

</div>

</div>

</body>
</html> 
```

* * *

```
<select onChange="triggerClick" style="float:right; margin-top:37px; color:#09F; font-size:18px; margin-left:20px;" name="categories">
    <option>Select Location</option>
    <option value='bercolMarker'>Berklee College of Music</option>
    <option value='chuapaMarker'>Church Park Apartments</option>
    <option>Copley Place Shopping</option>
    <option>Fenway Park</option>
    <option>House of Blues</option>
    <option>Huntington Theatre</option>
    <option>Museum of Fine Arts</option>
    <option>Newbury Street Shopping</option>
    <option>New England Conservatory</option>
    <option>Northeastern University</option>
    <option>Prudential Center Shopping</option>
    <option>Symphony Hall</option>
    <option>Wentworth Institute of Technology</option>
    <option>Westland Avenue Parking Garage</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:36:32.887

我将概述您可以添加到页面中的内容：

首先，您可能希望一次只打开一个 InfoWindow；如果你真的想同时打开多个信息窗口，那么每个信息窗口都需要自己的变量名。请注意，它们现在都已命名`infowindow`。

对于单个信息窗口设置，您必须做的是将其内容设置为在单击特定标记时更改。例如：

```
google.maps.event.addListener(wesavegarMarker, 'click', function() {
  infowindow.setContent(contentStringwesavegar);
  infowindow.open(map,wesavegarMarker);
}); 
```

并重复其他标记。

至于打开信息窗口的下拉菜单，我从[**这个页面**](http://www.wolfpil.de/v3/toggle-cats.html)了解到，您可以在特定标记上触发“人工”鼠标单击。

[**查看演示**](http://jsfiddle.net/yV6xv/160/)

为每个选项分配一个 ID `<select>`（我使用“selectLocation”）和值：

```
<select id="selectLocation">
  <option>Select Location</option>
  <option value='bercolChoice'>Berklee College of Music</option>
  <option value='wentecChoice'>wentworth</option>
</select> 
```

分配给选项值的字符串值需要与标记变量匹配，一个对象可以很好地解决这个问题（[**见这里**](https://stackoverflow.com/a/1369356/1238040)）：

```
 var selectChoices = {
    bercolChoice: bercolMarker,
    wentecChoice: wentecMarker
  }; 
```

最后听者：

```
 google.maps.event.addDomListener(
    document.getElementById("selectLocation"), 'change',
    function() {
      google.maps.event.trigger(selectChoices[this.value], "click");
    }); 
```

# php - 发送和解码 JSON 数组

> ID：11439590
> 
> 赞同：0
> 
> 时间：2012-07-11T19:00:31.327
> 
> 标签：php, ajax, arrays, json

我正在尝试对 JSON 数组进行编码并将其发送到 php 页面并将其添加到 mysql：

```
var data = $('form').serialize();
$.ajax({
    type: 'POST',
    url: 'naujas.php',
    dataType: 'json',
    data: ({
        json: JSON.stringify(data)
    }),
    success: function () {
        $('#naujas').load('naujas.php');
    }
}); 
```

但我认为它不起作用我从 php 得到这样的响应：`pav=1&ppav=2&kiekis=3&kaina=4d&ppav=5&kiekis=6&kaina=7&ppav=8&kiekis=9&kaina=0`

.php 文件

```
<?php
    $json = json_decode($_POST['json']);
    echo $json;
?> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:03:31.090

试试这样：

```
var data = $('form').serializeArray().reduce( function(obj,cur){
    obj[cur.name] = cur.value;
    return obj;
},{}); 
```

*说明*：

*   [**.serializeArray()**](http://api.jquery.com/serializeArray/)返回一个数组，其结构如下：

    ```
    [ {name:"inputname1",value:"inputvalue1"},
      {name:"inputname2",value:"inputvalue2"},
      //---------------------------------------
      {name:"inputnamen",value:"inputvaluen"} ] 
    ```

*   [**.reduce()**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)函数将该数组转换为对象：

    ```
    { "inputname1":"inputvalue1",
      "inputname2":"inputvalue2",
      //---------------------------------------
      "inputnamen":"inputvaluen" } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:07:31.187

`dataType: 'json'`已经告诉 jQuery 以 json 格式发布数据。

您需要做的就是发布您的数据，如下所示：

`data: (data),`

问题来自将您的对象转换为字符串表示形式（字符串化）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:20:33.190

您可能需要使用 php stripslashes

[http://php.net/manual/en/function.stripslashes.php](http://php.net/manual/en/function.stripslashes.php)

我认为它是这样的

```
json_decode(stripslashes($_POST['json'])); 
```

# android - Android- 增强现实图像链接

> ID：11439593
> 
> 赞同：3
> 
> 时间：2012-07-11T19:00:40.740
> 
> 标签：android, image, frameworks, augmented-reality

是否有框架或代码教程显示如何使用手机上的摄像头识别预定图像并将用户发送到指定链接。这应该是增强现实，但我看过的所有指南都使用地理位置，我不想要或不需要任何这些。我想要的基本上是一种识别图像的方法（有点像网络摄像头的面部识别）。我需要为一个项目设计一个这样的应用程序，尽管他们可能已经是这样的应用程序，但我需要一个指南或一些框架，以便我可以自行设计它。我试过 Junaio（指南没有帮助我理解所有服务器的东西）、vuforia（cygwin 不起作用，并且 unity 需要许可证），并且大多数其他框架都是地理定位。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:02:08.953

查看本教程，这似乎是一个很好的起点：

[安卓增强现实](http://mobile.tutsplus.com/tutorials/android/android_augmented-reality/)

也试试这些：在Android上。

[第1部分](http://imrannazar.com/Augmented-Reality-with-the-Android-NDK%3a-Part-1)

[第2部分](http://imrannazar.com/Augmented-Reality-with-the-Android-NDK%3a-Part-2)

这些是 Imran Nazar 撰写的关于增强现实的两部分文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:43:51.233

如果你还在寻找，或者其他人在寻找这个，我已经使用了这个[教程](http://dev.metaio.com/sdk/tutorials/hello-world/)。它会引导您完成从 andorid 环境设置到不同内容类型和跟踪配置的所有内容。它还具有示例代码和资产来测试增强。相当全面。希望这可以帮助。

# android - R的任何字段都无法解析

> ID：11439598
> 
> 赞同：0
> 
> 时间：2012-07-11T19:01:03.893
> 
> 标签：android

我有一个小项目，昨天我尝试了清理功能（“项目/清理”）。但是清理后没有“id”或“layout”可以解析（“[name] 无法解析或不是字段”）。

我不知道我做错了什么，因为我读到这是清理整个项目的好方法......

有人知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:08:12.450

检查 XML 文件中的错误。R 类是在 XML 被编译后生成的，以允许它与 Java 代码对话。如果找不到 R，则说明 XML 未构建或无法构建。

另外，请确保您没有导入`com.android.R`. 您的项目有自己的 R 类：`com.your.package.name.R`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:03:27.123

R.java 会在每次清理后的下一次构建中重新生成。如果您没有启用“自动构建”，请尝试启用它以在清理后立即开始重新生成。尝试运行项目（或只是构建它）。如果失败，请保存项目并重新启动 IDE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:10:25.957

我通常通过删除东西来修复资源错误。首先，删除包含`R`. 接下来，如果第一步没有帮助，请删除`/gen/`（但不是目录本身）的内容。

# php - Zend 库与我自己的库冲突

> ID：11439602
> 
> 赞同：1
> 
> 时间：2012-07-11T19:01:17.457
> 
> 标签：php, zend-framework

我在文件夹“类”中有自己的库。我正在尝试将 Zend 库用作独立库。（将他们的课程整合到我的应用程序中）。

例如如下。Zend 类都放在一个名为 Zend 的文件夹下

> 类/db.class.php
> 
> 类/Zend/translate.php ....

我以前使用自动加载功能来加载类。

```
if (!function_exists ("__autoload")){
function __autoload($class_name) 
{

    if(file_exists(ABSPATH.'/classes/'.$class_name.'.class.php')){
        require_once ABSPATH.'/classes/'.$class_name.'.class.php';
    }   

}
} 
```

我的函数检查我的应用程序是否需要我的类，如果是，我将从我的“类”文件夹加载它，如果不是，它将从 Zend 文件夹加载。

每当我打电话

```
require_once ABSPATH.'/classes/Zend/Loader/Autoloader.php'; 
$loader = Zend_Loader_Autoloader::getInstance(); 
```

它一直说我的“自己的”类没有加载。我认为这是 Zend 自动加载的问题，它检查并发现它需要 zend 文件夹中的 db.class.php。

当我在 Zend 和我自己的库之间分离库时，我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:16:12.670

魔术`__autoload`功能不支持多个自动加载器。如果您如上所示指定自定义自动加载器，然后注册 Zend 自动加载器，则以前安装的自动加载器将被 Zend 自动加载器覆盖。

由于 Zend 组件使用 spl_autoload_register()，您也可以使用此方法（支持多个自动加载器 - 它基本上安装一个处理另一个（用户定义的）自动加载器堆栈的自动加载器）。

[http://php.net/manual/function.spl-autoload-register.php](http://php.net/manual/function.spl-autoload-register.php)

```
// Example (requires PHP >= 5.3 because of the anonymous function)
spl_autoload_register(function($className) {
    $fileName = ABSPATH .'/classes/'. $className .'.class.php';
    if (is_readable($fileName)) {
        require_once($fileName);
    }
}); 
```

# php - 如何在不重定向到 php 文件的情况下调用 PHP 函数？

> ID：11439604
> 
> 赞同：0
> 
> 时间：2012-07-11T19:01:26.823
> 
> 标签：php, html

我有一个 Web 表单，它调用 PHP 函数在单击提交按钮时将其内容写入文件。但我希望文件“在后台”写入。也就是说，它应该写文件，但网页不应该改变。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:04:10.547

好消息：是的！

最简单的方法是使用流行的`jQuery`库。它们具有将表单数据发布到 php 文件而不刷新页面的功能。

它通常被称为“AJAX”，你可以在 google 上找到大量的文档，玩得开心：]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:06:20.920

检查[jQuery](http://api.jquery.com/jQuery.post/)参考中的示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:06:41.167

Ajax 是解决方案。[这是](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=9)使用 ajax 发送数据的示例（聊天应用程序）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:18:21.737

[http://www.jensbits.com/2009/10/04/jquery-ajax-and-jquery-post-form-submit-examples-with-php/](http://www.jensbits.com/2009/10/04/jquery-ajax-and-jquery-post-form-submit-examples-with-php/)

使用 jQuery $.post() 或 $.ajax() 在“后台”运行您的脚本。这样你就可以调用任何你想要的 url（脚本）而不改变页面内容（或者你可以根据需要对页面做一些事情）。

# python - Geany 无法执行 Python

> ID：11439607
> 
> 赞同：6
> 
> 时间：2012-07-11T19:01:31.127
> 
> 标签：python, windows-7, geany

我不是一个优秀的编码员，事实上我只是想学习，但是当我尝试执行程序时，我无法让 Geany 在我的系统（Windows 7）中重新识别 Python。当我单击执行时，它会打开一个命令提示符，说：

> 'python' 不是内部或外部命令、可运行程序或批处理文件

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T19:04:38.450

将 Python 可执行文件添加到 PATH。例如，我在以下位置安装了 Python：

```
C:\Program Files\Python 3.2 
```

所以按`Win`+ `Pause/Break`，然后转到“高级系统设置”：

![系统设置](../Images/f7b2224db73b96c610ecead909fcee35.png)

单击底部的“环境变量”，添加一个名为 的新用户变量`PYTHONDIR`，并将其设置为您的 Python 安装目录：

![添加新的环境变量](../Images/3a7186e233325b2f35ac210c41b198bc.png)

然后，在那里寻找另一个名为`PATH`. 如果没有，则创建一个并赋予其价值`%PYTHONDIR%`；否则，附加`;%PYTHONDIR`到现有的。它现在应该可以正常工作了。

![将 PYTHONDIR 添加到 PATH 变量](../Images/24a087f8d230a6a63ade0889f68de51e.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T06:12:15.747

或者您可以跳过新用户变量。找到 PATH 变量并单击编辑。您想添加`;C:\Python27`到该字符串的末尾。保存更改。

通过： http: [//pythoncentral.org/how-to-install-python-2-7-on-windows-7-python-is-not-recognized-as-an-internal-or-external-command/](http://pythoncentral.org/how-to-install-python-2-7-on-windows-7-python-is-not-recognized-as-an-internal-or-external-command/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T01:10:28.170

我遇到了同样的问题，发现按照之前其他帖子中的描述设置路径是必要的，但还不够。就我而言，我已将脚本保存到“geany”目录中。事实证明，geany 编辑器尝试在 geany 文件夹中创建临时文件时存在权限问题。一旦我将脚本保存到另一个文件夹，权限错误就消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-11T13:48:24.147

我遇到了这个问题。将 python 添加到 PATH，在 cmd 上工作正常。但是Geany无法执行。原来，在保存文件时，我没有输入 .py 作为扩展名。一旦我做到了，工作得很好。

# javascript - 如何使用彩盒建立画廊？

> ID：11439614
> 
> 赞同：0
> 
> 时间：2012-07-11T19:01:46.437
> 
> 标签：javascript, jquery, gallery, colorbox

我已经阅读了很多次常见问题解答，但我仍然没有得到任何令人满意的解决方案。

我将解释我的情况和我的实际问题：

*   我有一个翻转图像，它已经通过 CSS 分配了 id 和类，所以我将“group1”类放在“<a>”标签上，它开始工作但：

    *   我希望这张图片（点击时，一个href）可以打开整个画廊而不是一张照片

我注意到如果我输入一些隐藏代码，“彩盒画廊系统”就可以工作：

```
 <div style="display:none">
 <a class="group1" title="Lorenzo2" href="gallery/content/fashion/fash1_2.jpg" ></a>
 <a class="group1" title="Lorenzo3" href="gallery/content/fashion/fash1_3.jpg" ></a>
 <a class="group1" title="Lorenzo4" href="gallery/content/fashion/fash1_4.jpg" ></a>
 </div> 
```

如果谷歌的蜘蛛捕捉到它并将其标记为可禁止，这可能是一个真正的问题，但是我想这个“解决方案”也可以大大提高页面的权重。

如何通过仅使用一个用作链接（href）的翻转图像来打开带有颜色框的画廊？我宁愿打开一个整个画廊（例如，声明一个充满图像的整个文件夹），而不是被迫在 html 代码中声明我得到的每张照片都使用 colorbox 使用的“group1”类系统。

真的很期待答案，致敬 Lorenzo Martini。

Ps 我会给你留下我网站的一个页面（仍在建设中），这样你就可以理解为什么我需要这种解决方案。我想显示一个缩略图，它可以用你的脚本打开一个画廊。

[http://www.urbanstudiosprato.it/wedding.html](http://www.urbanstudiosprato.it/wedding.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:33:57.677

抱歉，colorbox 仅适用于文档中存在的元素。

# coldfusion - 使用 abcpdf 设置 pdf 文件名

> ID：11439622
> 
> 赞同：0
> 
> 时间：2012-07-11T19:02:23.580
> 
> 标签：coldfusion, coldfusion-9, abcpdf

我发现了这个： [如何在浏览器中流式传输 Pdf 时设置文件的名称？](https://stackoverflow.com/questions/346546/how-to-set-the-name-of-the-file-when-streaming-a-pdf-in-a-browser)

同样的问题豁免我在 Coldfusion 中使用 abcpdf。所以问题将是：

我在coldfusion中使用abcpdf来生成Pdfs并将输出流式传输给用户。我的代码如下所示：

```
<cfscript>
theDoc = createObject("com","ABCpdf6.doc");
theDoc.rect.SetRect(10, 10, 600, 777); 

theID = theDoc.AddImageHTML(strHTML, true);

while(theDoc.Chainable(theID))
{
theDoc.Page = theDoc.AddPage();
theID = theDoc.AddImageToChain(theID);
}

page_count = theDoc.PageCount;
the_data = theDoc.getData();

enter code here

// Release the Objects
theDoc.clear();
ReleaseComObject(theDoc);

</cfscript> 
```

此代码运行后，它将 Pdf 流式传输到打开 Acrobat Reader 的浏览器。效果很好！

我的问题是当用户尝试保存文件时，它默认为实际文件名......在这种情况下，它默认为 myPagename.pdf。无论如何我可以设置这个吗？如果是这样，怎么做？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:09:51.117

您可以像这样在 ABC 之外执行此操作：

```
var ms = new MemoryStream();
theDoc.Save(ms);
String fileName = name + ".pdf"; // where "name" is the default name
return File(ms, "application/pdf", fileName); 
```

# dns - 带有区域文件的 URL 转发

> ID：11439631
> 
> 赞同：4
> 
> 时间：2012-07-11T19:03:08.990
> 
> 标签：dns

我想转发一个 url，这样如果你在地址栏中输入 www.example.com，你就会被转发到 www.test.com/test.php。

我所做的是在我的区域文件中添加了一条 cname 记录。

所以我有：

```
www  IN CNAME www.test.com/test.php. 
```

这并没有完成工作。

我已经阅读了很多内容，但仍然无法理解整个 dns 进程是如何工作的。我的理解是 CNAME 只会导致您的域使用另一个域区域文件。如果是这种情况，那么 CNAME 就不是我要找的了。

如果有人能指出我正确的方向，或者给我一个关于 url 转发过程的简要概述，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T19:15:45.917

**您将DNS**与**URL 转发**混淆了。您在区域文件中可能拥有的只是

```
www.example.com.  IN CNAME www.test.com. 
```

`www.test.com`是**域名**，`www.test.com/test.php`是**网址**。

拥有此 CNAME与拥有 www.example.com 的“A”记录指向与 www.test.com 相同的 IP 地址具有**完全相同**的效果 - 您的浏览器将首先查看此 CNAME，然后获取 www 的 IP 地址。 example.com，然后浏览器将向该 IP 地址发送对 www.example.com **(!)**的 HTTP 请求。

在网络服务器上完成 URL 转发，在 www.test.com 网络服务器上，您可以定义一个虚拟主机 www.example.com（不是 www.test.com），它可以运行您的 test.php 或从 / 重定向到 /test.php .

或者在 www.example.com 网络服务器上，您可以设置从 www.example.com 到 www.test.com/test.php 的 HTTP 303 重定向，然后您不使用 CNAME。

虽然有些无序，但希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-01T14:31:32.463

答案是绝对正确的，但我认为解决方案是这样的：

使用redirect.center 真的很容易

如果您想创建一个 CNAME 为：

www.proof.com IN CNAME www.proof-two.com/path/index.htm

使用 redirect.center 您的 CNAME 看起来像规范模式：

www.proof.com IN CNAME www.proof-two.com.opts-slash.path.opts-slash.index.htm.redirect.center。

现在，如果您想重定向到 https 网站，您可以添加此选项：

www.proof.com IN CNAME www.proof-two.com.opts-slash.path.opts-slash.index.htm.opts-https.redirect.center。

现在，您可以在命运页面中使用带有斜线的规范模式创建 CNAME。

# javascript - 奇怪的节点 js/socket io 崩溃？

> ID：11439639
> 
> 赞同：-1
> 
> 时间：2012-07-11T19:03:53.457
> 
> 标签：javascript, node.js, socket.io

好吧，我有一个游戏，它的服务器在节点 js 上运行，使用套接字 io 和 mysql 来存储用户数据。问题是我的服务器已经崩溃了两次，它给我的只是以下内容：

```
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m/root/node_modules/socket.io/lib/transports/jsonp-polling.js:88[0m
[36m[game.js][0m [31mthis.response.writeHead(200, {[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31m^[0m
[36m[game.js][0m [31m[0m
[36m[game.js][0m [31mTypeError: Cannot call method 'writeHead' of undefined
at JSONPPolling.doWrite (/root/node_modules/socket.io/lib/transports/jsonp-polling.js:88:17)
at JSONPPolling.write (/root/node_modules/socket.io/lib/transports/http-polling.js:132:8)
at JSONPPolling.packet (/root/node_modules/socket.io/lib/transport.js:515:15)
at JSONPPolling.error (/root/node_modules/socket.io/lib/transport.js:498:8)
at JSONPPolling.onData (/root/node_modules/socket.io/lib/transports/jsonp-polling.js:69:10)
at IncomingMessage.<anonymous> (/root/node_modules/socket.io/lib/transports/http.js:65:12)
at IncomingMessage.emit (events.js:64:17)
at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:127:21)
at Socket.ondata (http.js:1468:22)
at TCP.onread (net.js:374:27)[0m 
```

Socket io 的响应头似乎有些问题，但我该如何解决这个问题？而且我还没有尝试过任何东西（因为我真的不知道从哪里开始）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:58:31.190

我修复了它，这是 socket.io 中 jsonpolling 的一个错误，只需使用以下命令禁用它：

```
socket.set('transports', [ 'websocket', 'htmlfile', 'xhr-polling' ]) 
```

现在它起作用了。耶！

# asp.net-mvc-3 - EF4 引用完整性异常首先使用代码？

> ID：11439643
> 
> 赞同：1
> 
> 时间：2012-07-11T19:04:00.263
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

我有一个非常简单的模型，如下所示：

```
public class Cases
    {
    //case data model for call center
    //implement lists for all related child tables too

    [Key]
    public int CasesID { get; set; }

    public string CaseNumber { get; set; }

    [Required(ErrorMessage = "Customer is Required")]
    public int CustomerID { get; set; }
    public Customer Customer { get; set; }

    [MaxLength(50)]
    public string UserName { get; set; }  //get user name from the aspnet membership

    [Required(ErrorMessage = "Case Category is Required")]
    public int CaseCategoryID { get; set; }

    [Required(ErrorMessage = "Technician is Required")]
    public int TechnicianID { get; set; }
    public Technician Technicians { get; set; }

    [Required(ErrorMessage = "Engine Model is Required")]
    public int EngineModelID { get; set; }
    public EngineModel EngineModel { get; set; }

    [MaxLength(50)]
    public string BMSWorkorder { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "Status is Required")]
    public string CaseStatus { get; set; }

    [MaxLength(50)]
    public string OpenedBy { get; set; }

    [Required(ErrorMessage = "Opened Date is Required")]
    [DataType(DataType.DateTime)]
    public DateTime? OpenedDate { get; set; }

    [MaxLength(50)]
    public string ClosedBy { get; set; }

    [DataType(DataType.DateTime)]
    public DateTime? ClosedDate { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage="Caller First Name is Required")]
    public string CallerFirstName { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "Caller Last Name is Required")]
    public string CallerLastName { get; set; }

    [MaxLength(10)]
    [Required(ErrorMessage = "Qualified is Required")]
    public string Qualified { get; set; }

    public string Description { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "ESN is Required")]
    public string ESN { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "Mileage is Required")]
    public string Mileage { get; set; }

    [DataType(DataType.Date)]
    public DateTime? DateInService { get; set; }

    [MaxLength(50)]
    public string ESTR { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "EDS is Required")]
    public string EDS { get; set; }

    [MaxLength(50)]
    public string GensetSerialNumber { get; set; }

    [MaxLength(50)]
    public string GensetModelNumber { get; set; }

    //child Case Notes records
    public virtual ICollection<CaseNotes> CaseNotes { get; set; }

    //child case attachment records
    public virtual ICollection<Attachment> Attachments { get; set; }

    //child case complaint records
    public virtual ICollection<CaseComplaint> CaseComplaint { get; set; }

    //tracking fields
    public DateTime? CreatedOn { get; set; }
    [MaxLength(50)]
    public string CreatedBy { get; set; }
    public DateTime? ModifiedOn { get; set; }
    [MaxLength(50)]
    public string ModifiedBy { get; set; }
    } 
```

一个案例可以有许多案例注释、附件和案例投诉。外键是 Technicians、Customers 和 EngineModel。

直到今天，使用此模型的 Add 和 Edits 一切正常。现在，我出乎意料地得到“*发生参照完整性约束违规：定义参照约束的属性值在关系中的主体和依赖对象之间不一致。* ”仅在尝试更新编辑视图上的案例记录时。创建和插入很好，因为所有必填字段都已填写。为什么这会开始发生。仅供参考，如果我检查模型只是为了调用 context.SaveChanges，我注意到所有数据看起来都正确，FK 值已填充，但是外键类（技术人员）的导航属性中的数据几乎看起来像认为我正在尝试在这些类中插入新记录...

这是我的控制器编辑操作：

```
public ActionResult Edit(int id)
    {
        Cases cases = db.Cases.Find(id);
        db.Entry(cases).Reference(x => x.Customer).Load();
        db.Entry(cases).Collection(x => x.CaseComplaint).Load();
        db.Entry(cases).Collection(x => x.CaseNotes).Load();
        db.Entry(cases).Reference(x => x.Technicians).Load();

        GetCaseCategoryLookup(cases.CaseCategoryID);
        GetEngineModelLookup(cases.EngineModelID);
        GetTechnicianLookup(cases.TechnicianID);
        GetQualifiedList(cases.Qualified);
        GetCaseStatusList(cases.CaseStatus);

        return View(cases);
    }

    //
    // POST: /Cases/Edit/5

    [HttpPost]
    public ActionResult Edit(Cases cases)
    {
        if (ModelState.IsValid)
        {
        AppHelpers help = new AppHelpers();

            if (cases.CaseStatus == "CLOSED")
                {
                cases.ClosedBy = "USER";
                cases.ClosedDate = help.GetEasternTime();
                }
            cases.ModifiedBy = "USER";
            cases.ModifiedOn = help.GetEasternTime();

            db.Entry(cases).State = EntityState.Modified;
            db.SaveChanges();

        }

        return RedirectToAction("Index");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:32:08.060

只是为了解释异常的含义：

> 发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。

您的控制器发布操作中的主体对象是`cases.Technicians`，依赖对象是`cases`。“定义引用约束的属性值”是依赖对象中的外键，即`cases.TechnicianID`，另一方面是主体的主键，即`cases.Technicians.TechnicianID`。

例外情况是这两个值是不同的：`cases.TechnicianID != cases.Technicians.TechnicianID`但是当您更新实体时它们必须相同。

我不知道你的观点到底应该做什么。您只能编辑`cases`实体或`cases.Technicians`属性吗？还是只能指派一名新的现有技术人员`cases`？如果是后者，我很奇怪为什么模型绑定器会创建一个`cases.Technicians`实例，因为不应该有任何表单字段包含`cases.Technicians`. `cases.TechnicianID`要分配另一个现有技术人员，将外键绑定到表单字段就足够了。

在任何情况下，您都需要确保 any`cases.TechnicianID`和`cases.Technicians.TechnicianID`具有相同的值或者 that `cases.Technicians`is `null`。这取决于视图应该做什么以及需要更新哪些数据——也只有`cases`属性或`cases.Technicians`属性。

# google-apps-script - 单击按钮更改电子表格中的行

> ID：11439650
> 
> 赞同：0
> 
> 时间：2012-07-11T19:04:32.517
> 
> 标签：google-apps-script

当你点击一个按钮时，你如何添加或减去一个数字。我想简单地说

```
if (button.click){
    num++;
} 
```

我怎样才能用谷歌应用脚​​本按钮做这样的事情？对我来说，事情似乎不那么简单，因为我从未使用过点击处理程序。它可能是我缺少的一些简单的东西。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:36:37.243

请看一下这个演示代码：

```
var sh = SpreadsheetApp.getActiveSheet();
var ss = SpreadsheetApp.getActiveSpreadsheet();
//
function move() {
   var app = UiApp.createApplication().setTitle("move test")
       .setHeight(100).setWidth(400).setStyleAttribute("background-color","beige");
   var panel = app.createVerticalPanel();
   var next = app.createButton('next').setWidth('180');
   var chkmode = app.createCheckBox("moving mode (checked = up/dwn, unchecked=L/R)").setValue(false).setName('chkmode');
   panel.add(next).add(chkmode);
   var handler = app.createServerHandler('click').addCallbackElement(panel);
   next.addClickHandler(handler);
   app.add(panel);
   ss.show(app);
 }
//
function click(e) {
  var app = UiApp.getActiveApplication();
  var activeline = sh.getActiveRange().getRow();// get the row number of the selected cell/range
  var activecol = sh.getActiveRange().getColumn();// get the row number of the selected cell/range
  var chkmode=e.parameter.chkmode;// this returns a string, that's why true is written "true" just below...
  if(chkmode=="true"){
    ++activeline
    }else{
      ++activecol} // the ++ can be before or after the var name, your choice ;-)
  var sel=sh.getRange(activeline,activecol);
  sh.setActiveSelection(sel);// make the next row or column active
  return app;
 } 
```

**编辑** ：（在您的第二个问题之后）要获得一个显示单元格内容的标签，您可以在处理程序函数中使用此代码：

```
function click(e) {
  var app = UiApp.getActiveApplication();
  var activeline = sh.getActiveRange().getRow();// get the row number of the selected cell/range
  var activecol = sh.getActiveRange().getColumn();// get the row number of the selected cell/range
  var cellvaluestring = sh.getActiveRange().getValue().toString();
  var label = app.getElementById('label');
  label.setText(cellvaluestring);
  var chkmode=e.parameter.chkmode;
  if(chkmode=="true"){
    activeline++
    }else{
      activecol++}
  var sel=sh.getRange(activeline,activecol);
  sh.setActiveSelection(sel);// make the next row active
  return app;
 } 
```

在 Ui 定义中，您必须像这样创建标签：

```
 var label = app.createLabel("test Label with text that will be modified on click").setId('label');
   panel.add(label); 
```

# javascript - .on() .off() 或 .one() 逻辑停止重复点击列表项

> ID：11439652
> 
> 赞同：1
> 
> 时间：2012-07-11T19:04:38.660
> 
> 标签：javascript, jquery, html

我创建了一个[JSFiddles](http://jsfiddle.net/VFqTW/27/)。

我想删除重复点击，因为点击会创建动画。

我现在明白了，这`$(this).off('click');`可以解决问题；然而，

我遇到问题的地方是如何`.on()`在单击任何新列表项后打开单击。

还注意到，`.one()`似乎是一个很好的解决方案；但是，我不确定如何在保持相同语义的同时使用它。谢谢你。

```
var carItems = $('.carousel_item');
var sideitems = $('.side_item');
var x = false;
$(sideitems).hide();
fadeItem();
$(carItems).on({
    click: function() {
        $(sideitems).stop(true, true).animate({
            right: '4.5em'
        });
        $(sideitems).hide();
        fadeItem();
    },
    mouseenter: function() {},
    mouseleave: function() {}
});

function fadeItem() {
    $('.side_ul li:hidden:first').fadeIn(fadeItem).animate({
        right: '-4.5em'
    }, 150, function() {});;
}​ 
```

**HTML**

```
<div id="carousel" class="flexslider">
      <ul class="slides">
        <li class="carousel_item"> <img src="asset/img/1600/slide1_1600.jpg" /> </li>
        <li class="carousel_item"> <img src="asset/img/1600/slide2_1600.jpg" /> </li>
        <li class="carousel_item"> <img src="asset/img/1600/slide1_1600.jpg" /> </li>
        <li class="carousel_item"> <img src="asset/img/1600/slide2_1600.jpg" /> </li>
        <!-- items mirrored twice, total of 12 -->
      </ul>
    </div>

      <nav class="side_nav">
    <ul class="side_ul">
        <li class="side_item home"><div class="text_links"><a href="#">home</a></div></li>
        <li class="side_item document"><div class="text_links"><a href="#">docs</a></div></li>
        <li class="side_item video"><div class="text_links"><a href="#">video</a></div></li>        
        <li class="side_item programming"><div class="text_links"><a href="#">web</a></div></li>

    </ul>
  </nav> 
```

![在此处输入图像描述](../Images/559a715f84289aea85f0ce1ca07de5d4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:12:55.713

如何检查正在动画的元素 ( `$(el).is(':animated')`)，然后像这样删除点击：

```
$(elementClickedOn).click(function(e) {e.preventDefault();}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:18:25.337

我已经分叉了你的小提琴：http: [//jsfiddle.net/5A6Xn/](http://jsfiddle.net/5A6Xn/)

使用 on() 和 off() 的组合，您可以修改类属性以实现您的结果：

```
 var carItems = $('.carousel_item');
 var sideitems = $('.side_item');
 var x = false;
 $(sideitems).hide();
 fadeItem();

 bindClick();

 function bindClick()
 {
     $(".carousel_item:not(.selected)").on("click", function(event)
     {
         $(".carousel_item").off("click");
         $('.carousel_item').removeClass("selected");    
         $(this).addClass("selected");
         $(sideitems).stop(true, true).animate({
             right: '4.5em'
         });
         $(sideitems).hide();

         fadeItem();

         bindClick();
     });
 }

 $(carItems).on({     
     mouseenter: function () {

     },
     mouseleave: function () {

     }
 });

 function fadeItem() {
     $('.side_ul li:hidden:first').fadeIn(fadeItem).animate({
         right: '-4.5em'
     }, 150, function () {});;
 } 
```

# c# - 无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部

> ID：11439654
> 
> 赞同：3
> 
> 时间：2012-07-11T19:04:41.367
> 
> 标签：c#, asp.net

我正在一个用户来提交一些信息的网站上工作。提交信息后，我尝试同时发送两封邮件——一封给我的销售团队，一封给我网站上的访问者。

在发送邮件时，我在使用重定向到另一个页面时收到以下错误`Response.Redirect("http://www.targetsite.com/index.php")`：

> 无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部

有人可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T18:43:35.587

查看此[Microsoft 链接](http://support.microsoft.com/kb/312629/en-us)。

本质上，您需要按如下方式更改代码：

```
Response.Redirect("http://www.targetsite.com/index.php", false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:45:49.063

您看到的消息实际上并不是您在运行时看到的错误 - 通常，它出现在调试器中 try-catch-finally 块的 catch 部分中间。您是在调试器中单步执行代码，还是在应用程序在调试器之外运行时实际遇到错误？

如果您试图确定真正发生了什么错误，我建议在 Response.Redirect 调用周围放置一个完整的 try-catch 块并检查此时触发的异常，例如

```
Try
   Response.Redirect(http://www.targetsite.com/index.php")
Catch ex as Exception 
   ' add your handling code here, using ex as the Exception placeholder variable
End Try 
```

祝你好运！

# tcl - TCL 全局变量范围

> ID：11439656
> 
> 赞同：0
> 
> 时间：2012-07-11T19:04:43.717
> 
> 标签：tcl, global

如果我在 proc 中设置一个局部变量来引用一个全局变量，那么 sub-proc 也可以访问该变量吗？

```
proc function1 {} {
    global CAR

    function2
}

proc function2 {} {
    echo ${CAR}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:11:20.107

不，每个 proc 都必须将变量重新声明为`global`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T03:07:50.843

您可以使用他的完整限定名`$::CAR`访问变量，也可以使用`uplevel`. 否则你需要一个`global`.

# ruby-on-rails - Rails 3\. 如何在belongs_to 关联中设置同一模型的两个实例？

> ID：11439662
> 
> 赞同：0
> 
> 时间：2012-07-11T19:05:28.613
> 
> 标签：ruby-on-rails, ruby, associations

如果我有一个名为的表`enrollments`，这是我当前的基本注册设置：

```
class Enrollment < ActiveRecord::Base      
  belongs_to :father
  belongs_to :mother
  belongs_to :child
end

class Father < ActiveRecord::Base
  has_many :enrollments
  has_many :children
  validates :first_name, :presence => true
  validates :last_name, :presence => true
end 
```

现在我想在表格中添加 a`guardian_1_id`和 a 。我该如何设置？`guardian_2_id``enrollments`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:26:41.373

您可能最好使用多态关联，例如

```
class Enrollment 
  belongs_to :enrollable, :polymorphic => true
end

class Father
 has_many :enrollments, :as => enrollable
end 
```

这应该让您在每种情况下是否有 1、2 或更多监护人方面具有一定的灵活性。此外，您可以添加将其限制为两个的验证。

# java - Arraylist indexoutofbounds 异常

> ID：11439666
> 
> 赞同：0
> 
> 时间：2012-07-11T19:05:38.263
> 
> 标签：java, android, arrays, listview

所以我只是出于个人原因制作一个小应用程序。基本上，它所做的只是从网站解析 xml，然后返回颜色、标题和作者列表，然后将其全部显示在列表视图中。它有点工作，但有时我会得到这些 indexoutofboundsexceptions，例如，总是出现在 for 循环中。更好地解释 for 循环。结果是一个数组列表。列表视图中的每一行都由 3 个元素组成：标题、用户名和颜色。for 循环遍历数组，基本上将值分配给行，因此最初第一个元素将分配给标题，第二个元素将分配给用户名，依此类推。模式只是重复自己。如果有人看到问题，甚至知道更好的方法，请分享:)

```
 for (int i = 0; i < result.size(); i++) {
       sr = new SearchResults();
       sr.setTitle(result.get(i));
       i++;
       sr.setUser(result.get(i));
       i++;
       sr.setHex(result.get(i));
       results.add(sr);
   } 
```

该错误通常看起来像这样：

```
07-11 14:48:08.272: E/AndroidRuntime(15370): FATAL EXCEPTION: main
07-11 14:48:08.272: E/AndroidRuntime(15370): java.lang.IndexOutOfBoundsException: Invalid index 62, size is 62 
```

这是代码：

```
public class ColorsActivity extends ListActivity {
    /** Called when the activity is first created. */
    private int selection = 0;
    private String info;
    private ArrayList<String> myArr = new ArrayList<String>();
    private int resultOffset=0;
    private TextView settings;
    private SearchResults sr = new SearchResults();
    private ArrayList<SearchResults> results = new ArrayList<SearchResults>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        settings = (TextView) findViewById(R.id.settings_text);

        final ListView lv = getListView();
        lv.setDividerHeight(0);

        colorTask refTask = new colorTask(); 
        refTask.execute();

        settings.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                colorTask refTask = new colorTask(); 
                refTask.execute();
            }
        });  
    }

    public class MyCustomBaseAdapter extends BaseAdapter {
        private ArrayList<SearchResults> searchArrayList;

        private LayoutInflater mInflater;

        public MyCustomBaseAdapter(Context context, ArrayList<SearchResults> results) {
            searchArrayList = results;
            mInflater = LayoutInflater.from(context);
        }

        public int getCount() {
            return searchArrayList.size();
        }

        public Object getItem(int position) {
            return searchArrayList.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;
            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.list_item, null);
                holder = new ViewHolder();
                holder.txtHex = (TextView) convertView.findViewById(R.id.text1);
                holder.txtTitle = (TextView) convertView.findViewById(R.id.TextView02);
                holder.txtUser = (TextView) convertView.findViewById(R.id.TextView01);
                holder.txtColorValue = (TextView) convertView.findViewById(R.id.TextView03);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.txtTitle.setText(searchArrayList.get(position).getTitle());
            holder.txtUser.setText(searchArrayList.get(position).getUser());
            String c = searchArrayList.get(position).getHex();
            holder.txtHex.setBackgroundColor(Integer.parseInt(c, 16)+0xFF000000);
            holder.txtColorValue.setText(searchArrayList.get(position).getHex());

            return convertView;
        }

        class ViewHolder {
            TextView txtTitle;
            TextView txtUser;
            TextView txtHex;
            TextView txtColorValue;
        }
    }

    class colorTask extends AsyncTask<String, Void, ArrayList<String>> {
        private final ProgressDialog dialog = new ProgressDialog(ColorsActivity.this);

        // can use UI thread here
        protected void onPreExecute() {
           this.dialog.setMessage("Contacting server...");
           this.dialog.show();
        }

        protected ArrayList<String> doInBackground(final String... args) {
            URL url = null;
            ParsedExampleDataSet parsedExampleDataSet = null;
            try {                       
                if (selection == 0) {
                     url = new URL ("http://www.colourlovers.com/api/colors/top?resultOffset=" + resultOffset);
                } 

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                SAXParserFactory spf = SAXParserFactory.newInstance();
                SAXParser sp = null;
                try {
                    sp = spf.newSAXParser();
                } catch (ParserConfigurationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (SAXException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                /* Get the XMLReader of the SAXParser we created. */
                XMLReader xr = null;
                try {
                    xr = sp.getXMLReader();
                } catch (SAXException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                /* Create a new ContentHandler and apply it to the XML-Reader*/
                getColors myExampleHandler = new getColors(selection);
                xr.setContentHandler(myExampleHandler);

                /* Parse the xml-data from our URL. */
                try {
                    xr.parse(new InputSource(url.openStream()));
                    parsedExampleDataSet =
                        myExampleHandler.getParsedData();
                    myArr = parsedExampleDataSet.toArrayList();             
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (SAXException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }   
                    return myArr;               
        }

        // can use UI thread here
        protected void onPostExecute(final ArrayList<String> result) {
           if (this.dialog.isShowing()) {
              this.dialog.dismiss();
           }
           if (result != null) {    
               for (int i = 0; i < result.size(); i++) {
                   sr = new SearchResults();
                   sr.setTitle(result.get(i));
                   i++;
                   sr.setUser(result.get(i));
                   i++;
                   sr.setHex(result.get(i));
                   results.add(sr);
               }
               ListView lv = getListView();
               lv.setAdapter(new MyCustomBaseAdapter(ColorsActivity.this, results));
               resultOffset += 20;

           } else {
               Toast.makeText(ColorsActivity.this, "Error contacting server.", Toast.LENGTH_SHORT).show();
           }
        }

     }
    public class SearchResults {
         private String title = "";
         private String hex = "";
         private String user = "";

         public void setTitle(String title) {
          this.title = title;
         }

         public String getTitle() {
          return title;
         }

         public void setHex(String hex) {
          this.hex = hex;
         }

         public String getHex() {
          return hex;
         }
         public void setUser(String user) {
           this.user = user;
         }

         public String getUser() {
           return user;
         }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:08:25.900

```
for (int i = 0; i < result.size(); i++) {
    sr = new SearchResults();
    sr.setTitle(result.get(i));
    i++;
    sr.setUser(result.get(i));
    i++;
    sr.setHex(result.get(i));
    results.add(sr);
} 
```

你在这里盲目地增加`i`。这很可能是问题所在。找到问题的根源，您正在解析的数据很可能有时不完整或解析不正确，因此它并不总是产生您想要的参数数量（即您解析的东西期望标题、用户和颜色，但是只得到一个标题和一个用户）。

由于 的大小`List`为 62，这表明您在解析时至少错过了 1 个参数（标题、用户或颜色）。如果一切都被正确解析，你`List`的大小应该是 63。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:09:03.597

当您增加 i (i++) 时，您将超出数组的范围，因为您正在从数组的 0 大小进行迭代。当你达到 size-2 时，for 循环内的第二个 i++ 将是一个不存在的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:09:13.403

你的问题出在你的 for 循环中。您正在增加循环内的变量 i 。因此，当大小为 62 时 i 为 61 时，您也添加一个 i，尝试访问索引 62，当大小为 62 时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:21:45.340

问题是您试图访问数组列表中不存在的索引。问题肯定在for循环内部：

```
for (int i = 0; i < result.size(); i++) {
   sr = new SearchResults();
   sr.setTitle(result.get(i));
   i++;
   sr.setUser(result.get(i));
   i++;
   sr.setHex(result.get(i));
   results.add(sr);
} 
```

如果你只在循环声明中增加 i 就可以了；问题将出现在另外两个 i++ 语句之一，因为在每个语句之后，您都没有检查是否超过了数组的长度。这必然意味着在一种或多种情况下，有一个三元组（标题、用户、十六进制）缺少一个或多个参数。如果应该始终存在所有三个参数，则数组未正确填充。

如果您希望代码在参数不匹配的情况下是故障安全的，那么每次增加它时检查 i 数组的长度，即在循环内再增加两次 - 然后，如果它已达到数组的长度，则处理以您认为合适的任何方式出现错误（跳出循环，用虚拟数据填充 sr 的剩余值等）。

像这样的东西：

```
for (int i = 0; i < result.size(); i++) {
   sr = new SearchResults();
   sr.setTitle(result.get(i));

   i++;
   if (i == result.size()) {
      sr.setUser("dummy");
   }
   else {
      sr.setUser(result.get(i));
   }

   i++;
   if (i == result.size()) {
      sr.setHex("#000000");
   }
   else {
      sr.setHex(result.get(i));
   }

   results.add(sr);
} 
```

# python - 如何创建二维数组以从程序中排除某些目录

> ID：11439667
> 
> 赞同：0
> 
> 时间：2012-07-11T19:05:40.237
> 
> 标签：python

我是 python 新手，需要快速帮助解决以下问题。非常感谢任何帮助或建议。

我有一个 python 脚本，它从一个名为`XYZ`. 该目录`XYZ`具有用于不同应用程序的子目录，然后是其中的日志。例如：`/XYZ/host1/syslog.log` 目前，python 脚本使用`-p`执行时提供的选项来获取清除日期。

我想更改 下一个特定目录的清除日期`XYZ`，而不更改目录的位置。有人告诉我，这可以通过创建一个例外`2d array`来为主机提供`# of days`，如果该阵列中不存在主机，则从`-p`选项中取出清除天数。

有人可以帮我创建这个数组。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:21:13.360

我认为我能想到的最简单的方法是从 dict 继承：

```
class PurgeTimes(dict):
    def __missing__(self,key):
        return default_purge_time  #somehow created with -p commandline option 
```

然后，您可以添加要在不同（非默认）时间清除的目录：

```
purge_times=PurgeTimes()
#If you perfer, you could also use a `defaultdict` to do the same thing
#without subclassing.
#purge_times=collections.defaultdict(lambda : default_purge_time)

purge_times[dir1]=time1
purge_times[dir2]=time2 
```

最后遍历您的目录并清除

```
for d in directories:
    if get_dir_time(d) < purge_time[d]:
       purge(d) 
```

**请在投入生产之前对此进行测试 ** ;^)

# asp.net - 无法触发复选框上的选中事件

> ID：11439676
> 
> 赞同：1
> 
> 时间：2012-07-11T19:06:03.510
> 
> 标签：asp.net

我有层次结构，我需要将其绑定到父级复选框和 1 级子级复选框列表。

不知何故，我无法进入复选框（CheckBoxParent_CheckedChanged），复选框列表的（CheckBoxListChildren_SelectedIndexChanged）选择事件，也没有UpdatePanel。

工作了4个小时没有任何结果，为什么我在选中某个复选框时无法输入事件？

我究竟做错了什么 ？

谢谢

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ListViewCategories.DataSource = CategoryManager.ListHierarchy();
        ListViewCategories.DataBind();
    }
}

protected void CheckBoxParent_CheckedChanged(object sender, EventArgs e)
{
    if (((CheckBox)sender).Checked)
    {

    }
    else
    {
    }
}

protected void CheckBoxListChildren_SelectedIndexChanged(object sender, EventArgs e)
{
    if (((CheckBoxList)sender).SelectedItem != null)
    {

    }
    else
    {
    }
}

  <asp:UpdatePanel ID="UpdatePanelCategories" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
       <ContentTemplate>
            <asp:ListView ID="ListViewCategories" runat="server">
                <LayoutTemplate>
                    <div id="itemPlaceholder" runat="server"></div>
                </LayoutTemplate>
                <ItemTemplate>
                    <asp:CheckBox ID="CheckBoxParent" runat="server" Text='<%# Eval("Key.Name") %>' OnCheckedChanged="CheckBoxParent_CheckedChanged" /><br />
                    <asp:CheckBoxList ID="CheckBoxListChildren" runat="server" OnSelectedIndexChanged="CheckBoxListChildren_SelectedIndexChanged" RepeatDirection="Horizontal" DataSource='<%# DataBinder.Eval(Container.DataItem, "Value") %>' DataTextField="Name"></asp:CheckBoxList><br /><br />
                </ItemTemplate>
            </asp:ListView>
       </ContentTemplate>
   </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:06:26.103

将 CheckBox 的“AutoPostBack”设置为 true。

# python - 如何判断python中的信号量是否已满

> ID：11439682
> 
> 赞同：6
> 
> 时间：2012-07-11T19:06:30.407
> 
> 标签：python, semaphore

我有一个有界信号量对象，可确保我的程序一次不会下载超过一定数量的文件。每个工作线程在开始下载时获取信号量，并在完成时释放它。

我有另一个线程想在没有下载任何内容时运行代码。我想要一种锁定方法，直到信号量完全可用。我怎样才能在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:17:17.963

一群工人听起来是一个很好的解决方案，所以你可以考虑[这个问题及其答案](https://stackoverflow.com/questions/3033952/python-thread-pool-similar-to-the-multiprocessing-pool#3386632)。您可以创建工作人员池，提交所有作业，[`close`](http://docs.python.org/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.close)池，然后[`join`](http://docs.python.org/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.join)等待事情完成，然后在文件下载完成后移交给您要运行的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:27:52.723

您绝对不应该尝试查看信号量的计数器值。这样做会破坏信号量的抽象。此外，您读取的值甚至可能不是正确的值，因为，一个 - 可能有另一个线程可以在您实际使用读取值之前更改计数值（取决于调度策略）；二 - 你的阅读不是原子的。所以到处乱砍可能会奏效，但不能保证一直有效。

更好的做法是在程序中使用计数器变量。但应注意同步对该计数器的访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:16:30.077

我不确定，如果我完全理解它，但你认为下面的代码会起作用吗？

```
from threading import Semaphore
p = Semaphore(5) #Allow 5 times
p.acquire()
download_file()
...
... 
```

在此代码中，p.acquire() 将返回 True 5 次，然后将导致调用阻塞。阻塞呼叫不足以满足您的目的吗？

# jquery - 如何使 JQuery 脚本只触发一次

> ID：11439691
> 
> 赞同：3
> 
> 时间：2012-07-11T19:07:25.987
> 
> 标签：jquery, reload

我有一个 JQuery 脚本，它在 wordpress 插件表单上选择正确的单选按钮，然后点击更新按钮。问题是更新按钮重新加载脚本导致无限循环。

如何确保脚本只执行一次？这是我正在使用的代码：

```
$(document).ready(
    function()
    {
       $('input[value="Yes"]').attr('checked', 'checked');
       $(".update-button").trigger('click');
    }
 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:13:19.593

一种选择是当您在页面刷新时不会丢失的区域中单击更新时存储一个值。刷新页面后，检查该值是否仍然存在。如果是，请不要重新执行脚本。我选择使用`localStorage`我的示例，但 cookie 也同样有效：

```
$(document).ready(function(){
    if(!localStorage.updated) {
        $('input[value="Yes"]').attr('checked', 'checked');

        $(".update-button").trigger('click');
        localStorage.updated = "true";
    }
}); 
```

# ruby - 如何找出 Net::HTTP 请求绑定的 IP 和端口？

> ID：11439697
> 
> 赞同：1
> 
> 时间：2012-07-11T19:07:44.073
> 
> 标签：ruby, net-http, tcpsocket

我正在编写一个用于生成网络流量的应用程序，我想包括请求者的 IP 地址和端口号。我可以从 Net::HTTP 获得这些信息吗，或者是否有另一个我可以使用的包含这些信息的库。我只需要能够发出 http 请求并处理响应对象。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:00:23.553

如果我使用 TCPSocket 而不是 Net::HTTP 看起来这很容易

```
TCPSocket.open("www.google.com", 80) {|sock|
  sock.print "GET / HTTP/1.1\r\n"
  sock.puts "\r\n"

  sock.close_write
  puts "ADDR: #{sock.addr}"
  puts "Peer: #{sock.peeraddr}"
  @response =  sock.read
} 
```

sock.addr 和 sock.peeraddr 给我我正在寻找的地址。不幸的是，现在我不知道如何干净地获取状态码（200 - OK，404 - Not Found 等）

# php - 如何在 Heroku 托管 facebook 应用程序上打开错误报告（免费）？

> ID：11439699
> 
> 赞同：1
> 
> 时间：2012-07-11T19:07:49.167
> 
> 标签：php, heroku

heroku facebook 免费应用程序托管服务器上的 PHP 未报告任何错误。有什么办法可以打开这个错误报告，以便调试变得容易？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T01:00:15.430

我不确定是否有配置方式，但将其放入：

错误报告（-1）；ini_set('display_errors', 1); ini_set('html_errors', 1);

# c - 在 C 中将 int 转换为 4 字节 char 数组

> ID：11439700
> 
> 赞同：1
> 
> 时间：2012-07-11T19:07:53.223
> 
> 标签：c, arrays, char, byte

> **可能重复：**
> [将 int 转换为 4 字节 char 数组 (C)](https://stackoverflow.com/questions/3784263/converting-an-int-into-a-4-byte-char-array-c)

使用动态 C 程序（语言是 C），我试图将 int 转换为 4 位长的字节数组。到目前为止，我在网上查了一些例子。但是，似乎没有一个对我有用。我遇到了一个持续的问题，即打印了正确的字节数，但由于某种原因它们重复了两次。我提供了以下代码：

```
void main(){
 int a=1379;
 int i=0;
 unsigned char value [4];

value[3] = (byte) (a & (0xFF));
value[2] = (byte) ((a >> 8) & 0xFF);
value[1] = (byte) ((a >> 16) & 0xFF);
value[0] = (byte) ((a >> 24) & 0xFF);
//convert int values to bytes by placing them in a char buffer

for(i=0;i<4;i++){
 printf("%d",value[i]);
 printf(", ");
 }
printf("\n");
} 
```

例如，使用此值，程序会打印“5, 99, 5, 99”，而它应该打印“0, 0, 5, 99”。感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T19:22:11.493

几乎可以肯定的是，“动态 C”是一个`int`16 位的实现，这对于 C 来说是完全“合法的”。如果`int`是 16 位，则任何超过 16 位的移位都是模 16，因此后两个移位重复前两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T21:18:15.440

您需要将 int 变量中的位复制到 char 数组中。您可以`memcpy`像这样简单地做到这一点：

```
#include <stdio.h>
#include <string.h>

void split(int val, unsigned char *arr) {
    memcpy(arr, &val, sizeof(int));
}

int main() {
    unsigned char bytes[4];
    split(1379, bytes);
    printf("%d, %d, %d, %d\n", bytes[0], bytes[1], bytes[2], bytes[3]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:29:08.493

```
#include <stdio.h>
#include <string.h>

int main(void){
 int a=1379;
 unsigned bot,top ;
 unsigned char value [sizeof a];

 memcpy (value, &a, sizeof value);

 /* You can omit this loop if you are on a big-endian machine */
#if LITTLE_ENDIAN
 for (bot =0, top = sizeof value; --top > bot; bot++) {
    unsigned char tmp;
    tmp = value[bot];
    value [bot] = value[top];
    value[top] = tmp;
    }
#endif

for(bot=0;bot < sizeof value;bot++){
 printf("%u", (unsigned int) value[bot]);
 printf(", ");
 }
printf("\n");
return 0;
} 
```

# permissions - SFTP 上传权限

> ID：11439707
> 
> 赞同：1
> 
> 时间：2012-07-11T19:08:32.863
> 
> 标签：permissions, ssh, sftp

我有一个 .NET 程序将文件上传到托管在 Unix 中的 SFTP 服务器。当文件被删除时，权限仅限于 Unix 批处理访问它。我对 SFTP 和 SSH 的基本理解是，上传文件的权限由 SSH/SFTP 登录用户决定，用户对该目录（端点）的权限不是由 . NET 程序（来源）。

有人可以确认我的假设是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:02:09.837

这取决于服务器实现。权限可以从文件上传到的文件夹或通过 SSH 登录的用户继承。由于 Windows 对远程系统权限一无所知（默认情况下），因此不会复制权限。请注意，SFTP 4+（如果有关于版本的记忆）允许您通过 SFTP 更改权限，这意味着客户端可以在文件上传后设置权限。

# android - 手动定位对话框

> ID：11439710
> 
> 赞同：2
> 
> 时间：2012-07-11T19:08:45.770
> 
> 标签：android, dialog

我正在尝试为我的应用程序创建一个自定义对话框。它有点像 windows 8 风格，使用所有屏幕宽度和内容的简单纯矩形。我知道这是由主题和样式完成的，但**我的问题是：**

我不希望它垂直居中。我希望能够随心所欲地上下移动它。我曾想过使用垂直线性布局，其中包含其他 3 个布局：顶部、中间、底部。然后将顶部和底部的背景设置为透明，留下中间的作为我的实际活动布局。然而，这对我来说似乎很曲折。有没有更直观的方法来做到这一点？

另一个问题。微软可以起诉我吗？[我不是这些法律问题的专家]

# c# - 单击取消后返回上一页并显示搜索结果

> ID：11439711
> 
> 赞同：2
> 
> 时间：2012-07-11T19:08:46.070
> 
> 标签：c#, asp.net-mvc-3

我目前有一个带有搜索栏的页面。当用户输入要搜索的内容时，页面会充满搜索结果。当用户单击其中一个搜索结果行并导航到另一个页面以编辑信息时，会有一个取消按钮。如果用户单击取消按钮，他们将返回到搜索页面，他们将不得不再次输入文本进行搜索。如何创建它，以便当他们单击取消时，他们将返回到搜索页面，但带有以前的搜索结果。许多关于此的示例或信息将不胜感激。

这是我的取消按钮的样子：

```
<a class="printRemove" id="cancel" href='<%: Url.Action("Search","Office") %>'>
<img alt="" src="<%:Url.Content("~/Content/images/newCancel.png") %>"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:12:10.147

在您的取消按钮呼叫`history.back(-1)`

或传递搜索所需的值，返回取消按钮并再次搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:14:34.523

这取决于您的搜索是 GET 还是 POST。

如果您的搜索是 GET，则使用一些 Javascript 会将您的用户返回到带有他编写的参数的搜索 URL：

```
history.back(-1) 
```

如果您的搜索是 POST，您可以使用该`TempData`构造临时保存搜索参数。

# html - Chrome 自动为 body 元素添加高度

> ID：11439714
> 
> 赞同：0
> 
> 时间：2012-07-11T19:08:51.710
> 
> 标签：html, css, ruby, google-chrome, twitter-bootstrap

Chrome 在我网站的所有页面上为我的元素添加了一个高度。它在 Firefox 中不这样做。无论页面的高度如何，它总是将 height: 958px 添加到 body 元素。这是 chrome 浏览器读取它的方式：

```
<body class="other" style="height: 958px"> 
```

然而，在 Firefox 中，它不会将高度附加到正文，它只是读取：

```
<body class="other"> 
```

我的CSS如下：

```
body {
  padding-top: 60px;
}

body.other {
  background-image: url( "/assets/bg_grey_noise_more.png" );
} 
```

我将 Twitter Bootstrap 用于我的 UI 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:19:21.143

看起来它是由 hideAddressBar() 函数添加的。

# sql-server - 如何使用tsql获取sql server服务信息

> ID：11439719
> 
> 赞同：0
> 
> 时间：2012-07-11T19:09:28.790
> 
> 标签：sql-server

在 SQL Server 2008 R2 SP1 中，我们有一个新的 dmv -`sys.dm_server_services`它非常适合轻松获取与 SQL Server 服务相关的信息。

是否有任何类似的 sys 视图/目录或 tsql hack 可以轻松查询早期版本的 SQL Server，如 SQL Server 2005 或 SQL Server 2008？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:24:27.447

您可以使用 CLR 或 PowerShell 执行此操作，但不太可能直接使用 T-SQL。您正在谈论的 DMV 以您无法做到的方式从 SQL Server 进程中提取此信息`(TABLE DM_SERVER_SERVICES)`，而不是从您可以以编程方式访问的某个系统表中提取这些信息......

在 PowerShell 中，您可以使用[`Get-Process`](http://technet.microsoft.com/en-us/library/ee176855)或[`Get-Service`](http://technet.microsoft.com/en-us/library/ee176858.aspx)获取其中的一些信息（并根据当前实例名称进行过滤，或者`MSSQLSERVER`如果它是默认实例）。使用 C#，您可以[查看此答案](https://stackoverflow.com/questions/842533/in-c-sharp-how-do-i-query-the-list-of-running-services-on-a-windows-server)，但我不知道任何 SQLCLR 的现成代码。

# php - PHP - PEAR Spreadsheet_Excel_Writer - 在第 ~259 行之后合并列失败？

> ID：11439721
> 
> 赞同：0
> 
> 时间：2012-07-11T19:09:33.753
> 
> 标签：php, excel, pear, spreadsheet-excel-writer

我正在使用 PEAR 的 Spreadsheet_Excel_Writer 来编写 Excel 文件。不过，我遇到了一个相当奇怪的错误。毫无疑问，我的脚本会停止合并约 260 行周围的单元格，加/减可能是 2。

我正在从具有可变起始位置的数据库中读取值。尽管对于每个数据库条目列表，合并停止工作的行并不相同，但当脚本从相同的起始位置运行时，它不会改变。

我知道我根本没有任何意义，所以[附上一个生成的 Excel 文件示例](http://www.mediafire.com/?yzzfr481vtydfwz)。;) 请注意，从第 261 行开始，单元格不会像之前的几行那样合并。

我完全不知道是什么原因造成的。我的脚本非常大并且依赖于数据库，所以它不太适合在这里提供，但我希望这里的人可能以前经历过这种情况。我是否遇到了一些我不知道的 Excel 限制？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:41:14.933

不幸的是，这似乎只是代表 Spreadsheet_Excel_Writer 的一些奇怪之处。我建议任何阅读的人都切换到[PHPExcel](http://phpexcel.codeplex.com/)，因为使用该库生成时不存在错误。

# c# - Word 如何在高级搜索中找到匹配的词形？

> ID：11439722
> 
> 赞同：3
> 
> 时间：2012-07-11T19:09:34.557
> 
> 标签：c#, algorithm, search, ms-word, stemming

我有一个同时出现“执行”和“性能”的 word 文档。当我在 Word UI 中使用高级查找工具（目标最终将其转换为用于 C# 编程搜索的 Find.Execute 命令）时，当我选中“匹配所有单词形式”选项时，我会得到不同的结果。

当我搜索“执行”时，我得到了“执行”和“性能”的出现。
当我搜索“性能”时，我只得到“性能”的命中，即使“性能”仍应注册为“性能”的单词形式。

有谁知道 Word 如何使用其搜索算法，或者我如何确保搜索“性能”同时显示“性能”和“性能”的结果？

编辑（2012 年 7 月 11 日 16:34）-
我运行了几个测试组合，看看我是否可以为自己找到一个模式，嗯......这并不是那么有希望（大写很重要！？！）。
获得这些结果的文档是一个简单的单词文档，每个单词形式都有大写和小写。每次搜索都会找到该单词的大写和小写版本。
![以下是一些搜索的结果及其明显的结论](../Images/c4ea7bb47bfe5499bc1107f17c6eb854.png) （执行“右键单击->在新选项卡中打开图像”以查看完整尺寸的图像细节）
如果有人可以链接到为我澄清这一点的文档，将不胜感激！

编辑（2012 年 7 月 12 日 9:49）-
更悲伤：我尝试从 Word 中的界面切换到 C# 中的 Find.Execute 命令，而 matchSoundsLike 参数的功能与 UI 高级查找功能的功能不同： （似乎程序化的 matchSoundsLike 标志只能找到匹配大小写的声音形式，即使我已将 matchCase 明确设置为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:17:20.713

这似乎是对[Query Expansion](http://en.wikipedia.org/wiki/Query_expansion)的改编，这是 Information Retrieval 中一个相当重要的领域。

我建议不要自己构建查询扩展引擎，因为这更像是硕士（或可能是博士）论文的项目，而不是大型项目的较小功能。但是，如果您仍希望自己实现此功能，我建议您从[Google Scholar 搜索“查询扩展”](http://scholar.google.com/scholar?q=query+expansion&btnG=&hl=en&as_sdt=0%2C5&as_vis=1)开始，并阅读一些现代技术。

就预先存在的库而言，大多数包都专注于网络搜索和数据库，所以我很难找到任何东西来搜索文本文件。[Google Query Expansion](https://developers.google.com/search-appliance/documentation/68/help_gsa/serve_query_expansion)没有明确说它是 Google API 的扩展，但这是我得到的印象。Microsoft SQL Server 似乎[内置了此功能](http://msdn.microsoft.com/en-us/library/ms142491.aspx)。有一个[Apache Lucene 模块](http://lucene-qe.sourceforge.net/)也实现了这一点。MySQL 也有[一个实现](http://dev.mysql.com/doc/refman/5.1/en/fulltext-query-expansion.html)。

如果您希望使用预先存在的包，您似乎至少需要修改程序的结构，以便将文本存储在数据库中。这会将您的问题从文本搜索问题转变为语料库搜索问题，这些问题经过大量研究，并且将有更多来自外部来源的文档和工具。也就是说，在不知道您的数据的情况下，我不知道这是否是一个值得的解决方案，也不知道您应该选择什么结构。

祝你好运。很抱歉我无法直接回答你的问题，但我希望我能给你一些好的信息来源。

# c++ - 在 C++ 中，当我将对象按值传递给函数时，它们是否会被复制到堆栈中？

> ID：11439727
> 
> 赞同：4
> 
> 时间：2012-07-11T19:10:23.503
> 
> 标签：c++

我刚刚开始接触 C++（我是一位经验丰富的 Python/Java 开发人员，正在接触 OpenCL 的更好部分），我对如何将对象传递给函数感到非常困惑。

假设我有一个简单的课程：

```
class Thing {
    int var;
    int var2;
    int var3;

    void doSomething();
}; 
```

现在，这个类的“大小”至少是`3*sizeof(int)`（我不确定是否存储了函数指针）。现在说我有两个函数签名：

```
void doThing1(Thing t);
void doThing2(Thing* t); 
```

当我调用时`doThing1`，是否会导致整个实例被复制到堆栈中？当我打电话`doThing2`时，它只需要`sizeof(Thing*)`堆栈空间吗？

互联网上的许多“传统智慧”一直在告诉我尝试使用 的函数签名`doThing1`，但乍一看这似乎很愚蠢——如果它确实复制了整个对象。

我还假设如果一个函数要修改堆上的对象（使用`new`关键字创建），它应该看起来像`doThing1`.

请纠正我的无知。要么我的 Google 搜索没有帮助，要么 Google 没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:13:40.080

> 当我调用 doThing1 时，是否会导致整个实例被复制到堆栈中？当Ic全部做Thing2时，是否只需要sizeof(Thing*)堆栈空间？

是的，是的。

> 互联网上的许多“传统智慧”一直在告诉我尝试使用 doThing1 的函数签名

在哪里？

如果您需要在被调用者中进行*修改* `Thing`，那么您将*必须*传递一个指针或引用。如果您不需要修改`Thing`，您应该只传递一个 const 引用（保护您免受值传递的错误状态修改，并具有传递引用的效率）。

```
void doThing(const Thing& t) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T19:11:47.700

> 当我调用 doThing1 时，是否会导致整个实例被复制到堆栈中？当我调用 doThing2 时，它只需要 sizeof(Thing*) 堆栈空间吗？

是的，是的。

> 现在，这个类的“大小”至少是 3*sizeof(int) （我不确定是否存储了函数指针）。

不存储函数指针；大小为 3 × sizeof(int)。[（演示）](http://codepad.org/vckmmEoN)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T19:13:08.057

你在这两种情况下都是正确的。您还可以使用引用，它可以避免复制但也可以避免指针：

```
void doThing2(const Thing& t); 
```

这将是我的偏好，因为它很容易被编译器优化并有助于避免错误（例如在函数中重新分配）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T19:13:41.973

通过 const 引用传递它们`void doThing1( const Thing &t)`

# matlab - 时间序列的采样和数字化

> ID：11439732
> 
> 赞同：1
> 
> 时间：2012-07-11T19:10:39.597
> 
> 标签：matlab

有 100 个数据点的时间序列（比如说）。我希望为每个唯一数据点分配 0 1 2 的符号。问题是我已经尝试过但卡住了，因为无论我指定符号，程序都超过了 1 和 0 的概率。以下是问题

1.  该声明

> s=x(:,1) > 0.5;

输出二进制结果 0,1 。那么，我如何创建多个分区/离散化，以便除了 0,1 之外还可以分配其他数字。

> 有没有其他方式来象征和划分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:49:05.013

这样做的明显方法是：

```
s=zeroes(size(x,1), 1);
s(x>=BP(1) & x<BP(2)) = 1;
s(x>=BP(2)) = 2;
etc. 
```

其中 BP 是您的断点列表（即分区的边缘）。这将使BP（1）以下的所有内容= 0，BP（1）和BP（2）之间的内容= 1，以及BP（2）以上的条目= 2；

我想这样的事情也应该起作用：

```
s = zeroes(size(x,1), 1];
for ii=1:length(BP)
   idx = x > BP(ii);
   s(idx) = s(idx) + 1;
end 
```

如果您的数据和/或 bin 大小有一些限制，您有更多选择。您可能会考虑乘法、除法和舍入/截断的巧妙组合。例如，假设您的数据都在 [0, 1) 范围内，并且您希望将其分成 20 个均匀间隔的 bin。然后，您可以执行以下操作：

```
s = floor(x(:,1) .* 20); 
```

这将使 s 取 0 到 19 之间的值。如果您的数据尚未在该区间内，您显然可以先重新调整它：

```
data = x(:,1);
data = data - min(data);
data = data ./ (max(data) + eps(max(data))); 
s = floor(data .* 20); 
```

请注意，这里第 3 行中的归一化因子不是 max(data)，而是 matlab 可以表示的下一个最大数。我们这样做是为了有 20 个组，而不是 21 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:39:02.477

该语句`x(:,1) > 0.5;`正在创建一个逻辑索引：`true (1)`条件满足的`false (0)`地方，不满足的地方。您可以使用此逻辑索引从满足条件的原始向量中获取值。

```
logical_index = x(:,1) > 0.5;
s = x(logical_index,1); %# select the subset of the matrix given by x > 0.5 
```

`s`现在包含`x`大于 0.5 的值。

除此之外，我无法理解您要做什么。一个小的示例数据集会有所帮助（如果您仍然需要帮助，那就是）。

编辑：要找到适合以这种方式划分设置的值，请​​查看[prctile](http://www.mathworks.com/help/toolbox/stats/prctile.html)。然后，您可以应用答案中的任何方法来确定哪些元素属于哪个类别。

# c# - 如何将根标签添加到字符串 xml

> ID：11439733
> 
> 赞同：0
> 
> 时间：2012-07-11T19:10:46.000
> 
> 标签：c#, .net, xml

```
 XDocument doc = XDocument.Parse(_data)
           XElement root = new XElement("student");
           doc.Element("marks").Add(root);
             doc.Save(_data) 
```

_data 是反序列化的字符串 xml，student 是要添加 doc.save 的根标记。保存会引发错误。如何保存根标记？

字符串 xml

```
 <marks>
           <name>Martin</name> 
           <date>3/24/2012</date> 
           <field>Percent</name> 
           <new>33.3</new> 
           <old>10</old> 
            </marks> 
```

这是添加根标签之前的字符串 xml，一旦添加，它应该看起来像添加根标签后它应该看起来像

```
 <student>
            <marks>
           <name>Martin</name> 
           <date>3/24/2012</date> 
           <field>Percent</name> 
           <new>33.3</new> 
           <old>10</old> 
            </marks> 
            </student> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T19:22:49.090

> `XDocument.Parse(_data)`

意味着它`_data`是 XML，即`"<tag> <sub /> </tag>"`

> `doc.Save(_data)`

需要`_data`是有效的文件名。像 `"output.xml"`

好的，看来您需要：

```
//doc.Save(_data)
_data = doc.ToString(); 
```

取3：

您需要将现有的 xml 添加到`<Student>`，而不是相反。

```
//untested    
XElement doc = XElement.Parse(_data);  // not XDoc
XElement root = new XElement("student", doc);
//doc.Save(_data)
_data = root.ToString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T21:20:35.017

怎么样：

```
var doc = new XDocument();
var root = new XElement("student");
var innerXml = XElement.Parse(_data);
root.Add(innerXml);
doc.Add(root);
_data = doc.ToString(); 
```

或者

```
var doc = new XElement(
    new XElement("student",
        XElement.Parse(_data)
    )
);
_data = doc.ToString(); 
```

或单线：

```
_data = new XElement(new XElement("student", XElement.Parse(_data))).ToString(); 
```

# variables - 标识符和变量有什 么区别？

> ID：11439735
> 
> 赞同：25
> 
> 时间：2012-07-11T19:11:03.447
> 
> 标签：variables, identifier

我对标识符有点困惑。在我的教科书中，它说：“我们使用标识符来命名 Java 中的变量（和许多其他东西）。”

我不太确定这意味着什么。就像将变量分配给变量一样吗？什么？

到目前为止，我得到了这样的印象：

```
int a, b, c; a = 2; b = 99; c = a + b; 
```

是`c`标识符吗？当它说“使用标识符来命名变量”时，标识符是`int`用于`double`对`boolean`变量进行分类的东西吗？请提供一些例子。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-11T19:14:28.560

您可以将标识符视为变量的名称。我不会为此太激动的。

例如：

```
int a;
a = 15; 
```

在此示例中，`a`是一个标识符，它引用同名变量。如果`a`不是变量而是函数：

```
int a()
{
}

a(); 
```

然后`a`仍然是一个标识符，但它会标识一个函数。就像“Reena”可以识别个人和[某种非营利组织一样。](http://www.reena.org/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-24T08:39:09.133

我同意 GNU C 的定义，即 C 中有 5 个标记：关键字、标识符、运算符、常量和分隔符。Java 也是如此。

`int`不是标识符，因为它被定义为关键字。运算符从有效标识符符号列表中排除。常量只是值，但引用常量的名称是标识符。

基本上：只要不在关键字列表中，任何“单词”（一组 1 个或多个有效标识符符号）都是标识符。在 Java 中，有效的标识符符号是 Unicode 字母、数字、美元和下划线。数字*不能*是第一个符号。美元和下划线虽然有效，但*不应*使用，但在多字常量标识符（如`MY_MAGIC_NUMBER = 6`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-11T19:15:08.277

标识符只是变量的名称。所以对于变量`c`，标识符是实际的文本`c`，这只是你引用变量的方式。有可能（稍后您将了解）同一个变量可以有多个标识符，有点像现实生活中一个人可以有多个名字。

现在不要太担心它，继续尝试并专注于更重要的东西，如循环、条件、类等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-23T17:17:22.480

标识符是变量的名称，变量是数据的存储位置。变量指向读取和修改数据的内存位置

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-02T13:29:13.673

在 Java 中，标识符是赋予程序元素的名称，其中程序元素可以是包、类型（类、接口、枚举、注释）、字段（实例/静态*变量*）、枚举常量、注释类型元素、方法、局部*变量*和参数。本质上，标识符标识程序元素。

例如，在下面的代码中，

```
package declarations;

public class A {

    private int value = 1;

    private enum SUITS {CLUB, DIAMOND, HEART, SPADE};

    public A(int val) {
        this.value = val;
    }

    public int doSomething() {
        int c = value + 10;
        return c;
    }
}

// declarations, A, value, SUITS, CLUB, DIAMOND, HEART, SPADE,
// A, val, value, val, doSomething, c, value, c are the 
// identifiers in order of their occurrence. 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-02T16:55:51.650

标识符就像任何用户定义函数的名称，例如

```
int gcd(int,int); 
```

这里函数 gcd 的名称是一个标识符。

变量用于分配在执行过程中可能会发生变化的值，例如

```
int a,b;
int a=10; 
```

在上面的两个表达式中，第一个是声明变量，第二个是赋值 10。这里 a 和 b 是变量。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-10T04:51:58.030

如果我理解正确，这似乎是过度工程的一个例子（在过度思考变量名称（标识符）的上下文中）

// 变量定义

int myVariable = 42;

从技术上讲

42 是变量（赋值）。

myVariable 是标识符（我们为存储变量而创建的名称）

我通常在将标识符称为变量的通用思想下工作，如果您想获得技术知识，请区分“我们为存储变量而创建的名称是‘变量名’和存储在‘变量名’中的值”是“变量值”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-01T14:37:41.567

我会说*变量*是**定义的存储区域**；事实上，您的 RAM 中有一个地方可以保存值。*变量标识符*是您赋予该区域的名称。

当然，标识符可以命名的不仅仅是变量。函数（带有输入/输出参数的代码包）也有一个名称：*函数标识符*。一个类型（值域），也有一个名字，*类型标识符*。一个类（具有函数成员的类型），具有*类标识符*，等等。

例如，“4”是一个值。更重要的是，它是一个整数。如果你想管理自己的整数怎么办？您需要一个存储区域来保存整数，一个名称来引用该存储区域，您需要定义要在该区域中保存的值（类型/域），以及一个名称来引用和指定该类型。所以，你写这样的东西：

```
int var; 
```

如果 Java 解析器看到一个具有以下结构的句子：`name name;`，他就知道您正在创建一个存储区域。第一部分指定该区域的值的类型，并且指定它的唯一方法是编写该类型的类型标识符，因为类型本身是一个抽象概念（例如，`int`对于某事物的抽象概念是整数）。

第二部分是您要为该区域指定的名称，以便以后使用，因为使用名称引用存储区域比使用任何其他方式（例如，内存方向或其他任何方式）更简单；让语言管理它你）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-29T16:04:43.507

标识符是代表变量或函数的词，但变量是内存中存储数据的空间。例如：一旦你声明了一个变量如：`int god;`这个词`god`是标识符并且`int god;`是声明的变量输入一个整数数据。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-03T15:19:52.080

添加到上述答案

每个变量都是一个标识符，但每个标识符都不是一个变量。

ex1) 函数名是标识符但不是变量

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-30T03:38:40.390

简单来说，变量是占用内存空间的东西，标识符是该位置的名称。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-08T10:38:28.210

标识符用于识别变量，例如您的名字识别您但您不是您的名字，您只是被它识别。标识符还可用于识别 user267885 的最高评价答案所指出的功能。int 不是标识符，而是声明变量类型的关键字。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-02-19T11:14:38.277

在 C/C++ 中，变量、函数、标签和各种其他用户定义对象的名称称为标识符。第 16 页，C++：完整参考，Herbert Schildt。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-08T17:55:04.570

我会尝试这样做，但不举个例子。

程序中的每一条数据都存储在计算机内存中的某个位置，并为其地址命名。用于引用此内存位置的名称称为*标识符*。

如果此位置的数据可以在运行时更改，则此标识符称为*变量*。如果不是，我们说它是一个*常数*。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-03-31T13:25:38.737

标识符是 Java 中赋予事物的名称。这包括变量、方法、类等。因此，从技术上讲，变量是标识符。见：[https ://www.cs.umd.edu/~clin/MoreJava/Intro/var-ident.html](https://www.cs.umd.edu/~clin/MoreJava/Intro/var-ident.html)

关于您对“我不太确定这意味着什么感到困惑。这就像将变量分配给变量一样吗？什么？” --> 正确的说法是：给变量赋一个“名字”（你想给变量取什么名字）。

# javascript - 选择图像或拍照后关闭应用程序

> ID：11439736
> 
> 赞同：0
> 
> 时间：2012-07-11T19:11:08.733
> 
> 标签：javascript, android, html, cordova, phonegap-plugins

我在 Dreameweaver CS6 中使用最新版本的 phonegap 软件。我从 github 网站上获取了起始示例 HTML 文件并将其导入 DW。然后我测试了那个应用程序，所有这些都与我的位置、地图等一起工作。

但是，我现在更改了代码，以便能够在我的 Android 手机上拍照或选择图片，并且每次我这样做/或关闭应用程序时。

HTML 代码是：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Capture Photo</title>
    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <script type="text/javascript" charset="utf-8">
    var pictureSource;   // picture source
    var destinationType; // sets the format of returned value 

    document.addEventListener("deviceready",onDeviceReady,false);

    function onDeviceReady() {
        pictureSource=navigator.camera.PictureSourceType;
        destinationType=navigator.camera.DestinationType;
    }

    function onPhotoDataSuccess(imageData) {
      var smallImage = document.getElementById('smallImage');
      smallImage.style.display = 'block';
      smallImage.src = imageData;
    }

    function onPhotoURISuccess(imageURI) {
      var largeImage = document.getElementById('largeImage');

      largeImage.style.display = 'block';
      largeImage.src = imageURI;
    }

    function capturePhoto() {
      navigator.camera.getPicture(getPhoto, onFail, { quality: 50, destinationType: destinationType.FILE_URI });
    }

    function capturePhotoEdit() {
      // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 100, allowEdit: false }); 
    }

    function getPhoto(source) {
      // Retrieve image file location from specified source
      navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 100, 
        destinationType: destinationType.FILE_URI,
        sourceType: source });
    }

    function onFail(message) {
      alert('Failed because: ' + message);
    }

    </script>
  </head>
  <body>
    <button onclick="capturePhoto();">Capture Photo</button> <br>
    <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br>
    <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
    <img style="display:none;" id="largeImage" src="" />
  </body>
</html> 
```

config.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<widget xmlns       = "http://www.w3.org/ns/widgets"
    xmlns:gap       = "http://phonegap.com/ns/1.0"
    id              = "com.xxxxxxxx.DKGApp"
    version         = "1.0.0">

    <name>DKG App</name>

    <description>
        An app that allows uploading their random images they take to our facebook website!
    </description>

    <author href    ="http://www.xxxxxxxx.com"  email       ="mail@xxxxxxxx.com">
        David
    </author>

    <gap:splash src="splash.png" />

    <icon src="icon.png" gap:role="default" />

    <feature name="http://api.phonegap.com/1.0/network" />
    <feature name="http://api.phonegap.com/1.0/camera"/>
    <feature name="http://api.phonegap.com/1.0/file"/>
    <feature name="http://api.phonegap.com/1.0/media"/>

    <preference name="android-minSdkVersion" value="7" />
    <preference name="orientation" value="portrait" />
    <preference name="target-device" value="universal" />
</widget> 
```

我是否遗漏了一些必要的东西才能让它工作而不是每次都崩溃？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T13:50:33.087

I also faced the same issue. i fixed the issue using foreground-camera-plugin.

just go to this link and follow the steps.

## [https://code.google.com/p/foreground-camera-plugin/](https://code.google.com/p/foreground-camera-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:11:33.847

您收到内存不足错误。请不要使用 DATA_URL。返回一个 3000x2000 像素的 base64 编码图像会占用应用程序中的所有可用内存。请改用 FILE_URI。

# iphone - 尽管有缓存头，如何在 AFNetworking 中强制缓存

> ID：11439741
> 
> 赞同：11
> 
> 时间：2012-07-11T19:11:30.757
> 
> 标签：iphone, ios, http, caching, afnetworking

我想在 AFNetworking 中强制缓存，即使缓存标头是 Cache-Control：·private 没有其他与缓存相关的标头，我知道这将是一个基于时间的缓存，我对此没有任何问题。

即使超出 AFNetworking 范围，也请告知。

我正在制作一个 iOS 5 iPad 应用程序，这里是我试图缓存的 XML 文件的头文件：

```
HTTP/1.1·200·OK(CR)(LF)
Cache-Control:·private(CR)(LF)
Content-Type:·text/xml;·charset=utf-8(CR)(LF)
Server:·Microsoft-IIS/7.5(CR)(LF)
X-AspNet-Version:·2.0.50727(CR)(LF)
X-Powered-By:·ASP.NET(CR)(LF)
Date:·Wed,·11·Jul·2012·18:42:27·GMT(CR)(LF)
Connection:·close(CR)(LF)
Content-Length:·20464(CR)(LF)
(CR)(LF) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:44:53.577

当你创建 NSURLRequest (+ requestWithURL:cachePolicy:timeoutInterval: 或 – initWithURL:cachePolicy:timeoutInterval:) 时，你可以将它的 cachePolicy 设置为以下值。

```
enum {
   NSURLRequestUseProtocolCachePolicy = 0,
   NSURLRequestReloadIgnoringLocalCacheData = 1,
   NSURLRequestReloadIgnoringLocalAndRemoteCacheData =4,
   NSURLRequestReloadIgnoringCacheData = NSURLRequestReloadIgnoringLocalCacheData,
   NSURLRequestReturnCacheDataElseLoad = 2,
   NSURLRequestReturnCacheDataDontLoad = 3,
   NSURLRequestReloadRevalidatingCacheData = 5
};
typedef NSUInteger NSURLRequestCachePolicy; 
```

关于 cachePolicy 的更多细节可以在[这里](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:50:16.713

我发现此链接可能对您有所帮助：[https ://github.com/AFNetworking/AFNetworking/issues/495](https://github.com/AFNetworking/AFNetworking/issues/495)

基本上，您可以覆盖 NSURLConnection。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T01:59:25.953

In addition to override `NSURLConnection`, I'd like to use external cache management, such as [EGOCache](https://github.com/enormego/EGOCache). This will be more flexible that you can change to other cache system anytime.

# c++ - 构造函数与方法中的单例函数调用

> ID：11439746
> 
> 赞同：0
> 
> 时间：2012-07-11T19:11:51.313
> 
> 标签：c++, qpid

我正在使用 qpid 消息传递库。我有一个包含连接对象的单例类。我注意到我的应用程序将在退出时成为核心，具体取决于我创建连接的方式。如果我在单例构造函数或静态方法中创建它，一切都很好，但是如果我在非静态方法或 getinstance 方法中创建它，如下所示，消息传递库将在调用我的析构函数之前在内部调用 close 方法它会调用中止。我想知道这些创建调用有什么不同可能导致这样的结果。

```
class Singleton : public boost::noncopyable
{
public:

  static Singleton &
  GetInstance()
  {
    static Singleton tS;
    // If I create _Conn this way it cores
    // tS._Conn = SharedConn(new Conn());
    return tS;
  }

private:

  typedef boost::shared_ptr< Conn > SharedConn;
  Singleton()
  {
    // If I create _Conn this way it works
    //_Conn = SharedConn(new Conn());
  }

  SharedConn _Conn;
};

int main(int argc, char** argv)
{
  Singleton::GetInstance();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:27:13.613

在 GetInstance 中重新创建 _Conn 是否有原因？那时构造函数已经创建了一次。因此，重新分配给 _Conn 可能会导致调用前一个实例的析构函数（并关闭）。

# java - 使用 ArrayList 写入文本文件

> ID：11439752
> 
> 赞同：0
> 
> 时间：2012-07-11T19:12:11.070
> 
> 标签：java

该程序基本上是关于从文本文件读取，将当前数据存储到 ArrayList，然后将数据（来自用户输入）写入同一个文本文件。请让我知道我在这个子部分中哪里出错了？文本文件里面的数据如下：

> 美国广播公司 t1 1900
> 
> xyz t2 1700

编译器在该行显示错误`output.format("%s%s%s%n",`

```
public class justTesting {
    private Scanner input;
    private Formatter output;
    private ArrayList<Student> tk = new ArrayList<Student>();

    public static void main(String[] args) {
        justTesting app = new justTesting();

        app.create();
        app.writeToFile();
    }

    public void create() {
        Text entry = new Text();
        Scanner input = new Scanner(System.in);

        System.out.printf("%s\n", "Please enter your name, ID, and year: ");

        while (input.hasNext()) {
            try {
                entry.setName(input.next());
                entry.setTelNumber(input.next());
                entry.setDOB(input.next());

                for (int i = 0; i < tk.size(); i++) {
                    output.format("%s%s%s%n", tk.get(i).getName(), tk.get(i)
                            .getTelNumber(), tk.get(i).getDOB());
                }

            } catch (FormatterClosedException fce) {
                System.err.println("Error writing to file.");
                return;
            } catch (NoSuchElementException nsee) {
                System.err.println("Invalid input. Try again: ");
                input.nextLine();
            }
            System.out.printf("%s\n", "Please enter your name, ID, and year: ");
        }
    }

    public void writeToFile() {
        try {
            output = new Formatter("testing.txt");
        } catch (SecurityException se) {
            System.err
                    .println("You do not have write access permission to this file.");
            System.exit(1);
        } catch (FileNotFoundException fnfe) {
            System.err.println("Error opening or creating file.");
            System.exit(1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T19:07:44.060

我删除了 %n 并且它起作用了。谢谢大家。

# iphone - 更改地点导航按钮

> ID：11439753
> 
> 赞同：-1
> 
> 时间：2012-07-11T19:12:22.200
> 
> 标签：iphone, backbarbuttonitem

如何用另一个按钮更改位置导航返回按钮？

我写了类似的东西：

```
self.navigationItem.leftItemsSupplementBackButton = YES;

NSArray *arr = [NSArray arrayWithObjects: editButton, self.navigationItem.backBarButtonItem , nil]; 
self.navigationItem.leftBarButtonItems = arr; 
```

我想在editButton之后导航按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:48:18.203

您应该在右侧有编辑按钮，在左侧它将是默认的后退按钮

对于右侧的编辑按钮，在视图中写入此代码确实加载

```
self.navigationItem.rightBarButtonItem=[[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStylePlain target:self action:@selector(edit)]; 
```

然后你应该用这两个按钮来查看一个视图，然后在导航栏上添加这个视图

# maven - 如何让 Jenkins 不使用 Maven

> ID：11439755
> 
> 赞同：3
> 
> 时间：2012-07-11T19:12:39.430
> 
> 标签：maven, jenkins, gradle

我使用 Gradle 而不是 Maven。如何让我们的 Jenkins 持续集成服务器*不*使用 Maven？我已经告诉 Jenkins 关于 Gradle 并且 Jenkins 使用它来构建项目。然而，Jenkins 坚持使用 Maven 重建项目，即使我已经从项目配置中删除了与 Maven 相关的所有内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:34:54.863

它应该可以正常工作。请确保：

1.  你的 Jenkins 工作是一个“自由风格的软件项目”： ![就业创造画面](../Images/fab600bc708b98cb20e2f43b493d98b8.png)
2.  您已正确安装和配置 Jenkins Gradle 插件。
3.  您将“调用 Gradle 脚本”作为构建步骤： ![在此处输入图像描述](../Images/a9e2d9d700e9cee9bfb2814a001b2c52.png)

# c# - “实时”多变的班级设计

> ID：11439756
> 
> 赞同：0
> 
> 时间：2012-07-11T19:12:39.883
> 
> 标签：c#, winforms

我的应用程序用于离心泵叶轮设计。允许用户通过winform gui实时更改某些属性（流速、尺寸等），并且应该实时向他提供大部分结果。

有 13 个用户可更改参数和大约 70 个计算参数。

大多数计算在数学上都非常复杂，其中一个参数需要迭代（不超过 10 次迭代）。

到目前为止，我对包含并计算所有参数的类的解决方案是：

1.  使用描述用户可更改参数的属性和计算结果参数的方法进行分类。
2.  类是不可变的，并在创建时计算所有内容。
3.  使用 .NET 4.0 中的惰性类的惰性解决方案

我在 CR 上问过[这个](https://codereview.stackexchange.com/questions/13475/multiple-properties-updated-by-event-vs-few-properties-and-methods)问题，这是我从哪里得到 Lazy 解决方案的。

所以我的问题是哪种方法最适合“实时”解决方案？还有其他更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:19:47.633

我会选择解决方案 1，我怀疑每个泵都具有相同的属性，只是属性值不同。

```
public class Pump
{
    public double Speed { get; set; }
    public double Size { get; set; }
    public void GetCFM() { return Speed * Size; }
} 
```

任何调用都`GetCFM`将始终返回最新的计算。

如果您不想手动调用`GetCFM`，则可以改为实现[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。使用*观察者模式*，您将触发一个处理程序，该处理程序在任何属性更改时都会收到通知。

另外，我怀疑您对[实时计算](http://en.wikipedia.org/wiki/Real-time_computing)的理解与文章中解释的不同。

# python - 在python中的字符串中查找字符串出现的第二次，第三次或更多次

> ID：11439763
> 
> 赞同：1
> 
> 时间：2012-07-11T19:13:13.673
> 
> 标签：python, string, python-2.7, substring

> **可能重复：**
> [在 Python 中查找所有出现的子字符串](https://stackoverflow.com/questions/4664850/find-all-occurrences-of-a-substring-in-python)

我有一串数字，并且每次在字符串中出现特定的数字串时都试图找到它。

我知道如果我使用，例如：`numString.find(str)`它会在它第一次发生时告诉我。无论如何修改此语句以查找 str 发生的每次，而不仅仅是第一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:21:06.077

你可以使用递归：

`find()`使用第二个可选参数，它提供`starting index`for 搜索，因此在每次迭代时，您都可以将该参数设置为返回的当前值`find()+1`

```
>>> strs='aabbaabbaabbaabbaa'
>>> def ret(x,a,lis=None,start=0):
    if lis is None:
        lis=[]
    if x.find(a,start)!=-1:
         index=x.find(a,start)
        lis.append(index)
        return ret(x,a,lis=lis,start=index+1)
    else: return lis

>>> ret(strs,'aa')
[0, 4, 8, 12, 16]

>>> ret(strs,'bb')
[2, 6, 10, 14]
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T20:38:07.317

那么，正则表达式是不可能的，考虑这个生成器代码：

```
def find_all(target, substring):
    current_pos = target.find(substring)
    while current_pos != -1:
        yield current_pos
        current_pos += len(substring)
        current_pos = target.find(substring, current_pos) 
```

我们使用 'find' 可选参数设置搜索的起始索引，每次使用最后一个找到的，加上子字符串的长度（所以我们每次都不会得到相同的结果）。如果您想获得**重叠匹配**，请使用`+ 1`and not `len(substring)`。

您`'list(find_all('abbccbb', 'bb'))'`可以获得实际的索引列表。

顺便说一句：生成器（又名`yield`关键字）比普通列表更节省内存，而 while 循环的开销远低于递归（如果您是人类，也更容易阅读）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:28:49.553

不是最有效的方法..但它是单线！如果这很重要.... :)

```
>>> s = "akjdsfaklafdjfjad"
>>> [n for n in set([s.find('a',x) for x in range(len(s))]) if n >= 0]
[0, 9, 6, 15] 
```

# process - 如何从 WiX 中杀死进程

> ID：11439767
> 
> 赞同：18
> 
> 时间：2012-07-11T19:13:37.513
> 
> 标签：process, wix, kill

我正在使用 Wix 开发安装程序，并且需要在安装过程中静默终止进程（而不是应用程序），这样用户就不会弹出要求终止进程或等待并重新启动的窗口。我已经看到了杀死应用程序而不是进程的解决方案。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-12T19:32:03.273

经过一番挖掘，我发现了这个使用 WixUtilExtension Quiet Execution Custom Action [http://wix.sourceforge.net/manual-wix3/qtexec.htm](http://wix.sourceforge.net/manual-wix3/qtexec.htm)的解决方案：

```
<InstallExecuteSequence>
  <Custom Action='MyProcess.TaskKill' Before='InstallValidate'/>
</InstallExecuteSequence>

<Property Id="QtExecCmdLine" 
          Value='"[WindowsFolder]\System32\taskkill.exe" /F /IM MyProcess.exe'/>
<CustomAction Id="MyProcess.TaskKill" 
              BinaryKey="WixCA" 
              DllEntry="CAQuietExec" 
              Execute="immediate" 
              Return="ignore"/>

<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="WindowsFolder" Name="WINDOWS"/>
    ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:24:49.110

如果我了解您的需求，我已使用该[`CloseApplication`](http://wix.sourceforge.net/manual-wix3/util_xsd_closeapplication.htm)元素来执行此操作。我杀死的进程在任务管理器中没有显示为应用程序。不过，这取决于您正在谈论的流程类。

# php - 使用 PHP 从图像内容创建哈希？

> ID：11439771
> 
> 赞同：3
> 
> 时间：2012-07-11T19:13:47.530
> 
> 标签：php, image-processing

我目前从图像名称创建散列，但宁愿根据图像的内容创建散列，以便检测重复图像。他们是否有任何 PHP 类可以做到这一点？

我当前的代码非常简单：

```
$image = "image1.jpg"; 
$filehash = md5_file($image ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:16:12.863

您拥有的当前代码实际上是在计算文件内容的 md5。你已经拥有的做你想做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T09:49:21.820

当你提到内容时，你可能想看看一个感知散列，比如[phash](http://www.phash.org/)

# wampserver - Wampserver：加载 php_pdo_pgsql 和 php_pgsql 模块的问题

> ID：11439772
> 
> 赞同：5
> 
> 时间：2012-07-11T19:13:51.247
> 
> 标签：wampserver

Wampserver 在加载 php_pdo_pgsql 和 php_pgsql 模块时出现问题。在几个论坛上搜索后，解决方案是从[http://www.bmedon.net/download.html](http://www.bmedon.net/download.html)下载两个 .dll 文件并覆盖现有文件。

问题是它没有工作！我检查了所有 php.ini 文件。我按照[http://diego-loquese.blogspot.com/2010/12/conectar-wampserver-con-postgresql.html](http://diego-loquese.blogspot.com/2010/12/conectar-wampserver-con-postgresql.html)说明（这是我找到的所有论坛的摘要）。

我正在使用 WampServer 2.2 for Windows x64 和 PHP 5.4.3

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-26T15:51:33.473

你必须加载`libpq.dll`php 自带的，`httpd.conf`像这样：

```
LoadFile "c:/wamp/bin/php/php5.4.3/libpq.dll" 
```

它对我有用

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-03T00:08:01.610

只需将 libpq.dll 从您的 php 目录复制到 apache bin 目录即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T08:55:23.607

1.  安装 PostgreSQL

2.  编辑 php.ini，取消注释“extension=php_pgsql.dll”。检查 PHP 文件夹和 Apache 文件夹中的 php.ini

3.  编辑环境变量，将 PostgreSQL /bin 和 /lib 目录添加到 Path。这解决了 php_pgsql.dll 由于无法解析依赖关系而无法加载的问题。

4.  完毕。PHP 现在应该能够与 PostgreSQL 通信了。

# c++ - 禁用 Qt 组合框中的项目

> ID：11439773
> 
> 赞同：21
> 
> 时间：2012-07-11T19:13:52.950
> 
> 标签：c++, qt

我找不到在 Qt 组合框中禁用单个项目的标准方法。在我缺少的 Qt 中是否有这样做的工具？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2017-08-09T19:17:41.917

为什么 hack.. 我们知道模型是 QStandardItemModel...

```
model = dynamic_cast< QStandardItemModel * >( combobox->model() );
item = model->item( row, col );
item->setEnabled( false ); 
```

干净，优雅，没有黑客......

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-12T21:42:39.690

如果您的组合框使用 a `QStandardItemModel`（默认情况下使用），那么您可能会远离`Qt::UserRole -1`黑客（请参阅Desmond 在[上面的回答中提到的](https://stackoverflow.com/questions/11439773/disable-item-in-qt-combobox#11439859)[博客文章](http://theworldwideinternet.blogspot.com/2011/01/disabling-qcombobox-items.html)）：

```
const QStandardItemModel* model = qobject_cast<const QStandardItemModel*>(ui->comboBox->model());
QStandardItem* item = model->item(1);

item->setFlags(disable ? item->flags() & ~(Qt::ItemIsSelectable|Qt::ItemIsEnabled)
                       : Qt::ItemIsSelectable|Qt::ItemIsEnabled));
// visually disable by greying out - works only if combobox has been painted already and palette returns the wanted color
item->setData(disable ? ui->comboBox->palette().color(QPalette::Disabled, QPalette::Text)
                      : QVariant(), // clear item data in order to use default color
              Qt::TextColorRole); 
```

上面的代码是对我对博客文章的[评论](http://theworldwideinternet.blogspot.ch/2011/01/disabling-qcombobox-items.html?showComment=1392212546177#c4845363021949089541)的修改和更通用的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-11T19:19:36.137

取自[这里](http://theworldwideinternet.blogspot.com/2011/01/disabling-qcombobox-items.html)：

```
// Get the index of the value to disable
QModelIndex index = ui.comboBox->model()->index(1, 0); 

// This is the effective 'disable' flag
QVariant v(0);

// the magic
ui.comboBox->model()->setData(index, v, Qt::UserRole - 1); 
```

要再次启用，请使用：

```
QVariant v(1 | 32); 
```

使用的模型将`flags`单词映射到`Qt::UserRole - 1`- 这就是使该代码起作用的原因。这不是适用于任意模型的通用解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-27T09:08:39.317

您可以使用 a 的模型`QListWidget`作为代理。

```
QComboBox *combo = new QComboBox(this);
QListWidget *contents = new QListWidget(combo);
contents->hide();
combo->setModel(contents->model());

/* Populate contents */
contents->addItem("...");    // Etcetera 
```

然后，此方法将禁用一个项目：

```
void disableItem(int index)
{
    QListWidgetItem *item = contents->item(index);
    item->setFlags(item->flags() & ~Qt::ItemIsEnabled);
} 
```

# facebook - XMPP facebook 与非朋友聊天

> ID：11439776
> 
> 赞同：1
> 
> 时间：2012-07-11T19:13:58.923
> 
> 标签：facebook, xmpp, chat

我们正在开发一个允许用户仅通过 facebook 登录的应用程序。现在我们计划使用 facebook xmpp 引入聊天方面。

在我继续之前，juts 想检查人们是否可以通过我们的应用程序互相聊天，即使他们不是 Facebook 上的朋友？

这对我们很重要，因为我们的应用可能需要在 Facebook 上不是朋友的用户之间进行交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:17:28.323

XMPP 上的 Facebook 聊天要求您成为所有聊天方的 Facebook 好友。否则，它可能会被用来向人们发送来自他们不认识的人的信息的垃圾邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:43:04.863

我不是 Facebook 开发人员，所以我不知道这是否有帮助。但请记住，只要收件人没有阻止它们，您就可以向非朋友发送普通消息。换句话说，如果收件人不在用户的朋友列表中，您可以尝试回退到常规消息系统；也就是说，只需通过普通消息传递 API 路由“聊天”即可。同样，如果非朋友向您发送消息，则应用程序会从收件箱中提取该消息并将其传递到您的聊天窗口。

但是，这种方法有两个警告：

1.  获得对消息传递 API 的访问权限（至少用于阅读其他用户的消息）使应用程序可以访问用户的所有收件箱内容，并且许多用户可能不愿意授予该权限。
2.  Facebook 曾表示，收件箱并非用于实时通信，“滥用”它的用户可能会发现他们的消息传递功能暂时被禁用。见： http: [//www.facebook.com/help/132736263468691/](http://www.facebook.com/help/132736263468691/)

# symfony - Assetic / Coffee 脚本错误：致命错误：调用未定义的方法 Assetic\Filter\CoffeeScriptFilter::setBare() i

> ID：11439781
> 
> 赞同：1
> 
> 时间：2012-07-11T19:14:12.757
> 
> 标签：symfony, coffeescript, assetic

我刚刚将 Symfony 更新到最新版本（2.0.16），我在编译时遇到了一个奇怪的 Assetic / CoffeeScript 错误。

`Fatal error: Call to undefined method Assetic\Filter\CoffeeScriptFilter::setBare() in/app/cache/dev/appDevDebugProjectContainer.php on line 119`

该行包含以下内容： `$instance->setBare(NULL);`

我已经尝试手动清除缓存，但问题仍然存在。有任何想法吗？

编辑：我的配置文件中的路径绝对正确：

```
assetic:
debug:          %kernel.debug%
use_controller: true
filters:
    coffee:
        coffee: %kernel.root_dir%/../../../.nvm/v0.6.18/bin/coffee
        node: %kernel.root_dir%/../../../.nvm/v0.6.18/bin/node
        apply_to: "\.coffee$" 
```

编辑2：

2.0.15 deps 和 deps.lock 中的版本工作正常，2.0.16 中的版本没有。

```
#2.0.15 deps:
#[AsseticBundle]
git=http://github.com/symfony/AsseticBundle.git
target=/bundles/Symfony/Bundle/AsseticBundle
version=v1.0.1

#2.0.15 deps.lock
AsseticBundle v1.0.1

#2.0.16 deps
[AsseticBundle]
git=http://github.com/symfony/AsseticBundle.git
target=/bundles/Symfony/Bundle/AsseticBundle
version=origin/2.0

#2.0.16 deps.lock
AsseticBundle fbcbaf46df2aa143759319de205e1babcf7dd87d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:10:54.933

您必须使用最新版本的资产。如果您使用以前的“deps”文件方法来管理您的依赖项 - 确保资产与 master/dev/head 版本一起列出。

如有疑问，请发布您的 deps 文件...

如果您使用的是[作曲家](http://getcomposer.org)方法：

```
php composer.phar update 
```

应该完成这项工作。

如果您确定您拥有最新版本 - 再次清除缓存；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:24:55.433

你仍然可以从过去四个月的变化中受益，你不需要使用旧版本的 AsseticBundle。

`deps.lock`Symfony2 v2.0.16 提供的文件中，AsseticBundle 版本不正确。`deps.lock`在您的文件中使用此版本：

[a926f5e81718bb920459ce3226ceb258ab3c1f05](https://github.com/symfony/AsseticBundle/commit/a926f5e81718bb920459ce3226ceb258ab3c1f05)

或者，您可以**省略**AsseticBundle 版本，`deps.lock`因为 2.0 分支中的最新提交将适用于 Symfony2 v2.0.16。AsseticBundle 2.0 分支目前位于 a926f5e8，与我上面提到的相同提交。但我认为 2.0 分支应该始终与 Symfony 2.0.x 一起使用。

# xml - 使用 Grep/Sed/Awk 拆分 XML 文件？

> ID：11439787
> 
> 赞同：1
> 
> 时间：2012-07-11T19:14:25.047
> 
> 标签：xml, parsing, sed, awk, grep

试图找出最好的方法（或者通过使用我在 Grep / Sed / Awk 中所知道的）来根据它的单个字符串（键？）分割一个 XML 文件。我有一个 XML 文件，它是我当前所有常见问题解答条目的 SQL 转储，因此它包含一个条目 ID，然后是一个相当大的 HTML 格式文档。我希望将这些条目分开，以便我可以轻松地将它们弹出到编辑器中并清理格式以导入新的 KB / FAQ 系统。这是我的数据示例：

```
 <article id="3">
  <language>en</language>
  <category>Category Name</category>
  <keywords>Keywords, by, comma</keywords>
  <question>Question?</question>
  <answer>HTML Formatting</answer>
  <author>Author</author>
  <data>2010-05-13 09:32</data>
 </article> 
```

XML 文件包含我拥有的每一篇以这种格式背靠背的 KB 文章。我对 bash 很满意，我只是不知道如何根据搜索将其拆分为多个文件。

干杯，

黏土

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T22:44:01.803

### 使用 XPath 提取文章

如果您的文件是有效的 XML，您可以使用[xgrep](http://wohlberg.net/public/software/xml/xgrep/)或[XMLStarlet](http://xmlstar.sourceforge.net/)之类的实用程序来解析文件以获取 XPath 表达式。例如，使用 xgrep：

```
xgrep -x "//article[@id]" /tmp/foo 
```

这可能就是您所需要的。但是，它不会拆分文章；它只是比使用正则表达式更可靠地提取 XML 的正确部分。

### 使用管道将文章节点拆分为文件

如果您确实需要将文章拆分为单独的文件，则可以执行以下操作：

```
xgrep -x "//article[@id]" /tmp/foo.rb |
ruby -ne 'BEGIN { counter=0 }
          counter += 1 if /<article/
          if /<article/ ... /<\/article/
            File.open("#{counter}.xml", "a") { |f| f.puts $_ }
          end' 
```

显然，您可以使用 Ruby XML 库完成所有工作，但我更喜欢将此类问题视为 shell 管道。你的旅费可能会改变。

另外，请注意，上面的 Ruby 脚本将按顺序对您的文章进行编号，而不是按文章 ID。如果您的 XML 中有重复的 ID，这可能更可取。

### 带有 XmlSimple 的纯 Ruby

好吧，好吧......我就是不能让这个人一个人呆着。起初，在上述管道中使用外部 shell 实用程序似乎是一个好主意，但如果您要使用 Perl 或 Ruby，您不妨只使用 XmlSimple 库。

*   [http://metacpan.org/pod/XML::简单](http://metacpan.org/pod/XML%3a%3aSimple)
*   [http://xml-simple.rubyforge.org/](http://xml-simple.rubyforge.org/)

下面的 Ruby 脚本比流水线版本稍长，但给您更多的控制和灵活性。考虑以此为起点的所有可能性：

```
#!/usr/bin/env ruby

require 'xmlsimple'

counter = 0
node_name = 'article'
xml = XmlSimple.xml_in '/tmp/foo'

xml[node_name].uniq.each do |node|
  counter = sprintf("%03d", counter.next)
  XmlSimple.xml_out(node,
                    RootName: node_name,
                    OutputFile: "/tmp/#{counter}.xml")
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T19:38:58.760

```
cat file.xml | \
perl -p -i -e 'open(F, ">", ($1).".xml") if /<article id="(\d+)"/; print F;' 
```

将根据文章的 id 拆分 xml 文件。每个文章部分将存储在自己的文件中，名称中带有 ID 号。即使在大文件上它的工作速度也非常快（在这种情况下`sed`，`awk`等解决方案真的很慢）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:34:35.380

这是 awk 的一个简单想法：

每当您使用文章开始标签点击一行时，将计数器变量加一。然后，对每一行进行系统调用，如“echo $0 >> file$COUNTER”。这应该很容易实现

# if-statement - 在Windows批处理文件的++ FOR循环中进行IF EXIST检查后重命名文件？

> ID：11439790
> 
> 赞同：0
> 
> 时间：2012-07-11T19:14:55.140
> 
> 标签：if-statement, batch-file, for-loop, batch-rename

我在网上搜索并找不到我正在寻找的确切代码......我发现了非常相似但没有让它们工作的东西。这是我想要的一个粗略的想法：

```
int i = 1;
FOR (i; i < 9999; i++)
IF EXIST filename.log THEN
REN filename%i%.log
ELSE IF EXIST filename%i%.log THEN
REN filename%(i+1)%.log 
```

基本上我想检查一个文件名是否存在，如果存在，将其重命名为 filename0001 - 从那里开始，每次运行批处理时，如果找到文件名####，它会在此之后将其重命名为一个。所以当然在第一次运行之后，当它发现文件名存在时，它将把它重命名为 filename0002 等等。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:05:23.747

*编辑以回应评论。还添加了测试以确保 debug.log 存在。不想不必要地重命名文件*

第一种解决方案始终具有最新的日志作为 debug.log，下一个最新的日志为 debug0001.log，下一个为 debug0002.log，依此类推。最旧的日志将具有最高的编号。

```
@echo off
setlocal enableDelayedExpansion
set "base=debug"
if exist "%base%.log" for /f "eol=: delims=" %%F in (
  'dir /b /o-n "%base%*.log" ^| findstr /rix /c:"%base%.log" /c:"%base%[0-9][0-9][0-9][0-9].log"'
) do (
  set "name=%%~nF"
  set /a "n=10000!name:*%base%=! %% 10000 + 1"
  ren "%%F" "%base%!n!.log"
) 
```

要使最旧的日志具有 0001，而最新的日志具有最大的数字，则需要进行一些小的更改。只需要一个重命名。

```
@echo off
setlocal enableDelayedExpansion
set "base=debug"
if exist "%base%.log" for /f "eol=: delims=" %%F in (
  'dir /b /o-n "%base%*.log" ^| findstr /rix /c:"%base%.log" /c:"%base%[0-9][0-9][0-9][0-9].log"'
) do (
  set "name=%%~nF"
  set /a "n=10000!name:*%base%=! %% 10000 + 1"
  ren "%base%.log" "%base%!n!.log"
  goto :break
)
:break 
```

# sql-server - SQL Server 复制 - 同步单篇文章

> ID：11439791
> 
> 赞同：0
> 
> 时间：2012-07-11T19:15:00.900
> 
> 标签：sql-server, replication

我正在使用 Merge Replication 来同步 2 个数据库，但客户端现在提出了一个我认为无法支持使用 Merge Replication 的要求。他想要的是：每次对数据库 B 进行更改时，都需要立即转到数据库 A。另一方面，对数据库 A 所做的更改每天只应用于 B 一次。

我研究了很多，我认为带有可更新订阅的事务复制（立即）是可行的方法，但如果可能的话，我想继续使用合并复制。

有没有办法使用合并复制来满足这个要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:02:35.120

像在数据库 B 中的表上触发同步过程这样简单的事情会起作用吗？

# jython - Jython 更改文件名

> ID：11439794
> 
> 赞同：0
> 
> 时间：2012-07-11T19:15:17.137
> 
> 标签：jython

我在一个目录中有一个名为“foo.bill.me.txt”的文件，并且同一个目录也有一个名为“foo.txt”的文件。我想将 'foo.bill.me.txt' 重命名为 'foo.txt'，并删除原始的 'foo.txt'，然后删除 'foo.bill.me.txt'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:07:47.717

这真的是 jython 标记的吗？如果是这样，只需使用 python [os 模块文档](http://docs.python.org/library/os.html)

这应该以 unix 风格执行原子操作：

```
os.rename('foo.bill.me.txt','foo.txt') 
```

如果在 Windows 下，重命名状态的文档：

> 在 Windows 上，如果 dst 已经存在，即使是文件也会引发 OSError；当 dst 命名现有文件时，可能无法实现原子重命名。

因此在 Windows 上你需要两步“非原子”

```
os.remove('foo.txt')
os.rename('foo.bill.me.txt','foo.txt') 
```

# javascript - 在three.js中需要一个带纹理的圆圈

> ID：11439795
> 
> 赞同：1
> 
> 时间：2012-07-11T19:15:20.613
> 
> 标签：javascript, three.js, geometry

我想在three.js的一侧有一个带有纹理的圆圈。我考虑过使用 THREE.CylinderGeometry，但是我必须在新的 THREE.CylinderGeometry(...) 部分中的哪里添加“材料”？

而且我不想使用精灵。

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T00:45:23.047

编辑：您现在可以`THREE.CircleGeometry`用来创建纹理磁盘。

三.js r.75

# c# - 如何在一个整数中编码两个数字？

> ID：11439796
> 
> 赞同：5
> 
> 时间：2012-07-11T19:15:27.917
> 
> 标签：c#, javascript, .net, floating-point, bitmask

我需要存储一系列值（如 25-50 或 100-200），但是为了避免大量的数据库重新设计和其他工作，我想使用一个`Int32`来存储这两个数字。我意识到每个数字只有 16 位，但这很好。

因此，使用两个整数值非常容易。我可以做类似的事情：

```
int mask = 50; //Right bits will have 50
mask |= (25 << 16); //Left bits will have 25

Console.WriteLine("Mask is: {0}", mask);
Console.WriteLine("Left is: {0}", (mask >> 16));
Console.WriteLine("Right is: {0}", (mask & 0xFFFF)); 
```

现在，我有右 16 位存储值 50，左 16 位存储值 25。

**那么问题是什么？**

现在，我想使用相同的技术，但我想存储两个非整数。例如，1.5 和 1.75，或 2.00 和 2.25。.NET 似乎不支持`float`、`single`或. **另外，我最终还需要在 Javascript 中读取这些值，**因此怀疑使用的任何位编码浮点是否在平台之间完全兼容。`double``decimal`

 **最好的方法是什么？我正在考虑的一种方法是只使用整数，但将所有内容除以 1000。这将使我在两个数字中都有 3 个小数点精度，尽管我必须将整个内容存储为 a`long`以存储超过 65 的任何内容。我是不确定这是否是最好的方法。也许我缺少一些简单的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:22:21.080

一点数学就可以解决这个问题。

首先确定你的精度，比如 2 位数字，你的数字范围直到 1000

```
both = Math.Round(num1, 2) * 10000 + Math.Round(num2, 2); 
```

前 4 位数字用于 num1，然后您有 num2。

你可以让他们回来扭转这个过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T19:22:16.370

只要您没有很多十进制数字，最简单的解决方案就是将每个数字乘以您想要的任意数量的小数，然后将两个数字转换为整数，执行您的位运算，然后将结果存储在您的数据库中。

阅读它们时，您只需将数字拆分，然后将其除以您之前使用的因子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-09T16:43:13.873

您所问的在数学中称为“配对函数”。

配对函数有很多，其中有 Goedel's、Cantor's 等。

Godel pf 对嵌套语言进行编码并不实用，但对于符号不多的普通语言来说却是极好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:22:07.430

在 C# 中，您有 BitConverter。您可以将数据库中的浮点值转换为代码中的字节数组，然后对它进行任何您需要的操作，然后将其转换回浮点值，然后再将其保存到数据库中。

有关示例，请参见下面的帖子。

[C#：将字节数组转换为浮点数](https://stackoverflow.com/questions/2619664/c-convert-byte-array-into-a-float)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T19:22:46.640

[您可以从这个问题](https://stackoverflow.com/questions/4742910/float-to-byte4-and-back-to-float)的答案中使用浮点数到字节[] 的转换。

当你有一个字节数组时，你可以使用你的屏蔽技术。**

# objective-c - 打开新视图的按钮

> ID：11439798
> 
> 赞同：0
> 
> 时间：2012-07-11T19:15:47.993
> 
> 标签：objective-c, ios, uibutton

我最近成为了会员，因为我注意到这里有很多知识，而且我是制作 iOS 应用程序的初学者。我目前正在制作一个完美适用于我想要它做的一切的应用程序。唯一的问题是我在应用程序中添加了一个新按钮，但我不知道如何用它打开一个新视图，或者如何将它连接到一个 segue 或任何会打开新视图的东西。我以编程方式制作了按钮，作为选择器，我有一个名为 pushnext 的方法。我正在尝试实现一种将打开视图的方法，但我所知道的是我想要显示的视图中的信息包含在 GridViewController.m 中，我不知道如何调用该视图并且我已经阅读了许多其他帖子在这里，但我似乎无法弄清楚。我希望你们能帮助我。感谢您的时间。

我还使用具有以下内容的情节提要：

标签栏控制器（2 个图标）：然后从那里拆分为第一个视图控制器，然后拆分为导航控制器。从导航控制器，它连接到网格视图控制器（我希望按钮打开），然后从网格视图控制器连接到详细视图连接。如果可以的话，请帮助我。如果它对您有帮助，我会按照此处找到的指南[http://mobile.tutsplus.com/tutorials/iphone/design-build-a-small-business-app-custom-detail-views/](http://mobile.tutsplus.com/tutorials/iphone/design-build-a-small-business-app-custom-detail-views/)

编辑：我已经添加了下面的代码，这样对你们来说更容易。

我现在终于看到了，原因是因为我使用的是“添加评论”而不是回答问题。

这就是我在 FirstViewController.h 中所拥有的

```
-(void)pushnext; 
```

然后我在 FirstViewController.m 中有我的按钮

```
self.roundButton = [self createButtonWithPicture:CGRectMake(110, 200, 100, 100) andLabel:@""];
[self.view addSubview:roundButton];

[self.roundButton addTarget:self action:@selector(pushnext:) forControlEvents:UIControlEventTouchUpInside]; 
```

同样在 FirstViewController.m 内部，我有我想用我的按钮打开新视图的实现：

```
-(void)pushnext{
[UIView transitionFromView:contact toView:cable duration:1.0 options UIViewAnimationOptionTransitionFlipFromLeft completion:^(BOOL finished){
    [contact release];
   }]; 
```

从那里我希望方法 pushnext 为我打开该视图，但我似乎无法得到它。我在应用程序加载后弹出的第一个屏幕中设置了按钮，我不知道那个视图叫什么，所以我在我的代码中称它为联系人，我希望它打开包含所有GridViewController.m 中包含的信息我只是不知道该怎么做。您建议使用 segue 来连接它们，但我应该如何将 segue 连接到我的按钮。我还有一个问题，我的按钮不是通过 IB 以编程方式完成的。谢谢你的时间，我希望你能帮助我。再次感谢你，我很绝望，因为我已经被困了好几天，试图通过阅读和示例来弄清楚，但我就是不明白。我还附上了我的故事板的图片。[http://i.stack.imgur.com/YKs1o.png](http://i.stack.imgur.com/YKs1o.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T21:55:45.327

您可以通过 Ctrl+从 VIEW CONTROLLER 图标拖动到下一个视图来在情节提要中创建转场。单击 segue 并在属性检查器中为其命名。

现在在您按下按钮的代码中，只需调用： [self performSegueWithIdentifier:@"segueName"] 它将执行到下一个视图的 segue。

从属性检查器中选择您的动画类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:19:57.097

本教程应该可以帮助您：

[http://www.scott-sherwood.com/?p=219](http://www.scott-sherwood.com/?p=219)

它几乎准确地解释了你需要什么。您创建一个新视图（在您的情况下，您可以只使用现有的视图），然后为该视图创建一个 segue。祝你好运。

顺便说一句，发布代码将使每个人都能更好地帮助您...

![在此处输入图像描述](../Images/6f9d33fa2968d3b58e1d4a982fe4b581.png)

# jquery - Jquery在类中淡入淡出

> ID：11439799
> 
> 赞同：2
> 
> 时间：2012-07-11T19:15:48.013
> 
> 标签：jquery, html, css

是否有某种方式可以使用fadeIn 方法淡入一个类。我试过了 ....

`$(".ipv4val").removeClass("bad").fadeIn("slow")`

....但这无法淡入课程。

有任何想法吗

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:49:46.767

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:22:30.060

[fadeIn() 方法](http://api.jquery.com/fadeIn/)的目的是动画元素的不透明度，你不能动画添加或删除一个类。[您可以使用animate() 方法](http://api.jquery.com/animate/)为某些 css 属性设置动画。

# ruby-on-rails - Rails 在视图中返回奇怪的无效信息，但不在控制台中

> ID：11439804
> 
> 赞同：0
> 
> 时间：2012-07-11T19:16:11.007
> 
> 标签：ruby-on-rails, ruby, activerecord

我知道一个事实（通过控制台检查）输出应该是三首歌曲，但由于某种原因，我不断在每一页中添加第四首歌曲。这首歌在每个场合都是不同的，我很困惑为什么会这样。任何帮助深表感谢！

在我的控制器中

```
 def edit
    @songs = Song.all(order: 'title')
    @song = Song.find(params[:id])
    @setlist = Setlist.find(params[:id])
    @allocations = @setlist.allocations
  end 
```

完整视图代码，按要求：

首先是实际编辑页面的视图：

```
<h1>Edit a Setlist</h1>
<div class="row">
   <div class="span8">
      <%=form_for(@setlist) do|f|%>

         <%=f.label :date, "Set a date" %>
         <span><%=f.date_select :date%><span>

         <%=f.label :morning, "Morning" %>
         <%=f.radio_button :morning, true %>
         <%=f.label :morning, "Evening" %>
         <%=f.radio_button :morning, false %>

         <h2>Library</h2>   

        <div>
          <%= render 'library' %>
          <%= render 'currentSet' %> 
        </div>

         <%=f.submit "Save Setlist", class: "btn btn-large btn-primary" %>
      <% end %>
   </div>
</div> 
```

当前设置的部分（忽略库部分，因为它是一个尚未添加任何内容的嵌套形式）：

```
<div id="currentSet">
   <h2>Current Setlist</h2>
     <table class= "table table-striped table-bordered">
       <thead>
         <th>Title</th>
         <th>Artist</th>
         <th>Root Key</th>
         <th>Remove</th>
       </thead>
       <tbody>
         <% if(@allocations.empty?) %>
            <tr><td>NO SONGS</td></tr>
         <% else %>
            <%= render @allocations %>
         <%end%>    
      </tbody>
     </table>
   </div> 
```

和分配：

```
<tr>
    <td><%= allocation.song.title %></td>
    <td><%= allocation.song.artist %></td>
    <td><%= allocation.song.key %></td>
    <td><%= link_to "Remove Song", allocation, method: :delete %></td>
</tr> 
```

我不确定这是否相关，但我还添加了实际呈现的 html 以供检查：

```
<tr>
    <td>S</td>
    <td>A</td>
    <td>K</td>
    <td><a href="/allocations/7" data-method="delete" rel="nofollow">Remove Song</a>...
</tr><tr>
    <td>S</td>
    <td>A</td>
    <td>K</td>
    <td><a href="/allocations" data-method="delete" rel="nofollow">Remove Song</a></td>
</tr> 
```

我发现奇怪的部分是最后一个条目与所有其他条目的不同之处在于该 url 没有分配 ID，即倒数第二个中的 /allocations/9 与最后一个中的 /allocations。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:57:25.203

只是为了关闭这个：

```
 def edit
    @songs = Song.all(order: 'title')
    @song = Song.find(params[:id])
    @setlist = Setlist.find(params[:id])
    @allocations = @setlist.allocations
  end 
```

在您的 Song 和 Setlist 查找器中使用适当的 :id（即不是同一个）。

# php - 我应该使用哪个行尾字符？

> ID：11439809
> 
> 赞同：0
> 
> 时间：2012-07-11T19:16:14.230
> 
> 标签：php, mysql

我有一页带有 textarea 的内容保存到数据库中。
内容如下所示：

```
before
--------------
after 
```

现在我需要将文本拆分为“之前”和“之后” - 没有任何换行符。

所以我的问题是：
EOL 字符取决于什么？
a) 在平台上用户正在运行
b) 在 PHP 服务器的平台上
c) 在 DB 服务器的平台上

有没有更好的跨平台解决方案？

```
$string_exploded = explode( "\n". $delimiter. "\n", $string );

if( count($string_exploded) === 1 )
{
    $string_exploded = explode( "\r\n". $delimiter. "\r\n", $string );
} 
```

谢谢大家的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:17:20.460

你应该使用`PHP_EOL`. 这将符合机器的正确行尾。

如果您只是从数据库中提取数据，那么您应该使用加入它们时使用的相同角色进行爆炸。

即使您担心字符串末尾有空格，也请在`trim`之后使用以对自己感到满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:32:37.383

如果您不想担心数据库中可能出现哪些行尾，另一种解决方案是使用[preg_split()](http://www.php.net/manual/en/function.preg-split.php)代替。

像这样的东西：

```
$string_exploded = preg_split('/(\\n|\\r\\n)' . $delimiter . '(\\n|\\r\\n)/', $string); 
```

这有一个额外的好处，`PREG_SPLIT_NO_EMPTY`如果您的数据可能包含没有数据的双分隔符，您可以使用它自动丢弃任何空条目。

# c# - 在带有图文字幕的文件上使用 ffprobe 时程序挂起

> ID：11439810
> 
> 赞同：2
> 
> 时间：2012-07-11T19:16:23.367
> 
> 标签：c#, ffmpeg, ffprobe

在包含图文电视字幕的 MKV 文件上运行 ffprobe 时出现问题。代码位于 C# 库中，适用于其他 MKV 文件。

运行最新：

```
ffprobe -v

ffprobe version N-42347-g299387e Copyright (c) 2007-2012 the FFmpeg developers
  built on Jul  8 2012 15:44:54 with gcc 4.7.1 
```

代码：

```
string args = string.Format("-show_format -show_streams \"{0}\"", FileName);

Process p = new Process();
p.StartInfo = new ProcessStartInfo(FFPROBE_PATH);
p.StartInfo.Arguments = args;
p.StartInfo.CreateNoWindow = true;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.WorkingDirectory = System.IO.Directory.GetCurrentDirectory();
p.Start();

while (!p.HasExited)
{
    System.Threading.Thread.Sleep(100);
}

string output = p.StandardOutput.ReadToEnd().Replace("\r\n", "\n"); 
```

文件名具有 UNC 路径 - 尝试使用 FileName 参数但出现错误，因此通过参数传递文件名。

如果我运行以下命令行：

> ffprobe -show_format -show_streams "\\192.168.10.1\content\Breakfast At Tiffany 的示例 preview.mkv"

我得到以下输出（注意错误 - “不支持的编解码器带有 id ...”）：

```
ffprobe -show_format -show_streams "\\192.168.10.1\content\Breakfast At Tiffany's sample preview.mkv"

ffprobe version N-42347-g299387e Copyright (c) 2007-2012 the FFmpeg developers
  built on Jul  8 2012 15:44:54 with gcc 4.7.1
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-runtime-cpudetect --enable-avisynth --enable-bzlib --enable-fr
ei0r --enable-libass --enable-libcelt --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libfreetype --enable-libgsm --enable-li
bmp3lame --enable-libnut --enable-libopenjpeg --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libutv
ideo --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxavs --enable-libxvid --e
nable-zlib
  libavutil      51\. 64.100 / 51\. 64.100
  libavcodec     54\. 33.100 / 54\. 33.100
  libavformat    54\. 15.102 / 54\. 15.102
  libavdevice    54\.  1.100 / 54\.  1.100
  libavfilter     3\.  1.100 /  3\.  1.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, matroska,webm, from 'c:\dev\content\Breakfast At Tiffany's sample preview.mkv':
  Metadata:
    creation_time   : 2011-12-14 21:27:01
  Duration: 00:01:02.77, start: 0.000000, bitrate: 4071 kb/s
    Stream #0:0: Video: h264 (High), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 23.98 fps, 23.98 tbr, 1k tbn, 47.95 tbc (default)
    Metadata:
      title           : x264   1920x1080   Bitrate=4776 kbps   AvQuant=21.406   Rip by ShivaShanti
    Stream #0:1(eng): Audio: ac3, 48000 Hz, 5.1(side), s16, 448 kb/s (default)
    Metadata:
      title           : English Ac3 5.1 chnls 448 kbps
    Stream #0:2(ita): Audio: ac3, 48000 Hz, stereo, s16, 224 kb/s
    Metadata:
      title           : Italian Ac3 2.0 chnls 224  kbps
    Stream #0:3(eng): Subtitle: text (default)
    Metadata:
      title           : english
    Stream #0:4(ita): Subtitle: text
    Metadata:
      title           : italian
    Stream #0:5(dan): Subtitle: text
    Metadata:
      title           : danish
    Stream #0:6(dut): Subtitle: text
    Metadata:
      title           : dutch
    Stream #0:7(fin): Subtitle: text
    Metadata:
      title           : finnish
    Stream #0:8(fre): Subtitle: text
    Metadata:
      title           : french
    Stream #0:9(ger): Subtitle: text
    Metadata:
      title           : german
    Stream #0:10(nor): Subtitle: text
    Metadata:
      title           : norwegian
    Stream #0:11(spa): Subtitle: text
    Metadata:
      title           : spanish
    Stream #0:12(swe): Subtitle: text
    Metadata:
      title           : swedish
    Stream #0:13(eng): Subtitle: text
    Metadata:
      title           : english hearig impaired
Unsupported codec with id 94210 for input stream 3
Unsupported codec with id 94210 for input stream 4
Unsupported codec with id 94210 for input stream 5
Unsupported codec with id 94210 for input stream 6
Unsupported codec with id 94210 for input stream 7
Unsupported codec with id 94210 for input stream 8
Unsupported codec with id 94210 for input stream 9
Unsupported codec with id 94210 for input stream 10
Unsupported codec with id 94210 for input stream 11
Unsupported codec with id 94210 for input stream 12
Unsupported codec with id 94210 for input stream 13
[STREAM]
index=0
codec_name=h264
codec_long_name=H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10
profile=High
codec_type=video
codec_time_base=1001/48000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
width=1920
height=1080
has_b_frames=2
sample_aspect_ratio=1:1
display_aspect_ratio=16:9
pix_fmt=yuv420p
level=41
timecode=N/A
is_avc=1
nal_length_size=4
id=N/A
r_frame_rate=24000/1001
avg_frame_rate=24000/1001
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:title=x264   1920x1080   Bitrate=4776 kbps   AvQuant=21.406   Rip by ShivaShanti
[/STREAM]
[STREAM]
index=1
codec_name=ac3
codec_long_name=ATSC A/52A (AC-3)
profile=unknown
codec_type=audio
codec_time_base=1/48000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
sample_fmt=s16
sample_rate=48000
channels=6
bits_per_sample=0
dmix_mode=-1
ltrt_cmixlev=-1.000000
ltrt_surmixlev=-1.000000
loro_cmixlev=-1.000000
loro_surmixlev=-1.000000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=448000
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=eng
TAG:title=English Ac3 5.1 chnls 448 kbps
[/STREAM]
[STREAM]
index=2
codec_name=ac3
codec_long_name=ATSC A/52A (AC-3)
profile=unknown
codec_type=audio
codec_time_base=1/48000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
sample_fmt=s16
sample_rate=48000
channels=2
bits_per_sample=0
dmix_mode=-1
ltrt_cmixlev=-1.000000
ltrt_surmixlev=-1.000000
loro_cmixlev=-1.000000
loro_surmixlev=-1.000000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=224000
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=ita
TAG:title=Italian Ac3 2.0 chnls 224  kbps
[/STREAM]
[STREAM]
index=3
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=eng
TAG:title=english
[/STREAM]
[STREAM]
index=4
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=ita
TAG:title=italian
[/STREAM]
[STREAM]
index=5
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=dan
TAG:title=danish
[/STREAM]
[STREAM]
index=6
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=dut
TAG:title=dutch
[/STREAM]
[STREAM]
index=7
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=fin
TAG:title=finnish
[/STREAM]
[STREAM]
index=8
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=fre
TAG:title=french
[/STREAM]
[STREAM]
index=9
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=ger
TAG:title=german
[/STREAM]
[STREAM]
index=10
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=nor
TAG:title=norwegian
[/STREAM]
[STREAM]
index=11
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=spa
TAG:title=spanish
[/STREAM]
[STREAM]
index=12
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=swe
TAG:title=swedish
[/STREAM]
[STREAM]
index=13
codec_name=unknown
codec_long_name=unknown
profile=unknown
codec_type=subtitle
codec_time_base=1/1000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
id=N/A
r_frame_rate=0/0
avg_frame_rate=0/0
time_base=1/1000
start_time=0.000000
duration=N/A
bit_rate=N/A
nb_frames=N/A
nb_read_frames=N/A
nb_read_packets=N/A
TAG:language=eng
TAG:title=english hearig impaired
[/STREAM]
[FORMAT]
filename=c:\dev\content\Breakfast At Tiffany's sample preview.mkv
nb_streams=14
format_name=matroska,webm
format_long_name=Matroska/WebM file format
start_time=0.000000
duration=62.776000
size=31947628
bit_rate=4071317
TAG:creation_time=2011-12-14 21:27:01
[/FORMAT] 
```

我的问题是，该过程似乎挂起。我去掉了“CreateNoWindow”选项，当然，我在屏幕上看到了一个大的空白窗口，通常只是在普通文件上闪烁。但是，对于图文电视字幕文件，它仍然存在。如果我手动关闭它，程序会继续，我似乎得到了我想要的输出。

所以我的问题是，我怎样才能进一步调试它，找出为什么会挂起以及如何处理错误（或简单地忽略它）并继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:39:17.053

啊，找到[另一篇](https://stackoverflow.com/questions/206323/how-to-execute-command-line-in-c-get-std-out-results)回答我的问题的文章。看来我一定遇到了僵局。现在工作正常！

修改后的代码：

```
string args = string.Format("-show_format -show_streams \"{0}\"", FileName);

Process p = new Process();
p.StartInfo = new ProcessStartInfo(FFPROBE_PATH);
p.StartInfo.Arguments = args;
p.StartInfo.CreateNoWindow = true;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.WorkingDirectory = System.IO.Directory.GetCurrentDirectory();
p.Start();

string output = p.StandardOutput.ReadToEnd().Replace("\r\n", "\n");
p.WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:42:54.637

当您同时重定向 StandardOutput 和 StandardError 时，您可能会遇到死锁，请参阅[http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandarderror.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandarderror.aspx)

我已经尝试了两种流的同步和异步读取的几种组合，但迄今为止无法获得完美运行的代码。

所以现在我只通过重定向 StandardOutput 或 StandardError 来解决这个问题，但从不重定向两者。

# sql - Oracle 格式化日期间隔

> ID：11439811
> 
> 赞同：1
> 
> 时间：2012-07-11T19:16:25.397
> 
> 标签：sql, oracle

我正在尝试创建一个查询来为我的网站生成统计数据，并且我试图弄清楚如何每隔半小时制作一个查询。

基于我偶然发现的另一个问题，我想出了这个：

```
SELECT count(*), dt FROM (
  (SELECT TO_CHAR(TRACK_DATETIME,'dd/mm/yyyy hh24') || ':' || DECODE(TRUNC(to_number(to_char(TRACK_DATETIME,'mi'))/30),0,'00','30') as DT FROM tbl_stat)
)
group by dt 
```

这很好用，唯一的例外是没有活动的间隔根本不会出现。有没有办法显示所有半小时间隔（甚至是空的？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:23:42.933

这里的技巧是生成所有间隔的列表，然后对表进行外部连接以查看每个间隔中有多少条记录。

假设您有一个查询范围（这里我设置了`varchar2`绑定变量，以便我可以在 SQL*Plus 中轻松运行它，您可以从您的 Web 客户端执行其他操作，例如`?`JDBC），您可以执行类似的操作：

```
var start_time varchar2(16);
var end_time varchar2(16);

exec :start_time := '12/07/2012 08:00:00';
exec :end_time := '12/07/2012 12:00:00';

select start_time + (level - 1)/48 as period_start,
    start_time + level/48 - interval '1' second as period_end
from (
    select to_date(:start_time, 'DD/MM/YYYY HH24:MI:SS') start_time,
        to_date(:end_time, 'DD/MM/YYYY HH24:MI:SS') end_time
    from dual
)
connect by start_time + (level - 1)/48 < end_time; 
```

它会生成 08:00 到 12:00 之间所有半小时时段的列表：

```
PERIOD_START        PERIOD_END
------------------- -------------------
12/07/2012 08:00:00 12/07/2012 08:29:59
12/07/2012 08:30:00 12/07/2012 08:59:59
12/07/2012 09:00:00 12/07/2012 09:29:59
12/07/2012 09:30:00 12/07/2012 09:59:59
12/07/2012 10:00:00 12/07/2012 10:29:59
12/07/2012 10:30:00 12/07/2012 10:59:59
12/07/2012 11:00:00 12/07/2012 11:29:59
12/07/2012 11:30:00 12/07/2012 11:59:59 
```

然后您可以将其用作 CTE 或子查询并在您的真实表中查找匹配的记录：

```
with tmp_tab as (
    select start_time + (level - 1)/48 as period_start,
        start_time + level/48 - interval '1' second as period_end
    from (
        select to_date(:start_time, 'DD/MM/YYYY HH24:MI:SS') start_time,
            to_date(:end_time, 'DD/MM/YYYY HH24:MI:SS') end_time
        from dual
    )
    connect by start_time + (level - 1)/48 < end_time
)
select to_char(tt.period_start, 'DD/MM/YYYY HH24:MI') dt,
    count(ts.track_datetime)
from tmp_tab tt
left join tbl_stat ts
on ts.track_datetime between tt.period_start and tt.period_end
group by tt.period_start
order by tt.period_start; 
```

使用只有几条记录的虚拟表，这给出：

```
DT               COUNT(TS.TRACK_DATETIME)
---------------- ------------------------
12/07/2012 08:00                        0
12/07/2012 08:30                        0
12/07/2012 09:00                        1
12/07/2012 09:30                        2
12/07/2012 10:00                        0
12/07/2012 10:30                        1
12/07/2012 11:00                        0
12/07/2012 11:30                        0 
```

# ruby-on-rails - Rails 3：如何为有父亲、母亲和最多两个监护人的孩子建立协会？

> ID：11439812
> 
> 赞同：0
> 
> 时间：2012-07-11T19:16:28.277
> 
> 标签：ruby-on-rails, ruby, associations

如何为有父亲、母亲和最多两名监护人的孩子建立入学协会？

我知道有很多方法可以设置它，但你会怎么做呢？我不太确定如何设置监护人。我目前正在考虑两种选择，也许你可以推荐第三种。

选项1

```
Enrollments
belongs_to child
belongs_to father
belongs_to mother

Children
has_one enrollment
has_one father
has_one mother

Father
has_many enrollments
has_many children

Mother
has_many enrollments
has_many children 
```

选项 2

```
Enrollments
has_and_belongs_to_many adults

Adults
has_and_belongs_to_many enrollments
has_many children
# would have a "relationship: father, mother, guardian"

Children
has_one enrollment
has_one father
has_one mother 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:30:53.707

如果我是你，我会检查 has_many :through。

成年人

```
has_many children, :through => enrollments 
```

孩子们

```
has many adults, :through => enrollments 
```

# jquery - ASP.NET 按钮不会引发回发

> ID：11439817
> 
> 赞同：1
> 
> 时间：2012-07-11T19:16:47.587
> 
> 标签：jquery, asp.net, postback

**我的情况**：

我有一个 ASP.NET 按钮的问题，当我单击该按钮时它不会引发回发。

我有一个按钮，其 ID 为“PurchaseBtn”。单击此按钮时，我使用 jQuery 打开一个名为“PurchaseDiv”的面板。

不起作用的按钮是“PutInBasket”按钮。当我点击按钮时什么都没有发生，当然也没有回发。

我试过添加一个 OnClientClick="return true;" ，然后发生回发 - 但没有运行代码隐藏。因此，这也不是一个解决方案。

**代码**

我有以下代码：

```
 <asp:Button ID="PurchaseBtn" runat="server" Text="Køb" />
<asp:Panel ID="PurchaseDiv" runat="server" CssClass="Popup">
<asp:HyperLink id="PopupCloseLnk" runat="server" CssClass="popupClose">x</asp:HyperLink>  

    <h3>Køb <asp:Label ID="LinkTypeName" runat="server"></asp:Label></h3>
    <p>Ønsket URL:<br />
        <asp:TextBox ID="UrlBox" runat="server" Width="250"></asp:TextBox>
        <asp:RequiredFieldValidator ID="UrlReq" runat="server" ControlToValidate="UrlBox" Text="*" ForeColor="Red"></asp:RequiredFieldValidator>
    </p>

    <p>Antal:<br />
        <asp:Textbox ID="QuantityBox" runat="server"></asp:Textbox>
        <asp:NumericUpDownExtender ID="QuantityExtender" runat="server"
        Width="100"
        TargetControlID="QuantityBox"
        Minimum="1"
        Maximum="200">
    </asp:NumericUpDownExtender>
    </p>
    <br />
    <p>Anchor tekster<br />
        <asp:TextBox ID="AnchorTexts" runat="server" TextMode="MultiLine">
        </asp:TextBox>
        <asp:TextBoxWatermarkExtender ID="AnchorTextsExtender" runat="server" WatermarkCssClass="watermarked" 
        TargetControlID="AnchorTexts" WatermarkText="Ikke påkrævet at udfylde" />
    </p> 

    <asp:Button ID="PutInBasket" runat="server" Text="Put i kurv" 
        onclick="PutInBasket_Click" />

</asp:Panel>
<asp:Panel id="bgPopup" runat="server" CssClass="bgPopup"></asp:Panel> 
```

以及以下 jQuery：

```
<script type="text/javascript">
    function loadPopup() {
        //loads popup only if it is disabled  
        if ($('#<%=bgPopup.ClientID %>').data("state") == 0) {
            $('#<%=bgPopup.ClientID %>').css({
                "opacity": "0.7"
            });
            $('#<%=bgPopup.ClientID %>').fadeIn("medium");
            $('#<%=PurchaseDiv.ClientID%>').fadeIn("medium");
            $('#<%=bgPopup.ClientID %>').data("state", 1);
        }
    }

    function disablePopup() {
        if ($('#<%=bgPopup.ClientID %>').data("state") == 1) {
            $('#<%=bgPopup.ClientID %>').fadeOut("medium");
            $('#<%=PurchaseDiv.ClientID %>').fadeOut("medium");
            $('#<%=bgPopup.ClientID %>').data("state", 0);
        }
    }

    function centerPopup() {
        var winw = $(window).width();
        var winh = $(window).height();
        var popw = $('#<%=PurchaseDiv.ClientID%>').width();
        var poph = $('#<%=PurchaseDiv.ClientID%>').height();
        $('#<%=PurchaseDiv.ClientID%>').css({
            "position": "absolute",
            "top": winh / 2 - poph / 2,
            "left": winw / 2 - popw / 2
        });
        //IE6  
        $('#<%=bgPopup.ClientID %>').css({
            "height": winh
        });
    }

    $(document).ready(function () {
        var mouse_is_inside = true;

        $('#<%=PurchaseDiv.ClientID%>').hover(function () {
            mouse_is_inside = true;
        }, function () {
            mouse_is_inside = false;
        });

        $("body").mouseup(function () {
            if (!mouse_is_inside) {
                disablePopup();
            } 
        });

        $('#<%=bgPopup.ClientID %>').data("state", 0);
        $('#<%=PurchaseBtn.ClientID%>').click(function () {
            centerPopup();
            loadPopup();
        });

        $('#<%=PopupCloseLnk.ClientID %>').click(function () {
            disablePopup();
        });

        $(document).keypress(function (e) {
            if (e.keyCode == 27) {
                disablePopup();
            }
        });
    });

    $(window).resize(function () {
        centerPopup();
    });  

</script> 
```

**PutInBasket 的代码隐藏**

```
protected void PutInBasket_Click(object sender, EventArgs e) {
    var purchase = BuildPurchase();

    if(SessionManager.Purchases = null)
    {
    SessionManager.Purchases = new Purchase();
    }

    SessionManager.Purchases.AddPurchase(purchase);

    RedirectManager.RedirectToShoppingBasket();} 
```

***HTML 中的标记***

```
 <body>

    <form method="post" action="Default.aspx" onsubmit="javascript:return WebForm_OnSubmit();" id="form1">

<div class="aspNetHidden">

<input type="hidden" name="ToolkitScriptManager1_HiddenField" id="ToolkitScriptManager1_HiddenField" value="" />

<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />

<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />

<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTYyNDIzOTI1MA9kFgJmD2QWAgIDD2QWDAIDDw8WAh4EVGV4dAUMKzQ1IDMxNjkzNDQzZGQCBQ8PFgIeC05hdmlnYXRlVXJsBQt+L09tT3MuYXNweGRkAgcPDxYCHwEFDn4vS29udGFrdC5hc3B4ZGQCCQ9kFgICAQ9kFgJmDxQrAAIPFgQeC18hRGF0YUJvdW5kZx4LXyFJdGVtQ291bnQCAWRkFgJmD2QWAgIBD2QWAmYPZBYCZg9kFgICAQ9kFgJmD2QWAmYPZBYCAgEPZBYCAgEPZBYCZg9kFghmDw8WAh8ABQ1CbG9na29tbWVudGFyZGQCAg8PFgIfAAUJMjksMDAgREtLZGQCAw9kFgICAQ9kFgICAw8PFgIfAAUNQmxvZ2tvbW1lbnRhcmRkAgQPZBYCAgEPDxYCHwAFKTxoMz5CbG9na29tbWVudGFyPC9oMz5iZXNrcml2ZWxzZSBhZiBibG9nZGQCCw8PFgIfAQUVfi9TaG9wcGluZ0Jhc2tldC5hc3B4ZGQCEQ9kFgoCAQ8PFgIfAAUTVmkgbGV2ZXJlcmVyIGFsZHJpZ2RkAgMPDxYCHwAFGVRodWphdmVqIDUgMzY1MCDDmGxzdHlra2VkZAIFDw8WAh8ABQdEZW5tYXJrZGQCCQ8PFgIfAAUMKzQ1IDMxNjkzNDQzZGQCCw8PFgIfAAUIMzQwMTM0MzhkZBgBBTRjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJExpbmtzT3ZlcnZpZXcxJFByb2R1Y3RWaWV3DxQrAA5kZGQCA2RkZBQrAAFkAgFkZGRmAv////8PZD4YJWAdCa4KWNlaqCdSdPimn/D66/4Q39o0LzMUuiwk" />

</div>

<script type="text/javascript">

//<![CDATA[

var theForm = document.forms['form1'];

if (!theForm) {

    theForm = document.form1;

}

function __doPostBack(eventTarget, eventArgument) {

    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {

        theForm.__EVENTTARGET.value = eventTarget;

        theForm.__EVENTARGUMENT.value = eventArgument;

        theForm.submit();

    }

}

//]]>

</script>

<script src="/Client/WebResource.axd?d=OQImHOjbC8T9DkQAEsUir2SbTKmI8ZHSylTzW2Dc_v2PQCtNyS3HT4PJHErgeJx_VIraTiSecUhyJJm6dR8vatqP9g2Jc9yVKn3Q2ZgQiXU1&amp;t=634685062757536216" type="text/javascript"></script>

<script src="/Client/ScriptResource.axd?d=wBt9eolujUDT1pwJVXfdkbPt3q6kho05pcKqWgTyNHdCTBOV8kYqK-XubOHF3qVWllTVqvuXXPnc41-lbrsFIHVDLKwJaNX7FkZ6ir8UIWzkCnSjfN0j1OMJiUgdaTA6xM6LXQF8MVlGpJHoPSvyxzKcilhfqsLP0c-fl2Lt0Mc1&amp;t=150492e7" type="text/javascript"></script>

<script src="/Client/ScriptResource.axd?d=UP06sTpweppdnIadbdu8iZGs1AZaASdPaGRzQUw527ewVZ7zBazaEOYbnh_jf7YtCQMLSB2Hvr25yeSR5oCk-0zjwGmQ19sQWp6ex8TA4DnvWtZYtv58zaC8COurXpj3OrICAaySLoXeOt0r12dnpQ2&amp;t=fffffffffd88dfc4" type="text/javascript"></script>

<script type="text/javascript">

//<![CDATA[

if (typeof(Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.');

//]]>

</script>

<script src="/Client/ScriptResource.axd?d=vFgiOpDr8tKXR2y_94kZYrOfpgLUdhZXjzsbRg0Z4ZyFIo0hRl2M_hrQvnzhD4-5xANDsYczXpx031bvwW78vpfjOADpPKmQJYO45cCutF_q9BnxFi6v1fdC4snZUAlirCG8fNtXsSXIc2nxdEeIEQ2&amp;t=fffffffffd88dfc4" type="text/javascript"></script>

<script src="/Client/Default.aspx?_TSM_HiddenField_=ToolkitScriptManager1_HiddenField&amp;_TSM_CombinedScripts_=%3b%3bAjaxControlToolkit%2c+Version%3d4.1.60623.0%2c+Culture%3dneutral%2c+PublicKeyToken%3d28f01b0e84b6d53e%3aen-US%3a187c1d17-2715-476f-9eeb-4fd46e2849ea%3ade1feab2%3af9cec9bc%3aee910bbe%3a35576c48" type="text/javascript"></script>

<script type="text/javascript">

//<![CDATA[

function WebForm_OnSubmit() {

null;if (typeof(ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) return false;

return true;

}

//]]>

</script>

<div class="aspNetHidden">

    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWBwKRoIbQCQLNv7y8AQL3ypGNDwLD/ouZAwKcyMzCBgKB+6+CBQL7o4C5BYHZ9ukNCXioJ4HgOg0byK4OWNHAc/xaAvgFOzmITJSc" />

</div>

    <script type="text/javascript">

//<![CDATA[

Sys.WebForms.PageRequestManager._initialize('ctl00$ToolkitScriptManager1', 'form1', [], [], [], 90, 'ctl00');

//]]>

</script>

    <div class="WrapperContent">

        <div class="Maincontent">

            <table>

                <tr>

                    <td class="MainContentTd">

            <table id="ContentPlaceHolder1_LinksOverview1_ProductView_tblProducts" cellpadding="2" cellspacing="10">

        <tr id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_productRow">

        <td id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_Td1_0" style="vertical-align:top; text-align:left; height:100%; padding:8px; width:205px;">

        <div id="sub">

        <div id="category">

            <br />

                <div id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_PutProductHereDiv_0">

<script type="text/javascript">

    $(document).ready(function () {

        $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_questionMark_0').mouseover(function (e) {

            $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_HintDiv_0').show();

        });

        $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_questionMark_0').mouseleave(function (e) {

            $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_HintDiv_0').hide();

        });

    });

</script>

<h3>

    <span id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_LinkTypeDescription_0">Blogkommentar</span>

    <span id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_questionMark_0" class="questionMarkLayout">(?)</span></h3>

<table>

    <tr>

        <td>

            <span id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PriceLbl_0">29,00 DKK</span>

        </td>

        <td>

<script type="text/javascript">

    function loadPopup() {

        //loads popup only if it is disabled  

        if ($('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_bgPopup_0').data("state") == 0) {

            $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_bgPopup_0').css({

                "opacity": "0.7"

            });

            $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_bgPopup_0').fadeIn("medium");

            $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PurchaseDiv_0').fadeIn("medium");

            $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_bgPopup_0').data("state", 1);

        }

    }

    function disablePopup() {

        if ($('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_bgPopup_0').data("state") == 1) {

            $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_bgPopup_0').fadeOut("medium");

            $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PurchaseDiv_0').fadeOut("medium");

            $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_bgPopup_0').data("state", 0);

        }

    }

    function centerPopup() {

        var winw = $(window).width();

        var winh = $(window).height();

        var popw = $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PurchaseDiv_0').width();

        var poph = $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PurchaseDiv_0').height();

        $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PurchaseDiv_0').css({

            "position": "absolute",

            "top": winh / 2 - poph / 2,

            "left": winw / 2 - popw / 2

        });

        //IE6  

        $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_bgPopup_0').css({

            "height": winh

        });

    }

    $(document).ready(function () {

        var mouse_is_inside = true;

        $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PurchaseDiv_0').hover(function () {

            mouse_is_inside = true;

        }, function () {

            mouse_is_inside = false;

        });

        $("body").mouseup(function () {

            if (!mouse_is_inside) {

                disablePopup();

            } 

        });

        $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_bgPopup_0').data("state", 0);

        $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PurchaseBtn_0').click(function () {

            centerPopup();

            loadPopup();

        });

        $('#ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PopupCloseLnk_0').click(function () {

            disablePopup();

        });

        $(document).keypress(function (e) {

            if (e.keyCode == 27) {

                disablePopup();

            }

        });

    });

    $(window).resize(function () {

        centerPopup();

    });  

</script>

<input type="submit" name="ctl00$ContentPlaceHolder1$LinksOverview1$ProductView$ctrl0$ctl01$ctl00$PurchaseButton1$PurchaseBtn" value="Køb" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$LinksOverview1$ProductView$ctrl0$ctl01$ctl00$PurchaseButton1$PurchaseBtn&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PurchaseBtn_0" />

<div id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PurchaseDiv_0" class="Popup">

<a id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PopupCloseLnk_0" class="popupClose">x</a>  

    <h3>Køb <span id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_LinkTypeName_0">Blogkommentar</span></h3>

    <p>Ønsket URL:<br />

        <input name="ctl00$ContentPlaceHolder1$LinksOverview1$ProductView$ctrl0$ctl01$ctl00$PurchaseButton1$UrlBox" type="text" id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlBox_0" style="width:250px;" />

        <span id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlReq_0" style="color:Red;visibility:hidden;">*</span>

    </p>

    <p>Antal:<br />

        <input name="ctl00$ContentPlaceHolder1$LinksOverview1$ProductView$ctrl0$ctl01$ctl00$PurchaseButton1$QuantityBox" type="text" id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_QuantityBox_0" />

    </p>

    <br />

    <p>Anchor tekster<br />

        <textarea name="ctl00$ContentPlaceHolder1$LinksOverview1$ProductView$ctrl0$ctl01$ctl00$PurchaseButton1$AnchorTexts" rows="2" cols="20" id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_AnchorTexts_0">

</textarea>

        <input type="hidden" name="ctl00$ContentPlaceHolder1$LinksOverview1$ProductView$ctrl0$ctl01$ctl00$PurchaseButton1$AnchorTextsExtender_ClientState" id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_AnchorTextsExtender_ClientState_0" />

    </p> 

    <input type="submit" name="ctl00$ContentPlaceHolder1$LinksOverview1$ProductView$ctrl0$ctl01$ctl00$PurchaseButton1$PutInBasket" value="Put i kurv" id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_PutInBasket_0" />

                </div>

<div id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_bgPopup_0" class="bgPopup">

                </div>   

        </td>

    </tr>

</table>

<br />

<div id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_HintDiv_0" class="HintDiv">

    <span id="ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_DescriptionLbl_0"><h3>Blogkommentar</h3>beskrivelse af blog</span>

                </div>

            </div>

            <br />

            </div>

        </td>

        </tr>

</table>

                    </td>

                    <td class="RightContentTd">

                        <br />

                        <br />

                    </td>

                </tr>

            </table>

</div>

        </div>

    </div>

<script type="text/javascript">

//<![CDATA[

var Page_Validators =  new Array(document.getElementById("ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlReq_0"));

//]]>

</script>

<script type="text/javascript">

//<![CDATA[

var ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlReq_0 = document.all ? document.all["ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlReq_0"] : document.getElementById("ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlReq_0");

ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlReq_0.controltovalidate = "ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlBox_0";

ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlReq_0.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";

ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlReq_0.initialvalue = "";

//]]>

</script>

<script type="text/javascript">

//<![CDATA[

(function() {var fn = function() {$get("ToolkitScriptManager1_HiddenField").value = '';Sys.Application.remove_init(fn);};Sys.Application.add_init(fn);})();

var Page_ValidationActive = false;

if (typeof(ValidatorOnLoad) == "function") {

    ValidatorOnLoad();

}

function ValidatorOnSubmit() {

    if (Page_ValidationActive) {

        return ValidatorCommonOnSubmit();

    }

    else {

        return true;

    }

}

document.getElementById('ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlReq_0').dispose = function() {

    Array.remove(Page_Validators, document.getElementById('ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_UrlReq_0'));

}

Sys.Application.add_init(function() {

    $create(Sys.Extended.UI.NumericUpDownBehavior, {"Maximum":200,"Minimum":1,"RefValues":"","ServiceDownMethod":"","ServiceDownPath":"/Client/Default.aspx","ServiceUpMethod":"","Tag":"","TargetButtonDownID":"","TargetButtonUpID":"","Width":100,"id":"ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_QuantityExtender_0"}, null, null, $get("ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_QuantityBox_0"));

});

Sys.Application.add_init(function() {

    $create(Sys.Extended.UI.TextBoxWatermarkBehavior, {"ClientStateFieldID":"ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_AnchorTextsExtender_ClientState_0","WatermarkCssClass":"watermarked","WatermarkText":"Ikke påkrævet at udfylde","id":"ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_AnchorTextsExtender_0"}, null, null, $get("ContentPlaceHolder1_LinksOverview1_ProductView_ctrl0_ctl00_0_PurchaseButton1_0_AnchorTexts_0"));

});

//]]>

</script>

</form>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:51:32.793

您的问题出在此功能上

```
function WebForm_OnSubmit() {

null;if (typeof(ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) 
     return false;

return true;

} 
```

此函数返回 false 并且不让表单提交。为什么这个 return false ？我不知道，请检查您的代码并修复这部分验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:22:24.017

即使在 PutInBasket_Click 背后的代码中也有 onclick 吗？既然你说没有运行后面的代码；应该是这样的..

```
protected void PutInBasket_Click(object sender, EventArgs e)
{
    // Put code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T21:00:01.557

我认为只是你的“if”语句需要一个双等号。

```
if(SessionManager.Purchases == null) 
```

# android - 调试问题 (Android Eclipse)

> ID：11439821
> 
> 赞同：13
> 
> 时间：2012-07-11T19:16:59.180
> 
> 标签：android, eclipse, debugging, android-4.2-jelly-bean

我有一个问题，当我切换到 DDMS 视图并查看 Logcat 时，一切都是黄色的。所有行都是黄色的，Time、PID、Application 和 Tag 都显示每行的问号。这使得 Logcat 毫无用处，并且难以调试。过去一切都很好，我不知道为什么会这样。

我正在使用 4.1 版本的 Verizon Galaxy Nexus（可能是问题所在？）。

我也是一个初学者（可能非常明显）。

谢谢你的帮助。

已解决：显然我必须更新 eclipse 和 SDK（我觉得很愚蠢）。感谢所有花时间捆绑帮助我的人。

（它不会让我回答我自己的问题，因为我是新手）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-16T12:05:45.170

Updating your Eclipse and Android SDK will likely solve the problem.

Here's a screenshot, I have lived this too.

![screenie](../Images/fdb0e93f3228965acf6111b248c6e146.png)

I'm just posting this so you could mark it as an answer for people who may have encountered this situation too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T20:21:13.697

我为同样的问题苦苦挣扎了好几天。我的手机上有果冻豆。

谢谢Revolutionair，一旦我对Android SDK、ADT、AVD管理器进行了更新，我似乎就解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:35:32.750

听起来您将过滤器设置为“警告”。确保将其设置为“详细”并确保您没有打开任何其他过滤器。如果这样做，在左侧突出显示“所有消息”并且没有设置任何其他过滤器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:35:50.527

看看这张图片：

[这里](http://thiranjith.com/wp-content/uploads/2010/02/step4_selectingddms.png)

看看他是如何选择“W”的。将其更改为“V”

# c# - 从 Initializationstring 中提取值并作为键值对返回

> ID：11439827
> 
> 赞同：0
> 
> 时间：2012-07-11T19:17:25.670
> 
> 标签：c#, .net, dictionary, initialization

我在下面有一部分应用程序初始化字符串：

```
<Controls>
  <HtmlElement name="lnkLogIn" type="HtmlElement">
    <AttributeMatchPath matchtype="equals">
      <href>JavaScript:void(0)</href>
      <id>s_swepi_22</id>
    </AttributeMatchPath>
  </HtmlElement>
  <InputElement name="tbPassword" type="InputElement">
    <AttributeMatchPath matchtype="equals">
      <id>s_swepi_2</id>
    </AttributeMatchPath>
  </InputElement>
  <InputElement name="tbUserID" type="InputElement">
    <AttributeMatchPath matchtype="equals">
      <id>s_swepi_1</id>
    </AttributeMatchPath>
  </InputElement>
</Controls> 
```

我想要在后面的代码中做的是一个函数，它获取每个控件的 Inputelement 名称和 id 作为键值对，并返回一个字典对象或类似的东西，我们可以从中提取键值对信息。

这基本上是为了删除 ID 值的硬编码......所以从初始化字符串中获取元素名和 id 并将它们存储为键值对的通用解决方案将非常棒......在此先感谢 :)

PS：使用C#......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:41:00.843

OK完成.... ：）

这就是我所做的：使用 system.xml.linq 功能：

这是工作代码：

```
using System.Linq;
using System.Xml.Linq;

static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    public static void Main ( )
    {
        var xDoc = XElement.Load ( "ApplicationInit.xml" );
        var appSettingsDictionary = (xDoc.Descendants("InputElement")
            .Select ( item => new 
                             { 
                                 Key = item.Attribute("name").Value,
                                 Value = item.Descendants("id").First().Value 
                             }
                    )
                ).ToDictionary ( item => item.Key, item => item.Value );
    }
} 
```

}

# php - SimpleXML 属性到数组

> ID：11439829
> 
> 赞同：22
> 
> 时间：2012-07-11T19:17:27.470
> 
> 标签：php, arrays, attributes, simplexml

有没有更优雅的方式将 SimpleXML 属性转义到数组？

```
$result = $xml->xpath( $xpath );
$element = $result[ 0 ];
$attributes = (array) $element->attributes();
$attributes = $attributes[ '@attributes' ]; 
```

我真的不想为了提取键/值对而遍历它。我所需要的只是将它放入一个数组中，然后将其传递。我原以为`attributes()`默认情况下会这样做，或者至少可以选择。但是我什至无法在任何地方找到上述解决方案，我必须自己弄清楚。我是不是让这件事复杂化了？

**编辑：**

在确定访问 @attributes 数组是否安全之前，我仍在使用上述脚本。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-03T05:24:16.893

更优雅的方式；它在不使用*$attributes[ '@attributes' ] 的*情况下为您提供相同的结果：

```
$attributes = current($element->attributes()); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-11T19:32:14.003

不要直接读取`'@attributes'`属性，这是供内部使用的。无论如何，`attributes()`已经可以用作数组，而无需“转换”为真正的数组。

例如：

```
<?php
$xml = '<xml><test><a a="b" r="x" q="v" /></test><b/></xml>';
$x = new SimpleXMLElement($xml);

$attr = $x->test[0]->a[0]->attributes();
echo $attr['a']; // "b" 
```

如果你希望它是一个“真正的”数组，你将不得不循环：

```
$attrArray = array();
$attr = $x->test[0]->a[0]->attributes();

foreach($attr as $key=>$val){
    $attrArray[(string)$key] = (string)$val;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-13T08:31:08.903

您可以将整个 xml 文档转换为数组：

```
$array = json_decode(json_encode((array) simplexml_load_string("<response>{$xml}</response>")), true); 
```

有关更多信息，请参阅：[https ://github.com/gaarf/XML-string-to-PHP-array](https://github.com/gaarf/XML-string-to-PHP-array)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-13T12:15:13.800

对我来说，以下方法有效

```
function xmlToArray(SimpleXMLElement $xml)
{
    $parser = function (SimpleXMLElement $xml, array $collection = []) use (&$parser) {
        $nodes = $xml->children();
        $attributes = $xml->attributes();

        if (0 !== count($attributes)) {
            foreach ($attributes as $attrName => $attrValue) {
                $collection['@attributes'][$attrName] = strval($attrValue);
            }
        }

        if (0 === $nodes->count()) {
            if($xml->attributes())
            {
                $collection['value'] = strval($xml);
            }
            else
            {
                $collection = strval($xml);
            }
            return $collection;
        }

        foreach ($nodes as $nodeName => $nodeValue) {
            if (count($nodeValue->xpath('../' . $nodeName)) < 2) {
                $collection[$nodeName] = $parser($nodeValue);
                continue;
            }

            $collection[$nodeName][] = $parser($nodeValue);
        }

        return $collection;
    };

    return [
        $xml->getName() => $parser($xml)
    ];
} 
```

这也为我提供了所有属性，这是我没有从任何其他方法获得的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T19:41:20.340

我想你将不得不循环。读取 xml 后，您可以将其放入数组中。

```
<?php
function objectsIntoArray($arrObjData, $arrSkipIndices = array())
{
$arrData = array();

// if input is object, convert into array
if (is_object($arrObjData)) {
    $arrObjData = get_object_vars($arrObjData);
}

if (is_array($arrObjData)) {
    foreach ($arrObjData as $index => $value) {
        if (is_object($value) || is_array($value)) {
            $value = objectsIntoArray($value, $arrSkipIndices); // recursive call
        }
        if (in_array($index, $arrSkipIndices)) {
            continue;
        }
        $arrData[$index] = $value;
    }
}
return $arrData;
}

$xmlStr = file_get_contents($xml_file);
$xmlObj = simplexml_load_string($xmlStr);
$arrXml = objectsIntoArray($xmlObj);

foreach($arrXml as $attr)
  foreach($attr as $key->$val){
 if($key == '@attributes') ....
} 
```

# android - 如何关闭或停止我在 Android 中启动的外部应用程序

> ID：11439833
> 
> 赞同：2
> 
> 时间：2012-07-11T19:17:36.793
> 
> 标签：android

我有一个需要显示一些 PDF 文件的应用程序。这些文件是设备的本地文件，并且设备用于无法访问 Web 的高安全性位置。

在 Android 获得一些本机功能或库来显示 PDF 文件之前，我依赖于 Adob​​eReader.apk，我因此启动了它：

```
Intent i = new Intent(Intent.ACTION_VIEW);
i.setDataAndType(Uri.fromFile(dgfile), "application/pdf");
i.setClassName("com.adobe.reader", "com.adobe.reader.AdobeReader");
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
// ctx is a passed-in Context of my main Activity
try   { 
    ctx.startActivity(i);
}
 catch (ActivityNotFoundException e)    {   // incase no viewer installed
    Log.e("DG_External", "No viewer found!");
} 
```

这完美地工作，但在我完成显示后，我想停止它并返回我的主应用程序。[这个 SO 问题](https://stackoverflow.com/questions/3163928/startactivityintent-and-resume-to-main-activity)的“获胜”答案说，如果我使用*StartActivityForresult()*，我可以使用*finishActivity()* 但我无法让它工作（我不知道它是如何工作的，因为没有实例我们要停止的活动）

不过，我将 StartActivity 更改为：

```
((Activity)ctx).startActivityForResult(i, 33);  //!!  // 33 = arbitrary r.c. 
```

这很好地调用了 Adob​​e 阅读器，但是做...

```
((Activity)ctx).finishActivity(33); 
```

...没有产生任何结果。我尝试将它包装在 try/catch 中，并且没有抛出异常。

我做错了什么，我该怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:28:39.917

> 另一种思考方式是如何将我的应用程序带到显示屏顶部并将 Adob​​eReader 移动到后台？

召集`startActivity()`您的一项活动。您的应用程序中的某些内容正在确定“PC 上的用户关闭文档”。那东西可以叫`startActivity()`。

# php - 在非对象上调用成员函数 children()

> ID：11439835
> 
> 赞同：0
> 
> 时间：2012-07-11T19:17:49.023
> 
> 标签：php, xml, parsing, simplexml

当我尝试从 XML 文件中提取信息时出现此错误。获取信息的代码是：

```
//retrieve amazon data
$parsed_xml = amazon_xml($isbn);
$amazonResult = array();

    //print_r($parsed_xml); die;
$current = $parsed_xml->ListMatchingProductsResponse->ListMatchingProductsResult->Products->Product;
    //if($parsed_xml) {

        $amazonResult = array(
            'Title' => $current->AttributeSets->children('ns2')->ItemAttributes->Title,
            'SalesRank' => $current->SalesRankings->SalesRank->Rank,
            'ListPrice' => $current->AttributeSets->ItemAttributes->ListPrice->Amount,
            'ImageURL' => $current->AttributeSets->ItemAttributes->SmallImage->URL,
            'DetailURL' => $current->AttributeSets->ItemAttributes->SmallImage->URL, 
```

XML文件是：

```
<?xml version="1.0"?>
<ListMatchingProductsResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<ListMatchingProductsResult>
<Products xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
<Product>
<AttributeSets>
<ns2:ItemAttributes xml:lang="en-US">
<ns2:Title>JavaScript: The Missing Manual</ns2:Title> 
```

当我运行它时，我得到一个空值，当我检查错误日志时，我得到：Call to a member function children() on a non-object in ... 在第 52 行。违规行是：

```
'Title' => $current->AttributeSets->children('ns2')->ItemAttributes->Title, 
```

唯一具有 ns2 命名空间的项是 ItemAttributes 和 Title。

如何更正此问题以便获取标题信息？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:31:10.117

`ns2`是前缀，不是实际的命名空间，`ListMatchingProductsResponse`是根节点，不用提了，所以：

```
var_dump(
        $parsed_xml->ListMatchingProductsResult
                ->Products
                ->Product
                ->AttributeSets
                ->children('ns2',true)
                ->ItemAttributes
                ->Title); 
```

# ruby-on-rails - 获取 Fancybox 以部分渲染 Rails

> ID：11439836
> 
> 赞同：0
> 
> 时间：2012-07-11T19:17:50.183
> 
> 标签：ruby-on-rails, fancybox

`#1`这不起作用：

```
$('.someclass').fancybox({
  type: 'ajax',
  href: 'name_of_partial1',
}) 
```

`#2`这是有效的：

```
$('#some_id').fancybox({
  type: 'ajax',
  href: 'name_of_partial2',
}) 
```

Part 1 和 Part 2 在同一个目录下。#some_id 和 .some_class 是同一控制器中两个不同操作的元素。

我想要做的就是渲染fancybox 的一部分，使用fancybox href 选项是调用fancybox 的一部分的正确方法吗？

我遇到的第二个错误是弹出框弹出“无法加载请求的内容。请稍后再试”，我在控制台中收到 404。

当我将＃2中的href更改为：

```
href: 'name_of_partial1' 
```

然后我看到部分 1 在幻想框中呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:26:11.560

对自己：

原来 href: '' 选项映射到控制器动作。我得到了一个 404，因为 name_of_partial2 有一个同名的控制器动作，但是在那个引发 404 的动作中发生了一些不好的渲染

# tsql - 按语法错误排序

> ID：11439838
> 
> 赞同：-3
> 
> 时间：2012-07-11T19:18:06.137
> 
> 标签：tsql

无法弄清楚为什么我会收到错误：'desc' 附近的语法不正确。它是说最后一行是问题或附近...

```
select  e.DealID,    
    e.TestID, 
    e.Quantity,
    case     
        Description  
            when 'Active' then 'Positive' else e.Description      
    end as Description,   
    (SUM(e.Price * e.SalePrice) / NULLIF(SUM(e.SalePrice), 0)) as Price
from Product e
WHERE ArchiveID = @ArchiveID 
group by    e.TestID,
        Description,
        e.Quantity
order by    e.TestID,
        Description 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:19:48.463

desc 是保留字。

group by 很困惑，case 语句也很可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:20:50.410

额外的逗号：

```
order by    e.TestID,
                    ^---here
        Desc 
```

这`desc`不是“降序”，而是一个名为 的字段`desc`，这将是语法错误和无效的字段名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:26:04.703

**编辑**：在追逐 OP 的代码时被替换。

```
select  e.DealID,     
    e.TestID,  
    e.Quantity, 
    case      
        Description   
            when 'Active' then 'Positive' else e.Description       
    end as Description,    
    (SUM(e.Price * e.SalePrice) / NULLIF(SUM(e.SalePrice), 0)) as Price 
from Product e 
WHERE ArchiveID = @ArchiveID  
group by    e.TestID, -- Added comma.
        Description, 
        e.Quantity 
order by    e.TestID, 
        Description 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T20:09:45.050

愚蠢的，我已经在我的proc中注释掉了END。这就是整个问题。

# java - JAVA花柜台程序

> ID：11439844
> 
> 赞同：0
> 
> 时间：2012-07-11T19:18:28.093
> 
> 标签：java

我必须编写一个使用 2 个数组的程序。第一个数组存储 5 个花名，第二个存储每朵花的价格。

用户输入花的种类和数量，程序输出成本。我无法用特定成本输出特定花的相关成本。

我想使用 5 个 if 语句，但在使用鲜花字符串时遇到了问题。有什么建议么？

到目前为止，这是我的代码：

```
import java.util.Scanner;

public class FlowerCounter
{
    public static void main(String[] args)
    {

        String[] flowers = new String[5];
        double[] price = {.50, .75, 1.50, .50, .80};

        Scanner keyboard = new Scanner(System.in);
        System.out.println("What kind of flower would you " +
            "like to purchase? \nPetunia, Pansy, Rose," +
            " Violet, or Carnation?");

        String index = keyboard.nextLine();
        System.out.println("How many " + index +"s" + " would you like?");
        int count = keyboard.nextInt();

        double total = count * price.length;
        System.out.println("The cost for " + count  +  index  + " is " + total);             
    }        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:29:43.040

我的第一个建议是`flowers`用花的名字初始化你的数组。

您可以为每一个手动执行此操作（例如`flowers[0] = "Petunia";`），或者您可以像在一个步骤中执行价格数组一样执行此操作（例如`String[] flowers = {"Petunia", "Pansy","Rose","Violet","Carnation"};`）。

然后你需要找到花数组的哪个索引包含用户输入的花名。循环遍历花数组的每个索引，直到一个匹配（确保使用`index.equals(flowers[testIndex])`，而不是`==`运算符）。

最后在输入的花名索引处将计数乘以价格，得到总成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:30:19.243

您只是使用索引，而不是数组。

要访问花名，您必须像这样使用数组花：

```
flower[index] 
```

并访问价格：

```
price[index] 
```

'index' 是一个 int 而不是一个字符串。如果您必须找到给定花的索引（位置），则必须遍历所有数组直到找到它。

您可能想要使用地图而不是 2 个数组： [http ://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

使用地图，您可以使用花卉名称作为关键字来访问花卉价格。只需声明一个`Map<String, Double> prices = new HashMap<String, Double>();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:26:37.910

根据您将值放入价格数组的方式，您必须按该顺序放置鲜花。

遍历花的名称，当您找到与输入内容匹配的花的特定索引时（记住： `.equals()`而不是`==`），通过使用该索引返回该花的价格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:27:41.950

我会想到类似 a 的东西`Map<String, Double> flowers = new HashMap<String, Double>();`，然后可以很容易地检查它`flowers.get(index)`以获得它的价值。

也可能值得检查以确保他们输入了有效的花名。

[HashMap 文档](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

[教程中的地图页面](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-11T19:39:25.663

```
import java.util.Scanner;

public class FlowerCounter {
public static void main(String[] args)
{
   String[] flowers = {"Petunia", "Pansy", "Rose", "Violet", "Carnation"};
   double[] price = {.50, .75, 1.50, .50, .80};
   double cost = 0;

   Scanner keyboard = new Scanner(System.in);
   System.out.println("What kind of flower would you " +
                          "like to purchase? \nPetunia, Pansy, Rose," +
                          " Violet, or Carnation?");

   String index = keyboard.nextLine();

   System.out.println("How many " + index +"s" + " would you like?");
   int count = keyboard.nextInt();

  if (index.equals("Petunia") || index.equals("petunia"))
       cost = (double)price[0] * count;
   else if (index.equals("Pansy") || index.equals("pansy"))
       cost = (double)price[1] * count;
   else if (index.equals("Rose") || index.equals("rose"))
       cost = (double)price[2] * count;
   else if (index.equals("Violet") || index.equals("violet"))
       cost = (double)price[3] * count;
   else if (index.equals("Carnation") || index.equals("carnation"))
       cost = (double)price[4] * count;
   else 
       System.out.println("wrong flower");

   System.out.println("The cost for " + count+ " "  +  index  + " is " + cost);            
}

} 
```

# c++ - 解决枚举歧义名称冲突的建议？

> ID：11439846
> 
> 赞同：0
> 
> 时间：2012-07-11T19:18:40.770
> 
> 标签：c++, enums, namespaces

我在代码库中有一个类似于以下内容的库：

```
namespace rat {

   ...

   enum myEnum {
      BLUE,
      RED
   }

   ...
} //namespace rat 
```

后来我尝试使用之前的库在代码库中编译一个应用程序，当我使用命名空间rat（代码库主命名空间）时，它警告我有歧义，说 BLUE 可能是`rat::myEnum` `rat::BLUE`或`rat::enums::Freq` `rat::enums::BLUE`来自我不熟悉的其他文件（而且不是我的）在命名空间 rat 中的命名空间枚举中有一个名为 BLUE 的枚举 Freq ......

用户代码中有没有办法说出我现在想要哪个？或者我是否必须将 mylibs 枚举嵌套在命名空间 mylib 中，然后说 rat::enums::BLUE 或 rat::mylib::BLUE ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:30:24.453

枚举常量的完整明确名称将是`::rat::BLUE`,`::rat::enums::BLUE`等。

请记住，`::`表达式开头的 代表*全局命名空间*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T19:30:09.157

我通常在 C++03（C++11 之前！）中做的是将 s 嵌套`enum`在`struct`s 中，因此它们不会泄漏：

```
namespace rat {
  struct myEnum {
    enum Enum {
      blue, red
    };
  };
} 
```

您必须将变量定义为`rat::myEnum::Enum`并将值定义为`rat::myEnum::blue`，但通常`myEnum`应该是有意义的东西，例如`Color`，因此命名不是多余的。

这在某种程度上模拟了 C++11 `class enum`，因此如果您可以访问 C++11 编译器，则应该使用这些。

# java - 无法让 BufferedWriter 写出文件中的所有数据

> ID：11439848
> 
> 赞同：0
> 
> 时间：2012-07-11T19:18:45.537
> 
> 标签：java, file-io, bufferedreader, bufferedwriter

我有一个遍历目录的函数，应该读取每个文件并将其写入生成的 HTML 文件。BufferedReader 应该正确读取，因为我在其他地方使用相同的东西。但是，在生成的 HTML 文件中，我只从目录中的原始文件中获取每隔一行的数据。这是应该完成此操作的方法：

```
// Tests to see if "File" is actually a directory or file,
// then writes out the file if it passes the test
void writeFiles(File directory, BufferedWriter bw) {
    try{
        for( File file : directory.listFiles() ){
            if(!file.isDirectory()) {//is a file lets read it
                FileInputStream filestream = new FileInputStream(file);
                DataInputStream in = new DataInputStream(filestream);
                BufferedReader br = new BufferedReader(new InputStreamReader(in));
                String buff = new String();
                bw.write("<b>////////////////////////////////</b><br/>");
                bw.write("<b>File: " + file.getName() + "</b><br/>");
                bw.write("<b>////////////////////////////////</b><br/>");
                while((buff=br.readLine()) != null){
                    bw.write(br.readLine() + "<br/>");
                }
                bw.write("`<br/>`");
                bw.write("`<br/>`");

           }else {//will make it a recursive search
               writeFiles(file, bw);
           }
        }
    }catch(FileNotFoundException fnf){
        fnf.printStackTrace();
    }
    catch(IOException io){
        io.printStackTrace();
    }
} 
```

对于问题中代码的错误格式，我深表歉意。由于 HTML，预格式化的文本不会让我的代码正确显示。但是，我绝对认为我的代码中存在文件 I/O 问题。有谁知道它是 BufferedReader 还是 BufferedWriter？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:25:31.933

这是你的问题：

```
while((buff=br.readLine()) != null){
  bw.write(br.readLine() + "<br/>");
} 
```

您正在调用 br.readLine() 两次。

尝试：

```
while((buff=br.readLine()) != null){
  bw.write(buff + "<br/>");
} 
```

# ruby-on-rails - 关系“venues”的新行违反了检查约束“enforce_srid_latlon”

> ID：11439850
> 
> 赞同：2
> 
> 时间：2012-07-11T19:18:49.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, postgis

当我尝试创建一个位置感知的新场地时，我收到以下错误。

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  new row for relation "venues" violates check constraint "enforce_srid_latlon" 
```

这是我重新创建错误的方法。

```
v = Venue.create(:latlon => "POINT (43.245332 -85.4352332)")
v.save 
```

我确实注意到在我的迁移中，我没有为 t.point :latlon 设置 :geographic => true 属性。这可能是导致我的问题的原因吗？如果是这样，如何在已经包含数据的列上将该标志设置为 true？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:22:26.900

正如 (Postgres) 错误消息告诉您的那样，新行将违反检查约束`enforce_srid_latlon`。

查看检查约束的定义，您将得到答案。在**psql**中，您可以使用：

```
\d venues 
```

或者，您可以从任何客户端使用此**SQL 查询：**

```
SELECT r.conname, pg_catalog.pg_get_constraintdef(r.oid, true)
FROM   pg_catalog.pg_constraint r
WHERE  r.conrelid = 'venues'::regclass
AND    r.contype = 'c'
ORDER  BY 1; 
```

或者您可以使用像[**pgAdmin**](http://www.pgadmin.org/)这样的 GUI 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T03:56:41.583

设置 SRID 的最简单方法是将 WKT 作为前缀添加到 EWKT（扩展众所周知的文本）中：

```
v = Venue.create(:latlon => "SRID=4326;POINT (43.245332 -85.4352332)") 
```

我正在使用[SRID=4326](http://spatialreference.org/ref/epsg/4326/)，因为看起来您有 WGS84 纬度/经度坐标，这是典型的。

# android - 停止计时器后吐司，如何？

> ID：11439851
> 
> 赞同：1
> 
> 时间：2012-07-11T19:18:51.817
> 
> 标签：android, timer

停止计时器后如何敬酒？

```
onCreate {

//other code

myTimer = new Timer();
        myTimer.schedule(new TimerTask() {          
            @Override
            public void run() {
                TimerMethod();
                }

        }, 0, 1000);

        Toast.makeText(getApplicationContext(), "AS", 455).show();

    }

private void TimerMethod()
    {
    this.runOnUiThread(Timer_Tick);

    }

    private Runnable Timer_Tick = new Runnable() {
        public void run() {

                rub_stat++; 
                if (rub_stat == 15){myTimer.cancel();   }                       }
    }; 
```

所以在 rub_stat 达到 15 后，我想取消计时器并让 toast 出现。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:27:44.550

您可能想制作一个单独的线程，而不是在 UI 线程上，所以基本上替换

```
this.runOnUiThread(Timer_Tick); 
```

使用线程调用，然后您可以加入线程，并让该线程暂停 15 秒，并在加入后立即显示`Toast`.

```
Thread thread = new Thread()
{
    @Override
    public void run() {
        try {
            sleep (1000 * 15);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
};

thread.start();
thread.join();
this.runOnUiThread(showToast; 
```

`showToast`只是显示吐司的功能。

**我还没有测试过这段代码**，但它应该接近你所需要的。

有关更多信息，`join`您可以查看此博客文章：

[http://cnapagoda.blogspot.ca/2010/01/thread-join-method.html](http://cnapagoda.blogspot.ca/2010/01/thread-join-method.html)

# mysql - 一条 SQL 语句的事务

> ID：11439867
> 
> 赞同：0
> 
> 时间：2012-07-11T19:19:55.497
> 
> 标签：mysql, sql, transactions

我正在通过创建博客来学习如何编程，我的要求之一是每当创建新的博客文章时增加文章类别的“计数”列。

至于现在，我必须使用以下语句来完成此任务：

```
INSERT INTO posts (..., ..., category_id) VALUES (..., ..., 5);
UPDATE categories SET count = count + 1 WHERE id = 5 
```

我有什么办法可以将这两者组合成一个 SQL 语句？如果没有，有没有办法在我创建具有该类别的新帖子时“自动”增加计数字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:22:48.240

您不能组合这些语句，因为它们在不同的表上执行两种不同的操作。但是将它们包装在事务中有效地使它们成为原子伪单语句：

```
start transaction;
insert into posts blah blah blah;
update categories blah blah blah;
commit; 
```

您可以通过在帖子表上使用触发器来更新 thigns。任何时候插入或删除一条记录，您都会让触发器运行更新查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:27:15.493

您可以使用[触发器](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)自动执行此操作。

```
CREATE TRIGGER myPostsTrigger AFTER INSERT
ON posts
FOR EACH ROW
BEGIN
    UPDATE categories SET count = count + 1 WHERE id = NEW.category_id
END 
```

然后，当您在帖子 ( ) 中插入一行时`INSERT INTO posts (..., ..., category_id) VALUES (..., ..., 5);`，它会自动增加您的计数。

# oracle11g - Oracle 11g 基准测试

> ID：11439868
> 
> 赞同：0
> 
> 时间：2012-07-11T19:19:56.590
> 
> 标签：oracle11g

也许只有我一个人，但我很难为 Oracle 11g 找到一些好的基准。如果我尝试对 MySQL 做同样的事情，我会在不同的硬件设置和不同类型的读/写的不同场景中获得大量的读/写性能结果。像这样的 Oracle 数据库基准测试有哪些好的资源？

我正在尝试在使用 MySQL 集群还是 Oracle 11g 之间做出决定，在我为 Oracle 花钱并进行一些基准测试之前，我想看看其他人的基准测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:25:54.463

看看 swingbench (http://dominicgiles.com/swingbench.html)，当然还有 TPC 网站。但是，通用基准对于确定最适合您的特定要求的基准没有用。生成模拟您的特定应用程序的基准会更有用。

# java - 当我使用 osgi bundle 重新启动服务器时，Glassfish 崩溃

> ID：11439871
> 
> 赞同：0
> 
> 时间：2012-07-11T19:19:58.313
> 
> 标签：java, glassfish, osgi, glassfish-3

我有一个成功部署在 Glassfish 3.1.2 上的 osgi 包。这是捆绑激活器：

```
import javax.sql.DataSource;
import java.sql.SQLException;

import java.util.Properties;
import org.DX_57.osgi.SH_27.api.SessionHandle;
import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;
import org.osgi.framework.Constants;
import org.osgi.framework.Filter;
import org.osgi.framework.ServiceReference;
import org.osgi.framework.ServiceRegistration;
import org.osgi.util.tracker.ServiceTracker;

public class SessionHandleActivator implements BundleActivator {

    // Define Datasource name
    public static final String DSNAME = "jdbc/Oracle";
    public ServiceTracker st;

    // Register the Java method as OSGI Service when the bundle is deployed
    @Override
    public void start(final BundleContext bc) throws Exception {
        debug("Session Handle 27 Activator started");

        /*
         * Register the Datasource as Service in order to be used into the
         * bundle later from the Java methods
         */
        Filter filter = bc.createFilter("(&" + "(" + Constants.OBJECTCLASS
                + "=" + DataSource.class.getName() + ")" + "(jndi-name="
                + DSNAME + ")" + ")");
        st = new ServiceTracker(bc, filter, null) {

            @Override
            public Object addingService(ServiceReference reference) {

                DataSource ds = (DataSource) bc.getService(reference);
                try {
                    debug(ds.getConnection().toString());
                    // For session handle 
                    SessionHandle sh = new SessionHandleImpl();
                    sh.setDataSource(ds);
                    /*
                     * Register the Java methods insight the bundle in order to
                     * be used
                     */
                    ServiceRegistration registerService = bc.registerService(SessionHandle.class.getName(), sh, new Properties());

                } catch (SQLException e) {
                }

                return super.addingService(reference);
            }

            @Override
            public void removedService(ServiceReference reference,
                    Object service) {
                super.removedService(reference, service);
            }
        };
        st.open();
    }

    // Remove the OSGI service when the bundle is undeployed
    @Override
    public void stop(BundleContext bc) throws Exception {
        boolean ungetService = bc.ungetService(bc.getServiceReference(SessionHandle.class.getName()));
        st.close();
        debug("Session Handle 27 Activator stopped");
    }

    // Show debug information when the OSGI bundle is deployed
    private void debug(String msg) {
        System.out.println("BundleActivator: " + msg);
    }
} 
```

当我重新启动 Glassfish 服务器时，服务器崩溃并且我得到这个错误堆栈：

```
[#|2012-07-08T12:38:16.568+0300|INFO|glassfish3.1.2|org.glassfish.osgijavaeebase|_ThreadID=67;_ThreadName=Thread-2;|Expanded at file:/tmp/osgiapp5717459413008665895/|#]

[#|2012-07-08T12:38:17.205+0300|SEVERE|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.config|_ThreadID=50;_ThreadName=Thread-2;|Critical error during deployment: 
com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
    at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:674)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:324)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLoaderService.processApplication(ApplicationLoaderService.java:375)
    at com.sun.enterprise.v3.admin.adapter.InstallerThread.load(InstallerThread.java:210)
    at com.sun.enterprise.v3.admin.adapter.InstallerThread.run(InstallerThread.java:108)
Caused by: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:672)
    ... 19 more
Caused by: java.net.MalformedURLException: Unknown protocol: jndi
    at java.net.URL.<init>(URL.java:617)
    at java.net.URL.<init>(URL.java:480)
    at java.net.URL.<init>(URL.java:429)
    at java.net.URI.toURL(URI.java:1096)
    at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:922)
    at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:867)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:658)
    ... 19 more
Caused by: java.lang.IllegalStateException: Unknown protocol: jndi
    at org.apache.felix.framework.URLHandlersStreamHandlerProxy.parseURL(URLHandlersStreamHandlerProxy.java:372)
    at java.net.URL.<init>(URL.java:612)
    ... 27 more
|#]

[#|2012-07-08T12:38:17.233+0300|SEVERE|glassfish3.1.2|org.apache.catalina.core.StandardContext|_ThreadID=50;_ThreadName=Thread-2;|PWC1306: Startup of context  failed due to previous errors|#]

[#|2012-07-08T12:38:17.244+0300|SEVERE|glassfish3.1.2|org.apache.catalina.core.StandardContext|_ThreadID=50;_ThreadName=Thread-2;|PWC1305: Exception during cleanup after start failed
org.apache.catalina.LifecycleException: PWC2769: Manager has not yet been started
    at org.apache.catalina.session.StandardManager.stop(StandardManager.java:873)
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:5571)
    at com.sun.enterprise.web.WebModule.stop(WebModule.java:527)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5384)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLoaderService.processApplication(ApplicationLoaderService.java:375)
    at com.sun.enterprise.v3.admin.adapter.InstallerThread.load(InstallerThread.java:210)
    at com.sun.enterprise.v3.admin.adapter.InstallerThread.run(InstallerThread.java:108)
|#]

[#|2012-07-08T12:38:17.245+0300|SEVERE|glassfish3.1.2|org.apache.catalina.core.ContainerBase|_ThreadID=50;_ThreadName=Thread-2;|ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5389)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLoaderService.processApplication(ApplicationLoaderService.java:375)
    at com.sun.enterprise.v3.admin.adapter.InstallerThread.load(InstallerThread.java:210)
    at com.sun.enterprise.v3.admin.adapter.InstallerThread.run(InstallerThread.java:108)
Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    ... 14 more
Caused by: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
    at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:674)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:324)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225)
    ... 17 more
Caused by: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:672)
    ... 19 more
Caused by: java.net.MalformedURLException: Unknown protocol: jndi
    at java.net.URL.<init>(URL.java:617)
    at java.net.URL.<init>(URL.java:480)
    at java.net.URL.<init>(URL.java:429)
    at java.net.URI.toURL(URI.java:1096)
    at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:922)
    at com.sun.faces.config.ConfigManager$ParseTask.call(ConfigManager.java:867)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:658)
    ... 19 more
Caused by: java.lang.IllegalStateException: Unknown protocol: jndi
    at org.apache.felix.framework.URLHandlersStreamHandlerProxy.parseURL(URLHandlersStreamHandlerProxy.java:372)
    at java.net.URL.<init>(URL.java:612)
    ... 27 more
|#]

[#|2012-07-08T12:38:17.250+0300|INFO|glassfish3.1.2|org.apache.catalina.startup.ContextConfig|_ThreadID=12;_ThreadName=Thread-2;|No default web.xml|#]

[#|2012-07-08T12:38:17.253+0300|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=50;_ThreadName=Thread-2;|java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:921)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLoaderService.processApplication(ApplicationLoaderService.java:375)
    at com.sun.enterprise.v3.admin.adapter.InstallerThread.load(InstallerThread.java:210)
    at com.sun.enterprise.v3.admin.adapter.InstallerThread.run(InstallerThread.java:108)
|#]

[#|2012-07-08T12:38:17.254+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=50;_ThreadName=Thread-2;|Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.util.concurrent.ExecutionException: java.net.MalformedURLException: Unknown protocol: jndi
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLoaderService.processApplication(ApplicationLoaderService.java:375)
    at com.sun.enterprise.v3.admin.adapter.InstallerThread.load(InstallerThread.java:210)
    at com.sun.enterprise.v3.admin.adapter.InstallerThread.run(InstallerThread.java:108)
|#]

[#|2012-07-08T12:38:17.254+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=50;_ThreadName=Thread-2;|Exception while loading the app|#]

[#|2012-07-08T12:38:17.258+0300|INFO|glassfish3.1.2|org.glassfish.osgihttp|_ThreadID=12;_ThreadName=Thread-2;|standardContext = StandardEngine[glassfish-web].StandardHost[__asadmin].StandardContext[/osgi]|#]

[#|2012-07-08T12:38:17.301+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=50;_ThreadName=Thread-2;|Exception while loading the app|#] 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:12:46.370

我认为您的捆绑包在您重新启动时启动得太早了。有些东西注册了 jndi url 协议，第一次很好，因为在你部署它时已经发生了，但是*第二*次，OSGi 环境被重新激活，并且在 JNDI 被注册为有效协议之前更早地重新启动。

我不是 Glassfish 大师，我不确定在这里进行的最佳方式是什么，也许您可​​以通过指定 org.osgi.framework.storage.clean 来阻止整个恢复过程，也许您可​​以增加捆绑包的启动级别（所以它将稍后开始）并防止此问题，也许您可​​以以某种方式检测 jndi 协议何时注册并等待？

# c++ - 混合显式特化和非特化模板

> ID：11439872
> 
> 赞同：3
> 
> 时间：2012-07-11T19:20:04.043
> 
> 标签：c++, templates

我是模板新手。我有一个问题，有没有一种方法可以用非专业（或泛型）类型作为参数来专门化一个类成员函数。也就是说，下面程序中的 U1 和 U2 可以说是 U1 类型的 boost::shared_ptr 而 T1 和 T2 是常规类型。

```
#include <iostream>

template <typename T1, typename T2>
class X {
    public:
    template <typename U1, typename U2>
    void get_as(U1& source, U2& dest);
};

class Y {
};

template<> template<>
void
X<int, int>::get_as<double, double>(double& source, double& dest) {
    std::cout << "SOURCE IS " << source << std::endl;
    std::cout << "DESTINATION IS " << dest << std::endl;
}

template<> template<>
void 
X<int, int>::get_as<shared_ptr, shared_ptr>(shared_ptr<Y>& source, shared_ptr<Y>& dest) {
//some logic
}

int main()
{
    double d1 = 1.0;
    double d2 = 1.1;
    X<int, int> x;
    x.get_as(d1, d2);
    shared_ptr<Y> p1(new Y());
    shared_ptr<Y> p2(new Y());
    x.get_as(p1, p2); //Would this work?

    return 0;
} 
```

我尝试阅读它，但可以清楚地理解它是否可以完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:13:09.050

您的示例中的代码将无法编译，因为模板参数中出现的 shared_ptr 不是完整的类型。要使其工作，您可以像这样修改函数：

```
template<> template<>
void
X<int, int>::get_as<shared_ptr<Y>, shared_ptr<Y> >(shared_ptr<Y>& source, shared_ptr<Y>& dest) {
//some logic
} 
```

但这可能不是您正在寻找的普遍性。不幸的是，您不能执行以下操作

```
template<> template<typename T>
void
X<int, int>::get_as<shared_ptr<T>, shared_ptr<T> >(shared_ptr<T>& source, shared_ptr<T>& dest) {
//some logic
} 
```

这将是模板类的成员函数的部分模板特化。C++ 禁止这种事情。然而，当学习所有关于模板和模板专业化的知识时，人们经常会忘记旧的函数重载仍然可用。以下代码将按照您的预期工作

```
class Y {
};

class Z {
};

template <typename T1, typename T2>
class X {
    public:
    template <typename U1, typename U2>
    void get_as(U1& source, U2& dest);

    template <typename U>
    void get_as(shared_ptr<U> source, shared_ptr<U> dest);

    void get_as(shared_ptr<Y> source, shared_ptr<Y> dest);
};

template<> template<>
void
X<int, int>::get_as<double, double>(double& source, double& dest) {
    std::cout << "SOURCE IS " << source << std::endl;
    std::cout << "DESTINATION IS " << dest << std::endl;
}

template <typename T1, typename T2>
template <typename U>
void X<T1, T2>::get_as(shared_ptr<U> source, shared_ptr<U> dest)
{
  std::cout << "Overloaded member" << std::endl;
}

template <typename T1, typename T2>
void X<T1, T2>::get_as(shared_ptr<Y> source, shared_ptr<Y> dest)
{
  std::cout << "Special overloaded member" << std::endl;
}

int main()
{
    double d1 = 1.0;
    double d2 = 1.1;
    X<int, int> x;
    x.get_as(d1, d2);
    shared_ptr<Y> p1(new Y());
    shared_ptr<Y> p2(new Y());
    x.get_as(p1, p2); //Would this work?

    shared_ptr<Z> p3(new Z());
    shared_ptr<Z> p4(new Z());
    x.get_as(p3, p4); //Would this work?

    return 0;
} 
```

输出是

```
SOURCE IS 1
DESTINATION IS 1.1
Special overloaded member
Overloaded member 
```

# python - urls.py 中的 Django EOL

> ID：11439874
> 
> 赞同：3
> 
> 时间：2012-07-11T19:20:19.863
> 
> 标签：python, django, django-urls, eol

当我启动我的 django 服务器并输入一些 url 时，django 总是给我一个 EOL 错误：

```
SyntaxError at /accounting/payments/
    EOL while scanning string literal (urls.py, line 22)
    Request Method: GET
    Request URL:    http://localhost:8000/accounting/payments/
    Django Version: 1.4
    Exception Type: SyntaxError
    Exception Value:    
    EOL while scanning string literal (urls.py, line 22)
    Exception Location: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/importlib.py in import_module, line 35
    Python Executable:  /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python
    Python Version: 2.7.3
    Python Path:    
    ['/Users/Tone/Documents/Proyectos/macrogest/MacroTelecom',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/distribute-0.6.27-py2.7.egg',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/South-0.7.5-py2.7.egg',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django_debug_toolbar-0.8.5-py2.7.egg',
     '/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg',
     '/Library/Python/2.7/site-packages/ipython-0.13-py2.7.egg',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL',
     '/Users/Tone/Documents/django/django',
     '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info',
     '/Library/Python/2.7/site-packages',
     '/Users/Tone/Documents/Django'] 
```

这是我的**urls.py**代码：

```
from django.conf.urls.defaults import patterns, include, url

# Uncomment the next two lines to enable the admin:
#from django.contrib import admin
#admin.autodiscover()

urlpatterns = patterns('',

    # Site control
    url(r'^$', 'macrotelecom.base.views.home', name='home'),
    url(r'^company/', include('macrotelecom.company.urls')),
    url(r'^people/', include('macrotelecom.people.urls')),
    url(r'^lines/', include('macrotelecom.lines.urls')),
    url(r'^accounting/', include('macrotelecom.accounting.urls')),
    url(r'^sales/', include('macrotelecom.sales.urls')),
    url(r'^shop/', include('macrotelecom.shop.urls')),
    url(r'^news/', include('macrotelecom.news.urls')),
    url(r'^map/', 'macrotelecom.base.views.webmap', name='map'),
    url(r'^error/$', 'macrotelecom.base.views.error', name='error'),

    # Internal
    url(r'^favicon\.ico$', 'django.views.generic.simple.redirect_to', {'url': '/static/img/favicon.ico'}),
    url(r'^i18n/', include('django.conf.urls.i18n')),
    #url(r'^admin/', include(admin.site.urls)),
    url(r'^rosetta/', include('rosetta.urls')),

    # User control
    (r'^not_authorized/$', 'base.views.not_authorized'),
    (r'^login/$', 'django.contrib.auth.views.login'),
    (r'^logout/$', 'django.contrib.auth.views.logout'),
    (r'^password_change/$','django.contrib.auth.views.password_change'),
    (r'^password_change/done/$','django.contrib.auth.views.password_change_done'),
    (r'^password_reset/$','django.contrib.auth.views.password_reset'),
    (r'^password_reset/done/$','django.contrib.auth.views.password_reset_done'),
    (r'^reset/(?P<uidb36>[0-9A-Za-z]+)-(?P<token>.+)/$','django.contrib.auth.views.password_reset_confirm'),
    (r'^reset/done/$','django.contrib.auth.views.password_reset_complete'),

) 
```

第 22 行对应于 favicon url，我认为这可能是 scape 字符或类似的东西（我放了一个 # 用于评论）但没有用，总是说 EOL 错误，它可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:29:20.663

该文件（至少是您发布的部分）没有任何语法错误。有时错误可能看起来来自不同的文件。

只需在文件上运行解释器，即可检查您最近编辑的文件`python myapp/views.py`。如果你得到 NameError 或 ImportError，或者它运行正常，那么在 中没有语法错误`myapp/views.py`，所以尝试另一个文件。

# c# - C# 对象初始化的最佳实践

> ID：11439876
> 
> 赞同：0
> 
> 时间：2012-07-11T19:20:20.600
> 
> 标签：c#, object

我有一个 Order 对象，Order 对象包含一个 Person 对象，该对象存储有关下订单的人的信息。当我填充 Order 对象时，我是否也应该填充 Person 对象？或者，当我需要访问下订单的人时，我会更好地调用 order.GetPerson()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:23:39.137

你可以考虑这种[`LazyLoading`](http://en.wikipedia.org/wiki/Lazy_loading)方法。以便在需要时（第一次查询）获取并加载 Person 数据

> 延迟加载是计算机编程中常用的一种设计模式，用于将对象的初始化推迟到需要它的时候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:31:13.877

如果资源是一个问题，那么 Shyju 的回答是有道理的。否则，如果您总是知道与订单相关联的人，那么，是的，填充它。此外，尽可能多地使对象不可变是个好主意，在这种情况下您可能可以；即通过构造函数将人传入并且永远不要更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:39:42.850

正如 Chris Sinclair 的评论所表明的，这确实取决于您的设计并考虑您需要 Person 对象的频率。如果几乎每次加载订单时，您都需要关联的人员（用于显示或计算等），那么始终加载人员以限制数据库调用的数量是有意义的。如果您几乎不需要 Person 数据，那么以后期绑定/延迟加载的方式获取 Person 数据更有意义。

考虑这个例子。您检索所有订单以在网格中显示它们。但是当您填充网格时，您还希望显示每个订单的人员信息。如果您为每个订单加载人员数据，您只需循环订单，就不会再调用数据库了。如果您使用延迟加载 Person 数据，那么当您循环订单时，您必须对每个 Order 进行额外的数据库调用以获取 Person 数据。这是很多电话。

如果合适，您还可以拆分差异并设计可以传递“LoadChildren”标志的加载方法。这样做可以为您提供最大的灵活性，但会牺牲可维护性/可读性，因为根据您在代码中的位置，您不一定知道是否填充了 Person 数据。

# jquery - 重置值并使与所选单选按钮组成员关联的所有元素可见

> ID：11439877
> 
> 赞同：-1
> 
> 时间：2012-07-11T19:20:21.517
> 
> 标签：jquery, show-hide, radio-group

我们都知道单选按钮组（同名单选按钮）中只能选择一个，但我的应用需要根据所选单选按钮显示/隐藏块中的内容（块中可能有嵌套元素）。

**问题**：如何使用jQuery创建算法，该算法会在选择“广播”按钮时在块中显示内容并在选择不同的广播按钮时隐藏该内容？

*算法*：radio1、radio2、...和radioN中的任何一个被选中，Flip(classname,id)需要使传入的classname中的所有元素可见&值重置，并且除了传入的id之外的所有元素不可见。

```
<script type="text/javascript">
  function Flip(classname,id) {
    //this javascript function will make 
    //    1) id of the given classname visible, 
    //    2) and reset & invisible all the rest (all div elements of the given classname except id invisible

}

</script>
</head>
<body>
Requestor:<input type="radio" name="Req" onclick="Flip('RadioClass','radioDIV1');" /><br />
<div class="RadioClass" id="radioDIV1" style="display:none;" >
    Requestor 1234:
    <div >
        decendant level1a:
    </div>
</div>
Submitter:<input type="radio" name="Req" onclick="Flip('RadioClass','radioDIV2');" /><br />
<div class="RadioClass" id="radioDIV2" style="display:none;">
    Submitter 567:
    <div >
        decendant level1b:
    </div>
</div>
ForInfo:<input type="radio" name="Req" onclick="Flip('RadioClass','radioDIV3');" /><br />
<div class="RadioClass" id="radioDIV3" style="display:none;" >
    ForInfo 89:
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:30:07.213

这是一个[小提琴](http://jsfiddle.net/Tex3J/1/)，它在选择单选按钮时显示和隐藏面板。

我只实现了两个单选按钮而不是 3 ;-)

的HTML...

```
<body>
    <div>Requestor:<input type="radio" name="Req"/>
        <div class="RadioClass" id="radioDIV1" style="display:none;">
            Requestor 1234:
            <div >
                decendant level1a:
            </div>
        </div>
    </div>

    <div>Submitter:<input type="radio" name="Req"/>
        <div class="RadioClass" id="radioDIV2" style="display:none;">
            Submitter 567:
            <div >
                decendant level1b:
            </div>
        </div>
    </div>
</body>​ 
```

以及使用 jQuery 的 JavaScript 代码...

```
$("input").change(function() {
    $(".RadioClass").hide();
    $(this).next("div").toggle()
});​ 
```

# wpf - Visual Basic .Net：命名空间中的 WPF 窗口

> ID：11439881
> 
> 赞同：1
> 
> 时间：2012-07-11T19:20:57.683
> 
> 标签：wpf, vb.net

我有一个新的 VB.Net WPF 应用程序。MainWindow.xaml 仅包含一个“测试”按钮：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Test"
                Name="btnTest" />
    </Grid>
</Window> 
```

Application.xaml 保持不变：

```
<Application x:Class="Application"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    StartupUri="MainWindow.xaml">
    <Application.Resources>

    </Application.Resources>
</Application> 
```

后面的代码显示在这里。我所做的只是双击按钮，以便自动添加事件处理程序。我还将 MainWindow 添加到 View 命名空间。

```
Namespace View
    Class MainWindow
        ' A test button on the main window
        Private Sub btnTest_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles btnTest.Click
            MessageBox.Show("Hello world!")
        End Sub
    End Class
End Namespace 
```

当我构建它时，它不会编译。我得到的错误信息是：

*Handles 子句需要在包含类型或其基类型之一中定义的 WithEvents 变量。*

当我从 View 命名空间中删除 MainWindow 时，一切都很好。很明显，命名空间是一个问题。我可以将 Window 添加到命名空间，我是否需要更改应用程序中的其他内容才能使其正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:25:53.797

当您将部分类放入命名空间时，您正在破坏它。除了将 VB.NET 代码移动到命名空间之外，您还需要移动`x:Class`属性：

```
<Window x:Class="View.MainWindow" ... /> 
```

和

```
Namespace View
    Class MainWindow
       '...
    End Class
End Namespace 
```

Visual Studio 生成一个部分 VB.NET 类，它是您的代码的一部分。由于您将代码移至另一个命名空间，因此它不再是 Visual Studio 生成的一部分。

# jsf - 如何为数据表列创建复合组件？

> ID：11439886
> 
> 赞同：12
> 
> 时间：2012-07-11T19:21:15.253
> 
> 标签：jsf, datatable, richfaces, composite-component

鉴于此数据表（自然工作）：

```
<rich:dataTable var="var" value="#{values}">
<rich:column>
  <f:facet name="header">
   HEADER
  </f:facet>
  <h:outputText value="#{var}" />
</rich:column>
</rich:dataTable> 
```

如果我定义了一个自定义组件（在语法和资源/组件下的正确位置也可以）：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:a4j="http://richfaces.org/a4j"
        xmlns:rich="http://richfaces.org/rich"
        xmlns:composite="http://java.sun.com/jsf/composite">

    <!-- INTERFACE -->
    <composite:interface>
        <composite:attribute name="val" />
    </composite:interface>

    <!-- IMPLEMENTATION -->
    <composite:implementation>
        <rich:column>
            <f:facet name="header">
       HEADER
       </f:facet>
       <h:outputText value="#{cc.attrs.val}" />
       </rich:column>
    </composite:implementation>
    </html> 
```

为什么以下不起作用？

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="/WEB-INF/templates/default.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:my="http://java.sun.com/jsf/composite/components">
    <ui:define name="content">
        <rich:dataTable var="var" value="#{values}">
                 <my:mycolumn val="#{var}"/>
                </rich:dataTable>
    </ui:define>
</ui:composition> 
```

你知道我怎样才能让它工作（我想定义我自己的列并保存代码）？非常感谢！再见

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-12T02:45:59.160

该`<my:mycolumn>`元素必须是一个实例，`UIColumn`因为它是渲染响应阶段组件的**唯一**有效子代。`UIData`所有其他`UIComponent`类型将被忽略，因此不会呈现。复合组件隐含地是一个`UINamingContaner`组件，它不是 a `UIColumn`，因此被忽略。

由于复合组件的错误生命周期，具有`<p:dataTable>`扩展后备组件的 PrimeFaces也将无法工作。`UIColumn`列必须在视图构建时创建，而复合组件的主体是在视图渲染时创建的。

解决方案是创建一个标签文件，这意味着一个额外的`.taglib.xml`文件，但它可以完美地工作。

`/WEB-INF/tags/column.xhtml`：

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:rich="http://richfaces.org/rich">
    <rich:column>
        <f:facet name="header">HEADER</f:facet>
        <h:outputText value="#{val}" />
    </rich:column>
</ui:composition> 
```

`/WEB-INF/my.taglib.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0">
    <namespace>http://example.com/my</namespace>
    <tag>
        <tag-name>column</tag-name>
        <source>tags/column.xhtml</source>
        <attribute>
            <description>Column value</description>
            <name>val</name>
        </attribute>
    </tag>
</facelet-taglib> 
```

注意：这些`<attribute>`条目不是强制性的，但非常适合用于文档目的，例如生成的文档和 IDE 自动完成。

`/WEB-INF/web.xml`：

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/my.taglib.xml</param-value>
</context-param> 
```

用法：

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:rich="http://richfaces.org/rich"
    xmlns:my="http://example.com/my">
    <rich:dataTable value="#{values}" var="value">
        <my:column val="#{value}" />
    </rich:dataTable>
</ui:composition> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-03-21T07:55:12.660

我遇到了同样的问题（primefaces），我的妥协：从复合中排除列标签

```
<rich:dataTable var="var" value="#{values}">
    <rich:column rendered=#{yesOrNo}">
       <my:mycolumn val="#{var}">
       .. with child nodes if you want ...
       </my:mycolumn>
    </rich:column>
</rich:dataTable> 
```

# c# - 通过c#调用带有linq服务的SQL Server存储过程

> ID：11439893
> 
> 赞同：0
> 
> 时间：2012-07-11T19:21:42.300
> 
> 标签：c#, sql-server, linq, stored-procedures

我是 Linq 的新手，并试图将此 SQL Server 存储过程转换为 Linq，我正在构建一个 Silverlight 业务应用程序，需要调用此过程以返回结果网格。

我有多个参数，用户可以使用这些参数来搜索特定的片段。他们通过 UI 缩小搜索范围，当他们点击搜索按钮时，后面的代码会获取所有参数并将其发送到我的 Linq 服务，然后该服务需要调用存储过程。

这是存储过程。

```
ALTER PROCEDURE dbo.spSearchResults
@PieceType      nvarchar(6) =  '',
@FileType       nvarchar(3) = '',
@Market     nvarchar(6) = '',
@PieceNumber        nvarchar(6) = '',
@Header1    nvarchar(50) = '',
@Header2    nvarchar(50) = '',
@Header3    nvarchar(50) = '',
@Header4    nvarchar(50) = '',
@JobNumber      nvarchar(50)=' ',
@bShowInActive  BIT = 0,
@UDAC1      nvarchar(50) = '',
@UDAC2      nvarchar(50) = '',
@UDAC3      nvarchar(50) = '',
@UDAC4      nvarchar(50) = ''   
AS
BEGIN
SET NOCOUNT ON

SELECT J.* 
FROM Job J
  LEFT JOIN JobHeading H1 (NOLOCK) ON J.[JobNumber] =  H1.[JobID]
  LEFT JOIN JobHeading H2 (NOLOCK) ON J.[JobNumber] =  H2.[JobID]
  LEFT JOIN JobHeading H3 (NOLOCK) ON J.[JobNumber] =  H3.[JobID]
  LEFT JOIN JobHeading H4 (NOLOCK) ON J.[JobNumber] =  H4.[JobID]
  LEFT JOIN JobUDAC udac1 (NOLOCK) ON J.[JobNumber] = udac1.[JobID]
  LEFT JOIN JobUDAC udac2 (NOLOCK) ON J.[JobNumber] = udac2.[JobID]
  LEFT JOIN JobUDAC udac3 (NOLOCK) ON J.[JobNumber] = udac3.[JobID]
  LEFT JOIN JobUDAC udac4 (NOLOCK) ON J.[JobNumber] = udac4.[JobID]
WHERE ((@PieceType = '') OR (PieceType = @PieceType))
  AND ((@FileType = '') OR (FileType = @FileType))
  AND ((@Market = '') OR (Market = @Market))
  AND ((@PieceNumber = '') OR (PieceNumber = @PieceNumber))
  AND ((@JobNumber = '') OR (JobNumber = @JobNumber))
  AND (J.IsActive=1 OR @bShowInActive = 1)
  AND (((@Header1 = '' AND @Header2 = '' AND @Header3 = '' AND @Header4 = '') OR 
        H1.HeadingRowID = @Header1)
    OR (--@Header2=0 OR 
        H2.HeadingRowID = @Header2 )
    OR (--@Header3=0 OR 
        H3.HeadingRowID = @Header3)
    OR (--@Header4=0 OR 
        H4.HeadingRowID = @Header4))
  AND (((@UDAC1 = '' AND @UDAC2 = '' AND @UDAC3 = '' AND @UDAC4 = '') OR 
        udac1.UDACRowID = @UDAC1)
    OR (--@Header2=0 OR 
        udac2.UDACRowID = @UDAC2 )
    OR (--@Header3=0 OR 
        udac3.UDACRowID = @UDAC3)
    OR (--@Header4=0 OR 
        udac4.UDACRowID = @UDAC4)) 
```

在 Linq 中，我发现有一些转换要做，这是我的尝试。

```
var query = from j in Job
                    join JobHeading H1 in Job on headingRowID1 equals H1
                    join JobHeading H2 in Job on headingRowID2 equals H2
                    join JobHeading H3 in Job on headingRowID3 equals H3
                    join JobHeading H4 in Job on headingRowID4 equals H4
                    join JobUDAC udac1 in Job on udacRowID1 equals udac1
                    join JobUDAC udac2 in Job on udacRowID2 equals udac2
                    join JobUDAC udac3 in Job on udacRowID3 equals udac3
                    join JobUDAC udac4 in Job on udacRowID4 equals udac4
                    join PieceType in db on piece equals PieceType
                    join JobFileType in db on filetype equals JobFileType
                    join Book in db on market equals Book
                    join PieceNumber in db on pieceNumber equals PieceNumber
                    join JobNumber in db on jobNumber equals JobNumber
                    join Job in db on FindJobs equals db
                    where ((piece = string.Empty) || (PieceType = piece))
                      && ((filetype = string.Empty) || (JobFileType = filetype))
                      && ((market = string.Empty) || (Book = market))
                      && ((pieceNumber = string.Empty) || (PieceNumber = pieceNumber))
                      && ((jobNumber = string.Empty) || (JobNumber = jobNumber))
                      && (showInActive = true)
                      && ((((headingRowID1 = string.Empty) + (headingRowID2 = string.Empty) + (headingRowID3 = string.Empty) + (headingRowID4 = string.Empty)) ||
                            H1.HeadingRowID = headingRowID1)
                        || (H2.HeadingRowID = headingRowID2)
                        || (H3.HeadingRowID = headingRowID3)
                        || (H4.HeadingRowID = headingRowID4))
                      && ((((udacRowID1 = string.Empty) + (udacRowID2 = string.Empty) + (udacRowID3 = string.Empty) + (udacRowID4 = string.Empty)) ||
                            udac1.UDACRowID = udacRowID1)
                        || (udac2.UDACRowID = udacRowID2)
                        || (udac3.UDACRowID = udacRowID3)
                        || (udac4.UDACRowID = udacRowID4))
                    select j.Job;
        return query; 
```

但是，开头的'Job'有一个错误，并说'找不到实现......'join' not found' 谁能帮忙翻译一下？或者提供一种更好的方法来调用带有后面代码的存储过程？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T20:07:30.737

您可以将您的存储过程添加到实体上下文中并将其作为方法调用。

为此，您必须将存储过程添加到实体模型中。您没有说您是如何构建模型或您使用的是什么版本的 EF，但我假设您可以继续从数据库中更新模型并添加存储过程。

在模型中拥有 SP 后，您必须将 SP 转换为函数导入。这样做的方法是导航到模型浏览器中的存储过程，右键单击 SP 图标并选择“添加函数导入”。因为您要返回一个复杂的结果集，所以我建议您构建一个复杂类型，您将使用它作为 SP 的结果类型。要在“添加函数导入”对话框中创建复杂类型，请单击“获取列信息”按钮。这将显示您的 SP 的返回值，因此您可以通过单击“创建新的复杂类型”按钮来创建一个新的复杂类型。给它一个名字，然后单击确定。您的函数导入现在位于模型浏览器中的“函数导入”下。

您调用函数导入方法的方式是：

```
var result = context.spSearchResults(Your list of parameters...); 
```

这将执行 SP，并且“结果”应该为您提供复杂类型类型的对象列表。

几个参考：

[http://msdn.microsoft.com/en-us/library/bb896231.aspx](http://msdn.microsoft.com/en-us/library/bb896231.aspx)

[http://msdn.microsoft.com/en-us/library/ee534438.aspx](http://msdn.microsoft.com/en-us/library/ee534438.aspx)

只是为了完整：添加复杂类型的其他方法是：在模型浏览器中导航到“复杂类型”，右键单击并选择“创建复杂类型”。在那里，您必须定义一个复杂类型，该类型具有与您的 SP 的结果集相同的属性（名称和类型）。在对话框中选择“Returns a Collection of”中的Complex，

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:11:02.840

要使用 linq 调用存储过程，只需转到服务器资源管理器以连接数据库，然后只需选择存储过程文件夹，并将其拖到 dbml 设计器文件中。您会注意到在设计器中添加了一个方法。然后只需实例化上下文并调用您的过程。示例： [示例 Linq 存储过程](http://www.mssqltips.com/sqlservertip/1542/using-stored-procedures-with-linq-to-sql/)

# jquery - jQuery 验证并将表单错误链接到各自的字段

> ID：11439917
> 
> 赞同：0
> 
> 时间：2012-07-11T19:22:53.943
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validate，并且我有一个分成几个部分的表单。提交时它会验证并且我正在返回包含所有错误的错误框方法。我希望能够将它们指定为链接，因此单击错误会将用户带到该字段。开箱即用？

js：

```
$('#form').validate({
    rules: {
        firstname:   {required: true},
        lastname:    {required: true},
        email:       {required: true},
    },
    messages: {
        firstname:   {required: "Step 2: Your first name is required."},
        lastname:    {required: "Step 2: Your last name is required."},
        email:       {required: "Step 2: Your email is required."},
    },
    errorContainer: "#error_container",
    errorLabelContainer: "#error_container ul",
    wrapper: "li",
    submitHandler: function() {
            ajax('{{=URL('new_post')}}',
    }
}); 
```

它生成的 HTML 如下所示：

```
<div id="error_container">
    <ul><li><label for="firstname" generated="true" class="error_two" style="display: inline;">Step 2: Your first name is required.</label></li></ul></div> 
```

如果可能的话，我希望这个链接回名字字段。谢谢。

编辑：我发现我解释得不够好。*我希望*它生成的 HTML如下：

```
<div id=error_container">
    <ul>
        <li>
            <a href="link_to_field">Your first name is required.</a>
        </li>
    </ul>
</div> 
```

它在哪里创建可点击的锚点回到各自的字段。有什么办法可以做到这一点？我已经看到下面列出的“关注错误”方法，这当然是同时做到这一点的好方法，但我希望能够让用户单击任何错误并以他们的任何顺序转到这些字段选择。它以多步骤格式工作，这就是我想要这个的原因，否则，它就在那里，他们可以正常单击每个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:23:50.180

*   快速的方法是使用验证选项focusInvalid，它将关注最后一个活动或第一个无效元素提交

    ```
    $('#form').validate({
       .
       focusInvalid: true,
       .
    }); 
    ```

*   应该实现您想要做的很长的路要走，就是在 validate 选项中使用 showError 回调

    ```
    $('#form').validate({
       .
       showErrors: function(errorMap, errorList) {
           // errorMap - the map of errors
           // errorList - array of errors
           // construct the list of error items with links that focus on the invalid elements

           // default behavior
           this.defaultShowErrors();
       },
       .
    } 
    ```

# c# - 显示枚举描述而不是名称

> ID：11439920
> 
> 赞同：6
> 
> 时间：2012-07-11T19:23:29.037
> 
> 标签：c#, wpf, xaml, data-binding, enums

我有这样的数据绑定设置：

```
ItemsSource="{Binding Source={my:Enumeration {x:Type credit:OccupationCategory}}}"
                      DisplayMemberPath="Description"
                      SelectedValue="{Binding EmplType}"
                      SelectedValuePath="Value"/> 
```

它工作得非常好。对较大的软件设计进行更改我不能再拥有任何生成 INotifyPropertyChanged 事件的东西，因此这种类型的数据绑定不起作用。相反，我手动设置 selectedIndex 并从如下代码构建选项：

```
ItemsSource="{Binding Source={StaticResource ResidenceOwnershipType}}"/> 
```

其中引用

```
<UserControl.Resources>
    <ObjectDataProvider x:Key="ResidenceOwnershipType" MethodName="GetValues" ObjectType="{x:Type System:Enum}" >
        <ObjectDataProvider.MethodParameters>
            <x:Type TypeName="credit:ResidenceOwnershipType" />
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider>
</UserControl.Resources> 
```

就列表选项的构建和我所有数据的链接而言，这是有效的，但我无法让组合框在枚举中显示描述标签而不是实际文本。

我试过这样的事情：

```
DisplayMemberPath="Description" 
```

但那是不正确的。我该怎么做呢？

编辑：

我的枚举：

```
[DataContract]
public enum ResidenceOwnershipType
{
    [Description("")]
    None = 0,
    [Description("Owns Home Outright")]
    OwnsHomeOutright = 1,
    [Description("Buying Home")]
    BuyingHome = 2,
    [Description("Renting/Leasing")] //Weird order here reflects RouteOne website
    RentingLeasing = 4,
    [Description("Living w/Relatives")]
    LivingWithRelatives = 3,
    [Description("Owns/Buying Mobile Home")]
    MobileHome = 5,
    [Description("Unknown")]
    Unknown = 6
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T19:47:30.350

如果您保留它`ItemsSource`，您将必须定义一个自定义[`ItemTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate.aspx)，因为`DisplayMemberPath`它只是您无法检索描述的路径。

至于模板应该是什么样子：您可以将 a 绑定`TextBlock`到枚举值（当前`DataContext`）并通过管道将其通过[`ValueConverter`](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)using `Binding.Converter`。该代码只是检索`Description`(`GetType`等`GetCustomAttributes`)的一些反映

替代方法是立即返回可用集合的自定义方法（并在 中使用`ObjectDataProvider`）或执行相同操作的自定义[标记扩展。](http://msdn.microsoft.com/en-us/library/ee855815.aspx)

* * *

如果我们谈论的是方法示例`ComponentModel.DescriptionAttribute`：

```
public static class EnumUtility
{
    // Might want to return a named type, this is a lazy example (which does work though)
    public static object[] GetValuesAndDescriptions(Type enumType)
    {
        var values = Enum.GetValues(enumType).Cast<object>();
        var valuesAndDescriptions = from value in values
                                    select new
                                        {
                                            Value = value,
                                            Description = value.GetType()
                                                .GetMember(value.ToString())[0]
                                                .GetCustomAttributes(true)
                                                .OfType<DescriptionAttribute>()
                                                .First()
                                                .Description
                                        };
        return valuesAndDescriptions.ToArray();
    }
} 
```

```
<ObjectDataProvider x:Key="Data" MethodName="GetValuesAndDescriptions"
                    ObjectType="local:EnumUtility">
    <ObjectDataProvider.MethodParameters>
        <x:TypeExtension TypeName="local:TestEnum" />
    </ObjectDataProvider.MethodParameters>
</ObjectDataProvider> 
```

```
<ListBox ItemsSource="{Binding Source={StaticResource Data}}"
         DisplayMemberPath="Description"
         SelectedValuePath="Value"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:07:07.537

这个答案是我为自己的应用程序实现的 HB 答案的补充：

检查是否添加了描述属性：

```
Description = (value.GetType().GetMember(value.ToString())[0].GetCustomAttributes(true).OfType<DescriptionAttribute>().Count() > 0 ? 
                                                value.GetType().GetMember(value.ToString())[0].GetCustomAttributes(true).OfType<DescriptionAttribute>().First().Description 
                                                : value) 
```

并设置以下属性以确保使用正确的 ID：`SelectedValuePath="Value"`

# rest - Spring-MVC 3.1.x REST JSON 415 不支持的媒体类型

> ID：11439922
> 
> 赞同：1
> 
> 时间：2012-07-11T19:23:43.080
> 
> 标签：rest, spring-mvc

第一次在这里发帖……但我在许多教程、SO 帖子和文档中找不到解决方案。

使用以下命令创建 Spring MVC REST webapp：

```
 <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-core-asl</artifactId>
    <version>1.9.8</version>
    <scope>runtime</scope>
</dependency>
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>1.9.8</version>
    <scope>runtime</scope>
</dependency>
<dependency>
    <groupId>javax.xml.bind</groupId>
    <artifactId>jaxb-api</artifactId>
    <version>2.2.6</version>
    <scope>runtime</scope>
</dependency>
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-jaxrs</artifactId>
    <version>1.9.7</version>
</dependency> 
```

我的控制器是

```
@Controller
public class HomeController {
    @RequestMapping(value = "/login", method = RequestMethod.POST, consumes = "application/json", produces = "application/json")
@ResponseBody
public String login(@RequestBody Login login) {
        if (login != null) {
            logger.debug(login.toString());
        } else {
            logger.error("Null Login JSON received!");
        }
        return new Login();
    }

    private class Login {
        String username;
        String password;
         ..} 
```

我正在尝试通过以下方式以编程方式配置它：

```
@Configuration
@EnableTransactionManagement
@EnableWebMvc
@ImportResource("classpath:applicationContext.xml")
@PropertySource("classpath:application.properties")
public class ApplicationContext {

@Bean
public MappingJacksonJsonView mappingJacksonJsonView() {
    MappingJacksonJsonView mappingJacksonJsonView = new MappingJacksonJsonView();
    return mappingJacksonJsonView;
}

@Bean
public ContentNegotiatingViewResolver contentNegotiatingViewResolver() {
    Map<String, String> mediaTypes = new HashMap<String, String>();
    mediaTypes.put("json", "application/json");

    org.springframework.web.servlet.view.ContentNegotiatingViewResolver contentNegotiatingViewResolver = new ContentNegotiatingViewResolver();
    contentNegotiatingViewResolver.setMediaTypes(mediaTypes);
    return contentNegotiatingViewResolver;
}

@Bean
public org.codehaus.jackson.map.ObjectMapper objectMapper() {
    org.codehaus.jackson.map.ObjectMapper objectMapper = new org.codehaus.jackson.map.ObjectMapper();
    return objectMapper;
}

} 
```

但是当我通过 AJAX 或 Firefox RESTClient 发送请求时：

```
{"username": "aname", "password" : "ahack"} 
```

我收到消息：

```
"NetworkError: 415 Unsupported Media Type - http://localhost:8080/edm/login" 
```

我真的很感激任何指示，这个让我很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:37:50.793

您不需要注册 AnnotationHandlerMethodAdapter，因为您使用的是 Spring 3.1，所以单独使用 @EnableMVC 就足够了（它实际上注册了一个 RequestMappingHandlerAdapter） - 与 objectMapper、contentNegotiatingViewResolver、mappingJacksonJsonView 相同。

你也可以这样注释你的方法：

```
@RequestMapping(value = "/login", method = RequestMethod.POST, consumes="application/json", produces="application/json") 
```

这是一个使用相同注释的单页测试 - 该测试使用[Spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)：

```
package org.bk.webtest;

import static org.springframework.test.web.server.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.server.result.MockMvcResultMatchers.*;
import static org.springframework.test.web.server.setup.MockMvcBuilders.*;

import org.junit.Test;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.http.MediaType;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;

public class WebContextConfigurationTest {

    @Test
    public void testWebFlow() throws Exception {
        annotationConfigSetup(WebContextConfigurationTest.TestConfiguration.class)
            .build()
            .perform(post("/login").contentType(MediaType.APPLICATION_JSON).body("{\"username\":\"user\",\"password\":\"password\"}".getBytes()))
                .andExpect(status().isOk())
                .andExpect(content().string("{\"username\":\"user\",\"password\":\"password\"}"));
    }

    @Configuration
    @EnableWebMvc
    @ComponentScan(basePackages="org.bk.webtest")
    public static class TestConfiguration{

    }
}

@Controller
class JsonController{
    @RequestMapping(value = "/login", method = RequestMethod.POST, consumes = "application/json", produces = "application/json")
    @ResponseBody
    public Login login(@RequestBody Login login) {
        System.out.println(login);
        return login;
    }
}

class Login{
    private String username;
    private String password;
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T08:49:59.837

如果您的配置没问题，那么当 Spring 尝试序列化您的参数时可能会出现问题。如果您在序列化中遇到问题（例如，由于 oneToMany 关系中的双向属性导致无限递归），您会收到 415 错误。在使用 Web 服务之前，请尝试模拟 Spring 所做的事情，例如：

```
try {
    ObjectMapper mapper=new ObjectMapper();
    //serialize
    String json=mapper.writeValueAsString(login);
    //deserialize
    Login login2 = mapper.readValue(json, Login.class);
} catch (Exception e) {
    e.printStackTrace();
}

//consume the ws
restTemplate.postForObject(URI,login,String.class); 
```

如果出现问题，您会得到一个异常，显示原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T01:53:56.420

对于此类错误“NetworkError: 415 Unsupported Media Type”，

您只需要调查以下事项： 在您的 Web 服务中：

*   您的网络服务产生什么媒体类型？
*   您的 Web 服务使用什么媒体类型？

在客户端：

*   响应的接受媒体类型是什么？
*   您请求的内容类型是什么？

映射如下：

*   Web 服务产生 <---> 客户端接受媒体类型
*   Web 服务使用 <---> 客户端内容类型的请求

对于您的问题，我认为根本原因应该是您忘记在 AJAX 或 Firefox RESTClient 请求中设置内容类型或接受类型。

# android - Android Activity Not found - 在此错误之前从未有过

> ID：11439925
> 
> 赞同：-1
> 
> 时间：2012-07-11T19:23:51.727
> 
> 标签：android, eclipse, android-activity, icons

我有一个以前从未遇到过的问题。我用 eclipse 创建了一个应用程序，所以当我完成后我用 eclipse 启动它，一切正常。但是当我自己用图标启动它时，会出现一条吐司消息，上面写着：找不到活动。我不知道该怎么做，因为日志说一切正常。Eclipse 可以启动我的应用程序，但我不能？！

请帮我！！

```
 `<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="de.dered.ppg"
android:versionCode="1"
android:versionName="1.7.1" >

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8"/>
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" android:permission="android.permission.INTERNET">
    <activity android:name="PPGActivity" android:screenOrientation="portrait" android:icon="@drawable/icon" android:launchMode="standard" android:label="@string/app_name" android:enabled="true">
        <intent-filter>
            <category android:name="android.intent.category.LAUNCHER" /><action android:name="android.intent.action.MAIN"/>

        </intent-filter>
    </activity>
    <activity android:name="InfoActivity" android:screenOrientation="portrait"></activity>
    <activity android:name="PlanActivity" android:screenOrientation="portrait"></activity>
    <activity android:name="TerminActivity" android:screenOrientation="portrait"></activity>
    <activity android:name="SplashActivity" android:screenOrientation="portrait" android:icon="@drawable/ppglogo2" android:launchMode="standard" android:label="@string/app_name" android:enabled="true">
    </activity>
</application> 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:46:32.387

尝试：

1.  验证活动确实可以在给定路径上找到，并且它们是公开的。
2.  更新adt&sdk&eclipse&java
3.  删除 bin&gen 文件夹，然后清理项目
4.  重新启动模拟器（或重新创建它），重新启动 eclipse/adt/OS。
5.  更改项目的构建顺序（通过 java 构建路径）。
6.  试试 Lint。它可能会找到问题的原因。
7.  创建一个新项目，看看它是否有效，然后将您的代码放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:00:04.947

尝试从您的设备/模拟器中完全删除该应用程序并从 Eclipse 重新安装。

# javascript - 如何使用 javascript 为 iframe 进行 http-authentication 登录？

> ID：11439927
> 
> 赞同：3
> 
> 时间：2012-07-11T19:24:02.473
> 
> 标签：javascript, iframe, http-authentication

我需要制作一个页面

1.  通过 http-authentication 自动登录网站
2.  使用 iframe 显示所述网站

我在想我可以使用 XHR 并直接指定登录标头，然后使用 javascript 创建 iframe。这有意义吗？它会起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T19:26:14.917

由于同源策略，您的 XHR 方法将不起作用。

但是，对于 HTTP 身份验证，您可以简单地在 url 中包含数据，`src`即`<iframe>`：

```
<iframe src="http://username:password@domain.tld/..."></iframe> 
```

我想我不必提及如果登录凭据很敏感，则不应该这样做——它们很可能会出现在浏览器历史记录中。

# c# - 为什么此方法返回的索引超出了数组的范围

> ID：11439928
> 
> 赞同：1
> 
> 时间：2012-07-11T19:24:11.813
> 
> 标签：c#, asp.net

我有一种方法，它使用 .NET 成员资格提供程序来使用配置文件提供程序为每个用户检索一些数据。但是我在我的应用程序日志中收到一个错误，指出

> 方法中`GetUsers():`的索引超出了数组的范围。

“in 方法`GetUsers()`”是由我的日志记录机制添加的。其余的是严格的.NET。

```
protected Dictionary<string, string> Getusers()
{
    try
    {
        Dictionary<string, string> userDictionary = new Dictionary<string, string>();

        //Get string array of users in role from RoleProvider
        var users = Roles.GetUsersInRole("MyRoleName");

        //loop through the array of usernames
        foreach (string user in users)
        {
            //Get user's first name and last name from the profile provider
            ProfileCommon profile = (ProfileCommon)ProfileCommon.Create(user);

            //add new key value pair with user name as the key and lastname,firstname as value
            userDictionary.Add(user, string.Concat(profile.LastName + ",", profile.FirstName));
        }

        //sort the dictionary by the value not the key
        //a little linq to do the sorting
        var sortedDict = (from entry in userDictionary orderby entry.Value ascending select entry).ToDictionary(pair => pair.Key, pair => pair.Value);

        return sortedDict;
    }
    catch (Exception ex)
    {
        LogController.LogError( "In Method -- Getusers() --" + ex.Message);
        //if error occurs return empty dictionary
        return new Dictionary<string, string>();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:30:10.210

你确定你在 userDictionary 中有值吗？

我想知道这是否是您看到异常的代码行

```
var sortedDict = (from entry in userDictionary orderby entry.Value ascending select entry).ToDictionary(pair => pair.Key, pair => pair.Value); 
```

如果您发布堆栈跟踪，它将更容易知道。

# javascript - 自定义菜单手风琴位置 - Jquery

> ID：11439929
> 
> 赞同：0
> 
> 时间：2012-07-11T19:24:14.450
> 
> 标签：javascript, jquery, jquery-mobile, jquery-ui-accordion, mobile-browser

**我正在使用 Vertical Menu Accordion Plugin 开发包含菜单 Accordion 的自定义选择菜单的移动网络。这里的问题是，为了看到自定义菜单中的最后一个元素，肯定需要向下滚动。但是，如果我再次按下菜单选项，它会移到顶部。Cookie 已设置。我可以看到我之前选择的菜单，只是它不会自动滚动到上一个位置。

对于以下示例。我有 1\. Home 和 2\. Menu1 和 3\. Menu2 和 4\. Menu3

I 按菜单 3 并选择菜单 3.2。它关闭菜单。在我再次按下菜单选项之后。我需要向下滚动才能看到选定的菜单。有什么办法可以自动滚动到相应的位置？

感谢您的时间和支持。**

```
<div id="slidemenu" class="dcjq-accordion">

            <!--
    <h3>MENU</h3> -->

    <ul class="menu" id="menu-1">
        <li class="parent"><a href="#" rel="external">HOME</a></li>
        <li class="parent"><a href="#">Menu1</a>
                         <ul id="mednu1Id">  
                            <li class="child"><a href="#>Menu1.1</a>
            </li>  
                            <li class="child"><a href="#">Menu1.2</a>
            </li>  
                            <li class="child"><a href="#>Menu1.3</a>
            </li>  
                            <li class="child"><a href="#">Menu1.4</a>
            </li> 
                         </ul>
                     </li> 
                     <li class="parent"><a href="#">Menu2</a>
                         <ul id="mednu2Id">  
                            <li class="child"><a href="#>Menu2.1</a>
            </li>  
                            <li class="child"><a href="#">Menu2.2</a>
            </li>  
                            <li class="child"><a href="#>Menu2.3</a>
            </li>  
                            <li class="child"><a href="#">Menu2.4</a>
            </li> 
                         </ul>
                     </li> 
                     <li class="parent"><a href="#">Menu3</a>
                         <ul id="mednu3Id">  
                            <li class="child"><a href="#>Menu3.1</a>
            </li>  
                            <li class="child"><a href="#">Menu3.2</a>
            </li>  
                            <li class="child"><a href="#>Menu3.3</a>
            </li>  
                            <li class="child"><a href="#">Menu3.4</a>
            </li> 
                         </ul>
                     </li> 
             </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:01:22.030

对于那些试图寻找答案的人。

这将起作用。对我来说效果很好。

```
$(window).scrollTop($("ul li ul a.active").position().top) 
```

# sql - Oracle 选择特定 ID 的最后一条记录

> ID：11439930
> 
> 赞同：-1
> 
> 时间：2012-07-11T19:24:14.810
> 
> 标签：sql, oracle11g

我在 oracle 11g 中有一个这样的表：

```
id   date  
---  ---
1    1-jun
1    2-jun
1    3-jun
2    1-jul
2    2-jul
2    3-jul 
```

我正在尝试提取与每个 id 对应的最新记录。我试过 group by，max 但我无法让它工作。我想要的是：

```
 id    date 
   ---   ---
    1    3-jun
    2    3-jul 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:26:08.877

尝试这个：

```
SELECT id, MAX(date)
  FROM <YOUR-TABLE>
 GROUP BY id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T06:17:19.647

试试这个

```
'SELECT *FROM (SELECT * FROM table ORDER BY date   DESC )tmp GROUP BY Id '; 
```

# php - PHP / MySQL：从表中选择相同的列但具有不同的主ID

> ID：11439932
> 
> 赞同：2
> 
> 时间：2012-07-11T19:24:27.033
> 
> 标签：php, mysql

我是 Web 开发的学生，我遇到了 MySQL 语句的问题。一个游戏社区要求我创建某种小网站，在那里他们可以看到他们禁止了哪些人。

我使用了 2 个表，“帐户”和“禁令”。账户的布局有点像这样

```
account_id  username  (more columns)
----        ----      ----
1           hey       ...
2           hdf       ...
3           sdf       ...
4           admin     ... 
```

“禁令”的布局是：

```
ban_id      account_id    bannedby_id    (more columns)
----        ----          ----           ----
1           1             4              ...
2           3             4              ... 
```

在这种情况下，ID 为 4 的管理员已禁止 ID 为 1 和 3 的帐户。我想创建一个查询，其中我同时拥有被禁止人员的姓名和在单个结果中禁止他的管理员的姓名。

我现在首先这样做：

```
SELECT bans.*, accounts.username FROM bans, accounts WHERE accounts.account_id = bans.account_id 
```

然后遍历所有结果并从我得到的结果中选择管理员名称：

```
while($baninfo = mysql_fetch_assoc($sqlBans))
{
    mysql_query("SELECT username FROM accounts WHERE account_id = '" . $baninfo['bannedby_id'] . "'");
} 
```

这行得通，但我认为这不是正确的方法。我认为必须有一个 MySQL 函数可以进行这样的查询，但我在 Google 上搜索过，但找不到。

为了清楚起见，这是我想从查询中获取结果的方式：

```
ban_id   account_id   account_username   bannedby_id   admin_username   (other columns from Bans table)
----     ----         ----               ----          ----             ----
1        1            hey                4             admin            ...
2        3            sdf                4             admin            ... 
```

如果这是一个非常愚蠢的问题，我很抱歉，但我可以解决它。我希望你们能给我一个解决方案。我经常使用这个网站，因为我遇到了一些小问题，而且它总是有很好的答案。

问候，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:28:24.437

使用accounts 表两次——每次作为内联视图并单独加入。

```
select a.username as banned, b.username as by_who
from accounts a, accounts b, ban
where a.account_id = ban.account_id
and b.account_id = ban.account_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:29:21.027

你想要的是一个`JOIN`操作：

```
SELECT ban_id, banned.account_id, banned.username AS account_username,
    bannedby_id, admin.username AS admin_username, etc....
FROM bans
LEFT JOIN accounts AS banned ON banned.account_id = bans.account_id
LEFT JOIN accounts AS admin ON banned.banned_by = admin.account_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:31:27.003

尝试

```
SELECT b.ban_id, ac.account_id, ac.username AS banned, b.bannedby_id AS mod FROM accounts ac, bans b WHERE ac.account_id = b.account_id ORDER BY b.bannedby_id DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:28:04.330

```
select b.ban_id,
    b.account_id,
    a.username as account_username,
    b.bannedby_id,
    a2.username as admin_username,
from bans b
inner join accounts a on b.account_id = a.account_id
inner join accounts a2 on b.bannedby_id = a2.account_id 
```

# ant - ant exec 任务变长 arg

> ID：11439936
> 
> 赞同：0
> 
> 时间：2012-07-11T19:24:48.320
> 
> 标签：ant

我有一个接受我需要执行的可变长度参数的命令。幸运的是，我需要传递给命令的 ant 参数的格式为“-Dkey=value”

蚂蚁引导 -Dkey1=value1 -Dkey2=value2 -Dkey3=value3 ....

-Dkey3=value3 可能存在也可能不存在。如果 key3 已定义，我需要传递给 cmd 的执行任务，如

```
cmd -Dkey1=value1 -Dkey2=value2 -Dkey3=value3 
```

否则 cmd -Dkey1=value1 -Dkey2=value2

我希望有一种更合理的方式来做类似的事情

```
<target name="bootstrap">
   <exec executable="cmd">
       <arg value="-Dkey1=${key1}"/>
       <arg value="-Dkey2=${key2}"/>
       <arg value="-Dkey3=${key3}">
           <condition>
                <isset property="key3"/>
           </condition>
       </arg>
       ....
    </exec> 
```

但 arg 不喜欢条件。

我也想过

```
<target name=bootstrap depends="with_key3, without_key3/>
<target name="with_key3" if="key3">
    <exec executable="cmd">
       <arg value="-Dkey1=${key1}"/>
       <arg value="-Dkey2=${key2}"/>
       <arg value="-Dkey3=${key3}"/>
    </exec>
</target>
<target name="without_key3" if="?????"
      <exec executable="cmd">
       <arg value="-Dkey1=${key1}"/>
       <arg value="-Dkey2=${key2}"/>
    </exec>
</target 
```

如何测试属性是否未预设？任何更好的解决方案

# css - 如何在 960 网格系统中拉伸背景？

> ID：11439937
> 
> 赞同：0
> 
> 时间：2012-07-11T19:24:49.210
> 
> 标签：css

基本上我遇到的问题是我为 div 设置了背景颜色，但左上角和右上角有白色间距。问题是如何正确删除这些空格？这是我的代码（我使用的是 960 网格系统）：

```
 <div id="logo">
    <div class="container_12">
        <div class="grid_12">
            Header and logo
        </div>
    </div>
    <div class="clear"></div>
</div>

<div id="main">
    <div class="container_12">
        <div class="grid_12">
            <div class="grid_6 alpha">Header text</div>
            <div class="grid_1"></div>
            <div class="grid_5 omega">Button</div>
        </div>
    </div>
            <div class="clear"></div>
</div> 
```

我的CSS是：

```
div#logo {
height: 175px;
background-color: #083d5e;

}

div#main {
height: 205px;
background-color: #01070b;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:54:21.717

960网格系统是为了做一个结构设计的，所以要遵循这个结构的div元素需要在里面。

```
<div class="container_12">
    <div class="grid_12">
       <div id="logo">
        Header and logo
       </div>
    </div>
</div> 
```

# ruby-on-rails - 如何在 Rails 中添加类似推特的@replies？

> ID：11439942
> 
> 赞同：0
> 
> 时间：2012-07-11T19:25:17.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我完成了 Hartl 的教程，过去几天一直在尝试添加[类似 twitter 的 @replies](http://ruby.railstutorial.org/chapters/following-users#sec%3aextensions_to_the_sample_application)，但无济于事。我在 Microposts 表中添加了一个 in_reply_to 列作为我认为可以用来引用给定用户 ID 的整数。截至目前，我正在使用正则表达式通过 Microposts 控制器搜索与给定用户名的匹配项。

Hartl 建议在 Micropost 模型中使用 include_replies 范围。我承认我不太确定要根据自动关联 rails 创建的内容或我必须告诉它的内容来确定在此范围内包含什么内容。

任何帮助将不胜感激。

用户模型

```
 has_many :microposts, dependent: :destroy
  has_many :replies, through: :microposts, source: :in_reply_to

  VALID_NAME_REGEX =  /\A[\w+\-.]\z/i
  validates :name, presence: true,
            format: { with: VALID_NAME_REGEX },
            length: { maximum: 20 },
            uniqueness: { case_sensitive: false }

...

  def feed
    Micropost.from_users_followed_by(self)
    Micropost.including_replies
  end 
```

微柱模型

```
class Micropost < ActiveRecord::Base
  attr_accessible :content
  belongs_to :user
  belongs_to :in_reply_to, class_name: "User"

  validates :user_id, presence: true
  validates :content, presence: true, length: { maximum: 140 }

  default_scope order: 'microposts.created_at DESC'
  scope :including_replies, where("user_id = in_reply_to")

  def self.from_users_followed_by(user)
    followed_user_ids = "SELECT followed_id FROM relationships
                         WHERE follower_id = :user_id"
    where("user_id IN (#{followed_user_ids}) OR user_id = :user_id",
          user_id: user.id)
  end
end 
```

微博控制器

```
class MicropostsController < ApplicationController
  before_filter :signed_in_user, only: [:create, :destroy]
  before_filter :correct_user,   only: :destroy
  before_filter :reply_to_user, only: :create

  def create
    @micropost = current_user.microposts.build(params[:micropost])
      if @micropost.save
      flash[:success] = "Micropost created!"
      redirect_to root_path
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end

  def destroy
    @micropost.destroy
    redirect_to root_path
  end

  private

    def correct_user
      @micropost = current_user.microposts.find_by_id(params[:id])
      redirect_to root_path if @micropost.nil?
    end

    def reply_to_user
      if reply_to = @micropost.content.match(/\A(@[\w+\-.])\z/i)
      @other_user = User.where(name: reply_to.to_s[1..-1])
        if @other_user && current_user.followed_users.includes(@other_user)
        @micropost.in_reply_to = @other_user.id
        end
      end
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:10:59.213

我已经开始研究这个，我注意到的第一件事是你的正则表达式寻找回复不起作用：

```
> /\A(@[\w+\-.])\z/i.match("@someName blabla")
=> nil 
```

所以第一个提示：测试你正在实施的每一点。另外，我认为你弄错了关联，我用过

```
 has_many :replies, foreign_key: "to_id", class_name: "Micropost" 
```

（我已将键从 in_reply_to 重命名为简单的“to”，因为使用下划线时出现了奇怪的弃用警告）。

但是您主要是问如何在Micropost中定义新的范围。我是这样做的：

```
scope :from_users_followed_by_including_replies, lambda { |user| followed_by_including_replies(user) } 
```

...

```
def self.followed_by_including_replies(user)
  followed_ids = %(SELECT followed_id FROM relationships
                   WHERE follower_id = :user_id)
  where("user_id IN (#{followed_ids}) OR user_id = :user_id OR to_id = :user_id",
        { :user_id => user })
 end 
```

我希望这会有所帮助。你可以看看我的整个实现

[https://github.com/htw-rails/TutorialSampleApp32/tree/reply](https://github.com/htw-rails/TutorialSampleApp32/tree/reply)

# html - Superfish 菜单 z-index 问题

> ID：11439947
> 
> 赞同：0
> 
> 时间：2012-07-11T19:25:42.780
> 
> 标签：html, css

我有一个简单的布局。

```
<div id="menu" style="height=30px"> </div>
<div id="content"> </div> 
```

superfish 菜单位于 MENU div 中。菜单 div 的高度必须为 30 像素，但由于不适合，因此无法看到超级鱼菜单下拉菜单。（Superfish 菜单下拉时为 200px）

我尝试将 z-index 设置为 MENU div，但它不起作用。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:57:07.180

`z-index`仅适用于`position:absolute`or `position:relative`。

# icalendar - vCalendar/iCalendar 解析时区

> ID：11439948
> 
> 赞同：2
> 
> 时间：2012-07-11T19:25:45.980
> 
> 标签：icalendar, vcalendar

我正在用 C++ 编写一些代码来解析 vCal/iCal 格式，它可以正确处理 UTC 和本地格式，但现在我找到了一个程序，它正在创建这种使用特定时区的更复杂的格式，但我不知道找出如何正确解析它。这是一个示例（对于多行格式感到抱歉，尝试了几件事来修复）：

```
BEGIN:VCALENDAR
METHOD:REQUEST
PRODID:Microsoft CDO for Microsoft Exchange
VERSION:2.0
BEGIN:VTIMEZONE
TZID:(GMT-06.00) Central Time (US & Canada)
X-MICROSOFT-CDO-TZID:11
BEGIN:STANDARD
DTSTART:16010101T020000
TZOFFSETFROM:-0500
TZOFFSETTO:-0600
RRULE:FREQ=YEARLY;WKST=MO;INTERVAL=1;BYMONTH=11;BYDAY=1SU
END:STANDARD
BEGIN:DAYLIGHT
DTSTART:16010101T020000
TZOFFSETFROM:-0600
TZOFFSETTO:-0500
RRULE:FREQ=YEARLY;WKST=MO;INTERVAL=1;BYMONTH=3;BYDAY=2SU
END:DAYLIGHT
END:VTIMEZONE
BEGIN:VEVENT
DTSTAMP:20120709T210422Z
DTSTART;TZID="(GMT-06.00) Central Time (US & Canada)":20120711T110000
SUMMARY:DR Kickoff Call
LOCATION:GoToMeeting Invitation
DTEND;TZID="(GMT-06.00) Central Time (US & Canada)":20120711T120000
DESCRIPTION:Hi Guys
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR 
```

我想将 DTSTART 转换为 UTC。我知道我需要使用 TZOFFSETTO，但是我如何（以稳健的方式）知道我应该使用 STANDARD 还是 DAYLIGHT 值？在下面的示例中，它是今天的日期，应该使用 STANDARD（基于我知道的实际会议时间），但我如何以编程方式知道呢？

我不认为基于偏移量或 TZID 名称做出任何假设是稳健的，因为这些 vCal/iCal 格式并不总是映射到任何标准。遗憾的是，生成应用程序不能只使用 UTC，但不像我可以控制 GoToMeeting.com，它们非常受欢迎，所以我也不能忽略这个问题。

我唯一能看到的可能会告诉我要使用哪个值是 RRULE，但我真的需要根据所有各种可能的 RRULE 值重复 DTSTART 以确定应用哪个值吗？

我的应用程序需要在 WinXP+ 上运行，我不想要求 Outlook 或 CDO 为我解析这些。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T14:49:01.480

实际上，您可以使用 TZID 名称，如此处所述：http: [//msdn.microsoft.com/en-us/library/aa563018 (loband).aspx](http://msdn.microsoft.com/en-us/library/aa563018(loband).aspx)

# javascript - 如何使用简单的javascript从下拉列表中动态更改值？

> ID：11439949
> 
> 赞同：0
> 
> 时间：2012-07-11T19:25:48.333
> 
> 标签：javascript, dynamic, drop-down-menu, checkbox, onchange

我有一个由复选框和下拉列表组成的表单。我想根据上面的客户端动作捕获以标签格式显示总量。

```
<?php
if ($AccountStatus == 'VIP')
{
?>
 <tr>
  <td>
   <input type="checkbox" name="events" value="seminar01" />
   A) Seminar 01
  </td>
  <td>
   01 pax
  </td>
 </tr>
<?php
}
?>
 <tr>
  <td>
   <input type="checkbox" name="events" value="seminar02" />
   B) Seminar 02
  </td>
  <td>
   <select name="events_dinner" onchange="copy();">
    <option value="01" selected="selected">01</option>
    <option value="02">02</option>
    <option value="03">03</option>
    <option value="04">04</option>
    <option value="05">05</option>
    <option value="06">06</option>
    <option value="07">07</option>
    <option value="08">08</option>
    <option value="09">09</option>
    <option value="10">10</option>
   </select>
   &nbsp;pax
  </td>
 </tr>
 <tr>
  <td>
   Total to pay: SGD <div id="label"></div>
  </td>
 </tr> 
```

现在我不知道如何编写适当的 Javascript 以在标签中显示我的总金额。

1、php脚本检查客户是VIP还是普通用户。
2、如果客户是VIP，则显示另一行，否则只显示一行。
3、每一行都有一个复选框
4、[seminar01]复选框如果被选中，那么由php脚本完成的数据库将保持记录，标签没有任何显示。
5、如果勾选了[seminar02]复选框，标签只激活并显示下拉列表中选择的[01]的值[20]，或下拉列表中选择的[02]显示的值[40]。
6、数据库再次从php脚本记录下来。

我关心的是标签部分如何使用javascript显示值以及从我的复选框和下拉列表中触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:35:55.707

```
function changeValue(){
     var select=document.getElementById('myselectbox_id');
     var index = 0;
     select.options[index].value = 'newvalue';
     select.options[index].text = 'newtext';
} 
```

在示例中更改索引值 0 以实现您的目标。更多信息[在这里](http://www.javascriptkit.com/jsref/select.shtml)

# c# - Linq to SQL：在运行时动态选择表

> ID：11439950
> 
> 赞同：0
> 
> 时间：2012-07-11T19:25:52.563
> 
> 标签：c#, .net, sql, linq, runtime

我正在尝试编写一个 linq to sql 查询，并根据用户提供的输入字符串在运行时动态选择要从哪个表中选择。现在我有一个选择语句可以做到这一点，但它只是重复相同的查询三次，唯一的区别是选定的表。有点像这样：

```
if (input == "94")
{
    var query = from i in db.Table94
        select new MyClass(i.A, i.B, i.C);
}

if (input == "95")
{
    var query = from i in db.Table95
        select new MyClass(i.A, i.B, i.C);
}

//more conditional queries

query = query.Where(addtionalFilteringDoneHere);
DataGridView.DataSource = query; 
```

使用条件 Where 子句很容易，但我正在为表选择寻找类似的东西。我厌倦了几件事，但它们没有用。就像是：

```
var query = from i in FetchTable(input)
    select new MyClass(i.A, i.B, i.C);

query = query.Where(addtionalFilteringDoneHere);

public returnType FetchTable(string input)
{
    //need help here
    return db.GetTable<conditionalTable>;
} 
```

我不知道返回类型是什么，或者即使有办法做到这一点。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:24:10.913

由于您尝试`MyClass`从不同的表创建实例，因此您遇到了创建动态查询的问题 - 这意味着您丢弃了 EF 或 LINQ-to-SQL - 或者您改为进行基本查找。

我建议进行基本查找，并建议您执行以下操作：

```
var fetch = new Dictionary<string, Func<Context, IQueryable<MyClass>>>()
{
    { "94", db => db.Table94.Select(i => new MyClass(i.A, i.B, i.C)) },
    { "95", db => db.Table95.Select(i => new MyClass(i.A, i.B, i.C)) },
}; 
```

这会在通用字典中创建强类型查询，您现在可以轻松地提取`MyClass`实例。

像这样的东西：

```
var query = fetch[input](db).Where(addtionalFilteringDoneHere);
DataGridView.DataSource = query; 
```

`fetch[input].Invoke(db)`如果您更喜欢该语法，则可以使用。

这看起来如何作为解决方案？

# regex - Perl Regex - 获取所有匹配项的偏移量而不是一个

> ID：11439952
> 
> 赞同：5
> 
> 时间：2012-07-11T19:26:00.567
> 
> 标签：regex, perl, match, offset

我想在文件中搜索字符串，然后获取所有匹配项的偏移量。文件内容如下：

```
sometext
sometext
AAA
sometext
AAA
AAA
sometext 
```

我正在将整个文件读入一个字符串`$text`，然后进行正则表达式匹配，`AAA`如下所示：

```
if($text =~ m/AAA/g) {
    $offset = $-[0];
} 
```

**这将只给出一个偏移量`AAA`。我怎样才能得到所有比赛的抵消？**

我知道我们可以使用如下语法获取数组中的所有匹配项：

`my @matches = ($text =~ m/AAA/g);`

但我想要偏移量不匹配的字符串。

目前我正在使用以下代码来获取所有匹配项的偏移量：

```
my $text= "sometextAAAsometextAAA";
my $regex = 'AAA';
my @matches = ();

while ($text =~ /($regex)/gi){
    my $match = $1;
    my $length = length($&);
    my $pos = length($`);
    my $start = $pos + 1;
    my $end = $pos + $length;
    my $hitpos = "$start-$end";
    push @matches, "$match found at $hitpos ";
}

print "$_\n" foreach @matches; 
```

但是有没有更简单的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T20:23:13.967

您已经知道应该使用`$-[0]`! 代替

```
while ($text =~ /($regex)/gi){
    my $match = $1;
    my $length = length($&);
    my $pos = length($`);
    my $start = $pos + 1;
    my $end = $pos + $length;
    my $hitpos = "$start-$end";
    push @matches, "$match found at $hitpos ";
} 
```

和

```
while ($text =~ /($regex)/gi){
    push @matches, "$1 found at $-[0]";
} 
```

也就是说，我非常喜欢将计算与输出格式分开，所以我会这样做

```
while ($text =~ /($regex)/gi){
    push @matches, [ $1, $-[0] ];
} 
```

PS——除非你展开了一个while循环，否则`if (/.../g)`没有意义。充其量，`/g`什么都不做。更糟糕的是，你会得到不正确的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T19:37:41.177

我认为 Perl 中没有内置的方法可以做到这一点。但是从[如何在 Perl 中找到正则表达式匹配的位置？](https://stackoverflow.com/questions/87380/how-can-i-find-the-location-of-a-regex-match-in-perl/87504#87504)：

```
sub match_all_positions {
    my ($regex, $string) = @_;
    my @ret;
    while ($string =~ /$regex/g) {
        push @ret, [ $-[0], $+[0] ];
    }
    return @ret
} 
```

# iphone - 在 iPhone 上，页脚不会扩展到 100% 宽度，为什么？

> ID：11439954
> 
> 赞同：1
> 
> 时间：2012-07-11T19:26:03.603
> 
> 标签：iphone, html, css, mobile-safari, responsive-design

我几乎完成了这个网站，但有一个问题。在 iphone（以及可能的其他移动设备）上，页脚在右下角被截断，留下一个空白区域，即使我已将页脚设置为 min-width:100%。我不确定是什么原因造成的，希望能对此提供任何帮助。你可以在[这里访问网站](http://gloryillustration.com/)

我已将下面的 HTML 分解为基本要素。

```
<body>

<div class="content">

    <header>
        <img /> 
    </header>

    <img />
    <h3>Title</h3><br>
    <p>
        Paragraph
    </p>
    <div class="push"></div>

</div>

<div id="footer">
    <a href="page.html">
        <img />
    </a>
    <ul>
        <li>
            <h3>footer title</h3>
            <p><a href="page.html">footer Link</a></p>
        </li>
        <li>
            <h3>footer title</h3>
            <p><a href="page.html">footer Link</a></p>
        </li>
        <li>
            <h3>footer title</h3>
            <p><a href="page.html">footer Link</a></p>
        </li>
    </ul>
        <p>copyright text<a href="page.html">link</a></p>
</div>

</body> 
```

和 CSS

```
body{
text-align: center;
padding-top: 40px;
color: #333;
margin: 0px;
width: 100%;
    min-width: 980px;
}

.content{
width:1080px;
margin: Auto;
}

#footer {
background-color: #000;
float: left;
height:250px;
min-width:100%;
margin-top:70px;
padding-top:45px;
}

#footer ul{
list-style:none;
padding: 0px;
margin-top:30px;
} 
```

谢谢！

编辑：

好的，我遵循了向网站添加视口元标记的建议。然而，这让我更加困惑。网站不是按比例显示在屏幕上，而是现在显示方式过于放大，页脚现在是一个在左下角呜咽的小方块。我已经像这样添加了视口元标记

```
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head> 
```

[你可以在这里](http://gloryillustration.com/tests/test3.html)看到这个 我是不是在某种程度上写错了视口元数据？错误的价值观？

Edit2：我还想指出，主体*延伸*到视口的整个宽度，你可以在这里看到：http: [//gloryillustration.com/tests/test9.html](http://gloryillustration.com/tests/test9.html) 我在哪里制作了背景颜色身体灰色，所以你可以看到它只是行为不端的页脚！我相信 body 标签和 div 标签在这方面的行为是相同的，但他们没有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:36:44.560

使用视口元标记使您的网站支持移动浏览器。

这是一个很好的描述：

[https://developer.mozilla.org/en/Mobile/Viewport_meta_tag/](https://developer.mozilla.org/en/Mobile/Viewport_meta_tag/)

& 这里是 github 上关于这个的一个很好的讨论（必须阅读第五条评论）：

[https://github.com/h5bp/html5-boilerplate/issues/1099](https://github.com/h5bp/html5-boilerplate/issues/1099)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T19:06:56.663

我不确定它有多正确，但是我在我的网站上给出了这个元行，我解决了这个问题：

```
<meta name="viewport" content="width=320, initial-scale=0.29"> 
```

宽度是 iPhone 的尺寸（水平）。initial-scale 是实际尺寸（1100px）与 iPhone 尺寸（320px）之间的比例

# c++ - 如何编写一个监听网络流量的程序？（即wireshark）

> ID：11439961
> 
> 赞同：2
> 
> 时间：2012-07-11T19:26:24.323
> 
> 标签：c++, python, network-programming, operating-system, wireshark

> **可能重复：**
> [如何以编程方式从被动嗅探中收集数据包？](https://stackoverflow.com/questions/3798733/how-do-i-programatically-collect-packets-from-passively-sniffing)

我有兴趣弄清楚如何编写像wireshark这样的程序。该程序应该能够在不中断网络流量的情况下侦听任何端口。

确切的编程语言不如操作系统原理本身有趣，所以假设 C++ 或 Python 都可以正常工作。

您将如何在 Windows 上执行此操作？在 Linux 上？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:30:02.667

在 Linux 上使用**libpcap**，在 Windows 上使用它的 windows 端口[**winpcap**](http://www.winpcap.org/)。

由于您使用 python 标记了问题[：](/questions/tagged/python "显示标记为“python”的问题") libpcap有 python 绑定 ( [**pylibpcap**](http://pylibpcap.sourceforge.net/) )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:29:55.733

在 Windows 上，您可能需要查看 WinPcap（有据可查的数据包捕获库）。您可能也有兴趣`filter driver`为您的网络适配器开发一个以捕获网络流量。

**参考**： http: [//www.winpcap.org/](http://www.winpcap.org/)

在 Linux 上（尤其是 Python），您可以查看套接字库。它允许您打开一个`INET`套接字并嗅探您指定的端口。

**参考**：[http ://docs.python.org/library/socket.html](http://docs.python.org/library/socket.html)

享受和好运！

# c++ - 复杂继承情况下的模糊函数调用

> ID：11439963
> 
> 赞同：2
> 
> 时间：2012-07-11T19:26:32.443
> 
> 标签：c++, inheritance, ambiguous

我有以下代码：-

```
#include <iostream>
#include <vector>

using namespace std;

template <typename I>
class A {
  public:
    void f (I* i) {
      lis.push_back(i);
    }
    vector <I*> lis;
};

class B {
  public:
    int b;
};

class C {
  public:
    double c;
};

class D : public A<B>,
          public A<C> {
  public:
    void g () {
      cout<<"g\n";
    }
};

class E : public B, public C {
  public:
    float e;
};

int main() {
  E* e;
  D d;
  B* b = (B*) e;
  d.f (b);
} 
```

这给了我一个错误说：-

```
ambig.cpp: In function ‘int main()’:
ambig.cpp:42:5: error: request for member ‘f’ is ambiguous
ambig.cpp:9:10: error: candidates are: void A<I>::f(I*) [with I = C]
ambig.cpp:9:10: error:                 void A<I>::f(I*) [with I = B] 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T20:06:17.240

```
class D : public A<B>,
          public A<C> {
  public:
    using A<B>::f;  // <=== use
    using A<C>::f;  // <=== this 
```

标准中使用冗长的语言对其进行了详细说明，但简单的规则是：所有成员函数重载必须来自同一个类。

# sql - 如何将多个用户帖子合并到一个提要中？

> ID：11439969
> 
> 赞同：0
> 
> 时间：2012-07-11T19:27:15.587
> 
> 标签：sql, django, feed, user-input

我正在将 Django 与 Python 一起使用（但我认为这无关紧要；我只需要知道如何执行此操作），并且我想知道如何将来自单个用户的帖子合并到一个提要中。例如，用户`a`正在“关注”（订阅）人员`b`，`c`并且`d`。还有其他用户，例如`e`，哪个人`a`没有关注。其他用户，例如`b`and`c`也可以关注其他用户。用户可以不关注任何人、某些人或所有人。

我想按`a`日期顺序选择用户关注的所有帖子。所有帖子都存储在名为 的 PostgreSQL 表中，其中包含、和`user_post`列。`id``user_id``content``time`

有什么办法可以有效地做到这一点？我知道 Twitter、tumblr 和 Facebook 等网站都是这样做的。我不是在寻找 Python 特定的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:47:50.733

[`in`您可以使用lookup](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#in)轻松完成此操作。您只需要获取被关注用户的 id，然后以这些用户为作者查询所有帖子。考虑到我不知道您的模型方案，这是一些粗略的代码。

```
following = active_user.following_set.all().values_list('id', flat=True)
posts = Post.objects.filter(author__in=following) 
```

# c++ - 如何防止类型被声明为按值参数？

> ID：11439971
> 
> 赞同：2
> 
> 时间：2012-07-11T19:27:27.870
> 
> 标签：c++, compiler-errors, pass-by-value

我有一堂课`T`，我想让这段代码不编译：

```
void PassByValue(T); 
```

但允许所有这些：

```
void PassByRefernce(T&);
void PassByPointer(T*); 
```

注意：我希望它是非法的（即生成编译错误）来**声明**一个`T`按值取值的函数，即使该函数从未使用或定义过。

* * *

编辑：请注意，以下是完全有效的 C++：

```
class T {
  public:
    T() {}
  private:
    // Prevent copy/assignment
    T(const T&);
    T& operator=(const T&);
};

void Fn(T);  // I want this line to error, even if the function is never used.

int main() { return 0; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T19:48:38.507

严格来说这不是可能的（见下文），您能做的最好的事情就是通过使此类功能不可复制来使此类功能无法使用/无法定义`T`。

这是通过删除复制ctor来完成的，如下所示：

```
class T
{
    T(const T&) =delete;
    T& operator=(const T&) =delete;
    .....
}; 
```

如果您不能使用 C++11，则将这些声明设为私有也会产生相同的效果：

```
class T
{
public:
    .....
private:
    T(const T&);
    T& operator=(const T&);
}; 
```

不需要实施。

这样，类就不能从另一个实例接收状态，因此传递给函数的唯一方法是通过间接（通过引用或指针）。

* * *

当然，这不会“解决”（字面上）原始问题，因为声明诸如

```
void func(T); 
```

还是有可能的。但是，不可能调用该函数，因此 T 的安全性被授予。

不幸的是，对于今天如何定义 C++ 语言，不存在“干净”的解决方案，因为像这样的代码

```
struct A;
void func(A); 
```

必须编译。

尽管代码本身什么都不做（它只是声明了一些符号），但没有什么`struct A;`要说的关于`A`语义的事情。要拒绝`func`我们必须在包含或包含完整`A`声明的翻译单元（CPP 文件）中的声明（这样我们就可以知道不可能有副本），那必须 - 在这一点上 - 在 func 之前。但这并不一定发生在包含上述片段的所有翻译单元中。

有些语言可以做到这一点：想想 D，只是为了留在“系统语言域”中。但是 D - 允许“在完全声明之前使用” - 不是“包含源”而是“导入模块”（编译器可以访问完整的定义）支持迭代翻译（如果某些内容尚未定义并且稍后编译器定义返回“优化”并重复，直到它“收敛”为一致的代码，或者如果发现不一致则拒绝该代码）。并且 - 由于其“导入机制”和语义/句法分离，无法链接到（大部分）C++，而只接受 C 编译的库或 objs。（并且需要标题的 C 到 D 翻译！）

C++ 翻译通行证会演变成类似 D 的通行证吗？很难说。非常不可能，而必须保留 C“包含模型”的 C 向后兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:49:22.033

你有两个选择。要么将复制构造函数设为私有，要么将 T 设为抽象类。

# asp.net - 会话或视图状态字典

> ID：11439973
> 
> 赞同：1
> 
> 时间：2012-07-11T19:27:38.690
> 
> 标签：asp.net, session, dictionary, viewstate

我对 VB 很老，但对 ASP.NET 很陌生

我在新网站上写了几本词典。问题是如果多个用户同时使用这些词典，一个用户会得到另一个用户的信息。

作为 ASP.NET 的新手，解决此问题的最佳方法是什么？会话状态或视图状态？我看错方向了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:43:15.663

**服务器端：**

**会话**是特定于用户的，或者您可以说特定于浏览器。它不会在站点的所有用户之间共享。Session 可以保存任何对象数据类型。

```
Session["key"] = "value"; 
```

**应用程序**在站点上的所有用户之间共享。

```
Application["key"] = "value"; 
```

**客户端：**

ViewState 数据不会在用户之间共享，甚至不会在页面之间共享。它在回发期间保留数据。

```
ViewState["key"] = "value"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:36:23.903

会话将保存特定于用户的信息，并持续到用户的浏览会话。ViewState 将保存特定于用户当前浏览的页面上的控件的信息。

如果您想存储特定于用户的信息并且需要在他们浏览网站时保留在他们身边，那么 Session 是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T20:22:57.477

如果您想访问`User`诸如姓名、姓氏、...等信息之类的数据，`Session`是最佳选择，因为此数据不会为当前用户更改。但是如果你想在一个变量中存储一个值，你应该考虑并发问题。例如，如果你有一个带有简单按钮和文本框的页面，在单击存储在其中的按钮文本框值后`Session`，如果用户打开该页面的 2 个实例那么就会有一个会话冲突。每个按钮点击都会覆盖写入会话数据。如果您想将变量存储在可以使用的页面中，`ViewState`但您应该考虑用户可以轻松看到此值。如果您想保护值，您应该使用`View State Encryption`. 如果你想在页面之间传递值，你可以使用`Query String`

祝你好运

# c# - 为什么是列表 .使用比较器排序 .Default 是等效自定义比较器的两倍多？

> ID：11439976
> 
> 赞同：16
> 
> 时间：2012-07-11T19:27:45.447
> 
> 标签：c#, performance, sorting

### 结果

使用 1000 万个随机`int`s 的列表（每次相同的种子，平均 10 次重复）：

`listCopy.Sort(Comparer<int>.Default)`需要**314 毫秒**。

使用

```
sealed class IntComparer : IComparer<int>
{
  public int Compare(int x, int y)
  {
    return x < y ? -1 : (x == y ? 0 : 1);
  }
} 
```

`listCopy.Sort(new IntComparer())`需要**716 毫秒**。

一些变化：

*   使用`struct IntComparer`代替`sealed class`：771ms
*   使用`public int Compare(int x, int y) { return x.CompareTo(y); }`：809ms

### 评论

`Comparer<int>.Default`返回一个`GenericComparer<int>`。根据 dotPeek，我们有：

```
internal class GenericComparer<T> : Comparer<T> where T : IComparable<T>
{
  public override int Compare(T x, T y)
  {
    if ((object) x != null)
    {
      if ((object) y != null)
        return x.CompareTo(y);
      else
        return 1;
    }
    else
      return (object) y != null ? -1 : 0;
  }

...
} 
```

显然，这不应该比我`IntComparer`使用`CompareTo`.

我没有在 中找到任何相关内容`ArraySortHelper<T>`，这似乎是`List<T>.Sort`.

我只能猜测 JIT 在这里做了一些神奇的特殊情况（替换`Comparer<int>.Default`由不进行任何`IComparer<T>.Compare`调用的专用排序实现使用的排序，或类似的东西）？

编辑：上面的时间太低了`5.9214729782462845`（`Stopwatch`并且`TimeSpan`对“滴答声”有不同的定义）。不过不影响重点。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-11T20:24:39.367

原因在[Reference Source](http://referencesource.microsoft.com/#mscorlib/system/array.cs,54496ee33e3b155a)、 system/array.cs 源代码文件中很容易看到：

```
 [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
   public static void Sort<T>(T[] array, int index, int length, System.Collections.Generic.IComparer<T> comparer) {
       // Argument checking code omitted
       //...

       if (length > 1) {
           // <STRIP>
           // TrySZSort is still faster than the generic implementation.
           // The reason is Int32.CompareTo is still expensive than just using "<" or ">".
           // </STRIP>
           if ( comparer == null || comparer == Comparer<T>.Default ) {
               if(TrySZSort(array, null, index, index + length - 1)) {
                   return;
               }
           }

           ArraySortHelper<T>.Default.Sort(array, index, length, comparer);
       }
   } 
```

标记的注释`<STRIP>`解释了它，尽管它的英文很烂:) 默认比较器的代码路径通过 TrySZSort()，这是一个在 CLR 中实现并用 C++ 编写的函数。[您可以从SSCLI20](http://www.microsoft.com/en-us/download/details.aspx?id=4917)获取它的源代码，它在 clr/src/vm/comarrayhelpers.cpp 中实现。它使用一个名为`ArrayHelpers<T>::QuickSort()`.

它从能够使用`<`运算符中获得速度优势，单个 cpu 指令而不是 Int32.CompareTo() 所需的 10 条指令。或者换句话说， IComparable<>.CompareTo 被过度指定用于简单排序。

这是一个微优化，.NET Framework 有很多很多。位于依赖链最底部的代码不可避免的命运，微软永远不能假设他们的代码在客户的应用程序中不会对速度至关重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T19:57:13.780

ILSpy 这样反编译：

```
 public override int Compare(T x, T y)
    {
        if (x != null)
        {
            if (y != null)
            {
                return x.CompareTo(y);
            }
            return 1;
        }
        else
        {
            if (y != null)
            {
                return -1;
            }
            return 0;
        }
    } 
```

null 检查将始终评估为`true`值类型，因此它们将被优化掉；最终结果将是

```
public override int Compare(T x, T y)
{
    return x.CompareTo(y);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T20:19:21.280

Int32 的默认比较器是 CompareTo(int,int) 方法。您对默认比较器的假设是不正确的。

> IComparable 接口提供了一种强类型比较方法，用于对泛型集合对象的成员进行排序。因此，通常不直接从开发人员代码中调用它。相反，它由 List.Sort() 和 Add 等方法自动调用。

[http://msdn.microsoft.com/en-us/library/4d7sx9hd.aspx](http://msdn.microsoft.com/en-us/library/4d7sx9hd.aspx)。提到的 IComparable 接口定义了 CompareTo 方法。

因此，我们应该期望您的比较器具有相同的速度。那么为什么会慢一些呢？如果我们深入研究 .Net 中的 Sort 方法，我们最终会看到这一行：

```
if ((length > 1) && (((comparer != null) && (comparer != Comparer<T>.Default)) || !TrySZSort(array, null, index, (index + length) - 1)))
{
    ArraySortHelper<T>.Default.Sort(array, index, length, comparer);
} 
```

如果比较器等于该类型的默认比较器，则数组排序将尝试使用内部优化的排序方法。您的比较器不是默认比较器，因此它会跳过优化排序。

# c# - 在我的 MVC 3 .NET 应用程序中，如何在网站启动时更改地址栏中的 URL？

> ID：11439978
> 
> 赞同：1
> 
> 时间：2012-07-11T19:27:46.630
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

当我开始调试我的 MVC Web 应用程序时，地址栏中的 URL 如下：

```
http://localhost:#####/ 
```

这称为 Home/Index 路由。当我在地址栏中**开始调试时**，有没有办法包含 Home/Index 部分，如下所示：

```
http://localhost:#####/Home/Index 
```

我不太明白*为什么*地址首先不显示 Home/Index 部分。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:35:01.347

只需在项目|属性中设置它：

![在此处输入图像描述](../Images/1b09dda87b888fb231687a18d77510c9.png)

选择特定页面并将其设置为： `Home/Index`

但请考虑真正的访问者将如何访问您的网站，以及您希望发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T19:44:34.650

> 我不太明白为什么地址首先不显示 Home/Index 部分。有人可以澄清一下吗？

原因是在 MVC 的设计中，作者很可能认为最好隐藏无用的信息。

例如，这两个都使用默认路由在同一个控制器上运行相同的操作：

```
http://localhost:xxxx/
http://localhost:xxxx/Home/Index 
```

第二个有什么好处？它更长吗？

因此，默认情况下，如果路由匹配或部分匹配，它将从 url 中删除。

使用默认控制器（带有 AboutController），以下 url 也是相同的：

```
http://localhost:xxxx/About
http://localhost:xxxx/About/Index 
```

再次，第二个的优势是什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T19:34:36.357

您需要通过以下方式在 RegisterRoute 方法中注册路由：

```
routes.MapRoute(
            "Default",                                              // Route name
            "{controller}/{action}/{id}",                           // URL with parameters
            new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
        ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:11:40.217

第二个没有优势。第二个路径被用作第一个路径的默认路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T19:31:15.927

您几乎可以肯定在 global.asax.cs 中[设置了默认路由。](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T19:32:09.973

[在项目属性的 Web 选项卡中](http://msdn.microsoft.com/en-us/library/aa983445.aspx)指定**起始 URL**（*绝对*）或[**特定页面**](https://stackoverflow.com/a/1982117/175679)（*相对*）。

**开始操作**->**开始 URL**：`http://localhost:#####/Home/Index`

# mstest - 无法在 VS2012RC 中运行单元测试

> ID：11439984
> 
> 赞同：1
> 
> 时间：2012-07-11T19:27:56.037
> 
> 标签：mstest, windows-runtime, visual-studio-2012

我正在尝试为 Windows 8 Metro 类库运行单元测试，但在输出窗口中出现以下 2 个错误：

**输出：**

> ------ 运行测试开始 ------ 错误：DEP3000：尝试停止应用程序失败。这可能会导致部署失败。应用程序包只能作为 Visual Studio 生成操作的一部分关闭。

```
Failed to activate Metro style unit test executor. Error: The application cannot be started. Try reinstalling the application to fix the problem.
========== Run test finished: 0 run (0:00:01.2818304) ========== 
```

**其他输出：**

> ------ 发现测试开始 ------ ========== 发现测试完成：发现 7 (0:00:00.6471091) ========== -- ---- 运行测试开始 ------ 无法激活 Metro 风格的单元测试执行器。错误：无法启动应用程序。尝试重新安装应用程序以解决问题。========== 运行测试完成：0 次运行 (0:00:02.0105835) ==========

有没有人遇到过这个问题？

其他 Win8 类库或应用程序中的单元测试工作正常。

我认为这与解决方案有关。昨天一切顺利。我猜有一个Windows更新，也许这搞砸了？

我尝试过的事情：

*   已卸载的 R#
*   重新安装 Visual Studio 2012 RC
*   在其他类库中尝试过单元测试（作品）
*   在 Windows 8 应用程序中尝试过单元测试（有效）
*   清洁/重建解决方案
*   调试和发布配置
*   在解决方案中添加了另一个测试项目并卸载其他项目（作品）

技术规格：

*   Visual Studio 2012 RC 版本：11.0.50522.1
*   Windows 8 RC 构建 8400
*   64 位操作系统
*   有resharper 7，卸载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:43:33.800

我遇到了同样的问题，但是当我将构建配置设置为 x86（配置管理器，活动解决方案平台）时，它突然起作用了。如果我将配置设置为 AnyCPU 或 x64，我会收到“无法执行...”错误。
我相信测试执行器是 32 位应用程序，它不能加载 64 位库。

# c++ - SO_LINGER 选项不会导致 close() 等待

> ID：11439986
> 
> 赞同：1
> 
> 时间：2012-07-11T19:28:00.553
> 
> 标签：c++, sockets, network-programming

我编写了以下代码以创建一个**回显服务器**（我写入标准输出的数据从我的 PC 移动到服务器并返回到我的 PC）。在代码中，我在套接字中**设置了 SO_LINGER 选项。**因此，当我按下`Ctrl`+`C`导致 client.cpp 向 server.cpp 发送 FIN 时，***client.cpp 的 close() 应该等待 10 秒，以便 server.cpp 的套接字发回 FIN****。*

但是我发现**client.cpp**在按下`Ctrl`+后立即完成执行并退出，即使**close（）函数也没有返回-1**，如果对方在l_linger中提到的时间之前没有发送FIN，它应该有expires （**我确定服务器没有发送 FIN 或者它必须已在 tcpdump 中列出**。）除非我在其终端上按+ ，否则服务器端没有发送 FIN 。屏幕截图中显示了在我按下服务器终端上的+之前的 tcpdump ：`C`****`Ctrl``C``Ctrl``C`****

 ****![](../Images/9602bc81e7febcaef6337b58ddcc593e.png)

上面突出显示的行是客户的 FIN。

**客户端.cpp：**

```
int main()
{
    int clifd;
    clifd=socket(AF_INET,SOCK_STREAM, IPPROTO_TCP);
    sockaddr_in serv;
    bzero(&serv, sizeof(serv));
    serv.sin_family=AF_INET;
    serv.sin_port=htons(3345);
    inet_aton("127.0.0.1", &(serv.sin_addr));

    linger lin;
    unsigned int y=sizeof(lin);
    lin.l_onoff=1;
    lin.l_linger=10;
    setsockopt(clifd,SOL_SOCKET, SO_LINGER,(void*)(&lin), y);  

    connect(clifd, (sockaddr*)(&serv), sizeof(serv));
    int n,m;
    char data[100];
    char recvd[100];
    for(;;)
    {
        fgets(data, 100,stdin );
        n=strlen(data);
        cout<<"You have written "<<n<<endl;

        if(n>0)
        {
            while(n>0)
            {  
                m=write(clifd,data,n);
                n=n-m;
            }
        }

        n=read(clifd, recvd, 100);
        cout<<"Server echoed back "<<n<<endl; 

        if(n>0)
        {
            while(n>0)
            {
                m=fputs(data,stdout);  
                cout<<"m is"<<m<<endl; 
                fflush(stdout);
                n=n-m;
            }
            //cout<<data<<endl;
        }
    }
    int z=close(clifd);
    if(z==-1)
        cout<<"close returned -1 "<<endl; ***//this doesn't get printed***
} 
```

**服务器.cpp：**

```
void reflect(int x)
{
    int n;
    int m;
    char data[100];
    cout<<"Entered reflect function"<<endl; 

    for(;;)
    {
        n=read(x,data, 100); 
        cout<<"Client sent "<<n<<endl; 

        if(n>0)
        {
            while(n>0)
            {
                m=write(x,data,n);
                n=n-m;
            }
            cout<<"Successfully echoed back to client"<<endl;  
        }
    }//end of for loop
}

int main()
{
    sockaddr_in serv;
    bzero(&serv, sizeof(serv));
    serv.sin_family=AF_INET;
    serv.sin_port=htons(3345);
    inet_aton("127.0.0.1", &(serv.sin_addr));

    int servfd=socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    int x;
    x=bind(servfd, (sockaddr*)(&serv), sizeof(serv));

    cout<<"Bind returned"<<x<<endl; //this displays x as 0

    listen(servfd, 5);
    sockaddr cli;
    int connfd;
    pid_t id=-1;
    socklen_t siz=sizeof(cli);
    for(;;)
    {
        if((connfd=accept(servfd, &cli, &siz))>=0)
            id=fork();

        if(id==0)
            reflect(connfd);
        else 
            continue;
    }
} 
```

为什么客户端的 close() 不等待？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:36:55.840

> 为什么客户端的 close() 不等待？

你没有打电话给`close()`你的客户。`for`紧接在您调用之前的循环`close()`永远不会退出，因此`close()`永远不会发生。

在您的控制台中键入`CTRL`-`C`会导致程序立即退出，而不执行任何剩余操作。

由于`close()`从未被调用，因此您的其余问题（应该`close()`等待？我应该使用`closesocket()`吗？等）没有实际意义。

如果您确实希望能够退出`for(;;)`循环，请尝试以下操作：

```
for(;;)
{
  if(fgets(data, 100,stdin ) == NULL)
    break;
  ... rest of loop goes here ... 
```

然后，当您运行客户端程序时，不要使用`CTRL`-终止它`C`，而是键入`CTRL`-`D`作为该行中唯一的字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T19:44:50.000

要扩展上面的答案，如果您想`close()`调用您的函数，请对您的客户端进行这些相对简单的更改：

```
#include <signal.h>

volatile bool stop_now = false;

// This function will be called when SIGINT (Ctrl+C)
// is received, and will set this global flag that
// will terminate your loop below.
void app_stopped(int sig)
{
    stop_now = true;
}

int main()
{
   // setup to catch Ctrl+C
   signal(SIGINT, app_stopped);

   ...

   // for(;;)
   // becomes:
   while(!stop_now)
   {
      ...
   }
   ...
} 
```

现在，当您发送 SIGINT（通过`Ctrl+C`或通过`kill -s INT`）时，您的程序将正常停止并`close()`调用您的函数。您可以从那里开始进行故障排除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T19:38:45.073

从[`linger`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms739165%28v=vs.85%29.aspx)MSDN 上的参考资料（如果您不信任 msdn，您可以在[此处](http://www.gnu.org/software/libc/manual/html_node/Socket_002dLevel-Options.html#Socket_002dLevel-Options)找到相同的信息）

> linger 结构维护有关特定套接字的信息，该信息指定当数据排队等待发送并且在套接字上调用 closesocket 函数时该套接字应如何表现。

所以它会等到所有数据都发送完毕，而不是等到收到 FIN。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T23:58:09.010

> 因此，client.cpp 的 close() 应该等待 10 秒，以便 server.cpp 的套接字发回一个 FIN。

这是不正确的。它应该等待所有传出数据和传出 FIN 发送完毕，或等待计时器到期。任何地方都没有声明可以让您期望它等待传入的 FIN。****

# cassandra - Cassandra CQL：计数器列的创建和修改

> ID：11439992
> 
> 赞同：5
> 
> 时间：2012-07-11T19:28:18.913
> 
> 标签：cassandra, cql

我正在尝试通过 Java 创建一个计数器列，但在运行它时出现错误。我正在使用 CQL 3.0.0 和 Cassandra 1.1.2

```
Statement st = con.createStatement();
String data = "CREATE COLUMNFAMILY user_count(priKey text PRIMARY KEY, countME counter)";
st.execute(data); 
```

这是我得到的错误：

```
Exception in thread "main" java.sql.SQLSyntaxErrorException:        
org.apache.cassandra.config.ConfigurationException: Cannot add a counter column   
(countme) in a non counter column family

'CREATE COLUMNFAMILY user_count(priKey text PRIMARY KEY, countME counter)'
at org.apache.cassandra.cql.jdbc.CassandraStatement.doExecute(CassandraStatement.java:179)
at org.apache.cassandra.cql.jdbc.CassandraStatement.execute(CassandraStatement.java:203)
at cassandratest.EdgeCreator.aaListData(EdgeCreator.java:1323)
at cassandratest.Main.main(Main.java:214) 
```

我已经尝试过[Cassandra cql 比较器类型计数器](https://stackoverflow.com/questions/8813211/cassandra-cql-comparator-type-counter?rq=1)的答案，但我知道 CQL 3.0.0 的 default_validation 不再可用。我搜索了文档，但一无所获。我正在寻找如何使用 Java 创建一个计数器列族并增加它。我在这里先向您的帮助表示感谢！

这也是我在这里的第一篇文章，所以如果有任何问题，请告诉我，以便我将来更正。

**更新** 在 cqlsh 中使用 CREATE 语句时，我得到一个 ConfigurationException。cqlsh 会话如下：

```
Connected to Test Cluster at localhost:9160.
[cqlsh 3.0.0 | Cassandra 1.1.0 | CQL spec 3.0.0 | Thrift protocol 19.30.0]
Use HELP for help.
cqlsh> use "Keyspace2";
cqlsh:Keyspace2> CREATE COLUMNFAMILY user_count(priKey text PRIMARY KEY, countME
counter);
Bad Request: org.apache.cassandra.config.ConfigurationException: Cannot add a 
counter column (countme) in a non counter column family
cqlsh:Keyspace2> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:00:48.573

你确定你使用的是cql 3？从您的回溯中看起来您不是，如果您不小心使用了 cql 2，这就是我所期望的错误。

该 create 语句应该在 cql 3 中工作。

**编辑：**您使用的是 cql 3，但您没有使用 Cassandra 1.1.2。这是 1.1.0 的一个已知错误；如果升级到 1.1.2，它应该被修复。

# java - 可变长度参数列表中的类型检查

> ID：11439999
> 
> 赞同：1
> 
> 时间：2012-07-11T19:28:53.587
> 
> 标签：java

我需要创建一个 TreeNode 类，它将能够存储**两种类型的子节点**：String 和 TreeNode。**孩子的数量不固定。**

我想以某种方式创建 TreeNode 对象，如下所示：

```
TreeNode a = new TreeNode("str", new TreeNode("str2"), "str3"); //Correct
TreeNode b = new TreeNode(a, "str4); //Correct
TreeNode c = new TreeNode(54); //Wrong 
```

如何在**编译时**使用通配符或其他东西进行参数**类型检查**？

 **我不合适的运行时解决方案：

```
private static final boolean debug = "true".equals(System.getProperty("debug"));

public <T> TreeNode (T... childs) {
    if (debug) {
        for (Object child : childs) {
            if (!(child instanceof String || child instanceof TreeNode)) {
                throw new RuntimeException("Type of childs must me Tree or String");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:32:47.653

您应该尝试找到可以添加到树中的单一基本类型。然后，从中派生您的具体节点类型：

```
abstract class Node { }
class TreeNode extends Node {
  public TreeNode(Node... children) {
    // ...
  }
}
class StringNode extends Node { 
  public StringNode(String value) {
    // ...
  }
} 
```

用法：

```
TreeNode a = new TreeNode(
  new StringNode("str"), 
  new TreeNode(new StringNode("str2")), 
  new StringNode("str3")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T19:41:56.233

构造函数中的参数应该具有特殊含义。使用可变参数是可以接受的，但它认为这些是特殊情况。你的问题可以用另一种方式解决。

```
public class TreeNode {

   public TreeNode() {
     //crate the object
   }

   public TreeNode addNode(String node, String... nodes) {
    //Do something with string node
    return this;
   }

   public TreeNode addNode(TreeNode node, TreeNode... nodes) {
   //Do something with TreeNode
    return this;
   }
} 
```

所以你可以像这样使用它，例如

```
TreeNode node = new TreeNode().addNode("One","Two").addNode(node3,node4); 
```

其中 node3 和 node4 是 TreeNode 的实例；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:31:35.637

试试这个。

```
public <T> TreeNode (Object... childs) {
  //code
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T19:37:11.110

如果你仍然想移植某种程度的编译时类型安全，你可以这样做：

```
public class AorB<A, B> {
  private final Object _instance;
  private final boolean _isA;

  public AorB(A instance) {
    _instance = instance;
    _isA = true;
  }

  public AorB(B instance) {
    _instance = instance;
    _isA = false;
  }

  public A asA() {
    assert _isA;
    return (A) _instance;
  }

  public B asB() {
    assert !_isA;
    return (B) _instance;
  }

  public boolean isA() {
    return _isA;
  }
} 
```

然后使用`AorB<String, TreeNode>`实例。

`asB()`请注意，如果您不喜欢当实例为 时有人可能会这样做，您可以走得更远，也可以有一个类型安全的回调`A`：

```
public class AorB<A, B> {
  ...
  public interface Handler<A, B> {
    void handle(A instnace);
    void handle(B instance);
  }

  public void handle(Handler<A, B> handler) {
    if (isA()) {
      handler.handle(asA());
    } else {
      handler.handle(asB());
    }
  } 
```**