# StackOverflow 问答 11195000-11195999

# emacs - emacs lisp 中的求值顺序

> ID：11195003
> 
> 赞同：7
> 
> 时间：2012-06-25T18:21:21.647
> 
> 标签：emacs, lisp, elisp, operator-precedence

我正在尝试在 emacs lisp 中编写一些我的第一个代码，但我无法理解以下行为

```
(defun sq (x) (* x x))

(member 9 '(1 2 3 4 (sq 3))) 
```

这评估为`nil`但我期望的值是`(9)`

现在我猜* emacs lisp 使用应用顺序评估，那么为什么在应用函数之前没有评估列表？

因为我只需要它来测试一个非零条件，我终于可以让它工作如下，

```
(member 9 (cons (sq 3) '(1 2 3 4))) 
```

评估为`(9 1 2 3 4)`

我的问题是这是否有效，因为`(sq 3)`它是一个函数（缺点）的“直接”参数，与前面的示例不同，它是参数中的一个元素？在这里使用`cons`可接受的解决方法还是有更好/正确的方法来获得所需的行为？

* 虽然无法确定 emacs lisp 使用什么顺序评估，但我在方案解释器中尝试了相同的表达式并得到了相同的答案，并且从 SICP 我知道该方案使用应用顺序评估。现在我真的真的很困惑！

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T18:29:24.767

问题是您引用了列表，因此*不会*评估其任何元素，而只会作为文字符号传入。如果您想评估列表的某些元素，同时将其他元素作为文字传递，最方便的形式是使用反引号，即：

```
(member 9 `(1 2 3 4 ,(sq 3))) 
```

反引号的行为与普通引用相同，除了对以逗号开头的列表元素进行求值，并将求值的结果替换回列表中。

或者，您可以使用`list`评估其参数的函数（除非明确引用）：

```
(member 9 (list 1 2 3 4 (sq 3))) 
```

# c# - Datagrid-复选框选择和取消选择

> ID：11195004
> 
> 赞同：1
> 
> 时间：2012-06-25T18:21:24.740
> 
> 标签：c#, wpf, xaml, datagrid

我有一个包含几条记录的数据网格。网格非常简单，因为它只有四列。网格的最后两列分别是 Option1 和 Option2。现在我在这里遇到一个问题，如果从 Option1 列中选择行的复选框，然后如果我要在同一行上选择 Option2，那么从该行中选择的 Option1 应该被取消选择。我也尝试使用单选按钮，但它不工作，因为它选中或取消选中整行。我希望操作应该发生在同一行。

谢谢

代码-

```
<Window x:Class="Convertor.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"       
    Title="MainWindow" Height="350" Width="525">

<Grid>
    <DataGrid x:Name="dgEmp" CanUserAddRows="False" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Id" Binding="{Binding Path=Id}" Width="*"></DataGridTextColumn>
            <DataGridTextColumn Header="Name" Binding="{Binding Path=Name}" Width="*"></DataGridTextColumn>
            <DataGridTemplateColumn Header="Option1" Width="*">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox x:Name="ch1"></CheckBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn Header="Option2" Width="*">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox x:Name="ch2" ></CheckBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>

</Grid> 
```

```
 private ObservableCollection<Emp> _empList;
    public MainWindow()
    {
        InitializeComponent();
        BindEmpDetails();
    }

    private void BindEmpDetails()
    {
        _empList = new ObservableCollection<Emp>()
        {
            new Emp(){Id=1,Name="XYZ"},
            new Emp(){Id=1,Name="ABC"},
        };
        dgEmp.ItemsSource = _empList;
    }
}

public class Emp
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool Working { get; set; }
    public bool Retired { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:33:36.780

我会做什么（Emp 应该实现**INotifyProperyChanged**）：

```
 public class Emp : INotifyPropertyChanged
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool Working
    {
        get { return working_; }
        set
        {
            if (working_ != value)
            {
                working_ = value;
                retired_ = !working_;
                OnPropertyChanged("Retired");
                OnPropertyChanged("Working");
            }

        }
    }
    public bool Retired
    {
        get { return retired_; }
        set
        {
            if (retired_ != value)
            {
                retired_ = value;
                working_ = !retired_;
                OnPropertyChanged("Retired");
                OnPropertyChanged("Working");
            }

        }
    }
    public event PropertyChangedEventHandler PropertyChanged;
    private bool retired_;
    private bool working_;
    public void OnPropertyChanged(string PropertyName) {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
    }
} 
```

再加上这个 Binding ：

```
<CheckBox x:Name="ch1" Checked="{Binding Retired}"></CheckBox> 
```

加一个用于工作。

很确定还有另一种聪明的方法，但这在我的脑海中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:33:50.390

正如您之前尝试过的那样，这似乎最好使用单选按钮。如果您为两个单选按钮提供相同的**GroupName**，则无论它们在窗口中的位置如何，它们都应该是互斥的。这样，用户将只能选择“工作”或“退休”。

```
<RadioButton GroupName="IsWorking" Content="Working" />
<RadioButton GroupName="IsWorking" Content="Retired" /> 
```

[http://msdn.microsoft.com/en-us/library/system.windows.controls.radiobutton.groupname.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.radiobutton.groupname.aspx)

# android - 数据未插入 Android OS 上的 Sqlite 数据库

> ID：11195009
> 
> 赞同：1
> 
> 时间：2012-06-25T18:22:07.297
> 
> 标签：android, sqlite, insert

下面是我的代码；我无法在单击按钮时插入数据，因为当我单击提交按钮时我的程序停止运行，我的代码如下：

```
import android.app.Activity;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class insertData extends Activity {
    /** Called when the activity is first created. */
    SQLiteDatabase db;
    ContentValues c;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main); setContentView(R.layout.main);
        final EditText name=(EditText) findViewById(R.id.edtname);
        final EditText address=(EditText) findViewById(R.id.edtaddress);
        final EditText policyNo=(EditText) findViewById(R.id.edtpolicyno);
        Button submit=(Button) findViewById(R.id.submit);
        final TextView text = new TextView(getApplicationContext());
        text.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        setContentView(R.layout.main);
        c = new ContentValues();     
        db = openOrCreateDatabase(
            "TestingData.db"
            , SQLiteDatabase.CREATE_IF_NECESSARY
            , null
            );
        db.setVersion(1);
        db.setLocale(Locale.getDefault());

       // String qry="CREATE TABLE test1(name text,address text,policy text);";
       // db.execSQL(qry);

        submit.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                Toast.makeText(getApplicationContext(),"heloo",Toast.LENGTH_SHORT).show();

                c.put("Name",name.getText().toString().trim());
                c.put("Address",address.getText().toString().trim());
                c.put("PolicyNo",policyNo.getText().toString().trim()); 
                db.insert("test1", null, c);

                Cursor retrive = db.query("test11",null ,null, null, null, null, null);
                retrive.moveToFirst();
                 for(int i=0;i<retrive.getCount();i++)
                 {
                     String nm = retrive.getString(1);
                     String add=retrive.getString(2);
                     String polno=retrive.getString(3);
                     text.setText(nm+" "+add+" "+polno);                     

                 }//for ends/......  
           //  retrive.close();

            }

        });
    }
} 
```

我不知道这里发生了什么；请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:46:46.203

您还没有发布您的 logcat 转储，但我注意到的第一件事是您正在创建一个名为“test1”的表并将数据插入/查询到“test11”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:03:36.197

我的按钮单击事件未分配内存，因此将按钮声明为以下不同，因此检测到并触发了我的单击事件

```
public class insertData extends Activity {
    /** Called when the activity is first created. */
    SQLiteDatabase db;
    ContentValues c;
    Button submit;      <-------
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main); sss
        final EditText name=(EditText) findViewById(R.id.edtname);
        final EditText address=(EditText) findViewById(R.id.edtaddress);
        final EditText policyNo=(EditText) findViewById(R.id.edtpolicyno);
        submit=(Button) findViewById(R.id.submit); 
```

我不知道为什么，但这解决了我的问题。

# codeigniter - CodeIgniter - 文件上传看不到文件

> ID：11195011
> 
> 赞同：2
> 
> 时间：2012-06-25T18:22:10.070
> 
> 标签：codeigniter

我正在创建上传功能，但我希望它成为更大功能的一部分，如下所示：

```
public function addGame() {
    // validation
    $this->load->library('form_validation');
    $this->form_validation->set_rules('title', 'Tytuł gry', 'required');
    $this->form_validation->set_rules('dsc', 'Opis gry', 'required');

    $data['title'] = 'Dodaj grę';

    $this->load->model('contrib_model');
    $this->load->model('games_model');

    // image upload
    $config['upload_path'] = './img/';

    $this->load->library('upload', $config);

    if ($this->form_validation->run()) {
        $data['submit'] = $this->contrib_model->addGame($this->input->post()); //submits data
        if ( ! $this->upload->do_upload($this->input->post('cover')))
        {
            $error = array('error' => $this->upload->display_errors());
            print_r($error);
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());

            print_r($data);
        }
        $this->load->view('contribute/emptyPage', $data); //loads view
    } else {
        $data['genres'] = $this->games_model->Genres();
        $data['platforms'] = $this->games_model->Platforms();
        $data['developers'] = $this->games_model->Developers();

        $this->layout->view('contribute/addGame', $data); //loads view
    }
} 
```

我的表格：

```
<li><input type="text" name="title" id="title" placeholder="Tytuł gry" class="required"></li>
<li><textarea name="dsc" id="dsc" cols="30" rows="10" placeholder="Opis gry" class="required"></textarea></li>
<li><input type="text" name="dsc_src" id="dsc_src" placeholder="Źródło opisu" class="required"></li>
<li><input class="required" type="text" name="reldate" id="reldate" placeholder="Data wydania (RRRR-MM-DD"></li>
<li><input type="file" name="cover" id="cover" class="required"></li> 
```

我的问题是它说没有指定文件。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:36:47.353

你的`if`陈述实际上应该是

```
if ( ! $this->upload->do_upload('cover')) 
```

代替

```
if ( ! $this->upload->do_upload($this->input->post('cover'))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:17:17.420

我在全新的 WAMP 安装中遇到了类似的问题。原来，我的 php.ini 文件中的 HTTP 文件上传已关闭。所以请确保它已打开。

```
file_uploads = On 
```

# php - 使用 PHP 在 mySQL 的一列中插入两个输入

> ID：11195012
> 
> 赞同：2
> 
> 时间：2012-06-25T18:22:09.960
> 
> 标签：php, mysql, database, phpmyadmin

我是 php 和 mySQL 的初学者，我目前正在使用 Dreamweaver 的 GUI 来帮助我学习。

我正在尝试创建一个成员注册表单以将用户注册到数据库中。我的目标是从用户的名字和姓氏生成用户名。例如：名字：John，姓氏：Smith。用户名将自动生成为 john.smith（忽略大写）

我阅读了有关在 php 中进行连接的信息并提出了代码：

```
GetSQLValueString($_POST['firstname'], "text").GetSQLValueString('.'.$_POST['lastname'], "text"), 
```

但是，当我检查 mySQL 中存储的数据时，它会返回 firstname'.lastname。即约翰史密斯。（注意名字后面的多余撇号）

这是我的来源： http: [//forums.phpfreaks.com/index.php?topic=294444.0](http://forums.phpfreaks.com/index.php?topic=294444.0)，原始发帖人提到他修改了dreamweaver 使用的一些代码。但我不知道该改变哪一个。

到目前为止，我的现有代码见下文：

```
<?php require_once('../Connections/connSQL.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{  if (PHP_VERSION < 6) {
$theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
}

$theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

 switch ($theType) {
case "text":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;    
case "long":
case "int":
  $theValue = ($theValue != "") ? intval($theValue) : "NULL";
  break;
case "double":
  $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
  break;
case "date":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;
case "defined":
  $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
  break;
  }
    return $theValue;
 }
}

  $editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
  $insertSQL = sprintf("INSERT INTO member (m_firstname, m_lastname, m_username, m_password, m_workphone, m_address) VALUES (%s, %s, %s, %s, %s, %s)",
                       GetSQLValueString($_POST['firstname'], "text"),
                       GetSQLValueString($_POST['lastname'], "text"),
                       GetSQLValueString($_POST['firstname'], "text").GetSQLValueString(' .'.$_POST['lastname'], "text"),
                       GetSQLValueString($_POST['password'], "text"),
                       GetSQLValueString($_POST['passwordcheck'], "text"),
                       GetSQLValueString($_POST['address'], "text")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:23:53.820

你可能想要这个：

```
GetSQLValueString($_POST['firstname'] . '.' . $_POST['lastname'], "text") 
```

连接值*然后*转义结果字符串，而不是先转义值然后尝试连接结果。如果你真的想先逃离它们，你可以这样做：

```
sprintf("CONCAT(%s, '.', %s)",
    GetSQLValueString($_POST['firstname'], "text"),
    GetSQLValueString($_POST['lastname'], "text")) 
```

但没有理由这样做。

# scroll - 向左滚动到负边距区域？

> ID：11195021
> 
> 赞同：2
> 
> 时间：2012-06-25T18:22:56.323
> 
> 标签：scroll, margin

我在[这里](http://starprovisions.com/dev/bacchanalia.html)有这个开发站点。它是一个水平滚动的网站，带有左右箭头来引导从一个面板到另一个面板。

最左边的面板是一个简单的图像，我们目前用负边距（-240px）隐藏了一点。当您点击该站点时，这显示了正确的方式，但我们需要这样做，以便您在主屏幕面板上看到的左箭头在单击时允许站点滑过以完整查看最左侧的图像。这可能吗？

# java - 如果两个不同的对象具有相同的哈希码会发生什么？

> ID：11195027
> 
> 赞同：19
> 
> 时间：2012-06-25T18:23:16.493
> 
> 标签：java, hashmap, equals, hashcode

据我了解，两个不相等的对象可以具有相同的哈希码。从 HashMap java 添加或检索时如何处理？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-25T18:24:42.140

它们只会被添加到同一个存储桶中，`equals()`并将用于区分它们。每个存储桶都可以包含具有相同哈希码的对象列表。

理论上，您可以为给定类的任何对象返回与哈希码相同的整数，但这意味着您失去了哈希映射的所有性能优势，并且实际上会将对象存储在列表中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-07T01:39:30.813

在 HashMap 中，键及其关联值存储在桶中的链表节点中，并且键在 hashmap 中本质上是使用 equals() 方法而不是通过哈希码进行比较。

```
hm.put("a","aValue"); // Suppose hashcode created for key "a" is 209 
hm.put("b","bValue"); // Here hashcode created for key "b" is 209 as well. 
```

*   如果`a.equals(b)`退货`true`，`bValue`将替换`aValue`并`bValue`退回。
*   如果`a.equals(b)`返回`false`，则在桶列表中创建另一个节点，因此当您调用时，`get("b")`您将得到`bValue`因为`a.equals(b)`is `false`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-31T08:35:51.453

HashMap 正在研究散列和索引的概念。内部 HashMap 将值存储在节点数组中。每个节点都表现为 LinkedList。

链表的每个节点都有 4 个值：

1.  `int hash`
2.  `K key`
3.  `V value`
4.  `Node<K, V> next`

HashMap 内部结构：

[![HashMap 内部结构图](../Images/e42a3d2f5b1b38f0bd2500f6d1dd6f89.png)](https://i.stack.imgur.com/pGehC.png)

在 HashMap 中插入值时，会生成 Key 的第一个哈希码，并根据某种算法计算索引。

所以我们的值将与下一个元素的哈希码、键、值和地址一起存储在特定的索引中。

从 HashMap 中检索值时，将生成第一个哈希码，然后生成索引（与插入时的方式相同）。从索引中获取值时，首先它会检查哈希码，如果哈希码匹配，那么它只会使用 equals 方法从 Node 中检查键。 **如果键匹配，那么只有它会返回值，否则它将检查具有相同哈希码的下一个节点。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-11T11:24:22.990

在这种情况下，您可以使用 IdentityHashMap，其中具有相同哈希的不同对象根据其身份被视为不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-29T12:26:35.427

当两个不相等的对象具有相同的哈希值时，这会导致哈希表中的冲突，因为两个对象都希望位于同一个槽中（有时称为存储桶）。哈希算法必须解决此类冲突。回到我大学算法课程的褪色记忆中，我记得这样做的三种基本方法：

1.  在哈希表中寻找下一个空槽并将对象放在那里。优点：易于实现，缺点：可能导致对象聚集并降低性能，可能会超出容量
2.  有冲突时使用辅助哈希函数：优点：通常很快，缺点：必须编写第二个哈希函数，仍然可能发生冲突，并且可能超出容量
3.  从哈希表的冲突槽中创建对象的链表。优点/缺点：通常对于不错的散列函数和负载因子来说很快，但在最坏的情况下会降级为线性搜索

我认为 Java 哈希类使用第三种方法，但它们可能使用组合方法。但是，良好散列的关键是确保散列表具有足够大的容量并编写良好的散列函数。一个只有与其持有的对象一样多的桶的哈希表可能会发生冲突。通常你希望哈希表大约是它存储的对象数量的两倍。Java 的 HashMap 会根据需要增长，但如果你愿意，你可以给它一个起始容量和负载因子。

哈希函数取决于程序员。您可以只为所有对象返回 0，但这意味着散列（存储和检索）将变为 O(n) 而不是 O(1) ...或者用通俗的话来说，它会很慢。

参考： http: [//www.coderanch.com/t/540275/java/java/objects-hashcode-HashMap-retrieve-objects](http://www.coderanch.com/t/540275/java/java/objects-hashcode-HashMap-retrieve-objects)

# android - Android 区分 320x480 和 480x800 的资源

> ID：11195029
> 
> 赞同：3
> 
> 时间：2012-06-25T18:23:25.050
> 
> 标签：android, screen-resolution, dpi

我已阅读有关不同密度和分辨率的[官方指南](http://developer.android.com/guide/practices/screens_support.html)，但找不到如何为相同密度的屏幕使用不同的资产？例如，320x480 和 480x800 使用相同的 mdpi，但显然最好不要以编程方式缩放图形并使用预缩放资源。是否可以强制应用程序使用具有相同 dpi 的不同分辨率的不同图形？

Android 2.2+版本，普通屏和大屏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:45:48.727

尝试针对所有可能的解决方案通常不是一个好主意。Android 设备上有数百（数千？）种不同的分辨率（更不用说未来的分辨率了）。

如果可能，请使用 mdpi、hdpi 等。您可能想要组合图像资产。例如，在初始屏幕上，背景图像和您的徽标可能是单独的图像，您可以使用 Drawable 框架进行组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:52:05.450

您应该看到的开发人员指南部分是[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)。

如果您想在相同 dpi 下为不同尺寸的屏幕使用不同的可绘制对象，则在不同尺寸和/或显示宽度的桶中实现布局和可绘制对象。

该指南告诉您以什么顺序命名资源路径限定符。或者，您可以让 Eclipse 中的 XML 文件创建向导为您完成。

# ios - 需要有关 iOS 捆绑种子编号的信息

> ID：11195031
> 
> 赞同：2
> 
> 时间：2012-06-25T18:23:30.570
> 
> 标签：ios, bundle, provisioning, seed

这是来自 Xcode 开发人员列表的转贴。

参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandConfiguringAppIDs/CreatingandConfiguringAppIDs.html](http://developer.apple.com/library/ios/#DOCUMENTATION/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandConfiguringAppIDs/CreatingandConfiguringAppIDs.html)

我最近注意到，对于我们的企业开发帐户，当使用 iOS 配置文件时，我们并不总是获得使用相同捆绑种子创建的配置文件。

有时，它是

ABC1234567。

有时是

ZYX7654321。

（这些是示例，不是我们真正的捆绑种子）

在使用 iOS 配置文件创建应用程序 ID 时，我们总是会使用第一个捆绑种子创建 prov profs。在创建开发配置文件时，我们还会获得带有第一个捆绑种子的 prov profs。

但是，当尝试创建分发 profs 时，我们要么获得无效证书（在供应门户的左上角），要么获得成功，但具有第二个捆绑 ID。

谁能告诉我们为什么我们得到两个不同的捆绑种子，它有多重要以及为什么我们有两个 id？

创建新的 App ID 时，它（供应门户）询问我们是要使用团队 ID（我假设这是第一个捆绑种子）还是第二个。

创建发行版配置文件时，奇怪的是我们的第一个证书似乎无效 - prov 门户不允许我们使用它创建发行版配置文件。这怎么可能发生？

可以使用具有第二个 ID 的发行版配置文件分发具有第一个 bundie 种子 ID（它们都在同一个企业帐户中）的 iOS 应用程序吗？

TIA。

# android - 为 Android Linter 创建 JavaDocs 时出错 - 无法访问 com.android.tools.lint.detector.api.Severity

> ID：11195035
> 
> 赞同：0
> 
> 时间：2012-06-25T18:23:54.817
> 
> 标签：android, javadoc, android-lint

尝试在 Mac 10.7 上为 Android lint-cli 项目生成 JavaDocs 不断收到以下错误。

> 正在加载 com.android.tools.lint 包的源文件...正在构建 Javadoc 信息.../Volumes/android/sdk/lint/cli/src/com/android/tools/lint/HtmlReporter.java:30：无法访问com.android.tools.lint.detector.api.Severity 错误类文件：/Volumes/android/sdk/lint/libs/lint_api/bin/com/android/tools/lint/detector/api/Severity.class 错误签名： ?2Q 请删除或确保它出现在类路径的正确子目录中。导入 com.android.tools.lint.detector.api.Severity；

尝试删除 Severity.class，希望它会重新生成，但这使事情变得更糟。还尝试了从 eclipse 中清除，但也没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:33:46.527

所以我尝试为所有 Android lint 项目创建 JavaDocs。lint-api, lint-cli, lint-checks 并没有出现这个问题。

# sql-server - 无法从快照恢复

> ID：11195037
> 
> 赞同：-1
> 
> 时间：2012-06-25T18:23:56.117
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我已经成功创建了名为 SCPT_Pandora_snap 的数据库 SCPT_Pandora 的快照。当我尝试从此快照恢复 SCPT_Pandora 时，我收到错误消息（“'DATABASE_SHAPSHOT' 不是可识别的设备类型选项”）。我已经在两台服务器（2005 和 2008 企业版）上进行了尝试，并且在两台服务器上都收到了相同的错误。这是代码：

```
IF EXISTS ( SELECT  name
        FROM    sys.databases
        WHERE   name = N'SCPT_Pandora_snap' ) 
DROP DATABASE SCPT_Pandora_snap
GO

CREATE DATABASE SCPT_Pandora_snap ON

(

    NAME = SCPT_Pandora,

    FILENAME = 'D:\SQL2008_data\SCPT_Pandora_snap.ss'

) AS SNAPSHOT OF SCPT_Pandora

GO

USE Master
GO

RESTORE DATABASE SCPT_Pandora FROM DATABASE_SHAPSHOT = 'SCPT_Pandora_snap';
GO 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:23:09.417

这只是一个错字，您正在从 sHapshot 中恢复：

```
RESTORE DATABASE SCPT_Pandora FROM DATABASE_SHAPSHOT = 'SCPT_Pandora_snap';
                                            ^^^ 
```

# android - 播放 rtsp-stream 时缓冲在 1 分钟后结束

> ID：11195038
> 
> 赞同：1
> 
> 时间：2012-06-25T18:23:57.230
> 
> 标签：android, video-streaming, rtsp

我写了一个小应用程序，它只显示来自 rtsp-stream 的视频数据（使用 MediaPlayer-class 和 SurfaceView-class）。Rtsp-stream 是使用 vlc 2.0.0 创建的。

它工作正常，但在 1 分钟播放结束后。

在 logcat 中，我发现了以下几行：

// ...

E/Overlay (138): Overlay 没有准备好排队缓冲区

I/MyHandler(138)：在轨道索引 0 上收到 BYE

E/OMX-VDEC-720P(138)：Rxd i/p EOS，通知驱动程序已到达 EOS

E/OMX-VDEC-720P(138)：已达到输出 EOS

E/OMX-VDEC-720P（138）：Rxd OMX_COMPONENT_GENERATE_EOS_DONE

D/XXX (10485): onCompletion() 调用

// ...

似乎（解码器？）缓冲区已满，因此播放结束。我可以处理这些缓冲区，以便接收新数据吗？

这次我通过等待 onCompletion-Event 重置/重新启动 MediaPlayer 解决了这个问题，但这并不是真正的方法，对吧？

有没有人对此有解决方案/想法？

Greetzn + thanx 提前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:15:15.387

可能正在达到会话超时。您可以检查请求中发回的标头`PLAY`，看看是否有`timeout=`给您的指令！

如果有你必须`GET_PARAMETER`每隔这么多秒发出一个请求，如该标头的值所示，否则服务器将终止你的会话。

另请参阅[是否有这样的 RTSP Ping？](https://stackoverflow.com/questions/11502856/is-there-such-a-rtsp-ping/11503206#11503206)

如果您还需要什么，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:02:23.060

因为我还不能评论。您是否尝试将其放在 asyncTask 上？还是在完成缓冲后它会播放？

您还可以在 AsyncTask 上做，您可以更改 OnProgressUpdate()，然后可以在到达某个缓冲区时播放或在完成时完全播放。

# android - 在 C 中，tan(30) 给了我一个负值！为什么？

> ID：11195039
> 
> 赞同：13
> 
> 时间：2012-06-25T18:24:03.723
> 
> 标签：android, c, math, android-ndk, cmath

我观察到库中**`tan(float)`**的函数**`cmath`**返回负值。

以下代码，运行时：

```
 #include <cmath>
    ....

    // some calculation here gives me a value between 0.0 to 1.0.
    float tempSpeed = 0.5; 

    float tanValue = tan(tempSpeed * 60);

    __android_log_print(ANDROID_LOG_INFO, "Log Me", "speed: %f", tanValue); 
```

在我的日志文件中给我这个结果：

```
 Log Me: speed `-6.4053311966` 
```

就目前我所记得的

```
 tan(0.5*60) = tan(30) = 1/squareroot(3); 
```

有人可以帮我解释为什么我看到负值吗？它与某些浮点大小错误有关吗？还是我在做一些非常愚蠢的事情？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-25T18:25:12.000

在**C**`tan`和其他三角函数中，期望弧度*作为*参数，而不是*度数*。您可以将*度数*转换为*弧度*：

```
tan( 30\. * M_PI / 180\. ) == 0.57735026918962576450914878050196 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T18:25:51.743

这是你的角度的正切（30 弧度）。如果你正在寻找 30 度的正切，你必须先将你的角度转换为弧度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:47:38.057

我猜在 C 中，tan 函数要求您输入弧度作为参数，而不是实际的度数值。

所以对于 Tan 30 ，您必须将 30 度转换为弧度。请记住，360 度是 2*Pi 弧度，因此 30 度将是 (1\6 * Pi) 弧度。

所以 tan(1\6 * Pi) 会给你正确的答案。其中 Pi 是 3.142

# backbone.js - 如何使用 Backbone 识别用户？

> ID：11195042
> 
> 赞同：2
> 
> 时间：2012-06-25T18:24:12.847
> 
> 标签：backbone.js

我正在开发一个应该为多个用户服务的 Backbone 应用程序。

我在后端使用 Spring 和它的安全模块，它使用基本身份验证来允许按 url 模式进行访问。

所以假设有两个用户，Jack 和 Joe，以及一个名为“item”的资源。由于http认证，双方都看不到对方的物品。假设网址是：

*   /用户/杰克/项目
*   /用户/约翰/项目

如何在 Backbone 中识别用户？有什么聪明的方法可以做到这一点，还是我应该从 http 标头中选择用户名并将其注入 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:52:11.887

Backbone 在 sync() 期间本机使用 ID 进行 REST 调用。您现在需要做的就是为模型提供自定义 URL：

```
var Item = Backbone.Model.extend({
  url: function() {
    return '/users/'+this.get('name')+'/item';
  }
}); 
```

尽管在这种情况下，您必须先加载 User 模型，然后才能对其调用 sync()，例如，通过 Collection 从像“/users/”这样的 URL 中添加它们。

# sql - 如何优化 ruby on rails 统计每月查询

> ID：11195044
> 
> 赞同：1
> 
> 时间：2012-06-25T18:24:14.250
> 
> 标签：sql, ruby-on-rails, ruby, database, ruby-on-rails-3

我开发了一个应用程序，为登录的用户提供每月统计数据的概览。

这是我目前的做法：

Statistics.html.haml：

```
#(@parsed months is an array of monthnames.)

- @parsed_months.each do |month|
  = render :partial => "statistic", :locals => {:month => month} 
```

_statistic.html.haml：

```
%tr{:class => cycle("odd", "even")}
  %td= l(month, :format => "%B").capitalize
  %td= current_user.total_views_count(month)
  %td= current_user.total_leads_count(month)
  %td= current_user.total_clicks_count(month) 
```

返回总视图的方法（在 User.rb 中）：

```
def total_views_count(month = nil)
  if month == nil
    v = 0
    self.companies.each {|c| v += c.counts.size}
    return v
  else
    v = 0
    self.companies.each {|c| v += c.counts.where(:created_at => Date.today.beginning_of_year..Date.today.end_of_year).where(:created_at => month.beginning_of_month..month.end_of_month).size}
    return v
  end
end 
```

公司.rb:

```
belongs_to :user
has_many :counts, :as => :countable, :dependent => :destroy 
```

计数.rb：

```
belongs_to :countable, :polymorphic => true 
```

用户.rb：

```
has_many :companies 
```

这表现不错，但几个月后 Count 模型已经增长到一百万多条记录，导致 heroku 上的请求超时。

我可以做些什么来优化这个查询或者有更好的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:48:11.263

您应该注意以下几点来优化查询：

1.  尝试减少单个请求中的查询
2.  优化索引
3.  创建汇总表

第 2 点和第 3 点与@opensourcechris 提到的相同。

我已经有一段时间没有使用活动记录了，所以我不能给你查询的 arel 语法，但主要问题是因为有很多数据，你在一个请求中做了很多繁重的查询。您应该使用连接来减少查询并谨慎使用索引以使连接和查询达到最佳状态。带有连接的查询如下所示：

```
SELECT count(c.id) FROM users u
  JOIN companies comp ON comp.user_id = u.id
  JOIN counts c ON c.company_id = comp.id
                   AND c.countable_type = 'Company'
                   AND c.created_at BETWEEN date_range
  WHERE u.id = currrent_user_id 
```

您还可以使用`GROUP BY`此处在单个查询中检索所有月份的数据，并且每月保留计数。

为了使连接有效地工作，您应该有一个索引 on`companies.user_id`和一个复合索引 on `counts.countable_id, counts.countable_type, counts.created_at`。

现在应该这样做，但是随着计数在短短几个月内增长到数百万以上，从长远来看，这并不能解决问题。随着 counts 表的增长，即使这个查询也会开始变慢。在关系数据库中，查询时间几乎随着行数的增加而线性增加，但在某个阈值之后，它开始以更快的速度增长。因此，包含您需要经常使用的表的大小总是明智的。这就是滚动表出现的时候。

随着数据量的增加，插入速度也是一个问题。因此，您可能应该创建一个没有任何索引的表并将所有计数数据记录在该表中。可以定期将数据汇总到其他表中。可以根据需要在粒度上创建汇总表以进行报告。常见的选项是每小时、每天、每周、每月和每年的汇总表。

数据也可以转储到存档表中以保留历史记录，以便可以随时以不同的粒度或其他要求重新创建汇总表。将数据转储到存档表后，可以将其从主表中清除，这样插入速度就不会随着时间的推移而受到影响。它还允许记录任何视图，而不必担心像 10 分钟规则这样的限制，因为可以在滚动之前清理数据。

PS：我想你应该使用 session_id(uuid) 和 ip 地址来正确计算视图。通常，许多互联网用户共享一个公共 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:35:14.897

要优化查询，您应该首先审核每个表上的索引。由于您的 WHERE 在日期字段上，我认为索引可以很好地使用它来查看您的索引：

```
USE *database*;
SHOW INDEX FROM *tablename*; 
```

然后确保您正在索引您的 where 列。

另一种选择是忘记计算历史月份的总计，只需在月底计算它们并将它们存储在新的汇总表中。因此，您将即时计算的是当月的数据，可以从新的汇总表中返回前几个月。

# php - WebSockets RFC 6455 规范 - 发送数据错误

> ID：11195061
> 
> 赞同：0
> 
> 时间：2012-06-25T18:25:08.490
> 
> 标签：php, websocket, bit-manipulation

我正在用 PHP 编写 Web 套接字服务器，因为我找不到支持 RFC 6455 规范的服务器。在此过程中，我使用[phpwebsocket](http://code.google.com/p/phpwebsocket/source/browse/trunk/%20phpwebsocket/server.php)代码作为基础并使其与 RFC 6455 兼容。至少我为接收消息部分做了。每当我尝试将消息发送回服务器时，我都会收到不同的消息。我敢肯定这是因为我的位掩蔽技能……太糟糕了。所以经过相当多的试验和错误后，我仍然有这个问题，我不知道为什么。

```
 Time                     OpCode Mask Length Data
1>2012-06-25T18:05:58.014Z 1      true 4      Ping
2>2012-06-25T18:06:02.121Z 1      true 5      hello
3 2012-06-25T18:06:02.121Z A server must not mask any frames that it sends to the server. 
```

或者

```
3 2012-06-25T18:06:02.121Z Unexpected continuation frame. 
```

我在我的电脑上使用 PHP 5.4.4，使用命令行界面。`php ws.php`这就是我启动 Web 套接字服务器所需要做的一切。然后我将其`wsClient.html`用作我的客户。在 Windows 8 Preview 上使用最新版本的 Google Chrome (21.0.1180.4 dev-m) 我收到以下消息。

[你可以从我的github repo](https://github.com/Dygear/PHPWebSockets)下载 php 服务器和客户端，然后从那里玩很久。问题出在[WebSockets::send](https://github.com/Dygear/PHPWebSockets/blob/master/ws.php#L200)函数中。

```
private function send($client, $payload)
{
    $frame = pack('C2a*', 0b10000001, 0b01111111 & strlen($payload), $payload);
    socket_write($client, $frame, strlen($frame));
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:01:14.127

该消息意味着浏览器正在获取一个延续帧（0 表示操作码）而不是文本帧（1 表示操作码）。我认为您的 pack 功能没有像您预期的那样工作。我不是 PHP 专家，但也许更像是你想要的：

```
$plen = strlen($payload);
$frame = pack('CCa{$plen}', ... 
```

此外，当有效负载超过 125 个字节时，您的有效负载长度计算将会中断。对于 126 到 65535 字节的有效载荷，您需要将长度放在标头的第三和第四字节中。对于 65536 和更长的有效载荷，您需要将有效载荷长度放在标头的第 3 到第 10 个字节中（标头的长度取决于有效载荷长度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:32:06.060

我的问题是我在使用二进制语法时使用的是小端风格而不是大端风格。我在做`0b10000001, 0b01111111`我应该做的时候`0b10000001, 0b11111110`。

# java - Java Swing JPanel 不会更新

> ID：11195070
> 
> 赞同：1
> 
> 时间：2012-06-25T18:25:37.027
> 
> 标签：java, swing, jpanel

这是我的代码：

```
private class ValueReporter implements ListSelectionListener {

    public void valueChanged(ListSelectionEvent event) {
        if (!event.getValueIsAdjusting()) {
            jTextField9.setText(jList2.getSelectedValue().toString());
            JLabel someLabel = new JLabel("Some new Label");
            jPanel7.add(someLabel);
            jPanel7.revalidate();
        }
    }
} 
```

“jTextField9”获取文本更新，但面板“jPanel7”不更新分配给它的新标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:01:49.633

这是我快速拼凑的代码片段，它为 a`JPanel`和`repaint`s添加了标签

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.Timer;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class UpdatingJPanel extends JPanel{

  public UpdatingJPanel() {
    Timer timer = new Timer( 1500, new ActionListener() {
      @Override
      public void actionPerformed( ActionEvent e ) {
        UpdatingJPanel.this.add( new JLabel( "A label" ) );
        UpdatingJPanel.this.revalidate();
        UpdatingJPanel.this.repaint();

        if( UpdatingJPanel.this.getComponentCount() == 0 ){
          ( ( Timer ) e.getSource() ).stop();
        }
      }
    } );
    timer.setRepeats( true );
    timer.start();
  }

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame testFrame = new JFrame(  );
        testFrame.getContentPane().add( new UpdatingJPanel() );
        //not using pack() as the panel is still empty and I want avoid
        //resizing when adding labels as that triggers a repaint
        testFrame.setSize( 200,200 );
        testFrame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        testFrame.setVisible( true );
      }
    } );

  }
} 
```

# ruby-on-rails - rails 3.0 控制器映射

> ID：11195079
> 
> 赞同：1
> 
> 时间：2012-06-25T18:26:27.077
> 
> 标签：ruby-on-rails, routes

我的 routes.rb 是跟随

```
resources :users  
match 'users/login' 
```

和耙路线显示

```
users GET    /users(.:format)          {:action=>"index", :controller=>"users"}
      POST   /users(.:format)          {:action=>"create", :controller=>"users"}
new_user GET    /users/new(.:format)      {:action=>"new", :controller=>"users"}
  edit_user GET    /users/:id/edit(.:format) {:action=>"edit", :controller=>"users"}
       user GET    /users/:id(.:format)      {:action=>"show", :controller=>"users"}
            PUT    /users/:id(.:format)      {:action=>"update", :controller=>"users"}
            DELETE /users/:id(.:format)      {:action=>"destroy", :controller=>"users"}
users_login        /users/login(.:format)    {:controller=>"users", :action=>"login"} 
```

但是当我这样做的时候

```
http://localhost:3000/users/login 
```

它转到/user/show。我可以理解它为什么会发生，因为它在控制台上显示

```
Processing by UsersController#show as HTML
Parameters: {"id"=>"login"} 
```

这怎么能解决。

恶作剧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:32:28.783

路由`show`优先，Rails 认为“登录”是一个 ID。要完成您想要的，您需要以这种方式定义您的路线：

```
resources :users do
  collection do
    get :login
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:32:13.543

放在`match 'users/login'`上面`resources :users`。在匹配 url 时，rails 会选择 routes.rb 中符合 url 格式的第一个路径。就目前而言，它发现 'users/:id' 匹配 'users/login'，因此 id=login。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:38:35.373

尝试更改您的`routes.rb`文件以匹配下面的代码。这将确保 在路由`'users/login'`之前匹配。`resources :users`更改`match`为It 也将仅在发出请求`get`时匹配该路由。`GET`

**路线.rb**

```
get 'users/login'
resources :users 
```

**参考**

*   查看[Rails Routing from the Outside In](http://guides.rubyonrails.org/routing.html)中的第 3.7 节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:54:27.527

如果您希望在控制器`http://localhost:3000/users/login`中指向您的`login`方法`users`，您只需要在您的 routes.rb 中执行此操作

```
get 'users/login' => 'users#login' 
```

这也不需要在`resources :users`

# php - 如何在 PHP 脚本中运行涉及外部库的 C 程序？

> ID：11195080
> 
> 赞同：0
> 
> 时间：2012-06-25T18:26:30.167
> 
> 标签：php, c, exec

我创建了一个简单的 C 程序，它接受一个整数参数并输出该整数加 2。我可以在终端中运行它

`./simplep 2`

在 PHP 中

`exec('./simplep 2', $output)`.

我有一个更复杂的程序`myprogram`，它涉及一个外部库。我可以在终端中运行它

`./myprogram a.mov`

但如果我在 PHP 中运行它会失败

`exec('./myprogram a.mov', $output)`

没有产生任何输出，这让我觉得程序根本没有运行。

PS。我在 Mac 上工作。

**更新**

从错误输出中我知道问题出在库上。它说

```
dyld: Library not loaded: /opt/local/lib/libjpeg.8.dylib". 
```

但是库文件在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:57:07.087

它可能会产生错误，但它会`stderr`代替`stdout`. 在此处查看的一种简单方法`stderr`是更改​​：

```
exec('./myprogram a.mov', $output) 
```

至

```
exec('./myprogram a.mov 2>err.out', $output) 
```

并查看文件`err.out`以查看错误消息是什么。

编辑：

现在您发布了错误，看起来动态库没有被加载。最可能的原因是没有将环境变量传递给`exec`，并且`DYLD_LIBRARY_PATH`正在清除环境变量。查看`DYLD_LIBRARY_PATH`终端上的内容（通过`env`），然后尝试运行：

```
exec('env DYLD_LIBRARY_PATH=XYZ ./myprogram a.mov 2>err.out', $output) 
```

其中 XYZ 是`DYLD_LIBRARY_PATH`终端上的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:29:46.840

您是否具有使用 exec 运行 myprogram 的正确权限？尝试这个

```
chmod +x myprogram 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:41:46.343

如果您的程序在命令行上运行，请尝试使用 shell_exec 而不是 exec。

# clojure - 如何在其主键是复合的表中插入新行？

> ID：11195082
> 
> 赞同：1
> 
> 时间：2012-06-25T18:26:49.350
> 
> 标签：clojure, cassandra, hector

我用 cqsql --cql3 shell 创建了这个表：

```
CREATE TABLE Stats (
 gsd          blob,
 period       int,
 tid          blob,
 sum          int,
 uniques      blob,
PRIMARY KEY(gid, period, tid)
); 
```

我正在使用[clj-hector](https://github.com/pingles/clj-hector)包装库。

我创建了集群和键空间对象：

```
(def clstr (h/cluster "Test Cluster" "localhost"))

(def ksp (h/keyspace clstr "mks")) 
```

考虑到以前的结构，如何插入新行？如果你不熟悉 clj-hector，Hector 的代码肯定可以工作，我会将它变形为 Clojure。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:27:22.223

我相信但尚未验证您要插入两列：

row key 是 gsd 的值

一列有一个复合名称，其值为 period，值为 tid 和文字“sum”，其值为 sum

第二列有一个复合名称，其值为 period、tid 值和文字“uniques”，其列值为 uniques

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T22:17:16.503

gid、period、tid 表示为来自 cql 查询的“普通”列。

但是您可能最好使用 datastax/java-driver 或其中一个 clojure 包装器，hector 基于 thrift，并且它仅部分支持 cql3，所以我不确定这是否可行。

无耻插件：看看[https://github.com/mpenet/alia](https://github.com/mpenet/alia)和[https://github.com/mpenet/hayt](https://github.com/mpenet/hayt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T14:01:23.283

您可以参考[http://clojurecassandra.info/articles/kv.html](http://clojurecassandra.info/articles/kv.html)这是一个（相当通用的）CQL 操作指南，适用于使用 Cassandra 和 Clojure 的人。您可以使用简单的 CQL 语法，其余的由 C* 内部处理：

`INSERT INTO users (gsd, period, tid, sum, uniques) VALUES (?, ?, ?, ?, ?);`

对于blob，我强烈建议使用Prepared Statements，实际上：[http ://clojurecassandra.info/articles/kv.html#toc_4](http://clojurecassandra.info/articles/kv.html#toc_4)

如果你愿意，你可以查看 Cassaforte：[https](https://github.com/clojurewerkz/cassaforte) ://github.com/clojurewerkz/cassaforte 它很容易启动和运行。

# php - Zend Form reCaptcha ViewScript 装饰器

> ID：11195086
> 
> 赞同：0
> 
> 时间：2012-06-25T18:27:03.563
> 
> 标签：php, zend-framework, zend-form, zend-form-element, zend-decorators

我想在 reCAPTCHA 字段上使用视图脚本装饰器。如果我将标准视图脚本用作装饰器，则输出是文本输入字段。这是我的标准表单字段视图脚本：

```
<?php
$class = 'field ' . strtolower(end(explode('_',$this->element->getType())));
if ($this->element->isRequired()) {
    $class .= ' required';
}
if ($this->element->hasErrors()) {
    $class .= ' errors';
}
if (0 < strlen($this->element->class)) {
    $class .= ' ' . $this->element->class;
}
?>
<div class="<?php echo $class; ?>" id="field_<?php echo $this->element->getId(); ?>">
    <?php if (0 < strlen($this->element->getLabel())) {
        $labelAttribs = $this->element->getAttribs();
        if ($this->element->isRequired()) {
            $labelAttribs['escape'] = false;
            $this->element->setLabel($this->element->getLabel() . ' <span class="screenreader">required</span>');
        }
        echo $this->formLabel($this->element->getFullyQualifiedName(), $this->element->getLabel(), $labelAttribs);
    } ?>
    <span class="value"><?php echo $this->{$this->element->helper}(
        $this->element->getFullyQualifiedName(),
        $this->element->getValue(),
        $this->element->getAttribs()
    ); ?></span>
    <?php if (0 < strlen($this->element->getDescription())): ?>
        <div class="hint"><?php echo $this->element->getDescription(); ?></div>
    <?php endif; ?>
    <?php if ($this->element->hasErrors()): ?>
        <?php echo $this->formErrors($this->element->getMessages()); ?>
    <?php endif; ?>
</div> 
```

我相当确定我需要更改的部分是：

```
<span class="value"><?php echo $this->{$this->element->helper}(
    $this->element->getFullyQualifiedName(),
    $this->element->getValue(),
    $this->element->getAttribs()
); ?></span> 
```

...但我不知道要改成什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:25:52.373

事实证明，这可以与我的问题的解决方案相同的方式完成：[如何在 Zend_Form 文件元素上使用 ViewScripts？](https://stackoverflow.com/questions/2143462/how-do-i-use-viewscripts-on-zend-form-file-elements)

表单元素：

```
$this->addElement('captcha', 'captcha', array(
    'disableLoadDefaultDecorators' => true,
    'decorators' => array(
        'Captcha_ReCaptcha',
        array(
            'ViewScript',
            array(
                'viewScript' => '_form/recaptcha.phtml',
                'placement' => false,
            ),
        ),
    ),
    'label' => 'Verification',
    'required' => true,
    'captcha' => array(
        'pubkey' => $options['recaptcha']['pubkey'],
        'privkey' => $options['recaptcha']['privkey'],
        'theme' => 'white',
        'captcha' => 'reCaptcha',
    ),
)); 
```

在视图脚本中，像这样输出 reCAPTCHA 内容：

```
<?php echo $this->content; ?> 
```

# algorithm - 将任意数量的 HTML 文档分类为主题的算法

> ID：11195095
> 
> 赞同：2
> 
> 时间：2012-06-25T18:27:43.277
> 
> 标签：algorithm, graph-algorithm

我找到了解释如何比较 2 个文档以生成“接近度”分数的算法。是否有一种已知的算法可用于读取中等数量的 HTML 文档（两位数到三位数）并将它们分组？理想情况下，不对源文档的每个可能排列使用 2 输入算法。

我猜谷歌新闻一定是在使用这样的东西。

只是为了澄清，这里有一个例子：

```
Input: 100 HTML documents
Output:
- 3 categories found:
* CategoryA:  30 documents
* CategoryB:  20 documents
* CategoryC:  5  documents
* Uncategorised: 45 documents 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:14:59.263

您应该研究[聚类分析](https://en.wikipedia.org/wiki/Cluster_analysis)领域的算法。您似乎正在寻找一种非常广泛的[无监督学习](https://en.wikipedia.org/wiki/Unsupervised_learning)方法，但如果您在搜索类别之前向算法添加一些额外的输入，则可以提高结果的质量。

您将需要想出一种方法来比较文档或至少列举相关特征（长度、单词频率等）。这些可以作为您正在使用的聚类算法的输入。例如，您可以定义以下特征：

*   字数
*   图像数量
*   外部链接数
*   与地理相关的单词数
*   与生物学有关的单词数
*   与经济相关的词数
*   等等

您对想要的类别越具体，算法的性能就越好。上述特征将为您提供每个文档的数字向量：

```
(384 , 12,  8, ...,  0)
(1244, 39, 10, ..., 55)
(128 ,  2, 66, ..., 33)
... 
```

聚类算法（例如[k-means clustering](https://en.wikipedia.org/wiki/K-means_clustering)）现在可以帮助您将每个文档分配给最可能的聚类。请注意，这只是一个示例。对于您的特定问题，为更具体的领域（例如医学文章）定义更具体的特征可能很有用。

# django - “无法将关键字 'user' 解析为字段。选项有：id、project_、user_”

> ID：11195097
> 
> 赞同：0
> 
> 时间：2012-06-25T18:27:50.087
> 
> 标签：django, manytomanyfield

py如下

```
class User_(models.Model):
user_name = models.CharField(max_length=50)
user_password = models.CharField(max_length=50)
user_admin = models.BooleanField(False)

class Project_(models.Model):
project_name = models.CharField(max_length=20)
users = models.ManyToManyField(User_)
project_path = models.FilePathField() 
```

现在我尝试在下面使用 many_to_many 字段用户

```
 usr = User_.objects.get(user_name= userName) #it retrieves the correct object
    newProject = Project_(project_name=projectName)
    newProject.save()
    newProject.users.add(usr) #here is the error 
    newProject.save() 
```

引发的错误是：“无法将关键字“用户”解析到字段中。选择是：id、project_、user_”

我无法修复该错误，有帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:28:10.430

问题是你的表名......删除尾随下划线，它会正常工作。

Django 为 m2m 字段创建了一个中间表，称为类似`APP_MODEL1_MODEL2`，并且由于您的下划线，那里会有一个双下划线，这会混淆 ORM。

# mysql - 如何通过从两列mysql中选择来进行1列查询

> ID：11195100
> 
> 赞同：1
> 
> 时间：2012-06-25T18:28:00.037
> 
> 标签：mysql, nested-queries

我有一个消息系统（非常基本），它有一个像这样的表：

```
**MESSAGE_ID**  **RUSER_ID**    **SUSER_ID**    **MESSAGE_DATA**    **DATE** 
```

**RUSER**是接收用户，**SUSER**是发送用户。如果我想输出一个会输出某些用户消息的查询，我目前会这样做：

**从 PRIVATE_MESG 中选择 *，其中 RUSER_ID=$USER_ID 或 SUSER_ID=$USER_ID**

这会给我与该 USER_ID 关联的所有 message_id。我想要的是创建一个仅生成与**RUSER_ID关联的****ID**或与特定用户关联的**SUSER_ID的列。**我需要它来选择**RUSER_ID 或 SUSER_ID**等于**USER_ID**但只显示不是**USER_ID的消息**

 ******然后，我想通过该查询的输出进行分组。

任何帮助是极大的赞赏！

谢谢！

**更新**我并不是真的在寻找 message_id，我只是在寻找该人写信或收到的用户列表。

**更新** 大家都知道，我完美地收到了这个问题的答案！我稍后对其进行了调整，以便它也可以按日期从最新到最旧显示它们。我通过使用 DATE() 和 TIME() 函数将 DATETIME 拆分为 DATE 和 TIME 来做到这一点。这是我的最后一个查询：

```
 SELECT
    IF(RUSER_ID = $USER, SUSER_ID, RUSER_ID) as THE_OTHER_GUY, DATE(DATE) as DAY, TIME(DATE) as TIME
    FROM PRIVATE_MESG
    WHERE RUSER_ID = $USER
OR SUSER_ID = $USER;
group by THE_OTHER_GUY ORDER BY DAY DESC, TIME DESC 
```

希望这可以帮助下一个人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:41:13.423

您可以查询：

```
SELECT
    *,
    IF(RUSER_ID = $USER_ID, SUSER_ID, RUSER_ID) as THE_OTHER_GUY
FROM PRIVATE_MESG
WHERE RUSER_ID = $USER_ID
    OR SUSER_ID = $USER_ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:30:29.190

```
SELECT SUSER_ID FROM PRIVATE_MESG WHERE RUSER_ID=$USER_ID
UNION
SELECT RUSER_ID FROM PRIVATE_MESG WHERE SUSER_ID=$USER_ID 
```

它检索：
- 向 $USER_ID 发送消息
的用户 ID 列表 - 从 $USER_ID 接收消息的用户 ID 列表

UNION 将 2 个列表分组到一个结果集中。******

# php - 添加json文件注释

> ID：11195101
> 
> 赞同：37
> 
> 时间：2012-06-25T18:28:00.210
> 
> 标签：php, javascript, json, comments

> **可能重复：**
> [我可以评论 JSON 文件吗？](https://stackoverflow.com/questions/244777/can-i-comment-a-json-file)

我们正在`.json`一个项目中使用一个文件。我们想知道是否可以向文件添加注释并避免 JSON 解析器崩溃。

我们尝试使用以下注释类型来执行此操作，但它们在解析 JSON 文件时都会崩溃：

```
# I crash
// I crash
/* I crash */ 
```

是否有可接受的 JSON 文件注释形式？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-25T18:31:08.480

JSON 不支持注释——仔细想想，这很好。但是，有人制作了 JSON5 ( [https://github.com/aseemk/json5](https://github.com/aseemk/json5) )，它确实可以，并且可能对您有用。

值得指出的是，这只是某人的类 JSON 项目，并不是官方规范，但我猜 JSON 只是人们喜欢的类 XML 项目 :)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-25T18:28:35.543

标准 JSON 格式不明确支持文件注释。[RFC 4627 应用程序/json](http://www.ietf.org/rfc/rfc4627.txt?number=4627)

它是一种用于存储和传输数据的轻量级格式。如果评论真的很重要，您可以将其包含为另一个数据字段，例如`comments: "my comment"`.

例如

```
{
    name: "Bob",
    age: 5,
    comments: "I don't like him"
} 
```

但是，如果它以这种格式使用，它实际上只是另一条数据。所以最终，你必须意识到，仅仅因为某些字段存在并不意味着你必须使用它。

# java - 使用来自非 EventDispatchThread 的 JEditorPane

> ID：11195102
> 
> 赞同：1
> 
> 时间：2012-06-25T18:28:04.577
> 
> 标签：java, multithreading, swing, jeditorpane

我使用 JEditorPane 作为“橡皮图章”将 HTML 文本呈现为 PDF。我需要文本以特定宽度换行，并且需要在文本后面应用白色“突出显示”。因此，我在 PDF 渲染线程中创建了一个 JEditorPane，设置了文本和样式表，然后将其绘制到 PDF 图形中。但是，我在 HTML 编辑器工具包的深处遇到了间歇性的 NullPointerException。这可以通过此 SSCCE 重现：

```
import javax.swing.*;
import javax.swing.text.View;
import javax.swing.text.html.HTMLDocument;
import java.awt.*;
import java.awt.image.BufferedImage;

/**
 * @author sbarnum
 */
public class TextMarkerUtilsTest {
    public static void main(String[] args) throws Exception {
        Rectangle bounds = new Rectangle(255, 255);
        BufferedImage image = new BufferedImage(bounds.width, bounds.height, BufferedImage.TYPE_INT_RGB);
        Graphics2D d = image.createGraphics();
        d.setClip(bounds);
        for (int i=0; i<1000; i++) {
            JEditorPane renderHelper = new JEditorPane("text/html", "<html><body>This is my text.</body></html>");
            HTMLDocument document = (HTMLDocument) renderHelper.getDocument();
            document.getStyleSheet().addRule("foo{color:black;}");
            View rootView = renderHelper.getUI().getRootView(renderHelper);
            rootView.paint(d, bounds);
        }
    }

} 
```

运行上面的代码会抛出以下异常，通常在循环几次之后：

```
java.lang.NullPointerException
    at sun.font.FontDesignMetrics$MetricsKey.init(FontDesignMetrics.java:199)
    at sun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:267)
    at sun.swing.SwingUtilities2.getFontMetrics(SwingUtilities2.java:949)
    at javax.swing.JComponent.getFontMetrics(JComponent.java:1599)
    at javax.swing.text.LabelView.getFontMetrics(LabelView.java:154)
    at javax.swing.text.html.InlineView.calculateLongestWordSpanUseWhitespace(InlineView.java:246)
    at javax.swing.text.html.InlineView.calculateLongestWordSpan(InlineView.java:191)
    at javax.swing.text.html.InlineView.getLongestWordSpan(InlineView.java:177)
    at javax.swing.text.html.ParagraphView.calculateMinorAxisRequirements(ParagraphView.java:140)
    at javax.swing.text.BoxView.checkRequests(BoxView.java:918)
    at javax.swing.text.BoxView.getMinimumSpan(BoxView.java:551)
    at javax.swing.text.html.ParagraphView.getMinimumSpan(ParagraphView.java:261)
    at javax.swing.text.BoxView.calculateMinorAxisRequirements(BoxView.java:886)
    at javax.swing.text.html.BlockView.calculateMinorAxisRequirements(BlockView.java:129)
    at javax.swing.text.BoxView.checkRequests(BoxView.java:918)
    at javax.swing.text.BoxView.getMinimumSpan(BoxView.java:551)
    at javax.swing.text.html.BlockView.getMinimumSpan(BlockView.java:361)
    at javax.swing.text.BoxView.calculateMinorAxisRequirements(BoxView.java:886)
    at javax.swing.text.html.BlockView.calculateMinorAxisRequirements(BlockView.java:129)
    at javax.swing.text.BoxView.checkRequests(BoxView.java:918)
    at javax.swing.text.BoxView.setSpanOnAxis(BoxView.java:326)
    at javax.swing.text.BoxView.layout(BoxView.java:691)
    at javax.swing.text.BoxView.setSize(BoxView.java:380)
    at javax.swing.plaf.basic.BasicTextUI$RootView.setSize(BasicTextUI.java:1703)
    at javax.swing.plaf.basic.BasicTextUI$RootView.paint(BasicTextUI.java:1422)
    at com.prosc.msi.model.editor.TextMarkerUtilsTest$1.run(TextMarkerUtilsTest.java:40)
    at java.lang.Thread.run(Thread.java:680) 
```

一些有趣的发现：

*   如果以上在 Event Dispatch Thread 中运行，它可以工作
*   如果我调用`addRule("foo{color:black;}")`，它可以工作（我需要指定规则，但规则是什么似乎并不重要，如果添加任何规则，它就会失败）

问题出在`javax.swing.text.GlyphPainter1.sync()`哪里`javax.swing.text.GlyphView.getFont()`，返回 null。通过设置条件断点，我看到`GlyphView`在这种情况下是一个`javax.swing.text.html.InlineView`. 在断点停止后调用`getFont()`会返回一个非空字体，因此没有及时初始化某些内容。

我意识到摆动组件不是线程安全的，但是我不应该能够在后台线程中实例化 JEditorPane 并在该后台线程中安全地操作它，只要只有一个线程正在调用组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:35:23.723

由于您仅使用轻量级组件，因此可以选择[无头模式。](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/headless/)您可以使用 将工作排除在 GUI 的 EDT 之外`ProcessBuilder`，如图[所示](https://stackoverflow.com/a/5740673/230513)。

```
public static void main(String[] args) throws Exception {
    System.setProperty("java.awt.headless", "true"); 
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            Rectangle bounds = new Rectangle(255, 255);
            BufferedImage image = new BufferedImage(
                bounds.width, bounds.height, BufferedImage.TYPE_INT_RGB);
            Graphics2D d = image.createGraphics();
            d.setClip(bounds);
            for (int i = 0; i < 1000; i++) {
                JEditorPane renderHelper = new JEditorPane(
                    "text/html", "<html><body>This is my text.</body></html>");
                HTMLDocument document = (HTMLDocument) renderHelper.getDocument();
                document.getStyleSheet().addRule("foo{color:black;}");
                View rootView = renderHelper.getUI().getRootView(renderHelper);
                rootView.paint(d, bounds);
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:04:30.820

感谢 Marko 建议寻找事件调度线程的回调，我最终在`HTMLDocument.styleChanged()`. 我的子类：

```
public class ThreadFriendlyHTMLDocument extends HTMLDocument {
    @Override
    protected void styleChanged(final Style style) {
        // to fix GlyphPainter1.sync NullPointerException, we call this in the current thread, instead of the EDT
        DefaultDocumentEvent dde = new DefaultDocumentEvent(0,
                          this.getLength(),
                          DocumentEvent.EventType.CHANGE);
        dde.end();
        fireChangedUpdate(dde);
    }
} 
```

# sql-server - 如何在 SQL 中更改临时表中列的数据类型

> ID：11195106
> 
> 赞同：3
> 
> 时间：2012-06-25T18:28:12.577
> 
> 标签：sql-server, tsql, temp-tables

有没有办法在将值保存到临时表中时更改（增加）列的数据类型？

```
SELECT TableA.ID_NO, sum(TABLEA.COST * TABLEB.QTY) as TOTAL
INTO #matCalc
FROM TABLEA A 
INNER JOIN TABLEB 
ON A.ID_NO = B.ID_NO 
```

我们在实际查询中进行了更大的计算。当我们执行存储过程时，我们得到一个错误“将数字转换为数据类型数字的算术溢出错误”。

非常感谢任何解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T18:37:45.890

只需将数字显式转换为更大的类型。我以 18,2 为例，但我不知道您的数据，因此不同的精度/比例可能更适合您：

```
SELECT TableA.ID_NO, 
  SUM(CONVERT(DECIMAL(18,2), TABLEA.COST) * TABLEB.QTY) as TOTAL
INTO #matCalc
FROM TABLEA A 
INNER JOIN TABLEB 
ON A.ID_NO = B.ID_NO; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T18:50:39.460

试试这个

```
Create Table #matCalc(
ID BIGINT NULL,
TOTAL BIGINT NULL
)

INSERT INTO #matCalc
SELECT TableA.ID_NO, sum(TABLEA.COST * TABLEB.QTY) as TOTAL
FROM TABLEA A 
INNER JOIN TABLEB 
ON A.ID_NO = B.ID_NO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:30:49.337

使用临时表作为：

> 使用适当的数据类型，例如您可能希望将 NUMERIC(18,2) 用于 TOTAL

```
DECLARE @TempTable TABLE(
ID BIGINT NULL,
TOTAL BIGINT NULL
)

DELETE FROM @TempTable
INSERT INTO @TempTable
SELECT TableA.ID_NO, sum(TABLEA.COST * TABLEB.QTY) as TOTAL
FROM TABLEA A 
INNER JOIN TABLEB 
ON A.ID_NO = B.ID_NO 
```

# qt - QProcess 从标准输入和标准输出的文件开始

> ID：11195110
> 
> 赞同：4
> 
> 时间：2012-06-25T18:28:35.540
> 
> 标签：qt, stdout, stdin, qprocess

我需要从 QProcess 运行以下语句：

```
programm < file1 > file2 
```

在 QT 中：

```
QProcess *proc = new QProcess;
proc->setReadChannelMode(QProcess::SeparateChannels);
proc->start("program < \"file1\" > \"file2\"", QIODevice::ReadWrite); 
```

但不知何故，它不起作用。我在任务管理器中看到，该命令看起来正确，但似乎是在没有任何参数的情况下执行程序。我的错误在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T19:18:02.543

`<`分别使用读取和写入文件`>`是 shell 的语法特性。如果您`programm < file1 > file2`使用类似 的 shell运行命令行，则仅执行该命令，根本没有任何参数`sh`。`program`将用于输入和输出的程序通道分配给给定文件与命令本身没有任何关系。

但是`QProcess`可以告诉通过使用这些方法来模拟这种行为：

[`QProcess::setStandardInputFile(QString fileName)`](http://qt-project.org/doc/qprocess.html#setStandardInputFile) [`QProcess::setStandardOutputFile(QString fileName)`](http://qt-project.org/doc/qprocess.html#setStandardOutputFile)

所以你的代码变成：

```
QProcess *proc = new QProcess;
proc->setReadChannelMode(QProcess::SeparateChannels);
proc->setStandardInputFile("file1");
proc->setStandardOutputFile("file2");
proc->start("program"); 
```

# ruby-on-rails-3 - TileStache 和 Nginx

> ID：11195113
> 
> 赞同：0
> 
> 时间：2012-06-25T18:28:42.373
> 
> 标签：ruby-on-rails-3, nginx, geospatial, wsgi

我正在构建一个地图应用程序，并且正在使用 TileStache 进行切片生成和缓存。我已经在我的 rails 应用程序中使用了 NGinx+Passenger，并试图弄清楚如何从同一个 Web 服务器 (NGinx) 为我的 rails 应用程序和 TileStache 提供服务。从 NGinx 文档看来，NGinx 需要重新编译以添加 WSGI 模块。因为我已经在使用 Phusion Passenger 模块，所以我不知道该怎么做。我在正确的轨道上吗？任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:45:18.207

因为对于这个特定的项目，数据是静态的，所以我决定使用 TileStache 来播种/加热缓存并将切片作为静态资产提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T07:03:56.690

我们使用 nginx 来提供瓦片。效果很好。

我们将 nginx 配置为 proxy_pass 到 wsgi 服务器。在启用站点的文件中：

```
 location / {
     proxy_pass          http://127.0.0.1:XXXXSOMEPORTXXXX;
     proxy_set_header    Host       $host;
     proxy_set_header    X-Real-IP  $remote_addr;
     proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
     proxy_connect_timeout 900s;
     proxy_read_timeout 900s;
 } 
```

我给了它一个很长的超时时间，所以客户端可以等待一段时间，你可能想要更少。

然后我创建了一个 python 虚拟环境并安装了 gunicorn 来运行 tilestache 服务器。它可以使用如下命令运行：

```
XXXXPATHTOVIRTUALENVXXXX/bin/gunicorn --max-requests 1  --timeout 900 --graceful-timeout 890 -b 127.0.0.1:XXXXSOMEPORTXXXX -w 20 "TileStache:WSGITileServer('XXXXPATHTOTILESCONFIGXXXX/tiles.conf')" 
```

我们通过在 supervisord 中使用该行来保持 gunicorn 运行，因此主管负责在 gunicorn 服务器终止或系统重新启动时启动它。

Tilestache 非常棒！

# php - 来自多个上传表单的数组，上传图片然后插入数据库（PHP，MySQL）

> ID：11195114
> 
> 赞同：6
> 
> 时间：2012-06-25T18:28:42.783
> 
> 标签：php, mysql, arrays, forms, file-upload

语言：**PHP** / MySQL

我快疯了，我现在真的要问了……我有一个多文件上传表单：

`<input type="file" name="fileupload[]" multiple>`

在一些 Javascript 的帮助下，在对该输入进行的每次更改时，它都会在另一个输入中附加一个文件名列表和一个格式化字符串（从文件名中获取），所以 onchange 我们有一个**如下所示的布局**（假设我们只是添加了一些图片）：

![多重上传表格](../Images/5f0cb92cde8361824db8884b62382916.png) **几乎类似于：http: ** [//jsfiddle.net/pxfunc/WWNnV/4/](http://jsfiddle.net/pxfunc/WWNnV/4/)

* * *

**// 这种布局的 HTML 表示将是...**（假设我们添加了 3 张图像）

`<input type="file" name="fileupload[]" multiple>`

*   图像名称-1.jpg   `<input type="text" value="Image Name 1" name="keyword[]">`
*   justsome_file.png   `<input type="text" value="Justsome File" name="keyword[]">`
*   some_Img-031.gif   `<input type="text" value="Some Img 031" name="keyword[]">`

`<input type="submit" value="Upload">`

* * *

*我之所以这样，是因为除了上传文件之外，**我还想将它们添加到我的数据库中，并具有**基于其文件名的默认标题（以及在我上传时为每个图像设置/更改此标题的选项）。我的表格没有问题。*

**问题：**我的困境在于提交表单数据/操作的 PHP 页面。

我只能设法：

*   上传正确的图片，但所有人都获得相同的标题
*   插入正确的标题，但为所有人获得相同的图像

**这是我的 PHP 操作页面：（**目前正在上传正确的图像，但所有的**标题**都相同）

```
<?php
// CONNECT TO DATABASE...
// INCLUDE UPLOAD CLASS LIBRARY
include (dirname(__FILE__).'/lib/class.upload.php');

$files = array();
foreach ($_FILES['fileupload'] as $k => $l)
{
    foreach ($l as $i => $v)
    {
        if (!array_key_exists($i, $files))
        $files[$i] = array();
        $files[$i][$k] = $v;
        $imagename = $_POST['keyword'][$i];
    }
}

// create an array here to hold file names
$uploaded = array();
foreach ($files as $file)
 {
            $generate_name = rand(100,99999); 
            $generate_name_extra = rand(200,9999);
            $filenamex = "COVER_PHOTO_".$generate_name.$generate_name_extra."_".time();
            $filenamex_thumb = $filenamex."_thumb";

            $handle = new upload($file);
            if ($handle->uploaded) {
            $this_upload = array();

            ///// 1 ////////////////////////////////////////////////////////////////////
            $handle->file_new_name_body   = $filenamex_thumb;
            $handle->file_force_extension = true;
            $handle->image_resize         = true;
            $handle->image_x              = '300';
            $handle->image_ratio_y        = true;
            $handle->jpeg_quality = '100';

            // ABSOLUTE PATH BELOW
            $handle->process($absoRoot.'covers/thumbs/');
            ////////////////////////////////////////////////////////////////////////////
            if ($handle->processed) {

      // store the image filename
    $this_upload['image'] = $handle->file_dst_name; // Destination file name
    $this_upload['body'] = $handle->file_dst_name_body; // Destination file name body
    $this_upload['extension'] = $handle->file_dst_name_ext; // Destination file extension

        $category_id = $_POST['cat'];
        $hiddenvalues = explode ("|",$_POST["cat"]);
        $category = $hiddenvalues[0];
        $category_name = $hiddenvalues[1];

                $sql = 'INSERT INTO cover (id, img, keyword, category_name, cat_id) VALUES ("", "'.$this_upload['image'].'", "'.$imagename.'", "'.$category_name.'", "'.$category.'")';
                 mysql_query($sql);
        }

    $handle->clean();
        header("Location: ./upload.php");
                $message = "";
    } else {

         echo '  file not uploaded to the wanted location';
         echo '  Error: ' . $handle->error . '';

      }
} ?> 
```

（我使用[Colin Verot的](http://www.verot.net/download/class.upload.php/class.upload.txt)[**Upload Class**](http://www.verot.net/download/class.upload.php/class.upload.txt)来处理图片上传，以及他们的 FAQ 教程来处理[此页面上的 MULTIPLE 图片上传，在：**多上传怎么办？**](http://www.verot.net/php_class_upload_faq.htm?PHPSESSID=accbee5eb0a694348a445a61a4e40ba1)）

**如果我只是上传图像，这将非常完美，但是我添加了将每个图像数据添加到我的数据库的功能。& 这就是令人困惑的地方。**

我确定关键是将 SQL 查询放在正确的 foreach 中，或者可能再制作一个，但我已经尝试过了，它只为图像上传或标题提供了 1 个良好的结果，而对两者都没有。

我需要将图像上传到站点，然后将其数据（包括图像路径）存储到我的数据库中。

请查看我的代码并启发我如何解决这个问题？一个片段线索现在真的很棒，因为在尝试了所有我能想到的之后我已经很困惑了。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:49:23.137

您没有将 $imagename 变量保存到 $files 数组，您只是每次都重置它。

```
 $files[$i][$k] = $v;
    $imagename = $_POST['keyword'][$i]; 
```

应该是这样的：

```
 $files[$i][$k] = array($v, $_POST['keyword'][$i]);
    ...
    foreach ($files as $data) {
        list($file, $imagename) = $data;
        ...
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:58:48.933

我确实认为您的问题之一是您的 foreach：

```
$files = array();
foreach ($_FILES['fileupload'] as $k => $l)
{
    foreach ($l as $i => $v)
    {
        if (!array_key_exists($i, $files))
        $files[$i] = array();
        $files[$i][$k] = $v;
        $imagename = $_POST['keyword'][$i];
    }
} 
```

因此，您将遍历每个字段，将其值分配给适合此结构策略的正确文件：

```
_FILES => array(
    'name' => array(0 => 'file.txt'),
    'size' => array(0 => 235)
) 
```

这对于多文件是正确的，但是你这样做：

```
$imagename = $_POST['keyword'][$i]; 
```

这看起来不对。您每次都在最后一次查看时覆盖 var，这意味着您只会得到一个输入值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:57:42.563

当您收集文件信息时，您将`$imagename`在每个循环上覆盖，以便将其分配给最后一个。尝试将其附加到`$files`变量（希望这不会与`upload`您正在使用的类混淆）。

```
foreach ($l as $i => $v)
{
    if (!array_key_exists($i, $files))
    $files[$i] = array();
    $files[$i][$k] = $v;
    $files[$i]['imagename'] = $_POST['keyword'][$i];
} 
```

然后更新您的`$sql`字符串以引用它

```
$sql = 'INSERT INTO cover (id, img, keyword, category_name, cat_id) 
     VALUES ("", "'.$this_upload['image'].'", "'.$file['imagename'].'", 
         "'.$category_name.'", "'.$category.'")'; 
```

# postgresql - postgis中POLYGON（或MULTIPOLYGON）的边界长度

> ID：11195117
> 
> 赞同：0
> 
> 时间：2012-06-25T18:28:47.683
> 
> 标签：postgresql, gis, geospatial, postgis

我有一个 PostGIS 数据库，其中包含一些 POLYGON（有些是 MULTIPOLYGON）。我想找到这些多边形的边界长度。它们是行政边界的形状，因此我想得到边界的长度。

对于 MULTIPOLYGON 形状，我希望它是构成它的每个 POLYGON 的边界之和。

这是 2 个形状的示例（SRID 为 900913）：

```
POLYGON((-771958.31 6885015.34,-771923.15 6885310.54,-771809.28 6885392.78,-771679.07 6885406.05,-771424.03 6885497.97,-770935.04 6885439.73,-770713.55 6885538.08,-770482.81 6885745.21,-770233.34 6886191.66,-770181.32 6886711.86,-770370.21 6886944.29,-770397.74 6886956.42,-770303.56 6887085.22,-770234.96 6887174.93,-770110.06 6887301.59,-769891.93 6887400.11,-769761.75 6887417.69,-769724.8 6887495.1,-769529.55 6887931.36,-769425.75 6887880.34,-769228.74 6887818.78,-769114.39 6887829.32,-768933.2 6887896.17,-768896.84 6887976.98,-768741.36 6888049.11,-768711.51 6888129.98,-768629.41 6888316.56,-768516.09 6888456.13,-768438.68 6888533.53,-768334.47 6888647.22,-768256.1 6888760.41,-768166.54 6888689.5,-768103.1 6888692.01,-768056.2 6888520.15,-767980.56 6888469.13,-767846.87 6888393.49,-767635.77 6888212.29,-767565.41 6888094.43,-767465.14 6888068.05,-767255.8 6888046.94,-767097.49 6888046.94,-767000.73 6888031.11,-766896.94 6887851.68,-766782.6 6887663.44,-766604.93 6887519.21,-766413.18 6887371.43,-766139.4 6887370.19,-765988.89 6887303.02,-765897.72 6887162.23,-765924.86 6887144.75,-765977.74 6887058.21,-766136.4 6887012.53,-766190.39 6886977.26,-766385.86 6886894.81,-766536.29 6886825.12,-766726.67 6886753.74,-766903.44 6886749.84,-766984.18 6886698.85,-767036.04 6886737.09,-767177.11 6886761.74,-767264.65 6886771.08,-767350.14 6886738.68,-767523.22 6886759.11,-767572.5 6886717.04,-767653.03 6886739.86,-767691.49 6886685.78,-767772.01 6886682.18,-767778.03 6886589.63,-767910.62 6886578.9,-768035.55 6886518.56,-768184.29 6886435.26,-768198.74 6886385.97,-768241.23 6886229.58,-768346.61 6886081.7,-768361.91 6885969.53,-768306.67 6885814.84,-768274.37 6885730.7,-768153.68 6885684.8,-768134.14 6885608.32,-768165.62 6885539.63,-768244.94 6885492.76,-768331.48 6885360.55,-768430.01 6885214.38,-768437.96 6885113.83,-768636.67 6885175.57,-768758.43 6885374.97,-768775.54 6885487.75,-768887.58 6885663.36,-768890.62 6885697.22,-769007.53 6885852.57,-769032.42 6885847.82,-769046.75 6885814.89,-769079.05 6885777.21,-769172.84 6885705.87,-769222.94 6885673.18,-769269.78 6885663.38,-769332.85 6885636.46,-769456.56 6885615.08,-769674.02 6885529.96,-769708.16 6885476.49,-769707.47 6885411.77,-769739.7 6885358.83,-769792.79 6885311.27,-769833.53 6885288.08,-769858.28 6885233.95,-769883.51 6885138.09,-769923.29 6885074.87,-769897.32 6885017.75,-769915.3 6884984.68,-770018.88 6884984.27,-770144.01 6885043.71,-770211.53 6884848.97,-770266.09 6884545.38,-770295.69 6884559.34,-770577.74 6884634.02,-770774.56 6884742.9,-771051.06 6884901.37,-771286.57 6884987.78,-771421.81 6884985.53,-771480.47 6884957.27,-771619.97 6884859.66,-771748.55 6884800.97,-771887.67 6884896.97,-771958.31 6885015.34))
MULTIPOLYGON(((-748402.29 6933642.13,-748200.12 6933723.79,-747125.33 6934322.44,-747080.44 6934234.95,-747015.79 6934158.69,-746940.66 6934083.36,-746869.3 6934016.65,-746810.92 6933906.62,-746778.54 6933811.99,-746718.21 6933728.99,-746628.02 6933648.49,-746546.94 6933494.73,-746397.31 6933370.7,-747345.83 6933019.56,-747417.1 6933252.35,-747583.38 6933428.15,-747668.91 6933432.89,-747801.85 6933366.36,-747906.14 6933234.1,-748173.7 6933683.88,-748399.51 6933622.62,-748402.29 6933642.13)),((-748665.23 6934960.19,-747689.57 6935406.98,-747622.32 6935293.38,-747576.11 6935204.26,-747541.11 6935103.13,-747496.85 6935009.48,-747840.87 6934882.49,-748550.36 6934423.01,-748613.66 6934709.69,-748665.23 6934960.19))) 
```

我确定这个列表中有一个 PostGIS 函数（[http://postgis.refractions.net/docs/reference.html](http://postgis.refractions.net/docs/reference.html)），但我不确定是哪个。

我也想要这个以米为单位的长度。我在 a 中有相同的数据`GEOGRAPHY`（与旧的`GEOMETRY`列类型相反）。是否可以从中计算边界长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:28:00.343

在地理类型上使用[ST_Perimeter](http://www.postgis.org/docs/ST_Perimeter.html)返回以米为单位的边界周长：

```
WITH data AS
(SELECT 1 AS gid, 'SRID=900913;POLYGON((-771958.31 6885015.34,-771923.15 6885310.54,-771809.28 6885392.78,-771679.07 6885406.05,-771424.03 6885497.97,-770935.04 6885439.73,-770713.55 6885538.08,-770482.81 6885745.21,-770233.34 6886191.66,-770181.32 6886711.86,-770370.21 6886944.29,-770397.74 6886956.42,-770303.56 6887085.22,-770234.96 6887174.93,-770110.06 6887301.59,-769891.93 6887400.11,-769761.75 6887417.69,-769724.8 6887495.1,-769529.55 6887931.36,-769425.75 6887880.34,-769228.74 6887818.78,-769114.39 6887829.32,-768933.2 6887896.17,-768896.84 6887976.98,-768741.36 6888049.11,-768711.51 6888129.98,-768629.41 6888316.56,-768516.09 6888456.13,-768438.68 6888533.53,-768334.47 6888647.22,-768256.1 6888760.41,-768166.54 6888689.5,-768103.1 6888692.01,-768056.2 6888520.15,-767980.56 6888469.13,-767846.87 6888393.49,-767635.77 6888212.29,-767565.41 6888094.43,-767465.14 6888068.05,-767255.8 6888046.94,-767097.49 6888046.94,-767000.73 6888031.11,-766896.94 6887851.68,-766782.6 6887663.44,-766604.93 6887519.21,-766413.18 6887371.43,-766139.4 6887370.19,-765988.89 6887303.02,-765897.72 6887162.23,-765924.86 6887144.75,-765977.74 6887058.21,-766136.4 6887012.53,-766190.39 6886977.26,-766385.86 6886894.81,-766536.29 6886825.12,-766726.67 6886753.74,-766903.44 6886749.84,-766984.18 6886698.85,-767036.04 6886737.09,-767177.11 6886761.74,-767264.65 6886771.08,-767350.14 6886738.68,-767523.22 6886759.11,-767572.5 6886717.04,-767653.03 6886739.86,-767691.49 6886685.78,-767772.01 6886682.18,-767778.03 6886589.63,-767910.62 6886578.9,-768035.55 6886518.56,-768184.29 6886435.26,-768198.74 6886385.97,-768241.23 6886229.58,-768346.61 6886081.7,-768361.91 6885969.53,-768306.67 6885814.84,-768274.37 6885730.7,-768153.68 6885684.8,-768134.14 6885608.32,-768165.62 6885539.63,-768244.94 6885492.76,-768331.48 6885360.55,-768430.01 6885214.38,-768437.96 6885113.83,-768636.67 6885175.57,-768758.43 6885374.97,-768775.54 6885487.75,-768887.58 6885663.36,-768890.62 6885697.22,-769007.53 6885852.57,-769032.42 6885847.82,-769046.75 6885814.89,-769079.05 6885777.21,-769172.84 6885705.87,-769222.94 6885673.18,-769269.78 6885663.38,-769332.85 6885636.46,-769456.56 6885615.08,-769674.02 6885529.96,-769708.16 6885476.49,-769707.47 6885411.77,-769739.7 6885358.83,-769792.79 6885311.27,-769833.53 6885288.08,-769858.28 6885233.95,-769883.51 6885138.09,-769923.29 6885074.87,-769897.32 6885017.75,-769915.3 6884984.68,-770018.88 6884984.27,-770144.01 6885043.71,-770211.53 6884848.97,-770266.09 6884545.38,-770295.69 6884559.34,-770577.74 6884634.02,-770774.56 6884742.9,-771051.06 6884901.37,-771286.57 6884987.78,-771421.81 6884985.53,-771480.47 6884957.27,-771619.97 6884859.66,-771748.55 6884800.97,-771887.67 6884896.97,-771958.31 6885015.34))'::geometry AS geom
UNION SELECT 2 AS gid,
'SRID=900913;MULTIPOLYGON(((-748402.29 6933642.13,-748200.12 6933723.79,-747125.33 6934322.44,-747080.44 6934234.95,-747015.79 6934158.69,-746940.66 6934083.36,-746869.3 6934016.65,-746810.92 6933906.62,-746778.54 6933811.99,-746718.21 6933728.99,-746628.02 6933648.49,-746546.94 6933494.73,-746397.31 6933370.7,-747345.83 6933019.56,-747417.1 6933252.35,-747583.38 6933428.15,-747668.91 6933432.89,-747801.85 6933366.36,-747906.14 6933234.1,-748173.7 6933683.88,-748399.51 6933622.62,-748402.29 6933642.13)),((-748665.23 6934960.19,-747689.57 6935406.98,-747622.32 6935293.38,-747576.11 6935204.26,-747541.11 6935103.13,-747496.85 6935009.48,-747840.87 6934882.49,-748550.36 6934423.01,-748613.66 6934709.69,-748665.23 6934960.19)))'::geometry AS geom)

SELECT gid,
    ST_Perimeter(ST_Transform(geom,4326)::geography) AS perimeter_geog
FROM data;

 gid |  perimeter_geog
-----+------------------
   1 | 11439.2519522371
   2 | 5225.96374459924
(2 rows) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T19:41:09.883

例如，如果几何列在名为“counties”的表上称为“wkb_geometry”，您可以尝试...

```
select st_length(st_boundary(st_transform(wkb_geometry,2163))) as border_length from counties; 
```

假设您在美国使用数据；SRID 2163 似乎是一个以米为单位测量距离的好方法。如果您正在与世界的不同地区打交道，您可以选择一个更合适的。

# java - Android使用wamp server、phpmyadmin、eclipse、json登录和注册

> ID：11195119
> 
> 赞同：1
> 
> 时间：2012-06-25T18:28:54.370
> 
> 标签：java, eclipse, json, phpmyadmin, wampserver

我正在尝试按照本教程创建登录界面：[http](http://www.youtube.com/watch?v=etYVqYAhp6w&feature=bf_prev&list=UUnzGVPkz3rZcrLh9jKbKNQw) ://www.youtube.com/watch?v=etYVqYAhp6w&feature=bf_prev&list=UUnzGVPkz3rZcrLh9jKbKNQw - 第 1 到 6 部分。

当我在 Android 模拟器上运行应用程序时，它返回 toast 消息“登录失败”（下面 Main.java 文件中声明的异常）。

main.java 文件连接到我保存在 wamp/www/index.php 目录中的 php 文件 index.php，然后它与存储在 wamp 服务器（在我的本地机器上）上的“mobiledb”进行通信。

已在数据库中创建了一个用户，我尝试通过模拟器登录，该模拟器应验证登录详细信息并给出 toast 消息“成功！”。

如果有人可以就可能出现的问题提供任何帮助，将不胜感激。谢谢。

主.java

```
package com.kibriaali.logintutorial;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Main extends Activity implements OnClickListener{
    EditText etUser, etPass;
    Button bLogin;

    //Create string variables that will have the input assigned to them
    String username, password;

    //Create a HTTPClient as the form container
    HttpClient httpclient;

    //Use HTTP POST method
    HttpPost httppost;

    //Create an array list for the input data to be sent
    ArrayList<NameValuePair> nameValuePairs;

    //Create a HTTP Response and HTTP Entity
    HttpResponse response;
    HttpEntity entity;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        initialise();
    }

    private void initialise() {
        // TODO Auto-generated method stub
        etUser = (EditText) findViewById(R.id.etUser);
        etPass = (EditText) findViewById(R.id.etPass);
        bLogin = (Button) findViewById(R.id.bSubmit);
        //Now to set an onClickListener
        bLogin.setOnClickListener(this);
    }

    public void onClick(View v) {
        // This is where we will be working now

        //Create new default HTTPClient
        httpclient = new DefaultHttpClient();

        //Create new HTTP POST with URL to php file as parameter
        httppost = new HttpPost("http://127.0.0.1/wamp/www/index.php"); //92.4.131.132 //127.0.0.1 //10.0.2.2

        //Assign input text to strings
        username = etUser.getText().toString();
        password = etPass.getText().toString();

        //Next block of code needs to be surrounded by try/catch block for it to work
        try {
            //Create new Array List
            nameValuePairs = new ArrayList<NameValuePair>(2);

            //place them in an array list
            nameValuePairs.add(new BasicNameValuePair("user", "username"));
            nameValuePairs.add(new BasicNameValuePair("pass", "password"));

            //Add array list to http post
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            //assign executed form container to response
            response = httpclient.execute(httppost); //response from the PHP file

            //check status code, need to check status code 200
            if(response.getStatusLine().getStatusCode()== 200){

                //assign response entity to http entity
                entity = response.getEntity();

                //check if entity is not null
                if(entity != null){

                    //Create new input stream with received data assigned
                    InputStream instream = entity.getContent();

                    //Create new JSON Object. assign converted data as parameter.
                    JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                    //assign json responses to local strings
                    String retUser = jsonResponse.getString("user");//mySQL table field
                    String retPass = jsonResponse.getString("pass");

                    //Validate login
                    if(username.equals(retUser)&& password.equals(retPass)){ //Check whether 'retUser' and 'retPass' matches username/password 

                        //Create a new shared preference by getting the preference
                        //Give the shared preference any name you like.
                        SharedPreferences sp = getSharedPreferences("logindetails", 0);

                        //Edit the Shared Preference
                        SharedPreferences.Editor spedit = sp.edit();

                        //Put the login details as strings
                        spedit.putString("user", username);
                        spedit.putString("pass", password);//May not need to store password

                        //Close the editor
                        spedit.commit();

                        //Display a Toast saying login was a success
                        Toast.makeText(getBaseContext(), "SUCCESS!", Toast.LENGTH_SHORT).show();

                    } else {
                        //Display a Toast saying it failed.

                        Toast.makeText(getBaseContext(), "Invalid Login Details", Toast.LENGTH_SHORT).show();
                    }

                }

            }

        } catch(Exception e){
            e.printStackTrace();
            //Display toast when there is a connection error
            //Change message to something more friendly
            Toast.makeText(getBaseContext(), "Login Unsuccessful.", Toast.LENGTH_SHORT).show();
        }

    }//END onClick()

    private static String convertStreamToString(InputStream is) {
        /*
         * To convert the InputStream to String we use the BufferedReader.readLine()
         * method. We iterate until the BufferedReader return null which means
         * there's no more data to read. Each line will appended to a StringBuilder
         * and returned as String.
         */
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }//END convertStreamToString()

} 
```

索引.PHP 文件

```
<?php
//turn off error reporting
error_reporting(E_ALL ^ E_NOTICE ^ E_WARNING);

//Create fields for the database
//server, username, password, database

$dbhost = "localhost"; //92.4.131.132 //127.0.0.1 //10.0.2.2
$dbuser = "root";
$dbpass = "";
$dbdb = "mobiledb";

//connect to mySQL
$connect = mysql_connect($dbhost, $dbuser, $dbpass) or die("connection error");

//Select the database
mysql_select_db($dbdb)or die("database selection error");

//Retrieve the login details via POST
$username = $_POST['username'];
$password = $_POST['password'];

//Query the table android login
$query = mysql_query("SELECT * FROM androidlogin WHERE user='$username' AND pass='$password'");

//check if there any results returned
$num = mysql_num_rows($query);

//If a record was found matching the details entered in the query
if($num == 1){
    //Create a while loop that places the returned data into an array
    while($list=mysql_fetch_assoc($query)){
        //Store the returned data into a variable
        $output = $list;

        //encode the returned data in JSON format
        echo json_encode($output);

    }
    //close the connection
    mysql_close();

}

?> 
```

注意：已在 Android 清单文件中启用 Internet 权限。

# openjpa - 在 openJPA 的子句中解决对本地查询中的列表缺乏支持的问题

> ID：11195121
> 
> 赞同：0
> 
> 时间：2012-06-25T18:28:58.740
> 
> 标签：openjpa

我不知道为什么有人会这样做（包括对命名查询中的列表的支持，但不包括对本地命名查询的支持（当我告诉你我对此非常生气时相信我）。如何解决这个缺陷？我可以'不可能将数组的所有位置值放入本机查询中，它可能长达数百个单位！！！！！您将如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:24:09.747

您可以将 List 作为参数传递给普通 SQL 语句吗？不。

```
 /**
 * Create an instance of Query for executing a native SQL statement, e.g., for update or delete.
 * @param sqlString a native SQL query string
 * @return the new query instance
 */ 
 public Query createNativeQuery(String sqlString); 
```

当您创建本机查询时，JPA 提供程序会将该 SQL 盲目地传递给数据库，并假定用户已正确格式化 SQL。

如果要将 List 作为查询参数传递，请使用 JPQL。

# java - 如何使用java代码在Relativelayout中设置布局参数

> ID：11195126
> 
> 赞同：0
> 
> 时间：2012-06-25T18:29:18.007
> 
> 标签：java, android, android-layout, android-relativelayout

我已经使用 RelativeLayout 创建了一个布局，但是当方向更改为 Landscape 时，我需要更改上边距。

```
 @Override
  public void onConfigurationChanged(Configuration newConfig) {
   super.onConfigurationChanged(newConfig);

   // Checks the orientation of the screen
   if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {

       RelativeLayout.LayoutParams labelLayoutParams = new RelativeLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
      // labelLayoutParams.setMargins(0, -100, 0, 0);
       layout.setLayoutParams(labelLayoutParams);

       Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
   } 
```

但我得到以下异常

```
 06-25 22:22:31.166: E/AndroidRuntime(8211): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams 
```

所以请帮助如何设置布局参数，特别是相对布局的上边距？程序化地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:34:32.427

尝试这个：

```
RelativeLayout.LayoutParams labelLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
labelLayoutParams.topMargin = 10;
layout.setLayoutParams(labelLayoutParams); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:36:59.903

按照[设置视图的绝对位置尝试这种方式](https://stackoverflow.com/questions/3294590/set-the-absolute-position-of-a-view-in-android)

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);

    params.topMargin = 60;

    layout.setLayoutParams(params); 
```

# jquery - JQUERY UI 主题 css 未在 ASP.NET MVC 4 Web 项目中应用

> ID：11195127
> 
> 赞同：3
> 
> 时间：2012-06-25T18:29:18.247
> 
> 标签：jquery, asp.net, user-interface, themes, asp.net-mvc-4

我下载了 jquery ui 主题的 redmond 主题。将 redmond 下的所有内容复制到 \content\themes，将 jquery-ui-1.8.21.custom.min.js 复制到 \scripts，将 jquery 更新到 jquery-1.7.2.js 并将以下内容添加到 _Layout.cshtml。但是，用户界面似乎没有改变。

```
 <meta charset="utf-8" />
    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/css")" rel="stylesheet" type="text/css" />
     <link href="@Url.Content("~/Content/themes/redmond/jquery-ui-1.8.21.custom.css")" rel="stylesheet" type="text/css" />
      <script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
     <script src="@Url.Content("~/Scripts/jquery-ui-1.8.21.custom.min.js")" type="text/javascript"></script>
    <meta name="viewport" content="width=device-width" />

Here is the structure of the Content folder
Content
   Themes
     base
     redmond
       images
       jquery-ui-1.8.21.custom.css
    Site.css
Scripts
   jquery-1.7.2.min.js
   jquery-ui-1.8.21.custom.min.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:06:01.267

实际上，它正在工作。我从包中的 index.html 复制了一些 ui 控件到我的网页。它工作正常。

# c# - 从数据库问题下载 ASP.NET MVC 3 文件

> ID：11195128
> 
> 赞同：2
> 
> 时间：2012-06-25T18:29:20.437
> 
> 标签：c#, sql-server, asp.net-mvc-3, nhibernate, razor

**编辑：**

为简洁起见，这是表的创建脚本减去键的约束。

```
CREATE TABLE [dbo].[ProfileFile](
[ID] [int] IDENTITY(1,1) NOT NULL,
[ProfileID] [int] NOT NULL,
[FileTypeId] [int] NOT NULL,
[Data] [image] NOT NULL 
```

**编辑：**

尝试绕过 NHibernate 访问服务层中的数据

```
byte[] temp = (byte[])this._baseModelRepository.CurrentSession.CreateSQLQuery("SELECT Data FROM ProfileFile WHERE ProfileID = :ID").SetParameter("ID", id).UniqueResult(); 
```

**编辑：** 检查保存在数据库中的二进制数据后，似乎整个文件都已上传，而我的问题实际上是在显示图像方面。

图像未呈现，但我可以按照操作链接下载文件，但它在 8KB 处被截断。

NHibernate 生成的 ProfileFile 模型类数据字段

```
public virtual System.Byte[] Data { get; set; } 
```

在进行此设置时，我暂时对 MIME 类型和文件名进行了硬编码。

```
public ActionResult GetProfilePhotoByID(int profileID)
    {
        var profileFile= //Load file object from DB by profileID
        byte[] byteArray = profileFile.Data;
        string mimeType = "image/jpg";
        string fileName = "ProfilePhoto.JPG";

        return File(byteArray, mimeType, fileName);
    } 
```

使用调试器我发现 profileFile.Data 的大小是 8000。也许这是 NHibernate 限制？

此外，~~这是使用 IIS 运行的，~~我在 Chrome、Firefox 和 IE 中获得了相同的效果，但主要在 Chrome 中进行测试。

**原始问题：** 我正在尝试允许用户上传个人资料照片，然后我将在他们的个人资料页面上提供该照片。不幸的是，图像文件没有完全上传，被截断为 8 KB。下面是一些更重要的代码段的简化版本。

索引视图片段

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { id = "profileform", enctype = "multipart/form-data" }))

<input type="file" id="photo" name="photo" /> 
```

控制器发布动作有`HttpPostedFileBase photo`参数

```
byte[] input;
            if (photo != null && photo.ContentLength > 0)
            {
                input = new byte[photo.ContentLength];
                photo.InputStream.Read(input, 0, photo.ContentLength);

                if (model.ProfileFiles == null)
                {
                    model.ProfileFiles = new List<Core.Model.ProfileFiles>();
                }

                model.ProfileFiles.Add(new Core.Model.ProfileFiles()
                {
                    ProfileID = model.ID,
                    Profile = model,
                    Data = input
                });
            } 
```

模型类是用 NHibernate 生成的。相关领域是

```
// One To Many:
public virtual IList<ProfileFile> ProfileFiles { get; set; } 
```

如果需要更多信息，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:50:41.833

解决了这个问题，并且仍然使用 NHibernate，使用[Peter Gluck](https://stackoverflow.com/a/11005421/1454576)对相关问题的回答。

```
var persistenceModel = AutoMap.AssemblyOf<Model.BaseModel>()
    .Override<Model.ProfileFile>(map =>
    {
        // Sets max length of byte[] retrieved from image column of DB
        map.Map(x => x.Data).Length(2147483647);
    })
    ... etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:34:46.237

尝试在您的`Web.config`

```
<system.web>
    <!--50MB-->
    <httpRuntime maxRequestLength="51200"/>
</system.web> 
```

和

```
<system.webServer>
    <security>
        <requestFiltering>
            <!--50MB-->
            <requestLimits maxAllowedContentLength="52428795" />
        </requestFiltering>
    </security>
</system.webServer> 
```

有关`maxRequestLength`并`maxAllowedContentLength`查看[此问题](https://stackoverflow.com/questions/6327452/which-gets-priority-maxrequestlength-or-maxallowedcontentlength)的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:48:50.443

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
  <input id="file" type="file" name="file" />
  <input type="submit" value="Upload" class="btn" />
}

 public ActionResult ChangePhoto(HttpPostedFileBase file)
{
    if (file != null && file.ContentLength > 0)
    {

      using (System.Drawing.Image Img = System.Drawing.Image.FromStream(file.InputStream))
      {
         Img.Save(Server.MapPath("~") +"/myimage.png", Img.RawFormat);
      }
 } 
```

# mysql - MYSQL 上次登录和最近 3 个月的登录次数

> ID：11195130
> 
> 赞同：3
> 
> 时间：2012-06-25T18:29:24.517
> 
> 标签：mysql, count, group-by, max

我正在尝试编写一个查询以将用户表连接到活动记录表并为每个用户返回以下内容：

A) 他们上次登录的时间。

B) 最近 3 个月的登录次数。

到目前为止，这是我想出的：

```
SELECT A.UserID, COUNT( Activity ) AS Logins, MAX( TIME ) AS LastLogin  
FROM UserMaster A  
LEFT JOIN UserWebActivity B ON A.UserID = B.UserID  
AND Activity =  'Login'  
AND TIME BETWEEN DATE_SUB( NOW( ) , INTERVAL 3 MONTH ) AND NOW( )  
GROUP BY A.UserID 
```

这几乎可以工作，但它不会返回最近 3 个月内未登录的任何用户的最新登录信息。如何让 count() 和 max() 正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:34:12.347

首先分别解决每个问题：

```
SELECT A.UserID, MAX(TIME) AS LastLogin  
FROM UserMaster A  
LEFT JOIN UserWebActivity B
ON A.UserID = B.UserID  
AND Activity = 'Login'  
GROUP BY A.UserID

SELECT A.UserID, COUNT(Activity) AS Logins
FROM UserMaster A  
LEFT JOIN UserWebActivity B ON A.UserID = B.UserID  
AND Activity = 'Login'  
AND TIME BETWEEN (NOW() - INTERVAL 3 MONTH) AND NOW( )  
GROUP BY A.UserID 
```

分别测试它们以确保这些查询中的每一个都按您的意愿工作，并在必要时进行调整。

然后，当您对它们都起作用感到高兴时，将结果合并在一起：

```
SELECT T1.UserID, T1.LastLogin, T2.Logins
FROM
(
    SELECT A.UserID, MAX(TIME) AS LastLogin  
    FROM UserMaster A  
    LEFT JOIN UserWebActivity B
    ON A.UserID = B.UserID  
    AND Activity = 'Login'  
    GROUP BY A.UserID
) AS T1
JOIN
(
    SELECT A.UserID, COUNT(Activity) AS Logins
    FROM UserMaster A  
    LEFT JOIN UserWebActivity B
    ON A.UserID = B.UserID  
    AND Activity = 'Login'
    AND TIME BETWEEN (NOW() - INTERVAL 3 MONTH) AND NOW()
    GROUP BY A.UserID
) AS T2
ON T1.UserID = T2.UserID 
```

这将允许 MySQL 为不同的查询充分利用索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T18:35:11.597

您可以`CASE`在您的`COUNT`:

```
SELECT A.UserID,
  COUNT(
    CASE WHEN TIME BETWEEN DATE_SUB( NOW( ) , INTERVAL 3 MONTH ) AND NOW( )
    THEN Activity
  END ) AS Logins,
  MAX( TIME ) AS LastLogin  
FROM UserMaster A  
LEFT JOIN UserWebActivity B ON A.UserID = B.UserID  
AND Activity =  'Login'  
GROUP BY A.UserID 
```

但是，如果您有大量数据，此解决方案的效率将低于 @MarkByers。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:38:25.453

就像另一个疯狂的想法 - 而不是 MAX( TIME )

```
coalesce(max(time), (select max(time) from UserWebActivity where ...) ) 
```

# c# - 独特的文件重命名问题

> ID：11195135
> 
> 赞同：2
> 
> 时间：2012-06-25T18:29:55.860
> 
> 标签：c#, regex, file-rename, file-manipulation

我现在正在开发一个应用程序，它从窗口读取数据并根据输入生成 XML 文件。

我的任务是在每次更新表单时创建一个新文件（用户按“提交”）。（到目前为止，一切都很好）

这里有一个问题：文件必须以突出的字段输入命名。（如果用户在文本框中键入“993388CX”，应用程序将重命名待处理文件 993388CX.xml）。

我了解如何在 C# 中实际重命名文件，但不了解如何根据表单的输入重命名它。是否存在任何会根据表单输入动态重命名文件的类/方法？

**代码：**

**//从app UI上的用户输入读取info1并生成XML语句**

```
 XTemp = XDoc.CreateElement("New_Info");
        XTemp.InnerText = info1.Text;
        Xsource.AppendChild(XTemp);

          XDoc.Save(@"C:\oldfile.xml"); 
```

**我需要在 info1.Text 中的字符串之后重命名新文件**

如果用户输入的是“John5”，文件需要重命名为 john5.xml

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:33:01.937

要么直接用正确的名称保存它：

```
XDoc.Save(String.Format("C:\\{0}.xml",info1.Text)); 
```

**或者**

之后重命名

```
File.Move("c:\\oldfile.xml", String.Format("C:\\{0}.xml",info1.Text)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:35:39.513

```
 XDoc.Save(@"C:\" + info1.Text + ".xml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:33:26.560

`File.Move`应该做你想做的。

# tsql - 我的查询不返回列中的所有数据

> ID：11195136
> 
> 赞同：1
> 
> 时间：2012-06-25T18:29:58.860
> 
> 标签：tsql

我的专栏之一已设置为 nvarchar(max)。当我查询该列时，它只返回 256 个字符。我检查了数据的长度，它有超过 7000 个字符。

我怎样才能获得所有角色而不是丢失任何角色？

```
# select ValidationKey from UserProductAccountProvider 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:38:20.213

在 SSMS 中，选择工具菜单，然后选择选项、查询结果、SQL Server、结果到文本。将“每列中显示的最大字符数”值从 ​​256 更改为您想要的最大 8192。单击“确定”后，将保存设置。在您启动新的查询窗口之前，该设置实际上不会生效。

正如 marc_s 所说，从您的代码中，您将获得全文列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:33:23.227

在 David 指出的 UI 设置旁边，还有两个设置会影响返回的数据量。

2：选择Tools菜单，然后Options，Query Results，SQL Server，Result to Grid。更改值“非 XML 数据”。该值告诉您网格中有多少字符可用。您可以通过副本获得它们。看起来默认限制大于剪贴板的限制（我最多得到 43kB 字符）。

3：studio中有设置限制返回数据量。它是每个会话。它可以通过工具菜单找到，然后是选项，查询执行。更改“SET TEXTSIZE”的值。可以验证和更改 SQL 批处理中的值：

```
SELECT @@textsize; 
```

您可以将其设置为例如 100kB：

```
SET textsize 102400; 
```

通常 UI 设置较低，约为 256，但有更多数据可用。

这三个设置都会影响您看到（或获得）的内容。

当您真的想检查非常大的结果集时，您可以在消息窗口中打印结果：

```
DECLARE @s AS NVARCHAR(max);
DECLARE @LineLength AS int = 4000;
-- you might need a cursor when you have many rows;
SELECT TOP 1 @s = large_text FROM ....
WHILE LEN(@s) > @LineLength  BEGIN
    print SUBSTRING(@s,1, @LineLength);
    SET @s = SUBSTRING(@s,@LineLength, LEN(@s));
END 
```

# python - 中断或退出“with”语句？

> ID：11195140
> 
> 赞同：55
> 
> 时间：2012-06-25T18:30:17.607
> 
> 标签：python, with-statement

我只想`with`在某些条件下退出语句：

```
with open(path) as f:
    print 'before condition'
    if <condition>: break #syntax error!
    print 'after condition' 
```

当然，上面的行不通。有没有办法做到这一点？（我知道我可以反转条件：`if not <condition>: print 'after condition'`- 任何方式都像上面？）

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2014-05-14T21:43:07.840

`with`给你添麻烦？在问题上扔更多`with`-able对象！

```
class fragile(object):
    class Break(Exception):
      """Break out of the with statement"""

    def __init__(self, value):
        self.value = value

    def __enter__(self):
        return self.value.__enter__()

    def __exit__(self, etype, value, traceback):
        error = self.value.__exit__(etype, value, traceback)
        if etype == self.Break:
            return True
        return error 
```

只需将您要使用的表达式包装`with`起来`fragile`，并`raise fragile.Break`随时爆发！

```
with fragile(open(path)) as f:
    print 'before condition'
    if condition:
        raise fragile.Break
    print 'after condition' 
```

### 此设置的好处

*   使用`with`和只是`with`; 不会将您的函数包装在语义上具有误导性的单次运行“循环”或狭义的专用函数中，并且不会强迫您在`with`.
*   使您的局部变量保持可用，而不必将它们传递给包装函数。
*   可嵌套！

    ```
    with fragile(open(path1)) as f:
        with fragile(open(path2)) as g:
            print f.read()
            print g.read()
            raise fragile.Break
            print "This wont happen"
        print "This will though!" 
    ```

    `with`这样，如果您希望两者都中断，则不必创建一个新函数来包装外部。

*   根本不需要重组：只需包装你已经拥有的东西`fragile`，你就可以开始了！

### 此设置的缺点

*   实际上并不使用'break'语句。不能赢得所有人;）

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-06-25T18:33:55.350

最好的方法是将其封装在一个函数中并使用`return`：

```
def do_it():
    with open(path) as f:
        print 'before condition'
        if <condition>:
            return
        print 'after condition' 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-05-05T03:13:51.310

This is an ancient question, but this is an application for the handy "breakable scope" idiom. Just imbed your `with` statement inside:

```
for _ in (True,):
    with open(path) as f:
        print 'before condition'
        if <condition>: break
        print 'after condition' 
```

This idiom creates a "loop", always executed exactly once, for the sole purpose of enclosing a block of code inside a scope that can be broken out of conditionally. In OP's case, it was a context manager invocation to be enclosed, but it could be any bounded sequence of statements that may require conditional escape.

The accepted answer is fine, but this technique does the same thing without needing to create a function, which is not always convenient or desired.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-25T18:47:18.480

我认为你应该重构逻辑：

```
with open(path) as f:
    print 'before condition checked'
    if not <condition>:
        print 'after condition checked' 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-25T18:31:44.143

由于`break`只能在循环内发生，因此您的选项在以下范围内受到限制`with`：

*   return（将“with”+相关语句放入函数中）
*   退出（从程序中保释 - 可能不理想）
*   异常（在“with”中生成异常，在下面捕获）

`return`如果您可以在函数中隔离 the`with`和相关的语句（仅此而已），那么拥有一个函数并使用可能是最干净和最简单的解决方案。

否则在需要时在内部生成异常`with`，立即在下方/外部捕获`with`以继续其余代码。

*更新*：正如 OP 在下面的评论中建议的那样（也许是脸颊上的舌头？），人们也可以将`with`语句包装在一个循环中以`break`使其工作 - 尽管这在语义上会产生误导。因此，虽然是一个可行的解决方案，但可能不是推荐的东西）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-25T18:34:53.663

```
f = open("somefile","r")
for line in f.readlines():
       if somecondition: break;
f.close() 
```

我认为您无法摆脱...您需要使用循环...

[编辑] 或者只是做其他人提到的功能方法

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-13T08:16:23.520

作为速记片段：

```
class a:
    def __enter__(self):
        print 'enter'
    def __exit__(self ,type, value, traceback):
        print 'exit'

for i in [1]:
    with a():
        print("before")
        break
        print("after") 
```

...

```
enter
before
exit 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-08T22:17:00.207

使用`while True`：

```
while True:
    with open(path) as f:
        print 'before condition'
        if <condition>: 
            break 
        print 'after condition n'
    break 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-13T20:09:13.773

`__exit__()`为此目的存在一个功能。语法如下：

```
with VAR = EXPR:
  try:
    BLOCK
  finally:
    VAR.__exit__() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-25T18:34:30.187

您可以将所有内容放在一个函数中，当条件为真时调用返回。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-14T12:36:22.387

这是使用`try`and的另一种方法`except`，即使反转条件可能更方便。

```
class BreakOut(Exception): pass

try:
    with open(path) as f:
        print('before condition')
        if <condition>: 
            raise BreakOut #syntax error!
        print('after condition')
except BreakOut:
    pass 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-05T21:20:27.973

这个问题是在 Python 3.4 存在之前被问到的，但是在 3.4 中你可以使用`contextlib.supress`，抑制你自己的个人异常。

看到这个（按原样运行）代码

```
from contextlib import suppress

class InterruptWithBlock(UserWarning):
    """To be used to interrupt the march of a with"""

condition = True
with suppress(InterruptWithBlock):
    print('before condition')
    if condition: raise InterruptWithBlock()
    print('after condition')

# Will not print 'after condition` if condition is True. 
```

因此，使用问题中的代码，您可以：

```
with suppress(InterruptWithBlock) as _, open(path) as f:
    print('before condition')
    if <condition>: raise InterruptWithBlock()
    print('after condition') 
```

注意：如果您（仍然）在 3.4 之前，您仍然可以`suppress`轻松制作自己的上下文管理器。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2019-12-12T04:26:57.387

从“break”更改为“f.close”

```
with open(path) as f:
    print('before condition')
    if <condition>: f.close()
    print('after condition') 
```

# javascript - 使用 jQuery 重定向 youtube 视频？

> ID：11195142
> 
> 赞同：0
> 
> 时间：2012-06-25T18:30:24.407
> 
> 标签：javascript, jquery, youtube

我的网站上有 jQuery。我还有一个使用标准对象/嵌入代码的 youtube 视频。我将如何使用 jQuery，以便当 youtube 视频播放完毕时，页面被重定向到新页面？

** 编辑***

这是我的 youtube 嵌入：

```
<div id="embed_player">
    <object id="embed_object" type="application/x-shockwave-flash" width="640" height="385" data="http://www.youtube.com/v/LgJxPKfV8sw">
        <param name="movie" value="http://www.youtube.com/v/LgJxPKfV8sw">
        <param name="allowfullscreen" value="true">
        <param name="allowscriptaccess" value="true">
        <param name="wmode" value="transparent">
        <param name="flashvars" value="autoplay=0&hd=1&fs=1&rel=0&version=3&enablejsapi=1&playerapiid=ytplayer">
    </object>
</div> 
```

我尝试将以下 javascript 添加到我的页面，但没有成功...

```
<script type="text/javascript" src="http://www.youtube.com/player_api"></script>
<script type="text/javascript">
function onYouTubePlayerReady(playerId) {
  ytplayer = document.getElementById("ytplayer");
  ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
}

function onytplayerStateChange(newState) {
   alert("Player's new state: " + newState);
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:35:20.397

您需要绑定到 onstatechange 事件：

onStateChange 每当玩家的状态发生变化时都会触发此事件。可能的值是未开始 (-1)、结束 (0)、播放 (1)、暂停 (2)、缓冲 (3)、视频提示 (5)。首次加载 SWF 时，它将广播未启动 (-1) 事件。当视频被提示并准备好播放时，它将广播视频提示事件 (5)。

这里有一些很好的文档：[https ://developers.google.com/youtube/js_api_reference#Adding_event_listener](https://developers.google.com/youtube/js_api_reference#Adding_event_listener)

# excel - Excel 连接

> ID：11195148
> 
> 赞同：1
> 
> 时间：2012-06-25T18:30:37.387
> 
> 标签：excel, concatenation

我想将两个单元格中的数据连接到一个单元格中。我还想只组合那些具有相同 ID 的单元格。

任务 ID 名称

4355.2 参与者

4355.2 领袖

4462.1 在线

4462.1 快速

4597.1 幻灯片

4597.1 一页

4597.1 一个主题

例如，为此，我想要一个 4355.2 的单元格，其中“参与者，领导者”作为该单元格中的数据。4462.1 的相同类型的数据，“在线和快速”作为该单元格的数据。

任务 ID 名称

4355.2 参与者，领导者

有没有办法在 Excel 中做到这一点？

4462.1 在线，快速

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:24:19.660

假设您的数据在 中`A1:B8`，并且已排序。

在 C2 中`=IF(OR(A2>A1,A1="Task ID"),B2,C1&", "&B2)`，并将其复制到数据的末尾
将 A 列复制到 D 列，并删除重复项*（告诉 excel 不要扩大选择范围）*
在 E2 中，`=INDEX(C:C,MATCH(D2,A:A),1)`并将其复制到去重数据的末尾D列

# ruby-on-rails - 使用 RVM 为 Rails 应用程序设置和管理虚拟主机？

> ID：11195149
> 
> 赞同：2
> 
> 时间：2012-06-25T18:30:37.420
> 
> 标签：ruby-on-rails, apache, ubuntu, nginx, rvm

我有一台将托管多个 Rails 应用程序的服务器，我正在尝试了解如何最好地为这些多个虚拟主机提供服务。我之前通过 Apache 的反向代理和其他几个反向代理（`pound`例如混合有 Rails 应用程序的服务器场景。

我一直倾向于使用 Apache 2.4，即使在代理前端也有性能改进，但是这对于 Ubuntu 12.04 LTS 上的当前反向移植来说效果不太好。最终，我希望拥有通过 shell 配置虚拟主机的最方便的方法，以便我可以快速进入并添加新应用程序，同时保持对 RVM 对 Ruby 和 Rails 版本的控制。

我愿意继续使用 Apache，但同样愿意切换到 nginx 等。

我想在其中工作的几个限制条件：能够运行 Ruby 1.9.3（但也可以灵活地运行 jruby 应用程序）以及 Rails 3.x 和 Rails 2.x 应用程序（更喜欢使用 .rvmrc 文件每个项目）。

**什么对你有用，你能指点我一个教程风格的帮助吗？**

# bash - 将文本添加到制表符分隔文件中的特定列？

> ID：11195153
> 
> 赞同：3
> 
> 时间：2012-06-25T18:31:04.487
> 
> 标签：bash, sed, awk

我有一个这样的文件（制表符分隔），但很多行

```
1314    0   0   0   0   0   3   1321    -   k63_1878003 1314    0   1314    6   171115067   64288422    64291057    4   12,131,75,1096, 0,12,143,218,   64288422,64288802,64289161,64289961, 
```

我需要在`string`每行的第 14 列前添加一个，但保持其他所有内容相同。我可以在 awk 中这样做还是在 sed 中会更好？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T19:06:00.570

使用`awk`. `OFS`在输出中的字段之间打印一个选项卡：

```
awk 'BEGIN { OFS = "\t" } { $14 = "string" $14; print }' infile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:57:11.770

```
$ cat file.txt | sed 's/\(\([^\t]\+\t\)\{13\}\)/\1string/g' 
```

换句话说：用`(([^ ] +){13})`相同的文本替换（十三个非制表符块，后跟制表符），加上你的`string`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:11:46.757

这可能对您有用（GNU sed）：

```
sed 's/[^\t]*/string&/14' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T19:03:57.307

您可以使用串联附加到 AWK 中的字段。例如：

```
$ echo "foo bar baz" | awk -vOFS=$'\t' '$2 = "quux" $2'
foo quuxbar baz 
```

在您的情况下，您显然会改用字段 $13 。通过在模式部分而不是操作中进行更改，您只需替换字段的值并使用该行的默认打印操作。

# css - CSS角半径显示背景颜色？

> ID：11195155
> 
> 赞同：2
> 
> 时间：2012-06-25T18:31:06.310
> 
> 标签：css

CSS 边框半径工作正常，但现在显示为白色背景。（我更喜欢透明或灰色，类似于身体背景......）

![有问题的圆角...](../Images/b88ef3e7a339336123027e998aaf7d6f.png)

CSS：

```
.window_header{
    width:600px;
    height:42px;
    background: #333 url("../img/bg-2.png") repeat;
    -webkit-border-top-left-radius: 8px;
    -webkit-border-top-right-radius: 8px;
    border-bottom:1px dotted #666;
    box-shadow: 0 2px 2px rgba(0, 0, 0, 0.3),inset 0 -4px 5px rgba(0, 0, 0, 0.2),inset 1px 0px 1px rgba(0, 0, 0, 0.7),inset -1px 0px 1px rgba(0, 0, 0, 0.7),inset 0 -2px 1px rgba(0, 0, 0, 0.5),inset 0 2px 6px rgba(255, 255, 255, 0.15),inset -2px 0 6px rgba(255, 255, 255, 0.15),inset 2px 0 6px rgba(255, 255, 255, 0.15);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:34:01.607

白色应该来自您应用边框半径的容器“后面”的容器背景。也许也可以尝试对其应用边界半径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:58:58.910

我建议将边框半径应用于底层元素，这样元素就不会有粗糙的白色边缘，而是圆角。所以你不会看到白边。

-或者-

将整个元素编辑放在包含元素之前，使其位于白色背景的顶部并从那里开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:34:44.210

也许 bg-2 文件在该区域不透明？根据您用于创建图像的编辑器，它可能无法使其透明。

Max Gherkins 的解释也是一个非常大的可能性。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T20:12:02.097

背景：#333 url("../img/bg-2.png") 重复；

您的背景图像不透明。如果是“扁平化 PNG”，请确保背景是“透明”而不是“白色”。

# javascript - 使用 JavaScript 更改 CSS 值

> ID：11195159
> 
> 赞同：0
> 
> 时间：2012-06-25T18:31:39.897
> 
> 标签：javascript, jquery, css

我还没有找到一个很好的例子，我有这个 CSS 片段。

```
#divname .jqplot-point-label {
     color: #000000;
} 
```

如果只是 ID 或类，我知道如何更改 CSS，但在这种情况下，我不确定 JavaScript 会是什么样子。

我正在努力

```
$('#divname .jqplot-point-label').css({'color':'#000000'}); 
```

但这没有用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:40:50.197

确保将您的代码包装在就绪处理程序中（您的代码很好，但缺少使用就绪处理程序会导致您的代码无法工作）：

```
$(function(){
  $('#divname .jqplot-point-label').css({'color':'#000000'});
}); 
```

我假设您在页面中包含正确路径的 jQuery。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T18:37:46.923

使用 $('#divname.jqplot-point-label') 作为选择器。（id 和类名之间没有空格）。

$(#divname .jqplot) 正在寻找具有 #divname 祖先的类 .jqplot 的元素。

# signals - Linux 应用程序如何被大于 63 (WTERMSIG() > 63) 的信号数终止？

> ID：11195160
> 
> 赞同：0
> 
> 时间：2012-06-25T18:31:42.287
> 
> 标签：signals, embedded-linux, popen, pclose

WTERMSIG() 如何计算出大于 63 的值，例如 67 或 123？

事情是这样发生的。我正在使用 popen() 运行 unbuffer ，而 unbuffer 又运行一个 shell 脚本。下一个代码块是一个 while() 循环，它从 popen() 返回的文件描述符中读取，直到它收到 NULL。紧随其后的是 pclose()。

在极少数情况下，pclose() 将返回一个值！= -1 并将 WIFSIGNALED() 设置为 true。奇怪的是，WTERMSIG() 然后计算出大于 63 的值，例如 67 或 123。这可能是什么原因？

shell 脚本正在完成它的所有任务，所以它不会在中途被打断。我可以理解 1-31（标准信号）或 32-63（扩展实时信号）。尝试在我们的平台 (Timesys Linux) 上生成信号 67 或 123 会导致错误。

以下是一些相关代码：

```
FILE* fp = popen(command.c_str(), "r");
if (fp == NULL) {
    // Handle error
}

while (fgets(line, sizeof(line), fp) != NULL) {
    // Do stuff with output of child process
}

pclose_status = pclose(fp);
pclose_errno = errno;

if (pclose_status != -1 && WIFEXITED(pclose_status)) {
    // Happy ending, occurs 99% of the time
    return (WEXITSTATUS(pclose_status)));
}

// Check if pclose returned an error. If so, log the result.
if (pclose_status == -1) {
    // Log an error and pclose_errno
}
else {
    if (WIFSIGNALED(pclose_status)) {
        // This happens maybe 1% of the time, but the value 
        // printed is > 63.
        Syslog::error("Child process terminated by signal %d", 
                       WTERMSIG(pclose_status));
    }
    if (WIFSTOPPED(pclose_status)) {
        // Hasn't happened.
        Syslog::error("Child process stopped by delivery of signal %d",
                       WSTOPSIG(pclose_status));
    }
    if (WIFCONTINUED(pclose_status)) {
        // Hasn't happened.
        Syslog::error("Child process resumed by delivery of SIGCONT");
    }
} 
```

# c++ - 联合攻击战斗机（JSF）C++编码标准强制规则排名

> ID：11195163
> 
> 赞同：3
> 
> 时间：2012-06-25T18:31:54.103
> 
> 标签：c++, standards

有没有[JSF 编码标准](http://www2.research.att.com/%7Ebs/JSF-AV-rules.pdf)的排名？

也就是说，联合攻击战斗机 (JSF) C++ 编码标准中有 221 个标准。有些是“should”、“will”和“shall”规则，其中“shall”规则是强制性的。

在强制性规则中，有些似乎比其他的更重要。

那么，对于一个安全关键的嵌入式环境，哪些强制要求最关键，哪些要求不那么关键？

具体来说，我正在寻找 JSF C++ 强制性规则的排名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:13:35.380

这些并不是真正的安全关键规则——除此之外，这是一整套复杂性。

对于大公司的任何大型项目，它们都是合理的“保守”标准，当然值得一读，但你可以在所有这些标准中找到不同意的地方。

而且它们不是灵丹妙药——将预处理器的使用限制为`#ifdef/#define`不会阻止“脚子弹接口情况”。

# spring-webflow - 集合/列表属性不会在表单提交时绑定或更新

> ID：11195167
> 
> 赞同：3
> 
> 时间：2012-06-25T18:32:05.070
> 
> 标签：spring-webflow

所以我设置了一个带有spring web flow的向导界面，逐渐填充单个表单对象/模型。它适用于必须填充单个字符串或原始属性和字符串数组（来自复选框界面）的前几个步骤。

然后我有一个`List<String>`财产。它正确地呈现为具有正确初始化值的多个文本框。但是当我在浏览器上编辑文本框并提交时，这些值不会在表单 bean 上生效。它仍然具有初始值。

下面是详细的设置：

创建 bean 的 Web 流启动：

```
<on-start>
    <evaluate expression="new mypackage.MyFormBean()" result="flowScope.myFormBean" />
</on-start> 
```

以下是我的表单 bean 的相关部分：

```
public class MyFormBean implements Serializable {
    ...
    private List<SlotBean> slots;
    ...
    public List<SlotBean> getSlots() {
        return slots;
    }
    public void setSlots(List<SlotBean> slots) {
        this.slots= slots;
    }
    ...
}

public class SlotBean {
    ...
    private int quantity;
    ...
    public int getQuantity() {
        return quantity;
    }
    public void setQuantity(int quantity) {
        this.quantity= quantity;
    }
    ...
} 
```

我的 Web 流程中有一系列视图状态，其中设置了简单的字符串或数字字段绑定，这些绑定设置已初始化、显示和保存，不会对表单产生任何问题。

此视图状态生成任意数量的 SlotBean 对象，然后将数量初始化为 2。这些设置为 slot 属性。

```
<view-state id="generate-criteria" model="disciplineCatalogue">
    ...
    <transition on="next" to="slots-grid">
        <evaluate expression="myService.generateSlots(myFormBean)"/>
    </transition>
    ...
</view-state> 
```

这是jsp片段。它所做的只是渲染一堆文本框。还有一个下一步按钮：

```
<form:form id="slotsGrid" modelAttribute="myFormBean" action="${flowExecutionUrl}">
    ...
    <c:forEach var="slot" items="${myFormBean.slots}" varStatus="idx">
        <form:input path="slots[${idx.index}].quantity" />
    </c:forEach>
    ...
    <button type="submit" id="next" name="_eventId_next">Next</button>
    ...
</form:form> 
```

上面的代码使用初始值 (2) 正确显示。它生成多个文本框，如下所示：

```
<input id="slots0.quantity" name="slots[0].quantity" type="text" value="2"/> 
```

因此，当此页面在浏览器上时，我将数量文本框的值更改为不同的值，然后单击“下一步”按钮。在浏览器的网络调试器上，我看到表单值已发送到服务器：

```
slots[0].quantity:3
slots[1].quantity:1
slots[2].quantity:2 
```

这是下一个按钮的相关 Web 流程条目。

```
<view-state id="slots-grid" model="myFormBean">
    <binder>
        ...
        <binding property="slots" />
    </binder>
    ...
    <transition on="next" to="finished">
        <evaluate expression="myService.create(myFormBean)"/>
    </transition>
    ...
</view-state> 
```

所以我在方法上放了一个断点`myService.create(myFormBean)`，它显示所有数量字段仍然设置为原来的“2”。新值未绑定到`myFormBean.slots`.

你能在我的设置中看到什么看起来不对的地方吗？

感谢您随时可以投入其中

Spring 框架 3.1.1

Spring-Webflow 2.3.1

雄猫 6.0.18

日蚀靛蓝

交叉张贴在： http: [//forum.springsource.org/showthread.php?127809 -Collection-List-property-won-t-bind-or-update-on-form-submit](http://forum.springsource.org/showthread.php?127809-Collection-List-property-won-t-bind-or-update-on-form-submit)

# perl - 尝试解析存储在 perl 中的数组中的 xml 时出错

> ID：11195169
> 
> 赞同：0
> 
> 时间：2012-06-25T18:32:16.770
> 
> 标签：perl

我有一个以下程序，但由于某种原因它抛出错误并且不解析 xml 文件。

```
 my @findxmls;
 foreach my $searchxml(keys %xmlhash) {
 @findxmls= `find -name $findxml -maxdepth 4`;
 print Dumper (@findxmls); 
```

到目前为止工作正常。它打印出所有带有路径的xml文件。

```
 example of output
  y:\dir\subdir\procedure.xml
  y:\dir\otherdir\java.xml 
```

但如果我尝试解析它，它就不起作用

```
 foreach my $output (@findxmls) {                          
  my $parsexml = new XML::Simple;
      my $xmldata = $parser->XMLin($output );
  print Dumper ($xmldata);  
  } 
```

错误

```
File does not exist: y:/dir/subdir/procedure.xml at sample.pl line 20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:36:28.173

反引号在输出中包含换行符 ( `\n`)，因此`@findxmls`数组的内容上都有换行符。将您的脚本更改为

```
chomp( @findxmls= `find -name $findxml -maxdepth 4` ); 
```

或者

```
foreach my $output (@findxmls) {   
    chomp( $output );
    ...
} 
```

# java - Apache httpclient 包显示缺少许多其他包

> ID：11195170
> 
> 赞同：0
> 
> 时间：2012-06-25T18:32:20.943
> 
> 标签：java, apache

我下载了 apache HttpClient 包。我导入了全部内容。它显示所有子包中的错误。有些有这种类型的进口`import org.apache.http.HttpHost;`。现在包里没有HttpHost了。但是我可以成功导入这个

```
import org.apache.http.auth.*;
import org.apache.http.client.*; 
```

然后我尝试像这样使用 HttpClient 类：

```
HttpClient hc = new HttpClient(); 
```

它给出了 HttpClient 类抽象的错误。这里有什么问题？实际可下载包中不存在的所有其他导入是什么！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:42:53.860

解决方案是：

1.  [从http://hc.apache.org/downloads.cgi](http://hc.apache.org/downloads.cgi)下载 httpcomponents-client-4.2-bin ；
2.  在某处充气；
3.  右键单击您的项目（您的项目@NetBeans）并选择属性
4.  在树上选择名为库的项目；
5.  单击选项卡上的添加 JAR/文件夹按钮（编译）；
6.  选择**httpcomponents-client-4.2/lib**中包含的所有 JAR 文件（膨胀文件）。
7.  点击确定。

而已！您应该可以使用`HTTPClient`.

# scala - Scala：编译时间常数

> ID：11195171
> 
> 赞同：6
> 
> 时间：2012-06-25T18:32:23.907
> 
> 标签：scala, constants, compile-time-constant

如何在 Scala 中声明编译时常量？在 C# 中，如果您声明

```
const int myConst = 5 * 5; 
```

myConst 作为文字 25 内联。是：

```
final val myConst = 5 * 5 
```

等效还是有其他一些机制/语法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T21:21:07.743

是的，`final val`是正确的语法，有[丹尼尔的警告](https://stackoverflow.com/questions/11195171/scala-compile-time-constants#comment14694987_11195195)。然而，在适当的 Scala 风格中，你的常量应该是驼峰式，首字母大写。

如果您希望在模式匹配中使用常量，则以大写字母开头很重要。第一个字母是 Scala 编译器如何区分常量模式和变量模式。[请参阅Scala 编程的](http://www.artima.com/shop/programming_in_scala)第 15.2 节。

如果一个`val`或单例对象不以大写字母开头，要将其用作匹配模式，您必须将其括在反引号（````）中

```
x match {
  case Something => // tries to match against a value named Something
  case `other` =>   // tries to match against a value named other
  case other =>     // binds match value to a variable named other
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T18:33:52.323

`final val`是这样做的方法。然后，如果可以，编译器会将其设为编译时常量。

阅读下面丹尼尔的评论，详细了解“如果可以”是什么意思。

# javascript - onsubmit 不是在chrome中调用js函数而是直接提交表单

> ID：11195173
> 
> 赞同：1
> 
> 时间：2012-06-25T18:32:31.927
> 
> 标签：javascript, windows, google-chrome

我的表单在 Firefox 和 IE 中运行良好。调用 onsubmit 时调用 js 函数并验证代码，如果验证良好，则提交表单。

但是，在 chrome 中它不进行验证，而只是直接提交表单。

我不知道为什么会这样，做了很多搜索但徒劳无功。

任何帮助都将有助于解决这个问题。

表格代码：

```
<form name="myform" action="queryfeedback.php" method="post" onSubmit="return validateForm(myform);">
<label for="labelField_Name" id="idLabel_Name"></label>
<input type="text" name="nameField_Name" id="idField_Name" placeholder="Enter your name here"/>
<br />
<label for="labelField_EMail" id="idLabel_EMail"></label>
<input name="nameField_EMail" type="text" id="idField_EMail" placeholder="Enter your E-Mail address here" />
<br />
<label for="labelField_Message" id="idLabel_Message"></label>
<textarea name="nameField_Message" id="idField_Message" placeholder="Enter your message for us here"></textarea>
<br />
<input type="Submit" name="nameSubmit" id="idButton_Submit" value="Submit"  alt="Submit Button"/>
</form> 
```

验证码：

```
 function validateForm(form)
{ 
alert(form.nameField_Name.value);
//alert(formValueEMail.value);
//alert(formValueMessage.value);
if(form.nameField_Name.value=='')
{
    alert("Name field is required. Please fill it in.");
    form.nameField_Name.focus();
    form.nameField_Name.select();
    return false;
}
if(form.nameField_Name.value=='Enter your name here')
{
    alert("Name field is required. Please fill it in.");
    form.nameField_Name.focus();
    form.nameField_Name.select();
    return false;
}
if(form.nameField_EMail.value=='')
{
    alert("E-Mail Address field is required. Please fill it in.");
    form.nameField_EMail.focus();
    form.nameField_EMail.select();
    return false;
}
if(form.nameField_EMail.value=='Enter your E-Mail address here')
{
    alert("E-Mail Address field is required. Please fill it in.");
    form.nameField_EMail.focus();
    form.nameField_EMail.select();
    return false;
}
//Checking for correct format of EMail address.
var x=document.forms["myform"]["nameField_EMail"].value;
var atpos=x.indexOf("@");
var dotpos=x.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
{
    alert("Not a valid e-mail address");
    return false;
}
if(form.nameField_Message.value=='')
{
    alert("Message field is required. Please fill it in.");
    form.nameField_Message.focus();
    form.nameField_Message.select();
    return false;
}
if(form.nameField_Message.value=='Enter your message for us here')
{
    alert("Message field is required. Please fill it in.");
    form.nameField_Message.focus();
    form.nameField_Message.select();
    return false;
}
return true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:36:35.373

尝试传入事件参数并运行`event.preventDefault()`，以便在验证之前停止提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:40:14.943

1.  你没有用 'validateForm' 关闭你的函数`}`。因此它可能会引发错误。
2.  使用`onsubmit="return validateForm(this);"`注意，属性名称`onsubmit`没有驼峰式大小写，参数是`this`
3.  `validateForm`应该是一个全局函数。

工作示例：http: [//jsfiddle.net/qrZ8a/3/](http://jsfiddle.net/qrZ8a/3/)

# android - 单圈时间排行榜

> ID：11195175
> 
> 赞同：0
> 
> 时间：2012-06-25T18:32:41.537
> 
> 标签：android, sharedpreferences

我对编码非常陌生，并且到处搜索，但无法弄清楚这一点。

我正在尝试为视频游戏指南中的各种曲目创建单圈时间排行榜。用户需要能够单击轨道名称，然后在新布局中“创建”一个新时间......这需要允许他输入汽车和它在这条轨道上所做的时间，然后它需要要么自行排序，要么手动排序，以便时间从最快到最慢的顺序排列。虽然我可以轻松构建布局，但我被难住了。

1.  我怎样才能做到这一点，以便当用户单击“创建新时间”时，代码为他提供时间和汽车模型的空间。

2.  我如何确保它使用 SharedPreferences 保存正确的信息，因为每次都需要以不同的方式保存（我认为这与名称有关，然后是 ++，但我可能是错的）

3.  我怎样才能让它自己排序或为用户排序。

4.  有人可以给我看一些这样做的示例代码吗？我对 SQL 知之甚少，如果可以避免的话，我宁愿不使用它。

对不起，这是一组菜鸟问题，但是在尝试了关于 AD 的记事本教程以及大量视频和书籍教程之后，我还没有找到实现这一目标所需的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:08:45.550

您始终可以使用 Dialog 类来创建弹出对话框，以允许用户输入您要查找的信息。抱歉，您不希望使用 SQL
Shared Preferences 并不是一个好主意，因为您将不得不做更多的工作来编写您想要的效果。具有简单关系（表）的数据库将满足您的需求，而不是共享首选项，您必须创造性地拥有相同的数据结构。例如 BasicNameValuePairs 的 ArrayList，这可能会让人头疼。数据库是要走的路，如果设置正确，您可以做您需要的一切。

在 Java 中排序非常容易，因为您始终可以使用 Collections 类并实现 Comparable 接口来比较您的单圈时间并按总时间排序。对于诸如您想要查看 Android XML 中的 TableLayout 的显示。不用太担心，Eclipse IDE 将让您轻松地创建和填充它。这将涉及将您的单圈时间从数据库加载到列表中并按时间排序。一旦您了解了 Comparable 接口和集合（如果需要），这有点棘手但很容易。如果您需要更多见解发表评论，只是想分享一些关于我将如何处理它的想法。

# iphone - iPhone - 主应用程序 UIView 问题的左上角和右上角圆角

> ID：11195176
> 
> 赞同：1
> 
> 时间：2012-06-25T18:32:42.050
> 
> 标签：iphone, uiview, rounded-corners

我正在使用以下代码来实现我的主 UIView 的右上角和左上角：

```
UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.view.bounds byRoundingCorners:UIRectCornerTopLeft | UIRectCornerTopRight cornerRadii:CGSizeMake(10.0, 10.0)];

CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
maskLayer.frame = self.view.bounds;
maskLayer.path = maskPath.CGPath;
[maskLayer setMasksToBounds:YES];
self.view.layer.mask = maskLayer; 
```

但在那之后，UIView 中包含的所有子视图（如 UIButtons）都停止工作。我认为这可能是没有道理的，但经过大量的谷歌搜索工作后我无法获得解决方案。

提前致谢。

干杯。

# c# - 表格中的 CSS 访问列

> ID：11195177
> 
> 赞同：0
> 
> 时间：2012-06-25T18:32:42.650
> 
> 标签：c#, html, css, gridview, webforms

当我将gridview 绑定到数据源时，我有动态创建的html。我很好奇的是如何使用 css 访问单个列甚至单个单元格？如果我手动创建 html，我会在其中放置一个 id 属性，但我可以这样做，因为它是在程序开始时动态创建的。这是生成的html输出

```
<div>
    <table cellspacing="0" rules="all" border="1" id="ContentPlaceHolderHome_GridView1" style="border-collapse:collapse;">
        <tr>
            <th scope="col">Date</th><th scope="col">Project</th><th scope="col">Amount</th>
        </tr><tr>
            <td>1/1/2011 12:00:00 AM</td><td>CTS</td><td>1000.99</td>
        </tr><tr>
            <td>2/1/2011 12:00:00 AM</td><td>ABC Company</td><td>1001.99</td>
        </tr><tr>
            <td>1/3/2011 12:00:00 AM</td><td>CTS</td><td>1002.99</td>
        </tr><tr>
            <td>4/1/2011 12:00:00 AM</td><td>CTS</td><td>1003.99</td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:37:33.600

我的猜测是，您需要修改制作表格的任何内容，以便为这些单元格添加某种类或 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:42:20.897

该表有一个 id，因此您可以使用它来访问该表中的元素。例如，要选择第三行的第二个单元格，您可以使用：

```
#ContentPlaceHolderHome_GridView1 tr:nth-child(3) td:nth-child(2) 
```

*   除 IE8 及更早版本外，所有主要浏览器都支持 nth-child() 选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:37:34.787

您可以使用[CssClass](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)属性为控件定义 css 类名称。

# ipad - 是否可以从 iPad 上运行的移动网络应用程序启动 QR 码扫描？

> ID：11195178
> 
> 赞同：9
> 
> 时间：2012-06-25T18:32:44.750
> 
> 标签：ipad, qr-code

客户想要移动 Web 应用程序上的一个按钮，该按钮启动 QR 码扫描（在 iPad 上使用摄像头），然后返回带有 QR 码信息的移动 Web 应用程序。想知道如何最好地实现这一目标和/或是否有可能。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:38:55.457

实在不行，抱歉。

您可以获得的最接近的是某些应用程序具有`redlaser://`您可以提供链接的 URL 方案（例如）。但是，无法检测到他们已经安装了该应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:57:59.507

是的，请参阅[此处](https://github.com/zxing/zxing/wiki/Scanning-From-Web-Pages)`zxing:`的URL 格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T21:13:24.163

最好的办法是使用蓝牙条码扫描仪。像 Socket scan ， CX2864-1336 这样的东西可以很好地解决这个问题。我已经看到它与 ipad 一起使用来管理库存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:38:50.140

似乎这需要两个单独的本机应用程序。两者都使用 URL 方案跳转到另一个并传递信息。如果您有一个 Web 应用程序并检查 QR 码扫描仪的 URL 方案，那么您的 Web 应用程序完全有可能启动 QR 码扫描，但传回数据需要一个本机应用程序。哦，我不确定是否有任何带有方案的二维码应用程序。

# mysql - phpmyadmin 和我的 mac 的速度

> ID：11195181
> 
> 赞同：0
> 
> 时间：2012-06-25T18:32:55.220
> 
> 标签：mysql, macos, phpmyadmin

整个 phpMyAdmin 真的很新。

我想知道，当我启用我的计算机进行网络共享，然后安装 phpMyAdmin 时，这是否对我的计算机有害（主要是速度）？如果是这样，我会选择只使用另一台（旧）计算机。但这会很麻烦。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:38:18.153

由于您将在后台运行网络服务器和 mysql，因此存在潜在的安全问题，具体取决于您的设置，并且对速度有轻微影响，但在性能方面并没有什么大不了的。

话虽如此，没有必要在本地使用 phpmyadmin。它有点毫无意义，因为您可以使用真正的 mysql 客户端，如[Sequel Pro](http://www.sequelpro.com/)、[Navicat](http://www.navicat.com/)或[MySQL Workbench](http://www.mysql.com/products/workbench/)。我自己更喜欢 Sequel Pro，因为它免费且非常轻巧。

# winapi - 函数调用的模式

> ID：11195182
> 
> 赞同：0
> 
> 时间：2012-06-25T18:32:58.610
> 
> 标签：winapi, assembly

在 win32 应用程序中，函数调用的汇编代码模式是什么？

例如我有这个类的成员函数：

```
void Foo::bar(MyClass* p, int i, int j, CArray<CArray<int,int>,int> &a){
 // Function body
} 
```

# java - Java 在 POST 请求中发送带有转义双引号的 JSON 字符串

> ID：11195184
> 
> 赞同：3
> 
> 时间：2012-06-25T18:33:09.713
> 
> 标签：java, android, json, http-post

> **可能重复：**
> [如何阻止 HTTP 转义引号？](https://stackoverflow.com/questions/6715650/how-can-i-stop-http-from-escaping-quotes)

我正在创建一个 JSONObject 并将 JSON 字符串发送到 POST 请求正文中的服务器。

```
public String toJson() {
    JSONObject filter = new JSONObject();
    try {
        filter.put("gender", gender.getCode());
        filter.put("feature_id", productCategory);
    } catch (JSONException e) {
        e.printStackTrace();
    }

    JSONObject filterObject = new JSONObject();
    try {
        filterObject.put("filter", filter);
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return filterObject.toString();
} 
```

所以我正在创建一个请求：

```
private IJsonExecutorInterface requestExecutorForRelativePathAndParams(String path, WebParams params) throws UnsupportedEncodingException {
    HttpPost postRequest = new HttpPost(rootUrl + path);

    if(params != null) {
        postRequest.setHeader("content-type", params.getContentType());
        postRequest.setEntity(params.getFormEntity());
    }

    // Blah blah

    return executor;
}

public IJsonExecutorInterface getProducts(ProductFilter filter, int offset, int limit) throws UnsupportedEncodingException {
    WebParams webParams = new WebParams();
    webParams.addPair("filter", filter.toJson());
    webParams.addPair("offset", String.format("%d", offset));
    webParams.addPair("limit", String.format("%d", limit));
    return requestExecutorForRelativePathAndParams("products", webParams);
}

// WebParams class

public class WebParams {
    private ArrayList<NameValuePair> params;
    private String contentType = "application/x-www-form-urlencoded";

    public WebParams() {
        params = new ArrayList<NameValuePair>();
    }

    public void addPair(String name, String value) {
        params.add(new BasicNameValuePair(name, value));
    }

    public String getContentType() {
        return contentType;
    }

    public HttpEntity getFormEntity() throws UnsupportedEncodingException {
        return new UrlEncodedFormEntity(params);
    }
} 
```

我在调试器中看到它：没关系。

但是在我的服务器上，我得到了这样的东西：

```
Array
(
    [filter] => {\"gender\":\"w\",\"feature_id\":\"41_7459\"}
    [offset] => 0
    [limit] => 18
) 
```

引号已转义。

我不想替换服务器上的东西。`replace("\\\"", "\"")`在 Java 中不会影响字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:11:33.257

看起来您使用的是 UrlEncodedFormEntity，根据文档，它是“由 url 编码对列表组成的实体”（[http://developer.android.com/reference/org/apache/http/client/entity /UrlEncodedFormEntity.html])。我从来没有使用过这个，但它听起来不像你想要的，因为你是在帖子正文中发送数据，而不是通过 URL 参数。

我之前使用过这个`StringEntity`类来通过 post 发送 json 数据，虽然它只编码一个字符串，而不是名称/值对，所以你必须做更多的工作来把字符串放在你想要处理的格式在您的服务器上：

```
public class WebParams {
    private ArrayList<NameValuePair> params;
    private String contentType = "application/x-www-form-urlencoded";

    public WebParams() {
        params = new ArrayList<NameValuePair>();
    }

    public void addPair(String name, String value) {
        params.add(new BasicNameValuePair(name, value));
    }

    public String getContentType() {
        return contentType;
    }

    public HttpEntity getFormEntity() throws UnsupportedEncodingException {
        //TODO: Build a string in what ever format you want. 
        //      This will include the gender & feature_id fields as well as the json
        StringBuilder b = new StringBuilder();
        for(NameValuePair nvp : params) {
           builder.append(nvp.getName()).append('=').append(nvp.getValue()).append(',');
        }

        //Now that we have a string to send to the server, get your entity!
        StringEntity entity = new StringEntity(b.toString());
        entity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        return entity;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:38:33.707

使用单引号代替双引号有问题吗？因为我认为它会解决你的问题。

# java - Netty 大 POJO 传输错误：TooLongFrameException

> ID：11195186
> 
> 赞同：1
> 
> 时间：2012-06-25T18:33:20.007
> 
> 标签：java, nio, netty

我有一个网络管道，例如：

```
 return Channels.pipeline(
                    new ObjectEncoder(),
                    new ObjectDecoder(),
                    new MyCustomCommandServerHandler()); 
```

对于客户端和服务器，其中：

```
MyCustomCommandServerHandler extends SimpleChannelUpstreamHandler 
```

我得到的错误是我试图从服务器发送回客户端的 POJO 太大并导致以下错误：

**org.jboss.netty.handler.codec.frame.TooLongFrameException: 调整后的帧长度超过 1048576: 1816357 - 丢弃**

如何调整 ObjectEncoder/Decoder 以获取更大尺寸的 POJO 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:49:51.380

您可以通过构造函数传递它。只需检查 javadocs。

< <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# javascript - document.title 不是文档

ok, this is weird, and I like to have an idea if this is possible

e.g.

the page

`<title>12345</title><`

> `ID：11195188
> 
> 赞同：1
> 
> 时间：2012-06-25T18:33:23.563
> 
> 标签：javascript`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:35:57.110

尝试记录`document.title`如果不是的话`'12345'`。

最有可能的情况是，如果使用分块编码（HTTP/1.1 中的一个常见功能）传输文件，那么`<title>`标签可能会被分成两半，这会导致显示不正确的标题。

这可以通过添加来解决：

```
window.onload = function() {document.title = document.getElementsByTagName('title')[0].firstChild.nodeValue;}; 
````

# javascript - Shift + Enter 不插入新行

> ID：11195192
> 
> 赞同：0
> 
> 时间：2012-06-25T18:33:38.313
> 
> 标签：javascript, jquery

我想在用户按下`shift`+时发送 textarea 的数据`enter`，但不插入新行。

这不起作用：

```
 $( 'form textarea' ).keydown(function (event) {
        if (event.keyCode == 13 && event.shiftKey) {
            send_data();
            event.preventDefault();
            return false;
        }
     }); 
```

我正在使用谷歌浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:37:09.710

尝试以下操作：

```
$( 'form textarea' ).keydown(function (event) {
    if (event.keyCode == 13 && event.shiftKey) {
        event.preventDefault();
        send_data();

        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:58:15.640

在调试时，我的 send_data 函数是：

```
function send_data() {
    alert('working...');
} 
```

但是在我看到 Esailija 的评论后，我意识到我的代码是正确的，而“警报”是我问题的原因。愚蠢的问题，对不起。

# python - Django 'settings' 对象没有属性

> ID：11195201
> 
> 赞同：0
> 
> 时间：2012-06-25T18:34:26.870
> 
> 标签：python, django

这是我的第一个 python 项目。我在设置其他人编写的项目时遇到问题。我得到以下`'Settings' object has no attribute 'FOXYCART_URL'`堆栈跟踪：

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.flatpages',
 'sorl.thumbnail',
 'chunks',
 'staging',
 'south')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware')

Exception Type: AttributeError at /
Exception Value: 'Settings' object has no attribute 'FOXYCART_URL' 
```

我想知道我需要在哪里设置`FOXYCART_URL`属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:40:31.333

显然您正在使用一个名为 django-foxycart 的应用程序，但尚未完全设置它，但您的项目中的某些内容正在导入并想要使用它。

这里有一个应用程序的自述文件：[https ://github.com/electricjay/django-foxycart](https://github.com/electricjay/django-foxycart)

您需要将其列在您`INSTALLED_APPS`的 settings.py 中：

```
INSTALLED_APPS = (
    ...
    'foxycart',
    ...
) 
```

你需要定义你的 foxycart 的 URL `FOXYCART_URL`：

```
FOXYCART_URL = "http://foo" 
```

虽然在自述文件中看起来该值已更改为：FOXYCART_API_URL，但也许您使用的是旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:39:30.473

您需要`settings.py`在项目目录树顶部的文件（1.4 之前）或与项目同名的应用程序（1.4+）中的文件中初始化 FOXYCART_URL 属性。

# magento - 如何在 Magento 1.6.2 中添加新的州/省和城市下拉菜单？

> ID：11195216
> 
> 赞同：3
> 
> 时间：2012-06-25T18:35:14.463
> 
> 标签：magento, add, state, city

如何在 Magento 1.6.2 中添加新的州/省和城市下拉菜单？当我们选择美国作为国家时，我们会找到州/省的下拉列表。但这并非适用于所有国家/地区。

我想要的是-如果我选择一个国家（例如爱尔兰），它将在该国家/地区的下拉列表中显示所有州/省，如果我选择一个州/省，它将在该州/下的下拉列表中显示所有城市省。我们怎么能做到这些。

我找到了一个在线添加州/省部分的链接。但城市没有线索。这里的链接[http://www.manojyadav.co.in/magento/adding-stateprovince-india-sql-magento/](http://www.manojyadav.co.in/magento/adding-stateprovince-india-sql-magento/)

如果我能从你那里得到一个文件，我可以用我自己的替换州城市，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T06:38:13.600

如果您想将城市配置为下拉选项，请按照以下步骤操作：
**步骤**
假设`MagePsycho_Citydropdown`骨架模块已经创建。
**1.新增人口城市功能。**
文件：`app/code/local/MagePsycho/Citydropdown/Helper/Data.php`
代码：

```
<?php
/**
 * @category   MagePsycho
 * @package    MagePsycho_Citydropdown
 * @author     magepsycho@gmail.com
 * @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */
class MagePsycho_Citydropdown_Helper_Data extends Mage_Core_Helper_Abstract
{
    public function getUaeCities()
    {
        $helper = Mage::helper('directory');
        $cities = array(
            $helper->__('Abu Dhabi'),
            $helper->__('Ajman'),
            $helper->__('Al Ain'),
            $helper->__('Dubai'),
            $helper->__('Fujairah'),
            $helper->__('Ras al Khaimah'),
            $helper->__('Sharjah'),
            $helper->__('Umm al Quwain'),
        );
        return $cities;
    }

    public function getUaeCitiesAsDropdown($selectedCity = '')
    {
        $cities = $this->getUaeCities();
        $options = '';
        foreach($cities as $city){
            $isSelected = $selectedCity == $city ? ' selected="selected"' : null;
            $options .= '<option value="' . $city . '"' . $isSelected . '>' . $city . '</option>';
        }
        return $options;
    }
} 
```

**注意**：您还可以在 db 表中填充城市以使其更具动态性。例如，您可以创建类似于区域的以下表格：
+ directory_country_city (city_id, country_id, code, default_name)
+ directory_country_city_name (locale, city_id, name)

**2.使用javascript将输入文本城市字段替换为下拉列表**
2.1
文件：`app/design/frontend/[package]/[theme]/template/checkout/onepage/billing.phtml`
代码：将以下代码添加到上述模板的最后

```
<script type="text/javascript">
    <?php
    $helper          = Mage::helper('citydropdown');
    $address         = Mage::getSingleton('checkout/session')->getQuote()->getBillingAddress();
    $defaultCity     = $address->getCity();
    $citiesOptions   = addslashes($helper->getUaeCitiesAsDropdown($defaultCity));
    ?>

    var billingCity = '<?php echo $defaultCity ; ?>';
    function billingSwitchCityField(){
        var selectVal = jQuery('#billing\\:country_id option:selected').val();
        if(selectVal == "AE"){
            jQuery("#billing\\:city")
            .replaceWith('<select id="billing:city" name="billing[city]" class="required-entry">' +
                  '<option value=""></option>' +
                  '<?php echo $citiesOptions; ?>' +
                '</select>');
        }else{
            jQuery("#billing\\:city")
            .replaceWith('<input type="text" class=" input-text required-entry absolute-advice " title="City" value="' + billingCity + '" id="billing:city" name="billing[city]" autocomplete="off">');
        }

    }
   jQuery(document).ready(function(){
        billingSwitchCityField();
        jQuery('#billing\\:country_id').change(function() {
            billingSwitchCityField();
        });
   })
</script> 
```

2.2
文件：`app/design/frontend/[package]/[theme]/template/checkout/onepage/shipping.phtml`
代码：将以下代码添加到上述模板的最后一个

```
<script type="text/javascript">
    <?php
    $helper          = Mage::helper('citydropdown');
    $address         = Mage::getSingleton('checkout/session')->getQuote()->getShippingAddress();
    $defaultCity     = $address->getCity();
    $citiesOptions   = addslashes($helper->getUaeCitiesAsDropdown($defaultCity));
    ?>

    var shippingCity = '<?php echo $defaultCity ; ?>';
    function shippingSwitchCityField(){
        var selectVal = jQuery('#shipping\\:country_id option:selected').val();
        if(selectVal == "AE"){
            jQuery("#shipping\\:city")
            .replaceWith('<select id="shipping:city" name="shipping[city]" class="required-entry">' +
                  '<option value=""></option>' +
                  '<?php echo $citiesOptions; ?>' +
                '</select>');
        }else{
            jQuery("#shipping\\:city")
            .replaceWith('<input type="text" class=" input-text required-entry absolute-advice " title="City" value="' + shippingCity + '" id="shipping:city" name="shipping[city]" autocomplete="off">');
        }

    }
   jQuery(document).ready(function(){
        shippingSwitchCityField();
        jQuery('#shipping\\:country_id').change(function() {
            shippingSwitchCityField();
        });
   })
</script> 
```

1.  重新加载结帐页面，您可以看到阿拉伯联合酋长国的城市选项

以类似的方式，您也可以为其他国家/地区配置城市选项。以类似的方式，您也可以为其他国家/地区配置城市选项，干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-01T17:46:48.667

如果您查看数据文件夹中的 Magento 模块“目录”：data/directory_setup/data-install-1.6.0.0.php 文件，您可以看到 Magento 是如何填充表格的。

例如，要添加澳大利亚州，首先，使用以下文件创建一个模块：

**应用程序/代码/本地/包/Ausregions/etc/config.xml**

`<?xml version="1.0"?><config><modules> <Package_Ausregions> <version>0.1.0</version> </Package_Ausregions> </modules>`

 ````
<global>
    <helpers>
        <ausregions>
            <class>Package_Ausregions_Helper</class>
        </ausregions>
    </helpers>      
    <resources>
        <ausregions_setup>
            <setup>
                <module>Package_Ausregions</module>
            </setup>
            <connection>
                <use>core_setup</use>
            </connection>
        </ausregions_setup>
        <ausregions_write>
            <connection>
                <use>core_write</use>
            </connection>
        </ausregions_write>
        <ausregions_read>
            <connection>
                <use>core_read</use>
            </connection>
        </ausregions_read>
    </resources>
</global> 
```` 

然后你需要编写你的 Helper 类：**Package/Ausregions/Helper/Data.php**

`class Package_Ausregions_Helper_Data extends Mage_Core_Helper_Abstract {`

`}`

最后，将您的数据安装文件添加到：**Package/Ausregions/data/ausregions_setup/data-install-0.1.0.php**中，内容如下：

`$installer = $this;`

 `$data = array( array('AU', 'ACT', 'Australian Capital Territory'),

```
array('AU', 'NSW', 'New South Wales'),

array('AU', 'NT', 'Northern Territory'),

array('AU', 'QLD', 'Queensland'),

array('AU', 'SA', 'South Australia'),

array('AU', 'TAS', 'Tasmania'),

array('AU', 'VIC', 'Victoria'),

array('AU', 'WA', 'Western Australia') 
```

);

foreach ($data as $row) {

```
$bind = array(
    'country_id'    => $row[0],
    'code'          => $row[1],
    'default_name'  => $row[2],
);

//First add data into "directory_country_region" table
$installer->getConnection()->insert($installer->getTable('directory/country_region'), $bind);

//Then get the last inserted ID for the regionID
$regionId = $installer->getConnection()->lastInsertId($installer->getTable('directory/country_region'));

$bind = array(
    'locale'    => 'en_US',
    'region_id' => $regionId,
    'name'      => $row[2]
);

//Insert data into "directory_country_region_name" table
$installer->getConnection()->insert($installer->getTable('directory/country_region_name'), $bind); 
```` 

`}`

这将添加州，当您在结帐页面上时，如果您选择国家澳大利亚，它将使用插入的州填充“州”下拉菜单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:52:50.847

看看 Aitoc Checkout Fields Manager。它可以让您在无需编写新模块的情况下添加该字段，并且可能比雇用某人编写自定义工作便宜。

# php - PDO 在 for 循环中失去连接？

> ID：11195218
> 
> 赞同：0
> 
> 时间：2012-06-25T18:35:16.170
> 
> 标签：php, mysql

我有一个问题让我发疯，希望有人能提供帮助。我最近开始学习 mysql PDO，而不是旧方法。我已经整理了一个表单，它将值抓取到一个数组中，然后在循环中处理它们。我在下面对其进行了简化，以向您展示我在做什么，但问题是我让它在本地机器上运行良好，但是当它实时加载时，我认为它在 for 循环期间以某种方式丢失了 mysql 连接。

这是表格：

```
<form method="post" action="next.php">
  <table border="1" cellspacing="2" cellpadding="3" style="font-size: 11px; font-family: arial;">
    <tr>
      <td><input type="checkbox" onClick="toggle(this)" /><br/></td>
      <td><b>Sub Service Code</b></td>
      <td><b>Criteria Value</b></td>
      <td><b>Criteria Value 2</b></td>
    </tr>
    <tr>
      <td><input type="checkbox" name="ID[]" value="2" /></td>
      <td>&nbsp;John</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><input type="checkbox" name="ID[]" value="3" /></td>
      <td>&nbsp;Paul</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><input type="checkbox" name="ID[]" value="4"checked /></td>
      <td>&nbsp;Mary</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>   
  </table>
  <input type="submit" value="Submit" name="next">
</form> 
```

我用来处理此表单的 php 脚本如下所示：

```
<?php
if (isset($_POST['next'])) {
?>
<form method="post" action="next-2.php">
<table border="1" cellspacing="2" cellpadding="3" style="font-size: 11px; font-family: arial;">
<tr>
<td><input type="checkbox" onClick="toggle(this)" /><br/></td>
<td><b>Name</b></td>
<td><b>Value</b></td>
<td><b>Value 2</b></td>
<td><b>Select # of Levels</b></td>
</tr>

<?php
  $id = $_POST['ID'];
  if (empty($id)) {
    echo("<p>You didn't select any names.</p>");
  } else {
    $N = count($id);
    echo("<p>You selected $N names(s):</p>");
    for($i=0; $i < $N; $i++) {
      //echo($id[$i] . " ");
      $stmt = $db->query('SELECT * FROM services_main');
      while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {

        if ($row['ID'] == $id[$i]) {

        echo '
<tr>
  <td><input type="checkbox" name="ID[]" value="'.$row['ID'].'" checked /></td>
  <td>&nbsp;'.$row['Name'].'</td>
  <td>&nbsp;'.$row['Value'].'</td>
  <td>&nbsp;'.$row['Value 2'].'</td>
  <td>
    <select name="rate_'.$row['ID'].'" >
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>                       
  </td>
</tr>';
        }
      }
    }
  }
}
?>
</table>
<input type="submit" value="Submit" name="next-2">
</form> 
```

在非本地环境中，我得到了这个：

```
<form method="post" action="next-2.php">
  <table border="1" cellspacing="2" cellpadding="3" style="font-size: 11px; font-family: arial;">
    <tr>
      <td><input type="checkbox" onClick="toggle(this)" /><br/></td>
      <td><b>Name</b></td>
      <td><b>Value</b></td>
      <td><b>Value 2</b></td>
      <td><b>Select # of Levels</b></td>
    </tr>
    <p>You selected 3 names(s):</p>
    <tr>
        <td><input type="checkbox" name="ID[]" value="2" checked /></td>
        <td>&nbsp;John</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>
            <select name="rate_2" >
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>                       
        </td>
    </tr>
  </table>
  <input type="submit" value="Submit" name="next-2">
</form> 
```

我认为它可能会丢失数据库连接的原因是因为我将其设置为“您选择了 $N 个名称”，并且它正确显示 N 的值 3，这意味着它应该循环 3 次，每次查询数据库每个名称的三个 ID 值。同样，它在我的本地环境中运行良好，但在实时服务器上却不行。我不明白为什么它只给我返回名字结果（约翰）而不是现场环境中的其他两个。

最后，在我的每个页面上，我都包含以下数据库连接文件

```
$db = new PDO('mysql:host=sitename.org;dbname=name;charset=UTF-8', 'user', 'pwd'); 
```

我希望我已经足够彻底地解释了这个问题，我猜这可能是我以某种方式忽略的简单问题。谢谢你看着它...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:02:52.730

好的，首先，您不需要逐条比较记录来找出您想要的结果，只需使用 MySQL`WHERE`条件化您的结果即可。其他问题是关于结构的，你不能`<p>`在`<table>`.

所以，我要做的是检查是否`$_POST['ID']`设置，然后检查这个变量是否是一个数组。然后我转义了所有值，`$_POST['ID']`然后将数组内爆到 SQL。

**注意：在 SQL 中，我只选择了您的代码请求的字段。**

所以，这段代码应该可以工作：

```
<?php
if (isset($_POST['next'])) {
?>
<form method="post" action="next-2.php">
<table border="1" cellspacing="2" cellpadding="3" style="font-size: 11px; font-family: arial;">
<tr>
<td><input type="checkbox" onClick="toggle(this)" /><br/></td>
<td><b>Name</b></td>
<td><b>Value</b></td>
<td><b>Value 2</b></td>
<td><b>Select # of Levels</b></td>
</tr>

<?php
  // Check the existence of the "$_POST['ID']" and check if this is a array
  if (isset($_POST['ID']) && is_array($_POST['ID']) {
    $id = $_POST['ID'];
    // Here we can't add '<p>' element to the table, so I used '<tr>'
    echo '<tr><td colspan="5">You selected ' . count($id) . 'names(s):</td></tr>';

    // Create a function to escape the value.
    function escape($value) {
      // Only integer value can be returned.
      return (int) $value;
    }

    // Escaping '$id' values.
    $id = array_map('escape', $id);

    // SQL, here we implode all value to the condition.
    $stmt = $db->query('SELECT `ID`, `Name`, `Value`, `Value 2` FROM `services_main` WHERE `ID` IN (' . implode(',', $id) . ')');

    // Loop all results
    while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
      echo '
<tr>
  <td><input type="checkbox" name="ID[]" value="' . $row['ID'] . '" checked /></td>
  <td>&nbsp;' . $row['Name'] . '</td>
  <td>&nbsp;' . $row['Value'] . '</td>
  <td>&nbsp;' . $row['Value 2'] . '</td>
  <td>
    <select name="rate_' . $row['ID'] . '" >
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>                       
  </td>
</tr>';
    }

    unset($stmt, $id);
  } else {
    // Here we can't add '<p>' element to the table, so I used '<tr>'
    echo '<tr><td colspan="5">You didn\'t select any names.</td></tr>';
  }
}
?>
</table>
<input type="submit" value="Submit" name="next-2">
</form> 
```

# sql - 从表中插入缺失值

> ID：11195219
> 
> 赞同：1
> 
> 时间：2012-06-25T18:35:17.323
> 
> 标签：sql, sql-server, insert, primary-key

我有一个 PK 增长相当快的表，但是由于行被相当一致地删除，它很快就变成了一个非常稀疏的表：

```
 ID     VALUE
 ----------------
   1     'Test'
   5     'Test 2'
   24    'Test 3'
   67    'Test 4' 
```

有没有一种方法可以自动在缺少的 ID 中插入下一个值，这样我就不会将该 ID 变得非常大？例如，我想插入 ID 为 2 的“测试 5”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:58:34.200

**我不是建议做你想做的事，但如果你想这样做，这就是方法。我只是在回答问题，而不是解决问题。**

在你的过程中，你会在这样做的时候锁定你的桌子，这样你就不会偷偷溜进来。通过使用链接这个：

```
EXEC @result = sp_getapplock @Resource = @LockResource, 
                                 @LockMode = 'Exclusive' 
```

和

```
EXEC sp_releaseapplock @Resource = @LockResource 
```

**桌子**

```
DECLARE @table TABLE ( id INT, val VARCHAR(20) ) 
```

**数据**

```
INSERT  INTO @table
        (
          id,
          val
        )
        SELECT  1,
                'Test'
        UNION ALL
        SELECT  2,
                'Test'
        UNION ALL
        SELECT  5,
                'Test 2'
        UNION ALL
        SELECT  24,
                'Test 3'
        UNION ALL
        SELECT  67,
                'Test 4' 
```

**查询**

```
INSERT  INTO @table
        SELECT TOP 1
                id + 1,
                'TEST'
        FROM    @table t1
        WHERE   NOT EXISTS ( SELECT TOP 1
                                    1
                             FROM   @table
                             WHERE  id = t1.id + 1 )
        ORDER BY id

INSERT  INTO @table
        SELECT TOP 1
                id + 1,
                'TEST'
        FROM    @table t1
        WHERE   NOT EXISTS ( SELECT TOP 1
                                    1
                             FROM   @table
                             WHERE  id = t1.id + 1 )
        ORDER BY id

SELECT  *
FROM    @table 
```

**结果**

```
id  val
1   Test
2   Test
5   Test 2
24  Test 3
67  Test 4
3   TEST
4   TEST 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:01:37.900

我不会那样做的。

正如其他人在评论中已经解释的那样，通过重新填补数字中的空白，您将一无所获。

**另外，如果您在其他任何地方**引用这些 ID，您甚至可能会无意中弄乱您的数据：
假设曾经有一行`ID 2`并且您将其删除。
然后插入一个完整的新行并重新使用`ID 2`.
现在，如果您有**任何**引用的数据`ID 2`，它会突然链接到新值而不是旧值。

*（挑剔者请注意：是的，如果正确设置了参照完整性，则不应发生这种情况。但并非所有地方都如此，所以谁知道...）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:53:06.277

我删除了关于身份的答案，因为他们没有参与。看看你是否将它用作聚集索引键会很有趣，因为填补空白会违反严格递增值的经验法则。

使用自连接来填补空白相对简单，并且由于您有一个主键，因此该查询应该快速运行以找到第一个空白（当然，您如何处理同时插入和锁定？）：

```
SELECT lhs.ID + 1 AS firstgap
FROM tablename AS lhs
LEFT JOIN tablename AS rhs
    ON rhs.ID = lhs.ID + 1
WHERE rhs.ID IS NULL 
```

并且插入批量记录需要单独完成每个插入，而 IDENTITY 可以为您处理......

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-25T18:44:28.233

如前所述：不要担心未使用的 ID。

然而，当发生大量删除时，优化表是一种很好的做法。

在 MySQL 中，您可以这样做：

```
optimize table tablename 
```

# javascript - 通过按下按钮在表格内创建表格

> ID：11195224
> 
> 赞同：0
> 
> 时间：2012-06-25T18:35:23.447
> 
> 标签：javascript

我目前有一张桌子，其中一张`<td>`，我有复选框的输入类型。如果用户单击它，它将创建不同的表。

```
<div style="padding-left:170px;">
<table width="80%" border="1" padding-left:50px>  
    <tr>  
        <td>  
            <table border="1" style="float:left"> 
                <th>Portal01</th> 
                <tr>  
                    <td style= "padding:12px;" align="left" >
                    <input type="test0" id = "test0" name="liveDiff"  onchange = "expandService()"> blah_0
                    </td>
                    <td>
                    blah_1
                    </td>
                    <td>
                    blah_2
                    </td>
                </tr>  
           </table>
       </td>
   </tr>
</table> 
```

我已将其设置为如果用户单击旁边的复选框`blah_0`，它应该在此表中创建不同的表。我不确定这是否可以通过 JavaScript 实现，如果不能，那么解决这种情况的替代方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:39:47.337

有可能的。

```
function expandService(){
  document.getElementById('the_id_of_the_td_that_will_contain_the_new_table').innerHTML = 
    '<table><tr>...</tr></table>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:18:16.650

另一种方法是使用`appendChild()`，这里是一个例子：

```
function expandService(chkId, tblId, totalRows, totalCols){
    var tbl = document.createElement('table');
    tbl.id = tblId;
    var row, col, spn;
    for(var i=0; i<totalRows; i++){
        row = document.createElement('tr');
        for(var j=0; j<totalCols; j++){
            col = document.createElement('td');
            spn = document.createElement('span');
            spn.innerHTML = 'your-text';
            col.appendChild(spn);
            row.appendChild(col);
        }
        tbl.appendChild(row);
    }
    var chk = document.getElementById(chkId);
    // td is the parent of checkbox
    chk.parentNode.appendChild(tbl);
} 
```

*示例用法：*

```
<input type="checkbox" id="test0" name="liveDiff" onchange="expandService(this.id, 'your-table-id', 5, 4)"> 
```

它创建一个 5 行 4 列的表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:40:13.453

这可以通过 javascript 实现。一种可能的方法是使用[innerHTML](https://developer.mozilla.org/en/DOM/element.innerHTML)。使用 jQuery 或仅`document.getElementByID`选择与您的单元格对应的元素并在其中插入一个表格。这是一个使用您的代码作为基础的[示例小提琴。](http://jsfiddle.net/Sk2Gj/2/)

```
<div style="padding-left:170px;">
<table width="80%" border="1" padding-left:50px>  
    <tr>  
        <td>  
            <table border="1" style="float:left"> 
                <th>Portal01</th> 
                <tr>  
                    <td id="foo" style= "padding:12px;" align="left" >
                    <input type="test0" id = "test0" name="liveDiff"> blah_0
                    </td>
                    <td>
                    blah_1
                    </td>
                    <td>
                    blah_2
                    </td>
                </tr>  
           </table>
       </td>
   </tr>
</table>  ​ 
```

js：

```
var makeTable = function(contents){
    return '<table><td>' + contents + '</td></table>'
}

document.getElementById("test0").onchange = function(){
   document.getElementById("foo").innerHTML = makeTable("foo")
} 
```

​</p>

# javascript - iframe 滚动条不在页面右侧

> ID：11195229
> 
> 赞同：0
> 
> 时间：2012-06-25T18:35:37.213
> 
> 标签：javascript, html, iframe

我试图让滚动条右侧的小空间消失。该页面在这里：http: [//idreesinc.com/pinged.html](http://idreesinc.com/pinged.html)。如果打开它，您会看到两个 iframe 之间大约有 1 毫米的空间。

我想知道我是否可以解决这个问题。我必须将 iframe 设置为 49.892% 或其他东西，否则它们会垂直而不是水平堆叠。有没有什么办法解决这一问题？抱歉这个模糊的问题，但我是我能解释的最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:38:11.243

设置宽度`50%`，添加`box-sizing: border-box`（或删除边框）并确保两个`<iframe>`标签之间没有空格。

我无法提供任何进一步的建议，因为您的链接已损坏。

# html - 我的 Facebook 应用程序对某些用户显示为空白

> ID：11195232
> 
> 赞同：0
> 
> 时间：2012-06-25T18:35:48.103
> 
> 标签：html, facebook, heroku

我已经建立了 Facebook 应用程序。它托管在： [http](http://resihop.herokuapp.com/) ://resihop.herokuapp.com/ 。

该应用程序应该在这里可见： [https ://apps.facebook.com/393963983989013/](https://apps.facebook.com/393963983989013/)

在 facebook 上，它嵌入在 iframe 中。奇怪的是，对于某些用户，iframe 的内容是空的，只是：对于某些用户，它会显示页面。这是我从检查元素获得的 html:

在职的：

```
<div>
    <noscript>&lt;div class="mas"&gt;&lt;div class="pam uiBoxRed"&gt;Du måste ha javascript aktiverat i din webbläsare för att använda Facebook-applikationer.&lt;/div&gt;&lt;/div&gt;</noscript>
        <form action="https://resihop.herokuapp.com/?fb_source=search&amp;ref=ts" method="post" target="iframe_canvas_fb_https" id="canvas_iframe_post_4fe8ad942b9be6531902412" onsubmit="return Event.__inlineSubmit(this,event)">
            <input type="hidden" autocomplete="off" name="signed_request" value="x4b_ddxAkL71eQEdopzIZJpWZCmTPFqOMmmMvx_TCC8.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImV4cGlyZXMiOjEzNDA2NTQ0MDAsImlzc3VlZF9hdCI6MTM0MDY0ODg1Miwib2F1dGhfdG9rZW4iOiJBQUFGbVR1TlI2UlVCQU9zQkRkc2hwbkpNN0pKR0ZaQTNsaGhtMlViNWFlWkFpeFpDNnNYcWVEbXpaQjVqb1dtVUwzVTg1WW5wUWg2WkJVdUxQV3o2M1lIQk5aQVQ4a3dNNGNtWkExZU00MXZ5SU5KeVpDeWFpbDhWIiwidXNlciI6eyJjb3VudHJ5Ijoic2UiLCJsb2NhbGUiOiJzdl9TRSIsImFnZSI6eyJtaW4iOjIxfX0sInVzZXJfaWQiOiIxMDAwMDA2MjcwMTQzODQifQ">
        </form>
        <iframe class="smart_sizing_iframe" frameborder="0" scrolling="yes" id="iframe_canvas" name="iframe_canvas_fb_https" src='javascript:""' height="800" style="height: 574px; "></iframe>
</div> 
```

破碎的：

```
<div>
    <noscript>&lt;div class="mas"&gt;&lt;div class="pam uiBoxRed"&gt;You need Javascript enabled in your browser to use Facebook Applications.&lt;/div&gt;&lt;/div&gt;</noscript>
    <form action="https://resihop.herokuapp.com/" method="post" target="iframe_canvas_fb_https" id="canvas_iframe_post_4fe8adec0223e0f59580030" onsubmit="return Event.__inlineSubmit(this,event)">
        <input type="hidden" autocomplete="off" name="signed_request" value="yx5eMWJ-0WFSOHg5bkfxesurLc5zZcfuYdyuJqffv0M.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImV4cGlyZXMiOjEzNDA2NTQ0MDAsImlzc3VlZF9hdCI6MTM0MDY0ODk0MCwib2F1dGhfdG9rZW4iOiJBQUFGbVR1TlI2UlVCQUJ6NVRxdWRuaW1tN01ZVzRkdXhSMHczTU1zcDZvbU9ZZ3ZZVm1zZG11dVJLN1lEb1h6Mm9TYUFIeUpaQ2NsSjg5cFBFWkJaQ2haQURyMGZCWWIxOUxaQ0o0QnVaQnR3WkRaRCIsInVzZXIiOnsiY291bnRyeSI6InNlIiwibG9jYWxlIjoiZW5fVVMiLCJhZ2UiOnsibWluIjoyMX19LCJ1c2VyX2lkIjoiNjUxNjY2NDgzIn0"></form>
    <iframe class="smart_sizing_iframe" frameborder="0" scrolling="yes" id="iframe_canvas" name="iframe_canvas_fb_https" src='javascript:""' height="800" style="height: 294px; "></iframe>
</div> 
```

我注意到的一个区别是动作不同。我现在已经等了几个小时，所以它可能是服务器不同步的事情，但可能不是。

# c# - 将位图数组转换为字节数组

> ID：11195235
> 
> 赞同：3
> 
> 时间：2012-06-25T18:36:04.680
> 
> 标签：c#, arrays, byte

我有一个位图数组，我试图将其转换为字节数组，其中字节数组的每个索引都代表一个位图。我在弄清楚如何做到这一点时遇到了一些麻烦。如果有人有建议，请告诉我。谢谢！

```
private void ConvertBitmapToBytes(Bitmap[] BitmapArray)
{
    byte[][] BitmapBytes = new byte[BitmapArray.Length][];
    ImageConverter convert = new ImageConverter();
    for (int i = 0; i < BitmapArray.Length; i++)
    {
        BitmapBytes[i] = new byte[BitmapArray.Length];
        BitmapBytes[i][i] = convert.ConvertTo(BitmapArray[i], typeof(byte[]));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T18:38:10.287

试试这个：

```
public byte[] ImageToByte(Bitmap image){
    using (MemoryStream ms = new MemoryStream())
    {
        // Convert Image to byte[]
        image.Save(ms, ImageFormat.Bmp);
        byte[] imageBytes = ms.ToArray();
        return imageBytes;
    }
} 
```

然后，您的代码将变为：

```
private void ConvertBitmapToBytes(Bitmap[] BitmapArray)
{
    byte[][] BitmapBytes = new byte[BitmapArray.Length][];
    for (int i = 0; i < BitmapArray.Length; i++)
    {
        BitmapBytes[i] = ImageToByte(BitmapArray[i]);
    }
} 
```

希望能帮助到你

# android - Videoview中来自Url的视频

> ID：11195238
> 
> 赞同：0
> 
> 时间：2012-06-25T18:36:18.780
> 
> 标签：android

我想从 VideoView 中的 url 播放视频：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    String path1="http://commonsware.com/misc/test2.3gp";
    Uri uri=Uri.parse(path1);

    VideoView video=(VideoView)findViewById(R.id.videoView1);
    video.setVideoURI(uri);
    video.start();
} 
```

但是当我尝试运行应用程序时，我得到了 NullPointerException。

logcat 说问题出在：`video.setVideoURI(uri);`

有人能帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:39:40.130

我看不到您在哪里定义布局...我想您忘记了：

```
setContentView(R.layout.main); 
```

这将导致任何 findViewById() 返回 null。

# web-services - 向 JERSEY Web 服务发送 XML 时出错

> ID：11195241
> 
> 赞同：0
> 
> 时间：2012-06-25T18:36:28.697
> 
> 标签：web-services, xml-serialization, jersey

我正在开发一个 JERSEY RESTFUL Web 服务，它具有接受对象参数的功能。它被称为“同步”，看起来像这样：

```
@XmlRootElement
public class Synchronize {

private List<PHQ9> phq9OutOfSync;
private List<ExtraQuestions> extraQuestionsOutOfSync;
private List<Suicide> suicideOutOfSync;
private List<Brugha> brughaOutOfSync;
private int hola;

public Synchronize() {

    phq9OutOfSync = new ArrayList<PHQ9>();
    extraQuestionsOutOfSync = new ArrayList<ExtraQuestions>();
    suicideOutOfSync = new ArrayList<Suicide>();
    brughaOutOfSync = new ArrayList<Brugha>();
}
} 
```

问题是我无法将带有此类序列化的 xml 发送到 Web 服务。我发送了一个包含所有属性的 xml，但它没有很好地反序列化它......我不知道是不是因为列表出现了一些问题。我什至尝试只发送 int 属性，例如：

```
<synchronize><hola>1</hola></synchronize> 
```

而且也不起作用...发生了什么事？

有什么提示吗？

编辑：我看到我不知道如何引用类中的属性。我尝试制作一个接受带有 phq9 对象的列表的 Web 服务，并且效果很好，但是如果我将该列表放在其他类中，那么它不知道如何反序列化。为什么会这样？

编辑2：

```
@XmlRootElement
public class PHQ9 {

@XmlElement
private int id;
@XmlElement
private int patientId;
@XmlElement
private int answer1;
@XmlElement
private int answer2;
@XmlElement
private int answer3;
@XmlElement
private int answer4;
@XmlElement
private int answer5;
@XmlElement
private int answer6;
@XmlElement
private int answer7;
@XmlElement
private int answer8;
@XmlElement
private int answer9;
@XmlElement
private int answer10;
@XmlElement
private int total;
@XmlElement
private int week;
@XmlElement
private String phq9Date;
@XmlElement
private String timeExported;
@XmlElement
private String dateExported;
@XmlElement
private int exported;

public PHQ9() {

    phq9Date = timeExported = dateExported = "";        
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:58:51.377

[编辑]

关于列表，请查看[JAXB：如何在列表中编组对象？](https://stackoverflow.com/questions/3683598/jaxb-how-to-unmarshall-objects-in-lists)如果需要，关于如何包装列表。

您可以使用 XmlAccessorType ( [http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlAccessorType.html](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlAccessorType.html) ) 和 XmlElement ( [http://docs.oracle .com/javaee/5/api/javax/xml/bind/annotation/XmlElement.html](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlElement.html)）。

您可能正在尝试序列化/反序列化不受支持的类，导致它失败。您是否有任何异常或只是默默地失败？您是否尝试过查看发送/接收的原始数据？

# backbone.js - Backbone 和 Marionette 中的额外包装器

> ID：11195242
> 
> 赞同：20
> 
> 时间：2012-06-25T18:36:29.077
> 
> 标签：backbone.js, marionette

使用 Backbone 和 Marionette，我创建了一个新布局，该布局进入我页面上的主要内容 div。布局如下所示：

```
<div id='dash-sidebar'>
    <div id='dash-profile'></div>
    <div id='dash-nav'></div> 
</div>
<div id='dash-content'></div> 
```

问题是，当我渲染布局时，Backbone 会在将其放入主要内容 div 之前自动将其包装在一个 div 中，如下所示：

```
<div id='main-content'>    
  <div>
    <div id='dash-sidebar'>
      <div id='dash-profile'></div>
       <div id='dash-nav'></div> 
    </div>
    <div id='dash-content'></div>
  </div>
</div> 
```

我知道我可以使用 tagName 更改元素，但是是否可以完全避免包装模板而直接将其插入页面上的主要内容 div 中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T16:52:36.470

每个主干视图必须由单个元素表示。您的第一个 HTML 块有两个元素，这就是为什么如果不先将其包装在外部 div 中就无法用视图表示的原因。

您能否重构您的布局以包括该`main-content`区域？然后布局`el`将对应于整个外部 div。

要尝试的另一件事是使用 Backbone.View 的[setElement()](http://documentcloud.github.com/backbone/#View-setElement)方法来覆盖外部 div 的创建，并手动为视图中的元素注入所需的 HTML。就像是：

```
onRender: function() {
    this.setElement( /* the HTML you want for your layout */ );
} 
```

但是，我不确定如果您传入的 HTML 有两个父元素而不是只有一个，这将如何工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-26T00:44:38.887

**EDIT3**：警告！这个答案可能已经过时了。我收到一条评论说这个答案不再有效并且没有时间调查（我个人不使用这种方法）。

我喜欢使用 Twitter/Bootstrap 作为我的 UI 库，并且由于默认的标签包装（特别是`<div>`my`<tbody>`和 my `<tr>`s 之间的 a ）而在表格样式方面遇到了一些问题。

经过一番挖掘，我在 Marionette 文档中找到了`Region`关于[如何`View`将`el`](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.region.md#set-how-views-el-is-attached "Marionette - 区域 - 设置视图的 el 附加方式"). [Backbone`el`](http://backbonejs.org/#View-el "骨干 - 查看 - el")从各种`View`属性构建，并保持构建的元素是最新的，因此它可以随时呈现。所以我想，如果`view.el`是父级，为什么不直接使用 HTML 内容呢？Marionette 还提供了一种方法来[创建自定义`Region`](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.region.md#custom-region-types "Marionette - 区域 - 自定义区域类型")

我能够通过创建`Region`具有覆盖`open`功能的自定义来运行所有内容。这样我就可以指定我想用标签包装哪些区域以及我不想包装哪些区域。在下面的示例片段中，我创建了我的自定义非包装`Region`( ) 并在我的( ) 中`NowrapRegion`使用它作为我的（我在我的真实程序中传递的视图 create s）。`Layout``MyLayout``<tbody>``<tr>`

```
var NowrapRegion = Marionette.Region.extend({
  open: function(view){
    this.$el.html(view.$el.html());
  }
});

var MyLayout = Marionette.Layout.extend({
  template: templates.mylayout,
  regions: {
    foo: '#foo',
    columns: '#columns', //thead
    rows: { selector: '#rows', regionType: NowrapRegion } //tbody
  }
}); 
```

繁荣！想要的时候包，不想的时候不包。

**编辑：**这似乎会影响`events`在`*View`级别上应用。我还没有调查过，但请注意它们似乎没有被触发。

这是否是“正确”的做法，我不确定。如果他看到这一点，我会欢迎来自@derick-bailey 的任何反馈。

**EDIT2：** @chris-neale 提出了以下建议，我还没有验证这一点，但它似乎是合理的。谢谢！

> 与其在视图中复制 html，不如在子节点上使用深度克隆将维护事件和数据。

```
var NowrapRegion = Marionette.Region.extend({
  open: function(view){
    view.$el.children().clone(true).appendTo(this.$el);
  }
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-25T22:49:29.083

更新： Marionette.Layout 是 Backbone 视图的扩展，所以这是正常行为，请参阅主干文档：

> “el”属性引用浏览器中创建的 DOM 对象。每个 Backbone.js 视图都有一个“el”属性，如果没有定义，Backbone.js 将构建自己的，这是一个空的 div 元素。

所以我之前的回答与你的问题无关，抱歉。

更新：

在 Backbone gitHub 中发现了关于这个主题的[问题 546](https://github.com/documentcloud/backbone/issues/546)（作为 wontfix 关闭），jashkenas 发布了这条评论来解释为什么它不容易实现：

> 使用 Backbone 视图的很大一部分优势在于，它们的元素始终可用——无论是否已呈现模板（许多视图具有多个模板）——无论视图是否存在于DOM 与否。
> 
> 这允许您创建视图并将其添加到 DOM，稍后渲染，并确保您的所有事件都正确绑定（因为它们是从 view.el 委托的）。
> 
> 如果你能想出一个好的策略，让视图拥有“完整”的模​​板，同时保留上述特性……那么我们来谈谈它——但它必须允许根元素存在而不必渲染模板（可能取决于稍后可能不会到达的数据），并且它必须允许视图轻松拥有多个模板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T18:07:57.657

我想实现几乎相同的目标。我想在我的模板中包含所有的 HTML 标记，让 Backbone 完成其余的工作。因此，我编写了以下代码段，删除了额外的“div”。

首先，您将 tagName 设置为“检测”，然后在第一次渲染后检测视图中第一个元素的 tagName。显然，这仅在您在模板中提供自己的包装器时才有效。

```
// Single table row inside tbody
tableRowView = Backbone.Marionette.ItemView.extend({
  tagName: 'detect',
  template: function(data) {
    return Handlebars.templates['tablerow/single'](data);
  },
  onRender: function() {
    if (this.tagName == 'detect')
      this.tagName = this.$el.children().first().prop('tagName').toLowerCase();
    this.setElement( this.$el.children( this.tagName ) );
    var $parent = this.$el.parent( this.tagName );
    if ($parent.length) {
      this.$el.detach();
      this.$el.insertAfter($parent);
      $parent.remove();
    }
  },
  modelEvents: {
    "change": "render"
  }
}); 
```

模板：

```
<tr>
  <td>{{artist}}</td>
  <td>{{title}}</td>
  <td>{{length}}</td>
</tr> 
```

但是，我只是稍微尝试了一下——如果有人看到这种方法可能导致的任何问题（性能、内存、僵尸等），我会非常愿意了解它们。

顺便说一句，这可能很容易打包到插件中。

# haskell - 未解决的顶级重载

> ID：11195246
> 
> 赞同：0
> 
> 时间：2012-06-25T18:36:36.553
> 
> 标签：haskell

我需要在 Haskell 中制作可乐自动售货机，但我遇到了一些问题。我不太了解Haskell，所以我不知道发生了什么

```
main = start
       return()

start = do putStr "\nSelect a coin\n1\. R$0,25\n2\. R$0,50\n3\. R$1,00\n"
           coin <- getChar;
           case coin of
                1 -> twentyFive
                2 -> fifty
                3 -> dispensed
                otherwise -> do putStr "Select a valid option"
                                start

twentyFive = do putStr "\nSelect a coin\n1\. R$0,25\n2\. R$0,50\n3\. R$1,00\n"
                coin <- getChar;
                case coin of
                     1 -> fifty
                     2 -> seventyFive
                     3 -> dispensed
                     otherwise -> do putStr "Select a valid option"
                                     twentyFive

fifty = do putStr "\nSelect a coin\n1\. R$0,25\n2\. R$0,50\n3\. R$1,00\n"
           coin <- getChar;
           case coin of
                1 -> seventyFive
                2 -> dispensed
                3 -> dispensed
                otherwise -> do putStr "Select a valid option"
                                fifty

seventyFive = do putStr "\nSelect a coin\n1\. R$0,25\n2\. R$0,50\n3\. R$1,00\n"
                 coin <- getChar;
                 case coin of
                      1 -> dispensed
                      2 -> dispensed
                      3 -> dispensed
                      otherwise -> do putStr "Select a valid option"
                                      seventyFive

dispensed = do putStr "-- Coke Dispensed --"
               return() 
```

但我收到此错误：

```
Unresolved top-level overloading
*** Binding             : seventyFive
*** Outstanding context : Num Char 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:40:10.760

您缩进的`seventyFive`方式与缩进其他函数的主体的方式不同。

应该像这样缩进：

```
seventyFive = do putStr "\nSelect a coin\n1\. R$0,25\n2\. R$0,50\n3\. R$1,00\n"
                 coin <- getChar
                 case coin of
                      1 -> dispensed
                      2 -> dispensed
                      3 -> dispensed
                      otherwise -> do putStr "Select a valid option"
                                      seventyFive 
```

错误信息是因为 Hugs 认为你的函数的第一行也是最后一行。（第二行没有缩进到第一行之后的那部分`do`。）

顺便说一句，如果可以（最好作为 Haskell 平台的一部分）使用 GHC 而不是 Hugs，因为 Hugs 已经有几年没有维护了。

* * *

不是错误，但看起来也很奇怪

```
 coin <- getChar; 
```

用。。。来代替

```
 coin <- getChar 
```

* * *

更多错误：

```
main = start
       return() 
```

应该

```
main = do start
          return() 
```

或（因为我们不必拥有`main :: IO ()`，我们可以拥有`main :: IO anythingWeWant`）只是

```
main = start 
```

最后，你正在调用`getChar`，它会给你一个`Char`，但是模式匹配就好像它给你一个数字一样。您需要将数字括在单引号中（例如`'1'`，而不是`1`）。

# vba - 如何将 ListObject 作为变量传递？

> ID：11195248
> 
> 赞同：0
> 
> 时间：2012-06-25T18:36:39.077
> 
> 标签：vba, excel, type-mismatch

我不擅长 Excel/VBA，需要一些帮助。下面的代码（以最简单的形式）会引发运行时错误 (13)，说明我的类型不匹配。我不明白它是如何不匹配的，因为我已将它们声明为同一类型。有任何想法吗？

```
Sub Setup_ListObject()
    Dim the_list As ListObject
    Do_stuff_with_ListObject (the_list)  ' ** runtime error highlights "type mismatch"
End Sub
Private Sub Do_stuff_with_ListObject(ByRef a_list As ListObject)
    ' here we do stuff
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:40:13.297

拆下括号。用这个

```
Do_stuff_with_ListObject the_list 
```

或者如果您想使用括号，请执行此操作

```
Call Do_stuff_with_ListObject(the_list) 
```

# spring - 织布工在 Spring 3.1 MVC 项目中抛出 BCException

> ID：11195249
> 
> 赞同：1
> 
> 时间：2012-06-25T18:36:41.333
> 
> 标签：spring, model-view-controller, aspectj

我正在尝试实现一个与现有 Spring 3.1 MVC 项目一起使用的 finagle 服务器。

我能够正确地实例化服务器，并且运行良好 - 及时响应消息，在 Servlet 环境中似乎没有任何问题。

如果我在 servlet 的正常生命周期内关闭服务器，一切都会顺利进行。但是，如果我在应用程序或 Web 上下文关闭期间尝试关闭（并且我在很多不同的地方都这样做了，我会收到 AspectJ 错误：

> 2012 年 6 月 22 日下午 12:08:55 org.aspectj.weaver.tools.Jdk14Trace 错误 严重：scala/collection/JavaConverters$AsScala org.aspectj.weaver.BCException：同时处理类型“Lscala/collection/JavaConverters$AsScala;” - 不能将外部类型转换为引用类型。签名=Lscala/集合/JavaConverters；toString()=scala.collection.JavaConverters 编织时处理类型芒格时
> 
> 在 org.aspectj.weaver.AbstractReferenceTypeDelegate.getFormalTypeParametersFromOuterClass(AbstractReferenceTypeDelegate.java:110) 在 org.aspectj.weaver.bcel.BcelObjectType.ensureGener icSignatureUnpacked(BcelObjectType.java:765)

我并不真正了解 AOP 如何与 Spring 一起工作的第一件事，这无济于事。

列出了一些与 Scala 和 AspectJ 有关的现有错误，但我认为其中任何一个都不是密切相关的。这个是在 AspectJ 1.6.7 中修复的，我使用的是 1.6.9。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=339300](https://bugs.eclipse.org/bugs/show_bug.cgi?id=339300)

我想知道这个错误是否可能实际上不是重复的，因为我认为这就是我所看到的：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=337064](https://bugs.eclipse.org/bugs/show_bug.cgi?id=337064)

谁能给我一些关于这里发生的事情的指导？

简单地创建一个指示 AspectJ 单独保留所有 Scala 代码的 aop.xml 是正确的做法吗？

*   标记

# ios - 有没有办法在 XCode 4.3.2 的文本视图中同时使用斜体和粗体？

> ID：11195250
> 
> 赞同：0
> 
> 时间：2012-06-25T18:36:46.373
> 
> 标签：ios, fonts, uitextview, xcode4.3

我在 textview 中包含一些文本，并且想要常规字体和一些斜体字。这有可能做到这一点吗？如果是这样，有人可以告诉我如何做到这一点吗？我知道您可以将 textview 中的整个文本设置为粗体、斜体或常规文本，但想知道您是否也可以将其混合起来？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:43:44.937

引用自[`UITextView`类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextView_Class/Reference/UITextView.html)：

> 此类不支持文本的多种样式。您指定的字体、颜色和文本对齐属性始终适用于文本视图的全部内容。要在您的应用程序中显示更复杂的样式，您需要使用 UIWebView 对象并使用 HTML 呈现您的内容。

所以看起来你想要做的事情不是本机支持的。

# c# - 使用 UpdateLayout 或其他替代方法刷新视图数据绑定

> ID：11195253
> 
> 赞同：1
> 
> 时间：2012-06-25T18:36:57.017
> 
> 标签：c#, wpf, data-binding, devexpress

我有一个接口 IScreenViewModel，为了简化问题，我可以

```
RedScreenViewModel : IScreenViewModel
GreenScreenViewModel : IScreenViewModel 
```

等等。这意味着我有一个 RedScreenView.xaml，它创建了一个 RedScreenViewModel 实例，同样适用于所有后续的彩色屏幕。

```
IScreenViewModel has some properties that you must implement e.g. 
interface IScreenViewModel
{
   public Color ScreenColor{get;set;}
} 
```

我有一个 ViewmodelWrapper 类，它包含所有视图模型实例。ScreenViewModels、MenuViewModels 等...因为我使用的是 DevExpress，我无法直接在 Main.xaml.cs 文件中绑定 DataContext，原因我还不知道。所以以 main 为例。我不能拥有

```
ScreenLabel.DataContext  = viewModelWrapper.ScreenViewModel 
```

我必须主要做：

```
DataContext  = viewModelWrapper; 
```

这样父窗口就可以看到所有的子元素。

在 RedScreenView.xaml 我可以有这样的东西：

```
<Label Background="ScreenViewModel.ScreenColor"/> 
```

希望数据绑定应该在 ViewModelWrapper 中查找 IScreenViewModel.ScreenViewModel 对象并使用动态绑定/多态性使用正确的 ScreenColor 对象。

在某些情况下，屏幕可以有更多属性，所以在 GreenScreenViewModel 中，继承 ScreenColor 属性，它可以有自己的属性`DifferentProperty`。

问题是：我有一个工厂，它根据用户想要的屏幕返回一个屏幕对象。它返回正确的屏幕对象，但是当它通知 View 更新自身时，它会查看新对象但**使用错误的 XAML**。如果那有意义的话。我在 ViewModelWrapper 方法中做了类似的事情。

```
MainGui.ScreenWrapper.LayoutRoot.Clear() ;
MainGui.ScreenWrapper.Items.Clear() ;
MainGui.ScreenWrapper.LayoutRoot.Add(screenFactory.GetSelectedScreen("RedScreen").GetLayoutRoot()
    MainGui.UpdateLayout() ;
    ScreenViewModel = screenFactory.GetSelectedScreen("RedScreen").GetViewModel() ; 
```

忽略我两次调用工厂的事实...... ScreenWrapper 是保存屏幕的 LayoutGroup 。当我使用该代码交换视图（屏幕）时，我希望它会使用正确的绑定。所以假设我从 GreenScreenViewModel 切换到 RedScreenViewModel，记住 GreenScreenViewModel 比 RedScreenViewModel 多一个属性，在 GreenScreenView 中我有这样的东西：

```
<Label Content="ScreenViewModel.DifferentProperty"/> 
```

当交换完成并且 ScreenViewModel 通知它现在指向 RedScreenViewModel 时，它会引发异常。我强烈假设这是因为 Layout 没有被刷新并且它仍然使用错误的视图。调试模式下的输出错误是“在 viewModelWrapper.ScreenModel 中找不到属性 DifferentProperty”这是不对的，因为我已经删除了那个 GreenScreenView，我更新了布局，我知道有一个 LayoutChanged 事件或类似的东西，所以可以也被提出了为什么它仍然看到错误的视图？如何更新 ScreenWrapper.LayoutRoot 以使用不同的绑定代码“查看”新视图。天哪，我希望这很清楚。编辑：迈克尔感谢您的回复。是的，有一个实际的例外 - “NullReferenceException” 在我正在使用的第三方 dll 中。那是因为它找不到该属性。我确定我没有说清楚，但也许问题应该是：从可视化树中删除和插入用户控件时-如何刷新可视化树以查看新绑定？如果我可以刷新可视化树，它应该可以解决我的问题。更新布局（）不起作用

编辑：迈克尔感谢您的回复。是的，我正在使用的第三方 dll 中有一个实际的异常 - “NullReferenceException”。那是因为它找不到该属性。当我调用 OnPropertyChanged 时它会引发异常，并且处理程序不为空！我确定我没有说清楚，但也许问题应该是：从可视化树中删除和插入用户控件时-如何刷新可视化树以查看新绑定？如果我可以刷新可视化树，它应该可以解决我的问题。UpdateLayout() 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:10:53.367

首先，你说

> 因为我使用的是 DevExpress，所以我无法直接在 Main.xaml.cs 文件中绑定 DataContext，原因我还不知道。

快递不应该是这里的问题。您需要绑定一些东西来返回适当的 ViewModel。[在这里](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFcQFjAA&url=https://stackoverflow.com/questions/5462040/what-is-a-viewmodellocator-and-what-are-its-pros-cons-compared-to-datatemplates&ei=CxfpT5iDAqyfmQXliISUDg&usg=AFQjCNHMg75N11VCyAEvy4dRTU63bI02nw&sig2=tvVq9L7guVj7lYIXVoKOBg)查看有关此主题的讨论。

其次，你说的错误是

> 在 viewModelWrapper.ScreenModel 中找不到属性 DifferentProperty

这不一定是问题，也不会导致异常。当您动态更改绑定时，INotifyPropertyChanged 事件会四处飞散，并且可能会有一段时间的“不确定性”。我假设您的 ViewModel 实现了 INotifyPropertyChanged。

我认为关键可能是仔细查看异常，如果有的话（因为“找不到属性”是调试消息，而不是异常）。[为了清楚起见，您可能需要按照此处](http://weblogs.asp.net/akjoshi/archive/2011/11/30/resolving-un-harmful-binding-errors-in-wpf.aspx)所述关闭绑定消息。如果有实际异常，请编辑详细信息。

# wcf - 解释一下用 WCF 读取一个消息对象？

> ID：11195255
> 
> 赞同：1
> 
> 时间：2012-06-25T18:36:59.827
> 
> 标签：wcf, idispatchmessageinspector

我有一个 MessageInspector 记录通过的消息？您只能阅读一次消息并且必须创建副本的原因是什么？我从 MSDN 中看到了我需要创建缓冲副本的文档，但我不知道为什么要这样实现？有人可以向我解释吗？

```
private static void SendRequest(string request)
{
var req = (HttpWebRequest) WebRequest.Create("http://urltoservice.svc/MethodToCall");
req.ContentType = "text/xml";
req.Method = "POST";

using (var stm = req.GetRequestStream())
{
    using (var stmw = new StreamWriter(stm))
    {

        stmw.Write(request);
    }
}

byte[] myData;
using (var webResponse = req.GetResponse())
{

    var responseStream = webResponse.GetResponseStream();
    myData = ReadFully(responseStream);
}

// Do whatever you need with the response
string responseString = Encoding.ASCII.GetString(myData);
} 
```

如果我无法访问服务器部分或无法更改 MessageInspector 以使用消息的缓冲副本，我可以修改上面的消息以制作流的副本吗？如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:24:34.490

您可以将消息复制到缓冲区并使用它。有关使用消息的更多详细信息，您可以在以下链接中找到：http: [//msdn.microsoft.com/en-us/library/ms734675.aspx](http://msdn.microsoft.com/en-us/library/ms734675.aspx)

# php - htaccess 错误报告

> ID：11195260
> 
> 赞同：0
> 
> 时间：2012-06-25T18:37:27.780
> 
> 标签：php, apache, .htaccess, shared-hosting

谁能告诉我如何创建一个 500 错误来检查我的错误页面`500.php`是否正常？我想在发生某些类型的错误时向自己发送电子邮件警报，我该怎么做？

我读了很多，但没有找到太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:40:55.660

你可以强制它

```
header('HTTP/1.1 500 Internal Server Error'); 
```

然后在您的`500.php`页面上使用[`mail()`](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:46:33.127

对于第 2 点：

```
 I would to send e-mail alerts to myself when some types of error occurs what track to follow ? 
```

使用谷歌网站管理员工具：

```
http://www.google.com/webmasters/ 
```

站长工具可以帮助你检测所有的服务器错误并帮助你优化你的网站，是一个很棒的工具。

更多信息：

```
http://en.wikipedia.org/wiki/Google_Webmaster_Tools 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T22:03:50.177

我认为触发和 500 错误的最简单方法是加载无效的 .htaccess 文件

因此，在 Apache 可以看到的地方创建一个新目录，并在该目录中上传一个名为 .htacesss 的文件，其中包含以下内容：

```
Redirect 
```

这是无效的语法，因为您没有提供所有必需的重定向参数，并且会在我的测试中可靠地生成 500 错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:59:06.087

如果您想监控您的网站，我建议使用[pingdom 之](http://www.pingdom.com/)类的服务（他们和许多其他人都有免费计划）。如果服务器不再处理 php，这些服务也会提醒您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T18:48:38.867

如何使用 php 发送电子邮件：

```
if($stuffExploded==true)
{
    $to      = 'nobody@example.com';
    $subject = 'Oh, By the way...';
    $message = 'Stuff exploded on page 64, line 221\. Good going.';

    mail($to, $subject, $message);
} 
```

# jquery - jquery scrollto + addclass 到 div

> ID：11195263
> 
> 赞同：0
> 
> 时间：2012-06-25T18:37:38.623
> 
> 标签：jquery, css, html, scrollto

我正在使用 scrollto，我希望在滚动到下一个 div 时添加一个类。使用 removeClass/addClass 可以吗？我不知道我会把它放在哪里，所以当滚动到当前的 .column div 时，它也会添加“选定”类。

Coles 注释版本：我正在查看滚动到时突出显示的当前 div。

这是我正在使用的滚动代码：

```
function scrollToPosition(element) {
    if (element !== undefined) {
        $(".wrap").scrollTo(element, 800, {
            margin: true
        });
    }
}

$(function() {

    //Create an Array of posts
    var posts = $('.column');
    var position = 0; //Start Position
    var next = $('#rightControl');
    var prev = $('#leftControl').hide();

    //Better performance to use Id selectors than class selectors
    next.click(function(evt) {
        //Scroll to next position
        prev.show();
        scrollToPosition(posts[position += 1]);
        if (position === posts.length - 1) {
            next.hide();
        }
    });

    prev.click(function(evt) {
        //Scroll to prev position    
        next.show();
        scrollToPosition(posts[position -= 1]);
        if (position === 0) {
            prev.hide();
        }
    });

}); 
```

HTML：

```
<div id="menu"></div>
<div class="arrows">
<div class="nav_arrow">
     <div class="control" id="leftControl"></div>
         <div class="control" id="rightControl"></div>
</div>
</div>
<div class="wrap">
    <div class="content">
        <div  class="column"></div>
        <div  class="column"></div>
        <div  class="column"></div>
        <div  class="column"></div>
        <div  class="column"></div>
    </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:43:22.550

试试这个未经测试的代码！

```
function scrollToPosition(element) {
if (element !== undefined) {
   $(element).addClass('selected')
   $(element).siblings().removeClass('selected')
    $(".wrap").scrollTo(element, 800, {
        margin: true
    });

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:11:03.840

当然，你应该能够做到：

```
$('.someclass').removeClass('someclass');    
posts[position].addClass('someclass'); 
```

在您致电 scrollToPosition 之后。

# java - 在Java中有没有办法共享内存位置来交换一些实时的小数据包？

> ID：11195268
> 
> 赞同：2
> 
> 时间：2012-06-25T18:37:49.263
> 
> 标签：java, linux, real-time

有没有更好/更智能的方法来获取`put`布尔`get`值`memory system`，但不使用任何`TCP/UDP`方法`local file system`？

```
For example:

#both running as 1 application separately

$ java -cp /var/tmp/J.jar System.Backend

$ java -cp /var/tmp/J.jar System.Frontend 
```

内存分配在哪里`Backend`，前端动态读取它，它们都无法使用 TCP/UDP 或文件系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:11:22.713

AFAIK，在纯 Java 中使用共享内存的唯一方法是使用内存映射文件。

如果希望两段代码共享内存，最简单的做法是使用一个 JVM。很少有充分的理由使用多个具有紧密耦合代码的 JVM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:14:20.363

如果您可以使一个应用程序通过 Process API 启动另一个应用程序，那么它们可以通过标准输入和输出进行通信。

# mysql - 电子邮件字段的最佳字符集是什么？

> ID：11195271
> 
> 赞同：4
> 
> 时间：2012-06-25T18:38:08.670
> 
> 标签：mysql

*   二进制
*   utf8_bin
*   utf8_unicode_ci
*   utf8_general_ci

哪一个最适合在 MySql 数据库中存储唯一的电子邮件？

*注意：该电子邮件字段将用于用户登录。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T19:48:40.547

电子邮件地址是一段文本。因此，**不要使用二进制**，使用文本。

**utf8**似乎是一个不错的选择。我不确定电子邮件地址支持哪些字符，但可以预期将来允许使用的 unicode 字符会越来越多。特别是如果您在数据库的其他地方使用 utf8，则不必从一种编码切换到另一种编码，只需对所有内容都使用 utf8。

至于在 utf8_bin 、 utf8_unicode_ci 和 utf8_general_ci 之间进行选择**，**区别**只是**排序**规则**。这意味着在比较字符串时会有所不同。

现在，您必须在允许的和正常的之间进行选择。通常，电子邮件地址不区分大小写，但它们可能区分大小写。

因此，如果您在电子邮件列上使用唯一索引，并且希望允许电子邮件地址仅在大小写上有所不同，则应使用**utf8_bin**，因为以 _ci 结尾的排序规则表示“不区分大小写”。

如果您使用唯一索引并希望避免电子邮件仅在大小写上有所不同，请使用**utf8_unicode_ci**。

话虽如此，我使用**utf8_unicode_ci**。我希望数据库能够将 johndoe@email.com 和 JohnDoe@email.com 识别为同一个地址。它比允许地址具有相同字符和不同大小写的可能性要有用得多。

# eclipse - 在 Eclipse 中编辑和编译 AOSP 核心/系统应用程序

> ID：11195272
> 
> 赞同：3
> 
> 时间：2012-06-25T18:38:08.713
> 
> 标签：eclipse, settings, system, android-source

我整天都在敲打键盘，试图弄清楚如何将 AOSP 中的核心/系统应用程序之一导入 Eclipse 以对其进行编辑/调试（在这种特定情况下，Android 4.0.4 中的设置应用程序）。

我已经关注了许多关于这个主题的指南，包括这个[让](http://stoned-android.blogspot.com/2012/01/debug-and-modify-android-core-app-like.html)我非常接近的指南，但代码仍然返回 167 错误。

有人对这个问题有任何经验或见解吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-23T21:58:41.650

我就是这样做的。使用 eclipse 使用 eclipse 项目编辑/浏览/调试平台代码。为了构建平台，我使用终端构建整个图像或构建特定文件夹（即使用 mm 助手）。

要为 AOSP 源创建 eclipse 项目，请检查[Using Eclipse to edit/browse AOSP](http://apienthusiast.blogspot.com/2014/06/using-eclipse-to-browse-and-edit-aosp.html)。

# python - 让 Pypy 识别第三方模块

> ID：11195273
> 
> 赞同：14
> 
> 时间：2012-06-25T18:38:09.977
> 
> 标签：python, pypy, pytables

只是一个简单的问题，我如何让 pypy 识别我在 Python 中拥有的第三方模块？例如，我收到以下错误。

```
from tables import *
ImportError: No Module named tables 
```

这基本上是说它在我试图运行的脚本中找不到我用来与之交互的 pytables 库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T18:51:17.730

对于纯 python 模块，只需将包含模块的目录添加到您的 sys.path 中，使用类似：

```
sys.path.insert(0, '/usr/local/lib')
sys.path.insert(0, os.path.expanduser('~/lib')) 
```

这适用于 CPython、Pypy 和 Jython。

对于 C 扩展模块，您可以尝试 Pypy 的 cpyext，但它不会运行您可能希望的一切，因为一些 CPython C 扩展模块会徘徊在 CPython 基于 C 的运行时的黑暗角落：http: [//morepypy.blogspot.com/ 2010/04/using-cpython-extension-modules-with.html](http://morepypy.blogspot.com/2010/04/using-cpython-extension-modules-with.html)

我有时会编写使用 ctypes 与 C .so 交互的代码，然后在 CPython 和 Pypy 上都使用它，因为它们都可以很好地使用 ctypes - 但 ctypes 在 CPython 上可能有点慢： [http://docs.python .org/library/ctypes.html](http://docs.python.org/library/ctypes.html) 上次我检查，Jython 有 ctypes 的开始，但它还远远不够使用，至少不适合我的目的。

还有一个新接口需要在运行时使用 C 编译器。它可能比 ctypes 不那么脆弱（阅读：容易出现段错误）。它在这里描述：http: [//morepypy.blogspot.com/2012/06/release-01-of-cffi.html](http://morepypy.blogspot.com/2012/06/release-01-of-cffi.html) 它来自我相信的 Pypy 项目，但它首先在 CPython 上工作。AFAIK，它还没有在 Pypy 上运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T13:08:54.710

Pypy 有一个单独的安装空间。因此，你想从 pypi 安装的任何模块都应该安装到它的空间中。因此，例如，我在 /usr/local/pypy-1.9-32bit 中安装了 pypy

我建议使用 pip 或 easy_install。以下是安装 pip 的方法：

```
curl curl https://bootstrap.pypa.io/get-pip.py | /usr/local/pypy-1.9-32bit/bin/pypy 
```

或者

```
curl https://raw.github.com/pypa/pip/master/contrib/get-pip.py | /usr/local/pypy-1.9-32bit/bin/pypy 
```

然后，只需使用新安装的 pip 即可获取模块：

```
sudo /usr/local/pypy-1.9-32bit/bin/pip install tables 
```

在这种情况下，它失败了，并出现以下错误：

```
bminton@bminton:/tmp$ sudo /usr/local/pypy-1.9-32bit/bin/pip install tables
Downloading/unpacking tables
  Downloading tables-2.4.0.tar.gz (8.9Mb): 8.9Mb downloaded
  Running setup.py egg_info for package tables
    .. ERROR:: You need numpy 1.4.1 or greater to run PyTables!
    Complete output from command python setup.py egg_info:
    .. ERROR:: You need numpy 1.4.1 or greater to run PyTables! 
```

在这种情况下安装失败，因为 Tables 依赖于 PyPy 尚不支持的 Numpy（尽管他们正在研究它，请参阅[http://pypy.org/numpydonate.html](http://pypy.org/numpydonate.html)）。但是，对于许多 python 模块，这种方法效果很好。例如，我以这种方式成功安装了 logilab 约束包。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-28T15:49:04.370

正如其他答案中指出的那样，`pypy`为已安装的模块提供了单独的空间。我发现向 pypy 添加模块的最简单方法如下：

*   下载源代码（例如作为`*.tar.gz`文件）
*   解压，`cd`进入解压目录
*   运行`pypy setup.py install`（有时您需要在前面添加一个`sudo`）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-27T00:26:19.110

将模块的文件夹从 C:\Python27\Lib 复制到 C:\pypy-2.3.1-win32\lib-python 或安装它们的位置。

显然，这仅适用于 Windows。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-06T06:02:03.920

其实安装pypy的时候就有pip_pypy了。看这里：

![截屏](../Images/333f03584b5bd7a02169337d1f640b6c.png).

然后使用 pip_pypy 安装第三个模块。

# android - 使用 BitmapFactory.Options 会导致 BitmapFactory 发生变化

> ID：11195287
> 
> 赞同：0
> 
> 时间：2012-06-25T18:38:37.440
> 
> 标签：android, bitmap, bitmapfactory

我想要实现的是能够从输入流计算位图的高度和宽度，而无需实际更改 BitmapFactory.Options

这就是我所做的：

```
private Boolean testSize(InputStream inputStream){
    BitmapFactory.Options Bitmp_Options = new BitmapFactory.Options();
    Bitmp_Options.inJustDecodeBounds = true;
    BitmapFactory.decodeResourceStream(getResources(), new TypedValue(), inputStream, new Rect(), Bitmp_Options);
    int currentImageHeight = Bitmp_Options.outHeight;
    int currentImageWidth = Bitmp_Options.outWidth;
    if(currentImageHeight > 200 || currentImageWidth > 200){
        Object obj = map.remove(pageCounter);
        Log.i("Page recycled", obj.toString());
        return true;
    }
    return false;
} 
```

现在这里的主要问题是它将 BitmapFactory.Options 更改为无法正确解码流的状态。

我的问题是有另一种重置 BitmapFactory.Options 的方法吗？或其他可能的解决方案？

另一种方法：（注意*应用top方法时originalBitmap为null）

这是我的原始代码：

```
Bitmap originalBitmap = BitmapFactory.decodeStream(InpStream); 
```

应用 Deev 和 Nobu Game 的建议：（没有变化）

```
 BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = false;
    Bitmap originalBitmap = BitmapFactory.decodeStream(InpStream,null,options); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T00:10:13.390

您正在尝试从同一流中读取两次。流不能用作字节数组。一旦您从中读取数据，您将无法再次读取它，除非您重置流位置。您可以在第一次调用 decodeStream() 后尝试调用 InputStream.reset() 但并非所有 InputStreams 都支持此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:21:20.663

如果您尝试重用您的 Options 对象（顺便说一下，在您的代码示例中不是这种情况），那么您将如何尝试重用它？错误信息是什么，出了什么问题？您是否尝试重用选项对象来实际解码位图？然后只需将 inJustDecodeBounds 设置为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:06:54.993

当 inputStream.Mark 和 inputStream.Reset 不起作用时复制 InputStream 的简单类。

致电：

```
CopyInputStream copyStream = new CopyInputStream(zip);
InputStream inputStream = copyStream.getIS(); 
```

我希望这可以帮助别人。这是代码。

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.InputStream;

public class CopyInputStream {

private InputStream inputStream;
private ByteArrayOutputStream byteOutPutStream;

/*
 * Copies the InputStream to be reused
 */
public CopyInputStream(InputStream is){
    this.inputStream = is;
    try{
        int chunk = 0;
        byte[] data = new byte[256];

        while(-1 != (chunk = inputStream.read(data)))
        {
            byteOutPutStream.write(data, 0, chunk);
        }
    }catch (Exception e) {
        // TODO: handle exception
    }
}
/*
 * Calls the finished inputStream
 */
public InputStream getIS(){
    return (InputStream)new ByteArrayInputStream(byteOutPutStream.toByteArray());
} 
```

}

# sql - 对字符串列的 Sql 查询 - 根据语言排序

> ID：11195288
> 
> 赞同：1
> 
> 时间：2012-06-25T18:38:46.737
> 
> 标签：sql

我有一列名称，varchar(200)。此栏数据可以用希伯来文和英文填写。

我有对此数据库进行查询的代码，我希望可以选择对结果进行排序 - 首先是希伯来语，然后是英语 - 以及其他方式。

如何做呢？如果有的话……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:41:06.563

这将对顶部带有希伯来字符的任何名称进行排序，并按希伯来顺序排列。其他名称将按英文顺序排序：

```
select  *
from    YourTable
order by
        case 
        when name like '%[... all hebrew letters here ...]%' then name
        end collate Hebrew_CI_AS
,       name collate Latin1_General_CI_AS 
```

在排序规则中，`CI`表示不区分大小写。`AS`表示口音敏感。

# sencha-touch-2 - 如何让我的图像自动适合 Sencha Touch 2 中的图像对象？

> ID：11195291
> 
> 赞同：1
> 
> 时间：2012-06-25T18:38:55.810
> 
> 标签：sencha-touch-2

这是我的代码的摘录：

```
 xtype: 'image',
            src: 'http://www.sencha.com/files/blog/old/blog/wp-content/uploads/2010/06/sencha-logo.png',
            left: '50%',
            top: '30%',
            height: '3.515625%',
            width: '13.28125%' 
```

图像被截断 - 只出现我的 Image 对象大小的一小块。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T19:41:42.370

尝试配置“模式：'图像'”，这会将您的图像嵌入到 img 标签中，尊重您的宽度和高度。或者在 CSS 中设置 background-size

编辑：另外，您是否将像素布局转换为 %？我目前正在做同样的事情，除了在 em 中。有点痛苦。有什么有用的提示吗？

# jquery - jquery mobile 手风琴显示“加号”

> ID：11195292
> 
> 赞同：0
> 
> 时间：2012-06-25T18:39:04.020
> 
> 标签：jquery, jquery-ui, jquery-mobile

我试图在非移动站点上使用 Jquery Mobile 1.1.0 可折叠 div，然后使用手风琴，这是一个响应式站点。

我以前在完全移动的网站上使用过它们，没有任何问题，但是这次“加号”这个词出现在加号上方，破坏了布局： ![截屏](../Images/fd4294aca180f810b388f01eab031212.png)

我已经包含了所有的 JS 和 CSS 文件。我的代码是文档页面中的基本内容：

```
<div data-role="collapsible">
    <h3>I'm a header</h3>
    <p>I'm the collapsible content. By default I'm closed, but you can click the header to open me.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:31:00.323

您的示例代码看起来不错，这也是您可能拥有的选项

*   [http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible-options.html](http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible-options.html)

JSF中：

*   [http://jsfiddle.net/EN6nD/](http://jsfiddle.net/EN6nD/)

HTML：

```
<div data-role="collapsible">
   <h3>I'm a header</h3>
   <p>I'm the collapsible content. By default I'm closed, but you can click the header to open me.</p>
</div>​ 
```

# c++ - 可变参数模板：迭代类型/模板参数

> ID：11195295
> 
> 赞同：6
> 
> 时间：2012-06-25T18:39:12.137
> 
> 标签：c++, linux, c++11, g++, libffi

我最近一直在使用[libffi](http://sourceware.org/libffi/)，并且由于它使用 C API，因此任何抽象都是通过使用 void 指针（好的 ol' C）来完成的。我正在创建一个使用此 API 的类（带有可变参数模板）。类声明如下：（其中`Ret`=返回值和`Args`=函数参数）

```
template <typename Ret, typename... Args>
class Function 
```

在这个类中，我还声明了两个不同的函数（简化）：

```
Ret Call(Args... args); // Calls the wrapped function
void CallbackBind(Ret * ret, void * args[]); // The libffi callback function (it's actually static...) 
```

我希望能够使用`Call`from `CallbackBind`; 这就是我的问题。我不知道我应该如何将`void*`数组转换为模板化参数列表。这或多或少是我想要的：

```
CallbackBind(Ret * ret, void * args[])
{
 // I want to somehow expand the array of void pointers and convert each
 // one of them to the corresponding template type/argument. The length
 // of the 'void*' vector equals sizeof...(Args) (variadic template argument count)

 // Cast each of one of the pointers to their original type
 *ret = Call(*((typeof(Args[0])*) args[0]), *((typeof(Args[1])*) args[1]), ... /* and so on */);
} 
```

如果这无法实现，是否有任何变通方法或不同的解决方案可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:45:28.737

你不想迭代类型，你想创建一个参数包并在可变参数模板中扩展它。你有一个数组，所以你想要的包是一组整数 0,1,2... 作为数组索引。

```
#include <redi/index_tuple.h>

template<typename Ret, typename... Args>
struct Function
{
  Ret (*wrapped_function)(Args...);

  template<unsigned... I>
  Ret dispatch(void* args[], redi::index_tuple<I...>)
  {
    return wrapped_function(*static_cast<Args*>(args[I])...);
  }

  void CallbackBind(Ret * ret, void * args[])
  {
    *ret = dispatch(args, to_index_tuple<Args...>());
  }
}; 
```

类似的东西，使用[index_tuple.h](http://gitorious.org/redistd/redistd/blobs/master/include/redi/index_tuple.h)

诀窍是 CallbackBind 创建一个`index_tuple`表示 arg 位置的整数，并分派给另一个函数，该函数推导出整数并将包扩展为转换表达式列表，以用作包装函数的参数。

# c++ - 转换到眼空间的问题

> ID：11195302
> 
> 赞同：1
> 
> 时间：2012-06-25T18:40:04.380
> 
> 标签：c++, glsl, shader, transformation, space

我一直在尝试将所有灯光都放入我正在使用的 GLSL 着色器的眼睛空间，但我错过了一些东西。我不知道我错过了什么。这是我的着色器代码，以防万一它导致问题......

```
varying vec3 normal, lightDir;

uniform vec3 lightPos;

//gl_Normal: Object Space
//gl_Vertex: Object Space
//lightDir: Eye Space

void main()
{
    vec4 vert;
    normal = gl_NormalMatrix * gl_Normal;
    vert = gl_ModelViewMatrix * gl_Vertex;
    lightDir = normalize(vec3(vec4(lightPos, 1.0) - vert));

    gl_Position = ftransform();
    gl_FrontColor = gl_Color;
} 
```

如果不是这样，那一定是我在变换光位CPU端的方式，所以这就是我正在做的......

```
eye = inverse(camera->climb(root));
glMultMatrixf(value_ptr(eye));
glUniform3fv(sLight, 1, value_ptr(vec3(eye * light->climb(root) * vec4()))); 
```

我的程序中的其他所有内容都运行良好，但是我在这里没有发现一些东西。注意：camera->climb(root) 在世界空间中产生摄像机场景节点的变换。light->climb(root) 产生世界空间中灯光场景节点的变换。

编辑：我遇到的确切症状是我的光总是出现在眼睛空间的原点（与相机位于同一位置）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:26:58.143

要从评论中移动答案：

您乘以得到灯光的眼睛空间位置的原点坐标应该是 vec4(0,0,0,1) 而不是 vec4(0,0,0,0)。

# django - 如何在 Django 的 shell 中删除具有给定用户的对象？

> ID：11195309
> 
> 赞同：1
> 
> 时间：2012-06-25T18:40:21.740
> 
> 标签：django, shell

> **可能重复：**
> [在管理员中获取“权限被拒绝”页面，而用户有权限](https://stackoverflow.com/questions/11186531/getting-permission-denied-page-in-the-admin-while-user-has-permission)

我遇到了[一些权限问题](https://stackoverflow.com/questions/11186531/getting-permission-denied-page-in-the-admin-while-user-has-permission)，所以我想看看 shell 发生了什么。

我可以用给定的用户启动 shell 吗？

或者我可以从 shell 中删除一个对象，就好像我使用给定用户连接到管理员一样？

基本上，当用户实际拥有权限时尝试删除对象时，我怎么能看到为什么我得到一个“权限被拒绝”的页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:47:08.277

权限仅由您的业务逻辑强制执行，因此在 shell 中使用普通的 Django ORM 语法将完全绕过任何限制。

查找元素将取决于它与 User 的关系，但假设 ForeignKey 称为`user`：

```
my_obj = MyObject.objects.filter(user__username='whatever') 
```

# ios - Phonegap/Cordova ... 拍照后删除临时文件系统

> ID：11195320
> 
> 赞同：2
> 
> 时间：2012-06-25T18:41:29.857
> 
> 标签：ios, image, cordova

我发现我在 iOS 上的 Phonegap/Cordova 应用程序正在保存我用相机拍摄的所有照片并将它们上传到服务器。

在“使用”点击下的 iPhone 设置中有我的应用程序，它需要的磁盘大小正在增加，即使在退出应用程序后也是如此。

那么，在将这些临时文件或图片本身上传到我的服务器后，我该如何删除呢？我使用图片URI 来定位它以进行上传。

**编辑：**谢谢。我已经实现了代码，现在它看起来像这样：

在我的文件上传功能中，我添加了这一行：

```
window.resolveLocalFileSystemURI(fileURI, onResolveSuccess, faillocal); 
```

其他功能如下：

```
function onResolveSuccess(fileEntry) {
  console.log(fileEntry.name);
  entry.remove(entrysuccess, failresolve);
}

function entrysuccess(entry) {
  console.log("Removal succeeded");
}

function failresolve(error) {
  alert('Error removing directory: ' + error.code);
}

function faillocal(evt) {
  console.log(evt.target.error.code);
} 
```

但它不起作用。文件已上传，但没有警报，没有控制台写入，根本没有删除......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T18:58:05.983

您应该能够获取图片 URI 并将其传递给[window.resolveLocalFileSystemURI](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#LocalFileSystem_resolve_local_file_system_uri_quick_example)，然后在此方法的成功回调中，您将获得一个[FileEntry](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#FileEntry)对象，您可以在该对象上调用[remove](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#FileEntry_remove)方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T05:16:52.977

我不确定该清理方法引入了哪个版本的 PhoneGap / Cordova，但它看起来可以满足您的需求，而且代码更少： http: [//docs.phonegap.com/en/2.2.0/cordova_camera_camera。 cleanup.md.html#camera.cleanup](http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.cleanup.md.html#camera.cleanup)

# php - 在 Netbeans 中运行单元测试时无法重新声明 phpunit_autoload

> ID：11195321
> 
> 赞同：2
> 
> 时间：2012-06-25T18:41:31.050
> 
> 标签：php, netbeans, phpunit

一年多以前，我通过 Microsoft Web Platform Installer 安装了 PHP。安装的 PHP 版本是 5.3.6。然后我通过 PEAR（版本 3.5.14）安装了 PPHUnit。我用它通过 Netbeans 运行我的单元测试，在我将 PHPUnit 升级到最新版本（3.6.11）之前它运行良好。从那时起，我不能再运行我的单元测试了。

当我查看 Netbeans 选项中的 PHPUnit 配置时，没有报告错误，并且 phpunit.bat 被很好地识别。这是 phpunit.bat 的内容：

```
set PHPBIN="C:\Program Files (x86)\PHP\v5.3\php.exe"
%PHPBIN% "C:\Program Files (x86)\PHP\v5.3\phpunit" %* 
```

但是当我尝试运行单元测试时，我在 Netbeans 的输出窗口中收到以下错误：

```
Fatal error: Cannot redeclare phpunit_autoload() (previously declared in C:\Program Files (x86)\PHP\v5.3\PEAR\PHPUnit\Autoload.php:51) in C:\Program Files (x86)\PHP\v5.3\PEAR\PHPUnit\Autoload.php on line 205
---
Call Stack:
    0.0003     323984   1\. {main}() C:\Program Files (x86)\PHP\v5.3\phpunit:0
    0.0055     731680   2\. PHPUnit_TextUI_Command::main() C:\Program Files (x86)\PHP\v5.3\phpunit:46
    0.0055     732096   3\. PHPUnit_TextUI_Command->run() C:\Program Files (x86)\PHP\v5.3\PEAR\PHPUnit\TextUI\Command.php:130
    0.0420    1218480   4\. PHPUnit_Runner_BaseTestRunner->getTest() C:\Program Files (x86)\PHP\v5.3\PEAR\PHPUnit\TextUI\Command.php:150
    0.0877    1596168   5\. ReflectionMethod->invoke() C:\Program Files (x86)\PHP\v5.3\PEAR\PHPUnit\Runner\BaseTestRunner.php:124
    0.0877    1596184   6\. NetBeansSuite::suite() C:\Program Files (x86)\PHP\v5.3\PEAR\PHPUnit\Runner\BaseTestRunner.php:124
    0.0893    1600944   7\. PHPUnit_Framework_TestSuite->addTestFile() D:\Program Files\NetBeans 7.1\php\phpunit\NetBeansSuite.php:85
    0.0893    1601408   8\. PHPUnit_Util_Fileloader::checkAndLoad() C:\Program Files (x86)\PHP\v5.3\PEAR\PHPUnit\Framework\TestSuite.php:358
    0.0898    1601504   9\. PHPUnit_Util_Fileloader::load() C:\Program Files (x86)\PHP\v5.3\PEAR\PHPUnit\Util\Fileloader.php:79
    0.1028    1633840  10\. include_once('D:\Inetpub\wwwroot\DTS\unit\UploadException.test.php') C:\Program Files (x86)\PHP\v5.3\PEAR\PHPUnit\Util\Fileloader.php:95 
```

转储 $_GET

* * *

自从出现这个问题以来，我已经卸载并重新安装了几次 PHPUnit，但并没有改善这种情况。Pear 本身也升级到了最新版本（1.9.4）。

有人知道如何摆脱这些错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:13:02.900

出于某种原因，它认为它需要重新加载`Autoload.php`。您可以尝试更改`require`在线 203`require_once`以查看它是否有帮助。如果我冒险猜测，那是因为您自己的代码自动加载器想要加载类似名称的东西，并且它与 PHPUnit 本身的自动加载器冲突。也许命名类，或者确保你的自动加载器在 PHPUnit 之前加载，可能会成功。我会认为这是一个错误。

# perl - 在 Perl 中打印固定列表的最佳方法（使用下划线而不是空格）

> ID：11195322
> 
> 赞同：2
> 
> 时间：2012-06-25T18:41:31.213
> 
> 标签：perl, format

我需要将数据库记录格式化为网络论坛可以正确显示的表格（使用 bbcode）。无论我使用哪种类型的格式化标签，有问题的论坛都不尊重空格，但确实有等宽字体，所以我需要用下划线替换所有空格，以保持所有内容对齐：

```
Field____Field____Field
Value____Value____Value
Value____Value____Value
Value____Value____Value
Value____Value____Value 
```

我研究了 Perl 格式和 printf，但我不知道如何使用这些方法将空格和制表符变为下划线。文本也有可变长度，所以我需要列也是可变的（不能硬编码固定值）。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:49:45.077

有点破解，但我会使用 sprintf 但我会用在这些值中找不到的另一个字符替换我的值中的空格（如〜）。这可以通过一个简单的正则表达式来完成。在 sprintf 之后，我将用下划线替换空格，并将值中的特殊字符替换回空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:44:58.200

你不需要任何高级的东西，你只需要用下划线替换空格：

```
my $str = "Field     Field     Field";
$str =~ tr/ /_/;
print $str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:51:01.770

如果您的字段中的值可能包含制表符（或其他类似空格的字符），您可能需要执行以下操作：

```
my $str = "Field     Field\tContinued     Field";
$str =~ s/\s/_/g;
print $str; 
```

# java - 从树中的聚类对象逐步绘制树状图的算法

> ID：11195326
> 
> 赞同：1
> 
> 时间：2012-06-25T18:41:49.623
> 
> 标签：java, recursion, tree, cluster-analysis, dendrogram

我想从我已经聚集并保存在（离开）树中的对象中绘制树状图。我在 Java 中的 Cluster 对象可以用这些图片来表示。每个叶子包含一个对象，每个节点包含其子节点之间的距离。

![http://i.stack.imgur.com/6nktv.png](../Images/a2ceb8ef58a48532a2408583031c51e7.png)

现在，我想逐步绘制一个树状图，所以首先应该绘制对象 1 和 2，然后应该将对象 3 添加到其中。然后 5 和 6 一起等......直到一切都连接起来。我已经拥有所有工具来轻松绘制它，但我找不到正确穿过树的有效方法。

这应该是示例中到目前为止的结果（编辑：有一个错误，从 5 到 6 的距离现在看起来小于从 3 到 1&2 的距离，但在我的示例中并非如此！）： ![http://i.stack.imgur.com/gecAF.png](../Images/c7e48ddd0fb3aade323e2fd7968a34b3.png)

有人对这种递归算法有一些提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:56:40.783

您首先渲染深度 - 您可能会发现您需要跟踪深度以使布局正常工作 - 还要注意您还必须绘制非终端注释（“*”在 3 之前绘制）

基本上

```
draw(node)
{
   if(hasleft) draw(left)
   if(hasright) draw(right)
   drawme()
} 
```

这确实假设一棵二叉树，但这就是您绘制的内容-由于布局问题，这将变得更加复杂-您真的想首先考虑从上到下绘制宽度，它使布局少了很多痛苦

# eclipse - 将 Open CSV 阅读器库添加到 GWT - 收到错误消息

> ID：11195327
> 
> 赞同：0
> 
> 时间：2012-06-25T18:41:54.873
> 
> 标签：eclipse, google-app-engine, gwt, jar, opencsv

我使用[这个](http://opencsv.sourceforge.net/#what-is-opencsv)库来解析我的 GWT 应用程序中的 CSV 文件。但是，它编译得很好，但我在控制台运行时遇到错误。

为了将它包含在我的 GWT 项目中，我还将 jar 文件复制到了我的 WEB-INF->lib 文件夹中。

然后我在 project-> rightclick->configurebuildpath 中添加了我的项目的路径...

但是现在我在运行应用程序时在控制台上看到了这些错误：

```
 [ERROR] Line 23: No source code is available for type au.com.bytecode.opencsv.CSVReader; did you forget to inherit a required module?
[ERROR] Line 71: No source code is available for type java.io.FileReader; did you forget to inherit a required module?
[ERROR] Line 74: No source code is available for type java.io.FileNotFoundException; did you forget to inherit a required module?
    [ERROR] Unable to load module entry point class cs310.client.Main (see associated exception for details)
    [ERROR] Failed to load module 'XXXX' from user agent 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5' at localhost:59443 
```

任何人都可以就我到底做错了什么以及如何让它发挥作用提供任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:00:20.950

作为浏览器应用程序的 GWT 应用程序无权访问本地文件系统，这就是 GWT[不模拟](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation#Package_java_io) `java.io.FileReader`和相关异常的原因（大多数`java.io.*`情况下）。如果库坚持文件系统访问，它将不适用于 GWT。

# .net - 如何在 .NET 程序集中存储目录结构？

> ID：11195329
> 
> 赞同：0
> 
> 时间：2012-06-25T18:41:55.480
> 
> 标签：.net, .net-4.0

我希望.NET 程序集有一个目录，其中包含文件和文件夹。原因是在运行时，这个文件/文件夹结构被创建到一个临时目录中。最佳做法是什么？

我是否应该将每个文件存储在一个资源中，并让某种 XML 文件将每个文件名映射到它应该被提取到的相对目录？

我应该制作一个 .zip 文件并将该 .zip 文件存储在资源中吗？（不过，在这种用法之外，我的程序集不需要解压缩库。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:44:20.303

编辑：好的，我没有意识到您需要文件以及目录结构。

老实说，将它全部嵌入到一个 zip 文件中似乎是最简单的方法。或者，您*可以*将每个文件分别包含在程序集中，并且*还*具有一个结构文件，例如：

```
<folder name="root">
  <file resource="Foo.Bar.File1" name="file.txt" />
  <folder name="child">
    <file resource="Foo.Bar.File2" name="foo.jpg" />
  </folder>
</folder> 
```

我认为这会有点混乱 - 特别是如果你有很多文件。如果只是一些，那也不会太糟糕...

# windows - Perl 和 Lucene……在 Windows 上？

> ID：11195333
> 
> 赞同：0
> 
> 时间：2012-06-25T18:42:34.897
> 
> 标签：windows, perl, solr, lucene, strawberry-perl

我知道这个神秘的模块缺少文档，但我正在运行 Strawberry Perl，并且很高兴能够安装它。我通常从命令行运行类似以下内容来获取模块：

```
cpan WWW::Selenium 
```

例如，获取 WWW::Selenium。然而当我跑步时

```
cpan Lucene 
```

我明白了这一切，而且因为我以前从未见过这种情况，所以我将矛头指向 Windows，因为它缺乏更好的线索：

```
C:\Users\PHJohnson\Desktop>cpan Lucene
CPAN: CPAN::SQLite loaded ok (v0.202)
Database was generated on Mon, 25 Jun 2012 18:28:43 GMT
Running install for module 'Lucene'
Running make for T/TB/TBUSCH/Lucene-0.18.tar.gz
CPAN: Digest::SHA loaded ok (v5.63)
CPAN: Compress::Zlib loaded ok (v2.042)
Checksum for C:\strawberry\cpan\sources\authors\id\T\TB\TBUSCH\Lucene-0.18.tar.gz ok
CPAN: Archive::Tar loaded ok (v1.80)
CPAN: File::Temp loaded ok (v0.22)
CPAN: Parse::CPAN::Meta loaded ok (v1.4401)
CPAN: CPAN::Meta loaded ok (v2.112621)

CPAN.pm: Building T/TB/TBUSCH/Lucene-0.18.tar.gz

couldn't find clucene config file at Makefile.PL line 34.
Warning: No success on command[C:\strawberry\perl\bin\perl.exe Makefile.PL]
TBUSCH/Lucene-0.18.tar.gz
C:\strawberry\perl\bin\perl.exe Makefile.PL -- NOT OK
Running make test
  Make had some problems, won't test
Running make install
  Make had some problems, won't install
Could not read metadata file. Falling back to other methods to determine prerequisites

C:\Users\PHJohnson\Desktop> 
```

我想知道，我该如何解决这个问题 - 我可以在 Windows 上获取 Lucene 库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:20:51.003

看，一些 Perl 模块只是一些库和/或系统工具的包装器，允许在 Perl 程序中自然地使用它们（使用熟悉的语法结构等）[。Lucene](https://metacpan.org/module/Lucene)的构建方式相同：它是 CLucene 索引库的包装器。

所以你有（和 Perl 一样经常）两种选择：要么尝试[从源代码](http://sourceforge.net/projects/clucene/)构建 CLucene （我说“尝试”，因为我真的不知道它是否可以在 Windows 上工作） - 或者寻找类似的解决方案，如[KinoSearch](https://metacpan.org/module/KinoSearch)（或其分支，[KinoSearch1](https://metacpan.org/module/KinoSearch1) - 两者都被评论者评为相当不错）和[Plucene](https://metacpan.org/module/Plucene)。后者实际上是 Lucene 搜索引擎的 Perl 端口，而不是任何类型的包装器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:54:49.537

查看 Makefile.PL，该模块不是为在 Windows 下工作而设计的，如果您查看“C:\Strawberry\cpan\build\”下的 Makefile.PL（在我的机器上），您应该会看到类似这样的内容行〜8：

```
## Hash that specifies for each OS all possible directories to look
## for CLucene/clucene-config.h
my $rh_include_dirs = {
     "linux"   => ["/usr/include",       "/usr/lib"], 
     "freebsd" => ["/usr/local/include", "/usr/local/lib"], 
     "darwin"  => ["/usr/local/include", "/usr/local/lib"],
}; 
```

您可以尝试使用在 Windows 中安装 Lucene 的路径添加另一个条目。

```
my $rh_include_dirs = {
     "linux"   => ["/usr/include",       "/usr/lib"], 
     "freebsd" => ["/usr/local/include", "/usr/local/lib"], 
     "darwin"  => ["/usr/local/include", "/usr/local/lib"],
     "MSWin32" => ["path to your lucene install"],
}; 
```

更新文件并保存后，您应该能够执行常规操作`perl Makefile.PL`，然后执行常规操作`make`和`make install`（或 Windows 上的 nmake）。`make`Makefile.PL 脚本将生成构建和安装包所需的文件。

我没有Lucene，所以我无法尝试...

# ios - Objective-C，PSD，化妆

> ID：11195337
> 
> 赞同：0
> 
> 时间：2012-06-25T18:42:57.790
> 
> 标签：ios, layout

有谁知道如何根据 psd 文件中的布局图像为 iphone 和 ipad 制作正确的图像和（UIlabel）标签位置。

我正在使用 Photoshop。我用尺子寻找句子中最高的字母（应该定位）并将其移动到 psd 图像的顶部，而不是取最左边的字母并将尺子向左移动。

然后我制作 ipad/iphone 屏幕截图并比较 psd 和 png 文件的 x,y。如果 psd x/y 大于 png x/yi，则执行以下步骤：Xpsd - Xpng，Ypsd - Ypsd，如果 psd 的坐标小于 png，则生成 Xpsd + Xpng，Ypsd + Ypsd。

最后我在 ipad/iphone 中的视觉位置错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:48:55.483

给定元素的视觉位置/尺寸与您认为应有的不匹配的最常见原因通常是应用于相关特定视图的自动调整大小掩码。

例如，您`UILabel`应该将其自动调整大小掩码设置为：

```
label.autoResizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleRightMargin; 
```

这将使您的标签与左上角对齐，并且不允许其高度或宽度根据超级视图的大小变化而改变。

这也可以在界面生成器中使用这些控件进行设置：

![在此处输入图像描述](../Images/96304966bc275faef6782398912329c6.png)

外线与边距大小匹配，如果它是红色实线，则意味着随着父视图大小的变化，当前视图相对于这些边缘的位置将被保留。

内线表示灵活的宽度和高度。如果是实线，则表示当前视图将调整大小以保持与父视图大小相同的比例。

# ios - TableView 日期部分标题

> ID：11195338
> 
> 赞同：0
> 
> 时间：2012-06-25T18:43:11.753
> 
> 标签：ios, core-data, nsdate, tableview, uitableview

我的应用程序类似于日志。我保留了一天内发生的事件的证据。基本上，我有一个带有“日期”属性的实体（显示在表格视图上）。当我保存一个新事件时，使用 [NSDate date] 存储当前日期。如何组织表格视图，以便所有事件按天排序并显示？任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:57:38.630

您应该使用您的`sectionNameKeyPath`参数`NSFetchedResultsController`按日期划分结果。

[这里](https://stackoverflow.com/questions/4418703/a-nsfetchedresultscontroller-with-date-as-sectionnamekeypath)和[这里](https://stackoverflow.com/questions/1741093/how-to-use-the-first-character-as-a-section-name)的例子很少。

您基本上将要用作 sectionNameKeyPath 参数的属性设置为如下所示：

```
fetchedResultsController = [[NSFetchedResultsController alloc]
                            initWithFetchRequest:fetchRequest
                            managedObjectContext:managedObjectContext
                              sectionNameKeyPath:@"date"
                                       cacheName:nil]; 
```

然后您的数据源委托代码将如下所示：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [[fetchedResultsController sections] count];
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    return [fetchedResultsController sectionIndexTitles];
}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index {
    return [fetchedResultsController sectionForSectionIndexTitle:title atIndex:index];
} 
```

**编辑：**为了仅按天对项目进行分组，您需要为托管对象创建一个临时属性 - 本质上是一个从实际日期派生的日期字符串。

这些像往常一样位于您的 .h / .m 的顶部

```
@property (nonatomic, strong) NSString *sectionTitle;

@synthesize sectionTitle; 
```

现在您已经创建了该属性，您想要覆盖它的访问器以在请求时实际设置标题。

```
-(NSString *)sectionTitle
{
   [self willAccessValueForKey:@"date"];
    NSString *temp = sectionTitle;
   [self didAccessValueForKey:@"date"];

   if(!temp)
   {
      NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
      [formatter setDateFormat:@"d MMMM yyyy"]; // format your section titles however you want
      temp = [formatter stringFromDate:date];
      sectionTitle = temp;
   }
   return temp;
} 
```

请注意，此代码实际上检查 sectionTitle 是否已被缓存，并且只是重新使用它而不重新创建它。如果您期望或允许更改过去对象的日期，则 sectionTitle 也需要更新，如果是这种情况，您还需要覆盖日期本身的 mutator，并添加一行以清除sectionTitle（以便下次请求标题时，将重新创建它）。

```
- (void)setDate:(NSDate *)newDate {

    // If the date changes, the cached section identifier becomes invalid.
    [self willChangeValueForKey:@"date"];
    [self setPrimitiveTimeStamp:newDate];
    [self didChangeValueForKey:@"date"];

    [self setSectionTitle:nil];
} 
```

最后，您应该将`sectionNameKeyPath`for your `fetchedResultsController`to更改为`@"sectionTitle"`.

Apple 有一个[示例项目](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Listings/Classes_Event_m.html#//apple_ref/doc/uid/DTS40009939-Classes_Event_m-DontLinkElementID_6)，如果您想看到类似的操作，您可以查看。

# linux - GIT 签名标签和密码

> ID：11195343
> 
> 赞同：4
> 
> 时间：2012-06-25T18:43:45.683
> 
> 标签：linux, git, gnupg, git-sign

当我签署标签时，如何让 git 自动输入我的密码。有没有像 -- passphrase "my long passphrase" 这样的选项，我确实尝试过使用 ssh-keygen 但它没有帮助。

存储库在本地，一切都在本地完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:06:24.197

正如 mipadi 所说，正在请求的是您的 GPG 密钥密码。正如您所建议的那样，您*真的*不希望在命令行上使用它，因为这可能会使其对其他用户可见，从而损害您的安全性。知道了这一点，gpg 和 git 的创建者不会让你这样自取其辱。当然，这会引发一个问题，即如何以自动方式执行此操作，这样您就不会因为输入密码一百次而丧命。

对此`gpg-agent`非常有用。您可能需要将它与 gpg 分开安装（例如，在 Ubuntu 上，您需要 package `gnupg-agent`）。然后确保`~/.gnupg/gpg.conf`包含该行（未注释）：

```
use-agent 
```

安装 gpg-agent 后，您的系统可能会自动为您调用它。如果定义了环境变量`GPG_AGENT_INFO`，那么您就可以开始了。否则，启动代理：

```
eval $(gpg-agent --daemon --sh) 
```

（这适用于 bash；根据其他 shell 的需要进行调整。）

现在，当您需要解锁 GPG 密钥时，您应该会看到一个弹出窗口（或其他方法）供您输入密码。输入后，您无需再次输入，因为所有其他请求都将发送给已解锁您的密钥的代理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:35:40.767

系统要求您提供 GPG 钥匙串密码，而不是 SSH 密码。输入比代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T01:44:58.077

如果有人感兴趣，我确实找到了解决问题的方法。

1.使用此内容创建新的 /usr/bin/gpg-with-passphrase

```
/usr/bin/gpg   --passphrase "My Really Long passphrase"  --batch --no-tty "$@" 
```

2.使新的 /usr/bin/gpg-with-passphrase 可执行

```
chmod 755 /usr/bin/gpg-with-passphrase 
```

3.将此选项添加到 git config

```
git config gpg.program "/usr/bin/gpg-with-passphrase" 
```

使用“--global”表示全局

这样我每次签署标签时都不必输入我的长密码。

# javascript - JavaScript 中类似 Eclipse 的 UI（带有视图、组等）

> ID：11195346
> 
> 赞同：2
> 
> 时间：2012-06-25T18:43:54.750
> 
> 标签：javascript, eclipse, user-interface

我正在寻找一个 JavaScript 库，它支持类似于 Eclipse IDE 中的工作区的 UI 交互，即允许用户

*   将屏幕拆分为包含多个视图的不同视图组
*   能够调整这些组的大小
*   通过拖放创建新组
*   在组之间移动视图
*   最小化/最大化视图

视图和初始工作区设置应由开发人员预定义。虽然我可以使用 JQuery UI 设置初始布局和视图，但我想启用这些交互，以便用户可以自定义他们的工作区。这与问题的思路一致，[是否有一个 JavaScript / Jquery 组件可以像在 Eclipse 中一样创建一个工作区？](https://stackoverflow.com/questions/11153099/is-there-a-javascript-jquery-component-which-creates-a-workspace-like-in-eclip)

是否有一个 JavaScript 库/框架提供所有这些开箱即用的交互（这样我只需要提供视图，而不是实现工作区本身 - 类似于 Eclipse RCP）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:53:21.387

请看一下 ExtJS，它包含构建此类东西所需的所有组件。这是一个具有不同可调整大小窗口的示例：http: [//dev.sencha.com/deploy/ext-4.1.0-gpl/examples/portal/portal.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/portal/portal.html)

请注意，ExtJS 是一种企业产品，可能不是您的最佳选择，具体取决于您要构建的内容。

ExtJS 4.1 演示：[http](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/#sample-16) : //dev.sencha.com/deploy/ext-4.1.0-gpl/examples/#sample-16 EXtJS KitchenSink：[http ://dev.sencha.com/deploy/ext-4.1.0 -gpl/examples/kitchensink/index.html#basic-panel](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/kitchensink/index.html#basic-panel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:04:48.643

您可能对[RAP](http://www.eclipse.org/rap/)感兴趣。

# firefox - IIS 7.5 express 为 FireFox 返回 404（适用于 IE 和 Chrome）

> ID：11195348
> 
> 赞同：0
> 
> 时间：2012-06-25T18:44:17.510
> 
> 标签：firefox, iis-7.5, http-status-code-404

我无法在 FireFox 中访问我的 IIS 7.5 express 站点，但我可以在 IE 和 Chrome 中访问它。该站点为几乎所有目录返回 404 错误。

这是来自 Firefox 请求的日志

```
2012-06-25 18:30:38.834 127.0.0.1 "-" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET / - 401 -2147024891 6423 274 15 8080 "Mozilla/5.0 (Windows NT 5.1; rv:13.0) Gecko/20100101 Firefox/13.0.1" "-" "-" "-" "localhost:8080" 2
2012-06-25 18:30:38.834 127.0.0.1 "-" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET / - 401 -2146893042 6927 352 0 8080 "Mozilla/5.0 (Windows NT 5.1; rv:13.0) Gecko/20100101 Firefox/13.0.1" "-" "-" "-" "localhost:8080" 1
2012-06-25 18:30:38.850 127.0.0.1 "DOMAIN\USERNAME" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET / - 404 -2147024894 5250 516 15 8080 "Mozilla/5.0 (Windows NT 5.1; rv:13.0) Gecko/20100101 Firefox/13.0.1" "-" "-" "-" "localhost:8080" 0 
```

这是 Chrome 请求

```
2012-06-25 18:30:56.908 127.0.0.1 "-" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET / - 401 -2147024891 6399 457 0 8080 "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" "ASP.NET_SessionId=obkmwr5elb3iruk0gykhup1i" "-" "-" "localhost:8080" 2
2012-06-25 18:30:58.408 127.0.0.1 "-" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET / - 401 -2146893042 6903 560 0 8080 "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" "ASP.NET_SessionId=obkmwr5elb3iruk0gykhup1i" "-" "-" "localhost:8080" 1
2012-06-25 18:30:58.502 127.0.0.1 "DOMAIN\USERNAME" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET /default.aspx - 200 0 1728 580 15 8080 "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" "ASP.NET_SessionId=obkmwr5elb3iruk0gykhup1i" "-" "-" "localhost:8080" 0
2012-06-25 18:30:58.502 127.0.0.1 "DOMAIN\USERNAME" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET / - 200 0 1728 580 93 8080 "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" "ASP.NET_SessionId=obkmwr5elb3iruk0gykhup1i" "-" "-" "localhost:8080" 0
2012-06-25 18:30:58.517 127.0.0.1 "-" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET /Scripts/jquery-1.5.js - 401 -2147024891 6470 451 0 8080 "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" "ASP.NET_SessionId=obkmwr5elb3iruk0gykhup1i" "http://localhost:8080/" "-" "localhost:8080" 2
2012-06-25 18:30:58.533 127.0.0.1 "-" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET /Scripts/jquery-1.5.js - 401 -2146893042 6974 554 15 8080 "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" "ASP.NET_SessionId=obkmwr5elb3iruk0gykhup1i" "http://localhost:8080/" "-" "localhost:8080" 1
2012-06-25 18:30:58.548 127.0.0.1 "DOMAIN\USERNAME" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET /Scripts/jquery-1.5.js - 404 -2147024894 5302 574 15 8080 "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" "ASP.NET_SessionId=obkmwr5elb3iruk0gykhup1i" "http://localhost:8080/" "-" "localhost:8080" 0
2012-06-25 18:30:58.564 127.0.0.1 "DOMAIN\USERNAME" "GARY-LOCAL-DEV" "-" 127.0.0.1 GET /Styles/Woodlands.css - 304 0 308 551 46 8080 "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" "ASP.NET_SessionId=obkmwr5elb3iruk0gykhup1i" "http://localhost:8080/" "-" "localhost:8080" 0 
```

我为服务器打开了 Windows NTLM 身份验证，因为这是 Intranet 站点的开发人员。上周这确实工作得很好，但我今天早上注意到了一个 FireFox 更新。如果该更新是原因或红鲱鱼的任何想法，以及关于在哪里寻找修复的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:26:15.387

只是让我眼前一亮的第一件事：您有 Chrome 请求的会话 ID，但没有 Firefox 请求的会话 ID。

我猜 Firefox 更新只是简单地清除了您的会话 cookie，因此有所不同。如果我是对的，在清除会话 cookie 后，问题可以在任何浏览器中重现。

# php - 隐藏 MP3 完整网址

> ID：11195354
> 
> 赞同：5
> 
> 时间：2012-06-25T18:45:02.957
> 
> 标签：php, hide, mp3, audio-player

我有一个音乐播放器，它使用以下语法链接到一首歌曲：

```
<li><a href="" data-src="http://s3.amazonaws.com/audiojs/02-juicy-r.mp3">title</a></li> 
```

有什么方法可以让我执行服务器端然后为用户显示（见下文）？

在搜索时，我遇到了这个......我喜欢拥有一个包含数据的外部文件背后的想法......比如：

```
<?php
// get-file.php
// call with: http://yoururl.com/path/get-file.php?id=1
$id = (isset($_GET["id"])) ? strval($_GET["id"]) : "1";
// lookup
$url[1] = 'link.mp3';
$url[2] = 'link2.mp3';
header("Location: $url[$id]");
exit;
?> 
```

然后使用：http: [//yoururl.com/path/get-file.php](http://yoururl.com/path/get-file.php?id=1) ?id=1作为链接...唯一的问题是当您键入[http://yoururl.com/path/get-file 时。 php?id=1](http://yoururl.com/path/get-file.php?id=1)用户直接进入文件...有什么方法可以禁用该功能...可能是 get-file.php 本身的一些代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T23:05:29.400

好的，所以我做了一些我满意的事情......虽然不是完全安全，但它确实帮助我掩盖了它。

首先，我使用 AudioJS 播放器播放音乐 - 可以找到： http: [//kolber.github.com/audiojs/](http://kolber.github.com/audiojs/)

基本上我所做的是：

1.  我没有使用“data-src”作为我的歌曲的路径，而是将其称为“key”，这样人们就不一定会认为这是一条路径。
2.  我没有使用“my-song-title”作为歌曲的名称，而是将其更改为 7364920 之类的数字，这样人们就无法在源中查找它并以这种方式找到 URL。
3.  在所有“关键”变量之后，我在 javascript 代码中添加了 +“mp3”，这样我就不必在模糊链接中声明它。
4.  我使用了像“./8273019283/”这样的相对路径而不是“your-domain.com/8273019283/”，这样就很难判断我正在显示一个网址。
5.  向 href 添加了一个 iTunes 链接，这样人们可能会对我如何提取文件感到困惑。

所以，现在我的内联 javascript 看起来像：

```
<script type="text/javascript">
        $(function() {
            // Play entire album
            var a = audiojs.createAll({
                trackEnded: function() {
                    var next = $("ul li.playing").next();
                    if (!next.length) next = $("ul li").first();
                    next.addClass("playing").siblings().removeClass("playing");
                    audio.load($("a", next).attr("key") + "mp3");
                    audio.play();
                }
            });
            // Load the first song
            var audio = a[0];
            first = $("ul a").attr("key") + "mp3";
            $("ul li").first().addClass("playing");
            audio.load(first);
            // Load when clicked
            $("ul li").click(function(e) {
                e.preventDefault();
                $(this).addClass("playing").siblings().removeClass("playing");
                audio.load($('a', this).attr('key') + "mp3");
                audio.play();
            });
        });
    </script> 
```

我的链接看起来像：

```
<a href="<?php $link = 'http://itunes.apple.com/us/album/falling/id504779876?i=504779883&uo=4'; $obfuscatedLink = ""; for ($i=0; $i<strlen($link); $i++){ $obfuscatedLink .= "&#" . ord($link[$i]) . ";"; } echo $obfuscatedLink; ?>" target="itunes_store" key="<?php $link = './8249795872/9273847591.'; $obfuscatedLink = ""; for ($i=0; $i<strlen($link); $i++){ $obfuscatedLink .= "&#" . ord($link[$i]) . ";"; } echo $obfuscatedLink; ?>">Falling</a> 
```

当您在浏览器中加载它并查看源代码时，您会看到：

```
<a href="&#104;&#116;&#116;&#112;&#58;&#47;&#47;&#105;&#116;&#117;&#110;&#101;&#115;&#46;&#97;&#112;&#112;&#108;&#101;&#46;&#99;&#111;&#109;&#47;&#117;&#115;&#47;&#97;&#108;&#98;&#117;&#109;&#47;&#102;&#97;&#108;&#108;&#105;&#110;&#103;&#47;&#105;&#100;&#53;&#48;&#52;&#55;&#55;&#57;&#56;&#55;&#54;&#63;&#105;&#61;&#53;&#48;&#52;&#55;&#55;&#57;&#56;&#56;&#51;&#38;&#117;&#111;&#61;&#52;" target="itunes_store" key="&#46;&#47;&#56;&#50;&#52;&#57;&#55;&#57;&#53;&#56;&#55;&#50;&#47;&#57;&#50;&#55;&#51;&#56;&#52;&#55;&#53;&#57;&#49;&#46;">Falling</a> 
```

然后，当您使用 Web Inspector 或 Firebug 时，您会看到：

```
<a href="http://itunes.apple.com/us/album/falling/id504779876?i=504779883&amp;uo=4" target="itunes_store" key="./8249795872/9273847591.">Falling</a> - *which doesn't completely give the url away 
```

基本上我所做的就是让链接看起来像是某种 api-key。很酷的是，您不能直接从查看源代码或直接从 Web Inspector/Firebug 复制链接。它不是万无一失的，而且绝对可以被打破，但用户必须知道他们在做什么。它让大多数人远离，但仍然允许播放器获取播放歌曲所需的 url :)

*另外，我从 Stack Exchange 的某个地方获得了 php 混淆脚本，只是不确定在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:58:52.123

无需进行标头重定向，而是添加适当的标头并将音频文件包含在您的 PHP 代码中。然后，在您的 .htaccess 文件中，您可以禁止访问您的音频文件所在的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:47:18.977

不，这是不可能的，因为它是浏览器解释 HTML 以使页面正常工作。因此，如果客户端（浏览器）不知道 mp3 来自哪里，那么它将无法使用。

另一方面，如果您想通过单击链接让音乐切换歌曲，那么我建议您查看一些工具，例如[http://jplayer.org/](http://jplayer.org/)

编辑：可能阻止直接访问文件本身的唯一方法是读取文件而不是从脚本链接到它。例如，在我的图像托管站点[http://www.tinyuploads.com/images/CVN5Qm.jpg](http://www.tinyuploads.com/images/CVN5Qm.jpg)上，如果您要查看我服务器上的实际文件路径，则文件 CVN5Qm.jpg 从 public_html 文件夹中看不到. 无法直接访问该文件。我使用数据库获取图像 ID，查找它的存储位置，然后将其 readfile() 写入脚本并显示正确的标题以输出图像。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T19:02:50.827

如果您使用的是 amazon s3 服务，则可以为您的文件使用签名 url。这会更安全，因为您必须是签名用户，而且 url 也可以过期。读[这个](http://www.bucketexplorer.com/documentation/amazon-s3--how-to-generate-url-for-amazon-s3-file.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-23T10:32:36.610

我使用 http_referer，我可以控制链接的过程

```
<?php
// key.php
// call with: http://yoururl.com/path/key.php?id=1
$page_refer=$_SERVER['HTTP_REFERER'];

if ($page_refer=="http://www.yourdomine.com/path/page.html")
    {
    $id = (isset($_GET["id"])) ? strval($_GET["id"]) : "1";
    // lookup
    $url[1] = 'link1.mp3';
    $url[2] = 'link2.mp3';
    header("Location: $url[$id]");
    exit;
    }
else
    {
    exit;
    }
?> 
```

# java - 如果我们在调用函数中有@Transaction，被调用函数是否仍处于事务中？

> ID：11195355
> 
> 赞同：0
> 
> 时间：2012-06-25T18:45:07.373
> 
> 标签：java, spring, transactions

我知道我们需要使@Transactional 边界尽可能短。这是代码：

我通过 Spring 依赖注入使用 userDAO 对象：

```
private static ApplicationContext context ;
private UserDAO userDAO;

public TransactionsTest() {
    userDAO = (UserDAO) context.getBean("userDAO");
} 
```

我`testSaveUserAccounts()`从`TransactionsTest`课堂上打电话，试图使用 userDAO 插入/更新数据。

情况1：

```
@Transactional
public void testSaveUserAccounts() {
    UserAccounts userAccounts = new UserAccounts();
    userAccounts.setCommunityId(10L);
    userDAO.saveObject(userAccounts);
}

// This method is inside UserDAO
        public void saveObject(Object object) {
        entityManager.merge(object);
    } 
```

案例二：

```
@Transactional
public void testSaveUserAccounts() {
    UserAccounts userAccounts = new UserAccounts(); 
    userAccounts.setCommunityId(10L);
    userDAO.saveObject(userAccounts);
}

// This method is inside UserDAO
    @Transactional(propagation=Propagation.REQUIRED)
    public void saveObject(Object object) {
        entityManager.merge(object);
    } 
```

弹簧上下文：

```
 <tx:annotation-driven transaction-manager="transactionManager" />

        <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
            <property name="entityManagerFactory" ref="entityManagerFactory" />
        </bean>

        <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

        <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
            <property name="dataSource" ref="dataSourceLocal" />
            <property name="jpaVendorAdapter">
                <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
            </property>
            <property name="persistenceUnitName" value="spring-jpa" />
      </bean> 
```

用户道：

```
@Repository
public class UserDAO extends BaseDAO {

    @Transactional(propagation=Propagation.REQUIRED)
    public void saveObject(Object object) {
        entityManager.merge(object);
    }

} 
```

BaseDAO：

```
public abstract class BaseDAO {

    protected EntityManager entityManager;
    protected HashMap<String,Long>  eventIdMap = new HashMap<String,Long>();

    @PersistenceContext
    public void setEntityManager(EntityManager entityManager) {
        this. entityManager = entityManager;
    }

    public <T> T getById(final Class<T> clazz, final Serializable id) {
        T object = clazz.cast(entityManager.find(clazz, id));
        return object;
    }

    @Transactional
    public Object save(Object ob) {
        Object object = entityManager.merge(ob);
        return object;
    }

    @Transactional
    public void persist(Object ob) {
        entityManager.persist(ob);
    }

    @SuppressWarnings("unchecked")
    public <T>  ArrayList<T> getAll(final Class<T> clazz) {
        String hqlQuery = "from "+ clazz.getSimpleName();
        ArrayList<T> list  = (ArrayList<T>)entityManager.createQuery(hqlQuery).getResultList();
        return list;
    }

} 
```

我一直在围绕几个事务边界进行试验，`REQUIRED`但无法自信地弄清楚为什么案例 1（当调用方法 2 时，它在方法 1 的事务边界内）不合并数据，而这在案例中得到了解决2.`REQUIRES_NEW``SUPPORTS`

当我已经在事务边界内标记了调用函数时，为什么我还需要在内部方法中指定 @Transactional ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:24:39.203

您的事务测试类不是 Spring Bean，这就是案例 1 不起作用的原因。Spring 需要检测一个方法上是否有 @Transactional，并且当 spring 将 bean 注册到 spring bean 工厂时它会这样做。

还要记住，如果您在同一个 bean 中执行基于代理的 AOP 调用，事务方面不会捕获到，除非您使用 AspectJ 加载时间编织或 AspectJ 编译时间编织。

将@Transactional 放在你的Dao 上也不是一个好主意，因为事务边界最好在服务层标记。原因是特定的服务方法可能需要与多个 Dao 进行交互，并且您希望这些 Dao 的操作成为服务层启动的 tx 的一部分，而不是必须分析 Dao 以查看传播行为是什么。

您可以发布测试类的完整代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:52:26.363

@Transactional 在本地什么都不做，它只有在从不同的服务调用时才会起作用。换句话说，您必须保留当前上下文，以便事务注释执行任何操作。因此在两种情况下调用方法 1 是相同的，情况 2 仅在从另一个服务调用方法 2 时才执行任何操作。

# netbeans - Java：将“this”关键字与枚举属性结合使用会产生错误，并且可以在没有更改的情况下编译良好。这是一个错误吗？

> ID：11195357
> 
> 赞同：0
> 
> 时间：2012-06-25T18:45:15.530
> 
> 标签：netbeans, enums, this

对于不知道如何更好地陈述这个问题，我提前道歉。

在下面的程序中，如果我在 NetBeans 中运行它会出错。它使用枚举，当我使用“this”关键字时，它似乎不喜欢它。代码：

```
enum moreEnum{
   JOHN(10,"nice"),
   TONY(20,"cool");

   String desc;
   int myNum;

   moreEnum (int a, String desc){  
       myNum = a;
       this.desc = desc;  
   }

   public String getDesc(){
       return desc;
   }

   public static void main (String [] args){
       System.out.printf("%s \t %s \n", moreEnum.JOHN, moreEnum.JOHN.desc);
       System.out.printf("getDesc() method - %s", moreEnum.JOHN.getDesc());
   }
} 
```

当我运行它时，我会得到这个错误：

```
java.lang.VerifyError: Constructor must call super() or this() before return in method moreEnum.<init>(Ljava/lang/String;ILjava/lang/String;)V at offset 0
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getMethod0(Class.java:2685)
    at java.lang.Class.getMethod(Class.java:1620)
    at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:488)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:480)
        Exception in thread "main" Java Result: 1 
```

如果我改变线的位置： this.desc = desc; 到 myNum = a 的正上方；，然后它会运行良好。如果我把 this.desc = desc; 回到我移动它的地方（使程序*与*我第一次运行它的方式相同），我将不再有错误。如果我然后将“desc”变量更改为其他任何内容，我将再次收到错误，并且可以通过切换“this”行的位置来解决它，运行它没有错误，然后将它切换回来然后它'会运行良好。

我想我的问题是真的，“发生了什么事？！” 这是枚举问题吗？'这个问题？还是 NetBeans 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:55:10.333

这可能是 Netbeans 的缓存问题？不幸的是，我无法在 Eclipse (JDK 1.7) 中重现这一点。也许在编译/运行之前尝试清理项目？

# arrays - 不透明度的像素堆栈（传递对象与传递字符串和解析）

> ID：11195359
> 
> 赞同：0
> 
> 时间：2012-06-25T18:45:18.327
> 
> 标签：arrays, parsing, stack, queue, unity3d

我有一个我一直在研究的绘画程序，并且我已经开始解决不透明度问题。我现在将背景颜色与画笔颜色进行比较，根据它们的 alpha 对两者进行平均，然后设置一个新像素。我只需要将我正在绘制的部分缓存到一边，这样它就不会在鼠标按下时连续采样不断变化的内容。我想我可以通过将 50 个像素扔到一个堆栈或队列中来解决这个问题，一旦它满了就开始改变屏幕上的像素，并在鼠标抬起时将所有内容完全清空到屏幕上。我想知道什么会更有效，两个堆栈（一个坐标和一个颜色）或一堆我解析为坐标和颜色的字符串。TLDR：更有效率的是，两个不同数据类型的堆栈，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T19:15:28.923

您的问题似乎比需要的更长，更令人困惑，但我认为您要问的是：

> 我正在设计一个绘画程序。如果用户在白色背景上绘制 50% 不透明的黑色像素，我希望它们显示为灰色。我的问题是，如果用户绘制一条与自身相交的曲线，或者只是将鼠标光标留在同一位置一段时间，重复的像素会变得越来越暗：50% 黑色，然后是 75%，然后是 87.5%...我不想要这个。只要按下鼠标按钮，任何像素都不应被“绘制”两次，无论曲线与自身相交多少次。

这个问题自己回答。防止像素被绘制两次的唯一方法是跟踪自上次鼠标按钮打开以来已绘制了哪些像素。代替

```
image[mouse.x][mouse.y] = alpha_average(image[mouse.x][mouse.y], current_color, current_alpha); 
```

和

```
if (not already_painted[mouse.x][mouse.y]) {
    image[mouse.x][mouse.y] = alpha_average(image[mouse.x][mouse.y], current_color, current_alpha);
    already_painted[mouse.x][mouse.y] = true;
}

handle(mouse_up) {
    already_painted[*][*] = false;
} 
```

问题解决了，对吧？

但是要回答另一个隐含的问题：如果您试图在[一堆并行数组](http://en.wikipedia.org/wiki/Parallel_array)和[一堆填充到 strings 中的数据](http://google.com/search?q=everything+is+a+string)之间进行选择，那么您可能做错了。所有 Unity3D 语言（Python、C#、Javascript）都支持 struct/class/dict 类型*和*元组，其中任何一个都比并行数组或一切都是字符串主义更好。

# c++ - 如何使用在源文件中的头文件中声明的全局变量？

> ID：11195360
> 
> 赞同：2
> 
> 时间：2012-06-25T18:45:18.400
> 
> 标签：c++

我正在为 HP-UX 和 Linux 编写一个跨平台的 C++ 应用程序。我想知道如何在文件 3 内的文件 1 中使用声明的 const char * 变量而不会弹出以下错误：

```
/usr/ccs/bin/ld: Duplicate symbol "OPERATING_SYSTEM" in files smac_dictionary.o and smac_dsl_parser.o
/usr/ccs/bin/ld: Found 1 duplicate symbol(s)
gmake: *** [smac_dsl_parser] Error 1 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:48:48.597

**[编辑1]**

看到对#define 的引用。他的意思是，在你的头文件中这样做（myDeclare.h）：

```
#ifndef __YOURNAMEHERE__
#define __YOURNAMEHERE__

// All of your declarations here
extern const char * myVar[6];

#endif 
```

在 myDeclare.c 或 cpp

```
const char * myVar[6] = {'a', 'b', 'c', 'd', 'e', 'f'}; 
```

现在您应该可以在任何地方包含 myDeclare.h，并且编译只会尝试引入您的变量或代码一次。

**[原创]** 我一直能够通过在头文件中的声明上使用关键字 extern 来做到这一点，然后在我的 c 源文件中真正“定义”变量。

即使您必须从多个源文件（即 header1.h 包含在 source1.c、source2.c 和 source3.c 中）引用同一个变量，这也应该有效。

这也是您在 C++ 中执行此操作的方式（即使我的示例引用 .c 文件而不是 cpp 文件）

# c++ - 基成员函数的所有重载都可以被单个模板化成员函数覆盖和转发吗？

> ID：11195361
> 
> 赞同：1
> 
> 时间：2012-06-25T18:45:20.010
> 
> 标签：c++, c++11, variadic-templates

我正在尝试创建一个模板包装类，该类继承自其模板参数，并一次性覆盖特定基成员函数的所有重载。这是一个例子：

```
#include <cassert>
#include <string>   
#include <utility>

template <class T>
class Wrapper: public T {
public:
  template <typename... Args>
  Wrapper<T>& operator=(Args&&... args) {
    return this_member_fn(&T::operator=, std::forward<Args>(args)...);
  }

private:
  template <typename... Args>
  Wrapper<T>& this_member_fn(T& (T::*func)(Args...), Args&&... args) {
    (this->*func)(std::forward<Args>(args)...);
    return *this;
  }   
};

int main(int, char**) {
  Wrapper<std::string> w;
  const std::string s("!!!");
  w = s;
  assert(w == s);
  w = std::string("???");
  assert(w == std::string("???"));
  return 0;
} 
```

这个想法是模板`Wrapper<T>::operator=`将在编译时根据其参数选择正确的 T::operator=，然后转发这些参数。如果我用

```
gcc -std=c++11 -W -Wall -Wextra -pedantic test.cpp -lstdc++ 
```

我从 gcc 收到以下投诉：

```
test.cpp: In instantiation of ‘Wrapper<T>& Wrapper<T>::operator=(Args&& ...) [with Args = {std::basic_string<char, std::char_traits<char>, std::allocator<char> >}; T = std::basic_string<char>]’:
test.cpp:26:24:   required from here
test.cpp:10:69: error: no matching function for call to ‘Wrapper<std::basic_string<char> >::this_member_fn(<unresolved overloaded function type>, std::basic_string<char>)’
test.cpp:10:69: note: candidate is:
test.cpp:15:15: note: Wrapper<T>& Wrapper<T>::this_member_fn(T& (T::*)(Args ...), Args&& ...) [with Args = {std::basic_string<char, std::char_traits<char>, std::allocator<char> >}; T = std::basic_string<char>]
test.cpp:15:15: note:   no known conversion for argument 1 from ‘&lt;unresolved overloaded function type>’ to ‘std::basic_string<char>& (std::basic_string<char>::*)(std::basic_string<char>)’
test.cpp: In member function ‘Wrapper<T>& Wrapper<T>::operator=(Args&& ...) [with Args = {std::basic_string<char, std::char_traits<char>, std::allocator<char> >}; T = std::basic_string<char>]’:
test.cpp:11:3: warning: control reaches end of non-void function [-Wreturn-type] 
```

第 26`w = std::string("???");`行是第 15 行是 this_member_fn 的声明，所以编译器认为`func`(= `std::string::operator=`) 的类型似乎不是它所期望的类型。

Is there a way to do this using a templated `operator=` like I am, rather than overriding each `operator=` in the base class individually?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:05:33.140

There's no need to take the address of a member if you intend to use it on the spot. This spares you the problem of finding which overloaded version to pick, too.

```
template<
    typename U
    , typename std::enable_if<
        std::is_assignable<T&, U>::value
        , int
    >::type = 0
>
Wrapper& operator=(U&& u)
{
    static_cast<T&>(*this) = std::forward<U>(u);
    return *this;
} 
```

The constraint (the SFINAE test via `std::enable_if`) is highly recommended as otherwise something as simple as `Wrapper<int> w, v; w = v;` will fail by attempting to assign a `Wrapper<int>` to an `int`. With the constraint, the special member `Wrapper& operator=(Wrapper const&);` will properly be picked.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:50:19.927

There are several `std::string::operator=`s, so the expression `&T::operator=` where `T = std::string` would not result in a *pointer to member function*.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:50:51.160

No, a [function template can never be virtual](https://stackoverflow.com/questions/2354210/can-a-member-function-template-be-virtual), so cannot *override* anything.

But you can have a non-virtual function template (so it doesn't override anything) and it can call the base class function by explicitly-qualifying the name:

```
this->T::operator=(std::forward<Args>(args)...);
return *this; 
```

(The `this->` is actually unnecessary there, but included for clarity.)

This will select the right function by overload resolution, whereas your version with `&T::operator=` doesn't unambiguously name a single overload, so is not the address of a single function (`T::operator=` names a whole overload set and overload sets aren't first-class objects in C++ so can't be passed to a function.)

It can't return that expression, because the base class' assignment operator doesn't return the right type. You could use a `static_cast<Wrapper&>(...)` but it's easier just to return `*this`.

# tkinter - 使用 Tkinter 设置菜单小部件的宽度

> ID：11195362
> 
> 赞同：3
> 
> 时间：2012-06-25T18:45:23.643
> 
> 标签：tkinter, python-2.7, drop-down-menu

使用 Python 2.7 和 Tkinter 模块，我创建了一个菜单按钮并为其分配了一个菜单。现在每次我在特定位置发布菜单时，菜单的宽度都会根据字符数自动设置。有没有办法在菜单小部件中设置静态宽度？

我尝试的标准东西（如下所示）不起作用。

```
self.menuwidget.config(width=80) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:42:53.967

不，没有办法设置菜单的宽度。

# mysql - 在不同的表中使用 SQL 查询的结果

> ID：11195364
> 
> 赞同：1
> 
> 时间：2012-06-25T18:45:32.637
> 
> 标签：mysql, sql

如果我有这样三个不同的表

```
table_1

Field 1: victories
Field 2: name

table_2

Field 1: name
Field 2: birthday 
```

现在我想得到胜利最多的人的生日。

所以我会做这样的事情（伪代码）：

```
select victories from table_1 and sum_it_all
get name and pass name to table_2
select birthday from table_2 where name 
```

好的，这是非常难看的伪代码，但我希望你明白这一点。

使用 Andomar 的解决方案效果很好。现在我尝试在其中嵌套另一个表，如下所示：

```
select address
from table_3
where birthday = 
    (
    select  birthday
    from    table_2
    where   name = 
            (
            select  name
            from    table_1
            group by
                name
            order by
                sum(victories) desc
            limit   1
            )
    ) 
```

我确实得到了正确的答案，但由于某种原因也得到了`null`回复。我将如何输出胜利的总和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:48:58.400

```
select  birthday
from    table_2 t2
where   name = 
        (
        select  name
        from    table_1 t1
        order by
                victories desc
        limit   1
        ) 
```

如果一个用户可以在 中拥有多行`table_1`，则您必须获得`sum`胜利：

```
select  birthday
from    table_2 t2
where   name = 
        (
        select  name
        from    table_1 t1
        group by
                name
        order by
                sum(victories) desc
        limit   1
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:50:01.763

我认为你正在寻找的是这样的：

```
SELECT t2.name, SUM(t1.victories) as SumOfVictories, t2.birthday 
FROM table_1 as t1
JOIN table_2 as t2
ON table_1.name = table_2.name
GROUP BY t2.name, t2.birthday
ORDER BY SUM(t1.victories) DESC
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:09:56.103

您可以使用以下嵌套 SQL：

```
 select name, birthday from table_2 where name in (
   select name from table_1 order by victories desc limit 1
   ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:51:04.403

会给你`SELECT * FROM table_1 INNER JOIN table_2 ON table_1.name=table_2.name ORDER BY victories DESC`想要的结果吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T19:13:19.620

这可能是您的问题的解决方案：

```
SELECT table_1.name, table_2.birthday
FROM table_2
JOIN table_1 ON table_1.name=table_2.name
WHERE table_1.victories>=ALL(SELECT table_1.victories
                             FROM table_1) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-25T18:56:07.837

试试这个：

```
 Select name, birthday from table_2 t2
       Join table_1 t1 On t1.Name = t2.name
   Having Count(*) = 
         (Select Max(namCount)
          From (Select Count(*) namCount
                From table_1
                Group By name))
   Group By t1.name 
```

# android - 处理屏幕方向

> ID：11195366
> 
> 赞同：0
> 
> 时间：2012-06-25T18:45:45.527
> 
> 标签：android, android-asynctask

我正在使用 AsyncTask 创建进度对话框，然后开始一个新活动。代码是： -

```
package com.android.grad;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.provider.MediaStore;

public class LoginTask extends AsyncTask<Void, Void, Boolean> {

    private Activity activity;
    private ProgressDialog pd;
    private Uri fileUri;
    private final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;

    public LoginTask(Activity activity, Uri fileUri) {
        this.activity = activity;
        this.fileUri = fileUri;
    }

    @Override
    protected void onPreExecute() {
        //fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);
        pd = ProgressDialog.show(activity, "Signing in",
                "Please wait while we are signing you in..");
    }

    @Override
    protected Boolean doInBackground(Void... arg0) {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
        }
        pd.dismiss();
        pd = null;
        return true;
    }

    @Override
    protected void onPostExecute(Boolean result) {
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
        activity.startActivityForResult(intent,
                CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
    }   
} 
```

当我使用这个动作监听器按下按钮时，这个任务就开始了。

```
private OnClickListener loginOnClick = new OnClickListener() {
        public void onClick(View v) {
            new LoginTask(LoginActivity.this, fileUri).execute();
        }
    }; 
```

当方向改变时我得到了那个错误。

```
06-25 20:41:27.199: E/WindowManager(8867): Activity com.android.grad.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@2be69ff8 that was originally added here
06-25 20:41:27.199: E/WindowManager(8867): android.view.WindowLeaked: Activity com.android.grad.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@2be69ff8 that was originally added here
06-25 20:41:27.199: E/WindowManager(8867):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
06-25 20:41:27.199: E/WindowManager(8867):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
06-25 20:41:27.199: E/WindowManager(8867):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
06-25 20:41:27.199: E/WindowManager(8867):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
06-25 20:41:27.199: E/WindowManager(8867):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
06-25 20:41:27.199: E/WindowManager(8867):  at android.app.Dialog.show(Dialog.java:278)
06-25 20:41:27.199: E/WindowManager(8867):  at android.app.ProgressDialog.show(ProgressDialog.java:116)
06-25 20:41:27.199: E/WindowManager(8867):  at android.app.ProgressDialog.show(ProgressDialog.java:99)
06-25 20:41:27.199: E/WindowManager(8867):  at android.app.ProgressDialog.show(ProgressDialog.java:94)
06-25 20:41:27.199: E/WindowManager(8867):  at com.android.grad.LoginTask.onPreExecute(LoginTask.java:25)
06-25 20:41:27.199: E/WindowManager(8867):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
06-25 20:41:27.199: E/WindowManager(8867):  at android.os.AsyncTask.execute(AsyncTask.java:511)
06-25 20:41:27.199: E/WindowManager(8867):  at com.android.grad.LoginActivity$1.onClick(LoginActivity.java:36)
06-25 20:41:27.199: E/WindowManager(8867):  at android.view.View.performClick(View.java:3527)
06-25 20:41:27.199: E/WindowManager(8867):  at android.view.View$PerformClick.run(View.java:14234)
06-25 20:41:27.199: E/WindowManager(8867):  at android.os.Handler.handleCallback(Handler.java:605)
06-25 20:41:27.199: E/WindowManager(8867):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-25 20:41:27.199: E/WindowManager(8867):  at android.os.Looper.loop(Looper.java:137)
06-25 20:41:27.199: E/WindowManager(8867):  at android.app.ActivityThread.main(ActivityThread.java:4441)
06-25 20:41:27.199: E/WindowManager(8867):  at java.lang.reflect.Method.invokeNative(Native Method)
06-25 20:41:27.199: E/WindowManager(8867):  at java.lang.reflect.Method.invoke(Method.java:511)
06-25 20:41:27.199: E/WindowManager(8867):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-25 20:41:27.199: E/WindowManager(8867):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-25 20:41:27.199: E/WindowManager(8867):  at dalvik.system.NativeStart.main(Native Method)
06-25 20:41:27.309: D/dalvikvm(8867): GC_CONCURRENT freed 265K, 4% free 9339K/9671K, paused 6ms+4ms
06-25 20:41:27.519: D/AndroidRuntime(8867): Shutting down VM
06-25 20:41:27.519: W/dalvikvm(8867): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
06-25 20:41:27.529: E/AndroidRuntime(8867): FATAL EXCEPTION: main
06-25 20:41:27.529: E/AndroidRuntime(8867): java.lang.IllegalArgumentException: View not attached to window manager
06-25 20:41:27.529: E/AndroidRuntime(8867):     at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:587)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:324)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at android.view.WindowManagerImpl$CompatModeWrapper.removeView(WindowManagerImpl.java:151)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at android.app.Dialog.dismissDialog(Dialog.java:321)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at android.app.Dialog$1.run(Dialog.java:119)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at android.os.Handler.handleCallback(Handler.java:605)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at android.os.Looper.loop(Looper.java:137)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at android.app.ActivityThread.main(ActivityThread.java:4441)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at java.lang.reflect.Method.invokeNative(Native Method)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at java.lang.reflect.Method.invoke(Method.java:511)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-25 20:41:27.529: E/AndroidRuntime(8867):     at dalvik.system.NativeStart.main(Native Method) 
```

我在网站上搜索，但没有找到适合我的解决方案

```
@Override
    protected void onPreExecute() {
        //fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);
        pd = ProgressDialog.show(activity.getApplicationContext(), "Signing in",
                "Please wait while we are signing you in..");
    }

    @Override
    protected Boolean doInBackground(Void... arg0) {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
        }
        return true;
    }

    @Override
    protected void onPostExecute(Boolean result) {
        pd.dismiss();
        pd = null;
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
        activity.startActivityForResult(intent,
                CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
    }   

06-25 21:23:59.709: E/AndroidRuntime(10041): FATAL EXCEPTION: main
06-25 21:23:59.709: E/AndroidRuntime(10041): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:517)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:301)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.app.Dialog.show(Dialog.java:278)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.app.ProgressDialog.show(ProgressDialog.java:116)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.app.ProgressDialog.show(ProgressDialog.java:99)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.app.ProgressDialog.show(ProgressDialog.java:94)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at com.android.grad.LoginTask.onPreExecute(LoginTask.java:25)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.os.AsyncTask.execute(AsyncTask.java:511)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at com.android.grad.LoginActivity$1.onClick(LoginActivity.java:38)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.view.View.performClick(View.java:3527)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.view.View$PerformClick.run(View.java:14234)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.os.Handler.handleCallback(Handler.java:605)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.os.Looper.loop(Looper.java:137)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at android.app.ActivityThread.main(ActivityThread.java:4441)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at java.lang.reflect.Method.invokeNative(Native Method)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at java.lang.reflect.Method.invoke(Method.java:511)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-25 21:23:59.709: E/AndroidRuntime(10041):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:01:30.757

检查[AsyncTask 是否真的在概念上存在缺陷，或者我只是遗漏了什么？](https://stackoverflow.com/questions/3357477/is-asynctask-really-conceptually-flawed-or-am-i-just-missing-something)

它提供了对此问题的深入调查，并提供了一个很好的解决方案，说明如何在由设备配置更改（方向更改等）引起的活动重启之间保持正在运行的异步任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:49:07.303

```
 com.android.grad.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@2be69ff8 that was originally added here 
```

1-看起来您正在使用 Activity 引用来显示对话框，而不是将 Activity cto 构造函数传递`pass Application context`给它以显示对话框......

2- pd.dismiss(); pd = null; 应该在 doInBackground 中的 onPostExecute 中进行检查，例如 isShowing 或任何更好的检查............

```
 If(null!=pd && pd.isShowing ()){
      pd.dismiss();

       pd = null;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:47:11.330

在旋转时，Activity 被销毁，您的 ProgressDialog 也是如此，因此，当您尝试隐藏对话框时，它不再存在并生成此异常。

# sdk - 如何在 Ubuntu 上安装 OpenAL SDK？

> ID：11195372
> 
> 赞同：2
> 
> 时间：2012-06-25T18:46:09.287
> 
> 标签：sdk, installation, openal

我对 Linux 和 Linux 上的编程非常陌生。我正在尝试在 ubuntu 上安装 OpenAL SDK……我最好的猜测是我需要从 CVS 存储库下载 OpenAL。我找到了一个教程：[http ://www.edenwaith.com/products/pige/tutorials/openal.php](http://www.edenwaith.com/products/pige/tutorials/openal.php)

但是，当我尝试运行终端命令时，会发生以下情况：

```
steven@ubuntu:~$ cvs -d:pserver:guest@opensource.creative.com:/usr/local/cvs-repository login
Logging in to :pserver:guest@opensource.creative.com:2401/usr/local/cvs-repository
CVS password: 
cvs [login aborted]: connect to opensource.creative.com(124.246.64.74):2401 failed: No route to host 
```

关于如何安装 OpenAL SDK 的任何提示？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T02:42:38.510

```
sudo apt-get install libopenal-dev 
```

将安装 OpenAL SDK 并让你启动并运行......或者，如果你想从源代码编译...... openal 的开源分支位于[https://github.com/kcat/openal-soft](https://github.com/kcat/openal-soft) （做`git log`一个执行 git clone 后的代码，您将看到这两个是源代码镜像）

获取当前来源：

```
#  git clone git://repo.or.cz/openal-soft.git  # both are same code
git clone git@github.com:kcat/openal-soft.git

cd openal-soft 
cd build
cmake ..
make 
```

如果没有错误，则安装：

```
sudo make install 
```

完全随意在此处发布您遇到的任何错误 - ubuntu 12.04 或更高版本很好地为所有必要的库提供了 apt-get install 。

这是一些可选的上游库

```
sudo apt-get install libsdl-sound1.2-dev
sudo apt-get install  libmyth-dev 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T21:10:28.197

为什么你从 cvs 下载而不是简单地运行`apt-get install libopenal-dev`？这会自动下载 OpenAL 及其依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-25T06:17:43.347

新包名似乎是 openal-soft-devel

# python - Python For...循环迭代

> ID：11195374
> 
> 赞同：1
> 
> 时间：2012-06-25T18:46:21.360
> 
> 标签：python, string, list, loops

好的，我有这个程序以 Newick 格式稀疏代码，它提取名称和距离以用于系统发育树图中。我的问题是，在这个代码分支中，当程序读取 newickNode 函数时，它将名称和距离分配给“节点”变量，然后将其返回到“节点”类以进行打印，但似乎只打印第一个节点'A'，并跳过其他3个。
无论如何要完成newickNode中的for循环以读取其他3个节点并与第一个节点相应地打印它们？

```
class Node:
    def __init__(self, name, distance, parent=None):
        self.name = name
        self.distance = distance
        self.children = []  
        self.parent = parent

    def displayNode(self):
        print "Name:",self.name,",Distance:",self.distance,",Children:",self.children,",Parent:",self.parent

def newickNode(newickString, parent=None):
    String = newickString[1:-1].split(',')
    for x in String:
        splitString = x.split(':')
        nodeName = splitString[0]
        nodeDistance = float(splitString[1]) 
        node = Node(nodeName, nodeDistance, parent)
        return node

Node1 = newickNode('(A:0.1,B:0.2,C:0.3,D:0.4)')
Node1.displayNode() 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T18:52:36.790

你可以把它变成一个生成器：

```
def newickNode(newickString, parent=None):
    String = newickString[1:-1].split(',')
    for x in String:
        splitString = x.split(':')
        nodeName = splitString[0]
        nodeDistance = float(splitString[1]) 
        node = Node(nodeName, nodeDistance, parent)
        yield node

for node in newickNode('(A:0.1,B:0.2,C:0.3,D:0.4)'): 
    node.displayNode() 
```

生成器将一次返回一个节点并在函数内暂停，然后在您需要下一个节点时恢复。

或者只是保存它们并返回它们

```
def newickNode(newickString, parent=None):
    String = newickString[1:-1].split(',')
    nodes = []
    for x in String:
        splitString = x.split(':')
        nodeName = splitString[0]
        nodeDistance = float(splitString[1]) 
        node = Node(nodeName, nodeDistance, parent)
        nodes.append(node)
    return nodes 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T18:51:23.250

您的`newickNode()`函数应该累积节点列表并返回它，而不是返回创建的第一个节点。如果您要这样做，为什么要从一个循环开始？

```
def newickNodes(newickString, parent=None):
    nodes = []
    for node in newickString[1:-1].split(','):
        nodeName, nodeDistance = node.split(':')
        nodes.append(Node(nodeName, nodeDistance, parent))
    return nodes 
```

或者，您可以将其编写为一次生成一个节点的生成器。这将允许您根据需要轻松迭代它们或将它们转换为列表。

```
def newickNodes(newickString, parent=None):
    for node in newickString[1:-1].split(','):
        nodeName, nodeDistance = node.split(':')
        yield Node(nodeName, nodeDistance, parent) 
```

此外，从面向对象的设计 POV 来看，这可能应该是您的`Node`类上命名`parseNewickString()`或类似的类方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:07:14.103

为了保持更灵活——我会用它`pyparsing`来处理 Newick 文本，`networkx`所以我拥有我想要的所有图形功能——推荐给`easy_install`/`pip`那些模块。有人已经编写了具有节点和树创建的解析器也很好（尽管它看起来缺少一些功能，但它适用于您的情况）：

[http://code.google.com/p/phylopy/source/browse/trunk/src/phylopy/newick.py?r=66](http://code.google.com/p/phylopy/source/browse/trunk/src/phylopy/newick.py?r=66)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T18:52:11.083

或者，您的函数可以在每次循环时`newickNode()`立即调用新节点。`node.displayNode()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T18:51:30.410

第一次通过你的`for:`循环，你`return`是一个节点，它会停止函数的执行。

如果要返回节点列表，请在函数顶部创建列表，每次通过循环附加到它，并在完成后返回列表。

将循环移到函数之外可能更有意义`newickNode`，并让该函数如其名称所示仅返回单个节点。

# css - 在 Sharepoint 中注册 CSS 文件，以便 Web 部件保持主题化

> ID：11195377
> 
> 赞同：0
> 
> 时间：2012-06-25T18:46:36.607
> 
> 标签：css, sharepoint

我需要从后面的代码中注册我的 css 文件。最初我使用了以下代码：

```
CssRegistration.Register("myStyles.css", true); 
```

问题是，像这样，该文件预计位于布局文件夹中的 1033/styles 之类的文件夹中。现在有我的问题：对于每个国家（或语言区域），我需要将我的 css 复制到另一个 xxyy/styles 文件夹中。直到现在，解决这种情况的每一次尝试都失败了。

**到目前为止我尝试了什么**

设置路径：

```
CssRegistration.Register("/_layouts/myFolder/myStyles.css", true); 
```

这可行，但如果我尝试在 Sharepoint 中更改主题，webpart 将不再更改。

使用这种方式：

```
CssRegistration cssRegistration = new CssRegistration 
{ 
  After = "corev4.css", 
  Name = "/_layouts/MyFolder/myStyles.css",
  EnableTheaming = true
}; 
Controls.Add(cssRegistration); 
```

这边情况一样。。。

有人知道更多吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:21:12.153

我做过几次这样的事情，从来没有遇到过问题。首先，您必须在您的 Visual Studio 项目中映射 Layouts 文件夹，然后将 CSS 插入那里（但我想您已经这样做了）

然后你必须在你的代码中这样做：

```
CssLink cssLink = new CssLink();
cssLink.DefaultUrl="/_layouts/PROJECTNAME/styles/FILE.css";
        if (!this.Page.Header.Controls.Contains(cssLink)) {
            this.Page.Header.Controls.Add(cssLink);
        } 
```

问候，

佩德罗

Mixit.nl

# java - 分块输入流意外结束

> ID：11195380
> 
> 赞同：2
> 
> 时间：2012-06-25T18:46:59.143
> 
> 标签：java, httpclient, chunked

我试图编写一个程序，以分块格式从 Web 服务器获取文件。我正在尝试在 HTTP 3.0 API 中使用 ChunkedInputStream 类。当我运行代码时，它给了我“卡盘输入流意外结束”错误。我究竟做错了什么？这是我的代码：

```
 HttpClient client = new DefaultHttpClient();
    HttpGet getRequest = new HttpGet(location);
    HttpResponse response = client.execute(getRequest);
    InputStream in = response.getEntity().getContent();

    ChunkedInputStream cis = new ChunkedInputStream(in);
    FileOutputStream fos = new FileOutputStream(new ile("session_"+sessionID));
    while(cis.read() != -1 )
    {
        fos.write(cis.read());
    }
    in.close();
    cis.close();
    fos.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T22:14:32.997

不要像 axtavt 建议的那样使用 ChunkedInputStream，但还有另一个问题。您正在跳过每个奇数字节。如果数据是偶数字节，您将写入表示 EOS 的 -1，然后再进行读取。复制流的正确方法：

```
byte[] buffer = new byte[8192];
int count;
while ((count = in.read(buffer)) > 0)
{
  out.write(buffer, 0, count);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:02:26.637

你确定你需要`ChunkedInputStream`在这种情况下使用吗？

我认为`HttpClient`应该在内部处理分块编码，因此`response.getEntity().getContent()`返回已经解码的流。

# google-app-engine - ndb 根据 KeyProperty 实例查询模型

> ID：11195388
> 
> 赞同：3
> 
> 时间：2012-06-25T18:47:21.693
> 
> 标签：google-app-engine, app-engine-ndb

我有一个简单的ndb模型如下：

```
class TaskList(ndb.Model):
    title = ndb.StringProperty()
    description = ndb.TextProperty()
    priority = ndb.IntegerProperty()

class UserProfile(ndb.Model):
    user = ndb.UserProperty()
    tasks = ndb.KeyProperty(TaskList) 
```

众所周知，一个 TaskList 对象将有一个`Entity Kind` `Entity Key`和一个`ID`。给定一个 ID 为 7。我可以很好地获取 ID 为 7 的对象，如下所示：

```
task = ndb.Key(TaskList, 7).get() 
```

但是我如何获得任务 ID 为 7 的用户？

我试过：

```
tsk = ndb.Key(TaskList, 7).get() 
user = UserProfile.query(UserProfile.tasks  == tsk.key) 
```

它有效，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:41:50.997

您快到了 - 但无需获取任务，只需再次使用其 key 属性：

```
task_key = ndb.Key(TaskList, 7)
user = UserProfile.query(UserProfile.tasks == task_key) 
```

或等效地：

```
user = UserProfile.query(UserProfile.tasks == ndb.Key(TaskList, 7)) 
```

# java - 双重检查锁定的乱序写入

> ID：11195389
> 
> 赞同：4
> 
> 时间：2012-06-25T18:47:23.390
> 
> 标签：java, multithreading, synchronization, jls, double-checked-locking

在针对双重检查锁定场景的乱序写入提到的示例中（参考： [IBM 文章](http://www.ibm.com/developerworks/java/library/j-dcl/index.html#)和[Wikipedia 文章](http://en.wikipedia.org/wiki/Double-checked_locking)）

我无法理解为什么在构造函数完全初始化之前 Thread1 会出现同步块的简单原因。根据我的理解，创建“new”和调用构造函数应该按顺序执行，并且在所有工作未完成之前不应释放同步锁。

请让我知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T18:54:27.650

构造函数可能已经完成——但这并不意味着该构造函数中涉及的所有写入都对其他线程可见。糟糕的情况是，在对象的内容变得可见之前，*引用对其他线程可见（因此它们开始使用它）。*

您可能会发现[Bill Pugh 关于它的文章也](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)有助于阐明一点。

就我个人而言，我只是避免像瘟疫一样进行双重检查锁定，而不是试图让它全部工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:18:23.987

当线程 1 位于 //3 时，线程 2 检查实例是否为空。

```
public static Singleton getInstance()
{
if (instance == null)
{
synchronized(Singleton.class) {  //1
  if (instance == null)          //2
    instance = new Singleton();  //3
  }
}
 return instance;//4
} 
```

此时，实例内存已从堆中分配，指向它的指针存储在实例引用中，因此线程 2 执行的“if 语句”返回“false”。请注意，由于在 Thread2 检查时 instance 不为 null，因此线程 2 不会进入同步块，而是返回对“完全构造但部分初始化的 Singleton 对象”的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:31:47.743

有问题的代码在这里：

```
public static Singleton getInstance()
{
  if (instance == null)
  {
    synchronized(Singleton.class) {  //1
      if (instance == null)          //2
        instance = new Singleton();  //3
    }
  }
  return instance;
} 
```

现在，只要您一直认为代码按照编写的顺序执行，就无法理解这个问题。即便如此，在当今主流的对称多处理架构中也存在跨多个处理器（或内核）的缓存同步问题。

例如，Thread1 可以发布对`instance`主内存的引用，但无法发布`Singleton`创建的对象内的任何其他数据。Thread2 将观察对象处于不一致的状态。

只要 Thread2 不进入`synchronized`块，缓存同步就不必发生，因此 Thread2 可以无限期地继续下去，而无需观察到`Singleton`一致的状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T19:45:25.353

代码没有按照编写的顺序执行，这是一个普遍的问题。在 Java 中，线程只需要与自身保持一致。在一条`instance`线上创建的`new`必须准备好继续下一条。其他线程没有这样的义务。例如，如果`fieldA`是 1 并且 'fieldB' 是 2 进入线程 1 上的代码：

```
fieldA = 5;
fieldB = 10; 
```

和线程 2 运行此代码：

```
int x = fieldA;
int y = FieldB; 
```

xy 值 1 2、5 2 和 5 10 都是意料之中的，但 1 10——fieldB 在 fieldA 之前被设置和/或拾取——是完全合法的，而且很可能也是如此。所以双重检查锁定是一个更普遍问题的特例，如果您使用多个线程，您需要注意它，特别是如果它们都访问相同的字段。

应该提到 Java 1.5 中的一个简单解决方案：标记`volatile`的字段保证在被引用之前立即从主内存中读取并在之后立即写入。如果声明`fieldA`及`fieldB`以上`volatile`，则 xy 值不可能为 1 10。如果`instance`是 volatile，则双重检查锁定有效。使用`volatile`字段是有成本的，但它比同步要少，因此双重检查锁定成为一个不错的主意。这是一个更好的主意，因为它避免了在 CPU 内核空闲时有一堆线程等待同步。

But you do want to understand this (if you can't be talked out of multithreading). On the one hand you need to avoid timing problems and on the other avoid bringing your program to a halt with all the threads waiting to get into synch blocks. And it's very difficult to understand.

# sql - 协助 SQL 查询（窗口函数）

> ID：11195393
> 
> 赞同：0
> 
> 时间：2012-06-25T18:47:37.443
> 
> 标签：sql, grouping

```
Houston Apartment         Order 1
Houston Apartment            Order 5
Houston TownHouse   Order 3
Houston TownHouse   Order 4
Austin  Condo   
Dallas  MultiFamily Order 2 
```

全部，

我有一个类似上面的结果集。以熟悉的 Customer -> Orders 模式为例，前两列（例如 Houston、Apartment）来自 Customer 表上的 category1 和 category2 字段。第三列来自 Orders 表，表示该表的主键。此列中的值故意不按顺序列出 (1...5...3)，以表明我无法保证这些值的顺序。

我想要的是有一列添加一个 Rank 或 Row_number （或计算？），对类别 1 和 2 的每个组合进行编号：

```
1   Houston Apartment   Order 1
1   Houston Apartment   Order 5
2   Houston TownHouse            Order 3
2   Houston TownHouse   Order 4
3   Austin  Condo   
4   Dallas  MultiFamily Order 2 
```

所以，Houston-Aparment 是 1，Houston-TownHouse 是 2，等等...

如果可能，我想避免*任何子*/嵌套查询。

请注意：示例中的值或只是示例数据。真实数据不是基于客户/订单，所以我恭敬谦卑地请求您不要责备我将城市和公寓类型作为类别等（在这种情况下，我会将它们放在单独的域表中）或建议更改图式的

有人可以帮忙吗？！

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:58:35.110

根据您显示的结果，我认为您想要：

```
select dense_rank() over (order by Category1, Category2) as rankorder, *
from Customers c join
     Orders o
     on o.CustomerID = c.CustomerID 
```

您似乎仅基于前两个类别添加索引，并且永远不会重新开始（分区用于重新开始计数）。你有没有间隙的关系（1、1、2 ......）。对于这种情况，您需要 dense_rank()。如果您与间隙 (1, 1, 3 ...) 有联系，您将使用 rank()。如果您只想要排序 (1, 2, 3)，您将使用 row_number()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:58:27.803

这样的事情应该做：

```
create table Data
(
    city varchar(50),
    propertyType varchar(50),
    anOrder int
)
insert into Data select 'Houston', 'Apartment', 1
insert into Data select 'Houston', 'Apartment', 5
insert into Data select 'Houston', 'TownHouse', 3
insert into Data select 'Houston', 'TownHouse', 4
insert into Data select 'Austin', 'Condo', 1
insert into Data select 'Dallas', 'MultiFamily', 2

select city, propertyType, RANK() OVER 
    (PARTITION BY Data.city ORDER BY Data.city,Data.propertyType DESC) AS Rank 
from Data
group by city, propertyType 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:52:14.483

如果您的数据库支持窗口函数，您可以使用`row_number()`：

```
select  row_number() over (partition by Category1, Category2 order by CustomerID)
from    Customers c
join    Orders o
on      o.CustomerID = c.CustomerID 
```

# scikit-learn - Scikit-Learn 逻辑回归内存错误

> ID：11195395
> 
> 赞同：7
> 
> 时间：2012-06-25T18:47:46.747
> 
> 标签：scikit-learn

我正在尝试使用 sklearn 0.11 的 LogisticRegression 对象来拟合具有大约 80,000 个特征的 200,000 个观察值的模型。目标是将短文本描述分类为 800 个类别中的 1 个。

当我尝试拟合分类器时，pythonw.exe 给了我：

应用程序错误“...处的指令引用了 0x00000000 处的内存”。内存无法写入”。

这些特征非常稀疏，每次观察大约 10 个，并且是二进制的（1 或 0），所以通过我的信封计算，我的 4 GB RAM 应该能够处理内存需求，但这似乎并不就是这样。只有当我使用较少的观察和/或较少的特征时，这些模型才适合。

如果有的话，我想使用更多的观察和特征。我天真的理解是，在幕后运行的 liblinear 库能够支持这一点。关于如何挤进更多观察的任何想法？

我的代码如下所示：

```
y_vectorizer = LabelVectorizer(y) # my custom vectorizer for labels
y = y_vectorizer.fit_transform(y)

x_vectorizer = CountVectorizer(binary = True, analyzer = features)
x = x_vectorizer.fit_transform(x)

clf = LogisticRegression()
clf.fit(x, y) 
```

我传递给分析器的 features() 函数只返回一个字符串列表，指示在每个观察中检测到的特征。

我正在使用 Python 2.7、sklearn 0.11、具有 4 GB RAM 的 Windows XP。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T08:53:03.313

liblinear（的后备实现`sklearn.linear_model.LogisticRegression`）将托管它自己的数据副本，因为它是一个 C++ 库，其内部内存布局不能直接映射到 scipy 中预先分配的稀疏矩阵，例如`scipy.sparse.csr_matrix`or `scipy.sparse.csc_matrix`。

在您的情况下，我建议将您的数据加载为 a`scipy.sparse.csr_matrix`并将其提供给 a `sklearn.linear_model.SGDClassifier`（`loss='log'`如果您想要一个逻辑回归模型并能够调用该`predict_proba`方法）。如果它已经在使用内存布局`SGDClassifier`，则不会复制输入数据。`scipy.sparse.csr_matrix`

期望它在内存中分配 800 * (80000 + 1) * 8 / (1024 ** 2) = 488MB 的密集模型（除了输入数据集的大小）。

**编辑：**如何优化数据集的内存访问

要在数据集提取后释放内存，您可以：

```
x_vectorizer = CountVectorizer(binary = True, analyzer = features)
x = x_vectorizer.fit_transform(x)
from sklearn.externals import joblib
joblib.dump(x.tocsr(), 'dataset.joblib') 
```

然后退出这个python进程（强制完成内存释放）并在一个新进程中：

```
x_csr = joblib.load('dataset.joblib') 
```

在 linux / OSX 下，您可以通过以下方式更有效地进行内存映射：

```
x_csr = joblib.load('dataset.joblib', mmap_mode='c') 
```

# php - PHP中的“对象”一词有什么作用？

> ID：11195397
> 
> 赞同：0
> 
> 时间：2012-06-25T18:47:51.663
> 
> 标签：php, sql, object

我对“对象”一词在 PHP 中的作用感到困惑，例如：

```
while($row = mysql_fetch_object($result)) {
   $images[] = (object) $row;
} 
```

“（对象）”有什么作用？我已经多次看到它发生过，但不知道它的目的和作用，任何解释将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:50:21.770

它用于将变量（通常是数组）转换为对象（stdClass）。

请不要遵循这种编码方式，因为它有很多缺点和很少的好处。

还：

> 欢迎来到堆栈溢出！请不要将`mysql_*`函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用 [PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有很好的 PDO 教程](http://goo.gl/vFWnC)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:35:54.923

它用于在 PHP 中的对象内放置变量。

顺便说一句，您正在使用半弃用的功能，请注意您的使用，例如`mysql_fetch_oject()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:51:41.460

(object) 将变量转换为数据类型为 object 的变量。

例如

```
<?php
$car = array (
    'type' => 'Ford',
    'plate' => 'AZ-DF-123'
);

$p = (object) $car;
echo $p->type; // Will print 'Ford'
?> 
```

# jquery - 导航进度条

> ID：11195398
> 
> 赞同：1
> 
> 时间：2012-06-25T18:47:52.910
> 
> 标签：jquery, css, progress-bar

我正在尝试建立进度菜单栏（类似于 piccsy 投资者[http://www.piccsy.com/investors/](http://www.piccsy.com/investors/)上的一个）

它测量页面的高度并进度%。

关于如何做的任何想法？

谢谢，尼古拉。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T01:38:59.017

在这里，您有解决此问题的方法。

首先是div：

```
<div id="bar"></div>​ 
```

现在一些样式：

```
body{
    height:4000px;
}

#bar{
    position:fixed;
    background-color:red;
    width:100%;
    height:10px;
}​ 
```

最后是 jQuery 代码：

```
var bar = $('#bar'),
    $window = $(window),
    docHeight = $(document).height(),
    baseX = $window.height() / docHeight * 100;

bar.css('background', '-webkit-linear-gradient(left, red '+ baseX +'%, green '+ baseX +'%)');

$window.scroll(function(e) {      
    var x = $window.scrollTop() / docHeight * 100 + baseX;
    bar.css('background', '-webkit-linear-gradient(left, red '+ x +'%, green '+ x +'%)');
}); 
```

[您可以在jsfiddle](http://jsfiddle.net/EVr8R/)中找到一个工作示例。

请注意，这仅适用于 Google Chrome，因为我只使用了`-webkit-linear-gradient`. 如果你想确保它在所有浏览器中都能正常工作，你应该添加它的特定属性。您可能会为此找到有用的[Prefixr](http://prefixr.com/index.php)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-25T19:58:53.860

您可以使用 .scroll() 来使用 jquery 捕获滚动事件。

```
$(window).scroll(function() {...}) 
```

在此函数中，您可以使用 .scrollTop() 函数获取滚动高度。

```
var height = $(window).scrollTop() 
```

一旦你得到高度，你就可以设置进度条。

您可以使用此函数获取页面高度：

```
$(document).height(); 
```

这样您就可以计算百分比来设置进度条位置。

# html - 如何在不影响子列表的情况下调整有序列表中的项目？

> ID：11195400
> 
> 赞同：2
> 
> 时间：2012-06-25T18:47:54.400
> 
> 标签：html, css, list

我想定义一个带有无序子列表的有序列表。您可以从下面的示例中看到我想要实现的目标。它符合这样一个事实，即无序列表也获得编号标签。我怎样才能防止这种情况（对于进一步的子列表 [等等 3,4 级，...]）？

```
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <style type="text/css">
      /* %%% ordered lists, see http://stackoverflow.com/questions/2558358/how-to-add-brackets-a-to-ordered-list-compatible-in-all-browsers# %%% */
      ul {
      list-style-type: square;
      padding: 0em 0em 0em 26px; /* indent from left */
      }

      ul li {
      margin: 0.3em 0em 0em 0em; /* space between elements */
      }

      ol {
      list-style-type: none;
      padding: 0em; /* indent from left */
      }

      ol.orderedlist {
      counter-reset:mycounter;
      list-style-type: none;
      }

      ol.orderedlist li:before {
      content: counter(mycounter) ") ";
      counter-increment:mycounter;
      }
    </style>
  </head>
  <body>
    <ol class="orderedlist">
      <li>Point 1</li>
      <ul>
    <li>Foo</li>
    <li>Bar</li>
      </ul>
      <li>Point 2</li>
      <ul>
    <li>Foo</li>
    <li>Bar</li>
      </ul>
    </ol>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:49:57.090

使用子选择器：

```
ol.orderedlist > li:before {
content: counter(mycounter) ") ";
counter-increment:mycounter;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:55:57.490

```
ol.orderedlist ul {list-style: square;}

ol ul {list-style: square;}

ol ul ol ul {list-style: square;} 
```

# sharepoint-2010 - Web 部件运行优先级

> ID：11195401
> 
> 赞同：0
> 
> 时间：2012-06-25T18:47:59.507
> 
> 标签：sharepoint-2010, web-parts

我有这个问题。目前我正在开发两个 Web 部件。第一个 (A) 生成另一个 Web 部件 (B) 将使用的查询字符串。两者都在不同的页面中，但在同一个站点中。问题是： - 当我调试（VisualStudio2010）时，需要查询字符串的 Web 部件首先运行，并向我抛出异常。那么，如何设置优先级以首先运行 A 而不是 B？还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:13:30.307

在我看来，您要么在同一页面上有 Web 部件，要么在启动页面上有“Web 部件 (B)”，而在不同的页面上有“Web 部件 (A)”。

此外，您可能应该通过确保您的请求对象在尝试使用它之前具有查询参数来更具防御性。

# java - 在这种情况下，Web 应用程序是否能够加载图像？

> ID：11195403
> 
> 赞同：0
> 
> 时间：2012-06-25T18:48:17.697
> 
> 标签：java, web-applications

我在 JBoss 上有一个 Java Web 应用程序，我需要访问服务器目录中的图像，但无法通过 URL 访问。我的问题是，Web 应用程序是否可以加载这些图像？我怎么能做到这一点？

先感谢您。（对不起，如果我的英语不好=P）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:26:31.830

您可以从该位置读取文件并通过 servlet 写出。看到这个：[从 servlet 输出图像文件](https://stackoverflow.com/questions/8623709/output-an-image-file-from-a-servlet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:15:44.073

只要您在类路径中定义资源的位置，您就应该能够访问这些文件。

# c++ - 链接器错误未定义对“WinMain@16”的引用

> ID：11195406
> 
> 赞同：0
> 
> 时间：2012-06-25T18:48:22.123
> 
> 标签：c++

我有以下链接器错误，我怀疑这与正在使用的链接器有关，但我似乎不知道这个问题来自哪里。

```
[Linker error] undefined reference to `WinMain@16' 
```

我在 Windows Vista Professional 机器上使用 Dev C++

```
#include <cstdlib>
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{
    char * pointarrty = "234";
    int a = 0;

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:03:39.207

来自[MSDN](http://msdn.microsoft.com/en-us/library/f6xx1b1z.aspx)：

如果您使用 Unicode 和 MFC，如果您不创建 wWinMainCRTStartup 的入口点，您将在 _WinMain@16 上获得未解析的外部；使用 /ENTRY。请参阅 Unicode 编程摘要。

要设置入口点，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/f9t8842e.aspx)文章

# php - 通过 PHP var 填充 jQuery 或 ajax

> ID：11195407
> 
> 赞同：0
> 
> 时间：2012-06-25T18:48:26.603
> 
> 标签：php, jquery

是否可以通过 PHP 填充 jQuery 变量？？？

我的意思是这样的：

`<?php
$string_php = "50%";
?>`

我想用“$string”变量填充 jQuery：

`var jquery_string = "$string_php";
$('.bar1').animate({'height':'jquery_string'},500);`

上面的代码只是我想如何工作的想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:49:33.557

**是**的，但带有**php 标签** `<?php ?>`（以便 php 知道它的代码）：

```
var jquery_string = "<?php echo $string_php;?>";
$('.bar1').animate({'height':jquery_string}, 500); // no quotes for variables 
```

这是可能的，因为 PHP（服务器端）在 jQuery（客户端）之前运行。该页面首先进入服务器，服务器将响应（在那里解析 php 代码）返回给浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:49:52.167

当然

```
var jquery_string = "<?php echo $string_php;?>"; 
```

由于 PHP 首先在服务器上进行处理，然后将结果发送到用户的浏览器，所以这很容易，而且经常这样做。

上面的代码将导致：

```
var jquery_string = "50%"; 
```

但是，您想修改第二行，从变量中删除引号，因此它是：

```
$('.bar1').animate({'height':jquery_string},500); 
```

因为保留引号`jquery_string`会强制将其解释为字符串，而您需要一个变量。

最终结果将相当于：

```
$('.bar1').animate({'height':'50%'},500); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T18:56:00.113

对于简单的变量，按照用户说的做。

前任 `var jquery_string = "<?php echo $string_php;?>";`（取自@Blaster 的解决方案）。换句话说：

> 最简单的解决方案是在我们定义变量的任何地方通过 echo输出我们打算用作**字符串文字的 php 变量。**

但是：正确的方法是每次我们使用服务器端变量**作为 Javascript 字符串**时，都应该对其进行编码，因为当出现双引号时，上述解决方案将失败。这里`json_encode`可能会派上用场。

```
var jquery_string = <?php echo json_encode($var); ?>; 
```

* * *

## 代码示例

我们希望 Javascript 提醒字符串`"Hey", dude!`

```
$string = "\"Hey\", dude!";
echo "alert(\"" . $string . "\");"; 
```

结果是：

```
alert(""Hey", dude!"); <--- will give Javascript error 
```

反而：

```
 echo "alert(" . json_encode($string) . ");"; 
```

结果是：

```
alert("\"Hey\", dude!"); <---- correct JS code 
```

# node.js - 如何提供持久的redis pubsub

> ID：11195413
> 
> 赞同：2
> 
> 时间：2012-06-25T18:48:51.247
> 
> 标签：node.js, redis, message

我正在研究节点 socket.io redis 项目。

实时即时消息工作正常。但是，我想知道如何存储离线消息以及如何保证消息传递。

任何人都知道如何使用上述技术堆栈实现持久发布订阅？

干杯荷马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:01:38.787

这取决于您要处理的消息数量。看看[这里](http://redis.io/topics/persistence)，我建议使用 AOF 风格。如果你需要比你的 RAM 更大的东西，我建议在消息传递到接收者时从队列中删除消息，然后将其复制到你喜欢的一些 MySQL/MongoDB/Riak/WhateverDB。

你觉得这听起来如何？

# android - 分段列表视图仅显示最后一个部分

> ID：11195421
> 
> 赞同：0
> 
> 时间：2012-06-25T18:49:31.707
> 
> 标签：android, listview, android-widget

我有一个基于[Jeff Sharkey](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)实现的分段列表视图。问题是仅显示列表视图的一部分（最后一个）。以下是我添加这些部分的方法：

```
SeparatedListAdapter adapter = new SeparatedListAdapter(this);

for (int i = 0; i < groups.size(); ++i)    // groups is an ArrayList<ArrayList<Person>>
{
    ArrayList<Person> group = groups.get(i);
    adapter.addSection("Section test", new MyCustomAdapter(this, R.layout.custom_cell, group));
}

ListView listView = (ListView) findViewById(R.id.myListView);
listView.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:28:56.610

试试这个，因为需要第一个参数不同于 addSection 中的前一个参数

```
for (int i = 0; i < groups.size(); ++i)    // groups is an ArrayList<ArrayList<Person>>
{
    ArrayList<Person> group = groups.get(i);
    adapter.addSection("Section test"+i, new MyCustomAdapter(this, R.layout.custom_cell, group));
} 
```

作为

在代码中添加功能是

```
public void addSection(String section, Adapter adapter) {
this.headers.add(section);
this.sections.put(section, adapter);
} 
```

其中sections是一个地图

```
public final Map<String,Adapter> sections = new LinkedHashMap<String,Adapter>(); 
```

# coffeescript - Coffeescript 和 jQuery 链接

> ID：11195429
> 
> 赞同：7
> 
> 时间：2012-06-25T18:49:56.177
> 
> 标签：coffeescript, chaining

我在coffeescript中尝试这样做：

```
$( element ).mousedown( aFunction ).mouseup( anotherFunction ); 
```

我正在尝试找出一种利用缩进的方法，以便以下内容将返回有关内容：

```
$ element
    .mousedown aFunction
    .mouseup anotherFunction 
```

但无济于事，有没有关于在咖啡脚本中链接的建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T18:55:04.920

我确定您不想使用括号，但是...

```
$("#element")
  .mousedown(aFunction)
  .mouseup(anotherFunction) 
```

编译为

```
$("#element").mousedown(aFunction).mouseup(anotherFunction); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:57:53.990

对于所有其他快速读者，这里[是付费书呆子](https://stackoverflow.com/users/102704/a-paid-nerd)给出[的](https://stackoverflow.com/questions/5144191/coffeescript-method-chaining-with-function-arguments)更新答案。

```
req = $.get('foo.html')
  .success (response) ->
    do_something()
  .error (response) ->
    do_something() 
```

...编译为：

```
var req;
req = $.get('foo.html').success(function(response) {
  return do_something();
}).error(function(response) {
  return do_something();
}); 
```

看起来[mus 太短](https://stackoverflow.com/users/479863/mu-is-too-short)了，在上面的评论中也建议了它。

# jquery - 仅当它具有所有这些子节点时如何选择 jQuery 子节点：[“.green”、“.blue”、“.button”]？

> ID：11195436
> 
> 赞同：0
> 
> 时间：2012-06-25T18:50:19.630
> 
> 标签：jquery, jquery-selectors

我很难为此找到一个优雅的解决方案。令 jQuery 在选择器中不包含“&”或“:and”运算符感到惊讶。

我正在建立一个标签过滤机制。我想根据所选标签减少结果集。所以我传入了一个标签查询，并且只想显示那些在与选择器匹配的部分中有子标签的元素。

**问题**：
只有当它具有所有匹配的子选择器时，我才需要返回一个 div。这段代码向我展示了 tag_query 中每个选择器的组合结果。我只需要匹配所有选择器的那些节点。下面的代码返回任何具有 .blue OR .green OR .button 子元素的 div（而不是 AND）。

```
var tag_query = ".green, .blue, .button";
nodes_to_show = $(".results .element .tags").children(tag_query);
console.log(nodes_to_show); 
```

UI 端当前发生的情况：我选择了 1 个标签“.green”，但我只看到带有这些标签的元素。然后我添加了“.blue”标签，我看到了一个更大的集合（我希望看到一个更小的集合），因为它还获取了任何带有“.blue”标签的元素。我希望只看到带有“.blue”和“.green”标签的元素。

这是标签结构：

```
<div class="element">
    <div class="tags">
        <span class="item green">green</span>
        <span class="item button">button</span>
        <span class="item blue">blue</span>
    </div>
</div>

<div class="element">
    <div class="tags">
        <span class="item red">green</span>
        <span class="item button">button</span>
        <span class="item fire">blue</span>
    </div>
</div>

<div class="element">
    <div class="tags">
        <span class="item fire">fire</span>
        <span class="item button">button</span>
    </div>
</div> 
```

查询“.button”标签应该返回上面所有的三个“元素”div。查询“.fire”和“.button”应返回最后 2 个“元素”div。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:51:04.957

这里：

```
var arr = tag_query.split( ', ' );

$( '.element' ).filter(function () {
    var root = this;
    return arr.every(function ( className ) {
        return $( root ).find( className ).length > 0;
    });
}).show(); 
```

**现场演示：http:** [//jsfiddle.net/DjS2u/1/](http://jsfiddle.net/DjS2u/1/)

因此，对于每个`.element`元素，我测试它是否包含每个提供的类名的至少一个后代。我将`tag_query`字符串转换为数组——字符串形式不是很有用，并且在数组上我可以调用数组方法——在这种情况下`every()`。

* * *

替代解决方案：

```
var arr = tag_query.split( ', ' );

$( '.element' ).filter(function () {
    var $desc = $( this ).find( '*' );
    return arr.every(function ( className ) {
        return $desc.is( className );
    });
}).show(); 
```

**现场演示：http:** [//jsfiddle.net/DjS2u/2/](http://jsfiddle.net/DjS2u/2/)

# c# - RavenDB - 可选 where 子句

> ID：11195441
> 
> 赞同：9
> 
> 时间：2012-06-25T18:50:29.863
> 
> 标签：c#, ravendb

我想编写一个 RavenDB 查询，如果可用，则按值过滤，但如果该值不可用，我希望它返回所有对象。例如，在 linq to objects 中，我可以这样做：

```
var matches = people.Where(x => x.LastName == userEntry || userEntry == string.Empty).ToList(); 
```

但以下将不起作用：

```
var matches = RavenSession.Query<Person>().Where(x => x.LastName == userEntry || userEntry == string.Empty).ToList(); 
```

因为`userEntry`不是索引值，所以这会引发异常。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T19:47:39.047

根据您对多个可选谓词的评论，您应该能够执行以下操作：

```
var where = new List<Expression<Func<Person, bool>>>();

if (!string.IsNullOrWhitespace(lastName))
    where.Add(p => p.LastName == lastName);

if (!string.IsNullOrWhitespace(firstName))
    where.Add(p => p.FirstName == firstName);

// etc...

var query = session.Query<Person>();

foreach (var clause in where)
    query = query.Where(clause);

var results = query.ToList(); 
```

# objective-c - 在 UIViewController 中接收 UITableViewCell 的 TouchesBegan

> ID：11195442
> 
> 赞同：0
> 
> 时间：2012-06-25T18:50:29.890
> 
> 标签：objective-c, ios, uitableview, touchesbegan

如何从 UITableViewController 中的 UITableViewCell 接收 TouchesBegan，以便知道用户何时触摸某个单元格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:47:11.613

当您触摸 a 单元格时，它会突出显示；当它变为YES（用户触摸）或NO（用户离开）时，尝试`setHighlighted:`在子类中覆盖以调整您的外观。`UITableViewCell`

（覆盖`touchesBegan:withEvent:`也可以，但它更易于使用`setHighlighted:`以便在您不再触摸时进行捕捉；否则您需要覆盖`touchesEnded:withEvent:`and `touchesCancelled:withEvent:`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:53:21.317

如果您正在寻找用户点击单元格时触发的事件，但在正式选择之前，有以下`UITableViewDelegate`方法：

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

从文档中：

> 直到用户触摸一行然后抬起手指时才会调用此方法；直到那时该行才被选中，尽管它在触地时突出显示。您可以使用 UITableViewCellSelectionStyleNone 来禁用触摸时单元格突出显示的外观。当表格视图处于编辑模式（即表格视图的编辑属性设置为 YES）时，不会调用此方法，除非表格视图允许在编辑期间进行选择（即，表格视图的 allowSelectionDuringEditing 属性为设置为是）。

**编辑**

为了实现您正在寻求的行为，我相信您需要子类`UITableViewCell`化并实现该方法

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

您可以在所有 UIView 子类的[`UIResponder`类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/cl/UIResponder)中找到有关事件处理的更多信息。

# php - PDO 语法似乎不正确

> ID：11195443
> 
> 赞同：0
> 
> 时间：2012-06-25T18:50:31.560
> 
> 标签：php, pdo

我是第一次使用 PDO。

```
$result=$dbh->query($query) or die($dbh->errorinfo()."\n");

echo $result->fetchColumn();

$row = $result->fetch(PDO::FETCH_ASSOC); 
```

以下代码的结果是 $row 已初始化，即 isset 但为空。

我不知道我哪里出错了。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:19:34.733

PDO 不执行旧式`mysql_*`代码`do or die()`。

这是正确的语法：

```
try {
    //Instantiate PDO connection
    $dbh = new PDO("mysql:host=localhost;dbname=db_name", "user", "pass");
    //Make PDO errors to throw exceptions, which are easier to handle
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    //Make PDO to not emulate prepares, which adds to security
    $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

    $query = "SELECT * FROM `some_table`";

    //Prepare the statement
    $stmt = $dbh->prepare($query);
    //Execute it (if you had any variables, you would bind them here)
    $stmt->execute();

    //Work with results
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        //Do stuff with $row
    }
}
catch (PDOException $e) {
    //Catch any PDOExceptions that were thrown during the operation
    die("An error has occurred in the database: " . $e->getMessage());
} 
```

您应该阅读**[PDO 手册](http://il.php.net/manual/en/book.pdo.php)**，以更好地理解该主题。

# jsf - 注入 FacesContext 作为会话范围托管 bean 的托管属性

> ID：11195450
> 
> 赞同：2
> 
> 时间：2012-06-25T18:50:46.917
> 
> 标签：jsf, servlets, jsf-1.2, facescontext

我有一个请求范围的 JSF 1.2 托管 bean，我需要将它重构为会话范围的 bean，因为它正在执行一些昂贵的操作，`@PostConstruct`并且被多次调用，实际上只需要执行一次。将范围更改为会话的副作用是现在我不能`FacesContext`再`faces-config.xml`通过这样的方式注入：

```
<managed-property>
 <property-name>context</property-name>
 <value>#{facesContext}</value>
</managed-property> 
```

我在哪里

```
setContext(FacesContext ctx) {} 
```

在我的托管 bean 中。

在我的一种操作方法中，我需要上下文来访问`ExternalContext`/ `HttpServletResponse`。我不想调用

```
FacesContext.getCurrentInstance(); 
```

在我的操作方法中，但以某种方式在`setContext(FacesContext ctx)`外部调用以允许隔离上下文注入，以便于模拟测试。我试着把里面的东西放在`setContext()`里面，`@PostConstruct`后来才意识到这`FacesContext`是每个请求的事情，一旦提交了新的请求，我的`ExternalContext`就被重置了。`null`

尽管托管 bean 本身是会话范围的，但我如何在`setContext(FacesContext ctx)`每次遇到新请求时自动调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:47:11.743

保留您的请求范围 bean 并在其中注入会话范围 bean，以便您可以在请求范围 bean 中将其传递`FacesContext`给它`@PostConstruct`。在会话范围的 bean 中，执行延迟加载/执行。

例如

```
public class RequestBean {

    private FacesContext context; // Managed property.
    private SessionBean sessionBean; // Managed property.

    @PostConstruct
    public void init() {
        sessionBean.init(context);
    }

    // ...
} 
```

和

```
public class SessionBean {

    private SomeObject initializedObject;

    public void init(FacesContext context) {
        if (initializedObject != null) {
            return;
        }

        initializedObject = initializeObject(context);
    }

    // ...
} 
```

# excel - Excel 下拉排序

> ID：11195451
> 
> 赞同：2
> 
> 时间：2012-06-25T18:50:49.703
> 
> 标签：excel, sorting, drop-down-menu

我正在尝试制作一个数据输入 Excel 表，并有一个带有唯一 ID 的下拉列。为了使数据输入更快，我希望最大的数字（和最新的）出现在列表的顶部。

这是下拉查找的公式

```
=OFFSET(Surveys!$S$1,1,0,COUNTA(Surveys!$B:$B)-1,1) 
```

并且当前返回这个作为一个例子

```
621378 on 05/09/2010 at 06:51 by JJ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:42:58.150

你可以在没有 VBA 的情况下做到这一点。查看这篇关于[使用数组公式制作排序列表的](http://www.get-digital-help.com/2009/03/27/sorting-text-cells-using-array-formula/)文章。因此，在 Survey!C:C 中制作一个排序列表并在您的偏移量中引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:39:43.310

缺少编写 VBA 代码（我不确定如何做到这一点），我认为 Microsoft Excel 不可能做到这一点。

# symfony - 如何使用学说 2 管理 Mysql YEAR 类型

> ID：11195453
> 
> 赞同：3
> 
> 时间：2012-06-25T18:50:51.787
> 
> 标签：symfony, doctrine-orm

我只需要一年的存储字段，而不是完整的日期。我可以用学说 2 管理 mysql YEAR 类型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:05:48.413

该映射当前不存在。您将不得不使用字符串或日期字段。或者创建您自己的映射。我不知道所需的确切步骤。但这些参考资料有望有所帮助。

[http://docs.doctrine-project.org/projects/doctrine-dbal/en/2.0.x/reference/types.html#custom-mapping-types](http://docs.doctrine-project.org/projects/doctrine-dbal/en/2.0.x/reference/types.html#custom-mapping-types)

[http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/types.html#custom-mapping-types](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/types.html#custom-mapping-types)

[https://groups.google.com/d/topic/symfony-users/O3Yli0uDKF8/discussion](https://groups.google.com/d/topic/symfony-users/O3Yli0uDKF8/discussion)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T10:16:45.610

我试过了，工作正常：

```
/**
 * @var \Year
 *
 * @ORM\Column(name="year_born", columnDefinition="YEAR", nullable=false)
 */
private $yearBorn; 
```

# sas - SAS：从离散时间间隔开始插入时间序列

> ID：11195454
> 
> 赞同：1
> 
> 时间：2012-06-25T18:50:52.563
> 
> 标签：sas, interpolation

我有以下数据集结构：

```
date    time_in_hours   price   
Sep 03 08   9.76            98  
Sep 03 08   10.43           97  
Sep 03 08   10.98           96      
Sep 03 08   11.48           99      
Sep 04 08   2.35            98      
Sep 04 08   2.58            98.45       
Sep 04 08   3.45            96.3        
Sep 04 08   3.89            96.25       
Sep 04 08   4.18            100     
Sep 05 08   12.65           101     
Sep 05 08   12.96           100.25      
Sep 05 08   13.25           104.35      
Sep 05 08   13.78           98 
```

我的数据是 2008 年和 2009 年的数据。它总共包含 504 个交易日。我的目标是仅在 9.5 到 16 之间的时间间隔内每半小时插入一次价格（例如 9.5 10 10.5 11 11.5...等）。

鉴于我必须为每个日历日期的特定时间间隔进行插值，我一直在使用 interpolate / aggregate 命令苦苦挣扎。我的最终输出还必须包含日期、时间和价格。像这样的东西：

```
date    time_in_hours   price   
Sep 03 08   10           98  
Sep 03 08   10.5         97  
Sep 03 08   11           96      
Sep 03 08   11.5         99      
Sep 04 08   2.5          98      
Sep 04 08   3            98.45 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:03:16.493

下面的代码为您提供了您所说的输出，但根据上面的所有评论，我不确定它是否会完全解决您的问题。请注意，round(x, 0.5) 以 0.25 作为边界 - 所以 2.74 变为 2.5，而 2.75 变为 3。

```
data test;
infile datalines dsd;
input date :$20\. time_in_hours price;
datalines;
Sep 03 08,9.76,98
Sep 03 08,10.43,97
Sep 0308,10.98,96
Sep 03 08,11.48,99
Sep 04 08,2.35,98
Sep 04 08,2.58,98.45
Sep 04 08,3.45,96.3
Sep 04 08,3.89,96.25
Sep 04 08,4.18,100
Sep 05 08,12.65,101
Sep 05 08,12.96,100.25
Sep 05 08,13.25,104.35
Sep 05 08,13.78,98
;
run;

proc print;
run;

data test2;
    set test(rename = (time_in_hours = old_time_in_hours));
    time_in_hours = round(old_time_in_hours, 0.5);
    if (9.5 <= time_in_hours <= 16);
run;

proc print;
run; 
```

# asp.net - ASP.NET SiteMap 显示所有节点

> ID：11195459
> 
> 赞同：0
> 
> 时间：2012-06-25T18:51:03.523
> 
> 标签：asp.net, sitemap

我有一个 .sitemap 文件，其中包含我要为侧面导航显示的所有节点。当我到达子级别时，我无法显示我的所有节点。当我访问子页面时，一切都消失了。换句话说，当我在 homepage.aspx 页面中时，我的所有节点都是可见的。当我进入 level1a.aspx 页面时，所有的节点都消失了。我后面没有代码。是否有显示所有节点的设置？或者我需要编写代码来显示它们吗？

以下是文件：web.config

```
 <siteMap>
        <providers>
    <add name="SiteMap" type="System.Web.XmlSiteMapProvider" siteMapFile="~/my.sitemap" />
        </providers>
    </siteMap> 
```

控制.ascx

```
<asp:SiteMapDataSource ID="SiteMapDataSource1" SiteMapProvider="SiteMap" runat="server" />
<asp:Menu ID="Menu1" runat="server" DataSourceID="SiteMapDataSource1"></asp:Menu> 
```

我的站点地图

```
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
<siteMapNode url="/HomePage.aspx" title="Home Page"  description="">
  <siteMapNode url="/level1.aspx" title="Level 1"  description="">
    <siteMapNode url="/level1a.aspx" title="Level 1 A"  description="" />
    <siteMapNode url="/level1b.aspx" title="Level 1 B"  description="" />
  </siteMapNode>
</siteMapNode>
</siteMap> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:14:59.083

我刚做了实验，效果很好...

仔细检查您的所有页面是否包含对您的用户控件的引用

这就是我所做的

加州大学

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="MyMenuUC.ascx.cs" Inherits="WebApplication1.MyMenuUC" %>
<asp:SiteMapDataSource runat="server" ID="mySiteMapDataSource" ShowStartingNode="false" />
<asp:Menu runat="server" DataSourceID="mySiteMapDataSource"></asp:Menu> 
```

网站地图

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
    <siteMapNode url="~/Default.aspx" title="Home"  description="">
        <siteMapNode url="~/MenuWithUC1.aspx" title="page 1"  description="" />
        <siteMapNode url="~/MenuWithUC2.aspx" title="page 2"  description="" />
    </siteMapNode>
</siteMap> 
```

MenuWithUC1.aspx

```
 <%@ Register Src="~/MyMenuUC.ascx" TagName="SharedMenu" TagPrefix="menu" %>
    ....
    <menu:SharedMenu runat="server" />
    <asp:Button ID="Button1" Text="post me" runat="server" /> 
```

MenuWithUC2.aspx

```
 <%@ Register Src="~/MyMenuUC.ascx" TagName="SharedMenu" TagPrefix="menu" %>
    ....
    <menu:SharedMenu runat="server" />
    <asp:Button Text="post me" runat="server" /> 
```

每个页面上的按钮只是为了测试`Menu`控件在每个帖子上保持其状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:13:59.030

尝试 EnableViewState = true

```
<asp:Menu ID="Menu1" runat="server" DataSourceID="SiteMapDataSource1" EnableViewState="true"></asp:Menu> 
```

# delphi - 通过 Socks 代理发出 http 请求

> ID：11195462
> 
> 赞同：-1
> 
> 时间：2012-06-25T18:51:06.100
> 
> 标签：delphi, indy, socks

我有一个 socks 代理，我需要发出一个 HTTP Get 请求

我尝试使用此示例（[http://www.indyproject.org/KB/index.html?howdoiseaproxywithindy.htm](http://www.indyproject.org/KB/index.html?howdoiuseaproxywithindy.htm)）使用 indy，但我总是收到错误：

> 连接正常关闭。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:23:18.957

处理这种情况的正确方法是将`TIdIOHandlerStack`组件分配给`TIdHTTP.IOHandler`属性，然后将`TIdSocksInfo`组件分配给`TIdIOHandlerStack.TransparentProxy`属性，然后根据需要进行配置`TIdSocksInfo`。

# iis - 如何在 IIS 7.x 中恢复 x-server 变量

> ID：11195465
> 
> 赞同：2
> 
> 时间：2012-06-25T18:51:10.297
> 
> 标签：iis, web-config, http-headers, iis-7.5, web-farm

我不确定这是否是 IIS 7 中的更改，或者我之前的某个人是否主动从 HTTP 响应标头中删除了 X-Server，但我需要能够判断场中的哪个服务器为当前页面提供服务。我在 IIS 的自定义变量部分中没有看到 X-Server，但我不确定它是否是一个自定义变量，或者它是否处于默认值并且已通过 web.config 禁用。如何找回我的标题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T22:06:40.177

您可以使用自定义标头 ( [http://www.iis.net/ConfigReference/system.webServer/httpProtocol/customHeaders](http://www.iis.net/ConfigReference/system.webServer/httpProtocol/customHeaders) ) 添加您喜欢的任何标头。

# php - PHP - 相对 URL 到绝对 URL

> ID：11195472
> 
> 赞同：0
> 
> 时间：2012-06-25T18:51:50.727
> 
> 标签：php, parsing, url, global, local

我正在解析 HTML 文件并解析出链接。有时它会遇到类似的情况：

```
./dir/dir/lol.html 
```

我的问题是如何将其转换为绝对 url，解析器知道如果找到链接的 URL。

例如：

```
parses: http://www.website.com/lol/index.html
find: ./dir/dir/haha.html 
```

那我怎么能把它组合成：

```
http://www.website.com/lol/dir/dir/haha.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:57:32.030

您可以使用[parse_url()](http://www.php.net/manual/en/function.parse-url.php)将 URL 分解为其组件，最重要`PHP_URL_PATH`的是找出 URL 的路径部分。

# mysql - 如何将 'id' 从 mysql 查询绑定到 $_SESSION

> ID：11195477
> 
> 赞同：0
> 
> 时间：2012-06-25T18:52:06.683
> 
> 标签：mysql, session, pdo

我正在尝试将 $_SESSION 设置为 mysql 查询中的“id”。我怎么做？

```
public function Login($email, $pass){
        if(!empty($email) && !empty($pass)){
            $st = $this->db->prepare("select email, pass, id from login where email=? and pass=?");
            $st->bindParam(1, $email);
            $st->bindParam(2, $pass);
            $st->execute();

            if ($st->rowCount() == 1){
                //login correctly
                $_SESSIONS['user_id'] = XXX;
                header('Location: main.php');
            } else{

            echo "Wrong password";
            }
        } else {
            echo "Please enter username and password";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:13:14.450

这是我的答案：

```
public function Login($email, $pass){       
    if(!empty($email) && !empty($pass)){
        $st = $this->db->prepare("select email, pass from login where email=? and pass=?");
        $st->bindParam(1, $email);
        $st->bindParam(2, $pass);
        $st->execute();

        if ($st->rowCount() == 1){
            //login correctly
            $_SESSIONS['user_id'] = $st->fetchALL(); 
            header('Location: main.php');
        } else{
            echo "Wrong password";
        }
    } else {
        echo "Please enter username and password";
    }
} 
```

# excel - Excel图表日期和计数

> ID：11195482
> 
> 赞同：1
> 
> 时间：2012-06-25T18:52:14.477
> 
> 标签：excel, graph

我有一个日期+时间列表和每个时间的计数，例如：

```
Date/Time             Count
6/19/12 3:00 AM         1
6/19/12 4:00 AM         1
6/19/12 5:00 AM        79
6/19/12 6:00 AM       322
6/19/12 7:00 AM       275
6/19/12 8:00 AM       143 
```

我想根据小时绘制图表，但是当我选择数据并绘制它时，excel 会将一天中的所有时间组合在一起。我想随着时间的推移看到趋势。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:05:16.053

将轴格式化为文本轴 - Excel 希望将其格式化为日期轴，其最小分辨率为 1 天

![在此处输入图像描述](../Images/ac338ee40212c97df75f143d9817068c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:09:44.903

我做了一些测试，我所做的是使用数据绘制图表，然后将日期列的格式更改为通用数字，这给了我我的趋势线，然后将图表中水平访问日期值的格式更改为日期格式。必须有一个更简单的方法，虽然这目前有效。使用 Excel 2010。

# svn - 在 Subversion 中尝试撤消更改示例时发生冲突

> ID：11195483
> 
> 赞同：8
> 
> 时间：2012-06-25T18:52:16.573
> 
> 标签：svn, merge

在探索 Subversion 中的功能时，我尝试测试[svnbook](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.basicmerging.undo)的分支和合并章节的基本合并部分的**撤消更改**小节中描述的用例。我使用的是 1.6.4 版本，但该部分的文本在本书的两个版本中是相同的。

在我的工作副本目录中，我编辑了一个文件 testcode.py，每次编辑添加一行，并在每次编辑后提交。几次提交后，文件内容如下：

```
this is my first import to trunk.  r1.

this is my first commit, first edit of testcode.py.  r2.

this is another edit of testcode.py.  r3.

this is an edit of testcode.py.  i'll get rid of this one.  r4.

this is another edit of testcode.py.  keeping it.  r5.

yet another edit.  keeping it.  r6. 
```

存储库中的修订号与文件中的行匹配，因此在 /trunk/testcode.py@rN 中，文件的最后一行是以 rN 结尾的行。我想要做的是删除以 r4 结尾的行，保持之前和之后的所有其他内容不变。

按照 svnbook 的 Undoing Changes 部分中的示例，我运行命令

```
svn merge -c -4 file:///path_to_repos/trunk 
```

这会产生冲突（在运行该命令时，而不是在提交时），其中合并左文件包含直到第 r4 行的所有内容，而合并右文件包含直到第 r3 行的所有内容。换句话说，该命令不是删除过去的更改，而是希望将整个文件恢复到修订版 3 或 4，从而删除后续修订版（在本例中为 5 和 6）中的更改。

我在 svnbook 中阅读示例的方式，它让用户撤销在修订版 303 中提交的更改并将结果提交到修订版 350 没有冲突，我运行的命令应该生成一个 svn 状态为 M 的文件，该文件保留所有以 r4 结尾的行除外。

我是否错误地阅读了本书的示例，示例是否错误，或者是否有其他形式的用户错误我没有意识到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T21:24:07.910

基本问题是 Subversion 的 diff 算法以一种不一定直观的方式处理文件开头和结尾的更改。您的示例遇到了这种极端情况，而野外的大多数变化都没有。考虑在一系列提交之后看起来像这样的文件：

```
later commit (r5)
change to be reverted at beginning of file (r2)
initial commit (r1)
change to be reverted in middle of file (r3)
initial commit (r1)
change to be reverted at end of file (r4)
later commit (r5) 
```

尝试将提交还原到文件的开头或结尾（示例中的修订版 2 和 4）会产生冲突。将更改还原到文件中间按预期工作。

从概念上讲，将变更集视为具有受周围线条限制的范围可能会有所帮助。对文件中间的更改以周围未更改的行为界。文件开头或结尾处的更改范围一直延伸到文件的开头或结尾，*无论该点随后移动多远*。

因此，在上面的示例中，修订版 5 中添加的第二行正好位于修订版 4 范围的中间。就像您期望在此处恢复修订版 10 的冲突一样，因为修订版 11 中的更改在它的中间是 smack dab：

```
...                    <-- Line unchanged by revision 10, bounding its scope
line from revision 10  <--\
line from revision 11     | Revision 10's scope
line from revision 10  <--/
...                    <-- Line unchanged by revision 10, bounding its scope 
```

出于同样的原因，您应该在这里期待冲突：

```
...                    <-- Line unchanged by revision 10, bounding its scope
line from revision 10  <--\
line from revision 11     | Revision 10's scope
<EOF>                  <--/ (No unchanged line bounding the scope this direction) 
```

请注意，这只是对为什么文件的开头和结尾看似不同的原因的概念解释，而不是理解 Subversion 合并过程的全面解释。

# c - 全局变量编译错误

> ID：11195487
> 
> 赞同：2
> 
> 时间：2012-06-25T18:52:35.217
> 
> 标签：c, header-files

我在名为 variables.h 的头文件中定义了一些外部变量，如下所示：

```
#ifndef VARIABLES_H
#define VARIABLES_H

extern int var1;
extern int var2;

#endif 
```

然后我将它添加到我的源文件中。

编译器警告我以下内容：

```
error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘var1’ 
```

这对每个变量都进行，并在最终变量处结束。

问题是什么？

每个变量的错误都出现在 variables.h 中。

文件.h：

```
#ifndef FILE_H
#define FILE_H

void do_sth(void);  

void do_sth_else(void);

#endif 
```

文件.c：

```
#include "variables.h"

/* Quit */
void do_sth(void) { 
/* do sth */
}

void do_sth_else(void) { 
/* do sth else */
} 
```

就这样。错误是：

```
error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘var1’

error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘var2’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:51:06.177

您发布的标题的一个明显问题是它们声明了可能不在范围内的类型的变量。例如，您声明

```
extern GtkLabel *status_label; 
```

但没有

```
#include <gtk/gtk.h> 
```

在文件的顶部。当您包含`variables.h`from`main.c`时，您应该可以，因为`<gtk/gtk.h>`包含在前面`variables.h`。在所有其他文件中，您都会遇到问题，因为`GtkLabel`是未知类型。

要更正此问题，请在文件`<gtk/gtk.h>`顶部`variables.h`包含。然后创建一个简单的项目，其中包含`variables.h`和一个简单`main.c`的，包括`variables.h`：

主程序

```
#include "variables.h"

int main() {
    return 0;
} 
```

继续添加缺少的标头，直到这个简单的`main.c`编译。然后将您添加`variables.h`到实际项目中，问题应该会消失。

# javascript - stopPropagation 似乎不起作用

> ID：11195491
> 
> 赞同：3
> 
> 时间：2012-06-25T18:52:49.413
> 
> 标签：javascript, javascript-events

我正在尝试在具有单击事件的 DIV 块内实现链接。

如果用户单击链接，我希望外部 DIV 单击事件不运行。

我的链接看起来像：

```
<a href="javascript: openVideo('videoID', this, event); " >Watch the video</a> 
```

和 javascript 看起来像：

```
 function openVideo(video, object, event) {

    $(object).html($(object).html()+"<iframe width='360' height='315' src='http://www.youtube.com/embed/"+video+"' frameborder='0' allowfullscreen></iframe>");

    event.stopPropagation();
 } 
```

不幸的是，当我单击链接时，它会执行外部 DIV 代码。并显示与 stopPropogation 方法相关的错误：

```
Uncaught TypeError: Cannot call method 'stopPropagation' of undefined 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T18:58:06.440

因为没有事件被调用。尝试这样称呼它：

```
<a href="#" onclick="openVideo('videoID', this, event); " >Watch the video</a> 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:01:05.950

我看到你正在使用 jQuery。它不应该以这种方式使用。您传递的事件对象是浏览器的本机事件对象。jQuery 的事件对象提供了一个 stopPropagation 函数。

要正确使用 jQuery，您必须让 jQuery 绑定事件而不是内联。

```
<a href="#" class="openVideo" data-video="videoID" >Watch the video</a>

<script type='text/javascript'>
    $(document).ready(function() {
        $(".openVideo").click(function(ev) {
            ev.preventDefault();
            ev.stopPropagation();
            var videoID = $(this).data('video');
            $(this).append("<iframe width='360' height='315' src='http://www.youtube.com/embed/"+videoID+"' frameborder='0' allowfullscreen></iframe>");
        });
    });
</script> 
```

*编辑：使用 jQuery 1.4.3 或更高版本，您可以使用委托，因此您不必将事件直接附加到锚点，而是附加到它的祖先之一。（jQuery 1.7 使用该`.on`方法来实现同样的事情）。* 这是一个使用 jQuery 1.7 的示例：http: [//jsfiddle.net/Tu9Hm/](http://jsfiddle.net/Tu9Hm/)

```
<a href="#" class="openVideo" data-video="videoID" >Watch the video</a>

<script type='text/javascript'>
    $(document).ready(function() {
        $(document).on('click', '.openVideo', function(ev) {
            ev.preventDefault();
            ev.stopPropagation();
            var videoID = $(this).data('video');
            $(this).append("<iframe width='360' height='315' src='http://www.youtube.com/embed/"+videoID+"' frameborder='0' allowfullscreen></iframe>");
        });
    });
</script> 
```

使用委托会付出很小的性能损失，因此请尝试将事件放置在 DOM 中可能的最低元素上。另外，如果你把代理放在文档上，你不能真正停止传播，因为它已经到达顶部，虽然我相信你真的更关心`preventDefault()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:02:10.580

**编辑**：我撒谎了；`stopPropagation`不是[jQuery 独有的](http://www.quirksmode.org/js/events_order.html)。选择j08691[的答案](https://stackoverflow.com/a/11195558/105570)。

~~据我所知`stopPropagation`，这是一个 jQuery 函数，这意味着您需要由 jQuery 事件处理程序创建的事件对象来调用它。~~

这是一种方法：

```
<a id="open-video-link" href="javascript: void(0);">Watch the video</a>

<script type="text/javascript">
  $("#open-video-link").click(function(event) {
    openVideo("videoID", this, event);
  });
</script> 
```

当然，对我刚刚写的东西持保留态度，因为我的知识模糊不清，根本没有查过。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-25T19:01:43.937

尝试

```
 $("a").on("click", function (e) {
            e.stopPropagation ();
        }); 
```

# c# - 如何从 MVC3 中的编辑页面更新视图模型？

> ID：11195494
> 
> 赞同：6
> 
> 时间：2012-06-25T18:53:03.727
> 
> 标签：c#, asp.net, asp.net-mvc-3, viewmodel

我有三个模型一起创建一个视图模型，我希望能够在单击“编辑”时编辑该视图模型。我找不到一个直接的例子来说明它是如何工作的（在任何地方）。

我不确定我是否走在正确的道路上。我能够通过数据获得视图。在这一点上，我无法保存它。

任何帮助，将不胜感激。

谢谢！

楷模：

```
 public class Person
{
    [Key]
    public int Id { get; set; }

    [MaxLength(20)]
    [Required(ErrorMessage = "First name is required.")]
    public string FirstName { get; set; }

    [MaxLength(20)]
    [Required(ErrorMessage = "Last name is required.")]
    public string LastName { get; set; }
    [MaxLength(40)]
    [Required(ErrorMessage = "Email is required.")]
    public string Email { get; set; }
    [MaxLength(20)]
    [DataType(DataType.PhoneNumber)]
    public string Phone { get; set; }

    public bool Active { get; set; }
}

    public class ClientContact
{
    [Key]
    [ForeignKey("Person")]
    public int ClientPersonId { get; set; }
    public int ClientId { get; set; }
    [MaxLength(40)]
    public string Title { get; set; }

    public Person Person { get; set; }
    [ForeignKey("ClientId")]
    public Client Client { get; set; }
}

    public class Client
{
    [Key]
    public int ClientId { get; set; }
    public string Name { get; set; }
    public bool Active {get;set;}

} 
```

查看型号：

```
 public class ClientContactViewModel
{

    private SimplexDB db = new SimplexDB();

    public ClientContactViewModel()
    { 

    }

    public ClientContactViewModel(int id)
    {
        ClientPersonId = id;
        InitializeClientContact();
    }

    public int ClientPersonId { get; set; }

    [Display(Name = "First Name")]
    public string FirstName { get; set; }
    [Display(Name = " Last Name")]
    public string LastName { get; set; }
    [Display(Name = "Title")]
    public string Title { get; set; }
    [Display(Name = "Email Address")]
    public string Email { get; set; }
    [Display(Name = "Phone")]
    public string Phone { get; set; }
    [Display(Name = "Client Name")]
    public int ClientId { get; set; }

    public SelectList Clients
    {
        get
        {
            return new SelectList(db.Clients, "ClientId", "Name");

        }
    }

    private void InitializeClientContact()
    {
        var contact = db.ClientPersons.Include("Person").Where(x => x.ClientPersonId == ClientPersonId).SingleOrDefault();
        if (contact != null)
        {
            FirstName = contact.Person.FirstName;
            LastName = contact.Person.LastName;
            Title = contact.Title;
            Email = contact.Person.Email;
            Phone = contact.Person.Phone;
            ClientId = contact.ClientId;

        }
    }

} 
```

控制器：

```
 public class ClientContactController : Controller
    {
        private database db = new database();

//
        // GET: /ClientContact/Edit/5

        public ActionResult Edit(int id)
        {
            return View(new ClientContactViewModel(id));
        }

        //
        // POST: /ClientContact/Edit/5

        [HttpPost]
        public ActionResult Edit(ClientContactViewModel model)
        {
            if (ModelState.IsValid)
            {
                db.Entry(model).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(model);
        }
} 
```

我在 db.Entry(model).State...“实体类型 ClientContactViewModel 不是当前上下文模型的一部分。”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T18:56:53.873

您的 ViewModel 不是实体。您应该将 ViewModel 映射到您的实体，然后将实体的状态设置为已修改。

基本上，这意味着您应该使用视图模型值设置实体值。您可以使用[AutoMapper](http://automapper.org/)或手动处理它：

```
 [HttpPost]
    public ActionResult Edit(ClientContactViewModel model)
    {
        if (ModelState.IsValid)
        {
            ClientContact contact = db.ClientPersons.Include("Person")
                                    .Where(x => x.ClientPersonId == model.ClientPersonId)
                                    .SingleOrDefault();
            contact.FirstName = model.FirstName;
            // etc
            db.Entry(contact).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(model);
    } 
```

有关在 MVC 中使用 ViewModel 的绝佳方法，请参阅[http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/ 。](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)

此外，我强烈建议不要在您的 ViewModel 中进行任何数据访问。在您的 Controller 中执行此操作，或者更好的是，在您的 Controller 使用的存储库中执行此操作。模型绑定不能很好地与具有逻辑的模型一起使用（即它们不应该包含比简单的 get/set 属性更多的东西）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T19:01:02.797

您需要在 GET 操作中将模型的属性移动到视图模型。在 POST 操作中，从数据库中获取原始模型，使用视图模型中的数据更新模型，然后保存更改。您的模型本质上是数据库中表的表示。您的视图模型就是屏幕上显示的内容。

```
[HttpPost] 
    public ActionResult Edit(ClientContactViewModel model) 
    { 
        if (ModelState.IsValid) 
        { 

           var client = db.Client.Where(c => c.Id = model.ClientPersonId);
           client.FirstName = model.FirstName;

           ...etc through all your properties and other models...

            db.Entry(model).State = EntityState.Modified; 
            db.SaveChanges(); 
            return RedirectToAction("Index"); 
        } 
        return View(model); 
    } 
```

有更巧妙的方法可以做到这一点，但这代表了没有抽象的想法。

# ruby - 模块 Mixin 实例跟踪器

> ID：11195502
> 
> 赞同：0
> 
> 时间：2012-06-25T18:53:27.417
> 
> 标签：ruby, class, object, module, mixins

我有以下一段代码，它跟踪一个类有多少个实例：

```
module InstanceTracker
  def self.instances
    counter = 0
    ObjectSpace.each_object do |i|
      if i.class == self
        counter += 1
      end
    end
    return counter
  end
end 
```

我希望最终用户能够做的是：

```
class Foo
  include InstanceTracker
end 
```

但是当我这样做时，我得到一个`NoMethodError`for `Foo.instances`。如果我将 InstanceTracker 设为一个类并执行以下操作，则效果很好：

```
class Foo < InstanceTracker; end 
```

我怎样才能使它成为一个模块混合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:13:39.327

我玩了一点你的代码。显然，您将实例的类与调用者进行比较，而不是调用者的类。尝试这个：

```
module InstanceTracker
  def instances
    counter = 0
    ObjectSpace.each_object do |i|
      if i.class == self.class
        counter += 1
      end
    end
    return counter
  end
end 
```

为我工作。

另外，请注意`self`in`def self.instances`将导致您的代码失败。对于实例方法声明，使用方法的简单名称。

顺便说一句，您的代码将导致解释器遍历每个对象并在每个方法调用中测试每个对象。我建议你破解类的`new`方法，以便它增加一个类变量，使这个变量可以通过属性读取器访问。

# arduino - Arduino以太网

> ID：11195503
> 
> 赞同：0
> 
> 时间：2012-06-25T18:53:46.713
> 
> 标签：arduino, ethernet

我想将传感器收集的数据发送到我用 Java 创建的 Web 服务器。

例如，我想发送一个简单的整数，`1`例如当传感器的温度超过阈值作为第一次测试时，但我不知道如何。我设法做到了，我的意思是让 Arduino 作为服务器，并通过在浏览器中输入我分配给开发板的 IP 地址来查看这些结果，但我真正感兴趣的是发送数据而不是查看它们。我怎么做？一个小例子是什么？

我试过 EthernetClient 类，但我不能做我想做的事：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:28:58.450

只需发送一个[GET](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)。例如，`www.yourwebsite.com/arduinoreader.php?sensor=on`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-21T20:41:53.840

Arduino 网站上有一个很好的例子，它准确地展示了如何做到这一点。本质上，您将调用`client.connect("www.xxx.xxx", 80)`where`client`是`EthernetClient`类的对象，然后使用`client.println()`. 您实际上将自己发送 HTTP 标头和数据，但此页面向您展示了如何在代码部分执行此操作：[https](https://www.arduino.cc/en/Tutorial/WebClient) ://www.arduino.cc/en/Tutorial/WebClient 。

在该示例中，您可以将 替换为以下内容`client.println("GET /search?q=arduino HTTP/1.1");`：

```
client.print("GET /api?temp=");
client.print(TEMP_VALUE);
client.println(" HTTP/1.1"); 
```

# mysql - 如何在 MySQL 数据库中查找满足多个条件的条目的 ID？

> ID：11195504
> 
> 赞同：2
> 
> 时间：2012-06-25T18:54:05.653
> 
> 标签：mysql, search

我在 MySQL 数据库中有一个表，其中包含人的 ID 'pid' 和`city`这些人居住的城市的名称。由于每个人在他/她的生活中可能住在多个城市，一个人可以拥有多个该表中的条目。

```
PID | CITY
1   | Berlin
1   | New York

2   | Berlin
2   | Oslo
2   | New York
2   | Mexiko City

3   | Oslo

4   | Berlin
4   | Oslo
4   | Bagdad
4   | New York
4   | Mexiko City 
```

我想知道两/三件事：

1.  那些`pid`住在“柏林”和“纽约”的人是谁（结果应该是 [1, 2, 4]）
2.  人们居住的其他城市是什么，曾经居住在“柏林”和“纽约”（结果应该是[“奥斯陆”，“墨西哥城”，“巴格达”]）
3.  获得计数会更好，这些城市在表格中出现的频率。（结果应该是 ["Oslo" -> 2 , "Mexiko City" -> 2, "Bagdad" -> 1])

我如何设计我的查询，找出这些东西（而不是让我的数据库服务器压力过大）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:06:37.807

您可以在一个查询中完成所有这些操作：

```
SELECT
    a.pid,
    COALESCE(b.city, 'No other cities') AS othercity,
    COUNT(c.city) AS OverallCityCount
FROM
    (
        SELECT pid
        FROM tbl
        WHERE city IN ('New York', 'Berlin')
        GROUP BY pid
        HAVING COUNT(*) = 2
    ) a
LEFT JOIN
    tbl b ON a.pid = b.pid AND b.city NOT IN ('New York', 'Berlin')
LEFT JOIN
    tbl c ON b.city = c.city
GROUP BY
    a.pid, 
    b.city 
```

子选择`FROM`回答问题一，它只得到他们在纽约**和**柏林`pid`都住过的地方。

 **由于子选择每 只返回一行`pid`，因此我们必须`pid`再次将结果 s 与表连接以回答问题 2（获取所有居住在`pid`纽约和柏林的 s 的城市）。如果用户居住在纽约和柏林，但不是任何其他城市，我们不想排除那个 pid，所以我们使用`LEFT JOIN`. 如果没有其他城市，则该`city`字段将是`No other cities`。

现在要计算该城市在表中出现的次数，无论`pid`，我们再次在表上自加入`city`字段。当这个连接发生时， 的组合`pid -> city`将出现与表中那个城市一样多的次数，所以为了得到计数，我们`GROUP BY`和`pid`，`city`其中`COUNT()`给出了城市出现次数的计数桌子。如果没有`pid`居住过的其他城市，则此计数将为 0。

使用您的示例数据，结果集将如下所示：

```
pid | othercity        | OverallCityCount
-----------------------------------------
1   | No other cities  | 0
2   | Oslo             | 3
2   | Mexiko City      | 2
4   | Oslo             | 3
4   | Bagdad           | 1
4   | Mexiko City      | 2 
```

[http://www.sqlfiddle.com/#!3/2bb23/2/0](http://www.sqlfiddle.com/#!3/2bb23/2/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:07:19.897

1) 搜索两个城市`pid`，通过统计列表中匹配城市的记录数，并检查是否等于匹配城市的总数，找到所有匹配所有城市的城市。

```
select
  pid
from
  PlacesLived
where
  city in ('Berlin', 'New York')
group by
  pid
having
  count(*) = 2 
```

演示：[http ://www.sqlfiddle.com/#!3/645ea/1](http://www.sqlfiddle.com/#!3/645ea/1)

* * *

2) 查询 (1) 中发现的人们居住的不同城市列表，减去您要验证的城市（柏林和纽约）：

```
select distinct
  city
from
  PlacesLived
where pid in (
  select
    pid
  from
    PlacesLived
  where
    city in ('Berlin', 'New York')
  group by
    pid
  having
    count(*) = 2
)
and city not in ('Berlin', 'New York') 
```

演示：[http ://www.sqlfiddle.com/#!3/645ea/3](http://www.sqlfiddle.com/#!3/645ea/3)

* * *

3）添加 group by 和 count 以获得实际计数：

演示：[http ://www.sqlfiddle.com/#!3/645ea/4](http://www.sqlfiddle.com/#!3/645ea/4)**

# java - 增加 CXF OneWayProcessorInterceptor 中的执行程序队列大小

> ID：11195506
> 
> 赞同：2
> 
> 时间：2012-06-25T18:54:10.247
> 
> 标签：java, web-services, configuration, cxf

我收到以下警告，然后是 NPE，其服务使用 CXF (2.5.2) 创建，在 Jetty 上运行。有人知道如何按照警告中的建议增加执行程序队列的大小吗？

```
org.apache.cxf.interceptor.OneWayProcessorInterceptor handleMessage
WARNING: Executor queue is full, run the oneway invocation task in
caller thread. Users can specify a larger executor queue to avoid
this.

WARNING: Interceptor for
{http://docs.oasis-open.org/wsn/bw-2}MyPublishService#{http://docs.oasis-open.org/wsn/bw-2}Notify
has thrown exception, unwinding now
java.lang.NullPointerException
       at org.apache.cxf.jaxws.context.WrappedMessageContext.<init>(WrappedMessageContext.java:107)
       at org.apache.cxf.jaxws.JAXWSMethodInvoker.invoke(JAXWSMethodInvoker.java:53)
       at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:75)
       at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
       at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
       at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
       at java.util.concurrent.FutureTask.run(FutureTask.java:166)
       at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
       at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:106)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
       at org.apache.cxf.phase.PhaseInterceptorChain.resume(PhaseInterceptorChain.java:232)
       at org.apache.cxf.interceptor.OneWayProcessorInterceptor.handleMessage(OneWayProcessorInterceptor.java:143)
       ... 
```

**更新**：感谢接受的答案，我创建了一个包含以下 spring bean 的 xml 文件：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

    <bean id="cxf.default.workqueue" class="org.apache.cxf.workqueue.AutomaticWorkQueueImpl">
        <property name="name" value="default" />
        <property name="queueSize" value="512" />
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:44:55.787

它不容易配置（您需要将自己的实例注册`AutomaticWorkQueue`到应用程序的总线中）。处理`@OneWay`调用的最大线程数的默认值为 256，这意味着服务器最多可以同时处理 256 个`@OneWay`请求而不会阻塞调用者线程。

[在您的情况下，您可以根据规范http://grepcode.com/file/repo1.maven.org/maven2](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-rt-core/2.1.4/org/apache/cxf/workqueue/AutomaticWorkQueueImpl.java)`org.apache.cxf.workqueue.AutomaticWorkQueueImpl`创建具有属性`name="default"`并设置队列大小和初始线程数、上限和下限的类型的 spring bean [/org.apache.cxf/cxf-rt-core/2.1.4/org/apache/cxf/workqueue/AutomaticWorkQueueImpl.java](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-rt-core/2.1.4/org/apache/cxf/workqueue/AutomaticWorkQueueImpl.java)

# ruby-on-rails - 如何在 Ruby on Rails 中查看嵌套模型？

> ID：11195507
> 
> 赞同：0
> 
> 时间：2012-06-25T18:54:10.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, networking, network-programming

我已经重建了我的网络地图，现在我似乎无法让我的嵌套模型工作。它设置为 IDF => Switch（每个 IDF 有许多开关）。我试图能够列出 IDF 的开关，但出现以下错误：

Mysql2::Error：'where 子句'中的未知列'switches.idf_id'：SELECT `switches`.* FROM `switches` WHERE `switches`。`idf_id`= 1

我假设由于某种原因，当为交换机构建 mysql 表时，没有将其映射到交换机 ID 的列。我不知道为什么不是。我已经编辑了模型并重新编写了几次项目，但我不知道缺少什么。任何帮助将非常感激！

应用程序/模型/idf.rb：

```
class Idf < ActiveRecord::Base
  attr_accessible :location, :room_number
  has_many :switches
  accepts_nested_attributes_for :switches
end 
```

应用程序/模型/switch.rb：

```
class Switch < ActiveRecord::Base
  attr_accessible :model, :title
  belongs_to :idf
end 
```

应用程序/视图/idfs/show.html.erb：

```
<p id="notice"><%= notice %></p>

<p>
  <b>Location:</b>
  <%= @idf.location %>
</p>

<p>
  <b>Room number:</b>
  <%= @idf.room_number %>
</p>

<h2>Switches:</h2>
<%= render @idf.switches %>

<h2>Add a switch:</h2>
<%= render "switches/form" %>

<%= link_to 'Edit', edit_idf_path(@idf) %> |
<%= link_to 'Back', idfs_path %> 
```

^^在我尝试添加开关功能之前一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:58:57.667

这听起来像是您的 Switch 数据库迁移的问题。你能粘贴迁移吗？您是手动生成迁移和模型，还是使用“rails generate ...”？

您的迁移应类似于：

```
class AddSwitch < ActiveRecord::Migration

  #assuming Rails 3
  def change
    create_table :switches do |t|
      # Add attributes
      t.references :idf  # same as t.integer :idf_id
    end
  end

end 
```

# python - 需要记忆函数才能像函数一样嘎嘎作响

> ID：11195508
> 
> 赞同：1
> 
> 时间：2012-06-25T18:54:18.323
> 
> 标签：python, memoization

在我的一些代码中，我使用了 Python 装饰器库中漂亮的[记忆](http://wiki.python.org/moin/PythonDecoratorLibrary#Memoize)类。

我正在使用的库之一对函数使用自省来获取它需要的参数数量，但在装饰函数上失败。具体来说，它检查`co_argcount`变量。

```
if (PyInt_AsLong(co_argcount) < 1) {
      PyErr_SetString(PyExc_TypeError, "This function has no parameters to mini\
mize."); 
```

似乎 argcount 没有被转移到 memoized 函数中。

```
>>> def f(x):
...     return x
... 
>>> f.func_code.co_argcount
1
>>> g = memoized(f)
>>> g.func_code.co_argcount
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'memoized' object has no attribute 'func_code' 
```

如何修改 memoized 类，使我的 memoized 函数看起来、尝起来和闻起来都像原始函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:36:18.650

您需要创建一个*保留签名的装饰器*。最简单的方法是使用库[http://pypi.python.org/pypi/decorator](http://pypi.python.org/pypi/decorator)，它负责为您保留签名。

该库的内部结构非常丑陋（它使用了*`exec`*！），但它很好地封装了它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:00:23.917

将其添加到您的`memoized`班级

```
def __getattr__(self, name):
    if name.startswith('func_'):
        return getattr(self.func, name)
    raise AttributeError 
```

所以它会将属性查找传递`func_...`给原始函数。

也许您还想编写一个`__setattr__`函数来拒绝写入这些属性，但如果您知道您不会尝试更改这些值，则没有必要。

# java - 程序在没有异常但带有 TRACE 消息的 Hibernate 查询期间停止工作：... 允许代理方法

> ID：11195512
> 
> 赞同：1
> 
> 时间：2012-06-25T18:54:35.457
> 
> 标签：java, hibernate

我在使用 Hibernate 时遇到问题，在执行我的一个查询后，我收到以下日志消息并且程序停止工作：

```
20:36:48,805 TRACE ThreadLocalSessionContext:344 - allowing proxied method [createQuery] to proceed to real session
4608 [main] TRACE org.hibernate.context.ThreadLocalSessionContext  - allowing proxied method [createQuery] to proceed to real session
20:36:48,806 TRACE QueryPlanCache:128 - located HQL query plan in cache (from Propertylist where typedlistId = ?)
4609 [main] TRACE org.hibernate.engine.query.QueryPlanCache  - located HQL query plan in cache (from Propertylist where typedlistId = ?) 
```

在实践中，我有一个小方法，我称之为：

```
public List<Zielobjekt> gibZielobjekte() {
    List<Zielobjekt> zielobjekte = new ArrayList<Zielobjekt>();

    Session session = _sessionFactory.getCurrentSession();
    session.beginTransaction();

    for(Informationsverbund iv : gibInformationsverbuende() /*Behind this method is a Hibernate query, it works fine.*/ )
    {
        Set<Celement> zobjekte = gibBaumelementeFuerVater(session, iv.getOriginalId());

        LOGGER.info("Insgesamt " + zobjekte.size() + " ZO gefunden.");

        for(Celement element : zobjekte)
        {
            Set<Propertylist> eigenschaften = gibEigenschaftsliste(session, element); /*Behind this Method is a Hibernate Query, here the Program stops to work.*/          
            //HERE THE PROGRAM STOPS WORKING
            ... 
        }

    }

    session.getTransaction().commit();

    return zielobjekte;
} 
```

程序停止工作的调用方法是：

```
private Set<Propertylist> gibEigenschaftsliste(Session session, Celement element)
{
    try
    {
        return new HashSet(session.createQuery(
                "from Propertylist where typedlistId = ?")
                .setInteger(0, element.getEntityId())
                .list());
    }
    catch (HibernateException e)
    {
        e.printStackTrace();
        return null;
    }
} 
```

# node.js - CouchDB 响应失败的所有方式是什么？

> ID：11195513
> 
> 赞同：1
> 
> 时间：2012-06-25T18:54:35.690
> 
> 标签：node.js, couchdb, express

我正在以 CouchDB 作为数据库的 express.js 框架上构建一个 Node.js 应用程序。我正在使用 CouchDB 的会话 api 来维护会话状态，以及用于不同数据部分的各种数据库。

基本上在每个请求中，我的应用程序代码都会向 Couch 发出请求，然后如果出现错误（使用 Node），我可以通过记录错误并重定向到 404 页面或类似的东西来做出适当的响应。但是，如果我收到 CouchDB 错误，Node 不会将其视为错误，而是会考虑该数据。现在这对我来说完全没问题，只要 CouchDB 只能返回这种格式：

```
{
  "error": "illegal_database_name",
  "reason": "Only lowercase characters (a-z), digits (0-9), and any of the characters _, $, (, ), +, -, and / are allowed. Must begin with a letter."
} 
```

具有两个属性的 JSON 文档，错误和原因。很好，我可以解析它并返回适当的消息；实际上相当优雅。

但！这就是我对 CouchDB 的全部期望，还是 Couch 可能会失败的另一种方式，不会产生包含这两个字段（属性）的 JSON 文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:26:07.817

dscape 依赖响应码的信息是正确的，在大多数情况下你会得到一个带有`error`and的对象`reason`。批量文档错误是我能想到的唯一地方，其中任何一个都不是真的。如果只有一个文档失败，那么你仍然会得到 200，但你会得到与`error/reason`失败的文档相对应的数组元素内。有关这方面的更多信息，请参阅[文档](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API#Modify_Multiple_Documents_With_a_Single_Request)。

# xml - XSLT 和名称空间

> ID：11195514
> 
> 赞同：2
> 
> 时间：2012-06-25T18:54:46.013
> 
> 标签：xml, xslt

我有一个公共网站，我需要在该网站上显示我在 SharePoint 中设置的列表视图的简化版本。

我成功地使用[此处](http://blogs.msdn.com/b/kaevans/archive/2009/05/01/getting-xml-data-from-a-sharepoint-list-the-easy-way.aspx)描述的技术来获取视图的 XML，但它过于复杂，我无法让我的 jQuery AJAX 代码正确处理命名空间。

我已经编写了以下 XSLT，但遇到了问题。提前原谅，因为我是 XSLT 新手。

我的 XLST 看起来像这样：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl" xmlns:s='uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882'
     xmlns:dt='uuid:C2F41010-65B3-11d1-A29F-00AA00C14882'
     xmlns:rs='urn:schemas-microsoft-com:rowset'
     xmlns:z='#RowsetSchema'
>

<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
    <activeRFPs>
    <xsl:for-each select="/xml/rs:data/z:row">
        <rfp>
            <title>
                <xsl:value-of select="@ows_RFP_x0020_Link" />
            </title>
            <applicationStart>
                <xsl:value-of select="@ows_Application_x0020_Period_x0020_S" />
            </applicationStart>
            <applicationEnd>
                <xsl:value-of select="@ows_Application_x0020_Period_x0020_E" />
            </applicationEnd>
            <programStart>
                <xsl:value-of select="@ows_Program_x0020_Start_x0020_Date" />
            </programStart>
            <publicURL>
                <xsl:value-of select="@ows_Public_x0020_Guidelines_x0020_Do" />
            </publicURL>
        </rfp>
    </xsl:for-each>
    </activeRFPs>
</xsl:template>
</xsl:stylesheet> 
```

源 XML 如下所示：

```
<xml xmlns:s='uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882'
 xmlns:dt='uuid:C2F41010-65B3-11d1-A29F-00AA00C14882'
 xmlns:rs='urn:schemas-microsoft-com:rowset'
 xmlns:z='#RowsetSchema'>
<s:Schema id='RowsetSchema'>
<s:ElementType name='row' content='eltOnly' rs:CommandTimeout='30'>
  <s:AttributeType name='ows_RFP_x0020_Link' rs:name='RFP Link' rs:number='1'>
     <s:datatype dt:type='string' dt:maxLength='512' />
  </s:AttributeType>
  <s:AttributeType name='ows_Application_x0020_Period_x0020_S' rs:name='Application Period Start Date' rs:number='2'>
     <s:datatype dt:type='datetime' dt:maxLength='8' />
  </s:AttributeType>
  <s:AttributeType name='ows_Application_x0020_Period_x0020_E' rs:name='Application Period End Date' rs:number='3'>
     <s:datatype dt:type='datetime' dt:maxLength='8' />
  </s:AttributeType>
  <s:AttributeType name='ows_Program_x0020_Start_x0020_Date' rs:name='Program Start Date' rs:number='4'>
     <s:datatype dt:type='datetime' dt:maxLength='8' />
  </s:AttributeType>
<s:AttributeType name='ows_Public_x0020_Guidelines_x0020_Do' rs:name='Public Guidelines Doc URL' rs:number='5'>
<s:datatype dt:type='string' dt:maxLength='512' />
</s:AttributeType>
</s:ElementType>
</s:Schema>
<rs:data>
<z:row ows_RFP_x0020_Link='http://www.google.com, Google Search Engine' ows_Application_x0020_Period_x0020_S='2012-06-22 00:00:00' ows_Application_x0020_Period_x0020_E='2012-07-20 00:00:00' ows_Program_x0020_Start_x0020_Date='2012-10-01 00:00:00' ows_Public_x0020_Guidelines_x0020_Do='http://www.yahoo.com' />
</rs:data>
</xml> 
```

所有值都是 z:row 元素的属性。我对如何使用命名空间有点转变。

当我在 Visual Studio 中运行时，输出的只是：

```
<?xml version="1.0" encoding="utf-8"?>

<activeRFPs xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:rs="urn:schemas-microsoft-com:rowset" xmlns:z="#RowsetSchema" /> 
```

我究竟做错了什么？

我想要这样的结构：

```
<rfp>
<title>value</title>
<applicationStart>value</applicationStart>
<applicationEnd>value</applicationEnd>
...
</rfp> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:40:23.097

**我的猜测是您在 VS 文档属性窗口的输入字段中没有正确设置：**

[http://msdn.microsoft.com/en-us/library/ms255828.aspx](http://msdn.microsoft.com/en-us/library/ms255828.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:01:03.043

你是如何运行转换的？我在 .NET 2.0 中使用一个简单的运行器（添加了缩进）得到了以下输出：

```
<activeRFPs xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:rs="urn:schemas-microsoft-com:rowset" xmlns:z="#RowsetSchema">
    <rfp>
        <title>http://www.google.com, Google Search Engine</title>
        <applicationStart>2012-06-22 00:00:00</applicationStart>
        <applicationEnd>2012-07-20 00:00:00</applicationEnd>
        <programStart>2012-10-01 00:00:00</programStart>
        <publicURL>http://www.yahoo.com</publicURL>
    </rfp>
</activeRFPs> 
```

跑步者代码是一些样板：

```
XmlWriterSettings xmlWriterSettings = new XmlWriterSettings();
xmlWriterSettings.ConformanceLevel = ConformanceLevel.Fragment;

XmlReaderSettings xslReaderSettings = new XmlReaderSettings();
xslReaderSettings.ProhibitDtd = false;

XmlReader xmlReader = XmlReader.Create(contentFile, xslReaderSettings);
XslReader xslReader = XmlReader.Create(transformFile, xslReaderSettings);
XmlWriter xmlWriter = XmlWriter.Create(outFile, xmlWriterSettings);

XslCompiledTransform xslt = new XslCompiledTransform();
XsltSettings settings = new XsltSettings();
settings.EnableDocumentFunction = true;
settings.EnableScript = true;
xslt.Load(xslReader, settings, new XmlUrlResolver());
xslt.Transform(xmlReader, xmlWriter); 
```

您甚至不需要所有这些设置。

# magento - magento 从哪里开始脚印

> ID：11195516
> 
> 赞同：0
> 
> 时间：2012-06-25T18:54:59.800
> 
> 标签：magento

我正在使用礼品卡，我想调查礼品卡的一些行为。作为 magento 的新手，我不确定从哪里开始寻找 url

```
http://mysite.com/index.php/myspecificfolder/giftcardaccount/new 
```

我不确定giftcardaccount是什么？它是文件夹还是动作？也会对“新”感兴趣

Magento 版本。1.10.0.1

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:58:32.423

`giftcardaccount`是一个控制器。

在看： `/app/code/core/Enterprise/GiftCardAccount/controllers/Adminhtml/GiftcardaccountController.php`

URL 映射到 newAction() 方法。

# jquery - .width() 上的回调？

> ID：11195519
> 
> 赞同：0
> 
> 时间：2012-06-25T18:55:05.770
> 
> 标签：jquery, waitforimages

我正在将一个变量设置为图像的宽度，以便我可以使描述 div 以正确的宽度出现。但是，jQuery 似乎没有适合我需要的回调函数。我该怎么办？

```
$(document).ready(function () {
    // declare photo width variable
    var photo_width = 0;
    $('.chImg').click(function () {
        // get img src and chop it up       
        var srcv = $(this).attr('src');
        var sliced = srcv.slice(6);
        // return the base number of the image for correspdonding div
        // corresponding div is "d#"
        var divnum = sliced.substring(0, sliced.length - 4);
        // fade out active description div
        $(".activeDescript").each(function () {
            $(this).removeClass("activeDescript");
            $(this).fadeOut(110);
        });
        // change picture
        $("#chBox").fadeOut(110, function () {
            $("#chBox").html("<center><img src='" + sliced + "'/></center>");
        });
        // vertical align
        $("#chBox").vAlign();
        $('#chBox').waitForImages(function () {
            // wait for images before grabbing img width
            $("#chBox img").each(function () {
                photo_width = $(this).width();
                $(".description").width(photo_width);
                $("#d" + divnum).fadeIn(300);
                // make this descript active
                $("#d" + divnum).addClass("activeDescript");
            });
            $("#chBox").fadeIn(200);
        });
    }); 
```

我最关心的是 photo_width = $(this).width(); 周围的代码 因为我想确保在发生之后执行以下代码。想法？我知道描述 div 设置不正确，因为需要单击 2 次才能正确设置！您可以在 www.graysonearle.com/newtest 上看到错误，然后单击第一个框“Frog Utopia”并单击几个缩略图。

# xsd - 如何为对象创建 xsd

> ID：11195523
> 
> 赞同：0
> 
> 时间：2012-06-25T18:55:12.180
> 
> 标签：xsd, wsdl, xsd.exe

我有一个方法，我需要在发布方法中传递类似这样的参数值。

```
facebookclient. publish("me/events", FacebookType.class,Parameter.with("name", "Party")); 
```

我没有将它作为三个参数传递，而是尝试将它作为对象传递，将这三个参数存储在对象记录中。

例如：

```
facebookclient.publish(record); 
```

这样在发布方法中，我可以得到这个

```
void publish(Record record)
{
String event= record.getEvent();
} 
```

我正在尝试为这些参数创建一个 xsd。请指导我如何做到这一点。对我/事件我可以在 xsd 中创建一个元素

```
<element name="events" type="string" /> 
```

并在一个对象中引用它

```
<element name="Record">
    <complexType>
        <sequence>
            <element ref="fb:events" />
            // how to specify for FacebookType.class,Parameter.with("name", "Party"))?
        </sequence>
    </complexType>
</element> 
```

请指导我，如何在 xsd 中指定元素 FacebookType.class,Parameter.with("name", "Party"))？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:41:18.093

您可以使用 schemagen 应用程序 ( [http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae% 2Ftwbs_jaxbjava2schema.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.wsfep.multiplatform.doc/info/ae/ae/twbs_jaxbjava2schema.html)）通过命令行或 JAXB 类（[http://jaxb.java.net/guide/Invoking_schemagen_programatically.html](http://jaxb.java.net/guide/Invoking_schemagen_programatically.html)）以编程方式完成......这一切都假设你有你的类用适当的注释注释。

# jquery - 将 jQuery keyup 更新隔离到一个类

> ID：11195524
> 
> 赞同：0
> 
> 时间：2012-06-25T18:55:17.010
> 
> 标签：jquery, onkeyup

小提琴：http: [//jsfiddle.net/MhWm5/16/](http://jsfiddle.net/MhWm5/16/)

我有一些具有动态 ID 的动态生成的表行/值

```
<td class="control-group">
    <input name="price[418]" class="price" value="199.00">
    <span class="calcprice">I want this SPAN tag to update</span>
</td>
<td  class="control-group">
    <input name="price[424]" class="price" value="67.00">
    <span class="calcprice">I DO NOT WANT this SPAN tag to update</span>
</td> 
```

我有一个简单的 jQuery keyup 函数，用于在此处更新 SPAN：

```
$('.price').keyup(function() {

   var AskPrice    = $(this).val();
   var calcSpan    = ".calcprice";
   var itemCost = AskPrice * (.8);
   console.log(itemCost);  // just for giggles

   $(this).parents().find(calcSpan).text(" You will receive $" + itemCost );

});    ​  ​ 
```

当用户在第一个输入字段中键入时，跨度会在两个表行中更新，这是我不想要的。我可以在每个跨度上调整类的名称，但我认为这没有帮助。

任何帮助都很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:58:07.773

```
$(this).parent().find(calcSpan).text(" You will receive $" + itemCost ); 
```

父母，不是父母

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:04:05.667

我会使用该`siblings()`功能来做到这一点。

见例子：http: [//jsfiddle.net/MhWm5/26/](http://jsfiddle.net/MhWm5/26/)

另请注意，我必须更改您的标记。你有`td`没有嵌套在`table`or中的标签，`tr`所以它没有像你想象的那样被渲染。这实际上可能是您的问题的根本原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:00:04.387

更改一个跨度的名称，然后更新该跨度！

工作演示：http: [//jsfiddle.net/epinapala/MhWm5/24/](http://jsfiddle.net/epinapala/MhWm5/24/)

```
<span class="calcprice1">I want this SPAN tag to update</span> 
```

然后在你的 JS

```
$('.price').keyup(function () {
    var AskPrice = $(this).val();
    var calcSpan = ".calcprice1";
    var itemCost = AskPrice * (.8);
    console.log(itemCost);
    $(this).parent().find(calcSpan).text(" You will receive $" + itemCost);
}); 
```

# jquery - 为什么 JDBC 连接在我关闭后仍保持打开状态？

> ID：11195525
> 
> 赞同：0
> 
> 时间：2012-06-25T18:55:40.323
> 
> 标签：jquery, jdbc

我有一个在 Tomcat 7 上运行的 Java Web 应用程序，它使用 JDBC 连接到 Oracle 11g 数据库。该应用程序包含一个 JSP，它使用 JQuery 向将数据插入数据库的 servlet 发出 Ajax 请求（使用 .post 函数）。当系统处于轻负载状态时，我开始在数据库中看到空闲连接。我通过在 SQL Developer 中检查 v$session 来观察它们。当我们运行性能测试时，它在大约 2 分钟内将数据库服务器用 150 个连接最大化。我已经检查过我的代码很多次了，我总是在 finally 块中关闭所有的 ResultSets、Statements 和 Connections。当 JSP 同时提交多个 Ajax 请求时会出现问题，这让我认为这可能是一个多线程问题，但是我再次检查了我的代码，并且没有跨线程共享数据。从数据源获取连接并关闭连接的代码位于所有 DAO 类都继承自的抽象基类中。有谁知道可能导致这种情况的原因？由于涉及到很多类，我不确定要发布什么源代码；如果你想看的话，请告诉我。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:33:15.063

尝试将 maxWait 设置为 10000 并注意超时。这表明您的 Web 应用程序的某些组件没有关闭数据库连接。

此外，尝试将 maxActive 限制为 15，看看这会如何影响您的应用程序和 Oracle 中同时打开的连接数。

# java - 在 Java 中，是否可以使用资源路径在 WAR 类路径中获取目录文件列表？

> ID：11195532
> 
> 赞同：3
> 
> 时间：2012-06-25T18:56:19.903
> 
> 标签：java, file, jakarta-ee, file-io, jdk1.6

我在需要读取的类路径上的目录中有一个文件列表，并且更喜欢使用 File API，但似乎我无法在存档中执行此操作。这适用于我的本地环境单元测试，但是当我在 EAR 中部署为 WAR 时，文件列表返回 null：

```
File dir = new File(getClass().getClassLoader().getResource("mydir").getPath());
File[] files = dir.listFiles(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:09:24.323

未解包战争时不能使用 File API，但可以使用 Servlet API。

ServletContext的[getResourcePaths](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourcePaths%28java.lang.String%29)方法可用于检索“目录”的所有成员，然后通过[getResource](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResource%28java.lang.String%29)或[getResourceAsStream](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)检索目录中文件的内容。

```
for (String s : context.getResourcePaths("foo")) {
    InputStream contents = context.getResourceAsStream(s);
    //do something with the contents
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:07:07.727

如果您使用的是 Java SE 7，请尝试：

```
Path jarPath = Paths.get(...);
try (FileSystem jarFS = FileSystems.newFileSystem(jarPath, null)) {
    Path dirJarPath = jarFS.getPath("/foo/mydir");
    <use a FileVisitor and Files.walkFileTree>
} 
```

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileVisitor.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileVisitor.html)

# c++ - Segfault 使用 bool 类型的向量

> ID：11195533
> 
> 赞同：0
> 
> 时间：2012-06-25T18:56:23.240
> 
> 标签：c++, vector, segmentation-fault, boolean

我正在尝试解决编程难题并遇到一些困难。它类似于[Project Euler 问题 215](http://projecteuler.net/problem=215)，但块的宽度为 3 和 4.5。无论如何，我最初是通过暴力强制 C 中的组合来接近它，但我试图通过计算第一行中的所有组合并查看有多少有效的组合方式然后从那里开始来加快运行时间。我认为使用布尔向量（尝试过的位集，但我不能使用它们，因为我在编译时没有可用的宽度）会更容易，但我没有使用向量的经验我做了一些事情让段错误的神生气。我只是看不出在哪里。

当我输入程序参数时，我遇到了分段错误 11，所以这绝对是我所做的，当我在 GDB 中运行回溯时，我得到以下信息：

```
#0  0x0000000100002645 in std::_Bit_reference::operator= ()
#1  0x0000000100001be2 in build ()
#2  0x0000000100002287 in main () 
```

我知道一定有一些我没有看到的东西。它仅在实际调用 build() 时发生，但我将 main() 包括在内，以防万一我可能在调用中做错了什么。

```
#include <vector>

void build(std::vector<std::vector<bool> > possibilities, std::vector<bool> current, float width)
{
if(current.size() > 0)
{
    if(current.size() > width) return; // If we went over the specified width, bail out-invalid

    if (current.size() == width) // If we just matched the width for this row, push it on to our vector of possibilities
    {
        possibilities.push_back(current);
        return;
    }
}

// Try adding a block of length 3 and a block of length 4.5
std::vector<bool> branch1;
std::vector<bool> branch2;
if(current.size() > 0)
{
    branch1.assign( current.begin(), current.end() );
    branch2.assign( current.begin(), current.end() );

    branch1[ current.size() + 5 ] = 1;
    branch2[ current.size() + 8 ] = 1;
}
else
{
    branch1[5] = 1;
    branch2[8] = 1;
}
// Split off and check both branches
build(possibilities, branch1, width);
build(possibilities, branch2, width);
}

int main( int argc, char *argv[] )
{
if ( argc == 3 ) // Number of arguments should be 3-the program name, plus our width and height
{
    float width = (atof(argv[1]) * 2); // Width is assumed to be entered first, converting to integer
    int height = atoi(argv[2]); // The second argument should be height, ditto above
    if ( (width < 3) || (height < 1) ) // Catches non-number inputs (atof/i returns 0) and invalid entries
    {
        printf("Expected two numeric arguments, width and height, in that order.");
    }
    else // Continue the program
    {
        std::vector<bool> noo;
        std::vector<std::vector<bool> > possibilities;
        build(possibilities, noo, width);
        printf("%llu", (unsigned long long)possibilities.size());
    }
}
else
{
    printf("Expected two numeric arguments, width and height, in that order.");
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:04:18.787

你的`noo`载体：

```
std::vector<bool> noo; 
```

这是 的第二个参数`build`：

```
build(possibilities, noo, width); 
```

是空的。但是，在内部`build`，您会根据该向量的大小执行一些操作：

```
std::vector<bool> branch1;
std::vector<bool> branch2;
if(current.size() > 0) //current is actually noo
{
    branch1.assign( current.begin(), current.end() );
    branch2.assign( current.begin(), current.end() );

    branch1[ current.size() + 5 ] = 1;
    branch2[ current.size() + 8 ] = 1;
}
else
{
    branch1[5] = 1;
    branch2[8] = 1;
} 
```

由于它是空的，因此您将访问向量的位置`5`和以及（它们也是空的），从而导致未定义的行为。`8``branch1``branch2`

您应该以某种方式调整大小`branch1`，`branch2`以免执行越界访问。

这边走：

```
std::vector<bool> branch1(someNumber); 
```

会这样做，但你应该看看你的代码逻辑，肯定还有其他问题。此外，您正在按值传递参数，因此您正在制作不必要的副本，并且您不会看到对`possibilities`来自`main`.

# c# - 将 c# Rijndael 函数转换为 php 函数

> ID：11195534
> 
> 赞同：4
> 
> 时间：2012-06-25T18:56:33.263
> 
> 标签：c#, php, encryption

我正在尝试将 C# 函数转换为 PHP。

这是 C# 函数：

```
 public string Encrypt(string Value)
    {
        string RetVal = "";
        if(Value != string.Empty && Value != null)
        {
            MemoryStream Buffer = new MemoryStream();
            RijndaelManaged RijndaelManaged = new RijndaelManaged();
            UnicodeEncoding UnicodeEncoder = new UnicodeEncoding();

            byte[] KeyArray = new Byte[] { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 };
            byte[] IVArray = new Byte[] { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 };     
            try
            {
                byte[] ValueBytes = UnicodeEncoder.GetBytes(Value);

                CryptoStream EncryptStream = new CryptoStream(Buffer,
                    RijndaelManaged.CreateEncryptor(KeyArray, IVArray),
                    CryptoStreamMode.Write);

                EncryptStream.Write(ValueBytes, 0, ValueBytes.Length);
                EncryptStream.FlushFinalBlock();

                // Base64 encode the encrypted data
                RetVal = Convert.ToBase64String(Buffer.ToArray());
            }
            catch
            {
                throw;
            }
        }

        return RetVal;
    } 
```

这是我在 PHP 中的尝试：

```
function EncryptString ($cleartext) 
{

    $cipher = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', MCRYPT_MODE_ECB, '');     
    $key128 = '111111111111111111111111111';
    $iv = '111111111111111111111111111';

    if (mcrypt_generic_init($cipher, $key128, $iv) != -1)  //Parameter iv will be ignored in ECB mode
    {
        $cipherText = mcrypt_generic($cipher,$cleartext );
        mcrypt_generic_deinit($cipher);     
        $encrypted = (bin2hex($cipherText));       
        return base64_encode($encrypted); 
    }
} 
```

目前，当我使用这两个函数对测试短语“test”进行编码时，我得到不同的值。看起来 PHP 版本需要一个字符串 for`$key`和`$iv`values，而 C# 版本需要一个字节数组。

如何修改我的 PHP 函数以模仿 C# 函数？

[编辑] c# 函数是第 3 方，我无权更改它；我需要在 PHP 中编写等效的代码来以相同的方式对给定的字符串进行编码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:36:49.850

查看 RijndaelManaged 文档并复制：

*   加密模式 (cbc)
*   块大小
*   填充模式 (pkcs#7)

请注意，您可以从其他地方检索填充。

现在确保对双方使用完全相同的输入。您可以通过以十六进制值打印出密钥、IV 和纯文本来做到这一点。密钥大小和 IV 大小应该是算法所需的确切位数。要获得相同的纯文本，您需要使用相同[的字符编码](/questions/tagged/character-encoding "显示标记为“字符编码”的问题")。

最后，您需要相同的密文编码，但似乎您已经掌握了这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T21:09:48.970

我会尝试使用，而不是 27 个 1 的字符串，这个：

```
$key128 = '';
for ( $i = 0; $i < 27; ++$i )
   $key128 .= chr(1);
$iv = $key128; // copy 
```

我不完全确定这些函数的作用，但这会将您的字符串转换为重复 1 的字节数组。

# javascript - Javascript SetInverval() 在 Firefox 中只触发一次

> ID：11195537
> 
> 赞同：1
> 
> 时间：2012-06-25T18:56:42.313
> 
> 标签：javascript, firefox, timer

> **可能重复：**
> [setInterval 在 Google Chrome 扩展程序中不起作用（仅触发一次）](https://stackoverflow.com/questions/8971871/setinterval-not-working-firing-only-once-in-google-chrome-extension)

此错误仅在使用 document.write() 时出现问题。

我在 Mac 10.6.8 英特尔上。

这是我的脚本：

```
setInterval(function(){myFun()},1000);

function myFun() {
   document.write('something');
} 
```

各种浏览器的行为不同： Firefox 12：只发生一次。浏览器在状态栏中显示“正在连接”。谷歌浏览器和 safari：似乎工作正常。

注意：使用 setTimeout 会导致一切都表现得像 firefox（不工作）。使用 setInterval(myFun},1000)，它被认为是这么多错误的来源，行为相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:33:45.257

许多入门教程使用 document.write() 表示“hellow world”。但是，此功能很危险，因为它可能会弄乱脚本（通过核对整个程序）。这是进行调试打印输出的安全方法：

**在**脚本之前，在 html 和 html 之间，添加以下内容：

```
<div id="myDebug"></div> 
```

**在**脚本中，首先将其转换为可以调用的变量：

```
var myDebug = document.getElementById("myDebug"); 
```

当您需要显示某些内容时，请执行以下操作：

```
debug.innerHTML = "some string"; 
```

这将在浏览器窗口中显示字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:24:28.630

似乎您错过了 myFun() 之后的分号

```
setInterval(function(){myFun();},1000);

function myFun() {
   document.write('something');
} 
```

还要确保将功能放入`<body></body>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:29:24.387

`document.open()`导致清除文档。该函数之前被 Firefox 调用`document.write()`。因此，您的间隔丢失了。

请参阅[W3C 文档对象模型 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-72161170)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T19:35:41.233

试试这个：

```
setInterval(function(){myFun()},1000);

function myFun() {
   // Return all elements in document of type 'body'
   // (there will only be one)
   var bodyArray = document.getElementsByTagName('body');
   // get the body element out of the array
   var body = bodyArray[0];
   // save the old html of the body element
   var oldhtml=body.innerHTML;
   // add something to the end
   body.innerHTML=oldhtml+"somrthing";
} 
```

正如其他人所提到的，使用`document.write()`将（在某些浏览器中）核对用于更新文档的脚本，写入正文（而不是应该存储 javascript 的头部）将阻止这种情况发生。

# magento - magento 礼品卡写入哪些表

> ID：11195541
> 
> 赞同：0
> 
> 时间：2012-06-25T18:56:58.910
> 
> 标签：magento

我试图找出在创建新的 magento 礼品卡时，涉及哪些表以及将新记录写入哪些表以及表之间的关系。我会很感激这方面的任何指示

Magento 版本。1.10.0.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:53:08.837

一个好的起点是查看 /app/code/core/Enterprise/Giftcard/sql/enterprise_giftcard_setup 和 /app/code/core/Enterprise/GiftCardAccount/sql/enterprise_giftcardaccount_setup 中的礼品卡安装脚本

这些将使您了解礼品卡表的结构以及在创建和使用礼品卡时它们的外键如何与系统中的其他表交互。

# android - 我怎样才能将这些视图均匀分布？

> ID：11195545
> 
> 赞同：0
> 
> 时间：2012-06-25T18:57:10.307
> 
> 标签：android, user-interface

我想展开以下 TextViews 以便它们垂直占据整个屏幕。我想把按钮留在那个尺寸的底部。

![在此处输入图像描述](../Images/611e7f62dd35c5e629582a07ce435ce4.png)

这是我的 XML 文件....

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="1.0" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
   android:weightSum="9"
   android:gravity="center"
    >
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="SN : "
            android:layout_weight="1" />

        <TextView
            android:id="@+id/serialNumberView"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
             android:layout_weight="2" 
             android:text=""/>

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="Ver : "
             android:layout_weight="1" />

        <TextView
            android:id="@+id/versionView"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_gravity="center"
             android:layout_weight="2"
              android:text="" 
            />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="Type:"
            android:layout_gravity="center"
               android:layout_weight="1" 

             />

        <TextView
            android:id="@+id/typeView"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_gravity="center"
              android:layout_weight="2" 
               android:text="" />

</LinearLayout>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

        <TableLayout
    android:id="@+id/tableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:shrinkColumns="*"
    android:stretchColumns="*">

    <TableRow>
        <TextView
            android:text="V1 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vOneView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow>
        <TextView
            android:text="V2 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vTwoView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow>
        <TextView
            android:text="V3 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vThreeView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow>
        <TextView
            android:text="I1 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/iOneView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow>
        <TextView
            android:text="I2 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/iTwoView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow>
        <TextView
            android:text="I3 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/iThreeView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow>
        <TextView
            android:text="VD1 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vDOneView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow>
        <TextView
            android:text="VD2 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vDTwoView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow>
        <TextView
            android:text="VD3 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vDThreeView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow>
        <TextView
            android:text="Temp : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/temperatureId" 
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <Button
            android:id="@+id/celciusFarenheitButton"
            android:text="C/F"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow>
        <TextView
            android:id="@+id/viewInfo"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>
</TableLayout>
</ScrollView>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="1" >

    <Button
        android:id="@+id/backButton"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:text="Back"
        android:layout_weight=".33333333333333" />
    <Button
        android:id="@+id/readButton"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:text="Read"
        android:layout_weight=".33333333333333333" />

    <Button
        android:id="@+id/analogsButton"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:text="Analogs"
        android:layout_weight=".333333333333333" />

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:37:27.240

我已将您更改`ScrollView`为 a `RelativeLayout`，并且在每一行中的 Attribute `android:layout_height="0dp"`和`android:layout_weight="1`"

Xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="1.0" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
   android:gravity="center"
    >
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="SN : "
            android:layout_weight="1" />

        <TextView
            android:id="@+id/serialNumberView"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
             android:layout_weight="2" 
             android:text=""/>

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="Ver : "
             android:layout_weight="1" />

        <TextView
            android:id="@+id/versionView"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_gravity="center"
             android:layout_weight="2"
              android:text="" 
            />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="Type:"
            android:layout_gravity="center"
               android:layout_weight="1" 

             />

        <TextView
            android:id="@+id/typeView"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_gravity="center"
              android:layout_weight="2" 
               android:text="" />

</LinearLayout>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

        <TableLayout
    android:id="@+id/tableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:shrinkColumns="*"
    android:stretchColumns="*">

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:text="V1 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vOneView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:text="V2 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vTwoView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:text="V3 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vThreeView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:text="I1 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/iOneView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:text="I2 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/iTwoView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:text="I3 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/iThreeView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:text="VD1 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vDOneView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:text="VD2 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vDTwoView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:text="VD3 : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/vDThreeView"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:text="Temp : "
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/temperatureId" 
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />

        <Button
            android:id="@+id/celciusFarenheitButton"
            android:text="C/F"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
              android:layout_height="0dp"
              android:layout_weight="1">
        <TextView
            android:id="@+id/viewInfo"
            android:layout_width="fill_parent"
            android:gravity="center_horizontal" />
    </TableRow>
</TableLayout>
</RelativeLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/backButton"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:text="Back"
        android:layout_weight="1" />
    <Button
        android:id="@+id/readButton"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:text="Read"
        android:layout_weight="1" />

    <Button
        android:id="@+id/analogsButton"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:text="Analogs"
        android:layout_weight="1" />

</LinearLayout>
</LinearLayout> 
```

![在此处输入图像描述](../Images/8532ab083bda05d077c5dcb36d01d926.png)

# visual-studio-2010 - Visual Studio 2010 水晶报表超链接

> ID：11195547
> 
> 赞同：0
> 
> 时间：2012-06-25T18:57:15.177
> 
> 标签：visual-studio-2010, crystal-reports, report

我正在使用 Microsoft Visual Studio 2010 中的嵌入式 Crystal Reports 工具。如何创建超链接？它将允许我将文本的整个部分（选择部分并单击对象属性）设为超链接，但如果我只想将文本块中的一个或两个单词设为超链接怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:14:23.553

尝试这个

右键单击您的对象 -> 格式化对象 -> 超链接选项卡

![在此处输入图像描述](../Images/0377c8ba8cee1b374e83e8e2fd478bfe.png)

您不能创建一个或两个单词的超链接。Crystal Report 只允许您在对象上创建超链接。

# sql - 在 SQL 中使用 FOR XML 为同一属性选择多个值

> ID：11195550
> 
> 赞同：2
> 
> 时间：2012-06-25T18:57:31.273
> 
> 标签：sql, xml, sql-server-2008, tsql, xpath

我正在尝试从 SQL 表中检索数据作为 XML。考虑下表：

```
 Customers      
Id      Last      First      Phone1      Phone2  
10      Doe       John      555-2121    555-6145
33     Smith      Sally     555-3333    555-7000 
```

我想使用 SQL 中的 FOR XML 子句检索 Last、First、Phone1 和 Phone2 字段。但是，我想检索具有“晚上”属性的 Phone2 字段。例如，我希望 XML 看起来像：

```
<Customers>   
  <Customer>
        <Last>Doe</Last>
        <First>John</First>
        <Phone Type="Daytime">555-2121</Phone>
        <Phone Type="Evening">555-6145</Phone>   
  </Customer> 
</Customers> 
```

但是，我无法让它工作。有什么我想念的吗？任何和所有的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:16:46.187

您可以在子查询中构建节点。如果您指定`for xml type`，子查询将与外部查询合并以提供一个 XML：

```
select  Last as [Last]
,       First as [First]
,       (
        select  'Daytime' as [@Type]
        ,       Phone1 as [*]
        for xml path('Phone'), type
        )
,       (
        select  'Evening' as [@Type]
        ,       Phone2 as [*]
        for xml path('Phone'), type
        )
from    Customers
for xml path('Customer'), root('Customers') 
```

这打印：

```
<Customers>
    <Customer>
        <Last>Doe</Last>
        <First>John</First>
        <Phone Type="Daytime">555-2121</Phone>
        <Phone Type="Evening">555-6145</Phone>
    </Customer>
    <Customer>
        <Last>Smith</Last>
        <First>Sally</First>
        <Phone Type="Daytime">555-3333</Phone>
        <Phone Type="Evening">555-7000</Phone>
    </Customer>
</Customers> 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/e7835/25/0)

# domain-driven-design - 聚合根设计和大小

> ID：11195554
> 
> 赞同：1
> 
> 时间：2012-06-25T18:57:44.750
> 
> 标签：domain-driven-design, modeling, aggregateroot, boundary

我知道有一百万个这样的问题。对不起。我认为我的不一样，但似乎并非如此。我是 DDD 的新手，并试图掌握它。我的部分域是这样的。位置 1-* 字段 字段 1-* 事件字段 1-* 任务 任务*-*员工

现在看来，AR 就是位置。如果我想获得一项特定的任务，我将不得不通过字段集合遍历任务集合中的任务。

这听起来很费力，因为我经常处理任务和事件，而且几乎从来没有一个位置。该位置用于隔离一组字段及其对应的实体。所以在 ui 中，我可以选择一个位置并获取字段列表。然后我会选择一个领域。从那里我可能会编辑其中一项任务。所以我有一组任务，我选择一个，这样我就有了任务的 ID。然后我需要遍历到 location 并获取他的 ID，这样我才能获取 AR 并遍历回任务。或者更确切地说，我会保留 AR 的 ID，以便我可以得到它。那么我是否也应该保留该字段的 ID？所以我返回到服务器的将是我想要查看的 AR.Id、Field.Id 和 Task.Id？

其次，员工当然不能是实体，它很可能是 AR。AR 上的实体可以拥有 AR 集合吗？

那么它的结构应该是这样的吗？

```
public class Location  // is an aggregate Root
{
    public IEnumerable<Field> Fields {get;set;} //in real code encapsulated. not here for brevity
}
public class Field  // is an Aggregate Root
{
    public Location Location {get;set;}  //reference to AR
    public IEnumerable<Task> Tasks {get;set;}
    public IEnumerable<Events> Events {get;set;}
}
public class Task // is an Aggregate Root
{
    public Field Field {get;set;}  // reference to AR
    public IEnumerable<Employee> Employees {get;set;}
    public TaskType TaskType {get;set;}  // probably Value Object
    public IEnumerable<Equipment> Equipment {get;set;}  // maybe Entity or AR
} 
```

这使得处理修改最多的对象和遍历它们的关系变得更加容易，但它也感觉有点像普通的旧 OOP，AR 并没有真正的意义。

再说一次，我是 DDD 的新手，没有人可以通过它来进行健全性检查。请帮助我了解这些边界是如何绘制的，如果是第一种方法，是否有更简单的方法来处理实体，然后携带 AR.id、ParentParent.Id、ParentId 以及最后的对象兴趣实体.Id

感谢您的任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T21:31:38.527

好的，经过更多的谷歌搜索，我发现了这个很棒的系列文章。

[https://dddcommunity.org/wp-content/uploads/files/pdf_articles/Vernon_2011_1.pdf](https://dddcommunity.org/wp-content/uploads/files/pdf_articles/Vernon_2011_1.pdf)

要进入第 2 部分，依此类推，只需更改 url 中的最后一个 didgit。

在这里，我发现，就像 Yves 指出的那样，我误解了聚合和聚合根的目的。事实证明，它们是关于保持相关实体之间的一致性，而不是仅仅捆绑一堆彼此有关系的实体。

因此，如果一个字段在任何一天只能有 3 个任务，那么一个字段将是 AR 的一个很好的候选者，因为如果你只是随意添加任务，你可以很容易地在系统中创建一个无效状态，就好像你有通过 Field 上的方法添加任务，然后可以很容易地检查这是否可以接受。

进一步的人想要避免巨大的聚合根，因为它们需要大量的资源来加载，并且可能导致并发问题。等等等等阅读了他们很好地解决了我上述问题的文章

# xcode - Phonegap 使用 Coldfusion 作为后端来检索数据

> ID：11195555
> 
> 赞同：3
> 
> 时间：2012-06-25T18:57:52.330
> 
> 标签：xcode, cordova, coldfusion

我正在尝试开发一个 phonegap 应用程序，它将调用我的 Coldfusion 服务器并将数据返回到电话应用程序。我看过一些没有解释服务器端代码的教程（.cfc 文件）。喜欢这个... [http://blog.ryanvikander.com/index.cfm/2012/3/28/Returning-Dynamic-Content-In-A-PhoneGap-App](http://blog.ryanvikander.com/index.cfm/2012/3/28/Returning-Dynamic-Content-In-A-PhoneGap-App)

我希望有人可以提供一些示例代码，说明我的服务器上的 .cfc 在接收数据请求时的样子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T19:12:01.970

这是该链接中的示例代码：

```
<!doctype html>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width" />
        <title>My App</title>
        <script src="phonegap.js" type="text/javascript" charset="utf-8"></script>
        <script src="jquery.js" type="text/javascript" charset="utf-8"></script>

        <script type="text/javascript">
            jQuery(document).ready(function() {
                $.ajax({
                    url:"http://www.ryanvikander.com/test.cfc?method=getdata",
                    success: function(data){
                        var content = $("#content");

                        content.html(data);
                    },
                    error: function(e){
                        console.log(e);
                    }
                });
            });
        </script>

    </head>
    <body>
        <div id="title_bar">Test</div>
        This is a test
        <div id="content"></div>
    </body>
</html>
```

url`http://www.ryanvikander.com/test.cfc?method=getdata`不必是这样的：

```
<cfcomponent>

    <cffunction name="getdata" access="remote" output="false">

        <cfreturn "Hello World!" />

    </cffunction>

</cfcomponent>
```

这里，`success`回调函数会将字符串`"Hello World!"`放入`<div id="content"></div>`

如果函数`renderdata()`返回查询，您可以传递查询字符串参数`returnformat=json`，并可选择`queryFormat=column`让 ColdFusion 将查询数据转换为 JSON。如果返回的数据采用 JSON 格式，那么您可以迭代该数据以像在任何网站中一样呈现 HTML。

# php - RockMongo 连接 MongoHQ 数据库时出错

> ID：11195565
> 
> 赞同：0
> 
> 时间：2012-06-25T18:58:23.070
> 
> 标签：php, node.js, mongodb

当我尝试使用 RockMongo 连接 MongoHQ 数据库时出现错误：执行失败：数据库断言失败。数据库已创建，登录数据正常，我尝试从以下两种方式登录：

[http://code.google.com/p/rock-php/wiki/configuration](http://code.google.com/p/rock-php/wiki/configuration)

我得到同样的错误。

当我尝试按照给出的方式在同一个数据库中插入 samo 数据时

[http://www.php.net/manual/en/mongo.tutorial.php](http://www.php.net/manual/en/mongo.tutorial.php)

一切都好。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T22:31:12.740

有时，如果 Rockmongo 在后台实例因任何原因重新启动时出现该错误并且没有任何配置更改（例如服务器或端口的名称或任何用户凭据的更改），则只需在浏览器上刷新 (F5) 几次并且数据应该再次流入 Rockmongo。

# git - 分支之间的 git diff 但忽略某些提交的影响

> ID：11195567
> 
> 赞同：2
> 
> 时间：2012-06-25T18:58:28.490
> 
> 标签：git

我们有2个分店

*   掌握
*   分支X

BranchX 的创建是为了解决一些兼容性问题，其中必须更改大约 10 个文件。

master 上的开发仍在继续，在某个阶段，我想检查当我们将 master 合并到 branchX 时会发生什么变化。

我应该使用什么命令才能检查所有合并是否已完成（除了对这 10 个文件的修改）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:02:36.510

```
$ git diff branchX...master 
```

请注意，它是**三个**点，它得到了 branchX 和 master 的共同祖先之间的差异，以及 master 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:18:57.493

您可以通过**回退到**第一个提交并**挑选**所有您感兴趣的提交来完成。请检查[此答案的代码](https://stackoverflow.com/a/12122691/1610981)

# css - 使用 css 在同一行显示标签和输入

> ID：11195569
> 
> 赞同：7
> 
> 时间：2012-06-25T18:58:32.767
> 
> 标签：css, html, inline

我有一个带有标签和输入框的 html 标记。但是，出于商业原因，我需要在同一行显示标签和输入框并隐藏占位符文本。最终结果应该看起来像占位符文本保留在那里。示例在这里：http: [//jsfiddle.net/XhwJU/](http://jsfiddle.net/XhwJU/)

这是供参考的标记：

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Test Page</title> 
</head>
<body>
   <h1> test </h1>
   <div class="inputdata">
      <label for="AccessCode"> Access Code: </label>
      <div style="display:inline"> <input type="text" name="accessCode" id="AccessCode" value=""  placeholder="" /> </div>
      <div class="clear"></div>
   </div>
</body>
</html> 
```

​ ​</p>

以下是使用的样式：

```
.inputdata {
  border: thin solid gray;
  padding: 0.1em;
  margin: 0.1em;
  vertical-align: middle;
}

div .inputdata label {
  width:auto;
  float:left;
  color: gray;
  line-height: 2;
  padding-top: .4em;
}

input[type='text']{
  overflow:hidden;
  line-height: 2;
  box-shadow: none;
  border:none;
  vertical-align: middle;
  background:none;
  width:100%;
}

.clear {
  clear: both; 
  height: 1px; 
  overflow: hidden; 
  font-size:0pt; 
  margin-top: -1px;
}​ 
```

正如您在 jsfiddle 中看到的那样，标签和输入显示在单独的行中。无论屏幕宽度如何，我都希望标签和输入显示在同一行。标签应该有一个固定的大小，允许它在一行中容纳内容，并且输入应该占据屏幕宽度的其余部分。

感谢任何帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T22:42:08.343

我已经对您的 CSS 进行了一些更改，我想我得到了您想要的，[这是一个示例](http://jsfiddle.net/masimao/zU9Xv/)，位于 HTML 和 CSS 下面。

**CSS**

```
div.inputdata{
    border:thin solid gray;
    padding:0.1em;
    margin:0.1em;
}

div.inputdata label{
    float:left;
    margin-right:10px;
    padding:5px 0;
    color:gray;
}

div.inputdata span{
    display: block;
    overflow: hidden;
}

div.inputdata input{
    width:100%;
    padding-top:8px;
    border:none;
    background:none;
}

.clear {
    clear: both; 
} 
```

**HTML**

```
<h1>test</h1>
<div class="inputdata">
    <label for="AccessCode"> Access Code: </label>
    <span><input type="text" name="accessCode" id="AccessCode" value=""  placeholder="" /></span>
    <div class="clear"></div>
</div> 
```

为了更好地理解 in 的原因，`overflow:hidden`您`span`可以阅读以下内容：[“溢出：隐藏”的魔力](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)

# asp.net-mvc - 如何使用 MSBuild 或 MSDeploy 执行 web.config 转换？

> ID：11195573
> 
> 赞同：2
> 
> 时间：2012-06-25T18:58:37.617
> 
> 标签：asp.net-mvc, asp.net-mvc-3, msbuild, web-config, msdeploy

我已经尝试了许多不同的配置，但我没有达到我的结果。

# TL;博士

我正在尝试将配置转换添加到我的构建过程中，并正在寻找从 MSBuild 执行此操作的正确方法，以便它通过 MSDeploy 显示在我的部署中。

# 背景

*   我有一个 WebApp (MVC3)、一个核心应用程序 (CS Class Lib) 和两个测试类库，每个库一个。
*   我的解决方案中有一个构建脚本，它使用 MSBuild 进行编译。
*   这些 MSBuild 目标之一使用 MSDeploy 部署到 IIS 服务器
*   到目前为止，这个过程是手动和通过 CruiseControl.NET 工作的

# 目标

我想在这个过程中添加 Web.Config 转换。一开始我想我会做一些简单的事情，比如一个名为“PEAppsEnvironmentName”的应用程序设置，我会根据当前环境进行开发、测试或生产。

# 到目前为止的理论

对我来说，似乎在使用 MSDeploy 打包时，我并没有转换配置文件。

**当我在 DeployOnBuild 选项设置为 true 的情况下运行 MSBuild 时，它会创建另一个具有适当转换的 config 的包**。似乎以某种方式我无法使所有内容都匹配。最终结果是网页显示“None”（初始设置）而不是转换后的“Development”字符串。

我想如果我能在打包阶段找到如何使用 MSDeploy 来转换 MSConfig，我会很高兴。

# 代码

## 我的 web.config 文件

```
<appSettings>
      <add key ="PEAppsEnvironmentName" value="None"/>
      ...  
</appSettings> 
```

## 我的 Web.Dev.config 文件

```
<appSettings>
    <add key ="PEAppsEnvironmentName" xdt:Transform="Replace" xdt:Locator="Match(key)" value="Development" />
</appSettings> 
```

## 我的 MSBuild 目标

**显示默认配置的属性组是“Dev”**

```
<PropertyGroup>
    <Configuration Condition="'$(Configuration)' == ''">Dev</Configuration>
</PropertyGroup> 
```

**我的 MSBuild“编译”目标**

```
 <Target Name="Compile" DependsOnTargets="Init">
        <MSBuild Projects="@(SolutionFile)" Targets="Rebuild" Properties="OutDir=%(BuildArtifacts.FullPath);DeployOnBuild=True"/>
    </Target> 
```

**我的 MSBuild“包”目标**

```
<Target Name="Package" DependsOnTargets="Compile;Test">
    <PropertyGroup>
        <PackageDir>%(PackageFile.RootDir)%(PackageFile.Directory)</PackageDir>
        <Source>%(WebSite.FullPath)</Source>
        <Destination>%(PackageFile.FullPath)</Destination>
    </PropertyGroup>
    <MakeDir Directories="$(PackageDir)"/>
    <Exec Command='"@(MSDeploy)" -verb:sync -source:iisApp="$(Source)" -dest:package="$(Destination)" '/>
</Target> 
```

**我的 MSBuild“部署”目标**

（擦洗PW等）

```
 <Target Name='Deploy' DependsOnTargets='Package'>
        <PropertyGroup>
            <Source>%(PackageFile.FullPath)</Source>
        </PropertyGroup>
        <Exec Command ='"@(MsDeploy)" -verb:sync -source:package="$(Source)" -dest:iisApp=PEApps,computerName=$(WebServerName),username=[User],password=[Password]'/>
    </Target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:30:54.093

这个问题有很多，我不确定我是否和你完全在同一页上，但我会总结一下我对你所问问题的印象。您有一个现有的 Web 项目，它与其他项目在一个解决方案中。您需要能够打包 Web 项目，以便可以将其发布到多个目标。

我创建了一个 NuGet 包，可用于此确切目的。它被称为[package-web](http://nuget.org/packages/PackageWeb)。当您将它添加到您的 Web 项目时，它将更新打包过程。创建包时，包中将包含一些附加文件，包括所有 web.config 转换文件。也会在包旁边创建一个 .ps1 文件。您可以使用此脚本发布包。它将提示您运行哪个转换以及所有 Web 部署参数。您还可以将响应保存到文件中，然后将它们传递给 .ps1 文件，以便您可以执行非交互式发布。我在[http://nuget.org/packages/PackageWeb](http://nuget.org/packages/PackageWeb) 包网站上创建了一个 5 分钟的视频：http: [//sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx](http://sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx). 仅供参考，这尚未与 VS 2012 一起使用，但我正在修复此问题，并且应该在 VS 2012 发布时对其进行更新。

如果您觉得这没什么用，您可以在[https://github.com/sayedihashimi/package-web](https://github.com/sayedihashimi/package-web)上查看我是如何实现该解决方案的，并且您应该看到自己推出所需做的所有事情的示例。

仅供参考，如果您需要在包创建时转换除 web.config 之外的任何文件，那么您应该看看我的 VS 扩展[SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)。这是一篇关于如何将其集成到[构建服务器](http://sedodream.com/2011/12/12/SlowCheetahXMLTransformsFromACIServer.aspx)中的博客。

# c# - StackPanel 的奇怪问题

> ID：11195574
> 
> 赞同：1
> 
> 时间：2012-06-25T18:58:43.063
> 
> 标签：c#, windows-phone-7, xaml

我用这个 StackPanel 来在我的应用程序中显示图像时遇到了一个非常奇怪的问题。最近，它似乎已经开发了一个不可见的“高度限制”，即使它被放置在 ScrollViewer 中。

```
 <Grid x:Name="AttachmentList" Grid.Row="1" Margin="12,0,12,0">
        <Button Content="Add Attachment" Height="88" Name="btnAdd" HorizontalAlignment="Left" VerticalAlignment="Top" Width="246" Click="btnAdd_Click" Margin="-12,-28,0,0" />
        <Button Content="Take Photo" Height="88" HorizontalAlignment="Right" Margin="0,-28,-12,0" Name="btnTakePic" VerticalAlignment="Top" Width="246" Click="btnTakePic_Click"/>
        <Button Content="Remove Selected" Height="88" Margin="-12,48,0,0" Name="btnDelete" HorizontalAlignment="Left" VerticalAlignment="Top" Width="246" Click="btnDelete_Click" />
        <Button Content="Done" Height="88" HorizontalAlignment="Right" Margin="0,48,-12,0" Name="btnDone" VerticalAlignment="Top" Width="246" Click="btnDone_Click" />
        <ScrollViewer  BorderThickness="0" Margin="0,142,0,0">
            <StackPanel Name="DisplayPanel" Orientation="Vertical" HorizontalAlignment="Left" VerticalAlignment="Top" />
        </ScrollViewer> 
    </Grid> 
```

根据我添加到其中的图像的高度，将不会显示“超过”这个不可见限制的一个图像（图像应该是一个空白区域），以及之前或之后的所有图像一个会正确显示。这是我如何添加图像的代码：

```
private void imageTask_Completed(object sender, PhotoResult e)
{
  if (e.TaskResult == TaskResult.OK)
  {
    string[] splicedPath = e.OriginalFileName.Split('\\');
    string imageName = splicedPath[splicedPath.Length - 1];

    imageDict.Add(imageName, e.ChosenPhoto);

    BitmapImage bmp = new BitmapImage();
    bmp.SetSource(e.ChosenPhoto);

    Image pic = new Image();
    pic.Source = bmp;
    pic.Tag = imageName;
    pic.Margin = new Thickness(0, 0, 0, 15);
    pic.MouseLeftButtonUp += new MouseButtonEventHandler(pic_MouseLeftButtonUp);
    DisplayPanel.Children.Add(pic);
  }
} 
```

这个问题没有发生。在我的应用程序的所有过去版本中，一切仍然运行良好，所以我不确定为什么现在会出现这种情况。我已经好几个星期没有碰过这个特定页面的代码了。不过，我最近确实将我的整个项目从 Windows Phone OS 7.0 升级到了 7.1。这可能是原因吗？如果是这样，我该怎么做才能解决它？

编辑：最后通过将每个图像放在自己的堆栈面板中并将这些面板添加到最终显示面板而不是自己的图像来解决问题。猜猜这是堆栈面板的“限制”的问题......毕竟它们不能包含那么多图像

# uitableview - 通过 TWRequest 获取推文以获得 tableview

> ID：11195576
> 
> 赞同：0
> 
> 时间：2012-06-25T18:58:50.320
> 
> 标签：uitableview, tableview, twrequest

好的，我对此很陌生，并且一直在努力解决你们可能觉得很容易的练习。我已经四处搜寻，找不到关于如何做到这一点的好的教程或演练。基本上，我使用下面的代码来获取推文，我只想要推文的“文本”部分。如何从 NSDictionary 中提取它以便在 tableview 中使用“text”键？我已经尝试过`[dict objectForKey:@"text"]`，但它不起作用 - 'dict' 似乎不包含 'text' 属性。提前感谢您的帮助。

```
// Do a simple search, using the Twitter API
TWRequest *request = [[TWRequest alloc] initWithURL:[NSURL URLWithString:
   @"http://search.twitter.com/search.json?q=iOS%205&rpp=5&with_twitter_user_id=true&result_type=recent"] 
   parameters:nil requestMethod:TWRequestMethodGET];

// Notice this is a block, it is the handler to process the response
[request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
{
  if ([urlResponse statusCode] == 200) 
  {
    // The response from Twitter is in JSON format
    // Move the response into a dictionary and print
    NSError *error;        
    NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error];
    NSLog(@"Twitter response: %@", dict);                           
  }
  else
    NSLog(@"Twitter error, HTTP response: %i", [urlResponse statusCode]);
}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:33:15.047

是的，有一个 objectForKey@"text" 但它是一个数组，这意味着每个条目（推文）都有文本（和其他几个属性）。所以我们必须遍历推文以获取每条推文的文本。

在您的 .h 文件中

```
 NSMutableArray *twitterText; 
```

在您的 .m 文件中

在 viewdidload 的某处执行此操作

```
 twitterText = [[NSMutableArray alloc] init]; 
```

现在我们可以遍历您的结果。将此代码粘贴到您的 NSLog(@"Twitter response: %@", dict);

```
 NSArray *results = [dict objectForKey@"results"];

         //Loop through the results

         for (NSDictionary *tweet in results)
         {
             // Get the tweet
             NSString *twittext = [tweet objectForKey:@"text"];

             // Save the tweet to the twitterText array
             [twitterText addObject:(twittext)]; 
```

对于您的表格视图中的单元格

```
 cell.textLabel.text = [twitterText objectAtIndex:indexPath.row]; 
```

我认为这应该有效。

# c# - 压缩和解压缩字符串只产生原始字符串的第一个字母？

> ID：11195577
> 
> 赞同：0
> 
> 时间：2012-06-25T18:58:50.617
> 
> 标签：c#, gzipstream

我正在使用以下代码使用 Gzip 压缩字符串：

```
public static String Compress(String decompressed)
    {
        byte[] data = Encoding.Unicode.GetBytes(decompressed);
        using (var input = new MemoryStream(data))
        using (var output = new MemoryStream())
        {
            using (var gzip = new GZipStream(output, CompressionMode.Compress, true))
            {
                input.CopyTo(gzip);
            }
            return Convert.ToBase64String(output.ToArray());
        }
    } 
```

并使用以下代码对其进行解压缩：

```
 public static String Decompress(String compressed)
    {
        byte[] data = Convert.FromBase64String(compressed);
        using (MemoryStream input = new MemoryStream(data))
        using (GZipStream gzip = new GZipStream(input, CompressionMode.Decompress))
        using (MemoryStream output = new MemoryStream())
        {
            gzip.CopyTo(output);
            StringBuilder sb = new StringBuilder();
            foreach (byte b in output.ToArray())
                sb.Append((char)b);
            return sb.ToString();
        }
    } 
```

当我在此示例代码中使用这些函数时，结果只是字母`S`：

```
String test = "SELECT * FROM foods f WHERE f.name = 'chicken';";
String com = Compress(test);
String decom = Decompress(com);
Console.WriteLine(decom); 
```

如果我调试代码，我看到的`decom`值为

```
S\0E\0L\0E\0C\0T\0 \0*\0 \0F\0R\0O\0M\0 \0f\0o\0o\0d\0s\0 \0f\0 \0W\0H\0E\0R\0E\0 \0f\0.\0n\0a\0m\0e\0 \0=\0 \0'\0c\0h\0i\0c\0k\0e\0n\0'\0;\0 
```

但显示的值只是字母`S`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:04:47.320

这些行是问题所在：

```
foreach (byte b in output.ToArray())
    sb.Append((char)b); 
```

您将每个字节解释为它自己的字符，而实际上并非如此。相反，您需要以下行：

```
string decoded = Encoding.Unicode.GetString(output.ToArray()); 
```

这将根据编码将字节数组转换为字符串。

The basic problem is that you are converting to a byte array based on an encoding, but then ignoring that encoding when you retrieve the bytes. As well, you may want to use `Encoding.UTF8` instead of `Encoding.Unicode` (though that shouldn't matter, as long as the encodings match up.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:04:11.387

在您的压缩方法中，将 Unicode 替换为 UTF8：

```
byte[] data = Encoding.UTF8.GetBytes(decompressed); 
```

# c# - 在同一个 C# .net 3.5 应用程序中同时使用早期绑定和后期绑定是否有害？

> ID：11195580
> 
> 赞同：2
> 
> 时间：2012-06-25T18:58:54.743
> 
> 标签：c#, com, .net-3.5, late-binding, early-binding

我们遇到了一个间歇性/不一致的问题，即在某些 SVN 工作副本上的一个用户的机器上无法识别 Word COM 引用（以及其他 COM 引用），有时仅用于调试。在那些失败的情况下，构建失败，抱怨“resolvecomreference task failed unexpectedly”。这并不意外，因为 VS2008 为引用列表中的每个此类项目显示黄色三角形警告感叹号。

我已经阅读了许多关于此的文章，并且出现了一个问题。我们的应用程序混合使用一些早期绑定和一些后期绑定来调用 MSO (Microsoft Office)。那会有害吗？

应用程序的这些部分在一段时间内没有更改，并且问题是最近才出现的。然而，也许我们一直有一个潜在的潜在错误？感谢您的任何见解！我对这方面的技术细节知之甚少。

# spring - Hibernate/Spring 新手架构

> ID：11195583
> 
> 赞同：1
> 
> 时间：2012-06-25T18:58:59.120
> 
> 标签：spring, hibernate

我在 Spring 3.1 和 Hibernate 3 中有一个项目。我正在尝试定义我的 DAO。我有一个抽象 DAO 类，其中包含获取会话、提交、回滚等方法。我的问题是将 SessionFactory 注入到此类中。我想知道是否有更好的方法来定义这个类。谢谢埃里克

```
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;

public abstract class AbstractDAO {

    @Autowired
    private static SessionFactory sessionFactory;

    private static final ThreadLocal<Session> threadLocal = new ThreadLocal<Session>();

    protected static Session getSession() {
        Session session = threadLocal.get();
        if (session == null) {
            session = sessionFactory.openSession();
            threadLocal.set(session);
        }
        return session;
    }

    protected void begin() {
        getSession().beginTransaction();
    }

    protected void commit() {
        getSession().getTransaction().commit();
    }

    protected void rollback() {
        try {
            getSession().getTransaction().rollback();
        }
        catch (HibernateException ex) {
            ex.printStackTrace();
        }           
        close();
    }

    protected void close() {
        try {
            getSession().close();
        }
        catch (HibernateException ex) {
            ex.printStackTrace();
        }
        threadLocal.set(null);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:15:09.730

1.  `@Autowired`不适用于`static`字段。

2.  从 DAO 控制事务没有多大意义，因为事务边界通常在服务层中定义，因此单个事务可以涉及多个 DAO。

3.  为什么你需要所有这些东西？Spring 可以隐式地为您完成，请参阅[10\. Transaction Management](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)和[13.3 Hibernate](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/orm.html#orm-hibernate)。您所需要做的就是定义事务边界（使用`@Transacional`or `TransactionTemplate`）并将 DAO 中的当前会话获取为`sessionFactory.getCurrentSession()`.

# php - 爆炸（）让我感到困惑

> ID：11195584
> 
> 赞同：0
> 
> 时间：2012-06-25T18:59:00.037
> 
> 标签：php, explode, implode

```
<?php
$player = $_GET['player'];
$data = explode(" ", file_get_contents("http://hiscore.runescape.com/index_lite.ws?player={$player}"));
print_r($data);
?> 
```

出于某种原因，这会返回

```
Array ( [0] => 322788,1584,39425065 474211,75,1213741 424332,73,1044331 497032,75,1223804 518140,74,1127869 622836,53,146813 484601,51,114656 540925,65,452516 276405,78,1772587 614588,62,339049 85477,99,13069655 135438,86,3702239 69906,99,13034532 376565,60,294135 403376,55,173156 413268,62,349011 339269,50,103575 388661,52,125891 452907,52,134281 402625,50,102104 281390,50,109948 236592,63,377586 385212,50,103894 329955,50,104225 320731,50,103833 286842,50,101634 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 ) 
```

检索到的原始数据`file_get_contents`是

```
322790,1584,39425065 474214,75,1213741 424335,73,1044331 497037,75,1223804 518145,74,1127869 622844,53,146813 484604,51,114656 540930,65,452516 276407,78,1772587 614595,62,339049 85477,99,13069655 135439,86,3702239 69906,99,13034532 376567,60,294135 403379,55,173156 413272,62,349011 339272,50,103575 388664,52,125891 452909,52,134281 402629,50,102104 281392,50,109948 236593,63,377586 385216,50,103894 329957,50,104225 320733,50,103833 286843,50,101634 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 -1,-1 
```

我看不出为什么这不起作用。测试它，`explode(" ", "The cat is happy")`完美运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:03:05.570

原始数据由**换行符分隔**（查看该页面的源代码，您会看到类似于：

```
369410,1491,41557372
670285,60,285887
777347,41,44705
399433,80,2132002
263342,89,4893081
86022,99,13097638
472647,52,123827
278652,84,3165705
454958,66,517025
706040,53,137563
445967,61,328458
382124,68,642361
362084,66,534339
321096,62,342446
412791,54,164607
475061,60,279628
331177,50,107107
332564,56,199183
21509,99,13217389
371340,53,148963
314233,46,68904
463762,44,55836
128963,73,1034979
569897,20,4784
500492,19,4088
412997,36,26867
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1
-1,-1 
```

尝试爆炸。

```
explode("\n", ...); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T19:05:18.587

```
var_dump(
    explode(',', 
        str_replace("\n", '',
            file_get_contents("http://hiscore.runescape.com/index_lite.ws?player={‌​$player}"
            )
        )
    )
); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T19:05:21.450

您试图按空格展开，但原始数据馈送中没有空格。

它都是逗号分隔的，所以试试：

```
$lines = explode("\n", $data);
foreach($lines as $line){
    $values = explode(",", $line);
} 
```

# ruby-on-rails - content_tag_for 没有传递正确的参数

> ID：11195586
> 
> 赞同：0
> 
> 时间：2012-06-25T18:59:06.557
> 
> 标签：ruby-on-rails, jquery-ui, acts-as-list

我正在尝试使用 jquery UI 和acts_as_list 创建一个可通过拖放进行排序的表。

```
%tbody#lineup{"data-update-url" => sort_lineups_url}
  - @pieces.each_with_index do |piece, index|
    = content_tag_for :tr, piece do
      = render 'piece', :piece => piece, :index => index 
```

如果我使用 ul/li 元素，它可以正常工作，但我想使用表格（因为它看起来好多了）。但是，当使用 table/tr/td 时，它不会将更新的排序传递给 javascript 可排序函数，即使在我拖放以重新排序后，它也总是传递原始排序。有没有办法使用 table 元素而不是 ul/li 元素来传递更新的排序？表支持排序吗？

编辑：

```
jQuery ->
  $('#faqs').sortable(
    axis: 'y'
    update: ->
      $.post($(this).data('update-url'), $(this).sortable('serialize'))
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:03:31.643

你可以粘贴你正在使用的JS吗？确保在使用可排序的 jQuery UI 时选择 tbody，而不是 table。

```
$("tbody").sortable() 
```

# jquery - jquery ajax 到临时 div，然后在加载时使用 div

> ID：11195587
> 
> 赞同：0
> 
> 时间：2012-06-25T18:59:09.900
> 
> 标签：jquery

好的，我有一个 ajax jsonp 请求，它抓取一大块 html，然后将其扔到页面上的 div 中。麻烦的是，随着数据的加载，内容类型的垃圾就位（因为它在 div 中构建了 html）

所以我想先将它加载到一个临时的页面外 div，一旦完成加载，将内容移动到我的主 div 中。

```
 $.getJSON('getsomedata.php?jsoncallback=?',

    function(data) {

    if(data.success=="true")

    {

    // load into temp div

    // pause? until loaded?

    // move content into the real div

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:30:34.230

您可以使用回调函数在 ajax 请求完成时显示 div。

```
$.post('location_of_ajax_file',
    { 'post vals': 'with values'},
    function(data) {
        // this ambiguous function can also just be a callback reference
        // to an external function.
        // It gets called when the ajax request is complete, so you can load 
        // everything into a hidden div, then use this function to show 
        // the div like so:
        $('#hiddendiv').fadeIn(200);

        // fadeIn is cool, but you could also just set the css atribute to show,
        // or switch to another class that includes a show expression.
    }
); 
```

如果你真的想切换 div，你可以使用回调函数将 html 从缓冲 div 复制到屏幕上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:20:17.697

如果我理解正确，您可以使用以下内容

```
//Will load a message into a temporary div
$('#temp-div').html("Temporary loading message");

//Will replace loading message with the server response
$('#temp-div').html(response); 
```

在您的代码中，您将具有 (html) 的效果

```
<div id="temp-div"> </div> 
```

这也将假设您正在从后端获取/发送响应。同样，这是一个假设性的答案，但我希望它能引导您朝着正确的方向前进。

# symfony - 如何获取由验证组索引的错误

> ID：11195588
> 
> 赞同：2
> 
> 时间：2012-06-25T18:59:17.210
> 
> 标签：symfony, symfony-forms, validationgroup

我处理一个多选项卡表单，每个表单选项卡由一组验证。当我在绑定请求时遇到错误时，我想知道第一个无效的选项卡（即验证组）。

Symfony 2.0 是否有可能，以及如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:55:08.357

不幸的是，如果不破解核心，目前这是不可能的。问题是`Form`包含对`FormError`对象的引用，这些对象*不保留*对原始`ConstraintViolation`对象的引用，也不会保留对发生违规的组的引用。

[我建议在问题跟踪器](https://github.com/symfony/symfony/issues)上打开功能请求票。

即使我们添加了此功能，问题仍然存在，即如果约束属于一次验证的多个组，则它只会被评估一次*。*然后违规将只存储第一组，即使它也会在其他组中失败。

# c - 在 c 中，我如何使 1200 / 500 = 3

> ID：11195590
> 
> 赞同：0
> 
> 时间：2012-06-25T18:59:26.670
> 
> 标签：c, ceil

在 C 中，我如何使 1200 / 500 = 3。

我正在做家庭作业。

> 运输计算器：Speedy Shipping 公司将根据包裹的重量和您发送包裹的距离来运送您的包裹。他们只会运送不超过 10 磅的小包裹。您需要有一个程序来帮助您确定他们将收取多少费用。费用基于每运送 500 英里。它们不是按比例计算的，即 600 英里与 900 英里的费用相同。

这是他们给你的表格：

`Package Weight--------------------------Rate per 500 miles shipped`

`2 pounds or less------------------------$1.50`

`More than 2 but not more than 6---------$3.70`

`More than 6 but not more than 10--------$5.25`

这是一个测试用例。

测试用例数据：

重量：5.6 磅
英里：1200 英里

预期成绩：

您的运费为 11.10 美元

* * *

我的回答一直到 7.40

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T19:03:55.823

你是想收拾残局吗？在除法之前，您可以将 499 添加到要除法的数字上。

(0 + 499) / 500 -> 0

(1 + 499) / 500 -> 1

(1200 + 499) / 500 -> 3

这将四舍五入。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T19:04:16.117

假设您想`a`通过`b`（在您的示例中`a = 1200`为 b = `500`）获得上限。你可以像这样用整数算术来做。

```
result = (a + b - 1) / b; 
```

或者您可以使用浮点数并这样做（可能是个坏主意）

```
result = (int) ceil( (double) a / b ); 
```

问题是，由于这是一个家庭作业，你可以通过小步骤完成它：

```
if( a % b == 0 ) {
    result = a / b;
} else {
    result = a / b + 1;
} 
```

这段代码的另一个优点是它实际上不会溢出太大`a`的 s，但我猜这在这种情况下无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:18:03.203

您还可以使用 stdlib div 函数。如果您只想要整数数学并且特别想要避免浮点数学，这可能会很好。

[http://www.cplusplus.com/reference/clibrary/cstdlib/div/](http://www.cplusplus.com/reference/clibrary/cstdlib/div/)

```
#include <stdlib.h>

int foo(void)
{
  div_t result = div(1200, 500);
  return result.quot + (0 < result.rem); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T19:04:54.200

**[编辑1]**

从您的代码中，您将按如下方式实现此部分：

```
if ( weight <= 5.6 )
{
    int multiplier = (int) miles / 500;

    if( ((int)miles % 500) > 0)
        multiplier++;

    rate370 = (double)multiplier * 3.7;

    printf("Your total cost : %.2lf\n", rate370);      
} 
```

**[ORIGINAL]** 在“整数土地”中，1200 / 3 应该等于 2。

对于你想要的“看起来”，试试这个：

```
int multFiveHundreds = (int)totalWeight / 500;
if(multFiveHundreds % 500 > 0)
    multFiveHundreds++; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T19:05:52.627

我建议使用 mod 和 truncate 函数。如果 mod 出来为零，那很好，否则截断并加 1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T19:09:27.267

您必须使用分区的天花板。这会将商四舍五入到下一个整数。

因此，当您尝试查找 500 英里增量的数量时，您必须将商四舍五入到下一个整数。

或者，（而且效率低下），您可以将英里数增加`1`，直到它可以被`500`...整除，即 `while ( (q = x_miles++%500) != 0 ) {}` 。然后乘以`q`费率得到你的答案（这也假设你将有一个整数英里）。

# c# - 将列表框中的项目和启动方法拖放到特定的画布中

> ID：11195591
> 
> 赞同：4
> 
> 时间：2012-06-25T18:59:32.523
> 
> 标签：c#, wpf, canvas, drag-and-drop, listbox

我对 C# 很陌生，所以请让事情尽可能简单。我的问题如下：我有一个列表框，我在运行时动态添加项目，我的 UI 中也有四个不同的画布。现在用户必须能够从列表框中拖动任何项目并将其放入四个画布之一。放置时将启动一个方法，该方法需要知道已将哪个项目拖放到哪个画布中。

我还没有实现任何东西，但至少在这里我的 XAML：

```
<Grid Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="gridMenu" VerticalAlignment="Stretch" Width="Auto" Background="#FFE6E6E6">
     <ListBox Grid.Row="2" Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="listBox1" VerticalAlignment="Stretch" Width="Auto" Background="#FFE6E6E6" BorderBrush="{x:Null}" Panel.ZIndex="1" PreviewMouseDown="listBox1_PreviewMouseLeftButtonDown">
        <ListBoxItem Content="test1" />
        <ListBoxItem Content="test2" />
        <ListBoxItem Content="test3" />
        <ListBoxItem Content="test4" />
        <ListBoxItem Content="test5" />
    </ListBox>
</Grid>
<Grid Grid.Column="1" Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="gridImage" VerticalAlignment="Stretch" Width="Auto" TextBlock.Drop="grid1_Drop">
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
        <Canvas Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage1" VerticalAlignment="Stretch" Width="Auto" />
        <Canvas Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage2" VerticalAlignment="Stretch" Width="Auto" Grid.Column="1" />
        <Canvas Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage3" VerticalAlignment="Stretch" Width="Auto" Grid.Row="1" />
        <Canvas Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage4" VerticalAlignment="Stretch" Width="Auto" Grid.Column="1" Grid.Row="1" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:44:52.630

我认为拖放不是一个简单的话题，所以恐怕我不能让它那么简单，我同意[ekholm](https://stackoverflow.com/users/1436684/ekholm)的观点：你肯定需要一个像样的 c#/wpf 知识才能成功实现这一点。即使您让代码运行，当您想要修改/扩展 DragDrop 代码时也会卡住。

下面是一个示例，可根据您提供的标记帮助您入门：

**XAML：**

```
 <Grid Grid.Row="1" Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="gridImage" VerticalAlignment="Stretch" Width="Auto">
      <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
      </Grid.RowDefinitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
      </Grid.ColumnDefinitions>

      <Canvas Background="LightGreen" AllowDrop="True" Drop="canvasImage_Drop" DragEnter="canvasImage_DragEnter" Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage1" VerticalAlignment="Stretch" Width="Auto" />

      <Canvas Background="LightYellow" AllowDrop="True" Drop="canvasImage_Drop" DragEnter="canvasImage_DragEnter"  Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage2" VerticalAlignment="Stretch" Width="Auto" Grid.Column="1" />

      <Canvas Background="LightPink" AllowDrop="True" Drop="canvasImage_Drop" DragEnter="canvasImage_DragEnter"  Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage3" VerticalAlignment="Stretch" Width="Auto" Grid.Row="1" />

      <Canvas Background="LightSteelBlue" AllowDrop="True" Drop="canvasImage_Drop" DragEnter="canvasImage_DragEnter"  Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="canvasImage4" VerticalAlignment="Stretch" Width="Auto" Grid.Column="1" Grid.Row="1" />
    </Grid>
  </Grid> 
```

**后面的代码：**

```
private Point _startPoint;
private static readonly string _dropIdentifier = "dropIdentifier";

private void listBox_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
  // The initial mouse position
  _startPoint = e.GetPosition(null);
}

private void listBox_PreviewMouseMove(object sender, MouseEventArgs e)
{
  // Get the current mouse position
  Point mousePos = e.GetPosition(null);
  Vector diff = _startPoint - mousePos;

  if (e.LeftButton == MouseButtonState.Pressed &&
      (Math.Abs(diff.X) > SystemParameters.MinimumHorizontalDragDistance ||
      Math.Abs(diff.Y) > SystemParameters.MinimumVerticalDragDistance))
  {
    // Get the dragged ListBoxItem
    var listBox = sender as ListBox;
    var listBoxItem = listBox.SelectedItem;

    // Initialize the drag & drop operation
    DataObject dragData = new DataObject(_dropIdentifier, listBoxItem);
    DragDrop.DoDragDrop(listBox, dragData, DragDropEffects.Move);
  } 
}

private void canvasImage_Drop(object sender, DragEventArgs e)
{
  if (e.Data.GetDataPresent(_dropIdentifier))
  {
    var item = e.Data.GetData(_dropIdentifier) as ListBoxItem;
    DropOnCanvas(sender as Canvas, item);
  }
}

private void canvasImage_DragEnter(object sender, DragEventArgs e)
{
  if (!e.Data.GetDataPresent(_dropIdentifier) ||
    sender == e.Source)
  {
    e.Effects = DragDropEffects.None;
  }
}

public void DropOnCanvas(Canvas targetCanvas, ListBoxItem item)
{
  // do your stuff here ...
  int textHeight = 20;
  var text = new TextBlock() { Text = item.Content.ToString(), Height = textHeight };
  Canvas.SetTop(text, targetCanvas.Children.Count * textHeight);
  targetCanvas.Children.Add(text);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:31:57.547

本教程应该可以帮助您入门：[http ://wpftutorial.net/DragAndDrop.html](http://wpftutorial.net/DragAndDrop.html)

# php - 如何从 wap 设备到 PHP/MySQL 网站进行签名捕获

> ID：11195594
> 
> 赞同：-1
> 
> 时间：2012-06-25T18:59:51.640
> 
> 标签：php

我如何开发一个用于从触摸屏 PDA 和智能手机捕获签名的 php 网站。

1.  我找到了 Jquery 插件：[http](http://thomasjbradley.ca/lab/signature-pad/) ://thomasjbradley.ca/lab/signature-pad/ 。它会帮助我从触摸板设备获取签名吗？

2.  我是否需要用 Java 或其他东西编写一些代码。

请提出您的建议。

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:47:01.980

我会用 PHP 编写它。将签名输出保存到数据库，然后使用插件重新生成功能将其输出到我需要的地方。

Bradley 先生很好地创建了详细的 PHP/MySQL 教程，[http ://thomasjbradley.ca/articles/saving-signatures-php-mysql/](http://thomasjbradley.ca/articles/saving-signatures-php-mysql/)

我希望这可以帮助你。

# javascript - 如何在 JQuery Mobile 的列表视图中有一个自定义按钮？

> ID：11195595
> 
> 赞同：0
> 
> 时间：2012-06-25T18:59:51.910
> 
> 标签：javascript, jquery, html, listview, jquery-mobile

我希望有一个自定义按钮出现在名为“单击我”的列表视图标题的右侧，它将通过“单击时”事件执行操作。据我所知，JQuery 没有实现这一目标的标准方法，但也许您知道如何实现这一目标。

作为我想要实现的目标的说明，请查看[http://jquerymobile.com/test/docs/buttons/buttons-icons.html](http://jquerymobile.com/test/docs/buttons/buttons-icons.html)。

现在想象一下，您正在查看数据图标位于右侧的列表标题，而不是显示“单击我”的图标。此外，列表标题不能像它的元素一样可点击，相反，数据图标必须是此处唯一可点击的元素。

如果您有任何想法，请告诉我，即使由于 JQuery 而这根本不可能实现，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:54:42.343

这就是我一直在寻找的：

```
<ul data-role="listview">
    <li data-role="list-divider">
        Fruits
        <span class="ui-li-count">
            <a href="#" data-role="none" data-theme="b">
                Button
            </a>
        </span>
    </li>
    <li>Apples</li>
    <li>Grapes</li>
    <li>Others</li>
</ul> 
```

请注意，列表分隔符包含一个充当按钮的 SPAN……非常巧妙:)

无论如何，感谢您的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:09:00.133

您正在寻找[拆分按钮列表](http://jquerymobile.com/test/docs/lists/lists-split.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-15T17:08:20.817

这是一个示例，您可以在其中放置两个图标按钮：

*   ```
    <ul data-role="listview" data-inset="true" style="min-width:210px;">
                            <li data-role="list-divider">Opciones de platillo</li>
                            <li><a href="#" >Notas</a></li>
                            <li>
                                    Tiempo
                               <div style="float: right;">
                                  <a href="#" data-role="button" data-icon="plus" data-iconpos="notext" data-theme="c" data-inline="true">Plus</a>
                                  <a href="#" data-role="button" data-icon="minus" data-iconpos="notext" data-theme="c" data-inline="true">Minus</a>
                               </div>
                            </li>
                            <li>
                                    Comensal
                               <div style="float: right;">
                                  <a href="#" data-role="button" data-icon="plus" data-iconpos="notext" data-theme="c" data-inline="true">Plus</a>
                                  <a href="#" data-role="button" data-icon="minus" data-iconpos="notext" data-theme="c" data-inline="true">Minus</a>
                               </div>
                            </li>
                            <li><a href="#">Modificadores</a></li>
                            <li><a href="#">Terminadores</a></li>
                        <ul>
                    </div> 
    ```

# objective-c - 显式引用成员变量以删除“...的本地声明隐藏实例变量”警告

> ID：11195602
> 
> 赞同：0
> 
> 时间：2012-06-25T19:00:21.690
> 
> 标签：objective-c

我有这段代码：

```
- (void)setTableView:(UITableView *)tableView {
    tableView = tableView;
} 
```

现在，我明白为什么我会收到警告了。但这不应该*解决*它吗？

```
- (void)setTableView:(UITableView *)tableView {
    self->tableView = tableView;
} 
```

我知道我可以更改参数名称或 ivar 名称，但*我不想*。例如，在 C++ 中，可以使用`this->foo = foo`，而 java 可以使用`this.foo = foo`. Python 可以使用`self.foo = foo`. objc 中的等价物是什么？（不，我不想使用`@property`'s。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:02:21.297

问题是参数的名称甚至在赋值的右侧也隐藏了 ivar 的名称。虽然您和我都知道您的意思是将参数的值分配给 ivar，但编译器无法确定，所以它会警告您。

更改参数的名称，警告将消失。

# html - CSS body 固定背景

> ID：11195605
> 
> 赞同：3
> 
> 时间：2012-06-25T19:00:27.030
> 
> 标签：html, css, background-image

我有这个 CSS：

```
body
{
    background-position: center top;
    background-color: rgb(237, 237, 237);
    font-size: .85em;
    font-family: "Trebuchet MS" , Verdana, Helvetica, Sans-Serif;
    margin: 0px auto;
    padding: 0;
    color: #696969;
    width: 1000px;
    height: 1200px;
    background-image: url('Background.png');
    background-repeat: no-repeat;
    background-attachment: inherit;    
    top: 0px;
} 
```

当我最大化窗口时一切正常，但是当我缩小窗口时，背景图像会移动。

[这是最大化浏览器窗口的外观](http://s15.postimage.org/7yzy9yiln/image.png)

[这是在更改窗口大小之后](http://s15.postimage.org/elro096ln/image.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:34:38.043

您从人们那里得到的大多数答案都需要 IE9+（因为它是 CSS3）。但是，如果您希望用户也使用旧版浏览器（我在这里是实用且安全的），我认为您需要这样做的方式是使用 jQuery/JavaScript。过去我在 CSS3 中做过类似的事情，但后来我意识到大多数公司/公司仍然使用 IE8，最好的方法是使用 JavaScript。

这里有一些例子：

1.  [http://buildinternet.com/project/supersized/slideshow/3.2/demo.html](http://buildinternet.com/project/supersized/slideshow/3.2/demo.html) （这是一个很好的例子）
2.  [http://designshack.net/?p=13616](http://designshack.net/?p=13616)
3.  [http://css-tricks.com/examples/FullPageBackgroundImage/jquery.php](http://css-tricks.com/examples/FullPageBackgroundImage/jquery.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:04:06.180

尝试这个：

```
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
background-position:fixed; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:15:11.273

首先，尝试将您的 CSS 属性组合在一起，例如：

```
body {
width: 1000px;
height: 1200px;
background: #EDEDED url('Background.png') center top inherit no-repeat;
top: 0;
margin: 0 auto;
padding: 0;
font: .85em "Trebuchet MS" , Verdana, Helvetica, Sans-Serif;
color: #696969;
} 
```

您能否也为该问题提供一个 jsFiddle，以便我们可以看到完整的代码或页面链接？

[http://jsfiddle.net/](http://jsfiddle.net/)

谢谢

# sendgrid - 有没有比 Phplist 更好的前端与 Sendgrid 集成？

> ID：11195608
> 
> 赞同：2
> 
> 时间：2012-06-25T19:00:59.927
> 
> 标签：sendgrid, phplist

我目前正在将 Sendgrid（后端 API）与 Phplist（前端）集成。但是，我意识到 Phplist 不支持许多功能，例如自动回复、不同的管理级别（子/超级用户）并且无法发送大量。我可以知道是否有更好的前端可以用来将它与 sendgrid 集成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:04:21.603

是的！[OpenEMM](http://www.openemm.org/)似乎具有您正在寻找的功能。[您可以在此处](http://www.openemm.org/why/features.html)查看完整列表，但重点是：

*   配置具有不同权限/角色的不同用户
*   自动回复邮件和错误消息（退回管理）

设置看起来有点棘手，但他们有很好的文档。此外，[代码托管在 SourceForge 上](http://sourceforge.net/projects/openemm/)，评论看起来也很可靠。

在使用 SendGrid 进行设置方面，您必须配置您`sendmail`以使用我们的 SMTP 服务器。幸运的是，我们已经有一个教程向您展示了如何做到这一点：

> [http://docs.sendgrid.com/documentation/get-started/integrate/examples/sendmail/](http://docs.sendgrid.com/documentation/get-started/integrate/examples/sendmail/)

# ios - 屏幕上一个 UIImageView 的多个实例

> ID：11195616
> 
> 赞同：-1
> 
> 时间：2012-06-25T19:01:39.787
> 
> 标签：ios, cocoa-touch, sdk

我正在制作一个涉及子弹的游戏。它是机关枪，所以屏幕上会同时出现不止一颗子弹。如何为一个项目符号的属性和操作编写代码并将其应用于所有项目，例如一个项目符号的多个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:10:26.190

您是否尝试过子类化`UIImageView`？这样你就可以拥有一个`createBullet`创建子类`UIImageView`并将其添加到屏幕的函数，并且在子类中它可以包含用于动画等的函数和属性......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:13:26.643

制作游戏的关键在于*sprite*的概念，即具有图形表示并且可以四处移动（管理碰撞等）的轻量级对象。

您可以尝试在 CALayers 之上使用 Core Animation 实现精灵，或者您可能决定使用像[Cocos2D](http://www.cocos2d-iphone.org/)这样的游戏框架。

对于第一种方法，请查看[这个简短的教程](http://www.angryfishstudios.com/2011/04/sprites-using-only-coreanimation/)。如果你想使用 UIImageViews 实现你的精灵，这也可以帮助你，尽管你必须记住 CALayer 是轻量级的，UIView 不是，所以如果你计划有很多可能会有所作为。

至于复制子弹的问题，基本上关键建议是使用某种形式的缓存，这样您就不会在内存中多次复制相同的图像。`UIImage`如果您使用便利构造函数，则该类可以使用非常基本的缓存机制`imageNamed`。

同样，如果您打算制作具有良好性能（例如 40-60 fps）的成熟游戏，最好的建议是使用 Cocos2D，它将为您提供封装在简单界面中的 Open GL 图形的所有功能。

# sql - 将文件写入存储过程中的网络驱动器

> ID：11195619
> 
> 赞同：1
> 
> 时间：2012-06-25T19:02:07.183
> 
> 标签：sql, sql-server

我有一个存储过程，可以使用 BCP 将文件写入网络驱动器，方法是在数据库服务器上创建一个临时驱动器，该驱动器映射到另一台服务器上的共享驱动器。它工作正常，但是，我从最后一个`EXEC`命令返回一个错误，这表示`There are open files and/or incomplete directory searches pending on the connection to U:.`我猜测它正在尝试在完成写入文件之前执行删除驱动器命令。如果我在运行 proc 后运行语句，它将成功删除驱动器。这是过程：

```
CREATE PROCEDURE dn_ExportFile
    @ServerName varchar(50),
    @ServerPath varchar(500),
    @FileName varchar(100),
    @Query varchar(max),
    @UserName varchar(100),
    @Password varchar(100),
    @Drive varchar(1) = 'U'
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @cmd VARCHAR(8000)

    --Set up virtual drive pointing to desired path
    SET @cmd = 'NET USE ' + @Drive + ': ' + @ServerPath + ' /user:' + @ServerName + '\' + @UserName + ' ' + @Password
    PRINT @cmd
    EXEC xp_cmdshell @cmd

    --Export data using BCP to virtual drive
    SET @cmd = 'BCP "' + @Query + '" QUERYOUT "' + @Drive + ':\' + @FileName + '" -c -t -T'
    PRINT @cmd
    EXEC xp_cmdshell @cmd

    --Delete virtual drive
    SET @cmd = 'NET USE ' + @Drive + ': /delete'
    PRINT @cmd
    EXEC xp_cmdshell @cmd
END 
```

有没有办法成功删除存储过程中的临时驱动器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:22:13.060

我怀疑在调用过程仍在范围内时它不会发生。因此，您可以尝试执行以下操作的包装存储过程：

```
EXEC dbo.dn_ExportFile ...;

SET @cmd = 'NET USE ' + @Drive + ': /delete';
PRINT @cmd;
EXEC xp_cmdshell @cmd; 
```

Otherwise I still think you're doing this in the wrong place. Have the program that calls this procedure call the command and dictate the path.

# php - Wordpress 在两个表上的自定义查询以获取分层数据

> ID：11195620
> 
> 赞同：1
> 
> 时间：2012-06-25T19:02:09.687
> 
> 标签：php, mysql, wordpress

使用 Wordpress 并使用其功能在两个自定义表上查询数据库。我正在尝试将数据输出为“树/分组”格式。例子：

```
Team Name One
- Player Name One
- Player Name Two
- Player Name Three
- Etc...

Team Name Two
- Player Name one
- Player Name Two
- Player Name Three
- Etc... 
```

我不确定要以这种方式显示结果需要什么。这是我有一个连接表的查询......

```
global $wpdb;
$user_id = '1';
$teamlist = $wpdb->get_results( $wpdb->prepare( 
"
SELECT
fv_teams.team_id AS team_teamid,
fv_players.player_id,
fv_teams.team_name AS teamname,
fv_players.player_fname AS fname,
fv_players.player_lname AS lname,
fv_players.player_team AS team,
fv_players.player_position AS position
FROM
fv_teams
INNER JOIN fv_players ON fv_teams.team_id = fv_players.team_id
WHERE
fv_teams.user_id = %d
",
$user_id
), OBJECT ); 
```

我当然可以通过以下方式获得结果...

```
foreach ( $teamlist as $teamrow ) 
{
echo 'Team: ' .  $teamrow->teamname . '<br />';
echo 'Player ID: ' .  $teamrow->fname . '<br />';
} 
```

但是团队名称将在结果中重复为

```
Team Name One
- Player One
Team Name One
- Player Two
Team Name One
- Player Three
- Etc... 
```

我相当确定我需要在其中添加一个嵌套循环，但我不确定所需的编码。

任何想法或方向都会对一个刚刚失去大部分头发的人非常有帮助。; )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:37:37.003

不确定回答您自己问题的礼仪，但我能够通过将第二个查询嵌套在循环中来获得所需的内容。

```
$teamlist = $wpdb->get_results( $wpdb->prepare( 
"SELECT *
 FROM fv_teams
 WHERE user_id = '1'
",
$user_id
), OBJECT );

foreach ( $teamlist as $teamrow ) 
{
$get_team_id = $teamrow->team_id;
echo  '<hr>';
echo '<h2>' . $teamrow->team_name . '</h2>';
$playerlist = $wpdb->get_results( $wpdb->prepare( 
    "SELECT *
     FROM fv_players 
     WHERE team_id = %d
    ",
    $get_team_id
), OBJECT );

    echo '<ul>';
    foreach ( $playerlist as $playerrow ) 
    {
        echo '<li>Player Name: ' .  $playerrow->player_fname . '</li>';
    }
    echo '</ul>';   
} 
```

它需要清理，但对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:06:10.860

你需要一个`Group by`在teamid上。

示例：[http ://www.techonthenet.com/sql/group_by.php](http://www.techonthenet.com/sql/group_by.php)

**编辑**你需要写两个循环。

```
<?php 
 // in plain language
 if(TeamName has another value)
  display name;
   if (playername has another value)
    display playername;
   end if
 end if
 ?> 
```

# .net - .NET 门户“托管”多个 .NET 应用程序 - 我应该如何设置角色和权限？

> ID：11195622
> 
> 赞同：0
> 
> 时间：2012-06-25T19:02:15.327
> 
> 标签：.net, membership

我想建立一个 .NET 门户网站来容纳多个 .NET 应用程序。但是，我希望它只显示登录用户可用的那些应用程序。

你会怎么做？

# php - 发布数据并显示源代码

> ID：11195629
> 
> 赞同：-5
> 
> 时间：2012-06-25T19:02:39.460
> 
> 标签：php

我有一个问题，是否可以先将数据发布到网站，然后获取我发布数据的网站的源代码？

我试过这个：

```
$html = file_get_contents('http://test.com/test.php?test=test'); 
```

但是 ?test=test 是 $_GET....

所以，是的，我希望有人能帮助我！:)
在此先感谢（抱歉英语不好！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:11:28.687

您可以使用此函数的第三个参数：*上下文*

```
$postdata = http_build_query(
    array(
        'var1' => 'some content',
        'var2' => 'doh'
    )
);

$opts = array(
    'http' => array(
        'method' => "POST",
        'header' => "Connection: close\r\n".
                        "Content-Length: ".strlen($postdata)."\r\n",
        'content' => $postdata
  )
);

$context = stream_context_create($opts);

$result = file_get_contents('http://example.com/submit.php', false, $context); 
```

// 编辑 - 小错误应该是：

```
$opts = array(
    'http' => array(
        'method' => "POST",
        'header' => "Connection: close\r\n".
                    "Content-type: application/x-www-form-urlencoded\r\n".
                    "Content-Length: ".strlen($postdata)."\r\n",
        'content' => $postdata
  )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:07:43.933

您无法获取源代码，但可以获取服务器提供的页面/输出。正如您提到`file_get_contents()`的，您可以使用它来发送 POST 请求，但它看起来像这样。

```
// Create map with request parameters
$params = array ('surname' => 'Filip', 'lastname' => 'Czaja');

// Build Http query using params
$query = http_build_query ($params);

// Create Http context details
$contextData = array ( 
                'method' => 'POST',
                'header' => "Connection: close\r\n".
                            "Content-Length: ".strlen($query)."\r\n",
                'content'=> $query );

// Create context resource for our request
$context = stream_context_create (array ( 'http' => $contextData ));

// Read page rendered as result of your POST request
$result =  file_get_contents (
                  'http://www.sample-post-page.com',  // page url
                  false,
                  $context);

// Server response is now stored in $result variable so you can process it 
```

示例来自： http: [//fczaja.blogspot.se/2011/07/php-how-to-send-post-request-with.html](http://fczaja.blogspot.se/2011/07/php-how-to-send-post-request-with.html)

# python - TypeError：井字游戏中的列表索引必须是整数 - Python 3.2？

> ID：11195641
> 
> 赞同：0
> 
> 时间：2012-06-25T19:03:41.283
> 
> 标签：python, pygame, typeerror, tic-tac-toe

所以我在制作井字游戏时遇到了多个问题，但我已经找到了大多数问题的解决方案。但现在的问题是我读错了

```
Traceback (most recent call last):
  File "/Users/user/Desktop/tic tac toe game.py", line 43, in <module>
    if board[input] != 'x' and board[input] !='o':
TypeError: list indices must be integers, not builtin_function_or_method" 
```

当我尝试运行它时。这是它遇到问题的代码：

```
if board[input] != 'x' and board[input] !='o':
        board[input] = 'x' 
```

我不知道该怎么做，我喜欢在星期四刚开始使用 python 并且对它不是很聪明。但感谢所有的帮助（：哦，我有 python 3.2.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:05:36.710

看起来`input`这里不是整数，你在`input()`这里使用过，这是一个内置函数。也不要`input`用作变量名。

**看到同样的错误：**

```
>>> a=[1,2,3,4]
>>> a[input]

Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    a[input]
TypeError: list indices must be integers, not builtin_function_or_method 
```

要解决它，请使用：

```
>>> Board=['a','x','o','b','c','d']
>>> n=input()#input returns a string,not integer
2
>>> if Board[int(n)]!='x' and Board[int(n)]!='o': #list expect  only integer indexes,convert n to integer first using
    Board[int(n)]='x'

>>> Board
['a', 'x', 'o', 'b', 'c', 'd'] 
```

# c# - ClickOnce 部署的问题是什么？

> ID：11195642
> 
> 赞同：0
> 
> 时间：2012-06-25T19:03:41.440
> 
> 标签：c#, windows, winforms, deployment, clickonce

由于部署问题（http://stackoverflow.com/questions/11194459/is-windows-afraid-of-its-own-shadow-and-how-can-i-determine-which-ancillary-fil），我我正在考虑尝试一次单击部署我的 C# 应用程序。这是为了部署到我工作的所有用户都可以访问的网络上的驱动器/文件夹。对此有任何警告或陷阱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:21:09.103

[此](http://smartclient.codeplex.com/wikipage?title=Smart%20Client%20Software%20Factory&ProjectName=smartclient)页面上的 clickonce 社区资源工具包包含一个 pdf，其中包含有关 clickonce 部署的大量信息。最近它变得很难找到，因为它的牙齿越来越长了，但我认为它仍然有一些好东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:30:17.570

我维护了一个点击一次应用程序几年，据我所知，您无法更改安装位置（它进入用户的 AppData 文件夹）。但是，如果您想要将其部署到网络共享的唯一原因是因为访问，那么这应该不是问题。我们遇到了几个问题：

*   不要忘记禁用“需要签名的安全证书”选项。完全忘记了这一点，然后无法弄清楚为什么一年后我们所有的机器都停止了更新！
*   检查 ApplicationDeployment.CurrentDeployment.DataDirectory 中设置为“复制到输出目录”的项目

# java - 制作一个 Safari 阅读器风格的应用程序

> ID：11195643
> 
> 赞同：3
> 
> 时间：2012-06-25T19:03:46.187
> 
> 标签：java, html, webpage, interpreter

我受到 Safari 的阅读器功能的启发，它可以让您忽略网页上除故事之外的所有内容（所有文本、链接和图像构成页面的点，但没有任何标记、前因或后果） . 我想制作一个**基于 Java 的**版本作为轻量级“浏览器”。

我的问题在这里：我不知道如何辨别主要内容。在查看了诸如[MSN 文章](http://nbcpolitics.msnbc.msn.com/_news/2012/06/25/12398271-high-court-strikes-down-key-parts-of-arizona-immigration-law?lite/)和[同人小说](http://www.fimfiction.net/story/11863/1/Just-Relax/Just-Relax)之类的 Reader 识别页面后，我意识到 Reader 识别的实际文本不仅难以找到，而且不一致，并且带有看似随机的标签。例如，虽然新闻链接开始其故事`<div class="postBody">`并且每个段落都在`<p>`s 中，但链接的小说链接开始`<div class="chapter_content" id="chapter_container">`并且每个段落都以`<br /><div style='float:left; height:1.0em; width:3.0em;'></div>`但不在其自己的容器中。

由于 Safari 支持这个“阅读器”界面，显然有办法做到这一点，所以我不会问它是否存在。相反，我想知道这一点：**无论页面本身是如何构造的，****什么是一种好的、快速的、*Java 支持的算法，用于提取网页上故事的标题和正文？***

对于上下文，我已经创建了一个以 JEditorPane 作为窗口的基本浏览器，其 EditorKit 设置为 HTMLEditorKit，并且正在使用该`setPage(URL page)`方法显示目标页面，但这可以改变我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:16:48.787

如果您愿意使用服务，您应该查看[Instapaper](http://www.instapaper.com/api/simple)或[Readability](http://www.readability.com/developers/api) API；否则，您可以窥探[arc90 实验室的 JavaScript 概念验证](http://code.google.com/p/arc90labs-readability/)的 Readability 实现。您还可以在 GitHub 上找到Java 和[其他](https://github.com/kingwkb/readability)[几种](https://github.com/arrix/node-readability)[语言](https://github.com/feelinglucky/php-readability)[的 Readability的](https://github.com/basis-technology-corp/Java-readability)[几个](https://github.com/karussell/snacktory) [端口。](https://github.com/ymiyata/java-articleparser)

# xml - XSLT 在特定条件下仅输出节点的一部分

> ID：11195644
> 
> 赞同：1
> 
> 时间：2012-06-25T19:03:47.393
> 
> 标签：xml, xslt, xml-parsing, xslt-1.0

我经常得到一些未按预期格式化的 XML，并且正在寻找自动修复它的最佳方法。不幸的是，解决方案是在我头上滑冰。

我正在研究杂志内容，并且很难处理两个特定元素。

```
There are <subhead> elements, and <body> elements. Even though the subhead element should always be on it's own, sometimes the proofer will accidentally nest it with a <body> node.

<subhead> nodes should be formatted as their own paragraph, wrapped in <p> and <strong> tags.

<body> nodes should just be wrapped in <p> tags.

So I could get either:
<subhead>Dogs</subhead>
<body>Dogs do not like cats.</body>
or
<body><subhead>Dogs</subhead> Dogs do not like cats.</body>

I would like either scenario to output as:
<p><strong>Dogs</strong></p>
<p>Dogs do not like cats.</p> 
```

目前，我的代码看起来像..

```
<xsl:for-each select="//default:textObject/default:text/*">
<xsl:for-each select="./*">

<xsl:choose>

<xsl:when test="@name='subhead'">
<p><strong>
<xsl:apply-templates select="node()"/>
</strong></p>
</xsl:when>

<xsl:when test="@name='body'">
<p>
<xsl:apply-templates select="node()"/>
</p>
</xsl:when>

...

</xsl:choose>
</xsl:for-each>
</xsl:for-each> 
```

我怎样才能相应地调整它来解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:21:10.310

尝试为不可预测的传入数据结构编写 XSLT 通常是不可取的。如果出现其他嵌套错误怎么办？您的时间最好花在添加验证层上。在其最简单的形式中，这可能只是一个 DTD/Schema 表，校对者必须通过它运行他们的 XML。

尽管如此，要回答你的问题，试试这个。我假设每个`body`/`subhead`配对都在一个公共元素 ( `item`) 内，但你没有说。（否则，`subhead`标签本身在哪里，你怎么知道哪个`subhead`与哪个相关`body`- 它总是前面/后面的兄弟姐妹吗？）

**XML**

```
<root>
    <item>
        <subhead>Dogs</subhead>
        <body>Dogs do not like cats.</body>
    </item>
    <item>
        <body><subhead>Dogs</subhead> Dogs do not like cats.</body>
    </item>
</root> 
```

**XSL：**

```
<!-- root and static content -->
<xsl:template match="/">
    <xsl:apply-templates select='root/item/body' />
</xsl:template>

<!-- iteration content - subhead/body pairings (matching 'body' nodes) -->
<xsl:template match='body'>
    <p><strong><xsl:value-of select='parent::*/subhead | subhead' /></strong></p>
    <p><xsl:value-of select='text()' /></p>
</xsl:template> 
```

您可以在[此 XMLPlayground 会话](http://www.xmlplayground.com/PL5F7N)中运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:25:07.723

**这个简短而简单的完整转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" />
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="(subhead | body/subhead)/text()"/>
  <xsl:text>&#xA;</xsl:text>
  <xsl:apply-templates select="body/text()"/>
 </xsl:template>

 <xsl:template match="subhead/text()">
  <p><strong><xsl:value-of select="."/></strong></p>
 </xsl:template>

 <xsl:template match="body/text()">
  <p><xsl:value-of select="."/></p>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时：**

```
<t>
    <subhead>Dogs</subhead>
    <body>Dogs do not like cats.</body>
</t> 
```

**产生想要的结果：**

```
<p><strong>Dogs</strong></p>
<p>Dogs do not like cats.</p> 
```

**当相同的转换应用于第二种类型的文档时：**

```
<t>
    <body><subhead>Dogs</subhead> Dogs do not like cats.</body>
</t> 
```

**再次产生同样想要的正确结果：**

```
<p><strong>Dogs</strong></p>
<p> Dogs do not like cats.</p> 
```

**解释**：

特定模板的结果出现在输出中的顺序不取决于匹配节点的顺序，而是取决于`<xsl:apply-templates>`导致选择执行模板的相应指令的顺序。

**请注意**：

如果文档的结构*真的*不知道，只需在上面的代码中替换：

```
 <xsl:apply-templates select="(subhead | body/subhead)/text()"/> 
```

和：

```
 <xsl:apply-templates select="(//subhead | //body/subhead)/text()"/> 
```

# javascript - 使用字符串从 jQuery AJAX 遍历 JSON 对象

> ID：11195648
> 
> 赞同：1
> 
> 时间：2012-06-25T19:04:01.763
> 
> 标签：javascript, jquery

是否可以将JSON的遍历路径存储在第一级以外的变量中？

在变量中定义 JSON 遍历路径。

```
var jsonPathLink = 'sequenceId'; 
var jsonPathText = 'answer.body'; 
```

jQuery AJAX 调用。（我删除了所有不必要的设置，但如果您想要包含更多代码，请告诉我。）

```
$.ajax({
  success: function(data){
    if(data.length > 0){
      for(x in data){
        console.log(data[x][jsonPathLink]); // This works.

        console.log(data[x][jsonPathText]);  // This does not work.
        console.log(data[x] + jsonPathText); // This also does not work.
      }
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:23:35.473

您可以编写一个 traverseObject 函数，如下所示：

```
function traverseObj(obj, path) {

    var arr = path.split('.'),
        len = arr.length,
        i = 0,
        ret;

    for ( ; i<len; i+=1 ) {

        // on the first iteration, the passed object
        // is cached in the ret-variable.
        ret = !i
            ? obj[arr[i]]
            : ret[arr[i]];

    }

    return ret;

} 
```

路径的单个元素通过迭代它们应用于传递的 obj。结果被缓存并返回。

示例：http: [//jsfiddle.net/k8GWz/](http://jsfiddle.net/k8GWz/)

# android - android：阿拉伯字体的问题

> ID：11195654
> 
> 赞同：0
> 
> 时间：2012-06-25T19:04:18.613
> 
> 标签：android, arabic

它在 xperia x8(gingerxperia) 上正确显示。但摩托罗拉 Photon 中的字母和符号显示不正确。附上图片。使用的 Unicode 有：("\u062D"+"\u064D")、("\u062E"+"\u064D")、("\u0639"+"\u064D")、("\u063A"+"\u064D" ）。

光子：

![摩托罗拉光子](../Images/18be91ca8ae8579bf24c60ccc4cd0170.png)

Xperia（正确）：

![Xperia x8](../Images/c709b36a5ebf7a62f5d01db332d2b92c.png)

有没有办法解决这个问题？感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:14:07.953

简而言之，您需要彻底检查摩托罗拉 Photon 是否确实正确地渲染了双向文本。我相信市场上会有一些东西可以为你确认这一点，可以判断比迪烟是否正确呈现。

这可能取决于摩托罗拉 Photon 上使用的 ROM。也许有更新可以修复它？

bidi == 双向用于阿拉伯语/希伯来语文本。

XDA 上的快速 google-fu 产生了这个[可能](http://forum.xda-developers.com/showthread.php?t=701281)对您有所帮助的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:14:27.740

使用具有所有阿拉伯字形的自定义字体。

```
Typeface font1 = Typeface.createFromAsset(context.getAssets(), "fonts/myfonts.ttf");
textView.setTypeface(font1); 
```

试试这些字体 [http://www.4shared.com/file/0ZWijAyt/Wikoles_Store_-_Arabic_Android.html](http://www.4shared.com/file/0ZWijAyt/Wikoles_Store_-_Arabic_Android.html)

# html - css: UL 和 LI 应该溢出包含 TD

> ID：11195656
> 
> 赞同：0
> 
> 时间：2012-06-25T19:04:19.017
> 
> 标签：html, css

我有一个包含 UL 和 LI 的 TD。我试图让列表在 TD 之外流动。如果我使用 position:absolute 所有 LI 堆叠在一起。有没有办法让 LI 保持它们相对于彼此的位置并且仍然在包含的 TD 之外流动？

编辑添加的代码（它是用 rails 编写的，但我已经包含了生成的 HTML）：

CSS

```
#calendar li {
width: 265px;
 position: absolute;
 background: palegreen;
} 
```

生成的 HTML

```
<td class="weekend">
    24
     <ul>
    <li>
        Deleware (2)
    </li>
  </ul>
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:14:29.247

您是否尝试过添加

```
position:relative; 
```

到 td 元素。

（像这样[http://jsfiddle.net/ZGyDW/](http://jsfiddle.net/ZGyDW/)）

Afaik 这是父元素所必需的，以便在其中绝对定位子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:34:23.543

我重新阅读了您的解释并更新了我的[小提琴](http://jsfiddle.net/tracyfu/9wc6q/15/)。我不知道您是否能够添加元素，但您可以尝试将所有`ul`s 包装在 a 中`div`并绝对定位`div`. 这是我的CSS：

```
table {
    color: #666;
    font: 16px normal Arial, Helvetica, sans-serif;
    margin: 30px;
}

td {
    border: 1px solid #f00;
    height: 200px;
    padding: 5px;
    position: relative;
    vertical-align: top;
    width: 200px;
}

div {
    position: absolute;
}

ul {
    border: 1px solid #00f;
    margin: 5px 0;
    width: 300px;
    z-index: 2;
}

li {
    border: 1px solid #0f0;
    padding: 5px;
}​ 
```

# javascript - 在同一页面上多次运行 Greasemonkey 脚本？

> ID：11195658
> 
> 赞同：35
> 
> 时间：2012-06-25T19:04:31.190
> 
> 标签：javascript, ajax, greasemonkey, tampermonkey

我对 Greasemonkey、javascript，实际上是所有 UI 的东西都是全新的。

要求：用户脚本在页面加载后由 GS 运行一次。但是，我需要多次运行相同的脚本而不刷新

用例：例如，Amazon.com 搜索使用 Ajax。我需要在搜索结果中嵌入自定义元素。

每次在同一页面中发生搜索时，我都需要将我的内容与结果一起注入到 search-results-div 中（没有页面刷新）

我当前的脚本仅在页面刷新时运行。

我希望上面的解释清楚。请帮忙。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-25T21:58:19.450

最简单、最可靠的方法是使用[waitForKeyElements() 实用程序](https://gist.github.com/2625891)。

这是一个使用 jQuery 并更改亚马逊搜索结果的***完整脚本：***`waitForKeyElements`

```
// ==UserScript==
// @name     _Amazon Search, alter results
// @include  http://www.amazon.com/s/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

function addCustomSearchResult (jNode) {
    //***** YOUR CODE HERE *****
    jNode.prepend (
        '<div id="result_000" class="fstRow">Buy my stuff, instead!</div>'
    );
}

waitForKeyElements ("#atfResults", addCustomSearchResult); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-25T19:53:46.257

您可以使用该`DOMNodeInserted`事件来调用您的回调，例如：

```
document.addEventListener('DOMNodeInserted', function() { alert('hi') }, false); 
```

请注意，该事件将由页面结构的任何更改触发，因此您必须检查您是否针对正确的更改。

# git - .gitignore 在新的 repo 上（不能在新的 repo 上重置）

> ID：11195659
> 
> 赞同：1
> 
> 时间：2012-06-25T19:04:31.700
> 
> 标签：git

几乎每次我启动一个新的仓库时都会发生这种情况。

1.  开始一个新项目。创建一堆新文件。

2.  `git init`

3.  `git add .`

4.  哦，拍摄，我需要忽略一些 IDE/构建杂物。

5.  `echo ".scons-nodecount" > .gitignore`

6.  该死的，.gitignore 没有看到它，因为这个文件已经被添加了。

7.  `git reset .scons-nodecount`

8.  该死， git reset 不起作用，因为还没有提交。

    ...不知道在这里做什么，所以...

9.  重来：`rm -rf .git`

- 编辑 -

如何从新仓库的索引中删除文件？ `git reset`是我传统上会做的，但如果没有事先提交，这似乎是不允许的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:06:28.167

我一直在做同样的事情。试试`git rm --cached .scons-nodecount`。这将指示 Git 删除文件，但仅从索引 ( `--cached`) 中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T22:54:38.343

如果您不想手动删除所有文件，另一种简单重置完整索引的方法`git rm --cached`是 delete `.git/index`。这将在不实际接触文件的情况下重置所有内容，因此您无需完全重新开始。

但当然`git rm --cached <file>`是你通常会做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:14:48.950

最好配置一个全局模板并将 IDE 模式写入 $GIT_DIR/info/exclude，因此在每次初始化时，您都会有一个 IDE 的排除模式，或者只为所有项目使用公共文件并为其指定`core.excludesfile`。

# actionscript-3 - AS3 序列化

> ID：11195661
> 
> 赞同：0
> 
> 时间：2012-06-25T19:04:40.300
> 
> 标签：actionscript-3, apache-flex, serialization, file-io, flash-builder

*我正在尝试做的事情：*

- 将对象放在工具栏中，拖放到影片剪辑上（然后它们成为影片剪辑的子项）。完成此操作后，我希望能够序列化此对象，以便将其保存到文件中。然后，我可以重新加载此文件，并继续将内容拖放到此影片剪辑上/上。

*我是怎么做的：*

```
public class Serialization {
    public static function serializeToString(value:Object):String{
        if(value==null){
            trace("null isn't a legal serialization candidate");
        }
        var bytes:ByteArray = new ByteArray();
        bytes.writeObject(value);
        bytes.position = 0;
        var be:Base64Encoder = new Base64Encoder();
        be.encode(bytes.readUTFBytes(bytes.length));
        return be.drain();
    }

    public static function readObjectFromStringBytes(value:String):Object{
        var dec:Base64Decoder=new Base64Decoder();
        dec.decode(value);
        var result:ByteArray=dec.drain();
        result.position=0;
        return result.readObject();
    }      
} 
```

这是调用函数/将其写入文件的位置：

```
 var fr:FileReference = new FileReference;
        fr.addEventListener(Event.COMPLETE, success);
        var txtString:String = new String();
        txtString = save.Serialization.serializeToString(pagePic);
        trace(txtString);
        fr.save(txtString, "test.txt"); 
```

不幸的是， txtString 似乎是空白的。我接近这个错误吗？

旁注：这是为移动平台开发的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:53:15.617

遗憾的是，无法序列化 MovieClips、Sounds 和其他资源。我的解决方案是创建一个自定义类，该类将存储我的所有属性并在加载时重新分配它们，或者在保存/加载时仅写入/解析文本文件。

# sms - 通过 Twilio SMS 发送特殊字符，例如 ®

> ID：11195671
> 
> 赞同：3
> 
> 时间：2012-06-25T19:05:24.477
> 
> 标签：sms, twilio

我正在使用 Twilio 发送 SMS 消息，并且我想在我的消息中包含注册符号 ®。有谁知道需要发送什么魔法调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:51:18.627

> **注意：** Twilio 现在支持 Unicode。根据[他们的文档](https://www.twilio.com/docs/glossary/what-is-unicode)，“默认情况下，使用 Twilio 发送的 SMS 消息通过 UCS-2 字符编码支持 Unicode，以准确表示在不同地理位置和运营商之间发送的全球语言。”

注册商标[符号](http://en.wikipedia.org/wiki/Registered_trademark_symbol)® 没有等效的 ASCII 表示，根据这个[答案](http://forum.twilio.com/twilio/topics/does_twilio_support_sending_unicode_sms_messages)和最近的这个[，](http://forum.twilio.com/twilio/topics/what_is_the_twilio_roadmap_for_adding_unicode_and_bulk_sending_support) Twilio 还不支持 Unicode。

# openoffice.org - 使用自动填充时如何在公式中保持一个字段固定？

> ID：11195673
> 
> 赞同：20
> 
> 时间：2012-06-25T19:05:28.863
> 
> 标签：openoffice.org, autofill, libreoffice

我想将公式自动填充到一列中的一堆字段中。我可以通过手动填写两个字段然后选择它们并向下拖动来做到这一点。

我希望 B 列的单元格为 =D1*A1 , =D1*A2,... 注意 D1 不应更改。

当我向下拖动字段或使用（编辑>填充...）时，它会将 D1 更改为 D2、D3、... 如何保持一个字段固定以进行自动填充？

按住 ctrl 按钮没有帮助。

任何的想法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-25T19:28:52.150

制作你的“大师”配方`=D$1*A1`。这`1`将`D$1`零件中的标记为恒定。您也可以使用 使该`D`部分保持不变`=$D$1*A1`，但由于您声明这是一个单列，因此在这种情况下它应该无关紧要。

请注意，这也适用于 Microsoft Excel，我认为自从 HDOS 上的 supercalc 以来，它几乎是所有电子表格的共同特征。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T20:02:02.123

我刚刚找到了另一种方法（这并不比 twalberg 的简单，但值得一提）......

您可以定义一个名称（插入 > 名称...定义）。选择一个字段并为其命名。然后是公式中的名称。

# javascript - 运行查询并从外部站点检索 XML

> ID：11195674
> 
> 赞同：0
> 
> 时间：2012-06-25T19:05:30.907
> 
> 标签：javascript, xml, ajax, xss

我正在尝试使用 Ajax 向外部数据库 (http://foreignserver:1234/database?query="SELECT FROM WHERE") 提交查询。查询将运行并创建一个我想要返回的 XML 文件。外部服务器在 Apache Tomcat 上运行。我对跨站点脚本进行了一些研究，但是：

-CORS 不是一个选项，因为必须支持 IE7。在 Tomcat 中似乎也很难做到。

-easyXDM 不是一个选项。

- 我正在尝试用 XML 来做这件事，而 JSONP 似乎是 JSON 的东西？

- 会有很多数据返回，所以 iFrame 可能不是一个选项。

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:09:28.617

*   JSONP 更适合此任务，因为 JSON 语法很轻，尤其是在您有大量数据的情况下。此外，JSONP 已经绕过 SOP 并且是纯粹的客户端，除了服务器将数据编码为 JSON 的事实。但是，您必须使用 JSON 而不是 XML。

*   如果你真的坚持使用 XML，你可以让你的服务器帮助你获取远程页面。这意味着您域中的浏览器从同一域中的服务器请求页面，然后您的服务器读取远程页面并将其返回给浏览器。您的服务器将成为绕过 SOP 的代理。

# mysql - 从下表生成支出报告

> ID：11195675
> 
> 赞同：0
> 
> 时间：2012-06-25T19:05:32.937
> 
> 标签：mysql, django-models, django-queryset

我目前的项目是根据下表生成支出报告。完整的报告是按特许经营的零售类别显示用户的支出 $ 细分，例如

用户 1

零售类别 1：20 美元

零售类别 2：30 美元

零售类别 3：35 美元

用户 2

零售类别 1：10 美元

零售类别 2：15 美元

零售类别 3：5 美元

以下是表格：

```
class User(models.Model):
    id_user = models.AutoField(primary_key = True)

class Franchises(models.Model):
    id_franchise = models.AutoField(primary_key=True)
    retail_category = models.IntegerField(default=99)  # values are 1 to 13

class Stores(models.Model):
    id_store = models.AutoField(primary_key=True)
    franchise = models.ForeignKey(Franchises, db_column='id_franchise')

class Receipts(models.Model):
    id_receipt = models.AutoField(primary_key=True)
    store = models.ForeignKey(Stores, db_column='id_store')
    user = models.ForeignKey(User, db_column='id_user')
    grand_total = models.DecimalField(max_digits=19, decimal_places=4) 
```

我会很感激任何原始的 mysql 或 django 模型查询。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:42:24.453

希望我将您的 django 模式规范正确地转换为原始 mysql：

```
SELECT user, retail_category, SUM(grand_total)
FROM Receipts
INNER JOIN Stores ON Receipts.store = Stores.id_store
INNER JOIN Franchises ON Stores.franchise = Franchises.id_franchise
GROUP BY user, retail_category; 
```

# javascript - 在 Dojo 日期选择器中禁用未来日期？

> ID：11195678
> 
> 赞同：1
> 
> 时间：2012-06-25T19:05:38.813
> 
> 标签：javascript, date, datepicker, dojo

我想禁用 dojo date Picker 中的未来日期。

```
<input dojoType="dijit.form.DateTextBox"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T19:39:45.443

```
dijit.byId('textBoxID').constraints.max = new Date(); 
```

我不是道场专家，但我认为应该这样做。如果您也想禁止今天，请从新日期中减去 1 天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:49:09.653

```
<div id="mycal" data-dojo-type="dijit.Calendar" value="2009-08-07" data-dojo-props="isDisabledDate:dojo.date.locale.isWeekend"></div> 
```

 `````
 dojo.require("dijit.dijit"); // loads the optimized dijit layer
 dojo.require("dijit.Calendar");

dojo.ready(function () {
    new dijit.Calendar({
        value: new Date(),
        isDisabledDate: function (d) {
            var d = new Date(d);
            d.setHours(0, 0, 0, 0);
            var today = new Date();
            today.setHours(0, 0, 0, 0);
            return dojo.date.difference(today, d) < 0;
        }
    }, "mycal");
}); 
`````

# events - 在 Magento 中实现事件观察器

> ID：11195682
> 
> 赞同：2
> 
> 时间：2012-06-25T19:05:51.440
> 
> 标签：events, magento, observers

我开始了解 Magento Event Observers 是如何工作的，并希望有人可以帮助我弄清楚我需要寻找什么 Event 才能让我的潜在模块工作。我的某些产品有一个名为“child skus”的属性，它是我库存中其他产品的 SKU 编号数组。

例子：

名称：非常棒的产品

货号： TP-1212

儿童 SKUS：GP-3232,FD-4332,VC-5332

每次有人购买 TP-1212 时，我还需要 Magento 从幕后的那些子 skus 中扣除该数量。有谁知道在购买完成后是否有一个事件调度程序可以处理类似的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T21:41:28.807

这有点棘手，很可能下面的代码中没有涵盖一些边缘情况 - 答案也假设如下：

1.  您希望减少刚刚购买的父级所有相关产品的库存水平
2.  您只希望减少 1
3.  没有必须满足/处理的进一步并发症或其他条件

* * *

代码：

所以，你显然需要先创建一个模块。config.xml 需要声明将监听的观察者`checkout_type_onepage_save_order_after`。（**注意：**您可以收听其他事件以实现您的目标）。

config.xml 将至少包含以下代码：

```
<?xml version="1.0"?>
<config>
    <modules>
        <YourCmpany_YourModule>
            <version>1.0.0</version>
        </YourCmpany_YourModule>
    </modules>
    <frontend>
        <events>
            <checkout_type_onepage_save_order_after>
                <observers>
                    <yourmodule_save_order_observer>
                        <class>YourCompany_YourModule_Model_Observer</class>
                        <method>checkout_type_onepage_save_order_after</method>
                    </yourmodule_save_order_observer>
                </observers>
            </checkout_type_onepage_save_order_after>
        </events>
    </frontend>
    <global>
        <models>
            <yourmodule>
                <class>YourCompany_YourModule_Model</class>
            </yourmodule>
        </models>
    </global>
</config> 
```

然后在你的观察者中：

```
<?php

class YourCompany_YourModule_Model_Observer
{
    public function checkout_type_onepage_save_order_after(Varien_Event_Observer $observer)
    {
        $order = $observer->getEvent()->getOrder();

        /**
         * Grab all product ids from the order
         */
            $productIds = array();
        foreach ($order->getItemsCollection() as $item) {
            $productIds[] = $item->getProductId();
        }

        foreach ($productIds as $productId) {

            $product = Mage::getModel('catalog/product')
                ->setStoreId(Mage::app()->getStore()->getId())
                ->load($productId);

            if (! $product->isConfigurable()) {
                continue;
            }

            /**
             * Grab all of the associated simple products
             */
            $childProducts = Mage::getModel('catalog/product_type_configurable')
                        ->getUsedProducts(null, $product);

            foreach($childProducts as $childProduct) {

                /**
                 * in_array check below, makes sure to exclude the simple product actually 
                 * being sold as we dont want its stock level decreased twice :)
                 */
                if (! in_array($childProduct->getId(), $productIds)) {

                    /**
                     * Finally, load up the stock item and decrease its qty by 1
                     */
                    $stockItem = Mage::getModel('cataloginventory/stock_item')
                                    ->loadByProduct($childProduct)
                                    ->subtractQty(1)
                                    ->save()
                                ;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:50:35.237

有几种可能性，最简单的只是`checkout_type_onepage_save_order_after`

但是，如果订单取消或仅在付款或发货时执行此操作，您是否还需要恢复库存？

# export - Blender：导出为 Ogre 网格时导出错误根骨骼偏移

> ID：11195684
> 
> 赞同：1
> 
> 时间：2012-06-25T19:05:59.087
> 
> 标签：export, root, blender, ogre

我最近开始使用 Blender。我按照不同的教程创建了一个带有骨骼的角色。但是当我尝试将它导出为 Ogre 网格时，我得到了根骨骼具有位置和旋转偏移的错误。

我尝试了许多解决方案，例如 ctrl+a->location、重置位置、将位置和旋转设置为 0,0,0。但似乎没有任何效果。由于我无法使用动画导出，我尝试在没有任何移动的情况下导出模型。但我仍然遇到同样的错误。我正在使用搅拌机 2.62（我从 2.63 更改，因为它给出了错误，比如缺少面孔..）。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:44:11.053

我也遇到了这个问题，并尝试了不同的方法来解决它。当我试图纠正现有的电枢时，它没有带来任何结果。唯一对我有用的是从头开始创建骨架，从根骨开始并从一开始就正确放置。添加单个骨骼，然后按 alt+G 和 alt+R 清除位置和旋转。然后，根据您希望根骨骼的位置调整网格的位置。然后，进一步挤压它以制作整个骨架，但不要再改变它的位置或位置。完成后，父骨架要网格化。我不知道是否有任何其他解决方案，或者这个是否是最好的，但它对我有用。祝你好运！

# php - 如何在 IPv4 中显示在网页中显示 ::1 的 IP 地址

> ID：11195688
> 
> 赞同：0
> 
> 时间：2012-06-25T19:06:17.703
> 
> 标签：php, ip, ipv4

我想显示计算机客户端的 IP 地址。但是在我在本地主机中运行的计算机中只显示 "::1" 。如果我在 localhost 中运行，它应该显示 127.0.0.1。那么如何显示IP地址，尤其是在IPv4中。因为我在另一篇文章中读到 ::1 在 IPv6 中。这是我的代码：

```
function get_ip()
{
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   //check ip from share internet
    {
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))   //to check ip is pass from proxy
    {
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
      $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
}

$ip = get_ip(); 

echo $ip; 
```

帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:11:33.593

如果您希望 Web 服务器看到您从 127.0.0.1 连接，那么您必须通过 IPv4 连接。尝试导航到`http://127.0.0.1`而不是`http://localhost`. 如果您通过 IPv6 连接，那么Web 服务器*当然*会报告 IPv6 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-04T13:03:48.543

```
function getIP() {
    $ip = $_SERVER['SERVER_ADDR'];

    if (PHP_OS == 'WINNT'){
        $ip = getHostByName(getHostName());
    }

    if (PHP_OS == 'Linux'){
        $command="/sbin/ifconfig";
        exec($command, $output);

        $pattern = '/inet addr:?([^ ]+)/';

        $ip = array();
        foreach ($output as $key => $subject) {
            $result = preg_match_all($pattern, $subject, $subpattern);
            if ($result == 1) {
                if ($subpattern[1][0] != "127.0.0.1")
                $ip = $subpattern[1][0];
            }

        }
    }

    return $ip;
}

echo getIP(); 
```

# jboss6.x - 在同一台机器、同一时间和同一应用程序中运行 2 个 Jboss 6.1.0 副本

> ID：11195690
> 
> 赞同：0
> 
> 时间：2012-06-25T19:06:22.083
> 
> 标签：jboss6.x

嗨，有人可以为我提供在不同端口的同一台机器上运行 2 个 JBoss 6.1.0 Final 的分步指南吗？我的要求是我想在 2 个不同的 JBoss6.1.0 Final 实例中同时运行相同的 Web 应用程序。一个应该在端口 8080 上运行，另一个应该在 8180 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:15:15.743

[你可以在这里](https://community.jboss.org/wiki/ConfiguringMultipleJBossInstancesOnOneMachine)找到所有信息

假设您有两个配置文件（node1 和 node2），您可以运行这两个命令来运行两个实例

```
./run.sh -c node1
./run.sh -c node2 -Djboss.service.binding.set=ports-01 -Djboss.messaging.ServerPeerID=1 
```

# html - 试图在一个 Flash 视频播放器上按顺序播放多个视频？

> ID：11195691
> 
> 赞同：0
> 
> 时间：2012-06-25T19:06:22.280
> 
> 标签：html, flash, html5-audio

我设置了一个常规的 Flash 视频播放器，并且能够成功播放一个视频。但是，我需要在这个视频播放器上按顺序播放 3 个不同的视频。

我无法弄清楚如何使用常规 HTML 来做到这一点（在 HTML5 中不是很难）？欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:24:53.090

如果您没有 .fla 源文件，那么您可能需要查看其他 3rd 方解决方案，例如[Flow Player](http://flowplayer.org/demos/configuration/playlist.html)或[JWPlayer](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16006/javascript-playlist-in-the-jw-embedder)

**编辑：** [根据 JWPlayer 文档](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12536/configuration-options#behavior)

```
repeat ( none )
What to do when the mediafile has ended. Has several options:

none: do nothing (stop playback) whever a file is completed.
list: play each file in the playlist once, stop at the end.
always: continously play the file (or all files in the playlist).
single: continously repeat the current file in the playlist. 
```

因此，当您在 javascript 中初始化它时，将重复 arg 添加到您现有的`.setup()`调用中：

```
jwplayer('mediaplayer').setup({
    'flashplayer': 'player.swf',
    ...
    'repeat': 'always',
    ...
    'id': 'playerID',
    ... 
```

# php - json_encode PHP 数组作为 JSON 数组而不是 JSON 对象

> ID：11195692
> 
> 赞同：129
> 
> 时间：2012-06-25T19:06:27.410
> 
> 标签：php, json

我在 PHP 中有以下数组：

```
Array
(
    [0] => Array
        (
            [id] => 0
            [name] => name1
            [short_name] => n1
        )

    [2] => Array
        (
            [id] => 2
            [name] => name2
            [short_name] => n2
        )
) 
```

我想将 JSON 编码为 JSON 数组，生成如下字符串：

```
[  
    {  
        "id":0,
        "name":"name1",
        "short_name":"n1"
    },
    {  
        "id":2,
        "name":"name2",
        "short_name":"n2"
    }
] 
```

但是当我调用[`json_encode`](http://uk3.php.net/json_encode)这个数组时，我得到以下信息：

```
{  
    "0":{  
        "id":0,
        "name":"name1",
        "short_name":"n1"
    },
    "2":{  
        "id":2,
        "name":"name2",
        "short_name":"n2"
    }
} 
```

这是一个对象而不是数组。

我怎样才能`json_encode`将我的数组编码为数组呢？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2013-09-24T09:18:41.243

请参阅RFC 8259 中的[数组](https://datatracker.ietf.org/doc/html/rfc8259#section-5)**JavaScript 对象表示法 (JSON) 数据交换格式**：

> 数组结构表示为围绕零个或多个值（或元素）的方括号。元素用逗号分隔。
> 
> 数组 = 开始数组 [ 值 *( 值分隔符值 ) ] 结束数组

您正在观察这种行为，因为您的数组不是连续的 - 它有键`0`和`2`，但没有`1`作为键。

仅仅有数字索引是不够的。`json_encode`如果您的 PHP 数组是顺序的，则只会将您的 PHP 数组编码为 JSON 数组 - 也就是说，如果它的键是 0, 1, 2, 3, ...

您可以使用该[`array_values`](http://uk3.php.net/array_values)函数按顺序重新索引数组以获得所需的行为。例如，以下代码在您的用例中成功运行：

```
echo json_encode(array_values($input)). 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-06-25T19:13:49.787

`Array`in**仅**`JSON`索引数组，因此您尝试获取的结构不是有效的 Json/Javascript。

 **PHP Associatives 数组是 JSON 中的对象，因此除非您不需要索引，否则无法进行此类转换。

如果你想得到这样的结构，你可以这样做：

```
$indexedOnly = array();

foreach ($associative as $row) {
    $indexedOnly[] = array_values($row);
}

json_encode($indexedOnly); 
```

将返回如下内容：

```
[
     [0, "name1", "n1"],
     [1, "name2", "n2"],
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-31T18:58:05.323

> json_decode($jsondata, true);

**true**将所有属性转换为数组（顺序或不顺序）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-11-29T14:51:05.973

试试这个，

```
<?php
$arr1=array('result1'=>'abcd','result2'=>'efg'); 
$arr2=array('result1'=>'hijk','result2'=>'lmn'); 
$arr3=array($arr1,$arr2); 
print (json_encode($arr3)); 
?> 
```**

# javascript - 无限滚动javascript未运行

> ID：11195697
> 
> 赞同：1
> 
> 时间：2012-06-25T19:06:47.473
> 
> 标签：javascript, jquery, infinite-scroll

我正在尝试使用此问题中给出的代码向页面添加无限滚动功能，[检查用户是否滚动到底部](https://stackoverflow.com/questions/3898130/how-to-check-if-a-user-has-scrolled-to-the-bottom)，但是当我滚动到页面底部时没有任何反应。这是代码，因此您不必点击链接：

```
<script type="text/javascript"> 
alert("popup!");    
$(window).scroll(function() {   
   if($(window).scrollTop() + $(window).height() > $(document).height() - 100) {
       alert("bottom!");
   }
});  
</script> 
```

我在第一个警报中添加了检查它是否只是我的浏览器阻止警报，但它显示正常。服务器还安装了 JQuery 1.7.2 min 并且页面是正确的，所以我认为这不是安装问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:10:07.363

也许滚动事件使用您那里的语法正确触发，试试这个：

```
$(window).on('scroll', function () { 
  if ($(window).height() + $(window).scrollTop() >= $(document).height() - 100) {
    alert('do stuff');  
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:59:30.810

在你回复我的评论后，你说你得到了

`In the console tab I'm getting Uncaught ReferenceError: $ is not defined`

那么我猜，您没有在页面的标题中包含 jQuery（这需要在`<head>`每个页面的标题中）

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

这将告诉您 JQuery 是否已成功加载到您的页面上

```
if (typeof jQuery != 'undefined') {
    alert("jQuery library is loaded!");
}else{
    alert("jQuery library is not found!");
} 
```

*原评论：*

尝试放入`console.log($(window).height()+"<-current sctoll | target->"+($(document).height() - 100))`该循环，在chrome中打开它并右键单击->元素检查器，打开控制台选项卡，它将告诉您每个循环的值是什么，应该可以帮助您诊断问题。如果您没有得到任何痕迹，则事件不会触发

# spring-mvc - 验证失败后清除默认的弹簧表单字段值

> ID：11195701
> 
> 赞同：2
> 
> 时间：2012-06-25T19:07:08.727
> 
> 标签：spring-mvc

我是springMVC的新手，遇到了这个我不明白的问题。我有一个带有表单的 JSP，其中一些字段在我的 get 方法中预填充了一些从数据库中获取的值。当我通过 POST 方法提交表单并且未填写必填字段时，我调用 GET 方法再次显示表单，并在页面顶部显示错误消息。一切正常，我需要预填充的字段被正确填充。

我们在测试中遇到的问题是，当我们删除预填充的字段并再次提交时，我的 POST 方法调用我的 GET 方法重新显示带有错误消息的页面，并且错误消息在屏幕上显示正常，但我的字段假设是即使我每次都在调用数据库并使用我的 GET 方法中的 model.put() 方法填充我的表单，预填充的某些值也不会再次重新填充。

如果出现错误，似乎 spring 不会填充 JSP 上的任何字段。那正确吗？

这是我的控制器的简化版本，但它会解释我想要做什么：

```
@RequestMapping(value = myPageURL, method = GET)
public String displayPage(@ModelAttribute("someForm") SomeForm someForm,
                          BindingResult bindingResult,
                          ModelMap model) {

    //call the database and get some values
    someform.setSomefield1("someValue1");
    someform.setSomefield2("someValue2");
    model.put("someform", someForm)

        return VIEW;
}

@RequestMapping(value = myPageURL, method = POST)
public String submitform(@ModelAttribute("someForm") SomeForm someForm,
                                     BindingResult bindingResult,
                                     ModelMap model) {
validate(someForm, bindingResult);
    if (!bindingResult.hasErrors()) {

        //Display some page
    }

    return displayPage(someForm, bindingResult, model);

} 
```

这是 JSP 的一部分：

```
<form:form action=myPageURL method="POST" modelAttribute="someForm">
<form:hidden path="cid"/>
  <td>
    <form:input path="someField1" size="10" maxlength="20" cssErrorClass="fieldError      
       error-text-first-name-label"/>
  </td>
  <td>
    <form:input path="someField2" size="10" maxlength="20" cssErrorClass="fieldError 
     error-text-last-name-label"/>
 </td>
 <td>
   <form:input path="someField3" size="10" maxlength="20" cssErrorClass="fieldError 
    error-text-last-name-label"/>
 </td>

</form:form> 
```

谢谢

# extjs - ExtJS 中的自定义主题指向错误的图像文件夹

> ID：11195705
> 
> 赞同：0
> 
> 时间：2012-06-25T19:07:24.653
> 
> 标签：extjs, compass-sass, theming

我使用 Sencha ExtJS 和`compass compile`and`sencha splice`命令创建了一个自定义主题。

我的文件夹结构如下：

```
/ext-4.1.0 -- This is where the stock SDK resides
/resources -- copied from the SDK template, as per the instructions
/resources/sass -- This is where my SASS and confif.rb file reside
/resources/css -- This is where compass compiles my my-ext-theme.css
/resources/images/foo/bar.gif -- This is where sencha splice creates my GIFs. 
```

问题是，新编译`/resources/css/my-ext-theme.css`的指的是所有具有相对路径的图像，如`../../ext-4.1.0/resources/themes/images/default/foo/bar.gif`.

为什么我的自定义主题编译为引用*库存*图像文件夹而不是我的*自定义*图像？

以下是我`config.rb`文件中的关键参数：

```
$ext_path = "../../ext-4.1.0"
sass_path = File.dirname(__FILE__)
css_path = File.join(sass_path, "..", "css")
load File.join(File.dirname(__FILE__), $ext_path, 'resources', 'themes') 
```

如果可能的话，我不想`ext-4.1.0`用自定义主题文件污染我的文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:33:25.987

显然，此处文档中提到的“错误”适用于 4.1.0 版本，而不仅仅是 4.0.7。`utils.rb`按照描述更改文件修复了相对路径问题：

[http://www.sencha.com/learn/theming/](http://www.sencha.com/learn/theming/)

# grails - Grails webflow 动态步骤名称

> ID：11195707
> 
> 赞同：1
> 
> 时间：2012-06-25T19:07:35.350
> 
> 标签：grails, spring-webflow

我开始使用 Grails web flow 来实现一个向导。

```
checkStep {

        action {
            User user = springSecurityService.currentUser
            if (springSecurityService.loggedIn){
                def next = wizardService.getNextFlowStep(user)
                switch (next) {
                       case step1: 
                              step1()
                              break
    ...
                 }
         }
         on("step1").to "wizard_step1"
  } // checkStep
 wizard_step1() {
  ...
 } 
```

我想以更优雅的方式编写第一步，以便根据“wizardService”确定下一步。我还希望这些步骤将在运行时确定，以便实际的步骤名称和顺序可以驻留在数据库中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:57:56.207

您想将 groovy 的[动态方法调用](http://groovy.codehaus.org/Dynamic+Groovy)用于类似的事情。我不确定这是否真的会在 webflow 内部工作，但它应该看起来像这样......

```
 def next = wizardService.getNextFlowStep(user); // returns 'step1';
        "${next}"(); // you may have to use 'this."${next}"();' 
```

# php - 使用php上传文件

> ID：11195708
> 
> 赞同：-2
> 
> 时间：2012-06-25T19:07:36.100
> 
> 标签：php, mysql

我正在使用php开发注册表单，我需要上传文件而不是上传

```
$firstname=$_REQUEST['firstname'];
$lastname=$_REQUEST['lastname'];
$username=$_REQUEST['username'];
$password=$_REQUEST['password'];
$email=$_REQUEST['email'];
$Image=basename($_FILES['file']['name']);
$Image=str_replace(' ','|',$Image);

if($firstname && $lastname && $username && $email)
{
  require 'dbconnect.php';
  $query="select * from members where email='$email'";
  $result=mysql_query($query);
  $exists=mysql_num_rows($result);
  if($exists>0)
  {
    $message=array("message"=>"email already existed");
    echo json_encode($message);
  }
  else
  {
    if($Image)
    { 
      $Image=date("YmdHis").".jpg";    
      $target_path="userimages/".$Image;
      move_uploaded_file($_FILES["file"]["tmp_name"],$target_path);
      $query="INSERT INTO `members` 
        (`username`, `firstname`, `lastname`, `email`, `password`, `image`)  VALUES 
        ('$username', '$firstname', '$lastname', '$email', '$password',  '$Image')";
    }
    else
    {
      $query="INSERT INTO `members` (`username`, `firstname`, `lastname`, `email`, `password`)  VALUES 
       ('$username', '$firstname', '$lastname', '$email', '$password')";
    }
    $result=mysql_query($query);
  }
} 
```

html代码是

```
<html>
<form action="register.php" method="post" enctype="multipart/form-data">
<div>firstname<input type="text" name="firstname"></div>
<div>lastname<input type="text" name="lastname"></div>
<div>username<input type="text" name="username"></div>
<div>password<input type="text" name="password"></div>
<div>email<input type="text" name="email"></div>
<div>image<input type="file" name="file"></div>
<div><input type="submit" name="submit"></div>
</form>
</html> 
```

在这个我上传图片但它没有上传到服务器，也没有上传到数据库，在这种情况下被执行

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:15:51.547

确保您的`<form>`标签具有该`enctype="multipart/form-data"`属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:14:59.557

检查您尝试写入的文件夹的权限 - 如果图像未上传且`move_uploaded_file`失败，则该行根本不会插入数据库。

为了比较，以下是我用来将文件上传到服务器的应用程序的一些代码：

```
if ((($_FILES["avatar"]["type"] == "image/gif")
    || ($_FILES["avatar"]["type"] == "image/jpeg")
    || ($_FILES["avatar"]["type"] == "image/pjpeg")
    || ($_FILES["avatar"]["type"] == "image/png"))
    && ($_FILES["avatar"]["size"] < 200000))
{
    if ($_FILES["avatar"]["error"] > 0)
    {
        $error =  "Return Code: " . $_FILES["avatar"]["error"] . "<br />";
    }
    else
    {
        $fname = time() . '-' . $formData['username'] .$_FILES["avatar"]["name"];
        $fname = str_replace(" ", "_", $fname);
        if (file_exists("/myserverdir/images/avatars/" . $fname))
        {
            $fname = time() . '-' . $formData['username'] .$_FILES["avatar"]["name"];
            $fname = str_replace(" ", "_", $fname);
        }
        move_uploaded_file($_FILES["avatar"]["tmp_name"], "/myserverdir/images/avatars/" . $fname);
    }
}
else if (!file_exists($_FILES['avatar']['tmp_name']) || !is_uploaded_file($_FILES['avatar']['tmp_name']))
{
    $fname = 'default_avatar.jpg';
}
else
{
    $error = "Invalid file";
} 
```

我的表格看起来像：

```
<form method="post" action="myaction.php" enctype="multipart/form-data">
    <input type="file" name="avatar" />
    <input type="text" name="username" />
</form> 
```

# asp.net - 绑定datalist中的数据

> ID：11195711
> 
> 赞同：0
> 
> 时间：2012-06-25T19:07:52.250
> 
> 标签：asp.net, ajax, web-services, c#-4.0

我想在数据列表中绑定选中的复选框行..使用此代码但不绑定所有记录..

```
System.Web.UI.WebControls.CheckBox chkb = new System.Web.UI.WebControls.CheckBox();
string chkBoxIndex = string.Empty;

foreach (C1.Web.Wijmo.Controls.C1GridView.C1GridViewRow row in C1GridView1_listview.Rows)
{
    chkBoxIndex = (string)C1GridView1_listview.DataKeys[row.RowIndex].Value.ToString();
    chkb = (System.Web.UI.WebControls.CheckBox)row.FindControl("chkBxSelect");

    if (chkb.Checked == true)
    {

        cmd = new SqlCommand("select sample_code,convert(varchar(10),purchase_date,101) as purchase_date,sample_image_id,sample,image,style,descript from sample_shopping,sample_image where sample_shopping.sample_code=sample_image.sample and type='IMG' and sample_code='" + chkBoxIndex + "'", con);
        con.Open();
        SqlDataReader dr = cmd.ExecuteReader();

        if (dr.HasRows)
        {
            dr.Close();
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            da.Fill(dt);

            dl_search.DataSource = dt;
            dl_search.DataBind();
            con.Close();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:55:22.913

仅在 foreach 循环中绑定数据列表。这就是为什么它每次在数据列表中显示一条记录。使数据列表绑定出 foreach 循环，如

```
System.Web.UI.WebControls.CheckBox chkb = new System.Web.UI.WebControls.CheckBox();
string chkBoxIndex = string.Empty;

    foreach (C1.Web.Wijmo.Controls.C1GridView.C1GridViewRow row in C1GridView1_listview.Rows)
    {
        chkBoxIndex = (string)C1GridView1_listview.DataKeys[row.RowIndex].Value.ToString();
        chkb = (System.Web.UI.WebControls.CheckBox)row.FindControl("chkBxSelect");

        if (chkb.Checked == true)
        {
          //update the table with update query like
           //update <table-name> set check='true' where sno=chkBoxIndex or insert the select records into seperate table.
           ...
        }
    } 
```

现在使用如下查询将数据绑定到数据列表

```
 select * from <tablename> or where check=true 
```

这样只有选定的行将显示在 datalist 中。希望这会有所帮助。

# php - 如何将下载计数器附加到我的 HTML 下载按钮？

> ID：11195712
> 
> 赞同：6
> 
> 时间：2012-06-25T19:08:02.530
> 
> 标签：php, html, asp-classic

我是一名新手设计师，可以只使用 HTML 来设计我自己的网站，我已经上传了我的电子杂志文件。这是我网站上计划的下载页面：[http ://www.aamaodisha.org/secdownload.html](http://www.aamaodisha.org/secdownload.html)

如您所见，在此下载页面上，我放置了我的电子杂志的 6 个版本的图像，并为每个版本连接了下载按钮，因此每当用户单击下载按钮时，该特定文件（.RAR 文件) 将开始下载。就像我说的，我用纯 HTML 和 CSS 设计了这些按钮。

我想要的是附加到特定下载按钮的每个杂志版本的下载计数器——这意味着就像你可以在我的 HTML 页面上看到的那样，每个版本下面要写的下载次数。怎么会有这样的东西？我可以用 html 来安排吗？

6 个下载按钮的 HTML 代码：

```
<div class="button button1">
      <a href="#my link">Download</a>
      <p class="top">Click to begin</p>
      <p class="bottom">7.54 MB .RAR</p>
</div>
<div class="button button2">
      <a href="#my link">Download</a>
      <p class="top">Click to begin</p>
      <p class="bottom">7.8 MB .RAR</p>
</div>
<div class="button button3">
      <a href="#my link">Download</a>
      <p class="top">Click to begin</p>
      <p class="bottom">7.05 MB .RAR</p>
</div>
<div class="button button4">
      <a href="#my link">Download</a>
      <p class="top">Click to begin</p>
      <p class="bottom">3.8 MB .RAR</p>
</div>
<div class="button button5">
      <a href="#my link">Download</a>
      <p class="top">Click to begin</p>
      <p class="bottom">7.5 MB .RAR</p>
</div>
<div class="button button6">
      <a href="#my link">Download</a>
      <p class="top">Click to begin</p>
      <p class="bottom">8 MB .RAR</p>
</div> 
```

这是按钮的 CSS：

```
.button {
  width: 115px;
}

.button1 {
    position:absolute;
    left:430px;
    top:410px;

}    
.button2 {
    position:absolute;
    left:632px;
    top:410px;

}  
.button3 {
    position:absolute;
    left:833px;
    top:410px;

}    
.button4 {
    position:absolute;
    left:430px;
    top:636px;

}    
.button5 {
    position:absolute;
    left:632px;
    top:636px;

}   
.button6 {
    position:absolute;
    left:833px;
    top:636px;

}   
.button a {
  display: block;
  height: 28px;
  width: 115px;

  /*TYPE*/
  color: white;
  font: bold 11px/28px Helvetica, Verdana, sans-serif;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase; 

  /*GRADIENT*/  
  background: #00b7ea; /* Old browsers */
  background: -moz-linear-gradient(top, #00b7ea 0%, #009ec3 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#00b7ea), color-stop(100%,#009ec3)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* IE10+ */
  background: linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00b7ea', endColorstr='#009ec3',GradientType=0 ); /* IE6-9 */
}

.button a, p {
    -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;

  -webkit-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
     -moz-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
          box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
}

.button p {
  background: #222;
  display: block;
  height: 25px;
  width: 105px;
  margin: -27px 0 0 5px;

  /*TYPE*/
  text-align: center;
  font: bold 10px/28px Helvetica, Verdana, sans-serif;
  color: #ffffff;

  /*POSITION*/
  position: absolute;
  z-index: -1;

  /*TRANSITION*/  
  -webkit-transition: margin 0.4s ease;
     -moz-transition: margin 0.4s ease;
       -o-transition: margin 0.4s ease;
      -ms-transition: margin 0.4s ease;
          transition: margin 0.4s ease;
}

/*HOVER*/
.button:hover .bottom {
  margin: -4px 0 0 5px;
}

.button:hover .top {
  margin: -50px 0 0 5px;
  line-height: 22px;
}

/*ACTIVE*/
.button a:active {
background: #00b7ea; /* Old browsers */
background: -moz-linear-gradient(top,  #00b7ea 36%, #009ec3 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(36%,#00b7ea), color-stop(100%,#009ec3)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* IE10+ */
background: linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00b7ea', endColorstr='#009ec3',GradientType=0 ); /* IE6-9 */

}

.button:active .bottom {
  margin: -14px 0 0 5px;
}

.button:active .top {
  margin: -30px 0 0 5px;
} 
```

我还有一个疑问：我在谷歌上搜索过下载计数器，在某处我读到过，而不是直接在 href 中给出我的杂志文件的真实路径，应该通过另一个 php 文件给出一个替代路径，即我目前有这个带有下载的下载按钮的 HTML 代码

```
<div class="button button1">
      <a href="#my link">Download</a>
      <p class="top">Click to begin</p>
      <p class="bottom">7.54 MB .RAR</p>
</div> 
```

我应该有类似的东西`<a href="/download.php file=my link">Download</a>`吗？

请帮我实现这些下载按钮的计数器。我将非常感激。谢谢。问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T19:39:17.537

我会在下载链接上使用 jQuery 事件侦听器，并通过 PHP 在服务器端完成这一切。它可能不是万无一失的，但它不会对用户产生太大影响。

如果您想做这样的事情，那么您首先需要以可通过 jQuery 访问的方式对按钮进行分组；还有其他方法可以在 jQuery 中选择多个元素，但最简单的方法是将它们全部设为特定类的成员。

然后，您可以使用 .each() 函数遍历该类。所以对于页面的初始化；即让所有页面内容正常工作；您需要遍历每个按钮并向 PHP 脚本发出 post 请求；需要发送到 PHP 脚本的只是下载的 id。这是在下面代码的第 1 部分中完成的。

第 2 部分是设置下载发生时的事件侦听器。再一次，只需在整个类上放置一个事件监听器，我们就可以检测到对它们中的任何一个的点击；然后通过访问它的 id 来识别它来自哪个按钮。（注意：为简单起见；使标记中的 id 与数据库中的 id 相同）

然后向 php 脚本发出另一个 post 请求；但提供了一个附加参数 - “下载”。实际上，与下载相对应的值实际上并不重要。因为这种情况很简单，用户要么下载要么不下载。因此，在代码的 PHP 部分（下文稍后）中，我们甚至不检查它的值；*我们只是检查它是否存在*。

```
$(document).ready(function(){
  /* [[PART 1]]: loop through every element in the .button class*/
  $(".button").each(function (e) {

    /* get it's ID (which is equal to the download id stored in the db */
    var id = e.target.id;

    /* Post the download id to ranking.php; then echo the returned value to an 
    ** element with the id of 'count<num>'; where num is the download id. */
    $.post( 'ranking.php', { 'id' : id }, function(data){
        $('#count' + id).html(data);
    });
  });

  /* Part 2: When button is clicked, post the download data to "ranking.php" */
  $('.button').click(function(event){
      var id = e.target.id; //get the id of the button

      $.post( 'ranking.php', { 'id' : event.target.id, 'download' : 'YES' },  //set 'download'
          function(){ $('#count' + id).html(data) });   //echo new value to html
  });
}); 
```

我建议使用 jQuery，因为它提供了足够的语法糖来让事情变得非常简单。此外，通过使用 jQuery - 如果您愿意，您将打开通往未来许多可能性的大门。

服务器端是 PHP 接管的地方。实际需要做的就是检查是否设置了“下载”，并回显下载次数。（如果设置了“下载”参数，显然会随着数据库增加数字）

这可以通过类似...

```
<?php
    mysql_connect(localhost,$user,$password);
@mysql_select_db($database) or die( "Unable to select database");   

    if(! isset($_POST['id']) {
         //die error!
    }

    /* if $_POST['download'] isn't set, then just get the current download number
       and echo it back to the browser */
    if(! isset($_POST['download'] ){
        $query = sprintf('SELECT * FROM dl_table WHERE id = %d', $_POST['id']);
        mysql_query($query);
    print mysql_result($query, 0, 'download');
        exit; // no need to carry on, our job is done..
    }

    /* if the script reaches here then $_POST['download'] is set, so you need to log a 
    ** new download */
    $query = //generate query to increment the database field
?> 
```

对于简单的情况，上面的示例可以工作（显然已更正了数据库函数），但显然 - 这可能不是有效的代码，因为我在晚餐时确实输入了它！当然，这只是为了让您了解可能的解决方案。（如果你决定做类似的事情，我已经证明了**不好的做法**- mysql 操作最好现在使用 mysqli* 函数或 PDO 完成）

查找 PHP My SQL 文档；希望这为您指明了正确的方向。

现在，或者，据我所知，您对 jQuery 并不太热衷（一旦您开始使用它就很棒！）您将与 jQuery 解决方案一起使用的 PHP 脚本可以单独使用。只需将 $_POST[] 更改为 $_GET[] ，并且正如其他答案所说，使用诸如“ranking.php?id=”之类的 URL；但是，您需要查看在数据库查询完成后获取 PHP 脚本以传递文件。

它还留下了关于显示下载号的问题；由于没有 AJAX，您将不得不在 HTML 标记内联中嵌入一些 PHP。我希望我已经对其进行了编辑以使其更有意义，并为您提供另一个选项的概述！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:12:32.233

仅使用 HTML 和 CSS，将无法跟踪下载。您需要依赖（理想情况下）PHP 和某种类型的数据库的组合来跟踪它。一种选择是通过 PHP 文件传递​​要下载的文件，但如果您想避免这种情况，也可以使链接触发 ajax 请求，每次单击链接时也会将计数器增加一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:31:06.197

我建议查看以下链接：

[http://www.kavoir.com/2010/05/simplest-php-hit-counter-or-download-counter-count-the-number-of-times-of-access-visits-or-downloads.html](http://www.kavoir.com/2010/05/simplest-php-hit-counter-or-download-counter-count-the-number-of-times-of-access-visits-or-downloads.html)

正如@johnmadrak 所指出的，如果没有某种强调某种数据库的服务器端脚本语言，您将无法显示页面被查看的次数，或者文件被下载的次数。在某些情况下，您甚至可以通过文本文档放置文件下载的次数，然后通过 PHP 加载内容。

# ios - 我可以在将我的应用程序提交到应用商店之前测试生产证书吗

> ID：11195714
> 
> 赞同：1
> 
> 时间：2012-06-25T19:08:07.407
> 
> 标签：ios

我使用开发证书测试了远程推送通知，如下面的教程中所述。

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

现在，我需要将我的应用商店提交到应用商店，但我不确定何时需要将证书更改为生产证书，

*   如果我现在更改证书，是否可以在应用程序发布到应用商店之前对其进行测试。

*   或者，也许我可以等到它在 appstore 中发布，然后在服务器中更改证书，但在这种情况下，Apple 很可能会拒绝该应用程序，因为它在测试时不会完全正常运行。

请给点建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:46:55.080

通过扰乱临时应用程序，使用生产证书。

根据苹果文档：

> “通过 ad-hoc 分发的应用程序使用苹果生产推送网关 (gateway.push.apple.com)，而不是苹果开发推送网关”

# ruby - 尝试遍历哈希，提取唯一键并添加值

> ID：11195715
> 
> 赞同：0
> 
> 时间：2012-06-25T19:08:11.207
> 
> 标签：ruby, loops, hash, iterator, aggregate-functions

我有一个`Mysql2::Result`里面有一堆行。结果被格式化为哈希，如下所示：

```
{"thing_name" => "email",   "count(*)" => 1000}
{"thing_name" => "email",   "count(*)" => 800}
{"thing_name" => "ads",     "count(*)" => 500}
{"thing_name" => "display", "count(*)" => 700} 
```

我的目标是遍历所有这些并创建一个新的散列，该散列具有每个键之一，并且它们的计数总和作为与该键关联的值。

我可以成功地遍历并将“thing_name”放入一个数组中并`.uniq`在它们上运行以将重复项折叠到一个条目中，但我无法弄清楚如何关联这些值并对它们进行适当的数学运算。或者如何将其作为哈希来执行。

这是我到目前为止的代码：

```
thing_type = results.collect {|row| row["thing_name"]}
thing_type = thing_type.uniq 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:11:25.333

尝试这样的事情：

```
 # Provide a default value of zero for unknown keys
 counts = Hash.new { |hash,key| hash[key] = 0 }

 result.each do |row|
     counts[ row["thing_name"] ] += row["count(*)"]
 end 
```

当您将一个块传递给时，每当您第一次尝试获取未知密钥时（例如，通过使用不存在的密钥）`Hash.new`，它将使用该块。`counts[...] += ...`Ruby 将调用您的块并将现有哈希对象和您尝试设置的键作为参数传入。

# joomla - Joomla 模块定位

> ID：11195716
> 
> 赞同：1
> 
> 时间：2012-06-25T19:08:14.797
> 
> 标签：joomla, module, components, position, joomla2.5

我有一个为 Joomla 2.5 网站构建的自定义组件。它工作正常，除了显示在网站所有页面上的模块（徽标、全局导航等）被推到组件下方而不是顶部。

我一直在查看其他组件以查看问题所在，但无济于事。这与“视图”文件夹有关吗？也许是controller.php？

我还考虑将我的组件包装在一个模块中，然后将其位置设置为尽可能低的解决方法。不幸的是，我能为这个实用程序找到的所有扩展都比我花的钱多……

请帮忙！谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:10:07.530

假设您在 Joomla 中遵循标准 MVC 框架，那么几乎 100% 确定您的问题将在于您正在使用的 CSS 样式/类以及它们如何与模板样式表一起使用。如果您不使用 Firebug，请获取并安装它以查看导致问题的 CSS。

# ios - iOS 崩溃未定义

> ID：11195719
> 
> 赞同：0
> 
> 时间：2012-06-25T19:08:28.290
> 
> 标签：ios, crash

没有看到与我的应用程序相关的任何问题。这只发生在返回应用程序时，有时，从不在模拟器中。

有任何想法吗？：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xd03beb08
Crashed Thread:  7

Thread 7 name:  Dispatch queue: com.apple.root.default-priority
Thread 7 Crashed:
0   libobjc.A.dylib                 0x36f22f78 objc_msgSend + 16
1   CoreFoundation                  0x34ea2e90 CFRetain + 76
2   CFNetwork                       0x379a6f30 HostBase::lock() + 8
3   CFNetwork                       0x379a6676 DispatchHost::performInvocation(void const*) + 6
4   CFNetwork                       0x379a61c8 __setupTCPConnection_block_invoke_2 + 284
5   libsystem_network.dylib         0x32c2cac0 __tcp_connection_notify_complete_block_invoke_1 + 12
6   libdispatch.dylib               0x37886c52 _dispatch_call_block_and_release + 6
7   libdispatch.dylib               0x378927b4 _dispatch_worker_thread2 + 256
8   libsystem_c.dylib               0x35b45df4 _pthread_wqthread + 288
9   libsystem_c.dylib               0x35b45cc8 start_wqthread + 0 
```

# jsf-2 - h:selectBooleanCheckbox 不触发 a4j:ajax 侦听器 Rich:datatable 第一次点击

> ID：11195720
> 
> 赞同：2
> 
> 时间：2012-06-25T19:08:29.327
> 
> 标签：jsf-2, richfaces

第一次检查`h:selectBooleanCheckBox`时，不会触发侦听器。再次检查它，确实会触发侦听器。我也尝试为具有相同结果的`valueChangeListener="selectRoleCheckboxChangeListener"`属性。`h:selectBooleanCheckBox`它将在第二次和随后的点击中起作用。我想在第一次点击时点燃这个火。想法？谢谢

```
<rich:dataTable id="roleTable" 
    value="#{roleBean.displayedRoles}" 
    var="roleItem"  
>
    <rich:column 
        id="selectRoleCheckboxColumn" 
    >
        <f:facet name="header">Select Role</f:facet>
        <h:selectBooleanCheckbox
            id="selectRoleCheckbox" 
            value="#{roleItem.selectRole}" 
            binding="#{roleBean.selectRoleCheckbox}"
        >
            <a4j:ajax 
                event="click" 
                listener="#{authorizationBean.selectRoleCheckboxListener}"
            /> 
        </h:selectBooleanCheckbox>
    </rich:column>
</rich:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T11:33:06.353

我有同样的问题。我找到了上述问题的解决方案。

问题将是您的组件没有 id 或对象或设置的值没有得到反映。另一个问题是内部形式。

解决方案是...为所有组件设置 id，如果值没有反映在 ajax 请求上，则呈现设置了值的组件。表格内没有表格。

希望它应该工作......

这是一个非常古老的帖子。仍然可能对某人有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T05:59:53.637

试试这个方法

```
<h:selectBooleanCheckbox id="selectRoleCheckbox" value="#{roleItem.selectRole}"         
  <a4j:support event="onchange" action="#{authorizationBean.selectRoleCheckboxListener}"/>
</h:selectBooleanCheckbox> 
```

希望它有效..

# cookies - 拒绝删除的 cookie

> ID：11195721
> 
> 赞同：2
> 
> 时间：2012-06-25T19:08:36.260
> 
> 标签：cookies, asp-classic

我在删除经典 ASP 中的 cookie 时遇到问题。设置和检索 cookie 在多个域上运行良好，没有问题。不删除 cookie。
拒绝删除的 cookie 将超时并在原始超时时自行删除，但这不是一个选项。
我查看了文档、堆栈溢出、堆栈交换（Web 应用程序）（一些问题相似，并给了我一些答案，但不一样）、cookie 中心和 MSDN。
目前无法将页面更新到 ASP.NET。cookie 值和名称以十六进制表示，并带有前导“O”，以消除加密数据和脚本语言（ASP、VBScript、Jsvascript、SQL）可能出现的字符问题。
请注意，一些不同的尝试已被注释掉。

```
Sub Set4HrCookie(ByVal CookieName, ByVal CookieValue)
    Response.Cookies(CookieName).Expires = DateAdd("n", 240, Now())
    Response.Cookies(CookieName).Domain = ".mydomain.net"
    Response.Cookies(CookieName).Path = "/"
    Response.Cookies(CookieName) = CookieValue
    Response.Cookies(CookieName).Secure = FALSE
End Sub

Sub Set1DayCookie(ByVal CookieName, ByVal CookieValue)
    Response.Cookies(CookieName).Expires = Now() + 1
    Response.Cookies(CookieName).Domain = ".mydomain.net"
    Response.Cookies(CookieName).Path = "/"
    Response.Cookies(CookieName) = CookieValue
    Response.Cookies(CookieName).Secure = FALSE
End Sub

Sub KillThatCookie(ByVal CookieName)
    Response.Cookies(CookieName).Domain = ".mydomain.net"
    Response.Cookies(CookieName).Path = "/"
    Response.Cookies(CookieName).Expires = Now() ' Now() - 1 ' #01/01/1999#
    ' Response.Cookies(CookieName).Secure = FALSE
    Response.Cookies(CookieName) = ""
End Sub 
```

拒绝删除的 cookie 示例：

```
O9DCCF20B15CA0F382184A96BAB
OFA86B660438C4863797E4485DE
mydomain.net/ 
```

以下是一些为我提供信息的 URL。
当您清除它们时，您必须分配 .domainname.com 域，否则它不会清除它们。
[http://forums.asp.net/t/1399232.aspx/1](http://forums.asp.net/t/1399232.aspx/1)
经典 ASP 中具有 DOMAIN 值的 Cookie
[http://blurbly.net/5_5.htm](http://blurbly.net/5_5.htm)

**编辑：**进一步的测试表明，因为在 cookie 上使用了“路径”，所以在“杀死”上需要“路径”。
**编辑：**这是 IIS-6 - 它似乎类似于 VB6 INI 文件的已知错误。当程序访问 INI 文件的速度过快时，系统无法跟上并发生 INI 文件损坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:48:40.423

终于我找到了答案。我们的网站同时使用 HTTPOnly cookie 和标准 cookie。问题是 IIS 无法处理。要么所有 cookie 都是 HTTPOnly，要么没有。其中一个是双向设置的，之后所有非 HTTPOnly cookie 都没有被删除。KillThatCookie 保持不变。一天的设置cookie变成：

```
Sub Set1DayCookie(ByVal CookieName, ByVal CookieValue)
Dim strGMTDateRFC22
    strGMTDateRFC22 = GetServerUTC("d", 1) ' 1 Day Cart Session Expiration
    Response.AddHeader "Set-Cookie", CookieName & "=" & CookieValue & "; expires=" & strGMTDateRFC22 & "; domain=.mydomain.net; path=/; HttpOnly"
End Sub 
```

此外，带有下划线“-”、括号“()”、和号“&”的 Cookie 是有问题的。它们不一定会删除。我确定还有更多字符，但文档说这些是有效的。他们可能是有效的，但它们会导致问题。
**编辑：**似乎还有更多。多次超时也是一个问题。
**编辑：**部分问题是我们正在加密密钥，这使其区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:19:04.543

要删除 cookie，请执行以下操作：-

```
Response.Cookies(CookieName) = CookieValue 
Response.Cookies(CookieName).Expires = Date() - 1 
```

# android - 安卓模拟器信号强度

> ID：11195722
> 
> 赞同：6
> 
> 时间：2012-06-25T19:08:43.710
> 
> 标签：android, android-emulator

有什么方法可以模拟android模拟器上信号强度的变化。我的应用中有一个 phonestatelistener 记录信号强度。我还在模拟器上使用 telnet 和 gsm signal 5 5 之类的命令，但我的 rssi 信号强度一直是 99，误码率是 -1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:22:15.927

我认为在这种情况下用接口模拟是个好主意

```
interface SignalInformation{
    float signalStrength();
    //etc...
} 
```

创建一些用于模拟的虚拟班级，然后将其更改为真正的工人班级。

```
class MockSignal implements SignalInformation{

    public float signalStrength(){
        return 3.5; //or whatever behaviour you want (i.e. random number)
    }
} 
```

好吧，我希望你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:15:31.960

我认为在模拟器中是不可能的。

[资源](https://groups.google.com/forum/?fromgroups#!topic/android-developers/wqM3aV0B2SM)

# php - CakePHP 1.3：$_SERVER['DOCUMENT_ROOT'] 问题

> ID：11195724
> 
> 赞同：0
> 
> 时间：2012-06-25T19:08:59.813
> 
> 标签：php, cakephp

在我的 CakePHP 应用程序中使用以下代码时遇到问题。

在我的开发服务器（@home）中：

*   当我使用`$_SERVER['DOCUMENT_ROOT']`时，我得到：`/home/xxxxxxx/public_html/app/webroot/`

在我的生产服务器（a2hosting）上，它与我的应用程序完全相同：

*   相同的代码返回`/home/xxxxxx/public_html/`

为什么会发生这种情况，我该如何快速修复它。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:36:18.580

假设您在两台服务器上检查相同的文件。在您的家庭开发服务器上，您的 apache 配置 (httpd.conf) 需要进行编辑。

```
DocumentRoot /home/xxxxxxx/public_html/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:39:31.053

改为使用全局`WWW_ROOT`。它由 CakePHP 设置。

# python - Django：没有这样的表：Apache下的django_session，但与manage.py runserver一起使用

> ID：11195725
> 
> 赞同：0
> 
> 时间：2012-06-25T19:09:13.543
> 
> 标签：python, django, sqlite, django-admin

我基本上遇到了[本文中描述](https://stackoverflow.com/questions/3631556/django-no-such-table-django-session)的相同错误，但该解决方案对我不起作用，因为我认为我的根本原因不同。

我绝对定义了我的数据库路径：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '/var/www/myapp/database.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

尽管如此，我还是得到了没有这样的表：django_session。

当我运行时`manage.py runserver`，我没有收到错误。

我做了一些其他的事情只是为了尝试任何事情，但没有帮助：

*   manage.py 重置会话
*   我删除了数据库并让它用syncdb重新创建
*   我尝试了 chown apache:apache database.db 以及父目录 chown -R apache:apache myapp/
*   我试过 chmod 777 database.db

我的 apache 配置如下所示：

```
NameVirtualHost *:80

<VirtualHost *:80>
DocumentRoot /var/www/html/
</VirtualHost>

<VirtualHost *:80>
  ServerName myserver.mydomain.local
  ServerAlias myserver.mydomain.local

  DocumentRoot /var/www/myapp

  WSGIScriptAlias / /var/www/myapp/myapp/wsgi.py

  <Directory "/var/www/myapp/">
    Allow from all
  </Directory>
</VirtualHost> 
```

我写 /myapp 两次的原因是因为第一个只包含 DB 文件和 manage.py。该文件夹下包含应用程序，包括 wsgi.py

我还注意到，我必须在我的 wsgi.py 中添加两行以使其在 Apache 上运行，从 manage.py 运行应用程序时我不必添加：

```
import sys
sys.path.append(os.path.abspath(os.path.dirname(__file__) + "/../")) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T20:18:27.820

我有完全相同的错误.....我的是一个Windows环境。只需复制并将 database.db 文件放在 apache 文件夹下。你可以尝试做同样的事情，看看是否有帮助。

# mvvm - SL4：数据绑定到视图模型上的属性，当视图模型更改时是否通知绑定对象？

> ID：11195726
> 
> 赞同：0
> 
> 时间：2012-06-25T19:09:13.733
> 
> 标签：mvvm, silverlight-4.0

SL4，MVVM。我们的 MainView 有一个对应的 MainViewModel 作为它的 DataContext。
MainViewModel 有一个 ThingViewModel 用于属性 - CurrentThingViewModel 。

我们将 MainView 中的 CheckBox 绑定到 ThingViewModel 的属性：

```
<CheckBox IsChecked="{Binding CurrentThingViewModel.ReadOnly, Mode=TwoWay}" /> 
```

当将不同的 ThingViewModel 分配给 CurrentThingViewModel 时，CTVM 会引发 PropertyChanged 事件。CheckBox 是否会收到通知，因为它绑定到 CTVM 的属性，而不是实际引发 PropertyChanged 事件的属性？

感谢您的任何见解...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:47:38.523

是的，绑定将在提供的绑定的所有级别上侦听 PropertyChanged 事件，如果第一级绑定正在更新，则所有较低级别的绑定也会被触发。

```
<CheckBox IsChecked="{Binding X.Y.Z, Mode=TwoWay}" /> 
```

如果在 X、Y 或 Z 上触发 PropertyChanged 事件，绑定将检查 XYZ 的值

# javascript - 避免在 Play Framework 2.0 中重新提交表单

> ID：11195727
> 
> 赞同：3
> 
> 时间：2012-06-25T19:09:16.220
> 
> 标签：javascript, playframework, playframework-2.0

我有一个基本的 POST 表单正在提交。每次提交表单时，都会更新数据库。如果有人尝试刷新页面，您会收到“确认重新提交表单？”。有没有办法避免这种情况？我知道这可以通过 PHP 实现，但这不是一个选项

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T19:22:44.607

接受表单 POST 的操作应将数据提交到数据库，然后重定向到另一个操作。这样，当用户点击刷新时，他们只会读取数据，而不是写入数据。

这是一个例子：

```
 public Result terminate(Long depositKey) throws Exception {
    depositsService.cancelScheduledDeposit(getCurrentUser().memberKey(), depositKey);
    return redirect(routes.ControllerFactory.deposits.terminateConfirmation(depositKey));
  } 
```

# javascript - 在 JavaScript 中进行原型设计时首选哪种方法？

> ID：11195731
> 
> 赞同：2
> 
> 时间：2012-06-25T19:09:37.863
> 
> 标签：javascript, prototype

这是一个人为的例子：

我想将两个数字相除，我需要为此编写一个方法。我可以写这样的东西：

```
function divide(dividend,divisor) {
    return dividend/divisor;
};

//Assign the result of the divide function to an element on the page.
$(".firstanswer").html(divide(6,2)); 
```

我也可以这样写：

```
Number.prototype.dividedBy = function (divisor)​ {
    var dividend = this;
    return dividend/divisor;
};

var six = 6;
var two = 2;
$(".secondanswer").html(six.dividedBy(two)); 
```

两种方法都产生相同的答案，所以我想知道的是：
使用这两种方法的优点或缺点是什么。是否存在显着的性能（加载/运行时间）差异？就内存影响而言，一个比另一个更*可重用吗？*容易理解怎么办？最终，像这样简单的例子，这有关系吗？

我还[创建了一个 Fiddle](http://jsfiddle.net/KeCkQ/)，因为代码更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T19:11:42.697

第一种方法没有缺点（除了语法不同）

在第二种方法中，您冒着实现的风险，如果它成为具有相同函数名的对象或其他第三方库的一部分怎么`Number`办`Math`:)

虽然通常是为了避免它，但这样做：

```
Number.prototype.dividedBy = Number.prototype.dividedBy || function (divisor)​ {
    var dividend = this;
    return dividend/divisor;
}; 
```

这样，您说，如果已经存在该功能，请使用其他创建我自己的功能。

* * *

有关更多详细信息，请查看（[@Kangax](https://stackoverflow.com/users/130652/kangax)一如既往的另一篇精彩文章）

*   [扩展内置的原生对象。恶不恶？](http://perfectionkills.com/extending-built-in-native-objects-evil-or-not/)

# sql - 将特定时间戳中的数据插入临时表并截断主表的存储过程

> ID：11195742
> 
> 赞同：-2
> 
> 时间：2012-06-25T19:10:13.110
> 
> 标签：sql, sql-server, stored-procedures, sql-server-2008-r2

我有一组表（`_del`表）来跟踪所有已删除的数据。我想将带有今天和以后时间戳的记录从这些表中复制到临时表中。之后我想截断`_del`表格。有人可以帮我处理上述逻辑的存储过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:21:28.273

你用的是什么数据库？要从单个表复制到特定列的日期大于现在的另一个表，您可以使用以下命令：

SQL 服务器：

```
INSERT INTO MyTempTable1 (Column1, Column2, Colu...)
    SELECT Column1, Column2, Colu...
      FROM _delTable1
     WHERE MyDateColumn > GetDate();

TRUNCATE TABLE _delTable1; 
```

MySQL：

```
INSERT INTO MyTempTable1 (Column1, Column2, Colu...)
    SELECT Column1, Column2, Colu...
      FROM _delTable1
     WHERE MyDateColumn > CURRENT_TIMESTAMP();

TRUNCATE TABLE _delTable1; 
```

如果您想为每个以 _del 开头的表动态构建查询，那么您可以遍历这些表并构建查询并执行它们 - 但这取决于您使用的数据库甚至版本。

另一种选择（取决于您想要做什么）是删除比今天更早的数据（现在或今天开始）。

要开始今天，您可以这样做：

```
SELECT DATEADD(DAY, DATEDIFF(DAY, -1, GETDATE()), -1) 
```

如果您想使用它，只需将 GetDate() 或 CURRENT_TIMESTAMP() 替换为它（在括号中）。

# c# - Automapper 模型 > ViewModel 映射异常

> ID：11195744
> 
> 赞同：1
> 
> 时间：2012-06-25T19:10:17.720
> 
> 标签：c#, .net, asp.net-mvc, automapper, automapper-2

我有以下模型和视图模型（为简洁而编辑）：

```
public class Advert
{
    public virtual long Id { get; set; }
    public virtual string Title { get; set; }
    public virtual string Descrip { get; set; }
    public virtual IList<AdvertImage> AdvertImages { get; set; }
}

public class AdvertImage
{
    public virtual byte DisplayOrder { get; set; }
    public virtual string Filename { get; set; }
    public virtual string UrlDirectoryRoot { get; set; }
    public virtual long FilesizeBytes { get; set; }

    public virtual Advert Advert { get; set; }
}

public class AdvertImageViewModel
{
    public virtual string Filename { get; set; }
    public virtual byte DisplayOrder { get; set; }
}

public class ListAdvertViewModel
{
    public long Id { get; set; }
    public virtual string Title { get; set; }
    public virtual string Descrip { get; set; }
    public AdvertImageViewModel AdvertImage { get; set; }
} 
```

我有以下 AutoMapper 映射：

```
Mapper.CreateMap<AdvertImage, AdvertImageViewModel>();

Mapper.CreateMap<Advert, ListAdvertViewModel>()
                .ForMember(d => d.AdvertImage, o => o.MapFrom(s => (s.AdvertImages == null ? null : s.AdvertImages.First()))); 
```

然后我的控制器方法之一执行以下操作，以检索 Adverts 列表（其中每个 Advert 可能具有任意数量的 AdvertImages）：

```
var ads = _advertService.GetAdverts(); 
```

然后我尝试将这些广告映射到我的`ListAdvertViewModel`ViewModel 类中

```
var mappedAds = Mapper.Map<IList<Advert>, IList<ListAdvertViewModel>>(ads); 
```

如果返回的广告之一（在“广告”变量中）有一些要映射的图像，这就会失败。我得到的错误是：

```
[InvalidOperationException: Sequence contains no elements]
   System.Linq.Enumerable.First(IEnumerable`1 source) +498
   AutoMapper.DelegateBasedResolver`2.Resolve(ResolutionResult source) +153
   System.Linq.Enumerable.Aggregate(IEnumerable`1 source, TAccumulate seed, Func`3 func) +160
   AutoMapper.Mappers.PropertyMapMappingStrategy.MapPropertyValue(ResolutionContext context, IMappingEngineRunner mapper, Object mappedObject, PropertyMap propertyMap) +250

[AutoMapperMappingException: 

Mapping types:
Advert -> AdvertImageViewModel
MyProject.Models.Advert -> MyProject.ViewModels.AdvertImageViewModel

Destination path:
IList`1[1].AdvertImage 
```

我不明白为什么这个 AdvertImage 映射会导致问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:21:36.997

将 First 更改为 FirstOrDefault ，它应该可以工作。

```
Mapper.CreateMap<Advert, ListAdvertViewModel>()
            .ForMember(d => d.AdvertImage, o => o.MapFrom(s => (s.AdvertImages == null ? null : s.AdvertImages.FirstOrDefault()))); 
```

# c++ - 如何按顺序聚合循环？

> ID：11195749
> 
> 赞同：1
> 
> 时间：2012-06-25T19:10:30.060
> 
> 标签：c++, algorithm, graph-algorithm

我有一个成对的向量，表示节点之间的跃点，当有周期时我想折叠它（如在一个周期中的跃点之间的总时间中将其显示为一个）。因此，例如，路径 A --> B --> C --> D --> B --> C --> D --> E 遍历子路径 B--> C --> D 两次，所以在我的结构中，我会有类似的东西：

```
(A,B,1)(B,C,3)(C,D,2)(D,B,4)(B,C,5)(C,D,8)(D,E,6) 
```

理想情况下，我会简化为：

```
(A,B,1)(B,C,3+5)(C,D,2+8)(D,E,6) 
```

还存储从 D 到 B 的 4（环回边缘时间）以单独聚合，并能够以浓缩方式显示 B --> C --> D（所有的聚合边缘时间和聚合的环回时间D-->B 实例以及我们循环的次数）

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:24:14.937

我会选择**后缀数组**或**后缀树**。只需生成标记（在本例中为 (from, to) ）并将其放入后缀数组或后缀树中。然后你可以得到对。简单但不高效的方式：

产生令牌，产生这个令牌流的所有后缀。对它们进行排序。然后您在该排序列表中的所有常见子序列彼此靠近（令牌流长度 - 令牌流后缀长度 = 位置） 例如，您可以使用快速排序进行排序，或者您只是寻找后缀数组的实现。后缀数组可以在*O(n)*和*O(n)*空间中构建。并且可以在*O(n+k)*中找到**最大对/重复**（这就是你想要的） （其中 n = tokennumber，并且 k = 你列表中的循环）

 *也许[**这**](http://docs.seqan.de/seqan/dev/DEMO_Maximal+_Repeats.html)会有所帮助。然后你可以生成一个令牌流，如：ABCDBCDE

快速而肮脏的解决方案就[在这里](http://algs4.cs.princeton.edu/63suffix/SuffixArray.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:52:44.507

基本上，您通过路径，并将每个边缘（ (A, B), 1 ）存储在 a 中`map`，并将所有发现的节点存储在 a`set`

*   每当您遇到目标点为已发现节点的边时，您就知道它是环回边。

*   每当您遇到相同的优势时，将其价值加起来`map`*

# matlab - matlab翻转矩阵

> ID：11195750
> 
> 赞同：-1
> 
> 时间：2012-06-25T19:10:40.047
> 
> 标签：matlab

可以说我有一个矩阵。

```
A = [
   8     9     14     0     0     0     0     0     0

   8    10    11     0     0     0     0     0     0

   5     8     9    14     0     0     0     0     0

   7     8     9    14     0     0     0     0     0

   5     8    10    11     0     0     0     0     0
 ]; 
```

我如何翻转矩阵并在matlab中得到这样的结果？我不希望它按排序顺序。谢谢

```
A = [
 14     9    8     0     0     0     0     0     0

 11    10    8     0     0     0     0     0     0

 14    9     8     5     0     0     0     0     0

 14    9     8     7     0     0     0     0     0

 11    10    8     5     0     0     0     0     0
]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T21:07:39.700

无需调整大小，如果要翻转第 1 到 4 列，可以使用以下命令：

```
colList = 1:4;

matrix(:,colList) = fliplr(matrix(:,colList)); 
```

这适用于任意列的列表

**这个怎么运作**

首先选择您关心的列：

```
 ... matrix(:,colList) 
```

水平反射它们

```
 ... fliplr( ... ) 
```

将反射矩阵保存回原始矩阵的子部分：

```
matrix(:,colList) =  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:02:39.073

根据您的评论，我认为您想要以下内容：

1.  在每一行中找到最后一个非零元素，称之为 lastNZ
2.  反转行中元素 1:lastNZ 的顺序

这应该做的工作：

```
for i=1:size(A,1)
    lastNZ = find(A(i,:), 1, 'last');
    A(i,1:lastNZ) = A(i,lastNZ:-1:1);
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:49:37.153

好吧，既然您不希望行最终排序，slayton 的响应将通过一个小的更改来解决不同数量的零。就像是：

```
for i=1:size(A,1)  
    temp = A(i,A(i,:)~=0);  
    A(i,A(i,:)~=0) = fliplr(temp);  
end 
```

如果您想要一个单行解决方案（它可能不会比 for 循环快，并且更容易阅读），您可以使用

```
A = cell2mat(cellfun(@(x) [fliplr(x(x~=0)) zeros(1,size(x,2)-nnz(x))],num2cell(A,2),'UniformOutput',false)) 
```

我假设您的矩阵没有任何零作为重新排序的一部分（例如 [ 1 5 1 0 0 ; 6 0 3 1 0 ] 去 [ 1 5 1 0 0 ; 1 3 0 6 0 ]）。如果该假设不正确，那么我的代码需要更改。

# android - 发出 http 请求并存储响应的 Android 选项卡

> ID：11195751
> 
> 赞同：1
> 
> 时间：2012-06-25T19:10:40.160
> 
> 标签：android, android-layout, android-asynctask, android-fragments, android-tabhost

为了澄清这个问题的标题，我有一个与 WCF restful webservice 通信的 android 应用程序。在应用程序的某个部分，用户可以从 3 个选项卡中进行选择，每个选项卡显示从调用 Web 服务获得的数据。理想情况下，我想在第一次通话后存储或缓存此信息（而不是每次用户切换标签时都进行通话）

我的问题有点像 2 部分，因为我首先还没有决定实现选项卡的最佳方式（我应该使用片段吗？），但想根据所需的功能选择最佳设计。

我的问题是，实现选项卡式活动的最佳方式是什么，其中每个选项卡发出单独的 http 请求并存储响应（响应将显示在列表视图中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:30:04.293

1.  使用片段实现 ViewPager（这是一个示例：[http](http://tamsler.blogspot.com/2011/10/android-viewpager-and-fragments.html) ://tamsler.blogspot.com/2011/10/android-viewpager-and-fragments.html ）
2.  在您的 Fragments 中，使用一个调用 IgnitedHttp 方法的异步任务来从您的端点检索数据。（请参阅[如何使用 Ignition HTTP 类发出 Get 请求？](https://stackoverflow.com/questions/11001545/how-to-use-ignition-http-classes-to-make-get-request/11002467#11002467)）这将在 android 设备上创建响应缓存，从而使您不必一遍又一遍地获取相同的数据。（异步任务示例：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)）

# asp.net-mvc - MVC3 枚举选择列表，使用显示注释

> ID：11195752
> 
> 赞同：2
> 
> 时间：2012-06-25T19:10:45.410
> 
> 标签：asp.net-mvc, asp.net-mvc-3, attributes, enums, data-annotations

我有一个 Html Helper，可以将 Enum 转换为 SelectList，如下所示：

```
public static HtmlString EnumSelectListFor<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TProperty>> forExpression,
    object htmlAttributes,
    bool blankFirstLine) where TModel : class where TProperty : struct
{
    //MS, it its infinite wisdom, does not allow enums as a generic constraint, so we have to check here.
    if (!typeof(TProperty).IsEnum) throw new ArgumentException("This helper method requires the specified model property to be an enum type.");

    //initialize values
    var metaData = ModelMetadata.FromLambdaExpression(forExpression, htmlHelper.ViewData);
    var propertyName = metaData.PropertyName;
    var propertyValue = htmlHelper.ViewData.Eval(propertyName).ToStringOrEmpty();

    //build the select tag
    var returnText = string.Format("<select id=\"{0}\" name=\"{0}\"", HttpUtility.HtmlEncode(propertyName));
    if (htmlAttributes != null)
    {
        foreach (var kvp in htmlAttributes.GetType().GetProperties()
            .ToDictionary(p => p.Name, p => p.GetValue(htmlAttributes, null)))
        {
            returnText += string.Format(" {0}=\"{1}\"", HttpUtility.HtmlEncode(kvp.Key),
                HttpUtility.HtmlEncode(kvp.Value.ToStringOrEmpty()));
        }
    }
    returnText += ">\n";

    if (blankFirstLine)
    {
        returnText += "<option value=\"\"></option>";
    }

    //build the options tags
    foreach (var enumName in Enum.GetNames(typeof(TProperty)))
    {
        var idValue = ((int)Enum.Parse(typeof(TProperty), enumName, true)).ToString();
        var displayValue = enumName;
        var titleValue = string.Empty;
        returnText += string.Format("<option value=\"{0}\" title=\"{1}\"",
            HttpUtility.HtmlEncode(idValue), HttpUtility.HtmlEncode(titleValue));
        if (enumName == propertyValue)
        {
            returnText += " selected=\"selected\"";
        }
        returnText += string.Format(">{0}</option>\n", HttpUtility.HtmlEncode(displayValue));
    }

    //close the select tag
    returnText += "</select>";
    return new HtmlString(returnText);
} 
```

我遇到的问题是，枚举的名称中不能有空格，所以如果你有一个单词枚举值以外的东西，你会得到一些难看的选择列表，如下所示：

```
public enum EmployeeTypes
{
    FullTime = 1,
    PartTime,
    Vendor,
    Contractor
} 
```

现在，我有了一个好主意，“我知道！我将为此使用 DataAnnotations！”......所以我让我的枚举看起来像这样：

```
public enum EmployeeTypes
{
    [Display(Name = "Full Time")]
    FullTime = 1,
    [Display(Name = "Part Time")]
    PartTime,
    [Display(Name = "Vendor")]
    Vendor,
    [Display(Name = "Contractor")]
    Contractor
} 
```

...但现在我正在摸索如何在我的助手类中访问这些属性。有人可以让我继续这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:22:33.813

您可以`DisplayAttribute`使用循环内的反射从枚举字段中读取：

```
foreach (var enumName in Enum.GetNames(typeof(TProperty)))
{
    var idValue = ((int)Enum.Parse(typeof(TProperty), enumName, true)).ToString();
    var displayValue = enumName;

    // get the corresponding enum field using reflection
    var field = typeof(TProperty).GetField(enumName);
    var display = ((DisplayAttribute[])field.GetCustomAttributes(typeof(DisplayAttribute), false)).FirstOrDefault();
    if (display != null)
    {
        // The enum field is decorated with the DisplayAttribute =>
        // use its value
        displayValue = display.Name;
    }

    var titleValue = string.Empty;
    returnText += string.Format("<option value=\"{0}\" title=\"{1}\"",
        HttpUtility.HtmlEncode(idValue), HttpUtility.HtmlEncode(titleValue));
    if (enumName == propertyValue)
    {
        returnText += " selected=\"selected\"";
    }
    returnText += string.Format(">{0}</option>\n", HttpUtility.HtmlEncode(displayValue));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:47:53.437

我一直很喜欢为 Enum 类创建一个扩展方法来读取 Description 属性，并在你拥有的任何枚举上调用 ToDescription()。像这样的东西。

```
public static class EnumExtensions
{
    public static String ToDescription(this Enum value)
    {
        FieldInfo field = value.GetType().GetField(value.ToString());
        DescriptionAttribute attribute = Attribute.GetCustomAttribute(field, typeof(DescriptionAttribute)) as DescriptionAttribute;
        return attribute == null ? value.ToString() : attribute.Description;
    }   
} 
```

# c# - 如何使用 Sendkeys.SendWait() 函数发送句点？

> ID：11195753
> 
> 赞同：0
> 
> 时间：2012-06-25T19:10:51.063
> 
> 标签：c#, .net, sendkeys, keystrokes

如何使用 sendkeys 发送句点？我试过了：

```
System.Windows.Forms.SendKeys.SendWait("{.}"); 
System.Windows.Forms.SendKeys.SendWait("."); 
```

但这些都不起作用。我正在尝试将键盘快捷键发送到 Google 搜索窗口以在 Chrome 中启用语音搜索。快捷键是CTRL+SHIFT+PERIOD，我知道怎么做ctrl+shift，只是不知道句号。有人有想法么？任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:41:43.907

试试这个：`System.Windows.Forms.SendKeys.SendWait(Keys.OEMPeriod);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:00:52.357

您是否考虑过[Keys 枚举](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)？它有一个“小数”

```
System.Windows.Forms.SendKeys.SendWait(Keys.Decimal) 
```

# haskell - Haskell 代码格式化

> ID：11195758
> 
> 赞同：5
> 
> 时间：2012-06-25T19:11:30.083
> 
> 标签：haskell, coding-style

Haskell 有基于缩进的块样式。我知道两种风格，但我无法决定哪种风格更好。（原谅我一个非常愚蠢的示例函数）

第一 - 漂亮：

```
funcA :: Integer -> IO ()
funcA n = if n == 0
            then putStrLn "zero"
            else do putStr "--> "
                    print n 
```

这种风格看起来很棒，但很脆弱：让我们重构这段代码并重命名`funcA`——我们需要重新缩进`then`.`else`和`do`. 重命名`n`. 这很烦人。非常。

**编辑**正如 FUZxxl 提到的，行变得越来越长，但其中大多数 - 开头的空格。

另一种风格是重构友好，但不是那么漂亮：

```
funcA :: Integer -> IO ()
funcA n = if n == 0
    then putStrLn "zero"
    else do
        putStr "zero"
        print n 
```

你喜欢什么风格，*为什么*？可能你有另一个，或者你有一个链接到一些伟大的开发人员的代码风格和解释？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:20:21.343

就个人而言，我使用两种风格的混合。

当下一个“漂亮”的缩进层不是太远时，我使用第一种样式

```
do foo
   bar
   baz 
```

但是当一个漂亮的缩进会导致代码在右侧太远时，我只使用两个空格

```
case foo of
  a -> bar
  b -> baz
  c -> quux 
```

当我的缩进超过 20 个空格时，我经常“重置”缩进级别：

```
do a
   b <- do c -- normally I use only two whitespaces here
           d
           e <- do
     f
     g
     h 
```

如果您可以将列表中的第一个放在关键字之后，我只会在使用 pretty 样式时这样做

```
 main = do x
           y
           z where
   a = b
   c = d
   e = f 
```

## 你的例子

```
funcA :: Integer -> IO ()
funcA n = if n == 0
  then putStrLn "zero"
  else do putStr "--> "
          print n 
```

然而，在本例中，我将重构代码以使用模式匹配和显式一元操作（在本例中`>>`），替换`do`. 如果它`do`很短，请不要这样做。

```
funcA :: Integer -> IO ()
funcA 0 = putStrLn "zero"
funcA n = putStr "--> " >> print n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T02:26:03.137

我还没有弄清楚我的“理想” Haskell 风格。我目前倾向于编写代码的方式可能最受 Python 和 Mercury 编码的影响。

我倾向于喜欢多行结构有一个明显的“标题”行，它告诉我结构是什么而无需仔细阅读（这通常意味着多行结构的“形状”应该由最开始或非常“标题”行的末尾），并具有多行结构的不同“组成部分”，其中几个不同的多行部分通过改变缩进清楚地描绘出来。所以我更有可能把你的例子写成：

```
funcA :: Integer -> IO ()
funcA n =
    if n == 0 then
        putStrLn "zero"
    else
        do  putStr "--> "
            print n 
```

或者可能：

```
funcA :: Integer -> IO ()
funcA n =
    if n == 0 then
        putStrLn "zero"
    else do
        putStr "--> "
        print n 
```

将`else`and`do`折叠到同一行（尽管在这种情况下，我在 之后开始新行`do`）。类似地，整个定义为`do`块的函数通常在函数头中`do`紧跟在后面，块的实际代码在缩进的一组行中。`=``do`

如果 if/then/else 的条件更复杂，我也会给它自己的“部分”，变成：

```
funcA :: Integer -> IO ()
funcA n =
    if
        n == 0
    then
        putStrLn "zero"
    else
        do  putStr "--> "
            print n 
```

不过，我很确定这种 if/then/else 格式取决于 GHC 中相对较新的变化；以前`then`and`else`部分必须比 . 缩进更多`if`。在这条规则下，我从来没有找到一种我非常熟悉的 if/then/else 块的编写方式；幸运的是，由于模式匹配和守卫，它们在 Haskell 中并不常见。

我使用这种风格的方式有些不一致，我还不完全满意。例如，在我当前打开的文件中，我有以下形式的几个函数：

```
foo a b = simple expression c d
    where
        c = bar a
        d = baz b 
```

看起来不错，但是：

```
foo a b =
    complex multiline expression c d
    where
        c = bar a
        d = baz b 
```

逻辑上`where`应该与函数主体处于不同的缩进级别。但它不应该缩进*更多*，因为它是 的一部分`foo a b =`，而不是 的一部分`complex ...`。但是我也不想再缩进`complex ...`一级来回应，因为跳转到两级缩进看起来很难看，而且它的正确缩进级别由后面是否有`where`块来确定是令人不快的。`where`幸运的是，当函数的定义是一些辅助定义的简单表达时，我似乎大多使用；如果该函数作为一些辅助定义的大型复杂函数突然出现，我会尝试将其分解为更独立的部分。

我觉得这种风格主要避免了失控的缩进（它也是“重构友好的”，因为它不通过其他代码位的长度来确定代码的正确缩进位置），同时仍然允许我直观地确定我的代码的高级结构无需对底层结构进行详细解析。

我有时担心我的思维方式太像 Pythonista（具有缩进级别）或 Mercuryista（？）（具有具有节的代码结构），而不是采用 Haskell 的“缩进比开始的位置更多”方法。但是一旦事情开始变得复杂，像你的第一个漂亮的例子这样的东西就变得非常不漂亮，而且我的口味不可读。

# .net - 在 VB.NET 中使用 asm

> ID：11195759
> 
> 赞同：1
> 
> 时间：2012-06-25T19:11:32.327
> 
> 标签：.net, vb.net, performance, assembly

我想在 VB.NET 中调用一些 ASM 函数。我该怎么做？这是出于性能目的。

我在网上没有找到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:16:50.737

VB.NET 和 CLR 通常不支持在同一个程序集中将汇编代码与 CIL 混合（这是可能的，但我们假设它不是）（请注意，“程序集”是给 .NET 的名称可执行文件，而不是指“汇编代码”，我知道这很令人困惑）。

您需要通过互操作来执行此操作。您需要将汇编指令编译成它们自己的本机 Windows DLL 文件，然后导出这些函数（您的汇编器/链接器将附带有关如何执行此操作的说明），然后在 VB.NET 中定义一个静态类（“Module ") 为您的 DLL 中的每个导出函数提供 DllImport 语句。然后只需调用这些函数即可。

类型转换（“编组”）到本地是由 CLR 为您处理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T04:19:52.153

这可以使用 C# 轻松安全地完成，不明白为什么它不适用于 VB。

# php - PHP缓存是否包含在运行时？

> ID：11195764
> 
> 赞同：1
> 
> 时间：2012-06-25T19:11:43.710
> 
> 标签：php

我在同一页面上多次包含相同的文件。我注意到当我这样做时，似乎 PHP 正在缓存文件。当我使用 rand 函数生成一个随机数时，两个包含中的随机数是相同的。任何人都知道我可以如何阻止 PHP 这样做？我尝试了一些不同的标头函数，但它们不起作用：

```
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT"); // Date in the past
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); // always modified
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Pragma: no-cache"); // HTTP/1.0 
```

编辑：好的，我很笨，我忘了我是从我认为缓存文件的 jquery 脚本中调用包含。我回去查看有人要求的代码并注意到了它。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:18:52.763

我建议多次包含同一个文件并不是特别好的做法。

更好的解决方案是将它包含一次，然后多次调用它包含的函数。

显然，这将意味着改变代码的工作方式——我猜它目前是作为一个代码块编写的，一旦包含它就会运行。您需要对其进行更改，以便将其包含在一个函数（或多个函数，根据需要）中，以便可以随意调用它。

然后只需在程序开始时将其包含一次。

我知道这并不能直接回答问题，但这样做是更好的编码实践，并且会使您的代码更易于管理和维护。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:14:31.057

您很有可能在该文件中使用相同的值播种 pRNG。标题影响浏览器，而不是脚本。

我确定包含的文件没有被缓存：我制作了一个控制台程序，其中每个“功能”都是通过包含一个文件来实现的。在不重新启动程序的情况下更改文件仍然允许它加载更新的文件。

所以，你的问题要么是随机种子，要么是其他地方。尝试`echo microtime()`看看它是否两次给出相同的结果。

# php - 本机准备的语句：它们有这么有限吗？

> ID：11195769
> 
> 赞同：2
> 
> 时间：2012-06-25T19:11:58.827
> 
> 标签：php, mysql, pdo, prepared-statement

2006 年的一篇内容丰富的[博文](http://wezfurlong.org/blog/2006/apr/using-pdo-mysql/)陈述了有关在 PDO 中使用原生准备好的语句的这些事实：

1.  原生预处理语句无法利用查询缓存，导致性能下降。
2.  本机准备好的语句不能执行某些类型的查询，例如“SHOW TABLES”。
3.  本机准备语句不能正确传达某些其他“SHOW”查询的列长度，从而导致结果乱码。

这在今天还有多少是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:24:21.553

不，如果您使用的是最新的 MySQL 版本，则情况并非如此。至少在大多数情况下。

1.  [自 MySQL 5.1.17 起](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)，Prepared statements 使用查询缓存。

2.  几乎所有 SQL 语句都可以作为准备好的语句运行。[您可以在 MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/sql-syntax-prepared-statements.html)中找到一个列表。`SHOW TABLES`特别是不在该列表中，但老实说，您曾经使用过 PHP 中的 SQL 语句吗？

3.  我对此一无所知，但我认为它是固定的。

不要忘记准备好的语句的模拟**不是编码安全**的，因此可能（取决于确切的条件）仍然允许 SQL 注入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T19:25:31.700

1.  法莱。从 MySQL 5.1.17 开始[，查询缓存适用于准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/query-cache-operation.html)
2.  为什么你需要准备一个语句来做一个 SHOW TABLES？
3.  你能引用一个来源吗？我个人没有任何问题

# mysql - mysql将各种日期格式转换成统一的格式

> ID：11195773
> 
> 赞同：2
> 
> 时间：2012-06-25T19:12:16.757
> 
> 标签：mysql, sql

我遇到了一个mysql数据库，它的日期以各种随机格式输入到varchar列中，例如下面

```
01/01/1977
05-05-1980
58   ( age to be converted to date )
1.2.1990
02/02/87
01-Mar-73 
```

我如何将其转换为一种统一格式 - dd/mm/yyyy

另外，当我尝试使用此数据将 varchar 转换为日期列时

```
SELECT
    CAST(date_column AS DATE)
    FROM
    table_name 
```

我不知道为什么它给了我日期值的所有空值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:24:08.193

我会使用正则表达式来检查格式，然后在 STR_TO_DATE 中使用适当的说明符来获得标准格式。也许有人可以帮助正则表达式？

伪代码：

```
SELECT 
     CASE WHEN date REGEXP '[m-d-y]'
          THEN STR_TO_DATE(date, %) 
```

说明符：http : [//dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:20:30.100

该`CAST()`函数的语法是：

```
CAST(character_string AS character_data_type CHARACTER SET charset_name) 
```

您是否以正确的方式查询它？

# php - Symfony2：实际上将 FR3DLdapBundle 与 FOSUserBundle 集成是有问题的

> ID：11195774
> 
> 赞同：0
> 
> 时间：2012-06-25T19:12:22.733
> 
> 标签：php, symfony, fosuserbundle, fr3dldapbundle

有没有人真正将两者结合起来？我现在正在努力这样做，但我不知道如何解决我遇到的问题。

首先，我的版本：

*   Symfony 2.0.15
*   FOSUserBundle 1.2.0
*   FR3DLdapBundle 1.5.x

目前*没有*问题的是让 ldap 包联系我的 ldap 服务器并对用户进行身份验证。这很好用。

问题是何时需要坚持用户。这是我的用户实体的样子

```
<?php

namespace JWT\EufonyBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use FR3D\LdapBundle\Model\LdapUserInterface;
use FOS\UserBundle\Entity\User as BaseUser;

/**
 * JWT\EufonyBundle\Entity\User
 *
 * @ORM\Table(name="user")
 * @ORM\Entity(repositoryClass="JWT\EufonyBundle\Entity\UserRepository")
 */
class User extends BaseUser implements LdapUserInterface
{
  /**
   * Ldap Object Distinguished Name
   * @var string $dn
   */
  protected $dn;

  /**
   * @var integer $id
   *
   * @ORM\Column(name="id", type="integer")
   * @ORM\Id
   * @ORM\GeneratedValue(strategy="AUTO")
   */
  protected $id;

  /**
   * Get id
   *
   * @return integer
   */
  public function getId()
  {
      return $this->id;
  }

  /**
   * {@inheritDoc}
   */
  public function setDn($dn)
  {
    $this->dn = $dn;
  }

  /**
   * {@inheritDoc}
   */
  public function getDn()
  {
    return $this->dn;
  }
} 
```

这是生成的 MySQL 表的样子

```
mysql> describe user;
+-----------------------+--------------+------+-----+---------+----------------+
| Field                 | Type         | Null | Key | Default | Extra          |
+-----------------------+--------------+------+-----+---------+----------------+
| id                    | int(11)      | NO   | PRI | NULL    | auto_increment |
| username              | varchar(255) | NO   |     | NULL    |                |
| username_canonical    | varchar(255) | NO   | UNI | NULL    |                |
| email                 | varchar(255) | NO   |     | NULL    |                |
| email_canonical       | varchar(255) | NO   | UNI | NULL    |                |
| enabled               | tinyint(1)   | NO   |     | NULL    |                |
| salt                  | varchar(255) | NO   |     | NULL    |                |
| password              | varchar(255) | NO   |     | NULL    |                |
| last_login            | datetime     | YES  |     | NULL    |                |
| locked                | tinyint(1)   | NO   |     | NULL    |                |
| expired               | tinyint(1)   | NO   |     | NULL    |                |
| expires_at            | datetime     | YES  |     | NULL    |                |
| confirmation_token    | varchar(255) | YES  |     | NULL    |                |
| password_requested_at | datetime     | YES  |     | NULL    |                |
| roles                 | longtext     | NO   |     | NULL    |                |
| credentials_expired   | tinyint(1)   | NO   |     | NULL    |                |
| credentials_expire_at | datetime     | YES  |     | NULL    |                |
+-----------------------+--------------+------+-----+---------+----------------+ 
```

问题来自继承自的所有列`FOS\UserBundle\Entity\User`- 特别是当用户使用 LDAP 进行身份验证时我永远不会拥有值的所有 NOT NULL 列。

那么这里的解决方案是什么？我不能为`user.salt`or之类的列“伪造”值`user.password`。

我从上到下检查了类层次结构，`FOS\UserBundle\Entity\User`并且对列的要求`password`在`FOS\UserBundle\Model\UserInterface`（下面的层次结构）

```
FR3D\LdapBundle\Model\LdapUserInterface <------------------------+
                                                                 |
Symfony\Component\Security\Core\User\UserInterface               |
  ^                                                              |
  +- Symfony\Component\Security\Core\User\AdvancedUserInterface  |
       ^                                                         |
       +- FOS\UserBundle\Model\UserInterface <---+               |
                                                 |               |
FOS\UserBundle\Model\UserInterface <-------------+               |
                                                 |               |
                                      implements |               |
FOS\UserBundle\Model\User -----------------------+               |
  ^                                                              |
  +- FOS\UserBundle\Entity\User                                  |
       ^                                              implements |
       +- JWT\EufonyBundle\Entity\User --------------------------+ 
```

这告诉我，我实际上无法通过 extends 的东西为用户实现 LDAP 身份验证`FOS\UserBundle\Entity\User`，这感觉就像说“根本不与 FOSUserBundle 集成”一样，尽管这似乎是整个目的**FR3DLdapBundle**。

如果我的用户类*没有*extends `FOS\UserBundle\Entity\User`，那么我就会失去**FOSUserBundle**开箱即用的所有角色/组好东西。

我错过了文档中的某些内容吗？我不知道如何使这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:49:03.383

我不明白你的问题是什么。如果您设置密码并将其存储在 DB 中，则身份验证将针对 DB 而不是 Ldap。

您应该在“链提供者”键下具有以下提供者：

提供者：[fos_userbundle，fr3d_ldapbundle]

提供者的顺序很重要，你可以省略他们的一些，但永远 fr3d_ldapbundle 不能在 fos_userbundle 之前

（https://github.com/Maks3w/FR3DLdapBundle/blob/master/Resources/doc/index.md#6-enable-fosuserbundle-as-user-provider）

如果您在创建用户时有一些特殊需要填写一些用户属性，那么您可以按照本说明书设置您自己的值。

[https://github.com/Maks3w/FR3DLdapBundle/blob/master/Resources/doc/cookbook/override_ldap-manager.md](https://github.com/Maks3w/FR3DLdapBundle/blob/master/Resources/doc/cookbook/override_ldap-manager.md)

问候

# c# - 如何将 tabSpace 插入字符串？

> ID：11195775
> 
> 赞同：3
> 
> 时间：2012-06-25T19:12:23.220
> 
> 标签：c#, winforms, string

我正在尝试将 tabSpace 插入字符串：

```
string ab = "a" + "\t" + "b" 
```

但是我得到了一个正方形而不是空间。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T19:16:18.333

你的代码是正确的。

请注意，不需要使用字符串连接。这达到了相同的效果：

```
string ab = "a\tb"; 
```

您遇到的问题不是*创建*字符串，而是*显示*字符串。您可能正在使用不支持显示选项卡的控件。用空格替换制表符可能会更好。

**有关的**

*   [Winforms 标签文本属性不显示 \t 制表符](https://stackoverflow.com/questions/2154623/winforms-label-text-property-not-displaying-t-tab-character)

# xcode - Xcode 搜索历史

> ID：11195777
> 
> 赞同：4
> 
> 时间：2012-06-25T19:12:33.910
> 
> 标签：xcode, macos, search, xcode4.3

许多其他 IDE 和文本编辑器的一个共同特性是搜索历史记录，即能够查看（并再次使用）以前在源文件中搜索字符串的能力。我在 Xcode 中找不到这个功能，是我遗漏了什么，还是 Xcode 真的遗漏了它？我在 OS X Lion 上使用 Xcode 4.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T19:24:43.810

文件搜索和项目搜索都有一个带有最近搜索的小向下箭头。

![文件搜索](../Images/ca5337d3204c2cfb75529c9be31da2f8.png) ![项目搜索](../Images/7467ee92021912762ae527814074ad3d.png)

# mysql - SugarCRM 订单被忽略

> ID：11195780
> 
> 赞同：1
> 
> 时间：2012-06-25T19:12:44.710
> 
> 标签：mysql, sugarcrm

我更改了对其中一个模块进行排序的默认列。现在我想让订单以特定的顺序显示。我创建了一个 view.list.php 文件并将其放在 custom/module/view 文件夹中。当我覆盖 listViewPrepare() 函数以选择具有以下内容的列时：

```
 $_REQUEST['orderBy'] = 'table.column'; 
```

它工作正常。当我将代码更改为：

```
$_REQUEST['orderBy'] = "FIELD(table.column, 'value1', 'value2', 'value3', 'value4', 'value5', 'value6', 'value7')" 
```

它根本不按顺序排列。我已经检查了 mysql 中 order by 语句的语法，它在那里工作，但是当我将它插入 view.list.php 时它不起作用。我已经回显了变量，并且它正确地存在。我不明白为什么它不起作用。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:12:06.520

这是您的语法：您在第一列缺少打开和关闭引号

```
$_REQUEST['orderBy'] = "FIELD(Contacts_cstm.file_status_c, 'NHSactive', 'Hands_Off',     'NHSsubmitted', 'NHSIncomplete', 'NHSCancelled', 'NHSComplete', 'NHSClosed')"; 
```

我相信它应该是这样的......试一试......也 $query 应该是你的选择语句

```
$query.=" ORDER BY ".$_REQUEST['Contacts_cstm.file_status_c, 'NHSactive', 'Hands_Off',     'NHSsubmitted', 'NHSIncomplete', 'NHSCancelled', 'NHSComplete', 'NHSClosed']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:53:46.570

如果您通过单击字段标题上的向上或向下箭头手动对列表视图进行排序，SugarCRM 会将其保存为上次使用的排序字段，并在您下次查看列表时使用。尝试从您的用户页面单击“重置用户首选项”。

# ruby-on-rails - Rails 多字模型命名约定

> ID：11195786
> 
> 赞同：5
> 
> 时间：2012-06-25T19:13:09.593
> 
> 标签：ruby-on-rails, naming-conventions, models

我的数据库中有一个名为 metadata_types 的查找表，其中列出了我的应用程序使用的所有各种类型的元数据。

元数据是元数据的复数；我应该调用表 metadatum_types 吗？换句话说，在这种情况下，复数应该在两个词上，还是只在第二个词上？那么相应的模型是否也应该是 metadatum_type.rb（Class MetadatumType）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T19:17:48.000

`metadata_types`因为表名很好。从那里，你可以做

```
> "metadata_types".classify
=> "MetadataType" 
```

所以 MetadataType 将是 rails 期望的类名。

这也适用于反向：

```
> "MetadataType".tableize
=> "metadata_types" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T19:16:14.637

metadatum_types 很好。Rails 仅在模型名称的末尾应用复数形式。

该方法相当简单，可以在这里找到：http: [//api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-pluralize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-pluralize)（[代码](https://github.com/rails/rails/blob/6c367a0d787705746f262d0bd5ad8c4f13a8c809/activesupport/lib/active_support/inflector/methods.rb#L23)）

可以在此处找到适用于 Rails 的变形名称：[Inflector.rb](https://github.com/rails/rails/blob/6c367a0d787705746f262d0bd5ad8c4f13a8c809/activesupport/lib)

# winforms - StripLines 没有显示在 Windows 窗体中的 MS Chart 控件上？

> ID：11195793
> 
> 赞同：0
> 
> 时间：2012-06-25T19:13:45.167
> 
> 标签：winforms, mschart

我正在使用图表控件将一些数据显示为柱形图。该图表设置为支持“缩放”以及带状线。一直到周五都很好。突然之间，带状线开始没有出现，我可以查看它们的唯一方法是放大；即使那样他们也没有出现在正确的位置！！！我重建了解决方案，尝试删除并添加对“可视化”库的引用。我的意思是我想不出别的，毕竟我没有更改任何代码！任何人都可以请解释发生了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:06:38.143

我想我想通了！！StripLine 对象上的“IntervalOffset”不是从图表的原点计算的，它总是从用户可以查看的 ChartArea 的起点计算[带缩放]。此外，StripLines 被添加到 ChartArea 的 BackGround 而不是 ForeGround。因此，如果您的缩放级别小于 StripLine 间隔，即使滚动轴，您也看不到它。

编辑：我的要求是突出图表的特定区域。因此，我使用 CustomPainting 而不是 StripLines 将“矩形”添加到我的图表前景以突出显示这些区域！希望微软改进他们关于 StripeLines 和 Zoom 功能的文档。

# ajax - 正确使用 ajax 和 spring mvc 视图模型

> ID：11195794
> 
> 赞同：0
> 
> 时间：2012-06-25T19:13:46.730
> 
> 标签：ajax, spring, jsp, spring-mvc

我想知道将 ajax 与 spring mvc 一起使用的最佳方式是什么。此刻我有一个视图对象，当用户打开下拉框并更新一些属性时，我想更新它。问题是这些字段在 ajax 请求将它们添加到页面后无法正确绑定。当我刷新页面时它很好。spring mvc 的 ajax 和 @sessionAttributes 是否存在问题。ajax 和 spring 可能在不同的会话上工作吗？我只是在寻找关于如何集成 ajax 和 spring 的一般想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:57:13.390

一，非常好的解决方案是 Spring MVC 与 Jackson 的集成。

Jackson 是一个很酷的读写 JSON 内容的框架，与 spring 的集成非常棒。序列化和反序列化过程对开发人员来说是透明的，您的控制器接收反序列化的对象作为参数并返回 java 对象作为结果。Jackson 进行结果对象的序列化和参数的反序列化。

例如，您可以拥有一个具有以下结构的控制器：

```
@Controller
@RequestMapping("/path/to/it")
public class JSONController {

    @RequestMapping(value="{name}", method = RequestMethod.GET)
    public @ResponseBody ComplexStructure getJSONData(@PathVariable String name) {
        return new ComplexStructure(10, 20, "some other value");
    }
} 
```

您可以在[这里查看有关配置的想法，并在](https://stackoverflow.com/a/4831132/1001027)[此处](http://blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/)和[此处](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/)找到一些示例

# forms - kohana 将值传递给重定向视图

> ID：11195799
> 
> 赞同：0
> 
> 时间：2012-06-25T19:14:10.643
> 
> 标签：forms, redirect, kohana

如果使用，我很好奇如何将值`$name`从控制器传递到视图。（如果名称是在前一页输入的，它会重定向到success.php，除非它保持在同一页上）。`success.php``$this->request->redirect ( 'success' );`

视图`success.php`包含：

```
Hello, <? echo $name; ?>! 
```

尝试了几种传递值的方法`$name`，但仍然没有运气。其余所有工作正常（如果名称不为空，它会重定向）。如果输入了“John”，我只想写“Hello, John”。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T21:43:04.323

在重定向之前使用键设置会话变量，例如名称：

```
$session->set('name', 'John'); 
```

重定向后，您使用 session->get_once(); 调用变量；

```
$name = $session->get_once('name'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:56:08.223

它与 Kohana 无关，而是与 HTTP 协议的基础知识有关。
[这篇](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)文章描述了针对您的问题的几种可能的解决方案。

# android - 在不重新启动的情况下启动服务计划？

> ID：11195801
> 
> 赞同：2
> 
> 时间：2012-06-25T19:14:16.040
> 
> 标签：android, service, broadcastreceiver

我正在编写我的第一个使用服务的应用程序，遵循这里的教程/指南[http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html) 我的服务正在工作，它描述了为BOOT_COMPLETED 可以工作并允许我每隔几分钟运行一次服务。

我遇到的问题是，在用户重新启动手机之前它不起作用。该服务从活动开始，但似乎也随着活动而终止，除非设备已重新启动。

有没有办法在第一次运行时从活动中启动调度程序而不重新启动？

我的调度程序代码如下：

```
public class ScheduleReceiver extends BroadcastReceiver {

    // Restart service every 30 seconds
    private static final long REPEAT_TIME = 1000 * 60; // check every minute.  

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("schedulereceiver", "starting schedule");
        AlarmManager service = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        Intent i = new Intent(context, StartServiceReceiver.class);
        PendingIntent pending = PendingIntent.getBroadcast(context, 0, i,
                PendingIntent.FLAG_CANCEL_CURRENT);
        Calendar cal = Calendar.getInstance();
        // Start 30 seconds after boot completed
        cal.add(Calendar.SECOND, 30);
        //
        // Fetch every 30 seconds
        // InexactRepeating allows Android to optimize the energy consumption
        service.setInexactRepeating(AlarmManager.RTC_WAKEUP,
                cal.getTimeInMillis(), REPEAT_TIME, pending);

        // service.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
        // REPEAT_TIME, pending);

    }
} 
```

我的清单文件如下所示：

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".ProximityActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service
            android:name=".ProximityService"
            android:enabled="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/service_name" >
        </service>

        <receiver android:name="ScheduleReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>
        <receiver android:name="StartServiceReceiver" >
        </receiver>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T09:44:25.750

这里的基本问题是您想在两种不同的情况下设置计时器。

您想在启动时设置它——并且您想在用户第一次启动应用程序时设置它。（恐怕你不能在安装时做到这一点）。

我发现做到这一点的最好方法是简单地在文件系统中记录你设置了计时器，你第一次设置它。

在 ScheduleReceiver 中，创建两个公共静态方法：

```
public static void startupActions(Context ctx) {
    setupTimer();
    try {
        ctx.openFileOutput(".inited", Context.MODE_PRIVATE).close();
    } catch (IOException e) {
        throw new Error(e);
    }
} 
```

从您的 onReceive() 方法调用上述方法。稍后我们将再次使用它。

```
public static boolean hasStartupRun(Context ctx) {
    try {
        ctx.openFileInput(".inited").close();
        return true;
    } catch (IOException e) {
        return false;
    }
} 
```

在您的主要活动的 onCreate() 方法中使用这些来判断您是否需要启动计时器：

```
 if (! ScheduleReceiver.hasStartupRun(this)) {
        ScheduleReceiver.startupActions(this);
    } 
```

似乎重新安装不会清除计时器，因此您需要担心的唯一其他故障是您是否需要以某种方式修改计时器（或其他一组启动操作）。为了解决这个问题，您可以修改意图以便不处理旧的意图，并重命名文件，以便安排新的意图。

您可以使用任何其他持久性标志，例如数据库创建、首选项文件等，但以这种方式创建文件是我能想到的从 BroadcastReceiver 执行的最简单的方法。

我在您的问题中发现有点令人费解的一件事是您的服务“启动”和“终止”活动。

我意识到这个问题已经有几个月的历史了，但是为了其他可能处于类似情况的读者......这听起来有点困惑。你的意思是，服务的 onCreate() 方法在活动启动时被调用，而 onDestroy() 方法在活动“死亡”时被调用？或者您的活动启动它或绑定到它，但是当进程被杀死时它会消失并且永远不会回来？

我提出这个问题的原因是，根据您的服务的功能，您可能希望删除启动服务的任何其他代码，并仅依赖计时器。

Service 和 Activity 生命周期是完全不同且不相关的，并且进程生命周期与其中任何一个都有很大不同。如果你想从你的活动中与你的服务交互，你可能想绑定到它，以及从一个计时器启动它。两者都做完全没问题！（尽管拥有两个服务通常更好——一个后台或基于计时器的服务，以及一个后台服务和活动都绑定到的控制/配置服务）。

只是为了确保将每个绑定与取消绑定匹配，并且每次以 Service.stopSelfResult(int) （如果服务每次启动时都执行一个工作单元）或 Context.stopService(Intent) （如果服务根据调用者的需要是连续的），因此系统知道您何时完成服务。

如果您使用 startService，请务必仔细选择要从 onStartCommand(...) 返回的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:34:45.890

问题`Service`是它作为单个实例运行。每次启动同一个服务时，只会调用 onStartCommand() 方法。因此，在 alarmManager 中使用它并期望`Service`重新运行可能不会发生。

检查以下内容以获取更多详细信息：http: [//developer.android.com/guide/components/services.html#StartingAService](http://developer.android.com/guide/components/services.html#StartingAService)

# c# - MVC 3，在哪里提交工作单元？

> ID：11195804
> 
> 赞同：3
> 
> 时间：2012-06-25T19:14:22.600
> 
> 标签：c#, asp.net-mvc, nhibernate

我刚刚使用 MVC 3、Fluent nHibernate、AutoMapper 和 Autofac 建立了一个项目，利用了通用存储库、工作单元模式和 3 层设计。我现在遇到了这个问题：

我有一个工作单元，但我不知道在哪里/如何提交它。启动更容易；使用 Autofac，基于每个 HTTP 请求注入 - 我的工作单元的构造函数开始事务。然而，我意识到我最终得到了这样的商务课程：

```
private readonly IUnitOfWork _unitOfWork;
private readonly IUserRepository _userRepository;

public UserHandler(
    IUserRepository userRepository, 
    IUnitOfWork unitOfWork)
{
    _userRepository = userRepository;
    _unitOfWork = unitOfWork;
}

public void CreateUser(User user)
{
    // Fill the date fields
    user.CreationDt = DateTime.Now;
    user.ModifiedDt = DateTime.Now;

    // Add the user 
    _userRepository.Add(user);

    // Commit the changes
    _unitOfWork.Commit();
} 
```

这很好，只要我不需要做任何其他交易。但是，如果在调用 .Add 之后，我决定用类似的方法调用另一个业务类怎么办？然后我有 2 次提交，我假设这会爆炸，因为我将尝试结束已经完成的事务。

我曾考虑将提交放在我的 UnitOfWork 的 Dispose 中，但如果发生异常，那将是个坏消息。我见过一些情况，人们也将他们的 UnitOfWork 注入到他们的控制器中，但这似乎是错误的，因为它破坏了关注点分离，您的控制器绕过业务层并直接调用数据库层。最后，我目前正在研究使用类似于 Sharp Architecture 中使用的属性[，](https://github.com/sharparchitecture/Sharp-Architecture/blob/master/Solutions/SharpArch.NHibernate/Web/Mvc/TransactionAttribute.cs)但我也不确定这是否是正确的方法（再次，您不是让控制器直接访问/了解数据层吗？） .

有人可以分享一些关于我应该在哪里承诺的智慧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:35:17.333

只要您在一个请求中共享您的数据库连接，您就可以开始事务并在响应发送到客户端后提交。我领导了一个特殊的动作过滤器来实现这一点。

```
public sealed class CommitOnSuccess : ActionFilterAttribute
{
    public IUnitOfWork UnitOfWork { get; set; }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.Exception == null)
            UnitOfWork.Commit();
    }
} 
```

这就是我如何使我的操作方法简单而轻量级

```
[CommitOnSuccess]
[HttpPost]
public ActionResult Create(ApplicationManagementViewModel model)
{

} 
```

并且将对 Create 方法中从存储库中获得的实体执行更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:18:56.137

在应用程序结束请求中，您可以提交您的工作单元。在 global.asax.cs 文件中添加以下函数：

```
protected void Application_EndRequest(object sender, EventArgs e)
    {
     //code to commit unit of work
    } 
```

此外，由于您使用的是 Autofac，您也可以将范围限定为`IUnitOfWork`并`InstancePerLifetimeScope`实现该类`IDisposable`，并且在您的`Dispose`函数中您可以提交您的会话。发生异常时这是怎么回事，您可以检查您的代码，如下所示：

```
 if ( HttpContext.Current != null && HttpContext.Current.Error != null) 
      transaction.Rollback();
 else
      transaction.Commit(); 
```

# windows - 事件日志消息大小 31885？视窗 2008

> ID：11195805
> 
> 赞同：6
> 
> 时间：2012-06-25T19:14:25.620
> 
> 标签：windows, event-log

我们最近将生产盒从 Windows 2003 服务器升级到了 Windows 2008。除事件记录外，一切正常。我们为**每条消息**记录最多 32000 字节的数据。

在 2008 服务器上，如果字符数大于 31885，事件记录将失败。这是 Windows 2008 R2 服务器上的新限制吗？

在 Win 2003 服务器上，我能够为每个日志条目记录 32000 字节的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-25T13:49:26.227

引用该[`ReportEvent`](https://msdn.microsoft.com/EN-US/library/windows/desktop/aa363679.aspx)函数的文档：

> pStrings [输入]
> 
> 一个指向缓冲区的指针，该缓冲区包含一个以 null 结尾的字符串数组，这些字符串在事件查看器向用户显示字符串之前合并到消息中。此参数必须是有效指针（或 NULL），即使 wNumStrings 为零。每个字符串限制为 31,839 个字符。
> 
> 在 Windows Vista 之前：每个字符串限制为 32K 个字符。

所以回答这个问题：

是的，可以记录的允许字符串的长度在正确的时间范围内发生了变化。解决方案是分解事件日志条目，缩小条目并将详细信息存储在其他地方，或者将一些内容存储在事件的二进制数据字段中。

# msbuildextensionpack - 使用 MSBuild 检查 GAC 中的程序集

> ID：11195809
> 
> 赞同：0
> 
> 时间：2012-06-25T19:14:36.790
> 
> 标签：msbuildextensionpack

我在 GAC 中安装了一些自定义程序集，但是当我尝试使用 MSBuild 任务检查这些程序集是否存在时，它显示为 False。但是，它确实显示了框架程序集的存在。这是我的任务：

```
<Target Name="CheckGAC">
    <MSBuild.ExtensionPack.Framework.Gac TaskAction="CheckExists" AssemblyName=Service.Common, Version=1.0.0.0, Culture=Neutral, PublicKeyToken=ed9f5fb552f617d7">
        <Output PropertyName="AssemblyExists" TaskParameter="Exists"/>
    </MSBuild.ExtensionPack.Framework.Gac>
    <Message Text="Exists: $(AssemblyExists)"/>
</Target> 
```

是否有任何原因它不适用于 GAC 中的用户程序集？或任何其他方式来检查我的程序集是否存在于 GAC 中使用 MSBuild？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:52:40.610

实际上有不止一个GAC。可能是 Gac 任务正在查看 .net 4.0 GAC 而不是 .net 2.0（反之亦然）。

# .net - 创建新数据库系统与更改现有数据库系统的优缺点是什么？

> ID：11195812
> 
> 赞同：0
> 
> 时间：2012-06-25T19:14:47.017
> 
> 标签：.net, database-design, architecture

我有一个客户，他请来了另一个开发人员来开发一个单独的应用程序，该应用程序从未集成到几乎运行他们整个业务模型的更大的应用程序中。它是一个带有 MSSQL 2008 R2 数据库的 .net。

他们正在考虑使用我的 30 多个表数据库并抓取它的各个部分来创建一个全新的数据库，然后我将期望最终更改当前系统以遵循该数据库。

我从不反对优化，客户的主表现在当然可以按照他们的提议分成 2 个额外的表。但是我不禁想知道，获取现有表并修改它们以添加/删除他们想要的字段并基于大量数据结构、钩子、以及我在过去 7 年中开发的其他服务。从可能曾在大型应用程序中工作过的人那里寻找一些经验，以及随着时间的推移如何发布更新。

另一位开发人员不会以任何方式接管我的客户。他已经 60 多岁了，半退休，他这样做是为了帮我的客户，因为我们刚刚被猛烈抨击。他是一个很棒的人，一直乐于接受建议和讨论，所以这不会有什么不同，但我相信这里的社区，并希望为我的客户和他们的新应用程序做最好的事情。所以无论你建议哪种方式对我来说都很好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:30:09.597

当您更改一组现有的数据库表时，您必须同时修改所有访问这些数据库表的所有程序。

当您创建一组新的数据库表时，您必须将现有的与新的同步，但是您可以相对轻松地将程序转换为新的集合。这对于复杂的业务流程来说风险较小。

# ruby-on-rails - 在 Rails 的开发模式下使用什么邮件服务/服务器？

> ID：11195819
> 
> 赞同：0
> 
> 时间：2012-06-25T19:15:00.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3

SendGrid 似乎没有可用于在开发模式下进行测试的免费帐户。当前的替代方案/最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:19:18.767

一个不错的选择是使用 letter_opener gem。见[https://github.com/ryanb/letter_opener](https://github.com/ryanb/letter_opener)

首先将 gem 添加到您的开发环境并运行 bundle 命令来安装它。

```
gem "letter_opener", :group => :development 
```

然后在 config/environments/development.rb 中设置交付方式

```
config.action_mailer.delivery_method = :letter_opener 
```

现在，任何电子邮件都会在您的浏览器中弹出，而不是被发送。消息存储在 tmp/letter_opener 中。

# java - Android时间与Java时间之间的转换

> ID：11195820
> 
> 赞同：5
> 
> 时间：2012-06-25T19:15:05.790
> 
> 标签：java, android, calendar

我在安卓手机（Nexus one）和java服务器之间的时间转换上遇到了一点麻烦。我读过的所有内容都说它们是相同的，但是当我从我转换一个很长的时间戳时，我似乎失去了 1 小时（完全正确）。

具体来说，如果我在 android 设备上运行以下代码，我会得到以下输出

代码：

```
Calendar g = Calendar.getInstance();
g.setTimeInMillis(1340661899000L);
Log.d(TAG, g.getTime().toLocaleString()); 
```

输出：2012 年 6 月 25 日下午 6:04:59

我认为这是正确的，但是当我在 java 服务器上运行完全相同的代码时，我在同一天但提前 1 小时得到了

代码：

```
Calendar g = Calendar.getInstance();
g.setTimeInMillis(1340661899000L);
System.out.println(g.getTime().toLocaleString()); 
```

输出：2012 年 6 月 25 日下午 5:04:59

有谁知道这可能是什么原因造成的？服务器和手机都位于同一个地方（没关系），服务器盒和手机上的时钟匹配

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:17:39.103

考虑到相差一小时，您是否可以在服务器上设置 DST（夏令时）而不是在电话上设置，反之亦然？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:47:30.167

克里斯想说的是，您的手机和服务器可能配置为不同的时区。

尝试打印`cal.getTimeZone()`. 如果这是您想要选择用于通信的时区的问题。例如：

```
Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT+0")); 
```

根据 JavaDocs，日历实例使用以下报告的默认时区：

```
TimeZone.getDefault() 
```

尽管您的服务器和移动设备设置为相同的时区，但不一定意味着它们使用相同的默认时区。

# knockout.js - 如何使用 jstree 和敲除创建可更新的树

> ID：11195821
> 
> 赞同：0
> 
> 时间：2012-06-25T19:15:08.013
> 
> 标签：knockout.js, jstree

我希望使用淘汰赛来构建一个可更新的 jstree。我能够让树正确渲染，但是当我更新我的一个可观察对象时，树中的项目不会像我期望的那样自动更新。有没有其他人有运气让这个工作？我在这里有一个示例 jsfiddle：

[http://jsfiddle.net/rsparkyc/wj4Xx/](http://jsfiddle.net/rsparkyc/wj4Xx/)

您可以看到，当输入字段更新时，相应的 span 也更新了，但树视图保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:44:11.477

您遇到的问题是由于 jstree 正在根据 Knockout 期望在标签内的内容修改 DOM。

你可能想看看[https://github.com/madcapnmckay/Knockout-UI](https://github.com/madcapnmckay/Knockout-UI)。它有一个非常容易使用的基于淘汰赛的树。

# javascript - 用奇怪的值初始化的 Javascript 对象

> ID：11195825
> 
> 赞同：1
> 
> 时间：2012-06-25T19:15:11.620
> 
> 标签：javascript, jquery

我实际上一直在尝试调试它一整天，这完全令人困惑。寻找一些提示。

我在 javascript 命名空间中有这些函数：

```
var ZZ = {
  bar: function(data) {
    console.log(data);
  },
  foo: function() {
    $.ajax({
      'url':'/test',
      'type':'GET',
      'dataType':'jsonp',
      'success':function(ret_json, status) {
        console.log(ret_json);   // SUCCESS_1
        console.log(ret_json[1].title);   //SUCCESS_2
        bar(ret_json);
      }
    });
  },
...
} 
```

所以我查看了开发人员工具的“网络”选项卡，返回的 json 是正确的.. 类似于：

```
[{'id':1, 'url':'http://a.com', 'title':'hi'}, {'id':2, 'url':'http://b.com', 'title':'hi2'}] 
```

现在我查看控制台并看到在 SUCCESS_1 处，它打印出如下内容：

```
[{'id':1, 'url':'http://c.com', 'title':'hi3'}, {'id':2, 'url':'http://c.com', 'title':'hi3'}] 
```

如您所见，id 是正确的，但 url 和 title 不正确。（我也可以更改数据库中的ID，它们将被正确执行）

然后在 SUCCESS_2 的下一行，它抓住了正确的标题！'嗨2'

接下来我将调试器语句放入成功函数中：ret_json 看起来完全正确，但是当我进入 bar() 函数时.. 数据再次看起来错误。

接下来我补充：

```
var hi = {};
console.log(hi); 
```

进入成功功能..它打印出来..（不是开玩笑）

```
{'url':'http://c.com', 'title':'hi3'} 
```

所以基本上，这个“默认”正在覆盖实际存在的任何内容。

我已经在 ajax 调用中添加了 cache:false，我尝试过 json 和 jsonp，我尝试过清除缓存，我尝试过使用 chrome/safari/firefox .. 但什么也没做，我怀疑这很明显。 ..这真的很糟糕。

关于我可以尝试的任何其他想法？

* * *

**更新**：将此命名空间添加到不同的 html 页面。最令人震惊的例子

```
var hi = {}
console.log(hi) 
```

打印的东西不见了，但 ret_json 数据错误的原始问题仍然存在。（我仍然无法访问上一个 html 页面的工作版本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:05:18.933

@ggez44，这是因为 console.log 不是 Chrome/Firefox/Safari 中的同步调用。通常会有几毫秒的延迟。

> 它在我的机器上看起来延迟不是恒定的，在 Chrome 中介于 4ms 和 16ms 之间，在 Safari 中约为 2ms。

[http://techblog.appnexus.com/2011/webkit-chrome-safari-console-log-bug/](http://techblog.appnexus.com/2011/webkit-chrome-safari-console-log-bug/)

[Chrome 开发者工具中奇怪的 console.log 行为](https://stackoverflow.com/questions/4198912/bizarre-console-log-behaviour-in-chrome-developer-tools)

我对此的推测性解决方案是执行“console.log(a.toJSON());”之类的操作。然后你最终得到一个指向传入的字符串对象的指针，它与原始对象无关。

更新：显然这是一个“功能，而不是错误”。在 webkit 邮件列表中有一些相当不错的门票链接。 [为什么 javascript 对象在 Chrome、Firefox、Safari 的控制台中显示不同的值？](https://stackoverflow.com/questions/8249136/why-does-javascript-object-show-different-values-in-console-in-chrome-firefox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:29:17.273

您是否在代码中的任何位置添加了以下内容？

```
Object.prototype.url = "http://c.com";
Object.prototype.title = "hi3"; 
```

这是创建空对象时显示这些属性的唯一原因。

# jquery - Galleria 使用 Jquery

> ID：11195826
> 
> 赞同：0
> 
> 时间：2012-06-25T19:15:16.470
> 
> 标签：jquery, galleria

我正在使用 Galleria jQuery 插件（可在此地址找到：http: [//galleria.io/](http://galleria.io/)），我想知道是否有人可以在创建初始“Galleria”实例的代码中指出我。我知道有一个 Galleria 类和构造函数，但我找不到/不明白初始实例的制作位置。

我怀疑它可能在这里的某个地方：

```
$.fn.galleria = function( options ) {

var selector = this.selector;

// try domReady if element not found
if ( !$(this).length ) {

    $(function() {
        if ( $( selector ).length ) {

            // if found on domReady, go ahead
            $( selector ).galleria( options );

        } else {

            // if not, try fetching the element for 5 secs, then raise a warning.
            Galleria.utils.wait({
                until: function() {
                    return $( selector ).length;
                },
                success: function() {
                    $( selector ).galleria( options );
                },
                error: function() {
                    Galleria.raise('Init failed: Galleria could not find the element "'+selector+'".');
                },
                timeout: 5000
            });

        }
    });
    return this;
}

return this.each(function() {

    // fail silent if already run
    if ( !$.data(this, 'galleria') ) {
        $.data( this, 'galleria', new Galleria().init( this, options ) );
    }
});

}; 
```

非常感谢你的帮助。我是 jQuery 和 Javascript 的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:18:21.440

它实际上低于：

[https://github.com/aino/galleria/blob/master/src/galleria.js#L5687](https://github.com/aino/galleria/blob/master/src/galleria.js#L5687)

```
$.data( this, 'galleria', new Galleria().init( this, options ) ); 
```

# c# - 读取文本文件块

> ID：11195827
> 
> 赞同：3
> 
> 时间：2012-06-25T19:15:17.590
> 
> 标签：c#

我有一个文本文件，其中每隔几行就会在行首重复一个特定字符。没有。之间的行数不固定。我能够找出发生这种情况的那些行。我想阅读介于两者之间的那些行。

```
 using (StreamReader sr = new StreamReader(@"text file"))
 {
     string line;
     while ((line = sr.ReadLine()) != null)
     {
         if (line.StartsWith("some character")) 
```

因为下一次，这个字符出现，代码保持不变。我无法阅读介于两者之间的那些行

例如。

```
Condition at the begining of a line
Next line
Next line
Condition at the begining of a line
Next Line
Next Line
Next Line
Next Line
Condition at the begining of a line 
```

我必须阅读中间的行。情况每次都保持不变。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:27:21.810

我假设您要解析文本文件并每次处理条件之间的所有文本块。

基本上你阅读每一行，检查第一个条件，它表示“块”的开始，并继续阅读这些行，直到你找到另一个条件，它表示块的结束（以及另一个块的开始）。

洗涤，冲洗，重复。

一个简单的例子：

```
using (var reader = new StreamReader(@"test.txt"))
{
    var textInBetween = new List<string>();

    bool startTagFound = false;

    while (!reader.EndOfStream)
    {
        var line = reader.ReadLine();
        if (String.IsNullOrEmpty(line))
            continue;

        if (!startTagFound)
        {
            startTagFound = line.StartsWith("Condition");
            continue;
        }

        bool endTagFound = line.StartsWith("Condition");
        if (endTagFound)
        {
            // Do stuff with the text you've read in between here
            // ...

            textInBetween.Clear();
            continue;
        }

        textInBetween.Add(line);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T19:37:27.300

看来您只需要跳过满足特定条件的行。

```
var lines = System.IO.File.ReadLines(@"text file")
            .Where (line => ! line.StartsWith("Condition");

foreach(string line in lines)
{
  // do your stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:33:24.143

*如果*我理解正确，您想在“块内或块外”的条件之间切换：

```
{
  string line;
  int inside = 0;
  while ((line = sr.ReadLine()) != null)
  {
     if (line.StartsWith("some character"))
     {
         inside = !inside;
         // If you want to process the control line, do it here.
         continue;
     }
     if (inside)
     {
         // "line" is inside the block. The line starting with "some character"
         // is never here.
     }
     else
     {
         // Well, line is outside. And the control lines aren't here either.
     }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T19:36:02.420

这是我经常使用的一种方法，用于读取对于 XDocument 来说太大的 xml 文件。根据您的需要对其进行修改将非常容易。

```
public static void ReadThroghFile(string filePath, int beingLinesToSkip, string endingMarker, Action<string> action)
{
   using (var feed = new StreamReader(filePath))
   {
       var currentLine = String.Empty;
       var ongoingStringFromFeed = String.Empty;

       for (var i = 0; i < beingLinesToSkip; i++) feed.ReadLine(); 

       while ((currentLine = feed.ReadLine()) != null)
       {
           ongoingStringFromFeed += currentLine.Trim();
           if (!currentLine.Contains(endingMarker)) continue;

           action(ongoingStringFromFeed);
           ongoingStringFromFeed = String.Empty;
       }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T19:23:11.407

除非我遗漏了什么，否则您似乎正在从 StreamReader***读取“每一行”***并检查您的“条件”是否满足。所以我不明白你的问题“我想阅读中间的那些行。”！！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T19:23:33.780

难道你不能做你想做的事吗？

```
using (StreamReader sr = new StreamReader(@"text file"))
{
 string line;
 while ((line = sr.ReadLine()) != null)
 {
     if (line.StartsWith("some character"))
     {
        //Get rid of line
     }
     else
     {
       // Do stuff with the lines you want
     } 
```

# vb.net - 有没有办法避免 vb.net 中的表单事件？

> ID：11195828
> 
> 赞同：0
> 
> 时间：2012-06-25T19:15:29.653
> 
> 标签：vb.net

我最近一直在学习 vb.net，来自 java 和 c 的背景。我很乐意将按钮和类似的东西添加到我的表单中，然后使用这些点击事件来调用其他类中的函数。

但是，我一直在测试我的代码的方式是在我的表单中添加一个按钮，然后让 click 事件启动第一个函数调用（基本上我让这个按钮像 java main() 方法一样工作。

我最近一直想知道是否有一种更有效的方法来测试我的代码，类似于它在 java 或 c 中的完成方式。我的意思是，有没有办法跳过所有的表单内容，而只拥有一个类似于 java 中的 main 方法的子过程或函数？

我已经看到几个答案提到了如何添加获取主子以在 vb.net 中工作，但他们需要更改项目的一些属性。我正在寻找一些我可以编写代码并点击运行而无需禁用应用程序框架的东西。

由于我对 vb.net 还是比较陌生，我也想知道这是否是他们错误的做法？如果我被要求在面试中创建一些代码之类的，我是否需要担心启动所有内容，或者他们只是想看到我将类实现为独立文件？

谢谢你能给我的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:25:45.110

我通常称之为....

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Me.IsPostBack Then
        'Do some stuff here if a form has been submitted, button, etc.
    Else
        'This is the first time this page has been called, so setup drop-downs, etc. here
    End If

End Sub 
```

所以基本上这是被调用的第一件事。如果我正在测试，我可以在 If 的第一部分默认某些内容......但同样......可能不是您正在寻找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:36:36.357

您始终可以启动“控制台应用程序”项目类型而不是“Windows 窗体应用程序项目”

这将跳过所有漂亮的 GUI 表单，并为您提供一个 Main() 一切准备就绪。您可以使用写入屏幕

```
Console.WriteLine(string) 
```

然后通过使用在最后暂停执行

```
Console.ReadLine 
```

# regex - RegEx - 贪婪的空白匹配

> ID：11195830
> 
> 赞同：14
> 
> 时间：2012-06-25T19:15:34.043
> 
> 标签：regex

我正在尝试确定正确的 RegEx 语法来执行以下操作。我在一个文件中有一行，我想在第一次出现空白之前匹配每个字符。

所以例如在这一行：

> 123abc xyz 富吧

我不清楚为什么会这样：

```
^.*\s 
```

与单词栏中的 b 匹配：

> 123abc xyz 富

在我看来 \s 是贪婪的，但是我不确定如何使它不贪婪并且只匹配 123abc 我尝试了各种形式的这个正则表达式，试图使它不贪婪`^.*\s?`或类似的东西，但是我一直不成功。先感谢您

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-25T19:19:49.320

那是因为`.`可以是任何字符，包括空格。你可以试试

```
^[^ ]*\s 
```

或者

```
^\S*\s 
```

反而。

那是贪婪的。但你也可以做出非贪婪的 re：

```
^.*?\s 
```

你的错误是你放`?`错了地方。

例子：

```
$ echo aaaa bbb cccc dddd > re.txt
$ cat re.txt
aaaa bbb cccc dddd
$ egrep -o '^.*\s' re.txt
aaaa bbb cccc 
$ egrep -o '^\S*\s' re.txt
aaaa 
$ egrep -o '^[^ ]*\s' re.txt
aaaa 
```

使用 perl 进行非贪婪搜索：

```
$ perl -ne 'print "$1\n" if /^(.*?)\s/' re.txt
aaaa 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T19:22:34.637

使用正则表达式`^\S*(?=\s)`

这意味着从一开始 ( ) 开始的所有 ( `*`) 非空白字符 ( )，但后面必须是空白字符 ( )，但不包括在匹配中 - 正向前瞻`\S``^``\s``(?=\s)`

如果您还希望包含尾随空格，请使用正则表达式`^\S*\s+`

# java - 阿特金筛子返回数组......具有无效索引 - Java

> ID：11195839
> 
> 赞同：0
> 
> 时间：2012-06-25T19:16:20.040
> 
> 标签：java, indexoutofboundsexception, sieve-of-atkin

所以我做了一个[阿特金](http://en.wikipedia.org/wiki/Sieve_of_Atkin)算法的筛子来生成素数（针对欧拉计划问题）。它返回一个名为 的素数 (int[]) 数组`primes`。问题是，每当我尝试从某个索引访问该数组时（我在我的`main`方法中这样做），它都会抛出一个`java.lang.ArrayIndexOutOfBounds`异常。请帮忙（如果您认为我的逻辑与仙女不符，并且有更简单的方法可以做到这一点，请告诉我）！

```
import java.lang.*;
import java.util.*;

public class SieveOfAtkin {
    public static void main(String[] stuff) {
        int limit = getInt("Limit?");
        int[] p = getPrimes(limit);
        for(int i = 0; i < p.length; i++) {
            System.out.println(p[i]);
        }
    }
    public static int[] getPrimes(int limit) {
        boolean[] isPrime = new boolean[limit + 1];
        double sqrt = Math.sqrt(limit);
        int n = 0;
        for(int i = 0; i < limit + 1; i++) {
            isPrime[i] = false;
        }
        for(int x = 0; x < sqrt; x++) {
            for(int y = 0; y < sqrt; y++) {
                n = 4 * x * x + y * y;
                if(n <= limit && (n % 12 == 1 || n % 12 == 5)) {
                    isPrime[n] = !isPrime[n];
                }
                n = 3 * x * x + y * y;
                if(n <= limit && n % 12 == 7) {
                    isPrime[n] = !isPrime[n];
                }
                n = 3 * x * x - y * y;
                if(n <= limit && n % 12 == 11 && x > y) {
                    isPrime[n] = !isPrime[n];
                }
            }
        }
        for(int i = 5; i < sqrt; i++) {
            if(isPrime[i]) {
                for(int j = i * i; j < limit; j = j + (i * i)) {
                    isPrime[j] = false;
                }
            }
        }
        int count = 0;
        for(int i = 0; i < isPrime.length; i++) {
            if(isPrime[i]) {
                count++;
            }
        }
        int[] primes = new int[count];
        int found = 0;
        if (limit > 2) {
            primes[found++] = 2;
        }
        if (limit > 3) {
            primes[found++] = 3;
        }
        for (int p = 5; p <= limit; p += 2) {
            if (isPrime[p]) {
                primes[found++] = p;
            }
        }
        return primes;
    }
public static int getInt(String prompt) {
    System.out.print(prompt + " ");
    int integer = input.nextInt();
    input.nextLine();
    return integer;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:19:36.553

没有“索引无效的数组”之类的东西。如果您正在访问数组并且得到一个`ArrayIndexOutOfBounds`，那么要么您使用的是负索引，要么数组没有您想象的那么大。调试您的代码以找出数组的*实际*长度（使用`array.length`）并将其与您的预期进行比较。

编辑：好的，现在我们有了代码，我们可以看到问题所在。当您计算出数组的大小时，您并没有计算值 2 和 3 - 但您*在*填写`primes`. 因此`primes`两个值太短了。

您可以通过设置`isPrime[2]`和`isPrime[3]`来解决此问题`true`。然后，您不需要之前的检查`limit > 2`etc - 只需遍历整个`primes`：

```
// After removing the special cases for 2 and 3 before this loop... but setting
// isPrime[2] and isPrime[3] to true
for (int p = 2; p <= limit; p++) {
    if (isPrime[p]) {
        primes[found++] = p;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:03:34.370

您的问题是您将 1 标记为素数，而不是 isPrime 数组中的 2 和 3，因此当您计算素数时，您的计数会减一。然后，当您开始填充素数数组时，您不会检查素数 2 和 3 的 isPrimes 数组，而是假设它们已被正确计算并在您的素数数组中标记它们，然后开始添加其余素数（现在是一个太多了）。

如果您在循环中添加一些调试，您可以在其中计算素数并填充素数数组，您应该很容易找到它。

# django - 如何根据一天中的时间显示不同的网页？（姜戈）

> ID：11195843
> 
> 赞同：0
> 
> 时间：2012-06-25T19:16:29.567
> 
> 标签：django

我正在尝试为团体订单建立一个送餐网站。食物将在一天中的预设时间（即下午 5 点、晚上 8 点、午夜）送达。

假设订购下午 5 点订单的截止时间是下午 4 点。所以在下午 4 点 01 分，我希望下午 5 点订单的网页显示“下午 5 点订单不可用”，但如果是在下午 4 点之前，我希望该页面成为正常的订购页面。

我会在我的“视图”或“模板”中包含这个逻辑吗？或者你会推荐使用 javascript 来实现这个功能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T19:25:37.787

需要注意的一件事是，如果您使用的是 javascript，则时间将特定于客户端（用户），并且如果您期望来自不同时区的用户（至少应该为良好的启发式方法）。

Javascript：

```
var hours = currentTime.getHours();
if(hours < 16 && hours > 8){//do something..
} 
```

但可能最好使用 PHP 来获取服务器时间

```
$hour = date("H"); 
```

# php - 子文件夹中的 mod_rewrite 不起作用

> ID：11195844
> 
> 赞同：1
> 
> 时间：2012-06-25T19:16:31.323
> 
> 标签：php, mod-rewrite

我目前正在掌握 mod_rewrite 并遇到了一个绊脚石，我希望有人能提供帮助

我有一个结构如此的网站

[https://www.abc.com/region1/](https://www.abc.com/region1/)
[https://www.abc.com/region2/](https://www.abc.com/region2/)
[https://www.abc.com/region3/](https://www.abc.com/region3/)

在每个文件夹中都有两个文件，我将调用 example1.php 和 example2.php，它们都是动态的

关于 example1.php 一种可能性可能是 example1.php?var1=1
关于 example2.php 一种可能性可能是 example2.php?var1=1&var2=1

我一直在尝试使用以下内容，但它引发了服务器 500 错误

```
RewriteEngine On
RewriteRule ^example1alias/ example1alias/([^/\.]+)/?$ example1.php?var1=$1 [L]
RewriteRule ^example1alias/ example1alias/?$ example1.php [L]
RewriteRule ^example2alias/ example2alias/([^/\.]+)/([^/\.]+)/?$ example2.php?var1=$1&var2=$2 [L] 
```

包含此代码的我的 .htaccess 位于子文件夹本身中，如果我正确理解 mod_rewrite ^ 告诉规则从活动路径运行

有人可以指出我做错了什么

一如既往，非常感谢任何建议

问候
巴里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:24:04.173

大多数情况下，HTTP 500（用于 htaccess）是针对 htaccess 文件中的语法错误。

对于重写规则，我相信语法是：RewriteRule Pattern Substitution [flags] (http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

您似乎对一条规则有不止一种模式，也许您可​​以尝试将它们分成两条不同的规则。

*   RewriteRule ^example2alias/example2.php [L]
*   RewriteRule ^example2alias/([^/.]+)/([^/.]+)/?$ example2.php?var1=$1&var2=$2 [L,QSA]

还将“RewriteEngine On”和“Options FollowSymLinks”添加到您的 htaccess 文件中

# silverlight - Silverlight StackPanel（或 UserControl）焦点问题

> ID：11195850
> 
> 赞同：0
> 
> 时间：2012-06-25T19:17:01.740
> 
> 标签：silverlight, focus, stackpanel

我正在从 StackPanel 派生一个自定义控件（或仅使用通常的 UserControl 类）。该控件应在应用程序中通过选项卡或单击控件获得焦点。当焦点发生时，控件将根据其他标准展开并显示某些元素。该控件还将选择一个默认的子控件来关注。

我遇到的问题是我找不到专注于 UserControl 的方法。当我单击控件时，Got/LostFocus 事件不会触发。

我知道 Focusable 属性，但它似乎不适用于 Silverlight 的任何客户端 dll（使用 SDK 的 v4）

我真正想要的是一些关于如何最好地实现我可以标签到的面板功能的建议，因为我想到的 UI 设计就在这上面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:37:11.093

我猜您正在寻找的控件是一个`Accordion`或 Expander 控件。 [在这里](http://blogs.msdn.com/b/senthilkumarmani/archive/2010/09/30/silverlight-4-accordion-menu.aspx)，您将找到使用该`Accordion`控件的步骤。希望有帮助。

# javascript - jQuery 动态对齐

> ID：11195852
> 
> 赞同：1
> 
> 时间：2012-06-25T19:17:06.507
> 
> 标签：javascript, jquery, css, plugins

我有这个电话：

```
$(document).ready(function () {
    $("#back").DynamicallyCentering({
        Alignment: "Vertical",
        Speed: 5
    });
    $(window).resize(function () {
        $("#back").DynamicallyCentering({
            Alignment: "Vertical",
            Speed: 5
        });
    });
}); 
```

动态居中插件：

```
jQuery.fn.DynamicallyCentering = function(Options) {
    var Block = $(this);
    var Defaults = {
        Alignment: "Both",
        Speed: 0
    };
    var Options = $.extend(Defaults, Options);
    var FormatedAlignment = Defaults.Alignment.toLowerCase();
    var VerticalFormula = ($(window).height() / 2) - (Block.height() / 2);
    var HorizontalFormula = ($(window).width() - Block.width()) / 2 + $(window).scrollLeft();
    StaticPositioning = function() {
        var PositioningSource;
        if (FormatedAlignment == "vertical") {
            var PositioningSource = Block.css("margin-top", VerticalFormula);
        } else if (FormatedAlignment == "horizontal") {
            var PositioningSource = Block.css("margin-left", HorizontalFormula);
        } else {
            var PositioningSource =
            Block.css("margin", VerticalFormula + "px " + HorizontalFormula + "px");
        }
        return PositioningSource;
    }
    StaticPositioning();
};​ 
```

如您所见，我有一个小插件试图动态地居中一个图层（在本例中为“#back”），这不适合我。然后我问：这是动态居中我的图层的正确方法吗？

**=== 编辑 ===**

对不起，没有明确的问题。为了更具体地说明我的问题，我带来了更多细节：

*   我有一个必要：动态地居中一个容器；

我可以用 jQuery 做到这一点。我的代码之前在同一个线程中发布过，他工作正常。但我不知道我是否以正确的方式这样做。大家能理解我吗？正如您在我的代码调用中看到的那样，我正在重复代码，这对我来说看起来不对。

任何人都知道是否有更好的方法使用 OOP 概念来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:03:21.327

这段代码对我来说看起来和工作正常。如果您指的是两次调用插件的重复代码，您可以将其提取到另一个函数中：

```
var center = function() {
    $("#back").DynamicallyCentering({
            Alignment: "Vertical",
            Speed: 5
        });
}

center();
$(window).resize(center); 
```

# css - 为什么在 Chrome 中使用 CSS3 列会删除列表中的项目编号

> ID：11195854
> 
> 赞同：14
> 
> 时间：2012-06-25T19:17:07.903
> 
> 标签：css, google-chrome, html-lists

我注意到当我添加 css 来操作列数时，chrome 正在删除我的列表项上的数字......

例如：

```
<ol style =-webkit-column-count: 2;...">
   ....
</ol> 
```

上面确实设法按预期将 li 溢出到单独的列中，但它也删除了默认项目编号。这不会发生在 Firefox 中，只有 chrome。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-14T11:45:26.957

似乎这些数字实际上是隐藏的。这可以通过使用以下属性来解决：

```
OL {
  list-style-position: inside;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-05T18:15:00.573

您总是可以只在`<div>`周围抛出 a`<ol>`并给出`<div>`多个列而不是`<ol>`.

```
<div style = -webkit-column-count: 2;...><ol>
    ....
</ol></div> 
```

但是，当我这样做时，由于某种原因，我最终会得到第二列比第一列高一行。也只发生在 Chrome 中。

编辑：我上述问题的解决方案只是为 增加一个零边距`<ol>`，所以这应该可以正常工作：

```
<div style = -webkit-column-count: 2;...><ol style = margin: 0;>
    ....
</ol></div> 
```

奇怪的是，有一些填充`<ol>`似乎也摆脱了数字，所以如果你有填充可能是罪魁祸首。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-28T19:57:26.657

通常一个人的样式表会有一个 html 重置，其中有一个`padding: 0;`列表项的重置。

而Stéphane的以下作品就像一个魅力，

```
ul {
  list-style-position: inside;
} 
```

你也可以给你的列表项一个 padding-left：

```
padding-left: 16px; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-07T08:36:11.687

`column-width`由于某些原因，当您应用规则时，位于元素之外的列表样式（默认）会被隐藏。以下是我根据其他答案和我自己的实验尝试在 Chrome 中模拟“预期”行为的最佳方法。

[演示](http://jsfiddle.net/E46q5/1/)

**HTML**

```
<div class="col-wrapper">
    <ol>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
        <li>6</li>
        <li>7</li>
        <li>8</li>
    </ol>
</div> 
```

**CSS**

```
.col-wrapper {
    -moz-column-width: 200px;
    -moz-column-gap: 1em;
    -webkit-column-width: 200px;
    -webkit-column-gap: 1em;
    column-width: 200px;
    column-gap: 1em;

    /* (optional) use ol's margin here */
    margin-top: 16px;
}

.col-wrapper ol {
    /* clear top margin of ol */
    margin-top: 0;
} 
```

# java - Java：ImageIcon 与图像差异

> ID：11195864
> 
> 赞同：12
> 
> 时间：2012-06-25T19:18:00.673
> 
> 标签：java, image, swing, awt, imageicon

谁能以noob方式向我解释Java中**ImageIcon**和**Image**类/对象之间的区别是什么？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T19:33:01.547

它们的性质和应用是不同的。[Image](http://docs.oracle.com/javase/6/docs/api/java/awt/Image.html)是表示图形图像的所有类的抽象超类。[ImageIcon](http://docs.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html)是用作其源的`Icon`接口的实现。`Image`

编辑：将 an`Image`视为*可以*呈现的东西，并将 an*视为将*`ImageIcon`在调用其方法时呈现的东西。*`Icon``paintIcon()`*

 *编辑：上面的链接将带您到 JDK 6 api。这些链接将带您访问 JDK 8 api：[Image](http://docs.oracle.com/javase/8/docs/api/java/awt/Image.html)和[ImageIcon](http://docs.oracle.com/javase/8/docs/api/javax/swing/ImageIcon.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:48:54.553

您可以缩放和保存 Image，但不能使用 ImageIcon 来做到这一点。要在 GUI 中创建图片，您通常必须使用 ImageIcon，但如果您不想这样做，Image 应该会更好。*

# php - 将数组保存为多行

> ID：11195865
> 
> 赞同：0
> 
> 时间：2012-06-25T19:18:01.843
> 
> 标签：php, mysql, curl

嘿，请问如何将数组保存到数据库中的多行中？我正在使用带有 php 的 mysql 数据库。

```
// GETTING ALL THE B NODE STUFFS AND PRINTING IT'S CONTENTS
    $result = array();
    foreach($document->getElementsByTagName('b') as $node){
    $result[preg_replace('/:\s+$/','',$node->textContent)] = trim($node->nextSibling->textContent);

    }
    var_dump($result); 
```

这是从我的数组中提取的结果。

```
array
 'Choose by Subject Category or Module Code' => string '' (length=0)
 '
Back to Home page' => string '' (length=0)
 'International' => string 'visiting students should consult the' (length=36)
 'Undergraduate' => string 'students should refer to the relevant section of the UCC' (length=56)
 'Postgraduate' => string 'students should refer to the relevant section of the UCC' (length=56)
 'Credit Weighting' => string '5' (length=1)
 'Teaching Period(s)' => string 'Teaching Period 1.' (length=18)
 'No. of Students' => string 'Min 15, Max 30.' (length=15)
 'Pre-requisite(s)' => string 'None' (length=4)
 'Co-requisite(s)' => string 'None' (length=4)
 'Teaching Methods' => string '1 x 4hr(s) Lectures; Other (Distance Education Module - Up to 146hrs Self Directed Study).' (length=90)
 'Module Co-ordinator' => string 'Dr Peter Cleary, Department of Accounting, Finance and Information Systems.' (length=75)
 'Lecturer(s)' => string 'Staff, Department of Accounting, Finance and Information Systems.' (length=65)
 'Module Objective' => string 'To examine the management uses of accounting information and to enhance students ability to exert effective managerial control.' (length=127)
 'Module Content' => string 'Topics include; the accounting information needs of management, costs and pricing; estimating costs; the identification of key performance indicators; budgeting for control; capital investment appraisal and  implications for strategic planning and control.' (length=256)
 'Learning Outcomes' => string 'On successful completion of this module, students should be able to:' (length=68)
 'Assessment' => string 'Total Marks 100: Continuous Assessment 100 marks (Project/ Essay. Approximately 1500 words.).' (length=93)
 'Compulsory Elements' => string 'Continuous Assessment.' (length=22)
 'Penalties (for late submission of Course/Project Work etc.)' => string 'Where work is submitted up to and including 7 days late, 10% of the total marks available shall be deducted from the mark achieved.  Where work is submitted up to and including 14 days late, 20% of the total marks available shall be deducted from the mark achieved.  Work submitted 15 days late or more shall be assigned a mark of zero.' (length=336)
 'Pass Standard and any Special Requirements for Passing Module' => string '40%.' (length=4)
 'End of Year Written Examination Profile' => string 'No End of Year Written Examination.' (length=35)
 'Requirements for Supplemental Examination' => string 'Marks in passed element(s) of Continuous Assessment are carried forward, Failed element(s) of Continuous Assessment must be repeated (Resubmission of revised Continuous Assessment).' (length=181) 
```

我确实尝试了一个带有 NSERT 查询的 for each 语句，但所有内容都保存在一个列中。

```
$array_data = implode("array_separator", $result);
    foreach($result as $snode){
    $query = sprintf("INSERT INTO save_array (ModuleCode) VALUES ('%s')",mysql_real_escape_string($snode));
    mysql_query($query) or die('Error, insert query failed');
    echo $snode.<br />';
    }
    echo '<br /><br /><br />'; 
```

任何帮助，将不胜感激。谢谢。

```
 //============== LATEST INSERT QUERY================//     
$array_data = implode("array_separator", $result); 
foreach($result as $snode){ 
$query = sprintf("INSERT INTO save_array 
       (ModuleCode,
        Homepage,
        International,
        Undergraduate,
        Postgraduate,
        CreditWeighting,
        TeachingPeriod,
        NoofStudents,
        Prerequisite,
        Corequisite,
        TeachingMethods,
        ModuleCoordinator,
        Lecturer,
        ModuleObjective,
        ModuleContent,
        LearningOutcomes,
        Assessment,
        CompulsoryElements,
        Penalties,
        PassStandard,
        EndofYearWrittenExamination,
        RequirementsforExamination) VALUES ('%s')",mysql_real_escape_string($snode)); 

foreach ($result as $key => $value) 
$query = $query . "$value"; 

 echo '<br /><br />'; 
mysql_query($query) or die($query."<br/><br/>".mysql_error());  
echo $snode. '<br />'; 
}
echo '<br /><br /><br />'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:25:36.337

您可以循环数组的所有元素并准备 SQL INSERT INTO 语句，并在执行此操作时执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:23:34.510

一个快速的答案是遍历一个 foreach 循环，将值连接到一个 INSERT 查询中（有关更多信息，请参阅[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)），并有foreach 循环不包括键“Undergraduate”、“International”和“Postdoc”，以及长度为 0 的任何值。

您的问题似乎在 INSERT 查询中。尝试这样的事情：

```
$query = sprintf("INSERT INTO save_array (CreditWeighting, TeachingPeriod, NoofStudents, etc.)) VALUES ('%s')",mysql_real_escape_string($snode));

foreach ($result as $key => $value)
    $query = $query . "$value"; 
```

并进行一些调整以使查询字符串恰到好处。

# jquery - JQuery - 组合选择器，包括：contains

> ID：11195868
> 
> 赞同：1
> 
> 时间：2012-06-25T19:18:09.353
> 
> 标签：jquery, jquery-selectors

**故事到此为止......**

你好 Stackoverflowers，我又来了！对，我现在正在学习 JQuery，我想构建一个***“键入时搜索”*** AJAX/JSON 控件。所以离开 vie 进入 JSFiddle 构建一个骨架函数并在其上构建，边走边学。在过去的几天里，你帮助了我，所以谢谢你：

[JQuery - 使用选择器：包含 - 奇怪的结果](https://stackoverflow.com/questions/11145099/jquery-using-selector-contains-weird-results)

[JQuery - 迭代 JSON 响应](https://stackoverflow.com/questions/11040711/jquery-iterating-json-response)

现在我只显示与输入匹配的选定列表项。

**“所以你现在的问题是什么......”**我在这里你呻吟！（是的，我现在有我的电子书！）:)

**JQuery nOOb 问题第 3 部分：多个选择器。**

我一直在使用[JQuery Multiple Selectors](http://api.jquery.com/multiple-selector/#selector1selector2selectorN) API 指南，所以我了解如何包含多个选择器，但我的问题是我没有选择任何东西，即**:contains**没有找到任何东西。这是不正确的吗，我使用了 JSLint 并且它已正确解析且没有错误：

```
$("li[id^='live'] li:contains('" + this.value + "')").show(); 
```

我的完整 JSFiddle 代码在这里，但为了方便起见，我也将其包含在内：

[http://jsfiddle.net/garfbradaz/JYdTU/88/](http://jsfiddle.net/garfbradaz/JYdTU/88/)

```
$(document).ready(function() {
var $input = $("#livesearchinput"),
    filled = false;
$.ajaxSetup({
    cache: false
});
$input.keyup(function(key) {
    if (!filled) {
        filled = true;
        $.getJSON("/gh/get/response.json//garfbradaz/MvcLiveSearch/tree/master/JSFiddleAjaxReponses/", function(JSONData) {
            var $ul =
            $('<ul>').attr({
                id: "live-list"
            }).appendTo('div#livesearchesults');
            $.each(JSONData, function(i, item) {
                $.each(item, function(j, val) {
                    $('<li>').attr({
                        id: "live-" + val
                    }).append(val).appendTo($ul).hide();
                });
            });
        });
    }

    var n = 0;

    if (this.value !== "") {
        n = $("li:contains('" + this.value + "')").length;
        n2 = $("li[id^='live'] li:contains('" + this.value + "')").length;
        console.log("1\. value of n2 equals " + n2 + " : " + this.value + "end");

    }
    else {
        n = 0;
    }

    if (n <= 0) {
        $('li[id ^= "live"]').hide("slow");
        console.log("1\. value of n equals " + n + " : " + this.value + "end");
    }

    if (n > 0) {
        $("li[id^='live'] li:contains('" + this.value + "')").show();
        console.log("2\. value of n equals " + n + " : " + this.value + "end");
    }

}); 
```

});​</p>

我所做的是放置一个**console.log** n2 始终为0，这是f12 日志以供证明：

![证明](../Images/afb7c13a2b091fa81b30fcc678ce6bc6.png)

所以我的问题是：

1.  我如何更正多重选择器以包含**：包含**所以我知道未来
2.  我什至应该使用 :contains，还是应该以不同的方式处理它并使用**.filter()**？在发布之前，我正在研究这个问题，并找到了一个很好的堆栈答案，详细说明了这个问题的使用：

[JQuery 包含选择器 - 多个文本项](https://stackoverflow.com/questions/1608695/jquery-contains-selector-multiple-text-items)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:51:37.760

在您的情况下，您只需要组合两个选择器：`li id starts with`和`li contains`. 每个选择器的相似部分是`li`，所以从`li`添加其他两个开始。

```
$("li[id^='live']:contains('" + this.value + "')").length; 
```

[http://jsfiddle.net/JYdTU/89/](http://jsfiddle.net/JYdTU/89/)

我只更新了一行以使控制台输出正确，您必须通过小提琴并更新其余部分。

# android - 您如何缩放和平铺用作背景的位图可绘制对象？

> ID：11195875
> 
> 赞同：10
> 
> 时间：2012-06-25T19:18:36.430
> 
> 标签：android, android-layout

我在可绘制位图 xml 文件中有以下代码。并为其设置了一个线性布局的背景。

```
<?xml version="1.0" encoding="utf-8"?>
    <bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@drawable/background_screen"
        android:tileMode="repeat"
        android:scaleHeight="10"
        android:scaleWidth="10"
        /> 
```

图像平铺正常，但无法缩放。我必须做什么/修复才能使其规模化？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T20:03:36.010

根据我的经验，最好为您所针对的每个密度创建不同大小的位图。这样您就不必担心这些比例属性并在任何设备上获得清晰的结果。

没有为 BitmapDrawables 定义这些比例属性。它们存在于用于缩放另一个可绘制对象的 ScaleDrawables 中。看一下：

[http://developer.android.com/guide/topics/resources/drawable-resource.html#Scale](http://developer.android.com/guide/topics/resources/drawable-resource.html#Scale)

# shell - 使用 ksh 编辑 tomcats server.xml？

> ID：11195880
> 
> 赞同：0
> 
> 时间：2012-06-25T19:18:47.587
> 
> 标签：shell, unix, tomcat, ksh

我想知道通过 ksh 脚本更改 tomcats conf/server.xml 配置文件中的某些设置的最简单方法是什么？

例如，我想更改这两个片段的默认端口：

替换这个：

```
<Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" /> 
```

有了这个：

```
<Connector port="8081" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" /> 
```

和，

替换这个：

```
<Server port="8005" shutdown="SHUTDOWN"> 
```

有了这个：

```
<Server port="8006" shutdown="SHUTDOWN"> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:23:17.183

我猜你想在配置中改变这个？这将是一个简单的 sed，您可以通过添加不仅仅是数字来使其更安全：

```
sed -i 's/8005/8006' server.xml 
```

# javascript - Javascript 新日期对不同日期样式的处理方式不同？

> ID：11195881
> 
> 赞同：6
> 
> 时间：2012-06-25T19:18:47.727
> 
> 标签：javascript, html, date

我在 Firefox 暂存器中测试了以下代码并得到了有趣的结果？

```
var date=new Date("2012-05-12");
var date2 = new Date("05/12/2012");
date;
/*
Fri May 11 2012 17:00:00 GMT-0700 (Pacific Daylight Time)
*/
date2;
/*
Sat May 12 2012 00:00:00 GMT-0700 (Pacific Daylight Time)
*/ 
```

两个日期不同。显然这是由于时区问题。我想要的是 date2 结果。如何让 js 引擎正确处理 ISO 日期样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:38:47.080

我认为问题在于字符串“2012-05-12”被视为 ISO 8601 日期，而“05/12/2012”是 RFC 2822 日期。在 ISO 格式中，缺少时区意味着 UTC。在 5 月 12 日凌晨的午夜，在加利福尼亚（或无论您身在何处），是前一天晚上 7 点。

然而，没有时区的 RFC 日期是在您想要**本地**时区的午夜时间戳的假设下解析的。（好吧，不一定是*您的*时区；运行 JavaScript 的计算机的时区 :-)

如果将这些字符串传递给`Date.parse()`.

RFC 日期格式可以包含明确的时区，但 ISO 格式不能。（嗯，它可以，但浏览器不注意，显然 IE 根本不处理这些。）

*编辑*——这是一个简单的（愚蠢的；没有错误检查）函数，它会给你一个来自 3 部分 ISO 表单的日期：

```
function isoDate( str ) {
  var rv = null;
  str.replace(/^(\d\d\d\d)-(\d\d)-(\d\d)$/, function(_, yr, mn, dy) {
    rv = new Date(parseInt(yr, 10), parseInt(mn, 10) - 1, parseInt(dy, 10));
  });
  return rv;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:29:56.610

按照标准，使用`Date()`，您可以以依赖于实现的方式解析 ISO 日期或依赖于实现的格式的日期。要获得更可靠的信息，请使用可以解析某些已知格式的日期的合适库。

# java - 接收不带 '\0' 的 JSON

> ID：11195884
> 
> 赞同：2
> 
> 时间：2012-06-25T19:18:55.523
> 
> 标签：java, json

我必须将我的应用程序与现有的（不可修改的）Python 脚本集成，该脚本发送不带 '\0' 或任何其他“消息结束”字符的 JSON 消息。有没有更好的方法来处理传入的消息，只是从套接字一个字节一个字节地读取数据并计数括号？由于协议，在此应用程序中发送`{`或`}`消息内容是非法的，因此此代码可以正常工作，但在我看来很难看：

```
 int i = 0;
  int brackets = 0;
  byte[] msg = new byte[4096];
  do
  {
       byte chunk = reader.readByte();
       msg[i++] = chunk;
       if (chunk == 123)  // check if '{'
           brackets++;
       else if (chunk == 125) // check if '}'
           brackets--;
  } while ( brackets > 0);
  byte[] finalMsg = Arrays.copyOfRange(msg, 0, i); 
```

**编辑**Python 代码：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((server_ip, server_port))
logging.info('Connected to: %s', (server_ip, server_port))
s.send(json.dumps(data))
logging.info('Sent message: %s', json.dumps(data)) 
```

我使用字节分析文本，因为该脚本将每个字符作为单个字节发送，据我所知`char`，Java 中的长度为 2 个字节。当我尝试接收 char-after-char 数据时，我无法将它们与`{`and进行比较`}`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:01:47.403

你可以使用[Gson](http://code.google.com/p/google-gson/)库：

```
Gson gson = new Gson();
JsonReader jr = new JsonReader(reader);
String msg1 = gson.toJson(gson.fromJson(jr, Object.class));
String msg2 = gson.toJson(gson.fromJson(jr, Object.class));
... 
```

`reader`来自套接字阅读器的输入流在哪里。

# asp.net - ASP.NET 回发导致 AJAX 异常

> ID：11195886
> 
> 赞同：0
> 
> 时间：2012-06-25T19:19:00.347
> 
> 标签：asp.net, ajax

我有一个基本的 asp.net 网络表单，它通过标准回发处理事件。在此页面上，我还对 WCF 服务进行了 AJAX 调用，该服务由 ScriptManager 控件生成的 JavaScript 代理管理。我遇到的问题是：有时用户触发 AJAX 请求，然后立即触发回发，这导致 AJAX 调用引发异常。这似乎是一个时间问题：如果您等到 AJAX 请求完成，然后回发，一切都很好。我*以为*我在做一个异步请求，所以我不确定为什么我会收到错误。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:23:40.663

使用 PageRequestManager 的 isInAsyncPostBack 属性检查异步回发是否正在进行，并且此按钮生成回发，然后取消此请求

[http://www.atulverma.com/2010/06/how-to-disable-subsequent-submit-button.html](http://www.atulverma.com/2010/06/how-to-disable-subsequent-submit-button.html)

# php - PHP Header() 出现故障

> ID：11195887
> 
> 赞同：0
> 
> 时间：2012-06-25T19:19:00.660
> 
> 标签：php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

在下面的代码中，没有任何标题重定向到指定的位置..我不知道为什么...在调用标题之前我没有发送或回显任何输出。也没有意外的“空白”也会导致标题（）出现故障。我也尝试过使用 ob_start() 但它是徒劳的。我所有的文件也都在一个文件夹中，即在 WAMP 的“www”文件夹中.....有人能告诉我有什么问题吗？

此代码处理用于注册新用户的表单.....使用 POST 方法

```
$user= "root" ;
$host= "localhost" ;
$password= "" ;

$database= "online_examination" ;
$fn=$_POST['fn'] ;    // firstname
$ln=$_POST['ln'] ;    // lastname
$un=$_POST['un'] ;  // username
$pass=$_POST['pw'] ;  // password

$connection= mysql_connect($host,$user,$password) ;
$db= mysql_select_db($database,$connection);
$query=" SELECT username FROM user_info " ;
$result=mysql_query ($query,$connection) ;

for ($i=0 ; $i<mysql_num_rows($result) ; $i++ )
{
    $uname=mysql_result($result,$i,"username") ;

    if ($un==$uname)
       {
           header ("Location : /username_exists.php") ;
           exit;
       }
}

$query=" SELECT password FROM user_info " ;
$result=mysql_query ($query,$connection) ; 

for ($i=0 ; $i<mysql_num_rows($result) ; $i++ )
{
     $pword=mysql_result($result,$i,"password") ;
     if ($pass==$pword)
       {
            header ("Location : /password_exists.php") ;
            exit;
       }
}

$query=" INSERT INTO user_info (firstname,lastname,username,password) VALUES
('$fn','$ln','$un','$pass') " ;

mysql_query ($query,$connection)

header ("Location : /successfully_registered.php") ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:08:58.763

这段代码充满了安全漏洞和逻辑错误，但我已经尽力重写它。

```
$user = 'root';
$host = 'localhost';
$password = '';
$database = 'online_examination';

// Attempt to connect to MySQL
if( !( $connection = mysql_connect( $host , $user , $password ) ) ){
  die( 'Failed to connect to server' );
}elseif( !( $db = mysql_select_db( $database , $connection ) ) ){
  die( 'Failed to connect to database' );
}

// Default values for Form Submitted Fields
$fn = $ln = $un = $pass = false;
// Check if Form Submitted
if( $_POST ){
  // For each value, perform some basic validation before trusting them
  if( isset( $_POST['fn'] ) && $_POST['fn']!='' )
    $fn = $_POST['fn'] ;    // firstname
  if( isset( $_POST['ln'] ) && $_POST['ln']!='' )
    $ln = $_POST['ln'] ;    // lastname
  if( isset( $_POST['un'] ) && $_POST['un']!='' )
    $un = $_POST['un'] ;  // username
  if( isset( $_POST['pw'] ) && $_POST['pw']!='' )
    $pass = $_POST['pw'] ;  // password
}

// If a Username was submitted
if( !$fn || !$ln || !$un || !$pw ){

  // One or more of the fields were empty or not submitted.
  // Show the form again (maybe with an error message)

}else{

  // Perform a Query looking for any instances where the same username is already in use
  $query = 'SELECT COUNT(*) AS matches FROM user_info WHERE username="'.mysql_real_escape_string( $un ).'"';
  $result = @mysql_query( $query , $connection ) ;
  if( !$result ){
    die( 'Query for Usernames Failed' );
  }
  $row = mysql_fetch_array( $result )
  if( $row['matches']!=0 ){
    // The Username is already in use
    if( !headers_sent() ){
      header( 'Location: /username_exists.php' );
    }else{
      echo 'Username already in use - <a href="/username_exists.php">Click here</a>';
    }
    die();
  }

  // If we have gotten to this point, the username is OK to use
  $sqlTpl = 'INSERT INTO user_info ( firstname , lastname , username , password ) VALUES ( "%s" ,  "%s" ,  "%s" , "%s" )';
  $sqlStr = sprintf( $sqlTpl ,
    mysql_real_escape_string( $fn ) ,
    mysql_real_escape_string( $ln ) ,
    mysql_real_escape_string( $un ) ,
    mysql_real_escape_string( $pw ) );
  $result = mysql_query( $sqlStr , $connection );
  if( $result ){
    if( !headers_sent() ){
      header( 'Location: /successfully_registered.php' );
    }else{
      echo 'Successfully registered - <a href="/successfully_registered.php">Click here</a>';
    }
    die();
  }else{
    // Something went wrong
  }
} 
```

臀部的几点：

*   遍历所有返回的行并单独匹配它们是检查值是否存在的一种钝方法。SQL 在做这种事情方面要好得多 - 阅读它。
*   执行检查以查看密码是否已被使用是没有意义的。我敢打赌，StackOverflow 上的一两个人拥有相同的密码，但他们没有收到提示“有人已经将 'abc123' 作为密码。选择另一个”的消息。如果有的话，这种消息是一种安全风险，而不是一种安全措施。
*   永远不要相信输入。假设会有一个 POST 提交是灾难的根源。
*   因此，不验证您获得的任何输入。
*   更重要的是不要将其转义以在数据库查询中使用。谷歌搜索“小鲍比桌”。
*   如果您要存储密码，则切勿以纯文本形式存储它们。它们应该被散列和加盐。（同样，谷歌是你的朋友。）
*   假设您可以更改标题是需要谨慎的事情。检查`headers_sent()`是一个很好的做法。
*   随时测试错误。一开始的一个小错误，可以被检测到并中止任何后续操作，总比让一个小错误滚雪球要好。

查看一些预先存在的教程和/或处理用户注册的 PHP 类。他们中的很多人都有好主意，您应该将其纳入您的解决方案，而不是重新发明轮子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T19:43:43.397

```
$connection= mysql_connect($host,$user,$password); 
$db= mysql_select_db($database,$connection); 
```

它可能由于php错误而失败。你错过了你的分号。

尝试 error_reporting(E_ALL); 在顶部仔细检查错误；

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T19:23:45.233

此外，请确保您的`<?php`标签之外没有空格，因为这会导致文本被发送到浏览器，除非您打开输出缓冲，否则将导致错误提示“标头已发送”。此外，您的 SQL 处理非常不安全。您的任何变量都可以用于成功的 SQL 注入。

# asp.net-mvc - 视图之间的链接

> ID：11195890
> 
> 赞同：0
> 
> 时间：2012-06-25T19:19:10.880
> 
> 标签：asp.net-mvc

我有 2 个视图，一个名为 PostToPalPal，如下所示和 DomainConfirmationView。在 DomainConfirmationView 我有一个链接到 PostToPayPal 的按钮，然后通过发布事件重定向到贝宝。我遇到的问题是，当我单击此按钮时，它什么也没做。我已经在另一个页面上进行了这项工作，但是我只有`@model dynamic`在页面顶部，其余的是 HTML。有谁知道我哪里出错了？抱歉，如果这真的很愚蠢，这是我第一次尝试 MVC。

谢谢

```
@model application.Models.PayPal

@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title>Index</title>
    <script src="@Url.Content("~/Scripts/jquery-1.6.2.min.js")" type="text/javascript"></script>
</head>
<body>
    <form id="frm" action=@ViewBag.actionURL>
    @Html.HiddenFor(model => model.cmd)
    @Html.HiddenFor(model => model.business)
    @Html.HiddenFor(model => model.no_shipping)
    @Html.HiddenFor(model => model.@return)
    @Html.HiddenFor(model => model.cancel_return)
    @Html.HiddenFor(model => model.notify_url)
    @Html.HiddenFor(model => model.currency_code)
    @Html.HiddenFor(model => model.item_name)
    @Html.HiddenFor(model => model.amount)
    </form>
    <p style="text-align: center">
        <h4>
            <img src="../../Images/New-LogoPNG.png" />
            <br />
            You are now being redirected to Paypal...</h4>
    </p>
</body>
</html>
<script type="text/javascript" language="javascript">
    $(this.document).ready(function () {
        var frm = $("form");
        frm.submit();
    });   
</script> 
```

域确认视图

```
@model Application.Models.DomainCustomerDetails
@using (Html.BeginForm("PostToPayPal", "Home"))
{
<input type ="hidden" name="item" value= ".com"/>
<input type = "hidden" name="amount" value="10" />

}
@{
    ViewBag.Title = "Domain order placed";
}

    @{
        String Input = "Hi" +".&lt;BR /&gt;&lt;BR /&gt;"
             + "You have a new domain order that has been placed."
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Domain Details"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Domain name:" + Model.DomainName
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Domain duration " + Model.DomainDuration
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Domain order type" + Model.OrderType
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + Model.FirstName
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + Model.LastName
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + Model.BusinessName
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + Model.Address
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + Model.Address2
             + "&lt;BR /&gt;&lt;BR /&gt;" 
             + Model.PostalCode
             + "&lt;BR /&gt;&lt;BR /&gt;" 
             + Model.EmailAddress
             + "&lt;BR /&gt;&lt;BR /&gt;" 
             + Model.ContactNumber
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Kind regards"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "xxx"
             + "&lt;BR /&gt;&lt;BR /&gt;" 
             + "Email: support@xxx.com"
             + "&lt;BR /&gt;&lt;BR /&gt;";

        String Output = Server.HtmlDecode(Input);

            WebMail.SmtpServer = "mail.xxx.com";
            WebMail.SmtpPort = 25;
            WebMail.EnableSsl = false;
            WebMail.UserName = "xxx@xxx.com";
            WebMail.Password = "xxxx";
            WebMail.From = "xx@xxx.com";
            WebMail.Send("xxx@xx.com", "You have a new domain order " + Model.DomainName,Output);

    }

     @{
         String Inputorder = "Hi " + Model.FirstName
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "We are pleased to say your domain name " + Model.DomainName + "has been ordered."
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Domain Details"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + Model.DomainName
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Domain duration" + Model.DomainDuration
             + "&lt;BR /&gt;&lt;BR /&gt;"     
             + "What to do next"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Server IP"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             +"Name Server 1:"
             + "&lt;BR /&gt;&lt;BR /&gt;" 
             +"Name Server 2:"
             + "&lt;BR /&gt;&lt;BR /&gt;" 
             +"MX:"
             + "&lt;BR /&gt;&lt;BR /&gt;" 
             +"A:"
             + "&lt;BR /&gt;&lt;BR /&gt;" 
             +"CNAME:"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "PLEASE NOTE"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Please allow 24 hours for any DNS changes to take effect due to DNS caching by your ISP."
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Many thanks for your order"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Kind regards"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "xxx"
             + "&lt;BR /&gt;&lt;BR /&gt;"
             + "Email: support@xxx.com"
             + "&lt;BR /&gt;&lt;BR /&gt;";

        String Outputorder = Server.HtmlDecode(Inputorder);

            WebMail.SmtpServer = "mail.xxx.com";
            WebMail.SmtpPort = 25;
            WebMail.EnableSsl = false;
            WebMail.UserName = "xxx@xx.com";
            WebMail.Password = "xxx";
            WebMail.From = "sales@xx.com";

            WebMail.Send( Model.EmailAddress, "Your new domain order: " + Model.DomainName,Outputorder);

    }

<p>Thank you, almost done</p>

<p>Please click the purchase button to continue</p>
<input type ="submit" name="btsubmit" value= "Purchase"/>

I also have a controller called DomainsController

      [HttpPost]
            public ActionResult PostToPayPal(string item, string amount)
            {
                YippeeYay.Models.PayPal paypal = new Models.PayPal();
                paypal.cmd = "_xclick";
                paypal.business = ConfigurationManager.AppSettings["BusinessAccountKey"];

                bool useSandbox = Convert.ToBoolean(ConfigurationManager.AppSettings["UseSandbox"]);
                if (useSandbox)
                    ViewBag.actionURL = "https://www.sandbox.paypal.com/cgi-big/webscr";
                else
                    ViewBag.actionURL = "https://www.paypal.com/cgi-bin/webscr";

                paypal.cancel_return = System.Configuration.ConfigurationManager.AppSettings["CancelURL"];
                paypal.@return = ConfigurationManager.AppSettings["ReturnURL"];
                paypal.notify_url = ConfigurationManager.AppSettings["NotifyURL"];

                paypal.currency_code = ConfigurationManager.AppSettings["CurrencyCode"];

                paypal.item_name = item;
                paypal.amount = amount;
                return View(paypal);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T23:48:27.253

本节：

```
@using(Html.BeginForm("PostToPayPal", "Home"))
{
  // Form goes in here
} 
```

... 是什么在写你的标签，它需要包含你的提交按钮。目前，您的提交按钮位于此部分**之外**，因此表单中唯一的内容是您的两个隐藏字段。将您的提交按钮移到表单内，它应该可以工作。

# java - JPA/Hibernate - x 实例的标识符已更改异常

> ID：11195892
> 
> 赞同：1
> 
> 时间：2012-06-25T19:19:22.207
> 
> 标签：java, hibernate, jpa, orm

我有一个使用复合键作为主键的 JPA/Hibernate 对象。我正在尝试从数据库中读取对象并进行更新。

假设主键是（id 和 name），并且数据库中存在以下行。

```
1   john   London
2   bob    Birmingham
3   Dave   Kent 
```

如果我使用键 (1,john) 加载对象，那么一切正常。如果我使用相同的主文件加载它，但使用 (1, John) 使用不同的情况，那么我会得到以下异常：

```
org.hibernate.HibernateException: identifier of an instance of Document was altered from com.myPck.test1.documentsPK[ Id=1, msgOwner=john ] to com.myPck.test1.documentsPK[ Id=1, msgOwner=John ]; 
```

加载行后，我使用 JPQL 更新它，但我不更新任何主键列。有趣的是，如果我搜索不存在的行，我不会得到那个异常。仅当我搜索确实存在但键上使用的大小写与数据库中实际不同的行时才会发生这种情况。

可能是什么原因造成的，我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:51:21.273

您能否发布您正在使用的复合键类的代码。我的猜测是你在复合主键类上有一个糟糕的 equals 和 hashCode 方法。

# python - 使用 pyglet 时的纹理边框

> ID：11195903
> 
> 赞同：2
> 
> 时间：2012-06-25T19:20:00.957
> 
> 标签：python, opengl, textures, pyglet

我试图进入 pyglet 和 opengl 并在绘制带有纹理的简单三角形时得出奇怪的结果。绘制三角形时，纹理似乎有黑色边框。我试图改变 min/mag_filter 但对边界没有影响。我在这里错过了什么重要的东西吗？

```
 img = pyglet.image.load('test.png')
    tex = img.get_texture()
    #left triangle
    vert = [0,0,0,100,100,100]
    #right triangle
    vert2 = [200,0,200,100,300,100]
    uv = [0.0,0.0,0.0,1.0,1.0,1.0]
    img.blit(200,200)

    pyglet.gl.glDisable(tex.target)
    pyglet.graphics.draw(3,pyglet.gl.GL_TRIANGLES,('v2f',tuple(vert2)))

    pyglet.gl.glEnable(tex.target)
    pyglet.gl.glBindTexture(tex.target,tex.id)
    pyglet.graphics.draw(3,pyglet.gl.GL_TRIANGLES,('v2f',tuple(vert)),('t2f',tuple(uv))) 
```

![在此处输入图像描述](../Images/22874b628d55e262efbf036d7b621a63.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:05:56.990

很可能它是 pyglet 将您的纹理填充到下一个 2 的幂，并用黑色填充纹理的其余部分而不是拉伸。

这个问题有两种解决方案，我在之前关于 LWJGL 的 SO 问题中回答了这两种方法：[纹理没有正确拉伸。为什么会这样？](https://stackoverflow.com/questions/10568106/texture-doesnt-stretch-properly-why-is-this-happening/10568140#10568140)

# c# - 从 ManagementObjectSearcher 获取 inf 的位置

> ID：11195905
> 
> 赞同：2
> 
> 时间：2012-06-25T19:20:05.763
> 
> 标签：c#, wmi

我正在使用下面的代码来遍历 Windows 中的所有设备驱动程序。我能够找到 INF 名称，但是，我无法找到 INF 位置。任何帮助都很棒。

```
ManagementObjectSearcher searcher = 
            new ManagementObjectSearcher("SELECT * FROM Win32_PnPSignedDriver");
foreach (ManagementObject obj in searcher.Get())
{
    if(obj["DriverProviderName"] != null)
    {
        foreach (PropertyData prop in obj.Properties)
        {
            Console.WriteLine("{0}: {1}", prop.Name, prop.Value);
        }
    }
} 
```

输出：InfName：hal.inf

hal.inf 的位置在哪里？我正在尝试创建一个将备份所有设备驱动程序的应用程序。

Hal.inf 只是一个例子。

物业出口示例：

```
标题    
ClassGuid {4D36E968-E325-11CE-BFC1-08002BE10318}
CompatID PCI\VEN_10DE&DEV_0422&REV_A1
创建类名   
说明 NVIDIA GeForce 8400 GS
设备类显示
设备ID PCI\VEN_10DE&DEV_0422&SUBSYS_C7323842&REV_A1\4&31ADF711&0&0008
设备名称 NVIDIA GeForce 8400 GS
开发加载器   
司机日期 20120515000000.******+***
司机姓名  
DriverProviderName NVIDIA
驱动程序版本 6.14.13.142
友好名称    
硬件 ID PCI\VEN_10DE&DEV_0422&SUBSYS_C7323842&REV_A1
InfName oem25.inf
安装日期
已签名为真
位置 PCI 总线 1，设备 0，功能 0
制造商 英伟达
姓名    
PDO \设备\NTPNP_PCI0021
签名者 Microsoft Windows 硬件兼容性发布者
开始
启动模式   
地位  
系统创建类名
系统名称
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T08:31:57.360

如果记忆对我有帮助，请更正安装驱动程序期间使用的 *.inf 转换为 Windows 的驱动程序存储区，即 oem[0-9]{1,3}.inf 文件，您会在输出中看到该文件。我刚刚使用 devcon 程序找到了我的视频卡 hwid，然后再次使用 devcon 列出了驱动程序文件。

在输出中，您会注意到对 System32/DriverStore 的路径引用。这实际上包含安装期间使用的原始 *.inf 文件。:) 它的 1:1 只是将 nv_disp.inf 与我的 oem#.inf 区分开来。与我在 wmi 和其他方面的经验不同，Devcon 确实为您提供了完整的驱动程序文件列表。

这是我谈论的参考 C:\Windows\System32\DriverStore\FileRepository\nv_disp.inf_amd64_neutral_671aa18aef114cc2\

所以它很简单！抓住你的 HWID | devcon 驱动程序文件 | 清理结果，添加一点点逻辑 | tar old-driver.tar filelist.txt

使用这些备份恢复或做一些有用的事情将是非常不同的事情。每次更新驱动程序时，它都会添加一个新的驱动程序存储文件夹，找出哪个是最新的一点也不难。所以理论上你不需要通过获取一些文件夹统计数据并备份正确的数据来做任何事情。您也可以使用 PnPutil 循环并尝试删除所有 oem*.inf 驱动程序包，它无法删除活动包，因此风险很小，但它可能会稍微清理驱动程序存储。

您可能还对我在 github 上提供的 Geforce Driver Check 脚本感兴趣。

您将需要下载他们的 500meg 驱动程序开发工具包 ISO 并提取 + 重命名两个 devcon 二进制文件（我认为是 devconx64.exe 和 devcon.exe）Devcon 可以执行“设备管理器 GUI”可以从 CMD 行执行的所有操作。

```
$ devcon driverfiles PCI\\VEN_10DE\&DEV_1184
PCI\VEN_10DE&DEV_1184&SUBSYS_37743842&REV_A1\4&2F1C4782&0&0018
    Name: NVIDIA GeForce GTX 770
    Driver installed from C:\Windows\INF\oem8.inf [Section090]. 53 file(s) used by driver:
        C:\Program Files\NVIDIA Corporation\Drs\dbInstaller.exe
        C:\Program Files\NVIDIA Corporation\Drs\nvdrsdb.bin
        C:\Windows\System32\DriverStore\FileRepository\nv_disp.inf_amd64_neutral_671aa18aef114cc2\NvCplSetupEng.exe
        C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\Nvd3d9wrap.dll
        C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\detoured.dll
        C:\Program Files (x86)\NVIDIA Corporation\coprocmanager\nvdxgiwrap.dll
        C:\Program Files\NVIDIA Corporation\coprocmanager\Nvd3d9wrapx.dll
        C:\Program Files\NVIDIA Corporation\coprocmanager\detoured.dll
        C:\Program Files\NVIDIA Corporation\coprocmanager\nvdxgiwrapx.dll
        C:\Program Files\NVIDIA Corporation\license.txt
        C:\Program Files\NVIDIA Corporation\NVSMI\MCU.exe
        C:\Program Files\NVIDIA Corporation\NVSMI\nvdebugdump.exe
        C:\Program Files\NVIDIA Corporation\NVSMI\nvidia-smi.1.pdf
        C:\Program Files\NVIDIA Corporation\NVSMI\nvidia-smi.exe
        C:\Program Files\NVIDIA Corporation\NVSMI\nvml.dll
        C:\Program Files\NVIDIA Corporation\OpenCL\OpenCL.dll
        C:\Program Files\NVIDIA Corporation\OpenCL\OpenCL64.dll
        C:\Windows\system32\DRIVERS\nvlddmkm.sys
        C:\Windows\system32\NvFBC64.dll
        C:\Windows\system32\NvIFR64.dll
        C:\Windows\system32\NvIFROpenGL.dll
        C:\Windows\system32\nvEncodeAPI64.dll
        C:\Windows\system32\nvapi64.dll
        C:\Windows\system32\nvcompiler.dll
        C:\Windows\system32\nvcuda.dll
        C:\Windows\system32\nvcuvenc.dll
        C:\Windows\system32\nvcuvid.dll
        C:\Windows\system32\nvd3dumx.dll
        C:\Windows\system32\nvinfo.pb
        C:\Windows\system32\nvinitx.dll
        C:\Windows\system32\nvoglshim64.dll
        C:\Windows\system32\nvoglv64.dll
        C:\Windows\system32\nvopencl.dll
        C:\Windows\system32\nvumdshimx.dll
        C:\Windows\system32\nvwgf2umx.dll
        C:\Windows\SysWow64\NvFBC.dll
        C:\Windows\SysWow64\NvIFR.dll
        C:\Windows\SysWow64\NvIFROpenGL.dll
        C:\Windows\SysWow64\nvEncodeAPI.dll
        C:\Windows\SysWow64\nvapi.dll
        C:\Windows\SysWow64\nvcompiler.dll
        C:\Windows\SysWow64\nvcuda.dll
        C:\Windows\SysWow64\nvcuvenc.dll
        C:\Windows\SysWow64\nvcuvid.dll
        C:\Windows\SysWow64\nvd3dum.dll
        C:\Windows\SysWow64\nvinit.dll
        C:\Windows\SysWow64\nvoglshim32.dll
        C:\Windows\SysWow64\nvoglv32.dll
        C:\Windows\SysWow64\nvopencl.dll
        C:\Windows\SysWow64\nvumdshim.dll
        C:\Windows\SysWow64\nvwgf2um.dll
        C:\Windows\system32\nvdispco6433193.dll
        C:\Windows\system32\nvdispgenco6433193.dll
1 matching device(s) found.

Device Console Help:
devcon.exe [-r] [-m:\\<machine>] <command> [<arg>...]
-r           Reboots the system only when a restart or reboot is required.
<machine>    Specifies a remote computer.
<command>    Specifies a Devcon command (see command list below).
<arg>...     One or more arguments that modify a command.
For help with a specific command, type: devcon.exe help <command>
classfilter          Add, delete, and reorder class filters.
classes              List all device setup classes.
disable              Disable devices.
driverfiles          List installed driver files for devices.
drivernodes          List driver nodes of devices.
enable               Enable devices.
find                 Find devices.
findall              Find devices, including those that are not currently attached.
help                 Display Devcon help.
hwids                List hardware IDs of devices.
install              Install a device manually.
listclass            List all devices in a setup class.
reboot               Reboot the local computer.
remove               Remove devices.
rescan               Scan for new hardware.
resources            List hardware resources for devices.
restart              Restart devices.
sethwid              Modify Hardware ID's of listed root-enumerated devices.
stack                List expected driver stack for devices.
status               List running status of devices.
update               Update a device manually.
updateni             Manually update a device (non interactive).
dp_add               Adds (installs) a third-party (OEM) driver package.
dp_delete            Deletes a third-party (OEM) driver package.
dp_enum              Lists the third-party (OEM) driver packages installed on this machine. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:50:26.280

要检索有关驱动程序文件本身的信息，请查询该[`Win32_SystemDriver`](http://msdn.microsoft.com/en-us/library/aa394472.aspx)表。驱动程序路径由`PathName`属性给出。

# jquery - jQuery mobile：似乎在链接到新页面之前重新加载当前页面

> ID：11195907
> 
> 赞同：0
> 
> 时间：2012-06-25T19:20:09.600
> 
> 标签：jquery, mobile, jquery-mobile

Jquery 移动新手在这里。

从（开发）jquery 移动主页链接时，当前/主页似乎会在正确的页面加载之前立即重新加载/闪烁。

这个问题似乎出现在我接触过的每个浏览器中，我相信它与有据可查的页面转换闪烁问题（.ui-page { -webkit-backface-visibility: hidden; }）无关。我已经尝试过这个，即使它似乎一开始并不是我的确切问题......而且它没有任何帮助。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:34:32.267

如果我正确解读它，您似乎从主页链接到另一个页面？如果是这种情况，那么您需要指定 href 是外部的：

来自 JQM 文档：

> 没有 Ajax 的链接指向其他域或具有 rel="external"、data-ajax="false" 或目标属性的链接将不会使用 Ajax 加载。相反，这些链接将导致整个页面刷新而没有动画过渡。两个属性（rel="external" 和 data-ajax="false"）具有相同的效果，但语义不同：链接到另一个站点或域时应使用 rel="external"，而 data-ajax=" false" 对于简单地选择域中的页面不通过 Ajax 加载很有用。由于安全限制，框架总是会打开 Ajax 行为之外的外部域的链接。

JQM 希望您在一个 HTML 文件中创建所有页面。然后它通过hrefs根据需要隐藏/显示页面。有一种使用 AJAX 即时加载页面的方法。

如果你想恢复到常规的浏览器/服务器 href 往返，那么你需要在 href 中指定 rel="external" 和/或 data-ajax="false"：

```
<a href="my_external_page.php" data-ajax="false">This is my link</a> 
```

# ios - UITableView 多次加载，我需要帮助 - 我不明白为什么

> ID：11195914
> 
> 赞同：0
> 
> 时间：2012-06-25T19:20:46.460
> 
> 标签：ios, uitableview

这是我针对这个特定视图控制器的所有代码。正如这个问题的标题所述，我看到我的 UITableView 一次又一次地加载了相同的 9 个值。如果我在 connectionDidFinishLoading 中放置一个断点并等待一秒钟，我只会看到一次呈现到表视图的数据。我已经尝试了各种方法来解决这个问题；非常感谢您的帮助。

```
@implementation MasterViewController

@synthesize response;

NSMutableData* receivedData;
NSString* hostName;
NSInteger portNumber = 9999;
NSMutableDictionary* dictionary;
NSInteger maxRetryCount = 5;
int count = 0;

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {    
[receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
NSLog(@"Succeeded! Received %d bytes of data",[data length]);
[receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error { 
NSLog(@"Connection failed! Error - %@ %@",[error localizedDescription],[[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
receivedData = nil;
}

-(void) connectionDidFinishLoading:(NSURLConnection *)connection {

NSError *error = nil;
id result = [NSJSONSerialization JSONObjectWithData:receivedData options:kNilOptions error:&error];

if ([result isKindOfClass:[NSArray class]]) {

    for (NSArray *item in result) {
        NSArray *category = [item valueForKey:@"CategoryName"];
        [dataArray addObject:category];
    }
}
else {
    NSDictionary *jsonDictionary = (NSDictionary *)result;

    for(NSDictionary *item in jsonDictionary)
        NSLog(@"Item: %@", item);
}

connection = nil;
[self.tableView reloadData];

NSLog(@"Finished");
}

-(BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    return YES;
}

- (void)didReceiveMemoryWarning{
[super didReceiveMemoryWarning];
}

- (BOOL)connectionShouldUseCredentialStorage:(NSURLConnection *)connection
{
    return YES;
}

- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {

    NSString* username = @"test";
    NSString* password = @"testPwd";
    NSLog(@"Attempting connection with username: %@", username);
    NSMutableString *loginString = (NSMutableString*)[@"" stringByAppendingFormat:@"%@:%@", username, password];
    NSString *authHeader = [@"Basic " stringByAppendingFormat:@"%@", loginString];
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@:%i%@", hostName, portNumber, @"/api/categories"]];
    NSLog(@"URL: %@", url);

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: url
                                                       cachePolicy:       NSURLRequestReloadIgnoringLocalCacheData  
                                                   timeoutInterval: 1.0]; 
    [request addValue:authHeader forHTTPHeaderField:@"Authorization"];
    [NSURLConnection connectionWithRequest:request delegate:self];

    if ([challenge previousFailureCount] <= maxRetryCount) {
    NSURLCredential *credential = [NSURLCredential credentialWithUser:username password:password persistence:NSURLCredentialPersistenceForSession];
    [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge]; 

    } else {
    [[challenge sender] cancelAuthenticationChallenge:challenge];
    NSLog(@"Failure count %d",[challenge previousFailureCount]);
    }
    }

- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)viewDidLoad
{
[super viewDidLoad];
self.navigationItem.leftBarButtonItem = self.editButtonItem;

UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addNewItem)];
self.navigationItem.rightBarButtonItem = addButton;

self.tableView.delegate = self;
self.tableView.dataSource = self;
}

- (void)addNewItem
{
UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Product" 
                                                 message:@"Enter the new product name" 
                                                delegate:self 
                                       cancelButtonTitle:@"Cancel" 
                                       otherButtonTitles:@"OK", nil];
alert.alertViewStyle = UIAlertViewStylePlainTextInput;

[alert show];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return YES;
}

- (void)insertNewObject:(id)sender
{
if (!_objects) {
    _objects = [[NSMutableArray alloc] init];
}
[_objects insertObject:[NSDate date] atIndex:0];
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [dataArray count];;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
cell.textLabel.text = [dataArray objectAtIndex:indexPath.row];
return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) 
{
    [dataArray removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
} 
else if (editingStyle == UITableViewCellEditingStyleInsert) 
{

}
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"showDetail"]) {
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    NSString *object = [dataArray objectAtIndex:indexPath.row];
    [[segue destinationViewController] setDetailItem:object];
}
}

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
UITextField *textField = [alertView textFieldAtIndex:0];

[dataArray addObject:textField.text];
[self.tableView reloadData];

NSLog(@"Plain text input: %@",textField.text);
NSLog(@"Alert View dismissed with button at index %d",buttonIndex);
}

- (void)viewWillAppear:(BOOL)animated {
self.title = @"Categories";

receivedData = [[NSMutableData alloc] init];

hostName = [[NSString alloc] initWithString:@"12.234.56.123"];

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@:%i%@", hostName, portNumber, @"/api/categories"]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: url cachePolicy: NSURLRequestUseProtocolCachePolicy timeoutInterval: 1.0]; 

NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];

if (connection) {

} else {

}

dataArray = [[NSMutableArray alloc] init];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:54:01.693

willSendRequestForAuthenticaiton 是一个委托方法。然而，在您的委托方法中，您正在生成一个全新的 URL 请求，该请求又由 willSendRequest 委托处理，该委托会生成另一个请求等，从而不断地用数据填充您的 dataArray。

摆脱委托方法中的 url 请求，它应该会为您解决问题。

# objective-c - 带有多个表视图的选项卡式 ios 应用程序

> ID：11195921
> 
> 赞同：1
> 
> 时间：2012-06-25T19:21:28.900
> 
> 标签：objective-c, ios, ipad, uitableview, uitabbarcontroller

我正在使用 XCode 4.2 并在 iPad 5.0 上测试我的构建。

我开始使用 XCode 中的标准选项卡式应用程序构建一个应用程序，然后添加代码以在第一个选项卡内有 2 个 uitableviews。

它可以编译，但表数据不会加载到视图中。

应用委托.h：

```
@interface dmbAppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) UITabBarController *tabBarController;

@end 
```

AppDelegate.m:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[[dmbFirstViewController alloc] initWithNibName:@"dmbFirstViewController" bundle:nil] autorelease];
    UIViewController *viewController2 = [[[dmbSecondViewController alloc] initWithNibName:@"dmbSecondViewController" bundle:nil] autorelease];
    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];
    NSLog(@"Loading first tab view from app delegate...");
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

FirstViewController.h：

```
@interface dmbFirstViewController : UIViewController {

    ReservationsTable *reservationsController;
    WaitlistTable *waitlistController;
    IBOutlet UITableView *reserveTable;
    IBOutlet UITableView *waitlistTable;
} 
```

FirstViewController.m:

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSLog(@"FirstView Controller - View Loading Started");

    [reserveTable setDataSource:reservationsController];
    [waitlistTable setDataSource:waitlistController];

    NSLog(@"FirstView Controller - Loading Table Views..");

    [reserveTable setDelegate:reservationsController];
    [waitlistTable setDelegate:waitlistController];
    reservationsController.view = reservationsController.tableView;
    waitlistController.view = waitlistController.tableView;

    NSLog(@"FirstView Controller - View Loading Finished");
} 
```

这两个表都有一个 .h 和 .m 并实现了标准表方法。我还在第一个视图 nib 文件中添加了 2 个表并将它们链接到文件所有者。

更新： ReserveTable.h：

```
 @interface WaitlistTable : UITableViewController <UITableViewDataSource, UITableViewDelegate>{
        NSMutableArray *waitlistitems;
    } 
```

ReserveTable.m:

```
- (void)viewDidLoad
{
    NSLog(@"View Did Load - Wait List Table");
    waitlistitems = [[NSMutableArray arrayWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"6",@"8",@"9",@"10",@"11",@"12",@"13",@"14",@"15",@"16",@"17",nil] retain];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    NSLog(@"Inside number of section for Wait List table...");
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"Inside numberofRows for Wait List table...");
    // Return the number of rows in the section.
    return [waitlistitems count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Inside cell for row at index path for Wait List table...");
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell...
    cell.textLabel.text = [NSString stringWithFormat:@"1.%@" ,[waitlistitems objectAtIndex:indexPath.row]];    
    return cell;
} 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:58:53.617

我认为在你的`firstViewController`你应该推动意见。假设那`reserveTable`是你的主表，像这样推它

```
[self.view addSubView:reserveTable]; 
```

另外，您是否`ReserveTable.h`将`firstViewController`?

如果是，您应该在那里初始化表。

但是我的建议是转换`firstViewController`in a `tableViewController`，编辑`App Delegat`e 和 the`firstViewController.h`和 m，然后从那里初始化表（甚至添加另一个表）。这样会更容易！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:04:50.690

将您更改`viewDidLoad`为：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    reservationsController = [[ReservationsTable alloc] init];
    waitlistController = [[WaitlistTable alloc] init];

    NSLog(@"FirstView Controller - View Loading Started");

    [reserveTable setDataSource:reservationsController];
    [waitlistTable setDataSource:waitlistController];

    NSLog(@"FirstView Controller - Loading Table Views..");

    [reserveTable setDelegate:reservationsController];
    [waitlistTable setDelegate:waitlistController];

    NSLog(@"FirstView Controller - View Loading Finished");
 } 
```

基本上，你永远不会初始化你的`tableViewControllers`（我猜这是他们两个的名字，我会把他们的名字改成“WaitlistTableViewController”和“ReservationsTableViewController”，但这只是我。）另外，将“tableView”设置为“视图”是不必要的。

或者更好的是，在您的`dmbFirstViewController`.

或者`dmbFirstViewController`像这样使用：

dmbFirstViewController.h：

```
@interface dmbFirstViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> {

    ReservationsTable *reservationsController;
    WaitlistTable *waitlistController;
    IBOutlet UITableView *reserveTable;
    IBOutlet UITableView *waitlistTable;
    NSMutableArray *waitlistitems;
    NSMutableArray *reserveitems;
} 
```

dmbFirstViewController.m：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    waitlistitems = [[NSMutableArray arrayWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"6",@"8",@"9",@"10",@"11",@"12",@"13",@"14",@"15",@"16",@"17",nil] retain];

    NSLog(@"FirstView Controller - View Loading Started");

    [reserveTable setDataSource:self];
    [waitlistTable setDataSource:self];

    NSLog(@"FirstView Controller - Loading Table Views..");

    [reserveTable setDelegate:self];
    [waitlistTable setDelegate:self];

    NSLog(@"FirstView Controller - View Loading Finished");
}

- (void)viewDidAppear:(BOOL)animated
{
    [reserveTable reloadData];
    [waitlistTable reloadData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    NSLog(@"Inside number of section for Wait List table...");
    if(tableView == waitlistTable)
    {
        //Return sections for waitlistTable
        return 1;
    }else{
        //Return sections for reservedTable
        return 1;
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(tableView==waitlistTable)
    {
        NSLog(@"Inside numberofRows for Wait List table...");
        // Return the number of rows in waitlistTable section.
        return [waitlistitems count];
    }else{
        // Return the number of rows in reservedTable section.
        return [reserveditems count];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    if(tableView == waitlistTable)
    { 
        NSLog(@"Inside cell for row at index path for Wait List table...");
        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        }

        // Configure the cell...
        cell.textLabel.text = [NSString stringWithFormat:@"1.%@" ,[waitlistitems objectAtIndex:indexPath.row]];    
        return cell;
    } else {
        //Create cell for reservedTable Cell
        .....
        return cell;
    }
} 
```

你必须完成关于`reservedTable`细胞的部分，我没有那个代码。另外，我猜到了 items 数组`reservedTable`并没有对其进行初始化。

# image-processing - 使用 FFTW 进行图像卷积时内核在哪里居中？

> ID：11195923
> 
> 赞同：6
> 
> 时间：2012-06-25T19:21:29.833
> 
> 标签：image-processing, fft, fftw, convolution

我正在尝试使用 FFTW 进行图像卷积。

起初只是为了测试系统是否正常工作，我执行了 fft，然后执行了逆 fft，并且可以得到完全相同的图像返回。

然后向前迈出一小步，我使用了身份内核（即，内核[0][0] = 1，而所有其他组件都等于 0）。我在图像和内核（都在频域中）之间取了分量乘积，然后做了逆 fft。从理论上讲，我应该能够得到相同的图像。但是我得到的结果与原始图像非常不一样。我怀疑这与我在将内核 fft 进入频域之前将内核居中的位置有关（因为我将“1”放在内核 [0] [0] 中，这基本上意味着我将积极的部分居中在顶部剩下）。谁能告诉我这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:17:40.580

对于每个维度，样本**的索引**应该从 -n/2 ... 0 ... n/2 -1，所以如果维度是奇数，则以中间为中心。如果维度是偶数，则居中，以便在新 0 之前比在新 0 之后多一个样本。

例如 -4, -3, -2, -1, 0, 1, 2, 3 用于宽度/高度 8 或 -3, -2, -1, 0, 1, 2, 3 用于宽度/高度7.

*FFT 是相对于中间的，在它的尺度上有负点。
在内存中，点是 0...n-1，但 FFT 将它们视为 -ceil(n/2)...floor(n/2)，其中 0 是 -ceil(n/2) 和 n- 1 是地板(n/2)*

**单位矩阵**是一个零矩阵，在 0,0 位置（中心 - 根据上述编号）为 1。（在空间域中。）

在频域中，单位矩阵应该是一个常数（所有实数值为 1 或 1/(N*M)，所有虚数值为 0）。

如果您没有收到此结果，则识别矩阵可能需要不同的填充（向左和向下而不是围绕所有边） - 这可能取决于 FFT 实现。

分别居中**每个维度**（这是一个索引居中，实际内存没有变化）。

您可能需要在每个维度上将**图像（居中后）填充**为 2 的整数幂（2^n * 2^m，其中 n 不必等于 m）。

*通过在源图像和目标图像中使用基于中心的索引（例如 (0,0) 到 (0,0)）将现有像素复制到新的更大图像中，相对于 FFT 的 0,0 位置（到中心，而不是角落）进行填充, (0,1) 到 (0,1), (1,-2) 到 (1,-2))*

假设您的 FFT 使用常规浮点单元而不是复杂单元，即使您不需要 2 的整数幂，**复杂图像**的大小也必须为 2*ceil(2/n) * 2*ceil(2/m) （因为它有一半的样本，但样本很复杂）。

如果您的图像有**多个颜色通道**，则首先必须对其进行整形，以便通道在子像素排序中是最重要的，而不是最不重要的。您可以一次性重塑和填充，以节省时间和空间。

不要忘记IFFT之后的**FFTSHIFT**。（交换象限。）
IFFT 的结果是 0...n-1。您必须取像素 floor(n/2)+1..n-1 并将它们移动到 0...floor(n/2) 之前。
这是通过将像素复制到新图像、将 floor(n/2)+1 复制到内存位置 0、将 floor(n/2)+2 复制到内存位置 1、...、n-1 到内存位置来完成的location floor(n/2), 然后 0 到内存位置 ceil(n/2), 1 到内存位置 ceil(n/2)+1, ..., floor(n/2) 到内存位置 n -1。

当您**在频域中相乘时**，请记住样本是复数（一个实数单元，然后一个虚数单元），因此您必须使用复数乘法。

结果可能需要除以 N^2*M^2，其中 N 是填充后 n 的大小（对于 M 和 m 也是如此）。- 您可以通过（a.查看单位矩阵的频域值，b.将结果与输入进行比较。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:26:30.967

我认为您对身份内核的理解可能不正确。一个身份内核应该在 2D 内核的中心有 1，而不是在 0、0 位置。

例如 3 x 3，您的设置如下：

```
1, 0, 0
0, 0, 0
0, 0, 0 
```

它应该是

```
0, 0, 0
0, 1, 0
0, 0, 0 
```

也检查一下

[什么是“无所事事”的卷积核](https://stackoverflow.com/questions/5824704/what-is-the-do-nothing-convolution-kernel)

也看这里，在第 3 页的底部。

[http://www.fmwconcepts.com/imagemagick/digital_image_filtering.pdf](http://www.fmwconcepts.com/imagemagick/digital_image_filtering.pdf)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T19:49:56.987

> 我在频域中取图像和内核之间的分量乘积，然后进行逆 fft。从理论上讲，我应该能够得到相同的图像。

我不认为使用非 fft 内核进行正向变换，然后进行反向 fft 变换应该会导致任何期望恢复原始图像，但也许我只是误解了你在那里想说的话。 ..

# c# - C# 中的（普通） throw 语句会导致异常吗？

> ID：11195925
> 
> 赞同：17
> 
> 时间：2012-06-25T19:21:49.983
> 
> 标签：c#, exception

***问题：*** *C# 中的普通`throw`语句本身会导致新的异常吗？*

* * *

请注意，我问这个问题是*出于好奇*，而不是因为我有任何实际或现实世界的情况很重要。另请注意，我的直觉和经验告诉我答案是“否”，但我希望以某种方式验证该答案（请参阅迄今为止我尝试过的资源）。

这是一些示例代码来说明我的问题：

```
try
{
    int x = 0, y = 1 / x;
}
catch (Exception outerException)
{

    try
    {
        throw;
    }
    catch (Exception innerException)
    {
        // Q: Does this Assert ever fail??
        System.Diagnostics.Debug.Assert(outerException.Equals(innerException));
    }
} 
```

我想知道是否有任何方法可以改变这种情况，从而`Assert`导致失败，而不会触及内部`try/catch`块。

我已经尝试或正在尝试回答这个问题：

*   阅读 MSDN 上的[throw (C# Reference)](http://msdn.microsoft.com/en-us/library/1ah5wsex.aspx)页面 - 没有明确的答案；
*   [检查了C# 语言规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)的第 5.3.3.11 部分——这可能是查找此类信息的错误位置；
*   通过我可以尝试在 throw 语句上触发的异常进行修饰。OutOfMemoryException 浮现在脑海中，但在`throw`.
*   打开 ILDASM 以检查生成的代码。我可以看到它`throw`转换为一条`rethrow`指令，但我不知道去哪里进一步检查该语句是否可以抛出异常。

这是 ILDASM 显示的内部`try`位：

```
.try
{
  IL_000d:  nop
  IL_000e:  rethrow
}  // end .try 
```

所以，总结一下：一个 throw 语句（用于重新抛出异常）本身*会导致*异常吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T10:21:18.440

老实说，理论上断言可能会“失败”（实际上我不这么认为）。

如何？

注意：以下只是我之前对 SSCLI 所做的一些研究的“意见”。

1.  可能会发生[InvalidProgramException](http://msdn.microsoft.com/en-us/library/system.invalidprogramexception%28v=vs.90%29.aspx)。诚然，这是非常不可能的，但理论上是可能的（例如，某些内部 CLR 错误可能导致可抛出对象变得不可用！！！！）。
2.  如果 CLR 没有找到足够的内存来处理“重新抛出”操作，它将抛出 OutOfMemoryException（如果 CLR 的内部重新抛出逻辑不处理像 OutOfMemoryException 这样的“预分配”异常，则需要分配一些内存）。
3.  如果 CLR 在某个其他主机（例如 SQL 服务器甚至您自己的主机）下运行并且主机决定终止异常重新抛出线程（基于某些内部逻辑） ThreadAbortException（在这种情况下称为粗鲁线程中止） ) 将被提出。不过，我不确定 Assert 是否会在这种情况下执行。
4.  自定义主机可能已将升级策略应用于 CLR ( [ICLRPolicyManager::SetActionOnFailure](http://msdn.microsoft.com/en-us/library/ms164395%28v=vs.90%29.aspx) )。在这种情况下，如果您正在处理 OutOfMemoryException，升级策略可能会导致发生 ThreadAbortException（再次粗鲁的线程中止。不确定如果策略指示正常线程中止会发生什么）。
5.  尽管@Alois Kraus 澄清说“正常”线程中止异常是不可能的，但从 SSCLI 研究来看，我仍然怀疑（正常）ThreadAbortException 是否会发生。

编辑：

正如我之前所说，断言在理论上可能会失败，但实际上它是极不可能的。因此，很难为此开发 POC。为了提供更多“证据”，以下是 SSCLI 代码中用于处理`rethow`IL 指令的片段，这些片段验证了我的上述观点。

警告：商业 CLR 可能与 SSCLI 有很大不同。

1.  无效程序异常：

    ```
    if (throwable != NULL)
    {
     ...
    }
    else
    {
        // This can only be the result of bad IL (or some internal EE failure).
        RealCOMPlusThrow(kInvalidProgramException, (UINT)IDS_EE_RETHROW_NOT_ALLOWED);
    } 
    ```

2.  粗鲁的线程中止：

    ```
    if (pThread->IsRudeAbortInitiated())
    {
        // Nobody should be able to swallow rude thread abort.
        throwable = CLRException::GetPreallocatedRudeThreadAbortException();
    } 
    ```

    这意味着如果已启动“粗鲁线程中止”，则任何异常都会更改为粗鲁线程中止异常。

3.  现在最有趣的是，`OutOfMemoryException`. 由于 rethrow IL 指令本质上是重新抛出相同的 Exception 对象（即`object.ReferenceEquals`返回 true），因此 OutOfMemoryException 似乎不可能在重新抛出时发生。但是，以下 SSCLI 代码表明这是可能的：

    ```
     // Always save the current object in the handle so on rethrow we can reuse it. This is important as it
    // contains stack trace info.
    //
    // Note: we use SafeSetLastThrownObject, which will try to set the throwable and if there are any problems,
    // it will set the throwable to something appropiate (like OOM exception) and return the new
    // exception. Thus, the user's exception object can be replaced here.

    throwable = pThread->SafeSetLastThrownObject(throwable); 
    ```

    `SafeSetLastThrownObject`调用 SetLastThrownObject ，如果失败则 raise `OutOfMemoryException`。`SetLastThrownObject`这是来自（添加了我的评论）的片段

    ```
    ...
    if (m_LastThrownObjectHandle != NULL)
    {
       // We'll somtimes use a handle for a preallocated exception object. We should never, ever destroy one of
      // these handles... they'll be destroyed when the Runtime shuts down.
      if (!CLRException::IsPreallocatedExceptionHandle(m_LastThrownObjectHandle))
      {
         //Destroys the GC handle only but not the throwable object itself
         DestroyHandle(m_LastThrownObjectHandle);
      }
    }
    ...

    //This step can fail if there is no space left for a new handle
    m_LastThrownObjectHandle = GetDomain()->CreateHandle(throwable); 
    ```

    上面的代码片段显示可抛出对象的 GC 句柄被销毁（即释放 GC 表中的一个槽），然后创建一个新句柄。由于一个槽刚刚被释放，新的句柄创建将永远不会失败，直到在非常罕见的情况下，一个新线程被安排在正确的时间并消耗所有可用的 GC 句柄。

除此之外，所有异常（包括重新抛出）都是通过[RaiseException](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680552%28v=vs.85%29.aspx) win api 引发的。捕获此异常以准备相应的托管异常的代码本身可以引发`OutOfMemoryException`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T19:24:30.847

> C# 中的普通 throw 语句本身会导致新的异常吗？

根据定义，它不会。的关键`throw;`是保留活动异常（尤其是堆栈跟踪）。

从理论上讲，实现可能会克隆异常，但重点是什么？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T06:33:58.203

我怀疑您缺少的位可能`rethrow`是[ECMA-335](http://www.ecma-international.org/publications/standards/Ecma-335.htm)分区 III 第 4.24 节中的规范：

> **4.24 rethrow——重新抛出当前异常**
> 
> *说明：*
> 重新抛出指令只允许在 catch 处理程序的主体中使用（参见第 I 部分）。它引发了与此处理程序捕获**的相同的异常。**重新抛出不会更改对象中的堆栈跟踪。
> 
> *异常：*
> 抛出原始异常。

（强调我的）

所以是的，看起来你的断言可以保证按照规范工作。（当然这是假设实现遵循规范......）

C# 规范的相关部分是第 8.9.5 节（C# 4 版本）：

> 没有表达式的 throw 语句只能在 catch 块中使用，在这种情况下，该语句会重新抛出当前由该 catch 块处理的异常。

这再次表明原始异常并且*只会*抛出该异常。

（您提到的第 5.3.3.11 节只是在谈论明确的分配，而不是`throw`语句本身的行为。）

当然，这一切都不会使 Amit 的观点无效，这些观点是针对某些超出任一地方规定范围的情况。（当主机应用附加规则时，语言规范很难考虑它们。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T01:35:06.893

您的断言永远不会失败，因为重新抛出和断言之间没有代码。如果您捕获异常并导致另一个异常，则异常更改的唯一方法 - 例如。通过在你的 catch 子句中有错误的代码或“抛出新的”，。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-14T09:09:54.713

在 64 位平台上结合递归平原`throw`很容易引起。`StackOverflowException`

```
class Program
{
    // expect it to be 10 times less in real code
    static int max = 455;

    static void Test(int i)
    {
        try {
            if (i >= max) throw new Exception("done");
            Test(i + 1);
        }
        catch {
            Console.WriteLine(i);
            throw;
        }
    }

    static void Main(string[] args)
    {
        try {
            Test(0);
        }
        catch {
        }
        Console.WriteLine("Done.");
    }
} 
```

在控制台中：

```
...
2
1
0

Process is terminated due to StackOverflowException. 
```

可以在[这里](http://blogs.msdn.com/b/curth/archive/2008/07/29/stackoverflowexception-and-ironpython.aspx)找到一些解释。

# ruby-on-rails - 在 Mac OS 10.5.8 中为回形针 gem 安装 ImageMagick

> ID：11195929
> 
> 赞同：4
> 
> 时间：2012-06-25T19:22:25.437
> 
> 标签：ruby-on-rails, unix, gem, imagemagick, paperclip

我已经尝试安装 ImageMagick 一周了。我在网上找到的文档是矛盾的，我没有找到安装和配置它的正确方法。而且我不是 UNIX 专家，所以我不知道如何正确使用环境路径。

我的软件版本是：所以：Mac OS 10.5.8、ImageMagick v6.7.7、Paperclip v3.1.2、Rails v3.0

一些提示：

~/.profile 文件：

```
export PATH=$HOME/Users/mac_name/.gem/ruby/1.8/bin:$PATH
export PATH="/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:$PATH"
export MAGICK_HOME="/Users/mac_name/ImageMagick-6.7.7"
export DYLD_LIBRARY_PATH=$MAGICK_HOME/lib/
export DISPLAY=:0 
```

我使用安装脚本安装 ImageMagick。它位于：Users/mac_name/ImageMagick-6.7.7 现在我认为它已安装但回形针它不运行。我仍然有错误：“照片无法运行`identify`命令。请安装 ImageMagick”。

```
$ echo $MAGICK_HOME 
```

它返回：“/Users/mac_name/Users/mac_name/ImageMagick-6.7.7”（我不知道为什么重复“Users/mac_name”）

我需要帮助。任何其他不需要 ImageMagick 的宝石？我对这件事彻底生气了……

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T19:30:04.717

我会建议你安装[自制软件](https://brew.sh/)，然后使用它安装 imagemagick。

要安装 Homebrew，请检查[此](https://github.com/Homebrew/legacy-homebrew). 基本上只需将其复制粘贴到您的终端上：

```
 /usr/bin/ruby -e "$(/usr/bin/curl -fsSL https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb)" 
```

现在安装 imagemagick 运行这个命令：

```
 brew install imagemagick 
```

如果您遇到任何问题，请让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T16:22:33.660

Mohit 有一个很好的答案，但链接现在似乎已损坏，因此 请[查看 http://brew.sh 上的 Homebrew 主页](http://brew.sh) 或 [https://github.com/mxcl/homebrew 上的 Github 页面](https://github.com/mxcl/homebrew)

两者都有正确安装的良好说明

# c# - 使用 CSLA.NET 实现工厂模式

> ID：11195930
> 
> 赞同：1
> 
> 时间：2012-06-25T19:22:29.033
> 
> 标签：c#, csla

我想在 CSLA 中实现工厂模式。我可以使用抽象基类或抽象接口。我决定使用抽象类，只是因为我具有某些通用功能，例如保存到存储、从存储中检索和删除记录。此外，一些适用于所有已实现对象的属性。

C# 只允许从一个类继承，所以我可以使用 BusinessBase 或抽象类。我还希望具体类型有自己的一套业务规则。CSLA 如何做到这一点？

如果我执行下面列出的操作，抽象类和具体类中的规则都会被触发吗？

一些代码...

抽象类：

```
public class Form : BusinessBase<Form> {
   private static PropertyInfo<string> FormNameProperty = RegisterProperty<string>(c => c.FormName);
   public string FormName
   {
      get { return GetProperty(FormNameProperty); }
   }

   public abstract void LoadContent();

   protected override void AddBusinessRules()
   {
      // business rules that are commmon for all implementations
   }
} 
```

具体实施：

```
public class FormA : Form {
   private static PropertyInfo<string> FirstNameProperty = RegisterProperty<string>(c => c.FirstName);
   public string FirstName
   {
      get { return GetProperty(FirstNameProperty); }
   }

   public override void LoadContent(){
      // some custom code
   }

   protected override void AddBusinessRules()
   {
      // business rules that only apply to this class
   }
} 
```

工厂：

```
public static class FormFactory{
   public static Form GetForm(string formanmae) {
      Type formType = GetFormType(formName);
      if(formType == null)
         return null;

      var form = Activator.CreateInstance(formType) as ReferralForm;
         return form;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:39:07.807

您应该使用 Csla DataPortal，而不是使用 Activator.CreateInstance。

```
var form = (Form)Csla.DataPortal.Create(formType, new Csla.Server.EmptyCriteria); 
```

这样，您将使用 Csla 方式创建业务对象，因此应该运行的任何规则都将是。

# css - CSS 空白：nowrap；p标签坏了

> ID：11195936
> 
> 赞同：2
> 
> 时间：2012-06-25T19:22:57.747
> 
> 标签：css, tags, nowrap

所以我有一个 P 标签将一些文本组合在一起，这样它就不会离开盒子，所以看起来不错，但是当我添加 white-space: nowrap; （为了使水平溢出）它打破了这一切，现在它只是走出它的盒子，无法找到解决这个问题的方法。

**添加了更新代码**

```
#content {
    width:90%;
    height:450px;
    overflow-x:scroll;
    overflow-y:hidden;
    margin:auto;
    white-space: nowrap;
}

#picturePost {
    background:url(images/picture_post.png) no-repeat;
    width:252px;
    height:430px;
    padding-top:25px;
    padding-left:20px;
    padding-right:20px;
    padding-bottom:25px;
    display:inline-block;
} 
```

然后我只是将picturePost div 放入内容div 中几次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:25:54.583

white-space no wrap 属性正是意味着文本不会换行。因此，如果您的字符串比容器 p 标签长，它将延伸到它之外。这是适当的行为，除非我理解你的问题是错误的。也许我们代码看一些代码？

**添加代码后编辑**

这就是你要找的吗？[http://jsfiddle.net/NUZyp/2/](http://jsfiddle.net/NUZyp/2/)

# sql - 可以优化此 SQL 查询以更快地运行吗？

> ID：11195937
> 
> 赞同：4
> 
> 时间：2012-06-25T19:23:06.900
> 
> 标签：sql, sql-server-2008, tsql, optimization

我有一个需要很长时间才能完成的 SQL 查询（对于 SQL Server 2008 R2）。我想知道是否有更好的方法来做到这一点？

```
SELECT @count = COUNT(Name)
FROM Table1 t
WHERE t.Name = @name AND t.Code NOT IN (SELECT Code FROM ExcludedCodes) 
```

表 1 中有大约 9000 万行，并按名称和代码进行索引。ExcludedCodes 中只有大约 30 行。

这个查询在一个存储过程中，被调用了大约 40k 次，完成该过程的总时间是 27 分钟。我相信这是我最大的瓶颈，因为它查询的行数和次数很多它做到了。

因此，如果您知道优化它的好方法，将不胜感激！如果它不能被优化，那么我想我会坚持 27 分钟......

**编辑**

我将时间更改`NOT IN`为`NOT EXISTS`10:59，因此仅此一项对我来说就是一个巨大的收获。我仍然会尝试按照下面的建议执行 group by 语句，但这需要完全重写存储过程并且可能需要一些时间......（正如我之前所说，我不是最擅长 SQL，但它正在开始在我身上成长。^^)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:39:24.980

除了让查询本身更快响应的变通方法之外，您是否考虑过在表中维护一个列来说明它是否在这个集合中？它需要大量维护，但如果`ExcludedCodes`表不经常更改，那么进行维护可能会更好。例如，您可以添加一个 BIT 列：

```
ALTER TABLE dbo.Table1 ADD IsExcluded BIT; 
```

将其设为 NOT NULL 并默认为 0。然后您可以创建过滤索引：

```
CREATE INDEX n ON dbo.Table1(name)
  WHERE IsExcluded = 0; 
```

现在您只需更新表一次：

```
UPDATE t
  SET IsExcluded = 1
  FROM dbo.Table1 AS t
  INNER JOIN dbo.ExcludedCodes AS x
  ON t.Code = x.Code; 
```

并且正在进行中，您必须使用两个表上的触发器来维护它。有了这个，您的查询变为：

```
SELECT @Count = COUNT(Name)
  FROM dbo.Table1 WHERE IsExcluded = 0; 
```

**编辑**

至于“NOT IN 比 LEFT JOIN 慢”，这是我仅在几千行上执行的简单测试：

![在此处输入图像描述](../Images/1a97cf3050f7f6d027af19dd6fc3d002.png)

**编辑 2**

我不确定为什么这个查询不会做你所追求的，并且比你的 40K 循环更有效率：

```
SELECT src.Name, COUNT(src.*)
  FROM dbo.Table1 AS src
  INNER JOIN #temptable AS t
  ON src.Name = t.Name
  WHERE src.Code NOT IN (SELECT Code FROM dbo.ExcludedCodes)
  GROUP BY src.Name; 
```

或 LEFT JOIN 等价物：

```
SELECT src.Name, COUNT(src.*)
  FROM dbo.Table1 AS src
  INNER JOIN #temptable AS t
  ON src.Name = t.Name
  LEFT OUTER JOIN dbo.ExcludedCodes AS x
  ON src.Code = x.Code
  WHERE x.Code IS NULL
  GROUP BY src.Name; 
```

我会在不到 27 分钟的时间内将钱花在其中任何一个查询上。我什至建议按顺序运行*这两个*查询将比您需要 27 分钟的一个查询快得多。

最后，您可能会考虑使用索引视图。我不知道您的表结构以及您是否违反任何限制，但值得调查恕我直言。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T19:32:16.390

你说这被调用了大约 40K 次。为什么？它在游标中吗？如果是这样，你真的需要一个光标。你不能把你想要的 @name 值放在一个临时表中并索引它然后加入它吗？

```
select t.name, count(t.name) 
from table t
join #name n on t.name = n.name 
where NOT EXISTS (SELECT Code FROM ExcludedCodes WHERE Code = t.code)
group by t.name 
```

这可能会在一个查询中为您提供所有结果，并且几乎可以肯定比 40K 单独查询要快。当然，如果您需要计算所有名称，那就更简单了

```
select t.name, count(t.name) 
    from table t
NOT EXISTS (SELECT Code FROM ExcludedCodes WHERE Code = t
group by t.name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T19:27:30.897

`NOT EXISTS`通常性能优于`NOT IN`，但您应该在系统上对其进行测试。

```
SELECT @count = COUNT(Name)
FROM Table1 t
WHERE t.Name = @name AND NOT EXISTS (SELECT 1 FROM ExcludedCodes e WHERE e.Code = t.Code) 
```

在不了解您的查询的更多信息的情况下，很难提供具体的优化建议（即适合复制/粘贴的代码）。它真的需要运行 40,000 次吗？如果可行的话，听起来您的存储过程需要返工。您可以在 proc 开始时执行上述一次并将结果插入临时表中，这可以保留索引`Table1`，然后加入该表而不是运行此查询。

这个特定的位甚至可能不是让您的查询运行 27 分钟的瓶颈。例如，您是在这 9000 万行上使用游标，还是在`WHERE`子句中使用标量值 UDF？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T19:31:33.950

您是否考虑过执行一次查询并将数据填充到表变量或临时表中？就像是

```
insert into #temp (name, Namecount)
values Name, Count(name)
from table1 
where name not in(select code from excludedcodes)
group by name 
```

并且不要忘记，只要排除代码表有些静态，您就可以使用过滤索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T19:31:56.593

开始评估执行计划。哪个是计算最重的部分？关于两个表之间的关系，在索引列上使用 JOIN：索引将优化查询执行。

# html - 放大或缩小时复选框保持相同大小

> ID：11195939
> 
> 赞同：1
> 
> 时间：2012-06-25T19:23:11.487
> 
> 标签：html, css

我有一个复选框，当我完全退出时，它仍然保持与正常 100% 缩放时相同的大小。我希望它与缩放成比例，所以当我缩小时它会变小并且不会覆盖其他所有内容。

# excel - Excel 中的 VLOOKUP 问题，#Value

> ID：11195940
> 
> 赞同：0
> 
> 时间：2012-06-25T19:23:11.750
> 
> 标签：excel, null, vlookup

我有 Excel 文件，其中数据会自动输入到不同的工作表中。我正在尝试开发一个新工作表来显示其他一些工作表中的一些重要信息。我完成了工作表上的大部分单元格，但有两个给我带来了一些问题。问题是我正在使用 VLOOKUPS/ISERROR 和 VLOOKUPS/ISERROR。我的问题是，当我们结合起来分离没有结果的答案时。我想知道当 VLOOKUPS/ISERROR 语句中的一个或两个为假时，是否有办法阻止它显示“#VALUE！”。

下面是我用于单元格的公式的副本，下面是我将收到的数据的示例。

> =IF(ISERROR(VLOOKUP(22, ChargingData!$B$31:$I$41,2, FALSE)),"",VLOOKUP(22, ChargingData!$B$31:$I$41,2, FALSE)/2000) + IF(ISERROR(VLOOKUP(33, ChargingData!$B$31:$I$41,2, FALSE)),"",VLOOKUP(33, ChargingData!$B$31:$I$41,2, FALSE)/2000)
> 
> =IF(ISERROR(VLOOKUP(23, ChargingData!$B$31:$I$41,2, FALSE)),"",VLOOKUP(23, ChargingData!$B$31:$I$41,2, FALSE)/2000) + IF(ISERROR(VLOOKUP(33, ChargingData!$B$31:$I$41,2, FALSE)),"",VLOOKUP(33, ChargingData!$B$31:$I$41,2, FALSE)/2000)

表数据

```
33  65456            868931           654964             989872
23          65685    456331           6568     789911    65464
22          35468             84213   654987             633314 
```

我想知道是否有人可以帮助我阻止表格显示“#VALUE！” 信息。如果任何单元格中没有任何内容，我想显示“”而不是该消息，如果任何必要的单元格中有数据，则显示正确的信息。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:49:52.093

试试这个（我的括号可能有点偏）：

```
=IF(Or(ISERROR(VLOOKUP(23, ChargingData!$B$31:$I$41,2, FALSE),ISERROR(VLOOKUP(33, ChargingData!$B$31:$I$41,2, FALSE))),"",(VLOOKUP(23, ChargingData!$B$31:$I$41,2, FALSE)/2000) + (VLOOKUP(33, ChargingData!$B$31:$I$41,2, FALSE)/2000))) 
```

分解它：

*如果任一 vLookups 错误*

```
=IF(Or(ISERROR(VLOOKUP(23, ChargingData!$B$31:$I$41,2, FALSE),ISERROR(VLOOKUP(33, ChargingData!$B$31:$I$41,2, FALSE))) 
```

*返回空白*

```
,"", 
```

*否则，返回第一个 Vlookup / 2000 + 第二个 Vlookup / 2000*

```
(VLOOKUP(23, ChargingData!$B$31:$I$41,2, FALSE)/2000) + (VLOOKUP(33, ChargingData!$B$31:$I$41,2, FALSE)/2000))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:26:15.933

我碰巧注意到有关数据如何进入的一些事情。不知何故，数据以字符串字符而不是通用字符的形式出现，因此 VLOOKUP 开头的“”。听取 Barry Houdini 的建议，如果 VLOOKUP 表为空/缺失，我将 VLOOKUP 的 return "" 替换为返回 0。如果返回 0，我添加了额外的 IF 语句以显示空白。

下面是我用于单元格的新函数：

> =IF(IF(ISERROR(VLOOKUP("23", ChargingData!$B$31:$I$41,2, FALSE)),0,VLOOKUP("23", ChargingData!$B$31:$I$41,2, FALSE) )/2000)+ IF(ISERROR(VLOOKUP("33", ChargingData!$B$31:$I$41,2, FALSE)),0,VLOOKUP("33", ChargingData!$B$31:$I$41,2 , FALSE)/2000)<>0,IF(ISERROR(VLOOKUP("23", ChargingData!$B$31:$I$41,2, FALSE)),0,VLOOKUP("23", ChargingData!$B$31: $I$41,2, FALSE)/2000)+ IF(ISERROR(VLOOKUP("33", ChargingData!$B$31:$I$41,2, FALSE)),0,VLOOKUP("33", ChargingData!$B $31:$I$41,2, 错误)/2000),"")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-31T02:36:01.763

尝试这个：

```
=numbervalue(ifna(VLOOKUP(23, ChargingData!$B$31:$I$41,2, FALSE),0))/2000+ 
 numbervalue(ifna(VLOOKUP(33, ChargingData!$B$31:$I$41,2, FALSE),0)) 
```

`numbervalue()`将字符串更改为数字 ("" => 0) `ifna()`如果未找到值，则返回 0

# android - 在活动之间切换：不要隐藏以前的活动

> ID：11195941
> 
> 赞同：8
> 
> 时间：2012-06-25T19:23:11.670
> 
> 标签：android, animation, android-activity

这里的问题相当简单，但我似乎找不到已经问过这个问题的人。很可能没有使用正确的关键字。

无论如何，这是我的场景：

我正在启动一项新活动，在该活动中显示 Web 视图。我调用了 overridePendingTransition 以便在切换到新活动时获得我想要的动画，它工作正常（至少，动画部分工作正常）。但是，有几件事会影响效果。

我想要的是让 webview 从底部滑过上一个活动，当用户按下回时，它应该滑出站点。第二部分就像一个魅力，但第一部分并不是我想要的。

触发新活动后，旧活动立即被隐藏，取而代之的是黑色，因此看起来 web 视图在黑色上滑动。我想让它把之前的活动留在后台而不是隐藏它，所以 webview 会滑过它。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T16:01:44.473

我来这里是为了寻找同样的东西，但目前的答案没有帮助。我希望这会有所帮助，在提出问题四个月后！

在我看来，这是由于 Android 平台中的一个错误，因为：

*   仅当 exitAnim 为 0 时才会发生，
*   它只发生在“翻译”元素上。'alpha' 元素（淡入、淡出）工作正常。

这是我的解决方法：

```
@Override
protected void onResume() {
    overridePendingTransition(R.anim.mu_slide_in_left, R.anim.mu_no_anim);
    super.onResume();
}

@Override
protected void onPause() {
    overridePendingTransition(0, R.anim.mu_slide_out_right);
    super.onPause();
} 
```

`mu_no_anim.xml`在哪里

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
   android:interpolator="@android:anim/accelerate_interpolator"
   android:fromAlpha="1.0" android:toAlpha="1.0" android:duration="100000" /> 
```

因此，这是通过指定可靠的 alpha 机制在 100 秒内将其从 alpha 1 淡化到 alpha 1 来强制传出活动保持可见 - 换句话说，只需使其完全可见。

解决方法并不完全完美。例如，如果您的新 Activity 是从 Dialog 调用的，则 Dialog 看起来好像在 Activity 滑入到位时被关闭 - 但在关闭该 Activity 后它会再次返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-07T13:20:05.390

我有一个类似的问题，即使用 overridependingtransition 从一个活动滑动过渡到另一个活动时出现黑屏。我按照下面的方式，它工作

1）在anim文件夹中创建了一个noanim.xml

```
 <?xml version="1.0" encoding="utf-8"?>

   <translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_longAnimTime"
    android:fromYDelta="0%p"
    android:toYDelta="0%p" /> 
```

并使用

```
overridePendingTransition(R.drawable.lefttorightanim, R.anim.noanim); 
```

第一个参数作为我的原始动画，第二个参数是退出动画作为我的虚拟动画

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:57:12.270

创建实现所需效果的自定义过渡动画 XML 资源文件，并在启动下一个 Activity 之前调用 Activity.overridePendingTransition。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T19:40:01.717

它可能很慢，但是您是否尝试过为活动使用不同的主题？

看看**[这个](http://developer.android.com/reference/android/R.style.html#Theme_Translucent)**。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-06T20:19:52.900

您可以向进入活动的主题添加一个属性，而不是使用延迟退出动画，以使窗口半透明 - 这样您就可以看到前一个活动。

```
<style name="EnteringActivity.Theme" parent="@android:style/Theme.Holo.Light">
    [...]
    <item name="android:windowIsTranslucent">true</item>
    [...]
</style> 
```

注意：如果您正在创建对话活动，您还需要活动主题的以下属性：

```
<item name="android:windowBackground">@color/transparent</item> 
```

# php - CakePHP :: afterFind() 与非主模型

> ID：11195942
> 
> 赞同：0
> 
> 时间：2012-06-25T19:23:13.140
> 
> 标签：php, cakephp, model, cakephp-2.0

在这个应用程序中，我有一个 Rental 模型，它是应用程序的核心。租赁与客户、位置和设备相关联。在几乎所有情况下，我都想“清理”结果，只留下当前处于活动状态的出租。但是，我不想在所有情况下都这样做，那么标记它的最佳方法是什么？

我目前的想法是添加一个模型变量 ( `$cleanRentals = true`)，并在必要时将该标志设置为 false，并在`afterFind()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:40:34.960

像这样在 Cake 中的关联模型上保护/清理数据显示了 Cake 的模型系统缺乏的地方。它变得混乱。

但我会考虑创建一个自定义查找器，例如

```
$this->Rental->findActive(); 
```

然后，当您只想获得有效租金时，您可以使用它。

查看更多： [http ://book.cakephp.org/2.0/en/models/retrieving-your-data.html#creating-custom-find-types](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#creating-custom-find-types)

# iphone - 以编程方式将属性添加到 Core Data

> ID：11195951
> 
> 赞同：0
> 
> 时间：2012-06-25T19:23:54.057
> 
> 标签：iphone, cocoa-touch, core-data, sync

我正在开发一个使用核心数据的应用程序。在我的应用程序中，我希望每个用户都拥有相同的数据库。所以我希望所有设备共享相同的核心数据对象。

为了做到“同步”，我找到了一个关于[这个答案](https://stackoverflow.com/a/5164878)的演示文稿，讨论了这个问题。在演示文稿中，建议我为 Core Data 中的每个对象添加“creationDate”和“modificationDate”等属性。

为此，我尝试将 NSManagedObject (MyManagedObject) 子类化，以便将这些属性添加到核心数据中的每个对象。我还创建了我拥有的每个 NSManagedObject 子类（由模型自动生成）子类 MyManagedObject。

问题是我添加到 NSManagedObject 子类中的属性不会保留在数据库中。因此，当我关闭并重新打开应用程序时，“creationDate”变为（null）。

这是我的一些代码（标题）：

```
@interface MyManagedObject : NSManagedObject
@property (nonatomic, retain) NSDate * modificationDate;
@property (nonatomic, retain) NSDate * creationDate;
@end 
```

这是 .m 文件：

```
@implementation MyManagedObject
@synthesize modificationDate, creationDate;
-(void)willSave {
    [super willSave];    
    self.modificationDate = [NSDate date];
}
-(void)awakeFromInsert {
    [super awakeFromInsert];
    [self setCreationDate:[NSDate date]];
    [self setModificationDate:[NSDate date]];
} 
```

任何帮助、指导或阅读将不胜感激。我已经为此苦苦挣扎了一段时间。我需要一种比将这些属性添加到模型中的每个实体更好的方法。提前致谢

PS：我打算在服务器中有一个“真相数据库”（一个 .sqlite 文件）。同步将在服务器和 iPhone 之间进行。如演示文稿中建议的那样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:00:59.360

如果您`MyManagedObject`在数据模型设计工具中创建并将其注册为该工具内其他实体的父级，这应该几乎可以工作。（我怀疑你没有这样做是因为`@synthesize`声明......那些通常是`@dynamic`。）

要解决的另一个问题是，您必须在再次更改对象之前测试您是否已经更改了对象的属性（`self.modificationDate`在您的情况下），否则`willSave`会继续被调用。在第一次更改后设置并清除的 BOOL 值`didSave`是一个简单的测试。

# excel - 如何将图表最小比例设置为特定值

> ID：11195953
> 
> 赞同：1
> 
> 时间：2012-06-25T19:23:58.750
> 
> 标签：excel, charts, scale, vba

如何将最小比例设置为特定的单元格值，其中单元格不是恒定的。即：如果必须将最小比例设置为 45，并且值 45 并不总是出现在单元格中`D14`？

`.Axes(xlCategory, xlPrimary).MinimumScale = 45 ' Constant value`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:55:12.800

要将最小比例设置为范围内的最小值，请使用该`MIN`函数。现在，由于范围不在具有图表的工作簿中，而是在您打开的 csv 文件中，因此您必须完全限定范围

为此，请声明一个范围对象，然后将其设置为相关范围

```
Dim Rng As Range

'
'~~> Rest of your code
'
Set wsTemp = wbTemp.Sheets(1)
Set Rng = wsTemp.Range("D3:D30")

'
'~~> Rest of your code
'
.Axes(xlCategory, xlPrimary).MinimumScale = Application.WorksheetFunction.Min(Rng) 
```

高温高压

# django - 通过 URL 传递序列化对象

> ID：11195970
> 
> 赞同：1
> 
> 时间：2012-06-25T19:24:45.137
> 
> 标签：django, security, django-urls

我正在序列化/腌制一个对象，将其编码为压缩字符串，并将其作为 URL 中的参数传递给下一页以进行反序列化。我的网络应用没有数据库；我这样做是因为该应用程序从外部 Web 服务获取数据，这些服务速度很慢。

这是可接受的做法吗？这是安全风险吗？有没有办法让这个安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:51:04.570

如果您需要在视图之间共享数据，请使用会话进行。这就是会话的目的。会话信息默认存储在数据库中，但并非*必须*如此，您也可以使用文件系统、一些缓存系统（memcache、Redis 等）或签名 cookie（仅限 Django 1.4+）。

看：

*   [配置会话引擎](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs#configuring-the-session-engine)
*   [如何使用会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:04:38.523

> 这是安全风险吗？

如果您使用的序列化是pickle，那么是的，这绝对是一个问题，正如[文档](http://docs.python.org/library/pickle.html)中提到的那样：

> *永远不要解开从不受信任或未经身份验证的来源收到的数据*

使用一种仅用于保存安全静态值的序列化形式（例如 JSON）。

您可以通过使用 MAC 签名来保护发送到客户端的值不被篡改，例如使用[hmac](http://docs.python.org/library/hmac.html#module-hmac)。您可能需要考虑向 MAC 签名数据添加其他属性，例如用户名或时间戳，以防止签名数据块可以自由互换，如果这对您试图实现的任何完整性构成威胁。

如果您还需要保护该值不被客户端用户查看和解释，除了签名之外，您还需要使用加密算法（例如 AES - 不是 stdlib 的一部分）。

（我个人仍然不会相信 MAC 签名和加密的 pickle。即使它需要泄露服务器端的秘密才能使其可利用，但您并不真的希望信息泄露漏洞升级为任意-代码执行漏洞，这就是pickle所代表的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:28:45.677

这不是最佳选择，因为 URL 参数字段将显示在服务器日志中。您可能最好使用 POST 方法发送数据，或者更好的是，创建一个基本数据库（如果您无权访问其他任何内容，请使用 Sqlite）并将 ID 传递到下一个屏幕。

# javascript - 关闭 jquery thinbox jquery 图像滑块时出现错误

> ID：11195974
> 
> 赞同：0
> 
> 时间：2012-06-25T19:25:00.753
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我在我的asp.net 应用程序中使用Thickbox 3.1（由科迪林德利）。关闭thickbox时，我从文件“jQuery UI Tabs 1.7.2”文件中收到jquery错误，该文件用于在同一父页面上显示图像滑块，错误是：- Microsoft JScript运行时错误：无法获取属性“添加”的值: 对象为空或未定义。

在调试它来自下面的代码时，

```
 a(window).bind("unload", function () 
    {
                p.lis.add(p.anchors).unbind(".tabs");
                p.lis = p.anchors = p.panels = null
            }) 
```

由于“p.anchors”即将为空，但如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:55:32.020

[刚刚得到解决方案的家伙，通过网络链接http://wordpress.org/support/topic/wp-32-thickbox-jquery-ui-tabs-conflict](http://wordpress.org/support/topic/wp-32-thickbox-jquery-ui-tabs-conflict)上的“maxchirkov”付出了巨大的努力。

问题是来自thickbox 和Jquery-UI-tabs 脚本中的“卸载”事件冲突。

在thickbox.compressed.js 中，我更改了：-

```
// $("#TB_window").fadeOut("fast", function () { $('#TB_window,#TB_overlay,#TB_HideSelect').trigger("unload").unbind().remove(); }); 
```

上面的代码： -

```
$("#TB_window").fadeOut("fast", function () { $('#TB_window,#TB_overlay,#TB_HideSelect').unload("#TB_ajaxContent").unbind().remove(); }); 
```

及其现在的工作。

# java - JApplet 键绑定打印屏幕

> ID：11195975
> 
> 赞同：0
> 
> 时间：2012-06-25T19:25:06.960
> 
> 标签：java, swing, key-bindings, japplet, printscreen

我的目标是让 printscreen 键触发我的应用程序关闭（理想情况下，在它可以实际复制到剪贴板之前，但并不重要）我有其他键绑定工作 - 但我不知道如何触发 printscreen。在下面的代码中，如果我用“VK_M”（或其他键）替换“VK_PRINTSCREEN”，字母 m 将关闭应用程序 - 具有我想要的功能。关于如何正确调用 printscreen 的任何建议？或有关如何实现此目的的任何其他想法？

```
 private void bindKeys() {
            JRootPane rp = getRootPane();
            int c = JComponent.WHEN_IN_FOCUSED_WINDOW;
            InputMap inputMap = rp.getInputMap(c);
            ActionMap actionMap = rp.getActionMap();
            inputMap.put(KeyStroke.getKeyStroke("UP"), "UP");
            actionMap.put("UP", upAction);
            inputMap.put(KeyStroke.getKeyStroke("DOWN"), "DOWN");
            actionMap.put("DOWN", downAction);
            inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_PRINTSCREEN,0),"PRINT"); 
            actionMap.put("PRINT", rightAction);
        }
     private AbstractAction upAction = new AbstractAction() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("UP");
            }
        };

        private AbstractAction downAction = new AbstractAction() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("DOWN");
            }
        };

        private AbstractAction rightAction = new AbstractAction() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("PRINT");
                System.exit(0);
            }
        }; 
```

# css - AS3 的 CSS 选择器

> ID：11195976
> 
> 赞同：0
> 
> 时间：2012-06-25T19:25:08.197
> 
> 标签：css, actionscript-3, css-selectors

我正在编写一些 ActionScript 3 应用程序，它需要请求一些 HTML 页面并对其进行分析。我正在获取它并解析为 XML - 到目前为止一切都很好。现在，我必须检查其中的许多不同的东西，如果没有太多的编码和固定的东西，我不知道如何做到这一点。

是否有任何允许在 XML 中快速搜索的 AS3 方法或库，例如通过 class/id 属性，最好使用 css 选择器 - 即`#id .className1 > .className2`等？

这个想法是我想要更多的可维护性而不是优化，因为它有可能在未来涉及许多变化。

那么，是否有任何库或方法可以使查询 xhtml 变得更容易？或者也许是我可以基于我的代码的带有 css 选择器的开源东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:28:21.977

好吧，[E4X](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e72.html)已经内置了……如果您要在文本字段中显示它，CSS 选择器将适用于 HTML 文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T01:08:11.900

好吧，我自己为它写了一个 AS3 库：[http](http://code.google.com/p/actionscript-xml-css-selectors/) ://code.google.com/p/actionscript-xml-css-selectors/ ，它使用 E4X。它是 LGPL 的，如果有人像我一样习惯于 css 选择器，则可以分享。

# c# - 从 WPF 客户端调用 WCF 方法不执行任何操作

> ID：11195979
> 
> 赞同：2
> 
> 时间：2012-06-25T19:25:12.343
> 
> 标签：c#, wpf, wcf

我有一个非常简单的 WCF 服务正在运行，它有一个方法，该方法根据方法的结果返回一个枚举。

我已经通过一个非常简单的控制台应用程序在本地和通过 Internet 到我的服务器测试了这个 WCF 服务，并且两者都工作得很好。但是，一旦我在我的 WPF 应用程序中使用字面上准确的代码调用该方法，就什么也不做。没有例外，没有超时。在 WCF 方法的开头使用断点在本地测试它我发现从 WPF 调用它时它甚至没有达到那么远。

在 app.config 中生成的两个服务引用配置在控制台和 WPF 应用程序之间是相同的。

编辑：本来希望不需要在这里放那么多代码，但我会转储整个事情。

在 WPF 中，代码是从对话框中的按钮调用的。此按钮使用 Caliburn.Micro 触发协程调用。然后在协程的 Execute 方法中调用 WCF 调用。

```
public IEnumerator<IResult> SendReport()
{
    var result = new Coroutines.SubmitNewExceptionIssueResult(Exception, UserNotes, Character);
    yield return result;
    if (result.Result == ErrorReportResult.OK)
        TryClose();
    else
        // TODO
}

public class SubmitNewExceptionIssueResult : IResult
{
    public event EventHandler<ResultCompletionEventArgs> Completed;
    private ErrorReporterClient _client = new ErrorReporterClient();

    private Exception _exception { get; set; }
    private string _userNotes { get; set; }
    private Character _character { get; set; }
    public ErrorReportResult Result { get; private set; }

    public SubmitNewExceptionIssueResult(Exception ex, string userNotes, Character character)
    {
        _exception = ex;
        _userNotes = userNotes;
        _character = character;
    }

    public void Execute(ActionExecutionContext context)
    {
        Result = _client.SendErrorReport(JsonConvert.SerializeObject(_exception, new JsonSerializerSettings
                                         {
                                             TypeNameHandling = TypeNameHandling.All
                                         }),
                                         _userNotes,
                                         JsonConvert.SerializeObject(_character, new JsonSerializerSettings
                                         {
                                             TypeNameHandling = TypeNameHandling.All
                                         }));
        Completed(this, new ResultCompletionEventArgs());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:15:44.903

原因确实是某种线程。虽然对实施不满意，但它现在可以工作。

```
Dispatcher.CurrentDispatcher.Invoke(DispatcherPriority.Normal, new System.Action(() => { /* send report code */ })); 
```

# r - 在 R 中传递大对象的内存有效方式

> ID：11195987
> 
> 赞同：3
> 
> 时间：2012-06-25T19:25:45.937
> 
> 标签：r, function, scope, global-variables, environment-variables

我有一个函数需要访问其父环境中的变量（调用函数的范围）。该变量在内存方面很大，因此我不希望将其按值传递给被调用的函数。除了在全局范围内声明变量之外，还有其他标准方法吗？例如：

```
g <- function (a, b) { #do stuff}

f <- function(x) {
    y <- 3 #but in my program y is very large
    g(x, y)
} 
```

我想访问 y in `g()`。所以是这样的：

```
g <- function (a) { a+y }

f <- function(x) {
    y <- 3 #but in my program y is very large
    g(x)
} 
```

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T19:40:55.413

“在全局范围内声明变量”没有任何优势，根据你的意思，它甚至可能在 R 中是不可能的。你当然可以使用第二种形式。导致对象重复甚至三次复制的动作是赋值。您将需要更详细地描述您试图通过代码说明的内容：`y <- 3`. 在仅访问位于封闭框架中的名为“y”的对象的函数中，通常不需要这样做。

在声明的环境中存储变量有时会提高访问效率，但我的理解是效率是在提高速度方面，因为使用了哈希表。访问环境中的项目的方式与访问列表元素的方式相同：

```
> evn <- new.env()
> evn$a <- rnorm(100000)
> ls(evn)
[1] "a"
> length(evn$a)
[1] 100000 
```

BigMemory 项目可能会为此提供便利：http: [//www.bigmemory.org/](http://www.bigmemory.org/)。它和[Lumley 的 biglm](http://cran.r-project.org/package=biglm)可能对评论中提到的大型数据集有所帮助。

# python - 如何使用 Python 对 SQL IN 子句进行字符串格式化

> ID：11195993
> 
> 赞同：9
> 
> 时间：2012-06-25T19:26:14.697
> 
> 标签：python, mysql, sql, django

我正在尝试创建如下声明：

```
SELECT * FROM table WHERE provider IN ('provider1', 'provider2', ...) 
```

但是，我在 Django API 的字符串格式方面遇到了一些问题。这是我到目前为止所拥有的：

```
profile = request.user.get_profile()
providers = profile.provider.values_list('provider', flat=True) # [u'provider1', u'provider2']
providers = tuple[str(item) for item in providers] # ('provider1', 'provider2')

SQL = "SELECT * FROM table WHERE provider IN %s"
args = (providers,)
cursor.execute(sql,args)

DatabaseError
(1241, 'Operand should contain 1 column(s)') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T19:46:32.387

MySQLdb 有一种方法可以帮助解决这个问题：

**文档**

> string_literal(...) string_literal(obj) -- 将对象 obj 转换为 SQL 字符串文字。这意味着，任何特殊的 SQL 字符都会被转义，并用单引号括起来。换句话说，它执行：
> 
> ```
> "'%s'" % escape_string(str(obj))
> 
> Use connection.string_literal(obj), if you use it at all.
> _mysql.string_literal(obj) cannot handle character sets. 
> ```

**用法**

```
# connection:  <_mysql.connection open to 'localhost' at 1008b2420>

str_value = connection.string_literal(tuple(provider))
# '(\'provider1\', \'provider2\')'

SQL = "SELECT * FROM table WHERE provider IN %s"
args = (str_value,)
cursor.execute(sql,args) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:34:01.067

我特别不喜欢的另一个答案，但适用于您明显的用例：

```
providers = tuple[str(item) for item in providers] # ('provider1', 'provider2')
# rest of stuff...

SQL = 'SELECT * FROM table WHERE provider IN {}'.format(repr(providers))
cursor.execute(SQL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:36:36.880

在将字符串传递给游标对象执行之前，您可能应该进行字符串替换：

```
sql = "SELECT * FROM table WHERE provider IN (%s)" % \
        (','.join(str(x) for x in providers))
cursor.execute(sql) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T19:47:07.253

因此，您需要输入 ID 的字符串：

```
some_vals = '1 3 5 76 5 4 2 5 7 8'.split() # convert to suitable type if required
SomeModel.objects.filter(provider__in=some_vals) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-25T19:30:12.030

```
"SELECT * FROM table WHERE provider IN ({0},{1},{2})".format(*args) #where args is list or tuple of arguments. 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-25T20:23:01.890

试试这个....应该工作。

```
SQL = "SELECT * FROM table WHERE provider IN %s"%(providers)
exec 'cursor.execute("%s")'%(SQL) 
```

# javascript - JavaScript计时器禁用功能

> ID：11195994
> 
> 赞同：-3
> 
> 时间：2012-06-25T19:26:14.813
> 
> 标签：javascript, timer, onclick

我有一个提交按钮触发功能的表单。让我们称之为`ycClick()`。我需要在提交后禁用此功能 30 秒，但我需要提交按钮才能继续工作。我不想禁用整个按钮，只想禁用它触发的功能。（如果用户在 30 秒之前再次点击该按钮，我需要它再次提交，但不执行`ycClick()`第二次。）我尝试了一百万种不同的东西，但无济于事。最后我觉得我快要接近了，但由于某种原因它仍然无法正常工作。当我单击它时，ycClick() 根本没有执行。我究竟做错了什么？这是我得到的：

```
function ycClick(){
    ...
}

function toggleSubmit() {
    if (document.getElementById('ycsubmit').onclick == null) {
        document.getElementById('ycsubmit').onclick = ycClick();
    } else {
        document.getElementById('ycsubmit').onclick = null;
    } 
} 

function timer()
{

  if (count <= 0 || count == null)
  {
  ycClick();
  } else {
  count=30;
  counter=setInterval("timer()",1000);
  count=count-1;
 toggleSubmit();
}
}

<FORM ID="myform">
    <INPUT ID="ycsubmit" TYPE="SUBMIT" ONCLICK="timer();">
</FORM> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:35:39.910

这应该切换按钮：

```
var isEnabled = true;

function toggleSubmit() {
    if (isEnabled) {
        document.getElementById("ycsubmit").onclick = function() {};
    } else {
        document.getElementById("ycsubmit").onclick = ycClick;
    } 

    isEnabled = !isEnabled;
} 
```

此外，当您使用时，`setInterval`您不需要括号或引号`timer`，如下所示：

```
counter=setInterval(timer,1000); 
```

更好的是，如果您想等待 30 秒，只需切换按钮的功能，然后在 30 秒后再次执行此操作。

```
toggleSubmit();
setTimeout(toggleSubmit(), 30000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:28:04.550

详细说明 Incompl 的答案：

设置超时功能时，它使用您提供的值。从技术上讲，您`setTimeout("timer()",1000);`将完全按照您的意愿行事。

超时将评估“timer()”，类似于[Eval()](http://www.w3schools.com/jsref/jsref_eval.asp)函数的工作方式。

`setTimeout(toggleSubmit(), 30000);`但是，如果您不了解/没有经验，那么做一些事情会产生意想不到的结果。超时必须获取您提供的值，在这种情况下，超时将调用 toggleSubmit() 函数期望它返回一个值（它没有）。所以，我们最终只调用了两次函数，超时没有触发函数。

为了纠正这一点，您必须避免在函数名称后包含“()”。当你这样做时，它充当一个变量，它的值是函数内部的实际代码。

这很好地为您提供了该功能的另一个`setTimeout()`功能。`setTimeout(toggleSubmit, 30000, "hello there", "sir");`将调用该`toggleSubmit()`函数并提供参数“hello there”和“sir”。该函数实际上不接受任何参数，因此它不会对它们做任何事情，但知道这是一件好事。