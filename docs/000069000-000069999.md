# StackOverflow 问答 000069000-000069999

# asp.net - Visual Studio basicHttpBinding 和端点问题

> ID：69000
> 
> 赞同：2
> 
> 时间：2008-09-16T02:46:52.087
> 
> 标签：asp.net, wpf, visual-studio, web-services

我在 VS 2008 中有一个 WPF 应用程序，其中包含一些 Web 服务引用。由于各种原因（最大消息大小、身份验证方法），我需要在 WPF 客户端的 app.config 中为服务绑定手动定义一些设置。

不幸的是，这意味着当我更新项目中的服务引用时，我们最终会变得一团糟——多个绑定和端点。Visual Studio 使用数字后缀（即“Service1”作为“Service”的副本）创建新的绑定和端点，导致配置无效，因为项目中的每个服务引用可能只有一个绑定。

这很容易复制 - 只需在解决方案中创建一个简单的“Hello World”ASP.Net Web 服务和 WPF 应用程序，更改 app.config 绑定中的 maxBufferSize 和 maxReceivedMessageSize，然后更新服务引用。

目前我们正在解决这个问题，只需在更新引用后撤消 app.config 上的结帐，但我不禁认为必须有更好的方法！

此外，我们需要手动更改的设置是：

```
<security mode="TransportCredentialOnly">
    <transport clientCredentialType="Ntlm" />
</security> 
```

和：

```
<binding maxBufferSize="655360" maxReceivedMessageSize="655360" /> 
```

我们使用服务工厂类，因此如果这些设置能够以某种方式以编程方式进行设置，那将起作用，尽管这些属性似乎没有被公开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T05:47:35.070

创建一个使用 svcutil 的 .Bat 文件，用于代理生成，该文件具有适合您项目的设置。这很容易。单击 batfile，每当界面更改时生成新的代理文件很容易。

该批次随后可用于自动构建。然后您只需要设置一次 app.config（或 web.config）。我们通常针对不同的环境将不同的配置分开，例如 dev、test prod。

示例（注意换行符）：

```
REM generate meta data
call "SVCUTIL.EXE" /t:metadata "MyProject.dll" /reference:"MyReference.dll"

REM making sure the file is writable
attrib -r "MyServiceProxy.cs"

REM create new proxy file
call "SVCUTIL.EXE" /t:code *.wsdl *.xsd /serializable /serializer:Auto /collectionType:System.Collections.Generic.List`1  /out:"MyServiceProxy.cs" /namespace:*,MY.Name.Space /reference:"MyReference.dll" 
```

:)

//W

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T14:49:24.393

无需更改生成的端点，uou 可以使用您需要的配置添加第二个端点和绑定定义，然后在您的代码中将新端点的名称放入您的服务客户端构造函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T03:24:35.973

不知何故，我更喜欢直接使用 svcutil.exe，而不是使用 Visual Studio 的“添加服务引用”功能：P 这就是我们在 WCF 项目中所做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T05:15:15.443

我同意你的观点，svcutil 绝对是添加和更新服务引用的更高级方法。当“右键单击，更新参考”非常接近只需一步工作时，它只是更多的手动工作。

我想我们可以创建一些批处理文件或其他东西来输出参考代码。即便如此，使用 svcutil 手动签出和更新服务代码可能比仅撤消配置上的签出要多。

无论如何，感谢您的建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T06:27:32.140

我们所做的是检查（从源代码管理）由 svcutil.exe 实用程序自动生成的 app.config 和 *.cs 文件，然后我们运行一个运行 svcutil.exe 的批处理文件来检索服务元数据。完成后，我们重新编译代码，确保它正常工作，然后重新检查更新的 app.config 和 *.cs 文件。这比在 Visual Studio 中使用经常出错的“添加服务引用”要可靠得多。

# .net - 关于在 .NET 中进行翻译/本地化的工具有什么建议吗？

> ID：69005
> 
> 赞同：3
> 
> 时间：2008-09-16T02:48:25.857
> 
> 标签：.net, internationalization

我们使用 Passolo 已经很多年了，但它有点笨重而且价格过高。

它必须能够处理winforms和WPF....

有没有开源替代品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T16:03:18.123

您的问题可以澄清一下您需要帮助的翻译/本地化的哪些方面。您需要帮助从代码中提取字符串吗？追踪代码中不可本地化的 String.Formats 的不当使用（即 mm/dd/yyyy 与 dd/mm/yyyy）？提取资源后帮助管理所有资源？在与翻译人员合作时帮助管理实际的翻译过程？

有很多方面需要考虑。话虽如此，我目前正在评估的一些工具是：

Visual Studio 的多语言插件 [http://www.jollans.com/tiki/tiki-index.php?page=multilangvsnet](http://www.jollans.com/tiki/tiki-index.php?page=multilangvsnet)

Sisulizer [http://www.sisulizer.com/](http://www.sisulizer.com/)

RGreatEx（需要我们使用的 Resharper） [http://www.safedevelop.com](http://www.safedevelop.com)

我还阅读了 Guy Smith-Ferrier 的“.NET Internationalization”，ISBN 0-321-34138-4。他提供了一些他自己设计的可下载工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T03:06:11.790

巧合的是，我今天早上在 MS Channel 9 上看到了这个 - Babylon.NET [http://www.redpin.eu/](http://www.redpin.eu/) 遗憾的是我不能保证它，因为我没有使用它，但看起来像是 Passolo 的合理替代品（嗯，至少它更便宜）。

# flash - Actionscript 3 - 完全移除一个孩子

> ID：69016
> 
> 赞同：3
> 
> 时间：2008-09-16T02:51:15.007
> 
> 标签：flash, actionscript-3, cs3

我有一个对象数组，当另一个对象碰到其中一个时，该对象将被删除。我已经使用 removeChild() 从舞台上删除了它，并使用 splice() 从数组中删除了它，但不知何故，该对象仍在调用它的一些导致错误的函数。我如何完全摆脱一个对象？也没有与之相关的事件侦听器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T18:53:02.543

您需要确保要删除的显示对象：

*   没有在舞台上注册的听众，例如您需要调用`stage.removeEventListener(...)`任何相应的`stage.addEventListener(...)`
*   没有`Event.ENTER_FRAME`事件的监听器
*   不监听任何计时器上的事件
*   `setInterval`不被任何地方设置的计时器调用
*   等等基本上与计时器、舞台、它的父级、加载器和时间线有关的任何事情都可能导致对象逗留而不被删除

因此，当您删除对象`removeChild`并将其从保存它的数组中删除时，还要调用它的`stop`方法以确保它没有播放它的时间线。在该对象上拥有一个名为类似的方法`halt`，`cleanup`或者`finalize`取消注册任何侦听器、停止计时器、超时、间隔等，清除对`null`其父级、舞台或任何不会消失的物体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T05:14:44.337

It sounds like you may be running into a garbage collection issue with the flash player.

A new API has been added to Flash Player 10 that should address this:

unloadAndStop()

Grant Skinner has more info on this on his blog: [http://www.gskinner.com/blog/archives/2008/07/unloadandstop_i.html](http://www.gskinner.com/blog/archives/2008/07/unloadandstop_i.html)

You can grab a beta of Flash Player 10 at:

[http://labs.adobe.com/technologies/flashplayer10/](http://labs.adobe.com/technologies/flashplayer10/)

mike chambers

mesh@adobe.com

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T19:57:13.750

要完全摆脱 AS3 中的对象，您必须将其值设置为 null。垃圾回收将不会有任何问题，因为没有对它的引用。此外，如果对事件侦听器使用“弱引用”可能会有所帮助。创建事件侦听器时，它通常是事件类型和要触发的函数。

```
addEventListener(SomeEvent.EVENT_HAPPEND, onEventHappend); 
```

下面我将说明相同的内容，但参考较弱。

```
addEventListener(SomeEvent.EVENT_HAPPEND, onEventHappend, false, 0, true); 
```

我们知道前两个参数是什么，所以让我们从第三个开始。第三个参数指示事件是在捕获阶段（true）还是冒泡阶段（false，也是默认值）触发 onEventHappened 函数。我提到这个参数的唯一原因是在设置弱引用参数之前需要它。第四个参数是优先级，它指示在侦听同一对象和事件流的同一阶段时哪些事件具有优先级。第五个参数将弱引用设置为 true 或 false，对于这种情况，我们将使用 true，这有助于垃圾收集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T07:18:13.820

有问题的对象是影片剪辑吗？它是否有时间线播放？如果是这样，您需要在删除之前停止它。还要记住，以任何方式存储对对象的引用（尽管最常见的是在事件侦听器中）将防止它被垃圾收集。这包括对函数或子对象的任何引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T22:08:41.170

我会查看 Event.ENTER_FRAME 和 TimerEvent.TIMER 侦听器，确保在删除对象之前将它们无效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T16:01:02.660

Also remember to stop and remove any related Timers when disposing of the removed objects: [BIT-101: Running timers are not garbage collected. Ever.](http://www.bit-101.com/blog/?p=1169)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T13:04:39.620

对于要调用的函数，根据定义，某处必须有侦听器或 setTimeOut，或者时间线必须正在播放。确保删除所有侦听器和对该对象的所有引用。它是一个什么样的对象？

输出窗口或调试器应该向您显示导致不需要的调用的函数调用堆栈。如果您将错误输出粘贴到您的问题中，那么我们将能够为您提供更准确的答案。

# macos - 在 Applescript 中，如何确定菜单项是否被选中/聚焦？

> ID：69030
> 
> 赞同：5
> 
> 时间：2008-09-16T02:53:34.533
> 
> 标签：macos, focus, applescript, menu

我有一个 OS X 10.5 的脚本，它将搜索框集中在任何应用程序的帮助菜单中。我把它放在一个组合键上，就像 Spotlight 一样，我希望它在我运行脚本时切换。所以，我想检测搜索框是否已经专注于输入，如果是，请输入 Esc 而不是单击“帮助”菜单。

这是现在的脚本：

```
tell application "System Events"
    tell (first process whose frontmost is true)
        set helpMenuItem to menu bar item "Help" of menu bar 1
        click helpMenuItem
    end tell
end tell 
```

我正在考虑这样的事情：

```
tell application "System Events"
    tell (first process whose frontmost is true)
        set helpMenuItem to menu bar item "Help" of menu bar 1
        set searchBox to menu item 1 of menu of helpMenuItem
        if (searchBox's focused) = true then
            key code 53 -- type esc
        else
            click helpMenuItem
        end if
    end tell
end tell 
```

...但我收到此错误：

> 无法获得{应用程序“系统事件”的应用程序进程“脚本编辑器”的菜单栏项“帮助”的菜单“帮助”的菜单项 1} 的焦点。

那么有没有办法让我的脚本检测搜索框是否已经聚焦？

* * *

我通过[解决它](https://stackoverflow.com/questions/69391/)解决了我的问题。我仍然不知道如何检查是否选择了菜单项，因此我将保留此主题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-18T07:03:08.223

内置快捷键`Cmd-?`( `Cmd-Shift-/`) 的行为已经像这样了。如果尚未获得焦点，它将键焦点移动到帮助菜单的搜索字段，否则关闭菜单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-11T19:45:39.013

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T04:34:10.847

使用 /Developer/Applications/Utilities/Accessibility Tools/Accessibility Inspector.app 您可以使用内置的辅助功能系统查看鼠标下 UI 元素的属性。请特别注意 cmd-F7 操作以将焦点锁定在元素和刷新按钮上。遗憾的是元素和属性名称与脚本套件中的名称不直接匹配，但您可以查看系统事件的字典或通常猜测正确的术语。

使用它，您可以确定两件事。首先，该`focused`属性不在 上`menu item`，而是在其中有一个`text field`焦点`menu item`。其次，菜单项有一个`selected`属性。

有了这个，我想出了：

```
tell application "System Events"
    tell (first process whose frontmost is true)
        set helpMenuItem to menu bar item "Help" of menu bar 1

        -- Use reference form to avoid building intermediate object specifiers, which Accessibility apparently isn't good at resolving after the fact.
        set searchBox to a reference to menu item 1 of menu of helpMenuItem
        set searchField to a reference to text field 1 of searchBox

        if searchField's focused is true then
            key code 53 -- type esc
        else
            click helpMenuItem
        end if
    end tell
end tell 
```

虽然这仍然行不通。`focused`据我所知，关键事件没有触发，因此文本字段上的属性可能仍然存在问题。

无论如何，您的`click`再次解决方案似乎要容易得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-10-09T20:22:54.887

我刚刚发现需要自己在 Illustrator 中进行一些文件处理。

这是我想出的：

```
tell application "Adobe Illustrator"
activate
tell application "System Events"
    tell process "Illustrator"
        set frontmost to true
        set activeMenuItem to enabled of menu item "Unlock All" of menu "Object" of menu bar item "Object" of menu bar 1
        if activeMenuItem is true then
            tell me to beep 3
        else
            tell me to beep 2
        end if
    end tell
end tell
end tell 
```

完毕。

这没有问题，可用于迭代文件。在我未来的自动化中，我可能不得不多次这样做。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-21T21:11:51.960

This worked for me to toggle between two menu items, based on which one is selected, using the "selected" property:

```
tell application "System Preferences"
    reveal anchor "keyboardTab" of pane "com.apple.preference.keyboard"
end tell
tell application "System Events" to tell process "System Preferences"
    tell pop up button 2 of tab group 1 of window 1
        click
        delay 0.2
        set appControl to menu item "App Controls" of menu 1
        set fKeys to menu item "F1, F2, etc. Keys" of menu 1
        if selected of appControl is true then
            click fKeys
        else
            click appControl
        end if
    end tell
end tell 
```

# ms-access - 在 Access 2007 中绑定表单组合框

> ID：69048
> 
> 赞同：6
> 
> 时间：2008-09-16T02:59:56.843
> 
> 标签：ms-access, data-binding, forms, combobox

例如，我创建了一个 Access 2007 表单，用于显示 Product 表中的 Products。Product 表中的字段之一是与此产品的父类别对应的 CategoryID。

在表单中，CategoryID 需要表示为绑定到 Category 表的组合框。这里的想法非常简单：选择一个新类别应该更新 Product 表中的 CategoryID。

我遇到的问题是选择一个新的类别会更新 Category 表的 CategoryName 而不是更新 Product 表中的 CategoryID。这样做的原因是，似乎组合框必须只绑定到 Category 表的 CategoryName。

如果当前产品的 CategoryID 为 12，它是 Category 表中的 CategoryName“Chairs”，那么会发生什么情况，然后选择一个新值，比如组合框中的“Tables”（CategoryID 13）用新的 CategoryID 更新 12 CategoryName "Tables" 而不是将 Product 表 CategoryID 更新为 13。

如何将类别表绑定到Combox框，以便DataTyxtfield（我希望在Access中存在）是类别名称，DataValueField是CategoryID，只有在所选组合框项更改时，将更新产品的CategoryID ?

**编辑：**请参阅下面接受的答案。我还需要将列数更改为 2，一切都开始正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T03:10:47.067

您需要在组合框的查询中使用这两个值。
例如 SELECT CategoryId, CategoryName FROM CategoryTable... 将组合框绑定到第一列 CategoryId。将组合框的列宽设置为 0in（不需要第二个值，因此没有限制）。这将隐藏包含您选择的值的第一列；所有显示它的描述值，这就是你想看到的。因此，现在当您在组合框中选择不同的选项时，组合框返回的值将是绑定值 CategoryId，而不是 CategoryName。

啊，是的，Alison，对不起，我忘了设置组合框 columncount = 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T02:03:44.443

您还应该检查您的类别表在 CategoryName 字段上有一个主键。您的原始配置应该抛出错误或消息，说明更新将违反密钥。看起来你可以有两个同名的类别。

# caching - 你如何确保你的代码运行时不会因为缓存而改变执行时间？

> ID：69049
> 
> 赞同：4
> 
> 时间：2008-09-16T03:00:00.463
> 
> 标签：caching, time, profiling, processor

在具有硬实时约束的嵌入式应用程序（用 C 语言编写，在 32 位处理器上）中，关键代码（特别是中断）的执行时间需要保持恒定。

您如何确保在代码**执行**中不会引入时间可变性，特别是由于处理器的缓存（无论是 L1、L2 还是 L3）？

请注意，我们关注缓存行为，因为它对执行速度有**巨大**影响（有时超过 100:1 与访问 RAM）。由于特定处理器架构而引入的可变性远不及高速缓存的量级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T03:00:56.077

两种可能：

完全禁用缓存。应用程序将运行较慢，但没有任何变化。

将代码预加载到缓存中并“锁定”。大多数处理器都提供了一种机制来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T03:06:58.807

似乎您指的是 x86 处理器系列，它没有考虑到实时系统，因此无法真正保证恒定时间执行（CPU 可能会重新排序微指令，而不是分支预测和指令预取队列）每次当 CPU 错误地预测条件跳转时都会刷新...)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T04:19:16.217

如果您可以使用硬件，或者与可以使用的人合作，您可以关闭缓存。一些 CPU 有一个引脚，如果将其连接到地而不是电源（或者可能是其他方式），将禁用所有内部缓存。这将提供可预测性，但不会提供速度！

如果做不到这一点，也许在软件代码的某些地方可以编写故意用垃圾填充缓存，因此接下来发生的任何事情都可以保证是缓存未命中。做得对，可以提供可预测性，并且可能只能在某些地方完成，因此速度可能比完全禁用缓存更好。

最后，如果速度确实很重要——仔细设计软件和数据，就像在过去为古老的 8 位 CPU 编程一样——保持它足够小，以使其全部适合 L1 缓存。我总是惊讶于这些天的板载缓存如何比小型计算机上的所有 RAM 都大（mumble-decade）。但这将是一项艰苦的工作，并且需要聪明才智。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T03:09:02.813

这个答案听起来很讽刺，但它旨在让您思考：

> 只运行一次代码。

我这么说的原因是因为太多会使它变得可变，您甚至可能无法控制它。你对时间的定义是什么？假设操作系统决定将您的进程放入等待队列。

其次，由于缓存性能、内存延迟、磁盘 I/O 等原因，您会遇到不可预测性。这些都归结为一件事；有时需要时间将信息输入您的代码可以使用它的处理器。包括获取/解码代码本身所需的时间。

另外，您可以接受多少差异？可能是您对 40 毫秒没问题，或者您对 10 纳秒没问题。

根据应用程序域，您甚至可以进一步掩盖或隐藏差异。多年来，计算机图形人员一直在渲染到屏幕外缓冲区，以隐藏渲染每一帧的时间差异。

传统的解决方案只是尽可能多地删除已知的可变速率事物。将文件加载到 RAM 中，预热缓存并避免 IO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T03:09:19.800

如果您在关键代码“内联”中进行所有函数调用，并尽量减少您拥有的变量数量，这样您就可以让它们具有“注册”类型。这应该可以提高程序的运行时间。（您可能必须以特殊方式编译它，因为如今的编译器倾向于忽略您的“注册”标签）

我假设当您尝试从内存中加载某些内容时，您有足够的内存不会导致页面错误。页面错误可能需要很长时间。

您还可以查看生成的汇编代码，看看是否有很多分支和内存指令可以更改您的运行代码。

如果在您的代码执行中发生中断，则需要更长的时间。您是否启用了中断/异常？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-16T03:07:46.763

了解复杂操作的最坏情况运行时并使用计时器。

# java - 如何在 Eclipse 中为新的 JUnit 测试默认源文件夹？

> ID：69063
> 
> 赞同：40
> 
> 时间：2008-09-16T03:03:12.593
> 
> 标签：java, eclipse, junit, usability

我们的大多数 Eclipse 项目都有多个源文件夹，例如：

*   源/主/java
*   源/测试/java

当您右键单击一个类并选择 New JUnit Test 时，新测试的默认源文件夹是“src/main/java”（可能是项目属性中列出的第一个源文件夹）。

有什么方法可以更改新 JUnit 测试的默认源文件夹，这样当我执行上述操作时，默认情况下会在“src/test/java”文件夹中创建新测试？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-09-16T17:19:40.333

我使用[moreUnit](http://moreunit.sourceforge.net/)，一个 Eclipse 插件来帮助编写单元测试。除其他功能外，它还允许您配置测试的默认源文件夹。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T03:27:57.103

不。

除非您更改插件代码，否则默认源文件夹始终与包含您右键单击的类的文件夹相同（不一定是列出的第一个源文件夹）。我同意，能够改变它会很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-23T01:58:11.900

现在你可以使用我的快速代码eclipse插件了。使用此插件，您可以将测试路径配置为`src/test/java`只有一次。它还具有跳转到单元测试功能。可在以下网址获得：http: [//fast-code.sourceforge.net/](http://fast-code.sourceforge.net/)。

# batch-file - 通过 Windows 批处理文件将长命令拆分为多行

> ID：69068
> 
> 赞同：876
> 
> 时间：2008-09-16T03:04:34.260
> 
> 标签：batch-file, line-continuation

如何在批处理文件中将长命令拆分为多行？

* * *

## 回答 #1

> 赞同：1094
> 
> 时间：2008-09-16T03:06:37.857

`^`只要您记住插入符号和它后面的换行符已完全删除，您就可以用插入符号分解长行。所以，如果应该有一个空格，你要打破线，包括一个空格。*（[更多内容如下。](https://stackoverflow.com/a/21000752/157247)）*

例子：

```
copy file1.txt file2.txt 
```

将被写为：

```
copy file1.txt^
 file2.txt 
```

* * *

## 回答 #2

> 赞同：312
> 
> 时间：2010-12-15T22:48:39.713

插入符号的规则是：

行尾的插入符号，追加下一行，追加行的第一个字符将被转义。

您可以多次使用插入符号，但整行不得超过最大行长度 ~8192 个字符（Windows XP、Windows Vista 和 Windows 7）。

```
echo Test1
echo one ^
two ^
three ^
four^
*
--- Output ---
Test1
one two three four*

echo Test2
echo one & echo two
--- Output ---
Test2
one
two

echo Test3
echo one & ^
echo two
--- Output ---
Test3
one
two

echo Test4
echo one ^
& echo two
--- Output ---
Test4
one & echo two 
```

要抑制下一个字符的转义，您可以使用重定向。

重定向必须在插入符号之前。但是在插入符号之前存在一种对重定向的好奇。

如果您在插入符号处放置一个标记，则该标记将被删除。

```
echo Test5
echo one <nul ^
& echo two
--- Output ---
Test5
one
two

echo Test6
echo one <nul ThisTokenIsLost^
& echo two
--- Output ---
Test6
one
two 
```

也可以在字符串中**嵌入换行符：**

```
setlocal EnableDelayedExpansion
set text=This creates ^

a line feed
echo Test7: %text%
echo Test8: !text!
--- Output ---
Test7: This creates
Test8: This creates
a line feed 
```

空行对成功很重要。这仅适用于延迟扩展，否则在换行后将忽略该行的其余部分。

它有效，因为行尾的插入符号忽略下一个换行符并转义下一个字符，即使下一个字符也是换行符（在此阶段总是忽略回车）。

* * *

## 回答 #3

> 赞同：99
> 
> 时间：2014-01-08T16:07:18.037

*（这基本上是对[韦恩的答案](https://stackoverflow.com/a/69079/157247)的重写，但插入符号周围的混乱被清除了。所以我将它作为 CW 发布。我并不羞于编辑答案，但**完全重写它们**似乎不合适。）*

*你可以用*插入`^`符号（也包括空格（在 之前，或在下一行的开头 - 后一种选择可能有助于使其更清楚它是一个延续）。*`^`*

 *示例：（*均在 Windows XP 和 Windows 7 上测试）*

```
xcopy file1.txt file2.txt 
```

可以写成：

```
xcopy^
 file1.txt^
 file2.txt 
```

或者

```
xcopy ^
file1.txt ^
file2.txt 
```

甚至

```
xc^
opy ^
file1.txt ^
file2.txt 
```

（最后一个有效，因为在和之间`xc`没有`^`空格，并且下一行的开头没有空格。所以当你删除`^`和换行符时，你会得到...... `xcopy`）

为了可读性和完整性，最好只在参数之间进行中断（确保包含空格）。

确保这`^`不是批处理文件中的最后一件事**，**[因为](https://stackoverflow.com/questions/15466298/simple-caret-in-batch-file-consumes-all-memory).

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2016-02-12T19:55:11.617

多个命令可以放在括号中并分布在多行；所以`echo hi && echo hello`可以这样写：

```
( echo hi
  echo hello ) 
```

变量也可以提供帮助：

```
set AFILEPATH="C:\SOME\LONG\PATH\TO\A\FILE"
if exist %AFILEPATH% (
  start "" /b %AFILEPATH% -option C:\PATH\TO\SETTING...
) else (
... 
```

我还注意到`^`插入符号 ( )`if`条件句只在存在空格时才喜欢它们：

```
if exist ^ 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-08-24T11:07:50.193

然而，似乎在 for 循环的值中间拆分不需要插入符号（实际上尝试使用插入符号将被视为语法错误）。例如，

```
for %n in (hello
bye) do echo %n 
```

请注意，在 hello 之后或 bye 之前甚至不需要空格。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2021-07-21T13:17:42.043

搜索“如何拆分长的 DOS 批处理文件行”时我没有找到的一件事是如何拆分包含长引用文本的内容。实际上，它已包含在上面的答案中，但并不明显。使用插入符号来逃避它们。例如

```
myprog "needs this to be quoted" 
```

可以写成：

```
myprog ^"needs this ^
to be quoted^" 
```

但要注意在用插入符号结束一行后用插入符号开始一行 - 因为它会以插入符号出现..？：

```
echo ^"^
needs this ^
to be quoted^
^" 
```

->“需要引用这个^”

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-11-09T12:51:57.850

尽管 carret 将是执行此操作的更好方法，但这里还有一种使用宏的方法，该宏通过传递的参数构造命令：

```
@echo off
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
set "{{=setlocal enableDelayedExpansion&for %%a in (" & set "}}="::end::" ) do if "%%~a" neq "::end::" (set command=!command! %%a) else (call !command! & endlocal)"
:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

%{{%
    echo
    "command"
    written
    on a
    few lines
%}}% 
```

没有插入符号的命令更容易阅读，但使用特殊符号（例如括号、重定向等）会破坏它。因此，您可以将其用于更简单的情况。尽管您仍然可以将参数括在双引号中

# .net - 使用 SRS 查看器 Web 部件从 MOSS 打印报告期间出现错误 0x8007F303

> ID：69073
> 
> 赞同：1
> 
> 时间：2008-09-16T03:05:44.753
> 
> 标签：.net, sql, sql-server, reporting-services, moss

尝试使用 SharePoint 中的 SSRS 查看器 Web 部件进行打印时，出现以下错误。

> 打印过程中发生错误。(0x8007F303)

我们在这个盒子（生产）中使用的设置与测试中的设置完全一样，它工作得很好。

有人有什么好主意或以前遇到过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T06:11:31.627

我通过谷歌搜索找到了一些想法。

*   [有人遇到“SSRS 服务器配置为 Sharepoint 集成模式和 SQL Server 2005 Service Pack 2 的累积更新包 3”的问题，但“安装 .NET Framework 3.0 SP1 后问题消失了”](http://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=307315)
*   如果您有[“旧 ReportViewer 控件的旧实例位于您的网站 bin 目录或您的 Web 应用程序可以访问的任何其他位置”，您可能会收到此错误。](http://www.microsoft.com/communities/newsgroups/en-us/default.aspx?dg=microsoft.public.sqlserver.reportingsvcs&tid=570c2859-0e7a-4d6d-87de-ea8576963565&p=1)
*   这是另一个错误 0x800C0005，但是有[一个错误仅发生在生产环境中的事件](https://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=1012031&SiteID=1)。布拉德西@微软 说

> 您可以通过设置以下注册键来启用客户端打印日志记录。启用后，您可以查看打印用户临时 (cd %temp%) 目录并找到打印日志文件。视窗
> 
> 注册表编辑器版本 5.00
> 
> `[HKEY_CURRENT_USER\Software\Microsoft\Microsoft SQL Server\80\Reporting Services]` `"LogRSClientPrintInfo"=dword:00000001`
> 
> 您可以将日志文件发送给我，我可以查看是否有任何额外信息。

也许您应该收集日志并将其发送到论坛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T21:00:31.130

您可能在 web.config 中定义了用于 Reporting Services 的自定义身份验证。检查是否是这种情况，删除自定义身份验证并重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T00:35:23.140

这似乎很明显，但您是否检查过您至少安装了一台有效的打印机并且可用？

# openid - OpenID 登录工作流程？

> ID：69076
> 
> 赞同：9
> 
> 时间：2008-09-16T03:06:00.480
> 
> 标签：openid

当有人使用 Open ID 登录网站时，幕后发生了什么？

有人可以向我解释从合作伙伴开放 ID 站点进行典型登录期间发生的工作流程/步骤吗？（喜欢这个网站）

即当我在 myopenid 登录时，传递到该站点的内容是什么？SO怎么知道这是一个正确的登录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-09T19:39:46.983

## 什么是 OpenId？

> OpenID 是一个开放的、**分散**的、**免费**的以用户为中心的数字身份框架。OpenID 利用现有的互联网技术（URI、HTTP、SSL、Diffie-Hellman）并意识到人们已经在为自己创建身份，无论是在他们的博客、照片流、个人资料页面等。使用 OpenID，您可以轻松地转换一个将这些现有 URI 合并到一个帐户中，该帐户可在支持 OpenID 登录的站点上使用。

[开放标识](http://openid.net/what/)

## OpenId和常规认证形式的区别？

不同之处在于识别将分散到外部站点（例如 Wordpress、yahoo...）。网站会知道识别是否成功，让你登录。常规的认证表格与他们的私人数据库进行比较，让你登录或不登录。您只能使用登录密码访问本网站。使用 openId，您可以在多个网站上使用相同的登录密码。

## 这个怎么运作？

*   [您可以在此处查看操作流程（图片）](http://openid.net/pres/protocolflow-1.1.png)
*   [一步一步的活动在这里](http://www.windley.com/archives/2006/04/how_does_openid.shtml)
*   [此处的分步活动（其他博客）](http://tinisles.blogspot.com/2008/02/how-does-openid-work.html)
*   项目清单

# 脚步

1.  用户连接到启用 OpenID 的网站。
2.  用户输入凭证信息。
3.  使用 BASE64 发布帖子（网站到提供商）
4.  构建了一个答案（包含过期）
5.  该网站将用户重定向到提供商以登录。
6.  用户输入密码并提交。
7.  验证完成。
8.  登录！

* * *

[我为这个问题](https://stackoverflow.com/questions/353880/how-does-openid-authentication-works#353892)写了这个答案，但这个更老，所以我把我的答案贴在这里。

# sql-server - 如何对 SQL Server 全文查询的结果进行高亮显示

> ID：69089
> 
> 赞同：8
> 
> 时间：2008-09-16T03:08:20.147
> 
> 标签：sql-server, full-text-search, highlighting, hit-highlighting

我们有一个使用 SQL Server 2008 作为数据库的 Web 应用程序。我们的用户能够对数据库中的特定列进行全文搜索。SQL Server 的全文功能似乎不支持命中突出显示。我们是否需要自己构建它，或者是否有一些关于如何做到这一点的图书馆或知识？

顺便说一句，该应用程序是用 C# 编写的，因此 .Net 解决方案将是理想的，但不是必需的，因为我们可以翻译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-06T18:43:01.240

看起来您可以解析新的[SQL Server 2008 存储过程 sys.dm_fts_parser](http://msdn.microsoft.com/en-us/library/cc280463.aspx)的输出并使用正则表达式，但我没有仔细研究它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-07-26T19:07:45.023

扩展 Ishmael 的想法，这不是最终的解决方案，但我认为这是一个很好的开始方式。

首先我们需要获取全文引擎检索到的单词列表：

```
declare @SearchPattern nvarchar(1000) = 'FORMSOF (INFLECTIONAL, " ' + @SearchString + ' ")' 
declare @SearchWords table (Word varchar(100), Expansion_type int)
insert into @SearchWords
select distinct display_term, expansion_type
from sys.dm_fts_parser(@SearchPattern, 1033, 0, 0)
where special_term = 'Exact Match' 
```

已经有很多可以扩展的了，例如搜索模式是非常基本的；也可能有更好的方法来过滤掉您不需要的单词，但它至少会为您提供一个可以通过全文搜索匹配的词干等列表。

在获得所需的结果后，您可以使用 RegEx 解析结果集（或者最好只使用一个子集来加速它，尽管我还没有找到一个好的方法）。为此，我只使用了两个 while 循环和一堆临时表和变量：

```
declare @FinalResults table 
while (select COUNT(*) from @PrelimResults) > 0
begin
    select top 1 @CurrID = [UID], @Text = Text from @PrelimResults
    declare @TextLength int = LEN(@Text )
    declare @IndexOfDot int = CHARINDEX('.', REVERSE(@Text ), @TextLength - dbo.RegExIndexOf(@Text, '\b' + @FirstSearchWord + '\b') + 1)
    set @Text = SUBSTRING(@Text, case @IndexOfDot when 0 then 0 else @TextLength - @IndexOfDot + 3 end, 300)

    while (select COUNT(*) from @TempSearchWords) > 0
    begin
        select top 1 @CurrWord = Word from @TempSearchWords
        set @Text = dbo.RegExReplace(@Text, '\b' + @CurrWord + '\b',  '<b>' + SUBSTRING(@Text, dbo.RegExIndexOf(@Text, '\b' + @CurrWord + '\b'), LEN(@CurrWord) + 1) + '</b>')
        delete from @TempSearchWords where Word = @CurrWord
    end

    insert into @FinalResults
    select * from @PrelimResults where [UID] = @CurrID
    delete from @PrelimResults where [UID] = @CurrID
end 
```

**几点注意事项：**
1\. 嵌套的 while 循环可能不是最有效的方法，但没有别的想法。如果我使用游标，它本质上是一样的吗？
2.`@FirstSearchWord`这里的 to 指的是文本中一个原始搜索词的第一个实例，所以基本上你要替换的文本只会出现在摘要中。同样，这是一种非常基本的方法，某种文本聚类查找算法可能会很方便。
3.首先要获得RegEx，您需要CLR用户定义的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T17:40:40.750

在这种情况下，您可能会错过数据库的要点。它的工作是将满足你给它的条件的数据返回给你。我认为您可能希望在 Web 控件中使用正则表达式来实现突出显示。

这是一个快速搜索会发现的东西。

[http://www.dotnetjunkies.com/PrintContent.aspx?type=article&id=195E323C-78F3-4884-A5AA-3A1081AC3B35](http://www.dotnetjunkies.com/PrintContent.aspx?type=article&id=195E323C-78F3-4884-A5AA-3A1081AC3B35)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-24T13:20:06.043

一些细节：

```
 search_kiemeles=replace(lcase(search),"""","")
            do while not rs.eof  'The search result loop
                hirdetes=rs("hirdetes")
                data=RegExpValueA("([A-Za-zöüóőúéáűíÖÜÓŐÚÉÁŰÍ0-9]+)",search_kiemeles)   'Give back all the search words in an array, I need non-english characters also
                For i=0 to Ubound(data,1)
                    hirdetes = RegExpReplace(hirdetes,"("&NoAccentRE(data(i))&")","<em>$1</em>")
                Next
                response.write hirdetes
                rs.movenext
            Loop
            ... 
```

职能

```
'All Match to Array
Function RegExpValueA(patrn, strng)
    Dim regEx
    Set regEx = New RegExp   ' Create a regular expression.
    regEx.IgnoreCase = True   ' Set case insensitivity.
    regEx.Global = True
    Dim Match, Matches, RetStr
    Dim data()
    Dim count
    count = 0
    Redim data(-1)  'VBSCript Ubound array bug workaround
    if isnull(strng) or strng="" then
        RegExpValueA = data
        exit function
    end if
    regEx.Pattern = patrn   ' Set pattern.
    Set Matches = regEx.Execute(strng)   ' Execute search.
    For Each Match in Matches   ' Iterate Matches collection.
        count = count + 1
        Redim Preserve data(count-1)
      data(count-1) = Match.Value
    Next
    set regEx = nothing
    RegExpValueA = data
End Function

'Replace non-english chars
Function NoAccentRE(accent_string)
    NoAccentRE=accent_string
    NoAccentRE=Replace(NoAccentRE,"a","§")
    NoAccentRE=Replace(NoAccentRE,"á","§")
    NoAccentRE=Replace(NoAccentRE,"§","[aá]")
    NoAccentRE=Replace(NoAccentRE,"e","§")
    NoAccentRE=Replace(NoAccentRE,"é","§")
    NoAccentRE=Replace(NoAccentRE,"§","[eé]")
    NoAccentRE=Replace(NoAccentRE,"i","§")
    NoAccentRE=Replace(NoAccentRE,"í","§")
    NoAccentRE=Replace(NoAccentRE,"§","[ií]")
    NoAccentRE=Replace(NoAccentRE,"o","§")
    NoAccentRE=Replace(NoAccentRE,"ó","§")
    NoAccentRE=Replace(NoAccentRE,"ö","§")
    NoAccentRE=Replace(NoAccentRE,"ő","§")
    NoAccentRE=Replace(NoAccentRE,"§","[oóöő]")
    NoAccentRE=Replace(NoAccentRE,"u","§")
    NoAccentRE=Replace(NoAccentRE,"ú","§")
    NoAccentRE=Replace(NoAccentRE,"ü","§")
    NoAccentRE=Replace(NoAccentRE,"ű","§")
    NoAccentRE=Replace(NoAccentRE,"§","[uúüű]")
end function 
```

# asp.net - 在 ASP.NET 中读取分块传输编码的 http 请求的正文

> ID：69104
> 
> 赞同：5
> 
> 时间：2008-09-16T03:11:06.177
> 
> 标签：asp.net, asp.net-mvc, chunked-encoding

J2ME 客户端正在使用分块传输编码发送 HTTP POST 请求。

当 ASP.NET（在 IIS6 和 WebDev.exe.server 中）尝试读取请求时，它将 Content-Length 设置为 0。我想这没关系，因为加载请求时 Content-length 是未知的。

但是，当我将 Request.InputStream 读到最后时，它返回 0。

这是我用来读取输入流的代码。

```
using (var reader = new StreamReader(httpRequestBodyStream, BodyTextEncoding)) {
    string readString = reader.ReadToEnd();
    Console.WriteLine("CharSize:" + readString.Length);
    return BodyTextEncoding.GetBytes(readString);
} 
```

我可以用 Fiddler 模拟客户端的行为，例如

**网址** [http://localhost:15148/page.aspx](http://localhost:15148/page.aspx)

**标头：** 用户代理：提琴手传输编码：分块主机：somesite.com:15148

**身体** 兔兔兔。谢谢光临，很有用！

我上面的正文阅读器将返回一个长度为零的字节数组......蹩脚......

有谁知道如何在 IIS 和 ASP.NET 开发服务器（cassini）上启用分块编码？

我为 IIS 找到[了这个脚本](http://support.microsoft.com/default.aspx?scid=kb;en-us;278998)，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-11-27T21:34:49.113

似乎是官方的：[卡西尼不支持`Transfer-Encoding: chunked`请求。](http://msdn.microsoft.com/en-us/library/ee960144.aspx)

> 默认情况下，客户端使用分块的 HTTP 传输编码发送大型二进制流。**因为 ASP.NET 开发服务器不支持这种编码**，所以不能使用此 Web 服务器来承载必须接受大型二进制流的流数据服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T06:40:06.993

该网址不再起作用，因此很难直接对其进行测试。我想知道这是否可行，谷歌在[bytes.com 找到](http://bytes.com/forum/thread246706.html)了有经验的人。如果您再次启动您的网站，我可以看看这是否真的有效。

**Joerg Jooss**写道: (*为简洁起见略有修改*)

```
string responseText = null;
WebRequest rabbits= WebRequest.Create(uri);
using (Stream resp = rabbits.GetResponse().GetResponseStream()) {
    MemoryStream memoryStream = new MemoryStream(0x10000);
    byte[] buffer = new byte[0x1000];
    int bytes;
    while ((bytes = resp.Read(buffer, 0, buffer.Length)) > 0) {
        memoryStream.Write(buffer, 0, bytes);
    }
    // use the encoding to match the data source.
    Encoding enc = Encoding.UTF8;
    reponseText = enc.GetString(memoryStream.ToArray());
} 
```

# jquery - 处理多个 jQuery 电子邮件字段表单验证的最佳重构

> ID：69107
> 
> 赞同：0
> 
> 时间：2008-09-16T03:12:33.710
> 
> 标签：jquery, email, refactoring, validation

重构附加代码以适应多个电子邮件地址的最佳方法是什么？

附加的 HTML/jQuery 是完整的，适用于第一个电子邮件地址。我可以通过复制/粘贴和更改代码来设置另外两个。但我想重构现有代码来处理多个电子邮件地址字段。

```
<html>
<head>
    <script src="includes/jquery/jquery-1.2.6.min.js" type="text/javascript"></script>
    <script language="javascript">
        $(document).ready(function() {
            var validateUsername = $('#Email_Address_Status_Icon_1');

            $('#Email_Address_1').keyup(function() {
                var t = this;
                if (this.value != this.lastValue) {
                    if (this.timer) clearTimeout(this.timer);
                    validateUsername.removeClass('error').html('Validating Email');

                    this.timer = setTimeout(function() {
                        if (IsEmail(t.value)) {
                            validateUsername.html('Valid Email');
                        } else {
                            validateUsername.html('Not a valid Email');
                        };
                    }, 200);

                    this.lastValue = this.value;
                }
            });
        });

        function IsEmail(email) {
            var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            if (regex.test(email)) return true;
            else return false;
        }  
    </script>
</head>
<body>
    <div>
        <label for="Email_Address_1">Friend #1</label></div>
        <input type="text" ID="Email_Address_1">
        <span id="Email_Address_Status_Icon_1"></span>
    </div>
    <div>
        <label for="Email_Address_2">Friend #2</label></div>
    <input type="text" id="Email_Address_2">
        <span id="Email_Address_Status_Icon_2"></span>
    </div>
    <div>
        <label for="Email_Address_3">Friend #3</label></div>
    <input type="text" id="Email_Address_3">
        <span id="Email_Address_Status_Icon_3"></span>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T03:23:08.270

您可以为每个电子邮件字段指定一个类，而不是为您的电子邮件字段使用 ID：

```
<div>
    <label for="Email_Address_1">Friend #1</label></div>
    <input type="text" class="email">
    <span></span>
</div>
<div>
    <label for="Email_Address_2">Friend #2</label></div>
    <input type="text" class="email">
    <span></span>
</div>
<div>
    <label for="Email_Address_3">Friend #3</label></div>
    <input type="text" class="email">
    <span></span>
</div> 
```

然后，您可以选择 $("input.email") 而不是选择 $("#Email_Address_Status_Icon_1")，这将为您提供一个包含类电子邮件的所有输入元素的 jQuery 包装集。

最后，不要使用 id 显式引用状态图标，您可以简单地说：

```
$(this).next("span").removeClass('error').html('Validating Email'); 
```

'this' 将是电子邮件字段，因此 'this.next()' 将给你它的下一个兄弟。我们在此之上应用“span”选择器，以确保我们得到了我们想要的。$(this).next() 将以相同的方式工作。

这样，您以相对方式引用状态图标。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T03:49:03.747

谢谢！这是包含您建议的更改的完整重构。

```
<script language="javascript">
        $(document).ready(function() {
            $('#Email_Address_1').keyup(function(){Update_Email_Validate_Status(this)});
            $('#Email_Address_2').keyup(function() { Update_Email_Validate_Status(this)});
            $('#Email_Address_3').keyup(function() { Update_Email_Validate_Status(this)});            
        });

        function Update_Email_Validate_Status(field) {
            var t = field;
            if (t.value != t.lastValue) {
                if (t.timer) clearTimeout(t.timer);
                $(t).next("span").removeClass('error').html('Validating Email');

                t.timer = setTimeout(function() {
                    if (IsEmail(t.value)) {
                        $(t).next("span").removeClass('error').html('Valid Email');
                    } else {
                    $(t).next("span").removeClass('error').html('Not a valid Email');
                    };
                }, 200);

                t.lastValue = t.value;
            }
        }

        function IsEmail(email) {
            var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            if (regex.test(email)) return true;
            else return false;
        }  
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T04:00:41.707

我会做 ：

```
$(document).ready(function() {
        $('.validateEmail').keyup(function(){Update_Email_Validate_Status(this)});            
    }); 
```

然后将 class='validateEmail' 添加到您的所有电子邮件输入中。

或者查看[表单验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) ，我已经使用了很多，它非常灵活且易于使用。节省您重新发明...

# java - 在 .NET 中使用 Java JAR 文件

> ID：69108
> 
> 赞同：8
> 
> 时间：2008-09-16T03:12:40.293
> 
> 标签：java, .net, jar, managed

有哪些选项/方法/软件可用于将 JAR 文件转换为托管的 .NET 程序集？
请在答案中提供所有商业和非商业方法。
这些不包括需要在主机上安装 Java 的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T03:18:38.920

我可能是错的，但我很确定这是不可能的。Java 字节码不同于生成在 CLR 上运行的代码。

**刻薄的答案**：获取源代码并移植它。

编辑： http: [//sourceforge.net/projects/ikvm/](http://sourceforge.net/projects/ikvm/)是一个针对.NET 的Java 虚拟机实现。不完全是你要求的，但它可能是你能做的最好的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-09-16T07:34:31.147

去年面对这种情况，我编写了一个小型包装器（在 java 中），它从临时文件中读取输入，调用 jar 并将输出放在另一个临时文件中。.NET 项目将创建输入文件，调用 JVM 并启动包装器，等待它完成并读取输出文件。又快又脏。至少在我的情况下

# c++ - 什么是符号表？

> ID：69112
> 
> 赞同：91
> 
> 时间：2008-09-16T03:14:58.447
> 
> 标签：c++, c, symbol-table

有人可以在 C 和 C++ 的上下文中描述什么是符号表吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2008-09-16T03:28:59.037

这里符号表有两种常见的相关含义。

首先，目标文件中有符号表。通常，C 或 C++ 编译器将单个源文件编译为扩展名为 .obj 或 .o 的目标文件。这包含链接器可以处理成工作应用程序或共享库的可执行代码和数据的集合。目标文件中有一个称为符号表的数据结构，它将目标文件中的不同项目映射到链接器可以理解的名称。如果您从代码中调用函数，编译器不会将例程的最终地址放入目标文件中。相反，它将占位符值放入代码中并添加一个注释，告诉链接器从它正在处理的所有目标文件中查找各种符号表中的引用并将最终位置粘贴在那里。

其次，共享库或 DLL 中还有符号表。这是由链接器生成的，用于命名库用户可见的所有函数和数据项。这允许系统进行运行时链接，将对这些名称的打开引用解析为库在内存中加载的位置。

如果你想了解更多，我推荐 John Levine 的优秀著作《Linkers and Loaders》。[链接文本](http://books.google.com/books?id=h34d_jr2iikC&dq=levine+linkers+and+loaders&pg=PP1&ots=IxGcKQO03W&sig=dduAcRRhK6E2nMlkTxbNEDpWBTg&hl=en&sa=X&oi=book_result&resnum=1&ct=result)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-09-16T03:16:21.563

简而言之，它是将您分配给变量的名称映射到其在内存中的地址，包括类型、范围和大小等元数据。它由编译器使用。

一般来说，不仅仅是 C[++]*。从技术上讲，它并不总是包含直接内存地址。这取决于编译器所针对的语言、平台等。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2011-07-28T16:44:44.937

在 Linux 中，您可以使用命令：

> nm [目标文件]

列出该目标文件的符号表。从这个打印输出中，您可以从它们的[错位名称](https://en.wikipedia.org/wiki/Name_mangling)中破译正在使用的链接器符号。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-16T03:26:42.160

符号表是程序/单元中的“符号”列表。符号通常是变量或函数的名称。符号表可用于确定变量或函数在内存中的位置。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-16T03:17:09.937

查看[符号表](http://en.wikipedia.org/wiki/Symbol_table)维基百科条目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-01T13:41:11.597

符号表是编译器创建和维护的重要数据结构，用于存储变量名、函数名、对象、类、接口等各种实体出现的信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-19T14:52:17.350

来自“计算机系统程序员的观点”一书，第 7 章链接。“符号和符号表”：

> 符号表是程序中定义和引用的函数和全局变量的信息

重要说明（形成同一章）：

> 重要的是要意识到本地链接器符号与本地程序变量不同。符号表不包含任何与本地非静态程序变量相对应的符号。这些在运行时在堆栈上进行管理，链接器不感兴趣

# c++ - char[] 转十六进制字符串练习

> ID：69115
> 
> 赞同：6
> 
> 时间：2008-09-16T03:15:40.440
> 
> 标签：c++, optimization, hex

下面是我当前的 char* 到十六进制字符串函数。我把它写成一个位操作的练习。AMD Athlon MP 2800+ 需要大约 7 毫秒来对 1000 万字节数组进行 hexify。有什么我想念的技巧或其他方式吗？

我怎样才能让它更快？

在 g++ 中使用 -O3 编译

```
static const char _hex2asciiU_value[256][2] =
     { {'0','0'}, {'0','1'}, /* snip..., */ {'F','E'},{'F','F'} };

std::string char_to_hex( const unsigned char* _pArray, unsigned int _len )
{
    std::string str;
    str.resize(_len*2);
    char* pszHex = &str[0];
    const unsigned char* pEnd = _pArray + _len;

    clock_t stick, etick;
    stick = clock();
    for( const unsigned char* pChar = _pArray; pChar != pEnd; pChar++, pszHex += 2 ) {
        pszHex[0] = _hex2asciiU_value[*pChar][0];
        pszHex[1] = _hex2asciiU_value[*pChar][1];
    }
    etick = clock();

    std::cout << "ticks to hexify " << etick - stick << std::endl;

    return str;
} 
```

**更新**

添加了计时码

[Brian R. Bondy](https://stackoverflow.com/questions/69115/char-to-hex-string-exercise#69126)：用堆分配的缓冲区替换 std::string 并将 ofs*16 更改为 ofs << 4 - 但是堆分配的缓冲区似乎减慢了速度？- 结果~11ms

[Antti Sykäri](https://stackoverflow.com/questions/69115/#69305)：用

```
 int upper = *pChar >> 4;
 int lower = *pChar & 0x0f;
 pszHex[0] = pHex[upper];
 pszHex[1] = pHex[lower]; 
```

结果~8ms

[罗伯特](https://stackoverflow.com/questions/69115?sort=votes#69218)：`_hex2asciiU_value`用一个完整的 256 条目表替换，牺牲内存空间但结果 ~7ms！

[HoyHoy](https://stackoverflow.com/questions/69115/char-to-hex-string-exercise#70254)：注意到它产生了不正确的结果

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-17T01:20:38.447

这个汇编函数（基于我之前的帖子，但我必须稍微修改一下概念才能让它真正起作用）在 Core 2 Conroe 3Ghz 的一个核心上每秒处理 33 亿个输入字符（66 亿个输出字符）。Penryn 可能更快。

```
%include "x86inc.asm"

SECTION_RODATA
pb_f0: times 16 db 0xf0
pb_0f: times 16 db 0x0f
pb_hex: db 48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70

SECTION .text

; int convert_string_to_hex( char *input, char *output, int len )

cglobal _convert_string_to_hex,3,3
    movdqa xmm6, [pb_f0 GLOBAL]
    movdqa xmm7, [pb_0f GLOBAL]
.loop:
    movdqa xmm5, [pb_hex GLOBAL]
    movdqa xmm4, [pb_hex GLOBAL]
    movq   xmm0, [r0+r2-8]
    movq   xmm2, [r0+r2-16]
    movq   xmm1, xmm0
    movq   xmm3, xmm2
    pand   xmm0, xmm6 ;high bits
    pand   xmm2, xmm6
    psrlq  xmm0, 4
    psrlq  xmm2, 4
    pand   xmm1, xmm7 ;low bits
    pand   xmm3, xmm7
    punpcklbw xmm0, xmm1
    punpcklbw xmm2, xmm3
    pshufb xmm4, xmm0
    pshufb xmm5, xmm2
    movdqa [r1+r2*2-16], xmm4
    movdqa [r1+r2*2-32], xmm5
    sub r2, 16
    jg .loop
    REP_RET 
```

请注意，它使用 x264 汇编语法，这使得它更易于移植（对于 32 位和 64 位等）。将其转换为您选择的语法很简单：r0、r1、r2 是寄存器中函数的三个参数。它有点像伪代码。或者，您可以从 x264 树中获取 common/x86/x86inc.asm 并将其包含在本机运行它。

PS Stack Overflow，我在这样一件微不足道的事情上浪费时间是错的吗？或者这太棒了？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T03:42:49.143

以更多内存为代价，您可以创建一个完整的 256 项十六进制代码表：

```
static const char _hex2asciiU_value[256][2] =
    { {'0','0'}, {'0','1'}, /* ..., */ {'F','E'},{'F','F'} }; 
```

然后直接索引到表中，不需要一点点摆弄。

```
const char *pHexVal = pHex[*pChar];
pszHex[0] = pHexVal[0];
pszHex[1] = pHexVal[1]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-17T00:18:28.300

**更快的 C 实现**

这比 C++ 实现快了近 3 倍。不知道为什么，因为它非常相似。对于我发布的最后一个 C++ 实现，运行 200,000,000 个字符数组需要 6.8 秒。实施只用了 2.2 秒。

```
#include <stdio.h>
#include <stdlib.h>

char* char_to_hex(const unsigned char* p_array, 
                  unsigned int p_array_len,
                  char** hex2ascii)
{
    unsigned char* str = malloc(p_array_len*2+1);
    const unsigned char* p_end = p_array + p_array_len;
    size_t pos=0;
    const unsigned char* p;
    for( p = p_array; p != p_end; p++, pos+=2 ) {
       str[pos] = hex2ascii[*p][0];
       str[pos+1] = hex2ascii[*p][1];
    }
    return (char*)str;
}

int main()
{
  size_t hex2ascii_len = 256;
  char** hex2ascii;
  int i;
  hex2ascii = malloc(hex2ascii_len*sizeof(char*));
  for(i=0; i<hex2ascii_len; i++) {
    hex2ascii[i] = malloc(3*sizeof(char));    
    snprintf(hex2ascii[i], 3,"%02X", i);
  }
  size_t len = 8;
  const unsigned char a[] = "DO NOT WANT";
  printf("%s\n", char_to_hex((const unsigned char*)a, len, (char**)hex2ascii));
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/3m8Hb.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T03:18:30.467

一次操作 32 位（4 个字符），然后在需要时处理尾部。当我使用 url 编码进行此练习时，每个 char 的完整表查找比逻辑构造稍快，因此您可能还想在上下文中对此进行测试以考虑缓存问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-01-12T16:33:10.517

它适用于我`unsigned char`：

```
unsigned char  c1 =  byteVal >> 4;
unsigned char  c2 =  byteVal & 0x0f;

c1 +=  c1 <= 9 ? '0' : ('a' - 10);
c2 +=  c2 <= 9 ? '0' : ('a' - 10);

std::string sHex("  ");
sHex[0] = c1 ;
sHex[1] = c2 ;

//sHex - contain what we need. For example "0f" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T03:17:24.367

对于一个，而不是乘以`16`做一个`bitshift << 4`

也不要使用`std::string`，而只是在堆上创建一个缓冲区，然后再`delete`使用它。它将比字符串所需的对象销毁更有效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T03:20:11.943

不会有很大的不同... *pChar-(ofs*16) 可以用 [*pCHAR & 0x0F] 来完成

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T03:38:37.967

这是我的版本，与 OP 的版本不同，它不假定`std::basic_string`其数据位于连续区域：

```
#include <string>

using std::string;

static char const* digits("0123456789ABCDEF");

string
tohex(string const& data)
{
    string result(data.size() * 2, 0);
    string::iterator ptr(result.begin());
    for (string::const_iterator cur(data.begin()), end(data.end()); cur != end; ++cur) {
        unsigned char c(*cur);
        *ptr++ = digits[c >> 4];
        *ptr++ = digits[c & 15];
    }
    return result;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-16T04:04:23.927

改变

```
 ofs = *pChar >> 4;
    pszHex[0] = pHex[ofs];
    pszHex[1] = pHex[*pChar-(ofs*16)]; 
```

到

```
 int upper = *pChar >> 4;
    int lower = *pChar & 0x0f;
    pszHex[0] = pHex[upper];
    pszHex[1] = pHex[lower]; 
```

导致大约 5% 的加速。

[按照Robert](https://stackoverflow.com/questions/69115/char-to-hex-string-exercise#69218)的建议，一次写入两个字节的结果可以提高大约 18% 的速度。代码更改为：

```
_result.resize(_len*2);
short* pszHex = (short*) &_result[0];
const unsigned char* pEnd = _pArray + _len;

const char* pHex = _hex2asciiU_value;
for(const unsigned char* pChar = _pArray;
    pChar != pEnd;
    pChar++, ++pszHex )
{
    *pszHex = bytes_to_chars[*pChar];
} 
```

所需的初始化：

```
short short_table[256];

for (int i = 0; i < 256; ++i)
{
    char* pc = (char*) &short_table[i];
    pc[0] = _hex2asciiU_value[i >> 4];
    pc[1] = _hex2asciiU_value[i & 0x0f];
} 
```

[正如Allan Wind](https://stackoverflow.com/questions/69115/char-to-hex-string-exercise#69132)所指出的那样，一次执行 2 个字节或一次执行 4 个字节可能会导致更大的加速，但是当您必须处理奇数字符时，它会变得更加棘手。

如果您喜欢冒险，您可以尝试调整[Duff 的设备](http://en.wikipedia.org/wiki/Duff's_device)来执行此操作。

结果基于 Intel Core Duo 2 处理器和`gcc -O3`.

**始终衡量**您实际上获得了更快的结果 - 伪装成优化的悲观主义并非毫无价值。

**总是测试**你得到正确的结果——一个伪装成优化的错误是非常危险的。

**始终牢记**速度和可读性之间的权衡——生命太短，任何人都无法维护不可读的代码。

（为[知道你住在哪里](https://blog.codinghorror.com/coding-for-violent-psychopaths/)的暴力精神病患者编写代码的[强制性参考](http://c2.com/cgi/wiki?CodeForTheMaintainer)。）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-12-13T17:53:48.617

我假设这是 Windows+IA32。
尝试使用 short int 而不是两个十六进制字母。

```
short int hex_table[256] = {'0'*256+'0', '1'*256+'0', '2'*256+'0', ..., 'E'*256+'F', 'F'*256+'F'};
unsigned short int* pszHex = &str[0];

stick = clock();

for (const unsigned char* pChar = _pArray; pChar != pEnd; pChar++) 
    *pszHex++ = hex_table[*pChar];

etick = clock(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T03:41:54.683

确保您的编译器优化已打开到最高工作级别。

你知道，像 gcc 中的 '-O1' 到 '-03' 这样的标志。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T04:57:21.617

我发现在数组中使用索引而不是指针可以加快速度。这完全取决于您的编译器选择如何优化。关键是处理器有指令可以在单个指令中执行复杂的事情，例如 [i*2+1]。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T08:05:41.243

即使在完全指定 _hex2asciiU_value 时，我写这篇文章时显示的函数也会产生不正确的输出。以下代码有效，在我的 2.33GHz Macbook Pro 上运行 200,000,000 百万个字符大约需要 1.9 秒。

```
#include <iostream>

using namespace std;

static const size_t _h2alen = 256;
static char _hex2asciiU_value[_h2alen][3];

string char_to_hex( const unsigned char* _pArray, unsigned int _len )
{
    string str;
    str.resize(_len*2);
    char* pszHex = &str[0];
    const unsigned char* pEnd = _pArray + _len;
    const char* pHex = _hex2asciiU_value[0];
    for( const unsigned char* pChar = _pArray; pChar != pEnd; pChar++, pszHex += 2 ) {
       pszHex[0] = _hex2asciiU_value[*pChar][0];
       pszHex[1] = _hex2asciiU_value[*pChar][1];
    }
    return str;
}

int main() {
  for(int i=0; i<_h2alen; i++) {
    snprintf(_hex2asciiU_value[i], 3,"%02X", i);
  }
  size_t len = 200000000;
  char* a = new char[len];
  string t1;
  string t2;
  clock_t start;
  srand(time(NULL));
  for(int i=0; i<len; i++) a[i] = rand()&0xFF;
  start = clock();
  t1=char_to_hex((const unsigned char*)a, len);
  cout << "char_to_hex conversion took ---> " << (clock() - start)/(double)CLOCKS_PER_SEC << " seconds\n";
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T08:11:49.917

如果您在这里对速度非常着迷，可以执行以下操作：

每个字符是一个字节，代表两个十六进制值。因此，每个字符实际上是两个四位值。

因此，您可以执行以下操作：

1.  使用乘法或类似指令将 4 位值解压缩为 8 位值。
2.  使用 pshufb，即 SSSE3 指令（尽管仅限 Core2）。它采用 16 个 8 位输入值的数组，并根据第二个向量中的 16 个 8 位索引对它们进行混洗。由于您只有 16 个可能的字符，因此非常适合；输入数组是 0 到 F 个字符的向量，索引数组是解压缩的 4 位值数组。

因此，在一条*指令*中，您将执行**16 次表查找**，所用时钟少于通常只执行一次所需的时钟（pshufb 是 Penryn 上的 1 个时钟延迟）。

因此，在计算步骤中：

1.  ABCDEFGHIJKLMNOP（64 位输入值向量，“向量 A”）-> 0A 0B 0C 0D 0E 0F 0G 0H 0I 0J 0K 0L 0M 0N 0O 0P（128 位索引向量，“向量 B”）。最简单的方法可能是两个 64 位乘法。
2.  pshub [0123456789ABCDEF]，矢量 B

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T08:25:35.313

我不确定一次做更多的字节会更好......你可能会得到大量的缓存未命中并显着减慢它。

您可能会尝试展开循环，采取更大的步骤并在每次循环中执行更多字符，以消除一些循环开销。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-16T13:16:36.003

在我的 Athlon 64 4200+ 上始终获得约 4 毫秒（原始代码约 7 毫秒）

```
for( const unsigned char* pChar = _pArray; pChar != pEnd; pChar++) {
    const char* pchars = _hex2asciiU_value[*pChar];
    *pszHex++ = *pchars++;
    *pszHex++ = *pchars;
} 
```

# database-design - SaaS 数据库设计 - 多个数据库？分裂？

> ID：69128
> 
> 赞同：19
> 
> 时间：2008-09-16T03:18:10.140
> 
> 标签：database-design, architecture, database-schema, multi-tenant, saas

我见过以许多不同方式托管的 SaaS 应用程序。跨多个数据库拆分功能和模块是个好主意吗？例如，将 User 表放在一个 DB 上，将功能/应用特定表放在另一个 DB 上，或者将其他常用共享表放在另一个 DB 上？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-09-16T04:22:59.843

从一个数据库开始。在项目需要时拆分数据/功能。

以下是我们可以从 LinkedIn 中学到的东西：

*   单个数据库不起作用
*   参照完整性将不可能
*   任何数据丢失都是一个问题
*   缓存是好的，即使它是适度有效的
*   永远不要低估增长轨迹

来源：

[领英架构](http://www.slideshare.net/linkedin/linkedins-communication-architecture)

[LinkedIn 通信架构](http://www.slideshare.net/linkedin/linked-in-javaone-2008-tech-session-comm)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-09-16T04:15:05.260

[High Scalability](http://highscalability.com/)是一个很好的扩展 SaaS 应用程序的博客。如前所述，按照您的建议跨数据库拆分表通常是一个坏主意。但是一个类似的概念是分片，您保持相同（或相似）的模式，但将数据拆分到多个服务器上。例如，用户 1-5000 在 server1 上，用户 5000-10000 在 server2 上。根据您的应用程序使用的查询，它可能是一种有效的扩展方式。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-16T04:18:23.147

对于 SaaS 应用程序，您为多个租户使用多个数据库，但通常不会按模块拆分它。

这是我在 SaaS 应用程序设计中看到的最常见的模型。为添加到应用程序的每个租户复制基本架构。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T03:24:29.967

拥有单个数据库最有利于数据完整性，因为这样您就可以使用外键。如果将数据拆分到多个数据库中，则无法获得这种内置的数据完整性。如果您的数据不相关，这不是问题，但如果相关，您的一个数据库可能包含与另一个数据库不一致的数据。在这种情况下，您需要编写一些代码来定期扫描数据库以查找不一致的数据，以便您可以适当地处理它。

但是，如果您需要您的站点/应用程序具有高度可扩展性（例如互联网规模），则可能需要多个数据库。例如，您可以将每个数据库托管在不同的物理服务器上。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-16T03:31:48.140

除非您看到强有力的证据表明需要，否则按功能拆分数据库可能不是一个好主意。通常你可能需要更新两个数据库作为单个事务的一部分——分布式事务更难处理。此外，如果需要拆分数据库，您也许可以使用分片。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T03:20:32.910

问问自己：将所有内容移到单独的数据库中可以获得什么？

我猜在管理方面会有很多痛苦。我个人更热衷于将所有内容都放在一个数据库中，如果您以后遇到单个数据库无法解决的问题，然后将数据迁移到多个数据库中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-17T21:29:30.357

查看 Azure SQL 的多租户 SaaS 数据库租户模式，其中详细列出了解决方案和决策标准。

[https://docs.microsoft.com/en-us/azure/azure-sql/database/saas-tenancy-app-design-patterns](https://docs.microsoft.com/en-us/azure/azure-sql/database/saas-tenancy-app-design-patterns)

下一次讨论包括来自曾做过这件事的开发人员的大量反馈。如果可以的话，一般的共识是避免使用多个数据库并自动强制执行仅租户查询。SQL Azure 提供行级安全性来帮助实现这一点。它也可以在应用程序级别完成。

[https://www.indiehackers.com/post/should-i-keep-only-one-database-for-each-customer-in-a-saas-product-2af0af42f4](https://www.indiehackers.com/post/should-i-keep-only-one-database-for-each-customer-in-a-saas-product-2af0af42f4)

最后一个想法.. 一开始选择单个数据库，并不排除您以后使用每个租户的数据库。您甚至可以稍后在一个数据库中支持许多较小的客户，而大型或付费客户拥有自己的数据库。但是，从每个租户的数据库开始意味着如果您稍后切换回每个数据库的多个租户，您将承担巨大的迁移成本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T15:24:44.977

保持一个自然的设计（尽可能多地去规范化，尽可能少地规范化）。将 DB 模型拆分为其模块，并通过将数据与服务（拥有数据）放在一起来牢记面向服务的原则。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-04T21:50:47.923

有多种方法可以实现它，但多租户问题比数据模型更深。我讨厌插入产品，但请查看我工作的公司[Apprenda的](http://www.apprenda.com)[SaaSGrid](http://www.apprenda.com) 。我们是一个云操作系统，允许您编写自动注入的单租户 SOA 应用程序（随意使用 NHibernate 进行数据访问）多租户到您的应用程序。当您发布您的应用程序时，您可以执行诸如选择数据模型（隔离数据库或共享）之类的操作，SaaSGrid 将相应地进行部署，并且您的应用程序无需任何代码更改即可运行 - 只需编写代码，就好像它是为单个租户编写的一样！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-23T16:41:36.030

为什么要使用数据库？

我认为使用 Hadoop、Voldemort（LinkedIn 开发和使用的 project-voldemort.com）等分布式存储系统是个好主意。

我认为 db 对于像货币操作这样的敏感数据很有用，但对于其他一切你可以使用分布式存储。

# sql - 终止共享主机上的 MySQL 连接？

> ID：69159
> 
> 赞同：1
> 
> 时间：2008-09-16T03:25:38.280
> 
> 标签：sql, mysql, database, connection

我正在使用 MediaTemple 的网格服务器（共享/网格托管）来运行我正在编写的一些 MySQL/PHP 站点，并注意到我没有关闭我的一个 MySQL 连接，这导致我的站点出错：

```
"Too Many Connections" 
```

我无法在任何地方登录以手动关闭连接。

**这是使用脚本或其他类型的命令关闭打开连接的任何方式吗？**

我应该等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T03:29:45.070

如果您根本无法登录 MySQL，您可能必须联系您的托管服务提供商以终止连接。

如果可以使用 MySQL shell，可以使用[show processlist](http://dev.mysql.com/doc/refman/5.0/en/show-processlist.html)命令查看连接，然后使用[kill](http://dev.mysql.com/doc/refman/5.0/en/kill.html)命令删除连接。

不幸的是，根据我的经验，挂起的 SQL 连接往往会保持这种状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T13:47:28.817

blindly going in an terminating connections is not the way to solve this problem. first you need to understand why you are running out of connections. is your max_connections setting selected to correctly match the number of max/anticipated users? are you using persistent connections when you really don't need them? etc.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T03:32:17.123

确保您正在关闭与您的 PHP 代码的连接。此外，您可以增加 /etc/my.cnf 中允许的最大连接数。

```
max_connections=500 
```

最后，您可以登录到 mysql 提示符并键入`show status`或`show processlist`查看服务器的各种统计信息。

如果一切都失败了，重新启动服务器守护程序应该清除持久连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T03:50:09.453

好吧，如果您永远无法通过连接潜入，我不知道'，但如果您偶尔可以潜入，在 Ruby 中它将接近：

```
require 'mysql'

mysql = Mysql.new(ip, user, pass)
processlist = mysql.query("show full processlist")
killed = 0
processlist.each { | process |
  mysql.query("KILL #{process[0].to_i}")
} 
puts "#{Time.new} -- killed: #{killed} connections" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T04:26:06.950

If you can access the command line with enough privileges, restart the MySQL server or the Apache (assuming that you use Apache) server - because probably it is keeping the connections open. After you successfully closed the connections, make sure that you are not using persistent connections from PHP (the general opinion seems to be that it doesn't create any significant performance gain, but it has all kinds of problems - like you've experienced - and in some cases - like using it PostgreSQL - it can even significantly slow down your site!).

# sharepoint - 在另一个程序集中创建 WebPart 子类时出错

> ID：69164
> 
> 赞同：1
> 
> 时间：2008-09-16T03:27:06.013
> 
> 标签：sharepoint, web-parts

我正在尝试创建一个 WebPart 的子类，它将作为我们创建的任何 WebPart 的父类。如果我在同一个项目中创建一个空类，我可以像预期的那样继承它。但是，如果我尝试将它放在另一个程序集中——我已经能够引用和使用其中的类——我会收到以下错误：

无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。

其他可能相关的信息（我通常不是 SharePoint 开发人员）：我编译 dll，从 dev 项目中引用它们，然后将它们复制到 SharePoint 实例的 /bin 目录中。程序集均已签名。我正在尝试使用 VS2008 的“部署”功能进行部署。

不幸的是，这似乎不是特定于 SharePoint 的错误，我不确定如何解决该问题。有没有人经历过这种情况，你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T05:36:36.467

好的，我发现了问题。打包任务出于某种原因使用反射。当它发现你的类继承自另一个域中的类时，它会尝试使用反射加载它。但是，反射不执行绑定策略，因此不会加载域。

打包程序的作者可以通过添加以下代码来解决这个问题：

```
AppDomain.CurrentDomain.ReflectionOnlyAssemblyResolve += new ResolveEventHandler(CurrentDomain_ReflectionOnlyAssemblyResolve);
Assembly a = System.Reflection.Assembly.ReflectionOnlyLoadFrom(filename);

static Assembly CurrentDomain_ReflectionOnlyAssemblyResolve(object sender, ResolveEventArgs args)
{
    return System.Reflection.Assembly.ReflectionOnlyLoad(args.Name);
} 
```

但是，如果您的项目需要解决方案，只需将程序集添加到 GAC，它就能解决它们。

# asp.net-mvc - 如何在 MVC .net 中测试 cookie？

> ID：69188
> 
> 赞同：3
> 
> 时间：2008-09-16T03:36:20.703
> 
> 标签：asp.net-mvc, unit-testing

[http://stephenwalther.com/blog/archive/2008/07/01/asp-net-mvc-tip-12-faking-the-controller-context.aspx](http://stephenwalther.com/blog/archive/2008/07/01/asp-net-mvc-tip-12-faking-the-controller-context.aspx)

这篇文章展示了如何测试设置 cookie，然后在 ViewData 中查看它。我要做的是查看是否写入了正确的 cookie（值和名称）。任何回复、博客文章或文章将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T05:17:05.237

Are you looking for something more like this? (untested, just typed it up in the reply box)

```
var cookies = new HttpCookieCollection();
controller.ControllerContext = new FakeControllerContext(controller, cookies);
var result = controller.TestCookie() as ViewResult;
Assert.AreEqual("somevaluethatshouldbethere", cookies["somecookieitem"].Value); 
```

As in, did you mean you want to test the writing of a cookie instead of reading one? Please make your request clearer if possible :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T05:23:37.870

也许您需要传入一个写入 cookie 的 Fake Response 对象，然后测试从 Controller 中返回的内容。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-09-16T05:09:10.963

```
function ReadCookie(cookieName) {
 var theCookie=""+document.cookie;
 var ind=theCookie.indexOf(cookieName);
 if (ind==-1 || cookieName=="") return ""; 
 var ind1=theCookie.indexOf(';',ind);
 if (ind1==-1) ind1=theCookie.length; 
 return unescape(theCookie.substring(ind+cookieName.length+1,ind1));
} 
```

# algorithm - 如何使用两个堆栈实现一个队列？

> ID：69192
> 
> 赞同：438
> 
> 时间：2008-09-16T03:37:34.383
> 
> 标签：algorithm, data-structures, stack, queue

假设我们有两个堆栈并且没有其他临时变量。

是否可以仅使用两个堆栈来“构建”队列数据结构？

* * *

## 回答 #1

> 赞同：766
> 
> 时间：2008-09-16T04:42:02.777

保留 2 个堆栈，我们称它们为`inbox`和`outbox`。

**入队**：

*   将新元素推到`inbox`

**出队**：

*   如果`outbox`为空，则通过弹出每个元素`inbox`并将其推入来重新填充它`outbox`

*   弹出并返回顶部元素`outbox`

使用这种方法，每个元素将在每个堆栈中恰好出现一次 - 这意味着每个元素将被推送两次并弹出两次，从而提供摊销的常数时间操作。

这是Java中的一个实现：

```
public class Queue<E>
{

    private Stack<E> inbox = new Stack<E>();
    private Stack<E> outbox = new Stack<E>();

    public void queue(E item) {
        inbox.push(item);
    }

    public E dequeue() {
        if (outbox.isEmpty()) {
            while (!inbox.isEmpty()) {
               outbox.push(inbox.pop());
            }
        }
        return outbox.pop();
    }

} 
```

* * *

## 回答 #2

> 赞同：288
> 
> 时间：2016-08-22T23:01:21.293

# A - 如何反转堆栈

要了解如何使用两个堆栈构造队列，您应该清楚地了解如何反转堆栈。记住堆栈的工作原理，它与厨房里的盘子非常相似。最后洗过的盘子将位于干净堆栈的顶部，这在计算机科学中称为**Last** **I** n **F** irst **O ut (LIFO)。**

 ******让我们把我们的堆栈想象成一个瓶子，如下所示；

[![在此处输入图像描述](https://i.stack.imgur.com/MwjaI.png)](https://i.stack.imgur.com/MwjaI.png)

如果我们分别压入整数 1,2,3，那么 3 将在栈顶。因为 1 将首先被压入，然后 2 将被放在 1 的顶部。最后，3 将被放在堆栈顶部，我们以瓶子表示的堆栈的最新状态如下所示；

[![在此处输入图像描述](https://i.stack.imgur.com/J7ec0.png)](https://i.stack.imgur.com/J7ec0.png)

现在我们将堆栈表示为一个瓶子，其中填充了值 3,2,1。我们想反转堆栈，使堆栈的顶部元素为 1，堆栈的底部元素为 3。我们能做什么？我们可以把瓶子倒过来拿，这样所有的值都应该按顺序颠倒？

[![在此处输入图像描述](https://i.stack.imgur.com/WZNxS.png)](https://i.stack.imgur.com/WZNxS.png)

是的，我们可以这样做，但那是一个瓶子。要执行相同的过程，我们需要有第二个堆栈，它将以相反的顺序存储第一个堆栈元素。让我们将填充的堆栈放在左侧，将新的空堆栈放在右侧。为了颠倒元素的顺序，我们将从左侧堆栈中弹出每个元素，并将它们推送到右侧堆栈。您可以在下图中看到我们这样做时会发生什么；

[![在此处输入图像描述](https://i.stack.imgur.com/1YfMo.png)](https://i.stack.imgur.com/1YfMo.png)

所以我们知道如何反转堆栈。

# B - 使用两个堆栈作为队列

在前面的部分中，我已经解释了如何反转堆栈元素的顺序。这很重要，因为如果我们将元素推送和弹出堆栈，输出将完全按照队列的相反顺序。考虑一个例子，让我们将整数数组推入`{1, 2, 3, 4, 5}`堆栈。如果我们弹出元素并打印它们直到堆栈为空，我们将以与推送顺序相反的顺序获取数组，这将`{5, 4, 3, 2, 1}`记住对于相同的输入，如果我们将队列出队直到队列为空，则输出将`{1, 2, 3, 4, 5}`。所以很明显，对于相同的元素输入顺序，队列的输出与堆栈的输出正好相反。正如我们知道如何使用额外的堆栈来反转堆栈，我们可以使用两个堆栈来构造一个队列。

我们的队列模型将包含两个堆栈。一个堆栈将用于`enqueue`操作（左侧的堆栈#1，将被称为输入堆栈），另一个堆栈将用于`dequeue`操作（右侧的堆栈#2，将被称为输出堆栈）。看看下面的图片；

[![在此处输入图像描述](https://i.stack.imgur.com/xyWPR.png)](https://i.stack.imgur.com/xyWPR.png)

我们的伪代码如下；

* * *

### 入队操作

```
Push every input element to the Input Stack 
```

### 出队操作

```
If ( Output Stack is Empty)
    pop every element in the Input Stack
    and push them to the Output Stack until Input Stack is Empty

pop from Output Stack 
```

* * *

让我们分别将整数排入队列`{1, 2, 3}`。整数将被压入位于左侧的**输入堆栈**（**堆栈#1 ）；**

[![在此处输入图像描述](https://i.stack.imgur.com/lX1EP.png)](https://i.stack.imgur.com/lX1EP.png)

那么如果我们执行出列操作会发生什么呢？每当执行出队操作时，队列将检查输出堆栈是否为空（请参见上面的伪代码）如果输出堆栈为空，则将在输出上提取输入堆栈，因此元素输入堆栈将被反转。在返回值之前，队列的状态如下：

[![在此处输入图像描述](https://i.stack.imgur.com/9f03R.png)](https://i.stack.imgur.com/9f03R.png)

查看输出堆栈（堆栈#2）中元素的顺序。很明显，我们可以从输出堆栈中弹出元素，这样输出就与我们从队列中出列一样。因此，如果我们执行两个出队操作，首先我们将`{1, 2}`分别得到。然后元素 3 将是输出堆栈的唯一元素，输入堆栈将为空。如果我们将元素 4 和 5 入队，那么队列的状态将如下所示；

[![在此处输入图像描述](https://i.stack.imgur.com/CXQZB.png)](https://i.stack.imgur.com/CXQZB.png)

现在Output Stack不是空的，如果我们执行dequeue操作，只会从Output Stack中弹出3个。然后状态将如下所示；

[![在此处输入图像描述](https://i.stack.imgur.com/hOPu3.png)](https://i.stack.imgur.com/hOPu3.png)

同样，如果我们再执行两次出队操作，在第一次出队操作时，队列将检查输出堆栈是否为空，这是真的。然后将 Input Stack 的元素弹出并推送到 Output Stack，直到 Input Stack 为空，此时 Queue 的状态如下；

[![在此处输入图像描述](https://i.stack.imgur.com/vuLsw.png)](https://i.stack.imgur.com/vuLsw.png)

容易看出，两个出队操作的输出将是`{4, 5}`

# C - 用两个堆栈构造的队列的实现

这是Java中的一个实现。我不打算使用 Stack 的现有实现，所以这里的示例将重新发明轮子；

# C - 1) MyStack 类：一个简单的堆栈实现

```
public class MyStack<T> {

    // inner generic Node class
    private class Node<T> {
        T data;
        Node<T> next;

        public Node(T data) {
            this.data = data;
        }
    }

    private Node<T> head;
    private int size;

    public void push(T e) {
        Node<T> newElem = new Node(e);

        if(head == null) {
            head = newElem;
        } else {
            newElem.next = head;
            head = newElem;     // new elem on the top of the stack
        }

        size++;
    }

    public T pop() {
        if(head == null)
            return null;

        T elem = head.data;
        head = head.next;   // top of the stack is head.next

        size--;

        return elem;
    }

    public int size() {
        return size;
    }

    public boolean isEmpty() {
        return size == 0;
    }

    public void printStack() {
        System.out.print("Stack: ");

        if(size == 0)
            System.out.print("Empty !");
        else
            for(Node<T> temp = head; temp != null; temp = temp.next)
                System.out.printf("%s ", temp.data);

        System.out.printf("\n");
    }
} 
```

# C - 2) MyQueue 类：使用两个堆栈的队列实现

```
public class MyQueue<T> {

    private MyStack<T> inputStack;      // for enqueue
    private MyStack<T> outputStack;     // for dequeue
    private int size;

    public MyQueue() {
        inputStack = new MyStack<>();
        outputStack = new MyStack<>();
    }

    public void enqueue(T e) {
        inputStack.push(e);
        size++;
    }

    public T dequeue() {
        // fill out all the Input if output stack is empty
        if(outputStack.isEmpty())
            while(!inputStack.isEmpty())
                outputStack.push(inputStack.pop());

        T temp = null;
        if(!outputStack.isEmpty()) {
            temp = outputStack.pop();
            size--;
        }

        return temp;
    }

    public int size() {
        return size;
    }

    public boolean isEmpty() {
        return size == 0;
    }

} 
```

# C - 3) 演示代码

```
public class TestMyQueue {

    public static void main(String[] args) {
        MyQueue<Integer> queue = new MyQueue<>();

        // enqueue integers 1..3
        for(int i = 1; i <= 3; i++)
            queue.enqueue(i);

        // execute 2 dequeue operations 
        for(int i = 0; i < 2; i++)
            System.out.println("Dequeued: " + queue.dequeue());

        // enqueue integers 4..5
        for(int i = 4; i <= 5; i++)
            queue.enqueue(i);

        // dequeue the rest
        while(!queue.isEmpty())
            System.out.println("Dequeued: " + queue.dequeue());
    }

} 
```

# C - 4) 样本输出

```
Dequeued: 1
Dequeued: 2
Dequeued: 3
Dequeued: 4
Dequeued: 5 
```

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2008-09-16T20:58:59.807

您甚至可以只使用一个堆栈来模拟队列。第二个（临时）堆栈可以通过对插入方法的递归调用的调用堆栈来模拟。

将新元素插入队列时，原理保持不变：

*   您需要将元素从一个堆栈转移到另一个临时堆栈，以颠倒它们的顺序。
*   然后将要插入的新元素推入临时堆栈
*   然后将元素转移回原始堆栈
*   新元素将在栈底，最旧的元素在栈顶（首先被弹出）

仅使用一个 Stack 的 Queue 类如下所示：

```
public class SimulatedQueue<E> {
    private java.util.Stack<E> stack = new java.util.Stack<E>();

    public void insert(E elem) {
        if (!stack.empty()) {
            E topElem = stack.pop();
            insert(elem);
            stack.push(topElem);
        }
        else
            stack.push(elem);
    }

    public E remove() {
        return stack.pop();
    }
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-09-16T03:40:44.967

不过，时间复杂度会更糟。一个好的队列实现在恒定时间内完成所有事情。

**编辑**

不知道为什么我的回答在这里被否决了。如果我们编程，我们关心时间复杂度，使用两个标准栈来做一个队列是低效的。这是一个非常有效和相关的观点。如果其他人觉得有必要对此投反对票，我很想知道为什么。

*更多细节*：关于为什么使用两个堆栈比仅使用一个队列更糟糕：如果您使用两个堆栈，并且有人在发件箱为空时调用 dequeue，您需要线性时间才能到达收件箱的底部（如您所见在戴夫的代码中）。

您可以将队列实现为单链表（每个元素指向下一个插入的元素），保留一个指向最后插入元素的额外指针以进行推送（或使其成为循环列表）。在这个数据结构上实现队列和出队很容易在常数时间内完成。这是最坏情况下的常数时间，没有摊销。而且，正如评论似乎要求澄清的那样，最坏情况下的常数时间严格优于摊销常数时间。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-03-30T22:34:40.437

设要实现的队列为 q，用于实现 q 的堆栈为 stack1 和 stack2。

q 可以通过**两种**方式实现：

**方法 1（通过使 enQueue 操作代价高昂）**

此方法确保新进入的元素始终位于堆栈 1 的顶部，因此 deQueue 操作仅从堆栈 1 弹出。要将元素放在 stack1 的顶部，请使用 stack2。

```
enQueue(q, x)
1) While stack1 is not empty, push everything from stack1 to stack2.
2) Push x to stack1 (assuming size of stacks is unlimited).
3) Push everything back to stack1.
deQueue(q)
1) If stack1 is empty then error
2) Pop an item from stack1 and return it. 
```

**方法 2（通过使 deQueue 操作成本高昂）**

在此方法中，在入队操作中，新元素进入 stack1 的顶部。在出队操作中，如果 stack2 为空，则将所有元素移动到 stack2，最后返回 stack2 的顶部。

```
enQueue(q,  x)
 1) Push x to stack1 (assuming size of stacks is unlimited).

deQueue(q)
 1) If both stacks are empty then error.
 2) If stack2 is empty
   While stack1 is not empty, push everything from stack1 to stack2.
 3) Pop the element from stack2 and return it. 
```

方法 2 肯定比方法 1 好。方法 1 在 enQueue 操作中移动所有元素两次，而方法 2（在 deQueue 操作中）移动元素一次，只有在 stack2 为空时才移动元素。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-09-19T10:05:11.347

使用堆栈实现队列的以下操作。

push(x) -- 将元素 x 推到队列的后面。

pop() -- 从队列前面移除元素。

peek() -- 获取最前面的元素。

empty() -- 返回队列是否为空。

[![在此处输入图像描述](https://i.stack.imgur.com/LQJBQ.png)](https://i.stack.imgur.com/LQJBQ.png)

```
class MyQueue {

  Stack<Integer> input;
  Stack<Integer> output;

  /** Initialize your data structure here. */
  public MyQueue() {
    input = new Stack<Integer>();
    output = new Stack<Integer>();
  }

  /** Push element x to the back of queue. */
  public void push(int x) {
    input.push(x);
  }

  /** Removes the element from in front of queue and returns that element. */
  public int pop() {
    peek();
    return output.pop();
  }

  /** Get the front element. */
  public int peek() {
    if(output.isEmpty()) {
        while(!input.isEmpty()) {
            output.push(input.pop());
        }
    }
    return output.peek();
  }

  /** Returns whether the queue is empty. */
  public boolean empty() {
    return input.isEmpty() && output.isEmpty();
  }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-05-31T00:08:56.520

c#中的一个解决方案

```
public class Queue<T> where T : class
{
    private Stack<T> input = new Stack<T>();
    private Stack<T> output = new Stack<T>();
    public void Enqueue(T t)
    {
        input.Push(t);
    }

    public T Dequeue()
    {
        if (output.Count == 0)
        {
            while (input.Count != 0)
            {
                output.Push(input.Pop());
            }
        }

        return output.Pop();
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-16T04:26:11.707

You'll have to pop everything off the first stack to get the bottom element. Then put them all back onto the second stack for every "dequeue" operation.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-29T02:02:15.273

队列中的两个堆栈定义为*stack1*和*stack2*。

**Enqueue：** 入队的元素总是被推入*stack1*

**出队：***stack2* 的顶部可以弹出，因为它是*stack2*不为空时插入队列的第一个元素。当*stack2*为空时，我们从*stack1*中弹出所有元素，并将它们一个一个地推入*stack2*。队列中的第一个元素被推入*stack1*的底部。*由于它位于stack2*的顶部，因此可以在弹出和推送操作后直接弹出。

以下是相同的 C++ 示例代码：

```
template <typename T> class CQueue
{
public:
    CQueue(void);
    ~CQueue(void);

    void appendTail(const T& node); 
    T deleteHead();                 

private:
    stack<T> stack1;
    stack<T> stack2;
};

template<typename T> void CQueue<T>::appendTail(const T& element) {
    stack1.push(element);
} 

template<typename T> T CQueue<T>::deleteHead() {
    if(stack2.size()<= 0) {
        while(stack1.size()>0) {
            T& data = stack1.top();
            stack1.pop();
            stack2.push(data);
        }
    }

    if(stack2.size() == 0)
        throw new exception("queue is empty");

    T head = stack2.top();
    stack2.pop();

    return head;
} 
```

[这个解决方案是从我的博客](http://codercareer.blogspot.com/2011/10/no-17-queue-implemented-with-two-stacks.html)中借来的。在我的博客网页中可以找到更详细的分步操作模拟分析。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-11-15T05:55:56.280

**对于 c# 开发人员，这里是完整的程序：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace QueueImplimentationUsingStack
{
    class Program
    {
        public class Stack<T>
        {
            public int size;
            public Node<T> head;
            public void Push(T data)
            {
                Node<T> node = new Node<T>();
                node.data = data;
                if (head == null)
                    head = node;
                else
                {
                    node.link = head;
                    head = node;
                }
                size++;
                Display();
            }
            public Node<T> Pop()
            {
                if (head == null)
                    return null;
                else
                {
                    Node<T> temp = head;
                    //temp.link = null;
                    head = head.link;
                    size--;
                    Display();
                    return temp;
                }
            }
            public void Display()
            {
                if (size == 0)
                    Console.WriteLine("Empty");
                else
                {
                    Console.Clear();
                    Node<T> temp = head;
                    while (temp!= null)
                    {
                        Console.WriteLine(temp.data);
                        temp = temp.link;
                    }
                }
            }
        }

        public class Queue<T>
        {
            public int size;
            public Stack<T> inbox;
            public Stack<T> outbox;
            public Queue()
            {
                inbox = new Stack<T>();
                outbox = new Stack<T>();
            }
            public void EnQueue(T data)
            {
                inbox.Push(data);
                size++;
            }
            public Node<T> DeQueue()
            {
                if (outbox.size == 0)
                {
                    while (inbox.size != 0)
                    {
                        outbox.Push(inbox.Pop().data);
                    }
                }
                Node<T> temp = new Node<T>();
                if (outbox.size != 0)
                {
                    temp = outbox.Pop();
                    size--;
                }
                return temp;
            }

        }
        public class Node<T>
        {
            public T data;
            public Node<T> link;
        }

        static void Main(string[] args)
        {
            Queue<int> q = new Queue<int>();
            for (int i = 1; i <= 3; i++)
                q.EnQueue(i);
           // q.Display();
            for (int i = 1; i < 3; i++)
                q.DeQueue();
            //q.Display();
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-10-17T17:41:38.783

在 Swift 中使用两个堆栈实现队列：

```
struct Stack<Element> {
    var items = [Element]()

    var count : Int {
        return items.count
    }

    mutating func push(_ item: Element) {
        items.append(item)
    }

    mutating func pop() -> Element? {
        return items.removeLast()
    }

    func peek() -> Element? {
        return items.last
    }
}

struct Queue<Element> {
    var inStack = Stack<Element>()
    var outStack = Stack<Element>()

    mutating func enqueue(_ item: Element) {
        inStack.push(item)
    }

    mutating func dequeue() -> Element? {
        fillOutStack() 
        return outStack.pop()
    }

    mutating func peek() -> Element? {
        fillOutStack()
        return outStack.peek()
    }

    private mutating func fillOutStack() {
        if outStack.count == 0 {
            while inStack.count != 0 {
                outStack.push(inStack.pop()!)
            }
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-05-27T03:02:42.573

虽然您会收到很多与实现具有两个堆栈的队列相关的帖子：1\. 要么使 enQueue 过程成本更高 2\. 要么使 deQueue 过程成本更高

[https://www.geeksforgeeks.org/queue-using-stacks/](https://www.geeksforgeeks.org/queue-using-stacks/)

我从上面的帖子中发现的一种重要方法是仅使用堆栈数据结构和递归调用堆栈构建队列。

虽然有人可以争辩说这仍然使用两个堆栈，但理想情况下它只使用一个堆栈数据结构。

下面是问题的解释：

1.  声明一个堆栈用于对数据进行入队和出队，并将数据推送到堆栈中。

2.  而 deQueueing 有一个基本条件，即当堆栈大小为 1 时弹出堆栈的元素。这将确保 deQueue 递归期间没有堆栈溢出。

3.  在 deQueueing 时首先从栈顶弹出数据。理想情况下，该元素将是位于堆栈顶部的元素。现在一旦完成，递归调用 deQueue 函数，然后将上面弹出的元素推回堆栈。

代码如下所示：

```
if (s1.isEmpty())
System.out.println("The Queue is empty");
        else if (s1.size() == 1)
            return s1.pop();
        else {
            int x = s1.pop();
            int result = deQueue();
            s1.push(x);
            return result; 
```

这样，您可以使用单个堆栈数据结构和递归调用堆栈创建队列。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-01-20T08:09:09.463

下面是使用 ES6 语法的 javascript 语言解决方案。

**堆栈.js**

```
//stack using array
class Stack {
  constructor() {
    this.data = [];
  }

  push(data) {
    this.data.push(data);
  }

  pop() {
    return this.data.pop();
  }

  peek() {
    return this.data[this.data.length - 1];
  }

  size(){
    return this.data.length;
  }
}

export { Stack }; 
```

**QueueUsingTwoStacks.js**

```
import { Stack } from "./Stack";

class QueueUsingTwoStacks {
  constructor() {
    this.stack1 = new Stack();
    this.stack2 = new Stack();
  }

  enqueue(data) {
    this.stack1.push(data);
  }

  dequeue() {
    //if both stacks are empty, return undefined
    if (this.stack1.size() === 0 && this.stack2.size() === 0)
      return undefined;

    //if stack2 is empty, pop all elements from stack1 to stack2 till stack1 is empty
    if (this.stack2.size() === 0) {
      while (this.stack1.size() !== 0) {
        this.stack2.push(this.stack1.pop());
      }
    }

    //pop and return the element from stack 2
    return this.stack2.pop();
  }
}

export { QueueUsingTwoStacks }; 
```

下面是用法：

**index.js**

```
import { StackUsingTwoQueues } from './StackUsingTwoQueues';

let que = new QueueUsingTwoStacks();
que.enqueue("A");
que.enqueue("B");
que.enqueue("C");

console.log(que.dequeue());  //output: "A" 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-10-13T07:33:04.120

With `O(1)` `dequeue()`，这与 pythonquick 的[答案](https://stackoverflow.com/a/77010/58678)相同：

```
// time: O(n), space: O(n)
enqueue(x):
    if stack.isEmpty():
        stack.push(x)
        return
    temp = stack.pop()
    enqueue(x)
    stack.push(temp)

// time: O(1)
x dequeue():
    return stack.pop() 
```

With `O(1)` `enqueue()`（这篇文章中没有提到这个，所以这个答案），它也使用回溯来冒泡并返回最底部的项目。

```
// O(1)
enqueue(x):
    stack.push(x)

// time: O(n), space: O(n)
x dequeue():
    temp = stack.pop()
    if stack.isEmpty():
        x = temp
    else:
        x = dequeue()
        stack.push(temp)
    return x 
```

显然，这是一个很好的编码练习，因为它虽然效率低但很优雅。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-05-22T16:08:49.340

我将在 Go 中回答这个问题，因为 Go 在其标准库中没有丰富的集合。

由于堆栈真的很容易实现，我想我会尝试使用两个堆栈来完成一个双端队列。为了更好地理解我是如何得出答案的，我将实现分为两部分，希望第一部分更容易理解，但并不完整。

```
type IntQueue struct {
    front       []int
    back        []int
}

func (q *IntQueue) PushFront(v int) {
    q.front = append(q.front, v)
}

func (q *IntQueue) Front() int {
    if len(q.front) > 0 {
        return q.front[len(q.front)-1]
    } else {
        return q.back[0]
    }
}

func (q *IntQueue) PopFront() {
    if len(q.front) > 0 {
        q.front = q.front[:len(q.front)-1]
    } else {
        q.back = q.back[1:]
    }
}

func (q *IntQueue) PushBack(v int) {
    q.back = append(q.back, v)
}

func (q *IntQueue) Back() int {
    if len(q.back) > 0 {
        return q.back[len(q.back)-1]
    } else {
        return q.front[0]
    }
}

func (q *IntQueue) PopBack() {
    if len(q.back) > 0 {
        q.back = q.back[:len(q.back)-1]
    } else {
        q.front = q.front[1:]
    }
} 
```

它基本上是两个堆栈，我们允许堆栈的底部相互操作。我还使用了 STL 命名约定，其中堆栈的传统 push、pop、peek 操作具有前/后前缀，无论它们是指队列的前面还是后面。

上述代码的问题在于它不能非常有效地使用内存。实际上，它会无限增长，直到空间不足。这真的很糟糕。解决此问题的方法是尽可能简单地重用堆栈空间的底部。我们必须引入偏移量来跟踪这一点，因为 Go 中的切片一旦缩小就不能在前面增长。

```
type IntQueue struct {
    front       []int
    frontOffset int
    back        []int
    backOffset  int
}

func (q *IntQueue) PushFront(v int) {
    if q.backOffset > 0 {
        i := q.backOffset - 1
        q.back[i] = v
        q.backOffset = i
    } else {
        q.front = append(q.front, v)
    }
}

func (q *IntQueue) Front() int {
    if len(q.front) > 0 {
        return q.front[len(q.front)-1]
    } else {
        return q.back[q.backOffset]
    }
}

func (q *IntQueue) PopFront() {
    if len(q.front) > 0 {
        q.front = q.front[:len(q.front)-1]
    } else {
        if len(q.back) > 0 {
            q.backOffset++
        } else {
            panic("Cannot pop front of empty queue.")
        }
    }
}

func (q *IntQueue) PushBack(v int) {
    if q.frontOffset > 0 {
        i := q.frontOffset - 1
        q.front[i] = v
        q.frontOffset = i
    } else {
        q.back = append(q.back, v)
    }
}

func (q *IntQueue) Back() int {
    if len(q.back) > 0 {
        return q.back[len(q.back)-1]
    } else {
        return q.front[q.frontOffset]
    }
}

func (q *IntQueue) PopBack() {
    if len(q.back) > 0 {
        q.back = q.back[:len(q.back)-1]
    } else {
        if len(q.front) > 0 {
            q.frontOffset++
        } else {
            panic("Cannot pop back of empty queue.")
        }
    }
} 
```

这是很多小功能，但在 6 个功能中，其中 3 个只是另一个的镜像。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-04-22T02:42:18.007

我的 PHP 解决方案

```
<?php
$_fp = fopen("php://stdin", "r");
/* Enter your code here. Read input from STDIN. Print output to STDOUT */
    $queue = array();
    $count = 0;
    while($line = fgets($_fp)) {
        if($count == 0) {
            $noOfElement = $line;
            $count++;
            continue;
        }
        $action = explode(" ",$line);
        $case = $action[0];
        switch($case) {
            case 1:
                $enqueueValue = $action[1];
                array_push($queue, $enqueueValue);
                break;
            case 2:
                array_shift($queue);
                break;
            case 3:
                $show = reset($queue);
                print_r($show);
                break;
            default:
                break;
        }
    }
?> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-10-13T06:49:05.030

```
// Two stacks s1 Original and s2 as Temp one
    private Stack<Integer> s1 = new Stack<Integer>();
    private Stack<Integer> s2 = new Stack<Integer>();

    /*
     * Here we insert the data into the stack and if data all ready exist on
     * stack than we copy the entire stack s1 to s2 recursively and push the new
     * element data onto s1 and than again recursively call the s2 to pop on s1.
     * 
     * Note here we can use either way ie We can keep pushing on s1 and than
     * while popping we can remove the first element from s2 by copying
     * recursively the data and removing the first index element.
     */
    public void insert( int data )
    {
        if( s1.size() == 0 )
        {
            s1.push( data );
        }
        else
        {
            while( !s1.isEmpty() )
            {
                s2.push( s1.pop() );
            }
            s1.push( data );
            while( !s2.isEmpty() )
            {
                s1.push( s2.pop() );
            }
        }
    }

    public void remove()
    {
        if( s1.isEmpty() )
        {
            System.out.println( "Empty" );
        }
        else
        {
            s1.pop();

        }
    } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-06-10T14:19:49.347

**简单的JS解决方案**

*   注意：我从其他人的评论中获得了想法

```
/*

enQueue(q,  x)
 1) Push x to stack1 (assuming size of stacks is unlimited).

deQueue(q)
 1) If both stacks are empty then error.
 2) If stack2 is empty
   While stack1 is not empty, push everything from stack1 to stack2.
 3) Pop the element from stack2 and return it.

*/
class myQueue {
    constructor() {
        this.stack1 = [];
        this.stack2 = [];
    }

    push(item) {
        this.stack1.push(item)
    }

    remove() {
        if (this.stack1.length == 0 && this.stack2.length == 0) {
            return "Stack are empty"
        }

        if (this.stack2.length == 0) {

            while (this.stack1.length != 0) {
                this.stack2.push(this.stack1.pop())
            }
        }
        return this.stack2.pop()
    }

    peek() {
        if (this.stack2.length == 0 && this.stack1.length == 0) {
            return 'Empty list'
        }

        if (this.stack2.length == 0) {
            while (this.stack1.length != 0) {
                this.stack2.push(this.stack1.pop())
            }
        }

        return this.stack2[0]
    }

    isEmpty() {
        return this.stack2.length === 0 && this.stack1.length === 0;
    }

}

const q = new myQueue();
q.push(1);
q.push(2);
q.push(3);
q.remove()

console.log(q)
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2012-04-11T17:54:14.877

```
public class QueueUsingStacks<T>
{
    private LinkedListStack<T> stack1;
    private LinkedListStack<T> stack2;

    public QueueUsingStacks()
    {
        stack1=new LinkedListStack<T>();
        stack2 = new LinkedListStack<T>();

    }
    public void Copy(LinkedListStack<T> source,LinkedListStack<T> dest )
    {
        while(source.Head!=null)
        {
            dest.Push(source.Head.Data);
            source.Head = source.Head.Next;
        }
    }
    public void Enqueue(T entry)
    {

       stack1.Push(entry);
    }
    public T Dequeue()
    {
        T obj;
        if (stack2 != null)
        {
            Copy(stack1, stack2);
             obj = stack2.Pop();
            Copy(stack2, stack1);
        }
        else
        {
            throw new Exception("Stack is empty");
        }
        return obj;
    }

    public void Display()
    {
        stack1.Display();
    }

} 
```

对于每个入队操作，我们添加到堆栈的顶部1。对于每个出队，我们将stack1的内容清空到stack2中，并删除栈顶的元素。出队的时间复杂度为O(n)，因为我们必须将stack1复制到stack2。enqueue 的时间复杂度和普通栈一样

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-09-24T13:32:41.467

这是我在 Java 中使用链表的解决方案。

```
class queue<T>{
    static class Node<T>{
        private T data;
        private Node<T> next;
        Node(T data){
            this.data = data;
            next = null;
        }
    }
    Node firstTop;
    Node secondTop;

    void push(T data){
        Node temp = new Node(data);
        temp.next = firstTop;
        firstTop = temp;
    }

    void pop(){
        if(firstTop == null){
            return;
        }
        Node temp = firstTop;
        while(temp != null){
            Node temp1 = new Node(temp.data);
            temp1.next = secondTop;
            secondTop = temp1;
            temp = temp.next;
        }
        secondTop = secondTop.next;
        firstTop = null;
        while(secondTop != null){
            Node temp3 = new Node(secondTop.data);
            temp3.next = firstTop;
            firstTop = temp3;
            secondTop = secondTop.next;
        }
    }

} 
```

**注意：**在这种情况下，弹出操作非常耗时。所以我不建议使用两个堆栈创建一个队列。

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2016-08-06T08:04:40.213

使用两个 java.util.Stack 对象的队列实现：

```
public final class QueueUsingStacks<E> {

        private final Stack<E> iStack = new Stack<>();
        private final Stack<E> oStack = new Stack<>();

        public void enqueue(E e) {
            iStack.push(e);
        }

        public E dequeue() {
            if (oStack.isEmpty()) {
                if (iStack.isEmpty()) {
                    throw new NoSuchElementException("No elements present in Queue");
                }
                while (!iStack.isEmpty()) {
                    oStack.push(iStack.pop());
                }
            }
            return oStack.pop();
        }

        public boolean isEmpty() {
            if (oStack.isEmpty() && iStack.isEmpty()) {
                return true;
            }
            return false;
        }

        public int size() {
            return iStack.size() + oStack.size();
        }

} 
```

# c - 当指向前一个节点的指针不可用时，从单个链表中删除中间节点

> ID：69209
> 
> 赞同：40
> 
> 时间：2008-09-16T03:41:09.210
> 
> 标签：c, data-structures, linked-list

当我们唯一可用的信息是指向要删除的节点的指针而不是指向前一个节点的指针时，是否可以删除单链表中的中间节点？删除后，前一个节点应该指向下一个节点删除的节点。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2008-09-16T04:14:01.703

It's definitely more a quiz rather than a real problem. However, if we are allowed to make some assumption, it can be solved in O(1) time. To do it, the strictures the list points to must be copyable. The algorithm is as the following:

We have a list looking like: ... -> Node(i-1) -> Node(i) -> Node(i+1) -> ... and we need to delete Node(i).

1.  Copy data (not pointer, the data itself) from Node(i+1) to Node(i), the list will look like: ... -> Node(i-1) -> Node(i+1) -> Node(i+1) -> ...
2.  Copy the NEXT of second Node(i+1) into a temporary variable.
3.  Now Delete the second Node(i+1), it doesn't require pointer to the previous node.

Pseudocode:

```
void delete_node(Node* pNode)
{
    pNode->Data = pNode->Next->Data;  // Assume that SData::operator=(SData&) exists.
    Node* pTemp = pNode->Next->Next;
    delete(pNode->Next);
    pNode->Next = pTemp;
} 
```

Mike.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-09-16T04:06:00.133

让我们假设一个具有结构的列表

A -> B -> C -> D

如果你只有一个指向 B 的指针并想删除它，你可以做类似的事情

```
tempList = B->next;
*B = *tempList;
free(tempList); 
```

然后列表看起来像

A -> B -> D

但是 B 会保存 C 的旧内容，从而有效地删除 B 中的内容。如果其他一些代码持有指向 C 的指针，这将不起作用。如果您试图删除节点 D，它也将不起作用。如果你想做这种操作，你需要用一个没有真正使用的虚拟尾节点来构建列表，这样你就可以保证没有有用的节点会有一个空的下一个指针。这对于存储在节点中的数据量很小的列表也更有效。像这样的结构

```
struct List { struct List *next; MyData *data; }; 
```

会好的，但它的一个地方

```
struct HeavyList { struct HeavyList *next; char data[8192]; }; 
```

会有点负担。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2010-12-28T11:07:54.410

不可能。

有一些黑客可以模仿删除。

但是这些都不会真正删除指针指向的节点。

**如果您有指向列表中节点的外部指针，删除****以下**节点并将其内容复制到要删除的**实际**节点的流行解决方案会产生副作用，在这种情况下，指向以下节点的外部指针将变得悬空。

 *** * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-12-15T23:06:30.530

我很欣赏这个解决方案的独创性（删除下一个节点），但它没有回答问题的问题。如果这是实际的解决方案，那么正确的问题应该是“从链表中删除包含在给定指针的节点中的 VALUE”。但是，当然，正确的问题会给你一个解决方案的提示。制定的问题是为了迷惑人（这实际上发生在我身上，特别是因为面试官甚至没有提到节点在中间）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-16T03:49:00.517

一种方法是为数据插入一个空值。每当您遍历列表时，您都会跟踪前一个节点。如果找到空数据，则修复列表，然后转到下一个节点。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-18T05:22:13.380

最好的做法还是将next节点的数据复制到要删除的节点中，将该节点的next指针设置为next节点的next指针，然后删除next节点。

指向要删除的节点的外部指针的问题虽然是真的，但也适用于下一个节点。考虑以下链表：

A->B->C->D->E->F 和 G->H->I->D->E->F

如果您必须删除节点 C（在第一个链表中），通过上述方法，您将在将内容复制到节点 C 后删除节点 D。这将导致以下列表：

A->B->D->E->F 和 G->H->I->悬空指针。

如果您完全删除 NODE C，结果列表将是：

A->B->D->E->F 和 G->H->I->D->E->F。

但是，如果您要删除节点 D，并且使用前面的方法，外部指针的问题仍然存在。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-16T03:46:49.697

最初的建议是改造：

a -> b -> c

至：

一个->，c

如果您保留信息，例如从节点地址到下一个节点地址的映射，那么您可以在下一次修复链以遍历列表。如果需要在下一次遍历之前删除多个项目，那么您需要跟踪删除的顺序（即更改列表）。

标准解决方案是考虑其他数据结构，如跳过列表。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-16T03:48:21.347

也许做一个软删除？（即，在节点上设置“已删除”标志）如果需要，您可以稍后清理列表。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-16T03:43:27.097

如果您想保持列表的可遍历性，则不是。您需要更新前一个节点以链接到下一个节点。

无论如何，你是怎么落到这种境地的？你想做什么让你问这个问题？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-16T03:47:31.067

您必须沿着列表向下移动才能找到上一个节点。这将使删除通常为 O(n**2)。如果您是唯一执行删除的代码，您可以通过缓存前一个节点并在那里开始搜索来在实践中做得更好，但这是否有帮助取决于删除的模式。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T04:33:06.807

Given

A -> B -> C -> D

and a pointer to, say, item B, you would delete it by
1\. free any memory belonging to members of B
2\. copy the contents of C into B (this includes its "next" pointer)
3\. delete the entire item C

Of course, you'll have to be careful about edge cases, such as working on lists of one item.

Now where there was B, you have C and the storage that used to be C is freed.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-09-20T17:17:56.363

考虑下面的链表

> 1 -> 2 -> 3 -> 空
> 
> 指向节点 2 的指针被指定为“ptr”。

我们可以有如下所示的伪代码：

```
struct node* temp = ptr->next;
ptr->data = temp->data;
ptr->next = temp->next;
free(temp); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T03:42:03.030

是的，但你不能取消链接。如果您不关心损坏内存，请继续；-)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T03:45:51.663

是的，但您的列表将在您删除后被破坏。

在这种特定情况下，再次遍历列表并获取该指针！一般来说，如果你问这个问题，你所做的事情可能存在一个错误。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T03:48:17.803

为了到达上一个列表项，您需要从头开始遍历列表，直到找到一个带有`next`指向当前项的指针的条目。然后，您将拥有一个指向您必须修改以从列表中删除当前项目的每个项目的指针 - 只需设置`previous->next`为`current->next`然后 delete `current`。

编辑：Kimbo 以不到一分钟的时间击败了我！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-16T03:50:57.983

您可以延迟取消链接，您可以使用标志将节点从列表中取消链接，然后在下一次正确遍历时将其删除。设置为断开链接的节点需要由爬取列表的代码正确处理。

我想您也可以从头开始再次遍历列表，直到找到指向列表中您的项目的东西。几乎不是最优的，但至少比延迟分离要好得多。

一般来说，您应该知道指向您刚刚来自的项目的指针，并且应该传递它。

（编辑：Ick，随着我输入完整答案的时间，三亿人几乎涵盖了我要提到的所有要点。:()

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-16T03:58:23.537

唯一明智的做法是用几个指针遍历列表，直到前导找到要删除的节点，然后使用尾随指针更新下一个字段。

如果您想有效地从列表中删除随机项目，则需要对其进行双重链接。但是，如果您想从列表的头部获取项目并将它们添加到尾部，则不需要双重链接整个列表。单独链接列表，但使列表中最后一项的下一个字段指向列表中的第一项。然后使列表“头”指向尾部项目（而不是头部）。然后很容易添加到列表的尾部或从头部删除。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-16T04:09:15.587

You have the head of the list, right? You just traverse it.

Let's say that your list is pointed to by "head" and the node to delete it "del".

C style pseudo-code (dots would be -> in C):

```
prev = head
next = prev.link

while(next != null)
{
  if(next == del)
  {
    prev.link = next.link;
    free(del);
    del = null;
    return 0;
  }
  prev = next;
  next = next.link;
}

return 1; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2010-09-03T12:25:02.903

如果你有一个链表 A -> B -> C -> D 和一个指向节点 B 的指针。如果你必须删除这个节点，你可以将节点 C 的内容复制到 B，将节点 D 复制到 C 并删除 D。但是在单链表的情况下，我们不能像这样删除节点，因为如果这样做，节点 A 也会丢失。虽然我们可以在双向链表的情况下回溯到 A。

我对吗？

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-06-16T11:08:48.577

下面的代码将创建一个 LL，n 然后要求用户将指针指向要删除的节点。它将在删除后打印列表它的作用与通过复制要删除的节点之后的节点，覆盖要删除的节点然后删除要删除的节点的下一个节点来完成相同的操作。IE

A B C D

将 c 复制到 b 并释放 c 以便结果为

acd

```
struct node  
{
    int data;
    struct node *link;
 };

void populate(struct node **,int);

void delete(struct node **);

void printlist(struct node **);

void populate(struct node **n,int num)
{

    struct node *temp,*t;
    if(*n==NULL)
    {
        t=*n;
        t=malloc(sizeof(struct node));
        t->data=num;
        t->link=NULL;
        *n=t;
    }
    else
    {
        t=*n;
        temp=malloc(sizeof(struct node));
        while(t->link!=NULL)
            t=t->link;
        temp->data=num;
        temp->link=NULL;
        t->link=temp;
    }
}

void printlist(struct node **n)
{
    struct node *t;
    t=*n;
    if(t==NULL)
        printf("\nEmpty list");

    while(t!=NULL)
    {
        printf("\n%d",t->data);
        printf("\t%u address=",t);
        t=t->link;
    }
}

void delete(struct node **n)
{
    struct node *temp,*t;
    temp=*n;
    temp->data=temp->link->data;
    t=temp->link;
    temp->link=temp->link->link;
    free(t);
}    

int main()
{
    struct node *ty,*todelete;
    ty=NULL;
    populate(&ty,1);
    populate(&ty,2);
    populate(&ty,13);
    populate(&ty,14);
    populate(&ty,12);
    populate(&ty,19);

    printf("\nlist b4 delete\n");
    printlist(&ty);

    printf("\nEnter node pointer to delete the node====");
    scanf("%u",&todelete);
    delete(&todelete);

    printf("\nlist after delete\n");
    printlist(&ty);

    return 0;
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-03-12T08:27:18.727

这是我放在一起的一段代码，它可以满足 OP 的要求，甚至可以删除列表中的最后一个元素（不是以最优雅的方式，但它可以完成）。一边学习如何使用链表一边写的。希望能帮助到你。

```
#include <cstdlib>
#include <ctime>
#include <iostream>
#include <string>

using namespace std;

struct node
{
    int nodeID;
    node *next;
};

void printList(node* p_nodeList, int removeID);
void removeNode(node* p_nodeList, int nodeID);
void removeLastNode(node* p_nodeList, int nodeID ,node* p_lastNode);

node* addNewNode(node* p_nodeList, int id)
{
    node* p_node = new node;
    p_node->nodeID = id;
    p_node->next = p_nodeList;
    return p_node;
}

int main()
{
    node* p_nodeList = NULL;
    int nodeID = 1;
    int removeID;
    int listLength;
    cout << "Pick a list length: ";
    cin >> listLength;
    for (int i = 0; i < listLength; i++)
    {
        p_nodeList = addNewNode(p_nodeList, nodeID);
        nodeID++;
    }
    cout << "Pick a node from 1 to " << listLength << " to remove: ";
    cin >> removeID;
    while (removeID <= 0 || removeID > listLength)
    {
        if (removeID == 0)
        {
            return 0;
        }
        cout << "Please pick a number from 1 to " << listLength << ": ";
        cin >> removeID;
    }
    removeNode(p_nodeList, removeID);
    printList(p_nodeList, removeID);
}

void printList(node* p_nodeList, int removeID)
{
    node* p_currentNode = p_nodeList;
    if (p_currentNode != NULL)
    {
        p_currentNode = p_currentNode->next;
        printList(p_currentNode, removeID);
        if (removeID != 1)
        {
            if (p_nodeList->nodeID != 1)
            {
                cout << ", ";
            }

            cout << p_nodeList->nodeID;
        }
        else
        {
            if (p_nodeList->nodeID !=2)
            {
                cout << ", ";
            }
            cout << p_nodeList->nodeID;
        }
    }
}

void removeNode(node* p_nodeList, int nodeID)
{
    node* p_currentNode = p_nodeList;
    if (p_currentNode->nodeID == nodeID)
    {
        if(p_currentNode->next != NULL)
        {
            p_currentNode->nodeID = p_currentNode->next->nodeID;
            node* p_temp = p_currentNode->next->next;
            delete(p_currentNode->next);
            p_currentNode->next = p_temp;
        }
        else
        {
            delete(p_currentNode);
        }
    }
    else if(p_currentNode->next->next == NULL)
    {
        removeLastNode(p_currentNode->next, nodeID, p_currentNode);
    }
    else
    {
        removeNode(p_currentNode->next, nodeID);
    }
}

void removeLastNode(node* p_nodeList, int nodeID ,node* p_lastNode)
{
    node* p_currentNode = p_nodeList;
    p_lastNode->next = NULL;
    delete (p_currentNode);
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2010-02-21T17:11:11.293

```
void delself(list *list)
{
   /*if we got a pointer to itself how to remove it...*/
   int n;

   printf("Enter the num:");

   scanf("%d",&n);

   while(list->next!=NULL)
   {
       if(list->number==n) /*now pointer in node itself*/
       {
           list->number=list->next->number;
           /*copy all(name,rollnum,mark..) data of next to current, disconect its next*/
           list->next=list->next->next;
       }
       list=list->next;
   }
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2010-02-21T17:20:07.383

```
void delself(list *list)
{
   /*if we got a pointer to itself how to remove it...*/
   int n;

   printf("Enter the num:");
   scanf("%d",&n);

   while(list->next!=NULL)
   {
      if(list->number==n) /*now pointer in node itself*/
      {
         list->number=list->next->number;   /*copy all(name,rollnum,mark..)
                             data of next to current, disconnect its next*/
         list->next=list->next->next;
      }
      list=list->next;
   }
} 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2012-11-23T02:56:54.767

```
Void deleteMidddle(Node* head)
{
     Node* slow_ptr = head;
     Node* fast_ptr = head;
     Node* tmp = head;
     while(slow_ptr->next != NULL && fast_ptr->next != NULL)
     {
        tmp = slow_ptr;
        slow_ptr = slow_ptr->next;
        fast_ptr = fast_ptr->next->next;
     }
     tmp->next = slow_ptr->next;
     free(slow_ptr);
    enter code here

} 
```

# sql-server - SQL Server：列可空性不一致

> ID：69215
> 
> 赞同：1
> 
> 时间：2008-09-16T03:42:08.240
> 
> 标签：sql-server, restore

我有一个只能使用恢复的 SQL Server 2005 数据库

```
Restore Database The_DB_Name
From Disk = 'C:\etc\etc'
With Continue_After_Error 
```

我被告知源数据库很好。还原报告

> 警告：在数据库“The_DB_Name”中对象 ID nnnnn 的索引“IDX_Comp_CompanyId”(index_id = 2) 的元数据中检测到列可空性不一致。索引可能已损坏。运行 DBCC CHECKTABLE 以验证一致性。

```
DBCC CHECKTABLE (Company) 
```

给

> 消息 8967，级别 16，状态 216，第 1 行 DBCC 发生内部错误，阻止进一步处理。联系客户支持服务。
> 
> 消息 8921，级别 16，状态 1，线路 1
> 检查已终止。收集事实时检测到故障。可能是 tempdb 空间不足或系统表不一致。检查以前的错误。

```
Alter Index IDX_Comp_CompanyId On dbo.Company
Rebuild 
```

给我

> 消息 824，级别 24，状态 2，第 1 行
> SQL Server 检测到基于逻辑一致性的 I/O 错误：页面 ID 不正确（预期为 1:77467；实际为 45:2097184）。它发生在读取文件“C:\etc\etc.mdf”中偏移量 0x00000025d36000 的数据库 ID 20 中的页面 (1:77467) 期间。SQL Server 错误日志或系统事件日志中的其他消息可能会提供更多详细信息。这是威胁数据库完整性的严重错误情况，必须立即纠正。完成完整的数据库一致性检查 (DBCC CHECKDB)。这个错误可能是由许多因素引起的；有关详细信息，请参阅 SQL Server 联机丛书。

我有多少麻烦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T03:53:58.663

索引中的损坏并不像基表中的损坏那么严重，因为可以重建索引。

比较源数据库和目标数据库之间的表和索引定义。还要检查两台服务器的版本。（恢复到服务器时备份是否自动升级）删除并重新创建索引并重新运行 CheckTable。

# c# - 从 C# 监视 Oracle DB 中最后一个 INSERT/UPDATE 的片段？

> ID：69230
> 
> 赞同：0
> 
> 时间：2008-09-16T03:46:35.093
> 
> 标签：c#, .net, oracle

我正在寻找一个简单的 C# 代码示例片段来监视 Oracle 数据库并基本上检查它的最后更新。它可以是命令行（非常适合将来与 Nagios 集成）或 GUI。我已经做了一些原型，但代码往往会变得很长，因为我还在学习这门语言。

任何建议/评论将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-20T03:00:38.223

一种可能的解决方案是：

1.  向 MY_TABLE 表添加一个表示上次更新时间的 DATE 字段。

    `ALTER TABLE my_table ADD (last_update_time DATE);`

2.  在该字段上创建索引。

    `CREATE INDEX i_my_table_upd_time ON my_table (last_update_time);`

3.  在该表上创建一个数据库触发器，该触发器触发 ON UPDATE 和 ON INSERT 并将 SYSDATE 存储到新字段中。

    ```
    CREATE OR REPLACE TRIGGER my_table_insert_trg  
    BEFORE INSERT OR UPDATE  
    ON my_table  
    FOR EACH ROW  
    BEGIN  
       :new.last_update_time := SYSDATE;  
    END; 
    ```

现在您可以每 5 分钟发出以下查询

```
SELECT max(last_update_time) FROM my_table; 
```

它将为您提供上次更新表格的时间。

抱歉，没有简单的方法可以从 Oracle 获得通知。

# c++ - 为什么 C/C++ 程序在调试模式下经常会关闭优化？

> ID：69250
> 
> 赞同：14
> 
> 时间：2008-09-16T03:51:07.203
> 
> 标签：c++, c, compiler-construction

在大多数 C 或 C++ 环境中，都有“调试”模式和“发布”模式编译。
查看两者之间的区别，您会发现调试模式添加了调试符号（通常是许多编译器上的 -g 选项），但它也禁用了大多数优化。
在“发布”模式下，您通常会开启各种优化。
为什么有区别？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-09-16T03:51:20.933

如果没有任何优化，通过代码的流程是线性的。如果您在第 5 行且单步，则进入第 6 行。启用优化后，您可以获得指令重新排序、循环展开和各种优化。
例如：

```
 void foo() {
1:  int i;
2:  for(i = 0; i < 2; )
3:    i++;
4:  return; 
```

在此示例中，无需优化，您可以单步执行代码并点击第 1、2、3、2、3、2、4 行

启用优化后，您可能会得到如下所示的执行路径：2、3、3、4 甚至只是 4！（该功能毕竟什么都不做......）

最重要的是，启用优化的调试代码可能会非常痛苦！特别是如果您有大型功能。

请注意，打开优化会更改代码！在某些环境（安全关键系统）中，这是不可接受的，被调试的代码必须是交付的代码。在这种情况下，必须通过优化进行调试。

虽然优化和非优化代码在“功能上”应该是等效的，但在某些情况下，行为会发生变化。
这是一个简单的例子：

```
 `int* ptr = 0xdeadbeef;  // some address to memory-mapped I/O device
    *ptr = 0;   // setup hardware device
    while(*ptr == 1) {    // loop until hardware device is done
       // do something
    }` 
```

`在关闭优化的情况下，这很简单，你有点知道会发生什么。但是，如果您打开优化，可能会发生以下情况：`

 `*   编译器可能会优化 while 块（我们初始化为 0，它永远不会是 1）
*   不是访问内存，而是指针访问可能会移动到寄存器->无 I/O 更新
*   内存访问可能被缓存（不一定与编译器优化相关）

在所有这些情况下，行为都会大不相同，而且很可能是错误的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T04:07:18.633

调试和发布之间的另一个关键区别是局部变量的存储方式。从概念上讲，局部变量在函数堆栈框架中分配存储。编译器生成的符号文件告诉调试器变量在堆栈帧中的偏移量，以便调试器可以显示给你。调试器会查看内存位置来执行此操作。

但是，这意味着每次更改局部变量时，该源代码行的生成代码都必须将值写回堆栈上的正确位置。由于内存开销，这是非常低效的。

在发布版本中，编译器可以将局部变量分配给函数的一部分的寄存器。在某些情况下，它可能根本不为其分配堆栈存储（机器拥有的寄存器越多，这就越容易）。

但是，调试器不知道寄存器如何映射到代码中特定点的局部变量（我不知道包含此信息的任何符号格式），因此它无法准确地向您显示它不不知道去哪里找。

另一个优化是函数内联。在优化的构建中，编译器可能会在任何使用它的地方用 foo 的实际代码替换对 foo() 的调用，因为该函数足够小。但是，当您尝试在 foo() 上设置断点时，调试器想知道 foo() 指令的地址，并且不再有一个简单的答案——可能有数千个 foo() 副本) 代码字节分布在您的程序中。调试版本将保证您可以在某个地方放置断点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T05:59:59.780

优化代码是一个自动化过程，可在保留语义的同时提高代码的运行时性能。此过程可以删除完成表达式或函数评估所不需要的中间结果，但在调试时可能会引起您的兴趣。同样，优化可以改变明显的控制流，使事情发生的顺序与源代码中出现的顺序略有不同。这样做是为了跳过不必要或多余的计算。代码的这种重新调整可能会弄乱源代码行号和目标代码地址之间的映射，从而使调试器很难在您编写它时遵循控制流。

在未优化模式下调试允许您在编写时查看您编写的所有内容，而无需优化器删除或重新排序。

一旦您对程序正常运行感到满意，您就可以打开优化以提高性能。尽管现在优化器非常值得信赖，但构建一个高质量的测试套件以确保您的程序在优化和未优化模式下运行相同（从功能的角度来看，不考虑性能）仍然是一个好主意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T04:08:01.720

期望调试版本被调试！如果每一行非空、非注释源代码都与某些机器代码指令匹配，那么设置断点、单步执行同时观察变量、堆栈跟踪以及您在调试器（IDE 或其他方式）中所做的一切都是有意义的。

大多数优化都与机器代码的顺序相混淆。循环展开就是一个很好的例子。公共子表达式可以从循环中取出。启用优化后，即使是最简单的级别，您也可能会尝试在机器代码级别不存在的行上设置断点。有时您无法监控局部变量，因为它保存在 CPU 寄存器中，或者甚至优化不存在！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T05:46:58.457

如果您在指令级别而不是源代码级别进行调试，那么将未优化的指令映射回源代码对您来说非常容易。此外，编译器的优化器有时会出现错误。

在 Microsoft 的 Windows 部门，所有发布的二进制文件都是用调试符号和全面优化构建的。这些符号存储在单独的 PDB 文件中，不会影响代码的性能。它们不随产品一起提供，但大多数都可以在[Microsoft Symbol Server](http://support.microsoft.com/kb/311503)上获得。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-11T20:58:51.090

优化的另一个问题是内联函数，从某种意义上说，您将始终单步执行它们。

使用 GCC，同时启用调试和优化，如果您不知道会发生什么，您会认为代码行为不端并多次重新执行相同的语句 - 我的几个同事发生了这种情况。实际上，GCC 提供的经过优化的调试信息的质量往往比它们可能的要差。

但是，在 Java 等虚拟机托管的语言中，优化和调试可以共存——即使在调试过程中，JIT 编译为本机代码仍在继续，只有被调试方法的代码透明地转换为未优化的版本。

我想强调的是，优化不应该改变代码的行为，除非使用的优化器有问题，或者代码本身有问题并且依赖于部分未定义的语义；后者在多线程编程或也使用内联汇编时更常见。

> 带有调试符号的代码较大，这可能意味着更多的缓存未命中，即较慢，这可能是服务器软件的问题。

至少在 Linux 上（并且 Windows 没有理由不同）调试信息被打包在二进制文件的单独部分中，并且在正常执行期间不会加载。它们可以拆分为不同的文件以用于调试。此外，在某些编译器（包括 Gcc，我猜还有微软的 C 编译器）上，调试信息和优化可以同时启用。如果没有，显然代码会变慢。

# .net - .NET 中是否有一种简单的方法来获得数字的“st”、“nd”、“rd”和“th”结尾？

> ID：69262
> 
> 赞同：70
> 
> 时间：2008-09-16T03:53:16.387
> 
> 标签：.net, formatting, date, ordinals

我想知道 .NET 中是否缺少用于转换以下内容的方法或格式字符串：

```
 1 to 1st
   2 to 2nd
   3 to 3rd
   4 to 4th
  11 to 11th
 101 to 101st
 111 to 111th 
```

[这个链接](http://www.dotnet-friends.com/fastcode/csharp/fastcodeincsc3bd4149-03d0-40fe-90fd-63bcee77b43e.aspx)有一个关于编写你自己的函数所涉及的基本原则的坏例子，但我更好奇是否有我缺少的内置容量。

**解决方案**

Scott Hanselman 的答案是公认的，因为它直接回答了这个问题。

但是，对于解决方案，请参阅[这个很好的答案](https://stackoverflow.com/questions/69262/is-there-an-easy-way-in-net-to-get-st-nd-rd-and-th-endings-for-numbers#69284)。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2008-09-16T03:57:08.873

这是一个比您想象的要简单得多的功能。尽管为此可能已经存在一个 .NET 函数，但以下函数（用 PHP 编写）可以完成这项工作。移植它应该不会太难。

```
function ordinal($num) {
    $ones = $num % 10;
    $tens = floor($num / 10) % 10;
    if ($tens == 1) {
        $suff = "th";
    } else {
        switch ($ones) {
            case 1 : $suff = "st"; break;
            case 2 : $suff = "nd"; break;
            case 3 : $suff = "rd"; break;
            default : $suff = "th";
        }
    }
    return $num . $suff;
} 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-10-23T22:37:59.273

简单、干净、快速

```
 private static string GetOrdinalSuffix(int num)
    {
        string number = num.ToString();
        if (number.EndsWith("11")) return "th";
        if (number.EndsWith("12")) return "th";
        if (number.EndsWith("13")) return "th";
        if (number.EndsWith("1")) return "st";
        if (number.EndsWith("2")) return "nd";
        if (number.EndsWith("3")) return "rd";
        return "th";
    } 
```

或者更好的是，作为一种扩展方法

```
public static class IntegerExtensions
{
    public static string DisplayWithSuffix(this int num)
    {
        string number = num.ToString();
        if (number.EndsWith("11")) return number + "th";
        if (number.EndsWith("12")) return number + "th";
        if (number.EndsWith("13")) return number + "th";
        if (number.EndsWith("1")) return number + "st";
        if (number.EndsWith("2")) return number + "nd";
        if (number.EndsWith("3")) return number + "rd";
        return number + "th";
    }
} 
```

现在你可以打电话

```
int a = 1;
a.DisplayWithSuffix(); 
```

甚至直接

```
1.DisplayWithSuffix(); 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2008-09-16T03:56:07.880

不，.NET 基类库中没有内置功能。

* * *

## 回答 #4

> 赞同：55
> 
> 时间：2008-09-16T04:11:42.770

@nickf：这是 C# 中的 PHP 函数：

```
public static string Ordinal(int number)
{
    string suffix = String.Empty;

    int ones = number % 10;
    int tens = (int)Math.Floor(number / 10M) % 10;

    if (tens == 1)
    {
        suffix = "th";
    }
    else
    {
        switch (ones)
        {
            case 1:
                suffix = "st";
                break;

            case 2:
                suffix = "nd";
                break;

            case 3:
                suffix = "rd";
                break;

            default:
                suffix = "th";
                break;
        }
    }
    return String.Format("{0}{1}", number, suffix);
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-09-16T03:58:09.310

这已经被覆盖，但我不确定如何链接到它。这是代码片段：

```
 public static string Ordinal(this int number)
    {
        var ones = number % 10;
        var tens = Math.Floor (number / 10f) % 10;
        if (tens == 1)
        {
            return number + "th";
        }

        switch (ones)
        {
            case 1: return number + "st";
            case 2: return number + "nd";
            case 3: return number + "rd";
            default: return number + "th";
        }
    } 
```

仅供参考：这是一种扩展方法。如果您的 .NET 版本低于 3.5，只需删除 this 关键字

[编辑]：感谢您指出这是不正确的，这就是您复制/粘贴代码所得到的:)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2009-03-04T15:51:21.900

这是 Microsoft SQL Server 函数版本：

```
CREATE FUNCTION [Internal].[GetNumberAsOrdinalString]
(
    @num int
)
RETURNS nvarchar(max)
AS
BEGIN

    DECLARE @Suffix nvarchar(2);
    DECLARE @Ones int;  
    DECLARE @Tens int;

    SET @Ones = @num % 10;
    SET @Tens = FLOOR(@num / 10) % 10;

    IF @Tens = 1
    BEGIN
        SET @Suffix = 'th';
    END
    ELSE
    BEGIN

    SET @Suffix = 
        CASE @Ones
            WHEN 1 THEN 'st'
            WHEN 2 THEN 'nd'
            WHEN 3 THEN 'rd'
            ELSE 'th'
        END
    END

    RETURN CONVERT(nvarchar(max), @num) + @Suffix;
END 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-02-15T08:53:44.003

我知道这不是对 OP 问题的回答，但是因为我发现从这个线程中提升 SQL Server 函数很有用，所以这里有一个 Delphi (Pascal) 等价物：

```
function OrdinalNumberSuffix(const ANumber: integer): string;
begin
  Result := IntToStr(ANumber);
  if(((Abs(ANumber) div 10) mod 10) = 1) then // Tens = 1
    Result := Result + 'th'
  else
    case(Abs(ANumber) mod 10) of
      1: Result := Result + 'st';
      2: Result := Result + 'nd';
      3: Result := Result + 'rd';
      else
        Result := Result + 'th';
    end;
end; 
```

..., -1st, 0th 有意义吗？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-12T17:25:58.263

另一种味道：

```
/// <summary>
/// Extension methods for numbers
/// </summary>
public static class NumericExtensions
{
    /// <summary>
    /// Adds the ordinal indicator to an integer
    /// </summary>
    /// <param name="number">The number</param>
    /// <returns>The formatted number</returns>
    public static string ToOrdinalString(this int number)
    {
        // Numbers in the teens always end with "th"

        if((number % 100 > 10 && number % 100 < 20))
            return number + "th";
        else
        {
            // Check remainder

            switch(number % 10)
            {
                case 1:
                    return number + "st";

                case 2:
                    return number + "nd";

                case 3:
                    return number + "rd";

                default:
                    return number + "th";
            }
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-16T11:52:16.087

```
public static string OrdinalSuffix(int ordinal)
{
    //Because negatives won't work with modular division as expected:
    var abs = Math.Abs(ordinal); 

    var lastdigit = abs % 10; 

    return 
        //Catch 60% of cases (to infinity) in the first conditional:
        lastdigit > 3 || lastdigit == 0 || (abs % 100) - lastdigit == 10 ? "th" 
            : lastdigit == 1 ? "st" 
            : lastdigit == 2 ? "nd" 
            : "rd";
} 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2008-12-22T14:07:40.157

```
else if (choice=='q')
{
    qtr++;

    switch (qtr)
    {
        case(2): strcpy(qtrs,"nd");break;
        case(3):
        {
           strcpy(qtrs,"rd");
           cout<<"End of First Half!!!";
           cout<<" hteam "<<"["<<hteam<<"] "<<hs;
           cout<<" vteam "<<" ["<<vteam;
           cout<<"] ";
           cout<<vs;dwn=1;yd=10;

           if (beginp=='H') team='V';
           else             team='H';
           break;
       }
       case(4): strcpy(qtrs,"th");break; 
```

* * *

## 回答 #11

> 赞同：-6
> 
> 时间：2008-09-16T03:59:19.540

我认为序数后缀很难获得......您基本上必须编写一个使用开关来测试数字并添加后缀的函数。

语言没有理由在内部提供此功能，尤其是在特定于语言环境的情况下。

当涉及到要编写的代码量时，您可以比该链接做得更好，但您必须为此编写一个函数......

# asp.net - 绘制网络图

> ID：69275
> 
> 赞同：9
> 
> 时间：2008-09-16T03:55:45.430
> 
> 标签：asp.net, api, visualization, graph-theory

我正在尝试在 ASP 网页上绘制图表。我希望 API 能有所帮助，但到目前为止我还没有找到。

该图包含标记的节点和未标记的方向边。理想的输出是[这样](http://en.wikipedia.org/wiki/Image:6n-graf.svg)的。

任何人都知道任何预先构建的东西可以提供帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T17:28:43.247

绝对[是 graphviz](http://graphviz.org)。您指向的维基百科链接上的图像是在 graphviz 中制作的。在其描述页面中，图形描述文件如下所示：

```
graph untitled {
    graph[bgcolor="transparent"];
    node [fontname="Bitstream Vera Sans", fontsize="22.00", shape=circle, style="bold,filled" fillcolor=white];
    edge [style=bold];
    1;2;3;4;5;6;
    6 -- 4 -- 5 -- 1 -- 2 -- 3 -- 4;
    2 -- 5;
} 
```

如果将该代码保存到文件 input.dot 中，他们将用于实际生成图形的命令可能是：

```
neato -Tsvg input.dot > graph.svg 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T03:57:33.257

我不确定 ASP 接口，但您可能想查看[graphviz](http://www.graphviz.org/)。

/艾伦

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-02-17T12:05:39.810

我们生产[mxGraph](http://www.jgraph.com/mxgraph.html)，它支持 ASP.NET 和大多数其他主流服务器端技术。它完全是 JavaScript 客户端，只有一个用 .NET 编写的用于通信的薄层，因此不需要太多 ASP.NET。但是我们确实为 Visual Studio 提供了一个 ASP 项目作为示例之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T09:09:45.520

我会推荐[zedgraph](http://zedgraph.org/wiki/index.php?title=Main_Page)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-17T13:27:50.683

GraphViz 对小图做得很好，但对于大图却不行。如果您的图表相当大，请尝试[aiSee](http://www.aisee.com/ "爱视")或查看[此列表](http://www.dmoz.org/Science/Math/Combinatorics/Software/Graph_Drawing/ "这份清单")中的替代方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-11-23T04:14:50.457

您可以使用[QuickGraph](http://quickgraph.codeplex.com/)以编程方式轻松地对图形进行建模，然后将其导出到[GraphViz](http://quickgraph.codeplex.com/wikipage?title=Visualization%20Using%20Graphviz&referringTitle=Documentation)或[GLEE](http://quickgraph.codeplex.com/wikipage?title=Visualization%20Using%20Glee&referringTitle=Documentation)，然后将其渲染为 PNG。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-06-16T06:57:52.280

好吧，这是 2 年后的另一个答案。Protovis 现在可以在浏览器中呈现强制导向的图形布局：http://vis.stanford.edu/protovis/ex/force.html [如果](http://vis.stanford.edu/protovis/ex/force.html) 您无法安装客户端软件，可能会更容易。它也很有趣和互动！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T04:02:21.030

您或许可以使用[Google 的 Chart API](http://code.google.com/apis/chart/)来实现这一点。这很容易上手。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-14T09:59:33.550

*免责声明：我是 Image-Charts 的创始人。*

如果您正在寻找[Web API](https://documentation.image-charts.com/graph-viz-charts/)：

```
https://image-charts.com/chart
?cht=gv
&chl=graph g{1;2;3;4;5;6; 6 -- 4 -- 5 -- 1 -- 2 -- 3 -- 4; 2 -- 5;) 
```

![](https://image-charts.com/chart?cht=gv&chl=graph%20g%20%7B1;2;3;4;5;6;%206%20--%204%20--%205%20--%201%20--%202%20--%203%20--%204;%202%20--%205;%20%7D)

# c# - Rhino Mocks：如何从序列中返回数字

> ID：69277
> 
> 赞同：2
> 
> 时间：2008-09-16T03:55:58.707
> 
> 标签：c#, .net, rhino-mocks

我有一个可枚举数组

```
int meas[] = new double[] {3, 6, 9, 12, 15, 18}; 
```

在每次连续调用我正在测试的模拟方法时，我想从该数组返回一个值。

```
using(_mocks.Record()) {
  Expect.Call(mocked_class.GetValue()).Return(meas); 
}
using(_mocks.Playback()) {
  foreach(var i in meas)
    Assert.AreEqual(i, mocked_class.GetValue();    
} 
```

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T07:08:48.243

总是有静态的假对象，但这个问题是关于 rhino-mocks 的，所以我向你展示我会做的方式。诀窍是您创建一个局部变量作为计数器，并在匿名委托/lambda 中使用它来跟踪您在数组中的位置。请注意，我没有处理 GetValue() 被调用超过 6 次的情况。

```
var meas = new int[] { 3, 6, 9, 12, 15, 18 };
using (mocks.Record())
{
    int forMockMethod = 0;
    SetupResult.For(mocked_class.GetValue()).Do(
        new Func<int>(() => meas[forMockMethod++])
        );
}

using(mocks.Playback())
{
    foreach (var i in meas)
        Assert.AreEqual(i, mocked_class.GetValue());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T05:43:44.657

如果功能是 GetValue() 连续返回每个数组元素，那么您应该能够设置多个期望，例如

```
using(_mocks.Record()) {
  Expect.Call(mocked_class.GetValue()).Return(3); 
  Expect.Call(mocked_class.GetValue()).Return(6); 
  Expect.Call(mocked_class.GetValue()).Return(9); 
  Expect.Call(mocked_class.GetValue()).Return(12); 
  Expect.Call(mocked_class.GetValue()).Return(15); 
  Expect.Call(mocked_class.GetValue()).Return(18); 
}
using(_mocks.Playback()) {
  foreach(var i in meas)
    Assert.AreEqual(i, mocked_class.GetValue();    
} 
```

模拟存储库将按顺序应用期望。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T04:28:16.210

恕我直言，yield 会处理这个问题。 [链接](http://msdn.microsoft.com/en-us/library/9k7k7cf0%28VS.80%29.aspx)。

就像是：

```
get_next() {
  foreach( float x in meas ) {
    yield x;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T04:39:09.197

任何你必须在这里有一个模拟的原因......
如果没有，我会去一个假课程.. 更简单，我知道如何让它做到这一点:) 我不知道模拟框架是否提供这种自定义行为。

# c - Eclipse Ganymede hack、提示、技巧、技巧和最佳实践

> ID：69281
> 
> 赞同：8
> 
> 时间：2008-09-16T03:56:14.213
> 
> 标签：c, eclipse, eclipse-cdt, ganymede

我最近开始使用 Eclipse Ganymede CDT 进行 C 开发，我非常喜欢它。我知道学习曲线可能有点明显，因此在您的帮助下，我的目标是尽可能地使其变平。我正在寻找最好的技巧、提示、技巧、技巧和最佳实践，以真正释放 IDE 的全部功能。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-16T04:14:34.607

**准确的索引**

使用 CDT，您应该确保启用“完整索引”选项而不是“快速索引”默认值。它在现代硬件上并没有明显变慢，而且做得更好。在这种情况下，您应该确保启用语义突出显示。这在 C/C++ 中并不像在 Scala 这样的语言中那么重要，但它仍然非常有用。

**精简编辑**

习惯使用`Ctrl`+`O`和`Ctrl`+ `Alt`+ `H`。前者弹出一个可增量搜索的大纲视图，而后者打开“调用层次结构”视图并搜索当前选择的函数。这对于跟踪执行非常有用。

`Ctrl`++ （开放式`Shift`）`T`本身并不完全是“编辑”组合，但它在我的工作流程中同样重要。C++ Open Type 对话框不仅允许按类型进行增量过滤，还可以选择定义（`.h`）或声明（`.cpp`），甚至可以按元素类型（`typedef`、`struct`、`class`等）进行过滤。

**面向任务的编程**

Mylyn：没有它就永远不要离开家。关于这个工具，我不能说太多。每次我被迫不使用它时，我发现自己不得不重新学习如何处理所有的代码噪音。非常非常好用。

**精简视图**

默认的 Eclipse 工作区布局在空间和可用性方面都非常低效。每个人都有自己喜欢的布局，花点时间找到你的。我喜欢最小化（不一定关闭）除大纲之外的所有内容，并将 C/C++ 项目资源管理器停靠在侧边栏中，配置为在展开时精确隐藏大纲。通过这种方式，我可以始终保持编辑器可见，同时减少与当前任务无关的视图使用的空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-08-12T20:06:24.470

`CTRL`+`TAB`让您在源文件和它的头文件 (foo.cpp <--> foo.h) 之间快速导航。

我也喜欢本地历史功能，因为您可以方便地返回并恢复您的更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T04:00:21.177

ctrl + space 是 Eclipse 中最好的工具。这是自动完成功能。它可以完成变量名称、方法声明、用户定义模板等等。

去日食。我的大量代码是由`ctrl`+生成的`space`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T10:52:09.240

**如果未安装 Java 开发人员工具，则拼写检查将不起作用。**

拼写检查功能取决于所安装的 Java 开发工具。如果您只安装 C 开发工具，这可能是一个令人困惑的问题，因为它没有给出拼写检查器不工作的原因。

# c# - XML 序列化和空集合

> ID：69296
> 
> 赞同：3
> 
> 时间：2008-09-16T03:59:47.543
> 
> 标签：c#, xml-serialization

我有一个属性定义为：

```
[XmlArray("delete", IsNullable = true)]
[XmlArrayItem("contact", typeof(ContactEvent)),
 XmlArrayItem("sms", typeof(SmsEvent))]
public List<Event> Delete { get; set; } 
```

如果 List<> Delete 没有项目

```
<delete /> 
```

被发射。如果 List<> Delete 设置为 null

```
<delete xsi:nil="true" /> 
```

被发射。如果集合没有项目，有没有办法使用属性来获取不发出删除元素？

[Greg](https://stackoverflow.com/questions/69296/xml-serialization-and-empty-collections#69407) - 非常感谢，我什至没有阅读 IsNullable 文档，只是假设它表明它不需要。

[Rob Cooper](https://stackoverflow.com/questions/69296/xml-serialization-and-empty-collections#69518) - 我试图避免 ISerializable，但 Gregs 的建议有效。我确实遇到了您在 (1) 中概述的问题，如果集合长度为零，我只返回 null 就破坏了一堆代码。为了解决这个问题，我创建了一个 EventsBuilder 类（我正在序列化的类称为事件），它管理事件类的底层对象的所有生命周期/创建，这些对象会吐出我们的事件类进行序列化。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-01T11:26:14.877

我遇到了同样的问题，如果字段为空或 0，我不希望输出元素。输出的 XML 不能使用 xsi:null="true" （按设计）。

我在某处读到，如果您包含一个 bool 类型的属性，该属性与您要控制的字段同名但附加了“指定”，则 XMLSerializer 将检查此属性的返回值以确定相应的字段是否应该是包括。

要在不实现 IXMLSerializer 的情况下实现这一点：

```
public List<Event> Delete { get; set; }
[XMLIgnore]
public bool DeleteSpecified
{
 get
 {
   bool isRendered = false;
   if (Delete != null)
   {
     isRendered = (Delete.Count > 0);
   } 

   return isRendered;
 }
 set
 {
 }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T04:34:48.410

如果您设置 IsNullable=false 或只是将其删除（默认为 false），则不会发出“删除”元素。这仅在集合等于 null 时才有效。

我的猜测是，.NET 中的“可空性”与 XML 中的可空元素（由 xml:nil 属性标记的元素）之间存在混淆。XmlArrayAttribute.IsNullable 属性控制后者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T05:02:24.520

首先，我会问自己“**什么是序列化？** ”。

*XmlSerializer*正在做它应该做的事情，将对象的当前状态保存到 XML 。现在，我不确定为什么当前行为对您来说不“正确”，因为如果您已经初始化了 List，那么它就会*被*初始化。

我认为您在这里有三个选择：

1.  如果集合有 0 个项目，则将代码添加到 Getter 以返回 null。这可能会弄乱您拥有的其他代码。
2.  实现*IXmlSerializable*接口并自己完成所有工作。
3.  如果这是一个常见的过程，那么您可能想看看我的问题“ [XML 序列化和继承类型](https://stackoverflow.com/questions/20084/xml-serialization-and-inherited-types)” - 是的，我知道它处理另一个问题，但它向您展示了如何创建一个通用的中间序列化类，然后可以“螺栓固定”以允许封装序列化过程。您可以创建一个类似的类来处理覆盖 null/零项集合的默认过程。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T04:07:31.237

您始终可以实现 IXmlSerializer 并手动执行序列化。

有关示例，请参见[http://www.codeproject.com/KB/cs/IXmlSerializable.aspx 。](http://www.codeproject.com/KB/cs/IXmlSerializable.aspx)

# encryption - 如何查询 CrystalReports CMS 数据库？

> ID：69309
> 
> 赞同：2
> 
> 时间：2008-09-16T04:06:46.497
> 
> 标签：encryption, crystal-reports, business-objects

是否可以查询 Crystal CMS 数据库并取回有意义的数据？数据似乎已加密。

我正在运行 Business Objects Crystal Report Server 11.5 版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T05:36:42.433

实际上，我发现我需要做的是使用 Administration Launchpad 提供的管理工具。我不负责安装 Crystal，甚至没有意识到这存在。此处提供的查询生成器以及“报告数据源”功能正是我所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-09T01:50:59.460

使用查询构建器工具查询 CMS：[http://[server]/businessobjects/enterprise115/WebTools/websamples/query/](http://[server]/businessobjects/enterprise115/WebTools/websamples/query/)。有关查询语言的更多信息，请参阅[http://devlibrary.businessobjects.com/businessobjectsxi/en/en/BOE_SDK/boesdk_dotNet_doc/doc/boesdk_net_doc/html/QueryLanguageReference.html#2146566](http://devlibrary.businessobjects.com/businessobjectsxi/en/en/BOE_SDK/boesdk_dotNet_doc/doc/boesdk_net_doc/html/QueryLanguageReference.html#2146566)。

此查询返回的属性以序列化状态（我猜是二进制和加密）存储在 infoobject 数据库表的 Properties 字段中（我不记得表的实际名称）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T05:47:41.887

我在办公室的工作站上遇到了类似的问题。听起来您需要重新安装（这对我有用）。根据 BussinessObjects，这是一个已知的错误（我不得不打电话给他们并使用我们的维护支持）。希望您可以通过搜索“Crystal Business 查询损坏”找到更多信息，而不是在重新安装对您不起作用时调用它们。

他们告诉我数据没有加密，但有时组件安装不正确，查询以二进制形式返回，全是乱码。

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-26T13:26:42.480

还有一些第三方解决方案自然地在 CMS 或中央管理服务器“顶部”分层，以将专有存储格式抽象为人类可读的形式。我们为 CMS 开发了一个本地数据库驱动程序，可以在[http://www.infolytik.com/products](http://www.infolytik.com/products)找到。

全面披露：我是 Infolytik 的主要开发者和创始人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T05:05:01.543

我的经验是数据没有加密，但它不是真正可读的。您最好的选择是使用 Auditor Universes 为您构建一些报告。您还可以查看审计员 Universe 用作构建其他报告的基线的 SQL。

# serialization - Biggest differences of Thrift vs Protocol Buffers?

> ID：69316
> 
> 赞同：304
> 
> 时间：2008-09-16T04:07:42.033
> 
> 标签：serialization, protocol-buffers, thrift

What are the biggest pros and cons of [Apache Thrift](http://incubator.apache.org/thrift/) vs [Google's Protocol Buffers](http://code.google.com/apis/protocolbuffers/)?

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2008-09-16T04:25:40.240

They both offer many of the same features; however, there are some differences:

*   Thrift supports 'exceptions'
*   Protocol Buffers have much better documentation/examples
*   Thrift has a builtin `Set` type
*   Protocol Buffers allow "extensions" - you can extend an external proto to add extra fields, while still allowing external code to operate on the values. There is no way to do this in Thrift
*   I find Protocol Buffers much easier to read

Basically, they are fairly equivalent (with Protocol Buffers slightly more efficient from what I have read).

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2009-08-03T16:08:23.973

另一个重要的区别是默认支持的语言。

*   协议缓冲区：Java、Android Java、C++、Python、Ruby、C#、Go、Objective-C、Node.js
*   Thrift：Java、C++、Python、Ruby、C#、Go、Objective-C、JavaScript、Node.js、Erlang、PHP、Perl、Haskell、Smalltalk、OCaml、Delphi、D、Haxe

两者都可以扩展到其他平台，但这些是开箱即用的语言绑定。

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2010-03-28T07:43:16.773

RPC 是另一个关键区别。Thrift 生成代码来实现 RPC 客户端和服务器，其中 Protocol Buffers 似乎主要设计为单独的数据交换格式。

* * *

## 回答 #4

> 赞同：62
> 
> 时间：2008-11-17T18:00:31.513

*   Protobuf 序列化对象比 Thrift 小 30% 左右。
*   除非您[打开](http://eishay.blogspot.com/2008/11/serialization-protobuf-vs-thrift-vs.html)[`option optimize_for = SPEED`](http://www.eishay.com/2008/11/protobuf-with-option-optimize-for-speed.html).
*   Thrift 拥有更丰富的数据结构（Map、Set）
*   Protobuf API 看起来更干净，虽然生成的类都被打包为内部类，这不是很好。
*   Thrift 枚举不是真正的 Java 枚举，即它们只是整数。Protobuf 有真正的 Java 枚举。

要仔细查看差异，请查看[此开源项目](https://github.com/eishay/jvm-serializers/wiki)的源代码差异。

* * *

## 回答 #5

> 赞同：59
> 
> 时间：2011-08-27T18:25:01.843

正如我所说的[“节俭与协议缓冲区”](https://stackoverflow.com/questions/4293385/thrift-vs-protocol-buffers/7216492#7216492)主题：

参考[Thrift vs Protobuf vs JSON 比较](http://blog.mirthlab.com/2009/06/01/thrift-vs-protocol-bufffers-vs-json/)：

*   Thrift 支持开箱即用的[AS3、C++、C#、D、Delphi、Go、Graphviz、Haxe、Haskell、Java、Javascript、Node.js、OCaml、Smalltalk、Typescript、Perl、PHP、Python、Ruby...](https://git-wip-us.apache.org/repos/asf?p=thrift.git;a=tree;f=lib;hb=HEAD)
*   C++、Python、Java - Protobuf 中的内置支持
*   [Protobuf 支持其他语言（包括 Lua、Matlab、Ruby、Perl、R、Php、OCaml、Mercury、Erlang、Go、D、Lisp）作为第三方插件提供](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)（顺便说一句。[这里是 SWI-Prolog 支持](http://www.swi-prolog.org/pldoc/package/protobufs.html)）。
*   Protobuf 有更好的文档和大量的示例。
*   Thrift 附带了一个很好的[教程](http://thrift.apache.org/tutorial/)
*   Protobuf 对象更小
*   使用“optimize_for = SPEED”配置时，Protobuf 更快
*   Thrift 集成了 RPC 实现，而对于[Protobuf RPC 解决方案是分离的，但可用](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)（如[Zeroc ICE](http://zeroc.com/ice.html)）。
*   Protobuf 在 BSD 风格的许可下发布
*   Thrift 在 Apache 2 许可下发布

此外，还有许多有趣的附加工具可用于这些解决方案，这可能会有所决定。以下是 Protobuf 的示例：[Protobuf-wireshark](http://code.google.com/p/protobuf-wireshark/)，[protobufeditor](http://code.google.com/p/protobufeditor/)。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-09-16T04:23:05.647

Protocol Buffers seems to have a more compact representation, but that's only an impression I get from reading the Thrift whitepaper. In their own words:

> We decided against some extreme storage optimizations (i.e. packing small integers into ASCII or using a 7-bit continuation format) for the sake of simplicity and clarity in the code. These alterations can easily be made if and when we encounter a performance-critical use case that demands them.

Also, it may just be my impression, but Protocol Buffers seems to have some thicker abstractions around struct versioning. Thrift does have some versioning support, but it takes a bit of effort to make it happen.

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2010-05-03T19:09:14.113

与 python 上的 protobuff 相比，我能够使用基于文本的协议获得更好的性能。但是，protobuff 没有提供类型检查或其他花哨的 utf8 转换等。

因此，如果您只需要序列化/反序列化，那么您可能可以使用其他东西。

[http://dhruvbird.blogspot.com/2010/05/protocol-buffers-vs-http.html](http://dhruvbird.blogspot.com/2010/05/protocol-buffers-vs-http.html)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-03-11T01:19:02.860

尚未提及的一件显而易见的事情是，它们既可以是赞成也可以是反对（并且两者都相同）是它们是二进制协议。这允许更紧凑的表示和可能更高的性能（优点），但降低了可读性（或者更确切地说，可调试性），这是一个缺点。

此外，两者的工具支持都比 xml（甚至可能是 json）等标准格式少一些。

（编辑）这是一个[有趣的比较](http://code.google.com/p/thrift-protobuf-compare/)，它解决了大小和性能差异，还包括一些其他格式（xml、json）的数字。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-08-29T07:21:56.417

ProtocolBuffers 更快。
这里有一个很好的基准：
[http ://code.google.com/p/thrift-protobuf-compare/wiki/Benchmarking](http://code.google.com/p/thrift-protobuf-compare/wiki/Benchmarking)

您可能还想研究 Avro，因为 Avro 更快。
微软在这里有一个包：
[http ://www.nuget.org/packages/Microsoft.Hadoop.Avro](http://www.nuget.org/packages/Microsoft.Hadoop.Avro)

顺便说一句，我见过的最快的是[Cap'nProto](https://capnproto.org/)；
AC# 实现可以在[Marc Gravell 的 Github-repository 中](https://github.com/mgravell/capnproto-net)找到。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2009-09-27T00:11:11.617

根据[wiki](http://wiki.apache.org/thrift/ThriftInstallationWin32)，Thrift 运行时不能在 Windows 上运行。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-04-14T14:47:35.250

我认为这些观点中的大多数都忽略了 Thrift 是一个 RPC 框架的基本事实，它恰好具有使用各种方法（二进制、XML 等）序列化数据的能力。

Protocol Buffers 纯粹是为序列化而设计的，它不是像 Thrift 这样的框架。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-07-16T02:24:32.867

我认为基本数据结构不同

1.  Protocol Buffer 使用变长整数，即变长数字编码，将固定长度的数字变成可变长度的数字以节省空间。
2.  Thrift 提出了不同类型的序列化格式（称为“协议”）。事实上，Thrift 有两种不同的 JSON 编码，以及不少于三种不同的二进制编码方式。

总之，这两个库是完全不同的。Thrift 喜欢一站式服务，给你整个集成的 RPC 框架和很多选项（支持跨语言），而 Protocol Buffers 更倾向于“只做一件事，把它做好”。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-01-28T03:33:00.790

一方面，protobuf 不是一个完整的 RPC 实现。它需要像 gRPC 这样的东西来配合它。

gPRC 与 Thrift 相比非常慢：

[http://szelei.me/rpc-benchmark-part1/](http://szelei.me/rpc-benchmark-part1/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-09-03T08:10:00.213

这里有一些很好的点，我将添加另一个点，以防有人的路径在这里交叉。

Thrift 为您提供了在 thrift-binary 和 thrift-compact (de)serializer 之间进行选择的选项，thrift-binary 将具有出色的性能但更大的数据包大小，而 thrift-compact 将为您提供良好的压缩但需要更多的处理能力。这很方便，因为您总是可以像更改一行代码一样轻松地在这两种模式之间切换（哎呀，甚至可以使其可配置）。因此，如果您不确定您的应用程序应该针对数据包大小或处理能力优化多少，那么 Thrift 可能是一个有趣的选择。

PS：查看这个优秀的基准项目，`thekvs`它比较了许多序列化程序，包括 thrift-binary、thrift-compact 和 protobuf：[https ://github.com/thekvs/cpp-serializers](https://github.com/thekvs/cpp-serializers)

PS：还有另一个名为的序列化程序`YAS`也提供了此选项，但它是无模式的，请参见上面的链接。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-12-08T17:28:07.473

还需要注意的是，并非所有受支持的语言都与 thrift 或 protobuf 一致。在这一点上，除了底层序列化之外，还有模块实现的问题。请注意检查您计划使用的任何语言的基准。

# php - Zend PHP 调试器：如何使用 get 参数开始调试页面？

> ID：69330
> 
> 赞同：1
> 
> 时间：2008-09-16T04:13:14.267
> 
> 标签：php, debugging, zend-studio, zend-debugger

我正在尝试内置的调试器`Zend studio`。看起来很棒！不过有一件事，当我使用调试器启动页面时，有人知道如何在页面中设置请求获取参数吗？

例如，我不想调试 runtests.php

我要调试`runtests.php?test=10`

我假设它是一个简单的配置，但我找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T13:09:15.240

我建议获取[Zend Studio Toolbar](http://www.zend.com/en/products/studio/downloads)。该扩展允许您控制从浏览器中而不是从 Zend Studio 中调试哪些页面。调试选项可让您调试下一页、下一个表单帖子或所有页面。当您像这样进行调试时，它会像从您的服务器而不是从 Zend Studio 中一样运行 PHP。它是使用 Zend Studio 时必不可少的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T04:29:34.710

只需在另一个页面上启动调试器，然后将浏览器 url 更改为您想要的。这并不理想，但应该可以。

我对他们的下一个版本寄予厚望。

# windows - 跟踪每个进程的 CPU 和内存使用情况

> ID：69332
> 
> 赞同：176
> 
> 时间：2008-09-16T04:13:53.467
> 
> 标签：windows, sysadmin, process-management

我怀疑我的一个应用程序占用的 CPU 周期比我想要的要多。问题是 - 它会突然发生，仅仅查看任务管理器对我没有帮助，因为它只显示即时使用。

有没有办法（在 Windows 上）跟踪某些进程的 CPU 和内存使用历史记录。例如，我将开始跟踪“firefox”，大约一个小时后将看到该小时内其 CPU 和内存使用情况的图表。

我正在寻找现成的工具或编程方式来实现这一目标。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2008-09-16T04:36:46.750

只需输入`perfmon`并按`Start > Run`回车键。当 Performance 窗口打开时，单击 + 号以将新计数器添加到图表中。计数器是您的 PC 工作方式的不同方面，并按相似性分组到称为“性能对象”的组中。

对于您的问题，您可以选择“进程”、“内存”和“处理器”性能对象。然后您可以实时查看这些计数器

您还可以指定实用程序来保存性能数据以供以后检查。为此，请在左侧面板中选择“性能日志和警报”。（它就在为我们提供上述计数器的系统监视器控制台下方。如果没有，请单击“文件”>“添加/删除管理单元”，单击“添加”并在列表中选择“性能日志和警报” ".) 从“Performance Logs and Alerts”中，在“Counter Logs”下创建一个新的监控配置。然后您可以添加计数器、指定采样率、日志格式（二进制或纯文本）和日志位置。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2008-09-16T04:19:46.573

[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)可以显示一个进程占用的总 CPU 时间，以及每个进程的历史图表。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2011-11-04T15:58:46.480

使用 perfmon.exe，我尝试使用“进程”计数器下的“私有字节”计数器来跟踪内存使用情况，并且效果很好。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-05-09T11:41:10.100

也许你可以使用这个。它应该适合您，并将报告指定进程的处理器时间。

```
@echo off
: Rich Kreider <rjk@techish.net>
: report processor time for given process until process exits (could be expanded to use a PID to be more
: precise)
: Depends:  typeperf
: Usage:  foo.cmd <processname>

set process=%~1
echo Press CTRL-C To Stop...
:begin
for /f "tokens=2 delims=," %%c in ('typeperf "\Process(%process%)\%% Processor Time" -si 1 -sc 1 ^| find /V "\\"') do (
if %%~c==-1 (
goto :end
) else (
echo %%~c%%
goto begin
)
)

:end
echo Process seems to have terminated. 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-16T04:22:50.250

我同意，perfmon.exe 允许您为要监视的任何进程添加计数器（右键单击右侧面板）。

性能对象：进程检查“从列表中选择实例”并选择firefox。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-16T04:25:12.303

WMI 是 Windows Management Instrumentation，它内置于所有最新版本的 Windows 中。它允许您以编程方式跟踪 CPU 使用情况、磁盘 I/O 和内存使用情况。

Perfmon.exe 是该界面的 GUI 前端，可以监视进程，将信息写入日志，并允许您在事后分析日志。它不是世界上最优雅的程序，但它确实完成了工作。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-09-26T15:59:58.593

Process Lasso 更多地是为流程自动化和优先级优化而设计的，而不是图表。也就是说，它*确实*提供了每个进程的 CPU 使用历史记录（在图表上绘制为白线），但它不*提供*每个进程的内存使用历史记录。

免责声明：我是 Process Lasso 的作者，但实际上并没有在这里认可它——因为有更好的解决方案（perfmon 是最好的）。

有史以来最好的东西是 Windows Vista+ 资源和性能监视器。它可以随时间跟踪进程对 CPU、内存、网络和磁盘访问的使用情况。它是一个伟大的整体系统信息实用程序，早就应该创建。除非我弄错了，否则它可以随时间跟踪每个进程的 CPU 和内存利用率（在列出的其他内容中）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-07T12:54:18.343

虽然我还没有尝试过，[但 ProcDump](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx)似乎是一个更好的解决方案。

来自网站的描述：

> ProcDump 是一个命令行实用程序，其主要目的是监视应用程序的 CPU 峰值并在峰值期间生成崩溃转储，管理员或开发人员可以使用这些转储来确定峰值的原因。ProcDump 还包括挂起的窗口监控（使用与 Windows 和任务管理器相同的窗口挂起定义）、未处理的异常监控，并且可以根据系统性能计数器的值生成转储。它还可以用作通用的进程转储实用程序，您可以将其嵌入到其他脚本中。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-05-16T10:23:54.427

您也可以尝试使用 C#/Perl/Java 脚本使用 WMI 命令获取利用率数据，以下是它的步骤。

我们需要执行 2 个 WMI 选择查询并应用 CPU% 利用率公式

**1.检索逻辑进程的总数**

```
select NumberOfLogicalProcessors from Win32_ComputerSystem 
```

**2\. 要检索 PercentProcessorTime、TimeStamp_Sys100NS（已应用 CPU 利用率公式获取实际利用率百分比）和 WorkingSetPrivate (RAM) 的值，最少 2 次，睡眠间隔为 1 秒**

```
select * from Win32_PerfRawData_PerfProc_Process where IDProcess=1234 
```

**3\. 应用 CPU% 利用率公式**

```
CPU%= ((p2-p1)/(t2-t1)*100)/NumberOfLogicalProcessors 
```

p2表示第二次检索到的PercentProcessorTime，p1表示第一次检索到的PercentProcessorTime，t2和t1为TimeStamp_Sys100NS。

可以在链接[http://www.craftedforeveryone.com/cpu-and-ram-utilization-of-an-application-using-perl-via-wmi/中找到一个示例 Perl 代码](http://www.craftedforeveryone.com/cpu-and-ram-utilization-of-an-application-using-perl-via-wmi/)

此逻辑适用于所有支持 WMI 查询的编程语言

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-10-31T18:11:35.390

需要获取某些特定 Windows 服务器的状态和 cpu / 内存使用情况。我使用了以下脚本：

这是 Windows 搜索服务的一个示例。

```
 $cpu = Get-WmiObject win32_processor
  $search = get-service "WSearch"
  if ($search.Status -eq 'Running')
  {
  $searchmem = Get-WmiObject Win32_Service -Filter "Name = 'WSearch'"
  $searchid = $searchmem.ProcessID
  $searchcpu1 = Get-WmiObject Win32_PerfRawData_PerfProc_Process | Where {$_.IDProcess -eq $searchid}
  Start-Sleep -Seconds 1
  $searchcpu2 = Get-WmiObject Win32_PerfRawData_PerfProc_Process | Where {$_.IDProcess -eq $searchid}
  $searchp2p1 = $searchcpu2.PercentProcessorTime - $searchcpu1.PercentProcessorTime
  $searcht2t1 = $searchcpu2.Timestamp_Sys100NS - $searchcpu1.Timestamp_Sys100NS
  $searchcpu = [Math]::Round(($searchp2p1 / $searcht2t1 * 100) /$cpu.NumberOfLogicalProcessors, 1)
  $searchmem = [Math]::Round($searchcpu1.WorkingSetPrivate / 1mb,1)
  Write-Host 'Service is' $search.Status', Memory consumed: '$searchmem' MB, CPU Usage: '$searchcpu' %'
  }

  else
  {
  Write-Host Service is $search.Status -BackgroundColor Red
  } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T04:17:26.207

嗯，我看到[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)可以做到，虽然它的图表不太方便。仍在寻找替代/更好的方法来做到这一点。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T04:17:39.323

Perfmon.exe 内置在 Windows 中。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T04:32:31.550

您可能想看看[Process Lasso](http://www.bitsum.com/prolasso.php)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-10T16:50:50.163

我使用 taskinfo 作为 CPU/RAM/IO 速度的历史图表。 [http://www.iarsn.com/taskinfo.html](http://www.iarsn.com/taskinfo.html)

但是突发的无响应，听起来更像是由于 HD/SS 驱动器故障造成的中断时间。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-10-04T19:25:37.257

在 Windows 10 下，任务管理器可以显示累计 CPU 小时数。只需前往“应用历史记录”选项卡和“删除使用历史记录”即可。现在让事情运行一两个小时：

[![Windows 10 累积 CPU 时间](https://i.stack.imgur.com/mV0UA.png)](https://i.stack.imgur.com/mV0UA.png)

这不会按标签分解浏览器中的使用情况。通常不活动的选项卡会做大量的工作，每个打开的选项卡都会消耗能量并降低您的 PC 速度。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-11-18T07:18:31.690

下载[过程监视器](https://docs.microsoft.com/en-us/sysinternals/downloads/procmon)

1.  启动进程监视器

2.  如果需要，设置过滤器

3.  进入菜单选项 > 分析事件

4.  单击“生成线程分析事件”，选择频率，然后单击确定。

5.  要随时查看收集的历史数据，请进入菜单工具 > 流程活动摘要

# c# - 有没有办法以编程方式最小化窗口

> ID：69352
> 
> 赞同：71
> 
> 时间：2008-09-16T04:19:29.057
> 
> 标签：c#, .net, vb.net, winforms

我正在做的是我有一个全屏表单，没有标题栏，因此缺少右上角的最小化/最大化/关闭按钮。我想用键盘快捷键和上下文菜单项替换该功能，但我似乎找不到触发事件以最小化表单。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2008-09-16T04:25:03.830

```
private void Form1_KeyPress(object sender, KeyPressEventArgs e)
{
     if(e.KeyChar == 'm')
         this.WindowState = FormWindowState.Minimized;
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2008-09-16T04:21:17.087

```
FormName.WindowState = FormWindowState.Minimized; 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2008-12-12T13:00:30.070

在 c#.net 中

```
this.WindowState = FormWindowState.Minimized 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-09-16T04:22:05.540

```
<form>.WindowState = FormWindowState.Minimized; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-16T04:22:45.553

```
Form myForm;
myForm.WindowState = FormWindowState.Minimized; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-06T14:44:09.190

最小化已经最小化的表单是没有意义的。所以我们开始：

```
if (form_Name.WindowState != FormWindowState.Minimized) form_Name.WindowState = FormWindowState.Minimized; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-22T20:28:01.507

-- c#.net

NORMALIZE this.WindowState = FormWindowState.Normal;

this.WindowState = FormWindowState.Minimized;

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-09T04:53:31.077

`this.WindowState = FormWindowState.Minimized;`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-10-09T04:34:10.920

```
this.MdiParent.WindowState = FormWindowState.Minimized; 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2014-04-11T05:41:05.773

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

Me.Hide()

End Sub 
```

# unit-testing - 寻找网站测试自动化的途径

> ID：69375
> 
> 赞同：4
> 
> 时间：2008-09-16T04:26:02.567
> 
> 标签：unit-testing, web-applications, asp-classic, automated-tests

我们开发自定义调查网站，我正在寻找一种方法来自动化这些网站的模式测试。调查通常包含许多复杂的规则和分支，这些规则和分支也会触发项目的响应方式。所有调查在发布给客户之前都经过严格测试。这种测试需要大量的手工工作。我想了解一些我可以用来通过回答问题和验证数据库中的结果来自动化这些测试的选项。调查站点由一个引擎生成，该引擎创建和写入 asp 页面并接收响应以处理到数据库中。所以我可以确定测试网站的唯一方法是与网页本身进行交互。我想在某种程度上我需要构建某种类型的机器人；我真的不太了解他们背后的设计。

有人可以就如何实现这一目标提供一些建议吗？感谢您的时间。

布雷特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-16T04:27:00.347

查看硒：[http ://selenium.openqa.org/](http://selenium.openqa.org/)

另外，请查看其他问题的答案：[https ://stackoverflow.com/questions/484/how-do-you-test-layout-design-across-multiple-browsersoss](https://stackoverflow.com/questions/484/how-do-you-test-layout-design-across-multiple-browsersoss)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T04:29:01.560

您还可以查看[WatiN](http://watin.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T04:29:23.930

听起来您的引擎可以使用诸如[Test::WWW::Mechanize之类的东西生成测试脚本](http://search.cpan.org/~petdance/Test-WWW-Mechanize-1.20/Mechanize.pm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T04:30:31.103

适用通常的测试方法；白盒和黑盒。

对您而言，白盒测试可能意味着检测您的应用程序以使其能够进入特定状态，然后您可以预测您期望的结果。

黑框可能意味着你点击了一个页面，然后考虑可能的结果是否有效。重复并冲洗，直到获得足够的覆盖。

我们使用的另一件事是监控我们服务的统计数据。我们是否在此页面上获得了预期的点击次数。我们定期运行 a/b 测试，我已经针对重构的代码运行 a/b 测试，以验证在推出之前没有任何变化。

/艾伦

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T04:39:39.507

我可以想到几个可以完成工作的优秀 Web 应用程序测试套件 - 一个免费/开源和一个商业：

1.  [Selenium](http://selenium.openqa.org/)（开源/跨平台）
2.  [TestComplete](http://www.automatedqa.com/products/testcomplete/index.asp)（商业/基于 Windows）

两者都允许您通过基于与 Web 应用程序的交互验证数据库记录来创建测试套件。

您基于 Windows/ASP 的事实*可能*意味着 TestComplete 将使您更快地启动和运行，因为它是 Windows 和 .NET 的本机。在进行投资之前，您可以下载免费试用版，看看它是否适合您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T08:25:28.480

查看 Symfony 框架附带的单元测试框架“lime”。[http://www.symfony-project.org/book/1_0/15-Unit-and-Functional-Testing](http://www.symfony-project.org/book/1_0/15-Unit-and-Functional-Testing)。你没有提到你的语言，石灰是php。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T08:27:01.143

我建议使用 mechanize gem，可用于红宝石。使用起来非常直观。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-29T08:00:38.223

我将 QEngine(commerical) 用于相同目的。我需要添加数据并在 UI 中进行检查。我编写了一个脚本来执行此操作并循环调用它。数据可以通过 csv 或 excel 传递。检查 www.qengine.com ，您也可以尝试 Watir。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-09T17:16:03.820

我的建议是 QA Agent ( [http://qaagent.com](http://qaagent.com) )。这似乎是一种新方法，因为您不需要安装任何东西。只需在基于浏览器的 ide 中开发您的 Web 测试。顺便说一句，您可以使用 jQuery 和 java 脚本开发测试。真的很酷！

# macos - 在 Applescript 中，如何进入帮助菜单搜索字段，如 Spotlight？

> ID：69391
> 
> 赞同：1
> 
> 时间：2008-09-16T04:29:55.207
> 
> 标签：macos, search, applescript, menu, spotlight

在 OS X 中，为了从键盘快速获取菜单项，我希望能够键入一个组合键，让它运行一个脚本，并让脚本专注于帮助菜单中的搜索字段。它应该像 Spotlight 的组合键一样工作，所以如果我再次运行它，它应该会关闭菜单。我可以使用 Quicksilver 运行脚本，但是如何编写脚本呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T06:57:22.950

或者，点击 cmd-? 并且不要弄乱脚本。:-) 这将重点放在帮助菜单的搜索字段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T04:30:09.390

这是我想出的脚本。

```
tell application "System Events"
    tell (first process whose frontmost is true)
        click menu "Help" of menu bar 1
    end tell
end tell 
```

# wpf - Is it possible to reference control templates defined in microsoft's assemblies?

> ID：69398
> 
> 赞同：2
> 
> 时间：2008-09-16T04:32:20.867
> 
> 标签：wpf, xaml

i have scenario where i have to provide my own control template for a few WPF controls - i.e. GridViewHeader. when you take a look at control template for GridViewHEader in blend, it is agregated from several other controls, which in some cases are styled for that control only - i.e. this splitter between columns. those templates, obviously are resources hidden somewhere in system...dll (or somewhwere in themes dll's). so, my question is - is there a way to reference those predefined templates? so far, i've ended up having my own copies of them in my resources, but i don't like that approach.

here is sample scenario: i have a GridViewColumnHeader:

```
 <Style TargetType="{x:Type GridViewColumnHeader}" x:Key="gridViewColumnStyle">
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="VerticalContentAlignment" Value="Stretch"/>
            <Setter Property="Background" Value="{StaticResource GridViewHeaderBackgroundColor}"/>
            <Setter Property="BorderBrush" Value="{StaticResource GridViewHeaderForegroundColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="2,0,2,0"/>
            <Setter Property="Foreground" Value="{StaticResource GridViewHeaderForegroundColor}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type GridViewColumnHeader}">
                        <Grid SnapsToDevicePixels="true" Tag="Header" Name="Header">
                            <ContentPresenter Name="HeaderContent" Margin="0,0,0,1" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                            <Canvas>
                                <Thumb x:Name="PART_HeaderGripper" Style="{StaticResource GridViewColumnHeaderGripper}"/>
                            </Canvas>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="true">
                            </Trigger>
                            <Trigger Property="IsPressed" Value="true">
                                <Setter TargetName="HeaderContent" Property="Margin" Value="1,1,0,0"/>
                            </Trigger>
                            <Trigger Property="Height" Value="Auto">
                                <Setter Property="MinHeight" Value="20"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

so far - nothing interesting, but say, i want to add some extra functionality straight in the template - i'd leave cotnent presenter as is, add my controls next to it and i'd like to leave Thumb with defaults from framework. i've found themes provided by microsoft [here](http://msdn.microsoft.com/en-us/library/aa358533.aspx):

the theme for Thumb looks like that:

```
<Style x:Key="GridViewColumnHeaderGripper"
       TargetType="{x:Type Thumb}">
    <Setter Property="Canvas.Right"
            Value="-9"/>
    <Setter Property="Width"
            Value="18"/>
    <Setter Property="Height"
            Value="{Binding Path=ActualHeight,RelativeSource={RelativeSource TemplatedParent}}"/>
    <Setter Property="Padding"
            Value="0"/>
    <Setter Property="Background"
            Value="{StaticResource GridViewColumnHeaderBorderBackground}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Thumb}">
                <Border Padding="{TemplateBinding Padding}"
                        Background="Transparent">
                    <Rectangle HorizontalAlignment="Center"
                               Width="1"
                               Fill="{TemplateBinding Background}"/>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

so far - i have to copy & paste that style, while i'd prefer to get reference to it from resources.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T04:39:28.523

引用 100% 可能更改的内部资源是不可用的 - 最好只是复制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T12:31:07.877

可以参考它们，但正如 paulbetts 所说，不建议这样做，因为它们可能会改变。还要考虑你所做的是否真的“正确”。你能编辑你的问题来解释为什么你需要这样做吗？

# linux - Remote Linux server to remote linux server dir copy. How?

> ID：69411
> 
> 赞同：48
> 
> 时间：2008-09-16T04:35:43.680
> 
> 标签：linux, data-transfer

What is the best way to copy a directory (with sub-dirs and files) from one remote Linux server to another remote Linux server? I have connected to both using SSH client (like Putty). I have root access to both.

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2008-09-16T04:40:46.680

我通常有两种方法，都使用 ssh：

```
scp -r sourcedir/ user@dest.com:/dest/dir/ 
```

或者，更健壮和更快（在传输速度方面）的方法：

```
rsync -auv -e ssh --progress sourcedir/ user@dest.com:/dest/dir/ 
```

如果您想了解有关它们如何工作的更多详细信息，请阅读每个命令的手册页。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-09-19T19:41:21.487

我会修改之前建议的回复：

```
rsync -avlzp /path/to/sfolder name@remote.server:/path/to/remote/dfolder 
```

如下：

-a （用于存档）意味着 -rlptgoD 所以上面的 l 和 p 是多余的。我还喜欢包含 -H，它复制硬链接。默认情况下，它不是 -a 的一部分，因为它很昂贵。所以现在我们有了这个：

```
rsync -aHvz /path/to/sfolder name@remote.server:/path/to/remote/dfolder 
```

您还必须小心尾随斜杠。你可能想要

```
rsync -aHvz /path/to/sfolder/ name@remote.server:/path/to/remote/dfolder 
```

如果希望源“sfolder”的内容出现在目标“dfolder”中。如果没有尾部斜杠，则会在目标“dfolder”中创建“sfolder”子目录。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-16T04:37:10.743

rsync -avlzp /path/to/folder name@remote.server:/path/to/remote/folder

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-16T04:37:33.210

```
scp -r <directory> <username>@<targethost>:<targetdir> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-16T04:37:34.473

登录一台机器

> $ scp -r /path/to/top/目录 user@server:/path/to/copy

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-16T05:18:54.623

Try unison if the task is recurring. [http://www.cis.upenn.edu/~bcpierce/unison/](http://www.cis.upenn.edu/~bcpierce/unison/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-16T04:37:18.093

Use rsync so that you can continue if the connection gets broken. And if something changes you can copy them much faster too!

Rsync works with SSH so your copy operation is secure.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-16T04:37:11.073

Check out [scp](https://en.wikipedia.org/wiki/Secure_copy) or [rsync](https://en.wikipedia.org/wiki/Rsync), `man scp` `man rsync`

```
scp file1 file2 dir3 user@remotehost:path 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-17T11:53:05.400

我使用了 rdiffbackup [http://www.nongnu.org/rdiff-backup/index.html](http://www.nongnu.org/rdiff-backup/index.html)因为它可以满足您的所有需求，而无需任何花哨的选项。它基于 rsync 算法。如果您只需要复制一次，您可以稍后删除目标主机上的 rdiff-backup-data 目录。

```
rdiff-backup user1@host1::/source-dir user2@host2::/dest-dir 
```

来自文档：

> rdiff-backup 还保留子目录、硬链接、开发文件、权限、uid/gid 所有权、修改时间、扩展属性、acls 和资源分支。

这是 scp -p 提案的一个好处，因为 -p 选项不能保留所有内容（例如，对目录的权限设置不当）

在 ubuntu 上安装：

```
sudo apt-get install rdiff-backup 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-19T19:18:53.070

scp 将完成这项工作，但有一个问题：与第二个远程目标的连接将使用第一个远程目标上的配置，因此如果您在本地环境中使用 .ssh/config，并且您希望 rsa 和 dsa 密钥工作，您必须将您的代理转发到第一个远程主机。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T16:39:12.163

我认为您可以尝试：

```
rsync -azvu -e ssh user@host1:/directory/ user@host2:/directory2/ 
```

（我假设你在 host0 上，你想直接从 host1 复制到 host2）

如果上述方法不起作用，您可以尝试：

```
ssh user@host1 "/usr/bin/rsync -azvu -e ssh /directory/ user@host2:/directory2/" 
```

如果您已经设置了从 host1 到 host2 的无密码 SSH 登录，那么它会起作用

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T04:37:33.410

好吧，快速回答是看一下“scp”联机帮助页，或者可能是 rsync——这完全取决于您需要复制的内容。如果必须，您甚至可以使用 tar-over-ssh：

```
tar cvf - | ssh server tar xf - 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-17T14:00:05.377

上面提到的 scp 通常是最好的方法，但不要忘记远程目录规范中的冒号，否则您将在本地计算机上获得源目录的副本。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-19T14:53:54.330

我喜欢通过 ssh 传输 tar。

tar cf - [目录] | ssh [用户名]@[主机名] tar xf - -C [远程机器上的目标]

这种方法为您提供了很多选择。由于您应该以普通用户身份登录远程服务器，因此您应该禁用 root ssh 为多个用户帐户复制文件是困难的。为了解决这个问题，您可以在仍然保留所有权的远程盒子上创建一个 tar 文件。

tar cf - [目录] | ssh [用户名]@[主机名] "cat > output.tar"

对于慢速连接，您可以添加压缩，z 用于 gzip 或 j 用于 bzip2。

tar cjf - [目录] | ssh [用户名]@[主机名] "cat > output.tar.bz2"

tar czf - [目录] | ssh [用户名]@[主机名] "cat > output.tar.gz"

tar czf - [目录] | ssh [用户名]@[主机名] tar xzf - -C [远程机器上的目标]

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T04:37:50.260

理想情况下，作为非 root 用户：

scp -r src $host:$path

如果您已经有 $host 上的一些内容，请考虑使用 rsync 和 ssh 作为隧道。

/艾伦

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-17T12:19:50.797

如果你真的想要一个精确的副本，你可能还想使用 -p 开关到 scp，如果你正在使用它。我发现 scp**从 devices 读取**，并且我遇到了 cpio 问题，所以我个人总是使用*tar*，如下所示：

```
cd /origin; find . -xdev -depth -not -path ./lost+found -print0 \
| tar --create --atime-preserve=system --null --files-from=- --format=posix \
--no-recursion --sparse | ssh targethost 'cd /target; tar --extract \
--overwrite --preserve-permissions --sparse' 
```

我将这个咒语保存在一个文件中，并使用各种其他方式复制文件。这个用于通过 SSH 复制；其他的用于复制到压缩存档，在同一台计算机内复制，以及在 SSH 太慢时通过未加密的 TCP 套接字进行复制。

# javascript - 有没有办法使 HTML 页面上的文本无法选择？

> ID：69430
> 
> 赞同：144
> 
> 时间：2008-09-16T04:39:50.863
> 
> 标签：javascript, html, css, cross-browser, textselection

我正在构建一个带有一些文本元素的 HTML UI，例如选项卡名称，这些元素在选择时看起来很糟糕。不幸的是，用户很容易双击选项卡名称，在许多浏览器中默认选择它。

我也许可以通过 JavaScript 技巧来解决这个问题（我也希望看到这些答案）——但我真的希望 CSS/HTML 中有一些东西可以直接在所有浏览器上运行。

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2010-12-15T10:35:16.423

在大多数浏览器中，这可以使用 CSS 来实现：

```
*.unselectable {
   -moz-user-select: -moz-none;
   -khtml-user-select: none;
   -webkit-user-select: none;

   /*
     Introduced in IE 10.
     See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/
   */
   -ms-user-select: none;
   user-select: none;
} 
```

对于 IE < 10 和 Opera，您需要使用`unselectable`您希望不可选择的元素的属性。您可以使用 HTML 中的属性进行设置：

```
<div id="foo" unselectable="on" class="unselectable">...</div> 
```

遗憾的是，这个属性不是继承的，这意味着您必须在`<div>`. 如果这是一个问题，您可以改为使用 JavaScript 为元素的后代递归地执行此操作：

```
function makeUnselectable(node) {
    if (node.nodeType == 1) {
        node.setAttribute("unselectable", "on");
    }
    var child = node.firstChild;
    while (child) {
        makeUnselectable(child);
        child = child.nextSibling;
    }
}

makeUnselectable(document.getElementById("foo")); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2008-09-16T04:55:44.227

```
<script type="text/javascript">

/***********************************************
* Disable Text Selection script- © Dynamic Drive DHTML code library (www.dynamicdrive.com)
* This notice MUST stay intact for legal use
* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code

***********************************************/

function disableSelection(target){

    if (typeof target.onselectstart!="undefined") //IE route
        target.onselectstart=function(){return false}

    else if (typeof target.style.MozUserSelect!="undefined") //Firefox route
        target.style.MozUserSelect="none"

    else //All other route (ie: Opera)
        target.onmousedown=function(){return false}

    target.style.cursor = "default"
}

//Sample usages
//disableSelection(document.body) //Disable text selection on entire body
//disableSelection(document.getElementById("mydiv")) //Disable text selection on element with id="mydiv"

</script> 
```

**编辑**

代码显然来自[http://www.dynamicdrive.com](http://www.dynamicdrive.com)

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2011-06-17T07:10:55.417

所有正确的 CSS 变体是：

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-09-16T04:57:28.963

试试这个：

```
<div onselectstart="return false">some stuff</div> 
```

简单但有效...适用于所有主要浏览器的当前版本。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-09-16T04:53:52.640

对于 Firefox，您可以将 CSS 声明“-moz-user-select”应用于“none”。查看他们的文档，*[user-select](http://developer.mozilla.org/En/CSS/-moz-user-select)*。

正如他们所说，这是对未来“用户选择”的“预览”，所以也许基于[Opera](http://en.wikipedia.org/wiki/Opera_%28web_browser%29)或[WebKit](http://en.wikipedia.org/wiki/WebKit)的浏览器会支持它。我还记得为 Internet Explorer 找到了一些东西，但我不记得是什么 :)。

无论如何，除非是文本选择导致某些动态功能失败的特定情况，否则您不应该真正覆盖用户对网页的期望，即能够选择他们想要的任何文本。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-02-12T15:15:15.627

我发现这里描述的 CSS 取得了一定程度的成功[http://www.quirksmode.org/css/selection.html](http://www.quirksmode.org/css/selection.html)：

```
::selection {
    background-color: transparent;
} 
```

`ul`它解决了我在 AIR 应用程序（WebKit 引擎）中使用一些 ThemeRoller 元素时遇到的大部分问题。仍然得到一小块（大约 15 x 15）被选中的虚无，但之前选择了一半页面。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-09-16T04:51:19.977

绝对将 div 放置在 z-index 更高的文本区域上，并为这些 div 提供透明的[GIF](http://en.wikipedia.org/wiki/Graphics_Interchange_Format)背景图形。

仔细考虑后注意 - 您需要链接这些“封面”，因此单击它们会将您带到标签应该位于的位置，这意味着您可以/应该在将锚元素设置为`display:box`, width的情况下执行此操作和高度设置以及透明背景图像。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-16T13:36:41.353

有关为什么可能需要抑制选择的示例，请参阅[SIMILE TImeline](http://simile.mit.edu/timeline/)，它使用拖放来探索时间线，在此期间意外的鼠标垂直移动会导致标签意外突出显示，这看起来很奇怪。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-03-21T03:48:40.997

对于 Safari，`-khtml-user-select: none`，就像 Mozilla 的`-moz-user-select`（或者，在 JavaScript 中，`target.style.KhtmlUserSelect="none";`）。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2011-07-24T05:28:20.640

> “如果你的内容真的很有趣，那么你最终无法保护它”

这是真的，但根据我的经验，大多数抄袭与“最终”或极客或坚定的抄袭者或类似的东西无关。这通常是由无知的人随意抄袭，即使是简单的、容易被击败的保护（很容易被我们这样的人击败）也能很好地阻止他们。他们对“查看源代码”或缓存或其他任何内容一无所知……哎呀，他们甚至不知道 Web 浏览器是什么，也不知道他们正在使用什么。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-09-25T06:12:38.457

这里有一个[Sass](http://en.wikipedia.org/wiki/Sass_%28stylesheet_language%29) mixin (scss) 供感兴趣的人使用。[Compass](http://en.wikipedia.org/wiki/Compass_Project) /CSS 3 似乎没有用户选择的 mixin。

```
// @usage use within a rule
// ex. img {@include user-select(none);}
// @param assumed valid user-select value
@mixin user-select($value)
{
    & {
        -webkit-touch-callout: $value;
        -webkit-user-select: $value;
        -khtml-user-select: $value;
        -moz-user-select: $value;
        -ms-user-select: $value;
        user-select: $value;
    }
} 
```

尽管 Compass 会以更强大的方式来实现，即只添加对您选择的供应商的支持。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T04:51:48.820

也可以选择图像。

使用 JavaScript 取消选择文本是有限制的，因为即使在您要选择的地方也可能发生这种情况。为了确保一个丰富而成功的职业生涯，请避开所有需要能够影响或管理浏览器的要求......当然，除非他们付给你非常高的薪水。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T05:51:30.270

如果它看起来很糟糕，您可以使用 CSS 来更改选定部分的外观。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2010-07-23T16:55:58.753

Firebug 可以轻松绕过任何 JavaScript 或 CSS 方法（例如 Flickr 的案例）。

您可以使用 CSS 中的[`::selection`伪元素](http://www.quirksmode.org/css/selection.html)来更改高亮颜色。

如果选项卡是链接并且[处于活动状态的虚线矩形](https://stackoverflow.com/questions/71074/how-to-remove-firefoxs-dotted-outline-on-buttons-as-well-as-links)值得关注，您也可以将其删除（当然要考虑可用性）。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2011-11-21T23:07:47.240

在很多情况下，关闭可选择性会增强用户体验。

例如，允许用户复制页面上的文本块而不复制与其关联的任何界面元素的文本（这将散布在被复制的文本中）。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2010-07-23T16:49:37.853

如果我删除它不起作用的写入行，以下在 Firefox 中的工作很有趣。任何人都知道为什么需要写入行。

```
<script type="text/javascript">
document.write(".");
document.body.style.MozUserSelect='none';
</script> 
```

# css - What Safari-specific pure CSS hacks are out there?

> ID：69440
> 
> 赞同：18
> 
> 时间：2008-09-16T04:43:04.070
> 
> 标签：css, safari

I'm wondering if there's any way to write CSS specifically for Safari using only CSS. I know there has to be something out there, but I haven't found it yet.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-09-16T12:35:22.747

I think the question is valid. I agree with the other responses, but it doesn't mean it's a terrible question. I've only ever had to use a Safari CSS hack once as a temporary solution and later got rid of it. I agree that you shouldn't have to target just Safari, but no harm in knowing how to do it.

FYI, this hack only targets Safari 3, and also targets Opera 9.

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
   /* Safari 3.0 and Opera 9 rules here */
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T09:49:59.290

There are some hacks you can use in the CSS to target only Safari, such as putting a hash/pound (#) after the semi-colon, which causes Safari to ignore it. For example

```
.blah { color: #fff; }
.blah { color: #000;# } 
```

In Safari the colour will be white, in everything else it will be black.

However, you shouldn't use hacks, as it could cause problems with browsers in the future, and it may have undesired effects in older browsers. The safest way is to either use a server side language (such as PHP) which detects the browser and then serves up a different CSS file depending upon the browser the user is using, or you can use JavaScript to do the same, and switch to a different CSS file.

The server-side language is the better option here, as not everyone has JavaScript enabled in their browser, which means they wouldn't see the correct style. Also JavaScript adds an overhead to the amount of information which needs to load before the page is properly displayed.

Safari uses WebKit, which is very good with rendering CSS. I've never come across anything which doesn't work in Safari, but does in other modern browsers (not counting IE, which has it's own issues all together). I would suggest making sure your CSS is [standards compliant](http://jigsaw.w3.org/css-validator/), as the issue may lie in the CSS, and not in Safari.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T04:45:44.420

So wait, you want to write CSS for Safari using only CSS? I think you answered your own question. Webkit has really good CSS support. If you are looking for webkit only styles, try [here](http://qooxdoo.org/documentation/general/webkit_css_styles).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T04:53:34.247

You'd have to use JavaScript or your server to do user-agent sniffing in order to send CSS specifically to Safari/WebKit.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-09T14:38:03.263

> @media screen and (-webkit-min-device-pixel-ratio:0) {}

This seems to target webkit(including Chrome)... or is this truly Safari-only?

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-16T12:55:37.193

This really depends on what you are trying to do. Are you trying to do something special just in safari using some of the CSS3 features included or are you trying to make a site cross browser compliant?

If you are trying to make a site cross browser compliant I'd recommend writing the site to look good in safari/firefox/opera using correct CSS and then making changes for IE using conditional CSS includes in IE. This should (hopefully) give you compatibility for the future of browsers, which are getting better at following the CSS rules, and provide cross browser compatibility. [This is an example.](http://creativebits.org/webdev/ie_conditional_css)

By using conditional stylesheets you can avoid hacks all together and target browsers.

If you are looking to do something special in safari check out [this](http://trac.webkit.org/wiki/WebDevelopers).

# ruby - 去红宝石：直接去铁红宝石？

> ID：69443
> 
> 赞同：4
> 
> 时间：2008-09-16T04:43:52.303
> 
> 标签：ruby, ironruby

我刚开始学习 Ruby，作为 .Net 开发人员，我想知道是否应该直接使用 IronRuby，而不是先尝试一些纯 Ruby。

你怎么看？我会错过什么吗？

——粗鲁的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T05:07:39.063

我会使用纯红宝石（Matz Ruby Interpreter (MRI)）开始。我的理解是，铁红宝石还没有完全准备好。

如果您正在寻找一本好书，我目前最喜欢（超过镐）是matz 和 flanagan 的[http://www.amazon.com/gp/product/0596516177](https://rads.stackoverflow.com/amzn/click/com/0596516177)，这本书的段落非常简洁，写得很好，它们提供了很好的例子（在 1.8.* 和 1.9 中）

享受！:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T05:00:00.660

首先使用纯 Ruby，IR 还没有完成。看看[http://poignantguide.net/ruby/——](http://poignantguide.net/ruby/)虽然很奇怪，但这是一个很好的介绍

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T05:04:27.760

Ruby 有一些独特的语法和风格，通过使用其他人的 ruby​​ 代码，您会更快地掌握它。您当然可以在使用 IronRuby 以及在任何其他 ruby​​ 语言实现中学习这一点。（尽管，您可能会在 IronRuby 的一些更晦涩的语法或库中遇到麻烦；它还不是 100% 完整的实现。）

学习惯用 ruby​​ 的一个有趣资源是[http://www.rubyquiz.com/](http://www.rubyquiz.com/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T19:53:19.250

我知道这是一个老问题，但我想说的是，四年后（今天），JRuby 实现肯定已经足够先进，值得开始。

# javascript - 在 After Effects 中以编程方式更改 TextLayer 的文本

> ID：69445
> 
> 赞同：3
> 
> 时间：2008-09-16T04:44:16.110
> 
> 标签：javascript, after-effects

我正在使用 After Effects CS3 Javascript API 来动态创建和更改合成中的文本层。

或者至少我正在尝试，因为我似乎无法找到正确的属性来更改以更改 TextLayer 对象的实际文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T14:41:11.527

嗯，下次必须更努力地阅读文档。

```
var theComposition = app.project.item(1);
var theTextLayer = theComposition.layers[1];
theTextLayer.property("Source Text").setValue("This text is from code"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T04:49:08.657

我不是 After Effects 的专家，但我已经搞砸了。我认为[阅读本文](http://library.creativecow.net/articles/ebberts_dan/ae6_exp.php)可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-04T02:00:00.313

这就是我更改文本的方式。

```
var comp = app.project.item(23);
var layer = comp.layer('some_layer_name');
var textProp = layer.property("Source Text");
var textDocument = textProp.value;

textDocument.text = "This is the new text";
textProp.setValue(textDocument);
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-25T22:09:38.887

我为自己编写了一个简单的函数来更改属性。这里是：

```
function change_prop(prop, name, value){
    var doc = prop.value;

    doc[name] = value;
    prop.setValue(doc);

    return prop;
} 
```

示例使用：

```
// Changing source text
change_prop(text_layer.property("Source Text"), "text", "That's the source text");

// Changing font size
change_prop(text_layer.property("ADBE Text Properties").property("ADBE Text Document"), "fontSize", 10) 
```

# visual-studio - 如何将 Resharper 文件排除在 SVN 之外？

> ID：69448
> 
> 赞同：14
> 
> 时间：2008-09-16T04:46:29.350
> 
> 标签：visual-studio, svn, tortoisesvn, resharper

我正在使用 VS2008 和 Resharper。Resharper 创建一个目录 _Resharper.ProjectName。这些文件对我所知道的源代码控制没有任何价值，并且在提交更改时会导致问题。我怎样才能让 SVN 忽略它们？我使用 TortoiseSVN 作为我的 SVN 接口。

编辑：你们很快。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-16T04:49:25.067

[这是一个显示 TortoiseSVN 中的忽略过程的链接](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-ignore.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-16T04:48:59.373

将文件名（甚至模式`_Resharper.*`）添加到`svn:ignore`其父目录的属性中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-16T04:52:59.130

在我输入此内容后阅读手册时，将在此处发布我自己的问题的答案。在 TortoiseSVN 中，转到设置。添加

```
*ReSharper* 
```

到“全局忽略模式”。将项目添加到全局忽略模式意味着这些文件对于您为安装了 TortoiseSVN 的客户端工作的任何项目都将被忽略，因此在所有情况下都可能不适合使用全局忽略。

如果在将它们添加到存储库之前从 TortoiseSVN 菜单中选择此选项，您还可以将特定文件和目录添加到单个项目的忽略列表中。“之前”部分是最初让我绊倒的地方。由于这是一个开发人员项目，我一直在检查二进制文件等。b/c 它对其他开发人员没有任何影响，并且 Resharper 文件进入了那里。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-01-19T06:11:53.627

将 Resharper 缓存存储在系统临时文件夹中。检查 r# 中的第一个设置页面。环境->常规->系统->存储缓存..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T04:50:58.887

简短的回答：“svn:ignore”属性

长答案：

```
# cd /your/working/copy
# export EDITOR=vi
# svn propedit svn:ignore . 
```

（在自己的行上添加“_Resharper.ProjectName”并将文件写出）

编辑：呃... doh，刚刚意识到您说的是乌龟...这就是您使用 SVN 命令行版本的方式

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T05:01:35.740

svn 有一个“忽略”属性，您可以将其附加到文件名模式或目录。被忽略的文件和目录不会在“svn st”命令中报告，也不会进入 repo。

示例：您在 .c 和 .h 文件中有 C 源代码，但编译器创建了一堆 .o 文件，您不想让 subversion 麻烦告诉您。您可以使用 Subversion 的属性功能告诉它忽略这些。

对于一个签出工作目录中的一些文件，例如 myproject/mysource/

> bash> svn propedit svn:ignore mysource

在弹出的文本编辑器中（在 linux 中，可能是 vi 或任何您的 EDITOR env var 设置为），每行添加一个文件名模式。不要在模式后添加尾随空格（这会使 svn 感到困惑）。

> *.o
> *.bak

就这样。您可能想立即进行提交，因为有时 svn 会担心用户在两次提交之间对文件进行太多不同类型的更改。（我的规则是：如果有疑问，请提交。它很便宜）

对于出现在庞大目录树中许多地方的文件类型，请编辑保存在存储库中的 subversion 配置文件。这需要存储库管理员的操作，除非您可以直接访问存储库（不是通过 svn: 或 http: 或 file:，但可以“cd”到存储库位置并“ls”它的文件）。svn 书籍应该有详细信息；我现在不记得了。

由于我不使用 Tortoise，我不知道上面的描述如何直接翻译 - 但这就是为什么我们有可编辑的答案（快乐！）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T04:54:12.827

这篇博文提供了一个示例，说明如何通过命令行 svn 执行您想要的操作。 [http://sdesmedt.wordpress.com/2006/12/10/how-to-make-subversion-ignore-files-and-folders/](http://sdesmedt.wordpress.com/2006/12/10/how-to-make-subversion-ignore-files-and-folders/)

这些变化将反映在 TortoiseSVN 中。

我相信有一种方法可以通过乌龟做到这一点，但是我没有 Windows vm 可访问的 atm，抱歉:(

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2008-09-16T04:48:53.197

SVN 仅控制您在创建存储库时放入的内容。不要只导入整个项目文件夹，而是在构建之前导入“干净”文件夹。构建后，您将获得所有目标文件或 _Resharper 文件夹等，但它们不受版本控制。

我忘记了：

```
svn：忽略
```

命令是告诉 SVN 排除某些文件的另一种可能性。您可以将其作为属性添加到版本控制的文件夹中，例如使用 TortoiseSVN。

# performance - LAMP 的服务器性能指标工具

> ID：69459
> 
> 赞同：3
> 
> 时间：2008-09-16T04:48:45.210
> 
> 标签：performance, monitoring, metrics

对于用于监控 PHP 应用程序的页面加载时间/错误和其他性能指标的工具有什么建议吗？

我知道 FireBug 和 YSlow 工具，但这是为了更多的服务器监控。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T04:52:21.580

有经典的“ab”（apachebench）程序。更多的力量来自[JMmeter](http://jakarta.apache.org/jmeter/)。对于服务器健康，我推荐 Munin，它可以轻松地从多个系统捕获数据并将其聚合到一个页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T10:46:58.017

您也可以尝试[httperf](http://www.hpl.hp.com/research/linux/httperf/)。这是一个非常灵活的工具，如果您想测试您的应用程序和网络服务器如何处理各种流量负载，您绝对应该试一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T05:11:35.123

Try [Nagios](http://www.nagios.org/), it's the default tool to monitor servers. You can write plugins to report just about any data.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T08:23:45.350

对于分析您的代码，有[Xdebug](http://xdebug.org/docs/profiler)。[使用Siege](http://www.joedog.org/JoeDog/Siege)进行回归测试也非常有用。

# java - 在自定义 XPath 函数中获取 XML 数据

> ID：69470
> 
> 赞同：4
> 
> 时间：2008-09-16T04:50:27.780
> 
> 标签：java, xslt, xpath, saxon

当我们制作自己的自定义 XPath 函数时，有没有办法获取当前的 xml 数据（请参见此处）。

我知道您可以访问 an ，`XPathContext`但这是否足够？

**例子：**

我们的 XML：

```
<foo>
  <bar>smang</bar>
  <fizz>buzz</fizz>
</foo> 
```

我们的 XSL：

```
<xsl:template match="/">
  <xsl:value-of select="ourFunction()" />
</xsl:template> 
```

我们如何获得整个 XML 树？

**编辑：**澄清一下：我正在创建一个最终执行静态 Java 代码的自定义函数（这是撒克逊人的特性）。因此，在这段 Java 代码中，我希望能够从 XML 树中获取元素，例如 bar 和 fizz，以及它们的 CDATA，例如 smang 和 Buzz。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T14:25:39.923

~~选择当前节点~~如何从当前节点中选择相关数据到 XSL 参数中，然后将该参数传递给函数？像：

```
<xsl:value-of select="ourFunction($data)" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T14:26:50.110

尝试更改您的 XSL，以便调用“ourFunction(/)”。那应该将根节点传递给函数。你也可以试试。或者 ..

您可能需要更改实现函数的签名，我会让其他人帮忙。

# gnuplot - 如何更改 gnuplot 中的背景颜色？

> ID：69480
> 
> 赞同：13
> 
> 时间：2008-09-16T04:52:43.093
> 
> 标签：gnuplot

我有一个在 gnuplot 中呈现图形的脚本。这些图表都以丑陋的白色背景结束。我该如何改变？（理想情况下，使用进入 gnuplot 脚本的命令，而不是命令行选项或设置文件中的其他内容）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2011-09-07T12:48:31.237

您可以通过命令更改背景颜色，`set object 1 rectangle from screen 0,0 to screen 1,1 fillcolor rgb"green" behind`将背景颜色设置为您指定的颜色（这里是绿色）。

要了解更多关于在 gnuplot 中设置背景的知识，您可以访问此[博客](http://gnuplot-surprising.blogspot.com/ "博客")。甚至还提供了设置渐变色背景和背景图片的方法。祝你好运！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-16T05:00:53.417

哦，找到了。它是这样的：

```
set terminal png x222222 xffffff 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T04:59:44.747

这是某些终端的设置（Windows 使用背景）。查看包含其默认值的颜色框。

/艾伦

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-14T11:29:32.353

根据[官方文档](http://www.gnuplot.info/documentation.html)，从 5.4 版开始，在 gnuplot 脚本中设置背景颜色的正确方法如下：

```
set term wxt background rgb "gray75" 
```

请注意，必须引用颜色。除了颜色名称，您可以使用格式为“#AARRGGBB”或“0xAARRGGBB”的十六进制值

# debugging - 我可以使用什么简单的方法来调试没有串口或视频的嵌入式处理器？

> ID：69492
> 
> 赞同：5
> 
> 时间：2008-09-16T04:55:25.833
> 
> 标签：debugging, embedded, hardware

我们有一个没有任何视频或串行端口的小型嵌入式系统（即我们无法通过 printf 输出文本）。
我们想通过初始化序列来跟踪我们的代码的进度。
我们可以做一些简单的事情来帮助解决这个问题。
它没有运行任何操作系统，并且硬件平台在某种程度上是可定制的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-16T04:59:27.850

最简单且最具可扩展性的解决方案是状态 LED。根据操作切换 LED，可以是二进制形式，也可以是在发生某些操作时（如果您可以缩小焦点）。

最强大的将是硬件 JTAG 设备。您甚至不需要设置断点——只需能够停止应用程序并检查内存状态就足够了。请注意，某些硬件平台不支持“花哨”选项，例如内存监视或硬件断点。前者通常通过不断停止处理器和读取内存来解决（将您的 10MHz 系统变成 1kHz 系统），而后者有时使用代码替换来执行（用不同的跳转替换目标指令），这有时会掩盖其他问题. 请注意这些问题以及它们适用于哪些嵌入式处理器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T04:55:39.263

您可以采用一些策略来帮助调试：

如果您有可用的输出引脚，您可以将它们连接到 LED（或示波器）并切换输出引脚高/低以指示代码中已达到某些点。
例如，1 次闪烁可能是程序加载，2 次闪烁是 foozbar 初始化，3 次闪烁是接受输入...

如果您有多个输出线可用，您可以使用 7 段 LED 来传达更多信息（数字/字母而不是闪烁）。

如果您有读取内存的能力并且有一些可用的 RAM，您可以使用 sprint 函数进行类似 printf 的调试，但不是转到屏幕/串行端口，而是将其写入内存中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T10:56:05.607

这取决于您尝试执行的调试类型 - 特别是如果您正在使用临时跟踪方法，或者您正在尝试提供可用作在生命周期内指示状态的工具项目（或产品）。

一方面，深入的源跟踪和调试在线调试器（例如 jtag）可能非常有帮助。但是，它们在您的调试需要设置断点和调查内存和寄存器时最有帮助 - 这使得在您处理时间关键问题时几乎没有什么好处。

如果您需要确定程序状态而不会对系统的执行产生重大影响，那么使用连接到备用 I/O 引脚的 LED 将很有帮助。这些也可以用作数字存储示波器 (DSO) 或逻辑分析仪的输入。通过选择可在 DSO 上识别的独特脉冲模式，可以使该技术更加强大。

但是，对于更通用的调试工具，串行端口是一个很好的解决方案。为了节省成本和 PCB 空间，您可能会发现使用包含 RS232 转换器的插件模块很有用。

如果您想在产品的正常操作中提供更长期的状态指示，那么 LED 又是一种便宜且简单的方法。然而，在这种情况下，最好选择足够慢的脉冲模式，以便通过目视检查轻松识别。随着时间的推移，这将让你学会一种代表“正常”行为的特定模式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T16:14:07.020

You can easily emulate serial communications (UARTs) using bit-banging from the IO pins of the system. Hook it to one of the card's pins and attach to a RS232 converter there (TTL to RS232 converters are easy to either buy or build), which goes to your PC's serial port.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T04:58:28.650

JTAG 调试器也是一种选择，尽管设置起来很麻烦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T09:20:13.200

如果您没有 JTAG，其他人建议的 LED 是一个好主意 - 尽管您确实倾向于最终进入测试/重建周期以尝试追踪问题。

如果您有更多的时间、备用的硬件引脚和可用的内存，您总是可以对低速串行接口进行 bit-bash。我发现这在过去非常有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T18:58:29.113

其他人使用输出引脚提出了一些非常好的想法，所以我不会建议，尽管它可能是一个非常好的解决方案，并且非常具有成本效益。如果您的预算和目标处理器支持它，那么硬件跟踪系统（老式仿真器或具有总线侦听跟踪支持的精美 BDM）对于此类事情可能非常有用。虽然它非常昂贵。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-23T20:45:54.490

The idea of using a bit-banged software UART is nice, but there's some effort required in writing one and also you need some free timers and interrupts. If your hardware has any other unused serial interface (SPI, I2C, ..), using them would be easier. With a small microcontroller you could convert the interface to RS-232.

If you have to go for the bit-banging, making a synchronous serial might be a simpler alternative as it wouldn't be critical to timing.

# svn - 具有出色的分支和合并支持的颠覆性替代方案是什么？

> ID：69497
> 
> 赞同：9
> 
> 时间：2008-09-16T04:56:28.607
> 
> 标签：svn, version-control, branch, merge

我厌倦了手动跟踪我的分支并在我的存储库中合并！太容易出错了。在每个人似乎都想到减少重复和自动化一切的世界里，颠覆分支/合并感觉就像是 80 年代遗留下来的。在不增加分布式 SCM 范式复杂性的情况下，具有出色的分支和合并支持的 subversion 有什么好的替代方案？理想情况下它是免费的，但如果我必须支付一些现金，我可能会倾向于如果它足够好的话。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-09-16T05:15:01.713

Have you upgraded to Subversion 1.5? It includes automated merge tracking. This may address your issue. It sounds like you're already familiar with the tool itself and it's free. So, if you upgrade your current solution to 1.5 you'll have almost no learning curve and zero cost - plus you won't have to go through the pain of porting your existing code to a new source code control system.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T04:58:54.857

您是否研究过分布式版本控制，例如 Git？每个“结帐”本质上都是一个分支……这是一种完全不同的源代码控制思维方式。

Git 是免费的，由 Linus Torvalds 创建，用于 Linux（当然还有许多其他项目）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-16T04:59:22.563

[Perforce](http://www.perforce.com)是一个出色的工具，但如果超过 2 个用户，它会花费你，因为它是针对专业人士的。我们将它与一个非常繁重的分支方案一起使用（在主要开发期间每个功能 1 个分支）并且效果很好。有点像微软使用的“蜘蛛网”分支（它使用了修改后的旧版 Perforce），但我现在在网上找不到这个故事。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-16T07:22:05.513

我也厌倦了旧版本 Subversion 中的这些限制。然而，我公司中没有其他人使用分支和合并。他们每个人在尝试新功能时，都会再次结帐，hack-hack-hack，如果不好就摆脱它——好的时候提交。只是有时他们犯了一些坏事；）

所以我开始使用 git + svn。含义：我有 svn checkout 并且在这个目录中我已经启动了 git。现在我可以**快速**合并和分支，并且不会中断任何其他操作。如果我需要尝试新功能 X，只需分支/结帐/hack-hack。如果我现在需要从我们的 SVN 存储库中获取一些重要更新：git stash、git checkout master、svn update、git commit -a、git checkout feature-X、git rebase、git stash apply（这一切都是因为 git-svn 没有在 Windows 上工作）。

看起来有很多操作，但它们很快。我的意思是真的很快。并给我所需的灵活性（请参阅[我关于 git + visual studio 的文章](http://dentharg.wordpress.com/2008/04/30/git-as-a-branch-container-and-visual-studio/)）。

我认为 Bazaar 可以做类似的事情，并且**可能**在一件事上做得更好：它可以轻松支持[非分布式、基于中央存储库的开发](http://bazaar-vcs.org/Workflows#head-22b1dac636e54e501e9b5a0a235f21bb686b80ac)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-16T05:03:11.103

Did you ever ask yourself why you have so many branch/merge operations? Is there a way to simplify your development process?

Subversion, IMHO, is a good application of the KISS (Keep it simple, stupid) principle. Translation: In my experience you will get a far greater productivity boost from streamlining your development process than from getting a more complex tool.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-09T14:49:10.730

你应该看看Accurev。它确实指向并单击创建新流（如分支，但更好的 IMO），并且流经流的代码的整个概念使得合并变得不那么痛苦和频繁的任务。它管理起来非常简单，拥有 3 用户免费许可证，并且内置了出色的可视化工具。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T04:58:06.653

任何分布式解决方案。Git、mercurial 等。我的偏好是 git。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-29T15:29:37.567

我从[Perforce](http://www.perforce.com)商店进入了 Subversion 商店，却错过了 Perforce 所拥有的强大的分支和合并支持。所以，Perforce 将是我的第一个建议，但它需要花钱:)。

Subversion 1.5 看起来很有希望，因为它的合并跟踪支持，但它被标记为基础，并且看起来它不会有我愿意接受的最小合并支持（即类似 Perforce）。

所以，我倾向于分布式 VCS，特别是 Bazaar：

1.  分支和合并以我期望的方式工作得很好
2.  它可以与[集中式工作流程一起使用](http://bazaar-vcs.org/Workflows#head-22b1dac636e54e501e9b5a0a235f21bb686b80ac)
3.  [支持 Subversion 分支、工作副本和存储库](http://bazaar-vcs.org/BzrForeignBranches/Subversion)。这意味着我的团队可以在使用 Subversion 的大型组织中使用 Bazaar，并且仍然与他们共享代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-24T22:55:46.370

[塑料 SCM](http://www.plasticscm.com)就是关于分支和合并……变得简单。检查其 GUI 并与其他替代品进行比较。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-16T14:19:31.327

还没有提到的一件事是，完全有可能以与使用[Subversion 相同的集中方式](http://git.or.cz/course/svn.html)使用 git 。它确实是一款出色的软件。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T04:58:27.260

[混帐](http://git.or.cz/)

我已经爱上了它。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-17T01:42:40.670

只需添加到 DarenW - 对于 windows，就有一个非常好的 Subversion 服务器产品，它是免费的，让生活成为一个梦想 - [VisualSVN 服务器](http://www.visualsvn.com/server/)。这会将最新的 Subversion 构建打包到单个 MSI 安装程序中，并添加一个非常有用的管理控制台。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T05:01:15.383

I've used Clearcase a lot. As long as you are doing your merges frequently it can be pretty effortless and it is also possible to have merge jobs running in the background. You are required to intervene if there is a merge conflict.

However, it is expensive and it can be hard to find skilled Clearcase administrators.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T05:02:57.767

Perforce is free for up to 2 users.

I'm not 100% certain about what you expect can/should be automated, but perforce is very high quality. You can easily create and maintain branches, and you can merge easily. It's quite easy to cherry pick specific changes you made in one branch, and merge them into another branch with a high degree of automation.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T05:23:31.537

这是根据 CVS 的替代方案而不是 SVN 的替代方案来构建的，但无论如何 - 它列出了几个替代方案，包括其他非分布式的替代方案。 [http://better-scm.berlios.de/alternatives/](http://better-scm.berlios.de/alternatives/)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-03-21T17:57:15.897

分支和合并在 Subversion 中得到了显着改进，您描述的问题在很久以前就已经解决了。例如，Subversion 支持合并跟踪超过 10 年。

*   现代 Subversion 版本支持通过[`svn:mergeinfo`](https://www.visualsvn.com/support/svnbook/branchmerge/advanced/#svn.branchmerge.advanced.finalword). 您不需要手动跟踪合并。
*   Subversion从 1.8.x 版本开始支持[自动重新集成合并。](http://svnbook.red-bean.com/en/1.8/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.reintegrate)
*   Subversion 支持文本冲突的交互式冲突解决。从 1.10.x 版本开始，Subversion 支持**[树冲突的交互式冲突解决](https://subversion.apache.org/docs/release-notes/1.10.html#conflict-resolver)**。

> 我厌倦了手动跟踪我的分支并在我的存储库中合并！太容易出错了。在每个人似乎都想到减少重复和自动化一切的世界里，颠覆分支/合并感觉就像是 80 年代遗留下来的。

**这些问题已在 2008 年 6 月 19 日发布的 Subversion 1.5.0 中得到解决。**当前版本是 1.13.x。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2008-09-16T07:13:37.297

Bazaar，由 Ubuntu 的创建者提供。

[http://bazaar-vcs.org/](http://bazaar-vcs.org/)

为什么选择芭莎？

[http://bazaar-vcs.org/BzrWhy](http://bazaar-vcs.org/BzrWhy)

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2008-09-16T05:01:21.700

git - [http://git.or.cz/](http://git.or.cz/) ( i am quite fond of git, great @ branching and distributed development) - [http://github.com/](http://github.com/) is a great working example.

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2008-09-16T05:01:25.693

[Git](http://git.or.cz), Mercurial, Bazaar, Darcs

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2008-09-16T05:06:46.883

I'm probably going to be flamed for this, but if you aren't out for a free product MS Team Foundation Server is worth a look. Unlike other MS products that will remain nameless the source control is solid and fully functional. Combine that with the IDE integration, automated build / test engine and work management functionality and it is pretty awesome. Of course, it is aimed at companies and priced to suit.

**Note:** I wouldn't bother with this if you don't develop primarily in Visual Studio.

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2008-09-16T05:28:02.120

虽然颠覆的替代品可能很好，但用口红颠覆可能就可以了。以下是在 Mac 上运行的颠覆前端的回顾：[http ://www.geocities.com/~karlvonl/blog/2006/03/daddy-needs-new-subversion-gui.html](http://www.geocities.com/~karlvonl/blog/2006/03/daddy-needs-new-subversion-gui.html)

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2008-09-17T02:02:51.480

您认为像 GIT 这样的 DVCS 有什么复杂之处？它在某些方面更简单：没有客户端/服务器，一个地方没有 repo，另一个地方有工作目录，用户管理不是内置的（如果需要，请使用 ssh）。正如 Jim Puls 所说，如果你愿意，你可以像非分布式一样使用 DVCS。我将 GIT 用于单人项目，即使是仅持续几周的项目。没有什么完全像 Tortoise，但 gitk、qgit 和 git-gui 比我在 SVN 中看到的更适合这些功能。我以前更喜欢 guis，但现在我非常喜欢 git 命令行 - 但请查看 easygit 以获得一些改进。

# dll - 可以使用哪些工具来查找引用了哪些 DLL？

> ID：69538
> 
> 赞同：9
> 
> 时间：2008-09-16T05:10:46.343
> 
> 标签：dll, vb6, reference

这是 VB6 DLL 和 COM 对象的一个​​古老问题，但我仍然每天都面对它。可以使用哪些工具或过程来查看另一个 DLL 引用的 DLL 文件或版本？

我指的是在运行时编译的 DLL，而不是来自 VB6 IDE。

这是DLL地狱。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T05:14:19.330

[Dependency Walker](http://www.dependencywalker.com/)向您显示 DLL 链接到（或试图链接到）的所有文件，并且它是免费的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-17T11:43:01.117

[ProcessExplorer](http://technet.microsoft.com/en-us/sysinternals/default.aspx)向您显示当前在特定时刻加载到进程中的所有 DLL。这为您提供了[Dependency Walker](http://www.dependencywalker.com/)的另一个角度，我相信它会进行静态扫描，并且可能会错过一些按需动态加载的 DLL。雷蒙德说[这是不可避免的](http://blogs.msdn.com/oldnewthing/archive/2009/07/10/9827869.aspx)。

# c++ - Have you used any of the C++ interpreters (not compilers)?

> ID：69539
> 
> 赞同：70
> 
> 时间：2008-09-16T05:11:01.520
> 
> 标签：c++, interpreter, read-eval-print-loop

I am curious if anyone have used UnderC, Cint, Cling, Ch, or any other C++ interpreter and could share their experience.

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-24T21:07:46.890

Cern**的 C++ 解释器项目**基于[clang](http://clang.llvm.org/) - 这是基于 20 年*ROOT cint经验的**新方法*，它非常稳定，并且被 Cern 人员推荐**[。](http://cern.ch/cling)**

 **这是很好的[Google Talk：介绍 cling，一个基于 clang/LLVM 的 C++ 解释器](http://www.youtube.com/watch?v=f9Xfh8pv3Fs)。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-02-25T18:18:34.777

**注意：**下面的内容是 CINT 特有的，但考虑到它可能是使用最[广泛](http://www.google.com/search?hl=en&q=c%2b%2b%20interpreter)的C++ 解释器，它可能对所有人都有效。

作为一个广泛使用 CINT 的粒子物理学研究生，我应该警告你远离。虽然它确实“起作用”，但它[正处于被淘汰的过程中](http://root.cern.ch/drupal/content/do-we-need-yet-another-custom-c-interpreter)，而那些在粒子物理学中花了一年多时间的人通常会因为以下几个原因学会避免它：

1.  由于其作为 C 解释器的根源，它无法解释 C++ 的一些最关键的组件。例如，模板并不总是有效，因此您将不鼓励使用使 C++ 如此灵活和可用的东西。

2.  它比最低优化的 C++ 慢（至少 5 倍）。

3.  调试消息比 g++ 生成的消息要神秘得多。

4.  作用域与已编译的 C++ 不一致：看到以下形式的代码很常见

    ```
    if (energy > 30) { 
        float correction = 2.4;
    }
    else {
        float correction = 6.3;
    }

    somevalue += correction; 
    ```

    虽然任何工作的 C++ 编译器都会抱怨`correcton`超出范围，但 CINT 允许这样做。结果是 CINT 代码不是真正的 C++，只是看起来像它的东西。

简而言之，CINT 没有 C++ 的所有优点，而且还有一些缺点。

由于包含在 ROOT 框架中，CINT 仍然被使用的事实可能更像是一个历史事故。回到它写成的时候（20 年前），确实需要一种用于交互式绘图/拟合的解释语言。现在有许多软件包可以充当这个角色，其中许多软件包拥有数百名活跃的开发人员。

这些都不是用 C++ 编写的。为什么？很简单，C++ 不是用来解释的。例如，静态类型在编译期间为您带来了极大的优化收益，但如果只允许计算机在运行时查看代码，则主要是为了使您的代码变得混乱和过度约束。如果您能够使用解释语言，学习 Python 或 Ruby，那么即使您已经了解 C++，您学习所花费的时间也将少于您在 CINT 上的绊脚石。

根据我的经验，使用 ROOT（运行 CINT 必须安装的软件包）的老研究人员最终会将 ROOT 库编译成普通的 C++ 可执行文件以避免 CINT。年轻一代的人要么效仿这一做法，要么使用 Python 编写脚本。

顺便说一句，ROOT（以及 CINT）在相当现代的计算机上编译大约需要半小时，并且偶尔会因更新版本的 gcc 而失败。这是一个在多年前起到重要作用的包裹，但现在它清楚地表明了它的时代。查看源代码，您会发现数百个已弃用的 c 样式转换、类型安全方面的巨大漏洞以及大量使用全局变量。

如果您要编写 C++，请按照应编写的方式编写 C++。如果您绝对必须拥有 C++ 解释器，那么 CINT 可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2008-09-16T14:18:04.653

cint 是粒子物理分析包[ROOT](http://root.cern.ch/)的命令处理器。我经常使用它，它对我来说效果很好。

它相当完整并且与已编译的代码配合得很好（您可以加载已编译的模块以在解释器中使用......）

**后期编辑：：**从后来的副本中复制，因为关于该问题的海报似乎不想在这里发布：[igcc](http://sourceforge.net/projects/igcc/)。从未亲自尝试过，但网页看起来很有希望。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-16T11:03:38.227

我（大约一年前）玩过[Ch](http://www.ddj.com/cpp/184402054)并发现它非常好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T05:34:17.470

很久以前，我使用了一个名为 CodeCenter 的 C++ 解释器。它非常好，尽管它无法处理位域或花哨的指针修饰之类的事情。关于它的两个很酷的事情是您可以观察变量何时发生变化，并且您可以在调试时动态评估 C/C++ 代码。这些天来，我认为像 GDB 这样的调试器基本上也一样好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T06:43:24.730

很久以前，我使用了一个名为 Instant C 的产品，但我不知道它是否进一步发展

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-17T19:11:26.377

不久前，我查看了使用 ch 是否可以将其用于我负责的黑盒测试 DLL。不幸的是，我无法弄清楚如何让它从 DLL 加载和执行函数。再说一次，我没有那么积极，可能有办法。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2010-05-04T01:00:49.567

有一个名为[c-repl](http://neugierig.org/software/c-repl/)的程序，它通过使用 GCC 将代码重复编译到共享库中，然后加载生成的对象来工作。[考虑到](http://packages.ubuntu.com/lucid/i386/c-repl)Ubuntu 存储库中的版本是用 Ruby 编写的（当然不包括 GCC），而[最新的 git](http://neugierig.org/software/git/?url=c-repl/)是在 Haskell 中，它似乎正在迅速发展。:)

# javascript - How do I get JavaScript created with document.write() to execute?

> ID：69546
> 
> 赞同：3
> 
> 时间：2008-09-16T05:13:01.453
> 
> 标签：javascript, internet-explorer-6

I have a multi-frame layout. One of the frames contains a form, which I am submitting through XMLHttpRequest. Now when I use document.write() to rewrite the frame with the form, and the new page I am adding contains any javascript then the javascript is not exectuted in IE6?

For example:

```
document.write("<html><head><script>alert(1);</script></head><body>test</body></html>"); 
```

In the above case the page content is replaced with test but the alert() isn't executed. This works fine in Firefox.

What is a workaround to the above problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T05:47:38.080

解决方法是在回调函数或调用 eval() 方法时以编程方式将`<script>`块添加到 JavaScript 中的头部 DOM 元素。这是您在 IE 6 中完成这项工作的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-01T21:27:32.307

与其将 JS 代码公开，不如将其包含在一个函数中（我们称之为“ `doIt`”）。您的框架窗口（假设它的名称是“formFrame”）有一个父窗口（即使它不可见），您可以在其中执行 JS 代码。在该范围内执行实际的帧重写操作：

```
window.parent.rewriteFormFrame(theHtml); 
```

父窗口中`rewriteFormFrame`的函数如下所示：

```
function rewriteFormFrame(html) {
    formFrame.document.body.innerHTML = html;
    formFrame.doIt();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-01T21:14:58.220

In short: You can't really do that. However JavaScript libraries such as jQuery provide functionality to do exactly that. If you depend on that, give jQuery a try.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T05:48:54.473

另一种可能的替代方法是使用 JSON，动态添加将由浏览器自动处理的脚本引用。

干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-01T21:24:27.667

动态评估和/或执行脚本是不好的做法。非常糟糕的做法。非常非常非常糟糕的做法。我不能强调，这是多么糟糕的做法。

又名：听起来像糟糕的设计。你想再次解决什么问题？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-15T23:57:30.357

`<body onload="jsWrittenLoaded()">`您可以在 body 标记 ( )中使用 onload 属性。

# gnuplot - What is kpsexpand?

> ID：69561
> 
> 赞同：1
> 
> 时间：2008-09-16T05:16:28.200
> 
> 标签：gnuplot

gnuplot is giving the error: "sh: kpsexpand: not found."

I feel like the guy in Office Space when he saw "PC LOAD LETTER". What the heck is kpsexpand?

I searched Google, and there were a lot of pages that make reference to kpsexpand, and say not to worry about it, but I can't find anything, anywhere that actually explains *what it is.*

Even the man page stinks:

```
$ man kpsexpand

kpsetool - script to make teTeX-style kpsetool, kpsexpand, and kpsepath available 
```

Edit: Again, I'm not asking what to do -- I know what to do, thanks to Google. What I'm wondering is what the darn thing *is.*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-03-29T14:20:19.157

kpsexpand、kpsetool 和 kpsepath 都是 kpsewhich 的包装器，用于处理查找 tex 相关文件 kpsexpand 用于扩展环境变量。假设 $VAR1 是 "Hello World" 而 $VAR2 是 "/home/where/I/belong" 然后

```
$ kpsexpand $VAR1
```

将返回

```
Hello World
```

和

```
$ kpsexpand $VAR2
```

将返回

```
/家/哪里/我/属于
```

`kpsewhich`让人想起`which`就像`which progname`将搜索 $PATH 环境变量中的目录并返回第一个找到的 progname 的路径，`kpsewhich filename`将搜索各种 tex-paths、字体、包等中的目录以获取文件名。

在 man 或 google 中查找更多查找 kpsewhich，并查看 kpsexpand 的来源

```
less `which kpsexpand`
```

干杯/B2S

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T05:21:54.770

这是“kpexpand gnuplot”的谷歌搜索结果的第一页：

[http://dschneller.blogspot.com/2007/06/visualize-hard-disk-temperature-with.html](http://dschneller.blogspot.com/2007/06/visualize-hard-disk-temperature-with.html)

它说您不需要关心错误消息。

这是 kpsexpand 的手册页：

[http://linux.die.net/man/1/kpsexpand](http://linux.die.net/man/1/kpsexpand)

# php - Does PHP class property scope overridden by passing as reference?

> ID：69564
> 
> 赞同：1
> 
> 时间：2008-09-16T05:18:06.183
> 
> 标签：php, reference

In PHP, if you return a reference to a protected/private property to a class outside the scope of the property does the reference override the scope?

**e.g.**

```
class foo
{
  protected bar = array();
  getBar()
  {
    return &bar;
  }

}

class foo2
{
  blip = new foo().getBar(); // i know this isn't php
} 
```

* * *

Is this correct and is the array bar being passed by reference?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T05:50:24.813

Well, your sample code is not PHP, but yes, if you return a reference to a protected variable, you can use that reference to modify the data outside of the class's scope. Here's an example:

```
<?php
class foo {
  protected $bar;

  public function __construct()
  {
    $this->bar = array();
  }

  public function &getBar()
  {
    return $this->bar;
  }
}

class foo2 {

  var $barReference;
  var $fooInstance;

  public function __construct()
  {
    $this->fooInstance = new foo();
    $this->barReference = &$this->fooInstance->getBar();
  }
}
$testObj = new foo2();
$testObj->barReference[] = 'apple';
$testObj->barReference[] = 'peanut';
?>
<h1>Reference</h1>
<pre><?php print_r($testObj->barReference) ?></pre>
<h1>Object</h1>
<pre><?php print_r($testObj->fooInstance) ?></pre> 
```

When this code is executed, the `print_r()` results will show that the data stored in `$testObj->fooInstance` has been modified using the reference stored in `$testObj->barReference`. However, the catch is that the function must be defined as returning by reference, AND the call must also request a reference. You need them both! Here's the relevant page out of the PHP manual on that:

[http://www.php.net/manual/en/language.references.return.php](http://www.php.net/manual/en/language.references.return.php)

# file-io - fdopen() 会导致内存泄漏吗？

> ID：69565
> 
> 赞同：3
> 
> 时间：2008-09-16T05:18:36.713
> 
> 标签：file-io, memory-leaks, stream

我使用 fdopen 将流与打开的文件相关联。

当我`close()`创建文件时，流是否也会自动取消关联，并且所有流内存都返回给操作系统，还是我需要知道 fdopen 文件并以特定方式关闭它？

-亚当

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T05:30:28.637

`close()`是系统调用。它将关闭内核中的文件描述符，但不会释放 libc 中的 FILE 指针和资源。您应该在 FILE 指针上使用 fclose() ，这也将负责关闭文件描述符。

# networking - How do you go about setting up a virtual IP address?

> ID：69568
> 
> 赞同：4
> 
> 时间：2008-09-16T05:19:47.740
> 
> 标签：networking, virtual-ip-address

... say for CentOS?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T05:23:48.043

据我了解，虚拟 IP 可以让您从流量实际通过的物理接口中抽象出地址。如果您的服务器有两个网卡，则它可以有一个虚拟 IP，并让流量通过任一网络物理接口。如果两个网卡之一发生硬件故障，流量可以继续使用第二个作为备份。我认为这在可以热交换此类部件的服务器上更为相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T05:25:47.257

虚拟 IP 地址是主机上设置的辅助 IP，它只是绑定到适配器的另一个 IP（如果绑定，则为适配器）。此 IP 可用于许多事情，但最常用于网络服务器为多个站点运行多个 SSL 证书。

在 CentOS 中，您几乎可以将 /etc/sysconfig/network-scripts/ifcfg-eth0（您想要的适配器）复制到 /etc/sysconfig/network-scripts/ifcfg-eth0:1，在那里更改 devicename=eth0到 devicename=eth0:1 并更改您想要的新“虚拟 IP”的 IP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T05:23:14.050

查看这篇关于[虚拟 IP 地址](http://en.wikipedia.org/wiki/Virtual_IP_address)的文章。如前所述，它通常在机器之间浮动，有时用于将服务从一台设备故障转移到另一台设备。您是否正在考虑使用虚拟界面？

/艾伦

# regex - 如何在 Emacs 中为 3 位数字创建正则表达式？

> ID：69591
> 
> 赞同：27
> 
> 时间：2008-09-16T05:26:06.227
> 
> 标签：regex, emacs

我想在 Emacs 中创建一个匹配 3 位数字的正则表达式。例如，我想匹配以下内容：

```
123
345
789 
```

但不是

```
1234
12
12 23 
```

如果我使用`[0-9]+`我匹配任何单个数字字符串。我认为`[0-9]{3}`会起作用，但是在重新构建器中进行测试时，它不匹配任何东西。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2008-09-16T05:33:38.347

如果您以交互方式输入正则表达式，并且想要使用`{3}`，则需要使用反斜杠来转义花括号。如果您不想匹配较长数字字符串的任何部分，请使用`\b`匹配数字周围的单词边界。这留下：

```
\b[0-9]\{3\}\b 
```

对于那些想要更多信息的人`\b`，请参阅[文档](http://www.gnu.org/software/emacs/manual/html_node/emacs/Regexp-Backslash.html#Regexp-Backslash)：

> 匹配空字符串，但仅在单词的开头或结尾。因此，`\bfoo\b` 将任何出现的 匹配`foo`为单独的单词。 `\bballs?\b`匹配`ball`或`balls`作为单独的词。 `\b`匹配缓冲区的开头或结尾，而不管它旁边出现什么文本。

如果您确实想在 elisp 代码中使用此正则表达式，一如既往，您必须再次转义反斜杠。例如：

```
(highlight-regexp "\\b[0-9]\\{3\\}\\b") 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-16T05:35:40.307

`[0-9][0-9][0-9]`，`[0-9]{3}`或者`\d{3}`不工作，因为它们也匹配“1234”。

所以这取决于分隔符是什么。

如果它在变量中，那么您可以执行`^/[0-9]{3}/$`. 如果它由空格分隔，你可以这样做`\w+[0-9]{3}\w+`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T05:41:41.447

你应该使用这个：

```
"^\d{3}$" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T05:44:50.613

正如其他人指出的那样，您需要匹配的不仅仅是三个数字。在数字之前，您必须有一个 line-start 或不是数字的东西。如果 emacs 支持 \D，请使用它。否则使用集合 [^0-9]。

简而言之：

```
(^|\D)\d{3}(\D|$) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T22:38:18.633

在 Emacs 中试验正则表达式时，我发现**regex-tool**非常有用：

[ftp://ftp.newartisans.com/pub/emacs/regex-tool.el](ftp://ftp.newartisans.com/pub/emacs/regex-tool.el)

不是答案（问题已经回答），只是一般提示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T05:36:10.260

[0-9][0-9][0-9] 将匹配*至少*3 个数字，因此正如 Joe 所提到的，您必须（至少）包括 \b 或任何其他可以分隔数字的内容。可能最可靠的方法是：

[^0-9][0-9][0-9][0-9][^0-9]

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2008-09-16T05:27:20.810

这很简单：

```
[0-9][0-9][0-9] 
```

# javascript - Firefox 中的代理设置不会“粘住”

> ID：69602
> 
> 赞同：2
> 
> 时间：2008-09-16T05:30:35.857
> 
> 标签：javascript, firefox, proxy

在家里，我们有一个代理服务器。在工作中我们没有。Firefox 在这方面很恼火：每当我启动它时，它都会默认使用代理服务器。如果我做工具>选项>设置并选择“无代理”，没问题。但是，如果我关闭 Firefox 并重新启动它，我必须重新执行工具>选项>设置，因为“无代理”设置不会“坚持”。

我如何让它粘住？或者，有人可以建议一些我可以分配给工具栏上的按钮的 javascript 来在两种状态之间切换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T05:32:54.183

使用[FoxyProxy](http://foxyproxy.mozdev.org/)，配置更灵活

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T00:16:12.933

问题是最近在 Firefox 中仅 Windows 的回归。

很难找到，基本上我很幸运......

这是元错误：

[https://bugzilla.mozilla.org/show_bug.cgi?id=448634](https://bugzilla.mozilla.org/show_bug.cgi?id=448634)

这是修复的地方。

[https://bugzilla.mozilla.org/show_bug.cgi?id=446536](https://bugzilla.mozilla.org/show_bug.cgi?id=446536)

我还没来得及验证它，我的 windows 系统现在已经死了，所以我必须通过 bugmail 来验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T05:34:42.197

我多年来一直使用本地自动代理配置脚本并取得了巨大成功。诀窍是从 URL 或 IP 地址识别我所在的位置。

/艾伦

# encryption - 非专利单向加密算法

> ID：69627
> 
> 赞同：1
> 
> 时间：2008-09-16T05:37:29.400
> 
> 标签：encryption, hash

我正在寻找一种简单的非专利单向加密算法，最好是在 c 中。我想用它来验证密码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-16T05:42:11.370

[SHA-1 及其家族的其他产品](http://en.wikipedia.org/wiki/SHA-1) 已获得美国政府的专利，美国政府“已根据免版税许可发布了该专利”。许多公共领域的实现[可以通过 Google 找到](http://www.google.ca/search?q=sha+c+implementation)。`:-)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T08:21:13.560

“单向加密算法”的正确名称是“散列算法”（您的意思是一种“加密”密码的方法，以便永远无法恢复，对吧？）

不要在现代应用程序中使用 md5，自 2004 年以来已经出现了对它的成功攻击（参见[http://www.doxpara.com/md5_someday.pdf](http://www.doxpara.com/md5_someday.pdf)以获取参考）。使用 SHA 系列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-11-19T19:18:27.797

In fact using a hash is not enought. you should use a [salt](https://en.wikipedia.org/wiki/Salt_%28cryptography%29) to limit them and a more advanced technique such as [bcrypt](https://en.wikipedia.org/wiki/Bcrypt) limits the possibilities of guessing the password

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T05:41:13.790

只需使用 crypt(3) 函数

这是[背景](http://en.wikipedia.org/wiki/Crypt_(Unix))

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T05:46:50.327

SHA-1 似乎是一个不错的建议，或者，如果您认为 SHA-1 即将被破解，则可以选择 SHA-2 系列之一。

您可能会觉得 MD5 不够“安全”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T05:41:25.397

到目前为止，MD5 非常适合我。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-30T13:06:39.690

MD5 和 SHA512（或其他 SHA-2 变体）都在其中发现了理论上的漏洞。我认为 SHA 尚未被证明已损坏，但存在这种可能性。Whirlpool 是一种免版税的哈希算法，（到目前为止）还没有显示出任何弱点。 [此页面](http://paginas.terra.com.br/informatica/paulobarreto/WhirlpoolPage.html)有指向 C 参考实现的链接。

# .net - 如何获得更紧凑的图像序列化？

> ID：69637
> 
> 赞同：1
> 
> 时间：2008-09-16T05:41:55.957
> 
> 标签：.net, web-services, serialization

我正在序列`JPEG`化`c#.net`. 我只是将其转换为字节流并通过 Web 服务发送。

我观察到序列化的字节流是实际图像大小的 30 倍。有人可以**建议我一种更好的方法**来序列化并保持相对于实际图像的大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T05:47:24.523

JPEG是一种压缩技术，读入后预计会大大扩展。这就是文件格式的本质。尝试找到一种方法来发送原始 JPEG 文件，而无需先将其作为图像读取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T05:53:05.400

1.  您需要使用 FileStream 读取原始图像流，然后使用 MemoryStream 将其传递给 Serializer。
2.  如果您只能使用 Image 类，请尝试指定您接收的字节数组的输出格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T06:03:32.317

考虑使用[WCF 流](http://kjellsj.blogspot.com/2007/02/wcf-streaming-upload-files-over-http.html)。我没有注意到通过此服务传输文件的开销。

MSDN：

[大数据和流媒体](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T05:44:49.287

*免责声明：不知情的人*
说它是开放性/标准和性能之间的权衡。也许您正在使用诸如 SOAP 之类的东西，它会在数据包中添加大量协议开销字节。如果大小是一个重要的约束，请尝试将其作为纯二进制流发送……实际语法也许其他人可以加入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T06:03:02.723

如果你通过 webservices 发送的图像尺寸可能很大，也许你可以看看 MTOM。这是一个 WS-* 标准，用于优化带有二进制附件的消息的大小。它现在非常集成在 Axis2 或 Metro for Java 或 .NET 等堆栈中：

[http://msdn.microsoft.com/en-us/library/aa528822.aspx](http://msdn.microsoft.com/en-us/library/aa528822.aspx) (wse 3.0) [http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx) (wcf)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T06:17:06.777

也许只是将图像托管在 Web 服务器上，并在 Web 服务回复中发送 URL，而不是序列化图像。这也将允许客户端尽可能在本地缓存图像。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2008-09-16T06:04:17.697

为什么不将其转换为 Base64String？

```
byte[] arr = File.ReadAllBytes(filename);
string str = Convert.ToBase64String(arr); 
```

在另一端，您可以通过以下方式将其更改回 byte[]：

```
byte[] arr = Convert.FromBase64String(string); 
```

# python - 在 Linux 上通过 Python 脚本截取屏幕截图

> ID：69645
> 
> 赞同：90
> 
> 时间：2008-09-16T05:44:54.840
> 
> 标签：python, linux, screenshot

我想通过 python 脚本截取屏幕截图并不显眼地保存它。

我只对 Linux 解决方案感兴趣，应该支持任何基于 X 的环境。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2009-04-23T17:27:52.080

这无需使用 scrot 或 ImageMagick 即可工作。

```
import gtk.gdk

w = gtk.gdk.get_default_root_window()
sz = w.get_size()
print "The size of the window is %d x %d" % sz
pb = gtk.gdk.Pixbuf(gtk.gdk.COLORSPACE_RGB,False,8,sz[0],sz[1])
pb = pb.get_from_drawable(w,w.get_colormap(),0,0,0,0,sz[0],sz[1])
if (pb != None):
    pb.save("screenshot.png","png")
    print "Screenshot saved to screenshot.png."
else:
    print "Unable to get the screenshot." 
```

借自[http://ubuntuforums.org/showpost.php?p=2681009&postcount=5](http://ubuntuforums.org/showpost.php?p=2681009&postcount=5)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-04-22T06:52:08.947

只是为了完整性：Xlib - 但是在捕获整个屏幕时它有点慢：

```
from Xlib import display, X
import Image #PIL

W,H = 200,200
dsp = display.Display()
try:
    root = dsp.screen().root
    raw = root.get_image(0, 0, W,H, X.ZPixmap, 0xffffffff)
    image = Image.fromstring("RGB", (W, H), raw.data, "raw", "BGRX")
    image.show()
finally:
    dsp.close() 
```

可以尝试在 PyXlib 的瓶颈文件中放入某些类型，然后使用 Cython 对其进行编译。这可以提高一点速度。

* * *

**编辑：** 我们可以用 C 编写函数的核心，然后从 ctypes 在 python 中使用它，这是我一起破解的：

```
#include <stdio.h>
#include <X11/X.h>
#include <X11/Xlib.h>
//Compile hint: gcc -shared -O3 -lX11 -fPIC -Wl,-soname,prtscn -o prtscn.so prtscn.c

void getScreen(const int, const int, const int, const int, unsigned char *);
void getScreen(const int xx,const int yy,const int W, const int H, /*out*/ unsigned char * data) 
{
   Display *display = XOpenDisplay(NULL);
   Window root = DefaultRootWindow(display);

   XImage *image = XGetImage(display,root, xx,yy, W,H, AllPlanes, ZPixmap);

   unsigned long red_mask   = image->red_mask;
   unsigned long green_mask = image->green_mask;
   unsigned long blue_mask  = image->blue_mask;
   int x, y;
   int ii = 0;
   for (y = 0; y < H; y++) {
       for (x = 0; x < W; x++) {
         unsigned long pixel = XGetPixel(image,x,y);
         unsigned char blue  = (pixel & blue_mask);
         unsigned char green = (pixel & green_mask) >> 8;
         unsigned char red   = (pixel & red_mask) >> 16;

         data[ii + 2] = blue;
         data[ii + 1] = green;
         data[ii + 0] = red;
         ii += 3;
      }
   }
   XDestroyImage(image);
   XDestroyWindow(display, root);
   XCloseDisplay(display);
} 
```

然后是python文件：

```
import ctypes
import os
from PIL import Image

LibName = 'prtscn.so'
AbsLibPath = os.path.dirname(os.path.abspath(__file__)) + os.path.sep + LibName
grab = ctypes.CDLL(AbsLibPath)

def grab_screen(x1,y1,x2,y2):
    w, h = x2-x1, y2-y1
    size = w * h
    objlength = size * 3

    grab.getScreen.argtypes = []
    result = (ctypes.c_ubyte*objlength)()

    grab.getScreen(x1,y1, w, h, result)
    return Image.frombuffer('RGB', (w, h), result, 'raw', 'RGB', 0, 1)

if __name__ == '__main__':
  im = grab_screen(0,0,1440,900)
  im.show() 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2011-10-10T09:56:22.650

将所有答案汇总在一个班级中。输出 PIL 图像。

```
#!/usr/bin/env python
# encoding: utf-8
"""
screengrab.py

Created by Alex Snet on 2011-10-10.
Copyright (c) 2011 CodeTeam. All rights reserved.
"""

import sys
import os

import Image

class screengrab:
    def __init__(self):
        try:
            import gtk
        except ImportError:
            pass
        else:
            self.screen = self.getScreenByGtk

        try:
            import PyQt4
        except ImportError:
            pass
        else:
            self.screen = self.getScreenByQt

        try:
            import wx
        except ImportError:
            pass
        else:
            self.screen = self.getScreenByWx

        try:
            import ImageGrab
        except ImportError:
            pass
        else:
            self.screen = self.getScreenByPIL

    def getScreenByGtk(self):
        import gtk.gdk      
        w = gtk.gdk.get_default_root_window()
        sz = w.get_size()
        pb = gtk.gdk.Pixbuf(gtk.gdk.COLORSPACE_RGB,False,8,sz[0],sz[1])
        pb = pb.get_from_drawable(w,w.get_colormap(),0,0,0,0,sz[0],sz[1])
        if pb is None:
            return False
        else:
            width,height = pb.get_width(),pb.get_height()
            return Image.fromstring("RGB",(width,height),pb.get_pixels() )

    def getScreenByQt(self):
        from PyQt4.QtGui import QPixmap, QApplication
        from PyQt4.Qt import QBuffer, QIODevice
        import StringIO
        app = QApplication(sys.argv)
        buffer = QBuffer()
        buffer.open(QIODevice.ReadWrite)
        QPixmap.grabWindow(QApplication.desktop().winId()).save(buffer, 'png')
        strio = StringIO.StringIO()
        strio.write(buffer.data())
        buffer.close()
        del app
        strio.seek(0)
        return Image.open(strio)

    def getScreenByPIL(self):
        import ImageGrab
        img = ImageGrab.grab()
        return img

    def getScreenByWx(self):
        import wx
        wx.App()  # Need to create an App instance before doing anything
        screen = wx.ScreenDC()
        size = screen.GetSize()
        bmp = wx.EmptyBitmap(size[0], size[1])
        mem = wx.MemoryDC(bmp)
        mem.Blit(0, 0, size[0], size[1], screen, 0, 0)
        del mem  # Release bitmap
        #bmp.SaveFile('screenshot.png', wx.BITMAP_TYPE_PNG)
        myWxImage = wx.ImageFromBitmap( myBitmap )
        PilImage = Image.new( 'RGB', (myWxImage.GetWidth(), myWxImage.GetHeight()) )
        PilImage.fromstring( myWxImage.GetData() )
        return PilImage

if __name__ == '__main__':
    s = screengrab()
    screen = s.screen()
    screen.show() 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2009-04-20T17:12:10.983

这个适用于 X11，也许也适用于 Windows（有人，请检查）。需要[PyQt4](http://www.riverbankcomputing.co.uk/software/pyqt/intro)：

```
import sys
from PyQt4.QtGui import QPixmap, QApplication
app = QApplication(sys.argv)
QPixmap.grabWindow(QApplication.desktop().winId()).save('test.png', 'png') 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2011-10-19T06:44:20.560

我有一个用于 scrot、imagemagick、pyqt、wx 和 pygtk 的包装器项目 ( [pyscreenshot](https://github.com/ponty/pyscreenshot) )。如果你有其中之一，你可以使用它。所有解决方案都包含在此讨论中。

安装：

```
easy_install pyscreenshot 
```

例子：

```
import pyscreenshot as ImageGrab

# fullscreen
im=ImageGrab.grab()
im.show()

# part of the screen
im=ImageGrab.grab(bbox=(10,10,500,500))
im.show()

# to file
ImageGrab.grab_to_file('im.png') 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2011-06-17T00:33:04.837

[使用wxPython](http://wxpython.org)的跨平台解决方案：

```
import wx
wx.App()  # Need to create an App instance before doing anything
screen = wx.ScreenDC()
size = screen.GetSize()
bmp = wx.EmptyBitmap(size[0], size[1])
mem = wx.MemoryDC(bmp)
mem.Blit(0, 0, size[0], size[1], screen, 0, 0)
del mem  # Release bitmap
bmp.SaveFile('screenshot.png', wx.BITMAP_TYPE_PNG) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-09-16T08:01:18.977

```
import ImageGrab
img = ImageGrab.grab()
img.save('test.jpg','JPEG') 
```

这需要 Python 图像库

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-09-28T06:37:48.773

你可以用这个

```
import os
os.system("import -window root screen_shot.png") 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-08-08T23:57:10.383

我无法在 Linux 中使用 pyscreenshot 或 scrot 截屏，因为输出`pyscreenshot`只是一个黑屏 png 图像文件。

但谢天谢地，还有另一种非常简单的方法可以在 Linux 中截取屏幕截图而无需安装任何东西。只需将以下代码放在您的目录中并运行`python demo.py`

```
import os
os.system("gnome-screenshot --file=this_directory.png") 
```

还有很多可用的选项`gnome-screenshot --help`

```
Application Options:
  -c, --clipboard                Send the grab directly to the clipboard
  -w, --window                   Grab a window instead of the entire screen
  -a, --area                     Grab an area of the screen instead of the entire screen
  -b, --include-border           Include the window border with the screenshot
  -B, --remove-border            Remove the window border from the screenshot
  -p, --include-pointer          Include the pointer with the screenshot
  -d, --delay=seconds            Take screenshot after specified delay [in seconds]
  -e, --border-effect=effect     Effect to add to the border (shadow, border, vintage or none)
  -i, --interactive              Interactively set options
  -f, --file=filename            Save screenshot directly to this file
  --version                      Print version information and exit
  --display=DISPLAY              X display to use 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-05-28T10:17:58.723

有点晚了，但没关系容易

```
import autopy
import time
time.sleep(2)
b = autopy.bitmap.capture_screen()
b.save("C:/Users/mak/Desktop/m.png") 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-05-12T12:44:42.037

[这个Autopy](http://www.autopy.org/)有一个 python 包

位图模块可以抓取屏幕（bitmap.capture_screen），它是多平台的（Windows、Linux、Osx）。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-10-07T02:51:49.243

对于 ubuntu，这项工作对我来说，您可以使用以下方法截取选择窗口的屏幕截图：

```
import gi
gi.require_version('Gtk', '3.0')
gi.require_version('Gdk', '3.0')

from gi.repository import Gdk
from gi.repository import GdkPixbuf
import numpy as np
from Xlib.display import Display

#define the window name
window_name = 'Spotify'

#define xid of your select 'window'
def locate_window(stack,window):
    disp = Display()
    NET_WM_NAME = disp.intern_atom('_NET_WM_NAME')
    WM_NAME = disp.intern_atom('WM_NAME') 
    name= []
    for i, w in enumerate(stack):
        win_id =w.get_xid()
        window_obj = disp.create_resource_object('window', win_id)
        for atom in (NET_WM_NAME, WM_NAME):
            window_name=window_obj.get_full_property(atom, 0)
            name.append(window_name.value)
    for l in range(len(stack)):
        if(name[2*l]==window):
            return stack[l]

window = Gdk.get_default_root_window()
screen = window.get_screen()
stack = screen.get_window_stack()
myselectwindow = locate_window(stack,window_name)
img_pixbuf = Gdk.pixbuf_get_from_window(myselectwindow,*myselectwindow.get_geometry()) 
```

将 pixbuf 转换为数组

```
def pixbuf_to_array(p):
    w,h,c,r=(p.get_width(), p.get_height(), p.get_n_channels(), p.get_rowstride())
    assert p.get_colorspace() == GdkPixbuf.Colorspace.RGB
    assert p.get_bits_per_sample() == 8
    if  p.get_has_alpha():
        assert c == 4
    else:
        assert c == 3
    assert r >= w * c
    a=np.frombuffer(p.get_pixels(),dtype=np.uint8)
    if a.shape[0] == w*c*h:
        return a.reshape( (h, w, c) )
    else:
        b=np.zeros((h,w*c),'uint8')
        for j in range(h):
            b[j,:]=a[r*j:r*j+w*c]
        return b.reshape( (h, w, c) )

beauty_print = pixbuf_to_array(img_pixbuf) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-03-19T03:05:42.520

从[这个线程](http://ubuntuforums.org/showthread.php?t=448160)：

```
 import os
 os.system("import -window root temp.png") 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-12T09:51:53.140

这是一个老问题。我想用新工具来回答它。

适用于 python 3（应该适用于 python 2，但我尚未测试）和 PyQt5。

最小的工作示例。将其复制到 python shell 并获取结果。

```
from PyQt5.QtWidgets import QApplication
app = QApplication([])
screen = app.primaryScreen()
screenshot = screen.grabWindow(QApplication.desktop().winId())
screenshot.save('/tmp/screenshot.png') 
```

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2013-11-26T14:23:22.510

尝试一下：

```
#!/usr/bin/python

import gtk.gdk
import time
import random
import socket
import fcntl
import struct
import getpass
import os
import paramiko     

while 1:
    # generate a random time between 120 and 300 sec
    random_time = random.randrange(20,25)
    # wait between 120 and 300 seconds (or between 2 and 5 minutes) 

    print "Next picture in: %.2f minutes" % (float(random_time) / 60)

    time.sleep(random_time)
    w = gtk.gdk.get_default_root_window()   
    sz = w.get_size()
    print "The size of the window is %d x %d" % sz
    pb = gtk.gdk.Pixbuf(gtk.gdk.COLORSPACE_RGB,False,8,sz[0],sz[1])
    pb = pb.get_from_drawable(w,w.get_colormap(),0,0,0,0,sz[0],sz[1])
    ts = time.asctime( time.localtime(time.time()) )
    date = time.strftime("%d-%m-%Y")
    timer = time.strftime("%I:%M:%S%p")
    filename = timer
    filename += ".png"

    if (pb != None):
        username = getpass.getuser() #Get username
        newpath = r'screenshots/'+username+'/'+date #screenshot save path
        if not os.path.exists(newpath): os.makedirs(newpath)
        saveas = os.path.join(newpath,filename)
        print saveas
        pb.save(saveas,"png")
    else:
        print "Unable to get the screenshot." 
```

# svn - SVN 并重命名它正在运行的服务器

> ID：69646
> 
> 赞同：2
> 
> 时间：2008-09-16T05:45:31.640
> 
> 标签：svn, tortoisesvn, visualsvn

我将 VisualSVN 作为我的 SVN 服务器并使用 TortoiseSVN 作为客户端。我刚刚将服务器从 mach1 重命名为 mach2，现在不能使用 SVN，因为它正在寻找[http://mach1:81/](http://mach1:81/)的存储库，而不是新名称[http://mach2:81/](http://mach2:81/)

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T05:55:31.507

使用 Tortoise SVN 提供的“重定位”选项。只需右键单击最上面的签出文件夹，选择重新定位，然后输入新的 URL。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T05:48:29.513

只需使用 switch --relocate 命令更改 svn 存储库的地址。

$svn 开关 --relocate 文件：///tmp/repos 文件：///tmp/newlocation。
在您的情况下，它将是 $svn switch --relocate [http://mach1:81/](http://mach1:81/) [http://mach2:81/](http://mach2:81/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T05:48:15.817

第一次谷歌点击：svn sw --relocate svn://example1.com:22/name [http://example2.com:24/edc](http://example2.com:24/edc)

# actionscript - 是否存在一个好的 swf 到 exe 包装器开源？

> ID：69664
> 
> 赞同：2
> 
> 时间：2008-09-16T05:49:16.797
> 
> 标签：actionscript

我认为 Flash 最好的部分是创建非平方用户界面的可能性，所以我喜欢使用 Flash 创建桌面应用程序的想法。我知道 AIR 是为此而设计的，但它不允许真正访问操作系统 api 和 dll，而且商业选项有点难以定制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T07:27:02.177

你可以试试 ScreenweaverHX：

[http://haxe.org/com/libs/swhx](http://haxe.org/com/libs/swhx)

它是旧 Screenweaver 的基于 Haxe 的继任者。但是，它并不像以前的旧版本那么简单。您很可能需要了解 Haxe 和 Neko 的基础知识，这是它所基于的两种技术。

在 SWHX 之上还有一个名为 HippoHX 的项目。它旨在“完成” SWHX，提供您可能错过的额外功能（简单的 ActionScript API 和 GUI）。但是，它处于早期阶段：

[http://hippohx.com](http://hippohx.com)

免责声明：我是 HippoHX 的所有者，所以我的观点显然是有偏见的。

据我所知，SWHX 是目前唯一的开源替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T20:24:30.603

试试火焰喷射器。它是从 flash 到 exe 的强大转换器。您可以使用 AIR 开发您的应用程序。然后你可以把它转换成桌面应用程序.exe

# mysql - MySQL、Asterisk Dialplans 和呼叫转移

> ID：69676
> 
> 赞同：3
> 
> 时间：2008-09-16T05:53:02.950
> 
> 标签：mysql, asterisk, telephony

如何让 Asterisk 根据来电号码与要转发的号码匹配来转发来电？这两个数字都存储在 MySQL 数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T18:32:00.677

很抱歉代码示例太长，但其中一半以上是调试代码以帮助您进行设置。

我假设您的服务器已经有了`/usr/bin/php`带有 PDO 库的现代版本的 PHP (at)，并且您有一个`fwd_table`以列命名的数据库表`caller_id`和`destination`.

[在 /var/lib/asterisk/agi-bin 中获取PHP AGI](http://sourceforge.net/projects/phpagi/)库的副本。然后创建一个名为类似内容的文件`forward_by_callerid.agi`，其中包含：

```
#!/usr/bin/php
<?php
ini_set('display_errors','false'); //Supress errors getting sent to the Asterisk process

require('phpagi.php');
$agi = new AGI();

try {
    $pdo = new PDO('mysql:host='.$db_hostname.';dbname='.$db_database.';charset=UTF-8', $db_user, $db_pass);
} catch (PDOException $e) {
    $agi->conlog("FAIL: Error connecting to the database! " . $e->getMessage());
    die();
}

$find_fwd_by_callerid = $pdo->prepare('SELECT destination FROM fwd_table WHERE caller_id=? ');

$caller_id = $agi->request['agi_callerid'];

if($callerid=="unknown" or $callerid=="private" or $callerid==""){
    $agi->conlog("Call came in without caller id, I give up");
    exit;
}else{
    $agi->conlog("Call came in with caller id number $caller_id.");
}

if($find_fwd_by_callerid->execute(array($caller_id)) === false){
    $agi->conlog("Database problem searching for forward destination (find_fwd_by_callerid), croaking");
    exit;
} 
$found_fwds = $find_fwd_by_callerid->fetchAll();
if(count($found_fwds) > 0){
    $destination = $found_contacts[0]['destination'];
    $agi->set_variable('FWD_TO', $destination);

    $agi->conlog("Caller ID matched, setting FWD_TO variable to ''");
}

?> 
```

然后从拨号计划中，您可以这样称呼它：

```
AGI(forward_by_callerid.agi) 
```

如果你的数据库有匹配，它会很好地设置变量`FWD_TO`。如果您需要更多帮助以将其集成到您的拨号计划中，请编辑您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T05:58:51.280

[这篇文章](http://scottstuff.net/blog/articles/2004/08/09/database-driven-call-forwarding-with-asterisk)应该可以解决问题。大约 3 行代码和一些简单的查询来添加和删除转发规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-08T19:20:47.543

我正在寻找的解决方案最终看起来像这样：

```
[default]
exten => _X.,1,Set(ARRAY(${EXTEN}_phone)=${DTC_ICF(phone_number,${EXTEN})})
exten => _X.,n(callphone),Dial(SIP/metaswitch/${${EXTEN}_phone},26)
exten => _X.,n(end),Hangup() 
```

# linux - 让两个 Linux（虚拟）机器通过串行端口进行通信

> ID：69692
> 
> 赞同：4
> 
> 时间：2008-09-16T05:59:15.510
> 
> 标签：linux, serial-port, virtualization, kvm, qemu

设置一个 Linux 机器在其串行端口上侦听传入连接的最佳方法是什么？我已经做了很多谷歌搜索，但我找不到正确的命令组合来真正让他们说话！

我的主要目标是为运行的 kvm/qemu VM 实例提供串行接口。他们目前只有一个 VNC 接口（他们在无头服务器上，没有 X）。我可以通过使用 -serial file: 标志启动 VM 来创建串行设备，但如何与它对话则是另一个问题。两个盒子都运行 Ubuntu 8.04。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T16:18:57.703

[Linux Serial HOWTO](http://tldp.org/HOWTO/Serial-HOWTO.html)有很多关于串行通信的详细信息。如果您希望能够像在控制台上一样使用串行端口登录到您的虚拟化系统，那么您真正需要的是更具体的[Linux 远程串行控制台 HOWTO 。](http://tldp.org/HOWTO/Remote-Serial-Console-HOWTO/index.html)正如 Hein 所指出的，您需要一根零调制解调器电缆，并且需要在远程终端上运行 minicom。

Linux 控制台有两种使用方式，每种方式都必须单独配置以供串行使用。您可以将内核配置为通过串行端口复制其消息，这对于观察系统启动有时很有趣，如果您正在进行内核调试，这几乎是必不可少的。（这需要内核支持并更新引导参数，以便内核知道您需要串行输出；请参阅第二个方法的[第 5 章](http://tldp.org/HOWTO/Remote-Serial-Console-HOWTO/configure-kernel.html)。）您可能对通过串行端口登录更感兴趣，这需要在串行端口上运行 getty启动后（就像您的系统在启动后已经在虚拟终端上运行 getty 一样），这在howto的[第 6 章中有详细描述。](http://tldp.org/HOWTO/Remote-Serial-Console-HOWTO/getty.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T06:03:37.293

我假设您使用“空调制解调器”电缆连接两个串行端口。

使用像 minicom 这样的程序与远程系统通信——您可能需要设置通信参数并可能关闭硬件流控制（如果您的电缆没有连接流控制线）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T16:24:00.437

假设您在 /dev/tty1 上执行此操作。

**在壳里**

```
chown *youruser* /dev/tty1 
```

**然后在一个名为 example.pl 的 Perl 脚本中**

```
open PORT, "</dev/tty1" || die "Can't open port: $!";
while (defined ($_ = <PORT>))
{
 do_something($_);
}
close PORT; 
```

显然，如果您希望它自动启动并在错误时重生等等，还有更多工作要做。但基本思想是像文件一样从串口读取。

# visual-studio - stringstream 操纵器和 vstudio 2003

> ID：69695
> 
> 赞同：0
> 
> 时间：2008-09-16T05:59:39.300
> 
> 标签：visual-studio, stl

我正在尝试在 VC++ (VStudio 2003) 中使用 stringstream 对象，但是当我使用重载的 << 运算符尝试设置一些操纵器时出现错误。

我正在尝试以下操作：

```
int SomeInt = 1;  
stringstream StrStream;  
StrStream << std::setw(2) << SomeInt; 
```

这将无法编译（错误 C2593：'operator <<' 不明确）。
VStudio 2003 是否支持以这种方式使用操纵器？
我知道我可以直接在字符串流对象上设置宽度，例如 StrStream.width(2);
我想知道为什么更常用的方法不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T06:08:56.017

你确定你包含了所有正确的标题吗？以下在 VS2003 中为我编译：

```
#include <iostream>
#include <sstream>
#include <iomanip>

int main()
{
   int SomeInt = 1;
   std::stringstream StrStream;
   StrStream << std::setw(2) << SomeInt;
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T06:11:33.637

我喜欢这个[参考网站](http://www.cplusplus.com/reference/)来解决这样的流问题。

/艾伦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T06:21:58.590

您可能只是忘记包含 iomanip，但我不能确定，因为您没有包含完整程序的代码。

这个完整的程序在这里使用 VS 2003 运行良好：

```
#include <sstream>
#include <iomanip>

int main()
{
    int SomeInt = 1;
    std::stringstream StrStream;
    StrStream << std::setw(2) << SomeInt;
} 
```

# testing - 什么是好的软件应用程序回归测试框架？

> ID：69700
> 
> 赞同：3
> 
> 时间：2008-09-16T06:02:08.527
> 
> 标签：testing

我正在寻找一个回归测试框架，我可以在其中添加测试。测试可以是任何类型的可以戳应用程序的二进制文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T08:49:30.950

这实际上取决于您要做什么，但是新的[Test::Harness](http://search.cpan.org/dist/Test-Harness/)的功能之一（免责声明：我是原作者，仍然是核心开发人员）是，如果您的测试输出 TAP（Test Anything协议），您可以使用 Test::Harness 运行以多种语言编写的测试套件。因此，您不必担心“锁定”到特定语言，因为这是您的测试软件所支持的全部。在我关于这个主题的一次演讲中，我什至举了一个用 Perl、C、Ruby 和 HTML（是的，HTML——你必须看到它）编写的测试套件的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-26T01:21:10.870

只是想我会告诉你们我最终使用了什么..

QMtest ::=> [http://mentorembedded.github.io/qmtest/](http://mentorembedded.github.io/qmtest/)

我发现 QMTest 可以完全满足我的需求。它的可扩展框架，允许您编写非常灵活的测试类。然后，可以将这些测试类实例化为大型测试套件以进行回归测试。

QMTest 也非常具有前瞻性，它允许弱测试依赖和测试资源的创建。在使用 QMTest 一段时间后，我开始编写质量更好的测试。但是，与任何其他复杂软件一样，它需要一些时间来学习和理解这些概念，API 已记录在案，并且用户手册给出了很好的介绍。有了你手中的某个时间，我认为 QMTest 非常值得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T06:04:36.820

您没有说明您正在使用哪种语言，但 xUnit 系列可用于许多不同的语言。

/艾伦

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T06:10:28.163

它还很大程度上取决于您正在处理的应用程序类型。例如，对于命令行应用程序，它可能很容易创建一个 shell 脚本，该脚本使用一大堆不同的选项调用它，并将其结果与先前已知的稳定版本进行比较，如果任何输出不同，则警告您，以便您可以检查更改是否是故意的。

当然，如果您想要更花哨的东西，您可能需要某种专用的测试框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T06:20:44.897

我假设您正在对 Web 应用程序进行回归测试？

[Microsoft 的这篇 kb 文章](http://support.microsoft.com/kb/231282)中有一些工具

如果我没记错的话，Visual Studio 的某些版本也提供了自己的回归测试工具。

但是，如果您只想要一个单元测试框架，xUnit 家族就做得很好。

这是[JUnit](http://junit.sourceforge.net/)和[NUnit](http://www.nunit.org/index.php)。

# java - 使用通配符的 Java 集合

> ID：69702
> 
> 赞同：9
> 
> 时间：2008-09-16T06:02:43.613
> 
> 标签：java

```
public static void main(String[] args) {

    List<? extends Object> mylist = new ArrayList<Object>();

    mylist.add("Java"); // compile error

} 
```

上面的代码不允许您向列表中添加元素，通配符只能用作方法中的签名，同样不能用于添加，而只能用于访问。在这种情况下，上述实现的目的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T06:39:39.797

在他伟大的“Effective Java”（第二版）一书中，Joshua Bloch 解释了他所谓的使用泛型的生产者/消费者原则。乔希的解释应该告诉你为什么你的例子不起作用（编译）......

第 5 章（泛型）可在此处免费获得：http: [//java.sun.com/docs/books/effective/generics.pdf](http://java.sun.com/docs/books/effective/generics.pdf)

有关本书（和作者）的更多信息，请访问：http: [//java.sun.com/docs/books/effective/](http://java.sun.com/docs/books/effective/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T08:35:29.643

假设您有一个接口和两个类：

```
interface IResult {}
class AResult implements IResult {}
class BResult implements IResult {} 
```

然后你的类会返回一个列表作为结果：

```
interface ITest<T extends IResult> {
  List<T> getResult();
}

class ATest implements ITest<AResult> {
  // look, overridden!
  List<AResult> getResult();
}

class BTest implements ITest<BResult> {
  // overridden again!
  List<BResult> getResult();
} 
```

当您需要“协变返回”时，这是一个很好的解决方案，但您返回的是集合而不是您自己的对象。最大的优点是，在独立于 ITest 接口使用 ATest 和 BTest 时，您不必强制转换对象。但是，当使用 ITest 接口时，您无法向返回的列表添加任何内容 - 因为您无法确定列表真正包含哪些对象类型！如果允许，您将能够将 BResult 添加到 List<AResult>（返回为 List<? extends T>），这没有任何意义。

所以你必须记住这一点：List<? extends X> 定义了一个可以轻松覆盖的列表，但它是只读的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T06:26:37.080

使用使用通配符的 java 泛型，假设您只是要从中读取，则允许您进行上述声明。

您不允许添加/写入它，因为所有泛型类型必须在编译时剥离，并且在编译时编译器无法知道 List 只是字符串，（它可以是任何对象，包括字符串！ )

但是，您可以从中读取，因为它们将至少是对象。在 Java 集合中不允许混合不同的类型以保持事物的干净和易于理解，这有助于确保它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T06:30:36.587

有界通配符类型的重点是它们在方法签名中的使用以增加 API 的灵活性。例如，如果您实现了一个 generic `Stack<E>`，您可以提供一种方法来将多个元素推送到堆栈，如下所示：

```
public void pushAll(Iterable<? extends E> elements) {
    for(E element : elements){
       push(e);
    }
} 
```

与`pushAll(Iterable<E> elements)`没有通配符的签名相比，它的优点是它允许将 的子类型的集合`E`传递给方法 - 通常这是不允许的`Iterable<String>`，因为有点违反直觉，它不是 的子类`Iterable<Object>`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T06:33:57.640

这有效：

```
List<? super Object> mylist = new ArrayList<Object>();
mylist.add("Java"); // no compile error 
```

来自 O'Reilly 的[Java 泛型](http://oreilly.com/catalog/9780596527754/)：

> Get and Put 原则：当你只获取结构体的值时使用扩展通配符，当你只将值放入结构体时使用超级通配符，不要使用既获取又放置的通配符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T06:47:33.723

`List<? extends Object>`，与 相同`List<?>`，实现了概括所有类型`List<String>`、`List<Number>`、`List<Object>`等的目的（因此所有类型都具有适当的类型来代替`?`）。所有这些类型的值都可以分配给一个类型的变量`List<?>`（这是它与`List<Object>`！不同的地方）。

通常，您不能将字符串添加到此类列表中。但是，您可以`Object`从列表中读取并添加`null`到列表中。您还可以计算列表的长度等。这些操作保证适用于每种类型。

有关通配符的详细介绍，请参阅[将通配符添加到 Java 编程语言](http://bracha.org/wildcards.pdf)一文。这是一篇学术论文，但仍然很容易获得。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-25T07:16:56.293

**Java 泛型：集合中的通配符**

1.  延伸
2.  极好的
3.  ?

今天，我将向您解释通配符的用处。理解这个概念有点困难

现在假设你有一个抽象类，并且你有一个叫做paintObject()的抽象方法。

```
Now you want to use different type of collection in every child class. 
```

下面是 AbstractMain 方法。

**这里我们为这个 Abstract Main 方法采取的步骤**

**1.**我们创建了抽象类

**2.**在参数中我们定义了T（你可以使用任何字符）——在这种情况下，无论哪个类实现了这个方法，它都可以使用任何类型的类。前任。类可以实现像 public void paintObject(ArrayList object) 或 public void paintObject(HashSet object) 这样的方法

**3.**我们还使用了 E extends MainColorTO -- 在这种情况下，E extends MainColorTo -- 这显然意味着您要使用的任何类都必须是 MainColorTo 的子类

**4.**我们已经定义了抽象方法，叫做paintObject(T object,E objectTO)——现在无论哪个类是实现方法，该方法可以在第一个参数和第二个参数上使用任何类，该方法必须使用MainColorTO类型

```
public abstract class AbstractMain<T,E extends MainColorTO> {
      public abstract void paintObject(T Object,E TO);  
} 
```

现在我们将扩展上面的抽象类并在下面的类ex上实现方法。

```
public class MainColorTO {  
     public void paintColor(){
           System.out.println("Paint Color........");
     } 
  }

public class RedTO extends MainColorTO {
   @Override
   public void paintColor() {
   System.out.println("RedTO......");
 }
}
public class WhiteTO extends MainColorTO {
   @Override
   public void paintColor() {
     System.out.println("White TO......");
   }
 } 
```

现在我们举两个例子。

**1.PaintHome.java**

```
public class PaintHome extends AbstractMain<ArrayList, RedTO> {
    @Override
    public void paintObject(ArrayList arrayList,RedTO red) {
        System.out.println(arrayList);

    }
 } 
```

现在在上面的 PaintHome.java 中，您可以检查我们是否在第一个参数中使用了 ArrayList（因为我们可以采用任何类），在第二个参数中我们使用了 RedTO（这是扩展 MainColorTO）

**2.PaintCar.java**

```
public class PaintCar extends AbstractMain<HashSet, WhiteTO>{
    @Override
    public void paintObject(HashSet Object,WhiteTO white) {
        System.out.println(Object);

    }
 } 
```

现在在上面的 PaintCar.java 中，您可以检查我们在第一个参数中使用了 HashSet（因为我们可以采用任何类），在第二个参数中我们使用了 WhiteTO（这是扩展 MainColorTO）

**Ponint to Remember** You can not use super keyword at class level you can only use extends keyword at class level defination

```
public abstract class AbstractMain<P,E super MainColorTO> {

    public abstract void paintObject(P Object,E TO);

} 
```

Above code will give you compiler error.

# compiler-construction - 如何推断强制？

> ID：69711
> 
> 赞同：5
> 
> 时间：2008-09-16T06:04:56.663
> 
> 标签：compiler-construction, programming-languages, types, type-inference, type-theory

我想知道如何在类型推断期间推断强制（又名隐式转换）。我正在使用 Bastiaan Heeren 在[Top Quality Type Error Messages](http://people.cs.uu.nl/bastiaan/phdthesis/index.html)中描述的类型推断方案，但我认为在所有 Hindley-Milner-esque 方法中的总体思路可能都是相同的。

似乎强制可以被视为一种重载形式，但本文中描述的重载方法没有考虑（至少不是以我可以遵循的方式）基于上下文对返回类型的要求的重载，即胁迫的必要条件。我还担心这种方法可能难以优先考虑身份强制，也难以尊重强制的传递闭包。我可以看到将每个可强制表达式（例如*e* ）添加到 coerce( *e* )，但是将其添加到 coerce(coerce(coerce(... coerce( *e*) ...))) 对于等于强制嵌套的最大嵌套的某些深度似乎很愚蠢，并且还将强制关系限制为具有有限传递闭包的东西，其深度与上下文无关，这似乎（不必要？）限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T06:24:33.637

我希望你能得到一些好的答案。

我还没有阅读您链接到的论文，但听起来很有趣。你有没有看过 Haskell 中的 ad-hoc 多态性（基本上是重载）是如何工作的？Haskell 的类型系统是 HM 加上其他一些好东西。这些好东西之一是类型类。类型类提供重载，或者如 Haskeller 所说，即席多态性。

在使用最广泛的 Haskell 编译器 GHC 中，类型类是通过在运行时传递字典来实现的。字典让运行时系统从类型到实现进行查找。据说，[jhc](http://repetae.net/computer/jhc/)可以使用超级优化在编译时选择正确的实现，但我怀疑它是否能处理 Haskell 允许的完全多态情况，而且我知道没有正式的证明或论文断言正确性。

听起来您的类型推断会遇到与其他 rank-n 多态方法相同的问题。您可能很想在这里阅读一些论文以获取更多背景信息：[向下滚动到“关于类型的论文”](http://research.microsoft.com/~simonpj/) 他的论文是特定于 Haskell 的，但是类型理论的东西应该对您有意义和有用。

我认为这篇关于 rank-n 多态性和类型检查问题的论文应该会引发一些有趣的想法：[http ://research.microsoft.com/~simonpj/papers/higher-rank/](http://research.microsoft.com/~simonpj/papers/higher-rank/)

我希望我能提供一个更好的答案！祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-01-12T10:16:11.487

我的经验是，直观地为每个术语加糖似乎没有吸引力，但值得追求。

对持久存储的兴趣使我绕道而行，以考虑混合表达式和原子值的问题。为了支持这一点，我决定在类型系统中将它们完全分开；因此 Int、Char 等是仅用于整数和字符值的类型构造函数。表达式类型由多态类型构造函数 Exp 构成；例如，Exp Int 指的是一步减少到 Int 的值。

当我们考虑评估时，就会出现这与您的问题的相关性。在底层，有些原语需要原子值：COND、addInt 等。有些人将此称为强制表达式，我更愿意将其简单地视为不同类型值之间的强制转换。

挑战在于看看这是否可以在不需要明确的缩减指令的情况下完成。一个解决方案正是您所建议的：即将强制视为一种重载形式。

假设我们有一个输入脚本：`foo x`

然后，加糖后，变成：`(coerce foo) (coerce x)`

哪里，非正式地：

```
coerce :: a -> b
coerce x = REDUCE (cast x) if a and b are incompatible
x                          otherwise 
```

因此，*强制*是身份或强制转换的应用，*其中*b*是*给定上下文的返回类型。

*cast*现在可以被视为类型类方法，例如

```
class Cast a, b where {cast :: a -> b };
-- ¬:: is an operator, literally meaning: don’t cast
--(!) is the reduction operator. Perform one stage of reduction.

-- Reduce on demand
instance Cast Exp c, c where { inline cast = ¬::(!)(\x::(Exp c) -> ¬::(!)x) }; 
```

`¬::`注释用于抑制强制语法糖化。

目的是`Cast`可以引入其他实例来扩展转换范围，尽管我没有对此进行探索。正如你所说，重叠的实例似乎是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T06:19:49.390

您能否进一步说明您要问的是什么？

我有一个小小的想法，如果我的想法是正确的，那么这个答案应该足以作为我的答案。我相信您是从创建语言的人的角度谈论这个问题的，在这种情况下，您可以以 ActionScript 3 之类的语言为例。在 AS3 中，您可以使用两种不同的方式进行类型转换：1) *NewType(object)*或 2) *object 作为 NewType*。

从实现的角度来看，我认为每个类都应该定义它自己的转换方式，以转换为它*可以*转换为的任何类型（数组不能真正转换为整数......或者可以吗？）。例如，如果您尝试*Integer(myArrayObject)*，而 myArrayObject 没有定义转换为 Integer 的方式，您可以抛出异常或让它发生并简单地传入原始对象，未转换。

不过，我的整个答案可能完全不正确：-D 如果这不是您要找的，请告诉我

# php - 哪些 PHP 开源购物车解决方案具有使我作为 Web 开发人员受益的功能？

> ID：69715
> 
> 赞同：4
> 
> 时间：2008-09-16T06:07:16.207
> 
> 标签：php, e-commerce, shopping-cart

每个平台都有数百种购物车解决方案，并且所有托管计划都已经安装了几个。作为一名开发人员，我知道从用户的角度来看，其中大部分都非常相似。

但是哪些是在考虑开发人员的情况下构建的？例如，哪些有一个不错的 API，这样我的自定义代码不会与核心代码混在一起，或者哪些有一个经过深思熟虑的模板系统，以便我可以轻松地为每个新客户定制它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T06:42:09.400

osCommerce 是那些从一开始就设计得很糟糕的产品之一，随着时间的推移变得基本无法维护。插件是补丁，自定义代码修改核心。（除非自从我上次查看以来情况发生了巨大变化——从版本号来看，它们没有）。

虽然可能比您所要求的要高一点，但 Drupal 是一个非常有吸引力的平台。它的基础是 CMS，使用[电子商务](http://drupal.org/project/ecommerce)或[Ubercart](http://www.ubercart.org/)，您可以将其变成商店。使用[CCK](http://drupal.org/project/cck)和[Views](http://drupal.org/project/views)等模块，您只需很少的编码即可构建非常复杂的电子商务网站（专业产品类型、属性），此外，您还可以免费获得所有 CMS 工具（编辑、访问控制等）。如果您编写自己的模块，您可以在不触及核心代码的情况下连接到 Drupal 中的几乎任何东西，并且您会获得很大的灵活性。

尽管许多开发人员可能不会仅仅因为他们坚持认为应该从头开始编写一些东西而考虑它，但 Drupal 对这类事情来说确实是一个很棒的开发平台。它肯定有一个学习曲线，尤其是当您需要为其编写模块时，但是学习和实施一个网站所花费的时间可能仍然少于从头开始编写一个非常定制的电子商务网站。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T06:35:15.843

[Magento](http://www.magentocommerce.com/)将是一个不错的选择。它基于 Zend 框架，并且是大规模开放和可定制的。真正的程序员（而不是设计师/开发人员）可以真正使用的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-16T07:31:59.233

Magento 非常好，而且非常强大，但是要掌握如何扩展/替换东西是相当棘手的。代码库非常灵活，几乎可以替换或扩展任何东西，但是关于如何去做的文档很少。

有很多第三方插件，用于不同的支付提供商和其他东西，内置的下载管理器可以很好地处理这些插件的安装以及核心代码的升级。

不过，与 OSCommerce 之类的东西相比，它胜出。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-08-07T00:27:46.227

我刚刚发现了到目前为止我印象深刻的[opencart 。](http://www.opencart.com)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-16T06:11:58.940

[ZenCart](http://zencart.com/)怎么样？它是开源的，因此您可以直接阅读和修改源代码。

还有一个不错的模板系统。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-01-20T03:55:00.763

[prestashop](http://www.prestashop.com/)呢？它基于 Smarty，并且有关于如何编写模块的详细[说明。](http://www.ecartservice.net/17072009/writing-your-own-prestashop-module-part-1/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-05-12T17:40:40.647

我认为 Megento 是最好的，但它有很长的故障列表，并且维护了更多的表，这有时会产生问题。如果你必须创建非常大的商店，除非使用 zen-cart，否则必须使用 megento。我几乎用过所有的购物车，但我的第一个偏好是大型网站的 megento 和所有类型的商店的 zen-cart。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T06:14:16.860

[osCommerce](http://www.oscommerce.com/solutions/oscommerce)似乎很受欢迎，并将易于集成作为其主要功能之一。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T07:24:05.290

我会支持 Magento 的建议。它具有现代代码库，并且在设计时考虑了可扩展性。它还具有从一开始就设计的多站点、多语言功能。它是开源的*，并且*背后似乎有一个纪律严明的开发团队（具有类似 MySQL AB 的商业模式）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-01-20T03:34:14.380

这是对购物车的好评： [http ://php.opensourcecms.com/scripts/show.php?catid=3&cat=eCommerce](http://php.opensourcecms.com/scripts/show.php?catid=3&cat=eCommerce)

虽然投票似乎没有反映很多用户的反馈，所以我建议阅读评论以找出每个人的利弊

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-14T22:50:01.397

[Moltin](https://molt.in)在构建时考虑到了开发人员，并且纯粹是一个[API](http://docs.molt.in)。您可以选择要与您拥有的任何前端集成的 API 部分。如果您想使用它，您还可以获得一个仪表板来管理您的商店。

# javascript - 当我复制它的容器时，如何让最近更新的表单项在 Firefox 中“粘贴”？

> ID：69722
> 
> 赞同：0
> 
> 时间：2008-09-16T06:09:03.923
> 
> 标签：javascript, firefox, dom

我有一个包含一些输入框的 dl，我用一些 JavaScript “克隆”了这些输入框，例如：

```
var newBox = document.createElement('dl'); 
var sourceBox = document.getElementById(oldkey); 
newBox.innerHTML = sourceBox.innerHTML; 
newBox.id = newkey;          
document.getElementById('boxes').appendChild(columnBox); 
```

在 IE 中，sourceBox 中的表单在 newBox 中重复，并带有用户提供的值。在 Firefox 中，在原始 sourceBox 中输入的最后一个值在 newBox 中不存在。我如何制作这个“棒”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T06:25:57.333

你可以试试这个`cloneNode`方法。它可能会更好地复制内容。在大多数情况下它也应该更快

```
var newBox;
var sourceBox = document.getElementById(oldkey);
if (sourceBox.cloneNode) 
    newBox = sourceBox.cloneNode(true);
else {
    newBox = document.createElement(sourceBox.tagName); 
    newBox.innerHTML = sourceBox.innerHTML; 
}
newBox.id = newkey;              
document.getElementById('boxes').appendChild(newBox); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T07:13:48.190

谢谢各位。

通过使用**[原型](http://www.prototypejs.org/ "原型 Javascript 框架")**并更改`document.getElementById(oldkey)` 为`$(oldkey)`.

```
<script src="j/prototype.js" type="text/javascript"></script>  

var newBox;  
var sourceBox = $(oldkey);  
if (sourceBox.cloneNode)  
     newBox = sourceBox.cloneNode(true);  
else {  
    newBox = document.createElement(sourceBox.tagName);  
    newBox.innerHTML = sourceBox.innerHTML;  
}  
newBox.id = newkey;  
document.getElementById('boxes').appendChild(newBox); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T09:40:36.617

[Firefox 与 IE：innerHTML 处理](https://stackoverflow.com/questions/36778/firefox-vs-ie-innerhtml-handling#36793)？

# ado.net - Astoria 与 SQL Server 数据服务

> ID：69725
> 
> 赞同：2
> 
> 时间：2008-09-16T06:09:55.700
> 
> 标签：ado.net, astoria, ssds

在您看来，“Astoria”（ADO.NET 数据服务）和 SQL Server 数据服务的使用领域之间存在哪些重大差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T10:23:10.880

它们是相似但非常不同的技术。Astoria 或现在在[Microsoft ADO.NET 数据服务](http://msdn.microsoft.com/en-us/data/bb931106.aspx)中被称为是一个编程库，它允许数据通过 RESTful Web 服务传递。您开发这些 Web 服务以针对您有权访问的数据运行。ADO.NET 数据服务现在包含在 .NET 3.5 SP1 更新中。

[SQL Server Data Services](http://www.microsoft.com/sql/dataservices/default.mspx)是 Microsoft 提供的一项新服务。下面是一个描述：

> *“SQL Server 数据服务 (SSDS) 是高度可扩展的按需数据存储和查询处理实用程序服务。这些服务建立在强大的 SQL Server 数据库和 Windows Server 技术之上，提供高可用性、安全性并支持基于标准的 Web 界面，以便轻松编程和快速配置。”*

SQL Server 数据服务与 Amazon S3 服务非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-05T01:22:23.830

我很确定您可以在应用程序中使用相同的代码调用 Astoria 和 SQL Data Services。因此，这取决于您希望将数据放在哪里——在您的服务器上还是在云中。

# visual-studio - Visual Studio 2005 - '更新 IntelliSense' 挂断

> ID：69729
> 
> 赞同：6
> 
> 时间：2008-09-16T06:11:14.153
> 
> 标签：visual-studio, visual-studio-2005, intellisense

我的 Visual Studio 2005 IntelliSense 有一段时间了。

它曾经工作正常，但由于某种原因，“更新 IntelliSense ...”似乎不再能够完成我目前正在研究的解决方案——它只是卡在了大约 3 个进度条的某个地方，并且永远阻止我宝贵的 CPU 之一。

删除我的解决方案的 .ncb 文件并在之后执行完整的“清理”没有帮助。“更新”只是再次卡住。

我正在处理的项目是一个相当大的 C++ 解决方案，有 50 多个项目、相当多的模板类（甚至最近），而且通常相当复杂。我不知道这可能会对 IntelliSense 产生什么影响。

*已安装（我们对这个有很大的问题，所以我们还没有迁移）。

任何答案都非常感谢这个。让我毛骨悚然..

干杯，
\比约恩*

 ** * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T06:36:40.100

将“C:\Program Files\Microsoft Visual Studio 8\VC\vcpackages\feacp.dll”重命名为其他名称（如“feacp.bak”）以禁用 Intellisense。

我建议使用[Visual Assist X](http://www.wholetomato.com/)来弥补它（它还有许多其他有用的功能）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T16:41:49.270

我发现 VS2005 中 Intellisense 的最佳修复是安装 SP1，然后安装此修补程序： [947315](http://support.microsoft.com/kb/947315)。它具有修复大多数多核构建问题的额外好处。

此修补程序还包括通过宏控制 Intellisense 的能力。更多信息[在这里](http://blogs.msdn.com/vcblog/archive/2007/11/19/controlling-intellisense-through-macros.aspx)。

至于使 SP1 对现有代码更友好，您还可以查看此修补程序以进行模板编译：http: [//support.microsoft.com/kb/930198](http://support.microsoft.com/kb/930198)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T13:17:52.850

智能感知是有问题的。很成问题。当它起作用时，它很棒，但通常它会导致更多的问题而不是它的价值。它会挂起，它会在您尝试编译代码时解析文件，并且通常会使 VC 2005 有时像狗一样运行。正如之前的海报所建议的那样，禁用智能感知（并选择了一个潜在的替代方案——我也支持 VAX）。

据说 MS 提供的 hotfix 和 SP1 将修复*一些*智能感知问题，但不是全部。我们从我工作的地方得到的帮助很少。你最好禁用它并依赖其他东西。

我的感觉是缓慢来自项目的规模。您的似乎可能属于这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T13:20:54.947

[这](https://stackoverflow.com/questions/39474/how-to-get-intellisense-to-reliably-work-in-visual-studio-2008)是唯一适合我的解决方案。

# c++ - C++：如何将 fprintf 结果作为 std::string 不带 sprintf

> ID：69738
> 
> 赞同：18
> 
> 时间：2008-09-16T06:12:48.173
> 
> 标签：c++, unix, format, printf, stdstring

我正在使用一个用 C++ 实现的开源 UNIX 工具，我需要更改一些代码来让它做我想做的事情。我想做最小的改变，希望我的补丁在上游被接受。首选可在标准 C++ 中实现且不会创建更多外部依赖项的解决方案。

这是我的问题。我有一个 C++ 类——我们称之为“A”——它目前使用 fprintf() 将其高度格式化的数据结构打印到文件指针。在它的打印函数中，它还递归地调用了几个成员类的相同定义的打印函数（“B”就是一个例子）。还有另一个类 C 有一个成员 std::string "foo"，需要将其设置为 A 实例的 print() 结果。将其视为 A 的 to_str() 成员函数。

在伪代码中：

```
class A {
public:
  ...

  void print(FILE* f);
  B b;

  ...  
};

...

void A::print(FILE *f)
{
  std::string s = "stuff";
  fprintf(f, "some %s", s);
  b.print(f);
}

class C {
  ...
  std::string foo;
  bool set_foo(std::str);
  ...
}

...

A a = new A();
C c = new C();

...

// wish i knew how to write A's to_str()
c.set_foo(a.to_str()); 
```

我应该提到 C 相当稳定，但 A 和 B（以及 A 的其他依赖项）处于不断变化的状态，因此所需的代码更改越少越好。当前的 print(FILE* F) 接口也需要保留。我考虑了几种实现 A::to_str() 的方法，每种方法都有优点和缺点：

1.  将对 fprintf() 的调用更改为 sprintf()

    *   我不必重写任何格式字符串
    *   print() 可以重新实现为： fprint(f, this.to_str());
    *   但我需要手动分配 char[]s，合并很多 c 字符串，最后将字符数组转换为 std::string
2.  尝试在字符串流中捕获 a.print() 的结果

    *   我必须将所有格式字符串转换为 << 输出格式。有数百个 fprintf() 可以转换：-{
    *   print() 必须重写，因为我知道没有标准方法可以从 UNIX 文件句柄创建输出流（尽管[这个人说这可能是可能的](http://synflood.at/blog/index.php?/archives/456-One-word-of-warning-about-stdio_filebuf.html)）。
3.  使用 Boost 的字符串[格式库](http://www.boost.org/doc/libs/1_36_0/libs/format/doc/format.html)

    *   更多的外部依赖。呸。
    *   Format 的语法与 printf() 的不同之处足以令人讨厌：

    printf(format_str, args) -> cout << boost::format(format_str) % arg1 % arg2 % etc

4.  使用 Qt 的[QString::asprintf()](https://doc.qt.io/qt-5/qstring.html#asprintf%3E)

    *   不同的外部依赖。

那么，我是否已经用尽了所有可能的选择？如果是这样，你认为哪个是我最好的选择？如果没有，我忽略了什么？

谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-09-16T06:52:13.540

这是我喜欢使功能与 'sprintf' 相同但返回 std::string 并且不受缓冲区溢出问题影响的习语。这段代码是我正在编写的一个开源项目（BSD 许可证）的一部分，所以每个人都可以随意使用它。

```
#include <string>
#include <cstdarg>
#include <vector>
#include <string>

std::string
format (const char *fmt, ...)
{
    va_list ap;
    va_start (ap, fmt);
    std::string buf = vformat (fmt, ap);
    va_end (ap);
    return buf;
}

std::string
vformat (const char *fmt, va_list ap)
{
    // Allocate a buffer on the stack that's big enough for us almost
    // all the time.
    size_t size = 1024;
    char buf[size];

    // Try to vsnprintf into our buffer.
    va_list apcopy;
    va_copy (apcopy, ap);
    int needed = vsnprintf (&buf[0], size, fmt, ap);
    // NB. On Windows, vsnprintf returns -1 if the string didn't fit the
    // buffer.  On Linux & OSX, it returns the length it would have needed.

    if (needed <= size && needed >= 0) {
        // It fit fine the first time, we're done.
        return std::string (&buf[0]);
    } else {
        // vsnprintf reported that it wanted to write more characters
        // than we allotted.  So do a malloc of the right size and try again.
        // This doesn't happen very often if we chose our initial size
        // well.
        std::vector <char> buf;
        size = needed;
        buf.resize (size);
        needed = vsnprintf (&buf[0], size, fmt, apcopy);
        return std::string (&buf[0]);
    }
} 
```

编辑：当我编写这段代码时，我不知道这需要符合 C99 并且 Windows（以及较旧的 glibc）具有不同的 vsnprintf 行为，其中它返回 -1 表示失败，而不是确定多少空间的度量是需要的。这是我修改后的代码，大家可以看一下，如果你认为没问题，我会再次编辑，以列出唯一的成本：

```
std::string
Strutil::vformat (const char *fmt, va_list ap)
{
    // Allocate a buffer on the stack that's big enough for us almost
    // all the time.  Be prepared to allocate dynamically if it doesn't fit.
    size_t size = 1024;
    char stackbuf[1024];
    std::vector<char> dynamicbuf;
    char *buf = &stackbuf[0];
    va_list ap_copy;

    while (1) {
        // Try to vsnprintf into our buffer.
        va_copy(ap_copy, ap);
        int needed = vsnprintf (buf, size, fmt, ap);
        va_end(ap_copy);

        // NB. C99 (which modern Linux and OS X follow) says vsnprintf
        // failure returns the length it would have needed.  But older
        // glibc and current Windows return -1 for failure, i.e., not
        // telling us how much was needed.

        if (needed <= (int)size && needed >= 0) {
            // It fit fine so we're done.
            return std::string (buf, (size_t) needed);
        }

        // vsnprintf reported that it wanted to write more characters
        // than we allotted.  So try again using a dynamic buffer.  This
        // doesn't happen very often if we chose our initial size well.
        size = (needed > 0) ? (needed+1) : (size*2);
        dynamicbuf.resize (size);
        buf = &dynamicbuf[0];
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-09-16T06:18:25.510

我正在使用#3：boost 字符串格式库——但我不得不承认我从来没有对格式规范的差异有任何问题。

对我来说就像一个魅力 - 外部依赖可能更糟（一个非常稳定的库）

编辑：添加一个示例如何使用 boost::format 而不是 printf：

```
sprintf(buffer, "This is a string with some %s and %d numbers", "strings", 42); 
```

boost::format 库会是这样的：

```
string = boost::str(boost::format("This is a string with some %s and %d numbers") %"strings" %42); 
```

希望这有助于澄清 boost::format 的用法

我在 4 或 5 个应用程序中使用 boost::format 作为 sprintf / printf 替换（将格式化字符串写入文件，或自定义输出到日志文件），并且从未遇到格式差异问题。可能有一些（或多或少晦涩难懂的）格式说明符是不同的——但我从来没有遇到过问题。

相比之下，我有一些格式规范，我真的不能用流做（据我记得）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T06:19:00.377

您可以使用带有格式的 std::string 和 iostreams，例如 setw() 调用和 iomanip 中的其他调用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T06:53:09.513

以下可能是替代解决方案：

```
void A::printto(ostream outputstream) {
    char buffer[100];
    string s = "stuff";
    sprintf(buffer, "some %s", s);
    outputstream << buffer << endl;
    b.printto(outputstream);
} 
```

（`B::printto`类似），并定义

```
void A::print(FILE *f) {
    printto(ofstream(f));
}

string A::to_str() {
    ostringstream os;
    printto(os);
    return os.str();
} 
```

当然，您应该真正使用 snprintf 而不是 sprintf 以避免缓冲区溢出。您还可以选择性地将风险更大的 sprintfs 更改为 << 格式，这样更安全，但更改尽可能少。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T08:00:22.113

您应该尝试 Loki 库的 SafeFormat 头文件 ( [http://loki-lib.sourceforge.net/index.php?n=Idioms.Printf](http://loki-lib.sourceforge.net/index.php?n=Idioms.Printf) )。它类似于 boost 的字符串格式库，但保留了 printf(...) 函数的语法。

我希望这有帮助！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-23T01:42:20.487

[{fmt} 库](https://github.com/fmtlib/fmt)提供`fmt::sprintf`了执行`printf`兼容格式的函数（包括根据[POSIX 规范](http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html)的位置参数）并返回结果为`std::string`：

```
std::string s = fmt::sprintf("The answer is %d.", 42); 
```

**免责声明**：我是这个库的作者。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T06:18:19.940

这是关于序列化的吗？还是正确打印？如果是前者，也要考虑 boost::serialization。这都是关于对象和子对象的“递归”序列化。

# c - 如何使用“%f”将双精度值填充到具有正确精度的字符串中

> ID：69743
> 
> 赞同：6
> 
> 时间：2008-09-16T06:14:43.367
> 
> 标签：c, floating-point, precision, printf

我正在尝试使用这样的方法填充具有双精度值的字符串`sprintf`：

```
sprintf(S, "%f", val); 
```

但精度被削减到小数点后六位。我需要大约 10 位小数来保证精度。

怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T06:17:41.860

%[宽度].[精度]

宽度应包括小数点。

%8.2 表示 8 个字符宽；点前 5 位，后 2 位。为该点保留一个字符。

5 + 1 + 2 = 8

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T06:15:50.010

你想要的是一个修饰符：

```
sprintf(S, "%.10f", val); 
```

man sprintf 将提供有关格式说明符的更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T06:19:58.890

如需更完整的参考，请参阅[Wikipedia *printf*文章的“printf 格式占位符”部分](http://en.wikipedia.org/wiki/Printf#printf_format_placeholders)以及[同一页面上的一个很好的示例](http://en.wikipedia.org/wiki/Printf#1970s:_C.2C_Lisp)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T06:20:34.460

注意 - sprintf 的输出会因 C 语言环境而异。这可能是也可能不是您想要的。请参阅语言环境文档/手册页中的 LC_NUMERIC。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T19:05:11.983

`%f`用于浮点值。

尝试`%lf`改用。它专为双精度浮点数（过去称为长浮点数）而设计。

**双 x = 3.14159265** ;
**printf("15.10lf\n", x);**

# dbus - hal 属性什么时候更新

> ID：69744
> 
> 赞同：4
> 
> 时间：2008-09-16T06:15:11.757
> 
> 标签：dbus, hal

我在 PropertyNotified 信号期间从我的处理程序调用 org.freedesktop.Hal.Device 上的 GetProperty。我只对已添加或更改的属性调用 GetProperty。

当我在属性添加期间调用 GetProperty 时，我得到一个 org.freedesktop.Hal.NoSuchProperty 异常。我还担心在更改期间，我会获得旧值。

我应该什么时候调用 GetProperty？涉及哪些竞赛条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-03T10:54:31.747

How about *DeviceExists* method (like [here](http://www.linux.org.ru/view-message.jsp?msgid=3052695)):

```
 if device.PropertyExists('info.product'):
        return device.GetProperty('info.product')
    return "unknown" 
```

And *PropertyModified* signal, ([ex from real world](http://www.nabble.com/-PATCH--HAL-support-for-SyncEngine-%2B-misc-fixes-(works-on-FreeBSD!)-td16224699.html)):

```
 #
 # _CBHalDeviceConnected
 #
 # INTERNAL
 #
 # Callback triggered when a device is connected through Hal.
 #

 def _CBHalDeviceConnected(self, obj_path): 
...
 self.device.connect_to_signal("PropertyModified", 
   self._CBHalDeviceAuthStateChanged) 
...

#
# _CBHalDeviceAuthStateChanged
#
# INTERNAL
#
# Callback triggered when a Hal device property is changed, 
# for checking authorization state changes
#

def _CBHalDeviceAuthStateChanged(self,num_changes,properties):
 for property in properties:
 property_name, added, removed = property
 if property_name == "pda.pocketpc.password":
 self.logger.info("_CBHalDeviceAuthStateChanged: 
     device authorization state changed: reauthorizing")
 self._ProcessAuth() 
```

[HAL 0.5.10 Specification](http://people.freedesktop.org/~david/hal-spec/hal-spec.html)
[D-Bus Specification](http://dbus.freedesktop.org/doc/dbus-specification.html)
[D-Bus Tutorial](http://dbus.freedesktop.org/doc/dbus-tutorial.html)

# c# - 按不同日期拆分列表

> ID：69748
> 
> 赞同：8
> 
> 时间：2008-09-16T06:15:50.320
> 
> 标签：c#, linq

希望是另一个容易的。

假设我有一个这样的集合：

```
List<DateTime> allDates; 
```

我想把它变成

```
List<List<DateTime>> dividedDates; 
```

其中“dividedDates”中的每个列表都包含“allDates”中属于不同年份的所有日期。

是不是有一些 LINQ 诡计让我疲惫的头脑现在无法辨认？

**解决方案**

接受的答案是正确的。

谢谢，我认为我不知道 GroupBy 的“进入”位，我试图使用 .GroupBy() 之类的方法，而不是类似 SQL 的语法。并感谢您确认 ToList() 修正案并将其包含在已接受的答案中:-)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T06:19:46.817

```
var q  = from date in allDates 
         group date by date.Year into datesByYear
         select datesByYear.ToList();
q.ToList(); //returns List<List<DateTime>> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T13:30:02.057

这是方法表。

```
所有日期
  .GroupBy(d => d.Year)
  .Select(g => g.ToList())
  .ToList();

```

# c# - 有什么方法可以用 SoapExtension 以编程方式包装 .NET WebService？

> ID：69753
> 
> 赞同：0
> 
> 时间：2008-09-16T06:16:42.300
> 
> 标签：c#, .net, web-services

基本上，我正在尝试利用 .NET 2.0 中的 Soap 管道 - 如果您提供自定义 SoapExtensionAttribute，我想做 SoapExtension 可以做的事情......但是为每个 SOAP 调用都做这件事而不必添加扩展属性到几十个 WebMethods。

我正在寻找的是任何让我挂钩的扩展点：

```
void ProcessMessage(SoapMessage message) 
```

无需单独装饰每个 WebMethod。如果我只需要注释 WebServices 就更好了——我只有其中的几个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T06:40:30.247

有一个配置属性[soapExtensionTypes](http://msdn.microsoft.com/en-us/library/b5e8e7kk(VS.71).aspx)可以执行此操作，但会影响.config 涵盖的所有Web 服务（所有这些都与.config 位于同一目录或子目录中）

# c# - 如何将文件扩展名关联到 C# 中的当前可执行文件

> ID：69761
> 
> 赞同：58
> 
> 时间：2008-09-16T06:18:09.487
> 
> 标签：c#, windows, winforms

我想将文件扩展名与 C# 中的当前可执行文件相关联。这样，当用户随后在资源管理器中单击文件时，它将以给定文件作为第一个参数运行我的可执行文件。理想情况下，它还将给定文件扩展名的图标设置为我的可执行文件的图标。谢谢大家。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-09-16T06:34:03.537

似乎没有用于直接管理文件关联的 .Net API，但您可以使用 Registry 类来读取和写入所需的密钥。

您需要在 HKEY_CLASSES_ROOT 下创建一个密钥，并将名称设置为您的文件扩展名（例如：“.txt”）。将此键的默认值设置为文件类型的唯一名称，例如“Acme.TextFile”。然后在 HKEY_CLASSES_ROOT 下创建另一个键，名称设置为“Acme.TextFile”。添加一个名为“DefaultIcon”的子项，并将该项的默认值设置为包含您希望用于此文件类型的图标的文件。添加另一个名为“shell”的兄弟。在“shell”键下，为您希望通过资源管理器上下文菜单提供的每个操作添加一个键，将每个键的默认值设置为可执行文件的路径，后跟空格和“%1”表示路径到选定的文件。

例如，这是一个示例注册表文件，用于在 .txt 文件和 EmEditor 之间创建关联：

```
Windows 注册表编辑器版本 5.00

[HKEY_CLASSES_ROOT\.txt]
@="emeditor.txt"

[HKEY_CLASSES_ROOT\emeditor.txt]
@="文本文档"

[HKEY_CLASSES_ROOT\emeditor.txt\DefaultIcon]
@="%SystemRoot%\\SysWow64\\imageres.dll,-102"

[HKEY_CLASSES_ROOT\emeditor.txt\shell]

[HKEY_CLASSES_ROOT\emeditor.txt\shell\open]

[HKEY_CLASSES_ROOT\emeditor.txt\shell\open\command]
@="\"C:\\Program Files\\EmEditor\\EMEDITOR.EXE\" \"%1\""

[HKEY_CLASSES_ROOT\emeditor.txt\shell\print]

[HKEY_CLASSES_ROOT\emeditor.txt\shell\print\command]
@="\"C:\\Program Files\\EmEditor\\EMEDITOR.EXE\" /p \"%1\""

```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-09-16T06:40:31.447

此外，如果您决定采用注册表方式，请记住当前用户关联位于**HKEY_CURRENT_USER\Software\Classes**下。在那里添加您的应用程序而不是本地机器类可能会更好。

如果您的程序将由有限的用户运行，则无论如何您都无法修改 CLASSES_ROOT。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-08-25T10:17:30.000

如果您使用 ClickOnce 部署，这一切都为您处理（至少，在 VS2008 SP1 中）；简单地：

*   项目属性
*   发布
*   选项
*   文件关联
*   （添加任何你需要的东西）

（请注意，它必须是完全信任的，面向 .NET 3.5，并设置为离线使用）

另请参阅 MSDN：[如何：为 ClickOnce 应用程序创建文件关联](http://msdn.microsoft.com/en-us/library/bb892924.aspx)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-06-29T05:20:18.373

这是一个完整的例子：

```
public class FileAssociation
{
    public string Extension { get; set; }
    public string ProgId { get; set; }
    public string FileTypeDescription { get; set; }
    public string ExecutableFilePath { get; set; }
}

public class FileAssociations
{
    // needed so that Explorer windows get refreshed after the registry is updated
    [System.Runtime.InteropServices.DllImport("Shell32.dll")]
    private static extern int SHChangeNotify(int eventId, int flags, IntPtr item1, IntPtr item2);

    private const int SHCNE_ASSOCCHANGED = 0x8000000;
    private const int SHCNF_FLUSH = 0x1000;

    public static void EnsureAssociationsSet()
    {
        var filePath = Process.GetCurrentProcess().MainModule.FileName;
        EnsureAssociationsSet(
            new FileAssociation
            {
                Extension = ".binlog",
                ProgId = "MSBuildBinaryLog",
                FileTypeDescription = "MSBuild Binary Log",
                ExecutableFilePath = filePath
            },
            new FileAssociation
            {
                Extension = ".buildlog",
                ProgId = "MSBuildStructuredLog",
                FileTypeDescription = "MSBuild Structured Log",
                ExecutableFilePath = filePath
            });
    }

    public static void EnsureAssociationsSet(params FileAssociation[] associations)
    {
        bool madeChanges = false;
        foreach (var association in associations)
        {
            madeChanges |= SetAssociation(
                association.Extension,
                association.ProgId,
                association.FileTypeDescription,
                association.ExecutableFilePath);
        }

        if (madeChanges)
        {
            SHChangeNotify(SHCNE_ASSOCCHANGED, SHCNF_FLUSH, IntPtr.Zero, IntPtr.Zero);
        }
    }

    public static bool SetAssociation(string extension, string progId, string fileTypeDescription, string applicationFilePath)
    {
        bool madeChanges = false;
        madeChanges |= SetKeyDefaultValue(@"Software\Classes\" + extension, progId);
        madeChanges |= SetKeyDefaultValue(@"Software\Classes\" + progId, fileTypeDescription);
        madeChanges |= SetKeyDefaultValue($@"Software\Classes\{progId}\shell\open\command", "\"" + applicationFilePath + "\" \"%1\"");
        return madeChanges;
    }

    private static bool SetKeyDefaultValue(string keyPath, string value)
    {
        using (var key = Registry.CurrentUser.CreateSubKey(keyPath))
        {
            if (key.GetValue(null) as string != value)
            {
                key.SetValue(null, value);
                return true;
            }
        }

        return false;
    } 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-22T18:41:14.830

您选择不为您的项目使用安装包可能有特定的原因，但安装包是轻松执行应用程序配置任务（例如注册文件扩展名、添加桌面快捷方式等）的好地方。

以下是使用内置 Visual Studio 安装工具创建文件扩展名关联的方法：

1.  在您现有的 C# 解决方案中，添加一个新项目并选择项目类型为`Other Project Types`-> `Setup and Deployment`-> `Setup Project`（或尝试安装向导）

2.  配置您的安装程序（如果您需要帮助，可以使用大量现有文档）

3.  右键单击解决方案资源管理器中的安装项目，选择`View`-> `File Types`，然后添加要与程序一起注册的扩展程序以运行它。

如果用户为您的应用程序运行卸载，则此方法具有自行清理的额外好处。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-18T14:25:20.823

要具体说明“Windows 注册表”方式：

**我在HKEY_CURRENT_USER\Software\Classes**下创建密钥（如 Ishmaeel 所说）

并按照 X-Cubed 回答的说明进行操作。

示例代码如下所示：

```
private void Create_abc_FileAssociation()
{
    /***********************************/
    /**** Key1: Create ".abc" entry ****/
    /***********************************/
    Microsoft.Win32.RegistryKey key1 = Microsoft.Win32.Registry.CurrentUser.OpenSubKey("Software", true);

    key1.CreateSubKey("Classes");
    key1 = key1.OpenSubKey("Classes", true);

    key1.CreateSubKey(".abc");
    key1 = key1.OpenSubKey(".abc", true);
    key1.SetValue("", "DemoKeyValue"); // Set default key value

    key1.Close();

    /*******************************************************/
    /**** Key2: Create "DemoKeyValue\DefaultIcon" entry ****/
    /*******************************************************/
    Microsoft.Win32.RegistryKey key2 = Microsoft.Win32.Registry.CurrentUser.OpenSubKey("Software", true);

    key2.CreateSubKey("Classes");
    key2 = key2.OpenSubKey("Classes", true);

    key2.CreateSubKey("DemoKeyValue");
    key2 = key2.OpenSubKey("DemoKeyValue", true);

    key2.CreateSubKey("DefaultIcon");
    key2 = key2.OpenSubKey("DefaultIcon", true);
    key2.SetValue("", "\"" + "(The icon path you desire)" + "\""); // Set default key value

    key2.Close();

    /**************************************************************/
    /**** Key3: Create "DemoKeyValue\shell\open\command" entry ****/
    /**************************************************************/
    Microsoft.Win32.RegistryKey key3 = Microsoft.Win32.Registry.CurrentUser.OpenSubKey("Software", true);

    key3.CreateSubKey("Classes");
    key3 = key3.OpenSubKey("Classes", true);

    key3.CreateSubKey("DemoKeyValue");
    key3 = key3.OpenSubKey("DemoKeyValue", true);

    key3.CreateSubKey("shell");
    key3 = key3.OpenSubKey("shell", true);

    key3.CreateSubKey("open");
    key3 = key3.OpenSubKey("open", true);

    key3.CreateSubKey("command");
    key3 = key3.OpenSubKey("command", true);
    key3.SetValue("", "\"" + "(The application path you desire)" + "\"" + " \"%1\""); // Set default key value

    key3.Close();
} 
```

只是给你们看一个快速演示，非常容易理解。您可以修改这些键值，一切顺利。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-10-24T05:23:51.840

下面的代码是一个应该可以工作的函数，它在 Windows 注册表中添加了所需的值。通常我在我的可执行文件中运行 SelfCreateAssociation(".abc") 。（表单构造函数或 onload 或 onshown）每次执行可执行文件时，它将更新当前用户的注册表项。（适合调试，如果您有一些更改）。如果您需要有关所涉及的注册表项的详细信息，请查看此 MSDN 链接。

[https://msdn.microsoft.com/en-us/library/windows/desktop/dd758090(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/dd758090(v=vs.85).aspx)

获取有关常规 ClassesRoot 注册表项的更多信息。请参阅此 MSDN 文章。

[https://msdn.microsoft.com/en-us/library/windows/desktop/ms724475(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms724475(v=vs.85).aspx)

```
public enum KeyHiveSmall
{
    ClassesRoot,
    CurrentUser,
    LocalMachine,
}

/// <summary>
/// Create an associaten for a file extension in the windows registry
/// CreateAssociation(@"vendor.application",".tmf","Tool file",@"C:\Windows\SYSWOW64\notepad.exe",@"%SystemRoot%\SYSWOW64\notepad.exe,0");
/// </summary>
/// <param name="ProgID">e.g. vendor.application</param>
/// <param name="extension">e.g. .tmf</param>
/// <param name="description">e.g. Tool file</param>
/// <param name="application">e.g.  @"C:\Windows\SYSWOW64\notepad.exe"</param>
/// <param name="icon">@"%SystemRoot%\SYSWOW64\notepad.exe,0"</param>
/// <param name="hive">e.g. The user-specific settings have priority over the computer settings. KeyHive.LocalMachine  need admin rights</param>
public static void CreateAssociation(string ProgID, string extension, string description, string application, string icon, KeyHiveSmall hive = KeyHiveSmall.CurrentUser)
{
    RegistryKey selectedKey = null;

    switch (hive)
    {
        case KeyHiveSmall.ClassesRoot:
            Microsoft.Win32.Registry.ClassesRoot.CreateSubKey(extension).SetValue("", ProgID);
            selectedKey = Microsoft.Win32.Registry.ClassesRoot.CreateSubKey(ProgID);
            break;

        case KeyHiveSmall.CurrentUser:
            Microsoft.Win32.Registry.CurrentUser.CreateSubKey(@"Software\Classes\" + extension).SetValue("", ProgID);
            selectedKey = Microsoft.Win32.Registry.CurrentUser.CreateSubKey(@"Software\Classes\" + ProgID);
            break;

        case KeyHiveSmall.LocalMachine:
            Microsoft.Win32.Registry.LocalMachine.CreateSubKey(@"Software\Classes\" + extension).SetValue("", ProgID);
            selectedKey = Microsoft.Win32.Registry.LocalMachine.CreateSubKey(@"Software\Classes\" + ProgID);
            break;
    }

    if (selectedKey != null)
    {
        if (description != null)
        {
            selectedKey.SetValue("", description);
        }
        if (icon != null)
        {
            selectedKey.CreateSubKey("DefaultIcon").SetValue("", icon, RegistryValueKind.ExpandString);
            selectedKey.CreateSubKey(@"Shell\Open").SetValue("icon", icon, RegistryValueKind.ExpandString);
        }
        if (application != null)
        {
            selectedKey.CreateSubKey(@"Shell\Open\command").SetValue("", "\"" + application + "\"" + " \"%1\"", RegistryValueKind.ExpandString);
        }
    }
    selectedKey.Flush();
    selectedKey.Close();
}

 /// <summary>
    /// Creates a association for current running executable
    /// </summary>
    /// <param name="extension">e.g. .tmf</param>
    /// <param name="hive">e.g. KeyHive.LocalMachine need admin rights</param>
    /// <param name="description">e.g. Tool file. Displayed in explorer</param>
    public static void SelfCreateAssociation(string extension, KeyHiveSmall hive = KeyHiveSmall.CurrentUser, string description = "")
    {
        string ProgID = System.Reflection.Assembly.GetExecutingAssembly().EntryPoint.DeclaringType.FullName;
        string FileLocation = System.Reflection.Assembly.GetExecutingAssembly().Location;
        CreateAssociation(ProgID, extension, description, FileLocation, FileLocation + ",0", hive);
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-16T06:28:17.297

文件关联在注册表中的 HKEY_CLASSES_ROOT 下定义。

[这里](http://www.devx.com/vb2themax/Tip/19554?type=kbArticle&trk=MSCP)有一个 VB.NET 示例，我可以轻松地将其移植到 C#。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-23T23:47:52.473

自 Windows 7 以来就有两个 cmd 工具，这使得创建简单的文件关联变得非常容易。它们是[assoc](https://technet.microsoft.com/en-us/library/cc770920(v=ws.11).aspx)和[ftype](https://technet.microsoft.com/en-us/library/cc771394(v=ws.11).aspx)。这是每个命令的基本解释。

*   [Assoc](https://technet.microsoft.com/en-us/library/cc770920(v=ws.11).aspx) - 将文件扩展名（如“.txt”）与“文件类型”相关联。
*   [FType](https://technet.microsoft.com/en-us/library/cc771394(v=ws.11).aspx) - 定义当用户打开给定“文件类型”时要运行的可执行文件。

请注意，这些是 cmd 工具，而不是可执行文件 (exe)。这意味着它们只能在 cmd 窗口中运行，或者通过使用带有“cmd /c assoc”的 ShellExecute 来运行。您可以通过链接或键入“assoc /?”了解更多关于它们的信息。和“ftype /？” 在 cmd 提示符下。

因此，要将应用程序与 .bob 扩展名相关联，您可以打开一个 cmd 窗口（WindowKey+R，键入 cmd，按 Enter）并运行以下命令：

```
assoc .bob=BobFile
ftype BobFile=c:\temp\BobView.exe "%1" 
```

这比弄乱注册表要简单得多，而且更有可能在未来的 Windows 版本中工作。

总结一下，这是一个创建文件关联的 C# 函数：

```
public static int setFileAssociation(string[] extensions, string fileType, string openCommandString) {
    int v = execute("cmd", "/c ftype " + fileType + "=" + openCommandString);
    foreach (string ext in extensions) {
        v = execute("cmd", "/c assoc " + ext + "=" + fileType);
        if (v != 0) return v;
    }
    return v;
}
public static int execute(string exeFilename, string arguments) {
    ProcessStartInfo startInfo = new ProcessStartInfo();
    startInfo.CreateNoWindow = false;
    startInfo.UseShellExecute = true;
    startInfo.FileName = exeFilename;
    startInfo.WindowStyle = ProcessWindowStyle.Hidden;
    startInfo.Arguments = arguments;
    try {
        using (Process exeProcess = Process.Start(startInfo)) {
            exeProcess.WaitForExit();
            return exeProcess.ExitCode;
        }
    } catch {
        return 1;
    }
} 
```

# sql - 你用什么来编写和编辑 Oracle 中的存储过程？

> ID：69764
> 
> 赞同：3
> 
> 时间：2008-09-16T06:18:23.480
> 
> 标签：sql, oracle, stored-procedures, oracle-sqldeveloper, toad

在 Oracle 中编辑和编写存储过程有很多选择；什么是最适合您的工具，为什么？（每个答案一个工具。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-16T06:43:27.460

[**用于Oracle应用程序**开发**人员 (TOAD)的**](http://www.toadsoft.com/lic_agree.html)******[工具](http://www.toadsoft.com/)，来自[Quest Software](http://www.quest.com/)（以前[**的**](http://www.toadsoft.com/lic_agree.html)[**TOADSoft**](http://www.toadsoft.com/lic_agree.html)）具有出色的存储过程编辑器，具有语法高亮显示、一些自动完成支持（例如，输入 ' [**'**](http://www.toadsoft.com/lic_agree.html)并出现列），一个不错的执行过程该选项将在网格中显示结果或显示 DBMS 输出，并且在您点击编译时还将关注语法错误。`TABLE.`******

 *****注意：*免费版只允许 2 个并发连接到同一个数据库实例（即使网站上说是 5 个）——这意味着只有 2 个开发人员或 DBA 可以在同一个数据库上同时使用它。它也每 3 个月到期一次，但他们擅长发布更新。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T06:25:40.797

我最近找到了免费的[Oracle SQL Developer](http://www.oracle.com/technology/products/database/sql_developer/index.html)。

*   漂亮的 GUI（让您不会像通常的 Oracle 工具那样睁大眼睛）
*   有很多不错的功能，比如显示过滤的表格
*   让您一次连接到多个 oracle 实例
*   您可以使用像 ip:port 用户名/密码这样的合理配置，而不必使用那些基于 TNSNAMES.ORA 文件的奇怪设置
*   您可以设置断点并单步执行存储过程的代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T11:47:20.600

Allaround Automations 的 PL/SQL 开发人员。

我很高兴为此支付了 200 美元左右的价格。

出色的 IDE（+ 良好的 Intellisense，+ 调试能力），可轻松创建和编辑 PL/SQL 包、SP、触发器等

比蟾蜍好多了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T06:27:03.977

蟾蜍，来自 ToadSoft.com -> [http://www.toadsoft.com/toad_oracle.htm](http://www.toadsoft.com/toad_oracle.htm)

对于像我这样喜欢使用像 Microsoft 的 SQL Management Studio 这样的 DBA 工具的人来说，这是一个救命稻草。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T12:28:51.377

作为一名专业的 PL/SQL 开发人员，我使用 Allaround Automations 的（呵呵）PL/SQL Developer。我已经使用 TOAD 很长时间了，但现在它与 PL/SQL 开发人员相比价格过高。它具有一些优势，例如知识库或与 SQL Server 等其他 RDBMS 一起工作的能力，但这对我来说不是必需的。

但记事本++总是会帮助偶尔修复。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-11T15:40:35.600

我总是使用 Allround Automations 的 PL/SQL Developer。

[http://www.allroundautomations.com/plsqldev.html](http://www.allroundautomations.com/plsqldev.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T07:08:51.230

[**Oracle 工具集 (TOra **)****是**一个**](http://tora.sourceforge.net/)**免费的开源数据库工具，在范围（和外观）上与[Quest 的 TOAD非常相似](http://www.toadsoft.com/lic_agree.html)**

 **与[免费版 TOAD](http://www.toadsoft.com/lic_agree.html)相比，TOra 允许同时连接到不同的数据库实例，并且没有并发连接限制（因此任何数量的 TOra 用户都可以在同一个数据库实例上工作）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T06:25:53.823

但是我们这里的一些人对[蟾蜍发誓](http://www.toadsoft.com/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-17T01:03:45.303

使用 Oracle 自己的[SQL Developer](http://www.oracle.com/technology/products/database/sql_developer/index.html)。如果您主要使用 Oracle，它可以满足您的所有需求。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-17T01:41:16.603

我将 TOAD 与我们的 Oracle 报表开发一起使用，我认为它是一个很好的开发工具。我通常在多个不同的 Oracle 实例和模式之间来回切换，我喜欢 TOAD 可以为每个实例/模式显示多个窗口，甚至每个模式显示多个窗口的方式。

TOAD 需要一些时间来学习和定制，但这是一项值得的投资。布局类似于 Visual Studio .NET IDE，带有可以锚定或滚动的侧边栏。选项卡显示 Oracle 模式的不同方面，包括过程、作业、统计信息等。当我编写 SQL 时，编辑器使用颜色编码，错误消息是 Oracle 特定的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T13:25:09.320

使用上面提到的 SQL Developer，您甚至可以设置断点并单步执行存储过程的代码。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T12:31:19.840

我使用 Oracle SQL Developer——最新版本还支持 CVS 和 Subversion。

它还具有支持其他数据库提供程序的好处。

我已经使用这个工具 2 年了，现在它已经稳定下来了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T09:30:46.547

我使用 JetBrains IDEA（一个 Java IDE）来编辑和 SQL*Plus 来执行。使用带有本地版本控制的工具、无缝集成到源版本控制、高级查找和突出显示、出色的编辑、“实时模板”等对我来说的优势超过了它“数据库感知”（带有插件）的任何优势。无论如何你都可以得到）。如果我正在编写一个复杂的查询，我可能会启动 SQL Developer，但通常我更喜欢出色的文本编辑功能。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T06:20:30.467

我只是使用了一个标准编辑器（vim 然后给了我语法突出显示）。

/艾伦

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T06:23:26.900

我喜欢Oracle 的[SQL Developer](http://www.oracle.com/technology/products/database/sql_developer/index.html)。哦，它是免费的！:)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-16T06:25:14.540

我喜欢[Rapid SQL](http://www.embarcadero.com/products/rapidsql/index.html)，你也可以调试 SQL

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-16T06:46:31.837

Notepad++ 一直是我最喜欢的编辑器。过去我不得不使用 SQL Developer，它并没有那么“糟糕”，但我遇到了很多问题。事实证明它非常不稳定，所以我不推荐它，或者可能只是为了测试你的程序。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-16T12:47:11.520

我在几个不同的数据库平台上使用了 Embarcadero 的 RapidSQL，它很棒。它也有一个集成的步进调试器。我实际上并没有将它与 Oracle 一起使用，但我知道它是受支持的。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-16T12:54:47.430

再次为 Oracle SQL Developer 投票。它是免费的，它很稳定，并且可以完成我需要的所有基本功能。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-16T23:09:52.660

又一次投票给 Oracle SQL Developer。但是 TOAD 也可以。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-17T17:23:30.520

一个非常好的带有语法高亮的文本编辑器（例如来自 www.textpad.com 的 Textpad）和 SQL Plus。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-09-11T07:47:18.250

对我来说，Oracle SQL Developer。如果您使用过 Eclipse 或 VS 等 IDE，那么学习曲线非常小。您可以设置断点，在调试存储过程时读取实时值，就像在 eclipse/VS 中编写代码一样。当然，用户界面有时会有点迟钝，但考虑到它的免费弥补了迟缓。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2010-11-10T03:07:13.660

**来自 Oracle 的 SQL 开发人员**

我们已经替换了我们（大型知名）企业中的所有其他工具，该企业拥有 150 多个数据库，并且运行良好。它不如 TOAD 好，但它正在到达那里，而且（与 TOAD 不同）**它是免费的**。

SQL Developer 也可以很好地连接到 SQL Server

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2010-08-04T19:16:09.313

我使用 Textpad、Clipmate 和 Quest SQLNavigator。Quest 的 SQLNavigator 和 TOAD 的较新版本是垃圾——它们往往容易崩溃，并且不能很好地与 XP/Vista/Win7 配合使用。

我花了几个小时在他们的技术支持下，但他们别无选择。
您无法访问 Quest 程序员，而是陷入了他们的
故障单流程。

Quest 需要较少关注将不同工具集成到一个中，并向您
承诺下一个版本将解决不稳定问题。

他们需要稳定性。
这意味着清理他们现有的代码库或重新开始。
更有能力的程序员，更少的销售人员，更少的技术支持人员。
解决该死的问题。
他们专注于销售，这是一种愚蠢的商业策略。
这似乎是整个行业的问题。

Quest 的 TOAD 和 SQL Navigator 已成为英国媒体报道软件
，如果它们不扭转局面并使它们更加稳定，它们很快就会成为废弃软件。

我经常在 Textpad 和 Quest SQLNavigator 之间复制和粘贴，因为 SQLNavigator
崩溃了，并且我丢失了所有的 sql 代码，直到崩溃为止。

一旦我找到更稳定的东西，我可能会转储 SQLNavigator。

# visual-studio - Visual Studio 2005 错误：生成引导程序时出错：语法无效

> ID：69766
> 
> 赞同：2
> 
> 时间：2008-09-16T06:18:53.340
> 
> 标签：visual-studio, deployment, build, bootstrapping

我正在开发 VS 2005，但我的机器出了点问题。突然之间，我无法再构建部署文件。构建消息是：

```
ERROR: An error occurred generating a bootstrapper: Invalid syntax.
ERROR: General failure building bootstrapper
ERROR: Unrecoverable build error 
```

快速的谷歌搜索会显示最后两行，但网络空间中没有人报告过第一条消息。（万岁！我是网络上某事的第一人！）

我办公室里的其他机器都可以进行构建。我的机器之前已经能够进行构建。我不知道是什么改变了我盒子上微妙的平衡。我也尝试了所有传统的仪式，即关闭 Visual Studio、吹走所有 bin 和 obj 文件夹、重新启动等，但无济于事。

为简单起见，我创建了一个带有部署文件的小“Hello World”应用程序。在此构建输出：

```
------ Build started: Project: HelloWorld, Configuration: Debug Any CPU ------
HelloWorld -> C:\Vault\Multi Client\Tests\HelloWorld\HelloWorld\bin\Debug\HelloWorld.exe
------ Starting pre-build validation for project 'HelloWorldSetup' ------
------ Pre-build validation for project 'HelloWorldSetup' completed ------
------ Build started: Project: HelloWorldSetup, Configuration: Debug ------
Building file 'C:\Vault\Multi Client\Tests\HelloWorld\HelloWorldSetup\Debug\HelloWorldSetup.msi'...
ERROR: An error occurred generating a bootstrapper: Invalid syntax.
ERROR: General failure building bootstrapper
ERROR: Unrecoverable build error
========== Build: 1 succeeded or up-to-date, 1 failed, 0 skipped ========== 
```

我在用：

*   MS Visual Studio 2005 版本 8.0.50727.762 (SP .050727-7600)
*   .NET 框架版本 2.0.50727
*   操作系统：Windows XP Pro

同样，我不知道发生了什么变化。我只知道有一天一切都很好。第二天，我突然根本无法进行任何部署构建（尽管所有其他项目仍然可以正常编译）。

我大约一个月前[在 MSDN 上发布了这个](http://social.msdn.microsoft.com/forums/en-US/vssetup/thread/240c82e9-1696-4618-846c-aaae21427a52/)，他们似乎也不知道发生了什么。

有人知道这是什么吗？

* * *

@Brad Wilson：谢谢，但是如果您阅读了我的原始帖子，您会发现我确实已经从头开始了整个解决方案，但这并没有帮助。

* * *

@deemer：我经历了卸载和重新安装的所有痛苦，即使我在等待时没有你推荐的阅读......而且 - 痛苦！- 仍然再次出现相同的错误。似乎我的计算机以某种方式被标记为不适合再次进行部署构建。

有谁知道这个“秘密开关”可能在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:28:19.257

禁用引导

```
In Solution Explorer, select the deployment project.

On the Project menu, click Properties.

In the Property Pages dialog box, expand the Configuration Properties node, and then select the Build property page.

Click the Prerequisites button.

In the Prerequisites dialog box, clear the Create setup program to install prerequisite components check box, and then click OK. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T06:28:49.370

如果它不只在一台机器上构建，那么要么你设法使那台机器与众不同，要么 VS2005 安装已损坏。如果你从表面上看错误信息，那么问题很可能是后者。尝试运行 VS2005 安装程序的修复功能，或者失败，重新安装 VS2005。《安德的游戏》是一本在等待时阅读的好书：-|。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T06:28:58.447

不幸的是，该错误是安装项目的通用错误处理程序。作为一个疯狂的猜测，我会说安装项目可能以某种方式损坏，这导致了“无效语法”错误。

尝试创建一个新的设置项目，然后从一步一步开始，看看您是否可以重现该问题（或者，希望完全避免它）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-24T11:20:58.683

**解决方案！**
感谢 Microsoft 支持的 Michael Bleifer - 我安装了 .NET 2.0 SP1，问题解决了！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-12-16T19:13:26.937

我有一个类似的问题（`An error occurred generating a bootstrapper: Unable to finish updating resource for [YourAssemblyPath] with error 80070005`）。此错误发生在安装项目的后续构建中（安装项目创建后的第一次构建总是对我有用）。事实证明它与我的源代码控制客户端（Sourcegear Vault）和 MS Security Essentials 有关。我将 Sourcegear 的 VaultGUIClient.exe 添加为 Security Essentials 中的排除进程。

* * *

*   赢 7 Ult x64
*   VS2010 Prem SP1
*   Sourcegear Vault 5.0.4 (18845)
*   安全基础版本：2.1.1116.0

# apache - 您如何配置 Mac OS X 附带的 Apache 服务器？

> ID：69768
> 
> 赞同：11
> 
> 时间：2008-09-16T06:19:45.663
> 
> 标签：apache, macos

Mac OS X 预装了 apache，但文件位于非标准位置。这个问题是收集有关配置文件所在位置的信息的地方，以及如何调整 apache 安装以执行诸如提供 php 页面之类的操作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-16T06:23:53.373

Apache 配置文件是：/private/etc/apache2/httpd.conf

默认 DocumentRoot 为：/Library/Webserver/Documents/

要启用 PHP，在 /private/etc/apache2/httpd.conf 文件中的第 114 行（可能）是以下行：

```
#LoadModule php5_module     libexec/apache2/libphp5.so 
```

删除井号以取消注释该行，现在它看起来像这样：

```
LoadModule php5_module     libexec/apache2/libphp5.so 
```

重启 Apache：系统偏好设置 -> 共享 -> 取消勾选“网络共享”并重新勾选。 **或者**

```
$ sudo apachectl restart 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-16T12:03:06.117

跑步

$ httpd -V

将向您显示许多有用的服务器信息，包括可以找到 httpd.conf 文件的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-08-06T01:53:06.547

为了让 SSI/includes (mod_include) 工作，我发现我必须编辑`/private/etc/apache2/users/myusername.conf`并更改`AllowOverride None`为`AllowOverride All`.

然后在站点根目录的 .htaccess 文件中添加以下内容：

```
Options +Includes
AddType text/html .html
AddOutputFilter INCLUDES .html 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T06:26:50.963

httpd.conf 在 /private/etc/apache2

通过取消注释行启用 PHP：

```
 LoadModule php5_module        libexec/apache2/libphp5.so 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T13:27:04.653

**/etc/httpd/users**包含用户特定的配置文件，可用于覆盖全局配置。例如，将“ **AddHandler server-parsed html** ”添加到**/etc/httpd/users/*.conf文件中对应于一个用户的****<Directory>**块中，将为该特定用户的**$HOME/Sites**启用对 HTML 文件的 mod_include 解析目录，但没有其他地方。

 ****# iis - 如何配置 IIS7 以允许使用经典 asp 上传 zip 文件？

> ID：69788
> 
> 赞同：2
> 
> 时间：2008-09-16T06:25:02.373
> 
> 标签：iis, iis-7, asp-classic

我最近安装了 Windows 2008 Server 以用各种网页（包括几个经典的 ASP 应用程序）替换 Web 服务器上崩溃的硬盘驱动器。其中之一使用已经工作了几年的 com 工具广泛使用文件上传。

更多信息：

一旦我自己测试过，我的用户并没有在非常小的 zips (65K) 工作中提供好的信息，但较大的则没有。我没有测试截止，但 365K 失败了。毕竟它不仅仅是 zip 文件。一个 700K 的文档文件也失败了。错误代码 800a0035。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T20:48:10.787

microsoft.public.inetserver.asp.general 中名为 Anthony Jones 的 Soneone 提供的答案如下：

> 在 IIS7 IIS 管理器中单击网站并双击功能视图中的 ASP 图标。展开限制属性并修改最大请求实体正文限制。

我回答说：

那成功了。这很容易。你不知道我尝试了多少没有用的东西。

不过我觉得可能还有第二部。我所做的其中一件事是改变

在 applicationhost.config 中设置：

```
 <sectionGroup name="system.webServer">
        <section name="asp" overrideModeDefault="Deny" /> 
```

到

```
 <section name="asp" overrideModeDefault="Allow" /> 
```

在我进行更改并对其进行测试之后，我将以上内容更改为拒绝，只是基于不修复未损坏的内容的一般原则。该网站立即停止工作，直到我将其改回允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T06:59:54.490

您可能需要设置一个大小限制 - 500 错误是什么？

# gnuplot - 你如何使用 gnuplot 的内置字体？

> ID：69814
> 
> 赞同：5
> 
> 时间：2008-09-16T06:30:28.913
> 
> 标签：gnuplot

gnuplot 文档对字体有这样的说法：

```
    gd 库直接支持五种基本字体。这些都是
    `tiny`（5x8 像素），`small`（6x12 像素），`medium`，（7x13 粗体），
    “大”（8x16）或“巨型”（9x15 像素）。
```

但是当我尝试使用一个时：

```
    gnuplot> 设置终端 png 字体小
```

我得到：

```
    打开小字体时找不到/打开字体，使用默认值
```

如何使用这些看似内置的字体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T14:03:42.583

问题是，对于这些字体，出于某种原因，您没有使用我在上面尝试过的标准语法：

```
gnuplot> set terminal png font tiny 
```

但取而代之的是，您删除了这五种特殊字体的“字体”一词：

```
gnuplot> set terminal png tiny 
```

# html - DOCTYPE 声明必须是 HTML 文档中的第一个标签吗？

> ID：69828
> 
> 赞同：14
> 
> 时间：2008-09-16T06:34:23.850
> 
> 标签：html, doctype

当客户端请求页面时，我们的安全管理器会在每个 html 页面的顶部动态插入一些 javascript。它被插入到 DOCTYPE 语句的上方。我认为这可能是我遇到的布局问题的原因。

任何人的想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-16T06:35:02.117

是的，DOCTYPE 必须放在第一位。

定义在这里：[http](http://www.w3.org/TR/REC-html40/struct/global.html) ://www.w3.org/TR/REC-html40/struct/global.html 。请注意，它说一个文档由三个部分组成，DTD 必须是第一个。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T06:36:41.753

是的，DOCTYPE 必须是页面上的第一个数据：http: [//www.w3schools.com/tags/tag_DOCTYPE.asp](http://www.w3schools.com/tags/tag_DOCTYPE.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T13:17:12.460

对 HTML 的建议将其表示为 SGML 的应用，它要求`DOCTYPE`声明出现在 HTML 元素之前（忽略 HTML 注释）。即使没有，在元素之外`DOCTYPE`添加元素（在它之前或之后）也不是有效的 HTML。当然，HTML 的有效性可能不是你的要求，只要它适用于大多数浏览器，然后提到的 quirks-mode 切换会得到你：没有，许多浏览器将切换到 quirks 模式，可能会改变布局。`SCRIPT``HTML``DOCTYPE`

我假设 TAM 脚本片段是由某些代理或其他无法正确分析页面的 HTML 结构并将其插入文档或文档`SCRIPT`中的正确位置的代理添加的。在这种情况下，添加到文档末尾虽然不是有效的 HTML，但在大多数 Web 浏览器中都可以使用。`HEAD``BODY`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T06:38:09.363

不过，这可能是您问题的根源！查看“怪癖模式”，因为这取决于 doctype 设置。进一步研究：[http](http://www.quirksmode.org/) ://www.quirksmode.org/ 解释：您可以将浏览器切换到（主要是 IE）严格标准编译模式和宽松模式。这将极大地影响渲染。TAM 的设置可以打开/关闭此功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T06:38:52.480

是的，文档类型必须是文档中的第一件事（注释除外）。您应该避免在文档类型之前插入脚本；兼容的解析器不需要接受这一点。（如果可以替代，他们应该接受附加*在文档其余部分之后的脚本。）*

从 HTML 5 规范：

> ### [8.1 编写 HTML 文档](http://www.w3.org/TR/html5/syntax.html#writing)
> 
> 本节仅适用于文档、创作工具和标记 > 生成器。特别是，它不适用于一致性检查器；> 一致性检查器必须使用下一节中给出的要求 >（“解析 HTML 文档”）。
> 
> 文件必须按给定顺序由以下部分组成：
> 
> 1.  （可选）单个“BOM”（U+FEFF）字符。
> 2.  任意数量的注释和空格字符。
> 3.  文档类型。
> 4.  任意数量的注释和空格字符。
> 5.  根元素，采用 html 元素的形式。
> 6.  任意数量的注释和空格字符。
> 7.  上面提到的各种类型的内容将在接下来的几节中描述。

来自 HTML 4.01 规范：

> ### [7 HTML 文档的全局结构](http://www.w3.org/TR/html401/struct/global.html)
> 
> HTML 4 文档由三部分组成：
> 
> 1.  包含 HTML 版本信息的行，
> 2.  声明性标题部分（由 HEAD 元素分隔），
> 3.  正文，其中包含文档的实际内容。主体可以由 BODY 元素或 FRAMESET 元素实现。
> 
> [...]
> 
> 空白（空格、换行符、制表符和注释）可能出现在每个部分之前或之后。
> 
> [...]
> 
> 有效的 HTML 文档声明文档中使用的 HTML 版本。文档类型声明命名文档使用的文档类型定义 (DTD)（参见 [ISO8879]）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T06:50:38.943

我阅读了 w3 规范，它只是说文档有 3 个部分。顺序是假定的，没有明确的声明禁止，例如，前面有一点 js 片段。

我知道可以将 TAM 配置为在文件末尾添加 js，但如果它会导致如此明显的问题，为什么他们把它放在顶部，这让我很惊讶！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-21T06:19:53.587

W3c（在 w3.org 上）在一个名为[html5/syntax.html](http://www.w3.org/TR/html5/syntax.html#syntax-doctype)的页面上说“ **DOCTYPE**是必需的序言”，我将其解释为它是必需的，并且必须先出现。

它还说它必须按此顺序包含以下组件：

1.  一个字符串，它是一个不区分大小写的 ASCII 匹配字符串`<!DOCTYPE`。
2.  一个或多个空格字符。
3.  一个字符串，它是一个不区分大小写的 ASCII 匹配字符串`html`。
4.  可选地，DOCTYPE 遗留字符串或过时的允许 DOCTYPE 字符串（定义如下）。
5.  零个或多个空格字符。
6.  一个`>`(U+003E) 字符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-12-23T13:16:58.817

这不是标签，但是是的。主要是因为这是使 Internet Explorer（我认为是 8 之前的版本）进入标准模式的唯一方法。

# content-management-system - 您认为哪个开源 CMS 最可靠且以性能为导向？

> ID：69832
> 
> 赞同：0
> 
> 时间：2008-09-16T06:35:14.720
> 
> 标签：content-management-system, cluster-computing

我们需要一个支持数据集群（在不同服务器上管理和存储数据）的优秀 CMS。“好”是指：可靠、错误最少、越快越好。（哦，它应该煮咖啡:)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T06:38:11.123

如果您想要所有东西和厨房水槽以及集群/缩放支持，我会说[Plone](http://plone.org/)。非常大的社区，用 Python 编写，使用 Zope 堆栈，因此它有一个内置的应用程序服务器。等等等等。我建议看看它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-17T01:21:45.710

是的……厨房水槽+社区+支持：克隆。发展方向非常正确。

Plone 在某些方面与许多其他系统不同。根据环境的不同，超高性能可能需要一些关注，但在社区中，有很多专业知识可以引导任何可能需要的关注。

[http://plone.org/support](http://plone.org/support) | 聊天室是就该主题提供多样化和诚实建议的绝佳场所。我们会定期引导人们远离 Plone——当其他一些系统能更好地满足他们的需求时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-08T01:31:16.607

我同意，我认为您需要寻找适合您需要的软件。我有一些站点在 WordPress 上运行的流量很少，但我也管理一个运行 Joomla 并获得可靠流量的站点。

此外，Joomla 有一个非常棒的可定制界面，包括扩展、插件、主题和一个相当容易使用的管理工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-08T01:26:49.673

我不确定“面向性能”对您的意义。有些使用 Drupal 和 Joomla 的网站每月都会收到数百万次访问，并且不需要像数据集群这样的特殊配置。

我认为你必须问自己是否需要你所说的一切。

为了可靠性，没有错误或最小错误，我可以代表 Joomla。

我认为性能是硬件的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-17T01:27:27.413

当您达到数据集群级别时，最好对 CMS 系统进行一些实际测试。

大多数大牌都支持很多东西。MS CMS 服务器，DotnetNuke

真正大商店使用的任何东西都应该工作。

# ant - 如何使用 Nant/Ant 命名模式？

> ID：69835
> 
> 赞同：108
> 
> 时间：2008-09-16T06:35:37.183
> 
> 标签：ant, nant

我不得不承认，我总是忘记了 Nant 命名模式的语法缺陷（例如，文件集中使用的那些）。在我看来，双星号/单星号的东西似乎很容易忘记。

有人可以提供命名模式的权威指南吗？

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2008-09-17T19:49:12.103

规则是：

*   单个星号 (*) 匹配*路径名中的零个或多个字符*
*   双星 (**) 匹配*目录级别的零个或多个字符*
*   问号 (?) 与路径名中的一个字符完全匹配

另一种思考方式是双星 (**) 与斜杠 (/) 匹配，但单星 (*) 不匹配。

假设您有以下文件：

1.  吧.txt
2.  src/bar.c
3.  src/baz.c
4.  src/test/bartest.c

然后是模式：

*   `*.c`             不匹配（当前目录中没有 .c 文件）
*   `src/*.c`     匹配 2 和 3
*   `*/*.c`         匹配 2 和 3（因为 * 只匹配一个级别）
*   `**/*.c`       匹配 2、3 和 4（因为 ** 匹配任意数量的级别）
*   `bar.*`         匹配 1
*   `**/bar.*`   匹配 1 和 2
*   `**/bar*.*`匹配 1、2 和 4
*   `src/ba?.c`匹配 2 和 3    

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-08-14T13:33:08.263

这里有一些额外的模式匹配，这些匹配在文档中并不那么明显。使用 NAnt 对 benzado 回答中的示例文件进行了测试：

1.  吧.txt
2.  src/bar.c
3.  src/baz.c
4.  src/test/bartest.c

*   `src**`                      匹配 2、3 和 4
*   `**.c`                        匹配 2、3 和 4
*   `**ar.*`                    匹配 1 和 2
*   `**/bartest.c/**`  匹配 4
*   `src/ba?.c/**`        匹配 2 和 3

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T07:52:24.567

查看[Nant 参考资料](http://nant.sourceforge.net/release/latest/help/types/fileset.html)。文件集模式是：

'*' 匹配零个或多个字符，例如 *.cs
'?' 匹配一个字符，例如 ?.cs

'**' 匹配目录树，例如 src/**/*.cs 将在 src 的任何子目录中查找所有 cs 文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-01-11T14:47:39.390

双星号 ( `**`) 与文件夹名称匹配相关联，而单个符号星号 ( `* = multi characters`) 以及问号 ( `? = single character`) 用于匹配文件名。

# html - 什么会导致访问者返回到上一页的顶部，而不是返回到链接所在的页面点？

> ID：69837
> 
> 赞同：0
> 
> 时间：2008-09-16T06:35:54.797
> 
> 标签：html, browser-history

我最近在几个网站上看到了这种奇怪的行为：我向下滚动一个页面并点击指向另一个页面的链接。当我单击返回按钮并返回时，我会回到上一页的顶部，而不是链接。如果我单击搜索结果页面中的链接或“10 个最佳 Foo Bars...”列表，这将非常烦人。

请参阅此页面作为[示例](http://www.typophile.com/forum/5)。奇怪的是，该页面在 WinXP 上的 IE6 中按预期工作，但在同一台机器上的 FF2 上却没有。在 Mac OS X 10.4 上，它适用于 FF2，但不适用于 FF3。我检查了任何奇怪的偏好设置，但我找不到任何不同的设置。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T06:40:01.823

许多站点都有一个文本框（用于搜索站点或其他内容），该文本框设置为在页面加载时自动获取焦点（使用 javascript 或其他内容）。在许多浏览器中，页面在获得焦点时会跳转到该文本框。

这真的很烦人:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T07:11:10.780

通常，此行为是由站点设置的浏览器缓存在到期前的时间很短或没有时间引起的。

在许多网站上，当您点击“返回”时，您会回到您点击的链接，因为您的浏览器正在从缓存中拉取页面。如果尚未设置此缓存，则会发出新的页面请求，并且浏览器会将其视为新鲜内容。

[在上面链接](http://www.typophile.com/forum/5)的页面上，[“过期”标题](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21)似乎设置为比我的本地时钟提前不到一分钟，这导致我的浏览器在该过期时间后点击“返回”时获取新副本。

# c# - 什么是 C# 中“this”赋值的示例？

> ID：69843
> 
> 赞同：14
> 
> 时间：2008-09-16T06:37:37.100
> 
> 标签：c#, language-features

有人`this`在 C# 方法中提供有用的赋值示例吗？我在工作面试中被问过一次，我仍然有兴趣自己回答。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2008-09-16T07:09:42.703

当他们说您不能分配给“this”时，其他答案是不正确的。没错，您不能用于类类型，但*可以*用于结构类型：

```
public struct MyValueType
{
    public int Id;
    public void Swap(ref MyValueType other)
    {
        MyValueType temp = this;
        this = other;
        other = temp;
    }
} 
```

在任何时候，结构都可以通过分配给“this”来改变自己，就像这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T06:44:15.820

使用**this**关键字可确保仅访问当前类型范围内的变量和方法。当字段/属性与局部变量或方法参数之间存在命名冲突时，可以使用此选项。

通常用于构造函数：

```
private readonly IProvider provider;
public MyClass(IProvider provider)
{
  this.provider = provider;
} 
```

在此示例中，我们将参数提供程序分配给私有字段提供程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-09-16T06:43:50.347

从语法的角度来看，唯一正确的地方是 C# 3.0 中的扩展方法，当您将方法的第一个参数指定为 foo(ftype this, ...) 时。然后可以将此扩展名用于任何 ftype 实例。但是这只是语法，而不是真正的 ovveride 操作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-16T06:51:43.980

如果你被要求为*this*分配一些东西，有很多例子。想到的一个是告诉控制他的爸爸是谁：

```
class frmMain
{
    void InitializeComponents()
    {
        btnOK = new Button();
        btnOK.Parent = this;
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-28T14:51:10.963

我知道这个问题早已得到解答，讨论已经停止，但这是我在互联网上的任何地方都没有看到的案例，我认为在这里分享可能会有用。

我用它来保持成员的不变性，同时仍然支持序列化。考虑这样的`struct`定义：

```
public struct SampleStruct : IXmlSerializable
{
    private readonly int _data;

    public int Data { get { return _data; } }

    public SampleStruct(int data)
    {
         _data = data;
    }

    #region IXmlSerializableMembers

    public XmlSchema GetSchema() { return null; }

    public void ReadXml(XmlReader reader)
    {
        this = new SampleStruct(int.Parse(reader.ReadString()));
    }

    public void WriteXml(XmlWriter writer
    {
        writer.WriteString(data.ToString());
    }

    #endregion
} 
```

由于我们被允许覆盖，我们可以在单个实例`this`中保持保持的不变性。`_data`这有一个额外的好处，当反序列化新值时，你可以保证一个新的实例，这有时是一个很好的保证！}

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2008-09-16T06:38:56.927

您不能覆盖“this”。它指向当前对象实例。

# design-patterns - 工厂模式。什么时候使用工厂方法？

> ID：69849
> 
> 赞同：312
> 
> 时间：2008-09-16T06:38:24.773
> 
> 标签：design-patterns, factory, factory-pattern, factory-method

什么时候在对象中使用工厂方法而不是工厂类是个好主意？

* * *

## 回答 #1

> 赞同：418
> 
> 时间：2010-03-12T05:38:54.973

我喜欢根据我的类是“人”来考虑设计模式，而模式是人们相互交谈的方式。

所以，对我来说，工厂模式就像一个招聘机构。你有一个需要可变数量的工人的人。这个人可能知道他们雇用的人需要的一些信息，但仅此而已。

因此，当他们需要新员工时，他们会打电话给招聘机构并告诉他们他们需要什么。现在，要真正*雇用*某人，您需要了解很多东西——福利、资格验证等。但雇用的人不需要知道任何这些——招聘机构会处理所有这些。

同样，使用工厂允许消费者创建新对象，而不必知道它们是如何创建的，或者它们的依赖关系是什么——他们只需要提供他们真正想要的信息。

```
public interface IThingFactory
{
    Thing GetThing(string theString);
}

public class ThingFactory : IThingFactory
{
    public Thing GetThing(string theString)
    {
        return new Thing(theString, firstDependency, secondDependency);
    }
} 
```

所以，现在 ThingFactory 的消费者可以得到一个 Thing，而不必知道 Thing 的依赖关系，除了来自消费者的字符串数据。

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2008-12-30T10:53:17.420

工厂方法应该被视为构造函数的替代方案——主要是在构造函数不够表达的情况下，即。

```
class Foo{
  public Foo(bool withBar);
} 
```

不像：

```
class Foo{
  public static Foo withBar();
  public static Foo withoutBar();
} 
```

当您需要复杂的过程来构造对象时，工厂类很有用，当构造需要实际类不需要的依赖项时，当您需要构造不同的对象等时。

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2012-05-11T22:47:47.400

我个人认为单独的工厂类有意义的一种情况是，当您尝试创建的最终对象依赖于其他几个对象时。例如，在 PHP 中：假设您有一个`House`对象，该对象又具有一个`Kitchen`和一个`LivingRoom`对象，并且该对象内部也`LivingRoom`有一个`TV`对象。

实现这一点的最简单方法是让每个对象在其构造方法上创建它们的子对象，但如果属性相对嵌套，当您`House`创建失败时，您可能会花费一些时间来尝试准确隔离失败的内容。

另一种方法是执行以下操作（依赖注入，如果您喜欢花哨的术语）：

```
$TVObj = new TV($param1, $param2, $param3);
$LivingroomObj = new LivingRoom($TVObj, $param1, $param2);
$KitchenroomObj = new Kitchen($param1, $param2);
$HouseObj = new House($LivingroomObj, $KitchenroomObj); 
```

在这里，如果创建一个`House`失败的过程只有一个地方可以查看，但是每次想要一个新的时都必须使用这个块`House`是很不方便的。进入工厂：

```
class HouseFactory {
    public function create() {
        $TVObj = new TV($param1, $param2, $param3);
        $LivingroomObj = new LivingRoom($TVObj, $param1, $param2);
        $KitchenroomObj = new Kitchen($param1, $param2);
        $HouseObj = new House($LivingroomObj, $KitchenroomObj);

        return $HouseObj;
    }
}

$houseFactory = new HouseFactory();
$HouseObj = $houseFactory->create(); 
```

多亏了这里的工厂，创建 a 的过程`House`是抽象的（因为当您只想创建 a 时，您不需要创建和设置每个依赖项`House`）并且同时集中，这使得它更易于维护。使用单独的工厂可能是有益的还有其他原因（例如可测试性），但我发现这个特定的用例可以最好地说明工厂类如何有用。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-07-16T05:32:38.823

明确区分使用工厂或工厂方法背后的想法很重要。两者都旨在解决相互排斥的不同类型的对象创建问题。

让我们具体谈谈“工厂方法”：

首先，当您开发库或 API 以用于进一步的应用程序开发时，工厂方法是创建模式的最佳选择之一。背后的原因；**我们知道何时创建具有所需功能的对象，但对象的类型将保持未定，否则将由传递的动态参数决定**。

现在的重点是，使用工厂模式本身可以实现大致相同的目标，但是如果将工厂模式用于上述突出问题，则会在系统中引入一个巨大的缺点，那就是您创建不同对象（子类对象）的逻辑将特定于某些业务条件，因此将来当您需要为其他平台扩展库的功能时（从技术上讲，您需要添加更多基本接口或抽象类的子类，因此工厂除了现有的对象外，还将返回这些对象基于一些动态参数）然后每次您需要更改（扩展）工厂类的逻辑，这将是昂贵的操作并且从设计角度来看并不好。另一方面，如果“工厂方法”

```
interface Deliverable 
{
    /*********/
}

abstract class DefaultProducer 
{

    public void taskToBeDone() 
    {   
        Deliverable deliverable = factoryMethodPattern();
    }
    protected abstract Deliverable factoryMethodPattern();
}

class SpecificDeliverable implements Deliverable 
{
 /***SPECIFIC TASK CAN BE WRITTEN HERE***/
}

class SpecificProducer extends DefaultProducer 
{
    protected Deliverable factoryMethodPattern() 
    {
        return new SpecificDeliverable();
    }
}

public class MasterApplicationProgram 
{
    public static void main(String arg[]) 
    {
        DefaultProducer defaultProducer = new SpecificProducer();
        defaultProducer.taskToBeDone();
    }
} 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2008-09-16T11:31:31.590

当您需要多个具有相同参数类型但行为不同的“构造函数”时，它们也很有用。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2015-05-26T17:29:58.993

**在以下情况下使用对象内部的工厂方法**是个好主意：

1.  对象的类不知道它必须创建哪些确切的子类
2.  对象的类被设计成它创建的对象由子类指定
3.  对象的类将其职责委托给辅助子类，并且不知道确切的类将承担这些职责

**在以下情况下使用抽象工厂**类是个好主意：

1.  您的对象不应依赖于其内部对象的创建和设计方式
2.  一组链接的对象应该一起使用，你需要服务于这个约束
3.  对象应由几个可能的链接对象系列之一配置，这些链接对象将成为您的父对象的一部分
4.  需要共享仅显示接口但不显示实现的子对象

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-03-08T01:19:39.490

UML 来自

[![在此处输入图像描述](https://i.stack.imgur.com/LUIor.gif)](https://i.stack.imgur.com/LUIor.gif)

*产品：*它定义了工厂方法创建的对象的接口。

*ConcreteProduct：*实现产品接口

*创建者：*声明工厂方法

*ConcreateCreator：* 实现 Factory 方法以返回 ConcreteProduct 的实例

**问题陈述：**使用定义游戏界面的工厂方法创建游戏工厂。

代码片段：

```
import java.util.HashMap;

/* Product interface as per UML diagram */
interface Game{
    /* createGame is a complex method, which executes a sequence of game steps */
    public void createGame();
}

/* ConcreteProduct implementation as per UML diagram */
class Chess implements Game{
    public Chess(){

    }
    public void createGame(){
        System.out.println("---------------------------------------");
        System.out.println("Create Chess game");
        System.out.println("Opponents:2");
        System.out.println("Define 64 blocks");
        System.out.println("Place 16 pieces for White opponent");
        System.out.println("Place 16 pieces for Black opponent");
        System.out.println("Start Chess game");
        System.out.println("---------------------------------------");
    }
}
class Checkers implements Game{
    public Checkers(){

    }
    public void createGame(){
        System.out.println("---------------------------------------");
        System.out.println("Create Checkers game");
        System.out.println("Opponents:2 or 3 or 4 or 6");
        System.out.println("For each opponent, place 10 coins");
        System.out.println("Start Checkers game");
        System.out.println("---------------------------------------");
    }
}
class Ludo implements Game{
    public Ludo(){

    }
    public void createGame(){
        System.out.println("---------------------------------------");
        System.out.println("Create Ludo game");
        System.out.println("Opponents:2 or 3 or 4");
        System.out.println("For each opponent, place 4 coins");
        System.out.println("Create two dices with numbers from 1-6");
        System.out.println("Start Ludo game");
        System.out.println("---------------------------------------");
    }
}

/* Creator interface as per UML diagram */
interface IGameFactory {
    public Game getGame(String gameName);
}

/* ConcreteCreator implementation as per UML diagram */
class GameFactory implements IGameFactory {

     HashMap<String,Game> games = new HashMap<String,Game>();
    /*  
        Since Game Creation is complex process, we don't want to create game using new operator every time.
        Instead we create Game only once and store it in Factory. When client request a specific game, 
        Game object is returned from Factory instead of creating new Game on the fly, which is time consuming
    */

    public GameFactory(){

        games.put(Chess.class.getName(),new Chess());
        games.put(Checkers.class.getName(),new Checkers());
        games.put(Ludo.class.getName(),new Ludo());        
    }
    public Game getGame(String gameName){
        return games.get(gameName);
    }
}

public class NonStaticFactoryDemo{
    public static void main(String args[]){
        if ( args.length < 1){
            System.out.println("Usage: java FactoryDemo gameName");
            return;
        }

        GameFactory factory = new GameFactory();
        Game game = factory.getGame(args[0]);
        if ( game != null ){                    
            game.createGame();
            System.out.println("Game="+game.getClass().getName());
        }else{
            System.out.println(args[0]+  " Game does not exists in factory");
        }           
    }
} 
```

输出：

```
java NonStaticFactoryDemo Chess
---------------------------------------
Create Chess game
Opponents:2
Define 64 blocks
Place 16 pieces for White opponent
Place 16 pieces for Black opponent
Start Chess game
---------------------------------------
Game=Chess 
```

这个例子`Factory`通过实现一个类来展示一个`FactoryMethod`.

1.  `Game`是所有类型游戏的界面。它定义了复杂的方法：`createGame()`

2.  `Chess, Ludo, Checkers`是游戏的不同变体，它们提供实现`createGame()`

3.  `public Game getGame(String gameName)`正在上课`FactoryMethod`_`IGameFactory`

4.  `GameFactory`在构造函数中预先创建不同类型的游戏。它实现`IGameFactory`了工厂方法。

5.  游戏名称作为命令行参数传递给`NotStaticFactoryDemo`

6.  `getGame`in`GameFactory`接受游戏名称并返回相应的`Game`对象。

**工厂：**

> 创建对象而不向客户端公开实例化逻辑。

**工厂方法**

> 定义一个用于创建对象的接口，但让子类决定要实例化哪个类。Factory 方法允许类将实例化推迟到子类

**用例：**

何时使用：`Client`不知道在运行时需要创建哪些具体的类，但只是想获得一个可以完成这项工作的类。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-09-16T06:40:26.580

这真的是一个品味问题。工厂类可以根据需要进行抽象/接口，而工厂方法的重量更轻（并且也倾向于可测试，因为它们没有定义的类型，但它们需要一个众所周知的注册点，类似于服务定位器，但用于定位工厂方法）。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-16T07:50:12.997

当它们返回的对象类型具有私有构造函数时，当不同的工厂类在返回对象上设置不同的属性时，或者当特定的工厂类型与其返回的具体类型耦合时，工厂类很有用。

**WCF**使用 ServiceHostFactory 类在不同情况下检索 ServiceHost 对象。IIS 使用标准 ServiceHostFactory 来检索*.svc*文件的 ServiceHost 实例，但 WebScriptServiceHostFactory 用于将序列化返回给 JavaScript 客户端的服务。ADO.NET 数据服务有它自己特殊的 DataServiceHostFactory，而 ASP.NET 有它的 ApplicationServicesHostFactory，因为它的服务有私有构造函数。

如果您只有一个使用工厂的类，那么您可以在该类中使用工厂方法。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-09-09T06:00:02.483

考虑一个必须设计 Order 和 Customer 类的场景。为了简单和初始要求，您不需要 Order 类的工厂，并使用许多“new Order()”语句填充您的应用程序。事情进展顺利。

现在出现了一个新要求，即在没有客户关联的情况下无法实例化 Order 对象（新依赖项）。现在您有以下考虑。

1-您创建仅适用于新实现的构造函数重载。（不能接受的）。2-您更改 Order() 签名并更改每个调用。（不是一个好的做法和真正的痛苦）。

相反，如果您为 Order Class 创建了一个工厂，则只需更改一行代码即可。我建议几乎每个聚合关联都使用 Factory 类。希望有帮助。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-08-08T18:15:37.690

如果您想在使用方面创建不同的对象。它是有益的。

```
public class factoryMethodPattern {
      static String planName = "COMMERCIALPLAN";
      static int units = 3;
      public static void main(String args[]) {
          GetPlanFactory planFactory = new GetPlanFactory();
          Plan p = planFactory.getPlan(planName);
          System.out.print("Bill amount for " + planName + " of  " + units
                        + " units is: ");
          p.getRate();
          p.calculateBill(units);
      }
}

abstract class Plan {
      protected double rate;

      abstract void getRate();

      public void calculateBill(int units) {
            System.out.println(units * rate);
      }
}

class DomesticPlan extends Plan {
      // @override
      public void getRate() {
            rate = 3.50;
      }
}

class CommercialPlan extends Plan {
      // @override
      public void getRate() {
            rate = 7.50;
      }
}

class InstitutionalPlan extends Plan {
      // @override
      public void getRate() {
            rate = 5.50;
      }
}

class GetPlanFactory {

      // use getPlan method to get object of type Plan
      public Plan getPlan(String planType) {
            if (planType == null) {
                  return null;
            }
            if (planType.equalsIgnoreCase("DOMESTICPLAN")) {
                  return new DomesticPlan();
            } else if (planType.equalsIgnoreCase("COMMERCIALPLAN")) {
                  return new CommercialPlan();
            } else if (planType.equalsIgnoreCase("INSTITUTIONALPLAN")) {
                  return new InstitutionalPlan();
            }
            return null;
      }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-11-27T15:16:48.443

我认为这将取决于您想要为代码带来的松散耦合程度。

工厂方法很好地解耦了事情，但工厂类没有。

换句话说，使用工厂方法比使用简单工厂（称为工厂类）更容易更改。

查看此示例：[https](https://connected2know.com/programming/java-factory-pattern/) ://connected2know.com/programming/java-factory-pattern/ 。现在，想象一下你想带一个新的动物。在 Factory 类中，您需要更改 Factory，但在工厂方法中，不，您只需要添加一个新的子类。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-03-07T19:18:23.847

任何将对象创建推迟到它需要使用的对象的子类的类都可以看作是工厂模式的一个例子。

我在[https://stackoverflow.com/a/49110001/504133的另一个答案中详细提到了](https://stackoverflow.com/a/49110001/504133)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T08:16:50.700

工厂类更重量级，但给你一定的优势。在您需要从多个原始数据源构建对象的情况下，它们允许您仅将构建逻辑（可能还有数据的聚合）封装在一个地方。在那里可以抽象地测试它，而不用关心对象接口。

我发现这是一种有用的模式，特别是在我无法替换和不足的 ORM 并希望有效地从 DB 表连接或存储过程中实例化许多对象的情况下。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-01-01T23:17:22.087

我把工厂比作图书馆的概念。例如，您可以有一个用于处理数字的库和另一个用于处理形状的库。您可以将这些库的功能存储在逻辑命名的目录中，如`Numbers`或`Shapes`。这些是通用类型，在形状的情况下可以包括整数、浮点数、dobules、long 或矩形、圆形、三角形、五边形。

工厂petter使用多态、依赖注入和控制反转。

工厂模式的既定目的是：`Define an interface for creating an object, but let subclasses decide which class to instantiate. Factory Method lets a class defer instantiation to subclasses.`

因此，假设您正在构建一个操作系统或框架，并且您正在构建所有离散组件。

这是 PHP 中工厂模式概念的一个简单示例。我可能不是 100% 的，但它的目的是作为一个简单的例子。我不是专家。

```
class NumbersFactory {
    public static function makeNumber( $type, $number ) {
        $numObject = null;
        $number = null;

        switch( $type ) {
            case 'float':
                $numObject = new Float( $number );
                break;
            case 'integer':
                $numObject = new Integer( $number );
                break;
            case 'short':
                $numObject = new Short( $number );
                break;
            case 'double':
                $numObject = new Double( $number );
                break;
            case 'long':
                $numObject = new Long( $number );
                break;
            default:
                $numObject = new Integer( $number );
                break;
        }

        return $numObject;
    }
}

/* Numbers interface */
abstract class Number {
    protected $number;

    public function __construct( $number ) {
        $this->number = $number;
    }

    abstract public function add();
    abstract public function subtract();
    abstract public function multiply();
    abstract public function divide();
}
/* Float Implementation */
class Float extends Number {
    public function add() {
        // implementation goes here
    }

    public function subtract() {
        // implementation goes here
    }

    public function multiply() {
        // implementation goes here
    }

    public function divide() {
        // implementation goes here
    }
}
/* Integer Implementation */
class Integer extends Number {
    public function add() {
        // implementation goes here
    }

    public function subtract() {
        // implementation goes here
    }

    public function multiply() {
        // implementation goes here
    }

    public function divide() {
        // implementation goes here
    }
}
/* Short Implementation */
class Short extends Number {
    public function add() {
        // implementation goes here
    }

    public function subtract() {
        // implementation goes here
    }

    public function multiply() {
        // implementation goes here
    }

    public function divide() {
        // implementation goes here
    }
}
/* Double Implementation */
class Double extends Number {
    public function add() {
        // implementation goes here
    }

    public function subtract() {
        // implementation goes here
    }

    public function multiply() {
        // implementation goes here
    }

    public function divide() {
        // implementation goes here
    }
}
/* Long Implementation */
class Long extends Number {
    public function add() {
        // implementation goes here
    }

    public function subtract() {
        // implementation goes here
    }

    public function multiply() {
        // implementation goes here
    }

    public function divide() {
        // implementation goes here
    }
}

$number = NumbersFactory::makeNumber( 'float', 12.5 ); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-20T06:40:47.590

我的简短解释是，当我们没有足够的信息来创建具体对象时，我们会使用工厂模式。我们要么不知道依赖关系，要么不知道对象的类型。而且几乎总是我们不知道它们，因为这是运行时出现的信息。

示例：我们知道我们必须创建一个车辆对象，但我们不知道它是飞行还是在地面上工作。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-03-02T11:00:18.633

**GOF**定义：

定义一个用于创建对象的接口，但让子类决定要实例化哪个类。工厂方法允许类将实例化推迟到子类。

**通用** 示例：

```
public abstract class Factory<T> {

    public abstract T instantiate(Supplier<? extends T> supplier);

} 
```

具体类

```
public class SupplierFactory<T> extends Factory<T> {

    @Override
    public T instantiate(Supplier<? extends T> supplier) {
        return supplier.get();
    }
} 
```

实施

```
public class Alpha implements BaseInterface {
    @Override
    public void doAction() {
        System.out.println("The Alpha executed");
    }
}

public class Beta implements BaseInterface {
    @Override
    public void doAction() {
        System.out.println("The Beta executed");
    }
}

public interface BaseInterface {
    void doAction();
}

public class Main {
    public static void main(String[] args) {
        Factory<BaseInterface> secondFactory = new SupplierFactory<>();
        secondFactory.instantiate(Beta::new).doAction();
        secondFactory.instantiate(Alpha::new).doAction();
    }
} 
```

**简要**优势

*   您正在分离可以变化的代码和不变的代码（即，使用简单工厂模式的优势仍然存在）。此技术可帮助您轻松维护代码。
*   您的代码不是紧密耦合的；因此，您可以随时在系统中添加新的类，如 Lion、Beer 等，而无需修改现有架构。因此，您遵循了“封闭修改，开放扩展”的原则。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2021-06-24T05:56:36.040

[![在此处输入图像描述](https://i.stack.imgur.com/wAQvR.png)](https://i.stack.imgur.com/wAQvR.png) 想象一下，您有不同的客户，他们有不同的偏好。有人需要大众另一辆奥迪等等。有一件事很常见——它是一辆车。

为了让我们的客户满意，我们需要一个工厂。工厂只应该知道客户想要哪辆汽车，并将这种汽车交付给客户。如果以后我们有另一辆车，我们可以轻松地扩展我们的停车场和我们的工厂。

您可以在下面看到一个示例（ABAP）： [![在此处输入图像描述](https://i.stack.imgur.com/i2AFy.png)](https://i.stack.imgur.com/i2AFy.png)

现在我们将创建一个工厂实例并听取客户的意愿。 [![在此处输入图像描述](https://i.stack.imgur.com/tUNVw.png)](https://i.stack.imgur.com/tUNVw.png)

我们只用一个 create() 方法创建了三辆不同的汽车。

结果：

[![在此处输入图像描述](https://i.stack.imgur.com/6WM4W.png)](https://i.stack.imgur.com/6WM4W.png)

如果您想使逻辑更清晰并且程序更具可扩展性，工厂模式通常非常有用。

# c - 我怎么能拦截 linux 系统调用？

> ID：69859
> 
> 赞同：20
> 
> 时间：2008-09-16T06:40:20.120
> 
> 标签：c, linux, redirect, hook, system-calls

除了 LD_PRELOAD 技巧和将某个系统调用替换为您提供的系统调用的 Linux 内核模块之外，是否有可能拦截系统调用（例如打开），以便它首先通过您的函数，然后才到达实际打开？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-16T06:45:24.633

为什么你不能/不想使用[LD_PRELOAD 技巧](https://stackoverflow.com/questions/426230/what-is-the-ld-preload-trick)？

这里的示例代码：

```
/*
 * File: soft_atimes.c
 * Author: D.J. Capelis
 *
 * Compile:
 * gcc -fPIC -c -o soft_atimes.o soft_atimes.c
 * gcc -shared -o soft_atimes.so soft_atimes.o -ldl
 *
 * Use:
 * LD_PRELOAD="./soft_atimes.so" command
 *
 * Copyright 2007 Regents of the University of California
 */

#define _GNU_SOURCE
#include <dlfcn.h>
#define _FCNTL_H
#include <sys/types.h>
#include <bits/fcntl.h>
#include <stddef.h>

extern int errorno;

int __thread (*_open)(const char * pathname, int flags, ...) = NULL;
int __thread (*_open64)(const char * pathname, int flags, ...) = NULL;

int open(const char * pathname, int flags, mode_t mode)
{
    if (NULL == _open) {
        _open = (int (*)(const char * pathname, int flags, ...)) dlsym(RTLD_NEXT, "open");
    }
    if(flags & O_CREAT)
        return _open(pathname, flags | O_NOATIME, mode);
    else
        return _open(pathname, flags | O_NOATIME, 0);
}

int open64(const char * pathname, int flags, mode_t mode)
{
    if (NULL == _open64) {
        _open64 = (int (*)(const char * pathname, int flags, ...)) dlsym(RTLD_NEXT, "open64");
    }
    if(flags & O_CREAT)
        return _open64(pathname, flags | O_NOATIME, mode);
    else
        return _open64(pathname, flags | O_NOATIME, 0);
} 
```

据我了解......这几乎是 LD_PRELOAD 技巧或内核模块。除非您想在模拟器下运行它，否则没有很多中间立场，该模拟器可以捕获您的函数或在实际二进制文件上重新编写代码以捕获您的函数。

假设您不能修改程序并且不能（或不想）修改内核，LD_PRELOAD 方法是最好的方法，假设您的应用程序相当标准并且实际上不是恶意试图通过的方法你的拦截。（在这种情况下，您将需要其他技术之一。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T10:59:13.073

[Valgrind](http://www.valgrind.org)可用于拦截任何函数调用。如果您需要在成品中拦截系统调用，那么这将毫无用处。但是，如果您在开发过程中尝试拦截，那么它会非常有用。我经常使用这种技术来拦截散列函数，以便我可以控制返回的散列以进行测试。

如果您不知道，Valgrind 主要用于查找内存泄漏和其他与内存相关的错误。但底层技术基本上是一个 x86 模拟器。它模拟您的程序并拦截对 malloc/free 等的调用。好消息是，您无需重新编译即可使用它。

Valgrind 有一个他们称之为*Function Wrapping*的特性，用于控制函数的拦截。[有关详细信息，请参阅Valgrind 手册](http://www.valgrind.org/docs/manual/valgrind_manual.pdf)的第 3.2 节。您可以为您喜欢的任何功能设置功能包装。一旦调用被拦截，您提供的替代函数就会被调用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-17T04:13:04.087

一些应用程序可以欺骗 strace/ptrace 不运行，所以我唯一真正的选择是使用 systemtap

如果需要，Systemtap 可以拦截一堆系统调用，因为它的通配符匹配。Systemtap 不是 C，而是一种单独的语言。在基本模式下，systemtap 应该防止你做愚蠢的事情，但它也可以在“专家模式”下运行，如果需要，它会退回到允许开发人员使用 C。

它不需要你修补你的内核（或者至少不应该），一旦一个模块被编译，你可以从一个测试/开发盒中复制它，然后将它（通过 insmod）插入到生产系统中。

我还没有找到一个 linux 应用程序，它找到了一种解决方法/避免被 systemtap 捕获的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T07:05:04.977

我没有语法来优雅地使用 LKM 副手，但这篇文章很好地概述了你需要做什么： [http ://www.linuxjournal.com/article/4378](http://www.linuxjournal.com/article/4378)

您也可以只修补 sys_open 函数。从 linux-2.6.26 开始，它从 file/open.c 的第 1084 行开始。

您可能还会看到是否不能使用 inotify、systemtap 或 SELinux 为您完成所有这些日志记录，而无需构建新系统。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T14:03:14.520

如果您只想*查看*打开的内容，则需要查看 ptrace() 函数或命令行 strace 实用程序的源代码。如果您真的想*拦截*呼叫，也许让它做其他事情，我认为您列出的选项 - LD_PRELOAD 或内核模块 - 是您唯一的选择。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T23:32:13.527

如果您只是为了调试目的而这样做，请查看 strace，它内置于 ptrace(2) 系统调用之上，它允许您在系统调用完成时连接代码。请参阅手册页的 PTRACE_SYSCALL 部分。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T07:02:28.477

如果您真的需要一个解决方案，您可能会对完成此任务的 DR rootkit 感兴趣，[http://www.immunityinc.com/downloads/linux_rootkit_source.tbz2](http://www.immunityinc.com/downloads/linux_rootkit_source.tbz2)关于它的文章在这里[http://www.theregister.co。英国/2008/09/04/linux_rootkit_released/](http://www.theregister.co.uk/2008/09/04/linux_rootkit_released/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-01-20T06:12:51.653

听起来你需要审计。

Auditd 允许使用日志记录全局跟踪所有系统调用或对文件的访问。您可以为您感兴趣的特定事件设置密钥。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-08-29T15:29:05.940

使用 SystemTap 可能是一种选择。

对于 Ubuntu，请按照[https://wiki.ubuntu.com/Kernel/Systemtap](https://wiki.ubuntu.com/Kernel/Systemtap)中的说明进行安装。

然后只需执行以下命令，您将监听所有`openat`系统调用：

```
# stap -e 'probe syscall.openat { printf("%s(%s)\n", name, argstr) }'
openat(AT_FDCWD, "/dev/fb0", O_RDWR)
openat(AT_FDCWD, "/sys/devices/virtual/tty/tty0/active", O_RDONLY)
openat(AT_FDCWD, "/sys/devices/virtual/tty/tty0/active", O_RDONLY)
openat(AT_FDCWD, "/dev/tty1", O_RDONLY) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-11-05T10:53:34.213

首先让我们消除一些其他人给出的非答案：

*   使用`LD_PRELOAD`. 是的，您在问题中说“除了`LD_PRELOAD`……”，但显然这对某些人来说还不够。这不是一个好的选择，因为它仅在程序使用 libc 时才有效，但不一定如此。
*   使用 Systemtap。是的，您在问题中说“除了... Linux内核模块”，但显然这对某些人来说还不够。这不是一个好的选择，因为您必须加载一个自定义内核模块，这很麻烦，而且还需要 root。
*   瓦尔格林。这确实有点工作，但它可以模拟 CPU，所以它真的很慢而且真的很复杂。如果您只是为了一次性调试而这样做，那很好。如果您正在做一些值得生产的事情，这并不是一个真正的选择。
*   各种系统调用审计的东西。我不认为记录系统调用算作“拦截”它们。我们显然想修改系统调用参数/返回值或通过一些其他代码重定向程序。

然而，这里还没有提到其他可能性。请注意，我对所有这些东西都是新手，还没有尝试过任何东西，所以我可能对某些事情有误。

## 重写代码

理论上，您可以使用某种自定义加载器来重写系统调用指令以跳转到自定义处理程序。但我认为实施起来绝对是一场噩梦。

## 探针

[kprobes](https://www.kernel.org/doc/Documentation/kprobes.txt)是某种内核检测系统。他们只有对任何内容的只读访问权限，因此您不能使用它们来拦截系统调用，只能记录它们。

## 跟踪

[ptrace](https://linux.die.net/man/2/ptrace)是 GDB 等调试器用来进行调试的 API。有一个`PTRACE_SYSCALL`选项可以在系统调用之前/之后暂停执行。从那里你可以像 GDB 一样做任何你喜欢的事情。[这是一篇关于如何使用 ptrace 修改系统调用参数的文章](https://www.alfonsobeato.net/c/modifying-system-call-arguments-with-ptrace/)。然而，它显然有很高的开销。

## 赛康

[Seccomp](https://www.kernel.org/doc/Documentation/prctl/seccomp_filter.txt)是一个旨在让您*过滤*系统调用的系统。您不能修改参数，但*可以*阻止它们或返回自定义错误。Seccomp 过滤器是 BPF 程序。如果您不熟悉，它们基本上是用户可以在内核空间 VM 中运行的任意程序。这避免了用户/内核上下文切换，这使得它们比 ptrace 更快。

虽然你不能直接从你的 BPF 程序中修改参数，但你*可以*返回`SECCOMP_RET_TRACE`这将触发一个`ptrace`ing 父级中断。因此，它基本上与`PTRACE_SYSCALL`您在内核空间中运行程序以决定是否要根据其参数实际拦截系统调用相同。因此，如果您只想拦截一些系统调用（例如`open()`使用特定路径），它应该会更快。

我认为这可能是最好的选择。[这是与上述作者相同的一篇关于它的文章](https://www.alfonsobeato.net/tag/seccomp/)。~~请注意，他们使用经典 BPF 而不是 eBPF，但我想您也可以使用 eBPF。~~

编辑：实际上你只能使用经典的 BPF，而不是 eBPF。有[一篇关于它的 LWN 文章](https://lwn.net/Articles/857228/)。

这里有一些相关的问题。第一个绝对值得一读。

*   [eBPF 可以修改系统调用的返回值或参数吗？](https://stackoverflow.com/questions/43003805/can-ebpf-modify-the-return-value-or-parameters-of-a-syscall/43268462#43268462)
*   [仅使用 PTRACE_SINGLESTEP 拦截系统调用](https://stackoverflow.com/questions/67045211/intercept-only-syscall-with-ptrace-singlestep)
*   [这是拦截系统调用的好方法吗？](https://stackoverflow.com/questions/10688707/is-this-is-a-good-way-to-intercept-system-calls)
*   [在不修改内核的情况下拦截系统调用的最小开销方式](https://stackoverflow.com/questions/11291632/minimal-overhead-way-of-intercepting-system-calls-without-modifying-the-kernel)

[这里](https://nullprogram.com/blog/2018/06/23/)还有一篇关于通过 ptrace 操作系统调用的好文章。

# vim - Vim / vi 生存指南

> ID：69871
> 
> 赞同：22
> 
> 时间：2008-09-16T06:42:55.933
> 
> 标签：vim, vi

什么是基本的 vim 命令？新用户需要知道什么才能避免陷入麻烦？请每条评论一条命令。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-16T08:44:02.180

我发现不可替代的（因为它也可以在 vi 中工作，与 vim 的可视模式不同）是标记。`m`您可以用（小写）和您选择的字母（例如 x）标记各个点。然后你去别的地方，可以用 ``x `(backquote letter) to the exact spot, or with`'x` （撇号字母）返回到该行。

这些动作可以用作命令的参数（yank、delete 等）。比如你要删除10行；不是计数然后移动到最上面一行并输入`10dd`，而是转到块的开头或结尾，按`mm`（标记 m），然后转到块的另一端，然后按`d'm`（删除撇号 m）。如果在此示例中使用反引号而不是撇号，则删除将按字符而不是按行进行。尝试用“mark m”在行的中间标记，移动到另一行的中间，然后输入“d backquote m”，你就会明白我的意思了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T12:49:40.687

当我学会使用 * 或 # 分别向下或向上搜索光标下的单词的那一天，我感到非常高兴。确保`:set incsearch`和`:set hlsearch`首先。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-16T08:27:17.400

我喜欢这个二维码！

[http://www.fsckin.com/wp-content/uploads/2007/10/vi-vim_cheat_sheet.gif](http://www.fsckin.com/wp-content/uploads/2007/10/vi-vim_cheat_sheet.gif)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-16T08:19:00.400

当你有一些重复的动作要执行时，宏通常比正则表达式更快。只需键入

```
q[0-9a-z] in normal mode 
```

很多人用

```
qq 
```

因为它很快。在正常模式下再次按 q 可停止录制。然后只需输入

```
@[0-9a-z] in normal mode 
```

重复刚才录制的内容。

```
@q 
```

对于上面的例子。

编辑添加：您还可以重复宏。假设您编写了一个宏来跳转到行首，插入一个制表符，然后跳下一行。然后，您可以通过键入“@q”来测试您的宏以运行一次。然后，您可以通过键入“9@q”再重复该操作九次。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-16T07:13:38.793

使用“J”（J 表示加入；大写）命令删除行尾的换行符。否则你会发现它很棘手。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-16T06:53:50.900

```
:q -> quit
:w -> save
:q! -> quit and don't save
:x -> save and quit
:[number] -> go to line number
G -> go to end of file
dd -> delete line
p -> "put" line
yy -> "copy" line
:s/[searchfor] -> search 
```

我想这些是基本的开始

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-16T08:36:01.840

IBM 最近的这个[Vim 教程](http://www.ibm.com/developerworks/aix/library/au-speakingunix_vim/index.html)非常好

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-16T06:46:39.840

首先你需要知道如何关闭vi: ctrl-c :q!

其余的可以从 vimtutor 中找到。通过在命令行输入 vimtutor 来启动 vimtutor

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-11-12T11:03:24.577

尽管这是个人喜好问题，但我发现要做的重要事情之一就是重新映射`Esc`到其他东西。

我发现按下退出插入模式的键非常不舒服`Esc`，但 Vim 的美妙之处在于它允许键映射。

我目前正在使用以下映射`Control`+ `S`：

```
inoremap <C-s> <Esc>:w<CR> 
```

这具有作为我已经提交到内存的键映射的优点，并且每次进入正常模式时都具有保存我的工作的附加价值。是的，我知道这很疯狂，但无论如何我都会经常点击保存命令。这就像一个坏习惯，你知道的。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T13:55:32.883

请参阅[http://www.rayninfo.co.uk/vimtips.html](http://www.rayninfo.co.uk/vimtips.html)以获取大量 Vim 技巧的集合，从基本的无法生存到您可能从未想过尝试的非常复杂的东西。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-16T08:52:53.827

```
" ~/.vimrc
" Turn on line numbering
set nu
" Turn on syntax highlighting
syntax on    
" Set 4 space expanding tabs
set tabstop=4
set shiftwidth=4
set softtabstop=4
set expandtab
"turn off line wrapping
set nowrap
" Map CTRL-N to create a new tab
:map <C-n> <ESC>:tabnew<RETURN>
" Map Tab and CTRL-Tab to move between tabs
:map <Tab> <ESC>:tabn<RETURN>
:map <C-Tab> <ESC>:tabp<RETURN> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-16T13:03:47.813

如果您使用 vim，“u”命令（在命令模式下）将撤消您输入的最后一个命令。您可以重复使用此命令来撤消您在保存文件之前可能犯的错误。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-11-12T11:49:30.867

[Vim Tips Wiki](http://vim.wikia.com/wiki/Best_Vim_Tips)中列出了许多很棒的命令。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-05-07T13:00:36.177

```
:%!xxd 
```

以十六进制查看缓冲区的内容。要还原：

```
:%!xxd -r 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-16T08:22:49.063

别名 vi 编辑 :)

抛开所有的幽默.. 对于 vi 不使用 nedit..

*   `i`（切换到插入模式）
*   `a`（追加 = 移动到行尾并切换到插入模式）
*   `esc`（退出插入模式）
*   `dd`删除一行
*   `x`删除一个字符
*   `:wq`（保存并退出）
*   `/`开始搜索
*   `n`找下一个
*   `?`向后搜索..
*   `yy`(yank) 复制一行到缓冲区
*   `pp`（粘贴）粘贴到这里
*   `r`（替换一个字符）
*   `<N> <command>`这是一个简洁但令人讨厌的功能，可让您输入数字，然后输入命令
*   `5dd`将删除 5 行

但在这一点上，你不妨 -`man vi`并刷新你的记忆

虽然还有很多，但几年前我从 Vi 切换到了 nedit，我发现它具有更多我可以更轻松地定期使用的功能。选项卡式编辑、增量搜索栏、列选择、复制和粘贴。对选定的行进行排序，在选择、整个文档或所有打开的文档中进行搜索和销毁.. 撕下下拉菜单.. 它支持我使用的所有语言的语法突出显示.. （我使用了很长时间的模式文件多年来，VIM 现在很多都是等效的，但是它必须引入 Nedit 没有的功能，以及在我再次切换之前迁移我的模式文件的简单方法。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-16T08:23:44.770

学习这些命令的时候运行[vimtutor](http://www.linuxcommand.org/man_pages/vimtutor1.html)也不错

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-09-16T06:48:08.480

我用vi很轻，只用了以下命令：

```
a   - switch to insert mode (after the cursor)
esc - return to command mode
:wq - save and quit
:q  - quit (no save, only without modification)
:q! - force quit (no save, also with modification)
x   - delete one character (in command mode)
dd  - delete the whole line (in command mode) 
```

我知道还有很多，但这些足以让你度过难关。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-16T08:30:24.617

我最大的提示：**`ctrl`+`q`**`ctrl`保存您不小心点击+`s`保存您正在处理的文件的那一天

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-11-12T11:25:39.930

我喜欢 Bram Moolenaar 和 Oleg Raisky 的[Vim 5.6 参考指南](http://www.risner.org/vim/)。
你可以直接打印成小册子的形式，方便阅读，我一直在身边。
它有点老了，但是 Vi 的 8 年寿命是多少？

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-02-12T05:53:15.340

```
:set ignorecase smartcase 
```

使搜索不区分大小写，除非您的搜索包含大写字母。也许不是*最*不可或缺的，但我发现自己在任何时候在新地方编辑时都会设置这个选项。它在我拥有的任何 vimrc 文件中。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-12-07T08:54:57.827

我的 vimrc 里有这个

```
set number
set relativenumber 
```

这给了我一个行编号系统，它使`j`,`k`键真正富有成效。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2012-10-23T04:50:07.523

`:g/<pattern>/t$`

将复制`<pattern>`到文件的末尾。当您想提取线条但不想一一提取时很有用。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2011-09-07T17:19:50.243

几个月前，我从 Textmate 切换到了 VIM，并写了一篇关于如何在 VIM 中执行 110 个 Textmate 编辑命令的指南。它按类别组织，例如管理文件、自动完成单词和语法突出显示。

[文本伴侣到 VIM](http://www.jackkinsella.ie/2011/09/05/textmate-to-vim.html)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-16T07:00:54.487

正如其他几个人已经提到的那样，vimtutor 是要走的路。它会教你在 vim 中需要知道的一切。我会给你的一条一般建议是尽可能远离插入模式。其他模式也有很大的威力，只需要一点点练习就可以适应。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-05-07T13:11:39.270

My favorites:

```
%  find matching bracket/brace 
* and #  next/previous match
gg top of page
G end of the page
<Ctrl-v> Change to visual mode and select column
<Ctrl-a> increase current number by 1
<Ctrl-x> decrease current number by 1
Running macros 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-09-16T08:41:36.820

将文件中的“foo”替换为“bar”：%s/foo/bar/gc

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-16T06:46:42.120

我最喜欢的命令之一是 %G，它直接到文件末尾。在日志文件中特别有用。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-16T06:47:54.690

如何在模式之间切换（i 进入插入模式（多种方式之一），esc 退出插入模式，冒号表示命令模式）以及如何保存和退出。(:wq)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-09-16T06:48:11.210

另一个有用的命令是搜索某些东西： / 例如 /Mon 将搜索（并且在 vim 高亮的情况下）您文件中出现的任何 Mon。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2008-09-16T08:24:44.253

i - 插入模式（转义退出） dd - 删除行 shift-y - 'Yank'（复制） line p - 'Put'（粘贴） line(s) shift-v - 用于选择文本的可视模式（tryin 'yanking ' 此文本并将其“放在”某处。 ctrl-w n - 创建新窗口（您可以在此处打开文件或启动新文件） ctrl-w v - 垂直拆分现有窗口 ctrl-n（在插入模式下） - 自动完成（如果支持) :! 运行 shell 命令，通常使用标准 in 作为文件或选择 (shift-V)

有用的插件查看： * 缓冲区资源管理器 - 使用 \be 查看缓冲区中的文件（并选择重新打开）

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2008-09-16T08:34:15.387

注意 vi 不是 vim！vim 正在迅速变成新世纪的 emacs。nvi 可能是最接近原始 vi 的东西。这是一个很好的提示：“xp”将交换两个字符（试试看）。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2009-02-12T06:02:50.260

真正的力量在于寻找。以下是基本命令：

/Steve 将在文本中找到“Steve”的第一个实例。n 将在文本中找到下一个“Steve”。:%s//Stephen/g 会将您刚刚搜索的所有“Steve”实例替换为“Stephen”。

不是为了推销自己，而是我写了一篇关于这个主题的[博客文章。](http://blogs.msdn.com/steverowe/archive/2008/05/24/gvim-as-notepad.aspx)它侧重于初学者的 Vim 的关键部分。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2009-05-08T02:04:30.533

没有人提到旺盛的ctags？谷歌并安装它；比您可能拥有的默认 ctags 好得多。要使用它，请 cd 到您的项目根目录并输入

:!ctags -R 。

在名为 tags 的文件中构建项目中所有内容的数据库...java、c++、python、ruby、javascript，任何东西。

:help ctags 用于使用生成的标签的大量命令，无法概括。将光标放在函数名上，键入 CMD ]，打开定义它的文件。更多类似的命令。很快就变成了第二天性……几乎和 IDE 一样好（而且 VIM 永远不会像 eclipse 经常做的那样让你失望。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2011-01-18T16:33:48.513

[我使用此处的教程](http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html)迈出了第一步，并且已经使用参考备忘单几个星期了。而且，当然，在 vim/gvim/Macvim 中有 vimtutor。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2011-01-18T19:47:22.607

有时最好重新格式化缓冲区（即重新制表、对齐大括号等）。我最近学到了一个节省时间的方法：

```
gg=G 
```

例如...它将变成以下内容：

```
if ( !flag )
{
  // Do something special
  }
else
   {
 // Do another special thing
} 
```

进入以下：

```
if ( !flag ) 
{
    // Do something special 
}
else
{
    // Do another special thing
} 
```

或者，如果你有一个 xml 文件，你希望重新缩进，因为格式很乱，你可以运行上面的命令并打开如下所示的内容：

```
<root>
<addressBook>
    <contact first="Frank" last="Tank"/>
        <contact first="Foo" last="Man"/>
    </addressBook>
</root> 
```

变成更易读的东西，如下所示：

```
<root>
    <addressBook>
        <contact first="Frank" last="Tank"/>
        <contact first="Foo" last="Man"/>
    </addressBook>
</root> 
```

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2012-01-28T17:37:38.550

请参阅此站点以获取学习基本运动命令的有趣方式：http: [//kikuchiyo.org](http://kikuchiyo.org)。我认为线程中涵盖了大多数基本命令，但我总是喜欢向 vim 的新手推荐这个。单击 train first 链接，其中包含基本移动命令的图例和`i`拾取红宝石的插入命令。快速移动的好习惯。

# html - 与其他浏览器相比，Google Chrome 中的 html 和 xhtml 的外观呈现是否有任何明显的差异？

> ID：69890
> 
> 赞同：-1
> 
> 时间：2008-09-16T06:47:16.283
> 
> 标签：html, xhtml, browser, google-chrome

Firefox 在 Google Chrome 中的 HTML 和 XHTML 外观呈现是否有任何明显的差异？来自 IE？从其他浏览器？它呈现代码最相似的浏览器是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T06:48:41.240

由于它基于 WebKit，它的渲染将最接近于 Safari 和 Konqueror。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T06:48:36.980

谷歌的 Chrome 使用[**WebKit 渲染引擎**](http://webkit.org/)，这就是 Safari 使用的。所以，我猜它最接近 Safari。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T11:05:11.153

Safari 3.1 和 Google Chrome 之间存在[抗锯齿差异](http://www.flickr.com/photos/kurafire/2822606444/)，无论其价值如何。这无疑是因为 Windows 上的 Safari 使用它自己的文本渲染和抗锯齿层而不是 Windows 的 GDI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T13:52:55.730

我认为 Chrome 使用的 Webkit (525.13) 与当前版本的 Safari 使用的不同（对我来说是 525.21）还有一些细微的差异。

例子：

[https://woot.campfirenow.com/login](https://woot.campfirenow.com/login)

在 Safari 中，密码标签和输入框位于电子邮件标签和输入框的正下方，而在 Chrome 中，密码标签和输入框向右缩进约 75 像素。

# .net - 您最喜欢的第 3 方 WinForms.Net 绘图工具是什么，为什么？

> ID：69907
> 
> 赞同：4
> 
> 时间：2008-09-16T06:51:10.330
> 
> 标签：.net, winforms, graph

我所说的图表是指条形图、饼图、折线图之类的东西。这些年来我用过几个，但你最喜欢什么，为什么？

请每个答案一个工具（使投票更容易：o）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T07:15:32.393

我喜欢[ZedGraph](http://zedgraph.org/wiki/index.php?title=Main_Page)，它是一个免费的库，可以产生高质量的输出。您可以调整抗锯齿以使其以最适合您的方式工作，并且它支持各种图表和图形。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T07:21:55.123

如果您的目标是一个简单的图表，并且您几乎不需要控制它的呈现方式，那么您可以轻松开始使用[google chart api](http://code.google.com/apis/chart/)。您只需在您的网站上放置一个 img 标签，并在 url 末尾的查询字符串中传递参数。您甚至可以自定义输出颜色等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-24T20:55:09.757

I use [Infragistics chart](http://www.infragistics.com/dotnet/netadvantage/winforms/winchart.aspx#Overview) control. Why... because it's part of the library of controls that we already have a subscription to. That ringing endorsement aside. Their chart control is very flexible. It supports many different chart types including the ones you've mentioned. They also support composite charts (several different charts within the same chart control). I will warn you though; learning their development style is not trivial.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-24T21:31:38.433

[ZedGraph](http://zedgraph.org/) Is Easy to use, Supports Logarithmic Scales and the best of all it is Free

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-24T20:14:26.297

我总是使用 Zedgraph，因为它支持 XY-scatter 而其他许多不支持。对于测量，数据采集和细化 XY 散射非常重要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-24T21:02:20.413

I find [ChartDirector](http://www.advsofteng.com/) to be a pretty good library. A large variety of charts are available with an easy to understand API. It also has a very reasonable cost.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T07:53:28.510

[图表](http://www.steema.com/products/teechart/whatsnew.html)。我已经使用这个工具几年了，虽然它不是免费的（约 500 欧元），但它包含了很多功能。

我更喜欢什么：

*   坐标轴自动缩放
*   不同系列的自动颜色
*   通过鼠标选择区域进行缩放
*   提供所有功能的优秀代码示例
*   和对 ASP.NET 的 Web 支持

# javascript - 为什么自闭合脚本元素不起作用？

> ID：69913
> 
> 赞同：1468
> 
> 时间：2008-09-16T06:52:38.563
> 
> 标签：javascript, html, internet-explorer, xhtml

浏览器无法正确识别的原因是什么：

```
<script src="foobar.js" /> <!-- self-closing script element --> 
```

只有这一点被认可：

```
<script src="foobar.js"></script> 
```

这会破坏 XHTML 支持的概念吗？

注意：至少对于所有 IE (6-8 beta 2)，此语句都是正确的。

* * *

## 回答 #1

> 赞同：503
> 
> 时间：2008-09-16T07:08:47.853

XHTML 1 规范的非规范性附录“HTML 兼容性指南”说：

[С.3。元素最小化和空元素内容](http://www.w3.org/TR/xhtml1/#C_3)

> 给定内容模型不是的元素的空实例`EMPTY`（例如，空标题或段落）不使用最小化形式（例如 use`<p> </p>`和 not `<p />`）。

[XHTML DTD](http://www.w3.org/TR/xhtml1/dtds.html#a_dtd_XHTML-1.0-Strict)将脚本元素指定为：

```
<!-- script statements, which may include CDATA sections -->
<!ELEMENT script (#PCDATA)> 
```

* * *

## 回答 #2

> 赞同：250
> 
> 时间：2008-09-16T08:14:28.490

补充一下 Brad 和小队所说的，自闭合 XML 语法`<script />`实际上**是**正确的 XML，但要使其在实践中工作，您的 Web 服务器还需要将您的文档作为格式正确的 XML 发送，该 XML 具有类似于`application/xhtml+xml`HTTP 中的 XML 模仿类型Content-Type 标头（而*不是*as `text/html`）。

但是，发送 XML mimetype 会导致您的页面无法被 IE7 解析，它只喜欢`text/html`.

从[w3](http://www.w3.org/TR/xhtml-media-types/)：

> 总之，'application/xhtml+xml' 应该用于 XHTML Family 文档，'text/html' 的使用应该限于与 HTML 兼容的 XHTML 1.0 文档。'application/xml' 和 'text/xml' 也可以使用，但在适当的时候，应该使用 'application/xhtml+xml' 而不是那些通用的 XML 媒体类型。

几个月前我对此感到困惑，唯一可行（与 FF3+ 和 IE7 兼容）的解决方案是将旧`<script></script>`语法与`text/html`（HTML 语法 + HTML mimetype）一起使用。

如果您的服务器`text/html`在其 HTTP 标头中发送类型，即使使用其他格式正确的 XHTML 文档，FF3+ 也会使用其 HTML 呈现模式，这意味着这`<script />`将不起作用（这是一个更改，Firefox 以前不那么严格）。

无论对元元素、文档中的 XML 序言或文档类型进行任何摆弄，都会发生这种情况`http-equiv`——Firefox 一旦获得`text/html`标题就会分支，这决定了 HTML 或 XML 解析器是否在文档内部查找，而 HTML 解析器不理解`<script />`.

* * *

## 回答 #3

> 赞同：197
> 
> 时间：2015-02-25T12:37:25.987

其他人回答了“如何”并引用了规范。`<script/>`在深入研究错误报告和邮件列表数小时后，这是“为什么不”的真实故事。

* * *

**HTML 4**

HTML 4 基于[SGML](http://www.iso.org/iso/catalogue_detail.htm?csnumber=16387)。

SGML 有一些[短标签](https://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language#SHORTTAG)，例如`<BR//`, `<B>text</>`, `<B/text/`, 或`<OL<LI>item</LI</OL>`。XML 采用第一种形式，将结尾重新定义为“>”（SGML 是灵活的），因此它变成`<BR/>`.

但是，HTML 没有重新定义，所以`<SCRIPT/>` [*应该*意味着](https://stackoverflow.com/a/3201889/893578) `<SCRIPT>>`.
（是的，'>' 应该是内容的一部分，并且标签仍然*没有*关闭。）

显然，这与 XHTML 不兼容，并且*会*破坏许多站点（当浏览器成熟到[可以关心](https://bugzilla.mozilla.org/show_bug.cgi?id=47522) [这一点](https://bugs.webkit.org/show_bug.cgi?id=6393)时），因此[没有人实现短标签](https://stackoverflow.com/a/9619296/893578)，规范也不[建议使用它们](http://www.w3.org/TR/html401/appendix/notes.html#h-B.3.3)。

实际上，所有“工作”的自结束标签都是在技术上不符合标准的解析器上带有禁止结束标签的标签，实际上是无效的。正是 W3C[提出了这个技巧](https://www.webkit.org/blog/68/understanding-html-xml-and-xhtml/)，通过使其[与 HTML 兼容](http://www.w3.org/TR/xhtml1/#guidelines)来帮助过渡到 XHTML 。

和`<script>`的结束标签是[不被禁止](http://www.w3.org/TR/html401/interact/scripts.html#h-18.2.1)的。

**“自结束”标签是 HTML 4 中的一个 hack，没有任何意义。**

* * *

**HTML 5**

HTML5 有[五种类型的标签](https://html.spec.whatwg.org/multipage/syntax.html#elements-2)，只有 'void' 和 'foreign' 标签[允许自闭](https://html.spec.whatwg.org/multipage/syntax.html#syntax-tags)。

因为`<script>`不是 void（它*可能*有内容）并且不是外来的（如 MathML 或 SVG），`<script>`所以无论您如何使用它都不能自封闭。

但为什么？他们不能把它当作外国的，做特例之类的吗？

HTML 5 旨在[向后兼容](https://html.spec.whatwg.org/multipage/introduction.html#history-2)HTML 4 和 XHTML 1的*实现*。它不是基于 SGML 或 XML；它不是基于 SGML 或 XML。它的语法主要涉及记录和统一实现。（这就是为什么`<br/>` `<hr/>`etc. 是[有效的 HTML 5](https://html.spec.whatwg.org/multipage/syntax.html#start-tags)，尽管是无效的 HTML4。）

自闭合`<script>`是实现曾经不同的标签之一。它[曾经在 Chrome、Safari](https://www.webkit.org/blog/1273/the-html5-parsing-algorithm/)和[Opera](http://www.opera.com/docs/changelogs/windows/900b1/)中工作；据我所知，它从未在 Internet Explorer 或 Firefox 中运行过。

[这](http://lists.w3.org/Archives/Public/public-whatwg-archive/2009Aug/0101.html)在 HTML 5 被起草并被拒绝时讨论过，因为它[破坏了](http://lists.w3.org/Archives/Public/public-whatwg-archive/2009Aug/0104.html) [浏览器的](http://lists.w3.org/Archives/Public/public-whatwg-archive/2009Aug/0117.html) [兼容性](http://lists.w3.org/Archives/Public/public-whatwg-archive/2009Aug/0119.html)。自关闭脚本标签的网页可能无法在旧浏览器中正确呈现（如果有的话）。也有[其他建议](http://lists.w3.org/Archives/Public/public-whatwg-archive/2009Aug/0384.html)，但也不能解决兼容性问题。

草案发布后，WebKit 更新了解析器以使其符合要求。

**`<script>`由于对 HTML 4 和 XHTML 1 的向后兼容性，在 HTML 5 中不会发生自关闭。**

* * *

**XHTML 1 / XHTML 5**

[正如其他答案](https://stackoverflow.com/a/70288/893578)所述，当*真正*用作 XHTML 时，`<script/>`它确实是封闭的。

除了[规范说它](http://www.w3.org/TR/xhtml1/#media)在作为 HTML 服务时*应该可以工作：*

> XHTML 文档 ... 可以使用 Internet 媒体类型“text/html”[RFC2854] 进行标记，因为它们与大多数 HTML 浏览器兼容。

所以发生了什么事？

人们[要求 Mozilla](https://bugzilla.mozilla.org/show_bug.cgi?id=67646)让Firefox 将符合标准的文档[解析为](https://bugzilla.mozilla.org/show_bug.cgi?id=107904)[XHTML](https://bugzilla.mozilla.org/show_bug.cgi?id=109837)，而不考虑指定的内容标题（称为[内容嗅探](https://en.wikipedia.org/wiki/Content_sniffing)）。这将允许自动关闭脚本，并且无论如何[都需要](http://blogs.msdn.com/b/ie/archive/2005/02/01/364581.aspx)内容嗅探，因为网络托管商还不够成熟，无法提供正确的标题；IE 很[擅长](https://msdn.microsoft.com/en-us/library/ie/ms775147%28v=vs.85%29.aspx)。

如果第[一次浏览器大战](https://en.wikipedia.org/wiki/Browser_wars#First_browser_war)没有以 IE 6 结束，那么 XHTML 可能也在名单上。但它确实结束了。IE 6对 XHTML[有问题](http://blog.isotoma.com/2008/01/xhtml-ccs-crashes-ie6/)。事实上 IE[根本不支持](https://stackoverflow.com/questions/268526/blank-page-in-ie6)正确的 MIME 类型[，](http://blogs.msdn.com/b/ie/archive/2005/09/15/467901.aspx)迫使*每个人都*使用`text/html`XHTML，因为 IE占据了整整十年的[主要市场份额](https://en.wikipedia.org/wiki/Usage_share_of_web_browsers#TheCounter.com_.282000_to_2009.29)。

而且内容嗅探[可能](http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx) [非常糟糕](http://www.h-online.com/security/features/Risky-MIME-sniffing-in-Internet-Explorer-746229.html)，人们说[应该停止它](https://bugzilla.mozilla.org/show_bug.cgi?id=68421)。

最后，事实证明 W3C[并不意味着 XHTML 是可嗅探](http://lists.w3.org/Archives/Public/www-html/2000Sep/0024.html)的：文档*既是*HTML 又是 XHTML，并且是`Content-Type`规则。可以说他们坚持“只遵循我们的规范”而[忽略了实用性](http://lemire.me/blog/archives/2006/10/30/reinventing-html-or-yes-we-admit-it-xhtml-failed/)。一个错误[一直延续](https://www.cnet.com/news/an-epitaph-for-the-web-standard-xhtml-2/)到后来的 XHTML 版本。

无论如何，这个决定[解决了](https://bugzilla.mozilla.org/show_bug.cgi?id=109837#c11)Firefox 的问题。Chrome[诞生](https://en.wikipedia.org/wiki/Google_Chrome#Public_release)前 7 年；没有其他重要的浏览器。就这样决定了。

**由于以下规范，单独指定 doctype 不会触发 XML 解析。**

* * *

## 回答 #4

> 赞同：178
> 
> 时间：2010-07-25T02:52:33.727

万一有人好奇，归根结底的原因是HTML原本是SGML的方言，是XML的怪哥哥。在 SGML-land 中，可以在 DTD 中将元素指定为自关闭（例如 BR、HR、INPUT）、隐式可关闭（例如 P、LI、TD）或显式可关闭（例如 TABLE、DIV、SCRIPT）。当然，XML 没有这个概念。

现代浏览器使用的 tag-soup 解析器是从这个遗留下来的，尽管它们的解析模型不再是纯 SGML。当然，除非您使用 XML mime 类型发送它，否则您精心设计的 XHTML 会被视为受 SGML 启发的糟糕编写的标签汤。这也是为什么...

```
<p><div>hello</div></p> 
```

...被浏览器解释为：

```
<p></p><div>hello</div><p></p> 
```

...这是一个可爱的晦涩错误的秘诀，当您尝试针对 DOM 进行编码时，它会让您陷入困境。

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2008-09-16T08:00:43.937

Internet Explorer 8 和更早版本不支持 XHTML 解析。即使您使用 XML 声明和/或 XHTML 文档类型，旧的 IE 仍将文档解析为纯 HTML。在纯 HTML 中，不支持自闭合语法。尾部斜杠被忽略，您必须使用显式结束标记。

即使是支持 XHTML 解析的浏览器，例如[IE 9 和更高版本](https://docs.microsoft.com/en-us/archive/blogs/ie/xhtml-in-ie9)，仍然会将文档解析为 HTML，除非您使用 XML 内容类型提供文档。但在那种情况下，旧的 IE 根本不会显示文档！

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2008-09-16T13:07:47.537

上面的人已经对这个问题解释得差不多了，但是有一点可以说清楚的是，虽然人们`<br/>`一直在 HTML 文档中使用 and 这样的东西，但是`/`在这样的位置上的任何基本上都被忽略了，并且只在尝试制作时使用可以解析为 XML 和 HTML 的东西。例如，尝试`<p/>foo</p>`，您会得到一个常规段落。

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2012-10-27T09:35:21.187

自关闭脚本标签不起作用，因为脚本标签可以包含内联代码，而 HTML 不够聪明，无法根据属性的存在来打开或关闭该功能。

> 另一方面，HTML 确实有一个很好的标签来包含对外部资源的引用：`<link>`标签，它可以是自关闭的。它已经用于包含样式表、RSS 和 Atom 提要、规范 URI 以及各种其他好东西。为什么不是 JavaScript？

如果你希望脚本标签是自封闭的，你不能像我说的那样做，但是有一个替代方案，虽然不是一个聪明的方案。您可以使用自闭合链接标签并通过给它一种 text/javascript 和 rel 作为脚本来链接到您的 JavaScript，如下所示：

```
<link type="text/javascript" rel ="script" href="/path/tp/javascript" /> 
```

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2008-09-16T07:10:59.220

与 XML 和 XHTML 不同，HTML 不知道自闭合语法。将 XHTML 解释为 HTML 的浏览器不知道该`/`字符表示标签应该是自闭合的。相反，他们将其解释为空属性，解析器仍然认为标签是“打开的”。

就像`<script defer>`被对待一样`<script defer="defer">`，`<script />`被当作对待`<script /="/">`。

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2008-09-16T12:48:14.137

Internet Explorer 8 和更早版本不支持 XHTML 的正确 MIME 类型，`application/xhtml+xml`. 如果您将 XHTML 提供为`text/html`，您必须为这些旧版本的 Internet Explorer 执行任何操作，它将被解释为 HTML 4.01。您只能对允许省略结束标记的任何元素使用短语法。请参阅[HTML 4.01 规范](https://www.w3.org/TR/html401/)。

XML“短格式”被解释为名为 / 的属性，它（因为没有等号）被解释为具有隐含值“/”。这在 HTML 4.01 中是完全错误的——不允许使用未声明的属性——但浏览器会忽略它。

IE9 及更高版本[支持 XHTML 5](https://docs.microsoft.com/en-us/archive/blogs/ie/xhtml-in-ie9)与`application/xhtml+xml`.

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-08-17T22:54:13.743

## 那是因为 SCRIPT TAG 不是 VOID ELEMENT。

在*HTML 文档*中- VOID ELEMENTS**根本**不需要“结束标签”！

在*xhtml*中，一切都是通用的，因此它们都需要**终止**，例如“结束标签”；包括 br，一个简单的换行符，as`<br></br>`或其*简写* `<br />`。

但是，脚本元素永远不是 void 或参数元素，因为*脚本标记*在其他任何东西之前是浏览器指令，而不是数据描述声明。

原则上，语义终止指令（例如“结束标签”）仅用于处理其语义不能被后续标签终止的指令。例如：

`<H1>`语义不能被后续终止，`<P>`因为它没有携带足够的自身语义来覆盖并因此终止先前的 H1 指令集。虽然它能够将**流**分成一个新的段落行，但它还不够“强大”来覆盖当前的字体大小和样式 line-height*倾泻而下*，即从 H1 泄漏（因为 P 没有它）。

这就是发明“/”（终止）信号的方式和原因。

一个通用*的无描述*终止标记，如`< />`, 就足以应付遇到的级联的任何单个脱落，例如：`<H1>Title< />`但情况并非总是如此，因为我们还希望能够“嵌套”，流的多个中间标记：split在包裹/落入另一个级联之前进入洪流。因此，通用终止器`< />`无法确定要终止的属性的目标。例如：`<b>`**粗体** `<i>`***粗体斜体*** `< />` *斜体* `</>`正常。毫无疑问，我们的意图是不正确的，并且很可能会将其解释为**粗体*-斜体*粗体**正常。

这就是包装器（即容器）的**概念诞生的原因。**（这些概念非常相似，以至于无法辨别，有时同一个元素可能同时具有两者。`<H1>`同时是包装器和容器。而`<B>`只是语义包装器）。我们需要一个简单的、没有语义的容器。当然，DIV 元素的发明也随之而来。

DIV 元素实际上是一个 2BR-Container。当然，CSS 的出现使整个情况变得比以前更奇怪，并造成了很大的混乱，产生了许多严重的后果——间接的！

因为使用 CSS，您可以轻松地覆盖新发明的 DIV 的本机前后 BR 行为，它通常被称为“什么都不做的容器”。这自然是错的！DIV 是块元素，在结束信号之前和之后都会自然地中断流的行。很快，WEB 开始遭受页面 DIV-itis 的困扰。他们中的大多数仍然是。

CSS 的出现具有完全覆盖和重新定义任何 HTML 标签的本机行为的能力，以某种方式设法混淆和模糊了 HTML 存在的整个含义......

突然之间，所有的 HTML 标签都显得过时了，它们被污损，失去了所有原有的意义、身份和目的。不知何故，你会获得不再需要它们的印象。说：一个单独的容器包装标签就足够了所有的数据表示。只需添加所需的属性。为什么不使用有意义的标签呢？在你去的时候发明标签名称，让 CSS 来处理其余的事情。

这就是 xhtml 的诞生方式，当然也是大笨蛋，新来者付出如此高昂的代价，以及对什么是什么以及这一切的该死目的是什么的扭曲看法。同志们，W3C 从万维网转到出了什么问题？！！

HTML 的目的是**将有意义的数据流式**传输给人类接收者。

传递信息。

正式部分只是为了帮助信息传递的清晰性。xhtml 丝毫不考虑这些信息。- 对它来说，信息是绝对不相关的。

事情中最重要的是要知道并能够理解**xhtml 不仅仅是一些扩展 HTML 的版本**，xhtml 是完全不同的野兽；接地; 因此**将它们分开是明智的。**

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-11-10T14:38:53.153

简单的现代答案是因为标签以这种方式表示为强制性的

> 标签省略 无，开始和结束标签都是强制性的。

[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-11-22T00:25:16.200

“true XHTML”、“faux XHTML”和“普通 HTML”之间的区别以及服务器发送的 MIME 类型的重要性[已经在这里很好地描述了](https://stackoverflow.com/a/70288/540955)。

如果您想立即尝试，这里有一个简单的可编辑片段，带有实时预览，包括自关闭脚本标记（请参阅 参考资料`<script src="data:text/javascript,/*functionality*/" />`）和 XML 实体（不相关，请参阅参考资料`&x;`）。

如您所见，根据嵌入文档的 MIME 类型，data-URI JavaScript 功能要么被执行并显示连续文本（在`application/xhtml+xml`模式下），要么不被执行并且连续文本被脚本“吞噬”（在`text/html`模式下）。

```
div { display: flex; }
div + div {flex-direction: column; }
```

```
<div>Mime type: <label><input type="radio" onchange="t.onkeyup()" id="x" checked  name="mime"> application/xhtml+xml</label>
<label><input type="radio" onchange="t.onkeyup()" name="mime"> text/html</label></div>
<div><textarea id="t" rows="4" 
onkeyup="i.src='data:'+(x.checked?'application/xhtml+xml':'text/html')+','+encodeURIComponent(t.value)"
><?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"
[<!ENTITY x "true XHTML">]>
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
  <p>
    <span id="greet" swapto="Hello">Hell, NO :(</span> &x;.
    <script src="data:text/javascript,(g=document.getElementById('greet')).innerText=g.getAttribute('swapto')" />
    Nice to meet you!
    <!-- 
      Previous text node and all further content falls into SCRIPT element content in text/html mode, so is not rendered. Because no end script tag is found, no script runs in text/html
    -->
  </p>
</body>
</html></textarea>

<iframe id="i" height="80"></iframe>

<script>t.onkeyup()</script>
</div>
```

你应该看到`Hello, true XHTML. Nice to meet you!`下面的文本区域。

对于无法使用的浏览器，您可以复制 textarea 的内容并将其保存为带有`.xhtml`（或`.xht`）扩展名的文件（[感谢 Alek 的提示](https://stackoverflow.com/questions/69913/why-dont-self-closing-script-tags-work?rq=1#comment44088198_70288)）。

# java - 在 JavaServer Faces 中如何处理分页列表？

> ID：69917
> 
> 赞同：4
> 
> 时间：2008-09-16T06:53:59.747
> 
> 标签：java, web-services, jsf, paging

我有一个[JSF](http://en.wikipedia.org/wiki/JavaServer_Faces)应用程序，我将其转换为使用 Web 服务，而不是直接使用数据库查询。*以前*可以通过简单的 SQL 查询轻松返回一些非常长的列表。我想弄清楚如何使用 JSF/Web 服务实现分页。是否有用于分页 Web 服务的良好设计模式？

如果这很重要，我目前正在使用带有 Tomahawk 扩展（MyFaces 开发团队在捐赠给 Apache 之前创建的一组 JSF 组件）的 JSF的[Apache MyFaces参考实现。](http://en.wikipedia.org/wiki/Apache_MyFaces)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T14:44:13.873

这取决于您是要进行客户端还是服务器端分页。如果是服务器端，您的 Web 服务将必须包含几个附加参数（例如“startFrom”和“pageSize”），它们可以让您指定要检索的数据的“页面”。您的服务可能还需要返回总结果大小，以便您可以生成分页控件。

如果您认为这太费力了，您可以在您的支持 bean 中进行客户端分页（或让一个组件为您做这件事），但是如果您谈论的是数千个对象，则不建议这样做！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T07:22:57.943

我喜欢 Seam 的查询对象：[http ://docs.jboss.com/seam/2.1.0.BETA1/reference/en-US/html_single/#d0e7527](http://docs.jboss.com/seam/2.1.0.BETA1/reference/en-US/html_single/#d0e7527)

它们基本上将 JSF 可以轻松使用的 Seam 组件中的所有 SQL/JPA 抽象出来。

如果您不想使用 Seam 和/或 JPA，您可以实现类似的模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T07:23:36.210

[Trinidad](http://myfaces.apache.org/trinidad/)有一个支持分页的表格组件，这可能会有所帮助。这并不理想，但与 Seam 配合得很好，正如 Pete Muir 的[Backing Trinidad's dataTable with Seam](http://pmuir.bleepbleep.org.uk/2007/04/backing-trinidads-datatable-with-seam.html)博客文章中所述。

如果您没有找到自己喜欢的 JSF 组件，则需要编写自己的逻辑来设置EJB-QL (JPA) 查询中的*限制*和*偏移参数。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T01:38:40.960

我们使用了 RichFaces 库 Datatable：[http ://livedemo.exadel.com/richfaces-demo/richfaces/dataTable.jsf?tab=usage](http://livedemo.exadel.com/richfaces-demo/richfaces/dataTable.jsf?tab=usage)

这很简单，如果您还没有使用 RichFaces，那么与 MyFaces 集成**非常**容易。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T19:25:22.777

如果您一次从 Web 服务返回所有结果并且无法将分页包含到实际的 Web 服务调用中，您可以尝试将项目列表设置为托管 bean 上的属性。然后，您可以将其连接到 Tomahawk 数据表上的“值”属性：

[http://myfaces.apache.org/tomahawk-project/tomahawk/tagdoc/t_dataTable.html](http://myfaces.apache.org/tomahawk-project/tomahawk/tagdoc/t_dataTable.html)

然后您可以使用 Tomahawk dataScroller 对存储在该属性中的项目列表进行分页。这是该组件的参考，它适用于 dataTable 组件：

[http://myfaces.apache.org/tomahawk-project/tomahawk/tagdoc/t_dataScroller.html](http://myfaces.apache.org/tomahawk-project/tomahawk/tagdoc/t_dataScroller.html)

您可以将其包含在 dataTable 的页眉/页脚方面或作为单独的组件（您需要在 dataScroller 的“for”属性中指定 dataTable 的 id。

您还可以对 dataTable 执行其他一些巧妙的操作，例如对每一行进行排序和切换详细信息，但是一旦您使基本分页工作正常，就可以实现这些操作。

希望有帮助！

# ms-access - MS Access - 后端文件和包含它的文件夹所需的最低权限是什么

> ID：69918
> 
> 赞同：2
> 
> 时间：2008-09-16T06:54:00.650
> 
> 标签：ms-access

我维护一个拆分为前端和后端文件的 ms-access 应用程序。前端文件位于用户计算机中。后端文件位于服务器的共享文件夹中。

所需的最低权限是多少？我可以在该文件夹中授予某些用户只读权限吗？（或以其他方式对他们隐藏）但仍使他们能够查看数据？

我应该如何为数据文件和包含它的文件夹提供最佳安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T08:09:59.720

不幸的是，必须创建、更新和删除锁定文件 (ldb)。如果权限不足的用户打开数据库，它将被所有其他用户锁定，因此您的所有用户都需要后端的读/写/删除权限。

编辑#1 每次打开数据库时都必须创建锁定文件，这包括通过链接表，并在数据库关闭时删除。如果锁定文件退出并且数据库关闭，则表明出现了问题。如果在权限不足的情况下运行压缩和修复，您也会遇到问题。

编辑#2 Access 的安全性是一个相当大的主题，在很大程度上取决于您的环境和要求，对于后端，它的范围从数据库密码（组织薄但非常适合大多数办公室）到 Access安全性，这可能很复杂，已在 2007 年被删除。这里是一个链接[http://support.microsoft.com/kb/207793](http://support.microsoft.com/kb/207793)，用于下载版本 < 2007 的 Microsoft Access 安全性常见问题解答。有关 2007 年安全性的信息可以可以在这里找到[http://www.microsoft.com/technet/security/guidance/clientsecurity/2007office/default.mspx](http://www.microsoft.com/technet/security/guidance/clientsecurity/2007office/default.mspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T17:28:40.470

许多人建议您必须向用户授予 FULL 权限，但事实并非如此。您只需要给他们 MODIFY 权限——您可以拒绝他们 DELETE 权限，这是一个好主意，因为它禁止用户“意外”删除您的数据文件。

确实，对于具有 DELETE 权限的用户，当该用户是最后一个退出数据库的用户时，LDB 文件将在退出时被删除。但是*不需要*删除 LDB 文件——事实上，在 Access 2 和之前的版本中，LDB 文件在退出时并*没有*被删除，而是留在原处。这通常没有缺点，但偶尔 LDB 文件会损坏并导致问题，确实需要删除并重新创建。

我所做的是拥有两类数据库用户（在特定于我的 Access 应用程序的自定义 NT 安全组中定义）——DBAdmins 和其他所有人。DBAdmins 拥有完整的权限，其他人只能更改。结果是，只要 DBAdmin 作为最终用户退出，LDB 就会被删除。这个设置效果很好，我已经使用了十多年了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T17:34:16.930

为您的后端使用隐藏共享实际上只是“默默无闻的安全性”，并不值得付出努力。老练的用户可以通过任意数量的方法来解决这个问题（取决于你如何锁定你的前端）：

*   查看 MSysObjects 表并找到表的 CONNECT 字符串，这将标识隐藏的共享。
*   在 VBE 的即时窗口中检查 CurrentDB.TableDefs("name of linked table").Connect 的结果

现在，如果您已经使用 Jet 用户级安全性正确保护了您的应用程序（并且*很*容易认为您已经保护了您的数据库并发现存在漏洞，仅仅是因为很容易忘记一些关键步骤这个过程），他们将无法做到这一点，但即使你有，Jet ULS 安全性也是可破解的（谷歌搜索它并找到破解软件很容易），所以并不是你应该 100% 依赖的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T06:56:09.723

是的 - 它解析为文件访问权限以及读/写。除非用户提供允许他们写入的凭据，或者您允许在文件上写入，否则您无法执行任何类型的数据更新内容（您将获得“操作需要可更新的查询”）。

运行查询只需要读取权限。

# database - 存储过程逆向工程

> ID：69923
> 
> 赞同：12
> 
> 时间：2008-09-16T06:54:50.943
> 
> 标签：database, stored-procedures, reverse-engineering, legacy

我们在工作中遇到了大量遗留存储过程的问题。你们是否推荐任何可以帮助更好地理解这些程序的工具？某种识别过程间依赖关系和/或过程与表依赖关系的逆向工程。可以是免费或商业工具。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-18T16:07:16.870

比“依赖跟踪器”更便宜的解决方案是数据字典表 sys.sql_dependencies，可以从数据字典中查询此数据。Oracle 有一个具有类似功能的数据字典视图，称为 DBA_DEPENDENCIES（加上等效的 USER_ 和 ALL_ 视图）。使用其他数据字典表 (sys.tables/DBA_TABLES) 等，您可以生成对象依赖关系报告。

如果您感觉特别热衷，可以使用递归查询（Oracle CONNECT BY 或 SQL Server 公用表表达式）来构建完整的对象依赖关系图。

这是 sys.sql_dependencies 上的递归 CTE 示例。它将为每个依赖项及其深度返回一个条目。对于每个依赖关系，项目可以出现不止一次，可能在不同的深度。我没有可用的 Oracle 实例来在 DBA_DEPENDENCIES 上构建 CONNECT BY 查询，因此欢迎任何具有编辑权限以及时间和专业知识的人注释或编辑此答案。

另请注意`sys.sql_dependencies`，您可以从中获取列引用`referenced_minor_id`。这可以用于（例如）确定哪些列在暂存区域的 ETL 存储过程中实际使用，其中来自源的 DB 表的副本具有比实际使用的列更多的列。

```
with dep_cte as (
select o2.object_id  as parent_id
      ,o2.name       as parent_name
      ,o1.object_id  as child_id
      ,o1.name       as child_name
      ,d.referenced_minor_id
      ,1 as hierarchy_level
  from sys.sql_dependencies d
  join sys.objects o1
    on o1.object_id = d.referenced_major_id
  join sys.objects o2
    on o2.object_id = d.object_id
 where d.referenced_minor_id in (0,1)
   and not exists
       (select 1
          from sys.sql_dependencies d2
         where d2.referenced_major_id = d.object_id)

union all

select o2.object_id  as parent_id
      ,o2.name       as parent_name
      ,o1.object_id  as child_id
      ,o1.name       as child_name
      ,d.referenced_minor_id
      ,d2.hierarchy_level + 1 as hierarchy_level
  from sys.sql_dependencies d
  join sys.objects o1
    on o1.object_id = d.referenced_major_id
  join sys.objects o2
    on o2.object_id = d.object_id
  join dep_cte d2
    on d.object_id = d2.child_id
 where d.referenced_minor_id in (0,1)
)

select *
  from dep_cte
 order by hierarchy_level 
```

我现在要向社区开放。可以方便地访问正在运行的 Oracle 实例的人在这里发布 CONNECT BY 递归查询吗？请注意，这是特定于 SQL 服务器的，并且问题所有者已经明确表示他正在使用 Oracle。我没有正在运行的 Oracle 实例来开发和测试任何东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T07:00:49.620

Redgate 有一个相当昂贵的产品，称为[SQL Dependency Tracker](http://www.red-gate.com/products/SQL_Dependency_Tracker/)，似乎可以满足要求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T07:07:51.070

我认为[rpetrich 提到的 Red Gate Dependency Tracker](https://stackoverflow.com/questions/69923/stored-procedures-reverse-engineering#69953)是一个不错的解决方案，它运行良好，并且 Red Gate 有 30 天的试用期（理想情况下，足够长的时间让您进行取证）。

我还会考虑隔离系统并运行**SQL Profiler，它将向您显示表上的所有 SQL 操作**。这通常是**构建序列图的一个很好的起点，或者您选择记录这些代码**。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T02:47:49.593

Redgate SQL 文档。生成的文档包括交叉引用的依赖信息。例如，对于每个表，它列出了引用该表的视图、存储过程、触发器等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T18:46:07.870

存储过程在哪个数据库中？甲骨文、SQL Server，还有别的吗？

**根据评论进行编辑：**鉴于您当时正在使用 Oracle，请查看[TOAD](http://www.quest.com/toad-for-oracle/)。我在其中使用了一个称为代码路线图的功能，它允许您以图形方式显示数据库中的 PL/SQL 相互依赖关系。它可以在纯代码模式下运行，显示运行时调用堆栈依赖关系，或者在代码加数据模式下，它还向您显示代码所触及的数据库对象（表、视图、触发器）。

*（注意 - 我是 TOAD 用户，推荐它并没有任何好处）*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-18T17:02:55.130

这不是真正的深入或彻底，但我认为如果您使用的是 MS SQL Server 或 Oracle（也许 Nigel 可以帮助提供 PL-SQL 示例）......Nigel 正在做一些事情。这只会深入 3 个依赖项，但可以修改为你需要的深度。这不是最漂亮的东西......但它的功能......

```
select 
    so.name + case when so.xtype='P' then ' (Stored Proc)' when so.xtype='U' then ' (Table)' when so.xtype='V' then ' (View)' else ' (Unknown)' end as EntityName, 
    so2.name + case when so2.xtype='P' then ' (Stored Proc)' when so2.xtype='U' then ' (Table)' when so2.xtype='V' then ' (View)' else ' (Unknown)' end as FirstDependancy,
    so3.name + case when so3.xtype='P' then ' (Stored Proc)' when so3.xtype='U' then ' (Table)' when so3.xtype='V' then ' (View)' else ' (Unknown)' end as SecondDependancy,
    so4.name + case when so4.xtype='P' then ' (Stored Proc)' when so4.xtype='U' then ' (Table)' when so4.xtype='V' then ' (View)' else ' (Unknown)' end as ThirdDependancy
from 
  sysdepends sd 
    inner join sysobjects as so on sd.id=so.id 
    left join sysobjects as so2 on sd.depid=so2.id
    left join sysdepends as sd2 on so2.id=sd2.id and so2.xtype not in ('S','PK','D')
    left join sysobjects as so3 on sd2.depid=so3.id and so3.xtype not in ('S','PK','D')
    left join sysdepends as sd3 on so3.id=sd3.id and so3.xtype not in ('S','PK','D')
    left join sysobjects as so4 on sd3.depid=so4.id and so4.xtype not in ('S','PK','D')
where so.xtype = 'P' and left(so.name,2)<>'dt'
group by so.name, so2.name, so3.name, so4.name, so.xtype, so2.xtype, so3.xtype, so4.xtype 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-10-27T22:33:48.063

[如何找到数据库对象的依赖链](http://beyondrelational.com/blogs/jacob/archive/2008/09/18/tsql-lab-9-how-to-find-the-dependency-chain-of-a-database-object.aspx)（MS SQL Server 2000(?)+） by Jacob Sebastian

> 每次他需要部署新报表或修改现有报表时，他都需要知道依赖于给定报表存储过程的数据库对象是什么。有时报告非常复杂，每个存储过程可能有几十个依赖对象，每个依赖对象可能依赖于其他几十个对象。
> 
> 他需要一种方法来递归地查找给定存储过程的所有依赖对象。我使用 CTE 编写了一个递归查询来实现这一点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-18T20:34:45.607

逆向工程的最佳工具是 APEX。太奇妙了。它甚至可以追踪到 .NET 程序集并告诉您在哪里使用了 proc。它是迄今为止同类产品中最深的产品。RedGate 有很好的其他工具，但在这种情况下没有。

# c++ - 获取当前鼠标坐标

> ID：69926
> 
> 赞同：0
> 
> 时间：2008-09-16T06:55:25.233
> 
> 标签：c++, winapi, mouse, lcd

我有一台 iMac，我希望能够在我睡觉时关闭显示器。唉，iMac 没有这个开关。我不想让 iMac 进入睡眠模式，我想写一个“暴露”之类的应用程序或服务，当鼠标放在屏幕的左上角时，显示器会进入睡眠状态。同样，如果我将鼠标移开，它就会回来。

有没有人在我需要查找的 Windows 和显示 API 中跟踪鼠标移动的经验。我只需要一些方向来开始。

干杯! 克里斯

* * *

我被要求澄清。对不起，如果我让任何人感到困惑。我正在通过 Bootcamp 运行 Windows Vista 32。我喜欢 Mac OSX 通过 Expose 提供的“热点”功能。我注意到除了按时间度量运行的电源管理外，在 Vista 中无法随意休眠显示器。

我想为此编写自己的工具。我可能是个贪吃的惩罚者，但我是个程序员，这是学习新东西的好借口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T06:59:23.710

在 Leopard 中，您只需转到“系统偏好设置”和“桌面和屏幕保护程序”即可。单击屏幕保护程序选项卡，单击“热角”，选择要更改的角，然后选择“睡眠显示”。那不行吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T09:04:50.460

如果它是旧的 CRT iMac，那么你不能在不关闭计算机的情况下关闭屏幕 - CRT 的对流用于冷却处理器！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T06:58:02.200

不是您真正想要的答案，但您不能通过省电选项和/或屏幕保护程序来做到这一点 - 可以将其设置为无。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T07:39:30.807

不能用显示器电源键吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T22:55:10.970

谢谢你的澄清，克里斯。我要重申：

1.  只需使用这样的预先存在的解决方案：http: [//www.southbaypc.com/HotCorners/](http://www.southbaypc.com/HotCorners/)（未经测试的任何做同样事情的东西都可以）。如果它允许您运行预先选择的屏幕保护程序，那么您需要做的就是......
2.  ...制作一个执行您想要的操作的exe（睡眠屏幕），然后将其重命名为whatever.scr [http://computer.howstuffworks.com/screensaver.htm/printable](http://computer.howstuffworks.com/screensaver.htm/printable)你有这个工作了吗？
3.  一旦你得到这个工作（并且你可以享受你想要的 OS X 热角功能的 Windows 版本）*然后*担心如何实现热角。您的 Win32 API 问题仍然是一个很好的问题，但就像您说的那样，您听起来像是想自己构建它。如果是这种情况，我会发布一个新问题“Windows Win32 API 低级鼠标跟踪中的热角”或类似的内容，然后问：“这些热角程序如何检测热角鼠标悬停事件？” 顺便说一句，我的兄弟使用低级 API 来移动鼠标光标并模拟点击，所以我知道您的要求可能是可能的。只是在所有这些讨论中，您的真正问题似乎都被禁止了。

# java - Swing GUI 与域逻辑通信的最佳方式？

> ID：69927
> 
> 赞同：7
> 
> 时间：2008-09-16T06:55:28.400
> 
> 标签：java, user-interface, swing

我在许多 POJO 中实现了一些域逻辑。我想编写一个 Swing 用户界面，以允许用户启动并查看各种域操作的结果。

UI 和域之间通信的最佳模式/框架/库是什么？这归结为：

*   能够将用户手势转换为域操作的 UI
*   域能够将状态/结果信息发送回 UI 以进行显示

我知道 MVC 是一个广泛的概念，并且已经摆弄了观察者模式（如果我理解正确的话，它的 Java 实现有一些缺点），但我想知道这个问题是否有公认的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T07:10:18.113

绝对是 MVC——就像这个[例子](http://www.leepoint.net/notes-java/GUI/structure/40mvc.html)一样，它清楚地把事情分开了。Swing 示例的问题在于，它们似乎显示 MVC 都在 Swing 内容中工作，这对我来说似乎不正确

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T15:16:10.037

**MVC**`pages`对于单个小部件来说非常棒，但是当你拥有`forms`大量小部件时它会变得有点不守规矩。

可能值得研究的一件事（我不认可它，我实际上并没有使用它，只是为我自己实现了非常相似的东西）是[Beans Binding Framework (JSR295](http://web.archive.org/web/20070618134019/https://beansbinding.dev.java.net/) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T07:00:19.183

我过去曾使用过观察者模式（使用 AspectJ 魔法）并取得了*一些*成功，但发现除非你小心，否则它很快就会变成一个集群......呃......轻弹？

它很快变得难以管理，最重要的是极难调试。

**编辑：**

为了稍微扩展我的答案，我们使用的是[SWT](http://en.wikipedia.org/wiki/Standard_Widget_Toolkit)，而不是 Swing，所以是 YMMV。我们基本上使用 AspectJ 来连接数据从 UI 组件到模型对象的传输。这些模型对象是愚蠢的 POJO。

实际的业务逻辑是通过使用 AspectJ '观察'模型对象并在它们发生变化时触发所需的事件来完成的。因此，如果您更改了文本框中的值，AspectJ 会触发并将该值复制到 POJO 中。如果 POJO 中的该字段上有一个用于业务逻辑的事件，则该事件将*触发*。如果该逻辑修改了任何 POJO（它可以），AspectJ 会注意到并将 POJO 中的值复制到 UI 组件中。

# wpf - WPF：组织结构图 TreeView 条件格式

> ID：69928
> 
> 赞同：2
> 
> 时间：2008-09-16T06:55:35.153
> 
> 标签：wpf, xaml

该公司具有传统的复杂组织结构，使用字母“n”而不是实际数字来定义级别的数量。我将尝试用等距字体表达我想要实现的结构：

```
 Alice
 ,--------|-------,------,------,
Bob      Fred    Jack   Kim    Lucy
 |        |      
Charlie  Greg    
Darren   Henry
Eric 
```

如您所见，它不是对称的，因为 Jack、Kim 和 Lucy 向 Alice 报告，但没有他们自己的报告。

使用包含 a和`TreeView`的a很[容易](http://www.codeproject.com/KB/WPF/CustomTreeViewLayout.aspx)，但是一旦有些人有 20 个其他人向他们报告，这可能会导致非常大！您也[可以使用](http://www.codeproject.com/KB/WPF/AdvancedCustomTreeViewLyt.aspx)来查看 a 是否有子级 ，但这与前面提到的上下文不同。*例如：我可以说 Fred 有报告，但不知道他们是否有自己的报告。*`ItemsPanel``StackPanel``Orientation="Horizontal"``TreeView` `Triggers``TreeViewItem``Property="TreeViewItem.HasItems"``ItemsPanel`

 *`TreeViewItems`那么，如果他们没有自己的孩子，你可以有条件地格式化为 Vertical 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T07:00:48.450

Josh Smith 有一篇关于 TreeView 的优秀 CodeProject 文章。[在这里](http://www.codeproject.com/KB/WPF/AdvancedCustomTreeViewLyt.aspx)阅读

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T04:04:00.560

我确实最终使用了链接文章中的提示，我已经阅读过但认为对我没有帮助。

它的核心发生在这里，在一个转换器中：

```
<ValueConversion(GetType(ItemsPresenter), GetType(Orientation))> _
Public Class ItemsPanelOrientationConverter
Implements IValueConverter

Public Function Convert(ByVal value As Object, ByVal targetType As System.Type, _
ByVal parameter As Object, ByVal culture As System.Globalization.CultureInfo) _
As Object Implements System.Windows.Data.IValueConverter.Convert

    'The 'value' argument should reference an ItemsPresenter.'
    Dim itemsPresenter As ItemsPresenter = TryCast(value, ItemsPresenter)
    If itemsPresenter Is Nothing Then
        Return Binding.DoNothing
    End If

    'The ItemsPresenter''s templated parent should be a TreeViewItem.'
    Dim item As TreeViewItem = TryCast(itemsPresenter.TemplatedParent, TreeViewItem)
    If item Is Nothing Then
        Return Binding.DoNothing
    End If

    For Each i As Object In item.Items
        Dim element As StaffMember = TryCast(i, StaffMember)
        If element.IsManager Then
            'If this element has children, then return Horizontal'
            Return Orientation.Horizontal
        End If
    Next

    'Must be a stub ItemPresenter'
    Return Orientation.Vertical

End Function 
```

这反过来又被我为 TreeView 创建的样式所消耗：

```
 <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate >
                <ItemsPanelTemplate.Resources>
                    <local:ItemsPanelOrientationConverter x:Key="conv" />
                </ItemsPanelTemplate.Resources>
                <StackPanel IsItemsHost="True" 
                            Orientation="{Binding   
                            RelativeSource={x:Static RelativeSource.TemplatedParent}, 
                            Converter={StaticResource conv}}" />
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter> 
```

# statistics - 隐马尔可夫模型

> ID：69930
> 
> 赞同：13
> 
> 时间：2008-09-16T06:56:13.517
> 
> 标签：statistics, state-machine, hidden-markov-models, markov-models

我想开始使用HMM，但不知道如何去做。这里的人可以给我一些基本的指示，在哪里看？

不仅仅是理论，我喜欢做很多实践。因此，我更喜欢资源，我可以在其中编写小代码片段来检查我的学习情况，而不仅仅是枯燥的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T06:59:34.677

您是否尝试过：Russel 和 Norvig 的人工智能：一种现代方法。

我意识到这在理论上很重要，但它也包含有用的代码示例，可用于帮助您的学习。

您还可以查看：[http](http://www.kanungo.com/software/software.html) ://www.kanungo.com/software/software.html了解 HMM 的 c 实现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T06:59:42.850

查看有关 HMM 的[Wikipedia 文章](http://en.wikipedia.org/wiki/Hidden_Markov_model#A_concrete_example)：在所有理论内容之后，它们有一个非常可靠的示例。如果您想对此进行一些练习，[Ruby Quiz](http://www.rubyquiz.com/quiz74.html)有一些很棒的马尔可夫模型实现，您可以尝试将其更改为 HMM。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-11-27T04:42:13.700

在我们的研究实验室中，我们通常使用[HMM 工具包](http://htk.eng.cam.ac.uk/)来开始 HMM 建模。不幸的是，它对重新分发有一些许可限制（基本上你不能重新分发软件，但你可以重新分发你用它训练过的模型），但是开始学习它们是如何工作的可能很有用。HMM Toolkit 提供的[HTK Book](http://htk.eng.cam.ac.uk/docs/docs.shtml)也是一本非常全面的 HMM 设计参考资料。

如果您想获得一些可能对训练 HMM 有用的数据，请查看[VoxForge](http://www.voxforge.org/)项目，您还可以在其中找到一些开源语音识别系统的链接，这些链接可能对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-12-07T09:14:51.697

提供斯坦福在线 AI 课程的精彩视频：参见第 11 单元。

[https://www.ai-class.com/course/video/videolecture/138](https://www.ai-class.com/course/video/videolecture/138)

# emacs - 在 Emacs 中以文本模式设置 4 空格缩进

> ID：69934
> 
> 赞同：169
> 
> 时间：2008-09-16T06:57:34.743
> 
> 标签：emacs, indentation

`TAB`在使用 main mode 按下缓冲区时，我无法让 Emacs 从 8 个空格制表符切换到 4 个空格制表符`text-mode`。我已将以下内容添加到我的`.emacs`：

```
(setq-default indent-tabs-mode nil)
(setq-default tab-width 4)

;;; And I have tried
(setq indent-tabs-mode nil)
(setq tab-width 4) 
```

无论我如何更改`.emacs`文件（或缓冲区的局部变量），`TAB`按钮总是做同样的事情。

1.  如果上面没有文字，缩进**8**个空格
2.  如果上一行有文字，则缩进到第二个单词的开头

尽管我很喜欢 Emacs，但它变得越来越烦人。当上一行没有文本时，有没有办法让 Emacs 至少缩进 4 个空格？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2009-11-30T12:03:59.897

## 简短的回答：

关键是告诉emacs在缩进时插入你想要的任何东西，这是通过改变indent-line-function来完成的。将其更改为插入一个制表符，然后将制表符更改为 4 个空格比将其更改为插入 4 个空格更容易。以下配置将解决您的问题：

```
(setq-default indent-tabs-mode nil)
(setq-default tab-width 4)
(setq indent-line-function 'insert-tab) 
```

## 解释：

从[主要模式控制的缩进@emacs手册](http://www.gnu.org/s/emacs/manual/html_node/elisp/Mode_002dSpecific-Indent.html#Mode_002dSpecific-Indent)：

> 每个主要模式的一个重要功能是为正在编辑的语言自定义键以正确缩进。
> 
> [...]
> 
> indent-line-function 变量是用于缩进当前行的函数（以及各种命令，例如调用 indent-region 时）。命令 indent-according-to-mode 只是调用这个函数。
> 
> [...]
> 
> 对于许多模式，默认值是相对缩进的。

来自 indent-relative @emacs 手册：

> Indent-relative Space out 到下一个非空行中的下一个缩进点。
> 
> [...]
> 
> 如果前一个非空行没有超出列点开始的缩进点，则改为执行“tab-to-tab-stop”。

只需将 indent-line-function 的值更改为 insert-tab 函数，并将制表符插入配置为 4 个空格。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-05-03T20:59:05.290

*更新：*从 Emacs 24.4 开始：

> `tab-stop-list`现在隐式扩展到无穷大。它的默认值更改为这意味着每列`nil`都有一个制表位。`tab-width`

这意味着不再需要按照`tab-stop-list`下面显示的方式进行设置，因为您可以将其设置为`nil`.

*原始答案如下...*

* * *

`(setq tab-stop-list 4 8 12 ................)`当`number-sequence`函数坐在那里等待使用时，总是让我有点痛苦。

```
(setq tab-stop-list (number-sequence 4 200 4)) 
```

或者

```
(defun my-generate-tab-stops (&optional width max)
  "Return a sequence suitable for `tab-stop-list'."
  (let* ((max-column (or max 200))
         (tab-width (or width tab-width))
         (count (/ max-column tab-width)))
    (number-sequence tab-width (* tab-width count) tab-width)))

(setq tab-width 4)
(setq tab-stop-list (my-generate-tab-stops)) 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2008-09-16T07:19:32.227

> 不要将变量`tab-width`与变量混淆`tab-stop-list`。前者用于文字`TAB`字符的显示。后者控制`TAB`在某些模式下按下字符时插入的字符。

-- [GNU Emacs 手册](https://www.gnu.org/software/emacs/manual/html_node/efaq/Changing-the-length-of-a-Tab.html)

```
(customize-variable (quote tab-stop-list)) 
```

或将*制表符列表*条目添加到*.emacs*文件中*的自定义设置变量：*

 *```
(custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(tab-stop-list (quote (4 8 12 16 20 24 28 32 36 40 44 48 52 56 60 64 68 72 76 80 84 88 92 96 100 104 108 112 116 120)))) 
```

编辑选项卡行为的另一种方法是使用 with `M-x edit-tab-stops`。

有关. [_](https://www.gnu.org/software/emacs/manual/html_node/emacs/Tab-Stops.html) _`edit-tab-stops`

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2008-09-16T08:23:05.553

您可能会发现按以下方式设置选项卡更容易：

```
M-x customize-group 
```

在`Customize group:`提示符处输入`indent`.

您将看到一个屏幕，您可以在其中设置所有缩进选项并为当前会话设置它们或为所有未来会话保存它们。

如果您这样做，您将需要[设置一个自定义文件](http://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Customizations.html)。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-01-23T04:55:33.280

```
(setq tab-width 4)
(setq tab-stop-list '(4 8 12 16 20 24 28 32 36 40 44 48 52 56 60 64 68 72 76 80))
(setq indent-tabs-mode nil) 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-04-21T04:28:48.550

```
(defun my-custom-settings-fn ()
  (setq indent-tabs-mode t)
  (setq tab-stop-list (number-sequence 2 200 2))
  (setq tab-width 2)
  (setq indent-line-function 'insert-tab))

(add-hook 'text-mode-hook 'my-custom-settings-fn) 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2013-04-25T09:15:35.043

```
(setq-default indent-tabs-mode nil)
(setq-default tab-width 4)
(setq indent-line-function 'insert-tab)
(setq c-default-style "linux") 
(setq c-basic-offset 4) 
(c-set-offset 'comment-intro 0) 
```

这也适用于 C++ 代码和里面的注释

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-04-12T00:05:45.140

此问题不是由缺少制表位引起的；是 emacs 有一个（新的？）选项卡方法，称为 indent-relative，它似乎旨在排列表格数据。TAB 键映射到 indent-for-tab-command 方法，该方法调用变量 indent-line-function 设置的任何方法，这是文本模式的相对缩进方法。我还没有想出一个好方法来覆盖 indent-line-function 变量（文本模式挂钩不起作用，所以它可能在模式挂钩运行后被重置？）但是一个简单的方法来摆脱这个行为是通过将 TAB 设置为更简单的 tab-to-tab-stop 方法来放弃 intent-for-tab-command 方法：

(define-key text-mode-map (kbd "TAB") 'tab-to-tab-stop)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-10-29T00:37:09.743

您可以将这些代码行添加到您的 .emacs 文件中。它为文本模式添加了一个钩子，以使用 insert-tab 而不是 indent-relative。

```
(custom-set-variables
 '(indent-line-function 'insert-tab)
 '(indent-tabs-mode t)
 '(tab-width 4))
(add-hook 'text-mode-hook
      (lambda() (setq indent-line-function 'insert-tab))) 
```

我希望它有所帮助。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2008-09-16T07:53:41.553

试试这个：

```
(add-hook 'text-mode-hook
  (function
   (lambda ()
     (setq tab-width 4)
     (define-key text-mode-map "\C-i" 'self-insert-command)
     ))) 
```

这将使 TAB 始终插入一个文字 TAB 字符，每 4 个字符带有制表位（但仅在文本模式下）。如果这不是您所要求的，请描述您希望看到的行为。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-08-21T01:21:20.137

只需用 c-set-style 更改样式对我来说就足够了。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-05-03T20:07:25.237

将此添加到您的 .emacs 文件中：

这会将选项卡显示的宽度设置为 2 个字符（将数字 2 更改为您想要的任何值）

```
(setq default-tab-width 2) 
```

要确保 emacs 实际上使用的是制表符而不是空格：

```
(global-set-key (kbd "TAB") 'self-insert-command) 
```

顺便说一句，在制表符上退格时，emacs 的默认设置是将其转换为空格，然后删除一个空格。这可能很烦人。如果你想让它只删除选项卡，你可以这样做：

```
(setq c-backspace-function 'backward-delete-char) 
```

享受！

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2017-03-16T17:39:24.757

自定义可以影响`(setq tab width 4)`，所以要么使用`setq-default`或让自定义知道你在做什么。我也遇到了类似于 OP 的问题，只用这个就解决了，不需要调整`tab-stop-list`或任何`insert`功能：

```
(custom-set-variables
 '(tab-width 4 't)
 ) 
```

发现在之后立即添加它很有用（来自 emacsWiki 的提示）：

```
(defvaralias 'c-basic-offset 'tab-width)
(defvaralias 'cperl-indent-level 'tab-width) 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-02-09T23:13:43.287

这是唯一可以防止标签被插入的解决方案，无需将标签序列或转换为空格。这两个似乎都足够了，但很浪费：

```
(setq-default
    indent-tabs-mode nil
    tab-width 4
    tab-stop-list (quote (4 8))
) 
```

请注意，`quote`需要两个数字才能工作（但不是更多！）。

此外，在大多数主要模式中（`Python`例如），缩进在 Emacs 中是自动的。如果您需要在自动缩进之外缩进，请使用：

`M`-`i`

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-06-29T19:45:44.150

直到我在 .emacs 文件中写了这个，最好的答案才起作用：

```
(global-set-key (kbd "TAB") 'self-insert-command) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-16T07:10:20.843

你有没有尝试过

```
(setq  tab-width  4) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-08-19T18:15:17.317

```
(setq-default tab-width 4)
(setq-default indent-tabs-mode nil) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-09-19T06:11:05.003

顺便说一句，对于**C-mode**，我添加**`(setq-default c-basic-offset 4)`**到 .emacs。有关详细信息，请参阅[http://www.emacswiki.org/emacs/IndentingC](http://www.emacswiki.org/emacs/IndentingC)。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-10-09T22:29:53.317

从我的初始化文件中，不同，因为我想要空格而不是制表符：

```
(add-hook 'sql-mode-hook
          （拉姆达（）
             （预测
               (setq-default tab-width 4)
               (setq indent-tabs-mode nil)
               (setq indent-line-function 'tab-to-tab-stop)
               （修改语法条目？_“w”）；现在 '_' 不被视为单词分隔符
               （修改语法条目？-“w”）；现在 '-' 不被视为单词分隔符
               )))

```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-04-14T20:48:52.880

修改[了这个答案](https://stackoverflow.com/a/16127986/13055097)，没有任何钩子：

```
(setq-default
  indent-tabs-mode t
  tab-stop-list (number-sequence 4 200 4)
  tab-width 4
  indent-line-function 'insert-tab) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-10-21T07:34:34.843

要在文本模式下按`Tab`确实缩进，然后按固定值制表符/间距（不按前一行字）

另见：缩进相对第一个缩进点，制表符宽度缩进制表符模式

```
(add-hook 'text-mode-hook
 (lambda()
   (progn
     (setq tab-always-indent nil) 
     ;(setq electric-indent-mode nil)
     (setq indent-line-function 
           (lambda()
             (indent-relative 't)   
             )
           ) 
     (setq tab-always-indent nil)
     ))) 
```

# postgresql - Solaris 10 上的 PostgreSQL DbLink 编译

> ID：69959
> 
> 赞同：1
> 
> 时间：2008-09-16T07:02:50.193
> 
> 标签：postgresql, dblink

在使用 Sun C 5.9 SunOS_sparc 2007/05/03 和 gmake 在 solaris 10 上成功构建 dblink 之后。

我运行 gmake installcheck 并得到以下输出：

```
========== running regression test queries        ==========

test dblink               ... FAILED

======================

 1 of 1 tests failed. 
```

可以在文件“./regression.diffs”中查看导致某些测试失败的差异。您在上面看到的测试摘要的副本保存在文件“./regression.out”中。

regression.diffs 文件中的第一个错误：

> psql:dblink.sql:11：错误：无法加载库“/apps/postgresql/lib/dblink.so”：ld.so.1：postgre s：致命：重定位错误：文件/apps/postgresql/lib/dblink .so：符号 PG_GETARG_TEXT_PP：未找到引用的符号

我正在使用最新的 dblink 源运行 postgreSQL 版本 8.2.4。

有没有人知道我需要做什么来解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T23:50:06.497

为了解决这个问题，我尝试使用 8.2 dblink 源，而不是最新版本。

您还需要确保使用 gnu make 而不是 sun make。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T14:59:07.363

它正在寻找的文件是否真的存在？是在那个位置吗？

这可能是我能想到的几件事之一：1）这个东西没有编译，因此不存在。2）它存在，但在其他地方，并且告诉它在哪里找到它的环境变量设置错误。3) 权限使得 postmaster 运行的 ID 不能遍历到该目录。

要检查它是否在其他地方：

```
find / -type f|grep dblink.so 
```

要检查权限：

```
su - 
su - postgres
less /apps/postgresql/ lib/dblink.so 
```

# python - 我可以在没有 POST 的情况下在 python 中实现 Web 用户身份验证系统吗？

> ID：69979
> 
> 赞同：1
> 
> 时间：2008-09-16T07:07:42.550
> 
> 标签：python, authentication, cgi

我的大学不支持 POST cgi 方法（我知道，这很疯狂），我希望能够拥有一个用户可以拥有用户名和密码并安全登录的系统。这甚至可能吗？

如果不是，您将如何使用 POST 进行操作？只是出于好奇。

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T07:10:40.033

实际上，您可以使用 GET 方法完成所有操作。但是，您需要对登录使用完整的质询响应协议。（您可以使用 javascript 在客户端进行散列。您只需要每次发送一个唯一的质询。）您还需要使用 SSL 来确保没有人可以看到穿过的字符串。

从某种意义上说，GET 和 POST 请求之间没有真正的安全差异，因为它们都以明文形式传递，在其他意义上和实践中...... GET 非常容易拦截，并且遍布大多数人的日志和您的网络浏览器的历史。:)

（或者按照其他海报的建议，使用完全不同的方法，如 HTTP auth、digest auth 或一些更高级别的身份验证方案，如 AD、LDAP、kerberos 或 shib。但是我有点假设如果你没有 POST 你不会'这些也没有。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T07:10:04.480

如果支持，您可以使用 HTTP 身份验证。

您必须添加 SSL，因为所有方法、POST、GET 和 HTTP Auth（好吧，除了 Digest HHTP 身份验证）都发送纯文本。

GET 基本上就像 POST 一样，它只是对您可以发送的数据量有一个限制，通常比 POST 小很多，并且语义差异使得从这个角度来看 GET 不是一个好的候选者，即使从技术上讲它们都是可以做到。

至于例子，你在用什么？Python有很多选择，比如cgi模块或者一些框架，比如Django、CherryPy等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T07:12:42.540

使用一点 JavaScript，您可以让客户端对输入的密码和服务器生成的 nonce 进行哈希处理，并在 HTTP GET 中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T07:44:03.837

一个不错的选择：[HTTP Digest 身份验证](http://advosys.ca/viewpoints/2006/08/http-digest-authentication/)

很难很好地完成，但可以选择：[使用 Javascript 进行客户端散列](http://blog.paranoidferret.com/index.php/2007/07/22/secure-authentication-without-ssl-using-javascript/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-15T09:25:06.327

在这种情况下，Javascript 是最好的选择。

随着对用户名和密码的请求，它发送一个唯一的随机字符串。然后，您可以使用 javascript md5 库通过组合随机字符串和密码 [pwhash = md5(randomstring+password)] 来生成散列密码。然后，javascript 实例化对*[http://SERVER/login.cgi?username=TheUsername&random=RANDOMSTRING&pwhash=0123456789abcdef0123456789abcdef的调用](http://SERVER/login.cgi?username=TheUsername&random=RANDOMSTRING&pwhash=0123456789abcdef0123456789abcdef)*

然后服务器必须做两件事：检查随机字符串是否曾经被使用过，如果有，则拒绝请求。（对安全**非常重要）**

查找用户名的明文密码，然后执行 md5(randomstring+password)。如果这与用户在 URL 中作为 pwash 提供的内容相匹配，那么您就知道它是用户。

检查随机字符串是否曾经被使用过的原因是为了阻止重复攻击。如果有人能够看到网络流量或浏览器历史记录或日志，那么他们可以简单地使用相同的 URL 再次登录，而他们是否知道原始密码并不重要。

我还建议将“Pragma: no-cache”和“Cache-Control: no-cache”放在 CGI 脚本返回的标头的顶部，这样经过身份验证的会话就不会存储在浏览器或您的 ISP 网络缓存中.

更安全的解决方案是使用适当的加密和挑战响应。你告诉服务器你的用户名，服务器发回一个挑战（一些用你的密码加密的随机字符串），然后你告诉服务器随机字符串是什么。如果您能够告诉服务器，那么显然您拥有密码并且您就是您所说的那个人！Kerberos 就是这样做的，但要小心得多，以防止各种攻击。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-16T07:19:07.017

安全登录是非常主观的。完全“安全”并不容易实现（如果可能的话……值得商榷）。但是，您可以靠近。

如果 POST 不是一个选项，也许您可​​以使用目录安全方法，例如 .htaccess 或 windows 身份验证，具体取决于您所在的系统。

以上两种方法都会为您提供允许输入用户名和密码的弹出窗口。

要使用 POST 作为发送登录凭据的方法，您只需使用带有 method="post" 的 HTML 表单并使用 $_POST['varname'] 方法从 PHP 或 ASP 页面检索信息在 PHP 或 ASP 中的 request.form("varname") 方法中。例如，从 PHP 或 ASP 页面中，您可以在用户数据库中进行查找，以查看该用户名/密码组合是否存在，如果存在，则将它们重定向到适当的页面。

作为参考，HTML/ASP 部分使用[http://www.w3schools.com/ASP/showasp.asp?filename=demo_simpleform](http://www.w3schools.com/ASP/showasp.asp?filename=demo_simpleform)

# firefox - 编写用于解析自定义客户端语言的 Firefox 插件

> ID：69982
> 
> 赞同：6
> 
> 时间：2008-09-16T07:08:05.827
> 
> 标签：firefox

我对 JavaScript 以外的客户端语言有一个想法，我想研究开发一个 Firefox 插件，该插件可以处理页面中包含这种新语言的内容，例如 <script type="newscript" src="path /script.ns" />，就像它是本机支持的语言一样。该插件将完成所有语言解析，并且理想情况下能够像 JavaScript 一样在浏览器以及网页中的 html 和 css 上执行所有操作。

我做了一堆谷歌搜索，找到了一些关于编写基本 Firefox 插件的文章，但没有比这更复杂的了。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T08:01:42.687

如果我了解您想要做什么，您需要编写一个 Gecko 插件。通过插件，您将能够注册自己的 MIME 类型，然后操作 Javascript 和 DOM。

这意味着您需要在页面上包含一个`<object />`or`<embed />`标记来加载您的插件，但是您可以查找`<script type="application/x-yourtype" />`、获取该脚本标记的 innerText 并使用您的插件对其进行解析。

正如 Nickolay 所建议的那样，替代方法是使用浏览器当前支持的任何内容或创建浏览器的自定义版本。Daniel Spiewak 关于使用 Java 小程序（或 Flash 小程序也可以）的建议也是有效的。

您需要的信息可在 Mozilla 的开发者网站上找到：

*   [Gecko 插件 API 参考](http://developer.mozilla.org/En/Gecko_Plugin_API_Reference)
*   [插件基础](http://developer.mozilla.org/En/Gecko_Plugin_API_Reference:Plug-in_Basics)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T08:14:34.170

一个有趣的想法。请注意，您实际上不需要编写特定于浏览器的插件来执行此操作。有些[人已经尝试](http://almaer.com/blog/running-ruby-in-the-browser-via-script-typetextruby)在 Applet 中使用 JRuby 来执行嵌入在`<script type="text/ruby">`. 这样的解决方案在启动时可能会更慢（由于加载整个 JVM 实例的开销），但从长远来看（跨浏览器）会更加灵活。此外，在 JVM 语言中构建自定义语言解释器比尝试将其硬塞到 Gecko 中要容易一些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T09:25:12.003

[@Nathan de Vries](https://stackoverflow.com/questions/69982/writing-a-firefox-plugin-for-parsing-a-custom-client-side-language#70239)：不，实际上，您建议的 NPAPI 插件不允许实现对`<script type=...>`.

OP：这并不容易，但请寻找 PyDOM 和 PyXPCOM - Python 的语言绑定。前者完全符合您的要求 - 对于 Python，但我不确定它的当前状态。无论如何，您很可能需要创建自己的 Firefox 版本来支持其他脚本类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T07:37:59.420

您真的想将您的页面绑定到您自己的自定义脚本语言吗？或者你只是想用不是 javascript 的东西来编写你的客户端代码？如果后者尝试[MileScript](http://milescript.org/)、[Haxe](http://haxe.org/)或[Google Web Toolkit](http://code.google.com/webtoolkit/)

# vim - vim 中的制表符和空格

> ID：69998
> 
> 赞同：73
> 
> 时间：2008-09-16T07:11:20.077
> 
> 标签：vim, vi

当自动缩进打开时，如何防止vim用制表符替换空格？

一个例子：如果我在行的开头有两个制表符和 7 个空格`tabstop=3`，并且我按 Enter 键，下一行的开头有四个制表符和 1 个空格，但我不希望这样......

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2008-09-16T07:23:38.113

根本不使用制表符也许是个好主意。

```
:set expandtab 
```

如果要将文件中的所有选项卡替换为 3 个空格（看起来与 非常相似`tabstop=3`）：

```
:%s/^I/   / 
```

（人物在`^I`哪里`TAB`）

从 VIM 在线帮助：

```
'tabstop' 'ts'      number  (default 8)
        local to buffer
Number of spaces that a <Tab> in the file counts for.  Also see
|:retab| command, and 'softtabstop' option.

Note: Setting 'tabstop' to any other value than 8 can make your file
appear wrong in many places (e.g., when printing it).

There are four main ways to use tabs in Vim:
1\. Always keep 'tabstop' at 8, set 'softtabstop' and 'shiftwidth' to 4
   (or 3 or whatever you prefer) and use 'noexpandtab'.  Then Vim
   will use a mix of tabs and spaces, but typing <Tab> and <BS> will
   behave like a tab appears every 4 (or 3) characters.
2\. Set 'tabstop' and 'shiftwidth' to whatever you prefer and use
   'expandtab'.  This way you will always insert spaces.  The
   formatting will never be messed up when 'tabstop' is changed.
3\. Set 'tabstop' and 'shiftwidth' to whatever you prefer and use a
   |modeline| to set these values when editing the file again.  Only
   works when using Vim to edit the file.
4\. Always set 'tabstop' and 'shiftwidth' to the same value, and
   'noexpandtab'.  This should then work (for initial indents only)
   for any tabstop setting that people use.  It might be nice to have
   tabs after the first non-blank inserted as spaces if you do this
   though.  Otherwise aligned comments will be wrong when 'tabstop' is
   changed. 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2011-04-26T13:20:11.563

您可以将所有转换`TAB`为`SPACE`

```
:set et
:ret! 
```

或全部转换`SPACE`为`TAB`

```
:set et!
:ret! 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2008-09-16T11:35:56.777

> 我想要的只是自动缩进的行具有与前一行完全相同的缩进字符。

# [`:help copyindent`](http://www.vim.org/htmldoc/options.html#%27copyindent%27)

> ## ['copyindent'](http://www.vim.org/htmldoc/options.html#%27copyindent%27) ['ci'](http://www.vim.org/htmldoc/options.html#%27ci%27) [布尔值](http://www.vim.org/htmldoc/options.html#boolean) （默认关闭）；本地缓冲；{Vi 无此功能}
> 
> 自动缩进新行时复制现有行缩进的结构。通常，新缩进由一系列制表符后跟空格重建（除非启用了['expandtab'](http://www.vim.org/htmldoc/options.html#%27expandtab%27)，在这种情况下只使用空格）。启用此选项会使新行复制用于在现有行上缩进的任何字符。如果新缩进大于现有行，则以正常方式填充剩余空间。
> 
> 注意：设置['compatible'时，](http://www.vim.org/htmldoc/options.html#%27compatible%27) ['copyindent'](http://www.vim.org/htmldoc/options.html#%27copyindent%27)会被重置。 另请参见['preserveindent'](http://www.vim.org/htmldoc/options.html#%27preserveindent%27)。

# [`:help preserveindent`](http://www.vim.org/htmldoc/options.html#%27preserveindent%27)

> ## ['preserveindent'](http://www.vim.org/htmldoc/options.html#%27preserveindent%27) ['pi'](http://www.vim.org/htmldoc/options.html#%27pi%27) [布尔值](http://www.vim.org/htmldoc/options.html#boolean) （默认关闭）；本地缓冲；{Vi 无此功能}
> 
> 更改当前行的缩进时，尽可能多地保留缩进结构。通常缩进被一系列制表符替换，后面跟着空格（除非启用了['expandtab'](http://www.vim.org/htmldoc/options.html#%27expandtab%27)，在这种情况下只使用空格）。启用此选项意味着缩进将保留尽可能多的现有字符以进行缩进，并且仅根据需要添加额外的制表符或空格。
> 
> 注意：当多次使用“>>”时，缩进是制表符和空格的混合。你可能不喜欢这个。
> 注意：设置['compatible'时，](http://www.vim.org/htmldoc/options.html#%27compatible%27) ['preserveindent'](http://www.vim.org/htmldoc/options.html#%27preserveindent%27)会被重置。 另见['copyindent'](http://www.vim.org/htmldoc/options.html#%27copyindent%27)。 使用 :retab 清理空白。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2008-09-16T07:24:37.863

这是我的一部分`.vimrc`：

```
set autoindent
set expandtab
set softtabstop=4
set shiftwidth=4 
```

这对我很有效，因为我绝对不希望我的源代码中有标签。从你的问题看来，你确实想在下一行保留两个制表符和七个空格，我不确定有没有办法教 vim 来适应这种风格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T07:20:46.403

[也许这个底部可以帮助你？](http://www.jwz.org/doc/tabs-vs-spaces.html)

> 标准 vi 按字面意思解释 tab 键，但有一些流行的 vi 派生替代方案更智能，例如 vim。要让 vim 将 tab 解释为 ``indent'' 命令而不是 insert-a-tab 命令，请执行以下操作：
> 
> ```
> set softtabstop=2 
> ```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-01T18:50:37.553

如果要根据 'ts' 的设置将所有制表符替换为空格，可以使用 :retab。它也可以做相反的事情。***************`*********