# StackOverflow 问答 11007000-11007999

# java - 我正在尝试在 java 中使用 SimpleDateFormat 日期

> ID：11007000
> 
> 赞同：0
> 
> 时间：2012-06-13T01:15:31.757
> 
> 标签：java, time, simpledateformat

我正在尝试通过解析日期然后对其进行格式化来格式化它，但它不起作用。

它显示解析异常

```
public java.util.Date convertFormat(String DateTimeForm) 
                    throws ParseException {
 DateTimeForm="2012-06-01 10:00 PM";
 DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd hh:mm aaa");
 java.util.Date FCDate = (java.util.Date) formatter.parse(DateTimeForm);

 return (java.util.Date) FCDate;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:27:28.697

这在我的机器上运行良好。我没有改变任何重要的东西。

```
 DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd hh:mm aaa"); 
    Date date = null;
    try {
        date = formatter.parse("2012-06-01 10:00 PM");
    } catch (ParseException ex) {
        // Intentionally empty. Failed parse causes date == null. 
    }
    System.out.print(date); 
```

印刷

```
 Fri Jun 01 22:00:00 EDT 2012 
```

Java 文档说数字都是独立于语言环境的，但不是 AM/PM。例如，如果您`Locale.JAPAN`在格式化程序构造中指定，代码将失败。指定`Local.US`以保证 AM/PM 始终有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:29:19.840

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd hh:mm aaa");
try {
    Date date = formatter.parse("2012-06-01 10:00 PM");
    System.out.println(date.toString());
    } catch (ParseException e) {
        e.printStackTrace();
    } 
```

没有改变任何东西，但它仍然有效。

```
Fri Jun 01 22:00:00 CDT 2012 
```

# php - codeigniter：如何处理错误 url 中不需要的结果？

> ID：11007002
> 
> 赞同：1
> 
> 时间：2012-06-13T01:15:52.957
> 
> 标签：php, codeigniter

我是一名新的 CI 开发人员，在一个网站中处理安全问题。

我有一个像这样的网址：

```
http://myweburl/Everything/gov/2 
```

其中'2'表示查询db的参数。

这是我的问题：如果有人浏览以下网址：

```
http://myweburl/Everything/gov/2/order.txt 
```

实际上网址中没有任何内容，但是..他会得到一个空的结果页面。（回复200 OK）

这不是我想要的。我希望他会收到 404 错误或其他信息来告诉用户 url 中没有任何内容。

谁能给我一些线索如何实现我的目标？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:21:26.417

基本上，如果它们是 URL 中代表查询参数的正确数量的 URI 段，则您只想显示一个有效页面。

`URI segments`在调用任何其他方法之前，您应该检查作为预处理的数量。这样您就可以确定 URL 中实际上只有 1 个段

如果您发现您`URL`的[.](http://codeigniter.com/user_guide/general/errors.html)

您可以检查 URL 中正确的段数，如果不是您想要的，则调用该`show_404()`方法。

在您发布的示例 URL: `http://myweburl/Everything/gov/2/order.txt`中，实际上有 4 个段。

```
 // from the docs http://codeigniter.com/user_guide/libraries/uri.html

     $total_segments = $this->uri->total_segments();

    // 3 segments would be the max if this is your url:
    // http://myweburl/Everything/gov/2/order.txt (this url contains 4 segments)
    //                 ^controller/function/uri_segment
    // this means that there are 3 segments in your URL
    // you don't want to have more than 3, so check for that
    // with the total_segments() function

     if($total_segments > 3)

     {
           $valid = false;
           show_404();

     }

     else 

     {

          $valid = true;

     }

     if($valid) 

     {

     // process data as usual

     } 
```

# java - 检查字符串是否包含 Java/Android 中的 URL 的最佳方法是什么？

> ID：11007008
> 
> 赞同：28
> 
> 时间：2012-06-13T01:16:27.077
> 
> 标签：java, android, string

检查字符串是否包含 Java/Android 中的 URL 的最佳方法是什么？最好的方法是检查字符串是否包含 |.com | .net | .org | .info | .一切|？或者有更好的方法吗？

该 url 在 Android 中输入到 EditText 中，它可以是粘贴的 url，也可以是手动输入的 url，用户不想输入 http://... 我正在开发一个 URL 缩短应用程序.

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-13T03:50:27.637

最好的方法是使用正则表达式，如下所示：

```
public static final String URL_REGEX = "^((https?|ftp)://|(www|ftp)\\.)?[a-z0-9-]+(\\.[a-z0-9-]+)+([/?].*)?$";

Pattern p = Pattern.compile(URL_REGEX);
Matcher m = p.matcher("example.com");//replace with string to compare
if(m.find()) {
    System.out.println("String contains URL");
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-13T01:53:49.173

这可以简单地通过构造函数周围的 try catch 来完成（无论哪种方式都是必要的）。

```
String inputUrl = getInput();
if (!inputUrl.contains("http://"))
    inputUrl = "http://" + inputUrl;

URL url;
try {
    url = new URL(inputUrl);
} catch (MalformedURLException e) {
    Log.v("myApp", "bad url entered");
}
if (url == null)
    userEnteredBadUrl();
else
    continue(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-22T02:54:52.047

环顾四周后，我试图通过删除 try-catch 块来改进 Zaid 的答案。此外，此解决方案在使用正则表达式时可识别更多模式。

所以，首先得到这个模式：

```
// Pattern for recognizing a URL, based off RFC 3986
private static final Pattern urlPattern = Pattern.compile(
    "(?:^|[\\W])((ht|f)tp(s?):\\/\\/|www\\.)"
            + "(([\\w\\-]+\\.){1,}?([\\w\\-.~]+\\/?)*"
            + "[\\p{Alnum}.,%_=?&#\\-+()\\[\\]\\*$~@!:/{};']*)",
    Pattern.CASE_INSENSITIVE | Pattern.MULTILINE | Pattern.DOTALL); 
```

然后，使用这个方法（假设`str`是你的字符串）：

```
 // separate input by spaces ( URLs don't have spaces )
    String [] parts = str.split("\\s+");

    // get every part
    for( String item : parts ) {
        if(urlPattern.matcher(item).matches()) { 
            //it's a good url
            System.out.print("<a href=\"" + item + "\">"+ item + "</a> " );                
        } else {
           // it isn't a url
            System.out.print(item + " ");    
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-18T15:27:09.767

根据 Enkk 的回答，我提出了我的解决方案：

```
public static boolean containsLink(String input) {
    boolean result = false;

    String[] parts = input.split("\\s+");

    for (String item : parts) {
        if (android.util.Patterns.WEB_URL.matcher(item).matches()) {
            result = true;
            break;
        }
    }

    return result;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-10T10:48:13.017

老问题，但发现[了这个](http://developer.android.com/reference/android/webkit/URLUtil.html)，所以我认为分享它可能很有用。应该对安卓有帮助...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T01:53:07.067

我将首先使用 java.util.Scanner 在用户输入中查找候选 URL，使用一种非常愚蠢的模式，该模式会产生误报，但不会产生误报。然后，使用类似于@ZedScio 提供的答案来过滤它们。例如，

```
Pattern p = Pattern.compile("[^.]+[.][^.]+");
Scanner scanner = new Scanner("Hey Dave, I found this great site called blah.com you should visit it");
while (scanner.hasNext()) {
    if (scanner.hasNext(p)) {
        String possibleUrl = scanner.next(p);
        if (!possibleUrl.contains("://")) {
            possibleUrl = "http://" + possibleUrl;
        }

        try {
            URL url = new URL(possibleUrl);
            doSomethingWith(url);
        } catch (MalformedURLException e) {
            continue;
        }
    } else {
        scanner.next();
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-28T14:20:57.537

如果您不想尝试正则表达式并尝试测试方法，您可以使用 Apache Commons Library 并验证给定字符串是否为 URL/超链接。下面是示例。

请注意：此示例用于检测给定文本作为“整体”是否为 URL。对于可能包含常规文本和 URL 组合的文本，可能必须执行额外的步骤，即根据空格拆分字符串并循环遍历数组并验证每个数组项。

摇篮依赖：

```
implementation 'commons-validator:commons-validator:1.6' 
```

代码：

```
import org.apache.commons.validator.routines.UrlValidator;

// Using the default constructor of UrlValidator class
public boolean URLValidator(String s) {
    UrlValidator urlValidator = new UrlValidator();
    return urlValidator.isValid(s);
}

// Passing a scheme set to the constructor
public boolean URLValidator(String s) {
    String[] schemes = {"http","https"}; // add 'ftp' is you need
    UrlValidator urlValidator = new UrlValidator(schemes);
    return urlValidator.isValid(s);
}

// Passing a Scheme set and set of Options to the constructor
public boolean URLValidator(String s) {
    String[] schemes = {"http","https"}; // add 'ftp' is you need. Providing no Scheme will validate for http, https and ftp
    long options = UrlValidator.ALLOW_ALL_SCHEMES + UrlValidator.ALLOW_2_SLASHES + UrlValidator.NO_FRAGMENTS;
    UrlValidator urlValidator = new UrlValidator(schemes, options);
    return urlValidator.isValid(s);
}

// Possible Options are:
// ALLOW_ALL_SCHEMES
// ALLOW_2_SLASHES
// NO_FRAGMENTS
// ALLOW_LOCAL_URLS 
```

要使用多个选项，只需使用“+”运算符添加它们

如果您在使用 Apache Commons 库时需要在成绩中排除项目级别或传递依赖项，您可能需要执行以下操作（从列表中删除所需的任何内容）：

```
implementation 'commons-validator:commons-validator:1.6' {
    exclude group: 'commons-logging'
    exclude group: 'commons-collections'
    exclude group: 'commons-digester'
    exclude group: 'commons-beanutils'
} 
```

有关更多信息，该链接可能会提供一些详细信息。

[http://commons.apache.org/proper/commons-validator/dependencies.html](http://commons.apache.org/proper/commons-validator/dependencies.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-30T19:52:21.177

您需要使用[URLUtil](https://developer.android.com/reference/android/webkit/URLUtil) `isNetworkUrl(url)`或`isValidUrl(url)`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-10T07:29:43.223

这个功能对我有用

```
private boolean containsURL(String content){
    String REGEX = "\\b(https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]";
    Pattern p = Pattern.compile(REGEX,Pattern.CASE_INSENSITIVE);
    Matcher m = p.matcher(content);
    return m.find();
} 
```

调用这个函数

```
boolean isContain = containsURL("Pass your string here...");
Log.d("Result", String.valueOf(isContain)); 
```

注意：- 我已经测试了包含单个 url 的字符串

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-01T10:53:26.710

```
public boolean isURL(String text) {
    return text.length() > 3 && text.contains(".")
            && text.toCharArray()[text.length() - 1] != '.' && text.toCharArray()[text.length() - 2] != '.'
            && !text.contains(" ") && !text.contains("\n");
} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2016-05-19T08:36:34.127

最好的方法是将属性自动链接到您的文本视图，Android 将识别、更改外观并使可点击的链接成为字符串内的任何位置。

机器人：自动链接=“网络”

# sql - 如果返回值为 null，postgresql 返回 0

> ID：11007009
> 
> 赞同：128
> 
> 时间：2012-06-13T01:17:00.353
> 
> 标签：sql, postgresql

我有一个返回 avg(price) 的查询

```
 select avg(price)
  from(
      select *, cume_dist() OVER (ORDER BY price desc) from web_price_scan
      where listing_Type='AARM'
        and u_kbalikepartnumbers_id = 1000307
        and (EXTRACT(Day FROM (Now()-dateEnded)))*24 < 48
        and price>( select avg(price)* 0.50
                    from(select *, cume_dist() OVER (ORDER BY price desc)
                         from web_price_scan
                         where listing_Type='AARM'
                           and u_kbalikepartnumbers_id = 1000307
                           and (EXTRACT(Day FROM (Now()-dateEnded)))*24 < 48
                        )g
                   where cume_dist < 0.50
                 )
        and price<( select avg(price)*2
                    from( select *, cume_dist() OVER (ORDER BY price desc)
                          from web_price_scan
                          where listing_Type='AARM'
                            and u_kbalikepartnumbers_id = 1000307
                            and (EXTRACT(Day FROM (Now()-dateEnded)))*24 < 48
                        )d
                    where cume_dist < 0.50)
     )s

  having count(*) > 5 
```

如果没有可用值，如何使其返回 0？

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-06-13T01:23:43.933

使用[合并](http://www.postgresql.org/docs/current/static/functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL)

```
COALESCE(value [, ...]) 
```

> ```
> The COALESCE function returns the first of its arguments that is not null.  
> Null is returned only if all arguments are null. It is often
> used to substitute a default value for null values when data is
> retrieved for display. 
> ```

**编辑**

`COALESCE`这是您的查询的示例：

```
SELECT AVG( price )
FROM(
      SELECT *, cume_dist() OVER ( ORDER BY price DESC ) FROM web_price_scan
      WHERE listing_Type = 'AARM'
        AND u_kbalikepartnumbers_id = 1000307
        AND ( EXTRACT( DAY FROM ( NOW() - dateEnded ) ) ) * 24 < 48
        AND COALESCE( price, 0 ) > ( SELECT AVG( COALESCE( price, 0 ) )* 0.50
                                     FROM ( SELECT *, cume_dist() OVER ( ORDER BY price DESC )
                                           FROM web_price_scan
                                           WHERE listing_Type='AARM'
                                             AND u_kbalikepartnumbers_id = 1000307
                                             AND ( EXTRACT( DAY FROM ( NOW() - dateEnded ) ) ) * 24 < 48
                                         ) g
                                    WHERE cume_dist < 0.50
                                  )
        AND COALESCE( price, 0 ) < ( SELECT AVG( COALESCE( price, 0 ) ) *2
                                     FROM( SELECT *, cume_dist() OVER ( ORDER BY price desc )
                                           FROM web_price_scan
                                           WHERE listing_Type='AARM'
                                             AND u_kbalikepartnumbers_id = 1000307
                                             AND ( EXTRACT( DAY FROM ( NOW() - dateEnded ) ) ) * 24 < 48
                                         ) d
                                     WHERE cume_dist < 0.50)
     )s
HAVING COUNT(*) > 5 
```

恕我直言`COALESCE`，不应与 with 一起使用，`AVG`因为它会修改值。`NULL`意味着未知，仅此而已。这不像在`SUM`. 在此示例中，如果我们替换`AVG`为`SUM`，则结果不会失真。将 0 添加到总和不会伤害任何人，但计算未知值的平均值为 0，您不会得到真正的平均值。

在这种情况下，我会添加`price IS NOT NULL`in`WHERE`子句来避免这些未知值。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-06-13T06:38:22.030

*（添加此答案是为了为问题提供更短和更通用的示例 - 未在原始问题中包含所有特定于案例的详细信息）。*

* * *

这里有两个不同的“问题”，第一个是表或子查询是否没有行，第二个是查询中是否有 NULL 值。

对于我测试过的所有版本，postgres 和 mysql 在平均时将忽略所有 NULL 值，如果没有什么可以平均，它将返回 NULL。这通常是有道理的，因为 NULL 被认为是“未知的”。如果你想覆盖它，你可以使用 coalesce （正如 Luc M 所建议的那样）。

```
$ create table foo (bar int);
CREATE TABLE

$ select avg(bar) from foo;
 avg 
-----

(1 row)

$ select coalesce(avg(bar), 0) from foo;
 coalesce 
----------
        0
(1 row)

$ insert into foo values (3);
INSERT 0 1
$ insert into foo values (9);
INSERT 0 1
$ insert into foo values (NULL);
INSERT 0 1
$ select coalesce(avg(bar), 0) from foo;
      coalesce      
--------------------
 6.0000000000000000
(1 row) 
```

当然，“from foo”可以替换为“from (... any complex logic here...) as foo”

现在，表中的 NULL 行是否应该计为 0？然后必须在 avg 调用中使用 coalesce。

```
$ select coalesce(avg(coalesce(bar, 0)), 0) from foo;
      coalesce      
--------------------
 4.0000000000000000
(1 row) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-22T06:35:17.000

我可以想到两种方法来实现这一点：

*   **如果空（）：**

    如果表达式为 NULL，则 IFNULL() 函数返回指定值。如果表达式为 NOT NULL，则该函数返回表达式。

句法：

> `IFNULL(expression, alt_value)`

带有查询的 IFNULL() 示例：

```
SELECT AVG( price )
FROM(
      SELECT *, cume_dist() OVER ( ORDER BY price DESC ) FROM web_price_scan
      WHERE listing_Type = 'AARM'
        AND u_kbalikepartnumbers_id = 1000307
        AND ( EXTRACT( DAY FROM ( NOW() - dateEnded ) ) ) * 24 < 48
        AND IFNULL( price, 0 ) > ( SELECT AVG( IFNULL( price, 0 ) )* 0.50
                                     FROM ( SELECT *, cume_dist() OVER ( ORDER BY price DESC )
                                           FROM web_price_scan
                                           WHERE listing_Type='AARM'
                                             AND u_kbalikepartnumbers_id = 1000307
                                             AND ( EXTRACT( DAY FROM ( NOW() - dateEnded ) ) ) * 24 < 48
                                         ) g
                                    WHERE cume_dist < 0.50
                                  )
        AND IFNULL( price, 0 ) < ( SELECT AVG( IFNULL( price, 0 ) ) *2
                                     FROM( SELECT *, cume_dist() OVER ( ORDER BY price desc )
                                           FROM web_price_scan
                                           WHERE listing_Type='AARM'
                                             AND u_kbalikepartnumbers_id = 1000307
                                             AND ( EXTRACT( DAY FROM ( NOW() - dateEnded ) ) ) * 24 < 48
                                         ) d
                                     WHERE cume_dist < 0.50)
     )s
HAVING COUNT(*) > 5 
```

*   **合并（）**

    COALESCE() 函数返回列表中的第一个非空值。

句法：

> `COALESCE(val1, val2, ...., val_n)`

带有查询的 COALESCE() 示例：

```
SELECT AVG( price )
FROM(
      SELECT *, cume_dist() OVER ( ORDER BY price DESC ) FROM web_price_scan
      WHERE listing_Type = 'AARM'
        AND u_kbalikepartnumbers_id = 1000307
        AND ( EXTRACT( DAY FROM ( NOW() - dateEnded ) ) ) * 24 < 48
        AND COALESCE( price, 0 ) > ( SELECT AVG( COALESCE( price, 0 ) )* 0.50
                                     FROM ( SELECT *, cume_dist() OVER ( ORDER BY price DESC )
                                           FROM web_price_scan
                                           WHERE listing_Type='AARM'
                                             AND u_kbalikepartnumbers_id = 1000307
                                             AND ( EXTRACT( DAY FROM ( NOW() - dateEnded ) ) ) * 24 < 48
                                         ) g
                                    WHERE cume_dist < 0.50
                                  )
        AND COALESCE( price, 0 ) < ( SELECT AVG( COALESCE( price, 0 ) ) *2
                                     FROM( SELECT *, cume_dist() OVER ( ORDER BY price desc )
                                           FROM web_price_scan
                                           WHERE listing_Type='AARM'
                                             AND u_kbalikepartnumbers_id = 1000307
                                             AND ( EXTRACT( DAY FROM ( NOW() - dateEnded ) ) ) * 24 < 48
                                         ) d
                                     WHERE cume_dist < 0.50)
     )s
HAVING COUNT(*) > 5 
```

# jquery - 打开图层的鼠标悬停事件

> ID：11007022
> 
> 赞同：0
> 
> 时间：2012-06-13T01:18:48.083
> 
> 标签：jquery, openlayers

我目前是打开图层的新手。而且我在使用 jquery 使用 mouseover 事件时遇到了麻烦。我使用 jquery 创建了一个工具提示，这个工具提示将输出地图中的坐标。这是我的例子。

```
<?php
 $init = "
map.events.register('mouseover', map, function (e) {
 var lonlat = map.getLonLatFromViewPortPx(e.xy);
 var selMinX=lonlat.lon-sizeSelection;
 var selMaxX=lonlat.lon+sizeSelection;
 var selMinY=lonlat.lat-sizeSelection;
 var selMaxY=lonlat.lat+sizeSelection;

 alert(e.pageX); // Showing the event.pageX isn't working.
     alert(selMinX); // Showing also one of the variables above isn't working.
 alert('hello'); // This msgbox works.

$(document).ready( function() {
        // Obviously I need to comment the mouseover function here 
        // since I am already using the mouseover event.
    // $('#map').mouseover(function(e) { 
       $('<div id='tooltip'><input type='text' id='coor'/></div>').appendTo('body');
    // });
});
});
        ";

?> 
```

现在，我的地图没有显示，因为我认为将工具提示附加到正文部分的代码有问题。我在这里要实现的是在文档上显示带有输入框的div。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:26:15.790

您需要更改工具提示附加上的引号：

```
 $("<div id='tooltip'><input type='text' id='coor'/></div>").appendTo('body'); 
```

请注意，第一个选择器的第一个和最后一个引号是双引号。属性用单引号引起来。

我不知道php，但我认为您需要像这样转义引号，或者php会这样做：

`$(\"<div id='tooltip'><input type='text' id='coor'/></div>\").appendTo('body');`

# jquery - 如何在不丢失按钮的情况下使用输入按钮更改 h1 的文本

> ID：11007023
> 
> 赞同：6
> 
> 时间：2012-06-13T01:19:14.043
> 
> 标签：jquery, html, css, button

我有一个带有按钮的 h1 标签和一些正确的文本，仅在运行时使用 CSS 和 jQuery 的用户操作后显示。当按钮显示时，我想在 h1 中将文本放在它旁边。

问题是当我添加文本时，我失去了按钮。

HTML看起来像这样......

```
<h1>
    <input type="button" value="Open Document In New Window" id="newTabButton" class="tabButtonHidden">
</h1> 
```

CSS看起来像这样......

```
.tabButtonHidden {
   visibility: hidden;
}

.tabButtonVisible {
   visibility:visible;
}

#newTabButton {
    background: rgba(216, 216, 216, 6);

}

h1 {
    font: 100% Arial, Arial, Helvetica, sans-serif;
    font-size: 1.25em;
    font-weight:500;    
    background: rgba(218, 235, 245, 6);
    margin: 0px;
} 
```

jQuery看起来像这样......

```
if ($("#newTabButton").hasClass("tabButtonHidden")) {
   $('#newTabButton').removeClass("tabButtonHidden").addClass("tabButtonVisible");
}

$('h1').text('Now is the time for all good men...'); 
```

jQuery 中的最后一行将文本写入按钮通常所在的位置。如果我删除最后一行，更改 html 以包含如下文本，jquery 可以完美运行，当然文本是静态的并且始终可见......

```
<h1>
    <input type="button" value="Open Document In New Window" id="newTabButton" class="tabButtonHidden">Now is the time for all good men...
</h1> 
```

我错过了什么？我需要更改文本并使其和按钮都动态可见。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T01:21:56.923

使用`append()`代替`text()`

[http://jsfiddle.net/efortis/QSEfv/](http://jsfiddle.net/efortis/QSEfv/)

```
$('h1').append('Now is the time for all good men...');​ 
```

**编辑**

为防止多次追加，请将 a 追加`span`到`h1`并使用`text()`

见：http: [//jsfiddle.net/efortis/QSEfv/2/](http://jsfiddle.net/efortis/QSEfv/2/)

```
$('h1').append('<span>Now is the time for all good men...</span>');

$('input').on('click', function () {
   $('h1 span').text('NEW...');    
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:22:56.603

如果您想更改按钮的文本，您可以尝试：

```
$("#inputTabButton").val('your text'); 
```

或者，如果您想添加文本和按钮，您也可以尝试：

```
$("h1").append('your text'); 
```

# sqlite - Cygwin SVN：E200030：SQLite 磁盘 I/O 错误

> ID：11007024
> 
> 赞同：26
> 
> 时间：2012-06-13T01:19:23.763
> 
> 标签：sqlite, svn, cygwin

当我在 Cygwin 中使用 Subversion 更新一些存储库时，一些目录更新成功，而另一些则失败并显示错误消息：

> svn: E200030: sqlite: 磁盘 I/O 错误

对同一个存储库再次执行`svn update`时，不同的目录可能会出现相同的错误。有时，在上述错误信息之后会有一条 SVN 指令。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-09T16:31:31.360

这是因为[有人想要](http://cygwin.com/ml/cygwin/2012-04/msg00079.html)在 Cygwin 的[SQLite](http://sqlite.org/)包中进行更改。当被问到这个问题时，我是那个包的维护者，我做了导致这个症状的改变。

该更改作为 Cygwin SQLite 版本发布`3.7.12.1-1`，它解决了一个人的问题，但它具有阻止 Cygwin 的 Subversion 包与本机 Windows Subversion 实现合作的不良副作用。

## 发生了什么？

这里的核心问题是[Subversion 1.7 改变了工作副本的磁盘格式](http://subversion.apache.org/docs/release-notes/1.7.html#wc-ng)。该更改的一部分涉及一个新的 SQLite 数据库文件，`.svn/wc.db`. 现在，为了实现[SQLite 的并发保证](http://sqlite.org/faq.html#q5)，SQLite 在访问数据库文件时会对其进行锁定。

这一切都很好，也很明智，但是当您尝试混合使用 Windows 本机和 POSIX[文件锁定语义](http://en.wikipedia.org/wiki/File_locking)时会遇到问题。在 Windows 上，文件锁定几乎总是意味着[强制锁定](http://en.wikipedia.org/wiki/File_locking#In_Microsoft_Windows)，但在 Linux 系统上——Cygwin 试图模仿——锁定通常意味着[建议锁定](http://en.wikipedia.org/wiki/File_locking#In_Unix-like_systems)。

这有助于了解“磁盘 I/O 错误”的来源。

Cygwin SQLite 的`3.7.12.1-1`变化是以“Unix 模式”而不是“Cygwin 模式”构建库。在 Cygwin 模式下，该库使用 Windows 本机文件锁定，这与 Cygwin 的理念背道而驰：在可能的情况下，Cygwin 包调用 POSIX 函数而不是直接调用 Windows API，这样`cygwin1.dll`可以提供正确的 POSIX 语义。

当所有访问相关 SQLite DB 的程序都使用 Cygwin 构建时，POSIX 咨询文件锁定正是您想要的 SQLite，这是 Cygwin 中的默认假设。但是，当您在运行纯 POSIX Cygwin 的同时运行 Windows 原生 Subversion 程序（如 TortoiseSVN `svn`）时，就会发生冲突。当 TortoiseSVN Windows Explorer shell 扩展`.svn/wc.db`使用强制锁锁定文件并且 Cygwin`svn`出现并尝试对其进行建议锁定时，它会立即失败。Cygwin`svn`假定锁定尝试将立即成功或阻塞直到成功，因此它错误地将锁定失败解释为磁盘 I/O 错误。

## 我们是如何解决这个困境的？

在 Cygwin 中，我们总是尽量与 Windows 本地程序配合使用。诀窍是找到一种方法来做到这一点，同时还能很好地使用 Cygwin 程序。

不是每个人都同意我们应该尝试这个。“Cygwin SQLite 是 Cygwin 的一部分，所以它只需要与其他 Cygwin 程序一起工作，”一个小组会说。对方会回答：“Cygwin 在 Windows 上运行，因此它必须与其他 Windows 程序一起运行良好。”

幸运的是，我们想出了一个让两组都开心的方法。

作为 Cygwin SQLite`3.7.17-x`打包工​​作的一部分，我测试了[Corinna Vinschen](https://en.wikipedia.org/wiki/Cygwin#History)添加到版本 1.7.19[的新功能。](http://cygwin.com/ml/cygwin-announce/2013-06/msg00006.html)它允许程序通过 BSD 文件锁定 API 请求强制文件锁定。我的部分更改是让 Cygwin SQLite 在用户的指导下打开和关闭此功能，允许相同的包同时满足以 Cygwin 为中心和 Windows 原生阵营的需求。`cygwin1.dll`

这个 Cygwin DLL 特性在 1.7.20 中得到了进一步改进，我`3.7.13-3`使用最终锁定语义发布了 Cygwin SQLite。此版本允许选择三种锁定策略：POSIX 咨询锁定、BSD 咨询锁定和 BSD/Cygwin 强制锁定。到目前为止，后一种策略已被证明与原生 Windows 锁定完全兼容。

后来，当 Jan Nijtmans 接手 Cygwin SQLite 的维护工作时，他通过将其与[SQLite VFS 层](https://www.sqlite.org/vfs.html)完全集成，进一步增强了这一机制。这允许第四个选项：Cygwin SQLite 在我们开始此旅程之前使用的本机 Windows 锁定。这主要是为了避免 BSD/Windows 锁定策略无法与原生 Windows SQLite 程序完美协作的可能性。据我所知，没有人需要使用此选项，但很高兴知道它的存在。

## 替代疗法

如果您遇到的冲突是 Cygwin 的命令行`svn`和 TortoiseSVN Windows Explorer shell 扩展之间的冲突，还有另一个选项可以修复它。TortoiseSVN 也附带原生的 Windows Subversion 命令行程序。如果你把这些放在`PATH`Cygwin 的`bin`目录之前，你根本不应该遇到这个问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-19T09:21:19.237

遇到同样的问题，它似乎（至少在我的情况下）是与 TortoiseSVN 的交互。禁用 TortoiseSVN 的状态图标缓存（设置>图标覆盖>状态缓存“无”>应用）对我来说一切正常。

（这显然不能解决根本问题，这似乎是由于 Cygwin 的 Subversion 包依赖于更改其访问模式的 SQL 包。在我写的时候，Cygwin 邮件列表上有关于如何来解决这个问题。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-13T02:39:41.160

`ldd /usr/bin/svn`表明 SVN 依赖于 /usr/bin/cygsqlite3-0.dll。

在我将 libsqlite3 从 3.7.12 更改回 3.7.3 后，问题似乎消失了。所以这可能是一个[SQLite](http://en.wikipedia.org/wiki/SQLite)库问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T08:22:07.693

使用 TortoiseSVN，勾选解决了我的问题`Refresh shell overlays`。`clean up`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-13T09:05:00.703

供其他人参考，我刚刚遇到同样的错误 ( `svn: E200030: sqlite: disk I/O error`)，发现我的一个日志文件占用了我的所有空间（并且由于没有可用空间而无法写入 HDD）。

运行（以确保您有足够的磁盘空间）

```
df -h 
```

（如果你不删除一些大文件（我只是删除了一些备份和日志文件）

然后我只需要运行：

```
svn cleanup 
```

这为我解决了错误。

# forms - 将订单副本退还给订购者以及销售人员

> ID：11007025
> 
> 赞同：0
> 
> 时间：2012-06-13T01:19:39.880
> 
> 标签：forms, html-email

我有一个订单表格，需要通过电子邮件将订单副本发送给经销商以及客户服务部门以完成。它需要从表单字段中提取经销商的电子邮件。 [http://seminolefeed.com/seminole_order_form.html](http://seminolefeed.com/seminole_order_form.html) - 感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:49:39.393

您的表单需要将数据发布到您的 Web 服务器，处理程序（您编写/编写的）将发送电子邮件。

# c# - 将 C# 类绑定到 WP7 的 XAML

> ID：11007027
> 
> 赞同：0
> 
> 时间：2012-06-13T01:19:53.843
> 
> 标签：c#, windows-phone-7, xaml, binding, mvvm

好的，所以我已经研究了好几个小时，但仍然无法弄清楚为什么我的 ViewModel 中的数据没有绑定到我的主页中的 XAML。我什至开始了一个新项目并以同样的方式实现它，所以我认为它可能与命名空间或我不太熟悉的东西有关。

当我的应用程序启动时，我在 App.cs 中创建了一个全局 ViewModel，用于将数据绑定到我的 XAML 视图。

```
public HomeViewModel ViewModel { get; private set; }

private void Application_Launching(object sender, LaunchingEventArgs e)
{
    ViewModel = new HomeViewModel();
    (App.Current as App).RootFrame.DataContext = (App.Current as App).ViewModel;
} 
```

然后 HomeViewModel 看起来像这样：

```
public class HomeViewModel : INotifyPropertyChanged
{       
    /***View Model***/

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    public HomeViewModel()
    {   
        PropertyChanged = new PropertyChangedEventHandler(delegate { });
    }

    public Profile CurrentProfile; /*EDIT: Missing {get;set;} Which is necessary for
                                    *any property, including ones below that I 
                                    *referenced in the XAML
                                    */

    public string NotificationImage; 

    public ButtonPanelPath UniversalButtonPath;

    public void setProfile(Profile p)
    {
        CurrentProfile = p;
        NotifyPropertyChanged("CurrentProfile");
    }
    .
    .
    ....rest of access methods and properties 
```

现在，当我的程序运行时，我 100% 确定 HomeViewModel 中的数据正在更新，并且每次“设置”新字段时都会调用 NotifyPropertyChanged 方法。

这个类是绑定到 RootFrame 的吧？那么我不应该能够在我的主页的 xaml 中访问这些字段吗？这是主网格中堆栈面板中部分 xaml 的示例：

```
<Border BorderThickness="5" BorderBrush="Aqua" CornerRadius="20">
  <StackPanel Name="profileInfo"  DataContext="{Binding CurrentProfile}">
    <TextBlock Text="{Binding FirstName}" Name="profileName" FontSize="26" 
               FontWeight="Bold" HorizontalAlignment="Center" />
    <StackPanel Orientation="Horizontal">
      <StackPanel>
        <TextBlock Text="{Binding Level}" Name="userLevel" FontSize="32" 
                   Margin="10,0,0,0"/>
        <TextBlock Text="{Binding LevelName}" Name="levelName" FontSize="26" 
                   Margin="10,0,0,0"/>
        <TextBlock Text="{Binding PointsNeeded}" Name="pointsBar" 
                   Margin="10,0,0,0"/>
      </StackPanel>
      <Image x:Name="levelIcon" Source="{Binding PictureUrl}" 
             Margin="15,0,0,0"/>
    </StackPanel> 
  </StackPanel>
</Border> 
```

所以这里的 Level、LevelName、PointsNeeded 和 PictureUrl 都是 Profile 中的公共字段（或 CurrentProfile，这是我正在引用的 Profile 的特定实例）。我试过 Profile.[field] 但这也没有用。如果有人能告诉我我缺少什么来完成绑定，将不胜感激。

顺便说一下，如果这意味着什么，命名空间如下
-MainPage 在 MyApp.src.pages
-App 在 MyApp
-HomeViewModel 在 MyApp.src.classes

提前感谢您提供有用的解决方案/评论，如果您需要更多数据/信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:32:51.533

您正在寻找的绑定是 {Binding Proptery.SubProperty}。

因此，在您的情况下，例如 {Binding CurrentProfile.Level}。

您在 DataContext 中有一个“HomeViewModel”的实例，因此您可以访问它的所有属性。如果有一个复杂类型作为属性，则必须访问该属性，即复杂类型的实例而不是类型，才能访问其“子”属性。

希望能帮助到你。

# c# - 有什么方法可以通过 API 更改 Facebook 上的视频隐私？

> ID：11007028
> 
> 赞同：0
> 
> 时间：2012-06-13T01:20:01.143
> 
> 标签：c#, facebook-graph-api, facebook-c#-sdk

我想在我的代码中更改上传视频的隐私，但我在 Graph-API 和 Facebook-SDK 中找不到任何 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:39:12.700

不，如果帖子/视频已经上传，那么 API 不支持更改其隐私级别（目前）。

# c++ - 冲突的实例化 - 内存泄漏？

> ID：11007029
> 
> 赞同：0
> 
> 时间：2012-06-13T01:20:03.577
> 
> 标签：c++, qt, memory, memory-leaks

我一直在潜伏这些问题并学到了很多东西，但最近遇到了一个我不明白的问题。我正在使用 Qt，需要在各种类方法中创建/替换 QMovie 对象（最终在 QLabel 中设置）。我已经使用 new 关键字定义了对象。因此在我的标题中

```
QMovie * movie; 
```

为简单起见，我将把等效代码放在一个方法中。这相当于两行代码

```
QMovie * movie = new QMovie(QByteArray1,this);
QMovie * movie = new QMovie(QByteArray2,this); 
```

这可行（我不知道为什么），但由于它是重复操作，我担心内存泄漏。看来第二个定义成功地替换了第一个定义，但是因为大概它们每个都有不同的指针，所以我不知道如何删除指向第一个定义的指针。我在类析构函数中删除了电影，但不知道它是否会删除所有内容。有人知道这里发生了什么吗？

PS我这样做是因为（我在Qt中找到）使用QByteArray（从网上下载）中的数据创建QMovie对象的唯一方法是使用QMovie构造函数。如果我只想用文件中的新数据替换当前电影数据，我可以使用该方法

```
movie->setFileName(fileName); 
```

但这不是使用二进制数据时的选择。注意：QMovie 也有一个构造函数，它有一个文件名而不是 QByteArray 作为参数。使用文件名也可以使用上面的代码并且更容易测试。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:29:52.973

一般来说，如果派生的任何东西`QObject`都包含在`QObject`s 的层次结构中，那么当父级被破坏时，它们会自动被破坏。在您的情况下，您`QMovie`通过构造函数为父级提供，因此应该为您处理清理工作。如果你想确认，从 QMovie 派生一个类，实现一个打印消息的析构函数，并确保它在你期望的时候被调用（即当父级被破坏时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:53:39.040

在 C 中这样做的惯用方式是：

1.  将指针初始化为零。

2.  在分配给它之前，`free()`旧指针指向的对象。您*不需要*检查零：`free()`在零指针上是安全的无操作。

3.  `free()`指针超出范围时的对象。

在 Qt 中这样做的惯用方式甚至更简单。

1.  使用`QSharedPointer<>`或`QScopedPointer<>`。当它超出范围时，它将自动删除指向的对象。

    *   如果只有一个指针应该拥有该对象，请使用`QScopedPointer`. 当它超出范围时，它将删除指向的对象。这类似于`std::auto_ptr`.

    *   对于共享所有权，请使用`QSharedPointer`. `QSharedPointer`当指向它的最后一个对象超出范围/被销毁时，它将删除指向的对象。

2.  对于`QScopedPointer`，使用`reset(T*other)`方法为指针分配一个新值。对于`QSharedPointer`，您只能为其分配其他共享指针，例如`QSharedPointer a = QSharedPointer(new Class);`

在任何一种情况下，任何先前指向的对象都将被删除。

因此：

```
class MyClass {
  QScopedPointer<QMovie> movie1;
  QSharedPointer<QMovie> movie2;
public:
  MyClass {} // note: no need for any special initialization
  void method() {
    movie1.reset(new QMovie(...));
    movie2 = QSharedPointer(new QMovie(...));
  }
}; 
```

这是完全安全的。您可以`MyClass::method()`根据需要随时调用，而不会出现内存泄漏。在任何时间点，MyClass 将最多保持两个 QMovie 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T01:29:23.090

```
QMovie * movie = new QMovie(QByteArray1,this);
QMovie * movie = new QMovie(QByteArray2,this); 
```

如果这两行在同一个`.cc`文件中，那么您将收到重新定义错误。如果这两行位于不同的`.cc`文件中，那么当您构建可执行文件时，您将收到多重定义错误。但是，你的问题有这样的措辞：

> 我正在使用 Qt，需要在各种类方法中创建/替换 QMovie 对象（最终在 QLabel 中设置）

如果`QMovie`对象驻留在不同的类中，则不会发生内存泄漏，因为每个类的指针都不同。

但是，如果您的意图是所有类都引用同一个`QMovie`实例，则需要找到一种方法将实例传递给每个对象。或者，您可以让它们都引用同一个（即，使用单例模式）。

# php - 需要身份验证的网站是如何制作的？

> ID：11007031
> 
> 赞同：-5
> 
> 时间：2012-06-13T01:20:17.887
> 
> 标签：php, javascript, html, authentication, login

网站（例如这个）如何处理登录？我知道的唯一方法是使用 HTML 表单获取用户名和密码，并使用 PHP 对照数据库进行检查，如果匹配则创建会话。在每个需要用户登录的页面中

```
<?php
if($_SESSION['loggedIn'] != 'true')
    header( 'Location: login.html' );
?>
<HTML>
... 
```

但是根据[这个页面](http://htmlhelp.com/reference/html40/forms/input.html) `<input type="password">`是用明文传输的，所以任何使用 HTML 输入的东西都是不好的。根据[JavaScript Kit](http://www.javascriptkit.com/script/script2/loginpass2.shtml) ，所有 JavaScript 密码脚本都是不安全的。一个人能用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:23:04.513

您在上面概述的简单场景是关于它通常是如何工作的。`<input type="password">` *默认情况*下以纯文本形式发送到服务器，这就是登录页面应使用 HTTPS 加密该通信的原因。JavaScript 与此无关。

# php - 如何在私有且仅限成员的情况下构建宁静的 api？

> ID：11007032
> 
> 赞同：3
> 
> 时间：2012-06-13T01:20:18.260
> 
> 标签：php, web-services, authentication, rest, authorization

从巴黎的 Symfony Live 2012 回来，我很幸运地参加了“[设计 HTTP 接口和 RESTful Web 服务](http://paris2012.live.symfony.com/speakers#session-680)”会议，我对如何构建一个 RESTful API 并同时保持其私有和成员身份提出了很多问题。

目前我曾经生成一个 API 密钥来使我的 API 私有（我的意思是我自己的第三方应用程序可用，但最终用户可用）。

为了确保注册用户可以使用 API（通过移动应用程序），我使用了 Cookie，好吧，我使用了 SESSION。

但是根据演讲（以及我在网上阅读的其他资源），这不是正确的做法。

我的需求如下：

*   提供只有我的移动应用可以使用的私有 API
*   允许（不同角色的）成员执行不同的操作（即：成员可以发表评论，而管理员可以全部编辑）

由于 REST 约束是无状态的（除其他外），因此我不能使用 Cookie/Session，因为它们需要由客户端启动，并且会导致一些非幂等的结果。

我在这里和那里读到，保持我的 API RESTful 的一种方法是在每个请求上提供凭据。

目前，为了验证我的 API 密钥（使其保持私有），我使用自定义 HTTP 授权方案，类似于`Authorization: MyApp SoMeToKeNV3RYPR!V4T3`然后使用 POST 方法验证我的成员（登录）（就像我在任何浏览器 Web 应用程序中所做的那样）。

您将如何实施此类案例？使用这种私有方案并继续使用会话是否可以接受？

经过一番阅读，我可能认为在每个请求上使用一些签名可以帮助解决这些问题。

可以使用第三方客户端中提供的用户凭据生成签名，同时使用公钥/私钥对其进行加密（以保持 API 的私密性）。

在每个请求上，签名将根据 CRC（或类似的东西）进行检查，而凭据将根据数据库进行检查（这似乎比检查会话不值得，不是吗？）

任何帮助/建议将不胜感激。

PS：OAuth 呢？我对此了解不多，但它可能是解决此类问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:30:56.837

您肯定会想要使用[OAuth](http://en.wikipedia.org/wiki/OAuth)。这将允许您安全地验证您的用户是他们所说的人。您无需弄乱 CRC 或任何东西，一旦用户通过身份验证，他们就有一个访问令牌，可用于签署未来的请求。

您只需要处理身份验证方案和握手，然后在发出访问令牌后安全地存储它们。但是，如果是我，我不会相信自己在设计这样一个系统时能够处理所有的安全案例。有几个第三方 PaaS 公司会为你做这种事情。我知道以下公司拥有一些可能会帮助您的 API 管理工具，并且 afaik 他们也处理 OAuth 实现：

*   [Apigee](http://apigee.com/)
*   [第 7 层](http://www.layer7tech.com/)
*   [Ping 身份](https://www.pingidentity.com/)

如果您非常关心安全性，尽管您不信任第三方会为您处理它，那么您将希望遵循[OAuth 协议](http://oauth.net/)。

# ruby-on-rails - 为什么rails预编译任务做非消化资产

> ID：11007034
> 
> 赞同：4
> 
> 时间：2012-06-13T01:20:35.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, asset-pipeline

当我这样做时： rake assets:precompile RAILS_ENV=production 我会在我的 public/assets 文件夹中获得例如以下文件：

*   应用程序-7af6c31514bcdd4cce3c96892af4487f.js
*   应用程序-7af6c31514bcdd4cce3c96892af4487f.js.gz
*   应用程序.js
*   应用程序.js.gz

最后两个是一个问题，因为它会导致编译版本在开发中提供服务，我不明白为什么会生成它们。

我的production.rb中有以下行：

```
config.assets.digest = true 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:31:48.593

要停止在公共使用中创建非散列文件名：

```
rake assets:precompile:primary RAILS_ENV=production 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T06:10:33.610

这是资产编译器的正常行为，生成的非摘要文件主要用于错误页面等（您无权访问 MD5 哈希），目前无法关闭它们。此外，这个问题实际上与这个问题相同：[Rails 编译带有和不带有 md5 哈希的资产，为什么？](https://stackoverflow.com/questions/10045892)

# ios - ios Storyboard - 将标题推送到视图控制器上

> ID：11007036
> 
> 赞同：0
> 
> 时间：2012-06-13T01:21:04.713
> 
> 标签：ios, uinavigationcontroller, storyboard

这段代码是否假设在我要连接的 ViewController 上设置标题？

2 个 UIViewControllers 通过 push segue 连接 - 第一个嵌入在 NavigationController 中。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
 if ([[segue identifier] isEqualToString:@"settingsSegue"])
 {

     self.navigationItem.title = [[NSString alloc] initWithFormat:@"Custom Title"];

 }
 } 
```

它对我不起作用，但语法是正确的。

提前谢谢:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:25:46.550

上面的答案对我有用，但有一个例外......

改变

```
self.title = myTitle; 
```

到

```
self.navigationItem.title = myTitle; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:36:56.227

`viewDidLoad`使用目标 VC 中的属性设置目标视图控制器的标题：

```
if ([[segue identifier] isEqualToString:@"settingsSegue"]) {
    MyDestinationViewController *mdvc = segue.destinationViewController;
    mdvc.myTitle = [[NSString alloc] initWithFormat:@"Custom Title"];
} 
```

然后在`viewDidLoad`MyDestinationViewController.h 中的事件中：

```
@property (nonatomic,strong) NSString *myTitle; 
```

在 MyDestinationViewController.m 中：

```
@synthesize myTitle; 
```

最后在`viewDidLoad`：

```
self.title = myTitle; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T12:17:19.687

您也可以直接在 segue 中设置标题，无需通过属性：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"settingsSegue"]) {    
        segue.destinationViewController.navigationItem.title = @"Custom Title";
    }
} 
```

或者，我需要将推送的视图控制器的标题设置为单击的表格单元格的标题：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"settingsSegue"]) {   
        NSIndexPath *myIndexPath = [self.tableView indexPathForSelectedRow];
        UITableViewCell *cell = [self tableView:self.tableView cellForRowAtIndexPath:myIndexPath];        
        segue.destinationViewController.navigationItem.title = cell.textLabel.text;
    }
} 
```

# java - JTabbedPane 中的选项卡不反映按钮按下的变化

> ID：11007037
> 
> 赞同：2
> 
> 时间：2012-06-13T01:21:17.773
> 
> 标签：java, swing, user-interface, jtabbedpane

在我的 GUI 的选项卡中，允许用户编辑员工的姓名。该名称还用作选项卡的标签，因此当确认更改时，应更新选项卡以反映此更改，并将新数据写入数据文件。

员工存储在一个`HashMap`类中`Employees`。这些选项卡是通过迭代一个`ArrayList<String>`员工的名字来填充的，这是通过调用方法获得的`Employees.getNames()`。从 GUI 中，用户可以输入新名称，然后按更改名称按钮。按钮`ActionListener`调用方法`changeName()`，该方法将旧名称替换为新名称`HashMap`并更新数据文件。

这在用户第一次想要更改员工姓名时可以正常工作，但随后的更改会产生错误。似乎`JPanel`包含`JTextFields`（见`getEmployeeInfoPanel()`下文）的 没有更新参数`name`。此参数是员工的当前姓名，而新姓名是从`JTextField`.

下面是一个例子来说明这个问题。基本上，这些步骤是：

```
1\. old name = Mary is provided when the program starts
2\. User changes name in JTextField, so oldName = Mary and newName = Mary S.
3\. At this point, oldName should update to Mary S. as it is the new key.
   However, oldName remains as Mary so the HashMap cannot be  updated again. 
```

这个特定屏幕的层次结构是：

```
JFrame (entire application)
   |
    -- JPanel EmployeesPanel (this screen)
   |     |
   |      -- JPanel (for custom menu bar)
   |     |
   |      -- JTabbedPane (one tab for each employee)
   |             |
   |              -- JPanel (contains JLabels, JTextField, etc for this employee)
   |
    -- ..... 
```

这是来自 GUI 的相关代码：

```
public class EmployeesPanel {
    private JTabbedPane pane;
    private Employees employees;
    ...
    public EmployeesPanel(JPanel panel, Container cards) {
        ...
        pane = new JTabbedPane();
        getEmployees();
    }

    private void getEmployees() {
                    ...
        employees = new Employees(properties, EMPLOYEES_TXT);
        //ArrayList of all employees' names
        names = employees.getNames();
        for(String name : names) {
            pane.addTab(name, getEmployeeInfoPanel(name));
        }
        pane.addTab("NEW EMPLOYEE", addEmployeePanel());
    }

    public JPanel addEmployeePanel() {
        ...
    }

    private JPanel getEmployeeInfoPanel(final String name) throws EmployeeException {
        JPanel infoPanel = new JPanel();
        infoPanel.setLayout(new BoxLayout(infoPanel, BoxLayout.PAGE_AXIS));

        JLabel nameLabel = new JLabel("Employee name");
        JLabel wageLabel = new JLabel("Employee wage");
        final JTextField nameField = new JTextField(name, 30);
        final JTextField wageField = new JTextField(employees.getWage(name).toString(), 30);

        JButton changeNameButton = new JButton("CHANGE NAME");
        JButton changeWageButton = new JButton("CHANGE WAGE");

        changeNameButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                try {
                    String newName = nameField.getText();
                    employees.changeName(name, newName);
                    panel.validate();
                } catch (EmployeeException e) {
                    // TODO create popup warning
                }
            }
        });
        ...
        return infoPanel;
    }
} 
```

这里是修改 HashMap 的雇员类的代码：

```
public void changeName(String oldName, String newName) throws EmployeeException {
    System.out.println("old name = " + oldName + ", new name = " + newName);
    if(employees.containsKey(oldName)) {
        BigDecimal wage = employees.get(oldName);
        employees.remove(oldName);
        employees.put(newName, wage);
        names.remove(oldName);
        names.add(newName);
        prop.remove(oldName);
        prop.setProperty(newName, wage.toString());
        saveProperties();
        System.out.println(names);
    } else {
        throw new EmployeeException("Could not change name because employee does not exist.");
    }
} 
```

这是一个例子。第一个屏幕截图是从程序启动时开始的；员工姓名被填充到相应的选项卡中。第二个屏幕截图是在尝试更改员工姓名之后。正如你所看到的，标签的标签没有改变，我假设调用`validate()`会这样做。

（前）

![在此处输入图像描述](../Images/b6404a763ee1cc4e58a7c9210953bb59.png)

（按下按钮后）

![在此处输入图像描述](../Images/2bbe5c334d91a73b57bbaaa1b955bd08.png)

最后，按两次更改名称按钮会产生输出，显示名称已在 ArrayList 中更改：

```
old name = Mary, new name = Mary S.
[Jane, Bob, Sue, Mary S.]
old name = Mary, new name = Mary S.
653647 [AWT-EventQueue-0] ERROR employees.EmployeeException - Could not change name because employee does not exist. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:30:54.370

您可能正在寻找[`setTitleAt()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#setTitleAt%28int,%20java.lang.String%29)方法。

附录：为了比较，这里有一个允许多次编辑的[sscce 。](http://sscce.org/)

![标签编辑](../Images/e296e6220ebced38a40aec43d790ede2.png)

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.JTextField;

/**
 * @see http://stackoverflow.com/a/11007109/230513
 */
public class TabEdit extends JPanel {

    private static final int MAX = 5;
    private static final String NAME = "Tab ";
    private final JTabbedPane pane = new JTabbedPane();

    public TabEdit() {
        for (int i = 0; i < MAX; i++) {
            pane.add(NAME + String.valueOf(i), new TabContent(i));
        }
        this.add(pane);
    }

    private class TabContent extends JPanel {

        private TabContent(final int i) {
            final JTextField jtf = new JTextField(
                "Please edit the name of " + NAME + String.valueOf(i));
            this.add(jtf);
            jtf.addActionListener(new AbstractAction() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    pane.setTitleAt(i, jtf.getText());
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(320, 120);
        }
    }

    private void display() {
        JFrame f = new JFrame("TabEdit");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TabEdit().display();
            }
        });
    }
} 
```

# iphone - 在设备方向从纵向更改为横向时使用新的 uiview 填充整个横向屏幕

> ID：11007041
> 
> 赞同：0
> 
> 时间：2012-06-13T01:21:35.170
> 
> 标签：iphone, ios, uiview, rotation, orientation

所以我的 iPhone 应用程序目前有一个填充整个屏幕的 tabviewcontroller。该应用程序仅在纵向模式下运行。我的任务是检测设备方向的变化，一旦它变为横向，就会有一个新的 uiview 填充整个屏幕。

我已经有设备方向变化检测工作。一旦检测到方向变化，我已经使用 NSNotificationCenter 成功调用了辅助方法 deviceOrientationChanged。如果更改为横向模式，我会运行某个代码块。

在这段代码中，我已经尝试了各种方法，但都没有成功。简单地说 self.view = newViewThing; 不起作用，因为状态栏仍然存在于顶部并且选项卡仍然存在于底部。我还尝试将此 newViewThing 作为子视图添加到 UIWindow。这不起作用，因为在添加视图时，它的方向不正确。

问题是：一旦检测到设备方向变化，有没有办法加载全新的 uiview？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:27:40.007

是的，有一种方法可以加载新视图。我是这样在我的应用程序中制作的：

```
- (void)orientationChanged:(NSNotification *)notification
{
    // We must add a delay here, otherwise we'll swap in the new view
    // too quickly and we'll get an animation glitch
    [self performSelector:@selector(updateLandscapeView) withObject:nil afterDelay:0];
}

- (void)updateLandscapeView
{
    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
    if (UIDeviceOrientationIsLandscape(deviceOrientation) && !isShowingLandscapeView)
    {
        [self presentModalViewController:self.landscapeView animated:YES];
        isShowingLandscapeView = YES;
    }
    else if (deviceOrientation == UIDeviceOrientationPortrait && isShowingLandscapeView)
    {
        [self dismissModalViewControllerAnimated:YES];
        isShowingLandscapeView = NO;
    }    
} 
```

而且我已将此代码添加到`viewDidLoad`：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:)
                                             name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

这段代码`dealloc`：

```
[[NSNotificationCenter defaultCenter] removeObserver:self];
[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications]; 
```

# android - Sony SmartWatch - 如何知道配件设备是否支持 LED？

> ID：11007048
> 
> 赞同：1
> 
> 时间：2012-06-13T01:22:51.110
> 
> 标签：android, sony-smartwatch

哪个 API 可以告诉我有关特定附件设备是否支持 LED 的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:57:51.797

SmartWatch 和 Smart Wireless Headset Pro 均不包含 LED。

但是，您可以使用 Capabilities API 来获取有关设备功能的信息，如[SDK](http://developer.sonymobile.com/wportal/devworld/technology/smart-extras/smart-extension-sdk)中的第 4 章所述。

LED 的内容提供者的 URI 在实用程序类中定义，以及功能视图的内容提供者的 URI。

```
Registration$Capabilities
Registration$Led
Registration$LedColumns 
```

# regex - app.get() 中的 Node.js Express 正则表达式

> ID：11007053
> 
> 赞同：0
> 
> 时间：2012-06-13T01:23:19.783
> 
> 标签：regex, node.js, express

有一些代码：

```
app.get(/^\/test\?sid$/, function (req, res) {
    console.log('sid: ', req.params[0]);
    res.sendfile(__dirname + '/public/login/index.html');
}); 
```

输出：

```
Cannot GET /test?sid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:41:30.773

Express 的路由器只匹配路径名，而不是包括查询字符串在内的整个 URL。

由于您的正则表达式中没有捕获组，`req.params`因此不会设置。

# c++ - vector::push_back 与 vector::operator[]

> ID：11007054
> 
> 赞同：3
> 
> 时间：2012-06-13T01:23:32.413
> 
> 标签：c++, stl, vector, operator-keyword, push-back

下面在`c++`程序中，

```
include<iostream>
#include<vector>
using namespace std;

int main()
{
     vector<int> numbers;

    numbers.push_back(2);
    numbers.push_back(10);
    numbers.push_back(5);
    numbers.push_back(3);
    numbers.push_back(7);

    numbers[3] = 8;
    numbers[5] = 11;

    for(int i=0; i<numbers.size(); ++i)
    {
            cout<<" "<<numbers[i];
    }
} 
```

在[ideone](http://ideone.com/lfx59)上看到。

在这里，`numbers[3]`正在工作，但是`numbers[5]`。
看起来，vector::operator[] 不会像 vector::push_back 那样增加向量的大小。
那么，**这是这两者之间的唯一区别还是其他什么**？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T01:33:33.323

[std::vector::operator[]](http://en.cppreference.com/w/cpp/container/vector/operator_at) : "访问指定元素"

[std::vector::push_back](http://en.cppreference.com/w/cpp/container/vector/push_back)：“在末尾添加一个元素”

看到 c++ 参考资料，我感到非常惊讶。你应该试试看。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T01:25:03.980

`push_back`使用指定的值在背面创建一个新元素。`operator[]`要求元素存在；它只是访问它。原因`[5]`不起作用是因为您有 5 个元素，因此您的索引范围从 0 到 4。

通常，在添加新元素时，`push_back`优先于`resize`，其次是`operator[]`。但是，只有一个可用于读取，并且`operator[]`还需要维护正常的数组语法。

# zend-framework - Zend Framework + Tricky 控制器名和模块名冲突

> ID：11007055
> 
> 赞同：2
> 
> 时间：2012-06-13T01:23:34.853
> 
> 标签：zend-framework

我们有一个包含以下模块的 Zend 应用程序：

```
Users
Shop
etc...
Front - A content management module 
```

而 Front 模块具有以下控制器：

```
UsersController
ShopController
AuthController
etc... 
```

在我们开发周期的中间，我们决定将 Zend 应用程序的默认模块设置为 Front 模块，但无意中破坏了我们的链接，因为[http://domain.com/front/users/list](http://domain.com/front/users/list)现在生成为[http:// /domain.com/users/list](http://domain.com/users/list)，现在指向错误的操作。

我们正在使用 URL 视图帮助程序（即`$this->url(array('module' => 'front', 'controller' => 'users', 'action' => 'list'));`）生成链接，但是由于将默认模块切换到 Front 模块，因此省略了“front” URI 段。

我完全理解为什么会这样，但我们避免重命名 Front 模块下的所有控制器以避免冲突。

我的问题是，有没有一种方法可以指示 URL 视图助手*始终*包含“前端”模块 URI 段，即使它已经设置为默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:40:57.400

> 我的问题是，有没有一种方法可以指示 URL 视图助手始终包含“前端”模块 URI 段，即使它已经设置为默认值？

您可以创建自己的具有相同名称的 url 视图助手并覆盖默认的 url 视图助手，将其添加到引导程序中的 Zend_View 对象。

```
 $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('viewRenderer');
    if (null === $viewRenderer->view) 
    {
        $viewRenderer->initView();
    }

    $view = $viewRenderer->view;

    $view->addHelperPath('/path/to/some/helpers', 'My_View_Helper'); 
```

现在创建类 My_View_Helper_Url 让它扩展 Zend_View_Helper_Url 覆盖 url 方法。这是有关此过程的参考表格 ZF doc

> 事实上，您可以使用 addHelperPath() 方法“堆叠”路径。当您向堆栈添加路径时，Zend_View 将查看请求的帮助器类的最新添加路径。这允许您使用自己的自定义助手添加（甚至覆盖）助手的初始分布。

话虽如此，我认为[http://domain.com/users/list](http://domain.com/users/list)应该首先正常工作，因为您已将默认模块指定为前面。

# objective-c - 应将各种变量和方法类型放在标头中的位置

> ID：11007057
> 
> 赞同：1
> 
> 时间：2012-06-13T01:23:43.683
> 
> 标签：objective-c, variables, compiler-errors, declaration, header-files

我注意到，如果我将某些声明放在头文件的某些位置，则会出现编译错误。我已经在代码中添加了关于我认为某些事情的去向的注释；他们是正确的吗？

```
@interface Level : CCNode { 
    //Instance variables?
    PlayBackgroundLayer* playBGLayer;
    PlayUILayer* playUILayer;
    PlayElementLayer* playElementLayer;
}

//Static methods?
+(void) InitLevel: (int) levelNumber;
+(Level*) GetCurrentLevel;

//Property declarations for instance variables?
@property (nonatomic, retain) PlayBackgroundLayer* playBGLayer;
@end

//Static variables?
Level* currentLevel;
PlayTilemapLayer* playTilemapLayer; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:30:20.480

实例变量通常不需要显式声明。它们是在您`@synthesize`拥有财产时创建的。但是，如果您确实需要它们，则（新的）正确位置*位于*实现*块的顶部：

```
@implementation Level
{
    PlayBackgroundLayer* playBGLayer;
    PlayUILayer* playUILayer;
    PlayElementLayer* playElementLayer;
} 
```

这些不是静态方法，[它们是类方法](https://stackoverflow.com/a/8089623/603977)，但是，是的，这就是你声明它们的地方。有些人喜欢将`@property`声明放在类方法*之前*，但这是见仁见智的问题。实例方法遵循这两种方法，尽管从技术上讲顺序并不重要——也就是说，编译器并不关心，这只是可读性的问题。

不过，这些顶级变量需要放在头文件以外的地方。如果你把它们放在那里，你会得到编译错误，因为每个导入头文件的文件都会重新声明这些变量的存储空间，这是不允许的。

通常您将这些变量放入 .m 文件中。如果您希望它们仅从那里可见，您将使用`static`. 如果您希望它们从导入标头的其他文件中可见，您可以离开`static`并在标头中声明变量`extern`：

```
extern Level* currentLevel; 
```

这让编译器知道变量的存储是在别处保留的。

* * *

*参见TOCPL 中的[“类接口”](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocDefiningClasses.html#//apple_ref/doc/uid/TP30001163-CH12-TPXREF122)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:30:32.897

你在所有方面都是正确的，除了一个。您的最后一个变量不是静态变量，它们是全局变量。静态变量只是用 static 关键字声明的变量，它们的含义与其他语言略有不同。它们不是类变量，它们是仅对声明它们的文件可见的变量，并且只有在声明它的范围内才可见（如果您在函数中声明它，其他函数将看不到它）。但是，正如您所料，无论您有多少实例，它们都只声明一次。如果您在接口之外声明某些内容而没有像您所做的那样使用 static 关键字，其他类将导入它们。但是，这不是实现此目的的理想方法（如果多个类导入此标头，您可能会遇到重新定义错误）。

另外，需要注意的是，属性不需要有明确的支持变量（如果您使用`@synthesize`关键字，编译器将为您创建一个），但当然，如果您想要一个，它没有任何问题。

最后，您应该注意，您的~~*静态方法*~~ *类方法*不是*实例方法*的唯一原因是因为它们以**加号 (+)**字符而不是**减号 (-)**字符开头。

# css - 以粗体显示 cufon

> ID：11007060
> 
> 赞同：0
> 
> 时间：2012-06-13T01:23:51.320
> 
> 标签：css, fonts, cufon

我需要在鼠标悬停时以粗体或 font-weight:700 设置 cufon 文本；

代码是这样的

Cufon.replace('h1') ('h2') ('h3') ('h4') ('h5') ('h6') ('.navigation ul',{hover:true})('.slide -more') ('.heading1-slide') ('.heading2-slide') ('ul.navigation',{hover:true})('.more-button') ('.page-navigation',{ hover:true}) ('.date') ('.month') ('.wp-pagenavi') ;

我需要在悬停时将 .navigation ul 和 ul.navigation 设置为粗体。怎么能这样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:36:25.073

您可以使用`{hover:true}`. 查看示例

```
Cufon.replace('h2, h3, h4', {hover: true}); 
```

我认为您需要上传字体（粗体）以实现粗体样式。例如，如果你想为`regular,bold and itali`c 使用 Book Antiqua 字体，那么你需要上传实际的字体书 Antiqua`(Regular, bold & italic)`并生成代码。

# ruby-on-rails - 在 ROR 上使用 ActionMailer 发送电子邮件确认时出错

> ID：11007061
> 
> 赞同：2
> 
> 时间：2012-06-13T01:23:57.617
> 
> 标签：ruby-on-rails, actionmailer, confirmation-email

我正在 Windows 7（64 位）上使用 ROR 开发网站。我正在尝试设置我的网站，以便在其上创建新登录名的人收到确认电子邮件。我正在使用 ActionMailer 发送电子邮件确认。我正在尝试将其配置为使用 Gmail SMTP 服务器发送确认电子邮件。（这只是为了测试。一旦它工作，我可以在部署服务器上使用其他东西。）

我收到此错误：

```
 Application-specific password required 
```

以下是 development.rb 的代码片段：

```
 config.action_mailer.raise_delivery_errors = true
        config.action_mailer.delivery_method = :smtp

        # these options are only needed if you choose smtp delivery
       config.action_mailer.smtp_settings = {
       :address        => 'smtp.gmail.com',
       :port           => 587,
       :domain         => 'gmail.com',
       :authentication => :login,
       :user_name      => 'my_login@gmail.com',
       :password       => 'my_application_specific_password'
       } 
```

为什么即使我为此目的生成了一个新的应用程序专用密码并正在使用它，我也会收到此错误？如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T01:31:51.137

我认为您可能在用于发送电子邮件的 Google 帐户上启用了额外的两步安全功能。这可能要求您使用通过短信发送到您手机的特殊代码登录；或者对于特定的不兼容应用程序，创建一个“应用程序特定密码”。

有关应用程序特定密码的更多详细信息，请[点击此处](http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833)。

# java - 严重：jdbcrealm.invaliduserreason WEB9102：Web 登录失败

> ID：11007071
> 
> 赞同：1
> 
> 时间：2012-06-13T01:26:07.377
> 
> 标签：java, forms-authentication, security, jdbcrealm

我正在尝试使用 MySQL 数据库获取我的登录表单并继续收到以下错误：

[更新] --> 我今天做了一些修改，这就是我现在得到的：

```
SEVERE: jdbcrealm.invaliduserreason
WARNING: WEB9102: Web Login Failed: com.sun.enterprise.security.auth.login.common.LoginException: Login failed: Security Exception
WARNING: WEB9102: Web Login Failed: com.sun.enterprise.security.auth.login.common.LoginException: Login failed: Security Exception
WARNING: WEB9102: Web Login Failed: com.sun.enterprise.security.auth.login.common.LoginException: Login failed: Security Exception 
```

这就是我从堆栈跟踪中得到的全部信息。我正在关注本教程：[http ://blog.eisele.net/2011/01/jdbc-security-realm-and-form-b​​ased.html](http://blog.eisele.net/2011/01/jdbc-security-realm-and-form-based.html)

这是我在 glassfish-web.xml 上的映射：

```
 <security-role-mapping>
    <role-name>user</role-name>
    <group-name>user</group-name>
  </security-role-mapping> 
```

这是我的 web.xml：

```
<security-constraint>
    <display-name>user</display-name>
    <web-resource-collection>
        <web-resource-name>Users Area</web-resource-name>
        <description>Protected Users Area</description>
        <url-pattern>/user/*</url-pattern>
        <http-method>GET</http-method>
        <http-method>PUT</http-method>
        <http-method>HEAD</http-method>
        <http-method>POST</http-method>
        <http-method>OPTIONS</http-method>
        <http-method>TRACE</http-method>
        <http-method>DELETE</http-method>
    </web-resource-collection>
    <auth-constraint>
        <description/>
        <role-name>user</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>jdbcRealm</realm-name>
    <form-login-config>
        <form-login-page>/login.jsp</form-login-page>
        <form-error-page>/login-error.jsp</form-error-page>
    </form-login-config>
</login-config>
<security-role>
    <description>user security role</description>
    <role-name>user</role-name>
</security-role> 
```

这是我的登录表单：

```
 <form action="j_security_check" class="form" method="post">

            <p class="email">
                    <input type="text" name="j_username" id="j_username"/>
                    <label for="j_username">E-mail / Username</label>
            </p>

            <p class="pwd">
                    <input type="password" name="j_password" id="j_password" />
                    <label for="j_password">Password</label>
            </p>

            <p class="submit">
                    <input name="login" type="submit" value="Login" /> 
                    <input name="reset_pwd" type="submit" value="Reset Password">                                                                                                                              
            </p>

    </form> 
```

这是我在服务器中设置的领域的屏幕截图。我暂时没有使用加密来简化事情： ![领域](../Images/3ad6494489ff53e016ae4c420bec1b01.png)

因为除了我在上面发布的内容之外，我在堆栈中没有其他内容。我真的不确定出了什么问题。如果有人能推动我朝着正确的方向前进，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T01:09:29.587

在 Glassfish 中的 jdbcRealm 设置中，请务必在算法中写入“none”（而不是 SHA-256 或其他任何内容）。如果您将该字段留空，它将不起作用。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T13:45:34.733

为我修复它的愚蠢而整洁的东西；领域是表和列名中的小写字母，尤其是我的 mysql 数据库中的大写字母。请记住检查 Realms 中表的大小写敏感性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-26T08:12:33.737

如果您使用的是 Glassfish 4，您需要填写字段数据库用户和数据库密码，它们出现在设置 -> 服务器配置 -> 安全 -> 领域 -> (jdbcRealm)

[在此处输入图像描述](http://i.stack.imgur.com/QLk0c.png)

# sql - 几何线与多边形的交点返回 null

> ID：11007075
> 
> 赞同：1
> 
> 时间：2012-06-13T01:26:38.507
> 
> 标签：sql, sql-server, sql-server-2008, gis, geospatial

我正在尝试根据线中点与多边形相交的结果设置一列。我知道我可以用类似的东西来调用线中点

```
 X_Coord = SHAPE.STPointN(SHAPE.STNumPoints()/2).STX ,  
  Y_Coord = SHAPE.STPointN(SHAPE.STNumPoints()/2).STY 
```

但如何将其传递给

```
update GRSM_ROADS
set QuadName = USGS_24K_TOPOMAP_BOUNDARIES.NAME
from  GRSM_ROADS
inner join USGS_24K_TOPOMAP_BOUNDARIES
on dbo.GRSM_ROADS.Location_ID = GRSM_ROADS.Location_ID
where (USGS_24K_TOPOMAP_BOUNDARIES.SHAPE.STIntersects(dbo.GRSM_ROADS.shape) = 1); 
```

是一个谜。我尝试了运行的 stcontains 和 stintersects，但输出为空，这表明我没有正确确定线中点何时或何处与多边形相交。

SQL 2008 R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:55:33.683

```
where (USGS_24K_TOPOMAP_BOUNDARIES.SHAPE.STIntersection(dbo.GRSM_ROADS.shape).STDimension() = 1); 
```

标准尺寸解决了它！

# android - 正在生成空的 Android 资源 xml 文件

> ID：11007085
> 
> 赞同：2
> 
> 时间：2012-06-13T01:28:17.320
> 
> 标签：android, eclipse

每次我修改我的任何资源 xml 文件（布局、菜单、值）时，我都会得到：
`Error in an XML file: aborting build.`
当我删除（空）...out.xml 文件时，重新启动 Eclipse 并再次运行该文件，一切都很好！Eclipse Indigo，W7 上的 Android SDK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T23:10:56.400

似乎这是Eclipse的一个怪癖。我发现只有在保存 xml（例如清单或资源布局）后我直接进入构建时才会出现问题。如果我先在 Eclipse 中关闭 xml，则不会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:20:01.580

当您尝试运行 xml 文件时，您会收到该错误。您无法运行 android xml 文件。了解 Eclipse 如何尝试运行您的 xml 文件。

# linux - Linux gedit 和终端

> ID：11007086
> 
> 赞同：3
> 
> 时间：2012-06-13T01:28:27.470
> 
> 标签：linux, terminal, gedit

每当我使用 gedit 编写代码时，我都可以访问 gedit 或终端，但不能同时访问两者。例如，当我输入 gedit hello.c 时，linux 会在 gedit 中打开文件 hello.c。现在，虽然 gedit 仍在显示 hello.c，但如果不关闭 gedit 中的 hello.c，我将无法在终端中输入任何内容。

我怎样才能解决这个问题，以便我可以同时积极使用终端和 gedit？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T01:30:32.570

类型`gedit hello.c &`

或者，如果您已经在没有＆符号的情况下键入了它，请按`Ctrl`+`Z`将其发送到后台，然后键入`bg`以启用 gedit，正如 David 指出的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:33:59.147

如果您已经开始 gedit，请按 CTRL + Z，然后键入

```
bg && disown 
```

dis 将在后台运行 gedit 并从终端中删除它（所以如果你关闭终端，gedit 不会死）

# hosting - 使用静态/固定 IP 地址托管

> ID：11007088
> 
> 赞同：0
> 
> 时间：2012-06-13T01:28:40.533
> 
> 标签：hosting, ip, host, static-ip-address

我一直在寻找具有静态/固定 IP 地址的主机。现在我使用 mediatemple 的网格服务器，因为它是一个共享环境，所以 IP 地址是动态的并且随机变化。

我的问题是我的服务器上有一个从 ftp 站点获取数据的脚本。要通过 ftp 访问数据，我必须使用 IP 地址、用户名和密码进行身份验证。因为IP地址不断变化，我无法访问数据。

一种替代方法是询问数据公司他们是否会接受一系列 IP 地址或通配符，但他们不会。他们只会批准一个 IP 地址供下载。

另一种选择是购买自我管理的服务器。我不想管理自己的服务器，也没有这样做的专业知识。因此，我需要一种解决方案，例如带有 cpanel 但具有固定 IP 地址的共享环境（低成本）。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:36:56.457

您应该寻找“托管服务器”或“VPS”解决方案。

您选择哪个主机取决于您。许多主机提供此类解决方案，较小的主机可能比“大牌”托管公司更适合您的预算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:56:01.567

这真是令人惊讶……通常在您的网站托管在共享 IP 上的共享主机帐户中，共享 IP 地址始终是固定的，很少更改。我认为您现在正在使用 CDN 托管，因此您的数据传输 IP 地址会根据您的访问者位置而有所不同。

我在共享主机上托管我的各种网站，例如 thewebhostingdir.com 等[http://www.accuwebhosting.com/](http://www.accuwebhosting.com/) ... 并且它们的 IP 地址自托管设置以来是固定的。

我建议您更改您的托管服务提供商。你现在不需要VPS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:13:17.820

我找到了解决方案。Godaddy vps 虚拟服务器起价仅为 29 美元。

# php - PHP ssh2_auth_pubkey_file()：使用公钥验证失败：密钥数据无效，不是 base64 编码

> ID：11007090
> 
> 赞同：6
> 
> 时间：2012-06-13T01:29:02.333
> 
> 标签：php, ssh

在 PHP5.3.3（在 CentOS 和 apache2 上）中，我试图通过 php 脚本连接到 SFTP。该代码从构造函数中获取密钥和服务器详细信息

```
function __construct(){
    $this->host     = 'servername.loc';
    $this->port     = SFTP_PORT;
    $this->auth_user    = 'username';
    $this->auth_pub     = '/data/home/username/.ssh/id_rsa.pub';
    $this->auth_priv    = '/data/home/username/.ssh/id_rsa';
    $this->auth_pass    = null;
    $this->connection   = null;
} 
```

并使用这些详细信息来创建连接。

```
 private function connect(){
    if (!($this->connection = ssh2_connect($this->host, $this->port))) {
        $this->response  = array('code' => "20",
                                 "message" => "Error connecting to SFTP server.");
        return false;
    }
    if (!ssh2_auth_pubkey_file($this->connection, $this->auth_user, $this->auth_pub,
                                $this->auth_priv, $this->auth_pass)) {
        $this->response  = array('code' => "40",
                                 "message" => "Error authenticating to SFTP server with key.");
        $this->disconnect();
        return false;
    }
} 
```

我得到的结果是调用`ssh2_auth_pubkey_file()`.

错误是：

> “ ***ssh2_auth_pubkey_file(): 使用公钥对 USERNAME 进行身份验证失败：密钥数据无效，不是 base64 编码***”

密钥上没有密码，我可以通过 CLI ssh 使用这些密钥手动连接到服务器。

我难住了。我需要以某种方式对密钥进行编码吗？建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-22T13:43:07.403

您提到的先决条件，即 pubkey 文件没有任何评论，甚至没有尾随换行符是不正确的（当您仔细考虑时，换行符是荒谬的）。

如果你的脚本失败，你有概率。很快偶然发现了 ssh2 错误，当它被编译为 wuth libgcrypt 而不是 openssl 时，它会导致 ssh2 失败。解决方法是使用 openssl 创建 PEM 格式的私钥文件的 PEM 格式副本：

```
~/.ssh> openssl rsa -in id_rsa -out id_rsa.pem 
```

然后，在 PHP 脚本中的 ssh2_auth_pubkey_file() 中，使用 id_rsa.pem 作为私钥文件而不是 id_rsa，并**省略**密码。那应该使它起作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T16:08:07.227

好吧，它表明，我在公开提问后找到了答案。在另一个带有开发评论的网站上找到了这个。

**d23d23 at gmail dot com**说： *“公钥必须在一行上，以密钥类型开头，1 个空格，后跟 keydata（没有换行符），后面不能跟注释。这是 libssh2 的限制，所以删除任何多余的使用您的密钥生成工具创建文件后从文件中获取数据。”*

因此，即使我使用 openssl 创建私钥和公钥，我也必须对其进行编辑以将其全部与上述密钥类型放在一行中。谢谢。

# objective-c - 在@interface、扩展中声明方法或根本不声明方法的指南

> ID：11007091
> 
> 赞同：2
> 
> 时间：2012-06-13T01:29:04.410
> 
> 标签：objective-c, methods, declaration

我一直在学习 Objective-C 中的面向对象编程，我对方法声明和实现有点困惑。

在我一直在学习的一些讲座中，教授在 .h 文件中声明公共方法，然后在 .m 文件中实现它们；`@implementation ClassViewController`或者他可以在 .m 文件中将它们声明为私有，并在该部分 中实现它们。

然而，有时他根本不声明方法，而只是跳到本`@implementation ClassViewController`节中的方法实现。

我如何区分在哪里声明公共或私有的东西，或者根本不需要声明任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:43:09.070

当您希望*外部类*可以访问该方法时，应**公开**声明方法，否则应**私下**声明。如果您重写了在超类中声明的方法，则不需要在其子类中再次声明它。至于在没有任何先前声明的情况下实现的方法，仍然可以调用该方法，但它仅对文件中它下面的方法“可见”，否则将引发警告。因此，很少这样做（而是私下声明），除非该方法打算成为@selector 的目标。

 **** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:53:21.357

简短的回答是所有方法都应该声明（公开或私下）。

但我怀疑你实际上看到你的教授所做的是重写一个已经在超类中*声明的方法。*

例如，如果你想`viewDidLoad`在你的 CustomViewController 中重写，你不会`viewDidLoad`再次声明，因为该方法已经在 UIViewController（超类）的标头中声明了。

您只需转到子类的实现并编写您的实现，`viewDidLoad`该实现将*覆盖*您继承的那个。如果你再去看讲座，我猜这就是你所看到的。***

# multithreading - Scala：corePoolSize 最大化 Actor 性能

> ID：11007103
> 
> 赞同：2
> 
> 时间：2012-06-13T01:29:59.840
> 
> 标签：multithreading, scala, actor

我正在尝试基于经典工作池模型制作 Scala 应用程序服务器。鉴于：

1.  机器有一个四核处理器
2.  有一个调度器actor，它专门用于阻塞网络 I/O 来监听
3.  工人演员都是非阻塞的。

corePoolSize 最大化性能的最佳价值是什么？理想情况下，当工作线程池的大小等于处理器内核的数量时，性能会最大化。所以在这种情况下，我猜最好的值是 5（调度程序为 1，工作程序为 4），或者我可以将值设置为 4 并覆盖调度程序参与者的调度程序方法，这样它就不会与工人共享线程池。

它是否正确？任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T06:44:58.343

只是一些提示。

> 理想情况下，当工作线程池的大小等于处理器内核的数量时，性能会最大化。

并不真地。以下是如何估计可以获得最大吞吐量的线程数：

```
N = C * U * (1 + W/C) 
```

其中`N = number of threads`, `C = number of CPU cores`, `U = target CPU utilization rate`, `W/C = Waiting time to Computing time ratio`（等待时间表示 IO 等）。

但请注意，上述等式仅考虑 CPU，而 CPU 并不是唯一需要管理的资源。调整响应时间也有点不同。

陈词滥调的答案是，您必须进行测试才能看到最佳选择。您可能可以使用上面的公式作为起点。另请注意，核心池大小！= 最大池大小。

# ruby - Ruby：从文本文件中选择随机行的优雅方法是什么？

> ID：11007111
> 
> 赞同：13
> 
> 时间：2012-06-13T01:31:24.303
> 
> 标签：ruby, file, io

我已经看到了一些非常漂亮的 Ruby 示例，我正在尝试转变我的想法，以便能够制作它们，而不仅仅是欣赏它们。这是我能想到的从文件中选择随机行的最佳方法：

```
def pick_random_line
  random_line = nil
  File.open("data.txt") do |file|
    file_lines = file.readlines()
    random_line = file_lines[Random.rand(0...file_lines.size())]
  end 

  random_line                                                                                                                                                               
end 
```

我觉得必须有可能以更短、更优雅的方式做到这一点，而无需将整个文件的内容存储在内存中。有没有？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-13T02:31:07.833

Ruby Array 类中已经内置了一个随机条目选择器：sample()。

```
def pick_random_line
  File.readlines("data.txt").sample
end 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-13T02:06:16.697

除了最近读取的行和返回的随机行的当前候选行之外，您可以在不存储任何内容的情况下执行此操作。

```
def pick_random_line
  chosen_line = nil
  File.foreach("data.txt").each_with_index do |line, number|
    chosen_line = line if rand < 1.0/(number+1)
  end
  return chosen_line
end 
```

所以选择第一行的概率为 1/1 = 1；第二行以 1/2 的概率被选中，所以一半时间保留第一行，一半时间切换到第二行。

然后以 1/3 的概率选择第三行 - 所以它有 1/3 的时间选择它，而另外 2/3 的时间它保留它选择的前两条中的任何一条。由于他们每个人都有 50% 的机会在第 2 行被选中，因此他们每个人都有 1/3 的机会在第 3 行被选中。

等等。在第 N 行，从 1-N 中的每一行都有 1/N 的机会被选中，并且一直保持在整个文件中（只要文件不是那么大到 1/（文件中的行数） ) 小于 epsilon :))。而且您只需通过文件一次，并且一次存储的行数不会超过两行。

**编辑**你不会用这个算法得到一个真正简洁的解决方案，但如果你想的话，你可以把它变成一个单行的：

```
def pick_random_line
  File.foreach("data.txt").each_with_index.reduce(nil) { |picked,pair| 
    rand < 1.0/(1+pair[1]) ? pair[0] : picked }
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-17T09:27:38.207

此功能完全符合您的需要。

它不是单行的。但它适用于**任何**大小的文本文件（除了零大小，也许:)。

```
def random_line(filename)
  blocksize, line = 1024, ""
  File.open(filename) do |file|
    initial_position = rand(File.size(filename)-1)+1 # random pointer position. Not a line number!
    pos = Array.new(2).fill( initial_position ) # array [prev_position, current_position]
    # Find beginning of current line
    begin
      pos.push([pos[1]-blocksize, 0].max).shift # calc new position
      file.pos = pos[1] # move pointer backward within file
      offset = (n = file.read(pos[0] - pos[1]).rindex(/\n/) ) ? n+1 : nil
    end until pos[1] == 0 || offset
    file.pos = pos[1] + offset.to_i
    # Collect line text till the end
    begin
      data = file.read(blocksize)
      line.concat((p = data.index(/\n/)) ? data[0,p.to_i] : data)
    end until file.eof? or p
  end
  line
end 
```

尝试一下：

```
filename = "huge_text_file.txt"
100.times { puts random_line(filename).force_encoding("UTF-8") } 
```

微不足道的（恕我直言）缺点：

1.  线越长，被选中的机会就越高。

2.  不考虑“\r”行分隔符（windows-specific）。使用带有 Unix 风格行尾的文件！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T01:45:38.533

这并不比你想出的好多少，但至少它更短：

```
def pick_random_line
  lines = File.readlines("data.txt")
  lines[rand(lines.length)]
end 
```

你可以做的一件事是让你的代码更加*Rubyish*就是省略大括号。使用`readlines`and`size`代替`readlines()`and `size()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T03:05:44.197

一个班轮：

```
def pick_random_line(file)
  `head -$((${RANDOM} % `wc -l < #{file}` + 1)) #{file} | tail -1`
end 
```

如果您抗议它不是 Ruby，请在今年的 Euruko 中找到一个名为*Ruby is like a Banana*的演讲。

PS：忽略 SO 不正确的语法高亮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T11:52:51.987

这是马克出色答案的较短版本，虽然不如戴夫的短

```
def pick_random_line number=1, chosen_line=""
  File.foreach("data.txt") {|line| chosen_line = line if rand < 1.0/number+=1}
  chosen_line 
end 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-13T02:51:13.767

统计文件，在零和文件大小之间选择一个随机数，查找文件中的那个字节。扫描到下一个换行符，然后读取并返回下一行（假设您不在文件末尾）。

# c++ - 数组中的向量

> ID：11007116
> 
> 赞同：0
> 
> 时间：2012-06-13T01:32:41.777
> 
> 标签：c++

如果我有一个向量数组，由于数组的连续存储性质，向量的大小调整能力会受到限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:37:23.823

是的，但不是你想的那样。

向量必须为其内容找到连续的地址空间。内存碎片可能会导致最大的连续块小于总可用内存。并且拥有许多向量会使碎片更有可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:34:47.527

不; 在内部，向量保存*指向*内存块的指针，而不是块本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T01:34:41.370

`resize`根本不会影响数组的内存。向量有一个指向实际存储的指针，因此调整大小会影响与数组无关的其他一些内存。数组中的所有内容基本上只是指向可能不同长度的内存块的指针。

此外，如果你有这样的事情：

```
std::vector<int> arr [5]; 
```

数组的内存将在堆栈上，向量的内存将在堆上。完全不同！

# ios - 如何以编程方式获取在模拟器上运行的应用程序的 SDK 版本？

> ID：11007118
> 
> 赞同：0
> 
> 时间：2012-06-13T01:33:19.110
> 
> 标签：ios

我正在尝试通过代码获取在模拟器上运行的版本/构建。

基本上我正在使用模拟器检查我的应用程序的各种功能，并希望根据我设置为当前的 SDK 来打开和关闭代码路径，而不是每次都手动进行（我的测试机有不同版本的SDK 和我在 4.1 和 5.1 之间切换电流以进行测试）。

所以想法是，当应用程序在模拟器上启动时，如果我应该运行特定的代码路径，我可以读取 SDK 的构建并了解槽匹配（我有一个执行匹配并打开和关闭功能的函数）或不。

我知道如何确定我是在 sim 上还是在设备上运行，但找不到有关如何通过代码获取 SDK 版本的参考资料，所以我基本上被卡住了。

当我在模拟器上运行应用程序时，是否有任何函数可以调用并返回当前安装的 iOS 的构建或版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:36:29.203

您可以获得当前版本的操作系统。

```
UIDevice *myDevice = [UIDevice currentDevice];
myDevice.systemVersion 
```

# expressionengine - 表达式引擎 - 隐藏 index.php 的 htaccess 不起作用。为什么？

> ID：11007120
> 
> 赞同：1
> 
> 时间：2012-06-13T01:33:28.787
> 
> 标签：expressionengine

我有一个带有四个（许可）站点的 MSM 安装。他们中的三个完美地工作并且表现得如他们应该的那样。第四个，目前正在建设中，似乎有自己的想法。主页会显示，但不会显示尝试添加其他模板或模板组的内容。我只得到

> 在此服务器上找不到请求的 URL /template-name/。

我仔细检查并确保 Enable Strict URLs 设置为 No 并且模板都正确同步。在这一点上，我在重复自己。有什么线索吗？

## 已编辑

我发现如果我将 index.php 插入到 URL 中，其他页面和模板就会显示出来，这让我相信我的 htacess 文件有问题。

这是我正在使用的代码（在其他网站上效果很好）：

```
# BEGIN ExpressionEngine Rewrite
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteRule ^(.*)$ /index.php?$1 [L]
</IfModule>
# END ExpressionEngine Rewrite 
```

任何线索为什么这不能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:56:49.260

原来是htaccess文件。我用以下内容替换了上面提到的重写，它解决了问题：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

# c - 文件系统在程序运行期间转换为只读

> ID：11007124
> 
> 赞同：1
> 
> 时间：2012-06-13T01:34:31.623
> 
> 标签：c, file-io, embedded-linux, usb-drive

我的程序有一个循环运行 initUSB() 然后多次运行 writeEssentials()。initUSB() 是一个将 USB 挂载到目录的函数。writeEssentials() 是一个打开文件并在其上附加数据然后关闭文件的函数。

在程序初始运行一分钟左右后，程序将报告文件系统为“只读”，并拒绝写入更多数据，直到再次运行 initUSB()。这是否发生在我将 fprintf() 放入文件指针中。作为一个临时解决方案，如果它变为只读，我让 writeEssentials() 重新安装驱动器。这可行，但我不想每分钟都重新安装驱动器。

为什么会发生这种情况，我该如何解决这个错误？

该程序在 TS-7800 上的 Debian 嵌入式 Linux 系统上运行。

**初始化USB：**

```
int initUSB(){
int i;
FILE * filecheck = fopen(HMITelemCheckFile, "r");
for(i = 0; i < 26; i++) {
    char usbMountFromPathTry[256];
    char sdanum[5];
    strcpy(usbMountFromPathTry, usbMountFromPath);
    sprintf(sdanum, "%c1", i+'a');
    strcat(usbMountFromPathTry, sdanum);
    if(!mount(usbMountFromPathTry, usbMountToPath, "vfat", (long)NULL, NULL)){
        printf("Mount successful\n");
        return 1;
    } else if(!mount(usbMountFromPathTry, usbMountToPath, "vfat", MS_REMOUNT, NULL)){
        printf("Mount successful\n");
        return 1;
    }
    printf("Mount error: ");
    printf("%s\n", usbMountFromPathTry);
}
printf("Mount ERROR\n");
return 0;
} 
```

**writeEssentials（）：**

```
void writeEssentials(){
FILE * file = fopen(usbMountEssentials, "a+");
fflush(file);
perror("file");
if(file == NULL){
    initUSB();
    printf("null file\n");
    return;
}
fprintf(file, "\n%s, ", getDate());
fprintf(file, "%s, ", getTime());
fprintf(file, "%1.2f, ", getSpeed());
fprintf(file, "%d, ", getRPM());
fprintf(file, "%d, ", getRegen());
fprintf(file, "%d, ", getAirgap());
fprintf(file, "%d, ", getBattery());
fprintf(file, "%.2f, ", *(getADCTemps()+COMPUTER_BOX_TEMP_INDEX));
fprintf(file, "%.2f, ", *(getBMS()+BMS_TEMP_INDEX+(BMS_NUM_VAR*0)));
fprintf(file, "%.2f, ", *(getBMS()+BMS_TEMP_INDEX+(BMS_NUM_VAR*1)));
fprintf(file, "%.2f, ", *(getBMS()+BMS_TEMP_INDEX+(BMS_NUM_VAR*2)));
fprintf(file, "%.2f, ", *(getMPPT()+MPPT_TEMP_INDEX+(MPPT_NUM_VAR*0)));
fprintf(file, "%.2f, ", *(getMPPT()+MPPT_TEMP_INDEX+(MPPT_NUM_VAR*1)));
fprintf(file, "%.2f, ", *(getMPPT()+MPPT_TEMP_INDEX+(MPPT_NUM_VAR*2)));
fprintf(file, "%.2f, ", *(getMPPT()+MPPT_TEMP_INDEX+(MPPT_NUM_VAR*3)));
fprintf(file, "%s, ", getLat());
fprintf(file, "%s, ", getLong());
int i;
for(i = 0; i < getNumErrors(); i++){
    //fprintf(file, "%s, ", getErrorText(*(getErrors()+i)));
}
fclose(file);
perror("close file error");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:40:20.110

检查`dmesg`。文件系统自发地变为只读通常表明检测到了一些损坏，因此内核将 FS 设置为只读以保护其免受进一步损坏。

# visual-studio-2010 - 如何在 Microsoft Visual Studio 2010 中制作项目的后续版本

> ID：11007127
> 
> 赞同：1
> 
> 时间：2012-06-13T01:34:44.087
> 
> 标签：visual-studio-2010, visual-studio, project-management

也许我只是想不出正确的关键字来从谷歌那里得到答案，但是这里有。

假设我有一个名为“项目”的项目。对于它的第一个版本，我将它存储在文件夹“Project_Version1”中，并将其解决方案、项目、构建 exe 等名称命名为“Project_Version1”。

现在我想制作项目的下一个版本，并将其命名为“Project_Version2”。目前要执行此操作，我复制原始文件夹，并将其重命名为“Project_Version2”，我也想将所有其他内部内容重命名为该文件夹。目前，我必须结合更改 Windows 资源管理器中的名称以及我的解决方案中的一些各种属性页面来做到这一点。

必须有更好的方法来做到这一点。有人如何制作他们项目的第二个版本，并将其文件与第一个版本分开存储？有没有办法重命名包含版本号的适当文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:56:44.333

事实上，有一种更好的方法可以做到这一点，它被称为版本控制。
如果您将源代码检查到[TFS](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/team-foundation-server/overview)（或[git](http://git-scm.com/)或任何其他[SCM 软件](http://en.wikipedia.org/wiki/Revision_control)）中，所有版本都将随着时间的推移进行跟踪。

如果您随后需要同时维护多个版本（例如，对于客户群，客户慢慢迁移到最前沿并且需要补丁来修复旧的受支持版本中的关键问题），您可以将这些版本保留为分支并有选择地合并更改。

如果您确实认为源代码控制非常适合管理您的版本（它也带来了许多其他好处），请考虑阅读一些帖子，例如[这个 git 教程](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide/)或[为什么使用版本控制](http://soundsoftware.ac.uk/why-version-control)。

* * *

如果你真的不能使用源代码控制，出于某种原因，我建议尽可能多地使用可以轻松更改的语言结构（例如使用 C# 和合理的 IDE、快速重构或使用其他语言）版本特定数据的严格重复数据删除）。
理想情况下，您的代码只有一个版本定义以及项目文件中的版本定义（可以将其设置为构建变量以快速更改）。

在这种情况下，您将复制项目，更改项目的代码版本和版本变量，并且假设很好地使用了相对路径等（没有硬编码版本！），快速重命名几个变量应该可以让您继续前进。

理想情况下，大部分文件名不会引用该版本。唯一引用版本的可能应该是包含目录、项目/解决方案文件和代码中的一些独立引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:45:55.703

您可以使用 MSBuild 做一些非常巧妙的技巧。例如，假设这是您的项目。

程序.cs：

```
namespace MyCustomBuild
{
    class Program
    {
        static void Main(string[] args)
        {
            System.Console.WriteLine("Hello World");
        }
    }
} 
```

如图所示创建您的 MSBuild 文件。构建.msbuild：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <MajorVersion>1</MajorVersion>
    <MinorVersion>0</MinorVersion>
  </PropertyGroup>

  <Target Name="Default">

    <CombinePath BasePath="$(MSBuildProjectDirectory)"
                 Paths="Program.$(MajorVersion).$(MinorVersion)">
      <Output TaskParameter="CombinedPaths" PropertyName="OutputDir"/>
    </CombinePath>

    <MakeDir Directories="$(OutputDir)"/>

    <Csc Sources="program.cs" 
         OutputAssembly="$(OutputDir)\Program.$(MajorVersion).$(MinorVersion).exe"/>

  </Target>

</Project> 
```

运行后`msbuild build.msbuild`，结果如下： ![在此处输入图像描述](../Images/e533eac13dcccf1a8b2557b1ebedeb20.png)

使我发布的内容更好的方法：

1.  使用[MSBuild 扩展包](http://msbuildextensionpack.codeplex.com/)AssemblyInfo。如果您在 AssemblyInfo.cs 文件中定义了版本信息，这将允许您更改版本信息。或者您可以查看[GenerateApplicationManifest Task](http://msdn.microsoft.com/en-us/library/6wc2ccdc)，它可以设置程序集版本，但目前可执行文件的文件版本将始终为 1.0.0.0
2.  实现某种像[这样的自动增量系统](http://weblogs.asp.net/bradleyb/archive/2005/12/02/432150.aspx)
3.  您可以使用[复制任务将所有源文件复制到版本控制目录中](http://msdn.microsoft.com/en-us/library/3e54c37h)

有很多东西需要学习，特别是如果您不熟悉 MSBuild，但它是一个功能强大的程序，可以进行 Visual Studio 甚至无法想象的自定义！请注意，解决方案文件 (.sln) 是 MSBuild 文件，即使它不是 xml。

希望这是您正在寻找的。正如其他人所提到的，我还建议您使用官方版本控制，但您似乎有一个想要自动化的特定任务，这是 MSBuild 的强项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T02:02:56.653

理想情况下，项目版本控制应该在源代码控制系统中完成，因为 Visual Studio 本身只是一个 IDE。

在不使用源代码控制系统的情况下，不幸的是，我不知道比您目前正在做的更好的解决方案。

# objective-c - 一个对象在 iOS5 上被释放，但在 iOS4 上没有。如何追踪？

> ID：11007132
> 
> 赞同：1
> 
> 时间：2012-06-13T01:35:25.240
> 
> 标签：objective-c, ios, error-handling

我有这个方法（别人写的！）

```
- (IBAction)showMasterPopover:(id)sender
{
if (_hiddenPopoverController && !(_hiddenPopoverController.popoverVisible)) {

// Inform delegate.
if (_delegate && [_delegate respondsToSelector:@selector(splitViewController:popoverController:willPresentViewController:)]) {
[(NSObject <MGSplitViewControllerDelegate> *)_delegate splitViewController:self popoverController:_hiddenPopoverController  willPresentViewController:self.masterViewController];
}

// Show popover.
[_hiddenPopoverController presentPopoverFromBarButtonItem:_barButtonItem permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

}
else if (_hiddenPopoverController.popoverVisible) 
{
    [_hiddenPopoverController dismissPopoverAnimated:YES];
} 
```

}

经过几个非常可重复的步骤

```
[_hiddenPopoverController presentPopoverFromBarButtonItem:_barButtonItem permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

使用以下内容使应用程序崩溃：

```
*** -[ServerFolderController respondsToSelector:]: message sent to deallocated instance 0x85a9080 
```

这会在 iOS5.x 上崩溃，但不会在 iOS4 上崩溃。有任何想法吗 ？从仪器中我收集到有一个僵尸对象。

我难住了！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:34:10.903

在 iOS5 中崩溃而不在 iOS4 中崩溃是正常的。根据我的个人经验，Apple 在 iOS5 中更改了许多内部“事物”，因此当 iOS4 中稳定时，我的应用程序可能会在 iOS5 中崩溃。但！！！在所有情况下，这都是我的错，我的错误是保留不足或自动释放错误。所以只有你可以在你的代码中找到“这个错误”。我认为您的委托对象有问题。

# c - 循环展开对内存绑定数据的影响

> ID：11007134
> 
> 赞同：1
> 
> 时间：2012-06-13T01:36:05.573
> 
> 标签：c, icc, intel-vtune, loop-unrolling, stencils

我一直在使用一段受内存密集限制的代码。我试图通过手动实现缓存阻塞、sw 预取、循环展开等在单个内核中对其进行优化。即使缓存阻塞显着提高了性能。但是，当我引入循环展开时，性能会大大下降。

我在所有测试用例中都使用带有编译器标志 -O2 和 -ipo 的 Intel icc 进行编译。

我的代码与此类似（3D 25 点模板）：

```
 void stencil_baseline (double *V, double *U, int dx, int dy, int dz, double c0, double c1,     double c2, double c3, double c4)
   {
   int i, j, k;

   for (k = 4; k < dz-4; k++) 
   {
    for (j = 4; j < dy-4; j++) 
    {
        //x-direction
            for (i = 4; i < dx-4; i++) 
        {
            U[k*dy*dx+j*dx+i] =  (c0 * (V[k*dy*dx+j*dx+i]) //center
                +  c1 * (V[k*dy*dx+j*dx+(i-1)] + V[k*dy*dx+j*dx+(i+1)])                 
                +  c2 * (V[k*dy*dx+j*dx+(i-2)] + V[k*dy*dx+j*dx+(i+2)])     
                +  c3 * (V[k*dy*dx+j*dx+(i-3)] + V[k*dy*dx+j*dx+(i+3)]) 
                +  c4 * (V[k*dy*dx+j*dx+(i-4)] + V[k*dy*dx+j*dx+(i+4)]));

        }

        //y-direction   
        for (i = 4; i < dx-4; i++) 
        {
            U[k*dy*dx+j*dx+i] += (c1 * (V[k*dy*dx+(j-1)*dx+i] + V[k*dy*dx+(j+1)*dx+i])
                + c2 * (V[k*dy*dx+(j-2)*dx+i] + V[k*dy*dx+(j+2)*dx+i])
                + c3 * (V[k*dy*dx+(j-3)*dx+i] + V[k*dy*dx+(j+3)*dx+i]) 
                + c4 * (V[k*dy*dx+(j-4)*dx+i] + V[k*dy*dx+(j+4)*dx+i]));
        }

        //z-direction
        for (i = 4; i < dx-4; i++) 
        {
            U[k*dy*dx+j*dx+i] += (c1 * (V[(k-1)*dy*dx+j*dx+i] + V[(k+1)*dy*dx+j*dx+i])
                + c2 * (V[(k-2)*dy*dx+j*dx+i] + V[(k+2)*dy*dx+j*dx+i])
                + c3 * (V[(k-3)*dy*dx+j*dx+i] + V[(k+3)*dy*dx+j*dx+i]) 
                + c4 * (V[(k-4)*dy*dx+j*dx+i] + V[(k+4)*dy*dx+j*dx+i]));

        }

    }
   }

 } 
```

当我在最内层循环（维度 i）上进行循环展开并分别以展开因子 2、4、8 分别在 x、y、z 方向上展开时，我在所有 9 种情况下都会出现性能下降，即在方向 x 上展开 2，展开在 y 方向上展开 2，在 z 方向上展开 2，在 x 方向上展开 4 ... 等等。但是当我在最外面的循环（维度 k）上执行循环展开 8 倍（也有 2 和 4）时，我获得 v.good 性能改进，甚至比缓存阻塞更好。

我什至尝试使用 Intel Vtune 分析我的代码。这似乎是主要由于远程 DRAM 服务的 1.LLC 未命中和 2.LLC 负载未命中造成的瓶颈。

我无法理解为什么展开最内层最快的循环会导致性能下降，而展开最外层、最慢的维度会带来性能提升。然而，后一种情况的这种改进是当我使用 icc 编译时使用 -O2 和 -ipo 时。

我不确定如何解释这些统计数据。有人可以帮助阐明这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:54:17.790

这强烈表明您正在通过展开导致指令缓存未命中，这是典型的。在现代硬件时代，自动展开不再意味着更快的代码。如果每个内部循环都适合一个缓存行，您将获得更好的性能。

您可以手动展开，以限制生成代码的大小，但这将需要检查生成的机器语言指令 - 及其位置 - 以确保您的循环位于单个缓存行内。高速缓存行通常为 64 字节长，并在 64 字节边界上对齐。

外循环没有相同的效果。无论展开级别如何，它们都可能位于指令缓存之外。展开这些会导致更少的分支，这就是您获得更好性能的原因。

“由远程 DRAM 服务的加载未命中”意味着您在一个 NUMA 节点上分配了内存，但现在您正在另一个节点上运行。答案是基于 NUMA 设置进程或线程亲和性。

在我使用的英特尔机器上，远程 DRAM 的读取时间几乎是本地 DRAM 的两倍。

# html - 我应该为侧边栏使用哪个 html5 标签？

> ID：11007135
> 
> 赞同：8
> 
> 时间：2012-06-13T01:36:10.660
> 
> 标签：html, tags

我正要使用“aside”标签，但显然它不适用于侧边栏。

那么，我应该为包含相关文章链接、添加的最新文章和热门文章的侧边栏使用什么 HTML 5 标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T01:45:12.060

[侧边栏的最佳 HTML5 标记](https://stackoverflow.com/questions/8407805/best-html5-markup-for-sidebar)

但是由于您的侧边栏显示了指向其他页面的链接集合，所以我会选择`<nav>`

更多：[http ://www.ibm.com/developerworks/library/x-html5/](http://www.ibm.com/developerworks/library/x-html5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:44:14.527

您可以`<aside></aside>`用于侧边栏。

如需更多 HTML5 参考，请参阅[w3school 的 HTML5 标签参考](http://www.w3schools.com/tags/default.asp)。

# vb6 - Visual Basic 6.0 项目构建问题

> ID：11007136
> 
> 赞同：0
> 
> 时间：2012-06-13T01:36:15.870
> 
> 标签：vb6

> **可能重复：**
> [“对象'~'的方法'~'失败”是什么意思？](https://stackoverflow.com/questions/1302026/what-does-method-of-object-failed-mean)

我正在尝试构建一个 VB 6.0 项目。我已经很多年没有这样做了，也不知道这个弹出消息是什么意思。

![在此处输入图像描述](../Images/ffa03621ccc61508a666e1e74c26252c.png)

我的第一个想法是缺少某些组件，但是我不确定这是否是什么意思。即使它确实表示缺少组件，如何找出缺少哪个组件？

提前感谢您的帮助。

副部

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T01:50:12.873

点击`Project`-->`References`菜单并检查是否有任何标记为缺失的引用。

# objective-c - ObjC：将变量作为引用存储在数组中

> ID：11007144
> 
> 赞同：-1
> 
> 时间：2012-06-13T01:37:25.680
> 
> 标签：objective-c

我正在尝试创建一个调试类菜单，在其中我将一个变量传递给一个函数，它会创建按钮来调整变量和要显示的标签。我正在尝试将变量存储在一个数组中，如下所示：

```
(void)init
{
    int variableArray[10];
}

-(void)addDebugVariable:(NSString*)name value:(int*)variable
{
    variableArray[0] = variable;
}

-(void)plusButtonTapped:(CCMenuItem*)button
{
    int index = (int)[button tag];
    debugVariables[index]++;
    [debugValueLabels[index] setString:[NSString stringWithFormat:@"%f", debugVariables[index]]];
} 
```

我用这种方法遇到了两个问题。当我按下加号按钮时，变量增加了 4 而不是 1。我也无法将属性变量传递给我的函数（例如：self.scale、self.gravity）。

这是实现调试类的正确方法吗？当按下按钮时，如何正确存储变量的地址并从另一个类修改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:05:24.910

您发布的代码不可能工作，并且太混乱以至于任何人都无法帮助您。看起来你只是在张贴零碎的东西。

您的 init 方法正在定义一个局部变量 variableArray，一旦 init 例程完成，它将不复存在。

然后你有另一个方法，addDebugVariable，它将一个指针指向一个 int，并将它分配给另一个变量的索引 0，该变量也称为 variableArray。那个 variableArray 在哪里定义？它是您类的实例变量吗？如果你想给它分配一个整数值，你应该使用这样的代码：

```
variableArray[0] = *variable; 
```

addDebugVariable 方法接受一个你从不使用的字符串。这是为了什么？

然后在您的第三种方法 plusButtonTapped 中，更改另一个您从未提及的数组变量 debugVariables。您说该值增加了 4。这通常意味着您正在处理指针变量而不是标量变量。debugVariables 是如何声明的？

最后，在 plusButtonTapped 中，您在格式字符串中使用了“%f”。那是给花车的。我以为你在处理整数数组？

# ruby-on-rails - 在 Rails 中用于片段缓存的 Memcached

> ID：11007145
> 
> 赞同：1
> 
> 时间：2012-06-13T01:37:28.423
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, memcached

我试图找出为我的场景设置组织缓存系统的最佳方法：

我的网络应用程序有“热门电影”，基本上就像 twitter 的热门话题——热门话题。我编写了函数，它返回一个包含 5 个对象`Movie.trending`的数组。`Movie`然而，由于计算热门电影是相当 CPU 密集型的，并且它会显示在每一页上，我想缓存结果并让它在 5 分钟后过期。理想情况下，我希望能够`Movie.trending`从代码中的任何位置调用，并假设缓存将按照我的预期工作——如果结果是 5 分钟或更早，则更新结果，否则，提供缓存的结果。

对于这样的任务，片段缓存是否是正确的选择？我应该使用任何其他宝石吗？我没有使用 Heroku。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:55:46.493

要达到此模型的缓存，您可以尝试 Rails.cache.fetch，请参见下面的示例：

```
# model - app/models/movie.rb
class Movie
  def self.trending
    Rails.cache.fetch("trending_movies", :expires_in => 5.minutes) do
      # CPU intensive operations
    end
  end
end

# helper - app/views/helpers/application.rb
module ApplicationHelper
  def trending_movies
    content_tag :div do
      Movie.trending
    end
  end
end

# view - app/views/shared/_trending_movies
trending_movies 
```

要在开发模式下测试它，不要忘记为特定环境打开缓存

# php - 从远程服务器提供大文件下载

> ID：11007146
> 
> 赞同：0
> 
> 时间：2012-06-13T01:37:33.070
> 
> 标签：php, stream, download, readfile

我们有托管在 RapidShare 上的文件，我们希望通过我们自己的网站提供这些文件。基本上，当用户请求时`http://site.com/download.php?file=whatever.txt`，脚本应该将文件从 RapidShare 流式传输给用户。

我唯一难以理解的是如何正确播放它。我想使用 cURL，但我不确定是否可以分块读取 RapidShare 的下载内容，然后将它们回显给用户。到目前为止，我想到的最好方法是结合使用 fopen、fread、向用户回显文件块、刷新并重复该过程，直到传输整个文件。

我也知道 PHP`readfile()`函数，但这会是最好的选择吗？请记住，这些文件可能有几 GB 的大小，虽然我们有 16GB RAM 的服务器，但我希望尽可能降低内存使用率。

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:51:23.430

HTTP 有一个名为“Range”的标头，它基本上允许您获取文件的任何块（知道您已经知道文件大小），但是由于 PHP 不支持多线程，我看不到使用的任何好处它。

Afaik，如果您不想消耗所有 RAM，那么唯一的方法是分两步走。

`fopen()`首先，使用/ （或任何允许您使用流的 php 函数）流式传输远程文件`fread()`，将读取分成小块（2048 位可能就足够了），将结果写入/附加到 a `tempfile()`，然后“回显”回您的用户通过读取临时文件。

这样，即使是文件 2To 基本上也会消耗 2048 位，因为只有文件的块和句柄在内存中。

您还可以编写某种代理管理器来缓存并保留已下载的文件，以避免在文件被大量下载时远程读取过程（并将其保留在本地给定时间）。

# ruby - Rails 3多态关联，具有多个内容项的用户模型？

> ID：11007151
> 
> 赞同：2
> 
> 时间：2012-06-13T01:38:41.913
> 
> 标签：ruby, ruby-on-rails-3, activerecord, polymorphic-associations

在 Rails 3 中，我试图对用户内容系统进行建模，用户可以在其中发布不同类型的内容，例如便笺、照片、网址等。

从 Java/C# OO 的角度来看，我将在用户和表示内容项的接口之间使用多态关系，例如称为`IUserContent`.

我正在努力寻找一个符合我期望的示例，这是我首先尝试的，简而言之，我对 ActiveRecord 中多态关联的实现感到困惑。

```
# user.rb model - includes...

has_many :notes, :as => :postable, :dependent => :destroy, :inverse_of => :postable
has_many :urls, :as => :postable, :dependent => :destroy, :inverse_of => :postable
has_many :photos, :as => :postable, :dependent => :destroy, :inverse_of => :postable

# url.rb ... 

belongs_to :postable, :polymorphic => true, :inverse_of => :urls

# photo.rb

belongs_to :postable, :polymorphic => true, :inverse_of => :photos

# note.rb

belongs_to :postable, :polymorphic => true, :inverse_of => :notes 
```

我仍然只是按照我找到的示例进行操作，坦率地说，这感觉就像 User 是多态目标，而不是内容。

我想我想要这样的东西......

```
# within user.rb

has_many :postable, :as => :postable, dependent => :destroy, :inverse_of => :users

# photo.rb 
# url.rb
# note.rb
# all have the following...

belongs_to :user, :polymorphic => true, :inverse_of => :postable 
```

...在正确的方向上寻找一些指示。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:12:24.180

您可以这样做的唯一方法是，如果所有这些类都继承自同一个基类，例如：

```
class User < ActiveRecord::Base
  has_many :postable, :as => :postable, :dependent => :destroy, :class_name => 'Postable'
end

class Postable < ActiveRecord::Base
  belongs_to :user, :polymorphic => true
end

class Photo < Postable
end

class Url < Postable
end

class Note < Postable
end 
```

因此，您**必须**使用 ActiveRecord 单表继承来建模这种关系。

# xml - XPath 能否仅返回具有 X 子节点的节点 - 带有命名空间？

> ID：11007152
> 
> 赞同：1
> 
> 时间：2012-06-13T01:38:44.583
> 
> 标签：xml, xpath

这个问题是 XPath 是否只返回具有 X 的子节点的节点的延续[？](https://stackoverflow.com/questions/105613/can-xpath-return-only-nodes-that-have-a-child-of-x/11007128#11007128).

我想找到所有有 foo 的“宠物”，其中一些宠物有命名空间，而其他宠物没有。

是否可以使用 XPath 仅选择具有特定子元素的节点？例如，从这个 XML 中，我只想要 pets 中具有“bar”子项的元素。因此，生成的数据集将包含蜥蜴和猪元素。

```
<pets xmlns="urn:cat-org:v1">
  <cat>
    <foo>don't care about this</foo>
  </cat>
  <dog xmlns:v1="urn:cat-org:v1">
     <v1:foo>not this one either</foo>
  </dog>
  <lizard>
     <bar>lizard should be returned, because it has a child of bar</bar>
  </lizard>
  <pig xmlns:v55="urn:cat-org:v1">
     <v55:bar>return pig, too</bar>
  </pig>
</pets> 
```

任何建议都会动摇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T02:04:17.877

> 例如，从这个 XML 中，我只想要 pets 中具有“bar”子项的元素。

**使用**：

```
/*/*[*[local-name() = 'bar']] 
```

这将选择顶部元素的所有子元素，这些子元素至少具有一个具有本地名称`"bar"`的子元素（无论前缀是否存在）。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select="/*/*[*[local-name() = 'bar']]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**（更正为格式正确）：

```
<pets xmlns="urn:cat-org:v1">
  <cat>
    <foo>don't care about this</foo>
  </cat>
  <dog xmlns:v1="urn:cat-org:v1">
     <v1:foo>not this one either</v1:foo>
  </dog>
  <lizard>
     <bar>lizard should be returned, because it has a child of bar</bar>
  </lizard>
  <pig xmlns:v55="urn:cat-org:v1">
     <v55:bar>return pig, too</v55:bar>
  </pig>
</pets> 
```

**计算 XPath 表达式并将所选元素复制到输出**：

```
<lizard xmlns="urn:cat-org:v1">
   <bar>lizard should be returned, because it has a child of bar</bar>
</lizard>
<pig xmlns="urn:cat-org:v1" xmlns:v55="urn:cat-org:v1">
   <v55:bar>return pig, too</v55:bar>
</pig> 
```

# django - 如何在不删除记录的情况下更改用户组

> ID：11007157
> 
> 赞同：2
> 
> 时间：2012-06-13T01:39:48.750
> 
> 标签：django

在我的网站上，任何用户只有一个组。任何用户都可以更改他的组。所以它是由

```
user.groups.clear() 
```

和

```
user.groups.add(new_group) 
```

但是效率不高，因为有两个 SQL 查询：DELETE、INSERT。如何仅通过 UPDATE 查询更改组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T02:15:26.240

`User`并且`Group`使用 . 相互关联[`ManyToManyField`](https://docs.djangoproject.com/en/dev/topics/db/models/#many-to-many-relationships)。这意味着存在一个与两个实体相关的交集表，如果您没有指定要映射到它的模型（使用`through`属性），Django 会为您创建一个。看看消息来源，`django.contrib.auth.models`我发现情况就是这样。

`through`幸运的是，您可以使用manager 的属性（在本例中为）访问该中间模型`User.groups.through`。然后您可以像使用任何常规模型一样使用它。例子：

```
>>> alice = User.objects.create_user('alice', 'alice@example.com', 'alicepw')
>>> employee = Group.objects.create(name='employee')
>>> manager = Group.objects.create(name='manager')

>>> alice.groups.add(employee)
>>> alice.groups.all()
[<Group: employee>]

>>> alice_group = User.groups.through.objects.get(user=alice)
>>> alice_group
<User_groups: User_groups object>
>>> alice_group.group = manager
>>> alice_group.save()

>>> alice.groups.all()
[<Group: manager>]
>>> 
```

（为可读性添加了换行符）

# wordpress - WordPress：FireFox 未呈现所有 css 文件

> ID：11007158
> 
> 赞同：0
> 
> 时间：2012-06-13T01:39:51.297
> 
> 标签：wordpress

FireFox v14 没有在 WordPress 中渲染所有的 css 文件（两个）。Chrome 和 IE 中的所有内容都可以正常加载，但 IE 有其怪癖，但一个简单的兼容性元标记修复了该问题。现在我剩下的 FF 似乎只渲染了一半的 css

我需要发布什么来了解正在发生的事情。css 文件非常大，所以我无法放置所有内容。

已解决...在 css 文件中缺少 '

# mysql - .NET MySQL 连接器存储过程参数顺序

> ID：11007160
> 
> 赞同：1
> 
> 时间：2012-06-13T01:40:11.233
> 
> 标签：mysql, stored-procedures, mysql-connector

我正在遍历 Dictionary(Of String, String) 以将参数传递给 MySqlCommand，键是存储过程中变量 IN 的名称，值是我想在存储过程中使用的值。

似乎提供的存储过程参数取决于顺序，因为如果它们没有按照 IN 参数在存储过程中列出的顺序提供，它将不会执行并给出错误。

这是违反直觉的，因为我提供了参数的确切名称作为参数键，如果一个参数出现故障，则整个存储过程将变得无用。

有什么方法可以独立传递参数顺序吗？

# mysql - 构建数据库以处理未知的名称/值对

> ID：11007165
> 
> 赞同：0
> 
> 时间：2012-06-13T01:40:40.437
> 
> 标签：mysql, database, database-design, nvp

想法是这样的：我预计会收到数千个查询，每个查询都包含一定数量的名称值对；这些从关联数组开始，因此我可以很好地控制数据可能发生的情况。这些 NVP 因来源而异。例如，如果源是“A”，我可以接收数组（为了便于解释，使用 JSON 格式）：`{'Key1':'test1','key2':'test2'}`但如果源是“B”，我可以接收`{'DifferentKey1':'test1','DifferentKey2':'test2'}`我正在选择要存储在数据库中的键，所以在这种情况下，我只想`DifferentKey1`从源 B 的数组中进行选择，然后丢弃其余的。

我的主要问题是这些数组在技术上可能是完全不相关的内容。它们有一个非常普遍的关联（它们都是包含统计数据的数组），但它们非常不同（因为来源不同，即不同的游戏/运动）。

我在想 SQL：存储一个充满游戏及其各自 id 的表将是链接一般 NVP 字符串的好方法。例如：

```
Games table:
| id | name |
-------------
  1    golf
  2    soccer

NVP table
| id | game_id | nvp
   1      1      team1score=87;team2score=94;team3score=73;
   2      2      team1score=2;team2score=1;extratime=200;numyellowcards=4; 
```

希望这足够清楚。你明白我的意思吗？如果我可能使用的数据量不确定，我该如何构建表格？谢谢。

编辑：我想我应该注意，显然这个设置会起作用，但是它是最好的性能吗？也许不吧？不太清楚，看看大家有什么办法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:46:40.983

SQL 数据库非常适合高度相关的数据 - 但在这种数据不是关系且没有固定模式的情况下，您最好使用 NoSQL 解决方案。有很多，我还没有充分使用它们来确定什么最适合你。如果您的数据可以放入 RAM，那么 redis 就很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-21T13:32:40.217

在关系数据库中存储名称/值对的常用方法称为[“实体/属性/值”](https://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)。你会发现[很多](https://stackoverflow.com/questions/870808/entity-attribute-value-database-vs-strict-relational-model-ecommerce)关于[Stack Overflow](https://stackoverflow.com/questions/4066463/should-i-use-eav-model?rq=1)的[讨论](https://stackoverflow.com/questions/494158/best-beginner-resources-for-understanding-the-eav-database-model?rq=1)。

这完全取决于您的应用程序想要对数据做什么。存储很容易 - 查询要困难得多。

如果您正在构建一个体育应用程序，您可能有想要支持的领域概念 - 对于足球，根据所玩的比赛显示联赛排名。对于高尔夫，显示小鸟或老鹰的数量。您可能希望显示特定球队/球员在一个赛季中参加的所有比赛。

有些东西很容易在关系数据库中构建，并且在庞大的数据集上具有惊人的性能。找到有史以来得分最高的比赛，找到 1998 赛季的最后一场比赛，找到所有以球员 x 为主角的比赛——只要你能建立一个代表这些领域概念的模式，一切都非常合适。

从您所写的内容来看，听起来您将进行固定数量的运动；*进入*您系统的数据听起来好像不是特别结构化，但您应该能够将其结构化为域模型。如果这是真的，我建议构建一个反映每项运动的领域逻辑的关系模式。

如果这不是真的——如果你不能提前对领域进行推理——关系模型不合适，而 NoSQL 可能更好。但是你会遇到同样的问题——从名称/值对中提取意义是很困难的！

# c# - 资源文件转换问题

> ID：11007168
> 
> 赞同：2
> 
> 时间：2012-06-13T01:41:21.047
> 
> 标签：c#, resources

这是要求：

使用 Resourcefile 转换器实用程序将项目资源文件从一个版本迁移到另一个版本。(ConvertResx)

我创建了一个简单的 Windows 应用程序项目。在设计时设置本地化属性。在 .resx 文件中，可本地化的属性条目已设置为“元数据”属性。在资源文件转换过程中，它会转换 .resx 文件中的所有条目，但可本地化的属性属性设置为“数据”属性而不是“元数据”属性。

UseResxDataNodes 的类将数据和元数据属性条目放在同一个集合中。

ResXResourceReader reader = new ResXResourceReader(path0);

```
 reader.UseResXDataNodes = true; 
```

为了检索元数据集合条目，我使用了以下代码

iDictionaryEnumerator7 = reader.GetMetadataEnumerator();

但无法使用“元数据”属性标签读取元数据属性（可本地化）。在资源文件转换后，它已在 resx 文件中设置了“数据”标签。

您能否在这个问题上帮助我，如何读取元数据属性（来自 .resx 文件的设计时属性属性并将引用的程序集迁移到最新版本并将其写入 .resx 文件）如何迁移元数据属性.resx 文件中的条目。

问候， Sivaguru

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:05:52.803

我在尝试将资源文件写出与原始格式相同时遇到了同样的问题。经过一番搜索和试错后，我想出了以下解决方案来正确写出元数据节点。

```
ResXResourceReader readerData = new ResXResourceReader(new StringReader(sw.ToString()));
ResXResourceReader readerMetaData = new ResXResourceReader(new StringReader(sw.ToString()));

//Flag to read nodes as ResXDataNode, instead of key/value pairs, to preserve Comments.
readerData.UseResXDataNodes = true;

ResXResourceWriter writer = new ResXResourceWriter(this.FilePath);

foreach (DictionaryEntry resEntry in readerData)
{
    ResXDataNode node = resEntry.Value as ResXDataNode;

    if (node != null)
    {
        DictionaryEntry metaDataEntry;

        //Check if node is metadata. The reader does not distinguish between 
        //data and metadata when UseResXDataNodes flags is set to true.
        //http://connect.microsoft.com/VisualStudio/feedback/details/524508/resxresourcereader-does-not-split-data-and-metadata-entries-when-useresxdatanodes-is-true
        if (IsMetaData(readerMetaData, resEntry, out metaDataEntry))
        {
            writer.AddMetadata(metaDataEntry.Key.ToString(), metaDataEntry.Value);
        }
        else
        {
            writer.AddResource(node);
        }
    }   
}

writer.Generate(); //write to the file
writer.Close();

readerData.Close();
readerMetaData.Close(); 
```

* * *

```
/// <summary>
/// Check if resource data is metadata. If so, return the metadata node.
/// </summary>
/// <param name="metaDataReader"></param>
/// <param name="resEntry"></param>
/// <param name="metaData"></param>
/// <returns></returns>
private static bool IsMetaData(ResXResourceReader metaDataReader, DictionaryEntry resEntry, out DictionaryEntry metaData)
{
    IDictionaryEnumerator metadataEnumerator = metaDataReader.GetMetadataEnumerator();

    while (metadataEnumerator.MoveNext())
    {
        if (metadataEnumerator.Entry.Key.Equals(resEntry.Key))
        {
            metaData = metadataEnumerator.Entry;
            return true;
        }
    }

    return false;
} 
```

# python - 如果我在numpy中将float64数组压缩为float32我应该担心什么？

> ID：11007169
> 
> 赞同：3
> 
> 时间：2012-06-13T01:42:19.953
> 
> 标签：python, numpy, floating-point, compression

这是一种特殊的有损压缩，在 numpy 中很容易实现。

原则上，我可以直接将原始 (float64) 与重构 (float64(float32(original)) 进行比较，并了解最大误差等信息。

除了查看我的实际数据的最大误差之外，是否有人知道这会产生什么类型的失真，例如作为原始值大小的函数？

我最好先将所有值（64位）映射到[-1,1]上（作为极值的一部分，可以保留在64位中）以利用接近零的更大密度的浮点数?

我正在添加一个我想到的特定案例。假设我有 500k 到 1e6 的值，范围从 -20 到 20，大约是 IID ~ Normal(mu=0,sigma=4) 所以它们已经非常集中在零附近，“20”是 ~5-sigma 罕见. 假设它们是科学测量，其真实精度远低于 64 位浮点数，但很难真正准确地知道。我有大量单独的实例（可能是 TB 的价值），因此压缩具有很大的实用价值，float32 是获得 50% 的快速方法（如果有的话，使用 gzip 等额外一轮无损压缩效果更好）。所以“-20 到 20”消除了很多关于真正大值的担忧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T17:06:23.847

以下假设您在通常的舍入到最近模式下使用标准 IEEE-754 浮点运算，这些运算很常见（有一些例外）。

如果 double 值在 float 值的正常范围内，那么当 double 舍入为 float 时发生的唯一变化是有效数（值的小数部分）从 53 位舍入到 24 位。这将导致最多 1/2 ULP（最小精度单位）的误差。浮子的 ULP 是不大于浮子的 2 的最大幂的2 ^(-23倍。)例如，如果浮点数为 7.25，则不大于它的 2 的最大幂为 4，因此其 ULP 为 4*2 ^(-23) = 2 ^(-21)，约为 4.77e-7。所以区间 [4, 8) 中的 double 转换为 float 时的误差最多为 2 ^(-22)，约为 2.38e-7。再举一个例子，如果浮点数约为 0.03，则不大于它的 2 的最大幂是 2 ^(-6)，因此 ULP 为 2 ^(-29)，转换为 double 时的最大误差为 2 ^(-30)。

这些都是绝对错误。相对误差小于 2 ^(-24)，即 1/2 ULP 除以可能的最小值（特定 ULP 的区间中的最小值，因此限制它的 2 的幂）。例如，对于 [4, 8) 中的每个数字 x，我们知道该数字至少为 4 并且误差最多为 2 ^(-22)，因此相对误差最多为 2 ^(-22) /4 = 2 ^(-24)。（误差不能正好是 2 ^(-24)因为在将 2 的精确幂从 float 转换为 double 时没有误差，所以只有当 x 大于 4 时才会有误差，所以相对误差小于，不等于, 2 ^(-24).) 当您对正在转换的值有更多了解时，例如，它比 4 更接近 8，您可以更紧密地限制错误。

如果数字超出浮点数的正常范围，则错误可能会更大。最大有限浮点值为 2 ^(128) -2 ^(104)，大约为 3.40e38。当您将 1/2 ULP（float 的；double 具有更精细的 ULP）的 double 转换为 float 时，将返回无穷大，当然，这是一个无限的绝对误差和一个无限的相对误差。（大于最大有限浮点数但小于 1/2 ULP 的 double 将转换为最大有限浮点数，并具有与上一段中讨论的相同的错误。）

最小正正常浮点数为 2 ^(-126)，约为 1.18e-38。此（含）1/2 ULP 内的数字将转换为它，但小于此的数字将转换为特殊的非规范化格式，其中 ULP 固定为 2 ^(-149)。绝对误差最多为 1/2 ULP, 2 ^(-150)。相对误差将很大程度上取决于被转换的值。

上面讨论了正数。负数的误差是对称的。

如果 double 的值可以精确地表示为 float，则转换没有错误。

将输入数字映射到新的区间可以减少特定情况下的错误。作为一个人为的例子，假设你所有的数字都是区间 [2 ^(48) , 2 ^(48) +2 ^(24) ) 中的整数。然后将它们转换为浮点数会丢失所有区分值的信息；它们都将转换为 2 ^(48)。但是将它们映射到 [0, 2 ^(24) ) 将保留所有信息；每个不同的输入都将转换为不同的结果。

哪种地图最适合您的目的取决于您的具体情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T05:34:12.840

简单的转换不太可能显着减少错误，因为您的分布以零为中心。

缩放只能通过两种方式产生影响：第一，它将值从单精度值的非正规区间 (-2 ^(-126) , 2 ^(-126) ) 移开。（例如，如果你乘以[2 ^(-249) , 2 ^(-126 ）中的 2) ^(123)个值，则映射到非正规区间之外的 [2 ^(-126) , 2 ^(-3)）。）二，它会改变其中值位于每个“binade”中（从 2 的一个幂到下一个的间隔）。例如，您的最大值是 20，其中相对误差可能是 1/2 ULP / 20，其中该 binade 的 ULP 是 16*2 ^(-23) = 2 ^(-19)，因此相对误差可能是 1/2 * 2 ^(- 19)^(^(^(^(^(^(^(/ 20，约 4.77e-8。假设您按 32/20 缩放，因此 20 以下的值将变为 32 以下的值。然后，当您转换为浮点数时，相对误差最多为 1/2 * 2 ^(-19) / 32（或略低于 32），大约2.98e-8。所以你可以稍微减少误差。)))))))

对于前者，如果您的值几乎是正态分布的，那么 (-2 ^(-126) , 2 ^(-126) ) 中的值很少，仅仅是因为该间隔非常小。（你的一万亿个正态分布样本几乎可以肯定在那个区间内没有值。）你说这些是科学测量，所以也许它们是用某种仪器产生的。可能是机器测量或计算不够精细，无法返回 2 ^(-126)到 20 之间的值，所以如果你在非正规区间中根本没有值，我不会感到惊讶。如果您在单精度非正规范围内没有值，则缩放以避免该范围是没有用的。

关于后者，我们看到在您的范围末端有一个小的改进。但是，在您的范围内的其他地方，一些值也会移动到 binade 的高端，但有些值会跨越 binade 边界移动到新 binade 的小端，从而导致它们的相对误差增加。不太可能有显着的净改善。

另一方面，我们不知道什么对您的申请很重要。您的应用程序可以容忍多少错误？如果在每个数字上添加 1% 的随机噪声，最终结果的变化是否会不明显？^(或者，如果几个数字变化小到 2 -200)，结果会完全不可接受吗？

你对产生这些数字的机器了解多少？它真的产生比单精度浮点数更精确的数字吗？也许，尽管它产生 64 位浮点值，但实际值仅限于可以用 32 位浮点表示的总体。您是否执行了从 double 到 float 的转换并测量了错误？

仍然没有足够的信息来排除这些或其他可能性，但我最好的猜测是任何转换都没有什么好处。转换为浮点数要么会引入太多错误，要么不会，首先转换数字不太可能改变这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T01:56:02.747

float32 的指数要小得多（或在负指数的情况下更大），但假设你所有的数字都小于你只需要担心精度损失。float32 只适用于大约 7 或 8 位有效十进制数字

# c# - 通过脚本为 oocss添加标签

> ID：11007173
> 
> 赞同：0
> 
> 时间：2012-06-13T01:43:13.750
> 
> 标签：c#, asp.net-mvc-3, razor, server-side-scripting, oocss

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:33:24.227

我不确定是否有任何开源可帮助您在 ASP.NET MVC 或 Razor 中实现 oocss。我建议去创建**可重用的 html 助手**，使用 oocss 呈现模块（按钮、分页等）。

例如。使用 oocss 创建一个按钮。您可以有一个单独的 html 帮助`CssButton`程序，它使用传递的模型以预期的 html 呈现内容。因此，您可以在视图中的任何位置重用，

```
@Html.CssButton(model) 
```

用于创建自定义 html 助手

[http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)

甚至您也可以将呈现模块的所有 html 助手包装在一个单独的程序集中，这样它就可以跨项目重用。

[http://blogs.msdn.com/b/davidebb/archive/2010/10/27/turn-your-razor-helpers-into-reusable-libraries.aspx](http://blogs.msdn.com/b/davidebb/archive/2010/10/27/turn-your-razor-helpers-into-reusable-libraries.aspx)

# iphone - uitabbaritem 的 alpha 值

> ID：11007174
> 
> 赞同：0
> 
> 时间：2012-06-13T01:43:21.363
> 
> 标签：iphone, ios, uiimageview, uiimage, alpha

我试图弄清楚如何将我的 tabbaritem 图标（图像）设置为 0，这样我就可以在它加载到屏幕上后给它一个淡入淡出动画......但我只是不知道该怎么做..

这就是我将图像添加到标签栏的方式..

```
- (void)viewDidAppear:(BOOL)animated
{

    self.button0.image = [UIImage imageNamed:@"icon1.png"];
    self.button1.image = [UIImage imageNamed:@"icon2.png"];
    self.button2.image = [UIImage imageNamed:@"icon3.png"];
    self.button3.image = [UIImage imageNamed:@"icon4.png"];
    self.button4.image = [UIImage imageNamed:@"icon5.png"];
    self.button5.image = [UIImage imageNamed:@"icon1.png"];

} 
```

我将使用看起来像这样的方法为它们设置动画

```
[UIView animateWithDuration:0.3f
                              delay:0.0f
                            options:UIViewAnimationOptionCurveEaseOut
                         animations:^{
                             // Do your animations here
                         }
                         completion:^(BOOL finished){
                             if (finished) {
                                 // Do your method here after your animation.

                             }
                         }]; 
```

任何帮助将不胜感激。

更新这是我最新的尝试，还没有工作..

```
buttonImage0.image = [UIImage imageNamed:@"icon1.png"];
    buttonImage0.alpha = 0.0;
    self.button0.image = buttonImage0.image;

    [UIView animateWithDuration:0.1f
                          delay:0.0f
                        options:UIViewAnimationOptionTransitionNone
                     animations:^{
                         // Do your animations here.
                         buttonImage0.alpha = 1.0;
                     }
                     completion:^(BOOL finished){
                         if (finished) {
                             // Do your method here after your animation.
                         }
                     }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:57:37.113

UIButton 是 UIView 的子类。UIView 有一个 alpha 属性。

尝试：

```
self.button0.alpha = 0.0;
self.button1.alpha = 0.0;
self.button2.alpha = 0.0;
self.button3.alpha = 0.0;
self.button4.alpha = 0.0;
self.button5.alpha = 0.0; 
```

在你看来DidAppear；

然后使用相同的 alpha 属性将缓动函数放入 animateWithDuration 例程中！

# android - 如何在Android中的特定时间暂停视频？

> ID：11007176
> 
> 赞同：1
> 
> 时间：2012-06-13T01:43:30.553
> 
> 标签：android, video

我正在使用 VideoView 播放 *.mp4 文件。我想在特定时间播放和暂停它。

这是我的代码：

```
VideoView videoView=(VideoView)findViewById(R.id.video_view);
videoView.setVideoURI(Uri.parse("/sdcard/video/myvideo.mp4"));
videoView.seekTo(15000);
videoView.play(); 
```

在这种情况下，视频从 00:00:15 开始。我想在 00:00:30 暂停它。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:52:59.907

```
final VideoView videoView=(VideoView)findViewById(R.id.video_view);     
videoView.postDelayed(new Runnable() {

    @Override
    public void run() {
        videoView.pause();

    }
}, 15000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T02:00:41.617

如果您希望视频恰好在 00:00:30 暂停，而不仅仅是在视频播放后 30 秒，最可靠的方法是让处理程序每​​秒运行一次以检查视频的当前位置。如果当前位置等于或大于 30 秒，则暂停视频。

# r - 创建提示/回答系统以将数据输入 R

> ID：11007178
> 
> 赞同：88
> 
> 时间：2012-06-13T01:43:56.087
> 
> 标签：r

我创建了一些 R 代码供对 R 一无所知的人使用（尽管我自己也很环保）。我一直在让人们将初始数据粘贴到 R 控制台（结果好坏参半），我希望为人们输入数据建立一种更加用户友好的方式。

理想情况下，有人可以坐在控制台前，输入命令，并提示有关如何输入数据的具体问题。

例如，一个人加载 r 并看到一个提示：

```
What is x value? 
```

该人输入：

```
2 
```

下一个提示：

```
What is y value? 
```

人员类型：

```
3 
```

下一个提示：

```
 What are T values? 
```

人员类型：

```
 4,3,2,1 
```

下一个提示：

什么是 V 值？

人员类型：

```
4,5,6,9 
```

有了这 4 个新定义的变量 (X,Y,T,V)，R 的下一步就是运行预先编写的代码

```
X+Y
V+T 
```

并在控制台中弹出答案

```
5
8 8 8 10 
```

而且每个人都很开心

我很抱歉，因为这不是一个可重现的代码类型的问题，但我不确定如何让 R 提出问题，而不是我提出关于 R 的问题！

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-13T02:23:16.853

由于这应该仅用作交互式代码，`readline()`因此可以为您工作。我没有添加任何错误检查，但您可能需要做大量的检查以确保正确输入。这是核心概念：

```
fun <- function(){
  x <- readline("What is the value of x?")  
  y <- readline("What is the value of y?")
  t <- readline("What are the T values?")
  v <- readline("What are the V values?")

  x <- as.numeric(unlist(strsplit(x, ",")))
  y <- as.numeric(unlist(strsplit(y, ",")))
  t <- as.numeric(unlist(strsplit(t, ",")))
  v <- as.numeric(unlist(strsplit(v, ",")))

  out1 <- x + y
  out2 <- t + v

  return(list(out1, out2))

} 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2016-12-19T17:27:12.997

另请参阅`?menu`from`utils`以获得简单的文本基本菜单界面和提示，它也用于`devtools`.

这是一个例子：

```
> menu(c("Yes", "No"), title="Do you want this?")
Do you want this? 

1: Yes
2: No

Selection: 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-12T03:15:32.493

*由于这个问题从死里复活，它可能正在写一个更新的答案。*

如果在这种情况下 GUI 有帮助的话，Shiny 包现在已经与 RStudio 很好地集成在一起，并且很容易将其实现为 Shiny 应用程序。网站[http://shiny.rstudio.com](http://shiny.rstudio.com)有更多信息，包括示例和文档。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-21T03:32:25.550

对于这种特殊情况，这可能有点过头了，但该`swirl`软件包非常适合以交互方式向初学者介绍 R。

> swirl 是用于 R 编程语言的软件包，可将 R 控制台变成交互式学习环境。在数据科学和 R 编程方面的自定进度课程指导用户时，用户会收到即时反馈。

可以在此处找到生成内容的说明：http: [//swirlstats.com/instructors.html](http://swirlstats.com/instructors.html)。

# css - CSS将宽度保持为百分比不取决于内容宽度

> ID：11007180
> 
> 赞同：1
> 
> 时间：2012-06-13T01:44:26.867
> 
> 标签：css

我是 CSS 新手，必须从其他人那里修改一些复杂的代码。我想要的很简单，三个带边框的s在一个表格中，每个都有33%的宽度FIXED，我不希望这些s的宽度随着内容宽度的变化而跳来跳去，我想要一个水平滚动条如果它的内容太宽（比如一个单词太宽而没有空格）。

我尝试了类似的方法但不起作用，有什么线索吗？谢谢！

```
<table>
  <tr>
    <td style="width: 34%; max-width: 34%; overflow: auto">abc</td>
    <td style="width: 33%; max-width: 33%; overflow: auto">efg</td>
    <td style="width: 33%; max-width: 33%; overflow: auto">xyz</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:48:25.227

您需要为表设置固定。

编辑： colgroup 是正确的标签

```
<table style="table-layout:fixed;width:1000px;overflow-x:auto;">
<colgroup>
  <col width="34%">
  <col width="33%">
  <col width="33%">
</colgroup>
  <tr>
    <td>abc</td>
    <td>efg</td>
    <td>xyz</td>
  </tr>
</table> 
```

# regex - 基本 mod_rewrite 问题 -> mysite.us/user/xyz.php 到 mysite.us/user/index.php?u=xyz

> ID：11007182
> 
> 赞同：1
> 
> 时间：2012-06-13T01:45:16.380
> 
> 标签：regex, url, mod-rewrite

我是第一次尝试 mod_rewrite，到目前为止运气不佳。我当前的 URL 格式为`http://mywebsite.com/user/index.php?u=123`. 如何将 URL 重写为`http://mywebsite.com/user/123`？

到目前为止，我已经（不成功）尝试了以下，导致 500 内部服务器错误

```
RewriteEngine On
RewriteRule ^user([^/]*)\.php$ /user/index.php?u=$1 [L] 
```

我哪里错了？这应该很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T01:47:37.157

你几乎说对了。与其`[^/]`匹配直到但不包括 next 的所有内容`/`，您希望`([\d]+)$`匹配所有数字直到最后。你需要一个`/`after `user`，最后，删除`.php`.

```
RewriteEngine On
RewriteRule ^user/([\d]+)$ /user/index.php?u=$1 [L] 
```

请注意，我还`/`从`/user`. 不过，这可能不是必需的；`/`除非我自己测试，否则我永远记不起它在领导下的表现。

很可能，您的 500 错误的原因是重写循环。由于您最后匹配 .php ，甚至`user/index.php`会匹配规则，将其投入无限循环。

# objective-c - 从 XIB 加载 viewForSectionHeader 时遇到问题

> ID：11007183
> 
> 赞同：0
> 
> 时间：2012-06-13T01:45:32.760
> 
> 标签：objective-c, ios, uitableview, ios5

我真的很想通过使用 Interface Builder 在 XIB 中布局来完全控制节标题。

我正在使用下面的代码，但我的 titleLabel.text 在我运行应用程序时没有改变。它继续显示每个节标题的默认“标签”文本。我已经 NSLog'd headerText 的值，它确实包含正确的字符串。

有任何想法吗？谢谢

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
{

    CustomSectionHeaderViewController *cshvc = [[CustomSectionHeaderViewController alloc] initWithNibName:@"CustomSectionHeaderViewController" bundle:nil]; 
    id <NSFetchedResultsSectionInfo> sectionInfo = [[fetchedResultsController sections] objectAtIndex:section];

    NSString *headerText = [NSString stringWithFormat:@"%@", [sectionInfo name]];

    cshvc.titleLabel.text = headerText;

    return cshvc.view;
} 
```

已更新答案：这是我在阅读 Tammo 的答案后得到它的工作方式

```
CustomSectionHeader *cshv = [[[NSBundle mainBundle] loadNibNamed:@"CustomSectionHeader" owner:self options:nil]objectAtIndex:0];

   id <NSFetchedResultsSectionInfo> sectionInfo = [[fetchedResultsController sections] objectAtIndex:section];

NSString *headerText = [NSString stringWithFormat:@"%@", [sectionInfo name]];

cshv.textLabel.text = headerText;

return cshv; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:11:10.160

免责声明：我不认为拥有这种视图的控制器是正确的做法。

您的代码的问题是控制器仅在需要时才加载视图。访问titleLabel时，视图还没有加载，所以titleLabel为nil。尝试

```
NSString *headerText = [NSString stringWithFormat:@"%@", [sectionInfo name]];

// Make sure that the view is loaded
UIView *result = [cshvc view];

cshvc.titleLabel.text = headerText;

return result; 
```

# javascript - 在拖放事件上获取 Firefox 内容可编辑的拖放光标位置

> ID：11007186
> 
> 赞同：1
> 
> 时间：2012-06-13T01:45:45.977
> 
> 标签：javascript, drag-and-drop, cursor, range, caret

我正在尝试组合一个图像上传器。我想通过拖放将图像上传到 contenteditable 区域。

当我拖动文件时，我看到光标在移动——除非调用了 e.preventDefault()。

在 Chrome 中，有一个函数[`document.caretRangeFromPoint(x, y)`](https://stackoverflow.com/questions/10654262/drop-image-into-contenteditable-in-chrome-to-the-cursor)可以将坐标转换为光标位置（范围）。据我阅读，Firefox 中没有这样的内容。（请证明 mo 错了）

我可以看到的那个移动光标是否以某种方式被捕获？也许在拖放事件中？至于我的实验，它不能作为 dragover 事件中的范围访问。我希望我错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T14:22:20.337

我在以下[线程](https://stackoverflow.com/questions/3189812/creating-a-collapsed-range-from-a-pixel-position-in-ff-webkit)中遇到了答案（在实现了我自己的 caretPositionFromPoint 之后，该死的：D）

在 Firefox 中，您可以简单地分别在 event.rangeParent 和 event.rangeOffset 中访问它。

希望这可以节省某人的屁股。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:37:03.697

所有浏览器都希望最终支持的基于标准的方法是[`document.caretPositionFromPoint()`](http://www.w3.org/TR/cssom-view/#extensions-to-the-document-interface)，~~Firefox 还不支持它。虽然它有一个开放的错误：~~

~~[https://bugzilla.mozilla.org/show_bug.cgi?id=654352](https://bugzilla.mozilla.org/show_bug.cgi?id=654352)~~

**更新**

Firefox 从版本 20 开始支持此功能。

# string - 比较字符串 MIPS 中的字符

> ID：11007192
> 
> 赞同：0
> 
> 时间：2012-06-13T01:47:01.390
> 
> 标签：string, sorting, assembly, compare, mips

那里我目前正在尝试编写一个 MIPS 程序，该程序将对用户输入的字符串进行排序并对其进行冒泡排序。A在前面，Z在最后。

现在我有点困惑如何比较字符串中的每个字符。例如：

字符串：Stackoverflow 比较 S 和 T 的前两个字母。由于 S 属于前面，因此它保持不变并且不会发生交换。

我将如何继续进行下一组字符进行比较，因此 T 和 A 将是下一组要比较的字符。

我想我会使用 lb （加载字节）指令，但我不完全确定正确使用偏移量。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:26:49.363

提醒一下，在循环中，您必须检查当前指针是否 > 大于索引（基指针 + 字符串长度 - 1），或者您也可以检查索引处的值（当前指针 + 1）是否等于0 (NUL) 字符串终止字符与否。

确保将基指针的副本保存在某处（在寄存器或内存中）。

在每个循环中，您将在当前指针的偏移量为 0 的加载字节处读取当前指针当前指向的字符，并在当前指针的偏移量为 1 的加载字节处读取下一个字符。然后您可以进行比较和交换。之后，将当前指针增加 1（因为 ASCII 中的字符是 1 个字节，所以您将仅将地址增加 1 个字节）。

# php - 使用 Codeigniter 日期助手获取时区位置

> ID：11007201
> 
> 赞同：2
> 
> 时间：2012-06-13T01:48:31.857
> 
> 标签：php, codeigniter, time, timezone

我正在为时区函数使用 Codeigniter 日期助手。我想根据我保存在数据库中的时区参考来显示用户的时区位置。

**例子：**

获取时区参考`UP1`并返回相应的位置`(UTC + 1:00) Berlin, Brussels, Copenhagen, Madrid, Paris, Rome`。日期助手没有此功能。

该功能可以像这样执行..

```
echo timezone_location('UP1'); 
```

这将回声

```
(UTC + 1:00) Berlin, Brussels, Copenhagen, Madrid, Paris, Rome 
```

Codeigniter 的时区数据存在于文件夹中，`system/langauge/englishdate_lang.php`但我不确定如何访问它来构建函数。你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T02:10:03.167

CI 将其存储在语言文件[系统/language/english/date_lang.php](https://github.com/EllisLab/CodeIgniter/blob/develop/system/language/english/date_lang.php)

所以你可以做以下

```
// load the language file
$this->lang->load('date', 'english');
// will output (UTC -12:00) Baker/Howland Island
echo $this->lang->line('UM12'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T02:09:04.460

```
$this->load->helper('language');
$this->lang->load('date', 'english');
echo (lang('UM7')); //gives "(UTC -7:00) Mountain Standard Time" 
```

# javascript - 将图像定向成圆形 D3/JS

> ID：11007204
> 
> 赞同：1
> 
> 时间：2012-06-13T01:49:15.990
> 
> 标签：javascript, image, orientation, d3.js, geometry

我有 5 张图像要附加到一个 div 中，我想在一个圆圈中定向。这是将 5 张图像附加到感兴趣的 div 的代码片段：

```
diseases = ['d1', 'd2', 'd3']

images = d3.select('#welcome-container').selectAll('svg')
    .data(diseases).enter()
    .append('img')
    .attr('src', function(d) {return 'images/' + d + '_icon.png'})
    .attr('class', 'disease_icon')
    .attr('value', function(d) {return d}) 
```

结果是作为类的结果，图像以给定的高度/宽度排列成行块。我可以对 .css 或 JS 的这一部分做些什么来将它们定向成一个圆圈吗？谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:43:49.353

AFAIK，没有 CSS 会自动为您执行此操作。不过，手动对齐图像并不太难——您可以根据其索引翻译单个图像，例如

```
.attr("transform", function(d, i) {
  return "translate(" + (Math.cos(2*Math.PI/diseases.length*i)*radius) +
         "," + (Math.sin(2*Math.PI/diseases.length*i)*radius) + ")";
}) 
```

# php - set_time_limit ( ), Die ( ) 这个函数可以用来取消php中的文件上传吗

> ID：11007205
> 
> 赞同：2
> 
> 时间：2012-06-13T01:49:22.887
> 
> 标签：php, forms, file-upload

可以`this => set_time_limit ()`， `Die()`用于取消文件上传。

即当用户单击按钮`set_time_limit ()`功能将执行。

它会停止上传吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T01:59:41.867

您最好使用 Javascript 解决方案来完成此操作。当然，由于它是客户端，人们可以绕过它。如果是安全问题，请不要依赖 Javascript。如果您运行 Apache，您可以尝试[mod_reqtimeout](http://httpd.apache.org/docs/2.2/mod/mod_reqtimeout.html)，但是这是针对请求标头的，所以我不完全确定文件上传是否会成为其中的一部分。

编辑：还有 Apache [Timeout 指令](http://httpd.apache.org/docs/2.0/mod/core.html#timeout)和[KeepAliveTimeout](http://httpd.apache.org/docs/2.0/mod/core.html#keepalivetimeout)看起来更有希望。

Edit2：我只是偶然发现了[这个](http://www.php.net/manual/en/session.upload-progress.php)。看起来这正是您正在寻找的（假设 PHP >= 5.4）。从其中一条评论中，对于以前的版本，您可以使用[这个](http://pecl.php.net/package/uploadprogress).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T01:52:51.747

它不会

PHP 本身不参与文件上传进度。当网络服务器开始运行您的脚本时 - 文件已经上传

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T01:58:56.520

Afaik，PHP 无法“取消”上传。只要 PHP 被告知您的上传，上传过程就完成了。

但是，这只是一个猜测，但由于有一种方法可以使用 APC 创建进度条（然后检查上传过程），您也许可以停止它。但我真的不确定，因为检查（即：进度条）是在不同的 php 进程中运行的，该进程无法与当前上传的文件进行交互。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T02:12:51.033

由于请求和响应的工作方式，您将始终必须等待数据交付，然后才能对其进行处理，包括取消上传。您可以，正如@Mike 所说，设置一个超时，但这并没有真正取消上传，这基本上是在告诉 php，嘿，这个用户需要很长时间才能做某事，所以告诉他们我们不再等待了。你最好使用 ajax 来做这样的事情。

# java - 需要帮助编写替换密码的解扰方法

> ID：11007206
> 
> 赞同：0
> 
> 时间：2012-06-13T01:49:26.707
> 
> 标签：java, decoding

我需要一些关于 Java 作业的帮助。我们得到一个加扰的文本文件，它使用替换密码进行加扰，其中文本中的每个字母都简单地换成另一个字母。我的程序快完成了，但我无法弄清楚如何编写最终的“解扰”方法，该方法采用加扰的文本并将每个字母替换为正确的替代品，以显示正确的文本。

这些是作业中提供的说明：

> 解扰是通过使用加扰文本中的字母作为 char 数组中的索引来完成的。例如，如果打乱的文本有一个字母 B，则将其替换为它在数组中索引为 2 的字符。原始文件中的所有空格和标点符号也应该在解扰文件中，只有字母应该被更改。此外，如果原始文件中的字母大写，则在解扰文件中应大写（类似地，小写字母仍应为小写）。

我不是要求给我答案，因为这是给学校的。我似乎无法正确理解这些说明，我需要做什么才能成功解码文本？大多数情况下，我不明白如何使用字母作为 char 数组的索引，索引不总是整数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:01:29.547

你没有说你正在使用什么语言，所以我将使用 C/Java。您需要计算一个整数索引。假设这`scrambled_char`是一个大写字母，那么它是：

```
// index into descrambling array:
int index = scrambled_char - 'A' + 1; 
```

正如问题所说，这对于字符 A 的值为 1，对于 B 的值为 2，等等。听起来您正在获得解扰数组。例如：

```
char descramble[] = "_ZYX ... "; 
```

这将导致 A 被转换为 Z，B 被转换为 Y，C 被转换为 X，......

解扰的字符将是

```
char descrambled_char = descramble[index]; 
```

现在你只需要弄清楚如何处理小写字母、空格和标点符号。

# java - Java奇怪的变量赋值查询

> ID：11007209
> 
> 赞同：0
> 
> 时间：2012-06-13T01:49:45.470
> 
> 标签：java, variables

我遇到了一个奇怪的情况。代码如下：

```
public static int add(String trcd, String tlcd, String dept, String doDate,
                    String doTime, String andConfirm, Teller admin) throws
  Exception {

try {
  String table1 = "table1";
  String table2 = "table2";
  String trap = null;
  String trtype = null;

  String sql = "select * from " + table2;

  DataSet dataset = DBOper.DBQuery("taUtil", sql);

  if (dataset.isEmpty()) {
    return -1;
  }
  else {
    HashMap map = dataset.getRow(0);
    trap = (String) map.get("aut_ap_code");
    trtype = (String) map.get("aut_type_code");
    //point 1
    sql = "insert into " + table1 + " values("+trtype + "','" + doDate + "','" + doTime + "','N','Y')";

    DBOper.DBUpdate("taUtil", sql);

    if (andConfirm.equals("Y")) {
    //point 2
    sql = "select * " + table1 +" where tr_create_date='" + doDate + "' and tr_create_time='" + doTime + "' and tr_stcd='Y'";
      //point 3
      DataSet dataset2 = DBOper.DBQuery("taUtil", sql);

      if (dataset2.isEmpty()) {
        return -2;
      }
      else {
        String trNo = null;
        HashMap map2 = dataset2.getRow(0);
        trNo = (String) map2.get("tr_no");
        confirm(admin, trNo, "N");
      }
    }
    return 0;
  }
}
catch (Exception e) {
  throw e;
} 
```

}

问题是：

在第 3 点，它总是打印“insert”，即前一个 sql 值，而不是“select”的最新赋值。

有谁知道为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:54:36.367

您的赋值语句中有语法错误：

```
sql = "insert into " + table1 + " values(trtype + "','" + doDate + "','" + doTime + "','N','Y')"; 
```

尝试将其替换为：

```
sql = "insert into " + table1 + " values(" +trtype + "',' " + doDate + "','" + doTime + "','N','Y')"; 
```

我不确定你是如何编译这个的......

**编辑：**如果此语法错误确实阻止了代码编译并且您的 IDE（假设您正在使用一个）执行无法编译的旧版本的类（有时使用 Eclipse 发生在我身上），我认为它可能会结束做一些完全不可预测的事情，并可能解释这种奇怪的行为。

# asp.net - 将 MVC 项目从 Framework 4.5 降级到 4.0

> ID：11007212
> 
> 赞同：5
> 
> 时间：2012-06-13T01:50:24.197
> 
> 标签：asp.net, asp.net-mvc

是否有将解决方案降级到较低版本的 .net 框架的明确方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T12:01:09.880

尝试首先在您的解决方案中定位 .NET Framework 4.0。

右键单击您的项目-> 属性-> 应用程序面板。你应该在那里看到它。设置目标框架后，您必须编译并解决所有可能的框架特定场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:11:48.563

在 Visual Studio 中，您应该[将目标设置为 Framework 4.0 (msdn)](http://msdn.microsoft.com/en-us/library/bb398202.aspx)。然后手动修复任何依赖 4.5 的代码的错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-28T18:42:28.403

如果您在项目是 4.5 项目时使用 Nuget 下载了任何包，则需要在将项目更改为 4 后手动删除包并重新安装页面

首先更新软件包，这将使用命令 PM> update-package 更改许多软件包

您可以使用 PM > 删除软件包`uninstall-package packageName -force`

使用 PM>install-package packageName 重新安装包

`packages.config`您可以通过查看每个项目根目录中的文件来检查以确保所有 nuget 包都是 4.0 。

# arm - NEON 如何处理溢出？

> ID：11007213
> 
> 赞同：0
> 
> 时间：2012-06-13T01:50:34.047
> 
> 标签：arm, overflow, neon

我想知道霓虹灯如何处理溢出。例如：

```
uint8x8_t vadd_u8 (uint8x8_t, uint8x8_t) 
```

据我了解，这是添加了 2 个向量（每个向量都有 8 个无符号字节元素）。假设两个向量的所有值都是 255。

在这种情况下，我们应该期待什么结果？一个 8 元素向量 (510,...510) 还是别的什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T02:53:33.160

8 位元素的值只能从 0 到 255。它不能包含 510。

vadd_u8 将环绕 => 255 + 255 = 510 % 256 = 254。

vqadd_u8 将饱和 => 255 + 255 = min(510, 255) = 255。

# facebook - Facebook API 突然停止在 Windows Phone 上运行

> ID：11007218
> 
> 赞同：1
> 
> 时间：2012-06-13T01:51:36.823
> 
> 标签：facebook, windows-phone-7, facebook-c#-sdk

我的代码没有改变，它昨天左右工作。

我可以 oauth，获取令牌，然后执行以下操作：

```
WebClient wc = new WebClient();
wc.DownloadStringCompleted += result;
wc.DownloadStringAsync(new Uri("https://graph.facebook.com/me&access_token=xxxTOKENxxx", UriKind.Absolute)); 
```

返回 NotFound WebClient 异常：“远程服务器返回错误：NotFound。”

奇怪的是，在 Chrome 或 IE 上粘贴相同的 url 时，它确实有效（PC）。

在模拟器和 2 个不同的真实 WP 设备上尝试过，甚至在 WP 浏览器上粘贴相同的 url。

感觉 Facebook 出于某种原因拒绝了 Windows Phone？

任何人都知道可能会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:35:07.817

我可以确认不是你。来自 GitHub 的 SDK 的 WP7 示例失败。ASP.NET 示例现在返回“发生错误。请稍后再试。” 错误。如您所述，将 URL 复制并粘贴到 IE 中会解析并返回预期的 JSON。显然有些事情发生了变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:11:46.510

看起来 Facebook 上有一个错误正在被跟踪

如果您想关注，请单击此处

[https://developers.facebook.com/bugs/367369176650486?browse=search_4fd82eadc62186861827790](https://developers.facebook.com/bugs/367369176650486?browse=search_4fd82eadc62186861827790)

阅读链接后，有人说 graph.beta.facebook.com 确实有效，而不是 graph.facebook.com

# mongodb - 我正在使用存储库模式访问 mongoDb 数据库。我应该在哪里检查数据完整性？

> ID：11007219
> 
> 赞同：1
> 
> 时间：2012-06-13T01:51:37.610
> 
> 标签：mongodb, database-design, nosql

一般来说，我对 mongodb 和 NoSQL 数据设计有点陌生。

我正在构建一个将包含一些非规范化数据的 mongodb 数据库。例如，我的“用户”文档包含对零个或多个“文章”文档的引用（只是 id），而我的文章文档包含对零个或多个用户的引用。

由于我使用的是存储库模式，因此我的数据访问层的任何部分都不知道文章和用户。我应该在我的代码中的哪个位置检查以确保我的所有文档彼此一致？我应该简单地让 DAL 的用户代码进行检查吗？

偶尔运行一次数据完整性脚本以检查一切是否一致是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:14:43.557

这是 Microsoft 关于[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)的文章。从该文件中：

> 使用存储库将检索数据并将其映射到实体模型的逻辑与作用于模型的业务逻辑分开。

你有几个问题：

> 我应该在我的代码中的哪个位置检查以确保我的所有文档彼此一致？

基于上面的陈述，我认为很明显这个逻辑属于Repository。这些对象之间的关系只存在于“业务逻辑”层，数据库无法强制执行这些类型的规则。

> 我应该简单地让 DAL 的用户代码进行检查吗？

他们怎么可能？作为存储库的作者，*您是*DAL 用户。对于 MongoDB，DAL 基本上是驱动程序。

您可能会在驱动程序周围编写一个包装器，以某种形式的事务包装多个写入。但是你必须写这个，MongoDB 没有事务的概念。

> 偶尔运行一次数据完整性脚本以检查一切是否一致是个好主意吗？

归根结底，编写存储库的人将对数据的完整性负责。这样的脚本可能有用，但肯定会占用大量 CPU 周期。

我对 N:M 映射的建议是开始构建一些基本块来处理保持这两个同步所需的多个写入。一个想法是将更改排队并让后台作业进行更新。这样您就不必担心多次写入和回滚会导致错误数据。

# jquery - 我应该在我的混合应用程序中使用哪个框架？

> ID：11007221
> 
> 赞同：0
> 
> 时间：2012-06-13T01:52:10.000
> 
> 标签：jquery, jquery-mobile, cordova

我想构建一个可以在所有设备上运行的混合应用程序。我使用 Phonegap 与设备交互，使用 Jquery mobile 进行 UI，但我觉得 Jquery mobile 存在性能问题。

构建混合应用程序还有哪些其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:11:53.187

我可以推荐阅读 Phonegap 和 XUI 的共同创建者，Brock Whitten 的博客文章处理 Phonegap 应用程序的性能@http: [//sintaxis.com/you-half-assed-it](http://sintaxi.com/you-half-assed-it)

这是一本非常好的读物，其中的 tl;dr 回答了您的问题，他给出了[Zepto](http://zeptojs.com/)或[XUI](http://xuijs.com/)的示例，并且通常建议远离任何基于 jQuery 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:42:12.613

我建议您使用 sencha-touch 2 来开发电话间隙应用程序。Sencha touch 在移动设备上的表现令人印象深刻。我认为这对你有帮助[http://floatlearning.com/2011/03/developing-better-phonegap-apps/](http://floatlearning.com/2011/03/developing-better-phonegap-apps/)。您也可以使用 xui 或 zepto。Zepto 的语法与 jquery 相似，但没有那么重。

# ghostscript - Ghostscript：如何在不更改较小 PDF 的情况下减小大型 PDF 的文件大小

> ID：11007222
> 
> 赞同：2
> 
> 时间：2012-06-13T01:52:15.063
> 
> 标签：ghostscript, filesize, downsampling

我正在使用 GhostScript 将大量 PDF 转换为 PDF 以减小文件大小。原始 PDF 的大小和质量各不相同。如果存在低质量、小文件大小 (<350kb) 的 PDF，Ghostscript 的输出通常很差。

有没有一种方法可以让 GhostScript 忽略低于一定大小的文件并直接通过它们而不进行下采样？

当前设置： SearchablePDFSetting=-dColorImageResolution=120 -dMonoImageResolution=38 -dMonoImageDownsampleType=/Average -dOptimize=true -dDownsampleColorImages=true -dDownsampleGrayImages=true -dDownsampleMonoImages=true -dUseCIEColor -dColorConversionStrategy=/sRGB -dFIXEDMEDIA -dDEVICEWIDTHPOINTS=596 -dDEVICEHEIG 834

谢谢，维克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:28:50.180

pdfwrite 设备已经可以通过图像（不是文件）而不进行下采样，没有办法“通过而不更改”*文件*。如果您不想处理低于特定大小的文件，请不要处理它们。

为避免进一步对图像进行下采样，您需要添加“xxxxImageDownsampleThreshold”参数（单色、灰色和彩色各一个）。如果将其设置为（例如）1.5，则不会对分辨率比目标分辨率高 50% 的图像进行下采样。

请注意，您（显然）没有设置 GrayImageDownsampleResolution，您没有为彩色或灰色图像设置下采样类型，并且 MonoImageResolution 的 38 对我来说看起来很丑。

默认的灰度图像过滤器是 DCT (JPEG)，颜色过滤器也是。如果原始图像是 DCT，那么应用第二轮 DCT 压缩将导致丑陋的伪影，尤其是在图像*没有*下采样的情况下。我建议您将过滤器类型更改为 FlateEncode。

所有这些选项都记录在 Ghostscript doc 文件夹中的 ps2pdf.htm 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T21:22:14.263

添加选项：

```
-dPDFSETTINGS=/screen 
```

这“选择类似于 Acrobat Distiller 'Screen Optimized' 设置的低分辨率输出。”

# python - 这个异步代码将如何在 Python 与 C 中执行？

> ID：11007233
> 
> 赞同：2
> 
> 时间：2012-06-13T01:53:34.603
> 
> 标签：python, c, asynchronous

假设我有一个简单的脚本，下面有两个函数。当 callback_func 被调用时，我会假设它只会在单一的基础上运行。也就是说，不会有两个事件同时通过代码块。那是对的吗？此外，如果 callback_func 以单一方式运行，则消息传递服务本身必须执行一些缓冲，因此不会丢失任何消息，并且该缓冲取决于发起事件的服务。这也是正确的吗？

```
def callback_func(event):
    # Can be called anytime

def main_func():
    # Sets up a connection to a messaging service 
```

那么如果我添加一个 send_func 呢？如果我收到一条消息但我有三个出去，`send_func`如果在发送消息时被调用，将如何处理？Python解释器是否处理了这种情况？

```
def send_func(event):
    # Can be called anytime

def callback_func(event):
    # Can be called anytime

def main_func():
    # Sets up a connection to a messaging service 
```

最后，如果我将语言更改为 C，上述问题的答案将如何变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T02:33:58.933

### 混淆两个概念（异步！=并发）

**异步**并不意味着**并发**，**并发**也不意味着**异步**。初学者（和一些专家）在语义上会混淆这些术语，但它们是不同的概念！

你可以有一个没有另一个，或者有时两者兼而有之。

异步意味着您不等待某事，这并不意味着它会在其他事情发生时发生，只是它可能会在以后发生。

**并发**意味着不止一件完全独立的事情在同一时间发生，这些事情可以是同步的，同时又是隔离和并发的。

### 具体实施

[CPython](http://python.org/)是单线程的，不用担心重新进入。[其他 Python 运行时](http://pypy.org/)允许并发，如果使用这些功能，则需要锁定机制。

C 本质上也是单线程的，除非您专门启动新线程，否则您将需要一个锁定机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:38:41.707

我想补充一点，除了“服务”之外，还有很多地方可以发生消息缓冲。在低级别，我相信操作系统会在套接字上缓冲传入和传出字节。

# c# - 如果什么也没找到，如何返回 LINQ 的特定值？

> ID：11007234
> 
> 赞同：2
> 
> 时间：2012-06-13T01:53:39.033
> 
> 标签：c#, linq

看来我偶然发现了 LINQ 并且只是设法看到了它的用处。我不确定我是否要求太多，或者我做事是否正确。我有以下笨拙的代码，

```
class CStation{
    public String Make;
    public List<ulong> TunedStations;
}

List<List<ulong>> mStations=(from t in Radios where t.Make==aMake select t.TunedStations).ToList();
if(mStations.Count!=0)
    return mStations[0];
return null; 
```

功能是的，但我可以用 LINQ 来做些什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T01:58:40.060

只需使用

```
return (from t in Radios where t.Make==aMake select t.TunedStations).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T02:03:22.387

你可以使用这个：

```
var myDefault = ......;

return (from t in Radios 
        where t.Make==aMake 
        select t.TunedStations)
       .FirstOrDefault() ?? myDefault ; 
```

或作为 lambda

```
 var myDefault = ......;

    return Radios.Where(t => t.Make == aMake)
           .FirstOrDefault() ?? myDefault ; 
```

这些将返回集合中的第一项或您的默认值（或者`?? myDefault`如果您想返回 null，则省略）

# qt - Qt Creator 项目和库的统包分发？

> ID：11007238
> 
> 赞同：0
> 
> 时间：2012-06-13T01:54:32.853
> 
> 标签：qt, boost, c++11, static-libraries, qt-creator

我正在尝试建立一组 Qt Creator 项目，并在它们之间共享几个自定义库。所有这些都使用 C++11 和 Boost，并在 Git 存储库中进行管理。

目前我正在使用 CMake 和符号链接。所以现有的目录结构大致如下：

```
projects/
    libraryOne/
        include/
            libraryOne/ ; Parent in -I paths, then #include "libraryOne/foo.h"
        src/
    libraryTwo/
        include/
            libraryTwo/
        src/
        libraryOne/ ; symbolic link
    libraryThree/
        include/
            libraryThree/
        src/
        libraryTwo/ ; symbolic link
    applicationOne/
        CMakeLists.txt
        libraryOne/ ; symbolic link
        libraryTwo/ ; symbolic link
        libraryThree/ ; symbolic link
        build/
    applicationTwo/
        CMakeLists.txt
        libraryOne/ ; symbolic link
        libraryTwo/ ; symbolic link
        libraryThree/ ; symbolic link
        build/
    applicationThree/
        CMakeLists.txt
        libraryOne/ ; symbolic link
        libraryTwo/ ; symbolic link
        libraryThree/ ; symbolic link
        build/ 
```

为了构建一个给定的应用程序，我进入该`build/`应用程序的子目录并运行`cmake ..`它，它将从中生成 makefile `CMakeLists.txt`（因此它将所有中介和构建产品放在下面`build/`）。然后我跑`make`。

这就是这种特殊设置的演变方式，而且相当笨拙。我想删除 CMake 依赖项，并使拥有 Qt Creator 的人对`git clone`我的个人源存储库、一个或多个应用程序、加载 .pro 文件、然后按 Build 并让它工作变得微不足道。

其他愿望：

*   无需创建符号链接
*   在 GUI 中添加和删除文件应该是可行的，无需编辑生成文件
*   将应用程序加载到编辑器中应该使库也可以编辑，并且应该自动处理构建依赖项
*   在调试模式下，您应该能够在任何库中设置断点，并且环境可以在其上停止
*   将目标文件和可执行文件放在不是源代码子目录的目录中

我想知道是否有这样的“干净”示例……在 Qt Creator 世界中是否有任何好的示例可以遵循？过于雄心勃勃地期望`.pro`文件能够跨平台自动处理这种事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:39:21.137

.pro 文件实际上会为您处理它。[我已经在另一个问题](https://stackoverflow.com/a/10826166/1329652)中回答了如何做到这一点。

# javascript - Internet Explorer 7+ 返回错误“预期对象”，尽管其他浏览器都没有

> ID：11007242
> 
> 赞同：2
> 
> 时间：2012-06-13T01:55:15.143
> 
> 标签：javascript, internet-explorer, internet-explorer-7

每次我在 Internet Explorer 7 或更高版本中加载页面`Object Expected`时，调用以下函数时都会出现错误。该脚本出现在页面底部的结束`</body>`标记之前。没有具有相同`name`or的元素`id`。

```
<script type="text/javascript">
     window.onload = show();
</script> 
```

它试图调用的 Javascript 函数是

```
function show() {
    obj1
     = document.getElementById("container").innerHTML
     = '<div style="width: 960px; height: 2000px;"><p>Hello World.<br>Here I am.</p>'
         + '<p><a href="#" onclick="hide();">test</a></p></div>';
} 
```

1.  为什么这个错误没有出现在任何其他浏览器中？
2.  我需要更改什么来解决问题？

**编辑 0**

如果我将函数`show`移到 处的同一块中`window.onload`，则`hide()`现在不再起作用。

Javascript代码

```
function show() {
    obj1
     = document.getElementById("container").innerHTML
     = '<div style="width: 960px; height: 2000px;"><p>Hello World.<br>Here I am.</p>'
         + '<p><a href="#" onclick="hide();">test</a></p></div>';
}

function hide() {   
    obj1 = document.getElementById("container");
    if(obj1){
        alert("Hi");
        obj1.style.display = "none";
        obj1.style.visibility = "hidden";
    }else{
        alert("Cannot find the element with id container.");
    }
} 
```

HTML 代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict/EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtm1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset="UTF-8" />
    <meta http-equiv="content-language" content="en-us" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="copyright" content="&copy; 2012" />

    <title>takeover</title>

    <base href="" />
    <link rel="stylesheet" href="" />

    <style type="text/css" media="all" />

    #container {
         position:absolute;
         text-align:center;
         background-color:#fff;
         z-index:9999;
    }

    </style>

    <script type="text/javascript" src="takeover.js"></script>
</head>
<body>
    <div>
        <div id="container"></div>
        <p><a href="#">qwe</a></p>
    </div>

<script type="text/javascript">
     window.onload = show;
</script>
</body>
</html> 
```

**编辑 1**

`alert(show)`放置之前使用非 Internet Explorer 浏览器时出现的消息`window.onload`

![在此处输入图像描述](../Images/3d035e16b8a303b0698009564cd0a6ae.png)

**编辑 2**

删除所有空格后显示的消息。同样，这只适用于非 Internet Explorer 浏览器。

![在此处输入图像描述](../Images/1b676b789f794d9085c31d46cf04b4ad.png)

**编辑 3**

尝试了 window.show = function show() 和 window.hide = function hide() 但在 Internet Explorer 中仍然出现错误。错误如下所示。

![在此处输入图像描述](../Images/8089eac3f1b83796def7df6c8a50504b.png)

**编辑 4**

这是在单个文件中包含所有功能的更新代码。这在任何其他浏览器中都不起作用，我得到错误`show`未定义。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict/EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtm1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset="UTF-8" />
    <meta http-equiv="content-language" content="en-us" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="copyright" content="&copy; 2012" />

    <title>takeover</title>

    <base href="" />
    <link rel="stylesheet" href="" />

    <style type="text/css" media="all" />

    #container {
         position:absolute;
         text-align:center;
         background-color:#fff;
         z-index:9999;
    }

    </style>

</head>
<body>
    <div>
        <div id="container"></div>
        <p><a href="#">qwe</a></p>
    </div>

<script type="text/javascript">
    alert(show)
    window.show = function show() {
obj1 = document.getElementById("container").innerHTML =  '<div style="width: 960px; height: 2000px;"><p>Hello World.<br>Here I am.</p><p><a href="#" onclick="hide();">test</a></p></div>';
}

window.hide = function hide() { 
    obj1 = document.getElementById("container");
     if(obj1)
 {
   alert("Hi");
   obj1.style.display = "none";
   obj1.style.visibility = "hidden";
 }
 else
 {
   alert("Cannot find the element with id container.");
 }
}
     window.onload = window.show;
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T01:58:36.023

这条线...

```
window.onload = show(); 
```

应该是这个...

```
window.onload = show; 
```

...因为您需要将`show`函数本身分配给`window.onload`，而不是调用它的返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:00:34.003

在定义*后*移动`<script>`引用`container`点的块： *`container`*

 *```
<!DOCTYPE HTML>
<HTML>
<HEAD>
</HEAD>
<BODY>
    <DIV id="container"></DIV>
<script type="text/javascript">
     window.onload = show;

    function show() {
        obj1 = document.getElementById("container").innerHTML =  '<div style="width: 960px; height: 2000px;"><p>Hello World.<br>Here I am.</p>' +
                                 '<p><a href="#" onclick="hide();">test</a></p></div>';

}
</script>

</BODY>
</HTML> 
```

* * *

`<script>`例如，如果块在内部，`<head>`则 Internet Explorer 会给出错误：

> SCRIPT5007：无法设置属性“innerHTML”的值：对象为空或未定义

在页面加载。*

# java - JPA 中的“循环引用”是反模式吗？

> ID：11007247
> 
> 赞同：14
> 
> 时间：2012-06-13T01:55:43.963
> 
> 标签：java, oop, jpa

假设 Car 有一个 Wheel 列表，同时 Wheel 有一个 Car 对所有者的引用。

```
public class Car{
List<Wheel> wheels;

}

public class Wheel{
Car owner;
} 
```

我问这个是因为在 JPA 中很容易像这样操作，而不是再次查询数据库以获取父实体。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T02:00:22.370

像这样的双向关系在 JPA 中是完全有效和预期的。这就是财产的全部意义所在`mappedBy`。这篇文章有一个很好的解释：

[在双向 JPA OneToMany/ManyToOne 关联中，“关联的反面”是什么意思？](https://stackoverflow.com/questions/2584521/in-a-bidirectional-jpa-onetomany-manytoone-association-what-is-meant-by-the-in)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T03:31:53.863

这当然不是反模式。

您甚至可能会说这非常方便，因为使用 JPA 实现它非常容易。两个可能的查询变得非常简单；从某辆车上获取所有车轮并为某个车轮获取汽车。

# php - 使用 PHP 进行递归树遍历 - 布局问题

> ID：11007248
> 
> 赞同：0
> 
> 时间：2012-06-13T01:55:44.227
> 
> 标签：php, html, arrays, recursion

我正在为一个客户创建一份问卷，要求问题按 3 层级别组织，问题和类别的数量未知。我已经成功地创建了 UI 和从数据库中提取信息的代码，但是我一直在尝试找出如何将所有内容加载到正确的位置。数据库是由客户端组织的，所以我无法控制它：

```
id    description    parentId    
1      Level 1        0           
2      Level 2        0           
3      Level 1a       1   
4      Level 1b       1 
5      Level 1a1      3 
```

我现在使用的代码是这样的：

```
function printChildQuestions($parentid) {
  $sql="SELECT * FROM pB_test WHERE parentID=$parentid";
  $result=mysql_query($sql);
  $i=0;
  while (true) {
    $row=mysql_fetch_array($result);
    if (!$row) break;
    if ($row['parentId'] == 0) {
        echo '<div class="tabs">';
        echo '<span class="level1">'.$row['description'].'</span>';
        echo '<ul id="main-nav"><h2 align="center">Categories</h2></ul>';
        echo '<div>'.$row['id'].'&nbsp;'.$row['description'].'&nbsp;'.$row['parentId'].'</div>';
        if ($row['parentId'] == 1) {
        }
        echo '</div>';
    } else {
    echo '<div>'.$row['id'].'&nbsp;'.$row['description'].'&nbsp;'.$row['parentId'].'</div>';
    }
    printChildQuestions($row['id']);
  }
}

printChildQuestions(0); 
```

需要生成的html在这里：http: [//jsfiddle.net/Cyb2N/](http://jsfiddle.net/Cyb2N/)

问题是我提出的每一个想法都需要我对关卡进行硬编码，并在引入关卡 2 时中断。有人能把我推向正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:18:09.883

如果我正确理解您的问题，您是否正在寻找一种方法来解决客户数据中 parentId 引用所暗示的级别？像这样：

```
Level 1           
   Level 1a          
      Level 1a1         
   Level 1b        
Level 2 
```

如何创建一个具有引用父级别`Level`的属性的类？`parent`然后，您可以遍历客户端的数据，将 Level 实例解析为一棵漂亮的树，然后从那里做任何您想做的事情。

或者，您可以为`Level`该类提供一个`children`属性，该属性是将该实例作为父级引用的级别的集合......无论如何，关键是您可以将客户的平面数据转换为具有相当简单类的有用树模型. 通过计算父母（或孩子），您可以知道给定级别的树上/下多远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:18:21.623

printChildQuestions 是一个递归函数。听起来您不知道如何确定您所处的递归级别。就是这样：

```
printChildQuestions($parent_id);

function printChildQuestions($parent_id, $level = 1){
    if( $need_to_recurse ){
        printChildQuestions($new_parent, $level + 1);
    }
} 
```

# android - Facebook 移动（与原生）用户点击提要故事但进入商店，而不是原生应用

> ID：11007255
> 
> 赞同：0
> 
> 时间：2012-06-13T01:56:48.577
> 
> 标签：android, iphone, facebook, mobile

我在 Android 和 iPhone 上的 Facebook 应用都遇到了这个问题。

用户在 Facebook 移动版 (m.facebook.com)。用户点击提要故事。预期行为 - 打开原生 iOS 或 Android 应用程序。行为：打开 Google Play 或 iTunes Store。应用程序已“安装”但未启动。

深度链接原生->原生。所以 Facebook 原生应用，当用户点击一个提要故事时，会在原生 iOS/Android 应用中打开。

我们没有移动网络应用程序，但我设置了一个登录页面，其中包含指向 Android 和 iOS 的链接。

知道是否-这是应该发生的-某种配置问题吗？

# javascript - 从 OBJ 文件中选取选定的网格

> ID：11007256
> 
> 赞同：3
> 
> 时间：2012-06-13T01:57:35.507
> 
> 标签：javascript, 3d, three.js

我正在使用 OBJLoader 加载大型 3D 模型（在 .obj 文件中描述），但它将整个文件加载为单个 Object3D 对象。使用 scene.add(object) 它将整个对象添加到场景中。

我需要选择选定的网格并更改其一些属性，但是当我添加鼠标功能并使用 Ray.intersectObjects 尝试获取选定的网格时，它永远不会工作。我找不到我犯错的地方。

希望获得一些帮助以使其正常工作。谢谢！

这让我困惑了几天。以下是我的全部代码：</p>

```
<!doctype html>
<html lang="en">
    <head>
        <title>three.js webgl - loaders - OBJ loader</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #000;
                color: #fff;
                margin: 0px;
                overflow: hidden;
            }
            #info {
                color: #fff;
                position: absolute;
                top: 10px;
                width: 100%;
                text-align: center;
                z-index: 100;
                display:block;
            }
            #info a, .button { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }
        </style>
    </head>

    <body>
        <div id="info">
        <a href="http://github.com/mrdoob/three.js" target="_blank">three.js</a> - OBJLoader test
        </div>

        <script src="../build/Three.js"></script>
        <script src="js/loaders/OBJLoader.js"></script>

        <script src="js/Detector.js"></script>
        <script src="js/Stats.js"></script>

        <script>

            var container, stats;

            var camera, scene, renderer;

            var mouseX = 0, mouseY = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            var _mouse = { x: 0, y: 0 },
                objects = [],
                _projector = new THREE.Projector();

            init();
            animate();

            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                scene = new THREE.Scene();

                camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
                camera.position.z = 100;
                scene.add( camera );

                var ambient = new THREE.AmbientLight( 0x101030 );
                scene.add( ambient );

                var directionalLight = new THREE.DirectionalLight( 0xffeedd );
                directionalLight.position.set( 0, 0, 1 ).normalize();
                scene.add( directionalLight );

                var texture = THREE.ImageUtils.loadTexture( 'textures/ash_uvgrid01.jpg' );

                var loader = new THREE.OBJLoader();
                loader.load( "obj/male02/male02.obj", function ( object ) {

                    for ( var i = 0, l = object.children.length; i < l; i ++ ) {

                        object.children[ i ].material.map = texture;

                    }

                    object.position.y = - 80;
                    object.position.z = - 160;
                    scene.add( object );
                    objects.push( object );

                } );

                // RENDERER

                renderer = new THREE.WebGLRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );
                container.appendChild( renderer.domElement );

                document.addEventListener( 'mousedown', onDocumentMouseDown, false );

            }

            function onDocumentMouseDown( event ) {

                event.preventDefault();

                // find intersections
                _mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                _mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;

                var vector = new THREE.Vector3( _mouse.x, _mouse.y, 1 );

                var ray = _projector.pickingRay( vector, camera );

                var intersects = ray.intersectObjects( scene.children );

                if ( intersects.length > 0 ) {
                        alert("selected!");
                        _SELECTED_DOWN = true;
                }   
            }

            function animate() {

                requestAnimationFrame( animate );
                render();

            }

            function render() {

                renderer.render( scene, camera );

            }

        </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T05:14:10.440

`ray.intersectObjects()`不是递归的。您需要传递要测试的对象列表。

# ios - 如何将 ruby 中的随机字符串传递给 iOS 应用程序？

> ID：11007258
> 
> 赞同：2
> 
> 时间：2012-06-13T01:57:41.543
> 
> 标签：ios, ruby, automation, cucumber, frank

我正在使用 Frank 来自动化 iPhone，到目前为止一切都很好。我正在尝试为用户名创建一个随机字符串，并将随机字符串连接到步骤定义中的电子邮件。我需要将它传递给 iOS 应用程序中的文本字段元素。这是我到目前为止所拥有的：

```
def generate_random_string(length=6)
    string = ""
    chars = ("a".."z").to_a
    length.times do
    string << chars[rand(chars.length-1)]
end
string
end

Given /^I generate a username$/ do
   globalVariableName = Rand.rand(10)  + "@test.email.com"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:30:53.733

这既是一个黄瓜问题，也是一个弗兰克问题。听起来你在问硬件

首先，您需要将生成的用户名保存在可以在其他步骤中使用的地方。您可以通过将其分配给成员变量来做到这一点。

```
Given /^I generate a username$/ do
  @username = Rand.rand(10)  + "@test.email.com"
end 
```

现在您可以在另一个步骤中引用该变量。这是一个步骤，它将在 UI 中找到带有所需占位符的文本字段，点击它，然后在该字段中键入先前分配的用户名。

```
When /^I enter my username into the username field$/ do
  text_field_selector = "view:'UITextField' placeholder:'username'"
  touch( text_field_selector )
  type_into_keyboard( @username )
end 
```

显然，您可能希望根据指定要输入的字段的最佳方法来更改该选择器。

请注意，我正在使用`type_into_keyboard`仅在最新版本的 Frank 中可用的辅助方法。如果需要，请升级。

希望有帮助。坦率的邮件列表也是获得支持的好地方 - [https://groups.google.com/group/frank-discuss](https://groups.google.com/group/frank-discuss)

# c++ - Visual Studio 中 FileOutputStream 对象的堆损坏

> ID：11007270
> 
> 赞同：0
> 
> 时间：2012-06-13T01:59:19.360
> 
> 标签：c++, visual-studio-2010, filestream, heap-corruption

在我的示例程序中，我在下一行收到“堆损坏”错误。

```
ofstream filePossibleHaplotype; 
```

“Windows 已在 Project_Name.exe 中触发断点。这可能是由于堆损坏，这表明 Project_Name.exe 或其已加载的任何 DLL 中存在错误。”

文件流对象的声明如何导致此错误？

[编辑 - 添加了几段代码] SET = 1 NOT_SET = 0 LENGTH = 5

```
void fill_Unique_Bit_Array()
    {
        int zeroFlag = NOT_SET;
        int oneFlag = NOT_SET;
        bit_array = new int(LENGTH);
        for(int i =0; i<LENGTH; i++)
        {
            for(int j =0; j<NUMBER_OF_READS; j++)
            {
                if(readMartixArray[j][i] == '0')
                    zeroFlag = SET;
                else if (readMartixArray[j][i] == '1')
                    oneFlag = SET;
            }
            if(zeroFlag==SET && oneFlag==SET)
                bit_array[i] = SET + SET;
            else if(zeroFlag==SET && oneFlag==NOT_SET)
                bit_array[i] = NOT_SET;
            else if(zeroFlag==NOT_SET && oneFlag==SET)
                bit_array[i] = SET;
            zeroFlag = NOT_SET;
            oneFlag = NOT_SET;
        }
        reverse_bit_array = array_Reverse(bit_array, LENGTH);        
    } 
```

这个函数调用，

```
void find_all_possible_combinations(int ,int, int, int )
    {
        ofstream filePossibleHaplotype;
    } 
```

这会导致堆内存崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:03:06.337

问题在于 bit_array 的动态内存分配。我创建了一个普通的静态数组，代码运行良好。但我不确定为什么动态数组分配会导致问题。我已将 int 指针声明为全局变量。

bit_array = new int(LENGTH);

# google-app-engine - 使用 MapReduce 防止重复到 BigQuery 管道

> ID：11007274
> 
> 赞同：0
> 
> 时间：2012-06-13T01:59:48.003
> 
> 标签：google-app-engine, google-bigquery

我在这里阅读了 Michael 对这篇文章的回答，其中建议使用管道将数据从数据存储移动到云存储再到大查询。

[Google App Engine：在数据存储上使用 Big Query？](https://stackoverflow.com/questions/10966841/google-app-engine-using-big-query-on-datastore)

我想使用这种技术将数据附加到 bigquery 表中。这意味着我必须有某种方式知道实体是否已被处理，这样它们就不会在 mapreduce 运行期间重复提交给 bigquery。我不想每次都重建我的桌子。

在我看来，我有两个选择。我可以在实体上放置一个标志，并在处理每个实体时对其进行更新，并在后续运行中将其过滤掉 - 或者 - 我可以将每个实体保存到一个新表中并将其从源表中删除。第二种方式似乎更好，但我想询问选项或看看是否有任何陷阱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:55:40.583

假设您有一些活动流表示为实体，您可以使用[查询游标](https://developers.google.com/appengine/docs/java/datastore/queries#Query_Cursors)在前一个查询中断的地方启动一个查询。查询游标非常适合您所描述的增量情况类型，因为它们避免了将实体标记为已处理的开销。

我不得不四处看看 App Engine MapReduce 是否支持游标（我怀疑它还不支持）。

# css - 浏览器兼容性布局居中之战：IE和Mozilla

> ID：11007275
> 
> 赞同：0
> 
> 时间：2012-06-13T01:59:49.297
> 
> 标签：css

因此，根据之前的帮助，在 Mozilla Firefox中放置`margin: 0 auto`容器并删除**内容框上的所有边距属性可以完美运行，但****Internet Explorer**是一场灾难。

它变得如此糟糕，以至于网站都被打乱了。我想再试一次。

如何在 Internet Explorer 和 Mozilla 上将内容框居中？

**CSS 代码**：[style_sample.css](http://avisuals.web.fc2.com/style_sample.css)

**网页**：[http ://avisuals.web.fc2.com/sample.html](http://avisuals.web.fc2.com/sample.html#)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:24:43.257

该页面没有`doctype`声明，例如：

```
<!doctype html>    
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head> 
```

因此，浏览器被扔进 Internet 5.5/Netscape/1998 兼容性/怪癖模式：

![在此处输入图像描述](../Images/e55cc4b923f254ccd152348cdea4ef64.png)

如果您添加`<!doctype html>`声明以将其放入*标准模式（我可以通过将浏览器更改为**标准模式*来模拟）：

![在此处输入图像描述](../Images/527fa1b563b3b7a80e35bc018e3cd044.png)

然后页面对我来说很好。

* * *

**Internet Explorer（怪癖模式）**：
![在此处输入图像描述](../Images/f66f2b3bdb261752cc5d31275982cc3e.png)

**互联网浏览器**：
![在此处输入图像描述](../Images/a605578fb8dbc55f2653c1d51e1b294e.png)

**铬**：
![在此处输入图像描述](../Images/70d840cf89b3f11f2933d85c310b9693.png)

# ruby-on-rails - Rails partials：我做错了什么？

> ID：11007276
> 
> 赞同：2
> 
> 时间：2012-06-13T01:59:49.813
> 
> 标签：ruby-on-rails, ruby

**所以，我在“app/views/posts”中的一个名为“_form.html.erb”**的部分中有这段代码：

```
<%= form_for @post do |f| %>
    <% if @post.errors.any? %>
        <h2>Errores:</h2>   
        <ul>
            <% @post.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
        </ul>
    <% end %>
<p>
    <%= f.label :title %><br />
    <%= f.text_field :title %><br />
<br />
    <%= f.label :content %><br />
    <%= f.text_area :content %>
</p> 
```

我对这段代码有两个看法：

**“app/views/posts/new.html.erb”**

```
<h1>Nuevo post</h1>

    <%= render 'form' %>

<p>
    <%= f.submit "Agregar Nuevo Post" %>
</p>
<% end %> 
```

**“app/views/posts/edit.html.erb”**

```
<h1>Editar Post</h1>

    <%= render 'form' %>

<p>
    <%= f.submit "Actualizar Post" %>
</p>
<% end %> 
```

我想要的是在视图中呈现的表单，但是通过我向您展示的代码，我在服务器中得到了这个错误输出：

```
SyntaxError in Posts#new

Showing /home/levick/rubyblog/app/views/posts/new.html.erb where line #10 raised:

/home/levick/rubyblog/app/views/posts/new.html.erb:10: syntax error, unexpected keyword_ensure, expecting $end
Extracted source (around line #10):

7: </p>
8: <% end %>
Trace of template inclusion: app/views/posts/new.html.erb

Rails.root: /home/levick/rubyblog

Application Trace | Framework Trace | Full Trace
Request

Parameters:

None
Show session dump

Show env dump

Response

Headers:

None 
```

与编辑视图相同。

**我的问题是：**我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:07:04.863

您不能在部分之外使用表单变量。在您的新页面和编辑页面中，您都可以重用该`f`变量，即使它只存在于部分内部。

我建议您通过在部分中移动提交按钮的创建来修复错误。不要忘记也移动`<%- end %>`局部内部，因为您正在完成局部内部的表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:16:35.147

在您的部分尝试以下操作`_form.html.erb`

```
<%= form_for @post do |f| %>
    <% if @post.errors.any? %>
        <h2>Errores:</h2>   
        <ul>
            <% @post.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
        </ul>
    <% end %>
<p>
  <%= f.label :title %><br />
  <%= f.text_field :title %><br />
<br />
  <%= f.label :content %><br />
  <%= f.text_area :content %>
</p>
<%= f.submit @post.new_record? ? 'Nuevo Post' : 'Actualizar Post' %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T02:01:11.623

您缺少一个 <% end %> 来关闭您的 <%= form_for %> 块。

# actionscript - Flash NetStream.seek 方法适用于本地测试，但不适用于服务器

> ID：11007277
> 
> 赞同：0
> 
> 时间：2012-06-13T02:00:01.840
> 
> 标签：actionscript, netstream, seek

我有一个 20 分钟的 FLV，可以在服务器上正常播放。客户端希望在会话之间保留用户的位置，以便将 time() 保存到 mySQL 并作为 FlashVar 传回，并且（如果设置）馈送到 seek() 和文本字段以进行测试。事情是 seek() 在本地工作正常，但在服务器上，无论 seek() 设置什么，我总是会收到 NetStream.Seek.InvalidTime 错误。文档在[这里](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001409.html)；这是一个非常简单的功能。

[// 编辑刚刚使用http://www.buraks.com/flvmdi/](http://www.buraks.com/flvmdi/)将关键帧添加到 FLV 但这并没有解决问题

```
src = "videos/LivingProof.flv";

nc = new NetConnection();
nc.connect(null);
nets = new NetStream(nc);
mc_flv.attachVideo(nets);

//Attach your netstream audio to a movielcip: 
snd.attachAudio(nets); 
// create a sound object 
my_snd = new Sound(snd); 
// to adjust the volume 
my_snd.setVolume(50); 
nets.play(src);

if (starttime) {
  var dest:Number = Math.floor(starttime);
  nets.seek(dest);
  this.test.text = 'target time = ' + dest;
}

nets.onStatus = function(infoObject:Object) {
     if( infoObject.level == "status" && infoObject.code == "NetStream.Play.Stop" ) {
        getURL("javascript:setTime('9999999999');", "_self");
        nets.seek(0);
        nets.pause();
        mc_play.gotoAndStop(1);
        trace('onStatus listener fired');
    } else if (infoObject.code == "NetStream.Seek.InvalidTime") { 
        _root.test.text = "NetStream.Seek.InvalidTime";
        nets.seek(infoObject.details); 
    } 
    _root.status.text = infoObject.code;
}; 
```

有人见过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:53:39.370

尝试将 if 语句添加到您的`onStatus`处理程序以检查`NetStream.Play.Start`代码并将查找逻辑移至该代码：

```
src = "videos/LivingProof.flv";

nc = new NetConnection();
nc.connect(null);
nets = new NetStream(nc);
mc_flv.attachVideo(nets);

//Attach your netstream audio to a movielcip: 
snd.attachAudio(nets); 
// create a sound object 
my_snd = new Sound(snd); 
// to adjust the volume 
my_snd.setVolume(50); 
nets.play(src);

nets.onStatus = function(infoObject:Object) {
     if( infoObject.level == "status" && infoObject.code == "NetStream.Play.Stop" ) {
        getURL("javascript:setTime('9999999999');", "_self");
        nets.seek(0);
        nets.pause();
        mc_play.gotoAndStop(1);
        trace('onStatus listener fired');
    } else if (infoObject.code == "NetStream.Play.Start) {
       if (starttime) {
          var dest:Number = Math.floor(starttime);
          nets.seek(dest);
          this.test.text = 'target time = ' + dest;
        }
    } else if (infoObject.code == "NetStream.Seek.InvalidTime") { 
        _root.test.text = "NetStream.Seek.InvalidTime";
        nets.seek(infoObject.details); 
    } 
    _root.status.text = infoObject.code;
}; 
```

# android - Android in app billing - 绑定代码的放置位置

> ID：11007278
> 
> 赞同：2
> 
> 时间：2012-06-13T02:00:03.167
> 
> 标签：android

我正在阅读他们拥有的本教程：developer.android.com/guide/market/billing/billing_integrate.html

我在这部分“绑定到 MarketBillingService”

他们在那里给出了这些代码片段：

```
try {
  boolean bindResult = mContext.bindService(
    new Intent("com.android.vending.billing.MarketBillingService.BIND"), this,
    Context.BIND_AUTO_CREATE);
  if (bindResult) {
    Log.i(TAG, "Service bind successful.");
  } else {
    Log.e(TAG, "Could not bind to the MarketBillingService.");
  }
} catch (SecurityException e) {
  Log.e(TAG, "Security exception: " + e);
} 
```

但我不知道把它们放在哪里。它是否进入用户按下“购买”按钮的活动屏幕？如果是这样，他们使用的 mContext 对象是什么？我如何证明这一点？这像按钮监听器吗？此代码是否意味着在按钮侦听器中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:08:35.470

您将 bindService 代码放在您希望应用程序启动服务或绑定到服务的位置。通常，这将在与服务交互的每个 Activity 的 onCreate 或 onStart 中。在这种情况下，您将代码放在具有“购买”按钮的活动的 onCreate 或 onStart 中。我猜你甚至可以把它放在一个由按钮启动的异步任务中。

# jquery - 如何对这个 Jquery 过滤器进行分页

> ID：11007279
> 
> 赞同：0
> 
> 时间：2012-06-13T02:00:07.440
> 
> 标签：jquery, filter, pagination

我希望你能帮助我处理[这段代码](http://jsfiddle.net/vU9Hv/1/)。我试图对在我过滤内容时必须工作的记录列表进行分页。

HTML

```
<div class="filter">
    <a href="#category-1">category 1</a>
    <a href="#category-2">category 2</a>
</div>
<ul class="items">
    <li class="category-1">item 1</li>
    <li class="category-1">item 2</li>
    <li class="category-1">item 3</li>
    <li class="category-1">item 4</li>
    <li class="category-1">item 5</li>
    <li class="category-1">item 6</li>
    <li class="category-2">item 7</li>
    <li class="category-2">item 8</li>
    <li class="category-2">item 9</li>
    <li class="category-2">item 10</li>
    <li class="category-2">item 11</li>
    <li class="category-2">item 12</li>
</ul>

<a href="#">Next</a> <a href="#">Previous</a> 
```

JS：

```
$(window).load(function(){ 
  $('div.filter').delegate('a', 'click', function (event) {   
     $('ul.items li').hide().filter('.' + this.href.slice(this.href.indexOf("#") + 1)).show();
     event.preventDefault(); 
  }); 
}); 
```

所以这是我的问题：

1.  分页将是每 6 条记录（当我单击“下一步”时显示前 6 里）。

2.  当我点击一个类别时，分页应该适用于我用来过滤记录的类，所以如果我按“下一个”或“上一个”，这必须显示选定的类别。

请随意修改我的代码。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:20:54.070

尝试这个：

```
var total = $("li").length;

$("li").each(function(i,v) {
    var inc = i + '';

    if (i < 10) {
       inc = 1;
    } else {
       inc = parseInt(inc[0]) + 1;
    }

    $(this).addClass('row' + inc);

    if ( i > 9) {
        $(this).addClass('hide');
    }

    if (i % 10 === 0 ) {
        var count = (i / 10) + 1;
        $('.filter').append('<li><a class="paginate ' + count + '" href="#">' + count + '</a></li>');
    }
}) 
```

[http://jsfiddle.net/vU9Hv/4/](http://jsfiddle.net/vU9Hv/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:11:51.457

这是你要找的东西吗？

[http://jsfiddle.net/vU9Hv/9/](http://jsfiddle.net/vU9Hv/9/)

这通常与`slice(min, max) function`. 您可以设置每页要显示的项目数 `itemsNumber = 6 //you can change this as your requirement`

这是工作代码

```
var item = $("li");
var itemsNumber = 6;
var min = 0;
var max = itemsNumber;

function pagination(action) {

    var totalItems = item.length;

    if (max < totalItems) {//Stop action if max reaches more than total items 
        if (action == "next") {

            min = min + itemsNumber;
            max = max + itemsNumber;

        }
    }

    if (min > 0) {//Stop action if min reaches less than 0
        if (action == "prev") {

            min = min - itemsNumber;
            max = max - itemsNumber;

        }
    }

    item.hide();
    item.slice(min, max).show();

}

pagination();

//Next
$("#next").click(function() {

    action = "next";
    pagination(action);

})

//Previous
$("#prev").click(function() {
    action = "prev";
    pagination(action);

})? 
```

# perl - File::Copy 在 NFS 写入时报告不正确的失败？

> ID：11007288
> 
> 赞同：3
> 
> 时间：2012-06-13T02:01:15.040
> 
> 标签：perl, nfs

我的 Perl 脚本使用 File::Copy 中的 move 函数将文件移动到 NFS 挂载的文件系统上。最近部分文件返回错误，导致我的脚本打印消息“move返回0，路径名中的文件或目录不存在”。（move成功返回1，错误返回0，错误信息来自$！）

真正奇怪的是处理文件的系统已经报告它成功处理了失败的文件！我以前从未见过成功写入的错误消息，所以我想知道它是否与 NFS 有关。我觉得奇怪的是，在移动了 28 个文件的运行中，前 24 个文件失败，最后 4 个文件成功。该脚本已经运行了几个月，没有出现任何错误，现在已经在 2 周内两次证明了这个问题。

主机在 AIX 上运行，但我怀疑这会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:09:51.270

我认为这是 NFS 问题，而不是 Perl。NFS 在某些情况下可能真的很奇怪。

您应该统计/读取写入的文件，并且不要依赖报告的错误。

File::Copy::Reliable 模块使用相同的错误处理，它会因相同的错误而失败。

表格来源：

```
copy( $source, $destination )
    || croak("copy_reliable($source, $destination) failed: $!"); 
```

只需将副本放入 eval 块中，然后尝试读取/统计目标中的文件。

如果你真的很谨慎，你可以在两个文件上使用 md5/sha1 哈希来确保它们是相同的。

问候，

# python - 如何执行 python 文件中的所有代码？

> ID：11007292
> 
> 赞同：0
> 
> 时间：2012-06-13T02:01:27.847
> 
> 标签：python, file, import

如何执行 python 文件中的所有代码，以便可以在当前代码中使用 def？我有大约 100 个脚本，它们都像下面的脚本一样编写。

举一个简单的例子，我有一个名为的 python 文件：

D:/bt_test.py

他的代码如下所示：

```
def bt_test():
    test = 2;
    test += addFive(test)
    return(test)

def addFive(test):
    return(test+5) 
```

现在，我想从一个全新的文件中运行 bt_test()

我试过这样做：

```
def openPyFile(script):
    execfile(script)

openPyFile('D:/bt_test.py')
bt_test() 
```

但这不起作用。

我也试过这样做：

```
sys.path.append('D:/')
def openPyFile(script):
    name = script.split('/')[-1].split('.')[0]
    command = 'from  ' + name +  ' import *'
    exec command

openPyFile('D:/bt_test.py')
bt_test() 
```

有谁知道为什么这不起作用？

这是一个快速视频的链接，可以帮助解释正在发生的事情。 [https://dl.dropbox.com/u/1612489/pythonHelp.mp4](https://dl.dropbox.com/u/1612489/pythonHelp.mp4)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T02:03:43.290

您应该将这些文件放在 Python 路径中的某个位置，然后导入它们。这就是`import`声明的目的。顺便说一句：与您的主程序相同的目录位于 Python 路径上，这可能是放置它们的好地方。

```
# Find and execute bt_test.py, and make a module object of it.
import bt_test

# Use the bt_test function in the bt_test module.
bt_test.bt_test() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T02:29:59.580

`execfile`不起作用的原因是因为里面的函数`bt_test`受到函数范围的限制`openPyFile`。一个简单的测试是尝试`bt_test()`从内部运行`openPyFile`。`execfile`因为 openPyFile 除了你可以完全摆脱它之外并没有真正做任何事情，或者你可以使用别名`execfile`

```
openPyFile=execfile 
```

请注意，将文件放在您的 python 路径中并导入它绝对是您最好的选择——我只在这里发布这个答案，希望能指出为什么您没有看到您想看到的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T02:05:37.973

```
>>> from bt_test import bt_test
>>> bt_test() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T03:03:31.793

除了 Ned 的回答之外，`__import__()`如果您不希望对文件名进行硬编码，这可能会很有用。

[`http://docs.python.org/library/functions.html#__import__`](http://docs.python.org/library/functions.html#__import__)

根据视频更新。

我无法访问 Maya，但我可以尝试推测。

`cmds.button(l='print', c='bt_press()')`是问题似乎潜伏的地方。`bt_press()`作为字符串对象传递，并且解释器用于解析该标识符的任何方式都不会在正确的命名空间中查找。

1）尝试`bt_press()`在模块前面传递：`cmds.button(l='print', c='bt_test.bt_press()')`

2）看看能不能`c`直接绑定到函数对象：`cmds.button(l='print', c=bt_press)`

祝你好运。

# facebook - Facebook 分享停止拾取缩略图

> ID：11007294
> 
> 赞同：0
> 
> 时间：2012-06-13T02:01:45.693
> 
> 标签：facebook, meta-tags, sharing

这在今天早上工作得很好，现在突然停止了。有一些代码更改，但不应该影响它。

元标记用于视频和缩略图。我要分享的整个 url 是 url 编码的

[视频链接](http://player.boomvideo.tv/player.php?id=distro&sv=qne5cnLVmdz6qOuF4RiEQurPfv5FOz8n&ds=Y)

分享网址是 `https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fplayer.boomvideo.tv%2Ffacebook.php%3Fid%3Dqne5cnLVmdz6qOuF4RiEQurPfv5FOz8n%26fid%3D4AAdR_VnE9f2%26goto%3Dhttp%253A%252F%252Fbit.ly%252FLMef2j&t=Disney%3A%20Brave%20-%20Warrior%20-%20ROCKYOU%20%7C%20Brought%20to%20you%20by%20www.boomvideo.tv`

突然之间，这停止了工作。它似乎没有拾取任何元标记

编辑：它似乎非常有气质。我进行了调试测试并得到以下结果。

**解析器不匹配的元数据：**

> 此元数据的解析器结果与输入元数据不匹配。这可能是由于数据以一种意外的方式排序、为一个属性提供了多个值而只期望一个值、或者给定属性的属性值不匹配造成的。以下是解析结果中未看到的输入属性 => 内容对：'og:video:url => [http://player.boomvideo.tv/swf/standalone.swf?src=http://wpc。 5138.edgecastcdn.net/005138/mps/VID_ID/16/889/05_BOOST_Boxes.mp4，og:video:secure_url](http://player.boomvideo.tv/swf/standalone.swf?src=http://wpc.5138.edgecastcdn.net/005138/mps/VID_ID/16/889/05_BOOST_Boxes.mp4) => [https://player.boomvideo.tv/swf/standalone.swf?src=http://wpc .5138.edgecastcdn.net/005138/mps/VID_ID/16/889/05_BOOST_Boxes.mp4](https://player.boomvideo.tv/swf/standalone.swf?src=http://wpc.5138.edgecastcdn.net/005138/mps/VID_ID/16/889/05_BOOST_Boxes.mp4) '

目前使用

```
<meta property="og:description" content="" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="http://player.boomvideo.tv/video.php?pi=distro&mc=300&pw=300&in=300&up=N&ssc=Y&od=N&fta=Y&ap=N&sm=N&fid=4AAdR_VnE9f2&cta=N&sv=9m7REXzzTqzqao3HgGKzJIM83MLqQ5PD&ds=Y" />
<meta property="og:image" content="http://wpc.5138.edgecastcdn.net/005138/mps/VID_ID/16/889/05_BOOST_Boxes_200x113_16639846.png" /> 
```

我错过了什么吗？

# jquery - 在jquery中拖放后如何获取图像的xy坐标？

> ID：11007297
> 
> 赞同：3
> 
> 时间：2012-06-13T02:01:49.233
> 
> 标签：jquery

我在获取矩形的 xy 坐标时遇到问题。

其实我已经得到了xy坐标，但它不正确..我使用Visual Studio 2008..n使用jquery..ok，设计是这样的：

我有一个 div 名称“drg”.. 那是一个大盒子.. 在 div（大盒子）内有一个矩形图像。我将矩形拖到 div 的左上角，但结果为 x=8，ny=8.. 从逻辑上讲，代码从 div 外开始计数。这就是为什么得到 x=10 ny=10。

我想当拖动到 div 的左上角时，结果必须是 x=0,y=0..

这是我的代码：“im”是图像的 id（红色框）

```
$(document).ready(function() {
    // sets draggable the elements with id="im"
    $('#im').draggable({
        cursor: 'move',        // sets the cursor apperance
        containment: '#drg', 

        stop : function(){
            $("#value").text('x-axis :' + $('#im').offset().left + 'y-axis :' + $('#im').offset().top);

            var imgPosX = 10 - $("img#im").width();
            var imgPosY = 10 - $("img#im").height();

        }
    });
}); 
```

当我将图像（红色框）拖到左上角时，它得到x = 8，y = 8 ...它从蓝色框中计数..我希望它从蓝色框中计数 n 得到x = 0,y=0 如果图像（红色框）的位置是这样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T02:03:39.873

```
stop: function(event, ui) {

        // Show dropped position.
        var Stoppos = $(this).position();
        var left = Math.abs(Stoppos.left);
        var top = Math.abs(Stoppos.top);
    } 
```

您也可以在`drag()`活动中进行，例如

```
 drag: function(){
        var offset = $(this).offset();
        var xPos = Math.abs(offset.left);
        var yPos = Math.abs(offset.top);
        $('#posX').text('x: ' + xPos);
        $('#posY').text('y: ' + yPos);
    } 
```

**[完成上述两个事件的演示](http://jsfiddle.net/DGbT3/416/)**

### 根据评论

由于您不想要负值，因此请使用`Math.abs()`使所有值变为正值。

# c# - AccessViolationException [SL / SyncFusion]

> ID：11007298
> 
> 赞同：0
> 
> 时间：2012-06-13T02:02:09.547
> 
> 标签：c#, silverlight, exception, access-violation, syncfusion

我目前正在使用 Silverlight 4.0 进行开发，但遇到了这个棘手的异常：

**遇到 AccessViolationException**
试图读取或写入受保护的内存。这通常表明其他内存已损坏。

当我将 SyncFusion 电子表格控件加载到屏幕上时，这种情况会定期发生。然而，在加载过程中，我执行了大量任务（例如将值插入电子表格、启用其 CalcEngine、突出显示行、应用边框等）。因此，我无法确定抛出异常的位置。

关于如何调试此异常，我已经没有线索了。抛出此异常后，我无法返回程序流程（Silverlight 只是崩溃并且调试器已关闭），因此我不确定如何找到问题的根源。

有人有什么想法吗？

**编辑：**我已经看到了调用堆栈，它告诉我 System.Windows.dll 在方法上遇到了 AccessViolationException `PeriodicallyCleanUpNativePeers()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:52:17.450

如果您在应用程序中使用电子表格功能区，则必须将程序集 Syncfusion.Theming.Office2010Blue.dll 添加到您的应用程序。默认情况下，电子表格功能区加载了 Office 2010 蓝色样式。如果您没有将此主题程序集添加到您的应用程序，那么它也会在加载时抛出 AccessViolationException。

问候， 西瓦库玛

# active-directory - 通用组的 LDAP 查询

> ID：11007301
> 
> 赞同：0
> 
> 时间：2012-06-13T02:02:49.423
> 
> 标签：active-directory, ldap

我使用以下查询来查找每个用户所属的组：

`(&(objectClass=group)(|(member=cn=UID,OU=ServiceAccounts,OU=MC,DC=ads,DC=myCompany,DC=com,DC=au)(member=cn=UID,OU=BTLY,OU=Sites,OU=MC,DC=ads,DC=myCompany,DC=com,DC=au)))`

此查询使用以下基本 DN 工作和运行：

`OU=MC,DC=ads,DC=myCompany,DC=com,DC=au`

我的查询有几个问题：

*   我不喜欢使用 OR 运算符来查找服务帐户用户和 BTLY 用户。
*   我不想对 BTLY 网站进行硬编码，还有其他网站。

理想情况下，我只想将查询设为：

`(&(objectClass=group)(|(member=cn=UID,OU=MC,DC=ads,DC=myCompany,DC=com,DC=au))`

这样，我不关心用户帐户是否是服务帐户，也不关心该帐户属于哪个站点。不幸的是，该查询不起作用。

有人可以帮我概括一下 LDAP 查询吗？我有点新手，所以我很可能错过了一些完全明显的东西！

谢谢！

* * *

谢谢回复。你说的很有道理，但不幸的是，它对我没有帮助。我们正在使用 GlassFish（Java 应用服务器），并将其配置为指向本地 AD 服务器。通常，一个人可以告诉 GlassFish 如何检索用户，例如

`(&(objectCategory=user)(CN=UID))`

GlassFish 将拾取所有组（可能通过使用`memberOf`属性）。

这一次，我们使用不同的 AD 服务器来托管不同的用户目录。GlassFish 无法自行检索组。因此，我们可以在一个字段中为 GlassFish 提供自定义查询以查找组。在这个字段中，我已经发布了我发布的查询，该查询有效，但丑陋且冗长。

我想做的是：

`(&(objectClass=group)(member=cn=UID))`

但这不起作用。

有没有办法做到这一点？

谢谢，穆尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:56:38.397

我只是尝试重新表述您的问题，但要发表评论的文字太多。

您正试图`CN=UID`从 nod 开始查找用户所属的所有组`OU=MC,DC=ads,DC=myCompany,DC=com,DC=au`。

这可以通过检索`memberOf`用户本身的属性来完成。唯一的问题（可能不是您的情况）是*主要组*不在此 DN 列表中，它是使用`primaryGroupId`属性编码的 appart。

所以

```
(&(objectCategory=user)(CN=UID)) 
```

将进行工作测试：

```
ldifde -f t.ldf -D "OU=MC,DC=ads,DC=myCompany,DC=com,DC=au" -r "(&(objectCategory=user)(CN=UID))" -l memberof 
```

备注：`samAccountName`或者`userPrincipalName`是您可以依赖 Active-Directory 中条目的唯一性的属性，这不是 CN 的情况（管理员可以更改它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:41:00.170

我的猜测是使用这种技术是不可能的。您需要在此处使用通配符：

```
(&(objectCategory=group)(member=CN=UID,*)) 
```

这对于 DN 属性是不可接受的（例如存储在“成员”属性中的属性）：

[http://msdn.microsoft.com/en-us/library/ms676930(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms676930(v=vs.85).aspx)

我的建议是：使用一些工具为您生成“丑陋”的查询（使用上面提到的语法）并为您的工具“提供”最终结果。看不到任何选项，抱歉...

# content-management-system - Pyro 组验证

> ID：11007309
> 
> 赞同：0
> 
> 时间：2012-06-13T02:03:42.790
> 
> 标签：content-management-system, pyro

**背景**

如果用户是管理员组的一部分，我想显示一个指向管理区域的链接，所以在我的视图代码中我想做类似的事情；

```
{{ if user:group group_name="administrators" }}
   <a href="{{ url:base }}admin" class="btn red">Admin Area</a>
{{ endif }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:03:53.363

经过一番折腾，我找到了解决方案，但我得到了它的工作；

```
{{ if user:group=="admin" }}

.....html code

{{ endif }} 
```

# user-interface - ASP.NET - 跨多个项目重用 UI？

> ID：11007312
> 
> 赞同：1
> 
> 时间：2012-06-13T02:04:11.277
> 
> 标签：user-interface, asp.net-3.5

情况如下：

前段时间，我创建了一个后端接口，用于在数据库中添加/修改/删除项目。它是作为一个单独的项目创建的，我们仍在使用该代码的特定实例。我将其称为“版本 1”。

完成后不久，我复制了代码并将其集成到一个更大的项目中。我将原始项目数据库中使用的所有数据库表复制到该项目已经使用的数据库中。我还必须在这里复制前端，但我关心的是后端。这个接口的要求（我称之为“版本 2”）有点复杂，所以我不得不继续努力，并对数据库表进行一些修改。

它本质上是同一接口的 2 个分支版本。但是，自版本 2 的构思以来，版本 1 并没有受到太多关注。我在版本 2 中所做的一些更改不仅仅是新功能，而是与版本 1 相关的改进/错误修复。我应该在版本 1 上也进行这些更改，但不幸的是我没有。展望未来，我将需要对这两个版本进行改进，其中一些改进将适用于它们。

我真的很想以某种方式合并这两个接口，因为我很确定从长远来看它会减少我的工作量。坦率地说，我想*放弃*第 1 版，将第 2 版 UI 改编为第 1 版的数据库。

我的第一直觉是将所有内容传输到具有“版本”属性的用户控件。然后该版本将用于隐藏/显示与该版本相关或不相关的控件，并且还将用于确定要使用的数据库查询/存储过程。问题在于整个界面跨越 5 个页面。其中一些页面作为来自 5 个页面中的另一个页面的对话框打开。我想我可以简单地每个接口有一个 div，然后当 !IsPostBack 时，我可以根据查询字符串变量设置每个 div 的 Visible 属性。但是，这看起来会非常混乱，并且一页上会有很多代码和标记。我想或者我可以有 5 个用户控件，但这似乎是一个奇怪的设计。

还有其他可行的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:16:38.800

我一直在维护 4 个界面几乎相同的产品：

*   他们从一个项目开始
*   被克隆和分支
*   我一直在慢慢地重新合并它们

我最好的建议是尝试使用适用于两者的 UI，然后将两者都切换到使用它。

之后我有一个*项目本地*设置文件，它定义了哪些功能不应该存在于一个或另一个中。

# android - 在 Android 中创建单例类

> ID：11007321
> 
> 赞同：0
> 
> 时间：2012-06-13T02:06:31.793
> 
> 标签：android, service, singleton

我正在尝试为一个项目制作一个简单的 mp3 播放器应用程序，但我无法从主要活动中访问该服务。我在活动中有一些 onclicklisteners：

```
play.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Intent intent = new Intent(getApplicationContext(), PlayService.class);
            intent.putExtra("key", 0);
            startService(intent);               
        }
    });

    pause.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(getApplicationContext(), PlayService.class);
            intent.putExtra("key", 1);
            startService(intent);
        }
    });

    stop.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(getApplicationContext(), PlayService.class);
            intent.putExtra("key", 2);              
        }
    }); 
```

以及响应 onclicks 的服务中的 switch 语句：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId){

    int key = intent.getIntExtra("key", 1);
    MediaPlayer mMediaPlayer = new MediaPlayer();

    FileInputStream fileStream = null;
    try {
        fileStream = new FileInputStream("/sdcard/Download/Bob_Marley-Jammin.mp3");
    }
    catch (FileNotFoundException e1) {
            e1.printStackTrace();
    }

    switch (key) {
    case 0: //Play
        if (mMediaPlayer.isPlaying()){
            break;
        }
        else
            try {
                mMediaPlayer.setDataSource(fileStream.getFD());
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            try {
                mMediaPlayer.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            mMediaPlayer.start();
        break;
    case 1: //Pause
            mMediaPlayer.pause();
        break;
    case 2: //Stop
        if(mMediaPlayer.isPlaying()){
            mMediaPlayer.pause();
            mMediaPlayer.seekTo(0);
        }
        break;
    default:
        break;
    }   

    return Service.START_NOT_STICKY;
} 
```

由于某种原因，播放调用有效，但暂停和停止调用无效。我认为这可能是因为我每次调用服务时都会创建一个新的 MediaPlayer 引用。（我不知道如何解决这个问题）

所以我听说通过将其设置为单例类并从活动中访问它更容易访问该服务，但我不确定如何实现它。基于我的代码的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:15:21.177

播放按钮中的 startService 会启动您的服务。每次单击下一步按钮都会尝试再次启动服务，但没有任何效果。您必须绑定到服务，并在您的活动和服务之间建立通信，以便停止和暂停工作。把“玩”也放在一个电话里。这里有关于活动和服务之间的通信如何工作的很好的文档：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:22:18.383

不能初始化 Service（使用构造函数，或者调用 getInstance 方法），所以不能使用单例类。
解决方案是您可以在活动和服务之间进行通信。这是一个 [示例：使用消息传递在 Activity 和服务之间进行通信](https://stackoverflow.com/questions/4300291/example-communication-between-activity-and-service-using-messaging)
查看 android 文档中的本地服务示例：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

# javascript - 在网络工作者中实现信号量锁定的有效方法？

> ID：11007322
> 
> 赞同：2
> 
> 时间：2012-06-13T02:06:38.703
> 
> 标签：javascript, web-worker

我有一大段代码（用 Emscripten 编译）在网络工作者中运行。该页面使用一个 postMessage 在 worker 中启动一项任务，当 worker 完成时，它会发送另一个 postMessage。伟大的。但是，我想添加一个新功能，该功能需要我在执行过程中暂停工作人员，通过 postMessage 将消息踢回浏览器，等待用户通过 postMessage 提交有效响应，然后完成执行. 但是，我想不出任何有效的方法。我试图让工作人员在无限循环中等待，直到在消息到达时设置控制变量失败，因为无限循环阻止了工作人员的消息处理程序的执行。我可以通过抛出异常来打破工作者执行，但是我不知道如何恢复执行。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:12:51.370

在 JS 中，创建类中断机制的一种方法是使用 setTimeout(some_function,1)。这样，代码 some_function 执行完成，如果其他事件处理程序在队列中，则可以处理它们。

这种模式将取决于您提到的“大量代码”是否可以拆分为顺序步骤（或方法）。说，如果它是这样的：

```
step1();
step2();
step3(); 
```

所以，比如说在“step1”方法的执行过程中，如果你得到一个“中断”或者换句话说发生了一个“消息”事件，它可以在 step 完成执行之后但在 step2 开始之前处理。

这一切都取决于您的代码正在解决的问题的本质是什么。更多的上下文会很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:19:10.280

我要解决这个问题的方法是让一个主要的“控制器”工作人员作为共享 Web 工作人员运行。然后，我会让该控制器在必要时分拆其他工人，通过`postMessage`.

这样一来，您的共享工作者就像您的主循环一样，可以让事情顺利进行。我会避免在那个主循环中做任何类型的非异步工作。

# iphone - 花栗鼠 6 空间初始化

> ID：11007325
> 
> 赞同：0
> 
> 时间：2012-06-13T02:07:14.903
> 
> 标签：iphone, ios, cocos2d-iphone, chipmunk

我正在尝试使用[chipmunk6.x](https://chipmunk-physics.net/)并遇到问题。它不是在创造物理环境。如何在我的项目中启用chipmunk6.x 物理环境？空间管理系统运行良好。我希望花栗鼠库附件没有问题。我正在使用我刚刚替换了花栗鼠库的 cocos2d 旧版本。

```
space = cpSpaceNew();

space->gravity = cpv(0, -100);

//
// rogue shapes
// We have to free them manually
//
// bottom
cpShape *walls_[4];
walls_[0] = cpSegmentShapeNew( space->staticBody, cpv(0,0), cpv(s.width,0), 0.0f);

// top
walls_[1] = cpSegmentShapeNew( space->staticBody, cpv(0,s.height), cpv(s.width,s.height), 0.0f);

// left
walls_[2] = cpSegmentShapeNew( space->staticBody, cpv(0,0), cpv(0,s.height), 0.0f);

// right
walls_[3] = cpSegmentShapeNew( space->staticBody, cpv(s.width,0), cpv(s.width,s.height), 0.0f);

for( int i=0;i<4;i++) {
    walls_[i]->e = 1.0f;
    walls_[i]->u = 1.0f;
    cpSpaceAddStaticShape(space, walls_[i] );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:23:24.710

您需要比“它不是创建物理环境”更具体。

您粘贴的代码看起来不错。它会发生什么，您期望会发生什么。

# context-free-grammar - 如何使用闭包证明 L={w|#a(w)=#b(w)=#c(w)} 不是上下文无关的

> ID：11007326
> 
> 赞同：1
> 
> 时间：2012-06-13T02:07:20.333
> 
> 标签：context-free-grammar, formal-languages

如何`L={w|#a(w)=#b(w)=#c(w)}`使用闭包证明该语言不是上下文无关的？

谢谢

**编辑 ：**

我知道该语言`L1 = {a^i b^i c^i | i>=0}`不是上下文无关语言。现在我正在尝试寻找另一种语言`L2`，其中`L2`将是常规语言，以产生矛盾，因为如果`L1`是上下文无关的并且`L2`是常规语言，那么`L1∩L2`也是上下文无关的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:31:27.330

好吧，为了从 to 得到`L`，`L1`您需要对 a、b 和 c 进行排序。有一种非常简单的常规语言可以相交`L`以强制执行这种排序 - 你能看到它是什么吗？

如果你知道如何`L3 = { w | #0(w) = #1(w) }`使用闭包属性证明它是非常规的，那么这个证明真的很相似。

# actionscript-3 - beginBitmapFill() 不适用于现有的影片剪辑，帮帮我

> ID：11007327
> 
> 赞同：0
> 
> 时间：2012-06-13T02:07:32.620
> 
> 标签：actionscript-3, flash, bitmapdata

我想使用 beginBitmapFill() 将图像填充到影片剪辑中，但我看不到图像。实际上，我已经创建了一个带有盒子的影片剪辑，并且我将它倾斜了。我想在倾斜的框中显示图像。并且图像也应该看起来歪斜（需要在框内填充）

![在此处输入图像描述](../Images/835bd1ba842f5681a38410aa15560a2b.png)

这是我的动作脚本代码：

```
package{

import flash.display.Sprite;
import flash.display.MovieClip;
import flash.display.Loader;
import flash.net.URLRequest;
import flash.events.Event; 
import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.display.LoaderInfo;

public class AttachMovieClipExample extends Sprite{

public var rect:MovieClip;

public function AttachMovieClipExample()
{
    rect = new redRectangle();

    var bitmapData:BitmapData;

    var loader:Loader = new Loader();
    loader.load(new URLRequest("sam.jpg"));
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);

    function onComplete (event:Event):void
    {
        bitmapData = Bitmap(LoaderInfo(event.target).content).bitmapData;
        rect.graphics.clear();
        rect.graphics.beginBitmapFill(bitmapData,null,false,true);
       // rect.graphics.endFill();
        rect.x = 400;
        rect.y = 210;
        addChild(rect);
    }

}

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:16:05.950

在您的`onComplete`方法中，您错过了对`drawRect`

```
function onComplete (event:Event):void
{

    bitmapData = Bitmap(LoaderInfo(event.target).content).bitmapData;
    rect.graphics.clear();
    rect.graphics.beginBitmapFill(bitmapData,null,false,true);
    rect.graphics.drawRect(x,y,height,width) //where x, y, height and width are values
    rect.graphics.endFill();
    rect.x = 400;
    rect.y = 210;
    addChild(rect);
} 
```

图形类的文档为您提供了更多信息。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#drawRect()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#drawRect%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T05:01:07.700

试试这个： 1\. beginBitmapFill() 2\. drawRect() 3\. endFill() （永远不要忘记第 3 步！）

# django - 表单提交中的Django重定向循环

> ID：11007330
> 
> 赞同：2
> 
> 时间：2012-06-13T02:08:07.987
> 
> 标签：django, apache, wsgi

澄清一下，这是我第一次将 django 网站投入生产。

我在 django 中有一个可以在本地运行的简单网站。但是当我将它部署在生产服务器中时，它会在我提交表单时进入重定向循环。然后浏览器只是告诉我发生了重定向循环并要求清空缓存等等......

此问题发生在管理员中。我不知道它是否会发生在前端，因为它在前端没有任何形式。

笔记：

*   我没有任何时髦的中间件。
*   我在具有或多或少相同规格的生产服务器的虚拟机中进行了测试，它工作正常。
*   提交的数据得到正确处理和保存
*   网站的其余部分都很好

我通过 .htaccess 在共享主机中使用 apache 和 wsgi。

在这一点上，我不排除 dns 配置错误的可能性，但我已经检查过并且看起来很好。

.ht 访问：

```
AddHandler wsgi-script .wsgi
DirectoryIndex app22.wsgi

<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f

    RewriteRule ^(.*)$ app22.wsgi/$1 [QSA,PT,L]
</IfModule> 
```

app22.wsgi：

```
import os, sys

os.environ['DJANGO_SETTINGS_MODULE'] = 'BTT.settings'

path = '/home/bttmonch/apps'
if path not in sys.path:
    sys.path.append(path)

path = '/home/bttmonch/apps/ENV/lib/python2.7/site-packages'
if path not in sys.path:
    sys.path.append(path)

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

在这一点上，我创建了一个只激活了管理员的全新应用程序，以查看它是否是一些编码问题并将其放在服务器上。同样的事情也会发生。

我正在使用我之前提到的相同的 .htaccess 和 .wsgi 文件。

我的 urls.py 只是基本的：

```
from django.conf.urls.defaults import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

我正在通过 test.domainname.com 访问该应用程序。我已经尝试通过 test.domainname.com、test.domainname.com/app22.wsgi、domainname.com/test/ 和 domainname.com/test/app22.wsgi 访问它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:32:15.073

在服务器中闲逛后，我停止了重定向循环。但是现在每次我保存表单时都会收到 403 错误。然后我清除了浏览器cookie，一切恢复正常，表单数据成功保存在数据库中。

在这一点上，只是不要现在还有什么可以尝试的......

# version-control - 如何使用 Mercurial 跨多个存储库共享代码？

> ID：11007336
> 
> 赞同：4
> 
> 时间：2012-06-13T02:08:48.890
> 
> 标签：version-control, mercurial, code-reuse

随着时间的推移，我开发了多种实用功能、类和控件，我可以在多个项目中重复使用它们。对于这些项目中的每一个，我都有一个 Mercurial 存储库，并且我复制了可重用的项目。显然这很糟糕，因为如果我修复了其中一个可重用组件中的错误，我必须在所有存储库中手动复制代码，并且我可能会在此过程中出错。

你如何处理这种情况？如何使用 Mercurial 跨多个存储库共享代码，如果我在一个存储库中进行更新，我可以轻松地与其他存储库集成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T02:17:48.713

查看子存储库：[https ://www.mercurial-scm.org/wiki/Subrepository](https://www.mercurial-scm.org/wiki/Subrepository)

它们不会帮助您使其他副本保持最新（您必须手动执行此操作），但它们会使这变得容易（您将`hg pull; hg update`在子存储库中使用，然后提交父存储库）。

另一个选项（我在不同的项目中使用）是强制布局，然后简单地假设“实用程序”存储库存储在`../utils`，相对于每个“真实”存储库。

# emacs - Emacs：获取 new-frame 和 emacsclient -c 以使用设置的帧大小？

> ID：11007337
> 
> 赞同：7
> 
> 时间：2012-06-13T02:08:58.390
> 
> 标签：emacs, elisp, dot-emacs, emacsclient

我是 StackOverflow 的新手，我有一个问题，这个问题几乎是我在掌握 Emacs 的过程中唯一让我烦恼的事情。

我将`.emacs`文件配置为将 Emacs 的默认帧大小设置为 70 行和 80 列，如下所示：

```
(add-to-list 'default-frame-alist '(left . 0))
(add-to-list 'default-frame-alist '(top . 0))
(add-to-list 'default-frame-alist '(height . 70))
(add-to-list 'default-frame-alist '(width . 80)) 
```

这在启动 Emacs 时工作正常，问题是当我使用`new-frame`或`emacsclient -c`不遵守这些设置启动新框架时。有没有办法在执行时强制`emacsclient`并`new-frame`读取`.emacs`文件中的设置？

**编辑：**

这是我的`.emacs`文件：

```
;;This setting is meant to force emacs to read size settings before make-frame.

(add-hook 'before-make-frame-hook
      #'(lambda ()
          (add-to-list 'default-frame-alist '(left   . 0))
          (add-to-list 'default-frame-alist '(top    . 0))
          (add-to-list 'default-frame-alist '(height . 70))
          (add-to-list 'default-frame-alist '(width  . 80))))

;;disable annoying welcome screen.
(setq inhibit-splash-screen t)
(setq inferior-lisp-program "/usr/bin/abcl")
(add-to-list 'load-path "/usr/share/emacs/site-lisp/slime/")
(require 'slime)
(slime-setup)

(add-to-list 'auto-mode-alist '("\\.lisp$" . lisp-mode))
(add-to-list 'auto-mode-alist '("\\.cl$" . lisp-mode))
(add-to-list 'auto-mode-alist '("\\.asd$" . lisp-mode))
(require 'slime)
(slime-setup)
(eval-after-load "slime"
 '(progn
   (setq slime-complete-symbol*-fancy t
      slime-complete-symbol-function 'slime-fuzzy-complete-symbol
      slime-when-complete-filename-expand t
      slime-truncate-lines nil
      slime-autodoc-use-multiline-p t)
(slime-setup '(slime-fancy slime-asdf))
(define-key slime-repl-mode-map (kbd "C-c ;")
  'slime-insert-balanced-comments)
(define-key slime-repl-mode-map (kbd "C-c M-;")
  'slime-remove-balanced-comments)
(define-key slime-mode-map (kbd "C-c ;")
  'slime-insert-balanced-comments)
(define-key slime-mode-map (kbd "C-c M-;")
  'slime-remove-balanced-comments)
(define-key slime-mode-map (kbd "RET") 'newline-and-indent)
(define-key slime-mode-map (kbd "C-j") 'newline)))

(add-to-list 'default-frame-alist '(left . 0))
(add-to-list 'default-frame-alist '(top . 0))
(add-to-list 'default-frame-alist '(height . 70))
(add-to-list 'default-frame-alist '(width . 80))

(normal-erase-is-backspace-mode 0)
(tool-bar-mode -1) ;;method for disabling changed in 24\. can not nil, most negative
(scroll-bar-mode -1)

;;for loading cedet.
(load-file "/usr/share/emacs/site-lisp/cedet/common/cedet.el") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T03:58:55.853

您可以尝试将以下钩子添加到您的 Emacs 启动文件（通常为`~/.emacs`），即：

```
(add-hook 'before-make-frame-hook
          #'(lambda ()
              (add-to-list 'default-frame-alist '(left   . 0))
              (add-to-list 'default-frame-alist '(top    . 0))
              (add-to-list 'default-frame-alist '(height . 70))
              (add-to-list 'default-frame-alist '(width  . 80)))) 
```

或者，如果您想重新加载整个`.emacs`文件：

```
(add-hook 'before-make-frame-hook #'(lambda () (load-file "~/.emacs"))) 
```

前一个钩子几乎肯定更可取，因为重新加载整个`.emacs`文件可能不仅不必要且浪费资源，而且可能导致错误或奇怪的行为（取决于文件的内容）。

详细地说，钩子是定义在 Emacs 会话中发生特定事件时执行的命令列表的变量，例如，加载主要编辑模式，或者在这种情况下，创建新框架。有关更多信息，请参阅有关[挂钩的 Emacs 手册页](http://www.gnu.org/software/emacs/manual/html_node/emacs/Hooks.html)。一般来说，如果您希望每次在 Emacs 中发生特定事件时都执行某个函数，那么将所述函数添加到正确的预先存在的钩子中可能是最好的方法。

# php - 如何从提交的原始 base64 数据创建文件？

> ID：11007344
> 
> 赞同：0
> 
> 时间：2012-06-13T02:09:50.853
> 
> 标签：php, drupal

我正在尝试从以表单形式提交的原始 bases64 编码数据重建 WAV/MP3 文件。我知道这些步骤应该是这样的： 1\. 创建新文件 2\. 使用 file_put_content 到带有解码数据的新文件上这是正确的吗？最好/最简单的方法是什么？

# php - Mysql PDO 没有正确插入序列化的 php 数据（在 ´ 符号处截断）？

> ID：11007348
> 
> 赞同：1
> 
> 时间：2012-06-13T02:10:40.187
> 
> 标签：php, mysql, pdo, prepared-statement

我在 php 中序列化一些数组并将它们插入到 mysql`TEXT`列中。

一些数据被错误地插入。插入语句的示例，

```
$q = $this -> dbc -> prepare("INSERT INTO table (files) VALUES(?)");
$q -> execute(array(serialize($files))); 
```

`strlen`数组的值`$files`小于 65,000，因此不会因为最大插入`TEXT`mysql 列而缩短。

`serialized($files)`插入前的数据，

```
string 'a:4:{s:4:"CD 1";a:20:{s:32:"01 - Can´t Talk To That Girl.mp3";i:4558470;s:22:"02 - No Pla // CONTINUES FOR SOME TIME 
```

`$files`从数据库中获取的值，

```
a:4:{s:4:"CD 1";a:20:{s:32:"01 - Can 
```

似乎它缩短了字符`´`，我对 PDO 的理解是它会正确地转义所有字符以进行准备好的查询？

只是要注意我的 PDO 连接设置为`UTF-8`？

我怎样才能阻止这种情况发生？

谢谢

**编辑**

我可以确认这是由于设置了与`UTF-8`PDO 为何会这样做的任何想法的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:03:45.573

php中的“´”反引号字符是系统的快捷方式（“反引号之间的文本”）

见[手册](http://php.net/manual/en/language.operators.execution.php)

您需要检查它是否被正确引用或转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:47:07.490

尽量不去深入字符编码的兔子洞；通过确保您的字符串是 UTF-8，您是否有更多的运气：

```
$q = $this -> dbc -> prepare("INSERT INTO table (files) VALUES(?)");
$q -> execute( array( utf8_encode( serialize( $files ) ) ) ); 
```

# joomla - 致命错误：在 joomla 2.5 中调用未定义的方法 JDocumentRaw::addCustomTag()

> ID：11007349
> 
> 赞同：2
> 
> 时间：2012-06-13T02:10:48.927
> 
> 标签：joomla, joomla1.7

我有一个示例代码：在 default.php 中：

```
<?php
JHTML::_('behavior.mootools'); /* to load mootools */
$ajax = "
/* <![CDATA[ */
window.addEvent('domready', function() {
    $('start_ajax').addEvent('click', function(e) {
        e.stop(); 
        var url = 'index.php?option=com_xxx&controller=xxx&task=updateAjax&format=raw';
        var x = new Request({
            url: url, 
            method: 'post', 
            onSuccess: function(responseText){
                document.getElementById('ajax_container').innerHTML = responseText;
            }
        }).send(); 
    });
})
/* ]]> */
" ;
$doc = &JFactory::getDocument();
$doc->addScriptDeclaration($ajax);
?> 
```

和 default.php 的控制器我使用代码：

```
function updateAjax() {
   echo date('Y-m-d D H:i:s');
} 
```

当我运行代码时出错`undefined method JDocumentRaw::addCustomTag()`，如何修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T02:20:29.233

我认为你在使用 ajax 调用 jquery 时错了：

```
$document =& JFactory::getDocument();
$document->addCustomTag("call jquery library or script other"); 
```

你尝试：

```
if($document->getType() != 'raw'){
   $document->addCustomTag("call jquery library or script other"); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T14:25:12.060

这是因为您将“format”参数设置为“raw”，通常是通过将 &format=raw 添加到用于访问组件的 URL 的末尾。这会触发 Joomla 使用 JDocumentRaw 渲染器而不是标准的 JDocument 渲染器。您可以通过选择以下选项之一来解决此问题（以更合适的为准）：

*   从链接页面的 URL 中删除“format=raw”并使用替代方法使您的页面按预期显示，例如将 tmpl=component 或 template=system 添加到 URL

*   添加检查“格式”是否设置为原始，在这种情况下根本不添加脚本

*   用你自己的扩展 JDocumentRaw 类，它实现你自己的方法来添加脚本并使用 format=yourRendererName 而不是 format=raw

# sql-server-2008 - 自动化时的 PowerShell 和 Excel 问题

> ID：11007350
> 
> 赞同：5
> 
> 时间：2012-06-13T02:11:00.400
> 
> 标签：sql-server-2008, powershell, excel, vba

我正面临一个奇怪的问题。

当我运行这段代码时：

```
$Excel = New-Object -Com Excel.Application 
$book = $Excel.Workbooks.Add()
[threading.thread]::CurrentThread.CurrentCulture = 'en-US'
sleep 10
$book.saveas("c:\Temp\test.xlsx")
$Excel.quit()
Stop-Process -Name "Excel*" 
```

在 PowerGui、POwerSHell 主机..任何地方，它都工作得很好。

如果我放入 .bat 并调用 powerhsell "c:\temp\excel.ps1" 也可以正常工作。

但是，如果我尝试将此人安排到计划任务中或通过 sql server 作业类型 cmd 运行，则会发生错误：

使用“1”参数调用“SaveAs”的消息异常：“Workbook 类的 SaveAs 方法失败”

只有当它被 SQL Server Jobs 调用（这也是一个简单的 cmd 命令并且该行与 .bat powerhsell "c:\temp\excel.ps1" 相同）时才会发生错误。

它可以是什么？我尝试更改文件格式..等..没有

多谢你们 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T03:44:49.827

解决方案是：

您必须创建一个文件夹（或在 64 位 Windows 上创建两个）：

（32 位，始终）

C:\Windows\System32\config\systemprofile\Dektop

(64位)

C:\Windows\SysWOW64\config\systemprofile\Desktop

解决方案在论坛中：

[解决方案论坛 MS](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/aede572b-4c1f-4729-bc9d-899fed5fad02)

# ios - 在哪里可以找到原生 Apple 按钮的 PNG，例如细节披露等？

> ID：11007351
> 
> 赞同：4
> 
> 时间：2012-06-13T02:11:17.750
> 
> 标签：ios, user-interface, uikit

我在一些书中读到，构成 UIKit 的各种图形在 SDK 中的某个地方可以作为单独的 PNG 轻松获得，例如 UITableViews 上的详细信息披露按钮等。

我在哪里可以找到这些 PNG？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T02:14:18.933

GitHub上有一个开源项目演示了如何做到这一点，看看它（它不是很琐碎，如果你只对图形感兴趣，使用演示应用程序提取你需要的东西） [https:// github.com/0xced/UIKit-Artwork-Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)

# algorithm - 简单 TSP 的数据

> ID：11007355
> 
> 赞同：14
> 
> 时间：2012-06-13T02:12:10.513
> 
> 标签：algorithm, genetic-algorithm

我写了一个简单的遗传算法，可以解决 5 个城市的旅行商问题。我想看看它如何解决更多城市的问题，比如 10、25、50、100，但我找不到问题的示例日期来尝试它。基本上，我正在寻找具有城市之间距离的二维列表或矩阵。如果有解决方案就好了。我应该去哪里看？

先感谢您

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T12:36:35.027

[TSPLIB](http://comopt.ifi.uni-heidelberg.de/software/TSPLIB95/)是一个著名的 TSP 基准库，其实例范围从 14 个到接近 100,000 个城市。实例已被求解到最优，对于某些实例，最优解也是可用的。

许多实例具有真实世界的背景，例如在德国、瑞士、美国或整个世界的城市旅行。一些实例代表计算机板布局的钻孔问题还有一个代表尤利西斯航行的实例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-28T20:52:06.513

我在网上找到的资源非常庞大。我可能做错了什么，但是 10 个地方（城市）大约需要 0.6 秒，11 个地方需要大约 7 秒。我能找到的最小的已知解决方案数据集是 15 个位置（被认为是“小”，“经典”是 48 个位置），但也许这些是用于优化（非暴力）算法的。最后，我用现实世界的城市制作了自己的表格：

```
 m
           a
           a                           h
           s       h   s               u
           t   a   e   i   g           l
           r   a   e   t   e           s
           i   c   r   t   l   e   b   b   a       e
           c   h   l   a   e   c   o   e   n   o   p
           h   e   e   r   e   h   n   r   n   h   e
           t   n   n   d   n   t   n   g   e   e   n
maastricht 0   29  20  21  16  31  100 12  4   31  18
    aachen 29  0   15  29  28  40  72  21  29  41  12
   heerlen 20  15  0   15  14  25  81  9   23  27  13
   sittard 21  29  15  0   4   12  92  12  25  13  25
    geleen 16  28  14  4   0   16  94  9   20  16  22
      echt 31  40  25  12  16  0   95  24  36  3   37
      bonn 100 72  81  92  94  95  0   90  101 99  84
  hulsberg 12  21  9   12  9   24  90  0   15  25  13
     kanne 4   29  23  25  20  36  101 15  0   35  18
       ohe 31  41  27  13  16  3   99  25  35  0   38
      epen 18  12  13  25  22  37  84  13  18  38  0

Optimal (by program): cities 0-7-4-3-9-5-2-6-1-10-8-0 = 253km
maastricht -> hulsberg -> geleen -> sittard -> ohe -> kanne -> echt
-> heerlen -> bonn -> aachen -> epen -> kanne -> maastricht 
```

程序可读的数据格式是部分表（因为它是对称的）：

```
29 20 21 16 31 100 12 4 31 18
15 29 28 40 72 21 29 41 12
15 14 25 81 9 23 27 13
4 12 92 12 25 13 25
16 94 9 20 16 22
95 24 36 3 37
90 101 99 84
15 25 13
35 18
38 
```

对我来说，在第三代 i7 (i7-3630QM) 上处理这需要大约 6.7 秒。程序是用 C++ 编写的，单线程并且简单地暴力破解可能性。对于测试，删除一个地方可能更实际，然后大约需要 660 毫秒（0.7 秒），这仍然足以查看代码更改是否有很大的不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-11T23:33:23.493

对于接下来的收入，我将粘贴更多“小”案例：

[您可以在此处](http://www.math.uwaterloo.ca/tsp/world/countries.html#WI)找到更多测试。但文件是“.tsp”扩展名，你应该做一个简单的解析，转换成距离矩阵。

（以英里为单位的距离）

6个城市，**预计：1248.0**

```
9999    64  378 519 434 200 
64  9999    318 455 375 164 
378 318 9999    170 265 344 
519 455 170 9999    223 428 
434 375 265 223 9999    273 
200 164 344 428 273 9999 
```

15 个城市，**预计：1194.0**

```
-1  141 134 152 173 289 326 329 285 401 388 366 343 305 276 
141 -1  152 150 153 312 354 313 249 324 300 272 247 201 176 
134 152 -1  24  48  168 210 197 153 280 272 257 237 210 181 
152 150 24  -1  24  163 206 182 133 257 248 233 214 187 158 
173 153 48  24  -1  160 203 167 114 234 225 210 190 165 137 
289 312 168 163 160 -1  43  90  124 250 264 270 264 267 249 
326 354 210 206 203 43  -1  108 157 271 290 299 295 303 287 
329 313 197 182 167 90  108 -1  70  164 183 195 194 210 201 
285 249 153 133 114 124 157 70  -1  141 147 148 140 147 134 
401 324 280 257 234 250 271 164 141 -1  36  67  88  134 150 
388 300 272 248 225 264 290 183 147 36  -1  33  57  104 124 
366 272 257 233 210 270 299 195 148 67  33  -1  26  73  96  
343 247 237 214 190 264 295 194 140 88  57  26  -1  48  71  
305 201 210 187 165 267 303 210 147 134 104 73  48  -1  30  
276 176 181 158 137 249 287 201 134 150 124 96  71  30  -1 
```

Hugeeee 29 个城市，**预计：27603**

图片：[西撒哈拉](http://www.math.uwaterloo.ca/tsp/world/witour.gif)

```
-1   74   4110 3048 2267 974  4190 3302 4758 3044 3095 3986 5093 6407 5904 8436 6963 6694 6576 8009 7399 7267 7425 9639 9230 8320 9300 8103 7799
74   -1   4070 3000 2214 901  4138 3240 4702 2971 3021 3915 5025 6338 5830 8369 6891 6620 6502 7939 7326 7193 7351 9571 9160 8249 9231 8030 7725
4110 4070 -1   1173 1973 3496 892  1816 1417 3674 3778 2997 2877 3905 5057 5442 4991 5151 5316 5596 5728 5811 5857 6675 6466 6061 6523 6165 6164
3048 3000 1173 -1   817  2350 1172 996  1797 2649 2756 2317 2721 3974 4548 5802 4884 4887 4960 5696 5537 5546 5634 7045 6741 6111 6805 6091 5977
2267 2214 1973 817  -1   1533 1924 1189 2498 2209 2312 2325 3089 4401 4558 6342 5175 5072 5075 6094 5755 5712 5828 7573 7222 6471 7289 6374 6187
974  901  3496 2350 1533 -1   3417 2411 3936 2114 2175 3014 4142 5450 4956 7491 5990 5725 5615 7040 6430 6304 6459 8685 8268 7348 8338 7131 6832
4190 4138 892  1172 1924 3417 -1   1233 652  3086 3185 2203 1987 3064 4180 4734 4117 4261 4425 4776 4844 4922 4971 5977 5719 5228 5780 5302 5281
3302 3240 1816 996  1189 2411 1233 -1   1587 1877 1979 1321 1900 3214 3556 5175 4006 3947 3992 4906 4615 4599 4700 6400 6037 5288 6105 5209 5052
4758 4702 1417 1797 2498 3936 652  1587 -1   3286 3374 2178 1576 2491 3884 4088 3601 3818 4029 4180 4356 4469 4497 5331 5084 4645 5143 4761 4787
3044 2971 3674 2649 2209 2114 3086 1877 3286 -1   107  1360 2675 3822 2865 5890 4090 3723 3560 5217 4422 4257 4428 7000 6514 5455 6587 5157 4802
3095 3021 3778 2756 2312 2175 3185 1979 3374 107  -1   1413 2725 3852 2826 5916 4088 3705 3531 5222 4402 4229 4403 7017 6525 5451 6598 5142 4776
3986 3915 2997 2317 2325 3014 2203 1321 2178 1360 1413 -1   1315 2511 2251 4584 2981 2778 2753 4031 3475 3402 3531 5734 5283 4335 5355 4143 3897
5093 5025 2877 2721 3089 4142 1987 1900 1576 2675 2725 1315 -1   1323 2331 3350 2172 2275 2458 3007 2867 2935 2988 4547 4153 3400 4222 3376 3307
6407 6338 3905 3974 4401 5450 3064 3214 2491 3822 3852 2511 1323 -1   2350 2074 1203 1671 2041 1725 1999 2213 2173 3238 2831 2164 2901 2285 2397
5904 5830 5057 4548 4558 4956 4180 3556 3884 2865 2826 2251 2331 2350 -1   3951 1740 1108 772  2880 1702 1450 1650 4779 4197 2931 4270 2470 2010
8436 8369 5442 5802 6342 7491 4734 5175 4088 5890 5916 4584 3350 2074 3951 -1   2222 2898 3325 1276 2652 3019 2838 1244 1089 1643 1130 2252 2774
6963 6891 4991 4884 5175 5990 4117 4006 3601 4090 4088 2981 2172 1203 1740 2222 -1   684  1116 1173 796  1041 974  3064 2505 1368 2578 1208 1201
6694 6620 5151 4887 5072 5725 4261 3947 3818 3723 3705 2778 2275 1671 1108 2898 684  -1   432  1776 706  664  756  3674 3090 1834 3162 1439 1120
6576 6502 5316 4960 5075 5615 4425 3992 4029 3560 3531 2753 2458 2041 772  3325 1116 432  -1   2174 930  699  885  4064 3469 2177 3540 1699 1253
8009 7939 5596 5696 6094 7040 4776 4906 4180 5217 5222 4031 3007 1725 2880 1276 1173 1776 2174 -1   1400 1770 1577 1900 1332 510  1406 1002 1499
7399 7326 5728 5537 5755 6430 4844 4615 4356 4422 4402 3475 2867 1999 1702 2652 796  706  930  1400 -1   371  199  3222 2611 1285 2679 769  440
7267 7193 5811 5546 5712 6304 4922 4599 4469 4257 4229 3402 2935 2213 1450 3019 1041 664  699  1770 371  -1   220  3583 2970 1638 3037 1071 560
7425 7351 5857 5634 5828 6459 4971 4700 4497 4428 4403 3531 2988 2173 1650 2838 974  756  885  1577 199  220  -1   3371 2756 1423 2823 852  375
9639 9571 6675 7045 7573 8685 5977 6400 5331 7000 7017 5734 4547 3238 4779 1244 3064 3674 4064 1900 3222 3583 3371 -1   620  1952 560  2580 3173
9230 9160 6466 6741 7222 8268 5719 6037 5084 6514 6525 5283 4153 2831 4197 1089 2505 3090 3469 1332 2611 2970 2756 620  -1   1334 74   1961 2554
8320 8249 6061 6111 6471 7348 5228 5288 4645 5455 5451 4335 3400 2164 2931 1643 1368 1834 2177 510  1285 1638 1423 1952 1334 -1   1401 648  1231
9300 9231 6523 6805 7289 8338 5780 6105 5143 6587 6598 5355 4222 2901 4270 1130 2578 3162 3540 1406 2679 3037 2823 560  74   1401 -1   2023 2617
8103 8030 6165 6091 6374 7131 5302 5209 4761 5157 5142 4143 3376 2285 2470 2252 1208 1439 1699 1002 769  1071 852  2580 1961 648  2023 -1   594
7799 7725 6164 5977 6187 6832 5281 5052 4787 4802 4776 3897 3307 2397 2010 2774 1201 1120 1253 1499 440  560  375  3173 2554 1231 2617 594  -1 
```

# ruby-on-rails - Ruby on Rails 接受发布请求

> ID：11007359
> 
> 赞同：4
> 
> 时间：2012-06-13T02:12:30.447
> 
> 标签：ruby-on-rails, ruby, post, http-post

我需要创建一个 Rails 应用程序，它将接受来自移动客户端的 Post 请求并存储随请求发送的信息。我将使用 Ajax 发送请求。请求使用以下参数发送： latitude(float) longitude(float) timestamp(Javascript Date object)

我已经使用 rails generate 资源创建了一个具有适当字段的数据模型，但我不确定如何让 Rails 接受 Post 请求并创建一个包含必要信息的对象。我应该如何编辑 Rails 生成的代码来实现这一点？

谢谢，我很抱歉提出这样一个基本的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T02:23:15.060

很难从这个问题中看出你对 Rails 了解多少，但这都是 Rails 的基本功能，所以你需要从头开始……如果你完成了这两个教程，你就可以开始了：

1.  学习[Rails 控制器](http://edgeguides.rubyonrails.org/action_controller_overview.html)
2.  学习[Rails 路由](http://edgeguides.rubyonrails.org/routing.html)

然后试一试，创建一个新控制器和一些与您正在寻找的匹配的路由，然后您可以使用 RESTClient 之类的 mozilla 插件来使用一些虚拟数据测试您的路由。

但说真的，这里的第一步是“学习 Rails”。:)

# ios - Chalkduster 字体所需的最低 iOS 版本

> ID：11007361
> 
> 赞同：1
> 
> 时间：2012-06-13T02:12:38.903
> 
> 标签：ios, fonts

Chalkduster 字体所需的最低 iOS 版本是多少。chalkduster 字体是什么时候在 iOS 中引入的。一直都在吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T02:43:19.700

显然 Chalkduster 从 4.0 开始出现在 iPad 上，从 5.0 开始出现在 iPhone 上。

[请参阅此处](http://www.prepressure.com/fonts/basics/ios-4-fonts)的 4.0字体和[此处](http://support.apple.com/kb/HT4980)的 5.0 字体

# windows-phone-7 - 仅在首次页面加载时播放 SoundEffect

> ID：11007363
> 
> 赞同：0
> 
> 时间：2012-06-13T02:12:54.323
> 
> 标签：windows-phone-7, xna, windows-phone-7.1

WP7.5/Silverlight 应用程序...

在我的页面加载时，我播放了一个声音剪辑（例如，你好！今天是美好的一天。）

```
private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
{
    seLoadInstance = seLoad.CreateInstance(); //I initialize this seLoad in Initialize method
    seLoadInstance.Play();
} 
```

现在我在页面上有 3-4 个其他元素。当用户点击其中任何一个时，会播放该元素的声音剪辑。

```
private void ElementClick_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    seElementInstance = seElement.CreateInstance();
    seElementInstance .Play();
} 
```

**我想要的是：** 当页面首次加载并且正在播放 seLoadInstance 并且用户单击元素时，我不希望播放 seElementInstance。

我可以像下面一样检查 seLoadInstance 的状态，以不播放 seElementInstance

```
private void ElementClick_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
  if(seLoadTextInstance.State != SoundState.Playing)
  {     
        seElementInstance = seElement.CreateInstance();
        seElementInstance .Play(); 
   }
} 
```

但上面的问题是我有另一个元素可以在点击时播放 seLoadInstance。

**问题：**我不知道如何区分 seLoadInstance 是第一次播放还是在元素单击时播放。

**可能的解决方案：**我看到的一种方法是使用不同的实例来播放相同的声音。

我希望有更好的方法，比如我在加载时设置一个标志，但我找不到任何我可以处理的 SoundInstance completed 或 Stopped 明确事件。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:20:58.983

直到现在才使用声音，但我所看到的：

为什么要播放声音时总是创建新实例？是否可以为“se”元素创建一个实例并在调用“play”之前检查是否有人在运行？

例如：

```
private var seLoadInstance;
private var seElementInstance;

private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
{
    seLoadInstance = seLoad.CreateInstance();
    seElementInstance = seElement.CreateInstance();

    seLoadInstance.Play(); // no need to check if something is playing... nothing will be loaded
}

private void ElementClick_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    if(seLoadInstance.State != SoundState.Playing && seElementInstance.State != SoundState.Playing)
    {     
        seElementInstance .Play(); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:16:24.733

我能够找到使用标志的方法。我没有在第一次加载完成时设置标志，而是从我的一个播放 seLoadTextInstance 的元素中设置标志。

如下所示：

```
private bool isElementLoadSoundPlaying = false; //I set this to true below in another handler

private void ElementClick_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
  //This if means LoadTextInstance is playing and it is the first time play
  if(seLoadTextInstance.State != SoundState.Playing && isElementLoadSoundPlaying == false )
  {     
     return;
  }
  seElementInstance = seElement.CreateInstance();
  seElementInstance .Play(); 
}

private void ElementLoadTextClick_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
  isElementLoadSoundPlaying = true;
  seLoadInstance = seLoad.CreateInstance();
  seLoadInstance.Play();
} 
```

# java - java中的File.delete是否执行文件锁定？

> ID：11007365
> 
> 赞同：0
> 
> 时间：2012-06-13T02:12:58.500
> 
> 标签：java, file, synchronization

1.  它会在删除文件之前锁定文件吗？
2.  需要吗？
3.  如果它不执行文件锁定，我怎样才能使它在多个进程之间安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:21:56.747

也许这个[链接](https://stackoverflow.com/questions/4025721/java-file-locking) 会更好地解释。据我了解，删除是一种原子操作，因此不需要锁定文件。然而，进一步看，我发现这个[链接](https://stackoverflow.com/questions/196897/locking-executing-files-windows-does-linux-doesnt-why) 显示了删除操作的操作系统依赖性质。在 Windows 上，文件必须没有锁定才能删除它，而在 Linux 上，您可以在另一个进程正在使用它时删除文件。

# php - 使用 Sharp UMS 进行会话管理

> ID：11007366
> 
> 赞同：0
> 
> 时间：2012-06-13T02:13:09.463
> 
> 标签：php, model-view-controller

我对 MVC 编程风格非常陌生。我有一个管理脚本，我希望能够将用户凭据集成到我的浏览器应用程序中。用户信息，例如用户名、电子邮件、姓名等。该系统的[**文档**](http://demos.denonstudio.net/sharpums/docs/)为生成此信息提供了清晰的说明。我在以下脚本中这样做了，它工作正常，但它总是会返回“AUTH_NO_SESSION”，因为我无法允许用户登录以获取此信息，这是我的问题：

**用户信息 (user_cred.php)**

```
include_once("includes.php"); 
$auth = new TAuthentication();    
$accept_roles = array('plugin');
$auth_result  = $auth->validateSession($accept_roles);

if ($auth_result->auth_code == AUTH_NO_SESSION) {
    header('Access-Control-Allow-Origin: *');
    echo "AUTH_NO_SESSION";
    // means that no session was found, therefore the page is being accessed anonymously.
} elseif ($auth_result->auth_code == AUTH_OKAY) {
    header('Access-Control-Allow-Origin: *');
    echo "AUTH_OKAY";
    // means that there was a session and the user owns all the required roles to access this content.
} elseif ($auth_result->auth_code == AUTH_INSUFFICIENT_ROLES) {
    header('Access-Control-Allow-Origin: *');
    echo "AUTH_INSUFFICIENT_ROLES";
    // means that a session exists, but the user does not own the required roles to access this content.
} else {
    // no code here
} 
```

浏览器应用程序将从`user_cred.php`上面的文件中检索用户数据。就从这个 php 文件请求信息而言，一切正常。我面临的问题实际上是获取用户信息，而唯一的方法是让用户登录他们的帐户。否则什么都不会给。

**浏览器应用**

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function loadXMLDoc()
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","user_cred.php",true);
xmlhttp.send();
}
</script>
</head>
<body>

<h2>Using the XMLHttpRequest object</h2>
<div id="myDiv"></div>
<button type="button" onclick="loadXMLDoc()">Change Content</button>

</body>
</html> 
```

在管理系统中有一个`view`具有以下登录表单的文件。以便用户访问网站。您还拥有包含登录代码的主索引文件。以我有限的知识，我已经看过这个并相信这两个文件将帮助我编写脚本，以便用户可以从浏览器应用程序登录并获取他们的用户凭据。我的想法是将 index.php 文件中的代码添加到 user_cred.php 文件中，以便我可以将这样的 url 添加`http://website.com/user_cred.php?username=admin&pass=test&signin=Login`到 javascript httprequest 并以这种方式获取用户信息

**登录视图**

```
<form action="<?php echo $_SERVER["PHP_SELF"]; ?>" method="post">
    <ul>
        <li class="listitem">
            <div class="row">
                <label>Username:</label>
                <input class="textbox" type="text" name="username" value="" maxlength="80"/>
            </div>
            <div class="row">
                <label>Password:</label>
                <input class="textbox" type="password" name="password" value="" maxlength="80"/>
            </div>
        </li>
        <li class="listitem">
            <div class="row">
                <input class="form-button" type="submit" name="signin" value="Signin"/>
                <a class="loginoptions indentmore" href="signup.php">Signup</a>
                <a class="loginoptions" href="resetpassword.php">Forgot your password?</a>
            </div>
        </li>
    </ul>
</form> 
```

**索引.php**

```
include_once("includes.php");

class TSigninController extends TAbstractController {

    public function run($allowedRoles = null)
    {
        $this->allowedRoles = $allowedRoles;
        $this->execute();
    }

    protected function execute() 
    {
        $this->auth_result = parent::validateSession(null);

        if ($this->auth_result->auth_code == AUTH_OKAY)
        {
            $this->goToAfterSignInPage($this->auth_result->roles);
        }
        else if (!$this->getUserAction())
        {
            $this->loadview("signin");
        }
        else
        {
            $this->signin();        
        }
    }

    protected function signin()
    {
        $input   = $this->getUserInput();
        $model   = $this->loadmodel("Users");
        $account = $model->getUser($input["username"], $input["password"]);

        if ($account == null || sizeof($account) == 0) 
        {
            $data = array("error" => "Could not sign you in");
            $this->loadview("signin", $data);
            return;
        } 

        if ($account["disabled"] == 1 || $account["admin_disabled"] == 1) 
        {
            $data = array("error" => ($account["admin_disabled"] == 0) ? "This account is disabled." : "This account is been locked by the admin. Please contact the site admin!");
            $this->loadview("signin", $data);
            return;
        } 

        $this->createNewSession($account);
        $this->goToAfterSignInPage($account["roles"]);
    }

    protected function createNewSession($account) {
        $model     = $this->loadmodel("Sessions");
        $sessionid = crypt($account["username"] . date('now'));

        $_SESSION['SESSIONID'] = $sessionid;
        $model->createNewSession($sessionid, $account["id"]);
    }

    public function goToAfterSignInPage($roles)
    {
        foreach($roles as $role)
        {
            if ($this->utils->stringsEqual($role["name"], "admin", false))
            {
                $this->redirect(SITE_URL . "/admin/dashboard.php");
                return;
            }
        }

        $this->redirect(SITE_URL . "/user/userprofile.php");
    }

    protected function getUserAction()
    {
        if ($this->post("signin"))
            return "signin";
        else     
            return null;            
    }

    protected function getUserInput()
    {
        return array(
            "username" => $this->post("username"),
            "password" => $this->post("password")
        );
    }
}

$controller = new TSigninController();
$controller->run(); 
```

总之，我正在寻求帮助，以便我制作一个 php 脚本`user_cred.php`，允许用户从我的浏览器应用程序中访问他们的凭据。所以任何具有 MVC 和 PHP 知识的人都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:50:20.153

SharpUMS 提供的MVC 的描述非常可怕。获得 SharpUMS 源代码所需的努力让我觉得它不是一个开源项目.. 哦，好吧。

`$auth_result->auth_code === AUTH_NO_SESSION`可能有两个原因`true`：

*   `$_SESSION['SESSIONID']`是空的
*   在数据库中找不到会话 ID：

    > [**来自：** *sharpums/_application/models/Session.php*]

    ```
    SELECT 
        s.userid, 
        s.id, 
        s.started_on, 
        ( 
            DATE_ADD(
                 s.started_on, 
                 INTERVAL $this->sessionlength SECOND
            ) < NOW()
        ) expired 
    FROM sessions s 
    WHERE s.id = '$sessionid' 
    ```

基本上，机器人的原因可以追溯到*index.php*。我猜，这个方法永远不会执行：

```
protected function createNewSession($account) {
    $model     = $this->loadmodel("Sessions");
    $sessionid = crypt($account["username"] . date('now'));

    $_SESSION['SESSIONID'] = $sessionid;
    $model->createNewSession($sessionid, $account["id"]);
} 
```

您应该尝试找出该`signin()`方法在何时终止。

## 旁注

免费建议：**不要将SharpUMS**作为您在MVC中应用或研究的基础，原因如下：

*   确保单个数据库连接`TDatabase`使用全局状态来保持连接
*   `mysql_*`它与正在弃用的古老 API紧密绑定
*   这`TAbstractModel`并不是真正抽象的，它在构造函数中创建了新的数据库实例
*   设计问题：核心类依赖于模型（在核心之外）
*   `TUtilities`类是一个巨大的垃圾场（参见[2.1 Adopter](http://www.lsd.ic.unicamp.br/~oliva/fun/prog/resign-patterns)模式）
*   密码存储为简单的 MD5 哈希值。听说过 LinkedIn 事件吗？
*   **对 SQL 注入的弱保护**：利用`preg_*`和`addslashes()`功能

# php - XML 解析速度加快。PHP

> ID：11007367
> 
> 赞同：0
> 
> 时间：2012-06-13T02:13:13.850
> 
> 标签：php, xml, performance, algorithm

我在这里询问一些可以使这个过程更快的概念：

```
foreach($xml->results->concepts->concept as $value2){//This is the original game.
    $total_concepts++;
    foreach($xml1->results->concepts->concept as $value1){//This is similar game. 
        $total_similar_concepts++;
        if(strcmp($value2->name, $value1->name)==0){
            $comparisons++;
            break;
        }
    }
} 
```

本质上，我将原始游戏的每个“概念”与每个“相似”游戏的每个“概念”进行比较。

该算法平均需要大约 11.6 秒才能完成。我能做些什么来让这个运行得更快吗？我在想也许将它解析为 xml 并不是我能做的最好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T02:20:35.850

XML 解析不太可能是您的问题的原因。如果它与 XML 有关，它可能是 I/O，这意味着从磁盘获取数据需要很长时间。

您正在做的是将 $xml 中的所有元素与 $xml2 中的所有元素相结合，这是一个 O(n^2) 复杂性问题。您可以尝试通过使用哈希图来降低复杂性，这在 php 中很容易，因为您获得了本质上是哈希图的关联数组：

```
foreach($xml->results->concepts->concept as $value2) {
  $total_concepts++;
  $map[(string)$value2->name] = true;
}
foreach($xml1->results->concepts->concept as $value1) {
  $total_similar_concepts++;
  if (isset($map[(string)$value1->name]))
    $comparisions++;
} 
```

在最好的情况下，这会给你 O(2n) 的复杂性，比以前的版本好得多。

# sqlite - SQLite 不断扩展

> ID：11007368
> 
> 赞同：1
> 
> 时间：2012-06-13T02:13:16.140
> 
> 标签：sqlite, blackberry

我是黑莓开发和这个网站的新手。现在，我正在开发一个从 json 服务中检索数据的应用程序。在我的应用程序中，我应该将数据解析到数据库中并将其保存在四个表中。我已经解析了数据，并且成功地创建了数据库并添加了第一个和第二个表。

我现在面临的问题是，我数据库中的第二个表不断扩大。我在 sql 浏览器中检查了数据库，发现每次单击应用程序图标时，它都会再次将 700 行添加到表中。（例如 700 变为 1400）。

（只到第二张桌子，第一张桌子工作得很好）。

先感谢您

这是我的代码：

```
public void parseJSONResponceInBB(String jsonInStrFormat)
{
    try {
        JSONObject json = newJSONObject(jsonInStrFormat);
        JSONArray jArray = json.getJSONArray("tables");

        for (inti = 0; i < jArray.length(); i++) {
            //Iterate through json array
            JSONObject j = jArray.getJSONObject(i);
            if (j.has("Managers")) {
                add(new LabelField("Managers has been added to the database"));

                JSONArray j2 = j.getJSONArray("Managers");

                for (intk = 0; k < j2.length(); ++k) {
                    JSONObject MangersDetails = j2.getJSONObject(k);
                    if (MangersDetails.has("fName")) {
                        try {
                            URI myURI =
                                URI.create
                                ("file:///SDCard/Databases/SQLite_Guide/"
                                 + "MyTestDatabase.db");

                            d = DatabaseFactory.openOrCreate(myURI);

                            Statement st =
                                d.createStatement
                                ("CREATE TABLE Managers ( "
                                 + "fName TEXT, " +
                                 "lName TEXT, " + "ID TEXT," + "Type TEXT )");

                            st.prepare();
                            st.execute();
                            st.close();
                            d.close();
                        }
                        catch(Exception e) {
                            System.out.println(e.getMessage());
                            e.printStackTrace();
                        }

                        try {
                            URI myURI =
                                URI.create
                                ("file:///SDCard/Databases/SQLite_Guide/"
                                 + "MyTestDatabase.db");

                            d = DatabaseFactory.open(myURI);

                            Statement st =
                                d.createStatement
                                ("INSERT INTO Managers(fName, lName, ID, Type) "
                                 + "VALUES (?,?,?,?)");

                            st.prepare();

                            for (intx = 0; x < j2.length(); x++) {
                                JSONObject F = j2.getJSONObject(x);
                                //add(new LabelField ("f"));
                                st.bind(1, F.getString("fName"));
                                st.bind(2, F.getString("lName"));
                                st.bind(3, F.getString("ID"));
                                st.bind(4, F.getString("Type"));
                                st.execute();
                                st.reset();
                            }
                            d.close();
                        }
                        catch(Exception e) {
                            System.out.println(e.getMessage());
                            e.printStackTrace();
                        }
                    }
                }
            }
        }
    }
    catch(JSONException e) {
        e.printStackTrace();
    }
}

    //Owners method
public voidparseJSONResponceInBB1(String jsonInStrFormat)
{
    try {
        JSONObject json = newJSONObject(jsonInStrFormat);
        JSONArray jArray = json.getJSONArray("tables");

        for (inti = 0; i < jArray.length(); i++) {
            //Iterate through json array
            JSONObject j = jArray.getJSONObject(i);
            if (j.has("Owners")) {
                add(new LabelField("Owners has been added to the database"));
                JSONArray j2 = j.getJSONArray("Owners");
                for (intk = 0; k < j2.length(); ++k) {
                    JSONObject OwnersDetails = j2.getJSONObject(k);
                    if (OwnersDetails.has("fName")) {
                        try {
                            Statement st =
                                d.createStatement
                                ("CREATE TABLE Owners ( "
                                 + "fName TEXT, " +
                                 "lName TEXT, " + "ID TEXT," + "Type TEXT )");
                            st.prepare();
                            st.execute();
                            st.close();
                            d.close();
                        }
                        catch(Exception e) {
                            System.out.println(e.getMessage());
                            e.printStackTrace();
                        }

                        try {
                            Statement st =
                                d.createStatement
                                ("INSERT INTO Owners(fName, lName, ID, Type) "
                                 + "VALUES (?,?,?,?)");

                            st.prepare();
                            for (intx = 0; x < j2.length(); x++) {
                                JSONObject F = j2.getJSONObject(x);
                                //add(new LabelField ("f"));
                                st.bind(1, F.getString("fName"));
                                st.bind(2, F.getString("lName"));
                                st.bind(3, F.getString("ID"));
                                st.bind(4, F.getString("Type"));
                                st.execute();
                                st.reset();
                            }
                            d.close();
                        }
                        catch(Exception e) {
                            System.out.println(e.getMessage());
                            e.printStackTrace();
                        }
                    }
                }
            }
        }
    }
    catch(JSONException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:35:02.263

It depends on what your goals are here. If you want to replace the data in the database each time the json query runs, you should add a sqlite command to remove all the existing rows with the newly fetched ones coming in via JSON.

If you just want to keep certain types of records unique, you should add an index to the sqlite table. The 'ID' column is a likely candidate for this. You'll have to do some experiments to make sure a conflict is handled correctly - it may abort the entire transaction. "INSERT OR REPLACE" is useful in that situation.

# animation - UIView 邮件式主食动画

> ID：11007369
> 
> 赞同：1
> 
> 时间：2012-06-13T02:13:57.670
> 
> 标签：animation, uitableview, in-app-purchase

我想实现一个特殊的动画，我想知道是否有人已经这样做了。每个人都知道，选择多个邮件时，iPad邮件非常酷。

我现在想将该动画带入我的 iPad 应用程序。我有一个带有可用应用内购买的 UITableView，我希望用户能够一次购买多个购买。

用户可以在 tableView 中选择多个产品，我现在希望自定义 UITableViewCell 中的图像与这种非常酷的 iPad 效果“装订在一起”。

我还希望单元格移动到这个堆栈中。这是我的代码（很可能我会遇到来自单元格的照片的性能问题）：

```
- (IBAction)setEditingTableView:(id)sender
{
    if ([itemsTableView isEditing]) {
        for (NSIndexPath *cellPath in [itemsTableView indexPathsForSelectedRows]) {
            UITableViewCell *cell = [itemsTableView cellForRowAtIndexPath:cellPath];
            if ([cell isSelected]) {
                [UIView animateWithDuration:1.0 animations:^{
                    [[cell image] setFrame:[stackView frame]];
                    [[cell image] setCenter:[stackView center]];
                }];
            }
        }
        [itemsTableView setEditing:NO];
        [sender setStyle:UIBarButtonItemStyleBordered];
    }
    else {
        [itemsTableView setEditing:YES];
        [sender setStyle:UIBarButtonItemStyleDone];
    }
} 
```

![在此处输入图像描述](../Images/27d56db447201e6a62d850642dc7cd72.png)

有人可以帮忙吗？

谢谢，致以诚挚的问候，朱利安

# c# - Soap 中的 WebRequest

> ID：11007371
> 
> 赞同：0
> 
> 时间：2012-06-13T02:14:16.893
> 
> 标签：c#, soap

我希望有人能够帮助我，我已经有一段时间没有用 C# 编程了。我相信答案会很简单，但我无法理解它。

我有以下内容，我称之为 System.Web.Services.Protocols.SoapHttpClientProtocol。我只包括了我拥有的众多电话之一。

```
public partial class ExchangeService : System.Web.Services.Protocols.SoapHttpClientProtocol   {

//Lots of code using Soap 

    [System.Web.Services.Protocols.SoapDocumentMethodAttribute("getDetailsLite", RequestNamespace="http://www.MySite.com/ExchangeService/", ResponseNamespace=" http://www.MySite.com/ExchangeService/", ", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
    [return: System.Xml.Serialization.XmlElementAttribute("Result", IsNullable=true)]
    public GetDetailsLiteResp getDetailsLite(getDetailsLiteReq request) {
        object[] results = this.Invoke("getDetailsLite", new object[] {
                    request});
        return ((getDetailsLiteResp)(results[0]));
    }

    public void getDetailsLiteAsync(getDetailsLiteReq request) {
        this. getDetailsLiteAsync(request, null);
    }

    public void getDetailsLiteAsync (getDetailsLiteReq request, object userState) {
        if ((this.getDetailsLiteOperationCompleted == null)) {
            this.getDetailsLiteOperationCompleted = new System.Threading.SendOrPostCallback(this.OngetDetailsLiteOperationCompleted);
        }
        this.InvokeAsync("getDetailsLite", new object[] {
                    request}, this. getDetailsLiteOperationCompleted, userState);
    }
} 
```

我想覆盖 SoapHttpClientProtocol 调用的 WebRequest。SoapHttpClientProtocol 看起来像这样（我相信它是从 System.Web.Services.dll 调用的）

```
namespace System.Web.Services.Protocols  {
    public class SoapHttpClientProtocol : HttpWebClientProtocol    {
    public SoapHttpClientProtocol();
    public SoapProtocolVersion SoapVersion { get; set; }
    protected IAsyncResult BeginInvoke(string methodName, object[] parameters, AsyncCallback callback, object asyncState);
    public void Discover();
    protected object[] EndInvoke(IAsyncResult asyncResult);
    protected virtual XmlReader GetReaderForMessage(SoapClientMessage message, int bufferSize);

    //This line is the one i am talking about
    protected override WebRequest GetWebRequest(Uri uri);

    protected virtual XmlWriter GetWriterForMessage(SoapClientMessage message, int bufferSize);
    protected object[] Invoke(string methodName, object[] parameters);
    protected void InvokeAsync(string methodName, object[] parameters, SendOrPostCallback callback);
    protected void InvokeAsync(string methodName, object[] parameters, SendOrPostCallback callback, object userState);
    }
} 
```

我需要保护覆盖 WebRequest GetWebRequest(Uri uri) 看起来像这样：

```
protected override WebRequest GetWebRequest(Uri uri)  {
    HttpWebRequest webRequest = (HttpWebRequest) base.GetWebRequest(uri);
    webRequest.KeepAlive = false;
    webRequest.ProtocolVersion=HttpVersion.Version10;
    return webRequest;
} 
```

有谁知道我会怎么做？我不能直接在 SoapHttpClientProtocol 内部编辑它，我 99% 肯定我不应该这样做。

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:24:19.723

由于`ExchangeService`是一个[部分类](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)，您可以创建另一个文件，添加到`ExchangeService`GetWebRequest 的声明并声明一个合适的覆盖。这将允许您为 编写自定义功能`ExchangeService`，同时在 WSDL 更改时仍然可以更新它。

有关详细信息，请参阅 MSDN 文章[部分类和方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:28:06.080

子类吗？*GetWebRequest*在根类*WebClientProtocol*中被[标记为虚拟](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.webclientprotocol.getwebrequest.aspx)，因此您可以覆盖该方法。

 *```
public class MyHttpProtocol : SoapHttpClientProtocol  
{
    public override WebRequest GetWebRequest(Uri uri)
    {
        // Base request:
        WebRequest request = base.GetWebRequest(uri);

        // You code goes here...

        // Return...
        return request;
    }
} 
```

然后在您的服务类中根据需要使用*MyHttpProtocol 。**

# php - cPath 没有在 zen cart 中正确构建

> ID：11007374
> 
> 赞同：0
> 
> 时间：2012-06-13T02:14:35.657
> 
> 标签：php, zen-cart

嗨，当我从任何地方查看产品信息页面时，我遇到了构建 cPath 的问题，而不是直接按照类别的路径。我只在 url 中获取 master_category_id 而不是完整路径。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:45:05.777

您是否在 ZenCart 安装中启用了 SEO 模块，例如 MagicSEO？根据我的经验，这些模块确实对构造 URL 中的 cPath 派生和参数产生了无法控制的影响。

尽管有上述情况，但我不清楚当用户单击指向您的产品之一的链接时，您希望 ZenCart 做什么，该链接不是通过向下钻取的类别结构。ZenCart 将别无选择，只能从产品的主类别中派生 cPath，因为它不知道要派生多个潜在类别路径中的哪一个。

# javascript - 如何在 Javascript 中从构造函数中添加和调用函数（使用 JQuery）

> ID：11007375
> 
> 赞同：0
> 
> 时间：2012-06-13T02:14:37.013
> 
> 标签：javascript, constructor

我使用下面的代码创建了一个对象文字。一切正常。

但是，当我尝试通过创建对象构造函数和相应的对象来重写对象字面量，然后使用“点语法”执行该方法时，什么也没有发生。我不清楚我做错了什么。下面的示例使用 JQuery。

谢谢你。

**对象文字（工作）**

```
 <!DOCTYPE=HTML>
<meta chartset="UTF-8">
<title> whatever </title>
<script type="text/javascript"> </script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" charset="utf-8"></script>

<div id="theDiv"></div>
<style>
#theDiv{
position:absolute;
width:200px; 
height:200px; 
background:#f00; 
}
</style>

<script>
$(document).ready(function(){
var myObj  = {};
myObj.doThing =  function () {
$("#theDiv").toggle(3000);
  };

myObj.doThing();

});

</script> 
```

**带对象的构造函数（非工作）**

```
<!DOCTYPE=HTML>
<meta chartset="UTF-8">
<title> whatever </title>
<script type="text/javascript"> </script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" charset="utf-8"></script>

<div id="theDiv"></div>

<style>
#theDiv{
position:absolute; 
width:200px; 
height:200px; 
background:#f00; 
}
</style>

<script>
 $(document).ready(function(){

function ConstructorExample (){
this.move =  function () {
$("#theDiv".toggle(3000);
  };

    };

var objExample = new ConstructorExample();

objExample.move();

});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:18:33.160

您在第二个示例中有语法错误。

改变这个：

```
$("#theDiv".toggle(3000); 
```

对此：

```
$("#theDiv").toggle(3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:38:13.140

这不是要解决您的问题（因为约瑟夫已经回答了），而是一个更好的做法供您参考：

更改自：

```
function ConstructorExample (){
  this.move =  function () {
    $("#theDiv").toggle(3000);
  };
}; 
```

改成：

```
var ConstructorExample = function ConstructorExample () {
  this.node = $("#theDiv");
};
ConstructorExample.prototype.move = function () {
  if (!!this.node) {
    this.node.toggle(3000);
  }
}; 
```

它的行为相同，但是通过使用原型链，它不会在每次启动对象时创建移动函数（速度更快），并且可以原型继承。

# database - 连接到 Silverlight 应用程序的 SQL 数据库

> ID：11007377
> 
> 赞同：0
> 
> 时间：2012-06-12T18:53:03.340
> 
> 标签：database, silverlight, windows-phone-7

您可以将您的应用程序连接到 SQL 数据库吗？Silverlight - 构建 Windows Phone 应用程序 - 似乎只喜欢 XML。

那么，你如何在应用程序中显示数据，如果你无法访问互联网或数据库，你如何回退？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:41:32.953

Windows Phone 7.1 (Mango) 能够支持较小版本的 SQL。[此链接](http://msdn.microsoft.com/en-us/library/hh202860%28v=VS.92%29.aspx)会将您带到 Windows Phone MSDN 文档的本地数据库概述。

阅读概述后，查看左侧窗格并注意用于在手机应用程序中设置和使用本地 SQL 数据的其他资源。

# reporting-services - 在 SSRS 报告中仅显示标记或仅在 SSRS 报告中显示一列的行

> ID：11007378
> 
> 赞同：3
> 
> 时间：2012-06-13T02:14:56.160
> 
> 标签：reporting-services

我需要在 SSRS 的图表中显示三列，但是其中一列应仅显示为标记或线条。我附上了一个我需要做的例子。

![在此处输入图像描述](../Images/ed73e53c0cbef76552d992afb09fc640.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T16:20:47.100

这可以通过将第三个数据列添加为“范围列”来实现，这是通过更改其图表类型来完成的。

首先，我创建了一个新报告，使用以下查询向其中添加了一个条形图，以便为我提供一些数据：

```
select 'blue' as 'group', 80 as value1, 60 as value2, 25 as value3
union all select 'red' as 'group', 50 as value1, 75 as value2, 40 as value3 
```

将“value1”和“value3”作为数据值添加到图表中，并将“组”列作为类别。

**重要的一点：**

接下来添加“value2”作为第三个数据值，然后将其图表类型更改为 Range Column，在[Range of chart types](http://technet.microsoft.com/en-us/library/dd207148.aspx "范围图 SSRS")下找到。

然后更新系列属性，将底部值添加为：

```
=Sum(Fields!value2.Value)-3 
```

**最终解决方案预览：**

![**最终解决方案预览**](../Images/a576a27edd7da622643afcb19ea68736.png "最终 SSRS 解决方案预览")

# c# - c#将对象列表中的对象转换为类型返回左手签名必须是变量错误

> ID：11007379
> 
> 赞同：2
> 
> 时间：2012-06-13T02:14:56.640
> 
> 标签：c#, list, object, types, casting

不知道如何处理标题，但是当我尝试在列表中投射一个对象时，我得到了那个错误。

这就是我尝试的：

```
(type)objectList[i] = typeValue; 
```

我希望这会起作用，但事实并非如此。我可以在重写它方面获得一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:29:33.100

C# 中的`=`符号是赋值运算符。它将等号右侧的值分配给左侧的变量。

你有你的陈述倒退

您可以**分配** 给这样`objectList[i]`的值`typeValue`

```
objectList[i] = typeValue; 
```

如果`objectList`是类型数组`type`并且`typeValue`已经是类型变量，`type`则不需要强制转换。

如果`typeValue`不是类型，`type`那么你可以像这样投射它

```
(type)typeValue 
```

希望能澄清情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:17:02.490

我不完全确定你的意思，但如果`objectList`是一个数组 in `typeof(object)`，则不需要强制转换。如果您尝试强制转换`typeValue`，然后分配它，您将使用：

```
objectList[i] = (type)typeValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T02:51:07.173

当您将对象转换为不同的类型时，返回值是常量。值必须是变量才能接受赋值。

也就是说，正确的 cast 和 assign 方法是这样的：

```
FooInstance = (Foo)BarInstance; // this is a correct cast 
```

上面的代码从强制转换中创建了一个 Foo 类型的常量值，然后将其值分配给 FooInstance，它是一个变量。

```
(Bar)FooInstance = BarInstance; // this will cause a compiler error 
```

如果允许运行此代码，它将尝试将 BarInstance 的值分配给由强制转换创建的 Bar 类型的常量值。由于您不能分配给常量，因此这是一个错误。

```
FooInstance = FooInstance2; // this works - no cast necessary
FooInstance = (Foo)FooInstance2; // this cast is unnecessary, but won't cause an error
(Foo)FooInstance = FooInstance2; // this will cause a compiler error 
```

即使它们是同一类型，(Foo)FooInstance 也是常量，因此它不能接受 FooInstance2 的值。另一方面，FooInstance 是一个变量，因此它可以接受 Foo 类型的任何值。

# iphone - 如何访问日志文件

> ID：11007381
> 
> 赞同：0
> 
> 时间：2012-06-13T02:15:10.150
> 
> 标签：iphone, ipad, crash-reports

我正在 ios 设备上测试我的应用程序“PhotoGallery 2.0”。我已启用堆栈日志，当应用程序崩溃时，我会在控制台上收到如下消息。

我想知道如何访问日志文件`"stack-logs.6963"`，它似乎位于 ios 设备上。

> PhotoGallery 2.0(6963) malloc：使用标准记录器将 malloc 堆栈记录到磁盘 PhotoGallery 2.0(6963) malloc：堆栈日志正在写入 /private/var/mobile/Applications/1463221F-0466-4A8D-AA4F-CA8E3B5C2785/tmp/stack- logs.6963.PhotoGallery 2.0.index PhotoGallery 2.0(6963) malloc：请发出：cp /private/var/mobile/Applications/1463221F-0466-4A8D-AA4F-CA8E3B5C2785/tmp/stack-logs.6963.PhotoGallery 2.0.KceAMU .link /tmp/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T02:19:02.003

将您的设备同步到您的计算机，然后打开 XCode，转到管理器，选择设备，然后选择设备日志。

或者，将您的设备同步到您的计算机，然后查看：~/Library/Logs/CrashReporter/MobileDevice/YourDeviceName/

# haskell - 从 haskeline 中调用网络 IO

> ID：11007383
> 
> 赞同：5
> 
> 时间：2012-06-13T02:15:25.613
> 
> 标签：haskell, http-conduit, haskeline

我有一个现有的程序，它接受命令行参数（用户名、密码、日期），然后使用该`Network.HTTP.Conduit`库将 xml 消息发布到服务器。然后我解析结果，做一些工作并使用 blaze-html 写入文件。

这一切都像魅力一样。但是，我想我会使用`haskeline`这样密码不可见。我可以创建一个命令行程序来获取用户提供的值并将它们打印出来，但是如果我调用使用管道的函数，它永远不会返回。

这是有问题的代码：

```
main = runInputT defaultSettings loop
where 
    loop :: InputT IO ()
    loop = do
        Just username <- getInputLine "WM username: "
        Just password <- getPassword (Just '*') "WM password: "
        Just date     <- getInputLine "Date (YYYYMMDD): "

        outputStrLn "querying WM..."
        clients <- lift $ getWMClients username password
        outputStrLn "successfully retrieved client list from WM..."

        let outHeader = renderHeader date username

        reportString <- mapM  (\x -> createString x clients)  cList

        lift $ writeFile (date ++ "_report.html") (outHeader ++ concat reportString)
        outputStrLn "Done" 
```

函数 getWMClients 函数是：

```
getWMClients :: Username -> String -> IO [Client]
getWMClients username password = do
    let f = [Size "-1", Skip "0"]
    let fs = [Select "id",
              Select "status",
              Select "last-name",
              Select "first-name",
             ]
    let query = WMQuery {transaction=SHARE,service=Query,businessObject=CONT,field=f,fields=fs}

    results <- doQuery username (Just password) Nothing (Just query)
    rows <- xmlResultsToMaps results

    let clients = map makeClient rows
    return clients 
```

当我运行程序时，它会挂在“查询 WM ...”处，我认为 http-conduit 从未真正运行过。关于如何使这项工作的任何提示？

提前致谢， 尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:08:15.953

您声称它在 haskeline 之前使用硬编码的用户名、密码、日期。为了帮助调试，您可能无法将管道提升到 InputT。以下仍然失败吗？（我没有编译这个，所以请随时修复语法错误......）

```
-- Isolate the haskeline monad to just the input part:
main = loop
where 
    loop :: IO ()
    loop = do
      (username,password,date) <- runInputT defaultSettings $ do
        Just username <- getInputLine "WM username: "
        Just password <- getPassword (Just '*') "WM password: "
        Just date     <- getInputLine "Date (YYYYMMDD): "
        return (username,password,date)

      putStrLn "querying WM..."
      clients <- getWMClients username password
      putStrLn "successfully retrieved client list from WM..."

      let outHeader = renderHeader date username

      putString <- mapM  (\x -> createString x clients)  cList

      writeFile (date ++ "_report.html") (outHeader ++ concat reportString)
      putStrLn "Done" 
```

# java - 什么是比较 StringBuilder 对象的有效方法

> ID：11007387
> 
> 赞同：30
> 
> 时间：2012-06-13T02:16:17.750
> 
> 标签：java, stringbuilder

好吧，我有两个 StringBuilder 对象，我需要在 Java 中比较它们。我知道我能做的一种方法是

```
sb1.toString().equals(sb2.toString()); 
```

但这意味着我正在创建两个 String 对象，有没有更好的方法来比较 StringBuilder 对象。可能是您不需要创建其他对象的地方？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-13T02:20:18.943

正如您显然已经知道的那样，`StringBuilder`继承`equals()`自`java.lang.Object`，因此`StringBuilder.equals()`只有在将相同的对象作为参数传递时才返回 true。它不**比较**两个`StringBuilder`s 的内容！

如果查看源代码，您会得出结论，最有效的比较（不涉及创建任何新对象）是比较`.length()`返回值，然后如果它们相同，则比较`charAt(i)`每个的返回值特点。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-10-01T17:07:09.843

由于 Java 11`StringBuilder`实现`Comparable`了 ，因此您可以使用一种`compareTo`方法进行相等性测试：

```
System.out.println(sb1.compareTo(sb2) == 0); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-13T19:58:14.977

两个 StringBuilder 对象永远不会相等。使用 .toString() 获取两个对象的字符串表示，然后使用 .equals() 比较对象。这样，String 类中的 equals() 方法就会被调用，该方法比较对象的字符串值，而不是比较内存位置。

```
StringBuilder a= new StringBuilder("HELLO JAVA");
StringBuilder b= new StringBuilder("HELLO JAVA");
if (a.toString().equals(b.toString())){
System.out.println("Objects are equal");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-23T12:00:45.687

没有新分配的解决方案是首先比较长度，如果不同，然后逐个字符地比较。这比在 StringBuilder 调用上通过 toString() 执行比较更有效和更快，后者将分配一个新字符串。

下一个片段假定两个参数都不为空，也不是同一个对象实例：

```
public boolean compare(final StringBuilder left, final StringBuilder right) {
    final int length = left.length();

    if (length != right.length())
        return false;

    for (int index = 0; index < length; index++) {
        if (left.charAt(index) != right.charAt(index))
            return false;
    }

    return true;
} 
```

# ruby-on-rails - 如何从另一个模型迭代到布局中？

> ID：11007388
> 
> 赞同：0
> 
> 时间：2012-06-13T02:16:21.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在寻找从一个模型中获取集合以显示在所有页面上。

**应用程序.html.erb**

```
 <ul>
    <% @category.each do |c| %>
   <li><%= c.name %></li></ul>
        <% end %>
        </ul> 
```

**控制器**

```
 @categories = Category.all 
```

我如何将它安装在应用程序控制器中而无需在所有控制器上复制和粘贴？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T02:22:39.733

在您`ApplicationController.rb`创建`before_filter`并定义它以调用特定方法。

例如：

```
class ApplicationController < ActionController::Base
  before_filter :load_categories

  protected
  def load_categories
    @categories = Category.all
  end
end 
```

现在，您应该能够`@categories`从所有视图中访问 。

在您看来：

```
<ul>
  <% @categories.each do |c| %>
  <li><%= c.name %></li></ul>
  <% end %>
</ul> 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:22:07.587

只需使用

```
<ul>
<% Category.all.each do |c| %>
 <li><%= c.name %></li></ul>
<% end %>
 </ul> 
```

您不必在控制器中设置实例变量。

# iphone - 使用 sendAsynchronousRequest:queue:completionHandler:? 时跟踪重定向

> ID：11007390
> 
> 赞同：5
> 
> 时间：2012-06-13T02:16:27.713
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

在使用该方法发送请求时发生重定向时如何调用自定义代码：

```
+ (void)sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler 
```

?

我正在寻找复制 NSURLConnectionDelegate 方法的行为：

```
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:30:16.257

我不认为你可以复制这种行为，因为`sendAsynchronousRequest`只调用代码块中给它的完成处理程序。

看来您必须为此目的使用委托方法。我没有看到使用`sendAsynchronousRequest`normal 的任何好处`NSURLConnection`，除了你必须保留 NSMutableData 的 ivar 和可能的 NSURLConnection ，如果每个类的实例有多个。

# algorithm - 面试街头中位数挑战

> ID：11007406
> 
> 赞同：7
> 
> 时间：2012-06-13T02:18:21.020
> 
> 标签：algorithm, median

**问题** M 个数字的中位数定义为 1）如果 M 是中间奇数，按顺序排序后 2）如果 M 是中间 2 个数字的平均数（再次排序后）你首先有一个空数字列表. 然后您可以从列表中添加或删除一些数字。对于每个添加或删除操作，输出列表中数字的中位数。

示例：对于一组 m = 5 个数字，{ 9, 2, 8, 4, 1 } 中位数是有序集合 { 1, 2, 4, 8, 9 } 中的第三个数字，即 4。 m = 4, { 5, 2, 10, 4 }，中位数是有序集合 { 2, 4, 5, 10 } 中第二个和第三个元素的平均值，即 (4+5)/2 = 4.5

**我的方法** 我认为可以通过这种方式解决问题。想法是使用以前的中值和指针来找到新的中值，而不是在每次添加或删除操作时重新计算。

1) 使用始终保持元素有序并允许重复的多重集。换句话说，以某种方式维护排序列表。

2）如果操作是添加

```
2.1) Insert this element into set and then calculate the median

2.2) if the size of set is 1 then first element will be the median

2.3) if the size of set is even, then

           if new element is larger then prev median, new median will be avg of prev median

               and the next element in set.

           else new median will be avg of prev median and previous of prev element in the set.

2.4) if the size is odd, then

          if new element is larger then prev median

                 if also less then 2nd element of prev median ( 2nd element used to calculate avg

                    of prev median) then this new element to be added will be new median

                 else median will be 2nd element use to calculate the avg during last iteration prev

                    median.

          else

                 new median will be previous of prev median element in the set 
```

3) 如果操作是删除

```
3.1) First calculate the new median

3.2) If the size of set is 0 can't remove

3.3) If the size is 1 if the first element is the element to be removed, remove it else can't remove.

3.4) If the size of set is even, then

           if the element to be deleted is greater than or equal to 2nd element of prev median, then

               1st element of prev median will be new median

          else 2nd element of prev median will be the new median

3.5) If the size of set is odd, then

           if the element to be deleted is the prev median then find the avg of its prev and  next element.

           else if the element to be deleted is greater then prev median, new median will be avg of prev median and previous to prev median

           else median will be avg of prev median and next element to prev median.

3.6) Remove the element. 
```

这是工作代码... [http://justprogrammng.blogspot.com/2012/06/interviewstreet-median-challenge.html](http://justprogrammng.blogspot.com/2012/06/interviewstreet-median-challenge.html)。您对这种方法有何看法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:51:09.670

您的方法似乎可行，但是从描述和代码中，您可以看出涉及很多案例工作。我不想成为那个必须调试的人！因此，让我为您提供一个替代解决方案，该解决方案应该涉及更少的案例，因此更容易正确处理。

保留两个多重集（这个算法也适用于两个优先级队列，因为我们只看每个的极端）。第一个，`minset`，将保留最小的 n/2 个数字，第二个，`maxset`，将存储最后的 n/2 个数字。

每当您添加数字时：

*   如果大于`max(minset)`，将其添加到`maxset`
*   否则，将其添加到`minset`

请注意，这并不能保证 n/2 条件。因此，我们应该添加一个额外的“修复”步骤：

*   如果`maxset.size() > minset.size()`，则从 中删除最小元素`maxset`并将其插入`minset`。
*   如果`minset.size() > minset.size() + 1`，从 中删除最大的元素`minset`并将其插入到`maxset`.

完成后，我们只需要得到中位数。对于我们的数据结构，这应该很容易做到：取决于当前 n 是偶数还是奇数，它要么是 要么和 之间的`max(minset)`平均值。`max(minset)``min(maxset)`

对于移除操作，只需尝试将其从任何一组中移除，然后再进行修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:50:13.250

我认为您可以尝试验证两种情况：

```
1) negative number
4
a -1
a 0
a 0
r 0

2) two big integer whose sum will exceed max int 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T23:05:46.423

您的代码的主要问题是将每个新项目与运行中位数进行比较，这可能是计算出的平均值。相反，您应该将新项目与前一个中间的值（`*prev`在您的代码中）进行比较。实际上，在收到 1 和 5 的序列后，您的中值将是 3。如果下一个值是 2 或 4，它应该成为新的中值，但是由于您的代码对其中的每一个都遵循不同的路径，因此其中一个结果是错误的。

总体而言，只跟踪中间位置而不是运行中位数会更简单。相反，在每个添加/删除操作结束时计算中位数：

```
if size == 0
    median = NaN
else if size is odd
    median = *prev
else
    median = (*prev + *(prev-1)) / 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:32:41.993

这是使用 collections.sort(list) 在 java 中的中位数挑战的解决方案

```
import java.util.*;
public class SolutionMedian{
    ArrayList<Integer> sortedList = new ArrayList<Integer>();

    public static void main(String args[]){

        SolutionMedian m = new SolutionMedian();

        Scanner in = new Scanner(System.in);
        int n = in.nextInt();

        char[] op = new char[n];
        int[] val = new int[n];
        for(int i=0; i<n; i++){
            op[i] = in.next().charAt(0);
            val[i] = in.nextInt();
        }

        for(int i=0; i<n; i++)
            if(op[i] == 'a') 
                m.add(val[i]);
            else 
                m.remove(val[i]);
    }

void add(int val){
        sortedList.add(val);
        getMedian();
    }

    void remove(int val){
        int index = sortedList.indexOf(val);
        if(index>=0){
            sortedList.remove(index);
            getMedian();
        }else{ 
            System.out.println("Wrong!");
        }
    }

    void getMedian(){
        Collections.sort(sortedList);
        int size = sortedList.size();
        switch(size){
            case 0: 
                System.out.println("Wrong!");
                break;
            case 1: 
                System.out.println(sortedList.get(0));
                break;
            default: 
                if(size%2 == 0) {//even size
                    int halfIndex = size/2;
                    long sum = sortedList.get(halfIndex)
                              + sortedList.get(halfIndex-1);
                    if(1==(sum&1)) 
                        System.out.println((sum/2)+".5");
                    else 
                        System.out.println(sum/2);
                }else{//odd size
                    System.out.println(sortedList.get((size-1)/2));
                }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T07:44:47.497

此代码解决了 interviewStreet 上的中位数挑战。

```
# this code solves the median challenge on interviewStreet.
# logic is simple. insert the numbers into a sorted sequence in place.
# use bisection to find the insert index(O(logn)). keep a count of no. of elements in
# the list and print the median using it(O(1)).
!/bin/python
from bisect import bisect_left
List = [] 
nnode = 0 

def printMed():
if nnode>0:
    if nnode%2 == 0 :
    if (0.5*(List[nnode/2]+List[(nnode/2)-1])).is_integer():
        print int(0.5*(List[nnode/2]+List[(nnode/2)-1]))
    else:
        print 0.5*(List[nnode/2]+List[(nnode/2)-1])
    else:
    print List[nnode/2]
else:
    print "Wrong!"

def rem(val):
global nnode
try:
        List.remove(val)
except:
    print "Wrong!"
else:
    nnode = nnode-1
    printMed()

if __name__ == "__main__":
    n = int(raw_input())
for i in range(0,n):
    l = raw_input().split()
    if(l[0] == 'r'):
        rem(int(l[1]))
    else:
    index = bisect_left(List , int(l[1])) ;
    List.insert(index ,int(l[1]))
    nnode = nnode+1 
    printMed() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T04:30:02.680

如果您的列表已排序，则可以使用类似于以下伪代码的方法以恒定时间计算中位数

```
if list.length % 2 == 0 
   median = (list[list.length/2 - 1] + list[list.length/2]) / 2 
else
   median = list[list.length/2] 
```

因此，只需在每次插入/删除时维护一个排序列表。您可以`O(n)`通过单步执行列表来及时执行这些操作，直到您处于 < 被添加元素的元素和 >= 被添加元素的元素之间。如果您从列表的中间开始，您实际上可以及时执行这些插入/删除，`O(log n)`然后确定您的元素是小于还是大于中间元素。拿那一半的清单，从中间开始，然后重复。

您的问题并未说明对此的性能要求是什么，但据我所知，整个事情并不总是在恒定时间内发生。此实现具有以下性能

```
Insert    O(log n)
Remove    O(log n)
Median    O(1) 
```

# java - 如何将文本文件读入数组？

> ID：11007420
> 
> 赞同：1
> 
> 时间：2012-06-13T02:21:25.240
> 
> 标签：java, arrays, string

我想知道如何将文本文件读入数组，文本文件将包含以下内容：

```
string:string:string
string:string:string
string:string:string
etc 
```

（字符串：字符串：字符串在一行上）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T02:26:33.403

**更新：**

我认为您可能想将文件读入数组，但您不知道设置数组的大小。您可以使用 a `java.util.ArrayList`，然后将其转换为数组。

```
FileReader fin = new FileReader(fileName);
Scanner src = new Scanner(fin);
ArrayList<String> lines = new ArrayList<String>();
src.useDelimiter(":");

while (src.hasNext()) {
    lines.add(src.nextLine());
    // replace above line with array
}
String[] lineArray = new String[lines.size()];
lines.toArray(lineArray); 
```

您可以使用`java.util.Scanner`该类，然后使用该`useDelimiter`功能。

```
FileReader fin = new FileReader(fileName);
Scanner src = new Scanner(fin);

src.useDelimiter(":");

while (src.hasNext()) {
    System.out.println(src.next());
    // replace above line with array
} 
```

[这里的](http://www.java2s.com/Tutorial/Java/0180__File/SettingDelimitersforScanner.htm)例子

# html - 图像地图功能被某些东西所扼杀

> ID：11007421
> 
> 赞同：1
> 
> 时间：2012-06-13T02:21:31.683
> 
> 标签：html, imagemap

我正在为一个朋友设计一个网站，几乎完成了，但由于某种原因，我的图像地图参考被某些东西所扼杀。我从高处和低处看了看，删除了对 jQuery、CSS、JS 脚本的引用，我不知道为什么它不起作用。它位于[http://www.toddwhittle.com/jp](http://www.toddwhittle.com/jp)。如果您单击“客户”并使用右侧滚动条向下看到“促销/商业/政治”，图像将弹出客户列表上方。我有几个 YouTube 链接应该在新窗口中弹出。但没有喜悦。有人可以帮忙吗？

在此先感谢， TW

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:15:07.940

当图像映射不起作用时，几乎没有例外，因为映射绑定的图像不是顶层。

这是您的布局：

```
<dl class="folio">
    <dt></dt>
    <dd class="dt">
        <div id="img1" style="opacity:0;"> ... </div>
        <div id="img2" style="opacity:0;"> ... </div>
        ...
        <div id="img8" class="active"> ... </div>            
        <div id="img9" style="opacity:0;"> ... </div>
    </dd>
</dl> 
```

图像映射处于“活动”状态。所有这些都`position: absolute`来自 css，并且一层层叠加。

设置`opacity: 0`不会让浏览器忽略某些东西——它只是让它变得透明。因此，图像贴图位于其下方`img9`，稍后渲染。

简单的解决方案就是使用`display: none`而不是`opacity: 0`隐藏非活动层。或者，您可以在活动层上设置`z-index: 10`（或比您可能使用的任何其他更高的东西）以确保它位于顶部。

# eclipse - 使用 Eclipse 开发、测试和调试 Hadoop map/reduce 作业

> ID：11007423
> 
> 赞同：3
> 
> 时间：2012-06-13T02:21:53.943
> 
> 标签：eclipse, debugging, maven, hadoop, mapreduce

在 Eclipse 中开发 Java Map Reduce 作业有哪些选择？我的最终目标是在我的 amazon Hadoop 集群上运行我开发的 map/reduce 逻辑，但我想先在本地机器上测试逻辑并在其中放置断点，然后再将其部署到更大的集群。

我看到有一个适用于 Eclipse 的 Hadoop 插件，它看起来很旧（如果我错了，请纠正我），一家名为 Karmasphere 的公司为 ecplise 和 Hadoop 提供了一些东西，但我不确定它是否仍然可用。

您如何使用 Eclipse 开发、测试和调试您的 map/reduce 作业？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T02:57:01.473

我通过以下方式在 Eclipse 中开发 Cassandra/Hadoop 应用程序：

1.  使用 maven (m2e) 为我的 Eclipse 项目收集和配置依赖项（Hadoop、Cassandra、Pig 等）

2.  创建测试用例（src/test/java 中的类）来测试我的映射器和化简器。诀窍是使用扩展 RecordWriter 和 StatusReporter 的内部类动态构建上下文对象。如果你这样做，那么在你调用 setup/map/cleanup 或 setup/reduce/cleanup 之后，你可以断言正确的键/值对和上下文信息是由 mapper 或 reducer 编写的。mapred 和 mapreduce 中的上下文构造函数看起来很难看，但您会发现这些类很容易实例化。

3.  一旦您编写了这些测试，maven 将在您每次构建时自动调用它们。

4.  您可以通过选择项目并执行 Run --> Maven Test 来手动调用测试。事实证明这非常方便，因为测试是在调试模式下调用的，您可以在映射器和化简器中设置断点，并执行 Eclipse 允许您在调试中执行的所有很酷的事情。

5.  一旦您对代码的质量感到满意，就可以使用 Maven 在一个 jar 中构建一个带有依赖关系的 jar，这一切都在 hadoop 非常喜欢的一个 jar 中。

顺便说一句，我已经基于 Eclipse 中的 M2T JET 项目构建了许多代码生成工具。它们为我上面提到的所有内容生成了基础设施，我只是为我的映射器、reducer 和测试用例编写逻辑。我想如果你考虑一下，你可能会想出一组可重用的类，你可以扩展它们来做几乎相同的事情。

这是一个示例测试用例类：

```
/*
 * 
 * This source code and information are provided "AS-IS" without 
 * warranty of any kind, either expressed or implied, including
 * but not limited to the implied warranties of merchantability
 * and/or fitness for a particular purpose.
 * 
 * This source code was generated using an evaluation copy 
 * of the Cassandra/Hadoop Accelerator and may not be used for
 * production purposes.
 *
 */
package com.creditco.countwords.ReadDocs;

// Begin imports 

import java.io.IOException;
import java.util.ArrayList;

import junit.framework.TestCase;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Counter;
import org.apache.hadoop.mapreduce.Counters;
import org.apache.hadoop.mapreduce.InputSplit;
import org.apache.hadoop.mapreduce.JobContext;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.OutputCommitter;
import org.apache.hadoop.mapreduce.RecordReader;
import org.apache.hadoop.mapreduce.RecordWriter;
import org.apache.hadoop.mapreduce.StatusReporter;
import org.apache.hadoop.mapreduce.TaskAttemptContext;
import org.apache.hadoop.mapreduce.TaskAttemptID;
import org.junit.Test;

// End imports 

public class ParseDocsMapperTest extends TestCase {

    @Test
    public void testCount() {

        TestRecordWriter    recordWriter    = new TestRecordWriter();
        TestRecordReader    recordReader    = new TestRecordReader();
        TestOutputCommitter outputCommitter = new TestOutputCommitter();
        TestStatusReporter  statusReporter  = new TestStatusReporter();
        TestInputSplit      inputSplit      = new TestInputSplit();

        try {

                // Begin test logic

                // Get an instance of the mapper to be tested and a context instance
            ParseDocsMapper mapper = new ParseDocsMapper();

            Mapper<LongWritable,Text,Text,IntWritable>.Context context = 
                mapper.testContext(new Configuration(), new TaskAttemptID(),recordReader,recordWriter,outputCommitter,statusReporter,inputSplit);

                // Invoke the setup, map and cleanup methods
            mapper.setup(context);

            LongWritable key = new LongWritable(30);
            Text value = new Text("abc def ghi");

            mapper.map(key, value, context);

            if (recordWriter.getKeys().length != 3) {
                fail("com.creditco.countwords:ParseDocsMapperTest.testCount() - Wrong number of records written ");
            }
            mapper.cleanup(context);

                // Validation:
                //
                // recordWriter.getKeys() returns the keys written to the context by the mapper
                // recordWriter.getValues() returns the values written to the context by the mapper
                // statusReporter returns the most recent status and any counters set by the mapper
                //

                // End test logic

        } catch (Exception e) {
            fail("com.creditco.countwords:ParseDocsMapperTest.testCount() - Exception thrown: "+e.getMessage());
        }

    }

    final class TestRecordWriter extends RecordWriter<Text, IntWritable> {
        ArrayList<Text> keys = new ArrayList<Text>();
        ArrayList<IntWritable> values = new ArrayList<IntWritable>();
        public void close(TaskAttemptContext arg0) throws IOException, InterruptedException { }
        public void write(Text key, IntWritable value) throws IOException, InterruptedException {
            keys.add(key);
            values.add(value);
        }
        public Text[] getKeys() {
            Text result[] = new Text[keys.size()];
            keys.toArray(result);
            return result;
        }
        public IntWritable[] getValues() {
            IntWritable[] result = new IntWritable[values.size()];
            values.toArray(result);
            return result;
        }
    };  

    final class TestRecordReader extends RecordReader<LongWritable, Text> {
        public void close() throws IOException { }
        public LongWritable getCurrentKey() throws IOException, InterruptedException {
            throw new RuntimeException("Tried to call RecordReader:getCurrentKey()");
        }
        public Text getCurrentValue() throws IOException, InterruptedException {
            throw new RuntimeException("Tried to call RecordReader:getCurrentValue()");
        }
        public float getProgress() throws IOException, InterruptedException {
            throw new RuntimeException("Tried to call RecordReader:getProgress()");
        }
        public void initialize(InputSplit arg0, TaskAttemptContext arg1) throws IOException, InterruptedException { }
        public boolean nextKeyValue() throws IOException, InterruptedException {
            return false;
        }
    };

    final class TestStatusReporter extends StatusReporter {
        private Counters counters = new Counters();
        private String status = null;
        public void setStatus(String arg0) {
            status = arg0;
        }
        public String getStatus() {
            return status;
        }
        public void progress() { }
        public Counter getCounter(String arg0, String arg1) {
            return counters.getGroup(arg0).findCounter(arg1);
        }
        public Counter getCounter(Enum<?> arg0) {
            return null;
        }
    };

    final class TestInputSplit extends InputSplit {
        public String[] getLocations() throws IOException, InterruptedException {
            return null;
        }
        public long getLength() throws IOException, InterruptedException {
            return 0;
        }
    };

    final class TestOutputCommitter extends OutputCommitter {
        public void setupTask(TaskAttemptContext arg0) throws IOException { }
        public void setupJob(JobContext arg0) throws IOException { }
        public boolean needsTaskCommit(TaskAttemptContext arg0) throws IOException {
            return false;
        }
        public void commitTask(TaskAttemptContext arg0) throws IOException { }
        public void cleanupJob(JobContext arg0) throws IOException { }
        public void abortTask(TaskAttemptContext arg0) throws IOException { }
    };

} 
```

这是一个示例 maven pom。请注意，引用的版本有点过时，但只要这些版本保存在某个 maven 存储库中，您就可以构建这个项目。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.creditco</groupId>
  <artifactId>wordcount.example</artifactId>
  <version>0.0.1-SNAPSHOT</version>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
            </plugin>
        </plugins>
    </build>
  <dependencies>
    <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>0.20.2</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.cassandra</groupId>
        <artifactId>cassandra-all</artifactId>
        <version>1.0.6</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.cassandraunit</groupId>
        <artifactId>cassandra-unit</artifactId>
        <version>1.0.1.1</version>
        <type>jar</type>
        <scope>compile</scope>
        <exclusions>
            <exclusion>
                <artifactId>hamcrest-all</artifactId>
                <groupId>org.hamcrest</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.apache.pig</groupId>
        <artifactId>pig</artifactId>
        <version>0.9.1</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20090211</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T06:35:39.993

我使用 Apache 自带的 MiniMRCluster 集群。您可以在单元测试中启动一个迷你 Map Reduce 集群！HBase 还具有 HBaseTestingUtil，这非常棒，因为您可以在大约两行中启动 HDFS 和 MapReduce。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-29T01:18:49.937

@Chris Gerken - 我试图通过将驱动程序作为 Java 应用程序运行来在 Eclipse 中运行字数统计作业，但我在 Mapper 上得到 ClassNotFoundException。在我看来，作为 java 应用程序运行，hadoop 作业没有使用 jar 获得所需的 Mapper 和 Reduce。

# jquery - ajax 调用不处理压缩的 JSON

> ID：11007436
> 
> 赞同：2
> 
> 时间：2012-06-13T02:23:50.660
> 
> 标签：jquery, jersey

我正在使用 jquery ajax() 调用服务。该服务正在返回一个压缩数据。但是，ajax函数报告一个错误，它无法加载资源，有什么帮助吗？

我的ajax调用代码是：

```
function crossJsonCall(url, callback) {
    $.ajax({
        type: "GET",
        crossDomain: true,
        url: url,
        dataType: 'jsonp',
        cache: false,
        success: callback
    });
} 
```

我使用压缩数据

```
com.sun.jersey.api.container.filter.GZIPContentEncodingFilter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T05:28:46.710

标题怎么样？

```
$.ajax({
  ...
  headers: { "Accept-Encoding" : "gzip" },
  ...
}); 
```

而且，您需要让您的 httpserver 发送适当的标头。“内容编码：gzip”

# c# - 在 C# 中使用 Date.Time.Now 计算持续时间

> ID：11007439
> 
> 赞同：8
> 
> 时间：2012-06-13T02:24:29.193
> 
> 标签：c#, time

我需要计算系统运行的持续时间。我的c#系统。我已经设置：

```
DateTime startRunningProg = Date.Time.Now("o"); 
```

经过几个过程。

我设置 ：

```
DateTime endRunningProg = Date.Time.Now("o"); 
```

如何计算我的系统以毫秒或秒为单位运行的持续时间。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-13T02:25:57.000

要准确测量经过的时间，请使用[StopWatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类：

```
Stopwatch stopWatch = new Stopwatch();
stopWatch.Start();
Thread.Sleep(10000);
stopWatch.Stop();
// Get the elapsed time as a TimeSpan value.
TimeSpan ts = stopWatch.Elapsed;

// Format and display the TimeSpan value.
string elapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",
    ts.Hours, ts.Minutes, ts.Seconds,
    ts.Milliseconds / 10);
Console.WriteLine("RunTime " + elapsedTime); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T02:26:34.740

```
 (endRunningProg  - startRunningProg).TotalMilliseconds ; 
```

但是@avs 是对的——使用 Stopwatch 类。请参阅此问题[Stopwatch vs. using System.DateTime.Now 进行计时事件](https://stackoverflow.com/questions/2923283/stopwatch-vs-using-system-datetime-now-for-timing-events)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-29T00:04:59.697

使用秒表：

```
Stopwatch timer = Stopwatch.StartNew();
Thread.Sleep(1234);
timer.Stop();
TimeSpan timeSpan = timer.Elapsed;
Console.WriteLine("Total processing time... {0:00}:{1:00}:{2:00}.{3}", timeSpan.Hours, timeSpan.Minutes, timeSpan.Seconds, timeSpan.Milliseconds);
// OUTPUT   Total processing time... 00:00:01.243 
```

使用日期时间：

```
DateTime start = DateTime.Now;
Thread.Sleep(1234);
DateTime end = DateTime.Now;
TimeSpan diff = (end  - start);
Console.WriteLine("Total processing time... {0:00}:{1:00}:{2:00}.{3}", diff.Hours, diff.Minutes, diff.Seconds, diff.Milliseconds);
// OUTPUT   Total processing time... 00:00:01.234 
```

在线示例：[https ://dotnetfiddle.net/Aqvc5G](https://dotnetfiddle.net/Aqvc5G)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T02:37:45.810

就像已经提到的那样，如果您尝试进行精确计时，那么您应该使用 StopWatch 类。

如果您真的想进行日期数学并找出两个日期之间的差异，我建议您查看[Noda Time](http://nodatime.org)

# android - 自定义列表视图的搜索框

> ID：11007441
> 
> 赞同：0
> 
> 时间：2012-06-13T02:24:54.620
> 
> 标签：android, listview, search

我构建了一个自定义列表视图，其中充满了来自 SQLite 的数据。现在我希望我的列表视图有一个这样的搜索框：[https](https://lh5.googleusercontent.com/-0H2RUBsLIYQ/Th1lqLCn5iI/AAAAAAAAALg/QZe8a5-PYu0/custom_listview_search2.png) ://lh5.googleusercontent.com/-0H2RUBsLIYQ/Th1lqLCn5iI/AAAAAAAAALg/QZe8a5-PYu0/custom_listview_search2.png >

这是我的活动：

```
package de.bodprod.rettinfo;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class AntidotList extends Activity{
    ArrayList<HashMap<String, String>> antidotList;

    String[] sqliteIds;

    public static String TAG_ID = "id";
    public static String TAG_TOX = "tox";
    public static String TAG_ANTIDOT = "antidot";

    ListView lv;
    int textlength=0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.antidotlist_layout);

        antidotList = new ArrayList<HashMap<String, String>>();
        lv = (ListView) findViewById(R.id.antidotlistlayout);

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            }
        });        
        new loadStoreAntidots().execute();
    }

    class loadStoreAntidots extends AsyncTask<String, String, String> {
        @Override
        protected String doInBackground(String... args) {
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    List<AntidotsClass> antidots = db.getAllAntidots();
                    sqliteIds = new String[antidots.size()];

                    for (int i = 0; i < antidots.size(); i++) {

                        AntidotsClass s = antidots.get(i);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_ID, s.getId().toString());
                        map.put(TAG_TOX, s.getTox());
                        map.put(TAG_ANTIDOT, s.getAntidot());

                        // adding HashList to ArrayList
                        antidotList.add(map);

                        // add sqlite id to array
                        // used when deleting a website from sqlite
                        sqliteIds[i] = s.getId().toString();
                    }
                    ListAdapter adapter = new SimpleAdapter(
                        AntidotList.this,
                        antidotList, R.layout.antidotlistitem_layout,
                        new String[] { TAG_ID, TAG_TOX, TAG_ANTIDOT },
                        new int[] { R.id.sqlite_id, R.id.tox_layout, R.id.antidot_layout }
                    );
                    lv.setAdapter(adapter);
                }
            });
            return null;
        }
    }
} 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    style="@style/mainView" 
    android:orientation="vertical" >
    <EditText android:id="@+id/EditText01"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:hint="Suchen">                               
    </EditText>    
    <ListView
        android:id="@+id/antidotlistlayout"
        style="@style/mainView" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>           
</LinearLayout> 
```

我不知道如何构建搜索功能。

希望你能帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:01:00.737

> 通过以下链接

[链接1](http://android-helper.blogspot.in/2011/03/android-search-in-listview-example.html)

[链接2](http://androidcocktail.blogspot.in/2012/04/search-custom-listview-in-android.html)

# android - 如何从自定义组件完成 Activity？

> ID：11007442
> 
> 赞同：0
> 
> 时间：2012-06-13T02:25:11.000
> 
> 标签：android, custom-component

我想从我的自定义组件中完成 Activity。问题是如何从我的自定义组件中获取 Activity 的引用？我能得到的只是`Context`自定义组件。我试图转换`Context`为`Activity`（代码如下），看起来还可以。但我不确定这一点。也许有更好的方法。所以，请告诉我这段代码是否足够好或有任何问题或风险。

```
public class MyCustomComponent extends RelativeLayout {
private Activity activity;
public MyCustomComponent(Context context, AttributeSet attrs) {
    super(context);     
    Button btn = new Button(context);
    btn.setText("finish");
    addView(btn);

    activity = (Activity)context; // here I want to get the Acitivity reference
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            MyCustomComponent.this.activity.finish();
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:44:24.537

将活动传递给您的组件怎么样？

```
public MyCustomComponent(Context context, Activity activity, AttributeSet attars) 
```

编辑您可以将 setActivity 方法添加到您的类

```
public class MyCustomComponent extends RelativeLayout {
private Activity activity;

public void setActivity(Activity myActivity){
    activity = myActivity;
}

public MyCustomComponent(Context context, AttributeSet attrs) {
    super(context, attrs);
    Button btn = new Button(context);
    btn.setText("finish");
    addView(btn);
    btn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            activity.finish();
        }
    });
} 
```

}

在您的主要活动中，添加

```
 finishAction = (MyCustomComponent) findViewById(R.id.component);
    finishAction.setActivity(this); 
```

# c# - 从独立存储中读取 XML 文件的特定值

> ID：11007450
> 
> 赞同：0
> 
> 时间：2012-06-13T02:26:31.873
> 
> 标签：c#, wpf, xml, windows-phone-7, windows-phone-7.1

嗨，我使用此代码保存 xml 文件

```
using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream("test.xml", FileMode.Create, myIsolatedStorage))
            {
                XmlWriterSettings settings = new XmlWriterSettings();
                settings.Indent = true;
                using (XmlWriter writer = XmlWriter.Create(isoStream, settings))
                {

                    writer.WriteStartElement("t", "test", "urn:test");
                    writer.WriteStartElement("TestA", "");
                    writer.WriteString(lbTestA.Text);
                    writer.WriteEndElement();
                    writer.WriteStartElement("TestB", "");
                    writer.WriteString(lbTestB.Text);
                    writer.WriteEndElement();

                    writer.WriteEndDocument();

                    writer.Flush();
                }
            }
        } 
```

它创建了正确的 xml 文件，使用 WP7 的独立存储资源管理器检查，现在我只想读取存储在和标签中的值，我可以使用的唯一代码就是这个

```
private void loadgame_Click(object sender, EventArgs e)
        {
            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                IsolatedStorageFileStream isoFileStream = myIsolatedStorage.OpenFile("test.xml", FileMode.Open);
                using (StreamReader reader = new StreamReader(isoFileStream))
                {
                    lsScore.DataContext = reader.ReadToEnd();
                }
            }
        } 
```

但它只是读取整个 xml 文件，因为它只是一个文本，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:39:22.987

reader.ReadToEnd() 将整个文件读取为字符串。如果你想要它作为 XML，你必须构造一个 XDocument，例如：

```
var doc = XDocument.Parse(reader.ReadToEnd()); 
```

然后使用 LINQ 从 XML 文档中获取所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:49:11.280

读取 xml 文件的代码。我在值之间使用了分隔符，后来使用 .Split 来分隔值

```
private void loadtest_Click(object sender, EventArgs e)
        {

     IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication();
                if (storage.FileExists("test.xml"))
                {

          IsolatedStorageFileStream fileStream = storage.OpenFile("test.xml", FileMode.Open, FileAccess.ReadWrite);

                XDocument test = XDocument.Load(fileStream);
                 string score = test.Root.Value.ToString();

               string[] scores = score.Split(',');
               foreach (string s in scores)
               {
                  lbTestAScore.Text= scores[0].ToString();
                  lbTestBScore.Text = scores[1].ToString();
               } 
```

XML 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<test>
  <TeamA>300</TeamA>
  <Seperator>,</Seperator>
  <TeamB>-200</TeamB>
</test> 
```

字符串的输出`score = test.Root.Value.ToString();`

是 300,-200

我认为这总结了一切。

# mapping - 查询机器学习中的核方法和核函数

> ID：11007454
> 
> 赞同：0
> 
> 时间：2012-06-13T02:26:41.873
> 
> 标签：mapping, machine-learning, svm

我对机器学习领域非常陌生，基本上是在自学，我正在阅读一些与支持向量机相关的论文，因为我打算用它来解决我的文本分类问题。然而，由于我一直停留在内核和内核方法的概念并将数据映射到更高维度，因此我无法在任何论文中取得很大进展。

我知道这要求很多，因为我已经看过关于内核方法和内核的整本教科书，但是有人可以尝试从一个非常基本的级别开始发布关于内核和内核方法的解释，因为到目前为止我所看到的所有解释都假设对该领域有一定的先验知识。

另外，如果有人可以为我澄清这些概念或指出我从基本层面解释这些事情的基本资源，我对内核函数以及如何使用它来将“数据映射到更高维空间”有点不清楚，我会很感激。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:27:17.997

很难将复杂的数学提炼成简单的水平，但我相信这个例子对我有所帮助。

抱歉，Stack Overflow 似乎不像[Computional Science](http://scicomp.stackexchange.com)那样支持数学标记，所以你必须忍受一些基于文本的糟糕方程式。向量**x** = [ *x [1]* , *x [2]* ]，所以*x [1]*是向量**x**的第一个分量。

为简单起见，假设每个训练示例只有两个属性，因此您的数据是二维的。您开发了一个映射函数来将这两个属性映射到三个属性的更高维度。您的映射功能如下：

Φ( **x** ) = [ *x [1] ²* , *x [2] ²* , *x [1]* * *x [2]* ]

在 SVM 拉格朗日公式中：

![拉格朗日 SVM 公式](../Images/da9dc8d2894beb58979cd4ef3eeaaf2f.png)

每个训练示例都显示为与另一个训练示例的内积（上图在第一个等式中显示了这一点）。如果您想使用您的映射功能，您可以为每个训练示例插入它。

如果你这样做，当然你将不得不为每个训练样本显式计算 Φ( **x** )，然后在你的高维空间中计算两个向量的内积。如果我们对两个向量**x**和**y**这样做，我们将有：

Φ( **x** ) * Φ( **y** ) = [ *x [1] ²* , *x [2] ²* , *x [1]* * *x [2]* ] * [ *y [1] ²* , *y [2] ²* , *y [1]* * *y [2]* ] = *x [1] ²* * *y [1] ²* + *x [2] ²* * *y [2] ²* + *x [1]* * *x [2]* * *y [1]* **是[2]*

想象一下，您使用了多项式内核*K* ( **x** , **y** ) = ( **x** * **y** ) ^(*d*)的次数为 2，您将拥有：

*K* ( **x** , **y** ) = ( *x [1]* * *y [1]* + *x [2]* * *y [2]* ) ² = *x [1] ²* * *y [1] ²* + *x [2] ²* * *y [2] ²* + *x [1]* * *x [2]* * *y [1]* * *y [2]*

核函数允许您在计算内积之前避免计算高维空间，但仍会导致该高维空间中两个向量的内积。在这种情况下，我们使示例保持简单，因此我们可以明确地完成它，但[默瑟定理](http://en.wikipedia.org/wiki/Mercer%27s_theorem)表明，我们可以证明这对于其他函数是正确的，而无需知道显式映射，只要该函数服从[默瑟的条件](http://www.svms.org/mercer/)。您可以看到内核参数*d*如何显着影响映射，*d = 3*将导致完全不同的映射，因此更改内核参数正在修改高维空间。

由于从不明确使用高维映射，而只是作为选择最佳 alpha 的一种方式，我们不需要知道它是什么，我们可以利用它而无需计算它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:42:25.423

由于您的应用程序是文本分类，因此您无需为非线性内核操心。文本已经“存在”在高维（和稀疏）空间中，无需进入更高维空间。

您可以安全地尝试仅线性内核。

阅读 SVMLight 的作者 Joachims 关于文本分类的经典论文和论文，以更深入地了解这一点。

# vhdl - for 循环只执行 1 次

> ID：11007455
> 
> 赞同：0
> 
> 时间：2012-06-13T02:26:45.210
> 
> 标签：vhdl

我有一个关于在 if 语句中使用 for 循环的问题。if 语句在流程语句中。问题是当我执行这部分代码时，for循环被执行但只执行一次，而不管B的值如何。我什至尝试输入显式值并忽略B，但循环只执行一次。我错过了什么吗？

该代码是 ALU 行为模型的一部分，用于在不使用 sll 的情况下应用逻辑左移。

```
 elsif ALU_Control = "100" then
            -- implement shift logic left by B units 
            if (B > X"00000000") then
                -- Use value of B input as the shift position
                shift_value := TO_INTEGER(UNSIGNED(B)); 
                -- concatenate a 0 to end of A          
                for index in 0 to shift_value loop
                    temp_A := (A(30 downto 0) & '0');
                end loop;

                ALU_out <= temp_A(31 downto 0) after 100 ps;
            else
                ALU_out <= A after 100 ps; 
            end if; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T04:32:24.960

在此处查看您的代码的这一部分：

```
for index in 0 to shift_value loop
  temp_A := (A(30 downto 0) & '0');
end loop; 
```

循环的每次迭代都会做同样的事情，所以无论循环运行多少次，你都会得到相同的结果。也许你真的想拥有这样的东西：

```
temp_A := A;
for index in 0 to shift_value loop
  temp_A := temp_A(30 downto 0) & '0';
end loop; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:57:16.087

没有循环：

```
temp_A := (others => '0');
temp_A(A'high downto shift_value) := A(A'high-shift_value downto A'low); 
```

# java - 为什么要将新的 ArrayList 分配给 List 变量？

> ID：11007459
> 
> 赞同：7
> 
> 时间：2012-06-13T02:27:11.563
> 
> 标签：java

我是 java 新手，当我在网上浏览许多示例的代码时，我看到人们在几乎所有情况下都`ArrayList`简单地为 an 声明变量。`List`

```
List<String> myList = new ArrayList<String>(); 
```

我不明白这样做是否有一些特定的优势。为什么它不能是一个`ArrayList`本身，像这样：

```
ArrayList<String> myList = new ArrayList<String>(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T02:29:26.110

它被称为[接口编程](https://stackoverflow.com/a/384067/758280)。它允许您将其替换`ArrayList`为 a `LinkedList`if 在某处您认为 a`LinkedList`更合适。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T02:29:50.027

因为如果您决定稍后更改它，它会更容易：

```
List<String> myList = new ArrayList<String>();
List<String> myList = new LinkedList<String>(); 
```

在方法签名中更重要的是，当更改您返回的内容时，可能会迫使每个人使用您的函数来更改他们的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T02:30:36.007

这不是强制转换，而是您将接口用作变量的声明类型。这样做的原因是您可以切换您正在使用的 List 的实现。如果列表的用户只依赖于 List 接口，如果你使用其他列表类型，例如 LinkedList，他们不会受到影响。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T03:14:48.983

List 是一个接口，因此它可以存储对从 List 接口扩展的所有类的引用。如果您使用以下语句，那么在一些编程步骤之后，您还可以存储其他对象（从 List 扩展）引用。

```
 List<String> myList = new ArrayList<String>(); 
 ...
 myList =new LinkedList<String>(); 
```

随之而来的主要优点是代码维护。例如，如果有人来并想使用 LinkedList 而不是 ArrayList，您只需要在整个代码中更改一行而不是无数次。它使您的代码更加灵活。

java中多态性的整个概念依赖于java使用接口/基类引用来引用子类对象的能力。

此外，针对接口而非实际实现进行编程始终被视为最佳实践。这将允许开发人员在需要时轻松地将一种实现替换为其他/更好的实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T02:42:16.003

Java 是强类型的面向对象语言。.... 让我们看一个例子：假设您正在编写一个排序函数`sort(ArrayList<> list)`。如果以这种方式声明的函数，java 将不允许您使用该函数对该函数进行排序，而不是`ArrayList`. 更好的方法是定义一个*抽象* （就像你的问题一样）`List`。在该抽象中，您声明了方法。所有*实现*都必须实现定义（即 ArrayList）。现在您的`sort`函数可以声明为`sort(List<> list)`，您可以使用它对任何实现的东西进行排序`List`（并遵循`List`方法的约定）。
通过这种方式，您可以*重用您为所有**实现*编写的代码*只要他们遵守*抽象*的契约。在 Java 中，您使用*接口*作为抽象和*类*作为实现来实现这一点。还有其他优点，但是如果您想更好地理解它们，您已经阅读了一些有关面向对象编程的书。*

 ** * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T12:33:52.817

1）`List`是一个接口，实现类是`ArrayList`
2） `List`接口扩展`Collection`。*

# c++ - Node.JS/C++/Python - 编辑 Excel .xlsx 文件

> ID：11007460
> 
> 赞同：0
> 
> 时间：2012-06-13T02:27:18.083
> 
> 标签：c++, python, excel, node.js, read-write

我正在寻找一种从 Node.JS 编辑和保存 Excel 2010 .xlsx 文件中的指定单元格的方法。我意识到，目前可能没有适用于 NodeJS 的生产就绪解决方案。**但是，NodeJS 支持 C++ 库**，所以你能建议我任何与 Node 兼容的合适的库吗？

另外，我有一个想法通过 Python（xlrd，xlwt）处理这个任务并用 NodeJS 调用它。你觉得这怎么样？有没有更有效的方法可以从 NodeJS 编辑 XLSX？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T04:22:23.240

基本上你有两种可能性：

1.  node.js 不支持 C++ 库，但可以为 node.js 编写与 C/C++ 库交互的绑定。因此，您需要开始为`V8`（node.js 背后的 JavaScript 引擎）编写 C++ 插件
2.  找到一个命令行程序来做你想做的事。（它不需要是 Python。）您可以使用子进程从 JavaScript 代码中调用它。

第一个选项是更多的工作，但会导致更快的执行时间（如果做得好）。第二种可能性更容易实现。

PS：一题多题。我不知道 xls-whatever 的东西，除了它“实际上”只有 XML。

# ajax - 数据转换不起作用

> ID：11007462
> 
> 赞同：0
> 
> 时间：2012-06-13T02:27:59.720
> 
> 标签：ajax, listview, jquery-mobile

我在 ajax 中有一个列表视图。我想向此链接添加数据转换。我试图添加

```
data-transition="slide" 
```

在代码中。但没有任何改变。但我尝试在 html 中正常使用此代码，数据转换有效，但不适用于那里有 ajax 的页面。当我尝试时也是如此

```
$.mobile.defaultPageTransition = "flip"; 
```

没有 ajax 的页面效果很好，但不适用于有 ajax 的页面。我的 ajax 的例子是

```
<script type="text/javascript">

            $('#MregisteredClasses').on('pageinit', function(){
                var rowInput = "1";
                var pageInput = "1";

                $.ajax({
                 url: '${pageContext.request.contextPath}/getRegisteredClassesData.html',
                 data: ( {rows : rowInput , page : pageInput}),
                 type: 'POST',

                success: function(json_results){
                    $('#list').append('<ul data-role="listview" data-inset="true" data-split-icon="gear" data-transition="slide"</ul>');
                    listItems = $('#list').find('ul');
                    $.each(json_results.rows, function(key) {
                      html = "<li <h3><a href='${pageContext.request.contextPath}/MRegisteredClassesDetail.phone?courseId=" 
                             + [json_results.rows[key].courseId] + "&regNo=" + [json_results.rows[key].regNo] +
                             "' data-transition='slide' rel='external'>" + json_results.rows[key].courseName+ "</a></h3>"
                             + "<a href='${pageContext.request.contextPath}/MRateCourse.phone?courseId=" 
                             + [json_results.rows[key].courseId] + "&regNo=" + [json_results.rows[key].regNo] + 
                             "' data-transition='slide' rel='external'>RATE THIS COURSE</a>" ;
                    listItems.append(html); 
                    });

                $('#list ul').listview(); 
                },
            });
            });
        </script> 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:29:01.847

我知道为什么它不出来，我们不能一起使用 data-transition 和 data-ajax/rel=external 因为 data-ajax/rel=external 再次加载整个页面，所以转换是不可能的..

# jquery - Lightbox2 - 多张图片，一键点击

> ID：11007464
> 
> 赞同：0
> 
> 时间：2012-06-13T02:28:07.907
> 
> 标签：jquery, lightbox2

我目前正在使用 Lightbox 2 (http://lokeshdhakar.com/projects/lightbox2/)，一切正常，但我需要稍作调整。

单击缩略图时，我想垂直显示所有图像。因此，如果我有 3 张图像都使用相同的 rel="lightbox[whatever]" 我希望它们都输出。我不想要带有 next 和 prev 按钮的“Image 1 of 5”。

我到处搜索，找不到解决方案。如果有人有任何想法、片段或外部 URL，将不胜感激。

代码示例：

```
<a href="resources/images/ClassicCarriers/ClassicCarriers1.jpg" rel="lightbox[classicCarriers]" title="">
    <img src="Resources/Images/classicCarriers_grey.jpg" class="recentWork" title="Classic Carriers" alt="Classic Carriers"/>
</a>
<a href="resources/images/ClassicCarriers/ClassicCarriers2.jpg" rel="lightbox[classicCarriers]" title=""></a>
<a href="resources/images/ClassicCarriers/ClassicCarriers3.jpg" rel="lightbox[classicCarriers]" title=""></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:34:06.017

试试[花哨的盒子](http://fancybox.net/)。不要将效果直接附加到图像，而是将其附加到包含三个图像的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:00:39.197

您也可以使用[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)来实现您想要的。检查以下代码

**HTML**

```
<div id="container">
    <img src="http://placekitten.com/100/100" width="100px">
    <img src="http://placekitten.com/100/100" width="100px">
    <img src="http://placekitten.com/100/100" width="100px">
</div> 
```

**jQuery**

```
$(function(){
    $('#container img').click(function(e){
      e.preventDefault();
      $.colorbox({
        href: '#container',
        inline: true
     });    

  });
}); 
```

现在，当您单击任何图像时，所有 3 个图像都将显示在颜色框中。

[工作小提琴](http://jsfiddle.net/joycse06/E5Eft/2/)
</p>

```
​ 
```

# ruby-on-rails - Rails 3 多态关联；多态到多态关联有意义吗？

> ID：11007465
> 
> 赞同：0
> 
> 时间：2012-06-13T02:28:28.987
> 
> 标签：ruby-on-rails, ruby, activerecord

在我的应用程序中，我有用户、学校（组）和课程。我正在尝试建立一个模型，这三个模型中的任何一个都可以向任何其他模型发送请求，并为请求接收者提供接受或拒绝请求的选项。我的想法是建立一个多态到多态的关联，所以 rails 会识别 request_sender 和接收者的 id 和类型。我的第一个问题是，设置一个 poly to poly 表来实现这个功能是否有意义，还是我应该尝试一些不同的东西？如果 poly to poly 表有意义，我包括我当前的控制器和 db 表：

我为请求设置的数据库表是：

```
class CreateRequests < ActiveRecord::Migration
  def change
    create_table :requests do |t|

      t.belongs_to :request_sender, polymorphic: true
      t.belongs_to :requestable , polymorphic: true

      t.timestamps
    end

    add_index :requests, [:request_sender_id, :request_sender_type]
    add_index :requests, [:requestable_id, :requestable_type]
  end
end 
```

这是我的请求控制器，我遇到的问题是定义方法来确定请求发送者和接收者的类：

```
def new
  @request = @requestable.requests.new
end

def create
  @request = @requestable.requests.new(params[:request])
  if @request.save
    redirect_to @requestable, notice: "requested."
  else
    render :new
  end
end

private
def load_requestable
  klass = [School, User, Course].detect { |c| params["#{c.name.underscore}_id"] }
  @requestable = klass.find(params["#{klass.name.underscore}_id"])
end 
```

非常感谢任何帮助或指导，因为我对编程和 Rails 都很陌生，而且对我在做什么一无所知哈哈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:54:48.137

当然，没有理由为什么这行不通。

创建消息时您需要发送创建者和接收者的 class_name 和 ID。因此，假设您的表单发送：

*   接收者类
*   接收者 ID
*   发件人类别
*   发件人ID

然后，在您的 MessagesController

```
def create
  message = Message.new.tap do |m|
    m.sender   = params[:sender_class].classify.constantize.find(params[:sender_id])
    m.receiver = params[:receiver_class].classify.constantize.find(params[:receiver_id])
    m.message  = params[:message]
  end
  if message.save
    redirect_to root_path, notice: "Awesome!"
  else
    render :new
  end
end 
```

# mysql - 数据库更新时 Ajax 自动更新

> ID：11007467
> 
> 赞同：3
> 
> 时间：2012-06-13T02:28:50.690
> 
> 标签：mysql, ajax

当 mySQL 数据库更新时，我需要我的文本自动更新。有人可以帮忙吗？我看了很多，没有帖子说我需要什么，我是 ajax 新手，对它了解不多。我只知道 HTML、CSS、PHP 和 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:57:03.253

首先，您可能想检查[jQuery](http://jquery.com/)。如果您了解 javascript，这将非常简单，它将使您的开发变得更加容易。

然后你需要检查一个[ajax调用](http://api.jquery.com/jQuery.ajax/)是如何用jQuery实现的。同样，真的很简单，这里有一个例子。

**测试.php**

```
$var1 = $_POST['key'];
$var2 = $_POST['key1'];

//Some code here

echo 'Test finished'; // This is returned to the ajax call 
```

**JAVASCRIPT**

```
$.ajax({
         url:   '/test.php', 
        type:   'POST', /*Method, POST or GET depending on your needs*/
       async:  true, /*This makes the ajax call asyncronously or not*/
        data: {'key':value,'key2':value2},/*data to send*/
     success: function(result){  /*Return from PHP side*/

            /* result contains the data replied from the PHP script. */
            alert(result);

        }
}); 
```

如果您想替换 H​​TML 的某些部分，您可能需要检查诸如[append](http://api.jquery.com/append/)、[after](http://api.jquery.com/after/)、[before](http://api.jquery.com/before/)、[prepend](http://api.jquery.com/prepend/)和[html](http://api.jquery.com/html/)等函数。还要学习一些关于[JSON](http://es.wikipedia.org/wiki/JSON)的知识，它是一种数据格式。真的很简单却很壮观

希望这对你有帮助！它看起来像家庭作业，但你很快就会完成它，你会看到的。

# ruby-on-rails - Linkedin Ruby Gem（令牌在回调中被拒绝）

> ID：11007475
> 
> 赞同：1
> 
> 时间：2012-06-13T02:30:11.047
> 
> 标签：ruby-on-rails, ruby, oauth, linkedin

我一直在使用[LinkedIn Ruby Gem](https://github.com/pengwynn/linkedin)并且遇到了问题。这是我的 rails 服务器的输出。

```
Started GET "/session/callback?oauth_token=618b3bc2-d8f6-4c9c-99a2-10573c8b3c3c&oauth_verifier=09858" for 127.0.0.1 at Tue Jun 12 19:14:11 -0700 2012
Processing by SessionController#callback as HTML
  Parameters: {"oauth_verifier"=>"09858", "oauth_token"=>"618b3bc2-d8f6-4c9c-99a2-10573c8b3c3c"}
Completed 500 Internal Server Error in 163ms

OAuth::Problem (token_rejected):
  app/controllers/session_controller.rb:28:in `callback'

  Rendered /Library/Ruby/Gems/1.8/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Library/Ruby/Gems/1.8/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Library/Ruby/Gems/1.8/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (12.9ms) 
```

这是我的 session_controller.rb 中的代码：

```
require 'linkedin'

class SessionController < ApplicationController

  def login

    # get your api keys at https://www.linkedin.com/secure/developer
    client = LinkedIn::Client.new(APP_CONFIG['linkedin']['apikey'], APP_CONFIG['linkedin']['secret_key'])
    request_token = client.request_token(:oauth_callback => 
                                      "http://#{request.host_with_port}/session/callback")
    session[:rtoken] = request_token.token
    session[:rsecret] = request_token.secret

    redirect_to client.request_token.authorize_url

  end

  def logout
    session[:atoken] = nil
    redirect_to :root
  end

  def callback

    client = LinkedIn::Client.new(APP_CONFIG['linkedin']['apikey'], APP_CONFIG['linkedin']['secret_key']) # "your_api_key", "your_secret")
    if session[:atoken].nil?
      pin = params[:oauth_verifier]
      atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
      session[:atoken] = atoken
      session[:asecret] = asecret
    else
      client.authorize_from_access(session[:atoken], session[:asecret])
    end

    redirect_to '/users/index'

  end

end 
```

我也有随机访问问题，这是错误：

```
Access Denied
You don't have permission to access "/D/16382/14334/000/origin.wwwapps.ups.com/uas/oauth/authorize?oauth_token=730c3a62-08ad-4ac2-9281-c9e67bb3a2d5" on this server.

Reference #18.6fd054b8.1339554485.72cbb3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:06:01.683

请注意这是否是这个问题的最终答案，但在开发过程中帮助我的一件事是清除我的缓存和 cookie。通常会出现此错误，因为之前会话中设置的 cookie 会混淆系统并触发此错误。

# database - 数据建模本地化问题

> ID：11007478
> 
> 赞同：0
> 
> 时间：2012-06-13T02:30:19.417
> 
> 标签：database, localization, data-modeling

假设我有一个具有属性的产品 - id、名称、UPC、价格您可以将其视为数据库表“产品”。

现在我在解决这个问题时遇到了问题。假设同样的产品可以在英国销售，所以名称、UPC、价格可能会有所不同。

为美国做一个产品表，为英国做一个产品表是有意义的，但听起来多余。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:44:26.403

您可以制作一个价格表，其中键是产品 ID 和位置。您也可以在其中添加其他维度。例如，也许有些价格对一年中的时间很敏感？

# html - 如何在 DotNetNuke 中编辑元标记

> ID：11007481
> 
> 赞同：5
> 
> 时间：2012-06-13T02:30:50.080
> 
> 标签：html, dotnetnuke, meta-tags, w3c-validation

如何在 DotNetNuke CMS 中编辑标签？

它会生成大量元标记，并且每个元标记都有一个 ID 元素，这不在 w3c 建议中。我看过 SEO 优化文章，它说除了关键字和名称之外没有任何其他元标记 - 这是真的吗？

查看源代码时的元标记：

```
<meta id="MetaKeywords" name="KEYWORDS" content="naruto, fan, forums, DotNetNuke,DNN" />
<meta id="MetaCopyright" name="COPYRIGHT" content="Copyright naruto"/>
<meta id="MetaGenerator" name="GENERATOR" content="DotNetNuke " />
<meta id="MetaAuthor" name="AUTHOR" content="naruto" />
<meta name="RESOURCE-TYPE" content="DOCUMENT" />
<meta name="DISTRIBUTION" content="GLOBAL" />
<meta name="REVISIT-AFTER" content="1 DAYS" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:36:40.087

不幸的是，没有一种直接/受支持的方法可以删除`meta`DNN 中的大部分标签。您需要在一定程度上更改核心代码和/或假设某些 ID 将保持不变。例如，您可以通过在皮肤中添加如下[代码](https://gist.github.com/2783797)来删除/替换机器人元标记：

```
private void Page_PreRender(object sender, EventArgs e) {
    var metaRobots = Page.FindControl("MetaRobots") as HtmlMeta;
    if (metaRobots != null) {
        metaRobots.Visible = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:14:36.933

您可以使用任何文本编辑器从 Default.aspx 中删除它们，但这可能会很麻烦，因为您可能会在下次更新时重写它，所以我建议您将这个简单的 C# 片段附加到皮肤 .ascx 文件的底部

```
<script runat="server">
protected override void OnLoad(EventArgs e)
{
    var metatagsToKeep = new[] { "Content-Type", "Content-Script-Type", "Content-Style-Type", "Refresh", "DESCRIPTION", "KEYWORDS", "COPYRIGHT", "GENERATOR", "AUTHOR", "RESOURCE-TYPE", "DISTRIBUTION", "ROBOTS", "REVISIT-AFTER", "RATING", "PAGE-ENTER" };

    var metaTags = (from headerControl in this.Page.Header.Controls.OfType<HtmlControl>() let cont = headerControl where !metatagsToKeep.Contains(cont.Attributes["name"]) && !metatagsToKeep.Contains(cont.Attributes["http-equiv"]) select headerControl).Cast<Control>().ToList();

    foreach (var metaTag in metaTags)
    {
        this.Page.Header.Controls.Remove(metaTag);
    } 
}
</script> 
```

在 controlsToKeep 数组中，只需删除您想要删除的那些，您就完成了。如果 DNN 添加了一些您想要的新内容（这不太可能），您必须将它们添加到列表中。或者您可以反转逻辑并为 metatagsToDelete 创建数组，您的调用:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:55:58.417

在 DotNetNuke 中，关键字和描述标签来自两个地方。1.) 在“站点详细信息”部分的“管理”->“站点设置”中，您将看到用于填充所有页面的相应元标记的关键字和描述条目。我们建议您将这两个字段都留空，因为您不希望多个页面出现冗余条目。2.) 页面设置：对于每个页面，您可以通过页面设置指定关键字和描述。主要搜索引擎会忽略关键字，因此我们建议也将其留空。然而，描述通常会显示在搜索结果页面上，因此非常重要。

至于生成的其他元标记，我还没有听说它们有多大影响。我建议只是让他们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T14:42:48.730

我不知道具体适用于问题的第一部分的答案，`dotnetnuke CMS`但是我确实有一些评论可以帮助您解决有关`SEO`.

一般来说，元标记不会在搜索引擎优化中伤害您。谷歌在其排名算法中不使用关键字标签，如果您的关键字在页面中没有显着的密度，其他识别它的搜索引擎可能会损害您的排名。

## 搜索引擎优化

`SEO`通常被认为是排名良好实践的集合。相反，每个搜索引擎都有自己独特的算法。要真正拥有良好`SEO`，您需要专注于您希望改进结果并相应优化的特定领域。

## 元标签

元标记是您网页的元数据，不一定是整个网站。其中包含的信息应有助于应用程序和服务处理该页面上的信息。这个标签是一个一般属性，不一定被任何东西识别。对于什么是有效的元标记，什么不是有效的元标记，没有中央权威，因为它是一个通用目的元素。

任何无法识别元标记的应用程序或服务都应该简单地忽略元标记。

*来自 W3C 的建议：*

> 笔记。META 元素是用于指定元数据的通用机制。但是，一些 HTML 元素和属性已经处理了某些元数据，作者可能会使用而不是 META 来指定这些元数据：TITLE 元素、ADDRESS 元素、INS 和 DEL 元素、title 属性和 cite 属性

就元元素的正确语法而言，有一个规范。W3C 为元标记定义了、`name`、`scheme`和`content`属性。`http-equiv`和属性`lang`也`dir`被定义为由父属性继承的元元素的属性，但可以在元素级别被覆盖。

`id`没有为 meta 元素指定属性，应该会导致验证失败。

# sql - 连接同一张表上的 2 条记录

> ID：11007482
> 
> 赞同：0
> 
> 时间：2012-06-13T02:30:50.590
> 
> 标签：sql, sql-server-2000

在这个表中，当一个条目被输入2条记录到同一个表中时，它们可以与字段aref相关联，因为它们是相同的。

在 2 条记录之一中，bda 始终为空白字段，但其他记录中始终包含 bda。我需要把这个 bda 和剩下的数据一起拿出来

有人可以帮我对这个查询进行排序吗，这是我到目前为止所拥有的

```
SELECT ada,bda,sum(adur) / 60 as atime ,count(adur) as calls  
FROM cr_cdr 
WHERE script_res = 'sam0000' 
    AND adetdate BETWEEN CAST('2012-06-11 00:00:00 AM' AS datetime) 
    AND CAST('2012-06-11 11:59:59 PM' AS datetime) 
GROUP BY ada,bda 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:46:31.670

您可以尝试将表连接到自身。像这样的东西：

```
SELECT c1.ada,c2.bda / 60 as atime ,count(c1.adur) as calls  
FROM 
cr_cdr c1
INNER JOIN
cr_cdr c2
ON( c1.aref = c2.aref )
WHERE 
c2.bda IS NOT NULL 
    AND c1.script_res = 'sam0000' 
    AND c1.adetdate BETWEEN CAST('2012-06-11 00:00:00 AM' AS datetime) 
    AND CAST('2012-06-11 11:59:59 PM' AS datetime) 
GROUP BY aref 
```

# c++ - 如何删除文件夹中的所有文件，但不使用 NIX 标准库删除文件夹？

> ID：11007494
> 
> 赞同：24
> 
> 时间：2012-06-13T02:32:33.760
> 
> 标签：c++, c, linux, unix

我正在尝试创建一个删除 /tmp 文件夹内容的程序，我在 linux 上使用 C/C++。

```
system("exec rm -r /tmp") 
```

删除文件夹中的所有内容，但它也删除了我不想要的文件夹。

有没有办法通过某种名为 via 的 bash 脚本来做到这一点`system()`？或者有没有直接的方法我可以在 C/C++ 中做到这一点？

我的问题与此类似，但我不在 OS X 上...[如何删除文件夹中的所有文件，而不是文件夹本身？](https://stackoverflow.com/questions/3066067/how-to-delete-all-files-in-a-folder-but-not-the-folder-itself)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-13T02:47:45.390

```
#include <stdio.h>
#include <dirent.h>

int main()
{
    // These are data types defined in the "dirent" header
    DIR *theFolder = opendir("path/of/folder");
    struct dirent *next_file;
    char filepath[256];

    while ( (next_file = readdir(theFolder)) != NULL )
    {
        // build the path for each file in the folder
        sprintf(filepath, "%s/%s", "path/of/folder", next_file->d_name);
        remove(filepath);
    }
    closedir(theFolder);
    return 0;
} 
```

您不想通过`system()`或类似的方式生成一个新的 shell - 做一些非常简单的事情会产生很多开销，并且它会对系统上可用的内容做出不必要的假设（和依赖关系）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-13T02:36:12.883

在 C/C++ 中，你可以这样做：

```
system("exec rm -r /tmp/*") 
```

在 Bash 中，你可以这样做：

```
rm -r /tmp/* 
```

这将删除 /tmp 中的所有内容，但不会删除 /tmp 本身。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T02:35:48.610

通过使用通配符`*`，您可以删除所有具有任何类型扩展名的文件。

`system("exec rm -r /tmp/*")`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T02:36:57.850

你可以做

```
system("exec find /tmp -mindepth 1 -exec rm {} ';'"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-02T21:31:29.213

在 C/C++ 中，您可以使用（包括隐藏目录）：

```
system("rm -r /tmp/* /tmp/.*");
system("find /tmp -mindepth 1 -delete"); 
```

但是如果 'rm' 或 'find' 实用程序对 sh 不可用怎么办？最好使用 'ftw' 和 'remove'：

```
#define _XOPEN_SOURCE 500
#include <ftw.h>

static int remove_cb(const char *fpath, const struct stat *sb, int typeFlag, struct FTW *ftwbuf)
{
    if (ftwbuf->level)
        remove(fpath);
    return 0;
}

int main(void)
{
    nftw("./dir", remove_cb,  10, FTW_DEPTH);
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-05T18:30:26.767

我意识到这是一个非常古老的问题，但是在 Demitri 的出色答案的基础上，我创建了一个函数，如果需要，它将递归删除子文件夹中的文件

它还进行**一些**错误处理，因为它传回 errno。函数头是为 doxygen 解析而编写的。此功能在我使用的简单示例案例中起作用，并删除隐藏文件夹和隐藏文件。

我希望这对将来的其他人有所帮助

```
#include <stdio.h>
#include <dirent.h>
#include <sys/stat.h>
#define SUCCESS_STAT 0

/**
 * checks if a specific directory exists
 * @param dir_path the path to check
 * @return if the path exists
 */
bool dirExists(std::string dir_path)
{
    struct stat sb;

    if (stat(dir_path.c_str(), &sb) == 0 && S_ISDIR(sb.st_mode))
        return true;
    else
        return false;
}

/**
 * deletes all the files in a folder (but not the folder itself). optionally
 * this can traverse subfolders and delete all contents when recursive is true
 * @param dirpath the directory to delete the contents of (can be full or
 * relative path)
 * @param recursive true = delete all files/folders in all subfolders
 *                  false = delete only files in toplevel dir
 * @return SUCCESS_STAT on success
 *         errno on failure, values can be from unlink or rmdir
 * @note this does NOT delete the named directory, only its contents
 */
int DeleteFilesInDirectory(std::string dirpath, bool recursive)
{
    if (dirpath.empty())
        return SUCCESS_STAT;

    DIR *theFolder = opendir(dirpath.c_str());
    struct dirent *next_file;
    char filepath[1024];
    int ret_val;

    if (theFolder == NULL)
        return errno;

    while ( (next_file = readdir(theFolder)) != NULL )
    {
        // build the path for each file in the folder
        sprintf(filepath, "%s/%s", dirpath.c_str(), next_file->d_name);

        //we don't want to process the pointer to "this" or "parent" directory
        if ((strcmp(next_file->d_name,"..") == 0) ||
            (strcmp(next_file->d_name,"." ) == 0) )
        {
            continue;
        }

        //dirExists will check if the "filepath" is a directory
        if (dirExists(filepath))
        {
            if (!recursive)
                //if we aren't recursively deleting in subfolders, skip this dir
                 continue;

            ret_val = DeleteFilesInDirectory(filepath, recursive);

            if (ret_val != SUCCESS_STAT)
            {
                closedir(theFolder);
                return ret_val;
            }
        }

        ret_val = remove(filepath);
        //ENOENT occurs when i folder is empty, or is a dangling link, in
        //which case we will say it was a success because the file is gone
        if (ret_val != SUCCESS_STAT && ret_val != ENOENT)
        {
            closedir(theFolder);
            return ret_val;
        }

    }

    closedir(theFolder);

    return SUCCESS_STAT;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-05T18:38:47.090

您可以使用[nftw(3)](http://man7.org/linux/man-pages/man3/nftw.3.html)。首先，通过收集要删除的文件路径集。然后在第二遍中使用`unlink`（对于非目录）和[rmdir(2)](http://man7.org/linux/man-pages/man2/rmdir.2.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-21T01:01:35.850

从 C++17 开始，您可以使用[std::filesystem](https://en.cppreference.com/w/cpp/header/filesystem)。下面的代码将使用[directory_iterator](https://en.cppreference.com/w/cpp/filesystem/directory_iterator)列出目录中的所有文件和子目录，并调用[remove_all](https://en.cppreference.com/w/cpp/filesystem/remove)删除它们：

```
#include <filesystem>

namespace fs = std::filesystem;

void delete_dir_content(const fs::path& dir_path) {
    for (auto& path: fs::directory_iterator(dir_path)) {
        fs::remove_all(path);
    }
} 
```

请注意，这将引发`filesystem_error`底层 OS API 错误的异常。您可以通过以下方式避免这种情况：

```
void delete_dir_content(const fs::path& dir_path) {
    for (auto& path: fs::directory_iterator(dir_path)) {
        std::error_code err;
        std::uintmax_t n = fs::remove_all(path, err);
        if (static_cast<std::uintmax_t>(-1) == n) {
            std::cout << "Failed to remove_all(" << path << ") with error: " << err.message() << std::endl;
        }
    }
} 
```

# c# - 将嵌套对象从一个 XmlDocument 复制到另一个

> ID：11007495
> 
> 赞同：1
> 
> 时间：2012-06-13T02:32:44.423
> 
> 标签：c#, xml, parsing, xml-serialization, xml-parsing

我对此一无所知。这是我的文件：

```
<?xml version="1.0"?>
<TestObject xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Property1>TestObjectVal1</Property1>
  <Property2>TestObjectVal2</Property2>
  <Property3>TestObjectVal3</Property3>
  <SubObject>
    <Prop1>TestObject2Val1</Prop1>
    <Prop2>TestObject2Val2</Prop2>
    <Prop3>TestObject2Val3</Prop3>
  </SubObject>
</TestObject> 
```

我正在尝试将它的选定部分复制到基于某些指定 XPath 的新 XmlDocument 对象。我已经尝试了所有我能想到的排列方式。这就是我现在的位置。

```
var filters = new[] { "Property1", "Property2", "SubObject/Prop1" };

var xmlDoc = GetObjectXml(obj); //Loads the document
var newDoc = (XmlDocument)xmlDoc.Clone();
newDoc.DocumentElement.RemoveAll(); 
var rootNode = xmlDoc.DocumentElement;
foreach (var filter in filters)
{
    var nodes = rootNode.SelectNodes(filter);
    foreach (XmlNode node in nodes)
    {
        var newNode = newDoc.ImportNode(node, true);
        newDoc.DocumentElement.AppendChild(newNode);
    }
} 
```

我得到的是这样的：

```
<?xml version="1.0"?>
<TestObject>
  <Property1>TestObjectVal1</Property1>
  <Property2>TestObjectVal2</Property2>
  <Prop1>TestObject2Val1</Prop1>
</TestObject> 
```

但我想要这个：

```
<?xml version="1.0"?>
<TestObject xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Property1>TestObjectVal1</Property1>
  <Property2>TestObjectVal2</Property2>
  <SubObject>
    <Prop1>TestObject2Val1</Prop1>
  </SubObject>
</TestObject> 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:46:02.873

看起来问题是 xpath 方法正在选择内部元素，因此 *SubObject" 信息丢失了。此代码应为您的特定示例产生正确的输出。

```
foreach (XmlNode node in nodes)
{
    XmlElement newNode; 
    string[] xpathElements = filter.Split('/');
    if (xpathElement.Length == 2) 
    {
        newNode = newDoc.CreateElement(filter);
        newNode.AppendChild(newDoc.ImportNode(node, true));

    }
    else 
    {
        newNode = newDoc.ImportNode(node, true);
    }
    newDoc.DocumentElement.AppendChild(newNode);
} 
```

请注意，此代码对“过滤器”xpath 表达式必须采用什么形式做出了限制性假设……即，它必须是“RootElement”或“RootElement/ChildElement”形式（没有属性，最大深度为三）。根据您的用例，这可能就足够了，但解决更一般的情况会有点棘手......

# ruby-on-rails - Rails、CoffeeScript 和 ERB

> ID：11007498
> 
> 赞同：3
> 
> 时间：2012-06-13T02:33:19.970
> 
> 标签：ruby-on-rails, coffeescript, ujs

因此，我在一些 javascript 响应程序中搞乱了一些操作。所以，例如，

```
def create
  #code omitted
  respond_to do |format|
    if @post.save
      format.html { redirect_to discussion_posts_path(@post.discussion), notice: 'Post was successfully created.' }
      format.js
    else
      format.html { render :action => "new" }
    end
  end
end

#create.js.erb
$("#discussion_posts_table").append("<%= escape_javascript(render(@post)) %>");
$("#post_body").val(""); 
```

现在假设我想将这些javascript函数转换为Coffeescript（撇开它几乎没有任何收获的事实不谈），如果我将文件更改为`create.js.coffee.erb`它停止工作。在 UJS 中使用咖啡脚本的正确方法是什么？

作为记录，我`coffee-rails`在我的 Gemfile 中有，并且在资产管道中使用咖啡脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T02:46:37.640

我以前见过 .coffee.erb 。还在四处寻找那个项目。

好的，如果它们仍在您的视图中，请使用 .js.coffee

编辑 1：显然 Rails 仍然会奇怪地处理 erb。编辑 2：此外，您可以将 erb 添加到 js.coffee 文件的末尾，它们是按特定顺序进行预处理的，因此可能会抛弃 Rails。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:38:01.553

您需要将[coffee-rails](https://github.com/rails/coffee-rails) gem 添加到您的项目中才能正常工作。

# jquery - jQuery 和 TinyMCE 3.5.2：attr() 不起作用

> ID：11007502
> 
> 赞同：1
> 
> 时间：2012-06-13T02:33:49.713
> 
> 标签：jquery, tinymce

在使用 jQuery 版本的 TinyMCE 时，jQuery 和 TinyMCE 的交互方式存在问题，该问题已多次报告并解决。据我了解，它涉及 TinyMCE 对 jQuery attr() 函数的重新定义。

结果是当页面上没有使用 TinyMCE 时，下面的 while 将返回属性值：

```
var junk = $(this).attr('someAttribute'); 
```

当使用 TinyMCE 时，会返回一个对象。

我在使用 jQuery 1.7.2 和 TinyMCE 3.5.2 时遇到了这个问题。

还有其他人遇到这个吗？如果是这样，是否有解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T02:37:24.787

TinyMCE jquery 的插件会破坏 jQuery 的`attr`方法 (jQuery>=1.7.2.)。这是在 TinyMCE 3.5b3 中修复的。

供您参考，这里是一个报告的[TinyMCE 错误 #5136](http://www.tinymce.com/develop/bugtracker_view.php?id=5316)和一个[修复](https://github.com/tinymce/tinymce/commit/dc97bc56ca4350fd45d8a076423e59c6a40fe2c5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T20:46:37.293

我正在发布这个问题的答案，但如果有人有不同的解决方案，我仍然很想听听。

基本上，我接受了 Thariama 的建议并停止使用 tinyMCE 的 jQuery 构建。相反，我做了以下事情：

```
 tinyMCE.init({
        mode: "specific_textareas",
        editor_selector: "tinymce",
        script_url: '@Url.Content("~/Scripts/tinymce/tiny_mce.js")',
        theme: "advanced",
        plugins: "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
        theme_advanced_buttons1: "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4: "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left",
        theme_advanced_statusbar_location: "bottom",
        theme_advanced_resizing: true,
        template_external_list_url: "lists/template_list.js",
        external_link_list_url: "lists/link_list.js",
        external_image_list_url: "lists/image_list.js",
        media_external_list_url: "lists/media_list.js",
        convert_urls: 0, // default 1
        content_css: '@Url.Content("~/Content/tinymce.css")'
    }); 
```

这是基于我在 StackOverflow 其他地方找到的建议解决方案。

仅供从 jQuery 版本的 tinyMCE 转换的其他人参考：您需要记住将 mode: 和 editor_selector: 参数添加到您之前使用的参数列表中。如果不这样做，您将获得将每个 textarea 控件转换为 tinyMCE 编辑器的默认行为。

您还需要在页面标题中包含 tinyMCE 库。在我的应用程序中，如下所示：

```
<script src="@Url.Content("~/Scripts/tinymce/tiny_mce.js")" type="text/javascript"></script> 
```

享受！

# android - Listview 布局背景颜色在滚动时闪烁在图像加载时消失？

> ID：11007503
> 
> 赞同：1
> 
> 时间：2012-06-13T02:33:51.383
> 
> 标签：android, android-layout

我有一个带有布局的列表视图，该布局具有与主布局不同的背景颜色的嵌套布局。

在这个嵌套布局里面是一个 imageview。每当图像加载到视图中时，这个嵌套布局的背景颜色就会消失。在滚动列表视图之前，背景不会回来。

同样，当滚动列表视图时，再次绘制图像视图中的图像时，此序列再次发生，这使列表具有闪烁效果。

我尝试在主布局和嵌套布局上设置 cacheColorHint 属性，但它似乎没有改变。

这是加载图像/滚动时发生的情况的示例图像。如您所见，底部两个项目的背景颜色已消失，其余项目仍具有其背景颜色。

![在此处输入图像描述](../Images/8be6a0a8e452daee8d94d550b8c0f7e5.png)

这是带有嵌套布局的列表视图布局的一部分。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/race_entrant"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:minHeight="?android:attr/listPreferredItemHeight"
android:paddingTop="2dip"
android:paddingBottom="2dip"
android:paddingRight="2dip"
android:orientation="horizontal"
android:descendantFocusability="blocksDescendants"
android:cacheColorHint="#E0EAF1">
<LinearLayout
    android:layout_height="fill_parent"
    android:layout_width="50dip"
    android:orientation="vertical"
    android:id="@+id/linearLeft"
    android:paddingLeft="2dip"
    android:paddingRight="2dip"
    android:paddingTop="2dip"
    android:paddingBottom="2dip"
    android:background="#E0EAF1"
    android:cacheColorHint="#E0EAF1">
    <TextView
        android:id="@+id/txtEntrantNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        style="@style/entrant_number"
        android:layout_gravity="center_horizontal"
        android:cacheColorHint="#E0EAF1" />
        <ImageView
            android:id="@+id/imgJockey"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="1dip"
            android:adjustViewBounds="true"
            android:cacheColorHint="#E0EAF1" />
</LinearLayout> 
```

如何阻止嵌套布局的背景颜色像这样消失？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T20:38:34.467

这为我解决了这个问题：`listView.setCacheColorHint(Color.TRANSPARENT);`

这可能只是帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:27:28.633

我设法通过设置图像视图的背景颜色来实现这一点。

执行此操作的 xml 是：

```
android:background="#E0EAF1" 
```

现在加载图像时，背景颜色不会改变。

# asp.net - SqlCommand 占位符参数：“'?' 附近的语法不正确”和“必须声明标量变量 @param”？

> ID：11007505
> 
> 赞同：2
> 
> 时间：2012-06-13T02:33:54.753
> 
> 标签：asp.net, vb.net, visual-studio-2010, sql-server-2008

我正在为我们公司开发一个网络地图应用程序内部网。我正在地图上创建一个“添加多边形”功能。我使用 AspMap、VB.NET 和 SQL Server。当用户单击按钮以从 Web 表单输入数据属性添加新记录时，错误***Incorrect syntax near '?'*** 发生。

我的代码是：

```
Private Sub AddNewShape(ByVal checklist_id As String, ByVal type As String, ByVal shape As AspMap.Shape, ByVal address_area As String, ByVal dmz As String, ByVal customerid As String, ByVal source As String, ByVal area As String, ByVal instalatur As String, ByVal developer As String, ByVal data_received As DateTime, ByVal doc_data As DateTime, ByVal datereport As DateTime, ByVal remark As String)
    Dim tableName As String

    Select Case shape.ShapeType
        Case AspMap.ShapeType.Line
            tableName = "lines"
        Case AspMap.ShapeType.Polygon
            tableName = "sambungan_baru"
        Case Else
            Return
    End Select

    Dim conn As SqlConnection = GetDbConnection()
    Dim sql As String = "INSERT INTO " & tableName & " (CHECKLIST_ID, TYPE, SHAPEDATA, ADDRESS_AREA, DMZ, CUSTOMERID, SOURCE, AREA, INSTALATUR, DEVELOPER, DATA_RECEIVED, DOC_DATA, DATA_SENT, REMARK) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)"

    Dim cmd As SqlCommand = New SqlCommand(sql, conn)
    cmd.Parameters.AddWithValue("CHECKLIST_ID", checklist_id)
    cmd.Parameters.AddWithValue("TYPE", type)
    cmd.Parameters.AddWithValue("SHAPEDATA", shape.ShapeData)
    cmd.Parameters.AddWithValue("ADDRESS_AREA", address_area)
    cmd.Parameters.AddWithValue("DMZ", dmz)
    cmd.Parameters.AddWithValue("CUSTOMERID", customerid)
    cmd.Parameters.AddWithValue("SOURCE", source)
    cmd.Parameters.AddWithValue("AREA", area)
    cmd.Parameters.AddWithValue("INSTALATUR", instalatur)
    cmd.Parameters.AddWithValue("DEVELOPER", developer)
    cmd.Parameters.AddWithValue("DATA_RECEIVED", data_received)
    cmd.Parameters.AddWithValue("DOC_DATA", doc_data)
    cmd.Parameters.AddWithValue("DATA_SENT", datereport)
    cmd.Parameters.AddWithValue("REMARK", remark)

    cmd.ExecuteNonQuery()
    conn.Close()

    ReloadShapesDatabase()
End Sub 
```

我改变了这个：

```
Dim sql As String = "INSERT INTO " & tableName & " (CHECKLIST_ID, TYPE, SHAPEDATA, ADDRESS_AREA, DMZ, CUSTOMERID, SOURCE, AREA, INSTALATUR, DEVELOPER, DATA_RECEIVED, DOC_DATA, DATA_SENT, REMARK) VALUES *(?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
```

对此：

```
Dim sql As String = "INSERT INTO " & tableName & " (CHECKLIST_ID, TYPE, SHAPEDATA, ADDRESS_AREA, MZ, CUSTOMERID, SOURCE, AREA, INSTALATUR, DEVELOPER, DATA_RECEIVED, DOC_DATA, DATA_SENT, REMARK)(@checklist_id, @type, @shapedata, @address_area, @dmz, @conection, @source, @area, @instalatur, @developer, @data_received, @doc_data, data_sent, @remark)" 
```

我遇到了警告：**必须声明标量变量“@conection”。**谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T03:10:41.217

您在 SQL 查询中混淆了两种不同样式的参数。ODBC 语法使用简单的占位符 '?' 每个参数的字符，并且参数的替换顺序与您将它们添加到参数集合中的顺序相同。对于 an `OdbcCommand`，您给参数的名称将被忽略，只有它们的顺序很重要。

对于 a `SqlCommand`，参数名称是有意义的；当命令执行时，它将通过一个 SQL 存储过程运行，该过程接受参数名称和值的列表并将它们替换到 T-SQL 查询中。在这种情况下，将参数添加到查询的顺序并不重要，但您需要确保名称正确（包括“@”前缀。）

使用`SqlCommand`带参数的正确方法如下：

```
// The SQL Query: Note the use of named parameters of the form
// @ParameterName1, @ParameterName2, etc.
Dim sql As String = "INSERT INTO " & tableName & _
"    (CHECKLIST_ID, TYPE, SHAPEDATA ) " & _
"VALUES " & _
"    (@ChecklistId, @Type, @ShapeData )"

// The Parameter List. Note that the Parameter name must exactly match
// what you use in the query:
Dim cmd As SqlCommand = New SqlCommand(sql, conn)
cmd.Parameters.AddWithValue("@CheckListId", checklist_id)
cmd.Parameters.AddWithValue("@Type", type)
cmd.Parameters.AddWithValue("@ShapeData", shape.ShapeData)

cmd.ExecuteNonQuery() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:50:00.360

您应该分配这样的参数，在您的情况下，您错过了为“CONECTION”参数提供值。另外作为附加说明，您应该始终将连接对象包含在 using 块中。请参阅[此](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)内容并查看“备注”部分。

```
command.CommandText = "INSERT INTO Table (Col1, Col2, Col3) VALUES _
                     (@Col1Val, @Col2Val, @Col3Val)"
command.Parameters.AddWithValue("@Col1Val","1");
command.Parameters.AddWithValue("@Col2Val","2");
command.Parameters.AddWithValue("@Col3Val","3"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:14:00.983

请确保`Dim cmd As SqlCommand = New SqlCommand(sql, conn)`使用`conn`开放连接。

然后验证您的参数类型是否符合数据库表定义。另外，如果您使用字符串类型，您可以在插入的任何文本之前和之后添加一个 '。

可以肯定的是，您可以中断`cmd.ExecuteNonQuery()`并复制相关命令的值并将其运行到任何 SQL 管理器工具。

最后，处置你的`cmd`.

否则检查这是否对您的问题有帮助： http: [//social.msdn.microsoft.com/Forums/en-US/sqlspatial/thread/9d75106a-b0d4-49cc-ac86-d41cba4ab797](http://social.msdn.microsoft.com/Forums/en-US/sqlspatial/thread/9d75106a-b0d4-49cc-ac86-d41cba4ab797)

# jakarta-ee - Struts2 自定义标签/模板

> ID：11007509
> 
> 赞同：2
> 
> 时间：2012-06-13T02:34:30.747
> 
> 标签：jakarta-ee, struts2

我在一个struts项目中。我想创建可重用的自定义标签。所以继承人的事情，例如我有这组struts UI标签：

```
<s:form action="some.action" namespace="/somenamespace">
    <s:textfield name="username" label="Username"/>
    <s:textfield name="pwd" label="Password" />
    <s:submit value="login"/>
</s:form> 
```

是否有可能想出这样的东西来产生相同的输出而不是上面的代码：

```
<mycustomtag:login /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:50:07.363

您可以使用标记文件来执行此操作。

以下是一些链接：

*   [链接 1](http://today.java.net/pub/a/today/2003/11/14/tagfiles.html)

*   [链接 2](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags5.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:13:21.973

您可以为此使用[标签。](http://struts.apache.org/2.3.4/docs/component.html)另一种方法是[模板或像其他插件（](http://struts.apache.org/2.3.4/docs/themes-and-templates.html) [jQuery](http://code.google.com/p/struts2-jquery/) / [Bootstrap](http://code.google.com/p/struts2-bootstrap/) ）一样创建您自己的自定义 Struts2 标签库。

# c - Unix - 关于 & 和 ps

> ID：11007511
> 
> 赞同：0
> 
> 时间：2012-06-13T02:34:47.363
> 
> 标签：c, unix, ps

我正在做一个硬件任务，想知道是否有更多 Unix 经验的人可以解释以下问题的含义：

```
Run sample program 1 in the background with &
Using the ps utility with appropriate options, observe and report the PIDs and the status  of your processes. 
```

示例程序 1 是：

```
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>

int
main()
{
    puts("Before fork");
    fork();
    sleep(10);
    puts("After fork");
} 
```

我编译并运行：

```
./fork_demo & 
```

在后台运行时使用 ps 的最佳方法是什么？我只是在这里寻找指导，这只是硬件任务的一小部分。我已经完成了主要的工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T02:36:04.053

```
./fork_demo &
ps 
```

解释：

`&`强制它之前的进程 ( `fork_demo`) 进入后台。此时，您可以运行另一个命令（如`ps`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T02:37:43.577

```
ps -ef | grep fork_demo 
```

或者

```
ps aux | grep fork_demo 
```

不知道哪些是您分配的“正确参数”，我做了一些猜测。

# git - 推送到远程存储库后，在 GitHub 上看不到推送通知

> ID：11007512
> 
> 赞同：1
> 
> 时间：2012-06-13T02:35:33.230
> 
> 标签：git, github

在我从命令行提交并推送到远程存储库之后：

```
git commit -m 'ID: XXXXXX Some comments'
git push origin feature/xxxxx
Everything up-to-date 
```

但是当我去 github 时，我看不到我在 News Feed 上的推送，比如`luca pushed to feature/xxxx at xxxxxxxxx`

我显然在相关的分支上，我用一个`git branch`命令进行了检查。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:44:57.910

git 消息`Everything up-to-date`表明您推送到的远程分支已经与正在推送的本地分支同步。因此，GitHub 上没有新闻提要，因为远程分支上没有任何变化。

如果您的本地分支与远程分支不同步，则执行：

```
$ git status 
```

将显示如下消息：

```
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit. 
```

现在，当您将本地分支推送到远程分支时，git 会显示如下消息：

```
$ git push origin master
Counting objects: 5, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 290 bytes, done.
Total 3 (delta 2), reused 0 (delta 0)
To git@github.com:user/project.git
   d478973..abc3741  master -> master 
```

# java - 使用给定证书在 JWS 应用程序中设置发布者名称

> ID：11007514
> 
> 赞同：1
> 
> 时间：2012-06-13T02:35:43.363
> 
> 标签：java, applet, java-web-start, signing, jar-signing

我已获得*受信任机构*的证书（已获得 .pfx 文件）。

我用 jarsigner 签署了我所有的 .jar 文件，如下所示：

```
jarsigner -storetype pkcs12 -keystore my_pfx_file.pfx -storepass my_store_pwd -signedjar Smy_jar.jar my_jar.jar 
```

然后我从密钥库中导出证书以创建一个 .cer 文件。

我还需要做什么才能让我没有收到来自“未知发布者”的消息，而是拥有公司名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T02:05:23.267

我想到了。这是 .pfx 文件的问题。我可以在 mmc 控制台中看到证书链，但是当我使用 : 时
`keytool -list -storetype pkcs12 -keystore my_pfx_file.pfx`，
我看到证书链长度为 1。
所以我从 mmc 控制台导出了证书。只有这一次，我选中了“如果可能，在证书路径中包括所有证书”框。我得到了一个新的 .pfx 文件，我用它签署了我的 jar，它运行良好。
这篇文章帮助我弄清楚发生了什么： [如何使用 .pfx 文件签署 java 小程序？](https://stackoverflow.com/questions/5642837/how-to-sign-java-applet-with-pfx-file)

# boost - 如何在 Mac OS (Lion) 上构建简单的 boost 程序

> ID：11007516
> 
> 赞同：6
> 
> 时间：2012-06-13T02:35:48.950
> 
> 标签：boost, osx-lion

步骤：
1\. sudo port boost
boost文件安装在/opt/local/boost，库文件在/opt/local/lib

2\. 使用XCode创建c++工程

```
#include <iostream>
#include <boost/asio.hpp>
int main () {
    return 0;
} 
```

3.设置XCode以 在Debug和Release
中的“Build Settings”->“HEADER_SEARCH_PATHS”中找到boost添加路径/opt/local/include 4.“Build Settings”->“LIBRARY_SEARCH_PATHS”->添加/opt/local /lib 用于调试和发布。 5\. 编译程序失败。 错误信息，

```
Undefined symbols for architecture x86_64:
  "boost::system::generic_category()", referenced from:
  ___cxx_global_var_init1 in main.o
  ___cxx_global_var_init2 in main.o
  "boost::system::system_category()", referenced from:
  ___cxx_global_var_init3 in main.o
  boost::asio::error::get_system_category() in main.o
  "boost::asio::error::get_netdb_category()", referenced from:
  ___cxx_global_var_init5 in main.o <br>
  "boost::asio::error::get_addrinfo_category()", referenced from:
  ___cxx_global_var_init6 in main.o <br>
  "boost::asio::error::get_misc_category()", referenced from:
  ___cxx_global_var_init7 in main.o <br>
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我在程序上错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T16:35:05.630

您需要链接`Boost.System`，它应该在`/opt/local/lib/libboost_system`（带有一些后缀，这取决于您如何构建 boost）

将它添加到您的 Xcode 项目中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-15T04:46:45.943

1.  选择你的“目标”
2.  在“构建阶段”选项卡下的“将二进制文件与库链接”部分中，添加 boost 库。
3.  如果通过 MacPort 安装，boost 将在`/opt/local/lib`，
    如果通过 brew 安装，boost 将在`/usr/local/Cellar/boost`，
    如果自己构建，它将在`/usr/local/lib by default`或`yourBoostLib/stage/lib`

# c - 在 C 中有效实现布隆过滤器？

> ID：11007517
> 
> 赞同：14
> 
> 时间：2012-06-13T02:35:54.617
> 
> 标签：c, bloom-filter

这个问题之前有人问过，但当时没有答案，所以我决定再问一次。

我需要在 C（不是 C++）中有效地实现布隆过滤器。如果没有这样的东西可用，我不介意实施一个，如果有一些好的参考，这样就不会花费我太多的时间。

我想按比例（1:20k）使用这个数据结构进行插入和测试，所以它主要是测试密集型的。要测试的数据是 64 位整数。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T08:50:33.613

我在这里有一个独立的纯 C 库，可能有用： [https ://github.com/jvirkki/libbloom](https://github.com/jvirkki/libbloom)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T06:59:12.243

不要做太多的自我推销，但我已经为[Geany 编辑器/IDE](http://geany.org/)编写了一个插件，它可以过滤掉重复的文本行，它使用了一个 Bloom 过滤器。

该实现是用 C 语言实现的，您可以[在 GitHub 上](https://github.com/unwind/geanyuniq)找到它。它是 GPL v3，因此根据您的确切需求，您可能会也可能不会使用它。

关于我的实现的一些注意事项：

*   它旨在过滤字符串，并且不抽象键类型。这意味着您将不得不修改密钥处理以满足您的需要。
*   它支持非特征语义，如果您愿意，您实际上可以将其用于完全非概率的存在测试（请参阅 使用的`BloomContains`回调函数指针`bloom_filter_new()`）。只需通过`NULL`即可获得“纯”过滤器。
*   字符串散列函数是Austin Appleby 的[MurmurHash2](https://sites.google.com/site/murmurhash/)。我评估了最新的 MurmurHash3，但版本 2 更易于使用。
*   为了适应 Geany 生态系统，此代码始终使用[GLib](http://developer.gnome.org/glib/stable/)类型。

它没有针对性能进行大量调整，但应该没问题。当然，如果您在测试后得到任何反馈，我将不胜感激！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T02:40:15.333

Chromium 在 C++ 中有一个

[github链接](https://github.com/adobe/chromium/blob/master/chrome/browser/safe_browsing/bloom_filter.h)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-02T05:46:44.393

我知道这是一个老问题，但作为参考，这里有一些 github 搜索结果。

在 github 上简单搜索“bloomfilter”会产生大量结果（对于 C）：

[https://github.com/search?q=extension%3Ac+bloomfilter&type=Code&ref=searchresults](https://github.com/search?q=extension%3Ac+bloomfilter&type=Code&ref=searchresults)

这仅供**参考**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-14T07:35:25.190

此项目中提供了几种布隆过滤器实现和替代算法：[https ://github.com/FastFilter/fastfilter_cpp](https://github.com/FastFilter/fastfilter_cpp)

涵盖了常规布隆过滤器、阻塞布隆过滤器、布谷鸟过滤器、哥伦布编码集等。它是 C++，但主要算法很容易移植到 C。

# java - 如何消除按钮单击 JavaFX 的扩展效果？

> ID：11007523
> 
> 赞同：3
> 
> 时间：2012-06-13T02:36:24.650
> 
> 标签：java, css, button, javafx-2, fxml

当我单击 JavaFX 按钮时，如何删除小的展开效果？还有我怎样才能让它像一个菜单按钮一样工作（当我按下它以保持聚焦状态，直到我按下另一个“菜单”按钮）。有没有办法将节点分组到同一个焦点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T06:52:22.757

一个价格的三个问题;-)

> 当我单击 JavaFX 按钮时，如何删除小的展开效果？

当你点击按钮时它有焦点，当它有焦点时，它被对焦环包围，这使得它略大。这个效果是通过css触发的。

默认 css 位于 JavaFX 运行时安装的 jfxrt.jar 中的 caspian.css 中。相关摘录在这里：

```
.button {
    -fx-skin: "com.sun.javafx.scene.control.skin.ButtonSkin";
    -fx-background-color: -fx-shadow-highlight-color, -fx-outer-border, -fx-inner-border, -fx-body-color;
    -fx-background-insets: 0 0 -1 0, 0, 1, 2;
    -fx-background-radius: 5, 5, 4, 3; 
```

... }

```
.button:focused {
    -fx-color: -fx-focused-base;
    -fx-background-color: -fx-focus-color, -fx-outer-border, -fx-inner-border, -fx-body-color;
    -fx-background-insets: -1.4, 0, 1, 2;
    -fx-background-radius:  6.4, 5, 4, 3;
} 
```

要消除轻微的扩展效果，请创建自己的样式表。在您的样式表中将其分配给您的场景，并将焦点和非焦点按钮的背景插图和半径设置为相同的值。这是关于 JavaFX CSS 的[教程](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)和有用的 JavaFX CSS[参考指南](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)。

> 我怎样才能让它像菜单按钮一样工作（当我按下它以保持聚焦状态，直到我按下另一个“菜单”按钮）。

我不太明白这个问题 - 这是按钮的默认行为。也许您正在混合焦点和手臂状态并且实际上想要一个[ToggleButton](http://docs.oracle.com/javafx/2/ui_controls/toggle-button.htm)？

> 有没有办法将节点分组到同一个焦点？

暂时没有内置到平台中。您可以为布局窗格编写自己的 FocusModel 类，该类会记住窗格中具有焦点的最后一个控件，并在窗格重新获得焦点或类似的东西时再次为其重新分配焦点。不过，这将是自定义代码。您需要使用的概念是节点的焦点属性、节点 requestFocus api（有时会通过在 Platform.runLater 中执行以确保您覆盖默认焦点处理而延迟）以及（我认为）默认焦点顺序取决于根据父级中的子级顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T06:50:39.240

如果您不喜欢默认[按钮，请为自己喜欢的按钮设置样式。](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)否则用代码或图像解释小扩展效果。
[使用 Menu 和 MenuItems](http://docs.oracle.com/javafx/2/ui_controls/menu_controls.htm#BABGHADI)来制作菜单。
或者使用[Toggle Button](http://docs.oracle.com/javafx/2/ui_controls/toggle-button.htm)对按钮进行分组并将它们表现得像一个菜单。
通过说“保持专注状态”，我假设您的意思是“选择/切换状态”而不是专注。导致按钮在单击后仍处于焦点状态。

# ruby-on-rails - Heroku 在我的 Ruby on Rails 应用程序中找不到文件——即使它们就在那里？

> ID：11007524
> 
> 赞同：3
> 
> 时间：2012-06-13T02:36:35.840
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

当我尝试访问我的网站，然后检查我的 Heroku 日志时，我看到了这个错误：

> ActionView::Template::Error（找不到文件'reset' 2012-06-13T02:31:43+00:00 app[web.1]:（在 /app/app/assets/stylesheets/application.css :4)):

（application.css 包含行 *= 需要重置）

然后我想运行“heroku run bundle exec rake assets:precompile:all”，但这会产生类似的错误：

```
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       couldn't find file 'main/first.js.coffee'
       (in /tmp/build_3428u21sggsoc/app/assets/javascripts/application.js:1)
       Tasks: TOP => assets:precompile:primary 
```

（该文件是我的 application.js 所需的第一个文件，第一行“//= require main/first.js.coffee”）

总结：我的应用程序在本地运行良好，但是当我部署到 Heroku 时，无法再找到这些文件。任何想法为什么？

编辑：这是项目树。（app前多了一个目录，就是项目主目录，里面还包含config、db、log等）

另一个编辑：.gitignore 或 .slugignore 没有问题。

![显示 first.js.coffee 的项目树](../Images/1ac8ebc3166c921ae77f145be6757995.png)

![应用程序.js](../Images/5e980c705d0b8ef1fd25d8281233ea87.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:21:47.310

首先，我建议您在本地计算机上以生产模式运行您的应用程序。有一些错误（在资产中，但我在路由中也发现了一些错误）仅对生产环境产生影响，因此您可以在本地测试和修复它们，而不必从生产服务器进行。

关于 Heroku 上的资产预编译，akjoe 给出的解决方案应该导致在 git repo 中跟踪已编译的资产：使用此选项，您应该禁用发生在 Heroku 上的资产预编译并让 Rails 为您提供资产（`config.serve_static_assets = true`在您的`production.rb`文件中设置）但是这个不是处理资产管道的最佳方式，因为您失去了他的主要好处之一，即释放您的 Rails 应用程序对资产的请求。为了使其正常工作，您应该设置类似 heroku explain 的内容：[Using Rack::Cache with Memcached for Static Asset Caching in Rails 3.1+](https://devcenter.heroku.com/articles/rack-cache-memcached-static-assets-rails31 "在 Rails 3.1+ 中使用 Rack::Cache 和 Memcached 进行静态资产缓存")

我还建议您在生产环境中本地尝试资产预编译`RAILS_ENV=production bundle exec rake assets:precompile`。看看你有没有错误。

最后，您可能需要检查这些不同的链接以找到有用的信息：

*   [Heroku Cedar 上的 Rails 3.1+ 资产管道](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)
*   [Railscasts : #279 了解资产管道](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)
*   [导轨指南](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T20:26:38.070

我遇到了几乎完全相同的问题和样式表编辑未生效的类似错误......我发现我会编辑似乎被 Heroku 忽略的 css（或在你的情况下对 css 文件的引用）。原来 Heroku 只引用了`public/assets`目录中的样式表。我清除了这个目录并且能够让它工作。后来我发现你需要在签入 git 之前预编译你的资产目录。你可以这样做：

1.  预编译资产目录：`rake assets:precompile`
2.  将项目文件添加到当前 Git 存储库：`git add .`
3.  将文件更改签入到当前 Git 存储库：`git commit -am "description goes here"`
4.  将文件推送到 Heroku：（`git push heroku master`将“master”替换为您希望推送到 Heroku 的分支）。

希望有帮助！

# android - Android 选项卡无法正常工作

> ID：11007526
> 
> 赞同：0
> 
> 时间：2012-06-13T02:37:01.460
> 
> 标签：android, xml, tabs

我对 android 编程还是很陌生，所以这可能很容易被我忽略。

我正在构建一个针对 Android 4 及更高版本的应用程序，并且我已经实现了一个选项卡主机。（我阅读了操作栏选项卡上的 Android 开发人员指南，但我仍然不明白。）无论如何，除了切换选项卡外，一切正常——当我这样做时，前一个选项卡中的内容仍然重叠。例如，我有选项卡 1、2、3 和按钮 1、2 和 3。当我从按钮 1 切换到 3 时，它们是重叠的。

**片段.java**

```
public class fragment extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment);
        TabHost th = (TabHost)findViewById(R.id.tabhost);
        th.setup();
        TabSpec ts = th.newTabSpec("tag1");
        ts.setContent(R.id.tab1);
        ts.setIndicator("Tab one");
        th.addTab(ts);
        ts.setContent(R.id.tab2);
        ts.setIndicator("Tab two");
        th.addTab(ts);
        ts.setContent(R.id.tab3);
        ts.setIndicator("Tab Three ");
        th.addTab(ts);
    }
} 
```

**主要的.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="match_parent" android:layout_height="match_parent">

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:id="@+id/tab1"

                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <Button
                    android:id="@+id/button1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="NUmber one" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <Button
                    android:id="@+id/button2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Number two"/>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <Button
                    android:id="@+id/button3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="NUmber three" />
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>

</TabHost>

</LinearLayout> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T04:21:32.897

问题是

您`ts = th.newTabSpec("tag1");`只为 Tab1 编写了 TabSpec。

并为其余两个选项卡重复使用相同的内容。

更改您的代码

```
 TabSpec ts = th.newTabSpec("tag1");
    ts.setContent(R.id.tab1);
    ts.setIndicator("Tab one");
    th.addTab(ts);
    ts.setContent(R.id.tab2);
    ts.setIndicator("Tab two");
    th.addTab(ts);
    ts.setContent(R.id.tab3);
    ts.setIndicator("Tab Three ");
    th.addTab(ts); 
```

关注

```
 TabSpec ts;

        ts = th.newTabSpec("tag1");
        ts.setContent(R.id.tab1);
        ts.setIndicator("Tab one");
        th.addTab(ts);

        ts = th.newTabSpec("tag2");
        ts.setContent(R.id.tab2);
        ts.setIndicator("Tab two");
        th.addTab(ts);

        ts = th.newTabSpec("tag3");
        ts.setContent(R.id.tab3);
        ts.setIndicator("Tab Three ");
        th.addTab(ts); 
```

# xpath - XPath 将元素中的所有文本作为一个值，删除换行符

> ID：11007527
> 
> 赞同：8
> 
> 时间：2012-06-13T02:37:13.253
> 
> 标签：xpath, google-sheets, xml-parsing, google-sheets-formula, google-sheets-importxml

我正在尝试获取节点中的所有文本以获取以下集合并作为一个值（而不是多个节点）返回。

```
<p>
   "I love eating out."
   <br>
   <br>
   "This is my favorite restaurant."
   <br>
   "I will definitely be back"
</p> 
```

我正在使用 '/p' 并获得所有结果，但它返回换行符。同样尝试 '/p/text()' 会导致将每个标签之间的每个文本作为单独的返回值。理想的回报是——

```
"I love eating out. This is my favorite restaurant. I will definitely be back" 
```

我试过搜索其他问题，但找不到很接近的东西。请注意，在当前环境中，我仅限于使用 XPath 查询，并且无法解析或设置任何 HTML 预解析。具体来说，我在 Google Docs 中使用 importXML 函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T03:19:05.920

**使用**：

```
normalize-space(/) 
```

当计算此 XPath 表达式时，首先生成文档节点 () 的字符串值，并将`/`其作为参数提供给标准 XPath 函数**[`normalize-space()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-normalize-space)**。

根据定义，`normalize-space()`返回其参数，消除了前导和尾随的相邻空白字符，并且任何中间的此类相邻空白字符组 - 替换为单个空格字符。

**对上述 XPath 表达式的求值结果为：**

“我喜欢出去吃饭。” “这是我最喜欢的餐厅。” “我一定会回来”

**为了消除引号，我们另外使用了[`translate()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-translate)函数**：

```
normalize-space(translate(/,'&quot;', '')) 
```

**评估此表达式的结果是**：

```
I love eating out. This is my favorite restaurant. I will definitely be back 
```

**最后，为了让这个结果用引号括起来，我们使用[`concat()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-concat)函数**：

```
concat('&quot;',
       normalize-space(translate(/,'&quot;', '')),
       '&quot;'
       ) 
```

**这个 XPath 表达式的评估产生了想要的结果**：

```
"I love eating out. This is my favorite restaurant. I will definitely be back" 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:value-of select=
   "concat('&quot;',
           normalize-space(translate(/,'&quot;', '')),
           '&quot;'
           )"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**（更正为格式正确）：

```
<p>
       "I love eating out."
       <br />
       <br />
       "This is my favorite restaurant."
       <br />
       "I will definitely be back"
</p> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
"I love eating out. This is my favorite restaurant. I will definitely be back" 
```

# c - 在 C 中使用 ShellExecute() 打开 .txt 的正确方法是什么

> ID：11007537
> 
> 赞同：2
> 
> 时间：2012-06-13T02:38:04.100
> 
> 标签：c, windows, parameters, hwnd

好的，所以我需要打开一个 .txt 文件，该文件将在与程序相同的文件中创建。

我想使用 ShellExecute(); 要做到这一点，我已经做了很多研究，但我似乎无法正确获取语法，主要是因为我不知道如何处理参数“HWND”

我[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)寻找答案并获得了所有信息，除了放入 HWND 的内容

这是我需要使用的代码的方式：

```
ShellExecute(0,"open","c:\\debug.txt",NULL,NULL,1); 
```

如果您不确定我在说什么，请提前感谢您的帮助！:)

这是我用来测试功能的程序：

```
 #include "DAL.h"
//DAL.h added to Testing file to make compiling easier
//Created to test show_debug()
int main(void)
{
  int test1,test2,final;

  puts("Enter 2 numbers to add (2,2)");
  scanf("%d,%d",&test1,&test2);

  log_debug(test1);
  log_debug(test2);

  view_debug();

  final= test1+test2;
  printf("%d\n",final);

  log_debug(final);

  return(0);
} 
```

view_debug(); 是包含 ShellExecute 的函数

```
void view_debug(void)//WIP
//Opens the debug.txt in notepad
{
    LoadLibrary( "shell32.dll" );
    ShellExecute(0,"open","c:\\debug.txt",NULL,NULL,1);
} 
```

这是 log_debug();

```
int log_debug(int test_variable)
//This function simply tests the programmers desired veriable & displays it for help in keeping track of a veriables value(integer).
//The function has support for upto 1 variable for testing
{
    time_t now;
    time(&now);

    FILE *debug; //Creates file to write debug info

    debug=fopen("debug.txt", "a+");
    fprintf(debug,"DEBUG %.24s: <%d>\n", ctime(&now),test_variable);
    //TODO: Allow more than one variable

    fclose(debug);

    return(0);
} 
```

该文件由函数 log_debug() 创建；它确实有效，但必须手动打开，因为 ShellExecute 不起作用。

完整来源[在这里。](https://github.com/Bevilacqua/DAL)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T06:59:11.030

这应该适合你：

```
#include <windows.h>
#include <ShellApi.h>

void view_debug(const char* pszFileName)
{
    ShellExecuteA(GetDesktopWindow(),"open",pszFileName,NULL,NULL,SW_SHOW);
}

int main()
{
    view_debug("c:\\debug.txt");
} 
```

如果它不起作用，那么可能有两三个原因：

1.  您使用程序代码创建了 debug.txt，但由于您没有关闭文件句柄，该文件仍处于锁定状态（例如，取决于您使用 log_debug 打开文件的方式：fclose()、CloseHandle()、close()、等等...）或者因为您打开的文件没有 FILE_SHARE_READ 标志。

2.  您实际上没有从 c:\ 驱动器的根目录读取的权限。这通常适用于非管理员帐户。

3.  c:\debug.txt 实际上并不像您想象的那样存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:43:09.353

如您链接到的页面所述：

> 如果操作与窗口无关，则此值可以为 NULL。

您可能希望指定父窗口的原因是，如果您的应用程序正在显示一个窗口，您可能希望您的窗口成为 ShellExecute API 可能显示的任何消息框的父窗口。如果您说 NULL，那么 ShellExecute 会将其消息框显示为顶级窗口，因此用户可能想知道哪个应用程序正在显示该框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T02:43:18.583

通常`NULL`就足够了。从[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)文档：

> *hwnd* [输入，可选]

```
Type: HWND

A handle to the parent window used for displaying a UI or error messages. 
This value can be NULL if the operation is not associated with a window. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-22T07:48:35.950

MSDN 上的[ShellExecute 函数语法：](https://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)

> ```
> HINSTANCE ShellExecute(
>   _In_opt_ HWND    hwnd,
>   _In_opt_ LPCTSTR lpOperation,
>   _In_     LPCTSTR lpFile,
>   _In_opt_ LPCTSTR lpParameters,
>   _In_opt_ LPCTSTR lpDirectory,
>   _In_     INT     nShowCmd
> ); 
> ```

你可以这样试试。您可以`"notepad"`使用文本文件路径 ( `"c:\\debug.txt"`) 的参数打开：

```
ShellExecute(0,"open", "notepad", "c:\\debug.txt", NULL, SW_SHOW); 
```

# vb.net - 组织 VB.Net 方法

> ID：11007538
> 
> 赞同：0
> 
> 时间：2012-06-13T02:38:06.800
> 
> 标签：vb.net, organization

假设我有一个包含多个方法的类。我想将这些方法组织成可以访问的分组，而无需每次都构造一个新对象。目的是将类的方法分组到逻辑桶中

例如：

```
Dim myclass as MyCustomClass
myclass.Shipping.Get_List()
myclass.Production.Get_List() 
```

做这个的最好方式是什么？我尝试了嵌套类，但 VB.NET 不允许我访问如上所示的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:49:21.527

我找到了我正在寻找使用接口的解决方案

```
Public Interface ICompany
    Function Company_List() As DataTable
End Interface

Public Class MainClass
    Public Company As ICompany = New CompanyClass

    Public Sub New()
        MyBase.New()
    End Sub

    Private Class CompanyClass
        Public Sub New()
            MyBase.New()
        End Sub

        Public Function Company_List() As DataTable
              My code....
        End Function
End Class
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:23:53.887

请注意，您很可能应该重新评估您的架构，您可以像这样实现您的模式：

```
Public Class MyCustomClass
    Private _shippingList As List(Of String)
    Private _productionList As List(Of String)

    Public Production As ProductionClass
    Public Shipping As ShippingClass

    Public Sub New()
        Production = New ProductionClass(Me)
        Shipping = New ShippingClass(Me)
    End Sub

    Public Class ShippingClass
        Private _owner As MyCustomClass

        Public Sub New(owner As MyCustomClass)
            _owner = owner
        End Sub

        Public Function Get_List()
            Return _owner._productionList
        End Function
    End Class

    Public Class ProductionClass
        Private _owner As MyCustomClass

        Public Sub New(owner As MyCustomClass)
            _owner = owner
        End Sub

        Public Function Get_List()
            Return _owner._productionList
        End Function
    End Class

End Class 
```

但是，如果您的真正意图只是以更易于访问和合乎逻辑的方式组织方法，我建议您考虑：

```
Public Class MyCustomClass
    Public Sub ShippingListGet()
    End Sub

    Public Sub ShippingListAddTo()
    End Sub

    Public Sub ShippingThatDO()
    End Sub

    Public Sub ShippingThisDo()
    End Sub

    Public Sub ProductionListGet()
    End Sub

    Public Sub ProductionListAddTo()
    End Sub

    Public Sub ProductionThisDo()
    End Sub

    Public Sub ProductionThatDo()
    End Sub
End Class 
```

请记住，有些人认为这很难阅读。我个人更喜欢按照这些思路组织，因此当方法按字母顺序排序时，它们会按逻辑分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:16:32.030

所以这就是我会做你想做的事

这不是世界上最好的设计，但它会起作用

我建议您将实际的 get_list 和其他类型的方法/属性移动到特定的类中，同时将公共的保留在父类中，在这种情况下是测试

但是，我不知道你的代码是什么样的，所以从那时起，这是你的选择

```
Module Module1

    Sub Main()
        Dim test As New test
        test.Production.Get_List()
        test.Shipping.Get_List()
    End Sub

End Module

Public Class Shipping
    Private parent As test

    Public Sub New(ByRef parent As test)
        Me.parent = parent
    End Sub

    Public Function Get_List() As List(Of Integer)
        Return parent.GetShipping_List
    End Function
End Class

Public Class Production
    Private parent As test

    Public Sub New(ByRef parent As test)
        Me.parent = parent
    End Sub

    Public Function Get_List() As List(Of Integer)
        Return parent.GetProduction_List
    End Function
End Class

Public Class test
    Public Property Production As Production
    Public Property Shipping As Shipping

    Public Function GetShipping_List() As List(Of Integer)
        Return Nothing
    End Function

    Public Function GetProduction_List() As List(Of Integer)
        Return Nothing
    End Function

    Public Sub New()
        Production = New Production(Me)
        Shipping = New Shipping(Me)
    End Sub
End Class 
```

# objective-c - 突出显示 PDF - iOS

> ID：11007541
> 
> 赞同：0
> 
> 时间：2012-06-13T02:38:54.670
> 
> 标签：objective-c, ios, xcode, calayer, quartz-graphics

我想在我的 pdf 阅读器应用程序中实现一个 Highlight 功能。不幸的是，我的研究得到的关于这方面的信息很少。然而，我开始相信我必须使用“覆盖”来绘制或“突出显示”。我现在打算做的是在 pdf 中添加一个 CALayer。我成功地将形状渲染到图层中（例如简单的线条、圆形和正方形），但我似乎无法自由地在其中绘制（就像在 Draw Something 中一样）。这是我使用的代码：

当用户开始突出显示时：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [touches anyObject];
    prevPoint = [touch locationInView:theContentView];

    drawImageLayer = [CALayer layer];
    drawImageLayer.frame = theContentView.frame;
    [theContentView.layer addSublayer:drawImageLayer];

} 
```

当用户开始突出显示时：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [touches anyObject];
    currPoint = [touch locationInView:theContentView];
    drawImageLayer.delegate = self;

    [drawImageLayer setNeedsDisplay];
} 
```

这是绘图发生的代码：

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx{
NSLog(@"DrawLayer being called..");

CGContextSaveGState(ctx);

CGContextSetLineCap(ctx, kCGLineCapRound);
CGContextSetLineWidth(ctx, 1.0);
CGContextSetRGBStrokeColor(ctx, 1, 0, 0, 1);
CGContextBeginPath(ctx);
CGContextMoveToPoint(ctx, prevPoint.x, prevPoint.y);
CGContextAddLineToPoint(ctx, currPoint.x, currPoint.y);
CGContextStrokePath(ctx);
prevPoint = currPoint;

CGContextRestoreGState(ctx);

} 
```

发生的事情是它绘制了一个点，并且该点随处可见！谁能告诉我这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:57:20.920

`drawLayer:`重绘**整个**图层；它不保留以前绘制的内容。您从`prevPoint`to`currPoint`然后画一条线 update `currPoint`。由于`drawLayer:`将在您更新时`currPoint`调用（因为您调用`setNeedsDisplay`），`prevPoint`将非常接近`currPoint`，这就是为什么您基本上只看到用户手指后面的一个点。

如果您想要一条从用户触摸的位置开始到用户手指当前所在位置结束的直线，您可能只想摆脱 line `prevPoint = currPoint;`，这样总是会从用户第一次触摸的位置到用户的位置画一条线' 手指目前是。

如果您想要一条跟随用户手指的平滑线，那么您需要跟踪点列表，并将所有点连接在一起`drawLayer`。在实践中，由于`touchesMoved:`不是在每个单像素移动后调用，您可能必须插入一条平滑连接所有点的曲线。

# javascript - 如何将序列化数据与 jQuery.getScript() 调用一起发布？

> ID：11007545
> 
> 赞同：1
> 
> 时间：2012-06-13T02:39:29.880
> 
> 标签：javascript, jquery, ajax

是否可以在请求外部 JS 文件的同时在同一请求中发布序列化数据？我想传递一些值来验证请求，但不要让这些值成为请求 url 的一部分。

在后端，我将处理发布的值并在验证后返回正确的 JS，然后继续使用注入的 JS 函数作为 getScript 的回调。

我在 API 中看不到数据选项：http: [//api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:46:07.047

`$.getScript`是一个简写的 Ajax 函数，相当于：

```
$.ajax({
  url: url,
  dataType: "script",
  success: success
}); 
```

所以我假设您可以使用以下代码来做到这一点

```
$.ajax({
      url: url,
      data: {data: serializedData},
      dataType: "script",
      success: success
    }); 
```

# asp.net - CreateUserWizard 在 Step1 触发 CreatedUser 事件

> ID：11007547
> 
> 赞同：0
> 
> 时间：2012-06-13T02:39:36.017
> 
> 标签：asp.net, asp.net-membership, membership, createuserwizard

我似乎无法将 CreatedUser 事件分配给 Finish 步骤。这是一个开箱即用的 ASP，有 2 个步骤：

```
<asp:CreateUserWizard ID="CreateUserWizard1" runat="server" 
    oncreateduser="CreateUserWizard1_CreatedUser">
    <WizardSteps>
        <asp:CreateUserWizardStep runat="server" />
        <asp:WizardStep runat="server">
            ...Step 2 Controls...
        </asp:WizardStep>
        <asp:CompleteWizardStep runat="server" />
    </WizardSteps>
</asp:CreateUserWizard> 
```

我想在 CreatedUser 方法中使用第二步的自定义控件，但我不能，因为它在第 1 步触发。

编辑：自定义步骤不会让我访问“创建用户”按钮的事件，而且 CreateUserWizard 似乎希望所有步骤都触发 CreatedUser 方法。我至少可以将事件分开，以便我可以从第 1 步和第 2 步分别访问方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:08:29.483

`OnFinishButtonClick`事件适用于我正在尝试做的事情。

# air - HTML 应用程序的简单桌面外壳

> ID：11007549
> 
> 赞同：1
> 
> 时间：2012-06-13T02:39:48.413
> 
> 标签：air, titanium, desktop-application

我正在寻找一个简单的桌面应用程序外壳来显示 HTML 和 Javascript 应用程序。Web 代码将与应用程序捆绑在一起，并且应用程序不需要网络访问。基本上我所需要的只是一个带有 webkit 视图的窗口，我可以指向用户计算机上的一个文件。

我认为这很简单，但我找不到快速的解决方案。到目前为止我所看到的：

*   Adobe Air - 由于一些疯狂的安全选择破坏了我的 Web 框架而失败。
*   Titanium Desktop - 由于一些奇怪的页面加载序列导致 dom 怪异而失败。
*   Chromeless - 看起来很完美但已停产，他们的下载代码不再有效。
*   PhoneGap - 没有桌面组件。
*   XULRunner - 对我的需求来说看起来很复杂。
*   其他各种 - 不是跨平台的（我需要 Windows 和 Mac），已停产。

我想要的只是一个简单的外壳来显示我的 HTML 并运行我的 JS。请告诉我，我唯一的解决方案是不要在 Qt 之类的东西中使用 WebKit 视图。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T21:45:38.183

请参阅：[http](http://code.google.com/p/chromiumembedded/) ://code.google.com/p/chromiumembedded/ 还有一些绑定可以从其他语言（如 Python）使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:30:51.300

[AppJS](http://appjs.org)在为 html5 应用程序创建桌面 shell 方面为我提供了很好的帮助。我认为你应该试一试。这很容易修补。

# java - 当我尝试倒计时时同步被阻塞

> ID：11007551
> 
> 赞同：1
> 
> 时间：2012-06-13T02:40:17.110
> 
> 标签：java, multithreading, concurrency, countdownlatch

我使用 CountDownLatch遵循[了我在这篇文章中找到的建议，但遇到了问题。](https://stackoverflow.com/questions/631598/how-to-use-junit-to-test-asynchronous-processes)我写了这个测试并运行它，当我尝试同步锁定时，我的线程创建了块。

```
 private CountDownLatch lock = new CountDownLatch(1);

  @Test
  public void testBlock() {
    Runnable r = new Runnable() {
      @Override
      public void run() {
        try
        {
          synchronized(this) {
            this.wait(50);
          }
        }
        catch (InterruptedException e)
        {
          e.printStackTrace();
          throw (new RuntimeException(e));
        }
        releaseLock();
      }
    };

    Thread t = new Thread(r);
    t.setDaemon(true);
    t.start();

    waitOnCallback();
  }

  private void releaseLock() {
    synchronized(lock) { // Thread t blocks here
      lock.countDown();
    }
  }

  private void waitOnCallback() {
    synchronized(lock) {
      try
      {
        lock.await();
      }
      catch (InterruptedException e)
      {
        throw new RuntimeException(e);
      }
    }
  } 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:44:03.627

CountDownLatch 不是您需要同步的对象（即删除`synchronized(lock)`块）。所有线程安全都在对象本身内部处理。

# git - Git：整个文件到标准输出

> ID：11007552
> 
> 赞同：44
> 
> 时间：2012-06-13T02:40:58.590
> 
> 标签：git

是否有一个命令可以获取 ref 和文件路径，并将文件的完整内容输出到 STDOUT 提交时的全部内容？

例如。像这样的东西：

```
git show-me-the-file HEAD~2 some/file | do_something_with_piped_output_here 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-13T02:47:21.430

`git show`

例如

`git show HEAD:./<path_to_file>`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-13T02:50:57.077

`git show <ref spec>:<path>` 例如，如果你想在提交点 9be20d1bf62 看到一个文件，你可以这样做：

`git show 9be20d1bf62:a/b/file.txt`

如果您想查看特定分支上的文件：

`git show <branch name>:<path>`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T02:53:49.900

您想要`git show`或`git archive`用于此用例。不过， git-show 命令更倾向于将文件发送到标准输出。

```
# Show .gitignore from revision before this one.
git show HEAD^:.gitignore 
```

冒号之前的部分是根据 gitrevisions(7) 形成的树形，而后半部分是相对于 git 工作树顶部的路径。

# c# - MVC HttpPost 不工作

> ID：11007554
> 
> 赞同：1
> 
> 时间：2012-06-13T02:41:43.973
> 
> 标签：c#, asp.net-mvc

在执行此代码时，我有一个空对象引用异常。我有一个文件 html 控件，我的 Razor 代码如下所示：

```
@using (Html.BeginForm("AddFiles", "AdministerFiles", FormMethod.Post))
 {
    <p><label for="filename">Filename : </label><input type="text" name="filename" /></p>
    <p><label for="description">Description : </label><input type="text" name="description" /></p>
    <p><input type="file" name="file" id="file" /> </p>
    <p><input type="hidden" value="@Model[2]" name="catid"/></p>

    <input type="submit" value="Upload Now!" />
    <input type="reset" value="Reset" />
 } 
```

我的 AdministerFilesController 是这样的：

```
[HttpPost]
    public ActionResult AddFiles(HttpPostedFileBase file, int catid, string description)
    {
        // Verify that the user selected a file {
        if (file != null && file.ContentLength > 0)
        {
            // extract only the filename
            var filename = Path.GetFileName(file.FileName);
            // store the file inside ~/App_Data/Uploads folder
            var path = Path.Combine(Server.MapPath("~/App_Data/Uploads"), filename);
            file.SaveAs(path);
        }
        RefDataLinks_mst fileDetails = new RefDataLinks_mst()
        {
            LastModified = new DateTime(2012,1,1),
            CategoryID = catid,
            DataFileName = Path.GetFileName(file.FileName),
            DataTitle = "SAMPLETITLE",
            DataID = ((new Random()).Next(100, 1000)),
            DataFilePath = "Sample/Path",
            Description = description,
            UpdatedBy = "Arjel",
            FileSize = file.ContentLength
        };
        bool b = ServiceReferenceHelper.AddFile(fileDetails);
        // Redirect back to the index action to show the form once again
        return Redirect("AddFiles?catid=" + catid); //both works
        //return RedirectToAction("ViewDataFiles", new { catid = catid }); 
    } 
```

收到来自 catid 和 description 的数据，但文件引用了一个空对象。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T02:54:31.570

上传实际上需要您`enctype`在表单上指定属性。这是一个如何做到这一点的例子：

```
@using (Html.BeginForm("AddFiles", "AdministerFiles", FormMethod.Post, 
    new { enctype = "multipart/form-data" }))
{ 
   ...
} 
```

# boost - 在触发事件中提升 msm 库 newbi

> ID：11007556
> 
> 赞同：0
> 
> 时间：2012-06-13T02:42:05.703
> 
> 标签：boost, state-machine

当我们调用 fsm.process_event('eventname');

如果发生转换，是否有方法返回 true，如果调用“no_transition”或发生异常，则返回 false？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:59:37.357

鉴于到目前为止没有人回答，我将发布我非常谦虚的建议。您可以尝试在调用 fsm.process_event() 之前和之后调用 current_state() 方法并比较结果。然而，这不会涵盖自我转换或内部转换的情况，如果有其他替代方案（充其量是黑客），我也不会使用它。

如果您试图捕捉事件没有被任何状态处理并且只是通过传播的情况，您可以添加一个底层超状态来报告到达它的事件（即被它们传播的所有状态忽略）。

我遇到过一些情况，我需要知道某个事件是否真的做了某事以及它何时做了（也许它先被推迟然后执行）。在那种情况下，我让我的 MSM 将“ACK”消息发布到外部队列，我不确定这是否适用于您的问题。

以我的拙见，中断和状态机不能很好地混合，我通常要么简单地吞下它们，要么尝试根据上下文将它们变成一些事件。你永远不应该让你的状态（底层函数对象）抛出。

# javascript - 如何将 Hover、Out、Click 事件组合在一起

> ID：11007557
> 
> 赞同：0
> 
> 时间：2012-06-13T02:42:14.747
> 
> 标签：javascript, jquery, events, delegates

```
var bar = $('.div_layer_Class');
  $('a.second_line').click(function() {
      $(this).unbind('mouseout');
  }).mouseover(function() {
      bar.css('display','inline');
  }).mouseout(function() {
      bar.css('display','none');
  }); 
```

现在，当我再次单击身体上的任何位置时，“onBodyclick”的问题我想调用这样的`mouseoutevent`东西

```
$('body').click(function() {
      bar.css('display','none');
 event.preventDefault();

  }); 
```

当我这样做时，它会重叠`$('a.second_line').click(function()`事件。任何想法我怎么能做到这一点。

[http://jsfiddle.net/qGJH4/56/](http://jsfiddle.net/qGJH4/56/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:26:26.827

除了`e.stopPropagation()`，您还可以做 2 件事：

*   创建一个变量来引用 mouseout 事件处理程序，以便您可以在用户单击正文的其他位置时重新绑定它。或者
*   用于存储 a.second_line 是否聚焦的变量。就像是 `var focused = false;`

您现在的代码将是：

```
var bar = $('.div_layer_Class');
var focused = false;
$('a.second_line').click(function(e) {
    focused = true;
    e.stopPropagation();
}).mouseover(function() {
    bar.css('display','inline');
}).mouseout(function() {
    if (!focused)
        bar.css('display','none');
});

$(document).click(function(e){
    bar.css('display','none');
    focused = false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:53:33.660

[此处的示例](http://jsfiddle.net/qGJH4/81/) 尝试将您的代码更改为此

```
var bar = $('.div_layer_Class');
$('a.second_line').click(function(e) {
    bar.addClass('on');
    e.stopPropagation();
}).mouseover(function() {
    bar.css('display','inline');
}).mouseout(function() {
   if(!bar.hasClass('on'))
       bar.css('display','none');
});

$(document).on('click',function(){
  bar.removeClass('on');
  bar.css('display','none');
  //return false;
}); 
```

看两行，第一，e in`function(e)`

```
$('a.second_line').click(function(e) { 
```

和停止`e.stopPropagation();`

这基本上会阻止通知任何父处理程序。[在这里阅读](http://api.jquery.com/event.stopPropagation/)

# java - 使用依赖项更改 Java 类文件中的代码

> ID：11007559
> 
> 赞同：2
> 
> 时间：2012-06-13T02:42:27.447
> 
> 标签：java, compilation

我从解压缩的 .jar 文件开始。我只需要在该 jar 文件内容中包含的一个类中更改几行代码。我这样做如下：

1）在Java Decompiler中打开类查看源码。

2) 将源代码复制到一个新的文本文件并以“.java”扩展名保存。

3）在命令行中，我进入 jdk 文件夹并执行 javac Classname.java 重新编译。

但是，此类代码会导入一些依赖项，因此重新编译失败。我有依赖项，它们是原始 jar 文件内容的一部分，但它们都是编译的 .class 文件并分布在多个文件夹中......

是否可以成功重新编译此类？是否有包含依赖项的命令行代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T02:50:43.177

是的，使用该`-classpath`选项。

```
javac -classpath original.jar Modified.java 
```

然后，您可以从 jar 文件中删除旧类并插入新类。没有简单的方法可以通过命令行执行此操作，因此我推荐使用[WinRAR](http://www.win-rar.com/start.html?&L=0)或[7-zip](http://www.7-zip.org/)等存档应用程序。

# r - readPNG 错误：ggmap 和 Stamen Maps

> ID：11007560
> 
> 赞同：3
> 
> 时间：2012-06-13T02:42:58.117
> 
> 标签：r, ggmap, stamen-maps

我不断收到此错误**readPNG(destfile) 中的错误：libpng 错误：PLTE：CRC 错误**，代码如下：

```
map <- get_map(location='Auckland', source="stamen", maptype="toner", zoom=11)
ggmap(map) 
```

但是，这确实有效：

```
map <- get_map(location='Auckland', source="stamen", maptype="toner", zoom=13)
ggmap(map) 
```

有任何想法吗？我觉得这可能是 Stamen 地图而不是 ggmap 的问题。如果是这样，我会把它带给他们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:30:52.127

我可以得到这两张地图，但不是一致的。如果出现错误，我会第二次或第三次运行代码以绘制地图。我觉得跟`zoom`等级没关系。没有任何系统性，但我在其他缩放级别得到相同的错误消息；甚至两张地图中的缩放级别相同。

我得到的错误信息是：

```
 Error in download.file(urls[[k]], destfile = destfile, quiet = !messaging,  : 
     cannot open destfile 'ggmapTemp.png', reason 'Permission denied' 
```

文件，`ggmapTemp.png`，是由工作目录中的ggmap生成的，但我不知道它是如何涉及的。

我运行以下代码来绘制两张地图：

```
library(ggmap)
map <- get_map(location='Auckland', source="stamen", maptype="toner", zoom=11)
ggmap(map)
windows()
map <- get_map(location='Auckland', source="stamen", maptype="toner", zoom=13)
ggmap(map) 
```

我正在使用 R 版本 2.15.0、ggplot2 版本 0.9.1 和 ggmap 版本 2.1

![在此处输入图像描述](../Images/2eee8f89a4c6ce3be5ae189d7036d325.png) ![在此处输入图像描述](../Images/c619bc060e970e3157fbcc0b832d697a.png)

# c# - 无法使用动态参数和泛型调用扩展方法

> ID：11007573
> 
> 赞同：11
> 
> 时间：2012-06-13T02:44:38.747
> 
> 标签：c#, generics, dynamic, extension-methods, dapper

我很想知道是否有其他人遇到过同样的问题...我在 ORM 上使用 Dapper 作为一个项目，并在`IDbConnection`接口之外创建了一些我自己的扩展方法，以简化我遇到的代码（我发现是）令人费解的错误。

我将介绍我所经历的过程。

**首先，我在一个静态类中为我的项目添加了一个扩展方法，`DbExtensions`如下所示：**

```
using System.Collections.Generic;
using System.Data;
using System.Linq;

public static class DbExtensions
{
    public static T Scalar<T>(
        this IDbConnection cnn, string sql, dynamic param = null, IDbTransaction transaction = null, bool buffered = true, int? commandTimeout = null, CommandType? commandType = null)
    {
        var ret = cnn.Query<T>(sql, param as object, transaction, buffered, commandTimeout, commandType).First();
        return ret;
    }
} 
```

这会产生一个编译错误，描述如下：

`'System.Data.IDbConnection' has no applicable method named 'Query' but appears to have an extension method by that name. Extension methods cannot be dynamically dispatched. Consider casting the dynamic arguments or calling the extension method without the extension method syntax.`

这很好，该错误实际上很有帮助，因为它甚至告诉我如何修复它。所以我然后尝试：

```
using System.Collections.Generic;
using System.Data;
using System.Linq;

public static class DbExtensions
{
    public static T Scalar<T>(
        this IDbConnection cnn, string sql, dynamic param = null, IDbTransaction transaction = null, bool buffered = true, int? commandTimeout = null, CommandType? commandType = null)
    {
        var ret = SqlMapper.Query<T>(cnn, sql, param, transaction, buffered, commandTimeout, commandType).First();
        return ret;
    }
} 
```

它编译正确。不过有些奇怪的事情正在发生。在 Visual Studio 中，如果我获取`SqlMapper.Query<T>`which *should* be的返回值`IEnumerable<T>`，并尝试对其进行操作，Visual Studio 不会给我任何智能感知属性，除了那些通过`object`.

认为我只是在做一些智能感知不够聪明的事情，我继续我的快乐方式......直到我真正尝试运行代码。

当我尝试运行它时，它会在我调用`.First()`的地方出现以下错误：

`'System.Collections.Generic.List<MyNameSpace.MyClass>' does not contain a definition for 'First'`

现在这个错误，我觉得很有趣......在敲了一会儿头之后，我意识到第一个参数是在抱怨动态类型......

我想这个错误的发生是因为编译器无法构建通用模板，因为它不知道 Query `IEnumerable<T>`在 DLR 中执行时正在返回？我很想听听知识渊博的人解释这一点。我基本上找到了两种解决方法：

*   将`dynamic`参数转换为`object`
*   将返回的值转换为`IEnumerable<T>`

* * *

```
using System.Collections.Generic;
using System.Data;
using System.Linq;

public static class DbExtensions
{
    public static T Scalar<T>(
        this IDbConnection cnn, string sql, dynamic param = null, IDbTransaction transaction = null, bool buffered = true, int? commandTimeout = null, CommandType? commandType = null)
    {
        var ret = SqlMapper.Query<T>(cnn, sql, param as object, transaction, buffered, commandTimeout, commandType).First();
        return ret;
    }
} 
```

* * *

```
using System.Collections.Generic;
using System.Data;
using System.Linq;

public static class DbExtensions
{
    public static T Scalar2<T>(
        this IDbConnection cnn, string sql, dynamic param = null, IDbTransaction transaction = null, bool buffered = true, int? commandTimeout = null, CommandType? commandType = null)
    {
        var ret = ((IEnumerable<T>)SqlMapper.Query<T>(cnn, sql, param, transaction, commandTimeout, commandType)).First();
        return ret;
    }
} 
```

**总之：**

我是刚接触 DLR 的 qwerks 的新手，在搞乱动态 + 泛型时似乎有一些注意事项要牢记......？

我知道这本身不是一个问题，但是当我真正开始写这篇文章时，我不知道发生了什么，我在这个过程中弄清楚了！我认为它可能会帮助其他有类似问题的人......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T14:51:01.517

如建议的那样，我将尝试在实际答案中*回答*我的问题......（现在已经 8 小时了）

我对这个问题的理解是这样的：

*   如[引用问题](https://stackoverflow.com/questions/5311465/extension-method-and-dynamic-object-in-c-sharp)中所述，动态类型没有可用的扩展方法，但可以正常使用扩展方法（作为*实例*方法），就像没有`this`关键字...

例如：

```
dynamic list = someListObject;

var item = list.First(); //this will not compile

var item = Enumerable.First(list);  //this will compile 
```

[正如 Jon Skeet 在这个答案](https://stackoverflow.com/a/10871857/1424349)中指出的那样，这完全是设计和 DLR 实现的一部分 - 如果任何调用具有动态参数，它将具有被认为是动态的返回类型。

*   出于类似的原因，在扩展方法中使用动态变量有点不稳定......

* * *

```
public static Enumerable<T> ExtensionMethod(this ExtendedObject p1, dynamic p2) {
    //Do Stuff
}

dynamic y = something;
var x = new ExtendedObject();

//this works
var returnedEnumerable = x.ExtensionMethod(y); 

//this doesn't work
var returnedValue = x.ExtensionMethod(y).SomeEnumerableExtensionMethodLikeFirst() 
```

要使上述示例正常工作，您可以执行以下操作之一：

```
//cast dynamic as object
var returnedValue = x.ExtensionMethod(y as object).First(); 
//cast returned object
var returnedValue = ((IEnumerable<KnownType>)x.ExtensionMethod(y)).First(); 
```

# c# - XtraTreeList 导出到 XML

> ID：11007581
> 
> 赞同：0
> 
> 时间：2012-06-13T02:46:02.753
> 
> 标签：c#, devexpress, xtratreelist

我尝试了 xtraTreeList 的 exporttoXML 属性。但是生成的 xml 不包含节点的任何信息，如 ID 或被检查等，只有名称和 parentID。是否有任何其他出口财产可以提供所有信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:01:34.200

> [TreeList.ExportToXml(String) 方法](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraTreeListTreeList_ExportToXmltopic1776)将树列表的数据作为 XML 而非布局导出到指定文件。您可以使用 [TreeList.SaveLayoutToXml(String) 方法保存布局并使用](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraTreeListTreeList_SaveLayoutToXmltopic1795)[TreeList.RestoreLayoutFromXml(String) 方法](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraTreeListTreeList_RestoreLayoutFromXmltopic1789)恢复它。

代码片段：

```
string fileName = "c:\\TreeListLayout.xml";
treeList1.SaveLayoutToXml(fileName);
treeList2.DataSource = treeList1.DataSource;
treeList2.RestoreLayoutFromXml(fileName); 
```

浏览 DevExpress 示例[如何在刷新数据时保留 TreeList 节点的展开状态](http://www.devexpress.com/Support/Center/p/E864.aspx)以及以下参考链接。

参考：

[如何通过代码](http://www.devexpress.com/Support/Center/p/Q333550.aspx)
[SearchResult加载和保存 TreeList 的布局](http://search.devexpress.com/default.aspx?q=save%20list%20to%20xml&p=T4%7CP1%7C58&page=2)

希望这有帮助..

# windows - 错误检查 0xCE：DRIVER_UNLOADED_WITHOUT_CANCELLING_PENDING_OPERATIONS

> ID：11007586
> 
> 赞同：3
> 
> 时间：2012-06-13T02:46:24.340
> 
> 标签：windows, driver, kernel-module, bsod

做一个内核驱动程序，每隔一段时间在完成驱动程序关闭子例程后，我会得到这个错误检查代码。

到底发生了什么似乎很简单，但我不确定解决它的最简单方法。

驱动程序卸载方法中有没有办法等待其他事件完成，或者在驱动程序卸载子例程返回之前取消它们？

**编辑：**请注意：此错误检查在返回时引发 - 成功输出返回语句之前的最后一个日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T04:30:25.710

事实证明我已经调用`PsSetLoadImageNotifyRoutine`但没有调用`PsRemoveLoadImageNotifyRoutine`驱动程序卸载子程序。

# dynamics-crm-2011 - 基于 CRM 2011 中的安全角色隐藏设置区域

> ID：11007589
> 
> 赞同：0
> 
> 时间：2012-06-13T02:47:05.253
> 
> 标签：dynamics-crm-2011

我试图隐藏 CRM 2011 中的“设置”区域，使其仅对具有特定安全角色的用户可见。我已遵循以下帖子中提到的建议

[https://community.dynamics.com/product/crm/f/117/t/28176.aspx](https://community.dynamics.com/product/crm/f/117/t/28176.aspx)

[http://taoofcrm.com/2011/06/09/hiding-areas-in-the-sitemap/](http://taoofcrm.com/2011/06/09/hiding-areas-in-the-sitemap/)

并创建了一个自定义实体，如帖子中所示。我的其他安全角色都没有对此实体“读取”。默认情况下，“系统定制器”对此实体具有“读取”功能。

然后，我在为 <SiteMap> 下的“设置”区域定义的每个 <Group> 的每个子区域中包含了一个 Privilege 标签，例如 <Privilege Entity="Your custom entity name here" Privilege="Read" /> node 并将包含此自定义的解决方案上传回我的组织。

导入解决方案后，我注意到如果我单击设置 --> 管理，浏览器底部的进度条会长时间保持忙碌状态，并且我还注意到左下方的“页面错误”消息的页面。点击“安全角色”或“用户”会做同样的事情。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:29:57.020

好的，我会在黑暗中刺伤。我怀疑你搞砸了 SiteMap 自定义。回滚您的更改，然后[从此处安装 Tanguy 出色的 SiteMap Editor 工具](http://mscrmtools.blogspot.co.uk/2011/06/new-tool-sitemap-editor-for-microsoft.html)。做你试图用手做的同样的事情，看看这次是否有效。

# tfs - Team Foundation 服务构建错误

> ID：11007591
> 
> 赞同：1
> 
> 时间：2012-06-13T02:47:08.623
> 
> 标签：tfs, azure, publish, azure-devops

我正在使用 TFS 预览版使用`AzureContinuousDeployment.11.xaml`构建定义的流程模板发布到 Azure。我收到以下错误，不确定如何解决：

> 总结调试 | 任何 CPU 1 个错误，0 个警告 $/HelloWorld/Trunk/HelloWorld/HelloWorld/HelloWorld.sln (':Publish' target(s)) - 1 个错误，0 个警告，查看日志文件 C:\a\src\Trunk\HelloWorld\HelloWorld\HelloWorld.sln.metaproj：项目中不存在目标“:Publish”。$/HelloWorld/Trunk/HelloWorld/HelloWorld/HelloWorld.sln 编译 $/HelloWorld/Trunk/HelloWorld/HelloWorld/HelloWorld.sln (':Publish' target(s)) - 1 个错误，0 个警告，查看日志文件 无测试结果 无代码覆盖率结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:43:05.697

这很容易做到：总时间：10分钟

[http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/](http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:10:27.273

基本上，当您尝试从 TFS 直接部署到 Windows Azure 时，您需要使用 Windows Azure 订阅 ID、证书等设置从 TFS 机器到 Windows Azure 的直接连接。当您从 Azure 管理门户下载 .publishsetting 配置时，与 TFS 一起使用，可以连接到 Portal，然后您的 Windows Azure 包将被部署。本地 TFS 和 Azure 上的 TFS（您使用的是哪一个？）需要此过程。

本文[使用 Windows Azure SDK 1.6 自动构建和部署](http://blogs.msdn.com/b/tomholl/archive/2011/12/06/automated-build-and-deployment-with-windows-azure-sdk-1-6.aspx)描述了它是如何完成的。请尝试从这里开始，看看您的问题是否已解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:29:35.793

您是否尝试将解决方案部署到 Azure 网站或 Azure 云服务？从错误看来，您正在尝试部署到云服务，但您的解决方案中没有云项目 (ccproj)。

如果您将云项目添加到您的解决方案或只是创建一个新解决方案并在 VS 的新项目对话框中选择 Cloud -> Cloud Service，它应该可以工作。

# linux - 输出列格式排序linux

> ID：11007599
> 
> 赞同：2
> 
> 时间：2012-06-13T02:48:00.477
> 
> 标签：linux, sorting, text-files, file-manipulation, textedit

基本上在我排序之后，我希望我的列用标签分隔。现在它被两个空格隔开。手册页没有任何与输出格式相关的内容（至少我没有注意到）。

如果不可能，我想我必须使用 awk 来排序和打印。有更好的选择吗？

**编辑：** 为了澄清这个问题，双空格的位置并不一致。我实际上有这样的数据：

`<date>\t<user>\t<message>`.

我按年、月、日和时间按日期排序，看起来像

`Wed Jan 11 23:44:30 CST 2012`

然后像原始文件一样输出排序数据

`<date>\t<user>\t<message>`.

**编辑 2：**似乎我对选项卡的测试是错误的。我正在将原始行从 bash 复制粘贴到我的 Windows 框中。这就是为什么它没有识别为选项卡而是显示空格的原因。我将整个文件下载到 Windows，现在我可以看到这些字段是制表符分隔的。

另外，我发现排序后的新文件中的字段分隔（\t \n、: ; 等）是相同的。这意味着，在原始文件中，如果我有制表符分隔字段，我的排序文件也将是制表符分隔的。

最后一件事，“正确”的答案并不完全是问题的正确解决方案。我不知道我是否可以评论我自己的线程并将其标记为正确。如果可以这样做，请告诉我。

感谢您的评论。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T02:50:09.757

将您的输出通过管道传输到列：

`sort <whatever> | column -t -s\t`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T03:05:37.107

据我了解，该文件已经排序，您想要的是用 TAB 字符替换两个分隔空格，在这种情况下，请使用以下命令：

`sed 's/ /\t/g' < sorted_file > new_formatted_file`

（注意正确复制/粘贴正则表达式中的两个空格）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T03:08:22.603

您可以使用[sed](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed)：

```
 sort data.txt  | sed 's/  /\t/g'
                         ^^
                         ||
                      2 blank spaces 
```

这将获取您的排序操作的输出，并将单个选项卡替换为 2 个连续的空白。

# objective-c - 递归块 == 内存不足静默崩溃

> ID：11007601
> 
> 赞同：0
> 
> 时间：2012-06-13T02:48:54.210
> 
> 标签：objective-c, ios, ios5, automatic-ref-counting, objective-c-blocks

我正在使用带有 ARC 的 iOS5 中的 Blocks 来使用 AVAudioPlayer 播放一个永无止境的录音循环。我在收到 AVAudioPlayerDidFinishRecording 消息后分配了一个新的 AVAudioPlayer，它开始了一个递归循环。我的应用程序在播放 120 个左右的音频片段后总是崩溃。我可以看到它在加载每个音频文件时占用了越来越多的内存，但从不释放内存。

我正在使用单个 AVAudioPlayer 属性，所以我希望 ARC 每次分配新播放器时都会清理旧实例。

1.  这些块会以某种方式导致旧的 AVAudioPlayers 留下来吗？

2.  使用观察者监控玩家并启动/分配新玩家会更好吗？

非常感谢你的帮助！

```
-(void)playNextAudioItem{
    //get ready to load audio doc from iCloud
    NSURL *ubiquitousContainer = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
    if(ubiquitousContainer){
        //query iCloud
        query = [[NSMetadataQuery alloc]init];
        [query setSearchScopes:[NSArray arrayWithObject:NSMetadataQueryUbiquitousDocumentsScope]];
        NSPredicate *pred = [NSPredicate predicateWithFormat:@"(%K == %@)", NSMetadataItemFSNameKey, [NSString stringWithFormat:@"%@.caf", audioItemGUID]];
        [query setPredicate:pred];
        [[NSNotificationCenter defaultCenter] addObserverForName:NSMetadataQueryDidFinishGatheringNotification object:query queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *notif){
            //iCloud query finished gathering data
            [query disableUpdates];
            [[NSNotificationCenter defaultCenter] removeObserver:self name:NSMetadataQueryDidFinishGatheringNotification object:query];
            NSMetadataItem *item1 = [query resultAtIndex:0];
            audioCurrentVerse = [[audioDoc alloc] initWithFileURL:[item1 valueForAttribute:NSMetadataItemURLKey]];
            //open the audio file
            [audioCurrentVerse openWithCompletionHandler:^(BOOL success) {
                if(success){
                    //configure the session and play the audio file
                    AVAudioSession *audioSession = [AVAudioSession sharedInstance];        
                    [audioSession setActive:YES error:nil];
                    NSError *error = nil;
                    [audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];
                    audioPlayer = [[AVAudioPlayer alloc] initWithData:audioCurrentVerse.data error:&error];
                    audioPlayer.numberOfLoops = 0;
                    audioPlayer.delegate = self;
                    if([audioPlayer prepareToPlay]){
                        [audioPlayer play];
                    }
                }
            }];
            [query stopQuery];
            query = nil;
        }];
        [query startQuery];
    }
}

-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag{
    //get an identifier for the next audio item
    audioItemIndex++;
    if(audioItemIndex >= rsAudioItems.recordCount){
        verseIndex = 0;
    }
    audioItemGUID = [rsAudioItems getRow:audioItemIndex andColumnNamed:@"audioItemGUID"];
    //recursive call to play the next audio item
    NSLog([NSString stringWithFormat:@"%d", playCount++]);
    [self playNextAudioItem];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:11:31.577

块拍摄堆栈的快照，直到块被释放才释放。不要使用递归块（或者根本不使用递归，如果它在这种情况下没有真正意义），因为块永远不会被释放，所以快照会永远存在。

使用 for 循环可以缓解这个问题。您可以将它们添加到串行调度队列中，然后在执行后将它们释放。

# javascript - GM_xmlhttpRequest：为什么它永远不会在 Firefox 中触发 onload？

> ID：11007605
> 
> 赞同：2
> 
> 时间：2012-06-13T02:50:08.323
> 
> 标签：javascript, firefox, greasemonkey

此代码在 Chrome 中运行良好。然而，在 Firefox 中，当它遇到 GMxhr 请求时，它就会停止。它一直到 GMxhr 调用，然后就……停止。我已经检查了我能想到的所有内容，确保 responseType 参数仅设置为 chrome 等……但仍然没有。有任何想法吗？

```
var body       = document.getElementsByTagName('body')[0]
  , messageDiv = document.createElement('div')
  ;

messageDiv.id = 'xhrComlink';
body.appendChild(messageDiv);

function getUri(e) {
'use strict';
var chrome = navigator.userAgent.toString().toLowerCase().indexOf('chrome') !== -1;

var bin2base64 = function bin2base64 (binary) {
...
};

var storeRetrievedFile = function storeRetrievedFile(response) {
    console.log(2);
    var thisComlink = e.target
      , evt         = document.createEvent("MouseEvents")
      ;

    var text = response.responseText
      , len  = text.length
      , arr  = new Uint8Array(len)
      , i    = 0
      ;

    if (!chrome) {
        for( i = 0; i < len; ++i ) {
            arr[i] = text.charCodeAt(i) & 0xFF;
        }
    }

    thisComlink.innerHTML = '';
    thisComlink.appendChild(
        document.createTextNode(
            chrome ? bin2base64(response.responseText) : bin2base64(arr.buffer)
        )
    );

    evt.initMouseEvent("dblclick", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    thisComlink.dispatchEvent(evt);
};

var gmXOptions = { method           : 'GET'
                 , overrideMimeType : 'text/plain; charset=x-user-defined'
                 , onload           : storeRetrievedFile
                 , url              : e.target.innerHTML
                 };

chrome && (gmXOptions.responseType = 'arraybuffer');

console.log(1);

GM_xmlhttpRequest(gmXOptions);
} 
```

在控制台中，我在 Firefox 上只得到“1”。在 Chrome 中，我得到“1”、“2”，它重写了 innerHTML，触发了事件，然后我们就走了。

我还检查以确保 Firefox 一切正常，gmXOptions 的目录与 log(1) 调用位于同一位置：

火狐：

```
method  "GET"
overrideMimeType    "text/plain; charset=x-user-defined"
url     "http://www.home...e-and-land-packages.jpg"
onload      storeRetrievedFile(response) 
```

编辑以解释答案；也许这会在未来对其他人有所帮助：

Firefox 的 GM 有一个烦人的行为/错误：

1）编写一个附加事件监听器的用户脚本。在该事件侦听器函数中，例如上面的 getUri()，使用 GM_ 函数。

2) 现在从任何其他 javascript 上下文中调用该事件的触发器，*除了*刚刚创建侦听器的上下文。例如，使用常见的 Chrome 友好的“注入 jquery，回调 main()，继续”模式。

3) 但是这样做，您将无法访问 main() 中的 GM 函数。所以你必须把它们放在脚本的开头，在 main() 之外，在你注入 jQuery 之前，然后在那些使用 GM 的（一个 GM 上下文）函数和 main 中的函数（一个注入的，非-GM 上下文），在这种情况下带有事件。

结果）在 GM 术语中，unsafeWindow 正在调用 GM_xmlhttpRequest。这会触发 Firefox Greasemonkey 中的“安全性”，它会**默默地阻止**对 GM_xmlhttpRequest 的调用。您必须使用解决方法来“清理”堆栈以使 Firefox GM 的“安全性”满意。然后它**会**调用 GM_xmlhttpRequest。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:15:12.260

我终于找到了问题，尽管 Firefox Greasemonkey 真的很难找到，而且无论出于何种原因，它根本没有抛出任何错误/警告/等消息，这可能有助于更快地解决这个问题。

无论如何，这是问题所在：[http ://wiki.greasespot.net/0.7.20080121.0_compatibility](http://wiki.greasespot.net/0.7.20080121.0_compatibility)

添加

```
 setTimeout(function() { 
```

和

```
}, 0); 
```

围绕 GM_xhr 调用，现在一切正常。

# php - 随机播放一组图像

> ID：11007608
> 
> 赞同：0
> 
> 时间：2012-06-13T02:50:12.730
> 
> 标签：php, javascript

我有一组图像，我想以随机顺序显示，一次显示一张图像。我认为一个解决方案是在有人访问页面时对数组进行洗牌，然后使用 onclick 事件来调用每个图像。当所有图像都被调用后，数组要么循环，要么在理想情况下重新洗牌。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:52:57.713

。看[`shuffle()`](http://us3.php.net/manual/en/function.shuffle.php)

```
<?php
    $images = array(
        0 => 'image1.gif',
        1 => 'image2.gif',
        2 => 'image3.gif',
        3 => 'image4.gif',
        4 => 'image5.gif',
    );
    shuffle($images);
    foreach ($images as $image){
        echo sprintf('<img src="%s">', $image);
    }

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:57:58.730

这看起来很有帮助：[http](http://www.hardcode.nl/subcategory_1/article_317-array-shuffle-function) ://www.hardcode.nl/subcategory_1/article_317-array-shuffle-function 。只需将您的图片网址放在一个数组中，然后将其随机播放。显示第一个，然后每次单击时移动到下一个。当您到达最后一个时，还要重新调整数组 onclick 并从头开始。

# eclipse - Eclipse 启动错误：JRE/JDK 必须可用

> ID：11007611
> 
> 赞同：0
> 
> 时间：2012-06-13T02:50:53.943
> 
> 标签：eclipse, java, eclipse-indigo

为 Java EE 下载了最新的 Eclipse 打开... 错误 .. 正在打开... JRE/JDK 必须可用于运行 Eclipse .. 与正常情况不同的是，我的 Java 安装在 G:/ 我是否必须对 ecplise.ini 进行任何更改-vm 标记？喜欢添加 java jdk bin 路径？不知何故没有工作！任何的想法 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T02:56:54.470

Eclipse 查看 PATH 变量以选择要使用的 JRE，如果已配置 eclipse 将正常工作，如果您没有或想要将 eclipse 指向特定的 Java 安装，那么您可以在`eclipse.ini`

```
-vm
G:\Java 
```

[您可以在此处](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html)查看不同的运行时选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-31T04:40:16.537

您可以通过在 Windows 上运行 eclipse.exe 或在其他平台上运行 eclipse 来启动 Eclipse。这个小型启动器本质上是查找并加载 JVM。在 Windows 上，eclipsec.exe 控制台可执行文件可用于改进命令行行为。

或者，您可以通过直接调用 JVM 来启动 Eclipse，如下所示：

java -jar eclipse/plugins/org.eclipse.equinox.launcher_1.0.0.v20070606.jar 注意：上述命令中的 org.eclipse.equinox.launcher 版本必须与 Eclipse 实际附带的版本相匹配。有关通过启动器使用 Java（不是 eclipse.exe）启动 Eclipse 的更多详细信息，请参阅使用 Equinox Launcher 启动 Eclipse 命令行。

**找到 JVM**

如果 eclipse/jre 目录下安装了 JVM，Eclipse 会使用它；否则启动器将查询 eclipse.ini 文件和系统路径变量。Eclipse 不参考 JAVA_HOME 环境变量。

**要显式指定您选择的 JVM，您可以使用 -vm 命令行参数：**

eclipse -vm c:\jre\bin\javaw.exe ''通过执行指定的java可执行文件启动Java eclipse -vm c:\jre\bin\client\jvm.dll ''通过在eclipse进程中加载​​jvm启动Java有关指定 JVM 的更多详细信息，请参阅启动器页面。

**日食.ini**

为运行 Eclipse 指定 JVM 的最推荐方法是将启动配置放入与 Eclipse 可执行文件（Windows 上的 eclipse.exe）相同的文件夹中的 eclipse.ini 文件中。Eclipse 程序启动器将从命令行或名为 eclipse.ini 的配置文件中读取参数。要使用配置文件指定 JVM，请在 eclipse.ini 中包含 -vm 参数，例如：

***-vm c:/jre/bin/javaw.exe*** 注意：此路径周围没有引号，因为从命令行执行相同的路径时需要包含空格等。这是一个常见的错误，当使用 Windows。

Eclipse 现在将在命令行中不使用其他参数启动，JVM 在 eclipse.ini 配置文件中指定。

您应该始终使用 -vm，这样您就可以确定您使用的是什么虚拟机。其他应用程序的安装程序有时会修改系统路径变量，从而在您不知情的情况下更改用于启动 Eclipse 的 VM。

eclipse.ini 文件的格式很讲究；强烈建议阅读 eclipse.ini 并按照那里的示例进行操作。

当 Eclipse 启动时，系统会提示您在启动时选择工作区位置。可以在首选项中配置此行为。您可以使用 -data 命令行参数在命令行上手动指定工作区位置。

***旧：启动 Eclipse 3.2***

在 Eclipse 3.2 和更早的版本中，Eclipse 的根目录中有一个附加文件：startup.jar。这个 jar 文件包含启动平台所需的类。在 3.3 及更高版本中，等效类位于 org.eclipse.equinox.launcher 包中。

**要通过直接调用 JVM 来启动 3.2，请使用以下命令：**

```
java -cp eclipse/startup.jar org.eclipse.core.launcher.Main 
```

Eclipse 3.2 不包含可执行文件的控制台版本。

**旧：Windows 上的 Oracle/Sun VM 1.6.0_21**

适用于 Windows 的 Eclipse 3.3 - 3.6 启动器与 Oracle/Sun Java VM 版本“1.6.0_21-b06”存在问题。

更新：Oracle/Sun 已经发布了他们的 JDK/JRE 的改版来解决这个问题，所以建议的解决这个问题的方法是下载并重新安装版本 1.6.0_21-b07'。通过运行 java -version 确保您拥有 b07 或更高版本。

在发布修复程序之前，有三种选择可以解决此问题：

1----切换回“1.6.0_20”（截至 2010 年 7 月 19 日，仍然可以在此处下载）更改启动命令行或在“-vmargs”后添加以下行到您的 Eclipse.ini 文件：- XX:MaxPermSize=256m（详细说明/示例）[http://wiki.eclipse.org/Eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)

2----对于32位的Helios，下载固定的eclipse_1308.dll并将其放入（eclipse_home）/plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.0.v20100503（[https://bugs .eclipse.org/bugs/attachment.cgi?id=174640](https://bugs.eclipse.org/bugs/attachment.cgi?id=174640) )

{Java BugParade 的 6969236 已关闭 Java 错误以供投票和评论，因为更改已恢复；相关的 Eclipse 错误报告在错误 319514 处开放投票和评论。}

# ruby-on-rails - 很长一段时间后，Koala 中的 put_connections() 到 Facebook 图表失败

> ID：11007616
> 
> 赞同：5
> 
> 时间：2012-06-13T02:51:22.053
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, koala

我正在使用 Rails 3.2.5 和 Koala 1.3.0（不是最新的，因为最新的甚至拒绝运行 Heroku 的示例 Facebook 应用程序）。Web 服务器是 Unicorn。

当我尝试使用 put_connections() 发布到时间线时：

```
@fbgraph   = Koala::Facebook::API.new(session[:access_token])
logger.debug "put_connections(#{url_for @room}), start"
@fbgraph.put_connections("me", "myapp:view", :room => url_for(@room))
logger.debug "put_connections(), end" 
```

控制器停顿 12 秒后出现异常：

```
Completed 500 Internal Server Error in 12075ms

Koala::Facebook::APIError (HTTP 500: Response body: {"error":{"type":"Exception","message":"Could not retrieve data from URL.","code":1660002}}): 
```

我使用调试工具进行了测试：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug) ，它发现第 2 行中记录的 URL 没有错误。

我的网络服务器记录来自 Facebook IP 的 GET 并返回 200 OK。然后 Facebook IP 发出更多请求以获取图像，这也获得了 200 OK。

我正在对我的应用程序的测试用户进行测试，仅供参考。

**更新**

这似乎是一个 OpenGraph 问题。这个问题为我重现：[https ://developers.facebook.com/bugs/213733412077729](https://developers.facebook.com/bugs/213733412077729)

基本上，只有在我在调试器上测试一次之后，POST 才能成功！以前有人经历过吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T09:03:19.737

弄清楚了。当然，调试器的事情没有意义。它之所以奏效，是因为 Facebook 然后对他们的缓存有我的看法。

这是一个经典的可重入问题（我不敢相信我必须在 Rails 中处理它！）——Facebook 的 POST API 是同步的，它只在回调到我的显示控制器后才返回。但由于我只有 1 个工作线程，没有人为请求提供服务，因此挂起。

解决方法是在线程中异步调用 API。

```
Thread.new {
    @fbgraph.put_connections("me", "myapp:view", :room => url_for(@room))
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T22:24:52.700

我和你有类似的问题，但是有一个管理超过 600 次 FB 调用的获取请求（总时间 > 16 秒）。

明确声明这些字段似乎有效。

```
graph = @FBGraph.get_object("#{user.fb_user_id}?fields=id,name,username,picture,link") 
```

有关更多信息，请参阅我在 stackoverflow 中的 Q/A[这里](https://stackoverflow.com/questions/13729802/rails-koala-error-unsupported-get-request-after-long-task-fail/13733541#13733541)

# python - Python 变量声明

> ID：11007627
> 
> 赞同：105
> 
> 时间：2012-06-13T02:54:08.293
> 
> 标签：python, python-3.x, python-2.7, variable-declaration

学习[Python](https://www.python.org/)，有一些基本的疑惑。

1.我已经看到[变量声明](https://www.learnpython.org/en/Variables_and_Types)（此处的路径）为

```
class writer:
    path = "" 
```

有时，没有显式声明，而是通过`__init__`.

```
def __init__(self, name):
    self.name = name 
```

我了解 的目的`__init__`，但是否建议在任何其他函数中声明变量。

2.如何创建变量来保存自定义类型？

```
class writer:
    path = "" # string value
    customObj = ?? 
```

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-06-13T04:43:20.467

好吧，第一件事。

**Python 中没有“变量声明”或“变量初始化”之类的东西。**

简单来说就是我们所说的“分配”，但可能应该只称为“命名”。

赋值的意思是“左边的这个名字现在指的是评估右边的结果，不管它以前指的是什么（如果有的话）”。

```
foo = 'bar' # the name 'foo' is now a name for the string 'bar'
foo = 2 * 3 # the name 'foo' stops being a name for the string 'bar',
# and starts being a name for the integer 6, resulting from the multiplication 
```

因此，Python 的名称（可以说是比“变量”更好的术语）没有关联的类型。价值观确实如此。无论其类型如何，您都可以将相同的名称重新应用于任何事物，但事物仍然具有取决于其类型的行为。名称只是一种引用值（对象）的方式。这回答了您的第二个问题：您**不会**创建变量来保存自定义类型。您不会创建变量来保存任何特定类型。您根本不会“创建”变量。你给对象命名。

第二点：Python 在类方面遵循一个非常简单的规则，这实际上比 Java、C++ 和 C# 等语言更加一致：**块****内声明的所有内容都是`class`**类的一部分。因此，这里编写的函数 ( `def`) 是方法，即类对象的一部分（不是按实例存储），就像在 Java、C++ 和 C# 中一样；但这里的其他名称**也是**类的一部分。同样，名称只是名称，它们没有关联的类型，并且函数在 Python**中也是对象。**因此：

```
class Example:
    data = 42
    def method(self): pass 
```

**在 Python 中，**类也是对象。****

 **所以现在我们创建了一个名为的**对象**`Example`，它代表了所有事物的类`Example`s。该对象有两个用户提供的**属性**（在 C++ 中，“成员”；在 C# 中，“字段或属性或方法”；在 Java 中，“字段或方法”）。其中之一是命名`data`的，它存储整数值`42`。另一个名为`method`，它存储一个函数对象。（还有几个 Python 自动添加的属性。）

但是，这些属性仍然不是对象的一部分。从根本上说，一个对象只是一堆更多的名称（属性名称），直到你开始处理那些不能再分割的东西。因此，值可以在一个类的不同实例之间共享，甚至在不同类的对象之间共享，如果您有意设置的话。

让我们创建一个实例：

```
x = Example() 
```

现在我们有一个名为 的单独对象`x`，它是 的一个实例`Example`。`data`和`method`实际上并不是对象的一部分，但是我们仍然可以通过 Python 来查找它们，因为`x`Python 在幕后做了一些魔术。特别是当我们查找时`method`，我们会得到一个“绑定方法”（当我们调用它时，`x`会自动作为`self`参数传递，如果我们直接查找就不会发生这种情况`Example.method`）。

当我们尝试使用时会发生什么`x.data`？

当我们检查它时，它首先在对象中查找。如果在对象中没有找到，Python 会在类中查找。

但是，当我们*分配给 时* `x.data`，Python 会在对象上创建一个属性。它**不会**替换类的属性。

这允许我们进行**对象**初始化。`__init__`Python 将在创建新实例时自动调用类的方法（如果存在）。在此方法中，我们可以简单地分配给属性以在每个对象上设置该属性的初始值：

```
class Example:
    name = "Ignored"
    def __init__(self, name):
        self.name = name
    # rest as before 
```

现在我们必须`name`在创建时指定 a `Example`，并且每个实例都有自己的`name`。`Example.name`每当我们查找实例时， Python 都会忽略类属性`.name`，因为会首先找到实例的属性。

最后一个警告：**修改（突变）和赋值是不同的东西！**

在 Python 中，字符串是不可变的。它们不能被修改。当你这样做时：

```
a = 'hi '
b = a
a += 'mom' 
```

您**不会更改**原始的 'hi ' 字符串。这在 Python 中是不可能的。相反，您创建了一个**新**的string `'hi mom'`，并导致`a`不再是 的名称，而是`'hi '`开始成为 的名称。`'hi mom'`我们也`b`为ass 起了名字，`'hi '`重新申请`a`名字后，`b`仍然是 for 的名字`'hi '`，因为`'hi '`仍然存在，没有改变。

但列表可以更改：

```
a = [1, 2, 3]
b = a
a += [4] 
```

现在`b`也是 [1, 2, 3, 4]，因为我们`b`为命名的同一事物`a`命名，然后我们更改了该事物。我们没有为`a`to name 创建一个新列表，因为 Python 只是对列表进行了`+=`不同的处理。

这对对象很重要，因为如果您将列表作为类属性，并使用实例来修改列表，那么更改将在所有其他实例中“看到”。这是因为 (a) 数据实际上是类对象的一部分，而不是任何实例对象；(b) 因为您正在修改列表并且没有进行简单的分配，所以您没有创建隐藏类属性的新实例属性。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2018-07-04T14:35:18.730

这可能晚了 6 年，但是在 Python 3.5 及更高版本中，您可以像这样声明一个变量类型：

```
variable_name: type_name 
```

或这个：

```
variable_name # type: shinyType 
```

所以在你的情况下（如果你`CustomObject`定义了一个类），你可以这样做：

```
customObj: CustomObject 
```

有关更多信息，请参阅[此](https://stackoverflow.com/questions/32557920/what-are-type-hints-in-python-3-5)或[那个](https://medium.com/@ageitgey/learn-how-to-use-static-type-checking-in-python-3-6-in-10-minutes-12c86d72677b)。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-06-13T03:38:41.130

无需在 Python 中声明新变量。如果我们谈论的是函数或模块中的变量，则不需要声明。只需为您需要的名称分配一个值：`mymagic = "Magic"`. Python 中的变量可以保存任何类型的值，你不能限制它。

不过，您的问题专门询问了类、对象和实例变量。创建实例变量的惯用方式是在`__init__`方法中而不是在其他任何地方——虽然您*可以*在其他方法中，甚至在不相关的代码中创建新的实例变量，但这只是一个坏主意。这将使您的代码难以推理或维护。

例如：

```
class Thing(object):

    def __init__(self, magic):
        self.magic = magic 
```

简单的。现在这个类的实例有一个`magic`属性：

```
thingo = Thing("More magic")
# thingo.magic is now "More magic" 
```

在类本身的命名空间中创建变量会导致完全不同的行为。它在功能上有所不同，只有在有特定理由时才应该这样做。例如：

```
class Thing(object):

    magic = "Magic"

    def __init__(self):
        pass 
```

现在尝试：

```
thingo = Thing()
Thing.magic = 1
# thingo.magic is now 1 
```

或者：

```
class Thing(object):

    magic = ["More", "magic"]

    def __init__(self):
        pass

thing1 = Thing()
thing2 = Thing()
thing1.magic.append("here")
# thing1.magic AND thing2.magic is now ["More", "magic", "here"] 
```

这是因为类本身的命名空间与从它创建的对象的命名空间不同。我会把它留给你去研究一下。

带回家的信息是，惯用的 Python 将 (a) 在您的`__init__`方法中初始化对象属性，并 (b) 根据需要记录您的类的行为。对于您编写的所有内容，您无需为完整的 Sphinx 级文档而烦恼，但至少对您或其他人可能需要了解的任何细节进行一些评论。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-06-22T15:29:48.033

出于范围界定的目的，我使用：

```
custom_object = None 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T03:12:16.607

变量有范围，所以是的，拥有特定于您的函数的变量是合适的。您不必总是明确说明它们的定义；通常你可以使用它们。只有当你想对变量的类型做一些特定的事情时，比如附加一个列表，你才需要在开始使用它们之前定义它们。这方面的典型例子。

```
list = []
for i in stuff:
  list.append(i) 
```

顺便说一句，这并不是设置列表的好方法。最好说：

```
list = [i for i in stuff] # list comprehension 
```

...但我离题了。

你的另一个问题。自定义对象应该是一个类本身。

```
class CustomObject(): # always capitalize the class name...this is not syntax, just style.
  pass
customObj = CustomObject() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-10T12:54:39.733

从 Python 3 开始，您可以按类型显式声明变量。

例如，要声明一个整数，可以这样做：

```
x: int = 3 
```

或者：

```
def f(x: int):
    return x 
```

有关它的更多详细信息，请参阅此问题： [Explicitly declaring a variable type in Python](https://stackoverflow.com/questions/4041764/explicitly-declaring-a-variable-type-in-python)**

# c# - 数据集对象有困难

> ID：11007628
> 
> 赞同：0
> 
> 时间：2012-06-13T02:54:12.553
> 
> 标签：c#, object, dataset

我已经使用断开连接的类创建了一个数据表，还创建了数据集、xml 文件，现在我想将该表加载到网格中。我在program.cs下编写了所有代码，但是当我尝试从表单加载方法访问数据集对象时，无法识别数据集对象。代码在这里：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Data;
using System.IO;

namespace DisconnectedClassDemo
{
    public class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]

        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());

            DataTable studentInfo = new DataTable("studentinfo");

            DataColumn StudentID = new DataColumn("studentID");
            StudentID.DataType = typeof(int);
            StudentID.Caption="StudentID";
            StudentID.AutoIncrement = true;
            StudentID.AutoIncrementSeed = 1;
            StudentID.AutoIncrementStep = 1;

            DataColumn Name = new DataColumn("StudentName", typeof(string));
            Name.MaxLength = 50;
            Name.AllowDBNull = false;
            Name.Caption = "StudentName";

            DataColumn Roll = new DataColumn("StudentRoll", typeof(int));
            Roll.Caption = "StudnetRoll";

            studentInfo.Columns.Add(StudentID);
            studentInfo.Columns.Add(Name);
            studentInfo.Columns.Add(Roll);

            studentInfo.PrimaryKey = new DataColumn[] { StudentID };

            //DataRow rowobj = studentInfo.NewRow();
            //rowobj["studentName"] = "Badhon";
            //rowobj["studentRoll"] = "004";

            //studentInfo.Rows.Add(rowobj);

            DataSet ds = new DataSet("dataset");
            ds.Tables.Add(studentInfo);

            ds.WriteXmlSchema("D:\\Student.xsd");
            ds.WriteXml("D:\\student.xml");

            ds.ReadXmlSchema("d:\\student.xsd");
            ds.ReadXml("D:\\student.xml");

        }
    }

}

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace DisconnectedClassDemo
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            //dataGridView1.DataSource= 
            //dataGridView1.DataMember=

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:04:10.243

为什么要将数据集写入文件系统？您不是在尝试创建内存数据集并访问该数据集吗？尝试在表单本身上声明数据集。

试试这个：

```
 DataTable studentInfo = new DataTable("studentinfo");

        DataColumn StudentID = new DataColumn("studentID");
        StudentID.DataType = typeof(int);
        StudentID.Caption = "StudentID";
        StudentID.AutoIncrement = true;
        StudentID.AutoIncrementSeed = 1;
        StudentID.AutoIncrementStep = 1;

        DataColumn Name = new DataColumn("StudentName", typeof(string));
        Name.MaxLength = 50;
        Name.AllowDBNull = false;
        Name.Caption = "StudentName";

        DataColumn Roll = new DataColumn("StudentRoll", typeof(int));
        Roll.Caption = "StudnetRoll";

        studentInfo.Columns.Add(StudentID);
        studentInfo.Columns.Add(Name);
        studentInfo.Columns.Add(Roll);

        studentInfo.PrimaryKey = new DataColumn[] { StudentID };

        DataSet ds = new DataSet("dataset");
        ds.Tables.Add(studentInfo);

        var rw = ds.Tables[0].NewRow();

        rw["StudentName"] = "Badhon";
        rw["StudentRoll"] = 004;

        ds.Tables[0].Rows.Add(rw);

        MessageBox.Show(ds.Tables[0].Rows.Count.ToString());

        dataGridView1.DataSource = ds.Tables[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:04:37.810

您在数据集之前创建表单

```
Application.Run(new Form1()); 
```

将此行向下移动到数据集的创建下方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:19:04.110

就像 Preet Sangha 所说，您在数据集之前创建和运行表单。

此外，数据集是 Main 方法中的局部变量，因此表单类不知道它。尝试在表单内创建数据集或将其作为参数传递给构造函数：

```
public class Form1(Dataset ds) : Form 
...

...

Application.Run(new Form1(ds)); 
```

# android - Android：Gridview图像打乱/混合

> ID：11007629
> 
> 赞同：1
> 
> 时间：2012-06-13T02:54:20.513
> 
> 标签：android, image, gridview, height

我想使用 gridview 来查看下面的屏幕截图。我尝试将 layout_height 设置为 wrap_content，显然，在滚动时，项目被打乱了。谁可以帮我这个事？提前致谢。

![在此处输入图像描述](../Images/2c342b876f3e2cb8e7b8abaff084f2ba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:58:14.877

您可以为所有图像使用一个固定高度。

# twitter-bootstrap - 转换选择 Twitter 引导程序

> ID：11007631
> 
> 赞同：1
> 
> 时间：2012-06-13T02:54:54.750
> 
> 标签：twitter-bootstrap

我正在尝试应用此脚本[http://blog.iamjamoy.com/convert-select-boxes-to-a-fancy-html-dropdown](http://blog.iamjamoy.com/convert-select-boxes-to-a-fancy-html-dropdown)将元素转换为引导下拉菜单

它在这一行在 IE 上中断

$(e).find('option').each(function(o,q) {

这是代码

```
$this.each(function(i, e){
        if (!($(e).data('convert') == 'no')) {

            //get some initial data...
            xSelect = $(e).attr('id');
            xLabel =  $("#"+xSelect +  " option:selected").text();
            xClass =  $(e).data('class');

            $(e).hide().wrap('<div class="btn-group" id="xSelect-group-' + i + '" />');
            var select = $('#xSelect-group-' + i);

            select.html('<a class="btn dropdown-toggle '+ xClass + '" data-toggle="dropdown" href="javascript:;">' + xLabel + ' <span class="caret"></span></a><ul class="dropdown-menu"></ul><input type="hidden" value="' + $(e).val() + '" name="' + $(e).attr('name') + '" id="' + $(e).attr('id') + '" class="' + $(e).attr('class') + '" />');

            $(":checkbox", this)
            $(e).find('option').each(function(o,q) {
                    select.find('.dropdown-menu').append('<li><a href="javascript:;" data-title="'+ $(q).text() +'" data-value="' + $(q).attr('value') + '">' + $(q).text() + '</a></li>');
                    if ($(q).attr('selected')) select.find('.dropdown-menu li:eq(' + o + ')').click();
            });
            select.find('.dropdown-menu a').click(function() {
                    select.find('input[type=hidden]').live().val($(this).data('value')).change();
                    select.find('.btn:eq(0)').html($(this).text() + ' <span class="caret"></span>');
            });
        }
    }); 
```

如果有人可以提供帮助，我将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T21:10:02.703

您可以使用[这个 JavaScript 插件](https://github.com/silviomoreto/bootstrap-select)。它隐藏`select`并在 HTML 中添加了一个下拉按钮。

它对我很有用。我在 IE8 上测试过，它可以工作。

# javascript - 我在哪里可以获得 javascript 国家世界地图的形状文件？

> ID：11007632
> 
> 赞同：0
> 
> 时间：2012-06-13T02:55:18.680
> 
> 标签：javascript, maps, raphael, shapefile

我需要找到一个可以下载 javascript 形状文件的地方。

我的意思是这个网站：

[http://raphaeljs.com/world/](http://raphaeljs.com/world/)

`raphael.js`与美国世界的形状文件一起使用：

[http://raphaeljs.com/world/world.js](http://raphaeljs.com/world/world.js)

我只想知道如何获取这个文件？？？

我需要澳大利亚和新西兰的 js 文件。如果我能把美国分成一种形状，把亚洲分成另一种形状，那也太好了，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T03:02:17.927

它是 SVG 文件，您必须使用 js 将矢量文件转换为绘图命令。您可以从此处将图像转换为 raphaeljs `http://readysetraphael.com/`。如果您想了解澳大利亚的形状，可以查看文件。像这样的东西

```
AT: "M510.996,97.278l-0.257,1.158l-1.545,0l0.643,0.643l-0.900, .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:10:59.580

Raphael 网站有一张澳大利亚地图，等待着您——在他们的示例页面上查看源代码：[http](http://raphaeljs.com/australia.html) ://raphaeljs.com/australia.html ，您可以看到所有的州坐标值。

# symfony - 用变量形成的 symfony 翻译键

> ID：11007638
> 
> 赞同：5
> 
> 时间：2012-06-13T02:55:54.593
> 
> 标签：symfony, key, translation, twig

在树枝模板中，是否可以在其中形成带有变量的翻译键？

像

`{% trans %}detail.label.price.{{membership}}.credit{% endtrans %}`

或者

`{% set str = "detail.label.price"+membership+".credit"|trans %}`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T06:16:53.693

```
{{ ('detail.label.price.' ~ membership ~ '.credit')|trans }} 
```

# android - 2.2 模拟器 - 应用程序关闭，无法解析虚拟方法？

> ID：11007639
> 
> 赞同：2
> 
> 时间：2012-06-13T02:56:40.677
> 
> 标签：android, actionbarsherlock

我一直在使用 actionbarsherlock，它运行良好，但我只是在 2.2 模拟器上尝试过，然后将此输出到 DDMS。该应用程序没有机会渲染一次，只是在调用某些 onCreate() 方法后立即关闭。有没有其他人看过这个？：

```
Style contains key with bad entry: 0x010102ce
Style contains key with bad entry: 0x010102f3
Style contains key with bad entry: 0x010102ce
Style contains key with bad entry: 0x010102f3
VFY: unable to resolve virtual method 4361: Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.onHoverEvent (Landroid/view/MotionEvent;)Z
VFY: unable to resolve virtual method 3077: Landroid/widget/FrameLayout;.getAlpha ()F
VFY: unable to resolve virtual method 3078: Landroid/widget/FrameLayout;.getTranslationY ()F
VFY: unable to resolve virtual method 3081: Landroid/widget/FrameLayout;.setAlpha (F)V
VFY: unable to resolve virtual method 3089: Landroid/widget/FrameLayout;.setTranslationY (F)V
VFY: unable to resolve virtual method 317: Landroid/content/pm/PackageManager;.getActivityLogo (Landroid/content/ComponentName;)Landroid/graphics/drawable/Drawable;
VFY: unable to resolve virtual method 313: Landroid/content/pm/ApplicationInfo;.loadLogo (Landroid/content/pm/PackageManager;)Landroid/graphics/drawable/Drawable;
VFY: unable to resolve virtual method 2832: Landroid/view/ViewGroup;.getAlpha ()F
VFY: unable to resolve virtual method 2838: Landroid/view/ViewGroup;.getTranslationX ()F
VFY: unable to resolve virtual method 2839: Landroid/view/ViewGroup;.getTranslationY ()F
VFY: unable to resolve virtual method 2854: Landroid/view/ViewGroup;.setAlpha (F)V
VFY: unable to resolve virtual method 2858: Landroid/view/ViewGroup;.setTranslationX (F)V
VFY: unable to resolve virtual method 2859: Landroid/view/ViewGroup;.setTranslationY (F)V
VFY: unable to resolve virtual method 5290: Lcom/actionbarsherlock/internal/widget/ActionBarView$HomeView;.onHoverEvent (Landroid/view/MotionEvent;)Z
VFY: unable to resolve virtual method 3080: Landroid/widget/FrameLayout;.onPopulateAccessibilityEvent (Landroid/view/accessibility/AccessibilityEvent;)V
ReferenceTable overflow (max=512)
Last 10 entries in JNI local reference table:
  502: 0x43ecaca0 cls=Ljava/lang/String; (28 bytes)
  503: 0x43ecacf0 cls=Ljava/lang/String; (28 bytes)
  504: 0x43ecad40 cls=Ljava/lang/String; (28 bytes)
  505: 0x43ecad90 cls=Ljava/lang/String; (28 bytes)
  506: 0x43ecade0 cls=Ljava/lang/String; (28 bytes)
  507: 0x43ecae30 cls=Ljava/lang/String; (28 bytes)
  508: 0x43ecae80 cls=Ljava/lang/String; (28 bytes)
  509: 0x43ecaed0 cls=Ljava/lang/String; (28 bytes)
  510: 0x43ecaf20 cls=Ljava/lang/String; (28 bytes)
  511: 0x43ecaf70 cls=Ljava/lang/String; (28 bytes)
JNI local reference table summary (512 entries):
    3 of Ljava/lang/Class; 164B (2 unique)
  507 of Ljava/lang/String; 28B (507 unique)
    1 of [Ljava/lang/String; 28B
    1 of [Ljava/lang/String; 2772B
Memory held directly by tracked refs is 17324 bytes
Failed adding to JNI local ref table (has 512 entries)
VM aborting 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T00:37:56.753

这是因为在 API 11 之前布局 simple_list_item_activated_1 不存在（[见帖子](https://stackoverflow.com/questions/5274577/android-compatibility-package)）。

要让应用程序运行，您可以基于[simple_list_item_activated_1](http://code.google.com/p/pangff-projects/source/browse/trunk/Api3.0/res/layout/simple_list_item_activated_1.xml?spec=svn11&r=11)创建一个新的列表布局，并在您的代码中使用它。

这是一个启动器：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:minHeight="?android:attr/listPreferredItemHeight"
/> 
```

这可以让代码运行，但它看起来不太正确，因为我删除了

```
android:background="?android:attr/activatedBackgroundIndicator" 
```

来自 API 11 定义。然后我继续用一些等效的代码替换它 - 见[帖子](https://stackoverflow.com/questions/5274982/setting-android-background-persistence-menu-bar-using-attribute-on-older-ver)

[这里](http://mobile.tutsplus.com/tutorials/android/android-compatibility-list-indicators-on-honeycomb/)有一个解释问题的教程。

# javascript - 使文本适合 SVG 元素（使用 D3/JS）

> ID：11007640
> 
> 赞同：13
> 
> 时间：2012-06-13T02:56:54.143
> 
> 标签：javascript, text, svg, d3.js

我想在我创建的矩形内写入文本，如下所示：

```
body = d3.select('body')

svg = body.append('svg').attr('height', 600).attr('width', 200)

        rect = svg.append('rect').transition().duration(500).attr('width', 150)
                        .attr('height', 100)
                        .attr('x', 40)
                        .attr('y', 100)
                        .style('fill', 'white')
                        .attr('stroke', 'black')

        text = svg.append('text').text('This is some information about whatever')
                        .attr('x', 50)
                        .attr('y', 150)
                        .attr('fill', 'black')​ 
```

但是，如您所见（[http://jsfiddle.net/Tmj7g/3/](http://jsfiddle.net/Tmj7g/3/)），文本被截断。在创建的 svg 矩形内写一个段落的任何漂亮方法？谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T08:58:14.233

[这个问题](https://stackoverflow.com/questions/4991171/auto-line-wrapping-in-svg-text)的答案可能是相关的。SVG 不提供自动包装文本的方法，但您可以在 SVG 中嵌入 HTML，然后使用`div`例如。

我在[这里](http://jsfiddle.net/Tmj7g/4/)更新了 jsfiddle ，但它与动画配合得不太好。如果你想让它正常工作并且表现得像任何其他 SVG 元素，你必须预先计算换行符并手动插入它们。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-12T15:02:17.490

要使其与动画一起使用，只需将其包含在一个组元素中并为其设置动画即可。 [http://jsfiddle.net/MJJEc/](http://jsfiddle.net/MJJEc/)

```
body = d3.select('body')
svg = body.append('svg')
                    .attr('height', 600)
                    .attr('width', 200);
    var g = svg.append('g').attr("transform" ,"scale(0)");
    rect = g.append('rect')
                    .attr('width', 150)
                    .attr('height', 100)
                    .attr('x', 40)
                    .attr('y', 100)
                    .style('fill', 'none')
                    .attr('stroke', 'black')
    text = g.append('foreignObject')
                    .attr('x', 50)
                    .attr('y', 130)
                    .attr('width', 150)
                    .attr('height', 100)
                    .append("xhtml:body")
                    .html('<div style="width: 150px;">This is some information about whatever</div>')

    g.transition().duration(500).attr("transform" ,"scale(1)"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-23T08:03:09.837

这种技术可能会派上用场。它适用于当前的 svg 规范并且没有 foreignObject 元素 [http://bl.ocks.org/mbostock/7555321](http://bl.ocks.org/mbostock/7555321)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-17T19:02:57.993

我有一个类似的问题，并通过计算我的盒子的宽度找到了一个合理的解决方案。其次，我发现当前字体的平均字符宽度约为 8。接下来，我只需在要显示的文本上创建一个子字符串。在大多数情况下，这似乎工作得很好。

```
var rectText = rectangles.append("text")
    .text(function(d) {

        TextBoxLength = timeScale(dateFormat.parse(d.endTime)) - timeScale(dateFormat.parse(d.startTime));
        return d.task.substring(0, Math.floor(TextBoxLength / 8));
    })
    .attr("x", function(d) {
        return (timeScale(dateFormat.parse(d.endTime)) - timeScale(dateFormat.parse(d.startTime))) / 2 + timeScale(dateFormat.parse(d.startTime)) + theSidePad;
    })
    .attr("y", function(d, i) {
        return d.position * theGap + 14 + theTopPad;
    })
    .attr("font-size", 12)
    .attr("text-anchor", "middle")
    .attr("text-height", theBarHeight)
    .attr("fill", "#000000"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-06T19:30:36.157

另一种方法，当尝试将直线文本放入 svg 元素时，可以使用[http://bl.ocks.org/mbostock/1846692](http://bl.ocks.org/mbostock/1846692)中的策略：

```
node.append("text")
  .text(function(d) { return d.name; })
  .style("font-size", function(d) { return Math.min(2 * d.r, (2 * d.r - 8) / this.getComputedTextLength() * 24) + "px"; })
  .attr("dy", ".35em"); 
```

# php - 如何将链接连接到编辑表单

> ID：11007645
> 
> 赞同：1
> 
> 时间：2012-06-13T02:57:05.077
> 
> 标签：php, sql-server

我需要一个允许用户编辑来自 SQL 数据库的数据的表单。

我的表单的主页包含一个表格，其中显示了任何可用数据，并且还有可用的*编辑*和*删除*选项。样本：

```
{
$row=mysql_fetch_array($result);
echo "<tr>";
echo "<td>".$row["name"]."</td>";
echo "<td>".$row["occuptation"]."</td>";
echo '<td><a href="edit.php"><img src="edit.png"/></a></td>';
echo '<td><a href="delete.php"><img src="delete.png"/></a></td>';
echo "</tr>";
} 
```

当用户单击时，`edit.png`我需要它指向`edit.php`所选整行中的数据（用户选择单击编辑或删除的那一行）以表单形式显示的位置（如默认值）。我不知道如何实现这一目标。

任何帮助表示赞赏！如果我感到困惑，请告诉我，我会尝试进一步解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T03:05:09.063

您要做的是在编辑和删除链接中包含一个标识符作为查询字符串参数：

```
echo '<td><a href="edit.php?id=' . $row["id"] . '"><img src="edit.png"/></a></td>';
echo '<td><a href="delete.php?id=' . $row["id"] . '"><img src="delete.png"/></a></td>'; 
```

（当然，我假设你的标识符的名称。但你明白了。）

这将告诉那些页面他们应该显示哪些记录。这些页面将通过以下方式获得标识符：

```
$_GET["id"] 
```

您需要考虑的几件事：

*   `$_GET["id"]`在尝试对其进行任何操作之前，请确保检查正确的标识符值。永远不要在没有检查的情况下假设它是有效的。
*   不要简单地将值连接到 SQL 字符串中。使用诸如[PDO 之](http://php.net/manual/en/book.pdo.php)类的东西来构建带有参数的查询。您在这里要避免的是一种称为[SQL 注入漏洞](http://php.net/manual/en/security.database.sql-injection.php)的东西。
*   在显示任何内容之前，请确保允许用户访问相关操作（编辑或删除）的相关记录。永远不要假设链接直接来自页面上的代码输出。任何人都可以轻松地手动更改`id`URL 中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:01:32.313

您可以做的是在 a 标签的 href 中包含数据

```
{
    $row=mysql_fetch_array($result);
    echo "<tr>";
    echo "<td>".$row["name"]."</td>";
    echo "<td>".$row["occuptation"]."</td>";
    echo '<td><a href="edit.php?name={$row['name']}&occupation={$row['occupation']}"><img src="edit.png"/></a></td>';
    echo '<td><a href="delete.php"><img src="delete.png"/></a></td>';
    echo "</tr>";
} 
```

如果还需要将数据发送到该脚本，则可以对 delete.php 执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T14:25:27.603

```
 $selectQuery = mysqli_query($database, "SELECT * FROM products");
   if($selectQuery){
              while ($row =mysqli_fetch_array($selectQuery)){
              <td><a href="delete.php?editid=<?php echo $row['id'];?>">
              <img src="delete.png"/></a></td><?php } }?>

echo '<td><a href="delete.php?id=' . $row["id"] . '"><img src="delete.png"/></a></td>'; 
```

# python - 将 IPv6 地址绑定到 Python 套接字作为源 IP 地址

> ID：11007646
> 
> 赞同：8
> 
> 时间：2012-06-13T02:57:16.423
> 
> 标签：python, sockets, ip, ipv6

我以前使用下面的代码将 IPv4 地址绑定到 Python 套接字作为源 IP 地址。

```
import socket
true_socket = socket.socket
def bound_socket(*a, **k):
    sock = true_socket(*a, **k)
    sock.bind((sourceIP, 0))
    return sock
socket.socket = bound_socket 
```

上面的代码是否适用于 IPv6 地址？如果没有，如何绑定 IPv6 地址？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T03:52:59.783

你可以试试这个，要获得一个 IPV6 地址，建议你使用`socket.getaddrinfo`它会返回所有不同的 IPV4 和 IPV6 地址，你可以将它们全部绑定或只绑定你想要/需要的任何一个。

```
import socket
def bound_socket(*a, **k):
    sock = socket.socket(*a, **k)
    if socket.AF_INET6 in a:
        if not socket.has_ipv6:
            raise ValueError("There's no support for IPV6!")
        else:
            address = [addr for addr in socket.getaddrinfo(source_ip, None)
                        if socket.AF_INET6 == addr[0]] # You ussually want the first one.
            if not address:
                raise ValueError("Couldn't find ipv6 address for source %s" % source_ip)
            sock.bind(address[0][-1])
    else:
        sock.bind((source_ip, 0))
    return sock 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T03:50:34.857

这应该可以解决问题...设置地址系列。

```
import socket
s = socket.socket(family=socket.AF_INET6)
s.bind(('::1', 1234)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T14:58:47.740

如果您真的想要一个广泛的解决方案，您可以扩展您的解决方案以使用`getaddrinfo()`：

```
import socket
l = socket.getaddrinfo(None, "", 0, socket.SOCK_STREAM, 0, socket.AI_PASSIVE)
for i in l: print i 
```

这给

```
(2, 1, 6, '', ('0.0.0.0', 0))
(10, 1, 6, '', ('::', 0, 0, 0)) 
```

这些是您应该使用以下参数创建套接字的参数：

```
s = socket.socket(i[0], i[1], i[2])
if i[0] == AF_INET6: s.setsockopt(socket.IPPROTO_IPV6, socket.IPV6_V6ONLY, 1)
s.bind(i[4]) 
```

现在你有和你有协议一样多的套接字，你可以使用它们。（唉，`IPV6_V6ONLY`在旧的 Windows 版本下不起作用......）

如果您有要绑定的给定主机名/IP，请执行

```
l = socket.getaddrinfo("mylocalIP", None, 0, socket.SOCK_STREAM, 0, socket.AI_PASSIVE) 
```

它将为您选择正确的地址/协议系列：

```
>>> socket.getaddrinfo("::1", None, 0, socket.SOCK_STREAM, 0, socket.AI_PASSIVE)
[(10, 1, 6, '', ('::1', 0, 0, 0))]
>>> socket.getaddrinfo("127.0.0.1", None, 0, socket.SOCK_STREAM, 0, socket.AI_PASSIVE)
[(2, 1, 6, '', ('127.0.0.1', 0))]
>>> socket.getaddrinfo("localhost", None, 0, socket.SOCK_STREAM, 0, socket.AI_PASSIVE)
[(10, 1, 6, '', ('::1', 0, 0, 0)), (2, 1, 6, '', ('127.0.0.1', 0))]
>>> socket.getaddrinfo("192.168.1.32", None, 0, socket.SOCK_STREAM, 0, socket.AI_PASSIVE)
[(2, 1, 6, '', ('192.168.1.32', 0))] 
```

等等

`2`vs`10`是`AF_INET`vs. `AF_INET6`; `socket.AI_PASSIVE`表示您需要此地址进行`bind()`ing。

# javascript - 如何通过索引（例如在数组中）引用特定的 jquery ui 选项卡

> ID：11007647
> 
> 赞同：1
> 
> 时间：2012-06-13T02:57:36.760
> 
> 标签：javascript, jquery, jquery-ui, dom

一个想法是，也许我应该创建一个数组，然后 .each() 所有选项卡以我想要的方式创建引用，但似乎已经有一种方法可以做到这一点，我只是可能不知道范围或语法。

例如，我有 $tabs.tabs() 并且我想更改给定索引的 AJAX URL 和标题，例如：

```
for (var x = index; x < (tab_counter - 1); x++) {  
    $tabs.tabs(x).text(!!$tabs.tabs(x + 1).text() ? $tabs.tabs(x + 1).text() : "Deleted");
    //is there a syntax to refer to tabs in this manner?
} 
```

$tabs 已初始化为 `var $tabs = $("#pages").tabs( ...`

假设 tab_counter 保持最新（它在添加和删除事件中递增和递减） - 如果我按照建议的方式尝试例如为了循环所有选项卡标题。语法中有什么我在这里遗漏的吗？eq() 似乎是正确的解决方案，但我怀疑我没有正确使用它。

`for (var x = 0; x < (tab_counter - 1); x++) {
 console.log($tabs.tabs.eq(x).text() + " @ index " + x);
}`

## 解决方案

```
$tabis = $('#pages ul li a');

for (var x = 0; x < tab_counter; x++) {  
  console.log($tabis.eq(x).text() + " at " + x);
}

/* Prints the text label of each tab within the selected list of tabs. */ 
```

感谢您的帮助 dbaseman 这正是我想要的。我在这个过程中学到了，所以我很感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:04:02.553

也许使用*[eq ？](http://api.jquery.com/eq/)*

```
$tabs.eq(x).text( ... ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:04:56.490

这些选项卡都具有`id`您可以选择的一致命名的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:12:07.107

一种解决方案是让您拥有从每个选项卡的 ID 返回对象的函数：

```
$tabs.tabs = function (index) {
        return $("#tab" + index);
} 
```

这假设您的选项卡具有“tab0”、“tab1”等 ID，但它可以与任何 ID 一起使用。

# javascript - 在Firefox中设置父级父级的iframe高度失败

> ID：11007648
> 
> 赞同：0
> 
> 时间：2012-06-13T02:57:39.783
> 
> 标签：javascript, iframe, cross-browser, cross-domain, parent

# 背景

此页面的关系和层次结构是：

-A.html（域：domain1.com）

----B.html（域名：domain2.com）

--------C.html（域：domain1.com）

更重要的是，

B.html 通过 iframe 被包含在 A.html 中（iframe 的 id 为“mainIframe”）；

C.html 通过 iframe 包含在 B.html 中（iframe 的 id 为“proxyIframe”）；

# 问题

我在 C.html 中有以下函数（带有 id “proxyIframe”的 iframe）：

```
function  updateHeight() {
    mainIframe = parent.parent.document.getElementById('mainIframe');
    newHeigh = parent.parent.frames["mainIframe"].frames["proxyIframe"].location.hash.substr(1);
    mainIframe.style.height = newHeigh;
}

function canUpdateHeight() {
    if(parent!=null && parent.parent!=null && parent.parent.document!=null &&
        parent.parent.document.getElementById('mainIframe')!=null && 
        parent.parent.frames["mainIframe"]!=null &&
        parent.parent.frames["mainIframe"].frames["proxyIframe"]!=null){
                 window.setInterval("updateHeight()", 200);
   }
} 
```

问题是：第二个函数内部的检查不会通过，所以第一个函数也不会被触发。请注意，这些功能在 IE7、Chrome11.x、Chrome16.x、Safari5.x 中有效，但在 Firefox 中存在问题。

# 问题

我想做的是使上述功能起作用，但目前我不知道现在有什么问题。使用“parent.parent”不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:18:46.717

我看到的问题是你不能`document.frames`在FF中使用。还要注意`parent`and总是存在的`parent.parent`，`parent.parent.parent.parent.parent.parent`即使没有框架，所以我认为很多这些条件都是不必要的。

尝试：

```
function  updateHeight() {
    var mainIframe = parent.parent.document.getElementById('mainIframe'),
        mainDoc = mainIframe.contentDocument || mainIframe.contentWindow.document,
        proxyIframe = mainDoc.getElementById('proxyIframe'),
        proxyDoc = proxyIframe.contentDocument || proxyIframe.contentWindow.document;
    newHeigh = proxyDoc.location.hash.substr(1);
    mainIframe.style.height = newHeigh;
}

function canUpdateHeight() {
    if(parent.parent.document.getElementById('mainIframe')
      && parent.document.getElementById('proxyIframe')) {
        window.setInterval(updateHeight, 200);
    }
} 
```

# jquery - 未使用图标和标签创建的 JQuery 按钮

> ID：11007651
> 
> 赞同：0
> 
> 时间：2012-06-13T02:58:07.757
> 
> 标签：jquery, button

我正在创建两个按钮以在对话框中使用，但它似乎不是我所做的，我无法让图标与文本一起显示。我可以在其他地方做到这一点。

这有效（几乎是从文档中复制和粘贴的：

```
$("#signout_button").button({label:"Sign Out", icons: { primary: 'ui-icon-key'}}); 
```

这不起作用：

```
 $("#dialog_link").dialog({draggable: true, title: "Are you sure?", show: "slide", modal: true, width:500,height:200,
                buttons: [{

                  label:'Yes, I am sure',
                  icons: { primary: 'ui-icon-alert' },
                  click: function(){
                    alert('well alrighty then');
                  }    
                },{
                  text:'No, please make it stop',
                  icons: { primary: 'ui-icon-alert' },
                  click: function(){
                    alert('well alrighty then');
                  }
                }]
              }); 
```

div已经存在并且非常简单

```
<div id="dialog_link"></div> 
```

我认为这是某种奇怪的语法错误。对话框弹出打开就好了，点击事件触发，所以 javascript 没有崩溃。

第一个按钮，这是我熟悉的方式，结果是一个没有图标和文本的按钮。第二个按钮是一个只有文字的图标。

我也试过：

```
text:true,
label: 'test label',
icons: {primary: 'ui-icon-alert'},
click: function(){ alert('testing');} 
```

渲染中的退出按钮同时带有图标和标签。这是对话框创建中的 JQuery 错误还是我错过了一些非常愚蠢和简单的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:13:35.223

似乎它没有内置对话框来创建带有图标的按钮。

空按钮的问题很简单：不要写“标签”，而是使用“文本”（就像你在第二个按钮上所做的那样）。

要使用图标，请参阅此解决方案[jQuery UI Dialog Button Icons](https://stackoverflow.com/questions/2525524/jquery-ui-dialog-button-icons)。我认为最后一个答案是最好的。

我把所有这些放在这个小提琴中，它可以工作：http: [//jsfiddle.net/GzeMT/](http://jsfiddle.net/GzeMT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:49:19.167

在浏览完 jQuery UI 代码之后，`Dialog`结果`Buttons`发现两者都使用不同的方式来创建按钮。`Dialog`小部件确实会调用该`Button`函数（小部件），但前提是它存在。因此，作为后备，它自己创建按钮并使用`text`通过选项传递的属性作为按钮的标签（而不是`label`小`button`部件使用的）。

`click`从其他属性来看，如果它被定义，它只对处理程序感兴趣。

```
props = $.isFunction( props ) ? { click: props, text: name } : props; 
```

任何其他属性都设置为`data`属性：

```
$.each( props, function( key, value ) {
    if ( key === "click" ) {
        return;
    }
    if ( key in attrFn ) {
        button[ key ]( value );
    } else {
        button.attr( key, value );//ANY PROPERTY LIKE ICONS SET AS DATA ATTR.
    }
}); 
```

在此之后，它会检查`button`小部件是否存在以及是否对其进行调用。

```
if ($.fn.button) {
    button.button();
} 
```

我尝试了一个简单的解决方法。如果`button`小部件存在，那么我们将传递我们为对话框选项中的按钮设置的所有属性。令我惊讶的是，它按预期工作:)

```
if ($.fn.button) {
button.button(props);//PASS OPTIONS FROM DIALOG BUTTON OBJECT HERE 
} 
```

# entity-framework - 如何使用 Entity Framework Code First 4.1 映射小对象图？

> ID：11007655
> 
> 赞同：0
> 
> 时间：2012-06-13T02:59:55.727
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first

我有一个非常小的对象图，我正在使用：

```
public struct Address
{
    public string AddressLine1 { get; set; }
    public string AddressLine2 { get; set; }
    etc...
}

public class User
{
    public Address HomeAddress { get; set; }
    public Address WorkAddress { get; set; }
    public string FirstName { get; set; }
    etc...
} 
```

使用 Entity Framework 4.1，我如何将此结构映射到一个表，以便它们映射到如下列：

```
HomeAddressLine1
HomeAddressLine2
WorkAddressLine1
WorkAddressLine2
FirstName
LastName
etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:04:51.700

EF doesn't support structures. You must use class for your Address and map it as complex type:

```
public class Address
{
    public string AddressLine1 { get; set; }
    public string AddressLine2 { get; set; }
}

public class User
{
    public int Id { get; set; }
    public Address HomeAddress { get; set; }
    public Address WorkAddress { get; set; }
    public string FirstName { get; set; }
}

public class Context : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder) 
    {
        modelBuilder.Entity<User>()
                    .Property(u => u.HomeAddress.AddressLine1)
                    .ColumnName("HomeAddressLine1");
        // Use the same pattern for all columns of HomeAddress and WorkAddress
    }
} 
```

# php - php防止页面刷新时数据重新加载

> ID：11007657
> 
> 赞同：0
> 
> 时间：2012-06-13T03:00:20.910
> 
> 标签：php, page-refresh

我有**类似**阻止表单数据重新发布的问题，**但不完全相同**。这个问题已经回答过很多次了。给出的建议，如标题重定向和会话，对我不起作用。我不知道他们失败是因为我的实施不正确，还是缺乏解决这个问题的经验，或者两者兼而有之。

我有一个 Intranet Web 应用程序，它在启动时会从不同的服务器中提取数据，对其进行转换，然后将其加载到应用程序本地的数据库中。发生的情况是，如果用户刷新主页，ETL 脚本会再次运行并复制数据。

如何防止 ETL 脚本重新运行？对于这个应用程序，没有理由刷新页面。如果可能的话，我是否应该完全阻止该页面上的刷新？我可能忽略了一些简单的事情。所以，我愿意接受建议。

更新：

我让这个测试代码在 index.php 页面上工作。因此，我将在此基础上制定解决方案。我会及时向大家发布。

```
session_start();
$_SESSION['views'] = 1; // store session data
echo "Pageviews = ". $_SESSION['views']; //retrieve data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:01:00.983

我已经为您概述了一个非常基本的示例，说明如何使用会话来确保您的脚本每次访问（每个用户）只运行一次。这里的关键点是，如果有超过 1 个用户使用系统，脚本仍然会运行不止一次。

为了解决这个问题，我只需使用您的本地数据库来跟踪脚本上次运行的时间。所以你可以在你的数据库中有一个日期时间列来跟踪上次“运行”的执行时间。

1.  因此，在您的 PHP 代码中（代替检查 $_SESSION）您将查询数据库以检索日期时间值
2.  获得最后一次运行日期/时间后，您将检查当前日期/时间是否超过允许的“更新时间”（例如 24 小时）
3.  如果时间超过了您分配的“更新时间”，例如 25 小时，代码将运行，您会将日期时间更新为 now()
4.  如果时间在您分配的时间之内，则不会发生任何事情，不会更新数据库并且您的脚本将不会运行。
5.  重复 3 - 4。

上述方法将使用户数量无关紧要，因为所有检查都将针对中央数据集（即您的数据库）执行。它也可能会更健壮一些，因为它将独立于浏览器和用户。

无论如何，这是一个会话（每个用户）方法：

```
<?php
/* 
 * Set PHP sessions to suit:
 * 
 * session.gc_maxlifetime is the number of seconds after which the data 
 * will be seen as garbage and cleaned up (session life) - 
 * 
 * Set to 86400 to in theory make the session last 24 hours - adjust this 
 * number to suit.
 * 
 * If this doesn't work you may have to try and adjust the php session lifetime
 * in either the php.ini file directly or htaccess file.
 * 
 */
ini_set('session.gc_maxlifetime',86400);
/* 
 * not strictly neccessary as this is default setting (but just to make sure)
 * This will keep the cookie alive (the link to your session) until the user
 * closes their browser. 
 * 
 * You could set it to > 86400 if you want that extra bit of certainity that 
 * the session will get renewed @ 24 hrs / the time you wanted to.
 */ 
ini_set('session.cookie_lifetime',0);
// Start PHP session
session_start(); 

// Check if the session is empty / exists (which it will be on first page entry)
if ( empty($_SESSION['hasVisited']) ) {

  /* 
   * Add your ETL script logic here:
   * 
   * This will only run on the first visit to the site
   */   
}

// Now set the session as the scripts have run once
$_SESSION['hasVisited'] = true;

// Continue on with your app...................................................

?> 
```

让我知道我是否错过了您尝试做的事情，或者您想对任何事情进行进一步解释？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:03:45.587

查看[POST/REDIRECT/GET 模式](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Handling-Online-Payments-Part-6-Preventing-Duplicate-Submissions/ba-p/11168)。（*免责声明，我是那篇文章的作者*）

# php - PHP 数组 - 分开相同的值

> ID：11007658
> 
> 赞同：7
> 
> 时间：2012-06-13T03:00:26.670
> 
> 标签：php, arrays, algorithm, sorting

有什么好的或标准的方法吗？

举个例子：

```
$values = array(
    'blue'
    , 'blue'    
    , 'blue'
    , 'blue'
    , 'green'
    , 'red'
    , 'yellow'
    , 'yellow'
     , 'purple'
    , 'purple'
    , 'purple'
); 
```

我需要将它分开，这样就不会接触两个相同的值（除非没有可能的解决方案——在这种情况下，要么产生错误，要么返回 false 或其他任何东西都是可以接受的）。

这是上面的数组（手工完成），但我试图改变它：

```
$values = array(
    'blue'
    , 'purple'
    , 'green'
    , 'purple'
    , 'blue'
    , 'red'
    , 'blue'
    , 'yellow'
    , 'blue'
    , 'yellow'
    , 'purple'
) 
```

这些值在开始时不一定是有序的——这只是为了简单起见。

有任何想法吗？有什么代码可以让我朝着正确的方向开始吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T03:43:16.377

这个函数应该可以解决问题：

```
function uniq_sort($arr){
    if(!count($arr))
        return array();

    $counts = array_count_values($arr);
    arsort($counts);
    while(NULL !== ($key = key($counts)) && $counts[$key]){
        if(isset($prev) && $prev == $key){
            next($counts);
            $key = key($counts);
            if($key === NULL)
                return false;
        }
        $prev = $result[] = $key;

        $counts[$key]--;
        if(!$counts[$key])
            unset($counts[$key]);

        arsort($counts);
        reset($counts);
    }
    return $result;
} 
```

示例用法：

```
$values = array('blue', 'blue', 'blue', 'blue', 'green', 'red', 'yellow', 'yellow', 'purple', 'purple', 'purple');
print_r(uniq_sort($values));

$values = array('a', 'b', 'b');
print_r(uniq_sort($values));

$values = array(1);
print_r(uniq_sort($values));

$values = array(1, 1, 1, 1, 2, 3, 4);
print_r(uniq_sort($values));

$values = array(1, 1, 1, 1, 2, 3);
var_dump(uniq_sort($values)); 
```

并输出：

```
Array
(
    [0] => blue
    [1] => purple
    [2] => blue
    [3] => yellow
    [4] => blue
    [5] => purple
    [6] => blue
    [7] => purple
    [8] => red
    [9] => yellow
    [10] => green
)
Array
(
    [0] => b
    [1] => a
    [2] => b
)
Array
(
    [0] => 1
)
Array
(
    [0] => 1
    [1] => 3
    [2] => 1
    [3] => 4
    [4] => 1
    [5] => 2
    [6] => 1
)
bool(false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:25:15.607

逻辑：

打印第一个值，在打印下一个之前，将其与前一个值进行比较，如果它们相同，则跳过下一个，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T03:15:34.517

```
$values = array(
        'blue'
        , 'blue'    
        , 'blue'
        , 'blue'
        , 'green'
        , 'red'
        , 'yellow'
        , 'yellow'
        , 'purple'
        , 'purple'
        , 'purple'
    );
    $value_count = Array();
    foreach($values as $v){
        if(isset($value_count[$v])){
            $value_count[$v]++;
        }else{
            $value_count[$v] = 1;
        }
    }
    unset($v);
    //Now generate new array 
    $result = Array();//This line is technically not necessary 
    $done = false;
    while(!$done){
        $done = true;
        foreach($value_count as $k => &$c){
            if($c > 0){
                $result[] = $k;
                $c--;
                $done = false;
            }
        }
    }
    print_r($result); 
```

这导致：

```
Array
(
    [0] => blue
    [1] => green
    [2] => red
    [3] => yellow
    [4] => purple
    [5] => blue
    [6] => yellow
    [7] => purple
    [8] => blue
    [9] => purple
    [10] => blue
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T03:06:25.130

沿着数组走下去，记住你看到的最后一个值，如果匹配就扔掉你正在查看的那个。[这是一个例子](http://codepad.org/ZlSCEcL3)：

```
$values = array(
    'blue'
    , 'blue'    
    , 'blue'
    , 'blue'
    , 'green'
    , 'red'
    , 'yellow'
    , 'yellow'
     , 'purple'
    , 'purple'
    , 'purple'
);

$last_seen_value = NULL;
foreach ($values as $i => $value) {
  if (0 == strcmp($value, $last_seen_value)) {
    unset($values[$i]);
  } else {
    $last_seen_value = $value;
  }
}

print_r($values);

# Output:
# 
# Array
# (
#     [0] => blue
#     [4] => green
#     [5] => red
#     [6] => yellow
#     [8] => purple
# ) 
```

# c++ - C++简单类声明程序

> ID：11007660
> 
> 赞同：0
> 
> 时间：2012-06-13T03:01:00.940
> 
> 标签：c++

在学校的 C++ 课程介绍中，我得到了一个用 C++ 创建的程序。我正在按照示例中的所有内容进行操作，但仍然出现错误。

给出了 w4x.cpp，我必须创建 Molecule.h 和 Molecule.cpp。我这样做了，但我收到错误，因为我的变量没有在范围内声明，但我不明白为什么。

```
// w4x.cpp

#include <iostream>
using namespace std;
#include "w4x.h"
#include "Molecule.h"

int main() {
    int n = MAX_MOLECULES;
    Molecule molecule[MAX_MOLECULES];

    cout << "Molecular Information\n";
    cout << "=====================" << endl;

    for (int i = 0; i < MAX_MOLECULES; i++) {
        if (!molecule[i].read()) {
            n = i;
            i = MAX_MOLECULES;
        }
        cout << endl;
    }

    cout << "Structure            Name                     Mass\n";
    cout << "==================================================" << endl; 

    for (int i = 0; i < n; i++)
        molecule[i].display();
}

//Molecule.h
const int MAX_STRUCT = 10;
const int MAX_NAME = 20;

class Molecule {
    char name[MAX_STRUCT];
    char rate[MAX_NAME];
    double weight;
public:
    Molecule();
    void read(const char*, const char*, double);
    void display() const;
    ~Molecule();
};

//Molecule.cpp     
#include <iostream>
#include <cstring>
using namespace std;
#include "Molecule.h"

Molecule::Molecule(){
    name[0]= '\0';
    rate[0]= '\0';
    weight = 0;
}

void::read(const char* n, const char* r, double w) {
    weight = w;
    strncpy (name, n, MAX_STRUCT);
    name[MAX_STRUCT]='\0';
    strncpy (rate, r, MAX_NAME);
    rate[MAX_NAME]='\0';
    cout << "Enter structure : ";
    cin.getline (n, MAX_CHARS);
    cout << "Enter full name : ";
    cin.getline (r, MAX_NAME);
    cout << "Enter weight : ";
    cin >> w;
}

void::display() const
{
    int x;
    for ( x=0; x<i; x++)
        cout << n << "      " << r << "        " << w << endl;
} 
```

我的第一个问题是，我怎样才能`char name[MAX_STRUCT]; char rate[MAX_NAME]; double weight;`从 Molecule.h 传递到 Molecule.cpp

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:57:36.927

您的定义存在问题：

```
void::read(const char* n, const char* r, double w) 
```

和这里

```
void::display() const 
```

这里`::`所说*的*是你正在一个类中实现一个函数。所以你需要指定哪个类和哪个函数！您现在要告诉它的是，您正在 class 内部实现一个函数`void`，这是不存在的。

您应该将它们转换为：

```
void Molecule::read(const char* n, const char* r, double w)
void Molecule::display() const 
```

* * *

您关于通过班级成员的其他问题：

一个类的函数可以访问它的变量，因此，你不需要关心这个。只需使用变量。

此外，如果您在 中注意到`w4x.cpp`，该函数`Molecule::read()`是在没有参数的情况下调用的，因此您的 TA 会要求您在没有参数的情况下实现它。实际上，由于您可以直接访问`Molecule::name`，`Molecule::rate`因此`Molecule::weight`您应该读取数据并写入这些变量，而不是询问参数。因此，您的读取函数将如下所示：

```
void Molecule::read()
{
    // read into name, rate and weight
} 
```

此外，`w4x.cpp`期望`read`报告它是否成功。这意味着您应该进行错误检查`Molecule::read`并`0`在没有错误或`-1`（例如）出现错误时返回。

# mysql - Drupal 7 中的数据库查询

> ID：11007661
> 
> 赞同：0
> 
> 时间：2012-06-13T03:01:08.213
> 
> 标签：mysql, drupal, drupal-7

我正在尝试在 drupal 中运行 db 查询，其中内容类型具有节点关联字段，并且我正在尝试获取该类型的所有注释，其中当前节点的 NID 与所述注释关联中指定的任何节点匹配场地。

一个视觉例子

Nodetype1 -- 节点关联字段

节点类型2

我想获取节点关联字段与当前加载的 Nodetype2 的 NID 匹配的所有 Nodetype1。

我当前的数据库查询是这样的：

```
db_query("SELECT * FROM field_data_field_promo_profile WHERE field_promo_profile_nid=".$N->nid); 
```

这什么也不返回，当我知道这样一个节点存在时，我也尝试删除 WHERE 语句，它返回一个像这样的数组：

```
DatabaseStatementBase Object ( [dbh] => DatabaseConnection_mysql Object ( [shutdownRegistered:protected] => [target:protected] => default [key:protected] => default [logger:protected] => [transactionLayers:protected] => Array ( ) [driverClasses:protected] => Array ( [SelectQuery] => SelectQuery [DatabaseSchema] => DatabaseSchema_mysql [MergeQuery] => MergeQuery [DatabaseTransaction] => DatabaseTransaction [UpdateQuery] => UpdateQuery [InsertQuery] => InsertQuery_mysql ) [statementClass:protected] => DatabaseStatementBase [transactionSupport:protected] => 1 [transactionalDDLSupport:protected] => [temporaryNameIndex:protected] => 0 [connectionOptions:protected] => Array ( [database] => cityhound_dev [username] => blahblah [password] => blahblah [host] => localhost [port] => [driver] => mysql [prefix] => Array ( [default] => ) ) [schema:protected] => DatabaseSchema_mysql Object ( [connection:protected] => DatabaseConnection_mysql Object *RECURSION* [placeholder:protected] => 0 [defaultSchema:protected] => public [uniqueIdentifier:protected] => 4fd7fba9e563e2.50177866 ) [prefixes:protected] => Array ( [default] => ) [prefixSearch:protected] => Array ( [0] => { [1] => } ) [prefixReplace:protected] => Array ( [0] => [1] => ) ) [queryString] => SELECT * FROM field_data_field_promo_profile ) 
```

任何人有一些想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:33:08.560

`db_query()`返回一个可迭代的对象，所以你只需要迭代它：

```
$result = db_query("SELECT * FROM field_data_field_promo_profile WHERE field_promo_profile_nid=".$N->nid);

foreach ($result as $row) {
  $entity_id = $row->entity_id;
  // etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:00:49.590

**您应该在查询中使用参数来防止 SQL 注入。**

例如上面的查询应该是这样的：

```
 $result = db_query("SELECT * FROM {field_data_field_promo_profile} p
   WHERE p.field_promo_profile_nid = :nid ", array(':nid' => $N->nid);

foreach ( $result as $row ) {
  $entity_id = $row->entity_id;
  // etc...
} 

```

# php - 使用 Pyro 列出 Dir 中的文件

> ID：11007666
> 
> 赞同：0
> 
> 时间：2012-06-13T03:01:35.127
> 
> 标签：php, pyrocms, pyro

**我想使用 PyroCMS 列出目录中的所有文件。**

使用 Files 模块，每个客户端都有自己的文件夹，该文件夹是他们的用户 ID

```
\files\clients\{ID}\ 
```

我需要这样的东西。

```
 {{ foreach file in { files:/clients/{{ user:id }} } }} 

     <a href="{{files:current_file_name_and_ext}}">{{files:current_file_name}}</a>

{{ endif }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:53:43.623

你应该能够做这样的事情......

```
{{ files:listing folder="/files/clients/{{ client_id }}" }}
  <a href="{{ url:site }}files/clients/{{ filename }}">Download {{ name }}</a>
{{ /files:listing }} 
```

您将需要设置 client_id 变量。你可以在你的控制器中设置它并使用：

```
$this->template
  ->set('client_id', $client_id)
  ->build('page-template-goes-here'); 
```

甚至使用带有标签的当前用户：

```
{{ user:id }} 
```

我还没有测试过这个，但你应该能够得到一些东西。

从这里：

[http://docs.pyrocms.com/2.1/manual/index.php/modules-and-tags/tag-reference/files](http://docs.pyrocms.com/2.1/manual/index.php/modules-and-tags/tag-reference/files) http://docs.pyrocms.com/2.1/manual/index.php/modules-and -标签/标签参考/用户

# python - 如何在python中修改导入的变量

> ID：11007667
> 
> 赞同：0
> 
> 时间：2012-06-13T03:01:35.250
> 
> 标签：python, django

在`a.py`中，我导入了 django 的`settings.py`，我需要修改`settings.DEBUG`。

但是如何在python脚本中做到这一点？

我这样做了，但没有任何改变，**`settings.DEBUG=False`**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T03:14:31.267

[https://docs.djangoproject.com/en/dev/topics/settings/#altering-settings-at-runtime](https://docs.djangoproject.com/en/dev/topics/settings/#altering-settings-at-runtime) 我认为这是你想要的。

就像它说的：

```
from django.conf import settings

settings.DEBUG = True   # Don't do this! 
```

`The only place you should assign to settings is in a settings file.`

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:37:18.877

您可能想对 django 进行“本地”设置的不同方式进行一些研究。

有很多不同的方法。[Modular Django Settings](http://schinckel.net/2012/02/01/modular-django-settings/)详细描述了我的操作方式。

# apache - Apache 301 RewriteRule 不起作用

> ID：11007668
> 
> 赞同：1
> 
> 时间：2012-06-13T03:01:41.703
> 
> 标签：apache, mod-rewrite, redirect

我有各种各样的重定向，大多是更复杂的，以这种格式工作。然而，这个简单的重定向不是。

RewriteCond %{QUERY_STRING} ^id=461$ [NC] RewriteRule page.asp [http://www.website.com/legal-notices](http://www.website.com/legal-notices) [R=301,L]

我试过重定向 301 和其他东西，但它不起作用

我试图让 /page.asp?id=461 重定向到 /legal-notices/

有什么帮助吗？谢谢

# fuelphp - FuelPHP $_many_many 带有 where 子句

> ID：11007670
> 
> 赞同：1
> 
> 时间：2012-06-13T03:02:22.143
> 
> 标签：fuelphp

我在 FuelPHP 中有一个多对多的关系，如下所示：

```
 protected static $_many_many = array(
    'members' => array(
        'key_from' => 'team_id',
        'key_through_from' => 'team_id', 
        'table_through' => 'user_has_team', 
        'key_through_to' => 'user_id',
        'model_to' => 'Model_User',
        'key_to' => 'id',
    )
); 
```

但我想知道你是否可以在关系中使用 where 子句。例如：

```
 protected static $_many_many = array(
    'members' => array(
        'key_from' => 'team_id',
        'key_through_from' => 'team_id', 
        'table_through' => 'user_has_team', 
        'key_through_to' => 'user_id',
        'model_to' => 'Model_User',
        'key_to' => 'id',
        'where' => array('account_status' => 'active')
    )
); 
```

所以它只返回其 account_status 设置为“活动”的 Model_User 对象。我知道这有点推动它，但燃料在许多其他方面都很棒，所以我认为可能有办法做到这一点。

显然你可以通过查询来做到这一点，但我想知道是否有办法使用 $_many_many

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:55:42.703

```
public function action_your_function_where_you_call_the_user_model()
{

    $user = Model_User::find()->where('account_status', 'active')->get();   

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:57:26.413

派对迟到了，但是对于在搜索中点击这个的人来说：

您可以在关系定义上定义条件。目前支持“where”和“order_by”子句。

这种情况是永久性的，您无法打开或关闭它们。因此，如果您需要对相关模型的完全访问和过滤访问，则必须定义两个关系。

有关更多信息，请参阅[http://fuelphp.com/docs/packages/orm/relations/intro.html#usage_rel_conditions](http://fuelphp.com/docs/packages/orm/relations/intro.html#usage_rel_conditions)。

# android - 有没有办法在小部件上放置一个“屏幕”？

> ID：11007672
> 
> 赞同：0
> 
> 时间：2012-06-13T03:02:39.433
> 
> 标签：android

我有几个小部件、`TextView`、`Button`、和。我希望能够单击这些小部件并打开而不是与实际的小部件交互。我的想法是把小部件放在他们自己的里面，然后放在上面，但这似乎只适用于. 有没有办法将小部件放在小部件的前面，以便它获得点击而不是小部件？还是有其他想法？`SeekBar``EditText``RadioButton``DialogBox``LinearLayout``ClickListener``LinearLayout``TextView``LinearLayout`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T04:20:29.077

您可以创建一个活动并将其设置为对话框主题

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

然后你要做的就是激发你的意图，它会在你的 Z 层顶部弹出一个对话框。另外，如果您需要从 DialogActivity 返回信息，您可以 startActivityForResult()。

# asp.net - 使用两个表 asp.net vb 更新查询

> ID：11007675
> 
> 赞同：0
> 
> 时间：2012-06-13T03:03:24.020
> 
> 标签：asp.net, sql, vb.net, ms-access

请帮我解决这个更新查询。我完全理解这是多么多余，但我需要它。在用户创建一个仅包含 ID、用户名、密码和 CustomerID 的用户帐户时，我还必须在客户中创建一个记录，但所有内容都为空，并且 User.User_Customer_ID 必须更新为新创建的 Customer.Customer_ID

除了这个讨厌的更新查询，我一切正常。它唯一需要做的就是将 User.User_Customer_ID 更改为 Customer.Customer_ID 我设法将 User.User_ID 记录在一个名为 UserID 的整数中，将 Customer.Customer_ID 记录在一个名为 CustomerID 的整数中 我已经尝试了一百万种不同的方法，但没有成功

这是我尝试过的众多查询之一。

```
1\. UPDATE [User]
   SET User_Customer_ID = Customer.Customer_ID
   FROM Customer
   WHERE [User].User_ID = '16'
   AND Customer.CUstomer_ID = '19'
  ( ? would be the integer UserID and CustomerID ) 
```

这是它在 VB 中插入 SQL 命令之前的样子

```
 UpdateUserCustomerID = "UPDATE [User] SET User_Customer_ID = Customer.Customer_ID FROM Customer WHERE ([User].User_ID ='" & UserID & "' AND Customer.Customer_ID = '" & CustomerID & "')" 
```

访问数据库 / ASP.Net / VB

```
Table:

Customer:

Customer_ID
Customer_First_Name
Customer_Last_Name
Customer_Street_Address
Customer_City
Customer_State
Customer_Zip
Customer_Email

User:

User_ID
User_UserName
User_Password
User_Customer_ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:45:56.040

在我看来，ID 不太可能是文本字段（列），如果它们是数字字段，引号是问题之一。

据我所知，这是：

```
"UPDATE [User] SET User_Customer_ID = Customer.Customer_ID FROM Customer WHERE ([User].User_ID ='" & UserID & "' AND Customer.Customer_ID = '" & CustomerID & "')" 
```

应该：

```
"UPDATE [User] SET User_Customer_ID = " & CustomerID _
& " WHERE ([User].User_ID = " & UserID 
```

# git - How can I host Git repositories and manage my content-hosting myself?

> ID：11007679
> 
> 赞同：2
> 
> 时间：2012-06-13T03:03:53.730
> 
> 标签：git, repository, gitolite

Things such as Github, Bitbucket, DropBox -- manages the content-hosting such as tickets and repo -hosting (DB not tickets but can be used to store repos). I want a solution where I manage myself the content-hosting of thing such as Git -repositories and tickets.

> **Trial 0: trying to tune Git, too time-consuming**
> 
> > I followed the instructions [here](http://git-scm.com/book/en/Git-on-the-Server-Getting-Git-on-a-Server) but some difficulties then I followed a lot of other tutorials with much more difficulties. I got cloning with `"git clone --bare xxx xxx.git; cd xxx; git update-server-info"` working but unable to push things with `"--shared"`, got fed up to this kind of manual hacks. There is too much material, too much irrelevant material and too much outdated material.

I repeat I want to do the content-hosting myself. So how can I host my git repos?

**Perhaps related**

> 1.  [Git repository server I can host locally](https://stackoverflow.com/questions/722765/is-there-a-git-repository-server-i-can-host-locally)
>     
>     
> 2.  [Recommendation for code hosting of personal projects](https://stackoverflow.com/questions/1109055/recommendation-for-code-hosting-of-personal-projects)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T04:14:43.743

If you're running a Linux server an option is to use Git + SSH.

**On The Server**

1.  Create a user account called `git` which has permissions over your main git project directory. This is useful for allowing all collaborators to push on shared projects.

2.  Add the RSA public key for each of your client machines to the `authorized_keys` file on the server. (You can generate a private-public key pair using `ssh-keygen -t rsa -b 4096` on most Linux distributions.)

3.  Create a new bare repository for your project as the `git` user. `git init myproject --bare`

**On the Client**

1.  Turn on private key authentication by enabling the `IdentifyFile` in your `ssh_config`.

2.  Clone the bare repository. `git clone git@<server>:/var/git/myproject`

3.  Make your changes.

4.  Commit the changes and push them back to the remote repo. `git push origin master`

If you need more specific instructions (such as the exact commands to create a user account) checkout the official [Pro Git](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server) book.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T03:03:55.227

I would go with Gitolite (manages the permissions) [here](http://sitaramc.github.com/gitolite/) and Redmine (manages the workflow over many repos) [here](http://www.redmine.org/). If you have no need for permission -management, please, go with Michael's solution. If you do not need to manage many repos, forget Redmine (useful with many repositories). The stuff here contain the same stuff as in Michael's answer but in third-party sites and some additions that you may need when your projects expand.

**0\. Git + SSH -keypair (Please, see the Michael's answer and below some outlining.)**

> If you are unable to do this, do not proceed forward -- this method shows the basic way of using bare -repos to content-host your repos. It takes some 2 minutes' time to do it, simply:
> 
> > **On server**
> > 
> > ```
> > $ git init --bare test.git 
> > ```
> > 
> > **On client**
> > 
> > ```
> > $ eval `ssh-agent`
> > $ ssh-add ~/your_auhorized_key_in_server
> > $ git clone something@IP:test.git 
> > ```

**1\. Gitolite (managing perms of a team with different skills)**

> 1.  excellent step-by-step tutorial [here](https://sites.google.com/site/senawario/home/gitolite-tutorial) (notice the `"~/.ssh/authorized_keys"` -file must have only gitolite -user)
>     
>     
> 2.  check out repository -addition/removal [here](http://sitaramc.github.com/gitolite/qi.html), yes it is that simple -- you just configure the config -file and then `"$ git add .; git commit -m "new repos, old dead"` and `"$ git push"`
>     
>     
> 3.  `"$ ssh gitolite@xxx.yy.112.239 info"` shows you the configuration
>     
>     
>     
>     ```
>      hello hhh, this is gitolite@ip-10-xxx-xx-203 running gitolite3 v3.03-29-g3c0f177 on git 1.7.4.5
>     
>              R W    helloworld
>              R      gitolite-admin
>              R W    testing 
>     ```
>     
>     
> 4.  Cloning a repository under gitolite
>     
>     
>     
>     `$ git clone gitolite@176.34.112.239:helloworld`

**2\. Redmine/Trac/etc (managing workflow over repos in a central GUI place)**

> Instructions [here](http://www.redmine.org/projects/redmine/wiki/RedmineInstall) for Redmine and be sure not to clone the unstable development branch in Github. You need to download some stable archieve. However, I would probably go with Trac, comparison [here](https://stackoverflow.com/questions/5881578/trac-vs-redmine). Redmine was some Rails -hack and unstable master -branch does not sound good.

**3\. Ticgit/etc (managing tickets without thirdparty dependencies)**

> Bremner outlined this issue [here](http://www.cs.unb.ca/~bremner/blog/posts/git-issue-trackers/) but notice this ticket [here](https://github.com/jeffWelling/ticgit/issues/57), things still in very bad shape. General thread [here](https://stackoverflow.com/questions/11218069/version-control-for-tickets).

# android - 最佳 ActionBar 兼容性库

> ID：11007682
> 
> 赞同：0
> 
> 时间：2012-06-13T03:03:58.223
> 
> 标签：android, android-actionbar

我正在编写一个 Android 应用程序，我正在尝试选择要选择哪个兼容性库来实现 ActionBar 功能。

我正在尝试在两个库之间进行选择：

绿色机器人：[https ://github.com/cyrilmottier/GreenDroid](https://github.com/cyrilmottier/GreenDroid)

安卓操作栏：[https ://github.com/johannilsson/android-actionbar](https://github.com/johannilsson/android-actionbar)

据我所知，AA（Android-Actionbar）似乎更简单，更容易设计。但 GreenDroid 具有其他功能，使其成为更强大的解决方案（不仅仅是操作栏）。

我省略了 ActionBarSherlock 因为它也支持片段，更复杂。

如果还有其他我错过的，请分享！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T03:19:37.573

使用 ActionBarSherlock。

它基于 ICS 代码，正在积极开发，在 ICS 上运行时将使用本机操作栏。它还可以很好地与兼容性库配合使用，并允许您使用 ICS 功能，例如拆分操作栏和共享提供程序。可能最大的优点是它使用与 ICS 完全相同的 API。如果你不需要碎片，你当然不必使用它们。

[Green Droid 提供自定义的外观和感觉，与 Android UI设计指南线](http://developer.android.com/design/index.html)不完全一致。Android-Actiobnar 基于自定义布局，仅提供基本功能。

这是一个讨论（可能有偏见，因为它是由 ABS 作者提出的）：[http ://corner.squareup.com/2012/05/actionbarsherlock-as-a-base.html](http://corner.squareup.com/2012/05/actionbarsherlock-as-a-base.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T04:48:16.297

当然，Android-Actionbar 更好。想不出其他的，但我敢肯定有。

# android - 如何在android的文本框中显示当前时间

> ID：11007683
> 
> 赞同：0
> 
> 时间：2012-06-13T03:04:00.237
> 
> 标签：android

在我的应用程序中，我需要在 texview 中显示当前日期和时间。文本视图应设置为每分钟更新一次。我不想显示秒。谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T03:11:45.907

```
String mydate = java.text.DateFormat.getTimeInstance().format(Calendar.getInstance().getTime()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:50:44.190

您通过使用获取日期

```
String mydate =     java.text.DateFormat.getTimeInstance().format(Calendar.getInstance().getTime()); 
```

您可以通过使用在 TextView 中设置此值，

```
TextView textView=  (TextView)findViewById(R.id.textViewName);
textView.setText(mydate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:22:45.087

将此复制到您的班级中。

```
private RefreshHandler mRedrawHandler = new RefreshHandler();

class RefreshHandler extends Handler {
@Override
public void handleMessage(Message msg) {
String curDateTime = DateFormat.getDateInstance().format(Calendar.getInstance().getTime());
((TextView)findViewById(R.id.textView1)).setText(curDateTime);
sleep(60000); }

public void sleep(long delayMillis) {
this.removeMessages(0);
sendMessageDelayed(obtainMessage(0), delayMillis);
    }
} 
```

然后在onCreate中，调用mRedrawHandler.sleep(delay);

# opengl - 矩形的旋转和平移

> ID：11007687
> 
> 赞同：1
> 
> 时间：2012-06-13T03:04:39.703
> 
> 标签：opengl, rotation, translation, transform, coordinate-transformation

在这里，我想知道一个矩形是否可以在旋转和平移后保持矩形。我的例子如下：

原矩形的四个角点为s1(-1,-1,2), s2(-1,1,2), s3(1,1,2), s4(1,-1,2)；

我的整个变换是平移和旋转，所以我使用 glTranslate 和 glRotate 来获取变换矩阵：

```
GLfloat modelView[16]; //transform the rectangle
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();
//because of column-major order, here should be rotation first and then translation
glRotatef(-rotationAngel, rotationVector[0], rotationVector[1], rotationVector[2]);
glTranslatef(tranV[0], tranV[1], tranV[2]); 
glGetFloatv(GL_MODELVIEW_MATRIX, modelView); 
glPopMatrix(); 
```

在我的真实程序中，rotationAngel = 62, rotationVector = (-0.34, 0.81, 0), tranV = (0.46, 1.70, 0.059);

然后我使用矩阵“modeView”来计算我的结果矩形的四个角点：

```
sp1.x = s1.x*modelView[0] + s1.y*modelView[4] + s1.z*modelView[8] + modelView[12];
sp1.y = s1.x*modelView[1] + s1.y*modelView[5] + s1.z*modelView[9] + modelView[13];
sp1.z = s1.x*modelView[2] + s1.y*modelView[6] + s1.z*modelView[10] + modelView[14]; 
```

其他三个 sp2 sp3 sp4 的计算方法相同。

然而，结果令人困惑。它们不再是矩形了。

```
sp1 = (-2.10, -0.038, 0.77);
sp2 = (-2.48, 1.88, 1.45);
sp3 = (-1.38, 1.50, 3.08);
sp4 = (-1.01, -0.34, 2.39); 
```

很明显，在OpenGL中画出来后，四个角点不能组成一个矩形。

所以我想知道为什么？平移和旋转不能保证矩形不变？以及如何在这些转换后使矩形保持矩形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:19:09.413

平移和旋转是称为[刚性变换](http://www.math.ubc.ca/~cass/graphics/manual/pdf/ch12.pdf)的变换类型，它们保持顶点之间的距离和方向，因此，基本上，在平移和旋转之后，矩形应该保持其形状。

实际上你的代码没有问题，如果你计算任意一对连续顶点之间的距离（*d = sqrt(<v1 - v0, v1 - v0>)*，其中*<x, y>*表示内积），你得到 2 ，这是变换前矩形中任意一对连续顶点之间的原始距离，如果您采用归一化向量*(sp2 - sp1)*和*(sp4 - sp1)*的点积，则结果非常接近 0（由于浮动误差），这表明成形角非常接近 90 度。所以，在转换之后，你仍然会在空间中得到一个矩形。

# zend-framework - 表单元素中的填充属性未传递其值

> ID：11007689
> 
> 赞同：0
> 
> 时间：2012-06-13T03:04:51.793
> 
> 标签：zend-framework, zend-form

我正在创建一个表单文本字段，但想设置一个名为的附加属性，`additional`以便 html 标记看起来像这样。

```
<dd id="email-element">
   <input type="text" value="" id="email" name="email" additional="">
</dd> 
```

我可以`setAttrib`像这样设置属性。

```
$email = new Zend_Form_Element_Text('email');
$email->setAttrib('additional', '');
$this->addElement($email); 
```

然后我`additional`通过ajax在客户端设置值。但是当表单提交时，`additional`显示为空。当我 var_dump 表单时，我可以将其视为此表单字段的属性，但它是空的。此外，当我 var_dump 请求时，它不在它上面（这是可以理解的，因为它是一个属性，而不是字段值本身）。有没有办法读取在客户端更改的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:13:55.127

PHP 无法读取在浏览器中修改的表单属性，但您可以在客户端读取它并将其发送回 PHP。提交的唯一数据是元素值本身。

如果您需要 PHP 中的属性，添加一个名为`additional`（或任何您喜欢的）的隐藏输入，并且在表单的`onsubmit`事件期间，您可以读取属性的值，并填充隐藏元素，然后提交表单。请注意，如果客户端禁用了 Javascript，则该值将不会通过，但可以使用该方法读取它并将其发送到服务器。

希望有帮助。

# php - 需要类似于“另存为”对话框的解决方案来使用 javascript 选择文件名和位置？

> ID：11007693
> 
> 赞同：0
> 
> 时间：2012-06-13T03:05:30.407
> 
> 标签：php, javascript, fwrite

我需要在 php 中使用 fwrite 函数将文件存储在用户选择的位置。我只是好奇，如果有什么方法可以让我在 javascript 中显示类似于“另存为”对话框的内容来选择文件名和要保存的位置，以便我可以将此名称发送到 php 并使用它作为 fwrite 函数的参数。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:11:21.450

您可以使用 Ajax 创建类似的东西：打开一个对话框，调用 php`scandir`来获取目录结构，返回它并在您的对话框中绘制。最后在用户选择路径时上传文件。

您可以 DIY，或使用像[http://ckfinder.com/demo这样的免费 3rd 方插件](http://ckfinder.com/demo)

# c++ - 在 C 中模拟访问说明符

> ID：11007699
> 
> 赞同：5
> 
> 时间：2012-06-13T03:05:58.743
> 
> 标签：c++, c, oop

是否可以在 C 中模拟 C++ 访问说明符 [public、private、protected]？更一般地说，C++ 编译器如何确保类的私有成员不被非成员函数访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T03:08:36.003

C++ 访问控制完全是编译器的想象：你不能访问私有成员，因为编译器会拒绝编译任何试图这样做的代码。

访问 C++ 类的私有成员实际上相当简单，方法是诱使编译器认为指向 的实例的`ClassWithPrivateMember`指针实际上是指向`ClassWithPublicMember`访问你不应该访问的东西。不是说有人做过这样的事……

在 C 中进行访问控制的最佳方法是传递指向不透明类型的指针：`struct`客户端代码无法使用其定义的对象。如果你提供一个`foo* create_foo()`方法和一系列对 进行操作的方法，对客户端`foo*`隐藏 的实际定义`foo`，那么你将达到类似的效果。

```
// File "foo_private.h"
struct foo {
    int private1;
    char private2;
};

// File "foo.h"
typedef struct foo foo;
foo * create_foo(int x, char y);
int mangle_foo(foo *);

// file "foo.c"
#include <stdlib.h>
#include "foo.h"
#include "foo_private.h"

foo * create_foo(int x, char y) {
    foo * f = (foo *) calloc(1, sizeof(foo));
    f->private1 = x;
    f->private2 = y;
}    

int mangle_foo(foo *f) {
    return f->private1 + f->private2;
} 
```

现在，您将`foo.c`编译后的文件与`foo.h`. 声明的函数`foo.h`形成一个类型的公共接口，但该类型的内部结构是不透明的；实际上，调用的客户`create_foo()`不能访问`foo`对象的私有成员。

我们的朋友`FILE*`是类似的东西，除了类型`FILE`通常不是真正不透明的。只是大多数人（明智地）不会戳穿它的内脏。在那里，访问控制仅通过默默无闻来实施。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T03:37:11.617

我强烈建议不要使用另一个答案中建议的 void* 指针*（因为已修复）*，这会丢弃所有类型安全。您可以改为`struct foo;`在标头中进行前向声明而不指定内容，然后您可以将这些结构和指向它们的指针传入和传出标头中声明的接口函数。结构实现隐藏在该单元的 .c 文件中。

如果您想保留在结构和其他类型（例如 int）之间进行更改的选项，可以`typedef`在标头中使用来包装接口的类型。

您可以使用的其他技术包括在该 .c 文件中声明函数，`static`以便它们无法从其他源链接，即使这些其他源声明了该函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T03:41:48.533

有很多方法可以实现目标，以下是我的：

该示例包括一个类“struct test_t”和一个类函数“test_create”和一个成员函数“print”

测试.h：

```
struct test_t {
    // Member functions
    void (*print)(struct test_t *thiz);

    // Private attributes
    char priv[0];
};

// Class functions
struct test_t *test_create(int number); 
```

测试.c：

```
#include "test.h"
#include <stdio.h>
#include <stdlib.h>

// priv attr
struct test_priv_t {
    int number;
};

// member functions
static void print(struct test_t *thiz)
{
    struct test_priv_t *priv = (struct test_priv_t*)thiz->priv;
    printf("number = %d\n", priv->number);
}

// Class functions
struct test_t *test_create(int number)
{
    struct test_t *test = (struct test_t *)malloc(sizeof(struct test_t) + sizeof(struct test_priv_t));

    // setup member function
    test->print = print;

    // initialize some priv attr
    struct test_priv_t *priv = (struct test_priv_t*)test->priv;
    priv->number = number;

    return test;
} 
```

主.c：

```
#include "test.h"

int main()
{
    struct test_t *test = test_create(10);
    test->print(test);
} 
```

# android - Android：如何从要下载的图像的 URL 中获取文件日期？

> ID：11007702
> 
> 赞同：0
> 
> 时间：2012-06-13T03:06:16.327
> 
> 标签：android, url, date

我想查询服务器以查看日期是否与我之前下载的手机上的日期不同。如果我已经拥有它，我想避免再次不必要地下载图像。寻找一种无需再次下载图像即可获取远程 URL 文件日期和时间的方法。下面的代码获取所有。

```
 File root = Environment.getExternalStorageDirectory();
   URL u = new URL(url);
   HttpURLConnection c = (HttpURLConnection) u.openConnection();
   c.setRequestMethod("GET");
   c.setDoOutput(true);
   c.connect();
   InputStream in = c.getInputStream();
   Drawable d = Drawable.createFromStream(in, "src name");
   printi("Content length",c.getContentLength()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:40:52.860

```
 File root = Environment.getExternalStorageDirectory();
   URL u = new URL(url);
   HttpURLConnection c = (HttpURLConnection) u.openConnection();
   c.setRequestMethod("HEAD");

   c.connect();
   InputStream in = c.getInputStream();
   long dt=c.getLastModified();  //File Modified Date!!!
   printtime("File Time ",dt);
   c.disconnect();       //close connection  ???? 
```

# android - Android glShaderBinary

> ID：11007707
> 
> 赞同：4
> 
> 时间：2012-06-13T03:06:40.327
> 
> 标签：android, opengl-es-2.0, shader, binaryfiles

与[此问题](https://stackoverflow.com/questions/5440430/iphone-glshaderbinary)类似，但适用于 Android：

Android GLES20 支持一个方法 glShaderBinary，它基于[这个 gles 文档](http://www.opengl.org/sdk/docs/man4/xhtml/glShaderBinary.xml)将加载预编译的着色器二进制文件。但是，我无法找到任何方法来实际*预编译*任何二进制文件。但是，当我`GLES20.glGetIntegerv`使用参数 name调用时`GLES20.GL_NUM_SHADER_BINARY_FORMATS`，它确实表明（至少在我正在测试的设备上）存在一种可用的着色器二进制格式。我只是不知道如何实际使用它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T05:33:32.510

二进制着色器格式是特定于供应商的。对于每个不同的供应商，都有不同的机制将着色器编译为二进制文件。因此，要支持大多数 Android 设备，您需要为特定供应商离线编译着色器，或者在线编译（使用[GL_OES_get_program](http://www.khronos.org/registry/gles/extensions/OES/OES_get_program_binary.txt)二进制扩展），当然还需要提供 glsl 源作为后备。

以下是一些流行的 GPU 供应商提供的 OpenGL ES 2.0 SDK 列表。它要么包括离线 GLSL 着色器编译器，要么包括有关二进制 GLSL 着色器的文档：

*   [ARM Mali OpenGL ES 2.0 SDK](http://www.malideveloper.com/developer-resources/opengl-es-20-sdk.php) - 例如用于 Galaxy S II
*   [Qualcomm Adreno SDK](https://developer.qualcomm.com/mobile-development/mobile-technologies/gaming-graphics-optimization-adreno/tools-and-resources) - 例如用于 Nexus One、HTC Desire、HTC Legend
*   [ImgTec PowerVR Insider SDK](http://www.imgtec.com/powervr/insider/sdkdownloads/index.asp) - 例如用于 Galaxy Nexus、LG Optimus 3D、Galaxy Tab

ARM Mali 提供`malisc`可执行文件，可以在主机上的命令行中编译着色器。

Qualcomm Adreno 实际上允许在运行时使用 GLSL 着色器的二进制文件`glGetProgramBinaryOES`，但不能离线。至少 Adreno SDK 中的文档是这样说的。

PowerVR SDK 还声明其 GPU 允许在运行时使用`glGetProgramBinaryOES`.

`glGetProgramBinaryOES`函数来自[GL_OES_get_program_binary](http://www.khronos.org/registry/gles/extensions/OES/OES_get_program_binary.txt)扩展。

# python - Python、.format() 和 UTF-8

> ID：11007709
> 
> 赞同：7
> 
> 时间：2012-06-13T03:07:02.643
> 
> 标签：python, unicode, beautifulsoup

我的背景是 Perl，但我正在尝试使用 Python 和 BeautifulSoup 来开发一个新项目。

在此示例中，我试图提取和呈现单个页面中包含的链接目标和链接文本。这是来源：

```
table_row = u'<tr><td>{}</td><td>{}</td></tr>'.encode('utf-8')
link_text = unicode(link.get_text()).encode('utf-8')
link_target = link['href'].encode('utf-8')
line_out = unicode(table_row.format(link_text, link_target)) 
```

所有这些对 .encode('utf-8') 的显式调用都是我试图完成这项工作的尝试，但它们似乎没有帮助——我很可能完全误解了 Python 2.7 如何处理 Unicode 字符串。

反正。这工作正常，直到它在 URL 中遇到 U+2013（是的，真的）。那时它会爆炸：

```
Traceback (most recent call last):
File "./test2.py", line 30, in <module>
  line_out = unicode(table_row.encode('utf-8').format(link_text, link_target.encode('utf-8')))
  UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 79: ordinal not in range(128) 
```

大概 .format()，甚至应用于 Unicode 字符串，正在玩傻瓜并尝试执行 .decode() 操作。由于 ASCII 是默认值，它正在使用它，当然它不能将 U+2013 映射到 ASCII 字符，因此......

选项似乎是删除它或将其转换为其他东西，但我真正想要的是简单地保留它。最终（这只是一个小测试用例）我需要能够展示可工作的可点击链接。

BS3 文档建议将默认编码从 ASCII 更改为 UTF-8，但阅读有关类似问题的评论，这看起来是一个非常糟糕的主意，因为它会弄乱字典。

没有使用 Python 3.2（这意味着没有 Django，我们正在考虑将其作为该项目的一部分），有什么方法可以使这项工作干净利落吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T03:12:36.423

首先，请注意您的两个代码示例在有问题的行的文本上存在分歧：

```
line_out = unicode(table_row.encode('utf-8').format(link_text, link_target.encode('utf-8'))) 
```

对比

```
line_out = unicode(table_row.format(link_text, link_target)) 
```

第一个是来自回溯的那个，所以它是要查看的。假设您的第一个代码示例的其余部分是准确的，`table_row`是一个字节字符串，因为您采用了一个 unicode 字符串并对其进行了编码。字节字符串无法编码，因此 Python 2 通过将 table_row 解码为 ascii 来隐式地将 table_row 从字节字符串转换为 unicode。因此出现错误消息“来自 ascii 的 UnicodeDecodeError”。

您需要决定哪些字符串将是字节字符串，哪些将是 unicode 字符串，并对其进行纪律处分。我建议尽可能将所有文本保留为 Unicode 字符串。

这是我在 PyCon 上的一个演示文稿，它解释了这一切：[实用的 Unicode，或者，我如何停止痛苦？](http://bit.ly/unipain)

# c++ - 使用堆栈加密字符串

> ID：11007719
> 
> 赞同：6
> 
> 时间：2012-06-13T03:10:02.103
> 
> 标签：c++, encryption, stack

上周我收到了 C++ 课的作业。我想你们中的一些人会觉得这很有趣！我设法得到了大部分代码，但我被卡住了，无法在我的一生中解决这个问题......以下是我必须放入代码中的加密过程的指南：

> 消息发送者输入一个四字母词**CCCC**和另一个四字母词 **XXXX**。
> 
> 然后消息发送者输入要加密的消息。
> 
> 程序一次扫描一个字符，每个字符都被压入堆栈，直到扫描的字符在单词**CCCC**中或遇到消息的结尾。
> 
> 当扫描的字符是**CCCC**中的字符之一时，打印该字符并继续打印并弹出堆栈顶部的字符，直到堆栈为空或堆栈顶部的字符是其中的字符之一**XXXX**. 当遇到消息结束时，打印栈顶的字符，继续从栈顶弹出打印，直到栈为空。
> 
> *这里有一个提示：“**好**”“**运气**”，它“**对我**来说听起来很简单”，或者你的程序会说：“ **OSDNOT EEM LPMIS SU** ”*

这就是实际的任务。

我遇到的问题是最后一点：

> 当遇到消息结束时，打印栈顶的字符，继续从栈顶弹出打印，直到栈为空。

现在这是我到目前为止的代码：

```
#include <string>
#include <iostream>
using namespace std;
class Stack
{
   private:
   char Chars[50];
   int top;
   public:
   int push(char);
   char pop();
   bool isEmpty();
   bool isFull();
   Stack()
   {
      top = 0;
   }
};

int main()
{
Stack theStack;
   char word1[4];
   char word2[4];
   for(int i=0; i < 4; i++){
      word1[i] = ' ';
      word2[i] = ' ';
   }
   char message[500];   
   cout << "Please enter a 4 letter word: ";
   cin >> word1;
   while(word1[4] || !word1[3])
   {
      cout << "Word must be 4 chars long. Try again: ";
      cin >> word1;
   }
   cout << "Please enter another 4 letter word: ";
   cin >> word2;
   while(word2[4] || !word2[3])
   {
      cout << "Word must be 4 chars long. Try again: ";
      cin >> word2;
   }
   cout << "Please enter the phrase to be encrypted (50 chars max): ";
   cin.ignore(1000, '\n');
   cin.getline(message,500);
   int length = strlen(message);
   int count = 0;
   char finalMsg[length];
   //scanner
   for(int i = 0; i < length; i++)
   {
      if(message[i] == word1[0] ||
         message[i] == word1[1] ||
         message[i] == word1[2] ||
         message[i] == word1[3])
      {
         finalMsg[count] = message[i];
         count++;
         if(message[i-1] != word2[0] ||
            message[i-1] != word2[1] ||
            message[i-1] != word2[2] ||
            message[i-1] != word2[3])
         {
            finalMsg[count] =  message[i-1];
            count++;
         }
      }
      else
      {
         theStack.push(message[i]);
      }
   }
   cout << finalMsg << endl;
return 0;
}

int Stack::push(char data)
{
   Chars[top] = data;
   top++;
return top;
}

char Stack::pop()
{
   char ret = Chars[top-1];
   top--;
return ret;
}

bool Stack::isEmpty()
{
   if(top <= 0)
      return true;
   else return false;
}

bool Stack::isFull()
{
   if(top >= 50)
      return true;
   else return false;
} 
```

编译后，最终输出给我“ **OSDNOT** ”，这是我教授提供的示例中的，所以我知道我正朝着正确的方向前进。任何帮助都会很棒，我什至不知道从哪里开始检查代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T04:15:04.287

这是更正后的代码。您没有正确编码算法。我已经评论了我在代码中所做的更改。首先，当您在扫描时遇到 CCCC 中存在的字符时，您没有弹出堆栈的元素。同样在扫描结束时，您没有清空堆栈。包括`cstring`而不是`string`. 正如评论中所指出的，您对 word1 和 word2 的声明不正确。

```
 char finalMsg[200];
   //scanner
   for(int i = 0; i < length; i++)
   {
      if(message[i] == word1[0] ||
         message[i] == word1[1] ||
         message[i] == word1[2] ||
         message[i] == word1[3])
      {
         finalMsg[count] = message[i];
         count++;

         //pop out elements from the stack till it is empty or an character of XXXX is encountered
         while(!theStack.isEmpty())     
         {
             char tmp=theStack.pop();
             if(tmp==word2[0] ||
                tmp==word2[1] ||
                tmp==word2[2] ||
                tmp==word2[3])
                {
                    theStack.push(tmp);
                    break;
                }
            finalMsg[count++]=tmp;
         }

      }
      else
      {
         theStack.push(message[i]);
      }
   }

  //empty the stack
   while(!theStack.isEmpty())
   {
       finalMsg[count++]=theStack.pop();
   }
   finalMsg[count++]=0;
   cout << finalMsg << endl; 
```

PS：最好使用 std::stack 和 std::string。

# java - 使用 Ant 构建工具构建错误“无法打开文件 'C:\Program': [Errno 2] 没有这样的文件或目录”

> ID：11007721
> 
> 赞同：0
> 
> 时间：2012-06-13T03:10:11.633
> 
> 标签：java, apache, ant

我将Python配置为路径变量，下面是路径变量内容

```
%systemroot%\system32;%systemroot%;%systemroot%\system32\wbem;%systemroot%\system32\windowspowershell\v1.0\;C:\Python27\;c:\program files\java\jdk1.7.0_03\bin;.;c:\program files\tortoisesvn\bin;d:\apache-ant-1.8.3\bin;c:\program files\ibm\gsk8\lib;C:\PROGRA~1\IBM\SQLLIB\BIN;C:\PROGRA~1\IBM\SQLLIB\FUNCTION;C:\PROGRA~1\IBM\SQLLIB\SAMPLES\REPL;%M2_HOME%\bin;C:\Program Files\Lenovo\Bluetooth Software\; 
```

为什么我配置 Python 意味着，我正在使用 ant build 和 installj 创建 exe 文件

```
<target name="installer.izpack.exe" depends="installer.izpack" description="build release executable izpack installer">
    <exec executable="python" failonerror="true">
        <arg line="${installer.izpack.dir}/utils/wrappers/izpack2exe/izpack2exe.py"/>
        <arg line="--file=${basedir}/installer/EasyIT-installer.jar"/>
        <arg line="--output=${basedir}/installer/EasyIT-installer.exe"/>
        <arg line="--no-upx"/>
    </exec>
</target> 
```

但是在构建应用程序时出现以下错误：

```
installer.izpack.exe:
     [exec] python: can't open file 'C:\Program': [Errno 2] No such file or directory

BUILD FAILED
E:\Java Projects\Spark Projects\EastIT - Copy\build\build.xml:873: exec returned: 2

Total time: 51 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:13:49.307

您有一条带有空格的路径，例如

```
c:\program files\java\jdk1.7.0_03\bin 
```

您必须引用路径，如下所示：

```
"c:\program files\java\jdk1.7.0_03\bin" 
```

不是 100% 确定 Python，但这应该可行：

> %systemroot%\system32;%systemroot%;%systemroot%\system32\wbem;%systemroot%\system32\windowspowershell\v1.0\;C:\Python27\;"c:\program files\java\jdk1.7.0_03 \bin";.;c:\program files\tortoisesvn\bin;d:\apache-ant-1.8.3\bin;c:\program files\ibm\gsk8\lib;C:\PROGRA~1\IBM\ SQLLIB\BIN;C:\PROGRA~1\IBM\SQLLIB\FUNCTION;C:\PROGRA~1\IBM\SQLLIB\SAMPLES\REPL;%M2_HOME%\bin;"C:\Program Files\Lenovo\Bluetooth Software\ ";

请注意，您的某些路径组件已缩短为与 8.3 长度兼容（它们有一个 ~ ）。如果你不喜欢引用或者它不适用于 Python，你可以使用命令

> 目录 /x

获取每个路径组件的缩短版本，例如在我的系统上

```
06/12/2012  09:09 AM    <DIR>          PROGRA~1     Program Files
06/12/2012  09:08 AM    <DIR>          PROGRA~2     Program Files (x86) 
```

# java - 结合原始类型和通用方法

> ID：11007723
> 
> 赞同：28
> 
> 时间：2012-06-13T03:10:22.353
> 
> 标签：java, generics, generic-method, raw-types

这是一个问题，第一个代码清单编译得很好（JDK 1.6 | JDK 1.7）：

```
ArrayList<String> a = new ArrayList<String>();
String[] s = a.toArray(new String[0]); 
```

但是，如果我将`List`引用声明为原始类型：

```
ArrayList a = new ArrayList();
String[] s = a.toArray(new String[0]); 
```

我收到一个编译器错误，说它`String[]`是必需的，但`Object[]`被发现了。

这意味着我的编译器将泛型方法解释为返回`Object[]`，尽管它接收到 a`String[]`作为其参数。

我仔细检查了`toArray(myArray)`方法签名：

```
<T> T[] toArray(T[] a); 
```

因此，它是一种参数化方法，其类型参数与 List（即）的类型参数`<T>`没有任何关系。`<E>`

我不知道在这里使用原始类型如何影响使用独立类型参数的参数化方法的评估。

*   有谁知道为什么这段代码不能编译？
*   有人知道记录此行为的任何参考吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-13T03:37:43.093

这并不完全符合您的期望，但是如果您以原始形式引用泛型类，您将失去以*任何方式*对实例成员使用泛型的能力。它也不限于泛型方法，请查看：

```
 public class MyContainer<T> {

     public List<String> strings() {
         return Arrays.asList("a", "b");
     }
 }

 MyContainer container = new MyContainer<Integer>();
 List<String> strings = container.strings(); //gives unchecked warning! 
```

这是 JLS ( [4.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8) ) 的相关部分：

> 未从其超类或超接口继承的原始类型 C 的构造函数（第 8.8 节）、实例方法（第 8.4 节、第 9.4 节）或非静态字段（第 8.3 节）的类型是对应的原始类型在对应于 C 的泛型声明中擦除其类型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T03:21:04.590

当您不使用泛型时，编译器会将其视为原始类型，因此每个泛型类型都会变成`Object`，因此您无法通过`String[]`，因为它需要`Object[]`
所以这是交易 - 如果您使用

```
List l = new ArrayList<String>(); 
```

您正在使用*原始*类型，并且它的所有实例成员都被其擦除对应物替换。特别是出现在实例方法声明中的*每个*参数化类型都被其原始对应物替换。有关详细信息，请参阅 JLS 4.8。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-13T03:57:08.743

这是我在规范中找到的最接近描述这种观察到的行为的描述：

> 未从其超类或超接口继承的原始类型 C 的构造函数（第 8.8 节）、实例方法（第 8.8 节、第 9.4 节）或非静态字段（第 8.3 节）M 的类型是其类型的擦除在对应于 C 的泛型声明中。原始类型 C 的静态成员的类型与其在对应于 C 的泛型声明中的类型相同。
> 
> 将实际类型参数传递给未从其超类或超接口继承的原始类型的非静态类型成员是编译时错误。

基于上述和观察到的行为，我认为可以肯定地说*所有*泛型参数类型都从原始类型中删除。当然，在非遗留代码中不鼓励使用原始类型本身：

> 仅允许使用原始类型作为对遗留代码兼容性的让步。强烈反对在将泛型引入 Java 编程语言之后编写的代码中使用原始类型。**Java 编程语言的未来版本可能不允许使用原始类型**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-03T09:54:07.000

有趣的是，这种行为可以“解决”。使用两个接口，一个基本的非泛型接口和一个泛型接口。然后编译器知道基础非泛型接口的所有函数都不是泛型的，会这样对待它们。

如果使用流和函数链接，这种行为非常烦人，因此我像下面这样解决它。

**通过接口继承的解决方案**：

```
public interface GenericInterface<X extends Y> extends BaseInterface
{
    X getValue();
}

public interface BaseInterface
{
    String getStringValue();
} 
```

现在您可以在没有警告或问题的情况下执行以下操作：

```
GenericInterface object = ...;
String stringValue = object.getStringValue(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T03:27:22.283

不能将类型参数传递给 toArray() 方法，因为您的 ArrayList 是一个非参数化列表，它只知道它包含对象，仅此而已。`a.toArray()`将始终返回一个 Object[] 数组。同样，`(String[])`如果要指定它包含特定的 String 类型，则必须将其强制转换为（其中包含所有危险）。

# c# - 如何配置部署在 IIS 和远程客户端上的 WCF 服务以从远程客户端 PC 进行身份验证？

> ID：11007724
> 
> 赞同：3
> 
> 时间：2012-06-13T03:10:28.013
> 
> 标签：c#, wcf, authentication, iis, wshttpbinding

我是菜鸟；请帮助我理解这个让我非常困惑的身份验证配置/绑定的东西。

我在 Win 2008 上的 IIS 7 上部署了一个 C# WCF 服务。我的客户端是一个 Windows 窗体 C# 应用程序。我的客户端在运行 WCF 服务的同一台服务器上运行时运行良好，但是当我尝试从远程 PC 运行客户端时，出现以下异常...

System.ServiceModel.Security.SecurityNegotiationException：调用者未通过服务的身份验证。

我已经阅读了一些关于这些问题的帖子，并且知道我的问题是因为我的服务和客户端配置为使用 Windows 身份验证，我猜这是使用 Visual Studio 创建服务并添加服务引用时的默认设置给客户。以下是我进行任何更改之前的配置，当时它仍设置为 Windows（删除了不相关的位）...

网络配置

```
<system.web>
    ...
    <authentication mode="Windows"/>
    ...

<system.serviceModel>
    <services>
        <service name="MCLaborServer.LaborService" behaviorConfiguration="MCLaborServer.LaborServiceBehavior">
            <!-- Service Endpoints -->
            <endpoint address="" binding="wsHttpBinding" contract="MCLaborServer.ILaborService">
                <!-- 
          Upon deployment, the following identity element should be removed or replaced to reflect the 
          identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
          automatically.
      -->
                <identity>
                    <dns value="localhost"/>
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="MCLaborServer.LaborServiceBehavior">
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

从客户端上的 App.Config ......

```
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_ILaborService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        algorithmSuite="Default" establishSecurityContext="true" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://<myDnsNameGoesHere>/MCLaborServer/LaborService.svc"
            binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_ILaborService"
            contract="LaborService.ILaborService" name="WSHttpBinding_ILaborService">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

因此，首先我在 web.config 中更改了“authentication mode="None"”，并在客户端的 app.config 中设置了“security mode="None"”，并为消息和传输设置了 clientCredentialType="None"。我还注释掉了 web.config 和客户端 app.config 中的“身份”部分。但这完全破坏了它，现在本地运行的客户端甚至无法工作；它给出了“远程服务器返回了意外响应：（405）方法不允许”错误。

那么我可以做些什么来关闭安全性以便我可以使用远程客户端进行连接？我确实在 IIS 中为我​​的应用程序启用了匿名访问。

我还想问一下，配置它的最佳实践方法是什么，这样我就可以通过互联网以半安全的方式在远程客户端上进行 Web 服务调用，而无需使用 SSL 或做任何会花钱的事情。我并不真正关心数据的安全性，因为它不是真正的敏感数据，但我仍然想确保服务器不会受到攻击。

另外，我读到我可以使用 Windows 身份验证，然后在代码中明确指定凭据，如下所示。如果我这样做，它仍然可以远程工作吗？如果是这样，这是否最终会使我的服务器的 Windows 凭据以不安全的方式通过网络发送，那么我是否愿意让我的凭据被劫持？

```
SomeService.ServiceClient someService = new SomeService.ServiceClient(); 
someService.ClientCredentials.Windows.ClientCredential.UserName="windowsuseraccountname" 
someService.ClientCredentials.Windows.ClientCredential.Password="windowsuseraccountpassword" 
```

我已经阅读了以下帖子/链接，但仍然感到困惑。谢谢你的帮助！

[WCF 错误：调用者未通过服务的身份验证](https://stackoverflow.com/questions/284538/wcf-error-the-caller-was-not-authenticated-by-the-service)

[如何解决“调用者未通过服务验证”？](https://stackoverflow.com/questions/5209380/how-to-fix-the-caller-was-not-authenticated-by-the-service)

[http://msdn.microsoft.com/en-us/library/aa291347(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa291347(v=vs.71).aspx)

[http://www.devx.com/codemag/Article/33342/1763/page/2](http://www.devx.com/codemag/Article/33342/1763/page/2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:53:32.610

在设置跨域运行的低安全性 WCF 服务时，我们遇到了类似的问题。最大的问题之一（如果你可以这么称呼的话）是 WCF 默认配置为非常安全。因为我们的应用程序完全在一个安全的网络中，所以我们不想为许多复杂的证书而烦恼。我们的解决方法是创建一个自定义绑定，允许我们在没有任何加密的情况下对我们的服务使用用户名/密码身份验证。我们的实现基于[Yaron Naveh 的](http://webservices20.blogspot.com) [Clear Username Binding](http://code.google.com/p/wcf-clear-username-binding/)。我建议您看一下（以及他[介绍它的博客文章](http://webservices20.blogspot.com/2008/11/introducing-wcf-clearusernamebinding.html)）。

一些学习 WCF 绑定和安全的好资源：

*   [MSDN - Windows Communication Foundation 绑定概述](http://msdn.microsoft.com/en-us/library/ms734662)
*   [MSDN - 系统提供的绑定](http://msdn.microsoft.com/en-us/library/ms730879.aspx)
*   [MSDN - 安全概述](http://msdn.microsoft.com/en-us/library/ms735093.aspx)
*   [MSDN - 编程 WCF 安全性](http://msdn.microsoft.com/en-us/library/ms731925.aspx)
*   [MSDN - WCF 安全基础知识](http://msdn.microsoft.com/en-us/library/ff650862.aspx)
*   [MSDN - 选择传输](http://msdn.microsoft.com/en-us/library/ms733769.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:50:31.540

我通过将绑定更改为 basicHttpBinding、将身份验证更改为 Forms 并关闭安全性来解决此问题。

# verilog - 编码 D 触发器的更好方法

> ID：11007729
> 
> 赞同：7
> 
> 时间：2012-06-13T03:10:59.390
> 
> 标签：verilog

最近，我在verilog中看到了一些D触发器RTL代码，如下所示：

```
 module d_ff(
            input d,
            input clk,
            input reset,
            input we,
            output q
    );

    always @(posedge clk) begin
            if (~reset) begin
                    q <= 1'b0;
            end
            else if (we) begin
                    q <= d;
            end
            else begin
                    q <= q;
            end
    end
    endmodule 
```

声明`q <= q;`有必要吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:47:25.700

> 语句 q <= q; 必要的？

不，不是，对于 ASIC，它实际上可能会增加面积和功耗。我不确定现代 FPGA 如何处理这个问题。在综合期间，该工具将看到该语句并要求在每个正时钟沿更新 q。如果没有最后的 else 子句，该工具只能`q`在满足给定条件时自由更新。

在 ASIC 上，这意味着综合工具可以插入时钟门（如果库有时钟门）而不是多路复用器。对于单个 DFF，这实际上可能更糟，因为时钟门通常比多路复用器大得多，但如果`q`是 32 位，那么节省的费用可能非常显着。现代工具可以自动检测使用共享使能的 DFF 数量是否满足某个阈值，然后适当地选择时钟门或多路复用器。

![带有最后的 else 子句](../Images/0287119035cf95ec4a902f3e90823098.png)

在这种情况下，该工具需要 3 个多路复用器以及额外的路由

```
always @(posedge CLK or negedge RESET)
  if(~RESET)
    COUNT <= 0;
  else if(INC)
    COUNT <= COUNT + 1;
  else
    COUNT <= COUNT; 
```

![没有最后的 else 子句](../Images/23e3073b2866fe4211c4aecbfc450c02.png)

在这里，该工具对所有 DFF 使用单个时钟门

```
always @(posedge CLK or negedge RESET)
  if(~RESET)
    COUNT <= 0;
  else if(INC)
    COUNT <= COUNT + 1; 
```

[图片来自这里](http://read.pudn.com/downloads142/doc/project/617829/Clock_Gating.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:00:39.623

就模拟而言，删除该语句不会改变任何内容，因为 q 应该是 reg 类型（或 SystemVerilog 中的逻辑），并且应该保持其值。

此外，大多数综合工具在这两种情况下都应该生成相同的电路，因为 q 是使用非阻塞分配更新的。也许更好的代码是使用 always_ff 而不是 always（如果您的工具支持它）。这样，编译器将检查 q 是否始终使用非阻塞赋值进行更新，并生成顺序逻辑。

# ios - 自定义 URL 方案 RubyMotion

> ID：11007738
> 
> 赞同：0
> 
> 时间：2012-06-13T03:12:40.060
> 
> 标签：ios, url, uiviewcontroller, url-scheme, rubymotion

我需要在我的应用程序中转到指定的 ViewController。在 Safari 中输入 scheme:// 时，我可以很好地访问 rootViewController，因为我已经编辑了我的 Info.plist。我什至遇到了这个：

[https://stackoverflow.com/a/10925872/1327809](https://stackoverflow.com/a/10925872/1327809)

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
MyViewController *controller = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:[NSBundle mainBundle]];
[self.viewController presentModalViewController:controller animated:YES];
[controller release];

return YES;        
} 
```

这正是我想要解决的一个问题。我不得不使用 RubyMotion（我是新手），因此甚至没有 nib 文件。

```
def application( application, handleOpenURL:url )
// desired code

end 
```

感谢您提供任何可能的帮助，如果您需要更多信息，请告诉我。

**2012 年 6 月 14 日更新**
我发现 handOpenURL 方法已被弃用，所以现在我正在使用它的替代品。

我已经包含了我的代码，因为我一生都无法弄清楚为什么会出现黑屏。我什至从 controller.rb 中删除了 if/else 并让它运行初始视图控制器，无论是通过 Safari 还是直接单击应用程序，如果通过 Safari，它仍然是黑色的。如果这应该是一个新问题，请告诉我，我将开始一个新问题。

didFinishLaunchingWithOptions 和 openURL 都必须通过 workFlowController 方法，然后该方法将我们发送到 controller.rb 并运行方法 viewWillAppear。在那里，有一个 URL 决定了哪个视图控制器运行。

我认为 app_delegate.rb 中的某些内容编码不正确。除了我在下面评论的内容之外，我不知道新的 openURL 方法代码应该有何不同。当我运行 rake 设备时，有没有办法在我的控制台中查看我的日志（我使用日志并放入有问题的方法中）？当我完全退出应用程序并尝试通过 Safari 返回时，我仍需要它记录，因为根据 Apple Docs，“如果由于另一个应用程序请求它打开 URL 资源而启动应用程序，则 UIApplication 首先向应用程序发送 application:didFinishLaunchingWithOptions: 消息，然后调用此方法。” 我想看看当应用程序没有运行但我通过 URL 打开它时，这是否发生在我的应用程序中。

任何反馈将不胜感激。再次感谢您在这一点上的帮助。我也会继续寻找。

app_delegate.rb

```
class AppDelegate
...
  def application( application, didFinishLaunchingWithOptions: launchOptions )
  ...
     @window.rootViewController = self.workFlowController
  ...
  true
  end

  def application( application, openURL: url, sourceApplication: sourceApplication, annotation: annotation )

     if sourceApplication !=nil
       #should I now be using this instead of from_open_url? 
     end
     ...
     @window.rootViewController = self.WorkFlowController

     @window.rootViewController.from_open_url = true
     ...
     true
  end

  def workFlowController

     @_workFlowController ||= begin

     wfController = Auth::Controller.alloc.init

     wfController.delegate = self

     # return wf controller
     wfController

     end
  end
  ...
end 
```

控制器.rb

```
module Auth

  class Controller < BaseController
  ...
     attr_accessor :delegate, :from_open_url
  ...
     def viewWillAppear( animated )

        super

        # app loads from URL, password reset controller loads first
        if (@from_open_url)

           self.presentViewController( 
             self.urlController,
             animated: false 
           )       

        else 

           self.presentViewController( 
             self.otherController,
             animated: false
           )       

        end

     end
     ...
  end    
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:41:28.720

我不知道您确切的应用程序设置，但您应该可以使用`MyViewController.alloc.init`。这是一个完整的工作示例。这会加载默认图像 (foo.png)，但如果通过 URL 打开应用程序，它会显示带有不同图像 (bar.png) 的模态视图。

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    @window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds)
    @viewController = Foo.alloc.init
    @window.rootViewController = @viewController
    @window.rootViewController.wantsFullScreenLayout = true
    @window.makeKeyAndVisible
    true
  end

  def application(application, openURL:url, sourceApplication:sourceApp, annotation:annotation)
    # Here's where you might parse the url and decide which view controller to use
    controller = Bar.alloc.init
    @viewController.presentModalViewController(controller, animated:true)
    true
  end
end

class Foo < UIViewController
  def viewDidLoad
    self.view = UIImageView.alloc.initWithImage(UIImage.imageNamed('foo.png'))
  end
end

class Bar < UIViewController
  def viewDidLoad
    self.view = UIImageView.alloc.initWithImage(UIImage.imageNamed('bar.png'))
  end
end 
```

# jquery - JQuery 'on' vs. 'live'

> ID：11007741
> 
> 赞同：4
> 
> 时间：2012-06-13T03:13:12.567
> 
> 标签：jquery

我有一个 JQuery 'on' 和 'live' 不执行相同的场景。也许有人可以指出原因。我在我的项目中使用 JQuery 1.7.2，在此版本中，“live”已替换为“on”。我在列表页面中使用以下代码。基本上，此页面有一个字母栏，用户可以单击它并加载具有该姓氏的所有客户端。我希望链接通过 ajax 执行。

代码：

```
$("a.listajax").on("click", function (e) {
    e.preventDefault();
    var url = $(this).attr("href");
    $("div.content").load(url + " div.content");
    return false;
}); 
```

这里的问题是，当我第一次加载页面并单击链接时，一切正常。该页面通过ajax加载。但是，在那之后，所有链接都失去了绑定，然后如果我点击任何链接，我就会加载整个页面。

我用“live”替换了“on”，链接开始表现完美，即使在随后的点击中也是如此。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T03:17:11.643

一个不是简单地替换`.live`为`.on`。

```
$("a.listajax").live('click', function(e)) 
```

相当于：

```
$(document).on('click', 'a.listajax', function(e)) 
```

**重要的**

如果你的所有`.listajax`锚点都有一个共同的祖先不会从 DOM 中删除，你应该使用它（可能最深的一个）而不是`document`; 这将提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:15:41.910

这就是`live()`. 它在创建新的 DOM 元素时重新绑定它们。jQuery 的网站上有很多类似的问题，比如[这个](https://forum.jquery.com/topic/click-vs-live-click)，因为它可能有点令人困惑。

根据[jQuery 文档](http://api.jquery.com/live/)，您`live()`可以：

> 为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。

“...在未来”部分是关键，因为`on()` [没有那个](http://api.jquery.com/on/).

# mysql - 导入查询到数据库的问题

> ID：11007747
> 
> 赞同：2
> 
> 时间：2012-06-13T03:14:19.483
> 
> 标签：mysql, phpmyadmin

我有这个查询，我试图将它导入到 phpmyadmin。你能告诉我如何解决这个问题吗？谢谢你。

```
DROP TABLE IF EXISTS `dp_confirms`;
CREATE TABLE `dp_confirms` (
  `id` int(11) NOT NULL auto_increment,
  `newuser` varchar(32) NOT NULL default '',
  `newpass` varchar(32) NOT NULL default '',
  `newquestion` varchar(255) NOT NULL default '',
  `newanswer` varchar(255) NOT NULL default '',
  `newmail` varchar(255) NOT NULL default '',
  `newfname` varchar(32) NOT NULL default '',
  `newlname` varchar(32) NOT NULL default '',
  `newcompany` varchar(128) NOT NULL default '',
  `newregnum` varchar(32) NOT NULL default '',
  `newdrvnum` varchar(32) NOT NULL default '',
  `newaddress` varchar(128) NOT NULL default '',
  `newcity` varchar(64) NOT NULL default '',
  `newcountry` char(2) NOT NULL default '',
  `newstate` varchar(32) NOT NULL default '',
  `newzip` varchar(32) NOT NULL default '',
  `newphone` varchar(64) NOT NULL default '',
  `newfax` varchar(64) NOT NULL default '',
  `sponsor` int(11) NOT NULL default '0',
  `confirm` varchar(255) NOT NULL default '',
  `cdate` timestamp(14) NOT NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `newuser` (`newuser`),
  KEY `newmail` (`newmail`)
) ENGINE=MyISAM AUTO_INCREMENT=1 ; 
```

我得到的错误： MySQL 说：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(14) NOT NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `newuser` (`newuser`),
  K' at line 22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:22:24.043

指定时间戳的长度，例如`timestamp(14)`在 MySQL 5.1 中已弃用，并且不再支持 MySQL 5.5。

这很容易通过删除长度规范来解决：

```
`cdate` timestamp NOT NULL, 
```

# javascript - 用于自动滚动的偏移锚点

> ID：11007756
> 
> 赞同：0
> 
> 时间：2012-06-13T03:16:11.143
> 
> 标签：javascript, jquery, anchor

我目前正在使用 css-tricks 中的代码在此处对我的锚点执行自动滚动功能：

[http://css-tricks.com/snippets/jquery/smooth-scrolling/](http://css-tricks.com/snippets/jquery/smooth-scrolling/)

我需要做什么来抵消“页面顶部”？基本上我想让页面从锚点位置停止大约 150 像素..

谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:21:01.570

换行：

```
var targetOffset = $target.offset().top; 
```

到：

```
var targetOffset = $target.offset().top - 150; 
```

这会将其推高 150 像素，比您定位的顶部高出 150 像素。

关于哈希：

改变这个：`location.hash = target;`

到：

```
if(history.pushState) {
    history.pushState(null, null, target);
}
else {
    location.hash = target;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:35:52.257

搞砸的部分在这里：

```
location.hash = target; 
```

删除它，并改用[它](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)：

```
history.pushState({}, "", "#"+target); 
```

如果`pushState`不支持，那么您可以使用[History.js](https://github.com/balupton/history.js)。

# tcp - TCP慢启动如何提高吞吐量？

> ID：11007759
> 
> 赞同：2
> 
> 时间：2012-06-13T03:16:57.823
> 
> 标签：tcp, congestion-control

TCP 慢启动出现在 Internet 开始经历“拥塞崩溃”的时期。[Van Jacobson 和 Michael Karels 论文](http://ee.lbl.gov/papers/congavoid.pdf)中的轶事示例如下：

```
During this period, the data throughput from LBL to UC Berkeley (sites separated
by 400 yards and two IMP hops) dropped from 32 Kbps to 40 bps. 
```

拥塞问题通常被描述为由从高速链路到低速链路的过渡以及在此瓶颈处的缓冲区建立/丢弃数据包引起的。
我想了解的是，这样的构建将如何导致端到端*吞吐量*下降，而不是简单地在通向完整缓冲区的链接的高速部分上导致多余的活动/重新传输。例如，考虑以下网络：

```
 fast       slow       fast
A ======== B -------- C ======== D 
```

A 和 D 是端点，B 和 C 是从高速网络过渡到低速网络时的数据包缓冲区。例如，A/B 和 C/D 之间的链路为 10Mbps，B/C 之间的链路为 56Kbps。现在如果 A 发送一个*大*（假设理论上是无限的）向 D 发送消息，我试图理解的是为什么如果它只是用数据敲击 TCP 连接而不是在连接中间适应较慢的链接速度，它会花更长的时间才能通过. 我设想 B 只是其缓冲区以 56Kbps 的固定速率耗尽的东西，不管它的缓冲区被 A 敲打的程度如何，也不管它必须丢弃多少数据包，因为缓冲区已满。因此，如果 A 始终保持 B 的缓冲区已满（或可能是过满），并且 B 始终以 56Kbps 的最大速率传输，那么通过使用慢启动来提高吞吐量如何？

我唯一能想到的是，如果D 已经收到的*相同数据包必须在拥塞下通过慢速 B/C 链路重新传输，这会阻塞新数据包。*但是 D 通常不会确认它收到的任何数据包，所以重传的数据包应该主要是那些合法地没有被 D 接收到的数据包，因为它们被丢弃在 B 的缓冲区中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:18:08.910

请记住，网络涉及在多台计算机之间共享资源。非常简单，需要慢启动以避免少量 TCP 会话耗尽路由器缓冲区（在您的图中，这很可能在 B 点和 C 点）

来自[RFC 2001，第 1 节](https://www.rfc-editor.org/rfc/rfc2001#section-1)：

> 旧的 TCP 会启动与发送方的连接，将多个段注入网络，直至接收方通告的窗口大小。虽然当两台主机在同一个 LAN 上时这是可以的，但如果发送方和接收方之间存在路由器和较慢的链路，则可能会出现问题。一些中间路由器必须对数据包进行排队，并且该路由器可能会耗尽空间。[2] 展示了这种简单的方法如何大幅降低 TCP 连接的吞吐量。
> 
> ...
> 
> ```
> [2]  V. Jacobson, "Congestion Avoidance and Control," Computer 
> ```

```
 Communication Review, vol. 18, no. 4, pp. 314-329, Aug. 1988.
    ftp://ftp.ee.lbl.gov/papers/congavoid.ps.Z. 
```

路由器必须有有限的缓冲区。链路之间的速度不匹配越大，缓冲区耗尽而没有慢启动的机会就越大。缓冲区耗尽后，您的平均 TCP 吞吐量将下降，因为缓冲增加了 TCP 利用链接的能力（防止瞬时链接饱和的不必要丢弃）。

请注意，上面的 RFC 2001 已被[RFC 5681](https://www.rfc-editor.org/rfc/rfc5681)取代；但是，RFC 2001 为您的问题提供了更可引用的答案。

从你的 OP...

> 现在，如果 A 向 D 发送一条大的（假设理论上是无限的）消息，我想了解的是，如果它只是用数据敲击 TCP 连接而不是适应较慢的链接速度，为什么它需要更长的时间才能通过在连接的中间。

首先，TCP 中不存在无限消息。TCP 在慢启动出现之前受到初始窗口大小的限制。

因此，假设初始 TCP 段的长度为 64KB。如果整个 TCP 段在 B 处填满路由器的 tx 缓冲区，由于丢包、ACK 和 TCP 回退涉及的动态，TCP 随着时间的推移使用较少的链路。我们来看看个别情况：

*   B 的 tx_buffer < 64KB：您自动失去了重新传输的时间，因为 A 的 TCP 发送速度比 B 出列数据包的速度快
*   B 的 tx_buffer >= 64KB：只要 A 是唯一发送的站，没有负面影响（只要 D 正确 ACK-ing）；但是，如果有多个主机在 A 的 LAN 上传输试图通过 56K 链路进行传输，则可能会出现问题，因为在 56K 上将单个 1500 字节数据包出列需要 200 毫秒。如果您有来自 A 的 64KB 初始窗口的 44 个 1500 字节的数据包（44*1460=64KB；您只获得 1460 字节的 TCP 有效负载），则路由器在处理 A 的流量时有将近 9 秒的饱和链路。

第二种情况既不公平也不明智。当 TCP 看到任何数据包丢失时，它会后退……共享单个链接的多个主机必须使用慢启动来保持情况正常。

顺便说一句，我从未见过在接口上缓冲 9 秒的路由器。没有用户会容忍这种延迟。大多数路由器的最大时间约为 1-2 秒，而那是几年前 T-1 的速度。由于多种原因，今天的缓冲区甚至更小。

# jquery - 先拆分再切片值

> ID：11007762
> 
> 赞同：2
> 
> 时间：2012-06-13T03:17:24.547
> 
> 标签：jquery

我知道如何使用分隔符拆分值。我也知道如何分割一个值以删除最后几个字符。我现在需要将这些结合起来，这是我无法弄清楚的部分。

```
 $("#product").val(value.split('|')[0]); 
```

我将如何添加`slice(0,-1)`到上面的这个功能？我希望它先分裂，然后切片。

所以结果将是“|”之前的所有内容 减去一个字符

**解决了：**

```
$("#product").val(value.split('|')[0].slice(0, -1)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T03:19:14.733

你的意思是从数组中分割第一个元素？

试试下面，

```
 $("#product").val(value.split('|')[0].slice(0, -1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:22:15.320

试试这个：

```
var val = value.split('|')[0].slice(0, -1)     
$("#product").val(val); 
```

# iphone - 如何找到保存在iphone文档文件夹中的文件

> ID：11007765
> 
> 赞同：-1
> 
> 时间：2012-06-13T03:17:37.433
> 
> 标签：iphone, ios

我正在 iphone 应用程序中创建一个 pdf 文件，它保存在文件中，它在模拟器上运行良好使用 iTunes 或任何实用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:47:36.000

您可以使用 Organizer.So 示例...

![组织者](../Images/84b3b787f2653b9643b2066709c3f216.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-22T07:36:51.843

您可以使用 itools。1\. 安装itools 2\. 将您的设备与电脑连接并打开itools。3\. 转到“应用程序”选项卡，选择您的应用程序。4\. 点击“文档”图标，打开您应用的文档目录。5\. 选择文件并单击“导出”。

我知道这是一个迟到的答案，但以防万一它可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T04:11:08.600

如果您想将文档从您的 ios 应用程序传输到计算机，请在您的应用程序中启用文件共享。在 info.plist 中设置布尔标志“UIFileSharingEnabled”。现在，当您连接设备并在 iTunes 中滚动到“应用程序”页面的底部时，您可以在该应用程序的 Documents 文件夹中看到所有文件。

# c++ - 如何通过C++中的函数退出while循环

> ID：11007766
> 
> 赞同：1
> 
> 时间：2012-06-13T03:17:45.573
> 
> 标签：c++, map, function-pointers

假设**mf_ptr**是类的成员函数指针的 typedef。我们有流动的代码：

```
map<string, mb_ptr> cmd_table;
cmd_table["exit"] = &class_name::exit;
string cmd;
while (cin >> cmd){
    (this->*cmd_table[cmd])();
} 
```

那么我应该如何定义函数 exit() 来退出 while 循环呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T03:19:41.677

你有几个选择：

1.  在退出函数中引发异常，并在 while 循环中捕获它。

2.  让所有函数返回一个布尔值，无论是否退出 while 循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T03:22:44.623

你可以这样做：

```
while (cin >> cmd && !class_name::exitLoop){
    (this->*cmd_table[cmd])();
} 
```

Where`class_name::exitLoop`将由`class_name::exit()`.

我个人会选择：

```
while(cin >> cmd && cmd != "exit") {
    (this->*cmd_table[cmd])();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:46:00.430

您可以使用（如上指定的方式）：

```
class_name::exit(void) { cin.setstate(eofbit); ... }
...
while(cin >> cmd)
    (this->*cmd_table[cmd])(); 
```

在这种情况下，循环将在处理完命令*后*终止`exit`（下一轮迭代`>>`将失败）。

如果您想获得更大的复杂性，您可以创建一个自定义*流提取运算符*，

```
friend istream & operator>>(istream & is, class_name::CmdExecutorClass &comm)
{
    string cmd;
    cin >> cmd;
    if (cmd == "exit")
        cin.setstate(eofbit);
    else
        (comm.table[cmd])();
    return is;
} 
```

我可以看到的好处是你可以简单地写：

```
while (cin >> cmd); 
```

并且您可以处理错误/未知命令（例如，如果键不存在元素，则`std::map<...>::operator[]` *添加到地图*中 - 这可能不是您想要的）。
但是您还需要相当多的胶水来创建类（构造函数或模板以从嵌入的“主”类`CmdExecutor`传递引用，...）。`table[]`对于一个简单的案例，矫枉过正。

**编辑：**还应该添加*关闭* `cin`（这就是设置`eof`位的作用，有效地）也可能是不需要的。该`fail`位（之后可以再次清除）可能是一个更好的选择。

# latitude-longitude - google lat lng 没有被一致地返回一个地址

> ID：11007767
> 
> 赞同：0
> 
> 时间：2012-06-13T03:18:07.853
> 
> 标签：latitude-longitude, google-places-api

我正在使用以下 javascript 代码并且它正在工作。突然，它开始只返回经度，而纬度为空。

为什么我会收到这种零星的反应？有什么线索吗？

```
var place = search.autocomplete.getPlace();

$('#lat').val(place.geometry.location.$a);
$('#lng').val(place.geometry.location.ab); 
```

编辑：在打印这个地方时，我看到“$a”变成了“ab”，“ab”变成了“cb”。惊喜。如果他们将来再次更改它，我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T05:03:41.130

这些是您不应该直接访问的内部变量。请改用[记录在案的方法](https://developers.google.com/maps/documentation/javascript/reference#LatLng)。

例如：

```
var place = search.autocomplete.getPlace();

$('#lat').val(place.geometry.location.lat());
$('#lng').val(place.geometry.location.lng()); 
```

# php - 如何在 PHP 中的符号“-”之前获取值

> ID：11007774
> 
> 赞同：1
> 
> 时间：2012-06-13T03:19:12.957
> 
> 标签：php

对不起我的英语不好。我有一个小问题：有一个变量，例如：

```
$a = '123-abc'; 
```

我的问题是，我怎样才能得到变量 $a 中的数字 123 ？

感谢您的帮助：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T03:22:21.210

```
// what you want is $ret[0]
$ret = explode('-', $a);
echo $ret[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T03:21:05.017

```
substr($a, 0, strpos($a, '-')); 
```

或者

```
preg_match('~^[^-]+~', $a, $matches);
var_dump($matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-01T05:32:45.930

```
 In the following example, we have declared a string variable and assigned it a phone number in this format: 001-234-567678\. So now we want to loop and get value before each hyphens in string (phone number)

    $phone_number = "001-234-567678";
    //Using the explode method
    $arr_ph = explode("-",$phone_number);

    //foreach loop to display the returned array
    foreach($arr_ph as $i){
        echo $i . "<br />";
    }

Output
001
234
567678

    For more information
    https://www.jquery-az.com/php-explode-method-to-split-a-string-with-3-examples/ 
```

# java - Java 空字符串等于结果

> ID：11007781
> 
> 赞同：19
> 
> 时间：2012-06-13T03:19:53.700
> 
> 标签：java, string, null, equals

请帮助我 java 中的 string.equals 如何处理空值？异常有问题吗？三种情况：

```
boolean result1,result2, result3;

    //1st case
    String string1 = null;
    String string2 = null;
    result = string1.equals(string2);
    //2nd case
    String string1 = "something";
    String string2 = null;
    result2 = string1.equals(string2);
    //3rd case 
    String string1 = null;
    String string2 = "something";
    result3 = string1.equals(string2); 
```

结果的价值是什么？我期望这个值：

> 结果1为真；
> 结果 2 为假；
> 结果 3 为假；

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-13T03:22:56.510

您不能使用取消引用 (dot, '.') 运算符来访问实例变量或调用实例上的方法（如果该实例是`null`. 这样做会产生一个`NullPointerException`.

通常的做法是使用您知道的非空值进行字符串比较。例如，`"something".equals(stringThatMayBeNull)`。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-06-16T21:06:21.990

`Objects.equals()`如果您使用的是 JDK 7 或更高版本，则用于比较字符串或任何其他对象。它将处理空值而不抛出异常。在此处查看更多信息：[how-do-i-compare-strings-in-java](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

如果您没有运行 JDK 7 或更高版本，您可以像这样复制该`equals`方法`Objects`：

```
public static boolean equals(Object a, Object b) {
    return (a == b) || (a != null && a.equals(b));
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-13T03:32:45.683

实际上，您不能在`null`变量上使用点运算符来调用非静态方法。

尽管如此，一切都取决于重写类的`equals()`方法`Object`。在`String`类的情况下，是：

```
public boolean equals(Object anObject) {
    if (this == anObject) {
        return true;
    }
    if (anObject instanceof String) {
        String anotherString = (String)anObject;
        int n = count;
        if (n == anotherString.count) {
            char v1[] = value;
            char v2[] = anotherString.value;
            int i = offset;
            int j = anotherString.offset;
            while (n-- != 0) {
                if (v1[i++] != v2[j++])
                    return false;
            }
            return true;
        }
    }
    return false;
} 
```

如果你`null`作为参数传递，两个“if”都会失败，返回`false`;

您的情况的另一种选择是为您的要求构建一种方法：

```
public static boolean myEquals(String s1, String s2){
    if(s1 == null)
        return s2 == null;
    return s1.equals(s2);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T03:24:18.150

`NullPointerException`每当 string1 为 null 并且您在其上调用时，这段代码都会抛出 a `equals`，就像在任何 null 对象上隐式调用方法时一样。

要检查字符串是否为空，请使用`==`而不是`equals`.

尽管由于 NullPointerExceptions`result1`而`result3`不会设置，但 result2 将为 false（如果您在其他结果的上下文之外运行它）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T03:24:04.313

在案例 1 和案例 3 中，您将收到 NullPointerException。

您不能`equals()`在空对象上调用任何方法（如 ）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-26T11:01:24.447

为了防止在比较字符串时出现 NPE（如果其中至少一个可以为空），请使用 StringUtils.equals 方法，该方法是空安全的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-21T05:55:14.307

我们不能将点运算符与 null 一起使用，因为这样做会产生 NullPointerException。因此我们可以在我们的程序中利用 try..catch 块。这是解决问题的一种非常粗略的方法，但您将获得所需的输出。

```
try {
   result = string1.equals(string2);
} catch (NullPointerException ex) {
   result = string2 == null; //This code will be executed only when string 1 is null
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-08T19:04:13.103

这种事情最常见的用例是当我们有一个包含“Y”或“N”来表示布尔值的数据库字段时（这是一个旧系统，不要问）。

因此，我们这样做：

`if ("Y".equals(stringObjectThatMayBeNull) ? result : otherResult);`

而不是这个：

`if (stringObjectThatMayBeNull.equals("Y") ? result : otherResult);`

...在执行 .equals 方法时避免了 NullPointerException。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-10T15:00:42.843

我迟到了，但你可以使用

```
StringUtils.equals(str1, str2) 
```

如果您使用的是弹簧

# ruby-on-rails - UJS Create Action 正在发布两篇文章

> ID：11007782
> 
> 赞同：0
> 
> 时间：2012-06-13T03:19:58.370
> 
> 标签：ruby-on-rails, coffeescript, ujs

好的，我有以下创建操作

```
 #posts_controller, nested resource under discussions
  def create
    @post = Post.new(params[:post])
    @post.user = current_user
    @post.discussion = Discussion.find(params[:discussion_id])
    respond_to do |format|
      if @post.save!
        format.js
        format.html { redirect_to discussion_posts_path(@post.discussion), notice: 'Post was successfully created.' }
      else
        format.html { render :action => "new" }
      end
    end
  end 
```

它来自以下形式

```
#index.html.erb#quick_reply
<%= simple_form_for [@discussion, @post], :remote => true do |f| %>
  <%= f.input :body, :input_html => {:class => 'span12 short_text_area' } %>
  <%= f.submit 'Post Reply', :class => 'btn-primary' %>
<% end %> 
```

开始这个咖啡脚本

```
#create.js.coffee
$("#discussion_posts_table").append("<%= escape_javascript(render(@post)) %>");
$("#post_body").val(""); 
```

如果我`:remote => true`从表格中取出，一切都会很好，但是把它放进去会产生两个模型对象而不是一个。

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T01:20:16.970

事实证明，问题在于我在 dev 中预编译了资产，这意味着所有东西都在那里两次。

# objective-c - RestKit 非 kvc 对象映射

> ID：11007784
> 
> 赞同：1
> 
> 时间：2012-06-13T03:20:53.627
> 
> 标签：objective-c, restkit

我正在尝试将 RestKit 集成到我当前的项目中。我正在使用以下格式检索数据：

```
[
    {"id":"1",
    "name":"john"}
    {"id":"2",
    "name":"bob"}
] 
```

按照[RestKit wiki](https://github.com/RestKit/RestKit/wiki/Object-mapping)中的优秀教程，我看到推荐的完全符合 KVC 的格式是：

```
{"customers": [
    {"id":"1",
    "name":"john"}
    {"id":"2",
    "name":"bob"} ]
} 
```

然后我可以使用

```
[mappingProvider setMapping:customerMapping forKeyPath:@"customers"]; 
```

不幸的是，我目前无法控制服务器上的数据格式。

稍后在 RestKit wiki 中，有一个部分解决了我的问题：“Mapping without KVC”。我会在加载时将 objectMapping 与对象相关联。

```
[objectManager loadObjectsAtResourcePath:@"/data" objectMapping:customerMapping delegate:self]; 
```

这是我的问题： wiki 适用于 0.9.3。但是**这种方法在 0.10.1 中已被弃用**。是的，它仍然有效 - 目前。

如果不推荐使用此方法，并记住我不控制数据，那么在这种非 KVC 情况下将对象映射分配给类的适当方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T03:41:50.607

我对此并不积极，但我相信它已被弃用以支持块......这可能有效：

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/data" usingBlock:^(RKObjectLoader* loader) {
    [loader setObjectMapping:customerMapping];
}]; 
```

并且，自然地，使用块来替换委托方法。

# c# - COM 互操作未通过接口检测 .NET 函数

> ID：11007792
> 
> 赞同：4
> 
> 时间：2012-06-13T03:22:07.467
> 
> 标签：c#, .net, com

我有一个已执行的**.NET 程序集**`regasm`和`gacutil`. 我还有一个**COM 互操作**，我正在尝试使用**.NET 程序集**。但是，通过我的`pDotNetCOMPtr`我无法“检测”我的 .NET 公共接口上的任何方法。MFC COM DLL 一直说当我尝试使用 Visual Studio 2010 编译时没有调用方法`Encrypt`。`_SslTcpClientPtr`我使用的是 .NET 4.0 Framework。想法？

## 串口/MFC

```
extern "C" __declspec(dllexport) BSTR __stdcall Encrypt(BSTR encryptString)
{   
    CoInitialize(NULL);

    ICVTnsClient::_SslTcpClientPtr pDotNetCOMPtr;

    HRESULT hRes = pDotNetCOMPtr.CreateInstance(ICVTnsClient::CLSID_SslTcpClient);

    if (hRes == S_OK)
    {
        BSTR str;

        hRes = pDotNetCOMPtr->Encrypt(encryptString, &str);     

        if (str == NULL) {
            return SysAllocString(L"EEncryptionError");
        }
        else return str;    
    }

    pDotNetCOMPtr = NULL;

    return SysAllocString(L"EDLLError");

    CoUninitialize ();
} 
```

## 。网

```
namespace ICVTnsClient
{
    [Guid("D6F80E95-8A27-4ae6-B6DE-0542A0FC7039")]
    [ComVisible(true)]
    public interface _SslTcpClient
    {
        string Encrypt(string requestContent);
        string Decrypt(string requestContent);        
    }

    [Guid("13FE33AD-4BF8-495f-AB4D-6C61BD463EA4")]
    [ClassInterface(ClassInterfaceType.None)]
    public class SslTcpClient : _SslTcpClient
    {

       ...
       public string Encrypt(string requestContent) { // do something }

       public string Decrypt(string requestContent) { // do something }

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:56:14.037

那是因为您忘记了 [InterfaceType] 属性，因此可以提前绑定接口并且方法名称出现在类型库中。使固定：

```
[Guid("D6F80E95-8A27-4ae6-B6DE-0542A0FC7039")]
[ComVisible(true)]
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface _SslTcpClient
{
    // etc..
} 
```

ComInterfaceType.InterfaceIsDual 允许它同时是早期和晚期绑定。Microsoft 更喜欢默认的 IsIDispatch，较少使用后期绑定来射击你的脚。

# c# - 在 Visual Studios 中更快的图形方式？

> ID：11007797
> 
> 赞同：1
> 
> 时间：2012-06-13T03:22:51.613
> 
> 标签：c#, c++

在 Visual Studios 中，使用 Graphics 类，如果您尝试清除屏幕并在之后绘制图形，它将无法跟上并导致可怕的闪烁。

有没有更快的方法来做到这一点？

我希望能够在屏幕上绘制图形并以足够快的速度清除它们以跟上运动。有点像 OpenGL 的工作原理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T03:32:05.073

您想使用双缓冲。基本上，您提前将下一个图像从屏幕上绘制出来，然后将其移动到视图中以避免闪烁效果。C# 有一个[BufferedGraphics](http://msdn.microsoft.com/en-us/library/system.drawing.bufferedgraphics.aspx)类。[这](http://www.codeproject.com/Articles/12870/Don-t-Flicker-Double-Buffer)可能也会有所帮助。

# arrays - “数组推送”的 Postgres 数组追加和数组长度

> ID：11007800
> 
> 赞同：29
> 
> 时间：2012-06-13T03:23:17.380
> 
> 标签：arrays, postgresql

**当未提供数组的大小时，将元素添加到数组的最佳方法是什么？**

这`array_append`就是我能想到的：

```
UPDATE table SET array = array_append((SELECT array FROM table WHERE ...), 'element') WHERE ...; 
```

这`array_length`就是我能想到的：

```
UPDATE table SET array[array_length((SELECT array FROM table WHERE ...), 1)+1] = element; 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-13T04:41:53.067

最简单的事情是：

```
update table
set array = array_append(array, 'element')
where ... 
```

或者也许使用[`||`运算符](http://www.postgresql.org/docs/current/interactive/functions-array.html)：

```
update table
set array = array || 'element'
where ... 
```

这两者都相当于更常见`set n = n + 11`的数字。根据所涉及的类型，您可能需要`||`通过包含类型转换来消除您所指的运算符的歧义：

```
update table
set array = array || 'element'::text
where ... 
```

以便 PostgreSQL 知道您想要的是`array || element`版本`||`而不是`array || array`版本。感谢[ak5](https://stackoverflow.com/users/1273174/ak5)让我注意到这一点。

# java - System.out.println - println 在 Eclipse IDE 中拼写不正确

> ID：11007801
> 
> 赞同：0
> 
> 时间：2012-06-13T03:23:41.340
> 
> 标签：java, eclipse

我刚开始使用 Eclipse IDE，第一次测试我创建了一个文件并输入了以下内容：

```
class Vehicle {
   public Vehicle(String s) {
      System.out.println("X");
   }
   // public Vehicle() { }  
}
public class Car extends Vehicle {
   public Car(String s) {
      System.out.println("Y");
   }
   public static void main(String [] args) {
      new Car("Z");
   }
} 
```

但我立即收到错误说 println 拼写不正确。有人可以告诉我我是否缺少某些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:56:39.453

我想你已经创建了一个`txt`文件而不是一个`JAVA`文件。

因此，它无法识别与 java 相关的关键字，从而给出错误拼写错误。如果您更改`println`为`print`，它将停止给出错误。因为 Print 在英语中是一个正确的词。但是在这里您需要将文件的扩展名从更改`.txt`为`.java`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:02:50.497

在 Eclipse 中，单击 File Menu -> New -> Class 将 Class name 命名为 Car，然后单击 Finish 按钮。它将创建 Car.java 文件。然后在 Car.java 文件中写下面的代码

```
class Vehicle { 
   public Vehicle(String s) { 
      System.out.println("X"); 
   } 
    public Vehicle() { }  
  }
 public class Car extends Vehicle {  
  public Car(String s) {    
   System.out.println("Y");   
 }   
 public static void main(String [] args) { 
      new Car("Z"); 
   } 
} 
```

在车辆类中，需要默认构造函数，因为类 Car 扩展车辆类。否则将显示错误，因为“隐式超级构造函数 Vehicle() 未定义。必须为 Car 类的构造函数显式调用另一个构造函数。现在只需运行文件的 Java 应用程序。它将在控制台上显示输出为 Y。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-12-26T20:17:42.437

我刚刚收到此错误，修复方法是重新启动 Eclipse。这个错误似乎很随机。

# sql - 如何用一个变量搜索多列

> ID：11007805
> 
> 赞同：0
> 
> 时间：2012-06-13T03:24:41.113
> 
> 标签：sql, sql-server

我想使用 1 个变量搜索一张表和多列。我的代码如下所示：

```
SELECT        lCustomerID, sLastName, sFirstName, sAddress1, sAddress2, 
  sCity, sState, sZipcode , @search AS Expr1
FROM            Customers
WHERE (sLastName = N'Includes @search') 
OR    (sFirstName = N'includes @search') 
AND   (sBarcode = N'includes @search') 
```

我希望它包含字符串 not =

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:47:04.873

假设您打算拥有所有 OR，并且“我希望它包含字符串”意味着您想要部分匹配（例如，搜索“John”会产生“Johnson”和“RoJohn”），那么您正在寻找 LIKE 关键字：

```
WHERE sLastName  LIKE N'%' + @search + '%'
   OR sFirstName LIKE N'%' + @search + '%'
   OR sBarCode   LIKE N'%' + @search + '%'; 
```

# ruby - 开源 Siri 克隆

> ID：11007807
> 
> 赞同：1
> 
> 时间：2012-06-13T03:24:53.243
> 
> 标签：ruby, open-source, automation, siri

我正在考虑在 Ruby 中创建一个开源的 Siri 克隆（不是 Siri 代理，不是语音识别部分，而是“解析问题或命令并采取行动或返回响应”）。类似于hubot，但更像Siri，并使其成为一个可以包含在任何Ruby项目中的库。在我开始做这件事之前，我想确保这样的事情不存在或尚未开始。你知道一个开源的 Siri 克隆吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:40:35.687

Florian Hanke 有一个名为 James 的开源项目，我看过它的演示并且有类似的目标，尽管它“所做”的事情是根据您自己的需要用 ruby​​ 编写的。有点像带有状态机的语音识别路线图。

[https://github.com/floere/james](https://github.com/floere/james)

# php - 来自新 php 文件的 Magento 静态块

> ID：11007808
> 
> 赞同：0
> 
> 时间：2012-06-13T03:25:07.073
> 
> 标签：php, magento

在 Magento 电子商务系统中，我创建了新的 php 页面来列出数据库中的一些产品，我需要让这个列表出现在主页的左列或右列中。我不知道怎么做。我试图将 php 文件内容放在新的静态块内容中，但它对我不起作用，而且我还不熟悉 Magneto 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:05:45.360

如果您是 Magento 新手，最简单的方法是：

1.  命名您的 php 文件，例如：`something.phtml`

2.  将您的文件放入： `app/design/frontend/default/modern/template/catalog/`

3.  登录到`admin`后台。

4.  转到`CMS/pages`并单击`Home page`条目。将选项卡更改为`design`。

5.  在`Layout Update XML`定位`<reference name="right">`段中并将其添加到其中：

    `<block type="core/template" name="my_prod_list" template="catalog/something.phtml" />`

6.  点击`Save page`右上角，瞧！您的元素应该在主页上可见。

您可能必须清除 magento 缓存才能使其正常工作。

# c# - 什么时候不使用 GUID 主？

> ID：11007811
> 
> 赞同：-1
> 
> 时间：2012-06-13T03:25:24.390
> 
> 标签：c#, sql-server, guid

我需要记录令牌错误响应，只有两种类型的错误。

“请求错误”和“系统错误”

既然这些错误不会改变，为什么要使用 GUID 作为主键，为什么我不能将它们存储为“RequestError”和“SystemError”？

（我的同事说我们应该将其存储为唯一标识符，因为其他所有内容都存储为唯一标识符嗯，如果我们稍后将这些错误更改为其他内容很容易！嗯，但它们不会改变？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T03:47:17.890

根据我如何解释您的（标题）问题，我建议阅读[http://www.codinghorror.com/blog/2007/03/primary-keys-ids-versus-guids.html](http://www.codinghorror.com/blog/2007/03/primary-keys-ids-versus-guids.html)

这是一个简短的阅读并且有一个优点/缺点列表，我倾向于不同意 guid 不能成为非常好的主键（或者更多，所以我觉得作为一个声明有点笼统）

我认为如果您的记录是“RequestError”或“SystemError”，则 guid 可能超出要求，如果表要保存大量记录，则简单的 int 主键可能更有效。

还有一个指向[http://databases.aspfaq.com/database/what-should-i-choose-for-my-primary-key.html](http://databases.aspfaq.com/database/what-should-i-choose-for-my-primary-key.html)的链接，它有更多的优点/缺点

# r - R 行表示按组（或唯一 ID）在多列上

> ID：11007813
> 
> 赞同：11
> 
> 时间：2012-06-13T03:26:12.220
> 
> 标签：r, aggregate, data.table, mean

我有一个如下所示的数据框（20,000 行 x 49 列）。每行都有一个唯一的名称 (ID)，每个 ID 在 3 列中有 3 个重复读数（例如 D15C D15C.1 D15C.2）。列名的前 4 个字母（“D15C”）是组名。我需要按组名对列进行平均（例如平均 D15C、D15C.1 和 D15.2 以获得 D15C），因此最终表将从 49 列合并为 16 列。

```
 ID  D04C D04C.1  D08H D08H.1 D08H.2  D15C D15C.1 D15C.2  D15L D15L.1 D15L.2
1 1367452_at 11.11  10.93 11.85  10.94  10.87 10.73  10.62  10.85 10.73  10.77  10.52   
2 1367453_at  9.65   9.94  9.78   9.68   9.67  9.86   9.71   9.82  9.74   9.71   9.76   
3 1367454_at 10.19  10.36  9.68  10.07  10.08 10.35  10.26  10.32 10.27  10.19  10.47   
(… 20000 rows) 
```

为了使用聚合，我将其转置并编辑到以下数据框：

```
 ID 1367452_at 1367453_at 1367454_at ... ...
1   D04C      11.11       9.65      10.19
2   D04C      10.93       9.94      10.36
3   D08H      11.85       9.78       9.68
4   D08H      10.94       9.68      10.07
5   D08H      10.87       9.67      10.08
6   D15C      10.73       9.86      10.35
7   D15C      10.62       9.71      10.26
8   D15C      10.85       9.82      10.32
9   D15L      10.73       9.74      10.27
10  D15L      10.77       9.71      10.19
11  D15L      10.52       9.76      10.47 
```

但是，以下聚合（“agg”是数据框名称）需要 370 秒才能完成。问题是我有100张这样的桌子在等……

```
agg <- aggregate(x = agg[, 2:ncol(agg)], by = list(ID = agg$ID), FUN = "mean", na.rm = T) 
```

所以我将其转换为 data.table 并运行数据表方法。

```
dt <- as.data.table(agg)
setkey(dt, ID)
dt2 <- dt[,lapply(list(dt[2:ncol(dt)]),mean),by = ID] 
```

但几分钟后收到一条错误消息：

```
Error: cannot allocate vector of size 144 Kb
In addition: Warning messages:
1: Reached total allocation of 1535Mb: see help(memory.size) 
2: Reached total allocation of 1535Mb: see help(memory.size) 
```

不知道出了什么问题。无法使用 dt[1:5,1:5] 来查看 dt 的“头部”部分，并且 head(dt) 返回了太多穿过屋顶的行我也看不到“头部”。不知道现在该怎么办。

我可以在一列中列出 ID（如在 data.frame 中）或转置表格并在第一行中列出 ID（如在 data.table 中）。无论哪种方式，有没有更快的方法来聚合数据？非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T15:17:13.003

这 ：

```
dt2 <- dt[,lapply(list(dt[2:ncol(dt)]),mean),by = ID] 
```

应该只是：

```
dt2 <- dt[, lapply(.SD,mean), by=ID] 
```

`dt[2:ncol(dt)]`实际上是占用了行的一个子集。

学习`data.table`语法的一种快速方法是在提示符下运行`example(data.table)`并在提示符下完成示例。如果您搜索“#apply through columns by group”，您会找到这个示例。

And to learn `.SD`, best way is to search `?data.table` for the string `".SD"` and then also there are some good questions and very detailed answers about `.SD` in this data.table tag which are returned by a search "[data.table] .SD".

# java - 将嵌套对象编组为“平面”XML 结构

> ID：11007814
> 
> 赞同：5
> 
> 时间：2012-06-13T03:26:18.313
> 
> 标签：java, xml, jaxb

我如何编组一个对象层次结构，使得组件对象不成为嵌套的 XML 元素，而是它们的属性成为根元素的直接子元素，它们的名称以它们的类型为前缀。

例如，给定：

```
 (A)
public class Customer {

    protected String firstName;
    protected String lastName;
    protected Address address;
}

public class Address {

    protected String street;
    protected String city;
} 
```

使用通常的 JAXB 注释会导致

```
 (B)
<customer>
    <firstName>Juan</firstName>
    <lastName>dela Cruz</lastName>
    <address>
        <street>123 Rizal Avenue</street>
        <city>Manila</city>
    </address>
</customer> 
```

但是，相反，我需要编组相同的

```
 (C)
<customer>
    <firstName>Juan</firstName>
    <lastName>dela Cruz</lastName>
    <address_street>123 Rizal Avenue</address_street>
    <address_city>Manila</address_city>
</customer> 
```

如果有一些 JAXB 咒语来解决我的需求，那就太好了，因为我已经在使用 JAXB 来解决这个问题的大部分问题。事实上，这些对我的具体情况提出了一些限制：

1.  **(A)**中的 Java 类由 JAXB 从与**(B)**中的 XML 结构对应的现有模式生成。我不希望维护生成的类的修改版本。
2.  我不拥有或维护上述架构。实际的模式非常大，并且经常会进行细微的修改。想出和维护一个等效的模式是很乏味的。此外，为了跟上模式修改，我依赖 JAXB 自动生成类。
3.  如果它使事情变得更容易，嵌套最多只有一层。在示例中，`Address`不会包含任何其他复杂类型。

我正在查看`@XmlPath`MOXy 的注释，但我不知道如何获取前缀为**(C)**的节点名称。

我梦想有一个解决方案，其中提供正确的 JAXB 注释的一些 xjc 定制让我继续前进，但到目前为止，从我的搜索来看，这看起来不太可能。任何非 JAXB 解决方案就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:56:16.377

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以使用 EclipseLink JAXB (MOXy) 中的外部映射文件将第二个映射应用到您的对象模型，并使用`@XmlPath`扩展来展平对象模型。

**外部映射文件 (oxm.xml)**

如果您的模型类位于名为`forum11007814`.

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11007814"
    xml-accessor-type="FIELD">
    <java-types>
        <java-type name="Customer">
            <xml-root-element/>
            <java-attributes>
                <xml-element java-attribute="address" xml-path="."/>
            </java-attributes>
        </java-type>
        <java-type name="Address">
            <java-attributes>
                <xml-element java-attribute="street" name="address_street"/>
                <xml-element java-attribute="city" name="address_city"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**演示**

下面是演示如何在创建`JAXBContext`.

```
package forum11007814;

import java.io.File;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String,Object>(1);
        properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, "forum11007814/oxm.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Customer.class}, properties);

        File xml = new File("src/forum11007814/c.xml");
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Customer customer = (Customer) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(customer, System.out);
    }

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要添加一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其中包含以下条目。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**c.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<customer>
   <firstName>Juan</firstName>
   <lastName>dela Cruz</lastName>
   <address_street>123 Rizal Avenue</address_street>
   <address_city>Manila</address_city>
</customer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:18:23.157

我使用[XStream Converter](https://x-stream.github.io/converter-tutorial.html)解决了这个问题。它检查`@XmlType`注释以确定是否正在转换 JAXB bean。所有其他类型都通过默认转换器。

尽管以 JAXB 为中心的解决方案会很好，但 XStream 提供了一个非常简单明了的解决方案。

```
public class FlatXmlConverter implements Converter {

    private static final Logger log =
            LoggerFactory.getLogger(NvpConverter.class);

    @Override
    public void marshal(Object source, HierarchicalStreamWriter writer,
            MarshallingContext context) {
        Class<? extends Object> sourceClass = source.getClass();
        String prefix = (String) context.get("prefix");
        for (Field field : sourceClass.getDeclaredFields()) {
            if (!field.isAccessible()) {
                field.setAccessible(true);
            }
            String name = field.getName();
            Class<?> type = field.getType();

            try {
                Object value = field.get(source);
                if (value != null) {
                    if (type.isAnnotationPresent(XmlType.class)) {
                        context.put("prefix", name);
                        context.convertAnother(value);
                        context.put("prefix", null);
                    } else {
                        String nodeName;
                        if (prefix == null) {
                            nodeName = name;
                        } else {
                            nodeName = prefix + "_" + name;
                        }

                        writer.startNode(nodeName);
                        context.convertAnother(value);
                        writer.endNode();
                    }
                }
            } catch (IllegalArgumentException ex) {
                log.error("IllegalArgumentException", ex);
            } catch (IllegalAccessException ex) {
                log.error("IllegalAccessException", ex);
            }
        }
    }

    @Override
    public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    @SuppressWarnings({"rawtypes", "unchecked"})
    public boolean canConvert(Class type) {
        log.debug("canConvert({})", type);
        return type.isAnnotationPresent(XmlType.class);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:58:06.730

我很确定没有标准的方法可以做到这一点。您可以做的是创建两个 java 类，一个具有层次结构，一个具有平面结构，并使用 java introspection 将数据从一个复制到另一个，然后使用第二个创建 xml。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T22:26:39.993

注意：我是 juffrou-xml 的创建者，它使您能够以一种简单的方式做到这一点：只需在 xml-mapping 文件中配置它：

```
<root-element xml="Customer" type="org.yourpackage.Customer">
  <element property="firstName" />
  <element property="lastName" />
  <element property="address.street" xml="address_street"/>
  <element property="address.city" xml="address_city"/>
</root-element>

<root-element xml="Address" type="org.yourpackage.Address" /> 
```

通过这种方式，将嵌套的 bean 编组为扁平的 XML 结构很容易。反过来——解组——将按预期创建对象图。

[在这里](http://juffrou.sourceforge.net/juffrou-xml)查看 Juffrou-XML 。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-13T06:44:33.960

您是否检查过 JiBX（将 XML 数据绑定到 Java 对象的工具）？ [http://jibx.sourceforge.net/binding/tutorial/binding-structures.html](http://jibx.sourceforge.net/binding/tutorial/binding-structures.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-14T07:57:53.077

使用@XmlID 和@XmlIDREF。并使用所有对象的列表创建类。

# jquery - MVC3 - 如何将表单数据发送到使用 jQuery ajax 获取对象的操作

> ID：11007816
> 
> 赞同：0
> 
> 时间：2012-06-13T03:26:37.540
> 
> 标签：jquery, asp.net-mvc-3

我有一个采用视图模型对象的操作

```
[HttpPost]
public String Edit(UserGroupEditViewModel model)
{/* ... */} 
```

现在我想使用 jQuery 异步发送表单数据

```
$('#user_dialog .edit').click(function (event) {
        event.preventDefault();

        var ug = $(this).parent('form').serialize();

        $.ajax({
            url: urlEditUserGroup,
            async: true,
            type: 'POST',
            data: ug,
            //datatype: 'json',
            //contentType: 'application/json;charset=utf-8',
            success: function (data) {
               alert(data);
             }
        });
  }); 
```

但是，我无法接收表单数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T04:26:50.640

我认为表单没有被序列化，请尝试（如@Beetroot-Beetroot 所述）

```
var ug = $(this).closest('form').serialize();

 data: {UserGroupEditViewModel :ug}, 
```

此外，您可以为您的表单分配一个 id 或一个类，以便可以轻松地选择表单进行序列化。

尝试通过放置来调试您的代码

```
 var ug = $(this).closest('form').serialize();
console.log(ug); 
```

检查序列化是否产生结果。

# python - mod_wsgi 和 django 部署

> ID：11007818
> 
> 赞同：0
> 
> 时间：2012-06-13T03:26:47.557
> 
> 标签：python, django, wsgi, apache

我安装了 mod_wsgi，一切都在我的开发服务器上运行。我正在运行 centos，但似乎无法弄清楚要添加到我的 httpd.conf 中的内容。mysite.com 是否像我要从中发送请求的主要 URL？应该`/path/to/mysite.com`是这样`/home/dbs/www`吗？让我们假设我的主域是 hello.com 并且位于`/home/dbs/www` 我的 wsgi.py 路径是正确的。

这就是我到目前为止所拥有的

```
WSGIScriptAlias / /home/pycode/main/main/wsgi.py
WSGIPythonPath /path/to/mysite.com

<Directory /path/to/mysite.com/mysite>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:33:11.207

也许你应该去看：

[http://code.google.com/p/modwsgi/wiki/WhereToGetHelp?tm=6#Conference_Presentations](http://code.google.com/p/modwsgi/wiki/WhereToGetHelp?tm=6#Conference_Presentations)

作为常见问题的介绍和解释。

尽管与官方 Apache Software Foundation 布局相比，它并未涵盖特定 Linux 发行版如何重组 Apache 配置文件的细节。

此外，演示文稿涵盖了 Django，因为配置是在 1.4 之前完成的。您上面的一般布局是针对 Django 1.4 的，因此您需要将演示文稿中涵盖的内容调整为较新的 Django 1.4 做事方式。

# wcf - WCF ServiceReference 没有获取数据？

> ID：11007819
> 
> 赞同：0
> 
> 时间：2012-06-13T03:26:52.300
> 
> 标签：wcf

## 我已经创建了 wcf 应用程序：这个合同：

> ```
> namespace WcfServiceLibrary1
> {
>     [ServiceContract]
>     public interface IService1
>     {
>         [OperationContract]
>         string GetData(int value);   
> 
>     }
> } 
> ```

## 这是服务：

> ```
> namespace WcfServiceLibrary1
> {
> 
>     public class Service1 : IService1
>     {
>         public string GetData(int value)
>         {
>             return string.Format("You entered: {0}", value);
>         }
> }
> } 
> ```

## **这是 App.config**

```
 <?xml version="1.0"?>

<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="2097151"
    useFullyQualifiedRedirectUrl="true"
    executionTimeout="144000"   />
  </system.web>
  <system.serviceModel>
    <!--<bindings>
      <basicHttpBinding>
        <binding name="FileTransferServicesBinding" transferMode="Streamed" messageEncoding="Mtom" maxReceivedMessageSize="2000000">
        </binding>
      </basicHttpBinding>
    </bindings>-->

    <bindings>
      <wsDualHttpBinding>
        <binding name="WSDualHttpBinding_IChatService" closeTimeout="00:03:00" openTimeout="00:03:00" receiveTimeout="00:10:00" 
                 sendTimeout="00:03:00" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard" 
                 maxBufferPoolSize="104857600" maxReceivedMessageSize="104857600" messageEncoding="Mtom" textEncoding="utf-8" useDefaultWebProxy="true">
          <readerQuotas maxDepth="104857600" maxStringContentLength="104857600" maxArrayLength="104857600" maxBytesPerRead="104857600" maxNameTableCharCount="104857600"/>
          <reliableSession ordered="true" inactivityTimeout="00:10:00"/>
          <security mode="None">
            <message clientCredentialType="None" negotiateServiceCredential="false" algorithmSuite="Default"/>
          </security>
        </binding>
      </wsDualHttpBinding>
    </bindings>
    <services>
      <!--<service behaviorConfiguration="MyServiceTypeBehaviors" name="FileService.FileTransferService">
        <endpoint address="mex" binding="basicHttpBinding" bindingConfiguration="FileTransferServicesBinding" contract="FileService.IFileTransferService"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080/FileTranfer"/>
          </baseAddresses>
        </host>
      </service>-->
      <service behaviorConfiguration="MyServiceTypeBehaviors" name="WcfServiceLibrary1.Service1">
        <endpoint address="mex" binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_IChatService" contract="WcfServiceLibrary1.IService1"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://117.5.36.172:23000/FileTranfer"/>
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyServiceTypeBehaviors">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

## 在地址添加服务引用后：“http://117.5.36.172:23000/FileTranfer”我运行服务正常。创建后：

> ServiceReference1.Service1Client 客户端 = new ServiceReference1.Service1Client();
> 
> ```
>  Console.WriteLine(client.State); ====> return Created
>                 Console.WriteLine(client.GetData(5)); ==>Not return value, seems 
> ```

## 这不是访问。我打开防火墙端口 23000 并添加转发端口路由器。请帮助我谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:44:06.940

WSDualHttpBinding 和大多数人连接到 Internet 的方式存在一个真正的问题——正如您已经发现的那样，至少对于 IPv4，位于路由器后面意味着让 NAT 毁了聚会。

使用 WSDualHttpBinding，您有两个连接：从客户端到服务器，以及从服务器到客户端。

通常，客户端到服务器的连接没什么大不了的——大多数通信都是通过互联网完成的。在您的情况下，您似乎位于防火墙后面，并且您已经打开/转发了所需的端口。但这并不能解决第二个连接的问题——从服务器到客户端。基本上，第二个连接发生的情况是客户端充当服务器，而服务器充当客户端。因此，您需要对连接到您的服务的每个客户端进行相同的端口打开/转发，因为它也充当服务器！这当然是对您服务的每一位用户提出的不合理要求。这就是为什么 WSDualHttpBinding 更适合服务器到服务器的通信，其中设置是一次性的。

我建议您切换到 NetTcpBinding，而不是试图让 WSDualHttpBinding 工作。由于 WSDualHttpBinding 和 NetTcpBinding 都是 WCF-only、Microsoft-only、专有连接方案，因此您不会在互操作性方面损失太多。另一方面，你得到的是很多：

NetTcpBinding 仅使用从客户端到服务器的单一连接，同时允许像 WSDualHttpBinding 那样的两种方式通信。因此，无需在客户端处理端口打开/转发 - NAT 不是问题。通信协议是二进制的，比 WSDualHttpBinding 中使用的纯文本 XML 更紧凑。更少的数据传输意味着更好的服务。使用 NetTcpBinding，您可以在客户端断开连接时获得即时通知，因为套接字已关闭。无需像使用 WSDualHttpBinding 那样等待 HTTP 超时。单个连接意味着没有任何东西可以不同步 - 使用 WSDualHttpBinding，两个连接中的一个可能会断开，而另一个可能仍然处于活动状态，只有一种方式通信。WCF 有办法解决这个问题，但它'

切换到 NetTcpBinding 通常只需要更改配置 - 代码保持不变。它很简单，速度很快，不那么麻烦，最重要的是 - 它可以工作。

感谢[使用 wsDualHttpBinding 通过 Internet 连接到 WCF 服务超时](https://stackoverflow.com/questions/4526284/connecting-over-internet-to-wcf-service-using-wsdualhttpbinding-times-out)

# php - HTTP_REFERER 重定向 php 代码不起作用？

> ID：11007821
> 
> 赞同：0
> 
> 时间：2012-06-13T03:27:16.267
> 
> 标签：php, http, redirect, referer

以下脚本位于我网站的标题中。我想使用谷歌分析来监控指定网站发送到我要去的网站的流量。该脚本会将用户从我的网站重定向到我正在吸引流量的网站。我测试了脚本，它没有重定向。我在另一个网站上放置了指向我网站的链接，我必须测试脚本，但我没有被重定向到我试图吸引流量的网站。有任何想法吗？

```
 <?php
 $ref = $_SERVER["HTTP_REFERER"];
 if ( $ref != 'http://www.websitetrafficiscomingfrom.com' )
exit;
 ?>

 <?php if ( $ref == 'http://www.websitetrafficiscomingfrom.com' ) { ?>

 <script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-32605120-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script>

 <!-- <?php } else if ($_SERVER['HTTP_REFERER'] != "") { ?>

 <script type="text/javascript">
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32554427-2']);
  _gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();

 </script> -->

 <meta http-equiv='REFRESH" content='0;url=websitetrafficissupposedtogoto.com'>

 <?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:54:32.363

对于初学者，referrer 将始终为空白或完整 URL（`/`如果需要，包括尾随 ）。因此，它永远不会是您要求的价值。因此，你总是会死掉并导致一个什么都不做的空白页。

除此之外，我真的想知道你在做什么。与随附的代码相比，您的问题似乎没有任何意义，而且那里的代码似乎是多余的。我的意思是，您检查 if `a != b`，如果是则退出。否则，检查 if `a == b`，好像它可能突然不再是真的一样。更糟糕的是，你有一个注释掉的`else`块，表明在某些时候你显然打算再次检查 if `a != b`，即使你的代码已经死了，如果是这样的话......

我建议完全删除此代码。它使用起来既无用也不可靠`HTTP_REFERER`，我唯一会使用它的目的是作为阻止大多数盗链尝试的微弱障碍。即便如此，也只能谨慎行事。

# c# - 如何使用 PowerShell 使用 C# DLL 中存在的类的新对象——不同的数据类型

> ID：11007824
> 
> 赞同：1
> 
> 时间：2012-06-13T03:27:47.213
> 
> 标签：c#, list, object, dll, powershell

编辑：添加了使用 C# 对象的 Powershell 代码。真的很容易在 C# 中完成这一切并在 Powershell 中使用它。谢谢！

我在我的 PowerShell 代码中使用了 C# 中的两个对象。我想做一个FeatureObject，设置它的变量；然后制作 FeatureAttributes 并将其添加到 FeatureObject 中的列表中。我可以设置和获取字符串、整数等。但我无法将 FeatureAttribute 添加到 FeatureObject 的列表中。

C＃

```
using System;
using System.Collections;
using System.Collections.Generic;
public class FeatureObject {
    public string layerName;
    public int numFeatures;
    public string geometry;
    public string unit;
    List<FeatureAttr> objFtcAttr;
    public FeatureObject()
    {
        objFtcAttr = new List<FeatureAttr>();
    }   
    public List<FeatureAttr> ftcAttr { get; set; }
} 

public class FeatureAttr {
    public string AttrKeyName;
    public string AttrDataType;
    public string AttrNumericRange;
    List<String> allValuesOfAttr = new List<String>();
    public void setValueOfAttr (string value) {
            this.allValuesOfAttr.Add(value);
    }
    public List<String> getValuesOfAttr() {
        return(this.allValuesOfAttr);
    }
} 
```

附言

```
Add-Type -Path C:\projects\bin\FCObject.dll
$ftcObj = New-Object FeatureObject
$ftcAttr = New-Object FeatureAttr
$ftcObj = New-Object FeatureObject
$ftcObj.geometry = $geometry
$ftcObj.ftcAttr.Add($ftcAttr) 
```

另外：我是否总是需要像下面和上面那样明确声明我的 getter 和 setter？我不能像 $ftcObj.geometry = $geometry 那样获取和设置数据吗？

```
public string geometry
    {
        get { return geometry; }
        set { geometry = value; }
    } 
```

或者

```
public string geometry {get; set; } 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:08:12.153

我可能会修改`FeatureObject`以实例化默认列表：

```
public class FeatureObject 
{
    public FeatureObject()
    {
        ftcAttr = new List<FeatureAttr>();
    }
    public List<FeatureAttr> ftcAttr {get; set; }
} 
```

然后，您只需开始在 PowerShell 中添加内容即可。

如果要在 PowerShell 中创建它，请使用以下语法：

```
$ftcObj = New-Object FeatureObject
$ftcObj.ftcAttr = New-Object 'Collections.Generic.List[FeatureAttr]' 
```

您必须引用泛型列表的类型字符串，并且必须使用完整的、命名空间限定的类型名称`FeatureAttr`。

最后，显式声明属性或使用 C# 的自动属性语法都没有关系。编译器将自动属性转换为显式的 getter/setter。

# python - 使用来自 python 的 subprocess.call 的参数运行 C 代码时遇到问题

> ID：11007825
> 
> 赞同：0
> 
> 时间：2012-06-13T03:27:48.307
> 
> 标签：python, c, subprocess

我对 Python 有点陌生，并试图弄清楚一些事情。我正在尝试编写一个快速脚本来对我编写的 C 代码进行参数测试。

对我来说，当我尝试使用 subprocess.call 来运行我的 C 代码时。C 代码有一个参数，即在代码本身中打开的文件的名称。

例如：

```
filename = myclass.path + myclass.inputname
subprocess.call(["./code", filename]) 
```

这将运行代码，并传递正确的文件名，但 C 代码根本不会从文件中读取任何信息。如果我通过类似的东西：

```
./code "filename" 
```

到shell，其中“文件名”实际上是我在python中使用打印命令时打印的内容，它工作得很好。

只是为了完整起见，以下是我的 C 代码中相关的行：

```
in = fopen(argv[1], "r");
fscanf(in, "%s %d %d", variable1, &variable2, &variable3); 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:09:37.410

Aside from the obvious, that you are not checking the result of `fopen` (are you using absolute path names?), your `fscanf` is wrong. Try:

```
fscanf(in, "%s %d %d", variable1, &variable2, &variable3); 
```

Another possibility is that the file is not in the format that `fscanf` expects - it is particularly picky about that and can easily crash your program if it is wrong.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:40:10.067

添加`printf("%s\n", argv[1]);`到您的 C 代码将让您看到它正在接收什么。文件名是否包含空格？您可能还想检查`argv[2]`以防万一。

另外，检查来自的返回值`fopen()`。是`NULL`吗？（在这种情况下，它无法打开文件）。

# php - 使用 mysql 中的递归 php 创建数组

> ID：11007826
> 
> 赞同：2
> 
> 时间：2012-06-13T03:27:49.943
> 
> 标签：php, mysql, arrays, recursion

我需要从这样组织的 mysql 数据库创建一个数组

```
id    description    parentId    
1      Level 1        0           
2      Level 2        0           
3      Level 1a       1   
4      Level 1b       1 
5      Level 1a1      3
6      Level 1a1a     5 
```

所以输出是这样的：

```
Level 1
      Level 1a
           Level 1a1
                Level 1a1a
      Level 1b
Level 2 
```

但是，我当前的代码仅输出到第二级，然后将所有其他孩子设为自己的父母。以下是当前代码：

```
$query = "SELECT * FROM pB_test ORDER BY parentId ASC";
$result = mysql_query($query) or die ('Database Error (' . mysql_errno() . ') ' . mysql_error());

$tree = array();

while($row = mysql_fetch_assoc($result)) 
{
    if($row['parentId'] == 0) 
    {
        $row['Children'] = array();
        $tree[$row['id']] = array(
                                'id' => $row['id'], 
                                'description' => $row['description'], 
                                'parentId' => $row['parentId']
                            );
    } 
    else 
    {
        $tree[$row['parentId']]['Children'][$row['id']] = $row['description'];
    }
}

$count = array_keys($tree);

foreach ($count as $array)
{
    ksort($tree[$array]['Children']);
}

echo print_r($tree, true); 
```

任何朝着正确方向的帮助或推动都会很棒。干杯

**更新**：工作代码

```
 $results = array();
while($row=mysql_fetch_assoc($dbresult)) 
{ 
    $results[]=$row;

    $tree = null;
foreach($results as $result)
{
    $thisref = &$refs->{$result['id']};
    foreach($result as $k => $v)
    {
        $thisref->{$k} = $v;
    }
    if ($result['parentId'] == 0) {
        $tree->{$result['id']} = &$thisref;
    } else {
        $refs->{$result['parentId']}->children->{$result['id']} = &$thisref;
    }
}

$tree; // contains the newly sorted tree.

}

print_r($tree); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T03:41:40.280

我发现这段用于对父子数组进行分组的代码非常棒。我已经在 4 个深度进行了测试，没有任何问题。虽然它不是递归函数。

```
$tree = null;
foreach($results as $result)
{
    $thisref = &$refs->{$result['id']};
    foreach($result as $k => $v)
    {
        $thisref->{$k} = $v;
    }
    if ($result['parentId'] == 0) {
        $tree->{$result['id']} = &$thisref;
    } else {
        $refs->{$result['parentId']}->children->{$result['id']} = &$thisref;
    }
}

$tree; // contains the newly sorted tree. 
```

您可能需要对其进行一些修改才能完全适应您的情况。但基本上它遍历所有结果并通过引用组合它们。

请注意，结束`$tree`数据类型是 an`object`而不是`array`

祝你好运

**更新**

您可以这样创建数组

```
$query = "SELECT * FROM pB_test ORDER BY parentId ASC";
$dbresult = mysql_query($query) or die ('Database Error (' . mysql_errno() . ') ' . mysql_error());

$results = array();
while($row=mysql_fetch_assoc($dbresult)) 
{ 
    $results[]=$row 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:49:51.410

如果您在创建对象时创建了一个从 id 映射到对象的数组，那么这可能是最简单的，这样您就可以轻松地查找嵌套对象。基本上：

```
$tree = array();
$lookup = array();

while($row = mysql_fetch_assoc($result))  
{
    $object = array('id' => $row['id'],        
                    'description' => $row['description'],        
                    'parentId' => $row['parentId']);

    $lookup[$row['id']] = $object;

    $parentId = $row['parentId'];
    if ($parentId == 0)
    {
        $tree[] = $object;
    }
    else
    {
        $lookup[$parentId]['Children'][] = $object;
    }
} 
```

# c# - 如何同步定时器事件？

> ID：11007827
> 
> 赞同：2
> 
> 时间：2012-06-13T03:28:05.480
> 
> 标签：c#, multithreading, timer, synchronization

我正在开发 ac# windows 窗体 GUI 监控应用程序，它读取数据库表并发送 MAIL 和 SMS 警报。因此，为了监视数据库并发送邮件和 SMS，我使用了几秒钟后调用的 c# Timer，一旦发送和发送邮件，GUI 列表框将通过执行异步功能的后台工作人员进行更新。

在异步函数中，我获取数据库值并分拆两个线程来发送邮件和短信。

但是如果需要这么长时间，定时器线程就会重叠并且异步函数会重叠。所以它会多次发送相同的邮件。如何解决？是因为 Timer 重叠而发生的吗？

```
t.Interval = cn.MtimeOut;
t.Enabled = true;
t.Tick += new System.EventHandler(OnTimerEvent); 
```

OnTimerEvent 实现

```
private void OnTimerEvent(object sender, EventArgs e)
{
    lock (_objLock)
    {
        this.startMonitor();
    }
}

private void startMonitor()
{
    MyList = new List<string>();
    var bw = new BackgroundWorker();
    bw.DoWork += (o, args) => asyncMonitor(); /* function which does sending
                                                 mail SMS and database reading*/

    bw.RunWorkerCompleted += (o, args) => UpdateControl();//update list box
    bw.RunWorkerAsync();
}

private void asyncMonitor()
{
    /* READ DATABASE TABLES AND DO CALCULATIONS 
       WHICH TAKES CONSIDERABLE AMOUNT OF TIME */

    // Thread for sending MAIL by execute MailLogEvent method
    Thread trd = new Thread(MailLogEvent); 

    // Thread for sending SMS by execute SmsLogEvent method
    Thread trd2 = new Thread(SmsLogEvent);

    //parameters for above functions
    trd2.Start(lg);
    trd.Start(lg);
} 
```

我什至对 Timer 事件和 SMS MAIL 发送方法都使用了锁，但它不同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:33:40.900

几个月前我做过类似的事情。

创建一个共享类来维护队列中的邮件并确保使用 lock { } 并维护队列中邮件的唯一性

因此，如果花费太多时间并且计时器再次使用同一组邮件触发，它将知道它存在于队列中并且不会尝试再次发送它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:33:41.290

一种方法是将“锁”添加到数据库中。使用这种方法，您可以在每个要发​​送的 SMS/邮件中添加一个类似“状态”的列。当计时器检索到一行并将其排队发送时，它会将记录的状态更新为“待处理”或类似的东西。然后，当它实际发送消息时，它会将状态更新为“完成”。随后的重叠计时器调用将知道不处理处于“挂起”状态的记录。

# c# - C# 应用程序在加载时读取错误的设置

> ID：11007830
> 
> 赞同：2
> 
> 时间：2012-06-13T03:28:39.943
> 
> 标签：c#, properties.settings

我有这个评估者简单的应用程序，我在其中使用设置。为此，我创建了自己的属性设置文件。到目前为止，一切都很好。这一切都很好。设置在那里，我可以使用它们。

我试图能够在运行时更改这些设置。从它的外观来看，这也很有效。查看`user.config`运行应用程序的用户下的应用程序，正在保存设置。但是，下次我加载应用程序时，它似乎会忽略保存的设置并使用默认设置。我可以再次更改设置并保存它们，结果相同。`user.config`正在更新，但旧的默认设置总是在加载时显示。

我将设置加载到 ListView 中。从那里更改值，然后循环遍历 ListView，再次保存设置。

这是我在 ListView 中加载设置的地方：（`Properties.Main`是我创建的设置）

```
private void Settings_Load(object sender, EventArgs e)
{
    Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.PerUserRoamingAndLocal);
    textBox1.Text = config.FilePath;

    foreach (SettingsProperty Setting in Properties.Main.Default.Properties)
    {
        ListViewItem settingitem = new ListViewItem();

        settingitem.Text = Setting.Name.ToString();
        settingitem.SubItems.Add(Setting.DefaultValue.ToString());

        listView1.Items.Add(settingitem);

    }
    listView1.AutoResizeColumns(ColumnHeaderAutoResizeStyle.ColumnContent);
} 
```

这是我保存设置的地方。

```
private void button1_Click(object sender, EventArgs e)
{
    try
    {
        foreach (ListViewItem setting in listView1.Items)
        {
            Properties.Main.Default[setting.Text] = setting.SubItems[1].Text; ;
            Properties.Main.Default.Save();
        }
    }
    catch (Exception exp)
    {
        MessageBox.Show(exp.Message);
    }
} 
```

据我所见，设置正在按预期保存在`user.config`文件中，但它不是下次加载的设置。

我的印象是，我需要做一些事情，以使应用程序不会每次都加载默认设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:43:01.380

您是否尝试过 ConfigurationManager.RefreshSection

# ruby-on-rails - 将按钮作为简单链接的rails方法是什么？

> ID：11007831
> 
> 赞同：1
> 
> 时间：2012-06-13T03:28:49.403
> 
> 标签：ruby-on-rails, haml

我有一个按钮（在 haml 视图中），我想用它来转到另一个控制器/动作。我比 Rails 更习惯 PHP。我尝试过的方法有效，但感觉不像轨道方式。这是我的3种方法。任何人都可以提供建议吗？我特别想看看带有 javascript onclick 处理程序的按钮的完成方式。

```
%p
=link_to "Edit", edit_user_registration_path(@user)
%button.btn.btn-success.doEdit{:onclick => "window.location='#{edit_user_registration_path(@user)}'"} Edit
%button.btn.btn-danger.doEdit2 Edit
:javascript
  $(document).ready(function(){
  $('.doEdit2').click(function(event) {
      window.location="#{edit_user_registration_path(@user)}";
  });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T03:49:30.773

我通常不会按说使用“按钮”。我会这样做：

```
=link_to "Edit", edit_user_registration_path(@user), class: "btn btn-danger edituser" 
```

btn 类将添加 CSS 样式以使其看起来像一个按钮，但它只是一个链接。对此的 javascript 处理程序：

```
$("a.edituser").on("click", function(event) {
  event.stopPropagation()
  doWhateverYouNeedHere();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T03:33:39.740

[`button_to`](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)可能是你所追求的。

# android - Phonegap 如何在 Eclipse 中记录一些用于调试的变量？

> ID：11007835
> 
> 赞同：0
> 
> 时间：2012-06-13T03:28:57.993
> 
> 标签：android, cordova

我尝试使用 console.log() 或 console.log(username)
但我在 logcat 中看不到任何特别之处。
如何调试一些简单的变量检查。

# validation - Symfony2 在自定义验证器中获取安全上下文

> ID：11007836
> 
> 赞同：2
> 
> 时间：2012-06-13T03:29:08.780
> 
> 标签：validation, symfony

我正在构建一个自定义验证器。在控制器中，我将使用以下方法获取安全上下文：

```
$this->get('security.context')->getToken()->getUser() 
```

我无法在自定义验证器中做同样的事情；谁能帮帮我？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T05:16:14.727

您要么需要使用过滤器类扩展[ContainerAware](http://api.symfony.com/2.0/Symfony/Component/DependencyInjection/ContainerAware.html)，然后在实例化它时调用类上的 setContainer，要么通过容器传递到构造上的类。这是因为过滤器默认情况下不像控制器那样感知容器。

要通过构造函数执行此操作，您可以将 __construct 方法添加到您的过滤器类中，如下所示：

```
protected $container;

public function __construct($container){
    $this->container = $container;   
} 
```

无论哪种方式，您都需要在通话中使用容器：

```
$this->container->get('security.context')->getToken()->getUser() 
```

检查此链接[https://groups.google.com/forum/?fromgroups#!topic/symfony2/WWIc8N7KZrg](https://groups.google.com/forum/?fromgroups#!topic/symfony2/WWIc8N7KZrg)以扩展适用于学说实体的容器感知理念，可能会有所帮助。

## 编辑

查看验证器的[文档，](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html#constraint-validators-with-dependencies)如果它有任何依赖项，您可以添加服务：

```
services:
    validator.unique.your_validator_name:
        class: Fully\Qualified\Validator\Class\Name
        tags:
            - { name: validator.constraint_validator, alias: alias_name } 
```

为什么不为容器添加一个参数：

```
arguments:  [@security.context] 
```

然后使用构造方法？

```
protected $security_context;

public function __construct($security_context){
    $this->security_context = $security_context;   
} 
```

# vb.net - 在加载时声明一个全局（或公共？）变量

> ID：11007838
> 
> 赞同：0
> 
> 时间：2012-06-13T03:29:36.703
> 
> 标签：vb.net, visual-studio-2010

只是努力在夏天更流利地使用 Visual Basic，所以我仍然对我的下一个 Visual Basic 课程保持敏锐。我的老师检查了变量，但仅在本地范围内。

我到处找，但我找不到我需要的东西。我正在制作各种闹钟，并且我有这段代码来填充分钟数组和小时数组。

```
Public Class Form1 
    Public Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Me.clockTimer.Interval = 1 * 1000
        Me.clockTimer.Enabled = True

        Dim hourArray(0 To 11) As String
        For i As Integer = 1 To 12
            If i.ToString.Length < 2 Then
                hourArray(i - 1) = "0" & i
            Else
                hourArray(i - 1) = i
            End If
        Next

        Dim minuteArray(0 To 59) As String
        For i As Integer = 0 To 59
            If i.ToString.Length < 2 Then
                minuteArray(i) = "0" & i
            Else
                minuteArray(i) = i
            End If
        Next

        hourLabel.Text = hourArray(0)
        minuteLabel.Text = minuteArray(0)

    End Sub 
```

（注意：添加“0”只是为了时钟显示将有“01”而不是“1”。）

现在我在表单加载时发生了这种情况（这个项目中只有一个表单），但它没有全局或公共范围。我希望能够在程序中访问`hourArray`和`minuteArray`稍后，但在表单加载时仍然会发生这种情况。我该怎么做？另外，我描述的是什么变量范围？（即整个表格的范围）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:39:40.427

你没有告诉你的班级结构。无论如何。将变量 hourArray 和 minuteArray 声明为 public。在类的开头声明它们并在表单加载方法中初始化它们。

**编辑**添加了代码示例。

```
Public Class Form1
    Dim hourArray(0 To 11) As String 'Declaration here
    Dim minuteArray(0 To 59) As String
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        For i As Integer = 1 To 12
            If i.ToString.Length < 2 Then
                hourArray(i - 1) = "0" & i
            Else
                hourArray(i - 1) = i
            End If
        Next
        For i As Integer = 0 To 59
            If i.ToString.Length < 2 Then
                minuteArray(i) = "0" & i
            Else
                minuteArray(i) = i
            End If
        Next
    End Sub

    Private Sub RadioButton1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RadioButton1.CheckedChanged
        hourArray(1) = "x"
        minuteArray(1) = "y"
    End Sub
End Class 
```

希望能帮助到你 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:33:25.933

您正在描述[Module Level Scope](http://msdn.microsoft.com/en-us/library/1t0wsc67.aspx)。

从上面的链接：

> 为方便起见，单术语模块级别同样适用于模块、类和结构。您可以通过将声明语句放置在任何过程或块之外但在模块、类或结构中来声明此级别的元素。
> 
> 当您在模块级别进行声明时，您选择的访问级别决定了范围。包含模块、类或结构的命名空间也会影响范围。
> 
> 声明 Private (Visual Basic) 访问级别的元素可用于该模块中的每个过程，但不可用于不同模块中的任何代码。如果您不使用任何访问级别关键字，则模块级别的 Dim 语句默认为 Private。但是，您可以通过在 Dim 语句中使用 Private 关键字来使范围和访问级别更加明显。

所以在你的情况下，我会做这样的事情

```
Public Class Form1  

    Dim hourArray(0 To 11) As String   'These variables are private to your Class
    Dim minuteArray(0 To 59) As String 

    Public Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load 
        Me.clockTimer.Interval = 1 * 1000  
        Me.clockTimer.Enabled = True 

        For i As Integer = 1 To 12 
            If i.ToString.Length < 2 Then 
                hourArray(i - 1) = "0" & i 
            Else 
                hourArray(i - 1) = i 
            End If 
        Next 

        For i As Integer = 0 To 59 
            If i.ToString.Length < 2 Then 
                minuteArray(i) = "0" & i 
            Else 
                minuteArray(i) = i 
            End If 
        Next 

        hourLabel.Text = hourArray(0) 
        minuteLabel.Text = minuteArray(0) 

    End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T04:14:43.173

因为你的学习我要告诉你把它们放在哪里

但稍后，您应该删除数组并直接花时间并在需要时用 0 填充它，所有这些都没有数组

像这样把这些放在类和子之间

```
 Public Class Form1 
     private hourArray(0 To 11) As String
     private minuteArray(0 To 59) As String
     Public Sub Form1_Loa 
```

如果你想在外面使用这些数组，你应该创建一个公共属性，比如

```
Public readonly Property hour As String()
    Get
         return hourArray
    End Get
End Property 
```

# html - Apache 2.2.17 在简单的 HTML 分段上传时崩溃（帖子）

> ID：11007839
> 
> 赞同：0
> 
> 时间：2012-06-13T03:29:36.950
> 
> 标签：html, apache2, apache, angstrom-linux, openembedded

Apache 版本：Linux OpenEmbedded 服务器上的 2.2.17。

一旦通过html上传文件，网页就会挂起

error_log 日志显示以下错误

```
[notice] child pid 1141 exit signal Segmentation Fault (11) 
```

上面文本中的 pid 1141 是一个 httpd (apache) 进程崩溃，

请指出需要对 apache 配置进行的可能更改，以便 HTML 帖子正常工作。

# authentication - 如何为asterisk提供认证功能？(asterisk+radiusclient-ng)

> ID：11007840
> 
> 赞同：0
> 
> 时间：2012-06-13T03:29:55.323
> 
> 标签：authentication, asterisk

我搜索并有很多时间为我的星号服务器提供身份验证功能。我想为 SiP 用户进行身份验证和授权，这是我的项目。但我没有完成它。我的星号版本是 1.8.8.1 CentOS 版本 6.2。我不知道如何解决这个问题。谁能帮我！！提前谢谢你！！：使困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:54:35.960

在星号 cli 上试试这个：`core show application Authenticate`

# machine-learning - 功能网页分类的可用训练数据

> ID：11007843
> 
> 赞同：1
> 
> 时间：2012-06-13T03:30:37.807
> 
> 标签：machine-learning, classification, webpage

我正在做一个项目，我需要对网页进行主题和功能分类，如Qi 和 Davison的[网页分类：特征和算法 中所述。](http://www.cse.lehigh.edu/~xiq204/pubs/classification-survey/LU-CSE-07-010.pdf)例如，我可能希望能够判断特定页面是否与音乐有关，以及它是集合（链接列表）还是主题（有关集合中一个特定链接的数据）页面。对于主题分类，我使用[DMOZ 目录](http://www.dmoz.org/)数据的一个子集，通过抓取标有特定主题的站点作为正例和负例来生成一组训练示例。

我不太清楚适用于功能分类的方法。本质上，我需要一种方法来找到一组按类型标记的 url：集合页面、主题页面等。手动生成一组可能不可行，我希望能够在网页更改时更新分类器有点定期。关于我可以找到用于训练集的标记数据的区域有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T15:41:36.237

回答[Google Summer of Code 问题：网络分类数据集](https://stackoverflow.com/questions/5394653/google-summer-of-code-web-classification-dataset) 可能会有所帮助。具体来说，请查看此链接：[https ://dms.sztaki.hu/en/letoltes/ecmlpkdd-2010-discovery-challenge-data-set](https://dms.sztaki.hu/en/letoltes/ecmlpkdd-2010-discovery-challenge-data-set)

# hibernate - 如何使用 JPA/Hibernate 避免“双重创建”竞争条件

> ID：11007849
> 
> 赞同：2
> 
> 时间：2012-06-13T03:31:32.407
> 
> 标签：hibernate, jpa, transaction-isolation

我处于以下情况。

有几个线程可以读取/更新`MonthlySales`持久对象。问题是这些对象可能不存在并且必须根据请求动态创建。
因此，两个不同的线程最终创建了对应于相同键（即具有相同 ID）的实体，因此其中一个线程**无法提交**。我不希望这种情况发生。我希望两个线程中的一个赢得比赛，另一个松散，等到另一个线程创建了对象。

换句话说，我确实想做**序列化交易**。我应该放置一个显式的 Java 锁（即`synchronized`块）吗？

我当前的代码如下：

```
MonthlySales ms = entityManager.find(MonthlySales.class, somekey);
if (ms == null) { // two threads might enter this block altogether
    ms = new MonthlySales();
    // prepare ms object populating its fields with default values
    entityManager.persist(ms);
    entityManager.flush();
}
entityManager.lock(ms, LockModeType.PESSIMISTIC_WRITE); // lock this object
                                                        // since we are going to update it
// do something with ms object
entityManager.getTransaction().commit();
entityManager.close(); 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:44:31.497

避免竞争条件的一种方法是让 ID 最低的线程/进程/等获胜。

我相信您可以使用访问线程 ID

```
long threadID = Thread.currentThread().getId(); 
```

从Java中的线程内部。这是比阻塞其他线程更好的竞争条件解决方案，因为这会破坏使用多个线程的目的。

请参阅关键部分面包店算法：

[http://www.basicsofcomputer.com/critical_section_problem_in_operating_system.htm](http://www.basicsofcomputer.com/critical_section_problem_in_operating_system.htm)

在 JPA 的情况下，根据[here](https://stackoverflow.com/questions/2992463/jpa-atomic-query-save-for-multithreaded-app)和[here](https://stackoverflow.com/questions/1111188/jpa-writing-from-multiple-process-into-single-db)，最佳实践方法似乎是同时尝试修改事物，并在事情不成功时捕获异常。

# .net - .NET 2 或 .NET 4 中是否修复了 msxsl 内存泄漏错误？

> ID：11007850
> 
> 赞同：2
> 
> 时间：2012-06-13T03:31:46.450
> 
> 标签：.net, xslt, memory-leaks, msxsl

我正在从事一个涉及 XSLT 的项目。并且想在我的 XSLT 中使用 C# 脚本。就像在下面的链接中一样。 [XSLT 1.0 获取当前日期时间](https://stackoverflow.com/questions/9394322/xslt-1-0-get-current-datetime)

虽然我遇到了这篇知识库文章[http://support.microsoft.com/kb/316775](http://support.microsoft.com/kb/316775)说这会在多次加载样式表时导致内存泄漏。

知识库文章没有说明哪些 .NET 版本受到影响。谁能建议这是否已在 .NET 2.0 或更高版本中修复？

我的目标环境有 .NET 2.0 和 3.5，尽管执行 XSLT 转换的代码被编译为 .NET 2.0。

*注意：我无法控制运行转换的代码。我只能写 XSLT*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T04:54:43.880

这不是一个错误——首先。

更重要的是，这是绝对可以避免的。

**解决方案是**：*不要*使用内联脚本，而是使用包含所需扩展功能的扩展对象。

有关如何将扩展函数编写为扩展对象的一部分的更多信息——对于 XslCompiledTransform，可以在此处找到：

[http://msdn.microsoft.com/en-us/library/tf741884](http://msdn.microsoft.com/en-us/library/tf741884)

和一个完整的代码示例：

[http://msdn.microsoft.com/en-us/library/system.xml.xsl.xsltargumentlist.addextensionobject](http://msdn.microsoft.com/en-us/library/system.xml.xsl.xsltargumentlist.addextensionobject)

# android - 在 Listview 项目布局中可调整大小的 ImageView 下的 Textview？

> ID：11007851
> 
> 赞同：1
> 
> 时间：2012-06-13T03:31:48.557
> 
> 标签：android, android-layout

我有一个列表视图，在我的列表项布局中，我想在图像视图下方放置一个文本视图。

在我的 imageview 中，因为我正在将位图加载到其中，所以我必须对其进行设置，以便在将图像加载到 imageview 时将它们调整为正确的大小。我通过将 imageview 的布局高度和宽度参数设置为填充父级来做到这一点。因此，当我将文本视图放在图像视图下方时，文本视图不会出现......

我尝试在图像视图周围放置另一个线性布局并固定高度，以便它将调整到最大高度，但文本视图仍然没有出现......

这是我的布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/race_entrant"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:minHeight="?android:attr/listPreferredItemHeight"
android:paddingTop="2dip"
android:paddingBottom="2dip"
android:paddingRight="2dip"
android:orientation="horizontal"
android:descendantFocusability="blocksDescendants"
android:cacheColorHint="#E0EAF1">
    <LinearLayout
    android:layout_height="fill_parent"
    android:layout_width="50dip"
    android:orientation="vertical"
    android:id="@+id/linearLeft"
    android:paddingLeft="2dip"
    android:paddingRight="2dip"
    android:paddingTop="2dip"
    android:paddingBottom="2dip"
    android:background="#E0EAF1"
    android:cacheColorHint="#E0EAF1">
    <TextView
        android:id="@+id/txtEntrantNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        style="@style/entrant_number"
        android:layout_gravity="center_horizontal"
        android:cacheColorHint="#E0EAF1" />
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="41dip">
        <ImageView
            android:id="@+id/imgJockey"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="1dip"
            android:adjustViewBounds="true"
            android:cacheColorHint="#E0EAF1" />
    </LinearLayout>
    <TextView
        android:id="@+id/txtForm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:layout_weight="1"
        style="@style/entrant_form" />
</LinearLayout> 
```

我所指的 textview 的 id 为 txtForm。

我怎样才能做到这一点，以便 textview 与 imageview 一起可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:44:10.823

你需要给 ImageView 一个 layout_weight。我放了一张图片和一些文字仅供参考。以下是它的外观：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/race_entrant"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:cacheColorHint="#E0EAF1"
android:descendantFocusability="blocksDescendants"
android:minHeight="?android:attr/listPreferredItemHeight"
android:orientation="horizontal"
android:paddingBottom="2dip"
android:paddingRight="2dip"
android:paddingTop="2dip" >

<LinearLayout
    android:id="@+id/linearLeft"
    android:layout_width="50dip"
    android:layout_height="fill_parent"
    android:background="#E0EAF1"
    android:cacheColorHint="#E0EAF1"
    android:orientation="vertical"
    android:paddingBottom="2dip"
    android:paddingLeft="2dip"
    android:paddingRight="2dip"
    android:paddingTop="2dip" >

    <ImageView
        android:src="@drawable/ic_launcher"
        android:layout_weight="1"
        android:id="@+id/imgJockey"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="1dip"
        android:adjustViewBounds="true"
        android:cacheColorHint="#E0EAF1" />

    <TextView
        android:text="Text"
        android:id="@+id/txtEntrantNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        style="@style/entrant_number"
        android:layout_gravity="center_horizontal"
        android:cacheColorHint="#E0EAF1" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:45:30.620

您可以使用**相对布局**代替线性布局，并在其中添加文本视图和图像视图。

# php - PHP Facebook-SDK

> ID：11007856
> 
> 赞同：0
> 
> 时间：2012-06-13T03:32:19.430
> 
> 标签：php, facebook

我整天都在绞尽脑汁试图让这个 Facebook-SDK 工作。它都连接了，但是当它返回到我的 URL 时，什么也没有发生。这一切都是在我的本地主机上完成的，只是为了测试..

这是我的虚拟代码..

```
$Session = $this->Manhattan->GetFacebook()->getUser();

if ($Session)
{
    die('Authenicated');
}
else
{
    header('Location: ' . $this->Manhattan->GetFacebook()->getLoginUrl());
} 
```

The return url is supposed to be **http://localhost/** but ends up being **http://localhost/?state=010a4fc54ab86bcea7fb1d7ce9433291&code=AQD1X-gOIgfk95rdE-uH59OFkLOLH72VltBZRk_0ZK5qgtpykwwfaUrdNoSvQVJC7P0zVDmBDNhGbH1CiAzdEPaK08xcC8evrc7DUH1jvB7Al0Lyfz3kgeisW6pTORG_hsAUwqsNTekm6I6yKmoIMpUJkH9-7UUYqs5XvekpkcJ1WMkwGndAJzvG9iw5XnPuiUI# *=***

结果总是这样。。

```
 Facebook::getUser() = 0; 
```

谁能指出为什么？我宁愿使用 PHP SDK 而不是 Javascript SDK，所以请不要向我指出那个方向。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:30:18.780

> 是的，它总是返回 0 并创建一个从 facebook 登录到我的本地主机的重定向循环”

发生这种情况是因为

```
$Session=$this->Manhattan->GetFacebook()->getUser(); 
```

始终为 0。所以它转到代码的 else 部分并执行

```
header('Location: ' . $this->Manhattan->GetFacebook()->getLoginUrl()); 
```

尝试`localhost.local`而不是`localhost`. 不要忘记更改 Facebook 应用程序设置。

# ruby-on-rails-3 - 为什么 Rails 服务器试图加载 favicon.ico？

> ID：11007858
> 
> 赞同：1
> 
> 时间：2012-06-13T03:32:21.820
> 
> 标签：ruby-on-rails-3, favicon, webrick

据我所知，我没有以任何形式或形式引用 favicon.ico，但我对 rails 服务器（处于开发模式）的每个请求都以以下内容结尾：

```
Started GET "/assets/ico/favicon.ico" for 127.0.0.1 at 2012-06-12 20:18:02 -0700
Served asset /ico/favicon.ico - 404 Not Found (3ms)

ActionController::RoutingError (No route matches [GET] "/assets/ico/favicon.ico"):
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /Users/twler/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/twler/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/twler/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

这是与 webrick 相关的问题，还是我需要更改一些配置选项或什么？

编辑：我将 favicon.ico 放在 app/assets/ico/favicon.ico、lib/assets/ico/favicon.ico 和 public/favicon.ico 中。favicon 徽标甚至出现在我的浏览器中，但 rails 服务器仍然在日志中显示 404。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T03:33:33.333

这不是 Rails——Web 浏览器会自动请求它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:35:52.123

浏览器会自动查找您网站的图标（您在地址栏和书签中的 URL 旁边看到的图标）。最简单的方法是创建一个 favicon 并将其保存到 /assets/ico/favicon.ico。

# java - 如何转储哈希映射的内容？

> ID：11007860
> 
> 赞同：18
> 
> 时间：2012-06-13T03:32:45.820
> 
> 标签：java, data-structures

如何将 Java HashMap（或任何其他）的内容转储到 STDOUT ？

例如，假设我有一个以下结构的复杂 HashMap：

```
( student1 => Map( name => Tim,         
                   Scores => Map( math => 10,
                                  physics => 20,
                                  Computers => 30),
                   place => Miami,
                   ranking => Array(2,8,1,13),
                  ),
 student2 => Map ( 
                   ...............
                   ...............
                 ),
............................
............................
); 
```

所以我想把它打印到屏幕上，以便了解数据结构。我正在寻找类似于 PHP 的 var_dump() 或 Perl 的 dumper() 的东西。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-13T03:34:44.327

使用`HashMap.toString()`（[此处的文档](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractMap.html#toString%28%29)）：

```
System.out.println("HASH MAP DUMP: " + myHashMap.toString()); 
```

通常，用于`Object.toString()`转储这样的数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-16T23:15:47.410

转储数据结构（例如由嵌套映射、数组和集合构成）的一种好方法是将其序列化为格式化的 JSON。例如使用 Gson (com.google.gson)：

```
Gson gson = new GsonBuilder().setPrettyPrinting().create();
System.out.println(gson.toJson(dataStructure)); 
```

这将以相当易读的方式打印出最复杂的数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:50:16.837

我经常使用这样的函数（它可能需要扩展以适应 Map 内其他类型对象的预打印）。

```
@SuppressWarnings("unchecked")
private static String hashPP(final Map<String,Object> m, String... offset) {
    String retval = "";
    String delta = offset.length == 0 ? "" : offset[0];
    for( Map.Entry<String, Object> e : m.entrySet() ) {
        retval += delta + "["+e.getKey() + "] -> ";
        Object value = e.getValue();
        if( value instanceof Map ) {
            retval += "(Hash)\n" + hashPP((Map<String,Object>)value, delta + "  ");
        } else if( value instanceof List ) {
            retval += "{";
            for( Object element : (List)value ) {
                retval += element+", ";
            }
            retval += "}\n";
        } else {
            retval += "["+value.toString()+"]\n";
        }
    }
    return retval+"\n";
} // end of hashPP(...) 
```

因此下面的代码

```
public static void main(String[] cmd) {
    Map<String,Object> document = new HashMap<String, Object>();

    Map<String,Object> student1 = new LinkedHashMap<String, Object>();
    document.put("student1", student1);
    student1.put("name", "Bob the Student");
    student1.put("place", "Basement");
    List<Integer> ranking = new LinkedList<Integer>();
    student1.put("ranking", ranking);
    ranking.add(2);
    ranking.add(8);
    ranking.add(1);
    ranking.add(13);
    Map<String,Object> scores1 = new HashMap<String, Object>();
    student1.put("Scores", scores1);
    scores1.put("math", "0");
    scores1.put("business", "100");

    Map<String,Object> student2= new LinkedHashMap<String, Object>();
    document.put("student2", student2);
    student2.put("name", "Ivan the Terrible");
    student2.put("place", "Dungeon");

    System.out.println(hashPP(document));
} 
```

会产生输出

```
[student2] -> (Hash)
  [name] -> [Ivan the Terrible]
  [place] -> [Dungeon]

[student1] -> (Hash)
  [name] -> [Bob the Student]
  [place] -> [Basement]
  [ranking] -> {2, 8, 1, 13, }
  [Scores] -> (Hash)
    [math] -> [0]
    [business] -> [100] 
```

再次。您可能需要根据您的特定需求对其进行修改。

# objective-c - Objective-c EXC_BAD_ACCESS（代码=2，地址=0x42）

> ID：11007868
> 
> 赞同：4
> 
> 时间：2012-06-13T03:34:15.590
> 
> 标签：objective-c, random, char, exc-bad-access

我是 Objective-C 编程的新手，当我运行我的小程序时收到此错误（我只想生成一个随机字符）。所以这是我到目前为止所做的：

```
(IBAction)generate{
  int a = arc4random() % 26;
  NSString * chaine = @"ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  char lettre = [chaine characterAtIndex:a];

  NSMutableString * mot = [[NSMutableString alloc] initWithCharacters:lettre length:1];
  hasard.text = mot;
} 
```

我试图简单地将我的变量“lettre”放在 hasard.text 中，但它不适用于错误“不兼容的整数到指针转换分配给`NSString *`”从“ `char`”。所以我创建了一个`NSMutableString`来包含我的角色。

当我在第五行手动输入字符“e”而不是变量“字母”时，效果很好。既然我可以在调试器中看到“lettre”包含一个随机字母，为什么我会在标题中得到错误？

`(EXC_BAD_ACCESS (code=2, address=0x42))`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T03:47:29.677

该函数需要一个指向字符的指针，您正在给它一个文字字符。您需要创建一个指向它的指针。此外，`characterAtIndex`不会像您想象的那样返回字符。它返回一个*unicode 字符*，它实际上是一个`unsigned short`而不是一个`unsigned char`. 但是，如果您将代码更改为此它将起作用：

```
const unichar foo = [@"Test" characterAtIndex:0];
NSString *test = [NSString stringWithCharacters:&foo length:1]; //Note the & 
```

**编辑**但最简单的方法就是：

```
char randChar = arc4random_uniform(26) + 'A'; //Changed in response to Jason Coco's comment
NSString *mot = [NSString stringWithFormat:@"%c", randChar]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:42:11.783

您需要传递某种类型的东西`const unichar *`，而不仅仅是`char`. 你可以这样做：

```
- (IBAction)generate {
  int a = arc4random() % 26;
  NSString * chaine = @"ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  NSMutableString * mot = [chaine substringWithRange:NSMakeRange(a,1)];
  hasard.text = mot;
} 
```

这样，您就可以完全避免 c 字符串胡说八道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:43:41.730

对于`[NSMutableString initWithCharacters:length:]`，它接受 a `C array of Unicode characters`，而不是`char`。

实际上，您可以对旧字符串进行子串化并通过`[NSMutableString initWithString]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T03:50:01.663

`initWithCharacters:length:`不将单个字符作为其第一个参数。它需要一个 unichars 数组（当然作为指针）。如果您将单个字符传递给它，它将尝试取消引用解释为指针的字符，并且*会*出现段错误。

顺便说一句，您生成单字母子字符串的方法太复杂了。我们有`sustringWithRange:`方法，所以使用它：

```
- (IBAction)generate{
    int a = arc4random() % 26;
    NSString *chaine = @"ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    NSString *mot = [chaine substringWithRange:NSMakeRange(a, 1)];
    hasard.text = mot;
} 
```

此外，即使这种方法也过于复杂。正如@borrrden 指出的那样，只需使用

```
(arc4random() % 26) + 'A' 
```

反而。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-18T22:36:30.723

万一有人仍然访问这个问题，要检查的另一件有用的事情是确保您没有使用 ios6 特定代码，而是在 ios5 模拟器中......这就是导致并解决了我的问题的原因！

# c# - 将 WPF 控件移植到 Silverlight

> ID：11007869
> 
> 赞同：3
> 
> 时间：2012-06-13T03:34:20.893
> 
> 标签：c#, wpf, silverlight, porting, syncfusion

我想将 Syncfusion（第三方 .NET 控件供应商）的 WPF 控件之一移植到 Silverlight。

我了解 Silverlight 是 WPF 的一个子集，因此在移植时会有限制和限制。以前有没有人这样做过（使用第三方库）？我是否需要查看源代码并查看可以更改的内容，还是有更好、更快的方法来做到这一点？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T06:04:50.460

最好的方法是使用 SyncFusion 提供的 Silverlight 控件；如果它不可用，那么将第三方 WPF 控件移植到 SilverLight 中将非常困难，从第 3 方本身不提供该控件这一事实可以看出。

您肯定需要查看源代码并将其移植到 SilverLight 中，但要注意许可和法律问题。

如果您可以提供有关您想要移植的控制的详细信息，那么某人可能会为此提供替代解决方案（开源或第 3 方），这对您来说将是最简单的解决方案。

如果您决定移植控件，这些链接将很有用 -

> 从 WPF 移植到 Silverlight：缺失的部分 -[第 1](http://blogs.microsoft.co.il/blogs/arik/archive/2010/09/23/porting-from-wpf-to-silverlight-the-missing-pieces-part-1.aspx)部分， [第 2 部分](http://blogs.microsoft.co.il/blogs/arik/archive/2010/09/21/porting-from-wpf-to-silverlight-the-missing-pieces-part-2.aspx)
> 
> [WPF 兼容性](http://msdn.microsoft.com/en-us/library/cc903925%28VS.95%29.aspx)
> 
> [Silverlight 和 WPF 之间的程序差异 - Wintellect, LLC 的白皮书](http://www.scribd.com/doc/42289894/Microsoft-WPF-Silverlight-Comparison-Whitepaper-v1-1)
> 
> [Silverlight 版本和 WPF 之间的 XAML 处理差异](http://msdn.microsoft.com/en-us/library/cc917841%28VS.95%29.aspx)

# php - CodeIgniter _Callback 用户名和密码消息

> ID：11007875
> 
> 赞同：0
> 
> 时间：2012-06-13T03:35:29.083
> 
> 标签：php, validation, codeigniter

我的 _callback 函数有点问题：

我想用下面的代码实现的是：

*   如果用户详细信息不正确，则会显示`$message`错误（当前不显示）
*   如果没有输入任何内容并输入了提交，我希望它显示“请登录”。

**控制器：**

```
public function loginUser() {
    $this->form_validation->set_rules('userEmail','Username', 'required|valid_email|trim|max_length[99]|xss_clean');
    $this->form_validation->set_rules('userPassword','Password', 'required|trim|max_length[200]|xss_clean|callback__checkUsernamePassword');

    if($this->form_validation->run() === TRUE) {

    }
} 
```

**打回来：**

```
function _checkUsernamePassword() {
    $username = $this->input->post('userEmail');
    $password = $this->input->post('userPassword');
    $user = $this->user_model->check_login($username,$password);

    if(! $user)
    {
        $data['contentMangement'] = $this->options_model->systemOptions();
        $data['pageTitle'] = 'Add User';
        $data['message'] = form_error('userEmail','<div class="alert alert-error">', '</div>'); 
        $this->load->view('_assets/header', $data);
        $this->load->view('addUser', $data);
        $this->load->view('_assets/footer');
        $this->form_validation->set_message('_checkUsernamePassword', 'Sorry %s is not correct.');
        return FALSE;
    }else{
        echo 'sheepdogs';
        return TRUE;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T04:14:36.927

我也通过更改我的 _callback 解决了这个问题：

```
 function _checkUsernamePassword() {

        $username = $this->input->post('userEmail');
        $password = $this->input->post('userPassword');

        $user = $this->user_model->check_login($username,$password);

        if(! $user)
        {
            $this->form_validation->set_message('_checkUsernamePassword', 'Sorry the details you provided have not been found');
            return FALSE;
        }else{
            return TRUE;
        }   
} 
```

# ruby - 本地 EventMachine 不打开端口

> ID：11007878
> 
> 赞同：-1
> 
> 时间：2012-06-13T03:35:55.783
> 
> 标签：ruby, http, asynchronous, macruby

我对 TCP/IP 了解不多，但我是一名自学成才的 Web 开发人员。我曾经使用过一点 EventMachine，一点点使用 Node.js，并且最近使用 MacRuby 编写了我的第一个 Mac 应用程序。我有一个新的 Mac 应用程序的想法，它涉及异步发出一堆 HTTP 请求，就像 EventMachine 和 Node 允许你做的那样。但是，我并不是说它是一个 Web 服务器，所以我不需要打开端口或接受来自外界的请求。我只需要在 MacRuby 应用程序中以非阻塞方式处理 HTTP 请求。可能有更好的方法来处理这个问题，但这是我刚刚想到的一个想法，不知道我将如何实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:45:44.770

[使用 EventMachine 效果很好](https://stackoverflow.com/questions/4088849/how-to-do-parallel-http-requests-in-heroku)，但您也可以尝试[Typhoeus](https://github.com/typhoeus/typhoeus)，它专门为此而设计。

# android - 带有 Netty 集成的 Android 客户端-服务器应用程序

> ID：11007879
> 
> 赞同：0
> 
> 时间：2012-06-13T03:36:16.910
> 
> 标签：android, sockets, netty

我需要在 Android 平台上开发一个应用程序，使客户端能够与服务器通信/请求命令，并使服务器能够响应客户端的请求。

我读到了 Netty，我想在我的项目中实现它，但我是套接字编程的新手，它是用 Java 编写的，所以我想在 Android 上实现它并不难。我正在网上寻找示例，但我在为 Android 找到一个好的示例时迷失了方向。

这里有人可以给我一些例子或告诉我如何在我的应用程序中实现这些功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T02:15:12.663

Netty 同时支持 NIO 和 OIO，但是 Android 已经破坏了对 NIO 的支持，所以你只能使用 OIO（阻塞 I/O）传输。此外，Android 中的 SSLEngine 也坏了，这意味着您无法在 Android 上使用 Netty 实现 SSL。（或者可能使用替代套接字工厂？）

因此，我不建议在 Android 设备上使用 Netty，尽管许多人似乎以某种方式在 Android 上成功使用了 Netty。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:23:51.837

Netty 是一个异步事件驱动的网络应用框架。(asynch I/O, Java NIO, high-performance) 我认为Netty对于多客户端连接或多服务器连接来说是一个很有价值的框架。

Android 设备的资源通常非常有限。

我建议您在 android 设备上使用 java 阻塞套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T14:05:18.687

我不建议在 Android 上使用 Netty，因为它使用了一些 Android VM (Dalvik) 无法识别的 javassist 类，例如 javassist.ClassPool 类。取一个好的旧 java 套接字，并将它包装在一个很好的帮助类周围，它应该可以做到。

# button - JSF 2：使用 Richfaces 4 提交时禁用按钮

> ID：11007882
> 
> 赞同：0
> 
> 时间：2012-06-13T03:36:43.403
> 
> 标签：button, jsf-2, richfaces, submit

我正在使用 JSF 2 和 Richfaces 4，提交时需要禁用按钮。我也需要调用按钮的操作。当表单验证失败时，应启用提交按钮。我可以使用 Richfaces 3，但无法使用 Richfaces 4。

寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:32:54.040

您可以为此使用 的`onbegin`和`oncomplete`属性`<a4j:commandButton>`。

```
<a4j:commandButton ... onbegin="disabled=true" oncomplete="disabled=false" /> 
```

# php - AWS Beanstalk 缺少 sdk.class.php

> ID：11007883
> 
> 赞同：2
> 
> 时间：2012-06-13T03:36:46.427
> 
> 标签：php, amazon-web-services, amazon-elastic-beanstalk

我将一个非常简单的 php 网页部署到 AWS ElasticBeanstalk 实例中。该文件立即失败

```
<?php
require_once('sdk.class.php');
// more code... 
```

我可以从 /var/log/httpd/application-error_log 看到 sdk.class.php 丢失：

```
[Wed Jun 13 03:30:15 2012] [error] [client 127.0.0.1] PHP Stack trace:
[Wed Jun 13 03:30:15 2012] [error] [client 127.0.0.1] PHP   1\. {main}() /var/www/html/index.php:0
[Wed Jun 13 03:30:45 2012] [error] [client 127.0.0.1] PHP Warning:  require_once(sdk.class.php): failed to open stream: No such file or directory in /var/www/html/index.php on line 9
[Wed Jun 13 03:30:45 2012] [error] [client 127.0.0.1] PHP Stack trace:
[Wed Jun 13 03:30:45 2012] [error] [client 127.0.0.1] PHP   1\. {main}() /var/www/html/index.php:0
[Wed Jun 13 03:30:45 2012] [error] [client 127.0.0.1] PHP Fatal error:  require_once(): Failed opening required 'sdk.class.php' (include_path='.:/usr/share/pear:/usr/share/php') in /var/www/html/index.php on line 9 
```

sdk.class.php 不应该默认包含在每个 ElasticBeanstalk 实例中吗？还是我错过了什么？该代码在我正确安装和配置了 sdk.class.php 的笔记本上运行良好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:55:42.107

这个解决方案的问题似乎是，当自动缩放启动新实例时，它不会安装在这些机器上。

最好将它下载到您的项目文件夹中（以便在下一个版本中推送它）并从那里使用它。

*   git clone git://github.com/amazonwebservices/aws-sdk-for-php.git AWSSDKforPHP
*   或从[http://aws.amazon.com/de/sdkforphp/下载](http://aws.amazon.com/de/sdkforphp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:38:04.360

我最终自己得到了答案。

默认情况下，AWS PHP SDK 不会安装在 ElasticBeanstalk 实例上（我认为它应该安装！）。我必须先安装自己登录到实例（通过 ssh 密钥对）并成为 root

```
sudo su 
```

然后我使用这里的信息[http://pear.amazonwebservices.com/](http://pear.amazonwebservices.com/)来安装 SDK

```
pear install aws/sdk
pear upgrade aws/sdk 
```

然后我复制了配置示例并使用我的 AWS 密钥和密钥进行了更新

```
cp /usr/share/pear/AWSSDKforPHP/config-sample.inc.php /usr/share/pear/AWSSDKforPHP/config.inc.php 
```

而且我还必须更改我的 PHP 代码

```
require_once('sdk.class.php'); 
```

至

```
require_once 'AWSSDKforPHP/sdk.class.php'; 
```

刷新了网页，它工作了！

# c++ - 带有指针的可调整大小的数组

> ID：11007884
> 
> 赞同：0
> 
> 时间：2012-06-13T03:36:49.430
> 
> 标签：c++, arrays, visual-studio-2010, debugging, pointers

我的程序有效，但我的教授说我的代码不正确，但表示他会在秋季学期找到原因……他在说什么？也许有什么不合适的？即使你不正确，我也会很感激你的大脑:)

```
void CResizableArray::SetSize( int intNewSize )
{
    int intIndex = 0;

    if( intNewSize < 0 ) intNewSize = 0;
    if( intNewSize > intMAXIMUM_ARRAY_SIZE )
    {
        intNewSize = intMAXIMUM_ARRAY_SIZE;
    }

    //////////////////////////////////////
    //     ---> HUGE BUG HERE <---      //
    //     Code works but is WRONG      //
    // WHY IS THIS HELP ME FIND THE BUG //
    //////////////////////////////////////

    m_intArraySize = intNewSize;
    m_paintValues = new int [m_intArraySize];

    // Initialize to zero
    for( intIndex = 0; intIndex < m_intArraySize; intIndex++ )
    {
        *( m_paintValues + intIndex ) = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T03:39:31.653

大概在这条线之前

```
m_paintValues = new int [m_intArraySize]; 
```

`m_paintValues`指向另一个数组。那个数组现在已经*泄露*了——你没有指向它的指针，所以它永远不能被释放。因此，该内存永远不能被重用。编写一个执行大量此操作的程序，它会在运行很长时间之前耗尽内存。

当你用完一块内存时，你需要释放它。在这里，正确的做法可能看起来像

```
delete[] m_paintValues;
m_paintValues = new int [m_intArraySize]; 
```

不过，还有更多问题。首先，`delete[]`除非你知道`m_paintValues`绝对指向一个数组，否则你永远不能使用；你可以确保在构造函数中。更麻烦的是，当你设置一个新的大小时，之前的任何数据`m_paintValues`都会被丢弃——你不想把旧的值复制到新的数组中吗？这样做意味着在第一次分配时使用临时变量来保存新数组，复制数据，然后将新数组分配给成员变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T03:41:58.307

他可能的意思是，由于它是调整大小，您应该保留数组的旧内容并将它们转移到新数组，在您的代码段中，您只需丢弃旧内容，创建一个新的空数组。

所以而不是

```
m_paintValues = new int [m_intArraySize];
// Initialize to zero
for( intIndex = 0; intIndex < m_intArraySize; intIndex++ )
{
    *( m_paintValues + intIndex ) = 0;
} 
```

做

```
int* newBiggerArray = new int[m_intArraySize];
for (intIndex = 0; intIndex < m_intArraySize; ++intSize)
{
   if ( intIndex < oldMaxSize )
   {
     newBiggerArray[intIndex] = m_paintValues[intIndex];
   }
   else
   {
     newBiggerArray[intIndex] = 0;
   }
}
delete [] m_paintValues;
m_paintValues = newBiggerArray; 
```

我将留下部分来处理调整到比以前更小的值，以便您弄清楚。

# c# - 多用户数据库桌面应用程序设计

> ID：11007888
> 
> 赞同：3
> 
> 时间：2012-06-13T03:37:14.593
> 
> 标签：c#, sql, database, multi-user

首先，对于我对数据库不是很擅长的看似愚蠢的问题，我深表歉意。

我正在用 C# 重新设计一个桌面应用程序，以便在本地网络上使用，它基本上是一个高度专业化的票务跟踪系统。本质上，当用户启动应用程序时，他们将被要求提供凭据以访问系统，然后应用程序将查询中央数据库中的数据（当前是在本地计算机上运行的 MySQL 服务器），并将其显示在屏幕上。

我的问题是，如果连接了四个用户并且两个用户输入了新数据，那么让每个用户知道新数据的最有效方法是什么？是否只是简单地查询数据库并使用计时器上的新数据更新应用程序？或者会创建一个服务器应用程序来坐在用户和数据库服务器之间执行查询并通知每个连接的用户更新的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:01:17.273

看到这一切取决于实时通知客户有关数据库更改的重要性。如果您的客户对一两分钟的延迟没有问题，您可能会选择计时器方法。但如果他们真的希望数据是实时的（延迟小于 1-2 秒），请选择另一种方法。创建一个单独的服务来轮询数据库并通知客户端应用程序进行任何更新。为此，您可以使用套接字侦听器。希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T04:12:01.483

4个用户？在本地局域网上？使用简单的索引查询？只需从客户端轮询数据库。在应用程序启动时启动一个线程并让它每 2-5 秒运行一次查询，然后使用适用于在 .NET 中更新 GUI 的后台线程通知用户。

这很简单，不要想太多。“最难”的部分是用户的异步通知（这取决于您的 GUI 布局和所需的操作可能也不是什么大问题，因此引用）。

# ios - CAGradientLayer 覆盖了 drawRect 中绘制的所有内容

> ID：11007891
> 
> 赞同：0
> 
> 时间：2012-06-13T03:37:32.030
> 
> 标签：ios, core-graphics, calayer

我有以下代码：

```
-(void)drawRect:(CGRect)rect
{

    // gradient background
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = rect;
    gradient.colors = [NSArray arrayWithObjects:(id) backgroundGradientTop.CGColor, (id) backgroundGradientBottom.CGColor, nil];
    gradient.locations = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0f], [NSNumber numberWithFloat:0.7], nil];

    [self.layer insertSublayer:gradient atIndex:0];

    // line on top
    [[UIColor redColor] set];

    CGContextRef currentContext = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(currentContext, 5.0f);

    CGContextMoveToPoint(currentContext, 0, 10.0f);

    CGContextAddLineToPoint(currentContext, rect.size.width, 10.0f);

    CGContextStrokePath(currentContext);

} 
```

我试图在渐变顶部绘制的线从未显示。如果我注释掉渐变层，它就在那里。有没有办法在顶部绘制渐变背景和一条线（或几条线）？也许我不应该混合 calayer 和 CG？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T04:15:05.163

> 我试图在渐变顶部绘制的线从未显示。如果我注释掉渐变层，它就在那里。

这是因为子图层出现在其父图层之上。您的渐变显然是不透明的，并且与您的视图大小相同，因此它覆盖了视图。

您不能以这种方式混合 CA 和 CG 绘图。如果您使用 绘制渐变效果会更好[`CGContextDrawLinearGradient`](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextDrawLinearGradient)。

# iphone - 如何在我的 iOS 应用程序中正确实现服务类？

> ID：11007892
> 
> 赞同：4
> 
> 时间：2012-06-13T03:37:35.617
> 
> 标签：iphone, ios, web-services, architecture, afnetworking

我目前的头疼：实现一个模型类，专门用于对我的 rails 应用程序的服务调用。

这是场景：

*   我有一个名为**Service**的类，它是 NSObject 的子类。
*   实现文件定义了一些方法……让我们看看 *doSignUp*。
*   我正在使用**AFNetworking**与 api 进行通信。
*   从我的**SignUpViewController**，我创建了我的 **Service**类的实例并调用*doSignUp*
*   该方法按预期工作，并且我从服务器收到了正确的响应。

现在是我不完全理解的部分：

*   **AFNetworking**使用块进行服务调用。
*   在*成功*块中，我调用了一个名为*handleSignUp*的辅助方法（也在**Service**类中）。这个方法本质上是解析 JSON 并从中创建一个新的**用户**（NSObject 子类）。然后*handSignUp*方法返回**User**对象。

此时我有一个新的**用户**对象，我需要将该对象发送回我的**SignUpViewController** ......我该怎么做？

*   我应该尝试将该对象添加到**AppDelegate**并从**SignUpViewController**访问它吗？该解决方案可以访问各种全局属性，但**SignUpViewController 何时** 知道何时访问它？
*   我应该尝试在**Service**类中添加对**SignUpViewController的引用吗？**这似乎适得其反......我不妨将方法*doSignUp*和*handSignUp*添加到 **SignUpViewController**。在我看来，我的**服务**类不应该知道任何其他视图控制器。

 ********请参阅下面的代码示例：

服务.h

```
//Service.h
#import <UIKit/UIKit.h>
#import "AFNetworking.h"
@interface Services : NSObject
- (void) doSignUp:(NSMutableDictionary*)params;
@end 
```

服务.m

```
// Service.m
 #import "Services.h"
 #import "Config.h"
 @implementation Services

 - (void) doSignUp:(NSMutableDictionary*)params {
     NSURL *url = [NSURL URLWithString:@"http://MYURL.COM"];
     AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
     NSURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"signup.json" parameters:params];
     AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
         [self handleSignUp:JSON];
     } failure:nil];
     [operation start];
 }

 - (User*) handleSignUp:(NSMutableArray*)json {
     User * user = nil;
     if ([[json valueForKey:@"success"] isEqualToString:@"true"]) {
           // create user here ...
     }
     return user;
 } 
```

SignUpViewController.h

```
#import "Service.h"
 @interface SignUpViewController : UIViewController {
     Service * service;
 }

 @property (nonatomic, strong) Service * service; 
```

注册视图控制器.m

```
#import "SignUpViewController.h"
 @interface SignUpViewController ()
 @end

 @implementation SignUpViewController

 @synthesize service = __service;
 - (IBAction) initSignUp:(id)sender {
      // create params...
      [self.service doSignUp:params];
 } 
```

同样，所有这些代码都做了它应该做的事情......我只需要知道它应该如何通信。如何提醒**SignUpViewController**已调用 handleSignUp 并且新的*User*对象**可用**？

谢谢你的时间，安德烈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:14:46.403

据我所知，您没有意识到此过程的异步性质：实际上，由于网络或 IO 操作需要很长时间才能完成，我们倾向于使用异步访问，我的意思是：调用者（视图控制器）在Web API 通过服务，然后停止等待响应。实际上，网络处理可以在不同的进程或线程或处理器的核心上完成。

那么，当操作完成时，调用者如何被服务通知呢？为此，我们必须使用委托绑定两个对象：我们创建一个协议（它只是一个对象将响应的消息的声明）并在我们的视图控制器中实现它，这样任何使用它的人都会知道确定有哪些消息可用。

然后，我们将在我们的服务中声明一个类型为 id 的委托，一旦操作完成，就会调用该委托。

这几乎就像在服务类中导入 ViewController.h 并为服务提供指向视图控制器的指针，但以正确的方式完成（没有循环引用并尊重 SOLID 原则）

现在一些代码：

```
//service.h
@protocol RemoteApiProtocol <NSObject>
@required
-(void) UserLoggingIn;
-(void) UserLoggedIn:(User*)user;
-(void) UserLoginError:(NSError *)error;
@end 
```

该协议像一个小接口一样工作，它是两个类/对象之间的契约。然后在您的服务中，您可以为协议声明字段和属性：

```
//Service.h
#import <UIKit/UIKit.h>
#import "AFNetworking.h"
@interface Services : NSObject{
      __weak id<RemoteApiProtocol> delegate;
}

@property (nonatomic, assign) id<RemoteApiProtocol> delegate;

- (void) doSignUp:(NSMutableDictionary*)params;

@end 
```

此时，您在视图控制器中实现协议，集成您刚刚构建的合同。这样，服务器将知道委托将始终能够响应协议消息。

```
//SignUpViewController.h
#import "Service.h"
 @interface SignUpViewController : UIViewController <RemoteApiProtocol> {
     Service * service;
 }

 @property (nonatomic, strong) Service * service; 
```

实现协议后，您可以将视图控制器分配为服务器的委托，这样服务器在调用 api 后将能够使用调用结果调用委托。为此，您需要实现将由服务调用的协议消息：

```
//SignUpViewController.m
#import "SignUpViewController.h"

 @implementation SignUpViewController

 @synthesize service = __service;
 - (IBAction) initSignUp:(id)sender {
      //create the service with params
      //...

      //assign self as the delegate
      self.service.delegate = self;
      [self.service doSignUp:params];
 }

#pragma mark - RemoteApiProtocol
-(void) UserLoggingIn
{
      //login started, 
      //you can show a spinner or animation here
}
-(void) UserLoggedIn:(User*)user
{
      //user logged in , do your stuff here
}
-(void) UserLoginError:(NSError *)error
{
      NSLog(@"error: %@",error);
}

@end 
```

最后，在成功和错误块中调用 api 之后，您在服务中调用消息：

```
// Service.m
 #import "Services.h"
 #import "Config.h"
 @implementation Services

 - (void) doSignUp:(NSMutableDictionary*)params {
     NSURL *url = [NSURL URLWithString:@"http://MYURL.COM"];
     AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
     NSURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"signup.json" parameters:params];
     AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
         [self handleSignUp:JSON];
     } failure:nil];

     //Signaling the start of the signup operation to the delegate
     if(self.delegate){
          [self.delegate UserLoggingIn];
     }

     [operation start];
 }

 - (User*) handleSignUp:(NSMutableArray*)json {
     User * user = nil;
     if ([[json valueForKey:@"success"] isEqualToString:@"true"]) {
           // create user here ...
           //call the delegate (view controller) passing the user
           if(self.delegate){
               [self.delegate UserLoggedIn:user];
           }
     }else{
           //error handling
           if(self.delegate){
               //NSError *error = ...
               //[self.delegate UserLoginError:error];
           }
     }

     //return user;
 }
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:45:24.420

您可能想查看`Delegation`and 或 a `Data Source`。查看我在这篇文章中接受的答案以获取示例，并参考有关该主题的 Apple Docs。

[Objective C 视图到控制器的通信](https://stackoverflow.com/questions/10941177/objective-c-view-to-controller-communication/10941216#10941216)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:19:08.297

将回调块参数添加到`doSignUp`（可能应该重命名为`signUpWithParams:success:failure:`），以便控制器可以响应注册成功或失败，并具有可用于向用户呈现相关信息的任一情况的上下文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T06:50:17.793

委托方法肯定会奏效。您基本上可以将委托添加到服务类，并在调用 doSignup 之前将委托设置为等于视图控制器。

但是，我会使用块来实现它。向 doSignUp 方法添加一个参数，该参数是一个完成块，在 SignUpViewController 中声明。有关如何将块作为参数传递的示例，请查看 AFNetworking 的源代码。********

# python - 如何在python中搜索并获取DLL文件的目录

> ID：11007896
> 
> 赞同：3
> 
> 时间：2012-06-13T03:38:47.040
> 
> 标签：python, search, dll, operating-system, ctypes

假设我有一个`dll`名为 的文件`banana.dll`，并且我有一个名为的模块`banana.py`，它将用于`ctypes`加载`banana.dll`，并且它们存储在同一目录中，例如`c:\Python27\lib`在 Windows 中。

`testing.py`现在我在其他目录（例如）中创建一个新的 python 文件`c:\user\desktop`，它将导入`banana.py`模块。但是由于当前工作目录`testing.py`是存储的目录。所以我需要`c:\Python27\lib`通过硬编码手动将目录更改为。

但是有没有更聪明的方法可以搜索`banana.dll`存储路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T23:22:55.607

如果您安装了 pywin32：

```
import _win32sysloader
mod = 'banana'
path_to_mod = _win32sysloader.GetModuleFilename(mod) or _win32sysloader.LoadModule(mod) 
```

或者

```
import win32api
mod = 'banana'
path_to_mod = win32api.GetModuleFileName(win32api.LoadLibrary(mod)) 
```

如果没有pywin32，可以使用ctypes访问win32 api：

```
import ctypes
from ctypes.wintypes import HANDLE, LPWSTR, DWORD

GetModuleFileName = ctypes.windll.kernel32.GetModuleFileNameW
GetModuleFileName.argtypes = HANDLE, LPWSTR, DWORD
GetModuleFileName.restype = DWORD

mod = 'banana'
MAX_PATH = 260
dll = ctypes.CDLL(mod) or ctypes.WINDLL(mod)
buf = ctypes.create_unicode_buffer(MAX_PATH)
GetModuleFileName(dll._handle, buf, MAX_PATH)
path_to_mod = buf.value 
```

不要忘记处理 WindowsError 和其他可能的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:45:51.540

尝试：

```
import banana
import os.path

module_dirname = os.path.dirname(banana.__file__) 
```

# c# - 弃用另一个类型或方法时是否有消息标准

> ID：11007897
> 
> 赞同：0
> 
> 时间：2012-06-13T03:39:16.927
> 
> 标签：c#, .net, standards, deprecated, obsolete

我用：

```
[Obsolete("Please use [NEW API] instead.")] 
```

弃用公共 API，但我不确定**[NEW API]**的标准是什么。以下示例似乎很标准：

```
[Obsolete("Please use Method2() instead.")] //This seems to be ok if Method2 is in the same class
[Obsolete("Please use Class2.Method1() instead.")] //This seems to be ok if we are referencing a different class in the same namespace
[Obsolete("Please use Namespace.Class2.Method1() instead.")] //This seems to be ok if we are referencing a different class in a different namespace 
```

但是，当您用带有 args 的特定方法替换 API 时，它开始变得模糊：

```
[Obsolete("Please use Method2(string, string) instead.")] 
```

这是引用特定方法类型的正确方法还是包含变量名？例如：

```
[Obsolete("Please use Method2(string arg1, string arg2) instead.")] 
```

现在更难的是，如果类型已移动到另一个程序集，例如：

```
[Obsolete("Please use Namespace.ClassName.Method2(), AssemblyName instead.")]
[Obsolete("Please use AssemblyName!Namespace.ClassName.Method2() instead.")] 
```

哪个是正确的方法，还是有另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T04:09:54.043

我认为你在正确的轨道上，这与我过去所做的一致。我经常觉得 ObsoleteAttribute 可能会有更多的重载（也许多个属性甚至意味着稍微不同的东西？）。看看 .NET 框架中的一些示例，这些示例与您提到的完全一样：

```
[ObsoleteAttribute("This class has been deprecated. Please use System.Xml.Xsl.XslCompiledTransform instead. http://go.microsoft.com/fwlink/?linkid=14202")]
public sealed class XslTransform

[Obsolete("Please use Hashtable(int, float, IEqualityComparer) instead.")] 
public Hashtable(int capacity, float loadFactor, IHashCodeProvider hcp, IComparer comparer) : this(capacity, loadFactor) { 
```

# jsp - 使用 JSTL 显示欧元符号

> ID：11007898
> 
> 赞同：1
> 
> 时间：2012-06-13T03:39:28.003
> 
> 标签：jsp, jstl, euro

我在正确保存欧元符号的 mysql 数据库中有文本。我想要做的是在 javascript 中创建一个数组条目，当用户从下拉列表中选择一个选项时，它将用于填充文本区域。目前我拥有的是：

```
var cannedResponses = new Object();
<c:forEach items="${pageModel.cannedResponses}" var="cannedResponse" varStatus="status">
cannedResponses["${cannedResponse.id}"] = "${cannedResponse.response}";
</c:forEach> 
```

这会将所有预设响应添加到数组中，但是当我查看源代码时，我已经可以看到欧元符号是一个？，当它填充文本区域时，它仍然是一个？。在调试时，我可以看到在 servlet 的响应字符串中正确设置了欧元符号，所以我知道它是正确的，直到这一点。

在加载到 HTML 时如何使其正确显示的任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:49:34.653

您的问题似乎是返回文件的字符编码。问号表示它是 ASCII，但您应该将其设置为 UTF-8。您需要检查几个设置：1）您的 web/app 服务器所服务的 JSP 的编码设置，2）文件系统上 jsp 文件的实际编码（使用 Notepad++ 或 Textpad 的功能检查编码文件）。3）jsp本身内部的编码集。

# hibernate - (N)Hibernate : 一次搜索 2 个字段

> ID：11007901
> 
> 赞同：0
> 
> 时间：2012-06-13T03:39:51.237
> 
> 标签：hibernate, nhibernate, nhibernate-criteria

在我的项目中，我有一个 Member 类：

```
public virtual string FirstName;
public virtual string LastName; 
```

我熟悉使用 Criteria 和 Disjunctions 单独搜索列，但是如何设置以便“Davie Jones”返回名字为 Davie 和姓氏为 Jones 的人（反之亦然）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:30:03.397

如果您使用的是 nHibernate 3.0，您可以使用`QueryOver`：

```
IEnumerable<Member> matchingMembers = iSession.QueryOver<Member>()
                                              .Where(m => m.FirstName == firstName)
                                              .And(m => m.LastName == lastName)
                                              .List<Member>(); 
```

# mysql - 当我选择多行进行更新时，我会死锁吗？

> ID：11007905
> 
> 赞同：8
> 
> 时间：2012-06-13T03:40:13.293
> 
> 标签：mysql, database-deadlocks

在 MySQL+InnoDB 中，假设我有一个表和两个线程，它们都执行“SELECT ... FOR UPDATE”。假设两个 SELECT 语句最终都选择了多行，例如它们都最终选择了 R42 和 R99 行。这有可能会陷入僵局吗？

我正在考虑这种情况：第一个线程尝试锁定 R42 然后 R99，第二个线程尝试锁定 R99 然后 R42。如果我不走运，两个线程会死锁。

我在 MySQL[词汇表中读到“死锁](http://dev.mysql.com/doc/refman/5.6/en/glossary.html)”

> 当事务锁定多个表中的行（通过 UPDATE 或 SELECT ... FOR UPDATE 等语句）但顺序相反时，可能会发生死锁。...
> 
> 为了减少死锁的可能性，... 在 SELECT ... FOR UPDATE 和 UPDATE ... WHERE 语句中使用的列上创建索引。

这*暗示*在我的情况下（单表）我不会死锁，可能是因为 MySQL 会自动尝试按主键的顺序锁定行，但我想确定，我在确切地告诉我发生了什么的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T03:48:00.753

来自 MySQL 文档

```
InnoDB uses automatic row-level locking. You can get deadlocks even in the case of 
transactions that just insert or delete a single row. That is because these operations    
are not really “atomic”; they automatically set locks on the (possibly several) index 
records of the row inserted or deleted. 
```

[http://dev.mysql.com/doc/refman/5.1/en/innodb-deadlocks.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-deadlocks.html)

所以一般来说，死锁不是致命的，你只需要再试一次，或者添加适当的索引，这样扫描的行数就会减少，从而锁定的行数就会减少。

# java - Junit4 和 TestNG 在一个项目中使用 Maven 并具有继承性

> ID：11007906
> 
> 赞同：1
> 
> 时间：2012-06-13T03:40:19.483
> 
> 标签：java, maven, junit, testng

[我在一个使用 Maven 的项目中遇到了与 Junit4 和 TestNG](https://stackoverflow.com/questions/1238017/junit4-and-testng-in-one-project-with-maven)相同的问题，但我仍然有问题。我创建了需要使用junit4和testng的简单项目这是root pom：

```
 <groupId>com.dimas.testmodule</groupId>
            <artifactId>TheParent</artifactId>
            <version>0.0.001</version>
            <name>TheParent</name>
            <packaging>pom</packaging>

            <properties>
                <spring.version>3.0.5.RELEASE</spring.version>
                <spring.scope>test</spring.scope>
                <maven.surefire.plugin.version>2.9</maven.surefire.plugin.version>
            </properties>

            <dependencies>
                <dependency>
                    <groupId>junit</groupId>
                    <artifactId>junit</artifactId>
                    <version>4.7</version> 
                       <scope>test</scope>
                    </dependency>
        ...etc
                </dependencies>

            <build>
                <finalName>${project.artifactId}</finalName>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <version>2.3.2</version>
                        <configuration>
                            <source>1.6</source>
                            <target>1.6</target>
                        </configuration>
                    </plugin>
                </plugins>
            </build>

            <profiles>
                <profile>
                    <id>default</id>
                    <activation>
                        <activeByDefault>true</activeByDefault>
                    </activation>
                    <modules>
                        <module>JUnitOnly</module>
                        <module>TestNGOnly</module>
                        <module>testmodule</module>
                    </modules>
                    <build>
                        <plugins>
                            <plugin>
                                <groupId>org.apache.maven.plugins</groupId>
                                <artifactId>maven-surefire-plugin</artifactId>
                                <version>${maven.surefire.plugin.version}</version>
                                <configuration>
                                    <redirectTestOutputToFile>false</redirectTestOutputToFile>
<excludes>
                                <exclude>**/*NGTest.java</exclude>
                            </excludes>
                                </configuration>
                            </plugin>
                        </plugins>
                    </build>
                </profile>

                <profile>
                    <id>testNGonly</id>
                    <modules>
                        <module>JUnitOnly</module>
                        <module>TestNGOnly</module>
                        <module>testmodule</module>
                    </modules>

                    <build>
                        <plugins>
                            <plugin>
                                <groupId>org.apache.maven.plugins</groupId>
                                <artifactId>maven-surefire-plugin</artifactId>
                                <version>${maven.surefire.plugin.version}</version>
                                <configuration>
                                    <redirectTestOutputToFile>false</redirectTestOutputToFile>
                                    <includes>
                                        <include>**/*NGTest.java</include>
                                    </includes>
                                </configuration>
                            </plugin>
                        </plugins>
                    </build>
                </profile>
            </profiles> 
```

模块 JUnitOnly 和 TestModule 只是继承而不覆盖任何属性。这里是 TestNgOnly

```
<groupId>com.dimas.testmodule.testngonly</groupId>
    <artifactId>TestNGOnly</artifactId>
    <version>0.0.001</version>
    <name>testngonly</name>
    <parent>
        <groupId>com.dimas.testmodule</groupId>
        <artifactId>TheParent</artifactId>
        <version>0.0.001</version>
    </parent>

    <dependencies>
        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <version>6.3.1</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <profiles>
        <profile>
            <id>testNGtest</id>  
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <version>${maven.surefire.plugin.version}</version>
                        <configuration>
                            <redirectTestOutputToFile>false</redirectTestOutputToFile>
                            <suiteXmlFiles>
                                <suiteXmlFile>
                                    <!--test/resources/my-testng.xml-->
                                    src\test\resources\my-testng.xml
                                </suiteXmlFile>
                            </suiteXmlFiles>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles> 
```

好吧，我需要忽略默认配置文件的 testng 测试，并仅启动配置文件 testNGOnly 的 testng 测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:42:29.997

共有三个模块-`junit`和。`testng``mixed`

默认配置文件应该只执行 junit 测试 - 即运行`junit`模块并运行模块的 junit 测试`mixed`。 `testNG`profile 应该只执行 testNG 测试 - 即运行`testNG`模块并运行模块的 testNG 测试`mixed`。

配置文件在 Maven 中的工作方式，不可能`exclude`在配置文件中使用模块。但是，不需要构建不需要的模块。

因此，在默认配置文件中，有模块`junit`和`mixed`.

在 testNG 配置文件中，添加 module `testNG`。

按照 maven 最佳实践，`<dependencies>`在父 pom 中定义`<dependencyManagement>`. 这允许我们只在模块中使用 junit 依赖，在`junit`模块中使用 testNG 依赖`testNG`。

三个模块之间的配置没有什么共同点`surefire`，因此不需要在父 pom.xml 中指定。

由于不需要在配置文件中运行 junit 测试，因此在配置文件中为模块`testNG`添加插件配置。`skipTests``testNG``junit`

[使用相关](https://stackoverflow.com/questions/1238017/junit4-and-testng-in-one-project-with-maven)SO 问题的[答案](https://stackoverflow.com/a/1238637/254643)中的提示配置`mixed`pom 。这变得很棘手，因为 surefire 需要根据配置文件使用 junit 或 testng 运行器。

我已将上述建议合并到[此处](https://github.com/maruhgar/mvn-examples/tree/master/mixtestsmultimodule)的示例项目中。

# function - 函数的这个属性的名称是什么？

> ID：11007907
> 
> 赞同：1
> 
> 时间：2012-06-13T03:40:46.900
> 
> 标签：function, terminology

假设你有一个函数 f：列出 a -> a 使得 f 是关联的并且 f(x, y, z) === f(x, f(y, z))。后一种属性是否有常规名称？

具有此属性的函数示例有 AND、XOR、sum、product 和 GCD。没有此属性的关联函数的示例是 NAND 和 XNOR。

我认为该属性相当于说 f(xs) === reduce(f, xs)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:56:15.723

看起来这也相当于说 f 是关联二元函数及其中性元素的变态。不完全从舌头上滚下来。

（另外，NAND 不是关联的。我的错。）

# mysql - MySQL“您的 SQL 语法有错误”错误

> ID：11007909
> 
> 赞同：-2
> 
> 时间：2012-06-13T03:40:58.563
> 
> 标签：mysql, phpmyadmin

我的错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 10 行的 ')' 附近使用正确的语法

我的错误是什么，解决方案是什么？

```
CREATE TABLE login(
user_name VARCHAR(10) NOT NULL DEFAULT",
password VARCHAR(10) NOT 'NULL DEFAULT",
email VARCHAR(30) NOT NULL DEFAULT",
account_type VARCHAR(10) NOT NULL DEFAULT",
ic INT(10) NOT NULL DEFAULT",
telephone_no INT(20) NOT NULL DEFAULT",
pin INT(20) NOT NULL DEFAULT",
gender VARCHAR(10) NOT NULL DEFAULT",
shipping_address VARCHAR(100) NOT NULL DEFAULT",
city VARCHAR(10)  NOT NULL DEFAULT",
state VARCHAR(10) NOT NULL DEFAULT",
country VARCHAR(10) NOT NULL DEFAULT",
zip_code INT(10) NOT NULL DEFAULT",
credit_type VARCHAR(10) NOT NULL DEFAULT",
credit_number INT(20) NOT NULL DEFAULT",
cvv2 INT(3) NOT NULL DEFAULT",
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:42:01.107

MSSQL 开发人员在这里（所以不确定我可以为您的玩具 RDBMS 提供多少帮助），但从阅读错误消息后，您有一个额外`,`的`);`.

此外，您似乎`'`在第三行有一个额外的内容，并且您使用的语法`DEFAULT`没有意义（更不用说您为`INT`列设置的空字符串）。

也许：

```
CREATE TABLE login
  (
     user_name        VARCHAR(10) NOT NULL DEFAULT '',
     password         VARCHAR(10) NOT NULL DEFAULT '',
     email            VARCHAR(30) NOT NULL DEFAULT '',
     account_type     VARCHAR(10) NOT NULL DEFAULT '',
     ic               INT(10) NOT NULL DEFAULT 0,
     telephone_no     INT(20) NOT NULL DEFAULT 0,
     pin              INT(20) NOT NULL DEFAULT 0,
     gender           VARCHAR(10) NOT NULL DEFAULT '',
     shipping_address VARCHAR(100) NOT NULL DEFAULT '',
     city             VARCHAR(10) NOT NULL DEFAULT '',
     state            VARCHAR(10) NOT NULL DEFAULT '',
     country          VARCHAR(10) NOT NULL DEFAULT '',
     zip_code         INT(10) NOT NULL DEFAULT 0,
     credit_type      VARCHAR(10) NOT NULL DEFAULT '',
     credit_number    INT(20) NOT NULL DEFAULT 0,
     cvv2             INT(3) NOT NULL DEFAULT 0
  ); 
```

就我个人而言，我担心有人问这个问题有一个名为的字段`credit_number`和一个与`password`字段不匹配的字段，对于 SHA1 哈希`salt`也不够长。`password`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:51:56.780

正确的语法是：

```
CREATE TABLE login (
    user_name VARCHAR(10) NOT NULL DEFAULT '',
    password VARCHAR(10) NOT NULL DEFAULT '',
    email VARCHAR(30) NOT NULL DEFAULT '',
    account_type VARCHAR(10) NOT NULL DEFAULT '',
    ic INT(10) NOT NULL DEFAULT 0,
    telephone_no INT(20) NOT NULL DEFAULT 0,
    pin INT(20) NOT NULL DEFAULT 0,
    gender VARCHAR(10) NOT NULL DEFAULT '',
    shipping_address VARCHAR(100) NOT NULL DEFAULT '',
    city VARCHAR(10)  NOT NULL DEFAULT '',
    state VARCHAR(10) NOT NULL DEFAULT '', 
    country VARCHAR(10) NOT NULL DEFAULT '',
    zip_code INT(10) NOT NULL DEFAULT 0,
    credit_type VARCHAR(10) NOT NULL DEFAULT '',
    credit_number INT(20) NOT NULL DEFAULT 0,
    cvv2 INT(3) NOT NULL DEFAULT 0
); 
```

我刚刚从您的创建语法中更正了语法，您应该下载一些工具，例如[HeidiSQL](http://www.heidisql.com/)（或[PHPMyAdmin](http://www.phpmyadmin.net)，这样您就不需要努力生成正确的 DML 语法）并确保您正在寻找什么默认值，因为我我确定你不需要 0 作为所有 Integer 字段的默认值，而 '' （空字符串）作为所有 varchar 或 char 字段的默认值。

您是表设计的最佳决策者，我相信您可能不希望所有字段都为 NOT NULL，其中一些字段也可以具有 NULL 值。现在，当您允许 NULL 值时，您不需要为该字段指定 DEFAULT。

# android - 方向改变时如何配置特定片段的方向？

> ID：11007913
> 
> 赞同：1
> 
> 时间：2012-06-13T03:41:33.313
> 
> 标签：android, orientation, android-fragments

我里面有多个片段`MainActivity`我只想在方向更改时配置`DetailFragment`

```
public class DetailFragment extends Fragment{
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            WindowManager wm = getActivity().getWindowManager();

            Display d = wm.getDefaultDisplay();
            if(d.getWidth() > d.getHeight()){
                mDetailView = inflater.inflate(R.layout.detail, container, false);
            }else{
                mDetailView = inflater.inflate(R.layout.detail_port, container, false);
            }
            gridView = (GridView)mDetailView.findViewById(R.id.grid);
        return mDetailView;
        }
} 
```

所以，我必须`onConfigurationChanged`在`SubTopicFragment`下面重写是`SubTopicFragment extend ListFragment`

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    updateDetial(topic_index, args.getString("group_id"), args.getString("group_name"));
}

public void updateDetial(int subTopicPosition,String groupID, String groupName){
    FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction ft = fragmentManager.beginTransaction();
    DetailFragment detailView = (DetailFragment)getFragmentManager()
                                .findFragmentById(R.id.detailFrame);
    DetailFragment detailFrag = new DetailFragment(topic_index, subTopicPosition, groupID, groupName);

    if(detailView==null){

        ft.add(R.id.detailFrame, detailFrag);
        ft.commit();
    }else{
        ft.replace(R.id.detailFrame, detailFrag);
        ft.commit();
    }
} 
```

它运作良好。但是当**我移动到另一个活动时出现问题，改变方向并按下返回按钮，它会导致强制关闭**我该如何解决这个问题？

```
06-13 10:15:54.758: E/AndroidRuntime(1050): FATAL EXCEPTION: main
06-13 10:15:54.758: E/AndroidRuntime(1050): java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1192)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1203)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.app.BackStackRecord.commitInternal(BackStackRecord.java:557)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.app.BackStackRecord.commit(BackStackRecord.java:541)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at com.april.android.SubTopicFragment.updateDetial(SubTopicFragment.java:120)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at com.april.android.SubTopicFragment.onConfigurationChanged(SubTopicFragment.java:259)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.app.FragmentManagerImpl.dispatchConfigurationChanged(FragmentManager.java:1706)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.app.Activity.onConfigurationChanged(Activity.java:1402)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.app.ActivityThread.performConfigurationChanged(ActivityThread.java:3298)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.app.ActivityThread.handleActivityConfigurationChanged(ActivityThread.java:3427)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1113)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.os.Looper.loop(Looper.java:132)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at android.app.ActivityThread.main(ActivityThread.java:4123)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at java.lang.reflect.Method.invokeNative(Native Method)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at java.lang.reflect.Method.invoke(Method.java:491)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-13 10:15:54.758: E/AndroidRuntime(1050):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:49:04.700

几乎所有关于您的代码的内容都是错误的。

```
 Display d = wm.getDefaultDisplay();
        if(d.getWidth() > d.getHeight()){
            mDetailView = inflater.inflate(R.layout.detail, container, false);
        }else{
            mDetailView = inflater.inflate(R.layout.detail_port, container, false);
        }
        gridView = (GridView)mDetailView.findViewById(R.id.grid); 
```

不要这样做 - 该平台使用命名约定有自己的加载布局的方式。您的代码应如下所示：

```
 mDetailView = inflater.inflate(R.layout.detail, container, false);
    gridView = (GridView)mDetailView.findViewById(R.id.grid); 
```

如果您希望它在不同方向看起来不同，请在两者中放置两个 detail.xml 文件，`layout-port`操作系统`layout-land`将加载正确的文件（并处理对所有资源 ID 进行重复数据删除，这可能是您的问题）。还：

```
DetailFragment detailView = (DetailFragment)getFragmentManager()
                            .findFragmentById(R.id.detailFrame);
DetailFragment detailFrag = new DetailFragment(topic_index, subTopicPosition, groupID, groupName);

if(detailView==null){

    ft.add(R.id.detailFrame, detailFrag);
    ft.commit();
}else{
    ft.replace(R.id.detailFrame, detailFrag);
    ft.commit();
} 
```

您已经获得了对 Fragment 的访问权限。然后，您创建一个全新的片段。然后，您在添加新片段之前检查您的第一个片段是否为空？.add() 和 .replace() 是不同的，因为 add() 专门不会删除前一个片段 - replace() 不会抛出错误，但是如果没有前一个片段要删除，所以你可以每次都使用它.

```
 ft.replace(R.id.detailFrame, new DetailFragment(topic_index, subTopicPosition, groupID, groupName);
    ft.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T05:00:41.070

您不应该在 onCreateView 中加载两个不同的布局 ID

为您的两个布局使用一个布局 ID

你能做的是

布局文件夹中的 R.layout.detail

R.layout.detail_port 重命名为 R.layout.detail 放在 res 的 layout-port 文件夹中

然后 inflater.inflate(R.layout.detail, container, false); 会根据方向自动给出具体的布局

阅读本文档[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

# css - HTML5 Boilerplate 模板似乎不支持本地 HTML/CSS/JS 项目的 IE7/8 上的 CSS3 属性

> ID：11007919
> 
> 赞同：0
> 
> 时间：2012-06-13T03:41:53.157
> 
> 标签：css, internet-explorer-8, internet-explorer-7, html5boilerplate, google-chrome-frame

我正在尝试使用 HTML5 Boilerplate 模板在我的机器上创建一个本地 HTML/CSS/JS 项目。我正在使用 CSS3 属性，如边框半径，它在 IE 9 上看起来不错。但在使用 F12 开发工具在 IE7 和 IE8 中测试时，该属性没有效果。

我正在检查[http://htmlemailboilerplate.com/](http://htmlemailboilerplate.com/)在 IE7/8 模式下的行为。该网站似乎运行良好，并支持 IE7/8 模式下的border-radius 属性。然后我继续下载[http://htmlemailboilerplate.com/](http://htmlemailboilerplate.com/)作为本地机器的完整网页。在 IE7/8 模式下打开的本地副本不支持 CSS3 的border-radius 属性。（http://htmlemailboilerplate.com/网站在nav_elope.png后面使用了border-radius属性来圆角）

关于在本地网页上运行 HTML5 样板与在服务器上托管的网站的区别，我有什么不明白的地方吗？

如何使下载的页面的行为与网站在 IE7/8 模式下的行为完全相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:52:03.593

您似乎已将 Google Chrome Frame (GCF) 作为 IE 插件安装。[http://htmlemailboilerplate.com/](http://htmlemailboilerplate.com/)站点使用GCF 在 IE 浏览器中显示 HTML5 和 CSS3。它具有以下 META 标签：

`<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>`

"chrome=1" 表示如果 GCF 可用，则始终使用它。

除非您编辑注册表，否则 GCF 无法在本地工作。您需要转到：
`HKCU\Software\Google\ChromeFrame`
并添加
`AllowUnsafeURLs=1 (DWORD)`.

您可以像这样访问您保存的页面：gcf:c:/path_to_file/HTML5_Tests/HTML EMAIL BOILERPLATE v 0.5 updated 11_5.htm

您可能会发现此页面很有帮助：[Chrome Frame：开发人员指南](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started)

测试您的[网站](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Testing-Your-Sites)部分包含我在上面详述的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:21:15.130

IE < 9 不支持边框半径。见[http://caniuse.com/#search=border-radius](http://caniuse.com/#search=border-radius)

更新：见[http://css3pie.com/](http://css3pie.com/)。我不知道这是否有效。

# html - 如何使负责任的图像在移动站点中对齐中心？

> ID：11007922
> 
> 赞同：0
> 
> 时间：2012-06-13T03:42:03.353
> 
> 标签：html, css, wap

我有 4 张图片用于 wap 网站。在小屏幕上，我希望它是两行，每行两个图像。如果在像ipad这样的大屏幕上，那么它会变成一行4个图像。而且也是在页面中居中对齐，怎么可能呢？

这是我的html部分：

```
<div class="fo3">
    <ul>
        <li><img src="img/pic1.jpg" width="100%" /></li>
        <li><img src="img/pic2.jpg" width="100%" /></li>
        <li><img src="img/pic3.jpg" width="100%" /></li>
        <li><img src="img/pic4.jpg" width="100%" /></li>
    </ul>
    <div class="clear"></div>
</div> 
```

这是CSS部分：

```
.fo3{
    padding:0 10%;
    max-width:80%;
}

.fo3 ul{
    position:absolute;
    left:50%;
}

.fo3 ul li{
    float:left;
    width:50%;
    max-width:268px;
    display:inline;
}

.fo3 ul li img{
    display:block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:34:38.330

也许您想查看[CSS 媒体查询](https://developer.mozilla.org/en/CSS/Media_queries)？它们允许您根据用户屏幕的[宽度定义不同的 CSS 样式等。](https://developer.mozilla.org/en/CSS/Media_queries#width)

# javascript - 超大 - 动态加载图像

> ID：11007924
> 
> 赞同：0
> 
> 时间：2012-06-13T03:42:18.993
> 
> 标签：javascript, jquery, supersized

好的，我在页面上有一个调用这个的 js 脚本：

```
 function loadTheseimages(slideList) {

                jQuery(function($){

                    var slideIterate = [];
                    var slidesObj = new Object;

                    slideIterate = slideList.split(',');

                    $.each(slideIterate, function(key, value) { 

                            slidesObj += '{image: "' + value + '"}';  

                    });

                    $.supersized({

                        // Functionality
                        slide_interval          :   3000,       // Length between transitions
                        transition              :   1,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                        transition_speed        :   700,        // Speed of transition

                        // Components                           
                        slide_links             :   'blank',    // Individual links for each slide (Options: false, 'num', 'name', 'blank')
                        slides                  :   [           // Slideshow Images
                                                            slidesObj  
                                                    ]

                    });                     
                });
            } 
```

调用上述函数的脚本通过

```
 "http://cliffside.ca/wp-content/uploads/2012/06/cliff-side-nightsky.jpeg, http://cliffside.ca/wp-content/uploads/2012/05/Sunset.jpg, http://cliffside.ca/wp-content/uploads/2012/05/Relaxing-Room.jpg" 
```

为什么它不起作用？

[http://Cliffside.ca/](http://Cliffside.ca/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T07:55:05.577

澄清一下，必须传递给 supersized 的对象必须像这样构建：

```
 var slidesObj = new Array;
    $.each( data, function( key, value ) {
        var slide = new Object;         
        slide = {image:value };  
        slidesObj.push(slide);
    }); 
```

并且在调用超大时只需输入以下内容：

```
slides                  :   slidesObj, 
```

# php - CakePHP 在一台服务器上查看 URL 区分大小写，而不是在另一台服务器上...为什么？

> ID：11007925
> 
> 赞同：0
> 
> 时间：2012-06-13T03:42:43.150
> 
> 标签：php, cakephp, case-sensitive

所以我正在开发一个 CakePHP 应用程序，并在我的一个控制器中有这一行：

```
$this->render('/vids/index'); 
```

它在 MAMP 中运行良好。但是在我的实时站点（在 MediaTemple 上）上，控制器找不到视图。在几乎把我的头发拉出来之后，我把这条线改成了这样：

```
$this->render('/Vids/index'); 
```

它奏效了。

祖？什么可以解释一个系统区分大小写，而另一个不区分大小写？我的假设是这不是蛋糕问题，但我很困惑，我不知道是什么导致了这种差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:16:18.857

仅仅因为第二行（大写的 Vids）对于 2.0 应用程序是正确的。而且我猜OSX（猜你使用MAMP）和你部署应用程序的服务器操作系统之间存在差异。

为什么要手动调用 render() ？如果您从 Web 访问 /vids，它应该会自动路由到 VidsController::index() 并且控制器将自动选择正确的视图。

代表视频的 Vids？这是一个可怕的名字。代码中的缩写很难，如果您想依赖 /vids 作为 URL，请使用路由器重写该 URL。

# design-patterns - “设计模式”可以应用于不同的程序吗？

> ID：11007926
> 
> 赞同：0
> 
> 时间：2012-06-13T03:42:49.110
> 
> 标签：design-patterns, observer-pattern, publish-subscribe

我有 2 个程序 A、B。如果 A 完成，我希望 B 知道并开始运行，使用来自 A 结果的数据。

A 是一个 .NET Web 应用程序。我认为这并不是一直都在记忆中，对吧？只有在浏览器请求时才活着，对吧？

之前，A 和 B 是同一个程序的 2 个函数。但是 B 程序有时会因为业务原因而失败。而且即使B没有失败，也很费时间，让客户等待太久，不开心。所以我把B分开了。客户使用 A 顺利且满意。B 在后台做工作人员。

我目前的设计是：当 A 完成时，A 将数据保存到数据库中。B是一个windows服务。它每 5 分钟检查一次数据库，并在找到新作业时开始运行。A、B不认识。

老板问为什么闲置5分钟？我回答是因为这是实现我们某些业务的最简单方法。我没有设计太多。

所以我去阅读材料，发现这`Observer Pattern`似乎是我想要的。看了几遍，觉得`Observer Pattern`只能应用到同一个程序中的类，类和对象都在内存中。

我不确定我的问题是：可以`GOF Design Patterns`应用于不同的程序吗？

或者：像 RabbitMQ 这样的东西是如何实现这种实时处理的需求的？

我无法想象将 5 分钟的检查间隔设置为非常小的时间段。这对cpu来说是很大的负担。

**编辑：我已经对`Observer`and进行了这个解释`Publish/Subscribe`，我认为这对那些从搜索中看到这个线程的人很有用。**

[http://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjavascript](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjavascript)

> 观察者模式和发布/订阅模式的区别
> 
> 观察者模式要求希望接收主题通知的观察者（或对象）必须将此兴趣订阅到触发事件的对象（主题）。
> 
> 然而，发布/订阅模式使用主题/事件通道，该通道位于希望接收通知的对象（订阅者）和触发事件的对象（发布者）之间。此事件系统允许代码定义应用程序特定事件，这些事件可以传递包含订阅者所需值的自定义参数。这里的想法是避免订阅者和发布者之间的依赖关系。
> 
> 这与观察者模式不同，因为它允许任何订阅者实现适当的事件处理程序来注册和接收发布者广播的主题通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:01:36.550

您说得对，观察者模式更多地用于设计 OO 类。可以在程序之间工作的一种模式是发布-订阅模型，我认为这很适合您的描述。进程 B 订阅由 A 触发的某些事件。这通常由服务架构进行调解；例如，进程 A 和 B 是 Web 应用程序（或 WCF/MVC/Web API），还有第三个应用程序调解发布-订阅模式。所以当 A 完成时，它会向 pub-sub 服务发送一个事件；并且 pub-sub 服务向该事件的所有订阅者（在您的情况下为应用程序 B）发送通知。

你可以自己实现这个模式；还有 .NET 框架，例如实现它的[NServiceBus 。](http://nservicebus.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:30:59.000

应用程序之间观察者模式的类似机制是使用*远程方法调用*或*远程过程调用*（因此在 java 中调用）。在 .Net 中，它应该位于：[Windows Communication Framework](http://msdn.microsoft.com/en-us/library/ms735119%28VS.90%29.aspx)。

应用程序 A 通过 WCF 向应用程序 B 发送（异步）消息。应用程序 B 也有可能首先将自己注册为消息收件人，但万一 A 不时崩溃，这不是最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T04:16:05.227

使用“拉动模型”效率低下，浪费资源。发布-订阅模型是更好的选择。在此 [链接](http://goo.gl/vDpZU)中，您可以看到将指导您的说明。这些示例是用 Java 编写的，但很容易实现 .net。

# c# - 使用流利的 nhibernate 表继承删除对象时出现异常

> ID：11007927
> 
> 赞同：0
> 
> 时间：2012-06-13T03:42:50.660
> 
> 标签：c#, nhibernate, inheritance, fluent-nhibernate

使用流畅的 nhibernate 表继承删除对象时出现异常。

我无法弄清楚我的应用程序结构和映射有什么问题，以及为什么在我使用表继承时它正在寻找多对多映射表？

添加和更新工作正常。

我没有明确设置任何映射，我使用的是默认的流畅 nhibernate 映射。

对于处理我的级联的覆盖，如下所示：

```
public class CascadeAll : IHasOneConvention, IHasManyConvention, IReferenceConvention
{
    public void Apply(IOneToOneInstance instance)
    {
        instance.Cascade.All();
    }

    public void Apply(IOneToManyCollectionInstance instance)
    {
        instance.Cascade.All();
    }

    public void Apply(IManyToOneInstance instance)
    {
        instance.Cascade.All();
    }
} 
```

例外是：

```
Invalid object name 'BlogPageToPage'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: Invalid object name 'BlogPageToPage'. 
```

我的数据库看起来像这样。

```
Page
    Id (Guid)  
    Name  
    etc. 

BlogPage  
    Page_Id (Guid, exact same as parent page)  
   etc. 
```

课程：

```
public class Page : EntityBase 
{
    public Page()
    { 
        BlogPages = new List<BlogPage>(); 
    }

    public virtual IList<BlogPage> BlogPages { get; set; } 

}

public class BlogPage : Page
{
    public BlogPage()
    { 
    }

    public virtual IList<Post> Posts { get; set; } 
} 
```

我的删除看起来像这样：

```
 public bool Delete(T model)
    {
        Session.Delete(model);
        return true;
    } 
```

感谢您的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:09:17.173

我当然是个白痴。

它正在寻找该表的原因是因为我将 BlogPages 作为父级 Page 对象上的列表。

因此，当我尝试删除它时，它只是认为那里应该有另一个表来匹配该关联。

违规线路：

```
 public virtual IList<BlogPage> BlogPages { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:08:36.880

“BlogPageToPage”与您的任何数据库或表或列名都不匹配...您能找到您提到“BlogPageToPage”对象的位置吗？

# jquery - Jquery 平滑滚动在第一次加载 i 时跳转，带有固定侧栏

> ID：11007929
> 
> 赞同：1
> 
> 时间：2012-06-13T03:43:03.680
> 
> 标签：jquery, user-interface, scroll, scrollto

现在，我只是使用 css-tricks 滚动到 jquery 代码，但我遇到了一个非常奇怪的问题。

首次打开站点并单击侧栏上的固定链接时，`scrollto`将在平滑滚动期间跳转。如果您单击相同的侧边栏导航链接两次，页面将滚动到页面中启动跳过的部分。

然而，这就是它变得奇怪的地方。如果您单击页面左上角我网站的徽标并尝试单击侧边栏链接，则链接可以完美运行，完全没有问题。

我根本不熟悉 Jquery。我只是认为这将是一个很好的简单方法来为我的页面上的信息设置动画。

这是我遇到问题的网站：

[hivizdesign.com](http://hivizdesign.com)

请记住：第一次加载页面时，该`scrollto`功能会跳过，但单击徽标后`scrollto`效果很好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:33:19.880

尝试更改此行：

```
$(scrollElem).animate({scrollTop: targetOffset}, 1000, function() {
  location.hash = target;
}); 
```

至：

```
 $(scrollElem).animate({scrollTop: targetOffset}, 1000, function() {     
    if(history.pushState) {
        history.pushState(null, null, target);
    }
    else {
        location.hash = target;
    }
}); 
```

# grails - Cloudfoundry Grails 部署问题 - 未找到线程绑定请求

> ID：11007930
> 
> 赞同：4
> 
> 时间：2012-06-13T03:43:10.403
> 
> 标签：grails, cloud-foundry

这在本地有效。设置：Grails 2.0.3。德班 Linux。我已成功将其他应用程序部署到 Cloud Foundry。

显然，这可能是由于 Spring Security 插件对资源插件不满意而发生的。删除资源插件并不能解决这个问题。

这就是问题：

```
Class: java.lang.IllegalStateException
Message: No thread-bound request found: Are you referring to request attributes outside of
an actual web request, or processing a request outside of the originally receiving thread? 
If you are actually operating within a web request and still receive this message, your 
code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use
RequestContextListener or RequestContextFilter to expose the current request. 
```

将 org.springframework.web.context.request.RequestContextListener 及其加载器添加到 web.xml 并将它们导入页面也无济于事。

网络上有很多关于此的内容，但就我而言，它只发生在 Cloud Foundry 上。

Cloud Foundry 运行在 Java 1.6 上，就像我的机器一样。日志与上面的引用相同，堆栈跟踪与我在网络上找到的相同。

有任何想法吗？我被困住了。我花了两天时间在这上面。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T00:39:03.810

添加`compile ":webxml:1.4.1"`到 BuildConfig.groovy 的 plugins 部分应该可以解决这个问题。感谢[http://support.cloudfoundry.com/entries/21371626-grails-mongodb-deployment-fails](http://support.cloudfoundry.com/entries/21371626-grails-mongodb-deployment-fails)

# google-chrome-extension - 在使用 Google 扩展程序的任何网站上单击提交按钮

> ID：11007934
> 
> 赞同：0
> 
> 时间：2012-06-13T03:43:38.103
> 
> 标签：google-chrome-extension

单击任何网站上的提交按钮，例如。亚马逊，我希望使用 google 扩展来触发 .html。如果可能，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:16:54.857

您确实可以使用可以操作 DOM 的[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)`onsubmit`在（几乎）任何页面上执行脚本，允许您向表单添加事件侦听器（比`onclick`在按钮上更可靠，因为它被触发但表单被提交 - 例如点击`ENTER`） .

你到底是什么意思你“想要一个 .html 被触发”？以什么方式触发？如果您想在发生这种情况时打开另一个选项卡，您可以使用[消息传递来告诉您的后台页面使用](http://code.google.com/chrome/extensions/messaging.html)[chrome.tab.create](http://code.google.com/chrome/extensions/tabs.html#method-create) API 方法为您执行此操作。

# iphone - NSTableView 多选

> ID：11007936
> 
> 赞同：0
> 
> 时间：2012-06-13T03:43:53.197
> 
> 标签：iphone, ios5, selection, nstableview

我`NSTableView` 启用了多项选择

如果我选择项目并来回滚动列表，它们会被记住并显示和选择（蓝色背景）。使用 `didDeselectRowAtIndexPath` 并且`didSelectRowAtIndexPath` 我能够保留我自己的选定项目数组。

那部分效果很好。

但是，如果我随后使用`sectionForSectionIndexTitle` 并跳转到一个字母，则该选择似乎被遗忘，甚至`indexPathForSelectedRows` 似乎已被重置并且现在为空。

我自己的数组记得选择了一个项目，我可以在其中设置 cell.selected`cellForRowAtIndexPath` 但是当我移动列表时它又被遗忘了

任何想法是这是一个错误还是在跳转到一个字母时如何保留选择列表

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:37:15.460

请记住，UITableViewCells 仅用于显示您的数据，它们与您的“模型”绝不存在一对一的关系，因为它们会在必要时排队并重用（即，您可能在 tableview 中显示数千个项目，但只分配了少数 UITableViewCell 实例）。

因此，您需要跟踪可变数组中选定/取消选定的项目，并确保在 tableView:cellForRowAtIndexPath: 方法中检查该项目的存在，然后更新单元格属性以表示您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:26:47.670

通过使用一个`NSMutableArray`选定的行值，可以自己跟踪表中选定的行。然后就是调用`-selectRowAtIndexPath:animated`数组中的最后一个对象来恢复选择。

至于错误：当表格跳转到选定的字母时可能发生的事情是一个`-reloadData`会忘记选定行的流浪者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T04:37:03.213

我认为这是因为你的细胞被重复使用了。不要重复使用细胞（您没有有效地使用细胞）。除此以外，

您可以自己将选择存储在一个数组中，稍后将其用于您的目的。！

# portable-executable - 修补（合并）两个不同的二进制文件（x86 PE）时修复 IAT 和重新定位的最佳方法？

> ID：11007938
> 
> 赞同：2
> 
> 时间：2012-06-13T03:44:00.870
> 
> 标签：portable-executable, cracking, patch

首先 - 您好，感谢您阅读本文，

我有一个 DLL，我没有源代码，但需要在其中添加一些功能。

我使用 Visual Studio 编写了另一个用 C 语言实现所有这些所需功能的 DLL。

现在我需要将这个新 DLL 生成的代码插入到目标 DLL 中（必须在文件级别完成{而不是在运行时}）。

我可能正在目标 DLL 上创建一个新的 PE 部分，并将我制作的 dll 中的所有代码/数据/rdata 放在那里。问题是我需要以某种方式修复 IAT 和相对于目标 DLL 上新插入的代码的重定位。

我的问题是：

最好的方法是什么？

如果 Visual Studio 能提供一个选项来仅使用（大部分）相对寻址进行构建，那就太好了——这在处理重定位时会为我节省很多。我想我可以将我所有的变量和常量封装到一个结构中，希望 MSVC 只需要重新定位这个“容器”结构的地址并使用相对寻址来访问它的成员。但不知道这是不是一个好主意。

我什至可以通过创建一个函数指针来进一步摆脱 IAT，该函数指针将动态加载所需的功能模块（一种延迟加载模块）。再一次，把这个函数指针放在我之前说的“容器”结构中。

我的最后一个选择是手工制作，手动编辑十六进制的二进制文件......我真的不想这样做，因为每个 IAT 条目和 reloc 条目都需要一些好时间来完成. 前段时间我已经编写了一个 PE 文件加密器，所以我知道大部分内部工作原理并且知道它可以完成，只是想知道你的想法，也许已经存在一个工具来帮助我？

任何建议都非常感谢！

再次感谢您花时间阅读本文！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:32:36.310

由于您正在寻求建议，请查看非常好的[PORTABLE EXECUTABLE FILE FORMAT – A REVERSE ENGINEER VIEW PDF Document](http://tuts4you.com/download.php?view.2974)。“将代码添加到 PE 文件”一节描述了一些技术（并提供了工具），通过操作 IAT 表和 Sections 表，将代码添加到现有 PE 映像而无需目标映像（您的场景）的代码。

# mysql - mysql：改变功能但保持旧功能

> ID：11007939
> 
> 赞同：1
> 
> 时间：2012-06-13T03:44:02.313
> 
> 标签：mysql, function, alter

我更改了表中的列名，我需要更改它的函数。所以我改变了功能。但它仍然运行旧功能！它给了我：

```
"Error Code: 1054 Unknown column 'avDoctorID' in 'where clause'" 
```

而且我确定我更改了功能，因为如果我看到功能本身，它就是新功能！怎么会这样？

我在 mysql 工作台中执行此操作，如果我在任何其他程序中看到该函数，它会显示新函数，但当我尝试运行它时会出现相同的错误。

这是运行它的查询

```
select FNC_CreateAppointment(8,1,"2012-08-06","15:30:00","something"); 
```

这就是函数本身：

```
 DELIMITER $$

CREATE DEFINER=`root`@`%` FUNCTION `fnc_CreateAppointment`(clid int,calid int,appdate date,apptime time,commentaar varchar(3000)) RETURNS tinyint(1)
BEGIN
declare succeeded boolean;
declare id2 int;
declare id int;
declare dagweek int;
Declare afwezig int;
set afwezig = 0;
set dagweek = Dayofweek(appdate);
set id =0;
set id2 = 0;
set succeeded = false;
select availableID into id from tbl_available where AVdays = dagweek and AVHours = apptime and avCalendarID = calid

;
if id > 0
then

select appointmentID into id2 from tbl_appointment where  appointmentDate = appdate and appointmentTime = apptime and CalendarID = calid;

if id2 = 0
then

select AbsentID into afwezig from tbl_absent where abHoliday = appdate and abAbsent = apptime and abCalendarID = calid;
if afwezig = 0 then

insert into tbl_appointment(clientId,Calendarid,appointmentDate,appointmenttime,remark)
Values
(clid,calid,appdate,apptime,commentaar);

set succeeded = true;
end if;

end if;

end if;

return succeeded;

END 
```

返回的错误是：

```
call db_demo.FNC_CreateAppointment(8,1,"2012-08-06","15:30:00","something") Error Code: 1054 Unknown column 'avDoctorID' in 'where clause' 
```

'avDoctorID' 是旧列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T04:21:59.393

您可能需要先删除该函数，然后再次运行 CREATE 语句。

```
DROP FUNCTION IF EXISTS `<function_name>` 
```

# ubuntu - 我想通过 apt-get 在 ubuntu 12.04 中安装 php 5.3.9 - 我应该添加什么存储库？

> ID：11007942
> 
> 赞同：3
> 
> 时间：2012-06-13T03:44:16.603
> 
> 标签：ubuntu, php, ubuntu-12.04

我想通过 apt-get 在 ubuntu 12.04 中安装 php 5.3.9。

> apt-cache 显示 php5-fpm

仅列出*5.3.10-1ubuntu3.1*和*5.3.10-1ubuntu3*。我试图避免5.3.10 ( [https://bugs.php.net/bug.php?id=61045&edit=1](https://bugs.php.net/bug.php?id=61045&edit=1) ) 中的一个严重错误。

是否有可以让我在 ubuntu 12.04 LTS 中安装 php 5.3.9 的存储库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T04:53:42.853

PHP 5.4 现在应该已经发布了。尝试更新

```
sudo apt-get update 
```

然后

```
sudo apt-get install php5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T04:11:17.273

这个问题绝对是题外话，但答案很简单，所以无论如何我都会发布它：

`sudo apt-get install php5-cli php5-common`

# javascript - 如何 Onload() 将焦点设置为 jQuery Handsontable

> ID：11007947
> 
> 赞同：0
> 
> 时间：2012-06-13T03:45:22.470
> 
> 标签：javascript, jquery, events, onload, handsontable

将焦点 onload 设置为 jQuery Handsontable 中的第一个字段的正确方法是什么？

这是示例链接[http://jsfiddle.net/4kvMq/4/](http://jsfiddle.net/4kvMq/4/)

```
$(function () {
  $(window).load(function () {
    $('#example10grid table tbody tr td:first-child').focus();
  });
}); 
```

甚至尝试手动设置焦点但没有运气！

```
$('#btnGo').click(function() {
    $(".dataTable table tbody tr td:first-child").focus();
}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:47:49.000

谢谢你的要求。现在有一种公共方法可以做到这一点。

在按钮上使用它：

```
$('#btnGo').click(function(event) {
  setTimeout(function() {
      //timeout is needed because Handsontable normally deselects 
      //current cell when you click outside the table
      $("#example10grid").handsontable("selectCell", 0, 0);
  }, 10);
}); 
```

或 DOM 就绪：

```
$(function() {
  setTimeout(function() { 
      //timeout is needed because Handsontable normally deselects 
      //current cell when you click outside the table
      $("#example10grid").handsontable("selectCell", 0, 0);
  }, 10);
}); 
```

现场示例：http: [//jsfiddle.net/warpech/4kvMq/35/](http://jsfiddle.net/warpech/4kvMq/35/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:30:53.610

你不能这样做。问题在于handsontable 处理焦点事件的方式。它将一个单击处理程序绑定到`hmtl`元素，如果您的光标在桌子上，它会每毫秒检测一次。因此，您不能使用 a`click()`或`focus()`特定元素更改焦点。

此外，由于出于安全原因，您无法使用 JavaScript 更改光标位置（并且 jQuery 无法原生触发单击或焦点事件），因此您无法轻松更改单元格上的焦点。只能修改handsontable 本身以更改选定的表格单元格。

# jquery - jQuery 选择器：我可以将 .class 用于选择列表吗？

> ID：11007953
> 
> 赞同：1
> 
> 时间：2012-06-13T03:45:56.637
> 
> 标签：jquery

我将有一个选择字段列表，收集相同类型的数据。例如，我将有几个选择列表，标记到同一个类。

```
<select name="NBSCourse1" class="NBSCourse"></select>
<select name="NBSCourse2" class="NBSCourse"></select>
<select name="NBSCourse3" class="NBSCourse"></select>
// and so on... 
```

我编写了一种方法来检测选择列表中的变化，所有这些都按类引用它们。

```
$("select.NBSCourse").change(function() {
 //Other codes here

}) 
```

似乎第一个选择列表 (name="NBSCourse1") 有效，但其他选择列表不起作用。如果有多个类似的列表，我不应该为选择列表使用类吗？

* * *

*有关我正在尝试做的事情的详细信息...*

实际上，Select Fields 的第一行已由我编写的 jQuery 函数初始化：addrow(n)。该方法在 $(document).ready 期间调用。

我还有一个“添加更多”按钮，它将调用 addrow(n) 函数。我已经声明了一个名为“counterNBSCourse”的计数器，我将它传递给了函数。addrow(counterNBSCourse)。

```
function addRow(n){         
var tablerow 
tablerow = "<tr>";
tablerow += "<td><select name='NBSCourse" + n + "' class='NBSCourse'></select></td>";
    //Other select fields

   tablerow += "</tr>"

    $("table.courses").append(tablerow);

//Method to populate select list
    $.ajax({url:"dropdown.asp?type=courseidfill", success:function(result) { 
     $("select[name=NBSCourse" + n + "]").html(result);

}})

        counterNBSCourse++

    } 
```

如您所见，当我添加另一行具有“NBSCourse”类的选择字段时，我的名称是根据“counterNBSCourse”的当前值。"NBSCourse1","NBSCourse2".. 等等。

此刻，只响应场。

$("select.NBSCourse").change(function() {

```
$("select.NBSCourse").change(function () {

    //Getting select field's name       
var name
name = $(this).attr('name');

    //Getting the number tagged behind the select name file     
var num     
num = name.replace("NBSCourse","");

//Getting selected value
    var nbsCourseid;
nbsCourseid = $(this).val();

//Function to populate another select field,        
$.ajax({url:"dropdown.asp?value="+ nbsCourseid + "&type=courseid",success:function(result) { 

 $("select[name=IndexNo" + num + "]").html(result);                 
}})     
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T03:48:17.767

可以使用类选择器，你会错过`"`你的代码`$("select.NBSCourse)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:49:09.310

您缺少结束语：

```
$("select.NBSCourse").change(function() {
 //Other codes here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T01:12:40.927

谢谢大家。我设法解决了上述问题（在我兄弟的帮助下，他显然更擅长 jQuery！）

看来我的代码工作正常，但我的函数 addrow(); 不起作用，因为我将脚本放在 $(document).read(function() 下。这就是为什么该函数只能调用一次的原因。

# c++ - DirectX：动态顶点声明

> ID：11007954
> 
> 赞同：0
> 
> 时间：2012-06-13T03:46:02.860
> 
> 标签：c++, directx

我正在编写一个需要适应各种潜在顶点格式的应用程序。我正在加载的网格可能有也可能没有任何数量的潜在顶点属性（颜色、法线、纹理坐标、权重等）。

一个简单的声明示例如下所示：

```
D3DVERTEXELEMENT9 simple_decl[] =
{
    {0,  0, D3DDECLTYPE_FLOAT3, D3DDECLMETHOD_DEFAULT, D3DDECLUSAGE_POSITION, 0},
    {0, 12, D3DDECLTYPE_FLOAT2, D3DDECLMETHOD_DEFAULT, D3DDECLUSAGE_TEXCOORD,   0},
    {0, 20, D3DDECLTYPE_D3DCOLOR, D3DDECLMETHOD_DEFAULT, D3DDECLUSAGE_COLOR,   0},
    {0, 24, D3DDECLTYPE_FLOAT3, D3DDECLMETHOD_DEFAULT, D3DDECLUSAGE_TEXCOORD,   1},
    D3DDECL_END()
};

struct MYVERTS
{   
    float x,y,z,u,v;
    DWORD colr;
    float nx,ny,nz;
}; 
```

基本上 D3DVERTEXELEMENT9 是一个偏移数组。每个偏移量是“MYVERTS”的数据成员的大小。

如果用户导出一个只有 XYZ 坐标和颜色的模型，那么我想动态生成一个具有 3 个浮点数和 1 个双字的结构，然后生成一个带有偏移量和 D3DDECLUSAGE 的声明。

我不知道该怎么做。有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:37:45.117

您将无法“动态生成结构”，但您可以从填写自己的`D3DVERTEXELEMENT9`数组开始。一个简单的方法是将用户模型解析为它正在使用的组件和类型，并将其解析`push_back()`为`std::vector<D3DVERTEXELEMENT9>`.

解析模型中的所有组件后，您可以计算每个组件的偏移量（示例中的第二列数字）。您需要计算从最终组件到下一个组件的另一个“偏移量”，这将成为您的顶点步幅。在您的示例中，它是 24，加上`D3DDECLTYPE_FLOAT3`或 12 的大小，顶点步长为 36。

一旦有了偏移量和步幅，就可以将用户模型中的顶点数据写入顶点缓冲区中的正确字节。

您甚至可以`vector`在推入`D3DDECL_END()`.

# model-view-controller - Play 2.0 框架 - POST 参数

> ID：11007957
> 
> 赞同：5
> 
> 时间：2012-06-13T03:46:12.477
> 
> 标签：model-view-controller, playframework, url-routing

我正在尝试将参数发布到 Action，并在路线中写道：

```
# Home page
GET    /                         controllers.Application.index()

POST   /login/name:/password:    controllers.Application.login(name, password) 
```

我有一个行动

```
public static Result login(String name, String password) {
    return ok(name + " "  + password);
} 
```

我的表格是

```
<form action="/login" method="post">

    <input name="name" type="text" id="name">
    <input name="password" type="password" id="password">
    <input type="submit" value="Login">

</form> 
```

它不起作用

请求`'POST /login' [Missing parameter: name]`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T04:37:19.723

您的路线不应包含动态部分（名称、密码），因为数据在正文中而不是 url

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T20:07:00.740

只需将路线更改为以下内容：

```
POST   /login    controllers.Application.login(name, password) 
```

通过在路由路径中不包括动态名称（：名称和：密码），假设变量来自请求（IE：您的 html 输入）

您收到的错误表明名称和密码未出现在 url 路径中......这是正确的，因为您在路由中指定的路径表明该路径应如下所示：

/登录/我的名字/我的密码

请检查[http://www.playframework.org/documentation/2.0.1/JavaRouting](http://www.playframework.org/documentation/2.0.1/JavaRouting)并查看名为“调用操作生成器方法”的部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-05T07:15:01.743

虽然是旧帖子，但如果有人提出新问题。我们不应该添加参数，当您使用 post 时，如果您确实使用了参数，它将是 GET /login/:name/:password controllers.Application.login(name: String, password: String)

对于 post，不要添加参数并将其绑定到控制器内的案例类并访问变量。

# user-interface - Google Apps 脚本 UI：滚动到屏幕顶部

> ID：11007971
> 
> 赞同：0
> 
> 时间：2012-06-13T03:49:25.907
> 
> 标签：user-interface, google-apps-script

设置：

将 Google Apps 脚本的 UI (doGet) 与 tabPanel 选项一起使用。每个面板的底部都有一个“上一个”和“下一个”按钮，用于浏览选项卡。

问题：

激活导航按钮时，查看区域保持在屏幕底部。

问题：

什么代码可以用来跳转到屏幕顶部？（即window.scrollTo(0,0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:56:08.880

不幸的是，没有办法像这样与浏览器进行交互。但是，如果您将所有 GUI 封装在自己的滚动面板中，而不是使用浏览器的滚动面板，您就可以控制窗口滚动。

然后，您可以使用`myScroll.setScrollPosition(y).setHorizontalScrollPosition(x)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T18:51:06.417

将 HtmlService 与 IFRAME 模式一起使用...

`$("html, body").animate({ scrollTop: 0 }, "slow");`

# c# - 我的视图如何知道使用 MVC 返回的数据类型？

> ID：11007977
> 
> 赞同：0
> 
> 时间：2012-06-13T03:50:20.240
> 
> 标签：c#, asp.net-mvc, razor

所以我创建了一个项目来测试 MVC 4 中的 DI。是的，这很容易。我有一个看起来像这样的控制器。

```
public class CompanyManagementController : Controller
{
     private ICompanyService companyService;

     public CompanyManagementController(ICompanyService companyService)
     {
         this.companyService = companyService;
     }

     public ActionResult Index()
     {
         return View(companyService.GetCurrentCompanies());
     }
} 
```

我想不通的是如何告诉视图 Index.cshtml 我有这个列表，我正在返回它。当我只有一个 POCO 时，这很容易。我做了这个

```
[HttpGet]
public ActionResult Create()
{
    var company = new Company();
    return View(company);
}

[HttpPost]
public ActionResult Create(Company company)
{
    using(var context = new InventoryContext())
    {
        context.Companies.Add(company);
        context.SaveChanges();
    }
    return View("Create");
} 
```

这非常容易，因为我刚刚说过

```
@model MvcInventoryManager.Models.Company 
```

在 Create.cshtml 文件中。

有什么提示吗？我想要做的是能够遍历返回的公司列表。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T03:53:58.617

的返回类型是`companyService.GetCurrentCompanies()`什么？那将是您要用于绑定`Model`视图中的类型。例如，如果类型`IEnumerable<Company>`在您的视图中，您将声明：

```
@model IEnumerable<MvcInventoryManager.Models.Company> 
```

这样，`Model`属性的类型将与传递给视图的内容相匹配，您可以循环遍历`Model`：

```
foreach (var company in Model) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:29:41.637

在视图中声明您的模型后，只需像这样循环遍历它：

```
@foreach (var company in Model)
{ 
Html.DisplayFor(modelItem => company.companyID) 
Html.DisplayFor(modelItem => company.CompanyName) 
} 
```

# unix - 简单练习 unix fork 理解

> ID：11007979
> 
> 赞同：1
> 
> 时间：2012-06-13T03:50:24.453
> 
> 标签：unix, fork

考虑以下指令：

```
for(int i = 0; i < 3; i++)
    fork(); 
```

我试图弄清楚创建过程的数量和图形创建的步骤。

所以上面的代码等价于：

```
fork();
fork();
fork(); 
```

这张图说明了这个问题的官方答案：

![图形](../Images/23da09b1b2ee24dcb13c8bd1b2ea3d55.png)

我无法想象这个图表是如何创建的。

这就是我绘制图表的方式。

1.  因此，第一个 fork 将创建父进程 (p1) 的子副本 (p2)。我们有2个过程。

2.  第二个分叉将通过创建子进程（p3 和 p4）来复制 p1 和 p2 父级。

3.  第三次分叉，将复制 p1、p2、p3 和 p4，通过创建子进程（p5、p6、p7、p8）

如何获得与老师相同的图表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T04:03:15.963

如果您想要一个类似于官方答案的图表，请尝试停止思考事情是如何并发运行的，而是专注于进程的世代（父母、孩子、孙辈等）。

一开始，只有一个进程`p0`，要进行三个分叉。当做这三个叉子时，它创建`p1`了两个叉子走，`p2`一个叉子走`p3`，没有叉子。然后`p0`退出（仅`p1`,`p2`并`p3`保持）。

我们可以扔掉，`p3`因为它没有叉子，只剩下`p1`和`p2`)。

然后进程`p1`执行它的第二个分叉生产`p4`，只剩下一个分叉，然后执行第三个分叉制造`p5`，没有剩下一个分叉。`p1`现在完成并退出（`p2`，`p4`并`p5`保持）。

类似于`p3`,`p5`可以被扔掉，因为它没有叉子了。这留下`p2`和`p4`。

同样，`p2`只剩下一个叉子，所以它创建`p6`时没有叉子。然后由于没有叉子`p2`而`p6`退出，离开`p4`。

进程`p4`只剩下一个叉子，因此它创建`p7`时没有叉子，然后它们都退出了。

通过基于父系而不是进程开始时间绘制具有深度的图表（尽管开始时间^((a))控制进程在特定深度水平存在的位置，例如，请参见`p1`和），您的图表应该与给定的图表匹配`p2`。`p3`

所以这样想：

```
 Sequence within generation -------->
G
e           ______p00______
n          /       |       \
e       p01       p02       p03
r      /   \       |
a   p04     p05   p06
t    |
i   p07
o
n
|
V 
```

* * *

^((a))请记住，这里定义的开始时间是进程开始存在的时间——进程执行*实际有用工作*的顺序也取决于调度的变幻莫测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T04:14:57.697

如果我们从 P0 开始，它将生成进程 P1、P2 和 P3，但每个进程将有不同的 i，因为在 fork 时我们已经复制了堆栈上的所有值。

生成 P1 i = 0
生成 P2 i = 1
生成 P3 i = 2
i = 3 不再 < 3

P1
生成 P4 i = 1，生成 P4 时 i 设置为 1，因为它是 fork i 递增，之前为 0 .
生成 P5 i = 2，
i 不再 < 3

P2
生成 P6 i = 2，再次生成 P6 时 i 为 2，因为在调用 fork 时它为 1。
i 不再 < 3

P3
i 不再 < 3

P4
生成 P7 i = 2
i 不再 < 3

好吧，你明白了....

# ios - 用于本地存储和显示来自服务器的临时数据的核心数据 - 什么是最佳设计

> ID：11007985
> 
> 赞同：0
> 
> 时间：2012-06-13T03:51:16.680
> 
> 标签：ios, core-data, storage

我还是 Core Data 的新手，所以请原谅这个问题。

我正在构建一个应用程序（为了简单起见），它允许人们“挑战”自己和他人。我需要在本地存储用户已经接受的挑战，以便他可以离线浏览他们的详细信息。但是，当应用程序在线时，我会向服务器发出请求以显示可用挑战、已接受挑战的新细节等。因此需要进行一些同步，但我试图将其保持在最低限度.

现在我的问题是如何构建数据。我是不是该：

(1) 仅对存储在设备上的数据有一个核心数据模型；然后只为从服务器解析的挑战构建模型类，并在我的表视图中显示一系列挑战对象？

(2) 两者都有一个单一的核心数据模型，但以某种方式区分本地的挑战和暂时的挑战？

(3) 有两个持久存储，一个用于每个目的？

选项 2 和 3 显然具有使用 NSFetchedResultsController 的优势，但编码和维护可能更复杂。

而且，关于同步问题，我应该：

(4) 保留我上次更新本地挑战的时间戳，并将其与服务器上的时间戳匹配，看看我是否需要将新的细节推送到服务器？

(5) 保存一组键路径和更改，然后在互联网连接再次可用时将其推送到服务器。

解决这两个问题的最佳方法是什么。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:32:22.213

由于这是一个设计问题，而设计在某种意义上是一门艺术，总是有不止一种方法，这就是我可能会做的事情。

我会创建一个模型来存储本地和可用的挑战，通过某些属性来区分它们。当没有网络连接时，我可能会选择过滤掉所有远程挑战而不显示缓存（或您所说的瞬态）挑战。当连接恢复或发生同步时，我会检查是否需要在服务器上或本地更新任何挑战。

时间戳是检查实体修改时间的好方法。如果您需要逐个属性比较以解决冲突，您可以使用校验和（例如 crc32 或 md5 哈希）来加速二进制数据的比较（如果有的话）。

即使有时间戳，也有可能触摸了对象，但保存的值实际上保持不变，因此可以使用校验和来检测对象是否发生了实际更改。您可以使用 NSKeyedArchiver 将对象序列化为 NSData 并在其上计算校验和。我发现这种方法可靠。

# c# - Python，Web 应用程序不会保存到文件。服务器端

> ID：11007986
> 
> 赞同：0
> 
> 时间：2012-06-13T03:51:21.110
> 
> 标签：c#, python, web, wamp

如果您想要快速版本，请向下滚动到“编辑|1|” 部分。

我已经对此进行了一些搜索，但似乎无法弄清楚。我在同一台机器上有一个 Web 服务器和一个 Minecraft 服务器（它从不占用大量负载，所以没问题），我需要用户能够输入一些输入（以 html 形式），将该输入保存在文件中服务器，由一个中间人应用程序（我已经完成并且在 c# 中）处理，中间人应用程序与我的世界服务器交互。

现在我要么以前做过，要么知道该怎么做。唯一的问题是将表单的内容保存到一个临时文本文件中，以便中间人应用程序可以发挥它的魔力。我考虑过使用 SQL（因为它在服务器上导致我的世界将它用于统计数据），但在我看来，对于只会存在几秒钟的东西来说，它有点矫枉过正。（更不用说必须将 SQL 添加到中间人应用程序中）。

我真的不在乎文件在服务器上的哪个位置，因为我可能会将位置硬编码到中间人应用程序中，并且在中间人应用程序读取它后它将被删除。我可以保存在 IDLE 中工作，但不能在服务器上的这个应用程序中工作。

（我知道这段代码不会从表单中获取任何内容，这只是作为保存文件的测试而编写的）

```
import os

name = "none";

def editFile():
    workfile = open("edit.x",'w')
    workfile.write(name)
    workfile.close()

def application(environ, start_response):
    status = "200 OK"
    output = "Testificate (Feature will be up shortly)"

    response_headers = [('Content-type', 'text/plain'),('Content-Length',str(len(output)))]

    start_response(status, response_headers)
    return [output] 
```

额外的服务器信息...

硬件：足够强大

WebServer：安装在 Apache 上的带有 Python 模块的 Wamp

此外，这里是使用该代码运行的链接[单击此处。](http://sneakypanda.co.nr/test/test.py)

编辑|1|：我想我对这个问题没有深入了解（我写这篇文章时已经是昨晚很晚了）。基本上任何类型的文件都可以。我想要最简单的实现。上面的代码在服务器上没有结果。它从不创建文件，也不能从文件中读取（如果我手动创建它）。我已经为此工作了大约一天半。我真的只是希望它是我的错误。wamp 中的服务器配置是否允许通过 Python 创建文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:21:13.753

所以我意识到我今天午餐时做了什么。（在这个过程中捂着脸）。它不起作用的原因是我使用了反斜杠，而不是正斜杠。所以这是上面的工作版本（我用三引号来确定）。我也将其更改为绝对路径。

```
def editFile():
    workfile = open("""C:/wamp/www/test/edit.txt""",'w')
    workfile.write(name)
    workfile.close() 
```

之后它完美地工作了。因此，如果其他人犯了这个小错误，这里是一个提醒。大声笑感谢“mhawke”对临时文件的答复无论哪种情况，它都有很好的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:13:48.410

[`tempfile`](http://docs.python.org/library/tempfile.html#module-tempfile)例如，`tempfile.mkstemp()`使用已知目录检查模块。让您的“中间人应用程序”轮询（或可能使用[`inotify`](http://en.wikipedia.org/wiki/Inotify)）新文件的目录，处理文件，然后在完成后将其删除。

# sql - SqlQuery（语句，参数）

> ID：11007987
> 
> 赞同：0
> 
> 时间：2012-06-13T03:51:32.630
> 
> 标签：sql, entity-framework

我想知道该怎么做：

```
params= new object[]{ new SqlParameter("ID",val),new SqlParameter("Label","'%Name%'")};
statement = "Select ID, Label from Country Where ID = ? or or Label Like ?"; 
```

我试过了，它给了我：

> '?' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T03:58:28.580

你有一个错字：

```
"Select ID, Label from Country Where ID = ? or or Label Like ?"; 
```

应该

```
"Select ID, Label from Country Where ID = ? or Label Like ?"; 
```

# java - 如何在android中创建一个音量圈

> ID：11007988
> 
> 赞同：0
> 
> 时间：2012-06-13T03:51:33.210
> 
> 标签：java, android, android-emulator

我的问题是：我们如何创建一个按钮，您可以使用它来提高和降低我的播放器的音量......这是一个圆圈......知道怎么做吗？

![圈量](../Images/41e56a0fdb905f8ad091070bd31dabd3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T04:04:41.017

您可以创建一个实现 onTouchEvent 的组件。在 onTouchEvent 中，您检测触摸的位置和方向，并相应地更改图形的旋转位置以及音量。onTouchEvent 记录在“查看”下的 Android API 文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T04:04:45.423

我建议使用 OpenGL 来获取 2D/3D 图形。然后您可以对按钮的范围进行某种插值（比如使用 OpenGL 的音量控制小部件），增加或减少可以改变音量设置相应的媒体播放器。

要更改应用中的音量，您可以查看[http://developer.android.com/reference/android/media/AudioManager.html](http://developer.android.com/reference/android/media/AudioManager.html)和[http://developer.android.com/guide/topics/graphics/opengl.html](http://developer.android.com/guide/topics/graphics/opengl.html)用于 OpenGL

# java - java 扫描仪 - 如何分割一个mac地址？

> ID：11007990
> 
> 赞同：1
> 
> 时间：2012-06-13T03:52:07.483
> 
> 标签：java

mac 地址字符串可能采用以下格式：

00:aa:bb:cc:dd:ee

或者

00aabbccddee

我需要一个好方法来检索这 6 个部分。

这是我的代码：

```
public class Mac
{
    public static void main(String[] args)
    {
        String mac = "00:aa:bb:cc:dd:ee"; /* 00aabbccddee */
        Scanner s = new Scanner(mac);
        s.useDelimiter(":?"); /* zero or one occurrence */                                                                                                                             
        String t = null;
        while ((t = s.next("[0-9a-f][0-9a-f]")) != null)
            System.out.println(t);
    }
} 
```

它抛出一个异常：

```
Exception in thread "main" java.util.InputMismatchException
        at java.util.Scanner.throwFor(Scanner.java:840)
        at java.util.Scanner.next(Scanner.java:1461)
        at java.util.Scanner.next(Scanner.java:1394)
        at Mac.main(Mac.java:11) 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T04:04:55.353

```
public static String[] getMacAddressParts(String macAddress) {
    String[] parts = macAddress.split(":");
    if (parts.length == 0) {
        parts = new String[6];
        for (int i = 0; i < 6; i++) {
            parts[i] = macAddress.substring(i * 2, i * 2 + 1);
        }
    }
    return parts;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:53:19.073

```
String[] splitMac(String mac) {
    String[] parts = null;
    if (mac.length() == 6*3) {
      parts = mac.split(":");
    } else if (mac.length() == 6*2) {
      parts = new String[6];
      parts[0] = mac.substring(0,1);
      parts[1] = mac.substring(2,3);
      parts[2] = mac.substring(4,5);
      parts[3] = mac.substring(6,7);
      parts[4] = mac.substring(8,9);
      parts[5] = mac.substring(10,11);
    } else {
      throw new RuntimeException("Invalid arg for mac addr: " + mac);
    }
    return parts;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T04:22:01.243

为零次或多次出现设置分隔符会将字符串拆分为 next() 结果中的每个字符，如下所示：

a a b b c c d d e e

因为您是说如果找到或找不到，请拆分它。

因此，寻找与您的正则表达式匹配的下一个标记 "[0-9a-f][0-9a-f]" 会引发该异常，因为它每次都尝试将一个字符与 2 个字符的正则表达式匹配，然后将其抛出您尝试获取的令牌与您提供的正则表达式不匹配，因此在防止这种情况之前执行 hasNext("Pattern") 。

此外，当字符串通过 next() 方法停止读取字符时，您的代码将抛出 NoSuchElementException，验证它是否在 while 条件中具有带有 hasNext("Pattern") 的下一个标记。

所以只需删除 ? 在分隔符上，它将起作用。

例子：

```
 String mac = "00:aa:bb:cc:dd:ee"; /* 00aabbccddee */
    Scanner s = new Scanner(mac);
    s.useDelimiter(":"); /* zero or one occurrence */                                                                                                                             
    String t = null;
    while (s.hasNext("[0-9a-f][0-9a-f]"))
    {
        t = s.next("[0-9a-f][0-9a-f]");
        System.out.println(t);
    } 
```

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T03:58:02.013

```
 String mac = "00:aa:bb:cc:dd:ee";

  String[] partsArray = mac.split(":");

  for(int i = 0; partsArray.length < i ;i++){
     String part = partsArray[i];
     System.out.println ("Splitted mac address part "+i+" is - "+part);
  } 
```

# tableview - 在 JavaFX2 中将 2 个 tableview 和一个 lineChart 绑定在一起

> ID：11007991
> 
> 赞同：0
> 
> 时间：2012-06-13T03:52:11.500
> 
> 标签：tableview, javafx-2

我的要求是使用 2 个表格和 1 个图表来可视化我的数据集。每个数据元素都包含其（唯一）名称和一组属于它的数据。第一个表将显示我拥有的每个数据集的名称，第二个表将显示属于在第一个表中选择的数据集（行）的数据。第二个表和图表将显示相同的数据，并且都属于在第一个表中选择的数据集（行）。通过使用下面的代码，我现在已经实现了一半的这种行为（链接两个表）。

我现在遇到的问题是：我想不出办法让图表显示与第二张表相同的数据。我的想法是在ChangeListener中设置图表数据，但问题是表格的数据模型很可能不适合图表。我`readingData`在 TableDataModel 类中有字段为 ObservableList，这是图表接受的类型，但它是 ReadingData 的 ObservableList 而不是 XYChart.Data。有什么方法可以在 ReadData 类中使用 XYChart.Data 吗？

我的主要课程：

```
ObservableList<TableDataModel> tableData = FXCollections.observableArrayList();
// Other code omitted

/* Create the first table */
TableView<TableDataModel> myTable = new TableView<TableDataModel>();
TableColumn nameColumn = new TableColumn("Name");
nameColumn.setCellValueFactory(new PropertyValueFactory<TableDataModel, String>("name"));
// Other column omitted
myTable.setItems(tableData); 
myTable.getColumns().addAll(nameColumn, ...);

// When user select on any row update the second table items
myTable.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<TableDataModel>()
    {
        @Override
        public void changed(ObservableValue<? extends TableDataModel> arg0, TableDataModel arg1, TableDataModel arg2) 
        {
            dataTable.setItems(arg2.readingData);
        }       
    });

/* The second table */
TableView<ReadData> dataTable = new TableView<ReadData>();
TableColumn valueColumn = new TableColumn("Value");
valueColumn.setCellValueFactory(new PropertyValueFactory<ReadData, Integer>("value"));
// Other column omitted
dataTable.setItems(null);
dataTable.getColumns().addAll(valueColumn, ...); 
```

表数据模型.java：

```
private final SimpleStringProperty name;
// Other SimpleStringProperty and its get and set method omitted

public final ObservableList<ReadData> readingData = FXCollections.observableArrayList(); 
```

读取数据.java：

```
// I use XYChart.Data here because I think that this might be useful when I want to show this on the chart
private SimpleObjectProperty<XYChart.Data<Integer, Integer>> value;
// Other property

// Provide this to make below line work
// valueColumn.setCellValueFactory(new PropertyValueFactory<ReadData, Integer>("value"));
public int getValue()
{
    return value.get().getYValue();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:40:24.600

AFAIK 您需要将您`XYChart.Data`的 s 放入第`XYChart.Series`一个，然后将该系列放入图表中`chart.getData().add(series)`。我认为您可以在 myTable 选择的更改侦听器中执行此操作：在那里创建一个新系列（或修改现有的、以前创建的并添加一个），`value.get()`从`ReadData`. 请参阅[LineChart 的示例](http://docs.oracle.com/javafx/2/charts/line-chart.htm#CIHGBCFI)。

# c++ - 为什么多次转换RGB888转RGB565会导致掉色？

> ID：11007997
> 
> 赞同：0
> 
> 时间：2012-06-13T03:53:52.373
> 
> 标签：c++, qt

如果我使用 Qt 执行以下操作：

1.  在 QImage::Format_RGB32 中加载位图。
2.  将其像素转换为 RGB565（没有 Qt 格式，所以我必须“手动”完成）。
3.  创建一个与步骤 1 中加载的大小相同的新位图。
4.  将 RGB565 缓冲区像素转换回 RGB88 到步骤 3 中创建的图像。
5.  从第 4 步创建的图像看起来像第 1 步中的图像，但是如果您比较 RGB 值，它们并不完全相同。

重复步骤 2 到 5 会导致最终图像失去颜色 - 它似乎变得越来越暗。

这是我的转换函数：

```
qRgb RGB565ToRGB888( unsigned short int aTextel )
{
    unsigned char r = (((aTextel)&0x01F) <<3);
    unsigned char g = (((aTextel)&0x03E0) >>2);
    unsigned char b = (((aTextel)&0x7C00 )>>7);
    return qRgb( r, g, b, 255 );
}

unsigned short int RGB888ToRGB565( QRgb aPixel )
{
    int red = ( aPixel >> 16) & 0xFF;
    int green = ( aPixel >> 8 ) & 0xFF;
    int blue =  aPixel & 0xFF;

    unsigned short  B = (blue >> 3) & 0x001F;
    unsigned short  G = ((green >> 2) < 5) & 0x07E0;
    unsigned short  R = ((red >> 3) < 11) & 0xF800;

    return (unsigned short int) (R | G | B);
} 
```

我从我的测试图像中发现的一个不能正确转换的例子是 4278192128，它从 RGB565 转换回 RGB888 为 4278190080。

编辑：我还应该提到原始源数据是 RGB565（我的测试 RGB888 图像是从中创建的）。我只是为了显示目的而转换为 RGB888，但之后想转换回 RGB565，而不是保留数据的两个副本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T05:09:35.783

事先我想提一下，你的两个转换函数中的组件顺序是不一样的。在 565 -> 888 转换中，您假设红色分量使用低位 ( `0x001F`)，但在对红色分量的 5 位进行编码时，您将它们放在高位 ( `0xF800`)。假设您想要一个类似于`0xAARRGGBB`（RGB565 中的二进制表示为 then `0bRRRRRGGGGGGBBBBB`）的组件顺序，您需要更改`RGB565ToRGB888`方法中的变量名称。我在下面的代码中修复了这个问题。

您的 RGB565 到 RGB888 转换有问题。对于绿色通道，您提取 5 位，结果中只有 7 位而不是 8 位。对于蓝色通道，您采用以下位，这是一个后果性错误。这应该解决它：

```
QRgb RGB565ToRGB888( unsigned short int aTextel )
{
    // changed order of variable names
    unsigned char b = (((aTextel)&0x001F) << 3);
    unsigned char g = (((aTextel)&0x07E0) >> 3); // Fixed: shift >> 5 and << 2
    unsigned char r = (((aTextel)&0xF800) >> 8); // shift >> 11 and << 3
    return qRgb( r, g, b, 255 );
} 
```

在另一个函数中，您不小心编写了小于运算符而不是左移运算符。这应该解决它：

```
unsigned short int RGB888ToRGB565( QRgb aPixel )
{
    int red   = ( aPixel >> 16) & 0xFF;  // why not qRed(aPixel) etc. ?
    int green = ( aPixel >> 8 ) & 0xFF;
    int blue  =   aPixel        & 0xFF;

    unsigned short  B =  (blue  >> 3)        & 0x001F;
    unsigned short  G = ((green >> 2) <<  5) & 0x07E0; // not <
    unsigned short  R = ((red   >> 3) << 11) & 0xF800; // not <

    return (unsigned short int) (R | G | B);
} 
```

请注意，您可以使用已经存在的（内联）函数`qRed`,进行组件提取`qGreen`，`qBlue`类似于`qRgb`从组件构建颜色。

另请注意，最后的位掩码`RGB888ToRGB565`是可选的，因为组件值在 8 位范围内，并且您通过首先右移然后左移值来裁剪它们。

# java - 为什么 List.toArray() 返回一个 Object 数组？

> ID：11007998
> 
> 赞同：5
> 
> 时间：2012-06-13T03:53:54.173
> 
> 标签：java, collections

> **可能重复：**
> [为什么 List<String>.toArray() 返回 Object[] 而不是 String[]？如何解决这个问题？](https://stackoverflow.com/questions/7909747/why-does-liststring-toarray-return-object-and-not-string-how-to-work-ar)

请参阅此代码示例：

```
 List<String> list = new ArrayList<String>();
    list.add("hello");
    list.add("world");
    Object [] array = list.toArray(); 
```

为什么该方法`toArray()`返回一个数组`Object`？其他`List`方法如`get()`,`remove()`能够返回列表中对象的类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T04:47:45.457

```
Because array has been in Java since the beginning, while generics
were only introduced in Java 5\. And the List.toArray() method was 
introduced in Java 1.2, before generics existed, so it was
specified to return Object[]. 
```

你可以用`toArray(T[] a)`看看[Collection.toArray(T[] a)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html#toArray%28T%5B%5D%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T03:59:24.180

您可以使用`toArray(String[] a)`它将返回字符串类型的数组或基本上指定类型的数组。toArray 方法返回对象，因为它充当基于集合和基于列表的 API 之间的桥梁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T03:57:23.137

我相信返回 Object 是为了通用它很可能必须处理内存分配问题。系统不必知道您的确切类型即可分配对象数组。您不会使用 get 和 remove 遇到此问题，因为它只返回一项。

但我会支持你的问题，希望有人能确认我的回答或纠正我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T03:57:31.187

Java [List#toArray](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html#toArray%28%29)解释了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T04:05:46.353

`toArray()`必须构造新的数组对象并填充它。但是由于*运行时泛型类型擦除* `toArray()`不知道元素的实际类型是什么。因为这会创建 Object ( `Object[]`) 的数组。`<T> T[] toArray(T[] a)`如果您想要类型化数组，请使用。