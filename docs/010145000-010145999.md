# StackOverflow 问答 10145000-10145999

# java - libgdx 着色器 - 基本着色器，但屏幕为空白

> ID：10145000
> 
> 赞同：9
> 
> 时间：2012-04-13T16:50:30.233
> 
> 标签：java, opengl-es, libgdx, shader

我试图了解使用 libgdx 的着色器，来自 XNA/HLSL 背景。我正在尝试获得一个 vert/frag 着色器对来重现我在没有着色器的情况下获得的输出，但它没有显示任何内容。

**着色器创建：**

```
void SetupShader()
{
    ShaderProgram.pedantic = false;
    shader = new ShaderProgram(
            Gdx.files.internal("assets/default.vert").readString(),
            Gdx.files.internal("assets/default.frag").readString());
    if(!shader.isCompiled()) {
        Gdx.app.log("Problem loading shader:", shader.getLog());
    }
    batch.setShader(shader);
} 
```

**默认.vert：**

```
attribute vec4 a_Position;
attribute vec4 a_Normal;
attribute vec2 a_TexCoord;
attribute vec4 a_Color;

uniform mat4 u_projTrans;

varying vec2 v_texCoords;
varying vec4 v_color;

void main() {
    v_color = a_Color;
    v_texCoords = a_TexCoord;
    gl_Position = u_projTrans * a_Position;
} 
```

**默认片段：**

```
#ifdef GL_ES
precision mediump float;
#endif

varying vec2 v_texCoords;
varying vec4 v_color;

void main() {
    gl_FragColor = v_color;
} 
```

**渲染：**

```
batch.begin();
for (GameObject gObj : gameObjects)
    gObj.Draw(batch);
batch.end(); 
```

这里有什么建议吗？我也是 OpenGL-ES 的新手，所以我可能会遗漏一些明显的东西。在发布之前我环顾了一下，文档`SpriteBatch.setShader(ShaderProgram)`如下：

> 设置要在 GLES 2.0 环境中使用的着色器。顶点位置属性称为“a_position”，纹理坐标属性称为“a_texCoords0”，颜色属性称为“a_color”。请参阅 ShaderProgram.POSITION_ATTRIBUTE、ShaderProgram.COLOR_ATTRIBUTE 和 ShaderProgram.TEXCOORD_ATTRIBUTE，其中附加了“0”以指示使用第一个纹理单元。投影矩阵通过名为“u_proj”的 mat4 统一上传，变换矩阵通过名为“u_trans”的统一上传，组合变换和投影矩阵通过名为“u_projTrans”的 mat4 统一上传。纹理采样器通过名为“u_texture”的制服传递。使用 null 参数调用此方法以使用默认着色器。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T03:41:29.917

在查看代码后`SpriteBatch`，我的代码似乎有一些错误。以下是正确的着色器：

**默认.vert：**

```
attribute vec4 a_position;
attribute vec4 a_color;
attribute vec2 a_texCoord0;

uniform mat4 u_projTrans;

varying vec4 v_color;
varying vec2 v_texCoords;

void main() {
    v_color = a_color;
    v_texCoords = a_texCoord0;
    gl_Position = u_projTrans * a_position;
} 
```

**默认片段：**

```
#ifdef GL_ES
    precision mediump float;
#endif

varying vec4 v_color;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main() {
    gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
} 
```

# asp.net - 管理员/客户角色 (ASP.NET)

> ID：10145008
> 
> 赞同：0
> 
> 时间：2012-04-13T16:50:56.563
> 
> 标签：asp.net, admin

我目前正在开发一个餐厅网站。我已经创建了我需要的一切，但我在一方面感到困惑：

我创建了两个角色：管理员和客户。我有一个显示菜单的页面。

我的主要问题是，我如何将这个页面作为一个简单的菜单页面显示给客户，我如何将这个页面显示给管理员，让他能够编辑数据库中的项目？

我是否需要创建两个不同的页面，一个用于标准客户，一个用于管理员，或者可以通过站点地图完成，其中链接（编辑菜单页面）根据登录的用户可见/不可见? （我将如何做到这一点？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:02:40.963

您可以为此编写自定义代码，因为您自己创建了两个角色。您可以使用以下步骤

1）在登录时为您的角色创建表单身份验证票并添加它，以便您能够对用户/角色进行身份验证并在 web.config 中编写身份验证规则。

2）要么为管理员和客户创建两个不同的页面，要么您可以使用根据角色呈现不同的单个页面，如果您创建单个页面，请确保您应该在服务器端隐藏安全的管理菜单项，这样它就不会呈现，因此出于安全原因不能在客户端进行任何更改，或者只是始终动态地添加基于角色的项目。

如果您需要更多详细信息，请告诉我。

# c# - 抽象类中的泛型方法

> ID：10145013
> 
> 赞同：7
> 
> 时间：2012-04-13T16:51:30.707
> 
> 标签：c#, generics, abstract-class

我有以下抽象基类，其中我有一个抽象方法。我需要知道如何在子类中实现这个抽象方法。问题是如何在 B 类中声明一个基类为 SomeBaseClass 的类。

```
public abstract class A
{
    protected abstract void Add<T>(T number) where T : SomeBaseClass;
}

public class B : A
{
    protected override void Add<T>(T number)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T16:55:29.210

我认为您希望基类具有类型参数，而不是特定方法：

```
public abstract class A<T> where T : SomeBaseClass
{
    protected abstract void Add(T number);
}

public class B : A<C> {

    protected void Add(C number) { ... }
} 
```

# javascript - 我怎样才能让切换折叠？

> ID：10145019
> 
> 赞同：0
> 
> 时间：2012-04-13T16:52:05.733
> 
> 标签：javascript, jquery

我有一个可以展开和折叠的工作切换功能，但是展开时我的列表很长，我想在底部放置一个“关闭”链接以启用折叠，这样我的用户就不必滚动到顶部来点击和折叠。有什么想法可以修改此代码以扩展其功能以达到我的目的吗？

```
<script language="javascript">
$(function(){
$(".formname").toggle(function(){
var id=$(this).attr('id');
$("#form"+id).fadeIn('slow');
},function(){
var id=$(this).attr('id');
$("#form"+id).fadeOut('slow');
}); 
});
</script> 
```

我的 html 看起来像：

```
<ul>
<li><a href="#" id="formxyz" class="formname">My Expanding/Collapsing Data</a></li>
<div style="display:none;">
<ul>
<li>Content</li>
</ul>
</div>
</ul> 
```

如果我在关闭 ul 之前在底部插入相同的链接 li ，则用户必须单击它两次才能折叠。我更喜欢单击解决方案。

```
<ul>
<li><a href="#" id="formxyz" class="formname">My Expanding/Collapsing Data</a></li>
<div style="display:none;">
<ul>
<li>Content</li>
<li><a href="#" id="formxyz" class="formname">Close</a></li>
</ul>
</div>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:59:22.330

```
<li><a href="#" id="xyz" class="formname">My Expanding/Collapsing Data</a></li>
<div style="display:none;">
<ul>
<li>Content</li>
<li><a href="#" id="xyz2" class="formname">Close</a></li>
</ul>
</div> 
```

id 应该用于单个元素。永远不要对更多元素使用相同的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:07:43.637

如果你`toggle()`在 formxyz 上使用 event，新的 close 动作会打破原来的规则，因此有时你必须点击 formxyz 两次才能显示内容。

因此，在 formxyz 上使用`click()`带有操作的事件。`fadeToggle()`它会在隐藏时显示内容。

然后在所有“关闭”上添加一个类，使用`parents`方法找到它的父母div（应该是**内容**div），然后隐藏它。

的HTML：

```
 <div style="background-color: gray">
  <li><a href="#" id="xyz" class="formname">My Expanding/Collapsing Data</a></li>
  <div id="formxyz" class="content" style="display:none">
    <ul>
      <li>Content</li>
      <li><a href="#" class="closeform">Close</a></li>
    </ul>
  </div>​
</div> 
```

js文件：

```
$(function(){
  $(".formname").click(function(){
    var id=$(this).attr('id');
    $("#form"+id).fadeToggle('slow').focus();
  }); 

  $(".closeform").click(function(){
    $(this).parents("div.content").fadeOut('slow');
  });
}); 
```

​</p>

或检查[jsFiddle](http://jsfiddle.net/qu8WP/)上的模拟代码。它是可执行的。

# sql-server-2005 - 在 Where 子句中使用 Select Case 语句中的结果字段

> ID：10145024
> 
> 赞同：0
> 
> 时间：2012-04-13T16:52:55.087
> 
> 标签：sql-server-2005

我有一个 proc，我想向其中添加一个参数 - 将调用该参数`@AmountType`。然后我想将该`@AmountType`参数添加到我的`where`子句中，以便过滤不同的金额类型。棘手的部分是我希望值是`@AmountType`我选择的 case 语句部分的任何结果。
所以，只显示 AmountType1 记录，或者只显示 AmountType2 记录等。显然，我不能这样做，`where @AmountType = Amounts`因为`Amounts`它不是一个真正的列。

关于如何做到这一点的任何想法？

这是我的声明：

```
ALTER PROCEDURE spProc1
  @Date datetime
AS
BEGIN

    Select 
      location, 
      workDate, 
      case 
        when dollarAmount1 - dollarAmount2 < 0 Then 'AmountType1'
        when dollarAmount1 - dollarAmount2 > 0 Then 'AmountType2'
        when dollarAmount1 - dollarAmount2 = 0 Then 'AmountType3'            
      End As Amounts            
    From
      table1
    Where
      @Date = workDate

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:59:17.760

如果您想以可能的性能下降为代价避免重复代码，请使用子查询：

```
select
  location,
  workDate,
  Amounts
from (
    Select 
      location, 
      workDate, 
      case 
        when dollarAmount1 - dollarAmount2 < 0 Then 'AmountType1'
        when dollarAmount1 - dollarAmount2 > 0 Then 'AmountType2'
        when dollarAmount1 - dollarAmount2 = 0 Then 'AmountType3'            
      End As Amounts
    From
      table1
    Where
      @Date = workDate
) foo
where
  Amounts = @AmountType 
```

否则重复代码：

```
Select 
  location, 
  workDate, 
  case 
    when dollarAmount1 - dollarAmount2 < 0 Then 'AmountType1'
    when dollarAmount1 - dollarAmount2 > 0 Then 'AmountType2'
    when dollarAmount1 - dollarAmount2 = 0 Then 'AmountType3'            
  End As Amounts
From
  table1
Where
  @Date = workDate
  and
  @AmountType = case 
    when dollarAmount1 - dollarAmount2 < 0 Then 'AmountType1'
    when dollarAmount1 - dollarAmount2 > 0 Then 'AmountType2'
    when dollarAmount1 - dollarAmount2 = 0 Then 'AmountType3'            
  End 
```

话又说回来，性能可能根本没有区别。

# python - Pandas：按直方图结果索引数据

> ID：10145025
> 
> 赞同：3
> 
> 时间：2012-04-13T16:52:55.233
> 
> 标签：python, statistics, pandas

我正在尝试按概率（用简单的直方图估计）来索引数据。目标是在系列中选择概率小于某个阈值的项目。

我有一系列整数值，例如：

```
import pandas as pnd
import numpy  as np

series = pnd.Series(np.random.poisson(5, size = 100)) 
```

然后我像这样计算他们的直方图：

```
tmp  = {"series" : series, "count" : np.ones(len(series))}
hist = pnd.DataFrame(tmp).groupby("series").sum()
freq = hist / hist.sum() 
```

所以现在我有了结果索引的每个结果的频率，以及一系列结果。我现在有两个问题：

*   有没有办法`series`通过定义的结果/频率的映射来索引`freq`？
*   如果我设法做到这一点，我如何只选择频率大于某个值的结果？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:27:10.817

是的，使用`map`Series 方法：

```
In [16]: series.map(freq['count'])
Out[16]: 
0     0.12
1     0.06
2     0.20
3     0.11
4     0.02
5     0.13
6     0.14
7     0.11
8     0.12
9     0.16
10    0.20
<snip> 
```

然后你可以这样做：

```
In [22]: series[series.map(freq['count']) > 0.16]
Out[22]: 
2     4
10    4
11    4
22    4
27    4
31    4
34    4
56    4
64    4
71    4
73    4
76    4
77    4
79    4
80    4
86    4
88    4
89    4
91    4
99    4 
```

# javascript - 外部脚本文件（警报）

> ID：10145026
> 
> 赞同：0
> 
> 时间：2012-04-13T16:52:57.830
> 
> 标签：javascript, html, external

我有一个与外部 java 脚本有关的 html 问题。

Java脚本

```
function validateForm()
{
var x=document.forms["myForm"]["fname"].value;
if (x==null || x=="")
  {
  alert("First name must be filled out");
  return false;
  }
} 
```

警报不起作用。能否请你帮忙？感谢您的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:55:06.367

也许您的 javascript 路径不正确检查您的 src="file_path/your_file.js

尝试这个

```
 <html>
    <script src="test.js"></script>
    <body>
    <form name="myForm" action="demo_form.asp" onsubmit="return validateForm()" method="post">
    First name: <input type="text" name="fname">
    <input type="submit" value="Submit">
    </form>
    </body>
    </html> 
```

外部 js (test.js)

```
 function validateForm()
    {
    var x=document.forms["myForm"]["fname"].value;
    if (x==null || x=="")
      {
      alert("First name must be filled out");
      return false;
      }
    } 
```

# wpf - 这个 WPF 触发器有什么问题

> ID：10145033
> 
> 赞同：0
> 
> 时间：2012-04-13T16:53:30.873
> 
> 标签：wpf, xaml, triggers

我有这个抛出异常的 XAML 代码（它只是说它抛出了它，没有名字）。

我四处搜索，发现[http://social.msdn.microsoft.com/Forums/en/wpf/thread/cfb159dc-d58e-41c2-81b5-c52e1272c0ce](http://social.msdn.microsoft.com/Forums/en/wpf/thread/cfb159dc-d58e-41c2-81b5-c52e1272c0ce)。这表示对已使用属性所做的任何更改都会引发异常。

那么是不是不能在里面设置触发器`<Control.Style>`呢？

我确信这是一个非常菜鸟的错误，因为我正在学习这项技术。

XAML 代码

```
<Window x:Class="Triggers.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Button>
        <Button.Style>
            <Style TargetType="Button">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" >
                        <Setter Property="Opacity" Value="0.7" />
                    </Trigger>
                </Style.Triggers>                      
            </Style>
        </Button.Style>
        Meow
    </Button>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:07:16.247

这是因为您没有告诉触发器属性 IsMouseOver 应该具有什么值？

试试这个：

```
<Trigger Property="IsMouseOver" Value="True"> 
```

要记住的是“IsMouseOver”是一个属性，而不是一个事件。所以它可以是真或假，您需要告诉 WPF 您的触发器适用于哪个状态。

# postgresql - 了解 postgres 解释 w/ 位图堆/索引扫描

> ID：10145037
> 
> 赞同：37
> 
> 时间：2012-04-13T16:53:46.920
> 
> 标签：postgresql

我有一张有 450 万行的表格。没有主键。该表有一列`p_id`，类型为整数。使用该方法`idx_mytable_p_id`在此列上有一个索引。`btree`我愿意：

```
SELECT * FROM mytable WHERE p_id = 123456; 
```

我对此进行了解释并看到以下输出：

```
Bitmap Heap Scan on mytable  (cost=12.04..1632.35 rows=425 width=321)
  Recheck Cond: (p_id = 543094)
  ->  Bitmap Index Scan on idx_mytable_p_id  (cost=0.00..11.93 rows=425 width=0)
        Index Cond: (p_id = 543094) 
```

问题：

*   为什么该查询先进行堆扫描，然后进行位图索引扫描？
*   为什么要检查 425 行？为什么操作的宽度是321？
*   12.04..1632.35 和 0.00..11.93 告诉我的成本是多少？

记录有 773 行，`p_id`值为 123456。 上有 38 列`mytable`。

谢谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-13T17:51:50.717

> 为什么该查询先进行堆扫描，然后进行位图索引扫描？

它不是，确切地说。EXPLAIN 输出显示了执行节点的结构，“更高”级别的节点（没有缩进很远）从它们下面的节点中提取行。因此，当 Bitmap Heap Scan 节点开始提取其第一行时，Bitmap Index Scan 运行以确定要使用的行集，并将第一行的信息传递给堆扫描。索引扫描通过索引来确定需要读取哪些行，而堆扫描实际读取它们。这个想法是，通过从头到尾而不是按索引顺序读取堆，它将执行更少的随机访问——加载该页面时将读取来自给定页面的所有匹配行，并且可以读取足够多的页面以便使用更便宜的顺序访问，而不是在整个磁盘上来回查找。

> 为什么要检查 425 行？

它不是。您运行了 EXPLAIN，它只显示您的估计和选择的计划，它根本没有真正检查行。这使得 EXPLAIN 的值与运行 EXPLAIN ANALYZE 相比相当有限，EXPLAIN ANALYZE 实际*运行*查询并向您显示估计值*和实际*数字。

> 为什么操作的宽度是321？

显然这是`mytable`.

> 12.04..1632.35 和 0.00..11.93 告诉我的成本是多少？

第一个数字是从该节点返回第一行的成本；第二个数字是返回该节点的所有行的成本。请记住，这些是估计值。单位是抽象成本单位。绝对数字没有任何意义；计划中重要的是哪个计划成本最低。如果您使用光标，则第一个数字很重要；否则通常是第二个数字。（我认为它插入了一个 LIMIT 子句。）

通常需要调整可配置的成本因素，例如`random_page_cost`和`cpu_tuple_cost`，以便准确地对环境中的成本进行建模。如果没有这样的调整，比较成本可能与相应的运行时间不匹配，因此可能会选择不太理想的计划。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-13T17:43:32.323

re 1) 执行计划必须从最内层节点读取到最外层节点。所以它首先进行索引扫描（查找行）并访问实际表以返回索引扫描找到的行

重新 2) 计划中显示的行数只是基于统计数据的估计，因此 425 与 773 听起来相当合理。如果您想查看**真实**数字，请使用`explain analyze`

re 3）成本图中的第一个数字是初始化计划者步骤的“启动”成本，第二个成本是该步骤的总成本。

这一切都记录在手册中： [http ://www.postgresql.org/docs/current/static/using-explain.html](http://www.postgresql.org/docs/current/static/using-explain.html)

您可能还想浏览 PostgreSQL Wiki 中的这些链接：

[PostgreSQL](http://wiki.postgresql.org/wiki/Introduction_to_VACUUM,_ANALYZE,_EXPLAIN,_and_COUNT#PostgreSQL_EXPLAIN)
[解释使用解释](http://wiki.postgresql.org/wiki/Using_EXPLAIN)

# ios - UIActivityIndi catorView 没有出现 iOS 5

> ID：10145045
> 
> 赞同：1
> 
> 时间：2012-04-13T16:54:12.713
> 
> 标签：ios, multithreading, spinner, uiactivityindicatorview

我正在尝试实现一个简单的微调器，而我的应用程序从 Internet 中查找数据。我的数据抓取工作正常，但有时需要一段时间，所以我想使用 UIActivityIndi​​catorView 让用户知道应用程序没有崩溃。但它目前无法正常工作。我从这些论坛和其他论坛中收集了尽可能多的信息，但由于某种原因它不起作用。同样，我觉得这个解决方案可能非常简单。这就是我正在做的事情：

我将微调器声明为 .h 文件中的属性：

```
 @property (strong, nonatomic) IBOutlet UIActivityIndicatorView *activityIndicator; 
```

我还使用情节提要将微调器对象拖到视图控制器上，并使用 CTRL 拖动创建了到属性的连接。

触发 URL 请求（以及随后的数据加载和解析）的按钮实际上会触发一个 segue，所以我认为使用

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

功能是开始工作的好地方。除了 prepareforsegue 功能外，我没有附加到按钮的特定功能。（也许这是一个问题？是否需要关联 IBAction？...）

无论如何，该功能会触发：

```
 [self GoAheadAndGetData]; 
```

反过来，它的开头是这样的：

```
 - (void)GoAheadAndGetData {

[NSThread detachNewThreadSelector:@selector(threadStartAnimating:) toTarget:self withObject:nil];
  ....... etc 
```

所以这个函数看起来像这样：

```
 - (void) threadStartAnimating:(id)data 
 {
    [activityIndicator startAnimating];
 } 
```

最后，在 GoAheadAndGetData 函数的末尾，我放置了停止动画调用，如下所示：

```
 [activityIndicator stopAnimating]; 
```

明白了吗？如果有人需要更多信息，请告诉我 - 我已经尝试将其简化为基础知识，所以我不必在这里发布大量代码......

提前谢谢你 - 我真的很感激我能得到的任何帮助。我不太清楚为什么它在这一点上不起作用。

# mfc - 试图在 CFormView 中覆盖 CView::OnUpdate

> ID：10145047
> 
> 赞同：1
> 
> 时间：2012-04-13T16:54:18.193
> 
> 标签：mfc, compiler-errors

我正在开发一个视图继承 CFormView 的 SDI 项目。我试图覆盖[CView::OnUpdate](http://msdn.microsoft.com/en-us/library/w1z3te7e%28v=vs.90%29.aspx)，但编译器抱怨如下：

```
'CMyFormView::OnUpdate' : 'virtual' storage-class specifier illegal on function 
```

定义

这是我的类定义：

```
class CMyFormView : public CFormView
{
…
// Overrides
public:
    virtual BOOL PreCreateWindow(CREATESTRUCT& cs);
protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support
    virtual void OnInitialUpdate(); // called first time after construct
    virtual void OnUpdate(CView* pSender, LPARAM lHint, CObject* pHint);
}; 
```

我试图覆盖的函数如下所示：

```
virtual void CMyFormView::OnUpdate(CView* pSender, LPARAM lHint, CObject* pHint)
{
    CFormView::OnUpdate(pSender, lHint, pHint);

    //Get the current data from our document
    CMyAppDoc* pDoc = GetDocument();
} 
```

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:15:05.387

不要将“虚拟”放在函数定义（.cpp 文件）中。您只能将其放在声明（.h 文件）中。如果它已经在基类层次结构（CView？）中声明为 virtual，那么您根本不需要“virtual”关键字，因为如果您具有相同的函数声明，它将自动为 virtual。

# jquery - jQuery找到一个具有一定偏移量的div

> ID：10145058
> 
> 赞同：0
> 
> 时间：2012-04-13T16:55:04.680
> 
> 标签：jquery, offset

假设我在一个页面上有 10 个 div，所以我想要更改具有 offset.left = 10 和 offset.top = 10 的 div 的颜色。

我不确定这个问题有多实用，但我正在寻找可以帮助我找到具有一定偏移量的 div 的 jquery 代码。

是的，这些 div 是动态创建的，因此请不要使用 html 提供任何 hack，因为它们在页面上的位置也是动态的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:56:20.567

```
$('div').each(function() {
  var offset = $(this).offset();
  if (offset.left == 10 && offset.top == 0) {
    // do your stuff
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:13:05.667

就像你知道的那样，有一个 jQuery 实用程序完全可以用于这种事情，所以你不必每次都使用 .each 。

这不一定是更好的解决方案，而只是一个更“有意”的解决方案，因为这就是他们制作此功能的原因。它被称为[.filter](http://api.jquery.com/filter/)

像这样使用它：

```
$("div").filter(function(i) { 
    return $(this).offset().top == 10 && $(this).offset().left == 10 
});
// will render a jQuery object containing ONLY the divs that matach the return 
```

参见示例

## [**jsFiddle在这里**](http://jsfiddle.net/SpYk3/YF3py/)

# python - 打错了，Python 函数仍然有效。为什么？

> ID：10145059
> 
> 赞同：2
> 
> 时间：2012-04-13T16:55:07.613
> 
> 标签：python, list, sudoku, transpose

我已经使用 Udacity 学习编程和 Python 大约一个月了。对于其中一个问题，我们应该编写一个函数来检查传入的数独列表是否有效。

在下面的 for 循环中，我想同时使用原始列表和转置列表进行迭代`row`，但错误地留在了我的语句的后半部分。我运行了它，令我惊讶的是，它仍然继续返回正确的答案。`col``zip()``row``or`

```
def check_sudoku(array):  
    is_sudoku = True
    reference = range(1, len(array) + 1)
    transposed = zip(array)

    for row, col in zip(array, transposed):
        if sorted(row) != reference or sorted(row) != reference:
            is_sudoku = False
            break
    return is_sudoku 
```

我的猜测是因为我`is_sudoku = True`默认定义了，并且我正在`rows`与参考列表进行比较，因此即使我的转置不起作用，它也会捕获无效值。`row`当我用虽然替换第二个时`col`，它坏了。

我的问题是，我的猜测对吗？如果没有，为什么这段代码有效，我怎样才能更好地写这个？

谢谢！（如果您想查看我传入的列表，也可以粘贴在键盘上 - [http://codepad.org/IXDlZuUu](http://codepad.org/IXDlZuUu)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:02:09.820

如果正确的值是 False，那么你的函数可以工作，因为在某些时候`sorted(row) != reference`. 至于重写它，我认为这样的事情会更清楚：

```
def check_sudoku(array):  
    reference = range(1, len(array) + 1)
    transposed = zip(array)
    for row, col in zip(array, transposed):
        if sorted(row) != reference or sorted(row) != reference:
            return False
    return True 
```

此外，我很难理解你为什么这样做`transposed = zip(array)`，然后`zip(array, transposed)`。据我所知，它只需要一个类似的列表`[1, 2, 3]`并将其转换为`[(1, (1,)), (2, (2,)), (3, (3,))]`.

如果您希望遍历行和列，这是一种有效的方法。

```
>>> rows = incorrect
>>> cols = [[row[i] for i in range(len(rows[0]))] for row in rows]
>>> cols = [[row[i] for row in rows] for i in range(len(row))]
>>> cols
[[4, 6, 3, 9, 7, 8, 1, 5, 2], [1, 5, 9, 6, 3, 2, 4, 8, 7], [2, 8, 7, 4, 5, 1, 9, 3, 6], [3, 9, 5, 2, 1, 7, 6, 4, 8], [6, 4, 2, 3, 8, 9, 5, 7, 1], [7, 1, 8, 5, 4, 6, 3, 2, 9], [8, 3,
 1, 7, 6, 4, 2, 9, 5], [5, 2, 6, 8, 9, 3, 7, 1, 4], [1, 7, 4, 1, 2, 5, 8, 6, 3]]
>>> rows
[[4, 1, 2, 3, 6, 7, 8, 5, 1], [6, 5, 8, 9, 4, 1, 3, 2, 7], [3, 9, 7, 5, 2, 8, 1, 6, 4], [9, 6, 4, 2, 3, 5, 7, 8, 1], [7, 3, 5, 1, 8, 4, 6, 9, 2], [8, 2, 1, 7, 9, 6, 4, 3, 5], [1, 4,
 9, 6, 5, 3, 2, 7, 8], [5, 8, 3, 4, 7, 2, 9, 1, 6], [2, 7, 6, 8, 1, 9, 5, 4, 3]] 
```

# javascript - 访问 box2d 实体

> ID：10145060
> 
> 赞同：0
> 
> 时间：2012-04-13T16:55:13.550
> 
> 标签：javascript, box2d

从现在开始，我一直在使用从网上复制的 for 循环访问 box2d 主体（以更改或获取它们的值）：

```
for (var b = world.GetBodyList(); b != null; b = b.GetNext()) 
```

工作正常，但是......还有其他更快的方法吗？我不能只在数组中存储对主体的引用，以便始终可以访问它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:59:40.990

我不知道您使用的是哪个版本的 Box2DJ，但您可以执行以下操作：

```
var myBodies = [];
var myBox = new b2BoxDef(); // or whatever the name of your body creation function is
myBodies.push(myBox);
console.log(myBodies[0]); // reference to your Box2D object 
```

# android - Android ViewPager 错误

> ID：10145064
> 
> 赞同：0
> 
> 时间：2012-04-13T16:55:37.670
> 
> 标签：android, android-viewpager

我正在使用 android 支持包 v4 中的 ViewPager，但它说它无法在支持包中找到 ViewPager 类。而且我不知道如何解决它？

**LOGCAT**

```
04-13 16:48:05.842: E/AndroidRuntime(1211): FATAL EXCEPTION: main
04-13 16:48:05.842: E/AndroidRuntime(1211): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.alpha.liveshitplus/com.alpha.liveshitplus.Discography}: android.view.InflateException: Binary XML file line #6: Error inflating class android.support.v4.view.ViewPager
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.os.Looper.loop(Looper.java:137)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.app.ActivityThread.main(ActivityThread.java:4340)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at java.lang.reflect.Method.invoke(Method.java:511)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at dalvik.system.NativeStart.main(Native Method)
04-13 16:48:05.842: E/AndroidRuntime(1211): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class android.support.v4.view.ViewPager
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.app.Activity.setContentView(Activity.java:1835)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at com.alpha.liveshitplus.Discography.onCreate(Discography.java:17)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.app.Activity.performCreate(Activity.java:4465)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
04-13 16:48:05.842: E/AndroidRuntime(1211):     ... 11 more
04-13 16:48:05.842: E/AndroidRuntime(1211): Caused by: java.lang.ClassNotFoundException: android.support.v4.view.ViewPager
04-13 16:48:05.842: E/AndroidRuntime(1211):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.view.LayoutInflater.createView(LayoutInflater.java:552)
04-13 16:48:05.842: E/AndroidRuntime(1211):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
04-13 16:48:05.842: E/AndroidRuntime(1211):     ... 21 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T14:25:56.583

it is perhaps that the version of android-support-v4.jar is not right. solution:

1.  close the eclipse
2.  delete the android-support-v4.jar in the project's libs folder
3.  reopen the eclipse
4.  right click the project, Android Tools -> Add Support Library... then the eclipse will download the right version of android-support-v4.jar for your project and add it to your project.
5.  rebuilt and run your project, it will OK!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:37:37.483

Given that you upgraded to r18, you might be having trouble with the changes to dependency management. See [this link](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17) and [this link](https://plus.google.com/u/0/109385828142935151413/posts/RL91VJd1yti) for example.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:45:48.117

确保将兼容性 jar 文件复制到项目的 libs 文件夹中，并将其添加到构建路径中。

如果 libs 文件夹不存在，请在项目的根目录下创建一个。

# sql-server-2008 - 合并拖车表而不混合行

> ID：10145066
> 
> 赞同：0
> 
> 时间：2012-04-13T16:55:42.807
> 
> 标签：sql-server-2008

提前感谢您的帮助

我在 sql server 中有 Tow 表，我想将它们联合起来而不将 Rows 混合为 Flowing：

T1 是

```
 ID    Name

   1     john
   2     Lol 
```

T2 是

```
 ID    Name

  1     Normi
  2     CRI 
```

如果我确实选择了 LIKE THAT：从 T1 中选择 Id,Name Union select Id,Name from T2 结果将是 Like

```
 ID    Name
 1     john
 1     Normi
 2     Lol
 2     CRI 
```

但对我来说，我想要结果喜欢

```
 ID    Name
   1     john
   2     Lol
   1     Normi
   2     CRI 
```

请帮忙再次谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T16:58:50.400

```
SELECT a.id, a.Name
FROM 
(select Id,Name, 1 as num from T1 Union select Id,Name, 2 as num from T2)a
ORDER BY a.num,a.Id 
```

# php - 为什么我下载的文件总是损坏或损坏？

> ID：10145067
> 
> 赞同：4
> 
> 时间：2012-04-13T16:55:52.830
> 
> 标签：php, file, download

我的下载脚本有一个非常奇怪的问题

它基本上

> 1.使用“GET”方法获取文件ID
> 
> 2.从数据库中获取该文件的名称和位置
> 
> 3.将其与标头和读取文件一起发送给客户端

但奇怪的是，该文件总是以损坏或损坏的形式出现

就像它是 zip 或 rar 文件文件大小是否正确并且可以正常打开

但我无法打开其中的压缩文件，这就是我收到文件损坏错误的时候

这很奇怪，因为如果代码有问题我什至不能打开 zip 文件（或者至少我认为我不应该）

另一件事是我在发送标头之前打印出带有路径的文件，以确保一切正常

我已将文件地址放在 url 上并下载文件，文件正常，没有错误

所以在发送标头之前一切都很好

这是我的代码

```
 $file_id = isset($_GET['id']) && (int)$_GET['id'] != 0 ? (int)$_GET['id'] : exit;

        //////// finging file info
        $file = comon::get_all_by_condition('files' , 'id' , $file_id );
        if(!$file) exit;
        foreach($file as $file){
        $location = $file['location'];
        $filename = $file['file_name'];
        }
        /////////////

        $site = comon::get_site_domian();

        $ext = trim(end(explode('.' , $filename )));
        $abslout_path = 'http://'.$site.'/'.$location.'/'.$filename;
        $relative = $location.'/'.$filename;

    ////////////////// content type 
            switch($ext) {
            case 'txt':
                $cType = 'text/plain'; 
            break;              
            case 'pdf':
                $cType = 'application/pdf'; 
            break;

            case 'zip':
                $cType = 'application/zip';
            break;

            case 'doc':
                $cType = 'application/msword';
            break;

            case 'xls':
                $cType = 'application/vnd.ms-excel';
            break;

            case 'ppt':
                $cType = 'application/vnd.ms-powerpoint';
            break;
            case 'gif':
                $cType = 'image/gif';
            break;
            case 'png':
                $cType = 'image/png';
            break;
            case 'jpeg':
            case 'jpg':
                $cType = 'image/jpg';
            break;

            default:
                $cType = 'application/force-download';
            break;
        }
   //////////////// just checking 

   if(!file_exists($relative)){
        echo $relative;
        echo '<br />';
        exit;
        }

    if( !is_readable( $relative ) )
    exit('its not redable');

    if( headers_sent() )
    exit('headers ? already sent !! ');

    header( 'Pragma: public' ); 
    header( 'Expires: 0' );
    header( 'Cache-Control: must-revalidate, post-check=0, pre-check=0' );
    header( 'Cache-Control: private', false ); // required for certain browsers 
    header( 'Content-Description:File Transfer' );
    header($_SERVER['SERVER_PROTOCOL'].' 200 OK');
    header( 'Content-Type:'.$cType);
    header( 'Content-Disposition: attachment; filename="'. basename($filename) . '";' );
    header( 'Content-Transfer-Encoding: binary' );
    header( 'Content-Length: ' . filesize($relative) );
    readfile($abslout_path);
    exit; 
```

我已经检查了几次标题，它们很好（我认为），我还添加了人类已知的每个标题以确保！

我开始认为这可能是字符编码或文件夹权限之类的脚本以外的东西！或类似的东西 ！！

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T17:12:24.730

这似乎只是为了强制下载而分配的代码，这是我一直使用的一个不错的功能。它也可以处理超过 2GB 的文件。

```
<?php 
$file_id = (isset($_GET['id']) && (int)$_GET['id'] != 0) ? (int)$_GET['id'] : exit;

/*finding file info*/
$file = comon::get_all_by_condition('files', 'id', $file_id);
$path = $file['location'] . '/' . $file['file_name'];

if (!is_file($path)) {
    echo 'File not found.('.$path.')';
} elseif (is_dir($path)) {
    echo 'Cannot download folder.';
} else {
    send_download($path);
}

return;

//The function with example headers
function send_download($file) {
    $basename = basename($file);
    $length   = sprintf("%u", filesize($file));

    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename="' . $basename . '"');
    header('Content-Transfer-Encoding: binary');
    header('Connection: Keep-Alive');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . $length);

    set_time_limit(0);
    readfile($file);
}
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-26T12:30:47.210

```
 if (file_exists($file)) {
set_time_limit(0);
        header('Connection: Keep-Alive');
    header('Content-Description: File Transfer');
            header('Content-Type: application/octet-stream');
            header('Content-Disposition: attachment; filename="'.basename($file).'"');
            header('Content-Transfer-Encoding: binary');
            header('Expires: 0');
            header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
            header('Pragma: public');
            header('Content-Length: ' . filesize($file));
            ob_clean();
            flush();
            readfile($file);

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T21:22:17.103

非常好，也很有帮助...

但是你的代码有问题-

```
header('Content-Disposition: attachment;
filename="'.basename($file).'"'; 
```

请使用以下内容进行更改-

```
header('Content-Disposition: attachment;
filename="'.basename($file).'"'); 
```

你忘了关闭它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T17:16:06.293

您的脚本可能包含 NOTICE 或 WARNING，请尝试在您的脚本之上禁用错误报告：

```
error_reporting(0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-27T10:56:11.593

确保在最后一行之后没有执行任何代码`readfile(FILE_NAME)`

我不得不添加`die();`or`exit();`作为最后一行，因为 MVC 框架在之后继续渲染视图`readfile`

# css - 虚线下划线 TEXT

> ID：10145068
> 
> 赞同：1
> 
> 时间：2012-04-13T16:55:55.657
> 
> 标签：css, text, underline, dotted-line

我有一个固定宽度的元素（例如标签），我希望只有文本带有点下划线。如果使用border-bottom 执行“技巧”，则整个框将带有下划线

我认为[这](http://jsfiddle.net/mrg9a/)解释了我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:58:07.773

您应该将其包装成一个跨度并将该边框底部样式添加到该跨度：http: [//jsfiddle.net/mrg9a/2/](http://jsfiddle.net/mrg9a/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:58:20.740

您可以将文本包装在`<span>`标签中，然后将样式应用于跨度。

请参阅此**[jsFiddle 示例](http://jsfiddle.net/j08691/mrg9a/3/)**中的第二个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:48:13.853

由于`label`默认情况下元素是内联的，因此问题是由使它们内联块引起的。反过来，这可能是为了避免使用最自然和最有效的表单结构方式，即 HTML 表格。只需切换到`table`标记并在没有花哨的设置的情况下使用`label`inside `td`，`label`元素将采用您在它们上设置的边框，以其自然宽度。

# java - 规范化 Hibernate 中的重复值 - Java

> ID：10145069
> 
> 赞同：1
> 
> 时间：2012-04-13T16:55:56.987
> 
> 标签：java, hibernate, normalize

我有一个实体的 String 属性，它经常被其他实体重复 - 这将（在传统数据库中）映射到它自己的表。

例如：我可以有一个服装实体，每件衣服都有自己的对象或行。每个项目都会有一个品牌，但这个品牌（字符串）可以被许多其他服装项目重复。- 它本质上应该是一个多对一映射，尽管品牌本身并不是一个实体，它只是一个字符串。

我将如何在休眠状态下执行此操作？还是我应该为每个品牌创建一个实体并使用 ManyToOne？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:01:56.487

我认为，就[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)（尤其是[3NF](http://en.wikipedia.org/wiki/Third_normal_form)）而言，如果您希望列具有重复值，则应该将这些值导出到它们自己的表中并具有外键列。这样，如果其中一个值发生变化，您可以一次全部更改。

这也将允许您在 Hibernate 中使用 ManyToOne。

但是，如果这不可能，我建议使用[Enum](http://appfuse.org/display/APF/Java+5+Enums+Persistence+with+Hibernate)。

# dynamic - 如何将在 Dreamweaver 中创建的网站转换为移动网站？

> ID：10145072
> 
> 赞同：1
> 
> 时间：2012-04-13T16:56:24.227
> 
> 标签：dynamic, mobile, static, web, dreamweaver

我开发了一个充满 JavaScript 和所有其他动态内容的网站。我想使用 Dreamweaver 或任何其他工具将此网站转换为移动网站。这是可能的还是我必须从一开始就为同一个网站创建移动网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:14:45.863

查看 Dreamweaver 的媒体查询功能。它将允许您为不同大小的屏幕设置不同的样式表。有关如何使用媒体查询的教程，请参阅文档或 Adob​​e 的开发中心。

最佳 - 乔

# jpa-2.0 - JPA Criteria查询Path.get left join是否可能

> ID：10145074
> 
> 赞同：9
> 
> 时间：2012-04-13T16:56:28.867
> 
> 标签：jpa-2.0, java-ee-6, criteria-api

我对 JPA 标准有疑问。

这是我的 JPA 条件查询：

```
 CriteriaBuilder criteriaBuilder = getEm().getCriteriaBuilder();
 CriteriaQuery<InventoryItemSumReport> query = criteriaBuilder.createQuery(InventoryItemSumReport.class);
 Root<InventoryItemDetail> from = query.from(InventoryItemDetail.class);    

 Join<InventoryItemDetail, InventoryItem> joinItem = from.join(InventoryItemDetail_.inventoryItem); 

 Predicate where = criteriaBuilder.lessThanOrEqualTo(from.get(InventoryItemDetail_.effectiveDate), date);

 query.multiselect(joinItem.get(InventoryItem_.product),joinItem.get(InventoryItem_.facility),joinItem.get(InventoryItem_.customer));
 query.groupBy(joinItem.get(InventoryItem_.product),joinItem.get(InventoryItem_.facility),joinItem.get(InventoryItem_.customer));
 query.where(where); 

 TypedQuery<InventoryItemSumReport> createQuery = getEm().createQuery(query);       
 List<InventoryItemSumReport> resultList = createQuery.getResultList(); 
```

以下是 JPA 提供程序生成的查询结果：

```
 select
        inventoryi1_.PRODUCT_ID as col_0_0_,
        inventoryi1_.FACILITY_ID as col_1_0_,
        inventoryi1_.CUSTOMER_ID as col_2_0_ 
    from
        INVENTORY_ITEM_DETAIL inventoryi0_ 
    inner join
        INVENTORY_ITEM inventoryi1_ 
            on inventoryi0_.INVENTORY_ITEM_ID=inventoryi1_.ID 
    inner join
        PRODUCT product2_ 
            on inventoryi1_.PRODUCT_ID=product2_.ID 
    inner join
        FACILITY facility3_ 
            on inventoryi1_.FACILITY_ID=facility3_.ID 
    inner join
        CUSTOMER customer4_ 
            on inventoryi1_.CUSTOMER_ID=customer4_.ID 
    where
        inventoryi0_.EFFECTIVE_DATE<= ? 
    group by
        inventoryi1_.PRODUCT_ID ,
        inventoryi1_.FACILITY_ID ,
        inventoryi1_.CUSTOMER_ID 
```

但我想要以下查询：

```
 select
        inventoryi1_.PRODUCT_ID as col_0_0_,
        inventoryi1_.FACILITY_ID as col_1_0_,
        inventoryi1_.CUSTOMER_ID as col_2_0_ 
    from
        INVENTORY_ITEM_DETAIL inventoryi0_ 
    inner join
        INVENTORY_ITEM inventoryi1_ 
            on inventoryi0_.INVENTORY_ITEM_ID=inventoryi1_.ID 
    inner join
        PRODUCT product2_ 
            on inventoryi1_.PRODUCT_ID=product2_.ID 
    inner join
        FACILITY facility3_ 
            on inventoryi1_.FACILITY_ID=facility3_.ID 
    left join
        CUSTOMER customer4_ 
            on inventoryi1_.CUSTOMER_ID=customer4_.ID 
    where
        inventoryi0_.EFFECTIVE_DATE<= ?
    group by
        inventoryi1_.PRODUCT_ID ,
        inventoryi1_.FACILITY_ID ,
        inventoryi1_.CUSTOMER_ID 
```

使用**左连接 CUSTOMER**来获得`Customers`空值的结果。
`Customer`, `Product`,`Facility`都是实体，`InventoryItemSumReport`而是 Value 对象或 DTO。

```
public class InventoryItemSumReport implements Serializable {

   private static final long serialVersionUID = 1L;

   private Product product;
   private Facility facility;
   private Customer customer;

   public InventoryItemSumReport(Product product, Facility facility, Customer customer) {
       super();
       this.product = product;
       this.facility = facility;
       this.customer = customer;
   }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T09:33:02.863

我发现它的工作原理如下：

```
 CriteriaBuilder criteriaBuilder = getEm().getCriteriaBuilder();
 CriteriaQuery<InventoryItemSumReport> query = criteriaBuilder.createQuery(InventoryItemSumReport.class);
 Root<InventoryItemDetail> from = query.from(InventoryItemDetail.class);    

 Join<InventoryItemDetail, InventoryItem> joinItem = from.join(InventoryItemDetail_.inventoryItem); 

 Predicate where = criteriaBuilder.lessThanOrEqualTo(from.get(InventoryItemDetail_.effectiveDate), date);

 Join<InventoryItem, Customer> joinCustomer = joinItem.join(InventoryItem_.customer, JoinType.LEFT);
 query.multiselect(joinItem.get(InventoryItem_.product),joinItem.get(InventoryItem_.facility),joinItem.get(InventoryItem_.customer));
 query.groupBy(joinItem.get(InventoryItem_.product),joinItem.get(InventoryItem_.facility),joinCustomer);
 query.where(where); 

 TypedQuery<InventoryItemSumReport> createQuery = getEm().createQuery(query);       
 List<InventoryItemSumReport> resultList = createQuery.getResultList(); 
```

# rest - 如何设计一个 RESTful API 来检查用户的凭据？

> ID：10145081
> 
> 赞同：14
> 
> 时间：2012-04-13T16:57:03.413
> 
> 标签：rest

我正在为移动应用程序设计一个 API，我希望它保持 RESTful。
API 是使用 Basic HTTP Auth 授权的，但是，当用户第一次打开应用程序时，他需要先登录，所以我需要设计一个 API 来检查用户的凭据，它将接受一对用户名和密码，相应地返回成功或失败。
问题是网址应该是什么所以它很安静？我不认为 /login 是一个好的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-14T17:33:58.383

通过 HTTP请求传递*敏感数据*通常被视为不好的做法。`GET`

密码信息是敏感数据，是违反[幂等操作](https://stackoverflow.com/questions/1077412/what-is-an-idempotent-operation)应该是`GET`请求的规则的例外之一。

为什么这是一个例外？浏览器历史记录和服务器日志将存储`GET`请求。这意味着此敏感信息在两个地方都以纯文本形式显示。因此，如果有人掌握了其中任何一个 - 那么该信息现在就在他们手中。

您应该使用 HTTP`POST`请求将此敏感信息传递给 RESTful API，因为浏览器不会存储它们，服务器也不会记录它们。但是，第一道防线是使用安全 HTTP (HTTPS) 来确保这些信息不受外来者的影响。

因此，将 HTTP 请求**正文**中的此信息传递给 HTTPS URL。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-14T01:03:10.613

一个好的方法是`GET`请求当前用户的帐户/个人资料信息。并让它返回用户名、设置、头像 url 等，`me`这是一个经常用作身份验证用户的简写标识符。

```
GET https://api.example.com/profiles/me
HTTP/1.1 200 OK
{
  "username": "bob",
  "id": "xyz",
  "created_at": 123,
  "image_url": "https://example.com/bob.png"
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-14T02:22:22.153

来自维基百科：

> 客户端-服务器通信进一步受到请求之间没有客户端上下文存储在服务器上的限制。来自任何客户端的每个请求都包含服务请求所需的所有信息，并且任何会话状态都保存在客户端中。

因为服务器不存储来自客户端的会话状态，所以您的 API**不应该公开任何登录/注销功能**：在每个请求中，您应该发送用户凭据，并且服务器每次都应该验证它们。

检查[SO 中的这个讨论](https://stackoverflow.com/questions/3105296/if-rest-applications-are-supposed-to-be-stateless-how-do-you-manage-sessions)，它澄清了这个概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T07:35:26.433

我同意 Carlos 的观点——在普通的 restful API 中，没有会话，因此您无法进行一次身份验证然后重用会话，您实际上需要在每次调用时传递凭据集（不理想）。

在这种情况下，听起来您最好使用其中一个 openAuth (http://www.oAuth.net) - 这通过在应用程序首次运行时进行身份验证然后生成访问令牌以允许在每次调用中进行访问来工作（+一个刷新令牌）。

（您可能会争辩说访问令牌是状态 - 它有点像 - 但是，至少它通常寿命明显更长）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-21T15:33:38.633

`GET https://api.example.com/auth`

设置了授权标头。

# c# - 暴露 net.tcp 端点

> ID：10145086
> 
> 赞同：9
> 
> 时间：2012-04-13T16:57:32.300
> 
> 标签：c#, wcf

我对如何在 WCF 中公开端点有点困惑

我有一个 tcp 端点和一个 mex tcp 端点。

```
<service name="MessageReaderService.MessageReaderService">
    <endpoint name="NetTcpReaderService" 
        address="ReaderService" 
        binding="netTcpBinding" bindingConfiguration=""
        contract="Contracts.IMessageReaderService" />
    <endpoint name="netTcpMex" 
        address="mex" 
        binding="mexTcpBinding" bindingConfiguration=""
        contract="IMetadataExchange" />
    <host>
       <baseAddresses>
           <add baseAddress="net.tcp://localhost:8082" />
       </baseAddresses>
    </host>
 </service> 
```

当我尝试在服务主机中运行它时，出现以下异常：

> 在服务 MessageReaderService 实施的合同列表中找不到合同名称“IMetadataExchange”。将 ServiceMetadataBehavior 添加到
> 配置文件或直接添加到 ServiceHost 以启用对此协定的支持。

所以我从这个错误中得出结论，我需要添加一个服务行为来公开元数据。

所以我添加了行为：

```
<behavior name="ServiceBehavior">
    <serviceMetadata httpGetEnabled="true"/>                  
</behavior> 
```

但后来我得到一个不同的错误：

> ServiceMetadataBehavior的HttpGetEnabled属性设置为true，HttpGetUrl属性是相对地址，但是没有http基地址。提供 http 基地址或将 HttpGetUrl 设置为绝对地址。

1.  所以现在我必须添加另一个端点（http）来通过 mexhttpbinding 公开元数据？
2.  有没有一种简单的方法可以通过 tcp 公开端点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T17:06:32.393

两件事情：

(1) 一旦你定义了服务行为，你当然也必须**将它应用**到服务中！

```
<service name="MessageReaderService.MessageReaderService"
         behaviorConfiguration="ServiceBehavior"> 
```

(2) 您不需要 HTTP 端点 - 您不需要 HTTP URL - 只需像这样定义此服务行为：

```
<behavior name="ServiceBehavior">
    <serviceMetadata />
</behavior> 
```

您的元数据现在可以通过`mexTcpBinding`端点获得 - 您无法使用 HTTP 浏览到它，但客户端绝对可以连接到它并使用它！

您可以使用[WCF 测试客户端](http://msdn.microsoft.com/en-us/library/bb552364.aspx)验证这一点，然后转到

```
net.tcp://localhost:8082        (the base address) 
```

或者

```
net.tcp://localhost:8082/mex    (the mex address) 
```

在这两种情况下，WCF 测试客户端现在都应该找到您的服务并能够发现它的功能。

# kml - 为什么 KML 不显示我的地标图标？

> ID：10145089
> 
> 赞同：0
> 
> 时间：2012-04-13T16:57:40.387
> 
> 标签：kml

这是[KML](http://www.eklsofttrade.com/lk/android/testkml.kml)文件。地标点仅显示一个自定义图标。

其他人有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:27:51.690

我想通了为什么除了蓝旗之外没有在地标处显示图标图像。所有/除了蓝旗/图标 URL 都以“www”开头。而不是“http://www”。这是我自己的一个基本错误。:-(

# facebook - Facebook 批准的提高应用请求转化率的方法？

> ID：10145092
> 
> 赞同：0
> 
> 时间：2012-04-13T16:57:47.840
> 
> 标签：facebook, notifications, apprequests

我有一个关于提高 Facebook 应用通知可见度的问题。

据我所知，对于不点击“应用和游戏”部分的用户，只有 2 个地方会出现 Facebook 应用请求 - 在右上角（[https://skitch.com/nicksoman/8172w/ facebook](https://skitch.com/nicksoman/8172w/facebook)）或在宝石中（[https://skitch.com/nicksoman/81737/2-facebook](https://skitch.com/nicksoman/81737/2-facebook)） - 如果收件人没有使用该应用程序，我相信这个措辞有点不同，因为它引用了邀请而不是而不是请求。

正如其他人所指出的，这些渠道都没有提供有关请求的任何上下文。在过去，我已经看到了 BranchOut 和 FarmVille 等应用程序的上下文，但我现在无法通过从这些应用程序发送邀请来复制这种行为（任何人都可以）？

有没有人找到一种 Facebook 认可的方式来围绕这些应用程序请求提供更多上下文或使它们更加可见？

由于滥用应用程序，我熟悉 Facebook 调整渠道的历史 - 只是想确保我今天了解最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:19:01.603

您是指未授权您的应用程序的用户还是已授权的用户？

基本上，facebook 称之为[社交渠道](http://developers.facebook.com/docs/channels/)，你有几个选择，同样，这取决于用户是否已经在使用你的应用程序。

如果用户正在使用您的应用程序，您可以通过发出应用程序生成的请求来使用书签栏。

如果用户没有使用您的应用程序，那么他正在使用您的应用程序的朋友可以向他发送用户生成的请求。

您可以并且应该鼓励您的用户将您的应用故事发布[到他们朋友的订阅源](http://developers.facebook.com/docs/reference/dialogs/feed/)和/或[发送给朋友](http://developers.facebook.com/docs/reference/dialogs/send/)。

这个答案的第一个链接中讨论了“自动频道”。

更多选择是在您的网站中使用[社交插件，并拥有您的应用程序的](http://developers.facebook.com/docs/plugins/)[移动版本](http://developers.facebook.com/docs/guides/mobile/)。

# asp.net-mvc-3 - ASP.NET MVC 3 - 离开视图后如何执行代码？

> ID：10145094
> 
> 赞同：1
> 
> 时间：2012-04-13T16:57:59.837
> 
> 标签：asp.net-mvc-3

我在这里遇到了一些麻烦。我认为公司可以对我们网站的用户赞不绝口。用户列在一个表格中，一列有公司投票支持或反对用户的小手图像。我在那里编写了一个 ActionLink，但是，我不希望每次公司对用户投票时都发生回发。

我决定用公司投票的用户 ID 填写一个列表，然后在离开页面时，过滤器会拦截请求，获取列表并处理投票。在[这篇文章](https://stackoverflow.com/questions/6676407/passing-listenum-parameters-into-custom-action-filter-in-asp-net-mvc3)中，我学习了如何在调用 Action 时初始化过滤器参数，但正如您所见，我需要一种方法让过滤器在用户退出视图时获取列表，而不是在操作中。

我不想使用代码隐藏，因为与 MVC 配对，这不是最佳实践，但回发也不是一种选择。

这是我到目前为止所拥有的：

```
public ActionResult ListUsers()
{
    // Create a List with user models and send it to a View,
    // which generates a WebGrid

    return View(userList);
}

public class PromoteUsersFilter : ActionFilterAttribute
{
    public int[] UsersToPromote { get; set; }
    public int[] UsersToScrewWith { get; set; }

    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        //insert promoting logic here
    }
} 
```

我相信有一种简单的方法可以做到这一点，因为大多数网站都有这种功能。任何人都可以指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:00:05.513

为什么不使用调用控制器方法的 AJAX？如果你正确地设置了你的 json，它仍然会被反序列化为一个对象。

据我所知，即使在 MVC 思维模式下也可以。如果您需要保留数据，但不更新整个页面，这是我知道的唯一方法。您甚至可以使用 AJAX 交换整个部分视图。

我认为这里常见的误解是（MVC 的）视图部分不仅仅是一页，而是实际上由多个视图组成，这些视图被粉碎到一页中。因此，单独更新其中一个视图并不会真正打破这种模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:33:18.193

绝对选择 AJAX 解决方案：

在您看来，它可能看起来像这样：

```
<div>
    <span class="cssUpvote" id="upvote"><span>
    <span class="cssDownvote" id="downvote"></span>
</div> 
```

用一些 Jquery

```
<script>
   $(document).on('click', 'upvote', function (event) {

       $.ajax({
             type: 'POST',
             url: '/Votes/Upvote',
             data: { id: companyId }
       });
   });

   $(document).on('click', 'downvote', function (event) {

       $.ajax({
             type: 'POST',
             url: '/Votes/Downvote',
             data: { id: companyId }
       });
   });
</script> 
```

然后你对控制器的操作

```
[HttpPost]
public ActionResult Upvote(int id)
{
    //Do something with the (company)id
    return Json();
}

[HttpPost]
public ActionResult Downvote(int id)
{
    //Do something with the (company)id
    return Json();
} 
```

# neo4j - 如何选择顶点共享公共属性的边？

> ID：10145096
> 
> 赞同：3
> 
> 时间：2012-04-13T16:58:06.783
> 
> 标签：neo4j, graph-databases, gremlin

我想通过比较每条边的顶点的一个属性来过滤边。这是我希望返回顶点彼此相同的所有边的 Gremlin 代码`GROUP_NAME`：

```
g.E.filter{it.outV.GROUP_NAME == it.inV.GROUP_NAME} 
```

它不返回任何结果。我错过了什么？谢谢。

更新：

这是一种处理直接比较的解决方案，但除了相等之外，我还希望能够进行不同的比较。

```
g.E.filter{it.bothV.GROUP_NAME.dedup().count() == 1}.count() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:32:44.500

我认为你的问题是你需要打破管道中的价值。有[几种方法](https://github.com/tinkerpop/gremlin/wiki/Gremlin-Methods)可以做到这一点，但我会使用`next()`.

```
g.E.filter{it.outV.name.next() == it.inV.name.next()} 
```

显然，您也可以在那里使用其他比较。

！

# javascript - Jquery手风琴默认不折叠

> ID：10145101
> 
> 赞同：21
> 
> 时间：2012-04-13T16:58:19.420
> 
> 标签：javascript, jquery, jquery-ui, twitter-bootstrap, accordion

我正在使用 bootstrap 提供的折叠插件，这是一个 jquery 简单插件

但是它默认折叠，如何修改使折叠项默认隐藏，只有当我按下标题时，项目才会折叠并显示？谢谢

[插件文档，几行，一分钟](http://twitter.github.com/bootstrap/javascript.html#collapse)

```
$(document).ready( function () {
$(".collapse").collapse()({
  toggle: false,
  show: false
  });
} ); 
```

这是html：

```
<div class="accordion-group">
            <div class="alert alert-info" data-toggle="collapse" href="#collapse1" style="margin-bottom:0px;">                     
              Collapsible #1
                  </div>   
          <div id="collapse1" class="accordion-body collapse" style="background-color:#ffffff;">
               content1
           </div>
                           <div class="alert alert-info" data-toggle="collapse" href="#collapse2" style="margin-bottom:0px;">                     
              Collapsible #2
                  </div>   
          <div id="collapse2" class="accordion-body collapse" style="background-color:#ffffff;">
               content2
           </div> 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-10-08T18:38:04.730

对于 Bootstrap 3，有些事情发生了变化。以下代码在 Bootstrap 3 中完成了您想要的功能

如果您希望面板主体默认显示：

```
<div id="collapseOne" class="panel-collapse collapse in"> 
```

如果您希望面板主体默认隐藏：

```
<div id="collapseOne" class="panel-collapse collapse"> 
```

这是一个例子：

```
<div class="bs-example">
    <div class="panel-group" id="accordion">

          <!- Repeat For Next Panel------->
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                       xxxxxxxxxxxHERE IS THE HEADER CONTENTSxxxxxxxxxxxx
                    </a>
                </h4>
           </div>
               <div id="collapseOne" class="panel-collapse collapse in">
                   <div class="panel-body">
                       xxxxxxxxxxxHERE IS THE BODY CONTENTSxxxxxxxxxxxx
                   </div>
               </div> 
         </div>
            <!- Repeat For Next Panel---(but change <div id="collapseTwo")--->

     </div>
 </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T09:42:30.720

```
<div class="accordion-group collapse">
   <div class="alert alert-info" data-toggle="collapse" href="#collapse1" style="margin-bottom:0px;">                     
          Collapsible #1
   </div>   
   <div id="collapse1" class="accordion-body collapse" style="background-color:#ffffff;">
           content1
   </div>
   <div class="alert alert-info" data-toggle="collapse" href="#collapse2" style="margin-bottom:0px;">                     
          Collapsible #2
    </div>   
    <div id="collapse2" class="accordion-body collapse" style="background-color:#ffffff;">
          content2
    </div>
</div> 
```

# php - 优化和提高这个 MYSQL 查询的性能

> ID：10145104
> 
> 赞同：-1
> 
> 时间：2012-04-13T16:58:25.427
> 
> 标签：php, mysql

```
SELECT u.id, u.honour, COUNT(*) + 1 AS rank
FROM user_info u
INNER JOIN user_info u2
  ON u.honour < u2.honour
WHERE u.id = '$id'
  AND u2.status = 'Alive'
  AND u2.rank != '14' 
```

这个查询目前完全减慢了我的服务器。它会根据您的荣誉计算出您在“user_info”表中的排名，该表将其存储在我们所有用户之外。

截图解释。

[http://cl.ly/370z0v2Y3v2X1t1r1k2A](http://cl.ly/370z0v2Y3v2X1t1r1k2A)

```
SELECT u.id, u.honour, COUNT(*)+1 as rank
FROM user_info u 
    USE INDEX (prestigeOptimiser)
INNER JOIN user_info u2 
    ON u.honour < u2.honour
WHERE u.id='3'
    AND u2.status='Alive'
    AND u2.rank!='14' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:03:43.937

首先，您应该添加一个`group by`子句，以便您的查询有意义。

其次，您应该更改状态列以保存整数以使索引更小。

第三，您应该像这样在 id 和 status 上创建一个索引：

```
alter table user_info add index idxID_Status (id, status) 
```

最后，要获得排名，您应该看看这个[答案](https://stackoverflow.com/questions/10135144/mysql-generate-a-list-of-most-popular-records/10135203#10135203)。此外，您应该添加一种对它们进行排序的方法...获得没有顺序的排名并不是真正的排名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:51:28.440

我认为负载来自您的加入条件'<'。

您可以尝试拆分查询或（或者如果您更喜欢子查询）并使用荣誉索引进行计数。

```
SELECT id, honour INTO @uid, @uhonour
FROM user_info 
WHERE id = '$id';

SELECT @uid, @uhonour, COUNT(honour) + 1 as rank
FROM user_info
WHERE status = 'Alive'
AND rank != '14'
AND @uhonour < honour; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T17:11:14.417

从解释中我们可以看出，MySQL 在这里使用了错误的索引。首先，只需删除所有索引并创建一个新索引，至少包含以下两个字段：`Id`和`Honour`. 它应该会大大提高性能。

```
ALTER TABLE user_info ADD INDEX myIndex (id, honour); 
```

# delphi - 如何在第三方 Delphi 应用程序中获取控件的属性列表和值？

> ID：10145106
> 
> 赞同：3
> 
> 时间：2012-04-13T16:58:33.243
> 
> 标签：delphi, process, rtti, testcomplete, inspection

我想获取有关第三方应用程序控件的信息，例如其属性及其值的列表：类似于 RTTI 信息，但适用于第三方 Delphi 应用程序。

我看到这是可能的。例如，TestComplete 有 ObjectSpy 窗口，它可以提供有关控件的许多有用信息，包括 RTTI 信息。如何才能做到这一点 ？

![在此处输入图像描述](../Images/0f413a4c31815200faa779796190f8c3.png)

**编辑：**解释我为什么要调查这个问题......我是 TestComplete/ [TestExecute](http://smartbear.com/products/qa-tools/automated-testing-tools/automated-testing-add-ons/test-execute)的注册用户，我喜欢......大部分。我可以克服一些小问题，但对我来说一个主要问题是他们的[许可证验证系统](http://support.smartbear.com/viewarticle/14451/)，它要求我始终拥有一台**物理**计算机（而不是虚拟机），只是为了运行许可证服务器，以便 TestExecute 可以在夜晚。由于我有基本的测试需求（比较屏幕截图并检查基本 Delphi 组件的属性），我想知道制作我自己的私有非常简单的“类似 TestExecute”的应用程序会有多难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:08:42.890

更进一步，我建议您在 SO 上找到这些相关资源

*   [编写一个非常基本的调试器](https://stackoverflow.com/questions/984031/writing-a-very-basic-debugger)（*接受的答案*及其*评论线程*都很有价值）。
*   [是否可以从一个应用程序访问内存到另一个应用程序？如何？](https://stackoverflow.com/questions/5137036/is-it-possible-to-access-memory-from-an-application-to-another-how)（摘自已接受的答案：*有可能。只需使用 Windows API 函数 WriteProcessMemory/ReadProcessMemory。传入* **进程的句柄** *和* **指向数据**的指针）。
*   [搜索另一个进程的内存](https://stackoverflow.com/questions/7692938/search-the-memory-of-another-process)（优秀的公认答案也转发给另一个有价值的资源[delphi-code-coverage](https://stackoverflow.com/questions/7692938/search-the-memory-of-another-process)由 Christer Fahlgren 和 Nick Ring 提供）。
*   [delphi中其他进程的StackWalk？](https://stackoverflow.com/questions/3760744/stackwalk-of-other-process-in-delphi)（检查 Barry Kelly 的[回答](https://stackoverflow.com/a/3761437/744588)!!!，与AsmProfiler[作者的回答](https://stackoverflow.com/a/3776886/744588)[相同](http://code.google.com/p/asmprofiler/)！！！）。

* * *

[我强烈建议您将这个名为Get Process Info with NtQueryInformationProcess](http://www.codeproject.com/Articles/19685/Get-Process-Info-with-NtQueryInformationProcess)的c++ 项目移植到 Delphi *：*使用`ReadProcessMemory`访问用于启动另一个进程的命令行的实践经验。

 ** * *

**最后编辑：**

*   [NtQuerySystemInformation](http://www.delphibasics.info/home/delphibasicsprojects/ntquerysysteminformationdelphiexample) Delphi 示例。
*   [RRUZ](https://stackoverflow.com/users/91299/rruz)对Delphi的[回答- 按照](https://stackoverflow.com/a/1575933/744588)[LU RD](https://stackoverflow.com/users/576719/lu-rd)的建议，*获取应用程序打开了哪些文件*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:08:10.380

When we want to take another application which is compiled with debug information and get stuff out of it at runtime, what we are dealing with is the problem of "how to write my own custom debugger/profiler/automated-test kernel".

TestComplete and other AutomatedQA programs contain a Debugger and Profiler Kernel which can start up, run and remotely control apps, and parse their Debug information in several formats, including the TurboDebugger TD32 information attached to these executables. Their profiling kernel also can see each object as it is created, and can iterate the RTTI-like debug information to determine that an object that was created is of a particular class type, and then see what properties exist in that object.

Now, TestComplete adds on top of the AQTime-level of stuff, the ability to introspect Window handles, and intuit from Window Handles, the Delphi class Names that are behind it. However, it's much easier for you (or me) to write a program which can tell you that the mouse is over a window handle that belongs to a `TPanel`, than to know which version of Delphi created that particular executable, what version of `TPanel` that is, then, and what properties it would contain, and to read those values back from a running program, which requires that you implement your own "debugger engine". I am not aware of any open source applications that you could even use to get a start writing your own debugger, and you certainly can't use the ones that are inside AQTime/TestComplete, or the one inside Delphi itself, in your own apps.

I could not write you a sample program to do this, but even if I could, it would require a lot of third-party library support. To see the window classes for a window handle which your mouse is over, look for how to implement something like the MS Spy++ utility.

[An easy case is if your mouse is mousing over a window inside your own application](http://delphi.about.com/od/delphitips2008/qt/find-vcl-window.htm). For that, see this about.com link, which simply uses RTTI.*

# git - git克隆错误

> ID：10145108
> 
> 赞同：0
> 
> 时间：2012-04-13T16:58:36.760
> 
> 标签：git, ssh

我正在尝试运行命令“git clone xxx.git”并显示错误：

```
ssh: connect to host port codebasehq.com 22: bad file number 
```

怎么了？我可以做什么样的测试来找出问题所在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:08:52.747

如果您在工作，可能是您的代理出错（即您没有正确设置它）。

看：

[git SSH issue bad file number](https://stackoverflow.com/questions/7144811/git-ssh-problem-bad-file-number)
and
[another SSH issue bad file number post](https://stackoverflow.com/questions/4399106/pushing-to-github-from-work-bad-file-number-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:52:39.667

我的问题的解决方案是在 CONFIG 文件夹中创建文件。ssh 内容如下：

> ```
> Host codebasehq.com
>     User git
>     Hostname ssh.codebasehq.com
>     PreferredAuthentications publickey
>     IdentityFile ~/.ssh/id_rsa
>     Port 443 
> ```

# ios - 如何在 iOS 中搜索名称列表？

> ID：10145109
> 
> 赞同：0
> 
> 时间：2012-04-13T16:58:37.853
> 
> 标签：ios, search, ios5, xcode4.2

所以基本上我想使用 UISearchBar 来搜索名称数组。在数组内部，名称具有以下格式：

[名字] ([第二名字]) [姓氏]

使用

```
 if (![string rangeOfString:seachTextPart].location == NSNotFound) 
```

我已设法搜索仅在 UISearchBar 中输入名字的名称。但是，一旦我进入一个空间，我就没有结果。

此外，我希望能够通过输入姓氏进行搜索。谁能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:08:28.280

假设您的格式如下：`name = @"[John]([James])[Smith]";`

搜索`[name rangeOfString:@"John"]`将产生找到。

搜索`[name rangeOfString:@"John "]`将产生未找到，因为`@"John "`不在*名称中*

但在这种情况下，`[name rangeOfString:@"Smith"]`就会发现。

试试这个：删除所有空格和小写字符串

```
 searchTerm = [[searchTerm stringByReplacingOccurrencesOfString:@" " withString:@""] lowercaseString];
   NSRange searchName = [[name lowercaseString] rangeOfString:searchTerm]; 
```

如果您想测试，只需执行此操作” `if (searchName == 0) //it does not match`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:42:19.417

除非他们键入“John Smith”，否则 Byte 的代码可以工作。如果你想要更健壮的东西，你可以使用`- (NSArray *)componentsSeparatedByString:(NSString *)separator`然后搜索数组中的任何字符串。所以输入“John Smith”将返回所有的 Johns 和所有的 Smiths

这里：

```
NSArray *theTerms = [searchTerm componentsSeparatedByString:@" "]; 
```

然后对所有内容运行 for 循环，`theTerms`并根据您的名称检查它们，将包含搜索词的名称添加到数组中，然后显示它们。

# shell - 用十六进制的 ASCII 码替换控制字符

> ID：10145118
> 
> 赞同：1
> 
> 时间：2012-04-13T16:59:39.117
> 
> 标签：shell, replace

我正在解析一个可能包含控制字符（ASCII 0-31）的文件。现在我想用十六进制表示的 ASCII 代码替换每个控制字符。我想到的一个相当简单的例子：

```
$ echo -e "a\011b" | sed -e 's/\o11/\\x09/g'
a\x09b 
```

这会将制表符 ( `\011`) 转换为`\x09`，因此`a<tab>b`变为`a\x09b`。

显然我可以使用 32`-e`参数，但我认为这很糟糕。有没有通用的方法呢？

顺便说一句，如果`\n`仍然是`\n`. `sed`不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:07:05.593

我会使用 Perl。请注意，选项卡实际上是 9，而不是 8 - 如果您尝试更改值，那么这是不正确的，但如果您只是编码，这应该可以解决问题：

```
echo -e "a\011b" | perl -lpe 's/[\0-\037\177]/sprintf "\\x%02x", ord $&/ge' 
```

# struts2 - jsp中比较字符串失败

> ID：10145122
> 
> 赞同：1
> 
> 时间：2012-04-13T16:59:56.343
> 
> 标签：struts2

我有一个看起来像这样的网址

....aaa=bbb&tab=秒

在jsp中我比较：

```
<s:if test="%{#parameters['tab']=='second'}"> 
```

它返回false....我可以从这里看到值'second'：

```
<s:property value="#parameters['tab']"/> 
```

但这显示错误：

```
<s:property value="%{#parameters['tab']=='second'}"/> 
```

知道为什么会这样吗？谢谢你，尤里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:18:25.350

参数返回字符串数组而不是字符串。是的，命名参数可能有多个值，例如 tab=first&tab=second，这就是为什么它是字符串数组而不是字符串的原因。

```
<s:if test="%{#parameters['tab'][0]=='second'}">

</s:if> 
```

# gwt - GWT 编辑器框架

> ID：10145124
> 
> 赞同：5
> 
> 时间：2012-04-13T16:59:59.447
> 
> 标签：gwt, editor

有没有办法获取编辑器正在编辑的代理？

正常的工作流程是：

```
 public class Class implments Editor<Proxy>{
  @Path("")
  @UiField AntoherClass subeditor;

  void someMethod(){
   Proxy proxy = request.create(Proxy.class);
   driver.save(proxy);
   driver.edit(proxy,request);
 }
} 
```

现在，如果我有同一个代理的子编辑器

```
public class AntoherClass implements Editor<Proxy>{
   someMethod(){
   // method to get the editing proxy ?
    }
 } 
```

是的，我知道我可以在创建后使用 setProxy() 将代理设置为子编辑器，但我想知道是否有类似 HasRequestContext 的东西，但用于编辑的代理。

当您在非 UI 对象中使用例如 ListEditor 时，这很有用。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T18:49:52.530

您可以通过两种方式获得对给定编辑器正在处理的对象的引用。首先，一些简单的数据和一个简单的编辑器：

```
public class MyModel {
  //sub properties...

}

public class MyModelEditor implements Editor<MyModel> {
  // subproperty editors...

} 
```

首先：我们可以选择另一个接口，而不是实现`Editor`，它也扩展了 Editor，但允许子编辑器（`LeafValueEditor`不允许子编辑器）。让我们试试`ValueAwareEditor`：

```
public class MyModelEditor2 implements ValueAwareEditor<MyModel> {
  // subproperty editors...

  // ValueAwareEditor methods:
  public void setValue(MyModel value) {
    // This will be called automatically with the current value when
    // driver.edit is called.
  }
  public void flush() {
    // If you were going to make any changes, do them here, this is called
    // when the driver flushes.
  }
  public void onPropertyChange(String... paths) {
    // Probably not needed in your case, but allows for some notification
    // when subproperties are changed - mostly used by RequestFactory so far.
  }
  public void setDelegate(EditorDelegate<MyModel> delegate) {
    // grants access to the delegate, so the property change events can 
    // be requested, among other things. Probably not needed either.
  }
} 
```

这要求您实现上述示例中的各种方法，但您感兴趣的主要方法是`setValue`. 您不需要自己调用这些，它们将由驱动程序及其代表调用。如果您计划对对象进行更改，则该`flush`方法也很好用 - 在刷新之前进行这些更改将意味着您在预期的驱动程序生命周期之外修改对象 - 不是世界末日，但以后可能会让您感到惊讶。

第二：使用`SimpleEditor`子编辑器：

```
public class MyModelEditor2 implements ValueAwareEditor<MyModel> {
  // subproperty editors...

  // one extra sub-property:
  @Path("")//bound to the MyModel itself
  SimpleEditor self = SimpleEditor.of();

  //...
} 
```

使用它，您可以调用`self.getValue()`以读出当前值是什么。

编辑：看看`AnotherEditor`你已经实现的，看起来你开始制作类似 GWT class 的东西`SimpleEditor`，尽管你可能还需要其他子编辑器：

> 现在，如果我有同一个代理的子编辑器
> 
> ```
> public class AntoherClass implements Editor<Proxy>{
>   someMethod(){  
>     // method to get the editing proxy ?
>   }
> } 
> ```

该子编辑器可以实现`ValueAwareEditor<Proxy>`而不是`Editor<Proxy>`，并保证`setValue`在编辑开始时将使用 Proxy 实例调用其方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T14:29:27.913

在您的子编辑器类中，您可以只实现另一个接口 TakesValue，您可以在 setValue 方法中获取编辑代理。

ValueAwareEditor 也可以工作，但拥有所有你并不真正需要的额外方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:31:14.123

[这是我找到的唯一解决方案](https://stackoverflow.com/questions/9789870/requestfactoryeditordriver-getting-edited-data-after-flush/9811230#9811230)。它涉及在调用驱动程序编辑之前调用上下文编辑。然后，您可以稍后操作代理。

# url - 带有问号的 url 被视为新的 http 请求？

> ID：10145127
> 
> 赞同：1
> 
> 时间：2012-04-13T17:00:09.287
> 
> 标签：url, caching, browser, httprequest, browser-cache

我通过实现缓存来优化我的网页，所以如果我不希望浏览器从缓存中获取数据，那么我将附加一个动态数字作为查询值。

例如：**google.com ?val=823746**

但是有一段时间，如果我想从缓存中获取以下 url 的数据，浏览器正在向服务器发出新的 http 请求，而不是从缓存中获取数据。那是因为 URL 中的问号吗？

**例如： http:** [//google.com](http://google.com) **？**

请提供一些参考文档链接。

提前致谢。

问候， 纳文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:25:54.687

使用适当的 HTTP 标头。搜索`pragma: no-cache`和`Expires`

浏览器可能不会缓存包含查询字符串（部分位于 之后`?`）的 URL，除非标头明确指出到期时间。

所有浏览器的缓存策略都不相同。如果您不指定适当的标题，结果可能更加不可预测。

由于查询字符串与动态生成的页面一起使用，因此即使查询字符串相同，浏览器也可能会接受该提示并触发新请求。例如，桌面浏览器可能会因谨慎而出错并触发新请求。另一方面，具有激进缓存策略的移动浏览器可能会从缓存中拉取页面。

# java - Java perl 文件删除/删除超过 n 天的文件

> ID：10145128
> 
> 赞同：2
> 
> 时间：2012-04-13T17:00:13.173
> 
> 标签：java, perl, delete-file

我正在使用 Java 6。

我正在编写一种方法，我必须删除超过 n 天的文件。这将是家政工作，按计划运行。

做这个的最好方式是什么？

1.  用Java编写方法来检查和删除文件。但我认为使用 Java 我们可以获得文件创建时间。
2.  用 perl 编写并从 Java 调用脚本。

也欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:01:48.977

你可以从java中做到这一点。无需使用 perl。

```
import java.io.File;
import java.util.Calendar;

public class DeleteOlderThan
{

    private static long daysAgo;

    private static void delete(File f) {
        if (f.isDirectory()) {
            for (File l : f.listFiles())
                delete(l);
        }
        if (f.lastModified() <= daysAgo) {
            f.delete();
        }
    }

    public static void main(String[] args)
    {
        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.DAY_OF_MONTH, -1 * new Integer(args[1]));
        daysAgo = cal.getTimeInMillis();

        delete(new File(args[0]));
    }
} 
```

运行`java DeleteOlderThan /my/path days`将递归删除路径中早于几天的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:14:43.773

我不会从 Java 调用 perl。没有意义。

如果你正在运行一个 *nix 机器，只需 cron 一个 bash 命令来执行它。

如果您使用的是 Windows，请使用 Java。这种事情的例子遍布网络。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:26:37.580

检出 Apache Commons-IO、FileUtils，尤其是 isFileOlder(File file, Date date) 方法。这是 JavaDoc 的链接：

[http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html)

有很多很棒的实用方法来处理该类中的文件。

# java - Java中的套接字...？

> ID：10145130
> 
> 赞同：1
> 
> 时间：2012-04-13T17:00:22.237
> 
> 标签：java, sockets, telnet

我需要构建一个可以通过网络接收数据并使用这些数据做一些不相关的事情的应用程序。

这是一段代码，可以清楚地说明我在做什么。

在服务器端：

```
static Socket client = null;
static ServerSocket ss = null;

if (ss != null) {
                ss.close();
            }
            ss = new ServerSocket(5513);
            isrunning = true;
            System.out.println("Waiting for client...");
            client = ss.accept();
            System.out.println("Client accepted.");
            BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream())); 
```

和客户端：

```
Socket client = null;
PrintWriter out = null;
                    try {                            
                        client = new Socket("hostname", 5513);
                        out = new PrintWriter(client.getOutputStream(), true);
    } 
```

请注意，这只是一段代码。代码中没有错误。

运行服务器端代码后，它正确地等待客户端连接。

现在问题来了。一旦我尝试从客户端连接，我就会收到“连接被拒绝”错误。

但是，我在互联网上发现了一些东西，它告诉我尝试从客户端进行远程登录。例如，让服务器端的 IP 为 192.168.1.1。因此，使用此命令后：

```
 telnet 192.168.1.1 5513 
```

我实际上与服务器建立了连接。该命令将启动一个空屏幕，并且我在命令行中手动键入的所有内容都会在按下回车后发送到服务器端（通过调试检查）。

所以，我可以手动连接到服务器端并发送一些数据，但我的代码拒绝连接。

谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:04:36.230

这是您实际使用的代码吗？

```
client = new Socket("hostname", 5513); 
```

尝试将其更改为：

```
client = new Socket("192.168.1.1", 5513); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:13:30.177

`client = new Socket("hostname", 5513);` 主机名需要代表您要连接的 IP 地址。如果您尝试连接到自己，它将是“localhost”

此外，服务器始终没有监听客户端，必须有一个`while`循环，以便服务器监听并接受连接。

```
while (true) {
   client = ss.accept();
   out = new PrintWriter(client.getOutputStream(), true);
   //You should probably assign it to a seperate thread to handle stuff for this client
} 
```

我应该解释为什么你会得到那个特定的错误。当某事说连接被拒绝时，通常意味着您要连接的 IP 地址知道您正在发送连接并阻止它，因为它没有侦听该连接。基本上，当服务器关闭时，您停止侦听客户端，因此该端口上的任何内容都会被阻止。当然，另一种情况可能是 Java 在您的防火墙上被阻止，应该为其设置例外。尽管如果您要通过 LAN 完成的工作很少出现这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:04:19.073

您实际上并没有在客户端的 Socket 对象中使用“主机名”，是吗？

它应该是 192.168.1.1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T17:06:27.637

你在 Windows 上吗？如果是这样，您是否已将 java.exe 和 javaw.exe 添加到防火墙并启用了入站和出站？并且您是否在防火墙中添加了 5513 规则？

如果是 Windows 但没有防火墙设置，那就是你的答案，打开你的防火墙。

# javascript - 如何使用 jQuery Validate 正确验证放置在多个选项卡上的 Twitter 引导表单？

> ID：10145131
> 
> 赞同：10
> 
> 时间：2012-04-13T17:00:30.053
> 
> 标签：javascript, jquery, twitter-bootstrap, tabs, jquery-validate

我在几个 Twitter 的 Bootstrap 选项卡上有一个表单：

```
<form id="personal-data" class="form-horizontal">
  <div class="tabbable">
    <ul id="tab" class="nav nav-tabs">
      <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
      <li class=""><a href="#profile" data-toggle="tab">Profile</a></li>
      <!-- ... -->
    </ul>

    <div id="myTabContent" class="tab-content">
      <div class="tab-pane fade active in" id="home">
        <fieldset>
          <div class="control-group">
            <div class="controls">
              <input type="text" id="field1">
            </div>
          </div>
        </fieldset>
      </div>
      <div class="tab-pane fade" id="profile">
        <fieldset>
          <div class="control-group">
            <div class="controls">
              <input type="text" id="field2">
            </div>
          </div>
        </fieldset>          
      </div> 
```

当我`valid`在活动选项卡上使用 jQuery validate 吃表单并且具有无效值的字段在同一个选项卡上时，验证失败（这是正确的）。但是当我在一个选项卡上并且无效值在另一个选项卡上时，验证返回`true`，这是不正确的。我该如何解决？如何在另一个选项卡上突出显示该字段？

请看[这个演示](http://jsbin.com/emozep/2)（只需按下按钮*下一步*- 它会显示错误消息，然后转到最后一个选项卡并在那里按*完成*）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T17:54:37.313

我认为您的问题在于验证仅发生在可见元素中。

阅读这个[问题](https://github.com/jzaefferer/jquery-validation/issues/279)，我们在 1.9 版中看到

> 固定 #189 - :hidden 元素现在默认被忽略

和一些评论下来的解决方案

```
$.validator.setDefaults({
    ignore: ""
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T18:42:48.513

我启用标签的解决方案

```
...
highlight: function(label) {
        $(label).closest('.control-group').addClass('error');

        $(".tab-content").find("div.tab-pane:hidden:has(div.error)").each( function(){
            var id = $(this).attr("id");
            $('#tabs a[href="#'+id+'"]').tab('show');
        });
},
... 
```

有必要添加此代码以允许通过 js 更改选项卡

```
$('a[data-toggle="tab"]').on('shown', function (e) {
  e.target // activated tab
  e.relatedTarget // previous tab
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-25T03:41:03.740

感谢您的代码，它解决了我的大部分问题，除了导航到有错误的第一个选项卡的部分。我绕过如下：

```
 var IsValid = true;

        // Validate Each Bootstrap tab
        $(".tab-content").find("div.tab-pane").each(function (index, tab) {
            var id = $(tab).attr("id");
            $('a[href="#' + id + '"]').tab('show');

            var IsTabValid = $("#SomeForm").valid();

            if (!IsTabValid) {
                IsValid = false;
            }
        });

        // Show first tab with error
        $(".tab-content").find("div.tab-pane").each(function (index, tab) {
            var id = $(tab).attr("id");
            $('a[href="#' + id + '"]').tab('show');

            var IsTabValid = $("#SomeForm").valid();

            if (!IsTabValid) {
                return false; // Break each loop
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-12T16:12:19.687

基于[@juanmanuele 的回答](https://stackoverflow.com/a/12806372/114029)，这就是我设法让它与[Bootstrap 3 选项卡](http://getbootstrap.com/javascript/#tabs)一起工作的方式：

```
if($(".tab-content").find("div.tab-pane.active:has(div.has-error)").length == 0)
{
    $(".tab-content").find("div.tab-pane:hidden:has(div.has-error)").each(function(index, tab)
    {
        var id = $(tab).attr("id");

        $('a[href="#' + id + '"]').tab('show');
    });
} 
```

将焦点放在第一个输入错误上：

```
$('a[data-toggle="tab"]').on('shown.bs.tab', function(e)
{
     e.target // activated tab

     $($(e.target).attr('href')).find("div.has-error :input:first").focus();

     //e.relatedTarget // previous tab
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T17:37:12.320

您正在使用这些 jQuery 选项卡吗？您可以停用所有其他选项卡并在每个表单上提交的数据通过验证时逐渐激活它们。在构造函数中禁用除第一个之外的所有它们，并在每次验证后启用下一个。

```
.tabs( "enable" , index ) 
```

[在这里](http://jqueryui.com/demos/tabs/)阅读更多。

您还可以将一种最终验证方法放在最后，并根据选项卡将所有内容显示出来，这样您就可以避免重新加载链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-10T18:41:39.283

不完全是 jQuery Validate 的解决方案，但您可以在表单元素上使用“无效”事件，以捕获 HTML5 验证错误，并获取焦点元素，找到相应的选项卡窗格并显示它。

我已经做到了。

```
$("form").find("input, select").on("invalid", function() {
  var id = $(this).parents(".tab-pane").attr("id");

  $("#tabs-selector ul").find("li a[href='#" + id + "']").tab("show");
}); 
```

希望这对您有所帮助。同样，这是针对 HTML5 或 jQuery Validate 触发无效事件的情况。

# c# - 如何使用指定的指数将双精度值格式化为 E 格式？

> ID：10145145
> 
> 赞同：4
> 
> 时间：2012-04-13T17:01:55.067
> 
> 标签：c#, formatting, double

假设我有两个数字，0.0001 和 0.00001。

当我尝试在 C# 中使用“e”表示法对它们进行格式化时，我得到以下信息：

```
double val = 0.0001;
Console.Out.WriteLine(val.ToString("e")) //prints 1e-4

double val2 = 0.00001;
Console.Out.WriteLine(val2.ToString("e")) //prints 1e-5 
```

但我想格式化 0.0001 和 0.00001 以显示相同的指数，如下所示：

0.0001-> 100e-6 0.00001->10e-6

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T20:48:23.297

如果你想要这个结果：

```
 1.0      = 1.00
    0.1      = 0.10
    0.01     = 0.010
    0.001    = 1.00e-3
    0.0001   = 0.10e-3
    0.00001  = 0.010e-3
    0.000001 = 1.00e-6 
```

使用此代码：

```
class Program
{
    /// <summary>
    /// Format a value using engineering notation.
    /// </summary>
    /// <example>
    ///     Format("S4",-12345678.9) = "-12.34e-6"
    ///     with 4 significant digits
    /// </example>
    /// <arg name="format">The format specifier</arg>
    /// <arg name="value">The value</arg>
    /// <returns>A string representing the value formatted according to the format specifier</returns>
    public static string Format(string format, double value)
    {
        if(format.StartsWith("S"))
        {
            string dg=format.Substring(1);
            int significant_digits;
            int.TryParse(dg, out significant_digits);
            if(significant_digits==0) significant_digits=4;
            int sign;
            double amt;
            int exponent;
            SplitEngineeringParts(value, out sign, out amt, out exponent);
            return ComposeEngrFormat(significant_digits, sign, amt, exponent);
        }
        else
        {
            return value.ToString(format);
        }
    }
    static void SplitEngineeringParts(double value,
                out int sign,
                out double new_value,
                out int exponent)
    {
        sign=Math.Sign(value);
        value=Math.Abs(value);
        if(value>0.0)
        {
            if(value>1.0)
            {
                exponent=(int)(Math.Floor(Math.Log10(value)/3.0)*3.0);
            }
            else
            {
                exponent=(int)(Math.Ceiling(Math.Log10(value)/3.0)*3.0);
            }
        }
        else
        {
            exponent=0;
        }
        new_value=value*Math.Pow(10.0, -exponent);
        if(new_value>=1e3)
        {
            new_value/=1e3;
            exponent+=3;
        }
        if(new_value<=1e-3&&new_value>0)
        {
            new_value*=1e3;
            exponent-=3;
        }
    }
    static string ComposeEngrFormat(int significant_digits, int sign, double v, int exponent)
    {
        int expsign=Math.Sign(exponent);
        exponent=Math.Abs(exponent);
        int digits=v>0?(int)Math.Log10(v)+1:0;
        int decimals=Math.Max(significant_digits-digits, 0);
        double round=Math.Pow(10, -decimals);
        digits=v>0?(int)Math.Log10(v+0.5*round)+1:0;
        decimals=Math.Max(significant_digits-digits, 0);
        string t;
        string f="0:F";
        if(exponent==0)
        {
            t=string.Format("{"+f+decimals+"}", sign*v);
        }
        else
        {
            t=string.Format("{"+f+decimals+"}e{1}", sign*v, expsign*exponent);
        }
        return t;
    }

    static void Main(string[] args)
    {
        Console.WriteLine("\t1.0      = {0}", Format("S3", 1.0));
        Console.WriteLine("\t0.1      = {0}", Format("S3", 0.1));
        Console.WriteLine("\t0.01     = {0}", Format("S3", 0.01));
        Console.WriteLine("\t0.001    = {0}", Format("S3", 0.001));
        Console.WriteLine("\t0.0001   = {0}", Format("S3", 0.0001));
        Console.WriteLine("\t0.00001  = {0}", Format("S3", 0.00001));
        Console.WriteLine("\t0.000001 = {0}", Format("S3", 0.000001));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T23:01:25.117

我想添加一种更简单的方法来做与我的其他答案相同的事情

```
/// <summary>
/// Format a number with scientific exponents and specified sigificant digits.
/// </summary>
/// <param name="x">The value to format</param>
/// <param name="significant_digits">The number of siginicant digits to show</param>
/// <returns>The fomratted string</returns>
public static string Sci(this double x, int significant_digits)
{
    //Check for special numbers and non-numbers
    if (double.IsInfinity(x)||double.IsNaN(x)||x==0)
    {
        return x.ToString();
    }
    // extract sign so we deal with positive numbers only
    int sign=Math.Sign(x);
    x=Math.Abs(x);
    // get scientific exponent, 10^3, 10^6, ...
    int sci=(int)Math.Floor(Math.Log(x, 10)/3)*3;
    // scale number to exponent found
    x=x*Math.Pow(10, -sci);
    // find number of digits to the left of the decimal
    int dg=(int)Math.Floor(Math.Log(x, 10))+1;
    // adjust decimals to display
    int decimals=Math.Min(significant_digits-dg, 15);
    // format for the decimals
    string fmt=new string('0', decimals);
    if (sci==0)
    {
        //no exponent
        return string.Format("{0}{1:0."+fmt+"}",
            sign<0?"-":string.Empty,
            Math.Round(x, decimals));
    }
    int index=sci/3+6;
    // with 10^exp format
    return string.Format("{0}{1:0."+fmt+"}e{2}",
        sign<0?"-":string.Empty,
        Math.Round(x, decimals),
        sci);
} 
```

所以测试代码

```
double x = 10000*Math.PI;
for (int i = 0; i < 12; i++)
{
    Debug.Print("{0,-25} {1,-12}", x, x.Sci(3));
    x/=10;
 } 
```

产生以下输出：

```
x                         x.Sci(3)
31415.9265358979          31.4e3      
3141.59265358979          3.14e3      
314.159265358979          314         
31.4159265358979          31.4        
3.14159265358979          3.14        
0.314159265358979         314e-3      
0.0314159265358979        31.4e-3     
0.00314159265358979       3.14e-3     
0.000314159265358979      314e-6      
3.14159265358979E-05      31.4e-6     
3.14159265358979E-06      3.14e-6     
3.14159265358979E-07      314e-9 
```

# .net - Griview 数据绑定

> ID：10145148
> 
> 赞同：0
> 
> 时间：2012-04-13T17:02:05.153
> 
> 标签：.net, xaml, data-binding, gridview, windows-runtime

我正在使用 Gridview 来显示我从 WCF 服务获得的一些事件项。我使用的代码

代码隐藏：

```
List<GroupInfoList<object>> groups = new List<GroupInfoList<object>>();
ServiceReference1.Service1Client c = new ServiceReference1.Service1Client();
List<Tag> tags=(await c.GetUserTagsAsync(u.id)).ToList();
var q = from t in tags
                orderby ((Tag)t ).tag1
                group t by ((Tag)t).tag1 into g
                select new { GroupName = g.Key, Items = g };
        foreach (var g in q)
        {
            GroupInfoList<object> info = new GroupInfoList<object>();
            info.Key = g.GroupName;
            foreach (var item in g.Items)
            {
                info.Add(item);
            }
            groups.Add(info);
        }
        cvs1.Source = groups;

public class GroupInfoList<T> : List<object>
{

    public object Key { get; set; }

    public new IEnumerator<object> GetEnumerator()
    {
        return (System.Collections.Generic.IEnumerator<object>)base.GetEnumerator();
    }
} 
```

WCF 签名：

```
List<Event> GetEventsByTag(string tag);   
List<Tag> GetUserTags(Guid uid); 
```

XAML

```
<GridView x:Name="ItemsByCategory"  VerticalAlignment="Bottom" 
                                  ItemsSource="{Binding Source={StaticResource cvs1}}"
                                  BorderBrush="Gray" BorderThickness="1">

        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>

        <GridView.ItemTemplate>
            <DataTemplate>
                <Grid HorizontalAlignment="Left" Background="White">
                    <StackPanel Orientation="Horizontal" Margin="10,10,0,0">                            
                        <Image Source="{Binding Image}" Height="60" Width="60" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <StackPanel Margin="0,0,0,0" Orientation="Vertical">
                            <TextBlock TextWrapping="Wrap" Style="{StaticResource ItemTitleStyle}"  Width="200" VerticalAlignment="Center" Text="{Binding XXXXXXXX}" 
                                       HorizontalAlignment="Left" FontFamily="Segoe UI" />
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </DataTemplate>
        </GridView.ItemTemplate>

        <GridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <Grid Background="White" Margin="0">
                            <TextBlock Text='{Binding Key}' Foreground="Gray" FontSize="25" Margin="5" />
                        </Grid>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>

                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid Orientation="Vertical"/>
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
            </GroupStyle>
        </GridView.GroupStyle>
    </GridView> 
```

问题是我不知道在 TextBlock（标有 XXX）中的数据绑定中放入什么，以便我可以将它绑定到来自我的源的每个事件的标题属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:32:00.010

终于修好了

在 C# 中，我将代码修改为这样

```
foreach (var g in q)
        {
            GroupInfoList<object> info = new GroupInfoList<object>();
            info.Key = g.GroupName;
            foreach (var item in g.Items)
            {
                foreach (var ev in item.Events)
                {
                    info.Add(ev);
                }
            }
            groups.Add(info); 
```

在 XAML 中

```
<TextBlock TextWrapping="Wrap" Style="{StaticResource ItemTitleStyle}"  Width="200" VerticalAlignment="Center" Text="{Binding title}" 
                                       HorizontalAlignment="Left" FontFamily="Segoe UI" /> 
```

# c# - 嵌套 TransactionScope 在测试中失败

> ID：10145151
> 
> 赞同：9
> 
> 时间：2012-04-13T17:02:11.817
> 
> 标签：c#, mysql, entity-framework, transactions, mstest

我正在使用 MSTest 通过 MySQL 连接器并使用 EntityFramework 4.3 对 MySQL 5.5.19 数据库运行一些自动化测试。

我正在尝试`TransactionScope`在我的数据库访问类库中使用以在需要时执行回滚。此外，在我的测试代码中，我希望`TransactionScope`在每次测试之前将数据库恢复到已知状态。我使用`TestInitialize`and`TestCleanup`方法来实现这一点。那些看起来像这样：

```
[TestInitialize()]
public void MyTestInitialize()
{
   testTransScope = new TransactionScope(TransactionScopeOption.RequiresNew);
}

[TestCleanup()]
public void MyTestCleanup()
{
   Transaction.Current.Rollback();
   testTransScope.Dispose();
} 
```

基于`TransactionScope`初始化函数中对象的构造，我相信我应该得到一个新的事务范围（不存在“环境”，所以我相信这个“​​.RequiresNew”在技术上并不重要，因为“ .Required" 会产生相同的结果。由于我没有指定超时值，它为我提供了默认超时，我理解为 60 秒。我给定的测试有足够的时间运行。

我有一个名为的函数`AddDessert(DessertBiz dessertBizObject)`，部分看起来像这样：

```
using (var transScope = new TransactionScope(TransactionScopeOption.Required))
{
   try
   {
      // ...
      context.Desserts.Add(dessert);
      context.SaveChanges();
      var dessertId = dessert.Id;
      DoOtherDessertStuff(dessertId, dessertBizObject);
      transScope.Complete();
   }
   catch (InvalidOperationException ex)
   {
      Console.WriteLine(ex.ToString());
   }
} 
```

这个函数是由我的一个测试调用的。

由于我在`TransactionScopeOption.Required`这里指定，我希望它将使用该`MyTestInitialize`函数创建的“环境”事务范围。

我的测试是为了让这个`DoOtherDessertStuff`函数失败并抛出异常，所以`transScope.Complete();`不会发生调用，并且在退出函数中的`using`块时会自动发生回滚。`AddDessert`

我在这里遇到的问题是，由于它使用在`MyTestInitialize`函数中创建的环境事务范围，我的测试`Assert`调用不会发生，因为事务范围回滚发生了 - 至少这是我认为正在发生的事情。我验证了这`Transaction.Current.TransactionInformation.Status`是**TransactionStatus.Aborted**，所以我很确定这就是正在发生的事情。

太好了，所以我想我会改变我的`AddDesert`方法，让它看起来和上面一样，除了我会嵌套一个事务范围而不是使用环境范围，我的一些`using`行看起来像这样：

```
using (var transScope = new TransactionScope(TransactionScopeOption.RequiresNew)) 
```

这里的意图是我可以嵌套这些事务范围，让我的生产代码中的回滚发生，然后仍然`Assert`在我的测试代码中检查我的 s。

但我发现我收到以下错误：

**System.IO.IOException: Unable to read data from the transport connection: 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。**

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:23:34.427

非常好的问题。当您在回滚后在测试方法中引用 datacontext 时，它将不可用。你需要压制它。您不需要指定所需的选项。这是默认选项。

测试方法：

```
 [TestMethod()]
    public void CreateTestCheckContextCorrectly()
    {
        MailJobController target = new MailJobController();

        target.AddDessert("dessert for Omer");
        //With suppress, even if you rollback ambient trans, suppress will ignore ambient trans. You need to reference new context, previous context from controller may be disposed.
        using (var suppressscope = new TransactionScope(TransactionScopeOption.Suppress))
        {
            var newdbcontextref = new DbEntities();

            int recordcount = newdbcontextref.StatusDefinitions.Where(x => x.Name == "dessert for Omer").Count();

            Assert.AreEqual(0, recordcount);
        }
    } 
```

控制器方法：

```
 public void AddDessert(string dessert)
   {
       using (var transScope = new TransactionScope())
       {
           try
           {
               // ...
               StatusDefinition statusDefinition = new StatusDefinition() {Name = dessert};
               db.StatusDefinitions.AddObject(statusDefinition);
               db.SaveChanges();
               Console.WriteLine("object id:"+statusDefinition.StatusDefinitionId);
               throw new Exception("hee hee");
               transScope.Complete();
           }
           catch (Exception ex)
           {
               Console.WriteLine(ex.ToString());
           }
       }
   } 
```

# php - 用鼠标单击并输入按钮提交表格

> ID：10145152
> 
> 赞同：1
> 
> 时间：2012-04-13T17:02:14.607
> 
> 标签：php, jquery, ajax

我也通过鼠标单击和输入提交表单。

Ajax Call 正在检查我已经在数据库中是否有任何指定。如果没有，用户可以提交表单，否则提交按钮将禁用

查询

```
function check_designation(e){

    text = $('#req1').val();
    data = "data=" + text;          
    text_length = text.length           

    if(text_length == 0)
    {
        $('#result_span').html('');
    }       

    if(text_length > 3 ){
        $.ajax({
            url: "designation_ajax.php",
            type: "POST",
            data: data,    
            cache: false,
            success: function (response) {
                if ($.trim(response) == "access") { 
                    $("#result_span").html('<div class="green">' + text + ' is available '+'</div>');
                    $('#create_desg').removeAttr('disabled');
                }
                else if ($.trim(response) == "no access") {                                                         
                    $("#result_span").html('<div class="red">' + text + ' is already in use'+'</div>'); 
                    $('#create_desg').attr('disabled','disabled');                                                      
                }

                else { 

                    alert('Sorry, unexpected error. Please try again later.');

                }
            }      
        }); 
    }
    else{
        $("#result_span").html('');     

    }

    return true;        
} 
```

HTML 表格

```
<form id="formID" class="formular" method="POST" action="" onsubmit="formSubmit()" >
  <fieldset>
    <legend>Create Desination</legend>
    <label> Designation<br clear="all" />
      <input autocomplete="off" onkeyup="check_designation(event)" value="" class="validate[required,minSize[4]] text-input float_left" type="text" name="name" id="req1" />
      <span id="result_span"></span>
    </label>
    <br clear="all" />
    <input id="create_desg" value="Submit" type="button" />
  </fieldset>
</form> 
```

问题：：：：

现在会发生什么 DISABLE 按钮不是解决方案...如果表中已经有一个 DESIGNATION .. 提交按钮将禁用，但按 ENTER 它将提交，我不想重新加载页面。当我按下 ENTER 时，AJAX 不工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T17:04:50.147

您必须从`onsubmit`处理程序返回 false 才能取消默认操作。但我可能会稍微清理一下您的代码并悄悄订阅提交事件：

```
<form id="formID" class="formular" method="POST" action="">
    <fieldset>
        <legend>Create Desination</legend>
        <label>
            Designation<br clear="all" />
            <input autocomplete="off" value="" class="validate[required,minSize[4]] text-input float_left" type="text" name="name" id="req1" />
            <span id="result_span"></span>
        </label>
        <br clear="all" />
        <input id="create_desg" value="Submit" type="button" />
    </fieldset>
</form> 
```

您会注意到我故意`onkeyup`从输入字段中删除了该事件。每次某些用户在此字段内按下某个键时，用 AJAX 请求敲击您的服务器对您的服务器没有任何好处。如果您想实现这一点，我建议您在发送 AJAX 请求之前等待一些输入累积和限制。

进而：

```
$(function() {
    $('#formID').submit(function() {
        var text = $('#req1').val();
        if(text.length == 0) {
            $('#result_span').html('');
        }       

        if(text.length > 3) {
            $.ajax({
                url: 'designation_ajax.php',
                type: 'POST',
                data: { data: text },
                cache: false,
                success: function (response) {
                    if ($.trim(response) == 'access') { 
                        $('#result_span').html('<div class="green">' + text + ' is available '+'</div>');
                        $('#create_desg').removeAttr('disabled');
                    }
                    else if ($.trim(response) == 'no access') {
                        $("#result_span").html('<div class="red">' + text + ' is already in use'+'</div>'); 
                        $('#create_desg').attr('disabled', 'disabled');
                    } else { 
                        alert('Sorry, unexpected error. Please try again later.');
                    }
                }      
            }); 
        } else {
            $('#result_span').html('');     
        }

        // return false to prevent the default action
        return false;
    });
}); 
```

此外，我会让`designation_ajax.php`脚本返回 JSON，而不是您在回调中解析`access`和修剪的一些字符串。`no access``success`

# javascript - 如何动态加载 Facebook Like 按钮？

> ID：10145158
> 
> 赞同：0
> 
> 时间：2012-04-13T17:02:50.743
> 
> 标签：javascript, facebook

我有一个从另一个页面获取内容的叠加层。此页面有一个 Facebook Like 按钮（HTML5 版本）。

在此页面上初始化 Like 按钮的最佳方式是什么？我在加载页面的脚本页面上尝试了一个简单的 FB.init() ，但这似乎不起作用。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:19:58.420

好的，明白了，这行得通：

```
FB.XFBML.parse(); 
```

# java - 如何监控线程的寿命？

> ID：10145161
> 
> 赞同：0
> 
> 时间：2012-04-13T17:03:11.130
> 
> 标签：java, multithreading

我想知道是否有一种方法可以监控线程的生命周期，但我会解释我正在做的事情的背景，所以也许有更好的方法来做到这一点。

基本上，我有 x 个线程正在处理队列并对其进行处理，如果线程获得可接受的结果，它将进入解决方案队列，否则数据将被丢弃或进一步处理。

我的问题出在我的主线程中，我有一个点赞`while(!solutions_results.isEmpty())`，它保存了数据（现在它打印到一个文件，但后来可能是数据库）。显而易见的问题是，一旦它清除了解决方案队列，它就完成并完成工作，即使其他线程仍在将数据放入队列中。

我不确定处理这个问题的最佳方法（也许有一个只保存解决方案队列的专用线程？）但我在想如果我能以某种方式监控其他线程的生命周期，那么就没有更多数据的机会进入解决方案队列。

如果有更好的方法来做到这一点，请让我知道，否则有没有办法告诉一旦其他线程完成（我不能等待执行程序在运行这个过程之前完全完成，因为它可能会变得很大并且不要希望它只是坐在内存中，理想情况下希望在它接近时处理它，但它不依赖于时间）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:08:13.450

如果您使用`ExecutorService`来运行您的线程作业，那么您可以使用该`awaitTermination()`方法来了解所有线程何时完成：

```
ExecutorService pool = Executors.newFixedThreadPool(10);
pool.submit(yourSolutionsRunnable);
pool.submit(yourSolutionsRunnable);
...
// once you've submitted your last job you can do
pool.shutdown(); 
```

然后您可以等待所有提交的作业完成：

```
pool.waitTermination(Integer.MAX_VALUE, TimeUnit.MILLISECONDS); 
```

如果您的线程在提交解决方案后需要继续运行，这将变得更加复杂。如果您编辑您的问题并使其更加明显，我将编辑我的答案。

* * *

**编辑：**

哦，我看到您想在此过程中处理一些结果，但在所有线程完成之前不要停止。

您可以使用`pool.isTerminated()`测试来告诉您是否所有工作都已完成。所以你的循环看起来像：

```
// this is the main thread so waiting for solutions in a while(true) loop is ok
while (true) {
    // are all the workers done?
    if (pool.isTerminated()) {
       // if there are results process one last time
       if (!solutions_results.isEmpty()) {
           processTheSolutions();
       }
       break;
    } else {
        if (solutions_results.isEmpty()) {
            // wait a bit to not spin, you could also use a wait/notify here
            Thread.sleep(1000);
        } else {
            processTheSolutions();
        }
    }
} 
```

**编辑：**

您还可以有两个线程池，一个用于生成解决方案，另一个用于处理。然后，您的主线程可以等待工作池清空，然后等待解决方案处理池。工作池会将解决方案（如果有）提交到解决方案池中。您可以在解决方案处理池中只有 1 个线程，或者根据需要更多。

```
ExecutorService workerPool = Executors.newFixedThreadPool(10);
final ExecutorService solutionsPool = Executors.newFixedThreadPool(1);
solutionsPool.submit(workerThatPutsSolutionsIntoSolutionsPool);
...
// once you've submitted your last worker you can do
workerPool.shutdown();

workerPool.waitTermination(Integer.MAX_VALUE, TimeUnit.MILLISECONDS);
// once the workers have finished you shutdown the solutions pool
solutionsPool.shutdown();
// and then wait for it to finish
solutionsPool.waitTermination(Integer.MAX_VALUE, TimeUnit.MILLISECONDS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:07:17.493

我对您正在处理的行为要求了解不多，但是如果您希望主线程阻塞直到所有子线程都完成，您应该查看类的`join`方法`Thread`。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join) ()

只需在主线程中运行一个循环，该循环在每个子线程上调用 join 方法，当它退出循环时，您可以确定所有线程都已完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T21:02:38.267

只需保留您的活动线程列表。如果同时添加/删除线程，您希望它同步以防止它被丢弃。或者使用 java.util.concurrent.ConcurrentLinkedQueue 之类的东西，它本身可以处理多个线程。启动时将每个线程添加到列表中。每个线程都应该在它停止之前从列表中删除自己。当列表为空时，您的所有线程都已完成。

**编辑：** 时机很重要。 **首先，**主线程必须将工作线程放入列表中。如果它们将自己放入列表中，则主线程可以在某些线程已将自己从列表中删除并且所有其他线程虽然已启动但尚未开始执行时检查列表 - 因此尚未将自己放入列表。然后它会认为一切都已完成，而实际上并非如此。 **其次，主线程必须在启动***之前*将每个工作线程放在列表中。否则，线程可能会在主线程将其添加到列表*之前*完成并尝试将自己从列表中删除。然后列表永远不会变空，程序永远不会完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T00:41:46.803

也许 java.util.concurrent.ExecutorCompletionService 在这里会很有用。

```
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import java.util.concurrent.Callable;
import java.util.concurrent.CancellationException;
import java.util.concurrent.CompletionService;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorCompletionService;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class monitor_life_of_threads
{
    /**
     * First, convert all of your threads to instances of Callable (easy to do), and have them each return an instance some class (I'm using Integer below just as 
     * an example).
     * This will help simplify things.
     */

    public static void main ( String args[] )
    {
        final monitor_life_of_threads worker = new monitor_life_of_threads();

        worker.executeCallablesAndUseResults ();

        System.exit ( 0 );
    }

    private void executeCallablesAndUseResults ()
    {
        List < Callable < Result >> list = new ArrayList <> ();
        populateInputList ( list );

        try
        {
            doWork ( list );
        }
        catch ( InterruptedException e )
        {
            e.printStackTrace ();
        }
        catch ( ExecutionException e )
        {
            e.printStackTrace ();
        }
        catch ( CancellationException e )
        {
            /*
             * Could be called if a Callable throws an InterruptedException, and if it's not caught, it can cause Future.get to hang.
             */
            e.printStackTrace ();
        }
        catch ( Exception defaultException )
        {
            defaultException.printStackTrace ();
        }
    }

    private void doWork ( Collection < Callable < Result >> callables ) throws InterruptedException, ExecutionException
    {
        ExecutorService executorService = Executors.newCachedThreadPool ();

        CompletionService < Result > ecs = new ExecutorCompletionService < > ( executorService );

        for ( Callable < Result > callable : callables )
            ecs.submit ( callable );

        for ( int i = 0, n = callables.size (); i < n; ++i )
        {
            Result r = ecs.take ().get ();
            if ( r != null )
                use ( r ); // This way you don't need a second queue.
        }

        executorService.shutdown ();

    }

    private void use ( Result result )
    {
        // Write result to database, output file, etc.

        System.out.println ( "result = " + result );
    }

    private List < Callable < Result >> populateInputList ( List < Callable < Result >> list )
    {
        list.add ( new Callable < Result > () {

            @Override
            public Result call () throws Exception
            {
                // Do some number crunching, then return a 5.
                return new Result ( 5 );
            }

        } );

        list.add ( new Callable < Result > () {

            @Override
            public Result call () throws Exception
            {
                // Do some number crunching, then return an 8.
                return new Result ( 8 );
            }

        } );

        list.add ( new Callable < Result > () {

            @Override
            public Result call () throws Exception
            {
                // Do some number crunching, but fail and so return null.
                return null;
            }

        } );

        return list;
    }
}

class Result
{
    private Integer i;

    Result ( Integer i)
    {
        this.i = i;
    }

    public String toString ()
    {
        return Integer.toString ( i );
    }
} 
```

# nunit - NUnit 控制台所需的最低依赖项是什么？

> ID：10145162
> 
> 赞同：1
> 
> 时间：2012-04-13T17:03:18.967
> 
> 标签：nunit, nunit-console

> **可能重复：**
> [OSS 项目的最小 NUnit 二进制文件](https://stackoverflow.com/questions/342128/minimum-nunit-binaries-for-an-oss-project)

我想在 TFS 2010 构建服务器上使用[此自定义 NUnit 构建活动。](http://tfsbuildextensions.codeplex.com/wikipage?title=How%20to%20integrate%20the%20nUnit%20build%20activity&referringTitle=Documentation)它以与构建服务器上的 MSTest 相同的方式运行 NUnit 测试（带有完整报告）。它需要*nunit-console.exe*在构建服务器上运行，所以我需要把它放在那里。

*nunit-console.exe*（当前版本 2.6）取决于我需要放在服务器上的最低要求文件是什么？似乎 NUnit 本身带有很多文件，如果我只想运行控制台，这些文件可能并非全部都需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:12:43.573

我从未使用过 NUnit 安装程序，因此我不知道它的功能，但如果您取消选中 NUnit 安装程序中的所有内容，似乎安装了最低限度的安装程序，在 2.6 版中评估为以下文件和文件夹。我想在我的情况下，我什至可以省略所有 **agent* 的东西，[甚至可能是*NUnit.Mocks.dll*](https://stackoverflow.com/questions/2884040/where-is-the-nunit-mocks-documentation#5180994)：

```
Logo.ico
license.txt
\bin
\bin\nunit-agent.exe.config
\bin\nunit-agent-x86.exe.config
\bin\nunit-console.exe.config
\bin\nunit-console-x86.exe.config
\bin\nunit-agent.exe
\bin\nunit-agent-x86.exe
\bin\nunit-console.exe
\bin\nunit-console-x86.exe
\bin\framework
\bin\framework\nunit.framework.dll
\bin\framework\nunit.mocks.dll
\bin\framework\nunit.framework.xml
\bin\lib
\bin\lib\nunit.core.dll
\bin\lib\nunit.core.interfaces.dll
\bin\lib\nunit.util.dll
\bin\lib\nunit-console-runner.dll 
```

# c# - 实体框架 5 枚举命名

> ID：10145165
> 
> 赞同：2
> 
> 时间：2012-04-13T17:03:31.883
> 
> 标签：c#, enums, .net-4.5, entity-framework-5

我首先使用带有迁移和代码的 EF 5。这一切都很好，但有一些问题/问题我想解决。

让我们从一个简单的例子开始。假设我有一个用户表和一个用户类型表。用户类型表是我的应用程序中的枚举/查找表。所以用户表有一个 UserTypeId 列和一个外键 ref 等到 UserType。在我的 poco 中，我有一个名为 UserType 的属性，它具有枚举类型。

要将初始值添加到 UserType 表（或稍后添加/更改值）并在初始迁移器等中创建表。我需要一个 UserType 表 poco 来表示数据库中的实际表并在地图文件中使用。我将 User poco 中的 UserType 属性映射到 UserType poco 中的 UserTypeId。所以现在我有一个用于代码优先/迁移/上下文映射等的 poco，并且我有一个枚举。两者不能有相同的名称，所以我是否有一个名为 UserType 的 poco 和枚举的其他名称，或者 UserType 的 poco 是 UserTypeTable 之类的？

然而，更重要的是，我是否遗漏了代码首先如何工作的一些关键元素？我尝试了上面的示例，运行了 Add-Migration，但它没有为枚举添加查找表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:29:21.913

如果我正确理解你的问题和你的困惑，

```
Enums support has nothing to do with lookup tables on the Db side. 
```

枚举只是允许您在类中具有 Enum-s 的属性，并且基本上被翻译为“int”-s - 所以那里没有什么其他东西。

有关更多信息，您可能想观看[Julie Lerman 关于 Enum-s 支持的视频](http://thedatafarm.com/blog/data-access/video-entity-framework-5-enums-and-moving-solution-from-ef-4-3/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:26:08.633

以我的经验，枚举对您的代码比查找类更重要，因此请给它正确的名称。我还将保持查找类与我的模型中的用户没有任何关系。如果它真的只是用于查找，那么你不需要它挂在你的用户身上。带有 a 的枚举`DescriptionAttribute`可以完成代码中的查找。

`UserTypeLookup`可能是一个好名字，因为这听起来像你将使用它的目的。然后您可以使用该类来维护表。

假设您没有首先映射 ef 代码之间的关系`UserTypeLookup`，`User`那么您唯一需要在数据库中手动创建的是表中的`UserType`列与`User`表中的 PK之间的外键关系`UserTypeLookup`。`UserTypeLookup`仍然可以是一个实体，即使您没有为它设置任何关系，EF 仍应为其生成数据库表。

# oracle - H2相当于Oracle的new_time函数

> ID：10145169
> 
> 赞同：1
> 
> 时间：2012-04-13T17:03:57.557
> 
> 标签：oracle, function, h2

有人知道如何在 H2 数据库中实现 Oracle 的[new_time函数吗？](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions092.htm)我一直在搜索，没有看到任何关于如何转换它的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T05:46:07.887

您可以创建一个[用户定义的函数](http://h2database.com/html/features.html#user_defined_functions)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T06:22:41.277

在 H2 中创建存储过程非常简单，只需创建一个静态方法即可。因此，只需将您所需的函数实现为静态方法，编译您的代码，将其放在类路径（您的应用程序或 H2）中。

# powershell - 如何使用 PowerCLI 确定 ESX 主机上是否安装了 EMC PowerPath

> ID：10145170
> 
> 赞同：0
> 
> 时间：2012-04-13T17:04:08.790
> 
> 标签：powershell, vmware, powercli, esx

TL;DR 如何使用 PowerCLI 确定 ESX 主机上是否安装了 EMC PowerPath？

我正在尝试编写一个脚本，该脚本将在将 LUN 从一个存储组移动到另一个存储组时执行主机屏蔽操作。这是为了适应由于 ESX 4.1 中的竞争条件而可能发生的 All Paths Down 错误。VMWare KB 1015084 和 1009449 中描述了这些步骤。这些步骤是为从服务控制台使用而编写的。我想避免编写 SSH 活动脚本，而是在 Powershell/PowerCLI 中完成整个操作。

在我们的环境中，我们在大多数（但不是全部）主机上使用 EMC PowerPath。仅需要在安装了 PowerPath 的主机上执行此 LUN 屏蔽，因此我正在尝试测试每个主机以确定这一点。

我一直在努力确定如何使用 PowerCLI 执行此操作。如果连接到 ESX 服务控制台，该命令`esxcfg-mpath --list-plugins`将显示是否安装了 PowerPath。在 vCenter GUI 中，可以通过以下方式确定：

`Select Host -> Configuration -> Storage Adapters -> Select Adapter -> View Devices -> Examine "Owner" column`

在 PowerCLI 中使用`get-scsilun`会返回一个对象，该对象包含除此Owner 列**之外的所有这些信息。**

我难住了。我曾希望一个`get-esxcli`对象有某种等效的方法，可能在`satp`or中`nmp`，但到目前为止我找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:40:15.223

按照建议，我将回答我自己的问题：

答案是：`$esxcli.corestorage.plugin.list()`将返回主机上安装的插件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-02T15:05:44.043

要从 PowerCLI 6.5 获取此信息，您可以使用以下命令：

```
(Get-ESXCLI -VMHost <host>).Storage.Core.Plugin.List() 
```

# jquery - 如何将fancybox滚动更改为从左到右？

> ID：10145180
> 
> 赞同：0
> 
> 时间：2012-04-13T17:05:05.403
> 
> 标签：jquery, scroll, fancybox

Fancybox 看起来很棒，但是当我单击右箭头或下箭头时，图像会从顶部掉入。我觉得这很奇怪。当我看到这样的箭头时，我将即将出现的图像想象为朝那个方向离开屏幕。当它从顶部掉下来时，我觉得很刺耳。

那么你如何让fancybox水平滚动呢？似乎几乎所有东西都有参数，但滚动方向没有。（我的 javascript 技能仅限于对其他人工作的细微调整。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:16:58.097

好的，一半的答案来了，现在是星期五晚上，我很快就要下班了，但是换个插件：

```
 changeOut: function () {

        var wrap = F.wrap,
            current = F.current,
            cleanUp = function () {
                $(this).trigger('onReset').remove();
            };

        wrap.removeClass('fancybox-opened');

        if (current.prevEffect === 'elastic') {
            if( F.coming.index < F.current.index) {
            wrap.animate({
                'opacity': 0,
                right :'+=200px'
            }, {
                duration: current.prevSpeed,
                easing: current.prevEasing,
                complete: cleanUp
            });
            }
            else {
                wrap.animate({
                'opacity': 0,
                left :'+=200px'
            }, {
                duration: current.prevSpeed,
                easing: current.prevEasing,
                complete: cleanUp
            });
            }

        } else {
            wrap.fadeOut(current.prevEffect === 'fade' ? current.prevSpeed : 0, cleanUp);
        }
    } 
```

这只是它的一半，`changeIn: function()`似乎没有`F.coming.index`，我曾经找出它的方向。

# android - SurfaceView 上的画布比视图的高度小 2dp，为什么？

> ID：10145182
> 
> 赞同：1
> 
> 时间：2012-04-13T17:05:13.517
> 
> 标签：android, surfaceview, android-canvas

我有以下设置：

`main.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainView" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:layout_margin="0dp"
    android:gravity="bottom" android:orientation="vertical"
    android:background="@color/yellow_background" android:padding="0dp">

    <!-- There are some components here, but they aren't required to reproduce the bug -->

    <SurfaceView
        android:id="@+id/player" android:focusable="false"
        android:layout_width="match_parent"
        android:layout_height="800dp" />

</LinearLayout> 
```

还有我的代码（一些位，如果您需要更多信息，请询问）：

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  // fullscreen
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

  setContentView(R.layout.main);
  surfaceView = (SurfaceView) this.findViewById(R.id.player);
  surfaceView.setDrawingCacheEnabled(false);
  surfaceHolder = surfaceView.getHolder();
  surfaceHolder.setKeepScreenOn(true);
  surfaceHolder.addCallback(this);
}

public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
  canvasWidth = width;
  canvasHeight = height;
}

// lots of code 
```

结果 ： ![带边框的图像](../Images/6746d2fd40df4952f96275dc5a28f2dd.png)

问题是：为什么`surfaceChanged`调用高度为 798 而不是 800（与 SurfaceView 的值相同）？我在第二个 SurfaceView 内获得了 2dp 边框，这非常糟糕。尝试设置填充但没有成功。[如何使surfaceview透明](https://stackoverflow.com/questions/5391089/how-to-make-surfaceview-transparent)工作提供的解决方案，但它有点hackish并且减慢了我的应用程序。

（注意：我认为[Surfaceview 中 Canvas 的尺寸与实际屏幕分辨率的对比](https://stackoverflow.com/questions/8013922/size-of-a-canvas-in-a-surfaceview-against-real-screen-resolution)并不适用于我的情况，无论如何我都在测试它）

注2：截图并没有完全反映上面的XML，它是一个500dp高度的测试，并且出现了相同的2dp边框。

环境：
- Android 模拟器（我无法访问平板电脑进行测试）；
- SDK 工具 r18/r19；
- 在 MacOS 10.7 下；
- 设备处于**肖像**模式（WXGA 分辨率，Android 3.2）。

# c# - 在c#中将字符串转换为十进制

> ID：10145186
> 
> 赞同：3
> 
> 时间：2012-04-13T17:05:38.977
> 
> 标签：c#, asp.net, visual-studio-2010, decimal

我在使用 decimal.parse 将字符串转换为十进制值时遇到一些问题。这是我的代码行：

```
fixPrice = decimal.Parse(mItemParts.Groups["price"].Value.Replace("$", "").Replace(" ", "").Replace("usd", "")); 
```

我尝试转换的值是：'$779.99'

然后一旦解析为十进制，我得到这个值：77999。

我想得到 779.99 而不是 77999。在此先感谢 Laziale

正则表达式包括："@"\[^\""]+?)\""[^~]+?\]+?src=\""(?[^\""]+?)\""[^ >]+?title=\""(?[^\""]+?)\""[^~]+?price\"">(?[^\<]+?)\<[^~] +?\(?[^\<]+?)\

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T17:12:13.770

我会使用[`Decimal.TryParse()`](http://msdn.microsoft.com/en-us/library/ew0seb73.aspx)：

```
decimal parsedDecimal = 0;
string yourCurrency = "$779.99";
bool didParse = Decimal.TryParse(yourCurrency,
                                 NumberStyles.Currency,
                                 new CultureInfo("en-US"), out parsedDecimal);

if(didParse) {
    // Parse succeeded
}
else {
    // Parse failed
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T17:09:03.780

看来您`'.'`是在组分隔符和`','`小数点分隔符的文化中运行它。要解决这个问题，请使用采用 CultureInfo 的 Parse 重载：

```
fixPrice = decimal.Parse(stringExpression, CultureInfo.InvariantCulture); 
```

还要查看[`NumberStyles`枚举](http://msdn.microsoft.com/en-us/library/system.globalization.numberstyles.aspx)，这样您就不必自己担心货币符号：

```
fixPrice = decimal.Parse(stringExpression, NumberStyles.Currency, new CultureInfo("en-US")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T17:08:48.637

传递`CultureInfo`您正在解析的文化的实例。

`CultureInfo`继承自`IFormatProvider`

**编辑：**

这是转换的示例

```
Decimal.Parse(yourValue, NumberStyles.AllowCurrencySymbol |
                         NumberStyles.AllowDecimalPoint   |
                         NumberStyles.AllowThousands,
              CultureInfo.InvariantCulture); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T17:15:22.340

这对我有用：

```
string decStr = "$779.99";
CultureInfo ci = new CultureInfo("en-US");
decimal fixPrice = decimal.Parse(decStr, NumberStyles.Currency, ci); 
```

# delphi - Delphi - E2010 不兼容的类型：'Integer' 和 'Char' - 任何想法

> ID：10145187
> 
> 赞同：1
> 
> 时间：2012-04-13T17:05:42.860
> 
> 标签：delphi, delphi-2007

我的任务是将旧版 Delphi 应用程序移植到 C# .Net。最初的 delphi 开发人员在我被录用前几个月就离开了。我收到：

> E2010 不兼容的类型：“整数”和“字符”错误

对于以下方法。我正在尝试在 Delphi 2007 IDE 中编译应用程序，我被告知原始应用程序是 Delphi 4 或 5，如果有帮助的话。我明白错误告诉我什么，但我不明白为什么\如何将它应用于下面的代码片段。任何帮助\方向将不胜感激。

在此先感谢 - 不确定我是否在代码上完成了它。

上定义：

```
Upper: array[1..256] of Char =
(#$00,#$01,#$02,#$03,#$04,#$05,#$06,#$07,#$08,#$09,#$0A,#$0B,#$0C,#$0D,#$0E,#$0F,
 #$10,#$11,#$12,#$13,#$14,#$15,#$16,#$17,#$18,#$19,#$1A,#$1B,#$1C,#$1D,#$1E,#$1F,
 #$20,#$21,#$22,#$23,#$24,#$25,#$26,#$27,#$28,#$29,#$2A,#$2B,#$2C,#$2D,#$2E,#$2F,
 #$30,#$31,#$32,#$33,#$34,#$35,#$36,#$37,#$38,#$39,#$3A,#$3B,#$3C,#$3D,#$3E,#$3F,
 #$40,#$41,#$42,#$43,#$44,#$45,#$46,#$47,#$48,#$49,#$4A,#$4B,#$4C,#$4D,#$4E,#$4F,
 #$50,#$51,#$52,#$53,#$54,#$55,#$56,#$57,#$58,#$59,#$5A,#$5B,#$5C,#$5D,#$5E,#$5F,
 #$60,#$41,#$42,#$43,#$44,#$45,#$46,#$47,#$48,#$49,#$4A,#$4B,#$4C,#$4D,#$4E,#$4F,
 #$50,#$51,#$52,#$53,#$54,#$55,#$56,#$57,#$58,#$59,#$5A,#$7B,#$7C,#$7D,#$7E,#$7F,
 #$80,#$81,#$82,#$83,#$84,#$85,#$86,#$87,#$88,#$89,#$8A,#$8B,#$8C,#$8D,#$8E,#$8F,
 #$90,#$91,#$92,#$93,#$94,#$95,#$96,#$97,#$98,#$99,#$9A,#$9B,#$9C,#$9D,#$9E,#$9F,
 #$A0,#$A1,#$A2,#$A3,#$A4,#$A5,#$A6,#$A7,#$A8,#$A9,#$AA,#$AB,#$AC,#$AD,#$AE,#$AF,
 #$B0,#$B1,#$B2,#$B3,#$B4,#$B5,#$B6,#$B7,#$B8,#$B9,#$BA,#$BB,#$BC,#$BD,#$BE,#$BF,
 #$C0,#$C1,#$C2,#$C3,#$C4,#$C5,#$C6,#$C7,#$C8,#$C9,#$CA,#$CB,#$CC,#$CD,#$CE,#$CF,
 #$D0,#$D1,#$D2,#$D3,#$D4,#$D5,#$D6,#$D7,#$D8,#$D9,#$DA,#$DB,#$DC,#$DD,#$DE,#$DF,
 #$E0,#$E1,#$E2,#$E3,#$E4,#$E5,#$E6,#$E7,#$E8,#$E9,#$EA,#$EB,#$EC,#$ED,#$EE,#$EF,
 #$F0,#$F1,#$F2,#$F3,#$F4,#$F5,#$F6,#$F7,#$F8,#$F9,#$FA,#$FB,#$FC,#$FD,#$FE,#$FF);

function StrIComp_JOH_PAS_1(const Str1, Str2: PChar): Integer;
var
  Ch1, Ch2 : Char;
  Offset   : Integer;
  PStr     : PChar;
begin;
  PStr   := Str1;
  Offset := Str2 - PStr;
  repeat
    Ch1 := Upper[PStr^];
    Ch2 := Upper[PStr[Offset]];
    if (Ch1 = #0) or (Ch1 <> Ch2) then
      Break;
     Inc(PStr);
  until False;
  Result := Integer(Ch1) - Integer(Ch2);
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:45:17.243

您的代码对`Upper`常量进行了不正确的修改。它应该是：

```
Upper: array[Char] of Char = .... 
```

当然，更好的办法是简单地将这个例程扔掉，并在单元[`StrIComp`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.StrIComp)中使用 Delphi 附带的版本。`SysUtils`当简单地删除代码会导致程序正确时，解决这个问题似乎没有什么意义。

* * *

由于您要将其移植到 C#，因此您可以简单地使用[`String.Compare`](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)并传递`true`给`ignoreCase`参数。

[感谢@Ulrich 认识到此代码源自 FastCode 项目。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:25:54.427

您的 pascal 模块中是否有**const Upper定义？**如果没有，请从[这里获取](http://code.google.com/p/cnpack/source/browse/trunk/cnwizards/Source/ThirdParty/FastCode/FastcodeStrICompUnit.pas?r=425)

# android - Android - 如何动态更改首选项活动中的文本？

> ID：10145190
> 
> 赞同：12
> 
> 时间：2012-04-13T17:05:52.050
> 
> 标签：android, android-activity, settings, android-preferences

各位程序员，您好，我对 Preferences 活动有一点问题。

[http://developer.android.com/reference/android/preference/PreferenceActivity.html](http://developer.android.com/reference/android/preference/PreferenceActivity.html)

我只有一个偏好类别和一个 listPreference：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<PreferenceCategory android:title="@string/basic_settings" >
    <ListPreference
        android:defaultValue="70"
        android:entries="@array/listArray"
        android:entryValues="@array/listValues"
        android:key="updates_interval"
        android:persistent="true"
        android:summary="@string/SOME_SUMMARY"
        android:title="@string/SOME_TITLE" />
</PreferenceCategory> 
```

我需要将选定的值（默认值或用户定义的值）写在 listPreference 的摘要中，例如：我们将至少有 70 个字符。

我怎样才能从代码中做到这一点？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-13T17:29:15.423

试试这样。。

```
 Preference customPref = (Preference) findPreference("updates_interval");<-- your preferences key
 customPref.setSummary("desired string"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:31:48.257

这是一个简短的例子：

```
Preference etp = (Preference) findPreference("the_pref_key");
etp.setSummary("New summary"); 
```

这要求您从 PreferenceActivity 或 PreferenceFragment 显示您的偏好，因为 findPreference() 是这些类的方法。你很可能已经这样做了。

要在用户每次更改实际偏好时更改摘要，请使用[OnPreferenceChangeListener](http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html)并检查回调中的相关键是否更改。更改后，只需像上面一样编辑摘要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:30:49.650

您可以创建 ListPreference 的子类，在其中设置[OnPreferenceChangedListener](http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html)，您可以从中访问新值，并在 ListPreference 上设置文本。我认为ListPreference 上的[setSummary()](http://developer.android.com/reference/android/preference/ListPreference.html#setSummary%28java.lang.CharSequence%29)函数将更新首选项名称下的文本。如果这不起作用，您还可以覆盖 getView() 以实现您自己的自定义视图，以便您可以直接在其上设置文本的首选项。

# apache-flex - 在 Flex 4.6 中的 ActionScript 中动态创建 TextInput

> ID：10145196
> 
> 赞同：0
> 
> 时间：2012-04-13T17:06:33.973
> 
> 标签：apache-flex, actionscript, textinput

这可能已经回答了。

有谁知道如何在 Adob​​e Flex 4.6 的 ActionScript 中添加多个 TextInput 组件？理想情况下，我喜欢这个功能在按下按钮时出现在一个函数中。

我尝试了几个已发布但无法呈现的示例。例如：

```
protected function bTest_clickHandler(event:MouseEvent):void
{
   var tf:TextInput = new TextInput(); 
   var label:Label = new Label(); 
   var binding:ChangeWatcher = BindingUtils.bindProperty(label, "text", tf, "text"); 

   var hbox:HBox = new HBox(); 
   hbox.addChild(tf); 
   hbox.addChild(label); 
   addChild(hbox); 
} 
```

目标：在容器中创建多个 TextInput 组件，而无需在我的 mxlm 正文中物理创建它们，以使其看起来是不同实例的各种大小的 mxn 网格。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:13:30.450

在标签、textInput 和 hbox 上设置 height/width 或 percentHeight/percentWidth... 或为文本属性分配值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:55:22.250

var textInp:TextInput = new TextInput();

Agroup.addElement(textInp);

# mysql - mysql中求和的总和

> ID：10145197
> 
> 赞同：0
> 
> 时间：2012-04-13T17:06:38.450
> 
> 标签：mysql, union

我有以下查询，在顶部选择语句中`(sum(l.app_ln_amnt)/count(l.app_ln_amnt))`运行良好，但在联合中我想`(sum(l.app_ln_amnt)/count(l.app_ln_amnt))`从顶部选择语句中找到查询的总数但是我的解决方案似乎关闭了我需要一些帮助

```
select 
(sum(l.app_ln_amnt)/count(l.app_ln_amnt)),

from receipt_history l

     UNION

select 
SUM(sum(l.app_ln_amnt)/count(l.app_ln_amnt)),

from receipt_history l 
```

这是初始表的样子

```
id  app_ln_amnt
1   2
1   2
1   2
1   2
2   5
3   7
4   9

id  app_ln_amnt
1   2
2   5
3   7
4   9
total   23 
```

现在我的桌子看起来像第二张，但`total is 29`我试图让它成为`23`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:29:52.773

您可以使用子查询而不是联合

```
SELECT SUM(Value) FROM 
  (select 
  (sum(l.app_ln_amnt)/count(l.app_ln_amnt)) AS value
  from receipt_history l ) t 
```

# javascript - 如何将变量附加到使用 Jquery 存储为字符串的 HTML 元素？

> ID：10145198
> 
> 赞同：0
> 
> 时间：2012-04-13T17:06:44.733
> 
> 标签：javascript, jquery, append

我有一个空的控制组，我想用按钮填充它。无法让它工作。

这是对照组：

```
var $wrap = '<div class="wrap"><div data-role="controlgroup"></div></div>'; 
```

这是按钮：

```
var $btn = '<a href="#some" data-role="button">Click</a>' 
```

我想做这样的事情：

```
$wrap.append( $btn ); 
```

但它不起作用。

有人可以告诉我我做错了什么吗？我认为 $wrap 只是一个字符串，所以我不能调用*append*。如果是这样，我该如何正确地做到这一点？

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:08:52.183

```
var $wrap = $('<div class="wrap"><div data-role="controlgroup"></div></div>');
var $btn = $('<a href="#some" data-role="button">Click</a>');
$wrap.append( $btn ); 
```

可能有五十种方法，比如：

```
var $wrap = $('<div class="wrap"><div data-role="controlgroup"></div></div>'),
    $btn = '<a href="#some" data-role="button">Click</a>';

$wrap.children().append( $btn ); 
```

或者：

```
var $wrap = $('<div class="wrap"><div data-role="controlgroup"></div></div>'),
    $btn = '<a href="#some" data-role="button">Click</a>';

$('[data-role="controlgroup"]', $wrap).append( $btn ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:08:45.577

你只是有字符串，你需要一个 jquery 对象来调用 append：

```
var $wrap = $('<div class="wrap"><div data-role="controlgroup"></div></div>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T17:09:59.443

嗯，首先，这些是字符串。您需要使用`$`.

```
var $wrap = $('<div class="wrap"><div data-role="controlgroup"></div></div>');
var $btn = $('<a href="#some" data-role="button">Click</a>'); 
```

现在要追加`$btn`到`$wrap`，您可以找到内部 div （这是您要追加元素的位置）并使用`.append`：

```
$wrap.find("div").append($btn); 
```

[**活生生的例子**](http://jsfiddle.net/42AXy/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T17:11:00.783

我认为 $wrap 只是一个字符串，所以我不能调用 append 。

是的。

你可以试试：

```
var $wrap = $('<div class="wrap"><div data-role="controlgroup"></div></div>');
var $btn = '<a href="#some" data-role="button">Click</a>';
$wrap.append( $btn ); 
```

# python - 使用 xlwt 将混合数据从 .csv 文件写入 .xls - 如何格式化数字？

> ID：10145199
> 
> 赞同：4
> 
> 时间：2012-04-13T17:06:49.910
> 
> 标签：python, csv, xlwt

我正在尝试从 csv 读取一堆混合数据（字符串和数字）并将所有内容写入 excel 文件。不幸的是，一切都写成文本，因为 csv 文本是唯一的格式。我怎样才能以正确的格式写入数字数据？这是我到目前为止的代码...

```
import xlwt, csv

wb = xlwt.Workbook()
ws = wb.add_sheet('testSheet')

sourceCSV = csv.reader(open('sourceCSVfile.csv', 'rb'), delimiter=",")

for rowi, row in enumerate(sourceCSV):
  for coli, value in enumerate(row):
      ws.write(rowi, coli, value)
wb.save('TEST.xls') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T00:20:59.160

不知何故，根据您的数据，您需要能够确定每个字段中的数据类型。

如果您的数据在每一列中具有相同的数据类型，则可以执行以下操作：

```
# 5 columns: text, integer, float, float, date in YYYY-MM-DD format
import datetime
def date_conv(s):
    return datetime.datetime.strptime(s, "%Y-%m-%d")
converters = (str.strip, int, float, float, date_conv)
# use int if you want to check that it is an int.
# xlwt will convert the int to float anyway.
...
for rowi, row in enumerate(sourceCSV):
  for coli, value in enumerate(row):
      ws.write(rowi, coli, converters[coli](value)) 
```

其他可能性：

(1) 吸着看的方法：

```
def float_if_possible(strg):
    try:
        return float(strg)
    except ValueError:
        return strg
...
ws.write(rowi, coli, float_if_possible(value)) 
```

(2)分析方法：

您需要仔细编写挑剔的正则表达式来分析您的文本，并且您需要以适当的顺序应用它们。

对于浮点数，请考虑：

```
float_const_pattern = r"""
    [+-]? # optional sign
    (?:
        (?: \d* \. \d+ ) # .1 .12 .123 etc 9.1 etc 98.1 etc
        |
        (?: \d+ \. ) # 1\. 12\. 123\. etc
        |
        (?: \d+ ) # 1 12 123 etc
    )
    # followed by optional exponent part
    (?: [Ee] [+-]? \d+ ) ?
    # followed by end of string
    \Z # don't use $
    """ 
```

连同国旗`re.VERBOSE`。特别注意“字符串结尾”检查。如果您不这样做，给定 input `123qwerty`，正则表达式将匹配`123`并且`float("123qwerty")`调用将引发异常。

# mongodb - MongoDB“点不在 [ -180, 180 ) 的区间内”

> ID：10145200
> 
> 赞同：0
> 
> 时间：2012-04-13T17:06:54.563
> 
> 标签：mongodb, geospatial

我有如下对象：

```
{
    "_id" : ObjectId("4f7f0d64e4b0db1e18790f10"),
    "location" : [
        0.674081,
        23.473
    ],
    "name" : "Item Name"
} 
```

如果我尝试在位置字段上创建 2D 索引，则会收到错误消息：

```
> db.Place.ensureIndex({location:"2d"});
point not in interval of [ -180, 180 ) 
```

我尝试查找超出范围的文档，但这不会返回任何结果：

```
> db.Place.find({"location.0":{"$lte":-180, "$gte":180}});
> db.Place.find({"location.1":{"$lte":-180, "$gte":180}}); 
```

我还尝试了以下查询以确保：

```
> db.Place.find({"location":{"$size":0}}).count();
0
> db.Place.find({"location":{"$size":1}}).count();
0
> db.Place.find({"location":{"$size":2}}).count();
363485
> db.Place.count();
363485 
```

我可以使用哪些其他方法来查找错误文档？

有关信息，我在 32 位 Linux 上使用 MongoDB 版本 2.0.2（是的，我知道这对于产品来说还不够好）。这些文档由 Java 文档导入，其中位置对象仅表示为`double`原语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:16:15.387

您的查询不太正确。你需要：

> db.Place.find({"location": {"$lte":-180 } })

和

> db.Place.find({"location": {"$gte":180 } })

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:42:05.120

我遇到了类似的问题，我已经能够确定当 lat/lon 之一恰好等于 -180 或 180 时， ensureIndex 中断。如果你想解决这个问题，请寻找这些情况，否则它看起来有一个修复：[https ://github.com/mongodb/mongo/commit/86b5b89c2785f3f45ad2674f48fe3189c137904c](https://github.com/mongodb/mongo/commit/86b5b89c2785f3f45ad2674f48fe3189c137904c)

# python - SQL Server 2005 在 30 秒后终止连接

> ID：10145201
> 
> 赞同：0
> 
> 时间：2012-04-13T17:06:55.687
> 
> 标签：python, sql, sql-server, sql-server-2005, oracle-sqldeveloper

我们将 SQL Server 2005 数据库移至新的物理服务器，从那时起，它一直在终止任何持续 30 秒的连接。

我们在 Oracle SQL 开发人员中遇到了这种情况，并且在使用 pyodbc 从 python 连接之前一切正常，现在 python 在 30 秒后返回此错误：

('08S01', '[08S01] [FreeTDS][SQL Server]从服务器读取失败 (20004) (SQLExecDirectW)')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:59:09.603

首先，您需要配置 sql server 以查看是否正在发生任何活动。寻找运行缓慢的查询、CPU 和内存瓶颈。

您也可以像这样在查询字符串中包含超时：“Data Source=(local);Initial Catalog=AdventureWorks;Integrated Security=SSPI;Connection Timeout=30”; 并根据需要扩展该号码。

但请记住，“超时”并不意味着连接时间，这只是在尝试建立连接之前等待的时间，然后终止。

我认为这个问题更多地与数据库性能或网络问题有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:14:40.450

也许检查您的远程查询超时？它应该默认为 600，但也许它设置为 30？[信息在这里](http://msdn.microsoft.com/en-us/library/ms189040%28v=sql.90%29.aspx)

# ruby-on-rails - 无法使用 Mongoid 和 Geocoder 对嵌入式文档进行地理查询

> ID：10145206
> 
> 赞同：1
> 
> 时间：2012-04-13T17:07:10.457
> 
> 标签：ruby-on-rails, ruby, mongoid, rails-geocoder

（Ruby 1.9.3、MongoDB 2.0.4、Rails 3.2、Mongoid 2.4、Geocoder 1.1.1）

我有以下型号：

```
class Company
  include Mongoid::Document

  embeds_one :office

  index [[ "office.coordinates", Mongo::GEO2D ]]
end

class Office
  include Mongoid::Document
  include Geocoder::Model::Mongoid

  geocoded_by :address

  field :city,        :type => String
  field :state,       :type => String
  field :coordinates, :type => Array

  embedded_in :company

  after_validation :geocode

  def address
    "#{city}, #{state}"
  end
end 
```

我在控制台中这样做：

```
> c = Company.new
 => #<Company _id: 4f885aa56d20f03898000003, _type: nil> 
> c.office = Office.new(:city => "San Francisco", :state => "CA")
 => #<Office _id: 4f885ab66d20f03898000004, _type: nil, city: "San Francisco", state: "CA", coordinates: nil> 
> c.save
 => true 
```

到目前为止，一切都很好。但后来我尝试通过对其嵌入式文档（办公室）进行地理查询来检索公司：

```
> Company.where(:office.near => Company.first.office.to_coordinates).first
Mongo::OperationFailure: can't find special index: 2d for: { office: { $near: [ -122.4194155, 37.7749295 ] } }
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/mongo-1.6.2/lib/mongo/cursor.rb:144:in `next'
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/mongo-1.6.2/lib/mongo/collection.rb:288:in `find_one'
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/mongoid-2.4.8/lib/mongoid/collections/master.rb:25:in `block in find_one'
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/mongoid-2.4.8/lib/mongoid/collections/retry.rb:29:in `retry_on_connection_failure'
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/mongoid-2.4.8/lib/mongoid/collections/master.rb:24:in `find_one'
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/mongoid-2.4.8/lib/mongoid/collection.rb:60:in `find_one'
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/mongoid-2.4.8/lib/mongoid/contexts/mongo.rb:203:in `first'
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/mongoid-2.4.8/lib/mongoid/criteria.rb:45:in `first'
    from (irb):2
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
    from /Users/raphael/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我究竟做错了什么？我跑了`rake db:mongoid:create_indexes`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T17:53:06.143

您需要针对嵌入字段运行查询：

```
Company.where(:'office.coordinates'.near => Company.first.office.to_coordinates).first 
```

如果您想利用`near`由 geocoder gem 创建的范围`Office`，您可以执行以下操作：

```
# in Company.rb
self.near(office, radius = 20, conditions = {})
  self.where(conditions).tap do |criteria|
    near_criteria = Office.scopes[:near].conditions.call(office, radius)

    criteria.selector[:'office.coordinates'] = near_criteria.selector[:coordinates]
  end
end 
```

这创建`Company#near`了一个`Office`对象。它将`Office#near`作用域创建的查询注入到公司的查询中。

# linux - 在 Bash 中捕获警报错误

> ID：10145208
> 
> 赞同：1
> 
> 时间：2012-04-13T17:07:12.690
> 
> 标签：linux, bash, shell

我的外壳脚本：

```
sudo /etc/init.d/haproxy reload
if [ $? -ne 0 ]
    then
        echo "Fail to reload services."
fi 
```

服务重启警报时无法捕获错误，例如：

```
[ALERT] 104/005618 (6110) : Starting frontend tinasay: cannot bind socket 
```

我怎样才能抓住那个警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:44:02.577

错误消息通常写入文件描述符 2，即标准错误。它们可以像这样重定向：

```
sudo /etc/init.d/haproxy reload 2> /some/log/file.log 
```

这将覆盖文件，并且任何现有内容都将丢失。相反，您还可以在附加模式下重定向错误输出：

```
sudo /etc/init.d/haproxy reload 2>> /some/log/file.log 
```

这将在旧消息之后附加新消息。

你也不需要`$?`像你一样检查，实际上它是一个经典的无用用途。改为这样做：

```
if ! sudo /etc/init.d/haproxy reload 2>> /some/log/file.log ; then
    echo "Fail to reload services."
fi 
```

如果返回代码不为 0，则将打印“失败”消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:10:43.997

您可以重定向标准错误并使用正则表达式：

```
output=$(sudo /etc/init.d/haproxy reload 2>&1)
if [[ $output =~ "ALERT" ]]; then
  echo "Fail to reload services."
fi 
```

# php - 需要 PHP IF 条件建议

> ID：10145213
> 
> 赞同：1
> 
> 时间：2012-04-13T17:07:19.163
> 
> 标签：php, syntax

我正在使用电子邮件作为用户名登录正在开发的网站，现在如果用户从个人资料页面更新他们的电子邮件，我如何确保我的电子邮件检查语句不会捕获已在数据库中注册的用户电子邮件。

**这页纸** ![轮廓](../Images/237496064cdac64813a76da8c0f42d56.png)

```
 /* Now we will store the values submitted by form in variable */
           $fullname=$_POST['fullname'];
           $dob=$_POST['dob'];
           $address=$_POST['address'];
           $myusername=$_POST['myusername'];           
           $telephone=$_POST['telephone'];

$queryuser=mysql_query("SELECT * FROM customer WHERE email='$myusername' ");
$checkuser=mysql_num_rows($queryuser);

if($checkuser != 0) 
{ 
$Merr[]='&raquo; Sorry this email is already registered!';
}
else {$insert_user=mysql_query("UPDATE CUSTOMER SET SYNTAX HERE"); 
```

现在这些是有问题的领域；

> （姓名、出生日期、地址、电子邮件、电话）值（'$fullname'、'$dob'、'$address'、'$myusername'、'$telephone'）

正如您所看到的，如果用户更改了登录电子邮件，那么语法会检查针对数据库提交的电子邮件，但是如果用户保持电子邮件不变，他将收到错误，因为它是在数据库中找到的。

我在想类似的东西；

```
if($checkuser != 0) {
  if($myusername == $_POST['myusername'])
   (...dont show error.) 
```

但我的php技能有限。谁能给点建议，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:17:11.480

```
/* Now we will store the values submitted by form in variable */
$myusername=$_POST['myusername'];           

$queryuser=mysql_query("SELECT username FROM customer WHERE email='$myusername' ");
$checkuser=mysql_num_rows($queryuser);

/*Mysql_fetch_row will select the first row from the query and put it into a 
multidimensional array. As you only want 1 e-mail associated with one user the query
should only ever select one row anyway.  */
$row = mysql_fetch_row($queryuser);

if($checkuser != 0) 
{ 
      if($row[0] != $SESSION['username'])
      {
      //ERROR
      }

}
else {
//Update details
} 
```

这样，您只需提交电子邮件以及任何其他输入，如果电子邮件没有更改，您将不需要做任何事情。

您还说过您发布了登录用户的用户名。我想你实际上会想要使用[会话](http://www.tizag.com/phpT/phpsessions.php)来做到这一点。

并且不要忘记[转义](http://php.net/manual/en/function.mysql-real-escape-string.php)POST 数据以确保安全。

如果他们正在更新他们的电子邮件地址，那么 INSERT INTO 应该不是[更新声明吗？](http://www.tizag.com/sqlTutorial/sqlupdate.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:15:01.967

如果您要更新数据库，请使用 Update.. Update customers set email='$username' where email='$username'。

您不能使用相同的表格来注册和更新信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:19:15.007

您是否为用户保留了 id 之类的东西？如果是这样，您可以检查不是当前用户电子邮件地址的现有电子邮件地址。

# sql - 如何从多个表中删除数据？

> ID：10145221
> 
> 赞同：25
> 
> 时间：2012-04-13T17:07:54.237
> 
> 标签：sql, postgresql, foreign-keys, sql-delete

我有这些表：

```
事件     （evt_id、evt_code、reg_id）

幅度（mag_id，evt_id，值）

跟踪     （trace_id，pt_id）

点     （pt_id，evt_id）

```

我想从所有与`evt_id=1139`.
我该怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-13T17:11:11.373

如果您可以控制您的架构，我会让架构使用[级联删除](http://www.postgresql.org/docs/8.2/static/ddl-constraints.html)。

来自文章（为您的示例翻译的更相关的部分）

```
CREATE TABLE point
(
    pt_id integer PRIMARY KEY,
    evt_id integer REFERENCES event ON DELETE CASCADE
) 
```

如果您设置了级联，那么您只需从主事件表中删除，所有其他表将被自动清理

否则，您需要先删除所有引用，然后再删除主表。您应该在一个事务中执行此操作以保持数据一致

```
BEGIN;
DELETE FROM trace WHERE EXISTS 
    (SELECT 1 FROM point WHERE evt_id = 1139 AND trace.pt_id = point.pt_id);
DELETE FROM point where evt_id = 1139;
DELETE FROM magnitude where evt_id = 1139;
DELETE FROM event where evt_id = 1139;
COMMIT; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-13T19:31:40.347

您问题中唯一重要的元素是 deletes from the table `trace`。我想假设`trace.pt_id`是引用是安全的`point.pt_id`？

要么你定义一个[外键，`ON DELETE CASCADE`](https://www.postgresql.org/docs/current/interactive/ddl-constraints.html#DDL-CONSTRAINTS-FK)然后忘记表`trace`（正如[@kevin 已经指出的那样](https://stackoverflow.com/a/10145867/939860)），要么你必须手动处理依赖的行。

从 PostgreSQL **9.1**开始，您可以使用[**数据修改 CTE**](https://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)：

```
BEGIN;

WITH x AS (
    DELETE FROM point WHERE evt_id = 1139
    RETURNING pt_id
    )
DELETE FROM trace
USING x
WHERE trace.pt_id = x.pt_id;

DELETE FROM magnitude WHERE evt_id = 1139;

DELETE FROM event WHERE evt_id = 1139;

COMMIT; 
```

返回所有受影响的RETURNING[子句](https://www.postgresql.org/docs/current/interactive/sql-delete.html)——这些子句又用于删除所有相应的行。`DELETE FROM point``pt_id``trace`

您没有提到在您的情况下**并发**是否是一个问题。如果是这样，并且如果您想避免在删除之间的短时间窗口中出现可能的结果，其中的行`evt_id = 1139`存在于一个表中而已经从另一个表中删除，请将其全部包装到一个**事务**中。
如果这与您无关，请忽略`BEGIN`and `COMMIT`。

为避免**死锁**，请始终使用相同的删除语句序列（在所有并发事务中）。这避免了一个事务开始在一个表中删除，下一个在另一个表中开始删除，然后每个事务都将等待另一个事务的情况。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-13T17:56:40.293

如果可以将要删除的行设想为层次结构，则可以使用 ON DELETE CASCADE 子句为关系定义 FOREIGN KEY 约束。删除顶部的行将向下级联并全部删除。

[http://www.postgresql.org/docs/9.1/static/ddl-constraints.html#DDL-CONSTRAINTS-FK](http://www.postgresql.org/docs/9.1/static/ddl-constraints.html#DDL-CONSTRAINTS-FK)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-13T17:22:16.210

我假设不同表中的 id 对应并用于链接。我还假设您想删除所有跟踪点，尽管它们只是间接链接到 evt_id

您可以从所有表中删除记录，如下所示：

```
DELETE event , magnitude, trace, point
FROM event left join magnitude on event.evt_id = magnitude.evt_id
   left join point on event.evt_id = point.evt_id
       left join trace on point.pt_id = trace.trace_id
where event_id=1139 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-04-13T17:13:04.753

```
$delete =  1139;
$query = "DELETE FROM event, magnitude, point WHERE evt_id = '$delete'";
mysql_query($query, $con);
$query = "DELETE FROM trace WHERE pt_id = '$delete'"; 
```

或者只是将该语句粘贴到 .sql 文件中并运行它，或者粘贴到您的 sql 软件查询窗口中，或者将其放在 .php 文件中并在服务器上运行。

# eclipse - Visual Studio + 远程 gdb 调试

> ID：10145222
> 
> 赞同：7
> 
> 时间：2012-04-13T17:07:57.117
> 
> 标签：eclipse, visual-studio, gdb, remote-debugging

进行远程实时 gdb 调试并使用 Visual Studio 作为前端的最佳方法是什么。

就我而言：我有一个在 Linux 服务器上运行的 C++ 应用程序（为调试而编译）

1.  我可以在我的 Windows 机器上使用 Visual Studio 作为前端对 C++ 应用程序进行实时调试吗？这对于大规模应用程序 (OR) 是否可行
2.  如果以上是不可能的，我可以在我的 Windows 或不同的 linux 机器上使用 eclipse 来进行相同的远程实时调试吗
3.  还有其他更好的 IDE 选项吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T20:22:46.530

您可以使用[VisualGDB](http://visualgdb.com/)轻松完成：

1.  在 Linux 机器上构建您的应用程序并确保您可以运行它。
2.  使用 Visual Studio 在您的 Windows 机器上安装 VisualGDB。
3.  在 Linux 机器上运行 VisualGDB 构建服务器。
4.  在 Visual Studio 中，创建新项目，选择 C++->VisualGDB
5.  在向导中选择 Linux Application -> Import Existing -> Import from Remote machine
6.  选择您构建 Linux 应用程序的目录。如果它不是基于 GNU Make，还要指定构建命令行。
7.  指定是否要将 IntelliSense 目录与 Visual Studio 同步。
8.  在最后一个向导页面上指定项目的可执行名称，以便 VisualGDB 知道要调试什么。

当您按下“完成”时，向导将围绕您的 Linux 项目创建一个 Visual Studio 包装器项目，以便您可以编辑文件、构建项目并从 Visual Studio 调试它。

这里有更详细的教程：http: [//visualgdb.com/tutorials/linux/import/](http://visualgdb.com/tutorials/linux/import/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T07:38:13.043

你可以试试[WinGDB](http://www.wingdb.com/wgHome.htm)。

它是 Visual Studio 的扩展，允许使用 GDB 开发和调试程序。以下是如何[使用 WinGDB 设置远程 Linux 开发](http://www.wingdb.com/docs/pages/wg_dev_rlinux.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:21:24.293

我认为使用 Visual Studio 是不可能的。

应该可以使用 gdbserver/gdb 组合，但是在 Windows 机器上，您将需要针对 linux 的特殊 gdb 构建。我从未尝试过，但应该可以构建。如果你可以让它工作，那么你可以使用 Eclipse 或任何支持 GNU 工具的 IDE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T10:04:01.170

只是一些建议：
您可以在您的 Windows 机器上安装免费的 X 服务器，例如 Cygwin 中的 Xming 或 Xorg。然后就可以用eclipse做Linux原生调试了。只需将 Eclipse GUI 显示到 Windows 上的 X 服务器。您可以与 Windows 机器上的 GUI 交互。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-01T21:34:15.743

现在可以使用 VS2015 + GDB 扩展，在这里阅读 MS 博客文章：http: [//blogs.msdn.com/b/vcblog/archive/2015/11/18/announcing-the-vs-gdb-debugger-extension.aspx](http://blogs.msdn.com/b/vcblog/archive/2015/11/18/announcing-the-vs-gdb-debugger-extension.aspx)

# python - 熊猫：难以理解合并的工作原理

> ID：10145224
> 
> 赞同：9
> 
> 时间：2012-04-13T17:08:02.840
> 
> 标签：python, pandas

我在合并时做错了，我不明白它是什么。我已经完成了以下操作来估计一系列整数值的直方图：

```
import pandas as pnd
import numpy  as np

series = pnd.Series(np.random.poisson(5, size = 100))
tmp  = {"series" : series, "count" : np.ones(len(series))}
hist = pnd.DataFrame(tmp).groupby("series").sum()
freq = (hist / hist.sum()).rename(columns = {"count" : "freq"}) 
```

如果我打印`hist`，`freq`这就是我得到的：

```
> print hist
        count
series       
0           2
1           4
2          13
3          15
4          12
5          16
6          18
7           7
8           8
9           3
10          1
11          1

> print freq 
        freq
series      
0       0.02
1       0.04
2       0.13
3       0.15
4       0.12
5       0.16
6       0.18
7       0.07
8       0.08
9       0.03
10      0.01
11      0.01 
```

它们都被索引`"series"`但如果我尝试合并：

```
> df   = pnd.merge(freq, hist, on = "series") 
```

我得到一个`KeyError: 'no item named series'`例外。如果我省略`on = "series"`我会得到一个`IndexError: list index out of range`例外。

我不明白我做错了什么。可能“系列”是索引而不是列，所以我必须以不同的方式做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T19:22:11.420

来自[文档](http://pandas.sourceforge.net/merging.html#database-style-dataframe-joining-merging)：

> on：要加入的列（名称）。必须在左右 DataFrame 对象中都找到。如果未通过且left_index和right_index为False，则DataFrame中列的交集将被推断为连接键

我不知道为什么这不在文档字符串中，但它解释了你的问题。

你可以给`left_index`和`right_index`：

```
In : pnd.merge(freq, hist, right_index=True, left_index=True)
Out:
        freq  count
series
0       0.01      1
1       0.04      4
2       0.14     14
3       0.12     12
4       0.21     21
5       0.14     14
6       0.17     17
7       0.07      7
8       0.05      5
9       0.01      1
10      0.01      1
11      0.03      3 
```

或者您可以将索引设为一列并使用`on`：

```
In : freq2 = freq.reset_index()

In : hist2 = hist.reset_index()

In : pnd.merge(freq2, hist2, on='series')
Out:
    series  freq  count
0        0  0.01      1
1        1  0.04      4
2        2  0.14     14
3        3  0.12     12
4        4  0.21     21
5        5  0.14     14
6        6  0.17     17
7        7  0.07      7
8        8  0.05      5
9        9  0.01      1
10      10  0.01      1
11      11  0.03      3 
```

或者更简单地说，`DataFrame`有[`join`](http://pandas.sourceforge.net/generated/pandas.DataFrame.join.html)方法可以完全满足您的需求：

```
In : freq.join(hist)
Out:
        freq  count
series
0       0.01      1
1       0.04      4
2       0.14     14
3       0.12     12
4       0.21     21
5       0.14     14
6       0.17     17
7       0.07      7
8       0.05      5
9       0.01      1
10      0.01      1
11      0.03      3 
```

# ios - iOS 上是否有 Web 服务客户端代码生成器？

> ID：10145233
> 
> 赞同：0
> 
> 时间：2012-04-13T17:08:49.400
> 
> 标签：ios

我将开发一些需要调用由 c# 实现的远程 Web 服务的功能，我已经用谷歌搜索了它，加入 wsdl 内容看起来像：

```
NSString *requestBody = @"<wsdl:definitions xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" xmlns:tm=\"http://microsoft.com/wsdl/mime/textMatching/\"; 
```

是否有工具可以生成用于调用指定 Web 服务（如 asp.net 或 java）的类？

例如在 c# open visual studio terminal 中执行这个：

```
wsdl http://google.com/service/weather?wsdl 
```

有人知道吗？

它对加入混乱的字符串感到厌恶

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:19:48.693

您可以在此处找到用于将 WSDL 翻译成多种语言的代码生成器：http: [//sudzc.com/](http://sudzc.com/)

# android - HTML5 android 应用程序中的垃圾收集？

> ID：10145238
> 
> 赞同：2
> 
> 时间：2012-04-13T17:09:33.697
> 
> 标签：android, html

是否有任何类型的垃圾收集来清理 HTML5 应用程序上未使用的资源？

我在 Android 上有一个在 WebView 内运行的 HTML5 应用程序。它使用了大量的图像，并且在一些安卓设备中它占用了太多的内存，以至于设备用完了。

调用 System.gc 会有用还是没有任何意义？

谢谢

# c# - 同步属于不同网络的两个数据库

> ID：10145239
> 
> 赞同：0
> 
> 时间：2012-04-13T17:09:36.543
> 
> 标签：c#, .net, synchronization, sync

我是 to Sync Framework 的新手，我已经完成了基本的原型设计，一切正常。但是，我有一个场景，我需要同步属于不同网络的两个数据库。我通过浏览几个网站完成了我的教育工作，大多数讨论都是关于两个有直接联系的数据库。您是否有任何现有的原型来处理与属于不同网络的 MS SQL 2008 R2 DB 服务器之间的同步？您的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T02:37:45.737

你可以在这里找到使用 WCF 的示例：

[数据库同步：SQL Server 和 SQL Compact N 层与 WCF](http://code.msdn.microsoft.com/Database-Sync-SQL-Server-7e88adab)

[数据库同步：SQL Server 和 SQL Express N-Tier with WCF](http://code.msdn.microsoft.com/Database-SyncSQL-Server-e97d1208)

[Windows Azure 同步服务示例](http://code.msdn.microsoft.com/Windows-Azure-Sync-Service-60293622)

[Windows Azure 同步服务示例演练](http://social.technet.microsoft.com/wiki/contents/articles/walkthrough-of-windows-azure-sync-service-demo.aspx)

我会推荐 Azure 同步服务示例，因为它有相应的演练。如果您不使用 SQL Azure，请忽略与 Azure 相关的代码/部署步骤。

# php - 创建专业代码是否需要使用依赖注入模式？

> ID：10145240
> 
> 赞同：0
> 
> 时间：2012-04-13T17:09:42.593
> 
> 标签：php, javascript, oop

我最近更新了我的 PHP 库以使用依赖注入模式。我不是在我的类中实例化对象，而是在一个名为 ObjectMaker 的类中实例化它们，并通过对象“getter”函数传递对象。

我能看到这样做的唯一一点是隔离由实例化引起的故障。

但由于我只是一个人，而且我没有进行任何单元测试，我认为更新我的 JavaScript 以使用依赖注入模式没有任何意义。

这些依赖不会给我带来任何问题。

我可以不使用它并仍然打电话给我的 JavaScript 专业人员吗？

我不会通过使用它来获得任何性能提升，只会看到更多抽象代码（创建对象的对象）——我喜欢一个没有太多“模式”使用的简单对象模型。这是风格偏好正确吗？

问题？

我可以不使用依赖注入模式而仍然调用我的 JavaScript 专业级别吗？

```
/**
 *Control
 */

var Control = ( function () 
{
    var Control = function ( type )
    {
        this.TIME = 4000;
        this.form_element = document.getElementById( type ), 
        this.response_element = document.getElementById( type + '_response' );
        this.text_object = new Text( this.form_element ),
        this.message_object = new Message( this.response_element ),
        this.effects_object= new Effects( this.response_element );
    };
    Control.prototype.invoke = function( ) 
    {
        if( Global.validate_input_on === 1 )
        {
            if( !this.text_object.checkEmpty() ) 
            {
                this.message_object.display( 'empty' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
            }
            if( type === 'signup' && !this.text_object.checkPattern( 'name' ) ) 
            {
                this.message_object.display( 'name' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
            }
            if( !this.text_object.checkPattern( 'email' ) ) 
            {
                this.message_object.display( 'email' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
            }
            if( !this.text_object.checkPattern( 'pass' ) ) 
            {
                this.message_object.display( 'pass' );
                this.effects_object.fade( 'down', this.TIME );
                return false;
           }
        }
        var response_element = this.response_element;
        AjaxNew.repeatUse( ajaxSerialize( this.form_element ) + '&ajax_type=' + type + '_control', function( server_response_text ) { ajaxType( server_response_text, this.response_element, 'respond' ); } );
    };
    Control.in = function()
    {
        new Control( 'signin' ).invoke();
    };
    Control.up = function()
    {
        new Control( 'signup' ).invoke();
    };
    Control.out = function()
    {
        AjaxNew.repeatUse( '&ajax_type=ControlSignOut', function( server_response_text ) { ajaxType( server_response_text, 0, 'simple' ); } );
    };
    Control.try = function()
    {
        AjaxNew.repeatUse( '&ajax_type=ControlTryIt', function( server_response_text ) { ajaxType( server_response_text, 0, 'simple' ); } );
    };
    return Control;
} () ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:22:37.720

您可能会冒着与其他开发人员不一样的风险，但这并不意味着您的代码不那么专业。使用最适合您的项目的方法。如果它对你想要做的事情来说太过分了，不要使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:27:53.100

> 我能看到这样做的唯一一点是隔离由实例化引起的故障。

依赖注入的目的是促进松耦合。在你的 JS 代码中是否需要这个我会说很大程度上取决于你的 JS 代码的范围；即你是在写一个 JS 框架，还是在操作几个 div？

网络开发公司会发现你的工作很专业吗？这取决于。你是否无缘无故地将 DI 添加到你的代码中，以便你看起来很酷，或者它有什么真正的理由存在？专业的网络公司会知道其中的区别。

# text-to-speech - 寻找用于文本转语音 (TTS) 的免费 SaaS

> ID：10145245
> 
> 赞同：0
> 
> 时间：2012-04-13T17:10:11.220
> 
> 标签：text-to-speech, saas

我正在寻找一个免费的基于 Web 的 TTS 引擎，我可以在商业项目中使用它。我不是说有一个，但我希望有人可能知道是否有。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:36:22.430

我所知道的唯一免费提供的基于 Web 的 TTS 引擎是 Google TTS。有一篇关于如何使用它的[博客文章。](http://weston.ruter.net/projects/google-tts/)在商业上使用它的问题在于它不是官方的 Google API（大多数使用它的解决方案都已被黑客入侵），因此如有更改，恕不另行通知。对于商业应用程序，我会为一个好的 TTS 引擎付费。另一种选择是获取[免费提供的 TTS 引擎](http://www.babelfish.org/tts-free.htm)并创建自己的 SaaS。

# c# - 如何使用 C# 检查文件是否为有效的 XPS 文件？

> ID：10145247
> 
> 赞同：1
> 
> 时间：2012-04-13T17:10:13.247
> 
> 标签：c#, xps

我有一个处理 XPS 文件的 WinForms 应用程序。如何使用 C# 检查用户在打开对话框中选择的文件是否是有效的 XPS 文件？

将存在带有 .XPS 扩展名的文件，这些文件并不是真正的 XPS 文件。

由于 XPS 文件实际上是 PKZIP 格式，因此我可以检查 PKZIP 字节签名，但这会在 ZIP 存档上产生误报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T07:03:01.877

下面将区分 XPS 文件与其他 ZIP 存档和非 ZIP 文件。它不会确定文件是否是完全有效的 XPS - 因为您需要加载每个页面。

```
using System;
using System.IO;
using System.Windows.Xps.Packaging;

class Tester
{
    public static bool IsXps(string filename)
    {
        try
        {
            XpsDocument x = new XpsDocument(filename, FileAccess.Read);

            IXpsFixedDocumentSequenceReader fdsr = x.FixedDocumentSequenceReader;

            // Needed to actually try to find the FixedDocumentSequence
            Uri uri = fdsr.Uri;

            return true;
        }
        catch (Exception)
        {
        }

        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-13T17:14:08.003

您可以检查文件的内容类型而不是文件扩展名。

# jquery - 通过使用 jquery 为高度设置动画，SlideDown/Up

> ID：10145249
> 
> 赞同：0
> 
> 时间：2012-04-13T17:10:16.647
> 
> 标签：jquery

我想实现类似于[**ibm.com**](http://www-142.ibm.com/software/products/us/en/category/bpm-software?lnk=mhso)上的标题效果的效果。标头本身是固定的。当您向下滚动时，标题会变小。当您向后滚动时，它会获得正常高度。

这就是我尝试的方式：

```
$(document).ready(function() {           

    $(window).scroll(function(e){
        var scrollTop = $(window).scrollTop();
        if(scrollTop > 50){
                $('.main_nav').animate({
                height:"30px"
            });
        }
    });

}); 
```

这使标题变小。但是我怎样才能让它恢复到正常高度呢？还有其他想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:13:14.627

看看这里：http: [//jsfiddle.net/Xvqqb/6/](http://jsfiddle.net/Xvqqb/6/)

我稍微调整了你的代码。如果用户快速上下滚动，我将取消动画。将标题的位置设置为固定。

**JS**

```
var header = $('#header')

$(window).scroll(function(e){    
    var scrollTop = $(window).scrollTop();
    if(scrollTop > 50 ){
        header.stop().animate({height:"30px", queue: false});
    }
    else{        
        header.stop().animate({height:"50px", queue: false});
    }
});​ 
```

**CSS**

```
#header {
    height:50px;
    width:716px;
    position:fixed;
    left:0px;
    top:0px;
    background:red;
    z-index: 900;
} 
```

**html**

```
<div id="header"></div>
<div id="bodyContent">
    <div style="height:1000px"></div>     
</div> 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:12:49.963

```
 if(scrollTop > 50){
        $('.main_nav').animate({
            height:"30px"
        });
    }else{
        $('.main_nav').animate({
            height:<OLD HEIGHT>
        });
    } 
```

如果原始高度不固定，可以抓取原始高度并`data`在收缩前使用存储。

此外，您可能应该跟踪它是否已经缩小并且仅在适当时进行动画处理，而不是每次都调用动画。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T13:47:52.330

它是你想要变小的标志吗？您可能想使用 jquery-ui 使用 css-class 进行动画处理以更改高度和其他元素（例如隐藏搜索块）

但如果它是詹姆斯所做的高度，但你不需要将它存储在元素上的数据中：

```
$(document).ready(function() {
    var main_nav = $(".main_nav"),
        oldHeight = main_nav.height(),
        scrollUpTo = 30,
        hideHeight = 50,
        w = window;

    $(window).scroll(function(e){
        var scrollTop = $(w).scrollTop();
        setTimeout(function() {
            if(scrollTop > hideHeight  && main_nav.height() !== scrollUpTo ){
                main_nav.stop(/*clearQueue*/true).animate({ height: scrollUpTo });
            } else if(scrollTop < hideHeight  && main_nav.height() !== oldHeight ) {
                main_nav.stop(/*clearQueue*/true).animate({ height: oldHeight });
            }
      }, 100);
    });

}); 
```

如果高度不等于旧高度并且 scrollTop 小于 50，则对其进行一次动画处理。

您可能还想使用超时，这样您就不会在滚动时一直触发（建议在滚动事件上设置超时）

但要修复 main_nav 的所有子元素，我的猜测是 jquery-ui switchClass [http://jqueryui.com/docs/switchClass/](http://jqueryui.com/docs/switchClass/)可能会修复它。

# c++ - 如何使中心区域调整为 QDockWidgets 位置

> ID：10145257
> 
> 赞同：0
> 
> 时间：2012-04-13T17:10:45.530
> 
> 标签：c++, qt, resize, center, qdockwidget

由于似乎不可能在表单的中间区域添加 QDockWidget，我想知道如何调整中间区域文本小部件的大小以自动调整空间。

前任：

```
=======================
|    top doc          |
|---------------------| 
| left| text    |right|
| dock|  edit   |doc  |
|     |         |     |
|     |         |     |
======================= 
```

现在，如果我调整或移动任何停靠点，它不会调整中间文本编辑的大小。如何使我的文本编辑自动调整大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:48:21.327

你可以让文本编辑中央小部件，那么它应该默认有这种行为

见[http://qt-project.org/doc/qt-4.8/mainwindows-dockwidgets.html](http://qt-project.org/doc/qt-4.8/mainwindows-dockwidgets.html)

# php - 确保 PDO 获取方法结果“false”是错误或空结果

> ID：10145259
> 
> 赞同：2
> 
> 时间：2012-04-13T17:11:01.267
> 
> 标签：php, mysql, pdo

如何使用 php PDO mysql 驱动程序识别执行错误中的提取错误或空结果？

```
 $sql = ' SELECT * ';
  $sql .= ' FROM test ';
  $sql .= ' WHERE id = 432 ';

  $statement = $this->_db->prepare($sql);
  $status = $statement->execute();

  var_dump($status);

  $result = $statement->fetch(\PDO::FETCH_ASSOC);

  var_dump($result);

  output:
  bool(true)
  bool(false) 
```

所以，我用pdo准备语句，然后执行sql，状态为真，因为没有错误。然后我获取结果，在这种特定情况下，不存在 id = 432 的行。所以 fetch 方法返回 false。我的问题是 fetch 方法在出现错误时也会返回 false！。

如何确定 fetch "false" 结果是错误还是空结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:15:03.220

如果有错误，那么 PDO 将抛出一个您可以捕获的异常。用 try catch 包装你的代码，它应该捕获任何异常。

```
try {
    $rs = $db->prepare('SELECT * FROM foo');
    $rs->execute();
    $foo = $rs->fetchAll();
} catch (Exception $e) {
    echo 'Error: '.$e->getMessage();
} 
```

# sql-server - 将 SQL Server 表导出为 CSV 问题逗号、制表符和引号

> ID：10145266
> 
> 赞同：1
> 
> 时间：2012-04-13T17:12:08.097
> 
> 标签：sql-server, excel, encoding, csv

在我们导出到平面文件 CSV 后，带有逗号、引号和制表符的列会导致 Excel 出现问题。供应商需要读取 Excel 中的文件以进行手动更改，然后需要以平面文件 CSV 格式使用 PL/SQL 将其加载到 Oracle 表中。

我有几个问题：

*   我可以从 SQL Server 的表中删除这些字符，但有更聪明的方法吗？
*   尝试将文件加载到 Oracle 时，从 Excel 保存 CSV 文件会导致问题吗？
*   我们需要第一行有列名。是否有任何 SQL 方法可以一口气生成所有文件（第一行中的标题），而不是使用导出到平面文件？

更新：我正在尝试将 MSSQL 导出到 excel，但有些表给我一个错误“定义的字段太多”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:26:08.700

我相信你在这里有几个选择。

1) 选择不同的分隔符（不在输出中的分隔符）~ 或 ` 或 | 可能有用

2) 将每个输出字段用引号括起来，csv excel 知道将其视为一个字段。

2a）如果您的输出包含“，那么您需要将它们加倍，以便 CSV/Excel 知道您的意思是“，而不是新字段的结尾或开头。

3）因此不要使用CSV，使用XML。甲骨文也处理它..

4) 使导入/导出位置基于而不是描绘

所以直接回答你的问题：

**但有更聪明的方法吗？**使用 XML、SQL server 和 Oracle 都支持并可以从中导入。

**在excel中完成后保存到csv是否有意义** 不是我

**无论如何尝试将文件加载到 Oracle 中会导致问题**吗？除非您已经处理了所有特殊字符并通过适当的描述正确地对它们进行了转义，否则它可以。

**任何 SQL 方法可以一次性生成所有文件（第一行中的图块），而不是使用导出到平面文件？**我再次建议使用 XML 或 EDI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T16:44:22.113

我面临着类似的挑战 - 从 SQL 导出到 Excel ......虽然很容易从查询结果中完成，但右键单击并将结果保存到 CSV 中。问题是任何包含逗号的列都会破坏表的结构。

我使用解决了这个问题`OPENROWSET`并将数据直接泵入`Excel`文件。我发现这样做的最安全的方法： [SQL Server export to Excel with OPENROWSET](https://stackoverflow.com/questions/909933/sqlserver-to-excel-export-with-openrowset)

虽然我相信我使用了 Excel 和 MSSQL 的更新版本，但这是我的代码：

```
insert into OPENROWSET('Microsoft.ACE.OLEDB.12.0','Excel 12.0;Database=C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\Test.xlsx', [Sheet1$])
select * from TestTable 
```

谢谢！肯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-22T19:50:58.813

首先准备一个生成所需数据的 SQL 语句。`"`让 SQL用两个双引号 ( )替换任何双引号字符 ( `""`)，例如`SELECT REPLACE(CAST(field1 as NVarchar(MAX)),'"','""') AS field1 FROM table1`.

*   在对象资源管理器中右键单击所需的数据库
*   在上下文菜单中，选择任务->导出数据
*   来源：选择`SQL Serve Native Client`（在列表末尾）
*   目的地：选择`Flat file`
*   浏览以选择文件，例如exported.csv
    *   查看`Unicode`
    *   `Text qualifier`为: "输入一个双引号字符
*   选择单选项目符号：编写查询以指定要传输的数据
*   粘贴您的 SQL 代码
*   点击进入`Finish`
*   用记事本++打开文件
    *   菜单：编码->转换为 UTF-8
    *   保存存档

文本限定符是每个字段周围使用的引号字符。如果您选择 csv 文件，它会自动正确设置行尾和列分隔符。

# java - 替换导致Android中的外键不匹配

> ID：10145270
> 
> 赞同：1
> 
> 时间：2012-04-13T17:12:18.760
> 
> 标签：java, android, sql, sqlite

我在 Android 中有以下数据库：

```
Table A: [_id, value1]
Table B: [_id, fk_tablea, value2] 
```

带代码：

```
db.execSQL("CREATE TABLE IF NOT EXISTS table_A ( "
        + "_id long primary key , value1 long  );");
db.execSQL("CREATE TABLE IF NOT EXISTS table_B ( "
        + "_id long primary key ,fk_tablea long  , value2 long,"
        + "FOREIGN KEY (fk_tablea) REFERENCES table_A (value1) ON DELETE CASCADE);"); 
```

如果我制作（表格为空）：

```
ContentValues values= new ContentValues();
values.put("_id",1);
values.put("value1",900);
mDb.replace("table_A", null, values); 
```

或者

```
mDb.execSQL("INSERT OR REPLACE  INTO table_A(_id,value1) VALUES (1,900)"); 
```

的

```
mDb.insertWithOnConflict("table_A", null, values, SQLiteDatabase.CONFLICT_REPLACE); 
```

它崩溃并出现异常 **原因：android.database.sqlite.SQLiteException: foreign key mismatch: ，同时编译：INSERT OR REPLACE INTO table_A(_id,value1) VALUES (2,900)** 。但是如果我使用插入而不是替换

```
ContentValues values= new ContentValues();
values.put("_id",1);
values.put("value1",900);
mDb.insert("table_A", null, values); 
```

工作正常，为什么会这样？我该如何解决？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:45:18.650

外键 in指的是中`table_B`的非唯一字段`value1`。`table_A`下面演示了它是如何工作的：

```
sqlite> pragma foreign_keys=1;
sqlite> create table foo (a int, b int);
sqlite> create table bar (c int, d int, foreign key (c) references foo(b));
sqlite> insert into foo values (1,1);
sqlite> insert into bar values (1,1);
Error: foreign key mismatch
sqlite> create unique index idx1 on foo(b);
sqlite> insert into bar values (1,1);
sqlite> 
```

以这种方式记录文档：

[http://www.sqlite.org/foreignkeys.html#fk_indexes](http://www.sqlite.org/foreignkeys.html#fk_indexes)

# php - 突出显示单个动态表行背景颜色

> ID：10145271
> 
> 赞同：0
> 
> 时间：2012-04-13T17:12:21.243
> 
> 标签：php, css, dynamic

我试图弄清楚如何使用 PHP 或任何需要的东西来突出显示动态表中的一行。基本上我有一个冠军表，我想从其他人中突出客户的团队

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:21:10.340

写一个 if 条件

```
if(client's team)
{
echo "<tr style='background-color:red'><td> data</td></tr>";
}
else{
    echo "<tr><td>data</td></tr>";
} 
```

# ms-access - Crystal Report (XI RDP) 坚持使用 Access 数据库

> ID：10145274
> 
> 赞同：0
> 
> 时间：2012-04-13T17:12:49.707
> 
> 标签：ms-access, vb6, crystal-reports, .net

我们的 VB6 应用程序与代表不同结果集的多个 MS-Access 数据库一起工作。当用户选择一个结果集时，包含该结果集的数据库将重命名为 Temp.mdb，以供用户在需要其数据时使用。用户完成后，Temp.mdb 将重命名为其原始名称。（请接受这个设计，当时是有充分理由的）。

这种设计的一个缺陷是，当有一个与 Temp.mdb 的打开连接时，重命名会失败并出现权限被拒绝错误。因此，在我们的代码中，所有连接都事先精心关闭。

输入 Crystal 报表：我们使用 CraxDRT.Application.OpenReport(path) 创建一个报表，将其传递给一些 Net dll 以设置其参数，然后将其发送到 CRViewer 或打印机。在此之后，报告似乎一直徘徊并保持与 Temp.mdb 的打开连接，从而对 temp.ldb 进行写保护。我试图将 Vb6 和 Net 中报告的所有引用设置为 null/Nothing，但报告本身没有 IDispose 接口、Close 方法或其他任何东西。只有当我关闭主应用程序时，与数据库的连接才会消失。重新启动后，我可以重命名它。

必须有一种方法可以释放报告对 Temp.ldb 文件的锁定，以便我可以重命名 Temp.mdb。但是怎么办？？

PS：奇怪的是，当我调用一个使用相同数据但没有传递给 Net dll 的不同报告时，以某种方式，挥之不去的报告被垃圾收集，它也释放了它的锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:26:11.247

如果不是垃圾收集问题，那么它可能是 .NET/OLEDB 提供程序 CR 正在使用的连接池。虽然通常不为 JET 数据库启用它。

您可以将报告逻辑包装在一个单独的可执行文件中，该可执行文件启动 CR 查看器或打印报告，然后有效地退出强制 GC 和/或清除打开的连接。

# c# - response.redirect 的问题

> ID：10145278
> 
> 赞同：0
> 
> 时间：2012-04-13T17:13:05.703
> 
> 标签：c#, asp.net, redirect, iis-7, web

我有一个非常基本的测试页面，带有一个按钮，然后在按钮上单击调用

`Response.Redirect("b.aspx")`当页面加载为[http://myhost/index.aspx](http://myhost/index.aspx)时，这可以正常工作。但是，当通过[http://myhost/](http://myhost/)加载同一页面时，重定向不起作用（同一页面只是像普通回发一样重新加载）。

服务器是运行 ASP.NET4 的 IIS7。

我也试过了`Response.Redirect("~/b.aspx")`？还是没有汤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:21:51.290

尝试`Response.Redirect("...", true);`

它不会让其余的代码在页面上运行，其余的代码可能是从根到欢迎页面的服务器传输，这会让您感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:50:53.917

您可能想尝试设置默认页面。在 Visual Studio 中，进入项目的属性页，在开始选项中，选择特定页面的开始操作到您的 index.aspx。这样，当您使用[http://myhost/](http://myhost/)访问时，它将转到[http://myhost/index.aspx](http://myhost/index.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:51:50.680

我无法重现您的行为。我已经编写了您描述的两个 aspx 页面，当我单击 index.aspx 页面上的按钮时，无论我以[http://localhost/index.aspx](http://localhost/index.aspx)还是只是[http://访问页面，我都会被重定向到 b.aspx localhost/](http://localhost/)（在我将 index.aspx 设置为 IIS 中的默认文档之后）。所以这一定是IIS配置的某种错误或问题。

我建议确保在调试器中确实执行了 Response.Redirect() 并使用 Fiddler 等工具来检查响应标头。

# css - 内联 CSS 来制作列

> ID：10145279
> 
> 赞同：-1
> 
> 时间：2012-04-13T17:13:08.613
> 
> 标签：css, css-float, inline

在我的 WordPress 主题测试页面上，我希望在 CSS 中并排完成两个列。我尝试了内联选项和其他各种方法，但它不起作用。[http://joshblease.co.uk/wp-content/themes/rounded/test.php](http://joshblease.co.uk/wp-content/themes/rounded/test.php)这个页面是我用来检查的，基本上我希望里面有“你好”的栏目从菜单栏也是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:17:11.883

放

```
float:left 
```

在两列上，那么它应该可以工作。

# excel - matlab对齐以使excel单元格的文本居中

> ID：10145280
> 
> 赞同：0
> 
> 时间：2012-04-13T17:13:11.810
> 
> 标签：excel, matlab, text-alignment

我有一个问题：如何将 'values{num_rows+1}' 的值放在 excel 单元格的中心？我看到我必须使用函数： set(ActivesheetRange,'Horizo​​ntalAlignment',3); 但我不知道如何使用它。

```
e = actxserver ('Excel.Application'); %# open Activex server
filename = fullfile(pwd,'example2.xlsx'); %# full path required
ewb = e.Workbooks.Open(filename); %# open the file
esh = ewb.ActiveSheet;

str = num2str(num_rows+1);
esh.Range(strcat('J',str)).Interior.Color = clr;

sheet1=e.Worksheets.get('Item', 'Sheet1');
range1=get(sheet1,'Range', strcat('A',str),strcat('I',str));
range1.Value= set(values{num_rows+1},'HorizontalAlignment',,'center'); 
```

谢谢大家：]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T04:43:00.937

您需要使用[Excel VBA 对象模型](http://msdn.microsoft.com/en-us/library/ee814737.aspx)，而不是 MATLAB 文本属性。

要将单元格值对齐到中心：

```
range1.HorizontalAlignment = -4108; 
```

在这个语句`-4108`中是`xlCenter`常量定义在 Excel 对象模型中。不知道如何通过其名称从 MATLAB 访问它。

# java - 尝试使用泛型确保映射中的 N 参数

> ID：10145286
> 
> 赞同：2
> 
> 时间：2012-04-13T17:14:03.637
> 
> 标签：java, generics

我有这两个接口：

```
public interface Attribute<N> {

    Class<N> getAttributeType();
}

public interface FieldSubscriber<N> {

    void notifySubscriber(N value);
} 
```

现在我有一个 FieldRelationsManager 类，它将处理不同类型的字段关系，例如，它将提供一个订阅功能，其中 FieldSubscriber 可以订阅以了解某个值持有者的值变化。所以管理器需要一个给定属性的 FieldSubscribers 列表，以便知道它必须通知哪些订阅。所以 FieldRelationsManager 看起来像：

```
public class FieldRelationsManager {

    private Map<Attribute<?>, List<FieldSubscriber<?>>> subscribers;
    .....
    .....
} 
```

为了确保经理的客户为同一个 N 的属性提供 FieldSubscriptor，我试图提供一种方法，例如：

```
public <N> void subscribe(Attribute<N> attr, FieldSubscriber<N> subscriber){

    if(subscribers==null){
       subscribers=new HashMap<Attribute<?>, List<FieldSubscriber<?>>>();
    }
    List<FieldSubscriber<N>> list=subscribers.get(attr);
    ....
    ....
} 
```

这不会编译，因为：subscribers.get(attr); 返回：

```
 List<FieldSubscriber<?>> 
```

并且不能转换为：

```
List<FieldSubscriber<N>> 
```

所以问题是，有没有其他方法可以编写代码以确保 N 参数相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:01:07.387

Java 泛型信息仅在编译时使用。然后，一旦程序运行，Java 就会使用对象列表。

所以像这样定义你的方法，使用`<N>`，没有任何问题

```
public <N> void subscribe(Attribute<N> attr, FieldSubscriber<N> subscriber) { 
```

通过这种方式，您可以确保编译器在编译时检查代码中的方法是否始终使用两个`N`类型参数调用。

但是在方法内部使用列表，使用`<?>`

```
List<FieldSubscriber<?>> list = subscribers.get(attr);
if (list == null) {
  list = new ArrayList<FieldSubscriber<?>>();
  subscribers.put(attr, list);
}
list.add(subscriber); 
```

一旦进入该方法，您就可以工作并确保参数是您想要的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:58:45.797

你可以试试：

```
public <N extends Iface> void subscribe(Attribute<N> attr,
    FieldSubscriber<N> subscriber)
{
  if(subscribers==null){       
    subscribers=new HashMap<Attribute<? extends Iface>,
      List<FieldSubscriber<? extends Iface>>>();       
  }       
  List<FieldSubscriber<? extends Iface>> list=subscribers.get(attr);
  list.add(subscriber);
  ....       
  ....       
}

public interface Attribute<N> {  
  Class<N> getAttributeType();  
}  

public interface FieldSubscriber<N> {  
  void notifySubscriber(N value);  
}  

public class FieldRelationsManager {   
  private Map<Attribute<? extends Iface>,
      List<FieldSubscriber<? extends Iface>>> subscribers;   
  .....   
  .....   
} 
```

# asp.net - 表单元素破坏了我在 Internet Explorer 中的 CSS 布局

> ID：10145289
> 
> 赞同：0
> 
> 时间：2012-04-13T17:14:17.483
> 
> 标签：asp.net, html, css

您好我有以下 HTML 布局 - 它完全按照我想要的方式呈现，直到我添加一个表单标签......我尝试设置一个内联样式 =“边距：0;” 正如一些人建议的那样，但没有用。

此布局仅适用于 Internet Explorer 并针对 Internet Explorer ..它旨在创建一个固定的标题和左侧菜单栏，具有独立滚动的内容区域

谁能解释一下为什么表单标签破坏了布局（删除标签将在 Internet Explorer 上启用正确的行为）

```
 <!-- asdfasd -->
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <title>Fixed header and left-sidebar</title>
    <style type="text/css">
        body
        {
            margin: 0;
            padding: 150px 0 0 250px;
            background-color: Yellow;
        }
        div#header
        {
            position: absolute;
            top: 0;
            left: 0;
            width: 500%;
            height: 150px;
            background-color: Red;
        }
        div#left-sidebar
        {
            position: absolute;
            top: 150px;
            left: 0;
            width: 250px;
            height: 100%;
            background-color: Blue;
        }
        @media screen
        {
            body > div#header
            {
                position: fixed;
            }
            body > div#left-sidebar
            {
                position: fixed;
            }
        }
        * html body
        {
            overflow: hidden;
        }
        * html div#content
        {
            height: 100%;
            overflow: auto;
        }
    </style>
</head>
<body>
    <form id="form1">
    <div id="header">
        <p>
        Content can be placed here…&lt;/p>
    </div>
    <div id="left-sidebar">
        <p>
        Content can be placed here…&lt;/p>
    </div>
    <div id="content">
        <pre>
The three members of last year’s Lions draft class that have been arrested on marijuana charges since the end of the 
regular season should clear some space on their calendar.

Wide receiver Nate Burleson wants to have a discussion with the trio — defensive tackle Nick Fairley, running back 
Mikel Leshoure and offensive tackle Johnny Culbreath — about running afoul of the law this year. Burleson thinks 
the Lions have come too far to let off-field things retard their progress and plans to share those thoughts with 
the players in private conversations.

“I’m a little bit different, I don’t want to put people on blast in front of the team,” Burleson said, via Dave 
Birkett of the Detroit Free-Press. “Sometimes you’re going to need to do that. Or a certain guy, certain situations, 
they need to feel that embarrassment of everybody looking down on them. But some of these guys that we saw on the 
board, these are good young men and I know that they’re passionate about being professional athletes, it’s just that 
they make mistakes.”

There were red flags about the possibility of those mistakes before the Lions added the players to the organization, 
but they chose to ignore them. They’ve gotten burnt by that this offseason, but if Burleson and other veterans can 
get everyone in line the fallout should have minimal impact on the year to come.

After the Wonderlic score generated by former LSU cornerback Morris Claiborne was leaked by one or more of the 32 
teams that exclusively had access to it, NFL Commissioner Roger Goodell dispatched a memo reminding the various 
franchises that this shouldn’t occur.

“As we near our annual college player draft, please be reminded that certain information obtained during preparations 
for the Draft, including personal and family details, results of drug tests, scores on the Wonderlic test, and the 
like, are strictly confidential for club use only and are not to be disseminated publicly under any circumstances,” 
Goodell said.  “Disclosing this confidential information about draft-eligible players to the public can be extremely 
damaging to players, clubs, and the league.”

And so, exactly one week after Goodell reminded the teams not to talk about the things learned while preparing for 
the draft, three different teams disclosed to a reporter that cornerback Janoris Jenkins admitted during pre-draft 
interviews that he continued to smoke marijuana after leaving Florida and enrolling at North Alabama.

Making the situation even more intriguing is the fact that the disclosure was made to a reporter employed by the 
league.

In this regard, Albert Breer of NFL Network was simply doing his job.  Like the Wonderlic score, what a guy says 
during pre-draft interviews is regarded by the NFL as confidential.  Five years ago, for example, when a report 
surfaced that Calvin Johnson, Amobi Okoye, and the late Gaines Adams had admitted in a pre-draft interview to smoking 
marijuana, Chris Mortensen of ESPN publicly wagged a finger at those who leaked the info.  “If I were NFL 
commissioner,” Mort wrote at the time, “I’d be mad about this entire process and the leak, and I’d be as mad as I 
was about Adam ‘Pacman’ Jones and Chris Henry embarrassing the NFL with their off-field escapades.”

The latest breach of confidentiality likely won’t result in the same outcry because Jenkins is viewed as being far 
less sympathetic than Johnson, Okoye, and Adams five years ago and Claiborne one week ago.  But regardless of 
whether the player in question is viewed as a good guy or a bad guy, the NFL is (or at least should be) concerned 
about every breach of pre-draft confidentiality.  The fact that nearly 10 percent of the league’s teams gave 
confidential information to a reporter working for the league-owned network less than a week after the Commissioner 
reminded all teams to tighten things up arguably constitutes open defiance of the man who is running the sport.

Either way, it could be time for a new memo.  The first one apparently didn’t take.

As of now, Donald Jones is the number two receiver for the Bills.

Five options for the Dolphins with the eighth overall pick.

Patriots DT Vince Wilfork likes the team Bill Belichick has been building this offseason.

S DeAngelo Smith will be visiting with the Jets this weekend.

More on former Ravens coach Brian Billick’s comments about the team’s view of JaMarcus Russell when he came out of 
college.

The Bengals plan to cut back on DE Michael Johnson’s snaps next season.

Looking back at recent first round decisions by the Browns.

Alabama LB Donta Hightower and Oregon RB LaMichael James visited with the Steelers.

LB Tim Dobbins is returning to the Texans.

Colts P Pat McAfee answered questions from fans on the team’s website.

Jaguars tackles Eben Britton and Eugene Monroe have formed a strong bond.

The Titans have used their proximity to Vanderbilt to bone up on their players.

Texas A&M RB Cyrus Gray could be a good fit for the Broncos offense.

Projecting the seventh round pick of the Chiefs.

Raiders G.M. Reggie McKenzie doesn’t like the idea of appearing on Hard Knocks.

The Chargers are looking for decisions from RB Jacob Hester and T Mario Henderson.

The addition of LB Keith Rivers could mean fewer three safety looks from the Giants.

Said Eagles S Nate Allen, “We’ve done some things this offseason. I’m excited to get back up there with the 
playbook and getting with the guys and getting ready for the season.”

The trial of the man accused of murdering Redskins S Sean Taylor has been postponed.

Oregon State DB Brandon Hardin visited with the Bears this week.

The Lions could draft a defensive lineman in the first round.

Reviewing what the Packers did in the 2009 Draft.

Will the Vikings look to the defensive line in the fourth round again?

Falcons WR Roddy White apologized for upsetting some of his Twitter followers.

LB James Anderson thinks there will be more pressure from the Panthers defense this season.

Mike Triplett of the New Orleans Times-Picayune writes that choosing Joe Vitt as interim head coach makes 
perfect sense for a Saints team that wants to keep Sean Payton front and center.

Checking in with former Buccaneers running back and current high school football coach Mike Alstott.

Previewing the Cardinals’ offseason workouts, which probably won’t include DE Calais Campbell.

The Rams haven’t drafted an interior offensive lineman since 2008, a streak that could end this year.

Some offensive line options for the 49ers at the end of the first round.

With 10 linebackers currently on their roster, the Seahawks may be looking elsewhere in the draft.
        </pre>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:17:01.070

您的问题可能是您执行以下操作：

```
body > div#header 
```

一旦你添加了`form`这条规则，它就不再匹配任何东西了。 `div#header`不再是 的直系孩子`body`。

# c++ - 传递迭代器而不是容器

> ID：10145291
> 
> 赞同：4
> 
> 时间：2012-04-13T17:14:35.110
> 
> 标签：c++, iterator, containers

目前，我坚持使用一些代码，例如`fooA()`（不要介意正文），它需要一个特定的容器，比如`vector<double>`，作为参数。

```
double fooA(std::vector<double> const& list)
{
    return list[0];
} 
```

现在，我想概括并使用迭代器：

```
template<typename InputIterator>
double fooB(InputIterator first, InputIterator last)
{
    return *first;
} 
```

如何说明`fooB()`需要迭代器进行迭代`double`？

有人可能会通过 a `vector<string>::iterator`，或者更糟糕的是它可能会在没有警告的情况下编译 a `vector<int>::iterator`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T17:19:49.220

对于 C++03：

```
#include <iterator>
#include <boost/type_traits/is_same.hpp>
#include <boost/type_traits/remove_cv.hpp>
#include <boost/utility/enable_if.hpp>

template<typename InputIterator>
typename boost::enable_if<
    boost::is_same<
        typename boost::remove_cv<
            typename std::iterator_traits<InputIterator>::value_type
        >::type,
        double // expected value_type
    >,
    double     // fooB return type
>::type
fooB(InputIterator first, InputIterator last)
{
    return *first;
} 
```

另一个不使用 Boost 的 C++03 解决方案，但在传递无效类型时可能会产生更丑陋的错误：

```
#include <iterator>

void fooB_helper(double) { }
template<typename T> void fooB_helper(T const&);

template<typename InputIterator>
double fooB(InputIterator first, InputIterator last)
{
    fooB_helper(typename std::iterator_traits<InputIterator>::value_type());
    return *first;
} 
```

对于 C++11，您可以使用表达式 SFINAE 代替`enable_if`，或者您可以`static_assert`完全使用 SFINAE 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:19:23.770

如果您不想使用 Boost/C++11，您也许可以摆脱这种方法：

```
template<typename B, template<typename A1, typename B1> class Container>
double fooB(typename Container<int, B>::iterator first,
   typename Container<int, B>::iterator last)
{
  return 0;
} 
```

打电话：

```
vector<int> a;
fooB<vector<int>::allocator_type, vector>(a.begin(), a.end()); 
```

有点难看，但有效:)

另外：不可移植，因为 std 集合实现可以有两个以上的模板参数（第二个是具有默认值的分配器）

# c# - Jquery/ajax 从一个类中获取对象并在我的视图中的文本框中使用它

> ID：10145292
> 
> 赞同：3
> 
> 时间：2012-04-13T17:14:36.293
> 
> 标签：c#, asp.net-mvc-3, jquery

我正在开发一个 asp.net mv3 应用程序。

在一个助手类中，我有一个方法可以根据他的 ID 返回一个人的对象

```
public Person GetPersonByID(string id)
{
    // I get the person from a list with the given ID and return it
} 
```

在一个视图中，我需要创建一个可以调用的 jquery 或 javascript 函数`GetPersonByID`

```
function getPerson(id) {
    //I need to get the person object by calling the GetPersonByID from the C# 
    //helper class and put the values Person.FirstName and Person.LastName in 
    //Textboxes on my page
} 
```

我怎样才能做到这一点？

这可以通过使用和ajax调用来完成吗？

```
 $.ajax({
            type:
            url:
            success:
            }
        }); 
```

任何帮助是极大的赞赏

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T17:16:35.833

就此而言，Javascript 或 jQuery 不知道 a 是什么`method`意思。jQuery 不知道 C# 是什么。jQuery 不知道 ASP.NET MVC 是什么。jQuery 不知道`Person`.NET 类的含义。jQuery 不知道 .NET 类的含义。

jQuery 是一个 javascript 框架，它（以及许多其他东西）可用于将 AJAX 请求发送到服务器端脚本。

在 ASP.NET MVC 中，这些服务器端脚本称为**控制器操作**。在 Java 中，这些称为 servlet。在 PHP - PHP 脚本中。等等...

因此，您可以编写一个控制器操作，该操作可以使用 AJAX 进行查询，并将返回`Person`该类的 JSON 序列化实例：

```
public ActionResult Foo(string id)
{
    var person = Something.GetPersonByID(id);
    return Json(person, JsonRequestBehavior.AllowGet);
} 
```

接着：

```
function getPerson(id) {
    $.ajax({
        url: '@Url.Action("Foo", "SomeController")',
        type: 'GET',
        // we set cache: false because GET requests are often cached by browsers
        // IE is particularly aggressive in that respect
        cache: false,
        data: { id: id },
        success: function(person) {
            $('#FirstName').val(person.FirstName);
            $('#LastName').val(person.LastName);
        }
    });
} 
```

这显然假设您的 Person 类具有`FirstName`和`LastName`属性：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:20:59.107

你当然可以！在服务器端代码中，特别是在控制器中，您需要做的就是将序列化为 JSON 对象的 Person 返回，如下所示：

[HttpPost] public ActionResult GetPersonByID(string id) { return Json(person); }

然后在你的 AJAX 中，

```
 $.ajax({
            type: "POST",
            url: form.attr('action'),
            data: form.serialize(),
            error: function (xhr, status, error) {
                //...
            },
            success: function (result) {
                // result.FirstName
            }
        }); 
```

# c++ - 在模板类中使用 sqrt() 函数时消除歧义

> ID：10145295
> 
> 赞同：0
> 
> 时间：2012-04-13T17:14:42.807
> 
> 标签：c++, templates, ambiguous, sqrt

我有一个复数类，我正在尝试实现一个函数来计算模数（这需要使用 sqrt）。

我的头文件如下：

```
#ifndef MY_CLASS_H
#define MY_CLASS_H

template <class T> class complex
{
    // function to overload operator<< a friend
    template <class T>
    friend std::ostream& operator<< (std::ostream &os, const complex<T> &z);
private:
    T re,im;
public:

    // Constructors & destructor
    complex(){re=im=0;}
    complex( const T& r, const T& i ) : re(r), im(i) {}
    ~complex(){}

    // Return real component
    T realcomp() const {return re;}
    // Return imaginary component
    T imagcomp() const {return im;}
    // Return modulus
    double modulus() {return sqrt(im*im + re*re);}

etc.... 
```

编译器输出错误：

```
error C2668: 'sqrt' : ambiguous call to overloaded function
 could be 'long double sqrt(long double)'
 or       'float sqrt(float)'
 or       'double sqrt(double)' 
```

我知道这告诉我`sqrt`需要知道它通过它传递的数据类型。

对于我的程序，`im`将`re`采用`double`or`int`值。

我说 sqrt 只会采用浮动值是对的吗？如果是这样，我如何在没有“数据丢失”警告的情况下强制 im 和 re 到浮点数。我可以在不转换它们的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:29:35.607

不， sqrt 通常不采用浮点数。它需要什么取决于你的图书馆。在您的情况下，您有几个重载的 sqrt 函数，一个 take `float`，一个 take`double`和一个 take `long double`。

您遇到的问题是它们都没有 take `int`，并且从 int 到您可以使用的类型有多次转换，因此编译器让您选择（通过强制转换）。如果您只使用`double`or `int`，则强制转换为`double`-- 不会损失 presision。如果您想`long double`在某个时候使用，请投射到那个位置。

```
double modulus() {return sqrt((double)im*im + re*re);} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:45:22.173

有几种解决方案，但首先，您的代码存在问题：函数`sqrt`来自哪里。如果用户包括 `<sqrt.h>`，那么您*应该*只获得`double`版本，并且没有歧义。如果用户包含`<csqrt>`，那么在 C++11 之前，代码应该找不到任何`sqrt`; 在实践中，没有编译器正确地实现了这一点，你得到的取决于实现。

最安全的解决方案是声明一个你自己的特殊命名空间，包括`<csqrt>`，在其中定义`sqrt`你需要的，`std::sqrt` 在它们的实现中使用，然后`sqrt`在你的命名空间中调用：

```
#include <csqrt>

namespace SafetyFirst
{
    inline int
    sqrt( int in )
    {
        return static_cast<int>( std::sqrt( static_cast<double>( in ) ) );
    }

    inline double
    sqrt( double in )
    {
        return std::sqrt( in ) ;
    }

    //  And so on for any other types you might need.  The
    //  standard provides std::sqrt for the floating point
    //  types only.
} 
```

这样，重载解析总是会找到一个完全匹配的，并且您可以准确地确定您真正想要的功能。而且您有一种方法让客户端定义可能可用的新数字类型：他们只需`sqrt`在相同的命名空间中定义它们，可能会转发到与类型相同的命名空间中的实现。

或者，您可以执行以下操作：

```
#include <cmath>    // To ensure getting a fixed set of overloads
using std::sqrt;

inline int
sqrt( int in )
{
    return static_cast<int>( std::sqrt( static_cast<double>( in ) ) );
}

//  And so on for any standard integral types you want...
//  And your class here... 
```

对于客户端定义的类型，ADL 将确保编译器在正确的命名空间中查找，因此它们不必在您的命名空间中提供转发功能。

这实际上是一个相当不错的解决方案，*除了*它可能会搞砸不希望`std::sqrt( float )`在全局命名空间中找到的客户端代码。（这样的代码不可移植，但它可以存在于某些平台上。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:23:31.983

尝试这个：

```
double modulus() {return sqrt((double)im*im + re*re);} 
```

您将始终`double sqrt(double)`以这种方式调用，但是根据您的描述，这可能没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T07:59:42.497

该问题是由 sqrt 的函数调用的模糊输入引起的。sqrt 函数有不同的输入参数（重载函数）浮点或双精度。

我有非常相似的问题：在我写的第一个代码中：

```
 #include <iostream>     // std::cout
    #include <cmath>    // std::sqrt

   int main()
    {
      float ss;
      ss= std::sqrt(120);  //in this line compiler not sure 120 is float or double
      std::cout<<ss;
      std::cin>>ss;
      return 0;
    } 
```

在这段代码中，编译器不确定参数是 float 还是 double

我们可以修复代码以确保参数的类型是浮点型还是双精度型，如下所示：

```
 #include <iostream>     // std::cout
    #include <cmath>    // std::sqrt

    int main()
    {
      float ss;  //you can change to double 
      ss=120;    //this line make compiler sure 120 is float 
      ss=std::sqrt(ss); //in this line compiler sure that sqrt function 
      std::cin>>ss;
      return 0;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-04T07:23:02.997

这里可能有点晚了，但我从模板中得到了帮助，帮助编译器选择了正确的函数。

```
#ifndef SQUARE_ROOT_HPP
#define SQUARE_ROOT_HPP

#include <cmath>

template<typename Scalar>
Scalar square_root(Scalar value)
{
    return square_root(static_cast<double>(value));
}

template<>
float square_root(float value)
{
    return std::sqrt(value);
}

template<>
double square_root(double value)
{
    return std::sqrt(value);
}

template<>
long double square_root(long double value)
{
    return std::sqrt(value);
}

#endif // SQUARE_ROOT_HPP 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-06T21:39:22.733

我的问题是类似的：我正在扩展我的旧资源以使其适合 mpreal 的额外使用 - 一项烦人的工作。最后一个问题：大模板中的一个小语句：

```
`T help = sqrt(g.eval(f.eval(a))());` 
```

我不得不挣扎..无论我尝试什么都失败了——非常不同的错误消息，有些看起来很疯狂，比如从复杂的 sqrt 非法转换，但我只使用了浮点类型；将 mpreal 转换为 long double 丢弃精度。 `if(std::is_floating_point<T>::value) ..` 并且`if(std::is_same<T,long double>::value) ..`给出了误导性的错误消息，特别是当 T 是 long double 时，在 then-各自的 else-part 中使用 std:: 和 mpfr:: 会导致 then- 或 else-part 中不可解析的类型错误，具体取决于 T。

我会在这里找到一个解决方案 - 如果我只知道我的问题的根源......

我的解决方案：

```
inline long double wurz(long double x) { return std::sqrt(x); };
inline mpreal wurz(mpreal x) { return sqrt(x); };

template<class T>
  ....
  real_word helpa2 = wurz(g.eval(f.eval(a))()); 
```

当我想问时，我在这里找到了这个页面，是否有比我的更自然、更不愚蠢的解决方案..

# c++ - 错误 C2955：“CELL”：使用类模板需要模板参数列表 C++ 堆栈

> ID：10145302
> 
> 赞同：0
> 
> 时间：2012-04-13T17:15:06.507
> 
> 标签：c++, visual-studio, stack

我正在创建一个自定义堆栈以与使用堆栈库的旧类一起使用。

编译时出现以下错误：

错误 C2955：“CELL”：使用类模板需要模板参数列表 C++ 堆栈

它使用包含的 .h 文件进行编译，直到我将堆栈（c++ 库）更改为 my_Stack（自定义堆栈）

h的代码如下

```
#ifndef generic_stack_H
#define generic_stack_H
#include <iostream>
using namespace std;

/**************************************************************************
                        Structure CELL has two fields.
------------------     ------------------
| element | next | ->  | element | next |
------------------     ------------------
**************************************************************************/
template <class T>
struct CELL { T element; struct CELL *next; };

/**************************************************************************
                                Class STACK.
**************************************************************************/
template <class T>
class my_STACK
{
private:    CELL *topCellPtr;
public:
    //----------------------------Constructor-----------------------------
    my_STACK()    {topCellPtr = NULL;}
    //--------------------------Member functions--------------------------
void push(T e)
{
    struct CELL *cP;

    cP = new CELL;
    cP->element = e;
    cP->next = NULL;
    if(topCellPtr != NULL)   
        cP->next = topCellPtr;
    topCellPtr = cP;

}

void pop()
{
    struct CELL *cP;

    if(topCellPtr == NULL)
    {
        cout << "Trying to pop an empty stack." << endl;
        return;
    }
    cP = topCellPtr;
    topCellPtr = topCellPtr->next;       
}

bool empty() {

    bool check false;

    struct CELL *cP;

    if(topCellPtr == NULL)
    {

       check = true;

    }

   return true;

}

T top()    {return topCellPtr->element;}

void print()
{
    struct CELL *cP = topCellPtr;

    cout << "Stack (top = left): ";
    while (cP != NULL)
    {
        cout << cP->element << " -> ";
        cP = cP->next;
    }
    cout << endl;       
}   

int Count_Occurences (int e) {

    int count = 0;

    struct CELL *cP = topCellPtr;

    while(cP != NULL) {

        if(cP->element == e) {

            count++;

        }//end if

        cP = cP->next;

    }//end while

    return count;

}

void Reverse_Stack() {

struct CELL *nP = NULL;

struct CELL *newtopCellPtr = nP;

while(topCellPtr != NULL) {

    int n = this->top();

    this->pop();

    nP = new CELL;
    nP->element = n;
    nP->next = NULL;

    if(newtopCellPtr != NULL) {

        nP->next = newtopCellPtr;

    }

    newtopCellPtr = nP;

}//end while

topCellPtr = newtopCellPtr;

}

int nth(int index) {

    struct CELL *cP = topCellPtr;

    for(int i=1; i < index; i++) {

        cP = cP->next;

    }//end for

    return cP->element;

}

void Append (my_STACK anotherStack) {

    anotherStack.Reverse_Stack();

    while(anotherStack.topCellPtr != NULL) {

        this->push(anotherStack.top());

        anotherStack.pop();

    }//

end while

    }

};

#endif 
```

我的主要功能如下：

```
#include <iostream> /*input output stream...
                     print on screen... keyboard input*/

//#include <stack>    //stack implementaiton

#include <ctype.h>

#include <string>

#include "generic_stack.h"

using namespace std;/*instead of specifically typing
                    std::cout we can simply write cout
                    this package also includes stack
                    container*/

enum state {FRESH, ID, NUM, ICT, LESS, GREATER, LESSDASH, PLUS, MINUS, ERR};

void reverse(my_STACK<char> &s) {

    my_STACK<char> s2;

    while(!s.empty()) {

        s2.push(s.top());

        s.pop();

    }

    s = s2;

}

void Reverse_Stack_Stack(my_STACK< my_STACK<char> > &s) {

    my_STACK< my_STACK<char> > s2;

    while(!s.empty()) {

        s2.push(s.top());

        s.pop();

    }

    s = s2;

}

void newLine(my_STACK<char> &P , state &current_state) {

    current_state = FRESH;

    while(!P.empty()) {

        P.pop();

    }

}

bool isToken(state s) {

    if(s == FRESH) {

        return false;

    } else if (s == ERR) {

        return false;

    } else {

        return true;

    }

}

bool canPush(char s , state current_state) {

    if(current_state == FRESH) {

        return true;

    } else

        if(current_state == NUM) {

            if(isdigit(s)) {

                return true;

            } else { 

                return false;

            }

    } else

        if(current_state == ID) {

            if(isalpha(s)) {

                return true;

            } else {

                return false;

            }

        } else

            if(current_state == LESSDASH) {

        if(s == '>') {

            return true;

        } else {

            return false;

        }

    }/*end lessdash*/ else

    if(current_state == LESS) {

        if(s == '=' || s == '-' || s == '>') {

            return true;

        } else { 

            return false;

        }

    }/*end less */ else

    if(current_state == GREATER) {

        if(s == '=') {

            return true;

        } else { 

            return false;

        }

    }/*end greater*/ else

    if(current_state == PLUS) {

        if(s == '+') {

            return true;

        } else {

            return false;

        }

    }/*end plus*/ else 

        if(current_state == MINUS) {

        if(s == '>') {

            return true;

        } else {

            return false;

        }

}/*end minus */ else {      

        return false;

        }

}

state nextState(state current_state, char c) {

        if(current_state == LESS && c == '-') {

            return LESSDASH;

        } else 

            if(c == '<') {

    return LESS;

    } else

    if(c == '>') {

    return GREATER;

    } else

    if(c == '+') {

    return PLUS;

    } else

    if(c == '-') {

    return MINUS;

    } else

    if(isalpha(c) || c == '_') {

    return ID;

    } else

    if(isdigit(c)) {

    return NUM;

    } else

    if(c == '~' || c == '&' || c == '^' || c == '*' || c == '(' || c == ')' || c == '[' || c == ']' || c == ':' || c == ',' || c == '=') {

        return ICT;

    }  else {

            return ERR;

        }

}

my_STACK< my_STACK<char> > maxMunch(my_STACK<char> S) {

    my_STACK<char> P;

    my_STACK< my_STACK<char> > T;

    state current_state = FRESH;

    while(!S.empty()) {

        while(S.top() == ' ' || S.top() == '\t' || S.top() == '\r' || S.top() == '\n') {

            S.pop();

            if(!P.empty()) {

                T.push(P);

                while(!P.empty()) {

                    P.pop();

                }

            }

            current_state = FRESH;

        }//end second loop

        if(canPush(S.top() , current_state)) {

            P.push(S.top());

            current_state = nextState(current_state, S.top());

            S.pop();

        } else {

            if(isToken(current_state)/*P is a valid token*/) {

                 T.push(P);

                 newLine(P , current_state);

             } else {

                cout << "Tokenizing Error";

                 newLine(P , current_state);

             }//end else

        }

    }//end loop

    T.push(P);

     if(S.empty()) {

            return T;//returns the tokens

        }

}

/**************************************************************************
Takes a string s and a stack theStack by refernce. Breaks the stirng s into
char data types and pushes them into the stack theStack.
***************************************************************************/
void Break_Up_Into_Stack(string s, my_STACK<char> &theStack)
{
    while (!theStack.empty())   {theStack.pop();} // empty the stack before use.

    for ( int pos = s.length() - 1; pos >= 0; pos--)
        theStack.push(s.at(pos));

}

/**************************************************************************
Takes a stack of chars s by value. Prints the stack on screen.
***************************************************************************/
void Print_Stack_Of_Char (my_STACK<char> s)
{
    cout << "-----top of stack: -----" << endl;
    while (!s.empty())  {cout << s.top(); s.pop();}
    cout << endl;
    cout << "---Bottom of stack: ----" << endl << endl;
}

void printMunch (my_STACK< my_STACK<char>> s)
{

    while (!s.empty())  {

       Print_Stack_Of_Char (s.top());

        cout << "" << endl; 

        s.pop();

    }

}

void Print_Tokens (my_STACK<my_STACK<char> > s)
{
    int count = 1;
    Reverse_Stack_Stack(s);
    while (s.empty() == false)
{
    cout << count << ". ";
    reverse (s.top());
    while (s.top().empty() == false)
    {
    cout << s.top().top();
    s.top().pop();
    }
    cout << endl;
    count++;
    s.pop();
    }
}

int main() //main function
{
//state A = GREATER;
 //char c = '-';
 //cout << canPush(c, A) << endl;
        string inputString;
    my_STACK<char> charStack;

    cout << "Enter the string: ";
    getline(cin, inputString);

    string testString1 = "83 - 8 * [aVar - (2 + 1)] / aVar2";
    string testString2 = "amountOfWork <= 1";

    Break_Up_Into_Stack(inputString, charStack);

    //Print_Stack_Of_Char(charStack);

    //reverse(charStack);

    my_STACK <my_STACK<char> > Final;

    Final = maxMunch(charStack);

    Print_Tokens(Final);

    //printMunch(Final);
    char inp;
    cin>>inp;

} 
```

我不知道错误可能是什么，我尝试了很多东西但它不起作用。该程序使用原始堆栈，但我需要实现自定义堆栈。

任何帮助，将不胜感激。

谢谢

**编辑：**

这是编译器输出的内容：

```
1>------ Build started: Project: project_7, Configuration: Debug Win32 ------
1>  main.cpp
1>c:\users\administrator\documents\visual studio 2010\projects\project_7\project_7\generic_stack.h(29): error C2143: syntax error : missing ';' before 'template'
1>c:\users\administrator\documents\visual studio 2010\projects\project_7\project_7\main.cpp(23): error C2039: 'empty' : is not a member of 'my_STACK<T>'
1>          with
1>          [
1>              T=char
1>          ]
1>c:\users\administrator\documents\visual studio 2010\projects\project_7\project_7\main.cpp(23): fatal error C1903: unable to recover from previous error(s); stopping compilation
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:20:18.750

```
template <class T>
struct CELL { T element; struct CELL *next; };

template <class T>
class my_STACK
{
private:    CELL *topCellPtr; 
```

您将其声明`CELL`为编译器可以用来创建类的模板。需要注意的`CELL`是，这在技术上不是一个类。因此，您不能有指向它的指针。你必须告诉`my_STACK`什么类`topCellPtr`指向，所以该行应该是：

```
private:    CELL<T> *topCellPtr; 
```

您可能必须在所有`my_STACK`'s 代码中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:20:15.410

您忘记专门`CELL`在堆栈类中使用：

```
private:    CELL *topCellPtr; 
```

应该

```
private:    CELL<T> *topCellPtr; 
```

这只是一个地方，还有很多其他地方。

# mysql - 如果表中的字段中有 1，则需要检查其他表

> ID：10145307
> 
> 赞同：1
> 
> 时间：2012-04-13T17:15:38.637
> 
> 标签：mysql

我有三张桌子

```
students: first_name, last_name, high_school_id, other_high_school

high_schols: id, title

other_high_schools: id, title, student_id 
```

我想显示每个学生的列表，其中包含以下信息：名字、姓氏、高中

high_schools 表包含一个学生可以选择的预填高中列表，如果他们没有找到他们的高中，他们会在“其他高中”字段中填写他们的高中。当学生提交表单时，他们的信息被存储，将 students.other_high_school 字段设置为 1 并将他们的 id (student.id = other_high_school.student_id) 连同他们高中的名称一起存储到 other_high_schools 表 (other_high_school.title) 中。

```
select 
 first_name, last_name, hs.title as high_school
from
 students s
left join
 high_schools hs
on
 s.high_school_id = hs.id 
```

这将返回 first_name、last_name、high_school，但是否可以修改该查询以检测 students.other_high_school = 1，然后加入 other_high_school 而不是 high_schools 表？

这不起作用，但应该有助于解释我要完成的工作：

```
select 
 first_name, last_name, hs.title as high_school
from
 students s

CASE s.other_high_school
 WHEN 0 THEN
  left join
   high_schools hs
  on
   s.high_school_id = hs.id
 WHEN 1 THEN
  left join
   other_high_school hs
  ON
   s.id = hs.student_id
 ELSE
  left join
   other_high_school hs
  ON
   s.id = hs.student_id
END CASE 
```

解决了

```
select 
 first_name, last_name, 
 IF(s.other_high_school = 1, ohs.title, hs.title) high_school
from
 students s
left join
 high_schools hs
on
 s.high_school_id = hs.id
left join
 other_high_schools ohs
on
 s.id = ohs.student_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T12:41:46.017

首先，我会重新考虑您的架构。你真的需要 high_schools 和 other_high_schools 在不同的表中吗？或者您是否可以在一张桌子上添加一个额外的标志，说明它是默认高中还是用户添加的高中？

其次，我感觉您的解决方案不会很好地扩展，因为您在所有三个表上都左连接。随着表的增长，我怀疑性能会很快下降。我会建议一个替代方案：

```
SELECT first_name, last_name,title
FROM (
SELECT first_name, last_name,title
FROM students s
    INNER JOIN high_schools hs ON s.high_school_id = hs.id
WHERE s.other_high_school=0
UNION
SELECT first_name, last_name,title
FROM students s
    INNER JOIN other_high_schools ohs ON s.high_school_id = ohs.id
WHERE s.other_high_school=1
) AS combined_schools
ORDER BY last_name,first_name 
```

使用正确的索引，这应该与您的解决方案一样快，并且可能会更好地扩展（但这完全取决于您的真实数据集的形状）。我添加了一个 ORDER BY 来展示您如何操纵组合结果。

# google-app-engine - GAE 是无状态的吗？有什么影响？

> ID：10145309
> 
> 赞同：4
> 
> 时间：2012-04-13T17:15:44.070
> 
> 标签：google-app-engine, stateless

我曾经被告知 GAE 是无国籍的。我一般理解无状态的概念，但我可以在概念上将其应用于 GAE 类型系统时使用一些指导。

我专门问这个问题是因为我开发的一个应用程序似乎存在干扰问题。也就是说，当两个或更多人同时使用它时，它会变得混乱。（我正在继续进行错误测试以确认该错误仅在同时使用期间发生。）我认为理论上可能会发生这种干扰的两种方式：A，不正确的 GQL 查询获取错误的数据库记录（我检查了这个，不）；或 b。在服务器级别。我的问题：后者真的可能吗？当应用程序正在服务时，一个用户可以通过改变程序中变量的状态来干扰另一个用户吗？或者，也许，这是否被无国籍状态所阻止？我很困惑，可能错误地陈述了这个问题。合十礼。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T18:35:33.140

我认为您混淆了一些术语。首先，您使用的是什么语言？这是java还是python？

告诉您 GAE 是“无国籍”的人不知道他们在说什么，否则您对他们告诉您的内容感到困惑。GAE 是一个 Web 服务器平台，您的应用程序的状态由您决定。HTTP 是一种无状态协议（GAE 用于构建使用 http 的 Web 应用程序），但您绝对可以通过这种方式打开会话并为用户实现有状态。

您描述的错误情况是并发之一。您在 GAE 中共享资源（数据存储、内存缓存等），并且如果您使用高复制数据存储，您还可以在数据存储中获得最终一致性。

GAE 不保证同一个服务器实例将服务于同一个人的多个请求，并且默认情况下没有多线程（无论如何在 java 中，我不确定 python）。在没有多线程的情况下，在任何给定时间任何实例上都只会有 1 个人。但是，如果您启用多线程，则必须确保您的代码是线程安全的，否则您可以让 2 个用户在单个实例上修改一个变量，但这并不是 GAE 独有的。

您绝对可以让 2 个用户在 2 个不同的服务器或相同的 memcache 条目上修改相同的数据存储实体，并且您需要使用事务等针对这种情况进行编码。此外，在最终一致性的情况下，写入和读取之间可能存在延迟，因此如果您写入数据而另一个用户立即读取它，他们可能不会得到相同的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T18:07:06.633

GAE still runs (virtual?) servers to handle HTTP requests. A server instance may start up, handle a number of requests, and shut down. At any given moment, a large number of server instances may all be running. Two sequential HTTP requests may end up being served by the same server instance or separate server instances. You need to design your software to be stateless, because you have no idea which server instance it runs on.

However, since GAE still runs virtual servers, it's possible that you can set some sort of global static variable that can be modified and accessed between multiple HTTP requests on a given server instance. Most likely you've done something along the lines of this.

This state is generally useless, because, as mentioned, you have no guarantees that subsequent HTTP requests will hit the same server instance, or any control on when a server instance is shut down. However, for example, if you wanted to run an experiment on how many requests each server instance serves on average, you probably could do that.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T19:45:54.390

关于“无国籍”的几点说明：

1.  HTTP 协议本身是无状态的，即请求不相互依赖（= 不需要以某种预定义的顺序调用）。

2.  Web 应用程序通常是有状态的。他们通过保存数据并基于该数据强制/限制某些操作来实现这一点，例如用户登录。

3.  数据可以通过多种方式保存在 Web 服务器上：数据库、缓存、内存。保存用户数据/状态的一种标准方法是[servlet 会话](http://docs.oracle.com/javaee/6/tutorial/doc/bnagm.html)。

4.  当人们说 App Engine 是无状态的时，他们通常指的是前端实例没有自己的永久存储（即可写文件系统）这一事实。要在前端实例上保存状态代码，必须使用 Google API 之一：datastore、memcache 等。

# .net - 在 WPF 中画一个十字

> ID：10145314
> 
> 赞同：7
> 
> 时间：2012-04-13T17:16:10.997
> 
> 标签：.net, wpf, wpf-controls

我有一个 WPF 控件。

我需要在背景中有一个十字架，像这样：
![在此处输入图像描述](../Images/dbfd02e1521c033065abc278719d3910.png)

之后，我可以在我的“交叉”背景上添加其他控件： ![在此处输入图像描述](../Images/b50ebfbc61700849e97d27b18bbc3a9e.png)

我应该如何绘制十字，知道当我调整控件大小时，十字应该跟随它的大小？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-13T17:39:47.873

快速而肮脏的方法是使用线条并将它们的坐标绑定到某些父容器的宽度和高度。像这样的东西：

```
<Grid Name="parent">
    <Line  X1="0" Y1="0" X2="{Binding ElementName='parent', Path='ActualWidth'}" Y2="{Binding ElementName='parent', Path='ActualHeight'}" 
           Stroke="Black" StrokeThickness="4" />
    <Line  X1="0" Y1="{Binding ElementName='parent', Path='ActualHeight'}" X2="{Binding ElementName='parent', Path='ActualWidth'}" Y2="0" Stroke="Black" StrokeThickness="4" />
</Grid> 
```

使用网格作为父级意味着在线条之后添加到网格中的任何其他子级都将出现在线条的顶部：

```
<Grid Name="parent">
    <Line  X1="0" Y1="0" X2="{Binding ElementName='parent', Path='ActualWidth'}" Y2="{Binding ElementName='parent', Path='ActualHeight'}" 
           Stroke="Black" StrokeThickness="4" />
    <Line  X1="0" Y1="{Binding ElementName='parent', Path='ActualHeight'}" X2="{Binding ElementName='parent', Path='ActualWidth'}" Y2="0" Stroke="Black" StrokeThickness="4" />
    <Label Background="Red" VerticalAlignment="Center" HorizontalAlignment="Center">My Label</Label>
</Grid> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T17:49:47.757

解决此问题的另一种方法是将所有内容放入 a`Viewbox`并使用`Stretch="fill"`. 它会在保持适当比例的同时为您重新调整大小。在这种情况下，您不需要使用数据绑定。

```
<Grid  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" >
    <Viewbox HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" Stretch="Fill">
        <Grid>
            <Line  X1="0" Y1="0" X2="100" Y2="100" Stroke="Black" StrokeThickness="1" />
            <Line  X1="0" Y1="100" X2="100" Y2="0" Stroke="Black" StrokeThickness="1" />
        </Grid>
    </Viewbox>
    <Label Background="Red" VerticalAlignment="Center" HorizontalAlignment="Center">My Label</Label>
</Grid> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-10-15T23:36:38.707

您可以使用单个`Path`项目，而不是为布局引擎创建两个元素：

```
<Path Data="M0,0L16,16M16,0L0,16" Stroke="Black" /> 
```

这是一个 16x16 “X” 符号：

[![在此处输入图像描述](../Images/12006cc201eccd867af03ced480a5cee.png)](https://i.stack.imgur.com/WM9Eq.png)

`Data`您可以在元素中指定不同的大小，或者`ViewBox`在需要时使用 a 将其缩放到其父大小。

请注意，线的末端是正方形的，并且略微超出 16x16 正方形：

[![在此处输入图像描述](../Images/06550d90c588c20742c6262c26992d94.png)](https://i.stack.imgur.com/TY7ES.png)

如果您希望该框正好是 16x16，您可以`Width="16" Height="16"`在 上设置`Path`，它会剪断行尾：

[![在此处输入图像描述](../Images/c6600175011fc0cd5153a16ac9f67515.png)](https://i.stack.imgur.com/NjsRo.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-11T15:04:36.590

Matt Burland 的回答使我的应用程序不断闪烁（因为我想对“父级”的引用调整了它的大小......然后调整了线条的大小，等等......）

所以我使用了 Stretch=Fill 并抑制了对“父级”的引用。现在工作得很好。

```
<Line x:Name="Line1" Visibility="Hidden" Stroke="Red" StrokeThickness="2" Stretch="Fill"
                X1="0" Y1="0" X2="1" Y2="1" />
<Line x:Name="Line2" Visibility="Hidden" Stroke="Red" StrokeThickness="2" Stretch="Fill"
                X1="0" Y1="1" X2="1" Y2="0" /> 
```

这是此解决方案和此解决方案的[混合](https://stackoverflow.com/questions/6846697/draw-diagonal-line-in-wpf-grid/31358487#31358487)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T17:25:54.347

```
 <Line  X1="10" Y1="10" X2="50" Y2="50" Stroke="Black" StrokeThickness="4" />
    <Line  X1="10" Y1="50" X2="50" Y2="10" Stroke="Black" StrokeThickness="4" /> 
```

如果您想知道 x 和 y 值来自哪里，只需画出笛卡尔坐标并插入即可

```
line 1 - point 1:(10,10), point 2:(50,50)
line 2 - point 1:(10,50), point 2:(50,10) 
```

参考形状 [http://msdn.microsoft.com/en-us/library/ms747393.aspx](http://msdn.microsoft.com/en-us/library/ms747393.aspx)

将标签放在 XAML 中 Line 元素之后/下方，这将使其绘制在线条上

# bash - 脚本 Bash 和历史 Unix

> ID：10145315
> 
> 赞同：1
> 
> 时间：2012-04-13T17:16:11.150
> 
> 标签：bash, unix

我刚开始在 UNIX 上使用 Script bash，但没有找到解决方案来编写历史记录中的第一个命令，例如，以 ls 开头。如果我写在 shell

```
history  
!ls 
```

它可以工作，但是当我要创建一个脚本时它不会工作。

这是我的示例代码

```
#!/bin/bash
set -o | grep history
set -o history
#echo "HISTFILE is $HISTFILE"
#history "!ls"; 
#history
#!ls
history #it works 
```

另一个问题：为什么`echo "HISTFILE is $HISTFILE"`只打印*HISTFILE*？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:05:00.160

shell 历史工具仅在[交互式 shell](http://www.gnu.org/software/bash/manual/bashref.html#Interactive-Shells)中可用，因此您不能 (*) 将`!ls`其放入脚本中。

`-i`(*) 除非您使用 shell选项启动脚本。但是，如果您正在使用文本编辑器编写脚本，如果您想重用命令，请剪切和粘贴或创建一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:38:05.933

您没有将任何内容存储到 HISTFILE。所以它是空的。尝试这个：

```
#!/bin/bash
set -o history
ls -l 
echo "hi"
echo "hello"
HISTFILE=`history`
echo -ne "HISTFILE is: $HISTFILE" 
```

这一行：

```
 HISTFILE=`history` 
```

将运行命令并将输出存储在 HISTFILE 中。

shell 的历史文件存储在主目录中，其路径在脚本中不可见。所以要检索它：`cat ~/.bash_history`

history 命令仅存储最后 1000 条命令。所以 !1 给出一个错误，这意味着它不再可用。所以只需执行历史记录和第一列给你的数字。您只能使用执行这些命令`!NUMBER`

喜欢：

```
$ !50 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:25:15.643

要获得历史上的第一个项目，以下方法不起作用？

```
echo !1 
```

至于你的第二个命令，它应该可以工作...... HISTFILE 变量可能没有正确定义。

尝试在脚本的第一行中使用“bash -li”而不是仅使用“bash”来初始化更多变量。

# javascript - javascript getDay 返回错误的数字

> ID：10145317
> 
> 赞同：1
> 
> 时间：2012-04-13T17:16:22.730
> 
> 标签：javascript, html

> **可能重复：**
> [为什么 getDay 返回不正确的值？(javascript)](https://stackoverflow.com/questions/834757/why-does-getday-return-incorrect-values-javascript)

我在 javaScript 中有以下代码

```
var cellDate = new Date('2012', '4', '13');
x.innerHTML=cellDate.getDay(); 
```

getDay 方法不是返回 5，而是返回 0。我做错了吗？这是jsfiddle链接

[http://jsfiddle.net/LPEXj/](http://jsfiddle.net/LPEXj/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T17:20:18.763

```
var cellDate = new Date('2012', '3', '13');
x.innerHTML=cellDate.getDay(); 
```

日期月份是零索引的，所以实际上四月是 3。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T17:19:12.663

月份是从 0 开始的。2012 年 5 月 13 日是星期日。

# iphone - 将 SQLite 数据导入 UIWebView

> ID：10145320
> 
> 赞同：0
> 
> 时间：2012-04-13T17:16:45.113
> 
> 标签：iphone, ipad, sqlite, xcode4, uiwebview

我正在修改一个 SDK 教程，该教程从一个非常基本的 SQLite DB 中提取，并在 UIImageView 中显示来自一个字段的数据，并在 UITextView 中显示描述。

我的项目要求将 TextView 更改为 WebView。

我非常接近，但我的挂断是这两行代码——我想！

```
NSString *descData = [NSData dataWithContentsOfURL:[NSURL URLWithString:[animal description]]];
[self.animalView.animalDesciption loadHTMLString:descData baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

一切正常（即应用程序不会崩溃），除了描述/UIWebView 中没有显示任何内容！

我真的不太了解所有这些东西，任何帮助将不胜感激！

如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:20:05.303

我能够弄清楚！这是我所做的：

```
NSString *html = [animal description];
[self.animalView.animalDesciption loadHTMLString:html baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

# database - 数据库中的一对多关系-设计理念

> ID：10145321
> 
> 赞同：9
> 
> 时间：2012-04-13T17:16:46.010
> 
> 标签：database, database-design

两个表之间的一对多关系应该用两个或三个表来实现？例如我们应该有：

```
author(id,otherAttributtes)
books(id,authorid,otherAttributes) 
```

或者

```
 author(id,otherAttributtes)
    books(id,otherAttributes)
    authorConnectsBooks(authorid,booksid) 
```

我更喜欢第一种方法，但我已经多次看到第二种方法和更复杂的应用程序。第一种方法有什么缺点，还是只是个人的方式？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-13T17:22:09.700

第一个示例显示了一对多关系，而第二个示例显示了多对多关系。

示例假设我们使用第一个示例

```
Author
AuthorID

Book
BookID
AuthorID 
```

您如何表示 Jane 和 Jon 都写了《Stackoverflow for fun》这本书？在这个关系表中你不能，你已经表示一个作者可以写很多本书。所以要么是简写的，要么是乔恩写的。如果只有其中一个人写了书，您就可以使用这种关系类型。然而，如果你想表明他们都写了这本书，你需要一个多对多的关系。

现在使用 Jane 和 Jon 的相同类比，您可以使用您的第二个示例代表这本书的两位作者 - 多对多关系。

* * *

让我们以 Stackoverflow 为例，从一对多关系开始，以多对多关系结束：

```
Authors
Joel
Jeff

Books
Stackoverflow Joel 
```

可怜的杰夫，上例中的 stackoverflow 并没有归功于他……所以我们需要解决这个问题：

```
Author
Joel
Jeff

Books
Stackoverflow

AuthorBooks
Stackoverflow Jeff
Stackoverflow Joel 
```

现在大家都很开心...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T17:29:38.153

应使用 2 个表实现一对多关系。

但是您在示例中提出的关系（作者和书籍之间）不是一对多，而是多对多。

“一个作者可以写很多本书，而一本书可以由一个或多个作者写。”

并且应该使用 3 个表来实现多对多关系。

祝你有美好的一天。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T17:23:39.137

一对多就是两张表。

第二个是多对多。

```
Authors
1 Larry Niven
2 Jerry Pournelle

Books
1 Integral Trees
2 King David's Spaceship
3 The Mote in God's eye

AuthorsBooks
1 1
2 2
1 3
2 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T17:20:15.740

如果关系实际上是一对多的，则不需要链接表（`authorConnectsBooks`在您的示例中）。但是，在您的示例中，您没有一对多的关系，因为一位作者可以写很多书，而一本书可以由许多作者写。在您的示例中，您实际上具有多对多关系。如果您实际上具有多对多关系，那么您确实需要一个链接表（`authorConnectsBooks`在您的示例中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-30T18:39:09.233

正如大家所说，第一个是一对多的关系，你不需要额外的表。只有两张桌子应该工作。但是在第二种情况下，由于它是多对多关系，您需要添加一个称为 Junction 或交叉引用表的额外表，因为大多数数据库管理系统只支持一对多关系，这是必要的通过第三个联结表手动实现这种关系。联结表的主键通常使用它连接的表的主键形成。这是一个 wiki 页面，它解释了您询问的完全相同的示例：

[关联](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)

# jsp - Struts 2 - 访问静态成员值。似乎忽略了 struts.properties 和 struts.xml 文件中的“struts.ognl.allowStaticMethodAccess”值

> ID：10145322
> 
> 赞同：1
> 
> 时间：2012-04-13T17:16:47.193
> 
> 标签：jsp, static, struts2, ognl, members

我正在尝试访问 JSP 中的静态成员值，如下所示： `"@package.subPackage.ClassName@STATIC_MEMBER"`

STATIC_MEMBER 被声明为`public static final String`分配了一个值，并且类具有公共范围。我的 struts.properties（位于 webapps\appName\WEB-INF\classes 文件夹下）有`struts.ognl.allowStaticMethodAccess=true`条目。但是，Struts 似乎忽略`struts.ognl.allowStaticMethodAccess=true`了 struts.properties 中的条目。

我在另一个项目中遵循了上述相同的步骤，并且运行良好。

注意：
1\. 我已经交叉检查了完整的包、类和 STATIC_MEMBER 名称的正确性。
2.页面上没有错误/异常。3\. 同一个JSP 可以从Action 类( )
中访问成员值。 4\. 我尝试从其他类访问静态成员，但不起作用。 5\. 我曾尝试删除 struts.properties 文件，并在 struts.xml 文件中的标签后创建一个条目，为 : 。重新启动并重新尝试。但是，不起作用。 6\. 从服务器中删除 Web 应用程序及其缓存（工作文件夹）后，我重新构建、重新部署并重新启动了服务器，但是没有工作。`<s:property value="actionMember"/>`

`<struts>``<constant name="struts.struts.ognl.allowStaticMethodAccess" value="true" />`

环境：Java 1.6、Struts 2.1、Tomcat 6.0 @ Windows XP 2002

请帮忙。
提前非常感谢！

--------------------代码更新---------------------------- ---

**班级**

```
package package1.subPackage1;

public class FooClassName {
   public static final int INVALID_LOGIN = 0;   
} 
```

**struts.properties**
`struts.ognl.allowStaticMethodAccess=true`

**JSP**
`<s:if test="errorType == @package1.subPackage1.FooClassName@INVALID_LOGIN"> some code here </s:if>`

**Action 类**：
1\. `private int errorType;`
2\. 有各自的 getter 和 setter`errorType`

甚至没有打印值，试过了：
`<s:property value="@package1.subPackage1.FooClassName@INVALID_LOGIN"/>`

# javascript - Javascript 不适用于 Django 模板继承

> ID：10145325
> 
> 赞同：1
> 
> 时间：2012-04-13T17:16:59.797
> 
> 标签：javascript, django, django-templates

我在使 Javascript 与 Django 模板继承一起工作时遇到了一些问题。根据 Opera，所有 javascript 及其 CSS 文件都可以正常加载，但 Javascript 无法正常工作，而不是显示 Javasrcript 表格，而是显示普通的 html 表格。如果我从孩子身上删除所有继承标签，一切正常。

我一直在使用 Dreamweaver 制作这些文件，但我怀疑这是否对这个问题有任何实际影响。

父级 - base.html 标头：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Untitled Document</title>
<link href="/SpryAssets/css/base_new.css" rel="stylesheet" type="text/css"><!--[if lte IE 7]>
<style>
.content { margin-right: -1px; }
ul.nav a { zoom: 1; }
</style>
<![endif]-->
<style type="text/css">
.item_table_main {  border-top-width: 0px;
    border-right-width: 0px;
    border-bottom-width: 0px;
    border-left-width: 0px;
    border-top-style: none;
    border-right-style: none;
    border-bottom-style: none;
    border-left-style: none;
}
</style>
</head>

<body> 
```

孩子的标题：

```
{% extends "base_new.html" %}

<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Untitled Document</title>
<style type="text/css">
    {% block css %}
body table tr {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    background-color: #FFF;
    border: 0px none #FFF;
}
</style>
<script src="/SpryAssets/SpryTabbedPanels.js" type="text/javascript"></script>
<script src="/SpryAssets/SpryCollapsiblePanel.js" type="text/javascript"></script>
<link href="/SpryAssets/SpryTabbedPanels.css" rel="stylesheet" type="text/css">
<link href="/SpryAssets/SpryCollapsiblePanel.css" rel="stylesheet" type="text/css">
<style type="text/css">
#apDiv1 {
    position:absolute;
    width:382px;
    height:252px;
    z-index:1;
    left: 1169px;
    top: 616px;
}
#apDiv2 {
    position:absolute;
    width:1575px;
    height:138px;
    z-index:2;
}
    {% endblock css %}
</style>
</head> 
```

这似乎与标题无关。Dreamweaver 在 child.html 的末尾生成此脚本

```
<script type="text/javascript">
var TabbedPanels1 = new Spry.Widget.TabbedPanels("TabbedPanels1");
var CollapsiblePanel9 = new Spry.Widget.CollapsiblePanel("CollapsiblePanel9", {contentIsOpen:false});
var CollapsiblePanel8 = new Spry.Widget.CollapsiblePanel("CollapsiblePanel8", {contentIsOpen:false});
var CollapsiblePanel6 = new Spry.Widget.CollapsiblePanel("CollapsiblePanel6", 
</script> 
```

我未能将其包含在内容块中 - 我花了半天时间才弄清楚这一点；p。

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:30:33.847

如果您正在扩展模板，您将需要定义它将在父模板中覆盖的块。您发布的子模板具有 {% block %} 模板标签中未包含的标记。

如果要更改文档的整个结构，则不需要模板继承。

有关模板继承的更多信息：[https ://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)

此外，一些来自其他框架/语言的人习惯于将[包含](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#include)作为重用的主要机制。您可能想看看这是否更符合您的需求。

编辑：我继续编辑您的模板，使它们具有适当的块。

**base.html**

```
{% block doctype %}<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">{% endblock %}
<html>

{% block head %}
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Untitled Document</title>
<link href="/SpryAssets/css/base_new.css" rel="stylesheet" type="text/css"><!--[if lte IE 7]>
<style>
.content { margin-right: -1px; }
ul.nav a { zoom: 1; }
</style>
<![endif]-->
<style type="text/css">
.item_table_main {  border-top-width: 0px;
    border-right-width: 0px;
    border-bottom-width: 0px;
    border-left-width: 0px;
    border-top-style: none;
    border-right-style: none;
    border-bottom-style: none;
    border-left-style: none;
}
</style>
</head>
{% endblock %}

<body>

{% block content %}

    {# base content here #}

{% endblock %}

</body>
</html> 
```

**child.html**

```
{% extends "base.html" %}

{% block doctype %}<!DOCTYPE HTML>{% endblock %}

{% block head %}

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Untitled Document</title>
<style type="text/css">
    {% block css %}
body table tr {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    background-color: #FFF;
    border: 0px none #FFF;
}
</style>
<script src="/SpryAssets/SpryTabbedPanels.js" type="text/javascript"></script>
<script src="/SpryAssets/SpryCollapsiblePanel.js" type="text/javascript"></script>
<link href="/SpryAssets/SpryTabbedPanels.css" rel="stylesheet" type="text/css">
<link href="/SpryAssets/SpryCollapsiblePanel.css" rel="stylesheet" type="text/css">
<style type="text/css">
#apDiv1 {
    position:absolute;
    width:382px;
    height:252px;
    z-index:1;
    left: 1169px;
    top: 616px;
}
#apDiv2 {
    position:absolute;
    width:1575px;
    height:138px;
    z-index:2;
}
    {% endblock css %}
</style>
</head>

{% endblock %}

{% block content %}

    {# child content here #}

{% endblock %}

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:32:48.953

你还没有理解模板继承是如何工作的。在子模板中，任何内容都不能位于块标记之外。（无论如何，所有这些 doctype/header 的东西都没有位置。）

但是为了在子模板中显示一个块，它需要在父模板中定义。您还没有定义 CSS 块，所以它被简单地忽略了。

# playframework-2.0 - 用 Crypto 解密字符串

> ID：10145331
> 
> 赞同：6
> 
> 时间：2012-04-13T17:17:54.507
> 
> 标签：playframework-2.0

Play Framework 2.0 提供 lib **Crypto**，见代码：[https ://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/libs/Crypto.scala](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/libs/Crypto.scala)

因此，如果要签署一个值，我可以使用：

```
Crypto.sign(username); 
```

但是如何再次解密用户名？没有方法**unsign**或**decrypt**吗？或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T11:01:07.457

该 API 用于创建签名、SHA1 哈希（如您在链接到的代码中所见）。这样做的目的不是可逆的（未签名），而是用作验证真实性。

例如，如果您签署了身份验证令牌，则可以通过检查`Crypto.sign(token) == tokenSignature`.

如果要加密和解密，请查看`Crypto.encryptAES`/ `Crypto.decryptAES`（在 Play 2.1 中添加）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:35:54.373

你到底想做什么？您只需签署一个值以确保它没有被更改。关键是您不能轻易“取消签名”它。

如果你想在你的应用程序中加密和解密一个值，你必须使用来自[`javax.crypto`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/package-summary.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:02:19.423

如果您需要加密/解密功能，您可以尝试添加[http://www.jasypt.org/](http://www.jasypt.org/)。

org.jasypt.util.text.BasicTextEncryptor 允许用户使用正常强度算法加密和解密文本数据。为了能够加密和解密。

比你可以做这样的事情：

```
...
BasicTextEncryptor textEncryptor = new BasicTextEncryptor();
textEncryptor.setPassword(myEncryptionPassword);
...
String myEncryptedText = textEncryptor.encrypt(myText);
String plainText = textEncryptor.decrypt(myEncryptedText);
... 
```

# rest - 如何使用 REST 从 Excel VBA 发布 Drupal 节点

> ID：10145334
> 
> 赞同：2
> 
> 时间：2012-04-13T17:18:17.657
> 
> 标签：rest, excel, vba

使用最新的 Drupal 6 和 Services 3.x 模块，并配置了 REST 服务器。创建了一个名为“test”的新内容类型，不需要 cck 字段，删除了 body 字段。我已经看到了几个使用相同方法测试 REST 服务的示例。

可以从 VBA 将其获取到 GET 和 DELETE 节点，但它不会 POST 或 PUT（创建或更新）。已阅读数十页和有关此的问题，REST 服务器配置似乎不错，VBA 提交似乎不错。

```
Dim MyURL as String
MyURL = "http://example.com/rest/node?node[type]=test&node[title]=newtestnode"
Set objHTTP = CreateObject("MSXML2.ServerXMLHTTP")

With objHTTP
    .Open "POST", MyURL, False
    .setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
    .send (MyURL)
End With 
```

POST 和 PUT 上返回的状态是“未经授权：用户 0 “匿名”的访问被拒绝，响应为空。被拒绝的错误源自内部服务模块。

我已经验证匿名可以通过浏览器创建这种类型，并且我可以从 VBA 中删除，所以我确定我的权限和设置是有序的。我从 PHP、Perl、Java、Ruby 中找到了许多示例，但没有从 Excel VBA 中找到。我还在另一个服务器和 drupal 网站上对此进行了测试，结果都一样。服务问题队列没有这样的东西。

不能做吗？非常令人沮丧！

# bash - Fortran 的麻烦。如何制作更高效更简单的界面。也许使用 Bash 脚本或 VBA？

> ID：10145339
> 
> 赞同：2
> 
> 时间：2012-04-13T17:18:43.733
> 
> 标签：bash, user-interface, vba, excel, fortran

我在一家使用一堆旧 Fortran 代码的公司工作。我已经非常精通 bash 脚本，因此我可以及时运行所有这些程序。

目前，我必须运行 ~ 13 个不同的 Fortran 程序才能获得 11 个扇区中的一个结果。因此，一个完整的结果需要 143 个程序。我希望能够及时使用程序中的不同输入创建 8 或 9 个完整的结果。

一个理想的情况是在一个 GUI 中进行设置，您可以在单独的选项卡上填写输入表单，然后在填写完所有表单后，您只需单击一个按钮即可获得结果。返回并更改表单中的一些变量，然后单击，弹出另一个结果。

我正处于十字路口，因为我已经有一个几乎可以做到这一点的 bash 脚本。但是，我想不出一种将它与“独立”GUI 混合的方法。我没有 Fortran 背景，但假设我可能必须学会让它工作。不过，我确实有一点 VBA 知识。

所以我要问的是最好的方法是什么？使用VBA编写shell脚本并执行？有某种组合 Fortran GUI 界面，可以将一堆变量传递给程序吗？

这些程序设置为从用户和先前程序创建的文件中获取输入。到目前为止，这里是 shell 脚本和程序提示的设置方式：

```
 #This file is a combination of NEWlen to bbdist as of now 4/5/2012
 #M. Conley

 ####################################################################################
 ##################### Please input all of your back break      #####################
 ##################### parameters in the block bellow!          #####################
 ####################################################################################
 project="Cobre Panama, Botija -2012"

 #Example of format
 #sec1="lwmin lwmax rwmin rwmax numberofcells"
 #----------------------------
 #| S |M |Max|Max| M| N |S
 #| e |i |Lft|Pln| a| u |e
 #| c |n |Wed|   | x| m |c
 #| t |  |   |   |  | b |t
 #| o |L |or |or | R| e |o
 #| r |e |   |   | i| r |r
 #|   |f |Min|Min| g|   |
 #|   |t |PS |Rgt| h| o |
 #| v |  |   |Wed| t| f |D
 #| a |W |   |   |  |   |D
 #| r |e |   |   | W| c |R
 #|   |d |   |   | e| e |
 #|   |  |   |   | d| ls|
 #---------------------------
 sec1="96 166 206 276 20 186"
 sec2="127 197 237 307 20 217"
 sec3="178 248 288 358 12 268"
 sec4="225 295 335 45 21 315"
 sec5="258 328 368 78 14 348"
 sec6="297 7 47 117 31 27"
 sec7="315 25 65 135 32 45"
 sec8="342 52 92 162 18 72"
 sec9="12 82 122 192 12 102"
 sec10="30 100 140 210 18 120"
 sec11="45 115 155 225 22 135"

 numofsec=2
 cmaxdip=90
 cmindip=0

 smaxdip=90
 smindip=20

 den=165.0

 l1r1prob=0.2000
 p1prob=0.2000
 jslf=001.00

 cellwidth=30
 ####################################################################################
 ##################### Start of Automation Loop. All Parameters #####################
 ##################### Have already been defined above!         #####################
 ##################### DO NOT WRITE BELOW THIS POINT!!!!!!!!    #####################
 ####################################################################################

 ########## Check for celdisx in directory #######
 if [ ! -e celdisx ]; then
 echo -e "\a""\x1b[31;01m""You are missing the CNI celdisx program from your directory!"
 echo -e "\a""\x1b[32;01m""Terminating Script - No results calculated."
 tput sgr0
     exit 0
 fi

 ########### Get Length and Spacing ###########
 echo "Please enter desired Mean Joint Lenght in meters, use 2 decimal places (#.##)"
 read jlen
 echo "Please enter desired Joint Spacing in meters, use 2 decimal places (#.##)"
 read jspace
 temp=$jlen
 jlen=$(echo "$temp" | awk '{ printf "%6s", $1}')
 temp=$jspace
 jspace=$(echo "$temp" | awk '{ printf "%5s", $1}')
 replace=$jlen$jspace
 #####

 ########### Get and Make new directory ##########
 echo "Please type the name of the new folder you wish to create to place this"
 echo "iteration of back break into."
 echo "No spaces please. Use _ or - in place of spaces."
 read dirname
 if [ -d $dirname ]; then
 rm -r $dirname
 fi
 mkdir $dirname
 cd $dirname
 for (( id = 1 ; id <= $numofsec ; id++ ))
 do
 if [ -d sec_$id ]; then
 rm -r sec_$id
 fi
 mkdir sec_$id
 done
 cd ..

 ########### Copy origional .dgl files into sec dir ####
 for (( id = 1 ; id <= $numofsec ; id ++ ))
 do
 cp s${id}.gld ${dirname}/sec_$id
 cp celdisx ${dirname}/sec_$id
 cp KNRST ${dirname}/sec_$id
 done

 ####################################################################################
 ##################### Start of Back break Programs. All Dir &  #####################
 ##################### Root .gld  have been placed.             #####################
 ####################################################################################
 cd $dirname

 for (( id = 1 ; id <= ${numofsec} ; id++ ))
 do

 #### Change into iteration and sector dir ###
 cd sec_$id

 #### change 1 to 01 bb prog very specific about 6 char strings wtf #####
 ida=${id}
 if [ ${#id} -eq 1 ]; then
 ida=0${id}
 fi

 ########## Check for celdisx in directory #######
 if [ ! -e celdisx ]; then
 echo -e "\a""\x1b[31;01m""You are missing the CNI celdisx program from your directory!"
 echo -e "\a""\x1b[32;01m""Terminating Script - No results calculated."
 tput sgr0
     exit 0
 fi

 #Creates Length File w/ user input Length & Spacing
 sed -r "2,$ s/^(.{73})(.{11})/\1$replace/" <s${id}.gld >s${ida}LeN

 ################### Runs Cell programs #######
 secid=sec${id}
 set ${!secid}

 celsrt<<xxxxx
 s${ida}LeN

 sec_${ida}.srt
 sec_${ida}.f
 Y

 TEST sec_${ida}
 3
 1
 ${2},${1},${cmaxdip},${cmindip}
 N

 2
 ${3},${2},${cmaxdip},${cmindip}
 N

 3
 ${4},${3},${cmaxdip},${cmindip}
 N

 sec_${ida}mv.met

 xxxxx
 met2acad <<xxxxx
 sec_${ida}mv.met
 e
 1

 xxxxx
 celdisx<<xxxxx
 sec_${ida}.srt
 sec_${ida}.dis
 m
 sec_${ida}.tbl
 ${5}

 xxxxx

 ############# run bbstdi ################
 rm -f s${ida}sdi

 bbstdi<<xxxxx
 1
 s${ida}sdi
 y
 ${id}sdi.rpt
 sec_${ida}.dis

 xxxxx

 ########### Run bbhst #######
 var=sec${id}
 set ${!var}

 bbhst<<xxxxx
 ${prjt} - ${area} - Sector ${ida}
 99
 99
 1
 s${ida}LeN
 ${3},${2}
 ${smaxdip},${smindip}
 s${ida}P1h
 Sec${ida}_hist.met
 xxxxx
 met2acad<<xxxxx
 Sec${ida}_hist.met
 e
 1

 xxxxx

 ######### Getting the DIST! ##########
 echo "Processing Sector ${ida}!!!"
 bbdist<<xxxxx
 s${ida}P1h
 s${ida}P1d

 xxxxx

 ########## Get set Numbers and run bbrsco ########

 lw1setn=$(sed -n "1p" s${ida}sdi | cut -c 11-14)
 ps1setn=$(sed -n "2p" s${ida}sdi | cut -c 11-14)
 rw1setn=$(sed -n "3p" s${ida}sdi | cut -c 11-14)

 #echo -e "$lw1setn\n$ps1setn\n$rw1setn"

 bbrsco<<xxxxx
 s${ida}rs ${ida}
 QUIT ,0.0
 GRD,${lw1setn} 100
 GRD,${ps1setn} 100
 GRD,${rw1setn} 100
 END
 xxxxx

 ############ Run bbpldc, create plan shear In ####
 var=sec${id}
 set ${!var}

 bbpldc<<xxxxx
 s${ida}rs
 ${ida},${6}
 s${ida}sdi,s${ida}P1d
 2,${den}
 1
 090.
 s${ida}P1c,$ps1setn
 STOP
 NO
 xxxxx

 ########### Calc Plane Shear bbplaf #######

 bbplaf<<xxxxx
 s${ida}P1c,s${ida}P1f,${ps1setn}
 R,090.,090.,001.
 R,009.,018.,009.
 T
 N
 xxxxx

 ######### Compute wedges ##################
 var=sec${id}
 set ${!var}

 bbwedc<<xxxxx
 s${ida}rs
 ${ida},${6}
 s${ida}sdi
 2,${den}
 1
 009.
 L1R1wc,${lw1setn},${rw1setn}
 ${2},${1},${smaxdip},${smindip}
 ${4},${3},${smaxdip},${smindip}
 STOP
 NO
 xxxxx

 for infile in L{1..1}R{1..1}wc
 do
 oufile=$(echo $infile | sed "s/c/f/g")

 bbwedf<<xxxxx
 ${infile},${oufile},4657,1500
 R,090.,090.,001.
 R,009.,018.,009.
 T
 M,M
 xxxxx

 done

 ######### combine Plane & Wedge Failures ####

 bf7com<<xxxxx
 YES
 ${ida}theo
 D,${ida}pred,${jslf}
 W,L1R1wf,${l1r1prob}
 P,s${ida}P1f,${p1prob}

 ${cellwidth}

 xxxxx

 ######## Plot the Curve ############
 var=sec${id}
 set ${!var}

 bfaplt<<xxxxx
 ${ida}theo
 1
 18
 DRY
 ${project} - Backbreak Results
 Sector ${ida} Wall Orientation DDR ${6}
 Joint Set Lenght Factor ${jslf}
 April 2012
 Trial Runs
 ${ida}bfa.met
 ${ida}theo
 9
 ${ida}pred
 18
 ${ida}pred
 9

 xxxxx
 met2acad <<xxxxx
 ${ida}bfa.met
 e
 1

 xxxxx

 ######## Make Table ####

 #### Change out of sector name

 cd ..

 #END LOOP
 done

 cd .. 
```

任何帮助或指示将不胜感激！！！！！！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:32:42.767

我理解你的困惑，但如果不是不可能的话，在这一点上用可用的数据给出任何明确的建议是非常困难的。

首先，你的环境；您提到了**bash 脚本**（甚至给出了一个示例），它指向一个***nix 框**，但随后您提到了通常与**Windows 系统相关联的****VBA**。***您是否在 Windows 机器上，并在 cygwin 等环境中使用 bash 或？***

 ***其次，你的 fortran 程序的“性质”——它们是做什么的？它们的**结构**如何等等...... ***Fortran 确实可以与 GUI 界面混合 - 这甚至不是 fortran 问题，而是选择兼容版本的 fortran 编译器和其他环境的更多问题（MATLAB via.mex文件，Excel 通过 .dll 文件，...），然后将它们混合起来。它本身就是一个区域。***
可以做到，而且做到了，但我再说一遍，这都是一般的谈话。

还有一些界面，例如**DISLIN、GINO**或**Winteracter**（您可以搜索名称以获取更多信息），它们可以创建“Fortran GUI”。我没有与两者中的任何一个合作过，但听说过关于两者的好消息。

***您的 fortran 程序，取决于它们现在的结构，可能需要稍作修改（重新组织）。这是否会出现问题取决于它们最初是如何编写/构造的。你可能需要学习一些关于语言的知识才能完成这部分。***

***这样分开，都是可以解决的问题。如果您通过 SO 搜索处理类似问题的问题，并尝试查看哪种方法最适合您，那将是明智的。在那之后，在你选择了要走的路之后，也许可以细化这个问题。***

如果其中任何一个有意义或没有意义，请在评论中给我打电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T07:08:32.453

如果您使用的是 bash，为什么不尝试 zenity。它可以用来弹出一个可以填写的表格，结果将直接返回到 bash，然后您可以使用其余的 bash 脚本。

另一种选择是使用curses，或者如果你对Fortran没问题，用VT100序列编写你自己的。

如果您在 Windows 环境中运行，请尝试将其编写为超文本应用程序 (HTA)。这基本上是一个带有一点 javascript/vbscript 的网页（无论你喜欢哪个）。从这里开始[http://msdn.microsoft.com/en-us/library/ms536496(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms536496(v=vs.85).aspx)***

# gdi+ - 在 EnumEnhMetaFile 解析期间从 Windows EMF 中提取图像？

> ID：10145340
> 
> 赞同：0
> 
> 时间：2012-04-13T17:18:45.660
> 
> 标签：gdi+, gdi, metafile

我正在修改的程序将 EMF 文件转换为不同的格式 (SVG)。它使用 EnumEnhMetaFile() 执行此操作，该函数为 EMF 的每条记录调用程序的解析例程。这对矢量素材非常有用。但是，它还需要能够在遇到 EMR_STRETCHDIBITS 时拉出位图。（最终目标实际上是一个 base64 编码的 PNG，但症结在于抓取位图。）微软是否在某个地方提供了一个函数来提取图像？向 EMF 添加位图的逆操作是 abitmap.Draw，我需要的是某种 abitmap.Read，它可以在 EnumEnhMetaFile 数据处理中进行操作。

是否有将 EMR_STRETCHDIBITS 提供的数据偏移字段转换为 Windows 位图的函数？请注意，我不想将 EMF 渲染为位图，我想要存储在 EMF 中的原始位图。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:08:12.713

这有效 - 但它保存的 PNG 是压缩的。

```
 BITMAPINFO *pbitmapinfo = (BITMAPINFO *)((char *)lpEMFR + pEmr->offBmiSrc);
        void *pBitsInMem = (char *)lpEMFR + pEmr->offBitsSrc;
        HBITMAP hbm;
        HDC tmpDC = CreateDC("DISPLAY", "", NULL, NULL);
        hbm = CreateDIBitmap(
            tmpDC,
            &(pbitmapinfo->bmiHeader),
            CBM_INIT,
            pBitsInMem,
            pbitmapinfo,
            DIB_RGB_COLORS);
        if(hbm){
          Gdiplus::Bitmap *pbmp = NULL;
          pbmp = Gdiplus::Bitmap::FromHBITMAP(hbm,NULL);
          CLSID pngClsid;
          GetEncoderClsid(L"image/png", &pngClsid);

          pbmp->Save(L"C:\\Temp\\scratch.png",&pngClsid, NULL);
          delete pbmp;
       }
       (void) DeleteObject(hbm);
       (void) DeleteDC(tmpDC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T03:07:53.057

不。

但这里是 Wine 的 PlayEnhMetaFile 用于绘制记录的代码的链接：http: [//source.winehq.org/source/dlls/gdi32/enhmetafile.c ?v=wine-1.5.2#L1111](http://source.winehq.org/source/dlls/gdi32/enhmetafile.c?v=wine-1.5.2#L1111)

它非常简单，并且 StretchDIBits 调用具有位、BITMAPINFO 和 iUsage - 您需要插入 CreateDIBSection 和 SetDIBits 以获得 HBITMAP 的所有信息。（如果您使用 CreateDIBitmap，您可能会在此过程中丢失信息，具体取决于当前的显示模式。呃。而且您不能直接将这些位复制到 DIB 中，因为这些位可能是 RLE 压缩的。SetDIBits 将正确处理。 )

好的，所以您确实需要获取传递给 SetDIBits 的高度。将其从 BITMAPINFO 中取出是有问题的，因为它实际上可能是具有不同结构的 BITMAPCOREINFO。首先创建 HBITMAP 然后检查它的高度可能是最简单的。

我认为如果使用 DIB_PAL_COLORS，调色板将不在 BITMAPINFO 中，而是由先前的记录选择到 HDC 中，因此您最好播放那些操纵 DC 的记录并使用您提供的 HDC。

所以，把它们放在一起，这样的东西（未经测试，缺乏错误检查）应该可以工作：

```
HBITMAP bitmap_from_stretchdibits(HDC hdc, const ENHMETARECORD *lpEMFR)
{
    const EMRSTRETCHDIBITS *pStretchDIBits = (const EMRSTRETCHDIBITS *)lpEMFR;
    BITMAP bm;
    HBITMAP hbm;

    hbm = CreateDIBitmap(
        hdc,
        (const BITMAPINFO *)((const BYTE *)lpEMFR + pStretchDIBits->offBmiSrc),
        pStretchDIBits->iUsageSrc,
        NULL,
        NULL,
        0);

    if (hbm)
    {
        GetObjectA(hbm, sizeof(bm), &bm);

        SetDIBits(
            hdc,
            hbm,
            1,
            abs(bm.bmHeight),
            (const BYTE *)lpEMFR + pStretchDIBits->offBitsSrc,
            (const BITMAPINFO *)((const BYTE *)lpEMFR + pStretchDIBits->offBmiSrc),
            pStretchDIBits->iUsageSrc);
    }

    return hbm;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T18:24:47.780

我刚刚发现的一件事是，如果 HBM 是使用 CreateDIBitmap 创建的，GetObjectA 将返回一个 NULL bmbits 指针。为了让 bm.bmbits 指向数据，必须使用 CreateDIBSection。问题是第二个函数显然无法从 EMR_STRETCHDIBITS 记录中读取数据！所以你的选择是：

1.  数据从文件读取到 HBM，但没有通过此机制指向该数据的指针
2.  HBM 创建了正确的大小，但没有从文件中读取数据。机制返回一个指针，但它指向一个充满零值的缓冲区！

我正在重新检查这一点，因为 GDI+ 保存到文件功能没有保留 JPEG 质量 = 100 模式或 PNG 的所有可用数据，这是我仅有的两个文件类型选项。试图将数据放入 GDK::Pixbuf。大概在 Bitmap 或 HBitmap 对象的某个地方有一个指向它的指针。

# excel - 坚持使用 SUMIF 和连接的 excel 函数

> ID：10145343
> 
> 赞同：0
> 
> 时间：2012-04-13T17:18:52.360
> 
> 标签：excel, excel-2010

我找到了一个关于制作燃尽图和燃尽图的好教程。无论我尝试什么，我都无法获得相同的功能。似乎excel 2007和2010在函数必须如何编写方面有所不同？教程：[http ://rapidapplicationdevelopment.blogspot.com/2010/02/video-how-to-create-burndown-charts-for.html](http://rapidapplicationdevelopment.blogspot.com/2010/02/video-how-to-create-burndown-charts-for.html)

基本上我只是想添加数字。每行都有一个带有随机数的列和一个显示该行之前的数字总数的列。所以最后一行将显示所有数字的总和。第 5 行将仅显示第 1、2、3、4 和 5 行的数字总和。我希望它有意义:)

根据教程的功能：

```
=SUMIF([Created Date],CONCATENATE("<=",Table_owssvr_1[[#This Row],[Released]]),[Points]) 
```

但是当我将它粘贴到我自己的 excel 工作簿中时，它会出错。据我所知，我必须用“;”来改变“，”。“#This Row”没有被重新定义，但我最好的猜测是它必须被替换为“@”。

这是我能得到的最接近的：

```
=SUMIF([Oprettet dato]; CONCATENATE("<=";Table2[@];[Sprint start]);[Estimat]) 
```

是因为 2007 年和 2010 年之间的差异，还是因为我太菜鸟了？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:43:28.243

在 Office 2010 中，`[#This Row]`符号已被压缩以改善用户体验。该`[#This Row]`符号已替换为`@`公式中的符号，并且在可能的情况下，已删除公式中对显式表名引用的要求。

```
=SUMIF([Oprettet Date]; CONCATENATE("<=";[@Sprint start]);[@Estimat]) 
```

请注意，使用`;`而不是`,`特定于区域设置

* * *

**回应评论**：对不起，一个额外的行参考滑入，试试这个

```
=SUMIF([Oprettet Date]; CONCATENATE("<=";[@Sprint start]);[Estimat]) 
```

# c# - 加入亚音速查询

> ID：10145345
> 
> 赞同：-1
> 
> 时间：2012-04-13T17:18:59.917
> 
> 标签：c#, subsonic

我一直在尝试找到一种在 Subsonic 中为我负责更改的网站执行连接的合理方法，但搜索网络并没有真正帮助，而且似乎 SubSonic 的网站离线了一段时间。

这是我正在使用的 - 这是现有的查询。

```
IDataReader rdr = FOO.Account.FetchByQuery(
new SubSonic.Query(FOO.Tables.Account).AddWhere(FOO.Account.Columns.MemberNumber, MemberNumber).AND(FOO.Account.Columns.Active, true)); 
```

我需要做的是这样的事情，但这失败了：

```
 IDataReader rdr = FOO.Account.FetchByQuery(
new SubSonic.Query(FOO.Tables.Account, FOO.Tables.Managers).AddWhere(FOO.Account.Columns.MemberNumber, MemberNumber).AND(FOO.Account.Columns.ManagerID, FOO.Managers.Columns.ManagerID).AND(FOO.Account.Columns.Active, true)); 
```

有人可以指出正确的方向并告诉我如何使用 SubSonic 进行表连接吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:30:17.913

我对查询使用不同的语法，但是...

```
var qry = new Select().From(FOO.Tables.Account)
    .InnerJoin(FOO.Tables.Managers) // If the DB has no relation specify columns.
    .And(FOO.Account.Columns.MemberNumber).IsEqualTo(MemberNumber)
    .And(FOO.Account.Columns.ManagerID).IsEqualTo(FOO.Managers.Columns.ManagerID);
    .And(FOO.Account.Columns.Active).IsEqualTo(true)
;
var rdr = qry.ExecuteReader(); 
```

# php - 日历价格

> ID：10145346
> 
> 赞同：1
> 
> 时间：2012-04-13T17:19:03.540
> 
> 标签：php, mysql, sql

我们希望创建一个工作系统，允许供应商根据时间指定不同的价格。因此，在晚上 9 点至 5 点的 MF 上，他们可能会为周六至周日晚上 10 点至 9 点收取的特定工作收取 10 美元。如何设计数据库，以便跟踪为不同时间指定的不同价格？我没有任何标准时间，但提供者可以自由选择他们想要的任何时间。

我正在考虑以下结构：

价格

```
provider_id
task_id
price
Mon
Tues
Wed 
Thurs
Friday
Saturday
Sunday
time_start
time_end 
```

因此，如果任务在 MF 上，则将为 Mon、Tues 等列输入“1”，但为周六、周日列输入 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:52:27.940

我肯定会把它分成几个表。您可以在一张桌子上完成所有操作，但最终，您将拥有更多桌子的更多灵活性。

我建议采用以下结构：

提供者表

*   ID
*   姓名
*   其他任何特定于提供商的

任务表

*   ID
*   姓名
*   任何其他特定任务

时间表

*   ID
*   dayOfWeek 枚举
*   开始时间
*   时间结束

PriceTable - 将时间和任务连接​​在一起

*   ID
*   时间ID
*   任务ID
*   价格

工作表 - 将价格和供应商连接在一起

*   ID
*   价格ID
*   提供者 ID
*   任何其他特定工作

这可能看起来像很多前期工作，但后来，随着您的数据库扩展，您会很高兴您做到了。

# python - 使用 map() 将字符串转换为整数

> ID：10145347
> 
> 赞同：22
> 
> 时间：2012-04-13T17:19:08.093
> 
> 标签：python

在下文中，我尝试使用 map 函数将第一个列表转换为整数列表，我该如何实现这一点

```
T1 = ['13', '17', '18', '21', '32']
print T1
T3=[map(int, x) for x in T1]
print T3
[[1, 3], [1, 7], [1, 8], [2, 1], [3, 2]]

Expected is:

T3=[13,17,18,21,32] 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-13T17:20:05.083

```
>>> T1 = ['13', '17', '18', '21', '32']
>>> T3 = list(map(int, T1))
>>> T3
[13, 17, 18, 21, 32] 
```

这与以下内容相同：

```
>>> T3 = [int(x) for x in T1]
>>> T3
[13, 17, 18, 21, 32] 
```

所以你正在做的是

```
>>> T3 = [[int(letter) for letter in x] for x in T1]
>>> T3
[[1, 3], [1, 7], [1, 8], [2, 1], [3, 2]] 
```

希望这能消除混乱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T17:21:36.530

```
>>> T1 = ['13', '17', '18', '21', '32']
>>> print [int(x) for x in T1]
[13, 17, 18, 21, 32] 
```

您的列表理解中不需要地图。Map 创建另一个列表，因此您最终得到一个列表列表。

警告：如果字符串被授予为数字，这将起作用，否则将引发异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-24T17:20:44.210

你可以这样做

```
>>>T1 = ['13', '17', '18', '21', '32']
>>>list(map(int,T1)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-18T15:10:15.293

1.首先，map函数是map(func,iterable) 2.看这个例子：

```
T1=['13','17','18','21','32']
T3=[map(int, x) for x in T1]
print T3
[[1, 3], [1, 7], [1, 8], [2, 1], [3, 2]] 
```

when choose x out,such as '13',is a sequence,so map(int,'13') return [1,3],so the iterable in map(func,iterable) is string.

3.看这个例子：

```
T1 = ['13', '17', '18', '21', '32']
>>>list(map(int,T1)) 
```

map 函数中的可迭代对象是 list.so 'int' 适用于 '13' 作为 13

# php - Dropdownmenu SELECTED 值根据从 DB 返回的值

> ID：10145350
> 
> 赞同：1
> 
> 时间：2012-04-13T17:19:13.560
> 
> 标签：php, javascript

我要做的就是根据从数据库返回的特定值设置下拉菜单的选定值

就像如果有人将他的性别保存为“男性”并且他想更新他的个人资料，那么显示在“性别”下拉列表中的选定选项应显示为“男性”，因为如果这没有发生“可怜的人因为这个小问题而变成了女性”在我的代码中'请帮助！！！！！！！

我当前的代码：

```
<select name="Gender" id="Gender">
                  <option selected="selected"><?php echo $row_Recordset1['Gender']; ?></option>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                </select> 
```

上面的代码工作正常，但会导致下拉列表中的值重复，如男性男性女性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:25:06.770

做一个循环

```
$gen=new array('male'=>"Male",'female'=>"Femele");
while(list($k,$v)=each($gen)){
      if($row_Recordset1['Gender']==$k){
               $sel="selected";
       else{
            $sel="";
       }
        echo "<option value='$k' $sel>$v</option>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:28:03.113

您可以在每个标签中使用 if 语句，如下所示

```
<select name="Gender" id="Gender">         
              <option value="Male" <?php if($row_Recordset1['Gender']=='Male'){echo 'selected';}?>>Male</option>
              <option value="Female" <?php if($row_Recordset1['Gender']=='Female'){echo 'selected';}?>>Female</option>
</select> 
```

# android - 查看多屏支持

> ID：10145351
> 
> 赞同：0
> 
> 时间：2012-04-13T17:19:14.707
> 
> 标签：android, view, bitmap, screen

我知道有很多关于这个话题的信息，但我还是有点困惑。我为一个适用于位图和文本的 android 应用程序制作了一个类视图。

我这样定义文本位置：

```
canvas.drawText("SCORE: " + score, (canvas.getWidth() - 150),
                    (canvas.getHeight() - 20), paintScore); 
```

举个例子，但我知道这不是最好的方法，因为它看起来就像我在手机上想要的那样，但在一个更小或更大的屏幕上，它看起来很糟糕，或者只是在屏幕外。

我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:35:10.470

最好选择您的宽度以相对于画布的大小来定位事物 - 所以找出您希望文本在手机上 b 的位置 - 例如，如果您希望它从中心开始：

```
int x = canvas.getWidth()/2 
```

如果这些相对类型测量结果不理想，作为最后的手段，android 会指定一种特殊类型的资源 (@dimen)，您可以在各种值文件夹（例如`values-small/dimen.xml`or `values-xlarge/dimen.xml`）中定义它并在那里硬编码整数值。[（如文档](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)中所见），然后像检索任何其他资源一样检索它们：

```
getResources().getDimensionPixelOffset(R.dimen.score_margin) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:43:52.370

你有很多解决方案：

1) 使用与密度无关的像素 (dip)：

这是一种从 px 转换为 dip 的方法：

```
public static int pxToDip(Activity activity, int size){

    Resources r = activity.getResources();
    int dipSize = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, size, r.getDisplayMetrics());

    return dipSize;

} 
```

2）使用百分比：

获取屏幕大小，将其与所需的文本大小进行比较，并以百分比添加边距

# php - 循环数据 - 循环两次只加载一个数据

> ID：10145354
> 
> 赞同：1
> 
> 时间：2012-04-13T17:19:18.490
> 
> 标签：php

我有一个 while 循环，它在 json 编码数据之前创建一个数组，但是虽然我已经测试过它并且我得到了 2 行返回并且它循环了两次..我的 json 编码只显示其中一行数据 =/

这是我的 php：

```
 $get = mysql_query("SELECT * FROM 
         player t1 INNER JOIN game t2
         ON t1.sid=t2.id
        WHERE uid='1'") or die(mysql_error());

    while($row = mysql_fetch_assoc($get)){

    echo 'looped<br/>'; //testing row count

        $data[$row['x']] = Array();
        $data[$row['x']][$row['y']][0] = $row['bid'];
        $data[$row['x']][$row['y']][1] = $row['sid'];
        $data[$row['x']][$row['y']][2] = $row['width'];
        $data[$row['x']][$row['y']][3] = $row['height'];
        $data[$row['x']][$row['y']][4] = $row['offsetx'];
        $data[$row['x']][$row['y']][5] = $row['offsety'];

  }

 $data1 = json_encode($data); 
```

我总共有 2 个循环，但我的 json 只有一个数据集，这让我感到困惑：

```
 {"10":{"11":["1","22","1","1","0","0"]}} 
```

它缺少将创建此数据的第一行数据以及上面的数据：

```
{"10":{"10":["1","7","2","2","0","32"]}}; 
```

我想知道我是否覆盖了一些如何？我认为它不会将 im 分配给数组，并且它们的 X:Y 是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:26:54.677

```
while($row = mysql_fetch_assoc($get)){
    $data[$row['x']] = Array();
} 
```

如果它还不存在，您应该只设置它：

```
while($row = mysql_fetch_assoc($get)){
    if(!array_key_exists($row['x'], $data)) {
        $data[$row['x']] = Array();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:21:25.380

在循环之外分配和分配您的 $data 数组。

# file - 批处理文件 >NUL >> %dir% 错误

> ID：10145359
> 
> 赞同：0
> 
> 时间：2012-04-13T17:19:46.050
> 
> 标签：file, batch-file, redirect

我制作了这个批处理文件，它工作正常，除了子菜单 4 重定向 ping 192.168.1.1 -n 1 -w !thyme! 到 NUL 而不是 echo ping 192.168.1.1 -n 1 -w !thyme!>NUL to %dir101%

```
@echo off & SETLOCAL EnableDelayedExpansion
title TXTanimation
set dir101=C:\USers\Jake\Desktop\file.bat
goto jakeinc
echo Lets make a text animation
pause
set /p dir101=where will the .bat be saved:
:jakeinc
echo @ECHO OFF > %dir101%
echo: >> %dir101%
:menu
echo 0=Edit important information
echo 1=Display .txt
echo 2=Play sound
echo 3=Close sound player
echo 4=Add nessicary wait between .txt
echo 5=Label point
echo 6=Edit variable
echo 7=Goto point
echo 8=Create IF sentence
echo 9=End it
Set /p choose=which one:

If '%choose%'=='0' (
SEt /p title=What is the title
:LOL101
set /p color=what color do you want type test to experiment with the colors
If '!color!'=='test' goto tester
goto model
:tester
SEt /p test=Please give hexadecimal number type exit to leave:
if '!test!'=='exit' goto LOL101
color !test!
goto tester
:model
echo title %title% >> %dir101%
echo color %color% >> %dir101%
goto menu
)

If '%choose%'=='1' (
set /p dir=what is the dir of your .txt:
)
If '%choose%'=='1' (
echo cls >> %dir101%
echo type %dir% >> %dir101%
goto menu
)
If '%choose%'=='4' (
SEt /p thyme=How much milliseconds 250 is usual:
echo ping 192.168.1.1 -n 1 -w !thyme!>NUL >> %dir101%
goto menu
)
If '%choose%'=='9' (
echo Thanks for making
pause
exit /b
) 
```

是的，这是一个很大的程序，但我的错误很小。我可以键入模板并插入变量吗？但`echo ping 192.168.1.1 -n 1 -w !thyme!>NUL >> %dir101%`我需要它来说明要重定向的 >NUL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:30:51.890

当您尝试将这些命令回显到另一个批处理中时，您需要正确地转义这些命令。试试这个：

```
echo ping 192.168.1.1 -n 1 -w ^!thyme^!^>NUL >> %dir101% 
```

将其写入您的`%dir101%`批处理中：

```
ping 192.168.1.1 -n 1 -w *value_of_thyme_variable* > NUL 
```

批量转义大多数`^`功能。仅供参考：这**不适**用于`%`变量值。如果您需要`%`像这样转义变量值`%test%`，可以这样做：`%%test%%`，但正如您所见，它确实适用于`!`上面的变量值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:51:29.950

您只需要转义重定向符号，以便它得到回显而不是被解释为重定向。

```
echo ping 192.168.1.1 -n 1 -w !thyme! ^>NUL >>%dir101% 
```

警告：您的子菜单 0 可以正常工作，但您可能正在养成一个坏习惯，将来会给您带来麻烦。通常不应将标签放在带括号的代码块内。阅读[（Windows 批处理）Goto inside if 块的行为非常奇怪](https://stackoverflow.com/questions/8481558/windows-batch-goto-within-if-block-behaves-very-strangely)，以了解如何导致问题的示例，所选答案解释了为什么它会导致问题。

# asp.net-mvc-3 - 为使用 HTTP 方法约束选择错误路由的链接生成 ASP.NET MVC URL

> ID：10145371
> 
> 赞同：0
> 
> 时间：2012-04-13T17:20:31.697
> 
> 标签：asp.net-mvc-3

我指定了以下路由 - MyHttpMethodConstraint 是一种检查由变量覆盖的 HTTP 方法的路由。

```
routes.MapRoute("Retrieve", "{controller}/{id}/{action}", new { action = "retrieve" }, new { action = "create|retrieve|update|delete", httpMethod = new MyHttpMethodConstraint("GET", "HEAD"), id = new GuidRouteConstraint() });
routes.MapRoute("Update", "{controller}/{id}", new { action = "update" }, new { action = "update", httpMethod = new MyHttpMethodConstraint("PUT"), id = new GuidRouteConstraint() });
routes.MapRoute("Delete", "{controller}/{id}", new { action = "destroy" }, new { action = "delete", httpMethod = new MyHttpMethodConstraint("DELETE"), id = new GuidRouteConstraint() });
routes.MapRoute("Create", "{controller}", new { action = "create" }, new { action = "create", httpMethod = new MyHttpMethodConstraint("POST") }); 
```

Everthing 被正确路由到 Actions，但是 Url.ActionLink 的 URL 生成并没有像我希望的那样工作（使用受限于 HTTP GET 方法的路由），而是找到那些受限于 POST/PUT/DELETE 的路由，因此错误的网址。我尝试重新排序路线，但这无济于事。我希望 URL 生成忽略约束。

除了构建我自己的 ActionLink 方法之外，是否有解决方法？

**编辑**

列表底部还有一条默认路由：

```
routes.MapRoute("Default", "{controller}/{action}", new { controller = "home", action = "index" }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:23:38.160

问题已解决 - 问题在于它不适用于指向创建操作的链接（即，当 GET 时），因为它没有使用上述任何路由，而是底部的默认路由（没有任何约束）。我的有效路线列表（包括默认路线）是：

```
routes.MapRoute("Retrieve/UpdateSetup/DeleteSetup", "{controller}/{id}/{action}", new { action = "retrieve" }, new { action = "retrieve|update|delete", httpMethod = new MyHttpMethodConstraint("GET", "HEAD"), id = new GuidRouteConstraint() });
routes.MapRoute("CreateSetup", "{controller}/create", new { action = "create" }, new { action = "create", httpMethod = new MyHttpMethodConstraint("GET", "HEAD") });
routes.MapRoute("Update", "{controller}/{id}", new { action = "update" }, new { action = "update", httpMethod = new MyHttpMethodConstraint("PUT"), id = new GuidRouteConstraint() });
routes.MapRoute("Delete", "{controller}/{id}", new { action = "delete" }, new { action = "delete", httpMethod = new MyHttpMethodConstraint("DELETE"), id = new GuidRouteConstraint() });
routes.MapRoute("Create", "{controller}", new { action = "create" }, new { action = "create", httpMethod = new MyHttpMethodConstraint("POST") });

routes.MapRoute("Default", "{controller}/{action}", new { controller = "home", action = "index" }); 
```

# c++ - Convert enumeration to string

> ID：10145374
> 
> 赞同：0
> 
> 时间：2012-04-13T17:20:51.273
> 
> 标签：c++, boost, enums, key-value

I am trying to build a function that converts an item from an enum to its corresponding string. The enums I use are fairly long, so I didn't want to use a switch-case. I found a method using boost::unordered_map very convenient, but I don't know how to make a default return (when there is no item matching the enum).

```
const boost::unordered_map<enum_type, const std::string> enumToString = boost::assign::map_list_of
(data_1, "data_1")
(data_2, "data_2"); 
```

I tried to create an additional function:

```
std::string convert(enum_type entry)
{
    if (enumToString.find(entry))       // not sure what test to place here, 
        return enumToString.at(entry);  //because the find method returns an iter
    else
        return "invalid_value";
} 
```

I even tried something exceedingly wrong:

```
std::string convert(enum_type entry)
{
    try{
        return enumToString.at(entry);
    }
    catch(...){
        return "invalid_value";
    }
} 
```

Result: evil "Debug" runtime error. Can somebody give me a suggestion on how to either
1) find an easier method to convert enum to a string with the same name as the enum item
2) find a way to use already built boost methods to get a default value from a hash map (best option)
3) find what to place in the test to use a function that returns either the pair of the key-value, or a different string if the key is not found in the map.
Thank you very much.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:25:52.883

For the conversion routine:

```
std::string
convert( enum_type entry )
{
    boost::unordered_map<enum_type, std::string>::const_iterator
                        retval = enumToString.find();
    return retval == enumToString.end()
        ? "invalid_value"
        : retval->second;
} 
```

Note that if the enum contains no assigned values, a simple `char const* []` will do the trick.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T09:32:08.780

This is not an explict answer to your question, but I recommend using another data structure:

Use a **bidirectional map** , e. g. [Boost.Bimap](http://www.boost.org/doc/libs/1_55_0/libs/bimap/doc/html/index.html "Boost.Bimap")

> Boost.Bimap is a bidirectional maps library for C++. With Boost.Bimap you can create associative containers in which both types can be used as key. A `bimap<X,Y>` can be thought of as a combination of a `std::map<X,Y>` and a `std::map<Y,X>`.

With a bidirectional map (you can also implement a basic one with two `std::unordered_map` instances) you are able to:

*   Retrieve an enumerator for a `std::string`.
*   Retrieve a `std::string` for an enumerator.

If you encapsulate the retrieve methods in a template class you are able to minimize DRY. E. g. you can pass the enumerator/`std::string` associations via `std::pair` instances to the constructor which expects one `std::initializer_list` argument.

# ios - 如何拥有 iOS 应用程序的单一代码库，但从客户端特定包加载图像、配置设置等

> ID：10145375
> 
> 赞同：0
> 
> 时间：2012-04-13T17:20:53.663
> 
> 标签：ios, settings.bundle

有没有办法在我的 iOS 应用程序中包含特定于客户端的捆绑包？我想保持我的代码库相同，但是对于我向其出售应用程序的每个客户，我想包含一个特定的捆绑包。该捆绑包将包含图像（应用程序图标？）、文件和配置设置等内容。这是可能的，我将如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:24:57.823

1.  您可以将代码保存在 git 存储库中。主/共享代码可以在一个仓库中。然后您将其作为子模块包含在其他每个客户端的 git 存储库中。

2.  你可以为每个客户做一个构建目标（取决于你有多少客户。从 2-10 发送）

# javascript - 跨窗口应用功能

> ID：10145381
> 
> 赞同：0
> 
> 时间：2012-04-13T17:21:16.563
> 
> 标签：javascript, dom, iframe, parent

假设主窗口 (w2) 通过 iFrame (w1) 插入到我无法修改源代码的页面。当您在 w2 中提交表单时，会插入第三个 iFrame (w3)。当我编写代码时，w1 并不存在。我需要的是从 w3 调用一个函数（影响 w2）但保持（w1）工作。这是没有 w1 的代码

```
var cross = "javascript: window.parent.$('#"+div_id+"').html(document.body.innerHTML); void(0);"; 
```

谢谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T01:18:14.587

我做到了`window.parent`

```
var cross = "javascript:"+
    window.parent.$('#"+div_id+"').html(document.body.innerHTML);"+
    "void(0);"; 
```

# php - 设置 PHP 类变量

> ID：10145386
> 
> 赞同：1
> 
> 时间：2012-04-13T17:21:26.550
> 
> 标签：php, oop

我正在尝试将 OOP 与 PHP 结合使用，但我对一些类继承的东西感到有些困惑。

这是我用来尝试学习这些工作方式的几个简单课程。我想简单地在子类的调用（父）类中设置一个变量。从我读过的示例看来，这应该可以工作，但是子类无法设置父变量：

```
class test {
    private $myvar;
    private $temp;

    function __construct(){
        $this->myvar = 'yo!';
        $temp = new test2();
        $temp->tester();
        echo $this->myvar;
    }

    public function setVar($in){
        $this->myvar = $in;
    }

}

class test2 extends test{
    function __construct(){

    }

    public function tester(){
        parent::setVar('yoyo!');
    }

}

$inst = new test(); // expecting 'yoyo!' but returning 'yo!' 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T17:32:14.103

看起来您对继承和 OOP 很困惑。这根本不是它的工作方式。

> 我想简单地在子类的调用（父）类中设置一个变量。

这是不可能的，有几个原因。

首先，当你使用 时`new`，它会创建一个新的类*实例*。每个实例都是相互独立的，因为它们的属性不会绑定在一起。

此外，当您有一个子类时，它会从父类*继承属性和方法。*但是当您创建它的实例时，它是子类的实例 - 而不是父类。我不知道你想在那里完成什么。

> `parent::setVar('yoyo!');`

继承的好处是您默认获取父类的方法，除非您在子类中覆盖它们。由于您不这样做，因此无需使用`parent::setVar()`，只需执行`$this->setvar()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T17:23:57.000

很好

```
$temp = new test2(); 
```

您正在创建该类的新实例。它们不再相关。

继承仅影响类层次结构的单个实例。

# c++ - Boost::asio，共享内存和进程间通信

> ID：10145390
> 
> 赞同：13
> 
> 时间：2012-04-13T17:21:43.303
> 
> 标签：c++, boost, boost-asio, boost-interprocess

我有一个`boost::asio`专门用作输入数据源的应用程序，因为我们的大多数对象都是基于网络通信的。由于某些特定要求，我们现在还需要能够使用共享内存作为输入法。我已经编写了共享内存组件，并且它运行得比较好。

问题是如何处理从共享内存进程到消费应用程序的数据可供读取的通知——我们需要处理现有输入线程中的数据（使用`boost::asio`），我们也不需要阻塞那个输入线程等待数据。

我通过引入一个中间线程来实现这一点，该线程等待从共享内存提供程序进程发出信号的事件，然后将完成处理程序发布到输入线程以处理数据的读取。

这现在也起作用了，但是中间线程的引入意味着在很多情况下，我们在读取数据之前有一个额外的上下文切换，这对延迟有负面影响，而且额外线程的开销也是相对昂贵。

这是应用程序正在执行的操作的一个简单示例：

```
#include <iostream>
using namespace std;

#include <boost/asio.hpp>
#include <boost/thread.hpp>
#include <boost/scoped_ptr.hpp>
#include <boost/bind.hpp>

class simple_thread
{
public:
   simple_thread(const std::string& name)
      : name_(name)
   {}

   void start()
   {
      thread_.reset(new boost::thread(
         boost::bind(&simple_thread::run, this)));
   }

private:
   virtual void do_run() = 0;

   void run()
   {
      cout << "Started " << name_ << " thread as: " << thread_->get_id() << "\n";
      do_run();
   }

protected:
   boost::scoped_ptr<boost::thread> thread_;
   std::string name_;
};

class input_thread
   : public simple_thread
{
public:
   input_thread() : simple_thread("Input")
   {}

   boost::asio::io_service& svc()
   {
      return svc_;
   }

   void do_run()
   {
      boost::system::error_code e;
      boost::asio::io_service::work w(svc_);
      svc_.run(e);
   }

private:
   boost::asio::io_service svc_;
};

struct dot
{
   void operator()()
   {
      cout << '.';
   }
};

class interrupt_thread
   : public simple_thread
{
public:
   interrupt_thread(input_thread& input)
      : simple_thread("Interrupt")
      , input_(input)
   {}

   void do_run()
   {
      do
      {
         boost::this_thread::sleep(boost::posix_time::milliseconds(500));
         input_.svc().post(dot());
      }
      while(true);
   }

private:
   input_thread& input_;
};

int main()
{
   input_thread inp;
   interrupt_thread intr(inp);

   inp.start();
   intr.start();

   while(true)
   {
      Sleep(1000);
   }
} 
```

有什么方法可以`input_thread`直接处理数据（而不必`post`通过`interrupt_thread`?假设我们完全控制了消费和提供应用程序，我们有额外的对象需要由`input_thread`对象处理（所以我们不能简单地阻塞和等待那里的信号量对象）。目标是减少开销，通过共享内存提供应用程序传入的数据的 CPU 利用率和延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:28:36.497

我想你已经找到了你的答案，因为你发布了这个问题，这是为了其他人的利益......

尝试检查 boost [strands](http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/overview/core/strands.html)。

它使您能够选择要在哪个线程上进行一些工作。

它会自动在特定链上排队，这是您不必考虑的事情。

如果您需要知道工作何时完成，它甚至会为您提供完成处理程序。

# compact-framework - 您能否更改 Windows Mobile 设备中心以使用与 192.168.55.0/24 不同的网络来调试紧凑框架？

> ID：10145391
> 
> 赞同：0
> 
> 时间：2012-04-13T17:21:47.877
> 
> 标签：compact-framework, activesync, wmdc

我有一个我编写的软件，它通过 Casio WinCE 手持设备上的 Wifi 连接与 Web 服务通信。

不幸的是，Wifi 网络和由 WMDC（或 ActiveSync）创建的用于托管调试器连接的网络发生冲突，它们都是 192.168.55.0/24。所以我不能让它们同时连接。

有人知道您是否可以重新配置 WMDC 以使用不同的地址范围？我已经搜索了注册表，但看不到任何明显的东西，而且谷歌也没有发现任何有用的东西。

谢谢，

詹姆士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:24:11.660

开发 PC 是否与 WiFi 连接在同一网络上？如果是这样，我会放弃 ActiveSync/WMDC altogetehr，只在用于 Web 服务调用的同一连接上[使用以太网调试。](http://msdn.microsoft.com/en-us/library/ms228708%28v=vs.80%29.aspx)

# javascript - 如何使用javascript在子窗口中获取非html内容

> ID：10145397
> 
> 赞同：0
> 
> 时间：2012-04-13T17:22:15.923
> 
> 标签：javascript, childwindow

我想使用javascript在子窗口中打开一个文本文件，然后将内容读取到父窗口。如何实施？

如下代码，如果data.xml不是HTML页面，如何通过javascript获取内容到父窗口？

```
function op() {
    win = window.open("http://xxx.bb.com/data.xml", "win", "width=200,height=200")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:35:06.093

您已经尝试过`XmlHttpRequest`并违反了跨域限制。一个网页（以及其中包含的代码）只有在两个网页都在同一个域中时才能操作另一个网页的数据或元素。您将在两个窗口中遇到相同的跨域限制。

正确的方法是使用`XmlHttpRequest`但确保该请求的目标在您的域中。这可能涉及在您的服务器上创建一个**代理脚本**，该脚本可以提供来自其他域的页面或数据。您的页面请求您的脚本来获取外部数据；脚本获取数据并提供服务。因为您的域中的脚本，数据似乎来自您的域，并且不受跨域限制。

[简单的 PHP 代理脚本](http://jquery-howto.blogspot.co.uk/2009/04/cross-domain-ajax-querying-with-jquery.html)

如果您试图获取的数据不是您的，您应该真正请求允许处理或重新发布它。[是否允许 Web 开发人员抓取 html 内容？](https://stackoverflow.com/questions/9960104/are-web-developers-allowed-to-scrape-html-content/9960143#9960143)（接受的答案不是最佳答案）

# asp.net-mvc-2 - ASP.Net MVC2 在 URL 中传递参数

> ID：10145400
> 
> 赞同：0
> 
> 时间：2012-04-13T17:22:23.460
> 
> 标签：asp.net-mvc-2

在使用原始 MVC 一段时间后，我逐渐熟悉了 MVC 2，但我想知道是否可以从表单中传递值，例如用户名和密码，这些值在继续时不会作为 URL 的一部分发送到下一页？

我有一个基本形式，它接受一些绑定到实体的值，然后我要做的下一件事是调用数据库的模型级别。之后我返回 RedirectToAction。

有人可以给我建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:31:19.057

当您重定向时，您将丢失表单中存在的所有 POST 值。重定向意味着新的 GET 请求，而 GET 请求意味着如果您希望能够在目标操作上检索这些值，您有几个选择：

*   将它们保存在数据库中并仅将 id 作为查询字符串参数传递，这将允许目标操作检索它们
*   将所有值作为查询字符串参数传递
*   使用 TempData 或 Session（不推荐）

# optimization - -ffinite-math-only 促进了哪些优化？

> ID：10145401
> 
> 赞同：5
> 
> 时间：2012-04-13T17:22:32.243
> 
> 标签：optimization, gcc, compiler-construction, floating-point

我可以在文档和网络中找到 -ffinite-math-only 的所有信息是“允许优化浮点算术，假设参数和结果不是 NaN 或 +-Infs。” 这对我来说似乎不会发生。有谁知道*这些*优化是什么？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T17:45:47.120

在这个假设下可以优化很多小东西，比如：

*   `x == x`-->`1`
*   `x * 1`-->`x`
*   `x >= y`-->`!(x < y)`和类似的。
*   `x/x`-->`1`如果编译器可以证明`x != 0`。
*   它可能允许编译器对诸如`x > y ? x : y`.
*   ...更多

您经常会看到这个假设以及“零符号无关紧要”之类的假设，然后允许执行以下操作：

*   `x - x`-->`0`
*   `0 / x`-->`0`
*   `x * 0`-->`0`

# php - 选择查询和while循环没有正确返回所有行

> ID：10145406
> 
> 赞同：0
> 
> 时间：2012-04-13T17:22:44.677
> 
> 标签：php, mysql, select, while-loop

你能解释一下为什么当我尝试这个查询时它只返回一半的行吗？

例如，如果 $records 由 4 个值组成，它只会从 DB 中获取第 1 行和第 3 行。

怎么了？

```
 $query=mysql_query("SELECT * FROM ".DB_PREF."books WHERE book_id IN ('".$records."')");
                while($fetch=mysql_fetch_assoc($query))
                {
                    global $book_id, $book_title, $book_description, $book_author_id, $book_author_name, $book_author_surname;
                    $book_id=$fetch['book_id'];
                    $book_title=$fetch['book_title'];
                    $book_description=$fetch['book_description'];
                    $book_author_id=$fetch['book_author_id'];
                    $query=mysql_query("SELECT * FROM ".DB_PREF."profiles WHERE user_id='".$book_author_id."'");
                    $fetch=mysql_fetch_assoc($query);
                    $book_author_name=$fetch['user_name'];
                    $book_author_surname=$fetch['user_surname'];
                    getModule('htmlmodule...');
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:24:18.263

你在循环中覆盖你的 $fetch 变量吗？也许尝试：

```
$fetch2=mysql_fetch_assoc($query); 
```

或者，更好的是，在您的 SQL 中使用连接：

```
$query=mysql_query("SELECT * FROM ".DB_PREF."books LEFT JOIN ".DB_PREF."profiles ON book_author_id = user_id WHERE book_id IN ('".$records."')"); 
```

然后从那个单一的查询中得到你想要的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:27:41.263

我做的时候

```
mysql_select_db($database_lolx, $lolx);
$query_Recordset1 = "SELECT * FROM person";
$Recordset1 = mysql_query($query_Recordset1, $lolx) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
<table border="1">
  <tr>
    <td>id</td>
    <td>emal</td>
  </tr>
  <?php do { ?>
    <tr>
      <td><?php echo $row_Recordset1['id']; ?></td>
      <td><?php echo $row_Recordset1['emal']; ?></td>
    </tr>
    <?php } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); ?>
</table> 
```

# objective-c - 如何将 didLoadObjects 中的数组中的数据传递给 cellForRowAtIndexPath

> ID：10145411
> 
> 赞同：0
> 
> 时间：2012-04-13T17:22:58.857
> 
> 标签：objective-c, arrays, storyboard, restkit

因此，我正在使用 RestKit 访问 Web 服务并从那里检索数据。到目前为止，我有两个视图，检索数据的那部分很好，我得到了我需要的 100 个对象，将它们保存到一个名为“songs”的数组中。

这是 didLoadObjects：

```
- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects {
    NSLog(@" Reached didLoadObjects: %d", [objects count]);

    self.songs = objects;
    NSLog(@"%@",self.songs);
} 
```

好的，我有两种观点，问题当然在于第二种观点。我正在使用故事板。我给 tableView 单元格一个名为“TopListCellIdentifier”的标识符。

所以，我得到了对象，所有 100 个对象都在命令行中“打印”了，但是当我尝试从 cellForRowAtIndexPath 中的数组访问数据时问题就开始了，因为我有一个自定义的 tableViewCell显示我需要的信息（儿子，艺术家，封面，类似的东西）。所以，当我启动应用程序时，第一个视图很好，但第二个有 100 个单元格，但没有信息。这是 cellForRowAtIndexPath 代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *TopListCellIdentifier = @"TopListCellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:TopListCellIdentifier];

    // Loading the Cover Images in the Background
    // Cover Image: Tag 1
    [((HJManagedImageV*)[cell viewWithTag:1]) clear];
    HJManagedImageV* thumbImage = ((HJManagedImageV*)[cell viewWithTag:1]);
    NSString *thumbUrl = [[self.songs objectAtIndex:[indexPath row]] thumbnail];

    thumbImage.url = [NSURL URLWithString:thumbUrl];
    [[ImageHandler sharedHandler].imgManager manage:thumbImage];

    //Song and Artist: Tag 2 and 3
    ((UILabel*)[cell viewWithTag:2]).text = [[self.songs objectAtIndex:[indexPath row]] title];
    ((UILabel*)[cell viewWithTag:3]).text = [[self.songs objectAtIndex:[indexPath row]] artist];

    //Arrow Up/Down/Same: Tag 4
    //TODO

    //Position Number: Tag 5
    ((UILabel*)[cell viewWithTag:5]).text = [NSString stringWithFormat:@"%d.", [indexPath row]+1];

    return cell;
} 
```

我试图在 cellRow(...) 的第一行放置一个调试器，但程序没有进入那里。我觉得我忘记了一些非常简单的事情，但我似乎无法弄清楚是什么。

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:41:45.267

你永远不会启动一个新的单元格。您需要添加如下一行：

```
if (nil == cell)
    cell = [[UITalbeViewCell alloc] init... 
```

在您致电后

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:TopListCellIdentifier]; 
```

# php - 获取sql记录

> ID：10145413
> 
> 赞同：-1
> 
> 时间：2012-04-13T17:23:02.497
> 
> 标签：php, mysql, sql

当我运行此代码时，它会很好地返回主题...

```
$query = mysql_query("SELECT topic
FROM question 
WHERE id = '$id'");
    if(mysql_num_rows($query) > 0) {
        $row = mysql_fetch_array($query) or die(mysql_error());
        $topic = $row['topic'];
    } 
```

但是当我把它改成这个时，它根本不运行。为什么会这样？

```
$query = mysql_query("SELECT topic, lock
FROM question 
WHERE id = '$id'");
    if(mysql_num_rows($query) > 0) {
        $row = mysql_fetch_array($query) or die(mysql_error());
        $topic = $row['topic'];
        $lockedThread = $row['lock'];
        echo "here: " . $lockedThread;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T17:32:13.230

确保`lock`不是 MySQL 关键字（保留字），您可能需要``lock``在字段列表中将其反引号 ( )：

```
SELECT `topic`, `lock`
... 
```

[MySQL 5.6 保留字](http://dev.mysql.com/doc/refman/5.6/en/reserved-words.html#table-reserved-words-5.6.5)

# javascript - 我如何在保存按钮 extjs4 上设置加载？

> ID：10145414
> 
> 赞同：0
> 
> 时间：2012-04-13T17:23:05.597
> 
> 标签：javascript, extjs, extjs4

嗨，我有保存按钮和提交表单，当我在未提交表单时单击显示加载图标时。请帮助我，在 extjs 4 中。

```
buttons:[{ 
   text: save,
   handler: function(){ 
      form.submit({ 
          /sucess or failure code here; 
      }) 
   }
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:36:59.300

*   首先，您需要一个具有适当大小的“等待图标”的 gif 文件。
*   然后为处于等待状态的“保存”按钮创建一个 CSS 类。例如：

```
.保存等待{
    背景图像：url（“url-to-your-waiting-gif-file”）；
}

```

*   最后在提交表单时切换保存按钮以包含此类：

```
    saveButton.addCls('保存等待');
    // 可以在这里禁用保存按钮

```

提交成功响应后，您删除按钮上的“等待状态”或其他内容

```
saveButton.removeCls('保存等待');
```

# c# - 如何像 Access 一样使用 ac# datagridview 更新数据库文件？

> ID：10145416
> 
> 赞同：2
> 
> 时间：2012-04-13T17:23:28.843
> 
> 标签：c#, database, visual-studio-2010, ms-access

我到处都用谷歌搜索，我终于放弃了，在这里问。

我正在使用 C# 在 Visual Studio 2010 中工作。我已经设置了一个带有连接到 MSSQL 数据库的 datagridview 的表单，我需要将在 datagridview 中所做的更改保存回物理数据库。我取得了一些成功，但我认为我正在做一些完全错误的事情，因为我无法让它持续保存。

我真正想要的是让更新像使用 Access 时一样工作。当我在 datagridview 中编辑一行然后离开该行时，通过选择另一行或通过选择表单上的其他控件，甚至通过更改为另一个表单或退出应用程序，该行应自动更新到物理数据库。

我认为这个问题的第一部分是，触发保存的正确事件是什么，然后应该使用什么方法将数据实际写入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:13:35.247

有很多可以使用的事件，包括

[`Leave`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.leave.aspx)输入焦点离开 DataGridView 时发生的事件

[`CellLeave`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellleave.aspx)当单元格失去输入焦点并且不再是当前单元格时发生的事件

[`RowLeave`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowleave.aspx)当行失去输入焦点并且不再是当前行时发生的事件

MSDN 有关于每个[`DataGridView Events`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview_events.aspx)

在`Event`您使用时，您将放置您的代码来执行`UPDATE`. SO上有很多关于更新数据库的答案：

[WinForms DataGridView - 更新数据库](https://stackoverflow.com/questions/2623548/winforms-datagridview-update-database)

[C# WinForms - 如何将更新从 DataGridView 发送到数据库](https://stackoverflow.com/questions/4051390/c-sharp-winforms-how-to-send-updates-from-datagridview-to-database)

我的建议是尝试尝试其中的一些代码，然后如果您有问题，请在您的代码中发布另一个问题。

# c++ - 模板通过其基匹配派生类型

> ID：10145420
> 
> 赞同：2
> 
> 时间：2012-04-13T17:23:41.967
> 
> 标签：c++, templates, metaprogramming

我正在尝试编写一个模板来提取 boost::shared_ptr 的基本类型。

我写了这个模板：

```
template<typename T>
struct ExtractBaseType;

template<typename T>
struct ExtractBaseType<boost::shared_ptr<T> > 
{
    typedef T type;
}; 
```

它适用于普通的 shared_ptr。这：

```
struct A
{
};

ExtractBaseType<boost::shared_ptr<A> >::type  a_thing;
std::cout << typeid(a_thing).name() << std::endl; 
```

打印“1A”。

但是，这不会编译：

```
struct B : boost::shared_ptr<A>
{
};

ExtractBaseType<B>::type  b_thing; 
```

编译器抱怨 ExtractBaseType 未定义。

为什么这样？这将如何完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T17:40:15.447

它不起作用，因为您不`shared_ptr`匹配`B`。您需要匹配派生的`shared_ptr`.

```
template<typename T, class = void>
struct ExtractBaseType;

template<class C>
struct ExtractBaseType<
    C, typename enable_if<
           boost::is_base_of<shared_ptr<typename T::element_type>, T>::value
       >::type
    > 
{
    typedef typename T::element_type type;
}; 
```

^ 没有测试，但主要思想就在那里

好问题。也就是说，继承自`shared_ptr`看起来很丑陋。

# java - 从一个输入解析多个整数

> ID：10145421
> 
> 赞同：1
> 
> 时间：2012-04-13T17:23:56.423
> 
> 标签：java

我应该编写一些允许用户输入输入的东西，这些输入应该是一系列整数，用空格分隔，没有非数字/非空格字符。

最好的方法是什么？我是否将整个字符串以某种方式拆分为一个数组并检查每个字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:25:51.120

您可能想要[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)专门为此使用[`Scanner.nextInt()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)and [`Scanner.hasNextInt()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextInt%28%29)。

查看文档，但是使用扫描仪可以轻松地从输入中获取标记化的整数，并将它们解析为`int`s ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:28:05.787

这是我用的

```
int getInputInt(){
   final Scanner keyboard = new Scanner(System.in);

   int inputInt = 0;
boolean continueLoop = true;
while( continueLoop = true ) {
  try{
  inputInt= keyboard.nextInt();
  continueLoop = false;
  break;
  } catch ( InputMismatchException e ) {
  keyboard.nextLine();
  out.println("That key is not an integer. Try again");
  }
}
return inputInt;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:33:00.957

代码片段中有错误。

1]虽然在java中不允许初始化。

2] 该方法应返回一个 int 数组。因此，您执行 hasNextInt 并将 nextInt 存储在数组中。

# c++ - 在 Solaris 上发送超过 65536 字节的数据时出现 boost asyc_write() 的问题

> ID：10145423
> 
> 赞同：4
> 
> 时间：2012-04-13T17:24:00.243
> 
> 标签：c++, boost, solaris, boost-asio

在 Solaris 上使用 boost 发送大小超过 65536 字节的消息时，我们观察到一个奇怪`async_write`的问题（尽管在 Linux 上没有观察到该问题）。我们正在使用带有 studio 12 CC 编译器（在 Solaris 上）和 g++ 4.4.3（在 Linux 上）的 boost 版本 1.47。

当发送大小超过 65536 的消息时（有时我们也观察到大约 50K 字节大小的问题，但对于 65536 字节，问题总是可重现的），消息会正确传递给接收者。但是一旦消息发送出去，发送方的 io 服务线程就会进入忙等待循环。发件人 pid 上的“truss”连续显示以下调用。

```
/6:     recvmsg(57, 0xFFFFFD7FEB9FDDF0, 0)              Err#11 EAGAIN 
/6:     write(13, " 9\0\0\019\0\0\0", 8)                = 8 
/6:     ioctl(13, DP_POLL, 0xFFFFFD7FEB9FE460)          = 1 
/6:     recvmsg(57, 0xFFFFFD7FEB9FDDF0, 0)              Err#11 EAGAIN 
/6:     write(13, " 9\0\0\019\0\0\0", 8)                = 8 
/6:     ioctl(13, DP_POLL, 0xFFFFFD7FEB9FE460)          = 1 
/6:     recvmsg(57, 0xFFFFFD7FEB9FDDF0, 0)              Err#11 EAGAIN 
/6:     write(13, " 9\0\0\019\0\0\0", 8)                = 8 
/6:     ioctl(13, DP_POLL, 0xFFFFFD7FEB9FE460)          = 1 
/6:     recvmsg(57, 0xFFFFFD7FEB9FDDF0, 0)              Err#11 EAGAIN 
/6:     write(13, " 9\0\0\019\0\0\0", 8)                = 8 
/6:     ioctl(13, DP_POLL, 0xFFFFFD7FEB9FE460)          = 1 
/6:     recvmsg(57, 0xFFFFFD7FEB9FDDF0, 0)              Err#11 EAGAIN 
/6:     write(13, " 9\0\0\019\0\0\0", 8)                = 8 
/6:     ioctl(13, DP_POLL, 0xFFFFFD7FEB9FE460)          = 1 
```

“lsof”表示上面的socket描述符57是连接到receiver的socket描述符。

这里的线程 6 是 ioservice 线程，其堆栈跟踪是 -

```
thread t@6     -- ???????? 
              thread_proxy 
              boost::detail::thread_data<>::run 
              des::tunnel::ServiceScheduler::processServiceWork 
              boost::asio::io_service::run 
              boost::asio::detail::task_io_service::run 
              boost::asio::detail::task_io_service::do_one 
              boost::asio::detail::dev_poll_reactor::run 
```

忙等待循环一直持续到我们停止接收器为止。此外，如前所述，如果消息的大小超过 65536 (2^16) 字节并且发送方和接收方在 2 个不同的 Solaris 主机上运行，​​则该问题始终是可重现的。如果发送方和接收方都在同一个 Solaris 主机上运行，​​则问题总是可以重现，大小为 131067 (2^17)。

有人可以解释一下为什么这里的 ioservice 线程一直在尝试从接收器读取，尽管它已经成功发送了消息并且接收器实际上并没有在套接字上写任何东西。请让我知道是否有人遇到此问题或提出任何解决方案。

这是重现问题的代码（我刚刚更改了 boost 异步 TCP 日间服务器示例以返回指定字节数的消息而不是日间并将客户端连接置于读取模式）

```
#include <ctime>
#include <iostream>
#include <cstdlib>
#include <string>
#include <boost/bind.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/enable_shared_from_this.hpp>
#include <boost/lexical_cast.hpp>
#include <boost/asio.hpp>
#include <boost/scoped_array.hpp>

using boost::asio::ip::tcp;

std::string make_message(unsigned int message_size)
{
    using namespace std;
    std::string data(message_size, 'A');
   return data;
}

class tcp_connection : public boost::enable_shared_from_this<tcp_connection>
{
public:
    typedef boost::shared_ptr<tcp_connection> pointer;

    static pointer create(boost::asio::io_service& io_service, unsigned int message_size)
    {
        return pointer(new tcp_connection(io_service, message_size));
    }

    tcp::socket& socket()
    {
        return socket_;
    }

    void handleMessage(const boost::system::error_code& message_error)
    {
        if (message_error) {
            std::cout<<"Error while reading the message from client"<<std::endl;
        }
        else {
           std::cout<<"Read the message from client"<<std::endl;
        }
    }

    void start()
    {
        // Perform async_read on client connection to read data from the client.
        _header.reset(new char[6]);
        _header[5] = '\0';
          boost::asio::async_read(socket_, boost::asio::buffer(_header.get(), 5),
            boost::bind(&tcp_connection::handleMessage, shared_from_this(),
                boost::asio::placeholders::error));

        message_ = make_message(message_size_);
        boost::asio::async_write(socket_, boost::asio::buffer(message_),
            boost::bind(&tcp_connection::handle_write, shared_from_this(),
                boost::asio::placeholders::error,
                boost::asio::placeholders::bytes_transferred));
    }

private:
    tcp_connection(boost::asio::io_service& io_service, int message_size)
        : socket_(io_service), message_size_(message_size)
    {
    }

    void handle_write(const boost::system::error_code& /*error*/,
        size_t bytes_transferred)
    {
        std::cout<<"Bytes written: "<< bytes_transferred << std::endl;
    }

    tcp::socket socket_;
    std::string message_;
    boost::scoped_array<char> _header;
    unsigned int message_size_;
};

class tcp_server
{
public:
    tcp_server(boost::asio::io_service& io_service, unsigned int port,
    unsigned int message_size)
        : acceptor_(io_service, tcp::endpoint(tcp::v4(), port)),
          message_size_(message_size)
    {
        start_accept();
    }

private:
    void start_accept()
    {
        tcp_connection::pointer new_connection =
        tcp_connection::create(acceptor_.get_io_service(), message_size_);

        acceptor_.async_accept(new_connection->socket(),
            boost::bind(&tcp_server::handle_accept, this, new_connection,
                boost::asio::placeholders::error));
    }

    void handle_accept(tcp_connection::pointer new_connection,
        const boost::system::error_code& error)
    {
        if (!error)
        {
            new_connection->start();
           start_accept();
        }
    }

    tcp::acceptor acceptor_;
    unsigned int message_size_;
};

int main(int argc, char* argv[])
{
    if (argc != 3) {
        std::cerr << "Usage: server port message_size" << std::endl;
        return 1;
    }

    unsigned int port = boost::lexical_cast<unsigned int>(argv[1]);
    unsigned int message_size = boost::lexical_cast<unsigned int>(argv[2]);

    try {
        boost::asio::io_service io_service;
        tcp_server server(io_service, port, message_size);
        io_service.run();
    }
    catch (std::exception& e) {
        std::cerr << e.what() << std::endl;
    }

    return 0;
} 
```

对于客户端，我们可以使用 boost 同步 TCP 白天客户端示例（更改为接受端口作为参数）。

```
#include <iostream>
#include <boost/array.hpp>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

int main(int argc, char* argv[])
{
    try {
        if (argc != 3) {
            std::cerr << "Usage: client <host> <port>" << std::endl;
            return 1;
        }

        boost::asio::io_service io_service;

        tcp::resolver resolver(io_service);
        tcp::resolver::query query(argv[1], argv[2]);
        tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);
        tcp::resolver::iterator end;

        tcp::socket socket(io_service);
        boost::system::error_code error = boost::asio::error::host_not_found;
        while (error && endpoint_iterator != end) {
            socket.close();
            socket.connect(*endpoint_iterator++, error);
        }
        if (error)
            throw boost::system::system_error(error);

        for (;;) {
            boost::array<char, 128> buf;
            boost::system::error_code error;

            size_t len = socket.read_some(boost::asio::buffer(buf), error);

            if (error == boost::asio::error::eof)
                break; // Connection closed cleanly by peer.
            else if (error)
                throw boost::system::system_error(error); // Some other error.

            std::cout.write(buf.data(), len);
        }
    }
    catch (std::exception& e) {
        std::cerr << e.what() << std::endl;
    }

    return 0;
} 
```

以下是我在两个不同的 solaris 主机上运行服务器和客户端的方式 -

```
server 9081 200000
client <server_host> 9081 
```

运行服务器和客户端后，在服务器上执行“truss”，这将显示如上所述的紧密轮询循环。

PS：我检查了[boost::asio::async_write，写入大于 65536 字节的数据，](https://stackoverflow.com/questions/9432722/boostasioasync-write-writing-data-larger-than-65536-bytes)但这不相关，因为我确保消息在 async_write 完成之前不会被破坏。

# python - 在python中将IP合并到范围中

> ID：10145425
> 
> 赞同：7
> 
> 时间：2012-04-13T17:24:12.053
> 
> 标签：python, algorithm

假设我有一个可能重叠也可能不重叠的 IP 范围列表（仅限最后一个学期）：

```
('1.1.1.1-7', '2.2.2.2-10', '3.3.3.3-3.3.3.3', '1.1.1.4-25', '2.2.2.4-6') 
```

我正在寻找一种方法来识别任何重叠范围并将它们合并到单个范围中。

```
('1.1.1.1-25', '2.2.2.2-10', '3.3.3.3-3') 
```

当前算法的想法是将所有范围扩展为所有 IP 的列表，消除重复，排序和合并任何连续的 IP。

还有更多的python-esque算法建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T18:40:02.623

这是我的版本，作为一个模块。我的算法与 lunixbochs 在他的回答中提到的一个相同，并且从范围字符串到整数和返回的转换很好地模块化。

```
import socket, struct

def ip2long(ip):
    packed = socket.inet_aton(ip)
    return struct.unpack("!L", packed)[0]

def long2ip(n):
    unpacked = struct.pack('!L', n)
    return socket.inet_ntoa(unpacked)

def expandrange(rng):
    # expand '1.1.1.1-7' to ['1.1.1.1', '1.1.1.7']
    start, end = [ip.split('.') for ip in rng.split('-')]
    return map('.'.join, (start, start[:len(start) - len(end)] + end))

def compressrange((start, end)):
    # compress ['1.1.1.1', '1.1.1.7'] to '1.1.1.1-7'
    start, end = start.split('.'), end.split('.')
    return '-'.join(map('.'.join,
          (start, end[next((i for i in range(4) if start[i] != end[i]), 3):])))

def strings_to_ints(ranges):
    # turn range strings into list of lists of ints
    return [map(ip2long, rng) for rng in map(expandrange, ranges)]

def ints_to_strings(ranges):
    # turn lists of lists of ints into range strings
    return [compressrange(map(long2ip, rng)) for rng in ranges]

def consolodate(ranges):
    # join overlapping ranges in a sorted iterable
    iranges = iter(ranges)
    startmin, startmax = next(iranges)
    for endmin, endmax in iranges:
        # leave out the '+ 1' if you want to join overlapping ranges
        # but not consecutive ranges.
        if endmin <= (startmax + 1):
            startmax = max(startmax, endmax)
        else:
            yield startmin, startmax
            startmin, startmax = endmin, endmax
    yield startmin, startmax

def convert_consolodate(ranges):
    # convert a list of possibly overlapping ip range strings
    # to a sorted, consolodated list of non-overlapping ip range strings
    return list(ints_to_strings(consolodate(sorted(strings_to_ints(ranges)))))

if __name__ == '__main__':
    ranges = ('1.1.1.1-7',
              '2.2.2.2-10',
              '3.3.3.3-3.3.3.3',
              '1.1.1.4-25',
              '2.2.2.4-6')
    print convert_consolodate(ranges)
    # prints ['1.1.1.1-25', '2.2.2.2-10', '3.3.3.3-3'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:01:10.447

一旦我遇到同样的问题。唯一的区别是我必须有效地将线段保留在列表中。这是为了进行蒙特卡罗模拟。并且必须将新随机生成的线段添加到现有的排序和合并线段中。

我使用**lunixbochs**的答案将算法调整为您的问题，以将 IP 转换为整数。

此解决方案允许将新 IP 范围添加到已合并范围的现有列表中（而其他解决方案依赖于对要合并的范围列表进行排序，并且不允许将新范围添加到已合并范围列表中）。它在`add_range`功能上通过使用`bisect`模块找到插入新IP范围的位置，然后删除冗余IP间隔并插入调整边界的新范围，以便新范围包含所有删除的范围。

```
import socket
import struct
import bisect

def ip2long(ip):
    '''IP to integer'''
    packed = socket.inet_aton(ip)
    return struct.unpack("!L", packed)[0]

def long2ip(n):
    '''integer to IP'''
    unpacked = struct.pack('!L', n)
    return socket.inet_ntoa(unpacked)

def get_ips(s):
    '''Convert string IP interval to tuple with integer representations of boundary IPs
'1.1.1.1-7' -> (a,b)'''
    s1,s2 = s.split('-')
    if s2.isdigit():
        s2 = s1[:-1] + s2
    return (ip2long(s1),ip2long(s2))

def add_range(iv,R):
    '''add new Range to already merged ranges inplace'''
    left,right = get_ips(R)
    #left,right are left and right boundaries of the Range respectively

    #If this is the very first Range just add it to the list
    if not iv:
        iv.append((left,right))
        return

    #Searching the first interval with left_boundary < left range side
    p = bisect.bisect_right(iv, (left,right)) #place after the needed interval
    p -= 1 #calculating the number of interval basing on the position where the insertion is needed

    #Interval: |----X----| (delete)    
    #Range:   <--<--|----------| (extend)
    #Detect if the left Range side is inside the found interval
    if p >=0: #if p==-1 then there was no interval found
        if iv[p][1]>= right:
            #Detect if the Range is completely inside the interval
            return #drop the Range; I think it will be a very common case

        if iv[p][1] >= left-1:
            left = iv[p][0] #extending the left Range interval
            del iv[p] #deleting the interval from the interval list
            p -= 1 #correcting index to keep the invariant

    #Intervals:   |----X----| |---X---| (delete)    
    #Range:  |-----------------------------|        
    #Deleting all the intervals which are inside the Range interval
    while True:
        p += 1
        if p >= len(iv) or iv[p][0] >= right or iv[p][1] > right:
            'Stopping searching for the intervals which is inside the Range interval'
            #there are no more intervals or
            #the interval is to the right of the right Range side
            # it's the next case (right Range side is inside the interval)
            break 
        del iv[p] #delete the now redundant interval from the interval list
        p -= 1 #correcting index to keep the invariant

    #Interval: |--------X--------| (delete)    
    #Range: |-----------|-->--> (extend)    
    #Working the case when the right Range side is inside the interval
    if p < len(iv) and iv[p][0] <= right-1:
        #there is no condition for right interval side since
        #this case would have already been worked in the previous block
        right = iv[p][1] #extending the right Range side
        del iv[p] #delete the now redundant interval from the interval list
        #No p -= 1, so that p is no pointing to the beginning of the next interval
        #which is the position of insertion

    #Inserting the new interval to the list
    iv.insert(p, (left,right))

def merge_ranges(ranges):
    '''Merge the ranges'''
    iv = []
    for R in ranges:
        add_range(iv,R)
    return ['-'.join((long2ip(left),long2ip(right))) for left,right in iv]

ranges = ('1.1.1.1-7', '2.2.2.2-10', '3.3.3.3-3.3.3.3', '1.1.1.4-25', '2.2.2.4-6')
print(merge_ranges(ranges)) 
```

输出：

```
['1.1.1.1-1.1.1.25', '2.2.2.2-2.2.2.10', '3.3.3.3-3.3.3.3'] 
```

* * *

这对我来说编码很有趣！谢谢你:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T18:14:43.040

将您的范围转换为成对的数字。这些函数将单个 IP 与整数值相互转换。

```
def ip2long(ip):
    packed = socket.inet_aton(ip)
    return struct.unpack("!L", packed)[0]

def long2ip(n):
    unpacked = struct.pack('!L', n)
    return socket.inet_ntoa(unpacked) 
```

现在您可以将每个范围的边缘排序/合并为数字，然后转换回 IP 以获得良好的表示。这个关于[合并时间范围](https://stackoverflow.com/a/5679899/293352)的问题有一个很好的算法。

* * *

1.  `1.1.1.1-1.1.1.2`将你的字符串解析`1.1.1.1-2`成一对数字。对于后一种格式，您可以执行以下操作：

    ```
    x = '1.1.1.1-2'
    first, add = x.split('-')
    second = first.rsplit('.', 1)[0] + '.' + add
    pair = ip2long(first), ip2long(second) 
    ```

2.  使用简单的数字比较合并重叠范围。

3.  转换回字符串表示形式（仍采用后一种格式）：

    ```
    first, second = pair
    first = long2ip(first) + '-' + long2ip(second).rsplit('.', 1)[1] 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-12T12:04:19.450

该`netaddr`软件包可以满足您的要求。

请参阅[使用 python netaddr cidr_merge 汇总相邻子网](https://stackoverflow.com/questions/24660206/summarizing-adjacent-subnets-with-python-netaddr-cidr-merge)

和[https://netaddr.readthedocs.io/en/latest/tutorial_01.html#summarizing-list-of-addresses-and-subnets](https://netaddr.readthedocs.io/en/latest/tutorial_01.html#summarizing-list-of-addresses-and-subnets)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T18:10:11.020

统一你的ips格式，把范围变成一对整数。

现在任务要简单得多——“合并”整数范围。我相信有很多现有的有效算法可以做到这一点，下面只有我天真的尝试：

```
>>> orig_ranges = [(1,5), (7,12), (2,3), (13,13), (13,17)] # should result in (1,5), (7,12), (13,17)
>>> temp_ranges = {}    
>>> for r in orig_ranges:
        temp_ranges.setdefault(r[0], []).append('+')
        temp_ranges.setdefault(r[1], []).append('-')

>>> start_count = end_count = 0
>>> start = None
>>> for key in temp_ranges:
        if start is None:
            start = key
        start_count += temp_ranges[key].count('+')
        end_count += temp_ranges[key].count('-')
        if start_count == end_count:
            print start, key
            start = None
            start_count = end_count = 0

1 5
7 12
13 17 
```

大体思路如下：在我们将范围一个接一个（在`temp_ranges`dict 中）之后，我们可以简单地通过计算原始范围的开始和结束来找到新的组合范围；一旦我们得到平等，我们就找到了一个统一的范围。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T19:06:45.017

我有这些东西，以防你需要它们，但使用 socket/struct 可能是更好的方法

```
def ip_str_to_int(address):
    """Convert IP address in form X.X.X.X to an int.

    >>> ip_str_to_int('74.125.229.64')
    1249764672

    """
    parts = address.split('.')
    parts.reverse()
    return sum(int(v) * 256 ** i for i, v in enumerate(parts))

def ip_int_to_str(address):
    """Convert IP address int into the form X.X.X.X.

    >>> ip_int_to_str(1249764672)
    '74.125.229.64'

    """
    parts = [(address & 255 << 8 * i) >> 8 * i for i in range(4)]
    parts.reverse()
    return '.'.join(str(x) for x in parts) 
```

# sql - SQL 查找最大值然后查找其出现次数

> ID：10145433
> 
> 赞同：2
> 
> 时间：2012-04-13T17:24:59.010
> 
> 标签：sql, sql-server-2008, max

我不能让它工作。**我需要首先找到假期和病假时间的最大总和，然后找到哪些员工的假期和病假时间总和具有此值。**我可以得到 168 的最大值，但无论我如何安排事情，我似乎都无法获得符合此标准的员工 - 我只是获得所有员工的完整列表。下面的代码是最后一次尝试，基于类方向。谢谢！

```
SELECT e.employeeID, SUM(e.vacationhours + e.sickleavehours) AS maxHours
    FROM   humanresources.employee e 
    WHERE  EXISTS (
                   SELECT SUM(e.vacationhours + e.sickleavehours) AS totalhours 
                   FROM   humanresources.employee e) 
    GROUP  BY e.employeeID 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T17:31:05.990

[`TOP WITH TIES`](http://msdn.microsoft.com/en-us/library/ms189463%28v=sql.100%29.aspx)简化了这个问题...

如果您只想要一个总小时数最多的员工列表......您可以简单地按总和排序，然后选择前 1 个，包括任何关系，以便它返回具有最大值的所有员工：

```
SELECT TOP 1 WITH TIES
    e.employeeID,
    SUM(e.vacationhours + e.sickleavehours) AS totalHours
FROM humanresources.employee e 
GROUP BY e.employeeID
ORDER BY totalHours DESC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:31:58.250

看一下`Having`条款

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T17:43:51.360

我会这样做，而不使用特定的 SQL 服务器语法。我想这应该适用于大多数 DBMS：

```
SELECT e.employeeID,
    SUM(e.vacationhours + e.sickleavehours) AS totalHours
FROM humanresources.employee e 
GROUP BY e.employeeID
HAVING SUM(e.vacationhours + e.sickleavehours) >= all
  (SELECT SUM(e.vacationhours + e.sickleavehours) FROM humanresources
   GROUP BY employeeID) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T18:02:55.017

您有一个名为的表`employee`，并且在该表中您有一个名为 的字段`employeeID`。除非这是一个非常糟糕的命名情况，否则它是表`employeeID`的主键`employee`。

没有必要做一个`group by`。您可以在 where 子句中过滤行。

```
select e.employeeID, e.vacationhours + e.sickleavehours as Hours
from employee as e
where e.vacationhours + e.sickleavehours = (select max(vacationhours + sickleavehours)
                                            from employee) 
```

# java - 运行时找不到类

> ID：10145436
> 
> 赞同：0
> 
> 时间：2012-04-13T17:25:07.310
> 
> 标签：java, eclipse, class, jar, apk

运行我的应用程序时出现“找不到类”错误。了解编译和执行路径不同，但我按照另一个问题的建议在我的 lib 项目下创建一个子目录并将 jar 放在那里但仍然没有运气。

使用 Eclipse，这是当我在 Eclipse 的设备上运行时（无法获取我想从模拟器触发此代码的广播事件，即 wifi 和蓝牙）。

有什么方法可以查看 apk 以查看其中的内容，例如这个 jar 文件？环顾四周没有看到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:16:15.563

您可能没有告诉 Eclipse 将所需的 jar 文件与您的 apk 文件中的其他内容一起导出。

右键单击您的 Android 项目并转到*Properties*。然后转到*Java Build Path > Order and Export*。勾选您希望通过您的 apk 文件交付的 jar 文件。

# c++ - 未解析的外部符号 - MySQL API C++

> ID：10145437
> 
> 赞同：0
> 
> 时间：2012-04-13T17:25:08.557
> 
> 标签：c++, mysql, connection

嘿，我在使用 SQL 时遇到了不间断的问题。我正在努力获得一些经验，因为我知道这是该行业的重要组成部分。我让它与 C# 一起使用，但现在我正在使用 C++ 连接到数据库。我有正确链接的项目，什么没有。这是我的代码和我遇到的错误。

```
 #include "stdafx.h"
 #include <mysql.h>
 #include <iostream>
 MYSQL mysql;
 MYSQL_RES result;

using namespace std;
 int _tmain(int argc, _TCHAR* argv[])
 {

    mysql_init(&mysql);

if(!mysql_real_connect(&mysql, "localhost", "root", "*******", "MyDatabse", 0,       NULL, 0))
{
    printf("Failed to connect");
}

return 0;

    } 
```

和错误：

```
Error   1   error LNK2001: unresolved external symbol _mysql_real_connect@32    c:\Users\Zack-074\documents\visual studio 2010\Projects\MySql\MySql\MySql.obj
Error   2   error LNK2001: unresolved external symbol _mysql_init@4 c:\Users\Zack-074\documents\visual studio 2010\Projects\MySql\MySql\MySql.obj
Error   3   error LNK1120: 2 unresolved externals   c:\users\zack-074\documents\visual studio 2010\Projects\MySql\Debug\MySql.exe   1 
```

我真的很感激帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:33:15.313

这些是链接器错误。换句话说，您在编译到目标文件时似乎没有任何问题，但是在尝试将这些目标文件链接到可执行文件时遇到了困难。

立即想到的一种解决方案是手动指定要链接的库的位置和/或名称。在 VS2010 中，右键单击您正在处理的项目并选择属性。从那里，打开链接器选项并指定要链接的库所在的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:02:53.127

打开 VS 命令提示符（或任何提示符并执行`vsvars32.bat`），然后按如下方式使用编译器：

```
cl /nologo /W4 /EHsc /MD my.cpp /ID:\Opt\MySQL5.5\include ^
   /link /LIBPATH:D:\Opt\MySQL5.5\lib libmysql.lib 
```

^ 字符仅用于续行（为了在此处更好地显示）。重要的是告诉编译器包含目录和链接器关于 MySQL 的 lib 目录，然后指定`libmysql.lib`要链接的文件。这会将代码放入您的 EXE 中以在运行时加载 DLL。

```
dir my*
13.04.2012  19:53               342 my.cpp
13.04.2012  19:53             6.144 my.exe
13.04.2012  19:53             9.762 my.obj 
```

修改了代码以不使用`stdafx.h`：

```
#include <windows.h>
#include <tchar.h>
#include <mysql.h>
#include <iostream>
using namespace std;

MYSQL mysql;
MYSQL_RES result;

int _tmain(int argc, _TCHAR* argv[]) {
    mysql_init(&mysql);
    if(!mysql_real_connect(&mysql, "localhost", "root", "***", "test", 0, NULL, 0))
    {
        printf("Failed to connect");
    }
    return 0;
} 
```

# iphone - UIStepper Xcode Interface Builder对齐问题

> ID：10145440
> 
> 赞同：0
> 
> 时间：2012-04-13T17:25:22.383
> 
> 标签：iphone, xcode, interface-builder, uilabel, uistepper

我不知道为什么，但是当我尝试将 IB 中的 UIStepper 与我的标签对齐时，运行它时它不是内联的。所以我必须将我的 UIStepper 调整得比我的标签低很多才能让它对齐。请看图片：

有谁知道为什么？![在此处输入图像描述](../Images/0cfc7d44765742f37ce42320246d6812.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:43:30.680

确保您的**Autoresizing**位置`UIStepper`设置正确，屏幕截图中的示例应`UIStepper`与`UILabel`.

![在此处输入图像描述](../Images/fc45bb0642f3b2d6909cd1376ad0a3ab.png)

# jquery - DHTML Window Widget jquery 版

> ID：10145441
> 
> 赞同：0
> 
> 时间：2012-04-13T17:25:26.840
> 
> 标签：jquery, dhtml

我们目前使用的 DHTML 窗口小部件来自：[http ://www.dynamicdrive.com/dynamicindex8/dhtmlwindow/index.htm](http://www.dynamicdrive.com/dynamicindex8/dhtmlwindow/index.htm)

是否有提供相同功能的 jquery 替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:29:37.643

[jQuery 窗口插件](http://fstoke.me/jquery/window/)正是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:28:14.737

有很多。例如，`Dialog`来自 jQuery UI 的这个标准组件：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

# android - 如何通过 XML 在 Gallery 中定义子视图

> ID：10145444
> 
> 赞同：3
> 
> 时间：2012-04-13T17:25:41.400
> 
> 标签：android

Gallery 视图组件的典型应用类似于设置 ListView + ArrayAdapter 工作流。有没有办法通过 XML 以声明方式定义画廊来避免这种开销？

```
<Gallery>
    <TextView text="Screen 1 - Swipe to Next screen"/>
    <TextView text="Screen 2 - Swipe to Prev screen"/>
</Gallery> 
```

如果不是这种情况，需要什么才能工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:50:06.423

您不能像在代码中那样直接在布局 xml 文件中定义[AdapterView](http://developer.android.com/reference/android/widget/AdapterView.html)（Galler、Spinner、ListView...）的子视图。

但是，有一种方法可以避免使用适配器。虽然它的可用性有限。你可以利用`android:entries`属性。

```
<Gallery
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:entries="@array/my_items" >
</Gallery> 
```

将对数组资源的引用作为属性的值。

```
<string-array name="my_items">
        <item>text1</item>
        <item>text2</item>
        <item>...</item>
</string-array> 
```

图库将填充数组中的文本。我猜你只能使用文本来填充 Gallery（或任何其他 AdapterView），它不适用于更复杂的视图。您必须使用适配器来使用更复杂的项目填充图库。

# string - 使用 htaccess 删除尾部斜杠但保留查询字符串

> ID：10145447
> 
> 赞同：0
> 
> 时间：2012-04-13T17:25:51.600
> 
> 标签：string, slash, trailing

我在我的 htaccess 中使用以下指令从我的 uri 中删除尾部斜杠以防止重复内容。然而，这些指令也会删除任何可能存在的查询字符串。

```
RewriteCond %{HTTP_HOST} ^(www.)?mydomain\com$ [NC]
RewriteRule ^(.+)/$ http://www.mydomain.com/$1 [R=301,L] 
```

我想知道如何从我的 URI 中删除一个潜在的斜杠，同时也保留查询字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:27:54.410

有一个`RewriteRule`选项标志：[`QSA`](http://httpd.apache.org/docs/2.2/en/rewrite/flags.html#flag_qsa).

> 将原始请求 URL 中的任何查询字符串附加到在重写目标中创建的任何查询字符串

# c++ - CUDA 小核 2d 卷积 - 怎么做

> ID：10145452
> 
> 赞同：14
> 
> 时间：2012-04-13T17:25:59.590
> 
> 标签：c++, image, image-processing, cuda, convolution

几天来，我一直在试验 CUDA 内核，以在 500x500 图像（但我也可以改变尺寸）和非常小的 2D 内核（拉普拉斯 2d 内核，所以它是 3x3 内核）之间执行快速 2D 卷积。太小了充分利用所有 cuda 线程）。

我创建了一个 CPU 经典实现（两个 for 循环，就像你想象的那样简单），然后我开始创建 CUDA 内核。

经过几次令人失望的更快卷积尝试后，我最终得到了以下代码： [http](http://www.evl.uic.edu/sjames/cs525/final.html) ://www.evl.uic.edu/sjames/cs525/final.html （参见共享内存部分），它基本上允许 16x16 线程块将他需要的所有卷积数据加载到共享内存中，然后执行卷积。

没什么，CPU还是快了很多。我没有尝试 FFT 方法，因为 CUDA SDK 声明它对大内核大小有效。

无论您是否阅读了我写的所有内容，我的问题是：

**如何使用 CUDA 在相对较大的图像和非常小的内核 (3x3) 之间执行快速 2D 卷积？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T19:26:59.983

你是对的，3x3 内核不适合基于 FFT 的方法。解决这个问题的最好方法是将内核推送到常量内存中（或者如果您使用的是 fermi+ 卡，这应该没什么大不了的）。

由于您知道内核大小，因此最快的方法是将输入图像/信号的块读取到共享内存中并执行展开的乘法和加法运算。

--

如果您愿意使用库来执行此操作， [ArrayFire](http://github.com/arrayfire/arrayfire)和[OpenCV](http://docs.opencv.org/modules/gpu/doc/image_processing.html) 具有高度优化的卷积例程，可以为您节省大量开发时间。

我对 OpenCV 不太熟悉，但在 ArrayFire 中，您可以执行以下操作。

```
array kernel = array(3, 3, h_kernel, afHost); // Transfer the kernel to gpu
array image  = array(w, h, h_image , afHost); // Transfer the image  to gpu
array result = convolve2(image, kernel);       // Performs 2D convolution 
```

**编辑**

使用 ArrayFire 的另一个好处是它的批处理操作允许您并行执行卷积。[您可以在此处](http://www.arrayfire.com/docs/group__signal__func__convolve2.htm)阅读有关卷积如何支持批处理操作的信息

例如，如果您有 10 个图像要使用相同的内核进行卷积，您可以执行以下操作：

```
array kernel = array(3, 3, h_kernel, afHost);     // Transfer the kernel to gpu
array images = array(w, h, 10, h_images, afHost); // Transfer the images to gpu
array res    = convolve2(images, kernel); // Perform all operations simultaneously 
```

--

完全披露：我在 AccelerEyes 工作并积极致力于 ArrayFire。

# php - PHP Facebook SDK 对象实例化缓慢

> ID：10145456
> 
> 赞同：1
> 
> 时间：2012-04-13T17:26:25.453
> 
> 标签：php, facebook-php-sdk

我的脚本在一台机器上运行得很快，而在另一台机器上运行得非常慢。我已将症结缩小到这一行：

```
$facebook = new Facebook($config); 
```

我可以通过哪些方式进一步调试它？我唯一的选择是打开 SDK 并开始添加回声，以便我可以识别 SDK 中的症结所在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T06:17:44.410

不确定您是否已经解决了这个问题，但我只想添加答案以帮助他人。这个问题是因为 php session_start() 非常慢（[http://forums.phpfreaks.com/topic/123301-session-start-is-slow/](http://forums.phpfreaks.com/topic/123301-session-start-is-slow)），当您制作 facebook 类的对象时会调用它。

该解决方案可能是使用基于数据库的会话（[http://jameshalsall.co.uk/php-database-sessions/](http://jameshalsall.co.uk/php-database-sessions/)）和/或在 __construct 方法的末尾包含 session_write_close()。

# extjs - xtype 和别名有什么区别？

> ID：10145460
> 
> 赞同：16
> 
> 时间：2012-04-13T17:26:53.413
> 
> 标签：extjs, sencha-touch-2

Sencha 中使用的 xtype 和 alias 有什么区别？它们似乎在不同的地方都被用作速记。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-27T22:32:49.777

当你使用“alias”来声明一个 xtype 时，你必须在它前面加上“widget”。

例子：

```
{
   ...
   alias: 'widget.mycomponent'
   ...
} 
```

当您使用 xtype 属性时，您可以离开“小部件”。部分关闭，因为假设该部分：

例子：

```
{
   ...
   xtype: 'mycomponent'
   ...
} 
```

两个不同属性的原因是因为你可以声明“widget”以外的东西的别名，比如在框架中使用的别名：'layout.card'。但是，对于引用视图对象的最终用户代码，您可能会使用

```
alias: 'widget.mycomponent' 
```

或者

```
xtype: 'mycomponent' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T18:10:30.957

这真是令人费解，即使是 Sencha Touch 的开发团队也没有统一的看法。

据我所知，他们只是为了性能而设计的。`Alias`出现早于`xtype`时，它们会创建`xtype`配置，因为如果我们不必像以前那样解析字符串来获取 xtype，它会更快。

无论如何，像`xtype`,或最常见的东西，`ptype`应该在下一个版本中统一和澄清，开发团队说。`ltype``alias`

# android - 将 Android 应用程序的数据存储在 SQLite 或文件系统中的更好方法是什么？

> ID：10145463
> 
> 赞同：1
> 
> 时间：2012-04-13T17:27:07.310
> 
> 标签：android, sqlite, storage

我的应用程序需要在手机上存储数据，但我不确定哪种方法更有效。我不需要搜索数据或类似的东西。我只需要能够在应用程序关闭时保存应用程序的当前状态，并在它备份时恢复。有 1mb 到 10mb 的数据需要保存。

基本上有一堆包含数据的自定义类，现在我将它们作为可序列化的，并将每个类保存到一个文件中。我有什么理由改变它以将其存储在 SQLite 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:33:18.827

如果您在哪里使用 sqlite，您可以随时保存，并且知道如果保存数据的应用程序/活动突然被操作系统杀死，那么数据库中的内容几乎是最新的。其他我看不到的以及将 sqlite 用于您的用例的明显理由。此外，对于 sql 方法，您有一个明确的方法来在以后更改域对象的结构并将数据从旧版本的数据库迁移到新版本的数据库。这也可以使用序列化对象来完成，但是需要同时复制新旧对象。对我来说，这听起来非常可怕和混乱，特别是考虑到您可能需要从版本 x 到 y，所以如果您需要更新域对象，最终可能会遇到一些非常棘手的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:33:25.543

您在问题中提到数据仅用于保存应用程序的状态，因此我最初的反应是将其保留在设备上，特别是因为您提到文件大小不会超过 10MB，这相当合理的。

所以我对你的回答是在设备上保持原样。如果您将来对信息的使用发生变化，您应该重新考虑这种方法，但现在它是完全合乎逻辑的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:33:57.353

如果您只保存序列化类，则可以使用[本线程](https://stackoverflow.com/questions/371538/any-good-orm-tools-for-android-development)中讨论的 ORM 映射器。这为您节省了编写自己的映射器的不便，并且可以轻松扩展到新类。此外，如果您的要求发生变化，您可以查找数据。

将系统更改为 SQLite 的唯一原因是更舒适，并且可能是更简单的系统。例如，现在您必须检查文件是否存在，解析内容等，如果您使用 SQLite，则不必验证数据的完整性，Android 也可以帮助您一点。您可以将这些数据用于其他原因，例如在 ListView 中显示它们。

# android - 如何使用 ia92 wmqtt.jar 设置 Android MQTT 项目？

> ID：10145464
> 
> 赞同：1
> 
> 时间：2012-04-13T17:27:12.367
> 
> 标签：android, mqtt

我一直在尝试使用 wmqtt.jar 实现 MQTT 服务。像大多数人一样，我从查看其他人的例子开始。我找到了几个对 Dale Lane 帖子[http://dalelane.co.uk/blog/?p=1599的引用，并从](http://dalelane.co.uk/blog/?p=1599)[http://mosquitto.org/2011/11/android-mqtt-example-](http://mosquitto.org/2011/11/android-mqtt-example-project/)下载了他的服务版本[项目/](http://mosquitto.org/2011/11/android-mqtt-example-project/) . 我的问题是，我尝试在模拟器中使用 wmqtt.jar 运行的每个示例，只要任何使用 java.lang.ClassNotFoundException 引用 MqttSimpleCallback 的类，代码就会崩溃。我必须做一些“特别”的事情来完成这次比赛吗？通常我会假设问题出在我的代码上，但是由于我尝试过的其他来源的所有示例都因同样的问题而崩溃，所以我不得不假设我在设置中遗漏了一些东西？

这是当来自 mosquitto.org 的代码爆炸时我的 LogCat 的样子。

```
04-13 21:48:59.447: D/AndroidRuntime(303): Shutting down VM
04-13 21:48:59.447: W/dalvikvm(303): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-13 21:48:59.548: E/AndroidRuntime(303): FATAL EXCEPTION: main
04-13 21:48:59.548: E/AndroidRuntime(303): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.mosquitto.android.mqttdemo/org.mosquitto.android.mqttdemo.MQTTDemo}: java.lang.ClassNotFoundException: org.mosquitto.android.mqttdemo.MQTTDemo in loader dalvik.system.PathClassLoader[/data/app/org.mosquitto.android.mqttdemo-2.apk]
04-13 21:48:59.548: E/AndroidRuntime(303):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
04-13 21:48:59.548: E/AndroidRuntime(303):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-13 21:48:59.548: E/AndroidRuntime(303):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-13 21:48:59.548: E/AndroidRuntime(303):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-13 21:48:59.548: E/AndroidRuntime(303):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 21:48:59.548: E/AndroidRuntime(303):  at android.os.Looper.loop(Looper.java:123)
04-13 21:48:59.548: E/AndroidRuntime(303):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-13 21:48:59.548: E/AndroidRuntime(303):  at java.lang.reflect.Method.invokeNative(Native Method)
04-13 21:48:59.548: E/AndroidRuntime(303):  at java.lang.reflect.Method.invoke(Method.java:521)
04-13 21:48:59.548: E/AndroidRuntime(303):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-13 21:48:59.548: E/AndroidRuntime(303):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-13 21:48:59.548: E/AndroidRuntime(303):  at dalvik.system.NativeStart.main(Native  Method)
04-13 21:48:59.548: E/AndroidRuntime(303): Caused by: java.lang.ClassNotFoundException: org.mosquitto.android.mqttdemo.MQTTDemo in loader dalvik.system.PathClassLoader[/data/app/org.mosquitto.android.mqttdemo-2.apk]
04-13 21:48:59.548: E/AndroidRuntime(303):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-13 21:48:59.548: E/AndroidRuntime(303):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-13 21:48:59.548: E/AndroidRuntime(303):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-13 21:48:59.548: E/AndroidRuntime(303):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-13 21:48:59.548: E/AndroidRuntime(303):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
04-13 21:48:59.548: E/AndroidRuntime(303):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:14:25.993

我建议您使用[http://git.eclipse.org/c/paho/org.eclipse.paho.mqtt.java.git/](http://git.eclipse.org/c/paho/org.eclipse.paho.mqtt.java.git/)提供的 Paho Java 客户端库。它与 ia92 的代码库不同，但许可证更友好。

ia92 不再开发或支持，如[http://mqtt.org/software所述](http://mqtt.org/software)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:37:52.740

使用日食？在包资源管理器中找到 jar，右键单击它，然后选择“Build Path”=>“Add To Build path”。再试一次？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:37:08.000

确保将 wmqtt.jar 和它可能需要的任何库复制到您的 libs 目录中。然后重建它并将其推送到您的模拟器。

缺少 jar 文件是发生 class def not found 异常的重要原因。

# jquery - JQuery css计算怪异

> ID：10145465
> 
> 赞同：0
> 
> 时间：2012-04-13T17:27:18.713
> 
> 标签：jquery, css

前几天我尝试通过添加左右填充来调整水平菜单项，使它们按文本加权，而不仅仅是将它们调整为相同的宽度。目标是填充容器的确切空间。（很脏）代码如下：

```
$(document).ready(function(){
  var mmenuW = $('#navinner').width(); //space to fill
  var mmCount = 0; //number of menu items
  var mmLiW = 0; //current summa width of menu items
  $('#navinner li a').each(function(){
    mmLiW += $(this).outerWidth();
    mmCount++;
  });

  alert(''); //THE NASTY ALERT, see below

  var paddPlus = Math.floor((mmenuW-mmLiW)/(mmCount*2));
  $('#navinner li a').css({'padding-left': paddPlus+'px', 'padding-right': paddPlus+'px'});
  var nmmLiW = 0; // new summa width of items
  $('#navinner li a').each(function(){
    nmmLiW += $(this).outerWidth();
  });

  var mmGap = mmenuW-nmmLiW-1; //remaining gap because of Math.floor
  alert((paddPlus)+'px');
  alert((mmGap+paddPlus)+'px');

  // adding the gap to the last elements right padding
  $('#navinner li a').last().css('padding-right', (mmGap+paddPlus)+'px');
} 
```

奇怪的行为是当第一个警报被注释掉时，脚本工作正常，但是对于警报存在的情况有一些像素不准确。

第一个警报脚本完美运行，警报值：''，'46px'，'58px'

如果没有第一个警报，脚本会留下空白，警报值：''，'46px'，'54px'

浏览器：FF 6.0，JQuery：1.7.1，还没有在线示例。

/////// 编辑 ////////

我发现这是因为计算发生在 $(document).ready 但显然并不意味着所有 css 内容都已加载，包括特殊字体（在这种情况下使用 google webfont）。该函数使用我认为的一些后备字体运行，导致差异。所以问题减少到如何在不使用 $(window).load 的情况下更好地处理字体加载。在格式化菜单之前等待所有图像加载并不那么优雅。

# gwt - GWT 如何丢弃编辑器上的更改

> ID：10145466
> 
> 赞同：3
> 
> 时间：2012-04-13T17:27:22.973
> 
> 标签：gwt, editor

我有一种编辑器丢弃对其属性所做的更改的方法吗？这在客户端。没有毅力。

我有：

```
public class ClaseEditor extends PopupPanel implements Editor<ClaseProxy> {
  @UiField ValidatedTextBox tema;
  @UiField ValidatedTextBox catedratico;
} 
```

我在 ListEditor 上使用此编辑器，因为您知道您的列表中有一个编辑器列表

```
 ListEditor<ClaseProxy, ClaseEditor> 
```

如果用户创建一个，没关系，然后如果用户编辑它。我有一个保存或取消选项，我保存好，只需隐藏编辑器，所做的更改就可以了。

但是在用户单击取消时，如果属性有一些更改，编辑器会刷新（延迟）更改为代理。

是的，我可以将起始值存储在字符串上，然后在 texbox 上使用 setValue() 进行恢复。但是还有其他方法（Editor API）可以防止这种情况发生吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T20:30:07.373

如果您使用的是`SimpleBeanEditorDriver`，则可以对该方法进行新调用`edit`，而无需`flush`先调用。

该类`SimpleBeanEditorDriver`从 bean 读取到 editors on `edit`，并从 editors 读取到 bean on `flush`。

如果您不想恢复所有编辑器，而只想恢复其中一个，请记住调用`flush`每个已接受的编辑器更改，以便能够恢复到最后`flush`一点。请注意，`flush`调用是本地的，不一定必须对应于对持久层的调用。

示例代码

```
private Bean currentObject;

/**
 * Start editing the given object.
 */
public void edit(Bean object) {
  this.currentObject = object;
  this.driver.edit(object);
}

/**
 * Call this every time an editor is in a consistent state.
 * (e.g. onBlur event if validation succeeds)
 */
private void save() {
  this.driver.flush(); // saves editors' state into currentObject
}

/**
 * Call this to cancel changes on all editing editors.
 * (e.g. onBlur event if validation fails)
 */
private void revert() {
  this.driver.edit(currentObject); // reloads currentObject into editors
}

/**
 * Stores all pending changes to the server.
 * Remember to validate all editors.
 */
public void commit() {
  Bean object = this.driver.flush();
  Server.persist(object);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T17:51:02.647

是的。在取消按钮上，执行 fire() 而不构建任何请求。编辑器所做的永远不会影响原始代理，它是不可变的。刷新只给你一个副本（除非你使用 RequestFactoryEditorDriver 然后它返回你发送给它的上下文`driver.edit(proxy,ctx)`。如果用户想再次编辑它不会得到的，没有请求的 fire() 会清除编辑代理副本已被编辑的错误。

# c++ - 成员函数的 decltype

> ID：10145469
> 
> 赞同：6
> 
> 时间：2012-04-13T17:27:28.653
> 
> 标签：c++, c++11, decltype

在以下示例中，如何获取成员函数的返回类型？

```
template <typename Getter>
class MyClass {
   typedef decltype(mygetter.get()) gotten_t;
 ...
}; 
```

当然，问题是我在定义 MyClass 时没有“mygetter”对象。

我想要做的是：我正在创建一个缓存，它可以使用 getter 返回的任何内容，因为它是关键。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T17:30:16.547

我不太确定你想要什么，但它似乎`mygetter`应该只是任何类型的对象`Getter`。用于`std::declval`获取这样的对象，无需其他任何东西（只能用于类型推导）

```
typedef decltype(std::declval<Getter>().get()) gotten_t; 
```

# editor - 如何最大化 IntelliJ IDEA 中的编辑器窗格？

> ID：10145470
> 
> 赞同：174
> 
> 时间：2012-04-13T17:27:39.150
> 
> 标签：editor, intellij-idea, keyboard-shortcuts, maximize-window

在 Eclipse 中，我可以在编辑器窗格中键入`Ctrl`+`M`或单击最大化图标，以使编辑器窗格占据整个 Eclipse 窗口，然后再次将窗格恢复到以前的大小，从而暴露其他窗格。

是否可以在 IntelliJ IDEA 中执行等效操作？

为了澄清，我问的是隐藏所有其他工具窗格以仅显示编辑器窗格。我不是在问如何进入*无干扰模式*，因为这是完全“全屏”的模式，隐藏所有工具栏、窗口装饰等。

* * *

## 回答 #1

> 赞同：315
> 
> 时间：2012-06-12T03:38:08.443

最接近的方法是通过调用*Hide All Tool Windows*操作来隐藏所有工具窗口。其快捷方式是`Ctrl`++ （默认键盘映射）`Shift`。`F12`

这将隐藏所有工具窗口，有效地最大化编辑器窗口（尽管不是全屏）。*IntelliJ*菜单栏、工具栏、面包屑和标签栏仍然可见。

我在*Kubuntu 12.04 LTS上使用**IntelliJ 11.1.2*和*Default keymap*。

 **## MacOS X 上的 14.0.3

它是MacOS X 上 IntelliJ IDEA 14.0.3 中的`Cmd`++ 。`Shift``F12`

**2015-03-24 更新：** IntelliJ IDEA 14.1 现在支持*无干扰模式*。您可以通过单击查看 > 进入无干扰模式来调用它。在这种模式下，IntelliJ 隐藏了除菜单之外的所有内容。有关更多详细信息，请观看他们详细介绍新功能的视频：[https](https://www.youtube.com/watch?v=uVwE8MFgYig) ://www.youtube.com/watch?v=uVwE8MFgYig 。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-07-21T07:33:35.660

如果要最大化窗格，请选择该窗格（通过单击内部或标题栏），然后使用快捷方式**“ `Ctrl`+ `Shift`+ `Quotes`”**

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-06-18T19:53:24.067

您可以双击编辑器窗格的选项卡标题栏上的任意位置。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-02-01T09:41:49.537

所有答案仅适用于隐藏其他工具。如果您有多个编辑器**窗格**，并且您只想最大化一个**编辑器窗格**（隐藏所有收费并隐藏所有其他编辑器窗格），现在是不可能的。

PyCharm 版本：2018.2.7

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-10-31T23:13:44.173

使用 IntelliJ 14.1.5

如果要最大化编辑器窗口并全屏显示应用程序，可以使用以下两个命令创建宏：

```
Toggle Full Screen Mode
Hide All Tool Windows 
```

然后为宏分配一个热键。我是这样做的：

*   文件 > 设置 > 键盘映射
*   使用搜索栏搜索上面的两个命令。为这些分配晦涩的热键。
*   编辑 > 宏 > 开始宏录制
*   点击您刚刚分配的两个不起眼的热键：这应该使编辑器最大化并全屏显示应用程序
*   停止录制。为宏命名
*   再次打开文件 > 设置 > 键盘映射。找到宏部分，找到您的宏，为其分配一个不错的热键。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-10-30T06:33:44.333

我使用`Ctrl-Shift-F12`（“隐藏所有窗口”）在编辑器的最大模式和正常模式之间切换。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-02-21T23:26:11.183

我刚刚将`^M`(ctrl+M) 分配给主菜单 | 窗口 | 活动工具窗口 | 隐藏首选项下的所有工具窗口（通过单击`cmd,`）。这对我来说就像日食一样工作。![这是一个截图](../Images/36d3211afad38c78f7db2e82df602564.png)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-02-07T06:10:40.300

通过在新窗口中打开标签可以实现类似的效果。

默认的热键是**shift+f4**。

编辑器选项卡也保留在主应用程序窗口中，新窗口出现在主应用程序窗口的顶部。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-27T16:14:42.217

这已经得到了回答，但是当我在谷歌上搜索“android studio 最大化选项卡”时，这是我看到的第一个答案，我要加两分钱。

我讨厌键盘快捷键，因为在任何时候，我的键盘上都有一只手，鼠标上有一只手。必须放开鼠标来点击 3 键组合以最大化当前选项卡不是快捷方式。我正在寻找的是一种 Eclipse 风格的行为：双击选项卡以最大化。以下是如何做到这一点：

在 Android Studio 中，在 Preferences 下，转到 Keymap->Main Menu->Window->Active Tool Window。右键单击“最大化工具窗口”映射并选择“添加鼠标快捷方式”。

[![在此处输入图像描述](../Images/f7a1c58a2fe1afbab8ad1bd49b71bcc8.png)](https://i.stack.imgur.com/aqHcp.png)

对于“Click Count”，选择“Double Click”，然后双击“Click Pad”鼠标图标。

[![在此处输入图像描述](../Images/586de42401f6cf5e31afdab7593f72ec.png)](https://i.stack.imgur.com/HGc9P.png)

从菜单中单击“确定”，您现在应该能够双击任何选项卡，它将被最大化。再次双击将最小化它。

从 Eclipse 到 IntelliJ，这是我不得不处理的最令人沮丧的方面之一。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-06-05T08:16:22.683

IntelliJ Idea 可以使用全屏插件...

[https://github.com/jfim/ideafullscreen](https://github.com/jfim/ideafullscreen)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-01-21T23:25:14.597

如果您需要使用与 Eclipse `Ctrl`+相同的快捷方式`M`来最小化/最大化活动编辑器窗口，
您可以按照以下步骤操作：

*   打开（文件 > 设置...）或单击 ( `Ctrl`+ `Alt`+ `s`)
*   选择`Keymap`
*   搜索“隐藏所有工具窗口”
*   将默认快捷方式更改为`Ctrl`+`M`

[![在此处输入图像描述](../Images/089089d0bba7214c5bb4b1ff9229a1e0.png)](https://i.stack.imgur.com/HZiZC.png)

然后您将能够使用与 Eclipse 相同的快捷方式。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-02-20T23:19:27.573

这是一个相当古老的问题，而无干扰模式并不是我想要的。这是因为它不会隐藏其他编辑器窗口。在[2021.1 EAP](https://confluence.jetbrains.com/display/IDEADEV/IntelliJ+IDEA+2021.1+EAP+(211.5538.20+build)+Release+Notes)中，此[问题](https://youtrack.jetbrains.com/issue/IDEA-82829)已得到解决，并且最大化编辑器会隐藏除活动编辑器之外的所有其他编辑器。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-08-03T17:02:03.987

我搜索了类似`ctrl+b z`in的东西`tmux`。对我来说，通过组合键解决了类似的任务`shift+f4`。它会在单独的窗口中打开您的选项卡（可以像往常一样关闭`alt+f4`）。我的 PyCharm 版本：

```
PyCharm 2019.2 (Professional Edition)
Build #PY-192.5728.105, built on July 23, 2019
Runtime version: 11.0.3+12-b304.10 amd64
VM: OpenJDK 64-Bit Server VM by JetBrains s.r.o
Windows 10 10.0
GC: ParNew, ConcurrentMarkSweep
Memory: 725M
Cores: 8
Registry: 
Non-Bundled Plugins: 
```**

# xamarin.ios - monotouch 是否通过模块支持多文件程序集？

> ID：10145480
> 
> 赞同：0
> 
> 时间：2012-04-13T17:28:19.360
> 
> 标签：xamarin.ios

我正在创建一组跨平台的应用程序，其中一些程序集使用在 Visual Studio 2010 下编译的一组模块构建为多文件程序集。monotouch 编译器是否支持这样的多文件程序集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:42:14.060

您可以创建一个 MonoTouch 库项目来执行此操作，但是您必须为 MonoTouch 编译该库。

为了正确地做到这一点，这里有一个例子：

*   在 Windows 上创建 2 个项目`MyApp`和`MyApp.Code`（一个类库项目）
*   在 iOS 上创建 2 个项目`MyApp`和`MyApp.Code`（一个 MonoTouch 库项目），当然在源代码管理的不同文件夹中
*   将所有代码放入`MyApp.Code`（Windows 版本）中，在 iOS“链接”上，您要从 Windows 副本添加到项目的每个文件。这会保留文件的一份副本，但允许您针对多个平台进行编译
*   `MyApp`将只包含两个平台上的特定于 UI 的代码，并且在两个平台上完全不同
*   在整个项目中可能需要它们的任何地方添加`#if IPHONE`或预处理指令`#if WINDOWS``MyApp.Code`

如果您想对适用于 Android、Windows Phone 等的 Mono 执行相同操作，请冲洗并重复。

# ruby-on-rails-3 - 将 :new 传递给 Rails url_for

> ID：10145484
> 
> 赞同：2
> 
> 时间：2012-04-13T17:28:40.210
> 
> 标签：ruby-on-rails-3, url-routing, restful-url

也许我很愚蠢，但 Rails 提供了这种漂亮的语法来生成 URL，如下所示：

```
url_for([user, comment]) # => /users/1/comment/1 
```

通过`:edit`允许我创建这样的东西：

```
url_for([:edit, user, comment]) # => /users/1/comment/1/edit 
```

但是有什么办法可以做到吗？

```
url_for([:new, user, comments]) # => NoMethodError: undefined method `new_user_comments_url' 
```

* * *

**更新：**添加了更多信息。

我的路线.rb：

```
resources :users do
  resources :comments
end

resources :posts do
  resources :comments
end 
```

我的问题是，我不能使用 Rails 自动生成的 url helper ( `user_comments_url`)，因为我正在共享用户评论和发表评论的视图。

我的问题有两种解决方法（但没有人觉得像“Rails”方式）：

1.  向视图添加逻辑，例如一些 if 条件。

2.  定义我自己的 url 助手，例如`new_parent_comment(user_or_blog)`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T21:20:50.193

好的，找到了解决方案，但我不确定这是否是预期的：

```
url_for([:new, user, :comment]) # => '/users/1/comments/new'

url_for([:new, post, :comment]) # => '/posts/1/comments/new' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-21T06:15:27.280

遇到同样的问题，找到了下一个解决方案（在 Rails 5.2 上测试）：

```
url_for([user, Comment, action: :new]) 
```

其中`Comment`模型类名称。

顺便说一句，`action`也可以`:edit`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T18:06:45.137

根据[Rails Docs](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-url_options) url_for 使用传递的对象的类名来生成 RESTful 路由。它还指出，对于嵌套路由，它不能正确地做出这个假设：

> 如果您有嵌套路由，例如 admin_workshop_path，则必须显式调用它（url_for 无法猜测该路由）。

我建议在这里使用命名路线，例如`new_user_comment_path()`. 我假设您已经设置了您的 routes.rb ，例如：

```
resources :users do
  resources :comments do 
  end 
end 
```

此外，您可以运行`rake routes`以打印出所有路线的正确名称。希望这会有所帮助，/Salernost

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T20:59:55.117

这可能只是一个错字吗？我认为最后一行应该是`comment`，而不是`comments`：

```
url_for([:new, user, comment]) 
```

（假设您的`comment`变量已定义。）

# javascript - 如何监听动态添加的对象字段的变化？

> ID：10145491
> 
> 赞同：1
> 
> 时间：2012-04-13T17:29:16.547
> 
> 标签：javascript

我希望扩展 Object 和 Array 类，这样我就能够在构造后监听对它们的实例所做的任何更改。

我现在能做的最好的事情是为在初始化/构造实例时给定的字段添加自定义 get 和 set 函数：

```
var myObj = new CustomObject({name:'foo'});

myObj.name = 'bar'; // this will log "'name' in 'myObj' updated:'bar'"

//however:

myObj.age = 85; // this mutation will slip by unnoticed, 
                // since the 'age' field was never specified 
                // at initialization meaning no custom set / get 
                // functions where attached. 
```

**有没有办法实现以下功能？**

```
var myObj = new CustomObject();

myObj.name = 'foo';// this should log something like:
                   // "A new field 'name' was created for myObj with value 'foo'" 
```

**注意：我正在寻找不涉及轮询的解决方案。**

我现在拥有的（导致第一个代码块中显示的功能）：

```
function CustomObject(data) {

    var that = this;

    for(var field in data){         
        prepField(field);                                   
    }

    function prepField(field){                  
        Object.defineProperty( that, field, {
            set: function(val){         
                data[field] = val;
                console.log(field,'in',that,'updated:',val);
            },
            get: function(){
                console.log(field,'in',that,'requested');
                return data[field];                 
            },
            enumerable:true
        });         
    }

    return this;

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:34:19.367

Firefox (mozilla) 有一个叫做`Proxy`可以做到这一点的东西。

[MDN 代理文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Proxy)

这是目前的非标准功能，但看起来它*（或类似的东西）*可能成为 ECMAScript 6 的一部分。

来自[http://wiki.ecmascript.org/doku.php?id=harmony:proposals](http://wiki.ecmascript.org/doku.php?id=harmony:proposals)：

![在此处输入图像描述](../Images/e979c8c77af8571c12cfa46a3a907c7b.png)

# java - 我不确定如何从我的文本字段中获取数据

> ID：10145493
> 
> 赞同：0
> 
> 时间：2012-04-13T17:29:31.050
> 
> 标签：java, swing, awt, review

我想从我的文本字段中获取数据并将其设置为 int h。并改变了我绘制的矩形的大小，但我不确定如何从文本字段中获取数据，我厌倦了在 actionperfomred 中使用 e.getsource 但它找不到我的文本字段。我的代码如下：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import java.io.*;
import javax.imageio.*;
import javax.swing.*;
import java.net.*;
import java.sql.*;
import java.lang.Object;
import java.awt.Graphics;
import java.awt.Graphics2D;

/**
 * This class demonstrates how to load an Image from an external file
 */
public class test extends Component {

    int x=77, y=441, w=23, h=10;

    BufferedImage img =
  new BufferedImage(100, 50,
                    BufferedImage.TYPE_INT_ARGB);    
   // BufferedImage img;

    public void paint(Graphics g) {
        g.drawImage(img, 0, 0, null);
           // g.fillRect(10,10,10,10);
    }

    public test() {
       try {
           img = ImageIO.read(new File("sales-goal.png"));
       } catch (IOException e) {}

       Graphics2D g = img.createGraphics();
       Color myColor = Color.decode("#32004b");
       g.setColor(myColor);
       g.fillRect(x,y,w,h);
                //77,441,23,10
    }

    public Dimension getPreferredSize() {
        if (img == null) {
             return new Dimension(100,100);
        } else {
           //return new Dimension(img.getWidth(null), img.getHeight(null));
            return new Dimension(300,600);
       }
    }

    public static void main(String[] args) {

        JFrame f = new JFrame("Load Image Sample");
        JTextField textField=new JTextField();
        f.add(textField);
        textField.setBounds(10,10,40,30);
        textField.setVisible(true);

        f.addWindowListener(new WindowAdapter(){
                public void windowClosing(WindowEvent e) {
                    System.exit(0);
                }
            });

        f.add(new test());
        f.pack();
        f.setVisible(true);
    }

    public void actionPerformed(ActionEvent e) {
               // if (e.getSource() == textField) {}

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:34:17.733

该变量`textField`是本地的`main`。如果要从 访问它`actionPerformed`，则需要将其更改为实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:40:40.960

是的。我同意@jpm。您需要将其声明为实例变量。请执行下列操作：-

```
 public class test extends Component {
       //Declare the variable here.
       private static JTextField textfield;

    public static void main(String[] args) {
       //Whenever you use the textfield use like this. Remove the keyword 'JTextField'.
       textfield = new JTextField();
  }
  } 
```

# visual-c++ - 是否定义了在 COM 接口中传递的结构的打包？

> ID：10145499
> 
> 赞同：5
> 
> 时间：2012-04-13T17:29:45.397
> 
> 标签：visual-c++, com, idl

我正在使用具有自己的自定义接口的第三方 COM 服务器，该接口将结构设置和获取作为它的一些属性。碰巧我正在为客户端使用 C++。我从下面的 IDL 文件中发布了一些具有代表性的代码，其中更改了名称并删除了 GUID。

是否定义了结构的打包，或者我的客户端代码碰巧使用了与构建 COM 服务器相同的打包设置，这只是幸运？在默认 C++ 编译器打包设置已更改的项目中是否可能出错？我可以使用编译指示包设置来确保客户端编译器打包设置正确吗？

在 IDL 或从 MIDL 生成的头文件中，我看不到任何打包编译指示或语句。如果客户端使用 C# 或 VB 会发生什么？如果通过 IDispatch 机制调用，是否更清楚地指定了打包行为？

```
struct MyStruct
{
    int a, b;
};

[
    object,
    uuid( /* removed */ ),
    dual,
    nonextensible,
    pointer_default(unique)
]
interface IVideoOutputSettings : IDispatch{

    [propget, id(1), HRESULT MyProperty([out, retval] struct MyStruct* pVal);
    [propput, id(1), HRESULT MyProperty([in] struct MyStruct newVal);

    /* other methods */
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T23:59:55.500

根据此处的 MIDL 命令行开关参考，默认打包沿 8 字节边界：

[/Zp 开关@MSDN（MIDL 语言参考）](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367388%28v=vs.85%29.aspx)

如果包值发生更改，您代码的其他部分更有可能首先中断，因为 IDL 文件通常是提前预编译的，很少有人会故意更改赋予 MIDL 的命令行开关（但不是如此罕见以至于有人可以摆弄 C 范围`#pragma pack`并忘记恢复默认状态）。

如果您有充分的理由更改设置，则可以使用`pragma pack`语句显式设置包装。

[pragma 属性@MSDN（MIDL 语言参考）](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367143%28v=vs.85%29.aspx)

幸运的是，没有任何一方更改任何会干扰默认打包的设置。会不会出错？是的，如果有人不遗余力地更改默认设置。

使用 IDL 文件时，详细信息通常会编译到类型库 (.tlb) 中，并且假定使用相同类型库时服务器和客户端的平台相同。这在`/Zp`开关的脚注中提出了建议，因为某些值将无法针对某些非 x86 或 16 位目标。也可能存在 32 位 <-> 64 位转换情况，这可能会导致预期中断。不幸的是，我不知道是否还有更多案例，但默认设置确实可以轻松工作。

C# 和 VB 没有任何内在行为来处理 .tlb 中的信息；相反，像 tlbimp 这样的工具通常用于将 COM 定义转换为可从 .NET 使用的定义。我无法验证 C#/VB.NET 与 COM 客户端和服务器之间的所有期望是否都成功；但是，如果您引用从在该设置下编译的 IDL 创建的 .tlb，我可以验证使用 8 以外的特定 pragma 设置是否有效。虽然我不建议您使用默认的编译指示包，但如果您希望将工作示例用作参考，请执行以下步骤。我创建了一个 C++ ATL 项目和一个 C# 项目来检查。

以下是 C++ 侧指令。

1.  我使用 Visual Studio 2010 中的默认设置创建了一个名为**SampleATLProject**的 ATL 项目，没有更改任何字段。这应该为您创建一个 dll 项目。
2.  编译项目以确保正在创建正确的 C 端接口文件（SampleATLProject_i.c 和 SampleATLProject_i.h）。
3.  我添加了一个调用`SomeFoo`到项目的 ATL 简单对象。同样，没有更改默认值。这将创建一个名为的类`CSomeFoo`，并将其添加到您的项目中。
4.  编译示例 ATL 项目。
5.  我右键单击 SampleATLProject.idl 文件，然后在 MIDL 设置下，将 Struct Member Alignment 设置为 4 个字节 (/Zp4)。
6.  编译示例 ATL 项目。
7.  我更改了 IDL 以添加一个名为“BarStruct”的结构定义。这需要添加一个具有 MIDL uuid 属性的 C 样式结构定义，以及引用该结构定义的库部分中的一个条目。请参阅下面的片段。
8.  编译示例 ATL 项目。
9.  在类视图中，我右键单击`ISomeFoo`并添加了一个名为 的方法`FooIt`，该方法将 a`struct BarStruct`作为名为**theBar**的 [in] 参数。
10.  编译示例 ATL 项目。
11.  在 SomeFoo.cpp 中，我添加了一些代码来打印结构的大小并抛出一个包含详细信息的消息框。

这是我的 ATL 项目的 IDL。

```
import "oaidl.idl";
import "ocidl.idl";

[uuid(D2240D8B-EB97-4ACD-AC96-21F2EAFFE100)]
struct BarStruct
{
  byte a;
  int b;
  byte c;
  byte d;
};

[
  object,
  uuid(E6C3E82D-4376-41CD-A0DF-CB9371C0C467),
  dual,
  nonextensible,
  pointer_default(unique)
]
interface ISomeFoo : IDispatch{
  [id(1)] HRESULT FooIt([in] struct BarStruct theBar);
};
[
  uuid(F15B6312-7C46-4DDC-8D04-9DEA358BD94B),
  version(1.0),
]
library SampleATLProjectLib
{
  struct BarStruct;
  importlib("stdole2.tlb");
  [
    uuid(930BC9D6-28DF-4851-9703-AFCD1F23CCEF)      
  ]
  coclass SomeFoo
  {
    [default] interface ISomeFoo;
  };
}; 
```

在`CSomeFoo`类内部，这里是`FooIt()`.

```
STDMETHODIMP CSomeFoo::FooIt(struct BarStruct theBar)
{
  WCHAR buf[1024];
  swprintf(buf, L"Size: %d, Values: %d %d %d %d", sizeof(struct BarStruct), 
           theBar.a, theBar.b, theBar.c, theBar.d);

  ::MessageBoxW(0, buf, L"FooIt", MB_OK);

  return S_OK;
} 
```

接下来，在 C# 方面：

1.  转到 SampleATLProject 的调试或所需输出目录，并在作为 C++ 项目输出的一部分生成的 .tlb 文件上运行 tlbimp.exe。以下对我有用：

    tlbimp SampleATLProject.tlb /out:Foo.dll /namespace:SampleATL.FooStuff

2.  接下来，我创建了一个 C# 控制台应用程序，并将对 Foo.dll 的引用添加到项目中。

3.  在 References 文件夹中，转到 Properties for并通过将**Embed Interop Types**设置为 false 来`Foo`关闭它。
***   我添加了一条 using 语句来引用`SampleATL.FooStuff`给定给 tlbimp 的命名空间，添加了`[STAThread]`属性`Main()`（COM 单元模型必须与进程内消费相匹配），并添加了一些代码来调用 COM 组件。**

 **[Tlbimp.exe（类型库导入器）@ MSDN](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.100%29.aspx)

这是该控制台应用程序的源代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using SampleATL.FooStuff;

namespace SampleATLProjectConsumer
{
    class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            BarStruct s;
            s.a = 1;
            s.b = 127;
            s.c = 255;
            s.d = 128;

            ISomeFoo handler = new SomeFooClass();
            handler.FooIt(s);
        }
    }
} 
```

最后，它运行，我得到一个显示以下字符串的模式弹出窗口：

```
Size: 12, Values: 1 127 255 128 
```

为了确保可以进行编译指示包更改（因为 4/8 字节打包是最常用的对齐方式），我按照以下步骤将其更改为 1：

1.  我返回到 C++ 项目，转到 SampleATLProject.idl 的属性并将 Struct Member Alignment 更改为 1 (/Zp1)。
2.  重新编译 SampleATLProject
3.  使用更新的 .tlb 文件再次运行 tlbimp。
4.  .NET 文件引用上将出现一个警告图标`Foo`，但如果单击该引用，它可能会消失。如果没有，您可以删除并重新添加对 C# 控制台项目的引用，以确保它使用的是新的更新版本。

我从这里运行它并得到了这个输出：

```
Size: 12, Values: 1 1551957760 129 3 
```

这很奇怪。但是，如果我们在 SampleATLProject_i.h 中强制编辑 C 级编译指示，我们会​​得到正确的输出。

```
#pragma pack(push, 1)
/* [uuid] */ struct  DECLSPEC_UUID("D2240D8B-EB97-4ACD-AC96-21F2EAFFE100") BarStruct
    {
    byte a;
    int b;
    byte c;
    byte d;
    } ;
#pragma pack(pop) 
```

SampleATLProject is recompiled here, no changes to the .tlb or .NET project, and we get the following:

```
Size: 7, Values: 1 127 255 128 
```

Regarding `IDispatch`, it depends on whether your client is late-bound. Late-bound clients have to parse the type information side of `IDispatch` and discern the proper definitions for non-trivial types. The documentation for `ITypeInfo` and `TYPEATTR` suggests that it is possible, given that the `cbAlignment` field provides the information necessary. I suspect most will never alter or go against the defaults, as this would be tedious to debug if things went wrong or if the pack expectations had to change between versions. Also, structures are not typically supported by many scripting clients that can consume `IDispatch`. One can frequently expect that only the types governed by the IDL `oleautomation` keyword are supported.

[IDispatch interface @ MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221608%28v=vs.85%29.aspx)
[IDispatch::GetTypeInfo @ MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221571%28v=vs.85%29.aspx)
[ITypeInfo interface @ MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221696%28v=vs.85%29.aspx)
[TYPEATTR structure @ MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221003%28v=vs.85%29.aspx)

[oleautomation keyword @ MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367129%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-14T00:44:40.517

Yes, structs are a problem in COM. If you use IUnknown based interfaces then you'll have to roll the dice with proper compiler settings. Few reasons to change the default.

If you use COM Automation then you have to declare the struct with a typedef in the .IDL. So that the client code can use IRecordInfo to access the structure properly, guided by the type library info. All you have to do is ensure that your compiler's /Zp setting matches midl.exe's /Zp setting. Not hard to do.

You sail around the problem entirely by realizing that any structure can be described by an interface with properties. Now it doesn't matter.**

# visual-studio-2010 - 错误：路径中有非法字符

> ID：10145500
> 
> 赞同：1
> 
> 时间：2012-04-13T17:29:53.427
> 
> 标签：visual-studio-2010, ienumerable, enumerate, illegal-characters

我正在使用 enumeratefiles 列出目录中的所有文件。它在遇到包含非法字符的文件名时抛出异常，然后停止列出文件的 foreach 循环。尽管出现异常，如何使 foreach 循环继续列出文件名？有任何想法吗？

代码：

```
try {

DirectoryInfo directory = new DirectoryInfo(targetPath);
IEnumerable<FileInfo> allfiles = directory.EnumerateFiles("*.*", SearchOption.AllDirectories);

foreach (FileInfo file in allfiles)
{
    Console.WriteLine(file.Name);
}

}
catch (ArgumentException o)
{
    Console.WriteLine("Error: {0}", o.Message);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:05:00.880

`foreach`你有循环周围的try catch 。这意味着如果循环内的任何一个调用失败，您的代码将中止循环的其余部分。

将代码更改为如下所示：

```
foreach (FileInfo file in allfiles)
{
    try
    {
        Console.WriteLine(file.Name);
    }
    catch (ArgumentException o)
    {
        Console.WriteLine("Error: {0}", o.Message);
    }
} 
```

您仍然应该尝试... catch`EnumerateFiles`以防引发错误。

# c# - 在 ASP.NET MVC 中跨页面存储通用日期

> ID：10145501
> 
> 赞同：0
> 
> 时间：2012-04-13T17:29:54.953
> 
> 标签：c#, asp.net, asp.net-mvc

我使用基本控制器和 OnActionExecuting 来获取我想要显示并保留在*大多数*页面（名称、ID 等......不超过 4/5 字段）的“通用”站点数据

OnActionExecuting 中的方法读取数据库并保存到 ViewBag 中，我在我的视图中选择了它，但我不禁认为这是一种浪费，因为它需要为每个 OnActionExecuting 调用数据库。

如何整合这些数据库调用并减少数据库访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:31:58.917

缓存存储库层中的公共数据值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:38:49.070

我在最近的一个项目中所做的是在登录期间我得到了“通用”数据，在这种情况下是 UserID、FirstName 和 ImageName，我将它保存在 Auth Ticket 中，如下所示：

```
UserData = pModel.PartyId.ToString() + "|" + pModel.BusinessName + "|" + pModel.FirstName + "|" + pModel.LastName + "|" + pModel.ImageUrl + "|" + UsersRole + "|" + IsAct;//PID, BusName, FirstName, LastName, imgUrl, Role, IsAct

// Create the cookie that contains the forms authentication ticket
HttpCookie authCookie = FormsAuthentication.GetAuthCookie(UN, true);
FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(authCookie.Value);
FormsAuthenticationTicket newTicket = new FormsAuthenticationTicket(ticket.Version, ticket.Name, ticket.IssueDate, ticket.Expiration, ticket.IsPersistent, UserData);
authCookie.Value = FormsAuthentication.Encrypt(newTicket);
System.Web.HttpContext.Current.Response.Cookies.Add(authCookie); 
```

然后，我在需要数据时检索此 Cookie，并像这样从中获取数据：

```
var cookie = context.Request.Cookies[FormsAuthentication.FormsCookieName];
dynamic UN = FormsAuthentication.Decrypt(cookie.Value);
string UserData = UN.UserData;//PID, BusName, FirstName, LastName, imgUrl, Role, IsAct
string[] pFields = UserData.Split('|');
string[] MyRoles = { pFields[5] }; 
```

请注意：这仅适用于您知道在登录会话期间不会更改的静态数据，请注意您在此 Cookie 中发布的内容。

不要让 cookie 膨胀，或者将字段保持在最小值，最大值为 4K，但我的目标是 500-1000 字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:38:48.367

从基本控制器继承并不意味着您在请求之间共享状态。每个请求都会产生一个新的控制器实例。

如果您不想每次都检索这些数据，则需要以某种状态（缓存、会话、应用程序）存储这些数据。然后，您可以从基本控制器访问存储它的任何机制。

然后是免责声明……这些访问数据库的费用是否昂贵？你打算用最小的延迟问题来换取内存管理问题吗？

更新：

如果它只是 4-5 个字段（这*似乎是*用户特定的，并且在用户会话期间它们不会更改），那么我只需将它们存储在会话状态中。

个人偏好在这里，但我喜欢在基本控制器/页面中使用强类型访问器，例如：

```
 protected string Name
    {
        get
        {
            if (Session["Name"] == null)
            {
                var results = GoLoadFields();                    
                return Session["Name"].ToString();
            }

            return Session["Name"].ToString();
        }

        set
        {
            Session["Name"] = value;
        }
    } 
```

然后在从基本控制器继承的所有控制器中，都可以引用这些属性：

```
myAwesomeViewModel.Name = this.Name; 
```

内存管理免责声明旨在让您避免查询数据库，获得相同的大型结果集，并将其推送到每个用户的会话中。在你把任何东西放在内存中之前，只要确保你只保留你需要的东西以及你需要它多长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T18:03:10.803

您可以 为此目的使用[System.Runtime.Caching.MemoryCache 。](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)

一些例子：

*   [http://stevescodingblog.co.uk/net4-caching-with-mvc/](http://stevescodingblog.co.uk/net4-caching-with-mvc/)
*   [http://msprogrammer.serviciipeweb.ro/tag/memorycache/](http://msprogrammer.serviciipeweb.ro/tag/memorycache/)

缓存将在请求中持续存在，直到达到每个缓存项的到期时间。

# php - 从 MP3 PHP 获取专辑封面

> ID：10145507
> 
> 赞同：2
> 
> 时间：2012-04-13T17:30:23.940
> 
> 标签：php, html, mp3, id3

我正在使用此代码获取 MP3 文件的 ID3 信息。

```
 <?php
    class CMP3File { 
     var $title;var $artist;var $album;var $year;var $comment;var $genre; 
     function getid3 ($file) { 
      if (file_exists($file)) { 
       $id_start=filesize($file)-128; 
       $fp=fopen($file,"r"); 
       fseek($fp,$id_start); 
       $tag=fread($fp,3); 
       if ($tag == "TAG") { 
        $this->title=fread($fp,30); 
        $this->artist=fread($fp,30); 
        $this->album=fread($fp,30); 
        $this->year=fread($fp,4); 
        $this->comment=fread($fp,30); 
        $this->genre=fread($fp,1); 
        fclose($fp); 
        return true; 
       } else { 
        fclose($fp); 
        return false; 
       } 
      } else { return false; } 
     } 
    } 
    ?> 
```

然后我使用这个代码来调用它。

```
 include ("CMP3File.php"); 
     $filename="music_file.mp3"; 
     $mp3file=new CMP3File; 
     $mp3file->getid3($filename); 
     echo "Title: $mp3file->title<br>\n"; 
     echo "Artist: $mp3file->artist<br>\n"; 
     echo "Album: $mp3file->album<br>\n"; 
     echo "Year: $mp3file->year<br>\n"; 
     echo "Comment: $mp3file->comment<br>\n"; 
     echo "Genre: " . Ord($mp3file->genre) . "<br>\n"; 
```

有没有办法将专辑封面作为图像来获取和呼应？

# amazon-ec2 - 无法连接到 chromedriver http://127.0.0.1:50299 (Selenium::WebDriver::Error::WebDriverError)

> ID：10145508
> 
> 赞同：5
> 
> 时间：2012-04-13T17:30:31.127
> 
> 标签：amazon-ec2, jenkins, headless, headless-browser, selenium-chromedriver

> **可能重复：**
> [无法连接到 chromedriver 127.0.0.1:46050 (Selenium::WebDriver::Error::WebDriverError)](https://stackoverflow.com/questions/9982129/unable-to-connect-to-chromedriver-http-127-0-0-146050-seleniumwebdrivere)

我在 amazon ec2 api 上安装了 jenkins，我正在使用 jenkins 运行我的无头黄瓜测试。

我下载了 chromedriver，解压缩并将其复制到我的路径（/usr/bin）并更改了模式：

wget [http://chromium.googlecode.com/files/chromedriver_linux32_18.0.1022.0.zip](http://chromium.googlecode.com/files/chromedriver_linux32_18.0.1022.0.zip)

解压chromedriver_linux32_18.0.1022.0.zip

cp chromedriver /usr/bin

sudo chmod +x /usr/bin/chromedriver

但是当我运行我的测试（HEADLESS=true cucumber features）时，我得到了这个错误：

**无法连接到 chromedriver [http://127.0.0.1:50299](http://127.0.0.1:50299) (Selenium::WebDriver::Error::WebDriverError)**

哪个chromedriver：

/usr/bin/chromedriver

哪个谷歌浏览器：

/usr/bin/google-chrome

我的 Gemfile 中有无头 gem，在 env.rb 中也有以下代码：

如果环境 ['无头']

```
 require 'headless'

  headless = Headless.new

  headless.start

  at_exit do

    headless.destroy

  end

end 
```

我错过了什么吗？有任何想法吗？

# kernel - 更改 WorkGroups 维度时，无法从 AMD 样本减少中进行 Opencl Sum Reduction

> ID：10145514
> 
> 赞同：1
> 
> 时间：2012-04-13T17:30:51.847
> 
> 标签：kernel, opencl, reduction

以下代码来自[amd官网](http://developer.amd.com/documentation/articles/Pages/OpenCL-Optimization-Case-Study-Simple-Reductions_6.aspx)

```
__kernel
void reduce(__global float* buffer,
            __local float* scratch,
            __const int length,
            __global float* result) {

  int global_index = get_global_id(0);
  float accumulator = INFINITY;
  // Loop sequentially over chunks of input vector
  while (global_index < length) {
    float element = buffer[global_index];
    accumulator = (accumulator < element) ? accumulator : element;
    global_index += get_global_size(0);
  }

  // Perform parallel reduction
  int local_index = get_local_id(0);
  scratch[local_index] = accumulator;
  barrier(CLK_LOCAL_MEM_FENCE);
  for(int offset = get_local_size(0) / 2;
      offset > 0;
      offset = offset / 2) {
    if (local_index < offset) {
      float other = scratch[local_index + offset];
      float mine = scratch[local_index];
      scratch[local_index] = (mine < other) ? mine : other;
    }
    barrier(CLK_LOCAL_MEM_FENCE);
  }
  if (local_index == 0) {
     result[get_group_id(0)] = scratch[0];
  }
} 
```

我对其进行了调整以使其作为总和减少工作：

```
__kernel
void reduce(__global float* buffer,
            __local float* scratch,
            __const int length,
            __global float* result) {

  int global_index = get_global_id(0);
  float accumulator = 0.0;
  // Loop sequentially over chunks of input vector
  while (global_index < length) {
    float element = buffer[global_index];
    accumulator = accumulator + element;
    global_index += get_global_size(0);
  }

  // Perform parallel reduction
  int local_index = get_local_id(0);
  scratch[local_index] = accumulator;
  barrier(CLK_LOCAL_MEM_FENCE);
  for(int offset = get_local_size(0) / 2;
      offset > 0;
      offset = offset / 2) {
    if (local_index < offset) {
      float other = scratch[local_index + offset];
      float mine = scratch[local_index];
      scratch[local_index] = mine + other;
    }
    barrier(CLK_LOCAL_MEM_FENCE);
  }
  if (local_index == 0) {
     result[get_group_id(0)] = scratch[0];
  }
} 
```

当我只使用一个工作组时，它就像一种魅力（意思是我给予`NULL`）`local_work_size`，`clEnqueueNDRangeKernel()`但是当我尝试改变工作组维度时，事情就超出了我的控制。（我应该说我是 OpenCl 的新手）

我所做的如下

```
#define GLOBAL_DIM 600
#define WORK_DIM 60

size_t global_1D[3] = {GLOBAL_DIM,1,1};
size_t work_dim[3] = {WORK_DIM,1,1};
err = clEnqueueNDRangeKernel(commands, av_velocity_kernel, 1, NULL, global_1D, work_dim, 0, NULL, NULL); //TODO CHECK THIS LINE
if (err)    {
  printf("Error: Failed to execute av_velocity_kernel!\n");            printf("\n%s",err_code(err));   fflush(stdout);      return EXIT_FAILURE;    } 
```

我做错了吗？

此外，我注意到如果我设置`#define GLOBAL_DIM 60000`（这是我需要的）我会用完本地内存。如果我使用多个工作组，我是否会获得“更多”本地内存，或者本地内存在工作组之间均匀分布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:08:49.373

First of all, those reduction kernels only work correctly if the workgroup size is a power of two. This means that instead of 60 you should use something 64\. Also, there is no way that changing the GLOBAL_DIM makes you run out of local memory: you're most probably doing something wrong when invoking the kernel.

# excel - Excel VBA代码打开文件

> ID：10145515
> 
> 赞同：1
> 
> 时间：2012-04-13T17:30:59.830
> 
> 标签：excel, vba

我创建了一个宏按钮来从 excel 生产表中打开我的日常文件，其中我有特定文件的所有宏按钮。

我所有文件的格式通常是相同的：

1.  业务单位名称：基督教青年会
2.  年份：2012
3.  月份：四月
4.  周：第 2 周
5.  天数：12
6.  文件名称：YMC模板041212.xlsm

我遇到了最后一个 excel 文件扩展名的问题。如何添加 MyDaily 模板和 MyDateProd 以及 .xlsm。我有这个 -J:.....\& myDailyTemplate & myDateProd.xlsm") 请参阅下面的完整文件路径名。

```
Sub Open_DailyProd()

    Dim myFolderYear As String
    Dim myFolderMonth As String
    Dim myFolderWeek As String
    Dim myFolderDaily As String
    Dim myDateProd As String
    Dim myBusinessUnit As String
    Dim myDailyTemplate As String

    myBusinessUnit = Sheet1.Cells(32, 2)
    myFolderYear = Sheet1.Cells(11, 2)
    myFolderMonth = Sheet1.Cells(12, 2)
    myFolderWeek = Sheet1.Cells(13, 2)
    myFolderDaily = Sheet1.Cells(14, 2)
    myDateProd = Sheet1.Cells(15, 2)
    myDailyTemplate = Sheet1.Cells(6, 5)

    Application.Workbooks.Open ("J:\IAS\3CMC05HA01\IAC Clients\myBusinessUnit\myFolderYear\myFolderMonth\myFolderWeek\myFolderDaily\& myDailyTemplate & myDateProd.xlsm")

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T18:16:17.410

Excel 正在寻找一个名为： `"J:\IAS\3CMC05HA01\IAC Clients\myBusinessUnit\myFolderYear\myFolderMonth\myFolderWeek\myFolderDaily\& myDailyTemplate & myDateProd.xlsm"`

因为这是引号中包含的内容，但是从您的代码中，您似乎有许多变量是该字符串的一部分，您需要将它们从引号中取出并将它们连接在一起。尝试这样的事情：

```
"J:\IAS\3CMC05HA01\IAC Clients\" & myBusinessUnit & "\" & myFolderYear _
& "\" & myFolderMonth & "\" & myFolderWeek & "\" & myFolderDaily & _
"\" & myDailyTemplate & myDateProd & ".xlsm" 
```

我在此处添加了延续 _ 以使其在屏幕上更具可读性，但这不是必需的，如果您愿意，可以将所有内容放在一行中。

除非您在其他地方需要所有`myBusinessUnit`, `myFolderYear`, etc 变量，否则我会考虑在某种数组中执行它，然后执行一个`Join`函数来连接所有内容。我个人觉得这更容易维护，更容易看到文件夹结构中的层次结构，而不是查看一个很长的字符串并试图找出路径的哪一部分是错误的。

```
Sub Open_DailyProd()

    Dim pathParts(1 To 10) As String
    Dim path As String

    pathParts(1) = "J:"
    pathParts(2) = "IAS"
    pathParts(3) = "3CMC05HA01"
    pathParts(4) = "IAC Clients"
    pathParts(5) = Sheet1.Cells(32, 2)
    pathParts(6) = Sheet1.Cells(11, 2)
    pathParts(7) = Sheet1.Cells(12, 2)
    pathParts(8) = Sheet1.Cells(13, 2)
    pathParts(9) = Sheet1.Cells(14, 2)
    pathParts(10) = Sheet1.Cells(6, 5) & Sheet1.Cells(15, 2) & ".xlsm"

    path = Join(pathParts, "\")

    Application.Workbooks.Open (path)

End Sub 
```

# ios - 在 iOS 中使用多个位图

> ID：10145516
> 
> 赞同：0
> 
> 时间：2012-04-13T17:31:04.033
> 
> 标签：ios, bitmap

我正在尝试将我的代码从 android 移植到 iOS。在 android 中，我使用多个位图，然后使用 Xfer 模式传输它们。我如何在 iOS 中实现同样的目标。我试过了

```
CGContextRef context = UIGraphicsGetCurrentContext(); 
```

但不确定如何获得多个位图来操作。可能是我缺少一些基本的东西。感谢所有的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:35:47.740

创建一个新`CGBitmapContext`的绘图。`CGBitmapContext`就像 的子类`CGContext`。

我不确定“使用 Xfer 模式传输它们”是什么意思；也许您正在寻找`CGBlendMode`s？

# c# - N 层应用程序中的自定义日志记录

> ID：10145522
> 
> 赞同：0
> 
> 时间：2012-04-13T17:31:26.123
> 
> 标签：c#, asp.net

我有一个 N 层应用程序、ASP.Net 前端，然后是一个 .Net C# 业务和数据访问层。我创建了一个简单的自定义日志库。然后在我的整个应用程序中使用这个日志库，即 Log.LogException 和 Log.LogMessage。

对于这个日志库，我想为我的应用程序创建的日志文件夹定义自定义路径。我最初认为正确的方法是为我的日志库使用 App.Config，然后从那里读取路径，但问题是当我将我的 Web 应用程序发布到其目标位置时，它会处理包括日志记录 DLL 在内的所有二进制文件但不是随附的 App.Config。

这使我相信这不是正确的方法。我可以做一些“hack”来复制它，但如果它不是最好的设计方法，那是个坏主意。

这是受支持的设计还是我走错了路？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:43:22.483

您需要在 Web App 配置中为日志提供自定义路径，或者将您的自定义配置添加到 Web App，这将在您发布时部署它。

请参见此处：[将 dll 的配置文件移动到调用 dll 的应用程序](https://stackoverflow.com/questions/9762938/moving-the-config-files-for-a-dll-to-the-app-that-calls-the-dll)

但是，我建议完全取消您的自定义日志记录库，并使用如下内容：http: [//nlog-project.org/](http://nlog-project.org/)

# java - java - 如何对对象的arraylist进行排序？

> ID：10145523
> 
> 赞同：7
> 
> 时间：2012-04-13T17:31:28.703
> 
> 标签：java, sorting, object, arraylist

所以我想要一个java中的对象数组列表。

我有`object1.number`and `object2.number`, `object3.number`, 等等...但是那些对象除了 , 还有其他属性`number`, 比如`name`, `distance`, 等等...

因此，如果它正在对 a 中的字符串进行排序，`array`那么将一个字符串放入 a`temporal`并让另一个字符串代替它......但是在`araryList`对象中，我该怎么做呢？

我可以将对象移动到数组的那个位置吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T17:36:50.973

实现你自己的比较器：

```
Arrays.sort(yourArray, new Comparator<YourClass>() {
        @Override
        public int compare(YourClass o1, YourClass o2) {
            //compare object properties
        }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T17:34:41.357

您需要实现可比较的接口

`implements Comparable`

做这项工作的方法是

```
public int compareTo(Object obj)
{
} 
```

请注意，由于可以在 implements 语句中使用的通用语法（如下所示），因此 object 经常被完整的类型替换。

[教程文档中提供了](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)一个完整的示例，希望对您有所帮助

一个完整的例子（取自上面的链接如下），我添加了这个，以防链接在某个时候失效

```
import java.util.*;

public class Name implements Comparable<Name> {
    private final String firstName, lastName;

    public Name(String firstName, String lastName) {
        if (firstName == null || lastName == null)
            throw new NullPointerException();
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public String firstName() { return firstName; }
    public String lastName()  { return lastName;  }

    public boolean equals(Object o) {
        if (o == null || !(o instanceof Name))
            return false;
        Name n = (Name) o;
        return n.firstName.equals(firstName) && n.lastName.equals(lastName);
    }

    public int hashCode() {
        return 31*firstName.hashCode() + lastName.hashCode();
    }

    public String toString() {
    return firstName + " " + lastName;
    }

    public int compareTo(Name n) {
        int lastCmp = lastName.compareTo(n.lastName);
        return (lastCmp != 0 ? lastCmp : firstName.compareTo(n.firstName));
    }
} 
```

文章中的客户端代码是：

```
import java.util.*;

public class NameSort {
    public static void main(String[] args) {
        Name nameArray[] = {
            new Name("John", "Smith"),
            new Name("Karl", "Ng"),
            new Name("Jeff", "Smith"),
            new Name("Tom", "Rich")
        };

        List<Name> names = Arrays.asList(nameArray);
        Collections.sort(names);
        System.out.println(names);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:34:24.067

为此，您需要使用比较器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T17:36:16.413

根据您的问题，我认为您应该自己实现排序算法。如果是这种情况，您可以操纵 ArrayList 中元素的位置，它的工作方式与常规数组略有不同。看看`add(int index, E element)`。该`index`参数允许您决定在 ArrayList 中的哪个位置添加元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T17:37:53.843

要像处理传统数组一样操作 ArrayList 的条目，请使用 ArrayList.set(int, E)。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html#set%28int,%20E%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html#set%28int,%20E%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-19T17:07:32.470

在 Java 8 中使用 to`Collections.sort()`对 ArrayList 进行排序：

```
Collections.sort(array, new Comparator<Class>() {
    @Override
    public int compare(Class o1, Class o2) {
        //compare object properties
    }
}); 
```

# c# - WP7 切换到 SQL

> ID：10145525
> 
> 赞同：0
> 
> 时间：2012-04-13T17:31:29.297
> 
> 标签：c#, silverlight, windows-phone-7, azure-sql-database

我正在尝试通过 WCF 将 ToggleSwitch (True/False) 的结果保存回我的 Azure 数据库。在数据库中，数据类型设置为 int。

到目前为止是正确的吗？

然后我不知道toggle1后面是什么。此代码的一部分，例如：

```
 private void addPersonBtn_Click(object sender, RoutedEventArgs e)
    {
       _ServiceClient.AddPersonAsync(fnameTxtBox.Text, snameTxtBox.Text, toggle1.XXX, toggle2.XXX);
    } 
```

同样，这里会发生什么 - 不幸的是，它并没有将其限制在几个选项中，而是在自动完成中列出了相当长的列表。

任何帮助都会很棒。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:59:50.087

该`IsChecked`物业是您正在寻找的。它是一个布尔 ( `bool?`, 或`Nullable<bool>`) 值，可用于指示是否检查了开关。

如果您的方法签名采用`bool`, 您可以使用`toggle1.IsChecked.GetValueOrDefault()`, 来获取选中状态，或者`false`如果值为`null`. 不过，我几乎肯定`ToggleSwitch`总是有一个真/假值。

# java - 小程序未在 html 页面上加载

> ID：10145528
> 
> 赞同：0
> 
> 时间：2012-04-13T17:31:57.317
> 
> 标签：java, html, applet

我有这个小程序，但我不知道为什么它没有加载到 html 页面上。我在 java.policy 文件中添加了完全权限。我使用来自 NetBeans Applet 输出的默认 html 文件。

```
/* Hearts Cards Game with AI*/
import java.applet.Applet;
import java.awt.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Random;
import javax.swing.JOptionPane;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;
import java.awt.Graphics;
import java.awt.Image;
import java.security.AccessController;
import javax.swing.ImageIcon;
import javax.swing.*;
import javax.swing.JPanel;

public class Game extends JApplet implements MouseListener, Runnable {

    int initNoCards = 13;
    int width, height;
    boolean endGame = false;
    int turn = -1;
    int firstCard = 0;
    int firstTrick = 0;
    String leadingSuit = null;
    Cards leadingCard = null;
    Cards playCard = null;
    String startCard = "c2";
    Cards[] trickCards = new Cards[4];
    ArrayList<Cards>[] playerCards = new ArrayList[4];
    ArrayList<Cards>[] takenCards = new ArrayList[4];
    boolean heartsBroken = false;
    ArrayList<Cards> cards = new ArrayList<Cards>();

    String[] hearts = {"h2", "h3", "h4", "h5", "h6", "h7", "h8", "h9", "h10", "h12", "h13", "h14", "h15"};
    String queen = "s13";
    int cardHeight = 76;
    int cardWidth = 48;
    ArrayList<Rectangle> rectangles = new ArrayList<Rectangle>();
    int selectedCard = -1;
//set the background image
    Image backImage = new ImageIcon("deck\\back2.png").getImage();

    public void GetDataFromXML() {
        try {
            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser saxParser = factory.newSAXParser();
            DefaultHandler handler = new DefaultHandler() {

                boolean name = false;
                boolean image = false;

                @Override
                public void startElement(String uri, String localName, String qName,
                        Attributes attributes) throws SAXException {
                    if (qName.equalsIgnoreCase("NAME")) {
                        name = true;
                    }
                    if (qName.equalsIgnoreCase("IMAGE")) {
                        image = true;
                    }
                }

                @Override
                public void endElement(String uri, String localName,
                        String qName) throws SAXException {
                }

                @Override
                public void characters(char ch[], int start, int length) throws SAXException {
                    String s = new String(ch, start, length);
                    if (name) {
                        cards.add(new Cards(s));
                        name = false;
                    }
                    if (image) {
                        image = false;
                    }
                }
            };
            saxParser.parse("deck\\deck.xml", handler);
        } catch (Exception e) {
        }
    }
    //function for comparing cards from same suite

    public boolean lowerThan(Cards c1, Cards c2) {
        int a, b;
        a = Integer.parseInt(c1.getName().substring(1));
        b = Integer.parseInt(c2.getName().substring(1));
        return a < b;
    }
//checks if a card is valid to play
    public boolean ValidMove(Cards c) {
        if (firstCard == 0) {
            if (c.getName().equals(startCard)) {
                firstCard = 1;
                return true;
            }
            return false;
        }
        boolean result = playerCards[turn].indexOf(c) >= 0;
        if (leadingSuit == null) {
            return result;
        }
        boolean found = false;
        for (int i = 0; i < playerCards[turn].size(); i++) {
            if (playerCards[turn].get(i).getName().charAt(0) == leadingSuit.charAt(0)) {
                found = true;
                break;
            }
        }
        if (!found) {
            boolean justHearts = true;
            for (int i = 0; i < playerCards[turn].size(); i++) {
                if (playerCards[turn].get(i).getName().charAt(0) != 'h') {
                    justHearts = false;
                    break;
                }
            }
            if (firstTrick == 0) {
                if (c.getName().equals(queen)) {
                    return false;
                }
                if (!justHearts && c.getName().charAt(0) == 'h') {
                    return false;
                }
            } else {
                if (c.getName().charAt(0) == 'h' && leadingSuit == null && !heartsBroken && !justHearts) {
                    return false;
                }
            }
        } else {
            if (c.getName().charAt(0) != leadingSuit.charAt(0)) {
                return false;
            }
        }
        return result;
    }

    @Override
    public void init() {
        GetDataFromXML();
        setSize(500, 500);
        width = super.getSize().width;
        height = super.getSize().height;
        setBackground(Color.white);
        addMouseListener(this);
        for (int i = 0; i < cards.size(); i++) {
            System.out.println(cards.get(i).getName());
            System.out.println(cards.get(i).getImage());
        }
        Shuffle();
    }

    public int GetTrickCount() {
        int count = 0;
        for (int i = 0; i < trickCards.length; i++) {
            if (trickCards[i] != null) {
                count++;
            }
        }
        return count;
    }

    public void ResetTrick() {
        for (int i = 0; i < trickCards.length; i++) {
            trickCards[i] = null;
        }
    }

    @Override
    public void run() {
        try {
            PlayTurn();
        } catch (InterruptedException ex) {
        }
    }

    public void start() {
        Thread th = new Thread(this);
        th.start();
    }
//function for shuffling cards and painting players cards
    public void Shuffle() {

        for (int i = 0; i < 4; i++) {
            playerCards[i] = new ArrayList<Cards>();
            takenCards[i] = new ArrayList<Cards>();
        }
        ArrayList<Cards> list = new ArrayList<Cards>();
        list.addAll(cards);
        Collections.shuffle(list);
        for (int i = 0; i < list.size(); i++) {
            System.out.print(list.get(i).getName() + " ");
        }
        //initializare liste carti
        for (int i = 0; i < 4; i++) {
            playerCards[i] = new ArrayList<Cards>();
            takenCards[i] = new ArrayList<Cards>();
            for (int j = 0; j < initNoCards; j++) {
                playerCards[i].add((list.get(j + i * initNoCards)));
                if (list.get(j + i * initNoCards).getName().equals(startCard)) {
                    turn = i;
                }
            }
            Collections.sort(playerCards[i], c);
            ShowCards(i);
        }
        for (int i = 0; i < playerCards[0].size() - 1; i++) {
            rectangles.add(new Rectangle((141 + 1) + 13 * i - 2, 350 + 1, 13 - 2, cardHeight - 1));
        }
        rectangles.add(new Rectangle((141 + 1) + 13 * 12 - 2, 350 + 1, cardWidth, cardHeight - 1));
        ShowPlayersCards();
    }
    Comparator<Cards> c = new Comparator<Cards>() {

        @Override
        public int compare(Cards o1, Cards o2) {
            if (o2.getName().charAt(0) != o1.getName().charAt(0)) {
                return o2.getName().charAt(0) - o1.getName().charAt(0);
            } else {
                int a, b;
                a = Integer.parseInt(o1.getName().substring(1));
                b = Integer.parseInt(o2.getName().substring(1));
                return a - b;
            }
        }
    };

    public void PlayTurn() throws InterruptedException {
        endGame = true;
        System.out.println("Its " + turn);
        for (int i = 0; i < 4; i++) {
            if (!playerCards[i].isEmpty()) {
                endGame = false;
            }
        }
        if (endGame) {
            System.out.println("Game over!");
            GetPlayersScore();
            return;
        }
        if (turn != 0) {
            Random r = new Random();
            int k = r.nextInt(playerCards[turn].size());
            Cards AIcard = playerCards[turn].get(k);
            while (!ValidMove(AIcard)) {
                k = r.nextInt(playerCards[turn].size());
                AIcard = playerCards[turn].get(k);
            }
            leadingCard = AIcard;
            playCard = AIcard;
        } else {
            System.out.println("\nIt is player's (" + turn + ") turn");
            System.out.println("Player (" + turn + ") enter card to play:");
            leadingCard = null;
            playCard = null;//new Cards(read);
            while (true) {
                if (playCard != null) {
                    break;
                }
                Thread.sleep(50);
            }
        }
        repaint();
        Thread.sleep(1000);
        repaint();
        if (playCard.getName().charAt(0) == 'h') {
            heartsBroken = true;
        }
        playerCards[turn].remove(playCard);
        trickCards[turn] = playCard;
        if (GetTrickCount() == 1)//setez leading suit doar pentru trickCards[0]
        {
            leadingSuit = GetSuit(playCard);
        }
        System.out.println("Leading suit " + leadingSuit);
        System.out.println("Player (" + turn + ") chose card " + playCard.getName() + " to play");
        ShowTrickCards();
        ShowPlayersCards();
        if (GetTrickCount() < 4) {
            turn = (turn + 1) % 4;
        } else {
            turn = GetTrickWinner();
            leadingSuit = null;
            firstTrick = 1;
            playCard = null;
            repaint();
        }
        PlayTurn();
    }

    public void ShowTrickCards() {
        System.out.println("Cards in this trick are:");
        for (int i = 0; i < 4; i++) {
            if (trickCards[i] != null) {
                System.out.print(trickCards[i].getName() + " ");
            }
        }
    }

    public String GetSuit(Cards c) {
        if (c.getName().contains("c")) {
            return "c";
        }
        if (c.getName().contains("s")) {
            return "s";
        }
        if (c.getName().contains("h")) {
            return "h";
        }
        if (c.getName().contains("d")) {
            return "d";
        }
        return null;
    }

    public String GetValue(Cards c) {
        String get = null;
        get = c.getName().substring(1);
        return get;
    }

    public int GetTrickWinner() {
        int poz = 0;
        for (int i = 1; i < 4; i++) {
            if (trickCards[poz].getName().charAt(0) == trickCards[i].getName().charAt(0) && lowerThan(trickCards[poz], trickCards[i]) == true) {
                poz = i;
            }
        }
        System.out.println("\nPlayer (" + poz + ") won last trick with card " + trickCards[poz].getName());
        ResetTrick();
        return poz;
    }

    public void ShowPlayersCards() {
        ShowCards(0);
        ShowCards(1);
        ShowCards(2);
        ShowCards(3);
    }

    public void GetPlayersScore() {
        GetScore(0);
        GetScore(1);
        GetScore(2);
        GetScore(3);
    }

    public void ShowCards(int player) {
        System.out.print("\nPlayer (" + player + ") cards: ");
        for (int i = 0; i < playerCards[player].size(); i++) {
            System.out.print(playerCards[player].get(i).getName() + " ");
        }
        System.out.println();
    }

    public int GetScore(int player) {
        int score = 0;
        for (int i = 0; i < takenCards[player].size(); i++) {
            for (int j = 0; j < hearts.length; j++) {
                if (takenCards[player].get(i).getName().equals(hearts[j])) {
                    score++;
                    break;
                }
            }
            if (takenCards[player].get(i).getName().equals(queen)) {
                score += 13;
            }
        }
        return score;

    }

    @Override
    public void paint(Graphics g) {
        g.drawImage(backImage, 0, 0, getWidth(), getHeight(), this);
        for (int i = 0; i < playerCards[0].size(); i++) {
            if (selectedCard == i) {
                g.drawImage(playerCards[0].get(i).getImage(), 141 + i * 13, 340, null);
            } else {
                g.drawImage(playerCards[0].get(i).getImage(), 141 + i * 13, 350, null);
            }
            if (trickCards[0] != null) {
                g.drawImage(trickCards[0].getImage(), 225, 250, 48, 76, null);
            }
            if (trickCards[1] != null) {
                g.drawImage(trickCards[1].getImage(), 177, 174, 48, 76, null);
            }
            if (trickCards[2] != null) {
                g.drawImage(trickCards[2].getImage(), 225, 98, 48, 76, null);
            }
            if (trickCards[3] != null) {
                g.drawImage(trickCards[3].getImage(), 273, 174, 48, 76, null);
            }
        }
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        if (turn != 0) {
            return;
        }
        for (int i = 0; i < rectangles.size(); i++) {
            if (rectangles.get(i).contains(e.getPoint())) {
                if (i == selectedCard) {
                    if (ValidMove(playerCards[0].get(i))) {
                        selectedCard = -1;
                        rectangles.get(rectangles.size() - 2).width = rectangles.get(rectangles.size() - 1).width;
                        playCard = playerCards[0].get(i);
                        leadingCard = playCard;
                        rectangles.remove(rectangles.size() - 1);
                        trickCards[0] = playerCards[0].remove(i);
                    } else {
                        if (firstCard == 0) {
                            JOptionPane.showMessageDialog(this, "You have to play 2 of clubs!");
                        }
                    }
                } else {
                    selectedCard = i;
                    rectangles.get(i).y -= 10;
                }
                repaint();
                break;
            }
        }
    }

    @Override
    public void mousePressed(MouseEvent e) {
    }

    @Override
    public void mouseReleased(MouseEvent e) {
    }

    @Override
    public void mouseEntered(MouseEvent e) {
    }

    @Override
    public void mouseExited(MouseEvent e) {
    }
}

class Cards extends JPanel {

    private String name;
    private String image;
    private Image img;

    public Cards(String name) {
        super();
        this.name = name;
        this.image = "deck\\" + name + ".png";
        this.img = new ImageIcon(image).getImage();

    }

    public Cards() {
        super();
        this.name = null;
        this.image = null;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Image getImage() {
        return img;
    }

    public void setImage(String image) {
        this.image = image;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (!(obj instanceof Cards)) {
            return false;
        }
        Cards c = (Cards) obj;
        return name.equals(c.getName()) && image.equals(c.getImage());
    }

    @Override
    public int hashCode() {
        int hash = 7;
        hash = 31 * hash + (this.name != null ? this.name.hashCode() : 0);
        hash = 31 * hash + (this.image != null ? this.image.hashCode() : 0);
        return hash;
    }

    @Override
    public void paint(Graphics g) {
        g.drawImage(img, WIDTH, HEIGHT, this);
    }

    public boolean lowerThan(Cards c1, Cards c2) {
        int a, b;
        a = Integer.parseInt(c1.getName().substring(1));
        b = Integer.parseInt(c2.getName().substring(1));
        return a < b;
    }

    public int compareTo(Cards c) {
        if (c.getName().charAt(0) != name.charAt(0)) {
            return c.getName().charAt(0) - name.charAt(0);
        } else {
            int a, b;
            a = Integer.parseInt(name.substring(1));
            b = Integer.parseInt(c.getName().substring(1));
            return a - b;
        }
    }
} 
```

## HTML

```
<HTML>
<HEAD>
   <TITLE>Applet HTML Page</TITLE>
</HEAD>
<BODY>
<H3><HR WIDTH="100%">Applet HTML Page<HR WIDTH="100%"></H3>

<P>
<APPLET codebase="classes" code="Game.class" width=350 height=200></APPLET>
</P>

<HR WIDTH="100%"><FONT SIZE=-1><I>Generated by NetBeans IDE</I></FONT>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:09:10.990

```
Image backImage = new ImageIcon("deck\\back2.png").getImage(); 
```

If I am the user of the applet when it is on the internet, the will cause the JRE to search for a `File` relative to the current user directory on my PC, either that or the cache of FF. In either case, it will not locate an image by the name of `back2.png`.

For fear of sounding like a looping Clip:

*   Resources intended for an applet (icons, BG image, help files etc.) should be accessed by URL.
*   An applet will not need trust to access those resources, so long as the resources are on the run-time class-path, or on the same server as the code base or document base.

## Further

> I have added full permissions in java.policy file.

This is pointless. It will not be workable at time of deployment unless you control every machine it is intended to run on. If an applet needs trust in a general environment, it needs to be digitally signed. You might as well sign it while building the app.

> cant figure out why it doesnt load on html page.

Something that would assist greatly is to configure the Java Console to open when an applet is loaded. There is a setting in the last tab of the Java Control Panel that configures it.

# php - 禁止 PHP CLI 加载存在于 ini 配置文件中的扩展

> ID：10145534
> 
> 赞同：0
> 
> 时间：2012-04-13T17:32:08.430
> 
> 标签：php, command-line, phpunit, php-extension

我有一个 php 安装，我想通过 ini 文件加载几个扩展。既适用于 apache 也适用于命令行。

但是对于一些单元测试，我不希望加载这些扩展。

我可以以不会加载某些扩展的方式调用 php 或 phpunit 吗？

比方说，我在系统上的 php.ini 是：

```
extension = A.so
extension = B.so
extension = C.so 
```

这次我只想用 A 和 B 运行 php。是否有一些类似`php --exclude-extension=C.so`或`php -d "extension=!C.so"`使我无法从手册中获得的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T06:04:46.990

不可能。

php 中没有扩展名列表排除。

# java - 在 Java SWT 窗口中启用滚动条

> ID：10145547
> 
> 赞同：6
> 
> 时间：2012-04-13T17:33:19.213
> 
> 标签：java, swt

如何启用滚动条以显示在 custom.StyledText 上？它显示滚动条但不允许 custom.StyledText 滚动？

```
package app;

import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Text;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.events.MouseAdapter;
import org.eclipse.swt.events.MouseEvent;

import org.eclipse.swt.custom.StyledText;
import org.eclipse.swt.custom.ScrolledComposite;
public class myapp {

protected Shell shlWhois;
private Text text;

/**
 * Launch the application.
 * @param args
 */
public static void main(String[] args) {
    try {
        myapp window = new myapp();
        window.open();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * Open the window.
 */
public void open() {
    Display display = Display.getDefault();
    createContents();
    shlWhois.open();
    shlWhois.layout();
    while (!shlWhois.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
}

/**
 * Create contents of the window.
 */
protected void createContents() {
    shlWhois = new Shell();
    shlWhois.setSize(450, 300);
    shlWhois.setText("Whois");

    Label lblDomain = new Label(shlWhois, SWT.NONE);
    lblDomain.setBounds(10, 10, 55, 15);
    lblDomain.setText("Domain");

    text = new Text(shlWhois, SWT.BORDER);

    text.setBounds(72, 4, 260, 21);

    final ScrolledComposite scrolledComposite_1 = new ScrolledComposite(shlWhois, SWT.BORDER | SWT.H_SCROLL | SWT.V_SCROLL);
    scrolledComposite_1.setAlwaysShowScrollBars(true);
    final Composite c = new Composite(scrolledComposite_1, SWT.NONE);
    scrolledComposite_1.setMinHeight(1000);
    scrolledComposite_1.setExpandVertical(true);
    scrolledComposite_1.setExpandHorizontal(true);
    scrolledComposite_1.setBounds(10, 31, 403, 221);

    final StyledText styledText = new StyledText(scrolledComposite_1, SWT.BORDER | SWT.WRAP);

    scrolledComposite_1.setContent(styledText);
    scrolledComposite_1.setMinSize(styledText.computeSize(SWT.DEFAULT, SWT.DEFAULT));

    Button btnWhois = new Button(shlWhois, SWT.NONE);
    btnWhois.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseDown(MouseEvent arg0) {

        }
    });
    btnWhois.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent arg0) {
        }
    });
    btnWhois.setBounds(338, 2, 75, 25);
    btnWhois.setText("Search");

}
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T18:19:44.880

您不需要`ScrolledComposite`, 在 . 上使用`SWT.V_SCROLL`样式`StyledText`。这是一个示例，使用[布局](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)而不是`setBounds`：

```
/**
 * Create contents of the window.
 */
protected void createContents() {
    shlWhois = new Shell();
    shlWhois.setSize(450, 300);
    shlWhois.setText("Whois");
    shlWhois.setLayout(new GridLayout(2, false));

    Label lblDomain = new Label(shlWhois, SWT.NONE);
    lblDomain.setLayoutData(GridDataFactory.fillDefaults().create());
    lblDomain.setText("Domain");

    text = new Text(shlWhois, SWT.BORDER);
    text.setLayoutData(GridDataFactory.fillDefaults().grab(true, false).create());

    final StyledText styledText = new StyledText(shlWhois, SWT.BORDER | SWT.V_SCROLL | SWT.MULTI | SWT.WRAP);
    styledText.setLayoutData(GridDataFactory.fillDefaults().grab(true, true).span(2, 1).create());

    Button btnWhois = new Button(shlWhois, SWT.NONE);
    btnWhois.setText("Search");
} 
```

`SWT.BORDER | SWT.V_SCROLL | SWT.H_SCROLL | SWT.MULTI`如果您还需要水平滚动条，则可以使用这些样式。

# java - 如何在 Java 中找到文本字符串的真实可见大小

> ID：10145549
> 
> 赞同：7
> 
> 时间：2012-04-13T17:33:36.607
> 
> 标签：java, fonts, typography

是否可以在 Java 中找到字符串的真正边界框？即包含实际绘制的像素的最小矩形？

我看过 FontMetrics 和 LineMetrics，虽然它们允许传入一个字符串，但它们似乎并没有考虑到字符本身，嗯“a”、“p”和“P”都返回相同的高度。

具体来说，即使实际字符没有下降到基线以下，它们似乎也包括字符串高度的下降。我可以访问其他返回真实边界框的指标吗？

或者，有什么方法可以判断一个特定的角色是否有下降者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T17:40:01.767

请参阅这篇[关于测量文本的教程，](http://docs.oracle.com/javase/tutorial/2d/text/measuringtext.html)该教程主要关注[FontMetrics](http://docs.oracle.com/javase/9/docs/api/java/awt/FontMetrics.html)。

更高级的测量（获取特定字符串的边界框），然后[TextLayout](https://docs.oracle.com/javase/9/docs/api/java/awt/font/TextLayout.html)是您的朋友，[如此处所述](https://web.archive.org/web/20120625232702/http://java.sun.com:80/developer/onlineTraining/Media/2DText/other.html)。

除了有关 TextLayout 的教程之外，javadoc 还包含其使用示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:04:39.540

您可以使用`javax.swing.SwingUtilities.layoutCompoundLabel`. 不要被许多参数吓倒。有两个版本，带有 JComponent 的版本（可能为空）做更多的标志。它用于 JLabel，用途广泛，并生成一个 Rectangle。

顺便说一句，即使在“a”上，下降器也可能被添加到边界，也可能在这里发生。您可以使用 GlyphVector 并在那里计算一个边界框，但是当字体提示打开时，像素位置会稍微偏离，哪个错误可能会累积在几个字符上？

# c# - 仅显示两周的记录！从创造

> ID：10145552
> 
> 赞同：0
> 
> 时间：2012-04-13T17:33:56.787
> 
> 标签：c#, linq

我遇到的问题是显示数据库中不超过 14 天的记录。这个想法是有人会创建一个广告，它只会显示两周。

我是 LinQ 的新手，发现这种查询的语法难以理解。

已创建以下查询以显示如下所示的所有广告。

```
var Adverts = from m in db. Adverts
 select m; 
```

以下是我想要实现的目标。

```
var Adverts = from m in db. Adverts
where m.date  == DateTime.Now 

---- Unsure of how to input a date range ------

 select m; 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:37:11.673

```
var now = DateTime.Now;
var twoWeeksAgo = now.AddDays(-14);
var adverts = 
    from advert in db. Adverts
    where advert.date >= twoWeeksAgo && advert.date <= now
    select advert; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:40:00.817

一行 lambda 应该让你：

```
var adverts = db.Adverts.Where(x => x.date >= DateTime.Now.AddDays(-14) && x.date <= DateTime.Now) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:39:55.260

`DateTime`类实现`IComparable`。因此，您可以这样做。

```
var results = from ad in Adverts
              where ad.date <= DateTime.Now &&
                    ad.date >= DateTime.Now.AddDays(-14) 
              select ad; 
```

# c# - C# 静态分析，变量/参数的可能值

> ID：10145554
> 
> 赞同：8
> 
> 时间：2012-04-13T17:33:59.303
> 
> 标签：c#, static-analysis, pex, c#-5.0, roslyn

在类似于以下每个示例的代码中，我希望能够静态分析代码以确定传递给 SpecialFunction() 的可能值列表。

```
SpecialFunction(5); // A

int x = 5;
SpecialFunction(x); // B

int x = 5;
x = condition ? 3 : 19;
SpecialFunction(x); // C 
```

我已经可以将 C# 解析为抽象语法树，并且我已经可以处理像 A 这样的情况，我想我可以跟踪值的初始分配来猜测情况 B，但是像 C 这样简单的情况似乎很快就会变得复杂。

我几乎可以肯定，我们无法在所有情况下静态求解 x，这没关系。我想知道尝试它的策略，以及识别何时无法完成的方法。如果我们需要包含类级别的字段和多线程怎么办？关闭？如果我们知道 ,`X`的所有可能值`x`的集合会有所帮助`|X| < 50`吗？

根据@Vladimir Perevalov 的建议，Pex 中的概念如何应用于查找目标代码点的可能值（而不是 Pex 似乎所做的是发现导致*未检查（？）*异常情况的代码路径和值）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:13:35.617

您想要的是全局数据流分析（“什么值分配/副作用达到什么使用点”）[需要控制流分析作为前导]和某种范围分析（“总结可以达到的值集一个点”）。

计算数据流需要拥有完整的 C# 前端、本地控制和数据流分析，然后将这些答案拼接到全局数据流分析中。

范围分析要求您首先定义您打算如何编码一组可能的值；允许什么样的规范体系？最简单的，只是一组值，往往会爆炸。中间规范方案类似于 OP 的单一关系到常量，例如 "x < 50" 。任何这种有限方案的问题在于，值集的丰富性可能会导致您得到无用的答案，特别是如果有其他感兴趣的谓词（如果 x 总是奇数，则单关系到常数只能对此建模作为 "x < infinity" 这显然没有帮助。因此，您希望选择一个足够复杂的规格方案来模拟您感兴趣的那种值。但是，随着您的规格方案变得更加复杂，

大多数可用的分析工具都没有这样的分析，更不用说向您公开了。PEX 可能确实有这样的机器；如果你幸运的话，它也会暴露出来。

我们的[DMS 软件再造工具包](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)具有通用解析、符号表构建、控制/数据流分析甚至范围分析机制（规范：x < k1*a+k2*b 其中 k1 和 k2 是常量，a 和 b 是其他程序变量可见，其中 x 被消耗）。DMS 有 C#、Java、GNU C 和 COBOL 前端，我们实际上已经为 GNU C 和 IBM Enterprise COBOL（部分用于 Java 7）实例化了这种机器，方法是收集（静态分析！）特定于这些语言的事实并提供这些通用机器的事实。我们还没有为 C# 实例化这个机制。但是，如果您无法从其他来源获得好的答案，这可能非常接近。

# jmeter - 断言返回状态码 HTTP 400 为成功

> ID：10145555
> 
> 赞同：12
> 
> 时间：2012-04-13T17:34:01.140
> 
> 标签：jmeter

我使用 JMeter 已经有一段时间了，而且只用于负载测试。我想知道我是否可以将它用于普通功能测试。

例如：我有一个格式错误的 XML 和一个`400 Bad Request`我希望返回的应用程序返回 - 所以它是正确的，但 JMeter 将其解析为失败。

我尝试了响应断言，但它没有用......

JMeter可以做到这一点吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-12T20:31:30.970

要测试非 200 响应代码，您必须检查响应断言中的“忽略状态”字段。没有这个，无论响应断言如何，测试都将始终失败。

因此，您需要执行以下操作来测试 http 响应代码 400：

添加一个新的响应断言。设置以下断言属性：

*   检查“响应代码”单选按钮。
*   选中“忽略状态”框。
*   检查模式匹配规则中的“等于”单选按钮。
*   单击“添加”按钮。
*   在要测试的模式的行中输入“400”。

完毕。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-14T11:05:33.817

容易地。[请参阅此](https://stackoverflow.com/questions/9785777/jmeter-how-to-not-fail-500-internal-server-errors)
问题的答案。

[您也可以尝试模式匹配规则](http://jmeter.apache.org/usermanual/component_reference.html#Response_Assertion)响应断言中的 NOT 复选框。

# c# - 如何使用 iTextSharp 证明文本的合理性？

> ID：10145557
> 
> 赞同：6
> 
> 时间：2012-04-13T17:34:02.050
> 
> 标签：c#, itextsharp

有如下代码：

```
 var workStream = new MemoryStream();
 var doc = new Document(PageSize.LETTER, 10, 10, 42, 35);
 PdfWriter.GetInstance(doc, workStream).CloseStream = false;
 doc.Open();

 var builder = new StringBuilder();
 builder.Append("MY LONG HTML TEXT");
 var parsedHtmlElements = HTMLWorker.ParseToList(new StringReader(builder.ToString()), null);

 foreach (var htmlElement in parsedHtmlElements)
       doc.Add(htmlElement);

doc.Close();

byte[] byteInfo = workStream.ToArray();
workStream.Write(byteInfo, 0, byteInfo.Length);
workStream.Position = 0;
return new FileStreamResult(workStream, "application/pdf") 
```

并且有一个问题 - 如何使该 pdf 合理？有什么方法或东西可以快速做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T05:44:13.927

啊，我明白了，你的意思是“合理”而不是“调整”。我更新了你的问题。这实际上很容易。基本上，这取决于您要添加的内容类型以及该内容是否首先支持此概念。假设您有基本段落，您可以`Alignment`在将它们添加到主循环之前对其设置属性：

```
foreach (var htmlElement in parsedHtmlElements){
    //If the current element is a paragraph
    if (htmlElement is Paragraph){
        //Set its alignment
        ((Paragraph)htmlElement).Alignment = Element.ALIGN_JUSTIFIED;
    }
    doc.Add(htmlElement);
} 
```

有两种类型的理由，`Element.ALIGN_JUSTIFIED`和`Element.ALIGN_JUSTIFIED_ALL`。第二个与第一个相同，只是它还证明了您可能想要或可能不想做的最后一行文本。

# sas - SAS DATA 步/INPUT 语句：从单行读取基于列的原始数据和多个观察值？

> ID：10145558
> 
> 赞同：0
> 
> 时间：2012-04-13T17:34:14.540
> 
> 标签：sas

我正在处理一些具有固定列宽的原始数据，但它的所有记录都写入了一行（归咎于数据供应商，而不是我:-)）。我知道如何在`INPUT`语句中使用固定的列宽，以及如何使用`@@`每行读取多个观察值，但是当我尝试同时执行这两种操作时遇到了麻烦。

例如，这里有一些代码，其中数据具有固定的列宽，但每条记录只有一行。此代码工作正常：

```
DATA test_1;
    INPUT alpha $ 1-5   beta $ 6-10   gamma 11-15 ;

    DATALINES;
a    f    1
ab   fg   12
abc  fgh  123
abcd fghi 1234
abcdefghij12345
    ;
RUN; 
```

现在这是我真正想要做的代码 - 所有数据都在一行中，我尝试使用`@@`符号：

```
DATA test_2;
    INPUT alpha $ 1-5    beta $ 6-10    gamma 11-15 @@;

    DATALINES;
a    f    1    ab   fg   12   abc  fgh  123  abcd fghi 1234 abcdefghij12345
    ;
RUN; 
```

这失败了，因为它只是继续读取开始的 15 个字符，保持该记录，然后从头开始重新读取。根据我对`@@`符号语义的理解，我完全可以理解为什么会发生这种情况。

有什么方法可以完成从单行读取固定列数据；也就是说， make`test_2`的内容与`test_1`? 也许通过`INPUT`语句中的符号组合，或者可能诉诸另一种方法（使用文件 I/O 函数`PROC IMPORT`等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:55:59.460

您是否尝试过使用信息指定可变长度？

例如：

```
DATA test_2;
    INPUT alpha  $5\.    beta $5\.    gamma 5.0 @@;

    DATALINES;
a    f    1    ab   fg   12   abc  fgh  123  abcd fghi 1234 abcdefghij12345
;
RUN; 
```

从 SAS 文档：

> 格式化输入使指针像列输入一样移动以读取变量值。指针移动信息中指定的长度并停在下一列。

# c# - 使用 Linq 进行多个外连接，其中 2 个连接到同一个表/对象。得到了 SQL，需要 Linq to Entity

> ID：10145562
> 
> 赞同：2
> 
> 时间：2012-04-13T17:34:37.223
> 
> 标签：c#, sql, linq, entity-framework, linq-to-entities

我正在尝试在 Linq 中重现以下 SQL 查询，需要一些帮助。

```
select
   dbo.Documents.DocId, 
   dbo.Documents.ReykerAccountRef, 
   dbo.Documents.ReykerClientId DocClientID,
   CAAs.ClientId CAAClientIDCheck,
   ClientData.FullName ClientFullName, 
   CAAs.IFAId,  
   AdvisorData.FullName AdvisorFullName
from dbo.Documents
left join 
  dbo.CAAs on dbo.Documents.ReykerAccountRef = dbo.CAAs.AccountRef
left join 
  dbo.hmsProfileDatas AS ClientData
on 
  dbo.CAAs.ClientId = ClientData.ReykerClientID
left join 
  dbo.hmsProfileDatas AS AdvisorData
on 
  dbo.CAAs.IFAId = AdvisorData.ReykerClientID 
```

我试图链接到同一个表两次，一次用于客户全名，另一次用于顾问全名。

我想在 linq 中生成的基本 sql 是

```
select table1.*,table2.*,a.Fullname, b.Fullname
from table1
left join
   table2 on table1.t2Id = table2.Id
left join
   table3 AS a 
on 
   table2.t3Id1 = table3.id1
left join
   table3 AS b 
on 
   table2.t3Id2 = table3.id2 
```

所以表一连接到表 2，表 2 有 2 个外键（t3Id1 和 t3Id2）到表 3 到不同的字段（id1 和 id2）。

这是我按照一些指导尝试过的，但它没有返回任何东西！怎么了？

```
 var results3 = from doc in DataContext.Documents
                       from caa
                           in DataContext.CAAs
                           .Where(c => c.AccountRef == doc.ReykerAccountRef)
                           .DefaultIfEmpty()
                       from cpd
                           in DataContext.hmsProfileDatas
                           .Where(pdc => pdc.ReykerClientID == caa.ClientId)
                           .DefaultIfEmpty()
                       from apd
                           in DataContext.hmsProfileDatas
                           .Where(pda => pda.ReykerClientID == caa.IFAId)
                           .DefaultIfEmpty()
                       select new DocumentInList()
                                  {
                                      DocId = doc.DocId,
                                      DocTitle = doc.DocTitle,
                                      ReykerDocumentRef = doc.ReykerDocumentRef,
                                      ReykerAccountRef = doc.ReykerAccountRef,
                                      ClientFullName = cpd.FullName,
                                      AdvisorFullName = apd.FullName,
                                      DocTypeId = doc.DocTypeId,
                                      DocTypes = doc.DocTypes,
                                      DocDate = doc.DocDate,
                                      BlobDocName = doc.BlobDocName,
                                      UploadDate = doc.UploadDate,
                                  }; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T17:52:13.120

我希望我正确理解了你的例子。这是另一个简单的示例，它应该可以满足您的需求：

```
 private class User
    {
        public int UserId;
        public string Name;
        public int GroupId;
        public int CollectionId;
    }

    public class Group
    {
        public int GroupId;
        public string Name;
    }

    public class Collection
    {
        public int CollectionId;
        public string Name;
    }

    static void Main()
    {
        var groups = new[] { 
            new Group { GroupId = 1, Name = "Members" },
            new Group { GroupId = 2, Name = "Administrators" } 
        };
        var collections = new[] { 
            new Collection { CollectionId = 1, Name = "Teenagers" },
            new Collection { CollectionId = 2, Name = "Seniors" } 
        };
        var users = new[] { 
            new User { UserId = 1, Name = "Ivan", GroupId = 1, CollectionId = 1 },
            new User { UserId = 2, Name = "Peter", GroupId = 1, CollectionId = 2 },
            new User { UserId = 3, Name = "Stan", GroupId = 2, CollectionId = 1 },
            new User { UserId = 4, Name = "Dan", GroupId = 2, CollectionId = 2 },
            new User { UserId = 5, Name = "Vlad", GroupId = 5, CollectionId = 2 },
            new User { UserId = 6, Name = "Greg", GroupId = 2, CollectionId = 4 },
            new User { UserId = 6, Name = "Arni", GroupId = 3, CollectionId = 3 },
        };

        var results = from u in users
                      join g in groups on u.GroupId equals g.GroupId into ug
                      from g in ug.DefaultIfEmpty()
                      join c in collections on u.CollectionId equals c.CollectionId into uc
                      from c in uc.DefaultIfEmpty()
                      select new { 
                          UserName = u.Name, 
                          GroupName = g != null ? g.Name : "<No group>",
                          CollectionName = c != null ? c.Name : "<No collection>"
                      };
    } 
```

它在一个表上生成两个连接以从其他两个表中获取数据。这是输出：

```
Ivan    Members         Teenagers
Peter   Members         Seniors
Stan    Administrators  Teenagers
Dan     Administrators  Seniors
Vlad    <No group>      Seniors
Greg    Administrators  <No collection>
Arni    <No group>      <No collection> 
```

# android - 在 Android 中从 JSON 访问对象

> ID：10145564
> 
> 赞同：0
> 
> 时间：2012-04-13T17:34:48.143
> 
> 标签：android, json, arrays

我有一个问题，我有点困惑。我对 JSON 很陌生，并且在 android API 中获取 JSON 值。我试图在我得到的响应中访问一个数组。我得到的 JSON 代码是这样的：

```
Response:
{
"event": {  
    "participants": []
},
"status": "success"
} 
```

我将如何访问参与者数组并存储他们的值。这就是我目前正在尝试的......但我似乎没有得到我想要的。

```
try{
                //get the JSON values from the URL.
                JSONObject json = jParser.getJSONFromUrl("http://somesite.com/api/find?"+"somevar="+someJavaStringVar);

                json_event = json.getJSONObject("event");

                JSONArray json_array_participants = json_event.getJSONArray("participants");  

} catch(JSONException e) {

} 
```

我最困惑的是......数组类型相当于什么。关于获取该变量值的正确方法的任何建议或推理都会很棒......谢谢大家...... :)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:42:19.457

我强烈建议使用 gson 作为您首选的解析器，因为它会为您完成序列化和反序列化的所有工作，除了创建域对象。本教程应该可以帮助您： [http ://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:42:53.253

这将取决于服务器应该返回什么。它可以是任何东西的数组，如果这是一项公共服务，则应该有一个规范可供参考。

如果您也负责服务器部分，并且您有一个支持对象，那么 Google 的 GSON 库非常易于使用。它还将使类型信息保持直截了当。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T17:59:55.903

认为 JSON 实际上只是一个键值对。JSONArray 类型只是一个充满对象的数组（如`Object[]`） - 它不知道它包含的对象是什么或它们的用途。您可以根据您对源的了解为 JSON 流分配含义。从我看到的你的代码来看，大部分看起来都很好，虽然我不知道你的 jParser.getJSONFromURL() 在做什么。通常，您会从响应字符串构建 JSON，如下所示：

```
String jsonString = getJSONFromUrl("http://somesite.com/api/find?"+"somevar="+someJavaStringVar);

JSONObject json = new JSONObject(jsonString)

JSONObject json_event = json.getJSONObject("event");

JSONArray json_array_participants = json_event.getJSONArray("participants"); 
```

您可以像任何其他数组一样遍历数组以获取子对象或其他内容：

```
for(int i=0; i < json_array_participants.getLength(); i++) {
  JSONObject participant = json_array_participants.getJSONObject(i);
  // Do stuff
} 
```

作为旁注 - 在你至少了解底层协议之前，我不会使用 GSON - 因为你永远不知道什么时候你可能出于某种原因想要从不同的语言解析你的 JSON。

# java - 为什么我会收到此错误 java.lang.IllegalArgumentException？

> ID：10145565
> 
> 赞同：5
> 
> 时间：2012-04-13T17:34:57.870
> 
> 标签：java, oauth

为什么我会收到此错误：java.lang.IllegalArgumentException：此消费者需要 org.apache.http.HttpRequest 类型的请求

```
CommonsHttpOAuthConsumer  consumer = new CommonsHttpOAuthConsumer (CONSUMER_KEY,CONSUMER_SECRET);
            consumer.setTokenWithSecret(oaut_token, tokenSecret);

URL url = new URL(targetURL);
request = (HttpURLConnection) url.openConnection();

// sign the request
consumer.sign(request);
// send the request
request.connect(); 
```

**编辑：** 只需更新已接受的答案，因为它不再相关。路标文档有点过时，由于 HttpURLConnection 上的错误，建议在 Android 中使用 CommonsHttpOAuthConsumer。这些已得到修复，现在 Android 删除了 Apache HTTP，因此现在处理路标的正确方法是通过**DefaultOAuthConsumer**。

```
DefaultOAuthConsumer  consumer = new DefaultOAuthConsumer (CONSUMER_KEY,CONSUMER_SECRET);
            consumer.setTokenWithSecret(oaut_token, tokenSecret);

URL url = new URL(targetURL);
request = (HttpURLConnection) url.openConnection();

// sign the request

consumer.sign(request); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T17:37:36.837

在您发布的代码中应该很明显`request`不是类型`HttpRequest`...

```
request = (HttpURLConnection) url.openConnection();
consumer.sign(request); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T22:05:10.547

路标在 android 上使用起来很简单，哈哈，一旦你通过了那些不是真正最新的、不完整的或特别有用的顺序的教程。

无论如何，这是使用 apache http 而不是本机 android 的一种方法，为了简洁起见，它有点难看，但应该让你启动并运行。

稍微修改了代码以使其工作，您可能希望 HttpClient 在调用之间保持一致，但我只是内联了所有这些。我还注意到您正在反序列化令牌，所以我只是假设您有实际的 OAuth 流程工作。

祝你好运！

```
 CommonsHttpOAuthConsumer consumer = null;
    consumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY,CONSUMER_SECRET);
    consumer.setTokenWithSecret(oaut_token, tokenSecret);

   // Use the apache method instead - probably should make this part persistent until
   // you are done issuing API calls    
   HttpParams parameters = new BasicHttpParams();
   HttpProtocolParams.setVersion(parameters, HttpVersion.HTTP_1_1);
   HttpProtocolParams.setContentCharset(parameters, HTTP.DEFAULT_CONTENT_CHARSET);
   HttpProtocolParams.setUseExpectContinue(parameters, false);
   HttpConnectionParams.setTcpNoDelay(parameters, true);
   HttpConnectionParams.setSocketBufferSize(parameters, 8192);

   HttpClient httpClient = new DefaultHttpClient();

   SchemeRegistry schReg = new SchemeRegistry();
   schReg.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
   ClientConnectionManager tsccm = new ThreadSafeClientConnManager(parameters, schReg);

   httpClient = new DefaultHttpClient(tsccm, parameters);

   HttpGet get = new HttpGet(targetURL); 

    // sign the request
    consumer.sign(get);

    // send the request & get the response (probably a json object, but whatever)
    String response = httpClient.execute(get, new BasicResponseHandler());

    // shutdown the connection manager - last bit of the apache code 
    httpClient.getConnectionManager().shutdown();

    //Do whatever you want with the returned info 
    JSONObject jsonObject = new JSONObject(response); 
```

而已

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T17:54:09.967

当方法需要一个参数类型并且它接收到另一种类型时，抛出异常 java.lang.IllegalArgumentException。
在这种情况下，方法是`sign`，参数是`request`：

```
consumer.sign(request); 
```

它正在等待接收`HTTPRequest`类型并且它正在接收另一种类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-24T12:03:54.473

```
public class BlockTicketPostOauth extends AsyncTask<String, Void, Integer> {
    ProgressDialog pd;
    String response;
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pd=new ProgressDialog(BusPassengerInfo.this);
        pd.setMessage("wait continue to payment....");
        pd.show();

    }

    @Override
    protected Integer doInBackground(String... params) {
        InputStream inputStream = null;
        String ul ="http://api.seatseller.travel/blockTicket";

        String  JSONPayload=params[0];
        Integer result = 0;
        try {

            OAuthConsumer consumer = new CommonsHttpOAuthConsumer(YOUR CONSUMER KEY,YOUR CONSSUMER SECRETE); consumer.setTokenWithSecret(null, null);

            /* create Apache HttpClient */
            HttpClient httpclient = new DefaultHttpClient();

            /* Httppost Method */
            HttpPost httppost = new HttpPost(ul);

            // sign the request
            consumer.sign(httppost);

            // send json string to the server
            StringEntity paras =new StringEntity(JSONPayload);

            //seting the type of input data type
            paras.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));

            httppost.setEntity(paras);

            HttpResponse httpResponse= httpclient.execute(httppost);

            int statusCode = httpResponse.getStatusLine().getStatusCode();

            Log.i("response json:","status code is:"+statusCode);
            Log.i("response json:","status message?:"+httpResponse.getStatusLine().toString());

            /* 200 represents HTTP OK */
            if (statusCode ==  200) {
                /* receive response as inputStream */
                inputStream = httpResponse.getEntity().getContent();
                response = convertInputStreamToString(inputStream);

                Log.i("response json:","json response?:"+response);

                Log.i("response block ticket :","status block key:"+response);

                result = 1; // Successful
            } else{
                result = 0; //"Failed to fetch data!";
            }
        } catch (Exception e) {
            Log.d("response error", e.getLocalizedMessage());
        }
        return result; //"Failed to fetch data!";
    }

    @Override
    protected void onPostExecute(Integer result) {

        if(pd.isShowing()){
            pd.dismiss();
        }
        /* Download complete. Lets update UI */
        if(result == 1){

            Toast.makeText(BusPassengerInfo.this,"response is reult suceess:"+response,Toast.LENGTH_SHORT).show(); 
```

//允许客户去支付网关的方式

```
 }else{
            Log.e("response", "Failed to fetch data!");
            Toast.makeText(BusPassengerInfo.this,"response is reult fail",Toast.LENGTH_SHORT).show();
        }

    }
} 
```

# android - Android MediaPlayer 无法播放网络媒体：准备失败。：状态=0x1

> ID：10145566
> 
> 赞同：0
> 
> 时间：2012-04-13T17:35:00.830
> 
> 标签：android, media-player

我想从网络服务播放一首歌，我写的代码如下

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.content);

    startButton = (ImageButton) findViewById(R.id.start);

    Intent intent = getIntent();
    mp3Path = intent.getStringExtra("mp3Path");

    player = new MediaPlayer();

    startButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            try {
                if(player != null)
                    player.stop();
                player.setDataSource(mp3Path);
                player.prepare();
                player.start();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    });
} 
```

但是当我单击该按钮时，它会引发以下异常，并且我被告知有关于准备的错误：

```
04-13 17:23:13.186: E/MediaPlayer(401): stop called in state 1
04-13 17:23:13.186: E/MediaPlayer(401): error (-38, 0)
04-13 17:23:13.206: E/MediaPlayer(401): error (1, -2147483648)
04-13 17:23:13.206: W/System.err(401): java.io.IOException: Prepare failed.: status=0x1
04-13 17:23:13.226: W/System.err(401):  at android.media.MediaPlayer.prepare(Native Method)
04-13 17:23:13.226: W/System.err(401):  at com.Android.SampleActivity$1.onClick(SampleActivity.java:50) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:44:12.873

您需要实现流媒体播放器。这是一个[例子](http://davanum.wordpress.com/2007/12/29/android-videomusic-player-sample-from-local-disk-as-well-as-remote-urls/)。希望它会帮助你。

# jquery - jQuery：如何从列表中删除元素

> ID：10145580
> 
> 赞同：0
> 
> 时间：2012-04-13T17:36:26.273
> 
> 标签：jquery

我有以下列表，并想从中删除一个元素。在这种特殊情况下，我想删除第二个元素：

```
<a id="q1" rel="1" class="pagenum" href="#">2</a> 
```

这是列表的代码：

```
 <div id="carousel">
        <ul class="overview">
          <li id="l1">
              <a id="q0" rel="0" class="pagenum" href="#">1</a>
              <a id="q1" rel="1" class="pagenum" href="#">2</a>
              <a id="q2" rel="2" class="pagenum" href="#">3</a>
              <a id="q3" rel="3" class="pagenum" href="#">4</a>
              <a id="q4" rel="4" class="pagenum" href="#">5</a>                
          </li>
         </ul>
        </div> 
```

提前致谢。

**编辑：我希望使用类似于 $.each 的东西：**

```
$("carousel li").each(function(index){
   if(index == SOME_NUM){
       this.remove()
   }
 }); 
```

但是，这似乎不起作用。

**附加编辑：**

感谢所有回答的人并向他们道歉。我没有正确表达我的问题。在这里发布之前，我确实找到了 remove() 函数 - 它在谷歌上有很好的记录:)。但是，我试图遍历“li”的元素，然后通过 $.each 循环删除特定元素。

感谢您提供任何和所有其他回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T17:37:49.743

ID是唯一的..您可以简单地使用`$('#q1').remove();`

根据您的评论

> 我试图避免使用 id ，因为它们有很多。我缩小了这个例子。我希望使用以下内容： $("overview li").each(function(index){ this.remove } 但这似乎不起作用。

尝试使用`.eq`函数或`:eq`选择器从列表中选择特定的链接标签，

```
$('.overview li a:eq(1)') //-> Will return you the 2nd link 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:42:11.720

我认为这应该做你想做的事。

```
$counter = 0;
$("#carousel li").each(function(){
    if($counter == SOME_NUM)
    {
        this.remove();
    }
    $counter++;
}); 
```

You'll want to use jquery $variables here rather than javascript vars because javascript vars are function scoped, while the $variables are document scoped.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T17:38:23.703

去除的基本形式使用[`remove`](http://api.jquery.com/remove)：

```
$(selector).remove(); 
```

因此，对于第二个元素，您可以使用`[id]`：

```
$('#q1').remove(); 
```

如果要删除列表中的第二项，独立于该项`[id]`，可以使用：

```
$('#l1 :eq(1)').remove(); 
```

[请注意，`:eq`使用基于 0 的索引]

移除功能本身很容易使用，难点在于确定哪种[选择器](http://api.jquery.com/category/selectors/)效果最好。

# sql - Lotus Notes ODBC Connection

> ID：10145581
> 
> 赞同：1
> 
> 时间：2012-04-13T17:36:29.617
> 
> 标签：sql, sql-server, odbc, lotus-notes, lotus-domino

I need to connect and send/receive information from an MS SQL server in my Lotus Notes app using @formula in realtime (I can connect using an agent, but I need to use inline code for this).

The commands themselves seem pretty straight forward, but setting up the configurations seems to be a topic with scarce documentation. Apparently I need to install an ODBC driver. Where would I find that, and do I install that onto the server or onto the workstations that will run this app?

If any Lotus gurus could step me through setting this up, it would be greatly appreciated.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:50:34.557

You'll need to install the ODBC driver on the workstations that run this app, if the users will be triggering the ODBC connections. If at all possible, I highly suggest setting this up on the server side, and having it run via an agent. That'll save you from a few headaches, including having to maintain the ODBC connections on each workstation and worrying if each workstation has access to the data and server.

You first just want to make sure your ODBC setup is correct. You'll need the appropriate driver, of course, and the connection information. This site has a walkthrough to give you an idea of [how to setup an ODBC database connection](http://www.ehow.com/how_4642566_setup-odbc-database-connection.html)

If you have MS Access you can use it to test querying from the ODBC data source. Once you've tested the connection works, you'll just refer to the data source name (DSN) in your @DbColumn, @DbLookup, or @DbCommand formulas.

Back to my suggestion on setting this up on the server side, that would mean you'd keep a copy of the data you're querying within the Notes database itself, and then users would be interacting with read-only data in Notes. You could schedule updates regularly on the server side of that read-only data and effectively create a cache of the data in your Notes environment. Then that data would replicate around to other replicas of the database, but remove the trouble of the ODBC connection being needed everywhere.

If you *need* realtime data, though, that solution is out the window and you'll have to go with a local solution. In that case, you might want to look at the LCConnection class or using an ADODB.Connection from script, as both will allow you to create DSN-less connections to data sources. You'd then save the trouble of requiring ODBC data sources on each workstation, and only have to worry about whether they can access the server from their workstation.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T16:30:04.007

I would add another option to Ken's list. It involves having the server do the queries of the external database (therefore you are only setting up ODBC in on the server - you don't have to deal with it on the workstations). You create an agent that is launched on the server using the 'run on server' technique. When the workstation needs to query the external data, the code creates a throw-away document in the database, puts the query criteria into the temporary document, saves the document, then calls the 'run on server' agent passing a reference to the temporary document. The server launches the agent, reads the criteria from the temporary document, does the query, and writes the results back to the temporary document. Then the workstation can access the query results from the temporary document. A scheduled agent can delete the temp docs on a regular basis.

It sounds complicated, and it all has to be done in script, but I've done this in many applications and it is fast, flexible, easy to administer, and gives your applications a lot of power. Note that end users must have the ACL rights to create a document in the db (the temp doc) in order for this to work.

Good luck!

# python - Django 1.4 和 NoReverseMatch 在 /admin/ 错误

> ID：10145583
> 
> 赞同：5
> 
> 时间：2012-04-13T17:36:34.407
> 
> 标签：python, django, django-admin

更新到 Django 1.4 后尝试访问我的管理面板时出现此错误 - 错误是：

```
NoReverseMatch at /admin/
Reverse for 'logout' with arguments '()' and keyword arguments '{}' not found. 
```

我最好的猜测是我正在定义一个注销 urlpattern，它在某种程度上与管理面板试图创建的那个冲突？虽然，它应该创建/admin/logout，对吧？我确实将我的 ADMIN_MEDIA_PREFIX 更新为 STATIC_URL 并将它们移动到一个名为 admin 的子文件夹中，但这似乎并没有什么不同。

在我的 urls.py 中，我有：

```
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    ...
    ('^logout/$',  RedirectView.as_view(url='/login/index.html')),
    (r'^login/(?P<path>.*)$', 'django.views.static.serve', {'document_root': '/fullpath/to/media/login'}),
    (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': '/fullpath/to/media/static'}),
    (r'^admin/(.*)', include(admin.site.urls)),
) 
```

在我的 settings.py 中，我有：

```
STATIC_ROOT = '/fullpath/to/myapp/media/static/'
STATIC_URL = '/static/'

INSTALLED_APPS = (
    'django.contrib.auth',
     ...
    'django.contrib.admin',
) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T18:09:07.333

```
(r'^admin/(.*)', include(admin.site.urls)), 
```

应该

```
(r'^admin/', include(admin.site.urls)), 
```

(.*) 会吃掉 admin 作为视图参数之后的所有内容。

另外，你知道什么叫`reverse('logout')`吗？在我的本地 1.4 安装中，管理员是命名空间的，我必须调用`reverse('admin:logout')`

# ios - 使用静态库符号化应用程序的崩溃日志

> ID：10145584
> 
> 赞同：5
> 
> 时间：2012-04-13T17:36:43.877
> 
> 标签：ios, debugging, crash, static-libraries, debug-symbols

我收到来自应用程序的崩溃报告，但 Xcode 无法符号化特定于我的应用程序的符号：

```
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x32c43a1c __pthread_kill + 8
1   libsystem_c.dylib               0x33a0a3b4 pthread_kill + 52
2   libsystem_c.dylib               0x33a02bf8 abort + 72
3   libsystem_c.dylib               0x33a306d4 __assert_rtn + 140
4   MyApplication                   0x0000dd54 0x9000 + 19796
5   MyApplication                   0x0000dbda 0x9000 + 19418
6   MyApplication                   0x000103f6 0x9000 + 29686
7   MyApplication                   0x0001035e 0x9000 + 29534
8   MyApplication                   0x0000f3cc 0x9000 + 25548
9   MyApplication                   0x00025d1e 0x9000 + 118046
10  CoreFoundation                  0x35847efc -[NSObject(NSObject) performSelector:withObject:] + 16
11  Foundation                      0x36eec7a2 __NSThreadPerformPerform + 262
12  CoreFoundation                  0x358b1a72 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 6
13  CoreFoundation                  0x358b3758 __CFRunLoopDoSources0 + 376
14  CoreFoundation                  0x358b44e4 __CFRunLoopRun + 224
15  CoreFoundation                  0x35844ebc CFRunLoopRunSpecific + 224
16  CoreFoundation                  0x35844dc4 CFRunLoopRunInMode + 52
17  GraphicsServices                0x3446b418 GSEventRunModal + 108
18  GraphicsServices                0x3446b4c4 GSEventRun + 56
19  UIKit                           0x344a2d62 -[UIApplication _run] + 398
20  UIKit                           0x344a0800 UIApplicationMain + 664
21  MyApplication                   0x0000b174 main (main.m:14)
22  MyApplication                   0x0000b124 0x9000 + 8484 
```

除了 main.m 中的行。我知道我的 dSYM 文件仍在 Xcode 的存档中。我尝试使用命令行直接引用这些调试符号，但每次都得到相同的结果。我尝试使用 atos 直接查找符号，但无法找到它。我通过比较 UUID 验证了它是正确的 dSYM。

它每次都找到 main.m ，所以它似乎工作了一半，但找不到其他任何东西。

我在此应用程序中使用静态库 - 静态库中是否可能发生崩溃？该调试信息会在一组单独的调试符号中吗？它说负责的库是我的应用程序......如果它实际上是导致崩溃的原因，它会说静态库的名称吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T12:54:01.730

静态库链接到您的应用程序可执行文件中，因此链接后您将无法识别该代码的原始来源。因此，它将始终将您的应用程序命名为源二进制文件。

由于您包含的静态库，这些帧很可能没有被符号化。如果静态库中没有符号但被剥离，则会发生这种情况。静态库发布版本经常发生，其中默认设置与应用程序相同，以去除符号。（对于应用程序，这是正确的做法！）

在这种情况下，符号不会被复制到 dSYM 中，因为它无法在静态库中找到它们。

# php - 是否有 PHP 函数来查找中间字符串？

> ID：10145587
> 
> 赞同：2
> 
> 时间：2012-04-13T17:36:51.193
> 
> 标签：php, string, strstr

好的要清楚我举个例子

```
$email  = 'name@example.com';
$domain = strstr($email, '@');
echo $domain; // prints @example.com

$user = strstr($email, '@', true); // As of PHP 5.3.0
echo $user; // prints name 
```

正如它所说，它使用true打印'@'之前的内容，并使用空白打印@之后的内容

我正在寻找一个函数来打印@本身，给它2个字符串并抓住它们之间的内容

像这样

```
 $string= 'someXthing';
  $tograb = phpfunction("some","thing");
  echo $tograb; // should be printing X 
```

^ 这不起作用，我只是写它来解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:41:55.523

我不知道这样做的本机函数，但您可以使用正则表达式

```
$string= 'someXthing';
preg_match("/some(.*)thing/",$string,$matches);
var_dump($matches[1]); 
```

阅读更多关于[preg_match](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:58:13.490

来自互联网

```
function GetBetween($content,$start,$end){
    $r = explode($start, $content);
    if (isset($r[1])){
        $r = explode($end, $r[1]);
        return $r[0];
    }
    return '';
} 
```

[原始代码](http://www.jonasjohn.de/snippets/php/get-between.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T08:02:59.610

对于您说的示例，您可以使用 strpos 像这样打印 X：

```
$string = 'someXthing';

$start = strpos($string, "some") + strlen("some");
$end = strpos($string, "thing", $start);
$tograb = substr($string, $start, $end - $start);

echo $tograb; 
```

和 X 将被打印。

# signal-processing - 预测事件的发生

> ID：10145588
> 
> 赞同：0
> 
> 时间：2012-04-13T17:36:55.287
> 
> 标签：signal-processing, physics, probability, time-frequency

如果采样时间间隔为 10 秒，并且在此间隔期间发生 3 个事件，则第一个事件发生在第 4 秒，第二个事件发生在第 7 秒，第 8 个事件发生在 8 秒。有没有办法可以预测下一个事件何时发生？有这个数学公式吗？任何我应该研究的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:27:22.367

可以代表您的情况的最简单的模型是[泊松过程](http://en.wikipedia.org/wiki/Poisson_process)，其中每个事件都独立于前一个事件，并且到达率不会改变。在这种情况下，估计到达率是相当简单的，您可以预测（或模拟）从任何给定时间开始下一个事件发生所需的时间。

两种广泛的情况会使该模型有些不足：1）每个事件都不是独立于先前的事件。例如，事件发生在集群中，或者在另一事件发生后不太可能立即观察到一个事件。在这种情况下，您可以将您的流程建模为马尔可夫链，其中每个事件都取决于系统的先前状态。

2) 到达率不是固定的。例如，到达率随时间增加或减少。在这种情况下，您需要考虑如何对其进行建模。

希望这可以帮助！

# oracle - 是否可以将 Oracle SOA BPEL 实例从一个环境迁移到另一个具有历史记录的环境

> ID：10145589
> 
> 赞同：1
> 
> 时间：2012-04-13T17:36:57.723
> 
> 标签：oracle, soa, bpel

是否可以将 Oracle SOA BPEL 实例从一个环境迁移到另一个具有历史记录的环境？例如，我想从部署到 Oracle SOA 上定义的分区的 BPEL 实例移动到另一个环境。怎么做？

# json - php $json 谷歌地图解析

> ID：10145595
> 
> 赞同：1
> 
> 时间：2012-04-13T17:37:16.587
> 
> 标签：json, parsing, maps

我有以下代码：

```
<?php
$q = "http://maps.googleapis.com/maps/api/distancematrix/json?origins=35.0078,-97.0929&destinations=45.2078,-97.0929&mode=driving&sensor=false"; 

$json = file_get_contents($q); 

$details = json_decode($json, TRUE); 

echo "<pre>"; print_r($details); echo "</pre>"; 
?> 
```

结果是：

```
Array
(
    [destination_addresses] => Array
        (
            [0] => 150th St, Summit, SD 57266, USA
        )

    [origin_addresses] => Array
        (
            [0] => 38591 Patterson Rd, Wanette, OK 74878, USA
        )

    [rows] => Array
        (
            [0] => Array
                (
                    [elements] => Array
                        (
                            [0] => Array
                                (
                                    [distance] => Array
                                        (
                                            [text] => 1,299 km
                                            [value] => 1299343
                                        )

                                    [duration] => Array
                                        (
                                            [text] => 13 hours 26 mins
                                            [value] => 48361
                                        )

                                    [status] => OK
                                )

                        )

                )

        )

    [status] => OK
) 
```

我只需要从 $json 中提取距离（1,299 公里）。我不知道该怎么做。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:21:04.670

```
<?php $q = "http://maps.googleapis.com/maps/api/distancematrix/json?origins=35.0078,-97.0929&destinations=45.2078,-97.0929&mode=driving&sensor=false"; 

$json = file_get_contents($q);
$details = json_decode($json);
$distance=$details->rows[0]->elements[0]->distance->text;
echo $distance; ?> 
```

# mysql - 每个表的四个外键两个不能被引用到主表中的单个主键

> ID：10145597
> 
> 赞同：0
> 
> 时间：2012-04-13T17:37:31.170
> 
> 标签：mysql, sql, foreign-key-relationship

再会

我正在尝试解决三个表之间的外键关系问题。基本上我有两个辅助表，每个都有两个外键，每个外键都引用第三个表中的一个主键。

同样的问题发生在一个更大的数据库中，但是由于其复杂性、大小和可能的版权问题。我别无选择，只能隔离问题并创建一个会导致相同问题的副本。但是，如果您必须知道，引用主表的相同两个表`People`只是相关数据库中数十个相同类型的宇宙中的两个。

我希望有人可以指出问题并可能提供一个不会对当前结构产生太大影响的解决方案，这样我就可以自己应用它，可能适用于所有其他表，因为从我看到的数据库图来看，它可能他们都会遇到同样的问题。数据库作者不是我的，这只会在查看图表时增加一个人的困惑。

SQL 创建脚本：

```
CREATE SCHEMA IF NOT EXISTS `sampleBD` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci ;
USE `sampleBD` ;

-- -----------------------------------------------------
-- Table `sampleBD`.`People`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `sampleBD`.`People` (
  `PeopleID` INT NOT NULL AUTO_INCREMENT ,
  `Name` VARCHAR(200) NOT NULL ,
  `EntryDate` DATETIME NULL ,
  `EntryBy` INT NULL ,
  PRIMARY KEY (`PeopleID`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `sampleBD`.`PeopleNumberId`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `sampleBD`.`PeopleNumberId` (
  `PeopleNumberIdID` INT NOT NULL AUTO_INCREMENT ,
  `PeopleID` INT NOT NULL ,
  `NumberId` INT(11) NOT NULL ,
  `EntryDate` DATETIME NULL ,
  `EntryBy` INT NULL ,
  PRIMARY KEY (`PeopleNumberIdID`) ,
  INDEX `PeopleID` (`PeopleID` ASC) ,
  INDEX `EntryBy` (`EntryBy` ASC) ,
  CONSTRAINT `PeopleID`
    FOREIGN KEY (`PeopleID` )
    REFERENCES `sampleBD`.`People` (`PeopleID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `EntryBy`
    FOREIGN KEY (`EntryBy` )
    REFERENCES `sampleBD`.`People` (`PeopleID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `sampleBD`.`PeopleCbi`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `sampleBD`.`PeopleCbi` (
  `PeopleCbiID` INT NOT NULL AUTO_INCREMENT ,
  `PeopleID` INT NOT NULL ,
  `Cbi` INT NOT NULL ,
  `EntryDate` DATETIME NULL ,
  `EntryBy` INT NULL ,
  PRIMARY KEY (`PeopleCbiID`) ,
  INDEX `PessoaID` (`PeopleID` ASC) ,
  INDEX `EntryBy` (`EntryBy` ASC) ,
  CONSTRAINT `PessoaID`
    FOREIGN KEY (`PeopleID` )
    REFERENCES `sampleBD`.`People` (`PeopleID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `EntryBy`
    FOREIGN KEY (`EntryBy` )
    REFERENCES `sampleBD`.`People` (`PeopleID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

该脚本能够创建第一个和第二个表，但是当它到达第三个表时，它会返回一个错误代码。

```
Error Code: 1005\. Can't create table 'samplebd.peoplecbi' (errno: 121) 
```

这是一个外键问题，但我不确定如何在不改变所涉及的表的当前结构的情况下解决它。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:46:08.940

这看起来像是外键约束名称之间的名称冲突。约束名称在数据库中必须是唯一的，就像表名一样。

So just choose another name for the constraint `EntryBy` in the 3rd table. It will not affect any of the functionality you have.

# actionscript-3 - AS2 到 AS3 迁移创建具有动态名称的空影片剪辑

> ID：10145601
> 
> 赞同：0
> 
> 时间：2012-04-13T17:37:46.193
> 
> 标签：actionscript-3, migration, actionscript-2, movieclip

我正在尝试将 as2 迁移到 as3 代码。我的问题的正常解决方案是使用 createEmptyMovieClip() 的第一个参数作为影片剪辑的名称。在某些情况下，我对第一个参数有一个动态值 - 所以我的问题是我应该如何去做？

```
//my code  
 function someFunction (){
    loader_mc = this.createEmptyMovieClip("text"+value, value);
    value++;
    //do stuff with it
}

//normal non-dynamic solution 
function someFunction (){
    var text:MovieClip = new MovieClip();
    addChild(text);
    //do stuff with it
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:41:19.223

在您的问题中，您已经保存了对 MovieClip 的直接引用。如果这是您完成工作所需的唯一参考，那么您真的不需要为 MovieClip 命名。

但是，如果您确实需要该名称，您始终可以在事后为 MovieClip 指定一个名称：

```
var myClip:MovieClip = new MovieClip();
myClip.name = "text"+value;

parent.addChild(myClip); 
```

这将允许您使用 getChildByName 方法：

```
parent.getChildByName("text"+value); 
```

# ruby-on-rails - 表单内 onclick 事件的自定义按钮导致重定向

> ID：10145602
> 
> 赞同：2
> 
> 时间：2012-04-13T17:37:47.133
> 
> 标签：ruby-on-rails, forms, button, erb

我有`<button onclick="doSomething();">Do something</button>`内部`form_for`帮手。点击它会导致表单提交。相反，我只想为它的意图做一些客户端工作。
我怎样才能实现它？

编辑：我只能将`<button>`标签用于我的目的，如果我可以将它放在表单中会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:52:12.540

这很简单：只需添加~~水~~ **返回假；**. 参见示例：

```
<button onclick="doSomething();return false;">Do something</button> 
```

我需要周末休息和 5 分钟后谷歌搜索 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:43:39.587

编辑：工作方法`<form>` 确保你的按钮是这样写的： `<input type="button" onclick="doSomething()">`

您可以通过它的索引选择表单。因此，如果这是`<form>`您网页上的第一个元素，它的索引将为 0。依此类推。索引是元素的顺序。如果您对此有疑问，您可以随时命名您的表单并按名称选择它。就是这样：

```
var form = document.forms[0]; //selecting by index
var namedForm = document.forms["someForm"]; //Selects <form name="someForm">
var name = form.elements["nameInput"].value; //Selects <input type="text" name="nameInput"> 
```

等等。如果您遇到任何麻烦，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:42:13.470

`<button onclick="doSomething();void(0)">Do something</button>`

尽管从 JavaScript 中挂钩按钮的单击事件通常是更好的做法，但可以分离关注点。

# node.js - 如何在 Mongoose 中定义一个通用的嵌套对象

> ID：10145608
> 
> 赞同：16
> 
> 时间：2012-04-13T17:37:58.093
> 
> 标签：node.js, mongodb, mongoose

我想在活动日志的详细信息中有一个嵌套对象。请参阅示例。如何在猫鼬中定义模式？

```
activity: {
    date: '1/1/2012' ,
    user: 'benbittly', 
    action: 'newIdea', 
    detail: {
        'title': 'how to nest'
        , 'url': '/path/to/idea'
    }

activity: {
    date: '1/2/2012' ,
    user: 'susyq', 
    action: 'editProfile', 
    detail: {
        'displayName': 'Susan Q'
        , 'profileImageSize': '32'
        , 'profileImage': '/path/to/image'
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-13T19:46:12.407

使用**Mixed**类型，它允许您在示例中存储任意子对象。

```
var Activity = new Schema({
    date : Date
  , user : String 
  , action : String
  , detail : Mixed
}) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-11T21:40:45.513

要在模式中指示任意对象（即“任何事情发生”），您可以使用`Mixed`type 或简单地`{}`.

```
var activity: new Schema({
    date: Date,
    user: String, 
    action: String, 
    detail: Schema.Types.Mixed,
    meta: {}  // equivalent to Schema.Types.Mixed

}); 
```

### 问题

然而，为了增加灵活性，有一个问题。使用`Mixed`(or `{}`) 时，您需要明确告诉 mongoose 您已经进行了如下更改：

```
activity.detail.title = "title";
activity.markModified('detail');
activity.save(); 
```

### 资源

*   [猫鼬文档](http://mongoosejs.com/docs/schematypes.html#mixed)

# java - Jackson json：逐节点遍历json树

> ID：10145621
> 
> 赞同：4
> 
> 时间：2012-04-13T17:38:54.113
> 
> 标签：java, json, jackson, tree-traversal

我有许多包含 json 数据的文本文件，我在 Jackson json 解析器中使用新的 ObjectMapper().readTree() 方法将 json 数据解析为 DOM 树。

假设现在我有两个 DOM 树 - t1 和 t2。每棵树都会有很多子节点，而子节点又会有很多子节点。

我想做的是逐个节点遍历树 t1 并将 t1 中的每个节点与 t2 中的每个节点进行比较。我知道 Jackson json 解析器允许我查询特定节点，但是如何逐个节点遍历整个树节点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:34:51.540

您可以简单地使用`JsonNode.iterator()`方法来获取节点的所有子节点（达到您需要的级别）。您可以检查节点`JsonNode.isArray`或`JsonNode.isObject`任何其他类型以停止深度优先搜索。您需要的其他一切都与[tree traversal](http://en.wikipedia.org/wiki/Tree_traversal)相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T22:59:40.007

如果只想比较 t1 和 t2，可以写成 t1.equals(t2) 这么简单。我假设 t1 和 t2 是 JsonNode 类型，它实现了 equals 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T18:13:56.300

```
 boolean NodesEqual(JsonNode n1, JsonNode n2) {
  if(n1.size()!=n2.size())return false;
  // ... other equality checks, like name, data type, etc
  for(int i=0;i<n.size();i++){
    JsonNode child1 = n1.get(i);
    JsonNode child2 = n2.get(i);
    if(!NodesEqual(child1,child2)) return false;
  } 
  return true;
 } 
```

这是一个递归的、如此庞大或深度嵌套的文档可能会出现问题，但这对于正常情况应该可以正常工作。

# ruby-on-rails - 如何验证翻译后的数据？

> ID：10145622
> 
> 赞同：4
> 
> 时间：2012-04-13T17:38:59.450
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, globalization, globalize3

我正在使用 Ruby on Rails (3.2.2)、[globalize3](https://github.com/svenfuchs/globalize3) (0.2.0) 和[batch_translations](https://github.com/fidel/batch_translations) (0.1.2) ruby​​-gems。我想验证由 globalize3 处理的翻译数据以及它应该是的。也就是说，例如，如果...

...在我的`ROOT_RAILS/app/models/article.rb`文件中，我有：

```
class Article < ActiveRecord::Base
  translates :title, :content

  # This is needed to make the batch_translations to work.
  attr_accessible :translations_attributes
  accepts_nested_attributes_for :translations

  validates :title,
    :presence => true,
    :length   => ...
  validates :content,
    :presence => true,
    :length   => ...

  ...
end 
```

...在我的`ROOT_RAILS/app/views/articles/_form.html.erb`文件中，我有：

```
<%= form_for(@article) do |f| %>
    English translation:
    <%= f.text_field :title %>
    <%= f.text_field :content %>

    Italiano translation:
    <%= f.globalize_fields_for :it do |g| %>
      <%= g.text_field :title %>
      <%= f.text_field :content %>
    <% end %>
<% end %> 
```

我想在提交表单时验证数据`title`和`content`值，而当前`I18n.locale`不是`I18n.default_locale`. 换句话说，为了在数据库中存储正确的翻译信息，我想在用户提交非默认英语语言的语言环境的翻译数据时验证`title`和属性。`content`

**可能吗？如果是这样，怎么做？**

注意：我以[this question](https://stackoverflow.com/questions/10139245/how-to-solve-the-cant-mass-assign-protected-attributes-translations-attribute)为例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:14:21.270

如果我的理解正确，有几种方法可以解决这个问题。

1) 控制器级别测试，您可以在其中测试提交的包含语言环境的表单是否保留到正确的本地化内容表。一种方法是这样的：

```
 it "persists localized content for the Italian locale" do
       Article.should_receive(:create).with(:locale => 'it', :title => 'title goes here', :content => 'this is content')
       post :create, :locale => 'it', :title => 'title goes here', :content => 'this is content'
    end 
```

这基本上是说 Article 模型应该接收带有这些参数的创建消息。我对 batch_translations API 的工作方式并不完全清楚，因此您需要验证参数是否来自该样式表单。

到那时，我认为您将充分测试数据是否正确地持久化到数据库中。任何进一步的事情都将测试 Globalize gem 是否有效，这是您想要避免的。尝试并测试边界。

# html - CSS div 标签类名 (CakePHP)

> ID：10145624
> 
> 赞同：0
> 
> 时间：2012-04-13T17:39:07.303
> 
> 标签：html, css, cakephp

我蛋糕烘焙 ( `cake bake`) 一个测试安装，它产生了产品控制器及其视图，例如 index.cpt、add.cpt、edit.ctp 等。我正在查看这些视图正在使用的 CSS 文件，并且有两个部门：`action`和`products index`。

我`actions`在 CSS 文件中看到了 div 标签，但没有看到`products index`. 这些部门的代码如下。

```
/** containers **/
div.form,
div.index,
div.view {
    float:right;
    width:76%;
    border-left:1px solid #666;
    padding:10px 2%;
}
div.actions {
    float:left;
    width:16%;
    padding:10px 1.5%;
} 
```

我的问题是：

1.  为什么`products index`'s 的参数定义在下`div.view`？

2.  我看到`div.form`并用一个而不是空括号`div.index`结束他们的行。`,`这是什么意思？

3.  现在页面被垂直分成两个如下。

    ```
    ---------------------
    |    |              |
    |    |              |
    |    |              |
    |    |              |
    |    |              |
    --------------------- 
    ```

制作以下内容的理想方法是什么？是否可以单独使用这些 div 标签进行以下操作，还是应该考虑使用表格？我想将导航栏放在左侧和顶部，如所有页面所示。我正在使用`app/views/layouts/default.ctp`和`this->element()`。

```
 ---------------------
    |    |              |
    |    |--------------|
    |    |              |
    |    |              |
    |    |              |
    --------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:50:57.283

我不知道 CakePHP，但您的大部分问题都仅限于 CSS。

> 为什么products index的参数是在div.view下定义的？

这很*可能*是因为存在一个视图的通用实现。所有“视图”共享相同的布局，因此如果每个页面相同，则无需在 CSS 文件中重复自己。只需用一个类标记 div（这就是他们在那里的目的），然后继续前进。

> 我看到 div.form 和 div.index 以 a 结尾，而不是空括号。这是什么意思？

这是 CSS 中的组合选择器。当多个选择器共享相同的样式时，您可以在规则集声明之前用逗号分隔的列表来表示它们。在您的示例中，`div.form, div.index, div.view`所有人都共享相同的样式声明。使用空括号不会给出*样式声明*。

[http://www.w3.org/TR/selectors/#grouping](http://www.w3.org/TR/selectors/#grouping)

对于您的第三个问题，假设您有一些 HTML 如下

```
<div>
  <div class="actions"><!--your actions --></div>
  <div class="view"><!-- your product index view--></div>
</div> 
```

您可以添加一个 div 标签作为标签的子`div.view`标签，以在顶部实现导航栏。像这样：

```
<div>
  <div class="actions"><!--your actions --></div>
  <div class="view">
     <div class="custom_nav_bar"><!-- your new html --></div>
     <div class="view_content">
         <!-- your product index view-->
     </div>
  </div>
</div> 
```

然后，您可以使用 css`div.custom_nav_bar`并`div.view_content`获得所需的高度/颜色。

> 还是我应该考虑使用表格

请不要。表格是有目的的，但不是为了布局。

# android - 在另一个包中调用活动

> ID：10145626
> 
> 赞同：0
> 
> 时间：2012-04-13T17:39:38.943
> 
> 标签：android, android-intent, package, android-activity

所以我有一个应用程序，它的默认包为`com.android`.

在这个包中，我有两个包，分别是`android.audio`和`android.video`。

现在我需要`activity1`从in打电话`android.audio`。`activity2``android.video`

我试过使用类似的东西

```
Intent i = new Intent();
i.setClassName("android.video","android.audio.activity1");
startActivity(i); 
```

但这似乎不起作用。什么是正确的方法？我哪里出错了？我无法导航到包外的任何活动。

编辑：这是在清单中声明的​​方式。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.android"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.RECORD_VIDEO" />
<uses-permission android:name="android.permission.CAMERA"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_title" >
    <activity
        android:label="@string/app_title"
        android:name=".WeaveActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="android.login.LoginActivity"></activity>
    <activity android:name="android.login.RegisterActivity"></activity>

    <activity android:name="android.video.activity2"></activity>

     <activity android:name="android.audio.activity1"></activity>

</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:40:42.280

```
Intent i = new Intent();
i.setClassName(activity2.this,activity1.class);
startActivity(i); 
```

使用上面的代码并将这些活动添加到您的清单文件中。正如你所说的，你的包名是 com.android

```
<activity android:name=".audio.activity1"></activity>
<activity android:name=".video.activity2"></activity> 
```

或使用如下完整路径

```
<activity android:name="com.android.audio.activity1"></activity>
<activity android:name="com.android.video.activity2"></activity> 
```

和一个小建议，你永远不要将你的包名称用作 com.android，因为如果在将应用程序提交到 Google Play 时使用它，它不会接受它，因为包 com.android 用于 android SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:52:03.150

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:16:44.413

Check your package name.

I think you gave only "audi" instead of "audio"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T19:15:25.293

I rewrote my entire package structure by giving project package name as `com.android` and rest of the sub packages as `com.android.audio` and `com.android.video` and now it seems to work. thanks for all your help.

# google-app-engine - GAE Channel API 消息只向一个客户端广播？

> ID：10145629
> 
> 赞同：0
> 
> 时间：2012-04-13T17:39:54.920
> 
> 标签：google-app-engine, channel-api

我最近一直在尝试学习 Google App Engine 的 Channel API。

我试图制作一个简单的聊天应用程序，但我遇到了问题。

这通常是我所做的。

服务器打开一个静态通道：

```
token = channel.create_channel('bigboys') 
```

客户端 js 通过以下方式连接到通道：

```
var channel = new goog.appengine.Channel(token) 
```

我没有使用 Google App Engines 用户。我不希望客户必须登录。

所以我的问题是，聊天应用程序并不能真正工作，只有一个客户可以加入频道。我知道每个频道规则有一个客户端 ID。那么如何在一个“聊天室”中支持多个客户呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T17:59:17.840

将通道视为一个客户端（浏览器）和您的服务器之间的连接。

如果您有聊天室，则需要为每个客户提供一个频道。您需要在服务器端跟踪聊天室中的所有客户端以及每个客户端的频道。当您发送消息时，您需要在聊天室的每个客户频道上发送它。

# codeigniter - 设置超过 4KB 的会话数据

> ID：10145635
> 
> 赞同：1
> 
> 时间：2012-04-13T17:40:08.600
> 
> 标签：codeigniter, session

如何在 Codeigniter 框架中设置超过 4KB 的会话数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T18:03:20.113

Cookie 限制为 4KB 的数据。为了解决这个问题，您可以将会话数据存储在数据库中。[Sessions Class](http://codeigniter.com/user_guide/libraries/sessions.html)上的文档详细说明了如何执行此操作。查看标题为*将会话数据保存到数据库*的部分。

# set - MDX 制作一套所有表亲

> ID：10145636
> 
> 赞同：0
> 
> 时间：2012-04-13T17:40:14.260
> 
> 标签：set, mdx, aggregation, members

谁能帮我解决以下 MDX 相关问题？

我需要在一组特定的成员上聚合一个值。

这组包括当前成员和他的所有表亲（与我的当前成员的父母处于相同相对位置的成员）来自他父母之前的“叔叔”。

例子 ：

AAA BBB CCC DDD EEE

123 123 123 123 123

如果我当前的成员是 C3，我的结果集将是 C3 + B3 + A3

提前感谢将找到解决方案的冠军！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:44:13.660

您可以使用[表亲功能](http://msdn.microsoft.com/en-us/library/ms145481)。

# html - 可编辑的个人资料页面

> ID：10145639
> 
> 赞同：0
> 
> 时间：2012-04-13T17:40:18.973
> 
> 标签：html, css, user-interface, razor, twitter-bootstrap

我正在使用推特引导程序。

我想创建一个带有`edit`左上角按钮的个人资料页面。

当用户点击此按钮时，

所有配置文件字段都变为可编辑

（我认为`input`元素）

知道如何最容易地实现它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:31:35.440

如果您不能指望所有使用 HTML5 的人，您可以通过禁用或只读所有字段开始，然后按一个按钮更改属性。使用相同的功能，您可以显示或启用“保存”按钮。就像是...

```
// Lock or Unlock Controls ////////////////////////////////////////////////////////////////////////////
function lockControls(setLock) {
   var bOk = setLock;
   $("#btnSave").attr('disabled', bOk);
   $("#emailMessage").attr('disabled', bOk);
   $("#emailSubject").attr('disabled', bOk);
   $("#buildingList").attr('disabled', bOk);
} 
```

# java - 问题从文件中读取并使用二维数组对数据进行排序

> ID：10145641
> 
> 赞同：0
> 
> 时间：2012-04-13T17:40:20.473
> 
> 标签：java, arrays, sorting, mapping

我正在制作一个省分拣机，要求是我必须保持原样离开主课，并制作一个名为 Munge 的私人课程，我已经在这几个小时并更改了我的代码数百次，基本上它从一个看起来像这样的文本文件

> 汉密尔顿，安大略省
> 多伦多，安大略省
> 埃德蒙顿，艾伯塔省
> 红鹿市，艾伯塔省
> St John's，纽芬兰

并且需要像这样输出

> 阿尔伯塔省；
> 安大略省红鹿市埃德蒙顿；汉密尔顿，多伦多
> 纽芬兰；圣约翰

我的主要课程是不变的，看起来像这样

```
public class Lab5 {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {

    if(args.length < 2) {
        System.err.println("Usage: java -jar lab5.jar infile outfile");
        System.exit(99);
    }

    Munge dataSorter = new Munge(args[0], args[1]);

    dataSorter.openFiles();
    dataSorter.readRecords();
    dataSorter.writeRecords();
    dataSorter.closeFiles();
    }
} 
```

我做的Munge课看起来像这样

```
package lab5;

import java.io.File;
import java.util.Scanner;
import java.util.Formatter;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.SortedMap;
import java.util.TreeMap;

public class Munge
{

private String inFileName, outFileName;
private Scanner inFile;
private Formatter outFile;
private int line = 0;

private String[] data;

public Munge(String inFileName, String outFileName)
{
    this.inFileName = inFileName;
    this.outFileName = outFileName;

    data = new String[100];
}

public void openFiles()
{
    try
    {
        inFile = new Scanner(new File(inFileName));
            File file = new File("input.txt");
            SortedMap<String, List<String>> map = new TreeMap<String, List<String>>();
            Scanner scanner = new Scanner(file).useDelimiter("\\n");
        while (scanner.hasNext()) {
            String newline = scanner.next();
            if (newline.contains(",")) {
            String[] parts = newline.split(",");
            String city = parts[0].trim();
            String province = parts[1].trim();
            List<String> cities = map.get(province);
            if (cities == null) {
                cities = new ArrayList<String>();
                map.put(province, cities);
            }
            if (!cities.contains(city)) {
                cities.add(city);
            }
            }   
        } 
            for (String province : map.keySet()) {
                StringBuilder sb = new StringBuilder();
                sb.append(province).append(": ");
                List<String> cities = map.get(province);
                for (String city : cities) {
                    sb.append(city).append(", ");
                }
                sb.delete(sb.length() - 2, sb.length());
                String output = sb.toString();
                System.out.println(output);
            } 
    }
    catch(FileNotFoundException exception)
    {
        System.err.println("File not found.");
        System.exit(1);
    }
    catch(SecurityException exception)
    {
        System.err.println("You do not have access to this file.");
        System.exit(1);
    }

    try
    {
        outFile = new Formatter(outFileName);  
    }
    catch(FileNotFoundException exception)
    {
        System.err.println("File not found.");
        System.exit(1);
    }
    catch(SecurityException exception)
    {
        System.err.println("You do not have access to this file.");
        System.exit(1);
    }
}

public void readRecords()
{
    while(inFile.hasNext())
    {
        data[line] = inFile.nextLine();
        System.out.println(data[line]);
        line++;
    }
}

public void writeRecords()
{
    for(int i = 0; i < line; i++)
    {
        String tokens[] = data[i].split(", ");
        Arrays.sort(tokens);

        for(int j = 0; j < tokens.length; j++)
            outFile.format("%s\r\n", tokens[j]);
    }
}

public void closeFiles()
{
    if(inFile != null)
        inFile.close();

    if(outFile != null)
        outFile.close();
}
} 
```

您将不得不原谅我的括号，在netbeans中格式正确，但我不得不将底部的括号移过来以将其保留在代码块中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:54:32.367

因为我认为这是家庭作业，所以我会避免给你一个解决方案，但会给出一些提示。

当您阅读一行时，它由城市、省组成。因此，您需要做的第一件事是将字符串分成两部分。第二部分是省，第一部分是市。您需要为每个省份制作一个集合，并将城市存储在正确的省份集合中。

一旦你有了它，你对找到的省份的名称进行排序，并遍历它们。对省份的城市进行排序，然后输出省份名称和每个城市名称。

有用的类可能是 HashMap、TreeMap、List、Collections（具有排序方法）。

希望这有助于您走得更远，否则请尝试更具体地说明您遇到的问题。

# java - 为什么 JButton.setBounds 按钮比我输入的要大？

> ID：10145642
> 
> 赞同：0
> 
> 时间：2012-04-13T17:40:27.993
> 
> 标签：java, swing

我对 Java 和 Swing 还很陌生。这是我的代码的一部分：

```
frame.setSize(500,500);
for(int i=0;i<5;i++){
  button[i].setBorder(null);
  button[i].setMargin(new Insets(0,0,0,0));
  button[i].setBounds(0,i*100,100,100);
} 
```

按钮应该完全适合窗口，但它们总是在底部溢出。怎么了？

编辑：我使用的是 Windows 7，我将字体大小设置为正常字体大小的 120%，这可能是原因吗？

# php - Ajax jquery php post 初学者

> ID：10145648
> 
> 赞同：2
> 
> 时间：2012-04-13T17:41:01.430
> 
> 标签：php, javascript, jquery, ajax, post

我很难学习如何使用 ajax 和 jquery 在不重新加载页面的情况下发布按钮。具体来说：表单仍在重新加载页面，并且没有更新任何变量。

这是我磕磕绊绊的代码。

我在尝试 Jquery/AJAX 之前使用的内容。只是 php

```
// $_POST['selected_dir'] is set when you click on a folder or link within the explore(r).php    

if (isset($_POST['selected_dir'])) 
   {
      // last selected folder/directory
   $current_dir = $_POST['selected_dir']; 
      // current_dir is the folder we are looking inside of.
      // we make it a $session so that if we click a different submit (RELOAD)
      // within the page it will remember $current_dir;
   $_SESSION['selected_dir'] = $current_dir; //
   }

   else // if $_post isint set but $_session is
   if (isset($_SESSION['selected_dir']))
      {
 $current_dir = $_SESSION['selected_dir'];
 }
 else
 {
 // default folder/directory
 $current_dir = "$root";  //'D:\Hosting\538\html';
 }

<form action='explore.php' method='post'>
     <input type='image'
       src='$folder_icon' 
       alt='Submit'
            name=''
       value='submit'/>

       <input type='hidden' 
              value='$f_path/$value'
         name='selected_dir'/>

       <input type='submit' 
         value='$value'
         name='$value' 
         class='submit_into_link'/>
</form> 
```

这样效果很好，除非您每次单击图像或页面重新加载链接。我终于得出了我需要使用 jquery 和 ajax 的结论，直到现在我什至从未使用过 javascript。我一直在阅读教程，但我无法真正连接这些点来完成这项工作

我的标题中有这个

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script> 
```

我在正文中的页面顶部有这个

```
$.ajax
    ({ 
    type: 'POST', 
    url: 'explore_be.php', 
    data: data, success: 
    success function(data, textStatus, jqXHR),
    complete: function(),
    dataType: dataType 
    }); 
```

我对上面的代码有几个问题。我不确定如何使用它。我是否需要将此 ajax 代码放在 onclick 函数中？似乎我在 jquery 中查看的一些示例使用了这样的东西..

```
$(document).ready(function()
 {
 $(".flip").click(function() // this is a piece of code i got from w3schools.com
 }); 
```

.flip 上面是一个类。我看到他们在谈论时使用按钮

```
 <button> 
```

但是对于具有特定输入 ID 的表单中的按钮呢？或者我应该添加到表单输入 onclick="clicked()" 然后将 ajax 放入该函数中？ajax 是否也需要在 $(document).ready(function()) 中？

我应该为数据类型添加什么？

我将我的 php 代码放在 explore_be.php 文件中。

explore_be.php

```
 // $_POST['selected_dir'] is set when you click on a folder or link within the explore(r).php    

if (isset($_POST['selected_dir'])) 
   {
      // last selected folder/directory
   $current_dir = $_POST['selected_dir']; 
      // current_dir is the folder we are looking inside of.
      // we make it a $session so that if we click a different submit (RELOAD)
      // within the page it will remember $current_dir;
   $_SESSION['selected_dir'] = $current_dir; //
   }

   else // if $_post isint set but $_session is
   if (isset($_SESSION['selected_dir']))
      {
 $current_dir = $_SESSION['selected_dir'];
 }
 else
 {
 // default folder/directory
 $current_dir = "$root";  //'D:\Hosting\538\html';
 } 
```

这就是页面背后的代码吗？

我将表单更改为没有任何操作，但添加了 onclick 他们仍在重新加载页面。我需要对表单输入做些什么来阻止它？

我的新表格是这样的

```
<form action='' method='post'>
     <input type='image'
       src='$folder_icon' 
       alt='Submit'
            name=''
       onclick='clickity()'
            value='submit'/>

       <input type='hidden' 
              value='$f_path/$value'
         name='selected_dir'/>

       <input type='submit' 
         value='$value'
         name='$value' 
         onclick='clickity()'
                   class='submit_into_link'/>
</form> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:48:26.167

你可以这样做：

html

```
<form action='explore.php' method='post' id='myForm'> 
```

jQuery

```
$('#myForm').submit(function(event){  //added event
    event.preventDefault(); //added to prevent submit
    $.ajax
        ({ 
        type: 'POST', 
        url: 'explore_be.php', 
        data: data, success: 
        success function(data, textStatus, jqXHR),
        complete: function(),
        dataType: dataType 
    });

}); 
```

编辑：删除您在编辑中添加的 onclick 事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:48:46.790

```
<form action='javascript:;' method='post'>
     <input type='image'
       src='$folder_icon' 
       alt='Submit'
            name=''
       onclick='clickity();'/>

       <input type='hidden' 
              value='$f_path/$value'
         name='selected_dir'/>

       <input type='submit' 
         value='$value'
         name='$value' 
         onclick='clickity();' 
         class='submit_into_link'/>
</form> 
```

首先更改此设置并告诉我是否可以，并告诉我为什么您需要在同一个表单上提交 2 次？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:54:26.487

你一次尝试三件事。这将使找到错误所在的事情变得复杂。只需通过一个小例子使用没有 jquery 的 ajax。然后扩展它。

```
<html>
<head>
<script type="text/javascript">
function getdata(str)
{
if (str.length==0)
  {
  document.getElementById("result").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("result").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","response.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>

<input type='submit' onclick='getdata(input)'>
<div id='result'>
</div>
<body> 
```

# c# - Crystal Reports (VS 2010) 报告未显示且未引发任何错误

> ID：10145651
> 
> 赞同：0
> 
> 时间：2012-04-13T17:41:05.460
> 
> 标签：c#, asp.net, sharepoint, web-parts, crystal-reports-2010

我正在尝试让 Crystal Report 显示在网页上。我的代码如下所示：

```
 ReportDocument rd = new ReportDocument();
            rd.Load(@"C:\projects\reports\testreport.rpt");
            rd.SetDatabaseLogon("sa", "thepassword");
            CRViewer.ReportSource = rd; 
```

我已经解决了几个实际错误才能到达现在的位置。我遇到的最后一个错误是无法建立连接，但是当我添加 SetDabaseLogon 调用以使用 SQL Server Auth 安全性而不是集成时，该问题已得到解决。

现在我根本没有收到任何错误，但报告根本没有出现。

我不知道现在要尝试什么，任何想法都将不胜感激！

（我不知道这是否真的相关，但这是在我正在创建的 SharePoint Web 部件中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:57:58.480

尝试添加这一行：CRViewer.Show();

如果不是那么简单，那么我会在 webpart 包装之外运行应用程序，以至少确认/拒绝它是否与 SharePoint 相关。

# php - PHP对给定时间戳添加和减去时间

> ID：10145655
> 
> 赞同：1
> 
> 时间：2012-04-13T17:41:11.173
> 
> 标签：php

我从mysql得到一个时间戳，比如

```
2012-04-12 16:42:33 
```

在 PHP 中，我如何减去小时数，或者基本上如何更改时区（-3 小时）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:42:25.353

```
strtotime('-3 hours', strtotime('2012-04-12 16:42:33')); 
```

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

更改时区在技术上有点棘手，因为您的时间戳是格式化的，我们不知道原始时区在哪个时区。所以，这段代码就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:45:34.430

您应该使用 PHP 的[DateTime](http://php.net/manual/en/book.datetime.php)。您可以查看[支持的格式](http://www.php.net/manual/en/datetime.formats.php)，然后创建一个新对象：

```
$date=new DateTime("2012-04-12 16:42:33"); 
```

该对象还支持更改时区和其他转换。设置新时区（来自 PHP 手册）：

```
$date->setTimezone(new DateTimeZone('Pacific/Chatham')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:49:01.470

```
$hours = 3;

$time_old = "2012-04-12 16:42:33";

$time_new = strtotime($time_old);

$time_new = $time_new - (60 * $hours);

date($time_new); 
```

这将允许您通过更改来动态更改小时`$hours`。

# c# - 如何以编程方式更改启动时打开的 xaml 页面？

> ID：10145658
> 
> 赞同：0
> 
> 时间：2012-04-13T17:41:23.730
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我正在开发一个具有登录屏幕的应用程序，然后进入应用程序的实际内容页面。在他们成功登录一次后，我想这样做，当他们打开应用程序时，它会自动转到主内容页面。现在，我有它，所以它加载登录页面，然后从隔离存储中提取登录信息，然后再次登录。但如果我能立即打开内容页面就更好了，这样他们甚至不必看到登录页面。有没有办法做到这一点？如果我能够以编程方式更改应用程序首先登陆的页面，那将是惊人的。

谢谢你的帮助！

编辑：显然有办法！我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:18:52.840

这正是我最终要做的：[如何在 Windows Phone 7 中应用启动时显示不同的页面？](https://stackoverflow.com/questions/9664673/how-to-show-different-pages-when-app-launches-time-in-windows-phone-7/9664863)感谢威廉

就像一个魅力，我只需要在我的 app.cs 中检查我的 IsolatedStorageSettings，然后根据它做出适当的决定。

# permissions - 有没有办法让 TFS 中的分支不可见？

> ID：10145659
> 
> 赞同：0
> 
> 时间：2012-04-13T17:41:27.117
> 
> 标签：permissions, branch

我知道有一种方法可以为分支设置权限，这样特定的人就无法读取/签出/签入文件。

但是，有没有办法完全隐藏这些文件夹/分支，让这些人甚至看不到它们？

顺便说一句，我们使用的是 TFS2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:21:19.723

假设我有 $/Proj/Branch1，并且我拒绝用户 A 对 $/Proj/Branch1 的读取权限。这将使 $/Proj/Branch1 及其下的所有内容对用户 A 不可见。这是因为默认情况下项目不'对他们没有任何权限，只是从他们的父母那里继承。

如果这是您的情况，那么除了拒绝相关用户的读取权限外，没有其他工作可做。

该规则的例外情况是当用户 A 允许 $/Proj/Branch1 的某个子项时。我们将此项目称为 $/Proj/Branch1/Child/Several/Folders/Down.txt。因为允许用户 A 阅读此项目，他或她必须能够看到所有父文件夹，一直到 $/。在这种情况下，父文件夹是可见的，但不是它们的内容（除了那个文件 Down.txt）。

因此，如果您希望用户的路径真正消失，他们必须缺乏对相关项目和该项目的所有子项的读取*权限*。正如我所说，在典型情况下，您所要做的就是在根项目上设置拒绝读取权限，它将一直向下传播。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:12:07.200

除非您破坏了权限继承，否则 P.Kelly 的方式有效。如果你破坏了它，你将不得不在你破坏它的每个节点上重复拒绝规则。

您可以删除分支（如果需要，可以取消删除），但它适用于所有人。您要求的功能根本没有在 TFS 中实现（我也很想念它），因此您的解决方案仅适用于某些情况。

# user-interface - 像代码气泡这样的东西还存在吗？

> ID：10145660
> 
> 赞同：2
> 
> 时间：2012-04-13T17:41:37.903
> 
> 标签：user-interface, debugging, ide

[Code Bubbles](http://www.cs.brown.edu/people/acb/codebubbles_site.htm)项目是几年前宣布的，从那时起我就想尝试类似的东西。然而时不时地，当我对自己想，*这么多时间过去了；他们现在肯定已经发布了一个使用该气泡概念的 IDE！*，我打开谷歌，只看到关于 2010 年这个想法的诱人提及。

我今天可以下载和试用*类似*Code Bubbles 的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T23:30:08.987

原来[Java](http://www.cs.brown.edu/people/spr/codebubbles/)的原始代码泡沫仍然存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T01:51:46.153

哇，原来有*一些*东西：

[调试器画布](http://msdn.microsoft.com/en-us/devlabs/debuggercanvas)。事实上，Visual Studio 的一个附加组件！

现在我很高兴以后尝试一下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T01:47:45.387

我用过[Leo](http://leoeditor.com) - Literate Editor with Outlines。它是用 Python 编写的，具有我认为 Code Bubbles 也渴望的许多功能，但没有图形视图。

考虑大纲，但能够将相关的代码块彼此靠近或以任何对您有意义的方式放置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-31T03:34:13.750

对于 Visual Studio 2015，我最近发布了支持工作集和基于函数的代码视图的[任务画布扩展。](https://vlasovstudio.com/task-canvas/)

# performance - 中间人：拦截应用程序函数/库调用

> ID：10145661
> 
> 赞同：1
> 
> 时间：2012-04-13T17:41:41.610
> 
> 标签：performance, time, environment, jail

基本上，我想要实现的是在一个环境中运行一个程序，该环境将根据我决定的标准给出程序要求的任何值。比如说，游戏会定期向系统查询时间以执行动画，现在如果我可以控制传递给程序的时间值，我可以控制动画的速度（也许可以轻松清除一些困难的回合：P）。

基于类似的理由击键，鼠标移动也可以控制（我尝试过 Java 的 Robot 类，但没有发现它令人满意：减慢系统速度{或者我的实现可能很糟糕}，命令在当前专注的程序上执行并且不能有针对性）。

任何优雅的方式或实现它的一些指针都将受到高度赞赏。

# iphone - App Store 上的应用程序崩溃报告

> ID：10145665
> 
> 赞同：20
> 
> 时间：2012-04-13T17:41:59.863
> 
> 标签：iphone, app-store, crash-reports

我刚刚在 App Store 上发布了一个应用程序，但对于某些用户来说，该应用程序会崩溃。我无法重现此问题，因此我想知道是否有任何方法可以从用户那里获取崩溃报告，以便了解应用程序崩溃的原因。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2018-07-09T01:45:41.853

作为一名非常兼职的 iOS 开发人员并且拥有一个没有太多功能的小型应用程序，我直到最近才有理由尝试查找崩溃日志。谷歌把我带到了这个非常古老的线程。

以防万一其他人最终陷入同样的​​疯狂追逐 - 在撰写本文时（2018 年年中）iTunes Connect 已重建为 App Store Connect，并且在门户网站中，您所能看到的只是崩溃*次数*等-向前。要从 Apple 服务器下载能源使用和崩溃报告日志，您实际上是使用 XCode。`Window`-> `Organizer`->`Energy`或`Crashes`选项卡**[编辑：2020 年 11 月仍然正确，XCode 12.2]**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T17:45:42.670

您可以通过 iTunes Connect 获取崩溃报告。就是这样：

1.  登录[iTunes 连接](http://itunesconnect.apple.com)
2.  点击“管理您的应用程序”
3.  选择您的应用
4.  单击“当前版本”下的应用程序图标
5.  点击右侧的“崩溃报告”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-21T04:52:20.210

以防万一有人在 2019 年仍在寻找这个答案，我就是这样做的。1.) 登录 Apple iTunes Connect 2.) 转到我的应用 >> 选择您的应用 >> 活动 3.) 选择您的内部版本号 4.) 在一般信息中选择下载 dSYM

下面的链接帮助了我，你可以从这里找到其他下载 dSYM 的方法（例如：从 Xcode）。参考资料：[https ://docs.newrelic.com/docs/mobile-monitoring/new-relic-mobile-ios/configuration/retrieve-dsyms-bitcode-apps](https://docs.newrelic.com/docs/mobile-monitoring/new-relic-mobile-ios/configuration/retrieve-dsyms-bitcode-apps)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-07T17:12:40.173

网址：[https ://developer.apple.com/news/?id=nra79npr](https://developer.apple.com/news/?id=nra79npr)

但请确保您已在 xcode 中配置了 appstoreconnects 凭据。

[![在此处输入图像描述](../Images/0a2eb98a3f708b620d3cd0cbbcff45a8.png)](https://i.stack.imgur.com/EgEM0.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-26T12:36:17.783

嘿，我彻底搜索并找到了这个

iOS 5 及更高版本 点击设置 > 通用 > 关于 > 诊断和使用将允许您在自动发送和不发送之间进行选择。

iOS 4 及更早版本 默认情况下，选择加入是一次性决定。如果您想改变您的决定，您可以重置 iOS 4 或更早版本设备的警告，以便系统再次询问您。

如何在 iTunes 中重置警告 将您的 iPad、iPhone 或 iPod touch 连接到您的 PC 或 Mac。等到您的设备出现在 iTunes 窗口左侧的“设备”下。右键单击（Mac 或 PC）或按住 Control 键单击 (Mac) 设备的图标。从快捷菜单中，选择重置警告：

重置警告后下次同步时，您应该会看到：

要不同意并停止发送 Apple 诊断和使用信息，请单击不，谢谢。

如果您没有看到上方的窗口，请断开您的设备与计算机的连接。在您的设备上打开一个应用程序。按住睡眠/唤醒按钮直到出现红色滑块，然后按住主屏幕按钮直到应用程序退出。如果您使用的是 iOS 2.x 或更早版本，请按住主屏幕按钮直到应用程序退出。连接您的设备并将其与 iTunes 同步。同意或不同意诊断收集的选项应该再次出现。

查尔兹；）

# html - 溢出：隐藏无法始终如一地工作

> ID：10145668
> 
> 赞同：1
> 
> 时间：2012-04-13T17:42:08.057
> 
> 标签：html, overflow, css

我正在研究一些按钮。我想要一个翻转状态，并且我在一个带有溢出的 div 中的图像中拥有它：隐藏以隐藏不活动的状态。它有时有效，但有时看起来像这样：

![破碎的](../Images/07858bd23d9972fcfb6086854bf0aca8.png)

最奇怪的是，当我尝试使用 Chrome Web Inspector 时，它会自行修复！在 HTML/CSS 中没有什么奇怪的。

![在职的](../Images/14beff51ed401f1bf7fff104f1a8d2ed.png)

我对为什么它没有始终如一地损坏或工作感到非常困惑。

这是HTML：

```
<div class="hunting_card_button">
    <div class="hunting_card_icon" id="gift_to_friend">
        <img src="/images/icons/friend2.png?1" />
    </div>
    Friend
</div> 
```

以及相关的 CSS：

```
.hunting_card_button {
    width: 65px;
    overflow: hidden;
    display: inline-block;
    text-align: center;
    margin: 0 2px 0 2px;
}
.hunting_card_icon {
    position: relative;
    right: 0;
}
.hunting_card_icon:hover {
    right: 65px;
    cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:29:02.733

解决方案是将其中一个容器从跨度更改为 div。

# c# - 使用全局目录连接到 AD 的性能问题

> ID：10145669
> 
> 赞同：1
> 
> 时间：2012-04-13T17:42:12.077
> 
> 标签：c#, active-directory, ldap

我在使用域目录方法连接到活动目录时遇到了性能问题，然后一位朋友建议我使用全局目录方法，但我遇到了更高的性能问题，我做了一个概念验证然后使用

**示例 1**：使用域目录

```
DirectoryEntry de = new DirectoryEntry();

de.Path = "LDAP://DomainName.CORP.COM";
de.Password = "UserPassword";
de.Username = "UserName";

DirectorySearcher deSearch = new DirectorySearcher();
deSearch.SearchRoot = de;

deSearch.ClientTimeout = new TimeSpan(0, 0, 60);

deSearch.SearchScope = SearchScope.Subtree;
string format = "(&(objectClass=user)(sAMAccountName="+InputUserName+"))";
deSearch.Filter = string.Format(format, UserName); 
```

大约用了 1 秒

**示例 2**：使用带有不安全端口 (3268) 的全局目录：

```
de.Path = "GC://CORP.COM:3268"; 
```

花了6秒

**示例 3**：使用带安全端口 (3269) 的全局目录：

```
de.Path = "GC://CORP.COM:3269"; 
```

耗时 38 秒

您能帮助我如何使用安全的全局目录方法解决性能问题，因为您看到它花费了很多时间？

顺便说一句，我在以下文章中找到：http: [//support.microsoft.com/kb/951581](http://support.microsoft.com/kb/951581)我们可以通过禁用分页查询来解决性能问题，但我不知道我是如何实现的？

您的反馈将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:29:12.537

SSL 问题可能与检查证书吊销或类似情况有关。

您的 DC 运行的是什么版本的 Windows？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:10:21.437

很难说出您的最终目标是什么，但是从您的代码来看，您似乎只是在尝试授权用户，然后也许还要检索他们的属性？

如果是这种情况，您真的不必使用全局目录语法。我建议使用标准域目录语法和较低级别的 System.DirectoryServices 库。

在通过 SSL 连接\授权\搜索 Active Directory 时，我花了几周时间研究一个非常相似的性能问题，您可以在此处找到票证：

[为 System.DirectoryServices.DirectoryEntry 设置回调以处理自签名 SSL 证书？](https://stackoverflow.com/questions/12911391/set-callback-for-system-directoryservices-directoryentry-to-handle-self-signed-s/13073365#13073365)

希望这会让你朝着正确的方向前进。

# c# - 评估 MvcContrib TestHelper

> ID：10145671
> 
> 赞同：0
> 
> 时间：2012-04-13T17:42:14.510
> 
> 标签：c#, asp.net, asp.net-mvc-3, unit-testing, mocking

对于我的 ASP.NET MVC3（新）开发，我不想创建对 MvcContrib TestHelper（以及 Rhino Mocks）的依赖，除非它提供了重要的价值。所以我想了解这个助手的当前状态。

[文档](http://mvccontrib.codeplex.com/wikipage?title=TestHelper)说 TestHelper 为以下控制器依赖项生成假货：

*   HttpContext
*   HttpRequest
*   HttpResponse
*   HttpSession
*   形式
*   临时数据
*   请求参数
*   应用路径
*   路径信息

对于 MVC1 和 MVC2，我可以看到为什么这很有帮助。但是 MVC3 开始引入改进的测试“[接缝](http://theknowledge.me.uk/mywiki/books/the%20art%20of%20unit%20testing.html)”，这可能使 TestHelper 的相关性降低。例如，MVC3`Request`和`Response`控制器属性专门设计为 HttpRequest 和 HttpResponse 的可隔离/可注入版本。

由于我仍在探索 MVC3 中的可测试性改进，我想知道上面列出的其他依赖项中有多少在 MVC3 中得到了改进的隔离（或可注入性）。我还希望看到代码示例显示在 MVC3 中使用 TestHelper 和不使用 TestHelper 为上述依赖项创建带有假货（存根/模拟）的测试。

如果使用和不使用 TestHelper 的测试编写差异足够小，那么我宁愿放弃 TestHelper ......这意味着我可以自由选择我喜欢的任何隔离框架（MOQ 或[NSubstitute](http://nsubstitute.github.com/)）。

最终，当我得知 MVC3 版本针对 HttpRequest 和 HttpResponse 采取了特定改进的可测试性步骤时，我会感到惊讶，但对于上面列出的其他依赖问题却没有。我希望有人可以在不使用 TestHelper 的情况下详细说明上述项目是如何隔离的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:45:40.780

> 但是 MVC3 开始引入改进的测试“接缝”，这可能使 TestHelper 的相关性降低。例如，MVC3 请求和响应控制器属性专门设计为 HttpRequest 和 HttpResponse 的可隔离/可注入版本。

就单元可测试性而言，对于您在问题中列出的对象，MVC 并没有绝对引入任何新的东西。它们是 ASP.NET MVC 1 和 2 中的抽象，也是 ASP.NET MVC 3 中的抽象。这允许您对独立依赖于它们的控制器操作和代码进行单元测试。但为了做到这一点，您需要模拟这些依赖项。这就是模拟框架发挥作用的地方。Rhino Mocks 只是一种可能的框架。MVCContrib.TestHelper 为单元测试控制器操作提供了一个非常好的和流畅的语法。就我个人而言，我一直都在使用它。它确实使单元测试更具可读性，并避免将它们与各种管道、模拟和基础设施代码混淆。

检查此单元测试，例如：[https ://github.com/darind/samplemvc/blob/master/tests/SampleMvc.Web.Tests/Controllers/UsersControllerTests.cs](https://github.com/darind/samplemvc/blob/master/tests/SampleMvc.Web.Tests/Controllers/UsersControllerTests.cs)

ASP.NET MVC 3 引入了[依赖解析器](http://bradwilson.typepad.com/blog/2010/10/service-location-pt5-idependencyresolver.html)和提供程序，它允许您将依赖项注入框架的许多其他部分，而不是简单的控制器，从而对以前很难的部分进行单元测试。例如动作过滤器。

但就实际的单元测试而言，它并没有改变任何东西：

1.  您创建一个模拟来表示被测主题所依赖的某个对象，并且您可以在单元测试中控制该对象
2.  您定义对模拟对象的期望
3.  你调用你正在测试的实际方法
4.  你断言结果

# php - 挂钩 PHP 现有函数以在调用时触发函数

> ID：10145675
> 
> 赞同：0
> 
> 时间：2012-04-13T17:42:28.783
> 
> 标签：php, model-view-controller, triggers, hook

由于 MVC 的原因，我希望能够触发一个函数来查找函数何时被调用，因为 Codeigniter 围绕其核心有函数，所以我想挂钩一个函数，例如`setcookie`并在它被调用时创建一个文件（从触发功能）例如：

```
function call_me()
{
    $file = fopen('setcookie.txt', 'a+');
    fwrite($file, 'Called at ' . __CLASS__);
    fclose();
} 
```

所以当`setcookie`被调用时，它应该触发该`call_me`函数。是否有任何特定的功能或方法可以做到这一点？我知道，`debug_backtrace`但这不是我想要的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:51:23.407

> 我知道 debug_backtrace 但这不是我想要的目的。

我看到你坚持不使用回溯功能，但我仍然相信当你想记录时调用回溯功能可以派上用场。

这个想法是，当您想要调试 if 条件评估此代码时，您将预定义的 pf 代码存储在常量中。

如果您正在生产中，if 语句将阻止评估任何内容，因此您的代码速度不会受到影响。如果它适合您，您可以根据需要对其进行修改，以追踪更多级别。

为了说明我的观点，这是一个完整的例子，如果我没有理解正确并且这不是你要找的，我很抱歉！

要检查示例，您有一个文件：**test.php**

```
<?php

define ('__SITE_PATH',realpath(dirname(__FILE__)).'/');  
ini_set('log_errors', 1); 
ini_set('error_log',  __SITE_PATH.'my_error_log.log');   
include 'test1.php';
include 'test2.php';

define (__DEBUG_EVAL, ' 
    $dbt = debug_backtrace();
    error_log(
    "\n".
    "Parent function file: "         . $dbt[1]["file"]      . "\n" .
    "Parent function class: "        . $dbt[2]["class"]     . "\n" .        
    "Parent fiunction name: "        . $dbt[2]["function"]  . "\n" .    
    "Par. fiunc. called from line: " . $dbt[2]["line"]      . "\n" .

    "Child function file: "           . $dbt[0]["file"]     . "\n" .
    "Child function class: "          . $dbt[1]["class"]    . "\n" .        
    "Child fiunction name: "          . $dbt[1]["function"] . "\n" .    
    "Child fiunc. called from line: " . $dbt[1]["line"]     . "\n" .
    "\n"
    ); 
    ');  

test1::a(); 

   ?> 
```

这是**test1.php**

```
<?PHP

class test1
{
    public static function a()
    {
        test2::b();
    }
}

?> 
```

最后是**test2.php**

```
<?PHP

class test2
{
    public static function b()
    {
        if(defined('__DEBUG_EVAL')) eval(__DEBUG_EVAL);   
        echo 'Hello!';
    }   
}

?> 
```

这是**结果**：

```
[13-Apr-2012 14:37:18] 
Parent function file: C:\PHP-GTK\MyProjects\Electre\test1.php
Parent function class: test1
Parent fiunction name: a
Par. fiunc. called from line: 29
Child function file: C:\PHP-GTK\MyProjects\Electre\test2.php
Child function class: test2
Child fiunction name: b
Child fiunc. called from line: 7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:45:21.107

您基本上需要看的是[Observers](http://en.wikipedia.org/wiki/Observer_pattern)。

> **观察者模式**（又名 Dependents，发布/订阅）是一种软件设计模式，其中称为主体的对象维护其依赖者列表（称为观察者），并自动通知它们任何状态更改，通常通过调用其中一个他们的方法。它主要用于实现分布式事件处理系统。观察者也是熟悉的 MVC 架构模式中的关键部分。事实上，观察者模式最初是在 Smalltalk 基于 MVC 的用户界面框架中实现的。[1](http://en.wikipedia.org/wiki/Observer_pattern)

你为什么不试试这里描述的：

[http://devzone.zend.com/1384/observer-pattern-in-php/](http://devzone.zend.com/1384/observer-pattern-in-php/)

# javascript - 获取 DOM 元素的图像数据

> ID：10145676
> 
> 赞同：3
> 
> 时间：2012-04-13T17:42:37.367
> 
> 标签：javascript, html, dom

是否有可能（通过标准 JS 或某些浏览器扩展）获取 DOM 元素的图像数据？

我正在考虑这样的用法：

*   创建一个离屏 DOM 元素
*   用一些 CSS 样式的内容动态填充它
*   获取其图像数据
*   以某种方式使用图像数据：
    *   作为背景（装饰性重复文字）
    *   作为子弹图像（unicode 子弹）
    *   作为 WebGL 纹理（神奇！）
    *   ...

这可以做到吗？有过这样的提议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T17:48:00.233

我能想到的唯一方法是将元素渲染到 HTML5 画布对象。至少很难说。我通过快速谷歌搜索找到的一个这样的渲染引擎可以在以下位置找到：[http ://www.isogenicengine.com/2011/08/19/rendering-html-css-to-canvas/](http://www.isogenicengine.com/2011/08/19/rendering-html-css-to-canvas/)

其他显然存在，包括：

*   [http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)
*   [http://ajaxian.com/archives/crazy-times-rendering-html-in-canvas](http://ajaxian.com/archives/crazy-times-rendering-html-in-canvas)

绘制到画布后，您可以使用以下方法检索可用于设置`src`图像和 css 的属性的数据 url，并且很可能是 WebGL 纹理。

```
var canvas = document.getElementById("mycanvas");
var img = canvas.toDataURL("image/png"); 
```

此外，如果您专门针对 Firefox，它们具有完全符合您要求的专有功能。 [https://developer.mozilla.org/en/Drawing_Graphics_with_Canvas#Rendering_Web_Content_Into_A_Canvas](https://developer.mozilla.org/en/Drawing_Graphics_with_Canvas#Rendering_Web_Content_Into_A_Canvas)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:49:57.040

使用[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)获取画布上的元素，然后使用[http://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)将其转换为“数据：” URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-02T14:41:14.150

您可能想查看[dom-to-image](https://github.com/tsayen/dom-to-image)库，以了解您计划中的图像生成部分。

```
var parent = document.getElementById('my-node-parent');
var node = document.getElementById('my-node');

domtoimage.toPng(node).then(function (pngDataUrl) {
    parent.removeChild(node);
    for (var i = 0; i < 10; i++) {
        var img = new Image();
        img.src = pngDataUrl;
        parent.appendChild(img);
    }
}); 
```

这是[jsfiddle](http://jsfiddle.net/tsayen/8h13tmcj/2/)

# java - 在java中计算沿向量从点到曲面的距离？

> ID：10145679
> 
> 赞同：0
> 
> 时间：2012-04-13T17:42:52.420
> 
> 标签：java, 3d, linear-algebra, scientific-computing

我需要计算从点 [xyz] 到物体表面的距离（在这个阶段是一个简单的矩形，但后来是任意形状）沿 [0 0 1]。

我可以这样做，使用单位向量将曲面定义为平面，然后进行线性代数计算以找到沿 [0 0 1] 的所有平面的距离，但作为编码和 Java 的新手，我想看看是否有一个库或更有效的方法，因为从长远来看，我可能有复杂的凸对象，所以需要小心使用标准实践（所以我可以使用其他东西来生成平面！）

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:03:00.273

如果您使用[Point3D](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/J3D_1_3_API/j3dapi/javax/vecmath/Point3d.html)来表示您的点，那么您有一个距离方法可以用来计算距离。所以问题是你想要表面上的哪个点？如果您只需要表面上的任何点，您可以选择其中一个角点并使用它来计算距离。

# javascript - jQuery子级返回一个布尔值？

> ID：10145681
> 
> 赞同：1
> 
> 时间：2012-04-13T17:42:53.233
> 
> 标签：javascript, jquery

我遇到了这条线，我可以猜到它在做什么，但不应该`length > 0`在孩子身上有 a 还是它总是会返回/可以用作布尔值？

或者 jQuery 的孩子是否返回一个布尔值，或者这个人是否依赖于返回的孩子的存在？

```
append(($(this).children()) ? '<div class="vAlignWrapper" style="overflow: hidden;">' + $(this).html() + '</div>' : '&nbsp;'). 
```

我正在尝试调试一个大的 JS 文件，并且我正在尝试确保每一行都完成它应该做的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T17:44:29.147

像大多数 jQuery 方法一样，`children()` [返回一个用于链接的 jQuery 对象](http://api.jquery.com/children/)。如果没有子对象，则返回一个空的 jQuery 对象。

如果您想知道是否存在任何子节点，则必须使用该`.length`属性，如果有则返回大于零的数字，如果没有则返回零。

所以，是的——看来原始代码不正确。`$(this).children()`将始终考虑作为布尔值进行测试`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:45:49.297

jQuerys .children [()](http://api.jquery.com/children/)函数将返回一个 jQuery 对象。这将永远是一个“真实”的价值。

如果你想检查是否有孩子，你应该使用：

```
... ($(this).children().length > 0) ? ... 
```

或者，如果你喜欢编写神秘代码，这将完成同样的事情：

```
... $(this).children().length ? ... 
```

# javascript - 根据输入的字段调用不同的函数

> ID：10145682
> 
> 赞同：0
> 
> 时间：2012-04-13T17:43:02.297
> 
> 标签：javascript, html

我需要创建一个计算器来调用不同的函数，具体取决于哪个字段中有条目。
“initial_hosts”必须有一个条目，然后用户可以在“Time”或“Num”中输入值，但不能同时输入（错误消息）。

如果单击“计算”时在“时间”中输入了一个值，我希望它调用函数 number()，如果“Num”调用函数 timeCal()

```
<script language="javascript" type="text/javascript">
  function timeCal(){
    a=Number(document.calculator.initial_hosts.value);
    b=Number(document.calculator.Num.value);
    // Example of cal
    c=a*b;
    document.calculator.total.value=c;
  }
</script>

<script language="javascript" type="text/javascript">
  function number(){
    a=Number(document.calculator.initial_hosts.value);
    b=Number(document.calculator.Time.value);
    // Example of cal
    c=a*b;
    document.calculator.total.value=c;
  }
</script>

<div class="figure2"> 
  <form name ="calculator" class="form">
    <p>You can use the calculator below to see the approximate number of infected hosts after a given amount of time </p>
    <label for="Fname">initial hosts:</label><br/>
    <input type="text" name="initial_hosts"/><br/>

    <label for="Fname">Trigger Date:</label><br/>
    <input type="text"  id="TTime" value="" />
    <br/><br/>

    <font face="arial, helvetica" size="2" >Note: Enter the time space or the number of targets </font><br/>

    <label for="Time">Enter Time:</label><br/>
    <input type="text" name="Time"/><br/>

    <label for="Num">Target Number :</label><br/>
    <input type="text" name="Num"/><br/>

    <label for="total">Outcome:</label><br/>
    <input type="text" name="total"/><br />
    <br/>

    <p><input type="button" style="height: 35px; width: 100px" value="Calculate"  onclick="javascript:timeCal();"/>
  </form>
</div> 
```

我不知道我该怎么做，提前谢谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:52:21.077

```
<script language="javascript" type="text/javascript">  
    function callAppropriateFunction(){
        numValue=document.calculator.Num.value;
        timeValue=document.calculator.Time.value;  
        if(numValue!='')
            number();
        else if(timeValue!='')
            timeCal();
        else
            alert("please select either number or time");
    }
</script>

<input type="button" style="height: 35px; width: 100px" value="Calculate"  onclick="javascript:callAppropriateFunction();"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:48:26.423

创建一个名为的新函数`calculate();`，然后从那里检查哪个字段中有数据。

```
function calculate() {
   if (document.calculator.time.value != ""){
       timeCal();
   }else {
       number();
   }
} 
```

并更改您的按钮以运行计算（）；

```
<input type="button" style="height: 35px; width: 100px" value="Calculate"  onclick="javascript:calculate();"/> 
```

# php - 原则 2：按具有复合主键的实体查找

> ID：10145683
> 
> 赞同：2
> 
> 时间：2012-04-13T17:43:08.977
> 
> 标签：php, database, doctrine-orm, associations, doctrine-query

我有两个实体类`Product`和`OrderEntry`，定义如下（为了紧凑而省略了一些注释）：

```
class Product {

   /**
    * @Id
    */
   protected $id;

   /**
    * @Column()
    * @Id
    */
   protected $prodNumber;

   /**
    * @Column()
    * @Id
    */
   protected $group;

   // more cols here
}

class OrderEntry {

   // more cols here

   /**
    * @ManyToOne(targetEntity="Product")
    * @JoinColumns({
    *      @JoinColumn(name="prodNumber", referencedColumnName="prodNumber"),
    *      @JoinColumn(name="group", referencedColumnName="group")
    * })
    */
   protected $Product;
} 
```

现在我想通过与查询生成器关联的 Product 来查找 OrderEntry。对我来说最合乎逻辑的事情是：

```
class OrderEntryRepository extends EntityRepository  {

    public function findByProduct($product) {
       $qb = $this->getQueryBuilder('o');
       $qb->where($qb->expr()->eq('o.Product', '?1')
          ->setParameter(1, $product)
          ->setMaxResults(1);
       return $qb->getQuery()->execute(); 
    }
} 
```

但是，这会引发一个异常，说明

> 不支持到具有复合主键的实体的单值关联路径表达式。在查询中显式命名复合主键的组件。

如何明确命名组件？我知道我可以通过 JOIN 来做到这一点，但在这种情况下我对 Product 没有用处，它只会使查询变得更加昂贵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:32:56.323

您无法避免使用当前映射加入 products 表：

```
public function findByProduct($product) {
   $qb = $this->getQueryBuilder('o');
   $qb
      ->join('o.Product', 'p')
      ->where('p.prodNumber = ?1')
      ->setParameter(1, $product->getProdNumber())
      ->andWhere('p.group = ?2')
      ->setParameter(2, $product->getGroup())
   ;
   return $qb->getQuery()->getOneOrNullResult(); 
} 
```

您可以向 OrderEntry 添加单独的属性，这将使用与 JoinColumns 相同的列，例如：

```
/**
 * @Column(name="prodNumber")
 */
protected $prodNumber; 
```

然后你可以在条件下使用它们：

```
... 
->where('o.prodNumber = ?1')
->setParameter(1, $product->getProdNumber()
... 
```

# xcode - 即时语言翻译器

> ID：10145690
> 
> 赞同：0
> 
> 时间：2012-04-13T17:43:49.887
> 
> 标签：xcode, ios5

我正在为 iPhone 开发一个新的应用程序，该应用程序必须支持两种语言：法语和佛兰芒语。

如果我将实现我的数据库并以两种语言存储相同的数据，那将是一个数据冗余问题，这不是数据库的目标。正确的？

所以，我正在考虑一个即时翻译器，例如，数据库上的默认语言和数据是法语，如果用户选择 Flamand 语言，那么从数据库中检索到的所有数据（法语）都将在 Flamand 之前翻译显示给用户。

这是一个好方法吗，如果是的话，iOS SDK上有翻译器吗？这是最佳解决方案吗？

等待您的建议。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:31:11.750

为了补充 Dr.Kameleon 的答案，我建议您将两种语言都存储在数据库中。2种语言的相同内容是不同的内容。但我也建议您进行适当的手动翻译，不要对任何专业级应用程序使用自动翻译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T18:17:09.297

你为什么不尝试一些像谷歌翻译这样带有公开可用 API 的服务呢？

**提示：** *我不认为谷歌的服务仍然对公众开放（显然是因为广泛的滥用，但我认为 Altavista 有类似的替代方案）*

* * *

**更新 ：**

*   [Google Translate API v2](http://code.google.com/apis/language/translate/overview.html)（据我所知，仅限付费服务......）
*   [必应翻译 API](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis)（看似免费）

未（个人）测试：

*   [Mygengo 翻译 API](http://mygengo.com/api/)
*   [Speaklite 翻译 API](http://www.speaklike.com/access-professional-translation-via-api/)
*   [WebServiceX 翻译 API](http://www.webservicex.net/ws/wsdetails.aspx?wsid=63)

还有一个访问**Altavista 的 BabelFish**翻译服务的示例脚本：

[http://code.activestate.com/recipes/64937-babelizer-api-for-simple-access-to-babelfishaltavi/](http://code.activestate.com/recipes/64937-babelizer-api-for-simple-access-to-babelfishaltavi/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T18:31:38.130

这取决于您要优化的内容。将信息存储两次并不像最初看起来那样糟糕。例如，在许多情况下，为了提高计算效率，在数据库中存储冗余信息是值得的，这很可能就是其中之一。

*   以两种语言存储数据的主要成本是......好吧，您正在以两种语言存储数据。这意味着您将占用大约两倍的空间来存储文本块。如果您有足够的文本，存储空间实际上对您来说是个问题，那么这显然是一个问题。如果你不这样做，那真的不是。

另一方面，存储两者有一些好处。

*   准确性。没有一个自动翻译器能像一个相当称职的人工翻译器那样擅长提供高质量的翻译。当然，如果您不雇用人工翻译，并且无论如何都只是依赖机器翻译，那么这不是什么大问题。

*   速度。自动翻译在处理大型文档的时间方面并非完全微不足道。花费在翻译上的 CPU 周期是没有花费在其他事情上的周期，并且因为这些周期必须在请求和响应之间花费，所以无论如何它都会使您的延迟变得更糟。如果您有大量的 CPU 周期并且您输出的文本块相对较小，那么这不是问题。

*   安全性和可靠性。如果您打算使用外部服务为您运行这些翻译，突然间您的服务依赖于该服务来运行，并且每当您外出进行任何事情时，您都会打开一个或两个潜在的安全漏洞（多么糟糕这些漏洞取决于您的工作方式，但它们会在那里。）或者，如果您打算在内部运行翻译，您必须保持翻译服务正常运行，这可能不涉及安全问题，但会涉及额外的维护。

所以......虽然您的案例可能是您只想以一种语言保存它的情况（特别是如果您有很多文本要处理，它会以小块的形式出现，而您不会*非常*关心您的弗拉芒语用户的用户体验）它也很可能不是。

# c - 指向常量函数的指针是什么意思？

> ID：10145693
> 
> 赞同：32
> 
> 时间：2012-04-13T17:44:00.343
> 
> 标签：c, function-pointers, const-correctness

指针可以声明为指向可变（非常量）数据或指向常量数据的指针。
指针可以定义为指向函数。

我和我的同事正在讨论将“const”与指针一起使用，并且提出了关于使用`const`函数指针的问题。

这里有一些问题：

1.  指向常量函数的指针与指向非常量函数的指针的含义是什么？
2.  函数可以是 const 吗？
3.  函数可以是非常量（可变）吗？
4.  传递函数指针的正确（安全）语法是什么？

## 编辑 1：函数指针语法

```
typedef void (*Function_Pointer)(void); // Pointer to void function returning void.

void function_a(Function_Pointer p_func); // Example 1.
void function_b(const Function_Pointer p_func); // Example 2.
void function_c(Function_Pointer const p_func); // Example 3.
void function_d(const Function_Pointer const p_func); // Example 4. 
```

上述声明是将函数指针视为指向内部类型的指针的示例。

数据、变量或内存指针允许上述组合。
所以问题是：函数指针是否可以具有相同的组合以及指向 const 函数的指针是什么意思（例如示例 2）？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-13T17:59:46.907

在 C 中，没有函数存在`const`或其他情况，因此指向 const 函数的指针是没有意义的（不应该编译，尽管我没有使用任何特定的编译器进行检查）。

请注意，尽管有所不同，但您可以拥有指向函数的 const 指针、指向返回 const 的函数的指针等。基本上除了函数本身之外的所有内容都可以是 const。考虑几个例子：

```
// normal pointer to function
int (*func)(int);

// pointer to const function -- not allowed
int (const *func)(int);

// const pointer to function. Allowed, must be initialized.          
int (*const func)(int) = some_func;

// Bonus: pointer to function returning pointer to const
void const *(*func)(int);

// triple bonus: const pointer to function returning pointer to const.
void const *(*const func)(int) = func. 
```

至于将指向函数的指针作为参数传递，这非常简单。您通常只想传递一个指向正确类型的指针。但是，指向任何类型函数的指针都可以转换为指向其他类型函数的指针，然后变回其原始类型，并保留原始值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T17:54:08.903

根据 C 规范（[C99](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)，第 6.7.3 节）：

> 与限定类型关联的属性仅对作为左值的表达式有意义。

当规范说“限定类型”时，它表示用 , 或 关键字定义`const`的`restrict`东西`volatile`。Snice 函数不是左值，函数上的`const`关键字没有意义。您可能正在查看某种特定于编译器的扩展。如果您尝试将函数声明为`const`.

您确定您正在查看指向常量函数的指针而不是指向函数的常量指针（也就是说，它是*指针*，`const`而不是函数）？

关于#4：有关创建、传递和使用函数指针的有用概述，请参阅[本指南。](http://www.newty.de/fpt/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T17:48:30.340

在 C 中，没有`const`函数这样的东西。 `const`是一个类型限定符，因此只能用于限定一个类型，而不是一个函数。也许您的意思是指向函数的 const 指针或指向函数的非常量指针？

在 C++ 中，方法可以是`const`. 如果一个方法是`const`，这意味着在您调用该方法之后，包含该方法的对象将处于与您调用该方法之前相同的状态（没有任何实例变量[1]被修改）。因此，您可以指向一个 const 方法和一个非常量方法，并且这些方法是不同的。

您可以将参数列表中的函数指针作为`retType (*variableName)(arguments)`.

[1] 除非他们是`mutable`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T18:24:47.113

如果您在 GCC 的世界中，那么在 C 中，函数*可以*是！`const`可以`const`通过使用附加到函数和其他符号声明的属性来声明函数。它基本上用于向编译器提供有关函数作用的信息，即使它的主体不可用，以便编译器可以对其进行某种优化。

常数函数通常用函数来定义`pure`。

> 纯函数是基本上没有副作用的函数。这意味着纯函数返回一个基于给定参数和全局内存计算的值，但不会影响任何其他全局变量的值。纯函数不能合理地缺少返回类型（即具有 void 返回类型）。

现在我们可以定义什么是 const 函数，

> **不访问全局内存而只访问其参数的纯函数称为常量函数**。这是因为与全局内存状态无关的函数在给定相同参数时将始终返回相同的值。因此，返回值直接且排他地从给定参数的值中导出。

这里`const`并不暗示任何关于函数可变性的事情。但它是一个不涉及全局内存的功能。您可以将普通指针分配给此类函数。无论如何，代码区域通常（暂时忘记自我修改代码）是 RO，您不能通过普通指针对其进行修改。

在此处阅读完整的[有见地的文章](http://lwn.net/Articles/285332/)。

因此，当谈到**GCC 常量函数**时，我们谈论的是优化而不是函数可变性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T18:05:56.360

> 1.指向常量函数的指针与指向非常量函数的指针是什么意思？

const 和 non-const 没有区别：函数本身是不可修改的

注意：在 C++ 中，如果函数是类的成员函数，则 const 表示该函数内对象的状态不能更改（分配给成员变量，调用非 const 成员函数）。在这种情况下， const 关键字是成员函数签名的一部分，因此在指针方面有所不同。

> 2.函数可以是const吗？

往上看。

> 3.函数可以是非常量（可变）吗？

往上看

> 4.传递函数指针的正确（安全）语法是什么？

所有指向自由函数的指针都可以转换为任何其他指向自由函数的指针（即它们的大小相同）。因此，您可以为（假设的）函数定义一个类型：`void f();`并将所有函数指针转换为该类型以进行存储。 **请注意**，您不应该通过这种通用类型调用该函数：您需要将其强制转换为原来的指向函数的指针类型，否则您会得到未定义的行为（并且很可能会崩溃）

对于 C++：不保证指向成员函数的指针可转换为指向自由函数的指针

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T18:15:33.803

1\. 在语法上没有地方可以放置“const”来使函数的*内容*保持不变。

无论您是否有 const，您都会遇到“函数不是左值”错误。

```
typedef void (* FUNC)(void);
FUNC pFunc;
pFunc = 0;     // OK
*pFunc = 0;    // error:  Cannot assign to a function (a function is not an l-value)

typedef void (* const FUNC)(void);
FUNC pFunc;
pFunc = 0;     // error  (const)
*pFunc = 0;    // error:  Cannot assign to a function (a function is not an l-value)

typedef void (const * FUNC)(void);   // error:  <cv-qualifier>  (lol?) 
```

2 & 3\. 函数指针 - 是的.. 函数内容，看起来不像。

4\. 我不认为有任何方法可以使传递函数指针更安全。对于世界上所有的常量，您唯一可以保护的是“SetCallback”不能更改它自己的参数本地副本。

```
typedef void (* const FUNC)(void);
void SetCallback(const FUNC const pCallback)
{
  FUNC pTemp = pCallback;   // OK  (even though pTemp is not const!!)
  pCallback = 0;            // error  (const)
} 
```

# jpa - 使用 JPA 从带有 oneToMany 注释的辅助表中获取数据

> ID：10145698
> 
> 赞同：0
> 
> 时间：2012-04-13T17:44:30.210
> 
> 标签：jpa

我有一个查询，我试图从表中获取数据。我有指向其他表的外键，我也希望该数据返回，除非我希望它在我将返回的实体的集合中......

```
try
    {
        System.out.println("testing 1..2..3");
        listQL = emf.createNamedQuery("getQuickLaunch").getResultList();
        System.out.println("What is the size of this list: number "+listQL.size());
        qLaunchArr = listQL.toArray(new QuickLaunch[listQL.size()]);            

    } 
```

这适用于获取初始表，但其他集合似乎没有填充。至少在我拥有的测试视图窗口中......（我正在使用 WID）......

这是我的JPA...

```
@OneToMany(mappedBy="quickLaunchId", cascade=CascadeType.ALL)
private List<QuickLaunchPerm> quickLaunchPermCollection;

@OneToMany(mappedBy="quickLaunchId", cascade=CascadeType.ALL)//fetch=FetchType.EAGER)
private List<QuickLaunchProvider> quickLaunchProviderCollection;

@OneToMany(mappedBy="quickLaunchId")//, cascade=CascadeType.ALL)//fetch=FetchType.EAGER)
private List<QuickLaunchDistlist> quickLaunchDistlistCollection; 
```

我需要一个命名查询来实际连接我正在调用的表吗？？？这就是我认为我需要的。

谢谢。

UDPATE：有问题的命名查询

```
@NamedQuery(name="getQuickLaunch", query = "SELECT q FROM QuickLaunch q") 
```

那么我是否需要为我想要拉回的每个其他集合添加一个内部连接（或左连接）？

# wpf - wpf绑定列表、列表框和控件双向

> ID：10145699
> 
> 赞同：0
> 
> 时间：2012-04-13T17:44:35.630
> 
> 标签：wpf, list, binding, listbox, two-way-binding

在文本框中更新列表框项目文本后，有什么方法可以更新它？如果可能的话，我只想用绑定来做。列表框正在从列表中读取，但列表没有更新，所以它永远不会改变，除非我将新项目添加到列表中。这是代码

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <DockPanel VerticalAlignment="Top" HorizontalAlignment="Left">
        <Button Name="dodaj" Width="40" Margin="5" Click="dodaj_Click">Dodaj</Button>
        <Button Name="usun" Width="40" Margin=" 5" Click="usun_Click">Usuń</Button>
    </DockPanel>
    <DockPanel HorizontalAlignment="Left" VerticalAlignment="Center" DataContext="{Binding ElementName=lista, Path=osoba, Mode=TwoWay}">
        <ListBox Name="lb" ItemsSource="{Binding}" Width="200" Height="230">
        </ListBox>
    </DockPanel>
    <DockPanel HorizontalAlignment="Right" VerticalAlignment="top">
        <WrapPanel>
        <StackPanel>
        <Label>Imię</Label>
        <Label>Nazwisko</Label>
        <Label>Email</Label>
        <Label>Telefon</Label>
        </StackPanel>
            <StackPanel DataContext="{Binding ElementName=lb, Path=SelectedItem, UpdateSourceTrigger=LostFocus}" TextBoxBase.TextChanged="zmiana">
                <TextBox Width="200" Margin="3" Name="imie" Text="{Binding Path=imie}"></TextBox>
                <TextBox Width="200" Name="nazwisko" Text="{Binding Path=nazwisko}"></TextBox>
                <TextBox Width="200" Margin="3" Name="email" Text="{Binding Path=email}"></TextBox>
                <TextBox Width="200" Name="telefon" Text="{Binding Path=telefon}"></TextBox>
            </StackPanel>
        </WrapPanel>
    </DockPanel>
</Grid> 
```

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;

namespace WpfApplication1
{

/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        lista.Add(new dane("imie1", "nazwisko1", "email1", "tel1"));
        lista.Add(new dane("imie2", "nazwisko2", "email2", "tel2"));
        lb.DataContext = lista;
    }
    public class dane : INotifyPropertyChanged
    {
        public dane(string imie, string nazwisko, string email, string telefon)
        {
            this._imie = imie;
            this.nazwisko = nazwisko;
            this.osoba = nazwisko + " " + imie;
            this.email = email;
            this.telefon = telefon;

        }
        private string _imie;
        public string imie
        {
            set
            {
                _imie = value;
                OnPropertyChanged("Imie");
            }
            get
            {
                return _imie;
            }
        }
        public string nazwisko { set; get; }
        public string osoba { set; get; }
        public string email { set; get; }
        public string telefon { set; get; }
        public override string ToString()
        {
            return osoba;
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChanged(string value)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(value));
            }
        }

    }
    public ObservableCollection<dane> lista = new ObservableCollection<dane>();

    //public List<dane> lista = new List<dane>();
    /*public ObservableCollection<dane> lista
    {
        get { return (ObservableCollection<dane>)GetValue(listaProperty); }
        set { SetValue(listaProperty, value); }
    }

    public static readonly DependencyProperty listaProperty =
        DependencyProperty.Register("lista", typeof(ObservableCollection<dane>), typeof(Window), new UIPropertyMetadata(null));
    */
    private void dodaj_Click(object sender, RoutedEventArgs e)
    {
        lista.Add(new dane("...", "", "", ""));
        MessageBox.Show(lista[0].ToString());

    }

    private void usun_Click(object sender, RoutedEventArgs e)
    {
        lista.RemoveAt(lb.SelectedIndex);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:51:28.800

列表框通过 ToString() 表示形式显示您的 dane 类的实例。您应该`osoba`直接使用 将列表框绑定到属性`DisplayMemberPath`。而且 osoba 财产的价值也没有更新，然后你改变了 imia 和 nazwisko。您应该在它的 getter 上重新计算它并引发 PropertChanged("osoba") 然后属性 nazwisko 或 imia 正在被更改。

# html - 如何在 ajax 读取 Div 内部内容？

> ID：10145700
> 
> 赞同：0
> 
> 时间：2012-04-13T17:44:45.557
> 
> 标签：html, sql, ajax, json

我正在尝试通过从 Html 页面发送的变量列表来更新 sql 数据库。一些数据被正确发送，而另一些则没有。我将列表放在一个 div 中，该 div 分为两部分：“h1”和另一个“Div”。标头的数据全部正确发送，但第二个 div 的正文本身根本没有发送。这是数据所在的 Div：

```
 $('#Classes').append('<div> <h1 class = "flip" wpID="' + subjects[i].Wkp_ID + '" lessonID="' + subjects[i].Ttb_lessonID + '" Date="' + Datecoming + '">' + subjects[i].sbj_Name + " Class:" + subjects[i].Ttb_Class + '</h1><div id ="NewBody" class="panel" contenteditable>' + subjects[i].Wkp_Body + '</div> </div>'); 
```

这就是我在 ajax 部分阅读它们的方式：

```
 var WeekPlan = [];
    $('#Classes div').each(function (index) {
        var header = $(this).children('h1');
        var WeekBody = $(this).children('div').val();
        var wpID = header.attr('wpID');
        var lessonID = header.attr('lessonID');
        var Wkp_Date = header.attr('Date');

        WeekPlan[index] = { "Wkp_ID": wpID, "Wkp_Date": Wkp_Date, "Wkp_Body": WeekBody, "Wkp_lesson": lessonID }; 
        }); 
```

Wkp_ID、Wkp_Date、Wkp_Lesson 是对的，但是 Wkp_Body 只是返回一个空字符串。那么你知道为什么会发生这种情况吗？我怎样才能真正阅读身体？很可能问题出在这一行：

```
 var WeekBody = $(this).children('div').val(); 
```

但是我怎样才能正确访问它呢？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:01:41.623

如果有人需要，这对我有用：

创建 div：

```
 $('#Classes').append('<div class="BigDiv"> <h1 class = "flip" wpID="'+ subjects[i].Wkp_ID + '" lessonID="' + subjects[i].Ttb_lessonID + '" Date="' + Datecoming + '">' + subjects[i].sbj_Name + " class:" + subjects[i].Cls_Name + '</h1><div class="panel" contenteditable>' + subjects[i].Wkp_Body + '</div> </div>'); 
```

# opengl - JOGL/OpenGL：“\n”（换行符）不适用于文本渲染

> ID：10145701
> 
> 赞同：2
> 
> 时间：2012-04-13T17:44:46.400
> 
> 标签：opengl, newline, glut, jogl

我有这个功能可以在我的画布上呈现文本：

```
public void renderString(String s, int x, int y){
        gl.glMatrixMode(GL.GL_PROJECTION);
        gl.glPushMatrix();
        gl.glLoadIdentity();
        gl.glOrtho(0,WIDTH,0,HEIGHT,-1, 1);
        gl.glMatrixMode(GL.GL_MODELVIEW);
        gl.glPushMatrix();
            gl.glLoadIdentity();
            gl.glTranslatef(x,y,0);
            gl.glScalef(textScalingFactor, textScalingFactor, 1f);
            glut.glutStrokeString(GLUT.STROKE_ROMAN, s);
            gl.glMatrixMode(GL.GL_PROJECTION);
            gl.glPopMatrix();
        gl.glMatrixMode(GL.GL_MODELVIEW);
        gl.glPopMatrix();
} 
```

问题是，换行符 (\n) 不起作用并且以下所有字符串：

```
String s1 = "bla"+"\n"+"bla";
String s2 = "bla\nbla";

char newLine = new char(10);
String s3 = "bla"+newLine+"bla"; 
```

呈现为：

> 废话

有任何想法吗？

PS Tab (\t) 也无法正常工作。

PPS glutBitmapString、glutBitmapCharacter、glutStrokeCharacter 也存在同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:02:27.753

看起来它[只是没有实现](http://jogamp.org/git/?p=jogl.git;a=blob;f=src/jogl/classes/com/jogamp/opengl/util/gl2/GLUT.java;h=010ce669918e45e3ccc138d53f9f8461c74e9426;hb=HEAD)（*假设您的示例运行此代码......*）翻译总是转移`x`，从不`y`。我稍微缩短了以下代码。

```
public void glutStrokeString(int font, String string) {
    /* setup */
    for (int pos = 0; pos < len; pos++) {
        /* single char setup */
        StrokeCharRec ch = fontinfo.ch[c];
        if (ch != null) {            
            /* draw strokes */
        }
        gl.glTranslatef(ch.right, 0.0f, 0.0f);
    }
} 
```

其他方法很可能存在相同的问题。

无论如何，您可以自己拆分字符串，以增加的`y`偏移量绘制每个部分，并用`\t`一些额外的`x`偏移量替换。

# javascript - 将函数作为参数传递

> ID：10145702
> 
> 赞同：0
> 
> 时间：2012-04-13T17:44:57.800
> 
> 标签：javascript

我有两个函数，将其中一个作为参数传递，例如：

```
var a = function(f)
{
  // some code
  f();
};

var b = function()
{
};

a(b); // works great, the function a is executed, then the function b is executed 
```

现在我需要将它扩展到树函数，例如：

```
var a = function(f)
{
  // some code
  f();
};

var b = function(f)
{
  // some code
  f();
};

var c = function()
{
};

a(b(c)); // but it does not work. b(c) words like a method and get executed right on the instruction. 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:47:24.060

传递一个执行的包装函数`b(c)`：

```
a(function() {
    b(c);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:47:31.840

听起来您想使用回调类型的模式。您可以执行以下操作，而不是简单地传递函数的结果：

```
var a = function(callback)
{
    // Do Stuff
    callback();
}

var b = function(callback)
{
    // Do Stuff
    callback();
}

var c = function() { } 
```

您的代码最终看起来像这样：

```
a(function()
{
   b(function()
   {
       c();
   });
}); 
```

实际上，您在方法完成后传递另一个函数来执行。在上述场景中，我只是提供了两个匿名函数作为回调参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T17:47:57.193

```
function a(f){
  // code
  f()
}
function b(f){
  // code
  a(f())
}
function c(){
  //code
}

b(c); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T17:48:02.573

一种方法是使用匿名函数：

```
a(function() { b(c); }); 
```

# javascript - 查找对象并根据搜索条件返回它

> ID：10145707
> 
> 赞同：0
> 
> 时间：2012-04-13T17:45:30.310
> 
> 标签：javascript, arrays, javascript-objects

我一直在网上搜索一整天，我似乎无法找到我的答案。（而且我知道必须有一种方法可以在 javascript 中执行此操作）。

基本上，我希望能够搜索对象数组并返回包含我需要的信息的对象。

例子：

每次有人连接到服务器时：

```
var new_client = new client_connection_info(client_connect.id, client_connect.remoteAddress, 1);

function client_connection_info ( socket_id, ip_address, client_status) {
    this.socket_id=socket_id;
    this.ip_address=ip_address;
    this.client_status=client_status; // 0 = offline 1 = online
}; 
```

现在，我希望能够搜索“client_connection.id”或“ip_address”，然后调出该对象并能够使用它。例子：

```
var results = SomeFunction(ip_address, object_to_search);
print_to_screen(results.socket_id); 
```

我是 javascript 新手，这对我有很大帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:49:03.150

你试过什么？您是否考虑过从 JSON 转换数据并像在字典中一样查找它？（如果你不知道，那看起来像 object['ip_address']）

jQuery 对此 jQuery.parseJSON(object) 有一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:53:19.030

假设我正确理解了您的问题，听起来您只是想要一个选择器方法：

```
 function where(array, predicate)
 {
     var matches = [];
     for(var j = 0; j < array.length; j++)
        if(predicate(j))
           matches.push(j);

     return matches;
 } 
```

然后你可以简单地这样称呼它：

```
 var sample = [];

  for(var j = 0; j < 10; j++)
     sample.push(j);

  var evenNumbers = where(sample, function(elem)
  {
       return elem % 2 == 0;
  }); 
```

如果您想查找特定项目：

```
 var specificguy = 6;

  var sixNumber = where(sample, function(elem)
  {
       return elem == specificguy;
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:17:26.577

您将需要遍历数组，并在找到所需对象时停止。

```
var arr = [new_client, new_client2, new_client3]; // array of objects
var found; // variable to store the found object
var search = '127.0.0.1'; // what we are looking for
for(var i = 0, len = arr.length; i < len; i++){ // loop through array
    var x = arr[i]; // get current object
    if(x.ip_address === search){ // does this object contain what we want?
        found = x;  // store the object
        break; // stop looping, we've found it
    }
} 
```

# delphi - 为什么ClientDataSet 的Locate 方法找不到存在的记录？

> ID：10145711
> 
> 赞同：1
> 
> 时间：2012-04-13T17:45:39.597
> 
> 标签：delphi, tclientdataset

每隔一段时间，以我无法预测的方式，代码行

```
if not CDS.Locate('Name',aName,[]) then ... 
```

解析为真（*即*，无法`aName`在“名称”字段中找到字符串），即使我知道有*记录*。我可以关闭并重新打开应用程序，加载完全相同的文件，运行完全相同的命令——换句话说，重复我的所有操作——并让下一次一切都按预期工作。以及之后的时间。我什至可以重新打开同一个文件，代码将按预期运行......我不知道问题是什么，坦率地说，像这样断断续续的东西我什至不知道去哪里找！

关于从哪里开始有什么想法吗？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-12T14:52:02.040

在 delphi XE7 中有一个严重的问题 TClientDataSet.Locate 并且它不适用于某些字段查看[QualityCentral [127703]](http://qc.embarcadero.com/wc/qcmain.aspx?d=127703)

# php - 使用复选框、PHP 和 MySQL 删除多行

> ID：10145717
> 
> 赞同：1
> 
> 时间：2012-04-13T17:45:50.560
> 
> 标签：php, mysql, drop-down-menu, sql-delete

正如标题所示，我想从我的数据库中删除多行。为此，我有两个文件，一个前端文件生成一个表格，显示用户可以删除的文件，这些文件是使用复选框选择的。

后端文件是处理选中的复选框，并使用 SQL 语句删除选中的文件。

我遇到的问题是将所选文件的 id 从前端传递到后端。这两个文件的代码如下：

**前端**

```
//Build Table Query
$query="SELECT * FROM documents";
$result= mysqli_query($con, $query) or die("Invalid query");

$count = mysqli_affected_rows($con); 

?>
<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<td><form name="form1" method="post" action="deletefilesback.php">
<table width="800" border="0" cellpadding="3" cellspacing="2" bgcolor="#CCCCCC">
<tr>
<td colspan="5" bgcolor="#FFFFFF" align="center"><strong>Delete Multiple         Files</strong></td>
</tr>
<tr>
<td align="center" bgcolor="#FFFFFF">#</td>
<td align="center" bgcolor="#FFFFFF"><strong>Id</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Title</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Description</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>File Location</strong></td>
</tr>
<?php
while($row = mysqli_fetch_array($result)){
?>
<tr>
<td align="center" bgcolor="#FFFFFF"><input name="checkbox[]" type="checkbox"  id="checkbox[]" value="<?php echo $rows['id']; ?>"></td>
<td bgcolor="#FFFFFF"><?php echo $row['id']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $row['title']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $row['description']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $row['doc_link']; ?></td>
</tr>
<?php
}
?>
<tr>
<td colspan="5" align="center" bgcolor="#FFFFFF"><input name="delete" type="submit"   id="delete" value="Delete Files"></td>
</tr>
</table>
</form>
</td>
</tr>
</table> 
```

**后端**

```
$delete = $_POST['checkbox'];

//Then do what you want with the selected items://
foreach ($delete as $id) {

$query="DELETE FROM documents WHERE id = '".$id."'";
$result= mysqli_query($con, $query) or die("Invalid query");

}
//Show that the items have been successfully removed.//
if (mysqli_affected_rows($con) > 0) {
echo '<p>The selected items have been successfully deleted.</p>';
} else {
echo '<p>An error has occurred while processing your request</p>';
}
?> 
```

请注意，一旦这个工作正常，我将使用 unlink 函数使用前端表的 doc_link 部分删除服务器上的文件。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T17:54:50.930

在html页面中这样做

```
<input name="checkbox[<?php echo $row['id']?>]" 
```

在后端这样做

```
foreach ($delete as $id => $val) {
    if($val=='checked'){
        $query="DELETE FROM documents WHERE id = '".$id."'";
        $result= mysqli_query($con, $query) or die("Invalid query");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:00:41.890

** MYSQL 代码 ** 描述：此代码最初创建要使用的数据库。在 MySQL 终端中：

```
`CREATE database `tester`;` 
```

现在，为该数据库创建一个表：

```
`USE tester;`

`CREATE TABLE `test_mysql` (
`id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
`name` VARCHAR(80) NOT NULL,
`lastname` VARCHAR(80) NOT NULL,
`e_mail` VARCHAR(100) NOT NULL)
ENGINE = MYISAM;` 
```

现在，在新创建的表中插入一些记录：

```
`INSERT INTO `test_mysql`
(`id`, `name`, `lastname`, `e_mail`)
VALUES
(NULL, 'Billly', 'Blueton', 'bb5@phpeasystep.com'),
(NULL, 'Jame', 'Campbell', 'jame@somewhere.com'),
(NULL, 'Mark', 'Jackson', 'mark@phpeasystep.com'),
(NULL, 'Linda', 'Travor', 'lin65@phpeasystep.com'),
(NULL, 'Joey', 'Ford', 'fordloi@somewhere.com'),
(NULL, 'Sidney', 'Gibson', 'gibson@phpeasystep.com');` 
```

接下来，创建一个名为 index.php 的 PHP (HTML) 文件：

** PHP & HTML 代码 **

```
`<h1>Deleting Multiple Records using PHP &amp; MySQL</h1>
<p>&nbsp;</p>
<?php
$host="localhost"; // Host name
$username="root"; // Mysql username
$password=""; // Mysql password
$db_name="tester"; // Changed database name
$tbl_name="test_mysql";
mysql_connect($host, $username, $password)or die("cannot connect");
mysql_select_db($db_name)or die("cannot select DB");
$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);
$count=mysql_num_rows($result);
?>
<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr><td><form name="form1" method="post" action="">
<table width="400" border="0" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC"><tr>
<td bgcolor="#FFFFFF">&nbsp;</td>
<td colspan="4" bgcolor="#FFFFFF"><strong>Delete multiple rows in mysql</strong> </td>           </tr>
<tr><td align="center" bgcolor="#FFFFFF">#</td>
<td align="center" bgcolor="#FFFFFF"><strong>Id</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Name</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Lastname</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Email</strong></td></tr>
<?php while($rows=mysql_fetch_array($result, MYSQL_ASSOC)){ ?>

<tr><td align="center" bgcolor="#FFFFFF">
<input name="checkbox[]" type="checkbox" id="checkbox[]" value="<? echo $rows['id']; ?>">
</td><td bgcolor="#FFFFFF"><?php echo $rows['id']; ?></td><td bgcolor="#FFFFFF">
<?php echo $rows['name']; ?></td><td bgcolor="#FFFFFF"><?php echo $rows['lastname']; ?>    </td>
<td bgcolor="#FFFFFF"><?php echo $rows['e_mail']; ?>
</td></tr>
<?php } ?>
<tr><td colspan="5" align="center" bgcolor="#FFFFFF">
<input name="delete" type="submit" id="delete" value="Delete"></td></tr>
<?php

if(isset($_POST['delete'])){
$checkbox = $_POST['checkbox'];
for($i=0;$i<count($_POST['checkbox']);$i++){
$del_id = $checkbox[$i];
$sql = "DELETE FROM $tbl_name WHERE id='$del_id'";
print $sql;
$result = mysql_query($sql);}

if($result){echo "<meta http-equiv=\"refresh\" content=\"0;URL=index.php\">";}}
mysql_close();
?>
</table></form></td></tr></table>
<p>Record count: <?php echo number_format($count) ?></p>` 
```

# jquery - 如何在 jQuery 中访问新添加的 HTML 元素

> ID：10145727
> 
> 赞同：3
> 
> 时间：2012-04-13T17:46:27.017
> 
> 标签：jquery

这是我的问题的一个例子：

**HTML**

```
<p><a class="clickme" href="#">I would like to say:</a></p> 
```

**jQuery**

```
$("a.clickme").click(function() {
    $('p').append('<div><a href="#" id="say-hello">Hello</a></div>');
});

$("#say-hello").click(function(){
    alert('test hello');
}); 
```

这是示例代码的小提琴：http: [//jsfiddle.net/johnmorris/2UVYd/2/](http://jsfiddle.net/johnmorris/2UVYd/2/)

第一次点击功能触发就好了。但是，警报（或任何其他功能）不会在新附加的元素上触发。我基本上明白附加元素在页面加载时不存在，所以 jQuery 没有“看到”它......因此，第二次点击功能没有触发。

我只是想知道是否有办法解决这个问题。而且，如果是这样，那是什么。我似乎无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T17:48:58.897

您的代码不起作用，因为`$("#say-hello")`当您将其绑定到单击处理程序时，dom 中不存在。

但是，您可以`.on`在下面的语法中使用类似的语法，该语法将查找具有 ID 的元素，该 ID`say-hello`稍后将添加到“p”，

[**演示**](http://jsfiddle.net/2UVYd/4/)

```
 $("p").on('click', '#say-hello', function(){
    alert('test hello');
  }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:58:28.287

您需要等待分配事件，直到元素存在：

```
$("a.clickme").click(function() {
    $('p').append('<div><a href="#" id="say-hello">Hello</a></div>');
    $("#say-hello").click(function(){
        alert('test hello');
    });
}); 
```

请注意，`click`新创建的锚点的分配在另一个`click`回调内部。

@Vega 正在使用另一种称为“委托”的技术，您可以将“say-hello”的点击分配给`p`而不是锚本身。当单击锚点时，事件“冒泡”通过 DOM 并被`p`标记上的事件侦听器捕获。这可以正常工作，但这可能不是委派的正确时间。当您在一个公共容器（例如 UL 中的 LI）内有一组项目时，通常会使用委托，这些项目都必须处理相同的事件。如果您只有一个“打招呼”，那么我建议您不要使用委托。​</p>

如果您需要能够多次单击按钮并将其插入多次，那么委派可能是正确的选择（但您需要停止使用硬编码的 ID）。或者......你可以这样做：

```
$("a.clickme").click(function() {
    $('<div><a href="#" class="say-hello">Hello</a></div>').find('.say-hello')
            .click(function(){
                alert('test hello');
            })
        .end()
        .appendTo('p');
}); 
```

这段代码实际上挖掘了新创建的元素并在附加到 DOM 之前附加了事件。（哦，请注意，我使用的是 className 而不是 id 来表示“say-hello”。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:54:49.237

你也可以试试这个，这样可以避免创建多个具有相同 ID 的 DOM 元素的问题。它通过将 1 到 100 之间的随机数附加到 ID 名称来为每个人提供一个随机 ID：

```
<script>
    $("a.clickme").click(function() {
        var newId = "say-hello" + Math.floor((Math.random()*100)+1);
        $('p').append('<div><a href="#" id="' + newId +'">Hello</a></div>');

        $("#"+newId).click(function(){
            alert('test hello');
        })
    });

</script> 
```

请注意，我在现有`<a>`单击中添加了单击处理程序。

随机数不能保证没有冲突，但可以使范围足够大，这是一个安全的假设。或者只是使用计数器来确保没有 ID 冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:53:18.993

```
jQuery(".your_append_element_class").live('click',function() {
    // Your Code goes here..
}); 
```

# python-3.x - 如何在 Ctrl+Alt+Enter 键绑定上用 Pydev 中的 exec() 替换 execfile()？

> ID：10145731
> 
> 赞同：1
> 
> 时间：2012-04-13T17:47:00.457
> 
> 标签：python-3.x, pydev

Pydev 2.5 和 Python 3.2 中存在一个问题，试图将模块内容“加载到”交互式控制台中：当您按下 Ctrl+Alt+Enter 时，Pydev 会触发 execfile(filename) 而不是 exec(compile(open(filename).read (), filename, 'exec'), globals, locals) - 后者是 Python 3+ 中 execfile() 的替代品...

那么，如何改变这种行为呢？

ETA：更具体一点，事情是这样的：我创建了一个新的 PyDev 模块，比如“test.py”，编写一些简单的函数 def f(n): print(n)，点击 Ctrl+Alt+Enter，然后我选择“当前活动编辑器的控制台”和 Python 3.2 解释器，交互式控制台唤醒，然后我得到这个：

```
>>> import sys; print('%s %s' % (sys.executable or sys.platform, sys.version))
PyDev console: using default backend (IPython not available).
C:\Program Files (x86)\Python\3.2\python.exe 3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)]

>>> execfile('C:\\testy.py')
>>> f(1)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
NameError: name 'f' is not defined 
```

如您所见，它仍然使用 execfile() 而不是 exec()，它在 Python 3+ 中取代了它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:34:48.713

编辑：

实际问题是 execfile 没有在 PyDev 重新定义中获得正确的全局变量。因此，如果 execfile 执行了 execfile('my_file', globals())，它将起作用...我将更改 PyDev 的实现，以便如果未传递全局变量，它将执行以下操作：

```
if glob is None:
    import sys
    glob = sys._getframe().f_back.f_globals 
```

（您可以在**plugins/org.python.pydev_XXX/PySrc/_pydev_execfile.py**的本地安装中修复它，它应该可以工作 - 如果没有，请告诉我）。

* * *

初步答案：

这是不可能的，但是当你在 Python 3 的控制台中时，PyDev 确实重新定义了 execfile，所以，它应该仍然可以工作......由于某种原因这对你不起作用吗？

此外，在 Python 3 中的某些情况下，替换： exec(compile(open(filename).read(), filename, 'exec'), globals, locals) 被破坏。

实际的重新定义（应该适用于所有情况并且在 PyDev 中可用）是：

```
#We must redefine it in Py3k if it's not already there
def execfile(file, glob=None, loc=None):
    if glob is None:
        glob = globals()
    if loc is None:
        loc = glob
    stream = open(file, 'rb')
    try:
        encoding = None
        #Get encoding!
        for _i in range(2):
            line = stream.readline() #Should not raise an exception even if there are no more contents
            #Must be a comment line
            if line.strip().startswith(b'#'):
                #Don't import re if there's no chance that there's an encoding in the line
                if b'coding' in line:
                    import re
                    p = re.search(br"coding[:=]\s*([-\w.]+)", line)
                    if p:
                        try:
                            encoding = p.group(1).decode('ascii')
                            break
                        except:
                            encoding = None
    finally:
        stream.close()

    if encoding:
        stream = open(file, encoding=encoding)
    else:
        stream = open(file)
    try:
        contents = stream.read()
    finally:
        stream.close()

    exec(compile(contents+"\n", file, 'exec'), glob, loc) #execute the script 
```

# android - 如何（正确）从 startManagingCursor 过渡到 CursorLoader？

> ID：10145735
> 
> 赞同：19
> 
> 时间：2012-04-13T17:47:12.063
> 
> 标签：android, android-cursor, android-cursorloader

我将我的 android 更新`SDK`到最新版本，现在它说`startManagingCursor()`是`deprecated`. 我需要帮助来更新我的代码以使用新的 `CursorLoader`.

```
private void fillData() {
    Cursor notesCursor = mDbHelper.fetchAllNotes();
    startManagingCursor(notesCursor);
    NoteAdapter notes = new NoteAdapter(this,  R.layout.notes_row, notesCursor);
    setListAdapter(notes);
} 
```

那么，`startManagingCursor()`旧的，如果新代码被翻译，它会是什么样子？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-13T19:20:25.167

首先，`startManagingCursor()`仍然有效。这并不理想，因为它在主应用程序线程上执行数据库 I/O。在 Android 中，“已弃用”通常表示“我们认为我们建议您使用的其他东西更好”。因此，当它在您的应用程序的开发周期中有意义时，您应该考虑迁移。

其次，正如 Selvin 所指出的，SDK 仅提供了`Loader`一个`ContentProvider`. 我有[一个直接`Loader`为 SQLite](https://github.com/commonsguy/cwac-loaderex)提供的项目。

第三，您的代码确实没有直接的“翻译”。该`Loader`框架是异步的和事件驱动的，而您的代码不是。

一般来说，您`Loader`将负责获取便笺，并且`ListView`当`onLoadFinished()`您`Cursor`从`Loader`.

# java - 使用 Moyosoft Outlook 连接器时出现 ComponentObjectModelException

> ID：10145737
> 
> 赞同：1
> 
> 时间：2012-04-13T17:47:17.553
> 
> 标签：java, outlook, connector

我们正在使用[Moyosoft 的 Java Outlook 连接器](http://www.moyosoft.com/joc/)，它在大多数情况下都非常适合我们。

在单台机器（安装了 Outlook 2010 的 Windows 7）上，我们收到以下错误：

```
com.moyosoft.connector.com.ComponentObjectModelException: Unable to create an
instance for the specified program ID (80080005)
    at com.moyosoft.connector.com.c.a(Unknown Source)
    at com.moyosoft.connector.com.c.a(Unknown Source)
    at com.moyosoft.connector.com.c.a(Unknown Source)
    at com.moyosoft.connector.com.c.a(Unknown Source)
    at com.moyosoft.connector.com.DispatchProxy.<init>(Unknown Source)
    at com.moyosoft.connector.com.c.a(Unknown Source)
    at com.moyosoft.connector.com.ComUtil.createDispatch(Unknown Source)
    at com.moyosoft.connector.ms.outlook.Outlook.a(Unknown Source)
    at com.moyosoft.connector.ms.outlook.Outlook.<init>(Unknown Source) 
```

从代码：

```
Outlook outlook = new Outlook( ); 
```

在另一台装有 Outlook 2010 的 Windows7 机器上，它可以按预期完美运行。关于我们做错了什么或我们应该看哪里的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:28:48.257

尝试这个：

```
Outlook outlook = new Outlook(profile, password); 
```

我必须提供配置文件和密码才能启动默认值，因此当配置文件为“默认”时 textarea 保持为空。

# wampserver - wamp服务器本地拒绝？

> ID：10145739
> 
> 赞同：3
> 
> 时间：2012-04-13T17:47:24.900
> 
> 标签：wampserver, http-status-code-403

我刚刚在我的电脑上安装了 Wamp Server 2。而且我无法访问phpmyadmin，甚至无法访问根目录下的index.php，这一切都给出了403 Forbidden。

我也尝试从 alias.conf 更改权限，但它不起作用。

你知道如何解决这个问题，或者任何提议值得一试，请分享。

提前致谢。

PS：操作系统：W7，杀毒卡巴斯基，windows防火墙关闭。

编辑：重新启动 wamp 解决了 phpmyadmin 访问，但目录访问（即：）`http://localhost/index.php`仍然被禁止。

EDIT2：我现在可以通过 url 访问我的 index.php：`127.0.0.1/index.php`但我仍然无法访问`http://localhost/index.php`，我将使用`http://localhost/`

EDIT3：日志充满：

```
[Fri Apr 13 20:50:06 2012] [error] [client ::1] client denied by server configuration: C:/wamp/www/
[Fri Apr 13 20:50:19 2012] [error] [client ::1] client denied by server configuration: C:/wamp/www/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:17:11.777

在此处查看我的旧指南，我的许多朋友都有此错误，并且该指南有效[http://www.hieule.info/site/web/solve-the-denied-access-problem-when-using-wamp-server-2 -on-windows-8-](http://www.hieule.info/site/web/solve-the-denied-access-problem-when-using-wamp-server-2-on-windows-8-)希望这对你也有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T00:23:20.913

我打算在 Windows 8 上使用 wampserver 来运行本地服务器。我通过像 Trung-Hieu Le (cf.) 一样编辑 Apache httpd.conf 解决了这个问题，但只更改了一行：

改变

```
Listen 80 
```

到

```
Listen 127.0.0.1:80
#Listen 80 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-08T11:58:18.813

apache配置的这个问题。转到 httpd.cong 文件并将第 46 行替换为 Listen 127.0.0.1:80。这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T17:53:45.170

如果是防火墙问题，您甚至不会收到 403 错误，您只会从浏览器中收到“站点无法访问”。检查服务器错误日志，它将准确解释您收到错误的原因。

我猜这是由于禁用了目录浏览的错误配置的默认文档 - 例如，您在那里有一个 index.php，但 Apache 默认只寻找 index.html。禁用目录浏览器后，您将收到 403 Forbidden。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T11:01:23.863

将 localhost 更改为 127.0.0.1 并且应该可以工作，我遇到了微笑问题:)

```
::1 - - [11/Nov/2012:14:29:34 +0330] "GET / HTTP/1.1" 403 202
127.0.0.1 - - [11/Nov/2012:14:29:37 +0330] "GET / HTTP/1.1" 200 6051 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T12:04:52.133

转到 C:/Windows/System32/drivers/etc/hosts 添加新行：127.0.0.1 localhost

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-25T02:27:30.377

我遇到了这个错误，这是由于无意中删除了 C:\Wamp\Apps 文件夹造成的。把我绊倒了，因为在那种情况下我会期待 404，而不是 403。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-03T05:35:10.500

在我的情况下，我认为在大多数其他情况下，最简单和最有效的解决方案都是关于访问：-

只需按照以下简单步骤：-

只需打开您的 httpd.conf 文件，在那里您将看到以下内容

onlineoffline 标签 - 不要从 127.0.0.1 删除 Order Deny,Allow Deny from all Allow

只需将全部拒绝更改为全部允许并保存更改并重新启动 Wamp 服务器中的所有服务

（使用以下更改以上） onlineoffline 标记 - 不要从 127.0.0.1 中删除 Order Deny,Allow Allow from all Allow

无需更改您的端口或其他任何东西。

简单且 100% 有效

希望它也能帮助其他人

# perl - 如何从一个文件中检索一组两行，并从另一个文件引用第一行？

> ID：10145742
> 
> 赞同：2
> 
> 时间：2012-04-13T17:47:37.813
> 
> 标签：perl, file, unix, command-line

我有两个文件

```
$猫文件 1
索引1注释1
A B C D
索引2注释2
efgh
索引3注释3
希克
索引4注释4
lmno
索引5注释5
pqrs
…
```

```
$猫文件2
索引1
索引3
索引5
```

我想要得到的是文件 1 中的行列表以及检索到的每一行之后的行，如下所示。

```
索引1注释1
A B C D
索引3注释3
希克
索引5注释5
pqrs
```

我目前的解决方案是使用 grep 及其“文件”标志 `grep -A 1 --file="file2" file1 | awk '!/--/'`

但我想知道是否有更优雅的解决方案。当文件很大时，当前的解决方案需要很长时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:05:38.477

```
#!/usr/bin/env perl

use strict; use warnings;
use autodie;

my %to_index;

my ($annotations_file, $index_file) = @ARGV;

open my $index, '<', $index_file;

while (my $line = <$index>) {
    next unless $line =~ /\S/;
    chomp $line;
    $to_index{ $line } = undef;
}

close $index;

open my $annotations, '<', $annotations_file;

while (my $line = <$annotations>) {
    next unless $line =~ /\S/;
    my ($keyword) = ($line =~ /^(\S+)/);
    if (exists $to_index{ $keyword }) {
        print $line;
        print scalar <$annotations>;
    }
}

close $annotations; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:56:44.520

我建议通读 file1 构建每个标签在文件中出现位置的索引。可以从file2中读取所需数据的标签，并查阅索引以查看从何处读取相应信息。

这个程序显示了原理。目前尚不清楚如何区分标签和测试的其余部分。我假设它们都以 开头`Index`，这可能是错误的，但如果您需要帮助以使其适应您的真实数据，请再次询问。

```
use strict;
use warnings;

@ARGV = qw/ file1.txt file2.txt / unless @ARGV;
my ($file1, $file2) = @ARGV;

my %index;

open my $f1, '<', $file1 or die qq(Unable to open "$file1": $!);
my $pos = tell $f1;
while (<$f1>) {
  $index{$1} = $pos if /^(Index\S+)/;
  $pos = tell $f1;
}

open my $f2, '<', $file2 or die qq(Unable to open "$file2": $!);
while (<$f2>) {
  next unless /^(Index\S+)/ and defined($pos = $index{$1});
  seek $f1, $pos, 0;
  print scalar <$f1>, scalar <$f1>;
} 
```

**输出**

```
Index1 annotation1
abcd
Index3 annotation3
hijk
Index5 annotation5
pqrs 
```

# c# - HiddenInput(DisplayValue) 需要在 CREATE 视图中为 false 但在 LIST 视图中为 true

> ID：10145757
> 
> 赞同：0
> 
> 时间：2012-04-13T17:48:44.650
> 
> 标签：c#, asp.net-mvc, viewmodel

我有一个枚举视图模型属性，我想将其隐藏在 CREATE 视图中但显示在 LIST/Index 视图中。枚举是打开、失败、成功。

*   对于 CREATE 视图，编辑器/控件不应该是可见的。
*   对于列表视图，编辑器/控件应该是一个可选择的组合框

这可以通过 HiddenInput 属性以某种方式完成吗？

如果无法做到这一点，那么我至少希望它在两个视图中都可见，但禁用/另一个控件（标签而不是组合框）。

我正在使用 asp.net mvc 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:57:20.197

实际上你应该使用不同的视图模型。请记住：*视图模型*的第一个词是*视图*，意思是您为每个视图定义一个视图模型。因此，您将拥有一个`CreateViewModel`将用于`Create`没有相关 enum 属性的视图和一个`ListViewModel`具有将在视图中使用的 enum 属性的`Index`视图。

在进行代码审查时，我看到许多开发人员试图在不同的视图上重用相同的模型并最终导致一些可怕的逻辑，因为这些模型根本不适合这些视图。他们试图隐藏，他们试图编写 if 和其他东西来执行验证，通常以维护噩梦告终。

# sql-server-2008-r2 - SQL Server“可用空间”警报？

> ID：10145760
> 
> 赞同：3
> 
> 时间：2012-04-13T17:48:54.123
> 
> 标签：sql-server-2008-r2, database-management

我正在寻找一种在数据库或日志剩余空间达到 10% 时发送警报的方法。

让我先说我故意没有在问题中包含“文件”一词来作为这个问题的开头。虽然我研究过这个问题，但似乎大多数人都将他们的数据库设置为自动增长，然后努力在文件系统级别管理他们的数据库。有大量示例处理如何发送磁盘空间警报。这不是我的问题！我的数据库都设置为固定大小的文件。这意味着文件在创建时或需要扩展数据库时都从文件系统中预先分配。作为一个政策问题，我不允许任何数据库不受控制地增长，以致于在一个行为不端的应用程序手中关闭整个服务器。每个数据库都在其预先分配的空间内进行管理，并根据需要手动扩展以满足不断增长的需求。

也就是说，例如，当数据库“扩孔空间”降至 10% 以下时，我正在寻找发送警报的最佳方式——从技术上讲，我可能会设置警告和警报阈值。到目前为止，我还没有找到关于这个主题的任何内容，因为大多数人似乎都专注于磁盘空间，这使得这有点像大海捞针。

我有点希望 SQL Server 有简单的警报机制来做这样一个简单、明显、开箱即用的事情，但看起来警报主要是为了捕捉我书中有点晚的错误消息 - 我我希望更积极一点。

因此，再次希望在数据库“剩余空间”低于各种阈值时发送警报。有没有人这样做或看到这样做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:41:58.453

确实是的。我已经做到了。

可以使用针对系统表的查询来设置计数器。一种可能性包括确定日志或数据文件中的可用空间百分比。然后，可以创建 SQL 警报以通过电子邮件将消息发送给操作员，说明计数器已达到特定阈值，例如数据库文件中仅剩余 5% 的空间。该解决方案需要几个步骤，但可以使用现有功能。

要确定文件名和空间信息，可以使用以下查询。

```
SELECT  name AS 'File Name' , 
 physical_name AS 'Physical Name', 
 size/128 AS 'Total Size in MB',
 size/128.0 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS int)/128.0 AS 'Available Space In MB',
 round((CAST(FILEPROPERTY(name, 'SpaceUsed') AS float)/size)* 100 ,2) AS  'Percentage Used',
 *
FROM sys.database_files; 
```

以下是为给定文件的可用空间百分比设置警报的步骤。

1.  创建用值设置计数器的过程。此示例设置计数器编号 10。

    ```
    DECLARE @FreePercent int

    SELECT @FreePercent = 100 - round((CAST(FILEPROPERTY(name, 'SpaceUsed') AS float)/size)* 100 ,2)
     FROM sys.database_files
     WHERE sys.database_files.name = 'NameOfYourLogOrDataFileHere';

    EXEC sp_user_counter10 @FreePercent 
    ```

2.  创建计划作业以运行上述过程

3.  使用计数器创建 SQL 代理警报，以便在空闲百分比低于某个阈值（即 5%）时执行

4.  配置数据库邮件，测试它，并创建至少一个操作员

5.  启用 SQL server 代理警报电子邮件（代理的属性），并重新启动代理

# windows - 系统文件复制对话框

> ID：10145763
> 
> 赞同：0
> 
> 时间：2012-04-13T17:49:03.110
> 
> 标签：windows, api, windows-7, file-copying

有时，安装程​​序会显示 Windows 文件复制对话框，如下所示：

![在此处输入图像描述](../Images/3ab2492cbab75eb0eff5fac6fd0eb920.png)

这通常出现在驱动程序级应用程序安装期间，无论是在 Windows XP 还是 Windows 7 上。

哪个 API 可以执行此操作？

**编辑**

实际上，真正的对话框上根本没有“取消”按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:46:52.673

Windows API 称为 SHFileOperation。它在 C# 语言中的签名是

```
[DllImport("shell32.dll",CharSet = CharSet.Unicode)]
static extern int SHFileOperation([In] ref SHFILEOPSTRUCT lpFileOp); 
```

如果您喜欢一个示例，您可以查看PInvoke[上的此页面](http://www.pinvoke.net/default.aspx/shell32.SHFileOperation)
， 而不是指向SHFileOperation 上[的 MSDN 文档的链接](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762164%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-31T22:59:37.327

Windows API SHFileOperation 声明如下：

[DllImport("shell32.dll",CharSet = CharSet.Unicode)] static extern int SHFileOperation(ref SHFILEOPSTRUCT lpFileOp);

为 ref SHFILEOPSTRUCT lpFileOp 指定 [In] 可防止在设置 FOF_WANTMAPPINGHANDLE 标志时接收指向 ref SHFILEOPSTRUCT.hNameMappings 中任何重新映射文​​件的指针。

# php - PHP：每次调用方法时执行的魔术方法

> ID：10145766
> 
> 赞同：2
> 
> 时间：2012-04-13T17:49:15.773
> 
> 标签：php, oop, magic-methods

PHP中是否有一个神奇的方法，每次调用另一个方法时都会调用它？__callStatic() 和 __call() 魔术方法似乎仅在该方法不存在时才起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T17:51:54.607

不，您要求的是[“建议”](http://en.wikipedia.org/wiki/Advice_(programming))或[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。我相信有一些实验性的扩展可以在 PHP 中实现这一点，但你不想在生产中使用任何东西。

您可以做的是创建一个包装器，该包装器通过`__call`. 例如：

```
class Foo {
  function bar() {
    echo "Foo::bar\n";
  }
}
class AdviceWrapper {
  protected $subject;
  function __construct($subject) {
    $this->subject = $subject;
  }
  function __call($name, $args) {
    echo "Before $name\n";
    $result = call_user_func_array(array($this->subject, $name), $args);
    echo "After $name\n";
    return $result;
  }
}
$foo = new AdviceWrapper(new Foo());
$foo->bar(); 
```

另请参阅：[https ://stackoverflow.com/questions/4738282/are-there-any-working-aspect-oriented-php-libraries](https://stackoverflow.com/questions/4738282/are-there-any-working-aspect-oriented-php-libraries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:51:14.307

你为什么需要这个？您可以只创建一个方法并在开始时在每个方法中调用它。

编辑：您搜索的内容类似于 php 中的面向方面编程。在谷歌上快速搜索发现这里： [http ://code.google.com/p/apdt/](http://code.google.com/p/apdt/)

也许它有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:52:07.317

你能用 _ 在它们前面重命名你的方法吗？那么所有呼叫都将通过 __call / __callStatic 路由？

# android - 如何使用 TCP 套接字传输位图

> ID：10145767
> 
> 赞同：1
> 
> 时间：2012-04-13T17:49:25.573
> 
> 标签：android, client-server, tcpclient, tcpserver, tcpsocket

我有一个服务器/客户端应用程序，我想在其中发送和显示客户端服务器的屏幕截图。任何机构都可以帮助我。谢谢

代码如下

服务器端

```
public class ServerActivity extends Activity {

private TextView serverStatus;
RelativeLayout mainLayout;

// default ip
public static String SERVERIP = "10.0.2.15";

// designate a port
public static final int SERVERPORT = 8080;

private Handler handler = new Handler();

private ServerSocket serverSocket;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.server);
    serverStatus = (TextView) findViewById(R.id.server_status);

    SERVERIP = getLocalIpAddress();

    Thread fst = new Thread(new ServerThread());
    fst.start();
}

public class ServerThread implements Runnable {

    public void run() {
        try {
            if (SERVERIP != null) {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Listening on IP: " + SERVERIP);
                    }
                });
                serverSocket = new ServerSocket(SERVERPORT);

                while (true) {
                 // listen for incoming clients
                  Socket client = serverSocket.accept();
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Connected");                  
                        mainLayout = (RelativeLayout)findViewById(R.id.screen);
                            ImageView iv =(ImageView)findViewById(R.id.iv);
                            File root = Environment.getExternalStorageDirectory();
                            File file = new File(root,"androidlife.jpg");
                  Bitmap b = Bitmap.createBitmap(mainLayout.getWidth(), mainLayout
                        .getHeight(), Bitmap.Config.ARGB_8888);
                  iv.setImageBitmap(b);
                  Canvas c = new Canvas(b);
                  mainLayout.draw(c); 

                             //serverStatus.setText("Screenshot is displaying");
                        }
                    });

                    try {

                        BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                        BufferedWriter out = new BufferedWriter(new OutputStreamWriter(client.getOutputStream()));
                        //receive a message
                        String incomingMsg = in.readLine() + System.getProperty("line.separator");
                        Log.i("TcpServer", "received: " + incomingMsg);
                        serverStatus.setText("received: " + incomingMsg);
                        //send a message
                        String outgoingMsg = "goodbye from port " + SERVERPORT + System.getProperty("line.separator");
                        out.write(outgoingMsg);
                        //out.flush();
                        Log.i("TcpServer", "sent: " + outgoingMsg);
                        serverStatus.setText("sent: " + outgoingMsg);
                        //while ((line = in.readLine()) != null)      
                            handler.post(new Runnable() {
                                @Override
                                public void run() {

                                }
                            });
                       // }
                        break;
                    }  
                        catch (Exception e) {
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                serverStatus.setText("Oops. Connection interrupted. Please reconnect your phones.");
                            }
                        });
                        e.printStackTrace();
                    }
                }
            } else {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Couldn't detect internet connection.");
                    }
                });
            }
        } catch (Exception e) {
            handler.post(new Runnable() {
                @Override
                public void run() {
                    serverStatus.setText("Error");
                }
            });
            e.printStackTrace();
        }
    }
}

// gets the ip address of your phone's network
private String getLocalIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) { return inetAddress.getHostAddress().toString(); }
            }
        }
    } catch (SocketException ex) {
        Log.e("ServerActivity", ex.toString());
    }
    return null;
}

@Override
protected void onStop() {
    super.onStop();
    try {
         // make sure you close the socket upon exiting
         serverSocket.close();

     } catch (IOException e) {
         e.printStackTrace();
     }
  }
} 
```

客户端代码是：

```
public class ClientActivity extends Activity {

public EditText serverIp;
public TextView tv;

private Button connectPhones;

private String serverIpAddress = "";
private static final int SERVERPORT = 8080;

private boolean connected = false;

//private Handler handler = new Handler();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.client);

    serverIp = (EditText) findViewById(R.id.server_ip);
    connectPhones = (Button) findViewById(R.id.connect_phones);
    connectPhones.setOnClickListener(connectListener);
}

private OnClickListener connectListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        // if(true)
        if (!connected) {
            serverIpAddress = serverIp.getText().toString();
            if (!serverIpAddress.equals("")) {
                Thread cThread = new Thread(new ClientThread());
                cThread.start();
            }
        }
    }
};

public class ClientThread implements Runnable {

    public void run() {
        try {
            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
            Log.d("ClientActivity", "C: Connecting...");
             Socket socket = new Socket(serverAddr, SERVERPORT);
            connected = true;
            while (connected) {
                try {
                    BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                    BufferedWriter out = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
                    //send output msg
                    String outMsg = "TCP connecting to " + SERVERPORT + System.getProperty("line.separator"); 
                    out.write(outMsg);
                    out.flush();
                    Log.i("TcpClient", "sent: " + outMsg);
                    //accept server response
                    String inMsg = in.readLine() + System.getProperty("line.separator");
                    tv.setText("message from server"+ inMsg);
                    Log.i("TcpClient", "received: " + inMsg);
                //  ImageView iv = (ImageView)findViewById(R.id.iv);
                   // iv.setImageBitmap(bm); 
                        Log.d("ClientActivity", "C: Sent.");
                } catch (Exception e) {
                    Log.e("ClientActivity", "S: Error", e);
                }
            }
            socket.close();
            Log.d("ClientActivity", "C: Closed.");
        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error", e);
            connected = false;
        }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:52:00.727

我没有在您的代码中看到您尝试发送图像位图或屏幕截图的位置！并且您不能通过套接字发送发送位图，您应该在创建位图 b 后将其添加到发送方，以从位图中创建一个字节数组：

```
 ByteArrayOutputStream stream = new ByteArrayOutputStream();
                b.compress(Bitmap.CompressFormat.PNG, 100, stream);
                byte[] byteArray = stream.toByteArray(); 
```

在服务器端接收字节数组，然后以这种方式重新创建位图：

```
 Bitmap breceived = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length); 
```

# java - java为什么2D中原始数组和对象数组的内存使用不同

> ID：10145768
> 
> 赞同：3
> 
> 时间：2012-04-13T17:49:26.190
> 
> 标签：java, memory, multidimensional-array

相关代码

```
int row = 100000;
int col = 18;

Object[][] objectArray = new Object[row][1];
int[][] intArray = new int[row][1];

System.out.println("Size of objectArray  = " + net.sourceforge.sizeof.SizeOf.deepSizeOf(objectArray) + " bytes");
System.out.println("Size of intArray     = " + net.sourceforge.sizeof.SizeOf.deepSizeOf(intArray) + " bytes");

Object[][] objectMatrix = new Object[row][col];
int[][] intMatrix = new int[row][col];

System.out.println("Size of objectMatrix = " + net.sourceforge.sizeof.SizeOf.deepSizeOf(objectMatrix) + " bytes");
System.out.println("Size of intMatrix    = " + net.sourceforge.sizeof.SizeOf.deepSizeOf(intMatrix) + " bytes"); 
```

相关输出

```
Size of objectArray  = 4000024 bytes
Size of intArray     = 4000024 bytes
Size of objectMatrix = 17600024 bytes
Size of intMatrix    = 10400024 bytes 
```

如果不是 1D（列数 = 1），而是 2D（列数 > 1），则对象矩阵占用更多空间。

有人可以解释原因吗？

编辑：添加了另一种情况，只有一行

```
 int row = 1;
    int col = 2;

    Object[][] objectArray = new Object[row][1];
    int[][] intArray = new int[row][1];

    System.out.println("Size of objectArray  = " + net.sourceforge.sizeof.SizeOf.deepSizeOf(objectArray) + " bytes");
    System.out.println("Size of intArray     = " + net.sourceforge.sizeof.SizeOf.deepSizeOf(intArray) + " bytes");

    Object[][] objectMatrix = new Object[row][col];
    int[][] intMatrix = new int[row][col];

    System.out.println("Size of objectMatrix = " + net.sourceforge.sizeof.SizeOf.deepSizeOf(objectMatrix) + " bytes");
    System.out.println("Size of intMatrix    = " + net.sourceforge.sizeof.SizeOf.deepSizeOf(intMatrix) + " bytes"); 
```

输出

```
Size of objectArray  = 64 bytes
Size of intArray     = 64 bytes
Size of objectMatrix = 72 bytes
Size of intMatrix    = 64 bytes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T04:03:55.700

对象数组中引用的大小取决于许多因素（32 位与 64 位），或者如果您使用 64 位，您是否正在运行压缩的 OOP？由于我通常在 64 位环境中工作，我总是希望 Object[] 占用更多内存。另一方面，Java 中的 int 被定义为 32 位值，因此使用 int[] 您将为每个值使用 32 位，加上数组对象本身的一些开销。

# tomcat - 使用 Apache 作为安全代理访问 Tomcat 时出现问题

> ID：10145769
> 
> 赞同：1
> 
> 时间：2012-04-13T17:49:47.613
> 
> 标签：tomcat, proxy, apache, mod-proxy

我在服务器 A 上的 apache 上运行的网页/服务很少。其中一个 Web 服务需要访问在另一台物理服务器 B 上运行的应用程序。另一台服务器 B 上安装了 tomcat。在服务器上，BI 禁用了除 8080 和 8443 之外的大多数端口。为了维护 URL 方案，我让我的 Apache 服务器充当需要在服务器 B 上处理的一项服务的 tomcat 服务器的代理。另一个注意点是所有网络服务都是安全的，只能通过 https 访问。证书文件已正确安装，因为我可以使用 https 访问我的 apache 上的其他项目。

当我尝试访问要在服务器 B 上处理的那个 Web 服务时，我反复收到 503 错误 - 服务暂时不可用。

这是我在两台服务器上的设置：

在带有 Apache 的服务器 A 上：

我在 httpd.conf 文件中启用了以下指令，确保启用了代理：

```
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_balancer_module modules/mod_proxy_balancer.so 
```

我还在 httpd conf 文件中添加了以下 2 行

```
ProxyRequests Off
ProxyPreserveHost on 
```

接下来，我的 ssl.conf 中有以下几行

```
Listen 443
<VirtualHost _default_:443>
SSLEngine on
SSLProxyEngine on
SSLCertificateFile /etc/pki/tls/certs/your_company_certificate.pem
SSLCertificateKeyFile /etc/pki/tls/certs/your_company_private_key.pem
ServerName my_company_domain_name
ProxyPass /app http://tomcat_server_ip:8443/app
ProxyPassReverse /app http://tomcat_server_ip:8443/app
</VirtualHost> 
```

现在在不同服务器（B）中的tomcat中，我在server.xml中指定了以下内容：

```
<Connector port="8080" maxHttpHeaderSize="8192" maxThreads="150" minSpareThreads="25" maxSpareThreads="75" enableLookups="true" redirectPort="443" acceptCount="100" connectionTimeout="20000" disableUploadTimeout="true"/> 

 <Connector port="8443" maxHttpHeaderSize="8192" maxThreads="150" minSpareThreads="25" maxSpareThreads="75" enableLookups="true" acceptCount="100" connectionTimeout="20000" disableUploadTimeout="true"        
        scheme="https"
        secure="false" 
        SSLEnabled="true" 
        proxyPort="443"
        proxyName="my_company_domain_name"
     /> 
```

测试结果：

期望的结果应该是，当我在浏览器中点击此 URL [https://my_company_domain_name/app](https://my_company_domain_name/app) 时，它应该被重定向到[http://tomcat_server_ip:8443/app](http://tomcat_server_ip:8443/app)

但是，它返回的只是服务暂时不可用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T05:28:54.030

端口 8443 通过 https ；你为什么要通过 http 引用它？您还需要首先确认[https://tomcat_server_ip:8443/app](https://tomcat_server_ip:8443/app)工作正常。

# powershell - Test-Path 无法在存在的文件上返回 $True

> ID：10145775
> 
> 赞同：10
> 
> 时间：2012-04-13T17:50:25.870
> 
> 标签：powershell, powershell-2.0, powershell-ise

我正在尝试验证文件的存在，但问题是文件名中包含方括号，即 c:\test[R] 10005404，注释失败，[S] SiteName.txt。

我尝试使用字符串 .replace 方法但没有成功。

```
$a = c:\test\[R] 10005404, Failed with Comments, [S] SiteName.txt
$Result = (Test-Path $a)
# Returns $False even though the file exists. 
```

# 试过了

```
$a = $a.Replace("[", "`[")
$a = $a.Replace("]", "`]")

$Result = (Test-Path $a)
# Also returns $False even though the file exists. 
```

想法将不胜感激。谢谢，克里斯M

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-13T18:17:21.497

尝试使用 -LiteralPath 参数：

```
Test-Path -LiteralPath 'C:\[My Folder]' 
```

方括号有特殊含义。

它实际上是一个 POSIX 功能，所以你可以这样做：

```
dir [a-f]* 
```

这将为您提供当前目录中以字母 A 到 F 开头的所有内容。Bash 具有相同的功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T18:20:23.633

至少有三种方法可以让它工作。

使用与您的方法类似的方法，您需要在使用双引号时添加 2 个反引号，因为单个反引号将在发送到方法之前被评估为转义字符`Replace`。

```
$a = "c:\test\[R] 10005404, Failed with Comments, [S] SiteName.txt"
$a = $a.Replace("[", "``[")
$a = $a.Replace("]", "``]")
$Result = Test-Path $a 
```

在方法中使用单引号`Replace`也将防止反引号被删除。

```
$a = "c:\test\[R] 10005404, Failed with Comments, [S] SiteName.txt"
$a = $a.Replace('[', '`[')
$a = $a.Replace(']', '`]')
$Result = Test-Path $a 
```

最后，您可以使用 `LiteralPath`不使用通配符的参数（PowerShell 匹配使用方括号来定义一组可以匹配的字符）。

```
$a = "c:\test\[R] 10005404, Failed with Comments, [S] SiteName.txt"
$Result = Test-Path -LiteralPath $a 
```

# javascript - 我的身体点击事件有什么问题？

> ID：10145777
> 
> 赞同：1
> 
> 时间：2012-04-13T17:50:34.010
> 
> 标签：javascript, jquery

我有那个文本字段：

```
<input type='text' id='title' name='title'>
<div id='error' class='error'></div> 
```

当用户单击文本字段并出现验证问题时，会出现 div“错误”。

我想要做的是当用户点击身体的任何地方时隐藏那个小 div。我在正文单击事件中尝试了 e.stopPropagation 但没有奏效。

div 永远不会出现，因为当我模糊文本字段时，它被认为是身体点击

如果您有任何想法，请告诉我。问候

编辑：我已经更新了代码。正文单击事件中的代码应该在单击文本字段以外的任何内容时隐藏“错误” div，但无法使其正常工作。

```
$('body').click(function(event){
        if ($(event.target).closest('#title').get(0) == null ) { 
            $("#error").hide(); 
            }});

// Validation
$('#title').blur(function(){
    var titleinput=$('#title').val();
    if (titleinput.length <30 || titleinput.length >50){
        $('#error').text('Your title must be between 30 and 50 characters').show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:05:58.590

不幸的是，由于`blur`和`click`是不同的事件，您不能使用`stopPropagation`. 我能想到的唯一方法就是伪造它。您可以忽略在事件发生后几分之一秒内发生的第一次点击`blur`。

[http://jsfiddle.net/LeNDp/1](http://jsfiddle.net/LeNDp/1)

```
var ignoreClicks = false;
var timer;

$("body").click(function() {
    if(!ignoreClicks){
        $("#msg").fadeOut();
    }else{
        if(timer) clearTimeout(timer);
        ignoreClicks = false;        
    }
});

$("input").blur(function(e) {
    ignoreClicks = true;      
    $("#msg").stop(true,true).show();

    if(timer) clearTimeout(timer);
    timer = setTimeout(function(){ignoreClicks=false;}, 250);
});​ 
```

# php - 在 PHP 中调用未定义的函数 exit()

> ID：10145778
> 
> 赞同：0
> 
> 时间：2012-04-13T17:50:38.613
> 
> 标签：php, exit

我有以下代码

```
<?php
$f = 'exit';
print "function '$f' \n";
$f();
print "end \n";
?> 
```

产生此错误消息：

`Fatal error: Call to undefined function exit()`

为什么PHP找不到exit()函数？如果我用它替换`$f();`它`exit();`可以找到。

溴

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T17:57:04.060

直接来自[PHP 手册](http://us.php.net/exit)：

> 注意：因为这是一种语言结构而不是函数，所以不能使用变量函数来调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:23:30.270

试试这个： eval($f."();");

这不是一个好方法，但必须工作

# templates - 为什么这个模板参数约束不起作用？

> ID：10145779
> 
> 赞同：4
> 
> 时间：2012-04-13T17:50:40.177
> 
> 标签：templates, d

[重新](http://dlang.org/templates-revisited.html)阅读模板：

```
struct S(T : T*) {
  T t;  // t is supposed to be of type 'int*', but it's of type 'int', why?
}

void main() {

  int x = 123;
  S!(int*) s;
  static assert(is(typeof(s.t) == typeof(&x)));
} 
```

上面的代码无法编译。

奇怪的是，以下确实编译：

```
struct S(T : int*) {
  T t;
}

void main() {

  int x = 123;
  S!(int*) s;
  static assert(is(typeof(s.t) == typeof(&x)));
} 
```

我不明白这种行为。解释将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T19:20:32.233

当类型特化（冒号后的类型）依赖于参数标识符时，例如，如果存在匹配`T : T*`，则生成的标识符指的是标识符（`T`）在类型特化（*推导的类型）中的作用。*

否则，如果特化是独立的，例如`T : int*`，则生成的标识符是类型特化的别名。

例子：

```
=========================================================
Argument T        | Specialization     | Result
=========================================================
void              | T : void           | void
char              | T : void           | <no match>
int*              | T : T*             | int
immutable(char)[] | T : T[]            | immutable(char)
immutable(char)[] | T : immutable(T)[] | char
========================================================= 
```

当传递给模板参数的参数不匹配时，模板将从重载集中删除。如果在找到匹配项之前重载集为空，则会引发错误。

当[IsExpression](http://dlang.org/expression.html#IsExpression)（`is(...)`主表达式）中存在不匹配时，结果为 false，并且不会将符号引入范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T18:43:46.323

[如http://dlang.org/template.html](http://dlang.org/template.html)的参数推导部分所述，推导模板参数的类型时：

> 1.  如果参数没有类型特化，则参数的类型设置为模板实参。
> 2.  如果类型特化依赖于类型参数，则该参数的类型设置为类型参数的对应部分。
> 3.  如果在检查了所有类型参数之后，还有任何类型参数没有分配类型，则为它们分配与 TemplateArgumentList 中相同位置的模板参数相对应的类型。
> 4.  如果应用上述规则并没有为每个模板参数生成一种类型，那么它就是一个错误。

与您的情况相对应的示例是：

```
template TBar(T : T*) { }
alias TBar!(char*) Foo3;   // (2) T is deduced to be char 
```

因此，您在第一个示例中看到的是预期行为。因为`T`两边都是，所以`T`最终被评估为模板参数的结果`T*`。因此，由于模板参数是`int*`，`T*`将会是`int*`，并且`T`最终是`int`。您所拥有的与以下内容非常相似[`std.traits.pointerTarget`](http://dlang.org/phobos/std_traits#pointerTarget)：

```
/**
Returns the target type of a pointer.
*/
template pointerTarget(T : T*)
{
    alias T pointerTarget;
} 
```

您的第二个示例编译，因为该模板要求它`T`可以隐式转换为`int*`. 并且由于`int*`可以隐式转换为自身，因此当您`int*`作为模板参数传递时，它可以工作。给你带来麻烦的是when `T`is on both，因为表达式的右边依赖于左边。

现在，我假设您实际上打算在这里测试的是模板参数是一个指针？如果是这种情况，那么您应该使用[`std.traits.isPointer`](http://dlang.org/phobos/std_traits.html#isPointer)：

```
struct S(T)
    if(isPointer!T)
{
    T t;
} 
```

# c#-4.0 - 递归检查活动目录组成员身份

> ID：10145781
> 
> 赞同：11
> 
> 时间：2012-04-13T17:50:48.110
> 
> 标签：c#-4.0, active-directory, group-membership

所以我有一个关于活动目录中递归组的问题。我有一个小方法可以检查用户 ID 是否在组中。效果很好。今天发现它不检查递归组成员身份，我不太确定如何（或是否）有办法做到这一点。到目前为止，这是我对非递归的了解：

```
public static bool CheckGroupMembership(string userID, string groupName, string Domain)
{
  bool isMember = false;

  PrincipalContext ADDomain = new PrincipalContext(ContextType.Domain, Domain);
  UserPrincipal user = UserPrincipal.FindByIdentity(ADDomain, userID);

  if (user.IsMemberOf(ADDomain, IdentityType.Name, groupName.Trim()))
  {
    isMember = true;
  }

  return isMember;
} 
```

我已经看到了一些关于目录搜索器或其他东西的东西，但是我对直接使用 AD 有点陌生，虽然我理解了这些概念，但我对其他一些东西仍然有些迷茫。

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-12-11T12:41:47.377

您还可以使用 的递归选项进行检查`GroupPrincipal.GetMembers`。

```
public static bool CheckGroupMembership(string userID, string groupName, string Domain) {
    bool isMember = false;

    PrincipalContext ADDomain = new PrincipalContext(ContextType.Domain, Domain);
    UserPrincipal user = UserPrincipal.FindByIdentity(ADDomain, userID);
    GroupPrincipal group = GroupPrincipal.FindByIdentity(ADDomain, groupName);

    if ((user != null) && (group != null)) {
        isMember = group.GetMembers(true).Contains(user);
    }

    return isMember;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-14T04:57:38.117

这是使用[System.DirectoryServices.AccountManagement 命名空间](http://msdn.microsoft.com/en-us/library/bb299745.aspx)的解决方案。这是一种递归解决方案。在[Find Recursive Group Membership (Active Directory) using C#](https://stackoverflow.com/a/6289205/608772)中，我提供了一个递归解决方案，它也适用于通讯组。

```
/* Retreiving a principal context
 */
Console.WriteLine("Retreiving a principal context");
PrincipalContext domainContext = new PrincipalContext(ContextType.Domain, "WM2008R2ENT:389", "dc=dom,dc=fr", "jpb", "PWD");

/* Look for all the groups a user belongs to
 */
UserPrincipal aUser = UserPrincipal.FindByIdentity(domainContext, "user1");
PrincipalSearchResult<Principal> a =  aUser.GetAuthorizationGroups();

foreach (GroupPrincipal gTmp in a)
{
  Console.WriteLine(gTmp.Name);    
} 
```

# mysql - 如何在 MySQL 中创建关系表？

> ID：10145784
> 
> 赞同：1
> 
> 时间：2012-04-13T17:50:58.737
> 
> 标签：mysql, database

我有 3 个表`students`，，，，`courses`关系`enroll`为“学生注册课程”

我已经创建`students`了`sid`作为主键的表

我已经创建`courses`了`cid`作为主键的表

现在我必须`enroll`按如下方式创建表，但它在关键字上显示错误，错误`references`是什么？

```
create table enroll(
    grade char(2),
    sid int not null,
    cid int not null,
    primary key(sid,cid),
    foreign key cid references courses on delete cascade,
    foreign key sid references students on delete cascade
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:01:05.577

您必须指定要在外部表中引用的字段，并且两组关键字段`()`也必须用括号括起来。

```
foreign key (cid) references courses (name_of_foreign_field_here) on delete cascade,
            ^   ^                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:00:24.377

简单的建议

对于多对多关系表，您必须创建另一个关系表，并获取两个表的 PK id 并保存在此关系表中

而对于一对多关系表，将一个表的 PK 属性放在多个表的属性中，并始终像这样链接它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:04:44.420

我认为您需要将 cid 和 sid 放在大括号中。这是一个示例代码，试一试并告知您的结果。请确保引用的大小和数据类型，即课程和学生的主键与注册的主键相同。

```
CREATE TABLE `enroll` (
    `sid` INT(10) NOT NULL,
    `cid` INT(10) NOT NULL,
    PRIMARY KEY (`sid`, `cid`),
    INDEX `FK_enroll_course` (`cid`),
    CONSTRAINT `FK_enroll_course` FOREIGN KEY (`cid`) REFERENCES `course` (`id`) ON DELETE CASCADE,
    CONSTRAINT `FK_enroll_student` FOREIGN KEY (`sid`) REFERENCES `student` (`id`) ON DELETE CASCADE
) 
```

# php - 为什么这个 PHP setcookie() 参数没有设置 cookie？

> ID：10145789
> 
> 赞同：0
> 
> 时间：2012-04-13T17:51:13.230
> 
> 标签：php, cookies, setcookie

我有这个 PHP

`setcookie('hello', '0', 0, '/389732/');`

为什么当我运行它时它没有设置cookie？

我在之后立即打印了`$_COOKIE['hello']`out 的值，它发出了一个错误，因为它不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T17:54:38.477

[setcookie 文档说明](http://us.php.net/setcookie)了这一点：

> 一旦设置了 cookie，就可以在**下一页加载**时使用 $_COOKIE ...

编辑：手动将 cookie 插入`$_COOKIE`自己可能很诱人，但请记住，某些框架有助于`$_COOKIE`在启动时解析到其他数据结构，并且不会看到这种骇人听闻的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:55:45.160

$_COOKIE 在脚本第一次运行时被填充。setcookie 将 cookie 信息放入队列中，当页面返回浏览器时，该队列会变成标题。

当浏览器请求一个新页面时，它会将 cookie 信息发送回您的服务器，并且 $_COOKIE 变量将被填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:55:08.697

因为 $_COOKIE 是调用 php 时 cookie 的内容。

# sql-server-2000 - 如何同时从两个单独的表中检索相似的数据？

> ID：10145791
> 
> 赞同：0
> 
> 时间：2012-04-13T17:51:15.087
> 
> 标签：sql-server-2000

免责声明：至少可以说，我的 SQL 技能是基本的。

假设我在同一个数据库的不同表中有两种相似的数据类型。

第一个表称为**精装**表，字段如下：

`hbID | hbTitle | hbPublisherID | hbPublishDate`

第二个表称为**平装本**，其字段包含相似的数据，但字段名称不同：

`pbID | pbTitle | pbPublisherID | pbPublishDate`

我需要检索出版商 ID 为 7 的最近 10 本书的精装书和平装书。

这是我到目前为止所拥有的：

```
SELECT TOP 10
    hbID, hbTitle, hbPublisherID, hbPublishDate AS pDate
    bpID, pbTitle, bpPublisherID, pbPublishDate AS pDate
FROM hardback CROSS JOIN paperback
WHERE (hbPublisherID = 7) OR (pbPublisherID = 7)
ORDER BY pDate DESC 
```

这将返回每行七列，其中至少三列可能是也可能不是错误的发布者。可能有四个，具体取决于 的内容`pDate`，如果其他六列用于正确的发布者，这几乎肯定会成为问题！

为了发布该软件的早期版本，我运行了两个单独的查询，每个查询获取 10 条记录，然后按日期对它们进行排序并丢弃后十条，但我只**知道**必须有更优雅的方式来做到这一点！

有什么建议么？

*旁白：当我的 Mac 突然出现内核崩溃时，我正在查看我在这里写的内容。重新启动，重新打开我的标签，我输入的所有内容都还在这里！Stack Exchange 网站很棒 :)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:05:28.540

最简单的方法可能是`UNION`：

```
SELECT TOP 10 * FROM
(SELECT hbID, hbTitle, hbPublisherID as PublisherID, hbPublishDate as pDate
 FROM hardback
 UNION 
 SELECT hpID, hpTitle, hpPublisher, hpPublishDate
 FROM paperback
) books
WHERE PublisherID = 7 
```

如果您可以拥有相同标题的两份副本（1 个平装本，1 个精装本），请将 ; 更改`UNION`为`UNION ALL`; `UNION`单独丢弃重复项。您还可以通过向每个选择添加一个伪列（例如在发布日期之后）添加一个列来指示它是什么书籍类型：

```
hbPublishDate as pDate, 'H' as Covertype 
```

您必须将相同的新列添加到查询的平装本半部分，改用“P”。请注意，在第二个查询中，您不必指定列名；结果集从第一个中获取名称。两个查询中的所有列数据类型也都匹配 - 如果不`UNION`将查询中的两列转换为相同的数据类型，则不能在第一个中的日期列与第二个中的数字列。

这是一个用于创建两个表并执行上述选择的示例脚本。它在 SQL Server Management Studio 中运行良好。完成后请记住删除两个表（使用`DROP Table tablename`）。

```
use tempdb;
create table Paperback (pbID Integer Identity, 
    pbTitle nvarchar(30), pbPublisherID Integer, pbPubDate Date);
create table Hardback (hbID Integer Identity, 
    hbTitle nvarchar(30), hbPublisherID Integer, hbPubDate Date);

insert into Paperback (pbTitle, pbPublisherID, pbPubDate)
  values ('Test title 1', 1, GETDATE());
insert into Hardback (hbTitle, hbPublisherID, hbPubDate)
  values ('Test title 1', 1, GETDATE());

select * from (
  select pbID, pbTitle, pbPublisherID, pbPubDate, 'P' as Covertype
  from Paperback
  union all
  select hbID, hbTitle, hbPublisherID, hbPubDate,'H' 
  from Hardback) books
order by CoverType;

/* You'd drop the two tables here with
DROP table Paperback;
DROP table HardBack;
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:01:25.840

我认为这显然更好，如果您只制作一张表并引用另一张表，其中包含有关条目类别的信息，例如`hardback`or `paperback`。这是我的第一个建议。

顺便问一下，你的编程语言是什么？

# c# - 复制文件网络驱动器大约 260 个字符限制 C#

> ID：10145792
> 
> 赞同：1
> 
> 时间：2012-04-13T17:51:17.237
> 
> 标签：c#

现在我正在尝试截取屏幕截图并将其保存到本地计算机，然后将其复制到网络驱动器：

问：\1234567890123456789012345\123456789012\12345\截图\sc.jpg

^ 了解有多少个角色在说话。我已经设置为在“12345”之后创建一个屏幕截图文件夹当程序到达这一点时，会发生此错误：

![在此处输入图像描述](../Images/b04a949470294cc300d8ca091e427934.png)

我怎样才能避免这种情况？

还：

```
DirectoryInfo scdestinfo = new DirectoryInfo(scdest);
DirectoryInfo scinfo = new DirectoryInfo(sccpath);
CopyAll(scinfo, scdestinfo); 
```

这是我复制文件夹/文件的代码。

```
public void CopyAll(DirectoryInfo source, DirectoryInfo target)
    {
        copyall = false;
        try
        {
            //check if the target directory exists
            if (Directory.Exists(target.FullName) == false)
            {
                Directory.CreateDirectory(target.FullName);
            }//end if
            //copy all the files into the new directory
            foreach (FileInfo fi in source.GetFiles())
            {
                fi.CopyTo(Path.Combine(target.ToString(), fi.Name), true);
            }//end foreach
            //copy all the sub directories using recursion
            foreach (DirectoryInfo diSourceDir in source.GetDirectories())
            {
                DirectoryInfo nextTargetDir = target.CreateSubdirectory(diSourceDir.Name);
                CopyAll(diSourceDir, nextTargetDir);
            }//end foreach
            //success here
            copyall = true;    
        }//end try
        catch (IOException ie)
        {
            MessageBox.Show(ie.Message);
            //handle it here
            copyall = false;
        }//end catch
    }//end CopyAll 
```

和copyall功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:58:29.570

不幸的是，没有直接的方法可以避免这种情况。

解决方案1：最自然的一个：以不超过该限制的方式生成路径。（较短的目录和文件名），或者只是重新组织目录布局，如果可能的话。

解决方案2：不喜欢这个（有线，imo），但可以使用`WindowsAPI`，在这种情况下不会失败，例如来自[.NET 2.0 Workaround for PathTooLongException](http://www.codeproject.com/Articles/22013/NET-2-0-Workaround-for-PathTooLongException)（适用于 2.0，但现在有效）

解决方案3。*尝试*，当您要读取/写入数据到文件时，将操作系统光标移动到该目录，因此您无需指定完整（260+）即可访问它，而只需指定文件名。**你应该试试这个，看看它是否适合你**。（即使这可行，我更喜欢第一个解决方案，但值得尝试）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:58:36.063

这是一个[Windows 限制](http://msdn.microsoft.com/en-us/library/aa365247.aspx)，尽管有许多 API 函数的 Unicode 变体允许最大路径长度约为 32,767 个字符，但这又受到您正在处理的特定文件系统的限制。通常，给定路径组件限制为 255 个字符（检查[GetVolumeInformation](http://msdn.microsoft.com/en-us/library/aa364993.aspx)以了解给定卷的特定限制）。

要使用允许更长路径的 Unicode 变体（例如[CreateFileW](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)），我相信您将不得不直接处理 Windows API，而不是使用 .Net 库函数。

# jquery-plugins - jquery / 同位素 | 基本实施问题

> ID：10145803
> 
> 赞同：0
> 
> 时间：2012-04-13T17:51:53.150
> 
> 标签：jquery-plugins, jquery-isotope

我已经在使用 scrollTo，但是如果它胜过它，它可以被废弃或替换为其他东西（它只是从顶部导航跳到页脚部分）。

目标是使用同位素过滤来过滤项目列表，并最好突出显示上面选定的过滤器链接（尽管我相当肯定，一旦我让同位素位以基本形式运行，我就会让它工作，但不会不要拒绝任何帮助以使这一切立即发生）。

我正在使用 jQ 1.7.1 和同位素，两个缩小版本以及 scrollTo 1.4.2 缩小。你可以在这里看到完整的一点：http: [//beta.wildcatbelts.com/wrestling-belt-gallery-ren.php](http://beta.wildcatbelts.com/wrestling-belt-gallery-ren.php)

我的jq：

```
$(window).load(function(){

var $container = $('#blist');

$container.isotope({
    itemSelector : 'ul#blist > li'
});

$('#ncont a').click(function(){
    $.scrollTo( '#fcont', 1200, {axis:'y'} );   
});

$('#filters a').click(function(){
    var selector = $(this).attr('data-filter');
    $container.isotope({ filter: selector });
    return false;
});

}); 
```

以：

```
$(document).ready(function(){ 
```

...（我习惯于经常看到）不起作用，因为另一个页面（只是主页）上的另一个（旧的，废弃的）插件失败了。我很乐意在必要的页面上使用每个版本，以使它们都正常工作。

我的标记：

```
 <ul id="filters" class="option-set" data-option-key="filter">
    <li><a href="#" data-filter="*" class="selected">Show All</a></li>
    <li><a href="#" data-filter=".P5">5 Plates</a></li>
    <li><a href="#" data-filter=".P3">3 Plates</a></li>
    [ * several more filters]
  </ul>

  <ul id="blist">
    <li class="belts P5"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P5"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P5"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P0"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P5"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P3"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P5"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P5"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P0"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P0"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P5"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    <li class="belts P3"><a href="/example.php"><img src="/images/pic.jpg" alt="alt text" /><span>caption</span></a></li>
    [ * many, many more ]
  </ul> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:02:24.177

您的过滤器不起作用是因为`itemSelector`找不到任何匹配的内容。选择器应该就像`.belts`它已经在`$container`元素中一样。

这是更新的 Javascript（我忽略了这`scrollTo`部分）：

```
$(function(){

  // set up jquery isotope
  var $container = $('#blist');

  $container.isotope({
    itemSelector : '.belts'
  });

  $('#filters a').click(function(){

    // manage classes for selected/clicked on links
    if ($(this).hasClass('selected')) {
      $(this).removeClass('selected');
    } else {
      $(this).addClass('selected');          
    }

    // get the current selection and apply the filter
    var selector = $(this).attr('data-filter');
    $container.isotope({ filter: selector });
    return false;
  });
}); 
```

您可以创建一个`#filters a.selected`类来设置过滤部分中任何选定链接的样式，正如我在 Javascript 中添加的那样。

jQuery Isotope 文档中的这个页面解释了如何进行[组合过滤器](http://isotope.metafizzy.co/demos/combination-filters.html) ，并且在 GitHub 问题中讨论了关于[组合（AND 和 OR）过滤器](https://github.com/desandro/isotope/issues/144)的讨论。

# c++ - 无法使用 BitScanForward64

> ID：10145805
> 
> 赞同：6
> 
> 时间：2012-04-13T17:51:57.783
> 
> 标签：c++, visual-c++, intrinsics, visual-c++-2012

我正在用 C++ 构建一个使用位板（__int64s）的国际象棋引擎，我需要使用 BitScanForward64 来进行一些计算。但是当我调用它时，我得到了这个错误：

> 错误 C3861：“_BitScanForward64”：未找到标识符

我像这样包括它：

```
#include <intrin.h>
#pragma intrinsic(_BitScanForward64) 
```

BitScanForward64 也是如此。

我在*Windows 7 (64 bit)上使用**Visual Studio 11*。CPU：*英特尔酷睿 i7-2600K*

 **我以前没有用 c++ 做过很多项目，所以我不知道为什么会这样。请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T17:59:22.533

_BitScanForward64 仅在 x64 版本中可用。如果您的目标是 Win32，则唯一可用的内在函数是 _BitScanForward。**

# java - Java中的生产者消费者

> ID：10145813
> 
> 赞同：1
> 
> 时间：2012-04-13T17:52:37.707
> 
> 标签：java, producer-consumer, blockingqueue

我已经编写了以下代码，但我觉得我在某个地方出错了：

```
public class ProcessQueue {

static BlockingQueue<String> queue = new LinkedBlockingQueue<String>();

public ProcessQueue() {
    process();
}

public void add(String message) throws InterruptedException {
    System.out.println("Added Queue size:" + queue.size());
    System.out.println("Locked by Producer");
    queue.put(message);
    System.out.println("Lock Released by Producer");
}

public static void process() {
    new Thread() {

        @Override
        public void run() {
            try {
                while (true) {
                    System.out.println("Locked by Consumer");
                    Message.send(queue.take());
                    System.out.println("Locked Released by Consumer");
                    System.out.println("Consuming Queue size:" + queue.size());
                }
            } catch (Exception ex) {
                System.out.print(ex.getMessage());
            }
        }
    }.start();
}
} 
```

这里 add(String) 将字符串添加到队列中。每当它接收到来自 UDP 端口的输入时，就会调用它。process() 处理队列并将其发送给 Message 类进行处理。输出 Locked and Released Print Statements 的顺序不理想。

**编辑**

我的预期答案应该是：如果它在 Producer 中添加，则由 Producer 锁定 -> 然后添加到队列 -> 锁定释放。同样的方式将在消费者中。但是操作不应该交错，即一旦被生产者锁定打印它不应该打印被消费者锁定然后释放锁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:18:23.117

唯一一次阻塞发生在队列为空时。否则看跌期权将继续发生。所以你可能会看到队列的大小没有增加一。您可能希望对 LinkedBlockingQueue 设置一个界限。仅供参考，LBQ 是默认无界的

根据您的编辑进行编辑：

到目前为止，我的回答是解释你所看到的以及为什么。您正在寻找一个同步消息传递队列。您可以使用以下方法执行此操作：

```
new SynchrnousQueue();
new LinkedBlockingQueue(1);
new ArrayBlockingQueue(1);
new TransferQueue(); 
```

SynchrnousQueue 完全符合您的要求。边界为 1 的 Linked&ArrayBlockingQueue 几乎是一样的。TransferQueue 是 Java 7 中提供的一个新队列，它具有`transfer`等待线程准备好获取的方法。

# .net - 为什么命名 .NET 互斥体在处置时不抛出 AbandonedMutexException？

> ID：10145814
> 
> 赞同：1
> 
> 时间：2012-04-13T17:52:41.190
> 
> 标签：.net, synchronization, mutex, abandonedmutexexception

我不明白为什么 .NET 互斥锁不会在其中一个等待线程中抛出或在调用`AbandonedMutexException`时释放互斥锁。`Mutex.Dispose()`

特别是，像这样的代码会死锁：

```
public static void testCall()
{
    using (var mutex = new System.Threading.Mutex(false, "testname"))
    {
        mutex.WaitOne();
        Console.WriteLine("second call");
    }
}

public static void Main(string[] args)
{
    var thread = new System.Threading.Thread(testCall);
    using (var mutex = new System.Threading.Mutex(false, "testname"))
    {
        mutex.WaitOne();
        Console.WriteLine("first call");
        thread.Start();
        System.Threading.Thread.Sleep(new TimeSpan(0, 0, 5));
        Console.WriteLine("sleep done");
    }

    thread.Join();
} 
```

请注意，我知道它`AbandonedMutexException`通常来自底层的 WIN32 互斥体，并且只有在拥有线程死亡的情况下才会触发本机代码 - 我已经编写 C/C++ 代码很长时间并且完全了解底层设计。我也知道以下代码是一个简单的解决方法：

```
using (var mutex = new System.Threading.Mutex(false, "testname"))
{
    mutex.WaitOne();
    try
    {
        Console.WriteLine("first call");
        thread.Start();
        System.Threading.Thread.Sleep(new TimeSpan(0, 0, 1));
        Console.WriteLine("sleep done");
    }
    finally
    {
        mutex.ReleaseMutex();
    }
} 
```

我不明白的是，当对象在持有锁的同时被显式处理时，.NET 互斥锁不强制释放的基本原理。这不是更符合 .NET 编程范式的其余部分吗？如果/当开发人员显式销毁锁定的互斥锁时……只有将其标记为已放弃才有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:38:01.350

您可能不希望它按照您建议的方式工作。假设你有这个：

```
using (var m = new Mutex(....))
{
    m.WaitOne();
    // do some stuff here
    // that ends up throwing an exception
} 
```

当您的线程持有互斥锁时，将引发异常。如果互斥锁作为处置的一部分被释放，那么其他一些线程可以获得互斥锁并开始参与您正在更新的数据。除了现在数据处于未知（可能不一致或损坏）状态。

当然，最好处理异常并清理东西，但我宁愿保持互斥锁保持不变（或者如果线程死了就放弃），以便下一个尝试获取互斥锁的线程知道发生了一些不好的事情.

除了上述之外，添加自动释放还需要 .NET 包装器跟踪哪个线程拥有互斥锁。并且该`Dispose`方法必须检查该值以确定它是否应该调用`ReleaseMutex`. 而且不可能跟踪它。.NET 程序可以将互斥锁句柄传递给一些非托管代码，这些代码可以在包装器不知情的情况下获取或释放互斥锁。

所以，答案是双重的：首先，这是不可能的。其次，即使有可能，您也可能不希望这种行为。

# c# - C# 实体框架分页

> ID：10145815
> 
> 赞同：20
> 
> 时间：2012-04-13T17:52:42.213
> 
> 标签：c#, entity-framework, pagination

有没有一种方法可以获取复杂 Linq 查询的行数和数百万条记录***，而无需***两次访问数据库或编写 2 个单独的查询？

我可能有我自己的建议。写一个存储过程，但我擅长 MySQL 而不是 MSSQL。

任何更好的建议都会很棒。另外，如果有人知道微软是否正在努力将此功能添加到实体框架中。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-16T22:58:33.213

我建议使用 Take() 函数。这可用于指定要从 linq 查询或列表中获取的记录数。例如

```
List<customers> _customers = (from a in db.customers select a).ToList();
var _dataToWebPage = _customers.Take(50); 
```

我在 MVC 应用程序中使用了类似的技术，我将 _customers 列表写入会话，然后在用户单击第 2、3 页等时使用此列表进行进一步的分页查询。这样可以保存多个数据库命中。但是，如果您的列表非常大，那么也将其写入会话可能不是一个好主意。

对于分页，您可以一起使用 Skip() 和 Take() 函数。例如获取数据的第 2 页：

```
var _dataToWebPage = _customers.Skip(50).Take(50); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-26T10:30:39.360

我最近受到（复制自）这篇代码项目文章 [实体框架分页的启发](https://www.codeproject.com/Tips/1080844/Pagination-with-Entity-Framework)

编码：

```
public async Task<IList<SavedSearch>> FindAllSavedSearches(int page, int limit)
{
    if (page == 0)
        page = 1;

    if (limit == 0)
        limit = int.MaxValue;

    var skip = (page - 1) * limit;

    var savedSearches = _databaseContext.SavedSearches.Skip(skip).Take(limit).Include(x => x.Parameters);
    return await savedSearches.ToArrayAsync();
} 
```

我没有使用实体框架的经验，也没有测试过它的性能，所以请谨慎使用:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T18:23:18.803

显示数百万条记录的常用方法是不显示所有页面。想一想：如果您有数百万条记录，例如每页 20 甚至 100 项，那么您将拥有数万页。把它们都展示出来是没有意义的。您可以简单地加载当前页面并提供指向下一页的链接，就是这样。或者您可以加载 100-500 条记录，但仍然只显示一个页面并使用加载的记录信息为前几页生成页面链接（因此要确定有多少下一页可用）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-20T12:58:45.297

如果您需要快速解决方案，可以使用 XPagedList [https://github.com/dncuug/X.PagedList](https://github.com/dncuug/X.PagedList)。XPagedList 是一个库，可让您轻松获取 IEnumerable/IQueryable，将其分割成“页面”，并通过索引获取特定“页面”。例如

```
var products = await _context.Products.ToPagedListAsync(pageNumber, pageSize) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-19T07:05:59.883

在 sql server 上很容易。你可以写这个查询：

```
select count() over(), table.* from table 
```

count () over() 将返回结果中的总行数，因此您不需要运行两个查询。请记住，您应该在上下文中运行原始 sql 或使用返回结果的 dapper 作为视图模型

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-11T04:59:40.710

我创建了一个为您进行分页的 nuget 库。[https://github.com/wdunn001/EntityFrameworkPaginateCore](https://github.com/wdunn001/EntityFrameworkPaginateCore)

将nuget添加到项目

安装包 EntityFrameworkPaginateCore 添加

使用 EntityFrameworkPaginateCore；给你的供应商

有 1 个方法和 2 个重载，该方法重载允许排序和过滤。使用排序对象和过滤器对象

```
public async Task<Page<Example>> GetPaginatedExample(
            int pageSize = 10, 
            int currentPage = 1, 
            string searchText = "", 
            int sortBy = 2
            )
        {
            var filters = new Filters<Example>();
                filters.Add(!string.IsNullOrEmpty(searchText), x => x.Title.Contains(searchText));

            var sorts = new Sorts<Example>();
            sorts.Add(sortBy == 1, x => x.ExampleId);
            sorts.Add(sortBy == 2, x => x.Edited);
            sorts.Add(sortBy == 3, x => x.Title);

            try
            {
                return await _Context.EfExample.Select(e => _mapper.Map<Example>(e)).PaginateAsync(currentPage, pageSize, sorts, filters);
            }
            catch (Exception ex)
            {
                throw new KeyNotFoundException(ex.Message);
            }
        } 
```

# php - 字符串中的自动链接不适用于短链接

> ID：10145817
> 
> 赞同：1
> 
> 时间：2012-04-13T17:52:52.133
> 
> 标签：php, url, anchor

我需要一个表单来自动链接用户在文本字段中输入的链接。我在堆栈上找到了一个完美运行的示例，除了一件事。如果用户输入的链接不包含`http://`or`https://`而是仅使用`www.`该链接启动链接将无法正常工作。

即用户输入将是

```
check out our twitter!
www.twitter.com/#!/profile

and our facebook!
https://www.facebook.com/profile 
```

输出将是

```
check out our twitter!
<a href="www.twitter.com/#!/profile">www.twitter.com/#!/profile</a>

and our facebook!
<a href="https://www.facebook.com/profile">http://www.facebook.com/profile</a> 
```

所以 facebook 链接可以完美运行，但 twitter 不会，因为它链接到用户所在的当前位置加上新链接，即如果他们当前在链接上`www.example.com`，则链接将变为`www.example.com/www.twitter.com/#!/profile`

对于我的生活，我无法弄清楚如何通过简单地将 http:// 添加到链接的开头来解决这个问题，这是功能：

```
function auto_link_text($text) {
    $pattern  = '#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#';
    return preg_replace_callback($pattern, 'auto_link_text_callback', $text);
}

function auto_link_text_callback($matches) {
     $max_url_length = 50;
    $max_depth_if_over_length = 2;
    $ellipsis = '&hellip;';

    $url_full = $matches[0];
    $url_short = '';

    if (strlen($url_full) > $max_url_length) {
        $parts = parse_url($url_full);
        $url_short = $parts['scheme'] . '://' . preg_replace('/^www\./', '',  $parts['host']) . '/';

    $path_components = explode('/', trim($parts['path'], '/'));
    foreach ($path_components as $dir) {
        $url_string_components[] = $dir . '/';
    }

    if (!empty($parts['query'])) {
        $url_string_components[] = '?' . $parts['query'];
    }

    if (!empty($parts['fragment'])) {
        $url_string_components[] = '#' . $parts['fragment'];
    }

    for ($k = 0; $k < count($url_string_components); $k++) {
        $curr_component = $url_string_components[$k];
        if ($k >= $max_depth_if_over_length || strlen($url_short) + strlen($curr_component) > $max_url_length) {
            if ($k == 0 && strlen($url_short) < $max_url_length) {
                // Always show a portion of first directory
                $url_short .= substr($curr_component, 0, $max_url_length - strlen($url_short));
            }
            $url_short .= $ellipsis;
            break;
        }
        $url_short .= $curr_component;
    }

} else {
    $url_short = $url_full;
}

    return "<a rel=\"nofollow\" href=\"$url_full\">$url_short</a>";
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T17:57:38.653

使用 strpos 函数。如果输入包含“http://”直接转发。否则直接添加它。

# asp.net - 在 ASP.NET 中读取 windows 传真服务作业状态

> ID：10145818
> 
> 赞同：0
> 
> 时间：2012-04-13T17:52:55.227
> 
> 标签：asp.net, iis, com-interop, fax

我开发了一个网站来显示我们传真服务器的工作状态。我使用 Windows 传真服务（fxscomex.dll 互操作）。当我从 VS2010 调试（使用开发服务器）时，一切都很好，我可以读取作业状态，但是当我在 IIS 下运行我的网站时，作业队列总是空的。

这是我检查已发送项目的代码：

```
FaxOutgoingMessageIterator sentItems = fxServer.Folders.OutgoingArchive.GetMessages(100);
sentItems.MoveFirst();
while (!sentItems.AtEOF)
{
    Response.Write(itm.Recipient.Name);
    sentItems.MoveNext();
} 
```

在 IIS 上，sentItems.AtEOF 始终为真。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:28:36.453

我从 asp.net 论坛收到了这个答案，它奏效了！

*标识不同于 Visual Studio 和 IIS 应用程序池。您可以尝试将 IIS 应用程序池的身份更改为本地系统或您的机器/域帐户或事件管理员尝试一下。*

但是其他内置帐户不起作用，但是当我将应用程序池身份设置为管理员用户时，它起作用了。

# android - 如何在系统中伪造触摸事件

> ID：10145819
> 
> 赞同：2
> 
> 时间：2012-04-13T17:52:58.940
> 
> 标签：android

是否可以在 android 上进行“假”触摸事件？（如果有必要使用 root 访问权限）该应用程序将在后台运行，并让其他应用程序认为存在“真实”触摸事件。

我希望这个应用程序允许 iControlPad（蓝牙控制器）通过按下（硬件）按钮来进行触摸事件。

谢谢！

# database - 在这种情况下，LDAP 比数据库更受欢迎

> ID：10145820
> 
> 赞同：-1
> 
> 时间：2012-04-13T17:53:04.453
> 
> 标签：database, jakarta-ee, ldap

任何人都可以让我知道在哪些情况下更喜欢 LDAP 而不是使用数据库？

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:57:15.050

直接摘录：做一些搜索，这很容易找到......

[什么时候应该使用 LDAP 来存储数据？](http://www.ldapman.org/articles/intro_to_ldap.html)

大多数 LDAP 服务器都针对读取密集型操作进行了高度优化。因此，从 LDAP 目录读取数据与从针对 OLTP 优化的关系数据库服务器获取相同数据时，通常可以看到一个数量级的差异。然而，由于这种优化，大多数 LDAP 目录不太适合存储经常更改的数据。例如，LDAP 目录服务器非常适合存储公司的内部电话目录，但甚至不要考虑将其用作大容量电子商务站点的数据库后端。

如果以下每个问题的答案都是肯定的，那么将您的数据存储在 LDAP 中是一个好主意。

您希望您的数据跨平台可用吗？您是否需要从多台计算机或应用程序访问这些数据？平均而言，您存储的单个记录是否每天更改几次或更少？将此类数据存储在平面数据库而不是关系数据库中是否有意义？也就是说，您能否有效地将给定项目的所有数据存储在一条记录中？这最后一个问题常常让人们停下来，因为访问平面记录以获取本质上是关系的数据是很常见的。例如，公司员工的记录可能包括该员工经理的登录名。使用 LDAP 存储此类信息很好。经验法则：如果您可以想象将数据存储在大型电子通讯录中，那么您可以轻松地将其存储在 LDAP 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:56:35.987

LDAP 是一个协议，而不是一个系统。您可能指的是目录服务器。具有 > 90 % 只读访问权限的树状组织数据。

# java - JNLP 文件：不创建桌面快捷方式

> ID：10145823
> 
> 赞同：1
> 
> 时间：2012-04-13T17:53:07.720
> 
> 标签：java, desktop, shortcut, jnlp, java-web-start

在我们的 webstart JNLP 文件中，我已经删除了快捷方式和桌面标签，但是在安装 webstart 应用程序时，它仍然提示我是否要创建桌面快捷方式。

所以在信息标签中它看起来像这样：

```
<information>
    <title>Dynamic Tree Demo</title>
    <vendor>Dynamic Team</vendor>
    <icon href="sometree-icon.jpg"/>
</information> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:03:39.077

您最好的选择是将查询参数添加到`href` 例如，如果当前值为`the.jnlp`，则进行`the.jnlp?a=b`。JWS 客户端会假定它是动态生成的，通常不会创建桌面快捷方式。

我说“一般”，因为这完全取决于 JWS 客户端及其配置方式。

# c++ - 在赋值有效的 C++ 右侧使用预减运算符吗？

> ID：10145824
> 
> 赞同：0
> 
> 时间：2012-04-13T17:53:09.607
> 
> 标签：c++, stl, pre-increment

我几乎从不在任何地方放 ++ 或 -- 除了单独的行。我知道它们会导致未定义的行为，并且可能会成为调试的地狱。但出于冗长的目的，我很受诱惑。这是有效的代码吗？

```
map<int, int> dict;

...

int key = ...;
if (dict.lower_bound(key) != dict.begin()) {
  int prevval = (--dict.lower_bound(key))->second;
  ...
} 
```

我*只想*做

```
int prevval = (dict.lower_bound(key)-1)->second; 
```

但是双向迭代器没有`operator-()`定义。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:54:41.387

是的，它完全有效并且按预期工作。

使用这些运算符时未定义的行为通常来自在序列点之间多次修改变量，这不是你的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:09:42.980

实际上你正在做一个初始化而不是一个赋值，但这并没有改变任何东西。

但是，您的代码是有效的，因为在应用所有运算符的顺序上没有选择。如果可以将表达式拆分为可以按任意顺序评估的子表达式，则必须小心。

# fatal-error - 致命错误：调用未定义的方法 simple_html_dom::first_child()

> ID：10145826
> 
> 赞同：0
> 
> 时间：2012-04-13T17:53:33.260
> 
> 标签：fatal-error, simple-html-dom

有时，当我使用简单的 html dom 方法时，例如 save()、children()、first_child()，我会收到一个错误，提示 Call to undefined method。为什么我得到这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:50:51.610

我不确定这个迟到的答案是否对您有用。我收到了相同的错误消息，并发现对于 simple_html_dom，用法如下：

$h = 新的 simple_html_dom；$h -> 加载（$your_html_string）；// 例如等等等等等等...而不是使用（非常重要）：$h -> fist_child(); 你需要：

$f ->$h -> find($tag, 0); //这里 $tag 是 'div' $f -> first_child;

不幸的是，如果你不知道你的标签，你需要使用 preg_match 来获取它。希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T12:27:36.767

也许它不是 node 或 null 所以，你必须检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T00:09:00.447

简单的 html dom 公开了两个类。simple_html_dom_node 和 simple_html_dom。如果您尝试在 dom 上使用节点方法，反之亦然，则会导致此错误。

# objective-c - 为什么使用两种类型（边界/框架）来描述视图而不是一种？

> ID：10145828
> 
> 赞同：1
> 
> 时间：2012-04-13T17:53:43.993
> 
> 标签：objective-c, ios, xcode, cocoa

我想知道为什么有两种类型（边界/框架）来描述视图。由于更改视图的 bounds.size.* 也会更改该视图的 frame.size.* ，反之亦然，这意味着 frame 和 bounds 之间的唯一区别是它们的原点，那么为什么我们需要两种不同的类型来描述视图几何？顺便说一下*bounds.origin*到底是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T17:55:41.290

取自 CocoaDev ：

*   **框架**在视图的*superview*的坐标空间中表示。
*   **边界**在视图自己的*坐标空间*中表示。

**视觉解释**（Apple Developer Reference）：

![在此处输入图像描述](../Images/810a686406d3a40fbcb46c1383f51494.png)

**参考：http:** [//developer.apple.com/documentation/Cocoa/Conceptual/DrawViews/Concepts/ViewHierarchy.html](http://developer.apple.com/documentation/Cocoa/Conceptual/DrawViews/Concepts/ViewHierarchy.html)

# .htaccess - 子域 .htaccess 问题的子目录

> ID：10145833
> 
> 赞同：0
> 
> 时间：2012-04-13T17:53:54.680
> 
> 标签：.htaccess, mod-rewrite

我正在尝试将子目录重定向到子域，但它下面的 RewriteBase 似乎导致错误 500。如何使重定向发生在子目录上，并且仍然让所有其他规则在子域上工作？

```
Options +FollowSymlinks
RewriteEngine On

# redirect to mbp subdomain
RewriteCond %{HTTP_HOST} !^mbp\.fasttracksites\.com
RewriteCond %{REQUEST_URI} ^/mbp/
RewriteRule ^(.*)$ http://mbp.fasttracksites.com/$1 [R=301,END,QSA]

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# MBP Rules
RewriteRule ^module/([A-Za-z-_]+)/([A-Za-z-_]+)/?$ /index.php?p=module&prefix=$1&module_page=$2 [NC,QSA,L]
RewriteRule ^module/([A-Za-z-_]+)/([A-Za-z-_]+)/([A-Za-z-_]+)/?$ /index.php?p=module&prefix=$1&module_page=$2&page=$3 [NC,QSA,L]
RewriteRule ^module/([A-Za-z-_]+)/([A-Za-z-_]+)/([0-9]+)/?$ /index.php?p=module&prefix=$1&module_page=$2&id=$3 [NC,QSA,L]
RewriteRule ^([A-Za-z-_]+)/?$ /index.php?p=$1 [NC,QSA,L]
RewriteRule ^([A-Za-z-_]+)/([A-Za-z-_]+)/?$ /index.php?p=$1&s=$2 [NC,QSA,L]
RewriteRule ^([A-Za-z-_]+)/([A-Za-z-_]+)/([0-9]+)/?$ /index.php?p=$1&s=$2&id=$3 [NC,QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T11:39:55.413

RewriteBase 永远不应该给出 500 错误。

问题在于`END`您正在使用的不存在的标志。我想你的意思是`L`国旗。

```
RewriteRule ^(.*)$ http://mbp.fasttracksites.com/$1 [R=301,L,QSA] 
```

# clojure - 如何将 web.xml 文件与 noir 一起使用？

> ID：10145836
> 
> 赞同：4
> 
> 时间：2012-04-13T17:54:19.040
> 
> 标签：clojure, jetty, embedded-jetty, noir

我正在用 clojure 编写一个网络应用程序，并想编辑 Jetty 的设置。一种方法是使用 web.xml 文件。如何在 Jetty 中使用 web.xml 文件？

# xml - 无法添加 xmlns:xlink 作为属性。

> ID：10145837
> 
> 赞同：2
> 
> 时间：2012-04-13T17:54:20.107
> 
> 标签：xml, xslt, xpath, xslt-2.0

我正在制作一个 XSLT 2.0，它接受一个 xml 并吐出更小的解析 xml。其中一个元素需要看起来像这样

```
<article xml:lang="en" article-type="editorial"
xmlns:xlink="http://www.w3.org/1999/xlink"> 
```

我创建了 xml:lang 作为属性，与文章类型相同。但是当我尝试执行 xmlns:xlink 时，它告诉我 xmlns:xlink 是一个无效的属性名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:29:40.093

您需要将命名空间 ( `xmlns:xlink="http://www.w3.org/1999/xlink"`) 添加到您的`xsl:stylesheet`.

例子：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:xlink="http://www.w3.org/1999/xlink">
...
</xsl:stylesheet> 
```

此外，如果您尝试将其添加到元素而不直接输入，请使用`xsl:namespace`：

```
<article>
  <xsl:namespace name="xlink" select="'http://www.w3.org/1999/xlink'"/>
</article> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T01:27:50.007

除了 DevNull 的正确答案，前提是要生成的元素的名称是预先知道的（不是动态计算的），您可以在代码中包含：

```
<article  xmlns:xlink="http://www.w3.org/1999/xlink"> 
  <!-- Create necessary attributes here -->
</article> 
```

在这种情况下，很可能简化属性的创建，如果它们的名称是预先知道的，即使它们的值是动态计算的：

```
<article  xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="{$vLang}" 
          article-type="{$vartType}" > 
  <!-- Generate any content here -->
</article> 
```

# encryption - 简单的 SSL 如何完成服务器到客户端的通信？

> ID：10145838
> 
> 赞同：2
> 
> 时间：2012-04-13T17:54:26.520
> 
> 标签：encryption, ssl

SSL 服务器是否会为每个连接的客户端随机生成一个临时密钥对？

我了解公钥加密的工作原理——公共加密密钥、秘密解密密钥。这解释了具有 SSL 证书的主机如何从客户端接收加密数据。但是 SSL 服务器如何将加密数据发送回客户端呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:07:36.040

(There was a discussion on this topic in [this question](https://stackoverflow.com/a/9318024/372643), although it was edited a number of times, so it may be confusing.)

The public key in the server certificate is only used during the handshake. During the handshake, the client and server negotiate a secret shared key (a new one for each session) that they use for the actual encryption.

How this secret is negotiated depends on the cipher suite: [RSA or Diffie-Hellman](https://www.rfc-editor.org/rfc/rfc4346#appendix-F.1.1) key exchange. When using RSA key exchange, the client encrypts the pre-master-secret and sends it to the server (who is the only one able to decrypt it). When using DH, the client verifies the signature of the temporary parameters sent by the server during the DH exchange: the end result is also a shared pre-master-secret. This is then used with the exchanged random values by both parties to compute the master secret.

There are more details in the TLS specification section called ["Handshake Protocol Overview"](https://www.rfc-editor.org/rfc/rfc4346#section-7.3).

# javascript - jQuery 的数据显示问题

> ID：10145845
> 
> 赞同：0
> 
> 时间：2012-04-13T17:54:50.170
> 
> 标签：javascript, jquery

我正在根据我在 ajax 调用中获得的 XML 数据制作表格。通话工作正常，我得到了正确的数据。但是，当我创建表时，第一个表中的数据被添加到第二个表中，然后都被添加到第三个表中，依此类推。

这是代码：

```
 function loadAcct(acctid,acctName){
            //removes the current li elements from our list before making new ones.

            $("#title-name").append(" - "+acctName);

            //ajax call to the server to get the needed information.

            $.ajax({

                url: "/_admin_/"+ acctid + "-grps.xml",

                contentType: "xml",

                type: "GET",

                async: false,

                success: function(xml){

                    //loop to find the name of the <SavedCart> elements

                    $("#demo").append('<div id="tabs"><ul></ul></div>');

                    $(xml).find('SavedCart').each(function(){

                        $(this).find("Name").each(function(){

                            groupName = $(this).text();

                            groupNameUp = groupName.toUpperCase(groupName);

                            // We only want to output the groups that have CRIB in the name

                            if(groupNameUp.indexOf("CRIB") != -1){

                                $("ul").append("<li><a href=\"#tabs-" + p + "\">" + groupName + "<\/a><\/li>");

                                $(this).parent().find('ItemList').each(function(){

                                    $(this).find('Item').each(function(){

                                        partNums.push( $('PartNumber',this).text())

                                        descs.push( $('Description',this).text())

                                        //cpns.push( $('CustomerPartNumber',this).text())

                                    })

                                })

                                for(c=0;c<partNums.length;c++){
                                    for(d=0;d<pn.length;d++){
                                        if(partNums[c] == pn[d]){
                                            cpns1[c] = cpns[d];
                                            mins1[c] = mins[d];
                                            maxs1[c] = maxs[d];
                                            boxqtys1[c] = boxqtys[d];
                                            break;
                                        }else{
                                            cpns1[c] = "";
                                            mins1[c] = "";
                                            maxs1[c] = "";
                                            boxqtys1[c] = "";
                                        }
                                    }
                                }

                                if (partNums.length > 0){

                                    var table = '<div id="tabs-' + p + '" class = remove><form id="orderform' + p + '" name="orderform' + p + '" action="order.php" method="POST" enctype="multipart/form-data" onSubmit="return checkpo(' + acctid + ', ' + p + ')"><table border="1" cellpadding="10" name="mytable' + p + '" id="mytable' + p + '" class="sortable"><thead><tr><th>On Hand<\/th><th>Eclipse ID<\/th><th>Customer Part Number<\/th><th>Description<\/th><th>Minimum<\/th><th>Maximum<\/th><\/th><th>Box Qty<\/th><th>Amount to Order<\/th><th>Select For Order<\/th><\/tr><\/thead><tbody id="maintablebody" >';

                                    for(l=0;l<partNums.length;l++){

                                        table += '<tr><td><input type="text" id="onhand' + l + '" class="onhand' + l + '" size="5" onchange="autocheckbox(' + l + ')"></td><td>' + partNums[l] + '<\/td><td>' + cpns1[l] + '<\/td><td>' + descs[l] + '<\/td><td class="min' + l + '">' + mins1[l] + '<\/td><td class="max' + l + '">' + maxs1[l] + '<\/td><td class="bxqty' + l + '">' + boxqtys1[l] + '<\/td><td class="tdamt'+ l +'"><input type="text" name="amt[]" id="amt[]" class="amt' + l +'" size="6" onchange="chkfrmamt(' + l + ')" /><\/td><td style="text-align: center;"><input type="checkbox" name="check[]" id="check[]" value="' + partNums[l] + '" class="check' + l +'" onClick="autofill(' + l + ')" /><\/td><\/tr>';

                                    }

                                    table += '<tr><td colspan="8"><label>PO Number:<\/label><input type="text" id="PO" name="PO" class="PO' + p + '" width="20" \/><\/td><\/tr><\/tbody><\/table><div id="submit"><input type="submit" id="sub" value="Order" /><input type="reset" value="Reset" name="reset" /></div><input type="hidden" id="SessID" value="' + sessID + '" name="SessID" \/><input type="hidden" id="eID" value="' + acctid + '" name="eID" \/><\/form><\/div>';

                                    $("#tabs").append(table);

                                    p++;

                                    m = p;

                                }

                            }

                        })
                        //clearArr();
                    })

                }

            })
            for(q=0;q<=m;q++){
                $("table#mytable" + q + " tr:odd").addClass("alt");
            }

            $( "#tabs" ).tabs();
        } 
```

一个正确方向的点会有很大帮助。

这是所要求的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<SP-XML>
   <SavedCartItemList>
  <SavedCart>
     <EntityID>7429</EntityID>
     <ContactID>0</ContactID>
     <Type>group</Type>
     <Name>CRIB2</Name>
     <Description/>
     <Min/>
     <Max/>
     <Location/>
     <ShipTo>0</ShipTo>
     <ShipVia/>
     <ShipComplete>No</ShipComplete>
     <BlindShip>No</BlindShip>
     <ShipComments/>
     <ReleaseNumber/>
     <Date>08/01/2011</Date>
     <Total>0.0</Total>
     <DataSource>XML</DataSource>
     <SiteCode/>
     <CustomerPO/>
     <OrderNotes/>
     <ShippingInstructions/>
     <ShipToName/>
     <ShipAddrLine1/>
     <ShipAddrLine2/>
     <ShipCity/>
     <ShipState/>
     <ShipZip/>
     <ShipPhone/>
     <ShipEmailAddr/>
     <ShipReqDate/>
     <OrderByName/>
     <OrderByEmail/>
     <ItemList>
        <Item>
           <PartNumber>494261</PartNumber>
           <Description>EGS  BL-50 1/2 STEEL LOCKNUT</Description>
           <Quantity>1</Quantity>
           <UOM>ea</UOM>
           <CustomerPartNumber>2</CustomerPartNumber>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>494265</PartNumber>
           <Description>EGS  BL75 3/4 STEEL LOCKNUT</Description>
           <Quantity>1</Quantity>
           <UOM>ea</UOM>
           <CustomerPartNumber>3</CustomerPartNumber>
           <Comment/>
           <Thumbnail/>
        </Item>

     </ItemList>
  </SavedCart>
  <SavedCart>
     <EntityID>7429</EntityID>
     <ContactID>0</ContactID>
     <Type>group</Type>
     <Name>CRIB3</Name>
     <Description/>
     <Min/>
     <Max/>
     <Location/>
     <ShipTo>0</ShipTo>
     <ShipVia/>
     <ShipComplete>No</ShipComplete>
     <BlindShip>No</BlindShip>
     <ShipComments/>
     <ReleaseNumber/>
     <Date>01/01/2000</Date>
     <Total>0.0</Total>
     <DataSource>XML</DataSource>
     <SiteCode/>
     <CustomerPO/>
     <OrderNotes/>
     <ShippingInstructions/>
     <ShipToName/>
     <ShipAddrLine1/>
     <ShipAddrLine2/>
     <ShipCity/>
     <ShipState/>
     <ShipZip/>
     <ShipPhone/>
     <ShipEmailAddr/>
     <ShipReqDate/>
     <OrderByName/>
     <OrderByEmail/>
     <ItemList>
        <Item>
           <PartNumber>496987</PartNumber>
           <Description>IDEA 31-388 CLEARGLIDE QT BOTTLE</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>559215</PartNumber>
           <Description>SIEM Q120 BREAKER 20A 1P 120V 10K QP</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber>215</CustomerPartNumber>
           <Comment/>
           <Thumbnail/>
        </Item>
     </ItemList>
  </SavedCart>
  <SavedCart>
     <EntityID>7429</EntityID>
     <ContactID>0</ContactID>
     <Type>group</Type>
     <Name>JIM</Name>
     <Description/>
     <Min/>
     <Max/>
     <Location/>
     <ShipTo>0</ShipTo>
     <ShipVia/>
     <ShipComplete>No</ShipComplete>
     <BlindShip>No</BlindShip>
     <ShipComments/>
     <ReleaseNumber/>
     <Date>01/01/2000</Date>
     <Total>0.0</Total>
     <DataSource>XML</DataSource>
     <SiteCode/>
     <CustomerPO/>
     <OrderNotes/>
     <ShippingInstructions/>
     <ShipToName/>
     <ShipAddrLine1/>
     <ShipAddrLine2/>
     <ShipCity/>
     <ShipState/>
     <ShipZip/>
     <ShipPhone/>
     <ShipEmailAddr/>
     <ShipReqDate/>
     <OrderByName/>
     <OrderByEmail/>
     <ItemList>
        <Item>
           <PartNumber>1950428</PartNumber>
           <Description>AB   1794-AENT ETHERNET ADAPTER W/24V DC POWEL SUPPLY, TWIST PR</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>13083</PartNumber>
           <Description>AB   1794-ASB RIO ADAPTER</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>2917</PartNumber>
           <Description>AB   1794-IA16 85-132V AC INPUT MODULE, 16 POINT</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>2693</PartNumber>
           <Description>AB   1794-IB16 24V DC SINK INPUT MODULE, 16 POINT</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>23729</PartNumber>
           <Description>AB   1794-IB32 24 VDC INPUT MODULE, 32 POINTS</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>2696</PartNumber>
           <Description>AB   1794-IE8 ANALOG INPUT MODULE, 12 BIT, 8 POINT</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>2923</PartNumber>
           <Description>AB   1794-OA16 85-132V AC OUTPUT MODULE, 16 POINT</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>2715</PartNumber>
           <Description>AB   1794-OB16 24V DC SOURCE OUTPUT MODULE, 16 POINT</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>13084</PartNumber>
           <Description>AB   1794-OW8 ISOL RELAY OUT</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>13086</PartNumber>
           <Description>AB   1794-TB3 3 WIRE BASE</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>522685</PartNumber>
           <Description>CH   BR120 TYPE BR BREAKER 20A/1 POLE 1</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>524818</PartNumber>
           <Description>CH   CH120 TYPE CH BREAKER 20A/1 POLE</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>1769893</PartNumber>
           <Description>GEIN THQL1120 1P-20A 120V PLUG-IN CB</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>1812401</PartNumber>
           <Description>MIDW CB120 SP 20A 120/240V CB</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber/>
           <Comment/>
           <Thumbnail/>
        </Item>
        <Item>
           <PartNumber>559215</PartNumber>
           <Description>SIEM Q120 BREAKER 20A 1P 120V 10K QP</Description>
           <Quantity>1</Quantity>
           <UOM>0</UOM>
           <CustomerPartNumber>215</CustomerPartNumber>
           <Comment/>
           <Thumbnail/>
        </Item>

     </ItemList>
  </SavedCart> 
```

```
function clearArr(){
            mins.length = 0;
            maxs.length = 0;
            namearr.length = 0;
            acctidarr.length = 0;
            partNums.length = 0;
            descs.length = 0;
            cpns.length = 0;
            cpns.length = 0;
            data.length = 0;
            mins1.length = 0;
            maxs1.length = 0;
            cpns1.length = 0;
            pns.length = 0;
            pn.length = 0;
            boxqtys.length = 0;
            boxqtys1.length = 0;
            p = 1; 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:01:59.380

在不查看 XML 的情况下，我认为您可能需要为每个新元素重置`partNums`和？也许如果你发布一些 xml 文件，你做错了什么会更清楚。`descs``SavedCart`

尝试这个

```
 $(xml).find('SavedCart').each(function(){
 partNums = []; 
 descs = []; 
```

# ruby - DataMapper Redis：无法从父级中找到子级，只能从子级中找到父级

> ID：10145851
> 
> 赞同：0
> 
> 时间：2012-04-13T17:55:23.890
> 
> 标签：ruby, orm, redis, datamapper

我在 Ruby 库中使用 DataMapper 和 redis 适配器。

我定义了这些类：

```
class Zone

  include DataMapper::Resource

  property :id, String, :key => true, :unique_index => true, :default => lambda { |x,y| UUID.new.generate }
  property :preview_mode, Boolean, :default => false

  timestamps :at

  has 1, :campaign
end 
```

和

```
class Campaign

  include DataMapper::Resource

  property :id, String, :key => true, :unique_index => true, :default => lambda { |x,y| UUID.new.generate }
  property :name, String

  timestamps :at

  belongs_to :zone
  has n, :rules

  validates_presence_of :name
end 
```

我可以做 Campaign.first.zone 但不能做 Zone.first.campaign。

我希望能够在两个方向上进行查找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:10:05.357

@lightyrs 我回复了您的 github 问题，但作为参考，我认为此问题已在版本 > 0.8 中得到修复，这些版本对非串行主键有更好的支持。

干杯! - 哇哇机器人

# jquery - 辅助一个 jquery 内容膨胀效果

> ID：10145854
> 
> 赞同：2
> 
> 时间：2012-04-13T17:55:55.247
> 
> 标签：jquery

我正在尝试使用 jquery .animate 和 .hover 构建一个小的“膨胀”效果。mousein 事件似乎运行良好，但是，在鼠标移出时，边距会恢复到原始位置，动画会恢复到原始状态。我需要扩展元素，然后返回而不更改任何其他元素的位置。

JS：

```
$(document).ready(function(){       
    $(".nav-item").hover(
        function(){
            $(this).addClass('over');
            $(this).animate({
                width: '114px', 
                height:'114px', 
                margin: '-7px'}, 
                300);
        },
        function(){
            $(this).removeClass('over');
            $(this).animate({
                width:'100px',
                height:'100px',
                margin: '0'},
                300);}
    );
}); 
```

html:

```
<body>
    <div class="nav-item"></div>
    <div class="nav-item"></div>
    <div class="nav-item"></div>
    <div class="nav-item"></div>
    <div class="nav-item"></div>
    <div class="nav-item"></div>
    <div class="nav-item"></div>
</body> 
```

CSS：

```
.nav-item {
background: #ffffff;
border: 1px #000000 solid;
border-collapse: collapse;
float: left;
height: 100px;
position: relative;
width: 100px;
}

.over {
z-index: 1;
} 
```

我在[jsfiddle](http://jsfiddle.net/SCxzs/)有这个。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:33:07.450

这是我能做的......

jQuery代码

```
$(document).ready(function(){
    var left=0;
    $(".nav-item").each(function(){
        $(this).css({left:left=left+100});
        console.log(left);
    })
    $(".nav-item").hover(function() {
        $(this).addClass('over');
        $(this).animate({
            width: '114px',
            height: '114px',
            margin: '-7px'
        }, 300);
        },function() {
            $(this).removeClass('over');
            $(this).animate({
                width: '100px',
                height: '100px',
                margin: '0'
            }, 300);
        }
    )
    }) 
```

以及CSS中的一些变化

```
.nav-item {
    background: #ffffff;
    border: 1px #000000 solid;
    float: left;
    height: 100px;
    width: 100px;
    position: absolute;
}

.over {
    z-index: 1;   
    overflow: hidden;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:45:03.497

在这里尝试了建议，但它仍然没有让我满意。我发现了一个名为 hoverpulse 的插件，稍加修改后，它就可以完美地完成我想要完成的任务。如果有人对此插件感兴趣：[hoverpulse plugin](http://jquery.malsup.com/hoverpulse)

# java - 从正在运行的 Java 进程启动另一个 Java 进程会显示依赖于操作系统的行为

> ID：10145855
> 
> 赞同：2
> 
> 时间：2012-04-13T17:56:08.713
> 
> 标签：java

我有这个调用的代码`java -cp somejar.jar com.company.mainClass`。我使用流程构建器来调用它。在 Windows 中，它工作正常。在linux中，我得到了错误

> 无法找到或加载主类 com.company.mainClass。

这是我的代码示例：

```
ArrayList<String> args = new ArrayList<String>();
args.add(java);
args.add("-cp");
args.add("../dep/jetty-distribution-8.1.1.v20120215/lib/*;../build/jar/somejar.jar");
//args.add("../build/jar/LRM.jar");
args.add("com.company.mainClass");
ProcessBuilder processBuilder = new ProcessBuilder(args);
Process process = processBuilder.start(); 
```

任何人都知道为什么我在 windows 和 linux 中会出现不同的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:02:54.190

您使用分号作为路径分隔符，而在 unix 上它是一个冒号。

`File.pathSeparatorChar`改为使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:02:44.190

linux下类路径（-cp）中的项目必须用冒号分隔`:`，在windows下用分号分隔`;`。在 Windows 中，路径分隔符是反斜杠而不是斜杠。使用 构建您的类路径`File.separator`，尽管它也应该使用斜杠。

# prefetch - 无法禁用硬件预取器

> ID：10145857
> 
> 赞同：2
> 
> 时间：2012-04-13T17:56:12.167
> 
> 标签：prefetch, msr

我正在尝试禁用硬件预取器以在 Intel core i5 2500 上运行一些内存基准测试。问题是我的 BIOS 中没有任何选项可以启用或禁用预取器。所以我试图使用 msr-tools 来禁用预取器。但是 msr-tool 无法将某些特定值写入所需的寄存器 (0x1a0h)。

```
$ rdmsr -p 0 0x1a0
850089

$ wrmsr -p 0 0x1a0 0x850289
wrmsr: CPU 0 cannot set MSR 0x000001a0 to 0x0000000000850289 
```

这对所有 cpu 都是一样的。但是，如果我尝试写入值 0x850088（仅选择用于测试），它将成功写入该值。

谁能指出问题出在哪里以及解决方案是什么？

我也觉得奇怪的是我的 BIOS 中没有预取器禁用选项。这是某些版本的 BIOS 的情况吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-21T08:15:36.847

如果您有 Nehalem、Westmere、Sandy Bridge、Ivy Bridge、Haswell 或 Broadwell Intel CPU，您可以使用 MSR 0x1a4 的位 0:4 启用/禁用各种预取器。请参阅：[https ://software.intel.com/content/www/us/en/develop/articles/disclosure-of-hw-prefetcher-control-on-some-intel-processors.html](https://software.intel.com/content/www/us/en/develop/articles/disclosure-of-hw-prefetcher-control-on-some-intel-processors.html)

```
# E.g. showing initially all enabled:
rdmsr -a -c 0x1a4
> 0xf
> <etc>

# Disable all 4 prefetchers, by setting all 4 bits:
wrmsr -a 0x1a4 $(( 2**0 | 2**1 | 2**2 | 2**3))
rdmsr -a -c 0x1a4
> 0xf
> <etc> 
```

对于具有随机存取内存密集型工作负载的应用程序，这为我带来了大约 5% 的性能提升。

对于较旧的 Intel Core / NetBurst 架构，它似乎是一个不同的 MSR，0x1a0，能够通过位 9 和 19 启用/禁用 2 个不同的预取器。请参阅：

[https://software.intel.com/content/www/us/en/develop/articles/optimizing-application-performance-on-intel-coret-microarchitecture-using-hardware-implemented-prefetchers.html](https://software.intel.com/content/www/us/en/develop/articles/optimizing-application-performance-on-intel-coret-microarchitecture-using-hardware-implemented-prefetchers.html)

要禁用/启用它们，您可能会执行类似的操作（未经测试，因为我没有核心 CPU - 所以如果我尝试设置这 2 位，我会收到错误消息）：

```
MSRORIG=$(printf "0x%x\n" $(rdmsr -c 0x1a0)) 
# To set bits 9 and 19 and disable the prefetchers:
wrmsr -a 0x1a0 $((MSRORIG | 1<<19 | 1<<9))
# To unset and enable:
wrmsr -a 0x1a0 $((MSRORIG & ~(1<<19 | 1<<9))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T04:33:06.500

```
sudo modprobe msr
sudo rdmsr -p $i 0x1a0 -f 3:0 
```

L2 硬件预取器 - 位 0

L2 相邻高速缓存行预取器 - 位 1

DCU 预取器 - 位 2

DCU IP 预取器 - 位 3

[1]

我得到 9 作为响应。如果该位被设置，则预取器关闭。L2 硬件预取器和 DCU IP 预取器对我来说是关闭的。要打开它们：

```
$ sudo rdmsr -p 0 0x1a0
850089
# now we update bits 0 and 3
$ sudo wrmsr -p 0 0x850080 # 0b1001 = 0x9 wheras 0b0000 = 0x0
# check it took
$ sudo rdmsr -p 0 0x1a0
850080 
```

所有预取器现在都打开了

关闭它们是类似的 $ sudo wrmsr -p0 0x85008f #这对我来说失败了，我可以设置位 1 以便 L2 adacent 缓存行预取器保持打开 $ suod wrmsr -p0 0x85008d # 其他可以关闭

[1] [https://software.intel.com/en-us/articles/disclosure-of-hw-prefetcher-control-on-some-intel-processors](https://software.intel.com/en-us/articles/disclosure-of-hw-prefetcher-control-on-some-intel-processors)

# facebook - 跟踪用户到用户的应用程序请求（邀请）

> ID：10145858
> 
> 赞同：0
> 
> 时间：2012-04-13T17:56:15.917
> 
> 标签：facebook, facebook-graph-api, user-interface, request

我正在开发新项目并希望允许 Facebook 邀请。

不过，我需要限制邀请，因为我现在专注于产品而不是可扩展性。

我试图掌握如何使用当前的 Facebook 系统做到这一点......

使用请求对话框：

*   我可以指定一个 max_invites 参数
*   实际的邀请是通过他们的 Javascript API 处理的，所以我只能使用回调函数来提醒我的服务器

我真的很想确保我的一小部分用户现在只能邀请一两个人。在我扩展之前，我不能冒险拥有额外的 100 个帐户。即使我将请求降为“1”，有人需要做的只是弹出另一个请求对话框，他们可以邀请更多人。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:03:19.723

您是否可以要求用户向他们想要邀请的人发送链接，其中可能包含推荐或测试/访问密钥？然后，您可以限制每个用户可以生成的键/链接的数量。

例如：

```
Refer a friend to the service:

<input box for e-mail> <send button> 
```

朋友收到：

```
XYZ wants you to join FunNewSite.Org

Click this link to register http://FunNewSite.org/register.php?key=14usdijf8923u5 
```

# php - 让 chrome 显示 rss 提要 (2)

> ID：10145861
> 
> 赞同：3
> 
> 时间：2012-04-13T17:56:30.060
> 
> 标签：php, xml, google-chrome, rss

这个问题是这个问题的后续： [get google chrome to view an rss feed](https://stackoverflow.com/questions/10114819/get-google-chrome-to-view-an-rss-feed)

我从这个页面复制了源代码（希望这对网站所有者来说没问题）：
[http](http://www.petefreitag.com/rss/) ://www.petefreitag.com/rss/ 。
我转义了所有引号并从中制作了一个 php 文件。该文件如下所示：

```
<?php

header('Content-Type: application/rss+xml');

echo "<?xml version=\"1.0\" ?>
<?xml-stylesheet type=\"text/css\" href=\"http://www.petefreitag.com/rss/simple_style.css\" ?>

<rss version=\"2.0\">
    <channel>
        <title>Pete Freitag's Homepage</title>
        <link>http://www.petefreitag.com/</link>
        <description>Covering ColdFusion, Java, Web Development, and other topics</description>
        <language>en-us</language>
        <lastBuildDate>Fri, 23 Mar 2012 18:57:00 GMT</lastBuildDate>
        <ttl>45</ttl>

        <item>
REST OF THE SOURCE CODE
</rss>
";
?> 
```

在这里你可以看到结果： [http ://web.student.tuwien.ac.at/~e0250890/rsstest/test.php](http://web.student.tuwien.ac.at/~e0250890/rsstest/test.php)

但是，在[http://www.petefreitag.com/rss/](http://www.petefreitag.com/rss/)上， chrome 将页面视为 rss 提要，在我的示例中，它仅显示源代码。

有什么区别，如何强制 chrome 将页面作为 rss 提要查看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T18:04:01.040

尝试将标题更改为`application/xml`

这通过更改标题对我有用：

```
<?php 
header('Content-Type: application/xml');
echo file_get_contents('http://web.student.tuwien.ac.at/~e0250890/rsstest/test.php');
?> 
```

Mozilla 接受各种标头

`text/xml`, `application/xml`, `application/rss+xml`,`application/atom+xml`

但似乎 chrome 只接受`text/xml`或`application/xml`

不是 100% 确定为什么，也许你应该用谷歌接受它；p

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-13T18:01:58.667

添加文档类型。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"> 
```

# javascript - javascript iframe 在每次加载时调整大小

> ID：10145862
> 
> 赞同：1
> 
> 时间：2012-04-13T17:56:31.323
> 
> 标签：javascript, jquery, iframe, resize

每次在 iframe 中访问新链接时，我都想调整 iframe 的大小。

我有一个 wordpress 博客，并使用这个 iframe 在页面上添加了论坛。每次单击该博客上的链接时，我都希望它调整大小。

我用谷歌搜索，但没有发现任何相关内容。

这是我用于调整大小的代码

```
<script type="text/javascript">
function sizeIFrame() {
var helpFrame = jQuery("#ifm");
var innerDoc = (helpFrame.get(0).contentDocument) ? helpFrame.get(0).contentDocument :     helpFrame.get(0).contentWindow.document;
helpFrame.height(innerDoc.body.scrollHeight + 35);
}
</script>
<iframe id="ifm" src="..." width="100%" frameBorder="0" onload="sizeIFrame();" scrolling="no"></iframe> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:04:40.723

我不是专家，但可能是 iframe 只加载了一次？... extrange...

我不知道，但我认为您可以在博客的每个链接中添加一个 onclick 函数来启动 sizeIframe 函数而不是 onload。

例如（此代码是一个想法，未经测试）...

```
<a href="#" class="iframe-mgr" id ="link-a"> a link </a>
<a href="#" class="iframe-mgr" id ="link-b"> b link </a>

<script type="text/javascript">
 $('.iframe-mgr').addEventListener('click', function(){ sizeIframe () } );
</script> 
```

# spring - 使用 Spring 3 和 Hibernate 4 上传多个文件

> ID：10145863
> 
> 赞同：1
> 
> 时间：2012-04-13T17:56:31.930
> 
> 标签：spring, hibernate, file-upload

我是 Spring MVC 和 Hibernate 的新手，并且一直在学习。

当我尝试将图像上传到站点并将其存储在 MySQL 数据库中时，我遇到了这个问题。

我有一个项目模型，其中包含照片模型列表。在每个照片模型中，都有一个名为 photo 的字段 (CommonsMultipartFile) 实际存储照片。

项目模型.java

```
public class ProjectModel{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;

    @OneToMany(fetch = FetchType.LAZY, cascade=CascadeType.ALL)
    private List<PhotoModel> photos;
    //getters and setters
} 
```

PhotoModel.java

```
public class PhotoModel extends AbstractModel implements Serializable{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;

    @Column(columnDefinition = "LONGBLOB")
    private CommonsMultipartFile photo;

    @ManyToOne(fetch = FetchType.LAZY)
    private ProjectModel project;
    //getters and setters
} 
```

addProject.jsp

```
<form:input type="file" path="photos[0].photo"/>
<form:input type="file" path="photos[1].photo"/> 
```

项目控制器.java

```
@RequestMapping(value="/project/add", method = {RequestMethod.GET})
public String toAddProject (Model model){
    if (!model.containsAttribute(Constants.COMMAND)){
        ProjectModel project = new ProjectModel();
        project.setPhotos(new AutoPopulatingList<PhotoModel>(PhotoModel.class));
        model.addAttribute(Constants.COMMAND, project);
    }
    return "/user/addProject";
}

@RequestMapping(value="/project/add", method = {RequestMethod.POST})
public String addProject Model model, @ModelAttribute("command") @Valid ProjectModel command, BindingResult result){

    if(result.hasErrors()) {
            model.addAttribute(Constants.COMMAND, command);
            return toAddProject(model);
        }

     projectService.save(command);
     return "redirect:/success";
} 
```

我的问题是我可以上传某些类型的图像，例如 jpg 或 jpeg，但不能上传 png。如果我尝试上传这样的文件，错误如下。

```
 org.springframework.orm.hibernate4.HibernateSystemException: could not deserialize; nested exception is org.hibernate.type.SerializationException: could not deserialize
    at org.springframework.orm.hibernate4.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:206)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:606)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:488)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy32.save(Unknown Source)
    at cn.javass.demo.web.controller.ProjectController.addProject(ProjectController.java:64)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at cn.javass.common.web.filter.BackURLFilter.doFilter(BackURLFilter.java:37)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: org.hibernate.type.SerializationException: could not deserialize
    at org.hibernate.internal.util.SerializationHelper.doDeserialize(SerializationHelper.java:250)
    at org.hibernate.internal.util.SerializationHelper.deserialize(SerializationHelper.java:306)
    at org.hibernate.internal.util.SerializationHelper.clone(SerializationHelper.java:95)
    at org.hibernate.type.descriptor.java.SerializableTypeDescriptor$SerializableMutabilityPlan.deepCopyNotNull(SerializableTypeDescriptor.java:55)
    at org.hibernate.type.descriptor.java.SerializableTypeDescriptor$SerializableMutabilityPlan.deepCopyNotNull(SerializableTypeDescriptor.java:42)
    at org.hibernate.type.descriptor.java.MutableMutabilityPlan.deepCopy(MutableMutabilityPlan.java:57)
    at org.hibernate.type.AbstractStandardBasicType.deepCopy(AbstractStandardBasicType.java:340)
    at org.hibernate.type.AbstractStandardBasicType.deepCopy(AbstractStandardBasicType.java:336)
    at org.hibernate.type.TypeHelper.deepCopy(TypeHelper.java:67)
    at org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:135)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:276)
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1127)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:325)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:480)
    ... 53 more
Caused by: java.io.FileNotFoundException: /Users/Paddy/Documents/apache-tomcat-7.0.25/work/Catalina/localhost/Spring3Hibernate4Chinese/upload_1bc5d431_136acd506da__8000_00000013.tmp (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at org.apache.commons.fileupload.disk.DiskFileItem.readObject(DiskFileItem.java:709)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at org.hibernate.internal.util.SerializationHelper.doDeserialize(SerializationHelper.java:244)
    ... 72 more 
```

似乎找不到临时文件。我不确定 Spring 或 Hibernate 在幕后到底发生了什么。

真的希望有人能对这个问题有所了解吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:16:34.890

在尝试了这个问题一段时间后，似乎它不依赖于我提交的文件类型，而是文件的大小。如果超过阈值，就会出现所描述的问题。

由于我无法解决此问题，因此我尝试按照此[链接](http://www.mkyong.com/spring-mvc/spring-mvc-failed-to-convert-property-value-in-file-upload-form/)`CommonsMultipartFile`的建议将字段类型从to转换`byte[]`并在我的控制器中添加一个 initBinder 方法。

有用。

# unit-testing - 我们应该在 CakePHP 测试添加/编辑/删除吗？

> ID：10145866
> 
> 赞同：1
> 
> 时间：2012-04-13T17:56:40.230
> 
> 标签：unit-testing, cakephp, testing, add, cakephp-2.0

我们应该测试使用 Cake bake 命令创建的添加/编辑和删除功能吗？我们也应该检查它们吗？或者我们必须假设它们运行良好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:39:13.560

最好测试您应用程序的各个方面，甚至是自动生成的功能，例如在 bake 上的功能。然而，这并不意味着您需要测试已经测试过的东西（即核心功能）。

这样做的一个很好的理由是，如果您最终更改了该代码，并且测试失败了，您会立即意识到它并可以修复它。这避免了必须记住你有什么和没有写过什么测试。

# sql-server - 尝试将存储过程插入临时表，得到“对象或列名丢失或为空”

> ID：10145868
> 
> 赞同：10
> 
> 时间：2012-04-13T17:56:42.023
> 
> 标签：sql-server, tsql

> **可能重复：** [如何 SELECT * INTO [temp table] FROM [Stored Procedure]](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)

我是[T-SQL](http://en.wikipedia.org/wiki/Transact-SQL)新手。我有一个选择记录的[存储过程](http://en.wikipedia.org/wiki/Stored_procedure)。我想查询存储过程返回的记录，所以我试图将记录插入到临时表中。（堆栈溢出帖子和其他帖子说这是怎么做的。）

但是当我尝试时，我得到了错误：

> 对象或列名丢失或为空'

当我刚刚运行存储过程时，我得到一个包含名称列的表。

```
select * into #temp1
exec alexander.dbo.get_uberrecords '20120101', '20120201', 'labcorp' //throws error saying columns must have names 
```

但

```
exec alexander.dbo.get_uberrecords '20120101', '20120201', 'labcorp' // Returns cols with names 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T18:00:22.503

首先尝试创建临时表：

```
CREATE TABLE #temp1
(
   COL1 INT,
   COL2 VARCHAR(MAX)   
)

INSERT INTO #temp1 
exec alexander.dbo.get_uberrecords '20120101', '20120201', 'labcorp' 
```

在您的结果集非常广泛的情况下，您可能希望使用`OPENROWSET`

无论如何，这个 SO 有很多选择： [将存储过程的结果插入临时表](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)

# asp.net-mvc - FluentValidation 摘要始终显示

> ID：10145876
> 
> 赞同：1
> 
> 时间：2012-04-13T17:57:29.527
> 
> 标签：asp.net-mvc, fluentvalidation

我正在使用 FluentValidation 表单，并且验证摘要似乎在加载时显示。我没有任何似乎可以自动提交表单的东西，并且在我的控制器中，在发布表单之前不会进行验证检查。很奇怪，提交时验证似乎工作得很好。

视图模型：

```
[Validator(typeof(SendMessageInputValidator))]
public class SendMessageInput
{
    public string Title { get; set; }
    public string Content { get; set; }
    public string VideoUrl { get; set; }
    public string CultureName { get; set; }
    public bool VideoMode { get; set; }
}

public class SendMessageInputValidator : AbstractValidator<SendMessageInput>
{
    public SendMessageInputValidator()
    {
        RuleFor(s => s.Title)
            .NotEmpty().WithMessage("TitleRequired".Translate("MCN"));
    }
} 
```

控制器：

```
 public ActionResult Detail(Guid entityId, string cultureName)
    {
        var entity = _sendMessageRepository.Get(entityId);

        if (entity == null)
            throw new HttpException(404, "Not found.");

        return View(new SendMessagePageViewModel
                        {
                            NodeId = entity.NodeId,
                            Name = entity.Name,
                            Title = entity.Title,
                            Content = entity.Content,
                            BrowserTitle = entity.BrowserTitle,
                            MetaDescription = entity.MetaDescription,
                            MetaKeywords = entity.MetaKeywords,
                            SendMessageInput = new SendMessageInput { VideoMode = true }
                        });
    }

    public ActionResult SendMessageForm(SendMessageInput input)
    {
        input.CultureName = Thread.CurrentThread.CurrentUICulture.Name;
        return PartialView(/*input*/ new SendMessageInput());
    }

    [HttpPost]
    public ActionResult SendMessage(SendMessageInput input)
    {
        Thread.CurrentThread.CurrentUICulture = new CultureInfo(input.CultureName);

        if (ModelState.IsValid)
        {
            return Redirect(Utilities.GetUrl(Constants.NodeIds.MyProfile));
        }

        var entity = _sendMessageRepository.Get(Constants.NodeIds.MentorQuestionForm);

        if (entity == null)
            throw new HttpException(404, "Not found.");

        return PartialView("Detail", new SendMessagePageViewModel
                                         {
                                             NodeId = entity.NodeId,
                                             Name = entity.Name,
                                             Title = entity.Title,
                                             Content = entity.Content,
                                             BrowserTitle = entity.BrowserTitle,
                                             MetaDescription = entity.MetaDescription,
                                             MetaKeywords = entity.MetaKeywords,
                                             SendMessageInput = input
                                         });
    } 
```

视图（主要）：

```
 @Html.Action("SendMessageForm", "SendMessage", Model.SendMessageInput) 
```

查看（部分）：

```
@Html.ValidationSummary(false, "ValidationSummaryHeader".Translate("MCN"))  
@using (Html.BeginForm("SendMessage", "SendMessage", FormMethod.Post))
{
    <div class="Formulaire">
        <p>
            @Html.LabelFor(m => m.Title, "Title".Translate("MCN"), true)
            @Html.TextBoxFor(m => m.Title, new { maxlength = 200, @class = "TxtBox" })
        </p>

        @if (Model.VideoMode)
        {
            <p>
                @Html.LabelFor(m => m.VideoUrl, "VideoUrl".Translate("MCN"))
                @Html.TextBoxFor(m => m.VideoUrl)
            </p>
        }
        else
        {
            <p>
                @Html.LabelFor(m => m.Content, "Message".Translate("MCN"))
                @Html.TextAreaFor(m => m.Content, new { @class = "TxtArea" })
            </p>
        }

        @Html.HiddenFor(m => m.CultureName)

        <input type="submit" value="@("Submit".Translate("MCN"))"/>
    </div>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:55:23.580

我认为，当您第一次要显示 Detail 视图时，您正在更新 a `SendMessageInput`，因为它是新的`Title`，默认情况下将有一个空的。

然后，当您调用该`SendMessageForm`操作时，您将`SendMessageInput`使用空标题传递给它这个新的。因此，在模型绑定期间，它会出现模型错误，因此当您的局部视图被渲染时，ValidationSummary 会显示。

您是否尝试过使用`Html.Partial`(或`Html.RenderPartial`) 而不是`Html.Action`？这将呈现表单而不发生任何模型绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:41:32.070

即使 ngm 的答案是答案的一部分，我也无法让它发挥作用。

因此，对于将来阅读本文的任何人，我都是这样做的：

*   `@Html.ValidationSummary()`必须在`@using`语句中，否则它只是不显示验证摘要。
*   使用`@Html.Partial`or`@Html.RenderPartial`被认为是一种很好的做法，但不会阻止显示摘要。
*   虽然使用 CSS，但我确实解决了我的问题。验证摘要首先使用一个类呈现，`validation-summary-valid`然后我`display:none`对其应用了一个。一旦出现错误，类将更改为`validation-summary-errors`.

在那里，你有它，它甚至与 FluentValidation 无关，它只是 Html 扩展的工作方式。

# ruby-on-rails-3 - Rails 3 - 控制器/视图子目录路由

> ID：10145879
> 
> 赞同：1
> 
> 时间：2012-04-13T17:58:09.467
> 
> 标签：ruby-on-rails-3

我将一些控制器分离到子目录中，例如：

```
app/dept1/user_controller/action 
```

在控制器中使用此配置：

```
class Dept1::UserController < ApplicationController
end 
```

在 Rails 2 中，这就是我需要做的所有事情，并且应用程序能够很好地自动路由。

但是在 rails 3 中，我似乎需要做一些路由配置。我试过使用命名空间：

```
 namespace :dept1 do
    resources :user
  end 
```

这个页面拉起来很好：

```
app/dept1/user_controller/index 
```

但 app/dept1/user_controller/report 返回此错误：

```
 "ActionController::RoutingError (No route matches [POST] "/dept1/user/report")" 
```

我还需要配置什么？

更新：

当我把它放在我的路线中时，它会起作用：

```
namespace :dept1 do
  resources :user do
    collection do
      get :report
      post :report
    end
  end
end 
```

有没有办法在不对每个动作进行硬编码的情况下做到这一点？

更多更新：

这是我为修复路线以正常工作所做的工作。必须按以下顺序：

```
match ':controller(/:action(/:id))', :controller => /dept1\/[^\/]+/
match ':controller(/:action(/:id(.:format)))' 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T18:49:50.970

这是一个强制你设计你的 URL RESTful 的功能。但如果你真的想要 Rails 2 方式，请参阅 config/routes.rb 中的最后一个块：

```
# This is a legacy wild controller route that's not recommended for RESTful applications.
# Note: This route will make all actions in every controller accessible via GET requests.
# match ':controller(/:action(/:id(.:format)))' 
```

评论说它使 GET 可访问，实际上它使所有 HTTP 动词都可访问。

对于嵌套资源，我想您需要将上面的规则嵌套在`namespace :dept1`.

但我仍然建议您使用 Rails 3 方式，并且只公开 nessacery 接口。

# javascript - 你如何使用 JQuery 从另一个文件加载 HTML 片段？

> ID：10145881
> 
> 赞同：2
> 
> 时间：2012-04-13T17:58:15.110
> 
> 标签：javascript, jquery, html

我尝试使用 w3 学校描述的方法，但它似乎只适用于 FireFox [http://www.w3schools.com/jquery/jquery_ajax.asp](http://www.w3schools.com/jquery/jquery_ajax.asp)

我使用了[Try It上提供的示例](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax1)

```
 <html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("div").load('test1.txt');
});
</script>
</head>
<body>

<div><h2>Let AJAX change this text</h2></div>

</body>
</html> 
```

我只是将其设置为在单击后运行 onload 而不是 onload。它确实在那里工作，但是当我制作自己的页面时，它只能在 FireFox 中工作。

编辑：Chrome 只是具有防止本地文件访问的安全性，它在服务器上运行。

如果有人知道这将如何在旧 IE 版本中工作，那将是一个帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:00:02.007

您的示例适用于 Chrome 18。您可以尝试以下方式：

```
$(document).ready(function(){
    $.get('test1.txt', function(response) {
        $('div').html(response);
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:05:16.217

我建议看一下[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)函数。它可以使用缓存，比使用“子别名”更好`$.get`。

# mysql - MySQL 触发器，在触发器中删除查询

> ID：10145882
> 
> 赞同：0
> 
> 时间：2012-04-13T17:58:24.683
> 
> 标签：mysql

我正在尝试编写一个触发器，如果​​语句为真，则不允许更新关系，我遇到了一些麻烦

```
CREATE TRIGGER noPriceLowerSpeed
BEFORE UPDATE
ON pc
FOR EACH ROW
BEGIN
IF(new.speed IS IN (SELECT speed FROM pc AS pc1) AND pc1.price < new.price) 
THEN DROP new
END IF; 
```

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'IN (SELECT speed FROM pc AS pc1) AND pc1.price < new.price) THEN DROP new 附近使用的正确语法

如果它的价格高于具有相同速度的 pc，我试图不允许 pc 进入我的 pc 关系。

我如何编写此触发器以不允许更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:00:40.150

`IS`是多余的。您应该只使用以下语法：

```
new.speed IN( ... ) 
```

另外，我认为您错过了`;`after `THEN DROP new`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:23:53.697

要使语句失败，请在触发器中使用 SIGNAL 语句来引发错误。

[http://dev.mysql.com/doc/refman/5.5/en/signal.html](http://dev.mysql.com/doc/refman/5.5/en/signal.html)

# php - CDN 缓存图像重定向和永久链接

> ID：10145887
> 
> 赞同：0
> 
> 时间：2012-04-13T17:58:44.000
> 
> 标签：php, model-view-controller, caching, amazon-s3, cdn

我们的 PHP/MVC webapp 允许用户上传图片。他们为每张图片获取一个链接，例如：`http://example.com/images/55`其中 55 是我们存储在数据库中的 id，因此我们可以将用户与他们的图片相关联。我们没有将图像数据存储在我们的数据库中，而是实际存储在 Amazon S3 上。

当用户稍后请求这个 URL 时，我们的服务器会生成实际的 URL，并向浏览器发出`header('Location: https://s3.amazonaws.com/example/media/1234')`重定向，其中 1234 是 id 55 混淆的。我们设置了这个方案，这样我们就可以在后端发生变化的情况下拥有一个“永久链接”解决方案——原始 URL 只是在幕后重新映射。

使用这种方案，是否可以让客户端浏览器缓存整个过程？例如，请求`http://example.com/images/55`将避免完全访问我们的服务器并`https://s3.amazonaws.com/example/media/1234`直接请求，或者更好的是，直接从缓存中检索此图像。如果不是，那么构建我们的链接/重定向方案的“最佳”方式是什么？我们将生成包含大量缩略图的页面，我希望将这些缩略图缓存起来，以便用户体验流畅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:54:58.440

根据我的经验，**您的要求正是发生的情况**。浏览器，在我的例子中是 Mac 上的 Safari 5，点击脚本 URL，被重定向到 CDN 并将图像缓存*在原始脚本 URL 下*......

我注意到了这一点，因为我需要相反的东西。同样的情况，但在我的情况下**，用户想要更改他们的图片**。上传进行得很好，但浏览器一直显示旧图像......（在继续前进之前考虑这一点）

# clojure - 如何以编程方式在 Jetty 中设置 gzip？

> ID：10145891
> 
> 赞同：6
> 
> 时间：2012-04-13T17:59:10.147
> 
> 标签：clojure, jetty, embedded-jetty

我正在使用 Noir 和 clojure 编写一个使用 Jetty 的网络应用程序。Jetty 有两种使用 gzip 的方式，一种是静态的，一种是动态的，它们在[https://stackoverflow.com/a/9113129/104021](https://stackoverflow.com/a/9113129/104021)中有描述。我想同时打开静态和动态 gzipping，但是我们的项目不使用 web.xml 文件，并且不想启动。

如何以*编程*方式设置码头以使用 gzip（即没有 web.xml）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T23:50:18.913

在我正在开发的 Compojure 应用程序中，我有一个基于[ring-jetty-adapter](https://github.com/mmcgrana/ring/tree/master/ring-jetty-adapter)的 Ring/Jetty 适配器，它以编程方式将 Jetty 配置为使用[GzipHandler](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/handler/GzipHandler.html)动态压缩内容。

```
(defn- configurator [server ring-handler]
  (.setHandler server
               (doto (new HandlerCollection)
                     (.addHandler (doto (new GzipHandler)
                       (.setHandler (proxy-handler ring-handler))
                       (.setMimeTypes "text/html,text/plain,text/xml,application/xhtml+xml,text/css,application/javascript,text/javascript,image/svg+xml")))
                     (.addHandler (doto (new RequestLogHandler) (.setRequestLog (NCSARequestLog.))))))) 
```

这个函数接受一个[Server](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/Server.html)实例和我的 Ring 处理程序，并使用一些处理程序对其进行设置。请注意，它`GzipHandler`是 a `HandlerWrapper`，因此它需要我的（代理）环处理程序并委托给它。我还添加了一个日志处理程序，它将在（gzip 包装的）环处理程序之后执行。

查看[完整的工作版本](https://github.com/lhanson/cognition-caps/blob/master/src/cognition_caps/ring_jetty_adapter.clj)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:17:35.600

请参阅此处的 startServer 方法：

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-servlets/src/test/java/org/eclipse/jetty/servlets/GzipWithPipeliningTest.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-servlets/src/test/java/org/eclipse/jetty/servlets/GzipWithPipeliningTest.java)

jetty 将自身广泛用于测试，因此人们需要的大多数嵌入式场景已经存在于某处的单元测试中，当然找到它们可能有点问题:)

# java - 循环中无法访问的代码

> ID：10145897
> 
> 赞同：-2
> 
> 时间：2012-04-13T17:59:27.747
> 
> 标签：java, android, loops

我相对来说是个菜鸟，一直在寻找，试图找出我的代码有什么问题。这是一个基本的列表视图，将被分解为子列表

```
 ListView localListView = (ListView)findViewById(2131361899);
    localListView.setAdapter(new ArrayAdapter(this, 2130903117, arrayOfString));
    localListView.setOnItemClickListener(new AdapterView.OnItemClickListener()
    {
//Start//
      public void onItemClick(AdapterView<?> paramAdapterView, View paramView, int paramInt, long paramLong)
      {
        String str = ((TextView)paramView).getText().toString();
        if (str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230721)))
          ChapterList.this.startActivity(new Intent(ChapterList.this, Foreword.class));
        while (true)
        {return;
        //The Error starts here//
        if (str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230723)))
        {
          ChapterList.this.startActivity(new Intent(ChapterList.this, Chapter1Section.class));
          continue;
        }
          //And ends here//
        if (str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230728)))
        {
          ChapterList.this.startActivity(new Intent(ChapterList.this, Chapter2Section.class));
          continue;
        }
        if (str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230745)))
        {
          ChapterList.this.startActivity(new Intent(ChapterList.this, Chapter3Section.class));
          continue;
        }
        if (str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230752)))
        {
          ChapterList.this.startActivity(new Intent(ChapterList.this, Chapter4Section.class));
          continue;
        }
        if (str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230759)))
        {
          ChapterList.this.startActivity(new Intent(ChapterList.this, Chapter5Section.class));
          continue;
        }
        if (str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230764)))
        {
          ChapterList.this.startActivity(new Intent(ChapterList.this, Chapter6Section.class));
          continue;
        }
        if (str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230765)))
        {
          ChapterList.this.startActivity(new Intent(ChapterList.this, Chapter7Section.class));
          continue;
        }
        if (str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230768)))
        {
          ChapterList.this.startActivity(new Intent(ChapterList.this, Chapter8Section.class));
          continue;
        }
        if (str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230778)))
        {
          ChapterList.this.startActivity(new Intent(ChapterList.this, Chapter9Section.class));
          continue;
        }
        if (!str.equalsIgnoreCase(ChapterList.this.getResources().getString(2131230722)))
          continue;
        ChapterList.this.startActivity(new Intent(ChapterList.this, Appendix.class));
        }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:05:42.940

语句后面的代码`return;`将无法到达。在 while 循环块中，每条语句一次被评估一个。但是，在`return;`评估语句时，整个方法将控制权“返回”给调用方法，并且不会在该方法中执行更多代码。

# javascript - Prototype 1.7 Object.extend 在原型类中使用时不能正常工作

> ID：10145899
> 
> 赞同：1
> 
> 时间：2012-04-13T17:59:40.930
> 
> 标签：javascript, oop, object, prototypejs

我正在尝试在 javascript 中使用简单的 OOP 模型，但不知何故我失败了。我写了一个简单的代码来演示我的问题：

```
<html>
 <head>
  <title>Test</title>
  <script src="scriptaculous/prototype.js"></script>
  <script type="text/javascript">
  var Person = Class.create({

  options : {},

  initialize: function(id, options) {
    this.id = id;
    Object.extend(this.options, options || {});
  },

  speak: function() {
    console.log(this.options);
  }
});
var person1 = new Person("abcd12",{
  name : "Jon Doe",
  age : 23
});
var person2 = new Person("cdef34",{
  name : "Jane Doe",
  age : 32
});
person1.speak();
//Object { name="Jane Doe", age=32}
person2.speak();
//Object { name="Jane Doe", age=32}
  </script>
 </head>
 <body>
 </body>
</html> 
```

显然，这根本不是我想要实现的目标，并且由于 Object.extend 没有适当的文档，我不知道这是否正常或有意。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:27:18.650

除非只是因为你的代码片段不完整，否则你实际上并没有做任何“对象扩展”，所以你可以这样做：

```
var Person = Class.create({

  initialize: function(id, options) {
    this.id = id;
    this.options = options;
  },
  ...
}); 
```

这是一个如何使用 Object.extend 将传入的`options`属性与默认属性合并的示例：

```
var Person = Class.create({

  initialize: function(id, options) {
    this.id = id;
    this.options = Object.extend({
      prop1: 'defaultValue1',
      bool1: true
    }, options);
  },
  ...
}); 
```

使用此代码，如果您这样做：

```
var person = new Person('idString', {prop1: 'custom prop 1'}); 
```

然后`person.options`会产生：

```
{
  prop1: 'custom prop 1',
  bool1: true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:04:01.147

“options”属性位于原型对象上，这意味着它被所有实例共享。也就是说，当您`this.options`在该表达式中提及时，它*不是*将属性直接放在新对象 ( `this`) 上，而是*更新*在原型上找到的现有属性。

就拿那条线：

```
 options: {}, 
```

出去。

我想我会把调用`Object.extend`写成：

```
 this.options = Object.extend({}, options || {}); 
```

（*编辑*-实际上现在我想到了，这完全是因为`Object.extend`直接更新了传入的第一个参数。如果您只是更改了`Object.extend`对它的调用，我认为会修复它，尽管实际上没有理由将其放入原型中.)

# java - 查找数组中数字的平均值

> ID：10145910
> 
> 赞同：1
> 
> 时间：2012-04-13T18:00:19.053
> 
> 标签：java

我有一个班级中每个*学生*的一系列*考试成绩*。例如，对于 Adam *test1=90 test2=92 test3=93*，平均值为*91.67*。然后我会将其另存为. 然后使用该数组，我将取其中的*30%*加上最终 ( ) 的*70%*来制作新数组。***`Array6`**`array5``courseaverage`*****

 ***我试图在下面的代码中实现这一点，但它不能正常工作。有没有人可以提出问题...

```
public class Proj5 {
    public static void main (String[] args) {        
        String[] Array1 = {new String ("Adam"),new String ("Smith"),new String ("Jones"),new String ("Becky"),new String ("Taylor")};       
        Integer[] Array2 = {new Integer(90),new Integer(89),new Integer(86),new Integer(76),new Integer(95)};        
        Integer[] Array3 = {new Integer(92),new Integer(79),new Integer(85),new Integer(90),new Integer(87)};
        Integer[] Array4 = {new Integer(93),new Integer(80),new Integer(90),new Integer(87),new Integer(92)};
        Integer[] Array5 = {new Integer(90),new Integer(77),new Integer(86),new Integer(92),new Integer(89)};

        System.out.println("Name Test1 Test2 Test3 Final Average Grade");

        for (int column = 0; column<Array1.length; column++){
            System.out.printf("%s ", Array1[column]);
            System.out.printf("%s   ", Array2[column]);
            System.out.printf("%s    ", Array3[column]);
            System.out.printf("%s    ", Array4[column]);
            System.out.printf("%s  ", Array5[column]);
            System.out.println(); //start new line of output
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:03:59.480

数组没有 get() 方法，但如果将数组更改为 ArrayLists，则 ArrayList 可以使用 get() 来检索值。

如果我理解正确，您有一个包含每个学生姓名的数组，并且每个学生的成绩都保存在每个学生的单独数组中？

```
String[] students= {"Adam","Smith","Jones"}; 
int[] adamGrades = {90,92,93};
double gradesTotal = 0.00;
for(int i=0; i < adamGrades.length; i++){
  gradesTotal += adamGrades[i];
}
double avg = (gradesTotal/adamGrades.length);
System.out.print(avg); 
```

这会给你“亚当”的平均值，你应该能够用它来找出你的问题的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:04:10.617

为了不给出确切的答案（因为这是家庭作业），您需要获取数组，将所有元素相加，然后将该总和除以数组中的元素数。这可以在接受数组并返回平均值的函数调用中轻松完成。***

# php - WHERE子句中的PHP变量，如何？

> ID：10145913
> 
> 赞同：1
> 
> 时间：2012-04-13T18:00:27.357
> 
> 标签：php, mysql, variables, where-clause

我有以下 PHP 脚本。我想计算和打印每篇文章的评论。

每篇文章的 id 可以通过以下方式“召回”：（`<?php echo $listing['Listing']['listing_id'];?>`这将返回 contentid 编号）

现在，我有这个脚本：

```
<?php
          $db =& JFactory::getDBO();
          $query = "SELECT COUNT(comments) AS totalcount WHERE contentid = ????? ";
          $db->setQuery($query);
          $count = $db->loadResult();
echo ($count); ?> 
```

我试图在 WHERE 子句中添加这个：

```
"... WHERE contentid = {$listing['Listing']['listing_id']}" 
```

但 $count 返回“0”零。如何在 WHERE 子句中添加此变量？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:08:42.953

In the case of an integer:

```
$query = "SELECT
    COUNT(comments) AS totalcount
WHERE
    contentid = " . ((int) $listing['Listing']['listing_id']); 
```

In the case of a string:

```
$query = "SELECT
    COUNT(comments) AS totalcount
WHERE
    contentid = " . mysql_real_escape_string($listing['Listing']['listing_id']); 
```

The biggest thing to be weary of is SQL injection. This makes your queries safe. The explicit cast to `int` will ensure an int value is passed, even if the value is erroneous, at least you wont be open to any attack.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:06:04.517

使用 sprintf 并转义字符串。

```
$query = sprintf("SELECT COUNT(comments) AS totalcount WHERE contentid = '%s'",mysql_real_escape_string($listing['Listing']['listing_id'])); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T18:03:20.973

尝试

```
$query = "SELECT COUNT(comments) AS totalcount WHERE contentid = '".mysql_real_escape_string($listing['Listing']['listing_id'])."'"; 
```

或者

```
$query = "SELECT COUNT(comments) AS totalcount WHERE contentid = ".mysql_real_escape_string($listing['Listing']['listing_id']); 
```

取决于数据类型。

# java - 如何在java中处理ascii不可打印字符

> ID：10145914
> 
> 赞同：0
> 
> 时间：2012-04-13T18:00:29.367
> 
> 标签：java, ascii

我们有人在 Java 的字节数组中发送不可打印的 \x86 类型的字符，当我们将其转换为 us-ascii 字符串时，它会在 ascii 文本中插入垃圾字符。

在将数据从 EBCDIC 等格式转换为 Java 中的 ASCII 时，是否有字符串格式/其他方式来处理不可打印的 ascii 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:05:25.417

你想如何处理它们？将它们替换为可打印的内容（例如“？”）？完全删除它们？其他动作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:21:22.340

如果您在美国或“西欧”（英国、法国、德国），则字符集可能是[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)。单字节字符集 US-ASCII 涵盖 128 个字符，单字节字符集 Windwos-1252 是一个超集，涵盖了字节范围内的所有 255 个字符。

最简单的是 \u0080 - \u00ff 的转换表。字符串，因为有些可能最好用几个字符代替，比如 \u008c 用“OE”。

# ruby-on-rails - Rails 3.2 - Rake 后台任务创建数据库记录

> ID：10145919
> 
> 赞同：0
> 
> 时间：2012-04-13T18:00:45.830
> 
> 标签：ruby-on-rails, ruby, background, rake

我想创建一个每 7 天（周日午夜）自动运行的 rake 任务，它将分析一周的数据（每周最多 20,000 条记录）。

一个 Outlet has_many :monitorings A Monitoring belongs_to :outlet

我想检查在一周结束时，一个出口是否至少创建了 4 条记录。如果没有，我希望在数据库内部的一个名为 unmonitored 的表中创建一条记录。

该记录应包含它被监控的次数以及一周的开始和结束日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:06:35.650

要定期运行 rake 任务，您可以使用裸 cron 作业或漂亮的 ruby​​ 包装器，[无论何时](https://github.com/javan/whenever)。

看一看：

```
every 3.hours do
  runner "MyModel.some_process"       
  rake "my:rake:task"                 
  command "/usr/bin/my_great_command"
end

every 1.day, :at => '4:30 am' do 
  runner "MyModel.task_to_run_at_four_thirty_in_the_morning"
end

every :hour do # Many shortcuts available: :hour, :day, :month, :year, :reboot
  runner "SomeModel.ladeeda"
end

every :sunday, :at => '12pm' do # Use any day of the week or :weekend, :weekday 
  runner "Task.do_something_great"
end

every '0 0 27-31 * *' do
  command "echo 'you can use raw cron syntax too'"
end 
```

# asp.net-mvc - MVC 3 教程帮助数据库操作员

> ID：10145924
> 
> 赞同：0
> 
> 时间：2012-04-13T18:01:01.330
> 
> 标签：asp.net-mvc, database, asp.net-mvc-3, operator-keyword

当我偶然发现这段代码时，我正在关注本教程[http://www.asp.net/mvc/tutorials/mvc-music-store 。](http://www.asp.net/mvc/tutorials/mvc-music-store)

```
public ActionResult AddToCart(int id)
    {

        // Retrieve the album from the database
        var addedAlbum = storeDB.Albums
            .Single(album => album.AlbumId == id);

        // Add it to the shopping cart
        var cart = ShoppingCart.GetCart(this.HttpContext);

        cart.AddToCart(addedAlbum);

        // Go back to the main store page for more shopping
        return RedirectToAction("Index");
    } 
```

我不明白两件事：
**1)** var addedAlbum = storeDB.Albums .Single(album => album.AlbumId == id);

这段代码在做什么？我不知道运算符 => 做了什么。另外我猜 .Single 是数据库的一些功能？
**2）** 这个函数正在调用它自己？我不明白它是如何以这种方式将专辑添加到购物车的。这不会导致函数进入无限循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:18:51.873

似乎有很多您还不太熟悉的核心 C#。

该`=>`运算符是 lambda 运算符，它是编写内联函数的简洁方式。

该`Single`函数是一个[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)，在这种情况下是调用数据库。此方法利用称为[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)的简洁功能将强类型 C# 比较转换为相应的 SQL 代码。它是如何工作的是一个相当高级的话题，所以现在只考虑它是“魔法”。

对象的方法与代码当前所在的控制器操作方法不同。`AddToCart`我没有链接，因为这是相当基本的面向对象编程。`cart``AddToCart`

我会假设这`cart.AddToCart`实际上会更新数据库。

还请阅读 LINQ 以获得更好的理解。这很可能是使用实体框架的 Linq To Sql 或 LINQ to Entities。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:08:51.033

正在向 Action 传递专辑的 ID，然后可以通过调用从数据库中检索该 ID `storeDB.Albums.Single()`。（lambda 表示“在数据库中找到 AlbumId 列中的值与传递给控制器​​的 ID 匹配的条目。”）可以将`.Single`其视为 LINQ 传真：

```
SELECT TOP(1) *
FROM   Albums
WHERE  Albums.AlbumId = <id> 
```

然后它会抓取用户的购物车并将获取的相册对象添加到购物车中。

然后，您将被重定向到可以列出购物车中所有条目的索引。

# json - 改进 Linq 语句选择 Json

> ID：10145927
> 
> 赞同：0
> 
> 时间：2012-04-13T18:01:08.043
> 
> 标签：json, linq, json.net

我有一些这样的json：

```
[{
    "id": "20148324",
    "teacher", "Mr Jones",
    "names": ["john", "bill", "ben"],
    "priority": 2
},
{ 
    "id": "56128324",
    "teacher", "Mrs Jones"
    "names": ["john", "bill", "ben"],
    "priority": 1
}] 
```

我希望能够首先选择优先级值为 1 的孩子，然后在该孩子中我想选择嵌套名称数组中的姓氏。

我可以分两步完成此操作，但想知道如何使用一个 linq 语句来完成此操作。

这是我到目前为止所得到的，但我只添加了一个字典项。如何将所有姓名与教师姓名分别添加到字典中：

```
var things = response.Where(p => p["priority"].Value<int>() == 1)
                             .ToDictionary(m => m["teacher"].ToString(),
                                           m => m["names"].Children().ToString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:50:25.497

最终做到了这一点。不相信它是最好的方法，但它有效。

```
var data = response.Where(p => p["priority"].Value<int>() == 1)
                             .SelectMany(s=>s["names"])
                             .ToDictionary(m => m.Value<string>(),
                                           m => m.Parent.Parent.Parent["teacher"].ToString()); 
```

# css - 标准 1024px 分辨率的最大页面宽度，以便不显示水平滚动条？

> ID：10145931
> 
> 赞同：0
> 
> 时间：2012-04-13T18:01:13.517
> 
> 标签：css, html

我设置了#wrapper width:1000px; 但是该站点仍然需要一个水平滚动条才能完全查看 1024 分辨率。我有 2 个问题

1）我应该设置多少#wrapper 宽度以便它不需要水平滚动条？

2）我希望除智能手机或移动设备之外的所有屏幕（平板电脑、上网本等，除了台式机/笔记本电脑）都可以查看该网站。为 1024 分辨率设计会完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:39:51.693

There isnt really an accurate way to do this, depending on the users settings on there PC it wont really work, best way to do it would be using `auto` attributes

# java - Java Swing - 为什么我不能将图像添加到 Jpanel？

> ID：10145934
> 
> 赞同：0
> 
> 时间：2012-04-13T18:01:25.500
> 
> 标签：java, image, swing

我不知道为什么我不能将图像添加到我的 JPanel 我使用代码：

```
class PanelGlowny extends JPanel {

    private JLabel adam;
    private JButton henryk;

    PanelGlowny(){

        this.setLayout(new BorderLayout());
        ImageIcon imageurl = new ImageIcon("logo.jpg");
        //Image img = imageurl.getImage();
        adam = new JLabel(imageurl);
        add(adam, BorderLayout.NORTH);
        henryk = new JButton();
        add(henryk, BorderLayout.CENTER);

    }
} 
```

图像与类在同一个文件夹中，但如果我使用 url 来图像它也不会添加任何东西。此代码添加按钮，但不添加图像:(

问题可能出在我的 JDE 或 Sandbox 之类的东西上，因为代码应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:11:47.503

试试这个：

```
imageurl = new ImageIcon(getClass().getResource("logo.jpg")); 
```

检查[如何使用图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)教程。

**编辑**：加载远程图像

尝试从网络加载您的图像：

```
public static void main(String args[]) {
    try {
        JOptionPane.showMessageDialog(null, "", "", 
            JOptionPane.INFORMATION_MESSAGE, 
            new ImageIcon(new URL("http://marinerczarter.pl/wp-content/themes/twentyten/images/headers/path.jpg")));
    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, e.getMessage(), "Failure", JOptionPane.ERROR_MESSAGE);
        e.printStackTrace();
    } 
} 
```

# css - 浮动文本忽略 IE 中的边距

> ID：10145936
> 
> 赞同：0
> 
> 时间：2012-04-13T18:01:45.733
> 
> 标签：css, internet-explorer

我有一个向左浮动的跨度标签，由于某种原因，它向上移动到段落文本的其余部分之上，实际上在 ie8 和 ie7 中被切断了。文本在 ie9 中显示良好，但显示在段落中其余文本的上方。span 标签的 CSS 是：

```
.stat {
  font: 64px/100% @numbersFont;
  letter-spacing: -3px;
  color: @orange;
  float: left;
  margin: 0 15px 5px 0;
} 
```

html是：

```
<p>
  <span class="stat">10x</span>
One&nbsp;<a title="Fidelity® Charitable Gift Fund Volunteerism and Charitable Giving in 2009" href="http://www.fidelitycharitable.org/docs/Volunteerism-Charitable-Giving-2009-Executive-Summary.pdf" target="_blank">study on volunteerism</a>&nbsp;found “on average, those who have volunteered in the last 12 months donate ten times more money to charities than non-volunteers.”
</p> 
```

有什么想法会导致文本像那样颠簸吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:06:04.880

你可以这样做：

```
<p>
    <span class="stat">10x</span>
    One&nbsp;<a title="Fidelity® Charitable Gift Fund Volunteerism and Charitable Giving in 2009" href="http://www.fidelitycharitable.org/docs/Volunteerism-Charitable-Giving-2009-Executive-Summary.pdf" target="_blank">study on volunteerism</a>&nbsp;found “on average, those who have volunteered in the last 12 months donate ten times more money to charities than non-volunteers.”
</p>

p {
    padding-left:30px;
    position:relative;
}
.stat {
    font: 64px/100% @numbersFont;
    letter-spacing: -3px;
    color: @orange;
    position:absolute;
    left:0;
    width:30px;
} 
```

[http://jsfiddle.net/K6dk3/](http://jsfiddle.net/K6dk3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:45:23.517

原来问题与字体有关。由于某种原因，当您使用@font-family 加载“Bebas”字体时，IE 和 Firefox 都不了解字体的实际高度。我通过使用 css 专门针对 Firefox 和 IE 解决了这个问题。不理想，但它解决了问题。

这是我针对 IE 和 Firefox 的方法。HTML：

```
<!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7" <?php language_attributes(); ?>> <![endif]-->
<!--[if IE 7]>    <html class="lt-ie9 lt-ie8" <?php language_attributes(); ?>> <![endif]-->
<!--[if IE 8]>    <html class="lt-ie9" <?php language_attributes(); ?>> <![endif]-->
<!--[if IE 9]>    <html class="ie9" <?php language_attributes(); ?>> <![endif]-->
<!--[if gt IE 9]><!--> <html class="" <?php language_attributes(); ?>> <!--<![endif]--> 
```

CSS：

```
@-moz-document url-prefix() {
  .stat {
     padding-top: 12px;
  }
}

.lt-ie9 .stat,
.ie9 .stat {
  line-height: 85px;
} 
```

# javascript - 是什么导致错误`string.split is not a function`？

> ID：10145946
> 
> 赞同：139
> 
> 时间：2012-04-13T18:02:37.483
> 
> 标签：javascript, jquery, split

为什么我越来越...

> 未捕获的 TypeError：string.split 不是函数

...当我跑步时...

```
var string = document.location;
var split = string.split('/');
```

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2012-04-13T18:04:11.427

改变这个...

```
var string = document.location; 
```

对这个……

```
var string = document.location + ''; 
```

这是因为`document.location`它是一个[Location 对象](https://developer.mozilla.org/en/DOM/window.location#Location_object)。默认`.toString()`以字符串形式返回位置，因此连接将触发该位置。

* * *

你也可以[`document.URL`](https://developer.mozilla.org/en/Document_Object_Model_%28DOM%29/document.URL)用来获取字符串。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-04-13T18:05:57.367

也许

```
string = document.location.href;
arrayOfStrings = string.toString().split('/'); 
```

假设你想要当前的 url

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-13T18:07:02.117

运行这个

```
// you'll see that it prints Object
console.log(typeof document.location); 
```

你想要`document.location.toString()`或`document.location.href`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-13T18:06:14.813

`document.location`不是字符串。

您可能想要使用`document.location.href`or`document.location.pathname`代替。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-25T22:53:40.717

在分句 if 中，使用`()`. 例如：

```
stringtorray = "xxxx,yyyyy,zzzzz";
if (xxx && (stringtoarray.split(',') + "")) { ... 
```

# haskell - 我如何帮助 GHC 中的 SpecConstr？

> ID：10145954
> 
> 赞同：12
> 
> 时间：2012-04-13T18:02:57.653
> 
> 标签：haskell, ghc, repa, data-parallel-haskell

我正在使用 GHC 7.4.1 尝试编译使用 Repa 的程序。但是在编译过程中，我的内存不足。使用`ghc -v`，我可以看到它陷入了 SpecConstr 阶段。

SpecConstr 是 GHC 的核心到核心转换之一。[Simon Peyton Jones在这里](http://research.microsoft.com/en-us/um/people/simonpj/papers/spec-constr/spec-constr.pdf)有一个很好的描述，并且[这里](http://darcs.haskell.org/ghc/compiler/specialise/SpecConstr.lhs)有一些代码，但是对我来说这很慢，因为我对 GHC 的内部工作不是很熟悉。

我希望能够以某种方式帮助编译器 - 有没有办法告诉它卡在哪里？或者，有没有办法限制这个阶段的内存使用，直到我可以在更大的机器上重新编译？

谢谢，乍得

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T21:54:25.343

您可以尝试使用标志`-fspec-constr-threshold=n`和`-fspec-constr-count=n`. 更多细节在[GHC 文档](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/flag-reference.html)中。对于 7.4.1，阈值的默认值为 n=200，计数的默认值为 n=3。

但是，如果没有看到代码，您可能会遇到[这个错误](http://hackage.haskell.org/trac/ghc/ticket/2598)。在这种情况下，如果上述选项还不够，您可能需要完全禁用 specconstr 通道。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T12:04:09.267

除了 John L 的回答之外，请确保您使用 flag 进行编译`-fno-liberate-case`。自由案例转换往往会导致代码爆炸，从而使 SpecConstr 的工作更加困难。

# vb.net - 应用程序设置范围 - 用户与应用程序

> ID：10145955
> 
> 赞同：1
> 
> 时间：2012-04-13T18:02:58.163
> 
> 标签：vb.net, application-settings

如果我创建用户级应用程序设置并将其绑定到表单上的文本框，然后在文本框中键入内容，该值会自动保存，并且当应用程序再次启动时，该值会出现在文本框中。当我将设置范围设置为应用程序时，不会发生这种情况。

为什么应用程序范围的设置没有像用户范围的设置那样自动保存？

如果这是设计使然，我如何手动保存这些设置并在运行时加载它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:24:42.983

简而言之，应用程序范围的设置不能在运行时更改，而用户范围的设置被设计为在运行时读取/写入。使用应用程序范围设置有许多替代方法：

*   使用用户范围的设置
*   [这篇](https://stackoverflow.com/questions/1687321/how-do-i-get-around-application-scope-settings-being-read-only)文章建议查看 ConfigurationManager 类。
*   如果您不喜欢用户范围的设置，因为它们没有写入应用程序目录，您可以实现自己的 SettingsProvider 并将它们写入您想要的任何位置

[这篇文章](https://stackoverflow.com/questions/453161/best-practice-to-save-application-settings-in-a-windows-application/453390#453390)有一些关于如何最好地管理设置的建议。最后，如果您有兴趣扩展他们的设置架构或滚动自己的设置架构，这里是[Microsoft 的文档。](http://msdn.microsoft.com/en-us/library/0zszyc6e.aspx)

# c# - 在哪个阶段将控件添加到页面 (.Net) - 引用母版页控件

> ID：10145958
> 
> 赞同：2
> 
> 时间：2012-04-13T18:03:08.320
> 
> 标签：c#, asp.net, master-pages

我有 Main.Master、一个内部母版页 Inner.Master 和 abc.aspx。在 Inner.Master 我有一个下拉列表 ddlChildren，我在 Inner.Master 页面加载时填充它。

我想，在加载页面 abc.aspx 时，我可以从其母版页 Inner.Master 访问 ddlChildren：

```
int x = Int32.Parse(((DropDownList)this.Parent.FindControl("ddlChildren")).SelectedValue); 
```

我在 abc.aspx 的页面加载上执行此操作。问题是没有找到这个控件。我认为这是因为控件尚未加载到 Inner.Master 中，因为当我这样做时：

```
this.Parent.Controls.Count 
```

在调试时，我对 Inner.Master 只有 1 个控件，它是 Main.Master。

然后我尝试调用 ddlChildren onPreRender，但同样的情况发生了。

根据[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)，控件是在预渲染时加载的，但内部主控的预渲染称为 AFTER abc.aspx。那么我可以在另一个页面阶段执行此操作吗？

还是我完全偏离了轨道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:19:33.680

[生命周期的可视化细分，包括母版页。](http://blogs.thesitedoctor.co.uk/tim/2006/06/30/Complete+Lifecycle+Of+An+ASPNet+Page+And+Controls.aspx)

好的，我认为这里还有更多事情要做。

首先`FindControl`不是递归的，除非您要查找的是相关对象的直接子对象，否则您将找不到它。

你需要一个类似这样的函数（未经测试，但我以前写过类似的东西）：

```
private WebControl FindControlRecursive(WebControl parentControl, string controlId)
{
    if( !parentControl.Controls.Any())
        return null;

    var foundControl = parentControl.FindControl(controlId);

    if(foundControl == null)
    {
        foreach(child in parentControl.Controls)
        {
            var foundChild = FindControlRecursive(child, controlId);

            if(foundChild != null)
                return foundChild;    
        }
    }

    return foundControl;
} 
```

其次，您假设`Parent`您的页面是母版页。这可能不是真的。[在这里](http://msdn.microsoft.com/en-us/library/system.web.ui.page.master.aspx)`Page.MasterPage`详细试试。

所以，总结一下，试试这个：

```
var dropDown = (DropDownList)FindControlRecursive(Page.MasterPage, "ddlChildren"); 
```

还有一件事。通常最好考虑一下，如果您发现自己访问的控件存在于当前 Page 范围之上的级别中，您可能需要重新考虑您的设计。

# node.js - 在 heroku 上启动 geddy 失败并出现错误 R11（绑定错误）。部署有什么问题？我错过了什么？

> ID：10145960
> 
> 赞同：0
> 
> 时间：2012-04-13T18:03:12.407
> 
> 标签：node.js, heroku, geddy

我正在尝试在heroku中进行新的部署，似乎无法毫无问题地运行。

我不断收到此错误

错误 R11（错误绑定）-> 绑定到端口 5768 的进程，应为 41113（请参阅环境变量 PORT）

档案

```
web: geddy -p 5768 
```

包.json

```
{
  "name": "oskalisti",
  "version": "0.0.1",
  "dependencies": {
    "geddy": "0.3.20",
    "jake": "0.2.31"
  }
} 
```

完整日志：

```
2012-04-13T17:47:26+00:00 app[web.1]: [Fri, 13 Apr 2012 17:47:26 GMT] INFO Server starting with config: {
2012-04-13T17:47:26+00:00 app[web.1]:   "environment": "development",
2012-04-13T17:47:26+00:00 app[web.1]:   "workers": 1,
2012-04-13T17:47:26+00:00 app[web.1]:   "port": "5768",
2012-04-13T17:47:26+00:00 app[web.1]:   "debug": true,
2012-04-13T17:47:26+00:00 app[web.1]:   "rotateWorkers": false,
2012-04-13T17:47:26+00:00 app[web.1]:   "rotationWindow": 7200000,
2012-04-13T17:47:26+00:00 app[web.1]:   "rotationTimeout": 300000,
2012-04-13T17:47:26+00:00 app[web.1]:   "logDir": "/app/log",
2012-04-13T17:47:26+00:00 app[web.1]:   "gracefulShutdownTimeout": 30000,
2012-04-13T17:47:26+00:00 app[web.1]:   "heartbeatInterval": 5000,
2012-04-13T17:47:26+00:00 app[web.1]:   "heartbeatWindow": 20000,
2012-04-13T17:47:26+00:00 app[web.1]:   "staticFilePath": "/app/public",
2012-04-13T17:47:26+00:00 app[web.1]:     "store": "memory",
2012-04-13T17:47:26+00:00 app[web.1]:     "key": "sid",
2012-04-13T17:47:26+00:00 app[web.1]:   "sessions": {
2012-04-13T17:47:26+00:00 app[web.1]:     "expiry": 1209600
2012-04-13T17:47:26+00:00 app[web.1]:   "cookieSessionKey": "sdata",
2012-04-13T17:47:26+00:00 app[web.1]:   "metrics": null,
2012-04-13T17:47:26+00:00 app[web.1]:   },
2012-04-13T17:47:26+00:00 app[web.1]:   "i18n": {
2012-04-13T17:47:26+00:00 app[web.1]:     "defaultLocale": "en-us",
2012-04-13T17:47:26+00:00 app[web.1]:     "loadPaths": [
2012-04-13T17:47:26+00:00 app[web.1]:       "/app/config/locales"
2012-04-13T17:47:26+00:00 app[web.1]:     ]
2012-04-13T17:47:26+00:00 app[web.1]:   },
2012-04-13T17:47:26+00:00 app[web.1]:   "ssl": null,
2012-04-13T17:47:26+00:00 app[web.1]:   "model": {
2012-04-13T17:47:26+00:00 app[web.1]:     "useTimestamps": false,
2012-04-13T17:47:26+00:00 app[web.1]:     "forceCamel": true
2012-04-13T17:47:26+00:00 app[web.1]:   },
2012-04-13T17:47:26+00:00 app[web.1]:   "detailedErrors": true,
2012-04-13T17:47:26+00:00 app[web.1]:   "hostname": null
2012-04-13T17:47:26+00:00 app[web.1]: }
2012-04-13T17:47:26+00:00 app[web.1]: [Fri, 13 Apr 2012 17:47:26 GMT] INFO Creating 1 worker process.
2012-04-13T17:47:26+00:00 app[web.1]: [Fri, 13 Apr 2012 17:47:26 GMT] INFO Server worker running in development on port 5768 with a PID of: 6
2012-04-13T17:47:26+00:00 app[web.1]: [Fri, 13 Apr 2012 17:47:26 GMT] DEBUG LOGGING STARTED ============================================
2012-04-13T17:47:26+00:00 app[web.1]: [Fri, 13 Apr 2012 17:47:26 GMT] DEBUG ============================================================
2012-04-13T17:47:27+00:00 heroku[web.1]: Error R11 (Bad bind) -> Process bound to port 5768, should be 22421 (see environment variable PORT) 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T16:52:34.633

好的，找到问题了，我傻了。

在 Procfile 上，我不应该使用端口号，heroku 将使用 $PORT 变量为我提供该端口。

所以我使 Procfile 看起来像这样：

```
web: geddy -p $PORT 
```

这奏效了。我还修改了 production.js 环境配置文件以使用 heroku 端口，如下所示：

```
var config = {
  detailedErrors: false
, hostname: null
, port: process.env.PORT
, sessions: {
    store: 'memory'
  , key: 'sid'
  , expiry: 14 * 24 * 60 * 60
  }
};

module.exports = config; 
```

注意**port: process.env.PORT**那里的行。

然后，如果您以这种方式更改文件，而不是在 Procfile 文件上使用 $PORT 变量，您可以像这样启动 geddy：

```
web: geddy -e production 
```

只是更好的做法，这样您的生产配置就会被加载，并且您可以真正支持不同的环境。

# iphone - MKMapView 上可以绘制的最大注解数（MKAnnotation）？

> ID：10145976
> 
> 赞同：5
> 
> 时间：2012-04-13T18:04:04.013
> 
> 标签：iphone, objective-c, ios, mkmapview, mkannotation

我想在地图视图上添加一些注释（大约 500 个），但它似乎显示的最大值是 100。如果我超过 100，则不会调用**viewForAnnotation**委托方法。但是它非常适合低于 100 的注释。

这是代码：（仅当**annotationArray**数组的计数小于 101 时才有效）

```
_allPoints = [[NSMutableArray alloc] init];

NSString* responseFile = [[NSBundle mainBundle] pathForResource:@"Datafile" ofType:@"txt"];
NSData *sampleData = [NSData dataWithContentsOfFile:responseFile];  
if (sampleData) {  
    NSError* error;
    NSDictionary* json = [NSJSONSerialization 
                          JSONObjectWithData:sampleData

                          options:kNilOptions 
                          error:&error];

    NSArray* response = [json objectForKey:@"response"];
    for (NSDictionary *lineDict in response) {
        if ([[lineDict objectForKey:@"data"] isKindOfClass:[NSArray class]]) {
            SinglePoint *singlePoint = [[SinglePoint alloc] initWithDictionary:lineDict];
            [_allPoints addObject:singlePoint];
        }
        else {
            NSLog(@"Error");
        }
    }
}  

_mapView = [[MKMapView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
[_mapView setDelegate:self];
[self.view addSubview:_mapView];

NSMutableArray *annotationArray = [[NSMutableArray alloc] init];
for (int i=0; i<[_allPoints count]; i++) {
    SinglePoint *singlePoint = [_allPoints objectAtIndex:i];
    NVPolylineAnnotation *annotation = [[NVPolylineAnnotation alloc] initWithPoint:singlePoint mapView:_mapView];
    [annotationArray addObject:annotation];
}
[_mapView addAnnotations:(NSArray *)annotationArray];

CLLocationCoordinate2D centerCoord = { 28.632747, 77.219982 };
[_mapView setCenterCoordinate:centerCoord zoomLevel:12 animated:NO]; 
```

委托方法是：

**编辑：**根据评论，开始重用视图但没有运气:(

```
if ([annotation isKindOfClass:[NVPolylineAnnotation class]]) {
    static NSString *viewIdentifier = @"annotationView";
    NVPolylineAnnotationView *annotationView = (NVPolylineAnnotationView *) [mapView dequeueReusableAnnotationViewWithIdentifier:viewIdentifier];
    if (annotationView == nil) {
        annotationView = [[NVPolylineAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:viewIdentifier mapView:_mapView];
    }
    return annotationView;
}
return nil; 
```

我在文档或其他任何地方都找不到任何限制。会不会是内存问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:44:42.237

`MKMapView`没有`annotationViews`限制。但在一定数量的视图（+1000）之上，它变得相当滞后且无法使用。

我相信，这样做的原因是你对`annotationView`管理的处理完全错误。即使您使用 ARC，也不应该为每个注释创建唯一视图。您宁愿重用每个未使用的视图，例如 a 的单元格`UITableView`。

有几个很好的教程，比如[iOS 上的 MapKit 简介 - Ray Wenderlich](http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial)。

如果这不能解决您的问题，您应该尝试调试您的注释类。（`NVPolylineAnnotation`和`NVPolylineAnnotationView`）。也许有什么问题。您是否还检查了点数组的坐标是否相等？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T13:36:37.480

终于能够追查到问题所在。通过先设置mapView的中心然后再添加注释来解决它。我仍然不知道为什么前面显示了 100 个注释（以及为什么只有 100 个）。感谢大家对此的建议和时间。

这是我更改的代码：-

```
_mapView = [[MKMapView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
[_mapView setDelegate:self];
[self.view addSubview:_mapView];

CLLocationCoordinate2D centerCoord = { 28.632747, 77.219982 };
[_mapView setCenterCoordinate:centerCoord zoomLevel:12 animated:NO];

NSMutableArray *annotationArray = [[NSMutableArray alloc] init];
for (int i=0; i<[_allPoints count]; i++) {
    SinglePoint *singlePoint = [_allPoints objectAtIndex:i];
    NVPolylineAnnotation *annotation = [[NVPolylineAnnotation alloc] initWithPoint:singlePoint mapView:_mapView];
    [annotationArray addObject:annotation];
}
[_mapView addAnnotations:(NSArray *)annotationArray]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:53:28.843

您可以添加任意数量的注释。`coordinate`但是，在注解的属性与地图视图的可见部分相交之前，不会创建每个注解的视图。MapKit 不会仅仅因为您在地图上添加了注释而创建视图。

# java - 如何获取存储在字段中的对象，然后获取其类，然后获取该类的字段等？（递归获取类的字段）

> ID：10145980
> 
> 赞同：2
> 
> 时间：2012-04-13T18:04:14.903
> 
> 标签：java, reflection, recursion

快速编辑：正如下面所指出的，我应该做一个 BFS，但我需要停止检索新字段，我还没有时间考虑。感谢所有的帮助！

我正在尝试使用 Java 反射递归地获取类的字段，本质上是创建一棵树来显示

```
Class
 field1 class
  field1.1 class
  field1.2 class
 field2 class
  field 2.1 class
  field 2.2 class 
```

这是一个递归的体面解析器，所以我认为递归显示函数会很酷。不幸的是，它压垮了我。

示例类 Foo，具有 Class1 和 Class2 的字段，每个字段都可以有更多不同类的字段：

```
class Assignment extends Statement {
Variable target;
Expression source;
Assignment (Variable t, Expression e) {
    target = t;
    source = e;
} 
```

我的递归方法：

```
private void recurse(Object object){
    System.out.println(object.getClass());
    for (Field field : object.getClass().getDeclaredFields()){
        System.out.println(field.getType());
        System.out.println(field.getName());
        if(!field.getType().isPrimitive() || field.getType() instanceof Class || field.getName() != "clazz"){
            //recurse(field);
        }
    } 
```

println 一直用于测试，Foo 的示例输出将是（没有递归，它似乎有效）给出

```
class Assignment
class Variable
target
class Expression
source 
```

但我不知道如何获取变量类，然后获取它的字段等等。包含此信息的字段为我提供了一个类字段。

另外，我意识到我需要一个点来停止递归，但在原始字段停止似乎不起作用。任何建议都会很有用，并且真的可以帮助我理解我似乎在四处游荡的本质。

旁注：对于这个类的方法，我知道我可以为每个类添加一个显示方法并调用它们，但我的反射过程似乎更有趣并且可能可重用。

TLDR：如何获取字段中包含的实际字段的类？

对不起，如果我遗漏了什么，我问的第一个问题。

谢谢你的时间！

-亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:12:54.443

好吧，您正在描述一个图形，以及其中的一个搜索算法。

你的图表是`G=(V,E)`哪里`V = {all object types }`和`E = { (u,v) | u has a field of type v }`。

您可以使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)从单一来源“探索”您的图形，并从中获取所有“可访问的顶点 [类型]”[单一来源]。

BFS 持有一个`visited`集合，并避免探索已经探索过的顶点 [类型]，并且当没有新发现 [队列为空] 时，它 [BFS] 停止。

同样的事情可以用[DFS](http://en.wikipedia.org/wiki/Depth-first_search)完成，但同样 - 你将需要一个`visited`集合，以避免当图形有循环时出现无限循环[[](http://en.wikipedia.org/wiki/Cycle_%28graph_theory%29)例如：在[复合类](http://en.wikipedia.org/wiki/Composite_pattern)的某些实现中，例如一棵树，其中每个`Node`包含一个`Node`本身]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:10:23.543

因为您会立即重复，所以您将一直到顶级类的第一个字段上的 Object ，然后再继续下一个。换句话说，您正在执行深度优先搜索。

您正在寻找更像是广度优先搜索的输出。这将涉及使用队列并在末尾添加新类并弹出下一个处理而不是使用递归。

你已经做到了这一点，所以我不会为你拼出整个事情，我相信这里有足够的东西来挑选其余的。

# bash - Bash: Slow redirection and filter

> ID：10145984
> 
> 赞同：0
> 
> 时间：2012-04-13T18:04:41.897
> 
> 标签：bash, logging, filtering, redirect, pipe

I have a bash script that calls a program which generates a humongous amount of output. A lot of this data is coming from a Python package that I have not created and whose output I can't really control, nor interests me.

I tried to filter the output generated by that external Python package and redirect the "cleaned" output to a log file. If I used regular pipes and grep expressions, I lost many chunks of information. I read that is something that can actually happen with the redirections ([1](https://stackoverflow.com/questions/2746553/bash-script-read-values-from-stdin-pipe) and [2](https://stackoverflow.com/questions/4290684/using-named-pipes-with-bash-problem-with-data-loss)).

In order to fix that, I made the redirections like this:

```
#!/bin/bash
regexTxnFilterer="\[txn\.-[[:digit:]]+\]"
regexThreadPoolFilterer="\[paste\.httpserver\.ThreadPool\]"
bin/paster serve --reload --pid-file="/var/run/myServer//server.pid"  parts/etc/debug.ini 2>&1 < "/dev/null" | while IFS='' read -r thingy ; do
        if [[ ! "$thingy" =~ $regexTxnFilterer ]] && [[ ! "$thingy" =~ $regexThreadPoolFilterer ]]; then
                  echo "$thingy" >> "/var/log/myOutput.log" 
        fi
done 
```

Which doesn't lose any information (at least not that I could tell) and filters the strings I don't need (using the two regular expressions above).

The issue is that it has rendered the application (the `bin/paster` thing I'm executing) unbearably slow. Is there any way to achieve the same effect but with a better performance?

Thank you in advance!

**Update @2012-04-13**: As [shellter](https://stackoverflow.com/users/620097/shellter) pointed out in one of the comments to this question, it may be useful to provide examples of the outputs I want to filter. Here's a bunch of them:

```
2012-04-13 19:30:37,996 DEBUG [txn.-1220917568] new transaction
2012-04-13 19:30:37,997 DEBUG [txn.-1220917568] commit <zope.sqlalchemy.datamanager.SessionDataManager object at 0xbf4062c>
2012-04-13 19:30:37,997 DEBUG [txn.-1220917568] commit
Starting server in PID 18262.
2012-04-13 19:30:38,292 DEBUG [paste.httpserver.ThreadPool] Started new worker -1269716112: Initial worker pool
2012-04-13 19:33:08,158 DEBUG [txn.-1244144784] new transaction
2012-04-13 19:33:08,158 DEBUG [txn.-1244144784] commit
2012-04-13 19:32:06,980 DEBUG [paste.httpserver.ThreadPool] Added task (0 tasks queued)
2012-04-13 19:32:06,980 INFO [paste.httpserver.ThreadPool] kill_hung_threads status: 10 threads (0 working, 10 idle, 0 starting) ave time N/A, max time 0.00sec, killed 0 workers 
```

There's a few more different messages involving the ThreadPool though, but I couldn't catch any.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T22:50:22.393

For one thing -- you're reopening the log file every time you want to append a line. That's silly.

Instead of this:

```
while ...; do
   echo "foo" >>filename
done 
```

Do this (which opens the output file on a new, non-stdout file handle, such that you still have a clear line to stdout should you wish to write to it):

```
exec 4>>filename
while ...; do
   echo "foo" >&4
done 
```

It's also possible to redirect stdout for the whole loop:

```
while ...; do
   echo "foo"
done >filename 
```

...notably, this will impact more than just the "echo" line, and thus have slightly different semantics from the original.

* * *

Or, better yet -- Configure [the Python logging module](http://docs.python.org/library/logging.html) to filter output to only what you care about, and don't bother with shell-script postprocessing at all.

If the version of Paste you're using is sufficiently similar to modern Pyramid, you can put this in your ini file (currently `parts/etc/debug.ini`):

```
[logger_paste.httpserver.ThreadPool]
level = INFO

[logger_txn]
level = INFO 
```

...and anything below `INFO` level (including the `DEBUG` messages) will be excluded.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:12:24.060

It may be faster to use a grep-based solution to this

```
#!/bin/bash
regexTxnFilterer="\[txn\.-[[:digit:]]+\]"
regexThreadPoolFilterer="\[paste\.httpserver\.ThreadPool\]"
bin/paster serve --reload --pid-file="/var/run/myServer//server.pid"  parts/etc/debug.ini 2>&1 < "/dev/null" | grep -vf <(echo "$regexTxnFilterer"; echo "$regexThreadPoolFilterer") >> "/var/log/myOutput.log" 
```

Your loop may be slow because the `echo "$thingy" >> "/var/log/myOutput.log"` line is opening and closing the log file every time it executes. I wouldn't expect there to be a big performance difference between grep's regex matching and bash's, but if there was it wouldn't surprise me.

* * *

**Late Edit**

There's a far simpler way to fix the performance issue caused by opening/closing the output once per line. Why this didn't occur to me before, I have no idea. Just move the `>>` to outside your loop

```
#!/bin/bash
regexTxnFilterer="\[txn\.-[[:digit:]]+\]"
regexThreadPoolFilterer="\[paste\.httpserver\.ThreadPool\]"
bin/paster serve --reload --pid-file="/var/run/myServer//server.pid"  parts/etc/debug.ini 2>&1 < "/dev/null" | while IFS='' read -r thingy ; do
        if [[ ! "$thingy" =~ $regexTxnFilterer ]] && [[ ! "$thingy" =~ $regexThreadPoolFilterer ]]; then
                  echo "$thingy"
        fi
done  >> "/var/log/myOutput.log" 
```

I can't see any compelling reason why this would be either faster or slower than the `grep` solution, but it's a lot closer to the original code and a little less cryptic.

# android - android游戏循环surfaceview覆盖与framelayout导致滞后

> ID：10145986
> 
> 赞同：0
> 
> 时间：2012-04-13T18:04:48.943
> 
> 标签：android, surfaceview, android-canvas, android-framelayout

我目前正在编写一个 android 游戏，但现在，我遇到了一些奇怪的控件问题

如果我有一个包含所有控件（HP、点、游戏控件..等）的框架布局并将其放在我的表面视图之上，我的 fps 将永远不会超过 20 fps；如果我删除框架布局，游戏将达到 50+fps。

我怀疑系统将我的surfaceview和framelayout的内容全部渲染在一个线程中，这解释了为什么它这么慢

这是我的游戏循环代码

```
public void run() {
    Canvas c;
    initTimingElements();

    long beginTime;     // the time when the cycle begun
    long timeDiff;      // the time it took for the cycle to execute
    int sleepTime;      // ms to sleep (<0 if we're behind)
    int framesSkipped;  // number of frames being skipped 

    sleepTime = 0;

    while (_run) {
        c = null;
        //long start = System.currentTimeMillis(); 

        try {

            c = _panel.getHolder().lockCanvas(null); // this is the problem!!

            synchronized(_panel.getHolder()) {

                beginTime = System.currentTimeMillis();
                framesSkipped = 0;  // resetting the frames skipped

                    _panel.updatePhysics();                     
                    _panel.checkForHits();
                    _panel.checkForKill();
                    _panel.checkForMCHits();
                    //if i put stuff related to ui in the loop, it will slow the control down to a unblelieveable state 
                    //_panel.checkNPCQt();
                    _panel.onDraw(c);

                    timeDiff = System.currentTimeMillis() - beginTime;
                    // calculate sleep time
                    sleepTime = (int)(FRAME_PERIOD - timeDiff);

                    if (sleepTime > 0) {
                        // if sleepTime > 0 we're OK
                        /*
                        try {
                            // send the thread to sleep for a short period
                            // very useful for battery saving
                            Thread.sleep(sleepTime);
                        } catch (InterruptedException e) {}
                        */

                    }

                    while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS) {
                        // we need to catch up
                        //_panel.updatePhysics(); // update without rendering
                        sleepTime += FRAME_PERIOD;  // add frame period to check if in next frame
                        framesSkipped++;
                    }

                    if (framesSkipped > 0) {
                        Log.d(TAG, "Skipped:" + framesSkipped);
                    }
                    // for statistics
                    framesSkippedPerStatCycle += framesSkipped;
                    // calling the routine to store the gathered statistics
                    storeStats();
            }

        } finally {
            // do this in a finally so that if an exception is thrown
            // during the above, we don't leave the Surface in an
            // inconsistent state
            if (c != null) {
                _panel.getHolder().unlockCanvasAndPost(c);
                //Log.d(TAG, "unlock canvas");
            }
        } 
```

我很确定我所有的游戏逻辑和位图都是正确的；如果我注释掉所有 onDraw 函数和其他所有内容，我仍然只有 20-23 fps 的帧布局。

有其他选择吗？可以为 UI 绘制创建一个单独的线程吗？还是我做错了？

这是我的 XML 状态： ![在此处输入图像描述](../Images/5f89b209bf5d26db718d74e398ddc155.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T14:36:31.737

解决了，我不小心弄乱了框架布局，干净的项目就是答案

# c++ - C++中递归调用的最大数量是多少？

> ID：10145994
> 
> 赞同：3
> 
> 时间：2012-04-13T18:05:35.140
> 
> 标签：c++, stack-overflow

我有一个递归函数，它在给定某些输入的情况下多次调用自己——这正是它应该做的。我知道我的函数不是无限循环的——它只是得到一定数量的调用和溢出。我想知道这是否是在堆栈上放置太多内存的问题，或者只是调用次数的正常限制。显然，很难说出最大的特定呼叫次数，但是任何人都可以给我一个数量级的粗略估计吗？数以千计吗？数百？百万？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:21:57.627

所以，正如你猜到的，问题是（同名的）堆栈溢出。每次调用都需要建立一个新的栈帧，将新的信息压入栈中；堆栈大小是固定的，最终会用完。

什么设置堆栈大小？这是编译器的一个属性——也就是说，它对于二进制可执行文件是固定的。在 Microsoft 的编译器（用于 VS2010）中，它默认为 1 兆字节，您可以在编译器选项中使用“/F”覆盖它（参见[此处](http://msdn.microsoft.com/en-us/library/tdkhxaks%28v=vs.71%29.aspx)的 '03 示例，但语法相同）。

在实践中很难计算出多少次调用。函数的堆栈大小取决于它的局部变量、返回地址的大小以及参数的传递方式（有些可能会在堆栈上），而且很大程度上取决于架构。一般来说，您可能会假设后两个小于一百字节（这是一个粗略的估计）。前者取决于你在函数中做什么。如果您假设该函数在堆栈上占用 256 个字节，那么使用 1M 堆栈在溢出之前您将获得 4096 个函数调用——但这并没有考虑到主函数的开销等。

您可以尝试减少局部变量和参数开销，但真正的解决方案是[Tail Call Optimization](http://en.wikipedia.org/wiki/Tail_call)，其中编译器在调用递归函数时释放调用函数。[您可以在此处](https://stackoverflow.com/questions/34125/which-if-any-c-compilers-do-tail-recursion-optimization)阅读有关在 MSVC 中执行此操作的更多信息。如果您不能进行尾调用，并且您不能以可接受的方式减小堆栈大小，那么您可以使用“/F”参数查看增加堆栈大小，或者（首选解决方案）查看重新设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T18:21:26.453

这完全取决于您在堆栈上使用了多少信息。但是，Windows 上的默认堆栈是 1MB，而 Unix 上的默认堆栈是 8MB。简单地进行调用可能涉及推送一些 32 位寄存器和返回地址，例如，因此您可能会查看 20 字节的调用，这将使 Windows 上的最大值约为 50k，Unix 上的最大值为 400k——对于一个空函数。

当然，据我所知，您可以更改堆栈大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T18:11:05.220

您的一种选择可能是更改/增加默认堆栈大小。这是一种方法[http://msdn.microsoft.com/en-us/library/tdkhxaks(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/tdkhxaks(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T18:45:52.713

有一些工具可以测量堆栈使用情况。他们预先用特定的字节模式填充堆栈，然后查看它改变的地址。通过这些，您可以了解您获得的极限有多接近。

也许其中一种 valgrind 工具可以做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T19:32:02.187

递归函数使用的堆栈空间量取决于递归的深度和每次调用使用的内存空间量。

递归的深度是指在任何给定时刻激活的调用级别数。例如，一棵二叉树可能有 100 万个节点，但如果它平衡良好，您可以在不超过 20 个同时活动调用的情况下遍历它。如果平衡不好，最大深度可能会大得多。

每次调用使用的内存量取决于递归函数中声明的变量的总大小。

递归的最大深度没有固定限制；如果您的总使用量超过系统施加的堆栈限制，您将获得堆栈溢出。

您可以通过以某种方式减少递归深度来减少内存使用量，也许可以通过重组您正在遍历的任何内容（您没有告诉我们太多），或者通过减少声明的任何本地对象的总大小在您的递归函数内部（请注意，堆分配的对象不会影响堆栈大小），或两者的某种组合。

正如其他人所说，您也许可以增加允许的堆栈大小，但这可能只会有有限的用途——这是您在运行程序之前必须做的额外事情。它还可能消耗资源并干扰系统上的其他进程（施加限制是有原因的）。

更改算法以避免递归可能是一种可能性，但同样，我们没有足够的信息来说明这一点。

# php - 将额外的脚本从视图传递到标题

> ID：10145995
> 
> 赞同：-1
> 
> 时间：2012-04-13T18:05:38.603
> 
> 标签：php, codeigniter

因此，我基本上是在尝试将`<link>`and`<script>`标记从模块视图文件（显示在页面正文中）传递到我的原始头文件中。如何传递包含这些引用的变量？

目前我刚刚`<head></head>`在我的模块视图中添加了额外的标签，但这样做感觉很混乱和狡猾，因为这意味着头部标签被用在了页面的顶部，并且也在中间。

**编辑：** *没有意识到堆栈溢出编辑了我对这个问题至关重要的标签！对不起大家！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:02:33.550

听起来您确实需要 CodeIgniter 的模板设置。以下是一些我最喜欢的链接：

[http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html](http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html)

[http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/](http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/)

为了简单起见，我个人最喜欢：

[http://maestric.com/doc/php/codeigniter_template](http://maestric.com/doc/php/codeigniter_template)

编辑：根据@Sneaksta 的问题，这是我将 css 脚本添加到我的模板的方法：

在我的主模板中，我有以下代码：

```
<?php if (!empty($cssFiles)): ?>
<?php foreach ($cssFiles as $styleSheet): ?>
    <link rel="stylesheet" media="screen" href="<?= base_url(); ?>styles/<?= $styleSheet; ?>" />
<?php endforeach; ?>
<?php endif; ?> 
```

然后在我的控制器中，可能需要为每个函数加载不同的 CSS 文件，我这样做：

```
$cssFiles = array('style1.css', 'style2.css', 'style3.css');
$this->template->set('cssFiles', $cssFiles); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:03:28.640

偷偷摸摸，

我想我明白你在问什么，但我不是 100% 确定，因为你没有发布任何代码示例。

所以我会给你一个例子，你可以有一个“伸缩”视图，它允许你在头部标签中模块化加载不同的样式标签。

正如 Damien Pirsy 提到的，Views 是缓冲的，这意味着 CI 制作了一个特殊的输出缓冲区，并将一系列 View 对象连接在一起，然后将最终的缓冲区内容作为完成的网页输出。

我下面的例子是建立在这种思维链上的：

> 最终用户（调用）--> 页面控制器，然后：（调用并传递参数）--> 基本视图（调用多个片段视图）--> 片段视图 + --> 片段视图 + --> 片段视图 = 最终累积页面-->（作为输出返回）-->最终用户

首先制作“基本视图”，我们将其称为“base.php”以供参考：

```
<!doctype html>
<html>
     <head>
          <!-- Base View -->
          <?php
                //This "if" + "isset()" statement is important,
                // because if you forget to pass the variable in the controller
                // CI will throw an error.
                // Also important: the name of variable ($style) MUST match the 
                // the name of the associative element in the controller! (See 
                // remarks below on handling this in the controller)
                if(isset($style))
                {
                        //Loading views is like a telescoping effect:
                        //A view may load other views into itself recursively
                        $this->load->view($style);
                }
                else
                {
                        //This echo statement will show a comment in
                        // source code if an error occurred during loading a view
                        echo "<!-- Style not found -->"); 
                }
          ?>

     </head>
     <body>
         <!-- Page Content Here -->
     </body>
</html> 
```

接下来，您创建样式视图（注意：以下代码片段将单独位于一个单独的文件中），我们将其称为“style1.php”，并且必须与您的其他视图一起放置以便 CI 找到它，例如在里面“应用程序/视图”文件夹。这使您可以通过更改加载的样式视图来交换标题中声明的内联样式块：

```
<style type="text/css">
       /*Style 1:*/
       /*Just do something simple and obvious, i.e. turn text red*/
       body { color: red; }

</style> 
```

接下来，您创建备用样式视图（注意：以下代码片段将单独位于一个单独的文件中），我们将其称为“style2.php”，并且必须与您的其他视图一起放置以便 CI 找到它，例如在“应用程序/视图”文件夹中。这使您可以通过更改加载的样式视图来交换标题中声明的内联样式块：

```
<style type="text/css">
       /*Style 2:*/
       /*Just do something simple and obvious, i.e. turn text blue*/
       body { color: blue; }

</style> 
```

现在在我们的控制器“example.php”中，我们告诉base.php 将style1.php 文件加载到它的头文件中。我们通过在加载 base.php 视图时将文件名作为参数传递来做到这一点，通过将文件名作为关联数组的元素传递，代码点火器将解析该参数数组并创建一个与关联元素，并在 base.php 视图中使该变量对您可用：

```
<?php

      class Example extends CI_Controller
      {
           //Constructor
           function __construct(){ parent::__construct(); }

           //Base View request handler
           function baseview()
           {
                  //Note: Make an array, be certain to name the element
                  //      the same as what will be expected inside base.php
                  $params = array("style" => "style1.php");

                  //Switching to load a different style is now easy
                  //  just comment out the line above, and uncomment the line below:
                  //$params = array("style" => "style2.php"); 

                  //Pass the parameters array into the CI load view method:
                  $this->load->view("base.php", $params); 
           }
      }

?> 
```

累积的结果应该是切换页面标题内样式标签的模块化能力，只需指定要加载的“样式视图”（您甚至可以构建一个模型，从数据库表中检索要加载的“样式视图”）。显然，这种方法在 Web 浏览器内部具有一定的处理开销限制，因为您正在构建实际的内联 HTML 源代码，而不是通过链接标签链接到 CSS 文件。这意味着浏览器不会为每个页面加载缓存 css 内容，但必须在每个后续请求中下载它。