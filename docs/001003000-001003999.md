# StackOverflow 问答 1003000-1003999

# php - 会话超时或空闲时自动重定向用户

> ID：1003001
> 
> 赞同：7
> 
> 时间：2009-06-16T17:58:42.007
> 
> 标签：php, javascript, session

我想让一个计时器在页面（javascript）上每 3 分钟运行一次，以检测 php 会话（$_SESSION）是否超时......如果是，则自动重定向它们。

一个很好的例子是，用户登录并跑上楼梯，然后再也没有回来......我希望javascript通过简单的重定向将它们注销......

这可能吗？我该怎么做呢？我正在使用 PHP 和 JavaScript。

[Rob Kennedy](https://stackoverflow.com/users/33732/rob-kennedy)下面所说的正是我想要的：

> ...当会话超时时，应告知浏览器离开当前页面。例如，一些银行在一段时间不活动后会这样做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-16T18:00:58.663

您可以使用简单的*元刷新*：

```
<meta http-equiv="refresh" content="180;url=http://example.com/logout" /> 
```

或者您使用 PHP 实现超时：

```
session_start();
if (isset($_SESSION['LAST_REQUEST_TIME'])) {
    if (time() - $_SESSION['LAST_REQUEST_TIME'] > 180) {
        // session timed out, last request is longer than 3 minutes ago
        $_SESSION = array();
        session_destroy();
    }
}
$_SESSION['LAST_REQUEST_TIME'] = time(); 
```

如果会话仍然有效，则无需每 3 分钟检查一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:53:29.017

## New and improved solution

As mr kennedy pointed out my original solution (below) doesn't work. so here is a way to do it.

In the user database keep a last-activity timestamp that updates every time a user loads a page.

Then in a checkaccess.php

```
if ( time-last_access > max_inactivity_time ) {
     return array('access' => '0');
}
else {
     return array('access' => '0');
} 
```

Call checkaccess.php in the javascript timer(below) and logout accordingly

This also allows for a "currently logged in users" function

thanks mr kennedy

* * *

## Original, non-working solution

Create a php page that returns 1 or 0 based on the validity of the current users session

Then in your pages that you want to timeout add this to the head (you need jquery)

```
setInterval(function(){
   var url = UrL_OF_SESSION_CHECKING_PAGE;
      $.getJSON( url,
         function( data ) {
            if (data.access=='0') {
               window.location = LOGIN_PAGE;
            }
         }
      );
}, 180000); 
```

Every 180 seconds (3 minutes) it requests the php page and gets the validity of the session. If its invalid it redirects to a login page

If the user has multiple pages open the pages will timeout and redirect at different times because their timers are different.

Here's a good page on javscript timers [http://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)

Simple session checking page

```
session_start();
die(
    json_encode(
        isset( $_SESSION['VARIABLE'] ) ? array( 'access' => '1') : array( 'access' => '0' )
    )
); 
```

change VARIABLE to one of your session variables

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T22:15:50.633

如果您希望在页面刷新之前发生这种情况，您将需要定期 ajax 调用。您可以使用[jQuery Heartbeat](http://www.ajtrichards.co.uk/heartbeat/)每 3 分钟调用一次，并使用其他用户已经提供的一种 PHP 方法来检查会话

# javascript - 装配体中的 Javascript/标记

> ID：1003005
> 
> 赞同：0
> 
> 时间：2009-06-16T17:59:36.170
> 
> 标签：javascript, architecture, build-process, assemblies

我试图以某种方式呈现特定用户控件的 javascript，而不仅仅是为 javascript 文件包含一个脚本。

我不想要一个简单的脚本包含的原因是因为我需要在运行时将唯一的 ClientID 附加到 dom 元素。

我可以在一个函数中硬编码 javascript，然后附加 ClientID。但是，这看起来会很混乱，而且我不喜欢在类中硬编码 javascript 代码的想法——维护起来将是一场噩梦。

我可以使用哪些策略将 javascript/标记与编译代码分开？我想以某种方式将 javascript 源代码也包含在程序集中，以便作为用户控件，它不需要手动包含脚本，也不需要其他依赖项来工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T18:03:32.873

我使用了 Rick Strahl 博客中的这段代码。与 jQuery 和那些类型的库一起工作很棒。[http://www.west-wind.com/WebLog/posts/252178.aspx](http://www.west-wind.com/WebLog/posts/252178.aspx)

HTH, 克

PS 如果您使用的是 Web 应用程序项目，您可以使用 javascript 文件作为嵌入式资源。

# language-agnostic - 将 *interface* 或 *object* 作为参数传递给函数会更好吗？

> ID：1003009
> 
> 赞同：7
> 
> 时间：2009-06-16T18:00:08.027
> 
> 标签：language-agnostic, oop, parameters, interface, information-hiding

我试图说服一位同事，函数应该将接口作为参数，而不是对象本身。我认为小对象可以很好地传递，但对于大对象，我会给它们一个接口，只是传递 i/f，而不是全部。

请注意，这些大类中只会有一个——i/f 永远不会用于不同的对象。这仅仅是为了隐藏对象的实现。

你同意将一个大类分成一个接口是好的做法吗？
这样做有什么缺点吗？

例子：

```
public interface class IVeryLargeClass
{
    void DoSomething();
    ...
};

public ref class VeryLargeClass : public IVeryLargeClass
{
public:
    virtual void DoSomething() { ... }
    ...
};

public ref class AnotherClass
{
public:
    AnotherClass(VeryLargeClass^ vlc)  { vlc->DoSomething(); }
 // OR
    AnotherClass(IVeryLargeClass^ vlc) { vlc->DoSomething(); }
}; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-16T18:04:08.970

您在 OO 开发中学到的首要原则之一：

> 编程到接口，而不是实现。

您指出“这些大类中只会有一个 - i/f 永远不会用于不同的对象”。在你的情况下这可能是正确的，但我希望每次这样的陈述被证明是错误的时候我都能得到一分钱。

除了考虑您的接口是否可能有多个实现之外，您还应该考虑您的具体对象是否导出（或可能导出）与接口中声明的操作不共享逻辑亲和性的其他方法。在这种情况下，您可以简单地在一个或多个附加接口中声明附加操作。那么，客户端只需要与导出它感兴趣的操作的接口相结合。

简而言之，接口提供了一种管理客户端和提供者之间耦合的方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-16T18:02:00.393

[依赖倒置原则](http://www.objectmentor.com/resources/articles/dip.pdf)可以概括为：依赖抽象比依赖具体要好。

传递接口几乎总是比传递具体类更好。

也就是说，在特定模块中，对内部类型的高内聚性是可以的，但是对于何时以及如何传递具体对象，这是非常主观的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-16T18:05:26.067

如果你传递一个实现，你就会失去使用接口的优势之一，这意味着将逻辑与实际实现分开。

> 软件模块 A 的接口故意与该模块的实现分开。后者包含接口中描述的过程和方法的实际代码，以及其他“私有”变量、过程等。 A 只能通过接口强制执行此操作。这种安排的一个实际优点是，将 A 的实现替换为满足相同接口规范的另一个实现不会导致 B 失败——只要它对 A 的使用符合接口的规范（另见 Liskov 替换原则）。

[http://en.wikipedia.org/wiki/Interface_(computer_science)](http://en.wikipedia.org/wiki/Interface_(computer_science))

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-16T18:06:12.073

为了创建接口，我宁愿避免创建和接口。如果您可以在多个地方使用该接口，那么您就有了赢家——或者如果这是一个公共函数和类并且您特别想简化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T10:20:12.243

另一个问题是你非常大的班级本身。这可能不在你正在做的事情的范围内，但是一个非常大的类意味着它可能首先做的太多了。你能把它重构成更小的类，你调用的函数中所需的信息被封装在它自己的更小的类中吗？如果您针对该类创建一个接口，您可能会发现它比针对您当前拥有的非常大的类更具可重用性。

# sql - Oracle 10g PL/SQL - 选择结果作为更新列值

> ID：1003011
> 
> 赞同：1
> 
> 时间：2009-06-16T18:00:25.310
> 
> 标签：sql, oracle, plsql, oracle10g

有没有办法使用 Oracle 10g 中的查询中的记录值轻松/优雅地更新表中的多个列？

我有一个表（称为 Source），为了简单起见，它有 2 列 `ID`和`KEY`.

```
身份证钥匙
---- ----
1 1000
2 1000
3 5000
4 1000
..
101 8000
102 9000
103 7000
104 9000
...
201 5
202 5
...

```

我有另一个表（称为它`KeyMap`）将`trunc(ID/100)`其用作 a 并将其用作`batchID` 批处理中 ID 的键映射：

```
trunc(ID/100) key1 key2 key3 key4 ..... key99
------------- ---- ---- ---- ----
0 1000 1000 5000 1000
1 8000 9000 7000 9000
2 5 5               

```

ID 是分批创建和处理的，因此在批处理结束时，我想调用一个存储过程来`KeyMap`使用新`Key`值更新表中的记录，其中 1 个更新语句使用提供这些键的子选择或集合价值观。

这可能吗？最好/最有效的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-16T19:33:07.763

我会限制我的批评，说你的桌子设计没有标准化，也不是很漂亮，但我假设你有你的理由。我通常通过将 DECODE 与聚合列结合使用来执行这些“旋转”查询，并按我的键进行分组——在本例中，是您的伪键 trunc(ID/100)。将它与使用元组的更新语法结合起来：

```
 UPDATE Foo
    SET (a, b, c, d)
      = (w, x, y, z); 
```

你得到：

```
 UPDATE KeyMap
     SET
       ( key1
       , key2
       , key3
       , key4
       ...
       , key99
       )
       = ( SELECT MAX(decode(mod(ID, 100), 1, Key, NULL))
                , MAX(decode(mod(ID, 100), 2, Key, NULL))
                , MAX(decode(mod(ID, 100), 3, Key, NULL))
                , MAX(decode(mod(ID, 100), 4, Key, NULL))
                ...
                , MAX(decode(mod(ID, 100), 99, Key, NULL))
             FROM Source
            WHERE Trunc(Source.ID / 100) = KeyMap.batchId
            GROUP BY Trunc(Source.ID / 100)
         )
   WHERE BatchId = <x>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T19:01:43.447

您可以生成一个 Oracle [VARRAY](http://jasonvogel.blogspot.com/2006/10/oracle-varray-example.html)并批量传递您的密钥。您的过程可以遍历 VARRAY 并更新表。

# asp.net-mvc - 如何在 ASP.NET MVC 中设置每个操作参数的默认值？

> ID：1003012
> 
> 赞同：1
> 
> 时间：2009-06-16T18:00:31.613
> 
> 标签：asp.net-mvc

我正在开发一个在 ASP.NET MVC 预览 2 天期间诞生的应用程序。有些地方很脏，我正在努力清理它。我试图克服的一个问题是过于冗长的代码。

例如，我有很多看起来完全一样的方法，但具有不同的默认排序参数。页面和页面大小默认值不会在整个应用程序中更改。

```
public ActionResult List(int? page, int? pagesize, string sortby, string sortorder)
{
    if (string.IsNullOrEmpty(sortby))
        sortby = "ClientInvoiceNumber";
    if (string.IsNullOrEmpty(sortorder)) 
        sortorder = "desc";
    page = page ?? 1;
    pagesize = pagesize ?? 10;

    ...

    return View();
} 
```

现在理想情况下，C# 会支持这样的东西：

```
public ActionResult List(int page = 1, int pagesize = 10, string sortby = "ClientInvoiceNumber", string sortorder = "desc") 
```

但当然，事实并非如此。

**在 ASP.NET MVC 中，我究竟会在哪里编写一些代码来基于每个操作而不是每个路由设置默认参数？** 有没有人以干净的方式解决了这个问题，或者框架中是否有一些我根本不知道的东西？如果可能的话，我什至想将任何默认参数添加到 HttpRequestBase 参数集合中。

我已经对此进行了一些考虑，但想让这个问题保持开放式，以免人为地将答案引导到特定方向。我意识到可以在路由定义中设置默认值，但我想为每个操作设置默认值，而不必创建十亿个路由。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T18:37:58.493

您是否为此尝试了自定义过滤器？：

```
public class DefaultsAttribute : ActionFilterAttribute
{
    public string[] DefaultParams;
    public object[] DefaultValues;

    public DefaultsAttribute(string[] defaultParams, object[] defaultValues)
    {
        DefaultParams = defaultParams;
        DefaultValues = defaultValues;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var params = filterContext.ActionParameters;

        for(int i = 0; i < DefaultParams.Length; i++)
        {
            if (params.Keys.Any(x => x == DefaultParams[i]))
            {
                params[DefaultParams[i]] = DefaultValues[i];
            }
        }
    }
} 
```

使用它（不幸的是 CLR 不允许动态属性参数）：

```
[Defaults(new {"page", "pagesize", "sortby", "sortorder"}, new {1, 10, "ClientInvoiceNumber", "desc"})]
public ActionResult List(int page, int pagesize, string sortby, string sortorder) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T18:05:14.320

您可以在向路由表添加路由时执行此操作

```
routes.MapRoute(
                "<RouteName>",
                "path/to/action{parameter1}",
                new{controller = "<controller name>", action = "<action name>",
                    parameter1= <default value>}); 
```

# plone - 内容发布如何默认为当前日期和时间？

> ID：1003017
> 
> 赞同：2
> 
> 时间：2009-06-16T18:00:58.820
> 
> 标签：plone, plone-3.x

在此链接中，[http](http://plone.org/documentation/how-to/set-default-datetimefield-current-date-time) ://plone.org/documentation/how-to/set-default-datetimefield-current-date-time它描述了如何使用新的 Schema 属性执行此操作。我*可以*使用这种方法更新我们系统中的所有无数内容类型，但我更喜欢工作量少一点的东西，因为如果我必须更改无数内容类型，那太容易出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T18:34:01.857

也许是一个 js 解决方案？有一个 onload 事件，它通过 id（或那些常见属性之一）查找日期时间小部件，然后根据浏览器时间重置时间。您可以根据是否已填充未预填充的必填属性（即标题）来过滤新与编辑

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T18:48:56.183

您可以使用 archetypes.schemaextender 通过适配器修改这些类型：

在你的 configure.zcml

```
<adapter
    factory=".adapters.DefaultDateModifier"
    name="my-package-defaultdate"
    /> 
```

在适配器.py

```
class DefaultDateModifier(object):
    """DefaultDateModifier adapter
    """
    # XXX optionally adapt your content items iface here
    adapts(ATCTMixin)
    implements(ISchemaModifier)

    def fiddle(self, schema):
        # TODO switch out the default_method here...
        pass

    def __init__(self, context):
        self.context = context 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T18:11:28.117

我可以将“已发布”设为默认工作流程状态。那应该解决这个问题。

# javascript - 如何使用 JavaScript 从自定义字符中提取字符串？

> ID：1003019
> 
> 赞同：0
> 
> 时间：2009-06-16T18:01:10.600
> 
> 标签：javascript, string

如果我在页面上创建的两个方括号之间有一个字符串，我将如何将该值存储在变量中并删除方括号？

**例子**

```
[String I want] 
```

**所以我只剩下**

```
var mystring = "String I want" 
```

**更新：看来我无法回复你们任何人。所以一定是在行动。无论如何，这就是我正在使用的**

```
var wholeParagraph = $('.comment-body p');

  var rating = wholeParagraph.substring(wholeParagraph.indexOf('['), 1+wholeParagraph.lastIndexOf(']'));

  alert(rating); 
```

好像不行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T18:20:07.963

这是一个也可以处理任何前导或尾随空格（以及嵌套括号）的版本：

```
// This works
var str = "[String I want]";
var mystring = str.substring(str.indexOf('['), 1+str.lastIndexOf(']'));

// But it'll also work with these strings:
var str = "    [String I want]    ";     // returns "String I want"
var str = " [string I [really] want]  "; // returns "String I [really] want" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T18:09:41.350

```
"[String I want]".replace(/^\s*\[|\]\s*$/g, ''); 
```

那应该给你你正在寻找的东西。您还可以使用 trim 函数从字符串中取出第一个和最后一个字符，类似于 PHP 的 trim，您可以在其中提供可选的分隔符。

**更新：**前导和尾随空格容忍

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T18:57:02.800

结合评论和其他答案......

```
var rating = $('.comment-body p').html().replace(/^\[\]$/g, '');
alert(rating); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T18:38:56.980

只有一种可靠的方法可以做到这一点：遍历 DOM 并在每个文本节点中搜索匹配项。

这个函数就是这样做的：

```
function findTextNodeWithMatch(regex, context) {

    context = context || document.documentElement;

    var childNodes = context.childNodes,
        retTextNodes = [],
        i = -1, node;

    while ( node = childNodes[++i] ) {
        if (node.nodeType === 3) {
            var m;
            while (m = regex.exec(node.data)) {
                retTextNodes.push({
                    node: node,
                    match: m
                });
            }
        }
        if (node.nodeType === 1 && node.nodeName.toLowerCase() !== 'script') {
            retTextNodes = retTextNodes.concat( arguments.callee( regex, node ) );
        }
    }

    return retTextNodes;

} 
```

用法：

```
var patternToMatch = /\[((?:\\\[|.)*)\]/g;
var matchingNodes = findTextNodeWithMatch( patternToMatch, $('.comment-body p')[0] );

for (var i = 0, len = matchingNodes.length; i < len; i++) {
    // Loop through the matching nodes:

    // Extract the string you want:
    var theMatch = matchingNodes[i].match;
    var myString = theMatch[1];
    alert( myString );

    // Replace the string within the node:
    var theNode = matchingNodes[i].node;
    theNode.parentNode.replaceChild( document.createTextNode(theNode.data.replace(patternToMatch, '')), theNode );

} 
```

使用元素**`innerHTML`**是不可靠的，因为它可能包含其他元素，并且这些元素可能具有与您要查找的内容相匹配的属性 - 您不想错误地删除它们......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T18:17:28.247

**我更喜欢 Andrew Noyes 的回答。** 我不能赞成并明确表明这比其他更好，所以这是获得你想要的字符串的另一种可能性..

str = str.substr(1, str.length -2);

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-06-16T18:07:59.963

使用字符串对象 slice() 方法删除第一个和最后一个字符：

```
str = str.slice(1,-1); 
```

# php - 从表名数组中提取列值

> ID：1003021
> 
> 赞同：1
> 
> 时间：2009-06-16T18:01:53.483
> 
> 标签：php, mysql

下面的代码打印出名为“feather”的数据库中的所有表，这些表在名为“site”的列中包含“$entry”。“feather”中的每个表都有一个名为“site”的列。

这段代码很好用。不过，我想补充一点。“feather”中的每个表还包含一个名为“votes_up”的列。对于其中包含“$entry”的每个表，我想打印出与 $entry 对应的“votes_up”列的值。我该怎么做呢？

提前致谢，

约翰

```
$result = mysql_query("SHOW TABLES FROM feather") 
or die(mysql_error()); 

while(list($table)= mysql_fetch_row($result))
{
  $sqlA = "SELECT COUNT(*) FROM `$table` WHERE `site` LIKE '$entry'";
  $resA = mysql_query($sqlA) or die("$sqlA:".mysql_error());
  list($isThere) = mysql_fetch_row($resA);
  if ($isThere)
  {
     $table_list[] = $table;
  }
}

foreach( $table_list as $key => $value){
    echo "$value <br />";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T18:30:00.630

怎么样：

```
SELECT COUNT(*), sum(votes_up) FROM `$table` WHERE `site` LIKE '$entry' 
```

这将把所有的赞成票加起来，并计算所有的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T18:30:15.903

这假设您希望表中每次出现“条目”时都有一个“投票赞成”输出。

```
while(list($table)= mysql_fetch_row($result))
{
 $sqlA = "SELECT `site`,votes_up FROM `$table` WHERE `site` LIKE '$entry'";
 $resA = mysql_query($sqlA) or die("$sqlA:".mysql_error());
 if(mysql_num_rows($resA) > 0)
 {
$table_list[] = $table;
while($rowA = mysql_fetch_assoc($resA))
  {
  $votes_up[$rowA["site"]] = $rowA["votes_up"];
  }
 }
}

foreach( $table_list as $key => $value){
    echo "$value <br />";
}

foreach($votes_up as $site => $vote_up)
{
  echo "$site: $vote_up<br />";
} 
```

# c# - 在 C# 中转换为泛型类型

> ID：1003023
> 
> 赞同：45
> 
> 时间：2009-06-16T18:02:04.420
> 
> 标签：c#, generics, casting

我有一个字典来将某种类型映射到该类型的某个通用对象。例如：

```
typeof(LoginMessage) maps to MessageProcessor<LoginMessage> 
```

现在的问题是在运行时从 Dictionary 中检索这个通用对象。或者更具体地说：将检索到的对象转换为特定的泛型类型。

我需要它来做这样的事情：

```
Type key = message.GetType();
MessageProcessor<key> processor = messageProcessors[key] as MessageProcessor<key>; 
```

希望有一个简单的解决方案。

编辑：我不想使用 Ifs 和开关。由于性能问题，我也不能使用某种反射。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2011-06-16T20:41:36.040

以下似乎也有效，并且比其他答案短一点：

```
T result = (T)Convert.ChangeType(otherTypeObject, typeof(T)); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-06-16T18:11:14.483

这对你有用吗？

```
interface IMessage
{
    void Process(object source);
}

class LoginMessage : IMessage
{
    public void Process(object source)
    {
    }
}

abstract class MessageProcessor
{
    public abstract void ProcessMessage(object source, object type);
}

class MessageProcessor<T> : MessageProcessor where T: IMessage
{
    public override void ProcessMessage(object source, object o) 
    {
        if (!(o is T)) {
            throw new NotImplementedException();
        }
        ProcessMessage(source, (T)o);
    }

    public void ProcessMessage(object source, T type)
    {
        type.Process(source);
    }
}

class Program
{
    static void Main(string[] args)
    {
        Dictionary<Type, MessageProcessor> messageProcessors = new Dictionary<Type, MessageProcessor>();
        messageProcessors.Add(typeof(string), new MessageProcessor<LoginMessage>());
        LoginMessage message = new LoginMessage();
        Type key = message.GetType();
        MessageProcessor processor = messageProcessors[key];
        object source = null;
        processor.ProcessMessage(source, message);
    }
} 
```

这为您提供了正确的对象。我唯一不确定的是，在您的情况下，将它作为抽象 MessageProcessor 是否足够。

编辑：我添加了一个 IMessage 接口。实际的处理代码现在应该成为应该实现这个接口的不同消息类的一部分。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2010-08-12T00:55:40.300

我有一个类似的问题。我有课；

```
Action<T> 
```

它具有类型 T 的属性。

当我不知道 T 时，我如何获得财产？除非我知道 T，否则我无法转换为 Action<>。

**解决方案：**

实现一个非通用接口；

```
public interface IGetGenericTypeInstance
{
    object GenericTypeInstance();
} 
```

现在我可以将对象转换为 IGetGenericTypeInstance 并且 GenericTypeInstance 将属性作为类型对象返回。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-06-16T18:04:57.690

```
Type type = typeof(MessageProcessor<>).MakeGenericType(key); 
```

这是你能做的最好的事情，但是在不知道它是什么类型的情况下，你真的无能为力。

**编辑：**我应该澄清一下。我从 var 类型更改为 Type 类型。我的意思是，现在您可以执行以下操作：

```
object obj = Activator.CreateInstance(type); 
```

obj 现在将是正确的类型，但是由于您在编译时不知道“key”是什么类型，因此无法对其进行强制转换并对其进行任何有用的操作。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-06-16T18:18:23.987

您可以编写一个将类型作为泛型参数的方法：

```
void GenericProcessMessage<T>(T message)
{
    MessageProcessor<T> processor = messageProcessors[typeof(T)]
        as MessageProcessor<T>;

    //  Call method processor or whatever you need to do
} 
```

然后，您需要一种方法来使用正确的泛型参数调用该方法。您可以通过反射来做到这一点：

```
public void ProcessMessage(object message)
{
    Type messageType = message.GetType();
    MethodInfo method = this.GetType().GetMethod("GenericProcessMessage");
    MethodInfo closedMethod = method.MakeGenericMethod(messageType);
    closedMethod.Invoke(this, new object[] {message});
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2010-03-28T08:17:09.330

请查看以下解决方案是否适合您。诀窍是定义一个基本处理器接口，它采用基本类型的消息。

```
interface IMessage
{
}

class LoginMessage : IMessage
{
}

class LogoutMessage : IMessage
{
}

class UnknownMessage : IMessage
{
}

interface IMessageProcessor
{
    void PrcessMessageBase(IMessage msg);
}

abstract class MessageProcessor<T> : IMessageProcessor where T : IMessage
{
    public void PrcessMessageBase(IMessage msg)
    {
        ProcessMessage((T)msg);
    }

    public abstract void ProcessMessage(T msg);

}

class LoginMessageProcessor : MessageProcessor<LoginMessage>
{
    public override void ProcessMessage(LoginMessage msg)
    {
        System.Console.WriteLine("Handled by LoginMsgProcessor");
    }
}

class LogoutMessageProcessor : MessageProcessor<LogoutMessage>
{
    public override void ProcessMessage(LogoutMessage msg)
    {
        System.Console.WriteLine("Handled by LogoutMsgProcessor");
    }
}

class MessageProcessorTest
{
    /// <summary>
    /// IMessage Type and the IMessageProcessor which would process that type.
    /// It can be further optimized by keeping IMessage type hashcode
    /// </summary>
    private Dictionary<Type, IMessageProcessor> msgProcessors = 
                                new Dictionary<Type, IMessageProcessor>();
    bool processorsLoaded = false;

    public void EnsureProcessorsLoaded()
    {
        if(!processorsLoaded)
        {
            var processors =
                from processorType in Assembly.GetExecutingAssembly().GetTypes()
                where processorType.IsClass && !processorType.IsAbstract &&
                      processorType.GetInterface(typeof(IMessageProcessor).Name) != null
                select Activator.CreateInstance(processorType);

            foreach (IMessageProcessor msgProcessor in processors)
            {
                MethodInfo processMethod = msgProcessor.GetType().GetMethod("ProcessMessage");
                msgProcessors.Add(processMethod.GetParameters()[0].ParameterType, msgProcessor);
            }

            processorsLoaded = true;
        }
    }

    public void ProcessMessages()
    {
        List<IMessage> msgList = new List<IMessage>();
        msgList.Add(new LoginMessage());
        msgList.Add(new LogoutMessage());
        msgList.Add(new UnknownMessage());

        foreach (IMessage msg in msgList)
        {
            ProcessMessage(msg);
        }
    }

    public void ProcessMessage(IMessage msg)
    {
        EnsureProcessorsLoaded();
        IMessageProcessor msgProcessor = null;
        if(msgProcessors.TryGetValue(msg.GetType(), out msgProcessor))
        {
            msgProcessor.PrcessMessageBase(msg);
        }
        else
        {
            System.Console.WriteLine("Processor not found");
        }
    }

    public static void Test()
    {
        new MessageProcessorTest().ProcessMessages();
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-06-16T18:02:43.093

你不能那样做。对于不同的解决方案，您可以尝试从更高级别的角度（即您希望使用强制转换的变量完成什么）来说明您的问题。

你可以用这样的东西：

```
 public abstract class Message { 
     // ...
 }
 public class Message<T> : Message {
 }

 public abstract class MessageProcessor {
     public abstract void ProcessMessage(Message msg);
 }
 public class SayMessageProcessor : MessageProcessor {
     public override void ProcessMessage(Message msg) {
         ProcessMessage((Message<Say>)msg);
     }
     public void ProcessMessage(Message<Say> msg) {
         // do the actual processing
     }
 }

 // Dispatcher logic:
 Dictionary<Type, MessageProcessor> messageProcessors = {
    { typeof(Say), new SayMessageProcessor() },
    { typeof(string), new StringMessageProcessor() }
 }; // properly initialized

 messageProcessors[msg.GetType().GetGenericArguments()[0]].ProcessMessage(msg); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-06-16T18:10:47.587

这根本是不允许的：

```
Type key = message.GetType();
MessageProcessor<key> processor = messageProcessors[key] as MessageProcessor<key>; 
```

您不能将泛型类型作为变量值。

您必须进行切换或其他操作：

```
Type key = message.GetType();
if (key == typeof(Foo))
{
    MessageProcessor<Foo> processor = (MessageProcessor<Foo>)messageProcessors[key];
    // Do stuff with processor
}
else if (key == typeof(Bar))
{
    MessageProcessor<bar> processor = (MessageProcessor<Bar>)messageProcessors[key];
    // Do stuff with processor
}
... 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-16T18:09:21.850

如前所述，您不能直接投射它。一种可能的解决方案是让这些泛型类型从非泛型接口继承，在这种情况下，您仍然可以在其上调用方法而无需反射。使用反射，您可以将映射对象传递给任何期望它的方法，然后将为您执行转换。因此，如果您有一个名为 Accept 的方法，期望 MessageProcessor 作为参数，那么您可以找到它并动态调用它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-11-28T13:44:20.017

```
 public delegate void MessageProcessor<T>(T msg) where T : IExternalizable;

    virtual public void OnRecivedMessage(IExternalizable msg)
    {
        Type type = msg.GetType();
        ArrayList list = processors.Get(type);
        if (list != null)
        {
            object[] args = new object[]{msg};
            for (int i = list.Count - 1; i >= 0; --i)
            {
                Delegate e = (Delegate)list[i];
                e.Method.Invoke(e.Target, args);
            }
        }
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-15T09:01:49.950

@DanielPlaisted 之前的答案通常有效，但通用方法必须是 public 或必须使用`BindingFlags.NonPublic | BindingFlags.Instance`！由于缺乏声誉，无法将其发布为评论。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-28T04:19:41.320

我努力解决围绕数据表类而不是消息的类似问题。上面提到的将类的非泛型版本转换为派生泛型版本的根本问题是相同的。

为了允许注入到不支持数据库的可移植类库中，我引入了一组接口类，目的是我可以传递一个类型并获得一个匹配的泛型。它最终需要实现一个通用方法。

```
// Interface for injection
public interface IDatabase
{
    // Original, non-functional signature:
    IDatatable<object> GetDataTable(Type dataType);

    // Functional method using a generic method:
    IDatatable<T> GetDataTable<T>();
} 
```

这是使用上述通用方法的整个实现。

将从字典中强制转换的泛型类。

```
// Non-generic base class allows listing tables together
abstract class Datatable
{
    Datatable(Type storedClass)
    {
      StoredClass = storedClass;
    }

    Type StoredClass { get; private set; }
}

// Generic inheriting class
abstract class Datatable<T>: Datatable, IDatatable<T>
{
    protected Datatable()
        :base(typeof(T))
    {
    }
} 
```

这是存储泛型类并对其进行强制转换以满足接口中的泛型方法的类

```
class Database
{
    // Dictionary storing the classes using the non-generic base class
    private Dictionary<Type, Datatable> _tableDictionary;

    protected Database(List<Datatable> tables)
    {
        _tableDictionary = new Dictionary<Type, Datatable>();
        foreach (var table in tables)
        {
            _tableDictionary.Add(table.StoredClass, table);
        }
    }

    // Interface implementation, casts the generic
    public IDatatable<T> GetDataTable<T>()
    {
        Datatable table = null;

        _tableDictionary.TryGetValue(typeof(T), out table);

        return table as IDatatable<T>;
    }
} 
```

最后是接口方法的调用。

```
IDatatable<CustomerAccount> table = _database.GetDataTable<CustomerAccount>(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-29T16:31:43.887

要将任何类型对象转换为泛型类型`T`，诀窍是首先分配给任何更高类型的对象，然后将其强制转换为泛型类型。

```
object temp = otherTypeObject;
T result = (T)temp; 
```

# java - Hashmap 并发问题

> ID：1003026
> 
> 赞同：34
> 
> 时间：2009-06-16T18:02:11.080
> 
> 标签：java, concurrency

我有一个 Hashmap，出于速度原因，我不想要求锁定。假设我不介意陈旧的数据，同时更新和访问它会导致任何问题吗？

我的访问是获取，而不是遍历它，并且删除是更新的一部分。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-06-16T18:05:06.083

是的，这将导致重大问题。一个例子是向哈希映射添加值时可能发生的情况：这可能导致表的重新哈希，如果在另一个线程迭代冲突列表（哈希表“桶”）时发生这种情况，则该线程可能错误地找不到地图中存在的键。`HashMap`对于并发使用显然是不安全的。

改为使用[`ConcurrentHashMap`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-06-16T18:40:22.750

[同步或使用ConcurrentHashMap](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)的重要性不容小觑。

直到几年前，我一直处于错误的印象中，我只能在 HashMap 上同步 put 和 remove 操作。这当然是非常危险的，实际上会导致一些（我认为是早期 1.5）jdk 上的 HashMap.get() 中的无限循环。

几年前我做了什么（真的不应该做）：

```
public MyCache {
    private Map<String,Object> map = new HashMap<String,Object>();

    public synchronzied put(String key, Object value){
        map.put(key,value);
    }

    public Object get(String key){
        // can cause in an infinite loop in some JDKs!!
        return map.get(key);
    }
} 
```

**编辑**：我想我会添加一个不做什么的例子**（**见上文）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-06-16T18:33:15.523

如有疑问，请检查类的[Javadocs](http://java.sun.com/javase/6/docs/api/java/util/HashMap.html)：

> **请注意，此实现不同步。**如果多个线程同时访问一个哈希映射，并且至少有一个线程在结构上修改了映射，则*必须*在外部进行同步。（结构修改是添加或删除一个或多个映射的任何操作；仅更改与实例已包含的键关联的值不是结构修改。）这通常通过在自然封装映射的某个对象上同步来完成. 如果不存在这样的对象，则应使用 Collections.synchronizedMap 方法“包装”地图。这最好在创建时完成，以防止对地图的意外不同步访问：
> 
> `Map m = Collections.synchronizedMap(new HashMap(...));`

（强调不是我的）

因此，基于您说您的线程将从 Map 中删除映射的事实，答案是**肯定**的，它肯定会引起问题，是的，它肯定是**不安全**的。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-06-16T21:50:10.640

是的。[非常糟糕的事情](http://mailinator.blogspot.com/2009/06/beautiful-race-condition.html)会发生。例如，您的线程可能会陷入无限循环。

使用[ConcurrentHashMap](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)或[NonBlockingHashMap](https://github.com/cliffclick/JCTools/)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-06-16T18:09:24.097

您描述的条件将不满足`HashMap`。由于更新地图的过程不是原子的，您可能会遇到地图处于无效状态。多次写入可能会使它处于损坏状态。 [ConcurrentHashMap](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)（1.5 或更高版本）可以满足您的需求。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-06-16T18:11:11.300

如果“同时”是指来自多个线程，那么是的，您需要锁定对它的访问（或使用 ConcurrentHashMap 或类似的方法为您锁定）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T22:27:37.427

像其他提到的一样，使用 ConcurrentHashMap 或在更新地图时同步地图。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-07T17:54:49.423

我在这里或其他地方读过，不，你不能从多线程访问，但没有人说真正发生了什么。

所以，我今天看到（这就是我提出这个老问题的原因）自 3 月以来在生产中运行的应用程序：2 放置相同的 HashSet（然后是 HashMap）导致 CPU 过载（接近 100%），并且内存增加3GB，然后被 GC 降低。我们必须重新启动应用程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-16T18:17:18.857

不，如果您执行以下操作，不会有任何问题：

1.  在任何多线程发生之前，在第一次加载单个线程时将数据放入 HashMap。这是因为添加数据的过程会改变 modcount，并且在第一次添加（将返回 null）与替换数据（将返回旧数据，但不会更改 modcount）时有所不同。Modcount 是使迭代器快速失败的原因。但是，如果您使用 get，则不会迭代任何内容，所以没关系。

2.  在整个应用程序中使用相同的密钥。一旦应用程序启动并加载其数据，就不能将其他键分配给此映射。这样，get 将获得陈旧的数据或新插入的数据 - 不会有任何问题。

# cocoa - 打开应用程序时停止启动的任务

> ID：1003031
> 
> 赞同：2
> 
> 时间：2009-06-16T18:03:10.190
> 
> 标签：cocoa, launchd

我想知道是否有某种方法可以在应用程序打开时停止启动任务，然后在应用程序关闭时再次启动它。我的 launchd 任务设置为在文件更改时收到通知，然后对文件执行一些 UNIX 代码。但是，我的应用程序对此文件进行了很多更改，因此当我的应用程序打开时我无法运行任务（否则每次更改文件时它都会运行 UNIX 代码，这不好）。执行此操作的不同方法是否有优缺点（即使我还没有找到任何方法）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T01:08:30.397

如果你喜欢冒险，你可以试试 launchd 自己的 API，它位于 /usr/include/launch.h。查看[launchctl.cpp](http://www.opensource.apple.com/source/samba/samba-187/tools/prefsync/lib/launchctl.cpp)`launchd_stop_job`中的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T18:14:06.630

您可以使用 applescript 来检查应用程序是否正在运行。

我发现这篇文章描述了一个将监视应用程序的启动和关闭的applescript：http: [//macosx.com/forums/1199085-post2.html](http://macosx.com/forums/1199085-post2.html)

```
global wasLoaded

on run
    set wasLoaded to isAppLoaded("Safari")

    idle
end run

on idle
    set x to isAppLoaded("Safari")
    if x and not wasLoaded then
        do shell script "SOME BASH COMMAND" -- stop your launchd task
        set wasLoaded to true
    else if wasLoaded and not x then
        do shell script "SOME BASH COMMAND" -- start your launchd task
        set wasLoaded to false
    end if
    return 1 --will wait 1 second before checking again
end idle

on isAppLoaded(app_name)
    tell application "System Events"
        set app_list to every application process whose name contains app_name
        if the (count of app_list) > 0 then
            return true
        else
            return false
        end if
    end tell
end isAppLoaded 
```

我敢肯定，一个有成就的`bash`脚本编写者可以通过解析来自`top`.

[苹果文档`do shell script`](http://developer.apple.com/technotes/tn2002/tn2065.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-21T08:03:10.333

有关 KeepAlive 和 PathState 关键字，请参阅 launchd.plist 手册页。

# php - 在设计问题中从设计师那里获得帮助之前，程序员应该做什么？

> ID：1003032
> 
> 赞同：0
> 
> 时间：2009-06-16T18:03:13.950
> 
> 标签：php, asp.net, jsp

作为一名前端开发人员，多年来我已经为使用 ASP、PHP 和 XSLT 编码的开发人员解决了许多与浏览器和 CSS 相关的问题。

我只是想让一些前端设计师和开发人员指出，当编程中出现一些设计问题时需要考虑哪些事情。

Firebug 是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T18:15:39.547

设计人员和开发人员通常具有共生关系。在我看来，所有开发人员都应该（至少）具备非常基本的设计技能，并且所有设计师都应该对代码有所了解。我并不是说这两个职业应该能够做对方的工作；只是每个人都应该对对方如何解决问题有一个大致的了解。形式和功能之间经常出现的许多敌意来自双方不理解对方。

在更具体的层面上，开发人员可以从了解 HTML 和 CSS 中受益，因为他们可以看到设计人员正在做什么，并在必要时进行修改。更好的沟通会带来更好的产品，两个专业如果不知道相同的语言就无法沟通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T18:27:23.130

作为前端设计师，后端开发人员往往不知道的关键事项是：

*   **Internet Explorer**可以并且将采用完全有效的 HTML、CSS 和 JS 并破坏最基本的预期行为
*   首先在（Firefox、Safari、Opera、Chrome、Arora 等）中开发/测试接口！那么请务必在 IE6、IE7 和 IE8 中查看...
*   对 HTML、CSS 和 ECMAScript 规范持保留态度。与规范相比，“指南”通常看起来更合适。
*   你听过很多 Div's 与 Table's 的战斗。Div 很棒，但迟早你会遇到需要在表格中包装一些东西以阻止浏览器 X 包装你的内容，而你明确告诉它不要。偶尔“放弃”是可以的。

因此，作为最终结果，您希望将信息传递给开发人员，以帮助澄清他们真正需要了解的内容（并希望在此过程中为他们省去令人沮丧的步骤）。

尽管像*[A List Apart](http://www.alistapart.com/)*这样的网站有很棒的带代码的文章，但有时解决方案会迷失在故事中。

为了处理错误，我推荐这个[**Knol**](http://knol.google.com/k/-/web-browser-bugs/)，它链接回**[这个浏览器错误列表](http://webbugtrack.blogspot.com/)**。

Knol 没有提供太多信息，但它确实提供了一个有组织的索引来查找导致您痛苦的错误。

否则，有关一般信息，请查看各种开发人员博客。 [Snook.ca](http://snook.ca)、[PPK 的 QuirksBlog](http://www.quirksmode.org/blog/)、[蓝衣人](http://themaninblue.com)等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T18:45:21.603

在我工作的地方，“设计”是任何与图像相关的东西，“开发”是任何与代码相关的东西。设计师在 Photoshop 中工作，有时在 HTML 编辑器中工作，而开发人员在 IDE 中工作。

设计人员可以编写 HTML 和 CSS，但开发人员经常需要对其进行调整以与 ASP.NET 一起使用（根据需要更改输入控件服务器控件）。如果需要，开发人员可能会调整图像大小或重新着色，但速度不如设计人员快。设计师通常会提前完成他们的工作，而开发人员则负责正在进行的工作。

根据您的定义，我介于前端开发人员和后端之间。关注点的分离并不总是很清楚。

Evan Meagher 说得对，“在形式和功能之间经常看到的许多敌意来自双方不理解对方。” 任何两个需要合作的部门都是一样的。一种可以平息敌意、帮助团队相互理解的方法是让他们在任何战斗开始前互相交谈。也许你可以吃个午餐来学习，前端开发人员描述他们所做的事情，以及特定项目的一些细微差别，并邀请你的后端开发人员在下周做同样的事情。

# sql-server - SQL CASE 与 JOIN 效率

> ID：1003034
> 
> 赞同：7
> 
> 时间：2009-06-16T18:03:41.513
> 
> 标签：sql-server

在我的`MS SQL Server`数据库中，我根据一列中的各种不同代码提取交易数据。

是否更有效：

*   为 WHERE 子句中的每个代码一遍又一遍地连接同一个表

*   对整个表执行多个 case 语句（如下所示）

*   在整个表上执行多个 case 语句，但用一个`WHERE SubsidCde IN ('AA','BA','BB', etc)`子句限制它

我们每秒运行的查询如此之多，即使我尝试了所有 3 种方法，我也没有得到明确的结果。

```
SELECT
    SUM(CASE WHEN Subsid_Cde = 'AA' THEN Trans_Amt END),0) [AA],
    SUM(CASE WHEN Subsid_Cde = 'BA' THEN Trans_Amt END),0) [BA],
    SUM(CASE WHEN Subsid_Cde = 'BB' THEN Trans_Amt END),0) [BB]
FROM
    Transactions

--  There are 8 more rows like this, using a different code for each line 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T18:12:26.587

如果您要对 Subsid_Cde 字段的所有可能（或大多数）值求和，则 CASE 会更快，因为它不会在汇总总和时多次扫描表。如果您只寻找可能的 Subsid_Cde 字段的一小部分，那么单独的选择/连接（以及 Subsid_Cde 上的索引）会更快。

您需要学习阅读执行计划，然后您将能够自己弄清楚这些事情。

此外，或者，您可以在 Subsid_Cde 上执行 GROUP BY 包装到 PIVOT 子句中（谷歌用于 PIVOT MS SQL SERVER 2005）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T18:12:48.927

3是你最好的选择。它很容易阅读，以后也很容易修改，它应该使用您已经定义并期望使用的索引（仍然，检查）。

--1 有时你必须加入同一张桌子。但这不是其中之一，每次您需要包含新的 Subsid_Cde 时加入会导致 SQL 的可读性降低，而不会真正获得任何东西。

--2 事务表往往会变得非常大，因此您永远不想扫描整个表。所以#2 肯定会出局，除非您将在查询中使用的代码无论如何都会返回所有行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T18:07:36.127

用这个：

```
SELECT  (
        SELECT  SUM(Trans_Amt)
        FROM    Transactions
        WHERE   Subsid_Cde = 'AA'
        ) AS sum_aa,
        (
        SELECT  SUM(Trans_Amt)
        FROM    Transactions
        WHERE   Subsid_Cde = 'BB'
        ) AS sum_bb 
```

, 没有外部`FROM`or`WHERE`子句。

在`SQL Server 2005+`中，使用这个：

```
SELECT  [AA], [BB]
FROM    (
        SELECT  trans_amt, subsid_cde
        FROM    transactions
        ) q
PIVOT   (
        SUM(trans_amt)
        FOR subsid_cde IN (['AA'], ['BB'])
        ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-25T08:38:59.343

当您执行这样的任务时，有一些非常重要的注意事项。

*   的限制`CASE`
*   随之而来的所有权`CASE`

> `CASE`是表达式而不是语句。

代码将重新评估每个`WHEN`.

在您的实例中`CASE`，它正在查看原始表并且不会评估超过一个`WHEN`，因此它不会重新查询，它将根据您的索引进行一次扫描或搜索并返回结果，然后执行对于每个`CASE`，但它必须为 执行该操作`JOIN`，您的*结果被编码到案例*中的事实意味着系统不必*搜索要检查的值*。

最后一点很重要，因为它对业务和作为编码人员的你都有一些非常重要的影响。

Aaron Bertrand 写了一篇非常棒的文章，详细介绍了“案例的肮脏秘密” [https://sqlperformance.com/2014/06/t-sql-queries/dirty-secrets-of-the-case-表达](https://sqlperformance.com/2014/06/t-sql-queries/dirty-secrets-of-the-case-expression)

`WHEN`总结是，它可能`CASE`会重新查询每个**在调用时重新评估**[`RAND()`是罪魁祸首] 它不仅会在某些情况下产生不一致的结果，而且如果您的查询具有“涉及 N 次幂的大 O 表示法”（其中是一种非常技术性的说法，使用 Sort、Union、Distinct 或其他形式的被动排序调用或更糟的是，正在使用没有最新统计信息的过时计划。这意味着`CASE`可能会增加一倍、三倍或我喜欢称之为“(N)WHEN”的怪物的查询时间，该怪物已经遭受指数迭代问题的困扰。

> 您`CASE`将需要“技术维护”（无论何时实施新代码，**您**都必须**重新编码**以将其考虑在内），a`JOIN`将需要“用户维护”（用户更改查找表，您的查询是无需您获得任何所有权即可更新）

“技术维护”使**您**面临陷入业务错误后果的**风险。**

您总是希望对解决方案进行编码，以最大限度地减少您对数据吞吐量的所有权，因为您不想在法庭上谈论您在触及业务逻辑时的一小部分参与，您希望与家人待在家里或度假时没有接到有关他们刚刚添加的“CC”的电话，并希望在您的报告中汇总。

在 的实例中`CASE`，您已将自己编码到您正在执行业务逻辑的情况下，业务应该在查找表中决定业务逻辑*应该*是`JOIN`.

简而言之，当企业提出新代码时，您的报告没有看到该输出，这将导致您的生产抽签，特别是如果您去度假并发现自己是唯一知道您的存在的人`CASE`，你可能不会认为它是一种开销，但你不会考虑长期，因为从长远来看记忆是模糊的，你可能会发现自己在寻找你的`CASE`然后在未来添加它，你会赢的'谢谢你自己。

为了节省 4 秒，您**个人会给自己带来不便**。

牺牲**自己**的速度并不是好的编码习惯。

# asp.net - 如何使用 GridView 和 ObjectDataSource 进行排序？

> ID：1003037
> 
> 赞同：15
> 
> 时间：2009-06-16T18:04:46.740
> 
> 标签：asp.net, gridview, objectdatasource

我有一个 GridView`ObjectDataSource`并且我希望能够对其进行排序。

分页工作正常，但是排序给了我一个例外：

> GridView`gridView`触发了未处理的事件排序。

如何在服务器端启用排序？

（即`gridView.EnableSortingAndPagingCallbacks`必须保持为假）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-16T18:08:31.320

将 gridView.AllowSorting 属性设置为 true。如果您使用的是实现 IBindingList 的对象，则网格应该允许您在回发时自动对数据进行排序。但是，由于情况很可能并非如此，您应该接受上面 TheTXI 的建议并自己处理排序事件。在代码隐藏中连接 GridView.Sorting 事件，如下所示：

```
gridView.Sorting += new GridViewSortEventHandler(gridView_Sorting); 
```

在 gridView_Sorting 方法中处理排序，应该如下所示：

```
private void gridView_Sorting(object sender, GridViewSortEventArgs e)
{
     //Sorting logic here
} 
```

此外，您可以使用附加到控件的 OnSort="gridView_Sorting" 将事件连接到页面本身。

请记住，由于您将 gridView.EnableSortingAndPagingCallbacks 设置为 false，因此当用户尝试排序时不会立即触发，而是等待回发到服务器。

我希望这有帮助！

**编辑：**

由于 ObjectDataSource 似乎是选择的中间人，因此这里也简要说明了用于排序的接线。在您的页面中使用以下内容（完整的示例可以[在](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.sortparametername.aspx)MSDN 上找到，靠近底部）：

```
<asp:GridView ID="TestGridView" runat="server" DataSourceID="ObjectDataSourceTest"
        AllowSorting="True">
    </asp:GridView>
    <asp:ObjectDataSource ID="ObjectDataSourceTest" runat="server" 
        SelectMethod="SelectMethod" 
        TypeName="Samples.AspNet.CS.SortingData" 
        SortParameterName="sortExpression">
    </asp:ObjectDataSource> 
```

而不是实际使用 gridView.Sorting 事件，您将跳转到 ObjectDataSource 来处理排序。一旦触发排序，它应该调用在您的代码后面的 SelectMethod 中找到的方法。然后，在 SelectMethod 内部，您将处理 GridView 对象的重建，如下所示：

```
public void SelectMethod(string sortExpression)
{
     //Rebuild gridView table if necessary, same method used in 
     //on a postback, and retrieve data from the database. Once
     //completed sort the data with:

     gridView.Sort(sortExpression, SortDirection.(Ascending or Descending))
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-06-11T10:43:16.147

我正在使用 Linq2Sql 和 ObjectDataSource，它可以很好地进行分页和排序。

我实现了一个用作 ObjectDataSource 的类。它有一个 Select 和一个 Count 方法调用我的业务层，它使用**Linq2SQL**查询从数据库中检索数据。select 方法自动获取第一项索引、页面大小和排序表达式作为参数。

```
public List<EntityClass> Select(int startIndex, int pageSize, string sortBy) {}
public int Count() {} 
```

在 ASPX 中，DataSource 的配置如下：

```
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server"  
     SelectMethod="Select" EnablePaging="true"
     StartRowIndexParameterName="startIndex" 
     MaximumRowsParameterName="pageSize"
     SortParameterName="sortBy" SelectCountMethod="Count" >   
</asp:ObjectDataSource> 
```

Select 和 Count 方法使用 Linq 查询从数据库中检索数据。我使用**Skip()、Take()**和**Orderby()**方法。为了让 OrderBy 接受字符串排序表达式，我使用[DynamicLinq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)代码不多，数据绑定、分页和排序都会自动工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T11:06:07.757

传入`SortExpression`数据访问层的方法，该方法调用`StoredProcedure` 并写入以下方式 SP 以处理 SQL 上的排序。通过这种方式，您可以提高排序的性能。

数据库 SP：

```
Select ROW_NUMBER() OVER(ORDER BY   '+@sortExpression +' ) as RowNum
,* from (SELECT CUSTOMERID,  
LEDGERDESCRIPTION,  
CustomerDescription as CustomerName
WHERE REGIONID ='''+@RegionID+''')t
order by RowNum' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T15:52:54.033

您可以使用 LINQ 仅`OrderBy`在所选列上使用，执行以下操作：

```
 public static List<YourDataObject> GetSortedData(string orderBy)
    {
        List<YourDataObject> sortedDataList = new List<YourDataObject>();

        switch (orderBy)
        {
            case "Col1": sortedEmployeeList = GetDefaultObjects().OrderBy(x => x.Col1).ToList();
                break;
            case "Col2": 
                         //Do this for all columns
            default:
                sortedEmployeeList = GetDefaultObjects();
                break;
        }

        return sortedEmployeeList;
    } 
```

这是在`Select`对象数据源的方法中完成的。

在 GridView 中添加排序键。并`SelectParameter`在对象数据源中添加一个“orderBy”

```
<asp:GridView AllowSorting="true" DataSourceID="objDsAllObjects" ....>
<Columns>
         <asp:BoundField SortExpression="Col1"/>
         <!-- Do this for all columns -->
</Columns>
</asp:GridView >

<asp:ObjectDataSource ID="objDsAllObjects" SortParameterName="orderBy" runat="server" 
SelectMethod="GetAllEmployees" TypeName="YourObjectClass"></asp:ObjectDataSource> 
```

它对我有用，而无需更改*DAL*层和存储过程。

# c# - ASP.NET MVC Html.BeginForm 问题

> ID：1003040
> 
> 赞同：9
> 
> 时间：2009-06-16T18:05:00.110
> 
> 标签：c#, asp.net-mvc, routing

我有一个部分的看法：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<DomainModel.Entities.Product>" %>

<div class="item">
    <h3><%= Model.Name %></h3>
    <%= Model.Description %>

    <% using (Html.BeginForm("AddToCart", "Cart")) { %>
        <%= Html.Hidden("ProductID") %>
        <%= Html.Hidden("returnUrl", ViewContext.HttpContext.Request.Url.PathAndQuery) %>
        <input type="submit" value="+ Add to cart" />
    <% } %>

    <h4><%= Model.Price.ToString("c")%></h4>
</div> 
```

这是渲染的 html：

```
<div class="item"> 
    <h3>Kayak</h3> 
    A boat for one person
    <form action="" method="post">
        <input id="ProductID" name="ProductID" type="hidden" value="1" /> 
        <input id="returnUrl" name="returnUrl" type="hidden" value="/" /> 
        <input type="submit" value="+ Add to cart" /> 
    </form> 
    <h4>$275.00</h4> 
</div> 
```

单击提交按钮时没有任何反应，我很确定这是因为表单操作属性没有值。BeginForm(action, controller) 不应该负责渲染表单动作吗？我究竟做错了什么？

## 编辑

CartController AddToCart 操作中的代码：

```
 public RedirectToRouteResult AddToCart(Cart cart, int productID, string returnUrl)
    {
        Product product = productsRepository.Products.FirstOrDefault(p => p.ProductID == productID);

        cart.AddItem(product, 1);
        return RedirectToAction("Index", new { returnUrl });
    } 
```

## 编辑 2

呈现部分的视图：

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <% foreach (var product in Model) { %>
        <% Html.RenderPartial("ProductSummary", product); %>
    <% } %>

    <div class="pager">
    Page:
    <%=Html.PageLinks((int)ViewData["CurrentPage"],
                      (int)ViewData["TotalPages"],
                      x => Url.Action("List", new { page = x, category = ViewData["CurrentCategory"] })) %>
    </div>
</asp:Content> 
```

## 编辑 3

路线：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            null, // don't need a name
            "", // matches the root URL, i.e. ~/
            new { controller = "Products", action = "List", category = (string)null, page = 1 } //Defaults
        );

        routes.MapRoute(
            null, // don't need name
            "Page{page}", // URL pattern, e.g. ~/Page683
            new { controller = "Products", action = "List", category = (string)null }, // defaults
            new { page = @"\d+" } // constraints: page must be numerical
        );

        routes.MapRoute(null,
            "{category}",
            new { controller = "Products", action = "List", page = 1 });

        routes.MapRoute(null,
            "{category}/Page{page}",
            new { controller = "Products", action = "List" },
            new { page = @"\d+" } // constraints: page must be numerical
        );

    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-16T19:19:08.833

您似乎没有设置默认路由。`BeginForm`用于`UrlHelper.GenerateUrl`将动作/控制器名称与您的路由集合匹配。因此，如果您没有映射到 的路由`AddToCart`，则无法为其生成 URL。尝试将其添加到路线的底部：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Products", action = "List", id = "" }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-27T00:05:34.590

这是来自 Steven Sanderson 出色的“Pro ASP MVC 框架”一书中使用的主要应用程序示例。

有趣的是，我犯了完全相同的错误，并省略了第 130 页清单中给出的最终 .MapRoute 调用。

```
routes.MapRoute("Default", "controller}/{action}" 
```

正是约翰尼 G 对这篇文章的回答也帮助我找到了我的错误。

好一个约翰尼！

# ms-access - 在 VBA 2 中复制记录（新问题）

> ID：1003048
> 
> 赞同：0
> 
> 时间：2009-06-16T18:05:52.430
> 
> 标签：ms-access, vba

我有这段代码，我试图在 VBA 中复制一条记录。不幸的是，我无法让它工作。我不知道为什么它不会做任何事情。

```
Dim OldRecord As DAO.Recordsets, NewRecord As DAO.Recordset
Dim strSQL As String

strSQL = "SELECT [Tote Log].* FROM [Tote Log] WHERE Number = " & _
            Me.tbScannerRead.Value

Set OldRecord = CurrentDb.OpenRecordset(strSQL)

If OldRecord.Count = 1 Then
    Set NewRecord = _
                CurrentDb.OpenRecordset("SELECT [Tote Log].* FROM [Tote Log]")
    With NewRecord
        .AddNew
        For i = 0 To .Fields.Count - 1
            .Fields(i).Value = OldRecord.Fields(i).Value
        Next i
        .Fields("Number").Value = Me.tbScannerRead & "B2"
        .Update
        varBookMark = .Bookmark
    End With
    NewRecord = varBookMark
    DoCmd.RunCommand acCmdSelectRecord
    Me.tbMessageBox = "Added new record"
    Me.tbMessageBox.Visible = True
    GoodToteRead = False
    Me.tbScannerRead.SetFocus
End If 
```

我什么也没得到，我试图从手提包日志中复制一条记录，并将数字从 L20444 更改为 L20444B2，并具有与原始相同的字段信息。这是我到目前为止的地方，但我什么也没得到。Ahy Help 将非常感激，我的意思是非常感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T22:01:22.213

有几件事可能导致它。这是一个。你的表有主键吗？看起来您正在尝试将主键更新为表中已存在的值，然后再更改它。这发生在表格上吗？如果是这样，Access 可能会因为您更改其背后的记录集而生气。a`me.undo()`在进行更改之前会有所帮助。此外，如果你在一个表格上，你可以通过这种方式完成同样的事情。这有点hacky，但这是简单的方法。

```
DoCmd.RunCommand acCmdSelectRecord
DoCmd.RunCommand acCmdCopy
DoCmd.GoToRecord , , acNewRec
DoCmd.RunCommand acCmdPaste 
```

作为替代方案，我会推荐一些类似的东西。

```
Dim sSql As String
Dim sUpdateSuffix as string
sUpdateSuffix="B2"
Const sTableName As String = "[Tote Log] "
sSql = "INSERT INTO "[Tote Log]([number],[whateverelse]) " & _
       "SELECT [number]" & sUpdateSuffix & ",[whateverelse]  FROM [Tote Log] WHERE Number = " & Me.tbScannerRead.Value
CurrentProject.Connection.Execute sSql 
```

如果要动态构建 sql 字符串，请使用与循环字段并构建查询字符串相同的方法。 `me.requery`将重建表单记录集。

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T19:10:20.487

好吧，它实际上可能正在保存数据库记录，但没有重新显示它；我很难破译那部分代码，而且我不知道你的表单是什么。

无论如何，你应该像这样打开你的记录集：

```
Set rs = db.OpenRecordset(strSQL, dbOpenDynaset, dbSeeChanges) 
```

特别是如果您使用 SQL Server 作为后端（您应该这样做）。

保存记录后，您可能应该通过执行 recordset.find() 将记录重新加载回表单，而不是尝试为它添加书签。书签仅适用于它们源自的同一记录集。这提供了数据实际保存到数据库中的往返验证。

# .net - .NET 4.0 的合同设计与 Eiffel 相比如何？

> ID：1003049
> 
> 赞同：11
> 
> 时间：2009-06-16T18:06:06.207
> 
> 标签：.net, design-by-contract, eiffel

我有“高兴”在大学里由 Bertrand Meyer 本人教授 Eiffel，并且刚刚读到 .NET 4.0 将包括合同设计。

任何有见识的人都可以详细说明与 Eiffel 现有功能集相比它的强大程度吗？

是否支持接口合同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T18:10:25.857

没有使用过 Eiffel，我无法对比较发表评论，但我已经搞砸了 Spec#，它是按合同设计的，并且（大部分）正在被引入 C# 4.0，我可以这样说：

它非常强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T18:18:32.490

它允许您指定“设计时断言”，编译器会警告您可能违反约束。

[这是一篇博客文章](http://iridescence.no/post/Design-by-Contract-with-NET-40.aspx)，对其进行了一些解释，并附有 Channel9 详细解释的链接。

# ruby-on-rails - 显示来自另一个控制器的验证错误消息

> ID：1003051
> 
> 赞同：0
> 
> 时间：2009-06-16T18:06:24.927
> 
> 标签：ruby-on-rails, ruby

我在views/users/show.html.erb中有表格

```
<% form_for [@user,Wall.new] do |f| %>
<%= f.error_messages %>
<p>
<%= f.label :message %><br />
<%= f.text_area :message,:rows=>4 %>
</p>
<%= f.hidden_field :sender_id,:value=>current_user.id %>
<p><%= f.submit "Submit" %></p>
<% end %> 
```

我在 Models/wall.rb 中有这个验证方法

验证：是朋友吗？

```
def isfriend?
errors.add(:message,'You have to be a friend to send message')  if !Friendship.find(:first,
:conditions=>"requester_id=#{self.sender_id} and accepter_id=#{self.receiver_id} and status='accepted'
or requester_id=#{self.receiver_id} and accepter_id=#{self.sender_id} and status='accepted'")
 end 
```

一切都很好验证正在工作并且保存禁用它也会给出错误消息，但它给出这样的消息不是正常的方式

ActiveRecord::RecordInvalid 在 WallsController#create

验证失败：消息 您必须成为好友才能发送消息

RAILS_ROOT：C:/Users/MaDOnos/Documents/NetBeansProjects/tttttt

如何以公平的方式显示此错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T21:25:59.907

看起来你正在调用保存！（或创建！）而不是保存（或创建）。前者会像您一样引发异常，后者将返回 false 并在对象上出现验证错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T18:11:32.580

我不明白你的问题是什么？AR 保存失败，RecordInvalid 应该是这样，您将收到您提供的验证消息。

# javascript - HTML Hidden 控件是否有任何事件？像 onchange 什么的？

> ID：1003053
> 
> 赞同：39
> 
> 时间：2009-06-16T18:06:53.927
> 
> 标签：javascript, html, dom

我可以将任何事件处理程序附加到 HTML 隐藏输入字段吗？基本上我想在隐藏的输入字段值更改时运行一个函数。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-06-16T18:25:11.027

事件仅在用户在浏览器中执行事件时触发，因此如果它被 CSS 隐藏`<input type="hidden">`或`<input>`隐藏，用户将无法触发您输入的事件。

让 onchange 起作用的唯一方法是在 Javascript 中手动触发 onchange。一个简单的例子：

```
<form name="f" onsubmit="document.f.h.value='1'; 
                         document.f.h.onchange(); 
                         return false;"
>
    <input type="hidden" name="h" value="0" onchange="alert(document.f.h.value);" />
    <input type="submit" />
</form>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-27T20:27:19.623

是的，某些浏览器（例如 Firefox）会在通过属性激活隐藏元素时触发`onclick`或事件（旨在提供键盘热键以跳转到输入）。`onfocus``accesskey`

在 Firefox 中打开以下内容，聚焦框架，然后点击`Alt`++ （Windows和Linux）或++ `Shift`（Mac）。`x``Ctrl``Alt``x`

```
<input type="hidden" accesskey="x" onclick="alert('clicked!');" />
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-22T13:17:13.660

JavaScript 具有元素的焦点事件。共有三个焦点事件：focus、focusin 和 focusout。

我发现当元素显示状态同时更改为块和无时会触发focusout，而focusin仅触发块的显示状态。

```
document.getElementById('element_id').addEventListener('focusout',function(e){
    if (this.style.display === "none") {
       // perform operations when the element is hidden, like clear fields, etc.
    } else {
       // perform operations when the element is displayed, like populate fields
    }
}); 
```

# visual-studio - 与 2008 相比，Visual Studio 2010 的性能如何？

> ID：1003054
> 
> 赞同：6
> 
> 时间：2009-06-16T18:06:55.627
> 
> 标签：visual-studio, visual-studio-2008, performance, visual-studio-2010

考虑在我的 Asus eee 1000HE 上安装 Visual Studio。由于它不是一台非常强大的机器，我想知道我应该安装 2008 还是新的 2010。看起来对 UI 等进行了很多更改。这是否意味着它现在运行也更流畅了？还是跑步真的更重？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T18:11:14.623

在我看来，2010 在旧机器上要慢得多。我目前在具有 512MB RAM 的戴尔 700m 上运行它，虽然它确实运行，但感觉速度很慢，而且比 Visual Studio 2008 慢得多。（请记住，它是一个测试版，我确信性能调整即将到来）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T18:13:04.683

考虑到 VS2010 目前仅作为 CTP 版本提供，我将安装 VS2008。

一旦 VS2010 完全发布，没有调试信息并启用优化，问这个问题并考虑使用它。目前，如果您有 2008，请使用它。我怀疑 2010 年在你的“慢”硬件上会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T18:11:50.893

判断性能差异有点困难，因为此时您**是**在虚拟机中运行它（还没有独立的测试版）。

**编辑**：如果我对无法在虚拟机之外运行它不正确，我深表歉意并予以纠正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-02-02T20:08:57.573

> 这是否意味着它现在也运行得更顺畅了？还是跑步真的更重？

这是一个旧帖子，我知道，但我只是插话笑：*大声笑*

我有一个相当不错的超频基于 Wolfdale 的游戏机。除了在 Visual Studio 2010 中编辑文本文件之外，我几乎可以在计算机上执行所有操作，速度足够快。只需在 C# 文件中上下滚动就可以使用我的一个核心。不是开玩笑。

所以我在发烧级主板上升级到了新的 Sandy Bridge 32nm CPU（3.3GHz，未锁定型号），配备 8GB Corsair RAM，在 VS2010 的文本缓冲区中滚动移动光标占用了 30% 的 CPU（没错，它使用多个核心）。这是没有插件和大纲关闭。

Vim 在同一个文件中，几乎可以做任何我能想到的事情，总是显示 0% 的 CPU 使用率。

VS2010 的编辑器性能绝对是可耻的。没有别的词了。

# google-maps - 缩放更改后获取谷歌地图 v3 的边界

> ID：1003063
> 
> 赞同：7
> 
> 时间：2009-06-16T18:08:00.867
> 
> 标签：google-maps, google-maps-api-3

我试图在缩放更改后获取地图的边界，但是在重新计算边界*之前*会触发 zoom_changed 事件。因此，在 zoom_changed 处理程序中，您将获得先前的界限，而不是新的界限。

有没有办法获得缩放变化的正确界限？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2011-11-23T09:38:44.067

这是一个[错误](http://code.google.com/p/gmaps-api-issues/issues/detail?id=1399)，如果您有兴趣，请在此问题上加注星标。

有一个丑陋的解决方法：

```
google.maps.event.addListener(map, 'zoom_changed', function () {
    google.maps.event.addListenerOnce(map, 'bounds_changed', function (e) {
            my_zoom_handler(); // do your job here
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T08:29:35.570

从[API 文档](http://code.google.com/apis/maps/documentation/v3/events.html#UIEvents)：

> 如果您尝试检测视口中的更改，请务必使用特定的 bounds_changed 事件而不是组成 zoom_changed 和 center_changed 事件。由于 Maps API 会独立触发后面的这些事件，因此 get_bounds() 可能不会在视口权威更改之前报告有用的结果。如果您希望在此类事件之后获取 get_bounds()，请务必改为收听 bounds_changed 事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T17:55:56.627

要绑定 bounds_changed 并在缩放后使用标记/地图内容，请使用以下命令：

```
google.maps.event.addListener(map, 'zoom_changed', function() {
    this.zoomChanged = true;
});

google.maps.event.addListener(map,"bounds_changed",function() {
    if (this.zoomChanged) {
        this.zoomChanged = false;
        // DO YOUR STUFF
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T19:22:25.087

我有同样的问题。这是我最终解决的几个问题，我在其他解决方案中遇到的问题。

*无论您使用鼠标还是箭头键，都正确地执行边界

*如果按住箭头键，不会在边缘附近停止，因为平移加速度会导致它在一步中“超过”边缘，所以它会停止（尝试在一个方向上按住箭头键，直到你击中边缘，然后松开并再次按下它，通过一些解决方案，它会滚动一点）

*当它碰到边缘时不会“反弹”

*正确执行缩放更改的界限

编辑：好的，所以当您使用滚轮更改缩放时它可以工作，但不能使用缩放控件。让我玩一下，我会看看我是否也可以让它工作......

编辑 2：原来，问题是因为我删除了平移控件。只要存在平移控件，就可以正常使用滚轮和缩放控件。

编辑3：不......不是这样。我已经更新了处理缩放控制的代码。

```
// bounds of the desired area
var allowedBounds = new google.maps.LatLngBounds(
                    new google.maps.LatLng(-64, -64), 
                    new google.maps.LatLng(64, 64)
                    );

var zoomChanged = false;

google.maps.event.addListener(map, 'center_changed', function() {
  var mapBounds = map.getBounds();

  if(mapBounds.getNorthEast().lat() > allowedBounds.getNorthEast().lat()) {
    var newCenter = new google.maps.LatLng(map.getCenter().lat() -
                                           (mapBounds.getNorthEast().lat() -
                                           allowedBounds.getNorthEast().lat()),
                                           map.getCenter().lng(), true);
    map.panTo(newCenter);
    return;
  }

  if(mapBounds.getNorthEast().lng() > allowedBounds.getNorthEast().lng()) {
    var newCenter = new google.maps.LatLng(map.getCenter().lat(),
                                           map.getCenter().lng() -
                                           (mapBounds.getNorthEast().lng() -
                                           allowedBounds.getNorthEast().lng()), true);
    map.panTo(newCenter);
    return;
  }

  if(mapBounds.getSouthWest().lat() < allowedBounds.getSouthWest().lat()) {
    var newCenter = new google.maps.LatLng(map.getCenter().lat() +
                                           (allowedBounds.getSouthWest().lat() -
                                           mapBounds.getSouthWest().lat()),
                                           map.getCenter().lng(), true);
    map.panTo(newCenter);
    return;
  }

  if(mapBounds.getSouthWest().lng() < allowedBounds.getSouthWest().lng()) {
    var newCenter = new google.maps.LatLng(map.getCenter().lat(),
                                           map.getCenter().lng() +
                                           (allowedBounds.getSouthWest().lng() -
                                           mapBounds.getSouthWest().lng()), true);
    map.panTo(newCenter);
    return;
  }
}, this);

google.maps.event.addListener(map, 'zoom_changed', function() {
  zoomChanged = true;
}, this);

google.maps.event.addListener(map, 'bounds_changed', function() {
  if(zoomChanged) {   
    var mapBounds = map.getBounds();

    if(mapBounds.getNorthEast().lat() > allowedBounds.getNorthEast().lat()) {
      var newCenter = new google.maps.LatLng(map.getCenter().lat() -
                                             (mapBounds.getNorthEast().lat() -
                                             allowedBounds.getNorthEast().lat()),
                                             map.getCenter().lng(), true);
      map.panTo(newCenter);
      return;
    }

    if(mapBounds.getNorthEast().lng() > allowedBounds.getNorthEast().lng()) {
      var newCenter = new google.maps.LatLng(map.getCenter().lat(),
                                             map.getCenter().lng() -
                                             (mapBounds.getNorthEast().lng() -
                                             allowedBounds.getNorthEast().lng()), true);
      map.panTo(newCenter);
      return;
    }

    if(mapBounds.getSouthWest().lat() < allowedBounds.getSouthWest().lat()) {
      var newCenter = new google.maps.LatLng(map.getCenter().lat() +
                                             (allowedBounds.getSouthWest().lat() -
                                             mapBounds.getSouthWest().lat()),
                                             map.getCenter().lng(), true);
      map.panTo(newCenter);
      return;
    }

    if(mapBounds.getSouthWest().lng() < allowedBounds.getSouthWest().lng()) {
      var newCenter = new google.maps.LatLng(map.getCenter().lat(),
                                             map.getCenter().lng() +
                                             (allowedBounds.getSouthWest().lng() -
                                             mapBounds.getSouthWest().lng()), true);
      map.panTo(newCenter);
      return;
    }

    zoomChanged = false;
  }
}, this); 
```

# sql - 远程主机上 SQL Server 2005 SP 的 Visual Studio 2008 调试

> ID：1003064
> 
> 赞同：0
> 
> 时间：2009-06-16T18:08:06.220
> 
> 标签：sql, sql-server, visual-studio-2008

我正在使用 VS 2008 并尝试进入 SQL Server 2005 数据库上的存储过程。我调出Server Explorer，双击该程序。它出现在文本窗口中。我在其中设置了一个断点，右键单击并选择“步入存储过程”。它以“用户取消”返回。MSVSCOM.exe 在 SQL Server 主机上运行，​​我可以连接到 SQL Server 主机上的远程进程。有趣的是，如果我首先附加到 SQL Server 主机上的远程进程，我可以“进入存储过程”。但是，一旦该进程关闭和/或我分离，我就会收到臭名昭著的“用户取消”消息。我发现了很多关于此的帖子（例如，[1](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/b6e670a7-68ba-453c-8d05-882cf0990e81)），但没有明确解释出了什么问题。

还有其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T18:32:25.320

我认为这是设计使然。这是调试器的工作方式。如果您在同一台机器上调试非托管进程，您还必须先附加该进程。

# ios - get-task-allow 在 Xcode 中有什么作用？

> ID：1003066
> 
> 赞同：99
> 
> 时间：2009-06-16T18:08:30.900
> 
> 标签：ios, xcode, debugging, code-signing, entitlements

当我在我的 iPhone 应用程序项目中设置我的权利时，我创建了一个新的 Entitlements.plist，并将 get-task-allow 的值设置为 false。但为什么？这把钥匙代表什么？

请注意，这与[为 iPhone 设备构建应用程序时无法验证错误有关](https://stackoverflow.com/questions/997884/application-could-not-be-verified-error-when-building-app-for-iphone-device)- 我发现将此键的值翻转为 true 允许我在我的设备上安装应用程序）

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2009-06-22T10:34:28.960

从[ADC 上的这个线程](https://devforums.apple.com/message/84647#84647)：

get-task-allow，当登录到应用程序时，允许其他进程（如调试器）附加到您的应用程序。分发配置文件要求关闭此值，而开发配置文件要求打开此值（否则 Xcode 将永远无法启动并附加到您的应用程序）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-06-17T17:25:35.113

在 iPhone 上调试应用程序的能力。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-10-10T17:40:20.167

虽然您的[答案](https://stackoverflow.com/a/1026472/9647800)是正确的，但我只想更具体地说明这一点，以便那些想知道确切`get_task_allow`含义的人可以。

`get_task_allow`是一项允许其他应用获取您应用的任务端口的权利。这意味着，如果任何其他应用程序`task_for_pid()`使用您的应用程序进程 ID 运行，他们将获得您应用程序的任务端口，以便他们可以执行诸如在内存中写入和读取内容之类的操作，从而能够修补内容并修改你的应用程序。

如果你看一下越狱是如何工作的，你会注意到他们做的第一件事就是得到`task_for_pid(mach_task_self(),0,&kernel_task);`一个`kernel_task`with `mach_port_t`value `0`，这样他们就能够接触到内核的内存。

由于内核权利没有`get_task_allow`权利，而且 Apple 甚至消除了执行`tfp0`( `task_for_pid 0`) 的可能性，因此他们需要一个补丁。

所以基本上，由于 Xcode 需要接触您的应用程序的内存并使用它来调试它，您需要启用它以进行调试，但您需要禁用它来分发您的应用程序，否则任何应用程序都可以获取您的任务端口。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2012-01-09T09:58:15.407

对于 xcode 4：您必须从新文件创建 Entitlements.plist 文件。和 Targets->build Settings->Code Signing Entitlements 你必须在这里写“Entitlements.plist”

我这样做了，xcode 不再出现错误

# c# - 如何检查另一个应用程序是否最小化？

> ID：1003073
> 
> 赞同：7
> 
> 时间：2009-06-16T18:09:42.877
> 
> 标签：c#

如何检查另一个应用程序是否已最小化？例如在这样的循环中：

```
foreach(Process p in processes)
{
  // Does a process have a window?
  // If so, is it minimized, normal, or maximized
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-16T18:26:48.700

```
[DllImport("user32.dll")]
        [return: MarshalAs(UnmanagedType.Bool)]
        static extern bool GetWindowPlacement(IntPtr hWnd, ref WINDOWPLACEMENT lpwndpl);

    private struct WINDOWPLACEMENT {
        public int length;
        public int flags;
        public int showCmd;
        public System.Drawing.Point ptMinPosition;
        public System.Drawing.Point ptMaxPosition;
        public System.Drawing.Rectangle rcNormalPosition;
    }

if (p.MainWindowHandle != IntPtr.Zero) {
    if (p.MainWindowTitle.Contains("Notepad")) {
        WINDOWPLACEMENT placement = new WINDOWPLACEMENT();
        GetWindowPlacement(p.MainWindowHandle, ref placement);
        switch (placement.showCmd) {
           case 1:
             Console.WriteLine("Normal");
             break;
           case 2:
             Console.WriteLine("Minimized");
             break;
           case 3:
             Console.WriteLine("Maximized");
             break;
        }
    }                   
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-16T18:23:52.167

没有最小化的“应用程序”这样的东西。最好的选择是检查应用程序的主窗口是否是标志性的（最小化）。

[IsIconic](http://msdn.microsoft.com/en-us/library/ms633527(VS.85).aspx)可用于检查窗口的图标状态。如果窗口被最小化，它将返回 1。您可以使用[process.MainWindowHandle](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowhandle.aspx)调用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-11-21T02:54:34.670

如果窗口被最小化（至少在 Windows 窗体中），Location.X 和 Location.Y 的值都是 -32000

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T18:25:43.630

您应该使用本机[EnumWindows() 函数](http://www.pinvoke.net/default.aspx/user32/EnumWindows.html)，然后调用 IsIconic，而不是枚举进程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-27T11:26:17.667

您可以通过注入 user32 dll 使用 isZoomed 最大化和 isIconic 最小化

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool IsIconic(IntPtr hWnd);
[DllImport("user32.dll")]
static extern bool IsZoomed(IntPtr hWnd); 
```

# jquery - 基本（轻量级）灯箱插件

> ID：1003092
> 
> 赞同：1
> 
> 时间：2009-06-16T18:13:17.287
> 
> 标签：jquery, jquery-plugins

您好，我正在寻找一个非常基本（轻量级）的 jquery 灯箱解决方案，我可以在上面显示我的图片和 vimeo 视频（flash 播放器）。当然浏览器友好。我尝试了fancybox，它在不同的浏览器中运行不佳，并且在闪存媒体上也有一些错误。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T18:15:46.050

如果您需要闪光灯，您可能需要检查这里[的灯箱克隆矩阵](http://planetozh.com/projects/lightbox-clones/)。这表明[FancyZoom](http://orderedlist.com/articles/fancyzoom-meet-jquery)可能会成功。

这个用于 jQuery 的[灯箱](http://leandrovieira.com/projects/jquery/lightbox/)克隆很好，您可以根据需要对其进行改造。

# java - GIS/地图显示组件

> ID：1003097
> 
> 赞同：0
> 
> 时间：2009-06-16T18:14:13.837
> 
> 标签：java, eclipse, gis

对于快速演示者，我正在寻找可以显示地理数据的 SWT 或 Swing 组件。不幸的是，我与互联网断开连接，所以谷歌地图将无济于事。

总体思路是用“地图视图”组装一个小型 Eclipse RCP 应用程序，连接到自定义 Web 服务，提供地理数据（轨迹）并在视图上显示所有内容。我*快速*浏览了**uDig**，但目前无法确定 uDig 是否能够显示更新的曲目。

矢量地图（形状）就足够了，我不需要栅格化地图数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T21:04:29.407

我认为这个应该适合你，但它不是免费的

[http://www.esri.com/getting_started/developers/java-products-tools.html](http://www.esri.com/getting_started/developers/java-products-tools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-16T11:12:44.617

以 OpenMap 3 结束。

# actionscript-3 - 为什么键入的可选参数不能默认为 Null？

> ID：1003100
> 
> 赞同：6
> 
> 时间：2009-06-16T18:15:21.510
> 
> 标签：actionscript-3, null, arguments, optional-parameters

在 ActionScript 3 中，当您通过为其指定默认值来声明可选参数时，值**null**不能用于类型化参数。

```
function Action(Param:int=null){
    // 1184: Incompatible default value of type Null where int is expected.
}
function Action(Param:int=0){
    // No compiler errors
} 
```

任何解决方法，或可应用于所有数据类型的通用值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-16T18:26:59.963

您可以将您的 int 更改为 Number，然后可以将其设置为 NaN，这是一个特殊的数字，表示“不是数字”，这可以代表您的数字的 null 状态。

要检查某物是否为 NaN，您必须使用 isNaN() 函数而不是 not `val == NaN`，否则您将无法得到您期望的结果。

```
function Action(param:Number = NaN) : void {
    trace(param);
} 
```

对于所有其他对象，您可以将它们设置为 null，但在 Actionscript 中“原始”数字的处理方式不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T18:18:40.180

int 变量不能为空，这就是您收到该错误的原因，只有对象之类的引用类型可以为空

相反，您可以使用 NaN 作为特殊数字而不是 null。如果你想检查某个东西是否是 NaN，你必须使用 isNaN 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T17:58:41.783

您还可以在方法签名中包含一个标志，以避免将参数从 int 提升为 number：

```
function whatever(intProvided:Boolean = false, someInt:int = 0):void
{
    if(intProvided)
        doSomeStuff();
} 
```

# reporting-services - 对 ssrs 中的多个组进行交互式排序

> ID：1003106
> 
> 赞同：2
> 
> 时间：2009-06-16T18:16:15.020
> 
> 标签：reporting-services, reportingservices-2005

我有一个按地区分组的报告，然后是办公室位置。用户希望能够按日期值排序。我可以让它为最里面的组（办公室位置）工作。但是他们希望它对整个表进行排序。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T19:23:04.983

将排序添加到表格列。

1.  右键单击表格列 -> 属性
2.  点击交互式排序
3.  点击“添加交互式排序”
4.  对于排序表达式，输入“=Fields!COLUMN_NAME.Value”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-21T04:32:26.640

我通过使用放置在组之外的**隐藏**图表解决了这个问题。设置如下，对于保存交互式排序的列标题：

![在此处输入图像描述](../Images/17dd64ac862e32cc5419cb1391ac4a25.png)

对于图表：

![在此处输入图像描述](../Images/535a61fa8fe98b07b0742710c085cd79.png)

在类别组中，转到属性，然后从那里删除任何排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T07:57:33.387

解决此问题的另一种简单方法是添加两个 tablix。一个有分组，另一个没有。

然后，您可以添加一个“X 上的组”布尔参数，并根据用户的选择显示和隐藏每个 tablix。

两全其美，无需两个单独的报告。如果需要，用户可以轻松地对整个数据集进行排序和导出。

# javascript - 在 JS 中，如何在 DIV 中获取鼠标坐标？

> ID：1003107
> 
> 赞同：1
> 
> 时间：2009-06-16T18:16:15.643
> 
> 标签：javascript

在 JS 中，如何在 DIV 中获取鼠标坐标？如果我使用 event.pageX，它只有在 DIV 位于页面的左上角时才有效......否则，我必须知道 DIV 在页面中的位置并从中减去 event.pageX。当我动态生成 DIV 时，这很难做到，因为我必须跟踪每个 DIV 的位置。有任何想法吗？

* * *

如果我用绝对位置定义 DIV，似乎 event.layerX 和 event.layerY 可以在 FF 中找到。这是一个简短的例子：

[http://www.zangware.com/divpos.html](http://www.zangware.com/divpos.html)

但是在 IE 中，event.layerX/Y 在 DIV 中是未定义的。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T18:19:44.407

在我看来，你回答了自己的问题。我不知道从 div 中查找光标位置的任何快捷方式比从 div 左上角的 x 和 y 坐标中减去鼠标的 x 和 y 坐标更简单。只需确保在 div 更改时缓存它的位置，以避免每次鼠标光标移动时进行 DOM 查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T18:23:56.910

这不是太难。每个元素都有一个 offsetTop 和 offsetLeft 属性。您可以将其与当前鼠标位置一起使用来确定相对位置。

# php - Cakephp 在 Bluehost 上安装

> ID：1003128
> 
> 赞同：3
> 
> 时间：2009-06-16T18:21:20.533
> 
> 标签：php, apache, cakephp

如何设置 Cakephp 以在 Bluehost 上正常工作？我应该将我的 app、cake 和 vendor 文件夹以及 .htaccess 和 index.php 文件放在 /public_html/ 目录中吗？我按照这里的说明... [http://book.cakephp.org/view/37/Apache-and-mod_rewrite-and-htaccess](http://book.cakephp.org/view/37/Apache-and-mod_rewrite-and-htaccess)无济于事。当我在我的网站上输入名称时，我看到的只是一个空白页面！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T16:27:25.523

可以在此站点上找到我设置所有内容的方法... [http://www.ad7six.com/MiBlog/ProductionSetup](http://www.ad7six.com/MiBlog/ProductionSetup)

*   /cake_install
*   /cake_install/app
*   /cake_install/蛋糕
*   /cake_install/供应商
*   /public_html/.htaccess
*   /public_html/index.php

/public_html 将包含最初在 app/webroot 中找到的其他信息，但在上面的链接中已对此进行了解释

```
 if (!defined('ROOT')) {
    //define('ROOT', dirname(dirname(dirname(__FILE__))));
    define('ROOT',DS.'cake_install');
}

    if (!defined('APP_DIR')) {
    //define('APP_DIR', basename(dirname(dirname(__FILE__))));
    define('APP_DIR',DS.'app');
}

    if (!defined('CAKE_CORE_INCLUDE_PATH')) {
    //define('CAKE_CORE_INCLUDE_PATH', ROOT);
    define('CAKE_CORE_INCLUDE_PATH',DS.'cake_install');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-09T14:40:18.417

使用 bluehost，不要忘记您的应用程序也可以访问 webroot 之外的文件夹（即您的主文件夹） - 无需将框架放在对外界开放的文件夹中。

# python - python web框架大项目

> ID：1003131
> 
> 赞同：4
> 
> 时间：2009-06-16T18:21:43.733
> 
> 标签：python, frameworks, web-frameworks

我需要您的建议来选择 Python Web 框架来开发大型项目：

数据库（Postgresql）将至少有 500 个表，其中大多数具有复合主键、大量约束、索引和查询。大约 1,500 次观看开始。该项目属于金融领域。总是有新的要求来。

ORM 会有帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-16T18:26:09.903

Django 已被许多大型组织（华盛顿邮报等）使用，并且可以很容易地与 Postgresql 连接。我经常使用它并且没有遇到任何问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-16T18:28:34.827

是的。ORM 对于将 SQL 内容映射到对象至关重要。

你有三个选择。

1.  使用别人的 ORM

2.  自己滚。

3.  尝试执行低级 SQL 查询并从结果集中挑选出他们想要的字段。这实际上是一种 ORM，其映射分布在整个应用程序中。它执行起来可能很快并且看起来很容易开发，但它是维护的噩梦。

如果您首先设计表格，那么任何 ORM 都会很痛苦。例如，“复合主键”通常是一个坏主意，而使用 ORM 几乎总是一个坏主意。您需要有一个代理主键。然后，您可以拥有所有具有所需索引的复合键。他们只是不会是“主要的”。

如果您首先设计对象，然后制定将实现对象的表，那么 ORM 将是愉快的、简单的并且运行速度也很快。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-16T19:12:15.647

由于您的大多数表都有复合主键，因此您需要一个支持该功能的 ORM。Django 的默认 ORM 不支持复合主键。SQLAlchemy 确实有这种支持（[http://www.sqlalchemy.org/features.html](http://www.sqlalchemy.org/features.html)）。

TurboGears 框架使用 SQLAlchemy 作为其默认 ORM。Pylons 也允许您使用 SQLAlchemy。

还有一些方法可以让 Django 使用 SQLAlchemy，尽管我自己没有尝试过。我更喜欢自己使用 Django，但考虑到您的需要，我会使用 Pylons 或 TurboGears，而不是在系统中硬塞不同的 ORM。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-17T05:19:23.033

对于像 500 个表和 1500 个视图这样可怕的数据层复杂性，与大多数答案不同，我个人更喜欢坚持使用 SQL（PostgreSQL 提供了一个非常出色的实现，特别是在新的 8.4 版本中，如果你真的应该游说的话有机会）；我会[勉强]接受的唯一 ORM 是 SQLAlchemy（我不介意的少数 ORB 之一——但主要的附加价值是对不同 DBMS 的可移植性：如果你只致力于一个，并且在一个项目中这种数据库的复杂性你最好是这样，那么我个人的观点是*任何*ORM 都只是开销，因为数据访问层开发人员需要对特定的 DBMS 非常熟悉才能爬到可接受的性能）。

选择“原始 psycopg2”或 SQLAlchemy 作为我的数据访问层的技术，这将排除 Django（根据我的经验，它只适用于它自己的 ORM——但这不适合这种数据库复杂性的项目，IMNSHO ）。我个人会选择 Werkzeug，因为它是最适合需要大量灵活性和强大功能的高度复杂项目的框架——尽管如果团队只是不这样做，那么在它之上的 Pylons 和 Turbogears 2 作为后备可能是可以接受的不具备使用 Werkzeug 等灵活框架制作真正优美的音乐所需的网络应用程序经验和技能。

最后但并非最不重要的一点是，我强烈建议 Dojo 用于客户端的表示层 - 一个丰富且结构强大的 Javascript 框架，为“本地数据”、主机访问等提供出色设计的功能，并针对每个方面进行了优化。的几个浏览器（以及 Gears 等插件）可以提供，以及高级 UI 功能，似乎最有可能减轻后端团队的沉重开发负担（事实上，我强烈建议考虑提供一个本质上服务器端的 RESTful 接口，并将所有演示工作委托给客户端的 Dojo - 请参阅[此站点](http://www.thinserverarchitecture.com/)更多，除了我会考虑 JSON 而不是 XML 作为首选的交换格式）。但是，我很容易承认，我对 UI 方面的了解远远少于对后端、业务逻辑和整体架构的了解，所以请看最后一段，看看它的价值！-)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-16T18:55:24.300

根据您想要做的事情，您实际上有一些可能的框架：

[Django] 大、强（达到 python 框架的极限），并且在比赛中更老。被世界各地的一些“大”站点（[Django 站点]）使用。对于几乎所有内容以及不推荐使用的编码方法，仍然有点矫枉过正。

[Turbogears] 是基于 Pylons 的最新框架。对它了解不多，但是从尝试过的朋友那里得到了很多很好的反馈。

[Pylons]（Turbogears2 基于）。经常在“Python 的 PHP”上看到，它允许从头开始非常快速的开发。即使它看起来不适合大型项目，但它通常是更快、更容易的方法。

最后一个选项是 [Zope]（有或没有 Plone），但是 Plone 速度很慢，而且 Zope 学习曲线太长（甚至没有用 SQL 连接器替换 ZODB）所以如果你不知道框架，只是忘记它。

是的，对于这种规模的项目，ORM 似乎是必需的。对于 Django，您必须处理迁移到他们的数据库模型（不知道在 Django 中插入 SQLAlchemy 有多难）。对于 turbogears 和 Pylons，最合适的解决方案是 [SQLAlchemy]，它实际上是 python 最完整（和上升）的 ORM。对于zope ...好吧，没关系

最后但并非最不重要的一点是，我不确定您的项目是否有良好的开端。任何 python 框架上的 500 个表都会吓死我。像java（hibernate+spring+tapestry左右）这样无聊但死板的语言似乎真的更合适。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-02-11T18:29:58.047

对于您所描述的内容，我绝对会推荐带有 SQLAlchemy 的 Repoze.bfg。我现在在 Django、TurboGears 1、TurboGears 2、Pylons 中完成了项目，并涉足了纯 Zope3。BFG 无疑是最适合以您一开始没有预料到的方式增长的项目的框架，但比 Grok 或 Zope 3 更轻量级和精简。此外，这些文档是所有文档中最好的技术文档其中，不是*最简单的*，但是那些回答你将遇到的难题的人是最好的。我目前正在做类似的事情，我们正在将一堆遗留数据库大修到一个新的 Web 可交付应用程序中，我们正在使用 BFG、一些 Pylons、Zope 3 适配器、用于模板的 Genshi、SQLAlchemy 和用于前端的 Dojo。我们对 BFG 非常满意，而且效果很好。BFG 类作为实际上是 zope 多适配器的视图，对于能够仅覆盖某些域资源的非常特定的位是绝对完美的。并且在任何地方都完全没有魔法全局变量，这使得测试和打包成为我们在任何框架中所拥有的最简单的方法。

嗯！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T18:36:03.070

> 总是有新的要求来。

所以你真正需要的是一个能让你快速适应不断变化的规范的框架。

从个人经验来看，我只能讨论 django，它很棒，因为它可以让你快速启动和运行。

如果你坚持它的 ORM，你将很容易让你的模型充实并以有用的方式连接起来。您需要熟悉数据库迁移工具，因为 Django 没有内置 工具[。dmigrations](http://code.google.com/p/dmigrations/)似乎是这方面的领先工具。

ORM 的另一个选择是[SQLAlchemy](http://www.sqlalchemy.org/)，它看起来更成熟一些。

# php - 使用无脚本重新填充表单并显示错误的最佳方法是什么？

> ID：1003132
> 
> 赞同：1
> 
> 时间：2009-06-16T18:21:48.270
> 
> 标签：php, javascript, noscript

我正在构建一个应用程序，它使用 ajax 调用来进行表单验证和其他一些验证，问题是当这些验证错误出现在根本没有 css 的新页面上并且在没有 javascripts 的情况下完全重置表单时，我不喜欢它。

我说的是十几个表格，所以用户一遍又一遍地浏览表格会很烦人。

我已经阅读了有关此主题的一些答案，但是对于这种情况，是否有一种特定的方法和最佳实践（更多的是表单验证）？

抱歉，如果已经有答案。

编辑：

所有验证都是在服务器端完成的，目前错误是在 ajax 的帮助下显示的。如果在处理表单时发生错误，我想要一种方便的方法来重新填充表单并显示错误而无需 javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T18:25:48.327

我不确定你的问题是否暗示你没有在服务器上验证 - 这将被认为是一个巨大的安全漏洞，因为很明显可以通过简单地禁用 Javascript 来绕过表单。您每次都必须在服务器中进行验证，而客户端验证很简单。

此外，当您使用一个体面的框架时，让表单在重新加载页面时自行重置的“问题”变得没有意义——在 Python 中，Django 会在出现错误时自动重新填充表单。在 PHP 中，CakePHP 和 CodeIgniter 也是如此，我相信大多数优秀的框架都会这样做，因为它属于框架应该抽象出来的“常见任务”类别。

每当我不使用框架时，我都会编写自己的小表单类来满足需要。

**编辑**：

我不知道您可以插入任何内容来重新填充表单。你最好的选择是为它编写你自己的小班，这应该不会超过 1 小时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-14T20:55:19.657

我通常做的是将所有错误字符串存储在会话变量中的数组中（我使用 PHP）。如果服务器端出现错误，请将用户重定向回表单页面，检查会话变量，并根据需要显示错误。确保在显示后取消设置会话变量以释放内存。重新填充表单也是如此——会话变量中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T18:25:02.137

表单验证应该先写在服务器上，然后再写在客户端上。无论如何，您都应该在服务器上进行验证。不要依赖 Ajax 来完成像表单验证这样简单且对站点操作至关重要的事情。使用不显眼的脚本，您可以阻止默认表单提交，然后使用 Ajax 处理表单。否则，允许提交通过并使用服务器生成的验证页面进行响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T18:27:59.477

在服务器端执行验证并重新填充表单。

通过 AJAX 验证*很好*，但不能强制执行。因此，无论 AJAX 是否发生，都执行验证会更有效。我建议第二条路线可以处理验证并为那些拥有 javascript 的人传回 JSON 中的一系列错误。但是对于那些没有 javascript 的人来说，验证工作的唯一方法是通过服务器端。

不幸的是，您在这方面并没有真正的选择。任何具有firebug的中途程序员或黑客都可以编辑你的javascript，分离钩子，并绕过你试图在他身边做的一切：偏执并在服务器端强制验证。

# open-source - 为开源贡献内部工具值得付出努力吗？

> ID：1003134
> 
> 赞同：22
> 
> 时间：2009-06-16T18:22:05.057
> 
> 标签：open-source, powerbuilder

我知道这是一个普遍的问题，但我想听听其他人对我们案件的看法：

我在一家小公司工作。我们的主要开发工具是 PowerBuilder，这是一个非常有限的 IDE，社区正在缩小。我们创建了一些工具，我们在内部使用这些工具来解决某些需求。它们既没有经过适当的设计，也没有经过适当的测试，也没有达到生产质量。OTOH，它们确实为我们节省了很多时间，也可能帮助其他人。我确信其他公司也有相同类型的工具，并且想知道与他人共享它们的做法有多普遍。照我看来 -

优点：

*   善业
*   更多关注我们的网站
*   也许从其他人那里得到修复和改进

缺点：

*   如果不投资更多的开发，这些工具可能会让我们看起来很糟糕
*   代码的发布需要一些努力
*   有些工具可能过于专业，无法满足我们的需求
*   考虑到社区的萎缩，整个努力可能会被忽视

您或您的公司是否曾经贡献过此类工具，或使用过其他人开发的此类工具？值得付出努力吗？

**编辑：**

对于那些想知道的人，我想到的工具包括 -

*   通过列出已签出给当前用户或其他人的对象、备份已签出的对象和重建 PBG，使使用 SourceSafe 变得更容易的工具。
*   一种在运行时识别 PB 控件的工具，例如 Spy++（需要目标应用程序中的一些基础设施）。
*   SQLite 的 PBNI 包装器（进程内访问，无 ODBC）。
*   SQL 客户端、文本测量工具等。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-17T03:07:50.077

“开源”最初意味着您发布了一个工具，并且您提供了*源代码*。由于某些项目的预期，并且在某些情况下通过许可证**要求**重新提交对源代码的更改以供共享，“开源”现在经常将*协作开发*的概念添加到组合中。我做了（或试图做）后者；请允许我分享。

*与可用源代码*相关的工作量与*协作开发*开源代码之间存在巨大差异。

领导力：你需要告诉人们变革的对象、内容、地点、时间、原因和方式。很有可能，你需要用外交手段戳戳你的志愿者。您可能需要定义项目的愿景和优先级目标，然后在有人试图以另一种方式采取行动时执行它们。而且，除非您只希望人们通过偶然发现您的工具，否则您将不得不做广告，在吸引注意力和花哨之间划出一条非常细的线（在互联网上甚至更细）。如果项目要实现[精英](http://en.wikipedia.org/wiki/Meritocracy#Open_Source)管理的概念，正如许多开源支持者所说的那样，那么就必须有人来评判人们的成就并适当地分配权利和责任。

工作流程：我还没有通过任何想象力进行详尽的搜索，但是我还没有看到一个协作开发平台可以完成我需要的所有事情。开源协作开发的部分意义在于代码审查所涉及的数量将涵盖代码提交质量方面的任何潜在问题；我还没有看到一个集成到协作开发平台中的免费工具来帮助干净地管理它（例如计算代码审查；在*x*次审查后自动提升）。我们不得不处理这个问题，将手动方法破解到现有工具中。可能在某些时候您必须定义一个版本并创建一个构建。然后是诸如文档之类的繁重任务。（曾经尝试免费发布新版本的*东西*发行说明？狂怒！！*咧嘴笑*）

[PB 特有的问题：PowerBuilder 是一个商业工具](http://www.isug.com/common/GreenBenefits.html)，虽然有*便宜*的版本，但没有*免费的**版本。添加到 PB11 中的 DRM 可能减少或消除了开发人员可能会在他们的办公室 PB 家中复制的盗版行为，而 PB11 及以后的版本具有双重许可政策，允许开发人员合法地将副本带回家（在获得许可和合作的情况下）的原始许可证所有者创建第二个许可证），我没有看到很多这样做。（没有科学研究，这就是我所看到的。）这减少了很多潜在的合作，甚至来自爱好者。PowerBuilder 版本之间的代码兼容性问题，以及很少有人拥有每个版本的事实，将再次限制您的潜在贡献者列表。*

 *不要误会我的意思。我希望在 PowerBuilder 社区中看到更多的*协作开发*开源。我很想知道如何自己解决这些问题，并且我正在努力研究是否可以制作一个新模型。（恕我直言，我第一次追随流行模式的努力失败了。）

是否有理由对将 ZIP 文件发送到网络并忘记它感到难过？我不知道。与 SourceForge 项目相比，在 4 年前的 ZIP 文件中是否有更多的自豪或尴尬，后者的最后一次贡献是 3 1/2 年前的帖子“每个人都在哪里？” [Sybase CodeXchange](http://www.sybase.com/developer/codexchange)从*协作开发*平台转移到*源可用*平台是有原因的：几乎没有人使用*协作开发*功能。如果您*获取可用*的开源代码，那么您将拥有很多公司。

顺便说一句，CodeXchange 可能会解决您对 PowerBuilder 社区可见性的担忧，尽管您会失去网站流量。[PowerBuilder Web Ring](http://www.webring.com/hub?ring=pbring)是另一种效果明显较差的方法，可以帮助您保持网站流量的可见性，但它需要在您网站的目标页面上有一个导航栏。CodeXchange 也可能是一种解决您对代码质量和您必须分享的内容的狭隘性的担忧的方法。*咧嘴笑*

你该怎么办？不要低估*协作开发*共享所付出的努力，但不要让它阻止您*获取可用资源*共享。

祝你好运，

特里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T11:56:43.887

你可能会忽略你的一个缺点：任何对这种工具有足够兴趣来评估你的产品的人都不太可能在你的反馈表上写*X 公司；*相反，如果他们发现您发布的内容存在缺陷，您可能会收到有用的错误报告甚至补丁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T18:26:02.697

如果你能让你的公司为社区做出贡献而买单，那么我会去做。付出一点努力总是值得的，这绝对是将您的一些工具公之于众并得到社区改进的好方法。

就缺点而言，我不会太担心批评，它只能帮助你们改进下一个交付的产品，人们会尊重你从错误中吸取教训，没有人是完美的。

即使您的努力没有被您不断缩小的社区所注意到，未来的员工和客户也会看到您在公司之外做出贡献，并可能有助于提高您在他们中的声誉。

我认为这方面的优点远远大于缺点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T18:45:25.923

简而言之：去吧。我怀疑没有什么可失去的，但可以得到很多。

*优点：*

**好人缘*

拥有从来都不是一件坏事。

**更多关注我们的网站*

如果您的代码*真的很*糟糕，可能是一个骗局:)

**也许从其他人那里得到修复和改进*

这可能是你从开源代码中得到的最好的东西。一切都是为了互相分享和帮助，你可以使用别人的代码，他们可以使用你的代码，每个人都从交易中获益。

*缺点：*

**如果不投资更多的开发，这些工具可能会让我们看起来很糟糕*

我会搜索以删除狡猾/粗鲁/愚蠢的评论，整理格式等。

**代码的发布需要一些努力*

几乎不需要任何努力 - 在 Sourceforge 中设置一个帐户，在那里创建一个[SVN 存储库](https://sourceforge.net/apps/trac/sourceforge/wiki/Subversion)并导入您的代码。然后创建一个二进制包（一个 zip 文件就可以了）并使用网站[发布它。](https://sourceforge.net/apps/trac/sourceforge/wiki/Release%20files%20for%20download)如果您停下来阅读所有文档，可能需要一个小时。

**有些工具可能过于专业，无法满足我们的需求*

您可以将全部设置为一个组 - 例如 PowerBuilder 工具，然后看到真正专业工具的人不会浪费时间来获取它们，他们仍然会拥有“更容易使用”的工具。

**考虑到社区的萎缩，整个努力可能会被忽视*

可能，但是真的没有理由不发布代码。如果您不这样做，那么当您/如果您更改开发工具时，每个人都可能会完全迷失它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T20:32:57.393

发布您的资源是获得反馈的好方法。如果你因为它看起来很糟糕，那没关系。只要愿意解决问题。如果您在改进方面需要帮助，我想不出比寻求帮助更好的方法了。

顺便说一句，许多开源项目可以归功于以前萎缩的社区的增长。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T20:53:07.307

我认为您在确定利弊方面做得很好。利大于弊可能是真的。如果没有人喜欢这些实用程序并且对它们不做任何事情或对它们不做任何事情，那么您实际上并没有失去任何东西；糟糕的代码不应该吓到有经验的开发人员（大多数有经验的开发人员，尤其是 PB 开发人员，已经看到了他们在遗留代码中的份额）。如果一个人受益，那么你会得到因果报应，是吗？

如果您继续将您的工具提交给开源社区，请按照您在此处的操作，并事先承认这些工具没有经过完善。这可能会阻止一些人甚至查看它们，但是，如果它们至少是功能性的并且可以轻松修改，那么它们仍然代表任何潜在受益者的先机。作为一个 PB 用户，我很想知道更多关于可以让我们提高生产力的免费工具。

您是否研究过 Sybase CodeExchange？他们在那里有一些开源的 PB 东西，包括 PowerBuilder Foundation Class 框架。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-18T10:52:34.643

我刚刚看到你对[我的问题的回答](https://stackoverflow.com/questions/1011536/spy-for-powerbuilder-applications)——令人惊讶的是你已经开发了类似的东西。:-)

关于您的问题：我工作的公司在网站上有一个特定部分，其中发布了我们内部使用的工具和/或客户经常要求的简单解决方案（或代码片段）。这些产品的许可证也非常自由，我认为它有资格作为开源。

在您的特定情况下，我对您谈到的类似 Spy++ 的应用程序非常感兴趣，因为我自己正在寻找（和/或尝试开发）类似的东西。

我的目标是在目标应用程序中不需要任何基础设施的东西，但到目前为止，我很乐意使用任何有效的东西，即使它需要修改应用程序。我只是对 PowerBuilder API 还不够熟悉，无法在不修改目标应用程序的情况下判断这是否可行。

正如我所提到的，我已经为普通的 Windows 应用程序以及托管代码应用程序（需要与 VM 交互以查询对象树的状态）开发了类似的 Spy-like 应用程序，所以我希望我能够找到不需要任何目标基础架构的解决方案。

你有源代码吗？它不需要是可编译的，我很乐意看看你原则上是如何做到的，这样我就可以（希望）从中得到一些东西来解决我的特定问题。如果您还没有上传源代码，也许您可​​以提供一些我可以用来私下与您联系的电子邮件地址？我试图在你的个人资料上寻找一些东西，但到目前为止 - 没有运气。:-)*

# javascript - 在 iphone safari 中的 javascript 中获取视口位置

> ID：1003138
> 
> 赞同：2
> 
> 时间：2009-06-16T18:22:18.677
> 
> 标签：javascript, iphone, css, safari, webkit

我试图阻止元素在 iphone 上的 safari 中滚动。我已经尝试过这里提到的解决方案： [iPhone Safari: Scroll a list inside a html container](https://stackoverflow.com/questions/777621/iphone-safari-scroll-a-list-inside-a-html-container) 但我的列表很大，而且运行不顺畅。

我想到的是检测 onscroll 事件并重新定位元素，因此它位于视口的边界内。

但我找不到检测视口坐标的方法。有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-26T12:45:19.377

```
document.addEventListener(
    'touchmove',
    function touchMove(event) {
        event.preventDefault()
    },
    false
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-06-02T19:15:12.807

看看[iScroll](http://cubiq.org/iscroll)。如果 is 不符合您的要求，您可以使用实现作为参考。我认为这样做的诀窍是既要做到这一点`event.preventDefault()`， `event.stopPropagation()`又要防止移动 safari 响应触摸事件。

> iScroll 的诞生是因为移动 webkit（在 iPhone、iPod、Android 和 Pre 上）不提供在固定宽度/高度元素内滚动内容的本机方式。这种不幸的情况阻止了任何网络应用程序有一个位置：绝对页眉和/或页脚以及内容的滚动中心区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-04-06T10:28:48.997

```
var viewport_x = window.pageXOffset;
var viewport_y = window.pageYOffset; 
```

# .net - 需要的建议：使用 .NET 抓取网页

> ID：1003141
> 
> 赞同：2
> 
> 时间：2009-06-16T18:22:36.040
> 
> 标签：.net, screen-scraping

我需要一个关于我即将开始的项目的建议。

简而言之，我的应用程序必须访问某个足球网站，下载 HTML 并提取必要的数据。

这是我到目前为止所做的：

:: **1)**访问某个足球网站（例如[http://www.livescore.com/default.dll?page=england](http://www.livescore.com/default.dll?page=england)）并使用 WebClient 下载 HTML。

:: **2)**使用 SgmlReader 将 HTML 转换为 XML

:: **3)**使用 XmlDocument 检索我正在寻找的数据。通常这包括：

::::::: **3.1)**使用 GetElementsByTagName() 检索节点（例如 GetElementsByTagName("tr")）

::::::: **3.2)**循环遍历 GetElementsByTagName() 方法返回的节点列表

**有没有更好的方法来做我想做的事情？**

我在考虑 LINQ to XML。您认为这会提高性能吗？

***任何建议或意见将不胜感激！***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T18:27:44.377

只需使用 HTML 敏捷包！[http://www.codeplex.com/htmlagilitypack](http://www.codeplex.com/htmlagilitypack)

通过这种方式，您可以使用 XPath 查询文档以获取您需要的节点。您甚至可以使用 Firefox 的插件 Firebug 来帮助您构建 XPath 查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T18:32:08.957

使用像[这些](http://mozenda.com/)为您完成大部分工作的人这样的服务。您还可以使用[Dapper](http://www.dapper.net/open/)等免费服务。我相信你可以导出不同格式的数据，虽然我不知道你是否可以实时抓取数据，你可能会有延迟。

如果您不想使用 3rd 方解决方案在内部对所有内容进行编程，可以节省您的时间和金钱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T18:33:41.153

将数据转换为 XML 后，您可以使用[XSLT](http://www.w3schools.com/xsl/)将其转换为一组更简单且更适合您的目的的 XML。从那里您可以使用 LINQ to XML 从 XML 中获取您需要的数据。这种方法的好处是它将网站与数据收集分离，因此当网站更改其格式时，您可以简单地更改 XSLT 以匹配，而无需触及任何其他内容。

# iphone - 如何从 m4a 文件中查询章节元数据？

> ID：1003148
> 
> 赞同：5
> 
> 时间：2009-06-16T18:24:22.760
> 
> 标签：iphone, podcast, m4a

我需要编写一些代码来查询 m4a 文件并提取章节信息。包含：

*   章节名称
*   章节开始时间
*   章节艺术品

我做了一些快速搜索，似乎这被 Apple 视为专有信息？我发现了一些讨论，但大多数是从 2005 年开始的。这里也有一些类似的问题，但更多的是用于创建带有章节的 m4a 文件，而不是查询。

这只是我必须 DIY 的东西，因为没有一个不错的苹果 API 供我使用吗？还是我错过了一些明显的东西？

此外，理想情况下，我需要最终使用的任何技术在 iPhone 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-24T17:30:27.863

元数据标签系统是 Apple 专有的。要使用标签，您必须（*叹气*）对其进行逆向工程或使用已经完成此操作的库。

我找到了以下链接，但老实说，您似乎必须退出十六进制编辑器。

[二进制格式信息（通用标签的基本规范）](http://osdir.com/ml/ipod.ephpod/2003-05/msg00046.html)

[用于处理 M4A 文件的 Perl 库。](http://kobesearch.cpan.org/htdocs/Audio-M4P/Audio/M4P/QuickTime.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-22T19:58:40.287

事实证明，这比“答案”中讨论的要简单得多。不确定这是否适用于 iPhone，但我只是在命令行应用程序中对其进行了测试：

```
QTMovie* movie = [QTMovie movieWithFile:@"filename.m4a" error:nil];

NSInteger numChapters = [movie chapterCount];
NSLog(@"Number of Chapters: %d", numChapters);

NSArray* chapterArray = [movie chapters];
for ( NSDictionary* chapDict in chapterArray )
{
    NSLog(@"%@", [chapDict objectForKey:@"QTMovieChapterName"] );
} 
```

非常简单。哦！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-19T15:58:02.320

这个库应该可以解决您的需求，但我认为没有越狱就无法在 iphone 上运行。[http://wmptagext.sourceforge.net/](http://wmptagext.sourceforge.net/)

哎呀，如果您需要它在 iphone 上工作，可能有一个苹果 api 来获取此信息。/me 听起来您需要使用 ipodlibrary 库....

[http://developer.apple.com/iphone/library/documentation/Audio/Conceptual/iPodLibraryAccess_Guide/UsingTheiPodLibrary/UsingTheiPodLibrary.html#//apple_ref/doc/uid/TP40008765-CH101-SW1](http://developer.apple.com/iphone/library/documentation/Audio/Conceptual/iPodLibraryAccess_Guide/UsingTheiPodLibrary/UsingTheiPodLibrary.html#//apple_ref/doc/uid/TP40008765-CH101-SW1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-19T16:08:29.543

如果有问题的文件存在于 iPod 库中，也许您可​​以通过 MPMediaLibrary 查询界面（3.0 以上）获取您的信息。

# algorithm - 标准分数的时间框架

> ID：1003162
> 
> 赞同：0
> 
> 时间：2009-06-16T18:26:13.083
> 
> 标签：algorithm, tags, information-retrieval

为了寻找热门话题，我将标准分数与移动平均线结合使用：

```
z-score = ([current trend] - [average historic trends]) / [standard deviation of historic trends] 
```

[（非常感谢你，尼克斯）](https://stackoverflow.com/questions/787496/what-is-the-best-way-to-compute-trending-topics-or-tags)

到目前为止，我这样做如下：

无论什么时候，对于历史趋势，我只是 24 小时返回。假设我们现在有 1 月 12 日下午 3:45：

current_trend = 点击 [1 月 11 日 3:45 - 1 月 12 日 3:45]

历史趋势 = 点击 [1 月 10 日 3:45 - 1 月 11 日 3:45] + 点击 [1 月 9 日 3:45 - 1 月 10 日 3:45] + 点击 [1 月 8 日 3:45 - 1 月 9 日 3: 45] + ...

但这真的足够吗？如果我总是在 00:00 点开始不是更好吗？例如，对于相同的数据（下午 3 点 45 分）以这种方式：

current_trend = 点击 [Jan 11, 0:00 - Jan 12, 0:00]

历史趋势 = 点击 [1 月 10 日 0:00 - 1 月 11 日 0:00] + 点击 [1 月 9 日 0:00 - 1 月 10 日 0:00] + 点击 [1 月 9 日 0:00 - 1 月 9 日 0: 0] + ...

我相信结果会有所不同。但是哪种方法会给您带来更好的结果？

我希望你已经理解我的问题，你可以帮助我。：） 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T20:10:18.953

我认为您当前的实施可能会遇到的问题是 23 小时前的热门话题现在正在影响您的排名。我在您提出的新实施方案中看到的问题是，您在午夜擦掉了石板，所以昨晚很热的话题在第二天早上似乎不会很热（但它们应该如此）。

我建议你考虑实现一个 Digg 风格的算法，其中主题的热度随着年龄的增长而衰减。您可以通过计算过去 24 小时内每个时间段的点击次数/小时数，然后将每个时间段分数除以该时间段发生的小时数来做到这一点。将 24 个时段相加得到分数。

热度 = (score24 / 24) + (score23 / 23) + ... + (score2 / 2) + score1

其中 score24 是主题在 24 小时前发生的一小时内获得的“点击”数（可能不是准确的点击数，而是该小时的标准化分数）。

这样，24 小时前的热门话题仍会计入您的算法中，但不会像一小时前的热门话题那么重。

# perl - 为什么我的 Perl 源代码显示在浏览器中？

> ID：1003163
> 
> 赞同：2
> 
> 时间：2009-06-16T18:26:23.520
> 
> 标签：perl, cgi, webserver

当我通过 URL 访问我的 Perl 脚本时，这是什么意思，但是当我这样做时，源代码会打印在屏幕上？

这是否意味着 Perl 没有正确设置？我在 Fedora 上使用 Apache。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-16T18:28:32.737

这意味着您的网络服务器未设置为在该 url 处执行脚本。你用的是什么服务器？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-16T18:43:10.903

这也可能意味着您将 Perl 脚本放在错误的文件夹中。cgi-bin 文件夹仍然被广泛用作应该存储和运行 CGI 脚本的文件夹。其他文件夹可能只是打开文件并将其作为文本读取，类似于 HTML 文档，而不是将文档作为代码运行。但这也可能意味着服务器没有正确设置以运行 Perl 脚本或其他类型的服务器端脚本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T21:43:26.800

这意味着您可能没有按照服务器的预期进行操作。通常，服务器期望 CGI 目录中的每个文件都是可执行文件，或者具有特定扩展名的文件是可执行的，并且它可以将任何其他文件作为其内容。

找出您的服务器希望您的 CGI 程序使用哪个文件扩展名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T20:13:21.993

[Ovid 的 CGI 课程](http://jdporter.perlmonk.org/cgi_course/)可能会对您有所帮助（当然，如果您使用 CGI）

# php - 为什么不全面使用 MySQL 的 TIMESTAMP？

> ID：1003171
> 
> 赞同：2
> 
> 时间：2009-06-16T18:28:06.623
> 
> 标签：php, mysql, timezone

如果您需要您的 Web 应用程序在每个用户的基础上在时区之间进行转换，为什么不对所有日期/时间字段全面使用 TIMESTAMP？考虑到 TIMESTAMP 值存储在 UTC 中，并在检索时转换为为连接设置的时区。

我已经在 IRC 上问过这个问题，阅读了 MySQL 文档，广泛搜索了 Google，并询问了我的同事，但我还没有找到不使用 TIMESTAMP 的令人信服的理由。

注意：我了解 TIMESTAMP 的范围有限，为 1970 - 2038；就我而言，这不会成为问题。另外，我将 PHP 与 MySQL 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T18:31:41.173

我想你的答案在这里：

> 我了解 TIMESTAMP 的范围有限，为 1970 - 2038；*就我而言，这不会成为问题。*

我会小心地对项目的寿命做出假设，***尤其是在涉及数据库模式时***。数据库倾向于在使用它们的应用程序消失后很长一段时间内保持不变并继续使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T18:37:20.663

DATETIME 用于您在数据中使用的任意日期和时间。

TIMESTAMP 适用于您希望时间自动更新的时间。如果您想知道插入/更新行的时间，请使用 TIMESTAMP。

另外，请记住，TIMESTAMP 仅以UTC 格式*存储*——在作为查询的一部分传回之前，它会转换为服务器的本地时区。

在您的情况下，您最好使用 DATETIME。如果您担心 UTC，那很好 - 只需使用 UTC 创建日期，而不是使用本地时间。使用[UTC_TIMESTAMP](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_utc-timestamp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-27T03:47:23.650

Randalpho 的回答在许多事实上都是错误的！

时间戳不需要在创建或更新时自动更新。

此外，时间戳会转换为客户端的本地时间，而不是服务器的本地时间。

只需查看 MySQL 文档的日期时间。

# sql - TSQL：返回最早日期的行

> ID：1003174
> 
> 赞同：0
> 
> 时间：2009-06-16T18:28:44.360
> 
> 标签：sql, tsql

给定 2 个名为“table1”和“table1_hist”的表，它们的结构类似于：

```
TABLE1
id  status  date_this_status
1   open    2008-12-12
2   closed  2009-01-01
3   pending 2009-05-05
4   pending 2009-05-06
5   open    2009-06-01

TABLE1_hist
id  status  date_this_status
2   open    2008-12-24
2   pending 2008-12-26
3   open    2009-04-24
4   open    2009-05-04 
```

由于 table1 是当前状态，而 table1_hist 是 table1 的历史表，我如何返回具有最早日期的每个 id 的行。换句话说，对于每个 id，我需要知道它的最早状态和日期。

```
EXAMPLE:

For id 1 earliest status and date is open and 2008-12-12.
For id 2 earliest status and date is open and 2008-12-24. 
```

我尝试过使用 MIN(datetime)、联合、动态 SQL 等。我今天刚刚到达 tsql writers block，我被卡住了。

**编辑添加：** 呃。这是针对 SQL2000 数据库的，因此 Alex Martelli 的回答不起作用。ROW_NUMBER 直到 SQL2005 才引入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-16T18:37:48.637

SQL Server 2005 及更高版本支持 SQL 标准的一个有趣（相对较新）方面，“排名/窗口函数”，允许：

```
WITH AllRows AS (
  SELECT id, status, date_this_status,
    ROW_NUMBER() OVER(PARTITION BY id ORDER BY date_this_status ASC) AS row,
  FROM (SELECT * FROM Table1 UNION SELECT * FROM Table1_hist) Both_tables
)
SELECT id, status, date_this_status
FROM AllRows
WHERE row = 1
ORDER BY id; 
```

我还使用了不错的（同样是“新的”）`WITH`语法来避免将子查询嵌套在 main 中`SELECT`。

[本文](http://sqlservercode.blogspot.com/2006/03/ranking-in-sql-server-2000.html)展示了如何破解 SQL Server 2000 中的等价物`ROW_NUMBER`（以及`RANK`和`DENSE_RANK`，另外两个“新”排名/窗口函数）——但这并不一定很漂亮，也不一定性能特别好，唉。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T20:58:43.987

以下代码示例是完全自给自足的，只需将其复制并粘贴到管理工作室查询中并按 F5 =)

```
DECLARE @TABLE1 TABLE
        (
        id                  INT,
        status              VARCHAR(50),
        date_this_status    DATETIME
        )

DECLARE @TABLE1_hist TABLE
        (
        id                  INT,
        status              VARCHAR(50),
        date_this_status    DATETIME
        )

--TABLE1
INSERT  @TABLE1
SELECT  1,  'open',     '2008-12-12'    UNION ALL
SELECT  2,  'closed',   '2009-01-01'    UNION ALL
SELECT  3,  'pending',  '2009-05-05'    UNION ALL
SELECT  4,  'pending',  '2009-05-06'    UNION ALL
SELECT  5,  'open',     '2009-06-01'

--TABLE1_hist
INSERT  @TABLE1_hist
SELECT  2,  'open',     '2008-12-24'    UNION ALL
SELECT  2,  'pending',  '2008-12-26'    UNION ALL
SELECT  3,  'open',     '2009-04-24'    UNION ALL
SELECT  4,  'open',     '2009-05-04'

SELECT      x.id,
            ISNULL(y.[status], x.[status])                  AS [status],
            ISNULL(y.date_this_status, x.date_this_status)  AS date_this_status
FROM        @TABLE1 x
LEFT JOIN   (
            SELECT      a.*
            FROM        @TABLE1_hist a
            INNER JOIN  (
                        SELECT      id,
                                    MIN(date_this_status) AS date_this_status
                        FROM        @TABLE1_hist
                        GROUP BY    id
                        ) b
                    ON  a.id = b.id
                    AND a.date_this_status = b.date_this_status
            ) y
        ON  x.id = y.id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T19:55:18.407

```
SELECT  id,
        status,
        date_this_status
FROM    ( SELECT    *
          FROM      Table1
          UNION
          SELECT    *
          from      TABLE1_hist
        ) a
WHERE   date_this_status = ( SELECT MIN(date_this_status)
                             FROM   ( SELECT    *
                                      FROM      Table1
                                      UNION
                                      SELECT    *
                                      from      TABLE1_hist
                                    ) t
                             WHERE  id = a.id
                           ) 
```

这有点难看，但似乎可以在 MS SQL Server 2005 中使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T18:33:21.403

您可以通过独占自加入来做到这一点。加入历史表，然后再加入所有较早的历史条目。在 where 语句中，您指定不允许有任何更早的条目。

```
select t1.id,
    isnull(hist.status, t1.status),
    isnull(hist.date_this_status, t1.date_this_status)
from table1 t1
left join (
    select h1.id, h1.status, h1.date_this_status
    from table1_hist h1
    left join table1_hist h2
        on h2.id = h1.id
        and h2.date_this_status < h1.date_this_status
    where h2.date_this_status is null
) hist on hist.id = t1.id 
```

有点令人费解，但相当灵活和高效！

这假设没有两个历史条目具有完全相同的日期。如果有，请编写自联接，如下所示：

```
left join table1_hist h2
    on h2.id = h1.id
    and (
        h2.date_this_status < h1.date_this_status
        or (h2.date_this_status = h1.date_this_status and h2.id < h1.id)
    ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T20:43:12.583

如果我正确理解 OP，给定的 ID 可能会出现在 TABLE1 或 TABLE1_HISTORY 或两者中。

在您的结果集中，您希望返回每个不同的 ID 以及与该 ID 关联的最旧状态/日期，而不管最旧的那个恰好在哪个表中。

*因此，查看两个表并返回任何一个*表中都没有记录的记录，因为它的 ID 具有较小的**date_this_status**。

试试这个：

```
SELECT ID, status, date_this_status FROM table1 ta WHERE
     NOT EXISTS(SELECT null FROM table1 tb WHERE
         tb.id = ta.id
         AND tb.date_this_status < ta.date_this_status)
     AND NOT EXISTS(SELECT null FROM table1_history tbh WHERE
         tbh.id = ta.id
         AND tbh.date_this_status < ta.date_this_status)

UNION ALL

SELECT ID, status, date_this_status FROM table1_history tah WHERE
     NOT EXISTS(SELECT null FROM table1 tb WHERE
         tb.id = tah.id
         AND tb.date_this_status < tah.date_this_status)
     AND NOT EXISTS(SELECT null FROM table1_history tbh WHERE
         tbh.id = tah.id
         AND tbh.date_this_status < tah.date_this_status) 
```

这里有三个基本假设：

1.  您想要返回的每个 ID 将在至少一个表中至少有一条记录。
2.  *同一个表中的同*一个 ID 不会有多个具有相同 date_this_status 值的记录（可以通过使用 DISTINCT 来缓解）
3.  *另一个*表中不会有相同 ID 的记录具有相同的 date_this_status 值（可以通过使用 UNION 而不是 UNION ALL 来缓解）

我们可以做两个轻微的优化：

1.  如果一个 ID 在 TABLE1_HISTORY 中有一条记录，它总是比 TABLE1 中该 ID 的记录更早。
2.  TABLE1 永远不会包含同一 ID 的多条记录（但历史表可能）。

所以：

```
SELECT ID, status, date_this_status FROM table1 ta WHERE
     NOT EXISTS(SELECT null FROM table1_history tbh WHERE
         tbh.id = ta.id
         )

UNION ALL

SELECT ID, status, date_this_status FROM table1_history tah WHERE
     NOT EXISTS(SELECT null FROM table1_history tbh WHERE
         tbh.id = tah.id
         AND tbh.date_this_status < tah.date_this_status) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T20:57:21.277

如果这是您的表格的实际结构，您将无法获得 100% 准确的答案，问题是对于任何给定记录，您可以在同一（最早）日期有 2 个不同的状态，而您不知道哪个是首先输入，因为您在历史记录表上没有主键

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T21:12:50.450

暂时忽略“两个表”问题，我将使用以下逻辑...

```
SELECT
   id, status, date
FROM
   Table1_hist AS [data]
WHERE
   [data].date = (SELECT MIN(date) FROM Table1_hist WHERE id = [data].id) 
```

*（编辑：根据 BlackTigerX 的评论，这假设没有任何 id 可以具有多个具有相同日期时间的状态。）*

将此推断到两个表的简单方法是使用 breitak67 的答案。将“my_table”的所有实例替换为将两个表联合在一起的子查询。这里的一个潜在问题是性能问题，因为您可能会发现索引变得不可用。

一种加快速度的方法可能是使用隐含的知识：
1\. 主表总是有每个 id 的记录。
2\. 历史表并不总是有记录。
3\. 历史表中的任何记录总是比主表中的记录“旧”。

```
SELECT
   [main].id,
   ISNULL([hist].status, [main].status),
   ISNULL([hist].date, [main].date)
FROM
   Table1          AS [main]
LEFT JOIN
(
   SELECT
      id, status, date
   FROM
      Table1_hist AS [data]
   WHERE
      [data].date = (SELECT MIN(date) FROM Table1_hist WHERE id = [data].id)
)
   AS [hist]
      ON [hist].id = [main].id 
```

*   在历史表中查找每个 id 的最旧状态。（可以使用它的索引）
*   将其连接到主表（每个 id 始终只有一条记录）
*   如果 [hist] 包含一个值，则根据定义它是较旧的
*   如果 [hist] 没有值，请使用 [main] 值

# css - 什么是好的 Web 开发字体？

> ID：1003176
> 
> 赞同：17
> 
> 时间：2009-06-16T18:29:25.763
> 
> 标签：css, fonts

我正在寻找可以在 CSS 中使用的字体列表。由于这些字体可能受版权保护，我应该使用哪些字体可以在 Windows（从 XP 开始）、Mac OS X 以及比如说 Ubuntu 8.04 中使用？

我不想仅仅依赖较新的操作系统。

如果移动设备上存在相同的字体，那将是一个很大的好处。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-16T18:30:52.080

请参阅此[浏览器安全字体列表](http://www.ampsoft.net/webdesign-l/WindowsMacFonts.html)。

它以 Windows+Mac 为中心，但仍然适用。它们还包含一个 linux 发行版屏幕截图。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-16T18:33:24.260

以下是一些必读的内容：

*   [安全网页字体](http://web.mit.edu/jmorzins/www/fonts.html)
*   [常用字体](http://www.upsdell.com/BrowserNews/res_fonts.htm#a01)

还有一些关于 StackOverflow 的相关问题：

*   [什么是最易读、最吸引人的字体？](https://stackoverflow.com/questions/340923/what-is-the-most-readable-appealing-font)
*   [Web 的字体（字体）选择？](https://stackoverflow.com/questions/410461/font-typeface-selection-for-the-web)
*   [所有关于为网站选择正确的字体](https://stackoverflow.com/questions/929537/all-about-choosing-the-right-font-for-a-website)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-16T19:05:32.147

声明字体的唯一 100% 安全的方法是使用泛型作为后备。

泛型是：

*   'serif'（例如 Times）
*   “无衬线”（例如 Helvetica）
*   “草书”（例如 Zapf-Chancery）
*   “幻想”（例如西方）（wtf？）
*   “等宽”（例如 Courier）

来自[W3C](http://www.w3.org/TR/CSS2/fonts.html)

> 所有五种通用字体系列都被定义为存在于所有 CSS 实现中（它们不必映射到五种不同的实际字体）。用户代理应该为通用字体系列提供合理的默认选择，在底层技术允许的范围内尽可能表达每个系列的特征。

许多网页设计师认为理所当然的 Arial 和 Verdana 等字体可能不会出现在 Linux 浏览器上（根据经验，甚至 centOS 上的 firefox）。Apple 拥有大部分 Microsoft 字体，但也有一些没有。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-16T21:28:26.610

请记住：朋友不要让朋友使用 Comic Sans。

（说真的，你已经在上面得到了很好的答案......）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-06-16T19:03:37.673

[打字机](http://www.typetester.org/)！

特征：

*   并排比较字体；
*   从安全字体、win 字体或 mac 字体列表中选择；
*   全部来自浏览器。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-16T18:32:08.037

这是一个指南...

[http://www.ampsoft.net/webdesign-l/WindowsMacFonts.html](http://www.ampsoft.net/webdesign-l/WindowsMacFonts.html)

至于手机，我只能说祝你好运！我女儿从我这里拿了我的黑莓五分钟，并改变了我的背景、铃声，现在我所有的字体都是卡通字体。

这是 iPhone 字体的列表，但它可能有点过时了。[http://daringfireball.net/misc/2007/07/iphone-osx-fonts](http://daringfireball.net/misc/2007/07/iphone-osx-fonts)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-16T18:34:45.910

CSS 允许您使用系统上安装的任何字体。`font-family`允许您列出许多字体。如果解析器没有找到系统上安装的第一个，它会移动到下一个。这就是为什么大多数`font-family`定义都向下级联为无衬线或衬线的原因。如果浏览器没有您的任何字体，它会使用默认的 serif、sans-serif 或等宽字体等。

如果您是排版的傻瓜，那么不幸的是，在 CSS3 字体起飞之前，您将不得不忍受为您的 Mac 用户提供所有好的字体，因为 Mac OS X 安装了比 Windows 更多的优秀字体选择. 当我在 Windows 上加载我的网站时，我感到有点沮丧，我看到一堆僵硬的别名字体。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-06-16T18:30:31.300

维达纳是个好东西。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-16T19:10:52.747

您可以将[sIFR](http://wiki.novemberborn.net/sifr/)用于标题，而完全不用担心网络安全字体。看看[示例页面](http://www.mikeindustries.com/blog/files/sifr/2.0/)。这真是太棒了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-06-16T19:19:41.483

Arial 是我一直使用的“安全”字体。

但我最近一直在使用 Trebuchet。这很常见，几乎每个人都会拥有它。如今，它在 StackOverflow、FeedBurner 和许多其他流行网站上随处可见。

但是，以防万一用户没有它，我会像这样使用 CSS（就像 StackOverflow 一样）......

```
font-family:Trebuchet MS,Helvetica,sans-serif; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-05-18T21:57:14.110

如果您希望布局一致并完全控制为您的网站呈现的字体，我建议您使用网络字体。以下是一些要检查的网络字体服务：

*   ~~WebINK~~ - 不再提供
*   谷歌网络字体
*   类型套件
*   字体网

所有这些服务都提供了数以千计的高质量字体。谷歌字体是完全免费的。WebINK 和 TypeKit 都需要订阅模式。我从未使用过 fonts.com，但他们可能有类似的模型。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-16T18:32:53.137

[这是一篇关于网络字体](http://www.fonts.com/aboutfonts/articles/typography/typefacesforweb.htm)的好文章。

现代浏览器提供了很多字体。但是，请保持简单且有点大。此外，使用对比色更容易阅读。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-06-16T18:42:16.117

虽然拥有这样的列表当然很有用，但您还应该利用 CSS 的后备机制。例如，您可以在 font-family 属性中列出 Consolas、Courier New、等宽字体，并在该设备上获得最佳匹配。

每个字体系列列表的最后一项应该是中性的，例如“sans serif”、“serif”、“monospace”等。

这样，只要有合理的低级体验，您的设计师就可以使用他们认为最好的字体。

例如，参见[w3.org 的指南](http://www.w3.org/Style/Examples/007/fonts.html)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-06-16T19:12:16.613

使用 Helvetica/Arial（是的，我知道有区别！）或 Verdana 用于无衬线或 Georgia 或 Times 用于衬线，您可以节省很多。在您的 css 中，您可以按您喜欢的顺序放置一个列表。您应该始终以通用字体系列结尾以涵盖所有基础。

我的网站通常看起来像这样：

```
font-family: Helvetica, Arial, sans-serif;
font-family: Georgia, serif; 
```

如果你想让你的排版变得可爱和花哨，你应该看看[SIFR](http://www.mikeindustries.com/blog/sifr/)，它使用 flash 嵌入特殊字体。

# iphone - 如何禁用应用程序图标的突出显示？

> ID：1003177
> 
> 赞同：79
> 
> 时间：2009-06-16T18:29:28.790
> 
> 标签：iphone, cocoa-touch

当我的图标显示在 iPhone 的主页上时，如何禁用高亮显示？

谢谢。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2009-06-16T22:51:26.897

最简单的方法是选中目标的 Summary 选项卡上的 Prerendered 复选框：

![预呈现的图标](../Images/2a399484a1148a4d6ab1c32881e536c8.png)

或者，在应用程序的 Info.plist 中设置`Icon files (iOS 5) > Primary Icon > Icon already includes gloss effects`to的值。`YES`

![图标已经包含光泽效果](../Images/9e765735162ce9afc5348b12661b7d37.png)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2011-07-11T21:02:06.340

在新的 xcode 4 中，您只需要添加一个新条目并在列表中搜索以下内容：

“图标已经包含光泽效果”

例子： ![在此处输入图像描述](../Images/bce1588ef3ff87de9daab25710ea1fd9.png)

谢谢

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-01-10T20:44:28.570

我尝试了几次，因为它不起作用而变得有点沮丧。原来我已经将此选项设置为 NO 并隐藏在图标文件下。

![在此处输入图像描述](../Images/fa9d4d39328fef2804a64b6cfe84f591.png)

希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-10-15T21:23:00.507

在 Xcode 5 中，这个设置改变了位置。要访问它，请选择您的`xcassets`，选择应用程序图标条目，然后在属性检查器中选择`iOS icon is pre-rendered`复选框。

![在 Xcode 5 中打开预渲染图标](../Images/72240c77404d1701ad519df4b04a519a.png)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-06-16T18:34:30.480

从 iPhone HIG：

> 注意：如果您选择，您可以阻止 iPhone OS 为您的图标添加光泽。为此，您需要将 UIPrerenderedIcon 键添加到应用程序的 Info.plist 文件中（阅读 iPhone 应用程序编程指南以了解此文件）。无论您是否利用添加的光泽，您的图标仍应为 57 x 57 像素。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-09-22T08:23:20.923

打开你的`Info.plist`文件，也可以命名为`ProjectName-Info.plist`，并添加一个新行。*Key* -列是一个下拉列表，单击它并滚动浏览一大组可以设置的人类可读形式的键。

您正在寻找的那个叫做*“图标已经包含光泽和斜角效果”*，这是人类可读的形式。写作`UIPrerenderedIcon`，也有效。

添加此标志还将禁用 Tunes Store 和 App Store 中自动添加光泽和斜角。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-06-16T18:37:54.610

[UIPrerenderedIcon](http://developer.apple.com/documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/PListKeys.html#//apple_ref/doc/uid/20001431-SW16)是您要设置的设置。

实际上，通读所有可以设置的 Info.plist 选项可能是个好主意。它可以使您免于尝试复制默认提供的某些功能。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2011-04-03T19:02:30.107

这个键的“友好”版本现在由 XCode 4 显示为“图标已经包含光泽效果”，以防其他人找不到它。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2011-03-06T20:22:05.397

`UIPrerenderedIcon`在你的`Info.plist`.

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-03-14T13:13:53.197

从 Xcode 4.3 开始，Target/Summary 配置中的图标旁边有一个名为“Prerendered”的复选框。检查并不会添加光泽。对我来说，“图标已经包含光泽效果”不起作用。

![查看](../Images/901c6bd01b91a72ae70de260f126fc82.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-08T19:04:19.540

在 Xcode 4.3.2 中，您还可以使用 Key`Icon already includes gloss effects`并将其值设置为`YES`. 这从我的应用程序图标中消除了我的光泽。

# visual-studio-2005 - pdb 程序数据库中没有文件名

> ID：1003182
> 
> 赞同：0
> 
> 时间：2009-06-16T18:30:14.170
> 
> 标签：visual-studio-2005, pdb-files, dia-sdk

我有一个来自在 Windows VS2005 上调试编译的 C++ 应用程序的 .pdb 程序数据库。我使用 DIA SDK 来查找函数名称，但似乎无法检索符号的文件名。

我需要打开一些开关吗？这行得通吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-23T14:46:24.277

所以这个问题的答案似乎是你先找到行号然后找到源文件？！

例如

```
virtual IProgramSymbol^ getSymbolFromAddress(UInt32 address)
{
    // Find the symbol with the virtual address we were given
    IDiaSymbol ^ sym = nullptr;
    m_session->findSymbolByVA( address, SymTagEnum::SymTagFunction, sym );

    if (sym != nullptr)
    {
        // Get source code information via lines numbers. Odd, but this seems to be the way
        // to do it.
        String ^ srcFile = "unknown";
        int line = 0;

        UInt64 startAdr = sym->virtualAddress;

        // Find line numbers from start_address to start_address+1, which should be 1 symbol!
        IDiaEnumLineNumbers ^ lines;
        m_session->findLinesByVA(startAdr, 1, lines);

        if (lines != nullptr)
        {
            // get the line number
            IDiaLineNumber ^ lnb = lines->Item(0);
            line = lnb->lineNumber;

            // get the source file from the line number (weird!)
            IDiaSourceFile ^ sf = lnb->sourceFile;
            if (sf != nullptr)
            {
                srcFile = sf->fileName;
            }
        }

        return gcnew DiaSymbol(sym, srcFile, line);    // found a function
    } 
```

# java - 使用 SSL 的 Jetty HTTP 客户端

> ID：1003187
> 
> 赞同：1
> 
> 时间：2009-06-16T18:30:51.737
> 
> 标签：java, https

我正在关注[Jetty HttpClient Example](http://docs.codehaus.org/display/JETTY/Jetty+HTTP+Client)，但我无法使 SSL 连接正常工作。当我使用代理连接时，它会引发“未实现”异常。当我不使用代理时，它不会返回任何内容。

```
HttpClient 客户端 = 新 HttpClient();
client.setConnectorType(HttpClient.CONNECTOR_SELECT_CHANNEL);
client.setProxy(new Address("www.example.com", 80));
客户端.start();

// 创建交换对象，它可以让你定义你想去的地方
// 以及收到回复后想要做什么
内容交换交换 = 新内容交换（）
{
  // 定义获取响应时处理响应的回调方法
  // 背部
  protected void onResponseComplete() 抛出 IOException
  {
    super.onResponseComplete();
    字符串响应内容 = this.getResponseContent();

    // 对响应内容做一些事情
    System.out.println(responseContent);
  }
};

exchange.setMethod("GET");
exchange.setURL("https://www.example.com");
exchange.setScheme(HttpSchemes.HTTPS_BUFFER);

// 开始交换
客户端.发送（交换）；
交换.waitForDone();
System.err.println("响应状态：" + exchange.getResponseStatus());

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-06-21T20:13:45.387

码头 v7.4.1：

```
if (dest.isSecure()) {
    if (dest.isProxied()) {
        SSLEngine engine=newSslEngine(channel); ep = new ProxySelectChannelEndPoint(channel, selectSet, key, _sslBuffers, engine, (int)_httpClient.getIdleTimeout());
    } else { ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:28:41.063

是的，很奇怪，Jetty-Client 的 SelectConnector 的源代码如下所示：

```
 if (dest.isProxied()) {
    String connect = HttpMethods.CONNECT+" "+dest.getAddress()+HttpVersions.HTTP_1_0+"\r\n\r\n";
    // TODO need to send this over channel unencrypted and setup endpoint to ignore the 200 OK response.    
    throw new IllegalStateException("Not Implemented");
 } 
```

因此该功能目前不存在 - 至少在我使用的版本（6.1.16）中以这种方式使用代理。在里程碑式的Jetty 7版本中也是如此（我是在下载源代码后发现的）。

我建议您尝试不同的客户端 - 查看 Apache HttpClient：

[http://hc.apache.org/httpclient-3.x/](http://hc.apache.org/httpclient-3.x/)

Jetty 开发人员真的应该在 Javadocs 中清楚地标记这一点。另一种选择是实施为他们实施该功能并将其作为补丁提交回来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-10-12T06:41:22.617

尝试 ProxyHandler (jetty 7)，它处理用于隧道 https 连接的连接命令（通过代理）

# c++ - 不锁定 pthread_cond_timedwait 和 pthread_cond_signal 的互斥锁（在 Linux 上）

> ID：1003190
> 
> 赞同：6
> 
> 时间：2009-06-16T18:31:10.877
> 
> 标签：c++, c, multithreading, pthreads, mutex

调用 pthread_cond_timedwait 而不先锁定相关联的互斥锁，并且在调用 pthread_cond_signal 时也不使用互斥锁，是否有任何缺点？

就我而言，确实没有条件检查，我想要一个与 Java wait(long) 和 notify() 非常相似的行为。

根据文档，可能存在“不可预测的调度行为”。我不确定那是什么意思。

一个示例程序似乎可以在不首先锁定互斥锁的情况下正常工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-16T18:42:22.090

第一个不行：

> `pthread_cond_timedwait()`and `pthread_cond_wait()`函数应阻塞条件变量。它们应在调用线程锁定的互斥锁或未定义的行为结果的情况下调用。

[http://opengroup.org/onlinepubs/009695399/functions/pthread_cond_timedwait.html](http://opengroup.org/onlinepubs/009695399/functions/pthread_cond_timedwait.html)

原因是实现可能希望依靠被锁定的互斥锁来安全地将您添加到服务员列表中。它可能想要释放互斥锁而不首先检查它是否被持有。

第二个令人不安：

> 如果需要可预测的调度行为，则该互斥锁由调用 `pthread_cond_signal()`或 的线程锁定`pthread_cond_broadcast()`。

[http://www.opengroup.org/onlinepubs/007908775/xsh/pthread_cond_signal.html](http://www.opengroup.org/onlinepubs/007908775/xsh/pthread_cond_signal.html)

在我的脑海中，我不确定如果你在没有锁定的情况下发出信号，那么具体的竞争条件是什么会扰乱调度程序的行为。所以我不知道未定义的调度程序行为会变得多么糟糕：例如，也许通过广播，服务员只是没有按优先级顺序获得锁定（或者您的特定调度程序通常表现如何）。或者，服务员可能会“迷路”。

但是，通常情况下，您希望使用条件变量设置条件（至少是一个标志）和信号，而不仅仅是信号，为此您需要使用互斥锁。原因是，否则，如果您与另一个调用 wait() 的线程并发，那么根据 wait() 或 signal() 是否获胜，您将获得完全不同的行为：如果 signal() 先潜入，那么您将即使您关心的信号已经发生，也要等待完全超时。这很少是条件变量的用户想要的，但对你来说可能没问题。也许这就是文档所说的“不可预测的调度程序行为”的意思——时间片突然对你的程序的行为变得至关重要。

顺便说一句，在 Java 中，您必须拥有锁才能通知（）或 notifyAll（）：

> 此方法只能由作为该对象监视器所有者的线程调用。

[http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#notify()](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#notify())

Java 同步的 {/}/wait/notifty/notifyAll 行为类似于 pthread_mutex_lock/pthread_mutex_unlock/pthread_cond_wait/pthread_cond_signal/pthread_cond_broadcast，并非巧合。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-02-19T17:51:46.243

Butenhof 出色的“使用 POSIX 线程编程”在第 3.3.3 章的末尾讨论了这一点。

基本上，在不锁定互斥锁的情况下向 condvar 发送信号是一种**潜在**的性能优化：如果信号线程锁定了互斥锁，那么在 condvar 上唤醒的线程必须立即阻塞信号线程已锁定的互斥锁，即使信号线程是不修改等待线程将使用的任何数据。

提到“不可预测的调度程序行为”的原因是，如果您有一个高优先级线程在 condvar 上等待（另一个线程将发出信号并唤醒高优先级线程），任何其他低优先级线程都可以来锁定互斥体，以便当 condvar 发出信号并唤醒高优先级线程时，它必须等待低优先级线程释放互斥体。如果互斥锁在发出信号时被锁定，那么高优先级线程将在低优先级线程之前调度在互斥锁上：基本上你知道，当你“唤醒”高优先级线程时，它会在调度程序立即唤醒允许它（当然，在向高优先级线程发出信号之前，您可能必须等待互斥锁，但这是一个不同的问题）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-16T18:43:57.080

与互斥锁配对的条件变量的等待点是**原子地**进入等待并释放锁，即允许其他线程修改受保护的状态，然后再次原子地接收状态变化的通知并获取锁。您所描述的可以使用许多其他方法来完成，例如管道、套接字、信号，或者 - 可能是最合适的 -**信号量**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T18:44:43.197

我认为这应该有效（注意未经测试的代码）：

```
// initialize a semaphore
sem_t sem;
sem_init(&sem,
    0, // not shared
    0  // initial value of 0
    );

// thread A
struct timespec tm;
struct timeb    tp;

const long sec      = msecs / 1000;
const long millisec = msecs % 1000;

ftime(&tp);
tp.time += sec;
tp.millitm += millisec;
if(tp.millitm > 999) {
    tp.millitm -= 1000;
    tp.time++;
}
tm.tv_sec  = tp.time;
tm.tv_nsec = tp.millitm * 1000000;

// wait until timeout or woken up
errno = 0;
while((sem_timedwait(&sem, &tm)) == -1 && errno == EINTR) {
    continue;
}

return errno == ETIMEDOUT; // returns true if a timeout occured

// thread B
sem_post(&sem); // wake up Thread A early 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-29T17:21:32.727

条件应尽可能在互斥体之外发出信号。互斥锁是并发编程中必不可少的邪恶。它们的使用会导致争用，从而使系统无法从使用多个处理器中获得最大性能。

互斥锁的目的是保护对程序中某些共享变量的访问，以便它们以原子方式运行。当在互斥体内部完成信号操作时，它会导致将数百个不相关的机器周期包含到互斥体中，这些机器周期与保护共享数据无关。潜在地，它从用户空间一直调用到内核。

标准中关于“可预测的调度程序行为”的注释完全是伪造的。

当我们希望机器以可预测的、明确定义的顺序执行语句时，工具就是在单个执行线程中对语句进行排序：`S1 ; S2`. 声明`S1`是“预定”之前`S2`的。

当我们意识到某些动作是独立的并且它们的调度顺序并不重要时，我们使用线程，并且可以实现性能优势，例如更及时地响应实时事件或在多个处理器上进行计算。

有时，当调度顺序在多个线程之间变得很重要时，这属于称为*优先级*的概念。优先级解决了当 N 个语句中的任何一个可能被调度执行时首先发生的事情。在多线程下排序的另一个工具是排队。事件由一个或多个线程放入队列，单个服务线程按队列顺序处理事件。

底线是，放置`pthread_cond_broadcast`不是控制执行顺序的合适工具。它不会使执行顺序可预测，因为程序突然在每个平台上都具有完全相同的、可重现的行为。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-06-16T20:02:32.417

“不可预测的调度行为”就是这个意思。你不知道会发生什么。也不执行。它可以按预期工作。它可能会使您的应用程序崩溃。它可以正常工作多年，然后竞争条件使您的应用程序变得笨拙。它可能会陷入僵局。

基本上，如果任何文档建议任何未定义/不可预测的事情都可能发生，除非你按照文档告诉你的去做，你最好这样做。其他东西可能会在你的脸上爆炸。（在你将代码投入生产之前它不会爆炸，只是为了让你更恼火。至少这是我的经验）

# cluster-computing - 有人在集群系统上使用过UDS（统一开发服务器）吗？

> ID：1003200
> 
> 赞同：0
> 
> 时间：2009-06-16T18:32:51.000
> 
> 标签：cluster-computing

UDS（以前称为 Forte 4GL）是我们当前系统运行的平台。我记得在一个论坛中找到了一个标志，该标志记录了如何在 Veritas 集群上部署它。然而，现在我们有了现代硬件，我在谷歌的任何地方都找不到那个注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T19:03:44.007

终于在[http://sundusum.com/gpunkt/knowledgebase/articles/7240.html找到了它（经过数小时的搜索）](http://sundusum.com/gpunkt/knowledgebase/articles/7240.html)

“为了允许集群环境等配置，在 Forte 3M 版中添加了对新环境变量 FORTE_CM_NO_CANONICAL_NAMECHK 的测试。如果设置了该环境变量，则跳过 FORTE_NS_ADDRESS 和机器名称之间的匹配检查。

“可以在允许运行环境管理器的机器上的 fortedef 文件中设置 FORTE_CM_NO_CANONICAL_NAMECHK。应避免在所有节点上设置该环境变量，因为这将允许环境管理器在任何可能导致问题的节点上启动规范名称检查旨在防止。”

# asp.net - ASP.NET - 控制生命周期

> ID：1003208
> 
> 赞同：1
> 
> 时间：2009-06-16T18:33:44.070
> 
> 标签：asp.net

我有一个 ASP.NET 页面，我在其中动态构建 LinkBut​​ton 和 TextBox 元素。这些元素是在页面的 OnInit 事件期间构建的。然后，用户可以执行更改这些元素的值的操作。这些元素的值通过 JavaScript 更改。当用户单击按钮时，会触发服务器端事件。此事件解析每个控件中的值。我注意到 TextBox 的值是正确的，但 LinkBut​​ton 的值不正确。

只能动态生成 ASP.NET 中某些类型的控件并在服务器端检索它们的值吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T18:37:40.570

您无法在服务器端获取链接按钮的值。您只能在服务器端获取表单元素的值。

如果你想向服务器端传递更多的值，你可以使用隐藏的输入元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T18:36:40.697

不，通常你可以创建你喜欢的任何元素，只要你在 OnInit 事件中创建它，或者如果你添加 INamingContainer（标记）接口，你应该重写 CreateChildControls() 方法并在那里创建你的元素。

但是，通过 JavaScript 更改 LinkBut​​ton 的值是什么意思？你到底对 LinkBut​​ton 做了什么改变？你能提供更多细节吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T18:36:45.330

确保为要通过服务器代码检索的每个表单元素设置了“runat=server”属性，并且您有一个与每个元素关联的 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T18:39:53.657

文本框正在工作，因为文本框的值实际上是在回发中发送的。但是链接按钮不会将任何内容发送回服务器。如果您需要发回在客户端发生更改的内容，则需要设置一个隐藏字段，然后使用该值修改您的链接按钮。

# pdf - iText - 换行符被替换的问题？

> ID：1003209
> 
> 赞同：1
> 
> 时间：2009-06-16T18:33:48.953
> 
> 标签：pdf, rtf, itext

我正在使用 iText 处理代码。我们正在从 iText 1.2 升级到 iText 2.1.5。随着升级（实际代码没有变化），所有换行符都被替换为问号。当文本在文档中自动换行时不会发生这种情况，只有当输入的数据包含换行符时才会发生。我不确定是换行还是回车导致了问题，还是两者兼而有之。有趣的是，同一文件可以根据用户选择打印为 PDF 或 RTF，并且字符替换仅发生在 RTF 中。有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-26T19:07:53.670

在 java 中，MyString.replace("\r\n","\n")

用换行符替换所有 \r\n ，它似乎有效。

# cocoa - 在可可中集成applescript

> ID：1003219
> 
> 赞同：0
> 
> 时间：2009-06-16T18:36:20.307
> 
> 标签：cocoa, applescript, integrate

我制作了一个简短的applescript，可以发送带有附件的电子邮件。现在我想将此脚本集成到我的可可应用程序中。我尝试了在互联网上找到的以下代码：

```
NSAppleScript *mailScript;
NSString *scriptString= [NSString stringWithFormat:@"the applescript"];
mailScript = [[NSAppleScript alloc] initWithSource:scriptString];
[mailScript executeAndReturnError:nil];
[mailScript release]; 
```

但是，此代码不起作用。我是可可的新手，需要一些帮助。

更新：电子邮件已创建。但是，当添加附件时，applescript 似乎停止了。在 scripteditor 中运行时，applescript 可以完美运行。有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T18:56:18.137

因此，当您不忽略来自 的错误时`-[NSAppleScript executeAndReturnError:]`，错误是什么？它的内容是否告诉您发生了什么问题？

```
NSDictionary *dict = nil;
if ([mailScript executeAndReturnError: &dict] == nil)
{
  //ooh, it went wrong, look at dict
}
else
{
  // well, that worked!
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T18:47:46.310

你的代码看起来不错。AppleScript 中可能存在错误。

尝试以下操作：

```
NSAppleScript *mailScript;
NSAppleEventDescriptor *resultDescriptor;
NSString *scriptString= [NSString stringWithFormat:@"the applescript"];
mailScript = [[NSAppleScript alloc] initWithSource:scriptString];
resultDescriptor = [mailScript executeAndReturnError:nil];
NSLog([resultDescriptor stringValue]);
[mailScript release]; 
```

`NSLog`将向控制台输出描述任何错误的字符串。这应该可以帮助您发现任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T19:01:14.993

如果需要时间才能到达应用程序中的正确位置并且您只想测试 Applescript，您可以通过`osascript`命令从终端运行它，并查看结果：

```
osascript -e 'applescript here'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T19:08:26.073

它似乎[`SBApplication`](http://developer.apple.com/documentation/Cocoa/Reference/SBApplication_Class/SBApplication/SBApplication.html)应该工作，但我以前没有使用过它。

根据[@cocoadevcentral](http://twitter.com/cocoadevcentral/status/1647449917)：

> SBApplication：用于使用 Objective-C 而不是 AppleScript 进行跨应用程序脚本调用。例如：获取当前的 iTunes 曲目。

这是文档的摘录：

> SBApplication 类提供了一种机制，使 Objective-C 程序能够将 Apple 事件发送到可编写脚本的应用程序并接收 Apple 事件作为响应。因此，该程序可以控制应用程序并与之交换数据。Scripting Bridge 通过在 Apple 事件描述符和 Cocoa 对象之间桥接数据类型来工作。
> 
> 尽管 SBApplication 包含手动发送和处理 Apple 事件的方法，但您永远不必直接调用这些方法。相反，SBApplication 的子类实现了自动处理 Apple 事件发送的特定于应用程序的方法。
> 
> 例如，如果你想获取当前的 iTunes 曲目，你可以简单地使用 iTunes 应用程序动态定义的子类的 currentTrack 方法——它为你处理发送 Apple 事件的细节——而不是计算更复杂的，低级替代方案：
> 
> ```
> [iTunes propertyWithCode:'pTrk']; 
> ```
> 
> 如果您确实需要手动发送 Apple 事件，请考虑使用 NSAppleEventDescriptor 类。

希望有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-16T11:44:27.743

抱歉回复晚了。可可应用程序中的 Applescript 可以通过一些基本原则轻松使用，首先将所有描述符设置为 'NULL'，使用 'NSAppleEventDescriptor' 来正确执行脚本，并使用 executionn 的返回值，这将为您的脚本提供：

> > ```
> > NSString * scriptString = NULL, NSString * retvalue = NULL;
> > 
> > NSAppleEventDescriptor * descriptor = NULL;
> > 
> > NSDictionary * errInfo = nil;
> > 
> > NSAppleScript * mailScript = NULL;
> > 
> > scriptString = [NSString stringWithFormat: @ "the applescript"];
> > 
> > mailScript = [[NSAppleScript alloc] initWithSource: scriptString];
> > 
> > descriptor = [mailScript executeAndReturnError: & errInfo];
> > 
> > retvalue = [descriptor stringValue];
> > 
> > [mailScript release]; 
> > ```
> 
> 对于“applescript”，您没有写出您想要实现的目标，我想这是为了隐私。

# performance - SQL Server 2005 聚集索引查询速度

> ID：1003230
> 
> 赞同：4
> 
> 时间：2009-06-16T18:38:12.473
> 
> 标签：performance, ssms, sql-execution-plan, clustered-index

我们的网站受到了相当大的冲击，因此我们正在研究优化我们现有的一些查询。

在研究这个问题时，我们遇到了几个查询，当查询中包含聚集索引的简单引用时，它们的执行计划快了大约 4-5 倍……例如

如果这是旧查询：

```
SELECT ...
FROM myTable
WHERE categoryID =  @category 
```

根据 SSMS 中的执行计划，以下查询将快 4 倍：

```
SELECT ...
FROM myTable
WHERE categoryID =  @category 
AND lotID = lotID 
```

我们似乎无法理解这将如何使查询更快。聚集索引位于 lotID 上，但由于它与自身进行比较，这有什么帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-16T18:43:17.737

对我来说似乎很明显

您的第一个查询没有被聚集索引覆盖，而第二个查询是因为 lotID 不在第一个查询的 WHERE 子句中

您可能想阅读[SQL Server 覆盖索引](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/sql-server-covering-indexes)以了解所有工作原理

您还需要了解聚集索引是数据，一个表的所有数据都在聚集索引中。当您在具有聚集索引的表上创建非聚集索引时，非聚集索引将具有指向聚集索引的指针（因为这是其余数据所在的位置），除非您可以通过非聚集索引完全满足您的查询索引，在这种情况下，将只使用非聚集索引......我现在停止漫谈

编辑

我读 AND lotID = @lotID NOT AND lotID = lotID

有时您可以通过执行 where lotID >0 （选择您拥有的最低数字）来伪造聚集索引，然后您将获得搜索

因此，如果您的最小 lotID = 1 并且您添加 AND lotID > 0

您还可以看到搜索而不是扫描，我在这篇文章中演示了 WHERE IndexValue > ''[索引搜索总是比索引扫描更好还是更快？](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/is-an-index-scan-always-better-or-faster)

# maven-2 - Maven 存储库配置

> ID：1003238
> 
> 赞同：2
> 
> 时间：2009-06-16T18:41:09.393
> 
> 标签：maven-2, settings, repository

我已经问过一个类似的问题，其中解决了其中的一部分，但我想更详细地扩展。

在配置 maven 以查看内部存储库时，最好将该信息放在项目 pom 中还是用户的 settings.xml 中？解释为什么在这里真的很有帮助。

谢谢，

杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T18:44:52.913

**我鼓励您将存储库定义放在 POM**中，这样任何开发人员只需获取代码的副本并运行 Maven 来编译它，而无需更改其设置文件中的内容。

我发现*setting.xml*文件仅用于在特殊情况下*破解*Maven 的行为，例如当一个存储库由于防火墙而无法访问并且您需要使用镜像时。但这是我个人的看法。Maven 文档为您提供更多自由：

> settings.xml 文件中的 settings 元素包含用于定义以各种方式配置 Maven 执行的值的元素，例如 pom.xml，但不应捆绑到任何特定项目或分发给受众。其中包括本地存储库位置、备用远程存储库服务器和身份验证信息等值。

如果您有一个在每个项目中都使用的本地存储库，您可以在*settings.xml*中添加它，只要确保配置有据可查，在我当前的项目中不是这样，新开发人员在尝试编译时会遇到困难某物。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T18:46:38.950

您应该始终尝试制作 maven 项目，以便从本地环境中的源代码管理的干净签出中编译它；没有 settings.xml。在我看来，这意味着您可以在用户的​​ settings.xml 文件中对合理的默认值进行任何*覆盖。*但是 pom 应该包含对每个人都有效的合理价值观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T18:43:15.007

我们使用用户的 settings.xml 并在 README 中包含有关可能需要哪些其他 repos 的信息。

理论上，给定的 group-artifact-version 是相同的，无论它来自哪个 repo。它对我们来说效果很好。如果您发现自己拥有两个具有相同 group-artifact-version 标识符的不同资产，那么这表明您正在做一些非常糟糕的事情。

# project-management - 我什么时候应该使用特定领域的语言？

> ID：1003241
> 
> 赞同：30
> 
> 时间：2009-06-16T18:42:12.200
> 
> 标签：project-management, dsl

我想要一些关于何时应该使用[Domain Specific Language](http://en.wikipedia.org/wiki/Domain-specific_programming_language)的实用指导。我找到了有关优缺点的资源，但什么样的项目值得使用？

创建和维护 DSL 似乎需要大量时间投资，那么在哪些应用程序空间中，我的时间投资可以获得生产力回报？

**编辑：**似乎 DSL 最常见的用途是用于持久化数据状态的文件格式，那么将 DSL 用于程序逻辑和结构（可能是代码生成）呢？这什么时候可行？

**编辑#2**我主要询问何时创建一个特定的 DSL 是值得的。当然，我们应该尽可能地使用现有的 DSL 以节省时间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-16T18:54:14.973

创建另一个 DSL 的充分理由很少。这个世界充满了特殊用途的语言。

沿着这些思路思考。

1.  使用 Python、Java、C++ 等通用语言解决问题。

2.  优化该解决方案以排除通用功能并构建一个非常漂亮、非常优雅、非常可扩展的类库。

3.  优化该类库以强调“正交性”。确保所有功能都能很好地协同工作，没有任何问题。

4.  如果您只需要简化语法，请围绕您漂亮的类库创建一个脚本包装器。这是你的 DSL。对于 Python，这很容易——它已经是一种动态语言。对于 Java，您可以利用一些东西。对于 C++，构建这个灵活的脚本环境可能需要一些工作。

5.  如果您仍需要进一步优化，请考虑为您的 DSL 编写编译器。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-06-16T19:04:01.120

ACM Computing Surveys 文章[When and How to Develop-Domain-Specific Languages](http://doi.acm.org/10.1145/1118890.1118892)就这一主题提供了建议，Martin Fowler 2010 年出版的《[Domain-Specific Languages](http://martinfowler.com/books/dsl.html) 》一书也提供了建议。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-06-16T18:48:44.217

首先，当您开发的问题领域是广为人知的领域时，我会***使用***DSL，并且该领域的一些业务专家已经竭尽全力构建这样的 DSL，这样您就不必经过竭尽全力解决他们已经解决的所有问题。

如果您正在考虑***创建***DSL，如果您的业务是在非常特定的领域完成的，并且您将大部分时间都花在了特定的问题领域上，那么我会考虑这样做。如果你为多个问题域做应用程序，那么我不建议采用这种方法。

例如，如果您的企业只专注于构建税务应用程序，那么构建税务系统 DSL 可能是一个好主意。这将使您的语言不仅可以在您的各种税务申请中使用，而且还可以被您所在行业中想要做您正在完成的类似事情的其他企业销售（可用）。

当然，您必须权衡在现有语言之上构建 DSL 与构建框架的成本/收益。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-16T19:02:25.367

**想到的一种情况是当需求需要非常高或不可能的定制/配置级别时**。因此，您将提供一种针对 DSL 的脚本模型。

以汽车装配“手臂”为例，提供一个配置模型来支持各种工厂配置是不可能的。（检测到这个，不要检测到那个，当这种情况发生时这样做......等等）

但是为每个客户编译一个具有专门逻辑的新应用程序可能不是一个好方法。所以在这种情况下，你创建了一个小框架，它将成为一种 DSL，然后对于你销售的每个机械臂，你在你的 DSL 中编写一个小应用程序，并将它与编译和运行你的 DSL 的核心软件一起保存脚本代替。或者更好的是，对 DSL 进行编程的工具与机械臂一起包含，因此您的客户可以在您创建的 DSL 中自己“编程”机械臂。

想到的一个真实世界示例是 Yahoo Pipes（您可以将其视为 DSL）或用于自动网络爬虫的 robots.txt 指令。它们可能不是成熟的 DSL，但它们展示了 DSL 可能有用的地方。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-10-10T13:19:29.370

好吧，有人不得不说，所以这里是：

Lisp 被一些人视为*任何*领域的领域特定语言。一个得到良好支持且非常可扩展的 DSL。

在某些情况下，从 Lisp（或类似的语言，如 Haskell）构建 DSL 实际上可以用最少的努力提供很多功能，因此非常值得。DSL 并不总是需要很大的维护负担。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-16T18:52:46.100

最明显的是，当语言已经存在并且得到很好的支持时，你绝对应该使用它们。这方面的主要例子是用于基于 Motif 的 GUI 开发和软件构建的 UIL。

如果您必须自己制作，我想说寻找域的大量工作就是正确指定事物，并且您的编译器无法真正找到大多数错误，但特定于域的编译器可以。GUI 就是一个很好的例子，因为大部分工作是设置布局，并且通常有很多方法可以进行语法上有效的 C++ 调用，这些调用对你的底层 GUI 系统没有任何意义（例如：尝试嵌入整个对话框按钮内的小部件）。

我发现 UIL 对 GUI 开发来说尤其是一个巨大的收获，因为 UIL 编译器可以在 GUI 规范中发现错误，这些错误对于 C++ 编译器来说就像是不错的正常可编译代码。它得到良好支持的事实意味着代码很容易在平台之间移植，甚至在 GUI 构建器之间移植。

# python - App Engine Datastore IN 运算符 - 如何使用？

> ID：1003247
> 
> 赞同：3
> 
> 时间：2009-06-16T18:42:38.860
> 
> 标签：python, google-app-engine, gql, google-cloud-datastore

阅读：[http ://code.google.com/appengine/docs/python/datastore/gqlreference.html](http://code.google.com/appengine/docs/python/datastore/gqlreference.html)

我想使用：

:= 输入

但我不确定如何使它工作。让我们假设以下

```
class User(db.Model):
    name = db.StringProperty()

class UniqueListOfSavedItems(db.Model):
    str = db.StringPropery()
    datesaved = db.DateTimeProperty()

class UserListOfSavedItems(db.Model):
    name = db.ReferenceProperty(User, collection='user')
    str = db.ReferenceProperty(UniqueListOfSavedItems, collection='itemlist') 
```

如何进行查询以获取用户已保存项目的列表？显然我可以这样做：

```
q = db.Gql("SELECT * FROM UserListOfSavedItems WHERE name :=", user[0].name) 
```

但这给了我一个钥匙列表。我现在想获取该列表并将其放入查询中以从 UniqueListOfSavedItems 中获取 str 字段。我以为我可以这样做：

```
q2 = db.Gql("SELECT * FROM UniqueListOfSavedItems WHERE := str in q") 
```

但有些不对劲……有什么想法吗？是吗（我在做我的日常工作，所以现在无法测试）：

```
q2 = db.Gql("SELECT * FROM UniqueListOfSavedItems __key__ := str in q) 
```

旁注：搜索一个非常困难的问题，因为我真正关心的是“IN”运算符。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-17T08:34:16.573

由于您有一个键列表，因此您不需要进行第二次查询 - 您可以进行批量提取。试试这个：

```
#and this should get me the items that a user saved
useritems = db.get(saveditemkeys) 
```

（请注意，您甚至不需要保护子句 - 0 实体上的 db.get 已适当短路。）

有什么区别，你可能会问？好吧，一个 db.get 大约需要 20-40 毫秒。另一方面，查询（GQL 与否）大约需要 160-200 毫秒。但是等等，情况会变得更糟！IN 运算符在 Python 中实现，并转换为多个查询，这些查询是串行执行的。因此，如果您使用 IN 过滤器对 10 个键进行查询，您将执行 10 次单独的 160 毫秒查询操作，总共大约 1.6 秒的延迟。相比之下，单个 db.get 将具有相同的效果，总共需要大约 30 毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T20:03:35.627

+1 亚当让我走上正轨。根据他的指针，并在代码搜索中进行一些搜索，我有以下解决方案。

```
usersaveditems = User.Gql(“Select * from UserListOfSavedItems where user =:1”, userkey)

saveditemkeys = []

for item in usersaveditems:
    #this should create a list of keys (references) to the saved item table
    saveditemkeys.append(item.str())    

if len(usersavedsearches > 0):
    #and this should get me the items that a user saved
    useritems = db.Gql(“SELECT * FROM UniqueListOfSavedItems WHERE __key__ in :1’, saveditemkeys) 
```

# inversion-of-control - 使用 Castle Windsor 注入 IRailsEngineContext

> ID：1003257
> 
> 赞同：1
> 
> 时间：2009-06-16T18:44:15.847
> 
> 标签：inversion-of-control, controller, castle-windsor, httpcontext, castle-monorail

### 问题

我在 Castle Monorail 项目中使用 Castle Windsor 作为 IoC 容器。我想将 IRailsEngineContext 的当前实例注入到从控制器中的容器解析的对象中。

### 语境

我想将 rails 上下文注入的对象将用于包装会话对象，以保留以前查看的记录的 ID。然后将引用它以确保不会再次查看它们。

### 替代解决方案

我可以通过每次调用将上下文传递给方法或手动注入它，但最好直接从容器中注入它。

### 问题

我想不出一种在容器中注入上下文的方法。有没有办法做到这一点？这甚至有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T20:35:24.377

```
Container.Register(
    Component.For<IRailsEngineContext>()
             .UsingFactoryMethod(()=>MonoRailHttpHandler.CurrentContext)
             .LifeStyle.Transient
); 
```

IRailsEngineContext - 我猜这是MonoRail的**旧**版本。我建议你换一个新的，越早越好。

# java - 使用什么技术将系统托盘前端写入 webapp？

> ID：1003258
> 
> 赞同：3
> 
> 时间：2009-06-16T18:44:17.470
> 
> 标签：java, apache-flex, swing, spring

我们有一个在 tomcat 上运行的内部 web 应用程序，构建在 Spring 上。Web 应用程序前端是使用 Flex 构建的。
我想创建一个跨平台的系统托盘应用程序，它允许进入应用程序的主页并在服务器中发生某些事情时显示警报。

您认为什么是最好的技术：

*   系统托盘本身？Java 摇摆？
*   服务器和系统托盘之间的通信？网络服务？RSS订阅？春季远程？JMX 通知？

问候，

维姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T20:00:56.397

如果您想继续使用 Java，您有两种选择：

*   使用 Swing/AWT。确保您使用的是 Java 6 及更高版本（您可以将其与您的应用程序一起安装），因为它支持系统托盘（来自 API）：

    ```
    TrayIcon trayIcon = null;
    if (SystemTray.isSupported()) {
        // get the SystemTray instance
        SystemTray tray = SystemTray.getSystemTray();
        // load an image
        Image image = Toolkit.getDefaultToolkit.getImage("");
        // create a action listener to listen for default action executed on
        // the tray icon
        ActionListener listener = new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                // execute default action of the application
                // ...
            }
        };
        // create a popup menu
        PopupMenu popup = new PopupMenu();
        // create menu item for the default action
        MenuItem defaultItem = new MenuItem("");
        defaultItem.addActionListener(listener);
        popup.add(defaultItem);
        // / ... add other items
        // construct a TrayIcon
        trayIcon = new TrayIcon(image, "Tray Demo", popup);
        // set the TrayIcon properties
        trayIcon.addActionListener(listener);
        // ...
        // add the tray image
        try {
            tray.add(trayIcon);
        } catch (AWTException e) {
            System.err.println(e);
        }
        // ...
    } else {
        // disable tray option in your application or
        // perform other actions
        // ...
    }
    // ...
    // some time later
    // the application state has changed - update the image
    if (trayIcon != null) {
        trayIcon.setImage(updatedImage);
    }
    // ... 
    ```

*   使用[SWT](http://www.eclipse.org/swt/) / [JFace](http://wiki.eclipse.org/index.php/JFace)。这是一个示例（取自[此处](http://www.eclipse.org/swt/snippets/)）：

    ```
    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        Image image = new Image(display, 16, 16);
        final Tray tray = display.getSystemTray();
        if (tray == null) {
            System.out.println("The system tray is not available");
        } else {
            final TrayItem item = new TrayItem(tray, SWT.NONE);
            item.setToolTipText("SWT TrayItem");
            item.addListener(SWT.Show, new Listener() {
                public void handleEvent(Event event) {
                    System.out.println("show");
                }
            });
            item.addListener(SWT.Hide, new Listener() {
                public void handleEvent(Event event) {
                    System.out.println("hide");
                }
            });
            item.addListener(SWT.Selection, new Listener() {
                public void handleEvent(Event event) {
                    System.out.println("selection");
                }
            });
            item.addListener(SWT.DefaultSelection, new Listener() {
                public void handleEvent(Event event) {
                    System.out.println("default selection");
                }
            });
            final Menu menu = new Menu(shell, SWT.POP_UP);
            for (int i = 0; i < 8; i++) {
                MenuItem mi = new MenuItem(menu, SWT.PUSH);
                mi.setText("Item" + i);
                mi.addListener(SWT.Selection, new Listener() {
                    public void handleEvent(Event event) {
                        System.out.println("selection " + event.widget);
                    }
                });
                if (i == 0)
                    menu.setDefaultItem(mi);
            }
            item.addListener(SWT.MenuDetect, new Listener() {
                public void handleEvent(Event event) {
                    menu.setVisible(true);
                }
            });
            item.setImage(image);
        }
        shell.setBounds(50, 50, 300, 200);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        image.dispose();
        display.dispose();
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:20:53.807

使用 Adob​​e AIR 和 BlazeDS 或 LCDS，您可以轻松构建此类应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T19:26:40.490

我会选择 FreePascal。它本机编译到 windows / mac / linux 并且因此您不依赖于要安装的任何其他框架（.net、java、air）。只有一个可执行文件，就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T19:54:40.373

我同意[James](https://stackoverflow.com/questions/1003258/what-technology-to-use-to-write-systray-front-end-to-webapp/1003473#1003473)的观点：如果你对 Flex 有投资和专业知识，那么用 Air 扩展它是有意义的。

至于有效载荷 - 如果您只是需要不时“弹出”通知，RSS 是您的最佳选择。否则，请使用您自己的类似 XML REST 的服务，因为它很容易设置，并且从长远来看会给您带来灵活性。

# linux - Mac OS 和 Linux 是否有任何 MSDN 等效项？

> ID：1003264
> 
> 赞同：6
> 
> 时间：2009-06-16T18:45:09.700
> 
> 标签：linux, macos, documentation, cross-platform, msdn

我熟悉 Windows 环境中的代码。对于我们的一些产品，用户不断要求移植到 Linux 和 Mac。首先，我需要收集有关系统 API、如何使用它们、何时使用它们等文档的文档。

那么，是否有适用于 Mac OS 和 Linux 的 MSDN 等效项？最好是可下载的格式？

PS。我想在 Free Pascal/Lazarus 或 RealBasic 上工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T18:48:42.517

好吧，如果您获得了 Apple 的 XCode，您可以直接从 Xcode 中下载各种文档、教程等。或者尝试使用[Apple Developer Connection](http://developer.apple.com/)获取论坛以及在 Xcode 中找不到链接的任何其他内容。

在 Linux 上，不幸的是，您更被迫单独打包网站和手册页。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-16T18:50:00.863

对于 Linux，一个地方是[Linux Developer Network](http://ldn.linuxfoundation.org/)。

我喜欢的东西，

*   [Linux 文档项目](http://tldp.org/)
*   [Linux 交叉引用](http://lxr.linux.no/)器

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-16T18:51:47.100

对于 Linux，等效的是手册页，它通常是发行版的一部分，但开发手册页可能在一个单独的包中，它不是默认发行版的一部分。您可以使用“man”命令访问它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-16T18:47:34.813

对于 Mac，developer.apple.com 上的开发者网站非常棒。它以易于搜索和阅读的格式提供所有 API 的详细文档。该文档还与 XCode 捆绑在一起，因此您甚至不需要下载它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T19:13:34.630

[Linux 手册页项目](http://www.kernel.org/doc/man-pages/)是系统 API 的有用参考。但是，很多时候您将使用更高级别的库；每个人都有自己的文档。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-18T08:06:05.353

手册页，如果这不起作用，来源。FPC unix RTL 就是这样开发的。

最常见的问题之一是结构的内核和 libc 版本之间的差异。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T18:29:58.540

如果您使用[Real Studio](http://www.realsoftware.com) (Realbasic)，那么您可能会发现您无需费心了解所有操作系统 API（尽管您可以在必要时访问它们）。Real Studio 文档在此处在线：

[http://docs.realsoftware.com](http://docs.realsoftware.com)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-18T14:29:45.313

对于 XCode，我发现这是一个很好的起点：

[https://developer.apple.com/library/mac/navigation/](https://developer.apple.com/library/mac/navigation/)

您可以按框架过滤和排序，也可以只搜索一个函数。不过，搜索结果可能会更好（即更像谷歌）。

# iphone - 导航栏中的自定义按钮不起作用

> ID：1003270
> 
> 赞同：0
> 
> 时间：2009-06-16T18:46:19.387
> 
> 标签：iphone, cocoa, cocoa-touch

我在导航栏中添加了一个自定义按钮（UIButton 子类），但单击时该按钮不会更改状态。

该按钮配置正确，因为它在例如表格视图中工作。

欢迎所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T18:49:16.933

您是否尝试过继承 UIBarButton 而不是 UIButton？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T08:17:08.433

我让它工作了。我忘记实现的是改变按钮选择状态的方法。

# c# - 如何将 UTF-8 字节 [] 转换为字符串

> ID：1003275
> 
> 赞同：1058
> 
> 时间：2009-06-16T18:47:00.180
> 
> 标签：c#, .net, arrays, string, type-conversion

我有一个`byte[]`从我碰巧知道包含[UTF-8](http://en.wikipedia.org/wiki/UTF-8)的文件中加载的数组。

在一些调试代码中，我需要将其转换为字符串。是否有单线可以做到这一点？

在幕后它应该只是一个分配和一个*memcopy*，所以即使它没有实现，它也应该是可能的。

* * *

## 回答 #1

> 赞同：1645
> 
> 时间：2009-06-16T18:49:15.713

```
string result = System.Text.Encoding.UTF8.GetString(byteArray); 
```

* * *

## 回答 #2

> 赞同：360
> 
> 时间：2014-02-28T02:31:19.417

至少有四种不同的方式进行这种转换。

1.  **编码的 GetString**
    ，但如果这些字节包含非 ASCII 字符，您将无法取回原始字节。

2.  **BitConverter.ToString**
    输出是一个以“-”分隔的字符串，但没有 .NET 内置方法将字符串转换回字节数组。

3.  **Convert.ToBase64String**
    您可以通过使用轻松地将输出字符串转换回字节数组`Convert.FromBase64String`。
    注意：输出字符串可以包含“+”、“/”和“=”。如果要在 URL 中使用字符串，则需要对其进行显式编码。

4.  **HttpServerUtility.UrlTokenEncode**
    您可以通过使用轻松将输出字符串转换回字节数组`HttpServerUtility.UrlTokenDecode`。输出字符串已经是 URL 友好的！`System.Web`缺点是如果您的项目不是 Web 项目，它需要组装。

一个完整的例子：

```
byte[] bytes = { 130, 200, 234, 23 }; // A byte array contains non-ASCII (or non-readable) characters

string s1 = Encoding.UTF8.GetString(bytes); // ���
byte[] decBytes1 = Encoding.UTF8.GetBytes(s1);  // decBytes1.Length == 10 !!
// decBytes1 not same as bytes
// Using UTF-8 or other Encoding object will get similar results

string s2 = BitConverter.ToString(bytes);   // 82-C8-EA-17
String[] tempAry = s2.Split('-');
byte[] decBytes2 = new byte[tempAry.Length];
for (int i = 0; i < tempAry.Length; i++)
    decBytes2[i] = Convert.ToByte(tempAry[i], 16);
// decBytes2 same as bytes

string s3 = Convert.ToBase64String(bytes);  // gsjqFw==
byte[] decByte3 = Convert.FromBase64String(s3);
// decByte3 same as bytes

string s4 = HttpServerUtility.UrlTokenEncode(bytes);    // gsjqFw2
byte[] decBytes4 = HttpServerUtility.UrlTokenDecode(s4);
// decBytes4 same as bytes 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-09-20T08:24:09.977

当您不知道编码时，从字节数组转换为字符串的一般解决方案：

```
static string BytesToStringConverted(byte[] bytes)
{
    using (var stream = new MemoryStream(bytes))
    {
        using (var streamReader = new StreamReader(stream))
        {
            return streamReader.ReadToEnd();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-10-16T01:04:17.247

**定义：**

```
public static string ConvertByteToString(this byte[] source)
{
    return source != null ? System.Text.Encoding.UTF8.GetString(source) : null;
} 
```

**使用：**

```
string result = input.ConvertByteToString(); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-04-22T11:48:35.803

将 a 转换`byte[]`为 a`string`似乎很简单，但任何类型的编码都可能会弄乱输出字符串。这个小功能可以正常工作而没有任何意外结果：

```
private string ToString(byte[] bytes)
{
    string response = string.Empty;

    foreach (byte b in bytes)
        response += (Char)b;

    return response;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-11-22T17:15:32.233

使用`(byte)b.ToString("x2")`, 输出`b4b5dfe475e58b67`

```
public static class Ext {

    public static string ToHexString(this byte[] hex)
    {
        if (hex == null) return null;
        if (hex.Length == 0) return string.Empty;

        var s = new StringBuilder();
        foreach (byte b in hex) {
            s.Append(b.ToString("x2"));
        }
        return s.ToString();
    }

    public static byte[] ToHexBytes(this string hex)
    {
        if (hex == null) return null;
        if (hex.Length == 0) return new byte[0];

        int l = hex.Length / 2;
        var b = new byte[l];
        for (int i = 0; i < l; ++i) {
            b[i] = Convert.ToByte(hex.Substring(i * 2, 2), 16);
        }
        return b;
    }

    public static bool EqualsTo(this byte[] bytes, byte[] bytesToCompare)
    {
        if (bytes == null && bytesToCompare == null) return true; // ?
        if (bytes == null || bytesToCompare == null) return false;
        if (object.ReferenceEquals(bytes, bytesToCompare)) return true;

        if (bytes.Length != bytesToCompare.Length) return false;

        for (int i = 0; i < bytes.Length; ++i) {
            if (bytes[i] != bytesToCompare[i]) return false;
        }
        return true;
    }

} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-05-18T13:38:41.563

还有一个类 UnicodeEncoding，用法很简单：

```
ByteConverter = new UnicodeEncoding();
string stringDataForEncoding = "My Secret Data!";
byte[] dataEncoded = ByteConverter.GetBytes(stringDataForEncoding);

Console.WriteLine("Data after decoding: {0}", ByteConverter.GetString(dataEncoded)); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-02-01T19:55:03.907

除了选择的答案之外，如果您使用的是 .NET 3.5 或 .NET 3.5 CE，则必须指定要解码的第一个字节的索引，以及要解码的字节数：

```
string result = System.Text.Encoding.UTF8.GetString(byteArray, 0, byteArray.Length); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-05-21T21:26:25.467

我在这篇文章中看到了一些答案，这可能被认为是完整的基础知识，因为我在 C# 编程中有几种方法可以解决相同的问题。唯一需要考虑的是**纯 UTF-8**和**带有[BOM](https://en.wikipedia.org/wiki/Byte_order_mark)**的 UTF-8 之间的区别。

上周，在我的工作中，我需要开发一种功能来输出带有 BOM 的 CSV 文件和带有纯 UTF-8（没有 BOM）的其他 CSV 文件。每种 CSV 文件*编码*类型将被不同的非标准化 API 使用。一个 API 读取带有 BOM 的 UTF-8，而另一个 API 读取没有 BOM。我需要研究有关此概念的参考资料，阅读*“[没有 BOM 的 UTF-8 和 UTF-8 有什么区别？](https://stackoverflow.com/questions/2223882/whats-the-difference-between-utf-8-and-utf-8-without-bom) ”*堆栈溢出问题和维基百科文章*“[字节顺序标记](https://en.wikipedia.org/wiki/Byte_order_mark)”*来构建我的方法。

最后，我的两种 UTF-8 编码类型（使用 BOM 和纯编码）的 C# 编程需要类似于下面的示例：

```
// For UTF-8 with BOM, equals shared by Zanoni (at top)
string result = System.Text.Encoding.UTF8.GetString(byteArray);

//for Pure UTF-8 (without B.O.M.)
string result = (new UTF8Encoding(false)).GetString(byteArray); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-09-15T05:55:06.217

或者：

```
 var byteStr = Convert.ToBase64String(bytes); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-01-05T10:53:30.350

该类`BitConverter`可用于将 a 转换`byte[]`为`string`.

```
var convertedString = BitConverter.ToString(byteAttay); 
```

类的文档`BitConverter`可以在[MSDN](https://msdn.microsoft.com/en-us/library/system.bitconverter(v=vs.110).aspx)上找到。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-11-17T08:12:28.810

用于将从文件读取的字节数组转换为纯 ASCII C 风格的以零结尾的字符串的 LINQ 单行器`byteArrFilename`是这样的：对于读取旧存档格式的文件索引表等内容非常方便。

```
String filename = new String(byteArrFilename.TakeWhile(x => x != 0)
                              .Select(x => x < 128 ? (Char)x : '?').ToArray()); 
```

我`'?'`在这里使用任何不是纯 ASCII 的默认字符，但当然可以更改。如果您想确保可以检测到它，只需使用它`'\0'`，因为`TakeWhile`在开头确保以这种方式构建的字符串不可能包含`'\0'`来自输​​入源的值。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-06-29T00:19:13.807

据我所知，给出的答案都不能保证空终止的正确行为。在有人以不同的方式向我展示之前，我编写了自己的静态类来使用以下方法处理此问题：

```
// Mimics the functionality of strlen() in c/c++
// Needed because niether StringBuilder or Encoding.*.GetString() handle \0 well
static int StringLength(byte[] buffer, int startIndex = 0)
{
    int strlen = 0;
    while
    (
        (startIndex + strlen + 1) < buffer.Length // Make sure incrementing won't break any bounds
        && buffer[startIndex + strlen] != 0       // The typical null terimation check
    )
    {
        ++strlen;
    }
    return strlen;
}

// This is messy, but I haven't found a built-in way in c# that guarentees null termination
public static string ParseBytes(byte[] buffer, out int strlen, int startIndex = 0)
{
    strlen = StringLength(buffer, startIndex);
    byte[] c_str = new byte[strlen];
    Array.Copy(buffer, startIndex, c_str, 0, strlen);
    return Encoding.UTF8.GetString(c_str);
} 
```

的原因`startIndex`是在我正在处理的示例中，我需要将 a 解析`byte[]`为空终止字符串的数组。在简单的情况下可以安全地忽略它

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-09-29T07:49:57.973

试试这个控制台应用程序：

```
static void Main(string[] args)
{
    //Encoding _UTF8 = Encoding.UTF8;
    string[] _mainString = { "Hello, World!" };
    Console.WriteLine("Main String: " + _mainString);

    // Convert a string to UTF-8 bytes.
    byte[] _utf8Bytes = Encoding.UTF8.GetBytes(_mainString[0]);

    // Convert UTF-8 bytes to a string.
    string _stringuUnicode = Encoding.UTF8.GetString(_utf8Bytes);
    Console.WriteLine("String Unicode: " + _stringuUnicode);
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-07-06T13:27:53.193

这是您不必费心编码的结果。我在我的网络类中使用它并将二进制对象作为字符串发送。

```
public static byte[] String2ByteArray(string str)
{
    char[] chars = str.ToArray();
    byte[] bytes = new byte[chars.Length * 2];

    for (int i = 0; i < chars.Length; i++)
        Array.Copy(BitConverter.GetBytes(chars[i]), 0, bytes, i * 2, 2);

    return bytes;
}

public static string ByteArray2String(byte[] bytes)
{
    char[] chars = new char[bytes.Length / 2];

    for (int i = 0; i < chars.Length; i++)
        chars[i] = BitConverter.ToChar(bytes, i * 2);

    return new string(chars);
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-02T13:38:49.977

```
string result = ASCIIEncoding.UTF8.GetString(byteArray); 
```

# c# - 数据绑定到异构列表

> ID：1003281
> 
> 赞同：3
> 
> 时间：2009-06-16T18:48:04.483
> 
> 标签：c#, wpf, data-binding

我有一个带有 ListBox 和 ContentPanel 的 WPF UserControl。ListBox 绑定到其中包含苹果和橙子的 ObservableCollection。

什么被认为是设置它的正确方法，所以如果我选择一个苹果，我会在右侧看到一个 AppleEditor，如果我选择一个橙色，OrangeEditor 会出现在内容面板中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T20:23:56.617

我建议使用[DataTemplating](http://msdn.microsoft.com/en-us/library/ms742521(VS.85).aspx)来创建和应用不同的编辑器。根据您的“苹果”和“橙子”的不同，我建议使用[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)。此外，如果他们有类似 Type 属性的东西，您还可以使用[DataTriggers](http://msdn.microsoft.com/en-us/library/system.windows.datatrigger.aspx)来切换编辑器。

让我们用苹果和橙子建立一个小样本。它们将具有一些共享属性，以及一些不同的属性。然后我们可以创建一个基本 IFruits 的 ObservableCollection 以在 UI 中使用。

```
public partial class Window1 : Window
{
    public ObservableCollection<IFruit> Fruits { get; set; }
    public Window1()
    {
        InitializeComponent();

        Fruits = new ObservableCollection<IFruit>();
        Fruits.Add(new Apple { AppleType = "Granny Smith", HasWorms = false });
        Fruits.Add(new Orange { OrangeType = "Florida Orange", VitaminCContent = 75 });
        Fruits.Add(new Apple { AppleType = "Red Delicious", HasWorms = true });
        Fruits.Add(new Orange { OrangeType = "Navel Orange", VitaminCContent = 130 });

        this.DataContext = this;
    }
}

public interface IFruit
{
    string Name { get; }
    string Color { get; }
}

public class Apple : IFruit
{
    public Apple() { }
    public string AppleType { get; set; }
    public bool HasWorms { get; set; }
    #region IFruit Members
    public string Name { get { return "Apple"; } }
    public string Color { get { return "Red"; } }
    #endregion
}

public class Orange : IFruit
{
    public Orange() { }
    public string OrangeType { get; set; }
    public int VitaminCContent { get; set; }
    #region IFruit Members
    public string Name { get { return "Orange"; } }
    public string Color { get { return "Orange"; } }
    #endregion
} 
```

接下来，我们可以创建 DataTemplateSelector，它只会检查 Fruit 的类型并分配正确的 DataTemplate。

```
public class FruitTemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        string templateKey = null;

        if (item is Orange)
        {
            templateKey = "OrangeTemplate";
        }
        else if (item is Apple)
        {
            templateKey = "AppleTemplate";
        }

        if (templateKey != null)
        {
            return (DataTemplate)((FrameworkElement)container).FindResource(templateKey);
        }
        else
        {
            return base.SelectTemplate(item, container);
        }
    }
} 
```

然后在 UI 中，我们可以为 Apples 和 Oranges 创建两个模板，并使用选择器来确定将哪些应用到我们的内容中。

```
<Window x:Class="FruitSample.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:FruitSample"
    Title="Fruits"
    Height="300"
    Width="300">
<Window.Resources>

    <local:FruitTemplateSelector x:Key="Local_FruitTemplateSelector" />

    <DataTemplate x:Key="AppleTemplate">
        <StackPanel Background="{Binding Color}">
            <TextBlock Text="{Binding AppleType}" />
            <TextBlock Text="{Binding HasWorms, StringFormat=Has Worms: {0}}" />
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="OrangeTemplate">
        <StackPanel Background="{Binding Color}">
            <TextBlock Text="{Binding OrangeType}" />
            <TextBlock Text="{Binding VitaminCContent, StringFormat=Has {0} % of daily Vitamin C}" />
        </StackPanel>
    </DataTemplate>

</Window.Resources>

<DockPanel>
    <ListBox x:Name="uiFruitList"
             ItemsSource="{Binding Fruits}"
             DisplayMemberPath="Name" />
    <ContentControl Content="{Binding Path=SelectedItem, ElementName=uiFruitList}"
                    ContentTemplateSelector="{StaticResource Local_FruitTemplateSelector}"/>
</DockPanel>
</Window> 
```

# performance - Struts/JSP/J2EE 性能和内存分析和问题

> ID：1003282
> 
> 赞同：2
> 
> 时间：2009-06-16T18:48:06.247
> 
> 标签：performance, jsp, websphere, ibm-rad

我们正在使用 Struts 并遇到性能问题。并且大量使用jsp包括、tiles、EL表达式。

我确信这会占用大量内存和处理时间。有哪些方法可以分析 JSP 页面？我可以使用哪些工具？分析时我应该寻找什么？

我已经看到了生成 JSP Java Servlet 代码的代码，并且我看到了瓶颈，但我宁愿更准确地测量它。

这是在 JDK1.5 和 IBM Websphere 6.1 (RAD7) 下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T03:43:55.777

RAD 7 仍然基于 Eclipse 吗？如果是，则 Eclipse 有一个分析器，应该在 RAD 7 中仍然可用。它可能是 RAD 7 中可用的透视图之一。这是2006 年的[一篇](http://www.eclipse.org/articles/Article-TPTP-Profiling-Tool/tptpProfilingArticle.html)关于在 eclipse 中使用分析器和更多关于使用的更新[演示文稿](http://www.eclipse.org/tptp/home/documents/conferences/eclipseCon2009/712_ProfilingTestingTPTP.pdf)（仅限幻灯片）的文章它来自 2009 年的 eclipse con 会议：

希望探查器工具也包含在 RAD 7 的某个地方。

# database - 字符串或枚举

> ID：1003288
> 
> 赞同：2
> 
> 时间：2009-06-16T18:49:13.640
> 
> 标签：database, database-design, enums

*哪种情况更好？*

假设有超过 300 个可能的值，基本上是一个键/值对表，其中所讨论的列是键：

枚举***或***Char/Varchar

我只是想知道是否有人处理过具有这么多可能值的 Enum 列以及可能存在的陷阱。

**编辑：**

键是预定义的。

*物品表：*

身份证、姓名、...

*属性表：*

id、item_id、键、值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T18:52:49.423

如果您在谈论 300 个可能的值，我将使用单独的 id/value 查找表。

特别是考虑到您的问题中的以下陈述：

> 关于本质上是键/值对表的内容，其中所讨论的列是键

那么为什么不直接把它做成一个键/值对表呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T18:55:02.883

也许我误解了这个问题，但通常如果我有一个包含 300 多种类型的列，告诉我需要对其进行规范化并将其放在另一个表中，使用外键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T18:59:35.620

如果只有正交值，我建议选择一个枚举 - 例如，命名颜色是一个可以证明创建大枚举的示例。问题是如果你的 300+ 值是正交的——你能把它分解成更小的正交集合吗？例如，立方体的八个角可以用具有八个值的枚举来描述。

```
FrontLeftBottom
FrontRightBottom
FrontRightTop
FrontLeftTop
RearLeftBottom
[...] 
```

但是您也可以将其分解为仅六个值，并使用位标志枚举将它们组合起来。

```
Front
Rear
Left
Right
Top
Bottom 
```

如果值空间不固定 - 也就是说很可能会添加新值 - 字符串或新的指定类型是要走的路。

# python - Django 中的访问者数量

> ID：1003302
> 
> 赞同：3
> 
> 时间：2009-06-16T18:50:48.037
> 
> 标签：python, django

在 Django 中，如何查看当前访问者的数量？或者我如何确定活动会话的数量？

这是一个好方法吗？

使用 django.contrib.sessions.models.Session，设置到期时间短。每当有人在网站上做某事时，更新到期时间。然后统计未过期的会话数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T18:58:40.333

您可能想为此研究[django-tracking 之](http://code.google.com/p/django-tracking/)类的东西。

> django-tracking 是一个简单的尝试来跟踪 Django 驱动的网站的访问者。它还提供基本的黑名单功能。

**编辑**：至于您更新的问题... [答案在被 muhuk 更正后编辑]

或者，我喜欢对这个问题的回答：[如何找出创建的会话总数，即登录用户的数量？](https://stackoverflow.com/questions/978333/how-do-i-find-out-total-number-of-sessions-created-i-e-number-of-logged-in-users)

您可能想尝试一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-10T02:43:27.347

[django-tracking2](https://github.com/bruth/django-tracking2) 可以帮助跟踪访问者。

特别是这在 AWS 等部署中很容易配置，因为它不需要任何依赖项和环境变量。

django-tracking2 跟踪访问者和注册用户在您的网站上花费的时间长度。尽管这适用于网站，但这更适用于具有注册用户的 Web*应用程序。*这不会取代（也不打算）取代对理解页面视图的聚合流非常有用的客户端分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-12-17T11:35:50.753

还有一个小应用程序 django-visits 来跟踪访问[https://bitbucket.org/jespino/django-visits](https://bitbucket.org/jespino/django-visits)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-06-17T01:22:00.743

编辑：添加了一些关于为什么我在这里提出这个答案的更多信息。当我试图为基于 django 的网站回答同样的问题时，我发现了 chartbeat。我不为他们工作。

不是特别是 Django，但是将 chartbeat.com 添加到网站也很有趣。

django-tracking 很棒，为那个答案+1，等等。

我无法用 django-tracking 做的几件事，chartbeat 帮助解决了；跟踪与完全缓存的页面的交互，这些页面从未命中 django 跟踪代码和未通过 django 传递的页面（例如 wordpress 等）

# asp.net - 共享点日历 弄乱了可访问性模式选项卡顺序

> ID：1003304
> 
> 赞同：0
> 
> 时间：2009-06-16T18:51:16.710
> 
> 标签：asp.net, html, sharepoint, calendar, web-parts

在任何 OOB 共享点页面上，如果您通过页面“选项卡”，第一个选项卡会显示“打开更易于访问的模式”菜单项。也就是说，带有日历 Web 部件的页面除外。关闭浏览器菜单后，第一个选项卡项将成为日历 Web 部件，跳过菜单项和所有其他内容。

我尝试使用我想首先点击的菜单在 div 上将选项卡索引设置为 -1、0、1，但日历 Web 部件仍然获得第一个选项卡，迫使通过页面选项卡的用户必须循环浏览所有控件进入“可访问模式”菜单。

任何想法我还能做些什么来确保它作为第一个选项卡加载，无论如何？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T20:06:51.423

尝试使用 JQuery 来删除（或编辑）包含日历 webpart 的表的 tabindex。它可能有一个 tabindex 0 ，它出现在代码的后面，然后是可访问模式 div，并且浏览器将看到 tabindex 为 0 的 2 个项目，tab 按钮的 startindex （-1 不起作用）。看到 2 个项目，它将使用在 html 中找到的最后一个项目作为选项卡按钮的开始。

# c++ - C++ 分析（谷歌 cpu 性能工具）究竟测量了什么？

> ID：1003309
> 
> 赞同：8
> 
> 时间：2009-06-16T18:52:20.110
> 
> 标签：c++, profiling, gperftools

我尝试开始使用 Google Perf Tools 来分析一些 CPU 密集型应用程序。这是一种统计计算，使用“ofstream”将每个步骤转储到文件中。我不是 C++ 专家，所以我很难找到瓶颈。我的第一遍给出了结果：

```
总计：857 个样本
     357 41.7% 41.7% 357 41.7% _write$UNIX2003
     134 15.6% 57.3% 134 15.6% _exp$fenv_access_off
     109 12.7% 70.0% 276 32.2% scythe::dnorm
     103 12.0% 82.0% 103 12.0% _log$fenv_access_off
      58 6.8% 88.8% 58 6.8% scythe::const_matrix_forward_iterator::operator*
      37 4.3% 93.1% 37 4.3% scythe::matrix_forward_iterator::operator*
      15 1.8% 94.9% 47 5.5% 标准::转换
      13 1.5% 96.4% 486 56.7% SliceStep::DoStep
      10 1.2% 97.5% 10 1.2% 0x0002726c
       5 0.6% 98.1% 5 0.6% 0x000271c7
       5 0.6% 98.7% 5 0.6% _write$NOCANCEL$UNIX2003

```

这是令人惊讶的，因为所有真正的计算都发生在 SliceStep::DoStep 中。“_write$UNIX2003”（我在哪里可以找到这是什么？）似乎来自写入输出文件。现在，让我感到困惑的是，如果我注释掉所有`outfile << "text"`语句并运行 pprof，95% 就在`SliceStep::DoStep`其中，而 `_write$UNIX2003' 消失了。但是，按总时间衡量，我的应用程序并没有加快速度。整个过程的速度不到 1%。

我错过了什么？

补充：没有语句的 pprof 输出`outfile <<`是：

```
总计：790 个样本
     205 25.9% 25.9% 205 25.9% _exp$fenv_access_off
     170 21.5% 47.5% 170 21.5% _log$fenv_access_off
     162 20.5% 68.0% 437 55.3% scythe::dnorm
      83 10.5% 78.5% 83 10.5% scythe::const_matrix_forward_iterator::operator*
      70 8.9% 87.3% 70 8.9% scythe::matrix_forward_iterator::operator*
      28 3.5% 90.9% 78 9.9% 标准::转换
      26 3.3% 94.2% 26 3.3% 0x00027262
      12 1.5% 95.7% 12 1.5% _write$NOCANCEL$UNIX2003
      11 1.4% 97.1% 764 96.7% SliceStep::DoStep
       9 1.1% 98.2% 9 1.1% 0x00027253
       6 0.8% 99.0% 6 0.8% 0x000274a6

```

这看起来像我所期望的，除了我没有看到性能的明显提升（10 秒计算中的 0.1 秒）。代码本质上是：

```
ofstream outfile("out.txt");
for loop:
  SliceStep::DoStep()
  outfile << 'result'
outfile.close() 
```

更新：我使用 boost::timer 计时，从分析器开始的地方开始，到结束的地方结束。我不使用线程或任何花哨的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T20:06:13.453

从我的评论：

您从分析器获得的数字表明，如果没有打印语句，该程序应该快 40% 左右。

但是，运行时几乎保持不变。

显然其中一个测量值一定是错误的。这意味着您必须进行更多更好的测量。

首先，我建议从另一个简单的工具开始：时间命令。这应该让您大致了解您的时间都花在了哪里。

如果结果仍然没有定论，您需要一个更好的测试用例：

*   使用更大的问题
*   测量前进行预热。做一些循环，然后开始任何测量（在同一过程中）。

* * *

> Tiristan：一切都在用户中。我正在做的事情很简单，我认为......文件一直打开的事实是否意味着什么？

这意味着分析器是错误的。

使用 python 将 100000 行打印到控制台会产生如下结果：

```
for i in xrange(100000):
    print i 
```

安慰：

```
time python print.py
[...]
real    0m2.370s
user    0m0.156s
sys     0m0.232s 
```

相对：

```
time python test.py > /dev/null

real    0m0.133s
user    0m0.116s
sys     0m0.008s 
```

**我的观点是：** 您的内部测量*和*时间表明您不会从禁用输出中获得任何收益。谷歌性能工具说你应该。谁错了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:04:00.620

_write$UNIX2003 可能是指`write`输出到终端的 POSIX 系统调用。与几乎其他任何东西相比，I/O 都非常慢，因此如果您正在编写相当多的输出，那么您的程序在此花费大量时间是有道理的。

我不确定为什么您的程序在删除输出时不会加速，但我无法仅凭您提供的信息做出猜测。很高兴看到一些代码，甚至是删除 cout 语句后的 perftools 输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T18:14:54.020

Google perftools 收集调用堆栈的样本，因此您需要了解这些样本。

根据文档，您可以在语句或地址粒度上显示调用图。这应该告诉你你需要知道什么。

# wpf - WPF 互操作和对话框

> ID：1003310
> 
> 赞同：0
> 
> 时间：2009-06-16T18:52:20.593
> 
> 标签：wpf, interop, dialog

我有一个现有的 WinForms 应用程序，我现在正在为其设计 WPF 中的新位。事情进展得相当顺利，我第一次遇到了对话的需要。

我想在 WPF 中进行对话。似乎我需要为实际内容执行 UserControl，然后通过带有 ElementHost 的 WinForms 表单托管该内容（因为 UserControl 没有 ShowDialog() 方法）。

这就是我的问题所在。这是如何运作的？最好我能说的是，WPF UserControl 甚至没有 DialogResult 属性（考虑到它没有 ShowDialog() 方法，这是有道理的）——在我看来，我需要一个 WPF Window 控件——而我不需要我想我可以在这种情况下使用它。

在这里挣扎于基本的流程和设置。有人可以发光吗？

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-22T07:49:18.887

您可以从 WinForms 应用程序打开 WPF 窗口。

只需创建窗口并调用`ShowDialog()`. CLR 将加载 WPF 框架并打开窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T19:00:47.303

如果您希望您的互操作应用程序**主要**像 WinForms 应用程序一样工作，那么您描述的方法可以正常工作——在我的互操作案例中，我的情况几乎相同。

WPF 支持 MessageBoxes（尽管版本与 WinForms 略有不同），并且您可以使用 WPF Windows 将一些东西放在一起（通过添加类似于 DialogResult 的东西来扩展它）。但是，提供的 WPF 控件表明他们正在尝试更改 UX 交互以最小化对话框，尤其是模式对话框。

不过，为了让您的生活更轻松，我将创建一个 WinForms Form/ElementHost 子类，专门用于处理 w/托管 WPF 内容，并根据您喜欢“使用”声明的干净程度，包装您自己的类似 DialogResult 的枚举，这样您就不会必须包含 System.Windows.Forms 命名空间，这会使您的 WPF 代码隐藏更加麻烦。

# ruby-on-rails - Rails/Ruby：有什么方法可以缩短堆栈跟踪？

> ID：1003313
> 
> 赞同：5
> 
> 时间：2009-06-16T18:52:44.743
> 
> 标签：ruby-on-rails, logging

我想限制我在 Rails 中看到的堆栈跟踪的大小。我对调试 Rails 堆栈并不像我自己的应用程序那样感兴趣。是否有任何内置方法可以让 Rails 动态执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T19:56:40.323

是的。看看[ActiveSupport::BacktraceCleaner](http://api.rubyonrails.org/classes/ActiveSupport/BacktraceCleaner.html)类。很好的解释[在这里](https://afreshcup.com/home/2008/11/29/rails-23-backtrace-silencing)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T19:04:14.473

您可以使用自己的异常捕获器包装代码，然后输出您想要的数量。

[使用 backtrace-Method 中的数组](http://ruby-doc.org/core/classes/Exception.html)

我能想到的唯一选择。重新编译 Ruby 并更改在[eval.c](http://www.ruby-doc.org/doxygen/1.8.4/eval_8c-source.html)中控制堆栈深度的值（TRACE_HEAD 和 TRACE_TAIL）

# .net - 如何禁用组合框项目？

> ID：1003318
> 
> 赞同：1
> 
> 时间：2009-06-16T18:53:30.233
> 
> 标签：.net, wpf, combobox

有没有办法通过索引访问其项目的属性来禁用 WPF ComboBox 的前 x 个项目以外的所有项目？

编辑：

```
 ComboBoxItem DiffieHellmanItem = (ComboBoxItem)comboboxName.ItemContainerGenerator.ContainerFromIndex(i)); 
```

作品

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T19:06:02.147

编辑：看起来您找到了一种获取 ComboBoxItems 的方法。您可能还想查看 ItemContainerStyle 并查看是否有一些可以利用的 DataBinding（如果您的项目具有 Enabled 属性或类似的东西）。

但是，根据您执行 DataBinding 的方式，您可以使用 DataTemplates 在不同的画笔、不透明度等中显示“禁用”项目。[Bea Stollnitz在这里](http://bea.stollnitz.com/blog/?p=16)有一篇很好的文章。

从 UX 的角度来看，您可能需要考虑的一件事是为什么要禁用它们而不是隐藏它们。您是否可以利用某种渐进式披露策略来避免 ComboBox 填充用户无法单击的内容？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-03-24T11:34:59.250

您可以在 Combobox 上设置 ItemContainerStyle。From Blend - 创建当前的副本以获取此模板。在模板中，您可以将 IsEnabled 属性设置为 Setter，并将其值绑定到您要绑定的任何内容。

```
<Style x:Key="ComboBoxItemStyle1" TargetType="{x:Type ComboBoxItem}">
            ...
            <Setter Property="IsEnabled" Value="{Binding Active}"/>
            ...
        </Style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T07:53:17.393

恕我直言，最好的方法是使用 DataTriggers

```
<ComboBox.ItemContainerStyle>
    <Style TargetType="ComboBoxItem">
        <Style.Triggers>
            <DataTrigger *insert condition*>
                <Setter Property="IsEnabled" Value="False"/>
            </DataTrigger>
        </Style.Triggers>
     </Style>
</ComboBox.ItemContainerStyle> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T18:58:16.637

我不知道实际上禁用 ComboBox 中的项目的方法，但是您应该能够向 OnClick 事件添加逻辑，该事件将检查所选项目的索引是否 >= x 并禁止基于此请求的任何操作。

# javascript - javascript中是否有用于日期/时间的自然语言解析器？

> ID：1003326
> 
> 赞同：36
> 
> 时间：2009-06-16T18:54:40.853
> 
> 标签：javascript, datetime, nlp

javascript中是否有用于日期/时间的自然语言解析器？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-28T15:48:46.130

我使[Chrono](https://github.com/berryboy/chrono)成为一个小型库，用于在 JavaScript 中解析日期。我添加了日期范围解析功能（例如 '12 Nov - 13 Dec 2012'）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2011-10-03T23:44:26.273

[SugarJS](http://sugarjs.com/)支持日期和时间的一些自然语言解析。

您可以在此处跳转到实时示例：http: [//sugarjs.com/dates](http://sugarjs.com/dates)

例如，它支持以下输入：

*   后天
*   从星期一开始 2 周
*   明年5月25日

然后，您可以将结果转换为不同的日期格式，或使用 API 进一步操作日期。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-06-16T18:56:26.017

[Date.js](http://www.datejs.com/)是否满足您的需求？还是您在寻找其他东西？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-02T13:39:41.993

对于节点，我发现[chrono 运行](https://github.com/wanasit/chrono)良好

Chrono 支持大多数日期和时间格式，例如：

*   今天、明天、昨天、上周五等
*   2013 年 8 月 17 日 - 2013 年 8 月 19 日
*   本周五 13:00 - 16:00
*   5天前
*   2周后
*   2013 年 8 月 17 日星期六 18:40:39 GMT+0900 (JST)
*   2014-11-30T08:15:30-05:30

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-08-17T10:00:39.973

[夏洛克](https://github.com/neilgupta/Sherlock)是一个伟大的人。

```
var Sherlock = require('sherlockjs');
var sherlocked = Sherlock.parse('Homework 5 due next monday at 3pm');

// Basic properties
var title = sherlocked.eventTitle;    // 'Homework 5 due'
var startDate = sherlocked.startDate; // Date object pointing to next monday at 3pm
var endDate = sherlocked.endDate;     // null in this case, since no duration was given
var isAllDay = sherlocked.isAllDay;   // false, since a time is included with the event

// Example of an additional custom property added by Watson
var validated = sherlocked.validated; // true 
```

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2011-12-28T16:29:09.333

您可以使用 jQuery datepicker 翻译，获取日期和月份编号并从 datepicker days 中选择日期。

你可以给这个对象添加值，我认为你最多可以下载 60 种语言。（下面的对象不完整，我删除了一些代码以简化它）。

```
$.datepicker.regional['sv'] = { 
  monthNames:['Januari','Februari','Mars','April','Maj','Juni','Juli','Augusti','September','Oktober','November','December'],
  monthNamesShort: ['Jan','Feb','Mar','Apr','Maj','Jun','Jul','Aug','Sep','Okt','Nov','Dec'],
  dayNamesShort: ['Sön','Mån','Tis','Ons','Tor','Fre','Lör'],
  dayNames: ['Söndag','Måndag','Tisdag','Onsdag','Torsdag','Fredag','Lördag'],
  dayNamesMin: ['Sö','Må','Ti','On','To','Fr','Lö']
}; 
```

现在获取日期和月份数

```
var dateObject = new Date();
var day = dateObject.getDay();
var month = dateObject.getMonth();
var monthText = $.datepicker.regional['sv']['monthNames'][month];
var dayText = $.datepicker.regional['sv']['dayNames'][day]; 
```

# datetime - ColdFusion 中是否有用于日期/时间的自然语言解析器？

> ID：1003330
> 
> 赞同：6
> 
> 时间：2009-06-16T18:55:54.893
> 
> 标签：datetime, coldfusion, nlp

ColdFusion 中是否有用于日期/时间的[自然语言解析器？](http://en.wikipedia.org/wiki/Natural_language_processing)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-16T21:38:31.210

有一个（据报道——我没有使用过）Java 的一个很好的名为[JChronic](https://github.com/samtingleff/jchronic)的——Ruby Chronic 日期解析器的一个端口。你可以尝试使用它。

它自 2006 年以来没有更新，但应该仍然有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T19:23:20.573

我相信[parseDateTime()](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_m-r_11.html#134381)和[lsParseDateTime()](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_l_36.html#133322)从内置的 ColdFusion 函数库中最接近您正在寻找的内容。

查看 Adob​​e 的 LiveDocs 了解[其他日期/时间功能](http://livedocs.adobe.com/coldfusion/8/htmldocs/functions-pt0_05.html#1098968)。

请记住，您也可以利用任何 Java 日期/时间类。Pete Freitag 有一篇[有趣的帖子](http://www.petefreitag.com/item/569.cfm)，其中包含一些示例代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-21T18:53:17.213

由于您可能在表单中使用它，[请查看 Datejs](http://www.datejs.com/)，这是一个非常好的 JavaScript 日期库，可以解析很多日期。它很容易与 CF 结合。

# coldfusion - 覆盖 Application.cfc 中的 onMissingTemplate 处理

> ID：1003331
> 
> 赞同：2
> 
> 时间：2009-06-16T18:56:09.010
> 
> 标签：coldfusion, application.cfc

我想处理当该模板不存在时用户点击 /somePage.cfm 的 url 并使用来自另一个目录的模板的场景。我知道我可以通过在 apache 等中重写来做到这一点，但我真的不想在其中存储逻辑，所以我尝试覆盖`onTemplateMissing`我的 Application.cfc 中的行为。

它似乎在我的测试中运行良好，但我担心通过这个 hacky 解决方案我会缩短一些我还没有看到的部分（例如我目前没有使用的方法，如 onSessionStart 等）和将来可能会遇到问题。

这是我目前正在做的事情：

```
<cffunction name="onMissingTemplate">
    <cfargument name="targetPage" />
    <!--- Handle any templates that we're really loading from elsewhere --->
    <cfif isFooTemplate(arguments.targetPage)>
        <cfset onRequestStart(arguments.targetPage) />
        <cfset onRequest(arguments.targetPage) />
        <cfset onRequestEnd(arguments.targetPage) />
        <cfreturn true />
    </cfif>
    <cfreturn false />
</cffunction> 
```

请注意，同样在我的方法中，我正在对返回 true`onRequest`的模板进行进一步处理。`isFooTemplate()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T20:00:34.200

我不认为这是一个 hacky 解决方案。这就是该方法的用途，在返回 false 时，如果您愿意，ColdFusion 将调用您在管理员中设置的标准错误处理程序。

唯一没有运行 onSessionStart() 的情况是用户在第一个页面请求上点击了 onMissingTemplate()。如果您出于某种原因需要用户进行会话，则可以检查会话范围是否存在，因为会话范围应该在 onMissingTemplate() 方法中可用并适当处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T21:10:57.020

它实际上是**onMissingTemplate**而不是**onTemplateMissing**；这是推荐的做法，根本不是“hacky”。你这样做很好。

# c# - Juval Lowy 的 C# 编码标准问题

> ID：1003338
> 
> 赞同：23
> 
> 时间：2009-06-16T18:57:01.117
> 
> 标签：c#, coding-style

我喜欢并强烈推荐[Juval Lowy's](http://www.idesign.net) - [C# Coding Standard](http://www.idesign.net/Downloads/GetDownload/1985)。Juval 明确地避免了每个指令的基本原理，以保持标准严格（见前言）。但是，我发现自己对其中一些指令的基本原理感到好奇。

**Lowy 的 C# 标准中以下指令的具体原理是什么？**
希望对这些有硬（非主观）的答案。

***1.13 避免使用完全限定的类型名称。请改用“使用”语句。***
这是性能问题吗？有时我只需要一个完全限定名称的实例，而添加*using*似乎很繁重。

***1.26 在无参数匿名方法上使用空括号。仅当可以在任何委托上使用匿名方法时才省略括号。***
其实我只是被第二句话弄糊涂了。举例说明会有所帮助，谢谢。

***2.19 避免定义自定义异常类***
最小化它们的数量有哪些考虑？（如果您确实定义了它们（在 2.20 中），他接下来会给出指导方针。）

***2.29 避免使用三元条件运算符***
读者难以理解，还是其他考虑？

***2.31 避免在布尔条件语句中调用函数。分配给局部变量并检查它们。***
我不认为我这样做，但我很好奇......为什么不呢？

***2.47 避免与一名成员接触。***
因为总是/通常更喜欢做什么？一种方法接口何时起作用？

***2.53 更喜欢使用显式接口实现***
为什么？此外， [Jon Skeet 不同意这里](https://stackoverflow.com/questions/408415/why-explicit-interface-implementation)。

提前致谢！罗伯特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-16T19:41:48.853

**2.29 避免使用三元条件运算符** 我对三元运算符的“简单”使用没有任何问题，但建议不要以嵌套方式使用它：

```
// This is fine
x := (conditionA) ? true_resultA : false_resultA;

// This would probably be clearer using if-then-elseif
x := (conditionA) ? 
       ((conditionA1) ? true_resultA1 : (condition2) ? true_result2 : false_result2) :
       ((conditionA2) ? true_resultA2 : false_resultA2); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-16T19:39:29.937

显然，我不是 Juval，但我可以尝试这些

**1.13 避免使用完全限定的类型名称。请改用“使用”语句。**

性能在这里不是问题。我确定问题是可读性。

**1.26 在无参数匿名方法上使用空括号。仅当可以在任何委托上使用匿名方法时才省略括号。**

```
public delegate void Foo1();
public delegate void Foo2(int val);

public void Foo()
{
    Foo1 first = delegate { Console.WriteLine("Hello world"); };
    Foo2 second = delegate { Console.WriteLine("Hello world"); };
    Foo1 third = delegate() { Console.WriteLine("Hello world"); };
    Foo2 fourth = delegate() { Console.WriteLine("Hello world"); }; // does not compile
} 
```

如果没有括号，匿名委托可以应用于任何委托。使用括号，您可以具体说明代表的签名。除非您真的需要灵活性，否则首选第二种语法。

**2.19 避免定义自定义异常类**

同样，可读性是这里的问题。框架异常类丰富且易于理解。更换它们时要小心。

**2.29 避免使用三元条件运算符**

这是一个可读性和可扩展性的事情。我真的不同意，但这是一场标准的宗教斗争。

**2.31 避免在布尔条件语句中调用函数。分配给局部变量并检查它们。**

这部分是为了可读性，部分是为了便于调试。我已经开始将几乎所有内容分配给临时变量，以便稍后在调试器中轻松找到它们。

**2.47 避免与一名成员接触。**

“避免”有点像“喜欢”，他只是说三思而后行。如果您只有一个成员，那么界面是否真的在您的设计中建模了有用且完整的东西？很少有只有一个成员的课程，认真思考为什么你的界面会有所不同。

**2.53 首选使用显式接口实现**

这类似于尽可能使用最少公共访问器的想法。如果你的类不需要*公开*接口，那么它可能不应该。显然，根据您的设计，这将有很大不同，但鉴于大多数人只是在没有真正考虑的情况下将界面隐式化，这是值得考虑的建议。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-16T19:14:55.157

**1.26**是关于 pre-lambda`delegate { }`语法的。

```
// #1 Empty parenthesis on parameterless-anonymous methods would be:
delegate() { }
// #2 ... anonymous method could have been used on any delegate, is:
delegate { } 
```

请记住，后者可以分配给*任何*委托，而不管其参数如何。委托只是使用一些编译器技巧忽略这些。

如果您定义不带参数的委托，请使用 #1 明确说明。不要“因为你的代表不带任何参数而把括号放在外面”。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-16T19:28:48.070

这些指南中的许多都谈到了**良好软件设计的“质量属性”**（即可维护性、可靠性、可重用性、可测试性、可扩展性、可调试性、互操作性以及您可以命名的其他功能）。

通常人们创建的代码当时运行良好，但在考虑所有质量属性时可能不是最佳选择（在“这个软件**将来**可以去哪里”或“其他人也必须使用这个代码”的意义上） ）。

例如：

> *2.29 避免使用三元条件运算符*

*我对三元表达式本身*没有问题，但是通过编写如下代码：*int result = CheckMethod() ？OnTrueDoThis() : OnFalseDoThat()* ...你是说，“我有一个条件，如果为真（或假），你只能做**一件事**。” 整个构造**不鼓励可扩展性**。您必须重新创建构造（使用 if..else 语句）。

相似地...

> *2.31 避免在布尔条件语句中调用函数。分配给局部变量并检查它们。*

您调用了一个函数并基本上**“丢弃”了结果**以供以后使用。如果以后需要该信息，则必须再次调用该函数，或者必须重写代码结构。它还会使检查或记录结果（以供将来调试）更加困难。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-06-22T15:47:57.657

关于 1.13（避免完全限定的类型名称。改用“使用”语句）：

它可能不仅仅是可读性。如果你在文件的开头有太多的使用，你有一个类与来自太多命名空间的类耦合。

全班都在呼喊重构。使用 usings 而不是完全限定的类名可以让您更轻松地识别此类紧密耦合的类。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-06-16T19:07:59.663

这是我对您列出的问题的最佳尝试。对于那些我真的不能说的，我已经省略了。

**1.13 避免使用完全限定的类型名称。请改用“使用”语句。**

可读性。当您必须阅读完全限定的类型名称时，阅读代码肯定会更加困难。

**2.19 避免定义自定义异常类**

.NET 框架在系统中内置了一组很好的异常。除非您正在建模的异常是特定于业务领域的，否则您可能能够使用现有的异常类之一。

**2.29 避免使用三元条件运算符**

我认为这很可能是因为他认为人们可能不理解运营商，但我不同意。

**2.47 避免与一名成员接触。**

他可能会警告人们构建太薄的界面。但是，我实际上会反过来说，警告人们不要让界面过于冗长。如果您曾经处理过 ASP.NET MembershipProvider，您就会知道我在说什么。

**2.31 避免在布尔条件语句中调用函数。分配给局部变量并检查它们。**

我可以在这里想到几个原因。可读性。如果您在其中进行函数调用，它会使条件语句难以理解。此外，如果您不观看，则更难调试。

**2.53 首选使用显式接口实现**

我相信他的推理是为了简洁。但是，我实际上并不同意这种评价。我认为 Jon 是正确的，应尽可能使用隐式接口，并在适当时使用显式接口。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-16T19:09:14.433

以下是我敢于回答的一些反应：）

**1.13 避免使用完全限定的类型名称。请改用“使用”语句。** 我不同意。这当然与性能无关。它*可以*提高可读性，`var foo = new Foo()`但除此之外`var foo = new MyCompany.MyNamespace.Helpers.Xml.Foo()`- 不。

**2.19 避免定义自定义异常类** 这是胡说八道恕我直言。您应该避免创建派生自 ApplicationException 的自定义异常，但自定义异常没有任何问题（只要您不打算重新发明现有的异常）。

**2.29 避免使用三元条件运算符** 我不知道为什么这是一个指导方针。我读过并非所有人都使用它并且可能无法识别它，但这不是不使用有用运算符的正当理由。

**2.31 避免在布尔条件语句中调用函数。分配给局部变量并检查它们。** 在我看来，这只是一个可读性问题。

**2.47 避免与一名成员接触。** 我也不同意这里。不过，您应该避免使用“标记”接口 - 没有标记的接口，但谁只是服务于“...ble”的目的。但是，界面上的一种方法对我来说似乎很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-11-29T11:39:22.617

**2.29 三元运算符**

首先，如果您开始使用三元运算符，那么使用三元运算符而不是常规的 if-then-else 应该是有原因的。观察 ：

```
if (x == 0) {...} else{...} //A set of statements demand a regular If-then-else

//A simple assignment can be handled by the ternary operator
y = (x == 0)? 1 : 0 //this is readable and how it should be used

(x==0)? callSomething() : callSomethingElse() //this is NOT how it should be used 
```

三元语句用于返回两个值之一，具体取决于它正在评估的条件。这在进行 FP 时非常方便。对于不返回值的调用语句，您应该恢复为 if-then-else。

# asp.net - 如何在 ASP.NET 应用程序中管理 COM 访问

> ID：1003339
> 
> 赞同：1
> 
> 时间：2009-06-16T18:57:01.693
> 
> 标签：asp.net, com

我已经构建了 ASP.NET 应用程序。我需要使用第三方 COM 对象 SDK 来管理文档。该应用程序的名称是“交织”。根据 COM 对象文档，您应该“从不为每个应用程序创建多个 IManDMS 对象”。

因此，我决定创建 IManDMS 对象的一个​​实例并将其存储在 Application 变量中。这是我用来检索 IManDMS 对象的函数：

```
public static IManDMS GetDMS()
{
    IManDMS dms = HttpContext.Current.Application["DMS"] as IManage.IManDMS;
    if (dms == null)
    {
        dms = new IManage.ManDMSClass();
        HttpContext.Current.Application["DMS"] = dms;
    }
    return dms;
}

…
// Here is a code snippet showing its use
IManage.IManDMS dms = GetDMS();
string serverName = "myServer";
IManSession s = dms.Sessions.Add(serverName);
s.TrustedLogin();

// Do something with the session object, like retrieve documents.

s.Logout();
dms.Sessions.RemoveByObject(s);
… 
```

当一次只有一个人请求 .ASPX 页面时，上面的代码可以正常工作。当 2 个用户同时请求该页面时，我收到以下错误：

> [会话][添加]项目“SV-TRC-IWDEV”已存在于集合中

显然，您不能同时向 IManDMS 对象添加多个具有相同名称的会话。这意味着我只能在任何给定时间为整个应用程序打开一个会话。

假设我不能为每个应用创建多个 IManDMS 对象，是否有任何人有类似问题的经验并可以就如何解决此问题提出建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T19:19:28.943

您可以使用锁来确保只有一个会话同时访问该对象。我不确定 IManDSM 做了什么，但根据您的代码，看起来错误是由

```
IManSession s = dms.Sessions.Add(serverName); 
```

您正在向 Sessions 集合添加相同的名称。您可以尝试在 Sessions 集合中添加一个不同的名称，例如 SessionID 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-20T19:20:59.260

在 ASP.Net 中，您可以放心地将每个会话视为它自己的应用程序。以下是我多年来使用 IManage SDK 套件管理 Global.asax 文件中的会话的逻辑：

```
void Session_Start(object sender, EventArgs e) 
{
    // Code that runs when a new session is started
    ManDMS clientDMS =
        new ManDMSClass();
    clientDMS.ApplicationName = "My App Name";
    IManSession clientSession =
        clientDMS.Sessions.Add(
        ConfigurationManager.AppSettings["DMS Server"]);
    clientSession.MaxRowsForSearch = 750;
    clientSession.AllVersions = false;

    // Save the configured session for use by the user
    Session.Add("Client.Session", clientSession);

}

void Session_End(object sender, EventArgs e) 
{
    // Code that runs when a session ends. 
    // Note: The Session_End event is raised only when the sessionstate mode
    // is set to InProc in the Web.config file. If session mode is set to StateServer 
    // or SQLServer, the event is not raised.
    IManSession clientSession =
        (IManSession)Session["Client.Session"];
    try
    {
        if (clientSession.Connected)
            clientSession.Logout();
    }
    catch (System.Runtime.InteropServices.COMException cex)
    {
        // Ignore COMException if user cannot logout
    }
    clientSession.DMS.Close();
} 
```

这样做的好处是会话设置/拆卸与 ASP.Net 会话相关联，该会话充分管理会话，并为用户提供了一些极大的速度优势。

每当您需要访问 Session 对象时，只需在您的 ASP.Net 页面或回发中使用以下代码：

```
IManSession clientSession =
        (IManSession)Session["Client.Session"]; 
```

# hl7 - Mirth：动态确定调用哪个 SOAP 方法

> ID：1003341
> 
> 赞同：0
> 
> 时间：2009-06-16T18:57:04.783
> 
> 标签：hl7, mirth

考虑一个带有 SOAP Sender 目的地的 Mirth 通道。WSDL 已成功加载并且有不止一种方法可用。每种方法将采用不同数量的参数。示例方法：

*   `AddPerson()`
*   `UpdatePerson()`
*   `DeletePerson()`
*   `MergePerson()`
*   `UnmergePerson()`

给定一组 HL7 消息事件类型，即

*   A28 = 添加人员
*   A31 = 更新人员
*   A29 = 删除人员
*   ETC

**问题**：您将如何在 Mirth 中设置一个目标以让变量的值确定调用哪个 SOAP 方法？

它不一定是 SOAP Sender。可以是任何类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-26T05:10:26.990

我不确定您是否可以动态选择方法，但您可以为每个 MessageType 设置一个目标并使用过滤器来确保将消息路由到正确的目标（方法）。

我将研究动态选择。也许该方法可以通过 javascript 转换器对象获得。

# c# - ObservableCollection PropertyChanged 事件

> ID：1003344
> 
> 赞同：11
> 
> 时间：2009-06-16T18:58:10.507
> 
> 标签：c#, wpf, mvvm, observablecollection, propertychanged

我想子类化为`ObservableCollection`它添加一个属性。不幸的是，该`PropertyChanged`事件受到保护。基本上，我想对它进行子类化，`SelectedItem`以便在我的 MVVM WPF 应用程序中为列表绑定一个。

这是我班级的骨架：

```
public class SelectableList<T> : ObservableCollection<T>
{
    public T SelectedItem {get;set;}
} 
```

但我不能执行以下操作：

```
SelectableList<int> intList = new SelectableList<int>();
intList.PropertyChanged += new PropertyChangedEventHandler(intList_Changed); 
```

因为访问限制。这使我提出了一个更深层次的问题。UI 如何通知`PropertyChanged`事件（例如 Count 属性）？请注意，我不能在代码隐藏中做到这一点。

头晕脑胀，有大神能指教一下吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-16T19:14:47.530

```
SelectableList<int> intList = new SelectableList<int>();
((INotifyPropertyChanged)intList).PropertyChanged += 
    new PropertyChangedEventHandler(intList_Changed); 
```

ObservableCollection[显式实现了 INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)，这意味着您必须先将实例转换为接口，然后才能访问接口的方法、属性和事件。至于为什么这样做，我不知道。[Binding 标记扩展](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.aspx)不“知道” ObservableCollections 或任何其他类型。它检查类型以查看它们是否实现或扩展特定接口/基类（INPC、INCC、DependencyObject 等），因此不关心接口是否显式实现。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2011-03-29T20:59:41.897

ObservableCollection (int .NET 3.5) 似乎以一种[有趣的方式](http://msdn.microsoft.com/en-us/library/ak9w5846%28v=vs.80%29.aspx)实现了 PropertyChanged 事件。

```
protected event PropertyChangedEventHandler PropertyChanged;

event PropertyChangedEventHandler INotifyPropertyChanged.PropertyChanged; 
```

这意味着受保护的*PropertyChanged*事件可能仅用于内部实现。另一个**INotifyPropertyChanged.PropertyChanged**事件实际上是作为[显式接口实现](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)*INotifyPropertyChanged*接口的事件。奇怪的是，我在 ObservableCollection 中没有看到实际引发*INotifyPropertyChanged.PropertyChanged的​​任何地方。*这可能表明这是 .NET 3.5 中的一个错误，尽管我尚未测试以确认在将项目添加到集合时是否会为 Count 引发属性更改事件，但这似乎是它应该如何工作.

 *在 .NET 4.0 实现中，*INotifyPropertyChanged.PropertyChanged事件似乎与受保护的**PropertyChanged*事件使用的同一私有委托挂钩，这可能是一个错误修复。这也可能只是由于[.NET 4.0 中自动事件实现的处理方式不同](http://blogs.msdn.com/b/cburrows/archive/2010/03/18/events-get-a-little-overhaul-in-c-4-part-iii-breaking-changes.aspx)。

**更正：**我已验证*INotifyPropertyChanged.PropertyChanged*事件是由 ObservableCollection 引发的，因此我上面基于使用 Reflector 查看 ObservableCollection 实现的结果所做的假设一定是不准确的。我的猜测是反射器正在做一些奇怪的错误，我还没有证据。

因此，要使您的示例正常工作，您需要为此编写代码，就像下面的示例一样，正如 Will 在他的回答中所展示的那样。

```
SelectableList<int> intList = new SelectableList<int>();
((INotifyPropertyChanged)intList).PropertyChanged += 
    new PropertyChangedEventHandler(intList_Changed); 
```

很有趣吧？使用显式接口主要用于避免给定接口所需的成员中不可避免的冲突，但它们可以用来在某种意义上隐藏成员的存在。

如果您想为您在子类中引入的自定义属性引发属性更改事件，请查看覆盖和/或调用ObservableCollection 也实现的受保护的**OnPropertyChanged方法。**这种技术是一种被广泛采用的标准，它允许子类在不访问底层事件委托的情况下引发事件或处理事件。顺便说一下，通常更喜欢使用这种技术，而不是让子类挂钩事件处理程序到它自己的基类事件。有关更多示例，请查看如何在 WinForms 和 WPF 中实现各种控件中的事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T06:23:01.880

我试图在

```
public class ResultCollection<T> : ObservableCollection<T>
{

        Boolean _val;
        public Boolean Val
        {   
            get
            {   
                return _val;
            }
            set
            {   
                _val= value;
                OnPropertyChanged(new PropertyChangedEventArgs("Val"));
            }
        }
} 
```

我真的没有注意到**PropertyChanged**被定义为**protected**。最后将 Val 属性移至 ViewModel。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T19:16:05.763

UI 可以并且确实会收到通知。这**只是**ObservableCollection 的限制，它将 PropertyChanged 事件定义为受保护的。

FWIW，我认为您最好不要单独留下 ObservableCollection 并为您的虚拟机添加另一个属性。*

# asp.net-mvc - 当我从 ASP.NET MVC 提供文件时，为什么 Chrome 会搜索我的 favicon.ico？

> ID：1003350
> 
> 赞同：15
> 
> 时间：2009-06-16T19:00:03.403
> 
> 标签：asp.net-mvc, favicon

我在 MVC 中有一个控制器，用于从数据库中提供图像。

**编辑：**如果我在 MVC 中通过完全标准的方式提供文件，这仍然会发生。

每次我请求我的图片时，谷歌浏览器也会搜索我的 favicon.ico。

为了避免对“我也应该关心”的其他​​事情进行不必要的讨论，让我们假设在这个示例中我不关心缓存，并且我将始终返回带有文件的 HTTP 响应 200。

在我的控制器中，我返回以下内容：

```
return File(fileBytes, contentType); 
```

检查 Fiddler 2 后，会生成以下响应：

> HTTP/1.1 200 OK
> 缓存控制：公共
> 内容类型：image/gif
> ETag：oYu19wKo+KEHkyxZQ2WXAA==
> 服务器：Microsoft-IIS/7.0
> X-AspNetMvc-Version：1.0
> X-AspNet-Version：2.0.50727
> X-Powered -作者：ASP.NET
> 日期：2009 年 6 月 16 日星期二 18:48:45 GMT
> 内容长度：29344

相比之下，当我（第一次）请求 Google 徽标时，这是来自 Google 的 Fiddler 的响应：

> HTTP/1.1 200 OK
> 内容类型：image/gif
> 最后修改时间：2006 年 6 月 7 日星期三 19:42:34 GMT
> 日期：2009 年 6 月 16 日星期二 18:50:54 GMT
> 到期时间：2010 年 6 月 16 日星期三 18:50 :54 GMT
> 缓存控制：公共，最大年龄 = 31536000
> 服务器：gws
> 内容长度：8706
> 年龄：2

但是，在 Chrome 中获取我的图像后，Chrome 会尝试找到我的 favicon.ico。请求 Google 徽标后不会尝试此操作*。*

任何想法为什么会发生这种情况？根据我对 HTML 的理解，答案必须在响应标头中，因为这肯定是客户端必须进行的全部操作吗？请纠正我！

**编辑2：**似乎很多人完全误解了这个问题。*问题**不**在于缺少 favicon 和 MVC 中的错误请求 - 这是在仅加载图像时请求 favicon 的问题，内容类型为“IMAGE/JPEG”，而不是网页内容“文本/HTML”的类型！！*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-07-13T12:50:10.567

这与 MVC 无关。我正在使用带有自定义构建日志服务的网络表单，我偶然发现了这篇文章，想知道为什么我的日志中出现连续的“文件不存在”错误。这是在我的本地开发机器上，我的项目中没有 favicon.ico 文件，我尝试过 IE、Firefox 和 Google 试图查看哪个浏览器是有罪的一方。

**Google Chrome 对我的应用程序的每个请求都会请求 favicon.ico**。我不得不开始在本地记录浏览器，以确定罪魁祸首实际上是谷歌浏览器。如果它打扰你，我会联系谷歌。我只是想确保它不是感染我的 chrome 的新木马。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-04-20T19:54:22.000

## 实际答案：这是一个已知的、经过验证的错误。*（*最近修复！...也许？）*

看起来像是 Chrome 的一个已知的、长期存在的问题：http: [//crbug.com/39402](http://crbug.com/39402)

如果您想尽快修复它，请给问题加注星标。更多人关注该问题可能会提高其优先级，并可能更快地修复它。

* * *

****更新 1 ***：截至今年 5 月 15 日（2013 年）——在这个问题被问到四年后——看起来这个问题已经在第 29 版中得到修复：http: [//crbug.com /39402#c47](http://crbug.com/39402#c47)

随意撤消所有黑客和解决方法。:]

****更新 2 (2015-01)***：根据相同的问题链接，这显然对某些用户来说仍然是一个问题。：/

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-17T06:25:33.883

您可以做的一件事是让 MVC 忽略对 *.ico 的任何请求，以便在调试时不会出现任何异常。

应该是这样的：

```
routes.MapRoute("ignore-favicon", "{*path}", null, new {path = ".*/favicon\\.ico"}); 
```

该 URL 模式匹配所有内容，但随后我们将其限制为仅匹配以 favicon.ico 结尾的任何内容。（我没有测试过这个）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-16T19:29:44.807

你有网站图标吗？如果没有，也许这就是 Chrome 每次都试图为您的网站找到它的原因。对于谷歌，它已经缓存了网站图标。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-17T06:29:48.697

我不久前遇到了这个问题，并通过添加忽略特定路线来解决它

```
routes.IgnoreRoute("{*favicon}", new { favicon = ".*/favicon\\.ico" }); 
```

进入 Global.asax 中的 RegisterRoutes 方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-12-14T13:46:55.970

您可以在`web.config`文件中添加类似的内容，以确保`favicon.ico`缓存在客户端上并且不会每次都被请求。

```
<location path="favicon.ico">
    <system.webServer>
        <httpProtocol>
            <customHeaders>
                <add name="Cache-Control" value="public, max-age=31536000" />
             </customHeaders>
        </httpProtocol>
    </system.webServer>
</location> 
```

您可以/应该对任何图像/.js 和 css 文件执行相同的操作

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-12-06T03:38:11.450

在我看来，Chrome 为其自己的选项卡请求了一个网站图标——我一直收到 404（因为我的网站图标在其他地方而且我的页面知道），直到我做了一些测试并意识到它是 Chrome 直接向网站图标文件发出请求。除了重写我猜的真实文件之外没有真正的修复

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-17T05:54:01.017

Chrome 浏览器可以以不同于其他任何网站的方式与 Google 网站一起使用，因此，首先，我建议检查它是否每次都在其他地方查找 favicon.ico，例如在 StackOverflow 上。

我还会检查 Firefox 是否对您的网站执行相同操作。我认为 favicon.ico 应该在每次浏览器运行时只被请求一次，即使它不存在于网站上。这可能是您使用的 Chrome 版本中的错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-07-13T12:55:17.090

[这个](https://stackoverflow.com/questions/487230/serving-favicon-ico-in-asp-net-mvc)SO question/answer 解释了如何使用路由将 Favicon 提供给浏览器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-16T19:34:52.533

您应该设置 Expires 标头来告诉浏览器应该使用其本地副本多长时间。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-16T19:37:33.107

如果您检查项目设置，它会在某处显示默认图标。去掉那个？

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-11-21T05:44:20.927

将 ICON 链接放入您的母版页很重要，否则某些浏览器会尝试为所有目录查找 favicon.ico，而不是每次完成一次全局查找。

```
 <link rel="SHORTCUT ICON" href="<%= Url.Content("~/content/images/rr-favicon.ico") %>"/> 
```

从我的日志（当然还有 IE6）来看，谷歌工具栏似乎是有罪的一方。他们都将对根目录以外的目录发出请求

```
 Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)
 Mozilla/4.0 (compatible; GoogleToolbar 6.2.1910.1554; Windows 6.0; MSIE 8.0.6001.18828) 
```

# asp.net - 标签列表 asp.net 或 javascript？

> ID：1003354
> 
> 赞同：0
> 
> 时间：2009-06-16T19:00:41.140
> 
> 标签：asp.net, javascript, tags

我想在我的 web 应用程序中添加一个 taglist。我有一个带有整数的标签列表，表示每个标签的受欢迎程度。

许多 Web 应用程序使用不同的字体大小显示标签及其流行度。

因为它被广泛使用，我认为他们是一个显示这个的插件。

我所说的标签列表的一个例子可以在这里找到：http: [//www.flickr.com/photos/tags/](http://www.flickr.com/photos/tags/)

你们中有人知道处理这个问题的某种插件吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T19:14:08.390

您要创建的内容称为“标签云”。

CodeProject 上有一个控件/教程，可在[http://www.codeproject.com/KB/custom-controls/cloud.aspx找到](http://www.codeproject.com/KB/custom-controls/cloud.aspx)

或 Rolla 的四个人有一个教程，可以在 [http://aspnet.4guysfromrolla.com/articles/102506-1.aspx找到](http://aspnet.4guysfromrolla.com/articles/102506-1.aspx)

# .net - Mono .NET 框架和 WMI

> ID：1003355
> 
> 赞同：7
> 
> 时间：2009-06-16T19:00:42.653
> 
> 标签：.net, mono, wmi

我们有一个使用 WMI 的 .NET 项目，并且有兴趣将其移植到 Mono 框架。

看来 Mono 不支持 WMI。

有没有可以添加 WMI 支持的库？

基本上，我们希望从 Linux/OS X 机器上使用 WMI 访问 Windows 服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T22:33:02.673

关于基于 HTTP 的 WMI，请查看[WinRM](http://msdn.microsoft.com/en-us/library/aa384470(VS.85).aspx)，它似乎是XP、Win2003、Win2008 和 Vista的[WS-Management实现。](http://en.wikipedia.org/wiki/WS-Management)这定义了一种通过 HTTP(S) (SOAP) 访问[公共信息模型](http://en.wikipedia.org/wiki/Common_Information_Model_(computing))(CIM) 信息的方法。CIM 由[DMTF](http://www.dmtf.org)定义，WMI 是 Microsoft 的 CIM 实现。

如果我正确地阅读了字母汤，您应该能够使用 Linux 中的 SOAP 来访问 Windows 机器上的 WinRM（WS-Management），从而提供对 WMI 的访问（只要 WinRM 已安装、运行且没有防火墙）。

IT / 安全是否允许在公司网络上运行这样的东西完全是另一回事：任何开放的端口都可能存在安全风险，而允许通过设计进行命令、控制和配置的端口可能是一个很大的漏洞。证书、IPSec 和范围防火墙规则是您的朋友！

请注意，我没有使用 WS-Management 的直接经验，也没有 WinRM，所以[YMMV](http://www.urbandictionary.com/define.php?term=YMMV)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T19:23:35.033

Windows Management Instrumentation 是 WBEM（[基于 Web 的企业管理](http://en.wikipedia.org/wiki/Web-Based_Enterprise_Management)）的 Microsoft 实现。

有一些开源实现（例如[openPegasus](http://www.openpegasus.org/)），您可能可以使用客户端，但不知道 MS 对他们的版本做了什么。如果您可以将 CIM 查询发送到服务器，那么您可能会得到很好的结果。

请注意，Windows 不会通过 http 执行 WMI，只有 DCOM/DCE-RPC，因此某些客户端将无法工作。快速 google.. 和 OpenPegasus 将允许您使用[WMI Mapper](http://www.docs.hp.com/en/418811-002/ch06s08.html)访问 Windows 。如果没有，您总是可以在 Windows 上运行服务器组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-16T12:00:15.387

我知道你可以在 Linux 上安装 wmi-client (sudo apt-get install wmi-client)。您应该能够使用此命令从 Linux 命令行查询 Windows 机器上的任何 wmi 对象。

# sqlite - SQLite问题选择两列作为一列

> ID：1003358
> 
> 赞同：42
> 
> 时间：2009-06-16T19:00:55.493
> 
> 标签：sqlite

带有 empname 和 empdpt 的基本表。
在 Sql Server 表中，我可以做`Select empname + ' ' + empdpt as expr1`没有问题。
不能用 Sqlite 做同样的事情！！
当我尝试合并两列 [with data] 时，我得到一个 0。
我在 sqliteman 和 sqliteadmin 以及 VS 中的服务器资源管理器中尝试过。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2009-06-16T19:05:42.147

尝试使用以下内容：

```
SELECT ("test" || " " || "test2") AS expr1 ; 
```

**更新**

如果这些是列，您可以执行类似的操作： SELECT (column1 || " " || column2) AS expr1 FROM your_table;

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-06-16T19:06:51.443

```
Select empname || " " || empdpt as expr1 
```

sqllite concat 与 PostGreSQL ( || ) 相同，而不是 MYSQL 或 MSSQL 'CONCAT'

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-23T08:39:41.797

对于那些试图使用@merkuru（工作）解决方案的人

> SELECT (column1 || " " || column2) AS expr1 FROM your_table;

在 Eclipse 或其他编辑器中：

你必须用 \ 取消 "

就像是：

> SELECT (column1 || \" \" || column2) AS expr1 FROM your_table;

这是完美的作品

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-20T13:35:18.783

**这在 where 子句中对我有用：**

```
SELECT * FROM table_name WHERE(first_name || last_name) LIKE comparison_string; 
```

# programming-languages - 什么是芥末？

> ID：1003359
> 
> 赞同：12
> 
> 时间：2009-06-16T19:01:07.210
> 
> 标签：programming-languages

在[Joel Spolsky 的博客上](http://www.joelonsoftware.com/)，我经常阅读有关“Wasabi”的内容，如果我查看 Wikipedia，它会提到[它是一种内部编程语言](http://en.wikipedia.org/wiki/FogBugz#Wasabi)。

它是什么？他们为什么使用它？为什么不公开？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-16T19:02:32.200

我将从[芥末的起源](https://web.archive.org/web/20111124130043/http://blog.fogcreek.com/the-origin-of-wasabi/)开始：

> 作为 Wasabi 的主要开发者和维护者，我一直想写一系列关于 Wasabi 的文章，上周，我决定和 Joel 谈谈这件事。今天，我将从该语言的简短历史开始，稍后，我将讨论它的一些更酷的特性以及我们希望在未来将它带到哪里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-15T03:30:05.743

这是 2013 年的最新更新：

> 起初，有蓟。Thistle 充其量只是一个将 ASP 转换为 PHP 的美化正则表达式。它是由实习生写的，它显示出来了。
> 
> 后来，Thistle 被扩展为一个 ASP 到 PHP 的编译器。编译器仍然是一个松散的术语。仍然有很多正则表达式魔术依赖于您遵循匈牙利应用程序符号。也就是说，我相当有信心这个版本的 Thistle 确实为代码生成构建了 AST，这确实意味着它可以作为真正的编译器。
> 
> 这很重要，因为这个版本的 Thistle 扩展了两个附加功能：它可以将 VBScript 编译为 JavaScript，并且它为 VBScript 添加了一些便利，例如宏（称为[图片函数](http://blog.fogcreek.com/wasabi-how-do-i-picture-functions/)（不要问））、lambdas 和对申报制度。不要对前者笑太多；动机与 RJS 或 Seaside 的 JavaScript 支持相同。这三种技术现在都死了，而且有充分的理由，但当时它很时髦。
> 
> 后来，当 .NET 出现并且 VBScript 被淘汰时，这让我们可以选择重写整个东西……或者制作一个可以将 VBScript 编译为 .NET 的“真正的”编译器。芥末诞生了。Wasabi 被编写为可以将 VBScript 转换为 C# 和（出于遗留原因；见上文）JavaScript 的适当编译器。与 Thistle 不同，Wasabi 是一个真正的、成熟的编译器，在 CS 意义上，因此添加类型推断、lambda 表达式和其他一些细节是可行的，而无需花费太多精力。也就是说，这里的目标是允许转换：有限制的新组件可以用 C# 编写。这个想法是，至少希望芥末会逐渐被弃用。
> 
> 所以不行。它从来都不是一种新的语言。它始终旨在成为垫脚石，语言之间的翻译，而不是本身的真正语言。虽然它获得了一些额外的功能，但那是为了让在该死的东西上工作变得可口——而不是本身就成为一种真正的语言。如果你有一个真正的编译器，发出 C# 和 .NET IL 实际上同样容易，但是 Wasabi 总是发出 C#，特别是为了有一天我们可以放弃整个事情。

[https://news.ycombinator.com/item?id=5281930](https://news.ycombinator.com/item?id=5281930)

另见[https://news.ycombinator.com/item?id=5281322](https://news.ycombinator.com/item?id=5281322)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T19:02:48.190

它是 Fog Creek 制作和使用的语言。它基于 VBScript。

# c++ - 完整的 C++ i18n gettext() "hello world" 示例

> ID：1003360
> 
> 赞同：18
> 
> 时间：2009-06-16T19:01:12.840
> 
> 标签：c++, linux, internationalization, gettext

我正在寻找一个完整的 i18n `gettext()`hello world 示例。我已经根据G. Mohanty 的[使用 GNU gettext 的本机语言支持教程开始了一个脚本。](http://oriya.sarovar.org/docs/gettext_single.html)我正在使用 Linux 和 G++。

代码：

```
cat >hellogt.cxx <<EOF
// hellogt.cxx
#include <libintl.h>
#include <locale.h>
#include <iostream>
#include <cstdlib>
int main (){
    char* cwd = getenv("PWD");
    std::cout << "getenv(PWD): " << (cwd?cwd:"NULL") << std::endl;
    char* l = getenv("LANG");
    std::cout << "getenv(LANG): " << (l?l:"NULL") << std::endl;
    char* s = setlocale(LC_ALL, "");
    std::cout << "setlocale(): " << (s?s:"NULL") << std::endl;
    std::cout << "bindtextdomain(): " << bindtextdomain("hellogt", cwd) << std::endl;
    std::cout << "textdomain(): " << textdomain( "hellogt") << std::endl;
    std::cout << gettext("hello, world!") << std::endl;
}
EOF
g++ -ohellogt hellogt.cxx
xgettext -d hellogt -o hellogt.pot hellogt.cxx
msginit --no-translator -l es_MX -o hellogt_spanish.po -i hellogt.pot
sed --in-place hellogt_spanish.po --expression='/#: /,$ s/""/"hola mundo"/'
sed --in-place hellogt_spanish.po --expression='s/PACKAGE VERSION/hellogt 1.0/'
mkdir -p ./es_MX/LC_MESSAGES
msgfmt -c -v -o ./es_MX/LC_MESSAGES/hellogt.mo hellogt_spanish.po
export LANG=es_MX
ls -l $PWD/es_MX/LC_MESSAGES/hellogt.mo
./hellogt
strace -e trace=open ./hellogt 
```

程序编译，提取文本，创建西班牙文文件，修改并创建二进制文件，但 hellogt 仍然显示英文。跟踪没有显示在当前工作目录中查找 es_MX 的证据，也没有任何对 LC_MESSAGES 目录的引用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-06-20T17:37:14.540

您的问题是`hellogt.mo`位置错误 - 您的程序实际上并没有打开它。`strace`您可以通过使用跟踪`open`系统调用来告诉这一点：

```
strace -e trace=open ./hellogt
...
open("/tmp/.//es_MX/LC_MESSAGES/hellogt.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/tmp/.//es/LC_MESSAGES/hellogt.mo", O_RDONLY) = -1 ENOENT (No such file or directory) 
```

您可以使用环境变量影响 gettext 在哪里查找消息目录`LOCPATH`，但是如果您将它移动到 gettext 尝试从您的示例中加载它的位置：

```
mkdir -p es/LC_MESSAGES
cp hellogt.mo es/LC_MESSAGES
./hellogt 
hola mundo 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-23T15:34:09.033

```
cat >hellogt.cxx <<EOF
// hellogt.cxx
#include <libintl.h>
#include <locale.h>
#include <iostream>
int main (){
    setlocale(LC_ALL, "");
    bindtextdomain("hellogt", ".");
    textdomain( "hellogt");
    std::cout << gettext("hello, world!") << std::endl;
}
EOF
g++ -o hellogt hellogt.cxx
xgettext --package-name hellogt --package-version 1.2 --default-domain hellogt --output hellogt.pot hellogt.cxx
msginit --no-translator --locale es_MX --output-file hellogt_spanish.po --input hellogt.pot
sed --in-place hellogt_spanish.po --expression='/"hello, world!"/,/#: / s/""/"hola mundo"/'
mkdir --parents ./es_MX.utf8/LC_MESSAGES
msgfmt --check --verbose --output-file ./es_MX.utf8/LC_MESSAGES/hellogt.mo hellogt_spanish.po
LANGUAGE=es_MX.utf8 ./hellogt 
```

以下是上述创建的文件的描述：

```
hellogt.cxx         C++ source file
hellogt             Executable image
hellogt.pot         Extracted text from C++ source file (portable object template)
hellogt_spanish.po  Modified text for Spanish with translations added (using sed)
es_MX.utf8/
 LC_MESSAGES/
   hellogt.mo       Binary translated text for Spanish used at run-time 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-03-23T04:09:26.393

这是 Fedora 项目中对 gettext 的描述。这很容易遵循。但它在 C 中。

[http://fedoraproject.org/wiki/How_to_do_I18N_through_gettext](http://fedoraproject.org/wiki/How_to_do_I18N_through_gettext)

# c# - 使用 Rijndael 在 Java 中加密和在 C# 中解密

> ID：1003365
> 
> 赞同：4
> 
> 时间：2009-06-16T19:02:26.520
> 
> 标签：c#, java, encryption, rijndaelmanaged, aes

使用 Rijndael 算法是否可以加密配置文件（或配置文件中的部分），然后在 Java 中解密该文件？可以做出如下假设：

1.  传入 IV（不是自动生成的想法 :: GenerateIV(); ）
2.  传入密钥
3.  BlockSize 为 128（标准）

假设可以做到这一点，我的下一个问题是：

1.  keySize 可以是 256 吗？我知道 128 是 AES，但我们想使用 256。我也不知道 Java 是否有 256 的提供程序，或者我是否需要使用 BouncyCastle
2.  什么是填充？PKCS7？
3.  我假设 CiperMode 将是 CBC

在 c# 中有这样的东西吗？但是，不知道它是否可以用 Java 解密......也许甚至我的 c# 是错误的？

```
public static void initCrypt()
    {
        byte[] keyBytes = System.Text.UTF8Encoding.UTF8.GetBytes("abcdefghijklmnop");

        rijndaelCipher = new RijndaelManaged();
        PasswordDeriveBytes pdb = new PasswordDeriveBytes(keyBytes, new SHA1CryptoServiceProvider().ComputeHash(keyBytes));
        byte[] key = pdb.GetBytes(32);
        byte[] iv = pdb.GetBytes(16);
        rijndaelCipher.Mode = CipherMode.CBC;
        rijndaelCipher.Padding = PaddingMode.PKCS7; //PaddingMode.PKCS7 or None or Zeros
        rijndaelCipher.KeySize = 256; //192, 256
        rijndaelCipher.BlockSize = 128;
        rijndaelCipher.Key = keyBytes;
        rijndaelCipher.IV = iv;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T20:12:00.493

我会检查诸如[keyczar 之](http://www.keyczar.org/)类的外部库是否支持这一点。

正如 Jeff Atwood最近[在他的博客](http://www.codinghorror.com/blog/archives/001275.html)[中告诉我们](http://www.codinghorror.com/blog/archives/001267.html) 的那样，99% 的开发人员不应该关心加密例程的低级细节（因为我们可能会把它们搞砸）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:13:48.547

根据您对该配置文件的使用情况，您可能需要使用外部程序。

例如，如果您想在配置文件驻留在磁盘时对其进行保护，但您可以在程序运行时将其内容保存在内存中，您可以使用[gpg](http://www.gnupg.org/)加密文件，然后使用 a 将其解密到内存中程序启动时需要的用户提供的密码，然后在关闭程序时清除内存。 [1]

[1] 值得注意的是，由于内存分页等原因，没有真正的方法可以*保证*内容不会写入磁盘。这取决于操作系统和许多因素，如果您对它感兴趣，可以查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-23T15:32:43.127

Q1 : 必须是 128 否则你将不得不使用 BouncyCastle

Q2 : 是 PKCS7

Q3 : 是的 CBC

如果你的问题没有死，我可以给你工作示例 c# 和 java

# c# - 在不使用图形对象的情况下测量字符串？

> ID：1003370
> 
> 赞同：43
> 
> 时间：2009-06-16T19:03:09.593
> 
> 标签：c#, text, fonts, gdi+

我使用像素作为字体的单位。在一个地方，我正在执行命中测试以检查用户是否在屏幕上某些文本的边界矩形内单击。我需要为此使用类似`MeasureString`的东西。不幸的是，执行命中测试的代码在一个库的深处，它无法访问`Graphics`对象甚至`Control`.

如何在不使用`Graphics`类的情况下获取给定字体的字符串的边界框？`Graphics`当我的字体以像素为单位时，为什么我什至需要一个对象？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-06-16T19:17:59.787

如果您有对 System.Windows.Forms 的引用，请尝试使用 TextRenderer 类。有一个静态方法 (MeasureText)，它接受字符串和字体并返回大小。 [MSDN 链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.textrenderer.aspx)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-06-16T19:26:29.023

您无需使用用于渲染的图形对象来进行测量。您可以创建一个静态实用程序类：

```
public static class GraphicsHelper
{
    public static SizeF MeasureString(string s, Font font)
    {
        SizeF result;
        using (var image = new Bitmap(1, 1))
        {
            using (var g = Graphics.FromImage(image))
            {
                result = g.MeasureString(s, font);
            }
        }

        return result;
    }
} 
```

根据您的情况设置位图的 dpi 可能是值得的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-08T10:51:01.643

`MeasureString`@NerdFury 答案中的方法将提供比预期更高的字符串宽度。您可以在 [此处](https://stackoverflow.com/questions/1203087/why-is-graphics-measurestring-returning-a-higher-than-expected-number)找到其他信息。如果您只想测量物理长度，请添加以下两行：

```
g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
result = 
  g.MeasureString(measuredString, font, int.MaxValue, StringFormat.GenericTypographic); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-17T20:17:11.587

这个例子很好地说明了 FormattedText 的使用。FormattedText 为在 Windows Presentation Foundation (WPF) 应用程序中绘制文本提供低级控制。您可以使用它来测量具有特定字体的字符串的宽度，而无需使用 Graphics 对象。

```
public static float Measure(string text, string fontFamily, float emSize)
{
    FormattedText formatted = new FormattedText(
        item, 
        CultureInfo.CurrentCulture, 
        System.Windows.FlowDirection.LeftToRight, 
        new Typeface(fontFamily), 
        emSize, 
        Brushes.Black);

    return formatted.Width;
} 
```

包括 WindowsBase 和 PresentationCore 库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-26T18:13:23.083

这可能不是其他人的重复，但我的问题也是不需要的 Graphics 对象。听了上面的挫折后，我简单地尝试了：

```
Size proposedSize = new Size(int.MaxValue, int.MaxValue);
TextFormatFlags flags = TextFormatFlags.NoPadding;
Size ressize = TextRenderer.MeasureText(content, cardfont, proposedSize, flags); 
```

（其中 'content' 是要测量的字符串，而 cardfont 是它所在的字体）

...并且很幸运。我可以使用结果来设置 VSTO 中列的宽度。

# hibernate - 具有受限关联的休眠条件查询

> ID：1003371
> 
> 赞同：0
> 
> 时间：2009-06-16T19:03:16.223
> 
> 标签：hibernate, join

这里的用例是找到一些具有一定范围长度的风筝的受限男孩集合，然后有选择地检索该范围内属于这些男孩的所有风筝。

不要以为我对 SQL 或 Hibernate 了解很多。

我想形成一个 Hibernate Criteria 查询，其中关联的集合受到限制。例如，假设我有一个 Boy 类，它与 Kites 类具有双向的一对多关联。我想获得风筝长度在一定范围内的男孩名单。

我可以通过 HQL 查询获得满足此目标的字段（但不是男孩）：

```
select Boy.name from Boy 
       inner join Kite on Boy.id=Kite.boyId 
             where length >= 1; 
```

然而，这种使用 Criteria 的尝试总是返回 list.size() 为零（即使 Boy Huck 有一系列长度为 0.1-2.0 的风筝）：

```
Criteria crit = session.createCriteria(Boy.class);
crit.add(Restrictions.eq("name", "Huck"))
    .createCriteria("kites")
    .add(Restrictions.ge("length", new BigDecimal(1.0)));
List list = crit.list(); 
```

理想情况下，另外，对于这个列表中的每个男孩（假设我的代码有效！）我希望 boy.getKites() 中的所有风筝都满足长度限制。这第二个目标可能是一厢情愿。

我对我的 Criteria 尝试的问题的猜测是连接不正确：我看到了 ff.，但不知道如何解决它。

```
Hibernate: 
    select
        this_.id as id3_1_,
        this_.name as name3_1_,
        ...
        kites1_.id as id4_0_,
        kites1_.boyId as boyid2_4_0_,
        kites1_.length as length3_4_0_,
        ...
    from
        Boy this_ 
    inner join
        Kite kites1_ 
            on this_.id=kites1_.id         <--- Should be =boyid?
    where
        this_.name=? 
        and kites1_.length>=? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T04:16:01.423

尝试更改为

```
Criteria crit = session.createCriteria(Boy.class);
crit.add(Restrictions.eq("name", "Huck"))
    .createAlias("kites", "k")
    .add(Restrictions.ge("k.length", new BigDecimal(1.0)));
List list = crit.list(); 
```

或在 HQL 中显式编写：

```
Query query = HibernateUtil.getSession().createQuery("SELECT b FROM Boy b INNER JOIN b.kites k WHERE b.name=:name AND k.length>=:length");
query.setString("name", "Huck");
query.setBigDecimal("length", BigDecimal.ONE); 
```

如果它不起作用，则说明 Boys-Kites 映射存在问题（hibernate 相信两个表中的连接列都是“id”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T04:13:16.590

感谢您的回答。这实际上是一个由两部分组成的问题：为什么我的 Criteria 查询不起作用以及如何获得受限的关联集。第一部分是通过修复我指出的连接错误来解决的，FoxyBOA 鼓励我去寻找。

我在[这里](https://stackoverflow.com/questions/1016311/query-for-restricting-associated-entities)再次提出的第二个更有趣的问题。

# .net - 如何判断 .NET 编译的代码是否使用 p/invoke？

> ID：1003374
> 
> 赞同：1
> 
> 时间：2009-06-16T19:03:38.437
> 
> 标签：.net, pinvoke

判断 .NET 编译代码是否使用 p/invoke 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T19:06:09.633

使用反射并查找任何具有 [DllImport] 属性的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T19:10:22.980

我很确定[Mono 迁移分析器 (MoMA)](http://www.mono-project.com/MoMA)可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T19:05:35.297

如果代码没有被混淆，请尝试使用[Reflector](http://www.red-gate.com/products/reflector/)来查看 .dll 中发生的情况。

# python - Python 视频框架

> ID：1003376
> 
> 赞同：4
> 
> 时间：2009-06-16T19:03:57.627
> 
> 标签：python, video, pyglet

我正在寻找一个 Python 框架，它可以让我播放视频并在该视频上绘图（用于标记目的）。

我试过 Pyglet，但这似乎不是特别好 - 在现有视频上绘图时，会出现闪烁（即使有双缓冲和所有这些好东西），而且似乎没有办法在每帧回调期间获取视频中的帧索引（仅从上一帧开始经过的时间）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T20:40:17.723

尝试[GStreamer 的 Python 绑定](http://gstreamer.freedesktop.org/modules/gst-python.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T20:42:03.443

尝试为 OpenCV 使用 Python 包装器，例如[ctypes-opencv](http://code.google.com/p/ctypes-opencv/)。C API 参考在[这里](http://code.google.com/p/ctypes-opencv/)，并且包装器非常接近（有关任何更改，请参见文档字符串）。

我已经用它在没有任何闪烁的情况下绘制视频，所以你应该没有问题。

您需要的电话的粗略概述：

*   用 cvCreateFileCapture 加载视频，用 cvFont 加载字体。
*   使用 cvQueryFrame 抓取帧，增加帧计数器。
*   使用 cvPutText、cvEllipse 等在框架上绘图。
*   用 cvShowImage 显示给用户。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T19:14:12.273

Qt (PyQt) 有 Phonon，这可能会有所帮助。PyQt 可作为 GPL 或付费软件使用。（Qt 也有 LGPL，但 PyQt 包装器没有）

# mysql - MYSQL中LIKE和=的区别？

> ID：1003381
> 
> 赞同：22
> 
> 时间：2009-06-16T19:05:20.760
> 
> 标签：mysql

有什么区别

```
SELECT foo FROM bar WHERE foobar='$foo' 
```

和

```
SELECT foo FROM bar WHERE foobar LIKE'$foo' 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-06-16T19:08:36.370

**=**在 SQL 中进行完全匹配。

**LIKE**进行通配符匹配，使用 '%' 作为多字符匹配符号，使用 '_' 作为单字符匹配符号。'\' 是默认的转义字符。

`foobar = '$foo'`并且`foobar LIKE '$foo'`行为相同，因为两个字符串都不包含通配符。

`foobar LIKE '%foo'`将匹配以 'foo' 结尾的任何内容。

`LIKE`还有一个`ESCAPE`子句，因此您可以设置转义字符。这将允许您匹配字符串中的文字 '%' 或 '_'。你也可以这样做`NOT LIKE`。

MySQL 站点有[关于 LIKE 运算符的文档](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)。语法是

```
expression [NOT] LIKE pattern [ESCAPE 'escape'] 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-06-16T19:07:19.790

LIKE 可以做通配符匹配：

```
SELECT foo FROM bar WHERE foobar LIKE "Foo%" 
```

如果您不需要模式匹配，则使用 = 而不是 LIKE。它更快、更安全。（您正在使用参数化查询，对吗？）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-18T12:51:40.137

请记住，MySQL 将根据情况进行转换：LIKE 将执行字符串转换，而 = 将执行 int 转换。考虑到以下情况：

```
 (int)   (vchar2)
id  field1  field2
1   1       1
2   1       1,2 
```

> SELECT * FROM `test`AS a LEFT JOIN `test`AS b ON a.field1 LIKE b.field2

会产生

```
id  field1  field2  id  field1  field2
1   1       1       1   1       1
2   1       1,2     1   1       1 
```

然而

> SELECT * FROM `test`AS a LEFT JOIN `test`AS b ON a.field1 = b.field2

会产生

```
id  field1  field2  id  field1  field2
1   1       1       1   1       1
1   1       1       2   1       1,2
2   1       1,2     1   1       1
2   1       1,2     2   1       1,2 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-16T19:31:14.087

我认为就速度而言 = 比 LIKE 快。如前所述， = 进行完全匹配，如果需要，LIKE 可以使用通配符。

每当我知道某事物的值时，我总是使用 = 符号。例如

```
select * from state where state='PA' 
```

然后对于喜欢我使用类似的东西：

```
select * from person where first_name like 'blah%' and last_name like 'blah%' 
```

如果您使用 Oracle Developers Tool，您可以使用 Explain 对其进行测试，以确定对数据库的影响。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-16T19:10:41.623

根据[MYSQL 参考页面](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)，尾随空格在 LIKE 中很重要，但在 = 中不重要，您可以使用通配符，% 表示任何字符，_ 表示恰好一个字符。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T19:09:00.037

最终结果将是相同的，但查询引擎使用不同的逻辑来获得答案。通常，LIKE 查询比“=”查询消耗更多的周期。但是当没有提供通配符时，我不确定优化器会如何处理它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-16T19:09:54.213

对于您问题中的示例，没有区别。

但是，就像杰西说你可以做通配符匹配

```
SELECT foo FROM bar WHERE foobar LIKE "Foo%"

SELECT foo FROM bar WHERE foobar NOT LIKE "%Foo%" 
```

**更多信息：**

[http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-16T19:12:52.680

一点点 og google 并没有伤害......

如果我们想要进行完全匹配，带有等号 (=) 的 WHERE 子句可以正常工作。但是可能有一个要求，我们想要过滤掉所有“foobar”应该包含“foo”的结果。这可以使用 SQL LIKE 子句和 WHERE 子句来处理。

如果 SQL LIKE 子句与 % 字符一起使用，那么它将像通配符一样工作。

```
SELECT foo FROM bar WHERE foobar LIKE'$foo%' 
```

没有 % 字符的 LIKE 子句与等号和 WHERE 子句非常相似。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-16T19:14:36.500

在您的示例中，它们在语义上是相等的，并且应该返回相同的输出。

但是，LIKE 将赋予您使用通配符进行模式匹配的能力。

您还应该注意， = 可能会在某些系统上为您带来性能提升，因此，例如，如果您正在搜索 exakt 数字，则 = 将是首选方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-16T19:17:06.653

看起来很像从 PHP 脚本中取出来的。目的是将变量的内容与数据库字段进行模式匹配`$foo`，`foo`但我敢打赌它应该写在*双引号*中，因此 $foo 的内容将被输入到查询中。

**正如你所说，没有区别。**

它可能会更慢，但我敢打赌 MySQL 意识到搜索字符串中没有通配符，所以它毕竟不会进行 LIKE 模式匹配，所以真的没有区别。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-11T15:16:42.640

就我而言，我发现`Like`比`=`

*   `Like`第一次在 0.203 秒内获取了许多行，然后是 0.140 秒

*   `=`返回在 0.156 秒内不断获取相同的行

接受你的选择

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-03T10:32:11.700

`LIKE`我发现和等号之间有一个重要的区别`=`！

示例：我有一个包含字段“ID”（类型：int(20)）和包含值“123456789”的记录的表

如果我做：

```
SELECT ID FROM example WHERE ID = '123456789-100' 
```

找到 ID = '123456789' 的记录（结果不正确）

如果我做：

```
SELECT ID FROM example WHERE ID LIKE '123456789-100' 
```

没有找到记录（这是正确的）

因此，至少对于 INTEGER 字段来说，这似乎是一个重要的区别......

# html - IE6 iframe 渲染问题

> ID：1003382
> 
> 赞同：0
> 
> 时间：2009-06-16T19:05:23.630
> 
> 标签：html, iframe, internet-explorer-6, rendering

我们在 iframe 内有一个页面的 IE6 问题。

当按下提交按钮时，页面会重新加载一些新文本，但上一页的旧文本仍然可见。在某些地方，这重叠，因此文本不可读。

最小化和最大化页面可以清理这个问题，查看源代码只显示没有旧文本的新页面，所以这可能只是一个渲染问题。

这是一个已知的 IE6 错误吗？如何解决？

下面的 js 可以工作，但它很笨重，如果你关闭了 js，它就不起作用。

```
window.onload = refreshPage;
window.onscroll = refreshPage;
function refreshPage() {
var body = document.getElementsByTagName("body")[0];
body.style.display = "none";
body.style.display = "block" 
```

有更好的技巧吗？

谢谢，克里斯

**编辑**
我已经设法在开发服务器上重新创建问题，我可以直接在 Web 服务器上修改页面以测试不同的场景。注意：我无法控制 i-frame 中的内容，因此我仅限于更改此页面。有趣的一点是，如果我将 DOCTYPE 从 XHTML 1.0 Transitional 更改为*其他任何*内容，那么我看不到问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T20:14:15.293

另一种可能是将“缩放：1.0”添加到 iframe 的样式中。如果这对您有帮助并且您想了解更多信息，请尝试在 google 中查看 Internet Explorer 中的 hasLayout 属性。这将有助于理解为什么这是渲染问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T19:16:50.770

我会尝试在 iframe 中添加一个 position:relative 样式 - 这有时有助于解决这些问题。我需要查看页面结构和 css 以提供进一步帮助。

乔什

# c# - NET 跨网络发送给用户

> ID：1003390
> 
> 赞同：1
> 
> 时间：2009-06-16T19:06:13.830
> 
> 标签：c#, winapi, com

不知道如何再次表达这一点，但是......这就是我想要做的：

我正在编写一个程序来扫描我工作网络上的重复登录用户（用户多次登录）。

我可以编写 duplicity finder，但我需要一种能够向该用户发送消息的方法，说他们不允许在网络上多次登录，并且此消息需要发送到他们的每台计算机'重新登录。

我试过“net send”，但它似乎只发送到一台计算机。（我坐在这里登录了 3 次测试，我只收到 1/3 的 3 条消息。:/)

谢谢，
-扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T19:08:29.507

你也可以通过网络发送到电脑——你试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T15:41:00.917

回答我的一个没有答案的老问题。

如果我再次解决这个问题，我可能会设置一个本地守护程序或应用程序来接收 Windows 7 的推送式通知，或者可能会查看Windows 10 应用程序的[WNS](https://msdn.microsoft.com/en-us/windows/uwp/controls-and-patterns/tiles-and-notifications-windows-push-notification-services--wns--overview)。

# c++ - 我可以在 C++ 中使用哪一行代码来禁用节能器？

> ID：1003394
> 
> 赞同：5
> 
> 时间：2009-06-16T19:07:14.703
> 
> 标签：c++, winapi

我想防止显示器进入睡眠状态（Windows 设置，而不是显示器设置）。我正在使用 C++。我打什么电话？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-16T19:10:33.277

```
class KeepDisplayOn
{
public:
    KeepDisplayOn()
    {
        mPrevExecState = ::SetThreadExecutionState(ES_DISPLAY_REQUIRED | ES_SYSTEM_REQUIRED | ES_CONTINUOUS);
        ::SystemParametersInfo(SPI_GETSCREENSAVETIMEOUT, 0, &mPrevScreenSaver, 0);
        ::SystemParametersInfo(SPI_SETSCREENSAVETIMEOUT, FALSE, NULL, 0);
    }

    ~KeepDisplayOn()
    {
        ::SystemParametersInfo(SPI_SETSCREENSAVETIMEOUT, mPrevScreenSaver, NULL, 0);
        ::SetThreadExecutionState(mPrevExecState);
    }

private:
    UINT                mPrevScreenSaver;
    EXECUTION_STATE     mPrevExecState;
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T21:56:37.757

一种不会像第一个响应那样修改全局系统状态的更简单方法：

在您的窗口过程中，为`WM_SYSCOMMAND`. 当 wParam 为 时`SC_MONITORPOWER`，返回 0 而不是推迟到`DefWindowProc`。（当 wParam 是任何其他值时，请确保您处理消息或将其传递给`DefWindowProc`. 否则用户将难以在运行时调整您的窗口。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-16T19:12:20.000

`SetThreadExecutionState(ES_DISPLAY_REQUIRED|ES_CONTINUOUS);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-12-06T15:48:37.610

每分钟左右摆动一次鼠标。

```
mouse_event(MOUSEEVENTF_MOVE,1,0,0,0);
mouse_event(MOUSEEVENTF_MOVE,-1,0,0,0);
Sleep(60000); 
```

# c# - 如何在不使用 OpenFileDialog 的情况下浏览本地目录的文件？（C＃）

> ID：1003397
> 
> 赞同：0
> 
> 时间：2009-06-16T19:07:32.330
> 
> 标签：c#, directory, browser, openfiledialog

我想构建一些东西，让用户在我提供的应用程序上浏览本地文件，屏幕实际上与 OpenFileDialog 相同，但我不希望它成为对话框，而是我的表单上的控件。

我尝试使用 Web 浏览器控件，它可以工作，但我必须编写一堆导航代码才能使其工作，另一个问题是如果用户在该屏幕上选择了任何文件，我不确定如何捕获结果。

那么还有其他方法可以做到这一点吗？或者可能会覆盖某些 OpenFileDialog 控件，使其不仅显示为对话框，而且显示为普通控件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T19:13:52.010

也许你正在寻找这样的东西：

它使用树视图。

[http://www.codeproject.com/KB/cs/TreeViewFileExplorer.aspx](http://www.codeproject.com/KB/cs/TreeViewFileExplorer.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T19:37:17.833

最好使用 openfiledialog 并尝试对其进行所有者绘制（我认为您可以启用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-02-14T06:56:14.477

使用[Shell MegaPack](http://www.ssware.com/megapack.htm)中的控件- 它们可以放在您自己的表单上，并提供大量自定义和灵活性。

免责声明：我为壳牌 MegaPack 的开发商 LogicNP Software 工作。

# c# - 多个异步 SqlClient 操作 - 寻找一个很好的例子

> ID：1003404
> 
> 赞同：2
> 
> 时间：2009-06-16T19:08:35.933
> 
> 标签：c#, .net, ado.net, asynchronous, sqlclient

我从一开始就在我的 WinForms 客户端中使用异步操作，但仅用于某些操作。当`ExecuteReader`or`ExecuteNonQuery`完成时，回调委托触发并且一切正常。

我基本上有两个问题：

1）在现实生活系统中处理这个问题的最佳结构是什么？我看到的所有示例都是玩具示例，其中表单处理操作完成，然后在`EndExecuteReader`. 当然，这意味着表单与数据库的耦合比您通常想要的更紧密。而且，当然，表单总是可以很容易地调用`.Invoke`自己。我已将所有异步对象设置为从一个`AsyncCtrlBlock<T>`类继承，并将表单和所有回调委托提供给我的 DAL 中异步对象的构造函数。

2）我将重新访问当前不是异步的程序的一部分。它连续进行两次调用。当第一个完成时，可以填充模型的一部分。当第二部分完成时，模型的剩余部分可以完成 - 但前提是第一部分已经完成。构建这个的最佳方法是什么？如果可以完成第一次读取并且在启动第二次读取时正在进行由于第一次读取而导致的处理，那就太好了，但是我不希望在我知道第二次读取的处理之前开始第二次读取的处理第一次读取的数据已经完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:17:25.650

如果您使用的是 .Net 4，这将是 TPL 的理想应用！您可以将代码分解为如下任务：

```
TaskScheduler uiScheduler = GetUISheduller();
SqlCommand command1 = CreateCommand1();

Task<SqlDataReader> query1 = Task<SqlDataReader>.Factory.FromAsync(command1.BeginExecuteReader, command1.EndExecuteReader, null);
query1.ContinueWith(t => PopulateGrid1(t.Result), uiScheduler);

SqlCommand command2 = CreateCommand2();
query1.ContinueWith(t => Task<SqlDataReader>.Factory.FromAsync(command2.BeginExecuteReader, command2.EndExecuteReader, null)
      .ContinueWith(t => PopulateGrid2(t.Result), uiScheduler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-06-25T13:36:20.503

关于 2)

使模型的第一阶段填充异步。你会有类似的东西

```
 FisrtCall();
AsyncResult arPh1 = BeginPhaseOne(); //use results from first call
SecondCall();
EndPhaseOne(arPh1); //wait until phase one is finished
PhaseTwo(); //proceed to phase two 

```

# mp3 - 计算 mp3 平均音量

> ID：1003413
> 
> 赞同：1
> 
> 时间：2009-06-16T19:10:14.010
> 
> 标签：mp3, normalization, scaling, scale, volume

我需要知道 mp3 文件的平均音量，以便当我将其转换为 mp3（以不同的比特率）时，我也可以缩放音量，使其正常化......

因此，我需要一个命令行工具/ruby 库，它可以为我提供以 dB 为单位的平均音量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T19:30:29.830

您可以同时使用 sox（一个开源命令行音频工具[http://sox.sourceforge.net/sox.html](http://sox.sourceforge.net/sox.html)）对文件进行规范化和转码。

编辑

看起来它没有比特率选项。无论如何，如果 LAME 进行标准化， sox 可能是矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:25:53.237

您可以使用[LAME](http://lame.sourceforge.net/)编码为 mp3。它具有标准化、缩放和比特率的选项。LAME 还可以编译到几乎任何平台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-02-10T19:39:48.110

我根据上面的输入写了一个小包装脚本：

```
#!/bin/sh

# Get the current volume (will reset to this later).
current=`amixer -c 0 get Master 2>&1 |\
    awk '/%/ {
              p=substr($4,2,length($4)-2);
              if( substr(p,length(p)) == "%" )
                 {
                 p = substr(p,1,length(p)-1)
                 }
             print p
             }'`

# Figure out how loud the track is.  The normal amplitude for a track is 0.1\. 
#   Ludicrously low values are 0.05, high is 0.37 (!!?)
rm -f /tmp/$$.out
/usr/bin/mplayer -vo null -ao pcm:file=/tmp/$$.out $1 >/dev/null 2>&1
if [ $? = 0 ] ; then
    amplitude=`/usr/bin/sox /tmp/$$.out -n stat 2>&1 | awk '/RMS.+amplitude/ {print $NF}'`
fi
rm -f /tmp/$$.out

# Set an appropriate volume for the track.
to=`echo $current $amplitude | awk '{printf( "%.0f%%", $1 * 0.1/$2 );}'`
echo $current $amplitude | awk '{print "Amplitude:", $2, "  Setting volume to:", 10/$2 "%,  mixer volume:", $1 * 0.1/$2}'
amixer -c 0 set Master $to  >/dev/null 2>&1

mplayer -quiet -cache 2500 $1

# Reset the volume for next time.
amixer -c 0 set Master "$current%"  >/dev/null 2>&1 
```

开始播放文件需要额外的一秒钟时间，并且依靠 alsamixer 来调整音量，但它确实很好地让您不必不断地调整主音量。而且它并不真正关心输入格式是什么，因为如果 mplayer 可以播放它，它可以提取音频，所以它应该可以与 MP3、Ogg、AVI 等兼容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-14T20:56:13.680

[http://mp3gain.sourceforge.net/](http://mp3gain.sourceforge.net/)是一个经过深思熟虑的解决方案。

# entity-framework - ADO 实体框架中的更新操作

> ID：1003416
> 
> 赞同：0
> 
> 时间：2009-06-16T19:10:30.547
> 
> 标签：entity-framework, ado

如何在 ADO 实体框架中进行更新表操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T20:01:58.253

Entity Framework is currently limited to updates / deletes like this (in pseudo code):

```
DELETE FROM [Table] WHERE Key = Value 
```

And you can't do things like this:

```
DELETE FROM [Table] WHERE [RANDOM CLAUSE] 
```

The second example is what is generally called DML or Data Modification Language, and it isn't actually supported in EF.

There are workarounds however, see [this question](https://stackoverflow.com/questions/869209/bulk-deleting-in-linq-to-entities/870081) & my answer for more information.

Hope this helps Alex

# visual-studio - 在 Visual Studio 中打开解决方案中的文件的快捷键（热键）？

> ID：1003445
> 
> 赞同：53
> 
> 时间：2009-06-16T19:15:55.843
> 
> 标签：visual-studio, keyboard-shortcuts

Visual Studio 中是否有在不使用 Resharper 或任何其他工具的情况下查找和打开解决方案中的文件的快捷键？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2017-05-24T16:51:46.510

接受的解决方案**不适**用于较新的版本。
对于**Visual Studio 2022**和**2019**、**2017** 执行以下操作：

**更新 1：**现在
，按`Ctrl`++并输入文件名即可！`Shift``T`

**更新 2：**
由于 Visual Studio 2019 现在可以通过`Ctrl`+进行类似的搜索`Q`。
但它的工作有点**草率**，因为它也显示了与 VS 相关的东西。

**原答案：**

1.  按这些键打开“转到”弹出窗口：
    `Ctrl`+ `,`
2.  在那里输入：
    `f` `Space` *文件名*
3.  按`Enter`

[![在此处输入图像描述](../Images/5e51138099ebb7cd82b1c8e90e05e160.png)](https://i.stack.imgur.com/FAjB9.png)

*备注*：

*   我们写信`f` 是为了让 VS 只搜索文件。我们也可以使用其他字母。有关更多信息`?`，请在“转到”弹出窗口中键入。
*   有关**更多键**和**Visual Studio 2012**到**2015**的更多信息，请查看[此](https://stackoverflow.com/questions/11776697/how-to-quickly-open-a-file-in-visual-studio-2012/41038705#41038705) 答案。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-16T19:20:49.907

这个答案已经**过时了**；[请参阅此处了解最新信息](https://stackoverflow.com/a/44164379/55246)。

* * *

不是单次击键，但是是的：`Ctrl+D > of filename`（在您开始输入文件名之前，这是五次击键）。然后它会为您自动完成文件名。

您需要工具栏中的“查找”框才能使用。

（如果您对插件改变主意，[SonicFileFinder](http://www.jens-schaller.de/sonictools/sonicfilefinder/index.htm)就是为此目的，而且是免费的。）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-07-28T18:16:09.153

您还可以使用`Ctrl`+ `/`，它`>`会自动为您放置到位。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-06T13:53:10.353

与[Just Shadow](https://stackoverflow.com/a/44164379/5734097)的回答类似，我发现在**[Visual Studio 2017](https://visualstudioextensions.vlasovstudio.com/2017/06/14/new-code-navigation-shortcuts-in-visual-studio-2017/)**上，您可以执行以下操作：

> 按`Ctrl`+ `1`，然后`f`

或者你可以去`Tools -> Options -> Keyboard` 改变`Edit.GoToFile`任何你喜欢的快捷方式。

* * *

我将我的替换为：`Ctrl`+`O`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-23T13:48:18.610

打开命令面板：单击 - 视图 > 命令面板类型“文件：打开文件”

执行此操作时，VS Code 会显示当前设置的热键。对我来说是`Ctrl + O`

# java - Java / Ada Big Endian 到 Linux Little Endian 问题

> ID：1003447
> 
> 赞同：2
> 
> 时间：2009-06-16T19:16:04.983
> 
> 标签：java, linux, unix, endianness, ada

我是一名实习生，在我工作的地方继承了一个测试程序的问题。在搜索了一下之后，我可以找到一个与我完全相同的问题的人。在这里询问了一下之后，我发现发布此内容的人实际上仍然在这里工作，我也得到了他的帮助，但我认为他比我更深入地解释了这个问题。

[在这个论坛上](http://bytes.com/topic/java/answers/857951-java-big-endian-linux-little-endian-problems)

对于那些不想阅读所有垃圾的人来说，这是它的要点。我们有一个在客户端运行的 GUI，它远程调用在 SPARC Unix 机器上运行的用 Ada 编写的测试应用程序。当大楼里的每个人都使用 Unix 机器做所有事情时，测试应用程序和 gui 工作得很好，但最近每个人都得到了更新更快的 linux x86 机器。

由于测试应用程序和 GUI 之间的 Big / Little Endian 不兼容，任何获得升级的人都无法运行测试应用程序。

现在，我的工作是弄清楚如何解决它。现在，我知道这里将有一种大型应用程序重写，我可能不得不重新定义 GUI 和测试应用程序如何相互通信，但是如果不完全反汇编程序，我怎么能做到这一点呢？

我自己提出的一些选项如下： Java RMI XML/RPC SOAP 数据烘焙？

请记住，我完全是网络编程的菜鸟，即使这些“解决方案”对我来说可能看起来有效，但我可能完全偏离了基础。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T19:28:05.293

你不需要重写任何东西。只要确保你在两边都使用网络顺序（大端，你自然表达数字的方式）。x86 使用 little endian，因此您必须查看任何在 x86 上失败的应用程序的源代码。

然后，调用 htonl/htons/ntohl/ntohs（参见 参考资料`man 3 htonl`）或类似的函数，将您发送/接收的每个数字转换为发送/接收数据的代码部分中的正确编码。Java 总是使用网络顺序，因此您不必担心原生 Java 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T20:27:14.633

您正在寻找一个非常繁重的解决方案。（仅供参考：另一个同样重要的解决方案是[ASN.1](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)）。

您真正需要做的就是在一侧（可能是测试应用程序）添加代码以对传入数据执行字节交换。

当然，棘手的部分是您不能（通常）只交换字节。您必须知道*数据*是什么，因为两个 2 字节整数的交换方式与同一地址的单个 4 字节整数不同。字符数据根本不会被交换。

**可能的简单解决方案：** 如果您使用 Gnat 作为 Ada 编译器，一种选择是重写数据传输代码以使用流（如果尚未这样做），*并*在 Linux 端编写一些 Ada 代码以读取它使用流。然后修复您的编译器以使用 Ada 流的[XDR版本（在](http://www.ietf.org/rfc/rfc4506.txt)[此处](http://groups.google.com/group/comp.lang.ada/browse_thread/thread/19b0bf5b6906d2e7/50dbcdbf10c9754)和[此处](http://gcc.gnu.org/onlinedocs/gnat_rm/Implementation-Advice.html)进行更详细的解释。Gnat 流的 XDR 版本自动处理字节交换。

# winapi - 在 Windows 上检索可用的字体大小

> ID：1003450
> 
> 赞同：6
> 
> 时间：2009-06-16T19:16:13.533
> 
> 标签：winapi, fonts, font-size

当我打开 Windows 通用字体对话框时，它会为每种字体列出一堆大小。对于所有 OpenType/TrueType 字体，它具有相同的列表 - 9、10、11、12、14、16、18... 对于位图字体，列表根据可用的位图而有所不同。“小字体”有 2、3、4、5、6、7，而普通的旧 Courier 有 10、12、15。我不知道，但我从以前的阅读中了解到，即使是 TrueType 字体，某些尺寸会被提示并且会比所有其他尺寸看起来更好，所以大概我还可以看到 TrueType 字体具有更受限制的尺寸集。

我在我的应用程序中实现了一项功能，即 Ctrl+鼠标滚轮将向上和向下缩放字体大小，就像在浏览器中一样。我想确定字体的可用大小列表，以便如果我当前的大小为 12，我的应用程序知道对于 Courier New，下一个合适的更大大小是 14，而对于普通的旧 Courier，它是 15。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-16T19:26:02.287

有关如何枚举特定字体的字体/字体大小的说明，请参见[此处。](https://web.archive.org/web/20160324041712/http://www.catch22.net/tuts/fixed-width-font-enumeration)请注意，TrueType 字体可以以任何大小显示（而不仅仅是预先确定的），因为它们是基于矢量的。

```
int EnumFontSizes(char *fontname)
{
    LOGFONT logfont;

    ZeroMemory(&logfont, sizeof logfont);

    logfont.lfHeight = 0;
    logfont.lfCharSet = DEFAULT_CHARSET;
    logfont.lfPitchAndFamily = FIXED_PITCH | FF_DONTCARE;

    lstrcpy(logfont.lfFaceName, fontname);

    EnumFontFamiliesEx(hdc, &logfont, (FONTENUMPROC)FontSizesProc, 0, 0);

    return 0;
}

int CALLBACK FontSizesProc(
    LOGFONT *plf,      /* pointer to logical-font data */
    TEXTMETRIC *ptm,   /* pointer to physical-font data */
    DWORD FontType,    /* font type */
    LPARAM lParam      /* pointer to application-defined data */
    )
{
    static int truetypesize[] = { 8, 9, 10, 11, 12, 14, 16, 18, 20, 
            22, 24, 26, 28, 36, 48, 72 };

    int i;

    if(FontType != TRUETYPE_FONTTYPE)
    {
        int  logsize    = ptm->tmHeight - ptm->tmInternalLeading;
        long pointsize  = MulDiv(logsize, 72, GetDeviceCaps(hdc, LOGPIXELSY));

        for(i = 0; i < cursize; i++)
            if(currentsizes[i] == pointsize)
                return 1;

        printf("%d ", pointsize);

        currentsizes[cursize] = pointsize;

        if(++cursize == 200) return 0;
        return 1;   
    }
    else
    {

        for(i = 0; i < (sizeof(truetypesize) / sizeof(truetypesize[0])); i++)
        {
            printf("%d ", truetypesize[i]);
        }

        return 0;
    }
} 
```

# sql - 来自usp结果的sql查询

> ID：1003454
> 
> 赞同：1
> 
> 时间：2009-06-16T19:17:52.783
> 
> 标签：sql, nested-queries

如何查询存储过程的结果？

这是我的例子：

```
sp_columsn 'tblSomeTableName' --// Returns a recordset

select COLUMN_NAME from [sp_columns 'tblSomeTableName'] --// Raises an error saying "Invalid object name 'sp_columns 'tblSomeTableName''." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T19:24:51.540

只要你知道存储过程的结果的结构，你就可以创建一个表（临时，变量等）并将存储过程执行到表中。

```
CREATE TABLE #MyTestTable
(TABLE_QUALIFIER sysname, 
TABLE_OWNER sysname, 
TABLE_NAME sysname, 
COLUMN_NAME sysname, 
DATA_TYPE smallint, 
TYPE_NAME sysname, 
PRECISION int, 
LENGTH int, 
SCALE smallint, 
RADIX smallint, 
NULLABLE smallint, 
REMARKS varchar(254), 
COLUMN_DEF nvarchar(4000), 
SQL_DATA_TYPE smallint, 
SQL_DATETIME_SUB smallint, 
CHAR_OCTET_LENGTH int, 
ORDINAL_POSITION int, 
IS_NULLABLE varchar(254), 
SS_DATA_TYPE tinyint)

INSERT  #MyTempTable
EXEC    sp_columns 'tblSomeTableName'

SELECT  COLUMN_NAME
FROM    #MyTempTable
WHERE   ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:28:44.667

您可以进行环回查询，但请注意它会打开与同一服务器的另一个连接

```
SELECT *
      FROM OPENROWSET ('SQLOLEDB','Server=(local);TRUSTED_CONNECTION=YES;',
    'set fmtonly off exec master.dbo.sp_who') 
```

另请参阅：[将存储过程的输出存储在表中而不创建表](http://wiki.lessthandot.com/index.php/Store_The_Output_Of_A_Stored_Procedure_In_A_Table_Without_Creating_A_Table)

# c# - 如何判断文件系统对象是路径还是目录

> ID：1003456
> 
> 赞同：0
> 
> 时间：2009-06-16T19:18:21.440
> 
> 标签：c#, .net, file, directory

> **可能重复：**
> [.NET 如何检查路径是否是文件而不是目录？](https://stackoverflow.com/questions/439447/net-how-to-check-if-path-is-a-file-and-not-a-directory)

谁能想到一个判断文件系统对象路径是否等同于文件或目录的好方法？

我确实有以下方法：

```
public static bool PathIsFile(this string fullPath)
{
    return (Path.GetExtension(fullPath).Length > 0);
} 
```

但是有些文件没有扩展名，有些目录的名称中有一个点，所以这不是削减它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T19:21:01.343

你检查过：

```
System.IO.Directory.Exists(path); 
```

和

```
System.IO.File.Exists(path); 
```

这些返回布尔值，但我无法找出（目前）如果分别给定文件或目录它们会引发哪些错误。

还有`System.IO.FileInfo`和`System.IO.DirectoryInfo`类在这里应该可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:20:48.067

仅从字符串分析中无法知道某物是文件还是目录，因为正如您所指出的，

```
C:\WINDOWS\WhoKnowsWhatThisIs 
```

可能是目录或文件。

你必须调用类似`System.IO.Directory.Exists()`或`System.IO.File.GetAttributes()`测试的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T19:20:25.150

请参阅[.NET 如何检查路径是否是文件而不是目录？](https://stackoverflow.com/questions/439447/net-how-to-check-if-path-is-a-file-and-not-a-directory)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T19:21:05.413

您必须询问文件系统。它总是知道的。这是唯一万无一失的方法。

```
f1 = File(path);
bool isfile = f1.isFile();
bool isdir = f1.isDirectory(); 
```

是来自 Java.IO.File 的示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T19:22:47.080

查看 isFile 方法。它在这里使用：

[http://tools.devshed.com/c/a/Web-Development/C-Programming-Namespaces-and-the-Base-Classes-Part-4-File-and-Folder-Operations/](http://tools.devshed.com/c/a/Web-Development/C-Programming-Namespaces-and-the-Base-Classes-Part-4-File-and-Folder-Operations/)

# c# - C#：TreeView 所有者绘图与 ownerdrawtext 和单击节点时奇怪的黑色突出显示

> ID：1003459
> 
> 赞同：9
> 
> 时间：2009-06-16T19:18:50.800
> 
> 标签：c#, treeview, ownerdrawn

我将 DrawMode 设置为 OwnerDrawText 并附加到 DrawNode 事件，添加了我的代码以按照我想要的方式绘制文本，并且在选择节点时除了一些奇怪的黑色选择突出显示之外，所有工作都很好。

没问题，我添加了逻辑来检查节点的状态是否被突出显示并绘制了我自己的突出显示，除了在单击节点时添加黑色突出显示，而不仅仅是选择...一旦鼠标按钮，突出显示被我的矩形绘制被释放但确实被吸引并眨眼……这很烦人。：/

显然我忘了问我的问题......如何在不完全处理绘图的情况下摆脱选择？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-16T21:39:13.063

根据我的经验，你通常不能。要么你自己画这个项目，要么你不画。如果您尝试在控件绘制的图形之上合成您的图形，您最终会遇到故障。

这有点痛苦，因为您必须自己处理焦点矩形、选择高亮和绘制所有字形。

从好的方面来说，[视觉样式](http://msdn.microsoft.com/en-us/library/ms171733.aspx)可以用来完成大部分工作。

这里有一些代码可以让你大部分时间到达那里（它不完整，因为它使用了一些未包含的方法，并且它不完全呈现普通树视图所做的事情，因为它支持渐变填充项目和列，但应该是方便参考）

```
 protected virtual void OnDrawTreeNode(object sender, DrawTreeNodeEventArgs e)
    {
        string text = e.Node.Text;
        Rectangle itemRect = e.Bounds;
        if (e.Bounds.Height < 1 || e.Bounds.Width < 1)
            return;

        int cIndentBy   = 19;       // TODO - support Indent value
        int cMargin     = 6;        // TODO - this is a bit random, it's slaved off the Indent in some way
        int cTwoMargins = cMargin * 2;

        int indent = (e.Node.Level * cIndentBy) + cMargin;
        int iconLeft = indent;                      // Where to draw parentage lines & icon/checkbox
        int textLeft = iconLeft + 16;               // Where to draw text

        Color leftColour = e.Node.BackColor;
        Color textColour = e.Node.ForeColor;

        if (Bitfield.IsBitSet(e.State, TreeNodeStates.Grayed))
            textColour = Color.FromArgb(255,128,128,128);

        // Grad-fill the background
        Brush backBrush = new SolidBrush(leftColour);
        e.Graphics.FillRectangle(backBrush, itemRect);

        // Faint underline along the bottom of each item
        Color separatorColor = ColourUtils.Mix(leftColour, Color.FromArgb(255,0,0,0), 0.02);
        Pen separatorPen = new Pen(separatorColor);
        e.Graphics.DrawLine(separatorPen, itemRect.Left, itemRect.Bottom-1, itemRect.Right, itemRect.Bottom-1);

        // Bodged to use Button styles as Treeview styles not available on my laptop...
        if (!HideSelection)
        {
            if (Bitfield.IsBitSet(e.State, TreeNodeStates.Selected) || Bitfield.IsBitSet(e.State, TreeNodeStates.Hot))
            {
                Rectangle selRect = new Rectangle(textLeft, itemRect.Top, itemRect.Right - textLeft, itemRect.Height);
                VisualStyleRenderer renderer = new VisualStyleRenderer((ContainsFocus) ? VisualStyleElement.Button.PushButton.Hot
                                                                                       : VisualStyleElement.Button.PushButton.Normal);
                renderer.DrawBackground(e.Graphics, selRect);

                // Bodge to make VisualStyle look like Explorer selections - overdraw with alpha'd white rectangle to fade the colour a lot
                Brush bodge = new SolidBrush(Color.FromArgb((Bitfield.IsBitSet(e.State, TreeNodeStates.Hot)) ? 224 : 128,255,255,255));
                e.Graphics.FillRectangle(bodge, selRect);
            }
        }

        Pen dotPen = new Pen(Color.FromArgb(128,128,128));
        dotPen.DashStyle = DashStyle.Dot;

        int midY = (itemRect.Top + itemRect.Bottom) / 2;

        // Draw parentage lines
        if (ShowLines)
        {
            int x    = cMargin * 2;

            if (e.Node.Level == 0 && e.Node.PrevNode == null)
            {
                // The very first node in the tree has a half-height line
                e.Graphics.DrawLine(dotPen, x, midY, x, itemRect.Bottom);
            }
            else
            {
                TreeNode testNode = e.Node;         // Used to only draw lines to nodes with Next Siblings, as in normal TreeViews
                for (int iLine = e.Node.Level; iLine >= 0; iLine--)
                {
                    if (testNode.NextNode != null)
                    {
                        x = (iLine * cIndentBy) + (cMargin * 2);
                        e.Graphics.DrawLine(dotPen, x, itemRect.Top, x, itemRect.Bottom);
                    }

                    testNode = testNode.Parent;
                }

                x = (e.Node.Level * cIndentBy) + cTwoMargins;
                e.Graphics.DrawLine(dotPen,  x, itemRect.Top, x, midY);
            }

            e.Graphics.DrawLine(dotPen, iconLeft + cMargin, midY, iconLeft + cMargin + 10, midY);
        }

        // Draw Expand (plus/minus) icon if required
        if (ShowPlusMinus && e.Node.Nodes.Count > 0)
        {
            // Use the VisualStyles renderer to use the proper OS-defined glyphs
            Rectangle expandRect = new Rectangle(iconLeft-1, midY - 7, 16, 16);

            VisualStyleElement element = (e.Node.IsExpanded) ? VisualStyleElement.TreeView.Glyph.Opened
                                                             : VisualStyleElement.TreeView.Glyph.Closed;

            VisualStyleRenderer renderer = new VisualStyleRenderer(element);
            renderer.DrawBackground(e.Graphics, expandRect);
        }

        // Draw the text, which is separated into columns by | characters
        Point textStartPos = new Point(itemRect.Left + textLeft, itemRect.Top);
        Point textPos = new Point(textStartPos.X, textStartPos.Y);

        Font textFont = e.Node.NodeFont;    // Get the font for the item, or failing that, for this control
        if (textFont == null)
            textFont = Font;

        StringFormat drawFormat = new StringFormat();
        drawFormat.Alignment = StringAlignment.Near;
        drawFormat.LineAlignment = StringAlignment.Center;
        drawFormat.FormatFlags = StringFormatFlags.NoWrap;

        string [] columnTextList = text.Split('|');
        for (int iCol = 0; iCol < columnTextList.GetLength(0); iCol++)
        {
            Rectangle textRect = new Rectangle(textPos.X, textPos.Y, itemRect.Right - textPos.X, itemRect.Bottom - textPos.Y);
            if (mColumnImageList != null && mColumnImageList[iCol] != null)
            {
                // This column has an imagelist assigned, so we use the column text as an integer zero-based index
                // into the imagelist to indicate the icon to display
                int iImage = 0;
                try
                {
                    iImage = MathUtils.Clamp(Convert.ToInt32(columnTextList[iCol]), 0, mColumnImageList[iCol].Images.Count);
                }
                catch(Exception)
                {
                    iImage = 0;
                }

                e.Graphics.DrawImageUnscaled(mColumnImageList[iCol].Images[iImage], textRect.Left, textRect.Top);
            }
            else
                e.Graphics.DrawString(columnTextList[iCol], textFont, new SolidBrush(textColour), textRect, drawFormat);

            textPos.X += mColumnWidthList[iCol];
        }

        // Draw Focussing box around the text
        if (e.State == TreeNodeStates.Focused)
        {
            SizeF size = e.Graphics.MeasureString(text, textFont);
            size.Width = (ClientRectangle.Width - 2) - textStartPos.X;
            size.Height += 1;
            Rectangle rect = new Rectangle(textStartPos, size.ToSize());
            e.Graphics.DrawRectangle(dotPen, rect);
//          ControlPaint.DrawFocusRectangle(e.Graphics, Rect);
        }
    } 
```

# asp.net - 在 Javascript 中，如何将数据从 text/html 类型的对象传输到其父对象

> ID：1003463
> 
> 赞同：0
> 
> 时间：2009-06-16T19:19:16.977
> 
> 标签：asp.net, javascript, object, parent

我有一个

```
<object id="objPage" data="source.html" type="text/html"><object> 
```

包含同一域上的 HTML 页面。我正在尝试通过 Javascript 从 source.html 将字符串发送到其父级，这是一个 aspx 页面。我需要孩子能够发送该信息。任何想法？

所以基本上是：

[ASPX] [OBJECT] 向 ASPX 发送数据 [/OBJECT] 从对象接收数据[/ASPX]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T19:24:59.027

问题不是很清楚 - 据我了解，您正在尝试将数据从 JavaScript 发送到 aspx 页面。

我会使用 AJAX 来做到这一点。一种简单的方法是使用 JavaScript 库，例如 jQuery。在这里查看在 jQuery 中使用 AJAX 的示例

[http://docs.jquery.com/Ajax/jQuery.get#urldatacallbacktype](http://docs.jquery.com/Ajax/jQuery.get#urldatacallbacktype)

乔什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T19:25:08.853

没有任何库，请查看 XmlHttpRequest。

使用 ExtJs 或类似库之类的东西，您可以创建 Ajax.Request。

# javascript - 在页面重新加载时处理 Javascript 单选框状态

> ID：1003476
> 
> 赞同：0
> 
> 时间：2009-06-16T19:21:38.547
> 
> 标签：javascript, html

我一直在玩收音机。我遇到的问题因用户使用的浏览器而异。基本上，我的目标是根据所选的单选框在页面上生成其他数据。重要的是，此数据与单选框保持同步。Normally, this is not an issue: I run the code below when the selection changes.

但是，浏览器经常缓存选中哪个复选框的方式存在问题。IE 似乎等到脚本完成运行，然后切换选择了哪个单选框。另一方面，Firefox 会记住选中了哪个复选框并相应地显示它……但选中的属性会忽略这一点。我可以通过取消选中并选中复选框（下面的两行注释掉的代码）来强制 Firefox 保持此信息同步，尽管这有点骇人听闻。

目前，我最好的想法是通过脚本生成单选框以杀死浏览器缓存它们的能力。任何人都可以提供一个不那么老套的选择吗？

```
<br />
<input type="radio" name="DataRadio" checked="checked"
    Value="V1" onclick="doDataRadio()" />V1

<br />
<input type="radio" name="DataRadio"
    Value="V2" onclick="doDataRadio()" />V2

<br />
<input type="radio" name="DataRadio"
    Value="V3" onclick="doDataRadio()" />V3 
```

* * *

```
function selCountry()
{
    var len = theForm.DataRadio.length;
    for (i = 0; i < len; i++) {
        if (theForm.DataRadio[i].checked)
        {
            chosen = theForm.DataRadio[i].value;
            //theForm.DataRadio[i].checked = false;
            //theForm.DataRadio[i].checked = true;
            alert(chosen);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T20:15:08.630

由于您没有显示更多代码。我假设您想`selCountry()`在页面加载时调用。

通常使用**[jQuery](http://jquery.com)**之类的 javascript 库，当页面加载时在`$(document).ready()`函数中运行一些东西，如下所示：

```
$(document).ready({
  selCountry();
}); 
```

如果没有 javascript 库，您需要这样：

```
window.onload = function(){
  selCountry();
} 
```

通过这种方式，您可以确保在确定预先选择了哪个单选按钮之前完成了页面加载。这适用于跨浏览器。

# c# - 如何从 dataReader 将数据加载到列表中？

> ID：1003480
> 
> 赞同：-2
> 
> 时间：2009-06-16T19:22:47.157
> 
> 标签：c#, .net, asp.net

我正在尝试将数据添加到我的列表对象。
对于一个字符串，我只是说，this.name = myDaraReader["test"]toTring(); 我该如何做一个列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T19:36:12.627

也许这比我看到的要多，但你有理由不能只写

theList.Add(myDataReader["test"].toString());

我认为这会起作用，除非我错过了什么..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T19:35:23.720

```
List<string> nameList = new List<string>();
nameList.Add(myDaraReader["test"]toTring()); 
```

**//注意：我只是添加了您在上面键入的内容，而不是修复语法。**

这里有几个链接，用于阅读[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)和[DataReader这两个主题](http://msdn.microsoft.com/en-us/library/haa3afyz(VS.71).aspx)

# asp.net - 从 ascx 中查找对 aspx 的控制

> ID：1003481
> 
> 赞同：4
> 
> 时间：2009-06-16T19:22:54.210
> 
> 标签：asp.net, vb.net

我正在尝试从所述 aspx 页面上的用户控件 (ascx) 中找到 aspx 页面上的标签。显然 Page.FindControl("labell1") 不起作用。我需要在某处添加 ClientID 吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-16T19:26:59.913

我认为你应该停下来想想你的设计。您的控件应该永远不需要了解包含它们的页面的任何信息——您需要从另一个控件中找到页面上的控件这一事实告诉我，您应该重新考虑这个问题。

我能告诉你的最好的事情（我对你的架构知之甚少）是你应该将一个对你希望找到的控件的引用传递给你的用户控件。这样，您的控件就不必了解自身之外的事物。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T19:48:19.170

在控件的直接父级的上下文之外使用`FindControl()`时，您需要遍历控件树以找到您`label`所在的级别并在适当的级别调用`.FindControl()`。

也就是说，接受@Andrew Hare 的建议并重新审视您的架构决策。可能有更好的方法让您的 UserControl 与其消费页面交互。

例如，您可以在您的 UserControl 中公开一个公共事件并将一个事件处理程序添加到您的消费页面（或基本页面/母版页）。创建事件时，您可以根据需要进行签名，因此请继续包含需要通过的错误文本。

如果你想用它变得时髦，你可以把你的错误标签变成一个带有事件钩子的自定义控件。

示例事件：

```
Public Event UserErrorOccured(ByVal ErrorText as String) 
```

样本错误：

```
If Not Page.IsValid Then
    RaiseEvent("The page is not valid")
End If 
```

样品处理程序：

```
protected sub UserEventHandler(ByVal ErrorText as String) Handles MyUserControl.UserErrorOccured
    errorLabel.Text = ErrorText
End Sub 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-16T19:52:52.327

如果层次结构是可预测的，这样的事情应该可以工作。

```
Me.Owner.FindControl("controlName") 
```

或者...

```
Me.Owner.Parent.FindControl("controlName") 
```

或者...

```
Me.Owner.Parent.Parent.FindControl("controlName") 
```

如果它不可预测，那么您将不得不编写一个递归（昂贵）函数来查找控件。不过要小心你的方法，因为如果在大页面上过度使用这种类型的算法会变得缓慢和笨拙。

这是一个在 VB 中向后搜索树（从子到父）并找到控件的示例：

```
Protected Function FindControlByID(ByRef childControl As Control, ByVal ID As String) As Control
    Dim ctrl As Control = childControl.FindControl(ID)
    If Not ctrl Is Nothing Then
      Return ctrl
    Else
      If Not childControl.Parent Is Nothing Then
        Return FindControlByID(childControl.Parent, ID)
      Else
        Return Nothing
      End If
    End If
  End Function 
```

我会这样称呼它：

```
Dim lbl As Label = FindControlByID(Me.Owner, "label1") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-16T20:05:51.677

创建一个接口，例如：

```
public interface IStatusDisplayer
{
   Label StatusLabel { get; }
} 
```

在显示错误/状态标签的任何页面上实现接口。如果您的用户控件需要访问标签，您可以这样做：

```
var statusDisplayer = this.Page as IStatusDisplayer;
if (statusDisplayer != null)
{
    statusDisplayer.StatusLabel.Text = "Hello World!";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T19:58:18.463

从用户控件内部

```
Me.NamingContainer.FindControl("label1") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-25T11:15:39.007

```
Control ct = WebUserControl11.FindControl("DropDownList1");

DropDownList dt = (DropDownList)ct;

TextBox1.Text = dt.SelectedValue.ToString(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T20:03:32.447

我想到了一些其他的想法。Page 类中有一个“Items”集合，可用于存储一个值或 Session 对象以实现类似的想法。另一种是在页面上公开一个公共方法来更新标签。该架构可能存在 AJAX 问题，因为我不确定回调可以如何同时更新页面的多个区域，所以这只是一个警告，我并不是说我遇到了这个问题。

TheSteve 的回答也有效，并且是我过去不得不这样做的方式，尽管在控件周围折腾可能会很棘手。不过，我也会支持安德鲁的回答。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-09T14:33:22.697

这个很简单，首先需要访问母版页ContentPlaceHolder：

```
Dim ContentPlaceHolder1 As ContentPlaceHolder = TryCast(Page.Master.FindControl("ContentPlaceHolder1"), ContentPlaceHolder) 
```

然后使用 ContentPlaceHolder 您现在可以在 aspx 页面上找到控件的 ID：

```
TryCast(ContentPlaceHolder1.FindControl("LiteralOnParentASPXPage"), Literal).Text = "some text" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-11T17:09:29.310

这是一种蛮力方法，但当控件深埋在控件层次结构中时，它会起作用：

```
private Control GetTextEditor(ControlCollection controls)
{
    foreach (Control ctrl in controls)
    {
        if (ctrl.ID != null && ctrl.ID == "teMessage")
            return ctrl;
        if (ctrl.Controls.Count > 0)
        {
            Control inner = GetTextEditor(ctrl.Controls);
            if (inner != null)
                return inner;
        }
    }
    return null;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-28T10:40:33.290

要访问意味着从 .aspx 文件中的 .ascx 启用/禁用控件，试试这个代码它也是解决方案。

```
protected void Page_Load(object sender, EventArgs e)
{
    Control ct = PEM.FindControl("btnInsert");
    Button btn = (Button)ct;
    btn.Enabled = false;
} 
```

# ruby-on-rails - 当 JavaScript 被禁用时，如何获取 Rails link_to_remote 标记以发出 DELETE 请求？

> ID：1003482
> 
> 赞同：1
> 
> 时间：2009-06-16T19:22:57.017
> 
> 标签：ruby-on-rails, rest, unobtrusive-javascript, link-to-remote

我正在使用以下代码作为链接来删除我正在制作的简单待办事项列表应用程序中的待办事项：

```
<%= link_to_remote 'delete', {:url => complete_todo, :confirm => 'Are you sure?', :method => :delete}, { :href => url_for(complete_todo), :method => :delete } %> 
```

启用 JavaScript 时它工作正常，但禁用它时它向服务器发出 GET 请求而不是预期的 DELETE 请求，因此链接到待办事项的显示页面而不是破坏它。

因为我试图使应用程序尽可能保持 RESTful，所以我不想添加一个路由来允许使用 GET 请求运行销毁操作。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T20:23:32.357

[与以往一样，Ryan Bates 用 Railscast： Destroy without JavaScript](http://railscasts.com/episodes/77-destroy-without-javascript)来拯救。

# asp.net - 更新面板动画未显示

> ID：1003483
> 
> 赞同：0
> 
> 时间：2009-06-16T19:23:02.150
> 
> 标签：asp.net, ajax, updatepanel

在流行博客中遵循简单的“食谱”时，我似乎无法弹出带有动画 GIF 的更新面板。

我们正在使用带有 VB 代码隐藏页面的 ASP.NET 3.5（一点点 AJAX，但并不复杂）。用户会看到一个“选择页面”，里面装满了他们可以编辑的数据。该页面在顶部有一些复选框和下拉列表，用作下方网格视图的过滤器。单击给定行上的相应链接会将您重定向到该项目的详细信息页面。

复选框在触发时会导致再次访问数据库以获取数据网格绑定到的对象列表（指示要从数据库中读取的对象类别）。下拉列表用于“过滤”显示。这些过滤器运行得非常快——那里没问题。但是，对数据库的某些访问会调用大量历史数据，并且需要一段时间才能重新显示页面。我们希望在屏幕上显示一些东西来告诉用户软件正在运行。

我们决定尝试[在 Matt Berseth 的博客中使用的方法](http://mattberseth.com/blog/2007/10/yui_style_ajax_progress_indica.html)

不幸的是我一定做错了什么，因为我没有得到弹出动画面板。

第一个区别是有问题的页面有一个母版页——我不知道这是否很重要。但这里是 asp:Content 和 asp:ScriptManager 标签之后的 aspx 片段：

首先，我在引用页面上的示例中具有 onUpdating 和 onUpdate 函数，仅修改为符合我的 GridView 的名称。

然后是“包装” div 的开头，它以复选框和下拉列表所在的表格开头。

它们如何定义的示例如下：

```
 <asp:TableCell ID="TableCell4" runat="server"><asp:CheckBox ID="chkShowCancelled" runat="server" Text="Cancelled" AutoPostBack="True" /></asp:TableCell>
    <asp:TableCell>TO#:<asp:DropDownList ID="ddlTO" runat="server" AutoPostBack="True"></asp:DropDownList></asp:TableCell> 
```

之后，是带有gridview的UpdatePanel：

```
<asp:UpdatePanel ID="updatePanel" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:GridView ID="grdRequests" runat="server" Style="z-index: 100; left: 0px; top: 0px" 
            AutoGenerateColumns="False" CellPadding="4" Font-Size="Small" ForeColor="#333333" 
            GridLines="None" PageSize="25" AutoGenerateSelectButton="False" AllowSorting="True" Width="100%" EnableViewState="False">
            <HeaderStyle CssClass="tableheader" />
            <FooterStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />
            <RowStyle BackColor="#EFF3FB" />
            <Columns>
                 ...Template Fields Deleted for Brevity...
            </Columns>
            <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
            <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
            <HeaderStyle BackColor="#034EA1" Font-Bold="True" ForeColor="White" />
            <EditRowStyle BackColor="#2461BF" />
            <AlternatingRowStyle BackColor="White" />
        </asp:GridView>
    </ContentTemplate> </asp:UpdatePanel> 
```

紧随其后的是 AnimationExtender 和弹出面板

```
<cc1:UpdatePanelAnimationExtender runat="server" TargetControlID="updatePanel">
    <Animations>
        <OnUpdating>
            <Parallel duration="0">
                <ScriptAction Script="onUpdating();" />
            </Parallel>
        </OnUpdating>
        <OnUpdated>
            <Parallel duration="0">
                <ScriptAction Script="onUpdated();" />
            </Parallel>
        </OnUpdated>
    </Animations>
</cc1:UpdatePanelAnimationExtender>
<asp:Panel ID="pnlPopup" runat="server" CssClass="progress" style="display:none;">
    <div class="pcontainer">
        <div class="pheader">Loading, please wait...</div>
        <div class="pbody">
            <img alt="Progressing..." src="~/Images/activity.gif" />
        </div>
    </div>
</asp:Panel> 
```

然后只是表格之前“包装” div 的结束标记。

在示例中，Matt 只是在他的 Page.Load 中使用 System.Threading.Thread.Sleep(3000) 语句让页面进入睡眠状态（在检查 IsPostback 之后），让动画弹出并显示。我在 Page.Load（VB 中的代码隐藏）中进行了很多操作，但是当我单击其中一个复选框（以进行长途访问数据库）或从下拉菜单中选择某些内容时，动画根本不会出现 -下列表（过滤我已经拥有的结果）。

如果重要的话，包含 Table、GridView、UpdatePanel、UpdatePanelAnimationExtender 的包装 div 定义为没有属性。它实际上只是为了从 asp 标签中描述 Javascript。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T19:33:35.297

好的，我已将 AJAX 控制工具包 1.0 与 .net 2.0 一起使用，并且我的更新面板运行良好。

首先，您的 javascript 代码在哪里？

编辑：这是我的有效代码：

```
 <ContentTemplate>
                                     <asp:UpdateProgress id="tab1Updating" runat="server" AssociatedUpdatePanelID="tab1Update">
                                                    <ProgressTemplate>
                                                        <div>
                                                            <img src="./IMG/loader.gif" alt="loading" /> 
                                                               Please Wait...
                                                        </div>
                                                    </ProgressTemplate>
                                     </asp:UpdateProgress>
                             </ContentTemplate>
                             </asp:UpdatePanel>

                         </ContentTemplate> 
```

# apache-flex - 将 ActionScript 对象映射到类？

> ID：1003486
> 
> 赞同：1
> 
> 时间：2009-06-16T19:23:39.077
> 
> 标签：apache-flex, actionscript-3

如果我有一堆普通的旧对象，将它们映射到一堆类的最佳方法是什么？

例如，如果我使用 HTTPService 来提取一些 JSON，然后对其进行反序列化，我将拥有一堆看起来像这样的对象：

```
{ type: "person",
  id: 42,
  name: "David" } 
```

我想把它们变成一个 Person 类的实例：

```
class Person {
    id:int;
    name:String;
} 
```

有没有一些标准的、通用的方法来做到这一点？

（还要考虑：处理对象之间关系的一些标准方法怎么样？例如，如果 Person 有一个额外的“配偶”字段：

```
{ type: "person", spouse: 61, ... } // Where 61 is the ID of the spouse 
```

)

谢谢，大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T20:02:39.717

没有标准的方法可以做到这一点，但是您可以通过 2 种不同的方式来解决它。

版本 1：构造方法

```
public class Person {
 public function Person(raw:Object=null) {
  if (raw != null) {
   for ( var key:String in raw ) {
    try {
     this[key] = raw[key];
    } catch (e:Error) {}
   }
   ... 
```

这很容易出错。如果名为*key*的属性不存在，分配将失败，并且如果类型不匹配或无法自动强制，它也会失败。

版本 2：flash.utils.describeType()

更复杂，给你更多的控制。首先，您必须创建一个 Person 实例并调用 describeType()。

```
var o:Object = { ... } // raw person data
var p:Person = new Person();
var typeDesc:XML = flash.utils.describeType( p );
for (var key:String in o) {
 var node:XML = typeDesc.variable.(@name==key)[0];
 if ( node != null ) {
  // Person class has a property *key*
  p[key] = o[key];
 }
} 
```

但是在使用 getter 和 setter 而不是公共变量时要小心。您不能使用 typeDesc.variable 访问它们，而是必须使用 typeDesc.accessor 并检查其访问属性是否不是只写的。

关于您的类型键。要动态加载类，您可以执行以下操作：

```
var clazz:Class = flash.utils.getDefinitionByName(raw.type+"");
var person:Person = Person( new clazz() ); 
```

当然 raw.type 可能包含*Person*或*com.package.Person*只要您的目标类存在并且正在与项目一起编译或使用 SWC 动态加载。

看一眼：

[http://livedocs.adobe.com/flex/3/langref/flash/utils/package.html#getDefinitionByName()](http://livedocs.adobe.com/flex/3/langref/flash/utils/package.html#getDefinitionByName()) 和[http://livedocs.adobe.com/flex/3/langref/flash/utils/package。 html#describeType()](http://livedocs.adobe.com/flex/3/langref/flash/utils/package.html#describeType())

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T20:23:48.817

为了使事情保持清洁和不易出错，我会使用单独的对象来完成这两项任务。例如，要处理转换，您可能有以下对象：

```
public class PersonFactory 
{
    function buildFromGenerics(objects:Array):Array
    {
        var a:Array = [];
        var l:int = objects.length;

        for (var i:int = 0; i < l; i++) 
        {
            var o:Object = objects[i];
            var p:Person = new Person();
            p.id = o['id'];
            p.name = o['name'];
            a[i] = p
        }

        return a;
    }
} 
```

将此步骤的所有逻辑移动到一个单独的对象中可以让您隔离此功能，该功能实际上独立于实际的 Person 对象，因此其中没有业务。

对于第二种情况，我将使用一个单独的对象来保存所有 Person 对象，并提供一个接口来检索它们，如下所示：

```
public class PersonCollection
{
    private var _people:Array;

    public function setPeople(people:Array):void
    {
        _people = people;
    }

    public function getPersonByID(id:int):Person
    {
        var l:int = _people.length;

        for (var i:int = 0; i < l; i++) 
        {
            var p:Person = _people[i];

            if (p.id == id)
            {
                return p;
            }
        }

        return null;
    }
} 
```

这种分离有助于保持您的代码干净，并且还提供了一种简单的方法来使用和管理它。希望有帮助。

# c# - IE 8 只能访问会话 cookie？

> ID：1003490
> 
> 赞同：1
> 
> 时间：2009-06-16T19:24:51.163
> 
> 标签：c#, .net, cookies, internet-explorer-8

我正在从事的项目从浏览器获取 cookie 以检查某些内容。在 FF、Safari 或 Chrome 中，这可以正常工作，但在 IE 8 中（没有要测试的早期版本的 IE，MSFT 不会让我卸载 IE 8 并拥有一个工作的 IE 7），它唯一的 cookie看到的是会话 cookie，而不是任何持久性 cookie（在 Internet 临时文件中找到的那些）。这种完全相同的方法在应用程序的其他地方使用，并且在 IE 8 中，当它在自己的页面上时，工作正常。只有当它作为一个小像素包含在另一个页面上时，它似乎无法找到 cookie。我查看了请求，看看它是否在不同的域下，但不，在同一个域下。这很奇怪，因为它可以看到会话 cookie（那些没有过期的应该在浏览器会话结束时过期的），但没有别的。

以前有人见过这样的事情吗？我会尽快回复任何问题。

这是在 .NET 中使用简单的 Context.Request.Cookies

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-29T22:06:19.583

这可能是隐私政策。您可以设置一些标题以允许来自其他域的 cookie，而不是地址栏中显示的域。这是[我找到](http://www.hanselman.com/blog/TheImportanceOfP3PAndACompactPrivacyPolicy.aspx)的关于如何修复它的最佳描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-01T01:17:09.457

缝合 IE8 中的错误： [http ://connect.microsoft.com/IE/feedback/details/369240/ie8-will-not-send-third-party-cookies-set-in-another-window-tab](http://connect.microsoft.com/IE/feedback/details/369240/ie8-will-not-send-third-party-cookies-set-in-another-window-tab)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-29T19:48:37.037

一些垃圾邮件发送者使用 1x1 图像和 iframe 来填充附属 cookie，而 IE8 显然对这种技术采取了措施。作为反垃圾邮件攻击的无辜受害者，您会遭受痛苦吗？

# c++ - 如何从OpenGL中的纹理中删除黑色背景

> ID：1003497
> 
> 赞同：3
> 
> 时间：2009-06-16T19:25:51.630
> 
> 标签：c++, c, opengl, alpha, blending

我正在寻找一种方法来删除 24 位位图的背景，同时保持主图像完全不透明，到目前为止，混合已经达到了目的，但现在我需要保持主要位不透明。我在谷歌上搜索过，但没有发现任何帮助，我想我可能正在搜索错误的术语，所以任何帮助将不胜感激。

编辑：是的，对不起，我现在使用黑色作为背景。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-16T19:47:19.217

When you are creating the texture for OpenGL, you'll want to create the texture as a 32-bit RGBA texture. Create a buffer to hold the contents of this new 32-bit texture and iterate through your 24-bit bitmap. Every time you come across your background color, set the alpha to zero in your new 32-bit bitmap.

```
struct Color32;
struct Color24;

void Load24BitTexture(Color24* ipTex24, int width, int height)
{
   Color32* lpTex32 = new Color32[width*height];

   for(x = 0; x < width; x++)
   {
      for(y = 0; y < height; y++)
      {
         int index = y*width+x;
         lpTex32[index].r = ipTex24[index].r;
         lpTex32[index].g = ipTex24[index].g;
         lpTex32[index].b = ipTex24[index].b;

         if( ipTex24[index] == BackgroundColor)
            lpTex32[index].a = 0;
         else
            lpTex32[index].a = 255;
      }
   }

   glTexImage2D(GL_TEXTURE_2D, 0, 4, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, lpTex32);

   delete [] lpTex32;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-16T19:47:02.713

You will need to load your textures with GL_RGBA format in your call to glTexImage2D. If you have done this then you just need to enable blend:

```
 /* Set up blend */
glEnable(GL_BLEND);
glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T19:44:52.123

这听起来有点令人困惑。24 位图像没有透明度，它只是一个 RGB 值数组。“保持主要部分不透明”是什么意思？您是否想让所有具有某种颜色的像素（例如所有黑色像素）透明？如果这是您想要的，您可以使用 google [opengl 透明蒙版](http://www.google.com/search?q=opengl+transparency+mask)（例如，参见[NeHe #20](http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=20)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T19:45:14.010

您真正需要的是图像中的 Alpha 通道。由于它是 24 位的，因此您没有，但您可以在加载图像时动态创建一个，只需将每个黑色 (0x000000) 像素的 alpha 设置为零即可

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-06-16T19:42:41.067

在我看来，您正在寻找模板缓冲区，它仅用于这种限制绘图区域的任务。

缓冲区存储与每个像素关联的值，其中 1 个后续绘图将被渲染，而它为 0 将被屏蔽。通常，模板缓冲区与多通道渲染技术一起使用，以创建反射和平视显示器之类的东西。

# .net - WPF 中的 Richtextbox 是否有任何开源免费替代品？

> ID：1003499
> 
> 赞同：1
> 
> 时间：2009-06-16T19:25:59.523
> 
> 标签：.net, wpf, richtextbox

我需要创建一个可以打开大约 10 mb 日志文件并突出显示某些表达式的应用程序。

我认为使用 WPF 和richtextbox 会起作用，但是richtextbox 的渲染时间是不可接受的。

有没有像突出显示一样具有丰富文本框但性能更好的东西？

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T19:31:12.307

Scintilla [http://www.scintilla.org/](http://www.scintilla.org/)用作编辑代码的框。它为许多不同的代码语法提供高亮显示。您可以使用它并指定您需要突出显示的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:34:56.653

如果您不需要允许用户编辑日志，您可以使用 TextBlock 并将要突出显示的部分包装在`<Style>`完成突出显示的标签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T15:11:47.833

你是如何生成你的 Flowdocument 的——取决于你在做什么，你可以加快它的速度。但是，我也遇到了这些问题，特别是因为您*必须*在 UI 线程上生成 FlowDocument，如果花费的时间太长，您最终会出现黑屏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-01T20:56:53.720

如果我明白你在说什么，你想要一个突出显示 RTB 控件的语法。我个人最喜欢的是 AvalonEdit 控件，（这里有一篇关于 codeproject 的文章：http: [//www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor](http://www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor)）它可以像 Visial 中的编辑器一样语法高亮工作室。它甚至具有自动完成功能，您的最终用户会喜欢的。

如果你想要别的东西，还有 ICSharp 代码编辑器。（这是关于 codeproject 的另一篇文章：http: [//www.codeproject.com/Articles/30936/Using-ICSharpCode-TextEditor](http://www.codeproject.com/Articles/30936/Using-ICSharpCode-TextEditor)）这一篇几乎与 AvalonEdit 具有相同的功能，我也喜欢这个。我实际上在我制作的应用程序中使用了 ICSharp 代码编辑器，并且对这些功能非常满意。

据我所知，这两个控件都非常有效，并且比一个富文本框更好。

# c# - 使用 IPAddress 列序列化 DataTable

> ID：1003501
> 
> 赞同：2
> 
> 时间：2009-06-16T19:26:02.317
> 
> 标签：c#, .net, configuration, serialization

我将 C# 与 .NET 3.5 一起使用。

我正在使用 System.Configuration.ApplicationSettingsBase 类来加载和保存应用程序设置。我想保留的设置之一是内存中的 System.Data.DataTable。DataTable 分别只包含 UInt32 和 System.Net.IPAddress 类型的两列。当我在 ApplicationSettingsBase 上调用 Save() 函数时，出现以下异常：

InvalidOperationException：System.Net.IPAddress 无法序列化，因为它没有无参数构造函数。

如果我只是使用 System.Net.IPAddress 对象而不是 DataTable 作为设置，我没有问题。导致异常的 DataTable 中有一些关于它的内容。

任何想法可能会发生什么？关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T19:32:04.850

该错误解释了问题 - 将其存储为字符串。如果您需要使用 IPAddress 类，您可以使用 ToString 和 Parse 在两者之间进行转换。该错误是由于 DataTable 进行序列化的方式造成的。

试试这个代码：

```
IPAddress ip = IPAddress.Parse("192.168.0.1");
XmlSerializer serializer = new XmlSerializer(typeof(IPAddress));  
MemoryStream ms = new MemoryStream();
serializer.Serialize(ms, ip); 
```

然后试试这个：

```
IPAddress ip = IPAddress.Parse("192.168.0.1");
BinaryFormatter serializer = new BinaryFormatter();
MemoryStream ms = new MemoryStream();
serializer.Serialize(ms, ip); 
```

您将看到，当您将 IPAddress 对象放入数据表时，默认使用 XmlSerializer。

有趣的是尝试将 RemotingFormat 属性更改为二进制，我相信这可能会解决问题。[数据表.RemotingFormat](http://msdn.microsoft.com/en-us/library/system.data.datatable.remotingformat.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T19:34:46.107

我认为[XmlElementAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.aspx)可能会解决您的问题

# javascript - 阻止 JavaScript 关闭窗口

> ID：1003502
> 
> 赞同：1
> 
> 时间：2009-06-16T19:26:09.320
> 
> 标签：javascript

我的公司需要使用另一家公司在 ASP.NET 中开发的应用程序。该应用程序需要在两个单独的浏览器窗口中打开。开发该应用程序的公司在主页顶部添加了一些 JavaScript，以阻止用户打开该应用程序的多个实例。放在主页顶部的脚本如下：

```
<script type="text/javascript">
  function OpenApplicationWindow() {
    var sessionId = 'sidus455bjzspf55cunqrv55';
    if (window.name.search(sessionId) == -1) {
        window.open(window.location.href, sessionId, "resizable=yes,scrollbars=yes,toolbar=no,status=yes");
      window.open('', '_parent', '');
      window.close();
    }
  }
  OpenApplicationWindow();
</script> 
```

无论如何打开指向该页面的链接并允许打开多个实例？或者无论如何阻止该脚本运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T19:58:16.527

You can use [GreaseMonkey for IE](http://www.gm4ie.com/), and create a small custom script to overwrite or remove the offending script.

More [information](http://www.ghacks.net/2008/11/16/install-greasemonkey-scripts-in-internet-explorer/) about using greasemonkey scripts in IE.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:59:37.587

I suspect that the application attempts to block having multiple windows open at the same time to prevent race conditions caused by having two interfaces operating on the same session.

If you could have two windows open at once, it would probably break.

The simplest work around would be to run two separate browsers. Each one would get its own session and they wouldn't interfere with each other.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T19:39:32.557

除了禁用 JavaScript（这可能会导致其他问题）之外，我唯一能想到的就是编写一个小代理来去除这些东西。

如果您只在少数工作站上需要此功能，您可以使用 Fiddler 和脚本编辑器来检查和修改响应。

[http://www.fiddler2.com/Fiddler2/version.asp](http://www.fiddler2.com/Fiddler2/version.asp) -- 下载 Fiddler
[http://www.fiddler2.com/fiddler/FSE.asp](http://www.fiddler2.com/fiddler/FSE.asp) -- 下载脚本编辑器。
[http://www.fiddler2.com/Fiddler/Dev/ScriptSamples.asp](http://www.fiddler2.com/Fiddler/Dev/ScriptSamples.asp) - 请参阅此页面上的示例以删除所有 div 标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T20:19:25.220

尝试编写另一个具有相同名称的函数

打开应用程序窗口

什么都不做

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T19:35:37.930

阻止您打开另一个窗口的脚本是 window.open 的第二个参数，即 sessionid

在再次打开它之前，它正在检查是否不存在具有该名称的窗口。

不确定这是否是您真正要问的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T19:41:45.203

如果您使用的是 Firefox，您可以编写一个greasemonkey 脚本来覆盖JavaScript 函数。

# sql - 在 SQLObject 中执行 SQL LIKE

> ID：1003506
> 
> 赞同：0
> 
> 时间：2009-06-16T19:26:59.117
> 
> 标签：sql, orm, sqlobject

有没有一种很好的方法来执行带有`LIKE`in SQLObject 的 SQL 语句？

这个可行，但有点难看：

```
 fields = Foo.select("field LIKE '%%%s%%'" % bar) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-16T23:51:23.517

其中`sqlobject.sqlbuilder`有一个未记录的类`LIKE`，可以在其他查​​询元素中使用。

例如：

```
from sqlobject.sqlbuilder import LIKE

class Customer(SQLObject):
    name = StringCol()
    ...

# this search is case-dependent
rows = Customer.select(LIKE(Customer.q.name, "%Smith%"))

class ILIKE(LIKE):
    op = 'ILIKE'

# this search is case-independent, works on PostgreSQL, not sure about others
rows = Customer.select(ILIKE(Customer.q.name, '%smith%')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T20:01:23.527

[SqlBuilder](http://www.sqlobject.org/SQLBuilder.html) has a `LIKE` function (and also `startswith` and `endswith` ones that build appropriate `LIKE` clauses).

# deployment - 检测 ClickOnce 程序的服务器？

> ID：1003510
> 
> 赞同：2
> 
> 时间：2009-06-16T19:28:34.217
> 
> 标签：deployment, clickonce

我正在部署一个 ClickOnce 应用程序。我需要找到一种方法来检测应用程序是从哪个服务器下载和安装的——因为应用程序在启动时检查更新，我知道它知道“父”服务器的某个地方——我能以某种方式获得该值吗？

我需要这个值，因为安装的程序需要访问安装它的服务器上的服务 - 但该服务器可能会根据部署环境而变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T19:35:39.710

您可以使用

```
ApplicationDeployment.CurrentDeployment 
```

（特别是`ApplicationDeployment.CurrentDeployment.UpdateLocation`）访问与正在运行的实例关联的 ClickOnce 属性。

请注意，如果您正在调试，这些将不可用 - 您可以执行

```
if (ApplicationDeployment.IsNetworkDeployed) 
```

测试您是否通过 ClickOnce 部署运行应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T19:37:22.420

```
ApplicationDeployment.CurrentDeployment.ActivationUri 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.deployment.application.applicationdeployment.activationuri.aspx)

# c# - 可以从 UI 的 silverlight 数据网格中插入新行吗？还是仅通过修改数据源？

> ID：1003517
> 
> 赞同：1
> 
> 时间：2009-06-16T19:30:11.640
> 
> 标签：c#, .net, asp.net, silverlight

在 WinForms 中，可以使用网格中的最后一行向网格中添加新行，一些网格控件通过“插入”按钮提供此类功能。

Silverlight中包含的数据网格可以做到这一点吗？

我唯一可用的选项是使用插入按钮向用户提供输入控件，并手动将新行添加到集合中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T19:37:02.873

我认为这是对这个问题的欺骗：

[Silverlight (3.0) - 数据网格 - 用户通过数据网格添加数据](https://stackoverflow.com/questions/840068/silverlight-3-0-data-grid-user-adding-data-via-data-grid/840926#840926)

简而言之，包含的 DataGrid 的答案是否定的。不过，您也许可以找到满足您需求的第 3 方组件。

# c# - .NET Compact Framework 中的 LINQ to SQL 替换

> ID：1003523
> 
> 赞同：1
> 
> 时间：2009-06-16T19:33:14.753
> 
> 标签：c#, .net, linq-to-sql, compact-framework, mobile

我的任务是将我们的 .NET 桌面应用程序移植到移动设备上。我们的桌面应用程序使用 LINQ to SQL 与数据库进行交互。但是，LINQ to SQL 在移动设备上不可用。我们为 Windows Mobile 5 和 6 开发。

我正在讨论是否建议使用开箱即用的支持桌面和移动设备的不同 ORM（[http://www.entityspaces.net/portal/](http://www.entityspaces.net/portal/)对我来说似乎是最好的）。然而，由于我们的数据库相对较小（其中一个相对简单，只有 10 个表；另一个是 27 个表，但关联更复杂），我更倾向于自己重新编码域对象和数据访问函数。

有没有其他人遇到过这种情况？你做了什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T19:45:15.977

我个人可以推荐 LLBLGen。他们为 v1.0 和 2.0 提供 CF 框架支持。映射表格非常快速，生成的实体可用于移动设备和桌面设备。它也不贵，而且有很长的记录。根据您的要求，那将是最快的方式。在 POCO（普通旧 CLR 对象）中执行此操作并使用 Linq to Objects 是可行的，但需要更长的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T19:48:40.307

这里还有两个选项供您选择：

[http://www.llblgen.com/defaultgeneric.aspx](http://www.llblgen.com/defaultgeneric.aspx)

[http://www.devexpress.com/Products/NET/ORM/info.xml](http://www.devexpress.com/Products/NET/ORM/info.xml)

就个人而言，我从未在 Compact Framework 上使用过 LINQ to Sql，我所做的唯一接近的事情是在桌面上针对 SqlCe 使用 Linq to Sql。

现在取决于您的数据层的错误程度，可能值得看看您是否可以使用任何这些 ORM 并查看您现有代码中有多少是可重用的，或者仅重写它可能非常值得（再次，取决于项目规模）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T02:49:56.530

我的团队正在使用[T4](http://www.olegsych.com/2007/12/text-template-transformation-toolkit/)根据数据库的结构以及我们用来将 POCO 类和属性映射到 SQL Compact 表和列的约定来生成基本的 CRUD 操作。这有点工作，但工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T08:59:05.167

您不能直接使用 linq to sql 与 SqlServerCE。使用 CF，您只有 linq to Xml、Linq to DataSet 和 Linq to objects 风格可用。我正在开发一个移动应用程序，因为我正在使用 SqlCeResultSet 对象来使用数据，并且因为该对象实现了 IEnumerable，所以您可以将 Linq 与它一起使用。

也许这可以帮助你

[http://www.pluralsight.com/community/blogs/jimw/archive/2008/02/27/50325.aspx](http://www.pluralsight.com/community/blogs/jimw/archive/2008/02/27/50325.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T07:31:36.213

您可能想查看这个开源框架：
**Kea-Linq for Sql Compact & Compact Framework**？

[http://kea.codeplex.com/](http://kea.codeplex.com/)

# c++ - 如何强制 32 位版本的远程桌面客户端在 64 位 Vista 上运行？

> ID：1003524
> 
> 赞同：5
> 
> 时间：2009-06-16T19:33:24.423
> 
> 标签：c++, 64-bit, remote-desktop, vista64

我们需要在 64 位 Vista 上运行 32 位版本的远程桌面客户端，因为我们的部分产品集成了它，并通过虚拟通道与终端服务器端应用程序通信。集成加载了一些第三方32位驱动，在64位进程中无法加载32位dll。

通常从命令行运行 32 位版本的 windows 应用程序是很容易的，例如运行窗口：

```
C:\Windows\SysWOW64\Notepad.exe 
```

您可以通过签入 task monitor\processes 来判断该进程是 32 位的，因为它的文件名旁边将有一个 *32。

但是，远程桌面客户端 (mstsc.exe) 不想玩球。无论我如何启动它（运行窗口、32 位 cmd 窗口等），它总是从 C:\Windows\System32\mstsc.exe 运行 64 位版本。我尝试编写一个 32 位 C++ 程序来创建它（通常子进程也是 32 位的），但这不起作用。

我也试过打电话：

```
Wow64DisableWow64FsRedirection
Wow64RevertWow64FsRedirection 
```

在启动 mstsc.exe 之前和之后，但这也无济于事。

有人知道解决这个问题的方法吗？

[编辑] 我已经对进程监视器进行了一些进一步的调查，似乎 32 位版本的 mstsc 确实首先启动，但是这会创建第二个 64 位进程并且 32 位版本关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T03:11:14.313

你的问题很困惑（1）。系统上的每个可执行文件都被编译*为*32 位*或*64 位可执行文件。*如果*您有一个 64 位可执行文件，那么您如何调用它并不重要：从 32 位命令窗口、从“运行”菜单或从另一个 32 位程序；它将*始终*作为 64 位进程运行。

您可以通过在`dumpbin /HEADERS mstsc.exe`.

您需要下载并安装 32 位版本的`mstsc.exe`. 事实上，我相信`mstsc.exe`它在很大程度上独立于安装，因此您可以简单地从 32 位系统复制它并运行它。

更新：
[eran](https://stackoverflow.com/users/26039/eran)指出`mstsc.exe`直接调用 32 位并不能解决问题，因为`mstsc`检测到它在 64 位系统上运行并重新调用自身的 64 位版本。我不知道它为什么这样做，或者如何阻止它这样做。如果你这样做，请编辑这个答案。

*(1) 微软通过提供*许多32 位和 64 位版本的可执行文件，并神奇地重新映射 PATH 以便找到其中一个，极大地帮助了这种混淆；通常在*明显*相同的路径名。但这只是“smoke and mirrors”，实际上路径名总是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-04T02:38:37.210

请参阅[https://serverfault.com/questions/25969/how-can-i-force-the-32-bit-version-of-the-remote-desktop-client-to-run-on-64-bit](https://serverfault.com/questions/25969/how-can-i-force-the-32-bit-version-of-the-remote-desktop-client-to-run-on-64-bit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T15:07:15.297

您是否尝试过旧版本（例如，来自 Windows 2000）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-10T18:03:28.713

想一想，挂钩 IsWow64Process() 以返回 0 可能会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-07T02:19:37.863

不要试图强制解决问题，而是尝试解决它，例如使用 MSTSC.exe 的替代品，例如[FreeRDP](https://www.freerdp.com/)或[mRemoteNG](https://mremoteng.org/)。

# linux - Bash：如何遍历目录结构并执行命令？

> ID：1003528
> 
> 赞同：8
> 
> 时间：2009-06-16T19:34:06.607
> 
> 标签：linux, bash, command-line, directory, traversal

我已将一个大文本文件拆分为许多较小的文件集，以进行我正在做的性能测试。有很多这样的目录：

```
/home/brianly/output-02 (contains 2 files myfile.chunk.00 and myfile.chunk.01)
/home/brianly/output-04 (contains 4 files...)
/home/brianly/output-06 (contains 6 files...) 
```

需要注意的是，每个目录中的文件数量都在增加。我需要做的是针对输出目录中的每个文本文件运行一个可执行文件。该命令在单个文件中看起来像这样：

```
./myexecutable -i /home/brianly/output-02/myfile.chunk.00 -o /home/brianly/output-02/myfile.chunk.00.processed 
```

这里 -i 参数是输入文件，-o 参数是输出位置。

在 C# 中，我会遍历目录以获取每个文件夹中的文件列表，然后遍历它们以运行命令行。如何使用 bash 遍历这样的目录结构，并根据位置和该位置中的文件使用正确的参数执行命令？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-16T19:41:54.673

就像是：

```
for x in `find /home/brianonly -type f`
do
./yourexecutable -i $x -o $x.processed
done 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-16T20:06:52.097

对于这种事情，我总是将*find*与*xargs*一起使用：

```
$ find output-* -name "*.chunk.??" | xargs -I{} ./myexecutable -i {} -o {}.processed 
```

现在，由于您的脚本一次只处理一个文件，因此如前所述，直接使用*-exec*（或*-execdir*）与*find*一样有效，但我习惯于使用*xargs*，因为在喂食时通常效率更高一次对多个参数进行操作的命令。因此，它是一个非常有用的工具，可以放在一个人的实用腰带上，所以我认为应该提到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T19:56:58.807

正如其他人建议的那样，使用[`find(1)`](http://linux.die.net/man/1/find)：

```
# Find all files named 'myfile.chunk.*' but NOT named 'myfile.chunk.*.processed'
# under the directory tree rooted at base-directory, and execute a command on
# them:
find base-directory -name 'output.*' '!' -name 'output.*.processed' -exec ./myexecutable -i '{}' -o '{}'.processed ';' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T20:25:00.203

从提供的信息来看，这听起来像是对您的 C# 想法的完全直接的翻译。

```
for i in /home/brianly/output-*; do
    for j in "$i/"*.[0-9][0-9]; do
        ./myexecutable -i "$j" -o "$j.processed"
    done
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T19:41:18.200

这就是`find`命令的用途。

[http://linux.die.net/man/1/find](http://linux.die.net/man/1/find)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T19:46:58.080

使用查找和执行。看看以下

[http://tldp.org/LDP/abs/html/moreadv.html](http://tldp.org/LDP/abs/html/moreadv.html)

# .net - DotGNU 与 Mono

> ID：1003529
> 
> 赞同：24
> 
> 时间：2009-06-16T19:34:24.267
> 
> 标签：.net, mono

[DotGNU](http://www.gnu.org/software/dotgnu/)和[Mono](http://www.mono-project.com/Main_Page)似乎在解决同样的问题——即以免费、开源的方式实现 .NET CLR，同时着眼于跨平台兼容性。

我已经阅读了很多关于这两者的内容，而且我很难决定将哪个实现用于即将到来的项目。我的特定项目不需要 System.Windows.Forms，因此库的图形 UI 部分不会太重要。

那么：有没有人尝试过直接比较两者？任何一方相对于另一方的陷阱是什么？FOSS 社区对其中一个的支持是否比另一个多？

感谢所有回复的人：）

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-06-16T19:40:26.360

嗯，Mono 对我来说看起来像是一个更完整的端口，有更多的支持。

从网站上看，DotGNU 似乎是在告诉人们不要使用 .NET，因为它是在提供一个可行的替代方案。许多链接（例如“最新更改”）似乎没有任何用处。

另一方面，Mono 显然正在积极开发中，支持新的 DLR，实现了 C# 3.0 和 LINQ 支持，可以从多个平台的包中安装，有工作文档等。赢家对我来说似乎很清楚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-08-11T12:56:00.297

Dotgnu 不支持泛型和匿名委托，而 mono 支持。

我已经在许多有和没有 libjit 的平台上成功地从 git 源代码编译了 dotgnu。我从他们的最新来源编译单声道的成功要少得多。

如果您使用 libjit (./configure --with-jit) 编译 pnet，则 dotgnu 的性能在 nbody 基准测试中略好于单声道。

因此，如果您需要泛型，请选择单声道。否则，请使用 dotgnu。

PS：dotgnu git-sources 有*一定*的发展——我偶尔更新一次，并且可以经常看到新的提交。

# asp.net-mvc - ASP.NET MVC 托管在 DiscountAsp.Net 并使用域指针

> ID：1003533
> 
> 赞同：1
> 
> 时间：2009-06-16T19:35:14.077
> 
> 标签：asp.net-mvc, url-routing

我在 DiscountASP.NET 上托管了一个网站，他们可以选择使用您的同一托管帐户为单独的域添加域指针。因此，如果原始站点是 abc.com，您可以购买指向 xyz.com 的域指针，并且两者最初都指向相同的根位置。使用 abc.com 的根目录是可以的，但是当 xyz.com 是地址时，我想重新路由到包含 xyz.com 代码的单独子目录。我会在哪里尝试重定向 xyz.com 以引用子目录的代码而不是使用根目录？我认为处理通常所有路由代码所在的 Global.asax 为时已晚，因为我希望每个站点的 Global.asax 文件独立处理各自的站点。

DiscountAsp.Net 论坛上的经典 ASP 帖子讨论了将如下代码添加到默认文档中。

If InStr( UCase(Request.ServerVariables("SERVER_NAME")), UCase("subdomain1.YourHostedDomainName.com") ) > 0 Then Response.Redirect("/subdomain1") ElseIf InStr( UCase(Request.ServerVariables("SERVER_NAME" )), UCase("subdomain2.YourHostedDomainName.com") ) > 0 Then Response.Redirect("/subdomain2") ElseIf InStr( UCase(Request.ServerVariables("SERVER_NAME")), UCase("subdomain3.YourHostedDomainName.com" ) ) > 0 Then Response.Redirect("/subdomain3/home.asp") End If

ASP.NET MVC 是我的第一个 Web 项目，据我所知，所有路由流程都通过 RegisterRoutes() 和 Global.asax 中设置的路由集合。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T21:17:02.173

您需要将子文件夹单独设置`Application`（在 DiscountAsp.net 的控制面板中）

然后，尝试编写一个`HttpModule`调用`Response.Redirect`来将浏览器重定向到根域上的子文件夹。

如果您想将用户保留在子域中，我认为这是不可能的。我从未使用过 ASP .Net MVC，但我假设路由是按注册`AppDomain`的，这意味着每个子域的文件夹必须是自己的`Application`。没有办法（AFAIK）跨`AppDomain`s 转移执行（`Server.Transfer`不会这样做）。

如果我错了，并且可以在不使用单独`Application`的 s 的情况下执行此操作`HttpModule`，请调用`Server.Transfer`来自子域的请求（并确保链接相对于代表子域的文件夹；〜路径不起作用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T19:45:58.673

MVC 中的路由管理器是将 url 映射到控制器。控制器是代码，位置并不重要。我不知道使用路由进行重定向的方法是您正在寻找的。DiscountASP.Net 应该有一种方法可以将您的新域指向不同的文件夹，我会检查您的控制面板以获取执行此操作的方法。

如果您在 IIS 7 上，这可能会使用主机标头为您进行定向。在这种情况下（无论是否为 IIS 7），您应该知道您可能会在网站中运行网站。如果您的根站点不是 asp.net，事情可能会更容易，但是，如果您的根 (abc.com) 是一个 asp.net 站点（听起来您的问题并非如此，但这是很好的信息，所以无论如何我都会告诉你）web.configs 将是附加的。

```
- root
|
|- xyz.com
 |
 |- web.config (xyz.com)
|
|- web.config (abc.com) 
```

请注意，abc.com 的 web.config 将首先应用，然后是 xyz.com，它们可能会发生冲突并产生烦人的问题。但是您应该首先检查您的控制面板，以便将您的新域指向不同的文件夹。从一个共享主机帐户运行多个网站可能会带来很多麻烦，所以我祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T20:12:11.320

您似乎正在尝试运行两个单独的网站，其中一个位于子域上。

我不使用 DiscountAsp.Net，但它们应该允许您建立一个单独的网站来为您的子域提供服务；联系他们的支持。

# linq-to-sql - Linq to Sql + 自定义数据类型

> ID：1003544
> 
> 赞同：0
> 
> 时间：2009-06-16T19:37:28.113
> 
> 标签：linq-to-sql, entity

我创建了一个自定义 asp.net 控件，允许您将对象绑定到它，它的功能有点像 winform propertygrid。

这是我的问题：控件查看类的公共属性和类型，如果它检测到一种颜色，它会呈现颜色选择器等。对于我创建的类非常有用 - 但是在使用来自的实体时效果不佳链接，因为它的公共属性是原始类型（int、string、bool）。

我在 sql2005 中创建了一个名为 color 的自定义数据类型，我希望它能够延续到 linq 创建的实体，但它认为它是它的底层类型，即 System.String

那么，我如何创建我的实体类型但让 .NET 看到其他类型？我可以在将类型返回给调用者之前更改类型吗？

IE：

```
public IEnumerable<SomeObject> GetSomething()
{
   MyEntity entity = new MyEntity("constr");
   var a = blahblah...;

   // Modify the types here?
   return a;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T19:55:27.407

On the LinqToSQL Designer you can change the property type of a field. Have you tried changing that?

You might also be able to write a partial class of that class and include a convert function that switches it to the correct type (IConvertable maybe?).

# actionscript-3 - 如何在 AS3 中获取无包类的定义名称？

> ID：1003548
> 
> 赞同：0
> 
> 时间：2009-06-16T19:38:32.573
> 
> 标签：actionscript-3, reflection, actionscript, introspection

假设您有一个如下所示的 flexunit 测试：

```
package foo {
    import flexunit.framework.TestCase;
    import flash.utils.getDefinitionByName;
    import flash.utils.getQualifiedSuperclassName;
    class DescribeTypeTest {
      public function testDescribeInnerType():void {
        var currentInstance:ChildBar = new ChildBar();
        trace(getDefinitionByName(getQualifiedSuperclassName(currentInstance)));
      }
    }
}
class Bar{}
class ChildBar extends Bar{} 
```

这会引发异常“错误 #1065：未定义变量 Bar。” 它仅适用于内部类（包外的类）。

有没有人有办法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T01:18:40.563

不确定是否有任何解决方法，但只是为了确认：

[http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/utils/package.html#getDefinitionByName()](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/utils/package.html#getDefinitionByName())：

> getDefinitionByName () 函数
> public function getDefinitionByName(name:String):Object 语言版本 : ActionScript 3.0 运行时版本 : AIR 1.0, Flash Player 9 返回对 name 参数指定的类的类对象的引用。
> 
> 参数
> 
> name:String — 类的名称。Returns Object — 返回对 name 参数指定的类的类对象的引用。
> 
> **引发 ReferenceError — 不存在具有指定名称的公共定义。**

由于 Bar 和 ChildBar 都是非公开的，因此您会收到 ReferenceError。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T00:42:42.227

我刚刚使用 Flex 3.3（AIR 应用程序）测试了以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml"
    creationComplete="t();">
    <mx:Script>
        <![CDATA[
            import flash.utils.describeType;
            import flash.utils.getQualifiedSuperclassName;
            private function t():void {
                trace(getDefinitionByName(getQualifiedSuperclassName(new FooBar())));
            }
        ]]>
    </mx:Script>
</mx:WindowedApplication> 
```

酒吧

```
package
{
    public class Bar
    {
    }
} 
```

FooBar.as

```
package
{
    public class FooBar extends Bar
    {
        public function FooBar()
        {
            super();
        }        
    }
} 
```

作为跟踪结果，我看到：

```
[SWF] DefTest.swf - 1,024,228 bytes after decompression
[class Bar] 
```

你能证实这一点吗？这有帮助吗？

# asp.net - 有人还在使用 Access 进行 Web 开发吗？

> ID：1003553
> 
> 赞同：1
> 
> 时间：2009-06-16T19:41:39.540
> 
> 标签：asp.net, database, ms-access

是的，我知道，你们都吓得瑟瑟发抖。早在那天，我就开始使用经典的 ASP 和 MS Access 编写内部应用程序。我正在编写一个小型营销应用程序，但我最近被拒绝访问我们的 SQL Server。所以我一直在寻找替代品。数据输入会很少，大部分只是读取静态数据。我听说那里有不错的替代品，例如 SQLite 或 Sybase SQL Anywhere web。我想我的问题是...

现在甚至认为 Access 是可行的吗？

如果没有，有哪些基于文件的数据库替代品可用？

感谢您的输入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T19:45:43.450

一个叫做[MySQL](http://www.mysql.com/)的小东西，除非你绝对肯定在这种情况下它将是单用户，否则[SQLite](http://www.sqlite.org/)很棒，但你确实说 Web 开发，所以我不推荐它。

不，使用 MS Access 不再有意义。

**一个 15 秒[的 MySQL 和 ASP 入门](http://www.15seconds.com/issue/050210.htm)**指南。（注意它有点旧，但我很确定这是一个好的开始）或者，这个[谷歌搜索](http://www.google.com/search?q=mysql+asp&sourceid=navclient-ff&ie=UTF-8&rlz=1B3GGGL_enUS309US309)带来了大量的其他教程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-16T19:46:58.937

试试[SQL Server Express](http://www.microsoft.com/express/sql/)，它比访问便宜，因为它是免费的

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-16T19:48:40.383

您可以将 XML 文件与 LINQ 一起使用，这将使您能够查询信息，这可能比使用 Access 更容易一些。

只是一个建议，因为您说它主要是静态信息，几乎没有变化。SQL会好得多:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-16T19:46:54.147

“我 [被] 拒绝访问我们的 SQL Server。” ——必须热爱内部政治！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-16T19:57:58.540

[本文](https://stackoverflow.com/questions/35232/would-building-an-application-using-a-sql-server-database-file-mdf-be-a-terribl)有几个关于使用 SQL Server .mdf 文件的答案。您可能只需要一些用于运行时的 dll 或服务器上安装的 SQL Server Lite/compact/Free 版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T19:44:42.093

不幸的是，是的。我们都讨厌这里，但这是我们目前对某些应用程序所坚持的。

真的，我不会考虑使用它。有很多更好的选择。即使是 SQL 桌面版也会让您物超所值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-16T19:46:09.580

可悲的是，它仍在使用，但在新项目中几乎没有那么多。MySQL 是免费和开源的，因此它很容易取代 Access。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-16T19:47:50.700

我肯定会建议您尝试 SQLite。它具有成熟关系数据库的大部分功能，并且是基于文件的。

这是来自 aspfree.com 的描述：[使用 SQLite 进行简单的数据库访问](http://www.aspfree.com/c/a/Database/Using-SQLite-for-Simple-Database-Storage/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-16T19:48:24.847

远程设置要容易得多 - 当您无法访问机器的桌面时。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-06-16T20:10:26.597

几年前，我曾在一家财富 100 强公司工作，该公司在每个制造地点都拥有一个大型 Access 数据库应用程序的副本（其中大约 125 个在我工作的特定业务部门中）。每个月每个站点都会将他们的数据库通过电子邮件发送给应用程序所有者，后者将手动合并他们的数据以生成“大报告”。

我的任务是将后端迁移到集中式 MS SQL Server，但让应用程序处于访问状态。我不骗你。他们想要一个与集中式 SQL Server 数据库结合的 Access 前端。再多的说服力也无法说服他们。我做到了，拿了我的薪水，然后继续前进。所以，是的，仍然有一些人使用 Access，但我真的想不出有什么情况是个好主意。

正如之前的海报所说，试试 MS SQL Server 的 Express Edition。它是一个功能强大得多的免费多用户数据库。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-06-17T06:04:16.897

Access，既是数据库引擎（以前称为 Jet）加上它的“管理工作室”，又是基于表单的 RAD 开发平台加上它的 IDE，对某些事情有好处（一定是这样，因为它仍然卖得很好，我被告知）。很难反对它非常适合基于表单的应用程序的快速原型设计。关于你能说的最糟糕的事情是它有它唯一的做事方式，所以技能不能很好地转移。作为一个独立的，它并不是那么好，因为它的 SQL 实现在很多方面都偏离了 SQL 标准，同样是不可转移的技能（你必须“学习”Access 的工作方式）。但是对于 Web 开发，我认为您不会得到太多建议。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-06-19T16:47:05.203

乔恩，

我会返回并重新访问 Sybase SQL Anywhere 的 Web 选项。如果您正在编写基于 Web 的应用程序，SQL Anywhere 11 的新许可模型允许免费生产使用他们的数据库，只要它只被基于浏览器的应用程序接触。此外，SQL Anywhere 11 的开发人员版本也是免费的。自版本 4 天以来，我一直在使用 SQL Anywhere/ASA/Watcom SQL。这是一个令人难以置信的数据库，可以处理您想扔给它的大部分内容。我们将它用于不同的商业应用，我不会使用其他任何东西。就是这么好！

HTH。

杰夫

# apache-flex - Flex：自定义菜单功能

> ID：1003559
> 
> 赞同：0
> 
> 时间：2009-06-16T19:43:51.907
> 
> 标签：apache-flex, actionscript

有谁知道在单击其中一个菜单项后保持菜单打开的方法？我有一个自定义菜单（扩展菜单对象）它包含一堆“检查”类型的菜单项，我试图满足的要求是允许用户在不关闭菜单的情况下单击多个菜单项，然后拥有菜单当它失去焦点时关闭，这可能吗？如果可以的话，请解释一下它是如何完成的（推荐一个小例子）。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T07:48:06.813

您应该收听 itemClick 事件并在您的菜单处理程序上调用 preventDefault()。

```
private function menuItemClick(evt:MenuEvent):void
{
    // set your checks
    evt.preventDefault();
} 
```

# wpf - Setting PageOrientation for the Wpf DocumentViewer PrintDialog

> ID：1003585
> 
> 赞同：18
> 
> 时间：2009-06-16T19:48:54.800
> 
> 标签：wpf, documentviewer, printdialog

Using the Wpf DocumentViewer control I can't figure out how to set the PageOrientation on the PrintDialog that the DocumentViewer displays when the user clicks the print button. Is there a way to hook into this?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2010-01-14T18:29:38.270

[迈克的回答](https://stackoverflow.com/a/1068719/3782)有效。我选择实现它的方式是创建我自己的从 DocumentViewer 派生的文档查看器。此外，将 Document 属性转换为 FixedDocument 对我不起作用 - 转换为 FixedDocumentSequence 是。

GetDesiredPageOrientation 是您需要的任何东西。就我而言，我正在检查第一页的尺寸，因为我为文档中的所有页面生成了统一大小和方向的文档，并且序列中只有一个文档。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows.Controls;
using System.Windows.Xps;
using System.Printing;
using System.Windows.Documents;

public class MyDocumentViewer : DocumentViewer
{
    protected override void OnPrintCommand()
    {
        // get a print dialog, defaulted to default printer and default printer's preferences.
        PrintDialog printDialog = new PrintDialog();
        printDialog.PrintQueue = LocalPrintServer.GetDefaultPrintQueue();
        printDialog.PrintTicket = printDialog.PrintQueue.DefaultPrintTicket;

        // get a reference to the FixedDocumentSequence for the viewer.
        FixedDocumentSequence docSeq = this.Document as FixedDocumentSequence;

        // set the default page orientation based on the desired output.
        printDialog.PrintTicket.PageOrientation = GetDesiredPageOrientation(docSeq);

        if (printDialog.ShowDialog() == true)
        {
            // set the print ticket for the document sequence and write it to the printer.
            docSeq.PrintTicket = printDialog.PrintTicket;

            XpsDocumentWriter writer = PrintQueue.CreateXpsDocumentWriter(printDialog.PrintQueue);
            writer.WriteAsync(docSeq, printDialog.PrintTicket);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-07-01T11:51:42.583

我用来在 DocumentViewer 的打印对话框上设置方向的解决方法是通过从模板中省略按钮来隐藏 DocumentViewer 控件上的打印按钮。然后我提供了自己的打印按钮并将其绑定到以下代码：

```
public bool Print()
    {
        PrintDialog dialog = new PrintDialog();
        dialog.PrintQueue = LocalPrintServer.GetDefaultPrintQueue();
        dialog.PrintTicket = dialog.PrintQueue.DefaultPrintTicket;
        dialog.PrintTicket.PageOrientation = PageOrientation.Landscape;

        if (dialog.ShowDialog() == true)
        {
            XpsDocumentWriter writer = PrintQueue.CreateXpsDocumentWriter(dialog.PrintQueue);
            writer.WriteAsync(_DocumentViewer.Document as FixedDocument, dialog.PrintTicket);
            return true;
        }

        return false;
    } 
```

# asp.net-mvc - 如何将 IoC 成员资格提供程序与 ASP.NET MVC 集成

> ID：1003587
> 
> 赞同：18
> 
> 时间：2009-06-16T19:49:27.403
> 
> 标签：asp.net-mvc, dependency-injection, asp.net-membership, castle-windsor

我有一个自定义成员资格/角色提供程序，我在我的 MVC 控制器中使用它，我也希望 ASP.NET MVC 可以访问它，所以我可以使用 AuthorizationFilters 等。由于很多人已经实现了自定义提供程序，我想很多人已经完成了这但我还没有弄清楚或找到专门解决这个问题的帖子。[这篇文章](https://stackoverflow.com/questions/922891/inject-a-membershipprovider-into-asp-net-mvc-accountcontroller)是我问题的另一面。就我而言，我的自定义提供程序与我的控制器配合良好，我希望 MVC 也可以使用它。

我的提供程序是通过 IoC/依赖注入设计实现的。提供者公开了基线成员/角色 API 之外的其他功能。在我的控制器中，我使用 Castle Windsor 创建实例。代码类似于：

```
public class HomeController : Controller {
    IMembershipService _membershipService;
    public HomeController(IMembershipService membershipService) {
        _membershipService= membershipService;
    }
}

<castle>
 <components>
  <component id="MembershipService" 
             service="IMembershipService, MyApp" 
             type="MembershipService, MyApp" lifestyle="PerWebRequest">
    <parameters>
      <connectionString>#{defaultConnectionString}</connectionString>
    </parameters>
  </component>
 </components>
</castle>

public class WindsorControllerFactory : DefaultControllerFactory {
    private WindsorContainer _container;
    public WindsorControllerFactory() {
        _container = new WindsorContainer(new XmlInterpreter(new ConfigResource("castle")));

        List<Type> controllerTypes = new List<Type>();
        foreach (Type t in Assembly.GetExecutingAssembly().GetTypes()) {
            if (typeof(IController).IsAssignableFrom(t))
                controllerTypes.Add(t);
        }

        foreach (Type t in controllerTypes) {
            // LifestyleType.Transient = new controller instance for each request
            _container.AddComponentLifeStyle(t.FullName, t, LifestyleType.Transient);
        }
    }

    protected override IController GetControllerInstance(Type controllerType) {
        return (IController)_container.Resolve(controllerType);
    } 
```

这一切在我的 C# 代码中都很好用，但我想将我的提供程序连接到 MVC 以使用 [Authorize] 过滤器：

```
[Authorize (Users="user1, user2", Roles="role8")]
public ViewResult MyResult(int x) {
    // implement
} 
```

我知道告诉 ASP.NET 自定义成员资格或角色提供程序的常用方法是在 web.config 文件中，如下所示，但如果我这样做，ASP.NET 只会尝试调用默认构造函数，这将不起作用。任何帮助表示赞赏。

```
<membership>
 <providers>
  <clear/>
  <add name="MyMembershipProvider" type="MyMembershipProvider">
 </providers>
</membership> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-06-17T02:29:30.717

最简单的方法是使用 ASP.NET`<membership>`在 web.config 中的标准机制。您只是让它使用默认构造函数**，但**您覆盖 Initialize() 并将依赖项*拉到那里。*以此为[参考](http://code.google.com/p/webdotnet/source/browse/trunk/Steeg.Framework/Web/Security/?r=2)。

就个人而言，由于这样的事情，我更喜欢完全避免提供者模型，所以我使用类似于[MonoRail 文档中描述](http://docs.castleproject.org/MonoRail.Authentication-and-Authorization.ashx)的方法。恕我直言，它不那么臃肿而且更灵活。最后，它只是设置[HttpContext.User](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)具有适当的[IPrincipal](http://msdn.microsoft.com/en-us/library/system.security.principal.iprincipal.aspx)实现，这是 AuthorizeAttribute 使用的。

我最近[写了一篇关于使用 MembershipProviders 进行适当 IoC 的解决方案的博客](http://bugsquash.blogspot.com/2010/11/windsor-managed-membershipproviders.html)。

# .net - 表示层引用数据层

> ID：1003599
> 
> 赞同：1
> 
> 时间：2009-06-16T19:53:43.683
> 
> 标签：.net, n-tier-architecture, 3-tier

我有一个 3 层的 .NET 2.0 应用程序。表示层引用中间层。中间层引用数据库层。出于某种原因，当我编译时，数据层的 dll 出现在表示层的 bin 中。我该如何阻止这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T19:55:39.497

在 Reference 属性中将 Copy Local 设置为 false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T19:55:55.627

阻止这种情况的唯一方法是使您的一个或多个层成为服务层（或类似的东西）以物理分离您的层。

由于您的单独层是相互编译的，因此程序集需要在那里才能使整个应用程序正常运行。您如何设想应用程序在没有所有程序集的情况下工作？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T20:34:50.947

可以复制，因为存在称为依赖项。您的中间层依赖于中间层的 DataAccess 和 UI。您必须保持跟踪，而不是从 UI 引用数据访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-04T21:30:07.310

通常我做物理层应用如下：

1.  用户界面
2.  主持人
3.  商业逻辑
4.  数据访问
5.  实体

但我正在改变我对这个组织的看法。因为我做过很多项目，其中一些需要维护和改进。我开始认为这个组织过于单一。一些作者，如 Ted Faison、Tomas Erl、Robert C. Martin 和 Andy Aunt 表示，这种分层方法有点幼稚。

无论如何...将您的逻辑放在单独的项目中并将它们构建为不同的程序集。进行分层引用，您将拥有您想要的。

# php - 什么时候在 PHP 中使用变量变量？

> ID：1003605
> 
> 赞同：5
> 
> 时间：2009-06-16T19:55:39.607
> 
> 标签：php, variable-variables

我已经在 PHP 中进行了一段时间的开发，但我仍然没有必须使用可变变量的任务。谁能给我举例说明使用它们是个好主意吗？还是只是为了好玩而将它们包含在语言中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-16T19:57:14.643

我通常会在代码难闻的地方找到它们。也许引用静态配置变量等...但是为什么通常的关联数组不是更好的解决方案。似乎是一个等待发生的安全漏洞。

我想您也许可以在模板中有效地使用它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-16T19:57:34.283

永远不要使用它们；“数组”总是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-16T20:00:43.310

首先，如果您将用户输出用于这些目的，这将是一个巨大的安全问题。内部是这里唯一有效的用途。

鉴于此，我想它用于循环各种变量或将变量作为参数发送。

```
foreach($name in array('_GET','_POST','_REQUEST')) {
    array_map('stripslashes',$$name);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-16T20:12:41.897

我不得不使用它们的一种情况是 URI 处理，尽管这种技术可能已经过时了，而且我承认我已经很长时间没有使用它了。

假设我们要从格式中的脚本中提取 URI `domain.tld/controller/action/parameter/s`。我们可以使用以下命令删除脚本名称：

```
$uri_string = str_replace($_SERVER['SCRIPT_NAME'], '', $_SERVER['REQUEST_URI']); 
```

要从中提取控制器、操作和参数值，我们将不得不使用路径分隔符“/”来分解字符串。但是，如果我们有前导或尾随分隔符，我们将在爆炸时得到空数组值，因此我们应该从字符串的开头和结尾修剪它们：

```
$uri_string = trim($uri_string, '/'); 
```

我们现在可以将路径分解成一个数组：

```
$uri_data = explode('/', $uri_string); 
```

`$uri_data[0]`现在包含我们的控制器名称，`$uri_data[1]`包含操作名称，以及数组中的值，超出这些参数是应该传递给操作方法的参数。

```
$controller_name = $uri_data[0];
$action_name = $uri_data[1]; 
```

因此，既然我们有了这些名称，我们就可以将它们用于许多事情。如果您将控制器保存在相对于站点根目录的非常特定的目录中，则可以将此信息用于`require_once`控制器类。此时，您可以实例化它并使用变量变量调用它：

```
$controller = new $controller_name();
$controller->{$action_name}();    // Or pass parameters if they exist 
```

在这种方法中需要注意很多安全问题，但这是我见过的一种利用可变变量的方法。

**免责声明**：我并不是建议您实际使用此代码。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-01T11:20:43.300

我找到了一个很好的..

```
$php = "templates/php/default.php";
$html = "templates/html/default.php";
$css = "templates/css/default.php";
$js = "templates/js/default.php"; 
```

现在我让用户说出他想要哪个文件 php 或/和 html..

```
$userarray = array("php", "css");
foreach($userarray as $file){
    var_dump($$file);
} 
```

输出：

> 模板/php/default.php
> 模板/css/default.php

我在尝试对这样的静态变量进行限定范围时遇到了 `self::$file;`这个问题，然后我记得我可以使用变量变量 `self::$$file;`，这些变量将被解释为`self::$php;`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-16T20:15:55.837

语言包含您不应该与 bargepole 接触的功能并不少见（我什至不久前[问过一个关于它](https://stackoverflow.com/questions/312419/language-features-you-should-never-use)的问题），而变量变量可能是属于这一类的那些结构之一。仅仅因为一种语言包含一个特性并不意味着你必须使用它。

有时他们可能会解决问题（毕竟递归在实践中很少使用，但没有人会争辩说这不是必要的构造），但总的来说，任何语言特性都会掩盖你的代码正在做什么，并且变量变量肯定会落入这一类，应格外谨慎对待。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T20:01:11.747

除非您正在使用多深度变量（如果您不做任何花哨的事情，则不需要），您可能不需要它们。即便如此，您也可能会找到另一种方法来写下相同的内容，但仍会得到相同的结果。不过，使用它们可以更短（在某些情况下甚至更容易理解），所以我很高兴它是语言的一部分。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-17T00:23:09.177

我还没有发现变量变量有很多用途，但是将变量用于方法会很方便，只要你在做什么是清楚的。例如，在一个简单的 REST 服务中，您可能会执行以下操作：

```
$method = $request->getMethod(); // 'post','get','put','delete'
try 
{
    $response = $resource->$method($request->getInput());
}
catch (BadMethodException $badMethod)
{
    $response = $responseFactory->getError($badMethod);
} 
```

有些人会争辩说，你可以用一个语句同样好地做到这一点`switch`（你可以），但这种方式有助于扩展性（如果你决定添加另一种方法类型）并保持在资源上应用方法的抽象。

# asp.net - Posting xml from classic asp to asp.net

> ID：1003609
> 
> 赞同：0
> 
> 时间：2009-06-16T19:56:32.647
> 
> 标签：asp.net, xml, post, asp-classic

I apologize if this has been asked before. I searched and didn't find anything that matched my situation. Also bear in mind I am fairly new to asp/asp.net development.

My current project is a relatively simple e-commerce site. The customer will connect to the site, select products, input shipping and billing information, payment information (credit card) and submit the order.

The project is being split into two parts: The store front which includes displaying the items and taking the customer's shipping and billing information and the payment site which will collect the customers credit card, compute tax, and save the order into the company's system. The reason that the site was split up, was that our side (payment side) already has facilities for credit card handling and tax computation. There may also be some regulatory issues that the store front side does not want to deal with (which we already do).

I'm working on the payment portion of the app and I am using asp.net. The store front side is being written in classic asp (not my decision). Each part will be hosted on different servers.

The problem I am having is transferring the contents of the "shopping cart" to our app so that we can collect the cc info and submit the order. We had thought that the classic asp could somehow post an xml fragment which contains the billing/shipping info and the items selected. Our side would display a summary of the order, securely collect the credit card info, and submit the order to our system. But I have been unable to post or send the xml from a classic asp on one server, to our asp.net application on another. It all works just fine when I test on the same server.

How can I post (or otherwise transfer) the shopping cart data from classic asp to asp.net across server boundaries and transfer control to the asp.net application?

As I said, I am new to web development, so this is proving quite a challenge for me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T20:05:56.777

直截了当的 ServerXMLHTTP 代码在机器之间传递应该没有问题。通常，如果代码在本地工作但在不同机器上分离时失败，那么您需要开始寻找代理服务器配置、身份验证设置或名称解析作为罪魁祸首。

实际失败/错误消息的一些代码和描述会有所帮助吗？

# greasemonkey - 如何在fogbugz中使用greasemonkey脚本将文本框替换为由web服务填充的下拉列表？

> ID：1003610
> 
> 赞同：1
> 
> 时间：2009-06-16T19:56:34.223
> 
> 标签：greasemonkey, fogbugz

当您将案例编辑为下拉列表时，我想替换fogbugz中的“客户端”字段文本框，而不是从单独的Web服务中填充，这将使我们的fogbugz中的客户端选项保持最新。这可能吗？他们在下拉菜单中选择的选项是否能够像他们在文本框中输入时一样保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-27T18:25:27.427

如果您使用的是 Windows，请发送电子邮件至[http://contact.fogcreek.com](http://contact.fogcreek.com)并获取 FogBugz 7 测试版，它能够使用插件（而不是 GM）甚至仅使用自定义字段来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T00:26:25.910

一个即兴回答：

是的。对于第一遍，您可以通过在侧面创建下拉列表、使用 GM_xmlHttpRequest 填充它并在下拉列表中添加“onchange”操作侦听器来实现它，这将使用相关信息填充文本字段从下拉列表中。这可以确保fogbugz 以它想要看到的方式准确地看到它想要的东西。

# nhibernate - Problem with JoinedSubClassPart in Fluent NHibernate

> ID：1003611
> 
> 赞同：0
> 
> 时间：2009-06-16T19:56:36.530
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

I seem to be having trouble modeling inherited classes using JoinedSubClassPart in Fluent NHibernate (release 524). I have seen other posts indicating that the approach I am using (see below) should work, yet at runtime I get the following exception (thrown by ImappingPart.PositionOnDocument method of JoinedSubClassPart):

*XunitException: FluentNHibernate.Cfg.FluentConfigurationException : An invalid or incomplete configuration was used while creating a SessionFactory. Check PotentialReasons collection, and InnerException for more detail.*

*---- System.InvalidOperationException : Failed to compare two elements in the array. -------- System.NotSupportedException : Obsolete*

Should this in fact work or has this been deprecated in favour of another approach?

I am hoping I am simply doing something wrong as I do like the idea of being able to add subclass mapping dynamically via AddPart().

Any help will be greatly appreciated!

* * *

A simplified version of my object model (which still fails) is as follows:

```
public class MyBaseClass
{
    public int Id { get; set; }
    public string CommonProperty { get; set; }
}

public class MySubClass1 : MyBaseClass
{
    public string MySubClass1Property { get; set; }
}

public class MySubClass2 : MyBaseClass
{
    public string MySubClass2Property { get; set; } 
} 
```

And my mappings are as follows:

```
public class MyBaseClassMap : ClassMap<MyBaseClass>
{
    public MyBaseClassMap()
    {
        Not.LazyLoad();
        Id(x => x.Id).GeneratedBy.Identity();

        Map(x => x.CommonProperty);
        AddPart(new MySubClass1Map());
        AddPart(new MySubClass2Map());
    }
}

public class MySubClass1Map : JoinedSubClassPart<MySubClass1>
{
    public MySubClass1Map()
        : base("MyBaseClassId")
    {
        Not.LazyLoad();
        Map(x => x.MySubClass1Property);
    }
}

public class MySubClass2Map : JoinedSubClassPart<MySubClass2>
{
    public MySubClass2Map()
        : base("MyBaseClassId")
    {
        Not.LazyLoad();
        Map(x => x.MySubClass2Property);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-19T15:17:49.060

在深入挖掘之后，我发现[了这个](http://code.google.com/p/fluent-nhibernate/issues/detail?id=246)fluent-nhibernate 问题，它解释说，从 r526 开始，AddPart 已被弃用，取而代之的是 JoinedSubClass。在将我的代码修改为如下所示后，我能够得到我正在寻找的模型。

在我的基类映射中，我将对 AddPart 的调用替换为：

```
JoinedSubClass("MyBaseClassId", MySubClass1Map.AsJoinedSubClass());
JoinedSubClass("MyBaseClassId", MySubClass2Map.AsJoinedSubClass()); 
```

我的子类映射更改为：

```
public class MySubClass1Map
{
    public static Action<JoinedSubClassPart<MySubClass1>> AsJoinedSubClass()
    {
        return sub =>
        {
             sub.Map(x => x.MySubClass1Property);
        };
    }
}

public class MySubClass2Map
{
    public static Action<JoinedSubClassPart<MySubClass2>> AsJoinedSubClass()
    {
        return sub =>
        {
             sub.Map(x => x.MySubClass2Property);
        };
    }
} 
```

# html - 如何使 div 100% 的页面（不是屏幕）高度？

> ID：1003613
> 
> 赞同：57
> 
> 时间：2009-06-16T19:56:54.113
> 
> 标签：html, css

我正在尝试使用 CSS 在我的页面上创建一个“变灰”效果，同时在应用程序工作时在前台显示一个加载框。我通过创建一个 100% 高度/宽度、半透明的黑色 div 来做到这一点，它的可见性通过 javascript 打开/关闭。我认为这很简单；但是，当页面内容扩展至屏幕滚动时，滚动到页面底部会显示未变灰的部分。换句话说，div 高度的 100% 似乎适用于浏览器视口大小，而不是实际页面大小。如何使 div 扩展以覆盖整个页面的内容？在切换它的可见性之前，我尝试使用 JQuery .css('height', '100%') 但这并没有改变任何东西。

这是有问题的 div 的 CSS：

```
div.screenMask
{
    position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
    z-index: 1000;
    background-color: #000000;
    opacity: 0.7;
    filter: alpha(opacity=70);
    visibility: hidden;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-06-16T20:02:59.733

如果更改`position: absolute`为`position: fixed`它将在除 IE6 之外的所有浏览器中运行。这会将 div 固定到视口，因此滚动时它不会移出视图。

您也可以`$(document).height()`在 jQuery 中使用，使其也可以在 IE6 中运行。例如

```
$('.screenMask').height($(document).height()); 
```

这显然也适用于所有其他浏览器，但如果可以避免的话，我更喜欢不使用 JavaScript。实际上，您也需要对宽度做同样的事情，以防有任何水平滚动。

[在 IE6 中](http://www.google.com/search?q=%22fixed+positioning%22+ie6)也有很多技巧可以使固定定位工作，但它们往往会对您的 CSS 施加一些其他限制，或者使用 JavaScript，因此它们可能不值得麻烦。

另外，我认为您只有其中一个掩码，因此我建议您使用 ID 而不是类。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-16T03:32:34.257

我意识到我在被问到很久很久之后才回答这个问题，但是在被这个问题短暂绊倒后我来到了这里，目前的答案都不是正确的。

这是正确的答案：

```
body {
    position: relative;
} 
```

就是这样！现在您的元素将相对于`<body>`而不是视口定位。

我不会打扰它`position: fixed`，因为它的浏览器支持仍然参差不齐。iOS 5 之前的 Safari 根本不支持它。

请注意，您的`<div>`元素将覆盖`<body>`的边框（框 + 填充 + 边框），但不会覆盖其边距。`<div>`通过在您的(例如)上设置负仓位`top: -20px`或通过删除`<body>`' 保证金来进行补偿。

我还建议设置`<body>`以`height: 100%`确保您不会在较短的页面上看到部分蒙版的视口。

两个有效点取自先前的答案。正如 Ben Blank 所说，您可能会丢失`width`and`height`声明，而是定位所有四个角。墨卡托是对的，您应该对如此重要的单个元素使用 ID 而不是类。

这留下了以下推荐的完整 CSS：

```
body {
    position: relative;
    margin: 0;
}

#screenMask {
    position: absolute;
    left: 0; right: 0;
    top: 0; bottom: 0;
    z-index: 1000;
    background-color: #000;
    opacity: 0.7;
    filter: alpha(opacity=70);
    visibility: hidden;
} 
```

和 HTML：

```
<body>
    <div id="screenMask"></div>
</body> 
```

我希望这对其他人有帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-16T20:26:26.783

```
div.screenMask
{
    position: absolute;
    left: 0px;
    top: 0px;
    right: 0px;
    bottom: 0px;
    z-index: 1000;
    background-color: #000000;
    opacity: 0.7;
    filter: alpha(opacity=70);
    visibility: hidden;
} 
```

通过设置所有`top`、`bottom`、`left`和`right`，自动计算高度和宽度。如果`screenMask`是元素的直接子`<body>`元素并且标准盒模型生效（即未触发怪癖模式），则这将覆盖整个页面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-16T20:05:47.403

如果您使用 jQuery 在弹出窗口之前设置高度，我猜可以添加更多 javascript :)

您可以将 div 的高度设置为 document.body 的 scrollHeight - 这样它应该覆盖整个身体。你确实需要添加一些额外的技巧，以确保它继续覆盖身体，以防下面的东西决定生长。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-18T12:43:27.590

如果您想要具有叠加效果的弹出窗口，那么您可以使用这些步骤..

```
<style>
.overlay{
 background:#000;
 opacity:0.5;
 position:fixed;
 z-index:1;
 width:100%;
 height:100%;
}
.popup{
 width:500px;
 margin:auto;
 position:fixed;
 z-index:2;
 height:300px;
}
</style>
<div class="overlay"></div>
<div class="popup">
      Hello everyone
</div> 
```

# parsing - 解析全名字段 Oracle

> ID：1003622
> 
> 赞同：0
> 
> 时间：2009-06-16T19:58:14.063
> 
> 标签：parsing, oracle10g

我想知道是否有人可以帮助我解析全名字段。我想把它分成姓氏、名字、中间名首字母、后缀。

以下是名称的一些输入，然后是我希望如何解析它们。

```
 Parsed Stuff Begins Here-------------------------------------
    name                  | lastname  | firstname        |  middle initial   | suffix |
----------------------------------------------------------------------------------------
PUBLIC, JOHN              | PUBLIC    | JOHN             |  NULL             | NULL
PUBLIC, CHUN CH KIM       | PUBLIC    | CHUN CH KIM      |  NULL             | NULL
PUBLIC, MARY L            | PUBLIC    | MARY             |  L                | NULL
PUBLIC, FRED J JR         | PUBLIC    | FRED             |  J                | JR
PUBLIC, SUE ELLEN J SR    | PUBLIC    | SUE ELLEN        |  J                | SR 
```

我有一个可以输入的所有后缀值的列表，即

```
JR, SR, I,II,III,IV,V,VI 
```

我已经到了将姓氏和名字的其余部分分开的地步，但我不太清楚如何做其余的事情。我正在使用oracle 10g。

***这不是一个家庭作业问题。这是我在工作中正在解决的一个实际问题。***

这是我目前拥有的：

```
 select id,
        name,
        substr(name,1, instr(name,',')-1) as lname,
        substr(name,(instr(name,',')+1),length(name)) as rest_of_the_name
 from    my_table
 where status='A'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T20:25:47.847

这是一个总会有数据破坏它的问题。

如果有2个首字母怎么办？如果首字母是第一个，如 J Edgar Hoover 怎么办？

您提到“可以输入的值”。您可以更改输入值的方式以捕获已经分离的值吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T02:16:20.633

您已经部分解决了它 - 您可以将查询用作子查询并逐点分解问题，例如：

```
select id, name, lname,
       case
       when substr(x, -2, 1) = ' '
       then substr(x, length(x) - 2)
       else x
       end as first_name, -- e.g. "SUE ELLEN"
       case
       when substr(x, -2, 1) = ' ' 
       then substr(x, -1)
       else null
       end as middle_initial, -- e.g. "J"
       suffix -- e.g. "SR"
from (
select id, name, lname, suffix,
       case when suffix is not null then
       substr(rest_of_the_name, 1, length(rest_of_the_name)-length(suffix)-1)
       else rest_of_the_name end
       as x -- e.g. "SUE ELLEN J"
from (
select id, name, lname, rest_of_the_name,
       case
       when substr(rest_of_the_name,-2)
            in (' I',' V')
       then substr(rest_of_the_name,-1)
       when substr(rest_of_the_name,-3)
            in (' JR',' SR',' II',' IV',' VI')
       then substr(rest_of_the_name,-2)
       when substr(rest_of_the_name,-4)
            in (' III')
       then substr(rest_of_the_name,-3)
       else null
       end as suffix -- e.g. "SR"
from (
select id,
       name, --e.g. "PUBLIC, SUE ELLEN J SR"
       trim(substr(name,1, instr(name,',')-1)) as lname, -- e.g. "PUBLIC"
       trim(substr(name,(instr(name,',')+1),length(name)))
          as rest_of_the_name -- e.g. "SUE ELLEN J SR"
from    my_table
where status='A'
))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-08T19:46:04.977

这是一个简单的答案，基于检索名字和姓氏，以与名字相同的方式检索 MI，从“rest_of_the_name”中删除 MI 作为姓氏。

```
SELECT
substr('John Q. Public',1, instr('John Q. Public',' ')-1) as FirstName,
substr('John Q. Public',(instr('John Q. Public',' ')+1),length('John Q. Public')) as rest_of_the_name,
substr(substr('John Q. Public',(instr('John Q. Public',' ')+1),length('John Q. Public')),1, instr(substr('John Q. Public',(instr('John Q. Public',' ')+1),length('John Q. Public')),' ')-1) as MI,
replace(substr('John Q. Public',(instr('John Q. Public',' ')+1),length('John Q. Public')), substr(substr('John Q. Public',(instr('John Q. Public',' ')+1),length('John Q. Public')),1, instr(substr('John Q. Public',(instr('John Q. Public',' ')+1),length('John Q. Public')),' ')-1)) as LastName
FROM DUAL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-17T19:12:46.767

这篇文章包含一个非常完整的纯 SQL 解决方案，用 SQLServer 语法编写。我已将其转换为 Oracle 语法。它做得很好，尽管它不处理后缀（Jr.、III 等）。您应该阅读帖子中的其他警告：

[SQL：从全名字段中解析名字、中间名和姓氏](https://stackoverflow.com/questions/159567/sql-parse-the-first-middle-and-last-name-from-a-fullname-field)

```
SELECT first_name.original_input_data,
       first_name.title,
       first_name.first_name,
       CASE
           WHEN 0 = INSTR(first_name.rest_of_name, ' ') THEN
            NULL --no more spaces?  assume rest is the last name
           ELSE
            SUBSTR(first_name.rest_of_name, 1, INSTR(first_name.rest_of_name, ' ') - 1)
       END AS middle_name,
       SUBSTR(first_name.rest_of_name,
              1 + INSTR(first_name.rest_of_name, ' '),
              LENGTH(first_name.rest_of_name)) AS last_name
  FROM (SELECT title.title,
                CASE
                    WHEN 0 = INSTR(title.rest_of_name, ' ') THEN
                     title.rest_of_name --No space? return the whole thing
                    ELSE
                     SUBSTR(title.rest_of_name, 1, INSTR(title.rest_of_name, ' ') - 1)
                END AS first_name,
                CASE
                    WHEN 0 = INSTR(title.rest_of_name, ' ') THEN
                     NULL --no spaces @ all?  then 1st name is all we have
                    ELSE
                     SUBSTR(title.rest_of_name, INSTR(title.rest_of_name, ' ') + 1, LENGTH(title.rest_of_name))
                END AS rest_of_name,
                title.original_input_data
           FROM (SELECT
                  --if the first three characters are in this list,
                  --then pull it as a "title".  otherwise return NULL for title.
                   CASE
                       WHEN SUBSTR(test_data.full_name, 1, 3) IN ('MR ', 'MS ', 'DR ', 'MRS') THEN
                        LTRIM(RTRIM(SUBSTR(test_data.full_name, 1, 3)))
                       ELSE
                        NULL
                   END AS title
                   --if you change the list, don't forget to change it here, too.
                 --so much for the DRY prinicple...
                ,
                 CASE
                     WHEN SUBSTR(test_data.full_name, 1, 3) IN ('MR ', 'MS ', 'DR ', 'MRS') THEN
                      LTRIM(RTRIM(SUBSTR(test_data.full_name, 4, LENGTH(test_data.full_name))))
                     ELSE
                      LTRIM(RTRIM(test_data.full_name))
                 END AS rest_of_name,
                 test_data.original_input_data
                  FROM (SELECT
                        --trim leading & trailing spaces before trying to process
                        --disallow extra spaces *within* the name
                         REPLACE(REPLACE(LTRIM(RTRIM(full_name)), '  ', ' '), '  ', ' ') AS full_name,
                         full_name AS original_input_data
                          FROM ( --if you use this, then replace the following
                                --block with your actual table
                                SELECT 'george w bush jr.' AS full_name
                                  FROM dual
                                UNION
                                SELECT 'SUSAN B ANTHONY' AS full_name
                                  FROM dual
                                UNION
                                SELECT 'alexander hamilton' AS full_name
                                  FROM dual
                                UNION
                                SELECT 'osama bin laden jr' AS full_name
                                  FROM dual
                                UNION
                                SELECT 'Martin J. VAN BUREN SENIOR III' AS full_name
                                  FROM dual
                                UNION
                                SELECT 'Tommy' AS full_name
                                  FROM dual
                                UNION
                                SELECT 'Billy' AS full_name
                                  FROM dual
                                UNION
                                SELECT NULL AS full_name
                                  FROM dual
                                UNION
                                SELECT ' ' AS full_name
                                  FROM dual
                                UNION
                                SELECT '    JOHN  JACOB     SMITH' AS full_name
                                  FROM dual
                                UNION
                                SELECT ' DR  SANJAY       GUPTA' AS full_name
                                  FROM dual
                                UNION
                                SELECT 'DR JOHN S HOPKINS' AS full_name
                                  FROM dual
                                UNION
                                SELECT ' MRS  SUSAN ADAMS' AS full_name
                                  FROM dual
                                UNION
                                SELECT ' MS AUGUSTA  ADA   SMITH-KING ' AS full_name
                                  FROM dual) raw_data) test_data) title) first_name 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-12-03T04:39:16.083

选择 SUBSTR(name, INSTR(name, ' ')+1) AS lastname, SUBSTR(name, 1, INSTR(name, ' ')-1) AS firstname 任意；

# database - Fastest way to lookup keywords. Any language, any system

> ID：1003626
> 
> 赞同：0
> 
> 时间：2009-06-16T19:58:24.360
> 
> 标签：database, lookup, keyword, performance

Daily I have 5 million or so unique keywords with an impression count for each one. I want to be able to look these keywords up by certain words so for instance if I have "ipod nano 4GB" I want to be able to pull that out if I search for "ipod", "nano", or "4GB". mySQL can't seem to handle that much data for what I want, I've tried Berkeley but that seems to crash with too many rows and it's slower. Ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T20:18:54.067

我[对 Xapian 搜索引擎库](http://xapian.org/)非常满意。虽然听起来这对您的场景来说可能有点矫枉过正，但也许您只是想将数据放入一个大哈希表中，比如[memcached](http://www.danga.com/memcached/)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T20:02:15.023

you can try free text on mssql. [http://msdn.microsoft.com/en-us/library/ms177652.aspx](http://msdn.microsoft.com/en-us/library/ms177652.aspx)

Example query:

```
SELECT TOP 10 * FROM searchtable 
INNER JOIN FREETEXTTABLE(searchtable, [SEARCH_TEXT], 'query string') AS KEY_TBL
ON searchtable.SEARCH_ID = KEY_TBL.[KEY] 
ORDER BY KEY_TBL.RANK DESC 
```

Josh

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T20:04:30.820

[Lucene](http://lucene.apache.org/java/docs/ "Lucene")索引可能会起作用。我以前用它来处理相当大的数据集。它是用 java 开发的，但也有一个 .NET 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T20:23:33.950

您是否尝试过[在 MySQL 中进行全文搜索](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)？因为如果你用 LIKE 比较来尝试它，我明白为什么它很慢:)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T14:06:14.220

这种工作负载和搜索模式对于 PostgreSQL 来说是微不足道的，因为它具有集成的全文搜索功能（从 8.4 开始集成，现在处于 RC 状态。在此之前它是一个 contrib 模块。）

# php - PHP：OOP 问题

> ID：1003628
> 
> 赞同：1
> 
> 时间：2009-06-16T19:58:35.793
> 
> 标签：php, oop

我对使用 PHP 的 OOP 很陌生。

好的，首先这会产生一个错误：

```
$mail->addBody(new MailWishListInquiry()->getBody(348)); 
```

但这不是：

```
$wishListInquiry = new MailWishListInquiry();
$mail->addBody($wishListInquiry->getBody(348)); 
```

我不明白为什么？

方法 getBody() 也没有返回任何东西..但也没有错误..这是它的一个片段：

```
function getBody($pid)
{

    $qry = 'SELECT * FROM cart_product WHERE product_id = '.$pid;
    $result = mysql_query($qry);
    $row = mysql_fetch_assoc($result);

    $item_name = $row['product_name'];
    $item_url = 'product.php?pid='.$pid;
    $item_image_url = 'product_images/'.$pid.'_sm_'.$row['product_image_sm'];

    return
    ?>
    <div style="width:600px; font-family:Arial, Helvetica, sans-serif; color:#333333;">

        ...

    </div>
    <?php
} 
```

有谁知道为什么？

谢谢！！

**编辑：**你们做得很好，解释了取消引用在 PHP 中不起作用。但我仍然需要帮助弄清楚为什么 getBody() 没有返回字符串。是不是因为我打破了php，所以我不必引用它？即使我什么也没传递，它仍然应该返回 html 字符串，对吗？为什么不是？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-16T20:00:23.513

> 我不明白为什么？

因为 PHP 语法随意地这么说：您不能直接取消引用（作为对象或作为数组）从方法返回值。您首先需要将它们分配给变量。

这种行为背后确实没有有意义的语义解释。据我所知，这可能会在 PHP 的未来版本中发生变化。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-16T20:27:02.537

其他人所说的“不能直接从方法中取消引用返回值”并不完全正确。实际上，您“只是”不能直接取消引用新创建的类实例，这是您正在尝试做的。但当然可以这样做：

```
class Test {

public function a() {
    echo "a";
    return $this;
}

public function b() {
    echo "b";
    return $this;
}

public function c() {
    echo "c";
    return $this;
}

}

$test = new Test();

$test->a()->b()->c(); 
```

所以你不能直接对新创建的对象做一些事情，但是你可以对方法的返回值做一些事情。

您的另一个问题，即 getBody 不返回任何内容是因为您试图返回在 PHP 块之外定义的 HTML 块。您可能认为 PHP 只是将您在 ?> 和 <?php 标记之间写入的所有内容作为字符串返回。但它只会将其写入标准输出（通常是您的浏览器）并从没有值的方法返回（void）。

要返回 HTML 字符串，您可以使用普通的字符串分隔符，如下所示：

```
function getBody() {
    return
    '<p style="color: red;">Hello</p>
    <p>World</p>';
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-16T20:05:15.250

至于第一个问题，其他海报是正确的。PHP 不允许您直接取消引用返回值。

至于第二个，您的 getBody() 方法将返回 null，这不是错误（除了逻辑错误）。只要 addBody() 接受空参数，您的代码就可以工作。

作为旁注和理智的问题，您应该在 getBody() 中以分号结束返回。在 PHP 中很少有这样的例子，你不需要在行尾使用分号，如果你把它留在这里可能会造成混淆，如果将来修改代码会导致错误。它仍然有效的原因是 return 语句是块中的最后一件事。

为了返回 html 而不是回显它，您需要它是一个字符串：

```
return '<div style="width:600px; font-family:Arial, Helvetica, sans-serif; color:#333333;">'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T20:00:54.680

PHP 不允许即时取消引用。你也不能这样做：

```
(new Something())->someMethod(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T20:09:37.113

正如每个人都解释了为什么你不能，我会跳过那部分。但是你可以这样做：

```
$mail->addBody(new MailWishListInquiry()->getBody(348)); 
```

可

```
$mail->addBody( MailWishListInquiry::getBody(348)); 
```

**我想。**试试看，应该可以的。

此外，您的 getBody 函数没有返回任何内容，并且 return 之后的所有内容都没有执行。（除非这已经改变）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T20:14:12.597

关于 get body，我从未见过 return 返回 php 之外的东西。但这很可能是 php 的怪癖之一。但这应该有效：

```
<?php

function getBody($pid)
{

    $qry = 'SELECT * FROM cart_product WHERE product_id = '.$pid;
    $result = mysql_query($qry);
    $row = mysql_fetch_assoc($result);

    $item_name = $row['product_name'];
    $item_url = 'product.php?pid='.$pid;
    $item_image_url = 'product_images/'.$pid.'_sm_'.$row['product_image_sm'];

    return '<div style="width:600px; font-family:Arial, Helvetica, sans-serif; color:#333333;"></div>'; 
```

}

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-16T20:49:38.763

如果你想在这件事上返回一个字符串，我建议使用 obstart() 和 ob_get_contents

```
function getBody($pid)
{

    $qry = 'SELECT * FROM cart_product WHERE product_id = '.$pid;
    $result = mysql_query($qry);
    $row = mysql_fetch_assoc($result);

    $item_name = $row['product_name'];
    $item_url = 'product.php?pid='.$pid;
    $item_image_url = 'product_images/'.$pid.'_sm_'.$row['product_image_sm'];

    ob_start();
    ?>
    <div style="width:600px; font-family:Arial, Helvetica, sans-serif; color:#333333;">

        ...

    </div>
    <?php
    return ob_get_contents();
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-03-17T14:07:12.310

自 php 5.4 起

```
(new Something())->someMethod(); 
```

是有效的语法。

# perl - 如何查看 Perl 哈希是否已经有某个键？

> ID：1003632
> 
> 赞同：57
> 
> 时间：2009-06-16T19:59:39.473
> 
> 标签：perl, hash, key, lookup

我有一个 Perl 脚本，它计算文本文件中各种字符串的出现次数。我希望能够检查某个字符串是否还不是哈希中的键。有没有更好的方法来完全做到这一点？

这是我正在做的事情：

```
foreach $line (@lines){
    if(($line =~ m|my regex|) )
    {
        $string = $1;
        if ($string is not a key in %strings) # "strings" is an associative array
        {
            $strings{$string} = 1;
        }
        else
        {
            $n = ($strings{$string});
            $strings{$string} = $n +1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2009-06-16T20:05:53.190

我相信检查您刚刚执行的哈希中是否存在密钥

```
if (exists $strings{$string}) {
    ...
} else {
    ...
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-16T21:29:52.177

我建议不要使用`if ($hash{$key})`，因为如果密钥存在但它的值为零或为空，它不会做你期望的事情。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-06-16T21:01:47.133

好吧，您的整个代码可以限制为：

```
foreach $line (@lines){
        $strings{$1}++ if $line =~ m|my regex|;
} 
```

如果该值不存在，++ 运算符将假定它为 0（然后递增到 1）。如果它已经存在 - 它只会增加。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-16T20:05:54.593

我想这段代码应该回答你的问题：

```
use strict;
use warnings;

my @keys = qw/one two three two/;
my %hash;
for my $key (@keys)
{
    $hash{$key}++;
}

for my $key (keys %hash)
{
   print "$key: ", $hash{$key}, "\n";
} 
```

输出：

```
three: 1
one: 1
two: 2 
```

迭代可以简化为：

```
$hash{$_}++ for (@keys); 
```

（参见`$_`perlvar [。](http://perldoc.perl.org/perlvar.html)）你甚至可以这样写：

```
$hash{$_}++ or print "Found new value: $_.\n" for (@keys); 
```

它会在第一次找到每个键时报告它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-06-16T20:06:50.613

你可以去：

```
if(!$strings{$string}) .... 
```

# sharepoint - WSS 3.0 list populated from SQL query

> ID：1003633
> 
> 赞同：1
> 
> 时间：2009-06-16T19:59:50.987
> 
> 标签：sharepoint

I am looking for a way to maintain a SharePoint list of employees and their employee ID. I have the data in SQL and would like to get it into a list to use as a look up. I do not have access to a BDC.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T20:36:52.800

编写一个每天/每周运行的 SPTimerjob，将 SQL 中的数据更新/添加到列表中。这是自定义计时器作业入门的链接。

[安德鲁·康奈尔的博客](http://www.andrewconnell.com/blog/articles/CreatingCustomSharePointTimerJobs.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T20:36:23.643

您是想在 SharePoint 中复制您的数据，还是只是想要一种查看方式？您可以只创建自定义 Web 部件或使用第 3 方工具，例如[数据查看器 Web 部件](http://www.lightningtools.com/pages/lt%20data%20viewer%20web%20part.aspx)

问候，

菲尔

# gcc - 是否可以让 GCC 从管道中读取？

> ID：1003644
> 
> 赞同：68
> 
> 时间：2009-06-16T20:01:15.820
> 
> 标签：gcc, command-line, pipe, flex-lexer

我正在寻找一个选项`gcc`，它将使它从标准输入中读取源文件，主要是这样我可以做这样的事情来从`flex`生成 C 代码之类的工具生成目标文件（`flex`的`-t`选项写入生成的 C到标准输出）：

```
flex -t lexer.l | gcc -o lexer.o -magic-option-here 
```

因为我并不真正关心生成的 C 文件。

是否存在这样的东西，还是我必须使用临时文件？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2009-06-16T20:03:28.250

是的，但您必须使用以下`-x`选项指定语言：

```
# Specify input file as stdin, language as C
flex -t lexer.l | gcc -o lexer.o -xc - 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-06-16T20:07:10.910

```
flex -t lexer.l | gcc -x c -c -o lexer.o - 
```

基本上你说文件名是`-`. 指定文件名是`-`“标准输入”的某种标准约定。您还需要`-c`标志，因此您不进行链接。当 GCC 从标准输入中读取数据时，你必须告诉它这是什么语言`-x`。`-x c`说是C代码。

# singleton - What does "singleton modeless" mean?

> ID：1003650
> 
> 赞同：1
> 
> 时间：2009-06-16T20:02:36.363
> 
> 标签：singleton, modeless

I know what a singleton is, but while walking through a web-app, my co-worker said "singleton-modeless". What does he mean by this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T20:11:02.273

[我在这里](http://msdn.microsoft.com/en-us/library/cc984323.aspx)的 MSDN 架构中心找到了对它的引用。它们似乎意味着一个非模态窗口（换句话说，用户在与其父级交互之前不会被迫与其交互）并且仅存在一个实例。

我不确定这是否是你同事的意思，但我不会因为不知道他的意思而感到难过。他可能并不真正了解自己。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T20:06:01.007

那么*无模式形式与**模态*形式相反。

**无模式形式**

> 允许您将焦点从表格更改为表格。

**情态形式**

> 在模态表单关闭之前不允许焦点更改。

话虽如此，*单例无模式*必须意味着无模式形式的单个实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-03T17:57:10.370

单例无模式或模态对话框非常棒，因为您不必担心会同时向用户显示 2 个实例。

Ext.MessageBox 就是这样，被一个方法调用，单例模式。它也可以用作单例无模式的基础。

我同意，模态对话框通常很糟糕，除非经过深思熟虑。大多数现代应用程序都在使用无模式抽屉或功能区，在手头任务的上下文中始终可供用户使用！

所以检查你的对话；您现在可能不需要在您的应用程序中使用其中的一半...

# windows - 以编程方式模拟操纵杆

> ID：1003657
> 
> 赞同：12
> 
> 时间：2009-06-16T20:03:52.663
> 
> 标签：windows, device-driver, wdk

我想使用按键和/或鼠标输入来模拟操纵杆。所以其他程序/游戏会认为用户在使用鼠标时正在使用操纵杆。

因此，该程序将为假 USB 或假现有操纵杆安装某种驱动程序。

有一个名为 PPJoy 的现有程序可以做同样的事情，但遗憾的是它是封闭源代码，需要用户独立安装并执行配置步骤。

发现这个： http: [//www.microsoft.com/whdc/archive/hidgame.mspx](http://www.microsoft.com/whdc/archive/hidgame.mspx)

但无法理解它。需要一些高级指针，以便我可以自己研究而不是盲目地敲门:)

编辑：我正在尝试控制仅支持操纵杆的第三方程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-09-16T15:12:10.997

请参阅我对与您的问题非常相似的先前问题的回答。

[为模拟输入设备编写 Windows 驱动程序](https://stackoverflow.com/questions/1394260/writing-a-windows-driver-for-an-emulated-input-device/1433552#1433552)

显然，这取决于您要模拟的操纵杆输入类型。编写自定义驱动程序确实是您希望尽可能避免的事情。您可能根本不需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-22T20:19:55.387

最好的办法是从 Windows DDK修改示例[VHIDMINI - 虚拟 HID 设备示例。](http://msdn.microsoft.com/en-us/library/dd163263.aspx)您可以修改此示例驱动程序以模拟操纵杆 HID 设备，然后从驱动程序发送操纵杆 HID 报告。

# sql - T-SQL、游标、FETCH INTO。如何使用选择 *

> ID：1003658
> 
> 赞同：1
> 
> 时间：2009-06-16T20:04:18.950
> 
> 标签：sql, sql-server, tsql

我正在构建一个一次性查询来遍历一组连接表。选择语句使用“SELECT *”。因为它是一个包含很多字段的表，所以我不想将每一列指定为变量。有没有办法 FETCH INTO 某种数组或 SET 并获取我想要的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T20:24:17.333

[显然不是](http://msdn.microsoft.com/en-us/library/ms180152.aspx)：

```
INTO @variable_name[ ,...n] 
```

> “允许将提取列中的数据放入局部变量
> 中。列表中的每个变量，从左到右，都与游标结果集中的相应列相关联。每个变量的数据类型必须匹配或支持对相应结果集列的数据类型进行隐式转换。变量的数量必须与游标选择列表中的列数匹配。

* * *

如果您正在寻找使用游标，您可能会发现[CLR 存储过程具有更好的灵活性](http://msdn.microsoft.com/en-us/library/ms131094.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T20:22:41.173

即使有，你也不想。获取额外字段是 SQL Server 应用程序中性能下降的最常见原因之一。通过这样做，您限制了优化器有效使用索引的能力。

您将如何建议在不指定列名的情况下“获取所需的值”？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T20:25:05.553

为什么需要使用游标？这些在 SQL Server 场景中是不受欢迎的——大多数时候，它们是不必要的，而且通常它们非常慢并且会损害性能。

你想用你的光标来完成什么？你不能以基于集合的方式来做到这一点，并最大限度地利用 SQL Server 的能力吗？

马克

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T20:46:41.967

在 2k5（SQL 2000 有不同的系统对象）中，使用 SQL 元数据快速编写具有长表/列名列表的查询：

```
SELECT
    O.Name + '__' + C.Name + ' = ' + O.Name + '.' + C.Name + ','
FROM Sys.Objects O
JOIN Sys.Columns C
    ON C.Object_Id = O.Object_Id
WHERE O.Name IN ('Table1', 'Table1')
ORDER BY O.Name, C.Column_Id 
```

我不确定您要对结果集做什么，但这可能是一个不错的开始。

此外，您可以将变量声明为 SQL_VARIANT 和 FETCH 结果集，如下所示：

```
DECLARE @Col1 SQL_VARIANT

SELECT @Col1 = Table1.Column1 FROM Table1

PRINT CONVERT(varchar(max), @Col1) 
```

我不确定这对你有什么好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T23:44:47.227

仅建议那些每天使用 SQL 的人，而不是专门回答这个问题。

RedGate 产品[SQL Prompt](http://www.red-gate.com/products/SQL_Prompt/index.htm)能够使用快捷键（Ctrl-B、Ctrl-W）将通配符扩展为单个字段名称。**这可以为您节省大量时间，并且可以在您确实需要大部分**字段的情况下更轻松地从查询中删除一些字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-17T21:10:40.507

在 SQL2005 中，您还可以右键单击表并选择打开表。然后单击小 SQL 图标，您会看到 select 语句，类似于 select * from YourTable。再次单击 ! 图标，选择 * from 将扩展为完整的字段列表。祝你好运。

# mysql - 表创建时 MySQL 错误 1005

> ID：1003661
> 
> 赞同：0
> 
> 时间：2009-06-16T20:05:06.607
> 
> 标签：mysql, foreign-keys, mysql-error-1005

我的表定义：

```
CREATE TABLE x (
    a INT NOT NULL,
    FOREIGN KEY (a) REFERENCES a (id) ON UPDATE CASCADE ON DELETE CASCADE
) ENGINE = InnoDB; 
```

这会产生以下错误：

```
ERROR 1005 (HY000): Can't create table './abc/x.frm' (errno: 150) 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T20:09:20.623

也许这就是为什么

> 如果您重新创建已删除的表，则它必须具有符合引用它的外键约束的定义。如前所述，它必须具有正确的列名和类型，并且必须在引用的键上具有索引。如果这些不满足，MySQL 返回错误号 1005 并在错误消息中引用错误 150。

来自：[http ://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T20:08:46.723

使用带有“errno”错误号的[perror](http://dev.mysql.com/doc/refman/5.0/en/perror.html)来获取错误消息（perror 150）：

> MySQL错误代码150：外键约束形成错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T20:07:59.097

可能那个 a.id 不存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-26T06:07:07.523

This also happens if there are duplicate foreign key names.

Say for example that you have two very similar tables with long names. To "save" time, you copy and paste the foreign key names from the first table's CREATE, then get distracted and fail to update the part of the table name that is different. They happen to share a foreign key to another table, resulting in one or more identical foreign key names.

Have you noticed that bashing your head against the monitor isn't as satisfying with an LCD?

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-23T10:54:01.870

当引用的表不使用 InnoDB 存储格式时也会抛出此错误。

# ruby-on-rails - 如何从两列中的任何一列中查找值的结果？（取决于哪个）（Rails）

> ID：1003672
> 
> 赞同：1
> 
> 时间：2009-06-16T20:06:47.510
> 
> 标签：ruby-on-rails, database, sorting

总菜鸟问题。将不胜感激任何指针。

我有一个轨道模型，其中包含一个概念的 2 个可能值，例如距离（来自 GPS 文件的值和编辑值）。可以在任一列（仅文件或仅手动），两者（在这种情况下手动覆盖文件）中都有一个值，或者两者都没有：

```
distance-file     distance-edited
9
10                11
                  12 
```

在我的应用程序的几个地方，我想查找并按距离对结果进行排序，其中文件与编辑的关系仅在我想在存在时使用距离编辑的情况下才重要。

因为我在很多地方都进行了这种排序，所以理想情况下，我想集中逻辑来选择要在某处使用的距离值，这样在每个查找中我都可以简单地根据距离进行排序。

这样做的正确方法是什么？

谢谢！

奥利维亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T20:29:40.380

因此，重申一下，您想在存在时使用距离编辑作为主要度量，而在不存在时使用距离文件？你需要类似的东西：

```
ORDER BY COALESCE(distance-edited, distance-file) 
```

Coalesce 的意思是“使用这个列表中第一个不是 NULL 的值”，并且是一个 MS SQL 特定的函数。对于其他数据库，您需要使用该系统支持的等效语句。

如果两者都是 NULL 怎么办？你想要它在列表的末尾还是开头？您可以通过在合并列表中添加第三个值来使用“默认”值：

```
ORDER BY COALESCE(distance-edited, distance-file, 100) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T20:28:18.933

我认为您应该能够简单地将`:order => 'distance-edited, distance-file'`其作为条件传递给您的`find`.

# sql-server - 愚蠢用户的可用视图？

> ID：1003676
> 
> 赞同：3
> 
> 时间：2009-06-16T20:07:03.997
> 
> 标签：sql-server, database, excel, ms-access

我正在做一个小项目，该项目需要我们的一些用户能够查看/排序/过滤并通常使用大量数据。它基于 sql server 2000 视图，大约包含 125k 行的历史事件数据（想想体育）。

通常我会转向 excel 进行这种简单的操作，但我们使用的 excel 版本不支持超过 65k 行（2003 年）。有想过访问，但表面上界面似乎有点复杂。

有谁知道让这些用户快速执行这些操作的好工具？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-16T20:15:43.920

老实说，如果您有信心可以使用 excel 2007 快速实施解决方案（比如说 1 小时）。考虑到 Office 2007 的成本约为 500 美元，无论您的每小时费率是多少（假设是 50 美元），那么您需要在 10 小时内构建一些东西，如果超过了，最好还是购买 Office 2007。

10 小时，不到 2 天的开发时间。500 美元的价格标签是新版 Office，而不是升级版。

听起来是时候升级了。

顺便说一句，这里有一些[Excel](http://blogs.msdn.com/excel/archive/2005/09/26/474258.aspx) 2007 限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-16T20:11:54.770

[Report Builder 2.0](http://www.microsoft.com/downloads/details.aspx?FamilyID=9f783224-9871-4eea-b1d5-f3140a253db6&displaylang=en)是一个易于使用的创建报告的工具。

如果您安装[Sql Server Express 2008](http://go.microsoft.com/?linkid=9394724)，您将免费获得 Reporting Services。

这将一直有效，直到您达到 Sql Express 的大小限制，我相信 4GB 的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T20:09:37.720

Intranet 站点呢？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-16T20:13:01.787

看看[ASP.NET 动态数据](http://www.asp.net/dynamicdata/)网站。您应该能够在一个小时或更短的时间内创建一个基本站点。它们甚至开箱即用。

您的用户可能很“愚蠢”，但您正在为他们工作！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T20:17:12.853

如果您使用用户可以控制的正确过滤器进行设置，水晶报表还不错。

然后，您可以嵌入 Intranet 站点（非常容易使用 Visual Studio），或者让他们使用[免费查看器](http://www.businessobjects.com/forms/crystalreports/viewer/)在本地查看它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-17T00:48:04.117

如果您已经在使用 SQL Server，请尝试安装 SQL Server 报告服务 (SSRS)。它允许您快速为您的用户生成报告并在 Web 界面上发布它们，或者它甚至有一个名为 Report Builder 的浏览器插件，允许用户创建自己的报告。如果用户精通excel，那么报表生成器对他们来说将是一个轻松的跳跃。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T20:09:35.443

创建一个小型 Windows 应用程序，上面只有 1 个网格视图，启用排序/分页等？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-16T20:15:40.393

如果你最终建立了某种网站，请查看[Google 可视化 API](http://code.google.com/apis/visualization/)以获得一些非常漂亮的图形和图表。

# c# - 使用 c#mail.dll 时出错

> ID：1003678
> 
> 赞同：1
> 
> 时间：2009-06-16T20:07:08.383
> 
> 标签：c#, email, gmail

我正在尝试通读 gmail 帐户以获取从手机（我的手机）发送到那里的 gps 数据（在电子邮件的文本中）

```
using (Pop3Client cl = new Pop3Client())
            {
                cl.UserName = "crash893";
                cl.Password = "password";
                cl.ServerName = "pop.gmail.com";
                cl.AuthenticateMode = Pop3AuthenticateMode.Pop;
                cl.Ssl = true;
                cl.Authenticate();
                ///Get first mail of my mailbox
                Pop3Message mg = cl.GetMessage(1);  <<<<<<<<<< ERROR
                String MyText = mg.BodyText;
                ///If the message have one attachment
                Pop3Content ct = mg.Contents[0];
                ///you can save it to local disk
                ct.DecodeData("c:\\test.txt");
            } 
```

但我在“获取邮箱消息的第一封邮件”时遇到异常

```
"Higuchi.Net.Pop3.Pop3ConnectException: Pop3 connection is closed
at Higuchi.Net.Pop3.Pop3Client.SendCommand(String inCommand)
at Higuchi.Net.Pop3.Pop3Client.Execute(String inCommand, Boolean inIsMultiLine)
at Higuchi.Net.Pop3.Pop3Client.Execute(Pop3Command inCommand)
at Higuchi.Net.Pop3.Pop3Client.GetMessage(Int64 inMailIndex)"} 
```

理想情况下，我想做的是打开这个阅读此帐户中针对某个主题行的所有新未读电子邮件，然后阅读正文中的数据并将它们标记为已读

有谁知道为什么它会出错

有没有人对 c#mail 有任何经验，他们可以为我指出正确的方向来阅读和制作已阅读的电子邮件等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T20:13:46.963

无法使用 POP 协议将电子邮件标记为已读。

尝试使用 IMAP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T20:15:35.137

cl.端口 = 995;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T21:12:31.573

```
 using (Pop3Client cl = new Pop3Client())
        {
            cl.UserName = "ewgsdssw";
            cl.Password = "sdgwsegw";
            cl.ServerName = "pop.gmail.com";
            cl.AuthenticateMode = Pop3AuthenticateMode.Pop;
            cl.Port = 995;
            cl.Ssl = true;
            cl.Authenticate();
            ///Get first mail of my mailbox
            ///
            int total = Convert.ToInt16(cl.GetTotalMessageCount());

            while (total >= 1)
            {
                Pop3Message mg = cl.GetMessage(total);
                if (mg.Subject == "I am Here")
                {

                    // http://maps.google.com/maps?q=38.89552,-77.43265
                    //(+/- 76 metres.)

                    string location = mg.BodyText;
                    location = location.Replace("http://maps.google.com/maps?q=","~");
                    location = location.Replace("metres.)\r\n\r\n","~");

                    location = location.Split('~')[1];

                    location = location.Replace("(+/- ", ",");
                    location = location.Replace("\r\n", "");

                    string[] data = location.Split(',');
                    string lat = data[0];
                    string lon = data[1];
                    string res = data[2];
                    DateTime time = mg.Date;

                    textBox1.AppendText(string.Format("Lat: {0} LON: {1} Res: {2} TIME: {3}\r\n",lat,lon,res,time.ToString()));

                }

                total--;
            }

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T20:14:53.000

我没有使用 C#Mail 的经验，这个答案可能无济于事，但我过去在尝试编写电子邮件发送/接收相关代码时经历过奇怪的事情。

原来我们在工作中运行的防病毒软件有一个允许的 .EXE 的白名单，可以进行入站/出站 POP3 或 SMTP 连接。有没有可能这是你的问题？

# ajax - 在 ajax 或 flash 中创建图像查看器？

> ID：1003681
> 
> 赞同：1
> 
> 时间：2009-06-16T20:07:38.613
> 
> 标签：ajax, flash

我最近一直在尝试做更多的 Web 开发工作（我目前在做其他技术工作，但对 Java、C++、VB、Python 和 PHP 有一些经验）并且我被要求创建一个带有图像查看器的基本网站. 该网站是为一位艺术家而设计的，她想要查看器，以便用户可以看到她的画作的缩略图并单击它们以查看大图。

那里有很多现有的程序（例如，simpleviewer）——大多数似乎都是基于 Flash 的。出于各种原因，我想创建自己的，其中最重要的是学习如何去做。谁能给我关于使用什么技术以及如何进行的建议/意见？没有详细的步骤，只是指向正确方向的指针。（例如，我可以在网上找到现有的脚本，然后修改/修改吗？）我已经在进行研究以解决这个问题，但是来自精明程序员的建议将为我节省一些时间。

我对 Flash 或 Ajax 了解不多，但我愿意学习其中任何一个（并且最终想学习两者）。我现在不会花 700 美元购买 Flash Pro，所以如果我走这条路，我需要使用 FlashDevelop 之类的东西。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T20:15:13.543

1.  你会想要 jQuery。[jQuery.com](http://jquery.com/)
2.  Jquery 有*很多*有用的插件：[jquery plugins page](http://plugins.jquery.com/)
3.  开始搜索！[这是我在搜索“图像厨房”时发现的一个很好的](http://www.twospy.com/galleriffic/advanced.html)

4.  Enjoy. Jquery is your friend. Of course this post is biased. So, to give credits to others, you can also look into [mootools](http://mootools.net/), [YUI](http://developer.yahoo.com/yui/), [prototype](http://www.prototypejs.org/), [scriptaculous](http://script.aculo.us/), etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T20:13:24.827

如果您要访问 Flash 根目录，请务必查看[http://slideshowpro.net/](http://slideshowpro.net/)（您不需要 Flash IDE 来自定义它 - 全部通过 XML 设置完成）

另一种方法是通过 JavaScript。几个很酷的脚本是：

*   [http://jquery.com/demo/thickbox/](http://jquery.com/demo/thickbox/)
*   [http://fancy.klade.lv/](http://fancy.klade.lv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T20:14:18.790

您可以扫描图像，将它们 base64 编码到数据库中，然后在您的站点上使用 <img> 标签指向一个 PHP 页面，该页面对图像进行 base64 解码。虽然您可以在使用 GIMP 或其他类似工具加载它们之前这样做，但没有真正的方法给它们加水印。

# c - 如何与 Linux tun 驱动程序交互

> ID：1003684
> 
> 赞同：24
> 
> 时间：2009-06-16T20:07:50.610
> 
> 标签：c, driver, tunnel, tun

我很难解决这个问题 - 我正在尝试编写一个与 Linux 隧道驱动程序交互的程序。在一个非常基本的层面上，我只是想创建一个能够通过网络隧道传输数据的应用程序。但是，我完全不知道如何正确设置隧道驱动程序以完成此操作。

我正在 Ubuntu 9.04 上开发，并且已加载隧道驱动程序内核模块。

存在设备`/dev/net/tun`，但没有`/dev/tunX`设备。我无法使用`ifconfig`- 每当我运行时创建这些设备`/sbin/ifconfig tun0 up`，例如，我收到以下错误：

> tun0：获取接口标志时出错：没有这样的设备。

如果我尝试查看`/dev/net/tun`设备，则会出现以下错误：

> cat: /dev/net/tun: 文件描述符处于错误状态。

尝试`/dev/tunX`通过一个小程序打开，基本上，一个简单的

```
tun_fd = open( "/dev/tun0", O_RDWR ) 
```

返回 -1：应用程序以 root 身份运行，但仍无法打开此隧道设备。可以打开`/dev/net/tun`，但这似乎不会生成`/dev/tunX`要使用的新设备。

所以，总而言之 - 如何编写一个希望使用 Linux 隧道驱动程序的应用程序？任何见解将不胜感激。

谢谢; 〜罗伯特

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-03-01T23:42:25.537

没有`/dev/tunX`设备文件。相反，您打开`/dev/net/tun`并配置它通过`ioctl()`“指向”到`tun0`. 为了展示基本过程，我将使用命令行工具创建 TUN 接口`ip tun tap`，然后展示从该 TUN 设备读取的 C 代码。因此，通过命令行创建 tun 接口：

```
ip addr show # my eth0 inet address is 10.0.2.15/24 as Im running on a VirtualBox vm with Ubuntu 18.04 guest
sudo ip tuntap add mode tun dev tun0
sudo ip addr add 10.0.3.0/24 dev tun0  # give it an address (that does not conflict with existing IP)
sudo ip link set dev tun0 up  # bring the if up
ip route get 10.0.3.50  # check that packets to 10.0.3.x are going through tun0
# 10.0.3.50 dev tun0 src 10.0.3.0 uid 1000 
ping 10.0.3.50 # leave this running in another shell to be able to see the effect of the next example, nobody is responding to the ping 
```

被`tun0`创建并且所有到目标 IP 地址 10.0.3.x 的数据包都将被路由到`tun0`。

要从用户空间程序读取/写入此接口的数据包，您需要`/dev/net/tun`使用`ioctl()`. 这是一个示例，它将读取到达`tun0`接口的数据包并打印大小：

```
#include <fcntl.h>  /* O_RDWR */
#include <string.h> /* memset(), memcpy() */
#include <stdio.h> /* perror(), printf(), fprintf() */
#include <stdlib.h> /* exit(), malloc(), free() */
#include <sys/ioctl.h> /* ioctl() */
#include <unistd.h> /* read(), close() */

/* includes for struct ifreq, etc */
#include <sys/types.h>
#include <sys/socket.h>
#include <linux/if.h>
#include <linux/if_tun.h>

int tun_open(char *devname)
{
  struct ifreq ifr;
  int fd, err;

  if ( (fd = open("/dev/net/tun", O_RDWR)) == -1 ) {
       perror("open /dev/net/tun");exit(1);
  }
  memset(&ifr, 0, sizeof(ifr));
  ifr.ifr_flags = IFF_TUN;
  strncpy(ifr.ifr_name, devname, IFNAMSIZ); // devname = "tun0" or "tun1", etc 

  /* ioctl will use ifr.if_name as the name of TUN 
   * interface to open: "tun0", etc. */
  if ( (err = ioctl(fd, TUNSETIFF, (void *) &ifr)) == -1 ) {
    perror("ioctl TUNSETIFF");close(fd);exit(1);
  }

  /* After the ioctl call the fd is "connected" to tun device specified
   * by devname ("tun0", "tun1", etc)*/

  return fd;
}

int main(int argc, char *argv[])
{
  int fd, nbytes;
  char buf[1600];

  fd = tun_open("tun0"); /* devname = ifr.if_name = "tun0" */
  printf("Device tun0 opened\n");
  while(1) {
    nbytes = read(fd, buf, sizeof(buf));
    printf("Read %d bytes from tun0\n", nbytes);
  }
  return 0;
} 
```

如果你有`ping 10.0.3.1`或`ping 10.0.3.40`正在运行，你会`Read 88 bytes from tun0`定期看到。

您还可以使用 netcat UDP 进行测试，`nc -u 10.0.3.3 2222`并键入 text + Enter。

如果没有打印任何内容，则很可能分配给 tun0 的 id 地址/ip 范围不可访问/可路由/可寻址。确保`ip route get 10.0.3.4`显示`10.0.3.4 dev tun0`linux 内核知道到 10.0.3.4 的数据包应该发送到 tun0 设备。

删除`tun0`做

```
sudo ip link set dev tun0 down
sudo ip tuntap del mode tun dev tun0 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-06-16T20:30:34.183

阅读[`/usr/src/linux/Documentation/networking/tuntap.rst`](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/networking/tuntap.rst?id=HEAD)。

您应该使用`open`该`/dev/net/tun`设备。open fd 上的后续`ioctl`将创建`tun0`（或您希望命名的任何名称）网络接口。Linux 的网络接口不对应任何`/dev/*`设备。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T04:42:19.080

我遇到了一个很好的介绍教程

[http://backreference.org/2010/03/26/tuntap-interface-tutorial/](http://backreference.org/2010/03/26/tuntap-interface-tutorial/)

它带有一个源压缩包。

它与这个问题在同一组谷歌结果中。:-)

# module - DNN 问题：动态注册、Paypal 和用户创建

> ID：1003689
> 
> 赞同：0
> 
> 时间：2009-06-16T20:09:05.837
> 
> 标签：module, dotnetnuke, payment-gateway, registration

我在使用 DNN 的动态注册模块时遇到问题。

该模块设置了表单完成事件，用户被重定向到贝宝，支付完成后创建用户并发送电子邮件。

我还对其进行了设置，以便在付款完成时发送一封电子邮件，只是为了测试模块是否知道付款何时完成。

我尝试在启用支付网关 (Paypal) 的情况下完成该过程 - 电子邮件被发送出去，但没有创建用户。但是，当我禁用支付网关时，会创建一个用户并发送电子邮件。

我在这里遗漏了什么使模块没有意识到它需要创建用户吗？

模块发送电子邮件的事实让我认为它也应该触发 Uesr Creation 事件。

关于动态注册如何与 Paypal 一起使用或我如何解决这个问题的任何想法/提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T14:35:23.100

当用户从贝宝返回您的网站时，您必须打开友好 URL，否则该网站无法读取从贝宝发回的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:18:59.250

[我在http://www.datasprings.com/Products/ProductForums/tabid/727/forumid/3/tpage/1/view/topic/postid/4581/language/en-US/Default.aspx#](http://www.datasprings.com/Products/ProductForums/tabid/727/forumid/3/tpage/1/view/topic/postid/4581/language/en-US/Default.aspx#4581)找到了以下信息[4581](http://www.datasprings.com/Products/ProductForums/tabid/727/forumid/3/tpage/1/view/topic/postid/4581/language/en-US/Default.aspx#4581)

> 打开 PayPal 集成时：
> 根据您的 PayPal 支付网关中的信息和设置将用户重定向到 PayPal。这包括 PayPal 登录、沙箱或标准网关，以及支付信息/附加参数。
> 
> 完成事件最初不会
> 触发完成的事件如何触发？
> 启用 PayPal 后，动态完成事件需要“链接”到 PayPal IPN 代码。简而言之，这意味着您将在 PayPal 支付网关部分中指定应该触发哪些“完成事件”，基本上取决于 PayPal 将发送到您的注册表单的 IPN 代码。
> 
> 例如：也许您想设置完成事件以将用户添加到安全角色，但您只希望在付款完成时发生这种情况。您将首先创建完成事件，然后在“表单完成事件/PayPal 付款状态”下的 PayPal 支付网关部分中“链接”
> 
> 例如：也许您想设置一个“付款失败”电子邮件发送到如果订阅付款失败，管理员。您将首先创建完成事件，然后在“表单完成事件/PayPal 付款状态”下的 PayPal 支付网关部分中“链接”它

# jetty - 如何为 Eclipse 3.5 安装 Jetty WTP 服务器适配器？

> ID：1003710
> 
> 赞同：6
> 
> 时间：2009-06-16T20:12:07.653
> 
> 标签：jetty, eclipse-wtp, eclipse-3.5

目前我正在尝试为 Eclipse 3.5 安装 Jetty WTP 服务器适配器并收到以下错误：

```
An error occurred while collecting items to be installed session context was:(profile=epp.package.jee,phase=org.eclipse.equinox.internal.provisional.p2.engine.phases.Collect, operand=, action=).
  No repository found containing: osgi.bundle,org.mortbay.jetty.serveradaptor,1.0.4
  No repository found containing: org.eclipse.update.feature,org.mortbay.jetty.serveradaptor,1.0.4 
```

要安装，我尝试添加一个新的服务器运行时，单击“安装附加服务器适配器”并按照我在单击最终加载的通用 Jetty 服务器适配器时得到的向导进行操作。到目前为止，我在所有 RC 中都出现了这个错误，但目前活动的 RC 是 RC4。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-07-21T06:25:50.533

我还发现添加 Jetty（和 Glassfish）服务器适配器的“下载其他服务器适配器”路径失败，与原始海报具有相同的依赖性问题。

下载 .jar 并将其复制到我的 Eclipse 安装 idd 的“插件”目录中不起作用。Jetty 服务器适配器仍然不是可识别的已安装插件。

我不得不去“帮助->安装新软件->添加...”并手动输入[http://www.webtide.com/eclipse站点。](http://www.webtide.com/eclipse)然后我可以看到 Jetty 适配器，并且安装成功。它似乎已安装到 eclipse/plugins/ 中，而不是将 .jar 文件复制到 eclipse/plugins 中。

这可能是 7 月 2 日的海报想要表达的意思，但不是很清楚。

我不知道为什么，但是“下载其他服务器适配器”对话框在 Eclipse 3.5 中一次对我不起作用，安装总是因依赖问题而失败。

我还发现我必须手动安装所有 WST 适配器项来绕过失败的依赖项，例如：

“Web、XML 和 Java EE 开发->JST 服务器适配器”、“WST 服务器适配器”

以及“数据库开发”项目。我不确定哪些是必需的。当我安装了所有看起来可能的东西时，从他们的更新站点安装 Glassfish 和 Jetty 服务器适配器时，我的所有依赖问题都得到了解决。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-11-24T17:10:20.890

有一个新的（官方的！）Jetty WTP 插件来支持 Jetty 7.x 和 8.x：[http ://wiki.eclipse.org/Jetty_WTP_Plugin](http://wiki.eclipse.org/Jetty_WTP_Plugin)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-12-06T21:58:26.700

在 Jetty 服务器适配器之前安装 JST 服务器 UI 可以解决该问题。这是一个当前的错误（参见[https://bugs.eclipse.org/bugs/show_bug.cgi?id=321663](https://bugs.eclipse.org/bugs/show_bug.cgi?id=321663)）。这样，您可以将其安装为插件或在服务器视图中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-30T09:10:35.677

我想你需要 org.mortbay.jetty.serveradaptor.1.0.4.jar 来安装 jetty 适配器，从[http://www.webtide.com/eclipse](http://www.webtide.com/eclipse)下载，放在 eclipse 的插件中。

希望答案能帮到你。

# java - 使用 RegEx 替换属性值

> ID：1003713
> 
> 赞同：0
> 
> 时间：2009-06-16T20:12:26.000
> 
> 标签：java, regex, properties

我有 config.properties 文件，其中包含 Java 属性格式的属性。我需要用新值替换具有已知名称的属性值。应保留文件的注释和格式。

我目前的做法是使用 RegEx 来匹配属性名称，然后替换它的值。但是，Java 属性支持多行值，我很难匹配。

这是一个例子。假设 config.properties 包含以下文本：

```
# A property
A = 1\
     2

# B property
B = 2 
```

我想用“3”替换属性 A 的值。最终结果应该是：

```
# A property
A = 3

# B property
B = 2 
```

我当前的 RegEx`(?s)(A[\\s]*=[\\s]*)(.*)`无法正常工作。

请建议一个正则表达式或另一种方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T08:12:06.277

试试这个：

```
String regex = "(?m)^(A\\s*+=\\s*+)"
    + "(?:[^\r\n\\\\]++|\\\\(?:\r?\n|\r|.))*+$"; 
```

我在你写的时候留下了第一部分，这样我就可以专注于匹配值；管理键和分隔符的规则实际上要复杂得多。

该值由零个或多个除回车、换行或反斜杠或反斜杠后跟行分隔符或任何单个非行分隔符字符之外的任何字符组成。行分隔符可以是三种最常见形式中的任何一种：DOS/Windows ( `\r\n`)、Unix/Linux/OSX ( `\n`) 或 pre-OSX Mac ( `\r`)。

请注意，正则表达式处于多行模式，因此行锚将起作用，但*不是*单行（DOTALL）模式。我也一直使用所有格量词，因为我知道回溯永远不会有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T20:17:44.383

您有 Java 工具来加载、读取、修改和保存属性文件。

我个人喜欢[Jakarta Commons Configuration](http://commons.apache.org/configuration/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T23:18:56.980

我同意 streetpc 关于使用 Jakarta Commons Configuration 的观点。

但是，要专注于您的正则表达式，问题是大多数正则表达式引擎默认以每行为基础工作。

例如，在（相当古老的）Perl5Util 类中（参见[http://jakarta.apache.org/oro/api/org/apache/oro/text/perl/Perl5Util.html](http://jakarta.apache.org/oro/api/org/apache/oro/text/perl/Perl5Util.html)），您可以读到模式具有以下语法：

```
[m]/pattern/[i][m][s][x] 
```

*m 前缀是可选的，可选的尾随选项的含义是：*

```
我不区分大小写匹配
m 将输入视为由多行组成
s 将输入视为由单行组成
x 启用包含空格和注释的扩展表达式语法

```

# c# - 在 C# xml Web 服务中使用接口

> ID：1003715
> 
> 赞同：0
> 
> 时间：2009-06-16T20:12:38.667
> 
> 标签：c#, web-services

如何在 XML Web 服务中使用接口（由哪些类实现）？

当我这样做时，我得到一个 YSOD 声称接口不可序列化。如果我将 Serializable 属性添加到接口的类中，则会出现另一个妨碍进度的错误（不记得是哪个错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T20:55:18.130

在大多数情况下，如果没有一些工作，接口是不可序列化的。通常，当被序列化的类包含一个使用接口作为变量的对象或它的某些变体时，会遇到此错误。例如，像这样的属性会抛出错误：

```
[Serializable]
public class TestClass
{
     private ICustomInterface _iCustomInterfaceObject;

     public ICustomInterface CustomInterfaceProperty
     {
         get { return _iCustomInterfaceObject; }
         set { _iCustomInterfaceObject = value; }
     }
} 
```

为了参数（而不是让我输入额外的验证代码），假设您总是将 CustomInterfaceProperty 分配给从 ICustomInterface 继承的对象（使用这样的接口类型时需要）。即使它 100% 肯定总是被填充，它也不允许你序列化 TestClass。

为了解决这个问题，您需要确保您正在使用的接口（引发错误的接口）也继承自 ISerializable。这样，您就可以保证从 ICustomInterface 继承的所有对象也实现了序列化方法。

不幸的是，在使用 xml 序列化时情况并非如此。如果您使用 System.Xml.Serialization 中的序列化程序，那么此方法将不起作用，因为正如 Robert Harvey 指出的那样，接口不包含无参数构造函数（使用 xml 序列化程序时需要该构造函数）。我现在的建议是，如果您设置了这种序列化方法，请将属性 [XmlIgnore] 附加到相关部分并从那里继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T21:46:04.843

我的建议是将通过网络传输的对象视为基本数据传输对象，仅此而已。您很想只使用您的域对象并序列化它们，但正如您已经看到的那样，普通内存中的对象可能比无需大量工作就可以序列化的复杂性要高得多，有时甚至根本不需要。

您还可以最终限制域类的功能，以保持它们可序列化。

最后，要避免的一个更微妙的错误以及拥有单独 DTO 的一个原因是，否则您将域对象与公开发布的接口（即 Web 服务本身）紧密耦合。对 Web 服务进行版本控制可能会很麻烦，如果您的服务接口没有与您的域类紧密耦合，它会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T20:18:21.433

我猜另一条消息是您无法序列化接口，因为它不包含默认（无参数）构造函数。

如果底层类是框架类，你可能会被淹没。其中一些没有标记为可序列化，其中一些没有无参数构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T02:24:45.640

此外，您可能会对运行时序列化和 XML 序列化感到困惑。XML 序列化是旧的 ASMX Web 服务使用的。它不太关注 [Serializable] 属性，但大多只是序列化具有默认构造函数的公共类的公共读/写属性。

# ssis - SSIS 封装设计

> ID：1003721
> 
> 赞同：1
> 
> 时间：2009-06-16T20:14:03.390
> 
> 标签：ssis

设计 SSIS 包的最佳方式是什么？作为项目的一部分，我正在加载多个维度和事实。是否会更好：

1.  在 1 个数据流中有 1 个数据包和 1 个数据流以及所有数据提取和加载逻辑？
2.  是否有 1 个包和多个数据流，每个数据流都采用 1 个维度的逻辑？
3.  每个维度有 1 个包，然后有一个主包将它们全部调用？

在做了一些研究之后，2 和 3 似乎是更可行的选择。有没有专家想分享他们的经验和/或提出替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T02:21:30.623

您还可以考虑让 SQL Server 代理作业调用多个包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-23T04:35:06.040

Microsoft 的[Project Real](http://www.microsoft.com/sqlserver/2005/en/us/project-real.aspx)是许多最佳实践的一个很好的例子：

*   维度建模的封装设计和配置
*   包记录
*   分区

它基于 SQL 2005，但非常适用于 2008。它支持您的选项 #3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T17:56:34.687

我经常选择选项 3。这是 Kimball Microsoft Data Warehouse Toolkit 书中使用的方法，值得一读。

[http://www.amazon.co.uk/Microsoft-Data-Warehouse-Toolkit-Intelligence/dp/0471267155/ref=sr_1_1?ie=UTF8&s=books&qid=1245347732&sr=8-1](http://www.amazon.co.uk/Microsoft-Data-Warehouse-Toolkit-Intelligence/dp/0471267155/ref=sr_1_1?ie=UTF8&s=books&qid=1245347732&sr=8-1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-02-21T16:09:07.623

我认为答案并不那么明确......就像DWH 通常没有“最佳”设计一样，我认为没有一种“最佳”封装方法。

它在很大程度上取决于维度的数量和相关维度的数量以及暂存区域中的数据结构。

我非常喜欢 Project Real（上面提到的）方法，特别是认为包日志记录做得很好。我想我在某处读过 Denali (SQL 2011) 将内置 SSIS 日志/跟踪，但不确定细节。

从调用的角度来看，我会选择一个 SQL 代理工作，它调用一个主包，然后调用所有子包并管理它们之间的错误处理/逻辑/电子邮件等，利用日志/错误表来跟踪和管理包流动。SSIS 允许 SQL 代理更复杂的逻辑集（例如，如果所有任务 A、B 和 C 都已完成，而不是任务 D，则调用此子包）

Further, I would go for one package per Snowflaked dimension, as usually from the staging data one source table will generate a number of snowflaked dimensions (e.g. DimProduct, DimProductCategory, DimProductSubCategory). It would make sense to have the data read in once in on data flow task (DFT) and written out to multiple tables. I would use one container per dimension for separation of logic.

# c# - ASP.NET 表达式生成器什么时候最有用？

> ID：1003729
> 
> 赞同：7
> 
> 时间：2009-06-16T20:15:29.677
> 
> 标签：c#, asp.net, vb.net, expressionbuilder

我看到了一个使用表达式构建器的示例，并在这里创建您自己的自定义表达式构建器类：

[http://aspnet.4guysfromrolla.com/articles/022509-1.aspx](http://aspnet.4guysfromrolla.com/articles/022509-1.aspx)

但是，我看不到使用这种方法的价值。这似乎并不比在后面的代码中以编程方式设置值容易得多。

据我所知，你唯一能用它们做的就是设置属性。也许它们对于在某些控件上设置默认值很有用？

谁能阐明这个 ASP.NET 功能在哪里变得强大？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T20:25:44.693

我们正在使用自定义表达式构建器来本地化我们的应用程序。例如，标记看起来像这样：

```
<asp:LinkButton Text="<%$ Str:SomeString %>" ... /> 
```

表达式构建器从资源文件中读取 ID 为 SomeString 的字符串（考虑到当前用户的语言首选项）并将其分配给 LinkBut​​ton 的 Text 属性。

这非常灵活：我们可以通过简单地将资源文件复制到应用程序目录来添加语言。如果客户想要为该链接按钮提供不同的文本，他只需将自定义字符串添加到资源文件并更改表达式构建器中的字符串 ID（无需更改代码隐藏）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T23:28:58.270

如果您关心 ViewState（您应该），自定义表达式很方便。请参阅[真正了解 ViewState](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/truly-understanding-viewstate.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-16T01:58:08.850

当您需要表达式在页面生命周期的早期执行时，它很有用。它在页面生命周期中的特定点不需要参数时执行。

还可以看看制作一个通用[的“代码”表达式生成器](http://weblogs.asp.net/infinitiesloop/archive/2006/08/09/The-CodeExpressionBuilder.aspx)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2010-01-21T20:05:57.743

使一些客户端javascript参数“动态”，是这个特性的一个很好的用途。

因此，假设您在 web.config 文件中有一个设置，您希望通过 javascript 标记将其传递给客户端。您可以在后面的代码中处理 OnRender 事件，并在那里处理 js，但这会很丑陋。在 ASPX 中做这样的事情要好得多：

```
 <script type="text/javascript">
   var sessionKill = <%$ AppSettings:ClientSessionTimeOut%> 
```

# language-agnostic - 以编程方式检测页面上的“最重要的内容”

> ID：1003734
> 
> 赞同：8
> 
> 时间：2009-06-16T20:16:09.207
> 
> 标签：language-agnostic, screen-scraping, design-patterns

已经完成了哪些工作（如果有的话）来自动确定 html 文档中最重要的数据？举个例子，想想你的标准新闻/博客/杂志风格的网站，包含导航（可能带有子菜单）、广告、评论和奖品——我们的文章/博客/新闻正文。

您如何以自动化方式确定新闻/博客/杂志上的哪些信息是主要数据？

注意：理想情况下，该方法适用于格式良好的标记和糟糕的标记。是否有人使用段落标签来制作段落或一系列中断。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-19T13:27:31.903

> 想想你的标准新闻/博客/杂志风格的网站，包含导航（可能带有子菜单）、广告、评论和奖品——我们的文章/博客/新闻正文。
> 
> 您如何以自动化方式确定新闻/博客/杂志上的哪些信息是主要数据？

我可能会尝试这样的事情：

*   打开网址
*   从该页面读取指向同一网站的所有链接
*   跟踪所有链接并为每个 URL（HTML 文件）构建一个 DOM 树
*   这应该可以帮助您提出多余的内容（包括模板等）
*   比较同一站点上所有文档的 DOM 树（树行走）
*   剥离所有冗余节点（即重复、导航标记、广告等）
*   尝试识别相似的节点并尽可能剥离
*   找到在该网站的其他 DOM 中找不到的最大唯一文本块（即唯一内容）
*   添加为进一步处理的候选者

这种方法看起来很有前途，因为它做起来相当简单，但仍然有很好的适应性潜力，即使是过度使用模板的复杂 Web 2.0 页面，因为它会在所有页面之间识别相似的 HTML 节点在同一个网站上。

这可能会通过简化使用评分系统来跟踪之前被识别为包含唯一内容的 DOM 节点来进一步改进，以便这些节点优先用于其他页面。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-06-19T14:08:06.953

[可读性](http://lab.arc90.com/2009/03/readability.php)在这方面做得不错。

它是开源的并[发布在 Google Code 上](http://code.google.com/p/arc90labs-readability/)。

* * *

更新：我看到（[通过 HN](http://news.ycombinator.com/item?id=678444)）有人使用 Readability 将[RSS 提要自动修改为更有用的格式](http://andrewtrusty.appspot.com/readability/)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-06-16T20:34:15.113

有时有一个 CSS 媒体部分定义为“打印”。它的预期用途是“单击此处打印此页面”链接。通常人们用它来剥离大量的绒毛，只留下信息的肉。

[http://www.w3.org/TR/CSS2/media.html](http://www.w3.org/TR/CSS2/media.html)

我会尝试阅读这种风格，然后刮掉任何可见的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-18T22:25:25.487

我认为最直接的方法是寻找没有标记的最大文本块。然后，一旦找到它，找出它的边界并提取它。您可能希望从“非标记”中排除某些标签，例如链接和图像，具体取决于您的目标。如果这将有一个界面，则可能包括要从搜索中排除的标签复选框列表。

您还可以在 DOM 树中查找最低级别并找出其中哪些元素最大，但这在编写不佳的页面上效果不佳，因为 dom 树在此类页面上经常损坏。如果您最终使用它，我会想出一些方法来查看浏览器是否在尝试之前进入了怪癖模式。

您也可以尝试使用其中的几个检查，然后提出一个指标来决定哪个是最好的。例如，仍然尝试使用我上面的第二个选项，但如果浏览器正常进入怪癖模式，则给它一个较低的“评分”。这样做显然会影响性能。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-18T22:30:27.347

您可以使用支持向量机进行文本分类。一个想法是将页面分成不同的部分（比如考虑每个结构元素，如 div 是一个文档）并收集它的一些属性并将其转换为向量。（正如其他人所说，这可能是字数、链接数、图像数，越多越好。）

首先从大量文档（100-1000）开始，您已经选择了哪个部分是主要部分。然后使用这个集合来训练你的 SVM。

对于每个新文档，您只需将其转换为矢量并将其传递给 SVM。

这个向量模型实际上在文本分类中非常有用，你不一定需要使用 SVM。您也可以使用更简单的贝叶斯模型。

如果您有兴趣，可以在[信息检索简介](http://www-csli.stanford.edu/~hinrich/information-retrieval-book.html)中找到更多详细信息。（在线免费提供）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-16T20:27:17.467

我认为对此非常有效的算法可能是“哪个 DIV 中包含最多链接的文本？”

广告很少有超过两三句话的文字。例如，查看此页面的右侧。

内容区域几乎总是页面上宽度最大的区域。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T20:27:37.687

我可能会从标题和 Head 标签中的任何其他内容开始，然后按顺序过滤标题标签（即 h1、h2、h3 等）......除此之外，我想我会按顺序从上到下底部。根据其样式，假设页面标题具有 ID 或唯一类可能是安全的选择。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-19T13:39:47.823

我会寻找带有标点符号的句子。菜单、页眉、页脚等通常包含单独的单词，但不包含以逗号结尾并以句点或等效标点符号结尾的句子。

您可以查找包含带有标点符号的句子的第一个和最后一个元素，然后取其间的所有内容。标题是一种特殊情况，因为它们通常也没有标点符号，但您通常可以将它们识别为紧接在句子之前的 Hn 元素。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-19T14:04:37.057

今天，大多数新闻/博客网站都在使用博客平台。所以我会创建一组规则来搜索内容。例如，两个最流行的博客平台是 wordpress 和 Google Blogspot。

Wordpress 帖子标记为：

```
<div class="entry">
    ...
</div> 
```

Blogspot 帖子标记为：

```
<div class="post-body">
    ...
</div> 
```

如果按 css 类搜索失败，您可以转向其他解决方案，识别最大的文本块等。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-19T14:05:58.817

虽然这显然不是答案，*但*我会假设重要内容位于样式页面的中心附近，并且通常由被标题等打断的几个块组成。结构本身也可能是标记中的一个赠品。

文章/帖子/线程之间的差异将是一个很好的过滤器，可以找出哪些内容可以区分特定页面（显然，这必须增强以过滤掉随机的垃圾，如广告、“今日报价”或横幅）。多个页面的内容结构可能非常相似，因此不要过分依赖结构差异。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-19T14:11:20.693

[Instapaper](http://instapaper.com/)在这方面做得很好。您可能想查看[Marco Arment 的博客](http://www.marco.org/)以获取有关他如何做到这一点的提示。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-07T21:51:36.423

由于可读性不再可用：

*   如果您只对结果感兴趣，您可以使用 Readability 的继任者[Mercury](https://mercury.postlight.com/web-parser/)，一种 Web 服务。
*   如果你对一些代码感兴趣并且更喜欢 JavaScript，那么有 Mozilla 的[Readability.js](https://github.com/mozilla/readability)，它用于 Firefox 的阅读器视图。
*   如果你更喜欢 Java，你可以看看[Crux](https://github.com/chimbori/crux)，它也做得很好。
*   或者，如果 Kotlin 更适合您的语言，那么您可以查看[Readability4J](https://github.com/dankito/Readability4J)，它是上述 Readability.js 的一个端口。

# asp.net-mvc - 我应该在 ASP.NET MVC 中使用 Anti-XSS 安全运行时引擎吗？

> ID：1003736
> 
> 赞同：15
> 
> 时间：2009-06-16T20:16:40.670
> 
> 标签：asp.net-mvc, xss, antixsslibrary

我一直在阅读 Anti-XSS 安全运行时引擎，它看起来是一个很好的 Web 表单解决方案，因为它通过反射检查控件并在适当的地方自动编码数据。但是，由于我并没有真正在 ASP.NET MVC 中使用服务器端控件，因此它似乎不是 ASP.NET MVC 的可行解决方案。这是正确的还是我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-18T07:53:32.413

Anti-XSS 安全运行时引擎是一个 HTTP 模块，主要围绕更新旧版 ASP.NET 应用程序而设计。如果您已经使用内置的 HTML 帮助程序（即 Html.Encode()）编写了具有适当数据清理的 ASP.NET MVC 应用程序，那么 Anti-XSS 引擎不会添加任何新内容，并且需要额外的配置（对于必要的白-列表）和错误检查。

总而言之，您不应该依赖 Anti-XSS 引擎，尤其是当您依赖于对输入何时呈现和不呈现为 HTML 的显式控制时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T11:57:13.060

Phil Haack 在这里有一篇有趣的博客文章[http://haacked.com/archive/2009/02/07/take-charge-of-your-security.aspx](http://haacked.com/archive/2009/02/07/take-charge-of-your-security.aspx)。他建议将 Anti-XSS 与 CAT.NET 结合使用。

# java - Tomcat 自动关闭

> ID：1003738
> 
> 赞同：18
> 
> 时间：2009-06-16T20:17:16.240
> 
> 标签：java, apache, tomcat

我在 Windows 服务器上使用 Apache 和 Tomcat，从今天早上开始，Tomcat 在没有任何日志的情况下停止工作。它没有挂起，它只是关闭了。
Tomcat中没有日志，CPU/内存很好，`System.Exit`我的代码中没有。

有人遇到过这个问题吗？

它在 5-10 分钟后随机发生。应用程序正常响应，有时，繁荣..停止工作。

更新：仍然没有线索。管理员团队将在另一个盒子上安装 webapp...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-07T21:41:21.290

我启动 tomcat 的脚本有最后一行`tail -f catalina.out`。

有时我没有杀死这个脚本，然后shell超时并杀死了所有子进程的脚本，包括tomcat。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T20:33:17.127

这听起来像 JVM 正在崩溃。您是否查找过 JVM 崩溃日志？它通常具有类似 hs_err_pid*.log 的名称，并在 JVM 的工作目录中创建。

如果您找到这样的文件并将其上传，那么我们可能会提供更多帮助。

一些问题：

*   您最近是否更改了正在使用的 Java 版本？
*   您使用的 Tomcat 的确切版本是什么？
*   您使用的是 Tomcat Native（Apache Portable Runtime）吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-19T08:07:33.770

最近遇到了这个问题。

**场景**：Tomcat 成功启动，但 1 小时后自动关闭，有时这发生在 1 天后，tomcat 日志中没有任何内容。

**问题**：实际问题是内存使用率高且没有可用的 SWAP 内存。

**我是如何找到解决方案的**

如果tomcat不显示任何日志，那么系统日志中肯定有一些东西，所以我检查了`/var/log/messages`但由于我的权限被拒绝，我尝试`/var/log/dmesg`并得到了这个

“内存不足：杀死进程 14606 (java) 得分 106 或牺牲孩子”。

在输出中，我注意到**Swap Memory free 0 K**。Ran`top`命令确认相同。所以，不知何故，内存使用率很高，导致操作系统杀死了我的 tomcat 进程。

花了几个小时终于找到了原因。

`ps -ef | grep tomcat`表明有多个 tomcat 进程在为同一个应用程序运行。看来，早期的tomcat关闭可能没有成功，并且由于某种原因即使在关闭之后进程也没有被杀死，这导致了高内存使用。

因此，使用 . 杀死所有正在运行的 tomcat 进程`kill`。SWAP 内存被释放。

再次启动tomcat，工作正常。:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T13:09:06.433

最近我遇到了这个问题，如果将来有人遇到同样的问题，我希望这会有所帮助。

**场景：** Tomcat 在没有任何日志或错误的情况下关闭

**我的问题的根本原因：**从使用的任务访问的同步方法`TimerTask`

我有一个单例类，它有一个基于计时器或用户操作从各种线程访问的同步方法，有时这个方法需要几分钟才能完成。何时`TimerTask`等待此方法一段时间（我猜计时器超时/线程被杀死或后台发生某些事情）并且方法上的锁定被释放的那一刻，tomcat被杀死。

所以我删除了同步关键字并删除了单例，并为线程安全做了一些代码更改。然后问题就消失了。

**我是如何发现的：**我在同步方法的第一行中有一条日志语句，每次 tomcat 关闭时，我都会在最后几行中找到这条消息。

问候， 帕宁德拉·卡斯图里

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-16T20:31:53.107

在调试这样的问题时要寻找的东西：

*   查看日志目录 ($TOMCAT_ROOT/logs) 以确保所有日志文件都没有任何堆栈跟踪
*   查看 tomcat 启动脚本以检查日志文件的位置，以查看日志是否没有被写入另一个目录。
*   另一个原因可能是其他一些用户/进程可能发出 kill -9 可能会杀死 tomcat 而不给它任何记录错误的机会。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T20:37:18.523

另一种可能性是今天早上在绑定到服务器所需端口的盒子上启动了某个进程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-16T21:25:16.430

您的 servlet 或其依赖项之一是否允许调用 System.exit()？（不确定 Tomcat 虚拟机在这个意义上是如何锁定的）

我让开发人员认为可以使用 exit(666); 关于检测不可逆矩阵（这不好，但肯定不是致命的）。啊。也许您的系统中有一些类似的罪魁祸首？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-26T22:16:12.147

I noticed CATALINA_OPTS in my path and that was set for a lower JVM size. Hence, the crash and no log trace of tomcat was found. The server automatically shutdown in less than 2 hrs.

check, CATALINA_OPTS or JAVA_OPTS -- these might have jvm settings. either increase them or comment them out and increase the swap memory.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-27T15:23:42.890

有时，如果其他程序在同一端口上运行，则会发生这种情况。例如 Skype。在启动 Tomcat 之前关闭该程序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-20T06:59:34.873

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-11T10:13:23.640

尝试清理您的 elipse 项目，因为您可能已尝试添加另一台使用端口 8080 的服务器，然后当您尝试在外部执行默认使用端口 8080 的 tomcat 服务器时，tomcat 服务器在清理项目后自动关闭复制新的 war 文件并粘贴它在 bin 中运行良好结论：当服务器尝试使用已经获取的端口时，您会看到此类问题。

# ruby-on-rails - 生产模式下的八哥/工作问题

> ID：1003740
> 
> 赞同：3
> 
> 时间：2009-06-16T20:17:51.997
> 
> 标签：ruby-on-rails, asynchronous, workling, starling-server

我有一个具有异步处理功能的 Rails 应用程序，但无法让它在生产模式下工作。我从应用程序的根目录开始八哥，如下所示：

```
starling -d -P tmp/pids/starling.pid -q log/ 
```

然后我开始像这样工作

```
./script/workling_client start -t 
```

我第一次运行这个，它抱怨因为没有开发数据库，​​所以我创建了一个开发数据库，​​当我重新开始工作时，这个错误就消失了。但是当我尝试实际运行异步进程时，我在 log/production.log 中收到此消息

```
Workling::QueueserverNotFoundError (config/workling.yml configured to connect to queue server on localhost:15151 for this environment. could not connect to queue server on this host:port. for starling users: pass starling the port with -p flag when starting it. 
```

所以，我跑

```
sudo killall starling 
```

然后像这样从应用程序的根目录重新启动八哥：

```
starling -d -P tmp/pids/starling.pid -q log/ -p 15151 
```

这似乎工作正常，但是当我尝试使用此脚本/workling_client start -t 再次开始工作时，我在控制台中收到此消息

```
/var/rails-apps/daisi/vendor/plugins/workling/lib/workling/clients/memcache_queue_client.rb:68:in `raise_unless_connected!': config/workling.yml configured to connect to queue server on localhost:22122 for this environment. could not connect to queue server on this host:port. for starling users: pass starling the port with -p flag when starting it. If you don't want to use Starling, then explicitly set Workling::Remote.dispatcher (see README for an example) (Workling::QueueserverNotFoundError) 
```

因此，我尝试更改工作插件中的 config/workling.yml 文件以使生产和开发都在 15151 上侦听，但没有成功，然后我在 22122 上尝试了它们，仍然没有骰子，所以我尝试了随机端口，但无论我在 workling.yml 文件中放什么，它仍然给出完全相同的行为

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-29T17:36:26.930

答案是八哥必须这样开始：

```
RAILS_ENV=production ./script/workling_client start -t 
```

# wpf - 如何在 WPF 中分解出 DataTemplate 的绑定？

> ID：1003745
> 
> 赞同：12
> 
> 时间：2009-06-16T20:20:13.083
> 
> 标签：wpf, xaml, datatemplate

我有一个`DataTemplate`我想重用的。我要考虑的部分是绑定，因为它是唯一改变的东西。我的`DataTemplate`长相大致是这样的。（实际上还有很多，但我已经去掉了无关的东西。）

```
<DataTemplate>
    <TextBox Text="{Binding Name}" />
</DataTemplate> 
```

如何`DataTemplate`在简单地改变我绑定的属性的同时重用它？（请注意，如果它像 a 一样简单`TextBox`，我不会担心，但它`DataTemplate`实际上包含`StackPane`l 和许多其他元素。我想将它集中在一个地方，因此`DataTemplate`.）

我想了两种方法来解决这个问题。

1.  创建一个简单的自定义控件。重用它，不要担心重用`DataTemplate`.
2.  试验某种 DataTemplate 的子类。（有人告诉我这是可能的。）我会向它添加一个依赖属性，让我指定要绑定的属性的名称。

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T22:44:19.283

我讨厌回答自己的问题，但为了完整起见，这是我的解决方案。

```
<ListBox ItemsSource="{Binding}">
  <ListBox.Resources>
    <ControlTemplate x:Key="textBoxControlTemplate" TargetType="ContentControl">
      <TextBox Text="{TemplateBinding Content}" /> 
    </ControlTemplate>
  </ListBox.Resources>
  <ListBox.ItemTemplate>
    <DataTemplate>
      <ContentControl Content="{Binding Name}" Template="{StaticResource textBoxControlTemplate}" />
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

这当然是一个很做作的*例子*。在我自己的应用程序中，我实际上并没有将文本框放在列表框内。在列表框中，这不是很有用，但想象一下它在 DataGrid 中，其中每一列可能以类似的方式显示，但绑定到不同的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T01:01:10.520

创建一个 UserControl 并在 DataTemplate 中使用它。

```
<DataTemplate>
    <local:MyComplexUserControl DataContext="{Binding Name}"/>
</DataTemplate> 
```

并在用户控件中：

```
<StackPanel>
  <TextBlock>Value:</Text>
  <TextBox Text="{Binding}"/>
</StackPanel> 
```

每个场合都有一个单独的 DataTemplate 和它自己的绑定。

# mysql - jdbc 为有效查询返回 mySQL 语法错误异常

> ID：1003748
> 
> 赞同：1
> 
> 时间：2009-06-16T20:20:56.420
> 
> 标签：mysql, jdbc, syntax-error

我使用 java.sql.Statement.excecuteUpdate 方法创建一个表并通过 JDBC 将一些值插入到数据库中。但是，它无缘无故地给了我 MySQL 语法异常。我将相同的代码复制并粘贴到命令提示符中。有效。

我想知道为什么它会这样做？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T20:26:10.200

**猜测**

你不能做这样的查询：插入...; 插入 ... ; **每个方法调用**只有一个查询

# .net - 具有数据库驱动内容的 FTP 服务器？

> ID：1003749
> 
> 赞同：1
> 
> 时间：2009-06-16T20:21:24.390
> 
> 标签：.net, ftp

我们的组织目前有一个外部客户网站，允许客户下载为他们创建的文件。安全性往往会发生一些变化，因此客户看到的文件是基于哪些帐户可以看到哪些文件的数据库。这些文件存储在我们网络的安全端，Web 服务用于从内部文件服务器获取文件，并流式传输到 Web 响应。

挑战在于为客户提供使用 FTP 客户端下载这些文件的能力。有一些 FTP 服务器提供了一种自定义身份验证机制，但到目前为止还没有一个可以提供虚拟/自定义文件列表（大多数虚拟目录只是到其他文件服务器位置的虚拟映射）。

为我们的身份验证和文件数据库创建一个 FTP 接口的想法是不是有点矫枉过正，或者是否有任何产品可以满足我们的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T20:24:54.710

FTP 协议其实很简单。如果您没有找到任何预打包的内容，则推出自己的服务器并不太难：

[http://www.faqs.org/rfcs/rfc959.html](http://www.faqs.org/rfcs/rfc959.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T20:35:48.730

有几个 FTP 服务器库和开源 FTP 服务器。

[Java 中的开源 FTP 服务器](http://cftp.coldcore.com/)，可很好地扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-21T13:19:40.937

我在这里找到了一个用 C# 编写的精心设计的 FTP 服务器：[http ://www.csharphelp.com/archives3/archive524.html](http://www.csharphelp.com/archives3/archive524.html)

# php - 如何使用 Microsoft AD 为内部 PHP 应用程序实施单点登录 (SSO)？

> ID：1003751
> 
> 赞同：30
> 
> 时间：2009-06-16T20:21:44.530
> 
> 标签：php, active-directory, apache2, nginx, single-sign-on

我隐约知道，在加入域的计算机上，可以要求 IE 发送一些额外的标头，我可以使用这些标头自动登录到应用程序。我在带有 mod_php 的 Windows 服务器上运行了 apache。我希望能够避免用户在必要时登录。我发现了一些关于 Kerberos 和 Apache 模块的链接。

[http://www.onlamp.com/pub/a/onlamp/2003/09/11/kerberos.html?page=last](http://www.onlamp.com/pub/a/onlamp/2003/09/11/kerberos.html?page=last) [https://metacpan.org/pod/Apache2::AuthenNTLM](https://metacpan.org/pod/Apache2::AuthenNTLM)

由于我在 Windows 上运行，因此安装 Perl 或 Apache 模块已被证明并非易事。但是 PHP 不是已经可以访问 HTTP 标头了吗？

我发现了这个，但它没有做任何身份验证，它只是表明 PHP 可以读取 NTLM 标头。 [http://siphon9.net/loune/2007/10/simple-lightweight-ntlm-in-php/](http://siphon9.net/loune/2007/10/simple-lightweight-ntlm-in-php/)

我希望能够让我的用户只指向应用程序并让他们自动进行身份验证。有没有人有这方面的经验或让它工作？

**更新** 自从最初发布这个问题以来，我们已经将设置更改为 nginx 和 php-fcgi 仍然在 Windows 上运行。windows 上的 Apache2 和 php-cgi 可能是您可以在 windows 上配置的最慢的设置之一。看起来可能仍然需要 Apache（它适用于 php-fcgi），但我更喜欢 nginx 解决方案。

我也仍然不明白（并且很想接受教育）为什么 HTTP 服务器插件是必要的，我们不能有一个 PHP、Web 服务器不可知的解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-10-15T03:32:22.447

您所需要的只是[`mod_auth_sspi`](http://mod-auth-sspi.sourceforge.net/)Apache 模块。

示例配置：

```
AuthType SSPI
SSPIAuth On
SSPIAuthoritative On
SSPIDomain mydomain

# Set this if you want to allow access with clients that do not support NTLM, or via proxy from outside. Don't forget to require SSL in this case!
SSPIOfferBasic On

# Set this if you have only one domain and don't want the MYDOMAIN\ prefix on each user name
SSPIOmitDomain On

# AD user names are case-insensitive, so use this for normalization if your application's user names are case-sensitive
SSPIUsernameCase Lower
AuthName "Some text to prompt for domain credentials"
Require valid-user 
```

并且不要忘记，您也可以[在 Windows 域中使用 Firefox 进行透明 SSO](http://kb.mozillazine.org/Network.automatic-ntlm-auth.trusted-uris)：只需转到`about:config`，搜索`network.automatic-ntlm-auth.trusted-uris`，然后输入您的内部应用程序的主机名或 FQDN（如 myserver 或 myserver.corp.domain.com）。您可以有多个条目，它是一个逗号分隔的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-12T04:09:01.153

我有一个类似的问题需要为我的组织解决。

我正在研究使用[adLDAP](http://adldap.sourceforge.net)。

该站点上也有一些文档用于实现与 Active Directory 的无缝身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-15T02:51:51.327

我会对使用 OpenID 作为后端（某种）的解决方案感到好奇......当我搜索（快速）时，我没有看到任何可以直接连接到 ActiveDirectory 的东西。但是，通过普通的 HTTP(S) 实现可能非常轻松（您将成为根据本地 AD 检查凭据的 OpenID 提供者）。在最好的情况下，您可能只需向您的应用程序添加几个类并关闭并运行——不需要 Web 服务器模块。这方面的任何一方都有很多开源代码，所以如果没有别的，值得一看。如果您将后端暴露给用户（即给他们 OpenID URL），您将获得额外的好处，即他们不仅可以使用这些凭据登录到您的内部站点。（例如：堆栈溢出。）

顺便说一句，我反对这样做，以便需要 Internet Explorer。我不确定这是否是您编写问题的方式的目标，但根据您的 IT 环境，我希望使用 Firefox 或 Safari（或 Opera 或 ...）的人不太热情。（你不是先用IE开发吧. 您发布的链接表明 NTLM 不仅适用于 IE，但由于我没有任何经验，因此很难判断它的效果如何。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-15T02:14:11.450

您的一种选择是使用 CAS（中央身份验证服务）。

它有 php 客户端库。

如何链接到 MS Active Directory：[http ://www.ja-sig.org/wiki/display/CASUM/Active+Directory](http://www.ja-sig.org/wiki/display/CASUM/Active+Directory)

不过，您将需要 Apache maven 2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-16T19:05:59.003

对于 IIS/PHP FCGI，您需要发送未经授权的标头：

```
function EnableAuthentication()
{
    $realm = "yoursite";
    header('WWW-Authenticate: Digest realm="'.$realm.'",qop="auth",nonce="'.uniqid().'",opaque="'.md5($realm).'"');
    header("HTTP/1.1 401 Unauthorized"); 
    exit;
} 
```

然后，您可以通过以下方式获取用户名：

```
$winuser = $_SERVER["REMOTE_USER"]; 
```

然后我确保 $winuser 在我的允许用户数据库中。

请务必在非特权帐户下进行测试。当我第一次安装它时，我对其进行了测试，它运行良好，但后来当一个标准的非服务器管理员用户尝试它时，它失败了。事实证明，一些临时目录需要更改来宾用户的权限。我不记得确切的设置。

# c# - C# DBML 和 SQL Server

> ID：1003759
> 
> 赞同：1
> 
> 时间：2009-06-16T20:24:07.333
> 
> 标签：c#, .net, linq-to-sql

我的开发机器上有 SQL Server 2005，这就是我制作 DBML 文件并在其中定义表然后制作 WCF 服务的方式。当我去托管 WCF 服务时，服务器有 SQL Server 2000，它发现连接字符串很好，但不是我指向的表。有没有办法通过 web.config 文件告诉我在运行时使用的是哪个 SQL Server？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T20:27:16.610

当然，这就是连接字符串的用途，您确定您在服务器上拥有正确的权限吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T20:28:53.627

服务器和数据库的名称应该在连接字符串中（在配置文件中）；它目前看起来像什么？确切的错误信息是什么。

确切的连接字符串取决于您的设置（例如，服务器是“命名实例”吗？）。

我能想到的另一件事......是正确模式中的对象吗？即它们在您的机器上是“daniel.sometable”，但在服务器上是“dbo.sometable”？这很重要，因为 dbml 包含模式。幸运的是，您可以编辑 dbml（它只是 xml）并使用“全部替换”（即 ctrl+h）来解决此问题...

# c# - 清除 ASPX 页面中的 asp.net 数据网格

> ID：1003762
> 
> 赞同：0
> 
> 时间：2009-06-16T20:24:40.967
> 
> 标签：c#, asp.net, datagrid, dynamics-crm, dynamics-crm-4

我有一个自定义 ASPX 搜索页面，用于我正在研究的 CRM 4.0 解决方案。我希望能够清除搜索页面上的 asp.net 数据网格。现在，如果一个人进行搜索，它会在数据网格中返回结果，但如果他们进行另一次搜索并且新搜索没有结果，则旧搜索结果仍在数据网格中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T20:35:48.263

不确定您是如何实现搜索的。但我认为您只需确保将网格绑定到搜索结果（在这两种情况下）。

例如，如果搜索返回一个空结果（list/datareader/dataset），只需将网格绑定到它，它不应该显示任何记录：

```
grid.DataSource = GetSearchResults(); // may return an empty search result
grid.Databind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T20:37:10.100

您应该在每次回发时重新绑定数据网格。`EmptyDataText`当查询没有搜索结果时，还使用要显示的文本 设置属性。

# sql-server - 历史记录中显示的维护计划持续时间

> ID：1003767
> 
> 赞同：1
> 
> 时间：2009-06-16T20:25:45.910
> 
> 标签：sql-server, sql-server-agent, maintenance-plan

这是我们的 sql 2005 维护计划历史的导出

```
Date,Source,Severity,Plan Name,SubPlan Name,Task Name,Duration
06/07/2009 05:08:29,,Unknown,Weekly optimisation,Subplan_1,,05:08:25
06/07/2009 05:07:41,,Unknown,,,Shrink Database Task (localhost),00:00:48
06/07/2009 04:50:40,,Unknown,,,Rebuild Index Task (localhost),00:16:41
06/07/2009 00:00:37,,Unknown,,,Purge DataStoreException (localhost),00:01:08
06/07/2009 00:00:37,,Unknown,,,Truncate HelpDeskMonitoring (localhost),00:00:07
06/07/2009 00:00:37,,Unknown,,,Execute SQL Server Agent Job Task (localhost),00:00:00
06/07/2009 00:00:05,,Unknown,,,Back Up Database Task (localhost),00:00:32 
```

为什么每个步骤的持续时间很快，但整体维护却花了 5 小时？我怎样才能找到哪个任务花费了这么多时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T00:20:55.437

查看开始时间，您将看到 Purge DataStoreException Started at :37 并且下一步开始于 5:07。

这不是标准的 SQL 维护任务，而是您插入的自定义内容，对吗？

它在做什么？

# thumbnails - 如何为共享链接创建缩略图

> ID：1003769
> 
> 赞同：0
> 
> 时间：2009-06-16T20:26:00.980
> 
> 标签：thumbnails

当我尝试在共享功能上链接我的网站时，没有显示缩略图。我需要做什么才能让 Facebook 生成这些缩略图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T22:09:32.003

您的缩略图必须至少为 50x50 像素，并且您必须在您网站的 HTML 中使用特殊的元标记来指定它。

```
<meta property="og:image" content="http://yersite.com/yerimage.png"/> 
```

# c# - 在代码中设置边距属性

> ID：1003772
> 
> 赞同：86
> 
> 时间：2009-06-16T20:26:31.603
> 
> 标签：c#, wpf, margin

```
MyControl.Margin.Left = 10; 
```

错误：

> 无法修改“System.Windows.FrameworkElement.Margin”的返回值，因为它不是变量

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2009-06-16T20:33:40.607

问题是它[`Margin`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.margin.aspx)是一个属性，它的类型 ( [`Thickness`](http://msdn.microsoft.com/en-us/library/system.windows.thickness.aspx)) 是一个值类型。这意味着当您访问该属性时，您将获得该值的*副本*。

即使您*可以*更改[`Thickness.Left`](http://msdn.microsoft.com/en-us/library/system.windows.thickness.left.aspx)特定值的属性值（grr... 可变值类型不应该存在），它也不会更改边距。

相反，您需要将该`Margin`属性设置为新值。例如（巧合的是，与 Marc 写的代码相同）：

```
Thickness margin = MyControl.Margin;
margin.Left = 10;
MyControl.Margin = margin; 
```

作为库设计的一个说明，如果它`Thickness`是不可变的，我会非常喜欢它，但它的方法返回一个新值，该值是原始值的副本，但有一部分被替换。然后你可以写：

```
MyControl.Margin = MyControl.Margin.WithLeft(10); 
```

不用担心可变值类型的奇怪行为，美观且可读，所有一个表达式......

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2009-06-16T20:32:21.467

该`Margin`属性返回一个`Thickness`结构，该结构`Left`是一个属性。该语句所做的是从属性中复制结构值并在副本上`Margin`设置属性值。`Left`您会收到一个错误，因为您设置的值不会被存储回`Margin`属性中。

（早期版本的 C# 只会让你在没有抱怨的情况下做到这一点，这在新闻组和论坛中引起了很多关于为什么这样的声明根本没有效果的问题......）

要设置属性，您需要`Thickness`从属性中获取结构`Margin`，设置值并将其存储回来：

```
Thickness m = MyControl.Margin;
m.Left = 10;
MyControl.Margin = m; 
```

如果要设置所有边距，只需创建一个`Thickness`结构并一次设置它们：

```
MyControl.Margin = new Thickness(10, 10, 10, 10); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-06-16T20:30:20.380

`Margin`正在返回一个结构，这意味着您正在编辑一个**副本**。您将需要类似的东西：

```
var margin = MyControl.Margin;
margin.Left = 10;
MyControl.Margin = margin; 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-04-22T08:41:59.830

可以简单地使用这个

```
MyControl.Margin = new System.Windows.Thickness(10, 0, 5, 0); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-06-16T20:29:34.017

有人会猜测（我的 WPF 现在有点生疏） Margin 接受一个对象并且不能直接更改。

例如

```
MyControl.Margin = new Margin(10,0,0,0); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-25T13:27:01.133

要使用`Thickness`，您需要创建/更改您的项目`.NET framework`平台版本为 4.5。因为此方法仅在 4.5 版本中可用。（您也可以只下载 PresentationFramework.dll 并参考此 dll，而无需创建/更改您的`.NET framework`版本为 4.5。）

但是，如果您想简单地做到这一点，则可以使用以下代码：

```
MyControl.Margin = new Padding(int left, int top, int right, int bottom); 
```

还

```
MyControl.Margin = new Padding(int all); 
```

这很简单，不需要对您的项目进行任何更改

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-10-06T08:03:47.423

视情况而定，您也可以尝试在此处使用填充属性...

```
MyControl.Margin=new Padding(0,0,0,0); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-06-07T08:43:24.560

边距 = 新厚度 (0, 0, 0, 0);

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-03T09:39:57.230

有点不清楚你在问什么，但为了让事情舒服，你可以继承你自己的 Control 并使用 Marc 建议的代码添加一个属性：

```
class MyImage : Image {
    private Thickness thickness;
    public double MarginLeft {
        get { return Margin.Left; }
        set { thickness = Margin; thickness.Left = value; Margin = thickness; }
    }
} 
```

然后在客户端代码中你可以只写

```
MyImage img = new MyImage();
img.MarginLeft = 10;
MessageBox.Show(img.Margin.Left.ToString()); // or img.MarginLeft 
```

# asp.net - ASP.NET/IIS：Windows 身份验证、设置最大尝试次数和重定向

> ID：1003777
> 
> 赞同：2
> 
> 时间：2009-06-16T20:27:11.273
> 
> 标签：asp.net, iis, authentication, active-directory

我们有一个在 IIS6 上运行的内部 Web 应用程序，我们使用集成的 Windows 身份验证让域用户登录到该应用程序，然后才能使用它。

如果用户 3 次登录域失败，我们想要做的是将用户重定向到错误页面。

我应该在哪里配置这个？我的第一个想法是在 IIS 中，但我在配置中看不到任何与我想要做的事情相关的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-19T13:58:34.040

用户如何进行身份验证？如果他们使用 IE，则域身份验证应该是自动的（即，如果 Web 服务器位于 Intranet 区域中，则服务器对浏览器进行 NTLM 质询，由 IE 自动处理）。在这种情况下，如果用户是域的成员，就不可能登录失败。

如果您使用登录表单，然后验证域控制器的凭据，那么您可以实施自定义解决方案，计算无效登录并执行 Response.Redirect 到错误页面。

如果不了解更多关于设置的信息，很难更全面地回答......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T13:38:36.670

Personally, I'd make this database driven. assuming the user enters the username credentials correctly but fails to enter the correct password. When they do login correctly, set their FailLoginCount to 0, and eachtime they fail, increase it by one.

Once it reaches 3, redirect them to your desired page and possible "lock" their account.

HTH

# php - Joomla Readmore 文章链接

> ID：1003809
> 
> 赞同：0
> 
> 时间：2009-06-16T20:34:11.057
> 
> 标签：php, joomla, joomla1.5

我正在创建一个自定义模板。在首页我想显示一篇文章和一个阅读链接。

该文章称为“第 1 条”，位于“测试”类别“猫”中。它的访问级别是公开的。

我如何在首页显示文章的前 100 个单词及其标题，并在其下方有一个指向完整文章的阅读链接。我尝试使用 mod_newsflash 但它只是不显示 readmore 链接。

我正在使用 Joomla 1.5。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-19T17:05:05.870

我在几个站点上使用相同的 mod_newsflash 并且到目前为止没有任何问题。在“模块 - 编辑 -> 参数”下激活“阅读更多...链接”选项以“显示”是非常重要的。另一件事是您的文章必须在您想要的位置上恰好有一个“阅读更多...”。你在哪里找到这个“阅读更多......”的东西？只需转到您的文章，对其进行编辑，然后在“图像”旁边，“分页符”应该是此按钮。如果你真的希望它总是在 100 个单词或特定数量的字符之后完全中断，我认为你需要自己想出一些东西。例如：只取整篇文章，使用 strip_tags() 获取纯文本，然后拆分(" ", $input, 100)/implode(" ", $input) 文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-13T20:54:57.350

有一个名为 auto readmore 的扩展，它完全可以满足您的需要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T10:09:38.137

好吧，它也让我很困扰，但解决方案一直在我的鼻子上。在菜单项选项中，您只需将“显示介绍文本”设置为“显示”即可显示整篇文章。就这样。如果您将其设置为“隐藏”，则单击阅读更多将仅显示文章的其余部分。

# java - Servlet spring-servlet 不可用（Spring+BlazeDS 集成）

> ID：1003823
> 
> 赞同：1
> 
> 时间：2009-06-16T20:36:51.160
> 
> 标签：java, apache-flex, spring, blazeds

我正在尝试通过处理 James Ward 在 refcards.dzone.com 上发布的 refcard 来使用 Spring + BlazeDS 集成来设置 Flex 项目。

一些问题/挑战正在突出。Tomcat 部署进展顺利，所有文件都在服务器上，我可以通过浏览器调用 main.swf。

尝试向 Spring/BlazeDS 发出 AMF 请求时出现以下 ActionScript 异常：

> RPC 故障 faultString="发送失败" faultCode="Client.Error.MessageSend" faultDetail="Channel.Connect.Failed 错误 NetConnection.Call.Failed: HTTP: Failed: url: ' [http://localhost:8080/blazeds/spring /消息代理/amf](http://localhost:8080/blazeds/spring/messagebroker/amf) '"

直接在浏览器中放置“Failed: url:” URL 时，Tomcat 会显示以下错误消息：

> HTTP 状态 404 - Servlet Spring MVC Dispatcher Servlet 不可用

我已经设置了 James Ward 在他的 refcard 上指示的所有文件，application-config.xml、web.xml 和 services-config.xml 都按我所见的顺序排列。

关于我搞砸了什么的任何想法？

PS：我注意到 James 的 refcard 和集成的稳定版本方面的小变化。在 M2 发布之后有什么改变可能会在背后咬我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-07-25T17:58:55.453

我有同样的问题，我通过从 flex-spring 集成的 test-drive-sample 添加 backport-util-concurrent.jar 和 cfgatewayadapter.jar 来解决它，谢谢 josamoto 的帖子，最后集成效果很好。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T20:45:03.687

如果您遵循参考卡，您的 URL 将是[http://localhost:8080/dzone-server/spring/messagebroker/amf](http://localhost:8080/dzone-server/spring/messagebroker/amf)。参考卡中的上下文根是 dzone-server。

关键步骤是确保上面的 URL 与 services-config.xml 中定义的端点 url 匹配。因此，上述 URL 的匹配端点将是：

```
<endpoint url="http://{server.name}:{server.port}/{context.root}/spring/messagebroker/amf" class="flex.messaging.endpoints.AMFEndpoint"/> 
```

注意：这几乎是通过在 Flex Builder 中创建新的 flex 项目添加的默认设置，但它已将**spring**添加到端点 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T22:14:02.977

我要回答我自己的问题，这一切都归结为我是个假人。那里有一些我没有包含在我的 WEB-INF/lib 文件夹中的 .jar。我从 blazeds+spring 集成测试驱动器中复制了它们，这解决了我的问题！

# java - 在网站中显示网站？

> ID：1003831
> 
> 赞同：0
> 
> 时间：2009-06-16T20:39:15.150
> 
> 标签：java, php, html, proxy

我需要做的是：

```
<iframe src="http://www.google.com" width="800" height="600"></iframe> 
```

但限制是，我希望我的网站获取请求的网站并将其显示在框架中。也就是说，客户端浏览器必须只与我的 Web 服务器有连接。反过来，我的网站将获取请求的 url 并将它们显示给客户端。

我认为我可以做到这一点的唯一方法可能是将 url 传递给应用程序，该应用程序依次下载页面，然后将客户端浏览器重定向到页面（现在本地存储在我的 Web 服务器上）。然而，问题是这只适用于相当无聊和静态的网站，我要求网站中的网站确实可以正常运行，即流媒体视频、安全连接......

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T20:57:02.383

我不想把它告诉你，但我认为没有万无一失的方法可以做到这一点。你要做的是做一个代理，有几种方法可以做到，但无论哪种方式，你都无法考虑 Flash 和 JavaScript 之类的东西。我在学校使用了很多不同的代理来绕过过滤器，但没有一个是 100% 有效的。事实上，我认为没有一个人能够在 PureVolume 或 MySpace 上加载音乐播放器。

如果您仍然想尝试一下，请阅读这篇文章：[使用 Apache 作为代理服务器](http://www.devshed.com/c/a/Administration/Using-Apache-As-A-Proxy-Server/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T21:04:54.553

如果您的要求之一是

> ... 安全连接

这根本不可能。根据定义，安全的端到端连接不能通过代理（参见[Man-in-the-middle](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T21:17:01.283

我找到了一个解决方案，谁曾经提到过它，然后删除了他们的答案，谢谢。

使用反向代理可以做到这一点，[http://docsrv.sco.com/INT_Proxy/revpxy.htm](http://docsrv.sco.com/INT_Proxy/revpxy.htm)显示了可以使用反向代理的一些方法。

Paramesh Gunasekaran 使用提供的代码编写了有关创建自己的反向代理的教程。 [http://www.codeproject.com/KB/IP/r​​everseproxy.aspx](http://www.codeproject.com/KB/IP/reverseproxy.aspx)

# internet-explorer - 在没有工具栏的新进程中启动 Internet Explorer 7

> ID：1003836
> 
> 赞同：1
> 
> 时间：2009-06-16T20:40:54.413
> 
> 标签：internet-explorer, vbscript

我需要在 IE 中运行一个 Web 应用程序，所以它至少看起来类似于一个独立的应用程序。我还需要能够在单独的会话中同时运行此 Web 应用程序的多个实例。

为了实现这种外观，我希望始终在没有工具栏/状态栏的新进程中从桌面上的快捷方式启动 Internet Explorer 7。

我已经尝试了几件事。到目前为止，我来到它的壁橱正在创建以下 vb 脚本的快捷方式，

```
Set objExplorer = CreateObject("InternetExplorer.Application")
objExplorer.Navigate "http://stackoverflow.com"
objExplorer.ToolBar = 0
objExplorer.StatusBar = 0
objExplorer.Width = 1024
objExplorer.Height = 768
objExplorer.Left = 0
objExplorer.Top = 0
objExplorer.Visible = 1 
```

这看起来和我想要的完全一样。但是，如果您再次双击该快捷方式，它会打开一个新窗口，但在同一进程中（即 Windows 任务管理器中只有一个 iexplore.exe 进程）。由于这两个实例在同一个进程中，它们共享同一个会话。因此，如果您登录到应用程序的一个实例，那么您将登录到应用程序的另一个实例，这对我没有好处。

我也试过，

```
"Program Files\Internet Explorer\iexplore.exe" http://stackoverflow.com 
```

它总是启动一个新进程，但你不能只删除工具栏/状态栏。Kiosk 模式（“-k”参数）对我没有好处，因为我需要它出现在窗口中。

谁能告诉如何始终在没有工具栏/状态栏的新进程中从桌面快捷方式启动 Internet Explorer 7？

我对解决方案的任何技术持开放态度。

谢谢，埃弗里特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T20:48:10.780

您可以使用 HTML 应用程序，例如：

```
<html>
<head>
<title>Stack Overflow</title>
<hta:application showintaskbar="yes" singleinstance="no" sysmenu="yes" scroll="no"
icon="http://www.stackoverflow.com/favicon.ico">
<style type="text/css">
* { margin: 0px; padding: 0px; }
iframe { position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; }
</style>
</head>
<body>
<IFRAME SRC="http://www.stackoverflow.com/" APPLICATION="no">
</body>
</html> 
```

但是，如果没有针对 HTA 的特殊预防措施，这往往会弄乱其中任何页面的 JS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T21:07:16.077

您可以通过操作 IE COM 服务器来做到这一点。在 powershell 中很容易做到：

```
$ie = new-object -COM InternetExplorer.Application
$ie.ToolBar = $false
$ie.StatusBar = $false
$ie.Navigate2( "http://www.stackoverflow.com" )
$ie.Visible = $true 
```

如果它在 ie-app.ps1 中，那么您的快捷方式将使用“powershell -command ie-app.ps1”来调用它。

这与您在 vbscript 中使用 Windows Scripting Host 所做的基本相同。您可以使用任何可以操纵 InternetExplorer.Application COM 对象的东西。我有 IE8，它可能只是 IE7 和 IE8 之间的区别，但在我的 powershell 示例中，我得到了两个进程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T01:15:11.683

其他答案都没有为我解决，所以这是我从各种来源拼凑而成的 vb 脚本（我不是 vb 脚本编写者）。

```
On Error Resume Next

AppURL = "http://www.stackoverflow.com"
AppToRun = "iexplore about:blank"
AboutBlankTitle = "Blank Page"
LoadingMessage = "Loading stackoverflow..."
ErrorMessage = "An error occurred while loading stackoverflow.  Please close the Internet Explorer with Blank Page and try again.  If the problem continues please contact IT."
EmptyTitle = ""

'Launch Internet Explorer in a separate process as a minimized window so we don't see the toolbars disappearing
dim WshShell
set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.Run AppToRun, 6

dim objShell
dim objShellWindows

set objShell = CreateObject("Shell.Application")
set objShellWindows = objShell.Windows

dim ieStarted
ieStarted = false

dim ieError
ieError = false

dim seconds
seconds = 0

while (not ieStarted) and (not ieError) and (seconds < 30)

    if (not objShellWindows is nothing) then
        dim objIE
        dim IE

        'For each IE object
        for each objIE in objShellWindows

            if (not objIE is nothing) then

                if isObject(objIE.Document) then
                    set IE = objIE.Document

                    'For each IE object that isn't an activex control
                    if VarType(IE) = 8 then

                        if IE.title = EmptyTitle then
                            if Err.Number = 0 then
                                IE.Write LoadingMessage

                                objIE.ToolBar = 0
                                objIE.StatusBar = 1
                                objIE.Navigate2 AppURL

                                ieStarted = true
                            else
                                'To see the full error comment out On Error Resume Next on line 1
                                MsgBox ErrorMessage
                                Err.Clear

                                ieError = true

                                Exit For
                            end if
                        end if
                    end if
                end if
            end if

            set IE = nothing
            set objIE = nothing
        Next
    end if

    WScript.sleep 1000
    seconds = seconds + 1
wend

set objShellWindows = nothing
set objShell = nothing

'Activate the IE window and restore it
success = WshShell.AppActivate(AboutBlankTitle)

if success then 
    WshShell.sendkeys "% r"  'restore 
end if 
```

我愿意接受任何改进或建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T21:09:48.460

您没有指定您希望使用什么编码机制来完成此操作，但您无疑会希望查看[WebBrowser Class](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)。

# c# - WPF ListBox 未使用 ItemsSource 更新

> ID：1003838
> 
> 赞同：9
> 
> 时间：2009-06-16T20:41:42.180
> 
> 标签：c#, .net, wpf, data-binding, listbox

我认为在 WPF 设置中应该是简单的双向数据绑定，但是列表框（目标）不会随着集合的变化而更新。

我正在以编程方式设置 ListBox 的 ItemsSource：

```
lstVariable_Selected.ItemsSource = m_VariableList; 
```

ListBox 声明如下：

```
<ListBox Margin="5" Name="lstVariable_Selected">
    <ListBox.ItemsPanel>
       <ItemsPanelTemplate>
          <VirtualizingStackPanel Orientation="Horizontal"/>
       </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemTemplate>
       <DataTemplate>
            <Border BorderBrush="Gray" BorderThickness="1" Margin="0">
                <TextBlock FontSize="25" Text="{Binding Path=Name}" />
            </Border>
       </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

当我最初设置 ItemsSource 时，ListBox（当时不可见）设置了它的项目。但是，如果我查看 ListBox，更新似乎会停止。

然后我可以从 m_VariableList 集合中删除一个项目，并且它不会从 ListBox 中消失。同样，如果我添加一个，它不会出现。

是什么赋予了？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-06-16T20:57:06.503

您的 m_VariableList 是否实施[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)？如果它不是 ObservableCollection，那么对其内容的更改将不会自动反映在 UI 中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-17T01:57:21.060

问题不在您提供的 XAML 中。我在测试应用程序中成功使用了相同的 XAML；但是，我能够通过重新实例化 m_VariableList 变量来复制您遇到的问题。

当 m_VariableList 被赋予一个新实例或指向一个新对象时，它不会反映在 ListBox 中，因为控件有自己对数据的引用。这可能不是您的问题的原因，但我建议您查看您的代码隐藏以确保该变量不会被重新实例化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-13T20:29:00.067

我被困了一个多小时，然后简单的逻辑解决了这个问题，只需将 itemsource 设置为清除列表，然后再次设置你需要的源

```
lstVariable_Selected.ItemsSource = new List<Object>();
lstVariable_Selected.ItemsSource = m_VariableList; 
```

# java - 如何在大型 Java 代码库中找到所有幼稚（基于“+”）的字符串连接？

> ID：1003839
> 
> 赞同：6
> 
> 时间：2009-06-16T20:41:51.433
> 
> 标签：java, optimization, string

我们有一个庞大的代码库，我们怀疑代码中有很多基于“+”的字符串连接可能会从使用 StringBuilder/StringBuffer 中受益。是否有有效的方法或现有的工具来搜索这些，尤其是在 Eclipse 中？

用“+”搜索不是一个好主意，因为代码中有很多数学，所以这需要实际分析代码和类型，以确定哪些添加涉及字符串。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-16T20:46:03.920

我很确定[FindBugs](http://findbugs.sourceforge.net/)可以检测到这些。如果没有，它仍然非常有用。

编辑：它确实可以[在循环中找到串联](http://findbugs.sourceforge.net/bugDescriptions.html#SBSC_USE_STRINGBUFFER_CONCATENATION)，这是它真正发挥作用的唯一一次。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-06-16T20:55:42.073

只要确保您真正了解在哪里使用它*实际上*更好`StringBuilder`。我并不是说你*不*知道，但肯定有很多人会采用这样的代码：

```
String foo = "Your age is: " + getAge(); 
```

并将其变成：

```
StringBuilder builder = new StringBuilder("Your age is: ");
builder.append(getAge());
String foo = builder.toString(); 
```

这只是同一事物的可读性较差的版本。通常，幼稚的解决方案是*最好*的解决方案。同样有些人担心：

```
String x = "long line" + 
    "another long line"; 
```

实际上，该连接是在编译时执行的。

正如 nsander 所说的那样，首先找出您是否有问题...

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-06-16T20:46:15.447

为什么不使用分析器来查找真正重要的“朴素”字符串连接？仅在您确实需要时才切换到更详细的 StringBuffer 。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-23T05:36:12.453

很有可能您的[性能会变得更差，代码的可读性](http://www.theeggeadventure.com/wikimedia/index.php/String_Concatenation_optimization)也会降低。编译器已经进行了这种优化，除非您处于循环中，否则它通常会做得更好。此外，在 JDK 8 中，它们可能会出现 StringUberBuilder，并且所有使用 StringBuilder 的代码都会运行得更慢，而“+”连接的字符串将受益于新类。

> “我们应该忘记小的效率，比如大约 97% 的时间：过早优化是万恶之源。然而，我们不应该放弃那关键的 3% 的机会。” ——唐纳德·克努斯

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-16T20:46:26.040

IntelliJ 可以使用“结构搜索”找到这些。您搜索“$a + $b”并将 $a 和 $b 的特征设置为 java.lang.String 类型。

然而，如果你有 IntelliJ，它可能有一个内置的检查功能，可以更好地找到你想要的东西。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-16T21:00:05.920

我建议使用分析器。这确实是一个性能问题，如果您不能使代码显示为合理的测试数据，那么更改它不太可能有任何价值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-16T21:09:50.080

Jon Skeet（一如既往）和其他人已经说了所有需要的东西，但我真的想强调一下，也许你正在寻找一种不存在的性能改进......

看看这段代码：

```
public class StringBuilding {
  public static void main(String args[]) {
    String a = "The first part";
    String b = "The second part";
    String res = a+b;

    System.gc(); // Inserted to make it easier to see "before" and "after" below

    res = new StringBuilder().append(a).append(b).toString();
  }
} 
```

如果你编译它并用javap反汇编它，这就是你得到的。

```
public static void main(java.lang.String[]);
  Code:
   0:   ldc     #2; //String The first part
   2:   astore_1
   3:   ldc     #3; //String The second part
   5:   astore_2
   6:   new     #4; //class java/lang/StringBuilder
   9:   dup
   10:  invokespecial   #5; //Method java/lang/StringBuilder."<init>":()V
   13:  aload_1
   14:  invokevirtual   #6; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   17:  aload_2
   18:  invokevirtual   #6; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   21:  invokevirtual   #7; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;
   24:  astore_3
   25:  invokestatic    #8; //Method java/lang/System.gc:()V
   28:  new     #4; //class java/lang/StringBuilder
   31:  dup
   32:  invokespecial   #5; //Method java/lang/StringBuilder."<init>":()V
   35:  aload_1
   36:  invokevirtual   #6; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   39:  aload_2
   40:  invokevirtual   #6; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   43:  invokevirtual   #7; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;
   46:  astore_3
   47:  return 
```

如您所见，6-21 与 28-43 几乎相同。没有太多的优化，对吧？

编辑：虽然循环问题是有效的......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-16T20:50:00.307

而不是只搜索**+**搜索**“+**和**+”** ，这些可能会找到绝大多数。连接多个变量的情况会更加困难。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-16T21:27:44.553

如果你有一个庞大的代码库，你可能有很多热点，可能涉及也可能不涉及“+”连接。只需运行您常用的分析器，然后修复大的，不管它们是什么类型的构造。

仅修复一类（潜在）瓶颈而不是修复实际瓶颈将是一种奇怪的方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-16T20:46:54.590

使用 PMD，您可以使用 XPath 或使用 Java 语法编写规则。可能值得研究它是否可以匹配字符串连接运算符——它当然似乎在静态分析的范围内。这是一个模糊的想法，我要制作这个“社区维基”；如果其他人想详细说明（或按照这些思路创建自己的答案），请执行！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-16T21:02:45.073

忘记它 - 你的 JVM 很可能已经这样做了 - 请参阅[JLS，15.18.1.2 字符串连接优化](http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.18.1.2)：

> 实现可以选择在一个步骤中执行转换和连接，以避免创建然后丢弃中间 String 对象。为了提高重复字符串连接的性能，Java 编译器可以使用 StringBuffer 类或类似技术来减少通过评估表达式创建的中间字符串对象的数量。

# turtle-graphics - 如何移动 LOGO 中的乌龟？

> ID：1003841
> 
> 赞同：209
> 
> 时间：2009-06-16T20:42:06.190
> 
> 标签：turtle-graphics, logo-lang

如何移动[LOGO](http://en.wikipedia.org/wiki/Logo_(programming_language))中的[乌龟](http://en.wikipedia.org/wiki/Turtle_graphics)？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2009-06-16T20:46:38.753

```
// MOVE FORWARD
FD 75
// TURN RIGHT
RT 54
// TURN LEFT
LT 21
// MOVE BACKWARD
BK 17 
```

查看[此处](http://gaza.freehosting.net/logo/index.html)找到的其他一些海龟命令...

* * *

# 海龟命令

*   `BACK ## [BK]`- 将乌龟移回
*   `BACKGROUND ## [BG]`- 设置背景颜色（0-15）

    *   0 - 黑色
    *   1 - 白色
    *   2 - 红色
    *   3 - 青色
    *   4 - 紫色
    *   5 - 绿色
    *   6 - 蓝色
    *   7 - 黄色
    *   8 - 橙色
    *   9 - 棕色
    *   10 - 浅红色
    *   11 - 灰色 1
    *   12 - 灰色 2
    *   13 - 浅绿色
    *   14 - 浅蓝色
    *   15 - 灰色 3
*   `CLEARSCREEN [CS]`- 在不移动乌龟的情况下清除屏幕

*   `DRAW`- 清除屏幕并将乌龟带回家
*   `EACH`- 告诉几个在列表中编号的精灵接受第二个列表中的命令，例如`EACH [1 2] [SQUARE 10]`
*   `FORWARD ## [FD]`- 向前移动乌龟
*   `FULLSCREEN`- 全图形屏幕（与按 F5 相同）
*   `HEADING`- 将海龟航向输出为数字（0-359）
*   `HIDETURTLE [HT]`- 让乌龟隐形
*   `HOME`- 将海龟移动到屏幕中心向上
*   `LEFT [LT]`- 向左转乌龟
*   `NODRAW [ND]`- 进入清晰屏幕的文本模式
*   `NOWRAP`- 防止图纸环绕屏幕
*   `PENCOLOR [PC]`- 改变笔的颜色
*   `PENDOWN [PD]`- 龟叶踪迹
*   `PENUP [PU]`- 海龟不再留下踪迹
*   `RIGHT ## [RT]`- 向右转乌龟
*   `SETHEADING [SETH]`- 设置海龟航向，例如`SETH 180`
*   `SETSHAPE`- 设置当前精灵形状（0-7）
*   `SETX`将海龟移动到指定的 x 坐标，例如`SETX 50`
*   `SETXY`将海龟移动到指定的 x，y 坐标例如。`SETXY 50 50`
*   `SETY`将海龟移动到指定的 y 坐标，例如`SETY 50`
*   `SHAPE`- 当前精灵形状的输出数量
*   `SHOWTURTLE [ST]`- 使乌龟可见
*   `SPLITSCREEN`- 混合图形和文本屏幕（与按 F3 相同）
*   `STAMPCHAR`- 让海龟在当前位置标记一个字符，例如`STAMPCHAR "A`
*   `TELL`- 告诉指定的精灵接收命令，例如`TELL 2`
*   `TEXTSCREEN`- 使用全屏显示文本（与按相同`F1`）
*   `TOWARDS`- 输出海龟朝向 X、Y 坐标的方向，例如`TOWARDS 0 0`
*   `WRAP`- 使海龟图画环绕屏幕
*   `XCOR`- 输出电流 x 乌龟坐标
*   `YCOR`- 输出海龟的当前y坐标
*   `ASPECT`- 设置垂直屏幕比例因子，默认为 0.76

* * *

*样本直接取自网站： http: [//gaza.freehosting.net/logo/index.html](http://gaza.freehosting.net/logo/index.html)*

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2009-06-16T20:43:37.590

Logo 是**关于**移动海龟的……你给它这样的[命令](http://en.wikipedia.org/wiki/Logo_(programming_language)#Syntax)：

```
Forward 100
Right 45 
```

您也可以执行重复命令之类的操作：

```
Repeat 8 [Forward 100 Right 45]  ; Draw an octagon 
```

（我赢了什么？8-）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-06-16T20:45:47.197

哇！它还在吗？

```
fd 300 // Forward
rt 90  // Right 90°
fd 300 
lt 90  // Left 90° 
```

这曾经奏效。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-19T10:57:14.407

我见过一些 LOGO 实现，您可以在其中使用本地化命令，例如：

*   纳普佐德（前锋），
*   勒沃（左），
*   普拉沃（右）

甚至是 NAPRZÓD（带有波兰字母 Ó）。

LOGO 是一种很好的语言，可以用他们的母语教孩子们编程。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-06-16T20:46:45.087

尝试：（`bk`后退），`fd`（前进），`ld`（左转度数），`rt`（右转）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-06-27T10:46:21.757

通过以正确的语法发出命令。例如：

```
forward 100 
```

移动海龟只有一个必要的命令。它是`forward`具有助记符的`fd`。当使用机器人（真实）乌龟而不是基于图形的（虚拟）乌龟时，您可能会发现转动命令`left`和`right`[ `lt`& `rt`] 会意外地稍微移动乌龟。

大多数[实现](http://www.dmoz.org/Computers/Programming/Languages/Lisp/Logo/Implementations/)还允许使用命令`backwards`[ `bk`]。

当海龟移动时，它可能会在移动时画一条线，这取决于当时笔是向上还是向下，以及当前笔的颜色是否与背景颜色不同。

基于图形的（虚拟）乌龟也可以用`setx`, `sety`, 和`setxy`

# python - 如何从当前脚本上方的目录中导入模块

> ID：1003843
> 
> 赞同：10
> 
> 时间：2009-06-16T20:42:51.990
> 
> 标签：python, import, gchart

对于我的 Python 应用程序，我有以下目录结构：

```
\myapp
\myapp\utils\
\myapp\utils\GChartWrapper\
\myapp\model\
\myapp\view\
\myapp\controller\ 
```

我在 \myapp\view\ 中的一个类必须导入一个名为[GChartWrapper](http://code.google.com/p/google-chartwrapper/)的类。但是，我收到导入错误...

```
myview.py
from myapp.utils.GChartWrapper import * 
```

这是错误：

```
<type 'exceptions.ImportError'>: No module named GChartWrapper.GChart
      args = ('No module named GChartWrapper.GChart',)
      message = 'No module named GChartWrapper.GChart' 
```

我究竟做错了什么？我真的很难在 Python 中导入模块/类...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T21:01:55.930

GChartWrapper 包的[`__init__.py`文件](http://code.google.com/p/google-chartwrapper/source/browse/trunk/GChartWrapper/__init__.py)需要 PYTHONPATH 上的 GChartWrapper 包。您可以通过第一行来判断：

```
from GChartWrapper.GChart import * 
```

是否有必要在您的包目录结构中包含 GChartWrapper 包？如果是这样，那么您可以做的一件事是在运行时将包所在的路径添加到 sys.path。我认为它`myview.py`在`myapp\view`目录中？然后您可以在导入之前执行此操作`GChartWrapper`：

```
import sys
import os
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..', 'utils'))) 
```

如果没有必要将它放在您的目录结构中，则将其安装在常规位置可能会更容易。您可以通过运行包含在 GChartWrapper 源代码分发中的 setup.py 脚本来做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T21:15:02.100

您不会从任意路径导入模块和包。相反，在 python 中，您使用包和绝对导入。这将避免所有未来的问题。

例子：

创建以下文件：

```
MyApp\myapp\__init__.py
MyApp\myapp\utils\__init__.py
MyApp\myapp\utils\charts.py
MyApp\myapp\model\__init__.py
MyApp\myapp\view\__init__.py
MyApp\myapp\controller\__init__.py
MyApp\run.py
MyApp\setup.py
MyApp\README 
```

这些文件应该是空的，除了：

**`MyApp\myapp\utils\charts.py:`**

```
class GChartWrapper(object):
    def __init__(self):
        print "DEBUG: An instance of GChartWrapper is being created!" 
```

**`MyApp\myapp\view\__init__.py:`**

```
from myapp.utils.charts import GChartWrapper

def start():
    c = GChartWrapper() # creating instance of the class 
```

**`MyApp\run.py:`**

```
from myapp.view import start
start() 
```

就这样！当您运行入口点 ( `run.py`) 时，它会调用视图上的一个函数，并创建 GChartWrapper 类的一个实例。使用这种结构，您可以在任何地方导入任何内容并使用它。

作为补充，`MyApp\setup.py`您可以为 MyApp\myapp 包编写一个安装程序。使用[distutils](http://docs.python.org/distutils)编写它：

```
from distutils.core import setup
setup(name='MyApp',
      version='1.0',
      description='My Beautiful Application',
      author='Martin',
      author_email='martin@xxxxxxx.com',
      url='http://stackoverflow.com/questions/1003843/',
      packages=['myapp'],
      scripts=['run.py']
     ) 
```

足够了。现在，当人们下载 MyApp 文件夹时，他们可以使用 setup.py 安装它并使用 run.py 运行它。Distutils 可以生成多种格式的包，包括 Windows 可安装的 .EXE

这是分发 python 包/应用程序的标准方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T20:49:47.967

您可以更改 python 查找文件的路径。

在源文件的顶部，添加：

```
import sys
sys.path.append("..") 
```

或者更改环境变量：

```
export PYTHONPATH=.. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-16T21:10:36.397

或者从 python 2.5 开始（再次假设 myview 在 myapp\view 中：

```
from __future__ import absolute_import
from ..utils.GChartWrapper import * 
```

请参阅：[http ://docs.python.org/whatsnew/2.5.html#pep-328-absolute-and-relative-imports](http://docs.python.org/whatsnew/2.5.html#pep-328-absolute-and-relative-imports)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-14T16:40:05.093

GChartWrapper 也可从 PyPI 获得，因此您可以使用 easy_install 或 pip 安装模块：

```
sudo pip install GChartWrapper==0.9 
```

然后它将自动添加到您的 PYTHONPATH 中，然后您可以将其从 /myapp/utils 目录中删除。如果您不能使用 sudo，请查看使用 virtualenv（和 virtualenvwrapper）。

# encryption - 用于 AutoLISP 代码保护的 Protect.exe

> ID：1003847
> 
> 赞同：1
> 
> 时间：2009-06-16T20:44:26.043
> 
> 标签：encryption, lisp, stack-overflow, obfuscation, source-code-protection

我正在为 IntelliCAD 联盟的成员开发一个基于 LISP 的架构包。根据我在网站上找到的建议，我使用 Kelvinator 对一些代码进行了变形和伪装。现在我正在尝试使用 Protect.exe 来加密代码。在我尝试在输出文件名中使用文件夹名称之前，该 exe 似乎可以正常工作：

```
protect es.lsp L  kelvinated\protected\es.lsp 
```

首先，我可以这样做吗？Protect.exe 会像这样工作，还是输入和输出文件必须在同一个文件夹中？

另外，有一次我试过这个，我得到一个“***堆栈溢出***”错误。因此，我在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-11-03T23:04:13.607

Kelvinator/protect 等都是相当古老的实用程序，你知道它们最后一次更新是什么时候吗？副标题，他们可能会期待老式的 8.3 文件/文件夹名称。

至于“这行得通吗？”，我不能说，因为我在为他人编写 lisp 时使用不同的方案来保护我的工作（vlx/fas、bricscad 的加密器、我自己的加载器/混淆器......）。

此上下文中的堆栈溢出表明递归错误，可能是在它尝试协调您提供的路径时。

您是否尝试过使用 DOS 短路径？将路径放在引号中？使用正斜杠？使用双反斜杠？

如果你通过“/”会发生什么？（和替代品）在命令行上，它提供任何帮助吗？

最后，如果它拒绝处理文件，除非它们共享相同的目录，您总是可以在前端使用一个为您做家务的批处理文件。

迈克尔。

# javascript - 如何对 JavaScript 代码进行基准测试？

> ID：1003855
> 
> 赞同：122
> 
> 时间：2009-06-16T20:46:28.723
> 
> 标签：javascript, benchmarking

是否有一个包可以帮助我对 JavaScript 代码进行基准测试？我不是指 Firebug 和此类工具。

我需要比较我已经实现的 2 个不同的 JavaScript 函数。我对 Perl 的 Benchmark ( [Benchmark.pm](https://metacpan.org/pod/Benchmark) ) 模块非常熟悉，我正在寻找 JavaScript 中类似的东西。

对 JavaScript 代码进行基准测试的强调是否过火了？我可以只计时一次功能吗？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2010-11-29T16:06:55.283

[jsperf.com](http://jsperf.com)是测试 JS 性能的首选站点。从那里开始。如果您需要一个框架来从命令行或脚本运行您自己的测试，请使用[Benchmark.js](http://benchmarkjs.com/)，这是构建 jsperf.com 的库。

**注意：**任何测试 Javascript 代码的人都应该了解“微基准”的陷阱（针对特定功能或操作的小型测试，而不是基于真实世界代码模式的更复杂的测试）。此类测试可能很有用，但由于现代 JS 运行时的运行方式，容易出现不准确的情况。 [Vyacheslav Egorov 关于性能和基准测试的演示](https://www.youtube.com/watch?v=65-RbBwZQdU)值得一看，以了解问题的本质。

**编辑：**删除了对我的 JSLitmus 工作的引用，因为它不再相关或有用。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2017-10-09T15:16:36.307

只是简单的方法。

```
console.time('test');
console.timeEnd('test'); 
```

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2014-09-16T20:45:47.947

只需在组合中添加一个快速计时器，有人可能会觉得这很有用：

```
var timer = function(name) {
    var start = new Date();
    return {
        stop: function() {
            var end  = new Date();
            var time = end.getTime() - start.getTime();
            console.log('Timer:', name, 'finished in', time, 'ms');
        }
    }
}; 
```

理想情况下，它将被放置在一个类中，而不是像我出于上述示例目的那样用作全局。使用它会很简单：

```
var t = timer('Some label');
// code to benchmark
t.stop(); // prints the time elapsed to the js console 
```

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2009-06-16T20:50:53.177

~~只需对每个函数进行几次迭代。一次迭代可能还不够，但是（取决于您的函数的复杂程度）接近 100 甚至 1,000 次迭代应该可以完成这项工作。~~

~~如果您想查看函数的哪些部分使其变慢，Firebug 也有一个[分析器。](http://getfirebug.com/js.html)~~

**编辑：**对于未来的读者，下面推荐 JSPerf 的答案应该是正确的答案。我会删除我的，但我不能，因为它已被 OP 选中。基准测试不仅仅是运行多次迭代，而 JSPerf 会为您处理这些。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2011-01-10T06:51:43.223

我一直在使用@musicfreaks 答案的这个简单实现。没有任何功能，但它真的很容易使用。这`bench(function(){return 1/2;}, 10000, [], this)`将计算 1/2 10,000 次。

```
/**
 * Figure out how long it takes for a method to execute.
 * 
 * @param {Function} method to test 
 * @param {number} iterations number of executions.
 * @param {Array} args to pass in. 
 * @param {T} context the context to call the method in.
 * @return {number} the time it took, in milliseconds to execute.
 */
var bench = function (method, iterations, args, context) {

    var time = 0;
    var timer = function (action) {
        var d = Date.now();
        if (time < 1 || action === 'start') {
            time = d;
            return 0;
        } else if (action === 'stop') {
            var t = d - time;
            time = 0;    
            return t;
        } else {
            return d - time;    
        }
    };

    var result = [];
    var i = 0;
    timer('start');
    while (i < iterations) {
        result.push(method.apply(context, args));
        i++;
    }

    var execTime = timer('stop');

    if ( typeof console === "object") {
        console.log("Mean execution time was: ", execTime / iterations);
        console.log("Sum execution time was: ", execTime);
        console.log("Result of the method call was:", result[0]);
    }

    return execTime;  
}; 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2011-02-16T11:25:35.853

编写体面的跨浏览器基准测试真的很难。简单地计时代码的预定义迭代次数根本[不是万无一失的](http://calendar.perfplanet.com/2010/bulletproof-javascript-benchmarks/)。

正如@broofa 已经建议的那样，请查看[jsPerf](http://jsperf.com/)。它在幕后使用[Benchmark.js 。](http://benchmarkjs.com/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-09-14T19:07:03.663

如果编写自定义基准脚本，请务必注意某些浏览器仅在定义它们的函数结束后才应用 dom 操作。更多细节在这里 [http://www.quirksmode.org/blog/archives/2009/08/when_to_read_ou.html](http://www.quirksmode.org/blog/archives/2009/08/when_to_read_ou.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-04T00:57:46.770

如果你需要一些简单的东西，你可以这样做：

```
'use strict'
console.clear()

const powerOf = x => y => Math.pow(x, y)
const powerOfThree = powerOf(3)

function performanceCalc(fn, ...params) {
    const start = +new Date()
    const result = fn(...params)
    const end = +new Date()

    console.log(`Result: ${result}. Execution Time: ${end - start} ms`)
}

performanceCalc(powerOfThree, 2) 
```

[这是代码示例](http://codepen.io/vlad-bezden/pen/YWJKkY?editors=0012)

# visual-studio - 在 VS 2005 中使用 Vista 图标的最简单方法是什么？

> ID：1003862
> 
> 赞同：3
> 
> 时间：2009-06-16T20:47:07.990
> 
> 标签：visual-studio, visual-studio-2005, icons

我从网上下载了一个 Vista 图标，用于我正在开发的一个新应用程序。当我尝试在 Visual Studio 2005 C++ 中编译它时，我收到一条错误消息：

> 错误 RC2176：res\XXXXX.ico 中的旧 DIB；通过 SDKPAINT 传递它

错误消息似乎有点误导，我认为“旧 DIB”实际上是一种新的格式，它没有预料到。我从未听说过 SDKPAINT，而且 Search 也没有发现它安装在我的系统上的任何地方。微软声称 SDKPAINT 带有 Windows 3.0 SDK，但由于与我们的防火墙不兼容，我无法下载任何 SDK。

在这个图标中我真的不需要任何 Vista 特定的东西，所以任何会转储不兼容位的东西都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T20:58:02.757

I did a little more digging, and I found this previous question:

[Which Icon Editing Software would you recommend for creating icons for apps](https://stackoverflow.com/questions/468195/which-icon-editing-software-would-you-recommend-for-creating-icons-for-apps)

The accepted answer for that question suggested [IcoFX](http://www.icofx.ro/). I downloaded that and used it to delete the 256x256 and 128x128 versions of the icon, and now everything's fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T14:06:03.780

在 Visual Studio 2005 中还有两种方法可以实现这一点：

*   用较新的 SDK（例如 Windows Vista、7 ...）或 DDK/WDK（同上）中的替换`rc.exe`和替换您的 Visual Studio 2005 安装`rcdll.exe`
*   或使用 SDK 随附的相应工具将较新的 SDK 集成到您的 Visual Studio 2005

资源编译器是创建`.res`文件的部分，然后是通常的 Visual Studio 2005 链接器（使用第一个选项）或 SDK 工具链的衬垫将其链接到二进制文件中。这意味着即使在不赞成升级整个工具链的保守场景中，这也应该是无害的。

# xml - AS2 解析 XML 问题

> ID：1003869
> 
> 赞同：1
> 
> 时间：2009-06-16T20:49:01.120
> 
> 标签：xml, parsing, actionscript-2

我有一个 xml 文件和一个 flash 文件。flash 文件读取 xml 文件。

```
<?xml version="1.0" standalone="yes"?>
<banners>
    <banner>
        <title>Hello World</title>
        <image>http://www.search-this.com/wp-content/themes/big-blue/images/company-logos1.gif</image>
        <link>http://google.com/</link>
    </banner>
</banners> 
```

现在这有效：

```
trace(this.childNodes[0].childNodes[0].childNodes[0]);
^ shows <title>Hello World</title> 
```

但这显示为 NULL：

```
trace(this.childNodes[0].childNodes[0].childNodes[0].nodeValue); 
```

为什么显示为NULL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-25T10:21:20.713

试试这个：

```
trace(this.childNodes[0].childNodes[0].childNodes[0].childNodes[0].nodeValue);
//--------------------------------------------------^ another childNodes 
```

原因：文本本身就是所谓的文本节点。它是标题元素的子元素（“元素节点”）。

干杯，

# oop - OOP 类设计的免费在线资源？

> ID：1003870
> 
> 赞同：1
> 
> 时间：2009-06-16T20:49:28.157
> 
> 标签：oop

我喜欢在我面前有一本书，但现在我买不起书，而且我所有的图书馆都很糟糕，所以我想知道有哪些免费网站/资源可以让我了解设计课程的最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-16T21:01:38.413

我觉得**Martin Fowler**的[企业模式合集](http://martinfowler.com/articles/enterprisePatterns.html)很不错……

我不仅有他，还有 Gang of Four、java、Microsoft 和许多其他...

另一个不错的是[Refactoring to Patterns Catalog](http://www.industriallogic.com/xp/refactoring/catalog.html)，它将帮助您将现有代码重构为模式...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T20:53:53.903

如果您使用 PHP，那么[OOP 手册页](http://us3.php.net/manual/en/language.oop5.php)是非常宝贵的。对于更多的大脑资源，[维基百科](http://en.wikipedia.org/wiki/Object-oriented_programming)怎么样？

快速[谷歌](http://www.google.com/)搜索发现：[http](http://www.oodesign.com/) ://www.oodesign.com/似乎提供了广泛的设计模式集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T21:21:14.410

值得一看：对象导师发表的文章：[http ://www.objectmentor.com/resources/publishedArticles.html](http://www.objectmentor.com/resources/publishedArticles.html)

# c++ - Boost::Asio::Ip::Tcp::Iostream 问题

> ID：1003873
> 
> 赞同：3
> 
> 时间：2009-06-16T20:49:53.180
> 
> 标签：c++, boost-asio

大家好，我是 asio 和 boost 的新手，我一直在尝试实现 TCP 服务器和客户端，以便我可以传输 std::vector - 但到目前为止我失败了。我发现 Asio 的 boost 文档缺乏（至少可以说）并且难以理解（英语不是我的主要语言）。

无论如何，我一直在查看 iostreams 示例，并且一直在尝试实现面向对象的解决方案 - 但我失败了。

我尝试实现的服务器应该能够接受来自多个客户端的连接（我该怎么做？）

服务器应该接收到 std::vector, /* Do something */ 然后将其返回给客户端，以便客户端可以告诉服务器接收到完整的数据。

***.h 文件**

```
class TCP_Server : private boost::noncopyable
        {
            typedef boost::shared_ptr<TCP_Connection> tcp_conn_pointer;

            public :
                TCP_Server(ba::io_service &io_service, int port);
                virtual ~TCP_Server() {}
                virtual void Start_Accept();
            private:
                virtual void Handle_Accept(const boost::system::error_code& e);
            private :
                int                 m_port;
                ba::io_service&     m_io_service;               // IO Service
                bi::tcp::acceptor   m_acceptor;         // TCP Connections acceptor
                tcp_conn_pointer    m_new_tcp_connection;   // New connection pointer
        }; 
```

***.cpp 文件**

```
TCP_Server::TCP_Server(boost::asio::io_service &io_service, int port) : 
            m_io_service(io_service), 
            m_acceptor(io_service, bi::tcp::endpoint(bi::tcp::v4(), port)), 
            m_new_tcp_connection(TCP_Connection::Create(io_service))
        {
            m_port = port;
            Start_Accept();
        }

        void TCP_Server::Start_Accept()
        {
            std::cout << "[TCP_Server][Start_Accept] => Listening on port : " << m_port << std::endl;
            //m_acceptor.async_accept(m_new_tcp_connection->Socket(),
            //                        boost::bind(&TCP_Server::Handle_Accept, this,
            //                                    ba::placeholders::error));

                m_acceptor.async_accept(*m_stream.rdbuf(),
                boost::bind(&TCP_Server::Handle_Accept, 
                this,
                ba::placeholders::error));
        }

        void TCP_Server::Handle_Accept(const boost::system::error_code &e)
        {
            if(!e)
            {

                /*boost::thread T(boost::bind(&TCP_Connection::Run, m_new_tcp_connection));
                std::cout << "[TCP_Server][Handle_Accept] => Accepting incoming connection. Launching Thread " << std::endl;
                m_new_tcp_connection = TCP_Connection::Create(m_io_service);
                m_acceptor.async_accept(m_new_tcp_connection->Socket(), 
                                        boost::bind(&TCP_Server::Handle_Accept, 
                                                    this, 
                                                    ba::placeholders::error));*/
                m_stream << "Server Response..." << std::endl;
            }
        } 
```

客户应该怎么看？如何在两个应用程序“通话”时保持连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-13T14:28:58.537

AFAIK ASIO iostreams 仅用于同步 I/O。但是你的例子给了我一个提示，你想使用异步 I/O。这是一个使用异步 I/O 读取请求的服务器的小示例，该请求由整数数组组成，请求中的整数前面是 4 字节计数。所以实际上我将整数向量序列化为 count(4 bytes) int int ... 等如果读取 ints 向量成功，服务器将写入 4 字节响应代码（=1）然后发出读取来自客户端的新请求。话不多说，代码如下。

```
#include <iostream>
#include <vector>
#include <boost/bind.hpp>
#include <boost/function.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/thread.hpp>
#include <boost/asio.hpp>

using namespace boost::asio;
using boost::asio::ip::tcp;

class Connection
{
public:
    Connection(tcp::acceptor& acceptor)
        : acceptor_(acceptor), socket_(acceptor.get_io_service(), tcp::v4())
    {
    }
    void start()
    {
        acceptor_.get_io_service().post(boost::bind(&Connection::start_accept, this));
    }
private:
    void start_accept()
    {
        acceptor_.async_accept(socket_,boost::bind(&Connection::handle_accept, this, 
            placeholders::error));
    }
    void handle_accept(const boost::system::error_code& err)
    {
        if (err)
        {
            //Failed to accept the incoming connection.
            disconnect();
        }
        else
        {
            count_ = 0;
            async_read(socket_, buffer(&count_, sizeof(count_)),
                boost::bind(&Connection::handle_read_count,
                this, placeholders::error, placeholders::bytes_transferred));
        }
    }
    void handle_read_count(const boost::system::error_code& err, std::size_t bytes_transferred)
    {
        if (err || (bytes_transferred != sizeof(count_))
        {
            //Failed to read the element count.
            disconnect();
        }
        else
        {
            elements_.assign(count_, 0);
            async_read(socket_, buffer(elements_), 
                boost::bind(&Connection::handle_read_elements, this,
                placeholders::error, placeholders::bytes_transferred));
        }
    }

    void handle_read_elements(const boost::system::error_code& err, std::size_t bytes_transferred)
    {
        if (err || (bytes_transferred != count_ * sizeof(int)))
        {
            //Failed to read the request elements.
            disconnect();
        }
        else
        {
            response_ = 1;
            async_write(socket_, buffer(&response_, sizeof(response_)),
                boost::bind(&Connection::handle_write_response, this,
                placeholders::error, placeholders::bytes_transferred));
        }
    }
    void handle_write_response(const boost::system::error_code& err, std::size_t bytes_transferred)
    {
        if (err)
            disconnect();
        else
        {
            //Start a fresh read 
            count_ = 0;
            async_read(socket_, buffer(&count_, sizeof(count_)),
                boost::bind(&Connection::handle_read_count,
                this, placeholders::error, placeholders::bytes_transferred));
        }
    }
    void disconnect()
    {
        socket_.shutdown(tcp::socket::shutdown_both);
        socket_.close();
        socket_.open(tcp::v4());
        start_accept();
    }
    tcp::acceptor& acceptor_;
    tcp::socket socket_;
    std::vector<int> elements_;
    long count_;
    long response_;
};

class Server : private boost::noncopyable
{
public:
    Server(unsigned short port, unsigned short thread_pool_size, unsigned short conn_pool_size)
        : acceptor_(io_service_, tcp::endpoint(tcp::v4(), port), true)
    {
        unsigned short i = 0;
        for (i = 0; i < conn_pool_size; ++i)
        {
            ConnectionPtr conn(new Connection(acceptor_));
            conn->start();
            conn_pool_.push_back(conn);
        }

        // Start the pool of threads to run all of the io_services.
        for (i = 0; i < thread_pool_size; ++i)
        {
            thread_pool_.create_thread(boost::bind(&io_service::run, &io_service_));
        }
    }   
    ~Server()
    {
        io_service_.stop();
        thread_pool_.join_all();
    }

private:
    io_service io_service_;
    tcp::acceptor acceptor_;
    typedef boost::shared_ptr<Connection> ConnectionPtr;
    std::vector<ConnectionPtr> conn_pool_;
    boost::thread_group thread_pool_;
};

boost::function0<void> console_ctrl_function;

BOOL WINAPI console_ctrl_handler(DWORD ctrl_type)
{
  switch (ctrl_type)
  {
  case CTRL_C_EVENT:
  case CTRL_BREAK_EVENT:
  case CTRL_CLOSE_EVENT:
  case CTRL_SHUTDOWN_EVENT:
    console_ctrl_function();
    return TRUE;
  default:
    return FALSE;
  }
}

void stop_server(Server* pServer)
{
    delete pServer;
    pServer = NULL;
}

int main()
{
    Server *pServer = new Server(10255, 4, 20);
    console_ctrl_function = boost::bind(stop_server, pServer);
    SetConsoleCtrlHandler(console_ctrl_handler, TRUE);
    while(true)
    {
        Sleep(10000);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-29T23:32:27.740

我相信您发布的代码有点不完整/不正确。尽管如此，这里有一些指导..

1）您的 async_accept() 调用似乎是错误的。它应该是这样的，

```
m_acceptor.async_accept(m_new_tcp_connection->socket(),...) 
```

2）注意，Handle_Accept()函数会在socket被接受*后被调用。*换句话说，当控制到达 Handle_Accept() 时，您只需写入套接字即可。就像是

```
void TCP_Server::Handle_Accept(const system::error_code& error)
{
  if(!error)
  {
    //send data to the client
    string message = "hello there!\n";

    //Write data to the socket and then call the handler AFTER that
    //Note, you will need to define a Handle_Write() function in your TCP_Connection class.
async_write(m_new_tcp_connection->socket(),buffer(message),bind(&TCP_Connection::Handle_Write, this,placeholders::error,placeholders::bytes_transferred)); 

    //accept the next connection
    Start_Accept();
  }
} 
```

3）至于客户端，你应该看看这里： http: [//www.boost.org/doc/libs/1_39_0/doc/html/boost_asio/tutorial/tutdaytime1.html](http://www.boost.org/doc/libs/1_39_0/doc/html/boost_asio/tutorial/tutdaytime1.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-11T11:45:28.817

如果两端的通信是用 C++ 实现的，则可以使用 Boost Serialization 库将向量 sezilize 为字节并将它们传输到另一台机器。在另一端，您将使用 boost 序列化库来反序列化对象。我看到至少有两种方法这样做。

Boost Serialization 的优点：这种方法也适用于在 32 位和 64 位系统之间传输对象。

以下是链接：
[代码项目文章](http://www.codeproject.com/KB/threads/RMI_For_Cpp.aspx?display=Print)
[提升邮件列表想法](http://lists.boost.org/boost-users/2009/06/48937.php)

问候，
欧文斯

# javascript - 理解 javascript 中的按位运算

> ID：1003879
> 
> 赞同：4
> 
> 时间：2009-06-16T20:51:26.437
> 
> 标签：javascript, jquery, binary, compare, bit-manipulation

我目前将数据以二进制形式存储在 XML 文档中，长度为 20 位，每个代表一个布尔值。

```
<matrix> 

    <resource type="single"> 
        <map>10001010100011110000</map> 
        <name>Resource Title</name> 
        <url>http://www.yoursite.com</url> 
    </resource>

</matrix> 
```

我正在用 jQuery 解析它，并且目前正在使用一个`for`循环`charAt()`来确定如果值是 ==“1”是否要执行一些操作。

```
for (var i = 0; i < _mapLength; i++) {
    if (map.charAt(i) == "1") {
        //perform something here
    }
} 
```

作为运行缓慢的巨大循环的一部分，这发生了几次。有人告诉我，我应该使用按位运算符来处理它，它会运行得更快。

## 我的问题是：

**有人可以给我一个例子来说明我如何做到这一点吗？** 我试图在网上阅读教程，它们似乎就在我的头上飞过。（仅供参考：我计划创建一个 Ruby 脚本，将我的二进制 0 和 1 转换为我的 XML 中的位。）

**或者有没有人知道一个好的、简单的**（甚至可能是简化版）**教程或可以帮助我掌握这些按位运算符概念的东西？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-16T21:06:42.707

Assuming you have no more than 32 bits, you can use JavaScript's built-in `parseInt()` function to convert your string of 1s and 0s into an integer, and then test the flags using the `&` (and) operator:

```
var flags = parseInt("10001010100011110000", 2); // base 2

if ( flags & 0x1 )
{
   // do something
}

... 
```

### See also: [How to check my byte flag?](https://stackoverflow.com/questions/127027/how-to-check-my-byte-flag)

(question is on the use in C, but applies to the same operators in JS as well)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T21:09:47.320

Single ampersand (&, as opposed to &&) does bit-wise comparison. But first you need to convert your strings to numbers using parseInt().

```
var map = parseInt("10010", 2); // the 2 tells it to treat the string as binary

var maskForOperation1 = parseInt("10000", 2);
var maskForOperation2 = parseInt("01000", 2);
// ...

if (map & maskForOperation1) { Operation1(); }
if (map & maskForOperation2) { Operation2(); }
// ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-29T19:19:30.107

要格外小心。Javascript 没有整数——数字存储为 64 位浮点数。您应该可以准确地转换为 52 位。如果你得到的标志比这更多，那么当你的“数字”四舍五入到最接近的可表示浮点数时，就会发生不好的事情。（哎哟！）

此外，按位操作对性能没有帮助，因为浮点数将被转换为整数，经过测试，然后再转换回来。

如果您有几个要检查标志的地方，我会在一个对象上设置标志，最好带有名称，如下所示：

```
var flags = {};
flags.use_apples = map.charAt(4);
flags.use_bananas = map.charAt(10); 
```

ETC...

然后你可以在你的循环中测试这些标志：

```
if(flags.use_apples) {
    do_apple_thing();
} 
```

对象槽测试将比按位检查更快，因为 Javascript 未针对按位运算符进行优化。但是，如果您的循环很慢，我担心解码这些标志可能不是缓慢的根源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T21:09:04.763

Bitwise operators will certainly be faster but only linearly and not by much. You'll probably save a few milliseconds (unless you're processing HUGE amounts of data in Javascript, which is most likely a bad idea anyway).

You should think about profiling other code in your loop to see what's slowing it down the most. What other algorithms, data structures and allocations do you have in there that could use refactoring?

# grails - Grails 忽略 @Id 注释

> ID：1003881
> 
> 赞同：0
> 
> 时间：2009-06-16T20:51:42.910
> 
> 标签：grails, jpa, annotations

我正在尝试将现有数据库与 Grails 一起使用。我的 DataSource.groovy 以此开头：

```
import org.codehaus.groovy.grails.orm.hibernate.cfg.GrailsAnnotationConfiguration
dataSource {
    configClass = GrailsAnnotationConfiguration.class
    pooled = true
    driverClassName = "com.mysql.jdbc.Driver"
    username = "root"
    password = "12345"

} 
```

我的班级注释如下：

```
@Entity
@Table(name = "regexpression", catalog = "tigger")
@SuppressWarnings("serial")
public class Regexpression implements Serializable {

    /**
     * Attribute regexpId.
     */
    private Integer regexpId;

    . . . 

    /**
     * <p> 
     * </p>
     * @return regexpId
     */
    @Basic
    @Id
    @GeneratedValue
    @Column(name = "regexp_id")
        public Integer getRegexpId() {
        return regexpId;
    }
        . . . 
```

当我运行生成的代码时，出现以下错误：

```
org.codehaus.groovy.grails.web.pages.exceptions.GroovyPagesException: Error evaluating expression [regexpressionInstance.id] on line [40]: groovy.lang.MissingPropertyException: No such property: id for class: org.maflt.flashlit.pojo.Regexpression 
```

因此，Grails 似乎忽略了 regexp_id 上的 @Id 注释。那是正确的吗？

我计划将数据库更改为使用 id 而不是 regexp_id。但我也不应该有。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T01:04:46.633

嗯，您可能已经摆脱了命名 Integer 字段 id，然后只需将 @Column 注释将该属性指向表中的 regexp_id 列。

# wpf - 失去焦点时，Treeview 项目失去选择

> ID：1003883
> 
> 赞同：5
> 
> 时间：2009-06-16T20:53:04.060
> 
> 标签：wpf, treeview, focus, treeviewitem

我在我现在正在开发的应用程序上注意到了这一点，所以我创建了一个简单的测试应用程序来演示。下面是我的窗口和树视图项目的事件处理程序。如果展开“一”或“二”父节点，并单击其中一个子节点，则在文本框上调用 Focus() 方法后，选定的子节点不会显示为已选中。相反，选择会弹出到父节点。有谁知道如何克服这个问题，并将选择保留在选定的子节点上？谢谢。

```
<Window 
x:Class="DockingSample.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window1"
WindowState="Maximized"
>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="300" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <TreeView Margin="6">
        <TreeViewItem Header="One">
            <TreeViewItem Header="One" Selected="TreeViewItem_Selected" />
            <TreeViewItem Header="Two" Selected="TreeViewItem_Selected" />
            <TreeViewItem Header="Three" Selected="TreeViewItem_Selected" />
        </TreeViewItem>
        <TreeViewItem Header="Two">
            <TreeViewItem Header="One" Selected="TreeViewItem_Selected" />
            <TreeViewItem Header="Two" Selected="TreeViewItem_Selected" />
            <TreeViewItem Header="Three" Selected="TreeViewItem_Selected" />
        </TreeViewItem>
    </TreeView>

    <TextBox Grid.Column="1" x:Name="textbox" />
</Grid> 
```

```
private void TreeViewItem_Selected(object sender, RoutedEventArgs e)
    {
        textbox.Focus();
    } 
```

使用上面的窗口和“Selected”事件句柄

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-06-29T09:37:45.380

通过这样做，给 TreeView 一些时间来完成他们的事件：

Dispatcher.BeginInvoke(DispatcherPriority.Input, new Action(() => textbox.Focus()));

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-10T16:46:00.923

将 TreeView.HideSelection 设置为 false。

# git - 在我的 GoDaddy 托管计划上设置 git 存储库

> ID：1003885
> 
> 赞同：19
> 
> 时间：2009-06-16T20:53:08.960
> 
> 标签：git

我有一个使用 git 进行版本控制的项目。

我想要做的是在我的（启用 ssh 的）GoDaddy 共享主机包上设置一个 repo，以便我可以通过推送而不是在 FTP 中拖放来部署。

任何提示将不胜感激。最好是已经做过的人的帐户，但我个人在网上找不到任何帐户。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2011-01-06T21:15:35.577

通过一些工作，我能够在我的 GoDaddy 帐户上运行 Git。[在我的博客](http://johntrammell.com/wp/2011/01/05/using-git-on-godaddy/)上有更长的帖子详细说明了该过程，但简短的回答是：

1.  在您的帐户中安装 git（可能使用我的博客文章中引用的 tarball）
2.  在您的帐户中创建一个 git 存储库（裸机或非裸机）
3.  检查您的存储库，使用 -u 指示到的路径`git-upload-pack`

    % git clone -u libexec/git-core/git-upload-pack mysite:myrepo.git

4.  调整您的本地存储库配置以指向和的正确`git-upload-pack`路径 `git-receive-pack`：

    % git config remote.origin.receivepack libexec/git-core/git-receive-pack
    % git config remote.origin.uploadpack libexec/git-core/git-upload-pack

* * *

由于无法再访问该博客，以下是从[archive.org](http://web.archive.org/web/20110830112931/http://johntrammell.com/wp/2011/01/05/using-git-on-godaddy/)中提取的完整帖子：

## 在 GoDaddy 上使用 Git

这个博客托管在一个便宜的 GoDaddy 帐户上。当最近可以通过 SSH 访问 shell 时，我认为安装本地 git 存储库会很有趣。这不是微不足道的，但我终于让它工作了。我是这样做的：

### 步骤 0\. 配置 SSH

您想要创建一个公钥，以便您可以轻松地通过 SSH 登录到您的 GoDaddy 帐户。如果您还没有密钥对，请创建一个密钥对，并将其添加到`~/.ssh/authorized_keys`. 我将假设这样的条目`~/.ssh/config`：

```
Host mysite
HostName mygodaddysite.com
User mylogin 
```

### 步骤 1\. 安装 Git

在我的 GoDaddy 主机上闲逛之后，我发现它运行的是 CentOS 5.2。在我的笔记本电脑上运行的二进制文件不兼容，所以我使用 VirtualBox 来设置本地 Centos 5.2 安装并构建 Git。我正在共享一个包含[预先构建的 CentOS 5.2 Git 二进制文件](http://johntrammell.com/centos5.2-git.tar.gz)的 tarball 。您应该能够使用以下命令下载和安装：

```
wget http://johntrammell.com/centos5.2-git.tar.gz
tar xzf centos5.2-git.tar.gz 
```

享受这部分 - 我在这里为您节省了几个小时的工作。

### 步骤 2\. 设置您的环境。

将以下内容添加到您的 .bash_profile 中：

```
export EDITOR=vim
export PATH=$PATH:$HOME/bin:$HOME/libexec/git-core
export LD_LIBRARY_PATH=$HOME/lib
export GIT_EXEC_PATH=~/libexec/git-core
export GIT_TEMPLATE_DIR=~/share/git-core/templates 
```

这将在交互式 shell 上正确设置您的环境。不幸的是，我似乎无法为非交互式 SSH 命令正确设置 PATH。例如，当我从笔记本电脑运行此命令时：

```
ssh mysite env 
```

我看到了默认路径。当我在.bashrc 中设置路径时也是这种情况。我还没有确切地找到 SSH 在非交互式访问中的作用，但这可能与 sshd 中的 PermitUserEnvironment 设置有关。幸运的是，我们可以解决这个问题。

### 步骤 3\. 创建存储库

登录到您的 GoDaddy 帐户，并创建一个简单的“裸”Git 存储库：

```
% mkdir myrepo
% cd myrepo
% touch README
% git init
% git add README
% git commit -m 'empty git repository'
% cd ..
% git clone --bare myrepo myrepo.git 
```

您现在在`~/myrepo.git/`GoDaddy 帐户的根目录中拥有一个裸存储库。

### 第 4 步：检查您的存储库

唯一棘手的部分是你必须告诉 git 在哪里可以找到 git-upload-pack。这可以解决上面提到的 PATH 问题。在您的本地计算机上，执行以下操作：

```
git clone -u libexec/git-core/git-upload-pack mysite:myrepo.git 
```

您现在应该已签出原始最小存储库的副本。

### 步骤 5\. 更多 git 配置调整

遗憾的是，我们还没有完成：

```
% cd myrepo
% echo "foo" > README
% git commit -am 'updated'
[master 044c086] updated
 1 files changed, 1 insertions(+), 0 deletions(-)
% git push
bash: git-receive-pack: command not found
fatal: The remote end hung up unexpectedly 
```

我们的 PATH 问题现在正在干扰推送操作。作为一种解决方法，我们可以在命令行中指定 –receive-pack，或者在本地配置中设置它（同样适用于 fetch 操作和 –upload-pack）：

```
% git config remote.origin.receivepack libexec/git-core/git-receive-pack
% git config remote.origin.uploadpack libexec/git-core/git-upload-pack 
```

恭喜，您现在应该可以启动并运行了！

### 资源

*   [http://johntrammell.com/centos5.2-git.tar.gz](http://johntrammell.com/centos5.2-git.tar.gz)
*   [https://serverfault.com/questions/26836/setting-up-a-git-repo-on-my-godaddy-hosting-plan](https://serverfault.com/questions/26836/setting-up-a-git-repo-on-my-godaddy-hosting-plan)
*   [在我的 GoDaddy 托管计划上设置 git 存储库](https://stackoverflow.com/questions/1003885/setting-up-a-git-repo-on-my-godaddy-hosting-plan)
*   [git-upload-pack：找不到命令，如何正确解决此问题](https://stackoverflow.com/questions/225291/git-upload-pack-command-not-found-how-to-fix-this-correctly)
*   [http://www.bluehostforum.com/showthread.php?20304-Bluehost-Solution-to-the-Git-PATH-issue-when-using-a-non-interactive-shell](http://www.bluehostforum.com/showthread.php?20304-Bluehost-Solution-to-the-Git-PATH-issue-when-using-a-non-interactive-shell)
*   [http://www.google.com/search?q=ssh+setup](http://www.google.com/search?q=ssh+setup)
*   [http://www.kernel.org/pub/software/scm/git/docs/git-upload-pack.html](http://www.kernel.org/pub/software/scm/git/docs/git-upload-pack.html)
*   [http://www.kernel.org/pub/software/scm/git/docs/git-receive-pack.html](http://www.kernel.org/pub/software/scm/git/docs/git-receive-pack.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T21:18:58.127

首先，您需要在 GoDaddy 上安装 git。我不确定这是否可能。Git 支持本地用户安装，但您需要有一些方便的开发工具才能做到这一点。下载 git，看看你能不能`./configure && make && make install`——如果能，它会把它放在你的`~/bin`目录中。

我们广泛使用 git 来控制生产。但是，与其在推送上进行部署，我可以建议您 ssh 到盒子并执行`git pull`吗？

更具体地说，创建一个“发布”分支，然后当您准备好部署时，只需将您的更改合并到发布分支，ssh 到服务器，然后 git pull。

**例如**

```
ssh user@godaddyhost.com
cd /path/to/project

#ok, assuming you are on the Release branch
git fetch
git merge branch-with-new-changes-on-it

# update the remote Release branch with the merge
git push origin HEAD 
```

这个简单的工作流程允许开发人员始终**准确**地查看生产服务器上的内容，并在请求部署之前将其他更改与他们的更改合并。事实上，我们要求在请求部署您的分支之前完全合并所有生产更改。

--

如果您确实设法在 GoDaddy 上安装了 git，并且您真的想在推送到它时自动部署，那么请看一下`post-update`钩子。

[http://git-scm.com/docs/githooks](http://git-scm.com/docs/githooks)

--

如果您无法在 GoDaddy 上安装 git，请查看它们是否支持 rsync。然后你可以在某个地方有一个简单的 bash 脚本

1.  拉你的变化
2.  将它们同步到 godaddy

--

有很多方法可以做到这一点。也许这将有助于指导方向......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T21:31:57.440

我按照这里的指示成功了：

[http://www.krizka.net/2010/12/30/setting-up-a-public-git-repository-with-godaddy-shared-hosting/](http://www.krizka.net/2010/12/30/setting-up-a-public-git-repository-with-godaddy-shared-hosting/)

钥匙（对我来说）是

*   获取 CentOS 的预编译二进制文件（来自上面帖子中的链接）
*   设置“uploadpack”和“receivepack”。这是文章末尾附近“让本地 git 了解远程 git”部分中的第 1 步。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T15:30:55.503

通过 ssh 连接。

将 git 安装到 ~/git。

之后创建/更新这些文件：

~/.ssh/authorized_keys

```
command="~/connect.sh" ssh-rsa AAAAB3NzaC... 
```

~/connect.sh

```
#!/bin/bash
if [ -f "${HOME}/.env_profile" ]; then
        source ~/.env_profile
fi;

if [ "x${SSH_ORIGINAL_COMMAND}x" == "xx" ]; then
        $SHELL --login
else
        eval "${SSH_ORIGINAL_COMMAND}"
fi; 
```

~/.env_profile

```
export ENV_VARIABLE=value 
```

通过 git：

```
export PATH=$PATH:$HOME/bin:$HOME/git/libexec/git-core
export LD_LIBRARY_PATH=$HOME/git/lib
export GIT_EXEC_PATH=~/git/libexec/git-core
export GIT_TEMPLATE_DIR=~/git/share/git-core/templates 
```

我花了大约一周的时间在谷歌上搜索它，但它现在就像魅力一样工作......我认为godaddy帐户没有另一种解决方案，可能性太有限了......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-11-09T18:29:38.780

我在本地维护 git 并使用 scp 推送直播......这并不优雅，但 godaddy 已经安装了我的默认值。

“scp -r fooDirectory user@host.com:/path/to/document/root/”

这会将本地目录“fooDirectory”移动到远程主机上的“/path/to/document/root/fooDirectory”。

当您登录 go daddy 时使用“pwd

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-17T19:58:20.487

[我在http://www.612softwarefoundry.com/getting-git-on-godaddy/](http://www.612softwarefoundry.com/getting-git-on-godaddy/)找到了另一个在 GoDaddy 上安装 git 的有用指南

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-31T18:36:06.503

有一个 YouTube 教程解释了如何在 Godaddy 共享主机帐户上设置 Git。这是链接：http: [//youtu.be/z60GLfsGGsY](http://youtu.be/z60GLfsGGsY)

还有一个网页，其中包含您需要在视频上执行的命令。这是页面地址： [http ://www.drupalfever.com/linux-how-to/git/set-up-git-in-a-godaddy-shared-hosting-account](http://www.drupalfever.com/linux-how-to/git/set-up-git-in-a-godaddy-shared-hosting-account)

如果您有任何问题，请给我留言或建议。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-17T23:33:28.703

[我必须在http://netgonian.com](http://netgonian.com)（GoDaddy 经销商）托管的 VPS 上设置 git 。耗时 3 小时的事情本可以在 15 分钟内完成，而且超级简单。

安装 git 应该像运行一样简单，`yum install git`但不幸的是尝试这给了我各种找不到文件的错误。以下是最终解决方案。

以下是步骤：

1.  SSH 到您的虚拟服务器
2.  使用命令切换到root用户`su -`
3.  按照此处的说明[创建一个新的 centos-base.repo 文件](http://redhat-centos.blogspot.com/2013/06/configuring-centos-base-repo-for-redhat.html)
4.  在您刚刚创建上述文件的同一目录（/etc/yum.repos.d）中，将文件 CentoOS-Base.repo 重命名为 CentOS-Base.repox
5.  现在你可以运行`yum install git`它了。

基本问题是 yum 的所有基本 url 都指向 secureserver.net 上的某个服务器，该服务器缺少所有需要的文件。我们上面所做的是将基本 url 指向具有所需文件的服务器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-16T05:30:42.517

这篇博文中的说明对我有用，除了我必须访问 EPEL 并找到最新版本的 git RPM：[http ://hire.chrisjlee.net/node/139](http://hire.chrisjlee.net/node/139)

## 获取二进制文件

```
cd ~
mkdir git
cd git
# Download the rpm from EPEL ( http://fedoraproject.org/wiki/EPEL )
# Find the latest version by checking http://dl.fedoraproject.org/pub/epel/5/i386/
wget http://dl.fedoraproject.org/pub/epel/5/i386/git-1.8.2.1-1.el5.i386.rpm
# Extract binaries from the rpm
rpm2cpio git-1.7.4.1-1.el5.i386.rpm  | cpio -imdv
rm git-1.7.4.1-1.el5.i386.rpm 
```

## 配置

```
echo "
export GIT_BIN=${HOME}/git
export PATH=${GIT_BIN}/usr/bin:${PATH}
export GIT_EXEC_PATH=${GIT_BIN}/usr/bin
export GIT_TEMPLATE_DIR=${GIT_BIN}/usr/share/git-core/templates
export GIT_SSL_NO_VERIFY=true" >> ~/.bashrc 
```

## 配置 git

```
mkdir ~/.git
git config --local --add remote.origin.uploadpack ~/git/usr/bin/git-upload-pack
git config --local --add remote.origin.receivepack ~/git/usr/bin/git-receive-pack 
```

# java - how to return excel in Struts2 result?

> ID：1003892
> 
> 赞同：2
> 
> 时间：2009-06-16T20:54:59.767
> 
> 标签：java, struts2

I am trying to return an Excel sheet from my struts2 action class.

I am not sure what result-type should I be using? Has anyone tried to return an excel from struts2 action class?
I would like the user to be presented with open/save/cancel dialog box

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-08-25T17:51:31.593

Omnipresent 在 struts.xml 中涵盖了您需要的内容。我也在添加一个带有 Action 的示例：

```
InputStream excelStream
String contentDisposition
String documentFormat = "xlsx"

String excel() {

    ServletContext servletContext = ServletActionContext.getServletContext()
    String filePath = servletContext.getRealPath("/WEB-INF/template/excel/mytemplate.${documentFormat}")

    File file = new File(filePath)
    Workbook wb = WorkbookFactory.create(new FileInputStream(file))

    Sheet sheet = wb.getSheetAt(0)

<write to excel file>

    ByteArrayOutputStream baos = new ByteArrayOutputStream()
    wb.write(baos)
    excelStream = new ByteArrayInputStream(baos.toByteArray())
    contentDisposition = "filename=\"myfilename.${documentFormat}\""

    return SUCCESS
}

String getExcelContentType() {
    return documentFormat == "xlsx" ? "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" : "application/vnd.ms-excel"
} 
```

我正在使用 poi 模型：org.apache.poi.ss.usermodel。

如果需要，您可以将“xlsx”替换为“xls”。

struts.xml：

```
<action name="myaction" class="com.example.MyAction" method="excel">
        <result type="stream">
            <param name="contentType">${excelContentType}</param>
            <param name="inputName">excelStream</param>
            <param name="contentDisposition">contentDisposition</param>
            <param name="bufferSize">1024</param>
        </result>
    </action> 
```

（添加分号和其他内容以转换为有效的 Java）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T21:06:55.377

You can utilize the [Stream Result](http://struts.apache.org/2.x/docs/stream-result.html) type

an Example will look like this:

```
<result name="excel" type="stream">
    <param name="contentType">application/vnd.ms-excel</param>
    <param name="inputName">excelStream</param>
    <param name="contentDisposition">attachment; filename="${fileName}"</param>
    <param name="bufferSize">1024</param>
    <param name="contentLength">${contentLength}</param>
 </result> 
```

`excelStream` will be a method in your action class, `contentLength` will be length of the stream, `fileName` will be a getter which will return back the name of the file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-08T19:43:16.747

如果需要使用 POI/HSSF 动态生成 Excel 文件并在 Struts 2 中返回，

**JSP**

```
<s:url action="DownloadExcel.action" var="downloadUrl">
</s:url>
<s:a href="%{downloadUrl}">Click to Download</s:a> 
```

**动作方法**

```
@Action(value = "DownloadExcel")
public void download() throws Exception {

    HttpServletRequest request = ServletActionContext.getRequest();
    HttpServletResponse response = ServletActionContext.getResponse();

    String filename = "report.xlsx"; // or any other filename strategy
    String mimeType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
    String characterEncoding = response.getCharacterEncoding();
    if (characterEncoding != null) {
        mimeType += "; charset=" + characterEncoding;
    }
    response.setContentType("application/octet-stream");
    response.setHeader("Content-Disposition", "attachment;filename=" + filename);

    XSSFWorkbook workbook = new XSSFWorkbook();
    XSSFSheet sheet = workbook.getSheetAt(0);
    // Fill out workbook as necessary... (simple example)
    XSSFRow row = sheet.createRow(0);
    XSSFCell cell = row.createCell(0);
    cell.setCellValue("test");
    //...

    ServletOutputStream out = null;
    try {
        out = response.getOutputStream();
        workbook.write(out);
        workbook.close();
    } catch (IOException e) {
        log.error("Failed to write into response - fileName=" + filename + ", mimeType=" + mimeType, e);
    }
    finally {
        if (out != null) {
            out.flush();
            out.close();
        }
    }
} 
```

# sql-server - 在 SQL Server 2005 中使用 CTE 进行递归查询

> ID：1003895
> 
> 赞同：3
> 
> 时间：2009-06-16T20:55:20.563
> 
> 标签：sql-server, tsql, recursion, common-table-expression

好的，这就是我想要做的。我在 MSSQL2005 中使用 CTE 查询。查询的目的是通过产品类别的父子关系进行递归，并返回每个类别下的产品数量（这包括子类别中包含的任何产品）

我当前的版本只返回所显示类别的产品数量。它没有考虑可能包含在其任何子项中的产品。

重现问题的数据库转储，以及我使用的查询和解释如下：

```
 CREATE TABLE [Categories] (
   [CategoryID] INT,
   [Name] NCHAR(150)

    )
    GO

/* Data for the `Query_Result` table  (Records 1 - 5) */

INSERT INTO [Categories] ([CategoryID], [Name])
VALUES (942, N'Diagnostic Equipment')
GO

INSERT INTO [Categories] ([CategoryID], [Name])
VALUES (943, N'Cardiology')
GO

INSERT INTO [Categories] ([CategoryID], [Name])
VALUES (959, N'Electrodes')
GO

INSERT INTO [Categories] ([CategoryID], [Name])
VALUES (960, N'Stress Systems')
GO

INSERT INTO [Categories] ([CategoryID], [Name])
VALUES (961, N'EKG Machines')
GO

CREATE TABLE [Categories_XREF] (
   [CatXRefID] INT,
   [CategoryID] INT,
   [ParentID] INT
)
GO

/* Data for the `Query_Result` table  (Records 1 - 5) */

INSERT INTO [Categories_XREF] ([CatXRefID], [CategoryID], [ParentID])
VALUES (827, 942, 0)
GO

INSERT INTO [Categories_XREF] ([CatXRefID], [CategoryID], [ParentID])
VALUES (828, 943, 942)
GO

INSERT INTO [Categories_XREF] ([CatXRefID], [CategoryID], [ParentID])
VALUES (928, 959, 943)
GO

INSERT INTO [Categories_XREF] ([CatXRefID], [CategoryID], [ParentID])
VALUES (929, 960, 943)
GO

INSERT INTO [Categories_XREF] ([CatXRefID], [CategoryID], [ParentID])
VALUES (930, 961, 943)
GO

CREATE TABLE [Products_Categories_XREF] (
   [ID] INT,
   [ProductID] INT,
   [CategoryID] INT
)
GO

/* Data for the `Query_Result` table  (Records 1 - 13) */

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252065, 12684, 961)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252066, 12685, 959)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252067, 12686, 960)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252068, 12687, 961)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252128, 12738, 961)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252129, 12739, 959)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252130, 12740, 959)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252131, 12741, 959)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252132, 12742, 959)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252133, 12743, 959)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252134, 12744, 959)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252135, 12745, 959)
GO

INSERT INTO [Products_Categories_XREF] ([ID], [ProductID], [CategoryID])
VALUES (252136, 12746, 959)
GO

CREATE TABLE [Products] (
   [ProductID] INT
)
GO

/* Data for the `Query_Result` table  (Records 1 - 13) */

INSERT INTO [Products] ([ProductID])
VALUES (12684)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12685)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12686)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12687)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12738)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12739)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12740)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12741)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12742)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12743)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12744)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12745)
GO

INSERT INTO [Products] ([ProductID])
VALUES (12746)
GO 
```

这是我使用的 CTE 查询：

```
WITH ProductCategories (CategoryID, ParentID, [Name], Level)
AS
(
-- Anchor member definition
   SELECT
   C.CategoryID,
   CXR.ParentID,
   C.Name,
   0 AS Level
  FROM
  Categories C,
  Categories_XRef CXR
  WHERE
  C.CategoryID = CXR.CategoryID
  AND CXR.ParentID = 0
  UNION ALL
-- Recursive member definition
SELECT
   C.CategoryID,
   CXR.ParentID,
   C.Name,
   Level + 1
  FROM
  Categories C,
  Categories_XRef CXR,
  ProductCategories AS PC
  WHERE
  C.CategoryID = CXR.CategoryID 
  AND CXR.ParentID = PC.CategoryID

)
SELECT 
    PC.ParentID, 
    PC.CategoryID, 
    PC.Name, 
    PC.Level,
    (SELECT 
        Count(P.ProductID) 
     FROM 
        Products P,
        Products_Categories_XREF PCXR 
      WHERE 
       P.ProductID = PCXR.ProductID
       AND PCXR.CategoryID = PC.CategoryID
      ) as ProductCount
FROM     
    Categories C,
    ProductCategories  PC
WHERE
 PC.CategoryID = C.CategoryID
 AND PC.ParentID = 943
ORDER BY 
    Level, PC.Name 
```

首先，将“PC.ParentID”更改为 943。您将看到返回的三个记录显示每个显示的类别的产品计数。

现在，将 ParentID 从**943**更改为**942**并重新运行它。您现在会看到返回 1 个名为“Cardiology”的结果，但它显示 0 个产品 在此类别下，有包含产品的儿童（您之前看到的）。我的大问题是，在这个级别（父级 942）我怎样才能让它计算下面子级中包含的产品，以将 13 显示为“ProductCount”我有点想我可能需要一种更多的递归方法。我试过了，但没有成功。

我对可以执行我正在寻找的存储过程持开放态度。我没有设置在一种特定的方式上。因此，任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T21:19:02.263

*编辑*好的，实际上已经阅读了要求并认为这实际上很容易（我认为！）

关键是我们需要两件事：类别层次结构和产品数量。层次结构由递归 CTE 完成，计数在此之外完成：

```
-- The CTE returns the cat hierarchy:
-- one row for each ancestor-descendant relationship
-- (including the self-relationship for each category)
WITH CategoryHierarchy AS (
    -- Anchor member: self relationship for each category
    SELECT CategoryID AS Ancestor, CategoryID AS Descendant
    FROM Categories
UNION ALL
    -- Recursive member: for each row, select the children
    SELECT ParentCategory.Ancestor, Children.CategoryID
    FROM 
        CategoryHierarchy AS ParentCategory
        INNER JOIN Categories_XREF AS Children
        ON ParentCategory.Descendant = Children.ParentID
)
SELECT CH.Ancestor, COUNT(ProductID) AS ProductsInTree
-- outer join to product-categories to include 
-- all categories, even those with no products directly associated
FROM CategoryHierarchy CH
LEFT JOIN Products_Categories_XREF PC
ON CH.Descendant = PC.CategoryID
GROUP BY CH.Ancestor 
```

结果是：

```
Ancestor    ProductsInTree
----------- --------------
942         13
943         13
959         9
960         1
961         3 
```

我非常感谢[不可估量的 Itzik Ben-Gan 的这篇文章](http://www.sqlmag.com/Article/ArticleID/92997/sql_server_92997.html)让我开始思考。强烈推荐他的书“MS SQL Server 2005 内部：T-SQL 查询”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T21:15:48.570

您的 WHERE 语句将结果限制为一个父级。如果您想查看所有低于 942 的孩子，请将 942 指定为 CTE 中的根。例如：

```
WITH CTE (CategoryID, ParentID, [Name], [Level])
AS
(
  SELECT C.CategoryID, CXR.ParentID, C.Name, 0 AS Level
  FROM Categories C
  INNER JOIN Categories_XRef CXR ON C.CategoryID = CXR.CategoryID 
  WHERE CXR.CategoryID = 943
  UNION ALL
  SELECT C.CategoryID, CXR.ParentID, C.Name, Level + 1
  FROM Categories C
  INNER JOIN Categories_XRef CXR ON C.CategoryID = CXR.CategoryID 
  INNER JOIN CTE PC ON PC.CategoryID = CXR.ParentID
)
SELECT * FROM CTE 
```

顺便说一句，类别可以有多个父项吗？如果不是，请考虑删除 Categories_XREF 表并将 ParentID 存储在 Categories 表中。

# asp.net-mvc - Passing variable to Ajax.ActionLink OnSuccess, OnComplete, OnFailure, etc

> ID：1003901
> 
> 赞同：3
> 
> 时间：2009-06-16T20:57:16.347
> 
> 标签：asp.net-mvc, asp.net-ajax

I'd like to put a div on my master page that I can update from anywhere in my site with updates. i.e. "recorded updated", "there was an error", etc.

I'm going to style the div differently depending on the type of update. "fail", "success", "info". Basic stuff so far.

So I have several ActionLinks throughout the site and they display their content fine in the updateTarget and I can even have them run fine when I pass OnComplete, OnBegin, etc. functions to them. However, I'd like to be able to send a parameter to that OnBegin function.

Example: .OnBegin="someFunction('fail');"

Any ideas on how to accomplish what I'm doing here?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T21:29:21.837

```
 <% string message = "failed"; %>
        <%=Ajax.ActionLink("TestController","TestAction",
new AjaxOptions{OnBegin="myFunction('" + message + "')"}) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-25T13:49:57.500

您可以创建一个匿名函数，然后使用您的参数调用您的函数

```
<%: Ajax.ActionLink("Text", "ActionName", new { id = item.id }, new AjaxOptions { HttpMethod = "Post", OnComplete = "function(){myFunction(" + item.id.ToString() + ");}" })%> 
```

剧本：

```
 <script type="text/javascript">
    function onDelete(id) {
        alert("hello "+id);
    }
</script> 
```

# excel - MS-Excel：如何在锁定单元格内显示组合框的值

> ID：1003903
> 
> 赞同：0
> 
> 时间：2009-06-16T20:57:29.030
> 
> 标签：excel, vba

**背景详细信息** 我有一个带有 Activex 下拉（组合框）对象的 excel 电子表格，可以帮助用户了解可用的选项。我这样做是因为数据验证列表下拉菜单的字体太小，并且收集了很多投诉。

所以我的解决方案是添加组合框对象，允许用户从一系列选项中进行选择。但是，我必须将组合框链接到具有linkedcell 属性的单元格，以便用户和各种公式都可以看到已选择的内容。我还将组合框设置为在不使用时消失（与数据验证下拉按钮仅在您选择相关单元格时出现的方式非常相似）。

**这是问题所在：** 我不希望用户编辑链接单元格中的值，因此我确保在未选择组合框时锁定链接单元格：

```
Private Sub comboBox1_GotFocus()
    Call unlockComboBoxTargetCell(comboBox1)
End Sub 
```

上面的过程是这样做的：

```
 If (targetComboBox.LinkedCell <> "") Then
        Dim targetCell As Variant
        Set targetCell = Range(targetComboBox.LinkedCell)
        If Not targetCell Is Nothing And targetCell.Locked <> False Then
            unlockSheet (activesheet.Name)
            targetCell.MergeArea.Locked = False
            lockSheet (activesheet.Name)
        End If
    End If 
```

存在用于锁定目标单元的等效程序。但是，每当您在工作簿上执行“另存为”操作时，链接和锁定的单元格似乎会产生问题：Excel 突然出现此错误：“您尝试更改的单元格或图表受到保护，因此只读...”对于每个锁定的单元格并且是组合框的链接单元格，此错误大约出现两次或三次。

有什么好的方法可以克服这个问题吗？现在我最好的解决方案是让单元格解锁并在单元格上放置数据验证，这样如果用户编辑单元格，他们至少会在输入无效内容时被拒绝。我可以确保无论何时选择组合框都会覆盖链接的单元格，但有时这意味着有一个非常大、令人讨厌的组合框，右侧有一个非常小的下拉按钮。

也许我对用户界面有点过于挑剔了？

提前感谢您阅读这篇冗长且涉及内容的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T15:52:40.143

在您创建的“lockSheet”过程中，“保护”工作表的代码需要一个附加参数`UserInterfaceOnly`，设置为 true。

我想 LockSheet sub 是这样的；

```
sub lockSheet(strSheetName as string)

    thisworkbook.sheets(strSheetName).Protect

end sub 
```

试试这个：

```
sub lockSheet(strSheetName as string)

    thisworkbook.sheets(strSheetName).Protect, UserInterfaceOnly=True

end sub 
```

`UserInterfaceOnly`允许对受保护的工作表进行编程更改。

账单

# c++ - “智能”链接滚动条和编辑控件？

> ID：1003905
> 
> 赞同：2
> 
> 时间：2009-06-16T20:58:10.433
> 
> 标签：c++, visual-studio-2008, visual-c++, mfc

我希望我能很好地解释我的问题，以便有人提供帮助。

基本上，我有一个水平滚动条（范围为 0 到 1000）和一个编辑控件，它表示滚动条的位置除以 1000，以便用户可以使用滚动条选择 0 到 1 之间的数字范围，最多3 位小数精度（.001、.002、...、.987 等），或在编辑框中输入自己的数字。当他们滚动滚动条时，编辑控件中的数字会更改以反映新的滚动位置。当输入一个新数字时，滚动条会将自身设置到一个反映输入数字的新位置。同时，我还会在这个数字发生变化时（通过滚动条或编辑控件）执行一些计算，并在另一个对话框中显示结果。

这是我的问题：当用户在编辑控件中输入数字时，我无法确定使用哪些事件处理程序来产生正确的行为。

我使用一个名为fuelMargin 的双值变量来处理我的编辑控件，并使用一个名为fuelScroll 的CScrollBar 控件变量来处理滚动条。

在我的 HSCROLL 事件中，我将编辑控件设置为滚动位置 / 1000。那里没有问题；当用户滚动滚动条时，编辑框会正确更新。

至于编辑框，我的第一次尝试是 ONCHANGE 事件：

```
void MarginDlg::OnEnChangeFueledit()
{
    CEdit* editBox;
    editBox = (CEdit*)GetDlgItem(IDC_FUELEDIT);

    CString editString;
    editBox->GetWindowText(editString);

    if (editString.Compare(".") != 0 && editString.Compare("0.") != 0
        && editString.Compare(".0") != 0 && editString.Compare("0.0") != 0
        && editString.Compare(".00") != 0 && editString.Compare("0.00") != 0)
    {
        UpdateData();
        UpdateData(FALSE);

        if (fuelMargin > 1)
        {
            UpdateData();
            fuelMargin = 1;
            UpdateData(FALSE);
        }
        if (fuelMargin < 0)
        {
            UpdateData();
            fuelMargin = 0;
            UpdateData(FALSE);
        }
        fuelScroll.SetScrollPos(int(fuelMargin*1000));
    }
} 
```

当用户尝试输入像 .5 或 .05 或 .005 这样的数字时，我需要其中的第一个 if 语句以防止执行 UpdateData()。不过，它确实会产生一些不稳定的行为。当用户尝试输入 .56 之类的内容时，在 .5 执行 UpdateData() 之后，数字变为 0.5，并且光标移动到最左侧，因此如果他们尝试输入 .56，他们会意外结束输入 60.5 - 即 1，因为我不会让他们输入小于 0 或大于 1 的数字。但是，如果他们输入 0.56，则可以避免这种行为。

对于我的第二次尝试，我注释掉了我的 ONCHANGE 事件并改为放入了 ONKILLFOCUS 事件：

```
void MarginDlg::OnEnKillfocusFueledit()
{
    UpdateData();
    UpdateData(FALSE);

    if (fuelMargin > 1)
    {
        UpdateData();
        fuelMargin = 1;
        UpdateData(FALSE);
    }
    if (fuelMargin < 0)
    {
        UpdateData();
        fuelMargin = 0;
        UpdateData(FALSE);
    }
    fuelScroll.SetScrollPos(int(fuelMargin*1000));
} 
```

所以现在用户可以完成输入他们的号码，一切都很好——只要他们点击编辑框。在框失去焦点之前，滚动条不会移动，也不会计算结果。

我希望在输入框中的数字时计算结果；我希望滚动条在输入数字时移动。但我不希望打字被打乱，即框中的实际数字改变或光标以任何方式移动。

建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T06:48:32.957

使用第一种方法，您似乎就快到了：唯一真正重要的问题是，在用户键入时重复调用 UpdateData() 会弄乱光标位置。

鉴于您试图在控件之间进行相当复杂的交互，我建议根本不要在 OnChange() 中进行验证，以便在用户键入时他可以键入他想要的内容（即大多数数字编辑控件如何工作）。当用户关闭控件打开的对话框（或单击以某种方式使用数据的按钮）时，应触发验证，并显示适当的错误。

一旦您从 OnChange() 中的验证中解放出来，您可以通过简单地不在 OnChange() 中调用 UpdateData() 来解决“光标移动”问题。相反，只需解析“editString”中的数字，如果它在有效范围内，则更新滚动条。这样，滚动条会随着用户输入而更新，如果他们输入了无效值，滚动条就会保持原样，并且当他们移动到下一阶段时会出现错误。像这样的东西（未经测试）：

```
void MarginDlg::OnEnChangeFueledit()
{
  CString editString;
  GetDlgItem(IDC_FUELEDIT)->GetWindowText(editString);

  double editValue;
  if ((sscanf(editString,"%lf",&editValue) == 1)
  {
    if (editValue >= 0.0) && (editValue <= 1.0))
      fuelScroll.SetScrollPos(int(editValue*1000));
  }
} 
```

唯一需要注意的重要问题是，如果用户键入了一些无效值，或者超出了有效范围的数字，那么编辑控件和滚动条将不同步。最简单的处理方法是只决定编辑控件是“主”值：也就是说，当我们想知道用户输入了什么时，我们总是查看编辑控件，而不是滚动条，并验证数据.

至于您的第二种方法，一种可能的解决方案可能是实现计时器消息处理程序：在计时器处理程序中，您可以说相当于“如果用户一秒钟内没有键入任何内容，我会假设他们已经完成，并解析数字并更新滚动条”。不过，我并不热衷于将其作为解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T21:17:14.433

我建议注意 Enter 键，然后执行 UpdateData() 以及 OnKillFocus 和 OnChange。用户越友好越好。

接下来，确保您的 UpdateData() 例程仅在您需要的方向上工作：

如果在编辑控件中输入“.5”，则在引发 OnChange 事件时运行 UpdateData() 例程，但请确保仅更新滚动条。在引发 OnKillFocus 之前，不要担心将编辑控件更新为“0.5”。任何反向（对编辑控件）的更新都会弄乱您的光标。如果您的编辑控件以某种方式绑定到此双精度变量并在 var 更改时自动更新，请考虑将双精度控件和您的编辑控件彼此分开，直到引发 OnKillFocus 事件。

同样的概念也适用于另一个方向。当用户滚动时，不要弄乱滚动条。只需更新编辑控件并保留它。

我应该补充一点，如果您知道如何正确使用它们，XAML 的数据绑定功能在这种情况下确实很有帮助。不幸的是，我们原生类型的开发人员很难仅使用事件处理程序来实现类似的功能。

# entity-framework - Entity Framework and Entity Tracker Problems

> ID：1003906
> 
> 赞同：0
> 
> 时间：2009-06-16T20:58:25.750
> 
> 标签：entity-framework

If I run the following code it throws the following error:

An entity object cannot be referenced by multiple instances of IEntityChangeTracker

```
 public void Save(Category category)
        {
            using(var db = new NorthwindContext())
            {
                if(category.CategoryID == 0) 
                {
                    db.AddToCategorySet(category); 
                }

                else
                {
                    //category.RemoveTracker();
                    db.Attach(category);
                }

                db.SaveChanges(); 
            }
        } 
```

The reason is of course that the category is sent from interface which we got from GetById method which already attached the EntityChangeTracker to the category object. I also tried to set the entity tracker to null but it did not update the category object.

```
 protected void Btn_Update_Category_Click(object sender, EventArgs e)
        {
            _categoryRepository = new CategoryRepository();
            int categoryId = Int32.Parse(txtCategoryId.Text);

            var category = _categoryRepository.GetById(categoryId);

            category.CategoryName = txtUpdateCategoryName.Text; 

            _categoryRepository.Save(category);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T21:21:41.693

我自己还在学习实体框架，但也许我可以提供一点帮助。使用实体框架时，您需要了解如何处理不同的上下文。看起来您正在尝试通过以下方式尽可能本地化您的上下文：

```
public void Save(Category category)
{
    using (var db = new NorthwindContext())
    {
        ...
    }
} 
```

...在您的数据访问方法中。你在你的`GetById`方法中做了同样的事情吗？如果是这样，您是否记得分离您返回的对象，以便稍后在不同的上下文中附加它？

```
public Category GetById(int categoryId)
{
    using (var db = new NorthwindContext())
    {
        Category category = (from c in db.Category where Category.ID == categoryId select c).First();
        db.Detach(category);
    }
} 
```

这样，当您调用`Attach`它时，它不会试图踩到已经附加的上下文。这有帮助吗？

正如您在评论中指出的那样，当您尝试修改项目然后告诉您的数据库层保存它时，这会带来问题，因为一旦项目与其上下文分离，它就不再跟踪更改被做了。我可以想到几种方法来解决这个问题，但没有一个是完美的。

1.  如果你的架构支持它，你可以扩展你的上下文范围，让你的 Save 方法可以使用你的 GetById 方法使用的相同上下文。这有助于完全避免整个附加/分离问题，但它可能会使您的数据层比您想要的更接近您的业务逻辑。
2.  您可以根据 ID 从新上下文中加载项目的新实例，根据传入的类别设置其所有属性，然后保存它。这需要两次数据库往返，而实际上只需要一次，而且它不是很容易维护。
3.  您可以深入研究上下文本身以将类别的属性标记为已更改。

例如：

```
public void Save(Category category)
{
    using (var db = new NorthwindContext())
    {
        db.Attach(category);
        var stateEntry = db.ObjectStateManager.GetObjectStateEntry(category);
        foreach (var propertyName in stateEntry.CurrentValues.DataRecordInfo.FieldMetadata.Select(fm => fm.FieldType.Name)) {
            stateEntry.SetModifiedProperty(propertyName);
        }
        db.SaveChanges();
    }
} 
```

这看起来有点难看，但总体上应该更具性能和可维护性。另外，如果你愿意，你可以让它足够通用，以便在某个地方放入一个扩展方法，这样你就不必看到或重复丑陋的代码，但你仍然可以从中获得功能。

# crystal-reports - 将 Crystal Report 详细信息部分打印到已整理的第二页

> ID：1003909
> 
> 赞同：2
> 
> 时间：2009-06-16T20:58:56.937
> 
> 标签：crystal-reports, reporting

我有一份 Crystal XI Release 2 报告，我的客户希望在两页上看到它。他希望报告在第一页上打印一个人的人口统计信息，例如（姓名、地址等），在第二页上打印该人的总数。第一页将包含尽可能多的行，第二页将具有相同数量的行，这些行对应于第一页。然后第三页将包含一个从第一页结束的人开始的新页面。

他基本上是在寻找类似于 Excel 打印方式的打印（**请不要告诉我导出到 Excel 并从那里打印**）。

我想出了两个这样做的想法，但只有一个。第一个是运行两个报告（一个用于人口统计信息，另一个用于总数），它们将以某种方式整理在一起。我对此并没有走得太远，但我没有花大量时间研究这个，所以我仍然认为这可能是一个选择。

第二种方法是将报表设计扩展到两个横向页面的宽度，添加我的字段，然后在我准备打印之前将我的页面大小更改回单个横向大小。这种方式可以正常工作，但可能会导致一些奇怪的问题。一个是，如果您在报告大小设置为单页横向时尝试在第二页上编辑/添加字段，则字段将移动到第一页的最右侧，这是有道理的，因为我认为应该这样做是设计师的可编辑区域，所以我假设你不应该在这个区域之外有字段。

总而言之，第二种方法有效，但我知道必须有更好的方法来做到这一点。我想看看是否有人有类似的要求或对更好的方法有其他想法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T21:26:08.677

我想不出在 Crystal 中执行此操作的简单方法。

您可以在数据源上获得所有 hacky，并每 20 行（或许多适合一页）复制一次。然后，您将设置 2 个详细信息部分，一个用于人口统计数据，另一个用于总计。然后根据余数（页码，2）有条件地抑制它们。

或者，您可以使用接受分页参数并且每页仅返回 20 行的子报表。但我什至不确定您是否可以将子报表参数链接到 pagenumber 特殊字段。

你的第二种方法是如何工作的？额外的字段只是以某种方式打印在下一页上？但是，问题是当您返回一页时，这些字段会留在设计器之外，如果您需要编辑它们，它们都将移回设计器内部吗？你不能在编辑之前增加页面宽度吗？如果它每次都能正确打印出来，那还不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-19T13:17:44.840

我想我会将其标记为答案，因为我仍然无法找到更好的解决方法。如果有人找到更好的方法，然后发布回复，如果可行，我认为可以切换答案。

我要做的就是将我的打印机设置为“Microsoft Office Document Image Writer”，然后将宽度更改为允许的最宽，即 36“。然后我将本节开头的人口统计信息放入大约 11" 并将总数放在第一部分结束的右侧，然后再换一个页面宽度。

然后我进行任何我需要做的更改，并将打印机设置回我想要用于正确尺寸的打印机。这样做之后你会发现可编辑区域只延伸到了第一页，但是你可以在右边看到第二页的字段。如果您尝试编辑第二页上的字段，该字段将移动到第一页最右侧的可编辑区域的最右侧，因此请确保在进行编辑之前重置您的打印机。

我想我还必须在部分专家的布局选项卡上调整详细部分的宽度，才能正确打印报告。我将它设置为 2 页的组合大小，以便我的看起来正确。

我认为这可能是一个非常罕见的问题，但如果你有类似的问题，我就是这样解决它的。

# c# - 在 C# 字符串对象之间共享字符缓冲区

> ID：1003915
> 
> 赞同：3
> 
> 时间：2009-06-16T21:00:55.763
> 
> 标签：c#, parsing, memory-management, substring

这可能吗？鉴于 C# 使用不可变字符串，可以预期会有一种方法如下：

```
var expensive = ReadHugeStringFromAFile();
var cheap = expensive.SharedSubstring(1); 
```

如果没有这样的功能，为什么还要让字符串不可变呢？或者，如果字符串由于其他原因已经是不可变的，为什么不提供这种方法呢？

我正在调查的具体原因是进行一些文件解析。简单的递归下降解析器（例如由 TinyPG 生成的解析器，或易于手工编写的解析器）到处都使用 Substring。这意味着如果你给他们一个大文件来解析，内存流失是难以置信的。当然有变通办法——基本上是滚动您自己的 SubString 类，然后当然忘记能够使用诸如 StartsWith 之类的 String 方法或诸如 Regex 之类的 String 库，因此您也需要滚动您自己的版本。我假设像 ANTLR 这样的解析器生成器基本上可以做到这一点，但我的格式很简单，无法证明使用这种怪物工具是合理的。即使是 TinyPG 也可能是矫枉过正。

有人请告诉我，我在某处遗漏了一些明显或不那么明显的标准 C# 方法调用......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T21:10:37.100

不，没有那样的。

.NET 字符串直接包含它们的文本数据，这与 Java 字符串不同，Java 字符串具有对 char 数组、偏移量和长度的引用。

两种解决方案在某些情况下都有“胜利”，而在其他情况下则有损失。

如果您绝对*确定*这将成为您的杀手锏，您可以实现一个 Java 风格的字符串以在您自己的内部 API 中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T21:13:00.230

据我所知，所有较大的解析器都使用流进行解析。不适合你的情况吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T21:11:02.793

.NET 框架支持[字符串实习](http://en.wikipedia.org/wiki/String_intern_pool)。这是一个部分解决方案，但不提供重用字符串部分的可能性。我认为重用子字符串会导致一些乍一看并不明显的问题。[如果您必须使用StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)进行大量字符串操作，那么您可以这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T21:15:49.087

C# 中没有任何东西可以为您提供您正在寻找的开箱即用的功能。

想要的是一个[绳索数据结构](http://en.wikipedia.org/wiki/Rope_(computer_science))，一个不可变的数据结构，它支持 O(1) 连接和 O(log n) 子串。我找不到绳索的任何 C# 实现，但[这里是 Java 的](http://ahmadsoft.org/ropes/)。

除此之外，如果使用 TinyPG 或 ANTLR 是完成工作的最简单方法，那也没有任何问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-16T21:15:51.863

好吧，您可以使用“不安全”来自己进行内存管理，这可能使您可以做您正在寻找的事情。此外，StringBuilder 类非常适合需要多次操作字符串的情况，因为它不会在每次操作时创建一个新字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T21:16:38.927

您可以轻松编写一个简单的类来表示“便宜”。它只保存子字符串开头的索引和子字符串的长度。有几种方法可以让您在需要时读取子字符串 - 字符串转换运算符将是您可以使用的理想选择

```
string text = myCheapObject; 
```

它可以无缝地工作，就好像它是一个实际的字符串一样。添加对 StartsWith 等一些方便的方法的支持将是快速和容易的（它们都是一个衬垫）。

另一种选择是编写一个常规解析器并将您的标记存储在字典中，您可以从中共享对标记的引用，而不是保留多个副本。

# bison - PHP 中的类似 Flex/Bison 的功能

> ID：1003923
> 
> 赞同：12
> 
> 时间：2009-06-16T21:03:19.657
> 
> 标签：bison, flex-lexer

我正在寻找一种在 PHP 中获得 Flex/Bison（或 Lex/Yacc 等）支持的方法。具体来说，我在 Web UI 中实现了一个布尔查询解析器，并且宁愿将所有操作保留在 PHP 中（而不是调用 C 解析器，或者将事情传递给 Python 等）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-16T21:09:29.690

[PHP 的LIME](http://sourceforge.net/projects/lime-php/)解析器生成器：

> 完整的 LALR(1) 解析器生成器和引擎（如 BISON 或 YACC），但都是在 PHP 中完成的，并且输入语法更容易且更易于维护。用 PHP 编写您的操作。生成 PHP 输出代码。用 PHP 驱动你的解析器。想做语言？

* * *

更新：

由于我写了上面的内容，我看到还有一些其他的解析器生成工具，在这里宣布：

[http://wezfurlong.org/blog/2006/nov/parser-and-lexer-generators-for-php/](http://wezfurlong.org/blog/2006/nov/parser-and-lexer-generators-for-php/)

不确定这些在 2014 年现在是否得到更好的维护，但我知道 Wez Furlong，他是 PDO 的原始开发人员，他是一个非常优秀的开发人员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-07-02T15:43:44.867

PEAR 库具有[LexerGenerator](http://pear.php.net/package/PHP_LexerGenerator)和[ParserGenerator](http://pear.php.net/package/PHP_ParserGenerator)类。LexerGenerator 语法与[re2c](http://re2c.org/)兼容，ParserGenerator 语法与[Lemon Parser 生成器](http://www.hwaci.com/sw/lemon/lemon.html)兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T11:48:24.467

您是否尝试过查看 PHP 中的 PEG 解析器生成器：[https](https://github.com/maetl/php-peg) ://github.com/maetl/php-peg ？

还是解析器组合器方法：http: [//qntm.org/locoparser](http://qntm.org/locoparser)？

# java - 您可以将 Java 集合编程为接口并使用 Serializable 吗？

> ID：1003926
> 
> 赞同：4
> 
> 时间：2009-06-16T21:03:51.917
> 
> 标签：java, serialization, collections, interface, javabeans

我已经完成了所有域级逻辑并将其编程为接口。现在我发现当我想将数据放入一个 bean 中时，这个 bean 不起作用，因为 Collection 接口（Collection、List、Set 等）没有实现 Serializable。

我是否需要重构所有代码以使用具体类型，或者这里有更好的行动方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-16T21:43:25.067

如果您的类实现`Serializable`并且其所有成员都是可序列化的，则可以正确序列化该对象。例子：

```
public class Person implements Serializable {
    private String name;
    private Collection<Integer> luckyNumbers = new ArrayList<Integer>();
} 
```

只要`luckyNumbers`' 的实例是可序列化的（例如`ArrayList`），并且其成员是可序列化的（在本例中为`Integer`s），那么对象就会序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T22:08:17.077

`Serializable`是一个“标记”界面。不适合用作引用的类型。使用一些动态类型（尽管没有什么可以阻止您使用外部静态类型检查器）。

你可以用奇怪的参数化泛型方法跳过箍，但这会非常难看，Java 库不会这样做，所以无论如何你都会被淹没。

# apache-flex - Digital Rights Management in Adobe Flex

> ID：1003937
> 
> 赞同：0
> 
> 时间：2009-06-16T21:07:10.477
> 
> 标签：apache-flex, adobe, drm

I have a NetStream set up and it's supposed to listen for DRMAuthenticateEvent.DRM_Authenticate. When I give it an encrypted file (encrypted using software from drm-x.com), no DRMAuthenticateEvenet seems to be dispatched. The code looks like this:

```
 private function init():void
{
nc = new NetConnection();
nc.connect(null);

ns = new NetStream(nc);
ns.addEventListener(DRMAuthenticateEvent.DRM_AUTHENTICATE, DRMAuthHandler);
ns.play("phone_P.flv");
video = new Video();
video.attachNetStream(ns);
...} 
```

I am trying to use the setDRMAuthenticationCredentials function as follows:

```
private function DRMAuthHandler(event:DRMAuthenticationEvent):void
{
ns.setDRMAuthenticationCredentials("testuser", "test", "proxy");
ns.setDRMAuthenticationCredentials("testuser", "test", "drm");
label2.text = "authentication event dispatched!";          //for debugging
} 
```

I have both proxy and drm authentication types in there because drm was not working for me so I decided to try proxy.
Am I doing something wrong? I got this stuff off of the Adobe reference pages, is there an easier/smarter way of going about DRM in Flex?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-22T03:15:02.843

在 Flex（更具体地说是 AIR）中使用 DRM 时，您必须使用 Flash Digital Rights Management Server。这是 AIR 中唯一支持 DRM 的系统。

# iphone - iPhone SDK: After invalidating a Timer, how can I use it again?

> ID：1003939
> 
> 赞同：2
> 
> 时间：2009-06-16T21:08:45.277
> 
> 标签：iphone, cocoa, cocoa-touch

I have set up an animation in Xcode using an NSTimer, and It kept repeating over and over, so i used this command:

```
else if(gordon.image == pigImage11)
    [animationTimer invalidate]; 
```

So, when gordon (a UIImageView) image is set to pigImage11, The timer invalidates, this gave the desired effect of stopping the animation constantly repeating, But stopped the timer being used again, so how would I make the timer usable again, But have it invalidate itself on that frame? For the sake of further clarification here's my entire code:

```
- (IBAction)startClick:(id)sender{
    animationTimer = [NSTimer scheduledTimerWithTimeInterval:(1.00/30.00) target:self selector:@selector(tick) userInfo:nil repeats:YES];
}
- (void)tick{
    [self animatePig];
}
- (void)animatePig{
    UIImage *pigImage1=[UIImage imageNamed:@"gordonapple0004.png"];
    UIImage *pigImage2=[UIImage imageNamed:@"gordonapple0005.png"];
    UIImage *pigImage3=[UIImage imageNamed:@"gordonapple0006.png"];
    UIImage *pigImage4=[UIImage imageNamed:@"gordonapple0007.png"];
    UIImage *pigImage5=[UIImage imageNamed:@"gordonapple0008.png"];
    UIImage *pigImage6=[UIImage imageNamed:@"gordonapple0009.png"];
    UIImage *pigImage7=[UIImage imageNamed:@"gordonapple0010.png"];
    UIImage *pigImage8=[UIImage imageNamed:@"gordonapple0011.png"];
    UIImage *pigImage9=[UIImage imageNamed:@"gordonapple0012.png"];
    UIImage *pigImage10=[UIImage imageNamed:@"gordonapple0013.png"];
    UIImage *pigImage11=[UIImage imageNamed:@"gordonapple0014.png"];
    UIImage *pigImage12=[UIImage imageNamed:@"gordonapple0015.png"];
    UIImage *pigImage13=[UIImage imageNamed:@"gordonapple0016.png"];

    if(gordon.image == pigImage1)
        gordon.image = pigImage2;
    else if(gordon.image == pigImage2)
        gordon.image = pigImage3;
    else if(gordon.image == pigImage3)
        gordon.image = pigImage4;
    else if(gordon.image == pigImage4)
        gordon.image = pigImage5;
    else if(gordon.image == pigImage5)
        gordon.image = pigImage6;
    else if(gordon.image == pigImage6)
        gordon.image = pigImage7;
    else if(gordon.image == pigImage7)
        gordon.image = pigImage8;
    else if(gordon.image == pigImage8)
        gordon.image = pigImage9;
    else if(gordon.image == pigImage9)
        gordon.image = pigImage10;
    else if(gordon.image == pigImage10)
        gordon.image = pigImage11;
    else if(gordon.image == pigImage11)
        [animationTimer invalidate];
    else
        gordon.image = pigImage1;
}

- (void)stopTimer
{
    [animationTimer invalidate];
    [animationTimer release];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-03-09T13:27:43.677

您可以像这样重用计时器：

```
- (void) startTimer {
    if ( myTimer == nil ) {
        myTimer = [NSTimer scheduledTimerWithTimeInterval: 5.0f
                   target: self
                   selector: @selector(myTimerAction:)
                   userInfo: nil
                   repeats: NO];
    }
}

- (void) stopTimer {
    if ( myTimer || [myTimer isValid])
    {
        [myTimer invalidate];
        myTimer = nil;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T22:33:28.273

```
[[NSRunLoop currentRunLoop] addTimer:animationTimer
                             forMode:NSDefaultRunLoopMode]; 
```

但是你当然不能在失效后释放定时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T21:13:30.417

How about not invalidating the timer and just setting a "don't animate" flag instead?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T00:38:40.067

为什么不使用 UIImageView 的内置动画：

```
UIImageView* gordonView = [[UIImage alloc]init];
gordonview.animationImages = [NSArray arrayWithObjects: pigImage1, pigimage2, etc., nil];
gordonView.animationDuration = 0.5f; // about 30fps with your 13 images. 
//Set gordon's frame here
[gordonView startAnimating]; 
```

披露，我将它输入 SO，而不是 Xcode 我确定它不会编译，但至少你知道在 SDK 中寻找什么。

# css - 基于表单内容即时更新css属性的方法？

> ID：1003941
> 
> 赞同：0
> 
> 时间：2009-06-16T21:08:59.567
> 
> 标签：css

我在网站上有一个表格，其中一个输入用于输入要输入数据库的十六进制颜色代码。

页面是否有任何方法可以动态更新自身，以便如果用户将值从“000000”更改为“ffffff”，输入框的“color”CSS 属性将立即更改，而无需重新加载页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T21:11:18.330

不是没有Javascript。

但是，使用 Javascript...

```
<input type='text' name='color' id='color'> 
```

进而：

```
var color = document.getElementById('color');
color.onchange = function() {
    color.style.color = '#' + this.value;
} 
```

不过，如果你打算走 Javascript 路线，你不妨全力以赴，给他们一个颜色选择器。[有很多好的](http://www.google.com/search?q=javascript+color+picker)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T21:12:29.343

CSS 属性在 HTML DOM 中有对应的条目，可以通过 Javascript 进行修改。

[这个列表](http://codepunk.hardwar.org.uk/css2js.htm)有些过时，但它为您提供了一些常见的 CSS 片段及其对应的 DOM 属性名称。

诚然，像[jQuery](http://www.jquery.com/)这样的 JS 库使这更容易......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T21:14:46.403

您可以使用 Javascript 来实现这一点。

举个例子：

您的 HTML：

```
<input type="text" id="test" /> 
```

你的 JS：

```
var test = document.getElementById('test');
test.onchange = function(){
    test.style.color = this.value;
}; 
```

但这不会检查用户的输入（因此您必须扩展它）。

# debugging - 什么调试器可以在 Windows 上与 D 2.0 一起使用，我如何使用它？

> ID：1003948
> 
> 赞同：12
> 
> 时间：2009-06-16T21:10:36.100
> 
> 标签：debugging, d

今天我一直在玩 D 2.0，主要是因为 DDJ 中的“The Case for D”。

我已经为 Windows 下载了 D 2.0，但还没有弄清楚如何在调试器中单步执行正在运行的程序。

我试图让附带的 windbg.exe 副本正常工作，但它一直在我身上崩溃，而且似乎看不到源代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-16T21:21:01.570

有一个专门为 D 编写的 Windows 调试器：

[http://ddbg.mainia.de/](http://ddbg.mainia.de/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-17T00:36:45.513

使用此工具在 Visual Studio 2008 Express 中进行调试对我来说就像是一种魅力： [http ://www.dsource.org/projects/cv2pdb](http://www.dsource.org/projects/cv2pdb)

您也可以使用 windbg 4 或 msvc 6，但是您不会轻易看到特殊 D 类型（如动态数组和散列）的值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-01-29T20:08:20.317

你见过[视觉D](http://www.dsource.org/projects/visuald "Visual D Trac 主页")吗？

> Visual D 是一个提供项目管理和语言服务的 Visual Studio 包。它适用于 Visual Studio 2005、2008 和 2010 以及免费的 Visual Studio Shell。

它是开源的（Artistic License 2.0），用 D 本身编写，通过与上述`cv2pdb`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-04-01T00:04:18.463

有一个名为 Mago 的 Windows 调试器：[http ://www.reddit.com/r/programming/comments/gfp48/mago_a_windows_debugger_for_the_d_programming/](http://www.reddit.com/r/programming/comments/gfp48/mago_a_windows_debugger_for_the_d_programming/)

# asp.net - 我可以在 MSVS 中重写 URL 吗？

> ID：1003955
> 
> 赞同：0
> 
> 时间：2009-06-16T21:11:38.470
> 
> 标签：asp.net, visual-studio-2008, url-rewriting

我正在使用 MSVS 2008、C#、ASP.NET 项目。现在我可以在[http://localhost:3288/ExistingPageInProject.aspx下提供我想要的任何页面](http://localhost:3288/ExistingPageInProject.aspx)

在 MSVS 中，我如何将[http://localhost:3288/u/SOME_USER_NAME/media/TITLE-0123 映射](http://localhost:3288/u/SOME_USER_NAME/media/TITLE-0123)到我拥有的文件/页面。如 /u/ExamplePage?name=SOME_USER_NAME&title=TITLE-0123

注意：0123 是 mediaId，因此可以忽略标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T05:25:27.957

我个人这样做的方法是在公共类 Global 中使用 Application_BeginRequest ： System.Web.HttpApplication 并使用 Regex 或其他方式解析 URL，然后使用 HttpContext.Current.RewritePath 来提供正确的页面而不进行重定向。

还有其他方法可以做到这一点，但这是我的偏好并且易于实施。

# c++ - 浏览器帮助对象 UI

> ID：1003956
> 
> 赞同：1
> 
> 时间：2009-06-16T21:11:43.913
> 
> 标签：c++, internet-explorer, plugins, user-interface, bho

我是一个致力于开发 IE 扩展程序的新手，该扩展程序将在某些网页中显示为覆盖。我开始在 VS2008（使用 C++）中创建一个简单的 BHO，但我想知道如何将 UI 合并到项目中。有任何想法吗？只是为了给您一个想法，我正在寻找类似于stickis [http://www.stickis.com/faq/开发的叠加层](http://www.stickis.com/faq/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T17:19:59.007

你有两个真正的选择：

1> 将您的 UI 作为 HTML 注入页面。2> 在页面顶部覆盖您的 UI（使用 Windows 图形 API）。

恐怕这些都不是超级简单的。不幸的是，做 UI 通常是构建 IE 插件最难的部分。

关键问题是您是否需要 BHO。在上下文菜单扩展和 IE8 加速器之间，您可能会发现您可以让 IE 完成所有繁重的工作。有关详细信息，请参阅 www.enhanceie.com/ie/dev.asp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-08T22:27:53.747

使用 CreateWINdowEx() 是我一直在寻找的 :)

# java - Allow logout while multiple large files are uploaded

> ID：1003960
> 
> 赞同：0
> 
> 时间：2009-06-16T21:12:48.390
> 
> 标签：java, security, file-upload

I have been asked to implement a file upload program. The program is a Java Web Start application responsible for uploading the contents of a CD to a web application. There are two requirements here:

1.  The uploader should operate in the background with minimal interaction (No rich GUI).
2.  Users may not want to watch the file being uploaded. The user should be able to log out from the system while the uploader is still running. The uploader must continue even if the user logs out.

My gut feel is that #2 is insecure at best and impossible at worst. Basically, to implement such a use case you would need to create a new session id for the uploader; independent of the original session, and without the user's password.

Has anyone had a similar use case? If so, what approach did you take?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T21:41:25.477

即使用户注销，我也不确定为什么这很复杂。

会话在登录时开始，分配了会话 ID。

用户开始上传文件名中包含会话 ID 信息的文件。例如 session_id_user_name.DAT

用户注销

文件已完成，主机上的后台进程根据会话 ID 识别信息，将文件移动到位置。

用户稍后重新登录

文件被识别并绑定到帐户。

安全不是问题，因为文件流自启动以来仍在进行中。一旦用户重新登录，会话信息可以被序列化和反序列化。在任何情况下，文件流都可以完全无人看管地运行。

也许我过于简化了这一点，但它似乎很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T23:53:34.197

From a users POV I can't see #2 ever being relevant. A user thinks if they "log out" then any current operations would be canceled, they would then very likely turn their computer off - in which case there is no way your transfer will keep going. Just let them minimize the interface to a small icon on the bottom right (man having a brain fart can't think of what they are called) of the taskbar in Windows.

# c++ - C++, ways to benchmark improvements in cache locality?

> ID：1003965
> 
> 赞同：8
> 
> 时间：2009-06-16T21:13:52.787
> 
> 标签：c++, performance, pointers, caching, benchmarking

I have an implementation of a class X, that has two pointers to two pieces of information. I have written a new implementation, class Y, that has only one pointer to a struct that contains the two pieces of information together as adjacent members. X's and Y's methods usually only need to manipulate one of the pieces of information, but provide a get() method that returns a pointer to the second piece (in this case class X just returns its pointer to that piece and class Y returns the address of the struct's second member). In normal usage, calls to X's and Y's methods will happen interspersed by calls to get() and doing work on that returned second piece.

I expect that in real life situations there should be a performance improvement, now that the two pieces of information are next to one another in memory in the class Y implementation (because they are adjacent members of a struct), but I'm not seeing any difference in the benchmarks I've written (interspersing calls to X's and Y's methods with doing work on their second pieces in big loops). I suspect this is because everything fits in cache in either case in my tests. I don't want to try this in my real app yet because the semantics of X and Y differ in other subtle ways not related to this optimization and porting the using application will be some work, and these benchmarks are supposed to help justify doing that work in the first place.

What's the best way to observe the difference in performance due to better cache locality? If I do a bunch of dummy work on an array equal to the size of the cache in between calls is that sufficient? Or do I want to do work on an array slightly less than the cache size, so that work on my instances of my class will cause things to fall in and out of cache? I'm not sure how to code something that is robust against compiler optimizations and different cache sizes.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-16T22:57:44.747

如果您使用的是 Linux，那么将[Cachegrind](http://valgrind.org/info/tools.html#cachegrind)与[KCacheGrind](http://kcachegrind.sourceforge.net/cgi-bin/show.cgi/KcacheGrindIndex)结合使用可能会更深入地了解缓存的行为方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T00:49:31.837

您可以专门设计一个基准来破坏缓存。例如，分配指向的数据块，以确保它们都位于不同的缓存行上（例如，通过使用自定义内存分配器将分配填充到至少几百字节）。然后反复迭代一些太大的对象，即使 L2 缓存也无法容纳所有内容（非常依赖于平台，因为它取决于缓存中的行数，但是 100 万将涵盖大多数架构并且只需要几百兆 RAM全部的）。

这将为您提供从 X 更改为 Y 所获得的性能增益的上限。但它通过将 X 的性能降低到低于任何可能的实际使用情况来做到这一点。为了证明你的情况，你需要一个下限估计，而不是上限估计。所以我不确定你会取得多大的成就，除非你发现即使是最坏的情况仍然没有显着差异，并且你不需要为优化而烦恼。

即使您的目标不是 X 的理论上的最坏情况性能，任何旨在超过缓存的基准测试也只是选择 X 性能不佳的任意点，并查看 Y 是否更好。操纵基准以使 Y 看起来不错并不遥远。您的代码在不可靠的基准测试中表现如何并不重要，除非可能是出于营销目的的~~谎言~~文学。

观察实际性能差异的最佳方法是衡量您班级的真实客户。您说“X 和 Y 的语义在与此优化无关的其他细微方面有所不同”，在这种情况下，我只能建议您编写一个*仅*在此优化方面与 X 不同的类 Z，并将其用于您的应用程序作为比较。

一旦您的测试试图代表最差的实际使用，那么如果您没有看到任何性能差异，则可能没有性能提升。

综上所述，如果它合乎逻辑（也就是说，它不会使代码变得更令人惊讶），那么我会提倡尽量减少 C++ 中的堆分配数量，这只是作为一个经验法则。它不会使速度或总内存使用量变得更糟，而且它确实会简化您的资源处理。当然，经验法则并不能证明重写工作代码是合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T22:42:38.223

如果我正确地理解了您的情况（如果不是，请纠正我），那么它是一个六分之一，或者六分之一。

在 X 类中，您需要一个指针查找任一信息。在 Y 类中，第一个需要一个查找，第二个需要两个（获取第一个然后偏移）。这是为了另一个内存访问而牺牲“局部性”。不幸的是，编译器仍然非常擅长浪费总线时间在 RAM 中查找单词。

如果可能的话，通过将两条目标信息直接保存在所讨论的类中（即每个都是它自己的类成员），而不是将这些指针用于不必要的间接，您将获得最佳结果。没有看到任何代码，这几乎就是我能说的。

无论如何，通过研究应用程序的算法复杂性，您将获得比在类定义中对两个变量进行微优化所获得的更多性能**。**还有一个好主意是使用分析工具（客观地）查看瓶颈在哪里（gprof 在 *nix 系统上很常见）。您是否有明确的原因要专门增加局部缓存？

# python - 是否有用于上传整个目录（包括子目录）的 python ftp 库？

> ID：1003968
> 
> 赞同：4
> 
> 时间：2009-06-16T21:14:19.120
> 
> 标签：python, ftp

所以我知道 ftplib，但这对我来说有点太低了，因为它仍然需要我一次处理一个上传文件以及确定是否有子目录，在服务器上创建等效的子目录，cd'ing 到这些子目录然后最后将正确的文件上传到这些子目录中。这是一项烦人的任务，如果可以的话，我宁愿避免，编写测试，设置测试 ftp 服务器等等等等。

你们中的任何人都知道图书馆（[或浴室墙上潦草的一些代码..](http://www.codinghorror.com/blog/archives/001268.html)）可以为我处理这个问题，还是我应该接受我的命运并自己动手？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-16T21:17:48.160

> ftputil Python 库是 ftplib 模块的高级接口。

看起来这可能会有所帮助。[ftputil 网站](http://ftputil.sschwarzer.net/trac)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-16T22:29:52.353

如果你的系统上安装了 wget，你可以让你的脚本调用它来为你做 ftp'​​ing。它支持递归传输、站点镜像和许多其他功能。

# keyword - 从数据流中查找热门话题

> ID：1003971
> 
> 赞同：1
> 
> 时间：2009-06-16T21:15:24.187
> 
> 标签：keyword

查找单个单词趋势很简单，您可以将数据流的每个单词分块并进行计数并将其限制在最后 24 小时或 48 小时。我不确定如何找到 2 词或 3 词组合的趋势？任何帮助都是值得的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T21:39:00.147

所以你有一些东西 - 对于单个单词的情况 - 说明了以下内容：

```
while (true)
    word = readNextWord()
    register(word, now)
    discardWordsOlderThan (now - windowSize) 
```

只需跟踪上一个单词：

```
while (true)
    word = readNextWord()
    register(prev + " " + word, now)
    prev = word
    discardWordsOlderThan (now - windowSize) 
```

# javascript - 使用带有 jQ uery 的 HTML 帖子定位 iframe

> ID：1003973
> 
> 赞同：27
> 
> 时间：2009-06-16T21:15:31.880
> 
> 标签：javascript, jquery, ajax, iframe

如果我使用 jQuery 或 JavaScript 来发布帖子，我怎样才能让它针对 iframe 而不是当前页面？

```
jQuery.post( 
    url, 
    [data], 
    [callback], 
    [type] 
) 
```

那是 jQuery 帖子的格式，似乎没有任何地方可以像`<form>`标签中那样指定目标。

有任何想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-06-16T21:22:10.993

您可以通过常规形式执行此操作：

```
<form action="targetpage.php" method="post" target="iframename" id="formid">
   <input type="hidden" name="foo" value="bar" />
</form> 
```

然后您可以使用 jQuery 提交表单：

```
$("#formid").submit(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T21:18:35.430

也许您错过了 AJAX 请求的要点 - 为什么要尝试指定异步请求的“目标”？这没有任何意义，因为 AJAX 的全部意义在于来自服务器的请求被发送回 Javascript，无需页面重新加载或 HTML 目标。

如果您想将请求的结果加载到 iframe 上，您可以这样做：

```
$.post('myurl', function(data) {
    $('#myframe').html(data);
}, 'html'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-05-20T16:58:18.533

您可以通过动态创建表单并将其附加到正文来解决 no-form-allowed-within-a-form 问题。所以你会做这样的事情：

```
$().ready(function() {
    $('body').append('<form 
       action="url" 
       method="post" 
       target="iframename" 
       id="myspecialform">
         <input type="hidden" name="parameter" value="value" />
       </form>');
}); 
```

这会在包含页面上所有其他内容的主表单之外创建您的 iframe 更新表单。然后就像 Josh 推荐的那样称呼它：`$('#myspecialform').submit();`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-04T11:37:26.470

这是我在 javascript 中使用纯 html 的方法：

```
var form=$("<form/>").attr({
    method: "post",
    action: "iframe.php",
    target: "list_frame"
});
form.append($("<input/>").attr({name:"field1",value:0}));
form.append($("<input/>").attr({name:"field2",value:1}));
form.append($("<input/>").attr({name:"field3",value:2}));
form.append($("<input/>").attr({name:"field4",value:3}));
form.append($("<input/>").attr({name:"field5",value:4}));
$("body").append(form);
form.submit(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-02-29T16:26:14.183

我知道这个问题很老，但这是我在 ASP.Net (C#) 上使用 jQuery 的方法。

```
//Create the form in a jQuery object
$("<form action='/FormPostTo.aspx' method='post' target='nameofframe'></form>")
    //Get the value from the asp textbox with the ID txtBox1 and POST it as b1
    .append($("<input type='hidden' name='b1' />").attr('value',$('#<%= txtBox1.ClientID %>').val()))
    //Get the value from the asp textbox with the ID txtBox2 and POST it as b2
    .append($("<input type='hidden' name='b2' />").attr('value',$('#<%= txtBox2.ClientID %>').val()))
    //Add the form to the body tag
    .appendTo('body')
    //Submit the form which posts the variables into the iframe
    .submit()
    //Remove the form from the DOM (so subsequent requests won't keep expanding the DOM)
    .remove(); 
```

只是一个简短的说明：我做了这样的输入标签而不是连接它们，以防文本框的值中有一个引号（`'`）。如果你把它连接进去，它会弄乱 HTML 并且它不会正确解析。

此外，这会在使用后从 DOM 中删除表单，因此如果您多次发布到 iFrame，您就不会用表单元素填充 DOM。

您可以进行的一项细微更改是创建表单元素（如果它不存在），然后仅通过 ID 引用它（如果它已经存在）并重用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-12-15T19:20:21.600

当我需要通过理想情况下使用 AJAX / jQuery 的表单将数据提交到远程页面时，这是我为解决在 asp.net 页面上的表单中包含表单的问题所做的工作。

1.  我创建了变量来捕获 asp.net 表单名称、目标、操作、方法等。

2.  我将表单中的信息保存在这些变量中，然后使用 jQuery 更改表单本身以执行我需要它执行的操作。

3.  然后我通过 AJAX 发布表单（因为我需要一个表单来动态发布到单独的页面，以便其他页面可以获取信息）。

4.  最后，我将 asp.net 表单改回原来的样子，以便页面的其余部分可以正常工作。

这似乎解决了我对类似解决方案的需求。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-06-16T21:20:23.570

你错过了 AJAX 的意义。如果您想将内容发布到 iframe，您可以通过一个简单的表单、通过 JavaScript 或通常的方式发布：提交按钮。

# logging - 在 ASP.NET MVC 应用程序中记录应用程序消息和未处理的异常

> ID：1003974
> 
> 赞同：0
> 
> 时间：2009-06-16T21:15:35.437
> 
> 标签：logging

我们正在启动一个新的 ASP.NET 3.5 MVC 应用程序（使用实体框架等）。应用程序将在方法级别处理异常并记录它们。还应记录未处理和运行时异常。日志模块/框架应该同时记录**应用**程序错误/调试/信息消息和未处理的异常。

**选项：**

*   EL 4.1 记录应用程序块
*   ASP.NET 健康监控
*   log4net 框架： http: [//logging.apache.org/log4net/index.html](http://logging.apache.org/log4net/index.html)
*   日志
*   ELMAH 框架：[http ://code.google.com/p/elmah/](http://code.google.com/p/elmah/)
*   自定义日志记录（使用 [HandleError] 过滤器、控制器的 OnActionExecuted 事件和 Global.asax 中的 OnError 事件）
*   **其他的？**

**请比较框架。**

哪个会是最合适的选择？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T09:03:03.677

有**很多**用于 .NET 的日志记录和跟踪工具，包括我们自己的[SmartInspect](http://www.gurock.com/products/smartinspect/)工具。我们收集了一个日志工具列表并将它们发布到[DotNetLogging.com](http://www.dotnetlogging.com)。但是正如 John 已经写的那样，如果不提供有关您的应用程序和日志记录需求的更多详细信息，就很难推荐特定的工具或解决方案。

# xslt - 替换 XSLT 中的 XML 值

> ID：1003981
> 
> 赞同：0
> 
> 时间：2009-06-16T21:16:45.370
> 
> 标签：xslt

我无法编辑 XML，我只想更改 XSLT 文件中的 XML 数据。

```
<xsl:value-of select="Name" disable-output-escaping="yes"/> 
```

XML 数据的值是`"Northfield Bancorp Inc.(MHC)"`，我想用`"Northfield Bancorp Inc."`(remove `"MHC"`) 替换它。

XSLT 中是否有可以搜索和替换 this 的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T08:52:27.613

如果它只是您要删除的字符串末尾的“（MHC）”，则可以这样做：

```
<xsl:value-of select="
  substring-before(
    concat(Name, '(MHC)'), 
    '(MHC)'
  )
" /> 
```

如果要动态替换，可以编写如下函数：

```
<xsl:template name="string-replace">
  <xsl:param name="subject"     select="''" />
  <xsl:param name="search"      select="''" />
  <xsl:param name="replacement" select="''" />
  <xsl:param name="global"      select="false()" />

  <xsl:choose>
    <xsl:when test="contains($subject, $search)">
      <xsl:value-of select="substring-before($subject, $search)" />
      <xsl:value-of select="$replacement" />
      <xsl:variable name="rest" select="substring-after($subject, $search)" />
      <xsl:choose>
        <xsl:when test="$global">
          <xsl:call-template name="string-replace">
            <xsl:with-param name="subject"     select="$rest" />
            <xsl:with-param name="search"      select="$search" />
            <xsl:with-param name="replacement" select="$replacement" />
            <xsl:with-param name="global"      select="$global" />
          </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="$rest" />
        </xsl:otherwise>
      </xsl:choose>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$subject" />
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

这可以称为：

```
<xsl:call-template name="string-replace">
  <xsl:with-param name="subject"     select="Name" />
  <xsl:with-param name="search"      select="'(MHC)'" />
  <xsl:with-param name="replacement" select="''" />
  <xsl:with-param name="global"      select="true()" />
</xsl:call-template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-16T21:24:38.677

XSLT 2.0 有一个 replace() 函数。

如果你坚持使用 1.0，标准库中有一个模板可以代替本地函数的缺失：

[http://prdownloads.sourceforge.net/xsltsl/xsltsl-1.2.1.zip](http://prdownloads.sourceforge.net/xsltsl/xsltsl-1.2.1.zip) [http://xsltsl.sourceforge.net/string.html#template.str:subst](http://xsltsl.sourceforge.net/string.html#template.str:subst)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T21:36:52.617

来自 exslt.org 的另一个 xslt 1.0 模板

[http://www.exslt.org/str/functions/replace/str.replace.template.xsl](http://www.exslt.org/str/functions/replace/str.replace.template.xsl)

# c++ - Borland c++ 0.7 版是否仍然可用？

> ID：1003987
> 
> 赞同：1
> 
> 时间：2009-06-16T21:17:26.790
> 
> 标签：c++, c, borland-c++

我的表弟实际上是在问我它是否仍然可用，但我找不到那个版本，因为它太旧了，他抱怨 5.5 版说它不识别他的库。有链接吗？我怀疑，但我想我会试一试。我知道 0.7 太旧了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T21:33:33.887

Borland 的工具部门被拆分为一个名为 CodeGear 的独立部门。CodeGear 随后被 Embarcadero 收购。在他们的网站上，他们有一个古董软件下载[部分](http://edn.embarcadero.com/museum/antiquesoftware)。我不知道你所说的 0.7 是什么意思，因为这似乎不是一个有效的版本，你的意思是 7.0 吗？无论如何，如果它不在这个网站上，你可能不走运，尽管给首席布道者 David Intersimone 发送电子邮件可能是值得的。他可能会帮助你，他是一个很棒的人，非常平易近人。

他的电子邮件地址是他的名字，加上他的第二个名字的首字母“at”embarcadero dot com。

# .net - Microsoft 合同：程序集加载导致元数据导入警告

> ID：1003990
> 
> 赞同：1
> 
> 时间：2009-06-16T21:17:52.343
> 
> 标签：.net, code-contracts, design-by-contract, contracts, microsoft-contracts

我正在尝试了解[Microsoft Code Contracts](http://research.microsoft.com/en-us/projects/contracts/)库的方法，并且我具有以下简单功能：

```
internal static Engine CreateBuildEngine(Microsoft.Build.Framework.ILogger logger)
{
    Contract.Requires( logger != null );

    var engine = new Engine { DefaultToolsVersion = "3.5" };
    engine.RegisterLogger(logger);
    return engine;
} 
```

尝试编译时，contracts 静态编译器会抛出以下警告消息：

```
warning : contracts: Assembly load resulted in metadata import 'Could not resolve member reference: Microsoft.Build.BuildEngine.Engine::set_DefaultToolsVersion.' 
```

然后立即放弃（并且不尝试进行任何进一步的合同处理）。如果我删除设置的代码，`DefaultToolsVersion`则合同验证程序可以正常工作，但这毫无意义，因为它会导致代码不正确。

我在谷歌上找不到任何提及...有什么方法可以解决这个问题，还是只是合同库中的一个错误？（诚​​然，它处于预发布状态）

谢谢

# myspace - 什么是一个好的基于 Web 的分析包，不需要 javascript 就可以工作？

> ID：1003995
> 
> 赞同：1
> 
> 时间：2009-06-16T21:18:44.697
> 
> 标签：myspace, web-analytics, web-analytics-tools

我的理解是 Google Analytics（我通常用于网站分析的工具）不能在 MySpace 页面上使用，因为 MySpace 不允许您嵌入 javascript。

但是我的客户想要跟踪她的 MySpace 页面的使用情况。

有没有人发现这个？我想，我正在寻找一个不同的基于 Web 的第三方分析工具集。一个不依赖于 javascript，至少与 Google Analytics 一样功能丰富，并且最好便宜（或免费！）。

（我描绘了一个基于 1x1 图像的解决方案。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-16T21:20:55.957

[StatCounter](http://www.statcounter.com/)是谷歌分析的一个很好的替代品，它为这种情况提供了一个基于图像的跟踪工具。但是，它只跟踪免费计划的最后 500 个请求。

您还必须了解，在没有 Javascript（基于图像的方法）的情况下执行此操作的唯一方法将无法收集几乎与基于 Javascript 的跟踪工具一样多的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-16T21:22:03.597

AwStats 是一个基于您的服务器日志进行处理的服务器端。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-16T21:23:10.193

[GetClicky](http://getclicky.com/)使用图像和/或脚本来跟踪访问者。