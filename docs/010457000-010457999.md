# StackOverflow 问答 10457000-10457999

# html - Create a frame for content without images/bg

> ID：10457002
> 
> 赞同：1
> 
> 时间：2012-05-04T22:36:25.600
> 
> 标签：html, css

I have a background that is a set of fairly complex gradients (done with CSS, not images). In the middle of the page is a fixed frame, and the content sits inside this frame. I can set `overflow-y: auto` on this frame to scroll the content, but I would like to be able to use the window to scroll instead.

Here is what the page looks like now:

![enter image description here](../Images/ff8633be19764b4c7e7ffe615f3d4bd0.png)

I would like the scroll bar to be on the window instead. I can take the content outside of the frame and add margins as necessary, but the problem is that then the content will appear outside the frame. I could then cover it up on the top and bottom, but this is difficult/impossible because the background is not an image and is not solid.

Is there any way to have a transparent element at the top/bottom block text that scrolls under it? Can you somehow apply styles to content that overlaps?

Even the fanciest single-browser only solution that requires JavaScript is perfectly acceptable.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:52:30.003

如果您的目标只是隐藏滚动条（并假设您对 jQuery 没问题），我建议您使用[slimScroll 之](http://rocha.la/jQuery-slimScroll)类的东西。

引擎盖下发生的事情很简单：指定的容器分配有`overflow: hidden;`，并附加了悬停处理程序 - 唯一目的是模拟自定义滚动条以响应鼠标悬停事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:56:07.417

尝试探索[jScrollPane](http://jscrollpane.kelvinluck.com/)功能。它是用于处理滚动条的强大灵活的 JQuery 插件，您可能会找到它的解决方案。

# c++ - 流解析算法速度问题

> ID：10457004
> 
> 赞同：3
> 
> 时间：2012-05-04T22:36:37.887
> 
> 标签：c++, visual-studio-2010, optimization

我编写了一个波前 Obj 解析器类，将 obj 模型导入到我的 OpenGL 项目中。我在调试模式下测试了这个类，发现它慢得让人难以忍受。

代码有效，我进行了明显的调整，以确保它在合理实用的范围内尽可能高效。

尽管如此，加载我的测试文件，一个 12mb 的 obj 文件，运行大约 330,000 行文本，需要一分钟才能解析。

沮丧，我有一个谷歌，果然，[我不是第一个遇到这个问题的人](http://www.gamedev.net/topic/490770-need-a-more-eficient-way-to-parse-a-obj-file/)。

这个在 gamedev.net 上发布查询的人只是在发布模式下运行他的算法，在 Visual Studio IDE 和 whammo 之外运行，性能可以接受。这也对我有用，我的 ~70 秒减少到 ~3 秒。

我对算法进行了一些分析，瓶颈在于对 std::getline 的调用，如下所示：

```
sstream >> sToken; 
```

其中 sstream 是 std::stringstream 而 sToken 是 std::string （预先保留空间）。

**问题**

为什么 IDE 在运行我的解析算法时速度如此之慢（即使在发布模式下） - 在通过 IDE 运行代码时我能做些什么来加快速度（F5 - 运行项目）？这使得调试变得非常缓慢。IDE 是否将代码/挂钩注入到可执行文件中以通过 IDE 运行，或者这是否可以归结为缓存未命中或其他原因？

**优化**

我对文件进行两次传递，在传递一次时，我只计算令牌类型 - 这样我就可以保留空间（而不是迭代地增长存储顶点、法线、texcoords、面等的向量）

```
sLineBuffer.reserve( 100 );
sToken.reserve(10);

while( sstream.good() )
{
    sstream >> sToken;
    getline( sstream, sLineBuffer );

    if( sToken.compare("f") == 0 )
        nFaces ++;

    else if( sToken.compare("v") == 0 )
        nVertices ++;

    else if( sToken.compare("vn") == 0 )
        nNormals ++;

    else if( sToken.compare("vt") == 0 )
        nTextures ++;

    else if( sToken.compare("g") == 0 )
        nGroups ++;
}

m_Vertices.reserve( nVertices );
m_Normals.reserve( nNormals );
m_TexCoords.reserve( nTextures );
m_Faces.reserve( nFaces );
m_Groups.reserve( nGroups ); 
```

第一次通过的成本很低（在调试模式下约为 8 秒，或在 IDE 外的发布模式下约为 0.3 秒），并且效率节省很大（将解析时间从调试模式下的 ~180 秒减少到 ~60 秒）。

我还将整个文件读入一个字符串流，以便将磁盘访问排除在等式之外：

```
// Read entire file from disk into memory
fstream stream;
stringstream sstream;
stream.open( m_sFilename.c_str(), std::ios::in );
sstream << stream.rdbuf();
stream.close(); 
```

此外，在可能的情况下，在整个算法中，我尝试提前为 std::strings 保留空间，以便它们不会基于每个字符调整大小：

```
sLineBuffer.reserve( 100 );
sToken.reserve(10);  // etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:10:51.903

这个问题原来是对 Visual Studio IDE 操作方式的误解。

无论您是在调试还是发布版本，按 F5 都会在调试模式下运行。

我了解了 Ctrl+F5 将调试器排除在等式之外的原因（但只有在运行发布版本时，您才会看到速度提高）。

我还了解到 stdio 在这种情况下可能是更好的解决方案。我将不得不重写我的算法以按照建议使用 fscanf，并在此处报告我的发现，尽管我对这个想法感到畏缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:04:27.213

STL 的编写方式是期望编译器对许多小函数进行大量内联。虽然调试器允许您进入所有美妙的抽象层，但您在调试模式下为此付出了高昂的代价，因为它不能内联任何东西。

通常我不会给出以下建议，但在解析 OBJ 文件的情况下，我建议只是扔掉 STL 并依靠良好的老式`fscanf`语句。您会在调试过程中发现显着的收益，甚至在发布模式下的速度显着提高。

# outlook - Outlook 2010 覆盖从 Arial 到 Times New Roman 的字体系列

> ID：10457006
> 
> 赞同：45
> 
> 时间：2012-05-04T22:36:59.477
> 
> 标签：outlook, html-email

我以编程方式发送 HTML 格式的电子邮件，并将字体设置为 Arial 始终 ( `font-family: Arial;`)。当邮件到达 Outlook 2010 时，`table`元素中的文本采用 Times New Roman。元素中的文本`div`在 Arial 中很好。如果 I `View Source`，复制到 HTML 文件中，并在浏览器中查看，所有字体都按预期运行（都是 Arial）。

一些 Google[结果](http://www.outlookforums.com/threads/40200-showing-times-new-roman-while-i-set-arial-html-messages/)显示，如果未指定任何字体，Outlook 将回退到其默认字体（Times New Roman），但这不是这里发生的情况。

如果另行指定，为什么 Outlook 会强制我的电子邮件以 Times New Roman 显示？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-06T02:05:03.653

即使您设置`font-family: arial`为餐桌，它仍然无法正常工作。您需要为`td`您内部的每个字体专门设置字体`table`以使其正确。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-04-25T09:57:41.020

```
<!--[if mso]>
<style> body,table tr,table td,a, span,table.MsoNormalTable {  font-family:Arial, Helvetica, sans-serif !important;  }</style>
<!--<![endif]--> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-04T22:54:21.583

有`table`问题的嵌套在具有`div`其`font-family:Arial;`样式的 a 中，但`table`没有设置字体。因此，表格不会从某些客户端的 HTML 电子邮件中的容器中继承字体（可能还有其他东西）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-02T18:03:58.690

这个问题是从 Outlook 2007 发生的，以前的解决方案对我不起作用，唯一可行的解​​决方案是用`<font face="arial, sans-serif">My text with arial</font>`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T07:30:50.483

如果您使用的是 Outlook 2007，则必须在 table 上定义 font-family。否则它将设置为默认衬线字体。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-27T15:54:02.397

<font> 标记已被弃用，但由于 Outlook 2010 正在删除（几乎所有）样式，这是它工作的唯一方式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-13T15:45:12.230

`table.MsoNormalTable {font-size:12.0pt; font-family:"Times New Roman";}` 使用 Text Pad 打开您的 HTML，并将其更改为 Arial。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-07T11:33:10.917

使用与@font-face 链接的自定义字体，上述方法都不适合我。必须使用 Outlook 的条件标签。我花了很长时间才弄清楚到底是怎么回事。所以我设置了一个代码示例：在我的情况下我仍然遇到了一些麻烦，所以我分享了一个代码示例：[https ://stackoverflow.com/a/21626196/135654](https://stackoverflow.com/a/21626196/135654)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-29T07:09:28.800

你可以把你的风格放到“span”标签上，效果很好。

```
 <td>
       <span style="font-family: "Times New Roman"></span>
   </td> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-16T20:58:51.003

我遇到了同样的问题....电子邮件正文中的所有文本都是 Arial，但表格默认为 word。我必须在每个单元格中包装字体......耗时..

# git - 如何在竹子构建期间仅检查 git 存储库的一部分？

> ID：10457009
> 
> 赞同：5
> 
> 时间：2012-05-04T22:37:56.080
> 
> 标签：git, bamboo

我有一个竹子构建，需要访问一个大型 git 存储库的一小部分。为了节省时间和磁盘空间，我只想检查与构建相关的存储库部分。我已经知道浅结账。我想做的不止这些，并将结帐限制为一个文件夹（及其后代）。

我看到了这个选项，我认为这是我必须使用的，但我无法让它工作： ![在此处输入图像描述](../Images/47ed88d2fada71f1ed4a221bf8b95912.png)

如何进行我想要的最少结帐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:32:44.467

最简单的可能是让谁托管 repo 标签并提交您想要的特定树。例如，

在上游：

```
git tag quickie $(git commit-tree $(git rev-parse HEAD:path/to/dir) </dev/null) 
```

你：

```
git fetch upstream quickie 
```

如果您希望上游存储库自动跟踪分支上的子树，您可以执行以下操作（适当的解密版本）：

```
sed -n 's,^[^ ]* [^ ]* refs/heads/master$,git update-ref refs/heads/master-subtree -m "Auto-tracking master" $(git commit-tree master:subtree -m "Auto-tracking master subtree" $(test -r refs/heads/master-subtree \&\& echo -p refs/heads/master-subtree)),p' | sh -x 
```

这比看起来简单。试试这个：

```
mkdir ~/tryitout && cd ~/tryitout && git init foo && git init bar --bare
cat >bar/hooks/post-receive <<'EOF'
sed -n 's,^[^ ]* [^ ]* refs/heads/master$,git update-ref refs/heads/master-subtree -m "Auto-tracking master" $(git commit-tree master:subtree -m "Auto-tracking master subtree" $(test -r refs/heads/master-subtree \&\& echo -p refs/heads/master-subtree)),p' | sh -x
EOF
chmod a+x bar/hooks/post-receive
cd foo
mkdir subtree && touch subtree/oooo && git add . && git commit -am-
git push ../bar master 
```

**延迟更新——**

如果您与其他 repo 共享文件系统，您可以这样做：

```
git clone --no-checkout /path/to/local/repo/.git subtree
cd subtree
git commit-tree origin/rev:subtree </dev/null | xargs git checkout -B peek 
```

您可以通过将 rev 更改为适合、origin/master:include、origin/next:include、origin/v1.4:somewhereelsenow 等来随意反弹。

我通常有一个用于大型回购的“空”分支。Git 确实处理空目录的一种特殊情况：

```
git mktree </dev/null | xargs git commit-tree | xargs git checkout -b empty 
```

# .net - TextBlock-only window in WPF

> ID：10457012
> 
> 赞同：0
> 
> 时间：2012-05-04T22:38:16.550
> 
> 标签：.net, wpf, xaml

I would like to create a WPF window that really doesn't have any appearence except for the single `TextBlock` control with transparent background. The final result would look like this:

![WPF Popup TextBlock](../Images/f830630b02fe28b0b3f7d765b98530c2.png)

How can I create such a "ghost" window?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:43:20.007

尝试以下方法：

```
<Window x:Class="MainWindow" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    Title="MainWindow" Height="50" Width="200" AllowsTransparency="True" WindowStyle="None" Background="Transparent"> 
    <TextBlock x:Name="TextClock" FontSize..... etc....> 
    </TextBlock> 
</Window> 
```

# css - JSF 2.0 change datatable row height

> ID：10457015
> 
> 赞同：2
> 
> 时间：2012-05-04T22:38:27.217
> 
> 标签：css, jsf

I do not know if there is anything specific with styling JSF datatable but I can not get the row height changed.

Here is my datatable:

```
<h:dataTable value="#{myBean.myValue}"
             rowClasses="dt_row"
             var="o">

</h:dataTable> 
```

Here is my css dt_row class:

```
.dt_row {
    height: 10px;
} 
```

But when the rows is generated the height remains the same no matter what values I specify in my css class. The source of generated page looks like this and it seems ok:

```
<tr class="dt_row"> 
```

Any ideas?

Here is my whole table:

```
 <h:dataTable value="#{searchBean.searchResult.concordances}"
                 styleClass="table"
                 var="concordance">

        <h:column>
            <pre>#{concordance.left}</pre>
        </h:column>

        <h:column>
            <pre style="color: blue;">#{concordance.middle}</pre>
        </h:column>

        <h:column>
            <pre>#{concordance.right}</pre>
        </h:column>

    </h:dataTable> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T23:13:05.843

HTML`tr`没有高度属性。可以为 定义高度`td`。

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>DataTable Row Height Sample</title>
        <style type="text/css">
            table {
                width: 200px;
            }
            table tr {
                color: darkorange;
            }
            table tr td {
                height: 80px;
            }
        </style>
    </h:head>
    <h:body>
        <h:form id="myForm">
            <h1>Show data</h1>
            <!-- check that I'm using styleClass, not rowClass -->
            <h:dataTable id="dataTable" var="data" value="#{datatableBean.lstData}"
                border="1" styleClass="table">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="ID" />
                    </f:facet>
                    <h:outputText value="#{data.id}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Value" />
                    </f:facet>
                    <h:outputText value="#{data.value}" />
                </h:column>
            </h:dataTable>
        </h:form>
    </h:body>
</ui:composition> 
```

更新：

我已经在 Chrome 18 和 IE 9 中对此进行了测试。我将包含仅更改 td 高度的表格图像：

高度：30px；

![在此处输入图像描述](../Images/c798a7a99e2196b4caa072a89d535d58.png)

高度：50px；

![在此处输入图像描述](../Images/c7fc7cb687969013d98f87b426328464.png)

高度：10px；

![在此处输入图像描述](../Images/170b581e8bb3fa5e3c059deee95e204b.png)

如您所见，行高发生了变化。也许您正在 Internet Explorer 中进行测试并且您的样式更改没有更新。要更改其行为，请转到**工具**/ **Internet 选项**，然后在**浏览历史记录**部分中选择**设置**，将出现一个弹出窗口，在**临时 Internet 文件**部分中检查第一个选项现在*每次访问网页时*选择确定关闭弹出窗口，然后再次确定关闭 Internet 选项，更新您的网站，您可以看到更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T07:24:33.303

尝试这个 ：

```
<p:dataTable id="table" >
<p:column id="id" headerText="#{message.label_id}" style="height:10px">
</p:column> 
```

# php - adding php to html frame

> ID：10457016
> 
> 赞同：0
> 
> 时间：2012-05-04T22:39:09.187
> 
> 标签：php, html, frame

I have a problem with adding php into html which includes frame. Here is my code;

```
 <?php
    session_start();
if (($_SESSION['accesslevel'] != "normal") ||($_SESSION['accesslevel'] != "admin" )) {
?>
    <meta http-equiv="refresh" content="0; url=./login.html">
    <?php}else {?>

<!DOCTYPE HTML>
<html lang="en">
<head>
<title>METU 3D Panaromic View</title>
<meta name="description" content="File Upload widget with multiple file selection, drag&amp;drop support, progress bar and preview images for jQuery. Supports cross-domain, chunked and resumable file uploads. Works with any server-side platform (Google App Engine, PHP, Python, Ruby on Rails, Java, etc.) that supports standard HTML form file uploads.">
<meta name="viewport" content="width=device-width">
<!-- Bootstrap CSS Toolkit styles -->
<link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap.min.css">
<!-- Generic page styles -->
<link rel="stylesheet" href="upload/css/style.css">
<!-- Bootstrap styles for responsive website layout, supporting different screen sizes -->
<link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-responsive.min.css">
<!-- Bootstrap CSS fixes for IE6 -->
<!--[if lt IE 7]><link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-ie6.min.css"><![endif]-->
<!-- Bootstrap Image Gallery styles -->
<link rel="stylesheet" href="http://blueimp.github.com/Bootstrap-Image-Gallery/css/bootstrap-image-gallery.min.css">
<!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
<link rel="stylesheet" href="upload/css/jquery.fileupload-ui.css">
<!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <frameset rows="40px,94%" BORDER=2 >
        <frame src="./normal_menu.html" noresize="noresize" scrolling="no" name="menu"/>
        <frameset cols="25%,75%" BORDER=2>
           <frame src="./map3.php?type=1" name="MAP" />
           <frame src="./view.html?fileName=findik.den.jpg" name="VIEW"/>
        </frameset>
    </frameset>
</head>
<body>
</body>
</html>
<?php}?> 
```

It does not see if in php, hence it always redirects to login.html. How can i handle it without giving up frame.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:51:22.283

Your conditional here doesn't make sense:

```
if (($_SESSION['accesslevel'] != "normal") ||($_SESSION['accesslevel'] != "admin" )) { 
```

One of these two conditions will **always** be true -- `$_SESSION['accesslevel']` will always be either not-equal to "normal", or not-equal to "admin". (It can't be equal to both.)

You probably mean something like:

```
if (!($_SESSION['accesslevel'] == "normal" || $_SESSION['accesslevel'] != "admin")) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:48:46.050

你**真的**应该使用 PHP[`header`](http://www.php.net/manual/en/function.header.php)函数而不是 HTML`<meta>`标记：

```
header('Location:login.html'); 
```

您当前执行此操作的方式是冒着将内容发送给他们不应访问的客户端的风险，然后重定向。

除此之外，**我认为您的实际问题是布尔逻辑**，看来您应该使用布尔 AND，而不是 OR：

```
if (($_SESSION['accesslevel'] != "normal") && ($_SESSION['accesslevel'] != "admin" )) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T23:19:57.867

我试过你的代码。数组 $_SESSION 为空！根据 php 手册（session_start 部分），“读取回调将检索任何现有的会话数据（以特殊的序列化格式存储）并将被反序列化并用于在读取回调返回保存的会话数据时自动填充 $_SESSION 超全局到 PHP 会话处理。” 因此，如果您之前没有进行任何会话，则似乎永远不会填充数组 $_SESSION 并且您对其进行的任何测试都不会给出任何有用的结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T22:54:14.463

```
<?php
session_start();
if (isset($_SESSION['accesslevel']) && !(($_SESSION['accesslevel'] == "normal") || ($_SESSION['accesslevel'] == "admin" ))) {
?> 
```

# mysql - Why do I get the errors ambiguous field or unknown column in field list?

> ID：10457020
> 
> 赞同：0
> 
> 时间：2012-05-04T22:39:14.540
> 
> 标签：mysql, sql

I created these two tables:

```
CREATE TABLE `Game` (

 `GameName` varchar(30) NOT NULL,
 `GameGenre` varchar(20) NOT NULL,
 `GameDescription` varchar(500) NOT NULL,
 `GameMode` varchar(20) NOT NULL,
 PRIMARY KEY (`GameName`)
) ENGINE=InnoDB;

CREATE TABLE `GameScoreTotal` (

 `ScoreID` int(3) NOT NULL AUTO_INCREMENT,
 `GameName` varchar(30) NOT NULL,
 `OverallScoreTotal` mediumint(9) NOT NULL,
 `GraphicsTotal` mediumint(9) NOT NULL,
 `StoryTotal` mediumint(9) NOT NULL,
 `GameplayTotal` mediumint(9) NOT NULL,
 `TimeTotal` mediumint(9) NOT NULL,
 PRIMARY KEY (`ScoreID`),
  CONSTRAINT  FOREIGN KEY (`GameName`) REFERENCES `Game` (`GameName`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB; 
```

My query needs to return all information from game table for the top ten games based on `GameScoreTotal.OverallScoreTotal`.

Queries I have tried:

```
SELECT GameName 
FROM Game 
FULL JOIN GameScoreTotal 
    ON Game.GameName=GameScoreTotal.GameName 
ORDER BY OverallScoreTotal DESC 
LIMIT 0, 10;

SELECT Game.GameName 
FROM Game 
FULL JOIN GameScoreTotal 
    ON Game.GameName=GameScoreTotal.GameName 
ORDER BY OverallScoreTotal DESC 
LIMIT 0, 10; 
```

Both tables have legitimate records within them.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:48:06.143

# 查询 1

在您的第一个查询中，问题是 GameName 字段同时存在于表 Game 和 GameScoreTotal 中。因此错误`Column 'GameName' in field list is ambiguous`

# 查询 2

MySQL 没有*`FULL JOIN`*. [**在此处阅读**](http://dev.mysql.com/doc/refman/5.0/en/join.html)有关 MySQL JOIN 语法的信息。

试试*Game*和*GameScoreTotal***`LEFT OUTER JOIN`**表之间的连接，这个连接会获取 Game 表中的所有记录和 GameScoreTotal 表中的所有匹配记录，如果*GameScoreTotal*表中没有匹配记录，*则*显示 NULL。

 ***您也可以尝试**`INNER JOIN`**，它只会获取两个表之间的匹配记录。

*脚本*：

```
SELECT Game.GameName 
FROM Game 
LEFT OUTER JOIN GameScoreTotal 
    ON Game.GameName=GameScoreTotal.GameName 
ORDER BY OverallScoreTotal DESC 
LIMIT 0, 10; 
```***

# javascript - front end mysql, deleting a row

> ID：10457022
> 
> 赞同：0
> 
> 时间：2012-05-04T22:39:28.557
> 
> 标签：javascript, mysql, ajax

i'm creating a front end to view a mysql database with options to filter by certain criteria (such as age and sex) as well as options for deleting specific entries in the database.

i used this [http://www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php](http://www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php) as a guide to build everything.

so far this is what i have: view.php - authenticates user, creates basic html with input boxes in order to define the filters, a submit button, javascript function that reads the values from the input boxes and calls ajax.php, basic html to display results of mysql query.

ajax.php - connects to the mysql DB, gets the input values from view.php, builds the mysql query from the input values, creates a table of all the mysql query result which is displayed by view.php.

within each row of the mysql query result, i have an html input button which, onclick, calls a javascript function intended for deleting the specific row. so each row has it's own delete button. this delete function right now resides in view.php.

my intention, is that the delete js function will call another file, say delete.php and that delete.php will activate the mysql query to delete the specific row based upon which delete button was clicked.

the only part i don't have working correctly is how to pass the correct row ID to delete.php.

any thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:53:25.297

In the `onclick` event of each button which is generated through php, store the row ID as the parameter of the function which sends that parameter to your `delete.php`.

Example:

In the php which generates each of your delete buttons:

```
echo '<input type="button" value="Delete" onclick="delete('. $row_ID .')" />'; 
```

Then just make the corresponding AJAX function `delete(row_id)` in your javascript which will pass that parameter as part of the request to your `delete.php`.

# sql - 计算子查询中出现的次数

> ID：10457038
> 
> 赞同：3
> 
> 时间：2012-05-04T22:41:47.403
> 
> 标签：sql, sql-server-2008

这是我在 Stack Overflow 上的第一篇文章，我有一个相对简单的初学者 SQL 问题。我的任务是在我们的数据库中查找每个员工延迟提交时间表的次数。我主要查看了两张表，但我无法将这两张表放在一起，并且无法很好地查看发生次数和与之关联的员工 ID。

我创建了这个查询，它为我提供了`EmployeeID`每次出现的情况。

```
SELECT db.Employee.EmployeeID 
FROM db.LateTimesheets
INNER JOIN db.Employee ON Employee.LastName = LateTimesheets.LastName AND Employee.FirstName = Late Timesheets.FirstName 
```

现在，通过这个简单的查询，我可以看到`EmployeeID`这些事件发生了多少次。但是，我最终想要得到的是一个表格，它显示每次出现的计数，以及与`EmployeeID`该计数相关联的计数。

我假设我需要使用该`COUNT()`函数来计算每个 的行数`EmployeeID`，然后选择该值以及`EmployeeID`. 但是，我在正确构建子查询时遇到了问题，到目前为止我尝试的所有操作都只在 MS SQL Server Management Studio 中产生了错误。

任何帮助，将不胜感激。先谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:02:30.763

`usr`的答案的更简单版本如下，它避免了派生表的构造：

```
Select db.Employee.EmployeeID, Count( db.LateTimesheets.somecolumn ) As Total
From db.Employee 
    Left Join db.LateTimesheets
        On LateTimesheets.LastName  = Employee.LastName
            And Late Timesheets.FirstName = Employee.FirstName
Group By db.Employee.EmployeeID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:47:02.397

我可能误解了这个问题，但`GROUP BY`不能解决你的问题吗？

```
SELECT COUNT(db.LateTimesheets.somecolumn), db.Employee.EmployeeID 
FROM db.LateTimesheets
INNER JOIN db.Employee ON Employee.LastName = LateTimesheets.LastName 
    AND Employee.FirstName = Late Timesheets.FirstName
GROUP BY db.Employee.EmployeeID 
```

只需替换`somecolumn`为实际在表中的列的名称即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:46:41.513

```
select e.*, isnull(lt.Count, 0) as Count
from Employee e
left join (
 select LastName, count(*) as Count from LateTimesheets
) LateTimesheets lt on e.LastName = lt.LastName 
```

诀窍是在派生表中进行分组。您不想对所有内容进行分组，只需对 LateTimesheets 进行分组。

我们需要一个左连接才能让员工仍然没有 LateTimesheets。

# visual-studio-2010 - 为什么 ExecutionPolicy 行为因 Visual Studio 中的项目而异？

> ID：10457039
> 
> 赞同：65
> 
> 时间：2012-05-04T22:41:55.390
> 
> 标签：visual-studio-2010, nuget

我在特定的 PC 上使用 NuGet 已经有一段时间了。现在，我在 VS2010 中创建了一个新项目（如果重要的话，它是一个使用单页应用程序模板的 MVC 4 Beta 项目）。当我选择

工具/库包管理器/包管理器控制台

控制台窗口打开，但显示错误：

> 文件 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Microsoft Corporation\NuGet Package Manager\1.7.30402.9028\Modules\NuGet\profile.ps1 无法加载，因为在这个系统。有关更多详细信息，请参阅“get-help about_signing”。

但是，其他项目仍然可以打开和使用 Package Manager Console。

在每种情况下，VS2010 都以同一用户身份运行。

如果我打开命令提示符（使用运行 VS2010 的同一帐户），启动 PowerShell，然后输入命令

> 获取执行策略

PowerShell 返回

> 受限制的

我基于[Scott Hanselman 博客](http://www.hanselman.com/blog/SigningPowerShellScripts.aspx)的理解是，如果 ExecutionPolicy 受到限制，则脚本根本不应该运行。

**为什么现有项目能够使用包管理器控制台，而新项目却不能？**

更新：将 ExecutionPolicy 更改为 AllSigned*并*重新启动 VS2010 解决了眼前的问题，但我的主要问题是为什么其他项目能够绕过已建立的 ExecutionPolicy。VS2010*没有*以管理员身份运行。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-05-23T10:56:24.540

我遇到了同样的问题并通过以下方式解决了它：

*   以管理员身份打开 Powershell
*   输入以下命令“Set-ExecutionPolicy RemoteSigned”
*   重新启动 Visual Studio，包管理器控制台按预期工作

重要的是要注意 Powershell 会给你一个警告

***“执行策略有助于保护您免受您不信任的脚本的影响。更改执行策略可能会使您面临 about_Execution_Policies 帮助主题中描述的安全风险。您要更改执行策略吗？”***

并且应小心启用此功能，并应阅读有关安全风险的帮助主题中的更多信息。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-06-17T18:20:55.167

除了[Murries 的回答](https://stackoverflow.com/a/10718522/2615152)之外，我发现[jellonek 的帖子](https://stackoverflow.com/a/23672717/2615152)（在另一个线程上）很有帮助。您可能需要更改不同版本的 PowerShell 的权限（32 位和 64 位版本需要不同的权限）。

从[如何判断 PowerShell 是 32 位还是 64 位](http://www.gregorystrike.com/2011/01/27/how-to-tell-if-powershell-is-32-bit-or-64-bit/)：

*   64 位 PowerShell 路径：C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe
*   32 位 PowerShell 路径：C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe

此外，这[两个](http://technet.microsoft.com/en-us/library/ee176961.aspx)都应该工作：

*   Set-ExecutionPolicy RemoteSigned
*   Set-ExecutionPolicy 不受限制

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-09T10:35:44.427

解决此问题的另一种方法是将 Regedit 文件与以下内容合并：

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\PowerShell\1\ShellIds\Microsoft.PowerShell]
"ExecutionPolicy"="Unrestricted"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\PowerShell\1\ShellIds\Microsoft.PowerShell]
"ExecutionPolicy"="Unrestricted" 
```

*（创建一个名为 NuGetPowerShellFix.txt 的文本文件，将上面的内容复制粘贴到其中，重命名为 NuGetPowerShellFix.reg，然后运行。）*

**合并上述文件后，重新启动 Visual Studio。**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-09-28T19:13:49.530

如果您在 Visual Studio 2013 中使用 NuGet 并遇到这个烦人的错误，请转到工具 | NuGet 包管理器 | 包管理器设置并单击“清除包缓存”。重新启动 Visual Studio。我知道有多种解决方案，所以这是另一个尝试。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-30T12:02:52.540

我也间歇性地遇到过这个问题。我刚刚再次遇到它并遇到了这个线程。在我最近的案例中，我意识到我打开了两次 VS 2013（这通常不是问题，我一直都这样做）。由于其他似乎解决它的唯一共同主题在环境上与要求管理员权限有关，因此我试了一下并关闭了 VS 的两个实例并在新实例中重新打开了我的解决方案。运行 nuget 安装，它运行顺利。

基于此，我认为这是导致此虚假错误的文件权限问题。有点像Windows在调试会话后锁定了bin目录中的文件并且不允许您编译解决方案。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-08T19:38:55.713

您可以通过不以管理员身份运行 Visual Studio 来解决此问题。

不同的原因，相同的错误信息；可能对遇到这个的人有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-11T13:46:10.290

由于我们需要在我们网络中的远程服务器上的共享上创建一个项目并遇到类似的问题，这里是有效的：

*   将共享映射为网络驱动器，例如 R：（但我想如果没有此映射它也可以工作）
*   打开 Internet 选项 > 安全 > 本地 Intranet > 站点 > 高级（通过 IE 或控制面板）
*   添加“R：”或“file://server.domain.xy”（一旦您重新打开对话框，前者将自动变为后者）
*   运行 x86 PowerShell 可执行文件并执行“S​​et-ExecutionPolicy RemoteSigned”

一旦我完成了所有这些，Visual Studio 并没有在再次打开解决方案时抱怨该项目位于不受信任的位置，并且它成功地为在创建新的 MVC 应用程序时自动安装的包运行了所有 PowerShell 脚本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-06T23:16:14.687

我现在遇到了这个问题，我认为对我有用的是我只需要重新启动 Visual Studio 2013 并以管理员身份运行它……对我来说工作得很快。

# c# - alertDidEnd：Objective-C 的 void* 的 Mono 等价物是什么？

> ID：10457044
> 
> 赞同：1
> 
> 时间：2012-05-04T22:42:53.257
> 
> 标签：c#, monomac, nsalert

我正在尝试实现一种基于 Cocoa 的方法

```
- (void) alertDidEnd:(NSAlert *)alert returnCode:(NSInteger)returnCode contextInfo:(void *)contextInfo; 
```

问题是 void* 类型的参数。我不知道指向 void 的指针的 C# 等价物是什么。

我尝试使用“void*”进行不安全的执行，但显然不一样。我也尝试过简单的“void”，但 C# 编译器声称 void 不能用作参数类型。

有任何想法吗？

```
Error CS0123: A method or delegate `MyProgram.MainWindow.alertDidEnd(MonoMac.AppKit.NSAlert, int, MonoMac.Foundation.NSObject)' parameters do not match delegate `MonoMac.Foundation.NSAction()' parameters (CS0123) 
```

更新（问题解决后）：

这些是使这项工作起作用的调用和方法：

```
alert.BeginSheet ((NSWindow)sender, this, new Selector ("alertDidEnd:returnCode:contextInfo:"), IntPtr.Zero);

[Export("alertDidEnd:returnCode:contextInfo:")]
public void alertDidEnd (NSAlert alert, int result, IntPtr ci)
{} 
```

第一个是显示附加到窗口的警报，第二个是解除警报时调用的函数的方法声明。结果存储在 int result 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:57:04.203

void* 映射到 .net 中的 IntPtr：

```
[Export("alertDidEnd:returnCode:contextInfo:")] 
public void alertDidEnd (NSAlert alert, int returnCode, IntPtr contextInfo) 
{ 
    Console.WriteLine (returnCode); 
} 
```

您可以在这里查看一个工作示例：

[https://github.com/picoe/Eto/blob/master/Source/Eto.Platform.Mac/Forms/MacModal.cs](https://github.com/picoe/Eto/blob/master/Source/Eto.Platform.Mac/Forms/MacModal.cs)

此外，从您的错误消息看来，您应该只使用普通的无参数方法来使用它。NSAction 是一个没有参数的委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:15:35.087

您可以将方法定义为：

```
[Export("alertDidEnd:returnCode:contextInfo:")] 
public void alertDidEnd (NSAlert alert, int returnCode, NSObject contextInfo) 
{ 
    Console.WriteLine (returnCode); 
} 
```

指针将`void *`被包装到一个 NSObject 中。

# c++ - C ++去除某些标签+替换HTML特殊字符

> ID：10457045
> 
> 赞同：1
> 
> 时间：2012-05-04T22:42:54.563
> 
> 标签：c++, regex, boost, replace, strip

我有条带化 XML 标签的问题（例如属性`<smth a="xxxx">important data</smth>`）。为此，我正在使用这个

```
std::string ex = "(&lt;)|(&gt;)|(&amp;)|(&quot;)|(&apos;)";
std::string fmt ="(?1<)(?2>)(?3&)(?4\")(?5')"; // replace just html tags
ex += "|(<a href(.*?)\">)|(</a>)|(<quote(.*?)>)|(</quote>)"; // strip else
boost::regex expr(ex);
std::string s2 = boost::regex_replace(src, expr, fmt, boost::match_default | boost::format_all); 
```

但我注意到它会导致内存泄漏。也许我做错了什么或者有更有效的方法？

# android - 在 Android 中写入文本文件资源

> ID：10457053
> 
> 赞同：0
> 
> 时间：2012-05-04T22:44:34.740
> 
> 标签：android, file, writetofile

有谁知道如何使用以下资源在 Android 中写入文本文件：

```
R.raw.my_text_file 
```

我只是在寻找干净简单的东西。我已经用谷歌搜索了，但我发现的例子没有用。我尝试使用 Android 文档进行编码，但无法理解它......

谢谢

**编辑：**

我已使用 Android 文档来创建此代码。日志打印出“1”和“9”，代码跳过中间的所有内容并且什么都不做：

```
 try {
        String filename = "res/raw/my_text_file.txt";
        String string;

        Log.v(TAG, "1");
        FileOutputStream fos = openFileOutput(filename, Context.MODE_PRIVATE);
        Log.v(TAG, "2");

        for (int i = 0; i < list.size(); i++) {
            Log.v(TAG, "3");
            try {
                Log.v(TAG, "4");
                string = i + " - " + list.get(i);
                fos.write(string.getBytes());
            } catch (Exception e) {
                Log.v(TAG, "5");
            }
            Log.v(TAG, "6");
        }
        Log.v(TAG, "7");
        fos.close();
        Log.v(TAG, "8");
    } catch (Exception e) {

    }
    Log.v(TAG, "9"); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T22:46:10.030

> 有谁知道如何使用资源在 Android 中写入文本文件

资源在运行时是只读的，不能写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:13:28.527

正如@CommonsWare 所说，您不能在资源上写入，但您可以使用 openFileOutput 和 openFileInput 以及 BufferedReaders 和 BufferedWriters 使用内部存储。你可以在这里查看：

[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

但这里有一个示例：

BufferedReader BR_intFile = new BufferedReader(new InputStreamReader(openFileInput("file")));

阅读和编写类似的代码。

# jquery - 我需要 .slideToggle 来处理悬停（jQuery）

> ID：10457054
> 
> 赞同：1
> 
> 时间：2012-05-04T22:44:35.770
> 
> 标签：jquery, hover, toggle, slide

我有一个导航 div，可以在点击时打开。我的客户希望打开 div 的链接链接到一个页面，并在悬停时切换 div（因此该链接可以在点击时指向另一个页面）。

这是我到目前为止的代码：

```
<script>
$(document).ready(function(){
   $("#drawer").hide();
   $(".toggle-drawer").show();

   $('.toggle-drawer').click(function(){
      $("#drawer").slideToggle();
   });  
});
</script> 
```

这是该站点的链接：http: [//gearthirty.com](http://gearthirty.com)（单击“超级站点”链接查看我在说什么）。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:49:02.770

```
<script>
$(function(){ // DOM ready shorthand

  var $drawer = $("#drawer"); // Cache your elements
  var $togg   = $(".toggle-drawer");

  $drawer.hide();
  $togg.show();

  $togg.hover(function(){
     $drawer.stop().slideToggle();
  }); 

});
</script> 
```

# xcode - Xcode 挂在 Analzying 生成 dSYM 文件上

> ID：10457056
> 
> 赞同：3
> 
> 时间：2012-05-04T22:44:48.800
> 
> 标签：xcode

***嗨 - 请忽略这个。该文件没有任何问题 - 它非常大，需要 30 分钟才能编译。干杯! （这就是你习惯小文件时得到的）

我只是一个新手，正在寻找一些建议。我正在使用 Xcode 4.3.2。

以前，我将项目存档并将其上传到 AppStore 完全没有问题。今天，它只是不工作，我什至不知道从哪里开始寻找。我没有更改任何设置，我尝试了另一个项目并且它存档得很好，所以我假设它不是我的 Xcode 或我的任何证书。

当我尝试构建应用程序时，它就停止了

“正在编译 9 o 9 个源文件……”并拒绝再进一步。

所以我尝试分析文件，它现在挂起：

“生成 dSYM 文件”

我显然在做一些愚蠢的事情，我什至不知道在这之后去哪里，我试图谷歌和其他一切。我真的很感激任何关于我可以在哪里寻找或解决这个问题的提示。

如果在西澳大利亚的珀斯有一个 Xcode 开发人员 - 我愿意为帮助付费，因为我非常绝望。我不是在写一个杀手级的应用程序或类似的东西，只是整个事情让我发疯了。

干杯杰奎琳

# c - 如何在 Linux 命令提示符下将输入限制为数字？

> ID：10457060
> 
> 赞同：1
> 
> 时间：2012-05-04T22:45:33.173
> 
> 标签：c, linux, input

我有一个程序需要输入两个整数来设置一个二维数组，如果你输入一个字母，那么程序就不起作用。

有什么方法可以检查它是否是已输入的数字或将键盘上按下的内容限制为仅数字？

一旦输入了数字，它就会被扫描到一个变量中以设置数组。

这是代码示例：

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

int x;
int y;

int main(void){

    int array[x][y];
    int i;
    int j;
    srand(time(NULL));

printf("Please Enter Size X Of Array:");
scanf("%d",&x);
printf("\n");
printf("please Enter Size Y Of Array:");
scanf("%d",&y);

    printf("\n Randomised Numbers Table \n\n");

    for (i = 0; i < x; i++){

        for (j = 0; j < y; j++){
            array[i][j] =(rand()%10000);
            printf("%d \t", array[i][j]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:01:14.670

处理这个问题的最好方法是循环直到你有有效的输入。使用 bash，您可以使用正则表达式运算符来确保字符串在继续之前有效。

```
# Loop until your input is valid.
unset REPLY
until [[ $REPLY =~ ^[0-9]{2}$ ]]; do
    read -p 'Digit: '
done
echo "You entered: $REPLY" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:15:25.020

我知道这是一个老问题，我知道这是一个家庭作业，我知道 OP 不会回来接受我的答案，但是这个问题启发了我编写以下程序，它是这个的正确答案问题。

```
#include <termios.h>
#include <unistd.h>
#include <stdio.h>

int getdigit() {
    int total = 0;
    struct termios oldtc, newtc;
    int ch;
    tcgetattr(STDIN_FILENO, &oldtc);
    newtc = oldtc;
    newtc.c_lflag &= ~(ICANON | ECHO);
    tcsetattr(STDIN_FILENO, TCSANOW, &newtc);
    while (1) {
        ch=getchar();
        if (ch == 127) { // Backspace
            total /= 10;
            printf("\b \b");
            continue;
        } else if (ch == 10) { // Return
            putchar(ch);
            break;
        } else if (ch < '0' || ch > '9') {
            continue;
        }
        putchar(ch);
        total *= 10;
        total += ch-'0';
    }
    tcsetattr(STDIN_FILENO, TCSANOW, &oldtc);
    return total;
}

int main() {
    int n;
    printf("Enter a number: ");
    n = getdigit();
    printf("You entered: %d\n", n);
    return 0;
} 
```

给你，一个`C`只接受数字作为输入的程序。它将忽略所有字母；他们甚至不会出现在终端中。

不过也有一些问题。它不处理整数溢出；输入太多数字，它不会返回正确的值。您可以通过添加一个计数器来解决这个问题，并且不允许超过`x`字符。计数器也可以很好地阻止用户用退格键擦除整行。如果我实施一个计数器，我可能会回来并发布更新。

我只在 Mac OS X Lion 上测试过该程序，但我认为它可以在大多数 Unix 兼容系统上运行。没有任何明示或暗示的保证。

* * *

**编辑：**这是一个实现了该计数器的版本。

```
#include <termios.h>
#include <unistd.h>
#include <stdio.h>

int getdigits(int limit) {
    if (limit > 9 || limit < 1) limit = 9;
    int count = 0;
    int total = 0;
    struct termios oldtc, newtc;
    int ch;
    tcgetattr(STDIN_FILENO, &oldtc);
    newtc = oldtc;
    newtc.c_lflag &= ~(ICANON | ECHO);
    tcsetattr(STDIN_FILENO, TCSANOW, &newtc);
    while (1) {
        ch=getchar();
        if (ch == 127) { // Backspace
            if (count > 0) {
                total /= 10;
                count--;
                printf("\b \b");
            } else {
                putchar('\a');
            }
        } else if (ch == 10) { // Return
            putchar(ch);
            break;
        } else if (ch < '0' || ch > '9') {
            putchar('\a');
        } else {
            if (count < limit) {
                putchar(ch);
                total *= 10;
                total += ch-'0';
                count++;
            } else {
                putchar('\a');
            }
        }
    }
    tcsetattr(STDIN_FILENO, TCSANOW, &oldtc);
    return total;
}

int main() {
    int n;
    printf("Enter a number: ");
    n = getdigits(0);
    printf("You entered: %d\n", n);
    return 0;
} 
```

最大（和默认）限制为 9 位。如果您想要更高的限制，您可以实现该方法的 64 位版本。我没有打扰，因为 OP 将使用此代码来设置二维整数数组的大小。999,999,999*999,999,999*4 字节（假设为 32 位整数）大约等于 4 艾字节，我认为我们还需要一段时间才能拥有这么多内存的计算机。如果你有一台内存这么大的电脑，我很乐意为你制作一个 64 位版本。*（我不知道你会用这样的数组做什么。）

我添加的另一件事是每当用户输入无效输入时都会发出哔哔声。认为当我们不接受他的输入时给用户一些反馈可能会很好。

**当然，我知道您可能希望将输入用于创建巨大的多维数组之外的其他用途，在这种情况下，我也很乐意为您编写 64 位版本。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T22:14:39.690

最简单的方法：使用选择：

```
select a in {20..40}
do
  select b in {5..10} 
  do  
    echo $((a*10+b))
  done
done 
```

无效的输入会被自动拒绝。使用 `Ctrl`+`D`终止。

我应该注意到这`select`是一个`bash`构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T00:47:16.203

这是一个在各种 *ix 上执行单字符、非回显 tty I/O 的 C 示例。它知道如何通过 ifdef 以 3 种不同的方式进行操作。

[http://stromberg.dnsalias.org/~strombrg/ttype/](http://stromberg.dnsalias.org/~strombrg/ttype/)

您今天可能只使用 termios。

# ssas - SQL OLAP Cube and dimension

> ID：10457061
> 
> 赞同：0
> 
> 时间：2012-05-04T22:45:34.710
> 
> 标签：ssas, data-warehouse, olap-cube, cube-dimension

In a windows Server 2008, using SQL server 2005, Visual Studio and SQL Server Analysis Services i created an OLAP Cube.

The scenario is a typical store with sell products, customer and agents.

The cube is made by a fact table tblVendite (sell data) and dimensions based on sql views.

**NOTE**: *I tried embed the screenshot here but they will resized and will not clear so i posted them in a safe site to view it:*

[SCREENSHOT: stucture of the cube](http://www.gaivi.it/adk/cube.jpg)

*   FACT TABLE tblVendite (sell) > **PK: CdArticolo** (IDProduct)
*   DIMENSION Prodotti (produtcs)
*   DIMENSION Calendario (calendar)
*   DIMENSION Agenti (agents)
*   DIMENSION Clienti (customer)

Browsing the cube with basic filters as calendar, customer/agent, products, brand ... all work fine

Now i need to provide a new feature as: **Comparing the "top sell brand" of all company with the sell of each agent to see how he sell those brand**

So i did a new table and the related view: `vwMarcheOrd` (top sell brand)

The table *top sell brand* is pre-populated by a `sp` and contain 1 record for each brand (`CdMarca` - `Position` - `Description` order by Position)

**NOTE**: from `vwMarcheOrd` i cant have direct link to the fact table because the PK is `CdMarca` and it's not present so i need to "bridge" the view Products by `CdMarca` and get the `CdArticolo` to link the fact table

Dimension and the attributes for `Brand` and `Top Brand`:

[SCREENSHOT: cube dimension](http://www.gaivi.it/adk/dimension.jpg)

**BROWSE THE CUBE AND THE PROBLEM**

Adding the dimension `Brand`(1) to the row fields the result is correct but if i add the `Top Brand`(2) **is incorrect and many brand are missing** (but they exist)

[SCREENSHOT: browse Top Brand](http://www.gaivi.it/adk/querybrand.jpg)

So my questions are 2:

1.  What i missing or wrong or misunderstand with the `Top Brand` Dimension ?
2.  `How i can display all records` of Top Brand in the row fields even if the agent didnt sell any item of that brand (blank row) ?

*p.s. i tried also make a dimension based only with vMarcheOrd and then create a Referenced Relationship with the Product table to bridge CdMarca > CdArticolo > Fact Table but the result are the same*

Thanks in advance who can really help me to solve this problem that block me since many days

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:07:14.143

ciao luka :)

it seems to me that you don't have the proper attribute relationship between the attributes on your cube.

I see you are using BIDS 2005, which I'm not very familiar with it (it would be easier to help on 2008), but what you have to do is set the relations between Prodoti -> Brand -> top brand

you can do that by those + signs on the attributes bellow the dimension name.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:05:28.760

From what I understand, it looks like the top brand could change over time. This means that you would need to somehow track that over time. In my opnion, the easiest way to do that would be to add the TopBrandKey to the fact table and join the top brand dimension directly to the fact table. This way the time tracking is done for you in the fact table. As new records come in, you would look up the key for the top brand and add that to the fact table. I don't think the way you have it would work because the product which was sold would not have the brand which is the top brand (those are two different things).

# c# - 为什么我无法在 C# 应用程序中读取由 Java 应用程序创建的 db4o 文件？

> ID：10457065
> 
> 赞同：1
> 
> 时间：2012-05-04T22:46:02.673
> 
> 标签：c#, java, db4o

我有一个由 Java 应用程序生成的 db4o 数据库，我正在尝试使用 C# 应用程序读取它。

但是，在运行以下代码行时：

```
IObjectContainer db = Db4oEmbedded.OpenFile(@"..\..\..\Databases\people.db4o"); 
```

我收到以下错误：

> 无法将“Db4objects.Db4o.Reflect.Generic.GenericObject”类型的对象转换为“Db4objects.Db4o.Ext.Db4oDatabase”类型。

有任何想法吗？我知道数据库中有包含 personId 字段（以及其他字段）的人员对象。我使用的是 db4o 版本 8。我不确定使用什么版本来生成数据库。

整个程序是：

```
using System;
using System.Collections.Generic;
using System.Linq;

using Db4objects.Db4o;
using Db4objects.Db4o.Config;

using MyCompany.Domain;

namespace MyCompany.Anonymizer
{
    internal class Program
    {
        // Private methods.

        private static IEmbeddedConfiguration ConfigureAlias()
        {
            IEmbeddedConfiguration configuration = Db4oEmbedded.NewConfiguration();

            configuration.Common.AddAlias(new TypeAlias("com.theircompany.Person", "MyCompany.Domain.Person, MyCompany.Domain"));

            configuration.Common.Add(new JavaSupport());

            return configuration;
        }

        private static void Main(string[] args)
        {
            IObjectContainer db = Db4oEmbedded.OpenFile(@"..\..\..\Databases\people.db4o");

            try
            {
                IList<Person> result = db.Query<Person>();

                for (int i = 0; i < result.Count; i++)
                {
                    Person person = result[i];

                    Console.WriteLine(string.Format("Person ID: {0}", person.personId));
                }
            }
            finally
            {
                db.Close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T05:35:11.367

引发此异常的最常见情况是 db4o 无法解析存储对象的类型。

在您的情况下，db4o 未能读取其内部对象之一，这让我相信您没有将配置传递给 OpenFile() 方法（当然，您发布的代码没有调用 ConfigureAlias() 方法）；

请记住，从 8.0 版开始，不会对跨平台支持进行进一步改进（您可以[在此处阅读更多详细信息](http://community.versant.com/Blogs/db4o/tabid/197/entryid/964/Default.aspx)）。

# android - Android客户端-服务器通信格式

> ID：10457068
> 
> 赞同：1
> 
> 时间：2012-05-04T22:46:18.943
> 
> 标签：android, json, rest, post, bson

我正在为接受 POST 数据的 Web 服务构建一个 Android 客户端。我们正在为 POST 数据选择哪种格式而犹豫不决。据我说，最简单的方法是以 UrlEncoded 格式发送它，但服务器端开发人员认为 JSON 更好。

使用 UrlEncoded / jsonEncoded / bsonEncoded 格式的优缺点是什么？我会避免使用 xmlencoded 数据，但其他数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:03:43.947

如果您要发送地图（一组键值对）和数组，从开发人员的角度来看，JSON 可能是最容易在客户端和服务器上使用的。如果您需要优化大量非媒体数据的带宽使用，protobuf 效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T23:27:20.660

您问题的答案很大程度上取决于您要发送的数据类型。如果您的数据主要是字符串值、数字等，那么 JSON 可能是您的最佳解决方案。

避免使用 url 编码的数据，改用 MultiPart - 它需要更多的工作，但它更安全（在服务器日志中可见的 url 编码数据）并且您可以轻松发送大文件（图像？）。

# jquery - 显示/隐藏只显示当前内容

> ID：10457070
> 
> 赞同：0
> 
> 时间：2012-05-04T22:46:35.257
> 
> 标签：jquery, html, css

抱歉标题名称我不知道如何解释这个大声笑..

基本上，我有一个使用 jQuery 在同一页面上打开内容的页面。基本上，当页面加载时，简短部分会打开，但是当您单击另一个链接时。然后该内容应该关闭并且应该加载新内容..我什至试过：“.show(0).siblings().hide(0);” 但这只是隐藏了所有内容，只显示了这个特定的 div。

这是代码：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="CSS-reset.css">
<link rel="stylesheet" type="text/css" href="testing.css">
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

```
<header id="header-main" role="Header, banner, logo">

    <hgroup class="logo" role="logo">
    <img src="Logo.png" width="150" height="150">
    </hgroup>
</header>

 <nav class="navigation" role="navigation">

    <a href="#" id="briefLink">Brief</a><br />
    <a href="#" id="researchLink">Research</a><br />
    <a href="#" id="ideasLink">Ideas</a><br />
    <a href="#" id="designLink">App Design</a><br />
    <a href="#" id="implementationLink">Implementation</a>
</nav>      

    <section class="content brief" role="Things about the brief">
    BRIEF
    </section>

    <section class="content research" role="Things for research">
    RESEARCH
    </section>

    <section class="content ideas" role="The ideas part goes here">
    IDEAS
    </section>

    <section class="content design" role="The design part goes here">
    DESIGNS
    </section>

    <section class="content implementation" role="The implementation goes here">
    IMPLEMENTATION
    </section>

    <script>

    $(document).ready(function()
    {
        //$('.brief').hide();
        $('.research').hide();
        $('.ideas').hide();
        $('.design').hide();
        $('.implementation').hide();

          $('#researchLink').click(function()
          {
                var divname= this.name;
                $('.research').show(0).siblings().hide(0);
          });

          $('#ideasLink').click(function()
          {
                $('.ideas').show();
          });

          $('#designLink').click(function()
          {
              $('.design').show();
          });

          $('#implementationLink').click(function()
          {
              $(toggle);
              $('.implementation').show();
          });

    }); 

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:04:30.280

尝试抽象一下切换逻辑。这是您更新的示例 - [http://jsfiddle.net/jaredhoyt/Cj4rn/1/](http://jsfiddle.net/jaredhoyt/Cj4rn/1/)

# javascript - 如何在您的 HTML 代码中生成 PDF (javascript: jspdf, downloadify??)

> ID：10457071
> 
> 赞同：2
> 
> 时间：2012-05-04T22:46:37.243
> 
> 标签：javascript, html, jquery-mobile

我环顾四周，发现了[http://code.google.com/p/jspdf](http://code.google.com/p/jspdf)

这正是我在 jquery mobile 中创建的 Web 应用程序所需要的，用户将在其中从 iPad 或诸如此类（移动设备）填写表格，并能够保存为 PDF，我可以传入一些变量，它是所有表单字段的格式，使其看起来漂亮且可呈现为可以签名的文档 PDF。

现在我在手机测试 jspdf 时遇到了问题，显然他们提供了一种解决方法，有些人使用说将 jsPdf 与 downloadify 一起使用。这是一个链接。

[https://github.com/MrRio/jsPDF/wiki/Jspdf-using-downloadify](https://github.com/MrRio/jsPDF/wiki/Jspdf-using-downloadify)

但是，当我使用该链接时，似乎我只能将其保存为 .txt ......我错过了什么吗？如何将其保存为 PDF？只是将 filename.txt 更改为 filename.pdf 不起作用，因为它说“不支持文件类型”。这到底是怎么使用jspdf的，似乎它只使用downloadify并将任何内容发送到TXT，而不是pdf ......任何人都知道如何使用这种方法（使用downloadify）成功创建PDF，因为它似乎使用downloadify 我实际上可以将文件下载到我的移动设备上。如果没有 downloadify 方法，则不会进行下载。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T13:10:24.287

您可以将文档嵌入到 HTML 中。[使用http://jspdf.com](http://jspdf.com)上的js 库和以下代码在移动设备上嵌入 PDF，其中 #preview-pane 是 html 中的 iframe。

```
var doc = new jsPDF();
doc.text(20, 20, 'Example PDF');
var string = doc.output('datauristring');
$('#preview-pane').attr('src', string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:11:50.203

我最终无法制作客户端版本，因为我无法将 PDF 保存在 ipad 上。我最终用 PHP / FPDF 做了一个服务器端。

# ruby-on-rails - 嵌套命名空间路由到错误的控制器

> ID：10457076
> 
> 赞同：1
> 
> 时间：2012-05-04T22:46:56.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3, namespaces, routes, nested-routes

使用 Rails 3.0.7，我正在为我们的应用程序创建一个 API，并且我有这个设置：

路线.rb

```
 namespace :api do
    namespace :v1 do
      match "connect" => "users#login", :via => :post
      match "disconnect" => "users#logout", :via => :post
      resources :users
      match "users/:id/foos" => "foos#list", :via => :get
      match "users/:id" => "users#update", :via => :put
      match "foos/:id/bars" => "bars#list_by_foo", :via => :get
      match "foos/:id" => "foos#show", :via => :get, :constraints => { :id => /\d+/ }
      match "bars/:id" => "bars#show", :via => :get
    end
  end

  # other routes here e.g.
  match "users/find" => "users#find_by_name", :via => :get
  match "users" => "users#create", :via => :post 
```

然后我有我的常规`app/controllers/application_controller.rb`和`app/controllers/users_controller.rb`文件以及我的`app/controllers/api/v1/application_controller.rb`和`app/controllers/api/v1/users_controller.rb`文件，定义如下：

```
class Api::V1::ApplicationController < ApplicationController
  before_filter :verify_access

  def verify_access
    # some code here
  end
end

class Api::V1::UsersController < Api::V1::ApplicationController
  skip_before_filter, :except => [:show, :update, :delete]
end 
```

在一切似乎都正常工作之前，直到我覆盖了由 UsersController 和 Api::V1::UsersController 共享的方法 - 现在似乎一切都指向 UsersController，即使我正在通过 api/v1 访问/用户路线。

我无计可施，试图弄清楚。有什么建议么？谢谢。PS - 随意评论我忽略的任何约定我不应该或其他我可能搞砸的事情:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:14:08.290

`skip_before_filter`也一般为之前的过滤器采用符号参数，而不是您希望跳过的。只要应用了正确的范围/命名空间，控制器名称就不必是唯一的。

例子

*   api/users_controller
*   管理员/用户控制器
*   users_controller

然后每个控制器的代码

```
class Api::V1::UsersController < Api::V1::BaseController
end

class Admin:UsersController < Admin::BaseController
end

class UsersController < ApplicationController
end 
```

然后是路线

```
MyApp::Application.routes.draw do

scope :module => "api" do
  namespace :v1 do
    resources :users
  end
end

namespace :admin do
  resources :users
end

  resources :users
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T19:44:56.777

Rails 有点令人困惑，但我遇到了类似的问题。以下是您可以采取的一些步骤，以确保您不会遗漏任何小代码问题。（这最终导致我在命名空间控制器中发现了一个语法错误）。

1.  运行`bundle exec rake routes`以生成哪些路由链接到哪些控制器和操作的列表。如果这很好，则转到第 2 步。如果没有，请修复您的路线文件并重试。（这方面有很多很好的教程，所以我不会详细介绍）
2.  进入 rails 控制台，然后加载控制器类。如果它不起作用，您可能已经发现了语法错误。这是我尝试加载`Api::V2::CampaignsController`.

    irb> Api::V2::CampaignsController

    => CampaignsController

注意：Rails 将所有请求定向到错误的控制器（基于 Rails 加载控制器类的奇特逻辑）。它应该转到 Api::V2::CampaignsController，但它正在加载 CampaignsController。

您还可以在控制台中使用以下命令进行验证：

```
> app.get '/api/v2/campaigns.json'
> app.controller.class
=> CampaignsController
# This is not the expected controller. 
```

这最终成为我从 Api::V2::CampaignsController 扩展的类中的语法问题。

这有点令人难以置信，但希望这对其他人有帮助。

# mongodb - Mongo 查询给出了意想不到的结果

> ID：10457081
> 
> 赞同：1
> 
> 时间：2012-05-04T22:47:23.173
> 
> 标签：mongodb, mongodb-query

谁能告诉我为什么这个查询会返回这个记录？

询问：

```
db.sales.findOne({"qualified": true, created_at: {$gte:1334534400}, campaign: {$exists:1}}) 
```

记录：

```
{
        "_id" : ObjectId("4f8b6ef8da45bb3e600001fe"),
        "grand_total" : 9.99,
        "order_id" : "T003974723",
        "items" : [
                {
                        "price" : 9.99,
                        "id" : "23958754",
                        "name" : "UO Daisy Sunglasses",
                        "qty" : 1
                }
        ],
        "created_at" : 1334537675,
        "visitor_id" : "1332652531389",
        "unique_session_id" : "i-0f7e196e-110800",
        "session_id" : "i-0f7e196e-110800",
        "qualified" : true,
        "needler_id" : 357,
        "ip_address" : "76.103.214.29",
        "in_session" : true
} 
```

我以为我是在要求 mongo 给我一个记录，其中包含“campaign”是一个属性。但是，如您所见，此记录没有名为“campaign”的属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:50:02.523

你用的是哪个版本的mongodb？显然使用**$exists: 1**（而不是**$exists: true**仅支持从 v1.9 开始：

[https://jira.mongodb.org/browse/SERVER-2322](https://jira.mongodb.org/browse/SERVER-2322)

# haskell - Haskell 代数数据类型模式匹配

> ID：10457083
> 
> 赞同：1
> 
> 时间：2012-05-04T22:47:46.990
> 
> 标签：haskell, pattern-matching, algebraic-data-types

我有以下内容：

```
data Alpha a = Beta a [Alpha a]
val = Beta 1 [Beta 2 [], Beta 5 [Beta 7 []]] 
```

我正在尝试定义一个函数，该函数将移动 Alpha Int 类型的 val 并将其求和。我想要的方法是提取所有 Ints，然后对结果列表求和，但我正在努力提取所有 Ints，因为我不知道如何处理递归......

轻微的尝试：

```
checkAlpha :: Alpha Int -> [Int]
checkAlpha (Beta a []) = [a]
checkAlpha (Beta a b) = [a] ++ (map checkAlpha b) 
```

显然这不太有效，但我看不到解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T22:51:12.617

If you used

```
concatMap :: (a -> [b]) -> [a] -> [b] 
```

instead of `map`, it would work and be elegant enough.

You don't need to treat the case of an empty list as second component specially,

```
checkAlpha :: Alpha a -> [a]
checkAlpha (Beta a alphas) = a : concatMap checkAlpha alphas 
```

does what you want, and is independent of the parameter type.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:33:52.397

您可以考虑使用[`Tree`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Tree.html)而不是`Alpha`，它有许多方便的操作：

```
> flatten $ Node 1 [Node 2 [], Node 5 [Node 7 []]]
[1,2,5,7] 
```

# android - 在 Android 4.0 中更改了垂直文本间距

> ID：10457084
> 
> 赞同：0
> 
> 时间：2012-05-04T22:47:51.840
> 
> 标签：android, android-4.0-ice-cream-sandwich, textview

我有一个允许用户更改文本大小的应用程序。在 Android 2.X 上，当您将文本缩小时，垂直间距也会变小。在 4.X 上，文本变小并且间距保持不变。

我用来改变大小的调用是（有一个循环来改变多行）：

```
tvData[i].setTextSize(TypedValue.COMPLEX_UNIT_PX, fSize); 
```

文本字段在 main.xml 中描述如下（不止一个，它们都在前一个“下方”。

```
<TextView android:id="@+id/textOut1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:typeface="monospace"
    android:textSize="28dip"
    android:textColor="#000000"
    android:textStyle="bold"
    android:layout_below="@id/textOut0"
    /> 
```

我该怎么做才能在新旧Android中都有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:54:41.500

解决方法是不要将每一行文本放在单独的 TextView 中。通过将所有文本放在一个 TextView 中并以换行符结束每一行，它现在可以在更改字体大小时调整垂直间距。

并且更改为 1 已经过测试，也可以在旧版本的 Android 上运行。

我不记得为什么我首先使用了一组 TextViews，现在看起来似乎是一个糟糕的选择，但它确实适用于旧版本。

汤姆兹

# perl - Perl：从“系统”命令捕获正确的返回值

> ID：10457086
> 
> 赞同：5
> 
> 时间：2012-05-04T22:48:05.937
> 
> 标签：perl, exit-code

我是 Perl 的初学者。我有一个包含多个 NMake 命令的 Windows 批处理脚本。此批处理脚本的一个现有问题是，即使 NMake 命令在执行期间失败，`ERRORLEVEL`也没有正确设置。

因此，在我们解析日志文件之前，我们永远不知道该命令是否有效。我调查了它，但找不到解决方案。我，然后考虑将此批处理脚本转换为 Perl 脚本，假设捕获错误会更容易，但似乎并不那么容易:)

每当我运行我的 Perl 脚本时，'system' 命令总是返回 0。我查看了许多不同的链接，并意识到捕获 'system' 命令的正确返回状态并不是那么简单。不过，我尝试了这些建议，但事情没有奏效。:(

让我提一下，被调用的 NMake 命令在执行过程中又调用了许多不同的命令。例如，下面提到的抛出“致命错误”的命令输出实际上是 Perl 脚本 (check_dir.pl) 的一部分。这个对 Perl 脚本的调用是写在 NMake 文件本身中的。

*如果我直接*调用这个 Perl 文件 ( `check_dir.pl`)并检查退出值，我会得到正确的结果，即命令失败并打印一个*非零*退出值（...*意外返回退出值 2*）。

 ***尝试了 Perl 的系统功能，但没有帮助。我使用了以下代码：

```
system ("nmake /f _nt.mak pack_cd SUB_PLAT=$PLAT DR=$plat 2>&1");

if ( $? == -1 ) {
    print "Command failed to execute: $!\n";
}
elsif ( $? & 127 ) {
    printf "The child died with signal %d, %s a coredump\n",
    ( $? & 127 ), ( $? & 128 ) ? 'with' : 'without';
}
else {
    printf "child exited with value %d\n", $? >> 8;
} 
```

输出：

```
......  
......  
无法打开目录：R:\TSM_Latest  
压缩... NMAKE：致命错误 U1077：'if'：返回代码 '0x2'  
停止。  
孩子以值 0 退出
```

也试过：

```
use IPC::System::Simple qw(system);  
my $exit_status = system ("nmake /f _nt.mak pack_cd SUB_PLAT=$PLAT DR=$plat 2>&1");

if ($exit_status != 0) {  
    print "Failure";  
    exit 3;  
} else {  
    print "Success";  
} 
```

最后尝试了以下模块：

```
use IPC::Run qw( run timeout );  
run "nmake /f _nt.mak pack_cd SUB_PLAT=$PLAT DR=$plat 2>&1" or die "NMake returned $?"; 
```

似乎没有任何工作:(

如果我解释`system`错误的返回值，请纠正我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T22:50:21.053***

# java - 如何复制 java.util.list 集合

> ID：10457087
> 
> 赞同：45
> 
> 时间：2012-05-04T22:48:21.357
> 
> 标签：java, clone

我正在实现一个负责订购 java.util.List 的 Java 类。当我使用这个类时，问题就来了。我可以订购列表，但我想复制“原始”列表而不进行修改，以便我可以注册原始列表上所做的每一个更改。排序后的列表包含对象，其中一个字段存储了一个分类 id，这个 id 用列表的索引值更新。

我尝试使用克隆方法，它使列表保持未排序，但对原始列表所做的更改也在克隆列表中更新。

有没有办法实现它？

我的代码：

```
List<Torero> listaTorero = tbTlgTorerolHome.findByExample(new Torero());
List<Torero> listaToreroTemp = ((List<Torero>) ((ArrayList<Torero>) listaTorero).clone()); 

Clasificacion clasificacion = new Clasificacion();

Iterator<Torero> iterTorero = clasificacion.getClasificacion(listaTorero, torero).iterator(); //Sorting List 
```

分类方法：

```
public List<Torero> getClasificacion(List<Torero> listaToreroTemp, Torero torero)
{

    List<Torero> listaTorero = new ArrayList<Torero>();

    Collections.sort(listaToreroTemp,new ToreroClasifiacionComparator());

    Iterator<Torero> iterTorero = listaToreroTemp.iterator();
    int index=1;
    while(iterTorero.hasNext())
    {
        Torero toreroTemp = iterTorero.next();
        toreroTemp.setNumClasificacion(index);
        listaTorero.add(toreroTemp);
        index=index+1;
    }
    return listaTorero;
} 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-05-04T22:52:31.763

You may create a new list with an input of a previous list like so:

```
List one = new ArrayList()
//... add data, sort, etc
List two = new ArrayList(one); 
```

This will allow you to modify the order or what elemtents are contained independent of the first list.

Keep in mind that the two lists will contain the same objects though, so if you modify an object in List two, the same object will be modified in list one.

example:

```
MyObject value1 = one.get(0);
MyObject value2 = two.get(0);
value1 == value2 //true
value1.setName("hello");
value2.getName(); //returns "hello" 
```

**Edit**

To avoid this you need a deep copy of each element in the list like so:

```
List<Torero> one = new ArrayList<Torero>();
//add elements

List<Torero> two = new Arraylist<Torero>();
for(Torero t : one){
    Torero copy = deepCopy(t);
    two.add(copy);
} 
```

with copy like the following:

```
public Torero deepCopy(Torero input){
    Torero copy = new Torero();
    copy.setValue(input.getValue());//.. copy primitives, deep copy objects again

    return copy;
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-04T22:51:26.747

Use the ArrayList copy constructor, then sort that.

```
List oldList;
List newList = new ArrayList(oldList);
Collections.sort(newList); 
```

After making the copy, any changes to newList do not affect oldList.

Note however that only the *references* are copied, so the two lists share the same objects, so changes made to *elements* of one list affect the *elements* of the other.

# objective-c - iOS Objective-C 必读

> ID：10457091
> 
> 赞同：0
> 
> 时间：2012-05-04T22:49:08.253
> 
> 标签：objective-c

我在应用商店中有一个 iOS 应用。我正在为它开发一些新功能。一些代码是我手工制作的，其他部分是从这个精彩网站上的答案拼凑而成的，但是我觉得我的代码有点难看，可以改进。当我在下面看到一些东西时，我并不完全理解它是如何自动使用的，以及它是如何准确地暗示一个循环的。所以我想知道在可能更多地研究我的应用程序之前，有什么好的阅读材料可以更多地了解objective-c。

我一直在 ios 开发中心网站上浏览一些文章，但如果你们能提出一些具体的建议，我将不胜感激。从我做 C++ 的时候起，我就对堆和堆栈内存管理有了一定的了解，但我不得不承认，我对 Objective-c 是如何做到的并不那么坚定。

```
- (void)tableView:(UITableView *)aTableView 
commitEditingStyle:(UITableViewCellEditingStyle)editingStyle
forRowAtIndexPath:(NSIndexPath *)indexPath { ... } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:42:55.540

为了全面了解 iOS 和 ObjC，我建议一两本书：

*   iOS 编程： Conway & Hillegass[的大书呆子牧场指南](https://rads.stackoverflow.com/amzn/click/com/0321821521)
*   [开始 iOS 5 开发：](https://rads.stackoverflow.com/amzn/click/com/1430236051) Mark、Nuttig 和 LaMarche探索 iOS SDK

和/或关注 iTunes U 上的[斯坦福 iOS 课程](http://itunes.apple.com/us/course/ipad-iphone-app-development/id495052415)。那里也有一些很好的教程和解释博客：[Ray Wenderlich](http://www.raywenderlich.com/)和[Cocoa is my Girlfriend](http://cimgf.com)是第一个想到的。

对于更具体的表视图或其他子系统，Apple 开发人员文档中的[编程指南](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451)还不错。

# html - 在段落中间创建一段动态文本

> ID：10457094
> 
> 赞同：0
> 
> 时间：2012-05-04T22:49:43.070
> 
> 标签：html, css, widget

本质上，我想要实现的是文本的动态部分——在段落的中间，这是动态的。我在创建一个内联`div`（或`span`）时遇到问题，该内联（或）可以包含无序列表或其他几个`spans`我可以向上或向下移动以显示它们的内容。想象一个窗口（带有溢出），其中包含 4 个相互堆叠的 div，只有足够的空间来显示其中一个（其余的被隐藏）。我希望能够上下移动这个堆栈以显示这个堆栈的其他部分。

我希望有人可以回复一个 jsfiddle，显示一大块文本，中间有一个动态部分，与段落中的其余文本一致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:14:28.910

经过一番考虑，`vertical-align: bottom`似乎是我最好的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:57:13.640

你可以从这样的东西开始，使用[jQuery Draggable](http://jqueryui.com/demos/draggable/#constrain-movement)。

[http://jsfiddle.net/RqHFL/](http://jsfiddle.net/RqHFL/)

像这样将“可拖动”应用于您的 div：

```
$( "#draggable1" ).draggable({ axis: "y" }); //constrained to y axis movement 
```

# c# - SQL Server Compact 向主机操作系统发出了不受支持的请求

> ID：10457097
> 
> 赞同：0
> 
> 时间：2012-05-04T22:49:55.370
> 
> 标签：c#, sql-server-ce, windows-ce

我有一个带有设备内 SQL Server CE 数据库 ( `.sdf`) 的 .Net Compact Framework 应用程序。过去一年我一直在做这件事。最近，我越来越

> SQL Server Compact 向主机操作系统发出了不受支持的请求。

从 C# 打开 SQL Server CE 连接时出错。我已经做了很多谷歌搜索，但似乎没有找到一个好的解决方案。

我在模拟器中收到此错误。

环境：

*   开发：VS2008 Pro、.Net 3.5、SQL Server CE 3.5 SP1。操作系统：Windows 7 64 位
*   设备：Windows Mobile 5 PocketPC 模拟器

有什么建议吗？

谢谢， D2

# php - PHP 检测页面从哪里加载

> ID：10457100
> 
> 赞同：-1
> 
> 时间：2012-05-04T22:50:13.770
> 
> 标签：php

我已经搜索并搜索了谷歌的答案，但找不到答案。我需要一个 PHP 脚本或 javascript（PHP 会更好，但我不介意）来检测是否正在从 SERVERIP/page.php 或 SERVERDOMAIN.com/page.php 加载页面。我有不缓存页面的服务器 IP，并且我有缓存页面的域。我想确保如果页面是从 SERVERDOMAIN 加载的，它会被重定向到 SERVERIP，因此它不会获取缓存页面。

例子。我转到 SERVERDOMAIN 的一个页面，我得到缓存的页面，然后我转到另一个不需要缓存的页面，因此它被重定向到 SERVERIP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:36:57.660

看看是否 `>$_SERVER['HTTP_REFERER']` 适合你。

# mysql - MySQL 查询以前可以工作，现在不行了吗？

> ID：10457108
> 
> 赞同：0
> 
> 时间：2012-05-04T22:51:15.087
> 
> 标签：mysql

我遇到了一个奇怪的问题，我一点也不知道它为什么不起作用。我构建了以下查询：

```
SELECT servers.id, servers.name, servers.address, servers.port, servers.up, servers.down, servers.genre, servers.score, servers.version, servers.country, ROUND( AVG( reviews.average ) , 0 ) AS review
FROM servers
INNER JOIN reviews ON servers.id = reviews.server
ORDER BY servers.score DESC 
```

几周前，此查询运行良好。它的目的是从“servers”表中获取许多字段，以及“reviews”表中的平均字段，其中“reviews”表中的服务器与“servers”表中的 id 相同。

就像我说的，这个查询以前工作得很好。昨天我注意到我网站的一个重要部分没有工作，我发现这个查询失败了。

我已经确认返回正好 1 行（此时它应该返回 4，因为“服务器”表中有 4 个条目。）这是 phpMyAdmin 在我执行该查询时给我的：

```
id    name  address  port   up    down  genre   score   version  country   review
NULL  NULL  NULL     NULL   NULL  NULL  NULL    NULL    NULL    NULL       NULL 
```

有人可以启发我吗？我作为最后的手段来到这里，因为我被困住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:28:07.053

如评论中所述，尝试将其更改为`INNER JOIN`将`LEFT OUTER JOIN`返回服务器的，无论评论表中是否存在匹配的行。此外，您没有发布您的架构，但仔细检查`reviews.server`了评论表中的列，它可能是`server_id`相反的。另一个问题，你正在做`AVG`一个分组计算，但你没有`GROUP BY`子句，所以我建议添加它，所以你的完整查询应该如下所示：

```
SELECT servers.id, servers.name, servers.address, servers.port, servers.up, servers.down, servers.genre, servers.score, servers.version, servers.country, ROUND( AVG( reviews.average ) , 0 ) AS review
FROM servers
LEFT OUTER JOIN reviews ON servers.id = reviews.server # might be reviews.server_id
GROUP BY reviews.server
ORDER BY servers.score DESC 
```

[有关 GROUP BY函数](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html)的更多信息。

**- 更新 -**

```
SELECT servers.id, servers.name, servers.address, servers.port, servers.up, servers.down, servers.genre, servers.score, servers.version, servers.country, IFNULL(ROUND(AVG(reviews.average)), 0) AS review
FROM servers
LEFT OUTER JOIN reviews ON servers.id = reviews.server
GROUP BY servers.id
ORDER BY servers.score DESC 
```

# internet-explorer - 为什么 HTML1113：文档模式从 IE9 标准重新启动到 Quirks

> ID：10457111
> 
> 赞同：23
> 
> 时间：2012-05-04T22:51:36.680
> 
> 标签：internet-explorer, browser, internet-explorer-9, quirks-mode

我在 IE9 中打开一个网页 - 突然文档模式切换到 Quirks 模式。页面本身非常简单 - 没有 doctype，没有元标记，只是形成页面的 xslt 内的一段（测试目的）javascript。
请参阅[http://home.arcor.de/martin.honnen/xslt/test2012041901.xml](http://home.arcor.de/martin.honnen/xslt/test2012041901.xml)在同一位置使用提到的 xsl。为方便起见，我复制了以下内容。

页面内容是

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="test2012041901.xsl"?>
<test/> 
```

而 xsl 包含

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0"
  xmlns:ms="urn:schemas-microsoft-com:xslt"
  xmlns:my="http://example.com/my"
  exclude-result-prefixes="ms my">

  <xsl:output method="html" version="5.0"/>

  <ms:script language="JScript" implements-prefix="my">
  <![CDATA[
  function tokenize (input) {
    var doc = new ActiveXObject('Msxml2.DOMDocument.6.0');
    var fragment = doc.createDocumentFragment();
    var tokens = input.split(';');
    for (var i = 0, l = tokens.length; i < l; i++)
    {
      var item = doc.createElement('item');
      item.text = tokens[i];
      fragment.appendChild(item);
    }
    return fragment.selectNodes('item');
  }
  ]]>
  </ms:script>

  <xsl:template match="/">
    <html>
      <head>
        <title>Example</title>
      </head>
      <body>
        <h1>Example</h1>
        <ul>
          <xsl:apply-templates select="my:tokenize('Kibology;for;all')"/>
        </ul>
      </body>
    </html>
   </xsl:template>

   <xsl:template match="item">
     <li>
       <xsl:value-of select="."/>
     </li>
   </xsl:template>

</xsl:stylesheet> 
```

为什么会这样？它是触发此的互联网选项设置吗？如何防止在 IE9 中自动选择怪癖模式？
并且：在同一页面的早些时候，这种自动怪癖模式没有发生——我一定做了一些事情，比如更改设置，甚至可能只是来回返回原始值，这导致了这种行为的改变。但是什么？

F12 开发人员工具在控制台中显示以下内容：

```
XML5001: Applying Integrated XSLT Handling. 
HTML1114: Codepage unicode from (UNICODE byte order mark) overrides conflicting codepage utf-8 from (10) 
test2012041901.xml
HTML1113: Document mode restart from IE9 Standards to Quirks 
test2012041901.xml
HTML1114: Codepage unicode from (UNICODE byte order mark) overrides conflicting codepage utf-8 from (10) 
test2012041901.xml 
```

不确定字节顺序标记消息的全部内容 - 也许与问题有关？

哦，开发工具也在脚本部分显示了这一点：

```
㼼浸⁬敶獲潩㵮ㄢ〮•湥潣楤杮∽呕ⵆ∸㸿㰊砿汭猭祴敬桳敥⁴祴数∽整瑸砯汳•牨晥∽整瑳〲㈱㐰㤱㄰砮汳㼢ਾ琼獥⽴ਾ 
```

请注意，所有这些仅发生在新打开的选项卡上，而不是现有的处于怪癖模式的选项卡。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T07:34:34.193

由于没有人跳到这个场合，我将自己回答这个问题。
正如 paulsm4 在对该问题的评论中指出的那样，触发怪癖模式的是缺少的文档类型。请参阅[http://hsivonen.iki.fi/doctype/](http://hsivonen.iki.fi/doctype/)以获得对文档类型、浏览器类型和生成的浏览器模式的出色概述。

关于有趣的亚洲字符串——我对此做了一些进一步的研究，发现了它的来源。我在 UltraEdit 中打开了一个新文件，先将其从 utf-8 转换为 unicode，然后复制文本。十六进制视图中的结果揭示了一切：

![小端](../Images/a8ad00d0bbb9f595833f702d6578a7cc.png)

如我们所见，它只是上传的 xml 文件，加上前面的字节顺序标记 FF FE，根据维基百科，它是一个 utf-16 Little Endian 的：

![字节顺序标记](../Images/026e0b18be53a74e016364cc8c9e7bca.png)

现在对于控制台中的消息：浏览器中的事件顺序显然如下：

1.  获取 XML 文件
2.  获取引用的 XSL 文件并应用转换 (XML5001)；处理结果
3.  BOM = FF FE，即 utf-16 覆盖 xml 标头中提到的 utf-8 (HTML1114)
4.  IE9 注意到缺少 doctype，切换到 quirks 模式 (HTML1113) 并再次重新加载结果文件
5.  同样，BOM 编码会覆盖 xml 标头编码 (HTML1114)
6.  显示的文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T22:57:08.473

您是否尝试过在生成的 HTML 中明确设置兼容性？

[HTML5 doctype 将 IE9 置于怪异模式？](https://stackoverflow.com/questions/6529728/html5-doctype-putting-ie9-into-quirks-mode)

```
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  .. 
```

# algorithm - Algorithm to iterate through image pixels

> ID：10457112
> 
> 赞同：0
> 
> 时间：2012-05-04T22:52:05.603
> 
> 标签：algorithm

I'm sure something for this already exists so I figure why reinvent the wheel.

Does anyone know of an algorithm that will iterate through pixels in an image from the top left towards the bottom right.

So first it will check: `(0, 0)`

Then: `(1, 0), (1, 1), (0, 1)`

Then `(2, 0), (2, 1), (2, 2), (1, 2), (0, 2)`

... and so on....

Looking for the most efficient algorithm for this problem.

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:11:51.973

您似乎想以这种方式进行迭代：

```
1 4 9
  ↑ ↑
2→3 8
    ↑
5→6→7

... 
```

这只是一个 for 循环：

```
for radius in range(squareImage.width):
    for col in range(radius):
        yield (radius, col)
    for row in range(radius):
        yield (radius-row, radius)
    yield (0, radius) 
```

效率在这里不是问题。不可能比线性像素数（像这样）做得更好，因为您必须访问每个像素。

# c# - TPL's Parallel.For creates and destroys threads too much. How do I keep the number of threads constant?

> ID：10457115
> 
> 赞同：1
> 
> 时间：2012-05-04T22:52:43.357
> 
> 标签：c#, task-parallel-library

I have some code written to use Parallel.For with thread local variables. It's basically a summation of a large array, but the elements of the array are calculated explicitly in the for loop at the same time they are being summed.

The problem I'm having is that my thread-local variables are very, very heavy objects. It's not uncommon for them to take up 200 mb of memory. I noticed my program's memory usage would spike to 2 gb, then the GC would drop it back down to 200 mb and up and down it went, which indicated a lot of temporaries were being allocated. Since I need several thread-local variables, I've wrapped them in a struct object. This allowed me to add a Console.WriteLine in the constructor and I saw a lot of my objects being created whereas I only expected one construction per core on my machine. How can I force it to create exactly (numberOfCores) threads and keep only those around until the end?

I added

```
ParallelOptions options = new ParallelOptions();
options.MaxDegreeOfParallelism = 2; 
```

which helped only slightly. I still get too many struct constructions. It looks like there is something I can do with options.TaskScheduler, but I can't seem to understand what the extent of its power is. It looks like I can roll my own, which is almost scary. I don't want to do that if possible.

Here is the relevant section of code in my program.

```
ParallelOptions options = new ParallelOptions();
options.MaxDegreeOfParallelism = 2;

Parallel.For<ThreadLocalData>(0, m, options,
    // Thread local variable initialization
    () => new ThreadLocalData(new DenseMatrix(r * r, r * r, 0),
                              new DenseMatrix(r * r, r * r, 0),
                              new DenseMatrix(r, r, 0)),
    // Per-thread routine
    (row, loop, threadLocalData) =>
    {
        threadLocalData.kronProductRight.Clear();
        for (int column = 0; column < n; ++column)
        {
            if ((int)E[row, column] == 1)
                threadLocalData.kronProductRight.Add(Yblocks[column], threadLocalData.kronProductRight);
        }
        MathNetAdditions.KroneckerProduct(Xblocks[row], threadLocalData.kronProductRight, threadLocalData.kronProduct);
        threadLocalData.subtotal.Add(threadLocalData.kronProduct, threadLocalData.subtotal);
        return threadLocalData;
    },
    (threadLocalData) =>
    {
        lock (mutex)
        A.Add(threadLocalData.subtotal, A);
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:07:07.927

查看这篇文章[http://blogs.msdn.com/b/pfxteam/archive/2010/10/21/10079121.aspx](http://blogs.msdn.com/b/pfxteam/archive/2010/10/21/10079121.aspx)特别是关于 Parallel.For 在初始化委托很昂贵时出现性能问题的部分。

从上面的代码很难判断，但看起来您应该能够将 ThreadLocalData 的计算/数据部分与它的状态/变异方面分开？理想情况下，您会将不可变版本的 ThreadLocalData 的引用传递给正在处理您的数字的任何内容。这样，无论如何，您都只是在处理一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:09:32.717

我还没有深入了解您的问题（而且似乎您提出了错误的问题，正如 phoog 指出的那样），但要回答您的具体问题：

> 我怎样才能强制它精确地创建（numberOfCores）线程并只保留那些直到结束？

你有一个调度程序可以做到这一点：

[http://blog.abodit.com/2010/11/task-parallel-library-a-scheduler-with-priority-apartment-state-and-maximum-degree-of-parallelism/](http://blog.abodit.com/2010/11/task-parallel-library-a-scheduler-with-priority-apartment-state-and-maximum-degree-of-parallelism/)

# javascript - JavaScript 无法从函数的数组参数中获取值

> ID：10457118
> 
> 赞同：1
> 
> 时间：2012-05-04T22:53:26.327
> 
> 标签：javascript, arrays, function, parameters

我正在尝试根据它们的高度在列中订购一些图像，并且我有以下代码。问题是即使 imgHeights.length 工作正常， imgHeights[i] （在 redrawThumbs 函数中）不会返回值。我究竟做错了什么？谢谢 =)

```
function redrawThumbs(imgHeights){
  // some irrelevant code here

  // initialise an array that will hold all the column's heights
  var colHeights = new Array(cols);
  for(a=0; a <= colHeights.length - 1; ++a){
    colHeights[a] = 0;
  }

  // take each image's height and add it to the shortest column
  for(i=0; i <= imgHeights.length - 1; ++i){
    var shortestCol = 0;

    for(c=0; c <= colHeights.length - 2; ++c){
      if(colHeights[c+1] < colHeights[c]){
        shortestCol = colHeights[c+1];
      }
    }

    alert("imgHeights[" + i + "] " + imgHeights[i]);

    colHeights[shortestCol] += imgHeights[i];
  }
}

// make an array of image heights
var imgHeights = new Array(totalThumbs);    
for(i=1; i <= totalThumbs; ++i){
  var img = new Image();
  img.onload = function(){
  imgHeights[i-1] = this.height;
}
img.src = i + ".jpg";

// call function that orders the images
redrawThumbs(imgHeights); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:12:00.943

问题之一是`i`变量是通过引用捕获的，而不是通过值捕获的，因为所有的回调`img.onload`都获得了相同的值`i`。考虑将`onload`分配更改为，

```
var loadedCount = 0;
img.onload = (function (i) { 
    return function () { 
        imgHeights[i - 1] = this.height;
        if (++loadedCount == totalThumbs) allLoaded();
    };
})(i);

function allLoaded() {
    // called after all the images have been loaded.
} 
```

`i`这会在自动执行函数执行时捕获值的副本，并`allLoaded()`在加载所有图像后调用。

# assembly - FAT 12 Implementation

> ID：10457120
> 
> 赞同：1
> 
> 时间：2012-05-04T22:53:44.277
> 
> 标签：assembly, operating-system, fat

I have been following the Operating System development tutorial on [http://www.brokenthorn.com](http://www.brokenthorn.com). Right now I'm trying to setup the BIOS parameter block with this code:

```
jmp loader
bpbName db "NubOS",0,0,0
bpbBytesPerSector:      DW 512
bpbSectorsPerCluster:   DB 1
bpbReservedSectors:     DW 1
bpbNumberOfFATs:        DB 2
bpbRootEntries:         DW 224
bpbTotalSectors:        DW 2880
bpbMedia:               DB 0xF0
bpbSectorsPerFAT:       DW 9
bpbSectorsPerTrack:     DW 18
bpbHeadsPerCylinder:    DW 2
bpbHiddenSectors:       DD 0
bpbTotalSectorsBig:     DD 0
bsDriveNumber:          DB 0
bsUnused:               DB 0
bsExtBootSignature:     DB 0x29
bsSerialNumber:         DD 0xa0a1a2a3
bsVolumeLabel:          DB "MOS FLOPPY "
bsFileSystem:           DB "FAT12   " 
```

However, when I try to open the disk using the [ImDisk driver](http://www.geardownload.com/system/imdisk-download.html) for virtual floppies, it says that the drive needs to be formatted. Is the code I'm using correct?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:16:20.443

您缺少 BPB 之前的 3 字节跳转指令。bytes-per-sector word 应该在相对于磁盘开头的偏移量 0x0b 处，而不是在 0x08 处。跳转将转到 BPB 之后的引导加载程序代码（如果跳转足够短以至于只需要两个字节，则后面跟着一个 nop）。

如果一台机器永远不会从磁盘启动，您可以在前三个字节中放置任意值，但传统的做法是无论如何都要跳转，这会转到一段代码，打印类似`This disk is not bootable`的内容然后停止机器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T19:22:16.950

尝试*短跳转*：扇区以开头`jmp short loader`，然后是`nop`，然后是，然后是所有代码，然后是 512 字节扇区的最后 2 个字节和。这两个必须分别位于偏移量和。`bpbName``bsFileSystem``loader:``0x55``0xAA``510``511`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T14:59:39.427

您可以在这里找到完整的 FAt12 驱动程序实现： [Simple Operating System with Fat 12 Driver](http://www.brokenthorn.com/forums/viewtopic.php?f=14&t=2890)。

# php - How to match few words with spaces - preg_match()?

> ID：10457121
> 
> 赞同：0
> 
> 时间：2012-05-04T22:54:04.463
> 
> 标签：php, regex, preg-match

I need to match only a-z 0-9 and spaces between words and numbers. I try with [a-z0-9\s] but with this regex I match \n \t and \r.

I try with this: [http://regexr.com?30rs7](http://regexr.com?30rs7) but I don't know is this code work correctly and I ask about the correct regexp :)

Regards, George!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:55:43.077

从字面上理解：

```
[a-z0-9 ] 
```

空格而不是`\s`与您不想匹配的其他人匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:56:18.103

怎么样`[a-z0-9 ]`？

那应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:57:40.857

我在您的情况下使用的正则表达式是这样的：

```
[a-zA-Z0-9 ] 
```

# django - Django, Set some values of a form field in the model

> ID：10457127
> 
> 赞同：0
> 
> 时间：2012-05-04T22:54:42.597
> 
> 标签：django, forms, django-models

It's a bit odd but I would like to define some properties of a form field like its widget or class from the model definition. I know it is easy from the form but I'd like to know if it's possible from the model. I'm not sure but I think I remember having seen something like that some day.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-04T23:21:51.487

好吧，您可以创建自己的模型字段子类并重新定义它们的`formfield`方法以添加您想要的属性，但可能不值得付出努力，因为您将被覆盖。然而，那是小时电话。

无论如何，如果您决定尝试此操作，请确保遵循文档中的这两个部分： [ModelForms 和自定义字段](https://docs.djangoproject.com/en/1.4/howto/custom-model-fields/#modelforms-and-custom-fields) 以及 [将模型字段的表单字段指定](https://docs.djangoproject.com/en/1.4/howto/custom-model-fields/#specifying-the-form-field-for-a-model-field)为默认实现`Field.formfield`做一些您通常不想做的重要事情忽略。

# pdf - Ghostscript rotate pages

> ID：10457128
> 
> 赞同：6
> 
> 时间：2012-05-04T22:55:05.913
> 
> 标签：pdf, ghostscript, postscript, printer-control-language

I use Ghostscript to convert PDF documents to PCL for printing. Recently I have the additional requirement that all pages must be rotated to Portrait before printing. I have found a way to do so using Ghostscript with following command and postscript function.

```
"C:\Program Files (x86)\gs\bin\gswin32c.exe" "-dNOPAUSE" "-dNOPROMPT" "-dBATCH" "-sDEVICE=pxlmono" "-Ic:\Program Files (x86)\gs\fonts\;c:\Program Files (x86)\gs\lib\;c:\Program Files (x86)\gs\lib\;" "-r300" "-sOutputFile=C:\EXPORTFILE_e542e04f-5e84-4c8e-9b41-55480cd5ec52.cache" "rotate612x792.ps" "C:\EXPORTFILE_3a5de9da-d9ca-4562-8cb6-10fb8715385a.cache" 
```

Contents of rotate612x792.ps

```
%! Rotate Pages
<< /Policies << /PageSize 5 >> 
   /PageSize [612 792] 
   /InputAttributes currentpagedevice 
   /InputAttributes get mark exch {1 index /Priority eq not {pop << /PageSize [612 792] >>} if }  forall >>
   >> setpagedevice 
```

The problem is that this function replaces all page sizes with letter size. My documents are sometimes legal or A4\. I have tried to modify this function to replace landscape sizes with their portrait counterpart, but have not been able to produce functioning postscript. I need to be pointed in the right direction to produce the postscript equivalent of the following pseudo code.

```
for(each page)
{
   if(PageSize == [792 612])
       PageSize = [612 792];
} 
```

I am aware that there are non-Ghostscript ways of rotating pages, but if I can get this to work it would fit nicely into my process and would not reduce performance.

Here is a sample of one of my pdf files: [Sample1.pdf](https://docs.google.com/open?id=0B2LzHaZ9pUynWXc2X0J3M0RvN28)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T09:17:37.920

PostScript 是一种编程语言，因此您可以用它做很多事情。您需要在这里做的是重新定义请求页面大小的操作。PostScript 中的页面大小和内容是分开的，因此您需要做两件事：

1）将媒体请求从横向更改为纵向

2) 旋转页面内容

最简单的方法是重新定义“setpagedevice”操作符。这是一个例子：

```
/oldsetpagedevice /setpagedevice load def %% copy original definition

/setpagedevice {
  dup /PageSize known {                   %% Do we have a page size redefinition ?
    dup /PageSize get                     %% get the array if so
    aload pop                             %% get elements remove array copy
    gt {                                  %% is width > height ?
      dup /PageSize get aload             %% get size array, put content on stack
      3 1 roll                            %% roll stack to put array at back
      exch                                %% swap width and height
      3 -1 roll                           %% bring array back to front of stack
      astore                              %% put swapped elements into array
      /PageSize exch                      %% put key on stack and swap with value
      2 index                             %% copy the original dict
      3 1 roll                            %% move dict to back of stack
      put                                 %% put new page size array in dict
      90 rotate                           %% rotate content 90 degrees anti-clockwise
    } if
  } if
  oldsetpagedevice                        %% call the original definition
} bind def 
```

这将检查配置更改以查看页面大小是否正在更改，如果是，则获取新大小，并查看宽度 > 高度（横向的简单定义）。如果这是真的，那么它会通过交换宽度和高度来改变请求，然后将页面内容旋转 90 度。

您可以通过将上述内容放在一个文件（例如 prolog.ps）中，然后在您自己的作业之前运行该文件来将其与 Ghostscript 一起使用：

gs ...... prolog.ps job.ps

我已经尝试过了，但没有使用横向文件，因为我手头没有。另请注意，可以构建一个 PostScript 程序来解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T18:25:45.640

我找到了一个可行的解决方案。它不像我希望的那样通用，但它满足了我的所有要求。

以下 postscript 脚本会将 A4、Letter 和 Legal 文档旋转为纵向。要让它执行其他页面大小，请调整最小和最大尺寸。

```
%!PS
  %   Sequence to set up for a single page size, auto fit all pages.
  %   Autorotate A4 Letter and Legal page sizes to Portrait
  << /Policies << /PageSize 3 >>
     /InputAttributes currentpagedevice /InputAttributes get    %current dict
     dup { pop 1 index exch undef } forall    % remove all page sizes
     dup 0 << /PageSize [ 595 0 612 99999 ] >> put    % [ min-w min-h max-w max-h ]
  >> setpagedevice 
```

此后记脚本会将 A4、Letter 和 Legal 文档旋转为横向。唯一的区别是最小/最大页面大小值。

```
%!PS
  %   Sequence to set up for a single page size, auto fit all pages.
  %   Autorotate A4 Letter and Legal page sizes to Landscape
  << /Policies << /PageSize 3 >>
     /InputAttributes currentpagedevice /InputAttributes get    %current dict
     dup { pop 1 index exch undef } forall    % remove all page sizes
     dup 0 << /PageSize [ 0 595 99999 612 ] >> put    % [ min-w min-h max-w max-h ]
  >> setpagedevice 
```

[该解决方案基于我在hylafax](http://hylafax.sourceforge.net/)项目的源代码中找到的 auto-rotate.ps 文件。该项目似乎在 BSD 下获得许可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-05T05:46:00.340

尽管[Zig158](https://stackoverflow.com/a/10487105/2094090)答案运行良好，但从那时起出现了一个新选项 -dFIXEDMEDIA 女巫适用于任何纸张尺寸，不仅适用于 a4。

有关更多详细信息，请参阅[Ghostscript 错误跟踪器](https://bugs.ghostscript.com/show_bug.cgi?id=688994)。

# windows - 如何从服务中列出 Windows 服务

> ID：10457132
> 
> 赞同：0
> 
> 时间：2012-05-04T22:55:39.940
> 
> 标签：windows, service, windows-services

`sc query state= all`从命令行按预期工作。

从另一个服务中，`sc query state= all`不会将任何内容打印到该子进程的标准输出（当然是由父进程捕获的）。

服务是否需要权限/特权才能列出/启动/停止其他服务？

* * *

一点背景：我正在制作一个定期重启一些行为不端的服务的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:34:49.687

好吧，不要这样做，至少不要以阻塞的方式。为了让您自己的服务响应 SCM（服务控制管理器）以返回其状态，该服务必须能够执行其调度程序代码。这意味着如果您调用该程序并等待它退出，您将无限期地等待。缓解这种情况的一种方法是将其放入单独的线程中，这样它就不会阻塞您的调度，并且您的服务将继续与 SCM 对话。

或者（可能更好）您可以使用该`EnumServicesStatusEx`功能与 SCM 对话并自己查询其他服务的状态。该函数本身没有提及任何关于阻塞的内容，因此您必须自己弄清楚是否是阻塞，然后再次使用线程来防止您的服务停止与 SCM 对话。

最后一点：**如果那些行为不端的服务是你的，你应该更可能修复相应的代码**。我有一部分遗留代码，并且有一个行为不端的服务，它有自己的帮助应用程序作为“故障操作”（可以在服务配置中配置为`SERVICE_CONFIG_FAILURE_ACTIONS`），它会在服务崩溃时启动并重新启动服务。一旦我接管了该代码，找出原因并修复它，服务再次稳定并且不再需要该应用程序。

# android - 如何在除底部之外的线性布局周围添加边框？

> ID：10457135
> 
> 赞同：65
> 
> 时间：2012-05-04T22:56:34.780
> 
> 标签：android, android-linearlayout

如何在除底部之外的线性布局周围添加边框？LinearLayout 需要在左侧、顶部和右侧有边框，但不能在底部。

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-05-05T13:12:43.430

在可绘制文件夹中创建一个名为border.xml 的XML 文件，并将以下代码放入其中。

```
 <?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
  <item> 
    <shape android:shape="rectangle">
      <solid android:color="#FF0000" /> 
    </shape>
  </item>   
    <item android:left="5dp" android:right="5dp"  android:top="5dp" >  
     <shape android:shape="rectangle"> 
      <solid android:color="#000000" />
    </shape>
   </item>    
 </layer-list> 
```

然后像这样为您的线性布局添加背景：

```
 android:background="@drawable/border" 
```

**编辑 ：**

此 XML 已使用运行**GingerBread 2.3.3**的 Galaxy 进行测试，并且运行良好，如下图所示：

![在此处输入图像描述](../Images/8e2d11baf9ba9264cf7cc260e6c3ef1d.png)

**还**

使用运行**JellyBean 4.1.2**的 Galaxy s 3 进行测试，运行完美，如下图所示：

![在此处输入图像描述](../Images/368e17f5b6a43d83928baae182ce88ae.png)

**最后，它与所有 API 完美配合**

**编辑 2：**

也可以使用描边来保持背景透明，同时除了底部之外仍然保持边框，使用以下代码。

```
<?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:left="0dp" android:right="0dp"  android:top="0dp"  
        android:bottom="-10dp"> 
    <shape android:shape="rectangle">
     <stroke android:width="10dp" android:color="#B22222" />
    </shape>
   </item>  
 </layer-list> 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-05-04T23:03:07.743

保存此 xml 并添加为线性布局的背景....

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
    <stroke android:width="4dp" android:color="#FF00FF00" /> 
    <solid android:color="#ffffff" /> 
    <padding android:left="7dp" android:top="7dp" 
            android:right="7dp" android:bottom="0dp" /> 
    <corners android:radius="4dp" /> 
</shape> 
```

希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-03-01T09:37:32.300

肯尼是对的，只是想澄清一些事情。

1.  创建文件`border.xml`并将其放入文件夹中`res/drawable/`
2.  添加代码

    ```
    <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
       <stroke android:width="4dp" android:color="#FF00FF00" /> 
       <solid android:color="#ffffff" /> 
       <padding android:left="7dp" android:top="7dp" 
            android:right="7dp" android:bottom="0dp" /> 
       <corners android:radius="4dp" /> 
    </shape> 
    ```

3.  `android:background="@drawable/border"`像任何你想要的边界一样设置背景

我的第一个没有用，因为我把`border.xml`文件夹放错了！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-12T11:35:46.423

这是一个轻量级且非常易于集成的库的[Github 链接](https://github.com/vivekkhandelwal/kLib-android)，它使您可以根据需要为任何所需的小部件使用边框，只需基于 FrameLayout 小部件。

这是一个快速示例代码，让您了解它是多么容易，但您会在链接上找到更多信息。

```
<com.khandelwal.library.view.BorderFrameLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:leftBorderColor="#00F0F0"
            app:leftBorderWidth="10dp"
            app:topBorderColor="#F0F000"
            app:topBorderWidth="15dp"
            app:rightBorderColor="#F000F0"
            app:rightBorderWidth="20dp"
            app:bottomBorderColor="#000000"
            app:bottomBorderWidth="25dp" >
    </com.khandelwal.library.view.BorderFrameLayout> 
```

因此，如果您不希望底部有边框，请在此自定义小部件中删除关于底部的两行，这样就完成了。

不，我既不是这个图书馆的作者，也不是他的朋友；-)

# scala - 如何为超类中的成员使用 Scala 子类构造函数？

> ID：10457136
> 
> 赞同：0
> 
> 时间：2012-05-04T22:56:38.010
> 
> 标签：scala, constructor, superclass

我想从超类 ( ) 调用子类的构造函数来创建类型(或)`Tree[A]`的子类的其他实例。似乎必须有一种方法比创建中间方法的混乱更好，因为工作之类的事情。我听说 CanBuildFrom 可能会解决这个问题。`A``Part``Project``newChild``List`

从工作代码中提取：

```
abstract class Tree[A](parent: Option[A], key: Int) {
  protected def newChild(aKey: Int): A
  lazy val children: List[A] = childrenOf.map(newChild(_))
  ...
  }

case class Part(parent: Option[Part], key: Int) extends Tree[Part](parent, key) {
  protected def newChild(aKey: Int) = Part(Some(this), aKey)
  ...
  }

case class Project(parent: Option[Project], key: Int) extends Tree[Project](parent, key) {
  protected def newChild(aKey: Int) = Project(Some(this), aKey)
  ...
  }
...
"*" #> <ul>{Part(None, pKey).expandAsHtml}</ul> 
```

为超类中的成员使用 Scala 子类构造函数的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:14:51.117

你倒着看。当一个对象被创建时，它的构造函数被调用；this 默认或通过显式调用委托给其超类的构造函数。您*不能*从超类的构造函数中调用子类的构造函数，因为首先是子类的构造函数调用了超类的构造函数。

您需要查看您的逻辑并记住子类的已知方式是直接实例化*它；*并不是说超类是用子类作为某种参数来实例化的，而是超类被实例化作为实例化子类的一个步骤，并且超类应该只知道自己的结构，将子类细节留给触发的子类构造函数超类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T10:02:00.990

据我所知，实现这一目标的唯一方法是使用反射。

我在这里找到了一个教程：[http ://www.heimetli.ch/java/create-new-instance.html](http://www.heimetli.ch/java/create-new-instance.html)

这样，您可以在超类中获取子类的构造函数并调用它来创建子类的新实例。

但是，您必须以某种方式确保您的子类实现具有特定参数列表的构造函数。

# java - 网络应用

> ID：10457137
> 
> 赞同：0
> 
> 时间：2012-05-04T22:56:50.767
> 
> 标签：java, mysql, percona

我正在开发一个网络应用程序，它将处理大量事务，所以我使用 INNODB 作为存储引擎和事务，所以我还需要使用 LockTable 吗？

据我所知，他们不一起工作。请给我最好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:01:24.943

不知道您为什么要询问有关 InnoDB 的表锁定，因为它支持[行级锁定](http://dev.mysql.com/doc/refman/5.5/en/innodb-transaction-model.html)。我将只专注于确保您的事务正确编写，并让 MySQL 负责其余的工作。

# c# - ASP.NET MVC3/Razor C# 两侧/接口 Web 应用程序

> ID：10457149
> 
> 赞同：0
> 
> 时间：2012-05-04T22:59:09.253
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

我正在构建 ASP.NET MVC3/Razor C#，我需要两个面/接口基础 Web 应用程序，这意味着我需要这个：

管理端，我将在其中添加客户端和客户端，当客户端也可以登录和管理某些东西时。网址应如下所示：

www/Client/ClientId/Controller/Action/Id

www/Admin/Controller/Action/Id

我想要这样的东西：属于 Admin 的控制器在目录 Controllers/Admin 中，而属于客户端的控制器在目录 Controllers/Client 中。与视图相同：视图/管理员、视图/客户端。问题是当我有 url www/Client/Project 和 www/Admin/Project，并且两者都使用相同的控制器时，这不是我想要的。

所以请帮我解决这个问题，设计最好的结构。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:25:34.537

您可能应该为每个管理员和客户站点创建一个单独的网站。这样就干净多了。如果您有任何想要在项目之间共享的代码，只需创建一个包含您需要的共享代码的业务层 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:20:46.280

您可以使用以下区域将您的网站组织成单独的部分：

[http://msdn.microsoft.com/en-us/library/ee671793.aspx](http://msdn.microsoft.com/en-us/library/ee671793.aspx)

如果它们是完全独立的，那么将它们创建为独立的 MVC 应用程序可能更简洁，并在业务层中使用通用代码。但是，使用区域可以让您更轻松地在两个部分之间进行链接（例如，如果您想在客户端部分的数据旁边显示“编辑”链接）。

# c# - 如何使用 XPath 获取 XML 节点的属性值

> ID：10457150
> 
> 赞同：2
> 
> 时间：2012-05-04T22:59:22.377
> 
> 标签：c#, xml, xpath

这是我的脚本，但它只在控制台中打印空格。有人可以解释我如何使用 xPath 从 XML 文件中获取属性值吗？

```
 XPathNavigator nav;
    XPathDocument docNav;
    XPathNodeIterator NodeIter;
    XmlNamespaceManager ns;

    Int32 elementCount;

    String windowName;

    private void Form1_Load(object sender, EventArgs e)
    {
        docNav = new XPathDocument("C:/BlueEyeMacro/DaMaGeX/Applications/WindowBuilder/GUI.xml");
        nav = docNav.CreateNavigator();
        ns = new XmlNamespaceManager(nav.NameTable); 
        elementCount = nav.Select("/GUI/window").Count;
        Console.WriteLine(elementCount);
        for (int i = 1; i <= elementCount; i++)
        {
            NodeIter = nav.Select("/GUI/window[@ID="+i+"]");
            windowName = NodeIter.Current.GetAttribute("name", ns.DefaultNamespace);
            Console.WriteLine("{0}", windowName);
        }
    }
} 
```

**XML 文件**
`<GUI>`
`<window ID="1" name="mainWindow" parent="0" type="0" text="My first window" options="Option 1;" actions="action 1;" exit="exit;" />`
`<window ID="2" name="secondWindow" parent="0" type="0" text="My second window" options="Option 1;" actions="action 1;" exit="exit;" />`
`<window ID="3" name="thirdWindow" parent="0" type="0" text="My third window" options="Option 1;" actions="action 1;" exit="exit;" />`
`</GUI>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:06:27.647

我想，你必须首先调用 NodeIter.MoveNext() ，就像在这段代码中一样：

```
XPathNodeIterator nodesText = nodesNavigator.SelectDescendants(XPathNodeType.Text, false);

while (nodesText.MoveNext())
{
    Console.Write(nodesText.Current.Name);
    Console.WriteLine(nodesText.Current.Value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:16:23.170

**可以直接获取属性的字符串值：**

```
 for (int i = 1; i <= elementCount; i++) 
    { 
     // This obtains the value of the @name attribute directly
     string val = 
               nav.Evaluate("string(/GUI/window[@ID='"+i+"']/@name)") as string;                
     Console.WriteLine(val); 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T23:11:33.970

您还可以修改您的代码来执行此操作：

```
 for (int i = 1; i <= elementCount; i++) 
    { 
        var NodeIter = nav.SelectSingleNode("/GUI/window[@ID='"+i+"']/@name"); //This selects the @name attribute directly
        Console.WriteLine("{0}", NodeIter.Value); 
    } 
```

鉴于您通过唯一 id 识别节点，SelectSingleNode 更适合您尝试执行的操作。

# java - 是否有一种“干净”的方式来省略静态类型声明？

> ID：10457155
> 
> 赞同：2
> 
> 时间：2012-05-04T22:59:55.277
> 
> 标签：java

所以考虑这样的函数：

```
public void setTemperature(double newTemperatureValue, TemperatureUnit unit) 
```

其中 TemperatureUnit 定义为：

```
public enum TemperatureUnit {celcius, kelvin, fahrenheit} 
```

理想情况下，我想达到的是：

```
setTemperature(23, celcius); 
```

所以最终我想省略'TemperatureUnit'。通常在枚举值之前的部分，因为通过这种方式，函数读起来更像是常规文本。

现在我当然可以做一个静态导入来完成这个，但我想知道是否有替代方案，希望同时还能保持清洁。我听说有人使用声明它们的接口，但这也被认为是不好的做法。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T23:04:04.773

好吧，您已经列出了所有 3 种技术可能性。就个人而言，我更喜欢使用枚举类的全名，但重命名它以产生更自然的代码：

```
public enum Degrees{CELSIUS, KELVIN, FAHRENHEIT} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:05:20.100

如果您的目的只是让您的代码不那么冗长，那么一种可能性是提供一个采用字符或字符串的重载，例如：

```
setTemp (23, "C"); 
```

尽管我只是硬着头皮使用限定名称——在我看来，这个建议“损害”了类型系统的完整性，应该避免。

# php - 访问关联数组

> ID：10457159
> 
> 赞同：-1
> 
> 时间：2012-05-04T23:01:13.170
> 
> 标签：php, codeigniter-2, associative-array

我正在使用 Code Igniter，在 DB 执行查询后得到以下数据结构

```
array
'application' => 
    array
    0 => 
        object(stdClass)[19]
        public 'app_id' => string '16' (length=2)
        public 'app_name' => string 'dddddddd' (length=8)
        public 'app_title' => string 'sdfsdf' (length=6)
        public 'app_comments' => string 'sdfsdf' (length=6)
        public 'active_flg' => string 'N' (length=1) 
```

我知道访问这些值的一种方法是

```
foreach($application as $key => $value)
    $value->app_id 
```

但我知道我每次只会得到一条记录，所以我想在不使用 foreach 的情况下访问元素。我曾尝试**$application->app_id 和 $application['app_id']**但我不断收到错误消息。

谁能帮我了解如何直接访问数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:17:17.187

您正在使用多维混合类型的数组，在第二级使用数字索引。因此，在访问这些值时，您也必须使用它们。喜欢

```
echo $array['application'][0]->app_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:24:41.520

一个简单的示例，向您展示数组的结构以及如何访问它...

```
$objArray = array('app_id' => 7, 'app_name' => 'apps demo', 'app_title' => 'apps demo title');

$applicationArray = array('application' => array((object)$objArray));

// access the array
print $applicationArray['application'][0]->app_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T23:25:34.140

您是否通过执行以下操作获得该结果？

```
$res = $this->db->query('select * from application limit 1')->result(); 
```

如果是这样，您可以通过执行以下操作将该结果放入对象中：

```
$app = $this->db->query('select * from application limit 1')->row(); 
```

这样，您可以按如下方式访问属性：

```
echo $app->app_id; 
```

您应该查看[codeigniters 手册](http://codeigniter.com/user_guide/database/results.html)以获取结果。

# php - PHP回显href问题

> ID：10457165
> 
> 赞同：0
> 
> 时间：2012-05-04T23:01:44.150
> 
> 标签：php, href, session-cookies

我试图在我的表单中添加一个删除会话选项，但我无法解决以下错误：

> 解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 31 行的 /users/bfullilo/acme_dl_sessions.php 中需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

这是我的第 31 行

```
echo "<a href=\"acme_dl_sessions.php?delete_session=1\"> Not $_SESSION[\"email\"]?</a>"; 
```

我知道我并没有逃避我需要逃避的一切，但我已经碰壁了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:03:41.780

更改为：

```
echo " Not $_SESSION[email]?"; 
```

或者

```
echo " Not {$_SESSION['email']}?"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:04:53.683

[使用单引号](https://stackoverflow.com/questions/482202/is-there-a-performance-benefit-single-quote-vs-double-quote-in-php)稍微快一点

```
echo '<a href="acme_dl_sessions.php?delete_session=1"> Not ' . $_SESSION["email"] . '?</a>'; 
```

# ruby-on-rails - 使用资产管道

> ID：10457168
> 
> 赞同：1
> 
> 时间：2012-05-04T23:01:57.660
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

对于站点范围内的特定 JS 代码（即出现在所有页面上的标题）。这个应该放在哪里？在：

```
app/assets/javascripts/application.js 
```

是对的吗？

对于页面#home。这`root_url`也指向（`root :to => 'pages#home'`）。我的 JS 文件应该放在管道中的什么位置？

```
app/assets/javascripts/pages/home.js 
```

和问候我的`application.js`。这是正确的吗？它目前看起来像：

```
//= require jquery
//= require jquery_ujs
//= require_directory . 
```

或者我应该在视图中嵌入特定于页面的 JS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:14:27.743

将 js 代码放在 application.js 中并不是一个好主意。您可以将该代码放在文件`assets/javascripts`夹上的任何其他文件中，它会被`require_directory`or`require_tree`命令自动包含在内。您的`application.js`文件现在非常好，但您可能希望使用`require_tree`而不是`require_directory`递归包含。

例如，其中的 javascripts 文件`app/assets/javascripts/pages`将被包含，`require_tree`但不会被`require_directory`.

推荐阅读：[资产管道指南](http://guides.rubyonrails.org/asset_pipeline.html)

# php - MySQL 中的正则表达式错误（PHP 中的正则表达式相同）

> ID：10457169
> 
> 赞同：2
> 
> 时间：2012-05-04T23:01:58.720
> 
> 标签：php, mysql, regex

我正在开发一个搜索功能来获取用户输入并搜索 mysql 字段这个想法是拆分用户搜索的单词并在相关字段中查找每个术语。

用于构建我正在使用的正则表达式的代码是从一个工作的纯 PHP 脚本中复制的（正则表达式似乎与 PHP 配合得很好，所以我怀疑这是正则表达式风格的不同）

如果这是一个明显的问题，请原谅我，仍然对正则表达式有所了解。

首先，我将向您展示我运行的查询和我得到的错误

```
"SELECT * from `images` WHERE ( `name` REGEXP '^(?=.*gallardo).*$' OR `meta` REGEXP '^(?=.*gallardo).*$' ) ORDER BY `changestamp` DESC 
```

从正则表达式中得到错误“重复运算符操作数无效””

```
SELECT * from `images` WHERE ( `name` REGEXP '^(?=.*gallardo)(?=.*lambo).*$' OR `meta` REGEXP '^(?=.*gallardo)(?=.*lambo).*$' ) ORDER BY `changestamp` DESC 
```

给出同样的错误

为了编译这个正则表达式，我接受用户提交的输入，比如“gallardo lambo”并运行这个 PHP 程序

```
if(isset($_GET['keyword'])){

        $searchterms = explode(' ',$_GET['keyword']);

        $regstr = '^';

        foreach($searchterms as $i => $v)
        {
            if($v)
                $regstr .= '(?=.*'.preg_replace('/[-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/', "\\$&", $v).')'; 
        }

        $regstr .= '.*$';

    } 
```

然后我把它放在查询中

```
"( `name` REGEXP '$regstr' OR `meta` REGEXP '$regstr' )" 
```

当我将此方法与 php's 一起使用时`preg_match()`，它似乎有效。

有什么见解吗？随意告诉我，我不知道自己在做什么。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T23:04:22.510

MySQL regex 比 PHP 更受限制——它们不支持后向引用或前瞻。请参阅[手册](http://dev.mysql.com/doc/en/regexp.html)。

您可能想要查看[全文搜索](http://dev.mysql.com/doc/en/fulltext-search.html)。

# d3.js - d3.js 构建矩形网格

> ID：10457170
> 
> 赞同：8
> 
> 时间：2012-05-04T23:02:07.020
> 
> 标签：d3.js

我正在尝试在 d3.js 中构建一个矩形网格。

网格为 7 行（一周中的天数）和 24 列（一天中的小时数）。

以下代码仅绘制（行：列）：day0：hour0，day1：hour1，day2：hour2，day3：hour3，day4：hour4，day5：hour5，day6：hour6，day7：hour7

**问题：**任何想法为什么以下代码不起作用？

```
/**
*   calendarWeekHour    Setup a week-hour grid: 
*                           7 Rows (days), 24 Columns (hours)
*   @param id           div id tag starting with #
*   @param width        width of the grid in pixels
*   @param height       height of the grid in pixels
*   @param square       true/false if you want the height to 
*                           match the (calculated first) width
*/
function calendarWeekHour(id, width, height, square)
{
    var calData = randomData(width, height, square);
    var grid = d3.select(id).append("svg")
                    .attr("width", width)
                    .attr("height", height)
                    .attr("class", "chart");

        grid.selectAll("rect")
              .data(calData)
                .enter().append("svg:rect")
                 .attr("x", function(d, i) { return d[i].x; })
                 .attr("y", function(d, i) { return d[i].y; })
                 .attr("width", function(d, i) { return d[i].width; })
                 .attr("height", function(d, i) { return d[i].height; })
                 .on('mouseover', function() {
                    d3.select(this)
                        .style('fill', '#0F0');
                 })
                 .on('mouseout', function() {
                    d3.select(this)
                        .style('fill', '#FFF');
                 })
                 .on('click', function() {
                    console.log(d3.select(this));
                 })
                 .style("fill", '#FFF')
                 .style("stroke", '#555');
}

////////////////////////////////////////////////////////////////////////

/**
*   randomData()        returns an array: [
                                            [{id:value, ...}],
                                            [{id:value, ...}],
                                            [...],...,
                                            ];
                        ~ [
                            [hour1, hour2, hour3, ...],
                            [hour1, hour2, hour3, ...]
                          ]

*/
function randomData(gridWidth, gridHeight, square)
{
    var data = new Array();
    var gridItemWidth = gridWidth / 24;
    var gridItemHeight = (square) ? gridItemWidth : gridHeight / 7;
    var startX = gridItemWidth / 2;
    var startY = gridItemHeight / 2;
    var stepX = gridItemWidth;
    var stepY = gridItemHeight;
    var xpos = startX;
    var ypos = startY;
    var newValue = 0;
    var count = 0;

    for (var index_a = 0; index_a < 7; index_a++)
    {
        data.push(new Array());
        for (var index_b = 0; index_b < 24; index_b++)
        {
            newValue = Math.round(Math.random() * (100 - 1) + 1);
            data[index_a].push({ 
                                time: index_b, 
                                value: newValue,
                                width: gridItemWidth,
                                height: gridItemHeight,
                                x: xpos,
                                y: ypos,
                                count: count
                            });
            xpos += stepX;
            count += 1;
        }
        xpos = startX;
        ypos += stepY;
    }
    return data;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T19:56:37.897

问题是您的数据绑定仅遍历数组的第一个维度 (0,1,2) 并且您试图使用它来遍历第二个维度 (0,0)(0,1)(0,2 ) 这导致 (0,0)(1,1)(2,2) 行为。

要获得您想要的结果，只需使用子选择。从您的行定义开始：

```
var row = chart.selectAll(".row") 
    .data(data) // each row will be bound to the array at data[i]
  .enter().append("div") 
    .attr("class", "row") 
    … 
```

然后使用标识函数（作为数据属性）取消引用每行的单元格：

```
var cell = row.selectAll(".cell") 
    .data(function(d) { return d; }) // then iterate through data[i] for each cell
  .enter().append("div") 
    .attr("class", "cell") 
    … 
```

[您可以在http://bl.ocks.org/2605010](http://bl.ocks.org/2605010)看到一个完整源代码的工作示例。

# c# - jQuery 对话框只显示第一次

> ID：10457171
> 
> 赞同：0
> 
> 时间：2012-05-04T23:02:34.280
> 
> 标签：c#, asp.net-mvc-3, jquery-ui, jquery

有一个 jQuery 对话框问题。当有人单击 calDayContentEntry div 时，我想利用 ajax 在对话框窗口中呈现日历内容。以下代码在第一次单击时有效，但在关闭对话框后，我无法再让对话框再次显示该条目。其他条目第一次也能正常工作，但二次点击不会再次打开对话框。

这是我遇到问题的相关代码（都在同一个 asp.net mvc 3 razor 视图中）。有没有人有一些可以解决这个问题的调整？

```
 ...
           <div class="calDayContent">
            @foreach (var content in day.Contents)
            {
                <div class="calDayContentEntry">
                    <input type="hidden" value="@content.Entry.Id" class="hiddenId" />   
                    <div class="@content.DisplayClass">@content.Entry.Hours.ToString() hrs</div>
                </div>
                <div class="leaveRequestPopup"></div>
            }
            </div>
           ...

<script type="text/javascript">
    $().ready(function () {
        $('.calDayContentEntry').click(function () {
            getAndShowDialogContents(this);
        });

        // Register close event for dialog if overlay is clicked
        $('.ui-widget-overlay').live("click", function () {
            //Close the dialog 

            $currentDialog.dialog("close");
        });
    });

    function getAndShowDialogContents(entryDiv) {

        var entryId = $(entryDiv).find('input[type="hidden"]').val();
        var contentdiv = $(entryDiv).next('.leaveRequestPopup');
        var x = $(entryDiv).position().left + jQuery(entryDiv).outerWidth();
        var y = $(entryDiv).position().top - jQuery(document).scrollTop();

        $.ajax(
        {
            type: 'POST',
            url: 'Request/GetCalendarDetails',
            data: { id: entryId },
            success: function (result) {

                $(contentdiv).html(result);

                $(contentdiv).dialog({
                    autoOpen: false,
                    modal: true,
                    title: 'Details',
                    width: 400,
                    height: 300,
                    draggable: false
                });

                $(contentdiv).dialog("option", "position", [x, y]);
                $currentDialog = $(contentdiv).dialog('open');
            }
        });
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:48:09.180

我认为周末为这个问题增加了一个新的视角。有效的代码如下。基本上，我没有为每个条目使用弹出 div，而是在页面末尾使用了一个 div。该 div 被重复用于每个对话框。我使用全局变量，因此当有人在对话框外单击以关闭它时，我可以引用它。希望这可以帮助其他人。

```
 ...
            <div class="calDayContent">
            @foreach (var content in day.Contents)
            {
                <div class="calDayContentEntry">
                    <input type="hidden" value="@content.Entry.Id" class="hiddenId" />

                        <div class="@content.DisplayClass">@content.Entry.Hours.ToString() hrs</div>
                </div>
            }
            </div>
            ...
            <div class="leaveRequestPopup"></div>
            ...

<script type="text/javascript">
    $().ready(function () {
        $('.calDayContentEntry').click(function () {
            getAndShowDialogContents(this);
        });

        // Register close event for dialog if overlay is clicked
        $('.ui-widget-overlay').live("click", function () {
            //Close the dialog 

            $currentDialog.dialog("close");
        });

        $currentDialog = $('.leaveRequestPopup').dialog({
            autoOpen: false,
            modal: true,
            title: 'Details',
            width: 400,
            height: 300,
            draggable: false
        });
    });

    function getAndShowDialogContents(entryDiv) {

        var entryId = $(entryDiv).find('input[type="hidden"]').val();
        var x = $(entryDiv).position().left + jQuery(entryDiv).outerWidth();
        var y = $(entryDiv).position().top - jQuery(document).scrollTop();

        $.ajax(
        {
            type: 'POST',
            url: 'Request/GetCalendarDetails',
            data: { id: entryId },
            success: function (result) {

                $currentDialog.html(result);

                $currentDialog.dialog("option", "position", [x, y]);
                $currentDialog.dialog('open');
            }
        });
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:08:07.300

这是一个有效的陈述吗？

```
$currentDialog.dialog("close"); 
```

我认为在这一点上它超出了范围。

也许如果你在 $().ready 之前定义它

```
var $currentDialog;
$().ready(function () {
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T23:12:39.570

您需要重置对话框。

```
contentdiv.dialog("destroy").dialog(.... 
```

注意：如果你这样做

```
 var contentdiv = $(entryDiv).next('.leaveRequestPopup'); 
```

那么 contentdiv 已经是一个 jQuery 对象，所以你可以这样说：

```
contentdiv.click(function(){
  //code here
}); 
```

您无需再次将其包装在 $(contentdiv) 中。

当你调用这个函数时：

```
getAndShowDialogContents(this); 
```

它将作为参数传递原始文档对象，而不是 jQuery 对象，使用：

```
getAndShowDialogContents($(this)); 
```

传递当前的 jQuery 对象

# linux - 报告内存和 cpu 使用情况 - matlab - 在多核 linux 服务器上

> ID：10457172
> 
> 赞同：0
> 
> 时间：2012-05-04T23:02:49.907
> 
> 标签：linux, performance, matlab, multicore

我们需要知道一个 matlab 进程使用了​​多少内存和 CPU 时间来处理它所有的衍生线程。如果我理解正确，所有线程都将作为具有新进程 ID 的新进程弹出，但 CMD 名称将保持不变。

所以我想创建一个恶魔，每 n 秒附加一次用法：

```
ps -o %cpu,%mem,cmd -C MATLAB | grep "[0-9]+" >> matlab_log 
```

然后计算并总结乘以恶魔滴答时间的比率。

我想知道是否有更简单的方法，或者我遗漏了一些东西，或者只是存在一些对这项工作更方便的工具？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:28:51.157

如果您安装 BSD Process Accounting 实用程序（`acct`Debian 和 Ubuntu 上的软件包），您可以使用该`sa(8)`实用程序来总结执行或为您提供半详细的执行日志：

```
$ lastcomm
...
man               F  X sarnold  pts/3      0.00 secs Fri May  4 16:21
man               F  X sarnold  pts/3      0.00 secs Fri May  4 16:21
vim                    sarnold  pts/3      0.05 secs Fri May  4 16:20
sa                     sarnold  pts/3      0.00 secs Fri May  4 16:20
sa                     sarnold  pts/3      0.00 secs Fri May  4 16:20
bzr                    sarnold  pts/3      0.99 secs Fri May  4 16:19
apt-get          S     root     pts/1      0.44 secs Fri May  4 16:18
dpkg                   root     pts/1      0.00 secs Fri May  4 16:19
dpkg                   root     pts/1      0.00 secs Fri May  4 16:19
dpkg                   root     pts/1      0.00 secs Fri May  4 16:19
apt-get           F    root     pts/1      0.00 secs Fri May  4 16:19
... 
```

```
$ sa
     633      15.22re       0.09cp         0avio      6576k
      24       8.51re       0.03cp         0avio      6531k   ***other*
       2       0.31re       0.02cp         0avio     10347k   apt-get
       3       0.02re       0.02cp         0avio      9667k   python2.7
      18       0.04re       0.01cp         0avio      5444k   dpkg
       2       0.01re       0.01cp         0avio     13659k   debsums
... 
```

文件的格式`acct`记录在 中`acct(5)`，因此如果没有标准工具可以表达您想要的查询，您可以编写自己的程序来解析文件。

BSD 进程记帐实用程序的最大缺点可能是内核只会在进程退出时更新进程记帐日志，因为许多摘要数字只有在另一个进程`wait(2)`为其提供时才可用——因此当前正在运行的进程完全被忽略实用程序。

不过，这些实用程序可能就足够了；这些实用程序是计算中心向客户收费的方式，早在计算中心流行时......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T23:47:52.107

您还可以使用`top`：

```
top -b -n 1 | grep MATLAB

14226 user      39  19 2476m 1.4g  26m S 337.2  9.2  24:44.60 MATLAB
25878 user      39  19 2628m 1.6g  26m S  92.0 10.6  21:07.36 MATLAB
14363 user      39  19 2650m 1.4g  26m S  79.7  9.1  23:58.38 MATLAB
14088 user      39  19 2558m 1.4g  26m S  61.3  9.1  25:14.53 MATLAB
14648 user      39  19 2629m 1.6g  26m S  55.2 10.5  22:03.20 MATLAB
14506 user      39  19 2613m 1.5g  26m S  49.0  9.4  22:32.47 MATLAB
14788 user      39  19 2599m 1.6g  26m S  49.0 10.3  20:44.78 MATLAB
25650 user      39  19 2608m 1.6g  26m S  42.9 10.2  25:08.38 MATLAB 
```

或获取字段名：

```
top -b -n 1 | head -n 7 | tail -n 1; top -b -n 1 | grep MATLAB

  PID USER      PR  NI  VIRT  RES  SHR S  %CPU %MEM    TIME+  COMMAND
14226 user      39  19 2476m 1.4g  26m S 337.2  9.2  24:44.60 MATLAB
25878 user      39  19 2628m 1.6g  26m S  92.0 10.6  21:07.36 MATLAB
14363 user      39  19 2650m 1.4g  26m S  79.7  9.1  23:58.38 MATLAB
14088 user      39  19 2558m 1.4g  26m S  61.3  9.1  25:14.53 MATLAB
14648 user      39  19 2629m 1.6g  26m S  55.2 10.5  22:03.20 MATLAB
14506 user      39  19 2613m 1.5g  26m S  49.0  9.4  22:32.47 MATLAB
14788 user      39  19 2599m 1.6g  26m S  49.0 10.3  20:44.78 MATLAB
25650 user      39  19 2608m 1.6g  26m S  42.9 10.2  25:08.38 MATLAB 
```

# windows - 如何构建在 Process Monitor 中显示更多堆栈信息的应用程序？

> ID：10457176
> 
> 赞同：0
> 
> 时间：2012-05-04T23:03:28.487
> 
> 标签：windows, process, process-monitor

我刚刚发现了 Sysinternal 的 Process Monitor，并且喜欢它提供的关于进程正在做什么的见解。但是，当我尝试查看对内核的软件调用的详细信息时，堆栈中充满了“未知数”。我应该如何构建我的应用程序，以便函数名称出现在堆栈跟踪中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:13:43.237

经常用 /Zi 编译它，然后用 /debug 链接它就足够了。您应该获得一个 PDB 文件，其中包含应用程序的所有调试信息。只要您不移动可执行文件或 PDB，Process Monitor 通常应该会找到它。

如果您有多个版本的应用程序，或者如果您想调查其他机器上的调用堆栈，最好设置一个符号服务器。然后，您需要将所有 EXE 和 PDB 文件存储到符号服务器中（使用 symstore 实用程序），并设置您的系统，以便 Process Monitor 使用符号服务器来查找调试信息。[http://support.microsoft.com/kb/311503](http://support.microsoft.com/kb/311503)上的信息应该可以帮助您入门。

一种正常工作的方法是设置环境变量`_NT_SYMBOL_PATH`：

```
set _NT_SYMBOL_PATH=symsrv*symsrv.dll*\\yourserver\symbols*http://msdl.microsoft.com/download/symbols 
```

... where`\\yourserver\symbols`将是可写和可读的共享，但也可以是您计算机上的本地路径。这是符号被缓存以供重复使用的地方。

# android - 启动 GLSurfaceViews 的菜单

> ID：10457180
> 
> 赞同：0
> 
> 时间：2012-05-04T23:03:45.567
> 
> 标签：android, surfaceview, glsurfaceview

我为测量设备编写了一个手机界面。我在 GLSurfaceViews 中有一堆不同的功能屏幕。我可以正确启动渲染，但我不知道如何使后退按钮起作用。我的渲染代码如下所示：

```
Button mSpecButton = new Button(this);
mSpecButton.setText("Spectrometer");
mSpecButton.setOnClickListener(new View.OnClickListener()
{
    public void onClick(View v)
    {
        glSurfaceView = new GLSurfaceView(mRun);
        mRender = new renderSpectro(mRun);
        glSurfaceView.setRenderer(mRender);
        setContentView(glSurfaceView);
    }
}); 
```

我不知道在哪里放一个`public boolean onKeyDown(int keyCode, KeyEvent event)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T02:16:23.360

该`onKeyDown()`方法必须放在活动中。如果您想使用它来控制 GLSurfaceView 或 Renderer，您必须使用其他方式将其发送到那里。例如，在您的主要活动中，您可以拥有：

```
//Somewhere in the code
GLSurfaceView glSurfaceView = new myGLSurfaceView();

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    glSurfaceView.doBackAction(); //Or something similar
} 
```

而在你的`myGLSurfaceView`你只有一个方法：

```
public void doBackAction() {
    //Yay
} 
```

如果您担心线程安全，它会变得有点复杂，但初始`onKeyDown()`必须在活动中。

# python - Windows 7中的Django 1.4“没有FlatPage匹配给定的查询”

> ID：10457191
> 
> 赞同：2
> 
> 时间：2012-05-04T23:04:44.717
> 
> 标签：python, django, django-flatpages

我已经搜索了我能找到的所有东西，但是这个烦人的错误仍然存​​在。管理界面 (localhost:8000/admin/) 工作正常，但没有其他人。观察：我使用 Apress - Practical Django Projects (2nd edition) 来学习 Django。我将在这里发布我的代码，以便有人可以告诉我我做错了什么。谢谢！
代码：

**设置.py**

```
 # Django settings for cms project.
    DEBUG = True
    TEMPLATE_DEBUG = DEBUG
    APPEND_SLASH = True
    ADMINS = (
        # ('Your Name', 'your_email@example.com'),
    )

    MANAGERS = ADMINS

    DATABASES = {
        'default': {
                    'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql',                 'sqlite3' or 'oracle'.
            'NAME': 'C:\Users\Vinicius\Desktop\Work\Djangoprojects\cms\cms.db',                              # Or path to database file if using sqlite3.
    'USER': '',                      # Not used with sqlite3.
    'PASSWORD': '',                  # Not used with sqlite3.
    'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
    'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
        }
    }

    # Local time zone for this installation. Choices can be found here:
    # http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
    # although not all choices may be available on all operating systems.
    # On Unix systems, a value of None will cause Django to use the same
    # timezone as the operating system.
    # If running in a Windows environment this must be set to the same as your
    # system time zone.
    TIME_ZONE = 'America/Chicago'

    # Language code for this installation. All choices can be found here:
    # http://www.i18nguy.com/unicode/language-identifiers.html
    LANGUAGE_CODE = 'en-us'

    SITE_ID = 1

    # If you set this to False, Django will make some optimizations so as not
    # to load the internationalization machinery.
    USE_I18N = True

    # If you set this to False, Django will not format dates, numbers and
    # calendars according to the current locale.
    USE_L10N = True

    # If you set this to False, Django will not use timezone-aware datetimes.
    USE_TZ = True

    # Absolute filesystem path to the directory that will hold user-uploaded files.
    # Example: "/home/media/media.lawrence.com/media/"
    MEDIA_ROOT = ''

    # URL that handles the media served from MEDIA_ROOT. Make sure to use a
    # trailing slash.
    # Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
    MEDIA_URL = ''

    # Absolute path to the directory static files should be collected to.
    # Don't put anything in this directory yourself; store your static files
    # in apps' "static/" subdirectories and in STATICFILES_DIRS.
    # Example: "/home/media/media.lawrence.com/static/"
    STATIC_ROOT = ''

    # URL prefix for static files.
    # Example: "http://media.lawrence.com/static/"
    STATIC_URL = '/static/'

    # Additional locations of static files
    STATICFILES_DIRS = (
        # Put strings here, like "/home/html/static" or "C:/www/django/static".
        # Always use forward slashes, even on Windows.
        # Don't forget to use absolute paths, not relative paths.
    )

    # List of finder classes that know how to find static files in
    # various locations.
    STATICFILES_FINDERS = (
        'django.contrib.staticfiles.finders.FileSystemFinder',
        'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    #    'django.contrib.staticfiles.finders.DefaultStorageFinder',
    )

    # Make this unique, and don't share it with anybody.
    SECRET_KEY = 'notgiven'

    # List of callables that know how to import templates from various sources.
    TEMPLATE_LOADERS = (
        'django.template.loaders.filesystem.Loader',
        'django.template.loaders.app_directories.Loader',
    #     'django.template.loaders.eggs.Loader',
    )

    MIDDLEWARE_CLASSES = (
        'django.middleware.common.CommonMiddleware',
        'django.contrib.sessions.middleware.SessionMiddleware',
        'django.middleware.csrf.CsrfViewMiddleware',
        'django.contrib.auth.middleware.AuthenticationMiddleware',
        'django.contrib.messages.middleware.MessageMiddleware',
        'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
        # Uncomment the next line for simple clickjacking protection:
        # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
    )

    ROOT_URLCONF = 'cms.urls'

    # Python dotted path to the WSGI application used by Django's runserver.
    WSGI_APPLICATION = 'cms.wsgi.application'

    TEMPLATE_DIRS = (
        'C:/Users/Vinicius/Desktop/Work/Djangoprojects/cms/templates/'
        # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
        # Always use forward slashes, even on Windows.
        # Don't forget to use absolute paths, not relative paths.
    )

    INSTALLED_APPS = (
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.sessions',
        'django.contrib.sites',
        'django.contrib.messages',
        'django.contrib.staticfiles',
        'django.contrib.admin',
        'django.contrib.flatpages',
        # Uncomment the next line to enable the admin:
        # 'django.contrib.admin',
        # Uncomment the next line to enable admin documentation:
        # 'django.contrib.admindocs',
    )

    # A sample logging configuration. The only tangible logging
    # performed by this configuration is to send an email to
    # the site admins on every HTTP 500 error when DEBUG=False.
    # See http://docs.djangoproject.com/en/dev/topics/logging for
    # more details on how to customize your logging configuration.
    LOGGING = {
'version': 1,
'disable_existing_loggers': False,
'filters': {
    'require_debug_false': {
        '()': 'django.utils.log.RequireDebugFalse'
    }
},
'handlers': {
    'mail_admins': {
        'level': 'ERROR',
        'filters': ['require_debug_false'],
        'class': 'django.utils.log.AdminEmailHandler'
    }
},
'loggers': {
    'django.request': {
        'handlers': ['mail_admins'],
        'level': 'ERROR',
        'propagate': True,
            },
        }
    } 
```

**网址.py**

```
 from django.conf.urls import patterns, include, url

    # Uncomment the next two lines to enable the admin:
    from django.contrib import admin
    admin.autodiscover()

    urlpatterns = patterns('',
        url(r'^admin/', include(admin.site.urls)),
        url(r'', include('django.contrib.flatpages.urls')),
    ) 
```

PS：一切都正确识别。所以如果有一些识别错误，那是因为我复制/粘贴很快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:37:46.070

你不应该在你的 url conf 中包含平面页面。

```
url(r'^admin/', include(admin.site.urls)),
url(r'', include('django.contrib.flatpages.urls')), # remove this 
```

这可能就是您收到错误的原因......因为平面页面实际上匹配任何 URL。

通常，平面页面通过平面页面后备中间件工作，如果没有其他 URL 匹配，该中间件将尝试定位平面页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-09T09:41:00.100

问题的另一个原因是没有输入正确的`SITE_ID`数字`settings.py`

通过检查数据库中的表，您可以找到正确的站点 ID `127.0.0.1:8000`（假设您使用默认端口）`django_flatpage_sites`。站点 ID 将在列中找到`site_id`。

将 更新为`SITE_ID`中的那个数字`settings.py`，为​​我解决了这个问题。

# php - jquery POST 在 https 中不返回任何结果

> ID：10457192
> 
> 赞同：2
> 
> 时间：2012-05-04T23:04:50.623
> 
> 标签：php, jquery, post, ssl, https

[我有一个在http://mysite.com](http://mysite.com)上运行良好的 jquery 脚本

看起来像这样：

Javascript：

```
$('#form_changePass').live('submit', function() {
    //alert('form_changePass cliked');
    $.POST("_ajaxCall.php", $(this).serialize(),
    function(data){
        var json = eval('('+data+')');
        //alert(data);    
        if(json.message=='alert') {
            $('div.info').hide();
            $('div.alert').show().html(json.string);
        }
        if(json.message=='info') {
            $('div.alert').hide();
            $('div.info').show().html(json.string);
        }
    }
    );
    return false;
}) 
```

PHP 脚本：

```
if ($_POST['formType']=="form_changePass") {
.....
.......
   $arr = array( 'message' => 'info', 'string' => $INFO['updatePass']);
   echo json_encode($arr);
} 
```

现在，当我将域移动到 https 时，jquery 脚本不再工作。我没有得到任何返回值。什么都没发生。

我还尝试在 javascript 中将 POST 更改为 getJSON，并在 php 脚本中将 $_POST 更改为 $_GET，但它仍然无法正常工作。

任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:08:33.800

http 和 https 被认为是不同的域，所以这是一个跨域问题。修复方法是：

```
header('Access-Control-Allow-Origin: https://domain.com'); 
```

将此添加到您的 php 脚本中。或者这只是在开发中，所以你不需要太担心：

```
header('Access-Control-Allow-Origin: *'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T23:07:47.050

`.serialize`将表单数据序列化为字符串，因此请改用参数发送它们。

```
$('#form_changePass').on('submit', function() {
    //alert('form_changePass cliked');
    $.POST("_ajaxCall.php", { formData: $(this).serialize() },
    function(data){
        var json = eval('('+data+')');
        //alert(data);    
        if(json.message=='alert') {
            $('div.info').hide();
            $('div.alert').show().html(json.string);
        }
        if(json.message=='info') {
            $('div.alert').hide();
            $('div.info').show().html(json.string);
        }
    }
    );
    return false;
}) 
```

并停止使用`.live()`方法，它们现在已被弃用。使用`.on()`方法。

# facebook - 如何在最近的活动块中发布？

> ID：10457194
> 
> 赞同：0
> 
> 时间：2012-05-04T23:05:00.000
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

在 facebook 的时间线上有一个名为“最近的活动”的块。一些应用程序，如 Stumbleupon，在此块中发布新闻。

所以，我想知道我必须使用什么 API 在这个块中插入新闻（最近的活动）。

我正在使用 JS SDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:05:25.990

使用的 API 是 Open Graph，位于此处：

[https://developers.facebook.com/docs/opengraph/](https://developers.facebook.com/docs/opengraph/)

请务必阅读所有文档并按照该页面底部链接的教程进行操作。

# android - Android：限制布局滚动范围

> ID：10457195
> 
> 赞同：0
> 
> 时间：2012-05-04T23:05:01.293
> 
> 标签：android, android-layout, scroll, range

我想限制可滚动图像的 x 和 y 范围。这是我正在使用的代码：

```
public class MapActivity extends Activity {

private LinearLayout container;   
private int currentX;   
private int currentY;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.map);
    container = (LinearLayout) findViewById(R.id.Container);

    container.scrollTo(0, 0);

}

@Override  
public boolean onTouchEvent(MotionEvent event) { 
  switch (event.getAction()) { 
      case MotionEvent.ACTION_DOWN: { 
          currentX = (int) event.getRawX(); 
          currentY = (int) event.getRawY(); 
          break; 
      } 

      case MotionEvent.ACTION_MOVE: { 
          int x2 = (int) event.getRawX(); 
          int y2 = (int) event.getRawY(); 
          container.scrollBy(currentX - x2 , currentY - y2); 
          currentX = x2;               
          currentY = y2; 
          break; 
      }    
      case MotionEvent.ACTION_UP: { 
          break; 
      } 
  } 
    return true;  
} 

} 
```

我的 map.xml 看起来像这样。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center">
    <LinearLayout 
        android:id="@+id/Container" 
        android:layout_height="fill_parent"          
        android:layout_width="fill_parent">
    <ImageView 
        android:id="@+id/imageView1" 
        android:src="@drawable/aowmap"        
        android:layout_height="752px" 
        android:layout_width="1712px"></ImageView>
    </LinearLayout>
</LinearLayout> 
```

我尝试了各种方法来获取“容器”sx 和 y，甚至图像 x 和 y，但没有运气。我确信代码会在 ACTION_UP 下，但我只是不确定放在那里找到 x 和 y。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:17:57.200

您需要查看显示指标，下面是我在图片库中用于限制向左滚动的代码片段，您应该可以做类似的事情！

关键是`mlp.setMargins(...)`，传递给该函数的第一个参数是我设置新左边距的地方，所以你需要做类似的事情，但对于底部边距！

```
DisplayMetrics metrics = new DisplayMetrics(); 
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
MarginLayoutParams mlp = (MarginLayoutParams) gallery.getLayoutParams();
mlp.setMargins(-(metrics.widthPixels/2+130),mlp.topMargin,mlp.rightMargin, mlp.bottomMargin ); 
```

希望这可以帮助！:)

# php - PHP 在 HTML 之前不执行

> ID：10457200
> 
> 赞同：1
> 
> 时间：2012-05-04T23:05:37.640
> 
> 标签：php, constructor

所以，我有一些我认为非常简单的 php/html 代码。我只是不明白该`_construct()`方法是如何在 HTML 表单之前执行的。有人可以给我一个解释。

**我页面上的代码：**

```
<?php   class register {
        function __construct() {
            echo 'SYSTEM: This is the register page';
        }
    }

?>
    <form action="http://abc.org/test" method="POST">
    <input type="username" value="">
    <input type="password" value="">
    <input type="submit" value="Register">
    </form> 
```

**它的外观：**

![它看起来如何](../Images/223db97263219aca5aeecc61e6869eba.png)

**编辑** 很抱歉没有在原始帖子中包含此内容，但我正在从另一个页面创建课程。

页面 abc.com/a 有这个代码：

```
<?php require './'.'register'.'.php'; 
                $obj = new register; ?> 
```

这个问题顶部的代码来自 register.php

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T23:07:22.730

您正在定义一个类，但我看不到您在哪里实例化该类类型的对象。在您在此处粘贴的内容之后必须有更多代码进行实例化，因此您会看到 echo() 调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T23:38:52.273

我同意 bfavaretto，他的代码片段肯定会起作用。我通常喜欢将我的类、函数和输出保存在单独的文件中，以便它具有更多的跨项目可用性，如下所示。可能是更多的 php 编码，但最后，可重用性帮助了我很多。我将按如下方式组织您的项目。

正在加载的原始页面：

```
<?php require './includes/class/register.class.php'; ?>
<?php include './includes/registerModules.php'; ?>

$register = new register();  //Calls the constructor for class 'register'

<?php registerForm(); ?> // Runs the registerForm() function.  Nothing is output to the browser until this function is called.  That way you can include a test to see if a user is already logged in and use a header redirect (which requires that no output code be sent to the browser before the header function is called) if you so desire. 
```

./includes/class/register.class.php

```
class register {
    function __construct() {
        echo 'SYSTEM: This is the register page';
    }
} 
```

./includes/registerModules.php

```
function registerForm(){
    echo '<form action="http://abc.org/test" method="POST">
    <input type="username" value="">
    <input type="password" value="">
    <input type="submit" value="Register">
    </form>';
} 
```

这样，任何时候您可能需要添加到 register.class.php 的任何类时，您都可以将它们包含在不一定需要显示注册表单的页面上。例如您可能需要做的任何后处理。这些类都将在那里，您可以使用适当的构造函数（在本例中`$register = new register();`）实例化它们。

由于您将这些函数包含在 registerModules.php 中，因此无论您在何处调用所需的函数，函数的输出都会出现在进行函数调用的位置。使格式化更容易。例如，在您调用`<?php registerForm(); ?>`. 这样，您可以在创建可能需要的任何构造函数后重用表单，如上所示，并在站点的其他区域以通用格式显示表单。

我知道在这种情况下，注册表可能只会出现一次，但这是可重复使用的格式，您可以将其应用于任何常见元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T23:07:37.807

要调用构造函数，需要先实例化类，例如：

```
$register = new register(); 
```

这将调用它的构造函数。您所做的只是定义类，但它不会自动生成。函数也一样，它们也需要被调用。

请参阅构造函数[`new`](http://php.net/new)和[析构函数](http://de.php.net/manual/en/language.oop5.decon.php)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T23:15:26.697

类代码将在表单之后运行，因为在您的`require`行之后，表单已经输出。只有这样，您才能实例化该类，其构造函数会回显该消息。

如果您想在表单之前回显，只需在定义后立即实例化该类：

```
<?php   
class register {
    function __construct() {
        echo 'SYSTEM: This is the register page';
    }
}
$register = new register();
?>
<form action="http://abc.org/test" method="POST">
    <input type="username" value="">
    <input type="password" value="">
    <input type="submit" value="Register">
</form> 
```

# ruby-on-rails - 具有多态性的反向 has_many

> ID：10457203
> 
> 赞同：6
> 
> 时间：2012-05-04T23:06:15.273
> 
> 标签：ruby-on-rails, associations, polymorphism

我有两个模型：用户和项目。这个想法是用户可以关注项目和其他用户。自然地，用户和项目是多态“可跟随”类型的一部分。现在，使用用户模型，我想得到三件事：

```
user.followed_users
user.followed_projects
user.followers 
```

前两个工作正常；这是我遇到麻烦的第三个。这是一种反向查找，其中外键成为下表中的“followable_id”列，但无论我如何建模，我都无法让查询正确运行。

用户模型

```
has_many :follows, :dependent => :destroy
has_many :followed_projects, :through => :follows, :source => :followable, :source_type => "Project"
has_many :followed_users, :through => :follows, :source => :followable, :source_type => "User"
has_many :followers, :through => :follows, :as => :followable, :foreign_key => "followable", :source => :user, :class_name => "User" 
```

跟随模型

```
class Follow < ActiveRecord::Base
  belongs_to :followable, :polymorphic => true
  belongs_to :user
end 
```

我的关注表有：user_id followable_id followable_type

每当我运行查询时，我都会得到：

```
SELECT `users`.* FROM `users` INNER JOIN `follows` ON `users`.`id` = `follows`.`user_id` WHERE `follows`.`user_id` = 7 
```

它应该是“followable_id = 7 AND followable_type = 'User”，而不是“user_id = 7”

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T22:19:25.517

弄清楚了。查看了[Michael Hartl 制作的示例项目，](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/app/models/user.rb)并注意到这样做的正确方法是不仅指定一个关系表（在本例中为以下），而且还指定一个反向关系表（我称之为反向关系表）。

```
 has_many    :follows,
                        :dependent => :destroy

    has_many    :followed_projects,
                        :through => :follows,
                        :source => :followable,
                        :source_type => "Project"

    has_many    :followed_users,
                        :through => :follows,
                        :source => :followable,
                        :source_type => "User"

    has_many    :reverse_follows,
                        :as => :followable,
                        :foreign_key => :followable_id,
                        :class_name => "Follow"

    has_many    :followers,
                        :through => :reverse_follows,
                        :source => :user 
```

希望这对一些人有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:06:24.450

我认为您需要明确说明外键。你有：

```
:foreign_key => "followable" 
```

你需要：

```
:foreign_key => "followable_id" 
```

完整代码：

```
has_many :followers, :through => :follows, :as => :followable, :foreign_key => "followable_id", :source => :user, :class_name => "User" 
```

# java - Jboss 5\. HttpOnly 会话 cookie

> ID：10457204
> 
> 赞同：1
> 
> 时间：2012-05-04T23:06:21.743
> 
> 标签：java, session-cookies, jboss5.x

如何配置 JBoss 5.1.* 以制作会话 cookie HttpOnly？

```
<Context useHttpOnly="true"> 
```

不工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T01:34:18.027

你有没有尝试过

```
<SessionCookie secure="true" httpOnly="true" /> 
```

如此[处](https://community.jboss.org/message/598558)所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:23:16.893

我正在使用 JBoss [EAP] 5.0.1 并添加

```
<SessionCookie secure="true" httpOnly="true" /> 
```

在 <myJBossServerInstancePath>/deploy/jbossweb.sar/context.xml

```
<Context cookies="true" crossContext="true">
    <SessionCookie secure="true" httpOnly="true" />
    ... 
```

完美运行（感谢卢西亚诺）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-20T16:25:05.517

添加

```
<SessionCookie secure="true" httpOnly="true" /> 
```

在 $JBOSS_HOME/deploy/jbossweb.sar/context.xml

```
<Context cookies="true" crossContext="true">
   <SessionCookie secure="true" httpOnly="true" /> 
```

确保在服务器中配置的 HTTPS/SSL 可以正常工作。

# java - JFrame 关闭按钮

> ID：10457206
> 
> 赞同：2
> 
> 时间：2012-05-04T23:06:36.630
> 
> 标签：java, button, jframe, exit

我有一个 Jframe 窗口，里面有一个按钮。通过单击该按钮，它会打开一个新的 JFrame 窗口。但是当我关闭这个窗口时，它会自动关闭第一个带有按钮的 Jframe 窗口。当我关闭第二个 Jframe 窗口时，如何防止第一个 Jframe 窗口关闭？

```
public static void main (String[] args){
        JFrame frame = new JFrame("Test");
        frame.setVisible(true);
        frame.setSize(500,500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton button = new JButton("Test");

        button.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                new SView().gui();
            }
        });

        JPanel panel = new JPanel();
        GridBagLayout gridbag = new GridBagLayout();
        panel.setLayout(gridbag);
        panel.add(button);
        panel.setBackground(new Color(156, 93, 82));
        frame.add(panel, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:15:05.753

不要打电话

```
 frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

# apache - 重定向到另一个域，但保留 url

> ID：10457207
> 
> 赞同：2
> 
> 时间：2012-05-04T23:06:44.140
> 
> 标签：apache, mod-rewrite

我有 2 个虚拟主机：www.example1.com 和 www.example2.com

我在 www.example1.com/page.html 上有一个页面

我希望这个页面可以在另一个域中访问，这意味着我希望人们能够访问 www.example2.com/page.html 并查看物理上位于另一个虚拟主机上的那个页面。但 URL 必须显示 www.example2.com

我不想简单地将页面物理地移动到另一个虚拟主机，因为它是一个 wordpress 页面，这将是一个巨大的麻烦。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:16:39.350

是的，这是可能的。

我建议反向代理来做到这一点。像[NGinX](http://nginx.org/)这样的软件做得很好，当然还有 apache（我记得是 mod_proxy）。

无论如何，这种方法的缺点是您的服务器（在 www.example2.com 上）会从 example1 请求页面并通过自身发送，而不是直接从 example1 发送。

顺便说一句 - 这种技术也被用于负载平衡。

编辑#1：
在 nginx 中它被称为[ngx_http_upstream_module](http://nginx.org/en/docs/http/ngx_http_upstream_module.html)。

编辑#2：
`grahaminn`是正确的，但我的方法“正确”显示 URL - 而不是一个固定的 URL，这会产生问题，例如，为特定页面添加书签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:30:17.753

两种选择：

1.  使用 Apache ProxyPass：[http ://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)
2.  使用带有 [P] 标志的重写（需要安装 mod_proxy）

    RewriteRule /(.*)$ [http://example2.com/](http://example2.com/) $1 [P]

[http://httpd.apache.org/docs/2.4/rewrite/flags.html](http://httpd.apache.org/docs/2.4/rewrite/flags.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T23:19:46.650

您可以只提供来自 example2.com 的页面，该页面使用 javascript 或 iframe 从 example1.com 加载内容

# java - Java：如何执行向 -Infinity 而不是 0 舍入的整数除法？

> ID：10457208
> 
> 赞同：13
> 
> 时间：2012-05-04T23:06:55.330
> 
> 标签：java, math, integer, division

（**注意**：与[其他问题](https://stackoverflow.com/questions/1783519/how-to-round-down-integers-in-java)不同，因为 OP 从未明确指定舍入为 0 或 -Infinity）

[JLS 15.17.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)说整数除法向零舍入。如果我想要`floor()`正除数的类似行为（我不关心负除数的行为），那么实现所有输入的数字正确的最简单方法是什么？

```
int ifloor(int n, int d)
{
    /* returns q such that n = d*q + r where 0 <= r < d
     * for all integer n, d where d > 0
     *
     * d = 0 should have the same behavior as `n/d`
     *
     * nice-to-have behaviors for d < 0:
     *   option (a). same as above: 
     *     returns q such that n = d*q + r where 0 <= r < -d
     *   option (b). rounds towards +infinity:
     *     returns q such that n = d*q + r where d < r <= 0
     */
}

long lfloor(long n, long d)
{
    /* same behavior as ifloor, except for long integers */
} 
```

`int`（更新：我想为和`long`算术都有一个解决方案。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T00:06:22.233

如果你可以使用第三方库，[Guava](https://github.com/google/guava)有这个：[`IntMath.divide(int, int, RoundingMode.FLOOR)`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/math/IntMath.html#divide-int-int-java.math.RoundingMode-)和[`LongMath.divide(int, int, RoundingMode.FLOOR)`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/math/LongMath.html#divide-long-long-java.math.RoundingMode-). （披露：我为 Guava 做出了贡献。）

如果您不想为此使用第三方库，您仍然可以查看实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T23:12:32.037

（我正在为`long`s 做所有事情，因为 s 的答案`int`是相同的，只需替换`int`every`long`和`Integer`for every `Long`。）

你可以只是[`Math.floor`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#floor(double))一个双除法结果，否则......

原答案：

```
return n/d - ( ( n % d != 0 ) && ( (n<0) ^ (d<0) ) ? 1 : 0 ); 
```

**优化答案：**

```
public static long lfloordiv( long n, long d ) {

    long q = n/d;
    if( q*d == n ) return q;
    return q - ((n^d) >>> (Long.SIZE-1));
} 
```

（为了完整起见，使用`BigDecimal`带有`ROUND_FLOOR`舍入模式的 a 也是一种选择。）

**新编辑：**现在我只是想看看它可以在多大程度上进行优化以获得乐趣。使用[马克的回答](https://stackoverflow.com/a/10466453/771837)我到目前为止最好的是：

```
public static long lfloordiv2( long n, long d ){

    if( d >= 0 ){
        n = -n;
        d = -d;
    }
    long tweak = (n >>> (Long.SIZE-1) ) - 1;
    return (n + tweak) / d + tweak;
} 
```

（使用比上述更便宜的操作，但字节码稍长（29 vs. 26））。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-05T22:18:28.103

有一个相当简洁的公式适用于`n < 0`和`d > 0`：取 n 的按位补码，进行除法，然后取结果的按位补码。

```
int ifloordiv(int n, int d)
{
    if (n >= 0)
        return n / d;
    else
        return ~(~n / d);
} 
```

`ifloordiv`对于其余部分，类似的构造有效（在满足通常不变量的意义上兼容`ifloordiv(n, d) * d + ifloormod(n, d) == n`）给出始终在范围内的结果`[0, d)`。

```
int ifloormod(int n, int d)
{
    if (n >= 0)
        return n % d;
    else
        return d + ~(~n % d);
} 
```

对于负除数，公式不是那么简洁。以下是 和 的扩展版本，`ifloordiv`它们`ifloormod`遵循负除数的“不错”行为选项 (b)。

```
int ifloordiv(int n, int d)
{
    if (d >= 0)
        return n >= 0 ? n / d : ~(~n / d);
    else
        return n <= 0 ? n / d : (n - 1) / d - 1;
}

int ifloormod(int n, int d)
{
    if (d >= 0)
        return n >= 0 ? n % d : d + ~(~n % d);
    else
        return n <= 0 ? n % d : d + 1 + (n - 1) % d;
} 
```

对于，当和是`d < 0`时，存在一个不可避免的问题情况，因为那时数学结果会溢出类型。在这种情况下，上面的公式会返回包装后的结果，就像通常的 Java 除法一样。据我所知，这是我们默默得到“错误”结果的唯一极端情况。`d == -1``n``Integer.MIN_VALUE`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T18:43:33.270

```
return BigDecimal.valueOf(n).divide(BigDecimal.valueOf(d), RoundingMode.FLOOR).longValue(); 
```

# oop - 保留整个对象 VS 不要寻找东西

> ID：10457209
> 
> 赞同：6
> 
> 时间：2012-05-04T23:06:59.797
> 
> 标签：oop, refactoring

我正在阅读 Fowler 的重构书并看到[Preserve Whole Object](http://martinfowler.com/refactoring/catalog/preserveWholeObject.html)。一种不同的、较新的观点认为这种重构与你应该做的完全相反：[干净的代码说话——不要寻找东西！](http://www.youtube.com/watch?v=RlfLCWKxHJ0).

Fowler 确实提到您应该查看是否可以将方法移动到使用大量参数的类中。我认为这将是唯一合理的选择。对于定义不明确的方法，这种重构似乎是一种创可贴。

Fowler 的源材料有点过时了。是让这种技术走上渡渡难关的普遍智慧，还是实际上存在您想要进行这种重构的情况？还是我误解了测试驱动的风格，因为这些示例处理对象构造，而不是消息发送？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T21:15:19.477

面向对象设计中有许多概念，例如模式、原则和实践，起初可能看起来相似或矛盾。事实上，它们中的大多数既不相似也不矛盾。使他们与众不同和一致的是他们的意图。

**Preserve Whole Object**重构和 The Clean Code Talks 视频中提到的**Service Locator**模式之间的看似矛盾发生在它们被视为相同概念时，尽管它们的意图和本质不同。

**保留整个对象**重构只是一种通过减少函数参数的数量来使代码更易于阅读、理解和维护的技术。另一方面，服务定位器是一种设计模式，用于使用控制反转概念管理系统中不同组件之间的**依赖***关系*。与对系统具有局部影响的**Preserve Whole Object**重构技术不同，它应用于系统的一小部分（一个功能），**Service Locator**模式对系统具有全局影响并解决更大的体系结构问题（*依赖管理*）。

## **何时使用 Preserve Whole Object 重构？**

当函数有两个或多个参数（基本上是一个对象的属性）时，请使用**保留整个对象重构，因此请改为传递对象。**

有一个类似的概念称为*Parameter Object* (aka *Argument Object* ) ( [Introduce Parameter Object refactoring](http://martinfowler.com/refactoring/catalog/introduceParameterObject.html) )，它指出如果你有一组参数不是一个对象的属性，但在概念上彼此相关或自然地在一起，换行他们拥有自己的类，而是传递该类的实例。它主要用于向对象发送消息时。

引用**Clean Code**，第 3 章：函数，函数参数，第 43 页 (Robert C. Martin)：

> **参数对象**
> 
> 当一个函数似乎需要两个或三个以上的参数时，很可能其中一些参数应该被包装到它们自己的类中。例如，考虑以下两个声明之间的区别：
> 
> ```
> Circle makeCircle(double x, double y, double radius);
> Circle makeCircle(Point center, double radius); 
> ```
> 
> 通过创建对象来减少参数的数量可能看起来像是作弊，但事实并非如此。当变量组一起传递时，就像上面示例中的 x 和 y 一样，它们很可能是一个值得拥有自己名称的概念的一部分。

## **何时使用服务定位器模式？**

当您的类具有概念上不相关的依赖项并且您不希望您的类依赖于具体实现时，请使用**服务定位器模式。**实际上，这是您想要使用任何*依赖管理*方法的时候。另一种选择是*依赖注入*方法，它将所有依赖项显式指定为构造函数的单独参数。而**服务定位器**在单个*容器*对象中传递所有依赖项。事实上，**Service Locator**模式和**Preserve Whole Object正是这种相似性**重构将参数组合在一个对象中，这会造成混淆。*依赖管理*技术主要用于对象构造。

*依赖管理*的两种方法各有利弊，在控制容器反转和Martin Fowler[的依赖注入模式](http://martinfowler.com/articles/injection.html)文章中进行了讨论。

## **何时使用两者？**

有时会出现这样的情况，您的类将具有两个或多个概念上相关的依赖项，您可能希望将它们组合在一个对象中并使用**Service Locator**将其作为依赖项传递。因此，如您所见，这两个概念并不相互排斥。

# c++ - Arduino uint8_t 变量

> ID：10457210
> 
> 赞同：1
> 
> 时间：2012-05-04T23:07:01.090
> 
> 标签：c++, arduino

我在处理一些 arduino 代码时遇到了问题。我使用我找到的以太网教程代码和我找到的一些红外发射器和接收器代码，我试图将它们结合起来。

[http://www.ladyada.net/learn/sensors/ir.html](http://www.ladyada.net/learn/sensors/ir.html)

[http://g33k.blogspot.com/2010/09/arduino-data-webserver-sample-web.html](http://g33k.blogspot.com/2010/09/arduino-data-webserver-sample-web.html)

两种代码都可以自己正常工作。

代码可以编译，但是当我调用以下 void IRDetector() 时，它不起作用。我已经对其进行了调试，到目前为止，我发现当我使用变量 uint8_t 或 uint16_t 时（我尝试用整数和长整数替换它们）。我必须导入和库才能使用 uint8_t 吗？有什么想法吗？

任何帮助，将不胜感激。

```
 uint16_t pulses[100][2];  // pair is high and low pulse 
   uint8_t currentpulse = 0; // index for pulses we're storing

    uint8_t highpulse, lowpulse;  // temporary storage timing

      void IRDetectCode(void)
   {
    while(true){

highpulse = lowpulse = 0; // start out with no pulse length

while (IRpin_PIN & (1 << IRpin)) {
  // pin is still HIGH

  // count off another few microseconds
  highpulse++;
  delayMicroseconds(RESOLUTION);

  // If the pulse is too long, we 'timed out' - either nothing
  // was received or the code is finished, so print what
  // we've grabbed so far, and then reset
  if ((highpulse >= MAXPULSE) && (currentpulse != 0)) {
     Serial.print(" usec, ");
  //  printpulses();
    //currentpulse=0;
    return;
  }
}
// we didn't time out so lets stash the reading
pulses[currentpulse][0] = highpulse;

// same as above
while (! (IRpin_PIN & _BV(IRpin))) {
  // pin is still LOW
   Serial.print(" usec, ");
  lowpulse++;
  delayMicroseconds(RESOLUTION);
  if ((lowpulse >= MAXPULSE)  && (currentpulse != 0)) {
  //  printpulses();
  //  currentpulse=0;
    return;
  }
}
//pulses[currentpulse][1] = lowpulse;

          // we read one high-low pulse successfully, continue!
       currentpulse++;
  }
    }

  void printpulses(void) {
        Serial.println("\n\r\n\rReceived: \n\rOFF \tON");
         for (uint8_t i = 0; i < currentpulse; i++) {
            Serial.print(pulses[i][0] * RESOLUTION, DEC);
            Serial.print(" usec, ");
            Serial.print(pulses[i][1] * RESOLUTION, DEC);
            Serial.println(" usec");
           }

         // print it in a 'array' format
     Serial.println("int IRsignal[] = {");
     Serial.println("// ON, OFF (in 10's of microseconds)");
         for (uint8_t i = 0; i < currentpulse-1; i++) {
             Serial.print("\t"); // tab
             Serial.print(pulses[i][1] * RESOLUTION / 10, DEC);
             Serial.print(", ");
            Serial.print(pulses[i+1][0] * RESOLUTION / 10, DEC);
           Serial.println(",");
        }
          Serial.print("\t"); // tab
     Serial.print(pulses[currentpulse-1][1] * RESOLUTION / 10, DEC);
      Serial.print(", 0};");
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T12:06:41.087

uint8_t 是一个 8 位的无符号整数。在 Arduino 中，它被称为“字节”，因此您可以这样使用它：

```
for (byte i = 0; i < currentpulse; i++) {.... 
```

它比使用 Arduino 的“int”类型（== int16_t）或“unsigned int”（== uint16_t）要好得多，因为 ATmega328 是 8 位的。因此处理 8 位 var 会更快（很多）。

我希望它可以帮助。

# sql - 具有多个过滤条件的 oracle 查询

> ID：10457211
> 
> 赞同：0
> 
> 时间：2012-05-04T23:07:13.590
> 
> 标签：sql, oracle

我有一个甲骨文查询：

```
select * from table1,table2 where table1.id1 = table2.id2 and 
--filters
table1.col2 = 'value_11' and table2.col2 = 'value_21'
or
table1.col2 = 'value_12' and table2.col2 = 'value_22'
or
table1.col2 = 'value_13' and table2.col2 = 'value_23'
... 
```

如果过滤条件达到 100，如何重写查询？喜欢`(value_11,value_21),(value_12,value_22)......(value_1100,value_2200)`

编辑：原始查询是这样的：

```
select 
    cust_country.cust_login_id 
  , cust_country.user_login_id
  , cust_country.country_name
  , cust_email.email 
from ( select 
           APP_USER.USER_ID, customer.cust_login_id
         , user_credential.user_login_id, COUNTRY.COUNTRY_NAME 
       from 
           app_user
         , user_ci
         , contact_info
         , address
         , country
         , customer
         , user_credential 
       where APP_USER.USER_ID = USER_CI.USER_ID 
         and CONTACT_INFO.CI_ID=USER_CI.CI_ID
         and ADDRESS.ADDR_ID=CONTACT_INFO.CI_ID 
         and ADDRESS.COUNTRY_ID=COUNTRY.COUNTRY_ID 
         and APP_USER.CUST_ID=CUSTOMER.CUST_ID 
         and USER_CREDENTIAL.USER_ID=APP_USER.USER_ID
     ) cust_country,

     ( select 
           customer.cust_login_id, APP_USER.USER_ID
         , user_credential.user_login_id, ipty_email.email
       from 
         app_user,user_ci,contact_info,ipty_email,customer,user_credential 
       where APP_USER.USER_ID = USER_CI.USER_ID 
         and CONTACT_INFO.CI_ID=USER_CI.CI_ID 
         and ipty_email.ipe_ID=CONTACT_INFO.CI_ID 
         and APP_USER.CUST_ID=CUSTOMER.CUST_ID 
         and USER_CREDENTIAL.USER_ID=APP_USER.USER_ID
     ) cust_email

where cust_country.user_id = cust_email.user_id 
  and (cust_country.cust_login_id, cust_country.user_login_id) in 
      (('xxxxyyyyy','ADMIN2')) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T23:29:57.450

您可以使用以下方法（稍微）压缩它：

```
SELECT *                                       --- irrelevant to the question:
FROM table1 JOIN table2                        --- use the explicit JOIN syntax
             ON table1.id1 = table2.id2        --- not the implicit join with the
---table1,table2 where table1.id1 = table2.id2 --- WHERE syntax (removed)
WHERE
--- filters
  AND (table1.col2, table2.col2) IN
        (  ('value_11', 'value_21'),
           ('value_12', 'value_22'),
           ('value_13', 'value_23'),
           ...
           (value_1100, value_2200)
        ) 
```

如果您在表格中有这些过滤条件，您甚至可以制作它：

```
 AND (table1.col2, table2.col2) IN
        (  SELECT filter1, filter2
           FROM filter_table
        ) 
```

# r - 创建 R 数据集

> ID：10457215
> 
> 赞同：3
> 
> 时间：2012-05-04T23:07:45.823
> 
> 标签：r

我想在 R 中创建数据集，以便按如下方式加载到 R 会话中：

```
data(mydatasetname) 
```

我试过以下：

```
values<- read.table("mydatasetname.txt") 
save(values,file="value.rda") 
```

但是当我输入以下命令来加载数据时：

```
data(values)

Warning message: In data(values) : data set ‘values’ not found 
```

有人可以帮忙吗？

尼丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T00:34:49.050

我怀疑`load`可能是你所追求的，但我不确定。如果您直接加载数据，则无需调用数据，如下所示：

```
mtcars2 <- mtcars                             #rename mtcars to mtcars2
save(mtcars2, file="mtcars2.rda")             #save mtcars2 
rm(mtcars2)                                   #remove from envir
mtcars2                                       #gone : (
load("mtcars2.rda")                           #load mtcars2 
mtcars2                                       #and you're back : ) 
```

现在您只需`load(mtcars2.rda)`要从现在开始使用，您的数据就在那里。

如果您想使用`data()`，您可能必须使用您的数据创建一个包并加载该包，然后使用数据，尽管我对此不是 100% 确定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-24T22:31:45.327

我做了几乎与您完全相同的步骤，除了我将它保存在数据子目录中：

```
save(values,file="data/value.rda") 
```

然后我删除了对象：

```
rm(values) 
```

并使用 ls() 确保它消失了。

当我尝试重新加载它时，我使用了文件名值的**值**而不是**值**：

```
data(value) 
```

效果很好。如果我尝试“数据（值）”，我会收到您看到的错误。

所以底线似乎是：您需要使用数据（值），而不是数据（值），并且它可能必须位于数据子目录中。

# java - For循环根本不执行？

> ID：10457217
> 
> 赞同：0
> 
> 时间：2012-05-04T23:07:55.617
> 
> 标签：java, for-loop, byte

所以我有一个处理字节的程序。一切正常，除了一部分。`for`循环根本不执行。

这是代码......它很复杂。

```
public int getID(int slot){
    int slots = 0;
    for(int a=0;a<b.length;a++){
        if(correctslot){ //condition not shown.
            if(slots==slot){
                System.out.println("found pair"); 
                for(int i=a;i<37;i++){
                    System.out.println("executing loop");
                    if(isID){ //condition not shown.
                        System.out.println("returning location");
                        return i+1;
                    }
                }
            }
            slots++;
        }
    }
    return 0;
} 
```

如果程序找到匹配的插槽，则打印`found pair`. 如果它正在执行它打印的循环`executing loop`，但那是根本不做任何事情的部分。它打印第一个字符串`found pair`，但不打印第二个`executing loop`。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:10:02.730

调试`a`。我想到`a >= 37`时候也可以`correctSlot && slots == slot`。

# ruby-on-rails - 在 Amazon EC2 中将 Java war 和 Rails 应用程序部署到 Apache

> ID：10457222
> 
> 赞同：0
> 
> 时间：2012-05-04T23:08:32.090
> 
> 标签：ruby-on-rails, jakarta-ee, deployment

是否可以将 java 应用程序和 rails 应用程序部署到同一个 EC2 服务器。我有一个通过 AJAX 与 java 应用程序通信的 rails 应用程序，所以我需要将两者部署到同一台服务器。有没有办法做到这一点或任何资源来看看如何？

我想通过将 apache2 与 tomcat 和乘客一起使用是可能的。这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:36:45.787

您可以在不同的端口上安装两台服务器，即 80 上的 Apache HTTP 和 8080 上的 Apache Tomcat（或其他）。如果您想通过 Apache HTTP 访问所有客户端，您也可以使用 mod_jk。MOD_JK 使您能够集成 Apache Tomcat 和 Apache HTTP。

# java - HttpServlet 响应。有没有办法在不使用 response.setHeader 的情况下使 cookie 安全和/或仅限 http

> ID：10457232
> 
> 赞同：4
> 
> 时间：2012-05-04T23:09:52.460
> 
> 标签：java, servlets, cookies

`response.setHeader`有没有办法在不使用这样的情况下使 cookie 安全和/或仅 http-only ：

```
response.setHeader("Set-Cookies", 
   "name1=value2; Path=/path; Secure; HttpOnly," +
   "name2=value2; Expires=Sun, 03-Jun-2012 23:00:56 GMT; Path=/, etc."); 
```

但是使用一些内置功能？

PS我不是在谈论会话cookie，而是应用程序使用的自定义cookie。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:33:47.220

检查[javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html)。有一个[`HttpServletResponse#addCookie()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#addCookie%28javax.servlet.http.Cookie%29)。您的特定示例可以解决如下：

```
Cookie name1 = new Cookie("name1", "value1");
name1.setPath("/path");
name1.setSecure(true);
name1.setHttpOnly(true);

Cookie name2 = new Cookie("name2", "value2");
name2.setPath("/");
name2.setMaxAge(secondsUntil3Jun2012);

response.addCookie(name1);
response.addCookie(name2); 
```

# asp.net-mvc - 调用 RedirectToAction 后 MVC 模型为空

> ID：10457233
> 
> 赞同：1
> 
> 时间：2012-05-04T23:09:57.870
> 
> 标签：asp.net-mvc

我在完成 POST 操作后尝试**RedirectToAction时遇到 NullReferenceException。**这是我正在尝试的摘要：

发布应用程序后，如果应用程序有效，我希望客户端重定向到另一个**视图**（*和**路由***）以进行后续流程。

```
[HttpPost]
public ActionResult SubmitApplication(Application application)
{
    // Do stuff

    if (!ModelState.IsValid)
    {
        return View(application);
    }

    // Create and set variables for the next route

    return RedirectToAction("ApplicationReview", new
    {
        x = "foo",
        y = "bob"
    });
}

[HttpGet]
public ActionResult ApplicationReview(string x, string y)
{
    // Do stuff using x and y as keys

    return View();
} 
```

在**SubmitApplication**视图中，我有类似于以下的代码，尽管它更详细。调用**RedirectToAction**后， **SubmitApplication视图中的****Model**对象为 null 并引发异常。我可以理解为什么**SubmitApplication**视图作为重定向过程的一部分返回，我只是无法弄清楚为什么模型为空或如何设置它。最后，可能永远不会到达目标 Action，因为重定向从未真正发生过。

 ****```
@if (Model.HasSomething)
{ 
    ...
} 
```

我究竟做错了什么？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:30:42.500

RedirectToAction 中的第二个参数不是针对模型，而是针对 routeValues。

要临时维护重定向结果的状态，您需要将数据存储在 TempData 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:33:29.970

我有点不清楚你说的意思是什么`After the RedirectToAction is called the Model object is null and throws an exception.`，因为在你显示的代码中，你在调用 RedirectToAction 后没有对模型做任何事情。

您的意思是模型在您的 ApplicationReview 视图中为空吗？

编辑：

空引用异常表示正在取消引用该变量。没有任何东西可以取消对该模型的引用。也许如果您发布堆栈跟踪它会有所帮助。****

# monodevelop - 在 MonoDevelop 中格式化代码

> ID：10457236
> 
> 赞同：16
> 
> 时间：2012-05-04T23:11:09.027
> 
> 标签：monodevelop

我在 Mac 上使用 MonoDevelop 来编写 MonoTouch 应用程序。在我打字时，自动代码缩进/格式化效果很好。

问题是当我复制和粘贴代码片段时，在很多情况下我会丢失格式并且将行组合在一起，缩进丢失，并且手动实现制表符、间距和换行符是一个巨大的痛苦。无论如何我可以在 monoDevelop 中使用命令来自动缩进并将格式应用于现有代码。

我想也许 Edit|Format|Format Document/Selection 会起作用，但是这些命令对代码根本没有任何影响。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-04T20:05:44.707

一键格式化整个文档：`control-I`

要格式化选择：`Edit->Format->Format Selection`

要自定义格式：`MonoDevelop->Preferences->Source Code->Code Formatting`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-10T17:32:16.557

您实际上需要选择所有文本，然后转到“编辑”->“格式”->“格式化文档”。否则它似乎不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-19T08:35:47.623

对于 macOS 上的我来说，“自动格式化”的快捷方式是`CTRL + i`.

您可以根据需要更改快捷方式。要更改它，请转到 Preferences -> Key Bindings，然后在搜索框中键入“format”并编辑“Format Document”快捷键/键绑定。

# vb.net - VB.NET 中多次出现的字符串范围

> ID：10457237
> 
> 赞同：1
> 
> 时间：2012-05-04T23:11:24.093
> 
> 标签：vb.net, string, split, substring, indexof

我正在尝试在 VB 中完成一些我每天在 JavaScript 中所做的相当简单的事情。

我需要解析出现多次的两个字符串（主要是 HTML 标记）之间的文本。

样本数据：

```
<tag>test</tag>
<tag>test2</tag>
<tag>test3</tag> 
```

如果我想在 JavaScript 中获取第二个 <tag> 中的数据，我只需这样做：

```
var result = string.split('<tag>')[2].split('</tag>')[0]; 
```

我似乎让它在VB中工作的唯一方法是这样的......

```
Dim from = string.IndexOf("<tag>")
Dim [to] = string.IndexOf("</tag>", from)
Dim result = string.Substring(from + "<tag>".Length, [to] - from - "<tag>".Length) 
```

请注意，这只是 VB 中的第一次出现，相比之下代码看起来很荒谬......我什至不想弄清楚第二次出现，直到我发现这是我唯一的解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:14:15.217

您可以在 VB 中使用 String 上的“Split”方法来做同样的事情。

```
 Dim sx As String = "<tag>test</tag> <tag>test2</tag> <tag>test3</tag> "
    Dim sp As String = sx.Split(New [String]() {"<tag>"}, StringSplitOptions.RemoveEmptyEntries)(1).Split(New [String]() {"</tag>"}, StringSplitOptions.RemoveEmptyEntries)(0) 
```

# python - 在 Python 中求解多项式方程

> ID：10457240
> 
> 赞同：10
> 
> 时间：2012-05-04T23:11:45.470
> 
> 标签：python, wolfram-mathematica

到目前为止，我一直使用 Mathematica 来求解解析方程。但是现在我需要解决数百个这种类型的方程（特征多项式）

```
a_20*x^20+a_19*x^19+...+a_1*x+a_0=0 (constant floats a_0,...a_20) 
```

这会在 Mathematica 中产生非常长的计算时间。

在 numpy 或任何其他包中是否有一个现成的命令来解决这种类型的方程？（到目前为止，我只将 Python 用于模拟，所以我对分析工具知之甚少，并且在 numpy 教程中找不到任何有用的东西）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T23:30:24.990

您使用 numpy（显然），但我自己从未尝试过：[http](http://docs.scipy.org/doc/numpy/reference/generated/numpy.roots.html#numpy.roots) ://docs.scipy.org/doc/numpy/reference/generated/numpy.roots.html#numpy.roots 。

Numpy 还提供了一个多项式类... [numpy.poly1d](http://docs.scipy.org/doc/numpy/reference/generated/numpy.poly1d.html#numpy.poly1d)。

这会以数字方式找到根 - 如果您想要分析根，我认为 numpy 无法为您做到这一点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-05T05:56:03.023

这是来自 simpy 文档的示例：

```
>>> from sympy import *
>>> x = symbols('x')
>>> from sympy import roots, solve_poly_system

>>> solve(x**3 + 2*x + 3, x)
           ____          ____
     1   \/ 11 *I  1   \/ 11 *I
[-1, - - --------, - + --------]
     2      2      2      2

>>> p = Symbol('p')
>>> q = Symbol('q')

>>> sorted(solve(x**2 + p*x + q, x))
          __________           __________
         /  2                 /  2
   p   \/  p  - 4*q     p   \/  p  - 4*q
[- - + -------------, - - - -------------]
   2         2          2         2

>>> solve_poly_system([y - x, x - 5], x, y)
[(5, 5)]

>>> solve_poly_system([y**2 - x**3 + 1, y*x], x, y)
                                   ___                 ___
                             1   \/ 3 *I         1   \/ 3 *I
[(0, I), (0, -I), (1, 0), (- - + -------, 0), (- - - -------, 0)]
                             2      2            2      2 
```

（[此示例的文档链接](http://docs.sympy.org/0.7.1/modules/polys/basics.html#solving-equations)）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T23:36:27.470

您可能想查看[SAGE](http://www.sagemath.org/)，它是一个为数学处理而设计的完整 Python 发行版。除此之外，正如 Marcin 强调的那样，我使用[Sympy](http://code.google.com/p/sympy/)处理一些类似的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-15T22:26:05.770

```
import decimal as dd
degree = int(input('What is the highest co-efficient of x? '))
coeffs = [0]* (degree + 1)
coeffs1 = {}
dd.getcontext().prec = 10
for ii in range(degree,-1,-1):
    if ii != 0:
        res=dd.Decimal(input('what is the coefficient of x^ %s ? '%ii))
        coeffs[ii] = res
        coeffs1.setdefault('x^ %s ' % ii, res)
    else:
        res=dd.Decimal(input('what is the constant term ? '))
        coeffs[ii] = res
        coeffs1.setdefault('CT', res)
coeffs = coeffs[::-1]
def contextmg(start,stop,step):
    r = start
    while r < stop:
        yield r
        r += step
def ell(a,b,c):
    vals=contextmg(a,b,c)
    context = ['%.10f' % it for it in vals]
    return context
labels = [0]*degree
for ll in range(degree):
    labels[ll] = 'x%s'%(ll+1)
roots = {}
context = ell(-20,20,0.0001)
for x in context:
    for xx in range(degree):
        if xx == 0:
            calculatoR = (coeffs[xx]* dd.Decimal(x)) + coeffs[xx+1]
        else:
            calculatoR = calculatoR * dd.Decimal(x) + coeffs[xx+1]

    func =round(float(calculatoR),2)
    xp = round(float(x),3)
    if func==0 and roots=={} :
        roots[labels[0]] = xp
        labels = labels[1:]
        p = xp
    elif func == 0 and xp >(0.25 + p):
        roots[labels[0]] = xp
        labels = labels[1:]
        p = xp

print(roots) 
```

# ruby-on-rails - 为具有子域和指向它们的 CNAMES 的自定义域正确 DNS 设置

> ID：10457242
> 
> 赞同：1
> 
> 时间：2012-05-04T23:11:58.890
> 
> 标签：ruby-on-rails, heroku, dns, hosting

我有一个多租户 Rails 应用程序，由 Heroku 在[http://myapp.herokuapp.com](http://myapp.herokuapp.com)托管。租户/帐户通过子域（和 Postgresql 模式）分开。然后，我将自己的域作为自定义域添加到 Heroku 应用程序。由于 Heroku 真的建议不要使用 A 记录，因为“正常运行时间影响”（[https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords)）我首先尝试将 CNAME 记录从我的自定义域放到myapp.herokuapp.com。这也适用于[http://clientaccount.mydomain.com](http://clientaccount.mydomain.com)等子域。

当我的客户希望她自己的域指向他们的帐户时，问题就开始了，因此[http://www.clientdomain.com](http://www.clientdomain.com)显示[http://clientaccount.mydomain.com](http://clientaccount.mydomain.com)，最明显的解决方案似乎是在我的客户端 DNS 指向[http://clientaccount.mydomain.com](http://clientaccount.mydomain.com)。这不起作用，当访问该地址时，一条错误消息指出“该主机名没有配置应用程序”，还`host www.clientdomain.com`给出了：

```
www.clientdomain.com is an alias for clientaccount.mydomain.com
clientaccount.mydomain.com is an alias for myapp.herokuapp.com
myapp.herokuapp.com is an alias for ar.herokuapp.com 
```

在 Heroku 提供了一些非常混乱的支持之后，他们建议我使用 A 记录而不是指向他们的三个顶级 IP。于是改了，还是不行。然后他们告诉我在我的 Heroku 设置中将我的客户域添加为自定义域，但我没有得到很好的结果。

所以我目前的配置如下：

## Heroku 的 Myapp 具有以下自定义域：

*.mydomain.com www.clientdomain.com

## mydomain.com DNS

*.mydomain.com 有三个指向 Heroku 顶点 IP 的 A 记录

## clientdomain.com DNS

在 clientdomain.com 的 DNS 中，clientdomain.com（不带 www）被重定向到 www.clientdomain.com（不确定他们是如何做到的，但它似乎可以工作。）

对于 www.clientdomain.com，有一条 CNAME 记录指向 clientaccount.mydomain.com

## 当前状态

www.mydomain.com 正确解析。

clientaccount.mydomain.com 正确解析。

www.clientdomain.com 转到 www.mydomain.com（没有子域）

所以问题显然是在DNS中，因为我的应用程序显然没有收到它，子域是否会消失在某个地方？还是我必须更改 Rails 中的一些代码才能处理这个问题？

子域作为路由约束处理，子域类：

```
class Subdomain
  def self.matches?(request)
    request.subdomain.present? && Account.find_by_subdomain(request.subdomain)
  end
end 
```

任何输入表示赞赏！

## 编辑

我已经完成了建议的所有操作，我是否也必须更改我的应用程序控制器？

**application_controller.rb**

```
def handle_subdomain
  if @account = Account.find_by_subdomain(request.subdomain)
    PgTools.set_search_path @account.id
    @current_account = @account
  else
    @current_account = nil
    PgTools.restore_default_search_path
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T02:52:31.217

您最好的选择是首先设置您的主域，如下所示：

`*.mydomain.com`作为 CNAME`heroku-appname.herokuapp.com`

并`*.mydomain.com`作为域名添加到您的应用中：

```
$ heroku domains:add *.mydomain.com 
```

接下来，您需要为您的用户/客户设置一种简单的方法，将他们的自定义域添加到您的多租户应用程序中。这需要两件事，将域名添加到您的应用程序并让他们设置 DNS。这是最好的方法：

添加`www.myclientdomain.com`到您的应用程序：

```
$ heroku domains:add www.myclientdomain.com 
```

然后设置 DNS 指向 Heroku。你最好从 Heroku 的设置中吸取教训，让你的客户 CNAME 到你拥有的域名。这将有助于避免锁定，并让您更好地控制您将流量引导到哪里。所以：

CNAME`www.myclientdomain.com`到`proxy.mydomain.com`

CNAME 将跟随`proxy.mydomain.com`并`heroku-appname.herokuapp.com`解析到 Heroku IP。

那么你应该准备好了。

理想情况下，您会比手动添加域名更快地使用自定义域来吸引新客户，因此您需要自动化该步骤。使用 heroku api 和客户端，您可以在您的应用程序中以编程方式管理您的自定义域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T08:23:12.693

您需要执行以下操作：

```
def handle_subdomain
  if @account = Account.find_by_subdomain(request.subdomain) || Account.find_by_domain(request.domain)
    PgTools.set_search_path @account.id
    @current_account = @account
  else
    @current_account = nil
    PgTools.restore_default_search_path
  end
end 
```

注意`Account.find_by_domain(request.domain)`——尽管您可能需要`request.host`完整的主机，而不仅仅是域组件。

# vb.net - ListBox VB.NET 的 ValueMember

> ID：10457245
> 
> 赞同：1
> 
> 时间：2012-05-04T23:12:13.707
> 
> 标签：vb.net

再会，

我想显示我的表“订阅者”中的电话号码，并具有与其关联的相同值（作为字符串）。例如，我想显示这些数字：

```
+12345678 
+87654321 
```

这是我的代码：

```
Dim conStr As String = ConfigurationManager.ConnectionStrings("dbConnectionString").ConnectionString
Dim adapter As New SqlDataAdapter("Select * from tblSubscribers", conStr)
Dim dataset As DataSet = New DataSet

adapter.Fill(dataset)

ListBoxSubscribers.DataSource = dataset.Tables(0)
ListBoxSubscribers.DisplayMember = "Phone"
ListBoxSubscribers.ValueMember = "Phone" 
```

我正在尝试遍历列表框的每个值。问题是我得到 P, h, o, n, e 而不是实际数字。这是我的迭代程序：

```
 For Each item As String In ListBoxSubscribers.ValueMember
            Dim PhoneNumber As String = item.ToString
            TextBoxPhoneNumberDisplay.Text = PhoneNumber
            SendSMS(PhoneNumber, msg)
            System.Threading.Thread.Sleep(2000)
        Next 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:21:03.827

您的`ListBoxSubscribers`控件使用 DataTable 作为其`DataSource`，这意味着列表中的项目是 DataRowView 项目，而不是字符串。

您还遍历`Items`集合，而不是`ValueMember`属性。

快速解决：

```
For Each item As DataRowView In ListBoxSubscribers.Items
  Dim PhoneNumber As String = item("Phone").ToString
  '\\ etc
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:10:17.770

valuemember 必须是主键，顺便说一句，您没有遍历整个 valueMembers，它只是该控件中设置的“字符串”，尝试将 displayMember 和 ValueMember 设置为数据集中的列，例如：

```
listboxsubscribers.displayMember = dataset.Tables(0).columns(index) 
```

# php - Symfony2 中的数据库测试实践？如何隔离？

> ID：10457247
> 
> 赞同：12
> 
> 时间：2012-05-04T23:12:27.627
> 
> 标签：php, unit-testing, symfony

目前测试数据库与 Symfony2 交互的最佳实践是什么？我有一个简单的 CRUD 设置，我想确保我的测试正常。现在，我有 4 个测试，每个测试都确保创建、更新、删除和列出操作正常。

在我的测试用例中，我有两个魔术方法，__construct 和 __destruct。在它们内部，我使用 'php app/console ...' 调用 exec() 以创建数据库、创建模式并稍后删除数据库。但是，这太慢了，当我有多个测试用例时，它总是会发生。

在进行数据库测试和隔离此类测试时，我应该如何进行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T16:08:23.687

我认为最好始终从清洁开始，以确保测试完全隔离。为此，我只是在每次测试之前构建数据库结构，然后用给定测试所需的固定装置填充它。

请注意，我只构建所需的数据库表，并且只插入所需的固定装置。它比加载大型数据库转储快一点。它也更干净，因为测试不共享固定装置（这使它们更容易维护）。

我有一个名为 KernelAwareTest 的基本测试用例类，它可以帮助我构建模式。您可以在 gist 上找到它：[https ://gist.github.com/1319290](https://gist.github.com/1319290)

`setUp()`启动 Symfony 内核并将对它的引用存储在类属性中（连同对 DIC 和实体管理器的引用）。还调用`generateSchema()`生成数据库模式（它使用 Doctrine 中的模式工具）。

默认情况下，它为实体管理器已知的所有实体生成数据库结构。`getMetadatas()`您可以通过覆盖该方法在测试类中更改此行为。

PS：我尝试使用内存数据库（sqlite），但并不完美。无论如何，对您在生产中使用的数据库运行测试可能会更好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-05T08:23:00.390

数据库测试总是很慢，因为您需要在每次测试之前/之后创建/删除架构。为避免不必要的操作，您可以：

*   在“setUpBeforeClass”方法中创建模式；
*   确保您的 4 个测试使用“@depend”注释在一个线程中启动；
*   在“tearDownAfterClass”方法中删除模式。

模式只会为您的测试用例创建/删除一次。

您还可以设置学说以使用 inmemory sqlite 数据库（非常快）：

```
doctrine:
    dbal:
        driver: pdo_sqlite
        path: :memory:
        memory: true 
```

无论如何，'_ *construct'和'* _destruct'不应该在phpunit测试用例中使用，而应该使用'setUp'和'tearDown'。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-07T09:21:07.427

这个问题已经很老了，但今天仍然有效，所以这是我的经验以及我今天在 Symfony 项目中如何处理它。

我开始使用 SQLite 内存数据库进行测试，并在每个测试用例之前重建 db 模式 + 插入的固定装置。这有两个主要缺点：

*   还是太慢了:(
*   在开发和产品上，我使用了 Mysql，这很快就成了一个问题，因为 SQLite 根本没有所需的所有功能，有时表现不同

使用 MSQL 进行测试并在每次测试之前重建模式 + 插入固定装置太慢了。所以我一直在寻找替代品...

我偶然发现了这篇博文： http: [//alexandre-salome.fr/blog/Symfony2-Isolation-Of-Tests](http://alexandre-salome.fr/blog/Symfony2-Isolation-Of-Tests)

这里的人建议在活动数据库事务中运行测试，并在每次测试后简单地回滚任何更改。

我接受了这个想法并为它创建了一个包：[https ://github.com/dmaicher/doctrine-test-bundle](https://github.com/dmaicher/doctrine-test-bundle)

捆绑包的设置非常简单，不需要更改任何现有的 php 测试类。在内部，它更改了学说配置以使用自定义数据库连接 + 驱动程序。

使用这个包，您可以在运行整个测试套件之前简单地创建数据库模式 + 插入固定装置（我更喜欢在自定义 phpunit 引导文件中执行此操作）。使用 phpunit 侦听器，所有测试都将在数据库事务中运行。

我已经使用这个包已经有一段时间了，对我来说，使用 SQLite、MySQL 或 PostgreSQL 可以完美地工作。

一段时间以来，它也用于 symfony-demo 项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-11T08:02:17.313

在本地机器上测试是痛苦的......，所以我开始使用 ci 系统 buddy.works（有免费的独立版本），为此我需要自己解决这个问题。

结果是：

*   所有测试都有效
*   测试正在生产 sql 数据上运行
*   测试是分开运行的（不是在开发或生产中）——所以我可以用数据库做任何我想做的事情
*   所有对 git 的推送都经过测试，如果有问题我会收到通知
*   所有部署分支的推/拉请求都会自动上传到生产环境

这是我的解决方案：

1.  config 中的第二个 parameters.yml 与测试配置
2.  在生产中，我每天都在制作 sqldump
3.  在 ci 上开始测试时，此 sql 备份通过 scp 复制到测试机器
4.  准备所有这些我正在使用 robo.li（我的配置如下）

```
/**
* This is project's console commands configuration for Robo task runner.
*
* @see http://robo.li/
*/
class RoboFile extends \Robo\Tasks
{

function  loadDb(){
    $this->taskExecStack()
        ->stopOnFail()
        ->exec(" mysql -h mariadb -u root -pqwerty -e 'create database test' ")
        ->exec(" mysql -h mariadb -u root -pqwerty test < test.sql ")
        ->run();
}

function prepareDb(){
    $this->taskExecStack()
        ->stopOnFail()
        ->exec("cp  app/config/parameters-test.yml app/config/parameters.yml")
        ->run();

    $this->taskReplaceInFile('app/config/parameters.yml')
        ->from('database_host:     127.0.0.1')
        ->to("database_host:     'mariadb'")
        ->run();

    $this->taskReplaceInFile('app/config/parameters.yml')
        ->from('database_user:     dbuser')
        ->to("database_user:     'root'")
        ->run();

    $this->taskReplaceInFile('app/config/parameters.yml')
        ->from('database_password: 123')
        ->to("database_password: 'qwerty'")
        ->run();

} 
```

}

我希望它可以帮助您创建如何组织所有这些的想法。使用独立 ci 很难设置，但这确实是个好主意

# javascript - 使用 javascript 定期更新已发表评论的时间

> ID：10457251
> 
> 赞同：0
> 
> 时间：2012-05-04T23:13:01.227
> 
> 标签：javascript, jquery, formatting, setinterval

我想定期更新我网站上发布的评论的时间。我感兴趣的格式是 Facebook 和其他人所做的，其中列出了与当前时间相关的帖子时间。例如，帖子在第一次提交时应该说“刚刚……”，但在 1 分钟后它应该说“1 分钟前”，然后是“2 分钟前”等等。

我找到了这个很好的脚本来做到这一点：http: [//forrst.com/posts/Facebook_style_live_dates_in_JavaScript-hro](http://forrst.com/posts/Facebook_style_live_dates_in_JavaScript-hro) 并且已经让自己可能已经完成了一半。

到目前为止，我的代码有两个问题：

1.  报告的时间被搞砸了。
2.  即使`setinterval()`工作正常，时间也不会每秒更新一次。

这是我将其全部放在 jsfiddle 中的代码片段：http: [//jsfiddle.net/Y8Q7p/16/](http://jsfiddle.net/Y8Q7p/16/)。我认为问题在于`var time`.

```
$(document.body).on('click', 'button', function(){
var id= $(this).data('id'),
comment=$('textarea[data-id="'+id+'"]').val(),
start_timer = setInterval(function() { 
    var time =  new Date();
    time = time_since(time);

    $('div[data-id="'+id+'"]').html(time);

    }, 
    1000);
    $('#'+id).html(comment); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:17:51.190

我已经测试过了，[这很有效](http://jsfiddle.net/Y8Q7p/23)：

```
$(document.body).on('click', 'button', function(){
    var id= $(this).data('id'),
    comment=$('textarea[data-id="'+id+'"]').val();
    var time =  new Date();
    start_timer = setInterval(function() {

        //var time =  new Date();
        var time2 = time_since(time.getTime()/1000);

        $('div[data-id="'+id+'"]').html(time2);

        },
        1000);
        $('#'+id).html(comment);
});

/**
 * date_suffix()
 * returns the date suffix (st,nd,rd,th) for a given day in a month
 *
 * @author: Andy Thomas (forrst@antom.co.uk)
 * @date: 27/09/2010
 */

function date_suffix(date) {
        if (date == 1 ||  date == 21 || date == 31) {
                return 'st';
        } else if (date == 2 || date == 22) {
                return 'nd';
        } else if (date == 3 || date == 23) {
                return 'rd';
        } else {
                return 'th';
        }
}

/**
 * time_since()
 * returns the time passed since a given unix_timestamp.
 * eg. 10 seconds ago, 1 hour ago, 10th Sep etc
 *
 * @author: Andy Thomas (forrst@antom.co.uk)
 * @date: 27/09/2010
 */
function time_since(original) {
        original = new Date(original * 1000);

        var str = '';

        var months = [
                'Jan',
                'Feb',
                'Mar',
                'Apr',
                'May',
                'Jun',
                'Jul',
                'Aug',
                'Sep',
                'Oct',
                'Nov',
                'Dec'
        ];

        var chunks = [
                [31536000000, 'year'],
                [2592000000, 'month'],
                [604800000, 'week'],
                [86400000, 'day'],
                [3600000, 'hour'],
                [60000, 'minute'],
                [1000, 'second'],
        ];

        var today = new Date();
        var since = new Date(today.getTime() - original.getTime());

        if (since.getTime() > 604800000) {
                str = months[original.getMonth()] + ' ' + original.getDate() + date_suffix(original.getDate());

                if (since.getTime() > 31536000000) {
                        str = str + ', ' + original.getFullYear();
                }

                return str;
        }

        var ms = 0;
        var name = 0;
        var i = 0;
        var ic = chunks.length;
        var count = 0;

        for (i=0;i<ic;i++) {
                ms = chunks[i][0];
                name = chunks[i][1];

                count = Math.floor(since.getTime() / ms);

                if (count != 0) {
                        break;
                }
        }

        return count + ' ' + name + ((count == 1) ? '' : 's') + ' ago';
} 
```

# c++ - 如何在没有 Windows 分配驱动器号的情况下创建分区？

> ID：10457254
> 
> 赞同：8
> 
> 时间：2012-05-04T23:13:20.367
> 
> 标签：c++, winapi, windows-7

我正在尝试通过 Windows API 对附加的虚拟硬盘进行初始化和分区。我已经成功使用[DeviceIoControl()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363216%28v=vs.85%29.aspx)来做到这一点，但是每当我应用所需的驱动器布局时，Windows 都会自动为分区分配一个驱动器号并弹出一个烦人的“你想格式化吗？” 对话。

我的意图是稍后在程序中处理此分区的格式化和挂载，但我不确定如何停止这种行为。我尝试设置`RecognizedPartition`为 FALSE，但这似乎没有效果。

相关代码：

```
Layout.PartitionStyle = PARTITION_STYLE_MBR;
Layout.PartitionCount = 4;
Layout.Mbr.Signature = MY_DISK_MBR_SIGNATURE;
Layout.PartitionEntry[0].PartitionStyle = PARTITION_STYLE_MBR;
Layout.PartitionEntry[0].PartitionNumber = 1;
Layout.PartitionEntry[0].StartingOffset.QuadPart = MY_DISK_OFFSET;
Layout.PartitionEntry[0].PartitionLength.QuadPart =
   (Geom.DiskSize.QuadPart - MY_DISK_OFFSET);
Layout.PartitionEntry[0].Mbr.PartitionType = PARTITION_IFS;
Layout.PartitionEntry[0].Mbr.BootIndicator = FALSE;
Layout.PartitionEntry[0].Mbr.RecognizedPartition = FALSE;
Layout.PartitionEntry[0].Mbr.HiddenSectors =
   (MY_DISK_OFFSET / Geom.Geometry.BytesPerSector);

for (int i = 0; i < 4; i++)
{
    Layout.PartitionEntry[i].RewritePartition = TRUE;
}

if (!DeviceIoControl(hDisk, IOCTL_DISK_SET_DRIVE_LAYOUT_EX,
                     Layout, dwLayoutSz, NULL, 0, &dwReturn, NULL))
{
    // Handle error
}
DeviceIoControl(hDisk, IOCTL_DISK_UPDATE_PROPERTIES,
                NULL, 0, NULL, 0, &dwReturn, NULL); 
```

我可以做些什么来防止自动分配驱动器号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:42:50.663

我能找到解决此问题的唯一可靠方法是在创建和格式化卷时停止“Shell Hardware Detection”服务。但是，这种方法非常愚蠢，以至于我拒绝将其放入代码中。

另一个“hackish”选项是让服务启动，然后通过`CreateProcess()`带有`CREATE_NO_WINDOW`标志的隐藏窗口立即生成自身（或“worker”可执行文件）。

由于该软件作为系统服务运行，并且我不希望在系统生命周期内只发生一次或两次的事情的代码复杂化，我不得不接受有时会偶尔出现*交互式服务检测*窗口在创建分区时弹出片刻。

如果有人在以编程方式创建和格式化驱动器时发现了一种防止格式提示的好方法，我会很乐意更改接受的答案（并且欠你一杯啤酒）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:37:48.607

自从我使用这个 API 已经有一段时间了，但从记忆中你不能。但这并不能阻止您事后[删除驱动器号分配。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364014%28v=vs.85%29.aspx)

我不确定它是否会停止格式提示，但在我执行此操作的所有时间，分区在我进行磁盘布局更新之前已经被正确格式化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T00:48:18.943

我刚刚解决了这个问题，等待几秒钟让驱动器可用，然后直接发出格式化操作。[在这里](https://stackoverflow.com/questions/23257643/after-partition-was-created-using-ioctl-disk-set-drive-layout-how-do-i-create-n)查看我的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-13T11:32:54.050

[Rufus](https://rufus.akeo.ie/)有一个有趣的解决方法：它安装了一个窗口事件挂钩来检测“你想格式化这个驱动器吗？” 提示并立即关闭它们。[在此处查看源代码](https://github.com/pbatard/rufus/blob/c5f4e5a2eed072ae569faf44ab5ee1c475abd4b4/src/stdlg.c#L1911-L1991)。

然后它继续安排只安装它关心的分区，但这是正交的。

# java - 为什么我会得到类、枚举、接口？

> ID：10457255
> 
> 赞同：1
> 
> 时间：2012-05-04T23:13:21.927
> 
> 标签：java, parsing, interface, hashmap, delimiter

```
/**
 * @(#)b.java
 *
 *
 * @author
 * @version 1.00 2012/5/4
 */
import java.util.*;
import java.io.*;
import java.*;

public class b {

static void lireBddParcs(String nomFichier) throws IOException
{
    LinkedHashMap parcMap = new LinkedHashMap<Parc,Collection<Manege>> ();

    boolean existeFichier = true;

    FileReader fr = null;

    try
    {
        fr = new FileReader (nomFichier);
    }

    catch(java.io.FileNotFoundException erreur)
    {
        System.out.println("Probleme rencontree a l'ouverture du fichier" + nomFichier);
        existeFichier = false;
    }

    if (existeFichier)
    {
        Scanner scan = new Scanner(new File(nomFichier));

                   while (scan.hasNextLine())
                   {

                       String[] line = scan.nextLine().split("\t");
                       Parc p = new Parc(line[0], line[1], line[2]);
                       parcMap.put(p, null);

                   }

              }
                  scan.close();
    }

}

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args)  throws IOException
    {
      lireBddParcs("parcs.txt");

    }
} 
```

parc.txt 包含：

```
Great America   Chicago Illinois
Magic mountain  Los Ageles  Californie
Six Flags over Georgia  Atlanta Georgie
Darien Lake Buffalo New York
La Ronde    Montreal    Quebec
The Great Escape    Lake Georges    New York
Six Flags New Orleans   New Orleans Louisiane
Elitch Gardens  Denver  Colorado
Six Flags over Texas    Arlington   Texas
Six Flags New England   Springfield Massachusetts
Six Flags America   Washington  D.C.
Great Adventure Jackson New Jersey

error: class, interface, or enum expected line 94
error: class, interface, or enum expected line 99 
```

我决定更改我的代码，因为有些事情没有按预期进行，但现在我明白了。无法通过编译。知道为什么它不起作用吗？我是一个完全的菜鸟，即将放弃我的 Java 课程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:16:59.840

尽管缩进令人困惑，但主要方法在类之外，而它应该在类中。

它也使该行`scan.close();`无效，因为`scan`没有在那里定义。删除`}`之前的`scan.close();`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T23:16:21.990

只是因为这里的第一个方法中有一个多余的右括号：

```
}
                  scan.close(); 
```

如果您使用 Eclipse 或 netbeans 之类的 IDE 来编辑源文件，那么自动大括号匹配和突出显示这些类型的错误将有很大帮助。

# linux - 更改 Eclipse 中的所有字体大小

> ID：10457260
> 
> 赞同：4
> 
> 时间：2012-05-04T23:13:58.480
> 
> 标签：linux, eclipse, ide

有没有办法在 Eclipse 中一次更改所有字体？

我有一个非常大的显示器，所以我的系统字体很小（40 英寸屏幕，4 pt 大小看起来像 19 英寸屏幕上的 16 号）。

问题是在我的 Linux 机器上，Eclipse 的字体都很大。我更改了关键字体（控制台字体、系统对话框字体），但有时我有一个对话框或打开某种类型的文件并且字体很大。

有没有办法在 Eclipse 中将所有字体设置为特定大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T04:06:33.177

这里有一篇关于为 Java 编辑器做这件事的帖子：[如何在 Eclipse 中为 Java 文本编辑器更改字体大小？](https://stackoverflow.com/questions/4922305/how-can-i-change-font-size-in-eclipse-for-java-text-editors)

Window -> Preferences -> General -> Appearance -> Colors and Fonts -> Text Font 似乎适用于我打开/写入的所有文件（我在 Fedora 上使用 Indigo）。

# javascript - 如何在 JavaScript 中找到匹配布尔条件的数组的第一个元素？

> ID：10457264
> 
> 赞同：322
> 
> 时间：2012-05-04T23:14:21.040
> 
> 标签：javascript, arrays

我想知道是否有一种已知的、内置/优雅的方法来查找与给定条件匹配的 JS 数组的第一个元素。AC# 等效项是[List.Find](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)。

到目前为止，我一直在使用这样的两个功能组合：

```
// Returns the first element of an array that satisfies given predicate
Array.prototype.findFirst = function (predicateCallback) {
    if (typeof predicateCallback !== 'function') {
        return undefined;
    }

    for (var i = 0; i < arr.length; i++) {
        if (i in this && predicateCallback(this[i])) return this[i];
    }

    return undefined;
};

// Check if element is not undefined && not null
isNotNullNorUndefined = function (o) {
    return (typeof (o) !== 'undefined' && o !== null);
}; 
```

然后我可以使用：

```
var result = someArray.findFirst(isNotNullNorUndefined); 
```

但是由于[ECMAScript 中有这么多函数式数组方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array#Methods)，也许已经有这样的东西了？我想很多人必须一直实现这样的东西......

* * *

## 回答 #1

> 赞同：372
> 
> 时间：2013-08-29T20:20:27.887

由于 ES6 有数组的原生[`find`方法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)；一旦找到第一个匹配项并返回值，这将停止枚举数组。

```
const result = someArray.find(isNotNullNorUndefined); 
```

* * *

老答案：

我必须发布一个答案来阻止这些`filter`建议:-)

> 由于 ECMAScript 中有这么多函数式数组方法，也许已经有这样的东西了？

您可以使用[`some`Array 方法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)迭代数组，直到满足条件（然后停止）。不幸的是，它只会返回条件是否满足一次，而不是由哪个元素（或在哪个索引处）满足。所以我们必须稍微修改一下：

```
function find(arr, test, ctx) {
    var result = null;
    arr.some(function(el, i) {
        return test.call(ctx, el, i, arr) ? ((result = el), true) : false;
    });
    return result;
} 
```

```
var result = find(someArray, isNotNullNorUndefined); 
```

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2014-02-03T23:33:11.183

从 ECMAScript 6 开始，您可以使用[`Array.prototype.find`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)它。这是在 Firefox (25.0)、Chrome (45.0)、Edge (12) 和 Safari (7.1) 中实现和运行的，但[在 Internet Explorer 或其他一些旧的或不常见的平台中](https://kangax.github.io/compat-table/es6/#test-Array.prototype_methods_Array.prototype.find)却没有。

例如，`x`下面是`106`：

```
const x = [100,101,102,103,104,105,106,107,108,109].find(function (el) {
    return el > 105;
});
console.log(x);
```

如果您想立即使用它但需要支持 IE 或其他不支持的浏览器，您可以使用 shim。我推荐[es6-shim](https://github.com/paulmillr/es6-shim)。如果出于某种原因您不想将整个 es6-shim 放入您的项目中，MDN 还提供[了一个 shim 。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find#Polyfill)为了获得最大的兼容性，您需要 es6-shim，因为与 MDN 版本不同，它会检测错误的本机实现`find`并覆盖它们（请参阅以*“Workaround bugs in Array#find and Array#findIndex”*开头的注释以及紧随其后的行） .

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2013-08-28T15:54:37.737

那么使用[过滤器](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)并从结果数组中获取第一个索引呢？

```
var result = someArray.filter(isNotNullNorUndefined)[0]; 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2018-08-19T11:46:10.543

## 概括：

*   为了找到数组中与布尔条件匹配的第一个元素，我们可以使用`ES6` `find()`
*   `find()`位于，`Array.prototype`因此它可以在每个阵列上使用。
*   `find()`接受`boolean`测试条件的回调。该函数返回**值**（不是索引！）

## 例子：

```
const array = [4, 33, 8, 56, 23];

const found = array.find(element => {
  return element > 50;
});

console.log(found);   //  56
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-09-17T04:57:48.353

现在应该很清楚，JavaScript 本身并没有提供这样的解决方案。这是最接近的两个衍生物，最有用的第一个：

1.  `Array.prototype.some(fn)`在满足条件时提供所需的停止行为，但仅返回元素是否存在；应用一些技巧并不难，例如[Bergi's answer](https://stackoverflow.com/a/18520276/1338292)提供的解决方案。

2.  `Array.prototype.filter(fn)[0]`制作一个很棒的单线，但效率最低，因为你扔掉`N - 1`元素只是为了得到你需要的东西。

JavaScript 中的传统搜索方法的特点是返回找到的元素的索引，而不是返回元素本身或 -1。这避免了必须从所有可能类型的域中选择返回值；索引只能是数字，负值无效。

上面的两种解决方案都不支持偏移搜索，所以我决定写这个：

```
(function(ns) {
  ns.search = function(array, callback, offset) {
    var size = array.length;

    offset = offset || 0;
    if (offset >= size || offset <= -size) {
      return -1;
    } else if (offset < 0) {
      offset = size - offset;
    }

    while (offset < size) {
      if (callback(array[offset], offset, array)) {
        return offset;
      }
      ++offset;
    }
    return -1;
  };
}(this));

search([1, 2, NaN, 4], Number.isNaN); // 2
search([1, 2, 3, 4], Number.isNaN); // -1
search([1, NaN, 3, NaN], Number.isNaN, 2); // 3 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-09-17T03:12:19.187

如果你正在使用`underscore.js`，你可以使用它的`find`和`indexOf`函数来得到你想要的：

```
var index = _.indexOf(your_array, _.find(your_array, function (d) {
    return d === true;
})); 
```

文档：

*   [http://underscorejs.org/#find](http://underscorejs.org/#find)
*   [http://underscorejs.org/#indexOf](http://underscorejs.org/#indexOf)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-05-02T18:48:41.037

从 ES 2015 开始，`Array.prototype.find()`提供了这个确切的功能。

对于不支持此功能的浏览器，Mozilla 开发者网络提供了一个[polyfill](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find#Polyfill)（粘贴在下面）：

```
if (!Array.prototype.find) {
  Array.prototype.find = function(predicate) {
    if (this === null) {
      throw new TypeError('Array.prototype.find called on null or undefined');
    }
    if (typeof predicate !== 'function') {
      throw new TypeError('predicate must be a function');
    }
    var list = Object(this);
    var length = list.length >>> 0;
    var thisArg = arguments[1];
    var value;

    for (var i = 0; i < length; i++) {
      value = list[i];
      if (predicate.call(thisArg, value, i, list)) {
        return value;
      }
    }
    return undefined;
  };
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-04-04T09:29:28.383

```
foundElement = myArray[myArray.findIndex(element => //condition here)]; 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-22T16:28:03.183

Array.prototype.find() 就是这样做的，更多信息：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-11-06T08:46:07.093

`findIndex`像以前写的一样使用。这是完整的示例：

```
function find(arr, predicate) {
    foundIndex = arr.findIndex(predicate);
    return foundIndex !== -1 ? arr[foundIndex] : null;
} 
```

用法如下（我们想在数组中找到第一个具有属性的元素`id === 1`）。

```
var firstElement = find(arr, e => e.id === 1); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-07T16:49:13.520

我从互联网上的多个来源获得灵感，得出以下解决方案。想要同时考虑一些默认值，并提供一种方法来比较每个条目以找到可以解决的通用方法。

用法：（赋予值“第二”）

```
var defaultItemValue = { id: -1, name: "Undefined" };
var containers: Container[] = [{ id: 1, name: "First" }, { id: 2, name: "Second" }];
GetContainer(2).name; 
```

执行：

```
class Container {
    id: number;
    name: string;
}

public GetContainer(containerId: number): Container {
  var comparator = (item: Container): boolean => {
      return item.id == containerId;
    };
    return this.Get<Container>(this.containers, comparator, this.defaultItemValue);
  }

private Get<T>(array: T[], comparator: (item: T) => boolean, defaultValue: T): T {
  var found: T = null;
  array.some(function(element, index) {
    if (comparator(element)) {
      found = element;
      return true;
    }
  });

  if (!found) {
    found = defaultValue;
  }

  return found;
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-05-04T23:22:55.177

Javascript 中没有执行此搜索的内置函数。

如果你使用 jQuery，你可以做一个`jQuery.inArray(element,array)`.

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2013-08-29T18:46:06.087

一种不太优雅的方式，将`throw`所有正确的错误消息（基于`Array.prototype.filter`）但将停止迭代第一个结果是

```
function findFirst(arr, test, context) {
    var Result = function (v, i) {this.value = v; this.index = i;};
    try {
        Array.prototype.filter.call(arr, function (v, i, a) {
            if (test(v, i, a)) throw new Result(v, i);
        }, context);
    } catch (e) {
        if (e instanceof Result) return e;
        throw e;
    }
} 
```

然后例子是

```
findFirst([-2, -1, 0, 1, 2, 3], function (e) {return e > 1 && e % 2;});
// Result {value: 3, index: 5}
findFirst([0, 1, 2, 3], 0);               // bad function param
// TypeError: number is not a function
findFirst(0, function () {return true;}); // bad arr param
// undefined
findFirst([1], function (e) {return 0;}); // no match
// undefined 
```

它`filter`通过使用结束来工作`throw`。

# php - 在 Wordpress 中使用 PHP 执行的简码嵌套在另一个简码中

> ID：10457269
> 
> 赞同：0
> 
> 时间：2012-05-04T23:15:03.390
> 
> 标签：php, wordpress, shortcode

我不知道我是否接近让它工作，但我已经工作了 3 个小时，虽然我取得了进展，但它并没有完全工作。我不是那么精通PHP，所以这是一场战斗。基本上我想要做的是：

我正在使用 Formidable Pro 从用户那里获取关于一个目标的两个数字。起始编号的 ID 为 104。表格中目标的 ID 为 107。

然后在一个单独的页面上，我使用[http://wordpress.org/extend/plugins/progress-bar/](http://wordpress.org/extend/plugins/progress-bar/)插件来衡量目标的进度。

我需要对起始编号和目标编号进行计算，并将结果输入到进度条插件中。

我什至无法在进度条中显示一个数字，所以我不知道还能做什么。

这就是我所拥有的：

```
[wppb option=red percent=inside progress="<?php echo do_shortcode('[frm-stats id=\"107\"]'); ?>"] 
```

我想如果我至少可以在进度条中显示一个数字，那么我就可以弄清楚代码的计算部分......

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T05:18:50.537

现在没有办法嵌套短代码。或许在将来。

# c# - 如何将下拉列表添加到我的 MVC3 应用程序

> ID：10457272
> 
> 赞同：-2
> 
> 时间：2012-05-04T23:15:34.283
> 
> 标签：c#, asp.net, entity-framework-4.1, ef-code-first

帮助：我想使用 code first 和 c# 向我的 MVC3 应用程序添加一个下拉列表。我有 2 表学生和大学，我需要将大学的动态列表放在学生的创建视图中。应该如何以及在何处将方法添加到我的控制器。有人帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:52:44.263

基本思想是将下拉列表作为发送到视图的类的属性传递。所以是这样的：

```
public Student
{
public List<University> Universities({//get list from database in getter 
```

然后在视图中使用类似

```
@Html.DropDownListFor(model => model.StudentsSchool, Model.Universities) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:40:55.560

首先为您的下拉列表创建实体类。它将返回一个值列表

```
public class KeyValueEntity
    {
        public string Description { get; set; }
        public string Value { get; set; }
    }

public class MyViewModel
    {
        public List<KeyValueEntity> Status { get; set; }
} 
```

在您的控制器上编写以下代码

```
[HttpGet]
        public ActionResult Dropdown()
        {  
                MyViewModel model = GetDefaultModel();  
                return View(model);
            }
        }

public MyViewModel GetDefaultModel()
        {
            var entity = new MyViewModel();            
            entity.Status = GetMyDropdownValues();            
            return entity;
        }

private List<KeyValueEntity> GetMyDropdownValues()
        {
            return new List<KeyValueEntity>
            {
                new KeyValueEntity { Description = "Yes" , Value ="1" },
                new KeyValueEntity { Description = "No" , Value ="0"}
            };
        } 
```

您的 cshtml 页面的代码：现在您需要在定义模型类的视图之上将视图与模型绑定

```
@model MyViewModel
Following is the code for dropdown binding

 @Html.LabelForModel("Status:")
            @Html.DropDownListFor(m => m.Status, new SelectList(Model.Status, "Value", "Description"), "-- Please Select --") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T02:08:41.727

我猜你正在投票，因为你可以用谷歌搜索这个并且很容易找到答案。无论如何，这里有一个链接可以帮助您入门。

[http://www.mikesdotnetting.com/Article/128/Get-The-Drop-On-ASP.NET-MVC-DropDownLists](http://www.mikesdotnetting.com/Article/128/Get-The-Drop-On-ASP.NET-MVC-DropDownLists)

# javascript - 如何制作一个创建其他弹出窗口的弹出窗口？

> ID：10457273
> 
> 赞同：1
> 
> 时间：2012-05-04T23:15:42.313
> 
> 标签：javascript, popup

我正在开发一款替代现实游戏，我的任务是创建一个关卡，玩家必须在一定时间内专注于回答数学问题，同时关闭弹出窗口。目标是让弹出窗口产生自己的弹出窗口，这样如果用户长时间忽略它们，事情就会很快失控。并且为了确保人们不会打开弹出窗口阻止程序，数学问题也会出现在弹出窗口中。不幸的是，我不懂 Javascript，所以我一直依赖从网上复制代码。

我的计划是有一个基本页面，它每 5 秒弹出一个名为 focus.html 的页面（左右，仍在决定时间）。focus.html 会让它们每隔五秒弹出另一个 focus.html。因此，如果您将其中一个打开五秒钟，您将有两个关闭，依此类推。理论上。

但出于某种原因，弹出窗口不会创建自己的弹出窗口。如果我打开基本页面，focus.html 只有在基本页面调用时才会弹出。如果我手动打开 focus.html，弹出窗口也只会出现在主浏览器中的 focus.html 副本中。

focus.html 的代码：

```
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!--    <link rel="stylesheet" href="game.css" type="text/css" media="screen" /> -->

    <title>Focus</title>

    <SCRIPT LANGUAGE="JavaScript">

        <!-- Begin
        closetime = 0; // Close window after __ number of seconds?
        // 0 = do not close, anything else = number of seconds

        function Start1(URL1, WIDTH, HEIGHT) {
            windowprops = "left=50,top=50,width=" + WIDTH + ",height=" + HEIGHT;
            preview = window.open(URL1, "preview", windowprops);
            if (closetime) {
                setTimeout("preview.close();", closetime*1000);
            }
        }

        function doPopup1() {
            url1 = "focus.html";
            width = 500;  // width of window in pixels
            height = 500; // height of window in pixels
            delay = 5;    // time in seconds before popup opens
            timer = setTimeout("Start1(url1, width, height)", delay*1000);
        }   

        function doPopup2() {
            url1 = "focus.html";
            width = 500;  // width of window in pixels
            height = 500; // height of window in pixels
            delay = 10;    // time in seconds before popup opens
            timer = setTimeout("Start1(url1, width, height)", delay*1000);
        }   

                    function doPopup3() {
            url1 = "focus.html";
            width = 500;  // width of window in pixels
            height = 500; // height of window in pixels
            delay = 15;    // time in seconds before popup opens
            timer = setTimeout("Start1(url1, width, height)", delay*1000);
        }   

        //  End -->
    </script>

</head>

<body OnLoad="doPopup1(); doPopup2(); doPopup3();">

    <br />

    <p>Remember to FOCUS.</p>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:32:23.213

```
preview = window.open(URL1, "preview", windowprops); 
```

打开第二个窗口时，它将与第一个窗口同名，因此您永远无法打开多个窗口。如果您不传递名称（空字符串），您将能够打开许多。

# objective-c - 意外的 TableViewCell 突出显示延迟

> ID：10457280
> 
> 赞同：1
> 
> 时间：2012-05-04T23:16:22.207
> 
> 标签：objective-c, ios, uitableview

我正在尝试创建模仿按钮的 TableViewCells。这意味着在触摸时，应该有一个高亮效果，并且在触摸时应该触发标准选择状态。这按预期工作，但问题是在触地和突出显示状态出现之间存在瞬间延迟。为什么是这样？我怎样才能让亮点在触地时立即出现而不会延迟？

这是我在 TableView 委托上使用的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [[tableView cellForRowAtIndexPath:indexPath] setSelected:YES animated:NO];
    // do something here
    [[tableView cellForRowAtIndexPath:indexPath] setSelected:NO animated:NO];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:51:37.057

我想我真的不明白你问的问题。`UITableViewCell`在突出显示的意义上按下时已经“像一个按钮”。从您的代码的外观来看，它确实没有做任何 tableView 本身不做的事情。

基本上，您看到延迟的原因是因为单元格已经在触摸时突出显示，而您正在做的是将**Selected**设置为 YES，然后是 NO，但单元格已经这样做了，所以它有点做同样的事情两次，一次它自己，然后一旦被迫 - 这就是你看到的延迟的原因。

唯一应该输入的`didSelectRowAtIndexPath:`是您希望在按下按钮时发生的操作，而不是您希望单元格执行的操作或它在被触摸时的行为方式。还有其他委托方法可以处理这些行为。

如果您想更改单元格的突出显示颜色，请[在此处查看我的问题/答案](https://stackoverflow.com/questions/10219560/clear-answer-on-how-to-mask-a-uiview-as-a-uitableviewcell-selectedbackgroundview)。

## 更新

默认情况下，Apple 提供的 UITableView 代码不包含取消选择方法。因此，当您选择单元格时，它会保持选中状态。要**取消选择**单元格，请将以下方法添加到`didSelectRowAtIndexPath:`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    /* The following will deselect the cell on touchUp */
    [tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:YES];
} 
```

# ruby-on-rails-3 - “大”图像文件未在生产中使用回形针保存

> ID：10457282
> 
> 赞同：0
> 
> 时间：2012-05-04T23:16:33.707
> 
> 标签：ruby-on-rails-3, apache, paperclip, passenger

在我的桌面运行开发和生产模式下，上传和调整任何大小的图像都可以完美运行。在我运行 apache/passenger 设置的服务器上，任何超过 1 MB 的图像文件都会返回两个错误之一

```
Command :: identify -format %wx%h '/tmp/243.jpg20120504-2852-ryheox[0]'
Command :: convert '/tmp/243.jpg20120504-2852-ryheox[0]' -resize "400x400" '/tmp/24320120504-2852-l69yg'
[paperclip] An error was received while processing: #<Paperclip::Error: There was an error processing the thumbnail for 243>
Command :: identify -format %wx%h '/tmp/243.jpg20120504-2852-ryheox[0]'
Command :: convert '/tmp/243.jpg20120504-2852-ryheox[0]' -resize "200x200" '/tmp/24320120504-2852-g957f'
[paperclip] An error was received while processing: #<Paperclip::Error: There was an error processing the thumbnail for 243> 
```

或者

```
Command :: identify -format %wx%h '/tmp/046.jpg20120504-946-1w1106[0]'
[paperclip] An error was received while processing: #<Paperclip::Errors::NotIdentifiedByImageMagickError: /tmp/046.jpg20120504-946-1w1106 is not recognized by the 'identify' command.>
Command :: identify -format %wx%h '/tmp/046.jpg20120504-946-1w1106[0]'
[paperclip] An error was received while processing: #<Paperclip::Errors::NotIdentifiedByImageMagickError: /tmp/046.jpg20120504-946-1w1106 is not recognized by the 'identify' command.> 
```

较小的文件没有问题。

我有大约 3 GB 的可用磁盘空间，在尝试上传文件时，我的可用内存永远不会低于 60MB，并且有 300MB 的交换空间。

我缺少一些特殊的设置吗？环境生产文件是创建 rails 应用程序时生成的任何文件。

编辑：

我可以上传超过 50MB 的视频文件并存储它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:15:58.003

将 nginx.conf 中的 client_max_body_size 更改为您想要的任何大小

编辑：尝试添加

```
LimitRequestBody 15000000 
```

到你的 apache conf 文件

# ios - 设置/启动/调整 C4Sample 的循环片段

> ID：10457284
> 
> 赞同：5
> 
> 时间：2012-05-04T23:16:48.123
> 
> 标签：ios, c4

我希望能够使用 c4 循环样本的某些部分。我还想在循环之间跳过而不等待当前循环结束。因此，例如，如果我有最后一个小节循环并且我已经完成了一半并且我想跳到第一个小节，它会这样做而无需等待最后一个小节结束。

我正在使用“currentTime”和“touchesBegan”来尝试设置它，但我无法让它像我想要的那样工作。我正在阅读有关堆栈溢出的信息，看起来我应该使用 NSTimer？或某种回调或什么？我怎样才能做到这一点？

这是我所拥有的：

```
@implementation C4WorkSpace {
        C4Sample *audioSample;
    }

    -(void)setup {
        audioSample = [C4Sample sampleNamed:@"C4Loop.aif"];
        [audioSample play];
    }

    -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
        audioSample.currentTime = 1.0f;
       //NSTimer? wait some time and then ?
       //callback? I don't know how to do that, but is that what I would do here?
    }
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:02:51.833

C4Sample 类现在没有任何循环能力。如果你想这样做，你必须自己构建循环机制。在我关于使用 NSTimer 的第一个问题的顶部会非常简单。

你可以：

1.  设置循环开始时间
2.  设置循环持续时间
3.  触发循环开始播放并启动计时器

...然后计时器触发一个方法，该方法的设置`audioSample.currentTime = loopStartTimer;`类似于您在方法中执行此操作的`touchesBegan:`方式。

# ios - CGContextShowTextAtPoint 和欧元符号

> ID：10457285
> 
> 赞同：1
> 
> 时间：2012-05-04T23:16:52.643
> 
> 标签：ios, encoding, pdf-generation

我正在使用以下内容在 iOS 中的 PDF 上绘制文本：

```
CGContextSelectFont (pdfContext, "Helvetica Bold", 14, kCGEncodingMacRoman);
NSString *str1 = [NSString stringWithString:@"€ 10"];  
CGContextShowTextAtPoint(pdfContext, 25, y-60 , [str1 cStringUsingEncoding:NSMacOSRomanStringEncoding], [str1 length]); 
```

欧元符号显示为正方形。

你有什么建议吗？

附言。我也尝试过 [str1 UTF8String]，结果相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:23:36.143

`- (CGSize)drawAtPoint:(CGPoint)point withFont:(UIFont *)font`在大多数情况下，使用 NSString 方法或使用`- (CGSize)drawInRect:(CGRect)rect withFont:(UIFont *)font`CoreGraphic方法更容易。Apple 会为您考虑正确的转换、编码等问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:48:12.050

我不知道它是否有任何作用，但是您是否尝试过使用`kCGEncodingFontSpecific`您的第四个参数`CGContextSelectFont`？如果不这样做，您可能必须使用[Core Text](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005533-CH1-SW1)。我从未使用过 Core Text，但它的文本生成似乎比普通的 Quartz 2D 更强大。

根据@jonathan-cichon 的建议，我还从`UIView`我刚刚放置的 s 生成了 PDF（他提出了 NSString`drawAtPoint`等，我实际上使用了普通的旧`UILabel`s！），然后将其渲染到我的 pdfContext，但这也有明显的缺点. 如果您已经走上了 PDF 上下文的道路，如果 kCGEncodingFontSpecific 不这样做，我建议您追求 Core Text。有关该主题的其他想法，请参阅此[SO 讨论](https://stackoverflow.com/questions/7505143/how-to-output-a-euro-symbol-in-a-pdf)。

最后，我发现 PDF 生成有点有限（但另一方面，iOS 可以创建 PDF 真是太神奇了）。就我而言，我对 PDF 中缺少字体嵌入感到沮丧，因此我最终创建了由不太常见的字体呈现的文本图像（因为我得到了您在问题中引用的方形块）。

# javascript - 在 IE8 下，Page_Init 没有被调用

> ID：10457291
> 
> 赞同：0
> 
> 时间：2012-05-04T23:17:39.230
> 
> 标签：javascript, asp.net, internet-explorer, asp.net-ajax

我们有一个站点，我们在其中 Response.Redirect 到一个页面（购物车页面），并且由于某种原因，在使用 IE8 时没有为该页面调用 Page_Init 和 Page_Load 函数。即使我将光标放在 URL 栏中并按 Enter，它们仍然没有被调用。当我按 F5 时，它被调用。当我使用另一个浏览器（包括 IE8 模式下的 IE9）时，它们会被调用。我运行 Fiddler2 来检查流量，当我单击 URL 栏并按 Enter 键时没有出现流量，即使您看到世界图标旋转并且它似乎正在做 1/2 秒的事情。

什么可能导致这种行为？似乎它必须是 Javascript 和/或拦截 Page_Load 的更新面板。

细节：该网站是 AbleCommerce，页面是购物车页面。我们已经定制了产品选择流程。

我能够在我们的站点测试实例上复制问题，因此我将断点添加到加载购物车的自定义控件的 Page_Init 和 Page_Load 函数中。在 IE8 下，我可以将光标放在 IE8 的 url 栏并按回车，断点永远不会被击中。任何其他浏览器，他们都会受到打击。在 IE8 浏览器模式下运行 IE9，他们会受到打击。但是在 IE8 中，它们只有在我刷新 (F5) 时才会受到影响。

我认为这必须是 Javascript 或更新面板问题。Firefox 错误控制台或 IE8 中没有显示 Javascript 错误。

关于可能导致这种情况的任何想法？或者我该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:45:21.203

尝试使用额外的参数调用您的页面，例如`&_=xyz`where`xyz`总是新鲜的（例如当前时间 tostring）。如果使用额外参数刷新页面，则您会遇到浏览器缓存过于激进的缓存问题。

为什么会这样——很难说。这可能是一个 jquery 问题，您在启用完全缓存的情况下调用 url，然后浏览器在内部获取缓存设置并且从不回调您的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-23T01:14:41.227

当前接受的答案是调试此问题的好方法。但是解决这个问题的一个更好的方法是，你应该在响应中设置 HTTP 标头，告诉浏览器它不应该缓存它。

查看此 Stack Overflow 问题的已接受答案，了解如何在最流行的语言中设置缓存标头： [确保在所有浏览器中不缓存网页](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:35:31.130

我遇到了完全相同的问题...这是因为 IE 中的大量缓存选项。因此，我没有使用随机变量，而是将所有响应缓存设置为 false，每次回发，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
        Response.Cache.SetNoStore();
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        Response.Cache.SetExpires(DateTime.Now);
        Response.Cache.SetLastModified(DateTime.Now);
        Response.Cache.SetAllowResponseInBrowserHistory(false);
        ....
} 
```

来源：[在 Firefox 中调用 Page_Load，但不是 IE](https://stackoverflow.com/questions/444468/page-load-called-in-firefox-but-not-ie)

# java - 将照片发布到页面时出现意外错误

> ID：10457292
> 
> 赞同：3
> 
> 时间：2012-05-04T23:17:42.350
> 
> 标签：java, facebook, facebook-graph-api, restfb

我正在尝试使用以下内容将照片发布到页面：

```
FacebookClient client = new DefaultFacebookClient(destinationAccessToken);
BinaryAttachment attachment = BinaryAttachment.with(imageName, imageInputStream);
Photo photoResponse = client.publish("/me/photos", Photo.class, attachment); 
```

我收到以下回复：

```
{
    "error": {
        "message":"An unexpected error has occurred. Please retry your request later.",
        "type":"OAuthException",
        "code":2
    }
} 
```

当我使用相同的代码发布到用户墙时，它工作正常。

我也尝试过发布`"/{page id}/photos"`相同的结果。

目标访问令牌具有`manage_pages`、`photo_upload`、`publish_actions`和 等`publish_stream`权限。

我在这里做错了什么？

**更新：**

如果我使用它发布到预定的专辑，`"/{album id}/photos"`那么它就可以工作。引用[此 Facebook 开发人员博客文章](https://developers.facebook.com/blog/post/498/)：

> `https://graph.facebook.com/USER_ID/photos`- 照片将发布到为您的应用创建的相册中。如果您的应用尚不存在，我们会自动为您的应用创建相册。以这种方式上传的所有照片都将添加到同一个相册中。

那么页面的这种行为是否被破坏？或者我在这里误解了什么？

**更新 2：**

我发现了一个关于这个问题的[错误报告](http://developers.facebook.com/bugs/355536551171535)，所以我把它作为答案发布。

**更新 3：**

该错误似乎已解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:59:52.693

我找到了与此行为对应的 Facebook 错误报告：

[http://developers.facebook.com/bugs/355536551171535](http://developers.facebook.com/bugs/355536551171535)

所以看起来我没有做错任何事。我想临时的解决方法是检查预定的专辑并在必要时创建它，然后发布到它。（请注意，`user_photos`此解决方法不需要权限，因为页面上的相册/照片始终是公开的）。

# windows - 来自用户空间的 int 指令

> ID：10457296
> 
> 赞同：1
> 
> 时间：2012-05-04T23:18:08.240
> 
> 标签：windows, assembly, x86, kernel

我的印象是 x86 上的“int”指令没有特权。所以，我认为我们应该能够从用户空间应用程序执行这条指令。但似乎并非如此。

我正在尝试从 Windows 上的用户应用程序执行 int 。我知道这样做可能不对。但我想找点乐子。但是 Windows 正在杀死我的应用程序。

我认为问题是由于条件 cpl <=iopl。有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:26:04.307

通常，用于用户模式代码转换到内核模式以调用内核服务的旧调度程序机制是由`int 2Eh`（现在替换为`sysenter`）实现的。直到`int 3`今天仍然保留断点。

基本上，内核为某些中断设置陷阱（不记得是否全部），并且根据陷阱代码，它们将为用户模式调用程序执行一些服务，或者如果这不可能，您的应用程序将被杀死，因为它尝试特权操作。

无论如何，细节将取决于您尝试调用的确切中断。例如，函数`DbgBreakPoint`( `ntdll.dll`) 和`DebugBreak`( ) 除了调用（或实际上是特定的操作码）`kernel32.dll`之外什么都不做。`int 3``int3`

**编辑 1：**在较新的 Windows 版本（XP SP2 和更新的 IIRC）上，正如我在回答中所写的那样`sysenter`替换。`int 2Eh`它被终止的一个可能原因——尽管你应该能够通过异常处理来捕捉它——是因为你没有传递它期望在堆栈上的参数。基本上，本机 API 的用户模式部分将您调用的系统服务的参数放入堆栈，然后将服务编号（系统服务调度程序表的索引 - SSDT，有时是 SDT）放入特定寄存器，然后调用在较新的系统`sysenter`和较旧的系统上`int 2Eh`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:43:08.240

给定中断向量的最小环级别（它决定给定的“int”是否具有特权）基于与中断描述符表中的向量关联的环级别描述符。

在 Windows 中，大多数中断都是特权指令。这可以防止用户模式仅仅调用双重故障处理程序来立即对操作系统进行错误检查。

Windows 中有一些非特权中断。具体来说：

*   int 1（如果在 eflags 中设置了 EFLAGS_TF，则 CD 01 编码和调试中断都发生在单条指令之后）
*   int 3（编码 CC 和 CD 03）
*   int 2E（Windows 系统调用）

所有其他中断都是特权的，调用它们会导致发出“无效指令”中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T16:53:22.800

INT 是“特权控制”指令。内核必须以这种方式保护自己免受用户模式的影响。INT 经历与硬件中断和处理器异常经历完全相同的陷阱向量，因此如果用户模式可以任意触发这些异常，中断调度代码就会混淆。

如果要在 Windows 尚未设置的特定向量上触发中断，则必须使用调试器或内核驱动程序修改该中断向量的 IDT 条目。Patchguard 不允许您从 x64 版本的 Windows 上的驱动程序执行此操作。

# mysql - 多个平均值的平均值

> ID：10457297
> 
> 赞同：0
> 
> 时间：2012-05-04T23:18:29.667
> 
> 标签：mysql, sql

我正在运行一个 sql 查询，其中有一些平均值，现在我想要这些平均值的平均值，所以

```
AVG(q1) as q1,
AVG(q2) as q2,
AVG(q3) as q3,
AVG(q4) as q4, 
```

然后我不知道如何获得所有平均值的平均值，因为我做不到`AVG(q1,q2,q3,q4)`并且`AVG(q1+q2+q3+q4+q5)`不会返回所有行和列的总平均值，而只会返回每行的平均值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:21:05.740

最简单的方法是手动计算

```
(AVG(q1) + AVG(q2) ... + AVG(qn))/(n*1.0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T17:22:26.923

是的，您可以使用另一个 SELECT 来“重用”这些值

```
SELECT a.*,(q1+q2+q3+q4)/n as avg_all FROM (
  SELECT AVG(q1) as q1,
         AVG(q2) as q2,
         AVG(q3) as q3,
         AVG(q4) as q4.... ) a 
```

# c - C - '{' 标记之前的预期表达式

> ID：10457298
> 
> 赞同：0
> 
> 时间：2012-05-04T23:18:52.953
> 
> 标签：c

谁能指出我为什么`syntax error: expected expression before '{' token`进去

```
T[SIZE] = {NULL}; 
```

在下面的代码段中？谢谢。

```
typedef struct SetObject{
    int key;
    struct SetObject *prev;
    struct SetObject *next;
} Node;

Node *T[SIZE]; //global variable

void initT(void) {
    T[SIZE] = {NULL};
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T23:20:56.633

要将指针值分配给数组元素，请使用：

```
T[SIZE] = NULL; 
```

`NULL`不需要大括号。

第二个问题是`SIZE`数组中的索引无效*。*`T`有效索引范围从`0`到`SIZE-1`。分配给`T[SIZE]`将导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:23:39.067

如果 T 是指向 T 的指针数组，则 T[index] 是指向 T 的指针，你应该写：

```
T[index] = NULL; 
```

（所以 NULL 周围没有花括号）。

但是您的代码有更多错误。T 是一个全局变量，一个包含 SIZE 个元素的数组。这意味着第一个元素的索引为 0，最后一个元素的索引为 SIZE-1。所以写作`T[SIZE] = NULL;`实际上是不正确的，并且可能会使您的应用程序崩溃。

你想在这里实现什么？

# node.js - 猫鼬填充投掷错误

> ID：10457300
> 
> 赞同：0
> 
> 时间：2012-05-04T23:18:59.537
> 
> 标签：node.js, mongodb, mongoose

以下代码应该（我认为）填充模式 A 中的 dd 字段，但会产生错误

```
var mongoose = require('mongoose');

mongoose.connect('mongodb://localhost/test');

var A = new mongoose.Schema({
        dd : [{type : mongoose.Schema.Objectid, ref : 'D'}]
});

var D = new mongoose.Schema({
    a : String
});

var a = mongoose.model('A', A);
var d = mongoose.model('D', D);

var md = new d();

md.save(function(err) {
    if(err) console.log(err);
    ma = new a({dd : md._id});

    ma.save(function(err) {
        if(err) console.log(err);
        var qry = a.find({}).populate('dd').run(function(err, docs) {
            console.log(JSON.stringify(docs));
        });
    });

}); 
```

错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: Schema hasn't been registered for model "undefined".
Use mongoose.model(name, schema)
    at Mongoose.model (/mongoose/lib/index.js:173:13)
    at NativeConnection.model 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:41:57.957

Schema.Objectid 应该是 Schema.ObjectId：

```
var A = new mongoose.Schema({
        dd : [{type : mongoose.Schema.ObjectId, ref : 'D'}]
}); 
```

# ruby-on-rails - 使用 AJAX 而不是 rails 创建 :remote=>true 帖子

> ID：10457301
> 
> 赞同：0
> 
> 时间：2012-05-04T23:19:05.983
> 
> 标签：ruby-on-rails, ruby, ajax, render

我花了一天的时间来尝试了解 Rails :remote=>true 的工作原理。下面的问题似乎很复杂，但我试图用我提供的信息来理解这个简单的问题：

**如何在不使用 :remote=>true 的情况下进行简单呈现为 JS 的 Ajax 调用？** **据我了解 :remote=>true 只是生成并处理 AJAX 调用：**

我的观点是这样的：

*   以一种非常复杂的方式选择，使用 :remote => true 创建一个链接。为简单起见省略

> ```
> .e_list
>   = opts.sort_link(:name)
>   = opts.sort_link(:description)
>   - e_list.each do |e|
>     .entry
>       = link_to(e.name, '#', class: 'select_e', data: {e_id: e.id})
>       = e.description
>   = paginate e_list, remote: true, params: {search:"j", com_id: com.id} 
> ```

Gallery.js.erb

```
$('#com<%= @com.id %>').replaceWith('<%= escape_javascript render(partial: "shared/com", locals: {com: @com}) %>'); 
```

我的控制器：

```
 def gallery

    if params[:com_id] 
      @com = @s.com.find(params[:com_id])
      @com.filter = params
    end

    if c = @s.com.where(:_type => "Com").first
      @current_e = c.entries(@user.app_id).first
      @current_e.og_url = view_context.og_url(@current_e)
    end

    render :text => "foobar" if !@current_e

  end 
```

日志，在用户点击分页链接或排序链接后（关键是那些链接有：remote => true）

```
Started GET "super long url" for 127.0.0.1 at 2012-05-04 16:08:42 -0700
Processing by CController#gallery as JS 
```

**所以我尝试用 AJAX 重新创建它：**

```
 $('button.search').live 'click', (e) ->
    search = $(e.target).attr('search-term')
    success_callback = (results) ->
      if results
        console.log(results)
        update_components(results[0].entry, '.entry')
      else
    $.ajax(
      url: 'super long url that is exactly the same url as above!'
    ).done ->
    return false 
```

**我没有呈现为 JS 的失败响应，但我认为 :remote => true 只是一个 ajax 调用 wtf?:**

```
Started GET "super long url identical as the one that renders JS" for 127.0.0.1 at 2012-05-04 16:07:22 -0700
Processing by ContestController#gallery as */* 
```

到底是怎么回事？如何在不使用 :remote=>true 的情况下进行简单呈现为 JS 的 Ajax 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:14:39.420

尝试

```
$.ajax({
    url: 'your url',
    dataType: 'script'
}) 
```

[http://www.alfajango.com/blog/rails-3-remote-links-and-forms-data-type-with-jquery/](http://www.alfajango.com/blog/rails-3-remote-links-and-forms-data-type-with-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:53:40.457

您可以使用 jQuery 来完成您想要做的事情：

```
/* your jquery file */
jQuery.ajaxSetup({ 
  'beforeSend': function(xhr) {xhr.setRequestHeader("Accept", "text/javascript")}
})

...
$('#button').click(function() {
  $.post('/controller/action', {
    query_string1: value1
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:14:51.180

尝试

`/screens/4fa02763dc1c82269c0001da/contest/gallery.js?app_row_id=5....`

如果您希望响应中的 js 在浏览器中执行，您应该需要执行类似 eval(response) 的操作，但我只是建议，我从未做过，甚至知道如何在 javascript 中评估字符串的代码。

# java - java - 复制数组列表

> ID：10457302
> 
> 赞同：4
> 
> 时间：2012-05-04T23:19:08.793
> 
> 标签：java, arraylist, deep-copy

所以我知道下面的方法会导致两个变量指向同一个对象，但如果我确实想找到最简单的方法让 ArrayList s2 与 s1 完全相同，我该怎么做？

```
public static void main(String[] args) {

        ArrayList<String> s1 = new ArrayList<String>();
        for (int i = 1; i <= 3; i++) {
            s1.add(""+i);
        }
        ArrayList<String> s2 = s1;

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T23:20:22.240

您应该使用 s1 作为参数创建 s2。

```
public static void main(String[] args) {

    ArrayList<String> s1 = new ArrayList<String>();
    for (int i = 1; i <= 3; i++) {
        s1.add(""+i);
    }
    ArrayList<String> s2 = new ArrayList<String>(s1);

} 
```

# ruby - NameError: uninitialized constant - ActiveRecord 中不允许的语法？

> ID：10457304
> 
> 赞同：0
> 
> 时间：2012-05-04T23:19:27.997
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有两个要尝试加入的资源 - 通过连接表 SubmittedPackage 进行打包和列表。我将 Ruby 1.9.3-p125 和 Rails 3.2.1 与 PostgreSQL 9.1.3 一起使用。模型如下所示。

```
class Package < ActiveRecord::Base
  has_many :submitted_packages
  has_many :listings, :through => :submitted_packages

class Listing < ActiveRecord::Base
  has_many :submitted_packages
  has_many :packages, :through => :submitted_packages

class SubmittedPackages < ActiveRecord::Base
  belongs_to :package
  belongs_to :listing 
```

在 Rails 控制台中，我不断收到*NameError: uninitialized constant Listing::SubmittedPackage*

如果我用*Drum替换**SubmittedPackage*资源，它将起作用（这当然包括创建适当的表等等）。

 *:submitted_pa​​ckages 是否与 Rails 或 ActiveRecord 中的某些内容冲突？

任何想法为什么这会破坏？

提前致谢！

更新：作为一种变通方法，我在列表和包模型中明确定义了 :class_name 的有很多关系。这至少让事情变得正常，但是，我仍然不清楚为什么有必要开始。什么 Rails 或 Ruby 命名约定被打破了`:submitted_packages`？

```
class Package < ActiveRecord::Base
  has_many :submitted_packages, :class_name => 'SubmittedPackages'
  has_many :listings, :through => :submitted_packages

class Listing < ActiveRecord::Base
  has_many :submitted_packages, :class_name => 'SubmittedPackages'
  has_many :packages, :through => :submitted_packages

class SubmittedPackages < ActiveRecord::Base
  belongs_to :package
  belongs_to :listing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:32:04.063

如果 SubmittedPackage 是 JoinTable，我想它应该有很多列表，但我看到的只是很多包和很多提交的包。

高温高压*

# rally - 仪表板应用程序的尺寸

> ID：10457318
> 
> 赞同：2
> 
> 时间：2012-05-04T23:21:34.797
> 
> 标签：rally

我知道一个应用程序可以判断它是否在仪表板中运行（使用 rally.sdk.util.Context），但是有没有办法让它知道仪表板组件的尺寸是多少？

例如，我必须使用多少水平和垂直像素？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:13:03.023

在 SDK 1.0 应用程序上，您可以使用底层 dojo 方法来帮助您创建应用程序。

如果您想要应用程序的当前大小，可以使用：

```
dojo.window.getBox(); 
```

这将返回一个如下所示的对象：

```
{
   "w":1626,
   "h":372,
   "l":0,
   "t":0
} 
```

如果您想了解该功能，可以在[此处](http://dojotoolkit.org/api/1.5/dojo/window)的 dojo 文档中进行。

# java - 类数组中的 NullPointer

> ID：10457322
> 
> 赞同：1
> 
> 时间：2012-05-04T23:22:22.193
> 
> 标签：java, arrays, nullpointerexception

我有两个java类。Schedule 是使用名为 的作业数组的主类`deadline`。我在将任何东西放入数组时遇到问题。我有一个 for 循环，它从文本文件中读取数据（它工作正常）并将某些数据插入到`deadline`. 我没有成功创建`deadline`，因为每当我想开始插入数组时，我都会得到一个`NullPointerException`. （下面的代码`...`显然不是我实际编码的，但仍然是同样的情况。）

自从我用 Java 编码以来已经有一段时间了，所以我可能只是忽略了一些简单的东西，但我不确定它可能是什么......感谢您提供的任何帮助。

```
public class Schedule {

    private Job []deadline;
    Schedule (int n){
        Job[] deadline = new Job[n];
    }

    ...
        int n = 7;
        Schedule schedule = new Schedule(n);

        deadline[0] = new Job("A",3,40); // This line won't compile. NullPointerException
}

public class Job {

    private String name;
    private int deadline;
    private int profit;

    Job(String n, int d, int p){
        name = n;
        deadline = d;
        profit = p;
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T23:23:49.167

您在构造函数中隐藏`deadline`，因此您不初始化类成员`deadline`，而是初始化本地成员。将其更改为：

```
 private Job []deadline;
    Schedule (int n){
        deadline = new Job[n];
    // ^^ note - no Job[] here
    } 
```

# ios - 地标 kml 信息未显示在 iOS 版本的 Google 地球中

> ID：10457324
> 
> 赞同：2
> 
> 时间：2012-05-04T23:22:30.373
> 
> 标签：ios, kml, google-earth

我在 kml 文件中创建的地标信息不会显示在 iPad 上。窗口打开，但没有内容。它过去一直有效，并且在适用于 Windows 和 Android 的 Google 地球中运行良好。我有一种感觉，这可能是 iPad 上的 Google Earth 的问题，而不是 kml 问题。

如果有人有兴趣看一下，这是文件：

[http://dl.dropbox.com/u/18240150/GoogleEarthAirports30Apr12.kml](http://dl.dropbox.com/u/18240150/GoogleEarthAirports30Apr12.kml)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:05:27.927

这是解决此问题的方法。

参考您的***远程***KML 文件准备一个带有 NetworkLink 标记的 KML 文件并下载该文件。然后描述渲染即使在 iOS5 上也能很好地工作。“远程”，这意味着文件放置在像“http://example.com/sample.kml”这样的服务器上，这很重要。本地文件（如 .kmz 文件中的文件）目前无法使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:16:12.323

您的 KML 看起来不错（实际上，它做得非常好；机场的外观和行为都很棒）：

*   在文本编辑器中检查可视化桌面，它看起来不错
*   加载到谷歌地球没有问题（确认你看到的行为）
*   还有一个[交互式 KML 解析器](https://developers.google.com/earth/documentation/reference/interface_g_e_plugin)在线可用 - 您的 KML 通过解析运行而没有错误

您怀疑问题的根本原因在于 iPad 或 iPad 上的 Google 地球似乎是正确的。我没有 iPad，因此无法对其进行测试，但是知道独立测试具有相似的结果至少有助于查明问题。

# objective-c - 试图将选择的图像保存到 appdocs - 没有发生

> ID：10457328
> 
> 赞同：0
> 
> 时间：2012-05-04T23:23:28.227
> 
> 标签：objective-c, nsstring, uiimageview, nsarray, xcode4.3

我真的为此苦苦挣扎，在我的应用程序中保存和加载图像的无休止追求的第三天。我正在从相机胶卷中挑选一张图片，并尝试通过 appsdocs 目录将其保存到设备中。

在 Appdelegate.m 我有：

```
// Returns the URL to the application's Documents directory.
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
} 
```

在我要保存和加载图像的类中（从相机胶卷中挑选到 UI imageView 中）

```
- (IBAction)save:(id)sender {
    UIImage *myImage = [imageView image];
    NSData *data = UIImagePNGRepresentation(myImage);
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *appDocsDirectory = [paths objectAtIndex:0];
}

- (IBAction)load:(id)sender {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *appDocsDirectory = [paths objectAtIndex:0];
    UIImage* thumImage = [UIImage imageWithContentsOfFile: [NSString stringWithFormat:@"%@/%@.png", appDocsDirectory, @"myNewFile"]];
}
@end 
```

我还在这个类中导入了 Appdelegate.h，不确定是否需要或正确？现在我终于摆脱了所有错误并且没有抛出异常但现在我的问题是当我尝试保存图像并加载时没有任何反应它。我也收到黄色三角形，告诉我我有未使用的负载 `UIImage* thumImage` `NSString *appDocsDirectory` ，`NSData *data`所以我可能已经对此做了一个皇家哈希。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:34:31.143

这就是我在我的一个项目中的做法。

我使用 imagePickerController 的委托方法获取图片：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    pictureInfo = info;
} 
```

然后我像这样保存它：

```
-(void)createPin
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *pinFolderName = [NSString stringWithFormat:@"%f",[[NSDate date] timeIntervalSince1970]];
    NSString *pinFolderPath = [documentsDirectory stringByAppendingPathComponent:pinFolderName];
    [fileManager createDirectoryAtPath:pinFolderPath withIntermediateDirectories:YES attributes:nil error:NULL];
    self.fullsizePath = [pinFolderPath stringByAppendingPathComponent:@"fullsize.png"];
    NSString *mediaType = [pictureInfo objectForKey:UIImagePickerControllerMediaType];   
    if ([mediaType isEqualToString:@"public.image"]){
        UIImage *fullsizeImage = [pictureInfo objectForKey:UIImagePickerControllerEditedImage];
        NSData *fullsizeData = UIImagePNGRepresentation(fullsizeImage);
        [fullsizeData writeToFile:self.fullsizePath atomically:YES];
    }
} 
```

希望你可以从那里开始。如果您需要任何解释或帮助，请随时询问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:04:27.340

我使用了 NSuser 默认值，全部排序

# c++ - 是否有任何关于数字文字后缀的 C++ 风格指南？

> ID：10457333
> 
> 赞同：10
> 
> 时间：2012-05-04T23:23:57.547
> 
> 标签：c++, coding-style, literals

在我读过的所有 C++ 风格指南中，我从未见过任何关于数字文字后缀（即`3.14f`, `0L`等）的信息。

**问题**

1.  是否有任何风格指南讨论那里的用法，或者是否有一般约定？

2.  `f`我偶尔会在图形编程中遇到后缀。编程领域类型的使用是否有任何趋势？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T23:31:41.573

我知道的唯一已建立的约定（无论如何都已建立）是始终使用`L`而不是`l`，以避免将其误认为是`1`. 除此之外，这几乎是在需要时使用所需内容的问题。

另请注意，C++ 11 允许带有用户定义后缀的用户定义文字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T23:33:50.607

我没有找到通用的样式指南。我使用大写字母，我对使用 F 表示浮点文字和 L 表示 long double 很挑剔。我还为整数文字使用了适当的后缀。

我假设您知道这些后缀的含义：`3.14F`是`float`文字，12.345 是双文字，6.6666L 是长双文字。

对于整数：`U`is `unsigned`, `L`is `long`, `LL`is `long long`。`U`和s之间的顺序`L`无关紧要，但我总是放`UL`，因为例如我声明了这样的变量`unsigned long`。

如果您为一种类型的变量分配另一种类型的文字，或者为另一种类型的函数参数提供一种类型的数字文字，则必须进行强制转换。使用适当的后缀可以避免这种情况，并且与 static_cast 对调用强制转换很有用一样。一致地使用数字文字后缀是一种很好的风格，可以避免数字意外。

人们对小写还是大写最好有不同的看法。选择一种对您来说看起来不错的风格并保持一致。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-05T15:39:04.927

[CERT C 编码标准](https://securecoding.cert.org/confluence/pages/viewpage.action?pageId=19759250) 建议使用大写字母：

> ### DCL16-C。使用“L”而不是“l”来表示长值
> 
> 小写字母 l（ell）很容易与数字 1（一）混淆。当指示整数文字常量是长值时，这可能会特别令人困惑。该建议类似于[DCL02-C。使用视觉上不同的标识符](https://securecoding.cert.org/confluence/display/c/DCL02-C.+Use+visually+distinct+identifiers)。
> 
> 同样，当指示整数文字常量是 long long 值时，您应该使用大写的 LL 而不是小写的 ll。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-19T13:00:02.360

用于 C++03 语言的 MISRA C++ 2008 在规则 M2-13-3 中声明（至少，如本[Autosar 文档](https://www.autosar.org/fileadmin/user_upload/standards/adaptive/17-03/AUTOSAR_RS_CPP14Guidelines.pdf)所引用的那样），

> “U”后缀应应用于所有无符号类型的八进制或十六进制整数文字。

链接的文档还与 JSF-AV 2005 和 HIC++v4.0 进行了比较，所有这四个标准都要求后缀为大写。

尽管如此，我还是找不到一条规则（但我手头没有 MISRA C++ 的硬拷贝）规定应在需要时使用后缀。但是，IIRC 在 MISRA C++ 中有一个（或者可能只是我以前的公司编码指南……）

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-04T23:31:06.720

网络搜索“c++ numeric suffixes”返回：

[http://cpp.comsci.us/etymology/literals.html](http://cpp.comsci.us/etymology/literals.html)

[http://www.cplusplus.com/forum/general/27226/](http://www.cplusplus.com/forum/general/27226/)

[http://bytes.com/topic/c/answers/758563-numeric-constants](http://bytes.com/topic/c/answers/758563-numeric-constants)

这些是你要找的吗？

# java - 提交或 conn.setAutoCommit(true)

> ID：10457335
> 
> 赞同：11
> 
> 时间：2012-05-04T23:24:27.307
> 
> 标签：java, mysql, jdbc, percona

我注意到一些程序员使用`COMMIT`其他方法`conn.setAutoCommit(true);`来结束事务或回滚，那么使用一个而不是另一个有什么好处？

主要区别在哪里？

```
conn.setAutoCommit(true); 
```

超过

```
statement.executeQuery(query);
statement.commit(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T08:08:18.293

一般情况下，您应该使用`Connection.commit()`而不是`Connection.setAutoCommit(true)`提交事务，除非您想从使用事务切换到 autoCommit 的“每个语句的事务”模型。

也就是说，`Connection.setAutoCommit(true)`在事务中调用将提交事务（如果驱动程序符合 JDBC 4.1 规范的第 10.1.1 节）。但是，如果您打算在那之后留在 autoCommit 中，您真的应该这样做，因为在连接上启用/禁用 autoCommit 可能比简单提交具有更高的连接开销（例如，因为它需要在事务管理器之间切换，请进行额外检查， ETC）。

您还应该使用`Connection.commit()`而不是使用本机 SQL 命令`COMMIT`。如连接文档中所述：

> 注意：配置 Connection 时，JDBC 应用程序应使用适当的 Connection 方法，例如 setAutoCommit 或 setTransactionIsolation。当有可用的 JDBC 方法时，应用程序不应直接调用 SQL 命令来更改连接的配置。

问题是命令喜欢`commit()`并且`setAutoCommit(boolean)`可能在后台做更多的工作，比如关闭`ResultSets`和关闭或重置`Statements`。使用 SQL 命令`COMMIT`将绕过这一点，并可能使您的驱动程序/连接进入不正确的状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T23:31:14.790

的用法`conn.setAutoCommit();`适用于连接，使您可以在单个事务中执行 X 查询，或在每个事务中使用一个事务`execute`

正如 API 所描述的：

```
 void setAutoCommit(boolean autoCommit)
                    throws SQLException 
```

> 将此连接的自动提交模式设置为给定状态。如果连接处于自动提交模式，则其所有 SQL 语句将作为单独的事务执行和提交。否则，它的 SQL 语句将被分组为通过调用方法提交或方法回滚终止的事务。默认情况下，新连接处于自动提交模式

对于一个简单的案例：

```
conn.setAutoCommit(false); 
statement.executeQuery(query); 
statement.commit(); 
```

将与以下内容相同：

```
conn.setAutoCommit(true); 
statement.executeQuery(query); 
```

# asp.net - sql server 数据库图

> ID：10457338
> 
> 赞同：0
> 
> 时间：2012-05-04T23:24:42.537
> 
> 标签：asp.net, sql-server

不久前我创建了一个数据库 mdf 文件并创建了一个外键图。最近，我需要添加几个表，并且出现错误说我无法制作图表，因为我不是所有者。

所以，我没有更新图表，但还是添加了表格。我的应用程序似乎与新表一起工作正常。我正在使用 linq-to-sql 并且 ORM 的设计表面没有显示新表和旧表之间的连接。

我的问题是：如果应用程序在有和没有图表的情况下都可以工作，那么创建一个有什么好处？我知道我可以阅读一本 800 页的书并得到答案，但我想知道 2-3 行的答案是什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:29:37.833

Diagram 只是建模工具.. 无需使用它，但可视化 db 很酷，如果您不是 db 的创建者，则更容易编写查询。

您可以在“文件”选项卡的选项中切换 db 的所有者。

# php - mysql 在某些字符上窒息而 mssql 不是

> ID：10457341
> 
> 赞同：0
> 
> 时间：2012-05-04T23:25:45.347
> 
> 标签：php, mysql, utf-8

什么是过滤字符串数据的好方法，这样我们就不会在这样的插入操作中遇到致命错误？

```
ERROR: SQL FAILS: Incorrect string value: '\x92s]' for column 'looseterm' at row 1

Failing SQL is INSERT INTO `looseterms` (`looseterm`) VALUES ('[loose_terms:indonesia’s]') 
```

有谁知道这到底`'\x92s]'`是什么，什么让 mysql 窒息而死？Ms-Sql 没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:26:48.783

将[连接字符集设置](http://dev.mysql.com/doc/en/charset-connection.html)为文字编码的字符集。例如，对于`UTF-8`：

```
SET NAMES 'utf8'; 
```

[如果不同的文字采用不同的编码，您可以使用介绍](http://dev.mysql.com/doc/en/string-literals.html)器指定那些不在连接字符集中的字符集：

```
INSERT INTO ... (_utf8'[loose_terms:...'); 
```

# python - 如何将 web.py 绑定到本地主机？

> ID：10457346
> 
> 赞同：3
> 
> 时间：2012-05-04T23:26:16.787
> 
> 标签：python, security, wsgi, web.py

如何将 web.py 绑定到环回接口？

```
app = web.application(urls, globals()) 
```

当我以这种方式定义它并启动它时，它会侦听所有接口：

```
mit@mit1 $ python ./serve.py
http://0.0.0.0:8080/ 
```

应该限制​​在 127.0.0.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T00:04:42.527

试试下面的命令...

```
python ./serve.py 127.0.0.1 
```

它应该可以解决问题！

```
c:\work\web.py\test1>python code.py 127.0.0.1
http://127.0.0.1:8080/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:00:18.150

```
python ./serve.py 127.0.0.1 
```

你可以定义所有你想要的主机。只需在下面输入主机 IP

# tsql - 试图让 sybase db 通过 isql 命令行连接.... Gui RazorSQL 工作

> ID：10457348
> 
> 赞同：0
> 
> 时间：2012-05-04T23:26:18.867
> 
> 标签：tsql, jdbc, isql, jconnect

我正在使用 RazorSQL，连接的设置是

GUI RazorSQL 连接显示为

```
 Driver Class  net.sourcefourge.jtds.jdbc.Driver

 Driver Location  /Java/drivers/jtds/jtds12.jar

 JDBC URL   jdbc:jtds:sybase://IP-address:4100/DATABASE 
```

LINUX 连接显示

**/etc/freetds.conf**

```
[Serverconnection]

    host = 10.10.10.10
    port = 4100
    tds version = 8.0
    dump file = /var/log/freetds.log 
```

**/etc/odbc.ini**

```
[Serverconnection]

     Driver          = /usr/local/freetds/lib/libtdsodbc.so
     Description     = Sybase JDBC Server
     Trace           = No
     Server          = 10.10.10.10
     Database        = SYB
     Port            = 4100
     TDS_Version     = 5.0 
```

最终目标是通过命令行连接到 sybase db，这样我就可以在 bash 脚本中构建它们，但我似乎无法通过 ISQL 连接到它

不确定是否需要驱动程序或 jar 或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T22:52:17.843

尝试更改您的 odbc.ini 文件并使用`Servername=Serverconnection`而不是`Server=10.10.10.10`. 这会将您的 odbc.ini 文件指向您的 freetds.conf 文件以获取连接信息，该信息位于`[Serverconnection]`. freetds.conf 中的任何内容都不需要在 odbc.ini 文件中重复。

# mod-rewrite - 关闭子目录的 mod_rewrite

> ID：10457349
> 
> 赞同：2
> 
> 时间：2012-05-04T23:26:36.953
> 
> 标签：mod-rewrite

在 httpd.conf 中，我在 webroot 中有一个重写规则

首先，我在子目录中关闭 mod_rewrite

```
<directory /home/xxxx/public_html/subdir>
  RewriteEngine off
</directory> 
```

然后在需要的地方打开

```
<directory /home/xxxx/public_html>
  RewriteEngine On
  # bunch of rewrite rules
</directory> 
```

但是重写引擎仍然在子目录中。我已经使用 RewriteLog 3 完成了日志记录，并看到它处理子目录中的文件。

我尝试将子目录移动到 httpd.conf 中的主目录部分下方，但它仍然处理子目录文件。

我知道我可以在我的主要规则中匹配和排除子目录，但我试图完全避免处理该目录以提高速度。

任何想法为什么或如何关闭子目录的 mod_rewrite ？

# iphone - 在引号之间获取字符串的NSRange？

> ID：10457350
> 
> 赞同：4
> 
> 时间：2012-05-04T23:26:40.687
> 
> 标签：iphone, objective-c, ios

我有一个字符串：

> 他昨天说“你好，伙计”。

我想从第一个报价到最后一个报价得到一个 NSRange。所以我尝试了这样的事情：

```
NSRange openingRange = [title rangeOfString:@"\""];
NSRange closingRange = [title rangeOfString:@"\""];
NSRange textRange = NSMakeRange(openingRange.location, closingRange.location+1 - openingRange.location); 
```

但我不确定如何区分第一个引号和第二个引号。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T23:45:05.830

您可以为此使用正则表达式：

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"([\"])(?:\\\\\\1|.)*?\\1" options:0 error:&error];

NSRange range = [regex rangeOfFirstMatchInString:myString options:0 range:NSRangeMake(0, [myString length]]; 
```

不要忘记检查错误；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T23:40:16.250

您始终可以将“rangeOfString:options:range:”用于第二个（从第一个的“位置”开始）。

***选项1***

```
- (NSRange)rangeOfQuoteInString:(NSString *)str {
    int firstMatch = [str rangeOfString:@"\""].location;
    int secondMatch = [str rangeOfString:@"\"" options:0 range:NSMakeRange(firstMatch + 1, [str length] - firstMatch - 1)].location;
    return NSMakeRange(firstMatch, secondMatch + 1 - firstMatch);
} 
```

我希望这是正确的。晚餐时在我的手机上完成的。;-)

但是，另一件事是，由于字符串范围可能会执行类似的实现，为什么不迭代字符串中的“char”值并查找匹配项#1 和#2？可能一样快或更快。

***选项 2***

```
- (NSRange)rangeOfQuoteInString:(NSString *)str {
    int firstMatch = -1;
    int secondMatch = -1;
    for (int i = 0; i < [str length]; i = i + 1) {
        unichar c = [str characterAtIndex:i];
        if (c == '"') {
            if (firstMatch == -1) {
                firstMatch = i;
            } else {
                secondMatch = i;
                break;
            }
        }
    }
    if (firstMatch == -1 || secondMatch == -1) {
        // No full quote was found
        return NSMakeRange(NSNotFound, 0);
    } else {
        return NSMakeRange(firstMatch, secondMatch + 1 - firstMatch);
    }
} 
```

# jsf - c:set 的字符串值抛出 NumberFormatException

> ID：10457353
> 
> 赞同：0
> 
> 时间：2012-05-04T23:26:58.773
> 
> 标签：jsf, jstl

我想使用以下代码在 JSF 中生成图像的 URL...

```
<c:choose>
    <c:when test="#{cc.attrs.index == 0}">
        <c:set var="image" value="image.png" />
    </c:when>
    <c:otherwise>
        <c:set var="image" value="image1.png" />
    </c:otherwise>
</c:choose>

<img src="#{image}" /> 
```

但是当我运行它时，我得到一个 NumberFormatException：

```
java.lang.NumberFormatException: For input string: "image.png"
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1241)
    at java.lang.Double.valueOf(Double.java:504)
    at com.sun.el.lang.ELArithmetic$DoubleDelegate.coerce(ELArithmetic.java:148)
    at com.sun.el.lang.ELArithmetic.coerce(ELArithmetic.java:373)
    at com.sun.el.lang.ELArithmetic.add(ELArithmetic.java:254)
    at com.sun.el.parser.AstPlus.getValue(AstPlus.java:57)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:206)
    at org.apache.myfaces.view.facelets.el.ELText$ELTextVariable.toString(ELText.java:208)
    at org.apache.myfaces.view.facelets.el.ELText$ELTextComposite.toString(ELText.java:140)
    ... 
```

所以现在我的问题是：它`c:set`不接受字符串值是真的吗？

* * *

顺便说一句，当我使用参数时，例如

```
 <c:set var="image" value="#{cc.attrs.index}" /> 
```

一切都很好，但是 URL 不是正确的。

* * *

我的 Maven 依赖项：

*   org.apache.myfaces.core.myfaces-api 2.1.7
*   org.apache.myfaces.core.myfaces-impl 2.1.7
*   javax.el.el-api 2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:01:45.467

我会使用纯 JSF 来解决这个问题

```
<h:graphicImage value="#{(cc.attrs.index eq 0)? 'image.png' : 'image1.png' }" /> 
```

# c - 如何在函数中加载图片？

> ID：10457354
> 
> 赞同：0
> 
> 时间：2012-05-04T23:27:13.937
> 
> 标签：c, sdl

对于我的 C - SDL 视频游戏，我需要使用自己制作的精灵表。图片尺寸是100x100，我要拍的每张照片都是25x25

我在某个地方找到了一个不错的功能，可以为我做到这一点：

```
// Wraps a rectangle around every sprite in a sprite sheet and stores it in an array of     rectangles(Clip[])

void spriteSheet(){

int SpriteWidth = 25; int SpriteHeight= 25; int SheetDimension = 4;
int LeSprites = SheetDimension * SheetDimension;// Number of Sprites on sheet
SDL_Rect Clip[LeSprites]; // Rectangles that will wrap around each sprite

int SpriteXNum = 0;// The number sprite going from left to right
int SpriteYNum = 0;// The number sprite going from top to bottom
int YIncrement = 0;// Increment for each row.
int i = 0;
for(i = 0; i< LeSprites; i++){// While i is less than number of sprites

    if(i = 0){// First sprite starts at 0,0
        Clip[i].x = 0;
        Clip[i].y = 0;
        Clip[i].w = SpriteWidth;
        Clip[i].h = SpriteHeight;
    }
    else{

        if(SpriteXNum < SheetDimension - 1 ){// If we have reached the end of the row, go back to the front of the next row
            SpriteXNum = 0;
        }
        if(YIncrement < SheetDimension - 1){
            SpriteYNum += 1;                         // Example of 4X4 Sheet
        }                                            //   ________________
        Clip[i].x = SpriteWidth * SpriteXNum;        //  | 0 | 1 | 2 | 3 |
        Clip[i].y = SpriteHeight * SpriteYNum;       //  |===============|
                                                     //  | 0 | 1 | 2 | 3 |
                                                     //  |===============|
        Clip[i].w = SpriteWidth;                     //  | 0 | 1 | 2 | 3 |
        Clip[i].h = SpriteHeight;                    //  |===============|
                                                     //  | 0 | 1 | 2 | 3 |
    }                                                //  |---------------|
    SpriteXNum++;
    YIncrement++;
}

} 
```

但现在我不知道如何在其上加载我的（png）图片以应用此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:38:08.263

看起来这段代码只是为您提供了精灵表每个单独正方形的剪切坐标。它似乎根本不与图像交互。

如果你想加载 PNG，你应该使用额外的[SDL_image 库](http://www.libsdl.org/projects/SDL_image/)。它将产生一个`SDL_Surface`指针，当您调用`SDL_BlitSurface`将其绘制到屏幕上时，您可以将其与剪切坐标一起使用。

请注意，您应该尝试`SpriteDimension`从图像本身获取等值（通过将图像宽度 ( `w`) 和高度 ( `h`) 除以单个精灵的大小）。

将来，您可以通过设计一个 SpriteSheet 类来扩展这个想法，该类保存其计算的剪切位置和有关精灵表的其他信息，并`SDL_BlitSurface`适当地包装调用。

# apache - 为网站上的所有 url 添加 X-Frame-Options，启用列表除外

> ID：10457355
> 
> 赞同：2
> 
> 时间：2012-05-04T23:27:13.900
> 
> 标签：apache, iframe, web

我们想要添加`X-Frame-Options`到所有 Http 响应中，除了其中的一些（因为某些页面应该显示在 iframe 中，并且在网站之外）。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:37:42.723

通过添加解决

```
Header set X-Frame-Options DENY
....

<LocationMatch "....">
  Header unset X-Frame-Options
</LocationMatch> 
```

# machine-learning - 回声状态神经网络？

> ID：10457356
> 
> 赞同：0
> 
> 时间：2012-05-04T23:27:16.293
> 
> 标签：machine-learning, neural-network, classification

这里有熟悉回声状态网络的人吗？我在 C# 中创建了一个回声状态网络。目的只是将输入分为好和不好的输入。输入是一个双精度数数组。我知道对于这个分类，回声状态网络可能不是最好的选择，但我必须用这种方法来做。

我的问题是，在训练网络之后，它无法泛化。当我用外国数据（不是教学输入）运行网络时，我只能得到大约 50-60% 的好结果。

更多细节：我的回声状态网络必须像函数逼近器一样工作。该函数的输入是一个包含 17 个双精度值的数组，输出是 0 或 1（我必须将输入分类为坏输入或好输入）。

所以我创建了一个网络。它包含一个具有 17 个神经元的输入层、一个存储层，其神经元数量是可调的，以及包含 1 个神经元的输出层，输出需要 0 或 1。在一个更简单的示例中，不使用输出反馈（我尝试使用输出反馈也一样，但没有任何改变）。

储层的内矩阵也是可调的。我在两个双精度值（最小值，最大值）之间生成权重，稀疏度可调节。如果值太大，它会使矩阵的光谱半径低于 1。储层可以具有 sigmoid 和 tanh 激活函数。

输入层以随机值完全连接到存储层。因此，在训练状态下，我使用训练数据计算内部 X(n) 储存器激活，将它们收集到矩阵 rowvise 中。使用所需的输出数据矩阵（现在是具有 1 或 0 个值的向量），我计算输出权重（从水库到输出）。水库完全连接到输出。如果有人使用回声状态网络现在我在说什么。我为此使用了伪逆方法。

问题是，我如何调整网络以便更好地泛化？使用外国数据集（不是训练数据集）达到超过 50-60% 的期望输出。如果我用训练数据集再次运行网络，它会给出非常好的结果，80-90%，但我想要的是更好地泛化。

我希望有人对回声状态网络也有这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:14:33.127

如果我理解正确，你有一组已知的、分类的数据，你可以训练这些数据，然后你有一些未知的数据，你随后会对其进行分类。你发现训练后，你可以很好地重新分类你的已知数据，但不能很好地对未知数据进行分类。我相信这被称为[过度拟合](http://en.wikipedia.org/wiki/Overfitting)——您可能想要考虑对网络不那么严格，减少节点数量，和/或基于隐藏数据集进行训练。

人们这样做的方式是，他们有一个训练集 A、一个验证集 B 和一个测试集 C。您知道 A 和 B 的正确分类，但不知道 C（因为您将已知数据分为 A 和 B，和 C 是您希望网络为您找到的值）。训练时，您只显示网络 A，但在每次迭代中，为了计算成功，您同时使用 A 和 B。因此，在训练时，网络试图通过仅查看 A 来理解 A 和 B 中存在的关系。因为它看不到 B 中的实际输入和输出值，而只知道它的当前状态是否准确地描述了 B，这有助于减少过度拟合。

通常人们似乎将 4/5 的数据拆分为 A，将 1/5 的数据拆分为 B，但当然您可以尝试不同的比率。

最后，你完成了训练，看看网络会对你的未知集合 C 说什么。

对不起，非常笼统和基本的答案，但也许它会帮助更好地描述问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T20:42:36.397

就像这里的其他答案所建议的那样，这是一个典型的过度拟合案例：您的模型在您的训练数据上表现良好，但它不能很好地推广到新的测试数据。

Hugh 的回答有一个很好的建议，那就是减少模型中的参数数量（即通过缩小水库的大小），但我不确定它是否对 ESN 有效，因为问题的复杂性ESN 可以解决的增长与水库大小的对数成正比。减小模型的大小实际上可能会使模型无法正常工作，尽管这可能是避免此类模型过度拟合所必需的。

Superbest 的解决方案是，一旦验证集的性能停止提高，就使用验证集停止训练，这种技术称为[提前停止](http://en.wikipedia.org/wiki/Early_stopping)。但是，正如您所指出的，由于您使用离线回归来计算 ESN 的输出权重，因此您无法使用验证集来确定何时停止更新模型参数——提前停止仅适用于在线训练算法。

但是，您可以通过另一种方式使用验证集：正则化回归系数！以下是它的工作原理：

*   将您的训练数据分成“训练”部分（通常是您可用数据的 80-90%）和“验证”部分（剩余的 10-20%）。
*   当您计算回归时，不要使用普通线性回归，而是使用正则化技术，如[岭回归](http://en.wikipedia.org/wiki/Tikhonov_regularization)、[套索回归](http://statweb.stanford.edu/~tibs/lasso.html)或[弹性网络回归](http://en.wikipedia.org/wiki/Elastic_net_regularization)。仅使用数据集的“训练”部分来计算回归。
*   所有这些正则化回归技术都有一个或多个“超参数”，可以平衡模型拟合与其复杂性。“验证”数据集用于设置这些参数值：您可以使用[网格搜索](http://en.wikipedia.org/wiki/Hyperparameter_optimization#Grid_search)、进化方法或任何其他超参数优化技术来执行此操作。一般来说，这些方法通过选择超参数的值、使用“训练”数据集拟合模型以及测量拟合模型在“验证”数据集上的性能来工作。重复 N 次并选择在“验证”集上表现最佳的模型。

[您可以在http://en.wikipedia.org/wiki/Least_squares#Regularized_versions](http://en.wikipedia.org/wiki/Least_squares#Regularized_versions)了解更多关于正则化和回归的信息，或者在机器学习或统计教科书中查找。

[此外，请在http://en.wikipedia.org/wiki/Cross-validation_(statistics)](http://en.wikipedia.org/wiki/Cross-validation_(statistics))阅读有关交叉验证技术的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:28:54.653

如果您的网络没有泛化，则意味着它过度拟合。

为了减少神经网络上的过拟合，有两种方法：

*   获取更多训练数据
*   减少神经元的数量

您还可以考虑为网络提供的功能。例如，如果它是一个每周重复的时间序列，那么一个特征就是“星期几”或“星期几”或“星期几”之类的东西。

神经网络需要大量数据。很多很多的例子。数千。如果你没有数千个，你应该选择一个只有少数神经元的网络，或者使用其他的东西，比如回归，它的参数更少，因此不太容易过度拟合。

# c# - 从字符串实例化 C# 中的类

> ID：10457358
> 
> 赞同：1
> 
> 时间：2012-05-04T23:27:44.080
> 
> 标签：c#, .net, windows-phone-7, silverlight-4.0

我正在开发一个使用 Silverlight 的 windows phone 7 应用程序。我要做的是创建一个类的新实例，给定一个包含我想创建的正确类的名称的字符串。下面是我所指的代码片段，我正在尝试使用它来创建新实例。我从调试中知道 serviceClass 包含正确的字符串，如果我在其中添加“.cs”，它现在将直接对应于我拥有的类之一，那么为什么不创建它呢？

```
WebViewService foundService; //From above
....
....
services.TryGetValue(mode, out foundService); //Find service
if (foundService == null)
   {
            string serviceClass;
            serviceRegistry.TryGetValue(mode, out serviceClass); //Find serviceClass
            if (serviceClass != null) //create new web service if one is found
            {
                try
                {
                    //TODO: This is not working properly, should create an instance of some child class of WebViewService
                     foundService = (WebViewService)System.Activator.CreateInstance(Type.GetType(serviceClass+".cs"));
                     services.Add(mode, foundService);
                }
                catch
                {
                    //But instead it always ends up here with ArgumentNullExeption
                }
            }
        }
        return foundService;
    } 
```

任何帮助或任何建议将不胜感激。谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:32:43.563

尝试使用类的全名（包括命名空间），不使用“.cs”部分。例如：`YourApp.Services.YourWebViewService`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T23:32:49.600

如果您的字符串包含[完全限定的类型名称](http://msdn.microsoft.com/en-us/library/yfsftwz6.aspx)，那么您可以创建实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T23:31:22.113

`Type.GetType`不接受带有文件名的字符串。它需要一个类名或一个结构名。

# c - 为什么函数返回类型需要是类型 (void*) 才能在 C 中进行线程化？

> ID：10457359
> 
> 赞同：4
> 
> 时间：2012-05-04T23:27:47.230
> 
> 标签：c, multithreading, pthreads

在 c 中，我们像这样创建一个线程：

```
void * run(void * arg){
    printf("hello world\n");
}

int main(){
    pthread_t thread;
    int a = pthread_create(&thread, NULL, run, (void*)0);
} 
```

但是如果我声明 run as 它将不起作用

```
void run(){} 
```

另一方面，如果我将它转换`(void *)`为 的参数`pthread_create`，它工作正常。所以它只接受返回类型为`(void *)`.

为什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T23:31:34.693

线程函数必须声明为返回`void *`，因为线程库需要这样的返回值，并将其存储到`pthread_join()`线程终止后给定的位置。

如果你不需要任何线程返回值，你可以只`return 0;`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T23:30:40.733

在我的系统上，`man pthread_create`说：

> 如果`start_routine`返回，效果就像隐式调用`pthread_exit()`，使用返回值`start_routine`作为退出状态。

该返回值可通过`pthread_join()`函数获得：

> 从`pthread_join()`使用非 NULL`value_ptr`参数的成功调用返回时，终止线程传递给的值`pthread_exit()`存储在`value_ptr`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:47:00.997

为什么不？根据定义，线程不能被调用或返回，因为它们有自己的堆栈。但是，能够向线程发送一些初始数据信号通常很有用，并且在线程终止时发出信号可能也很有用。操作系统设计人员知道这一点，因此允许在启动时将固定数量的数据复制到线程堆栈上，并在终止时发出信号。操作系统线程调用必须与语言无关，因此通用选择一个机器宽度的单词。C 将其表示为 void*，大概是为了表明它只是一些没有类型的值。

# xml - 如何使用 XSLT 转换相邻的 XML 列表

> ID：10457365
> 
> 赞同：0
> 
> 时间：2012-05-04T23:28:46.497
> 
> 标签：xml, xslt

我一直在使用 XSLT 将一些遗留的 XML 代码清理成更清晰的格式。这是一个我还没有找到合适解决方案的案例。起始 XML 如下所示：

```
<MyPoints>
  <X_Values>
    <X>11</X>
    <X>12</X>
    <X>13</X>
  </X_Values>
  <Y_Values>
    <Y>21</Y>
    <Y>22</Y>
    <Y>23</Y>
  </Y_Values>
</MyPoints> 
```

这是我想要得到的：

```
<MyPoints>
  <Values>
    <Value X="11" Y="21" />
    <Value X="12" Y="22" />
    <Value X="13" Y="23" />
  </Values>
</MyPoints> 
```

X_Values 和 Y_Values 保证具有相同数量的元素。我也想对 3D 点执行此操作，但这应该是解决方案的一个微不足道的扩展。

如果可能的话，XSLT 1.0 会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:35:19.927

使用`position()`应该可以解决问题。相关部分：

```
<xsl:for-each select="/MyPoints/X_Values/X">
  <xsl:variable name="i"><xsl:value-of select="position()" /></xsl:variable>
  <Value X="{.}" Y="{/MyPoints/Y_Values/Y[position()=$i]}" />
</xsl:for-each> 
```

完整的样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  version="1.0"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
>
  <xsl:output
    method="xml"
    version="1.0"
    indent="yes"
    doctype-public="-//W3C//DTD XHTML 1.1//EN"
    doctype-system="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"
  />

<xsl:template match="/">
<MyPoints><Values>
<xsl:for-each select="/MyPoints/X_Values/X">
  <xsl:variable name="i"><xsl:value-of select="position()" /></xsl:variable>
  <Value X="{.}" Y="{/MyPoints/Y_Values/Y[position()=$i]}" />
</xsl:for-each>
</Values></MyPoints>
</xsl:template>

</xsl:stylesheet> 
```

# javascript - 在 JavaScript 中检查数组中 indexOf 对象（不是字符串）的最快单行方法

> ID：10457372
> 
> 赞同：1
> 
> 时间：2012-05-04T23:29:16.630
> 
> 标签：javascript, optimization, enumeration

Underscore 的`_.indexOf`方法如下所示：

```
var nativeIndexOf = Array.prototype.indexOf;

_.indexOf = function(array, item, isSorted) {
  if (array == null) return -1;
  var i, l;
  if (isSorted) {
    i = _.sortedIndex(array, item);
    return array[i] === item ? i : -1;
  }
  if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item);
  for (i = 0, l = array.length; i < l; i++) if (i in array && array[i] === item) return i;
  return -1;
}; 
```

在该方法的底部，它尝试使用本机`indexOf`实现，否则它将两者与身份运算符进行比较`===`。

标识运算符`===`适用于如下原始对象：

```
console.log("asdf" === "asdf"); // true
console.log(1 === 1); // true
console.log(1 === 1.0); // true
console.log(null === null); // true
console.log(undefined === undefined); // true 
```

但它显然不适用于两个`Object`实例，即使它们具有相同的属性和值：

```
console.log({} === {}); // false
console.log({} == {}); // false
var o = {};
console.log(o === o); // true 
```

如果数组中的项目是类型，这会使该`indexOf`方法不起作用。`Object`

`Object`问题是，在 JavaScript 中查找数组中的索引的最优化方法是什么。一种方法是针对`JSON.stringify(o)`每个项目，这在性能方面没有意义。另一种方法是调用`toString()`每个项目（如果`toString()`返回的不是`[object Object]`，就像 Node.js 的 node-native-mongodb 模块中的 ObjectID 一样，返回一个 id 字符串）。第三种解决方案，可能是最常见的，是遍历每个对象中的每个键。这些都不是真正理想的。

这个问题的推荐解决方案是什么？

# selenium - 无法使用 webdriver 找到元素

> ID：10457375
> 
> 赞同：1
> 
> 时间：2012-05-04T23:29:43.750
> 
> 标签：selenium, webdriver

我正在尝试找到一个 png 图像的选项卡。我有标签的来源。但我尝试了以下选项：

1)

```
WebElement image = driver.findElement(By.id("x", "a"));
String src = image.getAttribute("src"); 
src.contains("x.png"); 
```

2)

```
WebElement image = driver.findElement(By.name("x")); 
```

我找不到它。它也不是隐藏元素......任何输入？？？？将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:09:41.387

请试试这个方法...

当我有这种类型的图像标签并认为 id "Size50" 是唯一的

```
<img id="Size50" src="http://sp2010-sa/talk/harold/Photos/_t/Profile_jpg.jpg"/> 
```

Selenium 会以这种方式搜索...

> WebElement image=Driver.findElement(By.TagName("img")).findElement(By.id("Size50"));

上面的代码首先搜索所有图像标签，然后在图像标签中搜索具有唯一 ID“Size50”的标签。

如果 Id "Size50" 在页面上是唯一的，那么我们可以直接写如下

```
WebElement image=Driver.findElement(By.id("Size50")); 
```

# objective-c - RestKit 托管对象上下文为零

> ID：10457384
> 
> 赞同：0
> 
> 时间：2012-05-04T23:30:59.677
> 
> 标签：objective-c, ios, core-data, restkit

好的，所以我正在使用 RestKit，当涉及到 JSON + Rest 部分时，它工作得很好，但实现 Core Data 却非常令人毛骨悚然。

本质上，我有一个包含 RKObjectManager 的 DaoManager 单例。从我的单身人士中：

1.  我通过 RestKit 将一些对象加载到 CoreData 中，并使用有效的 ManagedObjectContext （每个）取回有效的 NSManaged 对象。
2.  我将这些对象保存到一个实例数组中，然后对一些非托管对象调用 NSOperation。
3.  NSOperation 在主线程上的 Singleton 上调用回调方法，我可以看到我的 NSManaged 对象仍然可用，但从它们内部，ManagedObjectContext 现在是 nil/null。

这对我的影响是，当我第二次尝试修改这些对象的任何属性时，我得到一个 CoreData 异常，我相信这是因为 MOC 现在为零。

注意：RKObjectManager 和 RKObjectstore 在整个过程中仍然有效。

有没有其他人遇到过这个？RestKit 设置的 MOC 的问题是它不是真正可见的。它应该以这种方式自己处理所有事情。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:39:38.610

好吧，我最终放弃了 RestKit + CoreData，因为我无法让它工作。

相反，我继续使用 Restkit 从 JSON 映射对象，但随后我使用自己的 Core Data 对象将一些重要属性保存到本地数据存储（即图像）。

# php - Foreach 循环只循环一次？

> ID：10457389
> 
> 赞同：1
> 
> 时间：2012-05-04T23:31:24.267
> 
> 标签：php, loops, foreach

我的 foreach 循环打开多个文件时遇到问题。

我的 foreach 循环只为第一个项目编号运行一次。foreach 循环运行然后转到“api.php”页面但随后停止并且不返回到 foreach 循环以获取下一个项目编号。我如何告诉它遍历我数据库中的所有项目编号？

我会以某种方式使用 cURL 吗？

谢谢

这是我的代码：

```
$itemnumber = array("".$result['item_number']."");

foreach ($itemnumber as $item_number) {

echo "<form method=\"post\" action=\"api.php\" name=\"ChangeSubmit\" id=\"ChangeSubmit\">";
echo "<input type=\"text\" name=\"item_number\" value=\"{$item_number}\" />";

echo "<script type=\"text/javascript\">
function myfunc () {
var frm = document.getElementById(\"ChangeSubmit\");
frm.submit();
}
window.onload = myfunc;
</script></form>";

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:33:16.940

看起来不错，`foreach`但如果你想让它遍历多个数字，你需要提供多个。现在您只提供一个号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:46:05.410

实际上，您的数组中只有一项。所以它只循环一次。

您的代码`$itemnumber = array("".$result['item_number']."");`将转换为

```
 $itemnumber = array($result['item_number']); 
```

因为，您提供的双双引号在代码中也没有意义。所以，最后数组将只有一项。

# java - Java - 在多个数组中查找重复条目

> ID：10457399
> 
> 赞同：0
> 
> 时间：2012-05-04T23:32:51.207
> 
> 标签：java, arrays

我希望在一堆点数组中找到唯一点（即删除所有重复项并查看剩下的内容）。

这是我尝试过的代码：

```
int numCount = 0;
    for (int x = 0; x < ALLARRAYS.length; x++) {
        for (final Point test : ALLARRAYS[x]) {
            NUMBER: for (final Point[] numbers : ALLARRAYS) {
                if (numbers == ALLARRAYS[x]) {
                    continue;
                }
                for (int i = 0; i < numbers.length; i++) {
                    if (test.equals(numbers[i])) {
                        break NUMBER;
                    } else {
                        if (i == numbers.length - 1) {
                            numCount++;
                        }
                    }
                }
            }
            if (numCount == 10) {
                System.out.println(x + "\tPoint: " + test.x + ", " + test.y + " is unique.");
            }
            numCount = 0;
        }
        System.out.println();
    } 
```

基本上，我有 11 个要检查的数组，因此 numCount 会检查 10 个要确认的数组。我的方法是循环遍历每个数组，然后循环遍历该数组中的所有点，然后循环遍历每个其他数组中的每个点。如果它看到重复，它会完全跳过整个数字。

**我的问题：**我得到错误的读数。我不确定发生了什么，但程序会吐出其他数组中已经存在的点。

**我的目标：**每个阵列作为一个整体工作。如果一个元素不满足，则跳过整个数组。我的最终结果应该是 11 个较小的数组，它们都是唯一的，以便方法可以检查每个集合的元素并确定它们都是唯一的。

注意：这些数组现在都是独一无二的，它们非常大。我正在寻找一种方法来通过创建这个小程序来消除重复项来截断它。

**我的问题：**有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:36:57.460

将所有数组条目放在一个集合中，它将跳过重复项。

请确保正确覆盖 Point 类上的 equals 方法，因为 Set 接口的实现将使用它。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:44:54.143

您的代码似乎检查*了所有*有问题的数组`Point`，包括`Point`您要查找的数组。因此，您的代码将始终找到`Point`它正在寻找的内容，而您最终将没有结果。

您可能需要执行以下操作：

```
 NUMBER: for (final Point[] numbers : ALLARRAYS) {
            if (numbers == array) {
                continue; // skip the array that contains 'test'
            }
            ...
        } 
```

这样，您将跳过包含该`test`元素的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T00:24:02.987

数组不太适合您的工作。它们不仅没有像 intersection 或 removeAll 这样的方法，而且很难改变，尤其是如果你想减小它们的大小。

为了避免这种麻烦，我`removed`通过将 x 和 y 设置为 -1 来标记一个点，一个坐标当然就足够了，但是出于对称的原因......

```
import java.util.*;
import java.awt.Point;

public class RandPoints
{
    Random r = new Random ();
    Point [][] arr;

    public void removeDuplicatesFrom2 (Point [] pa, Point [] pb) {
        for (Point p : pb) {
            if (p.x != - 1 && Arrays.asList (pa).contains (p)) {
                // System.out.println ("dup: " + p.x + " " + p.y);
                p.x = -1;
                p.y = -1;
            }
        }
    }

    // create a random point in range (0..19)(0..19)
    public Point randpoint () {
        return new Point (r.nextInt (20), r.nextInt (20));
    }

    // create 10 (default) arrays of size 100 (default)
    public void init (int arrsize, int arrcount) 
    {
        arr = new Point [arrcount][];
        for (int c = 0; c < arrcount; ++c)
        {
            Point [] points = new Point [arrsize];
            for (int s = 0; s < arrsize; ++s)
            {
                Point p = randpoint ();
                points[s] = p; 
            }
            arr[c] = points;
        }
    }

    public void unify () 
    {
        for (Point[] pac0 : arr) {
            for (Point[] pac1 : arr) 
            {
                if (pac0 != pac1)
                removeDuplicatesFrom2 (pac0, pac1);     
            }   
        }
    }

    /**
        fill arrays with duplicates by random, 
        show, delete and show again.
    */
    public RandPoints (int arrsize, int arrcount)
    {
        init (arrsize, arrcount);
        show ();
        unify (); 
        System.out.println ();
        show ();
    }

    public static void main (String args[])
    {
        int arrsize = 100;
        int arrcount = 10;
        if (args.length == 2)
        {
            arrsize = Integer.parseInt (args[0]);
            arrcount = Integer.parseInt (args[1]);
        }
        new RandPoints (arrsize, arrcount);
    }

    // visible feedback is always welcome while debugging/testing
    public void show ()
    {
        for (Point[] pa: arr) {
            for (Point point: pa)
                if (point.x != -1 && point.y != -1)
                    System.out.print (point.x + ", " + point.y + "\t");
            System.out.println ();
        }
    }
} 
```

我稍微修改了代码，以使值 (20) 的最大范围也可配置。

开始它

```
java RandPoints 16 10 10
3, 0    9, 0    6, 9    2, 3    6, 9    7, 4    9, 9    2, 5    8, 7    3, 3    9, 5    3, 7    0, 5    7, 6    0, 4    8, 1    
6, 1    2, 7    2, 5    6, 7    0, 7    5, 8    4, 2    1, 9    8, 4    5, 7    0, 2    3, 1    1, 9    2, 1    8, 0    1, 7    
5, 4    9, 7    9, 3    7, 3    1, 2    9, 6    0, 4    6, 0    3, 0    7, 7    1, 3    1, 1    5, 3    3, 8    1, 0    4, 9    
4, 7    8, 9    4, 0    0, 2    8, 7    5, 8    7, 0    1, 4    4, 9    8, 2    6, 9    9, 6    2, 1    1, 9    0, 8    6, 5    
6, 8    9, 6    1, 0    6, 9    4, 0    5, 1    2, 9    7, 3    5, 1    2, 5    6, 9    0, 9    7, 4    8, 1    5, 5    3, 4    
5, 9    0, 4    5, 4    2, 2    2, 6    7, 1    2, 0    6, 1    0, 4    9, 8    5, 7    5, 5    4, 6    9, 0    2, 8    8, 5    
8, 2    4, 2    0, 8    1, 1    0, 3    3, 4    1, 8    3, 1    6, 6    4, 1    3, 6    6, 0    1, 7    4, 8    1, 6    1, 1    
6, 2    1, 3    2, 4    0, 8    9, 0    3, 0    1, 1    3, 7    6, 2    2, 4    0, 9    3, 6    7, 2    1, 2    5, 0    8, 2    
2, 3    5, 6    7, 9    3, 0    9, 3    2, 6    4, 8    8, 7    9, 4    5, 3    0, 3    3, 0    5, 5    1, 4    6, 4    5, 2    
3, 2    4, 9    6, 9    4, 7    7, 1    0, 4    5, 8    7, 2    5, 2    5, 5    2, 1    9, 8    4, 9    6, 6    7, 7    0, 3    

3, 0    9, 0    6, 9    2, 3    6, 9    7, 4    9, 9    2, 5    8, 7    3, 3    9, 5    3, 7    0, 5    7, 6    0, 4    8, 1    
6, 1    2, 7    6, 7    0, 7    5, 8    4, 2    1, 9    8, 4    5, 7    0, 2    3, 1    1, 9    2, 1    8, 0    1, 7    
5, 4    9, 7    9, 3    7, 3    1, 2    9, 6    6, 0    7, 7    1, 3    1, 1    5, 3    3, 8    1, 0    4, 9    
4, 7    8, 9    4, 0    7, 0    1, 4    8, 2    0, 8    6, 5    
6, 8    5, 1    2, 9    5, 1    0, 9    5, 5    3, 4    
5, 9    2, 2    2, 6    7, 1    2, 0    9, 8    4, 6    2, 8    8, 5    
0, 3    1, 8    6, 6    4, 1    3, 6    4, 8    1, 6    
6, 2    2, 4    6, 2    2, 4    7, 2    5, 0    
5, 6    7, 9    9, 4    6, 4    5, 2    
3, 2 
```

# php - php PDO 与自定义 DB 类

> ID：10457406
> 
> 赞同：-1
> 
> 时间：2012-05-04T23:33:58.267
> 
> 标签：php, pdo

我想知道使用 PDO 诗句创建自己的自定义数据库类的优点，反之亦然。是的，PDO 已经开发并记录在案，但 PDO 可能会因您的不作为而更改或消失。而您的自定义数据库类需要开发，不仅是您提供的文档，而且它会经历的唯一更改是您所做的更改。我很想知道对这些主题更了解的人的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:40:33.847

“但 PDO 可能会因您的任何操作而改变或消失” 该逻辑也可以应用于整个 PHP。

我不会花时间创建自己的。它已经为您制作，记录在案并准备就绪。当/如果到了改变它的时候，那就担心它。但是，老实说，正如我之前所说，PHP 中的任何函数或类也可能会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:40:49.497

简短的回答是，为什么要重新发明轮子？PDO 开箱即用，具有许多功能，例如准备好的语句；它很好地面向对象，与数据库无关等。此外，它是推荐使用的数据库库，所以我非常怀疑它会消失，除非 PHP 与它一起使用。另外，它是一个核心扩展（用 C 语言编写），因此无论做得如何，它都会比任何用 PHP 编写的家庭版都快得多

总结：它不会消失，而且非常好。用它 ：）

http://127.0.0.1/koko/ <description>Usluga slična twitteru</description> getData(); foreach($data as $post):?> 对于 XML 文件，这是可选的（实际上是您编写的默认值），因此您可以删除它，因此可以解决这种情况下的问题。 phpxmlescapingshorthand 4 2 回答 2 This answer is useful 4 你可以'; ?> 于 2012-05-04T23:36:43.683 回答 This answer is useful 2 对于 XML 文件，这是可选的（实际上是您编写的默认值），因此您可以删除它，因此可以解决这种情况下的问题。 于 2012-05-04T23:36:22.883 回答 Related 2 javascript - Javascript验证：返回false不起作用，表单仍在提交 1 validation - Bootstrap Nod 验证插件和 iframs 1 excel - 没有 VBA 的动态 Excel 2007 仪表板 2 java - 循环？我需要弄清楚如何解决这个问题。 1 r - 在 R 中应用 sigma 函数 1 ruby-on-rails - Rails - has_many 关系导致 NoMethodError 4 java - 使用未定义数量的参数格式化字符串 1 ios - 从包含 UITableView 中多个单元格的行中删除选定的图像 2 regex - 删除 bash 中多个参数的尾部斜杠 1 php - 将 Html 点击重定向到其他页面的特定区域 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# php - 逃跑 我正在尝试require()在 php 中使用我的 rss 提要模板。不幸的是，我需要在我正在使用的服务器上启用速记标签。 我必须开始我的 rss并并让 php 误以为他必须解析那行代码。 有没有办法“逃脱”？ 这只是我试图包含在主 php 文件中的 rss 模板的完整代码： <rss version="2.0"><channel><title>Kokodakalo!</title> <link>http://127.0.0.1/koko/ <description>Usluga slična twitteru</description> getData(); foreach($data as $post):?>   </channel> </rss> 对于 XML 文件，这是可选的（实际上是您编写的默认值），因此您可以删除它，因此可以解决这种情况下的问题。 phpxmlescapingshorthand 4 2 回答 2 This answer is useful 4 你可以'; ?> 于 2012-05-04T23:36:43.683 回答 This answer is useful 2 对于 XML 文件，这是可选的（实际上是您编写的默认值），因此您可以删除它，因此可以解决这种情况下的问题。 于 2012-05-04T23:36:22.883 回答 Related 2 javascript - Javascript验证：返回false不起作用，表单仍在提交 1 validation - Bootstrap Nod 验证插件和 iframs 1 excel - 没有 VBA 的动态 Excel 2007 仪表板 2 java - 循环？我需要弄清楚如何解决这个问题。 1 r - 在 R 中应用 sigma 函数 1 ruby-on-rails - Rails - has_many 关系导致 NoMethodError 4 java - 使用未定义数量的参数格式化字符串 1 ios - 从包含 UITableView 中多个单元格的行中删除选定的图像 2 regex - 删除 bash 中多个参数的尾部斜杠 1 php - 将 Html 点击重定向到其他页面的特定区域 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10457409
> 
> 赞同：2
> 
> 时间：
> 
> 标签：php, xml, escaping, shorthand

我正在尝试`require()`在 php 中使用我的 rss 提要模板。不幸的是，我需要在我正在使用的服务器上启用速记标签。

我必须开始我的 rss`<?xml version="1.0" encoding="UTF-8" ?>`并`<? ... ?>`让 php 误以为他必须解析那行代码。

有没有办法“逃脱”？

这只是我试图包含在主 php 文件中的 rss 模板的完整代码：

```
<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">

    <channel>
    <title>Kokodakalo!</title>
    <link>http://127.0.0.1/koko/</link>
    <description>Usluga slična twitteru</description>
        <?php $data = $controller->getData(); foreach($data as $post):?>
        <?php require('views/Rss/item.part.v.htm');?>
        <?php endforeach;?>
    </channel>

    </rss>
</xml> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T23:36:43.683

你可以`<?php echo '<?xml version="1.0" encoding="UTF-8" ?>'; ?>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T23:36:22.883

对于 XML 文件，这`<?xml version="1.0" encoding="UTF-8" ?>`是可选的（实际上是您编写的默认值），因此您可以删除它，因此可以解决这种情况下的问题。

# ruby-on-rails - Ruby 和 SQL Server

> ID：10457411
> 
> 赞同：0
> 
> 时间：2012-05-04T23:35:06.410
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

我连接到 SQL Server 而不进行任何 ODBC 连接。我来自.NET，所以我正在寻找具有集成安全性的连接字符串之类的东西。

我不知道这里的连接设置有什么问题。请帮忙！

```
development:
 adapter: sqlserver
  database: odbc
   dsn: Driver={SQL Native Client};Server=.;Database=RubyDemo;Trusted_Connection=yes;
   pool: 5
   timeout: 5000   
 test:
  adapter: sqlserver
   database: odbc
    dsn: Driver={SQL Native Client};Server=.;Database=RubyDemo;Trusted_Connection=yes;
      pool: 5
     timeout: 5000 

      production:
      adapter: sqlserver
          database: odbc
        dsn: Driver={SQL Native Client};Server=.;Database=RubyDemo; Trusted_Connection=yes;
 pool: 5
      timeout: 5000

 ** Invoke db:migrate (first_time)
 ** Invoke environment (first_time)
 ** Execute environment
 ** Invoke db:load_config (first_time)
 ** Invoke rails_env (first_time)
  ** Execute rails_env
  ** Execute db:load_config
 rake aborted!
couldn't parse YAML at line 21 column 12
c:/Ruby192/lib/ruby/1.9.1/psych.rb:148:in `parse'
c:/Ruby192/lib/ruby/1.9.1/psych.rb:148:in `parse_stream'
c:/Ruby192/lib/ruby/1.9.1/psych.rb:119:in `parse'
c:/Ruby192/lib/ruby/1.9.1/psych.rb:106:in `load'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/application   /configuration.rb:115:in `database_configuration'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record   /railtie.rb:75:in `block (2 levels) in <class:Railtie>'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:42:in `each'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/base.rb:721:in `<top (required)>'
 c:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/railties/databases.rake:6:in `block (2 levels) in <top (required)>'
 c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
 c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
 c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
 c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
   c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
         c:/Ruby192/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
       c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
     c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
      c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
     c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
     c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
   c:/Ruby192/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
      c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
    c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
   c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
     c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
   c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
  c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
    c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
 c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
  c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
   c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
  c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
  c:/Ruby192/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
  c:/Ruby192/bin/rake:19:in `load'
  c:/Ruby192/bin/rake:19:in `<main>'
  Tasks: TOP => db:migrate => db:load_config 
```

![在此处输入图像描述](../Images/fae53a326d586a1daad8dcecd4a6e5af.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T02:57:37.783

您的 YAML 中有缩进问题。 `production`缩进不应超过`test`.

# vb.net - 如何将字典（集合）对象写入文件（VB .Net 2010）

> ID：10457414
> 
> 赞同：1
> 
> 时间：2012-05-04T23:35:32.343
> 
> 标签：vb.net, collections, dictionary, vb.net-2010

我正在尝试将字典集合写入文件。

集合的结构如下：

```
GlobalCollection    (Collection of TestCollection)
    (0)
    [KEY]
    [Value]
    - TotalGlobal_W_Count    (Integer)
    - TotalGlobal_I_Count    (Integer)
    - TotalGlobal_F_Count    (Integer)
    TestCollection    (Dictionary - Key, Value)
        (0)
        [KEY]
        [Value]
        - NumberOfTests        (Integer)
        - TestCollectionName    (String)
        - TypesOfTests        (ArrayList)
        ResultsCollection    (Dictionary - Key, Value)
            (0)
            [KEY]
            [Value]
            - TotalFcount    (Integer)
            - TotalIcount    (Integer)
            - TotalWcount    (Integer)
            - ID        (String)
            - TestFolderType(String)
            - TestPassed    (Boolean)
            - FullLog    (Array)
            ResultsCollection    (Dictionary - Key, Value)
                (0)
                [KEY]
                [Value]
                - LineNumber    (Integer)
                - MessageType    (String)
                - ResultString    (String) 
```

我想将上述所有变量写入文本文件，同时保持层次结构格式。（注意每个集合对象中可以有多个元素）

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:43:33.913

将其序列化为 Xml。[这是一个回答该主题的 StackOverflow 问题](https://stackoverflow.com/questions/3671259/how-to-xml-serialize-a-dictionary)。一个特别好的阅读是@John Saunders 在评论中的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T13:57:22.830

比 xml 更快更小，如果您不打算解析/...序列化文件，则使用 BinaryFormater ：

```
Dim MyFormatter As New BinaryFormatter()
Dim MyFile As New FileStream("Serialized.ser", FileMode.Create, FileAccess.Write, FileShare.None)
MyFormatter.Serialize(MyFile, TheObjectIWantToSerialize)
MyFile.Close() 
```

# jsoup - 使用 JSoup 提取图像 src

> ID：10457415
> 
> 赞同：7
> 
> 时间：2012-05-04T23:35:34.617
> 
> 标签：jsoup

我正在尝试使用 jsoup 从该网页中提取所有图片网址？任何人都可以提供有关如何做到这一点的帮助吗？所有标签的格式都是这样的，但我只需要 src 图像，不需要 ajaxsrc：

```
<IMG ajaxsrc="/pics32/160/MP/MPYXBXTSYVKAKJQ.20110918032436.jpg" src="http://image.cdnllnwnl.xosnetwork.com/pics32/160/MP/MPYXBXTSYVKAKJQ.20110918032436.jpg"> 
```

这是链接： [http ://www.ncataggies.com/PhotoAlbum.dbml?DB_OEM_ID=24500&PALBID=417884](http://www.ncataggies.com/PhotoAlbum.dbml?DB_OEM_ID=24500&PALBID=417884)

这是格式吗？

```
 Document doc = null;
    try {
        doc = Jsoup.connect(articleLink).timeout(10000).get(); 
    } catch (IOException ioe) {
        return null;
    }
    Element content = doc.getElementById("div.thumb-image preview");
    Elements links = content.getElementsByAttribute("IMG");
    for (Element link : links) {
      String source = link.attr("src");
      Elements imageLinks = link.getElementsByAttribute(source);
      for(Element imageLink: imageLinks){
          //imageLink = picture link?
      }

} 
```

好像不是这样。我的代码中有打印语句，它们没有受到影响。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T12:39:39.620

您应该能够执行以下操作来获取所有 img 标签：

```
for (Element e : doc.select("img")) {
    System.out.println(e.attr("src"));
} 
```

这应该选择所有 img 标签，然后获取 src 属性并打印到控制台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:43:03.507

假设你已经有了这个 IMG 的元素，试试这个：

字符串源 = img.attr("src");

这个 attr 方法继承自 Node 类

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:13:31.060

```
Document document = Jsoup.connect(" http://www.ncataggies.com/PhotoAlbum.dbml?DB_OEM_ID=24500&PALBID=417884").get();

        Elements elements =document.getElementsByTag("IMG");
        for(int i=0;i<elements.size();i++)
        {
            System.out.println("Sources of "+ i +":"+elements.get(i).attr("src"));
        } 
```

# c++ - 内存感知和大数据

> ID：10457419
> 
> 赞同：1
> 
> 时间：2012-05-04T23:35:57.440
> 
> 标签：c++, memory, memory-management

我目前正在开发一个使用大量文本的项目（数百 MB 到几 GB 的文本 - DBpedia 数据集）。为了节省空间，我将字符串映射到数字并仅在需要打印内容时才使用字符串。为了加快处理数据的算法，我设计了一个`Cache`用作键值缓存的类。当然，问题是当程序运行较长时间时，缓存会变得非常大。

我目前管理它的方式是将缓存限制为特定数量的条目。该解决方案有效，但效果不佳。一种更灵活的方法是对所有缓存设置一些内存限制，当达到限制时，禁用缓存甚至清空一些缓存，具体取决于它们的重要性和大小。

我正在考虑实现一个 sizeB() 方法，该方法将以字节为单位返回缓存大小，以便每个实例都可以报告它正在使用多少内存。但这当然不能解决何时停止缓存的问题……我可能不得不手动跟踪所有内存使用情况。也许一些`CacheFactory`所有缓存都已注册并且在达到限制时也被清空的单身人士？

我想知道是否有一些“标准”技术可以做这样的事情。我应该搜索任何成语/模式吗？

此外，最好自己跟踪内存使用情况（似乎更便携但也更费力）或使用一些技术，如在 linux 上读取 /prco/pid 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:27:35.630

Yes, there are standard techniques for caching and memory rebalancing. The simplest approach would follow what you're thinking of doing - create a cache 'factory' or a 'manager'. It would allocate cache objects on demand, each objects having a size limit (think of it as a CPU cache line, which has a preset size of 64 bytes). Knowing only the number of cache objects allocated the manager would be able to roughly estimate the amount of used memory and compare it to a total_max_limit which it would know based on the machine it runs on and the type of the OS and so on. So when the total_max_limit is hit and some cache objects need to be freed, the most commonly used approach is LRU (choosing a least recently used cache object to destroy). To implement this you would store pointers to cache objects inside the manager in a deque and when an cache object gets accessed it tells the manager (through the pointer in the cache object structure) to 'mark-as-accessed' meaning to move the pointer to this cache object to the front of the deque. This means that the last pointer in the deque (the *tail) references the least recently used cache object. And factory.rebalance() would just pop_back and free the object returned.

There're other algorithms, but LRU is the most commonly used one. Priority caching could be implemented using it as well. What you'd want is to create several 'cache managers' and distribute their total_max_limits so that the higher priority one get more memory and lower priority ones get less and less and less, what you'll get as a result is that lower priority stuff will be evicted faster and more higher priority stuff will reside in memory/cache. This approach might perform better than calculating some weights-based formula each time for each cache to choose how far from the head of the deque this particular cache object should be moved to.

# requirejs - RequireJS 模块版本控制

> ID：10457429
> 
> 赞同：2
> 
> 时间：2012-05-04T23:37:07.537
> 
> 标签：requirejs, commonjs

我一直在使用具有以下模式的 RequireJS 创建模块：

```
// File: fancy-function.js
define(function() {
  return function() {
    return foobar;
  }
}); 
```

然后按如下方式加载它们：

```
// File: main.js
require(["fancy-function"], function(fancyFunction) {
  alert("Fancy function: " + fancyFunction());
}); 
```

**有没有办法对我的模块进行版本控制？** 特别是，我想

*   为我创建的每个模块分配一个版本号
*   调用`require`时，需要最低版本或特定版本

所以想象一下，我从 fancy-function.js 的 0.1 版开始，并且正在将其更新到 0.2 版。我对需要版本 0.2 的 main.js 进行了更改。我希望能够保证在加载模块之前我至少拥有最低版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:11:55.790

你试过这个：[http](http://requirejs.org/docs/api.html#multiversion) ://requirejs.org/docs/api.html#multiversion吗？

诀窍是将 require.config 的返回值分配给预定义的用户变量（在此示例*reqOne*和*reqTwo 中*），然后根据您要使用的版本将这些变量用作*require函数。*

# ajax - 跨域 AJAX 调用和 Access-Control-Allow-Origin

> ID：10457430
> 
> 赞同：2
> 
> 时间：2012-05-04T23:37:23.137
> 
> 标签：ajax, csrf

我知道您不允许进行跨域 Ajax 调用，但为什么我可以对 facebook（或 twitter 或其他）的 oauth API 进行跨域 ajax 调用？

这是否与以下有关？

```
"Access-Control-Allow-Origin: *" 
```

允许所有访问都像这种不好的做法吗？有没有更好的方法只允许您授权的人？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:16:49.617

[*Access-Control-Allow-Origin*响应头字段](http://www.w3.org/TR/cors/#access-control-allow-origin-response-header)是[跨域资源共享](http://www.w3.org/TR/cors/)的一部分，它允许在某些条件下使用 XHR 进行跨域请求，这些条件可以由请求发送到的服务器控制。

在这种特殊情况下，`Access-Control-Allow-Origin: *`意味着服务器允许来自任何来源的请求。这基本上意味着该资源是公开可用的并且不支持凭据。

但是由于您希望将访问权限限制为仅授权用户，您不能使用`*`. 相反，您需要返回`Origin`标头字段值（请参阅[第 6.1 节](http://www.w3.org/TR/cors/#resource-requests)）。如果客户端已经拥有凭据但尚未请求资源，您还需要支持[预检请求](http://www.w3.org/TR/cors/#resource-preflight-requests)，以协商允许客户端发送哪些信息。

# html - 将 dom 节点重新分配给不同的 dijit 容器

> ID：10457437
> 
> 赞同：0
> 
> 时间：2012-05-04T23:38:17.483
> 
> 标签：html, dojo

我正在尝试从选项卡容器视图切换到标题窗格视图。我正在使用“cPane”类引入所有 dom 对象。最初我分配为 dijit.layout.ContentPane，当我点击切换按钮时，我试图重新分配给 dijit.TitlePane。

似乎 dom 元素没有保留其属性。我已经尝试了所有“销毁”方法，但是当我将它们分配给 TitlePane 时，它​​们是空白的。如何在不丢失属性的情况下重新分配 dom 节点？谢谢。

这是我的代码：http: [//jsfiddle.net/afarris/gFXnH/11/](http://jsfiddle.net/afarris/gFXnH/11/)

```
dojo.require("dojo.parser");
dojo.require("dijit.form.Button");
dojo.require("dijit.layout.TabContainer");
dojo.require("dijit.layout.ContentPane");
dojo.require("dijit.TitlePane");

dojo.addOnLoad(function() {

dojo.parser.parse("widget");

var cc = dojo.byId("contentContainer");

dojo.query(".cPane").forEach(function(n){
   new dijit.layout.ContentPane({
        title: dojo.attr(n, "title")
    }, n);
});

var dtc = new dijit.layout.TabContainer({
   style: "height:100px; width: 100%;"
}, cc);

dtc.startup();    

var tabMode = true;

new dijit.form.ToggleButton({
    showLabel: true,
    checked: false,
    onChange: function(val) {
        if (tabMode == true) {
            dtc.destroyDescendants(true);
            dojo.query(".cPane").forEach(function(n){
            console.log('found contentPane');
                new dijit.TitlePane({
                    title: dojo.attr(n, "title"), open: "true"
                }, n), cc;
            });            
        }

    },
    label: "toggle"
},
"viewToggle");    

});

<div class="tundra">
<div id="widget">
<button id="viewToggle"></button>
<div id="contentContainer">
    <div class="cPane" title="First" style="width: 100%; height: 100px">test</div>
    <div class="cPane" title="Second" style="width: 100%; height: 100px"><p>demo</p></div>
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:19:13.787

当您调用 .destroyDescendants 时，您正在破坏选项卡容器，这会破坏内容窗格，从而破坏您原来的 .cPane div。因此，它们不能作为 TitlePanes 放入。

当您构建初始 ContentPane 时，您将*.cPane*节点*放入*您的 ContentPanes（而不是在您的 ContentPane 中），因此当您销毁选项卡容器时它们会消失。

因此，您需要在销毁内容之前将内容从内容窗格中取出。如果您将内容*放入*内容窗格而不是将内容放入内容窗格，这可能不会那么令人困惑。（当您创建 TitlePanes 时也是如此。）然后您可以使用“place”将您的内容从 ContentPane 移动到 TitlePane（例如[http://dojotoolkit.org/documentation/tutorials/1.7/dom_functions/](http://dojotoolkit.org/documentation/tutorials/1.7/dom_functions/)）

我不太确定你想要达到什么目标，所以回答起来有点棘手。

# ruby-on-rails - Ruby on Rails 3 教程

> ID：10457439
> 
> 赞同：2
> 
> 时间：2012-05-04T23:38:22.170
> 
> 标签：ruby-on-rails

我正在阅读Michael Hartl在[http://ruby.railstutorial.org/上的教程。](http://ruby.railstutorial.org/)

我在第六章，特别是代码清单 6.27，如下所示：

```
 require 'spec_helper'

    describe User do

      before do
        @user = User.new(name: "Example User", email: "user@example.com", 
                         password: "foobar", password_confirmation: "foobar")
      end

      subject { @user }

      it { should respond_to(:name) }
      it { should respond_to(:email) }
      it { should respond_to(:password_digest) }
      it { should respond_to(:password) }
      it { should respond_to(:password_confirmation) }

      it { should be_valid }
    end 
```

现在用户对象看起来像这样：

```
 class User < ActiveRecord::Base
      attr_accessible :email, :name, :password, :password_confirmation
      before_save { |user| user.email = email.downcase }

      validates :name, presence: true, length: {maximum: 50}
      VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
      validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }, uniquenes  
      {case_sensitive: false}
    end 
```

User 对象有六个属性：id、name、email、created_at、updated_at、password_digest。password_digest 是存储散列密码的地方。但正如您所见，密码和密码确认字段不在数据库中。只有 password_digest 是。作者声称我们不需要将它们存储在数据库中，而只是在内存中临时创建它们。但是当我从 rspec 测试运行代码时：

```
 @user = User.new(name: "Example User", email: "user@example.com", 
                     password: "foobar", password_confirmation: "foobar") 
```

我收到一条错误消息，告诉我字段密码和密码确认未定义。我该如何解决这个问题？

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T23:41:05.813

`attr_accessible`只是告诉 Rails 允许在批量分配中设置属性，如果属性不存在，它实际上不会创建属性。

你需要使用`attr_accessor`for`password`和`password_confirmation`因为这些属性在数据库中没有对应的字段：

```
class User < ActiveRecord::Base
  attr_accessor :password, :password_confirmation
  attr_accessible :email, :name, :password, :password_confirmation
  ...
end 
```

# c++ - 实现嵌套模板函数

> ID：10457442
> 
> 赞同：2
> 
> 时间：2012-05-04T23:38:55.610
> 
> 标签：c++, templates

我在模板类中有一个模板类。我可以轻松地内联实现成员函数，但在我的特定情况下，我遇到了前向声明问题，因此被迫在声明后实现它——我意识到我已经忘记了如何去做。

如果这个小例子可以编译（不移动定义内联）我的问题将得到回答：

```
#include <iostream>

template <typename T, typename V>
struct Outer {

    template <int Count>
    struct Inner {
        void printer() const;
    };

};

template <typename T, typename V, int Count>
inline void Outer<T, V>::Inner<Count>::printer() const {
    std::cout << "Oh hai. I'm inner<" << Count << ">" << std::endl;
}

int main() {
    Outer<int, int>::Inner<3> i;

    i.printer();

    return 0;
} 
```

编辑：修复了 Stuart 修复的不相关的错别字（以帮助使答案更清晰）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:00:53.293

以下编译并适用于 g++ 4.2.1。（它也可以使用在线 Comeau 编译器进行编译，值得一提。）关键更改是 (a) 始终`Outer`正确拼写，(b) 分离出两组模板参数，以及 (c) 更改`Counter`为`Count`.

```
#include <iostream>

template <typename T, typename V>
struct Outer {

    template <int Count>
    struct Inner {
        void printer() const;
    };

};

template <typename T, typename V>
template <int Count>
void Outer<T, V>::Inner<Count>::printer() const {
    std::cout << "Oh hai. I'm inner<" << Count << ">" << std::endl;
}

int main() {
    Outer<int, int>::Inner<3> i;

    i.printer();

    return 0;
} 
```

# c++ - 如何在二维数组上随机放置 2 个唯一点？

> ID：10457446
> 
> 赞同：1
> 
> 时间：2012-05-04T23:40:27.407
> 
> 标签：c++

挑选本身很容易，但我无法确保我不能将点放在同一个地方。我当然可以重新随机，但有更好的方法吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:20:59.683

您可以通过将 2D 索引*x,y*线性化为1D *i*来做到这一点。

假设您有一个*MxN*大小的二维数组。

*在[0, MxN)*中生成一个随机整数：

```
int i1 = rand() % (M * N); 
```

您的二维数组索引将是：

```
int x1 = i1 % M;
int y1 = i1 / M; 
```

现在生成第二个 1D 索引，该索引覆盖 2D 数组，但不是您之前点击的那个。您可以通过在*[0, MxN-1)*中生成一个随机数并通过第一个生成的数字循环这个一维索引来做到这一点：

```
int i2 = (rand() % (M * N - 1) + i1 + 1) % (M * N); 
```

*当然，当MxN*不是*1x1*时，这两个 1D 索引总是不同的。

您的第二对二维索引类似：

```
int x2 = i2 % M;
int y2 = i2 / M; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T00:34:59.190

从 N 个可能的位置随机选择 K 个索引相当于首先随机洗牌数组，然后取前 K 个索引。如果你用 c++ 编程（这是你作为标签给出的），它可以很简单：

首先，让你的二维数组变平，比如说它存储在一个向量中：vector elems;

```
#include <vector>
#include <algorithm>
using namespace std;

.... initialize elems to whatever you want, here all zeros ......

vector<int> elems (N*M, 0);

// assigning your indices from 0 to elems.size()-1
vector<int> index (elems.size());
for (int i=0; i<index.size(); i++)
{
    index[i] = i;
}

// now random permute
random_shuffle (index.begin(), index.end());

// now assign the elements to whatever you want, here assign them to 1
elems[index[0]] = 1;
elems[index[1]] = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T00:24:40.600

junjanes 几乎有一个解决方案，但实际上并不能阻止两次生成相同的索引。

以这种方式生成 i2：

```
int i2 = rand() % (M * N - 1);
if (i2 >= i1) ++i2; 
```

# sql - 为什么聚合函数会限制记录

> ID：10457448
> 
> 赞同：0
> 
> 时间：2012-05-04T23:40:33.197
> 
> 标签：sql, select, limit, aggregate-functions

这听起来很愚蠢，但我从来不明白为什么聚合函数将返回的记录限制为 1。除了任何实际原因，这只是为了知道。

```
id
1 
2
3
4 
```

现在`SELECT id FROM table`产量

```
id
1 
2
3
4 
```

如果我这样做`SELECT id, id, 1 AS p FROM table`了

```
id    id p
1     1  1
2     2  1
3     3  1
4     4  1 
```

所以接下来我假设`SELECT id, MAX(2) AS p FROM table`收益率

```
id   p
1    2
2    2
3    2
4    2 
```

但这实际上给出了：

```
id   p
1    2 
```

1）为什么聚合函数会发生这种情况而没有给出我的预期结果？

2) 我在 MySQL 和 SQLite 中发现了这一点。所有数据库的响应都一样吗？

3）出于好奇让我问，我如何查询以获得这样的视图：

```
id   max(id)
1    4
2    4
3    4
4    4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:59:22.160

1) 您无法执行此表达式，因为 ID 不在聚合函数中。只有当它们是选择中的唯一列时，才能使用聚合函数。这是因为它们返回单个值，而其他列大多返回不止一行。

2) 我在 Access 中尝试过，但出现错误。（ID 不在聚合函数中......）。我还没有在其他数据库系统上尝试过这个。

3）您可以通过在语句末尾添加 GROUP BY ID 来获得结果。这告诉系统您要在每个 ID 实例上使用聚合函数的每个结果。这使您可以在聚合函数之外使用 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:50:19.617

1）的规范答案是：这是聚合的方式，`group by`是定义和工作的方式。

re 3) 在大多数现代 DBMS 中（只是不在 MySQL 和 SQLite 中）你可以这样做：

```
select id, 
       max(id) over ()
from your_table; 
```

这将完全返回您的预期。

要在 MySQL 中获得所需的内容，您需要使用子选择：

```
select id, 
       (select max(id) from your_table)
from your_table; 
```

# wolfram-mathematica - Gnuplot 和 Mathematica 中的颜色图

> ID：10457452
> 
> 赞同：2
> 
> 时间：2012-05-04T23:41:00.983
> 
> 标签：wolfram-mathematica, gnuplot

我有一个包含三列的数据文件。我想绘制 (1st, 2nd) 并使用 3rd 来生成颜色图。也就是说，平原中的每个点都采用取决于第三列中的值的颜色。

使用 Gnuplot，我可以轻松做到这一点：

```
gnuplot> set palette rgbformulae 33,13,10
plot "output.dat" using 1:2:3  with points palette 
```

对于一组数据，我得到如下信息： ![在此处输入图像描述](../Images/20d266324f73581aa91089f7fe620d99.png)

现在，在 Mathematica 中有没有一种直接的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T11:39:36.130

您可以从图形基元构造它：

```
data = RandomReal[1, {20, 3}];

(* rescale 3rd column to be between 0 and 1, if needed *)
data[[All, 3]] = Rescale[data[[All, 3]]];

Graphics[{PointSize[.03], {ColorData["ThermometerColors"][#3], Point[{#1, #2}]} & @@@ data}] 
```

![数学图形](../Images/01b35ef069d4b1273fe9513912bb81da.png)

关于彩条：

内置彩条功能并不出色。[你可以在这里](http://reference.wolfram.com/mathematica/PlotLegends/tutorial/PlotLegends.html)阅读它。[这里](http://www.walkingrandomly.com/?p=24)有一个替代实现。 [我的问题在这里](https://mathematica.stackexchange.com/questions/2058/sizing-cells-in-a-graphicsgrid-graphicsrow)也可能有用。

# html - 如何实现可切换的网格/表格视图？

> ID：10457454
> 
> 赞同：1
> 
> 时间：2012-05-04T23:41:09.417
> 
> 标签：html, css, datagrid, html-lists

我一直在实现一些内容的网格视图 - 我将它实现为真正的无序列表，以获得漂亮的块状视觉外观。现在我的任务是实现相同的数据，但作为一个表。您也可以对这些数据执行一些操作。该图旨在显示切换，但列表可以更长。

> ![网格/表格视图](../Images/d7c65a93fe0cd07e7f74913091e2e809.png)

现在，我有一种感觉，我可以使用现有的无序列表结构，并向其中添加元素，然后“伪造”一个表格视图，这实际上看起来并不难。或者我可以换一种方式，将所有内容更改为表格视图，然后使用 CSS 实现网格视图。

我的问题是，有什么方法可以做到这一点？我可以加倍我的标记 - 实现两者，然后在两者之间切换。但是在一个 AJAX 繁重的应用程序中，我做了两次 DOM 操作来添加这些东西。

是否有能够像这样切换视图的最佳实践？我正在寻找想法和工作示例，尤其是。

* * *

我已经用一个显示无序列表作为基础[的 jsFiddle更新了它。](http://jsfiddle.net/artlung/RLqw2/)有没有人有任何使用表格作为基础的示例 CSS？

 `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:10:55.100

好吧，没有人接受我以 - 为中心的方法来做这`table`件事，所以下面是一个`ul>li`以中心为中心的方法的代码：

**HTML：**

```
<div class="controls">
    <a href="#" class="list active">List</a>
    <a href="#" class="grid">Grid</a>
</div>

<div id="wrapper">
<ul class="list">
    <li class="header"><h2 class="name">Name</h2>
        <p class="date">Start Date</p>
        <p class="title">Title</p>
        <div class="image">Image</div></li>
    <li class="even"><h2 class="name">Adam Ant</h2>
        <p class="date">1995</p>
        <p class="title">Specialist</p>
        <div class="image"><img src="http://www.placehold.it/200x200" alt=""></div></li>
    <li class="odd"><h2 class="name">Brian Box</h2>
        <p class="date">2005</p>
        <p class="title">Specialist</p>
        <div class="image"><img src="http://www.placehold.it/200x200" alt=""></div></li>
    <li class="even"><h2 class="name">Clara Clock</h2>
        <p class="date">2010</p>
        <p class="title">Manager</p>
        <div class="image"><img src="http://www.placehold.it/200x200" alt=""></div></li>
    <li class="odd"><h2 class="name">Darla Dock</h2>
        <p class="date">1996</p>
        <p class="title">Editor</p>
        <div class="image"><img src="http://www.placehold.it/200x200" alt=""></div></li>
</ul>
</div>​ 
```

**CSS：**

```
body {
    font-family: sans-serif;
}
.controls {
    text-align: right;
    width: 500px;
}
.controls a {
    background-color: #000;
    color: #fff;
    display: inline-block;
    padding: 6px;
    text-decoration: none;
}
.controls a.active {
    background-color: blue;
}

#wrapper .list li { 
    width: 500px; 
    position: relative;
    height: 30px;
}
#wrapper .list li.odd * {
    background-color: #eee;
}
#wrapper .list li.header {
    background-color: #666;
    color: #fff;
}
#wrapper .list li * {
    position: absolute;
    line-height: 1;
    top: 0;
    display: block;
    height: 30px;
}
#wrapper .list li h2.name {
    left: 0;
    width: 150px;

}
#wrapper .list li p.date {
    left: 150px;
    width: 100px;
}
#wrapper .list li p.title {
    left: 250px;
    width: 100px;
}
#wrapper .list li div.image {
    left: 350px;
    width: 150px;
}
#wrapper .list li div.image img {
    height: 20px;
    width: 20px
    margin: 0 auto;
}

#wrapper .grid li { 
    display: inline-block;
    width: 200px; 
    height: 200px;
    position: relative;
    overflow: hidden;
}
#wrapper .grid li.header {
    display: none;
}
#wrapper .grid h2.name {
    background-color: rgba(0,0,0,0.5);
    color: #fff;
    position: absolute;
    left: 0;
    top: 0;
    width: 200px;
    line-height: 2;
    height: 30px;
}
#wrapper .grid p.date {
    display: none;
}
#wrapper .grid p.title {
    display: none;
} 
```

​</p>

**JavaScript（使用 MooTools）：**

```
$$('a').addEvent('click', function(){
    $$('.controls a').toggleClass('active');
    $$('ul').toggleClass('list').toggleClass('grid');
    return false;
}) 
```

​</p>`

# c++ - 如何确保在用户单击 CPropertySheet 之前已创建 CPropertyPage？

> ID：10457455
> 
> 赞同：3
> 
> 时间：2012-05-04T23:41:14.177
> 
> 标签：c++, visual-studio, visual-studio-2010, mfc

我`CPropertySheet`在 MFC 中创建了一个基于 - 的模式对话框（使用从`CPropertySheet`/派生的 BCGSoft 类`CPropertyPage`）。当用户在其中一个中执行某个操作时`CPropertyPage`，我想启用/禁用另一个中的控件`CPropertyPage`。

这很好用，假设用户已经单击选项卡来实例化第二个`CPropertyPage`. 但是，MFC 会延迟第二个的创建，`CPropertyPage`直到它被用户激活。在这种情况下，秒内的控件`CPropertyPage`不存在，MFC 会抛出错误。

为了克服这个问题，我想`CPropertyPage`通过调用`CPropertySheet` `OnInitDialog()`. 有人可以解释如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:25:58.287

调用函数`CPropertyPage::SetActivePage()`（当然是在实际`CPropertyPage`对象上）就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:08:29.343

听起来您的数据与 UI 没有分开（一件坏事）。最好重新设计业务逻辑，将数据与 UI 分开，这样即使没有 UI，您也可以填充初始数据。

如果必须，在 OnInitDialog 中，[将活动页面设置为循环中的每个页面](http://www.codeproject.com/Articles/2090/Hacking-the-CPropertySheet)，然后激活默认页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T02:38:47.420

与其尝试立即启用控件，不如在页面的 OnActivate 方法中执行此操作。

# php - php文件无法连接到本地sock

> ID：10457456
> 
> 赞同：0
> 
> 时间：2012-05-04T23:41:16.803
> 
> 标签：php, mysql, sql, database, macos

我对 php 和 mysql 比较陌生，我的 mysql 有问题。这是我遇到的一个错误，我已经尝试了我所知道的一切。所以从错误中我只能假设它是一个套接字问题。这是错误：

```
Warning: mysql_connect() [function.mysql-connect]: Can't connect to local MySQL server through socket '/tmp/mysqld.sock' (2) in /homepages/35/d372939724/htdocs/mypetdetective.org/posting.php on line 26 
```

无法连接

这是php文件：

```
<?php

$posting_title = $_POST['post_title'];
$post_des = $_POST['post_des'];

$dbc = mysqli_connect('localhost', '__MUNGED__', '__MUNGED__' ,'__MUNGED__')
or die( 'Could not Connect' );

$query = "INSERT INTO lost_cat(title,description)".
"VALUES('$posting_title','$post_des')";

mysqli_query($dbc,$query)
or die('error in query');

mysqli_close($dbc);

echo '<b class="lom">' . $posting_title . '</b>' .'<br />';
echo '<hr />';
echo $post_des . '<br />';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:59:03.640

找到你的 my.cnf 文件，对我来说，该文件位于 /Applications/XAMPP/etc/my.cnf 此处。请注意，由于您的自定义安装，配置文件很可能在其他地方，我只是将我的位置作为示例发布:)

应该有一个 [client] 部分，在那里你应该看到一个套接字指令。确保将其设置为 /tmp/mysqld.sock。如果这不起作用，也请在 [mysqld] 部分中进行设置。重启你的mysql服务器，它应该已经启动并运行了！

下面，正是这条线的样子

```
socket      = /tmp/mysqld.sock 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:43:40.180

mysql服务器是否正在运行？从该错误的外观来看，它似乎不是。您声明您的 mac 正在向您显示它正在运行，但它从提供的信息中看起来客户端无法访问它。试试[这个以前的答案](https://stackoverflow.com/questions/4788381/getting-cant-connect-through-socket-tmp-mysql-when-installing-mysql-on-m)

您应该尝试调试的另一件事是尝试使用 mysql 命令行客户端进行连接：

```
mysql -h localhost -u root -p 
```

# mysql - 从mysql表中选择特定行

> ID：10457458
> 
> 赞同：43
> 
> 时间：2012-05-04T23:41:49.110
> 
> 标签：mysql, select, row-number

理想情况下，我需要一个等效于的查询

```
select * from customer where row_number() = 3 
```

但这是非法的。

**我不能使用自动递增的字段。**

row_number() 是需要选择的行。

我该怎么做？

编辑：嗯，我使用 iSql*plus 来练习，由于某种原因，使用 limit 和 auto_increment 是非法的。我最终创建了一个序列和一个触发器，并且每次有一个条目时都将 id 增加 1。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-05-04T23:47:19.430

您可以使用`LIMIT 2,1`而不是`WHERE row_number() = 3`.

正如[文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)所解释的，*第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数*。

请记住，它是一个基于 0 的索引。所以，如果你想要行号*n*，第一个参数应该是*n-1*。第二个参数将始终为*1*，因为您只想要一行。例如，如果您想要表格的第*56*`customer`行：

```
SELECT * FROM customer LIMIT 55,1 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T23:48:17.077

你不能像那样选择一行。您必须指定一个值为**3的字段**

这是一个有效的查询，如果您要比较的字段是`id`

```
select * from customer where `id` = 3 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-04T23:54:22.767

```
SET @customerID=0;
SELECT @customerID:=@customerID+1 AS customerID
FROM CUSTOMER ; 
```

您可以像这样从 SQL 获取数据集并将其填充到 java 数据结构（如 List）中，然后在那里进行必要的排序。（也许在类似界面的帮助下）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-22T05:00:39.017

默认情况下，SQL 表没有排序，并且从无序的行集中询问第 n 行没有任何意义，因为它每次都可能返回不同的行，除非您指定 ORDER BY：

```
select * from customer order by id where row_number() = 3 
```

（有时 MySQL 表以内部顺序显示，但您不能依赖这种行为）。然后您可以使用`LIMIT offset, row_count`, 与基于 0 的偏移量，因此行号 3 变为偏移量 2：

```
select * from customer order by id
limit 2, 1 
```

或者您可以使用`LIMIT row_count OFFSET offset`：

```
select * from customer order by id
limit 1 offset 2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T23:53:25.697

您的表需要使用唯一的 ID 字段创建，理想情况下该字段应具有 AUTO_INCREMENT 属性。例子：

```
CREATE TABLE Persons
(
P_Id int NOT NULL AUTO_INCREMENT,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
PRIMARY KEY (P_Id)
) 
```

然后您可以使用以下命令访问此表中的第三条记录：

```
SELECT * FROM Persons WHERE P_Id = 3 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T23:45:49.790

您可以在表中添加自动生成的 id 字段并通过此 id 选择

```
SELECT * FROM CUSTOMER WHERE CUSTOMER_ID = 3; 
```

# objective-c - 如何避免 Cocos2d for iOS 中类属性的内存泄漏

> ID：10457459
> 
> 赞同：0
> 
> 时间：2012-05-04T23:41:55.723
> 
> 标签：objective-c, memory-management, cocos2d-iphone

如果我不释放自动释放的对象（self.graphicsContainer），我有 cocos2d 类会产生内存泄漏。代码：

```
@property (nonatomic, retain) CCNode * graphicsContainer; // I create property

@synthesize graphicsContainer = _graphicsContainer; // I synthesize it

-(id)init 
{
    if ((self = [super init])) {
        self.graphicsContainer = [CCNode node]; // which returns autoreleased object!
    }
    return self;
}

-(void) dealloc 
{
    [self.graphicsContainer release]; // If I do not release it I get memory leak warning!
    [super dealloc];
} 
```

有谁知道我为什么要发布它？据我所知，我不应该释放自动释放的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:05:08.833

这正是我对该代码所期望的行为。因为 graphicsContainer 是一个保留属性，所以该行

```
self.graphicsContainer = [CCNode node]; // which returns autoreleased object! 
```

...将保留该节点，因此您需要在执行时将其释放到 dealloc 中。你在那里做的事情基本上没有错。

一个警告：这可能是有争议的，但由于各种原因，通常不赞成在 init 和 dealloc 中使用属性访问器。 [这个 SO question](https://stackoverflow.com/questions/192721/why-shouldnt-i-use-objective-c-2-0-accessors-in-init-dealloc)对此有更多信息（更好的是：阅读[Mike Ash](http://www.mikeash.com/pyblog/friday-qa-2009-11-27-using-accessors-in-init-and-dealloc.html)对该主题的出色分析）。

如果您属于“init/dealloc 中的属性访问器不好”阵营（我愿意），您可以将其更改为：

```
-(id)init 
{
    if ((self = [super init])) {
        _graphicsContainer = [[CCNode node] retain]; // which returns autoreleased object!
    }
    return self;
}

-(void) dealloc 
{
    [_graphicsContainer release];
    [super dealloc];
} 
```

上面的代码与您正在执行的操作完全相同，只是它没有调用属性访问器。

# javascript - 在javascript中，将标签转换为链接的最有效方法是什么？

> ID：10457461
> 
> 赞同：0
> 
> 时间：2012-05-04T23:42:02.990
> 
> 标签：javascript, jquery, html, css

假设我有一些 HTML：

```
Hello, I'm a #robot and this is my #home. 
```

我怎样才能把它变成：

```
Hello, I'm a <a href="blah.com/robot" class="tag">#robot</a> and this is my <a href="blah.com/home" class="tag">#home</a> 
```

我尝试通过遍历每个单词并进行查找/替换来使用 JQuery，但它非常昂贵。有什么更好的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T23:50:45.837

以下是可用于将哈希符号替换为链接的代码。随意尝试它，并评论您可能有的任何问题:)

```
var text = "Hello, I'm a #robot and this is my #home.";

alert(text.replace(/#([a-z0-9]+)/gi, '<a href="blah.com/$1">#$1</a>'));

// It alerts the following "Hello, I'm a <a href="blah.com/robot">#robot</a> and this is my <a href="blah.com/home">#home</a>." 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-04T23:46:49.977

jQuery 不适用于纯文本操作。我想这里最好的选择是在服务器端进行此类更改。如果不可能，一个简单的查找/替换就可以了，在这种情况下，可以使用 jQuery 来遍历包含此 HTML 的某些元素，使其访问更容易。

高温高压

# android - Android：如何使用静态 IP 连接到接入点？

> ID：10457464
> 
> 赞同：3
> 
> 时间：2012-05-04T23:42:17.520
> 
> 标签：android, networking, settings, android-networking

我尝试使用以下代码将设备设置为使用静态 ip 加入没有 DHCP 的 AP，但它似乎不适用于任何特定的 AP。设备仍然尝试获取由于缺少 DHCP 而失败的 IP 地址。

```
Settings.System.setString(getContentResolver(), "wifi_static_ip", "192.168.1.99);
Settings.System.setInt(getContentResolver(), "wifi_use_static_ip", 1);

WifiConfiguration wc = new WifiConfiguration();
wc.SSID = "SSID";
wc.preSharedKey = "key";
wc.status = WifiConfiguration.Status.ENABLED;
int netId = wifiManager.addNetwork(wc);
wifiManager.enableNetwork(netId, true); 
```

我尝试使用该线程提供的方法，但它不起作用。 [如何在 Android 3.x 或 4.x 上以编程方式配置静态 IP 地址、网络掩码、网关](https://stackoverflow.com/questions/10278461/how-to-configue-static-ip-netmask-gateway-programmatically-on-android-3-x-or-4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:24:54.060

乍一看，您的代码似乎有问题....“wifi_static_ip”，“192.168.1.99）....您在这里缺少（”）...您必须像这样写“192.168.1.99 ”。如果没有，请仔细检查是否有 IP 冲突...。您网络的子网掩码是什么...如果是 255.255.255.0，则无需提及，但如果更改，则必须提及那......希望它有帮助

# c++ - 奇怪的 C++ 错误，当添加 2 个打印语句时程序工作正常，没有它们的段错误

> ID：10457468
> 
> 赞同：2
> 
> 时间：2012-05-04T23:42:55.893
> 
> 标签：c++, segmentation-fault

我正在用 C++ 编写一些代码，这些代码必须计算大量的光线/对象交叉点，并且我遇到了一个非常奇怪的错误，我不明白。

在一些非常大的实例（很多三角形和射线）上，我的程序会出现段错误。我一直试图找出这些段错误的来源，但我被难住了。我查看了我的代码，似乎我不应该尝试从数组的末尾索引或访问空指针。我的计算机似乎也没有内存不足。当我监控它时，看起来还有几百兆字节的空闲空间。

在调试时，我尝试了以下操作：我在代码中插入了两个打印语句，试图确定导致段错误的确切交叉计算。对我来说不幸的是，当我插入打印语句并再次运行程序时，一切正常。它没有段错误。因此，如果我删除这两个打印语句并运行程序，它会出现段错误，如果我将它们保留在其中，它就可以正常工作（尽管它必须打印所有内容要慢得多）。除了删除/添加这些打印语句之外，其他所有内容都保持完全相同。

什么可能导致这种情况发生？将打印语句添加到 c++ 程序如何可能导致它没有段错误？

如果它有帮助，算法只是一个单线程，我在 Linux 中使用 g++ 编译了所有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T23:51:43.560

> 什么可能导致这种情况发生？将打印语句添加到 c++ 程序如何可能导致它没有段错误？

欢迎来到未定义的行为。

您需要用自检版本替换您的数组/指针/等，并*证明*，而不是猜测，您在这些区域没有任何错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T23:48:45.923

插入打印语句“修复”段错误这一事实清楚地表明您正在访问不应该访问的内存。

最好的办法是取出打印语句，然后通过调试器运行程序。由于您在 Linux 中工作，因此请使用 -g 标志编译您的程序并通过 gdb 运行它。它可能会准确地告诉您它在哪一行出现段错误。

# load - 可用于调试 .NET 程序集加载失败的工具

> ID：10457472
> 
> 赞同：2
> 
> 时间：2012-05-04T23:43:09.090
> 
> 标签：load, .net-assembly, fusion-log-viewer

您可以使用哪些好工具来调试具有本机依赖项的 .NET 程序集加载失败。我使用过 fusion logger (FUSLOGVW.exe) 和 ProcMon，但它们对我帮助不大。还有其他有用的工具吗？

谢谢，穆罕默德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:57:03.203

我发现唯一有用的其他工具是[Dependency Walker](http://dependencywalker.com/)。下载后，使用[本教程](http://geekswithblogs.net/WindowsEmbeddedCookbook/archive/2011/02/02/using-dependency-walker.aspx)帮助您入门。

# java - 我可以在 Java 中创建一个没有函数的线程吗？

> ID：10457473
> 
> 赞同：3
> 
> 时间：2012-05-04T23:43:20.437
> 
> 标签：java, multithreading

我需要在我的程序中一直运行一个并行函数。我不知道我的想法是否正确，但我想做的是让一段代码一直更新我的 TextArea，从服务器获取信息。

我正在使用 RMI，只有你知道。

我可以在 MainClass 中创建一个线程函数并让它一直运行吗？

或者如何创建一个线程来更新另一个类中的 TextArea？如何共享我的 TextArea？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:55:50.130

不确定我是否理解，我会假设 TextArea 表示 JTextArea 而 MainClass 是应用程序的入口点。

是什么阻止你这样做？

```
public class Updater implements Runnable {
    private JTextArea textArea;

    public Updater(JTextArea textArea){
        this.textArea = textArea;
    }

    @Override
    public void run(){
        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                            //do what you've got to do....
                textArea.setText("New Text");
            }
        });
    }

} 
```

在你的“MainClass”中是这样的：

```
public static void main(String[] args) {

    Thread myThread = new Thread(new Updater(myTextArea));
    myThread.start();

} 
```

# ios - iOS 提醒功能将如何实现？

> ID：10457476
> 
> 赞同：0
> 
> 时间：2012-05-04T23:43:55.313
> 
> 标签：ios, reminders

实现提醒功能的推荐方法是什么，它可以使应用程序处于非活动状态并在预定时间唤醒它？

在前台使用`NSTimer`似乎没问题，但用户应该能够设置提醒、关闭应用程序并执行其他操作。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:45:46.970

查看本地通知：

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

[http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/occ/cl/UILocalNotification](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/occ/cl/UILocalNotification)

# javascript - 运行的 javascript 的 setInterval() 方法是否会随着时间的推移消耗显着的处理能力？

> ID：10457478
> 
> 赞同：0
> 
> 时间：2012-05-04T23:44:23.333
> 
> 标签：javascript, browser, setinterval

我想知道`setInterval()`在浏览器中运行的多个实例的周期性（每分钟）活动是否会告诉时间或更多的劳动密集型活动实际上是否会显着影响浏览器和/或操作系统的性能。

如果它们很明显，在什么样的时间范围内？在浏览器上打开此网页的时间是几小时、几天、几周？

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:49:31.770

回答你的问题，定义的函数`setInterval()`是缓存的，所以除了性能损失之外（如果函数真的很密集），对浏览器/操作系统应该没有明显的影响。

更新：如果它们在最初几分钟内不明显（假设您的代码没有大量内存泄漏），它们应该能够无限期地运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:58:43.183

真正的问题`setInterval`是当您的任务花费的时间超过您给它的时间间隔时。我选择总是使用`setTimeout`。但如果它是一个长间隔/简单的任务，setInterval 应该没问题。

```
// update a clock 
function updateClock() {
    $('#clock').text(new Date());
}

function updateClockSetTimeout(interval) {
    updateClock();
    setTimeout(updateClockSetTimeout, interval);
}

function updateClockSetInterval(interval) {
    setInterval(updateClock, interval);
} 
```

最好的方法是存储初始运行时间，以便您可以根据此任务实际完成的时间安排下一个运行时间。

# dns - 如何设置 1 个域的 DNS 记录以使用 2 个服务器？

> ID：10457481
> 
> 赞同：0
> 
> 时间：2012-05-04T23:44:56.973
> 
> 标签：dns

例如，我有一个应用程序：`app.com`

我想有一些子域：

*   `blog.app.com`
*   `forum.app.com`
*   `etc.app.com`

我有两台 IP 地址为的服务器：

*   **服务器甲**：`127.0.0.0`
*   **服务器 B**：`127.0.0.1`

我想主持`app.com`on **`Server A`**。以及**`Server B`**.

我应该如何设置 DNS 记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:49:38.503

如果我正确阅读了您的问题，您应该能够：

```
app.com. IN A 127.0.0.0
sub.app.com. IN A 127.0.0.1
... 
```

将域的根指向服务器A，然后每个子域都可以有一个指向另一个域的指针。

# ruby - 快速FTP服务器

> ID：10457483
> 
> 赞同：6
> 
> 时间：2012-05-04T23:45:09.993
> 
> 标签：ruby, ftp, rubygems

我正在寻找一种快速、无需配置的 FTP 服务器。[与Serve](https://github.com/jlong/serve)或[Rack_dav](https://github.com/georgi/rack_dav)完全一样的东西，但对于 FTP，它可以通过运行命令来发布文件夹。有宝石或其他东西可以做这样的事情吗？

**解决方案**

基于 Wayne 的 ftpd gem，我创建了一个名为[Purvey](https://github.com/alfonsocora/purvey)的快速且易于使用的 gem 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T12:00:49.473

[ftpd](https://rubygems.org/gems/ftpd) gem 支持 TLS ，并带有文件系统驱动程序。与 em-ftpd 一样，您提供了一个驱动程序，但该驱动程序不需要做太多事情。这是一个最低限度的 FTP 服务器，它接受任何用户名/密码，并从临时目录中提供文件：

```
require 'ftpd'
require 'tmpdir'

class Driver

  def initialize(temp_dir)
    @temp_dir = temp_dir
  end

  def authenticate(user, password)
    true
  end

  def file_system(user)
    Ftpd::DiskFileSystem.new(@temp_dir)
  end

end

Dir.mktmpdir do |temp_dir|
  driver = Driver.new(temp_dir)
  server = Ftpd::FtpServer.new(driver)
  server.start
  puts "Server listening on port #{server.bound_port}"
  gets
end 
```

*注意*：此示例允许 FTP 客户端上传、删除、重命名等。

要启用 TLS：

```
include Ftpd::InsecureCertificate
...
server.certfile_path = insecure_certfile_path
server.tls = :explicit
server.start 
```

*披露*：我是 ftpd 的作者和当前维护者

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:53:41.363

看看这个 gem，一个基于 EventMachine [https://github.com/yob/em-ftpd的轻量级 FTP 服务器框架](https://github.com/yob/em-ftpd)

# android - ExpandableListFragment 在哪里设置光标扩展片段？

> ID：10457489
> 
> 赞同：0
> 
> 时间：2012-05-04T23:46:07.813
> 
> 标签：android, android-fragments, expandablelistview, expandablelistadapter

我从本网站的另一篇文章中获取了一些示例 ExpandableListFragment 代码，并通过一个 xml 文件引用了它，我从我的 Main Activity 加载到一个片段中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="horizontal">

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="salty.oaktreebrides.android.FAQ"
    android:id="@+id/Fragment1"
    android:layout_width="0px"
    android:layout_weight="1"
    android:layout_height="match_parent" />
</LinearLayout> 
```

但是我无法（新手）确定我应该如何/在哪里设置光标以提供其中的数据。代码当前触发，但正如预期的那样，我得到了 Progress Circle Spinning，因为我没有提供任何数据。我有自己的数据访问层类，可以提供光标，只是不确定如何将所有部分放在一起。我最终想从片段中的 API Demo 重新创建 ExpandableList1.java 功能，并让源是来自 sqlite 的游标。我希望这段代码能在一定程度上满足这一要求。请帮忙。

```
import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.support.v4.app.Fragment;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnCreateContextMenuListener;
import android.view.ViewGroup;
import android.view.animation.AnimationUtils;
import android.widget.AdapterView;
import android.widget.ExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.ListAdapter;
import android.widget.ProgressBar;
import android.widget.TextView;

public class ExpandableListFragment extends Fragment
    implements OnCreateContextMenuListener,
    ExpandableListView.OnChildClickListener, ExpandableListView.OnGroupCollapseListener,
    ExpandableListView.OnGroupExpandListener
    {

    static final int INTERNAL_EMPTY_ID = 0x00ff0001;
    static final int INTERNAL_PROGRESS_CONTAINER_ID = 0x00ff0002;
    static final int INTERNAL_LIST_CONTAINER_ID = 0x00ff0003;

    final private Handler mHandler = new Handler();

    final private Runnable mRequestFocus = new Runnable() {
        public void run() {
            mExpandableList.focusableViewAvailable(mExpandableList);
        }
    };

    final private AdapterView.OnItemClickListener mOnClickListener
            = new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            onListItemClick((ExpandableListView)parent, v, position, id);
        }
    };

    ExpandableListAdapter mAdapter;
    ExpandableListView mExpandableList;
    boolean mFinishedStart = false;
    View mEmptyView;
    TextView mStandardEmptyView;
    View mProgressContainer;
    View mExpandableListContainer;
    CharSequence mEmptyText;
    boolean mExpandableListShown;

    public ExpandableListFragment() {
    }

    /**
     * Provide default implementation to return a simple list view.  Subclasses
     * can override to replace with their own layout.  If doing so, the
     * returned view hierarchy <em>must</em> have a ListView whose id
     * is {@link android.R.id#list android.R.id.list} and can optionally
     * have a sibling view id {@link android.R.id#empty android.R.id.empty}
     * that is to be shown when the list is empty.
     * 
     * <p>If you are overriding this method with your own custom content,
     * consider including the standard layout {@link android.R.layout#list_content}
     * in your layout file, so that you continue to retain all of the standard
     * behavior of ListFragment.  In particular, this is currently the only
     * way to have the built-in indeterminant progress state be shown.
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final Context context = getActivity();

        FrameLayout root = new FrameLayout(context);

        // ------------------------------------------------------------------

        LinearLayout pframe = new LinearLayout(context);
        pframe.setId(INTERNAL_PROGRESS_CONTAINER_ID);
        pframe.setOrientation(LinearLayout.VERTICAL);
        pframe.setVisibility(View.GONE);
        pframe.setGravity(Gravity.CENTER);

        ProgressBar progress = new ProgressBar(context, null,
                android.R.attr.progressBarStyleLarge);
        pframe.addView(progress, new FrameLayout.LayoutParams(
                ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));

        root.addView(pframe, new FrameLayout.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

        // ------------------------------------------------------------------

        FrameLayout lframe = new FrameLayout(context);
        lframe.setId(INTERNAL_LIST_CONTAINER_ID);

        TextView tv = new TextView(getActivity());
        tv.setId(INTERNAL_EMPTY_ID);
        tv.setGravity(Gravity.CENTER);
        lframe.addView(tv, new FrameLayout.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

        ExpandableListView lv = new ExpandableListView(getActivity());
        lv.setId(android.R.id.list);
        lv.setDrawSelectorOnTop(false);
        lframe.addView(lv, new FrameLayout.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

        root.addView(lframe, new FrameLayout.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

        // ------------------------------------------------------------------

        root.setLayoutParams(new FrameLayout.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

        return root;
    }

    /**
     * Attach to list view once the view hierarchy has been created.
     */
    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        ensureList();
    }

    /**
     * Detach from list view.
     */
    @Override
    public void onDestroyView() {
        mHandler.removeCallbacks(mRequestFocus);
        mExpandableList = null;
        mExpandableListShown = false;
        mEmptyView = mProgressContainer = mExpandableListContainer = null;
        mStandardEmptyView = null;
        super.onDestroyView();
    }

    /**
     * This method will be called when an item in the list is selected.
     * Subclasses should override. Subclasses can call
     * getListView().getItemAtPosition(position) if they need to access the
     * data associated with the selected item.
     *
     * @param l The ListView where the click happened
     * @param v The view that was clicked within the ListView
     * @param position The position of the view in the list
     * @param id The row id of the item that was clicked
     */
    public void onListItemClick(ExpandableListView l, View v, int position, long id) {
    }

    /**
     * Provide the cursor for the list view.
     */
    public void setListAdapter(ExpandableListAdapter adapter) {
        boolean hadAdapter = mAdapter != null;
        mAdapter = adapter;
        if (mExpandableList != null) {
            mExpandableList.setAdapter(adapter);
            if (!mExpandableListShown && !hadAdapter) {
                // The list was hidden, and previously didn't have an
                // adapter.  It is now time to show it.
                setListShown(true, getView().getWindowToken() != null);
            }
        }
    }

    /**
     * Set the currently selected list item to the specified
     * position with the adapter's data
     *
     * @param position
     */
    public void setSelection(int position) {
        ensureList();
        mExpandableList.setSelection(position);
    }

    /**
     * Get the position of the currently selected list item.
     */
    public int getSelectedItemPosition() {
        ensureList();
        return mExpandableList.getSelectedItemPosition();
    }

    /**
     * Get the cursor row ID of the currently selected list item.
     */
    public long getSelectedItemId() {
        ensureList();
        return mExpandableList.getSelectedItemId();
    }

    /**
     * Get the activity's list view widget.
     */
    public ExpandableListView getListView() {
        ensureList();
        return mExpandableList;
    }

    /**
     * The default content for a ListFragment has a TextView that can
     * be shown when the list is empty.  If you would like to have it
     * shown, call this method to supply the text it should use.
     */
    public void setEmptyText(CharSequence text) {
        ensureList();
        if (mStandardEmptyView == null) {
            throw new IllegalStateException("Can't be used with a custom content view");
        }
        mStandardEmptyView.setText(text);
        if (mEmptyText == null) {
            mExpandableList.setEmptyView(mStandardEmptyView);
        }
        mEmptyText = text;
    }

    /**
     * Control whether the list is being displayed.  You can make it not
     * displayed if you are waiting for the initial data to show in it.  During
     * this time an indeterminant progress indicator will be shown instead.
     * 
     * <p>Applications do not normally need to use this themselves.  The default
     * behavior of ListFragment is to start with the list not being shown, only
     * showing it once an adapter is given with {@link #setListAdapter(ListAdapter)}.
     * If the list at that point had not been shown, when it does get shown
     * it will be do without the user ever seeing the hidden state.
     * 
     * @param shown If true, the list view is shown; if false, the progress
     * indicator.  The initial value is true.
     */
    public void setListShown(boolean shown) {
        setListShown(shown, true);
    }

    /**
     * Like {@link #setListShown(boolean)}, but no animation is used when
     * transitioning from the previous state.
     */
    public void setListShownNoAnimation(boolean shown) {
        setListShown(shown, false);
    }

    /**
     * Control whether the list is being displayed.  You can make it not
     * displayed if you are waiting for the initial data to show in it.  During
     * this time an indeterminant progress indicator will be shown instead.
     * 
     * @param shown If true, the list view is shown; if false, the progress
     * indicator.  The initial value is true.
     * @param animate If true, an animation will be used to transition to the
     * new state.
     */
    private void setListShown(boolean shown, boolean animate) {
        ensureList();
        if (mProgressContainer == null) {
            throw new IllegalStateException("Can't be used with a custom content view");
        }
        if (mExpandableListShown == shown) {
            return;
        }
        mExpandableListShown = shown;
        if (shown) {
            if (animate) {
                mProgressContainer.startAnimation(AnimationUtils.loadAnimation(
                        getActivity(), android.R.anim.fade_out));
                mExpandableListContainer.startAnimation(AnimationUtils.loadAnimation(
                        getActivity(), android.R.anim.fade_in));
            } else {
                mProgressContainer.clearAnimation();
                mExpandableListContainer.clearAnimation();
            }
            mProgressContainer.setVisibility(View.GONE);
            mExpandableListContainer.setVisibility(View.VISIBLE);
        } else {
            if (animate) {
                mProgressContainer.startAnimation(AnimationUtils.loadAnimation(
                        getActivity(), android.R.anim.fade_in));
                mExpandableListContainer.startAnimation(AnimationUtils.loadAnimation(
                        getActivity(), android.R.anim.fade_out));
            } else {
                mProgressContainer.clearAnimation();
                mExpandableListContainer.clearAnimation();
            }
            mProgressContainer.setVisibility(View.VISIBLE);
            mExpandableListContainer.setVisibility(View.GONE);
        }
    }

    /**
     * Get the ListAdapter associated with this activity's ListView.
     */
    public ExpandableListAdapter getListAdapter() {
        return mAdapter;
    }

    private void ensureList() {
        if (mExpandableList != null) {
            return;
        }
        View root = getView();
        if (root == null) {
            throw new IllegalStateException("Content view not yet created");
        }
        if (root instanceof ExpandableListView) {
            mExpandableList = (ExpandableListView)root;
        } else {
            mStandardEmptyView = (TextView)root.findViewById(INTERNAL_EMPTY_ID);
            if (mStandardEmptyView == null) {
                mEmptyView = root.findViewById(android.R.id.empty);
            } else {
                mStandardEmptyView.setVisibility(View.GONE);
            }
            mProgressContainer = root.findViewById(INTERNAL_PROGRESS_CONTAINER_ID);
            mExpandableListContainer = root.findViewById(INTERNAL_LIST_CONTAINER_ID);
            View rawExpandableListView = root.findViewById(android.R.id.list);
            if (!(rawExpandableListView instanceof ExpandableListView)) {
                if (rawExpandableListView == null) {
                    throw new RuntimeException(
                            "Your content must have a ListView whose id attribute is " +
                            "'android.R.id.list'");
                }
                throw new RuntimeException(
                        "Content has view with id attribute 'android.R.id.list' "
                        + "that is not a ListView class");
            }
            mExpandableList = (ExpandableListView)rawExpandableListView;
            if (mEmptyView != null) {
                mExpandableList.setEmptyView(mEmptyView);
            } else if (mEmptyText != null) {
                mStandardEmptyView.setText(mEmptyText);
                mExpandableList.setEmptyView(mStandardEmptyView);
            }
        }
        mExpandableListShown = true;
        mExpandableList.setOnItemClickListener(mOnClickListener);
        if (mAdapter != null) {
            ExpandableListAdapter adapter = mAdapter;
            mAdapter = null;
            setListAdapter(adapter);
        } else {
            // We are starting without an adapter, so assume we won't
            // have our data right away and start with the progress indicator.
            if (mProgressContainer != null) {
                setListShown(false, false);
            }
        }
        mHandler.post(mRequestFocus);
    }

    /**
     * Override this to populate the context menu when an item is long pressed. menuInfo
     * will contain an {@link android.widget.ExpandableListView.ExpandableListContextMenuInfo}
     * whose packedPosition is a packed position
     * that should be used with {@link ExpandableListView#getPackedPositionType(long)} and
     * the other similar methods.
     * <p>
     * {@inheritDoc}
     */
    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    }

    /**
     * Override this for receiving callbacks when a child has been clicked.
     * <p>
     * {@inheritDoc}
     */
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition,
            int childPosition, long id) {
        return false;
    }

    /**
     * Override this for receiving callbacks when a group has been collapsed.
     */
    public void onGroupCollapse(int groupPosition) {
    }

    /**
     * Override this for receiving callbacks when a group has been expanded.
     */
    public void onGroupExpand(int groupPosition) {
    }

//    /**
//     * Ensures the expandable list view has been created before Activity restores all
//     * of the view states.
//     * 
//     *@see Activity#onRestoreInstanceState(Bundle)
//     */
//    @Override
//    protected void onRestoreInstanceState(Bundle state) {
//        ensureList();
//        super.onRestoreInstanceState(state);
//    }

    /**
     * Updates the screen state (current list and other views) when the
     * content changes.
     * 
     * @see Activity#onContentChanged()
     */

    public void onContentChanged() {
//        super.onContentChanged();
        View emptyView = getView().findViewById(android.R.id.empty);
        mExpandableList = (ExpandableListView)getView().findViewById(android.R.id.list);
        if (mExpandableList == null) {
            throw new RuntimeException(
                    "Your content must have a ExpandableListView whose id attribute is " +
                    "'android.R.id.list'");
        }
        if (emptyView != null) {
            mExpandableList.setEmptyView(emptyView);
        }
        mExpandableList.setOnChildClickListener(this);
        mExpandableList.setOnGroupExpandListener(this);
        mExpandableList.setOnGroupCollapseListener(this);

        if (mFinishedStart) {
            setListAdapter(mAdapter);
        }
        mFinishedStart = true;
    }

    /**
     * Get the activity's expandable list view widget.  This can be used to get the selection,
     * set the selection, and many other useful functions.
     * 
     * @see ExpandableListView
     */
    public ExpandableListView getExpandableListView() {
        ensureList();
        return mExpandableList;
    }

    /**
     * Get the ExpandableListAdapter associated with this activity's
     * ExpandableListView.
     */
    public ExpandableListAdapter getExpandableListAdapter() {
        return mAdapter;
    }

    /**
     * Gets the ID of the currently selected group or child.
     * 
     * @return The ID of the currently selected group or child.
     */
    public long getSelectedId() {
        return mExpandableList.getSelectedId();
    }

    /**
     * Gets the position (in packed position representation) of the currently
     * selected group or child. Use
     * {@link ExpandableListView#getPackedPositionType},
     * {@link ExpandableListView#getPackedPositionGroup}, and
     * {@link ExpandableListView#getPackedPositionChild} to unpack the returned
     * packed position.
     * 
     * @return A packed position representation containing the currently
     *         selected group or child's position and type.
     */
    public long getSelectedPosition() {
        return mExpandableList.getSelectedPosition();
    }

    /**
     * Sets the selection to the specified child. If the child is in a collapsed
     * group, the group will only be expanded and child subsequently selected if
     * shouldExpandGroup is set to true, otherwise the method will return false.
     * 
     * @param groupPosition The position of the group that contains the child.
     * @param childPosition The position of the child within the group.
     * @param shouldExpandGroup Whether the child's group should be expanded if
     *            it is collapsed.
     * @return Whether the selection was successfully set on the child.
     */
    public boolean setSelectedChild(int groupPosition, int childPosition, boolean shouldExpandGroup) {
        return mExpandableList.setSelectedChild(groupPosition, childPosition, shouldExpandGroup);
    }

    /**
     * Sets the selection to the specified group.
     * @param groupPosition The position of the group that should be selected.
     */
    public void setSelectedGroup(int groupPosition) {
        mExpandableList.setSelectedGroup(groupPosition);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T04:03:23.970

哇，你那里的东西似乎有点大......

我不知道您的实现，但我通常将适配器设置在通常用于列表的位置（在 onCreate 或 onResume 中）。

这是我之前的做法（使用修改后的 SimpleCursorTreeAdapter）：

```
public class EventListFragment extends Fragment {

    private AttendanceDB mDbHelper;
    public static Cursor mGroupsCursor;
    private MyExpandableListAdapter mAdapter;

    private String mGroup;
    private String mChild;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.explistfragment, container, false);
        header = (TextView) v.findViewById(R.id.header1);
        header.setText(R.string.event_header);
        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        mDbHelper = new AttendanceDB(getActivity());
        mDbHelper.open();
        fillData(mGroup, mChild);  // Call to create and populate expandable list
    }

    private void fillData(String group, String child) {
        ExpandableListView lv;
        mGroupsCursor = mDbHelper.fetchGroup(group);
        getActivity().startManagingCursor(mGroupsCursor);
        mGroupsCursor.moveToFirst();
        lv = (ExpandableListView) getActivity().findViewById(R.id.explist);
        lv.setItemsCanFocus(false);
        lv.setChoiceMode(ExpandableListView.CHOICE_MODE_SINGLE);        

        mAdapter = new MyExpandableListAdapter(mGroupsCursor, getActivity(),
                R.layout.explistlayout,
                R.layout.explistlayout1,
                new String[] { "_id" },
                new int[] { android.R.id.text1 },
                new String[] { child },
                new int[] { android.R.id.text1 });
        lv.setAdapter(mAdapter);
        registerForContextMenu(lv);

    public class MyExpandableListAdapter extends SimpleCursorTreeAdapter {

        public MyExpandableListAdapter(Cursor cursor, Context context,
                int groupLayout, int childLayout, String[] groupFrom,
                int[] groupTo, String[] childrenFrom, int[] childrenTo) {
            super(context, cursor, groupLayout, groupFrom, groupTo,
                    childLayout, childrenFrom, childrenTo);
        }
        @Override
        protected Cursor getChildrenCursor(Cursor groupCursor) {
            Cursor childCursor = mDbHelper.fetchChildren(mGroup, groupCursor
                    .getString(groupCursor
                            .getColumnIndex(AttendanceDB.EVENT_ROWID)));
            getActivity().startManagingCursor(childCursor);
            childCursor.moveToFirst();
            return childCursor;
        }
    }
} 
```

希望这可以帮助！

# javascript - jqGrid 与 Zend 框架 (zfdatagrid)

> ID：10457491
> 
> 赞同：3
> 
> 时间：2012-05-04T23:46:40.693
> 
> 标签：javascript, jquery, zend-framework, jqgrid

这几天我找不到正常的答案。我希望有人能帮助我。

我在 Zend Framework 应用程序中使用 jqGrid。我希望我的应用程序中的网格可以内联编辑（[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing)）。当我不使用 ZF 并且我自己编写 jqGrid 代码（java 脚本）时 - 内联编辑工作正常。但是在使用 ZF 类“Bvb_Grid_Deploy_JqGrid”并部署网格时，ZF 会自己生成 java 脚本。我找不到正确插入js函数“onSelectRow”的ZF方法的问题。尝试使用“$grid->jqAddOnLoad($js);” 在 ZF 控制器中，但这个 java 脚本代码看起来不像示例中那样，然后网格根本没有正常加载。一定是：

```
jQuery().ready(function (){
  jQuery("#jqg_RentAsset").jqGrid(
  {
    height: 250,
     ...
    multiselect: true,
    caption: "Manipulating Array Data",
    onSelectRow: function(id)
    {
      alert(id);
    }
  }); 
```

但是会发生：

```
$(document).ready(function() {
  jQuery("#jqg_RentAsset").jqGrid(
  {
    onSelectRow: function(id)
    {
      alert(id);
    }
  });
  jQuery("#jqg_RentAsset").jqGrid(
  {
    "height":"250",
      ...
  }); 
```

也许有人知道我必须在 ZF Controller 中使用什么方法，或者我需要编写 java 脚本有多么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:03:06.627

我自己不使用 Zend Framework。所以我的建议很常见，它们独立于您使用的框架。

在下面的示例中，我将展示如何`onSelectRow`在网格上动态设置以实现对行选择的内联编辑。我想网格中已经存在其他必需的设置，如`editable: true`属性`colModel`和选项。`editurl`所以我只显示`onSelectRow`动态的设置。

第一种方法是使用`setGridParam`设置`onSelectRow`回调。对应的[demo](http://www.ok-soft-gmbh.com/jqGrid/SetOnSelectDynamically.htm)使用如下代码：

```
$(function () {
    var $grid = $("#list"),
        editingRowId,
        myInlineEditingOptions = {
            keys: true,
            oneditfunc: function (id) { editingRowId = id; },
            afterrestorefunc: function () { editingRowId = undefined; },
            aftersavefunc: function () { editingRowId = undefined; }
        };

    $grid.jqGrid({
        datatype: 'local',
        ....
        editurl: 'clientArray'
    });

    // now we set or change onSelectRow callback AFTER jqGrid is created
    $grid.jqGrid('setGridParam', {
        onSelectRow: function (id) {
            if (id !== editingRowId) {
                if (typeof editingRowId !== "undefined") {
                    // save previously editing row
                    //$(this).jqGrid("saveRow", editingRowId, myInlineEditingOptions);

                    // discard changes from the previously editing row
                    $(this).jqGrid("restoreRow", editingRowId, myInlineEditingOptions);
                }
                // start inline editing. The user should save the row by pressing ENTER
                $(this).jqGrid("editRow", id, myInlineEditingOptions);
            }
        }
    });
}); 
```

在上述情况下，重要的是要提到

1.  我们可以在创建 jqGrid`onSelectRow` **之后设置（或更改）。**
2.  它只能是网格中的**一个** `onSelectRow`回调。设置新的`onSelectRow`回调*覆盖*现有的回调。

最后一个限制可能非常困难。例如，您不能实现一些`onSelectRow`应该为项目中的所有网格执行的默认操作，并`onSelectRow`为一些*额外*的特定操作使用附加操作。这是引入类 jQuery 事件的主要原因，这些事件可以非常接近回调的形式使用。下一个示例演示了该技术。

[下一个演示](http://www.ok-soft-gmbh.com/jqGrid/SetOnSelectDynamically1.htm)与上一个完全一样，但它使用`jqGridSelectRow`事件而不是`onSelectRow`回调。新技术有两个重要的优点

1.  **可以在创建 jqGrid 之前或之后**设置`jqGridSelectRow`事件处理程序。如果使用[jQuery.bind](http://api.jquery.com/bind/)绑定事件处理程序，那么将被转换为网格的元素应该存在。如果使用更慢的[jQuery.delegate](http://api.jquery.com/delegate/)、[jQuery.live](http://api.jquery.com/live/)或[jQuery.on](http://api.jquery.com/on/)（最后一个从 jQuery 1.7 开始存在），则可以随时绑定事件处理程序。**`<table>`**
***   **可以设置多个** `jqGridSelectRow`事件处理程序，所有这些事件处理程序都将在唯一的回调（如果存在）*之前执行。*`onSelectRow`通过这种方式，您可以在事件处理程序中实现一些常见操作，`jqGridSelectRow`并且可以使用额外的`jqGridSelectRow`事件处理程序或`onSelectRow`回调网格特定操作。对于完成操作，您可以使用`onSelectRow`回调。**

 **对应的代码如下

```
$(function () {
    var $grid = $("#list"),
        editingRowId,
        myInlineEditingOptions = {
            keys: true,
            oneditfunc: function (id) { editingRowId = id; },
            afterrestorefunc: function () { editingRowId = undefined; },
            aftersavefunc: function () { editingRowId = undefined; }
        };

    $grid.bind("jqGridSelectRow", function (e, id) {
        if (id !== editingRowId) {
            if (typeof editingRowId !== "undefined") {
                // save previously editing row
                //$(this).jqGrid("saveRow", editingRowId, myInlineEditingOptions);

                // discard changes from the previously editing row
                $(this).jqGrid("restoreRow", editingRowId, myInlineEditingOptions);
            }
            // start inline editing. The user should save the row by pressing ENTER
            $(this).jqGrid("editRow", id, myInlineEditingOptions);
        }
    });

    $grid.jqGrid({
        datatype: 'local',
        ....
        editurl: 'clientArray'
    });
}); 
```

**更新**：我忘了提，可以在事件绑定期间使用命名空间。这在更复杂的场景中非常有用。如果有人会使用`$grid.bind("jqGridSelectRow.myNamespace", ...);`，那么您将只能使用`$grid.unbind('.myNamespace');`or取消绑定自己的事件`$grid.unbind('jqGridSelectRow.myNamespace');`。它不会取消绑定具有其他命名空间的其他事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:59:16.180

我改变了一点行为。我在 ZF 视图（phtml 文件）中编写了 java 脚本“onSelectRow”，例如：

```
<?php $this->headScript()->captureStart() ?>
$(document).ready(function() {
    var lastSel;
    jQuery("#jqg_RentAsset").jqGrid('setGridParam', {
        onSelectRow: function(id)
        { 
            alert(id);
        }
    });
});
<?php $this->headScript()->captureEnd() ?> 
```

及其工作。我需要的是**“setGridParam”** 但实际上这个东西不能使用“$grid->jqAddOnLoad($js);” 在 ZF 控制器中。当我有时间的时候，我会调查还有什么需要做的。但现在我很高兴。此外，也许有可能使用“$grid->setParams(array)”...再次感谢。:)**

# xml - SQL server 2005 XML 数据导入

> ID：10457495
> 
> 赞同：0
> 
> 时间：2012-05-04T23:47:30.087
> 
> 标签：xml, sql-server-2005

我有类似于以下格式的 xml 数据：

```
<Orders>
  <Order>
    <OrderID>1</OrderID>
    <OrderInfo>mydetails</OrderInfo>
      <orderlines>
        <orderline>
          <orderlineref>1.1</orderlineref>
          <product>myproduct</product>
          <quantity>5</quantity>
        </orderline>
        <orderline>
          <orderlineref>1.2</orderlineref>
          <product>myproduct1</product>
          <quantity>7</quantity>
        </orderline>
      </orderlines>
  </Order>
</Orders> 
```

我想使用 bcp （或任何其他方法）将它导入 SQL Server 2005，只要它运行得相当快。

如何为这种类型的 XML 创建格式文件？还是我看错了方向。

到目前为止，我设法导入这些数据的唯一方法是使用 openrowset，但它需要的时间太长。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:06:13.393

为什么不将其转换为 xml，例如：

```
declare @x xml

set @x='<Orders>
  ...
</Orders>' 
```

* * *

或者

```
declare @x nvarchar(max)

set @x='<Orders>
  ...
</Orders>' 
```

接着 ：

```
cast (@x as xml)... 
```

# node.js - Node.js apache 基准测试

> ID：10457497
> 
> 赞同：2
> 
> 时间：2012-05-04T23:47:32.373
> 
> 标签：node.js, performance-testing, apachebench

播放并尝试查看 node.js 使用 apache bench 从磁盘提供静态文件的速度有多快

```
ab -r -n 10000 -c 1000 http://server:8080/loadtestfile.txt 
```

我在 OSX Lion 上的 Ubuntu 11.04 x64 VirtualBox VM 上遇到了 ulimit 问题

```
(node) Hit max file limit. Increase "ulimit - n" 
```

我不能再增加限制了。

```
$ ulimit -n 1000000
$ limit -n 1100000
-su: ulimit: open files: cannot modify limit: Operation not permitted 
```

这是强制 node.js 从磁盘重新加载文件以服务每个 HTTP 请求的正确方法吗？如何将限制增加到 1000000 以上？

正常的 curl 请求有效：

```
curl http://server:8080/loadtestfile.txt 
```

代码

```
var sys = require('sys'),
http = require('http'),
fs = require('fs'),
index;

http.createServer(function(request, response) {

fs.readFile('./loadtestfile.txt', function (err, data) {

    response.writeHeader(200, {"Content-Type": "text/plain"});
    response.write(data);
    response.end();
 });

}).listen(8080); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:20:23.347

理想情况下，您的应用程序将在给定的限制内运行；它应该干净地处理`accept(2)`返回错误条件，`errno(3)`设置为`EMFILE`或`ENFILE`不尝试接受另一个连接，直到现有连接终止。

但是，修复应用程序以优雅地处理这种情况可能很困难。如果您只是想进一步提高限制以进行更多测试，则有两种可能性。

*   编辑`/etc/security/limits.conf`以将您的用户帐户的硬限制提高`nofile`到更高的限制，然后再次登录您的用户帐户。

*   在 root shell 中进行测试；您可以`root`直接登录或使用`sudo -s`或`su`启动 shell，然后`ulimit -n`从那里运行命令。

困难在于*提高限制*需要管理权限。（当您同时在系统上有几百个用户时，您想让他们玩得很好......）

但是，我猜测您的应用程序也会*遇到*系统范围的最大打开文件数限制；这是通过配置的`/proc/sys/fs/file-max`。如果应用程序抱怨，也提高该限制。

# iphone - 使用 iPhone 应用程序设置包中的图像

> ID：10457498
> 
> 赞同：2
> 
> 时间：2012-05-04T23:47:36.763
> 
> 标签：iphone, ios4, ios5, settings.bundle

是否有可能以及如何将图像嵌入到您自己的应用程序的设置包中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:57:05.150

**你不能。**您是否在 App Store 的任何其他应用程序中看到过这种情况？而且我指的不是内置的 iOS 应用程序，甚至不是越狱的偏好包。

您可以控制的唯一图标是您在进入设置之前看到的图标。当您更改应用程序本身的图标时，这会更改。**以 icon@2x.png**为例。

# asp.net - 如何在 IIS 中创建文件而不是返回 404 错误？

> ID：10457501
> 
> 赞同：0
> 
> 时间：2012-05-04T23:48:14.790
> 
> 标签：asp.net, iis

我正在编写一个 ASP.NET 应用程序，我希望有一个 IIS 用作普通 Web 文件夹的文件夹，但在发生文件未找到错误时有一个特殊的处理程序。

（“http://example.com/Magic/”映射到“C:\example.com\Magic”。）

客户端请求[http://example.com/Magic/1.jpg](http://example.com/Magic/1.jpg)，但缺少 c:\example.com\1.jpg。不是用 404 响应，而是调用了一些 ASP C#，它自己构建 1.jpg 并将其写入到位。IIS 再次查找，找到 1.jpg，并将其返回给客户端，就好像它一直在那里一样。

后来，另一个客户也要求[http://example.com/Magic/1.jpg](http://example.com/Magic/1.jpg)。由于 IIS 在它期望的位置找到文件，它会将它与 IIS 在提供静态文件时允许的所有缓存和字节范围请求一起返回给客户端。

甚至稍后，另一个客户端请求[http://example.com/Magic/2.jpg](http://example.com/Magic/2.jpg)。调用与之前相同的代码来创建 2.jpg，但代码决定没有这样的文件，因此 IIS 返回 404 错误。

一些笔记...

这样做而不是每次都让 ASPX 提供文件的重点是 IIS 将比 ASPX 页面更好地提供静态文件。IIS 支持 if-modified-since 和 byte-range 请求，这样就不需要加载 ASP.NET 模块。

作为管理员，有了这个即时文件创建，我偶尔可以清除“Magic”文件夹，并且任何再次需要的文件都会在第一次再次被要求时重新创建。

我想如果两个客户端同时请求相同的 URL，则会为同一个文件调用文件创建代码的两个副本。这必须写得很健壮才能预期这种可能性。

回答为什么我想在评论中做这样的事情：

确保文件服务器上已经存在“1.jpg”会很好，除了文件很大且磁盘空间不足。一旦客户使用了这些文件，我想删除它们，但没有信号让客户说“我现在已经完成了”。如果我过早删除该文件，我想在客户端再次请求时重新创建该文件而不生成 404。

使用 ASP.NET 为每个请求生成文件从表面上看是可行的，但 ASP.NET 并不擅长提供静态文件。客户端广泛使用缓存头和请求字节范围，当 IIS 已经完成这项工作时，我必须重新实现所有这些处理。

自定义错误页面... 自定义代码运行后，是否可以让 IIS 再次查看，找到它正在寻找的文件，然后继续，就好像从来没有任何错误一样？

# php - 获取所有不等于 X 的数组键

> ID：10457503
> 
> 赞同：2
> 
> 时间：2012-05-04T23:48:28.820
> 
> 标签：php, forms, file-upload

我有几个文件上传了一个由 PHP 脚本处理的表单。我需要以不同的方式处理几个“类别”。换句话说，我需要将 $_FILES 数组中的一些文件存储在某个地方，而将其他一些文件存储在其他地方。

所以我需要的是所有**不是 $_FILES['filename_form'] 的**文件（数组键）都可以单独存储/使用。

我需要这个的原因是因为上传的文件数量是动态的，但总是**$_FILES['filename_type1']**或**$_FILES['filename_type2_*]**其中 * 是从表单输入更多文件时递增的数字（动态）

可能是一个非常简单的解决方案，要么我太累了，要么我一直盯着代码看太多，但我只知道明天早上之前我需要一个解决方案，所以它对时间很敏感 =P

感谢我能得到的所有帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T23:53:20.833

```
$files = array();
$filenames = array();
foreach($_FILES as $name => $fileInfo)
{
    if($name != 'filename_form')
    {
        $files[$name] = $fileInfo;
        $filenames[] = $name;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:00:27.587

这是另一种方式

```
$keys = array_keys($thearray);
$filteredArray = array_filter($keys, 'fiterKeys');

function filterKeys($item) {
    if($item != 'valuetocheck') return true;
    else return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T00:01:11.977

```
$type1_files = array(); // Array of files of first type
$type2_files = array(); // Array of files of second type
$underfined_files = array(); // Array of files of unnormal type (who knows :-P)

foreach($_FILES as $name => $value){
    if($name == 'type1'){
        $type1_files[] = $value;
    }
    elseif($name == 'type2'){
        $type2_files[] = $value;
    }
    else{
        $undefined_files[] = $value;
    }
} 
```

在 foreach 之后，您会将文件划分为数组，稍后您可以根据需要对其进行处理

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T23:55:06.327

怎么样：

```
foreach ( $_FILES as $key => $value )
   if ( preg_match ( '/type2/', $key ) )
      // do something with the type2
   else if ( preg_match ( '/type1/', $key ) )
      // do something with these 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T23:55:08.990

```
<?php
foreach ($_FILES as $key => $value) {
  $a = explode('_', $key);
  $defaultDir = 'myDefaultDirOrPathOrWhatever';
  if ($a[1] == 'type2') {
    $defaultDir = 'myOtherDirWhenMultipleFiles';
    $incrementPassed = $a[2];
  }
  if (isset($incrementPassed)) unset($incrementPassed);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T00:28:01.137

```
<?php

$files = array();
foreach ($_FILES as $filename => $fileinfo) {
  if (strpos($filename, 'form') !== false) {
    $files[$name] = $fileinfo;
    unset($_FILES[$name]);
  }
}

?> 
```

我能想到的最快方法应该比以前的任何答案都快。

# orm - 我如何使用这种间接关系？

> ID：10457507
> 
> 赞同：0
> 
> 时间：2012-05-04T23:48:46.980
> 
> 标签：orm, relationship, cakephp-2.1

我正在努力将声誉系统整合到我的网站中，类似于 SO。以下是它的结构：

User hasMany Project
User hasMany Answer
Project hasMany Rating
Answer hasMany Rating
Rating belongsTo Project where Rating.parent_type = Project
Rating belongsTo Answer where Rating.parent_type = Answer

评级的值字段将是一个介于 1 和 5 之间的数字。用户应该每获得 5 星评论+10，每获得 4 星评论+5，每获得 3 星评论+1。我目前设置它的方式是：UsersController 中的 recalcRep($id) 操作（以及其他控制器中的其他操作，必要时）调用 User 模型中的 calcRep($id) 方法，这应该是计算 id 为 $id 的用户的信誉。

```
public function calcRep($id) {
        $rep = 0;

        $data = $this->Rating->find('all'); //does not work, because it is not directly associated
        foreach($data as $rating) {
            if(($rating['Rating']['parent_type'] == 'Project' && $rating['Project']['user_id']==$id) or ($rating['Rating']['parent_type'] == 'Answer' && $rating['Answer']['user_id']==$id)) {
                if($rating['Rating']['value']==5) {
                    $rep += 10;
                } else if($rating['Rating']['value']==4) {
                    $rep += 5;
                } else if($rating['Rating']['value']==3) {
                    $rep += 2;
                }
            }
        }
        $data['User']['reputation'] = $rep;
        $this->save($data);
    } 
```

我可能以完全错误的方式处理这个问题，但我不知道如何找到属于特定用户的任何孩子的所有评级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:21:37.000

我认为 cakePHP 要求如果你要从控制器调用模型定义，控制器名称必须与模型相同，因为你正在调用`$this->Rating`，调用它的类需要是`RatingController`或类似的东西. 您最好的选择是调用`find('all')`您的内部`RatingController`并将其存储在您传递给`calcRep()`即的临时变量中：

```
<?php
class RatingsController extends AppController {
    function calcRep($id) {
        $rep = 0;

        $data = $this->Rating->find('all'); //should work now, as you're calling it from the defined controller
        foreach($data as $rating) {
            if(($rating['Rating']['parent_type'] == 'Project' && $rating['Project']['user_id']==$id) or ($rating['Rating']['parent_type'] == 'Answer' && $rating['Answer']['user_id']==$id)) {
                if($rating['Rating']['value']==5) {
                    $rep += 10;
                } else if($rating['Rating']['value']==4) {
                    $rep += 5;
                } else if($rating['Rating']['value']==3) {
                    $rep += 2;
                }
            }
        }
        $data['User']['reputation'] = $rep;
        $this->save($data);
    }

}

?> 
```

我相信还有一个`loadModel()`功能？也许如果你`loadModel('Rating')`事先它会工作。

不过，cakePHP 的 PHP 解释模型似乎不允许您在模型内部执行此操作，因为您尝试做的事情非常适合控制器。

# image - 由于动态图像加载而错误地计算对话框位置？

> ID：10457509
> 
> 赞同：0
> 
> 时间：2012-05-04T23:49:23.273
> 
> 标签：image, mustache, templating, prefetch

我正在开发一个画廊类型的应用程序 - 一个模板将一个弹出对话框放在一起，以便在单击时查看缩略图的更大视图。图像的服务器路径作为模板变量包含在内。

```
Gallery.Templates.Popup = "\
    <div class='popup'>\
        <img class='popup-image' src='{{image-path}}' />\
        <div class='name'>{{name}}</div>\
        <div class='caption'>{{caption}}</div>\
        <div class='dimensions'>{{dimensions}}</div>\
        <div class='price'>{{price}}</div>\
    </div> \
"; 
```

除了第一次加载图像外，这非常有效。对话框已构建并显示，但在将 html 字符串附加到 dom 时，它缺少图像。它引起的问题是定位对话框：

对话框位于屏幕中间，如下所示：left = window.width /2 - dialog.width/2

但由于图像不存在，因此 dialog.width 变量不正确。同样，这仅在第一次单击缩略图时发生，我猜图像已缓存以供后续单击。

这会通过以某种方式预取图像来处理吗？如果是这样，是否需要将它们附加到 dom 才能被缓存，或者我可以将它们加载到数组中吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:26:03.997

如果您可以提前从服务器获取图像大小，则可以使用它来帮助您适当地调整“.popup” div 的大小。

如果不需要图像，预取图像听起来是个坏主意，而且我想不出一种方法来确保在以编程方式生成 html 之前加载特定图像。

# opengl - 是什么使统一缓冲区对象处于活动状态？

> ID：10457512
> 
> 赞同：0
> 
> 时间：2012-05-04T23:49:56.823
> 
> 标签：opengl, uniform

[此处](http://www.opengl.org/sdk/docs/man3/xhtml/glGetActiveUniformBlockName.xml)`glGetActiveUniformBlockName()`记录了OpenGL 函数。简短的描述如下：

> [它] 在程序中的 uniformBlockIndex 处检索活动统一块的名称。`

如何使统一块*处于活动状态*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:52:13.437

统一块的活动方式与统一块的活动方式相同：您在一些产生输出的表达式中使用它。如果您希望统一块处于活动状态，则需要对其成员之一实际执行一些操作，从而对着色器的输出产生实质性影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-24T04:41:27.187

根据 OpenGL 文档，“活动”统一块的定义取决于实现，因此取决于驱动程序。但是，如果您只需要使一个块“活动”，那么只需在您的 GLSL 代码中使用它。只要您在块中使用了制服，就可以保证该块处于活动状态。

但是，如果您不使用它，则该块可能处于活动状态或处于非活动状态，具体取决于您的硬件。即使您将块标记为使用`std140`布局，编译器仍然可以优化它。棘手的部分是，您的驱动程序甚至可能以不同的方式对待统一块和统一块数组。这是一个例子：

```
#version 460

layout(std140, binding = 0) uniform Camera {
    vec3 position;
    vec3 direction;
} camera;

layout(std140, binding = 1) uniform Foo {
    float foo;
    vec3 vec_foo;
} myFoo[2];

layout(std140, binding = 3) uniform Bar {
    float bar;
    vec3 vec_bar;
} myBar[4];

layout(std140, binding = 7) uniform Baz {
    float baz1;
    float baz2;
};

void main() {
    vec3 use_camera = camera.position;  // use the Camera block
    vec3 use_foo = myFoo[0].vec_foo;    // use the Foo block
    color = vec4(1.0);
} 
```

在这个片段着色器中，我们有 8`std140`个统一块，正在使用`Camera`和块，因此它们必须处于活动状态。`Foo`另一方面，`Bar`并`Baz`​​没有被使用，所以你可能认为它们是非活动的，但在我的机器上，虽然`Bar`是非活动的，但`Baz`仍然被认为是活动的。我不确定是否可以在其他机器上复制结果，但您可以使用OpenGL 文档中的[示例代码对其进行测试。](https://www.khronos.org/opengl/wiki/Program_Introspection#Examples)

由于它依赖于实现，因此使用统一块的最安全方法是始终在您的硬件上进行试验。如果您想在所有机器上获得稳定的结果，唯一的方法就是全部使用它们，否则可能很难。正如其他人建议的那样，您可以尝试关闭编译器优化，如下所示，但不幸的是，这仍然不会阻止未使用的块被优化，因为删除不活动的制服不是优化，它只是编译器的工作方式。

```
#pragma optimize(off)
... 
```

# .net - CLR 的区别

> ID：10457517
> 
> 赞同：1
> 
> 时间：2012-05-04T23:50:57.040
> 
> 标签：.net, windows, clr

在我试图理解引用程序集以及 CLR 如何处理这些程序集时，我对实际使用了多少不同的 .NET CLR 感到有些困惑。

查看 .NET Metro 配置文件，其中 API 由 winmd 文件投影，然后通过引用程序集在 .NET 中处理，什么版本/类型的 CLR 正在处理这个问题？

似乎这与 Silverlight 配置文件和 Windows Phone 配置文件的机制相同，因此为每个配置文件加载相同的 CLR，但仅公开相关的 API，具体取决于您的目标。

是否有意义 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T00:34:12.063

每个平台都有一个：台式机、移动设备、手机、xbox、silverlight、微型。今年晚些时候会有另一个，ARM pad。但这并不重要，您的程序是针对参考程序集而不是 CLR 构建的。您的程序进行的所有调用都是框架方法调用，您永远不会直接调用 CLR 函数。

因此，存在存储在 c:\program files\reference 程序集中的*配置文件、参考程序集的集合。*它们大致沿平台边界落下，但有额外的变化。就像桌面应用程序可以针对完整、客户端或 Metro 配置文件一样。引用程序集中启用 WinRT 目标的关键功能是它可以*重定向*类型。这种魔法是由[[TypeForwardedTo] 属性](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.typeforwardedtoattribute.aspx)实现的。

因此，当您针对 Metro 配置文件的 .NET api 时，您的参考程序集来自`Framework\.NETCore`子目录，并且您将获得对 mscorlib.dll 参考程序集的引用，该参考程序集将所有类型重定向到*另一*组实现 WinRT 投影的程序集。核心是 System.Runtime.dll 和 System.Runtime.WindowsRuntime.dll 等。启用可移植类库功能的相同机制。更多细节[在这里](http://www.wintellect.com/CS/blogs/jeffreyr/archive/2011/09/20/core-net-types-usable-from-a-metro-style-application.aspx)。

# active-directory - 域用户未出现在 Active Directory 中

> ID：10457518
> 
> 赞同：0
> 
> 时间：2012-05-04T23:51:04.890
> 
> 标签：active-directory, windows-xp, dns, windows-server-2003, wireless

因此，我有一个使用 Windows Server 2003 机器作为域控制器运行的网络设置。所有域用户都通过以太网物理连接，除了一个由于其位置需要通过我们的 Wifi 连接的用户（到目前为止还没有任何域用户）。这台电脑运行的是 Windows XP SP3 并且能够成功加入域，但它看不到域中的任何其他计算机。此外，在服务器上查看 Active Directory 时，它也不会显示计算机。

我尝试取消加入并重新加入域，但没有解决问题。我还尝试通过不同的 AP 连接计算机，但同样没有解决问题。在线研究后，我只能提供有关路由器有时会如何干扰服务器的 DHCP 设置的信息，这可能会导致此问题，但我认为这不相关，因为设备设置为接入点而不是路由器.

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:02:36.610

不是答案，而是故障排除的想法。在这台机器和一台 LAN 连接的机器上从命令行运行 'ipconfig /all' 并进行比较。专门比较 DNS 设置和 IP 地址以确保它们在同一范围内。

# css - 在 IE9 中使用 CSS3 PIE 的线性渐变不起作用，IE8 可以

> ID：10457519
> 
> 赞同：7
> 
> 时间：2012-05-04T23:51:07.133
> 
> 标签：css, internet-explorer-9, css3pie, linear-gradients

我决定在我的网站中完全放弃对 IE6 和 IE7 的支持，将其用户重定向到纯文本警告页面。但是我仍然支持 IE8 和 IE9。

我正在使用[CSS3 PIE](http://www.css3pie.com)来实现这一点，并且border-radius 在两者（IE8/9）中都有效，box-shadow 在两者中都有效，但是我也依赖于线性渐变。我使用大量标签来实现这一点：

```
background: #E6E6E6; /* fallback */
background: -webkit-gradient(linear, 0 0, 0 bottom, from(#E6E6E6), to(#B3BCC7)); /* old webkit */
background: -webkit-linear-gradient(#E6E6E6, #B3BCC7); /* new webkit */
background: -moz-linear-gradient(#E6E6E6, #B3BCC7); /* firefox */
background: -ms-linear-gradient(#E6E6E6, #B3BCC7); /* meant to be IE... */
background: filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#E6E6E6', endColorstr='#B3BCC7'); /* also meant to be IE... */
background: -o-linear-gradient(#E6E6E6, #B3BCC7); /* opera */
background: linear-gradient(#E6E6E6, #B3BCC7); /* W3C standard */
-pie-background: linear-gradient(#E6E6E6, #B3BCC7); /* PIE */

behavior: url(/PIE.htc); /* load PIE.htc */ 
```

奇怪的是，线性渐变在 IE8 中有效，但在 IE9 中无效。我已经尝试了我找到的任何解决方案，但它们都没有奏效。IE8 只显示回退：**背景：#E6E6E6；**- 不是渐变。

我认为服务器或类似的东西没有任何问题，因为其他属性 -*边界半径*和*框阴影*- 与 PIE 一起工作，但并非没有。

我的所有属性都可以在我支持的所有浏览器中工作 - 只是不是 IE9 :(

有任何想法吗？
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T03:04:27.267

好的，这是我的解决方案。它当然不漂亮，但它确实有效。

```
<style type="text/css">
body{
  background: #E6E6E6;
  background: -webkit-gradient(linear, 0 0, 0 bottom, from(#E6E6E6), to(#B3BCC7));
  background: -webkit-linear-gradient(#E6E6E6, #B3BCC7);
  background: -moz-linear-gradient(#E6E6E6, #B3BCC7);
  background: -ms-linear-gradient(#E6E6E6, #B3BCC7);
  background: -o-linear-gradient(#E6E6E6, #B3BCC7);
  background: linear-gradient(#E6E6E6, #B3BCC7);
  -pie-background: linear-gradient(#E6E6E6, #B3BCC7);

  behavior: url(/PIE.htc); 
}
</style>

<!--[if IE 9]><style>body{ filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#E6E6E6', endColorstr='#B3BCC7'); behavior: url(/ie9-gradient-fix.htc); } </style><![endif]--> 
```

编辑：如果有人想要它们，可以在[http://www.css3pie.com找到 PIE.htc，在](http://www.css3pie.com)[http://abouthalf.com/examples/ie9roundedbackgrounds/htc.zip](http://abouthalf.com/examples/ie9roundedbackgrounds/htc.zip)可以找到 ie9-gradient-fix.htc 。除非它在根目录中，否则我无法让 ie9-gradient-fix.htc 工作，PIE.htc 在我的 /resources/ 目录中工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T02:59:10.257

> 我认为服务器或类似的东西没有任何问题，因为其他属性 - 边界半径和框阴影 - 与 PIE 一起工作，但并非没有。

PIE 不会在 IE9 中呈现边框半径和框阴影，因为 IE9 原生支持这两者。因此，他们的存在并不表明 PIE 正在发挥作用。

我的猜测实际上是您的 PIE.htc 使用了不正确的内容类型标头——IE9 对内容类型特别严格。有关详细信息，请参阅[http://css3pie.com/documentation/known-issues/#content-type](http://css3pie.com/documentation/known-issues/#content-type)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T19:47:38.890

我非常头疼，因为即使使用正确的内容类型标题（文本/x 组件），线性渐变在 IE9 上也不起作用。

升级到 PIE 2.0 解决了这个问题。

[http://css3pie.com/2013/01/28/pie-2-0-beta-1-released](http://css3pie.com/2013/01/28/pie-2-0-beta-1-released)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T12:14:10.283

ie9-gradient-fix.htc 在 IE 9 中为我工作，但随后再次将行为从 pie.htc 更改为 pie.php 也做同样的事情。

轮子在微软转得很慢，但似乎它们也可能转向相反的方向？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-30T00:49:54.953

就我而言，我正在使用`<!--[if lt IE 9]>`，将其更改为`<!--[if lt IE 10]>`解决我的问题（实际上不包括我的 IE css 文件）。

我认为**`<!--[if lte IE 9]>`会做同样的逻辑。

```
filter: progid:DXImageTransform.Microsoft.Gradient(StartColorStr='#88222222', EndColorStr='#00222222', GradientType=0); 
```

PS。我没有使用 css3pie （我以为我是，derp）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T08:53:46.083

伟大的！我使用 PIE.php 并在 IE8、IE9 中修复了这个错误（线性渐变 + 边框半径）！

**要使用它，只需确保 PIE.php 和 PIE.htc 都在同一个目录中，然后在您的 CSS 中将行为指向 PHP 文件：**

行为：url（PIE.php）；

# javascript - “当我想要”时调用 UIWebViewDelegate 方法

> ID：10457521
> 
> 赞同：0
> 
> 时间：2012-05-04T23:51:36.760
> 
> 标签：javascript, iphone, cocoa-touch, uiwebview

我正在使用该`webView:shouldStartLoadWithRequest:navigationType`方法从 JavaScript 调用我的 Objective-C 代码，它工作正常。问题是，这个方法只有在 Web 视图重新加载时才会被调用。我希望能够“随时随地”发送消息。那可能吗？

具体来说，我想尽可能多地使用`document.location = "myapp:" + "customerAdded:" + "YES";`。我的代码只有在我使用 Google API V3 绘制地图时才会执行。

是否可以重新加载“不可见”框架以调用委托方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:56:51.553

试试这个，对我来说很好

```
function invokeObjectiveC() {
    var iframe = document.createElement("IFRAME");
    iframe.setAttribute(your stuff here);
    document.documentElement.appendChild(iframe);
    iframe.parentNode.removeChild(iframe);
    iframe = null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:59:16.347

`webView:shouldStartLoadWithRequest:navigationType:`应该只在 web 视图重新加载时调用，这就是这个委托的目的。您可以使用`NSNotificationCenter`来调用重新加载您的 web 视图的方法。

# iphone - NSMutableArray 替换对象

> ID：10457527
> 
> 赞同：2
> 
> 时间：2012-05-04T23:51:55.233
> 
> 标签：iphone, objective-c

我尝试在我的数组中查找对象，如果成功，我需要将数组中的对象替换为新对象

```
 for (id existingSig in allSignature)
   if ([[existingSig objectForKey:@"SignatureName"] isEqualToString:[item objectForKey:@"name"]])
    {    
      [allSignature removeObject:existingSig];
      [allSignature addObject:[NSDictionary dictionaryWithObjectsAndKeys:@"1", @"SignatureIsRich", [item objectForKey:@"name"], @"SignatureName", generatedID, @"SignatureUniqueId", nil]];
     } 
```

我有错误“NSCFArray：0x100551f10> 在被枚举时发生了变异”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T00:37:25.803

正如其他人所说，您不能在枚举 MutableArray 时对其进行变异。您可以通过两个数组来处理它，其中包含循环后要删除的内容和添加的内容。

```
NSMutableArray *remove = [NSMutableArray array];
NSMutableArray *add = [NSMutableArray array];
for (id existingSig in allSignature){
   if ([[existingSig objectForKey:@"SignatureName"] isEqualToString:[item objectForKey:@"name"]])
    {    
      // Add to the array of objects to be removed
      [remove addObject:existingSig];
      // Add to the array of objects to be added
      [add addObject:[NSDictionary dictionaryWithObjectsAndKeys:@"1", @"SignatureIsRich", [item objectForKey:@"name"], @"SignatureName", generatedID, @"SignatureUniqueId", nil]];
     }
}
[allSignature removeObjectsInArray:remove]; // Remove objects
[allSignature addObjectsFromArray:add]; // Add new objects 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T23:55:47.963

最简单的方法是制作一个副本并对其进行迭代，然后修改原始文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T01:26:37.807

为此，我在 NSArray 类别中有一个映射数组方法

```
- (NSArray *) cw_mapArray:(id (^)(id obj))block
{
    NSMutableArray * cwArray = [[NSMutableArray alloc] init];
    [self cw_each:^(id obj, NSUInteger index, BOOL *stop) {
        id rObj = block(obj);
        if (rObj) {
            [cwArray addObject:rObj];
        }
    }];
    return cwArray;
} 
```

这样我可以获得一个新数组，然后用新数组更改数组。您可以将 cw_each 更改为 enumerateObjectsUsingBlock:。基本上这很简单，如果您想将对象映射到新数组，您只需按原样返回块中的对象，否则修改它并返回它，或者如果您不想将对象映射到新数组然后返回零。它的代码不多，而且效果很好。

# java - 从列表列表中删除重复项并保留列表

> ID：10457532
> 
> 赞同：1
> 
> 时间：2012-05-04T23:52:41.227
> 
> 标签：java, arraylist

我有一个arrayLists 的arrayList。每个内部数组列表都包含一些格式为 (name.version) 的对象。

```
{  {a.1,b.2,c.3} , {a.2,d.1,e.1} , {b.3,f.1,z.1}....} 
```

例如 a.1 意味着 name = a 并且版本是 1。

所以我想消除这个列表数组列表中的重复项。对我来说，两个对象同名时是重复的

所以基本上我的输出应该是

```
{ { a.1,b.2,c.3},{d.1,e.1} ,{f.1 ,z.1} } 
```

请注意，我希望以完全相同的形式输出（也就是说，我不想要一个没有重复的列表）

有人可以为此提供最佳解决方案吗？

我可以遍历每个内部列表并将内容放入哈希集中。但是那里有两个问题，我无法以列表的形式得到答案。另一个问题是，当我需要覆盖该对象的 equals 时，但我不确定这是否会破坏其他代码。如果它们的名称相同，则这些对象有意义地相等（仅在这种情况下。我不确定这是否会涵盖整个频谱）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T00:08:25.903

我使用 Iterator.remove() 在您移动时修改集合。

```
// build your example input as ArrayList<ArrayList<String>>
String[][] tmp = { { "a.1", "b.2", "c.3" }, { "a.2", "d.1", "e.1" },
        { "b.3", "f.1", "z.1" } };
List<List<String>> test = new ArrayList<List<String>>();
for (String[] array : tmp) {
    test.add(new ArrayList<String>(Arrays.asList(array)));
}

// keep track of elements we've already seen
Set<String> nameCache = new HashSet<String>();

// iterate and remove if seen before
for (List<String> list : test) {
    for (Iterator<String> it = list.iterator(); it.hasNext();) {
        String element = it.next();
        String name = element.split("\\.")[0];
        if (nameCache.contains(name)) {
            it.remove();
        } else {
            nameCache.add(name);
        }
    }
}
System.out.println(test); 
```

输出

```
[[a.1, b.2, c.3], [d.1, e.1], [f.1, z.1]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T00:03:03.623

```
List<List<Pair>> inputs; // in whatever format you have them
List<List<Pair>> uniqued = new ArrayList<>(); // output to here
Set<String> seen = new HashSet<String>();
for (List<Pair> list : inputs) {
  List<Pair> output = new ArrayList<>();
  for (Pair p : list)
    if (seen.add(p.getName()))
      output.add(p);
  uniqued.add(output);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T00:03:36.267

创建一个集合。遍历列表项的列表。查看该项目是否在 Set 中。如果它已经存在，请忽略它。如果不是，请将其添加到 Set 和列表列表中。

您的方法将返回一个新的列表列表，而不是修改旧列表。在迭代列表时修改列表是一种痛苦。

# iphone - 在 Xcode 中更改 3 方按钮 (!) 的特性

> ID：10457533
> 
> 赞同：0
> 
> 时间：2012-05-04T23:52:50.067
> 
> 标签：iphone, objective-c, xcode, button, uibutton

我在 Xcode 4.3 中做一个 iPad 应用程序

所以，我正在触发一个函数，并且在该函数内部，我希望能够改变其他按钮的特性。例如，单击链接到该功能的按钮（我在 Interface Builder 中制作的）后，我希望加载其他按钮（也在 IB 中）更改文本/颜色。

我已经尝试了开发人员书籍并在谷歌上花费了大量时间，但是我找不到以我试图表达它的方式提出或回答的问题（我认为这是最后最清楚的问题）

我知道我可以轻松编辑我用来调用函数的按钮的名称

```
[MYBUTTON setTitle:(NSString *) TITLE forState:(UIControlState) STATE]; 
```

但我无法弄清楚如何编辑我在界面构建器中添加的其他按钮。这是可能的，还是我需要以编程方式处理按钮？

到目前为止，在我的函数中，我已经调用了 IBAction 并制作了大量标签来与我想要更改的按钮相关联——我是否走在正确的道路上？

希望这清楚我想要实现的目标，对我温柔一点，我的目标 C 还不是那么好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:57:05.683

您可以使用 IBOutlet 标记标记按钮属性或实例变量，然后将 Interface Builder 中的按钮连接到您的对象。

此外，使用所有大写字母变量名也不是一个好主意。在 C 约定中，这些通常保留给预处理器宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:59:41.763

为视图控制器中的每个按钮创建 IBOutlet 属性，将它们链接到 IB 或 Storyboard 中，最后在您的方法中更改它们的属性:)

# c++ - 避免输出到 CppUnit 中的点

> ID：10457535
> 
> 赞同：3
> 
> 时间：2012-05-04T23:53:08.927
> 
> 标签：c++, unit-testing, cppunit

运行 CppUnit 测试时，xml 或文本文件的输出中有点。

```
freopen("UnitTest-Results.xml", "a", stdout);
CppUnit::TextUi::TestRunner runner;
runner.addTest(pSuite);

// Change the default outputter to a Text Outputter.
runner.setOutputter(new CppUnit::XmlOutputter(&runner.result(), std::cout)); 
```

输出是：

```
.........................
OK (25 tests) 
```

如何选择不打印输出文件中的点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T02:12:17.030

根据您调用 run 的方式，您可以指定正确的参数以跳过输出。

方法签名是：

```
bool TextTestRunner::run( std::string testName,
                       bool doWait,
                       bool doPrintResult,
                       bool doPrintProgress ) 
```

并且`doPrintResult = false`您`doPrintProgress = false`可以抑制所有输出。

另一种方法是使用 TestRunner 或您自己的子类。这也不是那么困难，它只取决于你的测试结构，哪个更容易实现。

PS 只是为了更清楚一点，`ui::text::TestRunner`只是`TextTestRunner`. 旧的访问方式`TextUi::TestRunner`已弃用，`TextTestRunner`应直接使用。

# haskell - 如何在 Haskell 中创建包含长度有限的字符串的类型

> ID：10457538
> 
> 赞同：10
> 
> 时间：2012-05-04T23:53:24.360
> 
> 标签：haskell

> **可能重复：**
> [如何制作有限制的类型](https://stackoverflow.com/questions/7978191/how-to-make-a-type-with-restrictions)

是否可以在 Haskell 中创建一个类型，例如“名称”，它是一个字符串但不包含超过 10 个字母？

如果不是，我怎么能禁止创建一个长名称的人（其中 Person 的定义是这样的：）`data Person = Person Name`。

也许它根本不重要，也许这种问题应该在 Haskell 中以不同的方式解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T00:03:27.347

不要从定义类型的模块中导出构造函数，而是导出“智能构造函数”：

```
module Name (Name(), -- exports the type Name, but not the data constructor Name
             nameFromString,
             stringFromName)
where

data Name = Name String

-- this is the only way to create a Name
nameFromString :: String -> Maybe Name
nameFromString s | 10 < length s = Nothing
                 | otherwise     = Just (Name s)

-- this is the only way to access the contents of a Name
stringFromName :: Name -> String
stringFromName (Name s) = s 
```

* * *

因此，您担心，如果您以前的代码不需要名称限制为十个字符，那么您不能直接插入，`nameFromString`因为它有 type`String -> Maybe Name`而不是`String -> Name`.

首先，如果你真的想抛出异常，你可以定义

```
import Data.Maybe (fromMaybe)

nameFromString' :: String -> Name
nameFromString' = fromMaybe (error "attempted to construct an invalid Name") . nameFromString 
```

并改用它。

其次，抛出异常有时是错误的做法。考虑

```
askUserForName :: IO Name
askUserForName
   = do putStr "What's your name? (10 chars max)  "
        s <- getLine
        case nameFromString s of
            Just n  -> return n
            Nothing -> askUserForName 
```

重写它以使用异常会导致更复杂的代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-05T06:19:55.130

dave4420 有你*应*该做什么的答案。也就是说，只导出智能构造函数。在依赖类型语言中，您*可以*将数据类型限制为某些形式。但是，Haskell 不是依赖类型的。

等等，不，那不是真的。Haskell 是“世界上最流行的依赖类型语言”。你只需要伪造依赖类型。停止。如果您是 1\. 仍在学习基本的 Haskell 2\. 并非完全疯狂，请不要再阅读。

可以在类型系统中对“不超过 10 个字符”的约束进行编码。像这样的类型

```
data Name where
    Name :: LessThan10 len => DList Char len -> Name 
```

但我正在超越自己

首先，你需要大量的扩展（我假设 GHC 7.4，早期版本仍然可以做到，但更痛苦）

```
{-# LANGUAGE TypeFamilies,
             DataKinds,
             GADTs,
             FlexibleInstances,
             FlexibleContexts,
             ConstraintKinds-}

import Prelude hiding (succ) 
```

现在我们为类型级别的自然构建一些机器......使用新的 DataKinds 扩展

```
data Nat = Z | S Nat

type N1 = S Z --makes writing numbers easier
type N2 = S N1
--etc
type N10 = S N9 
```

现在我们需要数字的数据表示和生成它们的方法

```
data Natural n where
    Zero :: Natural Z
    Succ :: Natural a -> Natural (S a)

class Reify a where
   reify :: a

instance Reify (Natural Z) where
   reify = Zero

instance Reify (Natural n) => Reify (Natural (S n)) where
   reify = Succ (reify) 
```

好的，现在我们可以对数字小于 10 的想法进行编码，并编写一个帮助程序来测试它是否可以启动

```
type family LTE (a :: Nat) (b :: Nat) :: Bool
type instance LTE Z b = True
type instance LTE (S a) Z = False
type instance LTE (S a) (S b) = LTE a b

--YAY constraint kinds!
type LessThan10 a = True ~ (LTE a N10)

data HBool b where
   HTrue :: HBool True
   HFalse :: HBool False

isLTE :: Natural a -> Natural b -> HBool (LTE a b)
isLTE Zero _ = HTrue
isLTE (Succ _) Zero = HFalse
isLTE (Succ a) (Succ b) =  isLTE a b 
```

有了所有这些，我们可以定义长度编码的字符串

```
data DList a len where
   Nil :: DList a Z
   Cons :: a -> DList a len -> DList a (S len)

toList :: DList a len -> [a]
toList Nil = []
toList (Cons x xs) = x:toList xs

data Name where
   Name :: LessThan10 len => DList Char len -> Name 
```

甚至取回字符串，并`Show`为`Name`

```
nameToString :: Name -> String
nameToString (Name l) = toList l

instance Show Name where
   show n = "Name: " ++ nameToString n 
```

问题是我们需要一种将 a`String`变成 a 的方法`Name`。那更难。

首先，让我们弄清楚一个字符串有多长

```
data AnyNat where
    AnyNat :: Natural n -> AnyNat

zero = AnyNat Zero
succ (AnyNat n) = AnyNat (Succ n)

lengthNat :: [a] -> AnyNat
lengthNat [] = zero
lengthNat (_:xs) = succ (lengthNat xs) 
```

现在将列表转换为依赖列表是一件简单的事情

```
fromListLen :: Natural len -> [a] -> Maybe (DList a len)
fromListLen Zero [] = Just Nil
fromListLen Zero (x:xs) = Nothing
fromListLen (Succ a) [] = Nothing
fromListLen (Succ a) (x:xs) = do rs <- fromListLen a xs
                                 return (Cons x rs) 
```

仍然不是免费的，但我们正在到达那里

```
data MaybeName b where
    JustName :: LessThan10 len => DList Char len -> MaybeName True
    NothingName :: MaybeName False

maybeName :: MaybeName b -> Maybe Name
maybeName (JustName l) = Just $ Name l
maybeName (NothingName) = Nothing

stringToName' :: Natural len -> String -> MaybeName (LTE len N10)
stringToName' len str = let t = isLTE len (reify :: Natural N10)
                        in case t of
                           HFalse ->  NothingName
                           HTrue  -> case fromListLen len str of
                                          Just x -> JustName x
                                          --Nothing -> logic error 
```

最后一点只是让 GHC 相信我们并没有试图让编译器绞尽脑汁`unsafePerformIO $ produce evilLaugh`

```
stringToNameLen :: Natural len -> String -> Maybe Name
stringToNameLen len str = maybeName $ stringToName' len str

stringToNameAny :: AnyNat -> String -> Maybe Name
stringToNameAny (AnyNat len) str = stringToNameLen len str

stringToName :: String -> Maybe Name
stringToName str = stringToNameAny (lengthNat str) str 
```

哇，我写了长堆栈溢出帖子，但这很重要

我们测试它

```
*Main> stringToName "Bob"
Just Name: Bob
*Main> stringToName "0123456789"
Just Name: 0123456789
*Main> stringToName "01234567890"
Nothing 
```

所以它起作用了，类型系统现在可以强制你的名字不超过 10 个字符的不变量。不过说真的，这很可能不值得你付出努力。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-05T02:36:23.903

你很好地描述了这个类型。当然，你很快就会后悔...

```
data Name  = N1 Char
           | N2 Char Char
           | N3 Char Char Char
           | N4 Char Char Char Char
           | N5 Char Char Char Char Char
           | N6 Char Char Char Char Char Char
           | N7 Char Char Char Char Char Char Char
           | N8 Char Char Char Char Char Char Char Char
           | N9 Char Char Char Char Char Char Char Char Char
           | N10 Char Char Char Char Char Char Char Char Char Char
           deriving (Show, Eq,Ord)

prettyName :: Name -> String
prettyName (N1 a) = a:[]
prettyName (N2 a b) = a:b:[]
prettyName (N3 a b c) = a:b:c:[]
prettyName (N4 a b c d) = a:b:c:d:[]
prettyName (N5 a b c d e) = a:b:c:d:e:[]
prettyName (N6 a b c d e f) = a:b:c:d:e:f:[]
prettyName (N7 a b c d e f g) = a:b:c:d:e:f:g:[]
prettyName (N8 a b c d e f g h) = a:b:c:d:e:f:g:h:[]
prettyName (N9 a b c d e f g h i) = a:b:c:d:e:f:g:h:i:[]
prettyName (N10 a b c d e f g h i j) = a:b:c:d:e:f:g:h:i:j:[] 
```

当我们在 ghci 中导入 Text.PrettyPrint 时，为什么不用解析器呢？

```
import Text.ParserCombinators.Parsec
import Control.Applicative ((<*))
-- still lame
pN :: Parser Name
pN = do letters <- many1 alphaNum <* space
        case letters of 
            a:[]  -> return $ N1 a  
            a:b:[]  -> return $ N2 a b  
            a:b:c:[]  -> return $ N3 a b c  
            a:b:c:d:[]  -> return $ N4 a b c d  
            a:b:c:d:e:[]  -> return $ N5 a b c d e  
            a:b:c:d:e:f:[]  -> return $ N6 a b c d e f  
            a:b:c:d:e:f:g:[]  -> return $ N7 a b c d e f g  
            a:b:c:d:e:f:g:h:[]  -> return $ N8 a b c d e f g h  
            a:b:c:d:e:f:g:h:i:[]  -> return $ N9 a b c d e f g h i  
            a:b:c:d:e:f:g:h:i:j:[]  -> return $ N10 a b c d e f g h i j
            _ -> unexpected "excess of letters"

-- *Main> parseTest pN "Louise "
-- N6 'L' 'o' 'u' 'i' 's' 'e'
-- *Main> parseTest pN "Louisiana "
-- N9 'L' 'o' 'u' 'i' 's' 'i' 'a' 'n' 'a'
-- *Main> parseTest (fmap prettyName pN) "Louisiana "
-- "Louisiana"
-- *Main> parseTest pN "Mississippi "
-- parse error at (line 1, column 13):
-- unexpected excess of letters 
```

...也许这不是一个好主意...

# mongodb - MongoDB 查询 - 从标签数组中查找每个

> ID：10457540
> 
> 赞同：0
> 
> 时间：2012-05-04T23:54:02.843
> 
> 标签：mongodb, mongoose, mongodb-query

我正在尝试在 MongoDB/Mongoose 中执行“where $in”查询，我只想为数组中的每个标签返回一个结果。有点像：

```
db.images.find( { hashtag : { $in : ['tag1', 'tag2', 'tag3'] } } ); 
```

我会得到三个独特的结果；每个来自我指定的一组标签。

```
[{name:'image1', hashtag:'tag1'},
{name:'image55', hashtag:'tag2'},
{name:'image99', hashtag:'tag3'}] 
```

在 SQL 中，您会使用 GROUP BY 之类的东西，但如果不执行 Map/Reduce，我无法在 MongoDB 中找到等价物。

无论如何要这样做？谢谢。

--edit 我想要的等效 SQL 是：

```
SELECT * FROM images WHERE hashtag in ('tag1', 'tag2', 'tag3') GROUP BY hashtag; 
```

或者理想情况下，虽然 MongoDB 没有随机

```
SELECT * FROM images WHERE hashtag in ('tag1', 'tag2', 'tag3') GROUP BY hashtag ORDER BY rand(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:45:36.510

我找不到在 2.0 中执行此操作的方法，但在 2.2（当前可作为开发版本 2.1.1 - 仅可用于测试但**不可**用于生产）中，[聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)将允许您这样做（仅作为示例，我确信其他方式是可能的）：

```
 db.images.aggregate( 
       {$match   : {hashtag: {$in:["tag1","tag2"]}}}, 
       {$group   : {_id:"$hashtag", name: {$first:"$name"}}},
       {$project : {hashtag:"$_id", name: "$name", _id:0}}
  ) 
```

返回：

```
{
         "result" : [
        {
            "hashtag" : "tag2",
            "name" : "1"
        },
        {
            "hashtag" : "tag1",
            "name" : "1"
        }
    ],
    "ok" : 1
  } 
```

这是假设您的文档的格式为 {name:"xxx",hashtag:"tagX") 并且许多名称对应于每个主题标签。聚合管道所做的是使用 $match 将工作集限制为标签为“tag1”或“tag2”的工作集，然后我们按标签分组并指定我们只想保留每个分组的 $first 结果（$最后一个是另一种选择） - 这假设您不在乎返回哪个名称，只要它只是一个。$project 用于将需要哪个组的 _id 映射回字段名称“hashtag”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:18:53.100

听起来您正在等待 MongoDB 的 2.2 版本，它将包含一个聚合管道，允许您将数组展开为多个结果。

[http://www.mongodb.org/display/DOCS/Aggregation](http://www.mongodb.org/display/DOCS/Aggregation)

# stack-overflow - 为什么堆栈堆冲突没有在不同的段中实现

> ID：10457541
> 
> 赞同：0
> 
> 时间：2012-05-04T23:54:05.120
> 
> 标签：stack-overflow, heap-memory, stack-memory, heap-corruption

我认为只需将两者放在不同的段中，就可以防止堆栈和堆冲突。有什么理由不以这种方式实施吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:49:13.380

编译器生成符合操作系统 ABI 的代码。因此编译器的内存模型实际上遵循操作系统的内存模型。如果您询问的是 Linux、*BSD 或其他具有重叠代码/数据/堆栈段的平面 VA 的操作系统，那么以这种方式进行编程会更容易，并且极大地简化了内存管理。能够防止堆堆栈冲突对于操作系统在内存管理的易用性方面将失去的好处太小了（管理一个扁平的 VA 已经*足够复杂了*）。

看看 OS/2 发生了什么——它确实在保护模式下使用了完全分段...

# html - 在 HTML5 中保留角的同时拉伸图像

> ID：10457544
> 
> 赞同：1
> 
> 时间：2012-05-04T23:54:20.953
> 
> 标签：html, css

我想达到下面问题中描述的效果，但是使用CSS。我记得在某处看到现在可以使用 HTML5 完成此操作，但现在找不到属性名称。

[在保留角的同时拉伸 UIImage](https://stackoverflow.com/questions/8879817/stretching-an-uiimage-while-preserving-the-corners)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:05:46.010

您必须使用 3 个不同的图像。

首先，进入 Photoshop 或 Gimp 之类的工具，将你拥有的箭头图像分成 3 个部分。左边是曲线，右边是箭头部分。将它们保存为 3 个不同的图像。

一旦你得到你的图像。创建一个 HTML 图像元素：

```
<img src="img-middle.jpg" /> 
```

在您的 CSS 中，将样式应用于伪元素之前和之后，并添加您不想拉伸的两个图像位。

```
img:before {
    contents: '';
    background: url('img-left.jpg');
    height: 50px;
    width: 20px;
    position: absolute;
    left: -20px;
}

img:after {
    content: '';
    background: url('img-right.jpg');
    height: 50px;
    width: 40px;
    position: absolute;
    right: -40px;
} 
```

确保更改宽度、高度、左右值以匹配两个图像文件的宽度和高度。这个 CSS 允许将图像的这些位添加到左侧和右侧，无论元素被拉伸多宽。它也很酷，因为它只有一个元素，所以 CSS 保持相当干净，除了空内容的要求：''; 财产。

因此，您可以动态拉伸中间图像元素。假设你想让他的箭头拉伸，有一些 jQuery 动画元素的宽度，然后中间部分将拉伸并且角将保持不变，因为它们在技术上不是原始元素的一部分，它们只是附加的。

ETA：至于在与 Objective-C 相关的帖子中描述的方法，没有 CSS 属性可以像这样分解图像，除非它是在我从未听说过的一些晦涩的 webkit 夜间构建中。您在这里的选择是将其他两侧分开。您还可以将图像的左右部分组合成一个精灵并使用背景位置：；用于选择图像位的 CSS 属性，这样您就只有两个图像文件请求，因为您希望将这些请求保持在低位以加快页面加载时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:23:57.197

您可以创建一个元素，为其分配左右侧盖的伪元素，并使用应用于 width 属性的 CSS3 过渡来实现此效果。

我[在 jsFiddle 上设置了一个工作演示](http://jsfiddle.net/eliranmal/MhDVR/)来说明它是如何完成的。此演示使用背景颜色，但也可以使用图像（沿 X 轴重复中心元素）。

查看[HTML5 Rock Playground](http://playground.html5rocks.com/)，您会发现一些引人入胜的片段展示了 CSS3 和 HTML5（自然而然）的强大功能，也可以将其用作快速参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-24T05:02:20.300

你是说CSS3吗？

我想`border-image`这几乎就是你要找的东西。它使您可以拍摄单个图像并将其转换为元素的边框。

这有点难用，所以 Mozilla 制作了一个很棒的所见即所得编辑器： [https ://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Background_and_Borders/Border-image_generator](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Background_and_Borders/Border-image_generator)

# trigger.io - trigger.io 中是否有处理 OAuth 的好方法？

> ID：10457550
> 
> 赞同：7
> 
> 时间：2012-05-04T23:55:46.540
> 
> 标签：trigger.io

在我的情况下，我将有一个带有自定义 URL 架构的重定向 URL，例如 myapp://oauth

所以首先我会转发到我的 oauth 登录 url，然后我需要为位置更改注册一个事件处理程序，以检查它是否与我的重定向 url 匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T02:38:42.750

是的，我们有一个[如何处理 oauth2 的示例](https://github.com/trigger-corp/forge-template-oauth2)

使用[forge.tabs.openWithOptions](http://docs.trigger.io/en/v1.2/api/tabs-management.html)，您可以指定要在子浏览器中打开的 url，以及要监视的模式以触发子浏览器关闭并返回参数。因此，您可以指定与该模式匹配的 redirect_url。

更新：如果您想使用 Facebook 进行身份验证，我们现在已经集成了原生 Facebook SDK，因此您可以使用 forge.facebook 模块进行身份验证：http: [//docs.trigger.io/en/v1.4/modules/facebook .html#modules-facebook](http://docs.trigger.io/en/v1.4/modules/facebook.html#modules-facebook)

# input - Fortran，如何让 Fortran 忽略具有随机间距的数据文件中的行

> ID：10457551
> 
> 赞同：0
> 
> 时间：2012-05-04T23:55:47.217
> 
> 标签：input, fortran, skip

我正在编写一个 FORTRAN 代码，它使用 MD 程序生成的文件中的数据。数据是一个值列表，但在表单中的列表更新数据中有中断（# Neighbor list update .. 6527 个索引在列表中），这些中断是随机间隔的，所以我不能跳过每个 x

我在编写代码时不会忽略这些行并随机添加上一步的值。

1, 0.98510699999999995, 0.98510699999999995
2, 1.9654170000000000, 0.98031000000000001
3, 2.9427820000000002, 0.97736500000000004
4, 3.9186540000000001, 0.97587199999999996
4, 4.8945259999999999, 0.97587199999999996
5, 5.8697910000000002, 0.97526500000000005
*note the double step 4 with an identical value from the true step 4*

我将如何跳过这条线。请在下面找到示例代码

```
Open(Unit=10,File='prod._100.tup')

do i=1,50

Read(10,*,IOSTAT=ios)step,temp,kinetic,potential,total,pressure
If(IS_IOSTAT_END(ios)) Exit
test=test+temp
print*, step, test, temp
End Do 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:03:51.500

我不清楚文件中的“中断”是什么。它们是空行吗？如果是这样，以下代码应该可以工作：

```
use, intrinsic :: iso_fortran_env

character (len=200) :: line

Open(Unit=10,File='prod._100.tup')

read_loop: do

   Read (10,'(A)',IOSTAT=ios) line
   If(ios == iostat_end) exit read_loop
   if (len_trim (line) == 0) then
      write (*, *) "blank line"
      cycle read_loop
   end if
   read (line, *) step,temp,kinetic,potential,total,pressure
   test=test+temp
   print*, step, test, temp

end do: read_loop

write (*, *) "total is", test 
```

以上未经测试。“len_trim”测试基于空行的不良记录。如果以其他方式定义中断，则必须创建不同的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:31:30.190

尝试：

```
i=1
do while (i<=50)
  Read(10,*,IOSTAT=ios)step,temp,kinetic,potential,total,pressure
  If(IS_IOSTAT_END(ios)) Exit
  IF(ios.ne.0) cycle
  test=test+temp
  i=i+1
enddo 
```

当读取坏记录时，ios 被分配一个系统相关的非零数字（成功时为零）。显然您编写了一个函数 (IS_IOSTAT_END) 来判断您是否已到达文件末尾，但可能存在其他错误情况（例如，读取语句与数据不匹配）。这将返回与结束文件记录不同的非零 ios，因此您应该在该点重新启动循环（例如`cycle`）

我假设您想从文件中准确读取 50 行，所以我将您的`do`循环更改为 a `do while`，但如果您读取的记录数实际上并不重要，那么请随时将其更改回来。

# wpf - 双击 WPF ListView - 如何触发命令而不使用事件处理程序

> ID：10457554
> 
> 赞同：1
> 
> 时间：2012-05-04T23:56:13.233
> 
> 标签：wpf, mvvm

我对如何在我的特定情况下将事件实现为命令感到有些困惑。我想尊重 MVVM，但在这种情况下不知道怎么做。

我有一个 WPF '视图' - viewCustomerSearch。这上面有一些文本框，当用户单击“搜索”时，结果会填充到 ListView 中。viewCustomerSearch 绑定到 viewmodelCustomerSearch，效果很好。

viewCustomerSearch 托管在 viewCustomer 上。

我想知道 viewCustomerSearch 公开一个自定义命令 - CustomerSelectedCommand - 每当双击 viesCustomerSearch 中的 ListView 时“触发”，然后由 viewCustomer 后面的视图模型（即 viewmodelCustomer）处理。这似乎正确实现了理论上的 MVVM 模式。

我将主要问题分解为三个较小的问题，但希望您能看到它们都是同一个挑战的组成部分。

**第一个问题**：为了让 viewCustomerSearch 公开一个自定义命令，我似乎必须将此代码放入 viewCustomerSearch - 这似乎“破坏”了 MVVM（后面的视图代码中没有代码）。

```
public readonly DependencyProperty CustomerSelectedCommandProperty = DependencyProperty.Register("CustomerSelectedCommand", typeof(ICommand), typeof(viewCustomerSearch));

public ICommand CustomerSelectedCommand
{
    get { return (ICommand)GetValue(CustomerSelectedCommandProperty); }
    set { SetValue(CustomerSelectedCommandProperty, value); }
} 
```

**第二**个问题（这是真正困扰我的问题）：最好通过展示我会做什么来破坏 MVVM 来解释。我会在视图中有一个事件处理程序：

```
private void lstResults_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    if (CustomerSelectedCommand != null) CustomerSelectedCommand.Execute(((ViewModels.viewmodelCustomerSearchResult)this.lstResults.SelectedItem).CustomerId);
} 
```

嗯......我知道你不应该把这个事件处理程序放在这里；相反，它应该有一个命令来在 viewmodelCustomerSearch 中处理它。这里的两个问题是

*   因为'CustomerSelectedCommand' ICommand 是在 viewCustomerSearch 中实现的，所以 viewmodelCustomerSearch 看不到它来触发它。

*   我看不到如何将 MouseDoubleClick 事件绑定到命令，而不是后面的视图代码中的事件处理程序。我正在阅读有关附加属性的信息，但看不到如何在此处应用它们。

（请注意：我在应用程序的其他地方使用通用的“RelayCommand”；这在这里起作用吗？？）

**第三个问题**：当我在事件处理程序后面的代码中使用非 MVVM 方式触发命令时，您可以看到我将 Selected Customer Id 作为参数传递给命令。如何在 viewCustomer 的命令处理程序中看到该参数？我创建了一个新的 RelayCommand 来处理它，但似乎 Execute 方法不接受参数？

鉴于以上所有情况，我不得不说我个人并不赞同“MVVM 意味着视图中没有代码”。这对我来说似乎很疯狂；完全与视图有关的代码，并且仅与视图有关，恕我直言，不应进入视图模型。尽管如此，这看起来确实像逻辑上的东西（不是视图的东西）。

非常感谢您的一些见解。对不起，很长的帖子；试图平衡足够的信息来帮助我处理“战争与和平”。

DS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:11:49.510

为什么不将其命名为“DoubleClickCommand”，这样您就不会将业务逻辑置于您的控制之中。然后将此命令绑定到您的视图模型，就像 Tod 解释的那样。关于您背后的代码，有一个纯 xaml 解决方案，更准确地说，它涉及附加行为，但不需要覆盖 WPF 类（我想避免），例如搜索“事件触发命令[”](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)。最后一件事：Code Behind 不会以任何方式破坏 MVVM，我想知道这个神话是从哪里来的。后面的代码非常好！MVVM 是将视图和逻辑分开，而不是告诉您将代码放在哪里。设计原则应该帮助而不是阻碍你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:03:52.717

在您的视图中，您可以在 xaml 中添加“命令”属性并将其绑定到 ViewModel 的命令

```
Command="{Binding CustomerSelectedCommand}" 
```

参数可以通过多种方式传递。大多数时候，我只是将其他项目绑定到我的 ViewModel，我可以直接使用它们。但是，还有一个名为 CommandParameter 的属性，这是在 XAML 中指定它的示例。

```
 CommandParameter="{Binding ElementName=txtPassword}" 
```

然后在我的 ViewModel 中，我的 Command 的定义如下所示

```
private void UserLogonCommandExecute(object parameter)
{
...
       var password_box = parameter as PasswordBox;
...
} 
```

听起来您已经知道如何在 ViewModel 中设置 RelayCommand，所以我不会深入讨论。我发现我[如何：使用 MVVM 模式构建数据驱动的 WPF 应用程序](http://windowsclient.net/learn/video.aspx?v=314683)在我开始时很有帮助。

# Per Comment Request 命令属性示例

我只是要获取一些工作代码，这是在 XAML 中将 Command 属性添加到按钮的方法。

```
<Button Command="{Binding ConnectCommand}">
//Your button content and closing </Button> here 
```

这假设您已将 DataContext 设置为具有名为 ConnectCommand 的命令的 ViewModel。这是 ConnectCommand 的示例。您需要将 ConnectCommandCanExecute 和 ConnectCommandExecute 的内容替换为您想要完成的任何工作。

```
public ICommand ConnectCommand
{
    get
    {
        if (_connectCommand == null)
        {
            _connectCommand = new RelayCommand(param => ConnectCommandExecute(),
                                               param => ConnectCommandCanExecute);
        }
        return _connectCommand;
    }
}

private bool ConnectCommandCanExecute
{
    get { return !_instrumentModel.IsConnected; }
}

private void ConnectCommandExecute()
{
    if (TcpSettingsChanged()) SaveTcpSettings();
    _instrumentModel.Connect(_tcpData);
} 
```

# 中继类

使这个简单的一部分是我在我的一个核心库 .dll 中拥有的 RelayClass。我可能从我看过的一个视频中得到了这个。这可以完整地剪切和粘贴，这里不需要自定义任何内容，除非您可能想要更改它所在的命名空间。

```
using System;
using System.Diagnostics;
using System.Windows.Input;

namespace Syncor.MvvmLib
{
public class RelayCommand : ICommand
{
private readonly Action<object> _execute;
private readonly Predicate<object> _canExecute;

public event EventHandler CanExecuteChanged
{
  add
  {
    CommandManager.RequerySuggested += value;
  }
  remove
  {
    CommandManager.RequerySuggested -= value;
  }
}

public RelayCommand(Action<object> execute)
  : this(execute, (Predicate<object>) null)
{
  this._execute = execute;
}

public RelayCommand(Action<object> execute, Predicate<object> canExecute)
{
  if (execute == null)
    throw new ArgumentNullException("execute");
  this._execute = execute;
  this._canExecute = canExecute;
}

[DebuggerStepThrough]
public bool CanExecute(object parameter)
{
  if (this._canExecute != null)
    return this._canExecute(parameter);
  else
    return true;
}

public void Execute(object parameter)
{
  this._execute(parameter);
}
}
} 
```

# android - AppWidget 中的 ListView“超过”小部件尺寸

> ID：10457556
> 
> 赞同：0
> 
> 时间：2012-05-04T23:56:27.133
> 
> 标签：android, android-layout, android-listview, android-appwidget

我有一个`ListVie`w 里面`AppWidget`。的每一行`ListView`都有一个自定义布局，根据需要`AppWidget`指定一个`minHeight`。问题是`ListView`超出了 的尺寸`AppWidget`，并且一些行只是挂在小部件边界之下。

`ListView`我已经尝试了所有我能想到的方法，修复了、 使用`match_parent`和/`wrap_content`或行和的高度`ListView`，但我无法解决这个问题。

有其他人遇到过这个问题吗？如何使`ListView`小部件边界内适合并滚动，而不是行超出边界？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:30:00.283

好吧，我已经从根本上导致了这个问题，至少部分归咎于我。

我被要求使用自定义背景，`ListView`我收到的 9-patch 在“内容”背景下方绘制了一个阴影。Android 使用整个 png 来绘制背景，为小部件提供“一行悬挂内容”的外观。

我通过使用纯色作为背景验证了这一点 - 它正确扩展以覆盖整个`ListView`.

我的学习：
1\. 小部件的`minWidth`和`minHeight`属性正是他们所说的；如果可以的话，Android 会给小部件更多的空间。:)
2\. 您指定了“最小”宽度，您的实际宽度由 child 的宽度决定`View`。鉴于这种情况可能很常见，在小部件的主视图中设置顶级布局`width`和`height`to`wrap_content`似乎是合理的做法。

# flash - 在我的内容上播放视频 AS2

> ID：10457563
> 
> 赞同：0
> 
> 时间：2012-05-04T23:57:49.393
> 
> 标签：flash, video, actionscript-2

我有一个将在 swf 中全屏运行的 flash 应用程序。当用户确实单击按钮时，我需要在内容上播放视频。我听到来自网络流的音频，但看不到视频。我试过使用 flv 和 mp4 文件，它们都在与 swf 相同的文件夹中。

这是我的代码：

```
var my_video:Video; 
my_video = new Video();
my_video._height=600;
my_video._width=800;
my_video._x = 0;
my_video._y = 0;
addChild(my_video);

var my_nc:NetConnection = new NetConnection();
my_nc.connect(null);
var my_ns:NetStream = new NetStream(my_nc);
my_video.attachVideo(my_ns);
my_ns.play("video.mp4"); 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:42:29.523

您的库中需要一个组件，这取决于您的 IDE 版本。Video、MediaDisplay 或更新的 FLVPlayback 都可以在 AS2 中使用。然后你会看到视频。

好的，如果你在 CS5.5 中创建一个新的 AS2 文件，然后打开组件面板，你可以双击 FLVPlayback 组件，它将把它放在舞台和你的库中，只需从舞台上删除一个，因为你可以附加它代码，您只需要在库中使用它即可。

![在此处输入图像描述](../Images/35f7088a8da413cf0aca45dd3dedd8bd.png)

以下代码将演示此工作：

```
import mx.video.FLVPlayback;

var video:FLVPlayback = this.attachMovie("FLVPlayback", "my_video", 10);
video.contentPath = "http://www.helpexamples.com/flash/video/water.flv";
video.setSize(640, 480); 
```

查看文档以帮助您了解哪些属性可帮助您了解此组件的工作原理：

[FLVPlayback Adob​​e 文档](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00002331.html)

# python - 使用 Python lxml 时出现错误“无法加载外部实体”

> ID：10457564
> 
> 赞同：30
> 
> 时间：2012-05-04T23:57:54.497
> 
> 标签：python, xml, lxml, elementtree

我正在尝试解析从 Web 检索到的 XML 文档，但在解析后出现此错误会崩溃：

```
': failed to load external entity "<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="GreenButtonDataStyleSheet.xslt"?> 
```

这是下载的 XML 中的第二行。有没有办法阻止解析器尝试加载外部实体，或者另一种方法来解决这个问题？这是我到目前为止的代码：

```
import urllib2
import lxml.etree as etree

file = urllib2.urlopen("http://www.greenbuttondata.org/data/15MinLP_15Days.xml")
data = file.read()
file.close()

tree = etree.parse(data) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-20T01:13:14.110

与 mzjn 所说的一致，如果您确实想将字符串传递给 etree.parse()，只需将其包装在 StringIO 对象中即可。

例子：

```
from lxml import etree
from StringIO import StringIO

myString = "<html><p>blah blah blah</p></html>"

tree = etree.parse(StringIO(myString)) 
```

此方法在[lxml 文档](http://lxml.de/parsing.html)中使用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-06T10:14:39.530

[`etree.parse(source)`](http://lxml.de/api/lxml.etree-module.html#parse)期望`source`成为其中之一

*   文件名/路径
*   一个文件对象
*   类似文件的对象
*   使用 HTTP 或 FTP 协议的 URL

问题是您将 XML 内容作为字符串提供。

你也可以不用`urllib2.urlopen()`. 只需使用

```
tree = etree.parse("http://www.greenbuttondata.org/data/15MinLP_15Days.xml") 
```

演示（使用 lxml 2.3.4）：

```
>>> from lxml import etree
>>> tree = etree.parse("http://www.greenbuttondata.org/data/15MinLP_15Days.xml")
>>> tree.getroot()
<Element {http://www.w3.org/2005/Atom}feed at 0xedaa08>
>>> 
```

* * *

在一个[竞争的答案](https://stackoverflow.com/a/10457801)中，建议 lxml 由于文档中的处理指令引用的样式表而失败。但这不是这里的问题。lxml 不会尝试加载样式表，并且如果您按照上述方式进行解析，则 XML 文档会被很好地解析。

如果您想实际加载样式表，则必须明确说明。需要这样的东西：

```
from lxml import etree

tree = etree.parse("http://www.greenbuttondata.org/data/15MinLP_15Days.xml")

# Create an _XSLTProcessingInstruction object
pi = tree.xpath("//processing-instruction()")[0] 

# Parse the stylesheet and return an ElementTree
xsl = pi.parseXSL() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-25T20:00:35.377

lxml docs for parse 说**要从字符串中解析，请改用该`fromstring()`函数。**

```
parse(...)
    parse(source, parser=None, base_url=None)

    Return an ElementTree object loaded with source elements.  If no parser
    is provided as second argument, the default parser is used.

    The ``source`` can be any of the following:

    - a file name/path
    - a file object
    - a file-like object
    - a URL using the HTTP or FTP protocol

    To parse from a string, use the ``fromstring()`` function instead.

    Note that it is generally faster to parse from a file path or URL
    than from an open file object or file-like object.  Transparent
    decompression from gzip compressed sources is supported (unless
    explicitly disabled in libxml2). 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-05T00:38:49.020

您收到该错误是因为您正在加载的 XML 引用了外部资源：

```
<?xml-stylesheet type="text/xsl" href="GreenButtonDataStyleSheet.xslt"?> 
```

LXML 不知道如何解决`GreenButtonDataStyleSheet.xslt`。你和我可能意识到它相对于你的原始 URL 是可用的，`http://www.greenbuttondata.org/data/15MinLP_15Days.xml`......诀窍是告诉`lxml`如何去加载它。

[lxml 文档](http://lxml.de/resolvers.html)包括一个标题为“[文档加载和 URL 解析](http://lxml.de/resolvers.html)”的部分，其中包含您需要的所有信息。

# java - 无法使用 Beem-Asmack 在 XMPP FileTransfer 中处理上传

> ID：10457569
> 
> 赞同：3
> 
> 时间：2012-05-04T23:58:41.690
> 
> 标签：java, android, xmpp, asmack

我在处理从“Android 聊天”到其他客户端（如 Pidgin）的文件传输时遇到问题：Pidgin 客户端收到传输请求，但我的应用程序无法开始传输文件。

我必须说我已经阅读了所有 stackoverflows 问题，一些[http://community.igniterealtime.org/](http://community.igniterealtime.org/)线程，但所有这些都没有解决我的问题。

为了测试，我在端口 5222 上使用 jabber.org 服务器，并且我使用 Beem-Asmack 库 v7（在某些客户端中，您还必须指定代理：这有必要吗？？）。文件传输的代码如下：

```
public boolean sendFile(final String jid, final String path, String description) {
    ServiceDiscoveryManager sdm = ServiceDiscoveryManager.getInstanceFor(this.xmpp);
    /*if (sdm==null) {
        sdm = new ServiceDiscoveryManager(this.xmpp);*/
        sdm.addFeature("http://jabber.org/protocol/disco#info");
        sdm.addFeature("http://jabber.org/protocol/disco#item");
        sdm.addFeature("jabber:iq:privacy");
    //}

    Log.d("sending file", "maganer");
    FileTransferNegotiator.setServiceEnabled(this.xmpp, true);
    FileTransferManager manage = new FileTransferManager(this.xmpp);
    Log.d("sending file", "set true");

    OutgoingFileTransfer.setResponseTimeout(10000);
    OutgoingFileTransfer oft = manage.createOutgoingFileTransfer(this.myRoster.getPresence(jid).getFrom());
    try {
        Log.d("sending file", "try to send... " + path);
        oft.sendFile(new File(path), description);
        Log.d("sending file", "Accepted");
        while (!oft.isDone()) {
            Log.d("status", oft.getStatus().toString());
            Log.d("percent", new Long(oft.getBytesSent()).toString());
            if (oft.getStatus() == FileTransfer.Status.error) {
                Log.e("percent", "Error " + new Long(oft.getBytesSent()).toString() + " " + oft.getError() + " " + oft.getException());
                oft.cancel();
                return false;
            }
            //Thread.sleep(1000);
        }
    } catch (Throwable e) {
        e.printStackTrace();
        Log.e("sendFile", path);
        return false;
    }
    return true;
} 
```

我还在创建远程服务时执行以下过程

```
private void startup() {
    ProviderManager pm = ProviderManager.getInstance();
    // Private Data Storage
    pm.addIQProvider("query", "jabber:iq:private",
        new PrivateDataManager.PrivateDataIQProvider());

    // Time
    try {
        pm.addIQProvider("query", "jabber:iq:time",
            Class.forName("org.jivesoftware.smackx.packet.Time"));
    } catch (ClassNotFoundException e) {
        Log.w("TestClient",
            "Can't load class for org.jivesoftware.smackx.packet.Time");
    }

    // Roster Exchange
    pm.addExtensionProvider("x", "jabber:x:roster",
        new RosterExchangeProvider());

    // Message Events
    pm.addExtensionProvider("x", "jabber:x:event",
        new MessageEventProvider());

    // Chat State
    pm.addExtensionProvider("active",
        "http://jabber.org/protocol/chatstates",
        new ChatStateExtension.Provider());

    pm.addExtensionProvider("composing",
        "http://jabber.org/protocol/chatstates",
        new ChatStateExtension.Provider());

    pm.addExtensionProvider("paused",
        "http://jabber.org/protocol/chatstates",
        new ChatStateExtension.Provider());

    pm.addExtensionProvider("inactive",
        "http://jabber.org/protocol/chatstates",
        new ChatStateExtension.Provider());

    pm.addExtensionProvider("gone",
        "http://jabber.org/protocol/chatstates",
        new ChatStateExtension.Provider());

    // XHTML
    pm.addExtensionProvider("html", "http://jabber.org/protocol/xhtml-im",
        new XHTMLExtensionProvider());

    // Group Chat Invitations
    pm.addExtensionProvider("x", "jabber:x:conference",
        new GroupChatInvitation.Provider());

    // Service Discovery # Items
    pm.addIQProvider("query", "http://jabber.org/protocol/disco#items",
        new DiscoverItemsProvider());

    // Service Discovery # Info
    pm.addIQProvider("query", "http://jabber.org/protocol/disco#info",
        new DiscoverInfoProvider());

    // Data Forms
    pm.addExtensionProvider("x", "jabber:x:data", new DataFormProvider());

    // MUC User
    pm.addExtensionProvider("x", "http://jabber.org/protocol/muc#user",
        new MUCUserProvider());

    // MUC Admin
    pm.addIQProvider("query", "http://jabber.org/protocol/muc#admin",
        new MUCAdminProvider());

    // MUC Owner
    pm.addIQProvider("query", "http://jabber.org/protocol/muc#owner",
        new MUCOwnerProvider());

    // Delayed Delivery
    pm.addExtensionProvider("x", "jabber:x:delay",
        new DelayInformationProvider());

    // Version
    try {
        pm.addIQProvider("query", "jabber:iq:version",
            Class.forName("org.jivesoftware.smackx.packet.Version"));
    } catch (ClassNotFoundException e) {
        // Not sure what's happening here.
    }

    // VCard
    pm.addIQProvider("vCard", "vcard-temp", new VCardProvider());

    // Offline Message Requests
    pm.addIQProvider("offline", "http://jabber.org/protocol/offline",
        new OfflineMessageRequest.Provider());

    // Offline Message Indicator
    pm.addExtensionProvider("offline",
        "http://jabber.org/protocol/offline",
        new OfflineMessageInfo.Provider());

    // Last Activity
    pm.addIQProvider("query", "jabber:iq:last", new LastActivity.Provider());

    // User Search
    pm.addIQProvider("query", "jabber:iq:search", new UserSearch.Provider());

    // SharedGroupsInfo
    pm.addIQProvider("sharedgroup",
        "http://www.jivesoftware.org/protocol/sharedgroup",
        new SharedGroupsInfo.Provider());

    // JEP-33: Extended Stanza Addressing
    pm.addExtensionProvider("addresses",
        "http://jabber.org/protocol/address",
        new MultipleAddressesProvider());

    // FileTransfer
    pm.addIQProvider("si", "http://jabber.org/protocol/si",
        new StreamInitiationProvider());

    pm.addIQProvider("query", "http://jabber.org/protocol/bytestreams",
        new BytestreamsProvider());

    pm.addIQProvider("open","http://jabber.org/protocol/ibb",
        new IBBProviders.Open());
    //
    pm.addIQProvider("close","http://jabber.org/protocol/ibb",
        new IBBProviders.Close());
    //
    pm.addExtensionProvider("data","http://jabber.org/protocol/ibb",
        new IBBProviders.Data());

    //
    pm.addExtensionProvider("x","jabber:x:data", new DataFormProvider());

    // Privacy
    pm.addIQProvider("query", "jabber:iq:privacy", new PrivacyProvider());

    pm.addIQProvider("command", "http://jabber.org/protocol/commands",
        new AdHocCommandDataProvider());
    pm.addExtensionProvider("malformed-action",
        "http://jabber.org/protocol/commands",
        new AdHocCommandDataProvider.MalformedActionError());
    pm.addExtensionProvider("bad-locale",
        "http://jabber.org/protocol/commands",
        new AdHocCommandDataProvider.BadLocaleError());
    pm.addExtensionProvider("bad-payload",
        "http://jabber.org/protocol/commands",
        new AdHocCommandDataProvider.BadPayloadError());
    pm.addExtensionProvider("bad-sessionid",
        "http://jabber.org/protocol/commands",
        new AdHocCommandDataProvider.BadSessionIDError());
    pm.addExtensionProvider("session-expired",
        "http://jabber.org/protocol/commands",
        new AdHocCommandDataProvider.SessionExpiredError());

    //  Private Data Storage
    pm.addIQProvider("query","jabber:iq:private", new PrivateDataManager.PrivateDataIQProvider());

    // Time
    try {
        pm.addIQProvider("query","jabber:iq:time", Class.forName("org.jivesoftware.smackx.packet.Time"));
    } catch (ClassNotFoundException e) {
        Log.w("TestClient", "Can't load class for org.jivesoftware.smackx.packet.Time");
    }

    //  Roster Exchange
    pm.addExtensionProvider("x","jabber:x:roster", new RosterExchangeProvider());

    //  Message Events
    pm.addExtensionProvider("x","jabber:x:event", new MessageEventProvider());

    //  Chat State
    pm.addExtensionProvider("active", "http://jabber.org/protocol/chatstates",
        new ChatStateExtension.Provider());

    pm.addExtensionProvider("composing", "http://jabber.org/protocol/chatstates",
        new ChatStateExtension.Provider());

    pm.addExtensionProvider("paused", "http://jabber.org/protocol/chatstates",
        new ChatStateExtension.Provider());

    pm.addExtensionProvider("inactive", "http://jabber.org/protocol/chatstates",
        new ChatStateExtension.Provider());

    pm.addExtensionProvider("gone", "http://jabber.org/protocol/chatstates",
        new ChatStateExtension.Provider());

    //  XHTML
    pm.addExtensionProvider("html", "http://jabber.org/protocol/xhtml-im",
        new XHTMLExtensionProvider());

    //  Group Chat Invitations
    pm.addExtensionProvider("x", "jabber:x:conference", new GroupChatInvitation.Provider());

    //  Service Discovery # Items    
    pm.addIQProvider("query", "http://jabber.org/protocol/disco#items", new DiscoverItemsProvider());

    //  Service Discovery # Info
    pm.addIQProvider("query", "http://jabber.org/protocol/disco#info", new DiscoverInfoProvider());

    //  Data Forms
    pm.addExtensionProvider("x", "jabber:x:data", new DataFormProvider());

    //  MUC User
    pm.addExtensionProvider("x", "http://jabber.org/protocol/muc#user", new MUCUserProvider());

    //  MUC Admin    
    pm.addIQProvider("query", "http://jabber.org/protocol/muc#admin", new MUCAdminProvider());

    //  MUC Owner    
    pm.addIQProvider("query", "http://jabber.org/protocol/muc#owner", new MUCOwnerProvider());

    //  Delayed Delivery
    pm.addExtensionProvider("x","jabber:x:delay", new DelayInformationProvider());

    //  Version
    try {
        pm.addIQProvider("query","jabber:iq:version", Class.forName("org.jivesoftware.smackx.packet.Version"));
    } catch (ClassNotFoundException e) {
        //  Not sure what's happening here.
    }

    //  VCard
    pm.addIQProvider("vCard", "vcard-temp", new VCardProvider());

    //  Offline Message Requests
    pm.addIQProvider("offline", "http://jabber.org/protocol/offline", new OfflineMessageRequest.Provider());

    //  Offline Message Indicator
    pm.addExtensionProvider("offline", "http://jabber.org/protocol/offline", new OfflineMessageInfo.Provider());

    //  Last Activity
    pm.addIQProvider("query", "jabber:iq:last", new LastActivity.Provider());

    //  User Search
    pm.addIQProvider("query", "jabber:iq:search", new UserSearch.Provider());

    //  SharedGroupsInfo
    pm.addIQProvider("sharedgroup", "http://www.jivesoftware.org/protocol/sharedgroup", new SharedGroupsInfo.Provider());

    //  JEP-33: Extended Stanza Addressing
    pm.addExtensionProvider("addresses", "http://jabber.org/protocol/address", new MultipleAddressesProvider());

    //   FileTransfer
    pm.addIQProvider("si", "http://jabber.org/protocol/si", new StreamInitiationProvider());

    pm.addIQProvider("query", "http://jabber.org/protocol/bytestreams", new BytestreamsProvider());

    pm.addIQProvider("open", "http://jabber.org/protocol/ibb", new IBBProviders.Open());

    pm.addIQProvider("close", "http://jabber.org/protocol/ibb", new IBBProviders.Close());

    pm.addExtensionProvider("data", "http://jabber.org/protocol/ibb", new IBBProviders.Data());

    //  Privacy
    pm.addIQProvider("query", "jabber:iq:privacy", new PrivacyProvider());

    pm.addIQProvider("command", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider());
    pm.addExtensionProvider("malformed-action", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.MalformedActionError());
    pm.addExtensionProvider("bad-locale", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.BadLocaleError());
    pm.addExtensionProvider("bad-payload", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.BadPayloadError());
    pm.addExtensionProvider("bad-sessionid", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.BadSessionIDError());
    pm.addExtensionProvider("session-expired", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.SessionExpiredError());
} 
```

现在我将描述我的错误：从日志记录中，我收到 -1 作为“百分比”和“协商流”作为“状态”。我不知道我错在哪里以及如何开始转移。感谢您的任何意见或建议。

**编辑（2）** 现在我通过添加部分解决了我的问题

```
FileTransferNegotiator.IBB_ONLY = true; 
```

在初始化 FileTransferManager 并重新安排 ServiceDiscoveryManager 初始化之前，如下所示：

```
ServiceDiscoveryManager sdm = ServiceDiscoveryManager.getInstanceFor(this.xmpp);
     if (sdm==null)
         sdm = new ServiceDiscoveryManager(this.xmpp);
     sdm.addFeature("http://jabber.org/protocol/disco#info");
     sdm.addFeature("http://jabber.org/protocol/disco#item");
     sdm.addFeature("jabber:iq:privacy"); 
```

我还在启动时添加了以下配置：

SmackConfiguration.setPacketReplyTimeout(15000);

顺便说一句，现在我达到了与原始文件相同数量的进度值，但文件在接收方没有关闭。因此，超时被提高并且传输被中止。我如何传达文件的最终确定？似乎我传输了整个文件，即使其他客户端（Pidgin）没有处理它。再次提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T15:38:12.173

```
public void send()
{

    configureProviderManager(connection);
    FileTransferNegotiator.IBB_ONLY = true;
    FileTransferNegotiator.setServiceEnabled(connection, true);
    FileTransferManager manager = new FileTransferManager(connection);
    //OutgoingFileTransfer transfer = manager.createOutgoingFileTransfer("hariom@jabber.ccc.de/Smack");
    String to = connection.getRoster().getPresence("hariom@jabber.ccc.de").getFrom();
    OutgoingFileTransfer transfer = manager.createOutgoingFileTransfer(to);

    File file = new File("/sdcard/DCIM/Camera/1385869353956.jpg");
    try {
        Log.d("file sending",file.getAbsolutePath()+" "+file.getName());
        configureProviderManager(connection);
       transfer.sendFile(file, "test_file");
    } catch (XMPPException e) {
       e.printStackTrace();
    }

    while(!transfer.isDone()) {
        Log.d("status", transfer.getStatus().toString());
        Log.d("percent", new Long(transfer.getBytesSent()).toString());
        if (transfer.getStatus() == Status.error) {
            Log.e("percent", "Error " + new Long(transfer.getBytesSent()).toString() + " " + transfer.getError() + " " + transfer.getException());
            transfer.cancel();

        }

        if(transfer.getStatus().equals(Status.refused))
                 System.out.println("refused  " + transfer.getError());
        else if( transfer.getStatus().equals(Status.error))
             System.out.println(" error " + transfer.getError());
        else if(transfer.getStatus().equals(Status.cancelled))
           System.out.println(" cancelled  " + transfer.getError());
        else
           System.out.println("Success");

    }
}

public void configureProviderManager(XMPPConnection connection) {

    ProviderManager.getInstance().addIQProvider("query","http://jabber.org/protocol/bytestreams", new BytestreamsProvider());
    ProviderManager.getInstance().addIQProvider("query","http://jabber.org/protocol/disco#items", new DiscoverItemsProvider());
    ProviderManager.getInstance().addIQProvider("query","http://jabber.org/protocol/disco#info", new DiscoverInfoProvider());

    ProviderManager.getInstance().addIQProvider("query",
            "http://jabber.org/protocol/bytestreams",
            new BytestreamsProvider());
    ProviderManager.getInstance().addIQProvider("query",
            "http://jabber.org/protocol/disco#items",
            new DiscoverItemsProvider());
    ProviderManager.getInstance().addIQProvider("query",
            "http://jabber.org/protocol/disco#info",
            new DiscoverInfoProvider());

    ServiceDiscoveryManager sdm = ServiceDiscoveryManager.getInstanceFor(connection);
    if (sdm == null)
        sdm = new ServiceDiscoveryManager(connection);

    sdm.addFeature("http://jabber.org/protocol/disco#info");
    sdm.addFeature("http://jabber.org/protocol/disco#item");
    sdm.addFeature("jabber:iq:privacy");

    ProviderManager pm = ProviderManager.getInstance();

    // The order is the same as in the smack.providers file

    //  Private Data Storage
    pm.addIQProvider("query","jabber:iq:private", new PrivateDataManager.PrivateDataIQProvider());
    //  Time
    try {
        pm.addIQProvider("query","jabber:iq:time", Class.forName("org.jivesoftware.smackx.packet.Time"));
    } catch (ClassNotFoundException e) {
        System.err.println("Can't load class for org.jivesoftware.smackx.packet.Time");
    }

    //  Roster Exchange
    pm.addExtensionProvider("x","jabber:x:roster", new RosterExchangeProvider());
    //  Message Events
    pm.addExtensionProvider("x","jabber:x:event", new MessageEventProvider());
    //  Chat State
    pm.addExtensionProvider("active","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
    pm.addExtensionProvider("composing","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
    pm.addExtensionProvider("paused","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
    pm.addExtensionProvider("inactive","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
    pm.addExtensionProvider("gone","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());

    //  XHTML
    pm.addExtensionProvider("html","http://jabber.org/protocol/xhtml-im", new XHTMLExtensionProvider());

    //  Group Chat Invitations
    pm.addExtensionProvider("x","jabber:x:conference", new GroupChatInvitation.Provider());
    //  Service Discovery # Items
    pm.addIQProvider("query","http://jabber.org/protocol/disco#items", new DiscoverItemsProvider());
    //  Service Discovery # Info
    pm.addIQProvider("query","http://jabber.org/protocol/disco#info", new DiscoverInfoProvider());
    //  Data Forms
    pm.addExtensionProvider("x","jabber:x:data", new DataFormProvider());
    //  MUC User
    pm.addExtensionProvider("x","http://jabber.org/protocol/muc#user", new MUCUserProvider());
    //  MUC Admin
    pm.addIQProvider("query","http://jabber.org/protocol/muc#admin", new MUCAdminProvider());
    //  MUC Owner
    pm.addIQProvider("query","http://jabber.org/protocol/muc#owner", new MUCOwnerProvider());
    //  Delayed Delivery
    pm.addExtensionProvider("x","jabber:x:delay", new DelayInformationProvider());
    pm.addExtensionProvider("delay", "urn:xmpp:delay", new DelayInformationProvider());
    //  Version
    try {
        pm.addIQProvider("query","jabber:iq:version", Class.forName("org.jivesoftware.smackx.packet.Version"));
    } catch (ClassNotFoundException e) {
        System.err.println("Can't load class for org.jivesoftware.smackx.packet.Version");
    }
    //  VCard
    pm.addIQProvider("vCard","vcard-temp", new VCardProvider());
    //  Offline Message Requests
    pm.addIQProvider("offline","http://jabber.org/protocol/offline", new OfflineMessageRequest.Provider());
    //  Offline Message Indicator
    pm.addExtensionProvider("offline","http://jabber.org/protocol/offline", new OfflineMessageInfo.Provider());
    //  Last Activity
    pm.addIQProvider("query","jabber:iq:last", new LastActivity.Provider());
    //  User Search
    pm.addIQProvider("query","jabber:iq:search", new UserSearch.Provider());
    //  SharedGroupsInfo
    pm.addIQProvider("sharedgroup","http://www.jivesoftware.org/protocol/sharedgroup", new SharedGroupsInfo.Provider());

    //  JEP-33: Extended Stanza Addressing
    pm.addExtensionProvider("addresses","http://jabber.org/protocol/address", new MultipleAddressesProvider());

    //   FileTransfer
    pm.addIQProvider("si","http://jabber.org/protocol/si", new StreamInitiationProvider());
    pm.addIQProvider("query","http://jabber.org/protocol/bytestreams", new BytestreamsProvider());
    pm.addIQProvider("open","http://jabber.org/protocol/ibb", new OpenIQProvider());
    pm.addIQProvider("data","http://jabber.org/protocol/ibb", new DataPacketProvider());
    pm.addIQProvider("close","http://jabber.org/protocol/ibb", new CloseIQProvider());
    pm.addExtensionProvider("data","http://jabber.org/protocol/ibb", new DataPacketProvider());

    //  Privacy
    pm.addIQProvider("query","jabber:iq:privacy", new PrivacyProvider());

    // SHIM
    pm.addExtensionProvider("headers", "http://jabber.org/protocol/shim", new HeadersProvider());
    pm.addExtensionProvider("header", "http://jabber.org/protocol/shim", new HeaderProvider());

    // PubSub
    pm.addIQProvider("pubsub", "http://jabber.org/protocol/pubsub", new PubSubProvider());
    pm.addExtensionProvider("create", "http://jabber.org/protocol/pubsub", new SimpleNodeProvider());
    pm.addExtensionProvider("items", "http://jabber.org/protocol/pubsub", new ItemsProvider());
    pm.addExtensionProvider("item", "http://jabber.org/protocol/pubsub", new ItemProvider());
    pm.addExtensionProvider("subscriptions", "http://jabber.org/protocol/pubsub", new SubscriptionsProvider());
    pm.addExtensionProvider("subscription", "http://jabber.org/protocol/pubsub", new SubscriptionProvider());
    pm.addExtensionProvider("affiliations", "http://jabber.org/protocol/pubsub", new AffiliationsProvider());
    pm.addExtensionProvider("affiliation", "http://jabber.org/protocol/pubsub", new AffiliationProvider());
    pm.addExtensionProvider("options", "http://jabber.org/protocol/pubsub", new FormNodeProvider());
    // PubSub owner
    pm.addIQProvider("pubsub", "http://jabber.org/protocol/pubsub#owner", new PubSubProvider());
    pm.addExtensionProvider("configure", "http://jabber.org/protocol/pubsub#owner", new FormNodeProvider());
    pm.addExtensionProvider("default", "http://jabber.org/protocol/pubsub#owner", new FormNodeProvider());
    // PubSub event
    pm.addExtensionProvider("event", "http://jabber.org/protocol/pubsub#event", new EventProvider());
    pm.addExtensionProvider("configuration", "http://jabber.org/protocol/pubsub#event", new ConfigEventProvider());
    pm.addExtensionProvider("delete", "http://jabber.org/protocol/pubsub#event", new SimpleNodeProvider());
    pm.addExtensionProvider("options", "http://jabber.org/protocol/pubsub#event", new FormNodeProvider());
    pm.addExtensionProvider("items", "http://jabber.org/protocol/pubsub#event", new ItemsProvider());
    pm.addExtensionProvider("item", "http://jabber.org/protocol/pubsub#event", new ItemProvider());
    pm.addExtensionProvider("retract", "http://jabber.org/protocol/pubsub#event", new RetractEventProvider());
    pm.addExtensionProvider("purge", "http://jabber.org/protocol/pubsub#event", new SimpleNodeProvider());

    // Nick Exchange
    pm.addExtensionProvider("nick", "http://jabber.org/protocol/nick", new Nick.Provider());

    // Attention
    pm.addExtensionProvider("attention", "urn:xmpp:attention:0", new AttentionExtension.Provider());

    //input
    pm.addIQProvider("si", "http://jabber.org/protocol/si",
            new StreamInitiationProvider());
    pm.addIQProvider("query", "http://jabber.org/protocol/bytestreams",
            new BytestreamsProvider());
    pm.addIQProvider("open", "http://jabber.org/protocol/ibb",
            new OpenIQProvider());
    pm.addIQProvider("close", "http://jabber.org/protocol/ibb",
            new CloseIQProvider());
    pm.addExtensionProvider("data", "http://jabber.org/protocol/ibb",
            new DataPacketProvider());

} 
```

# c++ - 运行给出错误的数字，但调试效果很好？

> ID：10457575
> 
> 赞同：2
> 
> 时间：2012-05-04T23:59:31.380
> 
> 标签：c++, boost

我的代码有问题。当我运行代码时，短“操作码”的值是**错误**的52496。所以我逐步调试代码......当我这样做时，“操作码”的值是正确的 4624！有人可以给我一个提示吗？

```
void packet_get()
{
    boost::shared_ptr<boost::array<unsigned char, 2>> opc(new boost::array<unsigned char, 2>);
    recv_two_bytes(opc);
    unsigned short opcode;

    unsigned char * test[2];
    test[0] = &opc->at(0);  // *test[0] == 0x12
    test[1] = &opc->at(1);  // *test[1] == 0x10

    opcode = 0;
    int i = 0;
    for(i = 0; i <= 1; i++)
    {
        opcode = (opcode<<8) | *(test[i]);
    }
    // opcode should now be short 4624
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T01:09:26.833

通常，当程序在正常运行和调试运行之间的行为不同时，这是由于未定义的行为。一个这样的常见错误是未初始化的变量。

当您执行一个程序时，它会得到一个很可能未初始化的堆栈。在调试模式下，调试器可以初始化此堆栈。因此，未初始化的变量在调试和正常执行中很容易具有不同的值（即使在调试模式下为 0，大多数情况下您实际上想要给变量但忘记了）。

似乎您的`recv_two_bytes`函数中有类似的错误。如果问题更微不足道，则启用编译器上的所有警告将有助于确定问题。

请注意其他错误，例如从数组中索引。

# apache-flex - Flex SWFLoader - 嵌入式 SWF 与父应用程序的相对根路径

> ID：10457576
> 
> 赞同：1
> 
> 时间：2012-05-04T23:59:31.750
> 
> 标签：apache-flex, actionscript, swfloader

我正在尝试将外部生成的 SWF 文件 (Pano2VR) 加载到我的主 Flex 应用程序中。我使用 SWFLoader MXML 对象，并且在本地一切正常。我真的很想将子 SWF 放入另一个域（云）。这也很好用（一旦我设置了 crossdomain.xml 文件），但有一个问题。

子 SWF 应用程序本身请求附加图像 - 问题是请求的文件路径是相对的。查看网络调用跟踪（在浏览器中），我看到子 SWF 文件现在认为它的基本 URL 路径是我父 SWF 的基本 URL 路径。

例如：我的（父）Flex 应用程序托管在 www.xyz.com，而我的“子”SWF 文件托管在 www.123.com。从技术上讲，“子”SWF 文件需要根据 www.123.com 的基本路径查找其资源 - 但是我看到它正在查询我的父应用程序的基本路径 www.xyz.com。我无法控制“子”SWF，只能控制我正在编写的包含一个。

有什么方法可以从我的应用程序中覆盖加载的 SWF 文件（在 SWFLoader 中）的基本 url 路径？

谢谢你的帮助！弗雷德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:08:54.440

您必须决定您的子模块将被加载到哪个应用程序域。 [看看这个文档](http://livedocs.adobe.com/flex/3/html/help.html?content=18_Client_System_Environment_5.html)

默认情况下，应用程序域加载到父域中，从而获得您所看到的行为。

# android - 如何一个接一个地动态创建按钮？

> ID：10457579
> 
> 赞同：0
> 
> 时间：2012-05-04T23:59:45.433
> 
> 标签：android, layout

我有一些 Android 开发经验，但我完全迷失在一个简单的任务中（至少看起来很简单）。

我有一个字符串数组列表，我想从布局列表中的字符串创建按钮。它不一定是按钮 - 它可以是任何可点击的对象（带有文本）。

主要问题是我想一个接一个地创建它们，当它们不适合屏幕时 - 应该创建新行。

普通线性布局可以将它们水平排列，但不会创建新行。我也尝试了网格视图，它几乎是它 - 但它是一个网格，所以所有列的大小都相同（但文本可以不同，所以我不喜欢它）。

任何想法如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:23:06.533

Android 中没有流式布局。您必须要么实现自己的自定义布局（不是微不足道的），要么找到第三方流布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:14:09.520

你可以试试这样的。

```
// get the width of the screen
Display display = getWindowManager().getDefaultDisplay();
int windowWidth = display.getWidth();

// keep track of the width of your views on the current row
int cumulativeWidth = 0;

// the width of your new view
int newWidth = // insert some number here based on the length of text.

// get your main layout here
ViewGroup main = (ViewGroup)findViewById(R.id.YOUR_HOLDING_LAYOUT);

// the linear layout holding our views
LinearyLayout linear = null;
// see if we need to create a new row
if (newWidth + cumulativeWidth > windowWidth){
    linear = new LinearLayout(this);
    // set you layout params, like orientation horizontal and width and height. This code may have typos, so double check
    LayoutParams params = new LayoutParams(LinearLayout.FILL_PARENT, LinearLayout.WRAP_CONTENT);
   params.setOrientation(HORIZONTAL); // this line is not correct, you need to look up how to set the orientation to horizontal correctly.
    linear.setParams(params);
    main.addView(linear);
// reset cumulative width
cumulativeWidth = 0;
}

// no create you new button or text using newWidth
View newView = ... // whatever you need to do to create the view

linear.addView(newView);

//keep track of your cumulatinv width
cumulativeWidth += newWidth; 
```

# django - Django 和 Twitter-Bootstrap 的页面渲染问题

> ID：10457582
> 
> 赞同：0
> 
> 时间：2012-05-05T00:00:05.620
> 
> 标签：django, twitter-bootstrap

我是 Django 新手，第一次阅读[Django Book](http://djangobook.com/)。我尝试将一些引导的 html 放入文件中：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/js/google-code-prettify/prettify.css" rel="stylesheet">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
</head>
<body>
    <header><a href="index.html" title="Home"><img src="assets/img/logo.png" alt="Test" /></a></header>
    <div class="container" style="text-align:center;">
        <br /><br />
        <form class="search form-inline" action="searchresults.html">
            <div class="input-append">
                <input class="search-input input-xxlarge" id="appendedPrependedInput" size="16" type="text" placeholder="Type in your search"><button class="btn btn-large btn-danger" type="submit">Search</button>
                </div>
            <!--<input type="text" class="search-input input-xlarge" placeholder="Type in your search">
            <button type="submit" class="btn btn-large btn-danger">Search</button> -->
        </form>

        <hr class="soften">

    </div>
</body>
</html> 
```

并用这个视图渲染它：

```
def search(request):
    return render_to_response('search_page.html') 
```

当我使用启动测试服务器时，`python manage.py runserver`我得到一个简单丑陋的 html 页面，而不是引导页面。为什么是这样？（我确实在同一目录中有引导资产）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:23:45.723

您的静态文件可能没有正确设置。转到“查看源代码”并单击 CSS 文件并查看是否收到 404。

以下是设置静态文件目录的方法：http: [//docs.djangoproject.com/en/dev/howto/static-files](http://docs.djangoproject.com/en/dev/howto/static-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:39:40.063

我还建议查看[django-bootstrap-toolkit](https://github.com/dyve/django-bootstrap-toolkit)。

# python - 重新定义 Pandas DataFrame 对象中的索引

> ID：10457584
> 
> 赞同：86
> 
> 时间：2012-05-05T00:00:12.300
> 
> 标签：python, pandas, dataframe

我正在尝试重新索引熊猫`DataFrame`对象，就像这样，

```
From:
            a   b   c
        0   1   2   3
        1  10  11  12
        2  20  21  22

To :
           b   c
       1   2   3
      10  11  12
      20  21  22 
```

我正在解决这个问题，如下所示并且得到了错误的答案。关于如何做到这一点的任何线索？

```
>>> col = ['a','b','c']
>>> data = DataFrame([[1,2,3],[10,11,12],[20,21,22]],columns=col)
>>> data
    a   b   c
0   1   2   3
1  10  11  12
2  20  21  22
>>> idx2 = data.a.values
>>> idx2
array([ 1, 10, 20], dtype=int64)
>>> data2 = DataFrame(data,index=idx2,columns=col[1:])
>>> data2
     b   c
1   11  12
10 NaN NaN
20 NaN NaN 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-05-05T02:44:12.800

你为什么不简单地使用[`set_index`](http://pandas.pydata.org/pandas-docs/stable/indexing.html#add-an-index-using-dataframe-columns)方法？

```
In : col = ['a','b','c']

In : data = DataFrame([[1,2,3],[10,11,12],[20,21,22]],columns=col)

In : data
Out:
    a   b   c
0   1   2   3
1  10  11  12
2  20  21  22

In : data2 = data.set_index('a')

In : data2
Out:
     b   c
a
1    2   3
10  11  12
20  21  22 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-10T12:39:42.300

如果您不想在索引中出现“a”

在 ：

```
col = ['a','b','c']

data = DataFrame([[1,2,3],[10,11,12],[20,21,22]],columns=col)

data 
```

出去：

```
 a   b   c
0   1   2   3
1  10  11  12
2  20  21  22 
```

在 ：

```
data2 = data.set_index('a') 
```

出去：

```
 b   c
a
1    2   3
10  11  12
20  21  22 
```

在 ：

```
data2.index.name = None 
```

出去：

```
 b   c
 1   2   3
10  11  12
20  21  22 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-24T09:17:48.637

为避免使用单行索引名称，您可以使用`set_index('a')`with`rename_axis(None)`

```
In [8]: data.set_index('a').rename_axis(None)
Out[8]: 
     b   c
1    2   3
10  11  12
20  21  22 
```

* * *

细节

```
In [9]: data
Out[9]: 
    a   b   c
0   1   2   3
1  10  11  12
2  20  21  22 
```

# xslt - XSLT 匹配模板以仅更改一次属性

> ID：10457587
> 
> 赞同：1
> 
> 时间：2012-05-05T00:00:32.433
> 
> 标签：xslt, match

我有一个具有特定属性 (myId) 的文档，只要它的值为零，就需要更新它的值。文件看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?><Summary>
 <Section myId="0">
  <Section myId="0">
   <Para>...</Para>
  </Section>
  <Section myId="5">
   <Para>...</Para>
  </Section>
 </Section>
</Summary> 
```

我正在使用模板来匹配属性 myId 以便将其设置为从调用程序传递的唯一 ID，但我只想匹配文档中的一个属性。任何值为 0 的附加属性都将通过传递不同的 ID 进行更新。我正在使用的模板如下所示：

```
 <xsl:template        match  = '@myId[.="0"]'>
  <xsl:attribute name = "{name()}">
   <xsl:value-of select = "$addValue"/>
  </xsl:attribute>
 </xsl:template> 
```

值 addValue 是从调用程序传递的全局参数。我在一天的大部分时间里都在寻找答案，但我无法让这个模板只应用一次。输出将两个 myId 值替换为 addValue 的内容。我尝试与 '@myId[."0"][1]' 匹配，并尝试使用 position() 函数进行匹配，但我的模板始终应用于所有为零的 myId 属性。

是否可以只应用一次匹配的模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:40:56.310

> 是否可以只应用一次匹配的模板？

**是的**：

1.  是否应用模板取决于`xsl:apply-templates`导致选择模板执行的原因。

2.  另外，匹配模式可以通过一种方式指定，以保证模板只匹配文档中的一个特定节点。

**这是您可以执行的操作**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pNewIdValue" select="9999"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "Section
   [@myId = 0
  and
    not((preceding::Section | ancestor::Section)
                 [@myId = 0]
       )
   ]/@myId">
  <xsl:attribute name="myId"><xsl:value-of select="$pNewIdValue"/></xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<Summary>
    <Section myId="0">
        <Section myId="0">
            <Para>...</Para>
        </Section>
        <Section myId="5">
            <Para>...</Para>
        </Section>
    </Section>
</Summary> 
```

**产生了想要的正确结果：**

```
<Summary>
   <Section myId="9999">
      <Section myId="0">
         <Para>...</Para>
      </Section>
      <Section myId="5">
         <Para>...</Para>
      </Section>
   </Section>
</Summary> 
```

# facebook-c#-sdk - FB 在单击 Open Graph Activity Feed 链接时请求权限？

> ID：10457589
> 
> 赞同：0
> 
> 时间：2012-05-05T00:00:48.550
> 
> 标签：facebook-c#-sdk, facebook-opengraph

我正在构建一个 facebook 网络应用程序。我已成功将开放图形活动发布到测试用户的时间线。现在，当以同一用户身份登录时，我在时间轴中查看该活动，然后单击链接以查看与该活动关联的 URL，它再次向我询问权限。具体来说，它要求“位置”信息和“管理您的活动”。

请注意，这是在用户已经使用这些权限（user_about_me、publish_stream、friends_about_me、email、publish_actions）授权应用程序之后。

那么为什么它会要求更多的权限，只是为了查看一个链接呢？另请注意，每次我单击该链接时都会询问...而不仅仅是第一次。

任何指针都非常感谢！

提前致谢，乍得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T18:45:43.770

必须在 Facebook 开发人员的应用程序权限中禁用经过身份验证的推荐

[https://developers.facebook.com/docs/opengraph/authentication/#referrals](https://developers.facebook.com/docs/opengraph/authentication/#referrals)

> “经过身份验证的推荐是一项新功能，可确保从 Facebook 到您的应用程序的所有推荐流量都已连接到 Facebook。到达您的应用程序的访问者将自动登录，并在必要时提示您请求的任何权限。”

# c# - 使用 C# 的 T4 代码转换

> ID：10457593
> 
> 赞同：1
> 
> 时间：2012-05-05T00:01:35.637
> 
> 标签：c#, wcf, t4, transformation

简而言之，我目前正在为我的大学研究一个研究问题，该问题专注于基于分析和设计方法论的面向服务的解决方案的模型转换。收集元模型后，我的工作是将这些需求转换为可行且可部署的 WCF 组件服务库。到目前为止，我已经成功地使用预处理文本模板将所有必需的对象转换为 C# 代码，但是我的问题是：

*   如何将所有生成的文件与可构建的项目文件 (*.csproj) 组合在一起。我不希望用户必须创建一个新项目并手动添加生成的文件。相反，应该自动生成包含所有文件并添加了装配引用的文件，并且用户应该能够从磁盘上的某个位置打开项目。
*   处理或管理程序集引用的最佳方法是什么，我如何能够在运行时包含它们？即，要使用 [ ] 属性标记接口，`ServiceContract`我首先需要添加 Systems.ServiceModel 作为对项目的引用，然后将其包含在模块中。如何才能做到这一点？
*   最后，如何生成 web.config 配置文件来定义服务行为、端点地址、绑定或任何其他需要的设置。我不觉得 T4 模板是正确的方法。

对于上述问题的任何建议或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:58:04.633

啊哈，我能够通过使用带有程序集引用的预定义项目模板和已经包含的默认 web.config 来实现这一点。完成转换后，我将使用与转换后的服务相关的详细信息更新 web.config 中的相应部分。

```
DTE2 dte2 = (DTE2)System.Runtime.InteropServices.Marshal.GetActiveObject("VisualStudio.DTE.10.0");
Solution2 soln = (Solution2)dte2.Solution;

string templateFileLoc = soln.GetProjectTemplate("My Pre-defined project template", "csproj");

soln.AddFromTemplate(templateFileLoc, outputDir, projectName, false);

var proj = soln.Projects.Item(soln.Projects.Count);

proj.ProjectItems.AddFromFileCopy(generatedFile); 
```

# c# - 存储参数化的部分 HTML 页面以供 ASMX 服务使用？

> ID：10457600
> 
> 赞同：0
> 
> 时间：2012-05-05T00:02:57.253
> 
> 标签：c#, asp.net, asmx, ascx

我有一个 ASMX 服务，它作为 JSON 对象的一部分向 Web 应用程序提供一些部分 HTML。到目前为止，我一直在使用 StringBuilders 在代码中构建 HTML。这是一个巨大的痛苦，因为格式很难阅读，而且我无法使用 Visual Studio/Resharper 的任何代码完成、语法突出显示和其他方便的功能。

我尝试使用用户控件来解决这个问题（如果有更好的方法，我不会致力于这种方法。我只需要一些非常简单的参数化静态部分 HTML 页面），但是现在我在尝试渲染时遇到了问题像这样的控制：

```
public override string Html
    {
        get 
        {
            StringWriter writer = new StringWriter();
            HtmlTextWriter htmlWriter = new HtmlTextWriter(writer);
            CreateTestWizardPartials.TestPeriods testPeriodsHtml = new CreateTestWizardPartials.TestPeriods();
            testPeriodsHtml.RenderControl(htmlWriter);
            htmlWriter.Flush();

            return writer.ToString();
        }
    } 
```

这总是返回一个空字符串。我读过您需要使用 Page.LoadControl() 来动态加载用户控件，但没有可供我使用的 Page。是否有比用户控件更好的解决方法或解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:46:44.683

您可以加载包含您需要的部分标记的静态 HTML 文件。如果您需要以某种方式将标记与动态数据绑定，则通过模板引擎呈现 HTML 文件。

这是关于 ASP.Net 的一些模板系统的旧帖子： [你能推荐一个 .net 模板引擎吗？](https://stackoverflow.com/questions/340095/can-you-recommend-a-net-template-engine)

还有一篇关于 ASP.Net MVC 的最新帖子： [JQuery's $ is in conflict with that of StringTemplate.Net in ASP.Net MVC](https://stackoverflow.com/questions/173207/best-template-engine-for-asp-net-mvc)

# c++ - 如何使用 boost::spirit 将文本解析为结构？

> ID：10457605
> 
> 赞同：4
> 
> 时间：2012-05-05T00:03:23.003
> 
> 标签：c++, parsing, boost, boost-spirit, boost-spirit-qi

我正在学习`boost::spirit`，我正在尝试阅读一些文本并将其解析为结构。

例如，在我的下面`"2: 4.6"`被解析为 int`2`和 double ：`4.6``TestStruct`

```
#include <iostream>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/support_istream_iterator.hpp>
#include <boost/fusion/include/std_pair.hpp>
namespace qi = boost::spirit::qi;

struct TestStruct {
  int myint;
  double mydouble;
  TestStruct() {}
  TestStruct(std::pair<int,double> p) : myint(p.first), mydouble(p.second) {}
};

template <typename Iterator, typename Skipper>
struct MyGrammar : qi::grammar<Iterator, TestStruct(), Skipper> {
  MyGrammar() : MyGrammar::base_type(mystruct) {
    mystruct0 = qi::int_ >> ":" >> qi::double_;
    mystruct = mystruct0;
  }
  qi::rule<Iterator, std::pair<int,double>(), Skipper> mystruct0;
  qi::rule<Iterator, TestStruct(), Skipper> mystruct;
};

int main() {
  typedef boost::spirit::istream_iterator It;
  std::cin.unsetf(std::ios::skipws);
  It it(std::cin), end; // input example: "2: 3.4"                                                                              

  MyGrammar<It, qi::space_type> gr;
  TestStruct ts;
  if (qi::phrase_parse(it, end, gr, qi::space, ts) && it == end)
    std::cout << ts.myint << ", " << ts.mydouble << std::endl;
  return 0;
} 
```

它工作得很好，但我想知道如何简化这段代码？

例如，我想摆脱`mystruct0`语法规则，该规则仅用于标记类型`std::pair<int,double>`，然后用于从规则中自动构造`TestStruct`对象。`mystruct`

如果可能的话，我还希望能够摆脱`TestStruct`构造函数`std::pair`。

那么，下面的代码可以以某种方式进行编译吗？那将是一个更好的解决方案：

```
struct TestStruct {
  int myint;
  double mydouble;
  TestStruct() {}
  TestStruct(int i, double d) : myint(i), mydouble(d) {}
};

template <typename Iterator, typename Skipper>
struct MyGrammar : qi::grammar<Iterator, TestStruct(), Skipper> {
  MyGrammar() : MyGrammar::base_type(mystruct) {
    mystruct = qi::int_ >> ":" >> qi::double_;
  }
  qi::rule<Iterator, TestStruct(), Skipper> mystruct;
};

int main() {
  typedef boost::spirit::istream_iterator It;
  std::cin.unsetf(std::ios::skipws);
  It it(std::cin), end; // input example: "2: 3.4"                                                                              

  MyGrammar<It, qi::space_type> gr;
  TestStruct ts;
  if (qi::phrase_parse(it, end, gr, qi::space, ts) && it == end)
    std::cout << ts.myint << ", " << ts.mydouble << std::endl;
  return 0;
} 
```

不幸的是，编译器说：

```
boost_1_49_0/include/boost/spirit/home/qi/detail/assign_to.hpp:123: 
error: no matching function for call to ‘TestStruct::TestStruct(const int&)’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:09:26.837

为了能够将值“按顺序”解析为结构，您需要将其转换为元组，如此[处](http://www.boost.org/doc/libs/1_41_0/libs/spirit/doc/html/spirit/qi/tutorials/employee___parsing_into_structs.html)`fusion`所述。

在您的情况下，这意味着您需要

1.  包括必要的标题

    ```
    #include <boost/fusion/adapted/struct/adapt_struct.hpp> 
    ```

2.  使用 fusion-adapt 结构宏。最好把它*放在声明之后`TestStruct`*：

    ```
    BOOST_FUSION_ADAPT_STRUCT(
            TestStruct,
            (int,myint)
            (double,mydouble)
         ) 
    ```

通过这两个更改，您的简化版本可以编译并产生所需的结果。不确定它现在是否真的简单得多——但如果您打算向结构添加更多成员，这是一个很好的起点，因为它可能有助于将来简化事情。

我看不到您可以进行任何其他重大更改以使程序更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:25:51.390

是的，可以编译代码。事实上，你可以不用构造函数：默认的（编译器生成的）构造函数就可以了。

您需要做的就是将您的结构调整为融合序列。（作为奖励，这也适用于业力。）
***这正是`std::pair`最初产生作用的魔力。***

```
#include <iostream>
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/adapted/struct.hpp>
namespace qi = boost::spirit::qi;

struct TestStruct {
    int myint;
    double mydouble;
};

BOOST_FUSION_ADAPT_STRUCT(TestStruct, (int, myint)(double, mydouble));

template <typename Iterator, typename Skipper>
struct MyGrammar : qi::grammar<Iterator, TestStruct(), Skipper> {
    MyGrammar() : MyGrammar::base_type(mystruct) {
        mystruct = qi::int_ >> ":" >> qi::double_;
    }
    qi::rule<Iterator, TestStruct(), Skipper> mystruct;
};

int main() {
    typedef std::string::const_iterator It;
    const std::string input("2: 3.4");
    It it(input.begin()), end(input.end());

    MyGrammar<It, qi::space_type> gr;
    TestStruct ts;

    if (qi::phrase_parse(it, end, gr, qi::space, ts) && it == end)
        std::cout << ts.myint << ", " << ts.mydouble << std::endl;

    return 0;
} 
```

# javascript - 如何为 JSON 复制 XMLHttpRequest

> ID：10457606
> 
> 赞同：1
> 
> 时间：2012-05-05T00:03:25.210
> 
> 标签：javascript, json, parsing, xmlhttprequest, external

JSON 新手，只是想弄湿我的脚。

我知道如何通过 javascript 使用 XML 来执行此操作，但我正在尝试学习如何处理 JSON 对象以便可以切换。

基本上我想搜索以下 JSON 对象中的所有“永久链接”标签，当我找到正确的标签时，将其相应的“标题”和“id”标签保存到 javascript 变量中： http: [//api.soundcloud.com/用户/goldenstatewarriors/tracks.json?client_id=02db8e29aa2fb5bf590f478b73137c67](http://api.soundcloud.com/users/goldenstatewarriors/tracks.json?client_id=02db8e29aa2fb5bf590f478b73137c67)

这可以只用javascript（没有PHP）来完成吗？我面临的主要问题只是从页面中获取文本并将其转换为 json 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:25:20.230

您需要使用 JSON 解析器来将 JSON 字符串转换为可以在 JavaScript 中本地处理的对象。最近的浏览器以 JSON.parse() 的形式内置了这个功能，但显然这在旧浏览器中不起作用（我们在这里谈论的是非常旧的浏览器）。

该问题的解决方案是使用[此处](https://github.com/douglascrockford/JSON-js)提供的 JSON 解析库。如果检测到本机浏览器支持，它会简单地使用它，否则它有一个 JavaScript 实现来实现相同的结果。您需要的文件是 json2.js - 只需像其他任何库一样包含它，然后就可以了！

代码示例如下：

```
var dataObject = JSON.parse(jsonData); 
```

作为旁注，XMLHttpRequest 这些天有点用词不当。它只是一种发出 HTTP 请求和检索返回数据的机制，它不必是 XML。它可以是纯文本、（非 X）HTML、JSON 等等。事实上，我认为我在*很*长一段时间内都没有看到任何东西为 XMLHttpRequest 返回实际的 XML 数据。

# javascript - 使用 html2canvas 创建网页截图（无法正确初始化）

> ID：10457608
> 
> 赞同：18
> 
> 时间：2012-05-05T00:03:29.787
> 
> 标签：javascript, html, screenshot, html2canvas

我正在尝试使用[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)截取我的网页截图。我无法使用...初始化画布元素

```
var canvas = $('body').html2canvas(); 
```

如果我能够获得合适的画布，我会遵循类似的东西

```
var dataUrl = canvas.toDataURL(); //get's image string
window.open(dataUrl);             // display image 
```

不幸的是，IMO 的文件非常有限。[http://html2canvas.hertzen.com/documentation.html](http://html2canvas.hertzen.com/documentation.html)。我不相信我需要预加载，因为我没有使用任何动态图形（但无论如何都没有走那么远）

我太菜鸟了，不明白这个人是否在[使用 html2canvas 进行屏幕捕获方面取得了成功](https://stackoverflow.com/questions/7074292/screen-capturing-using-html2canvas)

我似乎没有比这家伙走得更远.. [如何使用 html2canvas 上传屏幕截图？](https://stackoverflow.com/questions/9250505/how-to-upload-a-screenshot-using-html2canvas)

我理想的解决方案将演示如何用最少的代码创建屏幕截图。（将 html 复制到画布。获取 toDataURL 字符串。输出字符串）

任何见解都非常感谢=）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-09T23:46:42.660

你应该这样使用它：

```
$('body').html2canvas();
var queue = html2canvas.Parse();
var canvas = html2canvas.Renderer(queue,{elements:{length:1}});
var img = canvas.toDataURL();
window.open(img); 
```

我花了几个小时才弄清楚如何正确使用它。是必需的`{elements:{length:1}}`，由于插件的实现不完整，否则你会得到一个错误。

祝你好运！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-30T11:50:46.523

您还可以使用以下内容：

```
var html2obj = html2canvas($('body'));

var queue  = html2obj.parse();
var canvas = html2obj.render(queue);
var img = canvas.toDataURL();

window.open(img); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-19T09:08:09.287

要获取页面的一部分，您可以这样使用它：

```
$('#map').html2canvas({
onrendered: function( canvas ) {
  var img = canvas.toDataURL()
  window.open(img);
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-10T15:58:50.880

这对我有用。

```
html2canvas(document.body, {
   onrendered: function(canvas) {
     var img = canvas.toDataURL()
     window.open(img);
  }
}); 
```

这为屏幕截图创建了一个新窗口。

我只想要屏幕截图中的一部分页面，特别是容器 div。所以我做了以下事情：

```
html2canvas($('#myDiv'), {
   onrendered: function(canvas) {
     var img = canvas.toDataURL()
     window.open(img);
  }
}); 
```

对于查找相同问题的人，如果上述选项没有帮助，希望这会。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-18T06:03:36.720

您可以使用以下代码截取屏幕截图并下载屏幕截图。

**html按钮创建**

```
<button class="btn btn-default btn-sm" style="margin:0px 0px -10px 970px; padding:2px 4px 1px 4px" onclick="genScreenshot()"><span class="glyphicon glyphicon-envelope"></span></button>
<a id="test"></a>
<div id="box1"></div> 
```

**函数定义**

```
<script type="text/javascript">                         
function genScreenshot() {
html2canvas(document.body, {
  onrendered: function(canvas) {
  $('#box1').html("");

  if (navigator.userAgent.indexOf("MSIE ") > 0 || 
                navigator.userAgent.match(/Trident.*rv\:11\./)) 
        {
    var blob = canvas.msToBlob();
    window.navigator.msSaveBlob(blob,'Test file.png');
  }
  else {
    $('#test').attr('href', canvas.toDataURL("image/png"));
    $('#test').attr('download','screenshot.png');
    $('#test')[0].click();
  }

  }
});
}  
</script> 
```

**注意**：我创建了一个 html 按钮，我在其中调用了该函数。`test`是一个属性，`box1`是用来获取canvas元素的。

# javascript - JavaScript/DOM - 帮助删除我的内联 JavaScript

> ID：10457610
> 
> 赞同：-1
> 
> 时间：2012-05-05T00:03:40.380
> 
> 标签：javascript, dom

作为 JavaScript 新手，我无法想出解决此问题的方法。

我希望每个“添加到购物车”按钮都调用相同的功能“AddtoCart”。我已经实现了这一点，但是以内联 JavaScript 为代价——这是我想避免的。

`onclick= "AddToCart(document.getElementById('toy_title1').innerHTML,document.getElementById('toy_quantity1').value,document.getElementById('toy_price1').innerHTML)`

那么我将如何实现将其作为外部 JavaScript 文件的一部分，记住我必须能够将其应用于所有 4 个独特的项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:16:41.697

那么你应该阅读更多关于[addEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)（标准）和[attachEvent](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)（IE）

```
//assume element means the button
//you can use getElementsByTagName, getElementsByClassName, querySelectorAll etc.
//to fetch your elements

//DRY, store the operation in a function so it's reusabe and not written twice
function thisFunction(){
    AddToCart(document.getElementById('toy_title1').innerHTML,
        document.getElementById('toy_quantity1').value,
        document.getElementById('toy_price1').innerHTML)
}

if(element.addEventListener){                      //check if the standard is supported
    element.addEventListener('click',function(){   //use it to add the handler
        thisFunction();
    });
} else {
    element.attachEvent('onclick',function(){      //else, we use IE's version
        thisFunction();
    }, false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:19:20.387

你可以这样改变你的功能：

```
function AddToCart(toyId) {
  var title = document.getElementById('toy_title'+toyId).innerHTML;
  var quantity = document.getElementById('toy_quantity'+toyId).value;
  var price = document.getElementById('toy_price')+toyId).innerHTML
} 
```

然后在每个按钮上，您只需传递玩具的 ID

请注意价格等敏感数据，将其保留在 Javascript 上（我想您将在此之后将其发送到您的后端）是危险的，它很容易被操纵。

但如果你的意图只是一个测试或类似的东西，没关系。

编辑：要调用你的这个函数，你会做这样的事情：

```
onclick="AddToCart(1)" 
```

其中 1 是您的玩具 ID，您应该将其更改为 2,3...，具体取决于您的玩具。

# c++ - 将 Shell32.lib 的依赖添加到 WDK makefile

> ID：10457622
> 
> 赞同：1
> 
> 时间：2012-05-05T00:06:05.723
> 
> 标签：c++, windows, makefile, wdk

我已经成功地完成了 WDK XPSDrv 示例项目，并对其进行了修改以完成我需要的工作。但是，我绝对无法弄清楚如何让构建脚本引用/包含/任何 shell32.lib。我是一个 .NET 人！这是一个奇怪而可怕的领域。

我认为添加依赖引用是我需要做的。当我编译我得到这个错误

```
3>errors in directory c:\winddk\7600.16385.1\src\printgit\xpsdrvsmpl\
src\filters\common
3>c:\winddk\7600.16385.1\src\printgit\xpsdrvsmpl\src\filters\common\
xdstrmflt.cpp(238) : error C3861: 'ShellExecute': identifier not found 
```

由于我极度缺乏知识（而且很匆忙），我没有使用 Visual Studio，只是在 notepad++ 和 shell wdk 构建环境中使用简单的模块。我在 VS 中有一个代理项目，我一直在编写和测试一小段代码。在那个项目中，我添加了一个依赖库`shell32.lib`，一切都很完美。

有一个引用 a 的生成文件，`sources`内容如下。

没关系，但需要 shell32 的代码是

```
HINSTANCE statu = ShellExecute(NULL,TEXT("open"),szTempFileName,NULL,NULL,9); 
```

这是`sources`文件。

```
INCLUDES=$(INCLUDES);        \
    .\;                      \
    .\..\inc;                \
    .\..\debug;              \
    $(DDK_INC_PATH);         \
    $(SDK_INC_PATH)\gdiplus; \

USE_ATL=1
USE_STL=1

ATL_VER=70
STL_VER=70

# We use STL 7.0, which is not available pre-Vista. We therefore set USE_LIBCMT=1
# If STL 7.0 is not necessary, USE_MSVCRT=1 is recommended
USE_LIBCMT=1

USE_IDLBASED_DLLDATA=1
USE_OBJECT_ROOT=1

MSC_WARNING_LEVEL=/W4 /WX

USE_NATIVE_EH=1

PRECOMPILED_CXX=1
PRECOMPILED_INCLUDE=precomp.h

# To remove debug code remove -DDBG from the line below
C_DEFINES=$(C_DEFINES) -D_UNICODE -DUNICODE

SOURCES=\
    bkpchndlr.cpp       \
    bkpthndlr.cpp       \
    bkschema.cpp        \
    cmpthndlr.cpp       \
    cmprofpthndlr.cpp   \
    cmprofpchndlr.cpp   \
    cmintpthndlr.cpp    \
    cmschema.cpp        \
    cmprofileschema.cpp \
    cmintentsschema.cpp \
    globals.cpp         \
    nupschema.cpp       \
    nupchndlr.cpp       \
    nupthndlr.cpp       \
    pchndlr.cpp         \
    pgscpchndlr.cpp     \
    pgscpthndlr.cpp     \
    pgscschema.cpp      \
    porientpthndlr.cpp  \
    porientschema.cpp   \
    psizepthndlr.cpp    \
    psizeschema.cpp     \
    pimagepthndlr.cpp   \
    pimageschema.cpp    \
    pshndlr.cpp         \
    pthndlr.cpp         \
    ptquerybld.cpp      \
    schema.cpp          \
    wmpchndlr.cpp       \
    wmpthndlr.cpp       \
    wmschema.cpp        \
    workbuff.cpp

TARGETNAME=xdsmplcmn
TARGETTYPE=LIBRARY 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:32:55.307

例如在您的`sources`文件中：

```
TARGETLIBS=$(SDK_LIB_PATH)\kernel32.lib $(SDK_LIB_PATH)\user32.lib $(SDK_LIB_PATH)\shell32.lib 
```

...根据需要修改；）

但是，您的错误实际上*不是*链接器错误，而是编译器错误，因此您可能希望以某种方式包含声明`ShellExecute`的标头。`shellapi.h`

* * *

只需在我的 WDK (7600.16385.1) 中查看示例，事实上您删除了下面复制的非常重要的部分，您只需将其他`.lib`文件附加到该部分即可链接：

```
TARGETLIBS=                                  \
    $(SDK_LIB_PATH)\kernel32.lib             \
    $(SDK_LIB_PATH)\user32.lib               \
    $(SDK_LIB_PATH)\winspool.lib             \
    $(SDK_LIB_PATH)\ole32.lib                \
    $(SDK_LIB_PATH)\oleaut32.lib             \
    $(SDK_LIB_PATH)\advapi32.lib             \
    $(SDK_LIB_PATH)\msxml6.lib               \
    $(SDK_LIB_PATH)\uuid.lib                 \
    $(SDK_LIB_PATH)\Comdlg32.lib             \
    $(OBJ_PATH)\..\debug\$O\xdsdbg.lib \
    $(OBJ_PATH)\..\common\$O\xdsmplcmn.lib \ 
```

...抱歉，此示例中有很多`sources`文件，所以我当然无法真正知道您修改了哪些示例并正在尝试构建:)

# python - 如何使用 P4Python 创建编号更改列表？

> ID：10457626
> 
> 赞同：5
> 
> 时间：2012-05-05T00:06:42.020
> 
> 标签：python, perforce

P4.fetch_change() 创建一个变更规范，变更等于“新”。我需要创建一个带有实际数字的更改规范（不会与任何其他更改冲突）。IOW，我需要能够保留更改列表编号。

如何用 P4Python 做到这一点？

上下文：我的脚本接受了一个已经存在的变更列表编号。我需要能够测试脚本是否正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T01:28:06.947

P4.save_change() 生成一个更改列表编号——也就是说，它创建一个编号的、挂起的更改列表。尝试类似：

```
changespec = P4.fetch_change()
changespec[ "Description" ] = "placeholder"
P4.save_change( changespec ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-18T18:41:49.353

请注意，这为您提供了**当前默认更改列表**`p4.fetch_change()`的字典！

 **你可能已经有文件了！因此，要真正创建一个**空**的，您只需传递一个带有 'Change': 'new' 和 'Description' 的 dict。

我找不到`save_change`返回实际更改列表整数的方法。因此，可以拆分结果并以这种方式获得 nr：

```
from P4 import P4

def create_empty_changelist(desc='some description'):
    p4 = P4()
    p4.connect()
    result = p4.save_change({'Change': 'new', 'Description': desc})[0]
    return int(result.split()[1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T00:19:17.080

Perforce 不允许您保留更改列表编号。如果您想使用 P4Python 提交现有（待定）更改列表，请执行以下操作： `p4.run_submit("-c", changelist)`**

# c# - 计算连接速率（毫秒）（延迟）

> ID：10457627
> 
> 赞同：0
> 
> 时间：2012-05-05T00:07:33.970
> 
> 标签：c#, tcp

我正在尝试计算连接的客户端（服务器->客户端）的延迟我想在我的 ping 循环期间执行此操作（它测试客户端是否仍然连接）这是我 ping 它的方式（试图发送数据，如果失败，客户端已断开连接）。

```
 while (information.connectionEst)
        {
            try
            {

                byte[] data = Encoding.ASCII.GetBytes("");

                stream.Write(data, 0, data.Length);

            }
            catch (Exception e)
            {

                killConnection();
                thread.Abort();
            }

        } 
```

我假设我需要计算发送数据包所花费的时间。但我不知道该怎么做。任何帮助都会受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:44:30.957

很难获得连接的单向延迟（服务器→客户端）。如果您知道您在连接的每一端都有非常准确的时间（例如 GPS 或原子钟或与此非常接近的高质量 NTP 同步时钟）并且在每一端都运行专门用于该任务的软件，您就可以做到这一点。

否则，你能做的最好的就是计算两个方向的延迟（RTT，往返时间），除以 2，并希望连接是数据包的路径是对称的。如果数据包的路径不对称，则数据包在一个方向上的传输时间比另一个方向要长，您无法先验地知道多长时间。

计算 RTT 很简单：让第一方发送一条短消息，让另一端立即返回另一个。第一方从发送请求消息的时间中减去收到响应消息的时间以获得 RTT。

# android - addProximityAlert 和 BroadcastReceivers

> ID：10457628
> 
> 赞同：1
> 
> 时间：2012-05-05T00:07:53.207
> 
> 标签：android

我目前正在开发一个内置兴趣点的地图应用程序。这些点应该通过接近警报触发器通知给用户。这是我正在使用的 addproximityAlert() 代码

```
loc.addProximityAlert(lat, longe, radius, -1, PendingIntent.getActivity(
            c, 0, new Intent().putExtra(loc_name, loc_name), flag)); 
```

这个想法是，一旦警报触发，就会弹出一个警报对话框，其中包含有关该站点的简短说明，可选择关闭警报或获取更多信息（使用 WebView）。

到目前为止，我没有运行时或编译时错误，但是当我接近每个站点时，什么都没有发生。

我关于为什么什么都没有发生的理论是这样的；

1) 我没有正确使用 PendingIntent，或者

2）我没有正确设置广播接收器

这是广播接收器的 XML 代码，

```
<receiver android:name=".ProxyAlertReceiver" >
        <intent-filter>
            <action android:name="entering" />
        </intent-filter>
    </receiver> 
```

我目前解决此问题的计划是修改 PendingIntent 以使用这样的新 Intent；

```
...new Intent(myContext, ProxyAlertReceiver.class)... 
```

看看我是否得到任何结果。

对我的问题的意见和建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T16:46:21.363

你试过 PendingIntent.getBroadcast(...) 吗？

```
Intent locationReachedIntent = new Intent("entering");
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 1234, 
    locationReachedIntent, 0);

locationManager.addProximityAlert(longitude, latitude, radius, -1, pendingIntent); 
```

我的应用程序中有上述代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T17:05:48.367

用这个

```
Intent locationIntent = new Intent();
Bundle extras= new Bundle();
extras.putString("loc_name",loc_name);
locationIntent.putExtras(extras);
PendingIntent pendingIntent= new PendingIntent.getActivity(this,0,locationIntent,0);
loc.addProximityAlert(lat, longe, radius, -1, pendingIntent, flag)); 
```

我假设您的 loc_name 是一个字符串。这将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-18T09:03:28.183

实现接近警报不仅仅依赖于`addProximity`调用`Location Manager`.

您还必须：

1.  创建一个接收器类，它会在触发警报时触发，并将接收状态（进入或退出）和`action name`*;

    ```
    public class ProximityReceiver extends BroadcastReceiver {
     public String TAG ="ProxReceiver";

     @Override
     public void onReceive(Context context, Intent intent) {
        /* your code here - sample below */
        final String key = LocationManager.KEY_PROXIMITY_ENTERING;
        final Boolean entering = intent.getBooleanExtra(key, false);
        if (entering) {
          Toast.makeText(context, "LocationReminderReceiver entering", Toast.LENGTH_SHORT).show();
          Log.v(TAG, "Poi entering");
        } else {
          Toast.makeText(context, "LocationReminderReceiver exiting", Toast.LENGTH_SHORT).show();
          Log.v(TAG, "Poi exiting");
        }
        Log.v(TAG,"Poi receive intent["+intent.toString()+"]");

        Bundle extras = intent.getExtras();
        // debugging only
        int counterExtras = extras.size();
        if (extras != null) {
          for (String key : extras.keySet()) {
            Object value = extras.get(key);
            Log.d(TAG, "Prox Poi extra "+String.format("key[%s] value[%s] class[%s] count[%s]", key,
                    value.toString(), value.getClass().getName(), String.valueOf(counterExtras)));
          }
        } else {
          Log.v(TAG, "Prox Poi extra empty");
        }
     }
    } 
    ```

2.  在您的清单文件中声明此接收器；

    ```
    <receiver android:name=".ProximityReceiver" >
        <intent-filter>
            <action android:name="my" />
        </intent-filter>
    </receiver> 
    ```

3.  注册（将您的待处理意图关联到）此接收器，添加接近警报。仅在您的代码中注册您的接收器一次。如果一个接收器多次注册，它将为每个接收器实例触发一次（您到达一个 POI，它注册了一个名为`"my"`.**

    ```
    // create proximity alert
    Intent locationIntent = new Intent("my");
    ProximityReceiver proximityReceiver = new ProximityReceiver();
    PendingIntent pendingIntent = PendingIntent.getBroadcast(mapView.getContext(), <some identifying text>,
            locationIntent, 0);
    loc.addProximityAlert(lat, longe, radius, -1, PendingIntent.getActivity(
        c, 0, new Intent().putExtra(loc_name, loc_name), flag));

    IntentFilter filter = new IntentFilter("my");
    context.registerReceiver(proximityReceiver, filter); 
    ```

如果在相同的活动中运行，`context`可以在哪里。`this`

除非您想在后台（甚至终止）时继续接收警报，否则您必须在您的`onPause`和`onResume`方法中实现接近警报的删除和重新创建，例如[这个 SO 问题](https://stackoverflow.com/q/10412677/1166727)（跳到问题的末尾）。

注意 * 在这个例子中，`"my"`将是一个动作的动作名称（见`Intent`声明），并将与意图和一组额外内容一起传递，其中至少包含具有布尔值的键`entering`( )，它为您提供状态`LocationManager.KEY_PROXIMITY_ENTERING`警报，如果一个人正在进入 (1) 或退出 (0) 接近半径。

注意 ** 如果您已多次注册接收器`"my"`，它将为每个调用名为 的意图的接近警报事件触发多次`"my"`。

# c# - 将派生类作为 JSON 使用

> ID：10457631
> 
> 赞同：0
> 
> 时间：2012-05-05T00:08:21.480
> 
> 标签：c#, json, asp.net-mvc-3, entity-framework

我正在使用 Entity Framework 4.3 从某些类生成我的数据库。我有一`Item`门课，里面有一系列`Deals`可以免费或打折的课程。我的课程是这样建模的：

```
public class Item
{
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }
    //Other properties
    public virtual ICollection<Deal> Deals { get; set; }
}

public abstract class Deal
{        
    //These properties are shared between various Deals
    public int Id { get; set; }
    public bool Monday { get; set; }
    public bool Tuesday { get; set; }
    public bool Wednesday { get; set; }
    public bool Thursday { get; set; }
    public bool Friday { get; set; }
    public bool Saturday { get; set; }
    public bool Sunday { get; set; }
    public TimeSpan TimeFrom { get; set; }
    public TimeSpan TimeTo { get; set; }
    public int AgesFrom { get; set; }
    public int AgesTo { get; set; }
    public string Comments { get; set; }
    public virtual ICollection<Vote> Votes { get; set; } 
}
public class DiscountedDeal : Deal
{
    public double PriceAfterDiscount { get; set; }
}
public class FreeDeal : Deal
{
    //No properties needed here
} 
```

然后在我的`onModelCreating`

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<FreeDeal>().ToTable("FreeDeals");
        modelBuilder.Entity<DiscountedDeal>().ToTable("DiscountedDeals");
    } 
```

我最初有一个`Deal`带有布尔字段的类来表示它是否免费。我现在拥有它的方式似乎更加规范化，但自然会使事情变得更加复杂。

在前端，我使用 ajax 调用来发送和检索这些数据，但我不确定如何处理单独的交易。如果我检索 an`Item`并且它有 3 `Deals`，比如 2`Free`和 1`Discounted`我该如何处理？我的项目类别中应该有 2 个`Collections`（1 个`Free`和 1 个）吗？`Discounted`我应该回到一个`Deal`有旗帜的班级吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:45:24.263

在不知道要求的情况下，我建议更改您的模型，以便交易和项目处于同一级别，您可以简单地将交易应用于不同的项目。就像现在一样，如果您想在星期三为商品提供 15% 的折扣，您将不得不为每件商品创建单独的交易。

另外，我认为如果您让一个项目有多个交易，那么在交易上设置价格是一个坏主意......这迫使您拥有确定交易优先顺序等的逻辑。如果保持数据库规范化是你在做什么我会回到单个交易类并给它一个 DealType 这将是另一个类，以便创建一个 DealTypes 表。然后，您可以保留子类，而不是让它们持有价格，您可以给它们和 ApplyDeal 方法，该方法会将交易应用于商品价格。

# java - 用于选择和比较卡片的 Java 代码（没有 Arraylist）

> ID：10457634
> 
> 赞同：5
> 
> 时间：2012-05-05T00:08:31.613
> 
> 标签：java

我看到很多与此类似的问题，但它们的答案是我还没有学过的代码。我应该能够在没有数组列表的情况下完成这项任务，所以这对我来说是一个挑战。我需要玩一个战争游戏：创建一个卡片类，创建一个牌组，然后随机生成第一张牌，从牌组中“移除”牌并生成第二张牌，看看哪张牌赢了，继续比较直到甲板已经筋疲力尽。这是我到目前为止所拥有的：

```
public class Card
{
private int cardValue; 
private String cardSuit;
private String stringValue;
static final String[] SUIT = {"Clubs", "Diamonds", "Hearts", "Spades"}; 
static final String[] VALUE =  {"Ace","Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Jack", "Queen", "King"}; 

/**
*CONSTRUCTOR for Card class
*contains the arrays for both suit and values
**/
public Card (int cardS, int cardV)
{

    cardSuit = SUIT[cardS]; 
    stringValue = VALUE[cardV];
}

/**
*Get method for card suit, access the value of cardSuit
**/
public String getCardSuit()
{
        return cardSuit;
}

/**
*get method for card's VALUES
**/
public String getValue()
{
    return stringValue;
}
//in order to display string value of cards
public String toString() 
{ 
    return String.format("%s of %s", stringValue, cardSuit); 
} 
```

}

```
public class Deck
    {
    private final int HIGH_SUIT=3;
    private final int HIGH_VALUE=12;

    int i = 0; 
    int cardCount;              

    Card[] fullDeck = new Card[52]; 
    public Deck()
    {

        for(int s = 0; s <= HIGH_SUIT; s++)
        {
            //for loop to determine the suit
            for (int v = 0; v <= HIGH_VALUE; v++)
            {
                //construct all 52 cards and print them out 
                fullDeck[i] = new Card(s, v);
                cardCount = (i + 1);
                i++;//increment the card counter

            }
        }   
    } 
```

}

```
public class War3

{
public static void main(String[] args)
{
    int i=0;
    Deck[] fullDeck = new Deck[52]; //set up the deck
    //create a random value for the first card
    int r = ((int) (Math.random() * 100) % 51);//create random number

    Card[] playerCard = new Card[r];//create the player's card

    System.out.println("The card is: " + playerCard.toString());

    } 
```

如你所见，我在 War 3 中并没有走得太远，因为我不知道如何显示第一张卡片。运行时显示：卡片为：[LCard;@4a5ab2random#1 如何显示数组中的第一张卡片？我需要帮助弄清楚如何分配第一张卡和第二张卡，显示它们然后比较它们。我还有很长的路要走，所以一步一步走。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:11:48.527

`toString`最简单的方法是在你的`Card`类中实现一个方法。

```
public String toString() {
    return String.format("%s of %s", stringValue, cardSuit);
} 
```

当您使用它时，将两个数组 (`suit`和`value`) 移出构造函数，将它们`static final`设为 ，然后重命名为全大写：

```
static final String[] SUIT = {"Clubs", "Diamonds", "Hearts", "Spades"};
static final String[] VALUE = {"Ace","Two", "Three", "Four", "Five", "Six", "Seven",
                "Eight", "Nine", "Ten", "Jack", "Queen", "King"}; 
```

此外，不应该像你一样选择卡片：

```
Card[] playerCard = new Card[r];//create the player's card 
```

创建一个卡片数组`r`，并将其分配给`playerCard`. 这是不正确的：您已经在 中创建了所有卡片，`Deck`只需从中随机抽取一张：

```
public Card takeRandomCard() {
    int r;
    do {
        r = (int)(Math.random() * 52);
    } while (taken[r]);
    taken[r] = true;
    return fullDeck[r];
} 
```

请注意这里的小补充：`taken`是一个由 52 个对象组成的数组，`boolean`表示卡片已从牌堆中取出。

这是您在 ideone 工作时根据上面所做[的修改的代码。](http://ideone.com/Myt5S)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:39:37.577

Card.cardSuit 和 Card.stringValue 都是每个 Card 对象的字符串。虽然您没有初始化卡片。

您还创建了一组 52 个牌组。这是不必要的。

```
Deck[] fullDeck = new Deck[52]; 
```

应该

```
Deck fullDeck = new Deck(); 
```

您只需要一副牌，因为数组的构造函数会为您创建 52 个卡片对象。然后，您希望随机访问这些卡片中的每一个并显示它们。因此，当您有随机数 r 时，您想从`Deck`对象中获取该数字卡：

```
fullDeck.fullDeck[r] 
```

将从你的牌组中随机取出一张牌。要在此卡中显示字符串值：

```
System.out.println("The card is: " + fullDeck.fullDeck[r].getCardSuit() + fullDeck.fullDeck[r].getValue() + "random#" + r); 
```

在构造函数之外声明`new`也是不好的形式。

# android - Android 屏幕旋转触发多个 AsyncTask 线程

> ID：10457635
> 
> 赞同：0
> 
> 时间：2012-05-05T00:08:51.807
> 
> 标签：android, android-listview, android-asynctask

在 Activity 中，我正在创建一个处理程序，以每 45 秒触发一次 AsyncTask，以刷新 ListView 的 DataAdapter 的内容。AsyncTask 工作得很好，并通过 ProgressUpdates 和 Toast 消息让用户了解进度。

由于线程的 doInBackground 是触发后忘记且不可重复使用，因此我必须从我的 Hander 创建一个 AsyncTask 的新实例，该实例每 45 秒触发一次。问题是当屏幕旋转时，我收到并发消息，因为重新创建了 Hander 并创建了 AsyncTask 的新实例，因此通过 ProgressUpdates 和 Toast 消息的友好用户进度是压倒性的，使得使用 ListView 变得困难。

请不要将此作为解决方案： android:screenOrientation="portrait" 不是一个选项。

对于必须如此频繁运行的东西，我应该只使用自定义线程而不是 AsyncTask 类吗？ToDo：未显示，我必须稍后从传感器的 onSensorChanged 事件更新适配器以更新 ListView 中每个位置的方位，我打算在单独的 AsyncTask 类上运行它，因为我不需要每次都通知用户设备轴承发生了变化。

由于 AsyncThread 不能被重用，我做错了吗？简而言之，让 Activity 刷新 ListView 并在这样做时远离 UI 线程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:54:26.753

> 问题是当屏幕旋转时，我收到并发消息，因为重新创建了 Hander 并创建了 AsyncTask 的新实例。

[来自 API活动 - 配置更改](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)的原因引用：

> 除非您另外指定，否则配置更改（例如屏幕方向、语言、输入设备等的更改）将导致您当前的活动被破坏，并通过 onPause()、onStop() 和onDestroy() 视情况而定。

因此，每个对象都有一个活动范围的生命周期（即在您的活动类中定义的 Handler、AsyncTask 等），都会受到此活动重新创建的影响。但是，您可以绕过此活动重新创建，如后面的“活动 - 配置更改”部分所述：

> 在某些特殊情况下，您可能希望根据一种或多种类型的配置更改绕过重新启动活动。这是通过清单中的 android:configChanges 属性完成的。对于您说在那里处理的任何类型的配置更改，您将收到对当前活动的 onConfigurationChanged(Configuration) 方法的调用，而不是重新启动。但是，如果配置更改涉及您未处理的任何内容，则活动仍将重新启动，并且不会调用 onConfigurationChanged(Configuration)。

与主题无关，但作为一个好习惯，当活动即将结束时（即在 onDestroy() 方法中），您应该始终正确地销毁使用的对象（Handler、AsyncTask 等）。

> 对于必须如此频繁运行的东西，我应该只使用自定义线程而不是 AsyncTask 类吗？

AsyncTask 非常方便，但不适合定期任务，在这种情况下我会使用 ScheduledExecutorService 或 TimerTask，请在[此处查看我的答案](https://stackoverflow.com/questions/8098806/where-do-i-create-and-use-scheduledthreadpoolexecutor-timertask-or-handler/8102488#8102488)以获取示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:37:50.497

你能发布一些你的代码吗？了解您的问题出在哪里可能会很有用。

正如*york*指出的那样，您可能应该使用`TimerTask`. 似乎它更适合您尝试做的事情。

如果是创建问题的处理程序的新实例，您可以尝试这样的事情：

```
private Handler mHandler = null;

@Override
public void onCreate(Bundle _savedInstanceState) {
    super.onCreate(_savedInstanceState);
    setContentView(R.layout.my_layout);

    if (mHandler == null) {
        // TODO create your handler here
    }
} 
```

**编辑：** 您也可以测试 _savedInstanceState == null 。
_savedInstanceState 用于保存活动的状态，因此转动手机不再是问题。但是，如果您离开活动然后返回到它，它将创建一个新的处理程序（除非您将其实例化为静态变量）。

# vim - 在 Vim 中伪造/模拟打字

> ID：10457637
> 
> 赞同：4
> 
> 时间：2012-05-05T00:09:11.047
> 
> 标签：vim

我正在用 VimL 编写一个非常小的脚本，并且希望模拟给定字符串的实际键入。

我面临的问题是，我尝试的任何操作都会立即将整个字符串放在缓冲区上，因此整个操作看起来非常原子，并且它没有描绘逐字符输入的自然延迟。

我尝试了以下函数的一些变体，即使我`sleep 50m`在不​​同的地方添加了一个，我也没有得到想要的行为：

```
function! FakeTyping(string)
    let list = split(a:string)
    for word in list
        for letter in split(word)
            execute "normal a" . letter . "\<esc>"
        endfor
    endfor
endfunction 
```

这甚至可能吗？如果是这样，我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T00:20:14.287

也许这就是你需要的。您点击`Ctrl`-`MiddleMouse`将剪贴板的内容按字符发送到 vim char：

```
nmap <C-MiddleMouse> :call AnimateText(@*)<CR>
fun! AnimateText(text)
    let lineno = line('.')
    let lines = split(a:text, "\n")
    for line in lines
        call setline(lineno, '')
        let chars = split(line, '.\zs')
        let words = ''
        for c in chars
            let words .= c
            call setline(lineno, words)
            call cursor(lineno, 0)
            normal z.
            if c !~ '\s'
                sleep 100m
                redraw
            endif
        endfor
        let lineno += 1
    endfor
endfun 
```

# windows-phone-7 - 使用 VLC 在 Windows Phone 7 上实时视频流？

> ID：10457638
> 
> 赞同：0
> 
> 时间：2012-05-05T00:09:24.007
> 
> 标签：windows-phone-7, video-streaming, vlc

我想在 Windows Phone 7 上接收和播放实时视频流

我正在使用 VLC Player 来实现这一点。

（HTTP，带有 .wmv 扩展名的目的地，转码为 wmv ）

在 Windows Phone 7 上，我拖放媒体元素，例如 mediaElement1.Source=new URI(http://localhost:8080/go.wmv

但没有播放请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:10:48.863

将流转换为 H264 而不是 wmv。这应该有效。

# eclipse - eclipse比较编辑器停止显示详细差异

> ID：10457639
> 
> 赞同：10
> 
> 时间：2012-05-05T00:09:31.057
> 
> 标签：eclipse, git, editor, compare

我已经使用 eclipse 进行 java android 开发 6 个月了，我喜欢比较编辑器。在过去的几天里，我一直在破解，我想我所有的 git 鸭子都排成一排，或者足够接近，以至于东西干净整洁，我可以找到旧的工作版本的应用程序。

但似乎在最后一两天，eclipse 比较编辑器已经停止显示差异！我右键单击未提交的 PlayThread.java 并选择与 Commit... 或 HEAD 或 branch 或任何东西进行比较，无论文件多么相似，比较编辑器都会在其右侧显示一个大白条，然后单击转到下一个差异突出显示整个文件！

我查看了 git 并比较了 eclipse 的偏好，找不到任何可能有帮助的东西。

任何让我漂亮的比较编辑器再次为我工作的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-04-16T13:46:10.930

关于 Javascript compair 什么都没有显示，有一个已知的错误。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=509820](https://bugs.eclipse.org/bugs/show_bug.cgi?id=509820)

解决方法...

> *   窗口>>首选项>>常规选项卡>>比较/补丁
> *   取消选中“自动打开结构比较”旁边的复选框

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-05T00:15:39.887

请注意最新的[EGit 5.3.0（2020 年 2 月，8 年后）](https://wiki.eclipse.org/EGit/New_and_Noteworthy/5.3#Compare_and_Merge_Editors)改进了比较编辑器的右侧，使用了[Vivek](https://stackoverflow.com/users/2065799/vivek)的[回答](https://stackoverflow.com/a/55310223/6309)`Eclipse -> Preferences -> Text Editors -> Show whitespace characters`中提到的内容。

> Eclipse 中的文本比较已得到改进，以使“显示空白”在更多情况下工作。
> 
> 此外，在合并编辑器和在同一文件上打开的另一个编辑器中同时编辑文件已得到改进，现在工作得更好，甚至对于不在 Eclipse 工作区中的文件也是如此。

[![https://wiki.eclipse.org/images/a/aa/EGit_Compare_Editor_Show_Whitespace.png -- Eclipse 中 Java 比较的屏幕截图（工作空间与索引）显示索引侧的空白](../Images/e7827d22e80ec62d8497bad56dc22643.png)](https://i.stack.imgur.com/VOQDH.png)

> **请注意，显示空白**和并发编辑不仅取决于 EGit 设置比较的方式（这是我们改进的），还取决于实际使用的编辑器。这些编辑器不受 EGit 的控制。
> 
> 对于不在 Eclipse 工作区中的文件，当文件在另一个编辑器中打开时，可能会遇到平台[错误 214351 。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=214351)

* * *

原始答案（2012 年 5 月）：

> 比较编辑器在其右侧显示一个大白条，

这意味着 Egit 认为该文件（在您的磁盘上）的本地内容与已提交的内容完全不同。
发生这种情况的一个经典案例是自动 eol 转换（Windows <=> Unix），这就是我总是设置`core.autocrlf`为`false`.
请参阅“ [Windows 上的 Git beta (msysgit) - Unix 或 DOS 行终止](https://stackoverflow.com/questions/1249932/git-1-6-4-beta-on-windows-msysgit-unix-or-dos-line-termination/1250133#1250133)”。
另请参阅“[使用代码分发 git 配置](https://stackoverflow.com/questions/2333424/distributing-git-configuration-with-the-code/2354278#2354278)`.gitattribute`”以通过文件管理这些 eol （ [EGit 尚不支持`.gitattribute`文件](https://bugs.eclipse.org/bugs/show_bug.cgi?id=357039)除外）。

* * *

在这种情况下，[OP mwengler](https://stackoverflow.com/users/841828/mwengler)报告：

> 嗯，就是这样。
> 我修复它的方式是在**`Eclipse > Window > Preferences > General > Compare/Patch > General`**我检查“ **`Ignore white space`**”的那个页面上，现在编辑器显示我的差异。
> 但我想我会关掉那些`autocrlf`东西，我不认为我在 Windows 上使用任何不能同时处理这两种口味的东西

请参阅[Egit bug 361503](https://bugs.eclipse.org/bugs/show_bug.cgi?id=361503)，其中提到此“忽略空白”现在也支持该`core.autocrlf`设置。

* * *

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-11T16:17:39.770

以下设置也适用于 Eclipse Oxygen Release。

这似乎与结构化比较有关。至

使用比较选择的更简单且明显有效的版本：

> *   窗口 > 首选项 > 常规选项卡 > 比较/补丁
> *   取消选中“自动打开结构比较”旁边的复选框

享受 ES6 类的文本级别差异。

问候， Rasool Javeed Mohammad javeed.mca@gmail.com

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-23T03:05:48.540

很久以后，我再次陷入了这个问题。每次我解决这个问题并继续前进，但这次我尝试了解根本原因并*修复它，因为对我有用的修复不在[这个](https://stackoverflow.com/questions/10457639/eclipse-compare-editor-stopped-showing-detailed-differences)问题*的答案中，因此添加了详细信息部分：

我`EGit`在 Eclipse 中使用插件，问题与[OP](https://stackoverflow.com/questions/10457639/eclipse-compare-editor-stopped-showing-detailed-differences)相同- Eclipse 比较工具没有突出差异**，而是整个块，好像整个文件已更改。**

让我们先了解一下这个问题，因为我知道这与`CRLF`vs `LF`eol 有关，所以首先检查并启用可见性：

> Eclipse -> 首选项 -> 文本编辑器 -> 显示空白字符 [![在此处输入图像描述](../Images/12f9775e6364b2267099de452b8ee343.png)](https://i.stack.imgur.com/zraeO.png)

在上面点击**配置可见性**。

[![在此处输入图像描述](../Images/77b56191d0fc12de1216720a663ae2d0.png)](https://i.stack.imgur.com/PhAJJ.png)

现在，正如您在上图中看到的突出显示的那样，选中**Trailing**下的复选框并反对`Carrier Return (CR)`和`Line Feed (LF)`。

应用 - 保存并关闭。现在就我而言，文件看起来像这样：

[![在此处输入图像描述](../Images/bd084e8a7d327e724f1656dfd1eb0b43.png)](https://i.stack.imgur.com/1N9J8.png)

这很明显，对我来说，我有`CRLF`像 eol 这样的窗口，这进一步证实了我没有`core.autocrlf`设置，`true`因此默认[情况下](https://stackoverflow.com/questions/39408793/git-core-autocrlf-line-ending-default-setting)它实际上没有尝试对我的 EOL 分隔符做任何事情（如本例中所预期的那样）。`false``Git`

直到这个阶段，比较工具将整个文件显示为已更改。

现在，着手解决对我有用的问题。

因为，我想在 IDE 领域得到这个修复，所以我首先将特定文件转换为 Unix 分隔符： [![在此处输入图像描述](../Images/04e9829f278490e54945bf1488168931.png)](https://i.stack.imgur.com/FPQna.png)

然后我的文件变成了 LF (Unix delimiter) eol ：

[![在此处输入图像描述](../Images/b285a2af03f8e21db48de97dc70b8eb7.png)](https://i.stack.imgur.com/iNki6.png)

**并且比较工具开始突出显示增量。**

[![在此处输入图像描述](../Images/00ad440c242f88313c8f9db86e26f310.png)](https://i.stack.imgur.com/Kg9AP.png)

**因此，**假设问题是由于`CRLF`（窗口样式）eol 和 Eclipse 比较器无法突出显示增量而不是整个文件。

然后，而不是将每个文件或包更改为 Unix delimiters 。我在 Eclipse->Preferences -> Workspace 中更新了 [![在此处输入图像描述](../Images/2c8e0ea552491be0f51e6ee615e02f85.png)](https://i.stack.imgur.com/hMRol.png)

通过这种方式，eclipse 会处理新文件到 的行尾`Unix`，以便文本文件以不特定于 Windows 操作系统的格式保存，并且最容易在异构开发人员桌面之间共享。毕竟，这个比较工具一直很愉快地工作。

希望这可以帮助。

# c# - 绑定和覆盖模型的 Equal 和 Hashcode

> ID：10457641
> 
> 赞同：1
> 
> 时间：2012-05-05T00:09:37.653
> 
> 标签：c#, wpf, xaml, binding

假设我定义了一个类，如下所示。现在让我们说我进一步修改这个类以正确实现 NotifyPropertyChanged 并添加到我绑定到 WPF 网格的集合中。如果执行代码更改其中一个实例的 Name 或 Description 属性，其他实例也会更新吗？WPF/XAML 绑定是否将这些相同的对象视为相同的对象，还是将实例视为不同的并且仅更新已更改对象的属性？

 `````
class Security
{       
    public string Ticker { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null) return false;

        if (this.GetType() != obj.GetType()) return false;

        Security security = (Security)obj;

        //reference check
        //if (!Object.Equals(Ticker, security.Ticker)) return false;

        //value member check
        if (!Ticker.Equals(security.Ticker)) return false;

        return true;
    }

    public static bool operator ==(Security sec1, Security sec2)
    {
        if (System.Object.ReferenceEquals(sec1, sec2)) return true;

        if (((object)sec1 == null) || ((object)sec2 == null)) return false;

        // Return true if the fields match:
        return sec1.Ticker == sec2.Ticker;
    }

    public static bool operator !=(Security sec1, Security sec2)
    {
        return !(sec1 == sec2);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int hash = 17;
            // Suitable nullity checks etc, of course :)
            hash = hash * 23 + Ticker.GetHashCode();
            hash = hash * 23 + Ticker.GetHashCode();
            hash = hash * 23 + Ticker.GetHashCode();
            return hash;
        }
    }
} 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:54:22.757

关于绑定如何工作的一个相当松散的描述是，xaml 类构建了一个它所绑定到的属性的查找表。当引发 PropertyChanged 事件时，xaml 类检查它的查找表以查找与参数匹配的属性并刷新该值。因此，只会更新在 PropertyChanged 事件中传递名称的属性的值。

一个实现如下所示：

```
class Security : INotifyPropertyChanged
{   
    public event PropertyChangedEventHandler PropertyChanged;

    public string Ticker 
    { 
        get { return ticker; } 
        set { 
               ticker = value; 
               PropertyChanged(this, new PropertyChangedEventArgs("Ticker"));
        }
    }

    ...// implement the rest of your class like above
 } 
```

[有关更多信息，请参阅此处](http://msdn.microsoft.com/en-us/library/ms229614.aspx)和[此处](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)的INotifyPropertyChanged 文档。``

# php - 去掉 preg_split 后的标点符号，将两个以上的单词大写

> ID：10457642
> 
> 赞同：0
> 
> 时间：2012-05-05T00:09:43.217
> 
> 标签：php

我有这个 preg_split 来分割标点符号后的文本。

```
$content = preg_split('/(?<=[!?.])./', $content); 
```

**问题 1**。需要一种方法来拆分文本但删除除问号之外的标点符号。

我怎样才能做到这一点？

**问题 2.**有没有办法将超过两个字母的单词大写？现在我使用 CSS 但 text-transform: capitalize 对每个单词，甚至是 1 个字母的单词都使用它，这使它在页面上看起来很时髦。这就是为什么我正在考虑使用 php 来做到这一点。

非常感谢，希望对你有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:39:59.887

问题1：

如果您需要在每个标记上拆分但不能在问号上替换，则需要分两步进行，因为`preg_replace`也会替换您的问号。

您应该先拆分，然后替换（按“”）。

您的正则表达式是否按预期工作？`(?<=)`根据您的问题，第一部分似乎很奇怪。我想只是`/!\?\\./`会做的伎俩。

问题2：

我会使用空格拆分您的短语，然后遍历结果数组（单词），然后检查每个单词的大小，如果它的大小大于 1，则将其大写。

# android - 如何检查是否所有复选框都未选中？

> ID：10457643
> 
> 赞同：0
> 
> 时间：2012-05-05T00:09:58.547
> 
> 标签：android, xml, listview, checkbox

这个问题可能听起来很棘手......

但是，问题是，我有一个自定义列表视图，每行都有一个复选框和一个文本视图......我使用**android:onClick="checkmethod"**在选中复选框时进行处理..

这是一个示例代码..

```
public void checkMethod(View v) {
LinearLayout vwParentRow = (LinearLayout)v.getParent();
CheckBox check = (CheckBox) vwParentRow.findViewById(R.id.checkBox_list);
  if (check.isChecked()) {
      //My process goes here
  }else{
      //Another process comes here
  }
} 
```

现在，我想要做的是检查复选框，如果它们的状态都未选中......我该怎么做？有人可以尽快帮助我吗？提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T00:12:27.553

这是我所知道的最快和最简单的方法：

*   添加一个`private int counter`作为类成员，并将其初始化为 0。
*   选中复选框时 - 递增计数器
*   取消选中复选框时 - 递减计数器
*   每当您需要检查是否未选中任何复选框时 - 只需检查是否`counter == 0`

# python - 如何在 virtualenv 中安装 wxPython

> ID：10457647
> 
> 赞同：9
> 
> 时间：2012-05-05T00:10:51.530
> 
> 标签：python, windows, macos, wxpython, virtualenv

我在 Mac OSX Lion 机器上，我已经下载了 wxPython-src-2.9.3.1.tar.bz2。然后我做了以下事情（*注意：输出消息已被删除*）：

```
$ tar -xjf wxPython-src-2.9.3.1.tar.bz2
$ cd wxPython-src-2.9.3.1
$ mkdir bld
$ cd bld
$ source /path/to/myvirtualenv/bin/activate
(myvirtualenv)$ cross_compiling=yes
(myvirtualenv)$ export MACOSX_DEPLOYMENT_TARGET=10.6.7
(myvirtualenv)$ set arch_flags="-arch ppc64 "
(myvirtualenv)$ ../configure \
--with-mac --enable-monolithic --enable-threads --enable-unicode \
--enable-debug_flag --enable-debug \
--with-libpng --with-libjpeg --with-libtiff --enable-unicode \
--with-opengl --enable-graphics_ctx --with-odbc --enable-gui \
--with-macosx-sdk=/Developer/SDKs/MacOSX10.6.sdk --with-macosx-version-min=10.6 \
CFLAGS="$arch_flags" CXXFLAGS="$arch_flags" CPPFLAGS="$arch_flags" LDFLAGS="$arch_flags" OBJCFLAGS="$arch_flags" OBJCXXFLAGS="$arch_flags" --prefix=/path/to/myvirtualenv/
$ (myvirtualenv)make
$ (myvirtualenv)make install 
```

之后，我确实收到了这条消息（*所以我猜它成功了*）：

```
...
 ------------------------------------------------------

 The installation of wxWidgets is finished.  On certain
 platforms (e.g. Linux) you'll now have to run ldconfig
 if you installed a shared library and also modify the
 LD_LIBRARY_PATH (or equivalent) environment variable.

 wxWidgets comes with no guarantees and doesn't claim
 to be suitable for any purpose.

 Read the wxWindows Licence on licencing conditions.

 ------------------------------------------------------ 
```

让我回到我的壳里。但是，我似乎无法使用它

```
(myvirtualenv)$ python
>>> import wxversion
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named wxversion 
```

有什么想法可以将它安装在我的 virtualenv 中吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-12T02:51:25.933

对于其他人，这对我有用：

在 Mac OSX 上，我使用 Homebrew 安装了 wxpython：

```
brew install wxpython 
```

切换到您的 virtualenv 站点包目录：

```
cd /venv/lib/python2.7/site-packages 
```

然后链接 wx.pth

```
ln -s /usr/local/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/wx.pth wx.pth 
```

然后链接 wx-3.0-osx_cocoa 目录：

```
ln -s /usr/local/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/wx-3.0-osx_cocoa wx-3.0-osx_cocoa 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T14:24:25.323

看完以上所有文章，这才是真正的关键：

您需要将您的 VE 指向主要的 python 安装。

在我的系统上：

`% ln /Library/Python/2.7/site-packages/wxredirect.pth ./default/lib/python2.7/site-packages/wxredirect.pth`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-22T22:16:13.570

For Windows, you can use the same approach that [cweston](https://stackoverflow.com/users/37966/cweston) outlined for OS X, translated to calls to `mklink`. I had success creating a virtualenv for an old Python 2.7 / WxPython 2.8 based app by doing the following:

Install WxPython using the installer.

Find the site-packages directory where WxPython was installed. For me,

`C:\Python27\Lib\site-packages`

Open a shell and change to the site-packages directory inside the virtualenv to which you want to add WxPython, say it's called `WxApp`:

```
cmd
cd C:\Virtualenvs\WxApp\Lib\site-packages 
```

Then create links: hard links for wx.pth and wxversion.py, and a junction for the directory containing the WxPython installation (mine was `wx-2.8-msw-unicode`):

```
mklink /h wx.pth C:\Python27\Lib\site-packages\wx.pth
mklink /h wxversion.py C:\Python27\Lib\site-packages\wxversion.py
mklink /j wx-2.8-msw-unicode C:\Python27\Lib\site-packages\wx-2.8-msw-unicode\ 
```

Now I have access to the `wx` module:

```
C:\> C:\VirtualEnvs\WxApp\scripts\activate.bat
(WxApp) C:\>python
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on Python 2.7.2 (default, Jun 24 2011, 12:21:10) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import wx
>>> wx.version()
'2.8.12.1 (msw-unicode)'
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-22T12:34:03.813

我写了一个小脚本来为我的项目解决这个问题。觉得分享一下可能不错。

我有以下设置：

*   通过 home-brew 安装的 python 和 wxpython
*   使用 virtualenvwrapper 管理虚拟环境

使用 mkproject 启动新项目后，我运行以下脚本来解决此问题。

```
#!/usr/bin/env bash

echo This script fixes issues with wxpython and virtualenv on mac os. >&2
echo It needs to be run inside a virtualenv created with virtualenvwrapper. >&2
echo It also assumes that wxpython was installed through homebrew. >&2
echo

PYTHON_FULL_VERSION=$(python --version 2>&1 | awk -F ' ' '{ print $2 }')
PYTHON_SHORT_VERSION=$(python -c 'import sys; print "%d.%d" % (sys.version_info[0], sys.version_info[1])')

echo detected python version: "$PYTHON_FULL_VERSION" >&2

[ -d "$VIRTUAL_ENV" ] || { echo "ERROR: First activate the virtualenvironment." >&2; exit 1; }

# PART 1: Add homebrew-installed wx to env's site-packages
HOMEBREW_SITE_PKG="/usr/local/lib/python${PYTHON_SHORT_VERSION}/site-packages"
VENV_SITE_PKG="${VIRTUAL_ENV}/lib/python${PYTHON_SHORT_VERSION}/site-packages"

ln -s "${HOMEBREW_SITE_PKG}/wx.pth" "$VENV_SITE_PKG"
ln -s "${HOMEBREW_SITE_PKG}/wx-3.0-osx_cocoa" "$VENV_SITE_PKG"

# PART 2: At activation of venv we set PYTHONHOME
# NB This needs virtualenvwrapper to work
echo 'export PYTHONHOME="$VIRTUAL_ENV"' >> "${VIRTUAL_ENV}/bin/postactivate"

# PART 3: link the pythonw executable in the virtualenv
PYTHONW="/usr/local/Cellar/python/${PYTHON_FULL_VERSION}/bin/pythonw"
ln -s "$PYTHONW" "${VIRTUAL_ENV}/bin/pythonw"

echo "You should now re-activate the environment." 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-05T16:53:34.257

那是因为当你安装你的 python 版本时，你必须要求**CPython**安装是用`--enable-framework`. 因此，在您的 Mac 上，您必须运行以下命令：

```
$ env PYTHON_CONFIGURE_OPTS="--enable-framework" pyenv install 3.x.x 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-09T07:12:10.923

我相信最干净的方法是让您的系统 python 从您的开发工作中尽可能干净。您在其中添加的随机内容越多，您就越有可能遇到一些晦涩的问题。

但

因为它是系统范围的 brew 安装，这是 wxPython 最简单的选择，由于某种原因，它似乎没有正确的 python 打包/pip 集成。在这种情况下，它将进入您的系统范围的站点包。

virtualenv 支持以只读方式将系统范围的站点包链接到您的 virtualenv。确保使用**--system-site-packages**开关创建 virtualenv。这将使其对底层 python 安装透明。

我希望这可以帮助人们在未来遇到这个问题。

# c++ - 构造函数中的以下代码会生成警告

> ID：10457648
> 
> 赞同：4
> 
> 时间：2012-05-05T00:11:01.440
> 
> 标签：c++, stl, map, constructor

```
 mutex_map[key] = PTHREAD_MUTEX_INITIALIZER; 
```

mutex_map 属于以下类型：

```
 static std::map<std::string, pthread_mutex_t> mutex_map; 
```

在全局范围内的同一文件中

我收到以下关于纯 C++ 的警告

```
 warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x 
```

我不能完全理解这个警告以及如何解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T00:15:15.927

你`PTHREAD_MUTEX_INITIALIZER`在某种程度上等同于初始化列表。

在 C++03 中，您可以像这样初始化一个数组：

```
int arr[5] = {1,2,3,4,5}; 
```

注意初始化列表。但是，不支持类来执行此操作。

在 C++11 中，他们添加了`std::initializer_list<T>`，因此这种语法是可能的。考虑以下：

```
std::vector<int> v = {1,2,3,4,5}; 
```

或者，更简单：

```
std::vector<int> v{1,2,3,4,5}; 
```

这将适用于 C++11，但不适用于 C++03，因为在 C++11 中，向量有一个构造函数，它接受一个初始化列表参数。您也可以将其包含在您自己的课程中。请注意，后者通常等同于以下内容：

```
std::vector<int> v ({1,2,3,4,5}); 
```

这有助于说明初始化器列表现在是实际类型。

如果您想查看 Stroustrup 的简介，请参阅他的[C++11 FAQ](http://stroustrup.com/C++11FAQ.html#init-list)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-10T09:19:49.217

对于以下解决方案有效：您需要致电

```
pthread_mutex_init(&mutex_map[key], NULL); 
```

而不是使用`PTHREAD_MUTEX_INITIALIZER`.

# objective-c - 使用 indexPath.row 从数组中获取对象

> ID：10457649
> 
> 赞同：0
> 
> 时间：2012-05-05T00:11:03.397
> 
> 标签：objective-c, xcode, uitableview

如何使用 indexPath.row 从数组中获取对象？我已尝试使用以下代码，但它返回“信号 SIGABRT”.. 请帮助

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSString *inde = [NSString stringWithFormat:@"%d", indexPath.row];
    NSNumber *num = [NSNumber numberWithInteger: [inde integerValue]];
    int intrNum = [num intValue];
    NSString *name = [basket objectAtIndex:intrNum];

    cell.textLabel.text = name;
    return cell;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    basket = [[NSMutableArray alloc] init];
    [basket addObject:@"1"];
    [self makeGrid];
 }

- (void)addToBasket:(id)sender {
    NSInteger prodID = ((UIControl*)sender).tag;

    [basket insertObject:[NSNumber numberWithInt:prodID] atIndex:0];
    [self.tableView reloadData];
} 
```

错误信息：

```
-[__NSCFNumber isEqualToString:]: unrecognized selector sent to instance 0x6866080 2012-05-05 02:29:18.208 app[7634:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFNumber isEqualToString:]: unrecognized selector sent to instance 0x6866080' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T00:25:41.553

你为什么不直接使用

```
NSString *name = [basket objectAtIndex:indexPath.row]; 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T07:39:07.587

在`addToBasket`方法中，您将`NSNumber`对象放入数组`basket`中，但在`cellForRowAtIndexPath`方法中，您期望. 为了使您的代码正常工作，您可以使用安全转换为字符串：`NSString``basket`

```
NSString *name = [NSString stringWithFormat:@"%@",[basket objectAtIndex:intrNum]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T08:37:05.603

当你的代码

```
int intrNum = [num intValue]; 
```

可能不是真正的`intrNum`IndexPath 整数，它可能会返回地址类型（例如“88792”等）。所以，它会导致你的阵列出现问题

`cellForRowAtIndexPath`像这样从数组代码中更正您的获取对象

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

/* NSString *inde = [NSString stringWithFormat:@"%d", indexPath.row];
NSNumber *num = [NSNumber numberWithInteger: [inde integerValue]];
int intrNum = [num intValue]; */

NSString *name = [basket objectAtIndex:indexPath.row];

cell.textLabel.text = name;
return cell; 
```

}

并且在`addToBasket`你不应该像我上面提到的那样使用`numberWithInt`的原因。`int`

```
- (void)addToBasket:(id)sender {
    NSInteger prodID = ((UIControl*)sender).tag;

    // [basket insertObject:[NSNumber numberWithInt:prodID] atIndex:0];
    [basket insertObject:[NSNumber numberWithInteger:prodID] atIndex:0];    

    [self.tableView reloadData];
} 
```

希望对你有帮助！

# html - 有趣的移动 Safari 隐藏内容问题

> ID：10457650
> 
> 赞同：10
> 
> 时间：2012-05-05T00:11:28.940
> 
> 标签：html, css, mobile-safari, hidden

因此，我在移动 safari 中使用这个网络应用程序时遇到了这个有趣的问题，目前我还无法解决。

我有一个单击时出现的“显示：无”菜单 div。显示菜单时，div 中的内容会按应有的方式显示。问题在于屏幕外的内容。当滚动 div 内容时，在滚动完全停止之前，现在在视口内的屏幕外内容将根本不会显示。这不是加载问题，因为所有内容实际上已经加载，即使您向上滚动到顶部，这种情况也会继续发生。

实际在页面上的内容不会发生这种情况，只是隐藏菜单 div 中加载的内容。我没有使用任何特殊的编码或任何东西，只是标准的 css 和 jquery .click 函数。我已经尝试了所有我能想到的方法来解决这个问题。使用实际的页面滚动而不是 div 中的滚动修复了内容显示问题，但由于某种原因，它不会随动量滚动，并且隐藏的 div 本身会花费比它应该出现的时间更长的时间，也许像 2 秒，这当然永远不会没关系。

任何想法如何解决这一问题？

编辑 - 下面的代码：

CSS

```
#menu {
 width:720px;
 height:100%;
 overflow:auto;
 -webkit-overflow-scrolling:touch;
 background-color:#000000;
 display:none;
 position:absolute;
 z-index:9997;
}
#main-menu {
 width:100%;
 display:none;
 background-color:#000000;
} 
```

的HTML

```
<div id="menu">
<div id="main-menu">

<a href="#templates/my-account.php" class="close">
<div id="menu-item">
   <img src="images/menu-account.png" />
   <div id="menu-shadow"></div>
   <div id="menu-item-title"><div class="menu-item-title">Account Settings</div></div>
</div>
</a>

<a href="#templates/my-account.php" class="close">
<div id="menu-item">
   <img src="images/menu-account.png" />
   <div id="menu-shadow"></div>
   <div id="menu-item-title"><div class="menu-item-title">Account Settings</div></div>
</div>
</a>

<a href="#templates/my-account.php" class="close">
<div id="menu-item">
   <img src="images/menu-account.png" />
   <div id="menu-shadow"></div>
   <div id="menu-item-title"><div class="menu-item-title">Account Settings</div></div>
</div>
</a>

<a href="#templates/my-account.php" class="close">
<div id="menu-item">
   <img src="images/menu-account.png" />
   <div id="menu-shadow"></div>
   <div id="menu-item-title"><div class="menu-item-title">Account Settings</div></div>
</div>
</a>

</div>
</div>

<div id="wrapper">
   <div class="content-loading"></div>
   <div class="contentarea">
      <div class="content pageURL"></div>
   </div>
</div>

<div id="btn-menu" class="bar-button"><img src="images/bar-btn-menu.png" /></div> 
```

jQuery

```
<script type="text/javascript">
$('#btn-menu').click(function(){
    $("#menu").show();
    $("#main-menu").show();
    $("#bottom-bar-close").show();
});
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T16:43:41.407

想通了，这是一个小学生的错误，但它确实引起了一个非常烦人的问题。主菜单 div 未设置为“位置：相对；” 由于某种原因，这导致所有屏幕外内容仅在其位于视口内并且滚动完全停止时才呈现。这不会发生在桌面浏览器中，这就是为什么它这么长时间才发现问题的原因，如果我出于某种原因没有在另一个页面上的 div 上设置相对位置，我什至不会遇到解决方案。

总之，问题解决了。

# sql - 如何在 Rails 中编写此查询以使用 JQuery Tokeninput 自动完成？

> ID：10457655
> 
> 赞同：0
> 
> 时间：2012-05-05T00:12:24.940
> 
> 标签：sql, ruby-on-rails-3.1, autocomplete, jquery-tokeninput

我有一个使用[jQuery Tokeninput](http://loopj.com/jquery-tokeninput/)的带有“自动完成”字段的表单。基本查询仅查找名称或用户名与键入文本匹配的用户，它是：

```
#users_controller.rb
def index
  @users = User.where("LOWER(name) like ? OR LOWER(username) like ?", "%#{params[:q].downcase}%", "%#{params[:q].downcase}%").order('name ASC').limit(10) if params[:q]

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @users, :only => [:id, :name, :username] }

end 
```

**这很好用**。

我的应用程序还有一个“追随者模型”，我想限制哪些用户出现在自动完成字段中，以便只返回“互惠追随者”。“互惠追随者”是我追随我的人 [(A 追随 B) AND (B 追随 A)]。

我在 User 模型中有一个方法，它为用户返回互惠的追随者：

```
#user.rb
# Users relation to Relationships
has_many :relationships, :foreign_key => "follower_id", :dependent => :destroy
has_many :followed_users, :through => :relationships, :source => :followed
has_many :reverse_relationships, :foreign_key => "followed_id",
                                 :class_name  => "Relationship",
                                 :dependent => :destroy
has_many :followers, :through => :reverse_relationships, :source => :follower

def reciprocal_followers
  self.followers & self.followed_users
end 
```

我可以为输入文本的人获得互惠的追随者：

```
@reciprocal_followers = current_user.reciprocal_followers 
```

但是我如何根据输入的文本削减该列表？如何将现有的自动完成 (@users = User.where...) 查询与 @reciprocal_followers 集成？

用英语：“我希望自动完成显示最多 10 个互惠用户的列表，他们的姓名或用户名与用户在自动完成字段中输入的内容相同”。

如何修改定义“@users”的查询以根据“@reciprocal follower”进行限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:15:12.767

这是我最终解决的问题：

```
@users = current_user.reciprocal_followers.select {|u| u.name.downcase =~ /#{params[:q].downcase}/ || u.username.downcase =~ /#{params[:q].downcase}/}.sort_by { |u| [u.name, u.username] }.first(10) if params[:q] 
```

一位朋友还建议我将其移出 users_controller.rb 并移至 relationship_controller.rb 在那里我有“关注”和“取消关注”操作，因为我真的在寻找恰好是用户的关系列表（而不仅仅是寻找返回用户）。如果我将它留在 users_controller.rb 中，我可能应该将它移出“索引”操作。

# ruby-on-rails - 如何在创建新对象时急切加载？

> ID：10457658
> 
> 赞同：1
> 
> 时间：2012-05-05T00:12:34.160
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

我像往常一样在我的应用程序中创建建议：

```
class SuggestionsController < ApplicationController
  def create
    @suggestion = current_user.suggestions.new(params[:suggestion])

    if @suggestion.save
      render :show, status: :created
    else
      render :error, status: :unprocessable_entity
    end
  end
end 
```

每个建议都属于一个服务（`service_id`发送到 中的创建操作`params[:suggestion]`）。

当我将建议返回给客户端时，我想在 JSON 中包含建议服务的详细信息。这意味着我应该急于将它加载到某个地方以节省数据库请求。

如果我找到建议，这会很好：

```
Suggestion.includes(:service).find(params[:id]) 
```

我可以在储蓄上做类似的事情吗？

```
@suggestion = current_user.suggestions.new(params[:suggestion])
# This doesn't work.
@suggestion.includes(:service).save 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:14:03.270

您不能急于加载保存。仅在查询中。但是，一旦您保存并将@suggestion 返回到访问@suggestion.service 的视图，将访问数据库并为您返回适当的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:24:13.647

您可以将此作为建议模型中默认范围的一部分

```
scope :includes(:service) 
```

# mysql - MySQL 中的匹配集

> ID：10457660
> 
> 赞同：1
> 
> 时间：2012-05-05T00:12:55.463
> 
> 标签：mysql

我正在运行类似于以下的查询：

``SELECT * FROM `table` WHERE FIND_IN_SET('1',`tags`) OR FIND_IN_SET('2',`tags`)...`

有没有更简单的方法来运行查询来判断一个集合中的任何数字是否与另一个集合中的任何数字匹配？

例如，我想做这样的事情：

``SELECT * FROM `table` WHERE MATCH_ANY_IN_SET('1,2,7,34,45',`tags`)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:24:48.523

在字符串字段中使用分隔的“标签”列表不是很好地使用关系数据库管理系统（如 MySQL）。

创建一个单独的表会更明智，我们称之为它`ThingTags`，它将现有表中的内容与其标签相关联：

```
CREATE TABLE ThingTags (
  ThingID INT NOT NULL,
  TagID   INT NOT NULL,
  FOREIGN KEY (ThingID) REFERENCES `table` (ID)
); 
```

约束告诉 MySQL，只有在(where )中有相应的条目时，`FOREIGN KEY`记录才能存在。`ThingTags``table``ThingTags.ThingID = table.ID`

因此，对于每个“事物”，此表中将有多个记录：

```
INSERT INTO ThingTags VALUES (1,1), (1,7), (1,45), (2,1), (2,34); 
```

您的查询将如下所示：

```
SELECT `table`.*
FROM   `table` JOIN `ThingTags` ON `ThingTags`.`ThingID` = `table`.`ID`
WHERE  `ThingTags`.`TagID` IN (1,2,7,34,45); 
```

# c# - 如何约束采取行动的方法 只允许来自特定班级的代表

> ID：10457661
> 
> 赞同：0
> 
> 时间：2012-05-05T00:13:02.200
> 
> 标签：c#, delegates

如果我有这样的方法签名；

```
public void Execute(Action<T> action) {
    ...
} 
```

但我想对其进行限制，以便提供的“动作”仅来自“MyActions”类，这如何在 c# 中实现？

* * *

为了尝试并使其更清晰；

例如，我有一个名为 MyActions 的类；

```
public class MyActions {
    public void FirstAction<T>(T item) {
        ...
    }

    public void SecondAction<T>(T item) {
        ...
    }
} 
```

我有上述方法并且我想要它，以便该方法将接受的唯一操作是来自此类的操作。

我不希望任何人都可以提供任意动作，它们必须来自“MyActions”类。

可以做到吗？

问候，

瑞安。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:25:54.683

明确您只想接受成员的意图的一种方法`MyActions`是：

```
public void Execute(Func<MyActions, Action<T>> actionSelector) 
```

然后你可以这样称呼它

```
Execute(actions => actions.SomeAction); 
```

当然，这只有在方法（或委托属性）`MyActions`不是静态的情况下才有效。

就像我说的那样，这使您的意图清晰，但实际上并没有限制方法，有人仍然可以像这样调用您的方法：

```
Execute(ignored => otherAction); 
```

总的来说，这在我看来是一件很奇怪的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:17:08.637

```
public sealed class MyActions <T> where T:new()
{ 
    public enum Methods { First, Second }  

    static Action<T>[] MethodsArray = { Method1, Method2 };
    public virtual void Execute(T value, Methods methods = Methods.First)
    {
        MethodsArray[(int) methods].Invoke(value);
    }
    private void Method1(T value) {}
    private void Method2(T value) {}

}

//public class MiActionsSeconds<T> : MyActions <T>    where T:new()
// {
//     public override void Execute( T value, Methods methods = Methods.Second )
//     {
//         base.Execute( value, methods );
//     }
// }

public class Foo<T>  where T:new()
{
    public void Execute(MyActions<T> instance, MyActions<T>.Methods methods = Methods.First)
    {
        instance.Execute( default( T ) );
        instance.Execute( default( T ), MyActions<T>.Methods.Second );
    }

    public void Test()
    {
      //  Execute( new MiActionsSeconds<T>( ) );
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T00:19:33.647

你可以使用反射来做到这一点，但它会损害性能，我不推荐它，因为它只是一个坏主意。我认为您应该尝试一个不太具体的问题；告诉我们您想要实现的目标如何引导您走上这条道路，也许我们可以帮助您以另一种方式实现这一目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-30T16:09:22.443

这样做的一个大问题是，一旦你`Action<...> foo = MyActions.FirstAction`进入，`Execute`你就检索了一个值，它的类型是简单的`Action<...>`. 类型中没有任何内容表明它以前存储在`MyActions`. 您可以通过比较引用来检查是否`MyActions`包含正在传递的操作，但这是运行时检查。

将此信息放入类型中的一种部分方法是拥有一个`MyAction`类，其中的所有内容都`MyActions`派生自一个类。然后你可以限制`Execute`采取`MyAction`实例。但是，用户可以像创建自己的`MyAction`子类一样容易。

这闻起来像是不必要的内部暴露：如果只有那一小部分`Action`工作，那你为什么要向用户要一个`Action`？`enum`允许用户指定意图或仅指定几种不同方法`Execute`的更有意义。

# matlab - 离散小波变换返回大值

> ID：10457663
> 
> 赞同：0
> 
> 时间：2012-05-05T00:13:58.043
> 
> 标签：matlab

当我在灰度图像上实现 2D-DWT 时，LL 部分返回的最大值大于 255，为什么会发生这种情况？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:06:24.637

它不仅大于 255，还具有浮点数，应存储为浮点数或双精度数据类型。例如，`( 0.7071 0.7071 )`在白色图像（填充 255）上使用 Haar 小波（低通滤波器系数），我们得到`(0.7071*255*2)*0.7071*2=509.9902`LL 子带

# jquery - jQuery iTunes 图像滑块

> ID：10457666
> 
> 赞同：1
> 
> 时间：2012-05-05T00:15:15.500
> 
> 标签：jquery

我正在为我的网页设计 2 课程做最后一个项目，我想用 jQuery 来修饰我的网站。您是否曾经在 iTunes 或 iOS 上注意到，当您按专辑查看音乐时，它会在一个看起来非常漂亮的图像滑块中显示封面。我想做与此类似的事情，减去封面的翻转。到目前为止，这是我的代码：

```
$(document).ready(function(){
$('.secondImage').animate({ width: '155px', height: '155px' }, 0);
$('.thirdImage').animate({ width: '155px', height: '155px' }, 0);
$('.fourthImage').animate({ width: '155px', height: '155px' }, 0);
$(".item").hide(0).delay(2000).fadeIn(800);   // hides the columns div to ensure images are loaded
$("#loading").hide(0).fadeIn(500).delay(1000).fadeOut(500);   // hides the loading icon

$("#firstColumn").hover(function(){     
    $('.secondImage').animate({ width: '155px', height: '155px' }, 0);
    $('.thirdImage').animate({ width: '155px', height: '155px' }, 0);
    $('.fourthImage').animate({ width: '155px', height: '155px' }, 0);
    $('.firstImage').stop().animate({ width: '315px', height: "315px" }, 500);
});

$("#secondColumn").hover(function(){ 
    $('.firstImage').animate({ width: '155px', height: '155px' }, 0);
    $('.thirdImage').animate({ width: '155px', height: '155px' }, 0);
    $('.fourthImage').animate({ width: '155px', height: '155px' }, 0);
    $('.secondImage').stop().animate({ width: '315px', height: "315px" }, 500);
});

$("#thirdColumn").hover(function(){   
    $('.firstImage').animate({ width: '155px', height: '155px' }, 0);
    $('.secondImage').animate({ width: '155px', height: '155px' }, 0);
    $('.fourthImage').animate({ width: '155px', height: '155px' }, 0);
    $('.thirdImage').stop().animate({ width: '315px', height: "315px" }, 500);
});

$("#fourthColumn").hover(function(){  // when second div is hovered, set opacity of others to 0.5
    $('.firstImage').animate({ width: '155px', height: '155px' }, 0);
    $('.secondImage').animate({ width: '155px', height: '155px' }, 0);
    $('.thirdImage').animate({ width: '155px', height: '155px' }, 0);
    $('.fourthImage').stop().animate({ width: '315px', height: "315px" }, 500);
});
}); 
```

当页面加载时，主要内容区域被隐藏，同时出现一个虚假的加载屏幕。这样做只是因为我觉得它看起来很酷:)。图像重新调整大小并变得更大，就像我想要的那样。问题是，如果你走得太快，那么所有图像都会同时重新调整大小。我认为 .stop() 函数应该取消它，但也许我做错了什么。有没有更简单的方法来做 .animate()？我对任何和所有建议持开放态度。教程或示例链接也很受欢迎。

谢谢大家！- 迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:37:55.093

这是一个基本的例子，看一下：

### *[演示 jsBin](http://jsbin.com/ihuxas/8/edit)*

```
var imgWmarg = 159; // image with margins (px)
var imgW = 155;
var increaseWidth = 80; // px (both sides)

$('.item img').each(function(i,e){

  $(this).css({position:'absolute', left: '+='+(imgWmarg*i) });

  $(this).hover(function(){    
        $(this).css({zIndex:1}).stop(1).animate({ top:-(increaseWidth/2), left:((imgWmarg*i)-(increaseWidth/2)), width:(imgW+increaseWidth) },300);    
  }, function(){    
        $(this).stop(1).animate({ top:0, left:(imgWmarg*i), width:imgW }, 100, function(){
                $(this).css({zIndex:0});     // at the end of animation
        });
  });

}); 
```

我做了什么：

*   由于图像设置为位置：相对，我们必须使用 jQuery 将它们设置为绝对位置，并通过知道带边距的宽度和它们在父元素内的相应索引 N 来动态重置它们的“正常”位置
*   `i`in`.each(function(i,e){`返回每个元素的索引以进行动画处理
*   将`i`(0,1,2,3) 乘以 imgWmarg，我们就有了它们的位置。
*   比我们撤消 - 重做悬停位置。

# php - Wordpress - Taxonomie 使用 get_post_types 和自定义帖子类型的 Oder

> ID：10457668
> 
> 赞同：0
> 
> 时间：2012-05-05T00:15:21.857
> 
> 标签：php, wordpress, taxonomy

我有一些海关邮政类型，我已经为这些标签创建了海关分类。

例子：

自定义帖子类型：菜单

自定义分类：参考、价格

基本上我想按自定义帖子类型检索所有帖子（获取所有菜单），但按分类排序（按参考）

```
<ul>
    <?php
    $args = array(
                 'public' => true,
                 '_builtin' => false
                 );

    $output = 'objects';
    $post_types = get_post_types($args, $output);
    foreach ($post_types as $post_type) {
    ?>
    <li>
        <a href = "<?php echo $uploads['url']; ?>/Appetizers.jpg"><?php echo $post_type->label; ?></a>
        <div class = "ac_subitem">
            <span class = "ac_close"></span>
            <h2><?php echo $post_type->label; ?></h2>
            <ul>
                <?php
                $loop = new WP_Query(array('post_type' => $post_type->name));
                while ($loop->have_posts()) : $loop->the_post();
                ?>   
                <li> 
                    <?php
                    $reference = wp_get_object_terms($post->ID, 'references');
                    foreach ($references as $reference) {
                                            echo ('<span class="reference">');
                                            echo $reference->name;
                                            echo (' .</span>');
                    }

                    $price = wp_get_object_terms($post->ID, 'price');
                    foreach ($prices as $price) {
                                            echo ('<span class="price">');
                                            echo $price->name;
                                            echo ('</span>');
                    }
                endwhile;?>
                </li>
            </ul>
        </div>                                   
        <?php
    }?>
    </li>
</ul> 
```

输出应该是：

参考 1 -- 价格 £5.00

参考 2 -- 价格 £3.00

参考 3 -- 价格 £6.00

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:39:10.227

我不认为你可以直接使用 wp_query 来做到这一点。看看[这篇文章](http://scribu.net/wordpress/sortable-taxonomy-columns.html)，了解使用过滤器的方法。

# ruby-on-rails - 将 Devise edit_user 视图移动到模态

> ID：10457672
> 
> 赞同：0
> 
> 时间：2012-05-05T00:16:21.927
> 
> 标签：ruby-on-rails, devise, twitter-bootstrap

我如何将内置的 Devise edit_user_registration 视图移动到模态，以便当用户单击页面上的设置链接时，会显示模态而不是 Rails 路由到视图。我正在使用引导程序并希望使用他们的代码，但我不确定在哪里实际将模态视图的内容放置在 rails 中？

我是否必须覆盖设计路径甚至控制器？

调用模式是通过在任何布局中完成的......所以

```
<a class="btn" data-toggle="modal" href="#myModal" >Launch Modal</a> 
```

我最初的想法是用适当的 Modal 元素和 id 包装我的 ..devise/registration/edit.html.erb 但我不确定是否放置 href="#myModal" 必须与 modal 的 id 相同或者可以我使用默认的设计编辑路线...

如果我不使用设计，我不会有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:44:24.883

Bootstrap 执行了一些 JS 魔术，以便您的锚标记 href="#myModal" 中的 href 选择具有相同 id 的 div 并使用它作为模态显示的内容。

你想做的是这个

```
<a class="btn" data-toggle="modal" href="#myModal" >Launch Modal</a>
<div class="modal" id="myModal">
   <%= render :template => "devise/registrations/edit" %>
</div> 
```

这将在您当前的视图中呈现设计视图，但由于引导程序，它将被隐藏。然后感谢引导程序，当有人单击“启动模式”按钮时，它将显示隐藏的内容：您的用户编辑表单。

# php - 使用 cURL 将数据从网页复制到 cpp 中的字符串

> ID：10457673
> 
> 赞同：0
> 
> 时间：2012-05-05T00:16:28.280
> 
> 标签：php, c++, curl, webpage

我从他在网上找到的朋友那里得到了一个功能。问题是，我们都不明白它是如何工作的。它将网页的内容复制到字符串中。

我们使用 cURL 连接到一个 php 页面。有问题的功能是：

```
std::string contents;

size_t handle_data(void *ptr, size_t size, size_t nmemb, void *stream)
        {
                    int numbytes = size*nmemb;
                    char lastchar = *((char *) ptr + numbytes - 1);
                    *((char *) ptr + numbytes - 1) = '\0';
                    contents.append((char *)ptr);
                    contents.append(1,lastchar);
                    *((char *) ptr + numbytes - 1) = lastchar;  // Might not be necessary.
                    return size*nmemb;
        } 
```

它在此函数中调用：

```
curl_easy_setopt(curl,CURLOPT_WRITEFUNCTION,handle_data); 
```

任何关于它如何工作的解释都会很棒。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:38:12.233

我认为这是正确的：

```
std::string contents;

size_t handle_data(void *ptr, size_t size, size_t nmemb, void *stream)
{
  // The number of bytes to transfer is simply the
  // number of elements (nmemb) times the size of
  // each element (size).
  int numbytes = size*nmemb;

  // Remember the last character of the data we'll
  // be appending to 'contents', because we're about
  // to overwrite it with a zero C-string nul terminator.
  char lastchar = *((char *) ptr + numbytes - 1);

  // Overwrite the last character of ptr's data block
  // with zero, which is a C-string's nul-terminator.
  *((char *) ptr + numbytes - 1) = '\0';

  // Append the C-string which begins at 'ptr' to
  // 'contents'.
  contents.append((char *)ptr);

  // Now tack on the last character that we remembered above.
  contents.append(1,lastchar);

  // Restore the original data buffer's last character
  // in case the caller expects it to still be the same.
  *((char *) ptr + numbytes - 1) = lastchar;  // Might not be necessary.

  // Return the number of bytes  that were appended
  // to 'contents'.
  return size*nmemb;
} 
```

说了这么多，我不确定为什么 handle_data() 的全部内容不只是这样：

```
size_t handle_data(void *ptr, size_t size, size_t nmemb, void *stream)
{
    contents.append((char*)ptr, size*nmemb);
    return size*nmemb;
} 
```

...我认为这将完成完全相同的事情，只是更正确，因为如果“ptr”处的缓冲区包含嵌入的空字符，则发布的版本将提前停止。（当然，无论如何，这可能不是这个函数的用例。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:37:44.007

如果我必须描述它是如何工作的，我会说：“不是特别好”。

```
int numbytes = size*nmemb; 
```

这将计算缓冲区的大小——项目数 * 每个项目的大小。

```
char lastchar = *((char *) ptr + numbytes - 1); 
```

这将保存缓冲区中的最后一个字符以供以后使用。

```
*((char *) ptr + numbytes - 1) = '\0'; 
```

这会在缓冲区中添加一个 NUL 终止符，覆盖当前最后一个字符（这就是前面保存它的原因）。

```
contents.append((char *)ptr); 
```

这会将（截断的）缓冲区附加到字符串。

```
contents.append(1,lastchar); 
```

这会将保存的最后一个字符添加到字符串中。

```
*((char *) ptr + numbytes - 1) = lastchar;  // Might not be necessary. 
```

这会将最后一个字符恢复到缓冲区中。

```
return size*nmemb; 
```

这将返回缓冲区大小。

我想我应该解释为什么我说这不太好。并不是最终结果看起来是错误的，而是因为缓冲区中最后一个字符的所有旋转都是完全没有必要的。您可以指定附加到字符串的数量，而不是 NUL 终止缓冲区：

```
size_t numbytes = size * nmemb;
contents.append((char *)ptr, numbytes);
return numbytes; 
```

...或者，如果您更喜欢类似迭代器的用法：

```
size_t numbytes = size * nmemb;
char *p = (char *)ptr;
contents.append(p, p+numbytes);
return numbytes; 
```

我猜如果你找到了这样的一个，你就不必发布一个关于它是如何工作的问题。

# sharepoint - 从 Excel Web 部件生成报告 (.docx)

> ID：10457676
> 
> 赞同：1
> 
> 时间：2012-05-05T00:17:08.090
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-api

基本上我是从 Excel 文件生成报告 .docx 和 .pdf 格式。excel 文件显示为 Excel Webpart 并允许用户编辑 excel 文件。

要保存 excel 文件：

我正在按照此[示例](http://msdn.microsoft.com/en-us/office2010developertrainingcourse_solutiondevelopmentexcelserviceslab_topic4#_Toc289085983)将用户更改保存到 excel 文件。一个带有 JavaScript 代码的链接按钮，它调用 Excel Webservice 以将工作簿保存到文档库。

要生成报告：

我正在使用 Open Xml sdk 将值从 Excel 检索到 Word 文档中。这是一个带有按钮的 Web 部件。

我计划通过单击按钮完成这两项活动。所以，

1.  有什么方法可以使用 C# 而不是 Javascript 在 Excel Web 部件中保存用户更改？
2.  或者我如何首先从我的 Webpart C# 代码中调用 Javascript？

如果您能帮助我，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:33:26.050

我不知道第一种方法的任何细节，但您可以使用 RegisterStartupScript 函数注册客户端事件，如代码隐藏中的[此处所示。](http://blog.helloitsliam.com/Lists/Posts/Post.aspx?ID=37)

# php - 是否可以使用 PHP 显示计算机的 DNS

> ID：10457681
> 
> 赞同：-2
> 
> 时间：2012-05-05T00:18:59.263
> 
> 标签：php, dns

好的，我正在研究是否可以使用 PHP 获取计算机的 DNS。我知道 PHP 允许获取网站或服务器的 DNS 信息，但可以使用 $_SERVER['REMOTE_ADDR'] 和其他 PHP 函数以某种方式交叉引用计算机 DNS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-31T17:01:30.950

"" 是否可以使用 PHP 显示计算机的 DNS？“”

首先，我不相信你搜索，如果你的客户端 IP 有一个域名分配给它，如果是这样，上面的答案，或者像“whois”这样的一些 shell 命令可以帮助你。

我相信，你试图找出你的客户的“域名服务器”。为此，您需要在客户端机器上运行一些命令或脚本。

PHP，是一种服务器端脚本语言。您必须创建一个包含 java、javascript 的页面，当然，还要拥有您需要的权限，去做您认为可以做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:41:31.023

您可以`gethostbyaddr`为此使用：

```
$hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']); 
```

但是，我必须警告您，`$_SERVER['REMOTE_ADDR']`可以有几种形式；这里有几篇讨论这个值的文章：

*   [$_SERVER['REMOTE_ADDR'] 的问题](https://stackoverflow.com/questions/4594823/problem-with-serverremote-addr)
*   [PHP 中的 REMOTE_ADDR 和 IPv6](https://stackoverflow.com/questions/2619634/remote-addr-and-ipv6-in-php)

# php - php搜索数组键并获取值

> ID：10457685
> 
> 赞同：33
> 
> 时间：2012-05-05T00:19:13.613
> 
> 标签：php

我想知道在数组中搜索键并返回它的值的最佳方法是什么。类似于 array_search 但用于键的东西。循环是最好的方法吗？

大批：

```
Array([20120425] => 409 [20120426] => 610 [20120427] => 277
      [20120428] => 114 [20120429] => 32 [20120430] => 304
      [20120501] => 828 [20120502] => 803 [20120503] => 276 [20120504] => 162) 
```

我正在寻找的价值：20120504

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-05-05T00:22:23.970

钥匙已经是……嗯……*钥匙*

```
echo $array[20120504]; 
```

如果您不确定，如果密钥存在，请测试它

```
$key = 20120504;
$result = isset($array[$key]) ? $array[$key] : null; 
```

小补充：

```
$result = @$array[$key] ?: null; 
```

有人可能会争辩说，这`@`很糟糕，但请保持严肃：这更具可读性和直截了当，不是吗？

更新：使用 PHP7，我之前的示例可以在没有错误消音器的情况下使用

```
$result = $array[$key] ?? null; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-05T00:21:25.330

```
array_search('20120504', array_keys($your_array)); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-05T00:31:02.527

```
<?php

// Checks if key exists (doesn't care about it's value).
// @link http://php.net/manual/en/function.array-key-exists.php
if (array_key_exists(20120504, $search_array)) {
  echo $search_array[20120504];
}

// Checks against NULL
// @link http://php.net/manual/en/function.isset.php
if (isset($search_array[20120504])) {
  echo $search_array[20120504];
}

// No warning or error if key doesn't exist plus checks for emptiness.
// @link http://php.net/manual/en/function.empty.php
if (!empty($search_array[20120504])) {
  echo $search_array[20120504];
}

?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-05T00:23:47.110

这是直接来自 PHP.net 的示例

```
$a = array(
    "one" => 1,
    "two" => 2,
    "three" => 3,
    "seventeen" => 17
);

foreach ($a as $k => $v) {
    echo "\$a[$k] => $v.\n";
} 
```

在 foreach 中，您可以将每个键与您正在寻找的东西进行比较

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-04-29T04:01:55.373

为了获取多维数组中的最后一个值并按升序排列，

```
 function lastvalue($array, $key)
    {  
        $a = array();
        for($i = 0; $i < count($array); $i++){
                $a[] = $array[$i][$key];
        }
       sort($a);
       return $a[$i-1];
    }

    $a=array(
            array("row" => 2, "column" => 6),
            array("row" => 2, "column" => 3), 
            array("row" => 2, "column" => 7)
           );

    echo lastvalue($a, "column"); //result = 7 
```

# c# - NLog：是否可以从代码更改源名称？

> ID：10457690
> 
> 赞同：0
> 
> 时间：2012-05-05T00:19:58.263
> 
> 标签：c#, .net, nlog

是否可以通过代码更改`source`名称？我的解决方案有几个模块，我想在查看日志时将它们分开。

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <targets>
    <target xsi:type="EventLog" name="eventlog" layout="${message}" log="Application" source="MyAwesomeSolution"/>
  </targets>
  <rules>
    <logger name="*" minlevel="Info" writeTo="eventLog" />
  </rules>
</nlog> 
```

另外，如何将对象记录为 xml？例如，如果我这样做 - `logger.Info("Results - {0}", person);`我想`person`在我的事件日志中以 XML 形式查看对象。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:04:36.797

初始化您的 Logger 对象

```
private static Logger logger = LogManager.GetCurrentClassLogger(); 
```

然后你可以添加

`${callsite}`配置文件中的布局

例如

```
<targets>
    <target xsi:type="EventLog" name="eventlog" layout="${callsite}:${message}" log="Application" source="MyAwesomeSolution"/>
</targets> 
```

更多信息@${callsite} 在[这里](http://nlog-project.org/wiki/Callsite_layout_renderer)。

# ubuntu - 无法 ssh 到 Amazon EC2 帐户。（公钥错误）

> ID：10457695
> 
> 赞同：4
> 
> 时间：2012-05-05T00:20:36.550
> 
> 标签：ubuntu, amazon-ec2, amazon-web-services

我刚刚启动了一个 EC2 实例，但在启动 ssh 连接时遇到了困难。请注意，我有一个以前的 EC2 实例，它使用相同的密钥对 ssh 运行良好。我很困惑，因为我使用相同的密钥对启动了这个新的 EC2 实例。

以下是我尝试过的。关于这里可能发生的事情的任何专家建议？以及如何解决？

```
me@ubuntu:~/keys$ ssh -i mykey.pem ubuntu@1.2.3.4
The authenticity of host '1.2.3.4 (1.2.3.4)' can't be established.
RSA key fingerprint is aa:bb:cc:cc:cc:cc:cc:cc:cc:cc:cc:cc:cc:cc:cc.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '1.2.3.4' (RSA) to the list of known hosts.
Permission denied (publickey).

me@ubuntu:~/keys$ chmod 400 mykey.pem
me@ubuntu:~/keys$ ssh -i mykey.pem ubuntu@1.2.3.4
Permission denied (publickey).

me@ubuntu:~/keys$ ssh -v -i mykey.pem ubuntu@1.2.3.4
OpenSSH_5.8p1 Debian-1ubuntu3, OpenSSL 0.9.8o 01 Jun 2010
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to 1.2.3.4 [1.2.3.4] port 22.
debug1: Connection established.
debug1: identity file mykey.pem type -1
debug1: identity file mykey.pem-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3
debug1: match: OpenSSH_5.3 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.8p1 Debian-1ubuntu3
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA aa:bb:cc:cc:cc:cc:cc:cc:cc:cc:cc:cc:cc:cc:cc
debug1: Host '1.2.3.4' is known and matches the RSA host key.
debug1: Found key in /home/me/.ssh/known_hosts:10
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Trying private key: mykey.pem
debug1: read PEM private key done: type RSA
debug1: Authentications that can continue: publickey
debug1: No more authentication methods to try.
Permission denied (publickey). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T02:43:56.190

您使用的密钥对必须是错误/丢失的，并且您无法恢复私钥对，因为我曾经丢失了 .pem 文件并且必须重新创建和实例化。它就像一个密码，亚马逊出于安全原因不保存私钥。

要解决这个问题。

转到 aws 管理控制台 1\. 停止实例并创建相同的 AMI 映像。2\. 使用创建的 AMI 映像和附加的新密钥对启动一个新实例。3.然后分配之前分配给旧实例的弹性IP。4\. 如果一切正常，删除旧实例。

因此，将 XXXX.pem 文件保存在某个在线位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T15:45:01.043

关键调试日志是这样的：

```
debug1: Roaming not allowed by server 
```

您是从 3g/4g 热点连接的吗？Amazon EC2 公然忽略您的 pem 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T00:26:16.620

尝试：

```
chmod 600 [FULL_PATH_TO_KEYFILE_DIRECTORY]/mykey.pem 
```

反而。

如果您的 AMI 是`Amazon AMI`，请使用`ec2-user`您的用户名。

如果仍然无法正常工作，请尝试将以下内容放入您的`~/.ssh/config`:

```
IdentitiesOnly yes
KeepAlive yes
ServerAliveInterval 60
Host ALAIS_FOR_YOUR_HOST
    User ubuntu
    HostName HOST_IP
    IdentityFile FULL_PATH_TO_KEY_FILE 
```

# trigger.io - 如何在 trigger.io 中配置 iOS 应用程序图标？

> ID：10457704
> 
> 赞同：1
> 
> 时间：2012-05-05T00:22:03.750
> 
> 标签：trigger.io

我正在尝试配置 iOS 应用程序图标，但将其添加到 config.json 不起作用。

```
{
    "author": "myemail", 
    "config_version": "2", 
    "description": "My Extension Description",
    "icons": {
        "ios": {
            "57": "57px.png",
            "72": "72px.png",
            "114": "114px.png"
        }
    },... 
```

所有图标都在我的 src 文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:02:06.703

请注意，`icons`配置必须在`modules`哈希内（请参阅[http://current-docs.trigger.io/modules/icons.html#config](http://current-docs.trigger.io/modules/icons.html#config)）。

此外，请参阅[https://github.com/goodgravy/forge-spikes/tree/master/ios-icons](https://github.com/goodgravy/forge-spikes/tree/master/ios-icons)以获取具有“可爱”洋红色图标集的精简示例应用程序。

# xquery - Xquery：将链接变成变量

> ID：10457717
> 
> 赞同：0
> 
> 时间：2012-05-05T00:25:14.877
> 
> 标签：xquery

是否可以将 xquery 文件 (.xq) 中的链接作为变量？

例如，我有以下链接，我需要将其转换为变量，以便可以将其与 for-contains 代码一起使用。

```
{ for $x in doc("myfile.xml")/portion/food
     return <li><a href="#link"></a>{data($x)}</li>}</ul>

{ for $y in doc("myfile.xml")/portion[contains(., <THIS IS WHERE THE LINK VARIABLE SHOULD GO>)] 
```

我知道设置一个变量如下，但还没有能够将 2 放在一起使其工作

```
declare variable $hello := ("Hello World"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:44:38.717

您的问题结合了应该单独处理的不同点。如果我理解正确，您想在 Web 浏览器中显示查询结果，并且您想在创建结果页面**后**在用户交互时操作它的 DOM。我认为第一部分（在浏览器中显示）[不是问题](https://stackoverflow.com/a/10457629/342546)。

由于浏览器只显示序列化到文件中的查询结果（与简单的文本编辑器一样），因此浏览器和 XQuery 引擎之间基本上没有“联系”或“通信”，可以重新评估任何用户相互作用。因此，您的问题基本上是询问如何创建这种基于自定义参数重新评估 XQuery 的方式。

[eXist-db](http://www.exist-db.org)的文档有一个有趣但简单的示例，一个[数字猜谜游戏](http://www.exist-db.org/exist/devguide_xquery.xml#d25457e425)，需要服务器端评估用户输入并在每次猜测时修改页面内容。它完全在 XQuery 中实现，使用 eXist-dbs 的会话处理和**XQuery Servlet**功能。

根据您的需要调整数字猜测示例应该很容易。您甚至不需要跟踪猜测计数，因此不需要在服务器上创建会话。将所选项目与请求一起发送就足够了`id`（如示例所示，使用纯 HTML 表单使用猜测的数字），并使用 XQuery 函数评估该请求属性。在示例中，该`local:guess`函数负责此任务，它还创建适当的 HTML 输出。

这样的解决方案取决于 XQuery 引擎的功能。也许使用 Javascript 可以实现“独立”解决方案，但这似乎超出了问题的范围。

# android - 想要阻止某人拍摄快照

> ID：10457719
> 
> 赞同：0
> 
> 时间：2012-05-05T00:25:34.140
> 
> 标签：android

我正在为企业构建应用程序。在这个应用程序中，我想放置一些人们可以在商店使用安装应用程序的独家优惠券。因为它是一个免费的应用程序，所以我将在应用程序中放置广告。想要保持转速进来，我不希望人们只是拍摄优惠券的快照，然后删除应用程序......有没有办法阻止他们这样做？或者有没有办法让我在他们拍摄快照时在优惠券的快照上弹出一个 VOID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:28:54.060

> 有没有办法阻止他们这样做？

最终：没有。你只能让截图变得*困难，*而不是*不可能；*考虑一下普通用户截取屏幕截图的难度。¹一旦数据显示在屏幕上，您就输掉了比赛。示例：使用单独的相机拍摄屏幕照片。

但是，您*可以*做的是使每张优惠券独一无二，并且仅对一次使用有效。这意味着您必须跟踪发行的每张优惠券，但这确实可以防止滥用。

* * *

[¹非常，前 Android 4：[https ://android.stackexchange.com/questions/1759/how-to-take-a-screenshot-with-an-android-phone](https://android.stackexchange.com/questions/1759/how-to-take-a-screenshot-with-an-android-phone)]

# python - 我可以从自定义构建中省略哪些 Python“核心模块”？

> ID：10457722
> 
> 赞同：0
> 
> 时间：2012-05-05T00:25:46.260
> 
> 标签：python, windows, visual-c++, static-linking

我想修补 Python 源代码，以便可以将其静态链接到我的 Windows 应用程序中（我*知道*这并不容易，甚至不鼓励，因为特别是核心模块的加载方式）。

尽管名称表明它们是必需的，但我可以省略某些“核心模块”吗？

我正在考虑`_tkinter`, `_ssl`and `ssl`（还不能 100% 确定我是否要删除那个），`winsound`and `w9xpopen`（它只会在 NT 平台上使用）在这里。这是可能的还是会以微妙的方式破坏事情？

**注意：**请不要提及静态链接出于某种原因是不好的。对于我需要它的情况，这将是迄今为止最好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T07:07:10.377

考虑到你多久以前问过这个问题，不确定你是否还需要这个答案，但我想我会留下一些我发现的信息，因为我想知道同样的事情：

**注意**：这是基于 Python 2.7.3 的源代码树

有一些 python 模块依赖于 _ssl/ssl 模块，但它们都有错误检查以支持没有 SSL 的 Python 版本，并且只会禁用该功能。

使用 ssl 模块的包含的 python 模块是：

*   插座
*   ftplib
*   httplib
*   imaplib
*   流行音乐库
*   smtplib
*   urllib
*   xmlrpclib

由于您将其嵌入到您自己的应用程序中，因此我可能也会与 _msi 分开。（这将允许您删除 msilib 模块）

如果您继续删除您提到的扩展，您总是希望从 Lib 文件夹中删除以下 python 模块：

*   库-tk
*   ssl
*   wave（我假设您不需要解析波形文件的支持，因为您放弃了 winsound）
*   苏瑙 ( ^ )
*   新音响 ( ^ )
*   音频设备 ( ^ )
*   aifc ( ^ )
*   块 ( ^ )
*   toaiff ( ^ )

我假设这是一个 GUI 应用程序，所以您可能不需要以下 Python 模块：

*   诅咒
*   tty
*   pty
*   完成者

不过，不确定您的应用做了什么/做了什么，所以我会保守其他的。

至于用 C 编写的内置模块，我不能保证它 100% 没有问题，但您应该能够删除以下一些内容，具体取决于您的应用程序实际需要什么。

*   _csv
*   _json（尽管这个模块为仅 python 的 json 模块提供加速）
*   _hotshot（如果你不需要 hotshot，它是一个日志分析器）
*   图像操作

可能还有其他人在这里。

# php - 在 php/MYSQL 中存储和检索（用户操作）的最佳方式？

> ID：10457723
> 
> 赞同：0
> 
> 时间：2012-05-05T00:25:49.013
> 
> 标签：php, mysql

我会像用户一样存储东西；搜索历史，帖子查看历史，保存的帖子等......你明白了。

例如，对于用户已保存的帖子，用户在其整个生命周期中将拥有大约 500-2,000 个，并且对于成千上万的用户，您可以看到这将如何快速加起来。所以当用户想要查看他们保存的帖子历史记录时是什么展示它的最佳方式是什么？

Surley 在表格中查询与用户 ID 匹配的所有已保存帖子（大约 2,000 个）会很疯狂（如果我以传统方式存储它（用户、帖子 ID））！

我的想法是将所有用户保存的帖子 ID 保存在一个大数组中，因此每个用户会有 1 行而不是 2,000 行（存储在一个单元格中）。有什么理由我不应该这样做吗？你知道的最有效的方法是什么？哦，如果你同意这应该是什么数据类型，BLOB？

附带问题 - 当数据库达到超过 10-1 亿行的大小时，大多数人会采用什么解决方案？（硬件除外）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:42:15.430

按照建议添加索引。1 亿行的可能解决方案是一种称为数据库分片的技术，您可以根据 ID 范围有效地将同一个表存储在多个数据库实例（服务器）中。然后，给定用户的帖子将存在于许多“碎片”之一上

[http://en.wikipedia.org/wiki/Shard_(database_architecture](http://en.wikipedia.org/wiki/Shard_(database_architecture) )

# bash - bash 忘记导出变量

> ID：10457725
> 
> 赞同：2
> 
> 时间：2012-05-05T00:26:05.107
> 
> 标签：bash, variables, export

我什至无法从脚本中导出最简单的变量以在我的 bash 中工作——我做错了什么？

文件**test.sh**：

```
#!/bin/bash
echo $ttt
ttt="fffalse"
export ttt
echo $ttt 
```

**重击测试：**

```
hpek@hpek:~/temp$ export ttt="tttrue"
hpek@hpek:~/temp$ ./test.sh 
tttrue
fffalse
hpek@hpek:~/temp$ ./test.sh 
tttrue
fffalse
hpek@hpek:~/temp$ 
```

**编辑：**

我现在从答案中知道，这行不通。-但是如何在进程之间记住单个变量？我需要将其存储在文件中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T00:28:30.117

`./test.sh`是相同的`bash test.sh`

实际上，每个运行的 shell 脚本都是父 shell 的[子](http://tldp.org/LDP/abs/html/subshells.html)进程（子进程）。
并且子进程无法将 env-var 导出到它的父进程。

* * *

你可以试试这个（在相同的环境下运行）：

```
. test.sh 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T00:28:21.880

`export`在当前进程中工作以及之后产生的任何子进程；它不适用于跨进程边界（父进程、现有子进程、不相关进程）。该环境的行为类似于一种影子参数列表，而不是文件系统或邮箱。

# android - 在 android 应用程序而不是 SQLite 中实现 MS Access 数据库？

> ID：10457729
> 
> 赞同：1
> 
> 时间：2012-05-05T00:26:30.030
> 
> 标签：android, database, ms-access

有什么方法可以在我的 Android 应用程序中使用 Microsoft Access 数据库而不是 SQLite 数据库？

我有一个预先存在的 Access 数据库，其中包含 50 多个表，并且重新编写它会很痛苦。如果有人对如何在我的应用程序中实现访问我的 Access 数据库有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T03:42:45.280

是的，有办法。LGPL [Jackcess 库](http://jackcess.sourceforge.net "杰克塞斯")。我将它用于我的应用程序 Panacea Database，它可以在 Android 上处理 Microsoft Access 文件。

正如其他人所说，SQLite 是更以 Android 为中心的做事方式，因此您可能也想考虑走这条路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T00:33:39.443

不要试图将 Microsoft Access 推入 Android。选择阻力最小的过去，*将*您的 Access 数据库迁移到受支持的数据库。

SQLite 具有转换工具，可帮助[您将现有的 Access 数据库转换为 SQLite。](http://www.sqlite.org/cvstrac/wiki?p=ConverterTools)

# php - 在 h2 中回显 php

> ID：10457735
> 
> 赞同：1
> 
> 时间：2012-05-05T00:27:49.037
> 
> 标签：php, css, styles, call

我在 div 和 h2 中呼应了一个 php 语句。该语句从数据库中调用用户名。然而，被叫的名字，却是强行在欢迎之下。我如何将两个单词保持在同一行？

```
<div id="teaser">
    <div class="wrap">
        <div id="image"></div>
        <div class="box">
            <h2>Welcome</h2> 
    <?php
  session_start ();
   if (isset($_SESSION['username']))
echo "<h2>".$_SESSION['username']."!</h2>";
     else
die("You must be logged in!");
     ?> 
```

有什么建议可以让他们保持在同一条线上吗？div 不是太小，也不是太小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:32:20.187

```
<h2>Welcome <?php
if (isset($_SESSION['username'])) {
   echo $_SESSION['username'];
} else {
   echo 'You must be logged in';
}
?></h2> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:46:18.527

就个人而言，我不喜欢将 PHP 条件嵌入到单个 html 行中，而是更喜欢将 html 文件顶部的条件变量本地化为单个 var。然后当我将它们添加到 html 中时，它会更容易阅读代码。像这样：

```
<?php
session_start();

// Ternary op, if username is available, use it, otherwise default to null
$userMessage = 'Welcome' . ((isset($_SESSION['username'])) ? ' ' . $_SESSION['username'] : null);
?>

<div id="teaser">
    <div class="wrap">
        <div id="image"></div>
        <div class="box">
            <h2><?php echo $userMessage ?></h2> 
```

或者，如果您想变得更复杂一点：

```
<?php session_start() ?>

<div id="teaser">
    <div class="wrap">
        <div id="image"></div>
        <div class="box">
            <?php if (isset($_SESSION['username'])): ?>
            <h2>Welcome <?php echo $_SESSION['username'] ?></h2> 
            <?php else: ?>
            <h2>Welcome stranger, click <a href="lilo.php">here</a> to login</h2>
            <?php endif ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T00:29:53.603

使用 css 使您`<h2>`的内联元素（而不是块）：

```
#teaser h2 {
    display: inline;
} 
```

或者修改您的 PHP 以在以下内容中回显文本`<h2>`：

```
<div id="teaser"> 
    <div class="wrap"> 
        <div id="image"></div> 
        <div class="box"> 
            <h2>Welcome  
    <?php 
  session_start (); 
   if (isset($_SESSION['username'])) 
echo $_SESSION['username']."!"; 
     else 
die("You must be logged in!"); 
     ?></h2> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T00:30:57.740

标题是块元素，因此它们将占据一行。

您应该通过添加属性 style="display: inline;" 将其显示更改为内联 或编辑css文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T00:31:38.167

您可以删除`</h2>`“欢迎”之后的结束和回声中的开口`<h2>`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T00:37:34.287

我强烈建议您以这种方式重新组织您的代码：

```
<?php 
  $user_name = '';
  session_start ();
  if (isset($_SESSION['username'])){
        $user_name = $_SESSION['username'];
  }     
  else{
        $user_name = "- You must be logged in!";
  }     
?>

<div id="teaser">
    <div class="wrap">
        <div id="image"></div>
        <div class="box">
            <h2>Welcome <?php echo $user_name; ?></h2> 
          </div> 
```

分离 PHP 和 HTML 代码可以更轻松地处理代码并发现可能的错误。当页面如此简单时，它似乎并不重要，但在更复杂的项目中，混合代码会使它变得非常易读且难以支持:-(

# java - 带有 calendarServer 的 iCal4J 是否适合此应用程序？

> ID：10457736
> 
> 赞同：2
> 
> 时间：2012-05-05T00:27:49.617
> 
> 标签：java, calendar, icalendar, ical4j

我想为我们的用户提供一个 iCal，他们可以将其包含在他们最喜欢的日历应用程序中。

在 calendarServer（Darwin Calendar Server）上托管 iCal 文件并将服务器与 iCal4j 框架连接可能是合适的。你认为这可行吗？我想提供什么：

1.  用户可以查看他们使用我的服务所做的所有当前约会
2.  用户不能向日历添加新事件
3.  用户可以更改事件的时间，java webservice（tomcat 中的 spring）可以识别并对此更改做出反应
4.  可选：用户可以通过邮件接收会议请求。当他们接受时，应通知网络服务。之后，新会议将出现在日历中。

你会使用哪些框架来解决这个问题？您会使用像 calendarServer 这样的 ical 服务器来托管 ical 文件并通过 api 更改它，还是直接在 web 服务器中托管 ical 文件？

非常感谢您分享您的经验！

史蒂夫

# css - 将 div 垂直拉伸到其父级，而不是整个页面

> ID：10457741
> 
> 赞同：1
> 
> 时间：2012-05-05T00:28:42.973
> 
> 标签：css, html, vertical-alignment, stretch

我正在尝试做这件事，这显然会导致很多人头疼，并且我找到了一些接近解决方案，但并不完全是我所需要的。我想要一个左侧边栏 div 和一个右侧主要内容 div。在这些之下，一个页脚。在侧边栏中，我想从 div 的顶部到底部运行一条带，填充背景图像，并且我希望它停止在页脚上方，与主要内容 div 的高度匹配，无论高低。

如果你想看看我在追求什么，我在[http://lumn.net/about.html](http://lumn.net/about.html)提供了一个示例页面。没有一个链接处于活动状态，代码也非常混乱——这周我真的在自学css。但至少你可以看到我设想的布局。

我尝试从 <html> 到有问题的 div 声明一堆“height:100%”，这让它伸展到整个页面，但不匹配其父级的高度。仅在“strip”div 上使用“height:100%”，它的父级似乎没有做任何事情。我还尝试了“position:absolute;top:0;bottom:0”，它也没有做任何事情。div 消失了（因为它除了背景图像之外什么都没有）。

然后我尝试了一个在[http://www.cssnewbie.com/equal-height-columns-with-jquery/](http://www.cssnewbie.com/equal-height-columns-with-jquery/)找到的 jQuery 插件，但要么我不知道如何正确调用它，要么我的页面中的某些东西阻止了它从工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:04:41.997

为了使相对大小正常工作，您必须为父对象和子对象指定“位置：相对”，并且父对象必须具有指定的高度，可以是静态的、相对的或绝对的。

其次，您想要流体等高的列，因此您需要制作一个主列，然后侧列需要作为主列的子级存在。然后简单地为左列声明一个负的左边距，为右列声明一个负的右边距。这是每个人都使用的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:46:14.987

不如将侧边栏作为背景图片放在内容 div 中并使用

```
background: url('image.jpg') repeat-y;
padding-left: 210px; 
```

在主要内容 div 上使其向左运行。像这样：http: [//jsfiddle.net/JMC_Creative/dMbmP/](http://jsfiddle.net/JMC_Creative/dMbmP/)

我知道这不会给出与您的示例页面完全相同的结果，但是您能否从中推断出一些对您有用的东西？

# javascript - 在 KeyUp 和 Paste 事件上限制 AJAX 请求

> ID：10457743
> 
> 赞同：4
> 
> 时间：2012-05-05T00:29:18.147
> 
> 标签：javascript, jquery, ajax

因此，我在文本框上的 jQuery 中对每个事件`keyup`调用AJAX 请求：`paste`

```
 $("#server-label").bind("keyup paste", function() {
     $.ajax()...
 }); 
```

问题是如果用户快速按键，这就是太多的 AJAX 请求。在调用 AJAX 请求之前，等待用户停止输入一段时间（比如 500 毫秒）的最佳方法是什么？基本上不要发出 AJAX 请求，直到在 500 毫秒内没有触发任何键或粘贴事件。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T00:34:13.883

尝试使用`setTimeout()`和`timer`var 来跟踪它：

```
var t;
$("#server-label").on("keyup paste", function() {
    clearTimeout(t);
    t = setTimeout(function() {
        $.ajax({/*[...]*/});
        //...
    }, 500);
}); 
```

您也可以使用节流阀或[去抖动](http://code.google.com/p/jquery-debounce/)，但如果您将代码包装在函数对象或字符串中以传递给函数，我认为没有必要`setTimeout()`。

# javascript - 包装具有相同属性的元素

> ID：10457746
> 
> 赞同：0
> 
> 时间：2012-05-05T00:29:41.330
> 
> 标签：javascript, html

如果我有类似元素的列表，例如：

```
<outer-container>
    <element attribute="x" />
    <element attribute="x" />
    .
    .
    .
    <element attribute="y" />
    <element attribute="z" />
</outer-container> 
```

如何包装元素，`attribute="x"`使它们在自己的容器中？

```
<outer-container>
    <inner-container>
        <element attribute="x" />
        <element attribute="x" />
    </inner-container>
    .
    .
    .
</outer-container> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:45:18.473

如果 jQuery 是一个选项：

```
$('[attribute="x"]').wrapAll('<inner-container/>'); 
```

演示：http: [//jsfiddle.net/iambriansreed/Hgp7B/](http://jsfiddle.net/iambriansreed/Hgp7B/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T01:07:56.943

我更改了您的 HTML 以使其更易于测试。

```
<div>
    <input attribute="x" />
    <input attribute="x" />
    <p>divider</p>
    <input attribute="y" />
    <input attribute="z" />
</div> 
```

假设您希望将所有此类元素放在一个容器中，并将其放置在找到第一个容器的位置，您可以执行此操作。

```
 // invoked like this
wrapAll('input[attribute=x]', 'span'); 
```

```
 // implemented like this
function wrapAll(selector, wrapper) {
    if (typeof wrapper === 'string')
        wrapper = document.createElement(wrapper);
    else if (!wrapper || !wrapper.nodeType)
        throw "Illegal 'wrapper' argument."

    var els = document.querySelectorAll(selector);

    els[0].parentNode.insertBefore(wrapper, els[0]);

    for(var i = 0, len = els.length; i < len; i++)
        wrapper.appendChild(els[i]);
} 
```

[http://jsfiddle.net/5z2uA/4/](http://jsfiddle.net/5z2uA/4/)

* * *

如果您希望将不同的连续组包装在一起，您可以这样做。

```
 // invoked like this
wrapAdjacent('input[attribute=x]', 'span'); 
```

```
 // implemented like this
function wrapAdjacent(selector, wrapper) {
    if (typeof wrapper === 'string')
        wrapper = document.createElement(wrapper);
    else if (!wrapper || !wrapper.nodeType)
        throw "Illegal 'wrapper' argument."

    var els = document.querySelectorAll(selector);

    for (var i = 0, len = els.length; i < len; ) {
        var this_wrapper = wrapper.cloneNode(false);
        els[i].parentNode.insertBefore(this_wrapper, els[i]);
        do {
            this_wrapper.appendChild(els[i]);
            i++;
        }
        while (nextEl(this_wrapper) === els[i])       
    }
}
function nextEl(el) {
    while (el && (el = el.nextSibling) && el.nodeType !== 1) {}
    return el;
} 
```

[http://jsfiddle.net/5z2uA/5/](http://jsfiddle.net/5z2uA/5/)

# java - Java，在 ObjectOutputStream 上调用 readObject() 时，它只返回一个值

> ID：10457748
> 
> 赞同：0
> 
> 时间：2012-05-05T00:30:06.010
> 
> 标签：java, sockets, objectoutputstream

我正在写一个服务器/客户端游戏。我的客户端向服务器发送一条消息，服务器应该将该消息分发给连接到服务器的所有其他客户端。我遇到的问题是，当我调用 ois.readObject() （其中 ois 是从 ServerSocket accept() 调用创建的 ObjectInputStream ）时，它只返回我写入客户端相应 ObjectOutputStream 的第一个值.

这是我的服务器为每个连接的客户端创建的线程的代码。

```
@Override
public void run() {
    Iterator<ClientThread> itr = null;
    ClientThread ct = null;
    Object recObj = null;
    try {
        oos.writeObject(id);
        oos.flush();

        while(oos != null && ois != null) {
            recObj = ois.readObject();
            System.out.println(recObj);
            if(recObj instanceof Player) {
                System.out.println("[" + id + "] Recieved player from client.");

                player = (Player) recObj;
                Server.playerMap.put(player.getId(), player);

                if(player == null) {
                    System.out.println("Player " + player.getId() + " has joined the server.");
                }

                itr = Server.threadList.iterator();
                while(itr.hasNext()) {
                    ct = itr.next();
                    if(!(ct.id == this.id)) {
                        ct.oos.writeObject(recObj);
                        ct.oos.flush();
                        System.out.println("Sending " + (Player) recObj + " to client " + ct.id + "!");
                    } else {
                        System.out.println("Don't send stuff to " + ct.id + " or we get an infinite loop!");
                    }
                }
            } else {
                System.err.println("Recieved something other than a Player object.");
            }
        }
    } catch (IOException e) {
        System.err.println("[INFO] " + e.getLocalizedMessage());

    } catch (ClassNotFoundException e) {
        System.err.println(e.getLocalizedMessage());
        e.printStackTrace();
    }
    cleanup();
} 
```

此代码适用于每个客户端创建的线程。

```
@Override
public void run() {
    Object recObj = null;
    Player newPlayer = null;
    try {
        recObj = client.ois.readObject();
        if(recObj instanceof Integer) {
            client.player = new Player((Integer) recObj);
            client.playerMap.put(client.player.getId(), client.player);
        } else {
            System.err.println("First object recieved from server was not of type Integer.");
            System.err.println("No valid id has been set.");
        }

        while(client.ois != null) {
            recObj = client.ois.readObject();
            if(recObj instanceof Player) {
                newPlayer = (Player) recObj;
                System.out.println("Recieved " + newPlayer + "!");
                client.playerMap.put(newPlayer.getId(), newPlayer); 
            }
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

PS 我意识到我不需要刷新 ObjectOutputStream 但这只是一个测试的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:36:01.627

每次写入后在 ObjectOutputStream 上调用 .reset。

# objective-c - 从 UIWebView 抓取 POST 数据

> ID：10457749
> 
> 赞同：7
> 
> 时间：2012-05-05T00:30:11.137
> 
> 标签：objective-c

我想知道是否可以在 UIWebView 中按下提交按钮时获取 POST 数据并保存它。我应该使用 javascript 并添加事件侦听器，以便在提交通过之前获取值吗？如果是这样，我如何能够将数据返回到我在 obj c 中的代码？否则，有没有更简单的方法？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T00:47:48.207

您需要实现 UIWebViewDelegate。iOS 调用了一个名为“shouldStartLoadWithRequest”的钩子。

伪代码如下。

```
@interface MyController<UIWebViewDelegate>
@end

@implementation MyController
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request       navigationType:(UIWebViewNavigationType)navigationType
{
    // do your magic
    NSData *data = request.HTTPBody; // contains the HTTP body as in an HTTP POST request.

    // return YES to continue to load the URL
}
@end 
```

# javascript - 使用 HTML5 和 Javascript 在鼠标移出时重置视频

> ID：10457750
> 
> 赞同：1
> 
> 时间：2012-05-05T00:30:17.097
> 
> 标签：javascript, html5-video

我试图让鼠标离开后悬停后出现的视频重置为开始，这是[我的测试的链接](http://motion-master-templates.com/test-page)。我在[寻找答案](https://stackoverflow.com/questions/8402158/html5-video-javascript-controls-restart-video)时发现了这一点， 但我不知道如何让它发挥作用。

这是我获得 javascript 代码的地方：[链接到代码](http://www.trustweb.it/it/blog/download/jquery-html5-video-tooltip.html)

任何帮助或建议都会很棒。谢谢！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T00:47:54.943

由于您的网站使用 jQuery：

```
$(".h5vt").mouseout(function() {
    $("video").get(0).currentTime = 0;
}) 
```

只需将`mouseout`事件绑定到倒带视频的图像即可。

您应该`id`向视频添加一个属性，并使用`$("#myvideoid").get(0)`或`document.getElementById("myvideoid")`代替`$("video").get(0)`我的示例中的使用来访问它。由于您的视频元素缺少`id`.

# java - Java从数组中删除重复项

> ID：10457751
> 
> 赞同：0
> 
> 时间：2012-05-05T00:30:42.550
> 
> 标签：java, arrays

我有一个 long 类型的数组，我只是想编写一个可以查找和删除重复项的代码。它有点工作，但它有一些错误。我不确定我做错了什么。我真的很感激帮助。

我添加了数字：77、44、22、11、66、33、55、55、99、99、33、0、0

输出为：77、44、22、11、66、33、55、55、99、99

因此它删除了 33 个重复项和两个 0，并完全跳过了 55 和 99。

到目前为止，这是我的代码：

nElems 是数组的大小

```
public int noDups()
{
  int duplicates = 0;

    for(int i = 0; i<nElems; i++)
     {
        for(int j = i+1; j<nElems; j++)
         {
            if( i == j)
             {
                break;
             }
             else if (a[i] == a[j])
             {
                duplicates++;
                delete(j);
                nElems--;
             }
         }// end for j
      }// end for i

  return duplicates;

}// noDups() 
```

我的删除看起来像这样：

```
public boolean delete(long value)
{
  int j;

    for(j=0; j<nElems; j++) // look for it
     {
        if( value == a[j] )
            break;

        if(j==nElems) // can’t find it
          {
            return false;
          }
        else // found it
          {
             for(int k=j; k<nElems; k++) // move higher ones down
              {  
                  a[k] = a[k+1];
                  nElems--; // decrement size
                  return true;
              }
          }
     }// end for i
} // end delete() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:34:51.207

```
public static class Node {
        int value;
        Node next;
        Node prev;

        public Node(int value)
        {
            this.value = value;
        }
    }

    public static class List {
        Node[] list = new Node[32];
        int size = 0;

        public void put(int value) {
            int index = value & 31;
            for (Node n = list[index]; n != null; n = n.next) {
                if (n.value == value) {
                    return;
                }
            }

            Node newNode = new Node(value);
            Node n = list[index];
            if (n != null) {
                n.prev = newNode;
                newNode.next = n;
            }
            list[index] = newNode;
            size++;
        }

        public void addAll(int[] array) {
            for (int x = 0; x < array.length; x++) {
                put(array[x]);
            }
        }

        public int[] toArray() {
            int[] array = new int[size];
            if (size != 0) {
                main:
                for (int b = 0, i = 0; b < list.length; b++) {
                    Node n = list[b];
                    for (; n != null; n = n.next) {
                        // Place this value in to our array.
                        array[i++] = n.value;
                        // We break because our index is larger than our
                        // available array size.
                        if (i >= size) {
                            break main;
                        }   
                    }
                }
            }
            return array;
        }
    }

    public static void main(String[] args) {
        List list = new List();
        int[] array = new int[] {77, 44, 22, 11, 66, 33, 55, 55, 99, 99, 33, 0, 0};
        list.addAll(array);
        System.out.println(Arrays.toString(list.toArray()));
    } 
```

为你写了这段代码。会做你需要做的一切，而且非常快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:09:41.767

您的问题在于您的删除方法。尝试将数组的索引传递给它（因为 j 是数组中的重复项，请尝试 j）。在您的删除中，通过在数组中使用超过它的索引覆盖它来删除该索引。简单地删除它：

```
for(int i = j; i<a.length - 1; i++){
    a[i] = a[i+1];
} 
```

然后将 a.length 设置为 null

```
a[a.length] = null; 
```

仅当数组中有空值是可以的，如果不是，则需要创建一个新数组，将数组 a 中的所有内容存储到 j，然后从 j 开始存储 j+1。然后它需要返回它，或者您需要将 a 设置为新数组。它是 a.length - 1 的原因是因为如果您只执行 a.length，它将循环到数组的末尾并尝试将您的最后一个值设置为索引之外的未知值。这不是最好的解决方案，但它是一个假设您应该使用循环数组而不是实际使用 Java 类的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T01:10:43.103

我认为答案过于复杂了你的作业。最简单的解决方案如下：

```
//noDoup partial code
if (list[i] == list[j])
{
    duplicates++;
    delete(j);
    nElems--;
    j--;//you missed this
}
//delete() is simply this
public boolean delete(long value)
{
    System.arraycopy(list, j+1, list, j, nElems-j-1);
} 
```

结果数组是`Arrays.copyOf(list, nElems);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T06:16:21.900

```
public class Arrayremoveduplicates {
    /**
     * @param args
     */
    public static void main(String[] args) {
        String[] Origarray = { "10", "20", "30" };
        System.out.println("Original array with duplicates :");
        for (int a = 0; a < Origarray.length; a++) {
            System.out.print(Origarray[a] + " ");
        }
        System.out.println();
        System.out.println("Result array without duplicates :");
        for (int i = 0; i < Origarray.length; i++) {
            int duplicate = 0;
            for (int j = i + 1; j < Origarray.length; j++) {
                if (Origarray[i] == Origarray[j]) {
                    duplicate = duplicate + 1;
                }
            }
            if (duplicate == 0) {
                System.out.print(Origarray[i] + " ");
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T00:57:49.183

在 noDups 中，j 是索引中的一个位置。您正在调用 delete(j)，但您的 delete 方法需要一个值而不是一个位置。您需要更改其中一个（并且使用位置而不是值可能是您更好的选择）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-14T10:42:42.647

包 com.sparity；导入 java.util.*；

类 RemoveDuplicates {

```
public static void main(String[] args) {
    Integer[] array = new Integer[10];

    array[0] = 1;
    array[1] = 2;
    array[2] = 3;
    array[3] = 3;
    array[4] = 3;
    array[5] = 3;
    array[6] = 7;
    array[7] = 7;
    array[8] = 9;
    array[9] = 9;
    removeDuplicatesFromArray(array);

}

private static void removeDuplicatesFromArray(Integer[] array){
    StringBuffer stringBuffer = new StringBuffer();
     String arrayString =  Arrays.toString(array);
     for(int index =0 ; index <= arrayString.length(); index++){
      try{
          int number = Integer.parseInt(arrayString.charAt(index)+"");
          if(!stringBuffer.toString().contains(number+"")){
          if(stringBuffer.length()!=0)
              stringBuffer.append(",");
             stringBuffer.append(number);
          }

      }catch(Exception e){

      }
     }
     String[] stringArray = stringBuffer.toString().split(",");
     array = new Integer[stringArray.length];
     for(int index = 0 ; index < stringArray.length ; index++){
       array[index] = Integer.parseInt(stringArray[index]); 
     }
     System.out.println(Arrays.toString(array));
  } 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-19T06:56:47.000

我将使用 Map 删除重复项，如下所示。

```
public class RemoveDuplicates {
 public static void main(String args[]) {
    int[] array = { 1, 34, 23, 54, 2, 1, 34, 2 };
    int j = 0;
    Map<Integer, Integer> map = new HashMap<Integer, Integer>();
    for (int i = 0; i < array.length; i++) {
        //true if the current element is already present
        if (!map.containsKey(array[i])) {
            map.put(array[i], array[i]);
        }
    }
    //just print all the elements without converting into array
    System.out.println(map.keySet().toString());
    int[] uniqueElements= new int[map.keySet().size()];
    //Convert keys into array
    for (Integer s : map.keySet()) {
        uniqueElements[j++] = s;
    }
 }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-11T17:38:21.370

我不得不为课堂作业做这个并且不喜欢这里的答案。它们要么过于复杂，要么过于简单且效率低下。我喜欢有一个快乐的媒介，所以我把它放在一起：

```
public static int[] exercise6(int[] array) {
    int del = 0;
    for( int i = 0; i < array.length - (1 + del); ++i ) {
        for( int j = array.length - (1 + del); j > i; --j ) {
            if( array[i] == array[j]) {
                for( int k = j; k < array.length - (1 + del); ++k ) {
                    array[k] = array[k + 1];
                }
                array[array.length - 1] = 0;
                del++;
            }
        }
    }
    return Arrays.copyOfRange(array, 0, array.length - del); 
```

如果您不需要截断数组本身，您可以随时返回数组。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-10-05T12:51:26.137

```
private Map<Integer, Integer> getUniqueArray(int[] duplicateArray) {
    Map<Integer, Integer> uniqueMap = new HashMap<>();
    int count = 0;
    for (int element : duplicateArray) {
        count = 0;
        if (uniqueMap.get(element) != null) {
            ++count;
        }
        if (count == 0) {
            uniqueMap.put(element, count);
        }
    }
    return uniqueMap;
} 
```

# c# - 代码签名应该放在构建/发布过程中的什么位置？

> ID：10457752
> 
> 赞同：2
> 
> 时间：2012-05-05T00:30:54.060
> 
> 标签：c#, visual-studio-2010, build-process, code-signing, post-build-event

我最近才开始享受能够签署可执行文件的乐趣。现在我正在尝试在我们的构建/发布过程中建立一个适当的位置，应该对程序集进行签名。

我的第一直觉是尽早签署（在构建后的活动中），以确保签署的内容是建造者想要的。

但这（在我们的例子中）要求每个开发人员都拥有对私钥的完全访问权限，这可能是不可取的。

另一个想法是仅在我们发布时签名，这样签名很少且由少数人执行。但这*为时已晚*吗？

是否存在最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:16:40.210

[延迟签署程序集](http://msdn.microsoft.com/en-us/library/t07a3dye.aspx)：

> 组织可以拥有一个严密保护的密钥对，开发人员每天都无法访问。公钥通常可用，但对私钥的访问仅限于少数人。开发具有强名称的程序集时，每个引用强名称目标程序集的程序集都包含用于为目标程序集提供强名称的公钥标记。这要求公钥在开发过程中可用。
> 
> 您可以在构建时使用延迟或部分签名在可移植可执行 (PE) 文件中为强名称签名保留空间，但将实际签名推迟到稍后阶段（通常是在交付程序集之前）。

# r - R：GLMM（lme4）的具有连续变量和分类变量的交互图

> ID：10457756
> 
> 赞同：5
> 
> 时间：2012-05-05T00:31:08.940
> 
> 标签：r, plot, interaction, lme4, mixed-models

我想制作一个交互图，以直观地显示回归模型结果中分类变量（4个级别）和标准化连续变量的交互斜率的差异或相似性。

`with(GLMModel, interaction.plot(continuous.var, categorical.var, response.var))` 不是我要找的。它会生成一个绘图，其中斜率随连续变量的每个值而变化。我正在寻找一个具有恒定斜率的图，如下图所示：

![在此处输入图像描述](../Images/09b33ffd38f715308239e19bdb0113cd.png)

有任何想法吗？

我适合以下形式的模型`fit<-glmer(resp.var ~ cont.var*cat.var + (1|rand.eff) , data = sample.data , poisson)` 这是一些示例数据：

```
structure(list(cat.var = structure(c(4L, 4L, 1L, 4L, 1L, 2L, 
1L, 1L, 1L, 1L, 4L, 1L, 1L, 3L, 2L, 4L, 1L, 1L, 1L, 2L, 1L, 2L, 
2L, 1L, 3L, 1L, 1L, 2L, 4L, 1L, 2L, 1L, 1L, 4L, 1L, 3L, 1L, 3L, 
3L, 4L, 3L, 4L, 1L, 3L, 3L, 1L, 2L, 3L, 4L, 3L, 4L, 2L, 1L, 1L, 
4L, 1L, 1L, 1L, 1L, 1L, 1L, 4L, 1L, 4L, 4L, 3L, 3L, 1L, 3L, 3L, 
3L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 4L, 1L, 3L, 4L, 1L, 1L, 4L, 
1L, 3L, 1L, 1L, 3L, 2L, 4L, 1L, 4L, 1L, 4L, 4L, 4L, 4L, 2L, 4L, 
4L, 1L, 2L, 1L, 4L, 3L, 1L, 1L, 3L, 2L, 4L, 4L, 1L, 4L, 1L, 3L, 
2L, 1L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 4L, 1L, 
2L, 2L, 1L, 1L, 2L, 3L, 1L, 4L, 4L, 4L, 1L, 4L, 4L, 3L, 2L, 4L, 
1L, 3L, 1L, 1L, 4L, 4L, 2L, 4L, 1L, 1L, 3L, 4L, 2L, 1L, 3L, 3L, 
4L, 3L, 2L, 3L, 1L, 4L, 2L, 2L, 1L, 4L, 1L, 2L, 3L, 4L, 1L, 4L, 
2L, 1L, 3L, 3L, 3L, 4L, 1L, 1L, 1L, 3L, 1L, 3L, 4L, 2L, 1L, 4L, 
1L, 1L, 1L, 2L, 1L, 1L, 4L, 1L, 3L, 1L, 2L, 1L, 4L, 1L, 2L, 4L, 
1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 3L, 1L, 3L, 4L, 1L, 4L, 3L, 
3L, 3L, 4L, 1L, 3L, 1L, 1L, 4L, 4L, 4L, 4L, 2L, 1L, 1L, 3L, 2L, 
1L, 4L, 4L, 2L, 4L, 2L, 4L, 1L, 3L, 4L, 1L, 1L, 2L, 3L, 2L, 4L, 
1L, 1L, 3L, 4L, 2L, 2L, 3L, 4L, 1L, 2L, 3L, 1L, 2L, 4L, 1L, 4L, 
2L, 4L, 3L, 4L, 2L, 1L, 1L, 1L, 1L, 1L, 4L, 4L, 1L, 4L, 4L, 1L, 
4L, 2L, 1L, 1L, 1L, 1L, 3L, 1L, 1L, 3L, 3L, 2L, 2L, 1L, 1L, 4L, 
1L, 4L, 3L, 1L, 2L, 1L, 4L, 2L, 4L, 4L, 1L, 2L, 1L, 1L, 1L, 4L, 
1L, 4L, 1L, 2L, 1L, 3L, 1L, 3L, 3L, 1L, 1L, 4L, 3L, 1L, 4L, 1L, 
2L, 4L, 1L, 1L, 3L, 3L, 2L, 4L, 4L, 1L, 1L, 2L, 2L, 1L, 2L, 4L, 
3L, 4L, 4L, 4L, 4L, 1L, 3L, 1L, 2L, 2L, 2L, 4L, 2L, 3L, 4L, 1L, 
3L, 2L, 2L, 1L, 1L, 1L, 3L, 1L, 2L, 2L, 1L, 1L, 3L, 2L, 1L, 1L, 
1L, 1L, 2L, 1L, 1L, 1L, 4L, 4L, 4L, 3L, 3L, 2L, 1L, 3L, 2L, 1L, 
1L, 1L, 4L, 1L, 1L, 2L, 3L, 1L, 1L, 2L, 4L, 3L, 2L, 4L, 3L, 2L, 
1L, 3L, 1L, 3L, 1L, 4L, 3L, 1L, 4L, 4L, 2L, 4L, 1L, 1L, 2L, 4L, 
4L, 2L, 3L, 4L, 4L, 3L, 1L, 4L, 1L, 2L, 4L, 1L, 1L, 4L, 1L, 1L, 
1L, 1L, 1L, 3L, 4L, 1L, 4L, 4L, 2L, 2L, 2L, 2L, 3L, 4L, 4L, 1L, 
1L, 4L, 2L, 3L, 3L, 1L, 1L, 1L, 1L, 3L, 1L, 1L, 1L, 3L, 4L, 2L, 
3L, 1L, 1L, 1L, 4L, 1L, 1L, 4L, 4L, 4L, 1L, 1L, 1L, 1L), .Label = c("A", 
"B", "C", "D"), class = "factor"), cont.var = c(-0.0682900527296927, 
0.546320421837542, -0.273160210918771, -0.887770685486005, 0.136580105459385, 
0.75119058002662, 0.546320421837542, -0.273160210918771, -0.682900527296927, 
0.136580105459385, 0.75119058002662, 0.75119058002662, 0.75119058002662, 
0.341450263648464, 0.75119058002662, 0.546320421837542, 0.546320421837542, 
-0.478030369107849, -0.478030369107849, -0.682900527296927, -0.682900527296927, 
0.546320421837542, -0.478030369107849, -0.0682900527296927, 0.136580105459385, 
0.136580105459385, 0.75119058002662, -0.478030369107849, 0.75119058002662, 
-0.887770685486005, 0.136580105459385, -0.478030369107849, 0.341450263648464, 
-0.682900527296927, -0.478030369107849, 0.341450263648464, -0.478030369107849, 
0.546320421837542, 0.75119058002662, -0.478030369107849, -0.273160210918771, 
0.546320421837542, -0.682900527296927, 0.75119058002662, -0.478030369107849, 
-0.887770685486005, 0.136580105459385, -0.887770685486005, -0.0682900527296927, 
-0.478030369107849, 0.546320421837542, 0.75119058002662, 0.136580105459385, 
-0.273160210918771, -0.273160210918771, 0.75119058002662, -0.682900527296927, 
0.136580105459385, -0.273160210918771, -0.273160210918771, 0.136580105459385, 
0.136580105459385, 0.341450263648464, 0.136580105459385, -0.273160210918771, 
-0.273160210918771, -0.682900527296927, -0.887770685486005, -0.0682900527296927, 
0.136580105459385, -0.0682900527296927, -0.273160210918771, -0.273160210918771, 
0.341450263648464, 0.75119058002662, -0.682900527296927, -0.0682900527296927, 
-0.273160210918771, -0.887770685486005, -0.0682900527296927, 
0.75119058002662, 0.546320421837542, 0.75119058002662, 0.75119058002662, 
-0.887770685486005, 0.341450263648464, 0.75119058002662, -0.887770685486005, 
0.136580105459385, -0.273160210918771, 0.546320421837542, 0.546320421837542, 
-0.682900527296927, 0.75119058002662, 0.136580105459385, -0.0682900527296927, 
-0.478030369107849, 0.75119058002662, -0.478030369107849, 0.341450263648464, 
0.136580105459385, -0.0682900527296927, -0.478030369107849, -0.0682900527296927, 
-0.0682900527296927, 0.546320421837542, -0.273160210918771, 0.75119058002662, 
0.341450263648464, 0.546320421837542, -0.478030369107849, 0.136580105459385, 
-0.887770685486005, -0.273160210918771, -0.273160210918771, -0.478030369107849, 
-0.478030369107849, 0.75119058002662, -0.682900527296927, -0.0682900527296927, 
0.546320421837542, 0.75119058002662, 0.546320421837542, 0.136580105459385, 
-0.478030369107849, 0.136580105459385, 0.546320421837542, -0.478030369107849, 
-0.0682900527296927, -0.0682900527296927, 0.546320421837542, 
-0.273160210918771, 0.136580105459385, -0.0682900527296927, 0.75119058002662, 
-0.0682900527296927, 0.546320421837542, -0.887770685486005, -0.0682900527296927, 
-0.682900527296927, -0.478030369107849, -0.478030369107849, -0.682900527296927, 
0.75119058002662, 0.341450263648464, -0.0682900527296927, 0.341450263648464, 
-0.0682900527296927, -0.887770685486005, -0.887770685486005, 
-0.273160210918771, -0.0682900527296927, 0.546320421837542, -0.0682900527296927, 
-0.0682900527296927, 0.75119058002662, -0.0682900527296927, -0.273160210918771, 
-0.478030369107849, 0.546320421837542, 0.546320421837542, 0.546320421837542, 
0.341450263648464, 0.136580105459385, -0.478030369107849, 0.136580105459385, 
0.136580105459385, 0.136580105459385, -0.478030369107849, -0.273160210918771, 
-0.273160210918771, -0.273160210918771, 0.341450263648464, -0.273160210918771, 
-0.0682900527296927, 0.136580105459385, 0.546320421837542, -0.478030369107849, 
-0.273160210918771, 0.546320421837542, 0.546320421837542, -0.273160210918771, 
-0.0682900527296927, 0.341450263648464, 0.546320421837542, -0.0682900527296927, 
0.136580105459385, -0.478030369107849, 0.75119058002662, -0.478030369107849, 
-0.682900527296927, -0.478030369107849, 0.136580105459385, -0.273160210918771, 
-0.0682900527296927, -0.887770685486005, -0.887770685486005, 
0.546320421837542, -0.273160210918771, 0.546320421837542, -0.478030369107849, 
0.546320421837542, -0.0682900527296927, 0.75119058002662, -0.273160210918771, 
0.546320421837542, 0.341450263648464, -0.0682900527296927, -0.0682900527296927, 
-0.0682900527296927, -0.887770685486005, 0.136580105459385, -0.273160210918771, 
-0.478030369107849, 0.75119058002662, 0.341450263648464, 0.546320421837542, 
-0.273160210918771, 0.546320421837542, 0.75119058002662, -0.273160210918771, 
0.75119058002662, 0.546320421837542, -0.273160210918771, -0.273160210918771, 
0.75119058002662, -0.273160210918771, -0.0682900527296927, 0.136580105459385, 
-0.478030369107849, 0.75119058002662, 0.75119058002662, -0.887770685486005, 
-0.887770685486005, 0.546320421837542, -0.682900527296927, -0.887770685486005, 
0.136580105459385, 0.75119058002662, 0.75119058002662, -0.478030369107849, 
0.136580105459385, 0.75119058002662, -0.273160210918771, -0.682900527296927, 
-0.273160210918771, 0.136580105459385, 0.546320421837542, -0.682900527296927, 
-0.478030369107849, 0.136580105459385, -0.682900527296927, -0.0682900527296927, 
-0.478030369107849, 0.136580105459385, -0.887770685486005, -0.273160210918771, 
-0.0682900527296927, -0.273160210918771, -0.887770685486005, 
0.546320421837542, 0.546320421837542, -0.478030369107849, -0.273160210918771, 
-0.0682900527296927, 0.136580105459385, -0.478030369107849, 0.75119058002662, 
0.341450263648464, 0.136580105459385, 0.136580105459385, 0.75119058002662, 
0.136580105459385, -0.0682900527296927, 0.546320421837542, -0.0682900527296927, 
-0.887770685486005, 0.75119058002662, 0.75119058002662, 0.546320421837542, 
-0.887770685486005, -0.0682900527296927, -0.682900527296927, 
-0.682900527296927, 0.75119058002662, 0.75119058002662, -0.478030369107849, 
0.546320421837542, -0.273160210918771, 0.75119058002662, -0.0682900527296927, 
0.546320421837542, -0.0682900527296927, -0.273160210918771, 0.546320421837542, 
0.75119058002662, -0.0682900527296927, 0.546320421837542, -0.682900527296927, 
-0.273160210918771, -0.0682900527296927, -0.478030369107849, 
-0.478030369107849, 0.136580105459385, -0.273160210918771, 0.136580105459385, 
0.546320421837542, 0.75119058002662, -0.273160210918771, 0.341450263648464, 
-0.273160210918771, 0.136580105459385, 0.546320421837542, 0.546320421837542, 
0.136580105459385, 0.136580105459385, -0.682900527296927, 0.341450263648464, 
0.341450263648464, -0.273160210918771, -0.682900527296927, -0.0682900527296927, 
0.75119058002662, -0.887770685486005, -0.478030369107849, -0.273160210918771, 
-0.478030369107849, -0.478030369107849, 0.136580105459385, -0.478030369107849, 
0.136580105459385, -0.478030369107849, 0.136580105459385, -0.0682900527296927, 
-0.273160210918771, 0.136580105459385, 0.341450263648464, -0.478030369107849, 
0.75119058002662, 0.136580105459385, 0.341450263648464, 0.546320421837542, 
-0.887770685486005, 0.75119058002662, 0.341450263648464, -0.0682900527296927, 
-0.478030369107849, 0.546320421837542, 0.136580105459385, -0.682900527296927, 
-0.0682900527296927, 0.341450263648464, -0.478030369107849, -0.0682900527296927, 
-0.478030369107849, -0.0682900527296927, 0.341450263648464, -0.478030369107849, 
-0.682900527296927, 0.75119058002662, -0.478030369107849, -0.682900527296927, 
0.341450263648464, -0.887770685486005, -0.478030369107849, 0.546320421837542, 
-0.887770685486005, -0.478030369107849, -0.478030369107849, 0.341450263648464, 
0.75119058002662, -0.682900527296927, 0.75119058002662, 0.75119058002662, 
0.341450263648464, -0.0682900527296927, 0.546320421837542, -0.0682900527296927, 
0.136580105459385, 0.136580105459385, 0.136580105459385, 0.136580105459385, 
0.546320421837542, 0.546320421837542, -0.0682900527296927, 0.75119058002662, 
-0.0682900527296927, -0.0682900527296927, -0.682900527296927, 
-0.273160210918771, -0.682900527296927, -0.478030369107849, 0.136580105459385, 
0.75119058002662, 0.546320421837542, 0.341450263648464, -0.887770685486005, 
-0.0682900527296927, 0.136580105459385, 0.75119058002662, -0.273160210918771, 
-0.682900527296927, 0.136580105459385, -0.478030369107849, -0.273160210918771, 
-0.273160210918771, 0.136580105459385, 0.341450263648464, -0.478030369107849, 
-0.0682900527296927, -0.682900527296927, 0.75119058002662, -0.273160210918771, 
-0.478030369107849, -0.0682900527296927, -0.0682900527296927, 
-0.273160210918771, -0.0682900527296927, -0.478030369107849, 
0.75119058002662, -0.0682900527296927, 0.136580105459385, 0.546320421837542, 
0.546320421837542, -0.478030369107849, -0.273160210918771, 0.546320421837542, 
-0.478030369107849, -0.682900527296927, 0.75119058002662, -0.0682900527296927, 
-0.682900527296927, -0.682900527296927, 0.75119058002662, 0.341450263648464, 
-0.478030369107849, 0.75119058002662, 0.136580105459385, -0.887770685486005, 
0.341450263648464, 0.341450263648464, 0.546320421837542, -0.273160210918771, 
0.136580105459385, 0.75119058002662, -0.0682900527296927, -0.682900527296927, 
-0.478030369107849, -0.478030369107849, 0.75119058002662, 0.546320421837542, 
-0.478030369107849, 0.546320421837542, 0.136580105459385, -0.887770685486005, 
0.75119058002662, -0.0682900527296927, 0.75119058002662, 0.75119058002662, 
-0.273160210918771, -0.682900527296927, 0.546320421837542, 0.546320421837542, 
-0.887770685486005, 0.75119058002662, -0.273160210918771, 0.546320421837542, 
-0.0682900527296927, 0.136580105459385, 0.341450263648464, -0.478030369107849, 
0.136580105459385, 0.136580105459385, -0.273160210918771, 0.546320421837542, 
-0.273160210918771, -0.273160210918771, -0.273160210918771, 0.75119058002662, 
-0.887770685486005, -0.887770685486005, -0.0682900527296927, 
-0.478030369107849, -0.0682900527296927, 0.75119058002662, -0.273160210918771, 
0.136580105459385, -0.478030369107849, -0.273160210918771, 0.136580105459385, 
0.75119058002662, 0.546320421837542, -0.478030369107849, -0.273160210918771, 
-0.273160210918771, 0.136580105459385, -0.273160210918771, -0.0682900527296927, 
0.75119058002662, 0.136580105459385), resp.var = c(2L, 1L, 0L, 
1L, 0L, 0L, 0L, 0L, 0L, 1L, 3L, 1L, 0L, 1L, 0L, 1L, 2L, 0L, 1L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 2L, 
1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 2L, 
0L, 3L, 2L, 0L, 2L, 2L, 0L, 0L, 0L, 1L, 1L, 3L, 1L, 2L, 0L, 1L, 
0L, 0L, 1L, 0L, 2L, 0L, 2L, 4L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 2L, 
3L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 1L, 2L, 
0L, 0L, 0L, 0L, 1L, 1L, 0L, 1L, 0L, 2L, 0L, 1L, 0L, 4L, 1L, 0L, 
1L, 1L, 0L, 0L, 0L, 1L, 3L, 0L, 2L, 0L, 0L, 2L, 1L, 0L, 0L, 2L, 
0L, 0L, 0L, 2L, 0L, 0L, 3L, 0L, 0L, 2L, 1L, 1L, 0L, 0L, 3L, 1L, 
1L, 2L, 0L, 2L, 0L, 2L, 2L, 0L, 1L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 1L, 0L, 2L, 2L, 1L, 0L, 0L, 1L, 
0L, 0L, 0L, 0L, 6L, 1L, 0L, 1L, 0L, 0L, 0L, 0L, 2L, 0L, 0L, 0L, 
1L, 0L, 0L, 1L, 3L, 1L, 0L, 2L, 3L, 0L, 0L, 1L, 0L, 0L, 1L, 1L, 
0L, 0L, 0L, 0L, 1L, 2L, 1L, 1L, 0L, 0L, 2L, 0L, 2L, 0L, 0L, 1L, 
1L, 0L, 0L, 2L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 
0L, 1L, 0L, 2L, 1L, 0L, 1L, 0L, 1L, 1L, 0L, 1L, 0L, 0L, 0L, 0L, 
0L, 3L, 0L, 0L, 3L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 2L, 1L, 1L, 0L, 2L, 2L, 0L, 2L, 1L, 0L, 2L, 0L, 0L, 0L, 0L, 
3L, 0L, 2L, 0L, 0L, 0L, 0L, 2L, 0L, 0L, 2L, 0L, 1L, 1L, 0L, 1L, 
0L, 3L, 1L, 3L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 2L, 0L, 
2L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 2L, 0L, 2L, 0L, 3L, 0L, 0L, 0L, 
0L, 1L, 0L, 0L, 3L, 1L, 1L, 2L, 0L, 0L, 3L, 0L, 0L, 0L, 1L, 1L, 
0L, 1L, 3L, 0L, 2L, 0L, 0L, 1L, 3L, 1L, 0L, 0L, 4L, 3L, 0L, 2L, 
0L, 0L, 0L, 3L, 0L, 0L, 2L, 3L, 0L, 1L, 0L, 1L, 0L, 1L, 0L, 0L, 
0L, 0L, 0L, 3L, 3L, 2L, 0L, 0L, 2L, 0L, 0L, 0L, 0L, 2L, 0L, 0L, 
0L, 0L, 0L, 1L, 0L, 2L, 0L, 0L, 1L, 0L, 0L, 1L, 2L, 0L, 1L, 0L, 
2L, 1L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 3L, 1L, 0L, 0L, 0L, 0L, 0L, 
1L, 2L, 0L, 2L, 0L, 1L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 1L, 
0L, 0L, 3L, 2L, 2L, 0L, 1L, 0L, 5L, 0L, 4L, 2L, 0L, 3L, 0L, 0L, 
1L, 1L, 0L, 0L, 0L, 2L, 0L, 1L, 0L, 3L, 0L, 2L, 0L, 0L, 0L, 2L, 
0L), rand.eff = c(37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 37L, 
37L, 37L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 40L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 
43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L, 43L)), .Names = c("cat.var", 
"cont.var", "resp.var", "rand.eff"), row.names = c(NA, 500L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-05T14:03:05.237

这是各种各样的答案（顺便说一句，您在上面的数据框中缺少一些引号，必须手动修复......）

拟合模型：

```
library(lme4)
fit <- glmer(resp.var ~ cont.var:cat.var + (1|rand.eff) ,
           data = sample.data , poisson) 
```

（请注意，这是一个有点奇怪的模型规范——强制所有类别在 处具有相同的值`cont.var==0`。你是说`cont.var*cat.var`吗？

```
library(ggplot2)
theme_update(theme_bw())  ## set white rather than gray background 
```

快速而肮脏的线性回归：

```
ggplot(sample.data,aes(cont.var,resp.var,linetype=cat.var))+
    geom_smooth(method="lm",se=FALSE) 
```

现在使用泊松 GLM（但不包含随机效应），并显示数据点：

```
ggplot(sample.data,aes(cont.var,resp.var,colour=cat.var))+
    stat_sum(aes(size=..n..),alpha=0.5)+
    geom_smooth(method="glm",family="poisson") 
```

下一位需要开发（r-forge）版本`lme4`，它有一个`predict`方法：

设置数据框进行预测：

```
predframe <- with(sample.data,
                  expand.grid(cat.var=levels(cat.var),
                              cont.var=seq(min(cont.var),
                              max(cont.var),length=51))) 
```

在人口水平`REform=NA`（

```
predframe$pred.logit <- predict(fit,newdata=predframe,REform=NA)

minmaxvals <- range(sample.data$cont.var)

ggplot(predframe,aes(cont.var,pred.logit,linetype=cat.var))+geom_line()+
    geom_point(data=subset(predframe,cont.var %in% minmaxvals),
               aes(shape=cat.var)) 
```

![在此处输入图像描述](../Images/543c2ae3032d0e5217edd6066f214937.png) 现在在响应量表上：

```
predframe$pred <- predict(fit,newdata=predframe,REform=NA,type="response")
ggplot(predframe,aes(cont.var,pred,linetype=cat.var))+geom_line()+
    geom_point(data=subset(predframe,cont.var %in% minmaxvals),
               aes(shape=cat.var)) 
```

![在此处输入图像描述](../Images/1e690115dafa97b51f208eb0d3a905ec.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-16T13:51:39.103

该`jtools`软件包（[CRAN 链接](https://cran.r-project.org/package=jtools)）可以使这种模型的绘图非常简单。我是那个包的开发者。

我们将像 Ben 在他的回答中所做的那样拟合模型：

```
library(lme4)
fit <- glmer(resp.var ~ cont.var:cat.var + (1 | rand.eff),
             data = sample.data, family = poisson) 
```

`jtools`我们只需使用这样的函数`interact_plot`：

```
library(jtools)
interact_plot(fit, pred = cont.var, modx = cat.var) 
```

结果：

![](../Images/505d72824438e0db8c769a67c6d9127e.png)

默认情况下，它绘制在响应比例上，但您可以使用`outcome.scale = "link"`参数（默认为`"response"`）将其绘制在线性比例上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T21:58:16.353

[效果](http://cran.at.r-project.org/web/packages/effects/index.html)包支持`lme4`模型，应该能够做你想做的事。

> 效果：线性、广义线性和其他模型的效果显示
> 
> 具有线性预测变量的各种统计模型的图形和表格效果显示，例如交互作用。

它还附带了两篇稍微过时的[论文](http://socserv.socsci.mcmaster.ca/jfox/Misc/effects/index.html)（您可以将它们视为小插图）。

# apache-flex - 如何修改 Adob e Flex 数据网格中的列，填充数据库中的数据

> ID：10457761
> 
> 赞同：0
> 
> 时间：2012-05-05T00:32:11.833
> 
> 标签：apache-flex, datagrid

在另一个应用程序中，我检索并存储了用户的数据，包括他们的出生日期。在这个应用程序中，我正在调用数据库并使用该信息填充我的数据网格。我想显示用户的年龄而不是他们的出生日期。我想知道是否可以修改该列以便显示它。

如果不可能，我将不得不计算这个并将用户的年龄存储在数据库中，但我觉得这不是最好的解决方案，因为他们的年龄会改变，而出生日期不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:35:54.900

是的，您可以将项目渲染器添加到相关列，然后您可以按照您认为合适的方式操作数据。您可以获取 DOB 值并进行简单的数学运算来确定用户的年龄。

向下滚动大约 1/4 的 DataGrid 部分：

[http://www.adobe.com/devnet/flex/articles/itemrenderers_pt1.html](http://www.adobe.com/devnet/flex/articles/itemrenderers_pt1.html)

您也可以使用标签函数来执行此操作——类似于几个小时前在这个问题中提出的问题：

[Flex：数字的DataGrid列格式](https://stackoverflow.com/questions/10454932/flex-datagrid-column-formatting-of-numbers/10456262#10456262)

# ibm-midrange - 如何学习RPG/400

> ID：10457764
> 
> 赞同：5
> 
> 时间：2012-05-05T00:32:47.300
> 
> 标签：ibm-midrange, rpg

我从我的讲师那里听说了 RPG 编程。我想试一试。问题在于，我如何进行编程？我不知道适合需求的操作系统和 IDE。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T13:59:19.380

感谢您对 RPG 的兴趣。RPG 在 IBM i（又名 AS/400、iSeries、Systemi）系统上运行。这不是您可以轻松自行购买的服务器。起价约为 15,000 美元，最高可达数百万美元。但是，您可以付费访问系统，也可以使用免费主机试用系统。查看[http://www.holgerscherer.de/](http://www.holgerscherer.de/)获取免费帐户。（感谢@kratenko）

看看[midrange.com](http://midrange.com)，它是一堆与平台相关的邮件列表。还可以查看他们的[wiki](http://wiki.midrange.com)，这是一个不错的起点，至少可以了解系统是关于什么的。（注意：我是 Midrange.Com 的 .NET 邮件列表的版主）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T17:16:39.247

查看[http://pub400.com/](http://pub400.com/)（以前位于[http://www.holgerscherer.de/](http://www.holgerscherer.de/) - 2017 年更改） - 您实际上可以*在*AS/400（又名系统 i ) 并在那里开始一些 RPG 编程。但是你会被 V5R4 版本困住（他们有更新的版本，但不是免费的......）和一些让你以 V6R1 中引入的方式开始有趣地编程 RPG 的功能。另一方面：如果你不得不和那些从事 RPG 编程很长一段时间的人一起工作，你可能永远不会看到任何使用过的功能，所以 V6R1 会给你一个错误的印象......

不要误会我的意思，在 RPG 中编写有用的（甚至可能是结构化的）程序是可能的，甚至是 V6R1 之前的版本。但是有些 RPG 程序员拒绝使用像程序这样无用的现代功能，他们更喜欢使用数百个具有大量副作用的全局变量，其中每个变量都有两个或三个不同的名称。不要走那条路。只是给你两个提示，因为阅读其他人的代码可能会将你引向错误的方向：

1.  程序的概念早在几年前就被整合到了 RPG 中。现在我看不出使用子程序的任何理由，但你会看到它们。你仍然不需要在你的代码中使用它们。
2.  数据结构可以声明为`qualified`. 总是这样做！切勿使用不合格的日期结构。您甚至可以将它们作为参数传递给过程。

如果您遇到过真正令人讨厌的问题，只需 google，直到您找到 Scott Klement 的答案。通常，他总是会为您的问题提供解决方案...

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-07T16:32:24.353

向您的老师询问您学校对 IBM i 的访问权限。如果没有，您的选择是有限的。有多种分时服务可供选择；搜索“iseries 分时度假”。您需要一个 TN5250 仿真器才能访问该机器。据我所知，没有可以在 PC 上运行的 RPG 编译器/运行时环境。

就 IDE 而言，该机器有一个名为 PDM 的本机应用程序（绿屏），它使用一个名为 SEU 的编辑器。我使用基于 Eclipse 的图形 IDE，称为 WDSC。这已被一种名为 Rational Developer for Power Systems 的新的收费产品所取代。

我支持 Mike Wills 的回答，以查看 midrange.com 上的论坛。

最后一件事。RPG/400 已过时。RPG/400 没有任何变化是很长很长的时间——比如十年。当前版本的 RPG 是 ILE RPG，通常称为 RPG IV。该系统的参考手册位于[http://publib.boulder.ibm.com/eserver/ibmi.html](http://publib.boulder.ibm.com/eserver/ibmi.html) 如果您不知道什么版本，请选择 V5R4。单击左侧面板的顶部链接，然后单击编程，然后单击语言。

# excel - 以编程方式查找匹配单元格的 Excel 宏

> ID：10457765
> 
> 赞同：0
> 
> 时间：2012-05-05T00:32:48.190
> 
> 标签：excel, match, cell, vba

在单元格 R12 中，我有一个整数，每次我需要运行此宏时都会更改。我需要宏来分析该单元格中的数字，并在电子表格中找到与单元格 R12 的内容匹配的另一个单元格（保证在 M31:M40 范围内，因为这是匹配的位置） ，然后使匹配的单元格成为活动单元格。
显然，我可以告诉 excel R12 中的内容是什么，然后进行搜索，但我需要它自己确定 R12 中的内容......然后找到匹配的单元格，然后去那里。

没有人键入 R12 的值。它是计算出来的。R12 是通过合计该列中其他十个单元格的内容创建的数字。我正在尝试为我的宏留下“面包屑”以找到返回电子表格上某个位置的方式，宏可以在该位置继续并将数据粘贴到那里......我希望 Excel 可以确定 R12 中的数字，并找到表格上其他地方的确切数字..本身。相同的数字将存在于另一个数组中......（M31：M40）如果它可以以某种方式将活动单元格移动到匹配的数字，我可以让我的活动单元格回到我开始宏的位置。宏的完整内容未发布。希望澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:10:46.177

我从“通过信息搜寻和啄食来构建宏以提高在视频后期制作设施中完成的所有工作的效率”中猜测您对 VBA 的了解是有限的，并且您不知道哪些功能可能是相关的。这个答案是对我认为你需要的事件例程的介绍。

发生事件：打开或关闭工作簿、添加工作表、更改单元格值等。对于其中许多事件，您可以创建一个例程以在该事件发生时调用。

为了演示这些例程，我创建了一个工作簿和一个工作表“Work”。我已将 12 个单元格设置为数值并将 R12 设置为它们的总和。我已将范围 J2:O25 设置为数字 1 到 144。这是一个比您想要的更大的范围，但这对原理没有影响。

在下面的代码中，我使用了两个事件例程：`Workbook_Open`和`Workbook_SheetChange`.

在`Workbook_Open`中，我保存了 R12 的原始值。在`Workbook_SheetChange`，如果 R12 的值发生了变化，并且如果 J2:O25 包含新值，我将光标移动到它。

如果我理解您的问题，这就是您寻求的功能。如果没有，我希望这个答案能帮助你提出一个更好、更详细的问题。

您必须将此语句放在模块中：

```
 Public R12Last As Variant 
```

您必须将以下代码放置在`ThisWorkbook`工作`Microsoft Excel Objects`表下方。

```
Option Explicit
Sub Workbook_Open()

  ' This routine is called when the workbook is opened.

  With Worksheets("Work")
    ' Save the value of cell R12 when the workbook opens.
    R12Last = .Range("R12").Value
  End With

End Sub

Private Sub Workbook_SheetChange(ByVal WSht As Object, ByVal ChgRng As Range)

  ' This routine is called when cells in any worksheet are changed by the
  ' user or by an external link.

  ' WSht is the worksheet within which cells have changed.
  ' ChgRng can be a single cell or a range.

  ' For this application, we are not interested in the cell that has changed.
  ' We want to know if the change affected R12.

  Dim SearchRng As Range
  Dim FoundRng As Range

  With Worksheets("Work")
    If R12Last <> .Range("R12").Value Then
      ' Cell R12 has changed
      R12Last = .Range("R12").Value     ' Record the new value for next time

      ' I have a larger range containing the values that might be in R12
      ' but the principle is the same.  You will need to change this to M31:M40.
      Set SearchRng = .Range("J2:O25")

      ' Look for the new value of R12 in SearchRng.
      ' "What" is the value to be found.  "After" must be within the search
      ' range. "After" is the last cell to be searched.  I have set
      ' SearchDirection to xlNext and SearchOrder to xlByRows so the Find will
      ' check cells starting with J2.
      ' Look Find up in VBA Help for a fuller description.
      Set FoundRng = SearchRng.Find(What:=R12Last, After:=Range("O25"), _
                                    LookIn:=xlValues, LookAt:=xlWhole, _
                                    SearchOrder:=xlByRows, _
                                    SearchDirection:=xlNext)
      If FoundRng Is Nothing Then
        ' The value of R12 has not been found in the search range.
        ' Add code to handle this situation
        Call MsgBox("Target value not found", vbOKOnly)
      Else
        ' Make the cell with the matching value the active cell.
        FoundRng.Select
      End If
    End If
  End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:03:58.587

实际上，似乎没有人理解我的问题，我会承担一半的责任......在另一个网站上搜索产生了我的解决方案：

```
Range(ActiveCell.Address).Name = "StartCell"

LOOPING CODE HERE

Application.Goto "StartCell" 
```

# c# - 将谷歌的页面加载到字符串中

> ID：10457767
> 
> 赞同：0
> 
> 时间：2012-05-05T00:32:57.817
> 
> 标签：c#, web-crawler

我需要分析谷歌上的一个特定页面，并且我直接喜欢该页面。当我将该链接粘贴到 IE 时，它工作正常。

现在我试图自动化这个过程

```
WebClient w = new WebClient();
                string s = w.DownloadString("https://www.google.com/#q=" + MYSEARCHSTRING + "&start=0"); 
```

但它没有将页面正确加载到“s”中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:05:57.887

加载带有代码的 url 时，您不能在其中使用“#”字符，因为这是一个[片段标识符](http://en.wikipedia.org/wiki/Fragment_identifier)，谷歌现在使用 javascript 运行搜索，因此浏览器不再请求每个页面。

为此，您需要使用较旧的搜索语法：`https://www.google.com/search?q=`

更好的解决方案可能是使用 API 进行搜索：[自定义搜索](https://developers.google.com/custom-search/v1/overview)，使用它会更好地解析结果并在 Google 上更好。

要注意的一件事是确保您使用结果的方式符合服务条款，使用 API 也应该有助于避免滥用它，我从来没有看过搜索词，所以我不确定可能有什么限制。

# javascript - 如何检测文件输入元素是否支持“多个”属性？

> ID：10457770
> 
> 赞同：9
> 
> 时间：2012-05-05T00:33:44.040
> 
> 标签：javascript, html, file-upload, modernizr

Internet Explorer 不`multiple`支持`<input type="file" />`. 但是，不仅 IE 不支持该属性……某些移动浏览器也不支持该`multiple`属性。所以简单地检测浏览器是IE并不是理想的解决方案。

那么如何检测JavaScript`multiple`是否支持该属性`<input type="file" />`？

## 更新

似乎 Modernizr 支持新的 HTML5 输入元素属性：

[http://modernizr.com/docs/#input](http://modernizr.com/docs/#input)

然而，公认的解决方案似乎有效，因为我已经在使用 Modernizr，所以我的解决方案如下：

```
/**
 * Determines if the given attribute is supported for <input /> elements.
 * 
 * @param attribute - the attribute to test for (ex. "multiple")
 */
function isInputAttributeSupported(attribute) {
    return (Modernizr.input[attribute]) ? true : false;
}; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T00:46:05.033

您可以尝试检查是否存在相应的属性：

```
var supportsMultipleFiles = 'multiple' in document.createElement('input'); 
```

示例：http: [//jsfiddle.net/sbZvS/](http://jsfiddle.net/sbZvS/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-05T00:47:52.077

```
var inp = document.createElement("input");
inp.setAttribute("multiple", "true");
var supportsMultiple = inp.multiple===true; 
```

# tdd - TDD 中的反射

> ID：10457771
> 
> 赞同：0
> 
> 时间：2012-05-05T00:34:09.223
> 
> 标签：tdd

我在很多地方读到过，在 TDD 期间使用反射设置内部字段是不好的，因为这可能意味着我们还没有对被测类的接口进行排序。但是，我想提出一个我认为完全合理的场景，除了反射之外，我想不出任何干净的解决方案来解决手头的问题。

这是一个带有相应测试的示例类：

```
public Class Movie
{
   public string MovieName{get; private set}

   public void AddExternalReview(IMovieReview review)
  {
      //Logic that needs Unit testing.
      if ( review.MovieName.Equals(MovieName) )
      {
         //Do stuff..
      }
  } 
} 
```

单元测试：

```
[Test]
public Class MovieTests
{
   public void CanAddExternalReview()
   {
      MovieReviewStub movieReviewStub = new MovieReviewStub(); 
      movieReviewStub.MovieName = "The Godfather";

      Movie m = new Movie();
      //Need to Set object m state(i.e set Property MovieName to "The Godfather")
      //Only way to do that seems to be relection.

      m.AddExternalReview(movieReviewStub);
      //Assert on some condition.
   }
} 
```

具有无法由类的“普通”客户端设置的属性是很常见的。但是，UnitTest 类可能需要访问此类属性/字段，以便它可以设置测试所需的相关状态。据我所知，反思是唯一的出路。这一定是一个相当普遍的要求，但网络上的大多数文章/讨论似乎都不赞成在 TDD 中使用反射。任何想法/见解都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:51:05.963

听起来正在测试的逻辑具有未实现的依赖关系。测试有一个未满足的先决条件，而该先决条件是设置值的原因。

代码中没有干净的方法可以在不使用反射的情况下手动设置值。那么为什么要测试代码中逻辑上不会发生的事情呢？（除非代码也使用反射来设置值。在这种情况下，类*肯定*存在抽象问题。）

如果该类出于某种原因保护该 setter，请在该保护范围内工作。否则，正如您所说，界面没有正确排序。任何逻辑过程设置该值都是测试的先决条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:21:05.593

The sentence that puzzles me in your problem description is "It is quite common to have properties that cannot be set by a Class's "normal" Clients." This sounds like you have two (or more) types of clients for your class. If that's the case your different types of clients should see different interfaces. The implementation class however is the same and should not hide the property's setter; writing the test is simple then.

I guess it all boils down to a question of design priorities. When doing TDD I usually favor testability over data hiding and encapsulation. To prioritize the other way round will sometimes make testing hard and non-intuitive - as in your example.

# debugging - 如何在windbg中转储复杂的模板类型？

> ID：10457772
> 
> 赞同：1
> 
> 时间：2012-05-05T00:34:09.503
> 
> 标签：debugging, windbg

如何在 windbg 中转储复杂的模板类型？

我试过了

```
dt -n "mod!TypeA<TypeB,TypeC,TypeD<int,bool> >" 0x12345678 
```

和其他几个命令，但到目前为止还没有运气。

递归 dt 在这里也不起作用

```
dt -r <depth> 
```

因为我必须计算一个地址才能得到我要找的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:50:35.357

做就是了：

```
dt -n myDLL! varName 
```

或任何等价的东西，你不需要`"`引号。

# java - Java - 从书中打印所有页面

> ID：10457776
> 
> 赞同：2
> 
> 时间：2012-05-05T00:34:37.973
> 
> 标签：java, printing

我正在尝试打印 Java Book，但是当我这样做时，只打印了本书的第一页。我检查了书中的页数，确实是正确的页数。当我尝试打印所有页面时出现问题。以下是我程序中的相关代码片段。

我以前从未真正用 Java 进行过打印，所以我可能会遗漏一些明显的东西......

谢谢你的帮助！

```
 Book nb = new Book();

        for(int i = 0; i < 5; i++)
        {
            String someString;
            ...
            JTextArea ta = new JTextArea();
            ta.setText(somestring);
            nb.append(ta.getPrintable(null, null), new PageFormat());
        }

        PrinterJob job = PrinterJob.getPrinterJob();
        job.setPageable(nb);
        PrintRequestAttributeSet pras = new HashPrintRequestAttributeSet();

        boolean ok = job.printDialog(pras);

        if (ok) {
            try {
                job.print();
            } 
            catch (PrinterException ex) {}
        } 

        else {} 
```

# javascript - 向用户“推送”通知

> ID：10457784
> 
> 赞同：0
> 
> 时间：2012-05-05T00:35:40.780
> 
> 标签：javascript, mysql, ajax, push-notification

我需要知道通知用户新通知的最佳方式。我正在寻找：当服务器上发生事件时，会通知特定的客户端并且客户端 JS 调用一个函数。几乎像推送服务，但在我自己的服务器上。有没有办法使用 AJAX 或 WebSockets 或其他服务来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:43:13.850

既然[您说您正在使用 Node](https://stackoverflow.com/questions/10457784/push-notifications-to-user/10457821#comment13505226_10457784) : [Socket.IO](http://socket.io/)或[nowjs](http://nowjs.com/)。

# iphone - XCode 4.2 CoreData 向 NSSet 一对多实体关系添加数据

> ID：10457785
> 
> 赞同：0
> 
> 时间：2012-05-05T00:35:43.323
> 
> 标签：iphone, core-data, object-relationships

我在使用 CoreData 时遇到了很多困难。学习曲线非常陡峭。我是一个非常新手的 XCode 用户，对数据库也不太了解。我花了很长时间试图弄清楚我的程序采用什么方法，并且一直在跌跌撞撞。

我尝试学习 sqlite，因为这就是我认为 coreData 使用的。因此，我在 LibreOffice 中创建了一个包含许多关系的庞大数据库，因为它是一个免费的数据库程序。然后，我意识到它是在 HSQL 中，它与 SQLite 不同。因此，我不得不将所有内容都导出到 .csv 中并失去了我的关系，然后支付了一个名为 SQLiteManager 的蹩脚程序来创建 SQLite 数据库表。

完成所有设置后，我再次开始查看 CoreData，我意识到 CoreData 不允许您使用外部 sqlite 数据库！啊。在这一点上，我很沮丧。所以，现在，我再次从头开始使用 coreData，并以托管对象形式构建了包含实体、属性、关系等的空模型。我已经检查过它是否能够在构建时创建空的“专有”coreData SQLite 数据库，并且可以正常工作。

但是现在，我正在尝试填写 managedObjects，但在关系方面遇到了问题

这就是我的一个头文件的样子。

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class ORGAN, SPECIMEN, SYSTEM, TISSUE;

@interface CELL : NSManagedObject

@property (nonatomic, retain) NSString * cellDescription;
@property (nonatomic, retain) NSString * cellName;
@property (nonatomic, retain) NSString * cellSID;
@property (nonatomic, retain) NSSet *organs;
@property (nonatomic, retain) NSSet *specimens;
@property (nonatomic, retain) NSSet *systems;
@property (nonatomic, retain) NSSet *tissues;
@end

@interface CELL (CoreDataGeneratedAccessors)

- (void)addOrgansObject:(ORGAN *)value;
- (void)removeOrgansObject:(ORGAN *)value;
- (void)addOrgans:(NSSet *)values;
- (void)removeOrgans:(NSSet *)values;

- (void)addSpecimensObject:(SPECIMEN *)value;
- (void)removeSpecimensObject:(SPECIMEN *)value;
- (void)addSpecimens:(NSSet *)values;
- (void)removeSpecimens:(NSSet *)values;

- (void)addSystemsObject:(SYSTEM *)value;
- (void)removeSystemsObject:(SYSTEM *)value;
- (void)addSystems:(NSSet *)values;
- (void)removeSystems:(NSSet *)values;

- (void)addTissuesObject:(TISSUE *)value;
- (void)removeTissuesObject:(TISSUE *)value;
- (void)addTissues:(NSSet *)values;
- (void)removeTissues:(NSSet *)values;

@end 
```

并且，在我的 applicationDelegate 文件中，我正在尝试使用资源部分中的自定义“@”分隔文件填充我的 coreData 数据库（尽管我认为我可以运行 SQLite 连接到我的旧数据库并执行相同操作，但这是另一个问题)

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
//cells
NSString *paths = [[NSBundle mainBundle] resourcePath];
NSString *bundlePath = [paths stringByAppendingPathComponent:@"cells"];
NSString *dataFile = [[NSString alloc] initWithContentsOfFile:bundlePath];
NSArray *dataRows = [dataFile componentsSeparatedByString:@"\n"];

for (int i = 0 ; i < [dataRows count] ; i++)
{
    NSArray *dataElements = [[dataRows objectAtIndex:i] componentsSeparatedByString:@"@"];
    if ([dataElements count] >= 2)
    {
        CELL *cellMO = [NSEntityDescription  insertNewObjectForEntityForName:@"CELL" 
                                 inManagedObjectContext:[self managedObjectContext]];

        cellMO.cellName = [dataElements objectAtIndex:0];
        cellMO.cellDescription = [dataElements objectAtIndex:1];

        cellMO.organs ???????????????????????????? can't make this work.  

    }
} 
```

当我用这条线构建时它一直在中断，我尝试了几种不同的方法。它一直说 cellMO.organs 需要一个 NSSet，但是当我尝试给它一个 NSSet 时它失败了。所以，我迷路了。请帮忙？？？？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:34:20.283

我假设`organs`该行的其余部分有 0 个或更多字符串。所以：

```
if (i>1) {
   // if organ does not exist yet
   ORGAN *organMO = [NSEntityDescription  insertNewObjectForEntityForName:@"ORGAN" 
                             inManagedObjectContext:[self managedObjectContext]];
   organMO.name = [dataElements objectAtIndex:i];
   // otherwise fetch it
   [cellMO addOrgansObject:organMO];
} 
```

# ruby-on-rails - 通过命名路由测试页面的行为

> ID：10457793
> 
> 赞同：0
> 
> 时间：2012-05-05T00:37:42.400
> 
> 标签：ruby-on-rails, rspec, controller, rspec-rails

我有一个命名路线，用于将索引操作缩小到特定的一周

```
match "workouts/week/(:date)" => "workouts#index", 
  :constraints => { :date => /\d{4}-\d{2}-\d{2}/ },
  :as => "workouts_date" 
```

我正在尝试编写一个规范来测试索引视图是否正确显示给定的几周锻炼。

```
 it 'populates an array of workouts for the week of the given date' do
    sunday_workout = FactoryGirl.create(:workout, date: Date.new(2012, 12, 31).beginning_of_week(:sunday))
    today_workout = FactoryGirl.create(:workout, date: Date.new(2012, 12, 31))
    saturday_workout = FactoryGirl.create(:workout, date: Date.new(2012, 12, 31).end_of_week(:sunday))
    next_week_workout = FactoryGirl.create(:workout, date: Date.new(2012, 12, 31).next_week)
    prev_week_workout = FactoryGirl.create(:workout, date: Date.new(2012, 12, 31).prev_week)
    this_week_workouts = [sunday_workout, today_workout, saturday_workout].group_by(&:date)
    get 'workouts/week/2012-12-31'
    assigns(:workouts).should eq this_weeks_workouts
  end 
```

我得到错误：

```
Failure/Error: get 'workouts/week/2012-12-31'
 AbstractController::ActionNotFound:
   The action 'workouts/week/2012-12-31' could not be found for WorkoutsController 
```

`:index`动作是索引，但除了提供符号之外，我不知道如何让它路由到那里。

编辑：我在 spec_helper 文件中添加了以下内容：

```
config.include Rails.application.routes.url_helpers 
```

并将获取请求更改为

```
get workouts_date_path('2012-12-31') 
```

但是我仍然得到

```
 The action '/workouts/week/2012-12-31' could not be found for WorkoutsController 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:54:50.013

在控制器测试中，您应该像这样调用您的控制器：`get 'index', date: '2012-12-31'`. 您正在测试控制器操作，它对路由一无所知。说得通？如果您想测试路由，则有路由规范。

# c# - 生成 MemberExpression 的签名（散列）

> ID：10457800
> 
> 赞同：1
> 
> 时间：2012-05-05T00:38:31.797
> 
> 标签：c#, lambda

考虑以下 MemberExpressions

```
someObject.someMethod(p => p.FirstName)
someObject.someMethod(p => p.Contact.Address.City) 
```

我正在编写一些代码来遍历表达式并查看每个成员以确定它是否用给定的属性装饰。这样做的目的是生成一个“路径”，如下所示：

```
p.Contact.Address.City -> "Contact.Address.City" 
```

但如果它用特定属性装饰，则路径将使用不同的名称生成：

```
...
[BsonElement("Locale")]
public string City {get; set;}
...

p.Contact.Address.City -> "Contact.Address.Locale" 
```

*仅供参考：这是我为使用 MongoDB 编写的一个小型库*

因此，遍历表达式并检查属性是使用反射完成的。它不是很慢，但还有改进的余地。

我想为路径解析添加一些缓存（将成员表达式转换为字符串），但我不确定为成员表达式生成签名\哈希的最佳\最有效方法。

我尝试了一些东西，但它们实际上减慢了代码的速度。这种方法需要足够快，以便每次都生成哈希，以便它可以用于查找，并且显然必须比遍历表达式更快。

有什么想法吗？

编辑：代码在这里：[https](https://github.com/bryanmig/MongoFluentUpdater/blob/master/FluentUpdate/FluentUpdater.cs) ://github.com/bryanmig/MongoFluentUpdater/blob/master/FluentUpdate/FluentUpdater.cs （我知道还有改进的余地，但它是一个早期的原型）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:53:22.890

您总是希望缓存反射工作的结果，因为在代码运行时没有任何结果会改变（除非您进行大量动态程序集加载/生成）。您可以分享遍历表达式的代码吗？这可能会使您更容易看到需要在哪里合并缓存。

# c++ - 如何在编译时检查表达式是否非法？

> ID：10457804
> 
> 赞同：12
> 
> 时间：2012-05-05T00:39:21.227
> 
> 标签：c++, sfinae, typetraits, c++-concepts

我的应用程序中有一个问题，我想断言一个函数应用程序将被编译器拒绝。有没有办法通过 SFINAE 进行检查？

例如，假设我想验证`std::transform`某个`const`范围是非法的。这是我到目前为止所拥有的：

```
#include <algorithm>
#include <functional>
#include <iostream>

namespace ns
{

using std::transform;

template<typename Iterator1, typename Iterator2, typename UnaryFunction>
  struct valid_transform
{
  static Iterator1 first1, last1;
  static Iterator2 first2;
  static UnaryFunction f;

  typedef Iterator2                   yes_type;
  typedef struct {yes_type array[2];} no_type;

  static no_type transform(...);

  static bool const value = sizeof(transform(first1, last1, first2, f)) == sizeof(yes_type);
};

}

int main()
{
  typedef int *iter1;
  typedef const int *iter2;
  typedef std::negate<int> func;

  std::cout << "valid transform compiles: " << ns::valid_transform<iter1,iter1,func>::value << std::endl;

  std::cout << "invalid transform compiles: " << ns::valid_transform<iter1,iter2,func>::value << std::endl;

  return 0;
} 
```

不幸的是，我的特质拒绝合法和非法案件。结果：

```
$ g++ valid_transform.cpp 
$ ./a.out 
valid transform compiles: 0
invalid transform compiles: 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T09:20:47.137

您的问题类似于[SFINAE + sizeof = detect if expression compiles](https://stackoverflow.com/questions/2127693/sfinae-sizeof-detect-if-expression-compiles)。

**该答案的摘要**：`sizeof`评估传递给它的表达式的类型，包括实例化函数模板，但它不会生成函数调用。这就是 Lol4t0 的观察结果`sizeof(std::transform(iter1(), iter1(), iter2(), func()))`即使 `std::transform(iter1(), iter1(), iter2(), func())`没有编译也能编译的原因。

您的具体问题可以通过评估 Lol4t0 的答案中的模板来解决要提供给的任何输出范围`std::transform`。然而，在模板中验证函数调用是否会编译的一般问题似乎无法用这个`sizeof + SFINAE`技巧来解决。（它需要一个可从运行时函数调用派生的编译时表达式）。

您可能想尝试[ConceptGCC](http://www.generic-programming.org/software/ConceptGCC/)，看看这是否允许您以更方便的方式表达必要的编译时检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T18:12:53.900

在我的回答中，我想关注问题，如何确定，如果给定迭代器常量： `std::is_const`被提及，但在这种情况下它对我来说不起作用（gcc 4.7）。

我认为，它的实现方式如下

```
template <typename T>
struct is_const
{
    enum {value = false };
};

template <typename T>
struct is_const<const T>
{
    enum {value = true };

}; 
```

现在，不能用这个结构检查引用类型，它们不会匹配特化，因为`const T`会匹配`int& const`，即*对 int 的常量引用*，而不是*对常量 int*`const int&`的引用，并且首先没有任何意义。

 *好的，但是我们能够确定迭代器是否与以下结构保持一致：

```
template <typename Iterator>
struct is_iterator_constant
{
    typedef char yes_type;
    typedef struct{ char _[2];}  no_type;
    template <typename T>
    static no_type test(T&);

    template <typename T>
    static yes_type test(...);

    enum {value = sizeof(test<typename std::iterator_traits<Iterator>::value_type>(*Iterator())) == sizeof(yes_type) };

}; 
```*

# cakephp - 如何在模型中保存 cakephp 对象

> ID：10457806
> 
> 赞同：0
> 
> 时间：2012-05-05T00:39:54.167
> 
> 标签：cakephp, model, save

我有一个项目，目标是当用户创建一个项目时，我将在保存项目中提示输入电子邮件地址我将检查用户是否已经存在，如果不存在，我将继续并在后台创建具有一堆默认值的新用户如果用户想要激活，那么用户可以回来并完成个人资料。我怎么能在模型中做到这一点。似乎唯一的保存方法是传入数组我如何使用对象参数来做到这一点。

```
App::uses('User', 'Model');
class Item extends AppModel{
   public function save($data = null, $validate = true, $fieldList = array()) {
   $user = User::getUserbyEmail($data['Item']['email_address']);
   if($user){
      $user = new User();
      $user->firstName = "Bob";
      $user->save();  /// this save does not work
   }
   //get user Id and call parent save
   .........
}

class User extends AppModel {
   public $firtName;
   private $created;
   private $status = 0; //0 is in active
   $private $password;

   public function  __construct($id = false, $table = null, $ds = null) {
     parent::__construct($id, $table, $ds);
     $this->created = date("Y-m-d H:i:s");
     $this->setPassword($password);
  }

  public function setPassword($value){
     $this->password = mysecret_algorithm(standard_password);
  } 

 ..bunch of setter and getter here

} 
```

我正在使用 cakephp，但我不想在控制器中执行此操作，因为我在多个地方都有项目添加功能，在模型中这样做会很好，然后每个控制器只需调用 $this->Item->save();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:07:53.850

在您的代码中，目的是`User::getUserbyEmail`什么？

至于保存用户，试试这个：

```
class Item extends AppModel{
   public function save($data = null, $validate = true, $fieldList = array()) {
       $user = User::getUserbyEmail($data['Item']['email_address']);
       if (!$user){
           $user = new User(); // EDIT: forgot this part
           $user->create();
           $user->set($userData);
           $user->save();  /// this save does not work
       }
   }
   //get user Id and call parent save
   .........
} 
```

`$userData`上面应该是一个关联数组，其中数组键是用户数据库表中字段的名称：

```
$userData = array(
    'firstname' => 'Bob'
); 
```

请注意，在这种情况下，您的代码必须通过验证。

# objective-c - Objective-C 中 C 函数的重复符号错误

> ID：10457811
> 
> 赞同：9
> 
> 时间：2012-05-05T00:40:39.357
> 
> 标签：objective-c, c, xcode, linker-errors

首先，我在编程中只真正使用了 Objective-c 方法。我决定以 c 函数的形式进行一些快速的数学计算，然后最终需要它们用于多个类。所以我把 c 函数放在一个单独的 .h 文件中。这工作正常，直到我尝试将 .h 文件导入到多个类中。然后我得到这个错误：

> 重复符号 *_myFunction* blah blah blah 链接器命令失败，退出代码为 1（使用 -v 查看调用）

如何在多个类中使用 ac 函数而不会出现此链接错误。我尝试在需要它们的类中定义函数，但似乎即使它们是不同的类，如果函数名相同，我也会收到此错误。我可能在这里疯了，但是一些帮助理解会很棒。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T00:43:01.470

您应该将声明放在 .h 文件中，将它们设为外部，并将定义移动到 .c 或 .m 文件中。

由此

我的函数.h

```
int max(int a, int b) {
    return a>b ? a : b;
} 
```

移至此：

我的函数.h

```
extern int max(int a, int b); // declaration 
```

我的函数.c

```
int max(int a, int b) {
    return a>b ? a : b;
} 
```

# c++ - 获取 sf::View 的 X 和 Y 偏移量

> ID：10457812
> 
> 赞同：1
> 
> 时间：2012-05-05T00:40:52.807
> 
> 标签：c++, sfml

如何获得 sf::View 的 X 和 Y 偏移量，我使用 sf::View 作为我的 2d 相机，所以当我单击鼠标时，我会得到我正在单击的图块的鼠标 X 和 Y 坐标

```
void LMButtonDown(int mX, int mY)
{
    printf("[%d][%d]\n", mX / TILE_SIZE, mY / TILE_SIZE);
} 
```

这很好，但是一旦我将相机移动`sf::View`坐标，正如预期的那样，不要考虑 sf::View 偏移量。我在[文档](http://www.sfml-dev.org/documentation/2.0/classsf_1_1View.php)中看不到任何获取 X 或 Y 的函数， 因此我可以考虑偏移量。对此的任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T00:53:56.513

看看[sf::RenderTarget::mapPixelToCoords 和 mapCoordsToPixel](http://www.sfml-dev.org/documentation/2.0/classsf_1_1RenderTarget.php#a46eb08f775dd1420d6207ea87dde6e54)。您可以使用此方法将坐标从“视图”空间转换为“世界”空间并返回。该文档特别提到了您的需求作为示例：

> 此函数查找与渲染目标的给定像素匹配的 2D 位置。换句话说，它与显卡的操作相反，即找到渲染像素的初始位置。

还有一些方法的重载版本，`Vector2i`它们基于 RenderTarget 获取并转换它，`view`而无需手动提供视图。

如果由于某种原因您不能使用（或无权访问）RenderTarget，那么您可以手动执行翻译。只要您`sf::View`不执行缩放或旋转（也就是说，它只执行平移），它应该非常简单。

要获得视图的左上角，只需取中心，然后减去宽度和高度的一半。然后，使用视图的左上角平移鼠标坐标。

像这样的东西：

```
// Somewhere else...
sf::View view;

void LMButtonDown(int mX, int mY)
{
    sf::Vector2f viewCenter = view.getCenter();
    sf::Vector2f halfExtents = view.getSize() / 2.0f;
    sf::Vector2f translation = viewCenter - halfExtents;

    mX += static_cast<int>(translation.x);
    mY += static_cast<int>(translation.y);

    printf("[%d][%d]\n", mX / TILE_SIZE, mY / TILE_SIZE);
} 
```

# mysql - MAX 和 GROUP BY 不返回好的值

> ID：10457813
> 
> 赞同：3
> 
> 时间：2012-05-05T00:41:52.710
> 
> 标签：mysql, group-by, max

在网站上搜索了几个小时后，我找不到我的问题的正确答案，或者答案太复杂。我有一些来自我的世界服务器的统计数据，我想知道哪些块是由谁创建的最多。所以我从`GROUP BY`and开始`MAX`，但它没有返回正确的值。`MAX`值不错，但与和`itemid`冲突`playerid`。它只选择第一个 id 和 playername。（注意：每个playerid的每个item都有一个单独的行！！！）查询如下：

```
SELECT  `playername` ,  `itemid` , MAX( destroyed ) 
FROM  `blockstats_typed` 
GROUP BY  `itemid` 
LIMIT 0 , 30 
```

存在的字段是`playername`、`itemid`和。我希望你们能帮助我...`created``destroyed`

如果您需要更多信息，请直说！

编辑 1（表架构）：

```
id          int(10)         id of the row (AI)
playername  varchar(50)     playername
itemid      smallint(5)     id of the item
created     int(10)         times created
destroyed   int(10)         times destroyed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:59:52.517

只有 MySQL 和 PostgreSQL（但 PostgreSQL 以更有限的方式执行此操作；*并且有评论告诉我 SQLite 在此模仿 MySQL*）允许您从 GROUP BY 子句中省略选择列表中的列（表达式），但不是聚合。如果您想要项目 ID、其被销毁的最大次数以及执行此操作的用户 ID（或多个 ID），则必须编写更复杂的查询。

所以，你可能会追求：

```
SELECT playername,  itemid, MAX(destroyed) 
  FROM blockstats_typed
 GROUP BY playername, itemid 
 LIMIT 0, 30 
```

或者你可能会追求：

```
SELECT b.PlayerName, s.ItemID, s.MaxDestroyed
  FROM BlockStats_Typed AS b
  JOIN (SELECT ItemID, MAX(Destroyed) AS MaxDestroyed
          FROM BlockStats_Typed
         GROUP BY ItemID
         LIMIT 0, 30
       ) AS s
    ON b.ItemID = s.ItemID AND b.Destroyed = s.MaxDestroyed; 
```

请注意，如果某个物品被两个玩家摧毁了 237,000 次，您将取回两个玩家的名字（当然，如果该 ItemID 在前 30 位）。

两者都是有效的查询；不过，他们做不同的事情。您必须决定哪个（如果有的话）对于您要尝试做的事情是正确的。如果两者都不正确，您可能需要澄清您的问题。

（我不确定在我写的地方是否允许使用 LIMIT。如果没有，请将其放在末尾。您可能需要添加一个带有 DESC 限定符的 ORDER BY 子句，以确保 limit 子句显示最多有趣的行；GROUP BY 不保证排序。）

# php - php循环会话变量

> ID：10457814
> 
> 赞同：-1
> 
> 时间：2012-05-05T00:42:07.297
> 
> 标签：php, session

尝试基于会话变量运行循环。在第一页加载没有会话。当它设置会话时，我设置会话变量和警报。

问题是，它会提醒每个页面加载:(

```
`
<!-- language: lang-php -->

$check = $_SESSION['cache'];  

if ($check == "xYx") {  

echo $word;  
} else {  

session_start();  
?><script>alert ("Im reading it again !")</script><?  

echo $word;  
$_SESSION['cache'] = "xYx";  
} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:51:09.103

```
$check = $_SESSION['cache']; 
```

发生在之前

```
session_start(); 
```

这是行不通的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:52:47.247

只需这样做：

```
session_start();
$check = $_SESSION['cache'];  

if ($check == "xYx") {  

echo $word;  
} else {  

?><script>alert ("Im reading it again !")</script><?  

echo $word;  
$_SESSION['cache'] = "xYx";  
} 
```

正如评论所说，这只是简单地`session_start()`开始。

# java - 找到鼠标xy坐标的简单方法？

> ID：10457817
> 
> 赞同：3
> 
> 时间：2012-05-05T00:42:43.303
> 
> 标签：java

所以基本上我正在制作一个游戏，它的主类有一个每秒运行 60 次的循环

我需要一种简单的方法来找到鼠标的 xy 坐标，这样我就可以在该特定坐标上绘制一些东西。

有什么好的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T02:13:26.587

如果您尝试运行此代码，它实际上不会起作用，但它向您展示了如何以整数形式获取鼠标 X 和 Y 的位置

```
import java.awt.MouseInfo;    

public class testmouse {
    public static void main(String[] args){
        int mouseY = MouseInfo.getPointerInfo().getLocation().y;
        int mouseX = MouseInfo.getPointerInfo().getLocation().x;            
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T01:07:09.753

在游戏区添加一个[`MouseMotionListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseMotionListener.html)并注意[`mouseMoved(MouseEvent)`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseMotionListener.html#mouseMoved%28java.awt.event.MouseEvent%29)。

# delphi - 如何显示变量指向的方法指针？

> ID：10457818
> 
> 赞同：2
> 
> 时间：2012-05-05T00:42:48.333
> 
> 标签：delphi

我已经贴了

```
type  TProcedure = procedure(const messageText : String) of object; 
```

然后有一个该类型的变量，`decodeProcedure : TProcedure;` 它被分配到不同的地方。

当我停在断点上时，如何查看变量指向的过程？

如果我`Debug/evaluate`或`add watch`我收到错误`E2035 Not enough actual parameters`

（德尔福 XE 2）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T01:16:41.717

您可以使用 @ 运算符评估 decodeProcedure 方法的地址，并将该表达式添加到监视列表窗口，以查看您可以使用该`local variables`窗口的过程点。

试试这个代码

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

type
  TProcedure = procedure(const messageText : String) of object;
  TFooClass = class
     decodeProcedure  : TProcedure;
   public
     procedure Bar(const messageText : String);
     procedure DoIt;
  end;

Var
  F : TFooClass;
{ TFooClass }

procedure TFooClass.Bar(const messageText: String);
begin
  Writeln(messageText);
end;

procedure TFooClass.DoIt;
begin
  if Assigned(decodeProcedure) then //put a break point here
   decodeProcedure('Hello');
end;

begin
  try
     F:=TFooClass.Create;
     try
       F.decodeProcedure:=F.Bar;
       F.DoIt;
     finally
      F.Free;
     end;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

这是一个示例 IDE 屏幕截图

![在此处输入图像描述](../Images/805bd5d5ed4aaf7783539fe2a7d6e08a.png)

如您所见，该`local variables`窗口显示了哪个解码过程指向该`TFooClass.Bar`方法。

**更新** 您还可以将`Self`表达式添加到观察列表以获得相同的结果

![在此处输入图像描述](../Images/43d2b0f9668872f37ebc0d145c984e79.png)

# jquery-mobile - 在 jQuery 移动网站中播放 YouTube 视频。自定义拇指

> ID：10457825
> 
> 赞同：1
> 
> 时间：2012-05-05T00:43:48.580
> 
> 标签：jquery-mobile, youtube

我有一个内置 jQuery mobile 的移动网站。在它上面，有一个自定义图形链接到一个 youtube 视频。

目前，在 iPhone 和 Android 上，当您单击（触摸）图形时，它会打开 youtube 应用程序并从那里播放视频。理想情况下，我希望它能够在浏览器内的叠加层中打开和播放。在不使用 iframe 嵌入的情况下，这是否可以通过 youtube 实现？

使用 iFrame 嵌入并不是一个真正的选择，因为链接到视频的图形是设计的一个组成部分。

# java - 来自字符串模板的动态函数调用

> ID：10457826
> 
> 赞同：2
> 
> 时间：2012-05-05T00:43:59.173
> 
> 标签：java, stringtemplate, stringtemplate-4

是否可以通过 StringTemplate 动态生成的函数调用 Java 类的函数？

例如，下面是一个具有三个函数的 Java 类

```
public class RegionManager {

    public static List<String> getCenter(){
       return somelist; 
    }   

    public static List<String> getFloor(){
         return somelist;   
    }

    public static List<String> getRoom(){
         return somelist;   
    }   

} 
```

现在，我的字符串模板文件包含 `$CS.name$`.. 的值可能是“Room”、“Floor”、“Center”。

根据该`$CS.name$`值，我想调用函数（可能是`getRoom(), getFloor(), getCenter()`）。请注意，当我编写字符串模板文件时，我不知道要调用哪个函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:57:53.463

您不能调用静态函数。您只能在对象上调用 getter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-04T15:36:16.510

正如已经提到的，您不能在模板中调用静态函数。但是，还有另一种有趣的机制，可以帮助您满足您的要求。

[StringTemplate](http://www.stringtemplate.org/)库具有自定义[Renderers](https://github.com/antlr/stringtemplate4/blob/master/doc/renderers.md)的机制。

您可以构建一个渲染器，它将根据输入和/或可能的格式调用您的静态方法，例如

`<your_item; format="your_format">`

我希望这将有助于解决您的问题。它在不同的模板中帮助了我很多。

# c++ - 如何使用 cvWaitKey openCV 捕获 Num 键盘键

> ID：10457827
> 
> 赞同：0
> 
> 时间：2012-05-05T00:43:59.173
> 
> 标签：c++, opencv

有什么方法可以捕获`cvWaitKey`在 openCV 中使用小键盘按下了哪个数字键。我尝试使用 adobe 中此[列表](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000520.html)中的代码，但它们不起作用。

当我尝试打印按下的键的值时，我没有得到数字键盘键的值。

有人可以帮忙吗？

如果不是如何在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:18:42.123

我不确定是否有键值标准，无论如何，如果您使用 Gtk 作为 gui，它将使用 GdkEvent 结构的键值属性：在这里您可以找到这些键代码：[http://www.koders .com/c/fidD9E5E78FD91FE6ABDD6D3F78DA5E4A0FADE79933.aspx](http://www.koders.com/c/fidD9E5E78FD91FE6ABDD6D3F78DA5E4A0FADE79933.aspx)

如果您使用的是 Qt，它*可能会*使用 QKeyEvent::key()，但我无法验证这一点，请参阅：http: [//qt-project.org/doc/qt-4.8/QKeyEvent.html](http://qt-project.org/doc/qt-4.8/QKeyEvent.html)

对于 win32，它使用这些： http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd375731 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx)

对于碳，我不确定，我猜是这样的：[http ://snipplr.com/view/42797/](http://snipplr.com/view/42797/)

您可以决定基于这些（对于您需要的键）定义自己的键码映射，因为据我所知不存在。

祝你好运！

# spring-social - Spring Social 中的 ConnectController 和 ProviderSignInController 有什么区别

> ID：10457828
> 
> 赞同：3
> 
> 时间：2012-05-05T00:44:17.083
> 
> 标签：spring-social

ConnectController 和 ProviderSignInController 都可以创建与 Service Provider 的连接，所以我想知道 ConnectController 和 ProviderSignInController 有什么区别

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T07:32:37.080

`ConnectController`仅用于管理与社交网站的连接。

`ProviderSignInController`有更多的功能。它`ConnectionController`在一开始就可以使用。与社交网站连接后，它会找到您的本地用户并将该用户登录到您的应用程序。

# angularjs - 如何使用 AngularJS 呈现动态定义列表？

> ID：10457833
> 
> 赞同：71
> 
> 时间：2012-05-05T00:44:46.000
> 
> 标签：angularjs

如何使用 AngularJS 呈现动态定义列表？

例子：

数据：

```
[
    {
        key: 'a',
        value: 'x'
    }, {
        key: 'b',
        value: 'y'
    }
] 
```

所需的 HTML：

```
<dl>
    <dt>a</dt>
    <dd>x</dd>
    <dt>b</dt>
    <dd>y</dd>
</dl> 
```

[http://docs.angularjs.org/tutorial/step_08](http://docs.angularjs.org/tutorial/step_08)中的示例：

```
<dl>
    <dt>Availability</dt>
    <dd ng-repeat="availability in phone.availability">{{availability}}</dd>
</dl> 
```

适用于动态数量的 dds 和静态数量的 dts，但不适用于两者的动态数量。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-05-29T08:06:43.550

Angular 1.2 中添加了允许 ng-repeat-start/ng-repeat-end 的新功能。

使用此功能，您可以像这样编写 html：

```
<dl>
  <dt ng-repeat-start="i in items">{{i.key}}</dt>
  <dd ng-repeat-end>{{i.value}}</dd>
</dl> 
```

See [this plnkr](http://plnkr.co/edit/9BhyYhQlQMRZtZKIsZ8G?p=preview) for a full working example.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-20T21:42:02.697

I've created a directive called [repeatInside](https://github.com/bigblind/angular-repeat-inside) to solve problems like this one.

```
<dl repeat-inside="word in dictionary">
    <dt>{{word.name}}</dt>
    <dd>{{word.definition}}</dd>
</dl> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-05T01:49:51.140

这是一个问题，因为您需要用一些元素包装它才能进行重复。这不会是一个有效的 html - 你会遇到与无序列表或表格相同的麻烦......

```
<dl>
  <div ng-repeat="i in items">
    <dt>{{i.key}}</dt>
    <dd>{{i.value}}</dd>
  </div>
</dl> 
```

我猜`div`内部`dl`是不允许的，但它可以工作——至少在 Chrome 中:-D

我们计划`ng-repeat`在评论中支持这一点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-23T02:18:57.300

This answer didn't seem to work for me in Angular v1.2.7 so I wanted to post a slight variation that worked well for me:

```
<dl>
    <dt ng-repeat-start="(key, value) in items">{{key}}</dt>
    <dd ng-repeat-end>{{value}}</dd>
</dl> 
```

# ios - 如何对这个 OpenGL ES 纹理应用正确的透视？

> ID：10457834
> 
> 赞同：1
> 
> 时间：2012-05-05T00:44:46.850
> 
> 标签：ios, image, opengl-es, 3d, textures

我想描述一下我的目标并获得一些对提议的解决方案的反馈。我对 OpenGL ES（或根本没有 OpenGL）很陌生，所以请保持温和。我还想提一下，该平台是 iPad (iOS)，它有归属限制。

**目标：**让用户以正确的视角（或至少可调整的视角）放置应该正确绘制纹理的顶点。为了解释我的意思，请考虑以下示例。

假设我们有一张房子的照片，房子前面有相应的草坪。现在，我想用瓷砖（纹理）铺设（用户）指定的路径，以使透视看起来正确。如果视图只是正交的，则图块将是完全正方形的，这在图像中有某种深度时是不现实的。

现在，一种方法是在 OpenGL ES 上设置一个带有平截头体的透视图。然后放置一个平面（如下所示）并将图像纹理放在其上以供初学者使用。

![放置图像纹理的平面](../Images/7a3d7c00651f4f737e7f8652876aac11.png)

现在，正如您从上图的外观所期望的那样，图像将被扭曲。但这很好，因为如果我们将平面向后倾斜（使其完美地适应显示器的边界），图像将显示为正方形。

如果用户现在定义了要铺设的区域，我们可以将这些点放在与倾斜平面相同的角度，然后只需在其中放置一个带有方形瓷砖的纹理，它们就会以透视图出现。如果我们的倾斜角度不正确，用户可以手动调整，然后上图中的平面的角会被调整，平面会发生不同的倾斜以适应显示器。然后瓷砖纹理将从不同的角度出现。

这是一种可行的方法还是有其他更好的方法来做到这一点？我认为这是一个丑陋的 hack，可能与我在 3D 编程方面的有限技能有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T03:49:44.503

如果您只想对图像应用透视，那么您甚至可能不需要 OpenGL ES。您可以简单地创建一个适当的 CATransform3D 并按照我在[此答案](https://stackoverflow.com/a/353611/19679)中描述的方式将其设置为 UIView 或 CALayer 。关键是`m34`变换矩阵的分量。

如果您仍想使用 OpenGL ES 和纹理执行此操作，您可以对纹理四边形的顶点应用变换以创建透视效果。可以在这里看到一个例子：

![四边形的透视变换](../Images/4b3ad484cdb02d39dd4188f835a36df1.png)

我在其中转换了显示相机输入的纹理，以便对其应用透视效果。这是使用以下顶点着色器完成的：

```
 attribute vec4 position;
 attribute vec4 inputTextureCoordinate;

 uniform mat4 transformMatrix;
 uniform mat4 orthographicMatrix;

 varying vec2 textureCoordinate;

 void main()
 {
     gl_Position = transformMatrix * vec4(position.xyz, 1.0) * orthographicMatrix;
     textureCoordinate = inputTextureCoordinate.xy;
 } 
```

我通过以下方式基于 CATransform3D 生成了一个矩阵：

```
 CATransform3D perspectiveTransform = CATransform3DIdentity;
 perspectiveTransform.m34 = 0.4;
 perspectiveTransform.m33 = 0.4;
 perspectiveTransform = CATransform3DScale(perspectiveTransform, 0.75, 0.75, 0.75);
 perspectiveTransform = CATransform3DRotate(perspectiveTransform, rotation, 0.0, 1.0, 0.0); 
```

然后将 CATransform3D 转换为 mat4（它具有 4x4 矩阵内部结构，所以这很容易做到）。如果您想实际看到这一点，请在我的[GPUImage](https://github.com/BradLarson/GPUImage)框架中获取 FilterShowcase 示例应用程序的代码，然后尝试 3-D Transform 条目。代码都在 GPUImageTransformFilter 中，应该相当容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:58:38.123

这是最简单的方法。无论如何，您都必须显示一个与正确消失点成角度的平面，因此让用户自己旋转平面是一个可行的解决方案。否则就是图像处理问题。如果您有兴趣，我会研究计算机视觉中的消失点确定。

# java - 在 Java 中解析嵌套的 JSON

> ID：10457835
> 
> 赞同：0
> 
> 时间：2012-05-05T00:44:56.673
> 
> 标签：java, json, parsing

我只是想问一下，如何简单地解析 Java 中的嵌套 JSON 结构，如下所示：

```
{
   "goods":{
      "NY Store":[
         {
            "product":"Teddybear",
            "available":"20"
         },
         {
            "product":"Mountain bike",
            "available":"0"
         }]
      "LA Store":[
         {
            "product": ....and so on 
```

我想从所有商店获取所有产品，但列表很大（200 家商店）。请问有什么提示和提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:14:23.243

这是您在 Jackson 库中的特定用例的快速介绍。

```
import java.io.IOException;
import java.io.StringWriter;
import java.util.ArrayList;
import java.util.HashMap;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.annotate.JsonProperty;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.annotate.JsonSerialize;

public class JSONTest {
    /**
     * @param args
     * @throws IOException
     * @throws JsonMappingException
     * @throws JsonGenerationException
     */
    public static void main(String[] args) throws JsonGenerationException, JsonMappingException, IOException {
        HashMap<String, ArrayList<InventoryItem>> fs = new HashMap<String, ArrayList<InventoryItem>>();
        for (int i = 0; i < 5; i++) {
            ArrayList<InventoryItem> its = new ArrayList<InventoryItem>();
            its.add(new InventoryItem("teddy", 20));
            its.add(new InventoryItem("diny", 10));
            fs.put(Long.toString(System.nanoTime()), its);
        }
        StoreContianer g = new StoreContianer(fs);
        ObjectMapper objm = new ObjectMapper();
        StringWriter sw = new StringWriter();
        objm.writeValue(sw, g);
        System.out.println(sw.toString());
        StoreContianer c = objm.readValue(
                "{\"goods\":{\"55278650620460\":[{\"product\":\"teddy\",\"available\":20},{\"product\":\"diny\",\"available\":10}],\"55278650631327\":[{\"product\":\"teddy\",\"available\":20},{\"product\":\"diny\",\"available\":10}],\"55278650628131\":[{\"product\":\"teddy\",\"available\":20},{\"product\":\"diny\",\"available\":10}],\"55278650582748\":[{\"product\":\"teddy\",\"available\":20},{\"product\":\"diny\",\"available\":10}],\"55278650624615\":[{\"product\":\"teddy\",\"available\":20},{\"product\":\"diny\",\"available\":10}]}}",
                StoreContianer.class);
        StringWriter sw2 = new StringWriter();
        objm.writeValue(sw2, c);
        System.out.println(sw2.toString());
    }
}

@JsonSerialize
class StoreContianer {
    private final HashMap<String, ArrayList<InventoryItem>> goods;

    public StoreContianer(@JsonProperty("goods") HashMap<String, ArrayList<InventoryItem>> goods) {
        this.goods = goods;
    }

    public HashMap<String, ArrayList<InventoryItem>> getGoods() {
        return goods;
    }
}

@JsonSerialize
class InventoryItem {
    private final String product;
    private final int available;

    public InventoryItem(@JsonProperty("product") String product, @JsonProperty("available") int available) {
        this.product = product;
        this.available = available;
    }

    public String getProduct() {
        return product;
    }

    public int getAvailable() {
        return available;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:48:58.527

为什么不使用图书馆？[http://www.json.org/java/](http://www.json.org/java/)

具体来说，

```
public JSONObject(String source) throws JSONException {
        this(new JSONTokener(source));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T00:31:53.490

我发现这个[google 库](https://code.google.com/p/json-path/)对于解析 JSON 中的嵌套对象非常强大。

`List<String> products = JsonPath.read(json, "$.goods.NY Store[*].product");`

这将为您返回每个“纽约商店”列表中所有产品的列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-02T21:26:19.877

```
 //import java.util.ArrayList;
    //import org.bson.Document;

    Document root = Document.parse("{\n"
            + "   \"goods\":{\n"
            + "      \"NY Store\":[\n"
            + "         {\n"
            + "            \"product\":\"Teddybear\",\n"
            + "            \"available\":\"20\"\n"
            + "         },\n"
            + "         {\n"
            + "            \"product\":\"Mountain bike\",\n"
            + "            \"available\":\"0\"\n"
            + "         }]}}");

    System.out.println(((String) ((Document) ((ArrayList) ((Document) root.get("goods")).get("NY Store")).get(0)).get("product")));
    System.out.println(((String) ((Document) ((ArrayList) ((Document) root.get("goods")).get("NY Store")).get(0)).get("available")));
    System.out.println(((String) ((Document) ((ArrayList) ((Document) root.get("goods")).get("NY Store")).get(1)).get("product")));
    System.out.println(((String) ((Document) ((ArrayList) ((Document) root.get("goods")).get("NY Store")).get(1)).get("available"))); 
```

# c++ - 在有向图中查找电路

> ID：10457836
> 
> 赞同：-2
> 
> 时间：2012-05-05T00:45:10.043
> 
> 标签：c++, algorithm, graph

我想在有向图中找到一个电路，这个电路从一个特定的顶点开始，到它结束。我使用邻接表数据结构来创建这个图，但我不知道算法会如何，请帮助我。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:50:54.627

可能这个提示会有所帮助：

1.  遍历图（任何算法 - BFS DFS）
2.  您访问过的颜色节点并存储其父节点
3.  检查您正在遍历的节点是否已经着色，然后循环回其父节点，直到获得相同的节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:50:28.963

DFS 会找到一个循环。

[http://en.wikipedia.org/wiki/Cycle_%28graph_theory%29](http://en.wikipedia.org/wiki/Cycle_%28graph_theory%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:43:24.230

```
void DFS (Node* ptr , int node , int index , int n ) 
```

{诠释我;

```
if ( ptr == NULL)
{
    ptr=arrNode[index].next;
    node = ptr->vertex;
}

for ( int i=0 ; i < n ; i++)
{
    if ( ( node == arrNode[i].vertex) && (ptr->visit=false))
    {
        ptr=arrNode[i].next;
        ptr->visit = true;
        s.push(arrNode[i].vertex);
    }
    ptr=ptr->next;
    DFS(ptr,ptr->vertex,i+1 , n );

} 
```

}

# java - 解密图像时线程中的错误异常

> ID：10457844
> 
> 赞同：0
> 
> 时间：2012-05-05T00:46:24.353
> 
> 标签：java

我收到以下异常：线程“main”中的异常 java.lang.ClassCastException：javax.crypto.CipherInputStream 无法转换为 javax.imageio.stream.ImageOutputStream

我还是想不通。请给我一些建议

```
// Example code showing how to use Java's Password-Based encryption. This
// example is a simplified form of the code in the documentation for the
// java cryptography architecture.
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.Scanner;

import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;
import javax.crypto.CipherOutputStream;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.PBEParameterSpec;
import javax.imageio.ImageIO;
import javax.imageio.stream.ImageOutputStream;

public class sample {
   public static void main(String[] arg) throws Exception {

   // Scanner to read the user's password. The Java cryptography
   // architecture points out that strong passwords in strings is a
   // bad idea, but we'll let it go for this assignment.
   Scanner scanner = new Scanner(System.in);
   // Arbitrary salt data, used to make guessing attacks against the
   // password more difficult to pull off.
   byte[] salt = { (byte) 0xc7, (byte) 0x73, (byte) 0x21, (byte) 0x8c,
           (byte) 0x7e, (byte) 0xc8, (byte) 0xee, (byte) 0x99 };

   {
     File inputFile = new File("rose.jpg");
      BufferedImage input = ImageIO.read(inputFile);
      Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
      SecretKeyFactory keyFac = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
     // Get a password from the user.
     System.out.print("Password: ");
     System.out.flush();
     PBEKeySpec pbeKeySpec = new PBEKeySpec(scanner.nextLine().toCharArray());          
     // Set up other parameters to be used by the password-based
     // encryption.
     PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 20);
     SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);
     // Make a PBE Cyhper object and initialize it to encrypt using
     // the given password.
     Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
     pbeCipher.init(Cipher.ENCRYPT_MODE, pbeKey, pbeParamSpec);
     FileOutputStream output = new FileOutputStream("output.jpg");
     CipherOutputStream cos = new CipherOutputStream(
            output, pbeCipher);
       //File outputFile = new File("image.png");
         ImageIO.write(input,"JPG",cos);
      cos.close();          

   }
   // Now, create a Cipher object to decrypt for us. We are repeating
   // some of the same code here to illustrate how java applications on
   // two different hosts could set up compatible encryption/decryption
   // mechanisms.
   {
      // Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
      // Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
      // FileInputStream fileinput = new FileInputStream("output.jpg");
      // CipherInputStream cis = new CipherInputStream(fileinput, pbeCipher);
      // BufferedImage input = ImageIO.read(cis);

     File inputFile = new File("output.jpg");
     BufferedImage input = ImageIO.read(inputFile);
       // Get another (hopefully the same) password from the user.
       System.out.print("Decryption Password: ");
       System.out.flush();
       PBEKeySpec pbeKeySpec = new PBEKeySpec(scanner.next().toCharArray());
       // Set up other parameters to be used by the password-based
       // encryption.
       PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 20);
       SecretKeyFactory keyFac = SecretKeyFactory
               .getInstance("PBEWithMD5AndDES");
       SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);
       // Make a PBE Cyper object and initialize it to decrypt using
       // the given password.
       Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
       pbeCipher.init(Cipher.DECRYPT_MODE, pbeKey, pbeParamSpec);
       // Decrypt the ciphertext and then print it out.
       /*byte[] cleartext = pbeCipher.doFinal(ciphertext);
       System.out.println(new String(cleartext));*/
       FileInputStream output = new FileInputStream("output.jpg");
       CipherInputStream cos = new CipherInputStream(
              output, pbeCipher);
        ImageIO.write(input,"JPG",(ImageOutputStream) cos);
        cos.close();

   }
  }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:27:02.397

在你的倒数第三行你写：

```
CipherInputStream cos = new CipherInputStream(
          output, pbeCipher); 
```

我认为应该是：

```
CipherOutputStream cos = new CipherOutputStream(
          output, pbeCipher); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:28:18.197

我认为这是导致问题的代码：

```
 FileInputStream output = new FileInputStream("output.jpg");
    CipherInputStream cos = new CipherInputStream(
          output, pbeCipher);
    ImageIO.write(input,"JPG",(ImageOutputStream) cos);
    cos.close(); 
```

问题很简单。您正在尝试将 InputStream（实际上是 CipherInputStream）转换为 OutputStream 的子类型。那根本行不通。

如果要写入图像，则需要创建输出流链，而不是输入流链。如果您想阅读图像，则不应使用`ImageIO.write`它来阅读它...

# wpf - 将空的“分隔符”行添加到数据绑定的 WPF DataGrid

> ID：10457845
> 
> 赞同：0
> 
> 时间：2012-05-05T00:46:31.820
> 
> 标签：wpf, datagrid

我有一个数据绑定的 DataGrid，我希望有某种虚拟行作为我试图以某种方式组合在一起的各个行之间的分隔符。但是，即使通过创建对象的新实例来添加新行（没有设置，只需调用一个空的构造函数）并将其添加到 ObservableCollection 似乎也会用 0 填充对应于 int 属性的单元格。

有没有办法在数据绑定的 WPF DataGrid 中有一个完全空的虚拟行或某种其他类型的分隔符？我不想去一个未绑定的，手动将所有内容添加到数据集和所有内容中。我已经手动完成了，我只是不想再经历一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:12:54.613

我假设您的源数据上有某种 Group 属性

```
public class MyDataItem
{
     public string Group { get; set; }  // <-- assuming something like this exists
} 
```

使您的 DataGrid`ItemsSource`成为一个`ICollectionView`并启用[分组](http://msdn.microsoft.com/en-us/library/system.componentmodel.icollectionview.groupdescriptions.aspx)

然后，您可以设置结果组的样式，使其看起来像空白空间（有关如何在 DataGrid 中设置组样式的示例，请参见[此处）](http://www.c-sharpcorner.com/uploadfile/dpatra/grouping-in-datagrid-in-wpf/)

# vb.net - 每次 Web 服务调用后如何关闭 wcf 服务

> ID：10457846
> 
> 赞同：0
> 
> 时间：2012-05-05T00:46:36.327
> 
> 标签：vb.net, wcf

我继承了一个工作中的 WCF Web 服务，但存在一个主要缺陷 - WCF 服务会消耗内存并且不会释放，除非重新启动服务。经过半天的请求访问 Web 服务后，托管服务的服务器上的内存攀升至接近 2 gig 并且死在水中。

我希望能够在 Web 服务收到响应后释放内存，但无法弄清楚如何（WCF 对我来说仍然是新的）。这就是我所拥有的。

1.  具有这样的服务合同的 dll。

```
 <ServiceContract(Name:="CheckOut", Namespace:="http://localhost:8000/MyService/CheckOut")> _
    Public Interface ICheckOut
       <OperationContract()> _
       Function SubmitOrder(ByVal XMLForSubmitOrder As String) As String
       End Function 
```

我构建了一个服务引用以将合同公开给我的 Web 服务。

这是我的网络服务方法。

```
Private mMyClient As MyClient
...
<WebMethod()> _
<SoapHeader("MyCredentials")> _
Public Function SubmitOrder(ByVal InputXML As String) As String
    If (MyCredentails IsNot Nothing) Then
        SetMyCredential()
        sReturn = mMyClient.SubmitOrder(InputXML)
        mMyClient.Close() 
        mMyClient = Nothing
        Return sReturn 
    End If
    Return "Invalid recipient credentials"
End Function 
```

不幸的是，Close 和 Set to Nothing 不会影响服务的内存消耗。

我的服务 exe 看起来像这样。

```
Imports MyDll.WCFWrapper
Public Class WCFService
    Private mMyServiceHost As ServiceModel.ServiceHost
    Protected Overrides Sub OnStart(ByVal args() As String)
        mMyServiceHost = New ServiceModel.ServiceHost(GetType(MyService))
        mMyServiceHost.Open()
    End Sub
    Protected Overrides Sub OnStop()
        If Not IsNothing(mMyServiceHost) Then
            mMyServiceHost.Close()
        End If
    End Sub
End Class 
```

这些方法由服务管理器触发。我希望能够在我返回后从我的 Web 服务方法中调用某些东西来“拆除”WCF 服务。我不确定这是否是最好的方法，但我不知道如何管理 WCF 服务的内存使用情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:37:34.673

[http://msdn.microsoft.com/en-us/magazine/cc163590.aspx](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)

> **每次通话服务**
> 
> 每次调用服务是 Windows Communication Foundation 默认的实例化模式。当服务类型配置为每次调用激活时，服务实例即公共语言运行时 (CLR) 对象仅在客户端调用正在进行时存在。每个客户端请求都会获得一个新的专用服务实例。图 2 说明了这种单调用激活是如何工作的。

您是否妥善处理了您维护的任何资源？也许任何需要关闭的数据库连接或流？很难从您的代码中分辨出来，因为您还没有讨论过`SubmitOrder`for 的作用`MyClient`。罪魁祸首完全有可能在里面。

# ruby-on-rails - select_tag 和 upto - 怎么了？

> ID：10457848
> 
> 赞同：0
> 
> 时间：2012-05-05T00:46:46.493
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有简单的选择标签，我想在其中看到 6 到 40 和全部的数字。但是 ruby​​ on rails 3 仅使用 All 条目将其呈现为选择。我查看了源代码，但我没有看到任何呈现数字的地方。此外，在控制台中，我得到了我所期望的

```
select_tag :agey, (6.upto(40){|i| print ("<option>"+i.to_s+"</option>").html_safe }), {:prompt => "All"} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T01:01:25.313

接受一个数组

```
<%=  select_tag :agey, options_for_select(6.upto(40)) %> 
```

# php - php中的Jquery Masonry无限滚动页面导航

> ID：10457852
> 
> 赞同：1
> 
> 时间：2012-05-05T00:47:54.387
> 
> 标签：php, jquery, jquery-masonry

我正在使用 masonry + 无限滚动来显示存储在数据库中的一组页面。我不是专业程序员，因此在提供的演示上构建它。在演示中，它使用指向另一个 html 页面 (id=page-nav) 的链接，该页面作为无限滚动加载以显示其他元素

[ [http://masonry.desandro.com/demos/infinite-scroll.html](http://masonry.desandro.com/demos/infinite-scroll.html) ]

```
 <nav id="page-nav">   <a href="../pages/2.html"></a> </nav> 
```

我正在使用数据库来构建相同的数据库，并且正在使用以下代码

```
<? 
 while ($row = mysql_fetch_assoc($result)){
  $summ = $row['summary'];
  $set_no = $row['set_no'];

*A*

  echo "<div class='box col1'>";
  echo " <p>";
  echo "<a href='$set_no.php' title='NA' ><img src='$set_no.jpg' alt='NA' /></a> Summary: $summ";
  echo "</p>";
  echo "</div>";

*B*

  }
?> 
```

然而，由于我的数据库有超过 250 个元素（set_no 是一个串行增量），我试图在一页上实现 30 个元素的无限滚动。我试图将以下内容分别放在`*A*`和 ，`*B*`但它似乎不起作用。

```
*A*

 if ($set_no % 30 == 0)
  { echo "<nav id='page-nav'>";
  }

*B* 
  if ($set_no % 30 ==0)
  { echo "</nav>";
  } 
```

任何线索我该如何解决这个问题？

# email - 在 DNS 中发布所有邮件都是 S/MIME？

> ID：10457855
> 
> 赞同：0
> 
> 时间：2012-05-05T00:48:03.473
> 
> 标签：email, dns, smime

正如我们可以通过[ADSP](http://en.wikipedia.org/wiki/Author_Domain_Signing_Practices)表明我们的所有邮件都应该具有 DKIM 签名一样，是否有一种标准方法可以在 DNS 记录中表明我们所有的邮件都将具有 S/MIME 签名？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:35:43.677

不，那里没有。

那里的层之间的通信有点问题。DKIM 是一种技术，允许域的 MTA 在域管理员的控制下签署来自该域的所有电子邮件。S/MIME 和 PGP 是使最终用户能够签署所有外发电子邮件的技术。域管理员对此事没有发言权：他们或他们控制的 MTA 无法签署电子邮件，即使他们愿意。因此，域管理员不能保证来自该域的所有电子邮件都是 S/MIME 或 PGP 签名的。这完全取决于每个最终用户使用的 MUA。如果不存在这样的保证，那么支持在 DNS 中发布这样的保证的能力就没有意义。

# c++ - 当读回另一个向量时，写入二进制文件的向量数据不一样，为什么？

> ID：10457857
> 
> 赞同：1
> 
> 时间：2012-05-05T00:48:19.740
> 
> 标签：c++, file, binary

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
#include "ReadText.h"
using namespace std;

const string FILE_NAME = "TopicIinBasic.txt";

template<typename T>
char * as_bytes( T &inType );

int main()
{
    vector<int> vec(2, 2);

    vector<int> receive(2);

    fstream write( "myFile.dat", ios::out | ios::binary );

    write.write( as_bytes(vec[0]), sizeof(vec[0] * 2) );

    write.close();

    fstream read( "myFile.dat", ios::in | ios::binary );

    read.read( as_bytes(receive[0]), sizeof(vec[0] * 2) );

    cout << receive[0] << ' ' << receive[1] << endl;    

    return 0;
}

template<typename T>
char * as_bytes( T &inType )
{
    void* addr = &inType;

    return static_cast<char*>(addr);
} 
```

我首先将内容写入`vec`二进制文件。然后关闭文件。然后以阅读模式再次打开它。然后我尝试将二进制文件的内容放入`receive`. 但是当我显示`receive`的内容时，输出是`2 0`，而不是`2 2`。为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T00:57:09.213

您正在获取表达式的大小，`vec[0] * 2`与 大小相同`vec[0]`。结果，你只写了一个元素！

移动`* 2`括号外部将修复它。（为了清楚起见，我还把它移到了前面。）

```
write.write( as_bytes(vec[0]), 2 * sizeof(vec[0]) ); 
```

# javascript - 某些输入中未出现实时表单验证

> ID：10457858
> 
> 赞同：0
> 
> 时间：2012-05-05T00:48:53.700
> 
> 标签：javascript, jquery, html, css

我正在尝试为我的注册页面添加一些实时表单验证，但是只有我的电子邮件输入显示了我应该显示的正确或错误输出，而且我的用户名或密码都不是，我在过去的几个小时中尝试查看出了什么问题，但我只是在代码中找不到任何可能导致的错误。希望有人能看到错误。

表格代码

```
 <form id="jform" action="" method="post" enctype="multipart/form-data">
                <div id="modal_content_left">
                Register

                <ul>

                    <li class="required" type="none">

                        <label>

                            <input type="text" class="reg_text tip" name="username" id="username" title="8 - 16 Characters" placeholder="Username*"/>

                        </label>

                        <label>
                             <br />
                            <input type="text" class="reg_text tip" name="email" id="email" title="Get Verified" placeholder="Email*"/>

                        </label>
                        <label>
                            <br />
                            <input type="password" class="reg_text tip" name="password" id="password" title="Min 8 Characters" placeholder="Password*"/>

                        </label>

                        <label>
                            <br />
                            <input type="password" class="reg_text tip" name="cpassword" id="cpassword" title="Min 8 Characters" placeholder="Verify Password*"/>
                        </label>
                    </li>

                </ul></form> 
```

jQuery代码

```
// JavaScript Document

$(document).ready(function(){
    jVal = {

            'username' : function() {

            $('body').append('<div id="usernameInfo" class="info"></div>');

            var ele = $('#username');
            var pos = ele.offset();

            var patt = /^(?=.*[a-z].*)\w{8,}$/i;

            if(!patt.test(ele.val())) {
                jVal.errors = true;
                    ele.removeClass('correct').addClass('error');
                    ele.effect("shake", { times:3 }, 50);

            } else {
                    ele.removeClass('error').addClass('correct');
            }
        },

        'email' : function() {

            $('body').append('<div id="emailInfo" class="info"></div>');

            var ele = $('#email');
            var pos = ele.offset();

            var patt = /^.+@.+[.].{2,}$/i;

            if(!patt.test(ele.val())) {
                jVal.errors = true;
                    ele.removeClass('correct').addClass('error');
                    ele.effect("shake", { times:3 }, 50);

            } else {
                    ele.removeClass('error').addClass('correct');
            }
        },

        'password' : function(){

            $('body').append('<div id="passwordInfo" class="info"></div>');

            var ele = $('#password');
            var pos = ele.offset();

            if(ele.val().length < 6) {
                jVal.errors = true;
                    ele.removeClass('correct').addClass('error');
                    ele.effect("shake", { times:3 }, 50);

            } else {
                    ele.removeClass('error').addClass('correct');
            }

        },

    $('#username').change(jVal.username);
    $('#email').change(jVal.email);
    $('#password').change(jVal.password);

    $('input[name="agree_cons"]').change(jVal.agree);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:30:38.577

你的代码没有问题。如果你包含 jQuery 和 jQuery UI，它就可以工作。

这是一个工作[小提琴](http://jsfiddle.net/supertrue/6CPzC/)。我所做的**唯一**更改是：

1.  包括 jQuery
2.  包括 jQuery UI。
3.  `.correct`为和添加 CSS 声明`.error`

仔细检查您是否在自己的代码中执行所有这些操作，并且您应该得到预期的结果。

# android - 当 Android 重新缩放它们时，是否有可能有更清晰的可绘制对象？

> ID：10457862
> 
> 赞同：0
> 
> 时间：2012-05-05T00:49:48.407
> 
> 标签：android, drawable, image-scaling

假设我在`mdpi`文件夹中有一堆可绘制对象，我还需要`ldpi`文件夹中的那些。但我不想复制较小尺寸的图像文件，**我宁愿让 Android 根据需要重新调整它们**（它们看起来没那么糟糕，而且我的用户很少`ldpi`）。

我在我的应用程序中对此进行了测试，并且效果很好。但我更喜欢重新缩放的可绘制对象稍微锐利一些。无论如何我可以强制执行这种行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T11:07:06.643

不，无法控制 Android 如何调整缺失资源的大小。为了获得最佳质量的drawable，您必须自己调整它们的大小并将它们放在相应的资源文件夹（-*dpi）中。

# python - 如何在 Python 中将文本日期更改为带编号的日期？

> ID：10457863
> 
> 赞同：0
> 
> 时间：2012-05-05T00:50:17.310
> 
> 标签：python, list, date, replace

我有一个 Python 3.2.2 程序，其中有一个类似这样的列表：

```
['January 26, 1991', 'February 29, 2012', 'December 10, 2094'] 
```

如果不使用一百万个“if”语句，我如何获取列表并更改它或创建一个如下所示的新列表：

```
['01261991', '02292012', '12102094'] 
```

基本上将完整的日期格式转换为 mmddyyyy 格式？

我在这里查看了各种其他问题，但似乎找不到这样的问题。如果有人能指出我正确的方向，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:27:57.737

如果你不想使用任何`modules`你可以试试这个：

```
dates=['January 26, 1991', 'February 29, 2012', 'December 10, 2094']
def converter(x):
   x=x.split()
   dic={'January':'01','February':'02','March':'03','April':'04','May':'05','June':'06',
         'July':'07','August':'08','September':'09','October':'10','November':'11','December':'12'
        }
   month,day,year=dic[x[0]],x[1][:-1],x[2]
   if len(day)==1:
     day='0'+day

   return month+day+year

new_lis=[]

for x in dates:
   new_lis.append(converter(x))

print(new_lis)

['01261991', '02292012', '12102094'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:54:01.253

Python 至少有两个处理时间的模块。（第一个是`time`，第二个是`datetime`）。具体看看哪些是从字符串创建“时间对象”`strftime`然后`strptime`从“时间对象”创建字符串的方法。

另请注意，在 python 中，列表通常表示为 '[ item1, item2, ... ]' （方括号，而不是大括号——大括号用于字典 ...）。

最后，您最终想要的日期字符串不符合与其他 2 个相同的规则......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T01:38:10.610

对于时间操作，您通常应该查看标准库中的[时间](http://docs.python.org/library/time.html)或[日期](http://docs.python.org/library/datetime.html)时间模块。

```
>>> import time
>>> raw_string_list = ['January 26, 1991', 'February 29, 2012', 'December 10, 2094']
>>> struct_time_list = [time.strptime(raw_string, '%B %d, %Y') for raw_string in raw_string_list]
>>> final_list = [time.strftime('%m%d%Y', struct_time) for struct_time in struct_time_list]
>>> final_list
['01261991', '02292012', '12102094'] 
```

对于这种情况，我们使用`time`模块的 2 个函数：[`strptime`](http://docs.python.org/library/time.html#time.strptime)将字符串转换回 time.struct_time 并将[`strftime`](http://docs.python.org/library/time.html#time.strftime)其转换回新字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T01:43:55.357

我会使用内置的 datetime 模块，特别是[strptime 和 strftime](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)。利用[映射](http://docs.python.org/library/functions.html#map)将转换函数应用于列表的每个元素，您可以这样做：

```
#!/usr/bin/env python

from datetime import datetime

dateList = ['January 26, 1991', 'February 29, 2012', 'December 10, 2094']

def convertDate(dateString):
    dt = datetime.strptime(dateString,"%B %d, %Y")
    return dt.strftime("%m%d%Y")

print map(convertDate,dateList) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T01:26:03.700

您确实想要`strptime`and `strftime`：我认为这`p`是“过程”，而 the`f`是格式。

它们都采用格式字符串和参数来根据该字符串进行处理。这些`str*time`函数的历史可以追溯到 C 语言，python 所拥有的与原始函数非常直接相关，只是它更好。

我说它更好，因为如果你观察[`strptime`和`strftime`行为](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)，你会发现格式字符串有自己的迷你语言，而且它几乎不够直观，足以让你犯下难以发现的严重错误。（例如，我仍然需要查看分钟是大写还是小写 m。）

此外，如果您使用的是 Linux（也许是 OSX？）`man strptime`，我发现比 python 文档更有帮助。对于`strftime`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T01:29:51.927

首先，将字符串分成三个块：

```
'January 26, 1991'.split()    # results in ['January', '26,', '1991'] 
```

二、使用字典将月份名称转为两位数：

```
months = {'January':'01', 'February':'02'}
months['January']     # results in '01' 
```

第三，去掉一天中的逗号，确保它是两位数。

第四，重新组合月+日+年以获得最终结果。

第五，将其包装成一个函数并将该函数应用于列表中的每个元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-05T01:40:39.097

以下 Python 代码将完成您的任务：

```
#! /usr/bin/env python
from time import strptime, strftime
input = ['January 26, 1991', 'February 29, 2012', 'December 10, 2094']
date_list = []
output = []

for i in input:
    date_list.append(strptime(i, '%B %d, %Y'))

for dd in date_list:
    output.append(strftime('%m%d%Y', dd)) 
```

# javascript - 有没有办法从字符串加载css和javascript？

> ID：10457870
> 
> 赞同：5
> 
> 时间：2012-05-05T00:51:16.293
> 
> 标签：javascript, html, css, web

我见过很多从文件中动态加载 CSS 和 javascript 的例子。 [这是一个很好的例子](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)。但是有没有办法将 CSS 或 javascript 作为字符串加载？例如，类似：

```
var style = ".class { width:100% }"
document.loadStyle(style); 
```

或者类似的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T00:53:21.167

```
var javascript = "alert('hello');";
eval(javascript); 
```

这将从字符串加载 JavaScript，但请注意，这是非常不安全的，不推荐使用。如果恶意进程曾经干扰过您的 JavaScript 字符串，则可能会导致安全问题。

就 CSS 而言，您可以使用 jQuery 将样式标记附加到页面，如下所示：

```
$('head').append("<style>body { background-color: grey; }</style>"); 
```

或者，对于 JavaScript 纯粹主义者：

```
var s = document.createElement("style");
s.innerHTML = "body { background-color:white !important; }";
document.getElementsByTagName("head")[0].appendChild(s); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-03T12:52:46.003

另一种不使用潜在危险`eval`的方法`innerHTML`是使用 base64 编码的 URL 创建一个`link`元素：

```
function loadCSS(cssStyles) {
  const link = document.createElement('link');
  link.href = `data:text/css;base64,${btoa(cssStyles)}`;
  link.type = 'text/css';
  link.rel = 'stylesheet';
  document.getElementsByTagName('head')[0].appendChild(link);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-29T11:50:06.860

但是，此代码仅适用于包含样式标记的单个 HTML 文件

```
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style></style>
</head>
<body>
    <div class="foo"></div>
    <div class="bar"></div>
</body>
<script>
    const cssText = `.foo{
            background-color: black;
            width: 100px;
            height: 100px;
        }
        .bar{
            background-color: gray;
            width: 100px;
            height: 100px;
        }`
    document.querySelector("style").innerText = cssText;
</script>
</html>``` 
```

# python - python cgi + 用于运行批处理命令的 Web 界面？

> ID：10457871
> 
> 赞同：2
> 
> 时间：2012-05-05T00:51:45.530
> 
> 标签：python, shell, command-line, cgi

我正在将通过命令行运行的 Python 脚本移植到 Python CGI，这样我就可以使用 HTML 表单元素控制选项。如何访问命令的结果？

脚本当前运行以下命令：

*   svn更新
*   rsync 从其他本地文件夹复制图像
*   重新编译 CSS
*   svn commit *循环这些命令十几次

    ```
    #!/usr/bin/python
    print 'Content-Type: text/plain'
    print
    print 'test...'
    os.system("svn update /Users/daverau/titles/or_mm_creating_website_3e") 
    ```

如何访问此命令的控制台输出？有没有更好的方法来设置这种本地工作？

安全不是问题，这只是我自己的本地 Mac 工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T06:40:02.853

这两个很好的答案为您指出了子流程模块。

还有一些围绕这个模块构建的包装器非常值得一看：

### 1）sh模块（前PBS）

[更新] 如果您被 MS Windows 卡住，请使用 PBS，否则使用它的继任者[sh 模块](http://amoffat.github.io/sh/)。

使用 sh 模块：

```
from sh import ifconfig, ls
print(ifconfig("eth0"))
print(ls('-la')) 
```

使用 PBS，来自[https://github.com/amoffat/pbs](https://github.com/amoffat/pbs)的自述文件：

```
import pbs
print pbs.ifconfig("eth0")
print pbs.ls('-la') 
```

### 2) 铅锤

详细信息[见 http://plumbum.readthedocs.org/en/latest/](http://plumbum.readthedocs.org/en/latest/)。

README 文件中的一些示例：

基本：

```
>>> from plumbum import local, FG, BG
>>> from plumbum.cmd import ls, grep, wc, cat, head
>>> ls
LocalCommand(<LocalPath /bin/ls>)
>>> ls()
u'build.py\ndist\ndocs\nLICENSE\nplumbum\nREADME.rst\nsetup.py\ntests\ntodo.txt\n' 
```

管道：

```
>>> chain = ls["-a"] | grep["-v", "\\.py"] | wc["-l"]
>>> print chain
/bin/ls -a | /bin/grep -v '\.py' | /usr/bin/wc -l
>>> chain()
u'13\n' 
```

重定向：

```
>>> ((cat < "setup.py") | head["-n", 4])()
u'#!/usr/bin/env python\nimport os\n\ntry:\n'
>>> (ls["-a"] > "file.list")()
u''
>>> (cat["file.list"] | wc["-l"])()
u'17\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:26:41.247

如前所述，一个很好的方法是使用 subprocess 模块。便利功能将`call`允许您重新分配 STDIN/STDOUT/STDERR，但它具有潜在的风险，因为`call`自动阻塞直到完成，如果您填充 I/O 管道，这可能会产生死锁。我建议只使用`Popen`：

```
import subprocess
p = subprocess.Popen( ["svn", "update", "/Users/daverau/titles/or_mm_creating_website_3e"], subprocess.PIPE )
out = p.communicate()[0]  # 0 is STDOUT 
```

从这里您可以读取输出或随心所欲地操作它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T01:41:06.723

我认为您可以将 subprocess.call 用于此用例：

```
from subprocess import call
print 'Content-Type: text/plain'
print
print 'test...'
response = call(["svn", "update", "/Users/daverau/titles/or_mm_creating_website_3e"]) 
```

# wpf - WPF - 将图像水平绑定到 ListView

> ID：10457872
> 
> 赞同：2
> 
> 时间：2012-05-05T00:51:53.693
> 
> 标签：wpf, listview, data-binding

[我在这里](https://stackoverflow.com/questions/2570568/showing-items-as-images-in-a-wpf-listview)看到了一个类似的问题，但是按照那里的答案并没有解决同样的问题。图像仍然垂直列出。我正在从 NetFlix 绑定 oData。

![在此处输入图像描述](../Images/922d73ddb39fa80bd02441b6a9caf3ea.png)

以下是 XAML：-

```
 <Window.Resources>
          <DataTemplate x:Key="ImageCell">
            <StackPanel Orientation="Horizontal">
                <Image Source="{Binding BoxArt.MediumUrl}" Width="200" Height="200" Stretch="Fill" ToolTip="{Binding Synopsis}"/>
            </StackPanel>
        </DataTemplate>
    </Window.Resources>

 <ListView Margin="21,40,26,9" Name="lvwTitles" ItemsSource="{Binding}" 
   IsSynchronizedWithCurrentItem="True" 
 SelectionMode="Single" ItemTemplate="{StaticResource ImageCell}">        
 </ListView> 
```

以下是背后的代码：-

```
List<Title> titles = serviceAccessor.GetAllTitlesByGenre(cmbGenre.SelectedValue.ToString());
lvwTitles.ItemsSource = titles; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T01:41:41.160

您在错误的位置使用堆栈面板。数据模板中的堆栈面板只是为列表视图中的每个项目创建一个包含一个图像的堆栈面板。尝试设置项目面板..像这样：

```
<ListView>
    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal" />
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>
...
</ListView> 
```

# android - Android XML Layout：让图像视图直接停留在底部

> ID：10457874
> 
> 赞同：0
> 
> 时间：2012-05-05T00:52:50.100
> 
> 标签：android, xml, android-layout

我正在尝试创建一个应用程序，该应用程序具有一个充满按钮的滚动视图和一个底部的图像视图。唯一的问题是我无法让图像视图直接留在底部。我尝试将 layout_gravity 和重力设置为底部，但图像不在屏幕上。我不想使用重量，因为有自定义按钮，它会扭曲它们。我已经尝试过相对布局和框架布局，但都无济于事（我可能没有正确使用它们）。使用此设置，底部在顶部可见，但在底部不可见。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical" >

<ImageView
    android:layout_width="320.0dip"
    android:layout_height="50.0dip"
    android:src="@drawable/logopublic" />

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <FrameLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <Button
                    android:id="@+id/button1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/blue" />

                <Button
                    android:id="@+id/button2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:background="@drawable/red" />

                <Button
                    android:id="@+id/button3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:background="@drawable/green" />
            </FrameLayout>

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentTop="true"
                    android:layout_centerHorizontal="true"
                    android:layout_marginTop="2.5dip"
                    android:gravity="center"
                    android:text="@string/button2"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentLeft="true"
                    android:layout_marginLeft="15dp"
                    android:gravity="center"
                    android:text="@string/button1"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentRight="true"
                    android:layout_marginRight="15dp"
                    android:gravity="center"
                    android:text="@string/button3"
                    android:textStyle="bold" />
            </RelativeLayout>

    </LinearLayout>

</ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T14:20:39.983

尝试使用 a`LinearLayout`而不是 a `RelativeLayout`。

我知道你不想 user `android:gravity="bottom"`，但如果你这样做并将高度设置为`android:height="wrap_content"`它不应该扭曲你的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:03:00.270

您可以使用 relativeLayout 来包围您的 imagevire 和滚动视图。然后在 XML 中指定属性： alignparentbottom="true" 和 above="your_imageview" 用于滚动视图和 alignparentbottom="true" 和 below="your_scrollview" 用于图像视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-28T11:55:05.963

添加 add android:weightSum="10" 到顶部的线性布局。然后将 android:weight="7" 添加到 ImageView 和 android:weight=3 到 ScrollView。将这些视图的高度和宽度更改为 fill_parent

# javascript - 这段代码去哪儿了？

> ID：10457875
> 
> 赞同：-3
> 
> 时间：2012-05-05T00:53:00.727
> 
> 标签：javascript, jquery

好的，希望这将是我的最后一个问题。我的代码可以在这里很好地预览：http: [//jsfiddle.net/adeneo/PT523/3/](http://jsfiddle.net/adeneo/PT523/3/)

因此，当您输入 na 图片时，第一个更改，ma= 第二个更改，依此类推

但是当我把它放到我的网站上时，什么也没有发生。有人可以把它放在 HTML 文档/设置的形式中，这样我就可以看到它需要如何组合在一起才能正常工作和显示所有内容？太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:00:04.763

常见问题解答不鼓励“在这里为我做这个”的问题。

这是放置 js 的一个非常基本的说明。请记住，您无法访问 DOM 中的所有元素，因此您可能希望使用 jquery 的 $(document).ready() 或 window.onload 事件。

```
<html><head><title>My Page</title>
<script language="javascript" type="text/javascript">
function myFunction() {
    alert('Hello world');
}
</script>
</head>
<body>
<a href="javascript:myFunction();">Click here</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T01:02:12.720

将您的函数包装在一个`$(document).ready()`事件中，否则它将无法工作。它在 JSFiddle 中工作，因为它是在“onLoad”包装器中设置的。

# c++ - 如何从我的嵌套模板类中创建一个静态库？

> ID：10457876
> 
> 赞同：1
> 
> 时间：2012-05-05T00:53:11.567
> 
> 标签：c++, c++11

我有一些 C++ 类，我想用它们制作一个静态库。其中一个类是哈希表类，它使用其他两个来创建对象。我已经尝试在另一个问题的答案中进行另一个[小演示](https://stackoverflow.com/questions/5947067/how-to-create-a-static-library-with-g)，但是我生成的库似乎没有定义我在测试程序中编写的任何内容。我已经在单个文件中尝试了所有声明和实现，并将其分成标题/源代码，但安排似乎并不重要。如何将我的类放入静态 libHash.a？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T01:05:04.530

以对象形式分发模板效果不佳，因为编译器无法创建新的实例化。您的库的用户将只能访问库中定义的模板实例化。

这就是模板类和函数通常在头文件中实现的原因。

另见[为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:56:37.583

您可以将模板*实例化*放在库中，但模板必须位于标头中。如果您事先知道要实例化模板的哪些特化，那么您可以在头文件中声明显式实例化，然后在`.cpp`编译并放入`.a`

```
// hash.h

template<typename T> struct Hash { };
// declare explicit instantiation
extern template class Hash<int>;

// Hash.cpp

#include <Hash.h>
// define explicit instantiation
template class Hash<int>; 
```

但是对于您无法提前知道的实例化（例如`Hash<SomeOtherPersonsType>`），您无法对其进行实例化，因此无法将其放入库中。

# java - 一种在 XML 树上进行迭代并从中提取数据的简单方法？

> ID：10457882
> 
> 赞同：1
> 
> 时间：2012-05-05T00:54:51.043
> 
> 标签：java, xml, dom, sax

假设我的 XML 树中有四个级别，其中级别 3 可以有相同的子两次，即在以下 XML 中：

```
<Game>
    <Round>
        <roundNumber>1</roundNumber>
        <Door>
            <doorName>abd11</doorName>
            <Value>
                <xVal1>0</xVal1>
                <xVal2>25</xVal2>
                <pVal>0.31</pVal>
            </Value>
            <Value>
                <xVal1>25</xVal1>
                <xVal2>50</xVal2>
                <pVal>0.04</pVal>
            </Value>
            <Value>
                <xVal1>50</xVal1>
                <xVal2>75</xVal2>
                <pVal>0.19</pVal>
            </Value>
            <Value>
                <xVal1>75</xVal1>
                <xVal2>100</xVal2>
                <pVal>0.46</pVal>
            </Value>
        </Door>
        <Door>
            <doorName>vvv1133</doorName>
            <Value>
                <xVal1>60</xVal1>
                <xVal2>62</xVal2>
                <pVal>1.0</pVal>
            </Value>
        </Door>
    </Round>
    <Round>
        <roundNumber>2</roundNumber>
        <Door>
            <doorName>eee</doorName>
            <Value>
                <xVal1>0</xVal1>
                <xVal2>-25</xVal2>
                <pVal>0.31</pVal>
            </Value>
            <Value>
                <xVal1>-25</xVal1>
                <xVal2>-50</xVal2>
                <pVal>0.04</pVal>
            </Value>
            <Value>
                <xVal1>-50</xVal1>
                <xVal2>-75</xVal2>
                <pVal>0.19</pVal>
            </Value>
            <Value>
                <xVal1>-75</xVal1>
                <xVal2>-100</xVal2>
                <pVal>0.46</pVal>
            </Value>
        </Door>
        <Door>
            <doorName>cc</doorName>
            <Value>
                <xVal1>-60</xVal1>
                <xVal2>-62</xVal2>
                <pVal>0.3</pVal>
            </Value>
            <Value>
                <xVal1>-70</xVal1>
                <xVal2>-78</xVal2>
                <pVal>0.7</pVal>
            </Value>
        </Door>
    </Round>
</Game> 
```

我`Doors`每个都有两个`Round`，那么问题是，使用`Dom`or `Sax`（或 Jdom 如果有帮助）可以

我在我的树上迭代并获取每个级别的数据？

此刻我“下降”了一个级别并获得了回合，这里：

```
 DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
    Document doc = docBuilder.parse (new File("input.xml"));

    // normalize text representation
    doc.getDocumentElement ().normalize ();
    System.out.println ("Root element of the doc is " +    // would produce Game
         doc.getDocumentElement().getNodeName());

    NodeList roundNodes = doc.getElementsByTagName("Round");   // roundNodes are the Rounds 
    int totalNodes = roundNodes.getLength();                   // 2 by the example 
    System.out.println("Total number of Rounds are : " + totalNodes);   

    for (int i = 0; i < roundNodes.getLength() ; i++)

    {
        Node node = roundNodes.item(i);
        if (node.getNodeType() == Node.ELEMENT_NODE)
        {
            Element element = (Element)node;
            NodeList firstDoorList = element.getElementsByTagName("Door");
            Element firstDoorElement = (Element)firstDoorList.item(0);

            NodeList textFNList = firstDoorElement.getChildNodes();
            System.out.println("First Door : " + ((Node)textFNList.item(0)).getNodeValue().trim());
        }
    } 
```

但似乎有很多迭代代码。

有没有一种简单的方法来提取该 XML 的数据？假设我每轮有 2 个 Doors 和一些 Rounds 数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:38:44.170

像这样解析内容是我编写[SJXP](http://www.thebuzzmedia.com/software/simple-java-xml-parser-sjxp/)的原因之一——我知道，我知道“天哪，不是另一个自制的库！”，但不要绝望，它是一个基于STAX 解析器规范，因此您不会像使用 DOM 那样使用 XPath 轻松获得开销。我用手写提要解析器（RDF、RSS、ATOM）一年多来构建它，我意识到我的工作越复杂，就越相似，所以我将核心租户提炼成一个单一的，简单快速的库（开销小于 SAX 解析器——它也可以在 Android 上运行，无需添加依赖项）。

该库的要点是定义一系列规则，针对您想要的 XML 中的所有元素。鉴于您要解析的所有 XML 数据都是 CHARACTER 数据（不是标签内的属性数据），您可以定义一系列字符规则，如下所示：

```
IRule roundNumRule = new DefaultRule(Type.CHARACTER, "/Game/Round/roundNumber") {
    @Override
    public void handleParsedCharacters(XMLParser parser, String text, Object userObject) {
        System.out.println("Round Parsed: " + text);
    }
}

IRule doorNameRule = new DefaultRule(Type.CHARACTER, "/Game/Round/Door/doorName") {
    @Override
    public void handleParsedCharacters(XMLParser parser, String text, Object userObject) {
        System.out.println("Door Name: " + text);
    }
} 
```

...等等——其他规则的路径如下所示：

*   /游戏/回合/门/价值/xVal1
*   /游戏/回合/门/价值/xVal2
*   /游戏/回合/门/价值/pVal

在您拥有所有规则之后，您将像这样创建一个[XMLParser 实例](http://thebuzzmedia.com/downloads/software/sjxp/javadoc/com/thebuzzmedia/sjxp/XMLParser.html)，并为其提供您创建的所有规则：

```
XMLParser parser = new XMLParser(roundNumRule, doorNameRule, <more rules>); 
```

然后，您可以使用它来解析您的 XML，方法是通过其中一种[解析方法](http://thebuzzmedia.com/downloads/software/sjxp/javadoc/com/thebuzzmedia/sjxp/XMLParser.html#parse%28java.io.InputStream%29)向它提供表示 XML 流的任何有效*InputStream*实例。

您可以安全地反复重用 XMLParser 实例（只是不能同时在单独的线程中）。

您将需要尽可能多地跟踪您的状态，因为您知道您正在为哪个 roundNumber 加载 Door 值以及您正在使用哪个 Door 填充哪些值，但这很容易做到——只需创建简单的 Java POJO 来表示您的结构并将它们存储在 ArrayList 中，例如：

```
List<Round> roundList = new ArrayList<Round)(); 
```

假设你的“圆形”POJO 看起来像这样：

```
public class Round {
    public int number;
    public List<Door> doorList;
} 
```

你的 Door POJO 看起来像：

```
public class Door {
    public String name;
    public int xVal1;
    public int yVal2;
    public double pVal;
} 
```

顶级*roundList*将代表解析值的根，您可以将其直接传递给解析操作；这是您在*SJXP* Javadocs 中看到的用户对象。

当规则匹配时会发生什么，它将该 userObject 传递给规则，因此您将可以访问您传入的列表。

在roundNumRule 的情况下——您将创建一个新的Round POJO，为其分配roundNumber 值并将其添加到列表中。

在doorNameRule 的情况下——您将从列表中拉出最后一个Round，向它添加一个新的Door POJO 并将其名称分配给它。

等等...

我希望这会有所帮助！

# php - 使用递归方法将json转换为数组？

> ID：10457883
> 
> 赞同：4
> 
> 时间：2012-05-05T00:54:52.627
> 
> 标签：php, recursion, php-5.3, json

我正在尝试将数组内的json字符串转换为数组，

```
$config = array(
    "type"  => '{"category":"admin","page":"page"}',
    "say"     => "Hello",
    "php"   => array(
        "say"     => "no",
        "type"  => '{"category":"admin","page":"page"}',
        "gran"  =>array(
            "name" => "Hi"
        )
    )
); 
```

我的工作代码，

```
class objectify
{

    public function json_to_array($array, $recursive = true)
    {
        # if $array is not an array, let's make it array with one value of former $array.
        if (!is_array($array)) $array = array($array);

        foreach($array as $key => $value)
        {
            if($recursive === false) $array[$key] = (!empty($value) && is_string($value) && json_decode($value) != NULL) ? json_decode($value, true): $value;
                else $array[$key] = (!empty($value) && is_string($value) && json_decode($value) != NULL) ? json_decode($value, true): is_array($value) ? self::json_to_array($array) : $value;
        }

        return $array;
    }
} 
```

它可以*在没有* **递归方法**的情况下正常工作，但是当我想要执行**递归**时会中断，如您在上面的代码中所见，

```
$object = new objectify();
$config = $object->json_to_array($config);
print_r($config); 
```

错误信息，

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 2048 bytes) in C:\wamp\www\test\2012\php\set_variable.php on line 79 
```

我只想得到这个结果，

```
Array
(
    [type] => Array
        (
            [category] => admin
            [page] => page
        )
    [say] => Hello
        (
            [say] => no
            [type] => {"category":"admin","page":"page"}
            [gran] => Array
                (
                    [name] => Hi
                )

        )

) 
```

**编辑：**

```
$config = 'type={"category":"admin","page":"page"}&text_editor={"name":"mce-basic"}&parent_id=self&subtitle=true&description=true&content_1=true&script_1=true&primary_image=true';
parse_str($config,$array);
print_r($array); 
```

结果，

```
Array
(
    [type] => {"category":"admin","page":"page"}
    [text_editor] => {"name":"mce-basic"}
    [parent_id] => self
    [subtitle] => true
    [description] => true
    [content_1] => true
    [script_1] => true
    [primary_image] => true
) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T01:21:21.933

快速解决方案：

```
$full_array = array_map('json_decode', $array); 
```

如果不是所有参数都是 JSON，并且您想要实际的数组而不是`stdClass`对象，则可能必须这样做：

```
function json_decode_array($input) { 
  $from_json =  json_decode($input, true);  
  return $from_json ? $from_json : $input; 
}
$full_array = array_map('json_decode_array', $array); 
```

如果您在 JSON 之外有更多级别的嵌套数组，那么您必须进行自己的递归。试试这个版本的objectify：

```
class objectify
{
  public function json_mapper($value, $recursive = true) {
    if (!empty($value) && is_string($value) &&
        $decoded = json_decode($value, true)) {
      return $decoded;
    } elseif (is_array($value) && $recursive) {
      return array_map('objectify::json_mapper', $value);
    } else {
      return $value;
    }
  }

  // currying, anyone?
  public function json_mapper_norecurse($value) { 
     return objectify::json_mapper($value, false);
  }

  public function json_to_array($array, $recursive = true)
  {
    # if $array is not an array, let's make it array with one value of
    # former $array.
    if (!is_array($array)) {
      $array = array($array);
    }

    return array_map(
      $recursive ? 'objectify::json_mapper' 
                 : 'objectify::json_mapper_norecurse', $array);
  }
} 
```

对于您的两组样本数据，这对我来说都很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T01:25:08.437

就您的代码而言，您似乎犯了一个错误，导致它永远循环（递归部分的最后一部分）：

```
is_array($value) ? self::json_to_array($array) : $value; 
```

您将整个数组提供给递归函数，而不是测试为数组的值。

将其更改为：

```
is_array($value) ? self::json_to_array($value) : $value; 
```

应该解决。

**编辑：**似乎嵌套的三元条件导致了问题，如果你在第二个条件周围加上大括号，它可以工作：

```
 else
        {
           $array[$key] = (!empty($value) && is_string($value) && json_decode($value) != NULL)
                               ? json_decode($value, true)
                               : (is_array($value) ? self::json_to_array($value) : $value);
        } 
```

[请参阅工作示例](http://codepad.org/ioq5rgB2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T01:22:43.367

可以更轻松地完成。

```
function objectify(& $v, $k) {
    $v_decoded = json_decode($v, true);
    if ($v_decoded) { $v = $v_decoded; }
}

array_walk_recursive($config, 'objectify');
print_r($config);

Array
(
[type] => Array
    (
        [category] => admin
        [page] => page
    )

[say] => Hello
[php] => Array
    (
        [say] => no
        [type] => Array
            (
                [category] => admin
                [page] => page
            )

        [gran] => Array
            (
                [name] => Hi
            )

    )

) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-14T03:46:35.003

如果您使用 laravel 框架并且 post 参数包含数组，请在数组映射中使用 json_decode 来解码递归值。

```
 $params = array_map('json_decode', $request->all()); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-01-16T13:28:01.647

也许你可以使用简单的功能：

```
$array = json_decode(json_encode($object), true); 
```

在这里找到：[https ://gist.github.com/victorbstan/744478](https://gist.github.com/victorbstan/744478)

```
setTimeout(function () { alert("JavaScript"); }, 1000); 
```

# android - 我应该有 2 项活动，一项用于查看文本，一项用于编辑，反之亦然？

> ID：10457885
> 
> 赞同：2
> 
> 时间：2012-05-05T00:55:17.307
> 
> 标签：android, android-layout

我的应用程序中有一个部分，用户可以在其中查看一些注释（文本）或编辑注释。我正在考虑使用 EditText 和 TextViews 创建一个视图，然后根据他们想要做什么，显示适当的视图。有可能在同一活动中切换视图。

任何人有任何想法或见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:11:04.383

根据 Binyamin 的回答，请记住文档状态，

> Activity 是用户可以做的一个单一的、专注的事情。

因此，将单独的操作（例如您描述的两个操作）拆分为单独的 s 是有意义`Activity`的。以这种方式将您的 s 组织`Activity`为单独的实体将为您的应用程序提供一个简单且易于理解的逻辑工作流。它还将使您的应用程序更加模块化，并且将来易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T00:58:36.093

我会将它们分为两个活动：

1.  如果你有两个不同的活动要做，把它们放在两个不同的`Activities`.
2.  这样你就不会混淆它们的逻辑和实现。
3.  如果这些任务变得更复杂，您可以避免未来的冲突。

# php - 想在邮件代码中添加模板

> ID：10457886
> 
> 赞同：-1
> 
> 时间：2012-05-05T00:55:54.607
> 
> 标签：php, email, templates

我有一个以纯文本形式发送邮件的脚本，我想添加带有表格的邮件模板，并且 td 该脚本正在使用此代码来发送消息：

```
 $body= nl2br('Dear Family and Friends,'.$space."\n\n".' This message is from
 '.$info[0]->first_name.' '.$info[0]->last_name.' who is challenging you to join him 
        at Grow for the Cure to raise money for lung cancer research. '.$space."\n\n".'Have
         you ever wondered what it would be like to see your buddy sport a slick mustache or
         rock some big ol pork chop sideburns? Your friend has courageously provided his face 
        as a blank canvas and put YOU in charge.'.$space."\n".'Grow for the Cure and the Bonnie
     J. Addario Lung Cancer Foundation invite you to click on the link below to see how your
         friend has volunteered to raise money for lung cancer research. Check out his personal
     page where you will be able to see which look is in the lead, and make a donation to your
     favorite choice!'.$space."\n\n".'Your friend needs your support and the research community
     definitely needs your help. Lung cancer kills more people than breast, prostate, colon, 
    liver, kidney, and melanoma cancers combined. Yet, it receives a fraction of 
        the attention and funding. With your help, we are going to change that focus and make
     an impact.'.$space."\n"."All donations go to the Bonnie J. Addario Lung Cancer 
        Foundation and will be used on the front lines of lung cancer research. 
        Your donation WILL make a difference.<p style='color:blue;font-weight:bold;'>"
.$data['glink'].'</p>'.$space."\nHere's what your friend has to say:\n\n".'
     '.$comments."\n\n"."Please visit xyz.org today!\n\nGw  is an affiliate of the\n"."Bonnie\n\n"); 
```

我怎样才能在其中实现我们的 html 代码？请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:20:42.053

如果我理解你的要求正确，你可以简单地这样做：

```
$body= nl2br('Dear <b>Family</b> and <p style="color:red;">Friends</p>
,'.$space."\n\n".'This message is from '.$info[0]->first_name.' and 
more text here'); 
```

只要确保反斜杠任何嵌入的双引号或单引号，例如

```
echo "He said \"That's lame!\" or something.";
echo 'He said "That\'s lame!" or something.'; 
```

# android - 如何将 ADB 连接到 Mac 上的 Nook？

> ID：10457888
> 
> 赞同：0
> 
> 时间：2012-05-05T00:56:24.717
> 
> 标签：android, adb

`adb devices`当我将我的 Mac 连接到 Nook 时，什么也不返回。

它是否需要特殊的驱动程序或一些配置设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:03:48.983

要让 NOOK 进入开发者模式，您必须在[http://nookdeveloper.com](http://nookdeveloper.com)加入 NOOK 开发者计划，然后升级到 NOOK App Developer。开发人员模式工具将创建一个 provision.cmd 文件供您下载到您的 NOOK，然后 adb、ddms 等就可以完全访问它。

汤姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T00:59:45.060

确保您的 Nook 处于调试模式。

# javascript - 使用本地浏览器作为基于 HTML 的报表呈现引擎

> ID：10457890
> 
> 赞同：1
> 
> 时间：2012-05-05T00:56:30.490
> 
> 标签：javascript, html, xml, client, reporting

我正在编写一个客户端 .NET 应用程序，需要生成一些报告。我想使用 HTML 5、CSS3 和 JavaScript 通过执行以下操作生成显示表格数据和图形的报告：

1.  生成一个 DataSet 并将其保存为 XML。
2.  将 XML 数据嵌入到预定义的 HTML 页面中。
3.  在默认浏览器中加载 HTML 页面。
4.  使用 jQuery，解析 XML，并生成显示报告所需的 HTML 元素。
5.  没有 Web 服务器，只有我的客户端应用程序。

我在网上读到我不应该在 HTML 页面中嵌入 XML 数据，但这似乎适用于所有主要浏览器的最新版本。我的问题是：

1.  为什么我不应该这样做？
2.  如果我不应该这样做，那么我还有其他选择来使用本地浏览器的功能来生成报告吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:06:59.537

有很多东西可以在不一定支持的浏览器中工作或运行。与许多错误放置分号可能导致代码无法编译的服务器端语言不同，浏览器更加宽容。

因此，结果是，我们最终会遇到一个充满零散网站的世界，这些网站无法对抗 W3C 验证器。我们得到了这么多绳索，以至于我们有时会用它来吊死自己。

根据您的调查和研究，您认识到 XML 可以嵌入到 HTML 中。这种成功的部分原因在于 HTML 是 XML 的一个松散子集。然而，HTML 有自己的规则，由中央委员会定义，该委员会决定浏览器应如何实现其功能。

我认为你使用这种策略的最大风险是： **仅仅因为它适用于今天的浏览器并不意味着它适用于明天的浏览器。**

换句话说，因为在 HTML 中嵌入 XML 可能不在规范中，浏览器供应商不会觉得有必要继续支持这样的功能，这可能是由于过去从规范中删除的功能，或者只是由于 HTML 和 XML 的相似根源导致的怪异事故。

我不确定你的想法为什么有效，或者它是否在规范中，但我知道还有其他解决方案：

要回答您的替代问题，请查看[XSLT](https://developer.mozilla.org/en/XSLT)，它用于将 XML 文档转换为有效的 HTML。这可以在没有 Web 服务器的情况下使用，只要您的应用程序可以同时提供 XML 和 XSLT 文件。

# visual-studio-2010 - 有没有办法像 Visual C++ 2010 中的 ReSharper 一样“扩展选择”？

> ID：10457891
> 
> 赞同：1
> 
> 时间：2012-05-05T00:56:31.570
> 
> 标签：visual-studio-2010, visual-c++

我想念 ReSharper 中的“扩展选择”，它会在您按住 Ctrl+W 时自动将选择扩展到表达式、代码块、函数、类。Visual Studio 2010 能做的最好的事情是 SelectCurrentWord。我想知道 Visual C++ 中是否有此类功能的附加组件？这将简化诸如选择代码块和方法移动之类的操作。

ReSharper 的扩展选择： http: [//www.jetbrains.com/resharper/webhelp/Coding_Assistance__Extend_Shrink_Selection.html](http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Extend_Shrink_Selection.html)

# c# - 为什么实体不自动完成关系？

> ID：10457894
> 
> 赞同：0
> 
> 时间：2012-05-05T00:57:09.993
> 
> 标签：c#, entity-framework

我有三个模型：`Document`、`Section`和`Paragraph`。每一个看起来都是这样的。

```
// Document
public class Document
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Section> Sections { get; set; }
}

// Section
public class Section
{
    public int Id { get; set; }
    public int DocumentId { get; set; }
    public virtual Document Document { get; set; }
    public virtual ICollection<Paragraph> Paragraphs { get; set; }
}

// Paragraph
public class Paragraph
{
    public int Id { get; set; }
    public int SectionId { get; set; }
    public virtual Section Section { get; set; }
} 
```

实体会自动填充`Section.Paragraphs`其中的所有段落`SectionId == Id`。尽管对于`Document.Sections`. 而不是`Document.Sections`填充`DocumentId == id`,`Document.Sections`为空的所有部分。啊！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:42:30.123

添加以下注释：

```
// Document
public class Document
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }

    [InverseProperty("Document")]
    public virtual ICollection<Section> Sections { get; set; }
}

// Section
public class Section
{
    [Key]
    public int Id { get; set; }
    [ForeignKey("Document")]
    public int DocumentId { get; set; }

    public virtual Document Document { get; set; }

    [InverseProperty("Section")]
    public virtual ICollection<Paragraph> Paragraphs { get; set; }
}

// Paragraph
public class Paragraph
{
    [Key]
    public int Id { get; set; }

    [ForeignKey("Section")]
    public int SectionId { get; set; }

    public virtual Section Section { get; set; }
} 
```

我也会假设：

```
public class YourContext : DbContext
{
    public DbSet<Document> Documents {get;set;}
    public DbSet<Paragraph> Paragraphs {get;set;}
    public DbSet<Section> Sections {get;set;}
} 
```

告诉我它是否对您有任何帮助。您如何加载实体可能存在问题（您是否使用包含）。

# c++ - 将 int 转换为 char*

> ID：10457896
> 
> 赞同：-1
> 
> 时间：2012-05-05T00:58:10.910
> 
> 标签：c++, c++11, string-formatting

我无法让以下工作：

```
char* int_toChar ( int num ) {
    char* str = "0";
    if ( num != 0 ) {
        char* prefix = "";
        char* chars = " 123456789";
        int id = 0;
        for ( int i = 0; i < num; ++i ) {
            str = prefix + chars[id];
            if ( id == 9 ) {
                id = 0;
                //prefix = (char*)("") + chars[id];
            } else {
                ++id;
            }
        }
    }
    return str;
} 
```

我制作这个函数是因为我想使用 printf_s 而不是 cout，但我想要一个将 int 转换为 char* 的函数，以便我可以在 printf_s 之外的其他函数中使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:10:08.740

我的意思是尽可能以最好的方式这样做，但是这个函数有很多问题，很难说从哪里开始：-你正在循环 num，你的输入。如果您将数字 2000000000 给您的函数，我不想看到会发生什么。 -char* 不是字符数组。它是一个指针。你不能把它当作一个值来返回，因为 str 指向的内存在这个函数返回后就不再是你的了。- 在第 8 行中，您正在添加一个指向字符的指针

如果你真的想让这样的东西工作，在我看来你需要学习一些关于 C 语言、指针以及 C 如何处理字符串的知识。我只会使用 sprintf(str, "%i", num); 现在，如果你想避免 cout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T01:13:13.167

您的问题从这里开始：

```
 char* str = "0"; 
```

字符串文字不是可写内存。

在那之后它只会变得更糟。

为什么不使用`itoa`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T01:20:09.437

您将不得不分配一些内存，以某种方式将转换后的 int 放入其中，无论是静态的还是动态的。如果您分配一个静态缓冲区，那么您可以将转换后的 int 写入其中并返回一个指向它的指针，就像您发布的函数的接口显示的那样，但是您要返回的 char* 字符串只会继续包含该数字，直到下次调用该函数时。或者，您可以动态分配一个缓冲区来放置转换后的 int 字符（使用 malloc() 或 new），然后函数的调用者将负责稍后 free()'ing 或删除分配的缓冲区，否则你会有内存泄漏。如果您事先知道您的函数只会被使用有限的次数来创建固定数字字符串，特别是那些需要在您的程序生命周期中存在的，那么您不一定必须释放/删除它们。确保无论以何种方式分配它，都为可能需要创建的最大数字字符串分配足够的空间，可能基于 int 的大小（12 个字符足以表示任何正或负的 32 位整数值）。

现在，一旦分配了内存缓冲区，就需要将解码后的 int 值写入其中。您可以使用自己的自定义滚动循环来做到这一点，这肯定会涉及使用我在您的代码中没有看到的 / 和 % （除法和模数）运算符，或者最好使用已经可用的标准库函数来做给你的。一种方法是使用 sprintf(myBuffer, "%d", num)。

# facebook - Facebook 墙贴：重定向到画布应用程序并要求身份验证时丢失 url 参数 -> 移动

> ID：10457906
> 
> 赞同：1
> 
> 时间：2012-05-05T00:59:56.560
> 
> 标签：facebook, mobile, canvas

这是一个非常具体的案例，但我想看看其他人是否有同样的行为。

我有一个具有画布和移动对应物的 facebook 应用程序。如果我在用户的墙上创建了一个帖子，该帖子使用 url 参数重定向到画布页面，如果 (a) 用户在移动设备上并且它重定向到移动网页，并且 (b) 用户没有'尚未对应用程序进行身份验证。

这是一个工作示例，在浏览器中工作（进入画布）但在移动设备上失败：

```
http://m.facebook.com/apps/pachelo-dev/?postID=ag1zfnBhY2hlbG8tZGV2cgwLEgRQb3N0GLHnAgw&ref=feed&refid=8&_ft_=qid.5738844063446447813%3Amf_story_key.323188824420731 
```

唯一通过的参数是：

> 参考=饲料

有没有人遇到过类似的问题？同样，这仅发生在移动设备上以及尚未通过应用程序验证的用户。

# asp.net - 在 CSS（层叠样式表）中指定 ASP.NET 中的图像高度 px/%

> ID：10457912
> 
> 赞同：0
> 
> 时间：2012-05-05T01:02:02.670
> 
> 标签：asp.net

我想使用一系列图像作为页面边框，我的表格是矩形的。每个图像为 10 像素 x 10 像素。我有顶部、底部、侧面和角落图像。除侧面图像外，所有图像都可以正常工作，% 变量不起作用。ls 是左侧，我也有 rs，右侧，我的顶部底部和角落图像工作正常。这是我的代码片段：

我的 ASP 页面代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
<title>Home Page</title>
<link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
</head>
<body>
<div class="container">
<!-- Page Table Set Format -->
<table cellpadding="0" cellspacing="0" class="MainTable">
<tr>
<td class="LeftPageIndent" rowspan="5">
</td>
<td class="HeadSpace" colspan="3">
</td>
<td class="RightPageIndent" rowspan="5">
</td>
</tr>
<tr>
<td class="tlc">
<img src="Images/tlc.jpg" alt="top left corner" />
</td>
<td class="tp">
<img src="Images/tp.jpg" alt="top" class="BorderTop" />
</td>
<td class="trc">
<img src="Images/trc.jpg" alt="top right corner" />
</td>
</tr>
<tr>
<td>
<img src="Images/ls.jpg" alt="left side" class="LSideBdrImage" />
</td>
<td class="pageContent">
<!-- Page Form inside Main Content START -->
<form id="Form1" runat="server">
<table class="ContentTable" cellspacing="0" cellpadding="0" width="100%" border="0">
<tr>
<td>
<p align="center">
<img src="Images/Logo.jpg" alt="Logo" width="341" height="63" border="0" /></p>
</td>
</tr>
<tr>
<td>
<hr class="hrPageSeperator" color="#FF9900" />
</td>
</tr>
<tr>
<td>
<div class="page">
<div class="main">
<asp:ContentPlaceHolder ID="MainContent" runat="server" />
</div>
</div>
</td>
</tr>
<tr>
<td>
<hr class="hrPageSeperator" color="#FF9900" />
<div class="clear hideSkiplink">
<asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false"
                                IncludeStyleBlock="false" Orientation="Horizontal">
<Items>
<asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home" />
<asp:MenuItem NavigateUrl="~/About.aspx" Text="About" />
</Items>
</asp:Menu>
</div>
<hr class="hrPageSeperator" color="#FF9900" />
</td>
</tr>
</table>
</form>
<!-- Page Form inside Main Content END -->
</td>
<td>
<img src="Images/rs.jpg" alt="right side" class="RSideBdrImage" />
</td>
</tr>
<tr>
<td class="blc">
<img src="Images/blc.jpg" alt="bottom left corner" />
</td>
<td class="btm">
<img src="Images/btm.jpg" alt="bottom" class="BorderBottom" />
</td>
<td class="brc">
<img src="Images/brc.jpg" alt="bottom right corner" />
</td>
</tr>
<tr>
<td class="FootSpace" colspan="3">
</td>
</tr>
</table>
<!-- Page Table Set Format -->
</div>
</body>
</html> 
```

我的 CSS 代码：

```
/* DEFAULTS
----------------------------------------------------------*/

body
{
background: #000000;
font-size: .80em;
font-family: "Helvetica Neue" , "Lucida Grande" , "Segoe UI" , Arial, Helvetica, Verdana, sans-serif;
margin: 0px;
padding: 0px;
color: #696969;
height: 100%;
}

#container 
{ 
min-height: 100%; 
}

* html #container 
{ 
height: 100%; 
} 

a:link, a:visited
{
color: #034af3;
}

a:hover
{
color: #1d60ff;
text-decoration: none;
}

a:active
{
color: #034af3;
}

p
{
margin-bottom: 10px;
line-height: 1.6em;
}

/* Page Border Setup...
----------------------------------------------------------*/
.MainTable
{
width:100%;
height:100%;
}

.HeadSpace
{
height:4px;
}

.LeftPageIndent
{
width: 12%;
}

.tlc
{
width:10px;
height:10px;
border:0px;
}

.tp
{
height:10px;
border:0px;
}    

.trc
{
width:10px;
height:10px;
border:0px;
}

.ContentTable
{
width:100%;
height:100%;
border:0px;
}

.blc
{
width:10px;
height:10px;
border:0px;
}

.btm
{
height:10px;
border:0px;
}

.brc
{
width:10px;
height:10px;
border:0px;
}

.RightPageIndent
{
width: 12%;
}

.FootSpace
{
height:2px;
}

/* Boarder Image Setup...
-----------------------------------------------*/

.BorderTop
{
width: 100%;
height: 10px;
border: "0";
}

.LSideBdrImage
{
width: 10px;
height: 100%;
border: "0";
}

.RSideBdrImage
{
width: 10px;
height: 100%;
border: "0";
}

.BorderBottom
{
width: 100%;
height: 10px;
border: "0";
}

/* HEADINGS   
----------------------------------------------------------*/

.hrPageSeperator
{
color:#FF9900;
}

h1, h2, h3, h4, h5, h6
{
font-size: 1.5em;
color: #666666;
font-variant: small-caps;
text-transform: none;
font-weight: 200;
margin-bottom: 0px;
}

h1
{
font-size: 1.6em;
padding-bottom: 0px;
margin-bottom: 0px;
}

/* PRIMARY LAYOUT ELEMENTS   
----------------------------------------------------------*/

.page
{
width: 100%;
background-color: #000000;
margin: 1px auto 0px auto; /* border: 1px solid #496077; */
}

.main
{
padding: 0px 12px;
margin: 12px 8px 8px 0px;
min-height: 100%;
width: 100%;
} 
```

我的问题是，我可以以 px 为单位设置图像高度，但不能以 % 为单位设置图像高度。我已经对此进行了研究，并且有很多信息，但不足以以我的方式查看错误。有人可以帮助我吗，我会非常感谢它。

提前致谢。

克里斯

PS 每个图像保持 10px x 10px 并且不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:24:54.277

HTML 通常使用整个正文的现有高度来调整正文中元素的大小。因此，即使您的桌子高度和图像设置为 100%，这 100% 仍受您的体型限制。

要解决此问题，请尝试将您的身高设置为 100%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:57:54.737

MyGuruG 是在正确的轨道上，这是我必须做的：

ASP 代码：

```
<!doctype HTML public "-//W3C//DTD HTML 4.0 Transitional//EN" >
<!-- <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "w3.org/TR/html4/strict.dtd"> -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
<title>Home</title>
<link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
</head>
<body>
<!-- Set Page Format Table - START -->
<asp:Table CssClass="MainTable" runat="server" CellPadding="0" CellSpacing="0">
<asp:TableRow CssClass="HeadSpace">
<asp:TableCell ColumnSpan="6">
</asp:TableCell>
</asp:TableRow>
<asp:TableRow>
<asp:TableCell RowSpan="3">
<asp:Image ImageUrl="Images/Border/indent.jpg" runat="server"  CssClass="LeftPageIndent" AlternateText="Border Indent" />
</asp:TableCell>
<asp:TableCell>
<asp:Image ImageUrl="Images/Border/tlc.jpg" runat="server" AlternateText="Top Left Border Corner" Width="10px" Height="10px" />
</asp:TableCell>
<asp:TableCell ColumnSpan="2">
<asp:Image ImageUrl="Images/Border/tp.jpg" runat="server" AlternateText="Top Border" CssClass="BorderTop"/>
</asp:TableCell>
<asp:TableCell>
<asp:Image ImageUrl="Images/Border/trc.jpg" runat="server" AlternateText="Top Right Border Corner" Width="10px" Height="10px" />
</asp:TableCell>
<asp:TableCell RowSpan="3">
<asp:Image ID="Image1" ImageUrl="Images/Border/indent.jpg" runat="server" CssClass="RightPageIndent" AlternateText="Border Indent" />
</asp:TableCell>
</asp:TableRow>
<asp:TableRow>
<asp:TableCell>
<asp:Image ImageUrl="Images/Border/ls.jpg" runat="server" AlternateText="Left Border Side" Height="100%" Width="10" />
</asp:TableCell>
<asp:TableCell ColumnSpan="2">
<form id="Form1" runat="server">
<div class="page">
<p align="center">
<img src="Images/Border/logo.jpg" alt="Logo" border="0" /></p>
<div class="main">
<asp:ContentPlaceHolder ID="MainContent" runat="server" />
</div>
<p class="FootSpaceText">Copyright © All Rights Reserved</p>
</div>
</form>
</asp:TableCell>
<asp:TableCell>
<asp:Image ImageUrl="Images/Border/rs.jpg" runat="server" AlternateText="Right Border Side" Height="100%" Width="10" />
</asp:TableCell>
</asp:TableRow>
<asp:TableRow>
<asp:TableCell CssClass="blc">
<asp:Image ImageUrl="Images/Border/blc.jpg" runat="server" AlternateText="Bottom Left Border Corner" />
</asp:TableCell>
<asp:TableCell CssClass="btm" ColumnSpan="2">
<asp:Image ImageUrl="Images/Border/btm.jpg" runat="server" AlternateText="Bottom Border" Width="100%" Height="10px" />
</asp:TableCell>
<asp:TableCell CssClass="brc">
<asp:Image ImageUrl="Images/Border/brc.jpg" runat="server" AlternateText="Bottom Right Border Corner" Width="10px" Height="10px" />
</asp:TableCell>
</asp:TableRow>
<asp:TableRow CssClass="FootSpace">
<asp:TableCell ColumnSpan="6">
</asp:TableCell>
</asp:TableRow>
</asp:Table>
<!-- Set Page Format Table - END -->
</body>
</html> 
```

我的 CSS 代码：

```
/* DEFAULTS
----------------------------------------------------------*/

body
{
background: #000000;
font-size: .80em;
font-family: "Helvetica Neue" , "Lucida Grande" , "Segoe UI" , Arial, Helvetica, Verdana, sans-serif;
margin: 0px;
padding: 0px;
color: #696969;
}

a:link, a:visited
{
color: #034af3;
}

a:hover
{
color: #1d60ff;
text-decoration: none;
}

a:active
{
color: #034af3;
}

.FootSpaceText
{
text-align: center;
}

/* Page Border Setup...
----------------------------------------------------------*/

.MainTable
{
width:100%;
height:100%;
}

.HeadSpace
{
height: 17px;
}

.LeftPageIndent
{
width: 140;
}

.RightPageIndent
{
width: 140;
}

.tlc
{
width: 10px;
height: 10px;
border: 0px;
}

.tp
{
width: 100%;
height: 10px;
border: 0px;
}

.trc
{
width: 10px;
height: 10px;
border: 0px;
}

.blc
{
width: 10px;
height: 10px;
border: 0px;
}

.btm
{
width: 100%;
height: 10px;
border: 0px;
}

.brc
{
width: 10px;
height: 10px;
border: 0px;
}

.FootSpace
{
height: 17px;
}

/* Boarder Image Setup...
-----------------------------------------------*/

.BorderTop
{
width: 100%;
height: 10;
border: 0;
}

LSideBdrImage
{
width: 10;
height: 100%;
}

RSideBdrImage
{
width: 10;
height: 100%;
}

.BorderBottom
{
width: 100%;
height: 10;
border: 0;
}

/* HEADINGS   
----------------------------------------------------------*/

p
{
margin-bottom: 10px;
line-height: 1.6em;
}

h1, h2, h3, h4, h5, h6
{
font-size: 1.5em;
color: #666666;
font-variant: small-caps;
text-transform: none;
font-weight: 200;
margin-bottom: 0px;
}

h1
{
/*-- Page Header Heading --*/
font-size: x-large;
padding-bottom: 0px;
margin-bottom: 0px;
color: #CCFF33;
}

h2
{
/*-- Page Header Heading 2 --*/
font-weight: bold;
color: #FF9900;
}

h3
{
/*-- Bold Red Serious Text --*/
font-weight: bold;
color: Red;
}

h4
{
/*-- Page Sub-Heading --*/
font-size: 1em;
padding-top: 1px;
padding-bottom: 1px;
margin-bottom: 0px;
font-variant: normal;
color: #FF9900;
}

h5
{
/*-- Page Heading 3 --*/
font-size: 2.2em;
font-weight: bold;
color: #FF9900;
}

/* PRIMARY PAGE CONTENT LAYOUT ELEMENTS   
----------------------------------------------------------*/

.page
{
width: 100%;
background-color: #000000;
margin: 1px auto 0px auto; 
}

.main
{
padding: 0px 12px;
margin: 12px 8px 8px 0px;
min-height: 100%;
width: 100%;
}

/* PRIMARY PAGE CONTENT TABLES  
----------------------------------------------------------*/

.MainContent
{
width:100%;
}

.CellBorder
{
/* -- border:1px solid #333333; --*/
border-bottom-style: solid;
border-bottom-width: 1px;
border-bottom-color: #333333;
border-left-style: solid;
border-left-width: 1px;
border-left-color: #333333;
border-right-style: solid;
border-right-width: 1px;
border-right-color: #333333;
border-top-style: solid;
border-top-width: 1px;
border-top-color: #333333;
} 
```

使这项工作的代码如下。

第一的：

```
<!doctype HTML public "-//W3C//DTD HTML 4.0 Transitional//EN" > 
```

我对此感到目瞪口呆。也许有人可以解释为什么需要更改“doctype”？当然，所有页面都有一套标准的基本要求，而高度会是其中的一部分吗？

第二：

```
<asp:Table CssClass="MainTable" runat="server" CellPadding="0" CellSpacing="0">
<!-- Table Content Here -->
</asp:Table> 
```

我尝试了标准的 HTML 表格，但这对我不起作用，所以我不得不使用 ASP:Table 标签。

第三：

```
.MainTable
{
width:100%;
height:100%;
} 
```

ASP:Table 需要设置其高度和宽度，否则将无法正常工作。

第四：

```
<asp:Image ImageUrl="Images/Border/ls.jpg" runat="server" AlternateText="Left Border Side" Height="100%" Width="10" /> 
```

我必须在 ASP:Image 标签中设置高度和宽度。在 CSS 中设置高度和宽度对我不起作用。

此外，我不得不使用变通方法来设置表格缩进：

```
<asp:TableCell RowSpan="3">
<asp:Image ID="Image1" ImageUrl="Images/Border/indent.jpg" runat="server" CssClass="RightPageIndent" AlternateText="Border Indent" />
</asp:TableCell> 
```

我设置了 ASP:TableCell Width 属性，但只有左侧有效。右侧根本不起作用。

我想这就是全部，你知道要弄清楚这个愚蠢的问题到底是什么是一个真正的痛苦。我不敢相信做这个简单的任务这么难。我必须将这个答案交给 MyGuruG，因为这确实是基本的整体问题，谢谢 MyGuruG。

# vba - 等到 Workbook.Close 完成

> ID：10457915
> 
> 赞同：2
> 
> 时间：2012-05-05T01:02:30.740
> 
> 标签：vba, ms-access

使用 Access 2010、WinXP。我正在尝试遍历文件夹集合，从每个文件夹中的每个 Excel 文件中收集值以添加到我的数据库中的表中。问题是，即使我每次都关闭工作簿，它也一定不能足够快地关闭，因为如果相同的文件名出现在两个连续的文件夹中，我会收到一条错误消息：

```
Run-time error '1004':
A document with the name 'someWorkbook.xls' is already open. 
```

这是我的代码：

```
sub traverse()

Dim fso As filesystemobject
Dim fObj As File
Dim fldObj As Folder
Dim fCol As Files
Dim xlApp As Excel.Application
dim xlBk as Excel.Workbook

Set xlApp = New Excel.Application
Set fso = New filesystemobject
For Each fldObj In fso.GetFolder("c:\basePath").SubFolders
    Set fCol = fldObj.Files
    For Each fObj In fCol
        If UCase(Left(fso.GetExtensionName(fObj.Name), 3)) = "XLS" Then
           Set xlBk=xlApp.workbooks.open(fObj.path)
           getData(xlBk)
           xlBk.close false
           DoEvents
        End If
    Next
Next

End Sub 
```

我尝试退出 Excel 实例并在循环中启动一个新实例`For Each fObj`，如下所示：

```
set xlApp=new Excel.Application
Set xlBk=xlApp.workbooks.open(fObj.path)
getData(xlBk)
xlBk.close false
DoEvents
xlApp.quit
DoEvents 
```

但这只会打开一大堆 Excel 实例而没有退出它们，因为当它崩溃时，我检查了任务管理器并找到了大约 30 个 Excel 实例。

我还能做些什么来保证我的代码在 Excel 操作触发`.Close`或`.Quit`完成之前不会继续执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:22:36.353

@sigil 在评论中回答了他自己的问题。

> 我发现了问题。这是由于我没有发布的一段代码；对 workbooks.open 和 workbook.close 的调用实际上发生在 getData 内部，其中有一个 if-then 子句退出 getData 而不关闭工作簿。我在退出函数之前添加了一个 workbook.close，它现在表现正常。很抱歉没有按原样发布代码，我认为如果我简化它会更容易获得帮助。下次我会知道的更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-08T13:30:02.223

我找到了几个“等待关闭”的解决方案，最后得到了以下代码，这最后但并非最不重要，因为与 Wait Sleep 相比，它是独立于应用程序的，因此代码可以很容易地更改为 word 文档：

```
Private Sub WaitForClose(ByVal sWbk As String, _
                Optional ByVal oApp As Excel.Application = Nothing)
' -----------------------------------------------------------------
' Precondition: oApp when provided the (or there is an) Excel
' instance with the Workbook sWbk open.
' -----------------------------------------------------------------
Dim bOpen   As Boolean
Dim xlWbk     As Excel.Workbook

   If oApp Is Nothing Then Set oApp = GetObject(sWbk).Application
   Do
      If oApp.Workbooks.Count = 0 Then Exit Sub
      bOpen = False
      For Each xlWbk In oApp.Workbooks
         If xlWbk.FullName = sWbk Then bOpen = True
      Next
      If bOpen Then Sleep 1000
   Loop While bOpen

End Sub 
```

# ios - NSURLConnection - 可以使用 3G 而不是 3GS 将图像上传到服务器

> ID：10457916
> 
> 赞同：0
> 
> 时间：2012-05-05T01:02:37.103
> 
> 标签：ios, xcode, nsurlconnection

iOS 新手，正在尝试将图像上传到我的服务器。

我在网上找到了一个“教程”，它使用 iPhone 3G 而不是 3GS 可以正常工作。两者都运行 4.2.1。

`Upload`当用户从库中选择图像或获取新图像后单击按钮时，将调用此方法：

```
 - (IBAction)pushUpload {
NSData *imageData = UIImageJPEGRepresentation(imageView.image, 0.9);

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:myURL]];
[request setHTTPMethod:@"POST"];

NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];

NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"userfile\"; filename=\".jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

NSLog(@"ReturnData: %@", returnData); 
```

}

`myURL`是一个带有 url 的 NSString 到服务器端 php 脚本。它来自 FlipsideViewController xib 上的文本字段。

正如我所说，这适用于 3G 但不适用于 3GS。`returnData`当我在 3G 上运行时登录时，我`<>`在 3GS 上运行时得到`(null)`. 我还不确定是什么`<>`，但它显然比`(null)`.

“工作正常”是指图像被上传到服务器，然后处理和保存。

只要我在这里，将图像上传到服务器的更好方法是什么？

谢谢您的帮助，

标记

# iphone - UIView 控件在动画完成之前不绘制

> ID：10457919
> 
> 赞同：0
> 
> 时间：2012-05-05T01:03:22.253
> 
> 标签：iphone, ios, xcode, animation, uiview

我有一个相当简单的应用程序，有两个 UIViewControllers。一是主视图，二是选项页面。当我从一个动画到另一个动画时，UISwitches 和其他控件在旋转完成之前不会完全绘制。如果我不使用动画，那么就没有问题 - 一切都正确显示。这是代码：

```
[UIView beginAnimations:@"View Flip" context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

if (self.optionsViewController.view.superview == nil)
{
    if (self.optionsViewController == nil)
    {
        self.optionsViewController = [[OptionsViewController alloc] initWithNibName:nil bundle:nil];
    }
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:YES];

    [self.view insertSubview:self.optionsViewController.view atIndex:127];
}

[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T02:42:11.317

您是否尝试将缓存设置为否？缓存将视图保存为光栅化表单，这可能发生在 OptionsViewController 的子视图的绘制中间。

您还应该考虑在 iOS5 中使用更新更好的动画方法。

```
+ (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^)(BOOL finished))completion 
```

# html - haml 文件中的 yaml 前端问题

> ID：10457920
> 
> 赞同：5
> 
> 时间：2012-05-05T01:03:32.200
> 
> 标签：html, haml, yaml, jekyll, jekyll-extensions

我只尝试使用[haml-jekyll-extension](https://github.com/codegram/haml-jekyll-extension)我不明白如何包含 yaml 前端问题？我有以下内容：

```
---
user: hello
---
!!!
%html
  %title RudyIndustries
  %body
    %h1 Hello World! {{ page.user }} 
```

但它最终被编译成以下html：

```
user: hello
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <title>RudyIndustries</title>
  <body>
    <h1>Hello World! {{ page.user }}</h1>
  </body>
</html> 
```

如何标记 yaml 前端，使其正确编译成 html？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:59:42.687

使用反斜杠：

哈姆文件：

```
\---
user: hello
\---
%html
  %title RudyIndustries
  %body
    %h1 Hello World! {{ page.user }} 
```

编译成以下html：

```
---
user: hello
---
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <title>RudyIndustries</title>
  <body>
    <h1>Hello World! {{ page.user }}</h1>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-08T07:17:23.567

您可以将[Haml 注释](http://haml.info/docs/yardoc/file.REFERENCE.html#haml-comments--)用于前面的内容。这将允许您在 YAML 中使用嵌套，并且不会在您的 html 中重现前面的内容。以下haml文件

```
-#
  ---
  user: hello
  ---
!!!
%html
  %title RudyIndustries
  %body
    %h1 Hello World! {{ page.user }} 
```

将生成以下 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <title>RudyIndustries</title>
  <body>
   <h1>Hello World! {{ page.user }}</h1>
  </body>
</html> 
```

# workflow - Flash cs6 和 Flash Builder，工作流程

> ID：10457923
> 
> 赞同：4
> 
> 时间：2012-05-05T01:04:21.507
> 
> 标签：workflow, flash-builder, flash-cs5.5

我希望我能就这个话题提出更具体的问题，但我真正想要的是鸟瞰图——一篇博客文章、来自 Adob​​e 的一些东西、文档，甚至是一本概述方法的书，因为我有一个很难找到全面的东西。

多年来，我主要在一个使用 Flash Pro 的 2 人团队中进行开发 - 一名艺术家和开发人员。我也曾在更大的团队中工作，使用相同的工作流程：

*   使用 Flash Pro 编辑器编写为类文件的 AS 代码，时间轴上的代码最少（仅在时间轴到达某个帧时停止并偶尔调用函数）。
*   图书馆资产在需要的地方链接到 AS3 类
*   资产放置在主舞台和主时间线上，为设计师提供最大的便利。
*   通过使用 Flash Pro 导出到 swf 来发布和构建应用程序
*   除了告诉对方我们是否要更改 fla 之外，没有任何源代码控制。

我们的商店即将引进更多的程序员来开发一系列 Flash 浏览器游戏，我认为是时候将这个工作流程变为现实了。我们希望有适合艺术家和编码人员的东西（尽量减少来自任一阵营的抱怨），以及对源代码控制的 git 支持。

最后，我的问题：

*   目前大多数开发者是如何创作游戏的？我读过一种流行的方法是使用 Flash pro 在 fla 中创建艺术资产，将它们链接到类并导出到 SWC。然后在嵌入资产的 Flash Builder 中开发代码。
*   如果我采用 SWC 方法，是否所有代码都从 MovieClip 资产的时间线中剥离？
*   我知道 Flash Builder 可以选择创建一个“Flash 专业”项目，该项目将两者结合起来，看起来很理想，但在 Builder 和 Pro 之间来回切换似乎很容易崩溃。有人可靠地使用这种方法吗？
*   CS6 是否会给我们带来优于 CS5.5 的任何优势，使其对开发人员更加友好；IE。代码完成等
*   有没有办法设置工作流程，以便艺术家可以进行更改，然后从 Flash Pro 构建/运行游戏，开发人员可以从 Flash Builder 中完成 - 还是每个人都需要运行 Flash Builder？
*   是否有任何优秀的 3rd 方工具可以提供代码完成和比 flash IDE 更好的开发环境（作为 Flash Builder 的替代品）？
*   在团队工作或一般 Flash 开发人员中，人们是否将 Flash Builder 视为“必备”？

感谢您回答这些问题的任何部分，或者只是简单地分享您的经验、意见和个人偏好。在这一点上，任何知识都会有很大帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T02:09:42.327

这是一个问题的很多问题。我将尝试在某种程度上涵盖工作流的主要主题。

您使用带有 swc:s 链接的纯 ActionScript 项目描述的方法可能是最常见的方法（至少在涉及更复杂的项目时），因为您希望尽可能地将代码与内容分开。通常我与一位艺术家合作，因此我们在功能设计上同步，然后我定义场景对象的结构（即容器剪辑、带有 XYZ 子剪辑、命名、链接和所有内容）以使其适合当前框架或新的支持代码。

您不希望在 flash pro 时间轴中出现任何代码，而是希望将其全部放在 ActionScript 文件中。理想情况下，作为一名程序员，您不必进入 Flash 场景项目。但是，实际上您可能会这样做。我通常会尝试将其保留在我自己的占位符场景中，这样我就不会用测试和占位符污染生产文件。您也真的不希望几个人同时在同一个场景中进行编辑。一种方法是分成几个不同的场景项目。如果你做一个纸牌游戏，你可以有这样的东西：card.swc、mainScene.swc、对手.swc。如果您与多个艺术家合作，这也允许一些并发性。

将 flash pro 文件保留为 xfl 格式使其对源代码控制更加友好，您实际上可以合并同一场景的两个版本，但有时可能会有点复杂。我通常通过制作快速的功能占位符图形来解决这个问题，这些图形稍后可以被艺术家替换（或从代码中渲染图形）。

说到 IDE:s，我认为最受欢迎的是 FlashDevelop、Flash Builder 和 IntelliJ IDEA（我个人最喜欢 Flash Builder）。从一个开始，并在适当的时候尝试其他一些。确保您整天使用的功能非常好。但是，如果您之前只使用过 flash 专业环境，那么任何事情都会极大地提高生产力。

我首先优先考虑搜索、重构和易于遵循程序流程，这简化了调试和快速进入其他人的代码。但这一切都归结为找到一种以您可以调整的频率运行的工具。

我希望这回答了你的一些想法和问题。不要犹豫，跟进更多。

# git - 为什么我必须在提交之前添加被跟踪的文件？

> ID：10457924
> 
> 赞同：1
> 
> 时间：2012-05-05T01:04:25.140
> 
> 标签：git, github, gitignore

我是 git 的源代码控制新手。不过，我想确保自己理解所有内容，并且很早就遇到了一些看起来很奇怪的东西。

这就是我正在做的事情：

1.  在 GitHub 上创建一个新的存储库。它提供了制作一个“标准”C# .gitignore 文件，这听起来很棒，所以我说是的。
2.  我看到存储库中同时创建了自述文件和 .gitignore。
3.  我使用克隆这个 repo 到我的机器上`git clone [repo location] [local folder]`
4.  我编辑 .gitignore 文件以添加一些其他被忽略的文件和文件夹。
5.  我输入`git commit`，这会产生一条消息，上面写着“更改未暂存以进行提交”，但将 .gitignore 列为正在修改。

所以最终我添加了它，提交并推送回原点，这在 GitHub 上显示了我的更改。所以一切都很好。

这让我有点困惑。如果 .gitignore 没有被跟踪，它到底是如何被使用的`git clone`？为什么我必须在它允许我提交更改之前手动添加它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T01:18:24.267

这是 git 查看存储库的方式：

```
repository  ---  staging area  ---  working directory 
```

`fetch`在存储库中，您可以在所有本地分支或远程分支中获得所有已提交的内容。在工作目录中，您拥有所有文件，这些文件是从某个提交中签出的，这些文件可能已被修改。暂存区是您添加要提交但尚未提交的文件的地方。这是因为在 git 中您可以选择要提交的内容（与 svn 不同，例如您提交已修改的内容）。

我强烈建议阅读[这篇文章](http://git-scm.com/2011/07/11/reset.html)，虽然它的重点是`git reset`，但它很好地概述了 git 的工作原理。

这是它的一张小图：

```
repository  ---  staging area  ---  working directory
    |                  |                    |
    |                  |                    |
    |              Check out                |
    |-------------------------------------->|
    |                  |                    |
    |                  |         add        |
    |                  |<-------------------|
    |                  |                    |
    |      commit      |                    |
    |<-----------------|                    | 
```

结帐非常明显。后两个意味着您有选择地将文件添加到暂存区域，然后提交它们。例如：

```
$ touch file1 file2 file3 file4  # modify files
$ git add file1
$ git add file2
$ git commit 
```

只提交`file1`，`file2`即使`file3`和`file4`也被修改。

有时，你想要的只是提交你所拥有的一切。它有一个快捷方式：

```
$ touch file1 file2 file3 file4  # modify files
$ git commit -a 
```

`git commit`给定`-a`选项会自动添加所有修改的文件以提交。

您甚至可以暂存部分文件，`git add -p`这基本上会向您显示提交补丁的各个部分，并让您选择要暂存的更改和不暂存的更改。稍后，`git commit`您可以提交任何已上演的内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T01:10:50.327

这不是特定于`.gitignore`. `git add`除非您使用`git commit -a`自动提交所有更改，否则您始终必须先使用 using 暂存修改的文件，然后才能提交它们。

[Git 书中有关跟踪和暂存的更多信息。](http://git-scm.com/book/ch2-2.html)

# java - 使用 StringTemplate 的参数调用 Java 函数？

> ID：10457927
> 
> 赞同：4
> 
> 时间：2012-05-05T01:04:44.750
> 
> 标签：java, stringtemplate, stringtemplate-4

StringTemplate 允许程序员通过 getter（一个没有参数的函数）获取数据。

我想知道是否可以使用字符串模板中的参数调用 Java 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-06T07:40:29.613

通过滥用字典有一种解决方法。这是一个实现“功能”以限制列表中项目数的示例（[github 上的问题](https://github.com/antlr/stringtemplate4/issues/197)）。

在您的代码中添加字典：

`group.defineDictionary("max", new MaxListItemsLimiter());`

用法（在此示例中，数组中的第一项是最大项数）：

`<max.(["50",myObject.items]):{msg|<msg.something>}>`

```
final class MaxListItemsLimiter extends AbstractMap<String, Object> {

    @Override
    public Object get(Object key) {
        List items = (List) key;
        if (!items.isEmpty()) {
            //First item is max. count
            Integer limit = NumberUtils.toInt(items.get(0).toString(), -1); //use Integer.parseInt
            if (limit != -1) {
                return items.subList(1, Math.min(items.size(), limit + 1));
            } else {
                throw new AssertionError("First parameter in max must be number");
            }
        } else {
            return super.get(key);
        }
    }

    @Override
    public Set<Map.Entry<String, Object>> entrySet() {
        return Collections.emptySet();
    }

    @Override
    public boolean containsKey(Object key) {
        if (key instanceof List) {
            return true;
        } else {
            throw new AssertionError("You can use max only on Lists.");
        }
    }
} 
```

# orm - Kohana ORM 显示信息

> ID：10457933
> 
> 赞同：0
> 
> 时间：2012-05-05T01:06:26.777
> 
> 标签：orm, kohana

我正在尝试学习如何显示两个表格中的信息。

表：

```
categories {category_id, category_title}
forums {forum_id, forum_title}
categories_forums {id_category, id_forum} 
```

楷模：

```
class Model_Forum extends ORM {

protected $_primary_key = 'forum_id';

protected $_belongs_to = array(
    'categories'=> array(
        'model' => 'category',                
        'through' => 'categories_forums',    
        'far_key' => 'id_category',          
        'foreign_key' => 'id_forum'   
    ),
  );
}

class Model_Category extends ORM {

protected $_primary_key = 'category_id';

protected $_has_many = array(
    'forums'=> array(
        'model' => 'forum',                
        'through' => 'categories_forums',    
        'far_key' => 'id_forum',         
        'foreign_key' => 'id_category'    
    ),
  );
} 
```

我不确定如何显示。

到目前为止，我有以下内容：

```
$categories = ORM::factory('category');

$forums = $categories->forums->find_all(); 
```

我不知道如何显示 category_id、category_title、forum_id、forum_title。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:05:12.700

您可以使用 foreach 循环，如下所示：

```
$categories = ORM::factory('category');
foreach ($categories->find_all() as $category){
  echo $category->category_title, ' ', $category->id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:51:50.340

以下似乎有效：

```
$categories = ORM::factory('category')->find_all();

$view = new View('default/index');

$view->categories = $categories;

$this->response->body($view);

foreach ($categories as $category) :
echo $category->category_title;
echo $category->category_id;
foreach ($category->forums->find_all() as $forum) :
echo $forum->forum_title;
echo $forum->forum_id;
endforeach;
endforeach; 
```

# delphi - 如何使用Delphi正确执行.bat文件

> ID：10457934
> 
> 赞同：5
> 
> 时间：2012-05-05T01:06:27.437
> 
> 标签：delphi, batch-file

我正在运行来自 delphi(2010) 的 .bat 文件。

```
procedure TForm1.Button2Click(Sender: TObject);
var sCmd: String;
 Begin
sCmd := Pwidechar('b4a_c2dm.bat' +' ' +'send ' + Trim(Edit1.Text)+' '  + Trim(edit2.Text ));
ShellExecute(0, 'open', 'b4a_c2dm.bat', PChar(sCmd), nil, SW_SHOWMAXIMIZED);
   end; 
```

这将打开 cmd.exe 并在 cmd.exe 中传递正确的字符串，但是

.bat 文件中的某些行 (java -cp b4a_c2dm.jar anywheresoftware.b4a.c2dm.C2DM %*) 显示在 cmd.exe 窗口中并且不让 .bat 文件完成其工作。

有人可以帮我弄这个吗。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-05T04:40:31.933

为了执行一个批处理文件，要调用的程序是'cmd'，它的参数应该是批处理文件的名称。

关于你的程序，

```
ShellExecute (application.handle, 'open', 'cmd', PChar(sCmd), nil, SW_MAXIMIZE) 
```

# google-maps-api-3 - 放大和缩小后在地图上显示的计数标记

> ID：10457942
> 
> 赞同：0
> 
> 时间：2012-05-05T01:07:46.463
> 
> 标签：google-maps-api-3

我正在使用 google-maps-utility-library-v3。我正在尝试放大和缩小，如果点不再出现在屏幕上，我想看到计数 0。但它不起作用。如果我注释掉 mgr.addMarkers(markers,5); 它有效....但它始终为 0，因为没有制造商由经理管理。有人能告诉我为什么吗？

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript"
  src="http://maps.googleapis.com/maps/api/js?key=??????????????&sensor=false">
</script>
<script type="text/javascript" src="downloadxml.js"></script>
<script src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/src/markermanager.js"></script>
<script type="text/javascript">

  var map = null;
  function initialize() {

    var myOptions = {
        zoom: 8,
        center: new google.maps.LatLng(42.35428, -71.05525),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map(document.getElementById('map'), myOptions);

    //hard code a marker
    var lat = 42.35428;
    var lng = -71.05525;
    var point = new google.maps.LatLng(lat,lng);
    var html = "I am a hard-coded dot";
    var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: "http://www.google.com/mapfiles/arrow.png",
        shadow: "http://www.google.com/mapfiles/arrowshadow.png"
    });
    var markers = [];
    markers.push(marker);
    var mgr = new MarkerManager(map);
    mgr.addMarkers(markers,5);
    mgr.refresh();

    google.maps.event.addListener(map, 'zoom_changed', function() {
        var zoomLevel = map.getZoom();
        var count = mgr.getMarkerCount(zoomLevel);
        document.getElementById("Listing").innerHTML += count + "<BR>";
    });
  }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:47:29.527

您似乎在完全初始化之前使用 MarkerManager。这是用于解决此问题的代码的更新部分：

```
var markers = [];
markers.push(marker);
var mgr = new MarkerManager(map);
google.maps.event.addListenerOnce(mgr, 'loaded', function(){
    mgr.addMarkers(markers, 5);
    mgr.refresh();
}); 
```

请参阅此示例作为参考：http: [//google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/docs/examples.html)

# winapi - 对 GetFileAttributesW() 的这个（未记录的？）调用是什么？

> ID：10457943
> 
> 赞同：0
> 
> 时间：2012-05-05T01:07:53.017
> 
> 标签：winapi, visual-c++

当我打开`WinBase.inl`时，我看到：

```
ISOLATION_AWARE_INLINE FARPROC IsolationAwarePrivatenCv
IsolationAwarePrivatezltRgCebPnQQeRff(
    __in IsolationAwarePrivateCpBAFGnAG_zBqHyr_vAsB c,
    __inout IsolationAwarePrivateCzHGnoyr_zBqHyr_vAsB m,
    __in PCSTR ProcName
    )
{
    FARPROC Proc = NULL;
    HMODULE hModule;
#ifdef _M_IX86
    static HMODULE s_moduleUnicows;
    static BOOL s_fUnicowsInitialized;

    /*
       get unicows.dll loaded on-demand
    */
    if (!s_fUnicowsInitialized)
    {
    if ((GetVersion() & 0x80000000) != 0)
    {
        GetFileAttributesW(L"???.???");
        s_moduleUnicows = GetModuleHandleA("Unicows.dll");
    }
    s_fUnicowsInitialized = TRUE;
    }

    /*
       always call GetProcAddress(unicows) before the usual .dll
    */
    if (s_moduleUnicows != NULL)
    {
    Proc = GetProcAddress(s_moduleUnicows, ProcName);
    if (Proc != NULL)
        goto Exit;
    }
#endif
    hModule = m->WinbaseIsolationAwarePrivateybNQRQzbQhYR;
    if (hModule == NULL)
    {
#ifdef _M_IX86
    hModule = (((GetVersion() & 0x80000000) != 0) ? (*c->WinbaseIsolationAwarePrivateybNQn)(c->WinbaseIsolationAwarePrivateANZRn) : (*c->WinbaseIsolationAwarePrivateybNQJ)(c->WinbaseIsolationAwarePrivateANZRJ));
#else
    hModule = (*c->WinbaseIsolationAwarePrivateybNQJ)(c->WinbaseIsolationAwarePrivateANZRJ);
#endif
    if (hModule == NULL)
        goto Exit;
    m->WinbaseIsolationAwarePrivateybNQRQzbQhYR = hModule;
    }
    Proc = GetProcAddress(hModule, ProcName);
Exit:
    return Proc;
} 
```

有谁知道是`GetFileAttributesW(L"???.???");`做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:19:20.920

这有点像什么都不做。这是一个虚拟调用，其唯一目的是强制将其所在的 DLL ( `Unicows.dll`) 加载到内存中，以便可以检索其句柄。该参数只是一个无用的 Unicode 字符串“文件名”，因为不需要实际值，并且如果调用在非法文件名（不允许通配符）上出错，而​​不是仅仅为了抛出结果而敲击磁盘，它会更快一些.

# c++ - 对象数组作为c ++中函数错误的参数

> ID：10457950
> 
> 赞同：1
> 
> 时间：2012-05-05T01:09:30.547
> 
> 标签：c++

我有一个模板类节点，我想创建一个它的对象数组并将其传递给一个函数。我怎么做？

```
Node<char> w1, w2, w3, w4;
Node<char> **s1 = new Node<char>* [3];
s1[0] = &w1; s1[1] = &w2; s1[2] = &w3;
w4.meet_neighbors(s1); 
```

我之前有以下原型：

```
template<typename T>
void Node<T>::meet_neighbors(Node<T>**); 
```

以这种方式进行探测会导致以下错误：

```
error: no matching function for call to ‘Node<char>::meet_neighbors(Node<char>**&)
note: candidates are: void Node<TW>::meet_neighbors(const Node<TW>**) [with TW = char] <near match> 
```

我不明白哪个结果。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:19:35.597

`&`这两个函数是不同的，不是因为错误日志¹中有一个附加函数，而是因为其中一个是`const`指针而另一个不是。

¹在 C++ 错误日志（至少 g++）中，甚至`f(int)`显示为`f(int&)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T01:21:12.667

你需要做这样的事情：

```
Node<char>** s1 = new Node<char>*[4];
s1[0] = &w1; s1[1] = &w2; s1[2] = &w3;
w4.meet_neighbors(s1); Node<T>::meet_neighbors(Node<T>**);
/*...*/
delete[] s1; 
```

但是你真的应该考虑使用一些 STL 容器而不是数组，比如 std::vector。您可能会注意到您的`meet_neighbors()`函数无法确定数组参数的大小。您需要将一些容器传递给它或添加一个数组大小参数。

# c++ - CUDA 中是否有一个预处理器宏来告诉我们是否正在编译设备代码？

> ID：10457951
> 
> 赞同：1
> 
> 时间：2012-05-05T01:09:40.093
> 
> 标签：c++, cuda, c-preprocessor

我想定义一个在设备和主机代码之间共享的指针类型，并在内部将设备和主机指针存储到共享内存。我希望它在编译时确定实际返回的指针：

```
#define F inline __host__ __device__

class SharedMemory;
/**
 * 
 * Can only be set by allocating shared memory.
 */
template<typename T>
class SharedMemoryPtr {
public:
    SharedMemoryPtr() : hptr(0), dptr(0) {}

    //F ~ SharedMemoryPtr() {cudaFreeHost(hptr);} // Should be freed explicitly (?)

    // TODO: Don't allow copying/overwriting (at least not without freeing memory...)

    F T& operator() () {
#ifdef __CUDACC__
        return *dptr;
#else
        return *hptr;
#endif
    };

    F T* operator-> () {
#ifdef __CUDACC__
        return dptr;
#else
        return hptr;
#endif
    };

    F T& operator * () {
#ifdef __CUDACC__
        return *dptr;
#else
        return *hptr;
#endif
    };

    F T& operator[] (__int64 i) const {
#ifdef __CUDACC__
        return *(dptr + i);
#else
        return *(hptr + i);
#endif
    };

    friend SharedMemory;

    // TODO: Make obsolete (possible?)

    T * getHptr() {return hptr;} 
    T * getDptr() {return dptr;}

private:

    T *hptr, *dptr;
};

class SharedMemory {
public:
    template<typename T>
    static SharedMemoryPtr<T> allocate(int count = 1) {
        assert(count > 0);

        SharedMemoryPtr<T> sptr;

        cutilSafeCall(
            cudaHostAlloc(&sptr.hptr, sizeof(T) * count, cudaHostAllocMapped));
        assert(sptr.hptr);
        cutilSafeCall(
            cudaHostGetDevicePointer(&sptr.dptr, sptr.hptr, 0));
        assert(sptr.dptr);

        return sptr;
    }
}; 
```

只要我在 cpp 文件（`__CUDACC__`从未定义过）或 .h 文件（`__CUDACC__`仅当函数被 cu 文件中的某个函数使用时才定义）中的代码中使用这些指针，这就可以正常工作。但是在 .cu 文件中的一个`__host__`函数中，我得到*了 .cu 文件*`devptr`。显然，.cu 文件由 nvcc 专门处理。是否有其他一些仅为`__global__`和`__device__`函数定义的预处理器宏，而不仅仅是 nvcc 碰巧处理的所有内容？还是我需要分开我的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T07:30:32.470

`__CUDA_ARCH__`仅适用于设备代码。您可以使用它指定设备代码行为。这个宏实际上获得了设备代码的计算能力（比如 200 代表 2.0。）

# jquery - jquery：删除基于属性数组和其他选择框选择的选择选项

> ID：10457954
> 
> 赞同：2
> 
> 时间：2012-05-05T01:10:16.823
> 
> 标签：jquery, jquery-selectors, attributes, jquery-selectbox

我正在尝试设置一组选择框来快速将相当大的数据集过滤成可用的块。而且我非常接近，但收到的解决方案与我想要的完全相反，无论我是使用 .not() 选择器（或将其取出），还是使用 .attr= （或 .attr!= ）。

这是一个小提琴，所以你可以看到发生了什么：

[http://jsfiddle.net/yD5cG/3/](http://jsfiddle.net/yD5cG/3/) （忽略一个事实，一旦你改变了顶级选择，底部选择框不会改变。我不需要担心这个）。

我搜索了该站点并发现了很多与我需要的代码很接近的代码，但是我认为解析数组会丢掉它吗？在这一点上，我无法判断我是否过于复杂或过于简单化。（这基本上是尝试使用 JQuery 进行简单的多对多过滤器）。

感谢任何事情，即使是最基本的想法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:47:31.940

证明：http: [//jsfiddle.net/iambriansreed/KBKEV/](http://jsfiddle.net/iambriansreed/KBKEV/)

```
var options = $('#selectbox2').html();
//store original options
$("#selectbox1").change(function() {
    var selected = this.value.split(',');
    // get selected value and make it an array
    $('#selectbox2').html(options);
    // reset the box to the original options
    $('#selectbox2 option').filter(function(){
        if(this.value.indexOf(',') == -1){
            // simple single values
            return $.inArray(this.value, selected) == -1;
        }else{  
            // check each value
            var values = this.value.split(',');
            for(i in values){
                if($.inArray(values[i], selected) > -1)
                    return false;            
            }
            return true;  
        }  
    }).remove();    
    // remove any options not in the array of selected values
});​ 
```

一个工作小提琴和一步一步的解释。另一个高质量的答案。

# python - 使用 java.util.Calendar 检查今天是周三还是周六

> ID：10457957
> 
> 赞同：0
> 
> 时间：2012-05-05T01:10:49.480
> 
> 标签：python, date, calendar, compare, jython

我有一个带有一些嵌入式脚本的 stax 文档来检查今天是星期三还是星期六，在初始格式化后，正确的一天被打印到屏幕上，但是在 find() 方法中，“星期三”总是打印到屏幕上，即使是在星期六. 有没有更好的方法来做这个比较？
jython 代码可以在脚本中运行

```
import java.util.Date
import java.util.Calendar
import java.text.SimpleDateFormat

now = java.util.Date()
dayFormat = java.text.SimpleDateFormat('EEE')
cal = java.util.Calendar.getInstance();  
cal.setTime(now);  
cal.add(java.util.Calendar.HOUR, 5);
dayBeforeFormat = cal.getTime();

day = str(dayFormat.format(dayBeforeFormat))
print(day)

if day.find('Sat'):
    print('Sat')
elif day.find('Wed'):
    print('Wed') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:08:06.960

当代码在星期六运行时，值为`day`"Sat" 和这一位：

```
day.find('Sat') 
```

返回 0。这是`day`字符串中找到子字符串“Sat”的最低索引。请参阅[http://www.jython.org/docs/library/stdtypes.html#string-methods](http://www.jython.org/docs/library/stdtypes.html#string-methods)。

0 相当于 boolean `False`。

这将起作用：

```
if day.find('Sat') > -1:
    print('Sat') 
```

或更简单：

```
if day == 'Sat':
    print('Sat') 
```

# c - 从 C 手动为 excel 创建多页文件

> ID：10457961
> 
> 赞同：1
> 
> 时间：2012-05-05T01:11:35.303
> 
> 标签：c, excel, export-to-excel

我正在开发一个 C 应用程序。我计划使用 CSV 文件将值读入电子表格，但随着数据变得越来越复杂（大约 100 列），我看到需要开始做多张工作表。我正在使用单板计算机，该文件用于存储诊断信息。我希望能够以 ASCII 格式从 SBC 写入文件，然后将其导入 excel（或开源替代方案），并拥有多张工作表。这甚至可能吗，还是我应该开始研究宏以在数据上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:40:14.157

也许考虑使用 XML 来编写数据，然后它可以很容易地转换成你想要的任何格式，并且你可以让数据以一种语义上有意义的方式发出，而不是根据电子表格的架构。这可能为不同的外部程序与数据交互提供更大的灵活性。如果需要，您可以使用 XSLT 将其转换为多个 CSV 文件，并且可能有合理的方法将其直接导入电子表格。

# xcode - 使用 LLDB 时 Xcode 4.3 崩溃

> ID：10457962
> 
> 赞同：4
> 
> 时间：2012-05-05T01:11:39.653
> 
> 标签：xcode, crash, lldb

自安装 xcode 4.3（来自应用商店）以来，当我尝试运行一些调试器设置为 LLDB 的应用时，Xcode 崩溃。GDB 工作正常。

我已经尝试过重新安装 iTunes 并删除所有 xcode 痕迹并重新安装。我还尝试删除 .xib 文件并将它们重新添加到项目中。

任何帮助都会很棒:)

以下是生成的一些报告：

> 进程：Xcode [2102] 路径：
> /Applications/Xcode.app/Contents/MacOS/Xcode 标识符：
> com.apple.dt.Xcode 版本：4.3.2 (1177) 代码类型：
> X86-64 (Native)
> 
> 日期/时间：2012-05-05 11:02:34.865 +1000 操作系统版本：Mac OS X 10.7.3 (11D50b) 报告版本：9
> 
> 自上次报告以来的时间间隔：2063 秒自上次报告以来的崩溃次数：7 自上次报告以来的每个应用程序的时间间隔：882 秒自上次报告以来的每个应用程序崩溃次数：7
> 
> 崩溃的线程：0 调度队列：com.apple.main-thread
> 
> 异常类型：EXC_CRASH (SIGABRT) 异常代码：0x0000000000000000, 0x0000000000000000
> 
> app/Contents/PlugIns/DebuggerLLDB.ideplugin, NSLocalizedFailureReason=路径 \U201c/Applications/Xcode.app/Contents/PlugIns/DebuggerLLDB.ideplugin\U201d 中的插件 \U201ccom.apple.dt.dbg.DebuggerLLDB\U201d 不能被加载。插件或其必备插件之一可能丢失或损坏。, NSUnderlyingError=0x4003c62e0 \"捆绑包\U201cDebuggerLLDB\U201d 无法加载\U2019，因为它已损坏或缺少必要的资源。\"}"; }提示：无 回溯：0 0x00007fff945fcfaa __exceptionPreprocess（在 CoreFoundation 中）1 0x00007fff8c9add5e objc_exception_throw（在 libobjc.A.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T10:28:48.590

嗨，我有同样的问题，我向 Apple 报告了，他们告诉我这是一个错误，他们知道，我唯一的解决方法是一直将编译器更改为 GDB，直到 Apple 修复错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T02:45:11.347

我已经解决了如下问题：可能对你有用。我尝试在终端中执行 lldb 命令，得到的结果是我的 lldb 需要 python 2.7。但是之前，当我安装 clang 时，python版本更改为 2.6，所以我重新安装了 python 2.7。我的 lldb 运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:59:33.780

你升级到 Xcode 4.6.1 了吗？如果是这样，那么如果没有 2.7 重新安装 Python，请查找 /System/Library/Frameworks/Python.framework/Versions/2.7。Python.org 上有一个 MAC 安装程序。顺便说一句，如果您碰巧看到 Current 而不是 2.7，请删除名为 Current 的文件夹。我遇到了 LLDB 问题，这就是我所做的，并且一切正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-03T10:18:15.730

当 Python 与自制软件一起安装时，我遇到了同样的问题。

我只是这样做了：

```
sudo ln -s /usr/local/Cellar/python/2.7.6/Frameworks/Python.framework/Versions /System/Library/Frameworks/Python.framework/Versions 
```

并且问题解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T16:09:39.760

从 Mountain Lion (10.8.2)、Xcode 4.5.1 开始，我仍然无法正常工作，我尝试删除并重新安装无济于事。这对我来说并不是什么大不了的事，因为我还在学习（斯坦福课程和大书呆子牧场的书现在正在做）但是我想一旦我开始做一些团队合作，人们不会欣赏我的改变将产品方案从 LLDB 转移到 GDB，这样我就可以运行模拟器了。

# json - Spring REST 服务：从请求中检索 JSON

> ID：10457963
> 
> 赞同：22
> 
> 时间：2012-05-05T01:11:47.253
> 
> 标签：json, spring, rest

我正在 Spring 3.1 上构建 REST 服务。我为此使用@EnableWebMVC 注释。由于我的服务将只接受 JSON 请求，我还想将传入的请求转储到 MongoDB 集合中以进行日志记录（以及稍后用于数据转换）。我想访问原始 JSON 请求（我可以在非弹簧实现上使用“@Content HttpServletRequest 请求”作为方法参数）。

我是春季新手。所以，请帮助我实现这一目标。谢谢！

**更新：问题没有完全解决。只有我的 GET 测试有效。POST 失败。因此未选中接受的答案**

问题是，即使我创建了一个 HttpServletRequestWrapper，我也无法在处理和包装请求后转发请求。这是发生的事情：

**拦截器：**

```
public class DBLogInterceptor extends HandlerInterceptorAdapter {
    MyRequestWrapper requestWrapper;

    private final static Logger logger = Logger.getLogger(DBLogInterceptor.class);

    @Override
    public boolean preHandle(
            HttpServletRequest request,
            HttpServletResponse response,
            Object handler) throws Exception 
    {
        requestWrapper = new MyRequestWrapper(request);
        // Code removed, but it just dumps requestWrapper.getBody() into DB
        return super.preHandle(requestWrapper, response, handler);
    }
} 
```

**HTTP POST 服务方式**

```
@RequestMapping(method = RequestMethod.POST, consumes="application/json", produces="application/json", value = "employee")
@ResponseBody
public String updateEntity(@RequestBody Employee emp) {
    // Do some DB Stuff. Anyway, the control flow does not reach this place.
    return "Employee " + emp.getName() + " updated successfully!";
} 
```

现在，每当我发送 POST 时都会出现异常：

```
12:04:53,821 DEBUG DBLogInterceptor:22 - {"name":"Van Damme","dept":"Applied Martial Arts"}
12:04:53,843 DEBUG RequestResponseBodyMethodProcessor:117 - Reading [com.test.webapp.login.domain.Employee] as "application/json" using [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@154174f9]
12:04:53,850 DEBUG ExceptionHandlerExceptionResolver:132 - Resolving exception from handler [public java.lang.String com.test.webapp.controller.EmployeeService.updateEntity(com.test.webapp.login.domain.Employee)]: java.io.IOException: Stream closed
12:04:53,854 DEBUG ResponseStatusExceptionResolver:132 - Resolving exception from handler [public java.lang.String com.test.webapp.controller.EmployeeService.updateEntity(com.test.webapp.login.domain.Employee)]: java.io.IOException: Streamclosed
12:04:53,854 DEBUG DefaultHandlerExceptionResolver:132 - Resolving exception from handler [public java.lang.String com.test.webapp.controller.EmployeeService.updateEntity(com.test.webapp.login.domain.Employee)]: java.io.IOException: Streamclosed
12:04:53,859 DEBUG DispatcherServlet:910 - Could not complete request
java.io.IOException: Stream closed
        at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:312)
        at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:200)
        at org.codehaus.jackson.impl.ByteSourceBootstrapper.ensureLoaded(ByteSourceBootstrapper.java:507)
        at org.codehaus.jackson.impl.ByteSourceBootstrapper.detectEncoding(ByteSourceBootstrapper.java:129)
        at org.codehaus.jackson.impl.ByteSourceBootstrapper.constructParser(ByteSourceBootstrapper.java:224)
        at org.codehaus.jackson.JsonFactory._createJsonParser(JsonFactory.java:785)
        at org.codehaus.jackson.JsonFactory.createJsonParser(JsonFactory.java:561)
        at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1914)
        at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:124)
        at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:153)
        at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:120)
        at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:91)
        at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:71)
        at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
        at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source) 
```

我希望`HttpServletRequestWrapper`能够处理缓存请求。但它不会以某种方式发生。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-05T01:48:35.447

使用[HttpServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)对象，您可以访问客户端用于发出请求的 URL、使用的方法（GET、POST、PUT 等）、查询字符串和标头。

获取 RequestBody 可能有点棘手，可能需要使用[HttpServletRequestWrapper](http://natch3z.blogspot.com/2009/01/read-request-body-in-filter.html)对象。由于请求正文只能读取一次，因此您需要扩展包装器以访问它，以便您的目标控制器稍后仍可以访问它以将您的 JSON 反序列化为 POJO 对象。

```
public class MyRequestWrapper extends HttpServletRequestWrapper {
 private final String body;
 public MyRequestWrapper(HttpServletRequest request) throws IOException {
   super(request);
   StringBuilder stringBuilder = new StringBuilder();
   BufferedReader bufferedReader = null;
   try {
     InputStream inputStream = request.getInputStream();
     if (inputStream != null) {
       bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
       char[] charBuffer = new char[128];
       int bytesRead = -1;
       while ((bytesRead = bufferedReader.read(charBuffer)) > 0) {
         stringBuilder.append(charBuffer, 0, bytesRead);
       }
     } else {
       stringBuilder.append("");
     }
   } catch (IOException ex) {
       throw ex;
   } finally {
     if (bufferedReader != null) {
       try {
         bufferedReader.close();
       } catch (IOException ex) {
         throw ex;
       }
     }
   }
   body = stringBuilder.toString();
 }

 @Override
 public ServletInputStream getInputStream() throws IOException {
   final ByteArrayInputStream byteArrayInputStream = new     ByteArrayInputStream(body.getBytes());
   ServletInputStream servletInputStream = new ServletInputStream() {
     public int read() throws IOException {
       return byteArrayInputStream.read();
     }
   };
   return servletInputStream;
 }

 @Override
 public BufferedReader getReader() throws IOException {
   return new BufferedReader(new InputStreamReader(this.getInputStream()));
 }

 public String getBody() {
   return this.body;
 }
} 
```

要在中心位置访问请求，您可以使用过滤器或 Spring 拦截器。这两个都是在请求被委托给控制器之前调用的，并且都可以访问 servlet。

这是一个[使用 Spring Interceptor 的实际日志记录示例](http://www.vaannila.com/spring/spring-interceptor.html)：

```
package com.vaannila.interceptor;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.log4j.BasicConfigurator;
import org.apache.log4j.Logger;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.handler. HandlerInterceptorAdapter;

public class LoggerInterceptor extends HandlerInterceptorAdapter {
    static Logger logger = Logger.getLogger(LoggerInterceptor.class);

    static {
        BasicConfigurator.configure();
    }

    @Override

    public boolean preHandle(HttpServletRequest request,
        HttpServletResponse response, Object handler) throws Exception {

        logger.info("Before handling the request");
        return super.preHandle(request, response, handler);
    }

    @Override
    public void postHandle(HttpServletRequest request,
        HttpServletResponse response, Object handler,
            ModelAndView modelAndView) throws Exception {

        logger.info("After handling the request");
        super.postHandle(request, response, handler, modelAndView);
    }

    @Override
    public void afterCompletion(HttpServletRequest request,
        HttpServletResponse response, Object handler, Exception ex)
            throws Exception {

        logger.info("After rendering the view");
        super.afterCompletion(request, response, handler, ex);
    }
}

<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="viewResolver" class="org.springframework.web.servlet.view.    InternalResourceViewResolver" p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />

    <bean id="handlerMapping" class="org.springframework.web.servlet.handler. BeanNameUrlHandlerMapping" p:interceptors-ref="loggerInterceptor" />

    <bean id="loggerInterceptor" class="com.vaannila.interceptor.LoggerInterceptor" />

    <bean id="userService" class="com.vaannila.service.UserServiceImpl" />

    <bean name="/userRegistration.htm" class="com.vaannila.web.UserController" p:userService-ref="userService" p:formView="userForm" p:successView="userSuccess" />

</beans> 
```

在 LoggerInterceptor 中，您可以使用以下代码来访问请求：

```
MyRequestWrapper myRequestWrapper = new MyRequestWrapper((HttpServletRequest) request);

String body = myRequestWrapper.getBody();
String clientIP = myRequestWrapper.getRemoteHost();
int clientPort = request.getRemotePort();
String uri = myRequestWrapper.getRequestURI();

System.out.println(body);
System.out.println(clientIP);
System.out.println(clientPort);
System.out.println(uri); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T17:38:18.833

我怀疑是否`HttpServletRequestWrapper`可以工作......看看 DispatcherServlet 实现：

```
 HandlerInterceptor[] interceptors = mappedHandler.getInterceptors();
            if (interceptors != null) {
                for (int i = 0; i < interceptors.length; i++) {
                    HandlerInterceptor interceptor = interceptors[i];
                    if (!interceptor.preHandle(processedRequest, response, mappedHandler.getHandler())) {
                        triggerAfterCompletion(mappedHandler, interceptorIndex, processedRequest, response, null);
                        return;
                    }
                    interceptorIndex = i;
                }
            }

            // Actually invoke the handler.
            mv = ha.handle(processedRequest, response, mappedHandler.getHandler()); 
```

它仍然传递对“ `processedRequest`”的引用，它指的是`HttpServletRequest`流已经被读取的请求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-28T21:56:12.060

我知道这是一个老问题，但对于那些仍在寻找解决方案的人来说，这对我有用：

```
import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.util.Collection;
import java.util.Enumeration;
import java.util.HashMap;
import java.util.Locale;
import java.util.Map;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletInputStream;
import javax.servlet.ServletOutputStream;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletRequestWrapper;
import javax.servlet.http.HttpServletResponse;
import org.apache.commons.io.output.TeeOutputStream;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class HttpLoggingFilter implements Filter {

    private static final Logger logger = LoggerFactory.getLogger(HttpLoggingFilter.class);

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        try {
            HttpServletRequest httpServletRequest = (HttpServletRequest) request;
            HttpServletResponse httpServletResponse = (HttpServletResponse) response;

            Map<String, String> requestMap = this
                    .getTypesafeRequestMap(httpServletRequest);
            BufferedRequestWrapper bufferedRequest = new BufferedRequestWrapper(
                    httpServletRequest);
            BufferedResponseWrapper bufferedResponse = new BufferedResponseWrapper(
                    httpServletResponse);

            final StringBuilder logMessage = new StringBuilder(
                    "REST Request - ").append("[HTTP METHOD:")
                    .append(httpServletRequest.getMethod())
                    .append("] [PATH INFO:")
                    .append(httpServletRequest.getPathInfo())
                    .append("] [REQUEST PARAMETERS:").append(requestMap)
                    .append("] [REQUEST BODY:")
                    .append(bufferedRequest.getRequestBody())
                    .append("] [REMOTE ADDRESS:")
                    .append(httpServletRequest.getRemoteAddr()).append("]");

            chain.doFilter(bufferedRequest, bufferedResponse);
            logMessage.append(" [RESPONSE:")
                    .append(bufferedResponse.getContent()).append("]");
            logger.debug(logMessage.toString());
        } catch (Throwable a) {
            logger.error(a.getMessage());
        }
    }

    private Map<String, String> getTypesafeRequestMap(HttpServletRequest request) {
        Map<String, String> typesafeRequestMap = new HashMap<String, String>();
        Enumeration<?> requestParamNames = request.getParameterNames();
        while (requestParamNames.hasMoreElements()) {
            String requestParamName = (String) requestParamNames.nextElement();
            String requestParamValue = request.getParameter(requestParamName);
            typesafeRequestMap.put(requestParamName, requestParamValue);
        }
        return typesafeRequestMap;
    }

    @Override
    public void destroy() {
    }

    private static final class BufferedRequestWrapper extends
            HttpServletRequestWrapper {

        private ByteArrayInputStream bais = null;
        private ByteArrayOutputStream baos = null;
        private BufferedServletInputStream bsis = null;
        private byte[] buffer = null;

        public BufferedRequestWrapper(HttpServletRequest req)
                throws IOException {
            super(req);
            // Read InputStream and store its content in a buffer.
            InputStream is = req.getInputStream();
            this.baos = new ByteArrayOutputStream();
            byte buf[] = new byte[1024];
            int read;
            while ((read = is.read(buf)) > 0) {
                this.baos.write(buf, 0, read);
            }
            this.buffer = this.baos.toByteArray();
        }

        @Override
        public ServletInputStream getInputStream() {
            this.bais = new ByteArrayInputStream(this.buffer);
            this.bsis = new BufferedServletInputStream(this.bais);
            return this.bsis;
        }

        String getRequestBody() throws IOException {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    this.getInputStream()));
            String line = null;
            StringBuilder inputBuffer = new StringBuilder();
            do {
                line = reader.readLine();
                if (null != line) {
                    inputBuffer.append(line.trim());
                }
            } while (line != null);
            reader.close();
            return inputBuffer.toString().trim();
        }

    }

    private static final class BufferedServletInputStream extends
            ServletInputStream {

        private ByteArrayInputStream bais;

        public BufferedServletInputStream(ByteArrayInputStream bais) {
            this.bais = bais;
        }

        @Override
        public int available() {
            return this.bais.available();
        }

        @Override
        public int read() {
            return this.bais.read();
        }

        @Override
        public int read(byte[] buf, int off, int len) {
            return this.bais.read(buf, off, len);
        }

    }

    public class TeeServletOutputStream extends ServletOutputStream {

        private final TeeOutputStream targetStream;

        public TeeServletOutputStream(OutputStream one, OutputStream two) {
            targetStream = new TeeOutputStream(one, two);
        }

        @Override
        public void write(int arg0) throws IOException {
            this.targetStream.write(arg0);
        }

        public void flush() throws IOException {
            super.flush();
            this.targetStream.flush();
        }

        public void close() throws IOException {
            super.close();
            this.targetStream.close();
        }
    }

    public class BufferedResponseWrapper implements HttpServletResponse {

        HttpServletResponse original;
        TeeServletOutputStream tee;
        ByteArrayOutputStream bos;

        public BufferedResponseWrapper(HttpServletResponse response) {
            original = response;
        }

        public String getContent() {
            return bos.toString();
        }

        public PrintWriter getWriter() throws IOException {
            return original.getWriter();
        }

        public ServletOutputStream getOutputStream() throws IOException {
            if (tee == null) {
                bos = new ByteArrayOutputStream();
                tee = new TeeServletOutputStream(original.getOutputStream(),
                        bos);
            }
            return tee;

        }

        @Override
        public String getCharacterEncoding() {
            return original.getCharacterEncoding();
        }

        @Override
        public String getContentType() {
            return original.getContentType();
        }

        @Override
        public void setCharacterEncoding(String charset) {
            original.setCharacterEncoding(charset);
        }

        @Override
        public void setContentLength(int len) {
            original.setContentLength(len);
        }

        @Override
        public void setContentType(String type) {
            original.setContentType(type);
        }

        @Override
        public void setBufferSize(int size) {
            original.setBufferSize(size);
        }

        @Override
        public int getBufferSize() {
            return original.getBufferSize();
        }

        @Override
        public void flushBuffer() throws IOException {
            tee.flush();
        }

        @Override
        public void resetBuffer() {
            original.resetBuffer();
        }

        @Override
        public boolean isCommitted() {
            return original.isCommitted();
        }

        @Override
        public void reset() {
            original.reset();
        }

        @Override
        public void setLocale(Locale loc) {
            original.setLocale(loc);
        }

        @Override
        public Locale getLocale() {
            return original.getLocale();
        }

        @Override
        public void addCookie(Cookie cookie) {
            original.addCookie(cookie);
        }

        @Override
        public boolean containsHeader(String name) {
            return original.containsHeader(name);
        }

        @Override
        public String encodeURL(String url) {
            return original.encodeURL(url);
        }

        @Override
        public String encodeRedirectURL(String url) {
            return original.encodeRedirectURL(url);
        }

        @SuppressWarnings("deprecation")
        @Override
        public String encodeUrl(String url) {
            return original.encodeUrl(url);
        }

        @SuppressWarnings("deprecation")
        @Override
        public String encodeRedirectUrl(String url) {
            return original.encodeRedirectUrl(url);
        }

        @Override
        public void sendError(int sc, String msg) throws IOException {
            original.sendError(sc, msg);
        }

        @Override
        public void sendError(int sc) throws IOException {
            original.sendError(sc);
        }

        @Override
        public void sendRedirect(String location) throws IOException {
            original.sendRedirect(location);
        }

        @Override
        public void setDateHeader(String name, long date) {
            original.setDateHeader(name, date);
        }

        @Override
        public void addDateHeader(String name, long date) {
            original.addDateHeader(name, date);
        }

        @Override
        public void setHeader(String name, String value) {
            original.setHeader(name, value);
        }

        @Override
        public void addHeader(String name, String value) {
            original.addHeader(name, value);
        }

        @Override
        public void setIntHeader(String name, int value) {
            original.setIntHeader(name, value);
        }

        @Override
        public void addIntHeader(String name, int value) {
            original.addIntHeader(name, value);
        }

        @Override
        public void setStatus(int sc) {
            original.setStatus(sc);
        }

        @SuppressWarnings("deprecation")
        @Override
        public void setStatus(int sc, String sm) {
            original.setStatus(sc, sm);
        }

        @Override
        public String getHeader(String arg0) {
            return original.getHeader(arg0);
        }

        @Override
        public Collection<String> getHeaderNames() {
            return original.getHeaderNames();
        }

        @Override
        public Collection<String> getHeaders(String arg0) {
            return original.getHeaders(arg0);
        }

        @Override
        public int getStatus() {
            return original.getStatus();
        }

    }
} 
```

然后只需在 web.xml 中注册过滤器即可。所有学分：[http](http://wetfeetblog.com/servlet-filer-to-log-request-and-response-details-and-payload/431) ://wetfeetblog.com/servlet-filer-to-log-request-and-response-details-and-payload/431 （我只是做了一些小修复）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-11T06:50:09.690

嘿，你可以试试这个：

```
@RequestMapping(method = RequestMethod.POST, consumes="application/json", produces="application/json", value = "/employee")
@ResponseBody
public String updateEntity(@RequestBody Employee emp) {
    // Do some DB Stuff. Anyway, the control flow does not reach this place.
    return "Employee " + emp.getName() + " updated successfully!";
} 
```

在这里：如果您使用“/”证明 URI，它允许执行所有操作。例如使用相同的 URI 值获取更新和删除。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-29T08:48:59.690

目前在 spring-mvc repo 中，拦截器在 DispatcherServlet#doDispatch(...) 中被调用：

[https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/DispatcherServlet.java](https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/DispatcherServlet.java)

```
...
        if (!mappedHandler.applyPreHandle(processedRequest, response)) {
            return;
        }

        try {
            // Actually invoke the handler.
            mv = ha.handle(processedRequest, response, mappedHandler.getHandler());
        }
        finally {
            if (asyncManager.isConcurrentHandlingStarted()) {
                return;
            }
        }

        applyDefaultViewName(request, mv);
        mappedHandler.applyPostHandle(processedRequest, response, mv);
... 
```

我可以定义自己的`DispatcherServlet`，并覆盖`doDispatch(...)`以注入`HttpRequestWrapper`a`ByteArrayInputStream`吗`getInputStream()`？

```
...

@Override
    protected void doDispatch(HttpServletRequest request, HttpServletResponse response)
            throws Exception {

        RequestWrapper wrappedRequest = new RequestWrapper(request);
        logger.debug("injecting RequestWrapper: " + wrappedRequest);

        super.doDispatch(wrappedRequest, response);

    }
... 
```

这适用于上述情况吗？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-12T08:38:31.143

我制作了一个不依赖于 3rd 方库的 Ouputstream 版本，以便于重用。您可以使用这 2 个包装类轻松获取请求和响应正文。
但无论如何，我必须使用过滤器而不是拦截器来执行此操作。因为正如@user1323865 提到的，在spring 4 中，processedRequest 用于拦截器和处理程序，因此您不能将这些方法用于拦截器。
如果您使用的是 Writer 版本，也可以在此链接中找到一些帮助。 [捕获并记录响应正文](https://stackoverflow.com/questions/3242236/capture-and-log-the-response-body)

```
 public class BufferedRequestWrapper extends HttpServletRequestWrapper
{
    private static final class BufferedServletInputStream extends ServletInputStream
    {
        private ByteArrayInputStream bais;

        public BufferedServletInputStream(ByteArrayInputStream bais)
        {
            this.bais = bais;
        }

        @Override
        public int available()
        {
            return this.bais.available();
        }

        @Override
        public int read()
        {
            return this.bais.read();
        }

        @Override
        public int read(byte[] buf, int off, int len)
        {
            return this.bais.read(buf, off, len);
        }

    }

    private byte[] mBodyBuffer;

    public BufferedRequestWrapper(HttpServletRequest request) throws IOException
    {
        super(request);

        InputStream in = request.getInputStream();

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];
        int bytesRead = -1;
        while ((bytesRead = in.read(buffer)) > 0)
        {
            baos.write(buffer, 0, bytesRead);
        }
        mBodyBuffer = baos.toByteArray();
    }

    public String getRequestBody()
    {
        return new String(mBodyBuffer, Charset.forName("UTF-8"));
    }
    @Override
    public BufferedReader getReader() throws IOException
    {
        return new BufferedReader(new InputStreamReader(this.getInputStream()));
    }

    @Override
    public ServletInputStream getInputStream()
    {
        ByteArrayInputStream in = new ByteArrayInputStream(mBodyBuffer);
        return new BufferedServletInputStream(in);
    }
}

public class BufferedResponseWrapper extends HttpServletResponseWrapper
{
    private TeeServletOutputStream mTeeOutputStream;

    private static class TeeOutputStream extends OutputStream
    {
        private OutputStream mChainStream;
        private OutputStream mTeeStream;

        public TeeOutputStream(OutputStream chainStream, OutputStream teeStream)
        {
            mChainStream = chainStream;
            mTeeStream = teeStream;
        }

        @Override
        public void write(int b) throws IOException
        {
            mChainStream.write(b);
            mTeeStream.write(b);
            mTeeStream.flush();
        }

        @Override
        public void close() throws IOException
        {
            flush();
            mChainStream.close();
            mTeeStream.close();
        }

        @Override
        public void flush() throws IOException
        {
            mChainStream.close();
        }
    }

    public class TeeServletOutputStream extends ServletOutputStream
    {
        private final TeeOutputStream targetStream;

        public TeeServletOutputStream(OutputStream one, OutputStream two)
        {
            targetStream = new TeeOutputStream(one, two);
        }

        @Override
        public void write(int b) throws IOException
        {
            this.targetStream.write(b);
        }

        @Override
        public void flush() throws IOException
        {
            super.flush();
            this.targetStream.flush();
        }

        @Override
        public void close() throws IOException
        {
            super.close();
            this.targetStream.close();
        }
    }

    private ByteArrayOutputStream mByteArrayOutputStream;

    public BufferedResponseWrapper(HttpServletResponse response) throws IOException
    {
        super(response);
        mByteArrayOutputStream = new ByteArrayOutputStream();
        mTeeOutputStream = new TeeServletOutputStream(super.getResponse().getOutputStream(), mByteArrayOutputStream);
    }

    @Override
    public PrintWriter getWriter() throws IOException
    {
        return super.getResponse().getWriter();
    }

    @Override
    public ServletOutputStream getOutputStream() throws IOException
    {
        return mTeeOutputStream;
    }

    public String getResponseBody()
    {
        return mByteArrayOutputStream.toString();
    }

} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-25T14:51:28.803

一种简单的方法是将请求正文作为 String 获取，然后解析为 Java 对象。您可以根据需要使用此字符串。

所以在你的例子中：

```
@RequestMapping(method = RequestMethod.POST, consumes="application/json", produces="application/json", value = "employee")
@ResponseBody
public String updateEntity(@RequestBody String empAsString) {

    // Do whatever with the json as String 
    System.out.println(empAsString);

    // Transform it into the Java Object you want
    ObjectMapper mapper = new ObjectMapper();
    Employee emp = mapper.readValue(empAsString, Employee.class);

    // Do some DB Stuff. Anyway, the control flow does not reach this place.
    return "Employee " + emp.getName() + " updated successfully!";
} 
```

请注意，如果您需要它作为列表，您可以使用：

```
List<Employee> eventsList =
                mapper.readValue(jsonInString, mapper.getTypeFactory().constructCollectionType(List.class, Employee.class)); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-23T12:23:48.017

您需要按如下方式实现 requestWrapper：

```
public class DocVerificationRequestWrapper extends HttpServletRequestWrapper {
 private final String body;
 public DocVerificationRequestWrapper(HttpServletRequest request) throws IOException {
   super(request);
   StringBuilder stringBuilder = new StringBuilder();
   BufferedReader bufferedReader = null;
   try {
     InputStream inputStream = request.getInputStream();
     if (inputStream != null) {
       bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
       char[] charBuffer = new char[128];
       int bytesRead = -1;
       while ((bytesRead = bufferedReader.read(charBuffer)) > 0) {
         stringBuilder.append(charBuffer, 0, bytesRead);
       }
     } else {
       stringBuilder.append("");
     }
   } catch (IOException ex) {
       throw ex;
   } finally {
     if (bufferedReader != null) {
       try {
         bufferedReader.close();
       } catch (IOException ex) {
         throw ex;
       }
     }
   }
   body = stringBuilder.toString();
 }

 @Override
 public ServletInputStream getInputStream() throws IOException {
   final ByteArrayInputStream byteArrayInputStream = new     ByteArrayInputStream(body.getBytes());
   ServletInputStream servletInputStream = new ServletInputStream() {
     public int read() throws IOException {
       return byteArrayInputStream.read();
     }

    @Override
    public boolean isFinished() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isReady() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void setReadListener(ReadListener listener) {
        // TODO Auto-generated method stub

    }
   };
   return servletInputStream;
 }

 @Override
 public BufferedReader getReader() throws IOException {
   return new BufferedReader(new InputStreamReader(this.getInputStream()));
 }

 public String getBody() {
   return this.body;
 }
} 
```

然后在 filter 类的 chain.doFilter 方法内部传递 requestWrapper 对象而不是 request 对象，如下所示：

```
@Override
public void doFilter(ServletRequest arg0, ServletResponse response, FilterChain chain)
        throws IOException, ServletException {

    logger.info("checking token in filter");
    HttpServletRequest request = (HttpServletRequest) arg0;

    DocVerificationRequestWrapper myRequestWrapper = new DocVerificationRequestWrapper((HttpServletRequest) request);

    String body = myRequestWrapper.getBody();
    logger.info("body = "+body);
    Token token = null;
    try {
        JSONObject jsonObj = new JSONObject(body);
        JSONObject tokenObj = (JSONObject) jsonObj.get("token");
        Gson gson = new Gson();
        token = gson.fromJson(tokenObj.toString(), Token.class);

        if(null != token) {
                if(userVerificationService==null){
                ServletContext servletContext = request.getServletContext();
                WebApplicationContext webApplicationContext = WebApplicationContextUtils.getWebApplicationContext(servletContext);
                userVerificationService = webApplicationContext.getBean(UserVerificationService.class);
            }
                String verStatus = userVerificationService.verifyUser(token);
                logger.info("verStatus = "+verStatus);
                if(verStatus != null && verStatus.equalsIgnoreCase("success")) {
                    chain.doFilter(myRequestWrapper, response); //here replacing request with requestWrapper 
                }else
                    logger.error("Invalid token");
        }else {
                logger.error("token missing.");
        }
    } catch (JSONException e) {
            logger.error("exception in authetication filter " + e);
    }
} 
```

从而解决了IOStream关闭异常。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-08T16:08:44.090

要从 Body 获取数据，您可以尝试在 RequestBodyAdviceAdapter 中读取并重新创建 InputStream：

```
@ControllerAdvice
public class CustomRequestBodyAdviceAdapter extends RequestBodyAdviceAdapter {

    @Override
    public HttpInputMessage beforeBodyRead(HttpInputMessage inputMessage, MethodParameter parameter, Type targetType, Class<? extends HttpMessageConverter<?>> converterType) throws IOException {
        String body = IOUtils.toString(inputMessage.getBody(), UTF_8.name());

        HttpInputMessage myMessage = new HttpInputMessage(){
            @Override
            public InputStream getBody() throws IOException {
                return new ByteArrayInputStream(body.getBytes());
            }
            @Override
            public HttpHeaders getHeaders() {
                return inputMessage.getHeaders();
            }
        };

        System.out.println("Data from Body: " + body);

        return super.beforeBodyRead(myMessage, parameter, targetType, converterType);
    }

    @Override
    public Object handleEmptyBody(Object body, HttpInputMessage inputMessage, MethodParameter parameter, Type targetType, Class<? extends HttpMessageConverter<?>> converterType) {
        System.out.println("Data from Body is empty");
        return super.handleEmptyBody(body, inputMessage, parameter, targetType, converterType);
    }

    @Override
    public Object afterBodyRead(Object body, HttpInputMessage inputMessage, MethodParameter parameter, Type targetType, Class<? extends HttpMessageConverter<?>> converterType) {
        return super.afterBodyRead(body, inputMessage, parameter, targetType, converterType);
    }

    @Override
    public boolean supports(MethodParameter methodParameter, Type targetType, Class<? extends HttpMessageConverter<?>> converterType) {
        return true;
    }
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-08-03T09:12:04.843

您可以简单地使用：

```
import org.apache.commons.io.IOUtils;
import java.nio.charset.Charset;

String requestBody = IOUtils.toString(request.getInputStream(), Charset.forName("UTF-8").toString()); 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2017-10-20T01:40:16.043

根据我的经验，只需开发如下：使用过滤器来包装 ServletRequest，然后您可以重复使用获取请求输入流。

# drupal - 在 Dreamweaver 或 Notepad++ 中编辑 Drupal 的 .module 文件时，如何使 PHP 代码以不同的颜色显示？

> ID：10457965
> 
> 赞同：0
> 
> 时间：2012-05-05T01:12:07.207
> 
> 标签：drupal, dreamweaver, notepad++

一个简单的可用性问题。所以我得到了一个 Dreamweaver 8（我现在有点习惯了），我刚刚下载了 Notepad++。（在此之前我使用简单的记事本）我喜欢这些编辑器的地方在于 PHP 代码以不同的颜色显示。因此，如果颜色不正确，那么您会立即知道您做错了什么。

但这仅适用于以**.php结尾的文件**

但是 Drupal 的文件以**.module**和**.inc**等结尾......而且寻找一些会弄乱代码的逗号或单引号通常是一场噩梦。那么如何让 Dreamweaver 或 Notepad++ 以颜色显示 .module 和 .inc 文件中的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T02:47:32.770

在记事本++中：

设置 > 样式配置器...

在语言列表中找到 PHP 选择它，然后在“用户分机：”字段中添加所需的扩展名

把点去掉，用空格隔开。保存更改后，您需要重新打开文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T02:00:57.470

我为 Notepad++ 创建了一个 Drupal“用户语言”，因此您可以获得自动完成和语法突出显示：这是最后一篇文章中的安装方法： [https ://drupal.org/node/326803](https://drupal.org/node/326803)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-15T08:43:55.237

![我最喜欢的 Nodepad++ 设置](../Images/9404e36e8ba0e7e546809a751b7628d1.png)

*   启用可点击链接：设置**->**首选项**->**杂项**->**启用可点击链接
*   **通过单击设置**->样式配置器**-> 单击左侧栏中的 php 扩展名，然后将“ *module inc install* ”复制并粘贴到**用户扩展框中**，为 .module 文件、.inc 文件和 .install 文件启用**PHP 语法突出显示**当然没有引号并保存并关闭。瞧！

# php - 在基于通用单个模板的页面上处理动态生成的唯一 DOM 的最佳方法是什么？

> ID：10457970
> 
> 赞同：0
> 
> 时间：2012-05-05T01:13:16.207
> 
> 标签：php, jquery, html

~~假设您有一个页面，用户可以在其中每次单击按钮时创建一个新的、唯一的 div。div 的内容大多基于服务器端通用的单一模板，但由于用户可以创建其中的几个，因此结果 div 的内容 DOM id 必须为每个请求动态生成，以便能够之后通过 jQuery 分别选择每个单独的 div 及其内容（否则，由于这些 div 基于相同的模板，它们自然会始终具有相同的 DOM Id，因此无法使用 jQuery 单独选择它们）~~

假设您正在使用 javascript 和 jquery 构建 Windows 系统。在服务器端，您有一个代表“文件夹”窗口的模板；这个模板有自己的按钮、菜单等，它们都是带有 ID 的 dom 元素。

然后，用户在页面上应该能够打开几个“文件夹”窗口，每个窗口在创建时都分配了不同的 id，但内容是相同的，因为加载的模板对于所有这些窗户。也就是说，如果用户打开 3 个“文件夹”窗口，页面中加载的实际标记可能如下所示：

```
<div id="firstWindow">
    <div id="windowContainer">
        <div id="windowHead">
            stuff
        </div>
        <div id="windowBody">
            <div id="windowInfoButton">stuff</div>
            stuff
        </div>
    </div>
</div>
<div id="secondWindow">
    <div id="windowContainer">
        <div id="windowHead">
            stuff
        </div>
        <div id="windowBody">
            <div id="windowInfoButton">stuff</div>
            stuff
        </div>
    </div>
</div>
<div id="thirdWindow">
    <div id="windowContainer">
        <div id="windowHead">
            stuff
        </div>
        <div id="windowBody">
            <div id="windowInfoButton">stuff</div>
            stuff
        </div>
    </div>
</div> 
```

如您所见，windowContainer、windowHead 等由于从同一模板中读取而被重复。就其本身而言，这已经很糟糕了，但此外，我需要能够使用 jQuery 选择每个 windowContainer 或 windowHead，以便在 firstWindow 中操作它们不会影响 secondWindow，因此只需将所有 id 切换到类不会这样做。

我可以考虑两种方法来解决这个问题：

1）由于我直接使用 PHP 作为模板语言，我可以很容易地附加一些生成随机 ID 或字符串的代码并替换每个 DOM，例如：

```
<div id="someFixedID" class="someClass">stuff</div> 
```

对此：

```
<div id="<?=$someRandomStuff?>someFixedID" class="someClass">stuff</div> 
```

问题是，如果模板有大约 20 或 30 个 DOM 元素，那会极大地污染它，我试图在模板中包含尽可能少的代码，以便能够快速迭代设计。

2) 使用 jQuery，可以通过 ajax 加载模板，循环遍历 div 中的每个元素，并在显示之前动态更改它们的 id。这将有助于保持模板干净，但我担心这种方法可能会在客户端增加不必要的开销，因为它可能必须循环遍历大约 20 或 30 个元素。

哪种方法在可维护性和性能方面更有意义？还有另一种我没有想到的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:09:20.240

您可以在 Ajax 调用的 URL 中添加一个**参数，**以获取模板以使用您的客户端生成的密钥。

一个非常粗略（不安全）的草稿：

**在服务器上（template.php）：**

```
<div id='<?= $_GET["container_key"] ?>' class='main-container'>
  ....
</div> 
```

**你的ajax调用：**

```
var containerKey = Math.random();
$.ajax("/template.php?container_key=" + containerKey, ....) 
```

使用比`Math.random()`（如时间戳、向导等）更好的东西来防止冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T01:52:53.150

如果我理解您的问题，您需要`DIV`使用唯一 ID 动态创建一个。使用 jQuery添加`DIV`具有唯一`ID`s 的 s，然后在这些`DIV`s 中从服务器端加载内容。您需要将客户端`ID`的生成代码与服务器端模板名称/内容同步。

**例如：**

**HTML**：

```
<div id='container'></div>
<input type='button' name='create' value='create' id='create'>​ 
```

**jQuery** :

```
$('#create').live( 'click', function(){   
    var num = $('div.mydiv').length;
    var html = '<div id="myid' + num + '" class="mydiv">My Content ' + num + '</div>';
    $('#container').append(html);       
});​ 
```

[在这里试试](http://jsfiddle.net/YHgrb/)

可能不是一个完美的解决方案，但希望它能给你一个方向。

# ios - iOS 上的语法高亮 UITextView

> ID：10457975
> 
> 赞同：0
> 
> 时间：2012-05-05T01:13:37.007
> 
> 标签：ios, objective-c, uitextview, nsattributedstring

> **可能重复：**
> [带有语法突出显示的 UITextView](https://stackoverflow.com/questions/3642540/uitextview-with-syntax-highlighting)

我正在为 iPad 开发源代码编辑器，但我被困在第一个问题上：语法高亮。我打算使用 libclang 来完成繁重的工作，但似乎没有在 iOS 上显示富文本的好方法。我认为最好的解决方案是拥有一个`UITextView`支持`NSAttributedString`绘图的子类，但我不知道该怎么做。我见过 Omni 的文本编辑器之类的东西，但它看起来不太好。我只需要等宽字体的多种颜色。是否有框架或库可以帮助在`UITextView`子类中绘制属性字符串？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T02:36:45.217

[http://www.cocoanetics.com/parts/dtrichtexteditor/](http://www.cocoanetics.com/parts/dtrichtexteditor/)是一个付费解决方案，几乎可以为您完成所有工作。

[https://github.com/Cocoanetics/DTCoreText](https://github.com/Cocoanetics/DTCoreText)是仅用于文本突出显示的开源后端。

# c++ - 什么 class Derived1 : Base {}; 意思是？

> ID：10457979
> 
> 赞同：0
> 
> 时间：2012-05-05T01:14:48.513
> 
> 标签：c++

我知道什么

```
class Derived1 : public Base {};  

class Derived1 : private Base {}; 
```

意思是，但是什么

```
class Derived1 : Base {}; 
```

意思是？

我在关于异常处理的优秀 boost 文章中找到了一个示例：http: [//www.boost.org/community/error_handling.html](http://www.boost.org/community/error_handling.html)在“2) 虚拟继承”部分下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T01:19:12.800

当未指定可见性时，使用私有。所以：

```
class Derived1 : Base {}; 
```

是相同的

```
class Derived1 : private Base {}; 
```

# java - Image Pixel Replacing

> ID：10457980
> 
> 赞同：0
> 
> 时间：2012-05-05T01:15:18.730
> 
> 标签：java, image, rgb, pixel

I am looking to replace pixels in an image that are black to some degree (semi-black) to become fully black.

The method to do this is `setRGB(int x, int y, int rgb)`. I know this. What I do not know is how to detect pixels that are semi-black.

I have tried (`i` is a `BufferedImage`):

```
final int rgb = i.getRGB(x, y);
if (rgb == -16777216) {
    i.setRGB(x, y, -16777216);
} 
```

To do this, but it only replaces the pixels that are pure black with pure black.

I have also tried dimming the image, but that does not work either.

Any ideas on how I test for generic blackness?

My goal: the image I am reading is thin text. I wish to make this bolder text by this.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T01:44:52.767

The integer that you receive represents the combined red, green, blue and alpha values. Essentially, you need to:

*   break that integer down into its component red, green, blue values
*   from those values, assess the overall "brightness" of the pixel

As a rough implementation, you could do something like this:

```
int pixVal = ... getRGB() as you have
int red = (pixVal >>> 16);
int green = (pixVal >>> 8) & 0xff;
int blue = pixVal & 0xff;
int brightness = (red + green + blue) / 3;
if (brightness < 16) {
  // pixel is black
} 
```

Now, the value 16 is a rough value: ideally, you would tailor this to the particular image.

Purists might also whinge that the perceived "brightness" of a pixel isn't literally the mean of the red/green/blue pixels (because the human eye is not equally sensitive to these components). But that's the rough idea to work from.

# php - 编译 PHP 错误：“make: *** [libs/libphp5.bundle] 错误 1”

> ID：10457982
> 
> 赞同：0
> 
> 时间：2012-05-05T01:15:49.607
> 
> 标签：php, imap

我想在php中制作一个可以通过gmail地址发送和接收电子邮件的程序。我最初在运行 OS X 10.4 Tiger 的 PPC Mac 上使用 XAMPP 服务器，但它没有我需要的 ssl 支持。因此，我尝试设置一个（更新的）Apache 服务器，因为我的 mac 附带的服务器已经过时。通过从源代码编译，我安装了 Apache 服务器 (2.2)、php 的 imap 扩展和 php 的 openssl 扩展。（虽然我不知道是否需要。）

我像这样运行配置命令：

> ./configure --with-imap=/usr/local/imap-2007f/ --enable-sockets --with-imap-ssl=/usr/local/ssl --with-openssl=/usr/local/ssl - -with-apxs2=/usr/local/apache2/bin/apxs --with-kerberos

然后我按照 php.3.5.12 目录中的 INSTALL 文件中的说明执行了“make”命令。这导致：

> collect2: ld 返回 1 退出状态
> make: *** [libs/libphp5.bundle] 错误 1

我已经研究过这个错误，并且似乎是由许多与我的项目无关的不同事情造成的。一方面，他们似乎都在使用（或尝试使用）MySQl。就我的目的而言，我不需要那个。我只是在寻找一种返回编程的方法，以便我可以完成我的程序。

感谢您的任何帮助！

编辑：这是完整的错误消息：

```
/usr/libexec/gcc/powerpc-apple-darwin8/4.0.1/ld: Undefined symbols:  
_iconv  
collect2: ld returned 1 exit status  
make: *** [libs/libphp5.bundle] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T01:00:30.520

我也遇到了这个问题，我已经解决了，付出了很多努力。我正在`PHP5.5.12`安装`OS X 10.9.2`.

默认 Makefile 将`libiconv.2.dylib`在`/usr/lib/`with 语句下找到

`19 MH_BUNDLE_FLAGS = -bundle -bundle_loader /usr/sbin/httpd -L/usr/lib -laprutil-1 -lldap -llber -llber -lexpat -liconv -lsqlite3 -lldap -llber -llber -L/usr/lib -lapr-1 -lpthread`

`/usr/lib/`但是在`OS X`PHP中没有合适的 libiconv 和正确的架构。我猜该文件夹下的默认设置`libiconv.2.dylib`是支持 32 位架构。

所以，我们现在知道究竟是什么问题。我们有不同的方法来解决这个问题。

1.  **（不推荐）**使用配置安装最新的 libiconv（可从 gnu-libiconv（[https://www.gnu.org/software/libiconv/#downloading](https://www.gnu.org/software/libiconv/#downloading)）获得）`--prefix=/usr`

    但这种方式可能会衍生出其他更难的问题。因为 OS X 需要原来的`libiconv.2.dylib`. 改了之后，很多应用包括QQ、TeamViewer等x86支持的应用都打不开了。他们立即坠毁。如果你真的遇到这种情况，别担心，它是可以解决的。你可以查看我的 gist.github.com/Yougmark。无论如何，可以安装php。

2.  **（推荐）**使用配置安装最新的 libiconv（可从 [gnu-libiconv] 获得）`--prefix=/usr/local`

    然后修改Makefile之前`$make`的语句如下：

    `19 MH_BUNDLE_FLAGS = -bundle -bundle_loader /usr/sbin/httpd -L/usr/local/lib -laprutil-1 -lldap -llber -llber -lexpat -liconv -lsqlite3 -lldap -llber -llber -L/usr/local/lib -lapr-1 -lpthread`

    注意 的两个位置**`-L/usr/lib`**，将它们更改为**`-L/usr/local/lib`**

现在，制作和安装，享受新的 PHP！ **:)**有关任何详细信息，您可以参考我的[要点](https://gist.github.com/Yougmark/5128e4e45c4da57fdbc6)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:03:45.153

似乎`iconv`没有安装该库。除非您需要它，否则您可以尝试使用`--without-iconv`配置选项禁用支持。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T15:56:22.557

请注意，我必须在更改 Makefile 后运行“make clean”才能使其正常工作

# javascript - 如何在gridview中查询asp按钮文本以查看是否有某个文本值

> ID：10457985
> 
> 赞同：1
> 
> 时间：2012-05-05T01:16:35.067
> 
> 标签：javascript, jquery, gridview, itemtemplate, aspbutton

我现在在 gridview 中有一个 asp 按钮，我可以将文本从“添加”切换到“删除”。现在我想要的是 jquery 或 javascript 来遍历所有行（或查询所有行）以确定是否已切换任何按钮（它们将具有“删除”文本，因为默认值为“添加”）。我不一定需要循环和处理任何东西，如果没有按钮被切换到“删除”文本，我只想隐藏一个 div。用户可能已将按钮切换为“删除”并返回“添加”。所以我需要知道当前是否至少有一个按钮文本是“删除”。

这是我的模板化 asp 按钮定义：

```
<asp:TemplateField HeaderText="Prior <br /> Downld" HeaderStyle-ForeColor="White" > 
  <ItemTemplate >
    <asp:Button id="btnBuy" runat="server" OnClientClick="btnBuyToggle(this); return false;" Text="Add" CssClass="buyButton" Visible='<%# Eval("SORD_ShowBuyButton") %>' />
  </ItemTemplate>
<HeaderStyle Width="7%" />
<ItemStyle CssClass="sessionOrderDownloadItems" VerticalAlign="Middle" HorizontalAlign="Center" />
</asp:TemplateField> 
```

无论如何，我希望可能有一个 jquery 选择器正在寻找`text = "Remove"`，但我不知道如何构建它。

注意：工作结果是这样的：

```
 if ( $("input[value=Remove]").length == 0 ) {
            $(".divDownloadHeaderClass").show();
            $(".divPurchaseHeaderClass").hide();
          }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T02:11:36.130

我认为这会起作用：

```
if ( $("input[value=Remove][type=submit]").length > 0 ) {
    $(".divDownload").hide();
} 
```

希望能帮助到你！

# java - 关于 Java 泛型函数，需要说明

> ID：10457989
> 
> 赞同：0
> 
> 时间：2012-05-05T01:16:52.777
> 
> 标签：java, generics

考虑：

```
public <U> void doSomethingWith(U u) {
   ...
} 
```

*   方法返回 void
*   方法在传递给方法时知道 U 的类型

使用Java，`<U>`设计来代表什么？

**我想澄清一下：** 这是一种预先声明*“U 类型的东西会传递给你，而你不知道......好吧，它可以是任何东西”*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T01:20:56.963

> 使用Java，`<U>`设计来代表什么？
> 
> 这是一种预先声明“*将传递给你的那种 U 类型的东西，你不知道......好吧，它可以是任何东西*”？

是的。它被称为泛型类型参数。[在这里阅读更多。](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T01:22:58.263

在这种情况下，U 并不比 Object 类更具描述性。<u> 方法前多用于链接两个或多个参数的类，或者绑定参数和结果。像：

```
public <U> U doSomething(Class<U> uClass) { } 
```

# xml - Xquery 检索信息（将重复字段分离为单个值）

> ID：10457992
> 
> 赞同：1
> 
> 时间：2012-05-05T01:17:13.287
> 
> 标签：xml, xslt, xquery

***来自food:food-item($food:fps-photo-atlas) 的***XML 文件结果

 *```
<portion>
<food-description unit="g">Spaghetti     </food-description>
<food-number file-type="jpg">3    </food-number>
<portion-size>
<size tag="1">55    </size>
<size tag="2">108    </size>
<size tag="3">161    </size>
<size tag="4">214    </size>
<size tag="5">266    </size>
<size tag="6">319    </size>
<size tag="7">372    </size>
<size tag="8">425    </size>
</portion-size>
<size-increment eight-plus="478">52.86    </size-increment>
</portion> 
```

我的 XQUERY（XML 到 HTML 部分）

```
for $x in food:food-item($food:fps-photo-atlas)/portion/portion-size
return
<i>{data($x/size)}</i>
} 
```

当前 XQuery 的当前结果

```
<i>55 108 161 214 266 319 372 425</i> 
```

首选结果..

```
<i>55</i>
<i>108</i>
<i>161</i>
<i>214</i>
<i>266</i>
<i>319</i>
<i>372</i>
<i>425</i> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T01:58:30.570

```
for $x in food:food-item($food:fps-photo-atlas)/portion/portion-size/size
return
<i>{data($x)}</i>
} 
```*

# php - 在 PHP 中解析 Lucene/SOLR debug.explain.structured xml 输出

> ID：10457993
> 
> 赞同：1
> 
> 时间：2012-05-05T01:17:19.027
> 
> 标签：php, xml, solr, lucene

solr 的调试模式解释功能的默认“人类可读”格式完全没有用。您可以通过传递 debug.explain.structured=true 来获得一些结构化的 xml 输出。

但是，它生成的 xml 也不是真正可用的，我需要能够在我的代码中的其他地方使用此调试信息。

在我重新发明轮子之前，我有两个问题：

1) 有谁知道现有的 PHP 类（或函数）会解析这个 xml 并将它变成一个有用的对象？（谷歌搜索没有发现任何明显的东西）

2) 对于那些熟悉 SOLR 调试模式的人，有没有比解析 debug.explain.structured xml 更好的方法来解决这个问题？

（我正在使用 SOLR 3.6）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T01:43:41.453

我正在使用[solr-php-client](http://code.google.com/p/solr-php-client/)执行此操作。我确实使用正则表达式来解析特定值，但很容易访问调试说明。

例如，这是我从调试说明中提取坐标值的方法：

```
$client = new Apache_Solr_Service($hostname, $port, $url);
$response = $client->search($q, $offset, $limit, $parameters);

$debug = reset($response['debug']['explain']); // get the first explanation
if (preg_match('#([\d\.]+) = coord\((\d+)/(\d+)\)#m', $debug, $matches)) {
    $coord = floatval($matches[1]);
    $overlap = intval($matches[2]); // the number of matching keywords
    $max_overlap = intval($matches[3]); // the total number of keywords
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:26:20.897

我遇到了同样的问题，并盯着一个 github 项目来将 solr 解释解析为对象结构。使用这个库，可以从解释输出中计算某个字段的影响：

[https://github.com/timoschmidt/php-solr-explain](https://github.com/timoschmidt/php-solr-explain)