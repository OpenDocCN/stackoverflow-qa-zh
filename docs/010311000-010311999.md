# StackOverflow 问答 10311000-10311999

# database - 如何获取 RavenDB 文档的名称

> ID：10311001
> 
> 赞同：2
> 
> 时间：2012-04-25T07:14:28.277
> 
> 标签：database, linq, ravendb

我的代码是：

```
using (var session = documentStore.OpenSession(databaseName))
{
    var list = session.Query<dynamic>("Raven/DocumentsByEntityName").ToArray();

    foreach (var item in list)
    {
        Console.WriteLine(item);
    }
} 
```

但它没有给我文件的名称。我想列出单个数据库中的所有文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:41:03.213

试试这样的东西，它更通用一点，它允许访问原始文档

```
using (var session = store.OpenSession())
{
    //Issue a dummy query to make sure the indexing has finished
    var dummyQuery = session.Query<dynamic>("Raven/DocumentsByEntityName")
        .Customize(x => x.WaitForNonStaleResultsAsOfLastWrite())
        .ToList();

    //First get all the document types, i.e. the different entity names
    var docTypes = store.DatabaseCommands.GetTerms("Raven/DocumentsByEntityName", "Tag", "", 128);
    foreach (var type in docTypes)
    {
        Console.WriteLine("\n{0}:", type);
        //Might need to do paging here, can only get at most 1024 docs in 1 go!
        var docs = store.DatabaseCommands.StartsWith(type, 0, 1024).ToList();

    foreach (var doc in docs)
    {
        Console.WriteLine("    {0}: {1}", doc.Key, doc.ToJson());
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:03:52.563

为指定的数据库修改 Matt Waren 的代码。

```
 public void DocumentNamesWithMetadata(string databaseName="1")
        {
            using (var session = documentStore.OpenSession(databaseName))
            {
                //Issue a dummy query to make sure the indexing has finished 
                var dummyQuery = session.Query<dynamic>("Raven/DocumentsByEntityName")
                                        .Customize(x => x.WaitForNonStaleResultsAsOfLastWrite())
                                        .ToList();

                //First get all the document types, i.e. the different entity names 
                var docTypes = session.Advanced.DatabaseCommands.GetTerms("Raven/DocumentsByEntityName", "Tag", "", 128);
                foreach (var type in docTypes)
                {
                    Console.WriteLine("\n{0}:", type);
                    //Might need to do paging here, can only get at most 1024 docs in 1 go! 
                    var docs = session.Advanced.DatabaseCommands.StartsWith(type, 0, 1024).ToList();

                    foreach (var doc in docs)
                    {
                        Console.WriteLine("    {0}: {1}", doc.Key, doc.ToJson());
                    }
                }
            }
        } 
```

# c# - 如何确定动态文本中子字符串的计数？

> ID：10311002
> 
> 赞同：0
> 
> 时间：2012-04-25T07:14:36.787
> 
> 标签：c#, string, substring

好的，所以我有这个字符串。

> 下一篇：准尉二级
> 21,202 / 33,000
> 21,202 / 33,000

这是我从很长的文本中获得的子字符串。现在“二等警官”以及数字可以是动态的（我正在从网页加载这些变量）如果有一个或数百个数字，它不会附加 0，所以少于一千的 exp 看起来像“478”而不是 00,478。

现在我的问题是如何获得“准尉2级”？我已经有了这个

```
int indexOfNext = myString.IndexOf("Next") + 6;  
//Below is what I need to obtain  
int count = 0;  
string newString = myString.Substring(indexOfNext, count); 
```

但是我将如何帮助确定获得排名的**计数？**或者创建一个包含所有等级和每个等级长度的数组会很简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:36:46.543

您可以使用正则表达式来搜索名称和级别，例如

```
var regExp = new Regex(@"^Next: (?<name>[^\d]+) Grade (?<level>[\d]+)"); 
```

这将匹配`Next:`以名称、`Grade`单词和级别开头的所有行。`name`和组的捕获值`level`可以稍后检索

```
var match = regExp.Match(input);
var level = match.Groups["level"].Value; 
```

或以您想要的方式修改它。

正则表达式操场：[Derek Slager 的更好的 .NET 正则表达式测试器](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

# javascript - 如何使用 javascript 或 jquery 卸载 firefox 插件

> ID：10311005
> 
> 赞同：-1
> 
> 时间：2012-04-25T07:14:42.340
> 
> 标签：javascript, jquery, firefox-addon

大家好。请帮我。我是 Firefox 扩展开发的新手，我有一个问题。如果用户访问我们客户提供的特定网站，我想从用户计算机中删除我的附加组件。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:49:40.003

仅使用 javascript 是不可能的，因为它需要访问文件系统。使用 flash 或 java 可能......但我对此表示怀疑。

# html - 如何创建独立框架？

> ID：10311006
> 
> 赞同：1
> 
> 时间：2012-04-25T07:14:50.453
> 
> 标签：html, css, iframe, frame

在我的页面中，我有一个框架。我需要独立设计框架并将其放置在我的页面中。我不想在它包含的页面中指定框架样式。但是在框架的样式表中。

我设计的框架如下
[http://jsfiddle.net/Hf2pR/](http://jsfiddle.net/Hf2pR/)

在我的页面中，我包含如下框架
[http://jsfiddle.net/9Lckh/](http://jsfiddle.net/9Lckh/)

问题是框​​架的宽度不是20%（我指定了20%）。
如何解决这个问题？
如何独立设计一个框架并通过包含它来使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:22:10.340

嘿，你可以像这样定义你的 iframe 宽度属性

```
<iframe class ='cLeft' src = './leftPanel.html' FRAMEBORDER="0" SCROLLING="yes" width="20%">
</iframe> 
```

现场演示
[http://jsfiddle.net/9Lckh/1/](http://jsfiddle.net/9Lckh/1/)

或这个

```
iframe
{
    border:none !important;
    width:20%;
} 
```

# javascript - 在 json 文件中定义日期

> ID：10311012
> 
> 赞同：12
> 
> 时间：2012-04-25T07:15:17.113
> 
> 标签：javascript, json, date

我想知道如何在 json 文件中设置今天的日期，就像我们在 js 中使用的那样。

是否有任何选项可以在 json 文件中指定 Date.today() ？

因为，每当我们读取 json 文件时，json 数据都有指定系统日期的日期对象。

希望，你会明白我想说什么。

提前致谢，

-拉贾。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T02:19:23.543

服务器端可以生成 ISO 格式的 JSON 日期，例如 "2012-04-30T02:15:12.356Z" 然后客户端可以解析并加载到日期对象中

```
new Date(Date.parse("2012-04-30T02:15:12.356Z")) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T07:22:18.460

JSON 是一种结构化的传输格式。它没有逻辑。

但这里有一些选择：

1.  为什么不直接获取读取文件的日期呢？

2.  让服务器生成包含生成日期的 JSON。但是，如果您想要当前日期，这并不理想。当您读取文件时，服务器生成的日期已经过去。

3.  构建一个解析字符串并使其搜索自定义标记的解析器。

[例如](http://jsfiddle.net/99NJV/)，特殊标记包含在`@{}`. 获取里面的命令，确定命令，执行替换。

```
var jsonString = '{"data1" : "foo","date" : "@{currentdate}"}' 
```

在这种情况下，我会找到`@{currentdate}`. 我应该创建一个与此命令对应的函数，以`@{currentdate}`在读取期间替换为当前日期（以您想要的格式）

```
var parsedString = jsonString.replace(/@\{(\w+)\}/g, function(match, group) {    
    if (group === 'currentdate') {
        return new Date();
    } 
    else if (group === 'anotherCommand') {
        return 'anotherValue';
    } //and so on
}); 
```

结果是这样的：

```
jsonString = '{"data1" : "foo","date" : "Fri May 04 2012 01:17:07 GMT-0700 (PDT)"}' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-01T05:48:57.443

我建议您考虑使用[JSON-js](https://github.com/douglascrockford/JSON-js) ( [json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js) ) 解析器，因为它解析所有标准 JSON，还允许您添加自定义解析处理逻辑，称为`reviver`函数，它非常适合您的场景。使用自定义处理程序调用 JSON 解析器的基本语法如下所示：

`var myObject = JSON.parse(myJSONtext, reviverFunction);`

使用您的示例输入作为指导，它可以设置为像这样工作：

```
var jsonTxt = '[{' +
        '"data1": "foo",' +
        '"Date":  "",' +
        '"childs": [{' +
            '"data2": "stack",' +
            '"Date": ""' +
        '}{}{}...]}]';    //and-on-and-on as in your comment

myData = JSON.parse(jsonTxt, function ( key, value ) {
    if ( key === 'Date') { return new Date(); }
    //any additonal custom logic you may need later...
}); 
```

[JSON in JavaScript 页面](http://www.json.org/js.html)提供了 JSON-js 的一般介绍，以及一些关于 JSON 的简要介绍信息，该页面还包含一些使用场景。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T04:43:33.960

你可以考虑利用像moment.js这样的流行库[http://momentjs.com/](http://momentjs.com/)

然后您可以将日期存储为 json 中的 YYYY-MM-DD 并让 moment 处理解析：

```
var dateString = '2012-11-01';
var someday = moment(dateString);
var formattedDate = someday.format('ddd, DD MMM YYYY'); // 'Thu, 01 Nov 2012' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T07:28:28.397

每次读取文件时计算当前系统数据不是更容易吗？我可能在这里缺少上下文，但我没有看到将其存储在文档中的意义。

如果你真的需要这样做，你可以这样做

```
var jsonObject = {"now":"new Date()"};
var date = eval(jsonObject.now); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-29T08:07:33.570

如果您想存储日期，我更愿意将其存储为格式为 yyyy/mm/dd hh:mm:ss 或类似格式的字符串，并在我想在 Date 对象中读取它时将其解析为我需要的语言。

```
obj = {
    dates : ['2012/04/30 10:14:23', '2012/05/01 05:34:01']
} 
```

我不明白您到底想要什么，使用 eval 方法（这是一种丑陋的做法），您可以添加一个方法来将实际日期放入对象中，并且还可以将自己添加到子项中并调用子项中添加的方法。

```
obj = {
    data : "foo",
    addDate : function() {
        this.date = newDate();
        if (this.children) {
            for (var i = 0; i < this.children.length; i++) {
                this.children[i].addDate = this.addDate;
                this.children[i].addDate();
            }
        }
    },
    children : [{
        data : "foo2"
    }]
} 
```

PS如果要将其存储在文件中，则必须使用 eval 方法（不推荐）将方法存储为字符串或每次加载文件时

```
jsonLoaded; // this var has the json that you store in a file;
var addDate = function() {
    this.date = newDate();
    if (this.children) {
        for (var i = 0; i < this.children.length; i++) {
            this.children[i].addDate = this.addDate;
            this.children[i].addDate();
        }
    }
    this.addDate = null; // remove the function we have added
    // delete this.addDate; // if is compatible with browser
}
jsonLoaded.addDate = addDate;
jsonLoaded.addDate(); 
```

您不能使用函数对 json 对象进行字符串化，因此，在添加方法 addDate 后的第二个方法中，我们将其从 json 对象中删除（您也可以删除 this.addDate，但我不知道它是否适用于 IE )

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T13:50:54.083

收集您想要转移到的所有日期会很好

```
Collection<String> dates = new ArrayList<String>(); 
```

将此集合转换为 json 对象，然后在接收端将其转换回日期。您可以使用 joda 日期时间 API 进行转换。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-14T16:14:46.697

我在 java 中使用 Gson 创建 json 输出，但是 Gson 不允许我将 javascript 函数放入 json 中。所以这就是我要做的：在你想要放置代码的地方使用替换标签（比如早期的答案之一）。然后获取json的文本，替换标签，然后将文本保存到你的json文件中：

```
 Map<String, String> dynamicDates = new HashMap<>();
    dynamicDates.put("d1", "new Date()");
    dynamicDates.put("d2", "new Date(2015, 0, 1, 9, 30)");
    dynamicDates.put("d3", "new Date(2015, 0, 1, 12, 30)");

    JsonObject json = new JsonObject();
    JsonObject root = new JsonObject();
    JsonObject level_1_A = new JsonObject();
    JsonObject level_1_B = new JsonObject();
    json.add("root", root);
    root.add("level_1_A", level_1_A);
    root.add("level_1_B", level_1_B);

    level_1_A.addProperty("d1", "${d1}");
    level_1_A.addProperty("d2", "${d2}");
    level_1_B.addProperty("d3", "${d3}");

    StringBuilder sb = new StringBuilder();
    new GsonBuilder().setPrettyPrinting().create().toJson(json, sb);

    String str = sb.toString();
    for (String key : dynamicDates.keySet()) {
        str = str.replace("\"${" + key + "}\"", dynamicDates.get(key));
    }
    String jsonText = str;
    String javascriptText = "var myJson = " + str + ";";

    System.out.println(jsonText);
    System.out.println(javascriptText); 
```

所以在使用这个 json 时，消费端没有什么可做的。第一个输出是：

```
 {
      "root": {
        "level_1_A": {
          "d1": new Date(),
          "d2": new Date(2015, 0, 1, 9, 30)
        },
        "level_1_B": {
          "d3": new Date(2015, 0, 1, 12, 30)
        }
      }
    } 
```

我对 json 的使用通常是将其保存为带有分配的 javascript，所以这对我有用。

# jquery - 页面加载后 JQuery 显示页面

> ID：10311013
> 
> 赞同：0
> 
> 时间：2012-04-25T07:15:18.057
> 
> 标签：jquery

我想在页面加载后显示页面并放置一个微调器。

为了做到这一点，我在网上搜索并找到 jquery 加载插件，但它现在在存档中。有替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:18:23.690

为自定义块制作一个css作为

```
display:none; 
```

并在页面完全加载后通过 JS 更改此行为

```
setAttribute('display', 'block') 
```

但是如果 JS 被禁用，块仍然会保持不可见。

PS：在某些网络服务器中，有一个选项在页面内容完全呈现之前不加载页面内容，但这会使用户看到空白页面，这是不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:22:35.677

如果您通过 ajax 加载页面，则在 ajax 调用的开头显示包含微调器的 div，然后在成功函数中显示页面并隐藏包含微调器的 div。

# java - 了解 ActionListener

> ID：10311014
> 
> 赞同：1
> 
> 时间：2012-04-25T07:15:19.087
> 
> 标签：java, swing, actionlistener

我刚刚开始了解 Java 本身和 Java Swing，但我在理解“动作侦听器”概念时遇到了一些问题。人们说 C# 和 Java 非常相似，但是当您实际尝试它们并进行比较时，那就是另一回事了。

我有以下自动生成的按钮动作监听器：

```
btnNewButton.addActionListener(new ActionListener() 
{
    public void actionPerformed(ActionEvent e) 
    {
        lblNylabel.setText("New label text");
    }
}); 
```

我是这样理解的：

1.  **您通过对象“btnNewButton” btnNewButton.addActionListener()**调用非静态方法
***   该方法将一个 ActionListener 实例作为参数*   自动化代码通过“new ActionListener()”构造函数调用实例化一个 ActionListener 实例 - 我不明白的是我自己不能实例化 ActionListener 类，但它可以作为方法调用中的参数？*   在新实例主体内生成“actionPerformed”方法并在此处使用（什么？）*   在“actionPerformed”方法中，您定义单击按钮时要做什么 - 非常有意义**

 **是否有可能以更理解/更简单的方式来帮助我理解 ActionListener 概念？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T07:19:28.463

> ***我不明白的是我自己无法实例化 ActionListener 类，但它可以作为方法调用中的参数？***

当你这样做

```
new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        lblNylabel.setText("New label text");
   }
} 
```

你实际上是在创建一个[匿名子类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)的实例`ActionListener`。

它在语义上等同于做

```
class AnonymousActionListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        lblNylabel.setText("New label text");
   }
}

btnNewButton.addActionListener(new AnonymousActionListener()); 
```

（还有 tada，作为奖励，您刚刚了解到您可以在 Java 中拥有[*方法本地类*](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_11.htm);-)

* * *

以下是一些常见的替代方案：

1.  使用**单独的普通类**：

    ```
    class MyActionListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            lblNylabel.setText("New label text");
        }
    }

    class YourClass {

        public void yourMethod() {
            ...
            btnNewButton.addActionListener(new MyActionListener());
        }
    } 
    ```

    （仅当其他类可以访问所需的变量时才有可能。）

2.  与上面相同，但具有**内部（非静态）类**：

    ```
    class YourClass {

        public void yourMethod() {
            ...
            btnNewButton.addActionListener(new MyActionListener());
        }

        // Inner class
        class MyActionListener implements ActionListener {
            public void actionPerformed(ActionEvent e) {
                lblNylabel.setText("New label text");
            }
        }
    } 
    ```

    （这里`lblNylabel`可能是内部类的范围。）

3.  让**封闭类本身实现`ActionListener`**并`this`用作参数`addActionListener`：

    ```
    class YourClass implements ActionListener {

        public void yourMethod() {
            ...
            btnNewButton.addActionListener(this);
        }

        public void actionPerformed(ActionEvent e) {
            lblNylabel.setText("New label text");
        }
    } 
    ```**

# android - layout_centerHorizo ntal 未居中

> ID：10311015
> 
> 赞同：1
> 
> 时间：2012-04-25T07:15:19.393
> 
> 标签：android, android-layout

我有一个相对布局，在其中我放置了 3 个项目、2 个图像视图和一个滚动视图。我的布局是这样的...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:gravity="center"
    android:orientation="horizontal"
    android:baselineAligned="true"
    android:background="@drawable/background">

    <RelativeLayout
        android:id="@+id/logosLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:layout_weight="1"
        android:layout_margin="16dp"
        android:gravity="center">

        <!-- An image will be placed here -->

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="16dp"
        android:layout_marginRight="16dp"
        android:layout_weight="1"
        android:background="#33ffffff"
        android:gravity="center"
        android:orientation="vertical">

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:src="@drawable/up" />

        <ScrollView
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_margin="8dp"
            android:fadingEdgeLength="32dp"
            android:scrollbars="none" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageButton
                    android:id="@+id/hotelBtn"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:adjustViewBounds="true"
                    android:background="@drawable/button_background"
                    android:contentDescription="@string/hotelBtnDesc"
                    android:gravity="center"
                    android:src="@drawable/icon1" />

                <TextView
                    android:id="@+id/hotelBtnDescTxtVw"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="10dp"
                    android:gravity="center"
                    android:text="@string/hotelBtnDesc"
                    android:textColor="#ffffff"
                    android:textSize="14sp" />

                    <!-- more scrollview items -->
            </LinearLayout>

        </ScrollView>

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true" 
            android:src="@drawable/down" />

    </RelativeLayout>

</LinearLayout> 
```

上面的代码产生了这里显示的视图：

![上面执行的代码](../Images/1db83c8120c50a3558ca50caa9d1b180.png)

您可能会注意到箭头未在中心对齐，而是略微向右移动。为什么会这样，我该如何解决？请注意，我已经将 android:layout_centerHorizo​​ntal="true" 用于我的图像视图。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:29:11.100

你的问题

```
android:layout_margin="8dp" 
```

从 scrollview 和 imageView 中删除它

并将其传递给`RelativeLayout`direct。

或添加

```
android:layout_marginTop="8dip"
android:layout_marginBottom="8dip" 
```

在你的`RelativeLayout`.

并通过

```
android:layout_centerHorizontal="true" 
```

到你的滚动视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:18:14.260

尝试`android:layout_weight="1"`从您的**RelativeLayout**中删除，看看它是否有效。

* * *

在您的 LinearLayout 中，`android:orientation="horizontal"`导致您的显示水平对齐的属性。因此，您的 RelativeLayout 位于中心，但由于它与另一个布局共享，这就是您无法注意到差异的原因。如果您完全删除了第一个 RelativeLayout （带有 id *logosLayout*的那个），那么我希望您会在中心看到第二个布局。

因此，首先您需要定义所需的布局层次结构，然后相应地调整视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:19:38.000

如果考虑到 marginRight，它们与中心对齐，请尝试添加`android:layout_margin="8dp"`到箭头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T07:27:38.527

您需要设置相对布局下的图像视图设置此图像视图宽度填充父级。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T07:43:31.540

您的 android:layout_margin="8dp" 似乎有问题，仅适用于您的滚动视图，并将其直接传递给 RelativeLayout，而不是使用边距使用 padding =“8dp”。

# c++ - 更改函数指向的内容

> ID：10311019
> 
> 赞同：1
> 
> 时间：2012-04-25T07:15:40.350
> 
> 标签：c++, function, pointers

我一直在玩 c/c++ 中的指针和函数指针。由于您可以获得函数的地址，因此您可以更改函数调用实际结束的位置吗？

我尝试获取函数的内存地址，然后将第二个函数地址写入该位置，但它给了我访问冲突错误。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:21:15.233

函数指针是变量，就像整数和双精度数一样。函数的地址是不同的。`.text`它是二进制部分中函数开始的位置。您可以将函数的地址分配给相同类型的函数指针，但是该`.text`部分是只读的，因此您不能修改它。写入函数的地址会尝试覆盖函数开头的代码，因此是不允许的。

**注意**：如果您想在运行时更改函数调用结束的位置，您可以创建称为虚拟调度表或 vtable 的东西。这是一个包含函数指针的结构，在诸如 c++ 之类的语言中用于多态性。

例如：

```
struct VTable {
    int (*foo)(void);
    int (*bar)(int);
} vTbl; 
```

在运行时，您可以更改`vTbl.foo`和`vTbl.bar`指向不同函数的值，并且任何对新函数的调用`vTbl.foo()`或`.bar`将被定向到新函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:22:10.323

在某些环境中，可以“修补”函数的开始指令以使调用转到其他地方。这是一种不寻常的技术，不用于正常编程。如果您有一个现有的编译程序并且需要更改它与操作系统的交互方式，有时会使用它。

[Microsoft Detours](https://research.microsoft.com/en-us/projects/detours/)是具有此功能的库的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T07:36:58.930

如果你试图调用的函数是内联的，那么你就很不走运了。但是，如果它*不是*内联的，那么可能有一种方法：

在 Unix 系统上，有一个称为动态链接器的通用特性，`LD_PRELOAD`它允许您使用自己的版本覆盖共享库中的函数。请参阅问题[什么是 LD_PRELOAD 技巧？](https://stackoverflow.com/questions/426230/what-is-the-ld-preload-trick)对此进行一些讨论。如果您尝试劫持的函数不是从共享库加载的（即，如果它是可执行文件的一部分，或者如果它来自静态链接库），那么您可能不走运。

在 Windows 上，还有其他攻击媒介。如果要挂钩的函数是由某个DLL导出的，你可以使用[Import Address Table Patching](http://jpassing.com/2008/01/06/using-import-address-table-hooking-for-testing/)来劫持它，而无需修改函数的代码。如果它不是由 DLL 导出的，*但*您可以获得它的地址（即通过获取函数的地址），您可以使用免费（并且强烈推荐）[N-CodeHook](http://newgre.net/ncodehook)项目之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T07:19:34.173

您可以更改函数指针指向的内容，但不能更改普通函数，也不能更改函数包含的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T07:23:24.513

您通常无法找到函数的结束位置。语言中没有这样的标准功能，编译器可以以这样的方式优化代码，使函数的代码不连续，实际上没有单点结束，为了找到代码结束的地方，需要使用一些非标准工具或反汇编代码并理解它，这不是您可以轻松编写程序自动完成的事情。

# php - 如何检查mysql中是否已经存在字符串（所有字序选项）？

> ID：10311020
> 
> 赞同：1
> 
> 时间：2012-04-25T07:15:46.560
> 
> 标签：php, mysql, sql

假设我检查是否

```
 $strig = "how can i do this"; 
```

我的数据库中已经存在所有单词顺序选项？比如：“我怎么能这样做”或“我能怎么做”……

我的数据库看起来像：

```
 id    string
  1    how can i do this
  2    hello how are you
  3    how i can do this world
  4    another title
 etc   etc 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:50:08.993

可能的组合数量为`n!`（您的示例中为 120），因此检查此字符串是否已存在是一项非常复杂的任务。
我建议使用以下算法：

*   `StringHash`在表格中添加新列
*   在插入您的字符串时（例如按字母顺序），计算其哈希值并存储在`StringHash`：
    `"how can i do this" => "can do how i this" => md5("can+do+how+i+this")`
*   如果要检查数据库中是否存在某个字符串，则再次如上所述计算其哈希并查询数据库`YourTable.StringHash`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T08:18:52.290

如果您只想在 sql 中解决此问题，这是一个棘手的问题，但除此之外：

正如@er.anuragjain 所说，您可以使用 进行查询`LIKE %word%`，但您的示例“3”也会受到影响。

因此，如果您有这样的查询：

```
SELECT * FROM table WHERE
     column LIKE '%how%' 
AND  column LIKE '%can%'
AND  column LIKE '%i%'
AND  column LIKE '%do%'
AND  column LIKE '%this%' 
```

然后你也得到数字3。所以你需要检查是否没有**其他**单词。您可以通过检查字数来做到这一点（如果您有 5 个单词并且所有单词都在其中，那么您就完成了。）。

检查字数并非易事，但有一个窍门。来自多个来源*：

```
SELECT LENGTH(total_words) - LENGTH(REPLACE(total_words, ' ', ''))+1
FROM tbl_test; 
```

应该做的伎俩。所以检查`LIKE`'s，检查字数，你就完成了。但我不确定这是一个很好的解决方案:)

*   [http://www.webtechquery.com/index.php/2010/03/count-number-of-words-in-mysql-mysql-words-count/](http://www.webtechquery.com/index.php/2010/03/count-number-of-words-in-mysql-mysql-words-count/) 和[http://www.mwasif.com/2008/12 /count-number-of-words-in-a-mysql-column/](http://www.mwasif.com/2008/12/count-number-of-words-in-a-mysql-column/) （随机谷歌点击:)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:23:33.030

您可以询问您正在搜索的字符串是否包含：`"how" and "can" and "I" and "do" and "this"` 类似这样的内容：（我不知道 mysql 中的语法，但请参阅概念）

```
 if(string.contain("how")&&
       string.contain("can")&&
       string.contain("I")&&
       string.contain("do")&&
       string.contain("this"))
     {
       //you find the string
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T07:30:48.687

应该是mysql中的通配符调用

```
select * From tablename Where columnname LIKE '%how%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T07:49:21.573

如果您使用的是mysql，那么试试这个..

```
select * from tablename where columnname Like '%how%' AND columnname LIKE '%can%' AND columnname LIKE '%I'% AND columnname LIKE '%DO'% AND columnname LIKE '%This'%; 
```

在这里，如果您有动态值，`$string`则首先将其转换为按空间拆分的数组。然后从数组中创建一个`$condition`变量并将其附加到 `select * from tablename`where 并运行该查询。

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-16T00:02:22.763

你可以使用正则表达式首先创建一个这样的函数

```
public function part($str){
    $str = str_replace('‌',' ',$str);
    $arr = explode(' ',$str);
    $rejex = '';
    foreach($arr as $item){
        $rejex .= "(?=.*$item)";
    }
    return $rejex;
} 
```

然后使用 sql 正则表达式

```
$sql = "SELECT * FROM `table` WHERE `column` REGEXP ".part($str); 
```

# android - 安卓 JDBC 错误

> ID：10311028
> 
> 赞同：0
> 
> 时间：2012-04-25T07:15:56.903
> 
> 标签：android

上周四（2012 年 4 月 19 日）我的这段代码运行良好：

```
 Connection conn = null;
    Statement inst;
    try {
        System.out.println("Connected to the database");
        Class.forName ("net.sourceforge.jtds.jdbc.Driver");
        //217.126.108.151
        conn = java.sql.DriverManager.getConnection("jdbc:jtds:sqlserver://localhost:1433/prueba;sa;sa1234");
        inst = conn.createStatement();
        System.out.println("Connected to the database");
        inst.executeUpdate("INSERT INTO TIENDAS (NOMBRE) VALUES ('ZZZZZZZ') ");
        conn.close();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

但在 Android SDK 的最后一次更新后停止工作。

现在我得到这个错误：

**java.lang.RuntimeException：找不到消息属性 prop.servertype 的消息资源**

有谁知道为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:48:24.443

清理您的项目并再次重建。如果您遇到同样的问题，请尝试以下方式.. -> 而不是 url 中的 localhost 使用这个 ip：10.0.2.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T13:26:21.470

我不确定，但由于 Android >=3.0，网络连接必须在单独的线程或任务中运行。但如果这是问题所在，你应该得到另一个例外。但是试一试 :) 并且不要忘记检查清单中的权限。

# image - jpeg压缩中发生损失的步骤是什么？

> ID：10311035
> 
> 赞同：0
> 
> 时间：2012-04-25T07:16:42.530
> 
> 标签：image, compression, jpeg

JPEG是一种有损图像压缩，可以提供高压缩比。据我所知，JPEG 在量化过程中会发生信息丢失。

JPEG压缩中是否还有其他步骤会发生或可能发生丢失？如果发生，那么在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T16:22:04.150

JPEG 压缩有 3 个方面会影响图像的质量和准确性：

1）在量化阶段发生精度损失。为了减少生成的数据量，颜色的准确性会丢失。
2) 在与 RGB/YCC 颜色空间的转换过程中引入了错误。
3) 在频域转换过程中引入了误差。离散余弦变换将像素转换为频域。这种转换会在两个方向上产生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T04:06:14.947

JPEG 压缩中*可能*发生损失的另一个地方是[色度二次采样阶段](http://en.wikipedia.org/wiki/Jpeg#Downsampling)。

我的理解是大多数 JPEG 压缩图像使用 4:2:0 颜色子采样：在将每个像素从 RGB 转换为 YCbCr 之后，2x2 像素块的 Cb 值被平均为单个值，并且该 2x2 的 Cr 值像素块也被平均为单个值。

JPEG 标准还支持 4:4:4（无下采样）。

# visual-studio - 使用 TFS 时如何手动解决冲突并将其标记为已解决？

> ID：10311036
> 
> 赞同：6
> 
> 时间：2012-04-25T07:16:44.523
> 
> 标签：visual-studio, tfs, merge

来自 SVN 世界这很容易：1）进行合并并产生冲突。SVN 为您提供工作副本中的冲突文件。2）以您需要的任何方式解决它们（如果需要，使用任何外部工具）。3) "svn resolved" 将冲突标记为已解决。4) 签到（或继续工作等）。

现在使用 TFS 和 Visual Studio (2010)，我们似乎只有以下选项： - -> 在 TFS 合并工具中合并（仅限文本文件）。-> 对于非文本文件，取源分支文件（覆盖目标分支文件）或保留目标分支文件（忽略源分支文件）。

我需要能够使用外部工具（例如 Erwin）解决我的某些文件类型的冲突，然后将冲突标记为已解决。

我尝试解决冲突，将新文件放入目标分支文件系统工作区（即工作副本）并使用“tf resolve /auto:DeleteConflict”。那没有帮助。当我最终签入合并时，本地已解决/合并的文件被完全忽略。

当然 TFS/VS 可以做到这一点！

任何帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:42:25.183

您可以在 Visual Studio 中为比较和合并设置特定规则。它位于**Tools->Options->Source Control->Visual Studio Team Foundation Server**下。选择**Configure User Tools...**，然后您可以从那里选择任何外部工具用于您的操作。

您可以使用文件过滤器定义任意数量的规则，并在此处为“合并”操作添加任何自定义工具：
![**在此处输入图片描述**](../Images/d0b33db9fa66d54daebbbfe6438e57ca.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:02:33.853

一旦您在磁盘上获得了所需的内容（在手动使用合并工具之后）而不是运行“tf resolve /auto:DeleteConflict”，请运行“tf resolve /auto:AcceptMerge”。这告诉 TFS 接受磁盘上的内容作为合并的分辨率。

# c++ - 在 cpp 中运行计时器，与正在执行的程序并行

> ID：10311041
> 
> 赞同：1
> 
> 时间：2012-04-25T07:17:02.330
> 
> 标签：c++, opencv, timer

我在 Windows 7 机器上的 Visual Studio 上运行 OpenCV 应用程序。作为最终应用程序的一部分，我需要一个与正在执行的 OpenCV 应用程序并行运行的计时器。OpenCV 应用程序具有实时视频捕获作为眨眼检测算法的输入。OpenCV 代码必须连续运行，不能暂停或停止。但是，要找到眨眼之间的间隔，我需要在每次眨眼后运行一个计时器。所以定时器必须在检测到闪烁时运行。我已经完成了 SetTimer 和 CreateTimerQueueTimer 函数，但无法清楚地了解如何去做。有没有其他方法可以在 C++ 程序中运行计时器？任何建议和解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:24:07.063

为什么需要一个计时器来计算眨眼之间的间隔？你不能只存储每次眨眼的当前时间并从之前的时间中减去它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:24:10.343

`c++11`你可以用它来`std::chrono`制作一个简单的计时器：

```
 auto start = std::chrono::high_resolution_clock::now();
  // do processing here
  auto end = std::chrono::high_resolution_clock::now();
  std::cout << "time was " << 
    std::chrono::duration_cast<std::chrono::nanoseconds>(end - start).count(); 
```

针对其他答案的评论进行编辑，您可以执行以下操作：

```
...
auto take = (end - start);

if(take > std::chrono::nanoseconds(x)) {
  // ... do whatever you want here
} 
```

哦，要提一提的是，您可以将 替换为`nanoseconds`任何其他时间单位。

# asp.net-mvc-3 - MVC3 中的客户端验证不起作用

> ID：10311042
> 
> 赞同：0
> 
> 时间：2012-04-25T07:17:02.593
> 
> 标签：asp.net-mvc-3, custom-attributes, client-side-validation

下面是客户端验证不起作用的代码......我在这个论坛中搜索了几个问题并写了这个..

这是自定义验证属性“startDateAttribute”

```
 [AttributeUsage(AttributeTargets.Field | AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
    public class StartDateAttribute : ValidationAttribute, IClientValidatable
    {
        public StartDateAttribute ()
        {
        }

        public override bool IsValid(object value)
        {   
            var date = (DateTime)value;
            if (date.Date >= DateTime.Now.Date)
            {
                return true;
            }
            return false;
        }

        public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
        {
            yield return new ModelClientValidationRule
            {
                ErrorMessage = this.ErrorMessage,
                ValidationType = "DateRange"
            };
        }
    }

    [CurrentDateAttribute(ErrorMessage = "select the correct date")]    
    public DateTime? StartDate { get; set; } 
```

这是添加的 JQuery 代码

```
 jQuery.validator.addMethod('DateRange', function (value, element, params) {
     var d = new Date();         
     var currentDate = (d.getMonth()+1)  + "/"+d.getDate()+ "/" + d.getFullYear() ;
    return value >= currentDate;
});

// and an unobtrusive adapter
jQuery.validator.unobtrusive.adapters.add('DateRange', { }, function (options) {
    options.rules['DateRange'] = true;
    options.messages['DateRange'] = options.message;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:53:38.577

客户端验证的要求之一是 ValidationType 和适配器名称应该匹配并且应该是小写的。

将 ValidationType 和适配器名称更改为“日期范围”并检查

# jsf - JBoss 7.1、JSF、RichFaces - 丰富的组件不想渲染

> ID：10311045
> 
> 赞同：1
> 
> 时间：2012-04-25T07:17:21.083
> 
> 标签：jsf, jboss, richfaces

我现在正在为我的 JSF 项目学习 RichFaces，但是在我的环境中渲染丰富的组件时遇到了问题。

我已使用 module.xml 将 RichFaces jar（来自 RichFaces 页面的所有 4 个 jar）添加到 JBoss 模块（E:\JBoss\modules\org\richfaces\main）：

```
<module xmlns="urn:jboss:module:1.1" name="org.richfaces">
<resources>
<resource-root path="richfaces-components-api-4.2.1.Final.jar"/>
<resource-root path="richfaces-components-ui-4.2.1.Final.jar"/>
<resource-root path="richfaces-core-api-4.2.1.Final.jar"/>
<resource-root path="richfaces-core-impl-4.2.1.Final.jar"/>
<!-- Insert resources here -->
</resources>
<dependencies>
<module name="org.w3c.css.sac"/>
<module name="net.sourceforge.cssparser"/>
<module name="com.sun.jsf-impl"/>
<module name="javax.api"/>
<module name="javax.faces.api"/>
<module name="javax.xml.bind.api"/>
<module name="javax.xml.jaxp-provider"/>
<module name="com.google.guava"/>
</dependencies>
</module> 
```

默认配置下，所有依赖项都添加到 jboss 模块中。

我使用教程中的 RichFaces 创建了简单的 JSF 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j">

<h:head></h:head>
<body>
    <rich:panel>
        <f:facet name="header">
        Write your own custom rich components with built-in AJAX support
        </f:facet>
        <h:outputText value="Panel Body" />
    </rich:panel>
    <rich:panel>
        <f:facet name="header">
        Write your own custom rich components with built-in AJAX support
        </f:facet>
        <h:outputText value="Panel Body" />
        <a4j:form>
            <h:outputText value="The integer version of the selected color:" />
            <h:outputText id="RGBvalue" value="#{colorPickerBean.color}" />
            <rich:panel header="RichFaces Color Picker" style="width: 315px">
                <rich:colorPicker value="#{colorPickerBean.color}" colorMode="rgb"
                    converter="org.richfaces.IntegerColor">
                    <a4j:support event="onchange" reRender="RGBvalue" />
                </rich:colorPicker>
            </rich:panel>
        </a4j:form>
    </rich:panel>

</body>
</html> 
```

head 标记中的两个 xmlns 都以“NLS 缺失消息：CANNOT_FIND_FACELET_TAGLIB in：org.eclipse.jst.jsf.core.validation.internal.facelet.messages”突出显示

我已经为 JBoss 部署了我的新 xhtml 页面，现在没有正确处理丰富的组件。下一个清单显示了已部署页面的来源。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j"><head></head>
<body>
    <rich:panel>Panel Body
    </rich:panel>
    <rich:panel>Panel Body
        <a4j:form>The integer version of the selected color:<span id="RGBvalue"></span>
            <rich:panel header="RichFaces Color Picker" style="width: 315px">
                <rich:colorPicker colorMode="rgb" converter="org.richfaces.IntegerColor">
                    <a4j:support event="onchange" reRender="RGBvalue"></a4j:support>
                </rich:colorPicker>
            </rich:panel>
        </a4j:form>
    </rich:panel>

</body>
</html> 
```

我在 WebContent/META-INF 中的 jboss-deployment-structure.xml：

```
<jboss-deployment-structure>
    <sub-deployment name="Tutorial2.war">
        <dependencies>
            <module name="org.richfaces" slot="main">
                <imports>
                    <include path="**" />
                </imports>
            </module>
        </dependencies>
    </sub-deployment>
</jboss-deployment-structure> 
```

模块定义如链接[https://issues.jboss.org/browse/RF-12008中所示](https://issues.jboss.org/browse/RF-12008)

经过几次更改后，我得到了

```
00:29:52,455 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.deployment.unit."Tutorial2.war".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit."Tutorial2.war".STRUCTURE: Failed to process phase STRUCTURE of deployment "Tutorial2.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [rt.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.6.0_31]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_31]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: Sub deployment Tutorial2.war in jboss-structure.xml was not found. Available sub deployments: 
    at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.subDeploymentNotFound(DeploymentStructureDescriptorParser.java:233) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.deployment.module.descriptor.DeploymentStructureDescriptorParser.deploy(DeploymentStructureDescriptorParser.java:159) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more 
```

将 jboss-deployment-structure.xml 添加到 WEB-INF 后立即发生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:54:28.520

这看起来可能是eclipse的问题。似乎 eclipse 和 JSF 有几个不同的问题。他们中的大多数人似乎都在说[这个](https://stackoverflow.com/a/7546248/152794)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:56:50.710

请参阅 jboss 论坛上的以下讨论 [https://community.jboss.org/message/633025#633025](https://community.jboss.org/message/633025#633025) 并搜索正确答案

您应该提供 jboss7 特定的部署描述符 jboss_deployment_structure.xml 以使richfaces 模块可用于您的应用程序

# php - 如何在 PHP 中保存这个字符串？

> ID：10311051
> 
> 赞同：1
> 
> 时间：2012-04-25T07:17:56.153
> 
> 标签：php, mysql

当我在 PHP 中保存这个字符串时：

```
John: "Yes you can". 
```

在我的数据库中保存为：

```
John: \ 
```

我怎样才能用“（显然不删除”）保存这些字符串。这是我的 php 代码：

```
$titlepost= mysql_real_escape_string($_POST['title']);
$query = "INSERT INTO `titles` (`title`) VALUES ( '".$titlepost."')";
$res = mysql_query($query) or die("Failed".mysql_error() );

echo $titlepost;

output: 
John: \\ 
```

形式：

```
$title = mysql_real_escape_string($_GET['title']);

<form method="post" action="title.php?done=yes" enctype="multipart/form-data">
<input type="text" size="25" name="title" <?php echo "value=\"".$title."\""; ?> > 
<input id="starit" name="submit" value="titleit" type="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:12:11.547

您的问题与 PHP 或 MySQL 无关。

它就像非常简单的 HTML 语法规则一样愚蠢。很明显，代码

```
<input value="John: "YES you can> 
```

将仅显示引用的“John:”部分。为了使其正确，必须在值中编码特殊符号

```
$titlepost = htmlspecialchars($titlepost,ENT_QUOTES);
?>
<input type="text" name="title" value="<?=$titlepost?>"> 
```

As for the slashes - it is silly excessive quoting issue. just quote your strings only once and make sure you have `magic_quotes_gpc` turned off

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:24:41.360

如果您真的只是进入`John: \`数据库，听起来您正在使用*魔术引号*（这会导致您在数据库中插入反斜杠，因为您正在转义转义的字符串）**并且**列大小太小（这就是为什么反斜杠之后的任何内容不见了）。

试试这个：

```
if(get_magic_quotes_gpc()) $_POST = array_map('stripslashes', $_POST);
$titlepost = mysql_real_escape_string($_POST['title']); 
```

这确保它`$_POST`不包含任何使用`mysql_real_escape_string`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T07:24:23.287

尝试使用 PDO 中的准备好的语句

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

> 准备好的语句的参数不需要引用；驱动程序会自动处理这个。如果应用程序专门使用预准备语句，开发人员可以确定不会发生 SQL 注入（但是，如果查询的其他部分是使用非转义输入构建的，则 SQL 注入仍然是可能的）。

# php - 直到字符串的结尾 - 正则表达式

> ID：10311053
> 
> 赞同：0
> 
> 时间：2012-04-25T07:18:03.170
> 
> 标签：php, regex, replace

我正在解析一个外部提要，其中包含我想删除的帖子标题中的位置和日期，所以：

`This happened on Date in Location`

我需要找到`on`（空间上的空间）并删除所有内容，直到行尾，对于`in`（空间中的空间）也是如此。

我用谷歌搜索了一下，但正则表达式对我来说真的是深不可测，所以我很感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:23:33.320

好吧，文字“ `on`”确实完全匹配。然后告诉正则表达式引擎匹配后面的所有内容：“ `.*`”。（请注意，`.`不匹配换行符，因此它可以根据需要工作。）

在“ `in`”的情况下，您需要一个替代方案，它由括号`()`和竖线标记`|`：“ `(on|in)`”。您还可以使用字符类使其更紧密`[]`：“ `[oi]n`”。

这样我们就得到了这个正则表达式：

```
/ [oi]n .*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:22:51.417

到行尾？那我想：

```
preg_replace("/(?:on|in).*?(\n|$)/", "", 'This happened on Date in Location'); 
```

会做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:35:49.403

如果您想删除 and 之后的所有内容`on`，`in`而不是`on`and`in`本身，请使用否定的lookbehind。

```
(?<=\son\s).* 
```

和

```
(?<=\sin\s).* 
```

[http://regexr.com?30ops](http://regexr.com?30ops)

# c# - 什么是实现“停止/取消”按钮以停止线程的好方法（这不是后台工作人员）

> ID：10311054
> 
> 赞同：0
> 
> 时间：2012-04-25T07:18:06.170
> 
> 标签：c#, wpf

我有一个 WPF 应用程序，它与远程服务器进行大量对话，因此为了保持 UI 美观和响应迅速，我将这些操作放在第二个线程中。有一些可能的情况，虽然不太可能，但该线程会挂起，永远阻塞。有没有一种简单的方法可以实现不涉及调用 thread.Abort() 的“取消”按钮？我看到很多人建议不要使用它，我不想留下任何未发布的资源。也许是一种强制线程抛出异常的方法？

我在标题中指定这不是后台工作人员，因为程序不使用它们。它已经用普通的旧线程编码了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:47:09.657

我绝对同意您需要修复已损坏的内容的评论，因为这是真正的问题，但如果您目前无法解决，则需要继续操作。如果您使用的是 .Net 4.0，请使用任务库。您可以创建一个任务并将其传递给将在不同线程上执行的操作。关键是您可以将取消令牌传递给该任务。

[http://msdn.microsoft.com/en-us/library/dd997396.aspx](http://msdn.microsoft.com/en-us/library/dd997396.aspx)

如果您一遍又一遍地触发相同的操作，您还可以检查任务状态并对此进行处理。

```
//this is just a sample
 if (myTask != null) //meaning it's still exe'ing your action
{
    if (myTask.Status == TaskStatus.Faulted) //there's some kind of a problem with exe'ing it
    myTask = null; // could reset to run the action again
    else
        return; //let the task finish
}

myTask = Task.Factory.StartNew (() =>
        {
            ExecuteUMyAction ();
        }); 
```

# asp.net-mvc - ASP.NET MVC SiteMap 提供程序不会从属性生成站点地图节点

> ID：10311055
> 
> 赞同：0
> 
> 时间：2012-04-25T07:18:06.310
> 
> 标签：asp.net-mvc, nodes, mvcsitemapprovider

**更新：** *尽管有以下所有文本，但问题相当小 - 站点地图配置中 includeAssembliesForScan 参数中的错误程序集名称。它不应包含“.dll”部分。*

我有 v. 3.2.2.0 的 MvcSiteMapProvider。

[如此处](https://github.com/maartenba/MvcSiteMapProvider/wiki/Defining-sitemap-nodes-in-code)所述，我使用属性在代码中定义站点地图节点。但是属性动作不会生成为节点。只有在站点地图中明确定义的节点才会生成。

那是我的代码：

网站地图：

```
<?xml version="1.0" encoding="utf-8" ?>
<mvcSiteMap xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0"
            xsi:schemaLocation="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0 MvcSiteMapSchema.xsd"
            enableLocalization="true">

  <mvcSiteMapNode 
        title="$resources:Mvc.sitemap,MainMenuTop_Main" 
        controller="Home" 
        action="Index" 
        key="Home">    

    <mvcSiteMapNode 
            title="$resources:Mvc.sitemap,Account" 
            controller="Account" 
            action="LogOn" 
            clickable="false" 
            key="Account" /> 

  </mvcSiteMapNode>

</mvcSiteMap> 
```

家庭控制器：

```
[HttpGet]
[MvcSiteMapProvider.MvcSiteMapNode(
    ParentKey = "Home", 
    Title = "$resources:Mvc.sitemap,MainMenuTop_About")]
public ActionResult About()
{
    return View();
} 
```

账户控制人：

```
[HttpGet]
[MvcSiteMapProvider.MvcSiteMapNode(
    ParentKey = "Account", 
    Title = "$resources:Mvc.sitemap,Register")]
public ActionResult Register()
{
    return View();
} 
```

因此，这两个动作不会成为站点地图中的节点。换句话说，MvcSiteMapNodeAttribute 属性不起作用。为什么？

我的 web.config 的站点地图部分：

```
<siteMap defaultProvider="MvcSiteMapProvider" enabled="true">
  <providers>
    <clear/>
    <add 
      name="MvcSiteMapProvider" 
      type="MvcSiteMapProvider.DefaultSiteMapProvider, MvcSiteMapProvider"
      siteMapFile="~/Mvc.Sitemap" 
      securityTrimmingEnabled="true" 
      cacheDuration="5" 
      enableLocalization="true" 
      scanAssembliesForSiteMapNodes="true" 
      includeAssembliesForScan="Site2.dll" 
      excludeAssembliesForScan="" 
      attributesToIgnore="visibility" 
      nodeKeyGenerator="MvcSiteMapProvider.DefaultNodeKeyGenerator, MvcSiteMapProvider" 
      controllerTypeResolver="MvcSiteMapProvider.DefaultControllerTypeResolver, MvcSiteMapProvider" 
      actionMethodParameterResolver="MvcSiteMapProvider.DefaultActionMethodParameterResolver, MvcSiteMapProvider" 
      aclModule="MvcSiteMapProvider.DefaultAclModule, MvcSiteMapProvider" 
      siteMapNodeUrlResolver="MvcSiteMapProvider.DefaultSiteMapNodeUrlResolver, MvcSiteMapProvider" 
      siteMapNodeVisibilityProvider="MvcSiteMapProvider.DefaultSiteMapNodeVisibilityProvider, MvcSiteMapProvider" 
      siteMapProviderEventHandler="MvcSiteMapProvider.DefaultSiteMapProviderEventHandler, MvcSiteMapProvider"/>
  </providers>
</siteMap> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T09:40:53.353

您需要确保已指定扫描配置中的站点地图节点，并提供控制器所在的程序集名称。请注意，您只需要提供程序集的名称，而不是它的路径。该程序集必须从您的项目中引用。

请注意，在 v4 中，您的 MVC 项目现在由 NuGet 包自动注册，但如果您将控制器放在另一个程序集中，则需要将控制器程序集添加到列表中（以逗号分隔）。

MvcSiteMapProvider v4（内部 DI）：

```
<!-- web.config -->
<appSettings>
    <add key="MvcSiteMapProvider_ScanAssembliesForSiteMapNodes" value="true" />
    <add key="MvcSiteMapProvider_IncludeAssembliesForScan" value="MyAssemblyName" />
</appSettings> 
```

MvcSiteMapProvider v4（外部 DI）：

```
// DI Module (file name varies depending on DI container)
string[] includeAssembliesForScan = new string[] { "MyAssemblyName" }; 
```

您还需要确保在您的配置中注册了 ReflectionSiteMapNodeProvider。

MvcSiteMapProvider v3：

```
<siteMap defaultProvider="MvcSiteMapProvider" enabled="true">
    <providers>
        <clear/>
        <add name="MvcSiteMapProvider"
             type="MvcSiteMapProvider.DefaultSiteMapProvider, MvcSiteMapProvider"
             siteMapFile="~/Mvc.Sitemap"
             securityTrimmingEnabled="true"
             cacheDuration="5"
             enableLocalization="true"
             scanAssembliesForSiteMapNodes="true"
             excludeAssembliesForScan=""
             includeAssembliesForScan="MyAssemblyName"
             attributesToIgnore="visibility"
             nodeKeyGenerator="MvcSiteMapProvider.DefaultNodeKeyGenerator, MvcSiteMapProvider"
             controllerTypeResolver="MvcSiteMapProvider.DefaultControllerTypeResolver, MvcSiteMapProvider" 
             actionMethodParameterResolver="MvcSiteMapProvider.DefaultActionMethodParameterResolver, MvcSiteMapProvider"
             aclModule="MvcSiteMapProvider.DefaultAclModule, MvcSiteMapProvider"
             routeMethod=""
             siteMapNodeUrlResolver="MvcSiteMapProvider.DefaultSiteMapNodeUrlResolver, MvcSiteMapProvider"
             siteMapNodeVisibilityProvider="MvcSiteMapProvider.DefaultSiteMapNodeVisibilityProvider, MvcSiteMapProvider"
             siteMapProviderEventHandler="MvcSiteMapProvider.DefaultSiteMapProviderEventHandler, MvcSiteMapProvider"/>
    </providers>
</siteMap> 
```

# jsf-2 - 关于 JSF 2.0 中的 PRG 和查看参数

> ID：10311058
> 
> 赞同：0
> 
> 时间：2012-04-25T07:18:14.407
> 
> 标签：jsf-2

我试图了解如何使用此链接 [https://blogs.oracle.com/enterprisetechtips/entry/post_redirect_get_and_jsf](https://blogs.oracle.com/enterprisetechtips/entry/post_redirect_get_and_jsf)在 JSF 应用程序上执行 PRG， 但不知何故我对三个项目感到困惑。

1.  从博客中，我从 firebug 看到它在呈现页面时发出 302 和 GET 重定向，而不是 PRG 的 POST 方法。博客中唯一的变化是 bean 的范围从会话范围变为请求范围。那么这个链接是否表明我所有的托管 bean 都处于请求范围级别？我检查了我正在做的示例应用程序，并且我大量使用 ViewScoped 和 SessionScope bean。

2.  ViewParameters 的用处是什么？这不是一个安全问题，假设我在 url 添加更多查询字符串参数？我实际上正在寻找一个关于我可以在哪里使用此类功能的用例。

3.  如果我正在执行的事务不会执行任何事务性质，例如添加/编辑/删除，那么仅使用作为 POST 请求的 JSF 导航仍然是一个好习惯吗？我只是想导航到一个新页面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:43:08.580

> *那么这个链接是否表明我所有的托管 bean 都处于请求范围级别？我检查了我正在做的示例应用程序，并且我大量使用 ViewScoped 和 SessionScope bean。*

bean 的范围对于 PRG 本身并不重要。它只对 bean 保存的数据的生命周期很重要。另请参阅[如何选择正确的 bean 范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

* * *

> *ViewParameters 的用处是什么？这不是一个安全问题，假设我在 url 添加更多查询字符串参数？我实际上正在寻找一个关于我可以在哪里使用此类功能的用例。*

将`includeViewParams`仅包含您在 中手动指定的参数`<f:metadata><f:viewParam>`。它不会包括*所有*原始查询参数。这对于 PRG 本身不是必需的。是否使用它取决于具体的功能需求。这篇文章只是展示了*可以*将所有视图参数复制到重定向 URL 中，这对于某些功能要求可能是有用的/强制性的。另请参阅[<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用于什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)

* * *

> *我只是想导航到一个新页面。*

使用`<h:link>`而不是`<h:commandLink>`.

```
<h:link value="Go to next.xhxml" outcome="next" /> 
```

另请参阅[何时应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

# java - Spring Data MongoDB 日期之间

> ID：10311061
> 
> 赞同：46
> 
> 时间：2012-04-25T07:18:23.847
> 
> 标签：java, spring, spring-data, mongodb-java

我使用弹簧数据MongoDB。

我想要两个日期之间的记录。以下 MongoDB 查询有效：

```
db.posts.find({startDate: {$gte: start, $lt: end}}); 
```

我尝试的 Spring 数据查询对象代码翻译不起作用：

```
Query query = new Query();
query.addCriteria(Criteria.where("startDate").gte(startDate)
                            .and("startDate").lt(endDate)); 
```

构建我需要的 Mongo 查询的方法调用的正确顺序是什么？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-10-29T16:42:19.403

不要在您的条件中包含 ' **and("startDate")** ' 部分。

代替 ：

```
query.addCriteria(Criteria.where("startDate").gte(startDate).and("startDate").lt(endDate)); 
```

你应该使用：

```
query.addCriteria(Criteria.where("startDate").gte(startDate).lt(endDate)); 
```

当您包含 'and("startDate")' 部分时，Mongo 将其视为同一属性上的两个不同条目。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-01-30T19:18:42.153

[参考这里](https://www.mkyong.com/java/due-to-limitations-of-the-basicdbobject-you-cant-add-a-second-and/)

```
Query query = new Query(
  Criteria.where("ip").is(ip)
  .andOperator(
    Criteria.where("createdDate").lt(endDate),
    Criteria.where("createdDate").gte(startDate)
  )
); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-12-24T12:09:33.307

您还可以添加查询注释：

```
@Query("{'date' : { $gte: ?0, $lte: ?1 } }")                 
public List<AnyYourObj> getObjectByDate(Date from, Date to); 
```

或正确的弹簧数据方法签名：

```
public List<AnyYourObj> findByDateBetween(Date from, Date to); 
```

这两种方法都给出了相同的结果。你可以在这里阅读更多[https://www.baeldung.com/queries-in-spring-data-mongodb](https://www.baeldung.com/queries-in-spring-data-mongodb) 和这里[https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/](https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-27T09:39:32.210

我必须找到现场之间的日期`publishedDate`，这就是我的做法：

```
 Criteria publishedDateCriteria = Criteria
                        .where("publishedDateObject").gte(psDate)
                        .lte(peDate);
    Query query = new Query(publishedDateCriteria);
    mongoTemplate.find(query,
                        MyDocumentObject.class)); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-31T13:39:52.337

它有效，他是一些示例代码：

```
Criteria criteria = Criteria.where("pt").gte(startDate)
       .andOperator(Criteria.where("pt").lt(endDate)); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-01T09:14:47.943

这适用于 Java 驱动程序的 2.7.2 版本

```
DBCollection coll = db.getCollection("posts");  

BasicDBObject date = new BasicDBObject();
date.append("$gte", new Date(startDate));
date.append("$lte", new Date(endDate));

DBObject query = new BasicDBObject();
query.put("date", date);

DBCursor cursor = coll.find(query); 
```

此外，为了记录，您对 gte 和 lte 参数都有“startDate”。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-08-29T09:29:34.463

我确实喜欢这个

```
public interface PolicyRepository extends MongoRepository<Policy, String> {
    @Query("{'lastDate':{$gt:?0,$lt:?1}}")
        public List<Policy> findAllPolicies(Date today,Date somedate);
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-08-16T15:12:57.273

```
public interface MyRepository extends MongoRepository<MyObject, MyObjectId> {
    List<MyObject> findByMydatefieldBetween(DateTime startDate, DateTime endDate);
} 
```

[https://docs.spring.io/spring-data/mongodb/docs/2.2.x-SNAPSHOT/reference/html/#mongodb.repositories.queries](https://docs.spring.io/spring-data/mongodb/docs/2.2.x-SNAPSHOT/reference/html/#mongodb.repositories.queries)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-03-04T11:46:41.007

```
if (metaData.getToValue() == null){
dynamicCriteria = Criteria.where("metaData.key").is(metaData.getKey()).andOperator(Criteria.where("metaData.value").is(metaData.getFromValue()));
}else {
dynamicCriteria = Criteria.where("metaData.key").is(metaData.getKey()).orOperator(Criteria.where("metaData.value").gte(metaData.getFromValue()).lt(metaData.getToValue()));
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-11-17T09:21:10.800

像这样使用 MongoRepository Query 方法：

```
List<T> findByStartDateBetween(Range<Integer> dataRange); 
```

使用 Range 进行详细范围设置。

[类似的问题](https://stackoverflow.com/questions/63848428/spring-data-mongodb-between-change-from-gt-lt-to-gte-lte/70001649#70001649)

# javascript - sencha touch 2 中未加载的项目

> ID：10311063
> 
> 赞同：5
> 
> 时间：2012-04-25T07:18:28.727
> 
> 标签：javascript, html, extjs, sencha-touch-2

我有一个使用 tabpanel 的 sencha touch 应用程序，这个应用程序的 beta 版本会加载 tabpanel 的所有项目并显示它。有这么多项目，选项卡之间的切换变得更慢以进行优化我的想法是仅在显示加载掩码后激活某个面板时才加载项目。

我能够在第一次单击时使其工作，但是当我再次切换到同一个选项卡时，它没有被填充或至少没有显示项目。不抛出异常。

```
Ext.application({
    name : 'Sencha',
    launch : function() {
           var root = contents;
           var children = root._listOfContentChild;
           var mainPanel =  Ext.create('components.NavigationPanel',
                {
                iconCls : 'more', 
                listeners: {

                   activate: function() {   
                             mainPanel .setMasked({ 
                                xtype: 'loadmask',
                                message: 'Loading...'
                            });

                           setTimeout(function() {          
                              loadItems(root,children);  // returns my items
                              mainPanel .setItems(items);
                              mainPanel .setMasked(false);
                            }, 300);

    } } });

   var settingsPanel =  Ext.create('components.NavigationPanel', {
        title : 'Settings',
        iconCls : 'settings',
    });

  view=Ext.Viewport.add({
        xtype : 'tabpanel',  
        deferredRender:true,

        tabBarPosition : 'bottom',
        activeItem:settingsPanel,
        items : [mainPanel,settingsPanel ]
    }); 
    }
    }); 
```

**概述：** 如果在按下选项卡之前所有项目都在开始时填写，我的应用程序工作正常我的问题是当我有大量项目并且我按下它们相应的选项卡时。它挂起1,2秒。使用此应用程序的人会认为他没有正确按下选项卡，并且看起来很慢。我的方法是在标签按下时加载一个掩码 1 秒，这将使我的标签在按下时自动响应，然后我添加我的项目。这个想法只适用于第一次点击，当我切换到另一个选项卡并返回原来的时候，什么都没有显示（除了加载掩码）我试过`mainPanel.add`而不是`mainPanel.setItems`. 我遇到了另一个问题，现在在面板上的下一次点击中，我的项目被显示但没有加载蒙版，就好像我在按下之前在开始加载项目一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:35:25.820

我想出了解决方案。检查下面的代码。

希望对你有帮助！

代码 ：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'Sencha',

    launch: function() {
        //var root = contents;
        //var children = root._listOfContentChild;
        var mainPanel =  Ext.create('Ext.Panel', {
                            iconCls : 'more', 
                            id:'mpanel',
                            styleHtmlContent:true,
                            listeners: {
                               painted: function() {  
                                 mainPanel.removeAll();
                                 mainPanel.add({
                                       masked:{
                                         xtype:'loadmask',
                                         id:'lmask',
                                       }
                                 });
                                 setTimeout(function() {    
                                       Ext.getCmp('lmask').hide();
                                       Ext.getCmp('mpanel').add({ xtype:'textfield',label:'Name',required:true });
                                   }, 300);

                                 }
                            } 
                          });

        var settingsPanel =  Ext.create('Ext.Panel', {
            title : 'Settings',
            iconCls : 'settings',
        });

        view=Ext.Viewport.add({
            xtype : 'tabpanel',  
            deferredRender:true,

            tabBarPosition : 'bottom',
            activeItem:settingsPanel,
            items : [mainPanel,settingsPanel ]
        }); 
    }
}); 
```

样本输出：

![加载蒙版](../Images/22fda0e157f8005ea1f5a1fa7ea5225d.png)

![在此处输入图像描述](../Images/f0390c6ec6f8e808a7a44ea7361be4a5.png)

# visual-studio-2010 - 记录的 Reportviewer 和 RDLC 换行问题

> ID：10311066
> 
> 赞同：3
> 
> 时间：2012-04-25T07:18:37.707
> 
> 标签：visual-studio-2010, reporting-services, reportviewer, rdlc

想知道是否有人可以提供帮助。我有一个 ac# web 应用程序，它使用 Reportviewer 控件，该控件使用 RDLC 文件来创建报告。

我遇到的问题是数据库中任何有换行符的字段在报告中看起来像这样

458%20Kingshighway%0ALynnwood%0A0081%0ASouth%20Africa

有谁知道出了什么问题？它与HTML的编码有关吗？

谢谢， 艾尔洛克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:25:42.600

您应该使用“vbcrlf”功能在报告上应用换行符

# rules - 在不使用工作流活动或嵌入式规则集编辑器的情况下使用 WF 规则

> ID：10311071
> 
> 赞同：3
> 
> 时间：2012-04-25T07:19:12.483
> 
> 标签：rules, workflow-foundation, rule-engine

是否有人在不使用规则编辑器或 CodeDOM 的情况下在工作流活动之外使用了 WF 规则引擎？

**设想**

我正在尝试使用带有.Net Framework 的Workflow 基础类附带的规则引擎，用于基于Web 的应用程序。我们评估数百个验证规则，然后再使用计算引擎进行复杂计算。

我浏览了许多博客，其中说明了如何使用规则引擎而不必进行工作流活动，包括[https://github.com/geersch/WorkflowRulesEngine](https://github.com/geersch/WorkflowRulesEngine)。然而，他们最终都使用规则集编辑器来定义规则。我想在 XML 文件中以声明方式定义规则

**我在找什么**

1.  我需要能够在不处理 CODEDOM 的情况下以简单的 XML 指定规则。CodeDOM 似乎写起来很复杂。

2.  我不应该依赖 RuleSet Editor 来定义规则。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T10:42:09.107

请查看以下文章，了解解决问题的策略（不是解决方案）。

[http://code.msdn.microsoft.com/windowsdesktop/Creating-Rules-Using-the-23c5d561](http://code.msdn.microsoft.com/windowsdesktop/Creating-Rules-Using-the-23c5d561)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T01:11:51.377

WF 规则的序列化格式是 CodeDom。

它没有内置的其他序列化格式。

如果您想要一个替代的 XML 表示，您将需要创建一个工具来在表示之间进行映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:57:36.447

不知道你在评估什么样的规则，但是如果你搜索一个好的开源规则引擎，[这里有一个](http://droolsdotnet.codehaus.org/).

# xsd - XSD 中的类型名称在代理中不匹配

> ID：10311072
> 
> 赞同：1
> 
> 时间：2012-04-25T07:19:15.667
> 
> 标签：xsd, proxy-classes

从 XSD 生成代理时，我遇到了一个非常奇怪的行为。假设我已经关注 XSD（假设架构标签已经放置）。我正在使用添加服务引用选项来生成代理。

```
<xs:complexType name="Segment"><xs:sequence><xs:element name="Legs"><xs:complexType><xs:sequence><xs:element maxOccurs="unbounded" name="Leg"><xs:complexType><xs:sequence><xs:element name="Ticket" type="xs:string" /></xs:sequence></xs:complexType></xs:element></xs:sequence></xs:complexType></xs:element></xs:sequence></xs:complexType> 
```

现在从上面的 XSD 生成代理时，我得到的类型如下

```
 /// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.233")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://www.saffr.com/schema/itinerary")]
public partial class Segment : object, System.ComponentModel.INotifyPropertyChanged {

    private SegmentLeg[] legsField;

        /// <remarks/>
    [System.Xml.Serialization.XmlArrayAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified, Order=5)]
    [System.Xml.Serialization.XmlArrayItemAttribute("Leg", IsNullable=false)]
    public SegmentLeg[] Legs {
        get {
            return this.legsField;
        }
        set {
            this.legsField = value;
            this.RaisePropertyChanged("Legs");
        }
    }

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName) {
        System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
        if ((propertyChanged != null)) {
            propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

现在问题出现了，我希望它应该是 Leg 类型，而不是 SegmentLeg 类型。实际上解析器是连接段（主要复杂类型）与子类型。

我不确定我做错了什么。任何建议都是非常值得赞赏的。

/里兹万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:01:39.233

我不知道一种允许自定义的方法，该方法允许覆盖用于使用 xsd.exe 推断类型名称的默认机制。

假设您可以使用 XSD，您可以尝试将类型/元素设为全局而不是匿名，看看它是否会产生预期的结果。

# ruby-on-rails - 如何在黄瓜和 rspec 中检查正确的子域

> ID：10311073
> 
> 赞同：2
> 
> 时间：2012-04-25T07:19:24.767
> 
> 标签：ruby-on-rails, rspec, cucumber

目前我有需要测试以下情况的场景。

*   如果我用学校名称填写文本字段。
*   然后它应该去那个子域网址

例如。如果我将 xyz 大学放在文本字段中，那么它应该得到 xz.lvh.me:3000 xyz 大学的短名称是存储在数据库中的 xz。

homepage.feature 特征：首页 需要查看大学领域

```
 Scenario Outline: Fill up universities
    When i fillup university name "<name>"
    Then it should go to their login page "<subdomain>"

  Examples:
    | name |   subdomain |
    | sp College  |  sp  | 
```

主页.rb

```
When /^i fillup university name "([^"]*)"$/ do |name|
  visit @@url
  choose('institution_category_school')
  fill_in "search_institution_name", :with => name
  click_button "Go"
end

Then /^it should go to their login page "([^"]*)"$/ do |subdomain|
  #so i need to check that produced url == "#{subdomain}.lvh.me:3000/"
end 
```

下面是我的配置文件。支持/env.rb

```
require 'rubygems'
require 'capybara'
require 'capybara/dsl'
require 'rspec'

Capybara.run_server = false
Capybara.default_driver = :selenium
Capybara.default_selector = :css

module Helpers
  def without_resynchronize
    page.driver.options[:resynchronize] = false
    yield
    page.driver.options[:resynchronize] = true
  end
end

World(Capybara::DSL, Helpers)

@@url= "http://lvh.me:3000/" 
```

使用 Rails 3.1.1、黄瓜 1.1.4、rspec 2.8.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:36:48.500

使用 Capybara，您可以使用以下方法获取浏览器的当前 url：

`current_url`

然后你可以使用你正常的 rspec 断言：

```
current_url.should == "#{subdomain}.lvh.me:3000/" 
```

# jsp - 检查显示标签中的列表值

> ID：10311075
> 
> 赞同：0
> 
> 时间：2012-04-25T07:19:30.520
> 
> 标签：jsp, displaytag

我有一个显示标签，我想在其中检查特定条件的值并以两种方式显示该值。

```
 <c:choose>
                    <c:when test="${itemList.count>0}">
                    //display one way
                    </c:when>
                    <c:otherwise>
                    //display another way
                    </c:otherwise>
            </c:choose> 
```

*但是如果显示表中没有要显示的数据，则*该行`<c:when test="${itemList.count>0}">`正在命中。**如果有数据要显示，它虽然工作得很好。**`java.lang.NumberFormatException: For input string: "count"`

 ****如果没有要显示的数据，如何检查 count 的值以避免出现异常？*

但是下面的代码不检查条件而只显示数据，即使没有数据或数据显示在显示标签表中，它也不会发生异常。

```
<display:column class="colCount" property="count"
                        title="${titleCount}" sortable="true" headerClass="sortable"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:57:53.517

当我像这样使用时，一切正常。而不是`<c:when test="${itemList.count>0}">`，使用`<c:when test="${count>0}">`

```
 <c:choose>
                   <c:when test="${count>0}">
                    //display one way
                    </c:when>
                    <c:otherwise>
                    //display another way
                    </c:otherwise>
            </c:choose> 
```***

# tsql - 如何递归读取所有记录并按级别深度TSQL显示

> ID：10311080
> 
> 赞同：4
> 
> 时间：2012-04-25T07:19:42.270
> 
> 标签：tsql, select, recursion

有没有办法在类似的表中递归读取记录并按深度级别排序？

```
#table:

id int    |   parent int    |   value string
--------------------------------------------
1             -1                some
2             1                 some2
3             2                 some3
4             2                 some4
5             3                 some5
6             4                 some6
7             3                 some5
8             3                 some5
9             8                 some5
10            8                 some5 
```

那么有没有一种方法可以递归地选择结果表看起来像这样的位置。

```
select * from #table where id=3 

id int      | parent int      | value string   |  depth  
--------------------------------------------------------
3             2                 some3             0
5             3                 some5             1
7             3                 some5             1 
8             3                 some5             1
9             8                 some5             2
10            8                 some5             2 
```

所以如果我选择 id=3 我会看到 id=3 和孩子的递归

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T07:32:49.103

```
;with C as
(
  select id,
         parent,
         value,
         0 as depth
  from YourTable
  where id = 3
  union all
  select T.id,
         T.parent,
         T.value,
         C.depth + 1
  from YourTable as T
    inner join C  
      on T.parent = C.id
)
select *
from C 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/67717)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T07:32:57.553

您可以使用 CTE，特别是 rCTE 来完成。

请参阅[此](http://www.google.fi/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CCsQFjAA&url=http://msdn.microsoft.com/en-us/library/ms190766.aspx&ei=laeXT_i6PJHV4QTuka3FBg&usg=AFQjCNE_EOC2EHMFw9nifV_MhE1VrIQUSg)，以及[此](http://www.google.fi/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&sqi=2&ved=0CDMQFjAB&url=http://msdn.microsoft.com/en-us/library/ms175972.aspx&ei=laeXT_i6PJHV4QTuka3FBg&usg=AFQjCNGqDsQG_x9V-0LaxOFwyUqMw-6zvg)以获取更多信息。

要遵循的示例：

```
WITH sampleCTE (id, parent, value, depth)
    AS (
        -- Anchor definition
        SELECT id
            , parent
            , value
            , 0
        FROM #table
        WHERE id = @targetId
        -- Recursive definition
        UNION ALL
        SELECT child.id
            , child.parent
            , child.value
            , sampleCTE.depth + 1
        FROM #table child 
            INNER JOIN sampleCTE ON sampleCTE.id = child.parent
    ) 
```

# javascript - 在 MonkeyTalk IDE Javascript 文件中记录变量的值

> ID：10311084
> 
> 赞同：2
> 
> 时间：2012-04-25T07:19:46.090
> 
> 标签：javascript, android, ios, bdd, monkeytalk

我正在使用 MonkeyTalk IDE Beta2 来测试 iPad 应用程序。我从 MonkeyTalk IDE 导出了 javascript 并获得了一个新的 .js 文件。我将`Verify`命令的布尔值存储在 a 中`var`，并想查看它的值是什么，并相应地执行自定义逻辑。我尝试了`document.write`，`console.log`并`alert`在 javascript 中使用，但得到一个错误，即它们未定义。请帮我解决一下这个。

此外，是否可以将测试结果输出为 XML（如在 FoneMonkey 中）或 Excel 电子表格或类似的东西？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:57:35.180

信不信由你*，但到目前为止，还没有直接的方法可以让 MonkeyTalk 将消息记录到控制台。但是，您可以做的是滥用`verifyNot`会导致日志消息的命令。在 MonkeyTalk .mt 中，可以这样完成：

```
View * VerifyNot Message 
```

`log.js`我为此目的创建了以下帮助程序脚本。时间戳是由 Eclipse 自动添加的，但不会在其他地方添加，所以我已经预先添加了时间。

```
load("libs/Executor.js");

function getTimeStamp() {
    var now = new Date();
    return now.getHours() + ":" + now.getMinutes() + ":" + now.getSeconds();
}

EXECUTOR.defineScript("Log", function(msg) {
    this.app.view().verifyNot(getTimeStamp() + ": " + msg);
}); 
```

最后，您不需要执行器样板文件（仅 verifyNot 行），但我们将其与[Doba](https://www.gorillalogic.com/content/monkeytalk-hacking-wanna-share-my-js-stuffs)的脚本一起使用，以便能够组织不同目录中的文件（Doba.js 重命名为 Executor.js）——另一个特性开箱即用。

* 这几乎就像 GorillaLogic 不希望您能够解决自己的问题。;)

# android - 如何停止计时器 Android

> ID：10311087
> 
> 赞同：1
> 
> 时间：2012-04-25T07:19:51.007
> 
> 标签：android, service, timer, android-context, timertask

以下是我的代码：

在 MainActivity.class

```
private OnCheckedChangeListener alert_on_off_listener = new OnCheckedChangeListener(){
    public void onCheckedChanged(RadioGroup groupname, int CheckedButtonId) {

         if(CheckedButtonId==R.id.radiobutton_on){
             Toast.makeText(getApplicationContext(), "radio on", Toast.LENGTH_LONG).show();
             alert_on = true;
             display_alert();    
         }
         else{
             alert_on = false;
         }   
    }
};

public void display_alert(){

    int delay = 10000;  
    Timer timer =new Timer();
    timer.scheduleAtFixedRate(new TimerTask()
    {
        public void run() 
            {
                Intent myIntent = new Intent(HoraWatchActivity.this,MyService.class);
                startService(myIntent);
            }
    }, delay,10000);
} 
```

我的服务类

```
@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);
    if(MainActivity.alert_on)
       Toast.makeText(getApplicationContext(), "Alert is On", Toast.LENGTH_LONG).show();
    else
       Toast.makeText(getApplicationContext(), "Alert is Off",Toast.LENGTH_LONG).show();
} 
```

我正在根据选中的单选按钮检查`onCheckedChangeListener`和调用功能。`display_alert`

在`display_alert`函数中，我以 10 秒的固定速率使用定时器调度并调用`myservice`类。

因此，一旦我检查了`radio_on`按钮，它就会调用我的`display_aler`t 函数并在 toast 中获得“警报”。所以它工作正常。

如果我再次检查`radio_off`按钮然后检查`radio_on`按钮，我会收到“警报”吐司，但吐司会来两次。同样，如果我再次选择该`radio_on`按钮，吐司将第三次显示，但我只需要一次。这是因为计时器每 10 秒运行一次。单击按钮后，我想停止计时器`radio_off`。

问题是，一旦我启动计时器，我就没有进一步停止它。我应该何时以及如何取消课堂上的定时器任务？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T07:33:10.583

首先，以单独的方式创建您的 TimerTask：

```
class MyTimerTask extends TimerTask {
  public void run() {
    Intent myIntent = new Intent(HoraWatchActivity.this,MyService.class);
    startService(myIntent);
  }
} 
```

在某处声明它，当然对您的 OnCheckedChangeListener 可见：

```
MyTimerTask myTimerTask; 
```

安排它：

```
public void display_alert() {
  int delay = 10000;  
  myTimerTask = new MyTimerTask();
  Timer timer = new Timer();
  timer.scheduleAtFixedRate(myTimerTask, delay, 10000);
} 
```

然后将您的代码修改为：

```
private OnCheckedChangeListener alert_on_off_listener = new OnCheckedChangeListener(){
public void onCheckedChanged(RadioGroup groupname, int CheckedButtonId) {

     if(CheckedButtonId==R.id.radiobutton_on){
         Toast.makeText(getApplicationContext(), "radio on", Toast.LENGTH_LONG).show();
         alert_on = true;
         display_alert();    
     }
     else{
         myTimerTask.cancel();
         alert_on = false;
     }   
}
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T07:25:36.813

```
if(timerTask!=null){
    timer.cancel();
} 
```

您可以使用代码停止/取消计时器

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T07:32:53.657

首先创建一个类扩展 TimerTask，使其成为对象并处理对该对象的操作。

```
int delay = 10000;  
Timer timer =new Timer();
myTimer mTask= new myTimer();
timer.scheduleAtFixedRate(mTask, delay, 10000);

public class myTimer extends TimerTask
{
    @Override
    public void run() {
        Intent myIntent = new Intent(HoraWatchActivity.this,MyService.class);
            startService(myIntent);         
    }
} 
```

当你的 mTask 工作刚刚结束时

```
 if(mTask!=null){
    mTask.cancel();
} 
```

而已。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-10T18:15:01.837

我可以使用以下代码停止计时器和任务：

```
 if(null != timer)
    {

        timer.cancel();
        Log.i(LOG_TAG,"Number of cancelled tasks purged: " + timer.purge());
        timer = null;
    }

    if(task != null)
    {
        Log.i(LOG_TAG,"Tracking cancellation status: " + task.cancel());
        task = null;
    } 
```

# php - 为每个请求创建 4 个进程？

> ID：10311090
> 
> 赞同：1
> 
> 时间：2012-04-25T07:20:10.850
> 
> 标签：php, apache, process, load-testing

我们正在对 PHP (Kohana) 应用程序进行一些负载测试。我们注意到的一件有趣的事情是，每个请求似乎每次都创建了 4 个进程，并将服务器上的负载增加了 4 倍。例如，当每秒有 500 个用户点击时，它相当于 500*4。

我真的不明白是什么创建了所有这些流程。我的理解是，每个 PHP 请求都会创建一个线程，它不应该创建进程，尤其是 4。这可能是 Apache 的问题吗？还是PHP问题？

我在 Google 上没有找到任何关于此的信息。任何有关可能导致此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:42:36.220

我的第一个猜测是您只是看到了 Apache MinSpareServers 设置的效果。Apache 不会在收到请求时启动进程，而是准备好等待。因此，如果将其设置为 4，Apache 将始终尝试让活动进程 + 4 运行。

它也可能是 ThreadsPerChild 设置，具体取决于您如何配置 Apache。在这种情况下，每个孩子总是启动指定数量的线程，以便它们准备好。

许多进程或线程不一定是问题。除了等待处理传入流量之外，他们可能什么都不做。

# google-drive-api - 在网站上显示存储在 Google Drive 中的文件（例如图像）

> ID：10311092
> 
> 赞同：340
> 
> 时间：2012-04-25T07:20:23.560
> 
> 标签：google-drive-api

我想知道是否可以访问/显示存储在公共网站上的 Google Drive 中的图像之类的文件。

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2012-08-07T23:17:42.950

一种解决方法是获取`fileId`with`Google Drive SDK API`然后使用它`Url`：

[https://drive.google.com/uc?export=view&id=](https://drive.google.com/uc?export=view&id=) {fileId}

这将是您在 Google 云端硬盘中的文件（图片或其他任何内容）的永久链接。

注意：此链接似乎受配额限制。所以不适合公共/大规模共享。

* * *

## 回答 #2

> 赞同：219
> 
> 时间：2013-12-19T07:34:51.907

这是简单的视图链接：

```
https://drive.google.com/uc?id=FILE_ID 
```

例如[https://drive.google.com/uc?id=0B9o1MNFt5ld1N3k1cm9tVnZxQjg](https://drive.google.com/uc?id=0B9o1MNFt5ld1N3k1cm9tVnZxQjg)

您可以对其他文件类型执行相同的操作，例如 MP3、PDF 等。

* * *

## 回答 #3

> 赞同：166
> 
> 时间：2012-12-05T02:43:19.933

> 更新：正如[宣布](https://gsuiteupdates.googleblog.com/2015/08/deprecating-web-hosting-support-in.html)的那样，谷歌在 2016 年 8 月弃用了这个功能。这是[来自谷歌的最终更新](http://gsuite-developers.googleblog.com/2016/07/reminder-turn-down-of-google-drive-web.html)以及替代品。

是的，这是可能的。如果您将文件放在公共文件夹中，则可以通过此 URL 获取文件夹中的任何文件：

```
https://googledrive.com/host/<folderID>/<filename> 
```

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2016-07-04T19:44:31.323

这是来自@ [https://productforums.google.com/forum/#!topic/drive/yU_yF9SI_z0/discussion的方法](https://productforums.google.com/forum/#!topic/drive/yU_yF9SI_z0/discussion)

1-上传你的图片

2-右键单击并选择“获取共享链接”

3-复制应该看起来像的链接

> [https://drive.google.com/open?id=xxxxxxx](https://drive.google.com/open?id=xxxxxxx)

4-更改`open?`为`uc?`并像使用它一样使用它

```
<img src="https://drive.google.com/uc?id=xxxxx"> 
```

*   建议在从网络上引用任何内容时删除`http:`or`https:`以避免您的服务器出现任何问题。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2013-05-01T19:28:32.670

> 更新：正如[宣布](https://gsuiteupdates.googleblog.com/2015/08/deprecating-web-hosting-support-in.html?visit_id=1-636231887271567776-2345662051&hl=en)的那样，谷歌在 2016 年 8 月弃用了此功能。这是[来自谷歌的最终更新](http://gsuite-developers.googleblog.com/2016/07/reminder-turn-down-of-google-drive-web.html)以及替代品。

根据 2013 年 4 月并使用 Chrome/webkit，以下内容对我有用：

*   # 1 创建一个名为“public”的文件夹

*   # 2 选择该文件夹，右键单击并*共享 > 共享*。点击。选择“任何人都可以访问”

*   # 3 将文件拖放到文件夹中，然后上传。

*   # 4 右键单击​​文件并选择*详细信息*。Details-Fieldset 中的一行显示“Hosting”。下面是一个网址：

`https://googledrive.com/...`

*   将该 URL 拖放到新选项卡中。复制并粘贴网址，然后在您喜欢的任何地方分享或嵌入。

一个限制是，就 HTTP 而言，似乎只有安全的 HTTP 访问是可能的。

**更新：**
另一个限制是*Google 驱动器可以打开的文件将无法以*这种方式访问​​。
也就是说，点击“*详细信息*”不会显示 Google 驱动器的网址。

为了克服这个：

*   右键单击有问题的文件，然后选择“打开方式>管理应用程序”：

![在此处输入图像描述](../Images/a9181f32bcf9c56dec283d13317e4112.png)

*   在此处取消勾选与文件相关的应用程序
*   可选：重新加载 Google 云端硬盘
*   右键单击文件并选择“详细信息”
*   按照步骤 #4 进行操作

*注意：*上述过程的替代方法是上传带有 Google Drive 无法打开/未关联的扩展名的文件。

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2020-05-11T17:11:24.790

> 编辑：截至 2020 年，这是有效的。以前的大多数答案都已过时。

# 简单的解决方案

您所要做的就是打开您的文件：

[![Google 云端硬盘上的山峰图片](../Images/37f9c25800dbfe2df921cf2c95bfdda3.png)](https://i.stack.imgur.com/Cp8kc.jpg)

然后，进入您的网络检查器（对于 Chrome，`Cmd-Shift-I`或`Ctrl-Shift-I`取决于您的操作系统）并获取链接。将该链接粘贴到您的浏览器中，它将重定向到另一个链接。复制新网址。完毕！

[![Web 检查器中显示的图像链接的图像](../Images/ae0308bfd1f25fde1f1d499d30888060.png)](https://i.stack.imgur.com/kRYnx.jpg)

* * *

### 重定向是为了什么？

如果您使用第一个链接，似乎只有在登录您的 Google 帐户时才能访问它。对其他人帮助不大。但是，第二个重定向链接不需要您登录。这就是它背后的基本原理。

* * *

我删除了图像中显示的原始文件，但[这里](https://lh3.googleusercontent.com/fife/ABSRlIqN-dPZnSc8x-qtni0fZgb7R8BIENpjA0FGr_crA4EfyBzlhteLnNgbBpBRkfuaz5bjW_EDjdq2bwUrSov_I_lvj-vA1opc4Q-jgEoRefzVvvUEMLkd_kkAJgHEe8pxkKLfKHCHShi9W34YWIFyWuM_0DniGVd3VeeVdvE7ZCpczafyadFRhfFo6_EbXiETWLsWnLkOkFyNBeFu1sHv1NlZ5YWCppxsMSLPmvnkn8ZhbTmWZgO-PA6C30vVLw371PjtkANK-fQczeal9Rl9Ah9BcoUkH9L69jt9ZrlQbfM6TjOiuMpnM17qp4ulEv_H_m3R7lqHKDAubAauj3YH-ovxzWSmSPXmW2J8xqj0fP4hh-_ttC7IWxoBvPh3V3AYJZIXlCudvOZ_M1yCDbfzIqSkZkpO7SNtxNP9qKqrl3pm3PhQInRDMoCcGqfPr1cLc5CJ7V9FopT6MhbH_bIKUDJBcuCVHKfemJx1vQKR1sMjFfBTFpLx2P2pmnCEleXyaKskqYJ2v8elSNIipoHp4A2drxtsYNCw3LHh413Wq4OgpBxIZMahFFDS9RCsZ8ltNvYq4020ul-BqB5GZalFg_qOZofSWPkjVKOrAMk3gOQzRlzKSibxDhhJVW-ftm9ghjRtD79WjeHyPnXbwgNSfb1PoI8YOM-FaGVtZah0I9kr16HO5IvRqM2NimUR79u9QkYbFB7IrgYjZ5NtoFqPKZGRrB5wOoiW6g=w670-h604-ft)有另一个工作示例。

* * *

实际上，我已经检查了大约一周前在编辑中发布的示例链接，但它似乎不再起作用。**看起来这些链接只是暂时起作用，所以不要将它们用于任何类型的生产环境。**

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2013-01-14T18:15:01.333

如果你想在浏览器中查看文件，也可以使用类似于 rufo 和 Torxed 提供的方法：

```
https://drive.google.com/uc?export=view&id={fileId} 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2020-03-05T13:16:41.207

专门针对 G-Suite 用户。如[第 3 点所述](https://support.awesome-table.com/hc/en-us/articles/115002196665-Display-images-from-Google-Drive)，您可以使用此 URL 来托管图像

```
https://drive.google.com/a/domain.com/thumbnail?id=imageID 
```

有以下替换

*   `domain`：替换为您公司的 GSuite 域，例如`pikachu`
*   `imageID`: 替换为图像 id / 文件 id

* * *

这里的先决条件是图像应该通过驱动器共享给目标受众（单独与每个人共享，或者可能在整个组织中共享）

[![在此处输入图像描述](../Images/655cdaf24efc9f6998b6157ec082ab2b.png)](https://i.stack.imgur.com/9Zx5x.png)

* * *

如果您遇到渲染图像大小的问题，请使用[此处提到的以下选项](https://support.awesome-table.com/hc/en-us/articles/115002196665/comments/360000273519)

```
https://drive.google.com/a/domain.com/thumbnail?id=imageID&sz=w{width}-h{height} 
```

有以下替换（除了`domain`和`imageID`替换）

*   `{width}`：以像素为单位写宽度（不带大括号），如`300`
*   `{height}`：以像素为单位写出高度（不带大括号），例如`200`

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-04-25T10:19:45.883

我认为这是可能的，但时间很短

您需要做的是将文件的访问控制列表设置为公共只读（或公共读/写）。您可以使用[Google Document List API](https://developers.google.com/google-apps/documents-list/)以编程方式执行此操作，也可以通过云端硬盘图像查看器上的“共享”按钮手动执行此操作。

然后，您可以使用 Google Document List API 或[Google Drive API](https://developers.google.com/drive/v1/reference/files/get)（即Java 中的*file.getDownloadUrl()）*以编程方式获取图像的 URL。您还可以通过右键单击 Google Drive 默认图像查看器中的图像手动轻松获取图像链接。

问题是这个链接的存活时间有限，所以它会工作一段时间然后停止工作。

基本上，存储在云端硬盘中的图像文件的 URL 应该可以在没有任何身份验证的情况下访问，一旦它被设置为公开共享，但该 URL 会在某个时候发生变化。我们将来可能会找到解决方案，比如提供一个永久 URL，该 URL 将重定向到这些不断变化的 URL，但没有承诺......

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-06-20T18:50:31.367

从[谷歌驱动器帮助页面](https://support.google.com/drive/answer/2881970?hl=en)：

> 要使用云端硬盘托管网页：
> 
> 1.  在 drive.google.com 打开云端硬盘并选择一个文件。
> 2.  单击页面顶部的共享按钮。
> 3.  单击共享框右下角的高级。
> 4.  单击更改...。
> 5.  选择开 - 在网络上公开，然后单击保存。
> 6.  在关闭共享框之前，从“共享链接”下方字段中的 URL 中复制文档 ID。文档 ID 是 URL 中斜线之间的大小写字母和数字字符串。
> 7.  共享类似于“www.googledrive.com/host/[doc id]”的 URL，其中 [doc id] 替换为您在第 6 步中复制的文档 ID。
> 
> 现在任何人都可以查看您的网页。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2021-11-28T13:09:01.760

### 2022 年 3 月 Workspace (G Suite) 用户的工作解决方案

除非查看器登录到 gmail，否则某些嵌入代码不会显示 img，以下工作就像您的虚拟主机上的常规图像：

##### 公开共享项目（确保它显示“互联网上的任何人都可以通过此链接查看）：图像本身（或图像所在的文件夹）然后按以下方式复制链接

[![在此处输入图像描述](../Images/8ef626286d0f4ea0766926c29da0e447.png)](https://i.stack.imgur.com/wqdvO.png)

##### 获取文件的 ID 并在此处插入：

```
<img src="https://lh3.googleusercontent.com/d/[ID_OF_THE_FILE]"> 
```

##### 结果（如果您看到下面的狗，则表示该解决方案仍然有效）：

![](../Images/b7beb2d742f4f66003ed53481867ff3d.png)

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-08-03T08:36:17.553

[根据此博客文章](https://blog.usejournal.com/host-static-images-for-your-apps-or-website-on-google-drive-hotlink-to-gdrive-images-358d6fcf8ef7)，当前有效的解决方案是：

```
<img src=”https://drive.google.com/uc?id=[imageIdGoesHere]" /> 
```

[在这里测试](https://drive.google.com/uc?id=1m-uOoFzHn4oUGlEsDSEfPBbJ2QhBJzlM)

[https://drive.google.com/uc?id=1m-uOoFzHn4oUGlEsDSEfPBbJ2QhBJzlM](https://drive.google.com/uc?id=1m-uOoFzHn4oUGlEsDSEfPBbJ2QhBJzlM)

自 2021 年 4 月 26 日起，此功能已验证有效。无需共享文件夹或登录。但是公开共享的文件是。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2014-05-18T18:26:39.237

Some of the previous users were close, but they were missing a step here or there.

Here is a video that shows all of the steps.

(Edit 2-Dec-14
The Below information is incorrect when it comes to the new Google Drive. For the New Google Drive follow these instructions.
There are two options you can use,
option 1 you can click the cog on the top right and revert to the old google drive, IF you revert, use the instructions after "End Edit)" .
Option 2 or you can follow the work around I found. If I find a better way than this I will update it, but here is what I have found that works.

The full link will look like this "[https://googledrive.com/host/(folder](https://googledrive.com/host/(folder) id)
Part one of your link that you need is "[https://googledrive.com/host/](https://googledrive.com/host/)" for the second half you will need to navigate to the file you would like to share.
Once you are in the folder with the file you would like to share, look at the link above
(Example 1 [https://drive.google.com/drive/u/0/#folders/0B3UALYkiLexYSXZlcldoU2NpYXM](https://drive.google.com/drive/u/0/#folders/0B3UALYkiLexYSXZlcldoU2NpYXM) )
(Example 2 [https://drive.google.com/drive/u/0/#folders/0B3UALYkiLexYSXZlcldoU2NpYXM/0B3UALYkiLexYRkNnOVhsUVozRU0](https://drive.google.com/drive/u/0/#folders/0B3UALYkiLexYSXZlcldoU2NpYXM/0B3UALYkiLexYRkNnOVhsUVozRU0))
In both of these above examples, the "Folder ID" you need for sharing is the last group of letters and numbers after the "/" so in example one, it is "0B3UALYkiLexYSXZlcldoU2NpYXM" in example two it is "0B3UALYkiLexYRkNnOVhsUVozRU0"

In the examples I used, example 1 was a folder on my drive, and example 2 was a folder inside that first one, that is why it has the entire first link before the second.
We only need the section after the "/" furthest to the right.

So now that you have your "Folder ID", take the above formula "[https://googledrive.com/host/(folder](https://googledrive.com/host/(folder) id)"
Example 1 [https://googledrive.com/host/0B3UALYkiLexYSXZlcldoU2NpYXM](https://googledrive.com/host/0B3UALYkiLexYSXZlcldoU2NpYXM)
Example 2 [https://googledrive.com/host/0B3UALYkiLexYRkNnOVhsUVozRU0](https://googledrive.com/host/0B3UALYkiLexYRkNnOVhsUVozRU0)

Great, now that you have this link, open it in a new page. It will direct you to the shared folder. Once there you can either right click on any file and select "Copy link address" or you can click any file in that folder and it will take you to the hosted image, the URL at the top of the page is the hosting URL.

That is the how you do it. It is quite annoying, and personally it seems a whole lot easier to just revert to the old google drive.

I will try to make a new tutorial video ASAP

Let me know if this does not work for you and what problem you are experiencing.

End Edit)

[https://www.youtube.com/watch?v=QmN22LMPdDk&feature=youtu.be](https://www.youtube.com/watch?v=QmN22LMPdDk&feature=youtu.be)

Or you can just follow the written ones below.

These pictures go with the ones listed in the steps.

[https://googledrive.com/host/0B3UALYkiLexYSXZlcldoU2NpYXM/](https://googledrive.com/host/0B3UALYkiLexYSXZlcldoU2NpYXM/)

1.  Create a Folder on your Google Drive that you would like to use for sharing images.

2.  Select that folder and go to the sharing options. Change the "Who has access" options from "Specific People" to "Public on the web" All images placed in folder will have a hosting link on them shown in Step 4

    (Images : [Change Folder Option.png](https://googledrive.com/host/0B3UALYkiLexYSXZlcldoU2NpYXM/Change%20folder%20option.png), [Change folder option 2.png](https://googledrive.com/host/0B3UALYkiLexYSXZlcldoU2NpYXM/Change%20folder%20option%202.png), and [Change folder option 3.png](https://googledrive.com/host/0B3UALYkiLexYSXZlcldoU2NpYXM/Change%20folder%20option%203.png))

3.  place an image in that folder.

4.  select the image you would like to share and look at the details section (usually on right hand side) for a section labeled "Hosting" you should find a link that starts with

    "googledrive.com/host/(random numbers and digits that are the ID for that folder)/(file name)"

    Use that link to share your images. You can use that link to embed them into other websites.

    (Images: [Change folder option 4.png](https://googledrive.com/host/0B3UALYkiLexYSXZlcldoU2NpYXM/Change%20folder%20option%204.png) and [Change folder option share.png](https://googledrive.com/host/0B3UALYkiLexYSXZlcldoU2NpYXM/Change%20folder%20option%20share.png))

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2012-09-08T01:24:01.563

Vetea，如果您从图片 URL 获取链接，它不起作用，但如果您从“直接链接”字段获取它应该可以。我已经在多个场合使用和测试过它。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2021-10-05T13:59:50.237

这是唯一没有重定向的直接链接格式（然后是永久链接），并且仅适用于 Google Drive 上直接可见的文件（例如图像和文档）。
它不受下载限制的影响，您可以使用它在网站上显示图像。

例如分享链接：

```
https://drive.google.com/file/d/FILE_ID/view?usp=sharing 
```

变成：

```
https://lh3.googleusercontent.com/d/FILE_ID 
```

lh4、lh5 和 lh6 也可以工作。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-08-19T18:38:03.013

我发现的一个非常有用的 api/url 是：

*   `imageId`-> 文件 ID
    [![如果您遇到困难，您可以在哪里找到 fileId 的屏幕截图](../Images/1a5fd2eee7f33b433e8599bbcf8de29d.png)](https://i.stack.imgur.com/ryay7.png)
*   `width`，所需的宽度（不能大于图像分辨率宽度），必须是整数才能工作
*   `height`，所需的高度（不能大于图像分辨率高度），必须是整数才能工作

```
https://drive.google.com/thumbnail?id=${imageId}&sz=w${width}-h${height} 
```

注意：api/url 将保持纵横比，因此它将在首先满足的任何维度停止

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-04-28T09:30:52.550

对于图像，在谷歌查看器中打开图像。IE

# 方法一

[https://docs.google.com/file/d/0Bz7qe_olclTwWDNJRDRmb1pJamM/edit](https://docs.google.com/file/d/0Bz7qe_olclTwWDNJRDRmb1pJamM/edit)

然后查看源>找到单词“texmex-thumb”，旁边会有链接。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2012-04-28T06:33:52.957

Google Drive API 中有一个文件类型选项。您也许可以检查它是否解析为有效图像。我会看一个选项，如果文件类型给我一个无效的图像，然后为该文件获取一个新的直接 URL。虽然我还没有弄清楚如何做到这一点，但也许这是一条尝试的道路。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2013-09-26T13:03:19.707

您可以直接从云端硬盘和 Gmail 中进行操作。就是这样：

1.将图像上传到谷歌驱动器并设置查看权限（可以是公开的或任何有链接的人）

1.  转到Gmail>撰写。选择附件图标旁边的 +。

2.  选择驱动器图标（三角形）

3.  导航到您的图片并右键单击复制图片网址

4.  根据需要粘贴到网络浏览器或嵌入网页。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-09-04T05:07:38.347

您可以按照以下步骤将您想要的文件嵌入到您的网站。

1.  在 Google Drive 中查找 PDF 文件
2.  在 Google Drive 中预览 PDF 文件
3.  弹出 Google Drive 预览
4.  使用更多操作菜单并选择嵌入项目
5.  提供的复制代码
6.  编辑您要嵌入的 Google 协作平台页面
7.  打开 HTML 编辑器
8.  粘贴 Google Drive 预览提供的 HTML 嵌入代码
9.  使用更新按钮并保存页面

参考资料：[https ://www.steegle.com/websites/google-sites-howtos/embed-drive-pdf](https://www.steegle.com/websites/google-sites-howtos/embed-drive-pdf)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-01-01T16:22:48.143

1.将您的图片设置更改为公开。

2.获取它的共享链接。

3.转到[本网站](https://google-drive-direct-link.blogspot.com/)并生成直接下载链接。

为我工作！

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-11-24T17:37:19.927

Niutech提供的解决方案对我有用，即

```
http://googledrive.com/host/<folderID>/<filename> 
```

但是有两个悬而未决的问题

1.  您不能在驱动器的同一文件夹中拥有 2 个同名文件，否则此链接将不起作用。

2.  目前尚不清楚，但谷歌似乎计划通过驱动器弃用图像托管。请参阅下面的链接。 [https://support.google.com/richmedia/answer/6098968?hl=en](https://support.google.com/richmedia/answer/6098968?hl=en)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-06-09T16:12:51.023

### 功能名称：goobox

### 标签：图片托管、正则表达式、URL、谷歌驱动器、保管箱、高级

*   return: string, 返回一个可以直接作为图片来源的字符串URL。
*   当您在 google drive 或 dropbox 上托管图像时，您不能使用文件的直接 URL 作为图像源。
*   您需要更改此 URL 以将其直接用作图像源。
*   `goobox()`将获取图像文件的 URL，并将其更改为直接用作图像源。
*   重要提示：您需要先检查文件的权限，以及它是否是公开的。
*   现场示例：[https ://ybmex.csb.app/](https://ybmex.csb.app/)

```
cconst goobox = (url)=>{

    let dropbox_regex = /(http(s)*:\/\/)*(www\.)*(dropbox.com)/;
    let drive_regex =/(http(s)*:\/\/)*(www\.)*(drive.google.com\/file\/d\/)/;

    if(url.match(dropbox_regex)){
       return url.replace(/(http(s)*:\/\/)*(www\.)*/, "https://dl.");
    }
    if(url.match(drive_regex)){
        return `https://drive.google.com/uc?id=${url.replace(drive_regex, "").match(/[\w]*\//)[0].replace(/\//,"")}`;
    }
    return console.error('Wrong URL, not a vlid drobox or google drive url');
} 
```

```
let url = 'https://drive.google.com/file/d/1PiCWHIwyQWrn4YxatPZDkB8EfegRIkIV/view' 

goobox(URL); //  https://drive.google.com/uc?id=1PiCWHIwyQWrn4YxatPZDkB8EfegRIkIV 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2012-12-10T23:59:58.133

Con 可以禁用 javascript 在您的浏览器中打开图像文件并在查看页面源代码或右键单击图像，您将看到图像链接。（之前检查共享偏好）

* * *

## 回答 #25

> 赞同：-3
> 
> 时间：2016-07-13T19:23:40.997

然而这个答案很简单，事实上非常简单，是的，很多人都提到过，只需将图像的 id 放入以下链接[https://drive.google.com/uc?export=view&id=](https://drive.google.com/uc?export=view&id=) {fileId}

但无论多么容易，我制作了一个脚本以在控制台中运行。从谷歌驱动器中输入一组完整的可共享链接，并将它们转换为上述链接。然后它们可以简单地用作静态地址。

```
array = ['https://drive.google.com/open?id=0B8kNn6zsgGEtUE5FaGNtcEthNWc','https://drive.google.com/open?id=0B8kNn6zsgGEtM2traVppYkhsV2s','https://drive.google.com/open?id=0B8kNn6zsgGEtNHgzT2x0MThJUlE']

function separateDriveImageId(arr) {
for (n=0;n<arr.length;n++){

str = arr[n]

for(i=0;i<str.length;i++){
if( str.charAt(i)== '=' ){
var num = i+1;
var extrctdStrng = str.substr(num)

}
}
console.log('https://drive.google.com/uc?export=view&id='+extrctdStrng)
window.open('https://drive.google.com/uc?export=view&id='+extrctdStrng,'_blank')
}

}
separateDriveImageId(array)
```

# php - PHP PDO：SQL 查询结束时的常量变量

> ID：10311093
> 
> 赞同：1
> 
> 时间：2012-04-25T07:20:31.463
> 
> 标签：php, mysql, sql, pdo

我似乎无法弄清楚这一点，我正在尝试在我的应用程序中全球化所有数据库凭据，因此我在全局常量文件中设置数据库表名。我有一个查询，无论我尝试用多少种方法在字符串中设置常量变量，它都失败了。有人有想法么？

这是常量变量更改之前的查询，该查询有效：

```
$stmt = $dbh->prepare("SELECT MAX(salesPosition) FROM crmManager"); 
```

以下是一些都失败的不同尝试（常量变量是 TBL_NAVIGATION）：

```
$stmt = $dbh->prepare("SELECT MAX(salesPosition) FROM " . TBL_NAVIGATION . ");    
$stmt = $dbh->prepare("SELECT MAX(salesPosition) FROM".TBL_NAVIGATION.");
$stmt = $dbh->prepare("SELECT MAX(salesPosition) FROM".TBL_NAVIGATION);
$stmt = $dbh->prepare("SELECT MAX(salesPosition) FROM {TBL_NAVIGATION}");
$stmt = $dbh->prepare("SELECT MAX(salesPosition) FROM".TBL_NAVIGATION"); 
```

我什至尝试将其最初设置为变量：

```
$table = TBL_NAVIGATION;
$stmt = $dbh->prepare("SELECT MAX(salesPosition) FROM {table}"); 
 // I've tried every possible way to include the variable 
```

我怎样才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:25:16.493

你不需要 " 在常量之后。

```
"SELECT MAX(salesPosition) FROM " . TBL_NAVIGATION 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:51:35.147

始终检查您的语法是这里要学习的课程：

正确的查询是：

```
$stmt = $dbh->prepare("SELECT MAX(salesPosition) FROM ".TBL_NAVIGATION); 
```

感谢Kaii唤醒了我！

# android - 获取本地网络 (LAN) 中的设备列表？

> ID：10311096
> 
> 赞同：7
> 
> 时间：2012-04-25T07:20:43.673
> 
> 标签：android, networking, broadcast, wireless

我正在寻找一种方法来查找局域网 (LAN) 中的所有设备（尤其是打印机）。

有没有办法区分打印机和其他设备（智能手机、笔记本电脑、电脑等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:27:16.320

如果你试试这个呢？[http://jmdns.sourceforge.net/](http://jmdns.sourceforge.net/)

JmDNS 是多播 DNS 的 Java 实现，可用于局域网中的服务注册和发现。JmDNS 与 Apple 的 Bonjour 完全兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-09T08:17:02.817

你应该使用网络服务发现

[https://developer.android.com/training/connect-devices-wireless/nsd.html](https://developer.android.com/training/connect-devices-wirelessly/nsd.html)

# ruby-on-rails - 关于在 Win7 上启动 Ruby 服务器时出现 JS 错误的一些事情

> ID：10311102
> 
> 赞同：0
> 
> 时间：2012-04-25T07:21:20.400
> 
> 标签：ruby-on-rails

* * *

## 更新 +2 小时：

我重新启动、卸载并安装了下载的 Railsinstaller 程序的新副本。

将宝石大理石拉下并安装。说安装正确。（但是，我想我在某些地方读到 gem name 就足够了， gem install name 是多余的。）

启动服务器 - 同样的问题。运行时 JS 不存在。

所以我创建了一个新的应用程序。构建经历了干净。再次安装 execjs。（正确安装）。运行'rails s'并且同样的问题仍然存在。

未找到解决方案。

* * *

我是一个绝对的新手。步骤顺序：

1.  以传统方式安装 Ruby。从 Ruby 网站下载，安装，尝试使其工作。出了点问题 - BUNDLE INSTALL 说它找不到 gem 文件。

我说没问题-让我们寻找答案...

1.  我将 Railsinstaller 安装为完整包。安装很顺利。我什至创建了一个名为“my_app”的新虚拟应用程序。

耶...

1.  然后我使用应用程序导航到目录并在命令提示符下打了“rails s”（顺便说一句，它是以管理员身份运行的）

服务器启动（WEBrick）。我去 localhost:3000 并没有显示。我去提示并做 gem install rails 它去获取一些宝石并做更多的工作

现在，当我启动服务器时 - 它会引发一些关于 Javascript 的错误。

这是错误：

C:\Sites\my_app>rails s

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.3.0/lib/execjs/run
times.rb:50:in `autodetect': Could not find a JavaScript runtime. See https://gi
thub.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUn
available)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.3.0/l
ib/execjs.rb:5:in `<module:ExecJS>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.3.0/l
ib/execjs.rb:4:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee_script.rb:1:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee_script.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee-script.rb:1:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-script-
2.2.0/lib/coffee-script.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-rails-3
.2.2/lib/coffee-rails.rb:1:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/coffee-rails-3
.2.2/lib/coffee-rails.rb:1:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/runtime.rb:68:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/runtime.rb:66:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/runtime.rb:66:in `block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/runtime.rb:55:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler/runtime.rb:55:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22
/lib/bundler.rb:122:in `require'
        from C:/Sites/my_app/config/application.rb:7:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
/lib/rails/commands.rb:53:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
/lib/rails/commands.rb:53:in `block in <top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
/lib/rails/commands.rb:50:in `tap'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1
/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'

C:\Sites\my_app> 
```

我不知道下一步该做什么。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:59:07.187

我的 Hosts 文件中充满了一些验证器垃圾。清理了它，服务器现在正在工作。

# security - 如何保护 HTML5 中的 localStorage？

> ID：10311103
> 
> 赞同：4
> 
> 时间：2012-04-25T07:21:22.560
> 
> 标签：security, html, local-storage

我们如何保护 HTML5 localStorage 的内容免受用户篡改？对于 cookie，我们以加密格式存储信息，用于加密的秘密将存储在客户端不知道的服务器中。

但是，在 localStorage 中，信息驻留在客户端，我们将密钥发送给客户端。那么，是否有任何标准方法可以保护 localStorage 中的信息不被用户篡改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T08:01:32.240

*@Mikko Ohtamaa*是对的。使用起来不太安全。但也许您可以使用 sessionStorage 将信息保存到会话结束。并从这个[网站](http://michael-coates.blogspot.com/2010/07/html5-local-storage-and-xss.html)：

> 关于本地存储和安全的最终想法
> 
> 1.  不要将本地存储用于会话标识符。坚持使用 cookie 并使用 HTTPOnly 和 Secure 标志。
>     
>     
> 2.  如果 cookie 由于某种原因无法工作，则使用会话存储，当用户关闭浏览器窗口时该存储将被清除。
>     
>     
> 3.  在本地存储中存储敏感数据时要小心。就像任何其他客户端存储选项一样，用户可以查看和修改此数据。

最后一件事是不要将敏感数据存储在本地存储中......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T07:48:48.560

您不保护 localStorage。

来自客户端软件的任何东西都必须是不受信任的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-10-22T00:12:08.910

对于仍然想知道的任何人，请查看[SecurityJS.128](https://github.com/Parking-Master/SecurityJS.128)，它是一个客户端 JavaScript 库，其中一个 API 是`window` [`secureStorage`](https://github.com/Parking-Master/SecurityJS.128#windowsecurestorage-api).

* * *

这是它的工作原理：

```
(async function() {
    // anonymous function
    // generate the key
    const myKey = securityjs.generateKey();
    // set the item
    secureStorage.setItem("item", "123");

    // lock it
    secureStorage.lock();

    // unlock it
    secureStorage.unlock(myKey);
    // get the item
    secureStorage.getItem("item");
    // "123"
})(); 
```

# c# - 回发后Javascript函数不起作用？

> ID：10311104
> 
> 赞同：3
> 
> 时间：2012-04-25T07:21:23.210
> 
> 标签：c#, javascript, asp.net

在这里，我试图在回发后增加 iframe 的高度，但它不起作用并且警报本身没有弹出。这是我的代码

```
function increaseiframesize() {
alert("aaaaaa");
$('#MainContent_IFTrendAnalysis').height('523');
} 
```

和

```
protected void lnkBTNSubmit_Click(object sender, EventArgs e
{
TextBox txtTextBoxRetailGroup   = (TextBox)uscRetailParameters.FindControl("txtRetailCustomerGroup");
TextBox txtTextBoxPPGroup       = (TextBox)uscRetailParameters.FindControl("txtProductGroup");
if (txtTextBoxRetailGroup.Text != string.Empty && txtTextBoxPPGroup.Text != string.Empty && txtATrendStartDate.Text != string.Empty && txtATrendEndDate.Text != string.Empty)
{
this.IFTrendAnalysis.Attributes.Add("src", "");
ScriptManager.RegisterStartupScript(this, this.GetType(), "ScriptRegistration", "increaseiframesize();", true);
}
} 
```

和

```
<asp:UpdatePanel ID="Update" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<iframe id="IFTrendAnalysis" name="IFTrendAnalysis" scrolling="auto" runat="server"
width="100%" height="403" frameborder="0"></iframe>
</ContentTemplate>
<Triggers>
<asp:AsyncPostBackTrigger ControlID="imgBTNSalesTrendChart" />
<asp:AsyncPostBackTrigger ControlID="imgBTNSalesLiftChart" />
<asp:AsyncPostBackTrigger ControlID="lnkBTNSubmit" />
<asp:AsyncPostBackTrigger ControlID="imgBTNSalesLiftChart" />
<asp:AsyncPostBackTrigger ControlID="imgBTNTAEventROI" />
<asp:AsyncPostBackTrigger ControlID="imgBTNTrendAnalyzeTBL" />
</Triggers>
</asp:UpdatePanel> 
```

有什么建议？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:26:50.247

我认为您正在尝试在发送并完成 ajax 请求并控制返回浏览器后调用您的方法。应该执行表单 onload 的 javascript 不会为 ajax all 执行。如果是 ajax 调用，则执行此操作

在 javascript 中注册 endRequest 事件

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandler) 
```

在这里调用你的方法

```
function EndRequestHandler(sender, args)
{
    increaseiframesize();
} 
```

# jquery - jquery 不适用于视觉强制页面

> ID：10311107
> 
> 赞同：1
> 
> 时间：2012-04-25T07:21:44.807
> 
> 标签：jquery, salesforce

我写了非常简单的javascript函数

```
function menuClass(id) {
jQuery(".active").removeClass("active");
jQuery("#"+id).addClass("active"); 
```

}

但是当我在visualforce页面中使用该功能时

它不工作

这是我正在使用它的visualforce页面行

```
<li id="ayurveda"><apex:outputLink value="panchkarmaayurveda" id="ayurvedaLink" onclick="menuClass('ayurveda');">Ayurveda</apex:outputLink> 
```

我也称这个函数为 onload 事件

```
 jQuery.noConflict(); 
```

这个函数工作的问题是什么也没有给出错误尝试与萤火虫

这是我实际使用它的链接 [Panchkarma Ayurveda](http://www.panchakarmayurveda.com/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:21:20.930

您需要将 jQuery.noConflict() 分配给一个唯一变量，然后在 menuClass 方法中使用该变量，即

```
$j = jQuery.noConflict(); 
```

和

```
function menuClass(id) {
  $j(".active").removeClass("active");
  $j("#"+id).addClass("active");
} 
```

有关更多信息，您可以查看[http://developer.force.com/cookbook/recipe/using-jquery-in-a-visualforce-page](http://developer.force.com/cookbook/recipe/using-jquery-in-a-visualforce-page)

# java - 春季ajax请求

> ID：10311111
> 
> 赞同：4
> 
> 时间：2012-04-25T07:21:59.653
> 
> 标签：java, spring, spring-mvc

我有一个 spring 3.1 Web 应用程序并正在尝试发出 ajax 请求，但在 firebug 中我可以看到我的映射未找到。我尝试了各种方法，但无法达到我的控制器方法。以下是一些细节：

我有我的 web.xml：

```
<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/ctrl/*</url-pattern>
</servlet-mapping> 
```

这是我的控制器中的：

```
@RequestMapping(value="/ctrl/test", method = RequestMethod.GET)
public @ResponseBody String test() {
    System.out.println("method test()");
    return "aString";
} 
```

这个我在我的 dispatcher-servlet.xml 中有：

```
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

我有另一个请求映射到我的控制器中的一个方法，并且该请求正在工作，但它不是 ajax：

```
@RequestMapping(value="/ctrl", method = RequestMethod.GET)
public String printWelcome(ModelMap model, HttpSession session) {
    initializeTree(session);
    return "tree";
} 
```

任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:36:13.450

我总是使用基于 ajax 的链接作为 *.action 或 *.ajax 用于基于 AJAX 的请求和 *.html 映射用于 jsp 视图。那么你的调度器 Servlet 应该如下

```
 <servlet>
        <servlet-name>mvc-dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>*.ajax</url-pattern>
    </servlet-mapping>
<servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping> 
```

下一步：

如果您所有的 ajax 命令 URI 都以 /ctrl 开头，我向您推荐以下内容：

```
@Controller
@RequestMapping(value="/ctrl")
public class AjaxController{

@RequestMapping(value="/test.ajax", method = RequestMethod.GET)

public String test(ModelMap model, HttpSession session) {
    System.out.println("method test()");
    return "test";

}
} 
```

不要忘记为`@ResponseBody`基于 ajax 的映射添加注释。

现在 index.html 的视图控制器应该如下：

```
@Controller
public class ViewController{

@RequestMapping(value="/index.html", method = RequestMethod.GET)
@ResponseBody
public String test(ModelMap model, HttpSession session) {
    System.out.println("method test()");
    return "index";

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:08:23.913

我找到了一个解决方案：

在我的 web.xml 中：

```
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/ctrl/*</url-pattern>
</servlet-mapping> 
```

在我的控制器中：

```
@RequestMapping(value="/test", method = RequestMethod.GET)
public String test(ModelMap model, HttpSession session) {
    System.out.println("method test()");
    return null;
} 
```

在客户端，我使用 jQuery：

```
$.get(
     "ctrl/test/",
     function(data){
         alert(data);
}); 
```

我可以以此为基础；我的 System.out.println 正在打印，所以我现在可以访问我的控制器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:42:24.853

您的调度程序 servlet 未映射到`/ctrl/test`，因此不会为 AJAX 控制器调用它。

改变你`servlet-mapping`的

```
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/ctrl/*</url-pattern>
</servlet-mapping> 
```

这样调度程序就可以调度这两个 URL。

有关更多信息，这可能会有所帮助（Weblogic 特定但一般适用）：[http ://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/components.html#148787](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/components.html#148787)

# winforms - 默认情况下需要选中“退出时启动应用”复选框

> ID：10311120
> 
> 赞同：0
> 
> 时间：2012-04-25T07:22:31.747
> 
> 标签：winforms, wix, wix3.5

我们定制了 WIX 安装程序 UI。

```
<Wix xmlns='http://schemas.microsoft.com/wix/2006/wi' xmlns:netfx="http://schemas.microsoft.com/wix/NetFxExtension">
......       
<CustomAction Id="StartAppOnExit" FileKey="AdminAppExe" ExeCommand="" Execute="immediate" Impersonate="yes" Return="asyncNoWait" />
        <Property Id="LAUNCHAPPONEXIT" Value="1"/>

<Control Id="LAUNCHAPPONEXIT" Type="CheckBox" X="10" Y="243" Width="170" Height="17" Property="StartAppOnExit" Hidden="yes" CheckBoxValue="1" Text=" Launch App?">
              <Condition Action="show">NOT Installed</Condition>
</Control>
.....
</Wix> 
```

但是默认情况下未启用“启动应用程序的复选框”？请让我知道我做错了什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:21:53.430

您正在设置 property `LAUNCHAPPONEXIT`，大概是默认选中该框。但是，控件使用不同的属性 - `StartAppOnExit`。

您需要设置复选框正在使用的属性的值，或更改复选框以使用您正在设置的属性。

# c++ - linux编程中的多目录“make”

> ID：10311122
> 
> 赞同：-2
> 
> 时间：2012-04-25T07:22:43.717
> 
> 标签：c++, c, linux, makefile

假设我们有一个文件列表：

*   源代码
    *   一个
    *   b
    *   C
*   生成文件

每个文件夹中有许多 .cc 和 .h 文件。Makefile怎么写？？

当我写这样的路径时 ./a/a.cc 或 ../a/a.cc

会发生错误。

但是当我将文件放在同一目录并写为 a.cc 时。一切都好。

我在cygwin上运行它。谁能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:31:13.137

该`wildcard`功能是您正在寻找的：[http ://www.gnu.org/software/make/manual/html_node/Wildcards.html](http://www.gnu.org/software/make/manual/html_node/Wildcards.html)

在 Linux 上，我更喜欢 Automake/Autoconf 构建系统：[http ://de.wikipedia.org/wiki/GNU_Build_System](http://de.wikipedia.org/wiki/GNU_Build_System)

另一种可能是 CMake：[http ://www.cmake.org/](http://www.cmake.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:44:02.797

您遗漏了很多细节（例如，您想要放置目标文件的位置），但`VPATH`可能正是您想要的。

```
VPATH = src/a src/b src/c

# Now you can write rules as if the .cc & .h files were in the current directory.

%.o: %.cc
    do something with $<

foo.o: foo.cc bar.h
    do something special with $< 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T07:34:13.137

`src/`从不太清晰的目录图中，您似乎缺少`Makefile`. 例如编译`src/a/a.cc`，使用：

```
src/a/a.o: src/a/a.cc
    $(CXX) $(CXXFLAGS) -c -o $@ $< 
```

**但是**：帮自己一个忙，并使用真正的构建系统，例如[CMake](http://www.cmake.org)。它是跨平台的，可以生成 IDE 项目文件（例如 Visual Studio、Xcode、Eclipse、CodeBlocks 等），级别更高，并为您进行自动依赖跟踪。

# c - 使用指针销毁双端队列并在 C 中释放

> ID：10311125
> 
> 赞同：1
> 
> 时间：2012-04-25T07:23:05.550
> 
> 标签：c, pointers, free, deque

我试图破坏我的双端队列，但不知何故我失败了。我编写了以下代码（deque 是一个指向指针的指针，它指向 deque 的第一个元素）。DequeItem 是具有字段 next（指向下一个元素）和数据（void *）的结构。

```
void deque_destroy(DequeItem **deque) {
    DequeItem *temp;
    DequeItem *item;
    for (item = *deque; item != NULL; item = temp) {
        printf("%d", *((int*)((item)->data)));
        temp = item->next;
        free(item);
    }
} 
```

结构声明是：

```
struct DequeItem {
  void *data;                  // Data stored in the deque item

  struct DequeItem *previous;  // Pointer to the previous DequeItem in the ring
  struct DequeItem *next;      // Pointer to the next DequeItem in the ring
};

typedef struct DequeItem DequeItem; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:25:52.880

看起来正确，在您调用该项目`temp` *之前*阅读做得很好`free()`，这是您避免的常见初学者错误。

我认为您需要提供更多关于出了什么问题的信息，也许还需要提供结构声明。

成员是否`data`也动态分配内存？如果是这样，您可能还需要`free(item->data);`调用，具体取决于创建项目时它是如何分配的。

正如评论者所指出的，您的`data`指针可能是`NULL`这样，您应该在打印之前检查它：

```
if(item->data != NULL)
  printf("%d\n", *(int *) item->data); 
```

笔记：

*   [转换表达式的简化](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)使其更易于阅读。
*   在字符串中包含换行符 ( `'\n'`)`printf()`以避免缓冲混淆和直观地分隔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:50:48.807

问题是，即使第一个元素已被破坏，双端队列中最后一个元素（后元素）的下一个指针将指向第一个元素（前元素）。我通过设置解决了这个问题

```
(*deque)->previous->next = NULL 
```

在上面的for循环之前。感谢帮助！

# codeigniter - 我想在 CodeIgniter 中定义变量，以便可以在应用程序中访问它

> ID：10311132
> 
> 赞同：0
> 
> 时间：2012-04-25T07:23:37.730
> 
> 标签：codeigniter

例如常量数组，以便可以在控制器、视图、模型中访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:28:38.293

如果您正在寻找全局可访问的数据，那么会话不仅仅是一种存储功能。

像这样设置会话值

```
$this->session->set_userdata('item', 'value'); 
```

并读取这样的值

```
$this->session->userdata('item'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:32:29.533

如果数据在运行时没有改变，你可以使用 config

[http://codeigniter.com/user_guide/libraries/config.html](http://codeigniter.com/user_guide/libraries/config.html)

# javascript - js - kcfinder tinymce 实现

> ID：10311134
> 
> 赞同：1
> 
> 时间：2012-04-25T07:23:40.783
> 
> 标签：javascript, html

如何从 KCFinder 获取绝对图像 url？

KCFinder URL 链接：[http ://kcfinder.sunhater.com/](http://kcfinder.sunhater.com/)

也试过这个资源： http: [//sourceforge.net/apps/phpbb/kcfinder/viewtopic.php ?f=4&t=23](http://sourceforge.net/apps/phpbb/kcfinder/viewtopic.php?f=4&t=23)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T05:55:35.057

在你的配置文件（kcfinder）上设置`'uploadURL' => "../../upload"`，=>`'uploadURL' => "http://domain/upload"` 它对我有用

# memory - 如何在 Wince 6.0 中通过 config.bib 更改程序内存？

> ID：10311137
> 
> 赞同：1
> 
> 时间：2012-04-25T07:23:53.720
> 
> 标签：memory, windows-ce, platform-builder, windows-embedded

我收到一个错误：程序内存不足 将一些存储内存转换为程序内存...稍后使用系统控制面板调整内存。

我想通过config.bib更改程序内存。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:12:36.690

利用[`FSRAMPERCENT`](http://msdn.microsoft.com/en-us/library/ee479036%28v=winembedded.60%29.aspx)

# objective-c - 使用安全框架以root身份授权后无法调试应用程序

> ID：10311139
> 
> 赞同：0
> 
> 时间：2012-04-25T07:24:04.470
> 
> 标签：objective-c, xcode, macos

一个简单的 Cocoa 应用程序，我可以调试它，断点正常触发。但是在使用安全框架以 root 身份授权后，断点无法再次触发，我无法再次调试应用程序。为什么？我应该怎么做才能解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:51:13.310

尝试先以 sudo 方式打开 Xcode：

```
cd /Developer/Applications
sudo open Xcode 
```

# java - Java Android：获取标签值的XML解析

> ID：10311145
> 
> 赞同：0
> 
> 时间：2012-04-25T07:24:29.693
> 
> 标签：java, android, xml, xml-parsing, nodes

我正在尝试解析一个 xml 文件，但似乎不明白它是如何工作的。我已经调试了几个小时，但似乎无法获得正确的值。我设法让代码适用于 tracklist 标签，但不适用于播放列表标签和他的子标签。

我想要一个播放设备的价值，将来会添加更多。

这是xml源代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<root>
<tracklist>
    <track>track001.mp3</track>
    <track>track002.mp3</track>
    <track>track003.mp3</track>
    <track>track004.mp3</track>
    <track>track005.mp3</track>
    <track>track006.mp3</track>
    <track>track007.mp3</track>
    <track>track008.mp3</track>
    <track>track009.mp3</track>
    <track>track010.mp3</track>
</tracklist>
<playbacklist>
    <playback>
        <name>Speaker1</name>
        <ip>192.168.1.103</ip>
        <room>Kitchen</room>
        <options>0</options>
        <state>NotPlaying</state>
    </playback>
</playbacklist>
</root> 
```

这是java代码（代码片段）：这段代码对我有用

```
DocumentBuilder db = factory.newDocumentBuilder();
Document doc = db.parse(inStream);
NodeList nodeList = doc.getElementsByTagName("root");

for (int index = 0; index < nodeList.getLength(); index++) {
Node node = nodeList.item(index);
if (node.getNodeType() == Node.ELEMENT_NODE) {
    Element element = (Element) node;
    NodeList nameNode = element.getChildNodes();
    for (int iIndex = 0; iIndex < nameNode.getLength(); iIndex++) {
        if (nameNode.item(iIndex).getNodeType() == Node.ELEMENT_NODE) {
                Element nameElement = (Element) nameNode.item(iIndex);
                    if(nameElement.getNodeName().equals("tracklist")){
                NodeList trackNodes = nameElement.getChildNodes();
            for(int i=0;i<trackNodes.getLength();i++){
                if (trackNodes.item(i).getNodeType() == Node.ELEMENT_NODE) {
                    Element trackElement = (Element) trackNodes.item(i);
                    playlist.add(trackElement.getFirstChild().getNodeValue());
                    }
                }
            } 
```

这段代码对我不起作用：

```
 if(nameElement.getNodeName().equals("playbacklist")){
            NodeList devicesNodes = nameElement.getChildNodes();
            for(int j=0;j<=devicesNodes.getLength();j++){
                Node nodeDevice = devicesNodes.item(j);
                NodeList childNodes = nodeDevice.getChildNodes(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T07:26:58.217

我会建议你使用`SAX`解析器，它比其他的简单且高效

如何解析：[如何使用 SAX 解析器解析 XML](https://stackoverflow.com/questions/4827344/how-to-parse-xml-using-the-sax-parser/4828765#4828765)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T07:39:19.093

这是我的[Sax 类生成器生成的 SaxParser](http://sherifandroid.blogspot.com/2011/10/sax-class-generator-v10.html)

```
package sherif.java.sax;

import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class YourHandler extends DefaultHandler
{
    //TAGS      /\Sherif/\
    private boolean root = false;
    private boolean playbacklist = false;
    private boolean playback = false;
    private boolean name = false;
    private boolean ip = false;
    private boolean room = false;
    private boolean options = false;
    private boolean state = false;
    private boolean tracklist = false;
    private boolean track = false;

    public YourHandler()
    {
        //TODO      /\Sherif/\
    }

    @Override
    public void startDocument() throws SAXException
    {
        super.startDocument();
        //TODO      /\Sherif/\
    }

    @Override
    public void endDocument() throws SAXException
    {
        super.endDocument();
        //TODO      /\Sherif/\
    }

    @Override
    public void characters(char sherifCh[], int sherifSt, int sherifle)
    {
        String value = (new String(sherifCh)).substring(sherifSt, sherifSt + sherifle);
        if(root)
        {
            if(playbacklist)
            {
                if(playback)
                {
                    if(name)
                    {
                        //TODO      /\Sherif/\

                    }
                    else if(ip)
                    {
                        //TODO      /\Sherif/\

                    }
                    else if(room)
                    {
                        //TODO      /\Sherif/\

                    }
                    else if(options)
                    {
                        //TODO      /\Sherif/\

                    }
                    else if(state)
                    {
                        //TODO      /\Sherif/\

                    }
                }
            }
            else if(tracklist)
            {
                if(track)
                {
                    //TODO      /\Sherif/\

                }
            }
        }
    }

    @Override
    public void startElement(String sherifUr, String sherifNa, String sherifQn, org.xml.sax.Attributes sherifAt) throws SAXException
    {
        super.startElement(sherifUr, sherifNa, sherifQn, sherifAt);
        if(sherifNa.equals("root"))
        {
            this.root = true;
        }
        else if(sherifNa.equals("playbacklist"))
        {
            this.playbacklist = true;
        }
        else if(sherifNa.equals("playback"))
        {
            this.playback = true;
        }
        else if(sherifNa.equals("name"))
        {
            this.name = true;
        }
        else if(sherifNa.equals("ip"))
        {
            this.ip = true;
        }
        else if(sherifNa.equals("room"))
        {
            this.room = true;
        }
        else if(sherifNa.equals("options"))
        {
            this.options = true;
        }
        else if(sherifNa.equals("state"))
        {
            this.state = true;
        }
        else if(sherifNa.equals("tracklist"))
        {
            this.tracklist = true;
        }
        else if(sherifNa.equals("track"))
        {
            this.track = true;
        }
    }

    @Override
    public void endElement(String sherifUr, String sherifNa, String sherifQn) throws SAXException
    {
        super.endElement(sherifUr, sherifNa, sherifQn);
        if(sherifNa.equals("root"))
        {
            this.root = false;
        }
        else if(sherifNa.equals("playbacklist"))
        {
            this.playbacklist = false;
        }
        else if(sherifNa.equals("playback"))
        {
            this.playback = false;
        }
        else if(sherifNa.equals("name"))
        {
            this.name = false;
        }
        else if(sherifNa.equals("ip"))
        {
            this.ip = false;
        }
        else if(sherifNa.equals("room"))
        {
            this.room = false;
        }
        else if(sherifNa.equals("options"))
        {
            this.options = false;
        }
        else if(sherifNa.equals("state"))
        {
            this.state = false;
        }
        else if(sherifNa.equals("tracklist"))
        {
            this.tracklist = false;
        }
        else if(sherifNa.equals("track"))
        {
            this.track = false;
        }
    }
} 
```

你可以使用它：

```
String yourXmlString;  
SAXParserFactory spf = SAXParserFactory.newInstance();  
SAXParser sp = spf.newSAXParser();  
XMLReader xr = sp.getXMLReader();  

/* Create a new instance of the class generated */  
YourHandler handler = new YourHandler ();  
xr.setContentHandler(handler);  

InputSource inputSource = new InputSource();  
inputSource.setEncoding("UTF-8");  
inputSource.setCharacterStream(new StringReader(response));  

/* Start Parsing */  
xr.parse(inputSource);  
/* Parsing Done. */ 
```

# xcode - 从 Xcode 快照中手动恢复文件

> ID：10311146
> 
> 赞同：0
> 
> 时间：2012-04-25T07:24:31.993
> 
> 标签：xcode, snapshot

是否可以从 Xcode (4.3.2) 快照中手动恢复文件？每当我尝试恢复快照时，Xcode 都会崩溃，所以我猜这些文件以某种方式损坏了。我找不到其他地方引用的快照图像：~/Library/Application Support/Developer/Shared/SnapshotRepository.sparseimage

但是，我找到了一个以 .xc​​snapshots 结尾的文件

是否可以使用 .xcsnapshots 文件恢复项目文件？如果是这样，怎么做？我无法理解它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T02:49:34.750

你能导出快照吗？导出快照与还原快照类似。主要区别在于导出项目的快照会将其还原到项目当前位置以外的文件夹。

要导出快照，请打开管理器并单击管理器顶部的项目按钮。从管理器的左侧选择您的项目。选择快照。单击导出快照按钮以导出快照。

Xcode 4 使用 .xcsnapshots 文件来存储项目的快照。当您从管理器中选择一个项目时，管理器会显示该项目快照的位置。该位置旁边是一个带箭头的小按钮。单击该按钮可在 Finder 中显示 .xcsnapshots 文件。在 Finder 中选择 .xcsnapshots 文件，右键单击并选择 Show Package Contents 以显示 .xcsnapshots 文件的内容。从我可以看到的 .xcsnapshots 文件是一个 git 存储库。我没有看到任何方法可以使用 Finder 从 .xcsnapshots 文件中访问单个文件，但是您可以使用 git 从命令行中找到并恢复文件。

# iphone - 在 Corona SDK 上同时播放和录制

> ID：10311148
> 
> 赞同：0
> 
> 时间：2012-04-25T07:24:38.280
> 
> 标签：iphone, ipad, lua, coronasdk

如何使用适用于 iOS 设备的 Corona SDK 同时播放和录制？我正在尝试构建类似于卡拉 OK 的东西。如果有人向我指出 GitHub 上任何现成的 API 或存储库，或者可以帮助我解决问题，那将会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:08:53.667

抱歉，您无法实时执行此操作...

如果没有实时将涉及使用 Corona 不公开的一些 API 来进行声音编辑，Corona 对声音的支持仍然非常基本，可能是因为 Android 声音支持现在也有点不稳定......

要做到这一点，你需要 Corona Enterprise，以及大量的原生 SDK 摆弄，我不确定你是否可以在 Android 中做到这一点而不需要一些繁重的工作......

# javascript - 如何根据过滤器对象过滤对象

> ID：10311149
> 
> 赞同：1
> 
> 时间：2012-04-25T07:24:41.320
> 
> 标签：javascript, filter

有没有一种方便的方法来过滤，只使用定义的`bigObject`属性作为输出？`filterInterface``filteredObject`

大对象有很多属性，我想将信息剥离到我需要的属性（将其保存在某处，不想/不能保存完整的对象）。

[我在这里准备了以下代码作为jsfiddle。](http://jsfiddle.net/marcgrabow/FnuJT/)

```
// My big object
var bigObject = {
    prop1: {
        prop2: {
            prop3: 123,
            prop4: 456,
            prop5: "TEST"            
        },
        prop6: 789,
        prop7: "xxx"
    },
    prop8: 5.6,
    prop9: 3    
}; 

// My "interface" to filter the object
var filterInterface = {
    prop1: {
        prop2: {
            prop3: true,
        },
        prop7: true
    }                
};

// My expected result, only the properties of 
// big Object which match the interface
var filteredObject = {
    prop1: {
        prop2: {
            prop3: 123,
        },
        prop7: "xxx"
    }                
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:33:30.590

简而言之，我希望是这样的：

```
var filteredObject = {}

for (var key in filterObject) {
  if (bigObject.hasOwnProperty(key)) {
    filteredObject[key] = bigObject[key];
  }
} 
```

如果您想要“深度”过滤，请包括递归：

```
function filter(obj, filterObj) {
  var newObj = {};

  for (var key in filterObj) {

    if (obj.hasOwnProperty(key)) {

      if (typeof obj[key] == 'object' && typeof filterObj[key] == 'object') {
        newObj[key] = filter(obj[key], filterObj[key]);

      } else {
        newObj[key] = obj[key];
      }
    }
  }
  return newObj;
}

var o = filter(bigObject, filterInterface);

alert(o.prop1.prop7); // 'xxx'
alert(o.prop1.prop9); // undefined 
```

# sql - Sql 查询为表中的每个组合返回一条记录

> ID：10311152
> 
> 赞同：1
> 
> 时间：2012-04-25T07:24:58.133
> 
> 标签：sql, combinations

我需要 (from_id, to_id) 的每个组合的结果，它具有最小值和匹配条件的循环。

所以基本上我需要具有最小值的循环。例如，从 A 到 B 我需要最小值和 loop_id 。

该表具有以下字段：

```
value     from_id   to_id     loop_id
-------------------------------------

2.3         A         B          2

0.1         A         C          2

2.1         A         B          4

5.4         A         C          4 
```

所以结果将是：

```
value     from_id   to_id     loop_id
-------------------------------------

2.1         A         B          4

0.1         A         C          2 
```

我尝试过以下方法：

```
SELECT t.value, t.from_id, t.to_id,t.loop_id
FROM myresults t 
INNER JOIN (
     SELECT min(m.value), m.from_id, m.to_id, m.loop_id
     FROM myresults m where m.loop_id % 2 = 0
     GROUP BY m.from_id, m.to_id, m.loop_id
) x
   ON  (x.from_id = t.from_id and x.to_id=t.to_id and x.loop_id=t.loop_id )
   AND x.from_id = t.from_id and x.to_id=t.to_id and x.loop_id=t.loop_id 
```

但它正在返回所有循环。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:54:26.413

据我了解，这将起作用：

```
SELECT  t.value, t.from_id, t.to_id, t.loop_id
FROM    MyResults t
        INNER JOIN
        (   SELECT  From_ID, To_ID, MIN(Value) [Value]
            FROM    MyResults
            WHERE   Loop_ID % 2 = 0
            GROUP BY From_ID, To_ID
        ) MinT
            ON MinT.From_ID = t.From_ID
            AND MinT.To_ID = t.To_ID
            AND MinT.Value = t.Value 
```

但是，如果您有 From_ID 和 To_ID 组合的重复值，例如

```
value     from_id   to_id     loop_id
-------------------------------------

0.1         A         B          2

0.1         A         B          4 
```

这将返回两行。

如果您使用的是 SQL-Server 2005 或更高版本，并且您想要如上所述的重复行，您可以使用：

```
SELECT  Value, From_ID, To_ID, Loop_ID
FROM    (   SELECT  *, MIN(Value) OVER(PARTITION BY From_ID, To_ID) [MinValue]
            FROM    MyResults
        ) t
WHERE   Value = MinValue 
```

如果你不想要重复的行，你可以使用这个：

```
SELECT  Value, From_ID, To_ID, Loop_ID
FROM    (   SELECT  *, ROW_NUMBER() OVER(PARTITION BY From_ID, To_ID ORDER BY Value, Loop_ID) [RowNumber]
            FROM    MyResults
        ) t
WHERE   RowNumber = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:40:34.280

你不能更简单地做到这一点吗？

```
SELECT
  from_id,
  to_id,
  MIN(value)
FROM
  myresults
WHERE
  loop_id % 2 = 0
GROUP BY
  from_id,
  to_id 
```

或者我可能误解了这个问题。

编辑：包括 loop_id

```
SELECT
  m2.from_id,
  m2.to_id,
  m2.value,
  m2.loop_id
FROM
  myresults m2 INNER JOIN
    (SELECT
      m1.from_id,
      m1.to_id,
      MIN(m1.value)
    FROM
      myresults m1
    WHERE
      m1.loop_id % 2 = 0
    GROUP BY
      m1.from_id,
      m1.to_id) minset
  ON
        m2.from_id = minset.from_id
    AND m2.to_id = minset.to_id
    AND m2.value = minset.value 
```

# java - Java：关于 Collections ReverseComparator 实现

> ID：10311155
> 
> 赞同：6
> 
> 时间：2012-04-25T07:25:31.383
> 
> 标签：java, collections, comparator

这实现如下（jdk1.6.0_31）：

```
private static class ReverseComparator<T>
implements Comparator<Comparable<Object>>, Serializable {

// use serialVersionUID from JDK 1.2.2 for interoperability
private static final long serialVersionUID = 7207038068494060240L;

    public int compare(Comparable<Object> c1, Comparable<Object> c2) {
        return c2.compareTo(c1);
    }

    private Object readResolve() { return reverseOrder(); }
} 
```

为什么不能改为如下实现：

```
private static class ReverseComparator<T extends Comparable<T>> 
implements Comparator<T>, Serializable {

// use serialVersionUID from JDK 1.2.2 for interoperability
private static final long serialVersionUID = 7207038068494060240L;

    public int compare(T c1, T c2){
        return c2.compareTo(c1);
    }
    ...
} 
```

只是风格，还是有更深层次的原因？

编辑：显示的源代码来自 Sun/Oracle jdk ((jdk1.6.0_31))。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:19:22.117

我相信这都与使 ReverseComparator 成为单例对象的意图有关。由于必须在静态上下文中定义单例实例，因此使用任何泛型类型毫无意义。

```
static final ReverseComparator REVERSE_ORDER = new ReverseComparator(); 
```

此代码生成原始类型警告。

因此，仅用于此问题的 ReverseComparator 的实现可能已按照您的建议或已实现。也许他们选择了当前的实现，因为它更容易阅读，并且因为他们认为如果它只是为了这个简单的目的而*私下使用，就不需要进一步的概括。*

在您的实现和 Oracle 的实现上运行 Java 反编译器会产生相同的原始类型字节码。

```
 public int compare(java.lang.Comparable, java.lang.Comparable
 public int compare(java.lang.Object, java.lang.Object); 
```

最后，当比较器在方法中通过 Collections 类的公共接口暴露出来时，`reverseOrder()`无法避免强制转换和未检查警告。但我们都确信这不会失败，无论涉及的类型如何。

底线，恕我直言，我认为实现它的唯一原因与代码清晰度有关，或者如果无论如何都无法阻止未经检查的警告，则希望不要使事情变得过于复杂。但是，嘿，这不会是我第一次错了 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T03:22:31.090

我正在查看 Oracle 1.6.0_26，但我看到了相同的代码。据我所知，这些在功能上是等效的。你也可以这样写：

```
private static class ReverseComparator<T> implements Comparator<Comparable<T>>, Serializable {

    // use serialVersionUID from JDK 1.2.2 for interoperability
    private static final long serialVersionUID = 7207038068494060240L;

    public int compare( Comparable<T> c1, Comparable<T> c2 ) {
        return c2.compareTo( (T) c1 );
    }

    private Object readResolve() {
        return reverseOrder();
    }
} 
```

我对他们为什么使用它的唯一猜测`Comparable<Object>`是基于实现`Comparable`（或`Comparator`）的类应该遵守`equals()`合同的事实，合同*确实*使用`Object`. 所以从语义上讲，这强调了这种联系。除此之外，我想不出理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T08:42:03.853

只是猜测，但它存储在静态字段中

```
static final ReverseComparator REVERSE_ORDER
            = new ReverseComparator(); 
```

因此您的版本会生成“原始类型”警告。

# excel - 在 Office 365 中使用 ExcelServices？

> ID：10311158
> 
> 赞同：0
> 
> 时间：2012-04-25T07:25:42.740
> 
> 标签：excel, office365

我使用 Office 365 计划 E3，我想在服务器上的文档库中复制和修改 Excel 文件。目标是从列表项中读取一些值并使用这些值更新 excel。在 excel 文件中，有几个公式可以生成客户想要的报告。

我已经尝试开发一个引用 excelservices.dll 的沙盒解决方案，但由于部分信任问题，SharePoint 不允许执行此解决方案。

我还尝试为 ExcelServices.asmx 生成代理，但 WCF 需要一个配置文件，并且在 O365 中我无法更改 web.config 以添加配置部分 - 手动生成和解析肥皂消息并不是那么有趣。

有什么建议可以解决这个问题还是仍然不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:49:30.997

SharePoint 有一些 Excel 服务的嵌入式功能 - 也许您可以使用 Excel 列表之类的 webpart 或类似的东西？

# java - Java 中的永久集合

> ID：10311161
> 
> 赞同：0
> 
> 时间：2012-04-25T07:26:01.273
> 
> 标签：java, collections, storage, persistent

根据我要求开发小型学生住宿管理系统的任务：

应用程序应该使用面向对象的概念开发，使用 Student 类和 Apartment 类，为这些类实现适当的数据字段和方法。数据可以存储在集合中，即对象、向量等的数组中，或者存储在数据库之外的数据文件中。

到目前为止，我一直在使用 Sets。我不确定这是否正确，但我将 HashSets 添加到我的课程中。例子：

```
public static Set<Apartment> listOfApartments = new HashSet<Apartment>();
// in Apartment Class) 
```

现在我刚刚意识到我实际上需要持久性集合或一些解决方案来实际永久存储数据。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:31:33.293

如果我在哪里，我会使用诸如[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)之类的东西来存储数据，尤其是学生。集合不允许重复数据，因此这可能会导致问题。

关于持久化数据，您应该查看[ObjectOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)以存储您的对象，并查看[ObjectInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html)以将它们加载回您的应用程序。您可以在[此处](http://docs.oracle.com/javase/tutorial/essential/io/objectstreams.html)查看 ObjectStreams 教程。

不过，我建议使用[XStream之类的东西（您可以](http://xstream.codehaus.org/)[在此处](http://xstream.codehaus.org/tutorial.html)查看如何使用它）。这将允许您的应用程序以人类可读的方式存储数据（这有助于调试），并且还允许您的数据被不同的编程语言读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:30:07.043

If `Appartment`is `Serializable`, then `Set<Apartment>`is`Serializable`也不需要任何额外的工作来使用 java.io 类来持久化它

要使类可序列化，您必须：

1.  使其实现接口 java.io.Serializable
2.  添加默认构造函数

就这么容易

# php - 在 magento 中显示特定产品的特定属性值显示错误

> ID：10311162
> 
> 赞同：0
> 
> 时间：2012-04-25T07:26:04.097
> 
> 标签：php, attributes, magento-1.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:22:58.263

如果你想获取属性前端值，那么试试这个

```
nl2br($_product->getResource()->getAttribute('color')->getFrontend()->getValue($_product)) 
```

希望这会帮助你。

# primefaces - Primefaces 条形图导出为 JPEG 或 PNG

> ID：10311164
> 
> 赞同：3
> 
> 时间：2012-04-25T07:26:08.607
> 
> 标签：primefaces

我正在尝试找出条形图到 JPEG/PNG 的导出功能......我在 Prime-faces 演示部分的任何地方都没有找到这个。请让我知道此功能是否在主要面孔图表中可用。

另外，如果我们有任何动画功能，如淡入/淡出等，请告诉我......如果有的话，请分享示例或 URL。

这方面的任何事情都会非常明显！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:39:08.273

Primefaces图表组件是基于[jqPlot图表库](http://www.jqplot.com/)的，虽然这个库没有导出功能，但是借助jquery是可以实现的……（我自己没试过）你可以google一下在 google[中将 jqplot 导出为 png](https://www.google.com/search?q=export%20jqplot%20to%20png&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)，您将看到几篇关于 jqplot 导出的文章/论坛主题

这里有几个

[将绘图输出到 PDF/等。](https://groups.google.com/forum/?fromgroups#!topic/jqplot-users/mlif3cBmc8A)

[将 jqplot 导出为 PNG](http://westside-consulting.blogspot.com/2011/05/some-users-of-jqplot-have-expressed.html) <-- 里面有几个链接

[导出-jqplot-to-png](https://github.com/lsiden/export-jqplot-to-png)

所以基本上你需要添加commandButton，它将调用一些将生成图像的js代码......

我认为这是可能的，但不知道这有多容易......

**关于动画**，再次，jqplot 确实有一些动画[看这里](http://www.jqplot.com/deploy/dist/examples/barLineAnimated.html) 我不知道 primefaces 是否得到它......

但是使用带有primefaces的原始jqPlot图表库并不难......

* * *

**更新**

刚刚注意到 jqPlot 确实有导出到图像选项...[看这里](http://www.jqplot.com/deploy/dist/examples/barLineAnimated.html) ，这样您就可以要求 primefaces 团队升级他们的 jqPlot 版本...或者直接在您的项目中使用 jqPlot 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:44:15.047

Primefaces 图表组件没有内置的导出功能。有一个[JFreeChart 集成示例](http://www.primefaces.org/showcase/ui/interactiveCharts.jsf)可以生成 png 格式的图表，可以通过右键单击下载。

从理论上讲，淡入/淡出功能可以用 javascript/jquery 实现。

# objective-c - 覆盖setter方法并获得“xxx的本地声明隐藏实例变量”

> ID：10311169
> 
> 赞同：1
> 
> 时间：2012-04-25T07:26:40.067
> 
> 标签：objective-c, ios, xcode, overriding, setter

我有一个整数变量，例如 timeSignature，在 .h 文件中声明它，并合成了一对 setter/getter 方法：

在.h中：

```
@interface Metronome : NSObject {
    int timeSignature;
}
@property (nonatomic) int timeSignature; 
```

以 .m 为单位：

```
@synthesize timeSignature; 
```

我希望覆盖 setter 方法：当用户为其设置新值时，它会执行其他操作以及更改为新值：

```
- (void) setTimeSignature:(int)timeSignature {
    self.timeSignature = timeSignature; //hides instance variable warning at this line
    [self doesSomethingElse];
} 
```

这就是问题所在，局部变量和实例变量具有相同的名称。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T07:28:56.400

重命名参数变量名称：

```
- (void) setTimeSignature:(int)newTimeSignature { 
    timeSignature = newTimeSignature; //hides instance variable warning at this line 
    [self doesSomethingElse]; 
} 
```

另外，**不要使用 setter 中的属性**，这将创建一个无限循环！self.timeSignature = 将调用 setTimeSignature！

这是人们使用下划线名称 (_timeSignature) 作为属性的支持 ivar 的原因之一。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T07:28:35.500

命名您的 ivar`_timeSignature`并制作`@synthesize timeSignature = _timeSignature;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T07:28:19.020

只需重命名方法参数即可解决问题。当您再次实际调用 setter 方法时，您的代码也会产生无限递归 - 您还需要删除属性调用：

```
- (void) setTimeSignature:(int)timeSignature_ {
    timeSignature = timeSignature_; //hides instance variable warning at this line
    [self doesSomethingElse];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T07:55:18.727

重命名参数。我使用`aTimeSignature`或`newTimeSignature`。

此外，这是一个更大的问题：

```
self.timeSignature = someVar; 
```

只是语法糖

```
[self setTimeSignature: somevar]; 
```

点符号会误导您认为该属性与 setter 不同。这不是真的，属性*是*setter 和 getter。你真正拥有的是：

```
- (void) setTimeSignature:(int)timeSignature {
    [self setTimeSignature: timeSignature]; //hides instance variable warning at this line
    [self doesSomethingElse];
} 
```

更改符号后，您应该能够看到明显的困难。

如果您是 Objective-C 的新手，那么在您完全确信自己完全理解它的作用之前，您应该真正避免使用点符号（这是 Big Nerd Ranch iOS 编程指南的建议）。

# jquery-ui - Jquery UI日期选择器日期范围6个月限制

> ID：10311178
> 
> 赞同：3
> 
> 时间：2012-04-25T07:27:51.740
> 
> 标签：jquery-ui, datepicker

我正在使用 jQuery ui 日期选择器（日期范围）我想将其限制为 6 个月

```
var dates = $("#availability_date_from, #availability_date_to").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        minDate:'0',

        yearRange:'c-18:c',

        onSelect: function( selectedDate ) {

            var option = this.id == "availability_date_from" ? "minDate" : "maxDate",

                instance = $( this ).data( "datepicker" ),

                date = $.datepicker.parseDate(
                    instance.settings.dateFormat ||
                    $.datepicker._defaults.dateFormat,
                    selectedDate, instance.settings );
            dates.not( this ).datepicker( "option", option, date );

            if(this.id == "availability_date_to"){

                commonJSComplete(this.value,'availability_date_to');
                $('#responsecontainer').load('profilemeter.php');
            }
            else if(this.id == "availability_date_from"){
                commonJSComplete(this.value,'availability_date_from');
            }

        }

    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T07:57:13.687

尝试：

```
 var dates = $("#availability_date_from, #availability_date_to").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        minDate:'0',
        maxDate: '+6m',   //add this
..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T10:29:04.790

您可以从所选日期获取月/日/年，然后相应地更改值。我需要一个条件，即用户只需要从日期选择器中选择最多 6 个月。So when to_date is selected then I will set minimun from date to a value that is 6 months below the selected to_date. 试试这个，让我知道:)

```
$( "#txtFromDate" ).datepicker({
    dateFormat: 'yy-mm-dd',
    changeMonth: true,
    changeYear: true,
    onSelect: function( selectedDate ) {
        $( "#txtToDate" ).datepicker( "option", "minDate", selectedDate );
    }
});
$( "#txtToDate" ).datepicker({
    dateFormat: 'yy-mm-dd',
    changeMonth: true,
    changeYear: true,
    onSelect: function( selectedDate , instance) {

        var minDate = $.datepicker.parseDate(instance.settings.dateFormat, selectedDate, instance.settings)
        minDate.setMonth(minDate.getMonth() - 6);
        $( "#txtFromDate" ).datepicker( "option", "minDate", minDate );
    }
}); 
```

# mysql - 条件 MySQL 按两列（同等重要）排序

> ID：10311179
> 
> 赞同：1
> 
> 时间：2012-04-25T07:27:54.340
> 
> 标签：mysql, sorting, conditional

我有一个包含很多列的产品列表，但对我的问题最重要的 3 个是这些（带有一些随机数据）：

```
|--------------------------------------|
| title     | category_id | date       |
| ----------|-------------|------------|
|  Product1 |           1 | 2012-04-18 |
|  Product2 |           1 | 0000-00-00 |
|  Product3 |          17 | 0000-00-00 |
|  Product4 |          17 | 2012-04-10 |
|  Product5 |          17 | 2012-04-20 |
|  Product6 |           1 | 0000-00-00 |
|  Product7 |           2 | 2012-04-20 |
|  Product8 |           2 | 0000-00-00 |
|  Product9 |          17 | 2012-04-16 |
| Product10 |          22 | 2011-11-26 |
| Product11 |          22 | 2011-12-25 |
| Product12 |          30 | 2012-04-01 |
| Product13 |           2 | 2011-12-31 |
| Product14 |          30 | 2010-05-06 |
|--------------------------------------| 
```

相同的产品`category_id`应该一个接一个地列出（此时甚至可以通过“ORDER BY category_id”来解决），但我也必须注意该`date`列：`category_id`类别中的和产品必须是按`date`降序排序（`category_id`最新产品在顶部等等），所以理想情况下结果集应该是这样的（在类别“组”之间添加换行符只是为了更透明）：

```
|--------------------------------------|
| title     | category_id | date       |
| ----------|-------------|------------|
|  Product5 |          17 | 2012-04-20 |
|  Product9 |          17 | 2012-04-16 |
|  Product4 |          17 | 2012-04-10 |
|  Product3 |          17 | 0000-00-00 |

|  Product7 |           2 | 2012-04-20 |
| Product13 |           2 | 2011-12-31 |
|  Product8 |           2 | 0000-00-00 |

|  Product1 |           1 | 2012-04-18 |
|  Product2 |           1 | 0000-00-00 |
|  Product6 |           1 | 0000-00-00 |

| Product12 |          30 | 2012-04-01 |
| Product14 |          30 | 2010-05-06 |

| Product11 |          22 | 2011-12-25 |
| Product10 |          22 | 2011-11-26 |
|--------------------------------------| 
```

是否有可能仅通过一个查询获得此结果集，什么是可行的解决方案？

在此先感谢，马塞尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:57:11.583

您需要在子查询中查找每个类别的最新日期，将此子查询加入您的表并按 3 个字段排序：

```
SELECT p.* FROM products p
JOIN
( SELECT category_id, MAX(date) as category_date FROM products
  GROUP BY category_id ) pg
ON p.category_id = pg.category_id
ORDER BY pg.category_date DESC, p.category_id, p.date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:31:45.470

因此，您首先要按日期排序，该日期是具有相同 id 的产品组中的最大日期，然后您要对组内的日期进行排序。

用这个：

```
SELECT title, category_id, date
FROM table_name t
ORDER BY
    (SELECT Max(Date)
     FROM table_name
     WHERE title = t.title
     GROUP BY category_id) DESC,
    date DESC 
```

而不是`title`您可以`product_id`在内部 sql 查询中使用。

# php - 用自己的公式替换 iframe 公式

> ID：10311181
> 
> 赞同：1
> 
> 时间：2012-04-25T07:28:05.420
> 
> 标签：php, html, forms, iframe

我的问题：我有一个来自我的合作伙伴的 iframe

```
<iframe src="http://foo.com/aff_c?offer_id=28&aff_id=1020&file_id=164&url_id=32"></iframe> 
```

这是我页面上的公式，以便访问者可以发送数据。现在我想创建自己的公式（以更好地控制发送的数据），然后将数据发送给我的合作伙伴。起初，我尝试将 iframe 中的 URL 添加到表单的“操作”属性并通过 POST 方法发送，但后来我发现原始公式并不完全位于 iframe 的 URL 上，而是在另一个 URL 上，重定向的地方只是加载 iframe 后，它没有工作。重定向的 URL 类似，但参数差异不大，如下所示：

```
http://blabla.foo2.com/bla?a_aid=1020&a_bid=164&utm_source=affil&offer_id=28 
```

因此，我使用第二个 URL 更改了表单的“操作”属性，现在我正在那里发送数据。它现在可以工作，数据已发送，但存在问题。另一方（我的合作伙伴）无法识别数据是来自我还是来自其他合作伙伴。显然第二个 URL (url_id=32) 中缺少参数，但我不知道如何发送它。我应该尝试 php cUrl 库，但我不确定它在这里是否有帮助。

哦……我不想让我的搭档知道我没有使用他的 iframe，所以我不能向他寻求帮助 :)

php有什么办法，怎么解决？谢谢你的任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:48:22.863

似乎跟踪是在第一个脚本/url 中完成的，然后数据被发送到第二个 url。也许您可以使用第一个 url 和 cUrl 触发跟踪，然后将所有内容发送到第二个 url。

要使用 curl 获取最后一个 url，请尝试：

```
$lastUrl = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
echo $lastUrl; 
```

另见： http: [//php.net/manual/de/function.curl-getinfo.php](http://php.net/manual/de/function.curl-getinfo.php)

# python - 在 Python 中读取二进制文件（.chn）

> ID：10311183
> 
> 赞同：-1
> 
> 时间：2012-04-25T07:28:17.123
> 
> 标签：python, file-io, binary

在 python 中，如何读取二进制文件（这里我需要读取 .chn 文件）并以二进制格式显示结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:00:49.727

尝试这个：

```
 with open('myfile.chn') as f:
        data=f.read()
        data=[bin(ord(x)).strip('0b') for x in data]
        print ''.join(data) 
```

如果您只想要二进制数据，它将在列表中。

```
 with open('myfile.chn') as f:
        data=f.read()
        data=[bin(ord(x)).strip('0b') for x in data]
        print data 
```

现在在数据中，您将拥有二进制数列表。你可以把它转换成十六进制数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T07:44:25.470

假设值由空格分隔：

```
with open('myfile.chn', 'rb') as f:
    data = []
    for line in f:  # a file supports direct iteration
        data.extend(hex(int(x, 2)) for x in line.split()) 
```

在 Python 中最好使用`open()`over `file()`，文档明确指出：

> 打开文件时，最好使用 open() 而不是直接调用文件构造函数。

`rb`mode 将以二进制模式打开文件。

参考：
[http ://docs.python.org/library/functions.html#open](http://docs.python.org/library/functions.html#open)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:32:17.363

```
with file('myfile.chn') as f:
  data = f.read()   # read all strings at once and return as a list of strings
  data = [hex(int(x, 2)) for x in data]  # convert to a list of hex strings (by interim getting the decimal value) 
```

# c++ - 了解 fwrite() 的缓冲行为

> ID：10311186
> 
> 赞同：8
> 
> 时间：2012-04-25T07:28:27.927
> 
> 标签：c++, c, linux, fwrite

我正在使用函数调用`fwrite()`将数据写入 Linux 上的管道。

早些时候，`fwrite()`被反复调用小块数据（平均 20 个字节）并且缓冲留给`fwrite()`. 对进程的 strace 显示一次写入了 4096 字节的数据。

原来，这个编写过程是我程序的瓶颈。所以我决定将代码中的数据缓冲成 64KB 的块，然后使用`fwrite()`. 我曾经`setvbuf()`将 FILE* 指针设置为“无缓冲”。

性能提升并不像我预期的那么显着。

更重要的是，`strace`输出显示数据仍一次写入 4096 字节。有人可以向我解释这种行为吗？如果我`fwrite()`用 64KB 的数据调用，为什么一次只写入 4096 字节？

`fwrite()`有没有使用 FILE* 指针将数据写入管道的替代方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T07:57:58.623

4096 来自作为管道基础的 Linux 机器。它发生在两个地方。一是管道的容量。在旧版本的 Linux 上，容量是一个系统页面，在 32 位 i386 机器上是 4096 字节。（在更现代的 Linux 版本上，容量为 64K。）

您将遇到 4096 字节问题的另一个地方是定义的常量`PIPE_BUF`，即保证以原子方式处理的字节数。在 Linux 上，这是 4096 字节。此限制的含义取决于您是否将管道设置为阻塞或非阻塞。`man -S7 pipe`为所有血淋淋的细节做一个。

如果您尝试高速交换大量数据，您可能需要重新考虑使用管道。您在 Linux 机器上，因此可以选择共享内存。您可以使用管道作为信号机制发送相对少量的数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T07:33:19.323

如果你想改变缓冲行为，你必须在`fopen`（或任何 I/O 之前，对于标准文件句柄`stdin`, `stdout`, `stderr`）之后立即进行。您也不想禁用缓冲并尝试自己管理缓冲区；相反，请指定您的 64K 缓冲区，`setvbuf`以便它可以正确使用。

如果您真的想手动管理缓冲，请不要使用`stdio`; 使用较低级别`open`的`write`、 和`close`调用。

# decompiling - 反编译是如何工作的？

> ID：10311189
> 
> 赞同：25
> 
> 时间：2012-04-25T07:28:29.020
> 
> 标签：decompiling

我之前曾多次听说过“反编译”这个词，我开始对它的工作原理非常好奇。

我对它的工作原理有一个非常大致的了解；对应用程序进行逆向工程以查看它使用了哪些功能，但除此之外我不知道太多。

我也听说过“*反汇编器*”这个词，反汇编器和反编译器有什么区别？

**所以总结一下我的问题：**反编译过程到底涉及什么？通常是怎么做的？一个过程有多复杂/简单？它可以产生确切的代码吗？反编译器和反汇编器有什么区别？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-25T07:43:38.967

[Hex-Rays Decompiler](http://www.hex-rays.com/products/decompiler/compare_vs_disassembly.shtml)的作者 Ilfak Guilfanov在某个骗局中就他的反编译器的内部工作发表了演讲，这里是[白皮书](http://www.hex-rays.com/products/ida/support/ppt/decompilers_and_beyond_white_paper.pdf)和[演示文稿](http://www.hex-rays.com/products/ida/support/ppt/decompilers_and_beyond.ppt)。这很好地概述了构建反编译器的所有困难以及如何使其全部工作。

除此之外，还有一些相当古老的论文，例如[Cristina Cifuentes 的经典博士论文](http://itee.uq.edu.au/~cristina/dcc.html#thesis)。

至于复杂性，所有“反编译”的东西都取决于二进制文件的语言和运行时。例如，反编译 .NET 和 Java 被认为是“完成”，因为有可用的免费反编译器，具有非常高的成功率（它们产生原始源）。但这是由这些运行时使用的虚拟机的特殊性质引起的。

至于真正的编译语言，如 C、C++、Obj-C、Delphi、Pascal，......任务变得更加复杂。详细阅读上述论文。

> 反汇编器和反编译器有什么区别？

当您有一个二进制程序（可执行文件、DLL 库等）时，它由处理器指令组成。这些指令的语言称为*汇编*（或汇编程序）。在二进制文件中，这些指令是二进制编码的，因此处理器可以直接执行它们。*反汇编*程序获取此二进制代码并将其转换为文本表示形式。这种翻译通常是一对一的，这意味着一条指令显示为一行文本。这个任务很复杂，但很简单，程序只需要知道所有不同的指令以及它们在二进制文件中的表示方式。

另一方面，*反编译*器的任务要困难得多。它采用二进制代码或反汇编程序输出（基本相同，因为它是一对一的）并生成高级代码。让我给你看一个例子。假设我们有这个 C 函数：

```
int twotimes(int a) {
    return a * 2;
} 
```

当你编译它时，编译器首先为该函数生成一个*汇编文件*，它可能看起来像这样：

```
_twotimes:
    SHL EAX, 1
    RET 
```

（第一行只是一个标签而不是真正的指令，`SHL`执行左移操作，快速乘以 2，`RET`表示函数完成）。在结果二进制文件中，它看起来像这样：

```
08 6A CF 45 37 1A 
```

（我编的，不是真正的二进制指令）。现在您知道了，*反汇编*程序将您从二进制形式带到汇编形式。*反编译器*将您从汇编形式带到 C 代码（或其他一些高级语言）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T07:32:07.323

反编译本质上是编译的逆过程。也就是说 - 获取目标代码（二进制）并尝试从中重新创建源代码。

反编译取决于留在目标代码中的人工制品，这些人工制品可用于确定源代码的结构。

使用 C/C++ 并没有太多可以帮助反编译过程的东西，因此非常困难。然而，使用 Java 和 C# 以及其他以虚拟机为目标的语言，反编译会更容易，因为该语言在目标代码中留下了更多提示。

# python-3.x - SenseiDB Python 3 的驱动程序是什么？

> ID：10311195
> 
> 赞同：0
> 
> 时间：2012-04-25T07:28:44.563
> 
> 标签：python-3.x

SenseiDB 有 Python 驱动程序，但没有说明支持哪个版本的 Python。我想知道他们是否支持版本3？

[http://senseidb.github.com/sensei/client-python.html](http://senseidb.github.com/sensei/client-python.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:08:11.050

他们的下载链接坏了，但我在这里挖了代码：

[https://github.com/linkedin/sensei/blob/master/clients/python/sensei/sensei_client_lib.py](https://github.com/linkedin/sensei/blob/master/clients/python/sensei/sensei_client_lib.py)

该`import urllib2`行表示它必须是 Python 2 代码。如果你有时间让它与 Python 3 兼容，他们可能会接受它作为贡献。

# jquery - Jquery css函数不使用地图中的所有参数

> ID：10311200
> 
> 赞同：3
> 
> 时间：2012-04-25T07:28:53.357
> 
> 标签：jquery, css

在我的一个 webApp 方法中，我动态创建了 html 元素并使用以下代码添加了一个动态创建的 css 对象：

```
 tag = typeof(tag) !== 'undefined' ? tag : "div";
    end = typeof(end) !== 'undefined' ? end : true;
    var html = '<'+tag+' value="'+this.id+'" class="element '+this.type+'"'+
                'style="position:absolute;z-index= '+this.id+'"'
    end ? html += "></"+tag+">" : html += "/>";
    var css = {},element = this;
    $.each(this.properties(),function(){
        var hash=this.indexOf("Color") !== -1?'#':'';
        var property = typeof(element[this])==='number'?element[this]*Nx.ratio:element[this];
        css[this]=hash+property;
    })
    console.log(css);
    html = $(html).css(css);
    $('.page[value='+page+']').append(html); 
```

这是从我的 console.log 创建并传递给 css() 函数的 css 对象示例：

```
Object
backgroundColor: "#ff0000"
borderColor: "#ffffff"
borderStyle: "solid"
borderWidth: "0"
height: "56.865"
left: "0"
top: "274.29"
width: "893.115"
__proto__: Object 
```

现在的问题是输出元素没有顶部、左侧、高度和宽度属性，例如：

```
<div value="12" class="element rectangle" style="position: absolute; background-color: rgb(255, 0, 0); left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-top-color: rgb(255, 255, 255); border-right-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); border-left-color: rgb(255, 255, 255); border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; "></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:53:21.957

您的代码看起来有些问题......无法真正说出错误在哪里，但您在`;`这里错过了：

```
...'style="position:absolute;z-index= '+this.id+'"'; <-- there! 
```

还有这个：

```
tag = typeof(tag) !== 'undefined' ? tag : "div" 
```

大多数时候也可以这样写：

```
 tag = tag || 'div' 
```

也许你的问题就在这里，有很多`this`事情正在发生......

```
$.each(this.properties(), function () {
    var hash = this.indexOf("Color") !== -1 ? '#' : '';
    var property = typeof(element[this]) === 'number' ? element[this] * Nx.ratio : element[this];
    css[this] = hash + property;
}) 
```

是什么`this.properties()`。和里面`this`一样吗？似乎是那里的错误来源......`this``each(...)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:11:41.330

这些 CSS 属性不会应用于您的元素，因为您没有正确指定它们。`left`、`top`和`width`的值`height`必须是：

*   一个数字，例如`0`或`274.29`，
*   或一个后跟单位后缀的字符串，例如`"0px"`or `"274.29px"`。

您的代码使用没有单位后缀的字符串，因此这些值被视为无效并且属性被忽略。

# zend-framework - Zend 框架重定向和路由，不知何故不起作用

> ID：10311204
> 
> 赞同：0
> 
> 时间：2012-04-25T07:29:12.827
> 
> 标签：zend-framework, redirect, routing

我一直在努力解决路由问题，因此构建了一个小应用程序来摆弄，但我设法偶然发现了一个问题。

整个测试的目标是隐藏 url 'hostname/content/index/add' 并将其转换为像 'hostname/wms/content/add' 这样的用户更容易理解的 url。

但是现在由于某些奇怪的原因，我无法使用 $this->url() 方法进行重定向。但不知何故，像 somelink 这样的正常链接可以工作。

我在 application.ini 中构建了一些路由来测试它是如何工作的。没什么好看的...

```
resources.router.routes.contentroute.route = "/wms/content"
resources.router.routes.contentroute.defaults.module = content
resources.router.routes.contentroute.defaults.controller = index
resources.router.routes.contentroute.defaults.action = index

resources.router.routes.vacaturesroute.route = "/wms/vacatures"
resources.router.routes.vacaturesroute.defaults.module = vacatures
resources.router.routes.vacaturesroute.defaults.controller = index
resources.router.routes.vacaturesroute.defaults.action = index 
```

所以当我输入hostname/wms/content 时，我会被重定向到内容模块的IndexController，它是IndexAction。这适用于我的视图中指向这样的内容模块的所有链接

```
<a href='wms/content/'> link </a> 
```

但是，它不适用于 3 个链接，这些链接实际上重定向到该页面主机名/wms/内容上的 IndexController 的特定操作。

```
<a href="<?php echo $this->url(array('controller'=>'index','action'=>'add'));?>">Add new content</a> 
```

我没有真正重定向到 IndexController 中的添加操作，而是重定向到主机名/wms/内容，这就是我来自的页面。

任何人都知道为什么会发生这种情况以及可能的解决方法？还是我完全以错误的方式接近这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:23:06.147

首先，您的路线是静态路线。您应该将它们替换为：

```
resources.router.routes.contentroute.route = "/wms/content/:action/*"
resources.router.routes.contentroute.defaults.module = content
resources.router.routes.contentroute.defaults.controller = index
resources.router.routes.contentroute.defaults.action = index 
```

然后，您应该指定路由的名称并在 reset 参数中传递 true：

```
$this->url(
  array('module'=>'content', 'controller'=>'index','action'=>'add'), 
  'contentroute', 
  true
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:36:12.700

试试这个

```
<a href="<?php echo $this->url(array('controller'=>'index','action'=>'add','module'=>'xyz'),null,true);?>">Add new content</a> 
```

将 xyz 替换为您的模块名称。

# php - 无法查看附件

> ID：10311205
> 
> 赞同：0
> 
> 时间：2012-04-25T07:29:17.480
> 
> 标签：php

我正在通过 php mail() 发送电子邮件。在那，我能够接收简单的（文本）邮件。当我附加文件时，我收到了电子邮件中的附件，但是当我尝试查看它时，文件总是空白，即使它是 PDF 格式！！！。请帮帮我。我的发送邮件页面的代码如下：

```
include_once("db_connect.php");
session_start();
error_reporting(16);
require_once('class.phpmailer.php');//Getting values from Session
$tot = $_SESSION['$tot'];
$from = $_SESSION['from'];
$message = $_SESSION['message'];
$subject = $_SESSION['subject'];
$full_nm = $_SESSION['firstnm']." ".$_SESSION['lastnm'];
$temp_passwd = $_SESSION['e_pwd'];
$email_use = $_SESSION['email'];

function send_mail($to, $message, $subject, $from, $temp_passwd, $full_nm, $email_use)
{
    $message_org      = nl2br($message);
    $mail             = new PHPMailer();
    $body             = $message_org;
    $mail->IsSMTP(); 
    $mail->SMTPAuth   = true;
    $mail->SMTPSecure = "ssl";
    $mail->AddAttachment("Uploads/file.pdf");
    $mail->ContentType = "mutlipart/alternative";
    $mail->Host       = "smtp.mail.yahoo.com";
    $mail->Port       = 465;
    $mail->Username   = $from;
    $mail->Password   = $temp_passwd;
    $mail->SetFrom($from, $full_nm);
    $mail->Subject    = $subject;
    $mail->MsgHTML($body);
    $address = $to;
    $mail->AddAddress($address, $address);

    if(!$mail->Send())
    {
        $err_send = "Mailer Error: " . $mail->ErrorInfo;
    }
        else
    {
        $err_send = "";
    }
}
foreach($tot as $to_trim)
{
    $to = trim($to_trim);
    send_mail($to, $message, $subject, $from, $temp_passwd, $full_nm, $email_use);
    echo $err_send;
}

The function AddAttachment in class.phpmailer.php is as follows:

public function AddAttachment($path, $name = '', $encoding = 'base64', $type = 'application/octet-stream') {
try {
  if ( !@is_file($path) ) {
    throw new phpmailerException($this->Lang('file_access') . $path, self::STOP_CONTINUE);
  }
  $filename = basename($path);
  if ( $name == '' ) {
    $name = $filename;
  }

  $this->attachment[] = array(
    0 => $path,
    1 => $filename,
    2 => $name,
    3 => $encoding,
    4 => $type,
    5 => false,  // isStringAttachment
    6 => 'attachment',
    7 => 0
  );

} catch (phpmailerException $e) {
  $this->SetError($e->getMessage());
  if ($this->exceptions) {
    throw $e;
  }
  echo $e->getMessage()."\n";
  if ( $e->getCode() == self::STOP_CRITICAL ) {
    return false;
  }
}
return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:32:30.960

当您执行 $mail->AddAttachment("Uploads/file.pdf"); 如果您将添加附件放在“如果文件存在添加附件”子句中，文件不会被附加吗？我在想“Uploads/file.pdf”不是足够的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:43:43.833

根据[此类的文档，](http://phpmailer.worxware.com/index.php?pg=tutorial)您应该能够为该文件指定相对路径。

尝试在该行之前使用 PHP 测试来查看文件是否实际存在：

```
// Change this
$mail->AddAttachment("Uploads/file.pdf");

// To this...
$attachment = "Uploads/file.pdf";
$mail->AddAttachment($attachment);

// And then to this
$attachment = "Uploads/file.pdf";
if(!file_exists($attachment) && !file_exists(getcwd().'/'.$attachment)
{
    die(sprintf("attachment: %s does not exist", $attachment));
}
$mail->AddAttachment($attachment); 
```

我包括一个中间步骤只是为了向您展示我的想法。

我没有测试过这个`if`语句，但想法是确保`$attachment`变量是有效的绝对（第一部分）或相对（第二部分）路径。

# jquery - Jquery 动态创建可拖动的 div

> ID：10311206
> 
> 赞同：3
> 
> 时间：2012-04-25T07:29:21.180
> 
> 标签：jquery, html, jquery-ui-draggable, dynamically-generated

在我的项目中，我每次单击按钮时都会使用 jquery 动态创建 div。现在我希望这些新的 div 具有可拖动和可调整大小的属性。这是我到目前为止所做的：

```
$("#button1").click(function(){
     $("<div/>", {
       "id": "test",
        text: "",
      }).appendTo("body");
     $( "#test" ).resizable();
     $( "#test" ).draggable();
  }); 
```

这段代码以某种方式工作，问题是只有创建的第一个 div 是可调整大小和可拖动的。是否可以放置另一个按钮来删除这些新创建的 div？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T07:31:17.313

`id`必须是独一无二的！您创建多个具有相同`test`id => **INVALID HTML的 div**

另一件事，你不需要查询 DOM，你可以使用你得到的引用来创建`<div>` `resizable`和`draggable`：

```
$("#button1").click(function(){
     $("<div/>", {
       "class": "test",
        text: "",
      }).resizable().draggable()
      .appendTo("body");
  }); 
```

如果您出于某种原因想使用 id ：

```
var counter = 1;

$("#button1").click(function(){
     $("<div/>", {
       "class": "test" + (counter++),
        text: "",
      }).resizable().draggable()
      .appendTo("body");
  }); 
```

`#id`[文档站点](http://api.jquery.com/id-selector/)中的选择器注释：

> 每个 id 值只能在文档中使用一次。如果为多个元素分配了相同的 ID，则使用该 ID 的查询将仅选择 DOM 中第一个匹配的元素。但是，不应依赖此行为；具有多个使用相同 ID 的元素的文档无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:33:13.407

您应该为每次点击提供不同的 ID，或者使用具有相似名称的类。

```
$("#button1").click(function(){
     $("<div/>", {
       "class": "test",
        text: "",
      }).appendTo("body");
     $( ".test" ).resizable();
     $( ".test" ).draggable();
  }); 
```

# gtk - 一次添加大量文本视图时的 gtkd 性能问题

> ID：10311210
> 
> 赞同：1
> 
> 时间：2012-04-25T07:29:42.887
> 
> 标签：gtk, d, gtkd

这是一个最小的例子来说明这个问题。单击按钮时，应添加 500 个 TextView 对象，每个对象都包含一些文本。实际发生的情况是有一个短暂的延迟，添加了 500 个空的 TextView，有更长的延迟，然后它们都立即填充了文本，并且布局本身的大小也正确。下面的代码：

```
import gtk.Button;
import gtk.Main;
import gtk.MainWindow;
import gtk.Notebook;
import gtk.ScrolledWindow;
import gtk.Statusbar;
import gtk.TextView;
import gtk.TextBuffer;
import gtk.UIManager;
import gtk.VBox;
import gtk.Window;

import std.stdio;

class UI : MainWindow
{
  Notebook notebook;

  this() {
    super("Test");
    setDefaultSize(200, 100);
    VBox box = new VBox(false, 2);
    notebook = new Notebook();
    Button button = new Button("add lines");
    button.addOnClicked(&addLines);
    box.packStart(notebook, true, true, 0);
    box.packStart(button, false, false, 2);
    add(box);
    showAll();
  }

  void addLines(Button b) {
    VBox box = new VBox(false, 2);
    for (int i = 0; i < 500; i++) {
      auto tv = new TextView();
      tv.getBuffer().setText("line");
      box.packStart(tv, false, false, 1);
    }
    ScrolledWindow swin = new ScrolledWindow(box);
    notebook.add(swin);
    showAll();
  }
}

void main(string[] args)
{
  Main.init(args);
  auto ui = new UI();
  Main.run();
} 
```

* * *

**编辑**：[这个线程](http://mail.gnome.org/archives/gtk-list/2007-December/msg00000.html)表明创建一堆文本视图本质上是昂贵的，我应该使用树视图重写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:54:59.947

GTK 是事件驱动的，并使用消息泵。如果在回调中您执行了一个冗长的操作，那么您永远不会给消息泵处理待处理消息的机会。您可以将回调中的代码替换为 2 秒的睡眠，效果是一样的：在该时间片内 UI 将被冻结。

如果您无法拆分您的操作，请使用[gtk_events_pending](http://developer.gnome.org/gtk/stable/gtk-General.html#gtk-events-pending)文档中描述的 d 等效项：

```
/* computation going on */
...
  while (gtk_events_pending ())
      gtk_main_iteration ();
...
/* computation continued */ 
```

在每个循环迭代之间调用，它会给 GTK 一些时间来处理通过添加小部件生成的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:25:50.553

经过更多的谷歌搜索和试验，事实证明 GtkTextViews 实例化本质上是昂贵的，我不应该尝试创建这么多的。根据[此线程](http://mail.gnome.org/archives/gtk-list/2007-December/msg00000.html)中的建议，我将修改我的代码以改用 GtkTreeView。

# sql - 多部分标识符“owt.cardcode”或“t1.cardcode”无法绑定

> ID：10311211
> 
> 赞同：1
> 
> 时间：2012-04-25T07:30:01.343
> 
> 标签：sql, sql-server

如果我在第二个查询中使用 T3.CardCode = 'AC0109' 来获取内向值但如果我使用外向查询引用作为 (T3.CardCode = owt.CardCode) 或 (T3.CardCode = t1.CardCode) 则此查询工作正常上升错误

多部分标识符“owt.cardcode”或“t1.cardcode”无法绑定请帮我解决这个问题

```
SELECT TOP (100) PERCENT 
       owt.CardCode, 
       owt.CardName, 
       owt.DocDate, 
       owt.owtsector,
       owt.owtzone, 
       owt.Dscription, 
       owt.owtrate, 
       owt.owtqty, 
       owt.amount,
       ISNULL(inw.inwqty,0) AS Expr1, 
       ISNULL(inw.inwamount, 0) AS Expr2
FROM (SELECT T1.DocDate, 
             T1.CardCode, 
             T1.CardName, 
             T2.ItemCode, 
             T2.Dscription, 
             T1.U_STTYPE, 
             T1.U_SECTOR AS owtsector, 
             T1.U_ZONE AS owtzone, 
             SUM(T2.LineTotal) AS amount, 
             SUM(T2.Quantity) AS owtqty, 
             T2.CodeBars, 
             T2.Price AS owtrate
      FROM dbo.OWTR AS T1 
          INNER JOIN dbo.WTR1 AS T2 ON T1.DocEntry = T2.DocEntry
      WHERE (T1.DocDate = CONVERT(DATETIME, '2012-03-16 00:00:00', 102)) 
        AND (T1.CardCode = N'ac0109') 
        AND (T1.U_STTYPE = N'OUTWARD') 
        AND (T1.U_SECTOR NOT LIKE 'wr%')
      GROUP BY T1.DocDate, 
               T1.CardCode, 
               T1.CardName, 
               T2.ItemCode,
               T2.Dscription, 
               T1.U_STTYPE,  
               T2.Price,
               T1.U_SECTOR, 
               T1.U_ZONE, T2.CodeBars) AS owt 
LEFT OUTER JOIN (SELECT T3.DocDate, 
                       T3.CardCode, 
                       T3.CardName, 
                       T3.U_STTYPE, 
                       T4.ItemCode, 
                       T4.Dscription, 
                       SUM(T4.Quantity) AS inwqty, 
                       SUM(T4.LineTotal) AS inwamount
                FROM dbo.OWTR AS T3 
                   INNER JOIN dbo.WTR1 AS T4 ON T3.DocEntry = T4.DocEntry
                WHERE (T3.DocDate = CONVERT(DATETIME, '2012-03-16 00:00:00', 102)) 
                  AND (T3.CardCode = ***owt.CardCode***) 
                  AND (T3.U_STTYPE = N' inward ') 
                  AND (T3.U_SECTOR NOT LIKE ' wr % ')
                GROUP BY T3.DocDate, 
                         T3.CardCode, 
                         T3.CardName, 
                         T4.ItemCode, 
                         T4.Dscription, 
                         T3.U_STTYPE) AS inw 
  ON owt.CardCode = inw.CardCode 
 AND owt.DocDate = inw.DocDate
 AND owt.ItemCode = inw.ItemCode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:46:52.840

错误在此行的第二个子查询（inw）中：

```
AND     (T3.CardCode = owt.CardCode) 
```

我认为应该是：

```
AND     (T3.CardCode = T4.CardCode) 
```

**编辑**

进一步考虑，我认为你根本不需要这个谓词，因为它已经包含在连接条件中。

# java - 找出依赖发行者

> ID：10311218
> 
> 赞同：2
> 
> 时间：2012-04-25T07:30:26.560
> 
> 标签：java, maven, dependencies

我在我的网络项目中使用以下库：

*   slf4j-log4j12-1.6.4.jar
*   slf4j-api-1.6.0.jar
*   log4j-1.2.16.jar
*   **jcl-over-slf4j-1.6.0.jar**

但是当我组装战争时，一个额外的*commons-logging-1.0.4.jar*库被复制到 WEB-INF/lib。我认为这是因为我的一个库依赖于 commons-logging-1.0.4.jar。我想排除 commons-logging-1.0.4.jar （由于 jcl-over-slf4j-1.6.0.jar 已经在这里）使用

```
<dependency>
    <groupId></groupId>
    <artifactId></artifactId>
    <version></version>
    <exclusions>
           ...
    </exclusions>
</dependency> 
```

为此，我需要在我的 pom 中找到依赖于 commons-logging 的库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T07:32:48.677

`mvn dependency:tree`您可以使用命令找到依赖关系树。

从树中，您可以排除工件。

示例输出：

```
[INFO] |  +- org.seleniumhq.selenium:selenium-htmlunit-driver:jar:2.20.0:test
[INFO] |  |  +- org.seleniumhq.selenium:selenium-api:jar:2.20.0:test
[INFO] |  |  +- net.sourceforge.htmlunit:htmlunit:jar:2.9:test
[INFO] |  |  |  +- xalan:xalan:jar:2.7.1:test
[INFO] |  |  |  |  \- xalan:serializer:jar:2.7.1:test
[INFO] |  |  |  +- commons-collections:commons-collections:jar:3.2.1:test
[INFO] |  |  |  +- commons-lang:commons-lang:jar:2.6:test
[INFO] |  |  |  +- org.apache.httpcomponents:httpmime:jar:4.1.2:test
[INFO] |  |  |  +- commons-codec:commons-codec:jar:1.4:test
[INFO] |  |  |  +- net.sourceforge.htmlunit:htmlunit-core-js:jar:2.9:test
[INFO] |  |  |  +- xerces:xercesImpl:jar:2.9.1:test
[INFO] |  |  |  |  \- xml-apis:xml-apis:jar:1.3.04:test 
```

如果依赖是传递的，您可以根据上面的树进行如下操作：

```
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-htmlunit-driver</artifactId>
    <version>2.20</version>
</dependency>
<dependency>
    <groupId>net.sourceforge.htmlunit</groupId>
    <artifactId>htmlunit</artifactId>
    <version>2.9</version>
    <!-- i dont want u -->
    <exclusions>
        <exclusion>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:47:19.503

如果您正在使用*WAR 覆盖功能*并且*依赖关系树*的其他答案不起作用，请检查相关库是否没有通过覆盖的 WAR 文件之一进入。作为覆盖的一部分，Maven 正在扩展覆盖的 WAR 文件的`WEB-INF/lib`文件夹，基本上包括生成的 WAR 文件中的所有内容。

要排除一些以这种方式传入的文件，您可以使用 WAR 插件的`dependentWarExcludes`功能：[http ://maven.apache.org/plugins/maven-war-plugin/examples/war-overlay.html](http://maven.apache.org/plugins/maven-war-plugin/examples/war-overlay.html)

# java - java中的数据类型字节不允许添加任何文字

> ID：10311220
> 
> 赞同：1
> 
> 时间：2012-04-25T07:30:33.997
> 
> 标签：java

我正在尝试一些这样的java代码

```
class Test {
public static void main (String [] args){
    byte b = 10;
    b = b + 10;
} 
```

}

在我尝试编译它时保存后，它给了我一个错误

```
D:\java\Test.java:4: possible loss of precision 
```

发现：需要int：字节b = b + 10；^ 1 个错误

但是没有如果尝试这样的事情

```
b++;
b+=10; 
```

完全没问题这是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:38:43.180

您必须将原始代码编写为

```
b = (byte)(b + 10); 
```

问题是它`b + 10`是 int 类型的，因为字节被扩展为 int。

这样做的原因是存在概念上的歧义，如果 b 是，比如说，120。那么 b+10 等于 130，还是等于 -126？

Java 设计者决定在这种情况下应该在 int 中进行加法，这样 120+10 就是 130。那么它就不能存储到一个字节中。

对于`b+=10`，很明显要修改b，所以是字节加法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:38:40.687

好吧，它说`possible loss of precision`是因为编译器认为*可能在向其添加 10 之后`b`可能会超出`byte`大小*限制，但是当您使用时`b++`，或者`b+=10`它不仅会自动*添加`10`，而且还会`typcasting`自动*添加，以便在编译器级别确认 的值`b`不会超出限制的`byte`大小。

# asp.net - 如何循环遍历 ASP.NET (WebMatrix) 中的数据库表？

> ID：10311228
> 
> 赞同：2
> 
> 时间：2012-04-25T07:31:22.183
> 
> 标签：asp.net, html, razor, webmatrix

已解决（我自己的问题）：

`SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES`

这对我有用。

* * *

按照[此处](http://www.microsoft.com/web/post/web-development-101-part-5-using-data#_Toc281081979)Microsoft 网站上的教程，我发现使用以下代码循环遍历表的行非常容易。

```
 @{
   var data = Database.Open("FullDatabase").Query("SELECT * FROM Servers");
 } 

<div id="movieslist">
    <ol>
        @foreach(var row in data)
        {
        <li><a href="#">@row.Item</a></li>
        }
    </ol>
</div> 
```

输出以下内容：

```
1\. Virtual Machines

2\. Physical Machines

3\. Processors (CPU)

4\. Memory (RAM)

5\. OS Build 
```

但是，“Servers”表只是数据库中的众多表之一。我想做的是这样的：

```
 @{
   var database = Database.Open("FullDatabase")
 } 

<div id="movieslist">
    <ol>
        @foreach(var table in database)
        {
        var data = database.Query("SELECT * FROM " + table);
            @foreach(var row in data)
            {
            <li><a href="#">@row.Item</a></li>
            }
         }
    </ol>
</div> 
```

这样的事情可能吗？如果有怎么办？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:36:15.380

首先，这只是你为了好玩而做的事情，永远不会在生产站点中，因为你应该只检索你真正想要的东西，而不是浪费更多的带宽/时间来消耗你不需要的所有东西。

其次，您可以随时查询系统数据，并将所有表放到板上，您只需发出 SELECT 语句，如：

```
SELECT name FROM [sysobjects] WHERE xtype = 'u'; 
```

或者

```
SELECT name FROM [sys].[objects] WHERE type_desc = 'USER_TABLE'; 
```

或者

```
SELECT table_name FROM [information_schema].[tables]; 
```

**它们都做同样**的事情，具体取决于您使用的 SQL 版本...

所以你的`database`查询看起来像：

```
var database = Database
                  .Open("FullDatabase")
                  .Query("SELECT name FROM [sysobjects] WHERE xtype = 'u'"); 
```

# java-me - 用于扫描 QRCode 图像并在 j2me 中上传到服务器的代码

> ID：10311230
> 
> 赞同：2
> 
> 时间：2012-04-25T07:31:28.473
> 
> 标签：java-me, qr-code

我创建了一个代码，用于将图像上传到服务器图像获取的资源文件。

但现在我想要扫描二维码图像并上传到 j2me 中的服务器的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T06:36:11.307

在 Java ME 中使用[ZXing扫描二维码。](http://code.google.com/p/zxing/)有关更多信息，[请参阅这篇文章。](http://qrdemo.com/qrmidlet/)

**注意：** [Codename One](http://www.codenameone.com/)是一个用于开发 Java ME 应用程序的框架。您可以使用 Codename One轻松开发[QRCode 应用程序。](http://codenameone.blogspot.in/2012/04/code-of-zebra-zxing-on-codename-one.html)

# jquery - JQuery数据表排序图像位置

> ID：10311235
> 
> 赞同：2
> 
> 时间：2012-04-25T07:31:47.523
> 
> 标签：jquery, jquery-ui, jquery-datatables

我正在使用 jQuery Datatables 并想移动排序图像说排序箭头图像应该是列标题右侧的 10px。通过将下面的 css 属性更改为 left 或 right 或 center 似乎对我不起作用。我希望图像（排序图像）在 cloumn 标题名称右侧 10 像素。说列标题是客户经理名称。

```
.sorting_asc { 
 background: url('images/sort_asc.png') no-repeat center center;    
   color:#000000;  
text-align:left;       
 } 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:42:35.620

您将希望将父 div 设置为相对或绝对。然后将作为图标的 div 也设置为绝对值。然后，您可以使用 left 和 top 在此元素中定位您的图标。

定位可能会令人困惑。我喜欢这个视频，它在简单地解释定位以及它们如何相互作用方面做得很好。

[http://css-tricks.com/video-screencasts/110-quick-overview-of-css-position-values/](http://css-tricks.com/video-screencasts/110-quick-overview-of-css-position-values/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-03T18:28:50.030

```
**//You can use the following workaround to achieve the same**

 $('tableId').Datatable({

 initComplete: function (settings, json) {

                var spanSorting = '<span class="arrow-hack">&nbsp;&nbsp;&nbsp;</span>';

                $('tableId' + " thead th").each(function (i, th) {

                    var cls = $(th).attr('class');

//only sortable column should be updaed with the new sortable span with respective background icon

                    if (cls == 'sorting' || cls == 'sorting_asc' || cls == 'sorting_desc') {
                        $(th).html($(th).html() + spanSorting);
                    }
                });
            },

 });
```

```
// remove background-image for th in datatable css
 table.dataTable thead .sorting {
        background-image: none;
    }

    table.dataTable thead .sorting_asc {
        background-image: none;
    }

    table.dataTable thead .sorting_desc {
        background-image: none;
    }

 //Add new css property to show sorting image for dynamically created span   
table.dataTable thead .sorting span.arrow-hack {
    background-image: url("../datatables/images/sort_both.png");
    background-position: 13px 17px;
    margin-left: 10px;
}

table.dataTable thead .sorting_asc span.arrow-hack {
    background-image: url("../datatables/images/sort_asc.png");
    background-position: 13px 17px;
    margin-left: 10px;
}

table.dataTable thead .sorting_desc span.arrow-hack {
    background-image: url("../datatables/images/sort_desc.png");
    background-position: 13px 17px;
    margin-left: 10px;
}
```

# java - 通过 Cygwin 部署 java

> ID：10311238
> 
> 赞同：1
> 
> 时间：2012-04-25T07:31:55.440
> 
> 标签：java, maven, deployment, cygwin

我的 Java 开发是在 windows 机器上完成的，我在 centos 机器上运行我的进程。我有一个 bash 脚本，可以构建我所有的罐子并将它们 SCP 到我的 centos 机器。我在 Cygwin 中运行这个 bash 脚本（java -version 是 1.5.0_12），但是当我尝试在我的 centos 机器上运行该进程时，jvm 无法打开罐子。此外，运行 jar -tf 会抛出：

```
java.util.zip.ZipException: error in opening zip file
at java.util.zip.ZipFile.open(Native Method)
at java.util.zip.ZipFile.<init>(ZipFile.java:114)
at java.util.zip.ZipFile.<init>(ZipFile.java:75)
at sun.tools.jar.Main.list(Main.java:979)
at sun.tools.jar.Main.run(Main.java:224)
at sun.tools.jar.Main.main(Main.java:1149) 
```

所以我可以部署的唯一方法是在 cmd.exe 中运行 mvn 命令以构建我的 jar，然后使用 WinSCP 复制所有内容（这样我在 jar 中没有问题）。

在 cygwin 中运行 mvn 是否有任何已知问题？（运行 mvn -version 返回 Apache Maven 2.2.1 (r801777; 2009-08-06 22:16:01+0300) Java 版本：1.6.0_26）

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:44:31.330

解决了。我发现[cygwin中的解决方案将文件权限设置为000](https://stackoverflow.com/questions/5828037/cygwin-sets-file-permission-to-000)

编辑 /etc/fstab 并在文件末尾添加这一行：

```
none /cygdrive cygdrive binary,noacl,posix=0,user 0 0 
```

然后关闭所有 Cygwin 进程，打开一个新终端并再次对您的文件使用 ls -l。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T15:38:07.293

Maven 作为一个 Java 应用程序，无论是通过 Cygwin 脚本还是 cmd.exe 启动，都运行相同。在这种情况下，Java 可执行文件是同一个工具。

首先，您可能希望在 bash 脚本中发布您正在使用的复制命令。其次，当 jar 文件被推送到 CentOS 机器时，您是否检查过它们的权限？当通过 bash 脚本发送文件时，进程所有者实际上是否可以读取这些文件，并且所有者/权限是否与使用 WinSCP 复制时相同？

# eclipse - 错误信息 nutch eclipse

> ID：10311239
> 
> 赞同：-1
> 
> 时间：2012-04-25T07:31:58.203
> 
> 标签：eclipse, nutch

我正在尝试从 eclipse env 中的源代码构建 nutch 1.4。一切正常，但我在 org.apache.nutch.util.domain.TopLevelDomain.java 类中收到一条错误消息，上面写着

```
The type java.lang.Object cannot be resolved. 
It is indirectly referenced from required .class files 
```

当 Object 是主要类并且包含 JRE 的库时，可能是什么原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:31:07.573

您的项目需要指向一个有效的 JRE，它本身需要在 Installed JREs 首选项页面中正确设置。

# ruby-on-rails - 使用 kaminari 对 solr 响应进行分页？

> ID：10311244
> 
> 赞同：0
> 
> 时间：2012-04-25T07:32:18.690
> 
> 标签：ruby-on-rails, pagination, kaminari

kaminari 是否支持 solr 响应的分页？如果是，如何将响应转换为与 kaminari 兼容的格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:57:47.010

按照此处所述为您的项目设置 Kaminari - [http://railscasts.com/episodes/254-pagination-with-kaminari](http://railscasts.com/episodes/254-pagination-with-kaminari)

在您的控制器中，如果您有以下执行 Solr 搜索 -

```
@vehicles = Vehicles.search do

     with (:year => 2012)
     paginate :page => params[:page],  :per_page => 20

end 
```

您需要在视图中添加以下内容以获取分页链接 -

```
<%= paginate @vehicles.hits %> 
```

希望有帮助！

# c - 如何求一个数的原根

> ID：10311251
> 
> 赞同：1
> 
> 时间：2012-04-25T07:32:37.210
> 
> 标签：c, malloc

这是我试图编译以查找原始根的代码......但它给了我错误。

```
int isPrimitive (int q, int a) {
int i,z;
double k,s;

s=1;
i=0;

double *factors=malloc(sizeof(double)*q-2);    

while (s>0 && i<q-2) {
    k=pow(a,i);
    s=k-(q*floor(k/q));
    for (z=0;z<(sizeof(*factors)/sizeof(factors[0]));z++) {
        if (factors[z]==s) {
            return 0;
        }
    }
    factors[i]=s;
    i++;
} 
```

这里在`double *factors=malloc(sizeof(double)*q-2);` // 错误从 void* 到 double* 的无效转换行中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:53:18.263

问题几乎可以肯定是在 C 代码上使用 C++ 编译器。在 C`void*`中可以在没有强制转换的情况下转换为任何指针类型，而在 C++ 中则不是这样，因此会出现错误消息。基本上有两种解决方案：使用 C 编译器（例如，`gcc`而不是`g++`），或强制转换 malloc 的结果。

后者可以通过以下方式完成：

```
double *factors = static_cast<double*> (malloc(sizeof(double)*(q-2))); 
```

但如果你实际上是在编写 C++，那么使用[`new []`](https://en.wikipedia.org/wiki/New_%28C%2B%2B%29)语法会更好：

```
double *factors = new double [q-2]; 
```

（请注意，这需要使用`delete[] factors`而不是`free(factors)`）

# c - malloc 和 free 的复杂性

> ID：10311252
> 
> 赞同：3
> 
> 时间：2012-04-25T07:32:40.270
> 
> 标签：c, memory-leaks, malloc, free, ubuntu-11.04

我有两个相关的问题，因此我在这个单线程中问他们。

Q1) 我如何确认我的操作系统是否在程序终止时自动清除未“释放”的内存（使用 malloc 分配）？我正在使用带有 gcc-4.5.2 的 32 位 Ubuntu 11.04

根据 Steven Summit 的教程页面[，](https://stackoverflow.com/a/1119334/842808) “*释放未使用的内存（malloc'ed）是一个好主意，但这不是强制性的。当您的程序退出时，它已分配但未释放的任何内存都应自动释放。如果您计算机会因为你的程序忘记释放它而以某种方式“丢失”内存，这表明**你的操作系统存在问题或缺陷**。* ”

Q2）假设， foo.c mallocs 一个 B 字节的内存。稍后， foo.c 释放这个 B 字节的内存位置并将其返回给操作系统。**现在我的问题是**，这些特定的 B 字节内存位置是否可以在当前实例中重新分配给 foo.c（由操作系统），或者这些 B 字节不能分配给 foo.c，直到其当前实例终止?

**编辑**：我建议所有阅读我的问题的人[在这里](https://stackoverflow.com/a/1119334/842808)和[这里](https://stackoverflow.com/a/5532547/842808)阅读类似问题的答案。这两个答案都详细解释了 malloc() 和 free() 的交互和工作，而没有使用非常深奥的术语。要了解内核使用的内存管理工具（例如 brk()、mmap()）和 C 编译器使用的内存管理工具（例如 malloc()、free()）之间的区别，[这](http://www.ibm.com/developerworks/linux/library/l-memory/)是一个必须阅读的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:37:14.433

大多数现代操作系统将回收分配的内存，因此您不必担心。
操作系统不知道您的应用程序/程序是否泄漏了内存，它只是在进程完成后回收分配给进程的内容。

是的，可以重用释放的内存（如果需要），重用可以发生在同一个实例中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T07:37:46.917

当一个进程通过终止信号结束时，例如`SIGSEGV`，或通过[_exit(2)](http://linux.die.net/man/2/_exit)系统调用（恰好在从 中返回时也被调用`main`），所有的进程资源都被内核释放。特别是，进程地址空间，包括堆内存（使用[mmap(2)](http://linux.die.net/man/2/mmap)（或者可能`sbrk(2)`）系统调用（由`malloc`库函数使用）分配）被释放。

当然，`free`库函数要么（通常）使释放的内存区域可通过将来的进一步调用来重用，要么（有时，对于大内存区域）使用例如系统调用`malloc`向内核释放一些大内存块。`munmap(2)`

要了解有关进程 1234 的内存映射的更多信息，请按顺序读取`/proc/1234/maps`伪文件（或`/proc/self/maps`从进程内部）。[/proc](http://linux.die.net/man/5/proc)文件系统是向内核查询进程的首选方式。（还有很多其他有趣`/proc/self/statm`的`/proc/self/smaps`事情）。

`free`和的详细行为`malloc`取决于实现。您应该将`malloc`其视为获取堆内存`free`的一种方式，并且可以说以前的`malloc`区域是无用的，并且系统（即标准 C 库 + 内核）可以用它做任何事情。

使用[valgrind](http://valgrind.org/)寻找内存泄漏错误。您也可以考虑使用[Boehm 的保守垃圾收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)，即使用`GC_malloc`而不是`malloc`手动释放内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T07:37:21.783

Q1。您只需假设操作系统运行正常。

Q2。没有理由不能将字节重新分配给 foo.c 它只取决于内存分配例程的工作方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T07:49:42.283

Q1）我不确定您如何确认。然而，关于第二段，总是释放你分配的任何内存被认为是一种很好的风格。在这里可以找到一个很好的解释：[当你在 malloc 之后不释放时，真正发生了什么？](https://stackoverflow.com/questions/654754/what-really-happens-when-you-dont-free-after-malloc).

Q2) 肯定；这些字节通常是第一个被重新分配的（取决于 malloc 的实现）。有关详细说明，请参阅：[malloc() 和 free() 如何工作？](https://stackoverflow.com/questions/1119134/how-do-malloc-and-free-work).

# vim - 使用--remote时如何向gvim发送命令？

> ID：10311254
> 
> 赞同：9
> 
> 时间：2012-04-25T07:32:41.360
> 
> 标签：vim, pipe

我想在已经打开的 GVim 窗口中查看命令的输出。

要在新的 GVim 窗口中查看命令的输出，我会这样做：

```
mycommand | gvim - 
```

要在现有窗口中打开文件，我会这样做：

```
gvim --remote-silent myfile 
```

我如何一起使用它们？`mycommand | gvim --remote-silent -`不起作用（它认为**是**`-`当前目录中的文件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:40:12.237

试试`gvim --remote-silent <(mycommand)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T04:52:01.633

假设你有 Gvim 使用默认的 servername 运行`GVIM`，这里有一个`:echo 'It works!'`在运行的 Gvim 中执行的命令：

```
vim --servername GVIM --remote-send ":echo 'It works!'<CR>" 
```

该命令不返回任何内容，它只是将“ `:echo 'It works!'<CR>`”发送到服务器并立即返回。

如果您需要评估表达式并获得结果，您可以使用以下命令：

```
vim --servername GVIM --remote-expr "version" 
```

（将返回版本号）

```
vim --servername GVIM --remote-expr "2+2" 
```

（将返回“4”）

当然，你可以在 Vim 中声明自己的函数并将其用作表达式，就像这样：

```
vim --servername GVIM --remote-expr "MyOwnFunction()" 
```

# javascript - 生成 ActiveX 允许提示

> ID：10311257
> 
> 赞同：1
> 
> 时间：2012-04-25T07:32:53.610
> 
> 标签：javascript, internet-explorer, activex

```
function checkActiveX() {
    if (window.ActiveXObject){
          try{
            var username = new ActiveXObject("WScript.Network").UserName;
            return true;
          }
          catch(e){
            return false;
          }
        }
} 
```

在 IE 中运行该方法时，通常会出现一个确认对话框：

```
An activex control on this page might be unsafe to interact with other parts of the page javascript. Do you want to allow this interaction? 
```

但在某些计算机上，我只是收到一个 javascript 错误，没有提示：

```
automation server can't create object 
```

如果我尝试生成一个新的 activex 对象，我只是再次收到错误，没有新的提示。有什么方法可以生成一个新的提示，以便用户可以接受 activex？或者他/她是否需要更改安全设置？在那种情况下，哪个？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:46:39.280

必须在客户端上更改安全设置以启用 ActiveX 提示。

# facebook - 如何让用户 Facebook url 喜欢？

> ID：10311260
> 
> 赞同：0
> 
> 时间：2012-04-25T07:32:56.393
> 
> 标签：facebook, facebook-graph-api

我正在为 facebook 开发一个应用程序，并且我的应用程序中有几个被喜欢的 url（例如 www.mydomain.com/main/item/1）。我是否可以询问 facebook api 用户喜欢哪些链接（来自我的域）？

似乎我无法从 /{UID}/likes 获得 URL 喜欢，因为它只提供 fb 页面喜欢。

如果需要额外的权限，我可能会问他们，但我似乎找不到方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:26:44.127

我有同样的问题。您可以使用 FQL 查看数据。

[https://developers.facebook.com/docs/reference/fql/url_like](https://developers.facebook.com/docs/reference/fql/url_like)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:08:38.637

如果要提取喜欢的详细信息，则需要通过附加 access_token 进行调用，更重要的是，此 access_token 应使用 fb 权限“user_likes,friends_likes”生成

更简单的选择是使用社交插件，请参阅； [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# javascript - 使用 Jquery 更改下拉列表的值

> ID：10311264
> 
> 赞同：3
> 
> 时间：2012-04-25T07:33:03.137
> 
> 标签：javascript, jquery

```
<select name="vehicle_make" onchange="test1(this.value)" style="width: 130px; float:left;" id="vehicle_make" class="home_input">
    <option value="">Choose Make</option>
    <option value="2063">Acura</option>
    <option value="2064">Honda</option>
</select> 
```

我有一个下拉菜单。我已阅读链接的 href 属性并将其分配为下拉列表的值。但我只想从链接中获取数字并将其作为值分配给下拉列表我该怎么做。

```
<select name="vehicle_make" onchange="test1(this.value)" style="width: 130px; float:left;" id="vehicle_make" class="home_input">
    <option value="">Choose Make</option>
    <option value="http://store.teknotik.com/category-s/2063.htm">Acura</option>
    <option value="http://store.teknotik.com/category-s/2064.htm">Honda</option>
</select> 
```

我使用以下 jquery 来获取链接作为值

```
$("#data a").each(function(index) {
        if ($(this).attr("class") == "subcategory_link") {

            //document.getElementsById("year").innerHTML="<option value="+$(this).attr("href")+">test</option>";
            lnk[cnt] = $(this).attr("href");
            cnt = cnt + 1;
            //alert($(this).attr("href"));

        }
    }); 
```

但我想将下拉值设为：

```
<select name="vehicle_make" onchange="test1(this.value)" style="width: 130px; float:left;" id="vehicle_make" class="home_input">
    <option value="">Choose Make</option>
    <option value="2063">Acura</option>
    <option value="2064">Honda</option>
</select> 
```

我只想在上面的下拉列表中将 .htm 之前的数字作为值发送。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:48:59.983

简单的方法：

```
$('#vehicle_make option[value!=""]').each(function() {
    this.value = this.value.replace(/\D/g, "");
});​ 
```

[**现场演示**](http://jsfiddle.net/nSfmK/1)

* * *

```
\d // Numerical char
\D // Not numerical char <===
g  // Is a flag which means find all the occurrences, and not only the first. 
```

[**优秀**的正则表达式备忘单。](http://www.addedbytes.com/download/regular-expressions-cheat-sheet-v2/png/)

所以我正在寻找所有非数字字符（带`\D`）并用空字符串“替换”它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:45:09.937

似乎这里有两个部分......得到你想要的数字：

```
lnk[cnt] = $(this).attr('href').substring($(this).attr('href').lastIndexOf('/')+1);
lnk[cnt]=lnk[cnt].replace('.htm',''); 
```

（不是最优雅的解决方案，但应该可以）

然后设置值：

```
$("#vehicle_make").val(lnk[cnt]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:45:11.023

你可以在下面找到它；

```
var url = $(this).attr("href");
var urlTemp1 = url.split("/");
var urlTemp2 = (urlTemp1[urlTemp1.length -1]).split(".");
var yourNumber = urlTemp2[0];
alert(yourNumber); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T07:51:48.887

尝试：

```
 $(document).ready(function() {
  $("select[name='vehicle_make'] option[value!='']").each(function() {
     this.value = this.value.split("/").pop().split(".")[0];
  });
}); 
```

希望能帮助到你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T07:44:15.007

试试这个`.replace('', '')`功能

```
.replace('http://store.teknotik.com/category-s/','').replace('.htm','') 
```

应该只留下数值

# c++ - 设计问题，基类知道它的派生类

> ID：10311267
> 
> 赞同：2
> 
> 时间：2012-04-25T07:33:07.910
> 
> 标签：c++, base-class

基本上我有一个名为 的基类`Geometry`，以及一些派生类，例如`Point`,`Polygon`等...

`Geometry`实现这样的方法交集：

```
Geometry* intersection(Geometry* other)
{
     Geometry* inter = compute_intersection(this, other); 

     if (inter is a polygon) 
         return new Polygon(inter);

    if (inter is a point) 
         return new Point(inter);
} 
```

当我在我的程序中计算两个几何图形的交集时，我得到 a`Geometry*`并且我可以`dynamic_cast`将它变成任何它真正的样子。

这是一个好的设计吗？我认为，可能错误的是，每次计算交集时我都必须检查真实类型，然后 dynamic_cast 结果（这可能很慢）。但我认为主要问题是这种设计，`Geometry`必须知道它的导数（点，折线？等......）。

有什么好的解决方案可以避免这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:48:11.437

为什么需要构造返回对象的新对象，不能直接返回吗？如果不能，只需在每个派生类中实现一个额外的方法，将结果包装`compute_intersection`在一个新对象中，然后调用这个新方法而不是`compute_intersection`in `Geometry`。

在我的回答中，我假设唯一可能的情况：`compute_intersection`是抽象的，并且每个派生类都实现了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:11:07.667

也许你可以使用[`boost::variant`](http://www.boost.org/doc/html/variant.html)：

```
typedef boost::variant<Point, Polygon/*, and other...*/> Geometry_Variants;

Geometry_Variants intersection(Geometry_Variants const& other)
{
    // compute the intersection and return Point or Polygon
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:14:46.053

您的问题以名称为人所知：`multiple dispatch`或`multi methods`。据我所知，在 C++ 中这个问题没有真正好的答案。Andrei Alexandrescu 对这个问题的一个很好的讨论在这里：

[http://books.google.fr/books?id=aJ1av7UFBPwC&pg=PA263&lpg=PA295&dq=modern+c%2B%2B+design+multiple+dispatch&source=bl&ots=YRdIZrWiaV&sig=2Vj0Blst_jmhMCAZIJ8gUiG_pl4&hl=fr&sa=X&ei=082XT86RHNS18QPW7f3mBQ&ved=0CCYQ6AEwAA#v=一页&q&f=false](http://books.google.fr/books?id=aJ1av7UFBPwC&pg=PA263&lpg=PA295&dq=modern+c%2B%2B+design+multiple+dispatch&source=bl&ots=YRdIZrWiaV&sig=2Vj0Blst_jmhMCAZIJ8gUiG_pl4&hl=fr&sa=X&ei=082XT86RHNS18QPW7f3mBQ&ved=0CCYQ6AEwAA#v=onepage&q&f=false)

我建议你买这本书，它物有所值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:21:01.307

如果你发现自己需要根据继承的类型来 new 来复制对象，那么你可以使用[虚拟复制构造函数](http://www.parashift.com/c++-faq-lite/virtual-functions.html#faq-20.8)，通过实现一个返回对象副本的 clone() 函数：

```
virtual Obj* Obj::clone() const { return new Obj(*this); } 
```

这可以从您的 intersection() 函数中调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T09:05:29.107

就我而言，这里有两个问题。

首先，我不太关心获取/设置事物的功能。我对告诉对象为我做某事更感兴趣。

其次，您正在尝试实现多分派（在本例中为双分派）。这是您想要的行为取决于多个对象的类型的地方。

*我的封装、封装、封装*的正常口头禅引导我走向以下想法：

*   封装你想对交叉点做的事情，例如
    *   将其区域放入电子表格单元格
    *   将几何点添加到显示列表
*   封装给定另一种类型的一种类型的调度
    *   查看访客模式
*   封装将行为应用于交叉点

# c - 用 Xlib 捕捉鼠标

> ID：10311270
> 
> 赞同：6
> 
> 时间：2012-04-25T07:33:13.657
> 
> 标签：c, xlib

我想编写一个简单的 Xlib 程序来改变鼠标的行为（举个例子，反转垂直移动）。我在捕获事件时遇到问题。

我希望代码

*   捕捉控制器位置的变化（我向上移动鼠标，`MotionEvent`）
*   计算新的光标位置 ( `new_x -= difference_x`)
*   设置新的光标位置（向下移动指针`XWarpPointer`，，防止在此处生成事件）

下面的代码应该在每次鼠标移动时捕获一个运动事件，但只有当指针从一个窗口移动到另一个窗口时才会生成事件......如何捕获所有的运动事件？

```
#include "X11/Xlib.h"
#include "stdio.h"

int main(int argc, char *argv[])
{
    Display *display;
    Window root_window;
    XEvent event;

    display = XOpenDisplay(0);
    root_window = XRootWindow(display, 0);
    XSelectInput(display, root_window, PointerMotionMask );

    while(1) {
        XNextEvent( display, &event );
        switch( event.type ) {
            case MotionNotify:
                printf("x %d y %d\n", event.xmotion.x, event.xmotion.y );
                break;
        }
    }

    return 0;
} 
```

有关的：

[X11：我如何真正抓住鼠标指针？](https://stackoverflow.com/questions/2792954/x11-how-do-i-really-grab-the-mouse-pointer)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T07:47:29.093

当您的程序接收到鼠标事件时，它会接收到事件的副本；副本也被发送到正在侦听这些事件的其他程序（请参阅 参考资料[`XSelectInput(3)`](http://www.x.org/releases/current/doc/man/man3/XSelectInput.3.xhtml)）。您不能在不使用[`XGrabPointer(3)`](http://www.x.org/releases/current/doc/man/man3/XGrabPointer.3.xhtml)鼠标独占所有权的情况下覆盖它，这将阻止其他程序接收*任何*鼠标事件。简而言之，你实际上不能做你想做的事。

另请注意，如果客户端已`PointerMotion`在其不传播掩码中指定其窗口之一，您将不会在其窗口内收到任何指针运动事件（同样，除非您进行抓取）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:19:19.943

如果您想在移动鼠标时更改鼠标的行为，我建议您使用输入属性而不是尝试在程序中进行处理。

*   `xinput --list`
*   `xinput --list-props 'USB Optical Mouse'`
*   `xinput --set-prop 'USB Optical Mouse' 'Evdev Axis Inversion' 1 0`
*   `xinput --set-prop 'USB Optical Mouse' 'Evdev Axes Swap' 1`
*   还有“坐标变换矩阵”属性，但由于某种原因，它现在对我不起作用。

您不需要`xinput`自己调用程序：您可以使用 Xlib 调用（查看`xinput`的源代码）。

# objective-c - 将图像保存到核心数据

> ID：10311271
> 
> 赞同：6
> 
> 时间：2012-04-25T07:33:13.997
> 
> 标签：objective-c, ios, cocoa-touch, core-data, uiimage

我是一个与核心数据相关的新手。任何人都可以帮助我提供正确的步骤/教程，展示如何将图像保存到核心数据及其检索。我已经能够存储字符串数据，但是我的应用程序在尝试保存图像时崩溃。为了节省：

```
DataEvent *event = (DataEvent *)[NSEntityDescription insertNewObjectForEntityForName:@"DataEvent"
                                                          inManagedObjectContext:managedObjectContext];
NSURL *url2 = [NSURL URLWithString:@"xxxxxxxxxxxxxxx SOME URL xxxxxxxxxxxx"];

NSData *data = [[NSData alloc] initWithContentsOfURL:url2];
imageSave=[[UIImage alloc]initWithData:data];
NSData * imageData = UIImageJPEGRepresentation(imageSave, 100.0);    
[event setValue:self.imageSave forKey:@"pictureData"]; 
```

对于检索：

```
 DataEvent *event = (DataEvent *)[eventsArray objectAtIndex:indexPath.row];
 UIImage *image = [UIImage imageWithData:[event valueForKey:@"pictureData"]];
 UIImageView *imageViewMainBackGround = [[UIImageView alloc] 
 CGRect rect3=CGRectMake(0,2,100.0,100.0); 
 imageViewMainBackGround.frame = rect3;
 [cell.contentView addSubview:imageViewMainBackGround];
 [imageViewMainBackGround release]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T16:31:18.030

保存：

```
NSData *imageData = UIImagePNGRepresentation(myUIImage);

[newManagedObject setValue:imageData forKey:@"imageKey"]; 
```

并检索图像：

```
NSManagedObject *selectedObject = [[self fetchedResultsController] objectAtIndexPath:indexPath];
UIImage *image = [UIImage imageWithData:[selectedObject valueForKey:@"imageKey"]];
[[newCustomer yourImageView] setImage:image]; 
```

改变格式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:16:00.447

> 错误：原因=“用于打开商店的模型与用于创建商店的模型不兼容”

**解决方案：**

从模拟器中删除构建项目并从产品选项卡中清理，现在运行该项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T07:46:45.640

如果没有必要，请不要更改分辨率..

```
NSData * imageData = UIImageJPEGRepresentation(imageSave, 0.0); 
```

//并更改以下行

```
[event setValue:imageData forKey:@"pictureData"]; 
```

[使用示例代码查看核心数据教程中的存储和检索图像。](http://www.bukisa.com/articles/188059_iphone-core-data-tutorial-part-2)

希望对你有帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T07:44:30.140

您必须将托管对象的图片数据值设置**为**NSData 对象（在您的情况下为**imageData**），而不是*imageSave*对象，它是*UIImage*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-15T00:57:35.003

您可以使用这种 hacky 方式存储图像，核心数据不支持图像，但您可以将图像转换为字符串。

```
self.selectedImage?.jpegData(compressionQuality: 1)?.base64EncodedString() 
```

使用此代码，您可以将图像转换为字符串。

要检索图像，您应该获取核心数据实例并在到达后到达图像实例，您应该使用此代码将其转换回图像

```
if let decodedData = Data(base64Encoded: entity.img as! String, options: .ignoreUnknownCharacters) 
{let image = UIImage(data: decodedData)} 
```

这是存储图像的非常简单的方法，但是如果您的应用程序中有太多图像，则不应将它们存储在核心数据中

# javascript - 将 Chrome 开发控制台转储到文本文件？

> ID：10311273
> 
> 赞同：2
> 
> 时间：2012-04-25T07:33:17.730
> 
> 标签：javascript, debugging, google-chrome-devtools

有时，当我尝试调试用户在使用我的 Chrome 扩展程序 (StayFocusd) 时遇到的问题时，访问控制台日志会很有用。现在我只是要求他们将日志复制并粘贴给我，但如果我能以编程方式生成一个他们可以通过电子邮件发送给我的文件会更好。那可能吗？

或者，至少可以使用 Javascript 捕获控制台内容，以便我可以将其输出为对自己有用的调试格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:19:30.190

有一个实验性 API：**[chrome.experimental.devtools.console](http://developer.chrome.com/extensions/experimental.devtools.console.html)**：

```
chrome.experimental.devtools.console.getMessages(function(messages) {
    messages[0].url  // http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js
    messages[0].text // XHR finished loading
    messages[0].line // 4
}) 
```

# javascript - 如何用 Zend Framework 和 netbeans 编写 JavaScript？

> ID：10311281
> 
> 赞同：2
> 
> 时间：2012-04-25T07:33:46.197
> 
> 标签：javascript, php, zend-framework, netbeans, autocomplete

我正在写这样的JavaScript：

```
<?php $this->headScript()->captureStart();?>
$(function(){
    // some javascript magic
});
<?php $this->headScript()->captureEnd(); ?> 
```

但问题是它没有突出显示并且没有自动完成......我试过这样写：

```
<?php $this->headScript()->captureStart();?>
//<script>
$(function(){
    // some javascript magic
});
<?php $this->headScript()->captureEnd(); ?> 
```

`<script>`现在它被突出显示，但 netbeans对 Zend 的未关闭标签和其他一些问题不满意......然后在谷歌搜索后发现了这个：

```
<?php if( false ) {?><script><?php } ?>
$(function(){
    // some javascript magic
});
<?php if( false ) { ?></script><?php } ?> 
```

工作正常，但也许有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:40:29.513

在外部 JS 文件中编写您的 js。

它将允许更好的分离、更好的缓存、更好的聚合、更好的突出显示等。

以下是一些可能对您有所帮助的链接：

*   [使用 Zend 管理 CSS/JS](http://devzone.zend.com/1651/managing-css-and-javascript-files-within-a-zend-framework-app/)
*   [用 Zend 管理 CSS/JS](http://www.devpatch.com/2010/02/view-plugin/)（另一种观点）
*   [设置 javascript 构建路径](http://files.zend.com/help/PDT/setting_the_javascript_build_path.htm)（用于自动完成和类似的东西）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:06:44.137

您可以扩展 HeadScript，这是最简单的解决方案：

```
class My_View_Helper_HeadScript extends Zend_View_Helper_HeadScript
{
    public function captureEnd()
    {
        $content = ob_get_contents();
        ob_clean();
        echo strip_tags($content, 'script');

        parent::captureEnd();
    }
} 
```

指定辅助路径：

```
resources.view.helperPath.My_View_Helper = "My/View/Helper" 
```

用法：

```
<?php $this->headScript()->captureStart();?>
    <script>
      alert(1);
    </script>  
<?php $this->headScript()->captureEnd(); ?> 
```

# mysql - 聚合日志表而不使用两个选择

> ID：10311282
> 
> 赞同：3
> 
> 时间：2012-04-25T07:33:48.760
> 
> 标签：mysql, select

有没有办法形成这样的查询：

```
Id | action | object 
-------------
1 | view | article1 
2 | view | article2 
3 | view | article1 
4 | order | article1 
5 | order | article1 
6 | order | article3 
```

并产生这个：

```
name     | views | orders
----------------------
article1 |   2   |   2
article2 |   1   |   0
article3 |   0   |   1 
```

一种解决方案是使用两个选择，然后在代码中加入它们。有更好的吗？

问候 && 蒂亚

noircc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:42:33.037

也许是这样的：

```
SELECT
    SUM(CASE WHEN Table1.action='view' THEN 1 ELSE 0 END) AS views,
    SUM(CASE WHEN Table1.action='order' THEN 1 ELSE 0 END) AS orders,
    Table1.object 
FROM
    Table1
GROUP BY
    Table1.object 
```

# jquery - 如何按名称获取元素类型？

> ID：10311283
> 
> 赞同：1
> 
> 时间：2012-04-25T07:33:50.030
> 
> 标签：jquery

有什么优雅的方法可以按名称获取元素类型吗？

我可以预期呈现的表单包含下拉列表、输入、表格、名称如“answer[x]”的 div，其中 x 代表某个数字。我需要元素类型来知道如何处理它。我可以尝试通过以下方式获取对象：

```
$('td[name=answer\\[1\\]]') 
$('div[name=answer\\[1\\]]')
$('input[name=answer\\[1\\]]') 
```

然后什么时候`$('input[name=answer\\[x\\]]').length > 0`“太棒了！它的输入！”。它只是看起来不像优雅的方式......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:36:51.613

对我`$("[name='answer[" + x + "]'")[0].tagName`来说很优雅:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:37:10.550

将此用于**一个元素**：

```
$('[name=answer[1]')[0].tagName 
```

或者这个对于**多个元素**：

```
$('[name=answer]').each(function() {
    alert(this.tagName);
});​ 
```

[**现场演示**](http://jsfiddle.net/eMhBg/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T07:41:33.577

```
$tags = $('[name^=answer]'); // all element have name started with answer

$.each($tags, function() {
  console.log(this.tagName);
}); 
```

[现场检查](http://jsfiddle.net/TTcce/)

# c# - 将两个查询合并为一个查询

> ID：10311284
> 
> 赞同：1
> 
> 时间：2012-04-25T07:33:56.360
> 
> 标签：c#, sql, asp.net-mvc-3, linq, entity-framework-4

我有两个查询都可以工作，但需要将它们组合成一个工作查询

查询 1

```
 var now = DateTime.Now;
  var twoWeeksAgo = now.AddDays(-14);

  var advert =
      from m in db.tbl_Property
      where m.Prop_Update >= twoWeeksAgo && m.Prop_Update <= now
      select m; 
```

查询 2

```
 var Props = 
      from n in db.tbl_Property.
      Where(c => c.Prop_AvailableSpaces > 0)
      select n; 
```

欢迎任何帮助或建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:38:32.453

我会更改这些查询以**传递**原始查询`IQueryable<Property>`（或任何类型），然后您可以执行以下操作：

```
var advert = from m in source
             where m.Prop_Update >= twoWeeksAgo && m.Prop_Update <= now
             select m; 
```

`db.tbl_Property`作为传入`source`，则：

```
var Props = from n in filteredProperties
            where n.Prop_AvailableSpaces > 0
            select n; 
```

即组成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T07:38:17.763

你的意思是这样的：

```
var now = DateTime.Now;
var twoWeeksAgo = now.AddDays(-14);

var advert = db.tbl_Property
               .Where(m => m.Prop_Update >= twoWeeksAgo && m.Prop_Update <= now
                           && m.Prop_AvailableSpaces > 0); 
```

或者也许结合 || 反而：

```
var advert = db.tbl_Property
               .Where(m => (m.Prop_Update >= twoWeeksAgo && m.Prop_Update <= now)
                           || m.Prop_AvailableSpaces > 0); 
```

（请注意，我在这里没有使用查询表达式，因为您*只*使用了一个 where 子句。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:37:57.970

也许是这样的：

```
var advert =
            from m in db.tbl_Property
            where 
                (m.Prop_Update >= twoWeeksAgo && m.Prop_Update <= now)
                || (m.Prop_AvailableSpaces > 0)

            select m; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T07:39:20.720

```
 var advert = db.tbl_Property.Where(m => m.Prop_Update >= twoWeeksAgo 
     && m.Prop_Update <= now && m.Prop_AvailableSpaces > 0); 
```

# asp.net - 如何在 asp.net 中集成 Paypal Api 以进行快速结帐？

> ID：10311285
> 
> 赞同：2
> 
> 时间：2012-04-25T07:34:02.617
> 
> 标签：asp.net, paypal-sandbox

我在网上找到[了这段代码。](http://blogs.effectlabs.com/post/2011/11/07/Paypal-Express-Checkout-with-C-using-Paypal-web-services.aspx)

但是根据[WSDL](https://www.sandbox.paypal.com/wsdl/PayPalSvc.wsdl)`paypalAAInt`，PayPal API 中不存在该功能。谁能帮助我如何在 Asp.Net 中集成 PayPal 快速结帐

```
CustomSecurityHeaderType type = new CustomSecurityHeaderType();

type.Credentials = new UserIdPasswordType()
{
    Username = "thakur_1322207622_biz_api1.gmail.com",
    Password = "1322207646",
    Signature = "An5ns1Kso7MWUdW4ErQKJJJ4qi4-Asr3E2CXn-a5b6uZmCDTPNNvpGBl"
};

SetExpressCheckoutRequestDetailsType sdt = new SetExpressCheckoutRequestDetailsType();
sdt.NoShipping = "1";

PaymentDetailsType pdt = new PaymentDetailsType()
{
    OrderDescription = "Order for 1 year" + Request.Cookies["username"].Value,
    OrderTotal = new BasicAmountType()
    {
        currencyID = CurrencyCodeType.USD,
        Value = "95.40"
    }
};
sdt.PaymentDetails = new PaymentDetailsType[] { pdt };
sdt.CancelURL = "http://localhost:2326/MusicStore/Default.aspx";
sdt.ReturnURL = "http://localhost:2326/MusicStore/regsuccessfull.aspx";

SetExpressCheckoutReq req = new SetExpressCheckoutReq()
{
    SetExpressCheckoutRequest = new SetExpressCheckoutRequestType()
    {
        SetExpressCheckoutRequestDetails = sdt,
        Version = "60.0"
    }
};

var resp = paypalAAInt.SetExpressCheckout(ref type, req);

if (resp.Errors != null && resp.Errors.Length > 0)
{
    // errors occured
    throw new Exception("Exception(s) occured when calling PayPal. First exception: " +
            resp.Errors[0].LongMessage);
}

Response.Redirect(string.Format("{0}?cmd=_express-checkout&token={1}", 
    ConfigurationManager.AppSettings["PayPalSubmitUrl"], resp.Token)); 
```

这是我正在使用的代码，但该功能`paypalAAInt`在 PayPal API 中不存在。应该使用哪个函数来代替`paypalAAInt`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:45:11.103

`SetExpressCheckout`如果您有一个对象，则该方法可用，`PayPalAPIAAInterfaceClient`并且如果您添加了对 WSDL 的 Web 引用，则该对象应该可用。

这是您缺少的行：

```
PayPalAPIAAInterfaceClient paypalAAInt = new PayPalAPIAAInterfaceClient(); 
```

# android - 相互显示两个表面视图？

> ID：10311286
> 
> 赞同：0
> 
> 时间：2012-04-25T07:34:02.933
> 
> 标签：android, opengl-es, android-camera, augmented-reality

有什么方法可以将两个表面视图相互设置，其中一个用于保存 CameraPreview，另一个用于保存 OpenGL 表面。

我已经尝试过这个问题，我的尝试在下面（code1和code2）中提到

**代码 1** 1- 在此代码中，我使用第 1 行中提到的命令打开相机 2- 从渲染类实例化一个对象，并使用 setContentView() 将此对象添加到表面视图

但在这种情况下，相机会打开几秒钟然后消失，然后，出现 OpenGl 对象。

```
public void surfaceCreated(SurfaceHolder holder) {

    camera = android.hardware.Camera.open(); //line 1
    //gLSurfaceView = new GLSurfaceView(this);
    //gLSurfaceView.setRenderer(new MyRender());
    //setContentView(gLSurfaceView);
} 
```

**代码 2** 在这段代码中，我同时实例化了 CameraSurface 和 Render 类。我还在 XML 文件中创建了一个 FrameLayout。然后将camerSurface对象添加到setContentView，将Render对象添加到FrameLayout。但是这样，只会显示添加到框架布局的对象。

```
cameraSurfacePreviewDemo = new CameraSurfacePreviewDemo(this);
    glSurfaceView = new GLSurfaceView(this);
    glSurfaceView.setRenderer(new MyRender());
    //setContentView(cameraSurfacePreviewDemo);
    //setContentView(glSurfaceView);
    //fl01.addView(glSurfaceView);
    //fl01.addView(cameraSurfacePreviewDemo); 
```

==================================================== ========================================== 任何为Android初学者提供良好教程的条款相机和AndR“增强现实”或为Android相机和AndR“增强现实”的初学者推荐好书将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:08:53.697

IIRC这是不可能的。表面视图不能重叠。（Diane Hackeborn 给出了更长的解释）

# clickonce - 单击一次通过 Internet 部署 - 无法显示网页

> ID：10311291
> 
> 赞同：0
> 
> 时间：2012-04-25T07:34:51.703
> 
> 标签：clickonce

我在我的 IIS 7.5 (Windows Server 2008) 和我的网络上使用 Click-Once 发布了一个 WPF 应用程序。我可以打开网页（使用正确的 www.webpage.com:8082 地址，不使用本地主机或计算机名称作为 URL）。通过网络执行此操作时，我会使用“安装”按钮获得漂亮的网页，等等，我习惯于使用 Click-Once。

现在我尝试从我的网络外部安装应用程序。似乎我可以连接到网页，但我收到“网页无法显示”。在“可能的条款”下，它说：“此网页上的某些内容或文件需要您尚未安装的程序”。

我在家里的网络上使用 IE9，而当我从 Internet 连接时，我使用 IE8。

当然，我尝试用谷歌搜索它，但收效甚微......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:32:43.347

Sounds like you need to configure NAT on your firewall, so request to port 8082 are redirected to the machine hosting the app. Also note that if you have multiple websites on port 8082, that host headers must be used (not likely though).

Also note that the update url in the clickonce manifest must corresponds exactly to where the files can be located - e.g. [http://www.pageweb.com/8082/clickonceAppBinariesFolder](http://www.pageweb.com/8082/clickonceAppBinariesFolder)

# c# - 停止 WebBrowser 会导致 Internet Explorer 打开

> ID：10311294
> 
> 赞同：6
> 
> 时间：2012-04-25T07:35:18.967
> 
> 标签：c#, .net, browser

我正在使用 C# WebBrowser 为我的桌面应用程序显示 Facebook 登录对话框。我注册了 WebBrowser.DocumentCompleted 事件，一旦我得到我期望的 URL，我停止 WebBrowser，并关闭对话框。

出于某种原因，关闭对话框后，Internet Explorer 突然打开。

我只能假设它打开了 IE（顺便说一句，甚至不是我的默认浏览器），因为 Web 服务器返回了该页面，而我的 WebBrowser 已经消失了。是这样吗？知道如何预防吗？

谢谢！

编辑：当我关闭 WebBrowser 时，它已经包含在 IE 中显示的 HTML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T03:00:09.220

如果是弹窗。为什么不直接处理事件？你可以做这样的事情。

```
{...
  WebBrowser wb = new WebBrowser();
  wb.NewWindow += new System.ComponentModel.CancelEventHandler(wb_NewWindow);
}

void wb_NewWindow(object sender, System.ComponentModel.CancelEventArgs e)
{
    e.Cancel = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T18:51:53.267

那是因为页面没有加载成功。也许某些脚本无法被浏览器执行。在关闭`WebBrowser`或之前`Form`，`webBrowser`打开“零页”。做：

```
WebBrowser.url = new URl("about:blank"); 
```

然后关闭表单，关闭或处理浏览器....

# iphone - 在 requestFinished 方法中调用方法时崩溃？

> ID：10311301
> 
> 赞同：0
> 
> 时间：2012-04-25T07:35:34.270
> 
> 标签：iphone, ios, xcode, crash

当我从任何其他方法调用 [self MethodName] 时，它正在工作。

但是在调用“requestFinished”时，它崩溃了。

```
- (void)requestFinished:(ASIHTTPRequest *)request
{

    [self MethodName];  
} 
```

[ClassName MethodName] - 发送到已释放实例的消息。

有什么建议么。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T07:41:35.417

**在执行 requestFinished 的异步调用之前释放您的对象（self）**。

检查您是否保留对对象的引用足够长的时间 - 如果您创建对象而不保留引用，它将在循环结束时释放，并且稍后调用 requestFinished 方法时，该对象不再存在。

# eclipse - 自动依赖解析器eclipse java代码

> ID：10311303
> 
> 赞同：1
> 
> 时间：2012-04-25T07:35:46.820
> 
> 标签：eclipse, dependencies, resolver

我目前正在尝试使用大量不同的 Java 系统（称为语料库）进行研究。但是，在我可以使用所有这些系统之前，我必须一个一个地构建它们。这非常耗时，所以我想知道是否有人知道一种能够构建的好方法，并在必要时解决所有尚未找到的依赖项。这些依赖关系可能发生在语料库中的系统之间或语料库中的系统与可由 Eclipse 加载的插件之间。

我一直在寻找这种功能的堆栈溢出，但是如果你搜索依赖解析器，你只会遇到未解决的依赖问题。

任何人都知道这样的程序/插件是否存在？或者任何聪明的想法来导入所有的java项目并构建它们？

提前致谢。

丹尼斯

# c# - 数据网格未显示 xml 文件的子元素

> ID：10311305
> 
> 赞同：1
> 
> 时间：2012-04-25T07:35:54.663
> 
> 标签：c#, asp.net, xml

我正在执行将在线 xml 文件加载到数据网格中的任务，我完成了，但是在 xml 文件中有子节点，例如，

```
 <quantity>-54</quantity>
        <weight>1.000</weight>
        <categories>
            <category>Cradles &amp; Holders</category>
            <category>iPhone &amp; iPod Accessories</category>
            <category>FM Transmitters</category>
        </categories> 
```

将`<quantity>`,显示`<weight>`为列及其数据的数据网格，但截断节点并且也不显示数据。

我的问题是我如何添加它们或管理子节点以显示在数据网格中。

# javascript - 使用 JavaScript 绘制到 HTML5 画布时调整 .png 图像的大小

> ID：10311311
> 
> 赞同：3
> 
> 时间：2012-04-25T07:36:28.143
> 
> 标签：javascript, image, html5-canvas

我正在尝试使用 JavaScript 将一些 .png 图像绘制到 HTML5 画布上。我目前有一个功能可以将图像绘制到画布上，但是图像对于画布来说太大了，所以只显示了一部分。

我目前拥有的功能是：

```
function drawImage(x, y){
            var numberImage = new Image();
            numberImage.src = imageSource;
            context.drawImage(numberImage, x, y);

        } 
```

我使用以下方法调用该函数：

```
var image1 = new Image();

image1.onLoad = function(){
                context.drawImage(image1, 50, 50);
                };
            image1.src="1.png"; 
```

我只是想知道是否有人知道在将图像绘制到画布时调整图像大小的方法，这样我就可以只是缩略图大小的图像？

提前致谢！

我尝试在 drawImage 函数中添加参数来调整图像大小，但这似乎没有任何区别......

```
var image1 = new Image();

image1.onLoad = function(){
                context.drawImage(image1, 50, 50, 10, 10);
                };
            image1.src="1.png"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:37:42.253

您是否使用 CSS 来设置画布的大小？您需要在元素上设置高度和宽度，否则画布中的所有内容都将“意外”缩放。这可能是你的问题。

请参阅[奇怪的 HTML5 画布 drawImage 行为](https://stackoverflow.com/questions/3185631/strange-html5-canvas-drawimage-behaviour)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:45:47.637

我在您的代码中找不到问题......但我找到了！

你会讨厌这个：你写的是 image.onLoad 而不是 image.onload... 是的，**javascript 是区分大小写的**。:-)

正确的代码是：

```
var image1 = new Image();

image1.onload = function(){
                context.drawImage(image1, 50, 50, 10, 10);
                };
            image1.src="1.png"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:39:12.120

drawImage() 需要额外的宽度和高度参数：

```
 context.drawImage(image, x, y, width, heighT) 
```

[https://duckduckgo.com/?q=!mdn+drawimage](https://duckduckgo.com/?q=!mdn+drawimage)

# java - 我的 switch 语句上的错误消息？

> ID：10311312
> 
> 赞同：-3
> 
> 时间：2012-04-25T07:36:39.517
> 
> 标签：java, android, switch-statement

```
package walmart.namespace;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class WalmartActivity extends Activity {
        /** Called when the activity is first created. */

        EditText department;
        EditText name;
        Button search;
        String display;

        @Override
        public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);
                department = (EditText) findViewById(getResources().getIdentifier(
                                "etNum", "id", getPackageName()));
                name = (EditText) findViewById(getResources().getIdentifier("etName",
                                "id", getPackageName()));
                search = (Button) findViewById(getResources().getIdentifier(
                                "btnSearch", "id", getPackageName()));
                final String Display;
                switch (department) {
                case 1:
                        display = "food";
                case 2:
                        display = "Health and Beauty Aids";
                case 3:
                        display = "Stationary and Books";
                case 4:
                        display = "Paper Goods";
                case 5:
                        display = "Home Entertainment";
                case 6:
                        display = "Cameras and Film";
                case 7:
                        display = "Toys";
                case 8:
                        display = "Pets and Pet Supplies";
                case 9:
                        display = "Sporting Goods";
                case 10:
                        display = "Automotive";
                case 11:
                        display = "Hardware";
                case 12:
                        display = "Paint and Accessories";
                case 13:
                        display = "Household Chemicals";
                case 14:
                        display = "Housewares";
                case 15:
                        display = "Appliances";
                case 16:
                        display = "Lawn and Garden";
                case 17:
                        display = "Home Furnishings";
                case 18:
                        display = "Seasonal";
                case 19:
                        display = "Fabrics and Crafts";
                case 20:
                        display = "Domestic Goods";
                case 21:
                        display = "Curtains";
                case 22:
                        display = "Bedding";
                case 23:
                        display = "Mens";
                case 24:
                        display = "Boys";
                case 25:
                        display = "Shoes";
                case 26:
                        display = "Infants and Toddlers";
                case 27:
                        display = "Ladies Socks";
                case 28:
                        display = "Nylon Hosiery";
                case 29:
                        display = "Lingerie";
                case 30:
                        display = "Foundations";
                case 31:
                        display = "Handbags and Accessories";
                case 32:
                        display = "Jewlery";
                case 33:
                        display = "Girls";
                case 34:
                        display = "Ladies";
                case 36:
                        display = "Outerwear";
                case 39:
                        display = "Food Services";
                case 40:
                        display = "Pharmacy";
                case 46:
                        display = "Cosmetics";
                case 49:
                        display = "Optical";
                case 56:
                        display = "Horticulture";
                case 58:
                        display = "Income";
                case 77:
                        display = "Large Appliances";
                case 80:
                        display = "Service Deli";
                case 81:
                        display = "Bread";
                case 82:
                        display = "Impulse Buys";
                case 83:
                        display = "Seafood";
                case 84:
                        display = "Floral";
                case 85:
                        display = "1 Hour Photo";
                case 86:
                        display = "Fresh Flowers and Balloons";
                case 87:
                        display = "Wireless";
                case 89:
                        display = "Travel Center";
                case 90:
                        display = "Dairy";
                case 91:
                        display = "Frozen Foods";
                case 92:
                        display = "Grocery";
                case 93:
                        display = "Meats";
                case 94:
                        display = "Produce";
                case 95:
                        display = "DSD Grocery";
                case 96:
                        display = "Liqour";
                case 97:
                        display = "Processed Meats";
                case 98:
                        display = "Bakery";
                case 99:
                        display = "Store Use";
                }

                if (name.equals("Electronics")) {
                        display = "5";
                } else if (name.equals("candy")) {
                        display = ("1");
                } else if (name.equals("Tobacco")) {
                        display = ("1");
                } else if (name.equals("Makeup")) {
                        display = ("2");
                } else if (name.equals("Stationary")) {
                        display = ("3");
                } else if (name.equals("Books")) {
                        display = ("3");
                } else if (name.equals("Napkins")) {
                        display = ("4");
                } else if (name.equals("Paper Plates")) {
                        display = ("4");
                } else if (name.equals("Paper")) {
                        display = ("4");
                } else if (name.equals("Video Games")) {
                        display = ("5");
                } else if (name.equals("Movies")) {
                        display = ("5");
                } else if (name.equals("Cameras")) {
                        display = ("6");
                } else if (name.equals("Film")) {
                        display = ("6");
                } else if (name.equals("Photo")) {
                        display = ("6");
                } else if (name.equals("Toys")) {
                        display = ("7");
                } else if (name.equals("Fishing Rods")) {
                        display = ("9");
                } else if (name.equals("Sporting Equipment")) {
                        display = ("9");
                } else if (name.equals("Sporting Goods")) {
                        display = ("9");
                } else if (name.equals("Car Stereos")) {
                        display = ("10");
                } else if (name.equals("Automotive")) {
                        display = ("10");
                } else if (name.equals("Tools")) {
                        display = ("11");
                } else if (name.equals("Heaters")) {
                        display = ("11");
                } else if (name.equals("Fans")) {
                        display = ("11");
                } else if (name.equals("Hardware")) {
                        display = ("11");
                } else if (name.equals("Paint")) {
                        display = ("12");
                } else if (name.equals("Bleach")) {
                        display = ("13");
                } else if (name.equals("Ammonia")) {
                        display = ("13");
                } else if (name.equals("Chemicals")) {
                        display = ("13");
                } else if (name.equals("Towels")) {
                        display = ("14");
                } else if (name.equals("Kitchen Accessories")) {
                        display = ("14");
                } else if (name.equals("Towels")) {
                        display = ("14");
                } else if (name.equals("Appliances")) {
                        display = ("15");
                } else if (name.equals("Plants")) {
                        display = ("16");
                } else if (name.equals("Grills")) {
                        display = ("16");
                } else if (name.equals("Lawn & Garden")) {
                        display = ("16");
                } else if (name.equals("Furniture")) {
                        display = ("17");
                } else if (name.equals("Seasonal")) {
                        display = ("18");
                } else if (name.equals("Fabrics and Crafts")) {
                        display = ("19");
                } else if (name.equals("Domestics")) {
                        display = ("20");
                } else if (name.equals("Curtains")) {
                        display = ("21");
                } else if (name.equals("Bedding")) {
                        display = ("22");
                } else if (name.equals("Mens")) {
                        display = ("23");
                } else if (name.equals("Boys")) {
                        display = ("24");
                } else if (name.equals("Shoes")) {
                        display = ("25");
                } else if (name.equals("Infants")) {
                        display = ("26");
                } else if (name.equals("Ladies Socks")) {
                        display = ("27");
                } else if (name.equals("Pantyhose")) {
                        display = ("28");
                } else if (name.equals("Lingerie")) {
                        display = ("29");
                } else if (name.equals("Purses")) {
                        display = ("31");
                } else if (name.equals("Handbags")) {
                        display = ("31");
                } else if (name.equals("Jewelry")) {
                        display = ("32");
                } else if (name.equals("Girls")) {
                        display = ("33");
                } else if (name.equals("Maternity")) {
                        display = ("35");
                } else if (name.equals("Outerwear")) {
                        display = ("36");
                }

                else if (name.equals("Pharmacy")) {
                        display = ("40");

                } else if (name.equals("Cosmetics")) {
                        display = ("46");
                } else if (name.equals("Optical")) {
                        display = ("49");
                }

                else if (name.equals("Large Appliances")) {
                        display = ("77");
                } else if (name.equals("Deli")) {
                        display = ("80");
                } else if (name.equals("Bread")) {
                        display = ("81");
                } else if (name.equals("Seafood")) {
                        display = ("83");
                } else if (name.equals("Floral")) {
                        display = ("84");
                } else if (name.equals("One Hour Photo")) {
                        display = ("85");
                } else if (name.equals("Fresh Flowers")) {
                        display = ("86");

                } else if (name.equals("Cell Phones")) {
                        display = ("87");
                } else if (name.equals("Travel Center")) {
                        display = ("89");
                } else if (name.equals("Luggage")) {
                        display = ("89");
                } else if (name.equals("Dairy")) {
                        display = ("90");
                } else if (name.equals("Milk")) {
                        display = ("90");
                } else if (name.equals("Frozen Foods")) {
                        display = ("91");
                } else if (name.equals("Frozen")) {
                        display = ("91");
                } else if (name.equals("Grocery")) {
                        display = ("92");
                } else if (name.equals("Meats")) {
                        display = ("93");
                } else if (name.equals("Produce")) {
                        display = ("94");
                } else if (name.equals("Liquor")) {
                        display = ("96");
                } else if (name.equals("Bakery")) {
                        display = ("98");
                }

                department.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {
                                department.setText("");
                        }
                });
                name.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {
                                name.setText("");
                        }
                });
                search.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {

                        }
                });
        }
} 
```

我是 JAVA 的新手，但我在第 29 行的“部门”行收到此错误消息。

无法打开 EditText 类型的值。只允许可转换的 int 值或枚举常量。

我不知道如何解决这个问题。有接盘侠吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:42:48.943

在 Java 6 中，`switch`只需要`int`or `enum`。如果您想从 EditText 中获取文本，将其转换为`int`，然后在 上使用`switch`，那么您可以执行以下操作：

```
switch(Integer.parseInt(department.getText().toString())) // Be careful! This could throw an exception if the text doesn't contain a valid integer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T07:39:52.963

`department`不是 int 或 enum 值，因此无法打开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T07:41:58.873

正如错误所暗示的，您不能将整个对象传递给您的 switch 语句并期望它能够工作。您需要一些在一天结束时会解析为整数值的东西。

你可以在你的`EditText`类中有一些方法会返回一些整数，然后，你可以做类似的事情`switch(departement.getNumericalValue())`并使用 switch 来处理它，但除此之外，你不能使用你当前拥有的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T07:45:45.310

从 Java 7 开始，您可以切换字符串，但不能切换标准对象

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

*但是*，您使用的是android，因此仍然是java 6

由于您必须使用 6，因此您需要将字符串转换为整数

```
switch (Integer.parseInt(department.getText())){
    case 1:
         display = "food";
.... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T07:40:44.363

您应该使用[getText](http://developer.android.com/reference/android/widget/EditText.html#getText())从您的`EditText`字段中获取文本值并将其转换为数值..

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-25T07:42:54.147

用 switch 语句替换部门变量上的 switch 语句

> Integer.parseInt(department.getText().toString())

# html - 如何使图像映射可放置？

> ID：10311320
> 
> 赞同：1
> 
> 时间：2012-04-25T07:37:27.080
> 
> 标签：html, jquery-ui, drag-and-drop

我在互联网上看到了一个教程，并制作了下面的代码，它工作正常......

```
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>untitled</title>
<style type="text/css">
img{ cursor: pointer; }
</style>
<script src="jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery-ui.min.js"></script>
<script type="text/javascript">
function itemInSpot(drag_item,spot)
{
    var oldSpotItem = $(spot).find('img');

    var item = $('<img />');
    item.attr('src',drag_item.attr('src')).attr('class',drag_item.attr('class')).appendTo(spot).draggable({ revert: 'invalid' });
    drag_item.remove(); // remove the old object
}

$(document).ready(function() {
    $(".male,.middle,.female").draggable({ revert: 'invalid'});
    $('#allimages').droppable();
    $("#male").droppable({ accept: '.male'})
    $('#female').droppable({ accept: '.female'});
    $('#middle').droppable({ accept: '.middle'});
    $('#male,#female,#middle,#allimages').bind('drop', function(ev,ui) { itemInSpot(ui.draggable,this); });
});
</script>
</head>
<body>

<div id="male" style="width:150px; padding:10px; height:150px; margin:10px; border:1px solid black; float:left;" class="ui-droppable"></div>
<div id="middle" style="width:150px; padding:10px; height:150px; margin:10px; border:1px solid black; float:left;" class="ui-droppable"></div>
<div id="female" style="width:150px; height:150px; padding:10px; margin:10px; border:1px solid black; float:left;" class="ui-droppable"></div>

<div id="allimages" style="width:300px; height:80px; margin:10px; padding:15px; border:1px solid black; display:block; clear:both;" class="ui-droppable">
<img src="images/baby.png" class="male ui-draggable" alt="i don't know" style="position: relative; ">
<img src="images/marvin.gif" class="male ui-draggable" alt="i ama male" style="position: relative; ">
<img src="images/baby.png" class="middle ui-draggable" alt="i don't know" style="position: relative; ">
<img src="images/marvin.gif" class="male ui-draggable" alt="i am a male" style="position: relative; ">
<img src="images/girl.jpg" class="female ui-draggable" alt="i am a female" style="position: relative; "> 
```

但是当我用图像映射更改可拖动的 div 时，它不起作用......

```
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>untitled</title>
<style type="text/css">
img{ cursor: pointer; }
</style>
<script src="jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery-ui.min.js"></script>
<script type="text/javascript">
function itemInSpot(drag_item,spot)
{
    var oldSpotItem = $(spot).find('img');

    var item = $('<img />');
    item.attr('src',drag_item.attr('src')).attr('class',drag_item.attr('class')).appendTo(spot).draggable({ revert: 'invalid' });
    drag_item.remove(); // remove the old object
}

$(document).ready(function() {
    $(".male,.middle,.female").draggable({ revert: 'invalid'});
    $('#allimages').droppable();
    $("#male").droppable({ accept: '.male'})
    $('#female').droppable({ accept: '.female'});
    $('#middle').droppable({ accept: '.middle'});
    $('#male,#female,#middle,#allimages').bind('drop', function(ev,ui) { itemInSpot(ui.draggable,this); });
});
</script>
</head>
<body>

<img src="images/main_bg.gif" usemap="#gender" />

<map name="gender">
<area id="female" coords="320,20,290,10,250,4,200,4,160,12,120,27,80,50,56,70,45,83,40,90,27,108,14,135,4,170,2,195,3,225,15,270,33,302,53,325,73,345,93,358,113,370,128,377,148,384,148,384,178,393,208,396,238,397,258,395,288,390,308,385,338,373,347,367,317,347,300,332,280,312,266,292,256,272,248,252,243,230,242,230,240,210,241,185,244,165,249,145,257,125,272,101,282,87,290,79,307,62,316,54,328,44,336,39,347,33" shape="poly" class="ui-droppable">
<area id="middle"   coords="363,43,372,49,396,68,411,84,428,108,435,120,443,138,450,158,454,178,455,195,454,218,452,232,444,260,430,289,417,306,399,327,384,340,365,354,348,365,318,346,301,330,281,311,267,291,257,271,249,251,244,229,244,229,241,211,242,186,245,166,250,146,258,126,273,102,283,88,291,80,308,63,317,55,329,45,337,40,348,34" shape="poly" class="ui-droppable">
<area id="male"  coords="349,32,364,42,373,48,397,68,412,84,429,108,436,120,444,138,451,157,455,178,456,195,455,218,453,232,445,260,431,289,418,306,400,327,384,341,366,355,349,367,370,378,390,384,420,392,445,396,459,397,475,397,495,396,519,392,532,389,532,389,550,384,572,375,590,368,623,347,646,327,672,293,683,270,689,254,693,246,698,195,695,172,691,154,685,132,670,106,661,92,643,70,624,53,593,32,570,22,541,12,511,5,473,3,446,5,428,8,397,14" shape="poly" class="ui-droppable">
</map>

<div id="allimages" style="width:300px; height:80px; margin:10px; padding:15px; border:1px solid black; display:block; clear:both;" class="ui-droppable">
    <img src="images/baby.png" class="male ui-draggable" alt="i don't know" style="position: relative; ">
    <img src="images/marvin.gif" class="male ui-draggable" alt="i ama male" style="position: relative; ">
    <img src="images/baby.png" class="middle ui-draggable" alt="i don't know" style="position: relative; ">
    <img src="images/marvin.gif" class="male ui-draggable" alt="i am a male" style="position: relative; ">
    <img src="images/girl.jpg" class="female ui-draggable" alt="i am a female" style="position: relative; ">
</div>

</body></html> 
```

谁能帮我解决这个问题？？？

# c# - 使用预处理器指令 #if 在 Visual Studio 中调试 WindowsService

> ID：10311321
> 
> 赞同：2
> 
> 时间：2012-04-25T07:37:31.620
> 
> 标签：c#, visual-studio-2010, debugging, windows-services

当我使用VS2010 SP1时，我编写了一个windows服务。现在我想调试它而不安装它。所以我在 Program.cs main 方法中编写代码如下：

```
#if (DEBUG)
            ControllerNTService service =new ControllerNTService();
            Console.ReadLine();
#else
            System.ServiceProcess.ServiceBase[] ServicesToRun;
            ServicesToRun = new System.ServiceProcess.ServiceBase[] { new ControllerNTService() };
            System.ServiceProcess.ServiceBase.Run(ServicesToRun);
#endif 
```

我希望在 VS 2010 中调试 Windows 服务。但在 VS 中，下面的代码行显示为灰色。这意味着格雷码无效，对吗？（两条线是灰色的）

`ControllerNTService service =new ControllerNTService(); Console.ReadLine();`

如果代码有效，我想我可以遇到它们。

另一个问题，使用上面的代码，当我按F5调试它时，它显示它无法调试它，我需要先安装服务。

我希望有人遇到类似的问题来指导我。祝你今天过得愉快

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:51:48.773

您应该检查项目的活动构建配置。它需要设置为“调试”。（我认为根据您的描述将其设置为“RELEASE”）

您可以使用 Menu Build -> ConfigurationManager...-> 在对话框中将 Active Solution Configuratio 设置为“DEBUG”来更改活动的构建配置。

如果你想从命令行启动你的服务，你还需要启动它。因此，您应该向 ControllerNTService 添加一个 Start 方法，该方法在实例上调用受保护的 OnStart 方法

```
public class ControllerNTService{
   // additional service code

   internal void Start(string[] args) {
     base.OnStart(args);
   }

   internal void Stop() {
     base.OnStop();
   }
} 
```

在您的主要方法中，您应该在服务实例上调用 Start 。

```
ControllerNTService service =new ControllerNTService();
service.Start(args);
Console.ReadLine();
service.Stop(); 
```

除了启动之外，提供一个停止服务的方法（调用 procted 方法 OnStop）也是一个好主意。此方法在 Console.ReadLine 之后调用以停止服务。

# python - 在 Python 中使用尾随逗号连接或打印列表元素

> ID：10311323
> 
> 赞同：10
> 
> 时间：2012-04-25T07:37:35.770
> 
> 标签：python, string, list, join

我有一个清单：

```
>>> l = ['1', '2', '3', '4'] 
```

如果我使用 join 语句，

```
>>> s = ', '.join(l) 
```

会给我输出：

```
'1, 2, 3, 4' 
```

但是，如果我想要输出为：

```
'1, 2, 3, 4,' 
```

（我知道我可以使用字符串 concat 但我想知道一些更好的方法）

.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T07:41:53.017

字符串连接是最好的方法：

```
l = ['1', '2', '3', '4']  # original list
s = ', '.join(l) + ',' 
```

但您还有其他选择：

1.  映射到逗号结尾的字符串，然后加入：

    ```
    l = ['1', '2', '3', '4']  # original list
    s = ' '.join(map(lambda x: '%s,' % x, l)) 
    ```

2.  将空字符串附加到加入列表（不要修改原始`l`列表！）：

    ```
    l = ['1', '2', '3', '4']  # original list
    s = ', '.join(l + ['']).rstrip(' ') 
    ```

3.  使用字符串格式代替连接：

    ```
    l = ['1', '2', '3', '4']  # original list
    s = '%s,' % (', '.join(l)) 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T09:14:04.263

如果您使用的是 Python 3，则可以利用 print 内置函数：

```
print(*l, sep=', ', end=',') 
```

*   `*l`解包元素列表以将它们作为单独的参数传递给打印
*   `sep`是一个可选参数，设置为从元素打印的元素之间，这里我将它设置`', '`为您需要的空格
*   `end`是一个可选参数，将在结果打印字符串的 and 处推送。我将其设置为`','`没有空间以满足您的需要

您可以通过导入 print 函数从 Python 2.6 开始使用它

```
from __future__ import print_function 
```

然而，这样做有几个警告：

*   这是假设您要在 stdout 中输出结果字符串；或者您可以使用`file`可选参数将文件中的输出重定向到文件中
*   如果您使用的是 Python 2，则`__future__`导入可能会破坏您的代码兼容性，因此如果您的其余代码不兼容，您需要将代码隔离在单独的模块中。

长话短说，无论是这种方法还是其他建议的答案，都需要付出很多努力来避免只在结果字符串`+','`的末尾添加 a`join`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-25T07:40:58.310

为了`str.join()`工作，包含在可迭代对象（即此处的列表）中的元素本身必须是字符串。如果你想要一个尾随逗号，只需在列表末尾添加一个空字符串。

**编辑**：充实一下：

```
l = map(str, [1,2,3,4])
l.append('')
s = ','.join(l) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T07:39:42.463

要包含您显示的空格，您需要在分隔符字符串中有一个空格：

```
s = ", ".join(l) + "," 
```

或将其[设为 DRYer](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)：

```
sep = ", "
s = (sep.join(l) + sep).rstrip() 
```

在后者中，`rstrip()`仅用于删除最后的尾随空格（部分`sep`），因为这不在您想要的输出中。这不是最便宜的方法，但很清楚。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T07:41:04.013

首先，`','.join(l)`根本不起作用，因为它要求元素是字符串，而它们不是。

您可以修复它并添加尾随逗号，如下所示：

```
In [4]: ', '.join(map(str, l)) + ','
Out[4]: '1, 2, 3, 4,' 
```

我认为这是迄今为止最干净的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-25T08:46:02.397

如果你不想串联，事情可能会很糟糕......

```
>>> l = [1, 2, 3, 4]
>>> repr(l+[0])[1:-3] # or str
'1, 2, 3, 4,' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T13:18:33.240

这个 IDLE 会话是一个很好的例子，展示了如何将列表元素拉入带有尾随逗号的字符串中：

```
>>> l = ['1', '2', '3', '4']
>>> ' '.join(x+',' for x in l)
'1, 2, 3, 4,' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-31T16:09:07.423

不知道这是不是你要找的？它虽然有效。

l = [1,2,3,4]

对于 l 中的 num： print(str(num), end=", ")

# syncfusion - Syncfusion 网格分组控制扩展

> ID：10311325
> 
> 赞同：1
> 
> 时间：2012-04-25T07:37:43.010
> 
> 标签：syncfusion

我正在尝试通过扩展 GridGroupingControl 来创建自定义控件。网格在没有列描述符的页面中工作正常。要添加列描述符，我扩展了 GrdiColumnDescriptor 类并创建了我自己的控件，我试图将其添加到 aspx 中。

代码如下

*****网格*****

```
 public class CustomGrid : GridGroupingControl
    {
         public CustomGrid(): base() <br>
         {
         }
    } 
```

***网格列***

```
public class CustomGridColumnDescriptor : GridColumnDescriptor
{
public CustomGridColumnDescriptor ()
            : base()
        {
        }
} 
```

**ASPX**

```
<Custom:CustomGrid ....>
<TalbleDescriptor>
<Columns>
<Custom:CustomGridColumnDescriptor ....>
<Custom:CustomGridColumnDescriptor ....>
<Custom:CustomGridColumnDescriptor ....>
.... 
```

但是在实现时，我收到以下错误“ASIGridColumnDescriptor 类型不是预期的。使用 XmlInclude 或 SoapInclude 属性来指定静态未知的类型。” 你能帮我解决这个问题吗？

谢谢，文卡特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:12:33.550

要使用扩展列描述符，您需要同时扩展`ColumnsCollection`和`TableDescriptor`使用类似的那些。

```
<CustomTableDescriptor>
<CustomColumn>
<Custom:CustomGridColumnDescriptor ....>
<Custom:CustomGridColumnDescriptor ....>
<Custom:CustomGridColumnDescriptor ....> 
```

# visual-studio-2010 - 如何向 ADO.NET 实体数据模型设计器的上下文菜单添加命令？

> ID：10311327
> 
> 赞同：1
> 
> 时间：2012-04-25T07:37:48.140
> 
> 标签：visual-studio-2010, ado.net-entity-data-model, vspackage, visual-studio-extensions

基本上，我需要Visual Studio 包项目文件中的正确值`guid`和`id`属性，如下所示：`.vsct`

```
<Group guid="guidVSPackage1CmdSet" id="MyMenuGroup" priority="0x0600">
  <Parent guid="guidSHLMainMenu" id="IDM_VS_MENU_TOOLS"/>
</Group> 
```

以上内容直接来自默认项目模板，并在工具主菜单中添加了一个命令。我在哪里可以找到（或如何嗅探）ADO.NET 实体数据模型设计器上下文菜单的 guid:id 值，即带有“从数据库更新模型...”的菜单等等？

在你问之前：VS 2010 Entity Designer 中的 MEF 可扩展性选项不涵盖我的场景 - 我需要实现一个命令来在独立和 FK 映射关联之间进行转换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T10:39:43.887

知道了。您需要使用VS2010 SDK目录中的vsct.exe对Microsoft.Data.Entity.Design.Package.dll中已编译的命令表进行反编译（只需使用Reflector提取EntityDesigner.ctmenu，将其重命名为EntityDesigner.cto然后运行vsct.exe通过EntityDesigner.cto 的路径作为唯一参数）。要在打开上下文菜单时加载另一个 VSPackage，您至少需要使用`DynamicVisibility`标志声明它们，如下所示：

```
<Button guid="guidVSPackage1CmdSet" id="cmdidMyCommand"
        priority="0x0100" type="Button">
  <Parent guid="guidVSPackage1CmdSet" id="MyMenuGroup" />
  <Icon guid="guidImages" id="bmpPic1" />
  <CommandFlag>DynamicVisibility</CommandFlag>
  <Strings>
    <CommandName>cmdidMyCommand</CommandName>
    <ButtonText>My Command name</ButtonText>
  </Strings>
</Button> 
```

实际的 ID 是：

```
<GuidSymbol name="guidCmdSetEntityDesigner"
       value="{11ac0a76-365e-490d-abad-e44e52897c7d}">
  <IDSymbol name="menuidContext" value="0x00010000" /> 
```

# image - 使用 MFC 在按钮控件的表面上显示 JPEG 图像

> ID：10311337
> 
> 赞同：0
> 
> 时间：2012-04-25T07:38:47.657
> 
> 标签：image, mfc, jpeg

我需要在添加到 FormView 的按钮控件的表面上显示 JPEG 图像。我面临的问题是将 .jpeg 图像合并到 .rc 文件中。有些东西阻止我显示图像。我得到一个空白控件。（我当然将按钮设置为所有者绘制。）

我尝试在按钮控件上使用图片控件，但它仍然不会显示资源。

没有 MFC 功能包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:15:06.597

有几件事要检查/尝试。您是否使用 GDI+ 位图来绘制位图？如果没有，那可能是最好的方法。或者，我建议将[FreeImage](http://freeimage.sourceforge.net/)加载到 CBitmap 中，因为我一直发现它非常易于使用。其次，确保将 jpeg 作为“JPG”类型存​​储在 .rc 文件中。如果您尝试将其存储为 BITMAP 资源，那么您将遇到各种问题。

# c++ - 在命名空间内部或外部使用带有翻译单元的 using 声明？

> ID：10311339
> 
> 赞同：3
> 
> 时间：2012-04-25T07:38:52.477
> 
> 标签：c++, namespaces

[我在这里](http://www.gotw.ca/gotw/053.htm)阅读了有关名称空间的信息，但没有找到答案。

例如：

```
// example1.cpp
#include "example1.h"
#include <set>

namespace MyNamespace
{
    using std::set;

    void f() {};
}

// example2.cpp
#include "example2.h"
#include <set>

using std::set;

namespace MyNamespace
{
    void f() {};
} 
```

上面的两个例子都位于一些 x? 翻译单元，我的项目正在进行中，我觉得第二个例子更好，但不知道为什么，因为我在其他翻译单元`namespace MyNamespace` 中看不到导入的名称？`std::set`那么我为什么要打扰我是`using std::set`在 Mynamespace 外部还是内部调用呢？

你可以解释吗？另外，在什么时候将`std::set`被导入`Mynamespace`？你怎么知道？

**编辑：**

假设上面的示例是同一项目的 cpp 文件，那么在**MyNamespace**内部或外部导入**std::set**是等效的，因为其他 cpp 文件（位于同一命名空间中）无论如何都不会看到名称集（即使您输入**using namespace MyNamespace**，没有效果。如果你想使用 set ，**你必须在每个翻译单元中输入 using std::set**我是对的，为什么？**`#include<set>`**

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:27:34.457

请记住，与 C++ 相比，不同的源文件通常会产生不同的*翻译单元*。

非正式地，*翻译单元*是包含文件的结果，您可以使用`-E`（使用 gcc 和 clang）观察它以转储预处理的输出。

现在，翻译单元在编译阶段是相互独立的。因此，无论您在其中一个中做什么，对其他任何一个都绝对没有影响。这显然适用于`using`指令。

当然，还有*头*文件可以帮助大家分享。

要清楚：

```
// foo.hpp
#include <set>

namespace Foo { using std::set; }

// foo.cpp
#include "foo.hpp"

namespace Foo {
    using std::swap;

    // both set and swap are accessible without further qualification
}

// bar.cpp
#include "foo.hpp"

namespace Foo {

    // set is accessible without further qualification, swap is not.

} 
```

应该注意的是，最好避免在全局命名空间中引入名称。无论是新类型、函数`typedef`还是通过`using`指令。这样你就可以避免冲突:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:43:41.680

`std::set`首先仅将符号名称导入到`Mynamespace`while，
然后将其导入到编写 using 声明的当前命名空间（这恰好是您所示示例中的全局范围）。

您应该为编写 using 指令的位置而烦恼，因为符号名称随后仅在写入它的当前命名空间中导入，并且在其他范围内不可见。

我不明白问题的一部分，什么时候`std::set`将被导入，这与究竟是什么有关？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:46:36.957

在第一个示例中，来自 std::set 的对象、类和方法可以在您的命名空间 (MyNamespace) 中显式访问。

而在您的第二个示例中，来自 std::set 的对象、类和方法在任何地方都明确可用（在 MyNamespace 之内和之外）

一个例子，用伪代码（不要从字面上看）

```
//exmaple1.cpp
//includes here

using namespace std;

namespace MyNamespace {
  //an example using cout
  //you can call cout here explicitly, like this
  cout << "Some text to print to screen << endl;
}

namespace MyOtherNamespace
{
  //an example using cout
  //you can still call cout here explicitly, like this
  cout << "Some text to print to screen << endl;
}

//example2.cpp
//includes here

namespace MyNamespace {
  using namespace std;
  //an example using cout
  //you can call cout here explicitly, like this
  cout << "Some text to print to screen << endl;
}

namespace MyOtherNamespace
{
  //an example using cout
  //you can't call cout here explicitly, because it has only
  //been defined in MyNamespace
  std::cout << "Some text to print to screen << std::endl;
} 
```

我希望这会有所帮助******

# javascript - 关闭选项卡/浏览器之前的确认

> ID：10311341
> 
> 赞同：90
> 
> 时间：2012-04-25T07:38:58.687
> 
> 标签：javascript, html

如何在用户离开页面之前要求用户确认，就像在 gmail 中一样？

我在各个地方搜索了这个问题，但他们提到的只是使用 javascript **window.unload** & **window.onbeforeunload**。此外，它在大多数情况下都无法在 chrome 中工作，因为它被阻止了。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-04-25T07:41:02.140

试试这个：

```
<script>
window.onbeforeunload = function (e) {
    e = e || window.event;

    // For IE and Firefox prior to version 4
    if (e) {
        e.returnValue = 'Sure?';
    }

    // For Safari
    return 'Sure?';
};
</script> 
```

这是一个工作的[jsFiddle](http://jsfiddle.net/gopi1410/yWs7P/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-07-19T15:56:07.070

试试这个：

```
<script>
    window.onbeforeunload = function(e) {
       return 'Dialog text here.';
    };
</script> 
```

更多信息在这里[MDN](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload#Example)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-18T07:36:38.800

我将答案集的评论读为**Okay**。大多数用户都要求应该允许按钮和一些链接点击。在这里，将在现有代码中添加了另一行代码。

```
<script type="text/javascript">
  var hook = true;
  window.onbeforeunload = function() {
    if (hook) {

      return "Did you save your stuff?"
    }
  }
  function unhook() {
    hook=false;
  } 
```

调用 unhook() onClick 获取您想要允许的按钮和链接。例如

```
<a href="#" onClick="unhook()">This link will allow navigation</a> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-04-24T08:16:00.040

**2020年最短的解决方案**（给那些不需要支持IE的快乐的人）

*在 Chrome、Firefox、Safari 中测试。*

```
function onBeforeUnload(e) {
    if (thereAreUnsavedChanges()) {
        e.preventDefault();
        e.returnValue = '';
        return;
    }

    delete e['returnValue'];
}

window.addEventListener('beforeunload', onBeforeUnload); 
```

实际上，没有一种现代浏览器（Chrome、Firefox、Safari）会向用户显示“返回值”作为问题。相反，它们会显示自己的确认文本（取决于浏览器）。但是我们仍然需要返回一些（甚至是空的）字符串来触发 Chrome 上的确认。

更多解释请参见 MDN[此处](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload)和[此处](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Multiple_identical_event_listeners)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-19T12:10:26.080

**简单地**

```
function goodbye(e) {
        if(!e) e = window.event;
        //e.cancelBubble is supported by IE - this will kill the bubbling process.
        e.cancelBubble = true;
        e.returnValue = 'You sure you want to leave?'; //This is displayed on the dialog

        //e.stopPropagation works in Firefox.
        if (e.stopPropagation) {
            e.stopPropagation();
            e.preventDefault();
        }
    }
window.onbeforeunload=goodbye; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-06T12:29:03.973

如果您想根据情况询问：

```
var ask = true
window.onbeforeunload = function (e) {
    if(!ask) return null
    e = e || window.event;
    //old browsers
    if (e) {e.returnValue = 'Sure?';}
    //safari, chrome(chrome ignores text)
    return 'Sure?';
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-09T21:39:46.693

1.  如果没有选择任何内容，假设我想关闭一个窗口
2.  我想用选定的东西关闭窗口，但不提示我。
3.  我想关闭一个窗口，但选择了一些东西提示我。

对于这三个条件，我在以下代码中进行了很多搜索，做出了适合我需要的更改，希望对其他人有所帮助。如果我想弹出提示“true”，则询问是一个键，否则会提示您关闭窗口。假设我想打印我的文档并重定向我的页面，询问将是错误的并且不会有提示。假设您的页面有数据然后检查条件是我的情况如果小计为零则值小计然后没有提示其他明智的提示我您的页面中有一些东西。

```
<pre>
    var ask = true;
    window.onbeforeunload = function(e) {
       if (!ask) return null
       var subtotal = $('#lblgtwithsgst').text();
         if (subtotal != '0') {
          e = e || window.event;
          //old browsers
            if (e) {
             e.returnValue = 'Sure?';
            }
            //safari, chrome(chrome ignores text)
            return 'Sure?';
         }  
      }
      $('#btnPrint').click(function(){
        ask = false;
        ///print your doc no prompt if ask is false;
      )}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-09T11:28:50.507

```
// use jquery version older than 1.6
var preventUnloadPrompt;
var messageBeforeUnload =
  'my message here - Are you sure you want to leave this page?';
$('a').live('click', function () {
  preventUnloadPrompt = true;
});
$('form').live('submit', function () {
  preventUnloadPrompt = true;
});

$(window).bind('beforeunload', function (e) {
  var rval;
  if (preventUnloadPrompt) {
    return;
  } else {
    return messageBeforeUnload;
  }

  return rval;
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-10T04:56:10.873

对于 Angular，更改组件表单名称并粘贴到需要显示警报的组件中。

```
 @HostListener('window:beforeunload', ['$event'])
  beforeunloadHandler(event) {
    return !this.form.dirty;
  } 
```

# java - 如何在JSF中实现鼠标中键单击commandButtons？

> ID：10311342
> 
> 赞同：1
> 
> 时间：2012-04-25T07:39:09.170
> 
> 标签：java, jsf, jakarta-ee, jsf-2

中键似乎不适用于`commandButton`JSF。至少不像预期的那样 - 这将在新选项卡中打开操作的结果。没有触发提交/操作。

mouseup 和 mousedown 事件似乎可以正常工作，因为按下按钮的“动画”正在中间单击。

中`commandLink`按预期工作。

我将如何为我的 实现“正常”的中间点击行为`commandButtons`？在 mouseup/down 事件中，我如何知道单击了哪个按钮？

谢谢你。

我正在使用 JSF 2 和 Mojarra 2.1.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:58:30.250

首先，没有“正常”的中间点击行为。这在 HTML 中未指定，默认行为取决于浏览器。

`onclick`至于具体问题，你可以在活动中抓住它。在中间单击`event.which`将返回`2`。然后，您可以将表单的目标设置`_blank`为让它提交到新窗口。

```
 onclick="if (event.which == 2) form.target = '_blank'" 
```

同样，这不适用于某些浏览器。

# c# - 重复的 AssemblyVersion 属性

> ID：10311347
> 
> 赞同：225
> 
> 时间：2012-04-25T07:39:18.843
> 
> 标签：c#, compiler-errors

我有一个项目在编译时产生以下错误：

> 错误 CS0579：重复的“AssemblyVersion”属性

我检查了文件`AssemblyInfo.cs`，看起来那里没有重复。

我[在 MSDN 上找到了这篇文章，](http://social.msdn.microsoft.com/Forums/pl-PL/vsgatk/thread/8671bdff-9b16-4b49-ba9e-227cc4df31b2)它解决了类似的问题，并且按照本文中的建议也解决了这个问题。

谁能告诉我这里发生了什么？是否仅在两个或多个项目具有相似名称的类的情况下才会发生？或者是别的什么？

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2017-06-12T15:05:17.657

从**Visual Studio 2017**开始，继续使用该`AssemblyInfo.cs`文件的另一种解决方案是关闭自动程序集信息生成，如下所示：

```
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
  </PropertyGroup>
</Project> 
```

我个人觉得它对于需要同时支持 .NET Framework 和 .NET Standard 的项目非常有用。

* * *

## 回答 #2

> 赞同：173
> 
> 时间：2012-04-25T09:15:12.650

我过去也遇到过这个问题，所以我假设你的构建过程提供了单独的程序集信息来提供版本控制。这会导致重复，因为您的项目在`AssemblyInfo.cs`文件中也有该信息。所以删除文件，我认为它应该可以工作。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-06-25T21:46:48.777

我有同样的错误，它在Assembly Vesrion和Assembly File Version下划线，所以阅读Luqi的答案我只是将它们添加为评论，错误就解决了

```
// AssemblyVersion is the CLR version. Change this only when making breaking    changes
//[assembly: AssemblyVersion("3.1.*")]
// AssemblyFileVersion should ideally be changed with each build, and should help identify the origin of a build
//[assembly: AssemblyFileVersion("3.1.0.0")] 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-09-07T11:57:22.530

将旧项目转换为 .NET Core 时，AssemblyInfo.cs 中的大部分信息现在可以在项目本身上设置。打开项目属性并选择 Package 选项卡以查看新设置。

[Eric L. Anderson 的帖子“重复 'System.Reflection.AssemblyCompanyAttribute' 属性”](https://elanderson.net/2017/06/duplicate-system-reflection-assemblycompanyattribute-attribute/)描述 了 3 个选项：

*   从 AssemblyInfo.cs 文件中删除冲突项，
*   完全删除文件或
*   禁用 GenerateAssemblyInfo （正如[Serge Semenov 在另一个答案](https://stackoverflow.com/questions/10311347/duplicate-assemblyversion-attribute/44502724#44502724)中所建议的那样）

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-12-12T12:25:14.497

就我而言，项目中的一个子文件夹是它自己的项目文件夹：

*   文件系统：

    *   c:\projects\webapi\wepapi.csproj
    *   c:\projects\webapi\tests\wepapitests.csproj
*   解决方案

    *   webapi（文件夹和项目）
        *   测试（文件夹）
    *   测试（文件夹和项目）

然后我不得不从“webapi”项目中删除子文件夹“tests”。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-02-26T00:56:34.927

就我而言，编译期间生成的一些临时 *.cs 文件被意外添加到项目中。

这些文件来自`obj\Debug`目录，因此绝对不应该将它们添加到解决方案中。`*.cs`通配符有点疯狂并错误地添加了它们。

删除这些文件解决了这个问题。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2020-04-16T12:11:04.317

这里的项目中必须已经有一个 AssemblyInfo.cs 文件： [![在此处输入图像描述](../Images/8fdcd8d3533f0a1762436e65453092e9.png)](https://i.stack.imgur.com/kztrT.png)

解决方法： - 删除任意一个 AssemblyInfo.cs

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2019-01-30T10:20:39.963

当我尝试添加 GitVersion 工具来更新我在 AssemblyInfo.cs 中的版本时，我遇到了同样的情况。使用 VS2017 和 .NET Core 项目。所以我只是混合了两个世界。我的 AssemblyInfo.cs 仅包含由 GitVersion 工具生成的版本信息，我的 csproj 包含剩余的东西。请注意我不使用`<GenerateAssemblyInfo>false</GenerateAssemblyInfo>`我只使用与版本相关的属性（见下文）。[此处为 AssemblyInfo 属性](https://docs.microsoft.com/en-us/dotnet/core/tools/csproj#assemblyinfo-properties)的更多详细信息。

**装配信息.cs**

```
[assembly: AssemblyVersion("0.2.1.0")]
[assembly: AssemblyFileVersion("0.2.1.0")]
[assembly: AssemblyInformationalVersion("0.2.1+13.Branch.master.Sha.119c35af0f529e92e0f75a5e6d8373912d457818")] 
```

**my.csproj**包含所有与其他程序集相关的属性：

```
<PropertyGroup>
   ...
  <Company>SOME Company </Company>
  <Authors>Some Authors</Authors>
  <Product>SOME Product</Product>
   ...
  <GenerateAssemblyVersionAttribute>false</GenerateAssemblyVersionAttribute>
  <GenerateAssemblyFileVersionAttribute>false</GenerateAssemblyFileVersionAttribute>
  <GenerateAssemblyInformationalVersionAttribute>false</GenerateAssemblyInformationalVersionAttribute>
</PropertyGroup> 
```

[![csproj 映射到项目属性中的包选项卡](../Images/e4051e46aa41b5aceeada31d0f43646c.png)](https://i.stack.imgur.com/edTIC.png)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-01-17T12:15:58.793

对我来说，AssembyInfo.cs 和 SolutionInfo.cs 有不同的值。所以也要检查这些文件。我刚刚从其中一个中删除了版本。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-03-23T16:09:07.493

发生我的错误是因为不知何故，在我的控制器文件夹中创建了一个 obj 文件夹。只需在您的应用程序中搜索您的 Assemblyinfo.cs 中的一行。某处可能有重复。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-10-19T07:56:57.813

将核心升级到 VS2017 时的另一个解决方案是在 properties\assemblyinfo.cs 文件中删除它们。

因为它们现在存储在项目中。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-12-25T02:10:04.200

如果我在 Visual Studio 2017 中编译项目然后我尝试使用命令行命令“dotnet run”使用 .NET Core 重建和运行它，这通常会发生在我身上。

只需删除所有“bin”和“obj”文件夹 - 都在“ClientApp”内和直接在项目文件夹中 - 允许 .NET Core 命令“dotnet run”重新构建并成功运行。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-01-22T19:36:12.827

我最近遇到了这个问题，没有对源代码进行任何更改，但是在尝试了一些新的项目参考之后。即使在还原分支中的所有更改后，我也进入了出现此错误的状态。

清理分支为我解决了这个问题：

`git clean -xfd`

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-07-15T16:55:14.097

您可以删除**bin**和**obj**文件并清除项目的缓存。我的问题由此得到解决。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-01-29T16:38:32.197

我在 msdn 上找到了这个答案，它解释了将文件标记为内容，然后复制到输出 = 如果较新。请参阅下面的文章：

[https://social.msdn.microsoft.com/Forums/en-US/8671bdff-9b16-4b49-ba9e-227cc4df31b2/compile-error-cs0579-duplicate-assemblyversion-attribute?forum=vsgatk](https://social.msdn.microsoft.com/Forums/en-US/8671bdff-9b16-4b49-ba9e-227cc4df31b2/compile-error-cs0579-duplicate-assemblyversion-attribute?forum=vsgatk)

生长激素

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-06-09T20:46:17.577

编辑您的 AssemblyInfo.cs 和 #if !NETCOREAPP3_0 ... #endif

```
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
// General Information about an assembly is controlled through the following
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.

#if !NETCOREAPP3_0  

[assembly: AssemblyTitle(".Net Core Testing")]
[assembly: AssemblyDescription(".Net Core")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("")]
[assembly: AssemblyProduct(".Net Core")]
[assembly: AssemblyCopyright("Copyright ©")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Setting ComVisible to false makes the types in this assembly not visible
// to COM components.  If you need to access a type in this assembly from
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(false)]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("000b119c-2445-4977-8604-d7a736003d34")]

// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")]

#endif 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-10-17T08:46:15.750

当我将 2 个项目放在同一个目录中时，我得到了这个错误。如果我有一个包含解决方案的目录，并且我在其中放置了一个单独的 Web 和 Data 目录，则编译正确。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-11-12T00:14:28.407

当我的主项目与解决方案位于同一文件夹中时，我遇到了这个问题，然后我在位于子文件夹中的同一解决方案中有一个单独的项目，并且该单独的项目使用主项目作为参考。这导致主项目检测到创建重复引用的子文件夹 bin 和 obj 文件夹。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-01-24T14:19:00.773

如果在 Azure DevOps 上的构建管道中遇到此问题，请尝试在 AssembyInfo.cs 文件属性中将构建操作作为“内容”并复制到等于“如果较新则复制”的输出目录。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2022-01-25T19:35:36.973

创建*项目*时，Visual Studio 会对其进行设置以编译并生成相应的*程序集*。每个项目生成 1 个程序集，因此每个项目都有相应的*程序集配置*来生成其程序集。

问题是当您创建*多个项目*时，*每个项目都可以生成自己的程序集*，然后*将其中一个项目包含在另一个项目中*。

在这种情况下，Visual Studio 会感到困惑，不知道要使用哪个配置文件来*为项目生成单个程序集——它在**包含*的项目中找到第二个程序集配置并说“嘿，重复！你已经给了我两套指令来生成我的程序集！”

但有时您仍然希望*包含*的项目能够自己生成程序集，但当它被包含在另一个项目中时则不然。

为此，一种解决方案是将条件定义添加到*包含*项目（在*项目 Properties*中找到）。然后更改*包含*项目中的程序集配置以查找此条件定义。如果它是由*包含*项目定义的，那么配置可以跳过它的内容——这将导致 VS 只找到 1 个配置——来自*包含*项目的那个——问题解决了！

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-03-16T10:38:54.343

我的错误是我还在我的项目中引用了另一个文件，该文件也包含属性“AssemblyVersion”的值。我从其中一个文件中删除了该属性，它现在可以正常工作。

关键是确保在项目的任何文件中都不会多次声明此值。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-02-12T01:43:10.510

```
obj\Debug\netstandard2.0\PacktLibrary.AssemblyInfo.cs(15,12): error CS0579: Duplicate 'System.Reflection.AssemblyConfigurationAttribute' attribute [c:\Users\John_Tosh1\Documents\C#8.0and.NetCore3.0\Code\Chapter05\PacktLibrary\PacktLibrary.csproj]
obj\Debug\netstandard2.0\PacktLibrary.AssemblyInfo.cs(16,12): error CS0579: Duplicate 'System.Reflection.AssemblyFileVersionAttribute' attribute [c:\Users\John_Tosh1\Documents\C#8.0and.NetCore3.0\Code\Chapter05\PacktLibrary\PacktLibrary.csproj]
obj\Debug\netstandard2.0\PacktLibrary.AssemblyInfo.cs(17,12): error CS0579: Duplicate 'System.Reflection.AssemblyInformationalVersionAttribute' attribute [c:\Users\John_Tosh1\Documents\C#8.0and.NetCore3.0\Code\Chapter05\PacktLibrary\PacktLibrary.csproj]
obj\Debug\netstandard2.0\PacktLibrary.AssemblyInfo.cs(18,12): error CS0579: Duplicate 'System.Reflection.AssemblyProductAttribute' attribute [c:\Users\John_Tosh1\Documents\C#8.0and.NetCore3.0\Code\Chapter05\PacktLibrary\PacktLibrary.csproj]
obj\Debug\netstandard2.0\PacktLibrary.AssemblyInfo.cs(19,12): error CS0579: Duplicate 'System.Reflection.AssemblyTitleAttribute' attribute [c:\Users\John_Tosh1\Documents\C#8.0and.NetCore3.0\Code\Chapter05\PacktLibrary\PacktLibrary.csproj]
obj\Debug\netstandard2.0\PacktLibrary.AssemblyInfo.cs(20,12): error CS0579: Duplicate 'System.Reflection.AssemblyVersionAttribute' attribute [c:\Users\John_Tosh1\Documents\C#8.0and.NetCore3.0\Code\Chapter05\PacktLibrary\PacktLibrary.csproj] 
```

我相信我的库文件夹因无意创建另一个类库而损坏。我删除了库和所有相关文件，但问题仍然存在。我通过删除目录中的所有 bin 和 obj 文件夹找到了解决方法。之前的构建没问题，但找到了一个具有相同 assemblyinfo.cs 文件的子文件夹。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-04-01T12:44:06.203

此问题是 VS 2017 特有的参考冲突。

我通过简单地注释掉第 7 -14 行以及 AssemblyInfo.cs 页面底部的程序集版本代码来解决了同样的错误

它删除了所有重复的引用，并且项目能够再次构建。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-12-24T23:38:46.620

从 .NET Framework 切换到 .NET Core 后，我收到了错误消息。我的 Visual Studio 解决方案中有 2 个类库项目。我意识到其中一个项目有一个名为的文件`AssemblyInfo.cs`，而另一个项目没有该文件。该文件位于`Properties`文件夹下。我只是删除了 Properties 文件夹，一切正常。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-02-12T14:26:27.267

我一直在努力解决这个问题，但我的问题更容易解决。

我已将 OBJ 文件夹复制到“OBJ___”名称以进行一些编译测试。

所以，我不知道为什么，这个文件夹也被编译了，创建了程序集属性重复。

我只是删除了“OBJ___”文件夹并可以成功编译。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-09-10T14:07:23.663

我刚刚通过将 repo 文件夹重命名为 re-cloning repo 来帮助团队成员解决了这个问题。这只是一个开发人员的问题，因为团队中的其他人都能够构建*master*而不会遇到此错误，因此我们知道问题不是源代码问题。

我们确实尝试删除 bin 和 obj 文件夹并做了一个`git clean -xfd`，但这些都没有解决问题。在这种情况下，从一个干净的 repo 副本重新开始就可以了。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-10-02T21:10:22.320

我也一直在努力解决这个问题。在我的情况下，我将解决方案和项目放在同一个地方。所以我遇到了问题。在我选择了一个解决方案文件夹并将项目放在这个解决方案中后，它可以正常工作。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-10-18T19:56:35.180

对于遇到此问题的其他任何人，我为一位同事进行了诊断，她声称她没有更改任何内容，但结果是她不小心复制了一个代码文件夹并且没有意识到这一点。所以这很有趣。

教训：假设每个人都在撒谎。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-11-02T13:51:20.930

就我而言，我的一位同事删除了一个用于测试目的的控制台应用程序，它与我们的 Api 放在同一目录中，然后提交给 Git。当我后来从 Git 中拉出时，控制台应用程序本身当然消失了，但它的 bin 和 obj 文件夹仍然存在，导致 AssemblyInfo.cs 文件同时存在于根应用程序目录和旧控制台应用程序的子目录中。只需删除旧控制台应用程序的 bin 和 obj 文件夹即可解决问题。

ASP.NET 核心 3.1

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-12-23T07:17:36.883

我收到这些错误是因为我尝试将 obj 文件夹临时重命名为 obj_，然后它会自动包含在项目中。然后里面的assembly.cs就开始和后面生成的obj文件夹中的那个对了。

# drupal-7 - 呈现分类页面 D7 的自定义字段

> ID：10311351
> 
> 赞同：2
> 
> 时间：2012-04-25T07:39:20.717
> 
> 标签：drupal-7, taxonomy

假设我有一个名为“职位”的词汇表。该词汇表包含几个自定义字段。

```
"JOB TITLES" (Vocabulary)
 |
 |-- name (Default Field)
 |-- description (Default Field)
 |-- reference_url (Custom Field)
 |-- help_link (Custom Field) 
```

上面的词汇表包含 2 个自定义字段，我可以在添加或编辑分类术语时看到它们。

我的问题是，如何在 page.tpl 上使用它们？如何使用 hook_page_preprocess() 在 template.php 上访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T08:25:44.667

为了在术语页面底部显示文本，我在分类词汇表中添加了 2 个新字段（“field_term_heading”和“field_term_footer”）。我发现它创建了一个相当笨拙的嵌套数组。这是我添加到 page.tpl.php 以显示它的内容。

```
<?php if ( arg(0) == 'taxonomy' && arg(1) == 'term' && is_numeric(arg(2)) ): ?>

    <?php $page_term = taxonomy_term_load(arg(2));
        if ($page_term->field_footer_heading) {
        print '<h2 class="block-title">'.($page_term->field_footer_heading['und'][0]['safe_value']).'</h2>';
        }
    ?>
    <?php $page_term = taxonomy_term_load(arg(2));
        if ($page_term->field_footer_text) {
        print '<div class="content">'.($page_term->field_footer_text['und'][0]['safe_value']).'</div>';
        }
    ?>

    <?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:43:06.380

不幸的是，我还没有找到一个好的解决方案。我**暂时**这样解决了：

**自定义字段：**

```
$output = (isset($term->field_FIELDNAME['und'][0]['safe_value']))? $term->field_FIELDNAME['und'][0]['safe_value'] : '' ; 
```

**术语说明：**

```
$output = filter_xss_admin($term->description); 
```

**其中 $term 是：**

```
$tid = (int)arg(2);
$term = taxonomy_term_load($tid); 
```

我再说一遍，**上面的自定义字段解决方案不是最佳实践，而且它也是不可预测的**，所以请谨慎使用。

# javascript - 为什么 dojo.number.format 在不同的浏览器中会返回不同的结果？

> ID：10311357
> 
> 赞同：2
> 
> 时间：2012-04-25T07:40:15.363
> 
> 标签：javascript, dojo, floating-point, rounding

以下代码

```
dojo.number.format(500.005, {places:2}) 
```

在 Internet Explorer 8 中返回 500.01，在 Firefox 中返回 500.00。

造成这种差异的原因是什么？dojo.number.format 在这里做了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:14:12.670

`dojo.number.round`在其文档中有以下评论：

> 注意：可能会出现浮点错误。有关实验性解决方法，请参见 dojox.math.round。

# javascript - 访问具有空格的 JSON 对象键

> ID：10311361
> 
> 赞同：114
> 
> 时间：2012-04-25T07:40:19.903
> 
> 标签：javascript, json

我有以下 json 对象：

```
{ "id": "109",
  "No. of interfaces": "4" } 
```

以下几行工作正常：

```
alert(obj.id);
alert(obj["id"]); 
```

但是如果键有空格，那么我无法访问它们的值，例如

```
alert(obj."No. of interfaces"); //Syntax error 
```

如何访问键名有空格的值？甚至可能吗？

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-04-25T07:42:37.093

做到这一点的方法是通过括号表示法。

```
var test = {
    "id": "109",
    "No. of interfaces": "4"
}
alert(test["No. of interfaces"]);
```

有关更多信息，请在此处阅读：

*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-01-10T09:40:56.320

Pardeep Jain 的答案对静态数据很有用，但是如果我们在 JSON 中有一个数组呢？

例如，我们有 i 个值并获取 id 字段的值

```
alert(obj[i].id); //works! 
```

但是如果我们需要带空格的键怎么办？

在这种情况下，以下构造可以提供帮助（[] 块之间没有点）：

```
alert(obj[i]["No. of interfaces"]); //works too! 
```

# asp.net - 打开 .ASPX 文件？

> ID：10311363
> 
> 赞同：1
> 
> 时间：2012-04-25T07:40:27.017
> 
> 标签：asp.net, vb.net, visual-studio-2010

我一直在为一个大学项目开发​​一个在 ASP.NET、VB.NET 和 SQL 服务器中具有数据库访问权限的网站。我已经能够构建和测试我的所有表单，并且它们都可以正常工作，所以现在是时候将我的工作提交到 CD 上了。有人告诉我，我必须向讲师解释如何打开文件/项目，但我去测试是否打开了默认页面（使用 Firefox），但不幸的是它们无法打开，我收到以下错误：

```
XML Parsing Error: not well-formed
Location: file:///C:/Users/NAME/Visual%20Studio%202010/WebSites/FOLDER/Default.aspx

Line Number 1, Column 2:<%@ Page Title="Home Page" Language="VB" MasterPageFile="~/Site.Master" AutoEventWireup="false"
-^ 
```

有什么方法可以让我在网络浏览器中从 CD 中打开文件（显然是在修改代码中的文件位置之后）？制作一个带有指向 ASPX 页面的超链接的极其简单的 HTML 页面会起作用，还是需要“构建”/“编译”？

我一直在使用 Microsoft 的 Visual Studio Web Developer 2010 Express 来编写和构建我的代码，然后在 Firefox 中打开页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:56:43.313

如果不安装 IIS Express 或将网站放入用户 inetpub/wwwroot 文件夹，您将无法打开这些文件，因为它们需要服务器来编译和运行它们。

即使这样，他们也需要在他们的机器上安装您用于开发网站的 .net 版本。

在此处查看此问题以获取更多信息 [如何将 ASP.NET 页面部署到服务器并运行？</a>](https://stackoverflow.com/questions/1753733/how-to-run-aspx-page)

[](https://stackoverflow.com/questions/1753733/how-to-run-aspx-page)

[要获得 Lecturer 的额外奖励，请考虑将您的网站部署到免费托管服务器。也许](https://stackoverflow.com/questions/1753733/how-to-run-aspx-page)[https://appharbor.com/](https://appharbor.com/)这样您就可以发送文件，还可以链接到处于工作状态的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:58:10.953

尝试[修复“XML Parsing Error: not well-formed Line Number 1, Column 2”错误](http://mycodetrip.com/2007/03/26/fix-for-xml-parsing-error-not-well-formed-line-number-1-column-2-error_36/)

# routing - 操作“makebook/index”不存在

> ID：10311368
> 
> 赞同：0
> 
> 时间：2012-04-25T07:40:36.150
> 
> 标签：routing, symfony-1.4

我有这个错误，但我创建了一个动作类，我认为我的问题是模块生成。我遵循这个方法。用户单击链接自动重定向主页。

```
./symfony generate:module frontend article 
```

我怎么解决这个问题？

```
class makebookActions extends sfActions
{
  public function executeIndex(sfWebRequest $request)
  {
    $personalId = $request->getParameter('personal_id', $this->getUser()->getAttribute('detail')->getId());
    $this->personal = Doctrine::getTable('Personal')->find($personalId);

    //if user or his friend viewing makebook showe them all
    if ($this->getUser()->getAttribute('detail')->getId() == $personalId ||
        $this->getUser()->getAttribute('detail')->isFriend($personalId))
    {
      $this->makebook = $this->personal->getmakebook();
    }
    else
    {
      $this->makebook = $this->personal->getmakebook();
    }

    $this->countries = Doctrine::getTable("Country")->findAll();
  }
} 
```

我的路由.yml：

```
makebook:
  url:  /makebook
  param: { module: makebook, action: index }
most_recent: 
  url:  /makebook/most_recent
  param: { module: makebook, action: mostrecent }
makebook_view: 
  url: /makebook/view
  param: { module: makebook, action: view }
makebook_new:
  url:  /makebook/new
  param: { module: makebook, action: new }
makebook_edit:
  url:  /makebook/edit
  param: { module: makebook, action: edit } 
```

这是我的堆栈跟踪：

```
#0 /home/whatplan/public_html/apps/frontend/modules/main/actions/actions.class.php(84): sfAction->redirect('@personal_homep...')
#1 /home/whatplan/public_html/cache/frontend/prod/config/config_core_compile.yml.php(459): mainActions->executeSignin(Object(sfWebRequest))
#2 /home/whatplan/public_html/cache/frontend/prod/config/config_core_compile.yml.php(952): sfActions->execute(Object(sfWebRequest))
#3 /home/whatplan/public_html/cache/frontend/prod/config/config_core_compile.yml.php(947): sfExecutionFilter->executeAction(Object(mainActions))
#4 /home/whatplan/public_html/cache/frontend/prod/config/config_core_compile.yml.php(933): sfExecutionFilter->handleAction(Object(sfFilterChain), Object(mainActions)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:49:35.473

我从您的堆栈跟踪（modules/main/actions/actions.class.php）中估计模块名称是“main”，因此操作文件类应该是 mainActions - 您需要重命名 className 或 moduleName 以引入一致性

# jakarta-ee - 任何tomcat版本支持 web.xml 中 URL 映射的标记

> ID：10311373
> 
> 赞同：1
> 
> 时间：2012-04-25T07:40:58.517
> 
> 标签：jakarta-ee, tomcat, servlets

谁能告诉我是否有任何 Tomcat 版本支持 web.xml 中的 URL 映射标签？Resin 支持它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:07:35.733

不，这是任何 Apache Tomcat 版本都不支持的容器特定功能。

# c - 现在在 C 中管道 IPC

> ID：10311379
> 
> 赞同：0
> 
> 时间：2012-04-25T07:41:09.193
> 
> 标签：c, ipc, pipe

为了自学，我想用管道连接 2 个程序。第一个程序接受输入，将其置顶并打印到屏幕上，在此示例中，第一个程序被执行但没有输入输出可能。我必须如何更改第二个程序中的管道 close() 函数才能获得结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:54:34.530

写入后立即关闭输出管道，或在每个字符写入后将第一个程序修改为 fflush(stdout)（因为 std(in|out) 第二个程序的缓冲性质卡在读取上，第一个程序等待输入，因为它没有得到 EOF - 第二个程序的 close() 将 EOF 发送到第一个，第一个终止，并在终止时自动刷新标准输出）。

```
int main(int argc, char** argv) {
  pid_t pid;
  int fi[2];
  int fo[2];

  char c;

  if (pipe(fi) < 0)
    perror("pipe");
  if (pipe(fo) < 0)
    perror("pipe");

  switch ( fork() ) {
  case -1:
    exit(1);
  case 0:
    dup2(fi[0], STDIN_FILENO);
    close(fi[1]);
    dup2(fo[1], STDOUT_FILENO);
    close(fo[0]);
    execlp("pipes1", "pipes1",(char *)NULL);

  default:
    close(fi[0]);
    close(fo[1]);
    break;
  }

  write(fi[1], "t", 1);
  close(fi[1]);
  read(fo[0], &c, 1);
  printf("%c\n", c);
  close(fo[0]);

  return 0;
} 
```

# java - One Play 2 Framework App - 使用 java 和 scala

> ID：10311380
> 
> 赞同：18
> 
> 时间：2012-04-25T07:41:14.513
> 
> 标签：java, scala, playframework-2.0

我想使用[morphia](https://github.com/mongodb/morphia)进行数据访问，但我也想尝试将 Scala 用于 Web 内容。是否可以混合和匹配 Java 和 Scala 文件，或者如果我选择使用 Java，我必须坚持使用 Java？

我知道这是一个新手问题，我来自 python/django 世界，我真的很喜欢 Play，过去做过一些 Java 编程，但 Scala 看起来很有趣，所以虽然我有点害怕完全跳入Scala，我希望能够与 Java 一起使用它。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-25T07:59:21.487

您绝对可以同时使用 java 和 scala，因为 Play 是一个 JVM 框架，而不是 Java 或 Scala 框架。

所以在控制器中，如果你愿意，你可以有一个 ScalaApplication.scala 和一个 JavaApplication.java。

它们可以相互调用（可重定向，...）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T16:05:59.857

是的，可以在 Play 应用程序中同时使用 Java 和 Scala 文件。事实上，模板系统本身就证明了这一点。您还可以混合使用 Scala 和 Java 控制器。（我还没有测试过，但我认为应该可以混合使用 Scala 和 Java 模型）。

这是因为 Scala 和 Java 文件都被更改为几乎相同的字节码，因此 JVM 与编写代码的语言无关。

**注意：** 从 Play 控制台创建新应用程序时，会提供创建 Java Scala 或空项目的选项。此选项设置构建的默认配置，主要处理模板中自动可用的导入。它不防止您以后添加其他语言的代码

# web-services - JAX-RPC、JAX-WS 和 JAX-RS Web 服务之间基于实际用例的区别

> ID：10311381
> 
> 赞同：4
> 
> 时间：2012-04-25T07:41:17.173
> 
> 标签：web-services, jakarta-ee

我知道网上有很多文件主要描述技术差异。

但是我很想知道您更喜欢一种特定类型而不是其他类型的常见用例是什么，为什么？

这些偏好是因为集成模式/产品支持特定类型吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T04:07:25.317

感谢您的回答。然而实际用例差异以及何时使用什么。JAX-WS 和 JAX-RS 都有标准实现。我想出了以下区别：

**RESTful 服务（主要是 Web 集成、手机应用程序）**

*   使用 REST 将很容易通过 Web 进行集成。广泛用于 AJAX 调用。
*   不像 SOAP 服务那样冗长，因此需要更少的带宽，因此很适合用于移动应用程序。
*   Web 服务是完全无状态的，因此仅适用于无状态服务。

**JAX-WS 和 JAX-RPC 是基于 SOAP 的服务。（企业网络服务）**

JAX-WS Java EE 更高版本支持这一点，并且标准仍在不断发展。- 基于 SOAP 的服务不适合移动应用程序通信，因为与休息相比，负载较重。- 更适合需要互操作性、事务性、消息传递和可靠性的企业 Web 服务。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T07:46:51.397

`JAX-RPC`忘记这个。它是 Java Web 服务的旧的过时标准

`JAX-WS`[基于SOAP](http://en.wikipedia.org/wiki/SOAP)的 Web 服务的新标准（也作为参考实现提供）

`JAX-RS`[用于REST](http://en.wikipedia.org/wiki/Representational_state_transfer)的堆栈 -完整的Web 服务

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-17T16:13:16.787

我想为@Arjan Tijms 的答案加分

JAX-WS 使用来自 Java 5.0、J2EE5.0 的异步特性 JAX-RPC 主要使用来自 J2EE 1.4 的特性，并且在 J2EE 5.0 中也受支持。

JAX-RPC有自己的数据映射模型，它涵盖了很多，没有涵盖的映射到javax.xml.soap.SOAPElement。

JAX-WS 的数据映射模型是[JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html#introjb)，它承诺为所有 XML 模式进行映射，它具有许多优点，例如可以与 XSD 一起使用，在没有 XSD 的情况下使用注释，它对于大型、复杂的 XML 非常有用，而且限制也很少。

Webservice 规范存在一些差异，因为规范在 JAX-RPC 之后发生了变化和改进，因此 Jax-WS 获得了更多功能。

一件常见的事情是，在将它们与 J2EE 5.0、JavaEE 6.x 一起使用时，两者都令人困惑。更好的是 Jax-RS 或 Jersey，用于新的实现和重新设计。或者您可以继续使用 JAX-RPC 或 JAX-WS。

[JavaEE7.0](http://www.oracle.com/technetwork/articles/java/jaxrs20-1929352.html)承诺为 RESTful Web 服务提供新的轻量级、开发人员和测试人员友好的方法。

用于 XML 绑定的 Java 架构 (JAXB) 是一种 XML 到 Java 的绑定技术，它通过启用模式和 Java 对象之间以及 XML 实例文档和 Java 对象实例之间的转换来简化 Web 服务的开发

# c++ - C++ 问题 - getline 跳过第一个输入

> ID：10311382
> 
> 赞同：1
> 
> 时间：2012-04-25T07:41:31.157
> 
> 标签：c++, getline

问题是使用的部分`getline()`第一次没有输入，它只是说“输入一个字符串：输入一个字符串：”然后你可以在那里输入。

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
  int nums[100], key=0, num = 0;

  while(num != -1)
  {
    cout << "Enter a positive integer (-1 to exit): ";
    cin >> num;

    if(num != -1)
    {
      nums[key] = num;
      key++;
    }

  }

    if(num != -1)
    {
      nums[key] = num;
      key++;
    }

    int numElements = key;
    string inStrings[100];

    for(int i=0; i < numElements; i++)
    {
      cout << "\n";
      cout << "Enter a string: ";
      getline(cin, inStrings[i]);
    }

    for(int i=0; i < numElements; i++)
    {
      cout << nums[i] << " :: " << inStrings[i];
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T07:45:28.380

问题是您首先使用`cin >> num;`读取一个数字，但这会在`getline()`调用读取的流中留下一个换行符。

也许在吃那个流浪换行符`cin.ignore(1,'\n');`之后添加一个。`cin >> num;`

# ruby-on-rails - Rails gems：SocialStream 与 CommunityEngine 的区别和好处是什么？

> ID：10311388
> 
> 赞同：1
> 
> 时间：2012-04-25T07:41:49.200
> 
> 标签：ruby-on-rails, gem

我正在评估 Ruby on rails 3.1 的不同社交宝石

SocialStream CommunityEngine 似乎是该领域的领导者。有没有人比较两者并可以分享他的想法？

# c# - 运行 HTML 代码时出现 Ajax 客户端框架错误

> ID：10311394
> 
> 赞同：0
> 
> 时间：2012-04-25T07:42:09.527
> 
> 标签：c#, javascript, asp.net, .net, ajax

我有一个使用 ajax 模式弹出扩展器的 aspx 页面。我从 Visual Studio 成功运行该项目，它可以在 IE 和 Firefox 作为默认浏览器时正常工作。

现在我获取了 html 代码并创建了一个 html 文件并放在正确的位置。当我通过双击打开 html 文件时，它显示脚本错误，例如“<strong>ASP.Net Ajax 客户端框架无法加载”。为什么在我创建 HTML 文件并打开它时会发生这种情况；当我从 Visual Studio 运行 aspx 页面时没有发生。如何克服它？**在部署到生产**中处理这个问题的最佳方法应该是什么？

* * *

注意：我没有在**Web.Config**中输入任何与 Ajax 相关的条目。我们没有使用任何更新面板。我们在 aspx 页面中使用了 ToolkitScriptManager。注意：在此之后还有一条消息 - **'Sys' is undefined**。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:47:33.593

将 HTML 复制到某个位置后，Microsoft AJAX 相关 JS 文件的路径是否仍然有效/指向正确的文件夹？

# extjs4 - Ext js 表单、模型和文件上传

> ID：10311401
> 
> 赞同：0
> 
> 时间：2012-04-25T07:42:37.557
> 
> 标签：extjs4

我想澄清一下 ext 4 模型如何与表格相关联。假设我有一个模型，例如“用户”，它附加了一个 REST 代理。

当我想修改用户参数时，我使用表单的

```
loadRecord( Ext.data.Model record ) : Ext.form.Basic 
```

方法，设置表单的字段值。

修改后，我调用“updateRecord”方法，将更改从表单发送到加载的模型，然后使用模型的“保存”方法，将更改发送到服务器。这工作得很好，并且似乎符合 Ext MVC 概念。

# 问题

但是，问题是：我应该如何符合MVC，以防我需要上传文件，同时修改用户的数据（例如头像）。根据我从文档中了解到的信息，我应该切换到使用表单的“提交”方法向服务器发送更新的数据，包括文件。

在这种情况下，我看到了几个缺点：

*   加载到表单中的原始模型将不会更新。
*   如果我更新模型（使用“updateRecord”或其他方式），模型将保持脏状态，但是，更改已经发送到服务器。
*   应该将相同的代理配置应用于表单，至于模型，这样我就不需要更改服务器端。

这是通过 ext 表单实现文件上传的正确方法吗？有没有办法使用 model.save 方法来做到这一点，更 MVC 风格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:05:42.807

我不认为你可以将两件事结合在一起。文件上传总是与提交其余数据不同。但是，您可以做什么：

*   有一个按钮来选择和上传文件到服务器。但是不要将文件保存到保存用户的同一个地方（例如，您可以有单独的文件存储并且只将文件名保存到用户记录中）

*   当向服务器发送用户记录更新时，发送新的文件名。这样您的头像更新和其他数据更新将在同一个事务中。

# c# - 使用哪个计时器在迭代之间引入 1-5 毫秒的延迟？

> ID：10311402
> 
> 赞同：0
> 
> 时间：2012-04-25T07:42:37.620
> 
> 标签：c#, timer

在我之前的问题[中，如何将线程挂起 1 毫秒？](https://stackoverflow.com/questions/10270438/how-to-suspend-a-thread-for-1-ms)有人回答说要引入 1 毫秒的延迟，我应该使用定时器。

我需要“工作”然后平均等待 2 毫秒（1-5 毫秒是可以的，**很少有**极端延迟到几百毫秒是可以的），然后再次工作。重要的是不要在上一次迭代仍未完成时尝试开始新的迭代，所以我不需要每 1-5 毫秒做一次，我需要在迭代之间有 1-5 毫秒的延迟。

我试过这样做，`System.Timers.Timer`但它不起作用：

```
using System;
using System.Diagnostics;
using System.Threading;
using System.Timers;
using Timer = System.Timers.Timer;

namespace TestTimer
{
    class Program
    {
        static Timer refresh_timer;
        private static int called;
        private const int ITERATIONS = 100;
        private static Stopwatch sw;

        static void Main(string[] args)
        {
            refresh_timer = new Timer(1);
            refresh_timer.AutoReset = false;
            refresh_timer.Elapsed += OnRefreshTimedEvent;
            sw = Stopwatch.StartNew();
            refresh_timer.Start();
            Thread.Sleep(10000);
        }

        static void OnRefreshTimedEvent(object source, ElapsedEventArgs args)
        {
            DoGateIteration();
        }

        private static void DoGateIteration()
        {
            //try
            //{
                // work here
                called++;
            //}
            //finally
            //{
                if (called == ITERATIONS)
                {
                    Console.WriteLine("Average iterations per second: " + ITERATIONS * 1000 / sw.ElapsedMilliseconds);
                    Console.WriteLine("Average iterations milliseconds: " + sw.ElapsedMilliseconds / ITERATIONS);
                }
                refresh_timer.Start();
            //}
        }
    }
} 
```

它报告：

```
Average iterations per second: 64
Average iterations milliseconds: 15 
```

所以它似乎`System.Timers.Timer`不像我需要的那么精确。可能我应该尝试一下`System.Threading.Timer`，但是这个计时器没有`AutoReset`我需要的属性。

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:52:15.320

对于只有 1 或 2 毫秒的这么短的延迟，最好只是忙等待：

```
private static int called;
private const int ITERATIONS = 10000;
private static Stopwatch sw;

static void Main(string[] args)
{
    sw = Stopwatch.StartNew();

    var x = Stopwatch.StartNew();
    while (true)
    {
        DoGateIteration();

        x.Restart();
        while (x.ElapsedMilliseconds < 2) ; // busy-wait for 2 ms
    }
}

private static void DoGateIteration()
{
    called++;
    if (called == ITERATIONS)
    {
        Console.WriteLine("Average iterations per second: " + ITERATIONS * 1000 / sw.ElapsedMilliseconds);
        Console.WriteLine("Average iterations milliseconds: " + sw.ElapsedMilliseconds / ITERATIONS);
    }
} 
```

*输出：*

```
每秒平均迭代次数：500
平均迭代毫秒数：2

```

# c# - Linq to SQL 连接两个表并填充 GridView

> ID：10311405
> 
> 赞同：0
> 
> 时间：2012-04-25T07:42:44.890
> 
> 标签：c#, asp.net, linq-to-sql, gridview, join

我的数据库中有两个表，Building 和 Town。它们看起来像这样：

建造：

```
buildingid
buildingname 
```

镇：

```
id
userid
buildingid 
```

在 Town 中，用户拥有的每座建筑物都有一个入口。

我想要的是为具有给定用户 ID 的用户填充 GridView。此 GridView 应包括建筑物名称和建筑物数量。建造。我试过这个：

```
var buildings = (from Town in dc.Towns
                         join Building in dc.Buildings
                             on Town.buildingid equals Building.buildingid
                         select Building.buildingname);
        gvBuildings.DataSource = buildings;
        gvBuildings.DataBind(); 
```

但我不知道如何获得每个建筑物的数字。

* * *

我现在已经为此工作了一段时间，并且您的一些答案有效。我用过这段代码：

```
var buildings = dc.Towns
            .Where(t => t.userid == userid)
            .GroupJoin(dc.Buildings,
                       t => t.buildingid,
                       b => b.buildingid,
                       (Town, Buildings) => new
                                                {
                                                    BuildningName = Buildings.First().buildingname,
                                                    Count = Buildings.Count()
                                                });
        gvBuildings.DataSource = buildings.ToList();
        gvBuildings.DataBind(); 
```

当我运行此代码时，我的 GridView 最终看起来像这样： ![网格视图](../Images/f8560e82e2f6fb455deca0e6ec018e33.png)

我需要按组显示建筑物，按建筑物名称分组。我已经尝试了所有建议，但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:44:47.530

检查[linq 不同的执行](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)

而不是尝试打击代码可能对你有用

```
 var buildings = 

(from j in dc.Town 
join i in dc.Buildings
 on j.buildingId equals i.buildingId
where j.Userid = varUSerid 
group new {i, j} 
by new 
{   i.BuildingID } 
into 
g  
select new {   
  BuildingName = g.First<k=>k.BuildingName)
   , count = g.Count() } ).ToList();
    gvBuildings.DataSource = buildings; 
          gvBuildings.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:47:46.113

```
 var buildings = (from Town in dc.Towns
                                 join Building in dc.Buildings
                                     on Town.buildingid equals Building.buildingid
                                 into results
                                 from r in results.DefaultIfEmpty()
                                 group Town by new 
                                 {
                                     r.BuildingId
                                 } into groupedResults
                                 where Town.UserID == parameteruserId
                                 select new 
                                 {
                                     BuildingName = Building.buildingname,
                                     BuildingCount = groupedResults.Count()
                                  }); 
```

试试这个..它应该可以工作..我有类似的要求..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T08:08:25.593

尝试分组：

```
var buildings = dc.Towns
                  .Where(t => t.UserId == userId)
                  .GroupJoin(dc.Buildings,
                             t => t.BuildingId,
                             b => b.BuildingId,
                             (town, buildings) => new
                             {
                                 BuildingName = buildings.First().BuildingName,
                                 Count = buildings.Count
                             }); 
```

请记住，当绑定到控件时，您必须提供类型（或实现）的集合`IList`。这可以通过调用集合`ToList()`来完成：`buildings`

```
gvBuildings.DataSource = buildings.ToList();
gvBuildings.DataBind(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T11:32:30.057

```
 manDbDataContext db = new DbDataContext();

 var estimatedTotal = (  from est in db.AssignmentEstimatedMaterials
                         where est.assignment_id == Convert.ToInt32(Label_assignmentId.Text)
                         join materialdetail in db.Materials on est.material_id equals materialdetail.material_id
                         select new { est.qty,est.total_amount, materialdetail.material_name}).ToList();

    GridView_estiamte_material.DataSource = estimatedTotal;
    GridView_estiamte_material.DataBind(); 
```

请注意，您应该选择单个数据并且它可以工作。

# java - 为什么 fopen 由于 Android-NDK 应用程序的权限问题而在本机方法中失败？

> ID：10311409
> 
> 赞同：1
> 
> 时间：2012-04-25T07:43:13.633
> 
> 标签：java, android, c++, c, android-ndk

看到我在一个本地调用中有以下代码

```
errno = 0;

FILE *fp;
fp = fopen("jigar.txt","wb");
if(fp == NULL)
    __android_log_print(ANDROID_LOG_ERROR, APPNAME, "FOPEN FAIL with %d",errno);
else
    __android_log_print(ANDROID_LOG_ERROR, APPNAME, "FOPEN pass "); 
```

失败并显示

```
FOPEN FAIL with 30 
```

现在这里 30 表示它显示错误

```
#define EROFS       30  /* Read-only file system */ 
```

在我的应用程序的 MainFest 文件中，我添加了这一行

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" > 
```

我仍然收到此错误..

如何解决这个问题？

* * *

**编辑**

感谢通过指定文件夹名称它可以工作但是

在我的情况下，我有一个库，它有这样的 fopen() 调用，其中文件名我无法给出。它采用默认文件名。

我在我的 ndk 应用程序中使用这个库，所以在这种情况下如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:14:10.070

默认情况下，当您运行应用程序时，它会在自己的上下文中运行。fopen("jigar.txt","wb"); 将尝试在当前目录中打开文件，我认为主要是 /data/.. 所以你不能创建这样的文件。相反，如果您想要 /data/ 中的文件夹，您可以调用函数 gteDir() 并在其中创建自己的文件。好的，这只是一般信息。

遇到您的问题，如上所述，您需要提供在不同目录中创建文件的绝对路径。即使在 Linux 中也是如此。

对于图书馆的事情，你可以做两件事。

1) 对库源代码进行更改，然后使用 NDK 再次编译。在进行更改时，为 fopen() 提供一些字符串作为参数，您将在执行应用程序时传递它。

2)[重新挂载](http://android-tricks.blogspot.in/2009/01/mount-filesystem-read-write.html)您的库在其中创建文件的文件系统，然后对正在创建文件的特定目录执行 chmod 777。现在执行应用程序。它应该工作。但这不是通用的。如果您出于某种测试目的而这样做，那么此解决方案最简单且省时......

如果卡在某个地方，请告诉我..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:48:25.927

您应该指定写入“jigar.txt”文件的文件夹。像这样：

```
fp = fopen("/sdcard/figar.txt", "wb"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:13:55.113

yuppi 我终于明白了

我已经这样做了

首先将我的进程的当前目录从更改`"/"`为`"/sdcard/"`

```
chdir("/sdcard/"); 
```

然后它找到关于 /sdcard/ 的路径

一切正常..!!!

# string - Powershell替换功能奇怪的行为

> ID：10311411
> 
> 赞同：2
> 
> 时间：2012-04-25T07:43:19.153
> 
> 标签：string, powershell

一个简单的例子，我不知道如何让它工作......

```
 function replace($rep, $by){ 
    Process { $_ -replace $rep, $by }
} 
```

当我做

```
"test" | replace("test", "foo") 
```

结果是

```
test 
```

当我做

```
 function replace(){ 
    Process { $_ -replace "test", "foo" }
}

"test" | replace() 
```

结果是

```
foo 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:52:51.330

PowerShell 中的函数遵循与 cmdlet 和本机命令相同的参数规则，即参数由空格分隔（是的，这也意味着您不需要引用参数，因为在该解析模式下它们会自动解释为字符串):

```
'test' | replace test foo 
```

因此，如果您使用括号中的参数调用 PowerShell 函数或 cmdlet，您将获得一个参数，该参数是函数中的一个数组。*对象上的方法*调用遵循其他规则（大致类似于 C# 中的规则）。

详细说明一下：PowerShell 有两种不同的模式来解析一行：*表达式模式*和*命令模式*。在表达式模式下，PowerShell 的行为类似于 REPL。您可以键入`1+1`并`2`返回，或键入`'foo' -replace 'o'`并`f`返回。命令模式用于模仿 shell 的行为。那是您想要运行命令的时候，例如`Get-ChildItem`or `& 'C:\Program Files\Foo\foo.exe' bar blah`。在括号内模式确定重新开始，这就是为什么`Write-Host (Get-ChildItem)`不同于`Write-Host Get-ChildItem`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:50:30.740

删除函数调用中的 () 并[删除逗号](http://www.johndcook.com/powershell_gotchas.html)。

```
"test" | replace "test" "foo" 
```

# php - 在数据库中存储应用程序权限

> ID：10311413
> 
> 赞同：16
> 
> 时间：2012-04-25T07:43:26.097
> 
> 标签：php, mysql, arrays, permissions, store

我正在为我们公司开发一个应用程序，最终将有很多方法将用户限制在特定的部分/模块中。虽然应用程序仍然很小，但我想转向一种存储权限的新方法，随着应用程序的增长，该方法将保持易于维护和查询。

目前在我们的 MySQL 数据库中，我们有一个名为“user”的表，其中存储了用户的 ID、用户名和密码。在名为“user_acl”的单独表中如下：

```
user_acl_id
acl_root
acl_news_read
acl_news_write
acl_news_modify
acl_reports_read
acl_reports_write
acl_reports_modify
acl_users_read
acl_users_write
acl_users_modify 
```

我们目前只有 3 个模块，但随着时间的推移会创建更多模块，并且需要为每个模块添加权限。

除了为每个权限创建一列之外，还有其他方法或存储此信息吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-25T07:48:10.253

我会这样做。

```
table name: permission
columns: id, permission_name 
```

然后我可以使用多对多关系表为用户分配多个权限

```
table name: user_permission
columns: permission_id, user_id 
```

这种设计将允许我添加任意数量的权限，并将其分配给任意数量的用户。

虽然上述设计符合您的要求，但我有自己的方法在我的应用程序中实现 ACL。我把它贴在这里。

我的 ACL 实现方法是这样的：

1.  用户将被分配一个角色（管理员、访客、员工、公众）
2.  一个角色将分配一个或多个权限（user_write、user_modify、report_read）等。
3.  用户的权限将从他/她所在的角色继承
4.  除了从角色继承的权限外，还可以为用户分配手动权限。

为此，我提出了以下数据库设计。

```
role
I store the role name here 
+----------+
| Field    |
+----------+
| id       |
| role_name |
+----------+

permission:
I store the permission name and key here 
Permission name is for displaying to user.
Permission key is for determining the permission.
+----------------+
| Field          |
+----------------+
| id             |
| permission_name |
| permission_key  |
+----------------+

role_permission
I assign permission to role here 
+---------------+
| Field         |
+---------------+
| id            |
| role_id       |
| permission_id |
+---------------+

user_role
I assign role to the user here 
+---------------+
| Field         |
+---------------+
| id            |
| user_id       |
| role_id       |
+---------------+

user_permission
I store the manual permission I may allow for the user here 
+---------------+
| Field         |
+---------------+
| id            |
| user_id       |
| permission_id |
+---------------+ 
```

这让我可以更好地控制 ACL。我可以允许超级管理员自己分配权限，等等。正如我所说，这只是给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:53:02.713

就像 Ibrahim 所说，专门为您的权限创建一个新表。为用户分配一个代表其权限级别的数值，例如 1 = 读取、2= 写入/读取、3 = 修改/写入/读取。然后在您的代码中，在允许用户执行特定任务之前检查适当的权限级别。如果它们没有所需的值（修改 3 或写入 >=2），那么您会阻止该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:18:33.543

我认为你应该有五张桌子：

```
user
user_x_profile
profile
profile_x_function
function 
```

您设置了各种“通用”配置文件“查看者”、“员工”、“经理”等。

您为要控制的每个对象设置一个“功能”条目。

然后将函数链接到 profile_x_function 中的配置文件。

然后为每个用户分配一个或多个配置文件。

这减少了管理工作。假设您要添加另一个只有“经理”才能使用的功能 - 您只需在功能表中添加一个新条目，然后在“profile_x_function”表中添加一个条目，该条目链接到“经理”配置文件对经理配置文件的权限它适用于所有经理。

要查询访问权限，您需要一个五表连接，但您只选择一个权限属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-24T11:43:11.437

在一本非常著名的 MySQL 性能书籍*High Performance MySQL*中，作者特别提到了 ACL 作为*可以使用**数据类型的地方。`SET`*他们使用以下示例来演示此类用例：

```
CREATE TABLE acl (
    permissions SET('CAN_READ', 'CAN_WRITE', 'CAN_DELETE') NOT NULL
);

INSERT INTO acl VALUES ('CAN_READ,CAN_WRITE');
SELECT permissions FROM acl WHERE find_in_set('CAN_READ', permissions); 
```

问题是，书中也提到，你不能轻易修改权限集（你必须使用`ALTER TABLE`），你也不能声明一个类型`SET`为索引的列，这可能会导致性能问题。

您还可以使用诸如`TINYINT`“包装” ACL 列表之类的东西，缺点是它更难阅读和编码`SELECT`句子。

# actionscript-3 - AS3 精灵处理程序

> ID：10311414
> 
> 赞同：0
> 
> 时间：2012-04-25T07:43:30.043
> 
> 标签：actionscript-3, apache-flex, flex4.5

我想为 Sprite 使用对象处理程序，但任何处理程序都不适用于 Sprite 请任何人建议我如何使用对象处理程序处理 Sprite 组件

```
 <s:Application name="Spark_SpriteVisualElement_addChild_test"
           xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           initialize="init();">
<fx:Script>
    <![CDATA[

        import mx.core.UIComponent;
        private const spr1:Sprite = new Sprite();

        private var bmd:BitmapData;// = new BitmapData();
        private function init():void {
            spr1.graphics.beginFill(0xFF0000, 0.5);
            spr1.graphics.drawRect(10, 10, 100, 80);
            spr1.graphics.endFill();
            spr.addChild(spr1);
        }           
    ]]>
</fx:Script>
<s:SpriteVisualElement id="spr" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:13:15.207

查看[对象句柄](http://www.objecthandles.com/)。

> **它是什么？**
> Actionscript 3 库，使用户能够移动和调整组件的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:12:38.303

下面的代码可以帮助你： -

```
private function init():void
{
    spr1.graphics.beginFill(0xFF0000, 0.5);
    spr1.graphics.drawRect(10, 10, 100, 80);
    spr1.graphics.endFill();
    spr.addChild(spr1);
    spr1.addEventListener(MouseEvent.CLICK, onClickHandler);
} 

private function onClickHandler(event:MouseEvent):void
{
    trace("Click Perform")
} 
```

# hibernate - SQL Server“日期”数据类型的休眠映射

> ID：10311421
> 
> 赞同：-1
> 
> 时间：2012-04-25T07:43:57.047
> 
> 标签：hibernate, hibernate-mapping

我在我的项目中遇到了问题。实际上我正在使用带有 SQL Server 2008 的 Hibernate。我的一个 DB 表包含具有“日期”数据类型的属性。问题是，如何将该属性映射到 java 属性（字符串类型）。假设输入以字符串的形式出现，例如“2012-04-25”。怎么做？这很紧急。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:55:27.970

写一个用户类型。

[这](http://blog.xebia.com/2009/11/09/understanding-and-writing-hibernate-user-types/)是有关它的更多信息。

# javascript - 正则表达式拒绝连续字符

> ID：10311424
> 
> 赞同：5
> 
> 时间：2012-04-25T07:44:00.137
> 
> 标签：javascript, regex, html

我对 Regex 还是很陌生，基本上我需要做的是创建一个接受数字和字母但不允许输入连续字符的规则。

例如：abcd --> ok, abbcd --> bad

我有大部分工作，但我无法弄清楚的部分是如何禁止连续字符？

到目前为止我的代码：

```
/^[A-Za-z-0-9]{8,15}$/i 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T08:05:33.457

```
>>> r = /^((\w)(?!\2))+$/i
>>> r.exec('abbcd')
null
>>> r.exec('abcd')
[ 'abcd',
  'd',
  'd',
  index: 0,
  input: 'abcd' ] 
```

该`\2`部分是一个反向引用，并匹配该组最后匹配的任何字符`(\w)`。所以否定的前瞻`(?!\2)`意味着“不跟随角色本身”。[如果你不熟悉我在这里使用的一些术语，你应该在MDN 的正则表达式文档](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)中查找它们。

要将接受的字符串的长度限制为 OP 中的 8-15 个字符，请将其更改`+`为`{8,15}`：

```
>>> r = /^((\w)(?!\2)){8,15}$/i
>>> r.exec('abcd')
null
>>> r.exec('abcdabcd')
[ 'abcdabcd',
  'd',
  'd',
  index: 0,
  input: 'abcdabcd' ] 
```

# php - php 它卡在 0 上？从数据库中获取

> ID：10311426
> 
> 赞同：-2
> 
> 时间：2012-04-25T07:44:06.657
> 
> 标签：php, mysql

```
<?php
mysql_connect('localhost','root','root');
mysql_select_db('moodle');
            $ht = "";
            $sql = "select * from absence where username='iset' ";
            $sql_query = mysql_query($sql);

            while( $row = mysql_fetch_object($sql_query) ){
                $ht +=  "<li>".$row->classe."</li>";

            }
echo $ht;
?> 
```

总是 // 0 我在 'absence' 中有 3 行用户名 = 'iset' 我认为 $ht 的问题但是 !!! 感谢先进

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T07:46:43.083

[PHP 中的字符串连接](http://php.net/manual/en/language.operators.string.php)是使用`.`而不是`+`.

这条线

```
 $ht +=  "<li>".$row->classe."</li>"; 
```

应该成为

```
 $ht .=  "<li>".$row->classe."</li>"; 
```

# list - List.rev 和空列表 []

> ID：10311427
> 
> 赞同：1
> 
> 时间：2012-04-25T07:44:13.277
> 
> 标签：list, pattern-matching, ocaml

我对函数 ( `parse_list`)不太了解

`None -> List.rev is`和`None -> []`

```
let try_parse parse x = try Some (parse x) with Error _ -> None;;

let parse_list parse =
  let rec aux is = function
    | [] -> List.rev is, []
    | (hd :: tl) as xs ->
    match try_parse parse hd with
      | Some i -> aux (i::is) tl
      | None -> List.rev is, xs
  in aux [];; 
```

和

```
let parse_list parse =
  let rec aux is = function
    | [] -> List.rev is, []
    | (hd :: tl) as xs ->
    match try_parse parse hd with
      | Some i -> aux (i::is) tl
      | None -> [], xs
  in aux [];; 
```

它们不同吗？如果它们不同，你能给我一个例子吗？非常感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T08:10:49.063

是的，它们是不同的。

在第一个中，当解析函数失败时，该函数`parse_list`将返回“已解析”表达式的部分列表 ( `List.rev is`)。

在第二个中，当 parse 函数失败时，您将从`parse_list` ( `[]`) 中获得一个空列表。

使用解析函数查看此示例，该函数仅保留小于 的整数`3`：

```
let test_parse x = if x < 3 then x else raise Error "error";; 
```

通过第一个实现，您将获得：

```
# parse_list test_parse [1; 2; 3; 4; 5];;
  - : int list * int list = ([1; 2], [3; 4; 5]) 
```

使用第二个，您将获得：

```
# parse_list test_parse [1; 2; 3; 4; 5];;
  - : int list * int list = ([], [3; 4; 5]) 
```

# python - 使用缓冲区竞争编程的 Python 快速输入输出

> ID：10311430
> 
> 赞同：0
> 
> 时间：2012-04-25T07:44:27.613
> 
> 标签：python, performance, io

我见过人们在在线评委中使用不同语言的缓冲区来快速输入/输出。例如，这个[http://www.spoj.pl/problems/INTEST/](http://www.spoj.pl/problems/INTEST/)是用 C 完成的，如下所示：

```
#include <stdio.h>
#define size 50000

int main (void){
unsigned int n=0,k,t;
char buff[size];
unsigned int divisible=0;
int block_read=0;
int j;
t=0;
scanf("%lu %lu\n",&t,&k);

while(t){
    block_read =fread(buff,1,size,stdin);
    for(j=0;j<block_read;j++){
        if(buff[j]=='\n'){
            t--;
            if(n%k==0){
                divisible++;
            }
            n=0;
        }
        else{
            n = n*10 + (buff[j] - '0');
        }
    }
}

printf("%d",divisible);
return 0; 
```

这怎么能用python完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:09:42.227

```
import sys
file = sys.stdin
size = 50000
t = 0
while(t != 0)
    block_read = file.read(size)
    ...
... 
```

不过，这很可能不会提高性能——Python 是解释型语言，因此您基本上希望在本机代码（在这种情况下为标准库输入/解析例程）花费尽可能多的时间。

TL;DR 要么使用内置例程来解析整数，要么获取某种针对速度进行了优化的第 3 方库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:10:44.080

我尝试在 Python 3 中解决这个问题，无论我如何尝试读取输入，都无法让它工作。然后我切换到在 Python 2.5 下运行它，这样我就可以使用

```
import psyco
psyco.full() 
```

`sys.stdin`在进行更改后，我只需在 for 循环中一次读取一行的输入即可使其工作。`raw_input()`我使用and 的值读取并解析`n`了第一行`k`，然后使用以下循环读取输入的其余部分。

```
for line in sys.stdin:
    count += not int(line) % k 
```

# android - 如何删除android中的自定义列表视图项？

> ID：10311431
> 
> 赞同：2
> 
> 时间：2012-04-25T07:44:29.360
> 
> 标签：android, android-listview, android-arrayadapter

我的布局文件中有一个列表视图和一个按钮。单击该按钮，我将项目添加到列表视图。活动开始时列表视图应该是空的，但它应该通过向其中添加项目来增长。这是我在 onCreate() 中的代码：

```
list  = (ListView)findViewById(R.id.inverterListView);
adapter = new ArrayAdapter<String>(InverterList.this, R.layout.inverters_list_row, R.id.inverterNumberTextViewInPanelListRow);
 list.setAdapter(adapter); 
```

在这里，我将项目添加到单击按钮的列表视图中。

```
adapter.add(inverterNo);
adapter.notifyDataSetChanged(); 
```

这工作正常。谁能指导我删除自定义列表视图项？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T07:48:48.943

如果您知道项目的位置，您可以这样做：

```
Object item = adapter.getItem(position);

adapter.remove(item);

adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T07:49:03.627

您可以编写自己的适配器扩展 BaseAdapter 并实现所有您需要的方法。

这是我的适配器的示例：

```
public class PeopleUserAdapter extends BaseAdapter 
{
private List<User> users;
private int viewResourceId;
private Context context;

public PeopleUserAdapter(Context context, int viewResourceId) 
{
    this.context = context;
    this.viewResourceId = viewResourceId;
    this.users = new ArrayList<User>();
}

@Override
public View getView(int position, View convertView, ViewGroup parent) 
{
    UserItemHolder holder;
    if (convertView == null)
    {
        convertView = LayoutInflater.from(context).inflate(viewResourceId, parent, false);
        holder = new UserItemHolder(convertView);
    }
    else holder = (UserItemHolder) convertView.getTag();

    User user = getItem(position);
    holder.name.setText("@" + user.getLogin());
    return convertView;
}

@Override
public int getCount() 
{
    return users.size();
}

@Override
public User getItem(int position) 
{
    return users.get(position);
}

@Override
public long getItemId(int position) 
{
    return getItem(position).hashCode();
}

public void clear()
{
    users.clear();
}

public void addAll(Collection<User> users)
{
    this.users.addAll(users);
    notifyDataSetChanged();
}

public void replace(Collection<User> users)
{
    clear();
    addAll(users);
}

public static PeopleUserAdapter init(Context context)
{
    return new PeopleUserAdapter(context, R.layout.item_user);
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T07:48:35.807

[adapter.remove(item)](http://developer.android.com/reference/android/widget/ArrayAdapter.html#remove%28T%29) .. 然后调用`adapter.notifyDataSetChanged();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-08T00:22:17.033

如果您使用自定义适配器（用于自定义布局列表视图），您将需要这样做：

当您的适配器类似于：

```
public class YourAdapterName extends ArrayAdapter<yourObject> 
```

那么删除所选 ListView 项目的代码将是：

```
ListView yourListView = (ListView) findViewById(R.id.listviewid); 
YourAdapterName adapter;
adapter = (YourAdapterName) yourListView.getAdapter();
yourObject theitem = adapter.getItem(position);
adapter.remove(theitem);
adapte.notifyDataSetChanged(); 
```

这是假设您在一个事件中，该事件使您可以访问列表视图中的当前位置。像：

```
public boolean onItemLongClick(AdapterView<?> parent, View strings,int position, long id) 
```

或者

```
public void onItemClick(AdapterView<?> arg0, View v, int position, long id) 
```

否则，您将需要以其他方式获取该位置，例如将其（onItemClick 或 onItemLongClick）存储在带有 Visibility.GONE 的 textView 中，并在单击按钮时检索它（这很愚蠢，您可以使用各种存储选项，例如全局变量、数据库等）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-16T10:02:49.913

确保您已覆盖自定义适配器上的删除方法

例如，如果这是您的 add 方法：

```
@Override
public void add(String[] object) {
    scoreList.add(object);
    super.add(object);
} 
```

那么您的删除方法将如下所示：

```
@Override
public void remove(String[] object) {
    scoreList.remove(object);
    super.remove(object);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T07:49:14.030

调用以下两行::

```
adapter.remove(inverterNo);
adapter.notifyDataSetChanged(); 
```

其中inverterNo是你的项目

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-17T16:15:11.760

很容易；您只需要：在您的个性化适配器中添加一个公共方法：

```
public void remove(int position) {
    itemsMovieModelFiltered.remove(position);
    notifyDataSetChanged();
} 
```

请记住，您必须在您的个性化适配器中添加此方法。然后，从其他地方调用这个方法

```
 adapte=new PersonalizeListAdapter(getActivity().getApplicationContext(),
            movieModelList);
adapte.remove(position); 
```

# wpf - WPF 从相对位置显示图像

> ID：10311433
> 
> 赞同：0
> 
> 时间：2012-04-25T07:44:30.540
> 
> 标签：wpf, image, file, path, relative-path

我想在我的对话框上显示一个图像，该图像可能位于相对于 .exe 所在目录的目录中，例如

```
project
- data
 -- logo  //<-- that's where the image is located
-bin      //<-- that's where the .exe is in 
```

默认图像应包含在 .exe 中，但在显示对话框时，应首先检查 \data\logo 目录，如果可以在其中找到具有给定文件名的图像，则应使用该图像而不是用于显示的图像在.exe里面。

关于如何做到这一点的任何想法？

谢谢，

塔比纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:48:49.190

使用[包](http://msdn.microsoft.com/en-us/library/aa970069.aspx)URI

```
pack://application:,,,/ReferencedAssembly;component/data/logo/image.png 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:52:40.263

当他要求相对于 exe 的文件夹时，我建议他的意思是徽标应该位于文件系统内（例如 c:\program files\MyApp\data\logo）。所以我会检查文件是否存在

```
File.Exists("/data/logo/logo.png") 
```

如果它返回 false，您可以加载您的嵌入式资源。

//编辑

如果您在 Visual Studio IDE 中使用此代码段，则路径位于

```
<Project directory>/bin/debug/data/logo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T06:42:53.820

我现在正在做的是

```
 // set the logo
  string path = Environment.CurrentDirectory + "\\data\\logo\\logo.gif";
  var uri = new Uri(path, UriKind.Absolute);
  try
  {
    this.myImg.Source = new BitmapImage(uri);
  }
  catch (Exception e)
  {
    this.myImg.Source = new BitmapImage(new Uri(@"pack://application:,,,/myAssemblyName;component/Images/logo.gif"));
  } 
```

这工作得很好，但我不喜欢这一切都是在代码隐藏中编写的。我宁愿让它更可重用。有没有办法将它全部放入模板并将其应用于视图框/图像？

谢谢，

塔比纳

# git - 如何设置 ssh 密钥以绕过 git bash 密码提示

> ID：10311437
> 
> 赞同：4
> 
> 时间：2012-04-25T07:44:35.797
> 
> 标签：git, repository, ssh-keys, password-prompt

我想禁用 git 的密码提示，所以我想我可以在我的远程存储库中设置一个 ssh-key。但是我如何将它与我计算机上的 git 关联起来。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T07:53:00.693

如果您使用受密码保护的私钥通过 SSH 访问 git，它应该只要求输入密码。
如果是这种情况，您需要运行 SSH 代理，如“[记住密码，Windows 下的 Git bash](https://stackoverflow.com/questions/5727555/remember-password-git-bash-under-windows) ”中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:54:41.057

你应该看看 gitolite：[http](http://sitaramc.github.com/gitolite) ://sitaramc.github.com/gitolite 。里面有你需要的一切，还解释了如何设置。例如，CI 服务器也可以使用无密码登录。

我的经验告诉我不要使用其他东西，因为自制的解决方案太麻烦了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:57:35.867

可以在 GitHub 网站上的[Win-Set-Up-Git](http://help.github.com/win-set-up-git/)上找到非常详细的说明。GitHub 有兴趣确保这些说明是好的；如果他们不是，让他们知道，因为他们会想要改进它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-17T07:32:38.963

您可以在将使用 ssh 密钥进行身份验证的 Windows 上使用“start-ssh-agent.cmd”。这可以在“GIT/cmd”目录中找到。

# javascript - 选择具有 jquery hasClass 类的元素

> ID：10311442
> 
> 赞同：1
> 
> 时间：2012-04-25T07:45:03.970
> 
> 标签：javascript, jquery

我有四个类名为**.s-list 的**div 。当用户单击任何这些 div时， **.selected**类将应用于 div。

我要做的是在单击按钮时检查所有这些 div，如果其中任何一个具有类**.selected**提交表单，否则如果没有一个 div 具有类**.selected 则**显示错误消息。

问题：它第一次工作，但是如果我再次单击按钮，它会显示错误消息并在 div 已经选择了类时提交表单。

```
$("#pp-btn").click(function() {

    $(".s-list").each(function (i) {
         if(!$(this).hasClass('selected')) 
         { 
            $("#p-msg").show(); 
         } 
         else { 

            $("#plans-form").attr('action', $(this).attr('links'));

            $("#p-msg").hide();
         }
        });  
    }); 
```

如果 div 中的任何 1 个具有“已选择”类，我不希望显示该消息。

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:50:06.163

使用 jQuery 选择器检查是否有任何`s-list`元素具有`selected`类；

```
$('#pp-btn').click(function (e) {

    if ($('.s-list.selected').length == 0) {
        /* No `selected` class on any `s-list` */
        $('#p-msg').show();
    } else {
        /* At least one `s-list` has the additional `selected` class */
        $('#plans-form').attr('action', $('.s-list.selected').attr('links'));
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:50:47.570

```
$("#pp-btn").on('click',function() {
    if($(".s-list.selected").length){ 
       //there are selected items
    } else { 
       //there is none
    } 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:50:58.190

你可以这样检查：

```
if ($(".s-list.selected").length == 0) { $("#p-msg").show();  }
else {
    $('#plats-form').attr('action', $('.s-list.selected').attr('links'));
    $("#p-msg").hide();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:00:03.193

```
$("#pp-btn").click(function() {

       var submit = false;

       $(".s-list").each(function (i) {
           if($(this).hasClass('selected')) { 
            submit = true;
           }
        }); 

       if(submit) {
           $("#p-msg").show(); 
       } else {
           $("#plans-form").attr('action', $(this).attr('links'));
           $("#p-msg").hide();
       }
    }); 
```

# c# - 批量更新 SQL Server C#

> ID：10311445
> 
> 赞同：3
> 
> 时间：2012-04-25T07:45:14.387
> 
> 标签：c#, .net, sql, sql-server, tsql

我有一个 270k 行的数据库，其中包含主键`mid`和一个名为 的列`value`，并且我有一个包含中间值和值的文本文件。现在我想更新表格，以便将每个值分配给正确的中间值。

我目前的方法是从 C# 读取文本文件，并为我读取的每一行更新表中的一行。必须有更快的方法来做我觉得的事情......有什么想法吗？

编辑：表中还有其他列，所以我真的需要一个方法来根据中间*更新。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T07:51:58.573

您可以使用 SQL Server 导入和导出向导：

[http://msdn.microsoft.com/en-us/library/ms141209.aspx](http://msdn.microsoft.com/en-us/library/ms141209.aspx)

或者，您可以使用`BULK`TSQL 语句：

```
BULK
INSERT YourTable
FROM 'c:\YourTextFile.txt'
WITH
(
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n'
)
GO

SELECT * FROM YourTable
GO 
```

假设您在逗号分隔符上进行拆分。如果您正在使用另一个字符（例如空格），请将 FIELDTERMINATOR 更改为相关字符。

编辑（从我的评论中获得更新）：

```
UPDATE RealTable
SET value = tt.value
FROM
  RealTable r
INNER JOIN temp_table tt ON r.mid = tt.mid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:31:30.193

你重复使用`SqlCommand`?

```
 struct Item
    {
        public int mid;
        public int value;
    }

    public int Update(string connectionstring)
    {
        int res = 0;
        using (System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand())
        using (cmd.Connection = new System.Data.SqlClient.SqlConnection(connectionstring))
        {
            cmd.CommandText = @"UPDATE [table] SET [value] = @value WHERE [mid] = @mid;";
            cmd.CommandType = CommandType.Text;
            System.Data.SqlClient.SqlParameter mid = cmd.Parameters.Add("@mid", SqlDbType.VarChar);
            System.Data.SqlClient.SqlParameter value = cmd.Parameters.Add("@value", SqlDbType.VarChar);
            try
            {
                cmd.Connection.Open();
                foreach (Item item in GetItems("pathttothefile"))
                {
                    mid.Value = item.mid;
                    value.Value = item.value;
                    res += cmd.ExecuteNonQuery();
                }
            }
            catch (Exception)
            {
                throw;
            }
            finally
            {
                cmd.Connection.Close();
            }
        }
        return res;
    }

    IEnumerable<Item> GetItems(string path)
    {
        string[] line;
        foreach (var item in System.IO.File.ReadLines(path))
        {
            line = item.Split(',');
            yield return new Item() { mid = int.Parse(line[0]), value = int.Parse(line[1]) };
        }
    } 
```

# wcf - 防火墙后面的 wsDualHttpBinding 和 netTcpBinding 的 WCF 问题

> ID：10311446
> 
> 赞同：2
> 
> 时间：2012-04-25T07:45:19.470
> 
> 标签：wcf, nettcpbinding, wshttpbinding

我在防火墙后面的服务器上运行了一个独立的 WCF 服务。它目前`wsDualHttpBinding`用作服务利用回调。客户端在 LAN 环境中工作正常。我们已经打开防火墙以允许自定义端口上的流量，因此现在可以从外部 LAN 发现服务。

如果客户端位于其自己的防火墙后面，则由于其性质`wsDualHttpBinding`显然无法正常工作。所以很自然地，`netTcpBinding`想到哪个应该解决双向问题。但奇怪的是，当服务配置 XML 更新为包含`netTcpBinding`在**同一**端口（和/或排除`wsDualHttpBinding`）上时，甚至服务发现也不再起作用。

我想知道我是否还有其他遗漏。我已遵循如何配置的确切建议[：使用 netTcpBinding with Windows Authentication and Message Security in WCF Calling from Windows Forms](http://msdn.microsoft.com/en-us/library/ff648534.aspx)和[Windows Communication Foundation QuickStart - Multiple Binding VS2010](http://www.codeproject.com/Articles/89312/Windows-Communication-Foundation-QuickStart-Multip)。

配置：

```
<system.serviceModel>
  <bindings>
    <netTcpBinding>
      <binding name="NetTcpBindingEndpointConfig">
        <security mode="Message" />
      </binding>
    </netTcpBinding>
  </bindings>
  <services>
    <service name="Service1.Service1.Service">
      <endpoint address="Service1" binding="wsDualHttpBinding" contract="Service1.IService1">
        <identity>
          <dns value="localhost"/>
        </identity>
      </endpoint>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      <endpoint address="" binding="netTcpBinding"
                 bindingConfiguration="NetTcpBindingEndpointConfig"
                 name="NetTcpBindingEndpoint" contract="Service1.IService1">
        <identity>
          <dns value="localhost" />
        </identity>
      </endpoint>
      <host>
        <baseAddresses>
          <add baseAddress="http://localhost:9999/Service1.Service1/"/>
          <add baseAddress="net.tcp://localhost:9999/Service1.Service1/" />
        </baseAddresses>
      </host>
    </service>
  </services>
  <behaviors>
    <serviceBehaviors>
      <behavior>
        <!-- To avoid disclosing metadata information, 
        set the value below to false and remove the metadata endpoint above before deployment -->
        <serviceMetadata httpGetEnabled="True"/>
        <!-- To receive exception details in faults for debugging purposes, 
        set the value below to true.  Set to false before deployment 
        to avoid disclosing exception information -->
        <serviceDebug includeExceptionDetailInFaults="True"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:20:37.063

如果您只能使用单个端口并且必须使用 netTcpBinding 尝试以这种方式配置您的服务：

```
<system.serviceModel>
  <bindings>
    <netTcpBinding>
      <binding name="NetTcpBindingEndpointConfig">
        <security mode="Message" />
      </binding>
    </netTcpBinding>
  </bindings>
  <services>
    <service name="Service1.Service1.Service">
      <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange"/>
      <endpoint address="" binding="netTcpBinding"
                 bindingConfiguration="NetTcpBindingEndpointConfig"
                 name="NetTcpBindingEndpoint" contract="Service1.IService1">
        <identity>
          <dns value="localhost" />
        </identity>
      </endpoint>
      <host>
        <baseAddresses>
          <add baseAddress="net.tcp://localhost:9999/Service1.Service1/" />
        </baseAddresses>
      </host>
    </service>
  </services>
  <behaviors>
    <serviceBehaviors>
      <behavior>
        <serviceMetadata httpGetEnabled="False"/>
        <serviceDebug includeExceptionDetailInFaults="True"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
</system.serviceModel> 
```

添加服务引用时，请尝试使用此地址：

```
net.tcp://localhost:9999/Service1.Service1/mex 
```

# dynamics-crm - MS CRM 中两个组织之间的数据交换

> ID：10311449
> 
> 赞同：0
> 
> 时间：2012-04-25T07:45:30.573
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-4

有什么方法可以让我在两个组织之间交换数据。我只想在插件中进行编码。我们是否可以在插件中编写代码，通过该代码它仅**通过 Web 服务**访问/操作不同组织的数据，而不直接访问其数据库。知道组织是不同的工作组。只是想知道它是否可能或是否有任何其他技术。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:09:47.150

每个 CRM 组织的数据通过 Web 服务公开，CRM 2011 和 CRM 4 略有不同。最好的办法是为目标平台下载最新版本的 SDK，因为那里有几个基于插件和服务的示例操作。

从您的插件中，您将能够通过此服务访问其他组织，并且可以从传递给您的插件的 IExecutionContext 参数中获得“运行插件的本地组织的服务”的连接。您执行的任何操作跨不过，这两个组织都不会是事务性的。

还请务必查看插件可用的同步和异步选项。如果它们的使用适合您的场景，请考虑使用异步插件来更新目标组织，以尽量减少它们对源组织的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:01:18.443

插件将起作用。无论如何，直接访问数据库实际上不是受支持的模型。您还可以考虑将 BizTalk 用作中间件。

# c# - 如何在 ASP.NET MVC Web 应用程序中使用 Ninject？

> ID：10311450
> 
> 赞同：26
> 
> 时间：2012-04-25T07:45:32.410
> 
> 标签：c#, asp.net-mvc, dependency-injection, ninject

我创建了一个新的 MVC Web 应用程序，并且我引用了 Ninject.dll、Ninject.Web.Common.dll 和 Ninject.Web.MVC.dll。

**全球.asax.cs：**

```
public class MvcApplication : NinjectHttpApplication
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new
                {
                    controller = "Home",
                    action = "Index",
                    id = UrlParameter.Optional
                });
        }

        protected override IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            kernel.Load(Assembly.GetExecutingAssembly());
            return kernel;
        }

        protected override void OnApplicationStarted()
        {
            base.OnApplicationStarted();

            AreaRegistration.RegisterAllAreas();
            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);
        }
    } 
```

**App_start\NinjectWebCommon：**

```
public static class NinjectWebCommon 
    {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();

        /// <summary>
        /// Starts the application
        /// </summary>
        public static void Start() 
        {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            bootstrapper.Initialize(CreateKernel);
        }

        /// <summary>
        /// Stops the application.
        /// </summary>
        public static void Stop()
        {
            bootstrapper.ShutDown();
        }

        /// <summary>
        /// Creates the kernel that will manage your application.
        /// </summary>
        /// <returns>The created kernel.</returns>
        private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            RegisterServices(kernel);
            return kernel;
        }

        /// <summary>
        /// Load your modules or register your services here!
        /// </summary>
        /// <param name="kernel">The kernel.</param>
        private static void RegisterServices(IKernel kernel)
        {
        }        
    } 
```

我收到错误“序列不包含任何元素”。我究竟做错了什么？

错误详情：

```
Description: An unhandled exception occurred during the execution of the current web request. Examine the stack trace for more information about this error and where it originated in the code.

Exception Details: System.InvalidOperationException: Sequence contains no elements

Source Error:
  Unhandled exception occurred during execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[InvalidOperationException: Последовательность не содержит элементов]
   System.Linq.Enumerable.Single(IEnumerable`1 source) +320
   Ninject.Web.Mvc.NinjectMvcHttpApplicationPlugin.Start() in c:\Projects\Ninject\ninject.web.mvc\mvc3\src\Ninject.Web.Mvc\NinjectMvcHttpApplicationPlugin.cs:53
   Ninject.Web.Common.Bootstrapper.<Initialize>b__0(INinjectHttpApplicationPlugin c) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs:52
   Ninject.Infrastructure.Language.ExtensionsForIEnumerableOfT.Map(IEnumerable`1 series, Action`1 action) in c:\Projects\Ninject\ninject\src\Ninject\Infrastructure\Language\ExtensionsForIEnumerableOfT.cs:32
   Ninject.Web.Common.Bootstrapper.Initialize(Func`1 createKernelCallback) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs:52
   Ninject.Web.Common.NinjectHttpApplication.Application_Start() in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\NinjectHttpApplication.cs:80 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-28T20:56:11.553

为了明确这一点，如果您使用 NuGet 添加“Ninject.Mvc3”包（我使用版本 3.0.0.6），*则无需*对`global.asax.cs`. NuGet 包通过在MVC 4 项目`NinjectWebCommon`的文件夹中创建类来为您提供魔法。`App_Start`

我这样说是因为我似乎遵循了与原始海报类似的教程（我遵循了关于代码项目的一篇文章，名为 ' [Dependency Injection in asp.net mvc4 and webapi using Ninject'](http://www.codeproject.com/Articles/412383/Dependency-Injection-in-asp-net-mvc4-and-webapi-us)），并且与原来的问题完全相同海报。代码项目文章没有明确说明您应该**使用**NuGet（并且不要手动触摸`global.asax.cs` **或**添加 Ninject 引用（和修改`global.asax.cs`）。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-25T13:37:57.333

您来自`NinjectHttpApplication`AND 您同时使用`App_Start`。选一个！阅读[Ninject.MVC3](https://github.com/ninject/ninject.web.mvc/wiki/MVC3)的文档以获取更多信息。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-05T11:44:05.700

确保您没有引用也使用`NinjectMVC3 App_Start`. 删除对此类的引用后，我的项目开始工作。此外，如前所述，检查名称空间是否匹配且正确。

# apache - 子域中的多个 CI 应用

> ID：10311456
> 
> 赞同：0
> 
> 时间：2012-04-25T07:46:25.853
> 
> 标签：apache, codeigniter, mod-rewrite

我是 Apache 环境的新手。最好我不想要 .htaccess 文件，但我认为我别无选择。我的应用程序在使用 WAMPSERVER 的 Windows 环境的笔记本中运行没有问题。但是当我部署到使用 Apache 的托管服务器时，我遇到了一些问题。我不确定以下结构对于 CodeIgniter 应用程序是否正确。以下是托管服务器中的目录结构...

```
httodocs/
/survey
    /admin
          /config           <-- $route['default_controller'] = "admin";
          /controllers
          /models
          /views
          /...
    /statistic
          /config           <-- $route['default_controller'] = "statistic";
          /controllers
          /models
          /views
          /...
    /mySurvey
          /config           <-- $route['default_controller'] = "mySurvey";
          /controllers
          /models
          /views
          /...
    /css
    /images
    /scripts
    /system
    /...
/index.php                  <-- $application_folder = 'mySurvey'; 
/admin.php                  <-- $application_folder = 'admin';
/Statistic.php              <-- $application_folder = 'statistic'; 
```

我所做的只是复制 Application 文件夹并分别重命名为 admin、statistic 和 mySurvey，我如上所述设置了默认控制器。

`base_url() = 'http://survey.myhost.com'`myhost.com 下的子域的所有应用程序

根 index.php 实际上是 CI 应用程序环境，当用户输入“http://survey.myhost.com”时，默认允许用户进入 mySurvey 应用程序。

从第一页开始，当我访问[http://survey.myhost.com/index.php/mySurvey/index/0](http://survey.myhost.com/index.php/mySurvey/index/0)时 出现错误：

```
`The specified CGI application misbehaved by not retruning a complete set of HTTP headers.` 
```

当我访问`http://survey.myhost.com/admin.php/admin/login`或时显示相同的消息`http://survey.myhost.com/statistic.php?statistic/chart/1`（请注意，我的应用程序也使用查询字符串）

显然，这些都与路线有关。我在服务器上没有任何 .htaccess 文件，因为 WAMP 不需要它，如果有人可以建议我可以将 .htaccess 文件放在哪里以及上述结构的正确 mod-rewrite 是什么以及这种结构是否合适，我将不胜感激。

问候，

KK吉安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:38:51.983

```
root
  /subs
    /survey (survey.domain.tld)
      /application (CI application folder)  
        /config
        /models
        ...
      index.php (CI index.php file)
    /statistics
      /application (CI application folder)
        /config
        /models
        ...
      index.php (CI index.php file)
    /mySurvey
      /application (CI application folder) 
        /config
        /models
        ...
      index.php (CI index.php file)

  /system (CI system folder) 
```

在每个`index.php`（subs/survey/index.php、subs/mysurvey/idnex.php、subs/statistics/index.php）中，您将链接到`root/system/`文件夹中

```
$system_path = '../../system'; 
```

现在您可以轻松访问survey.myhost.com、statistics.myhost.com 等。从url ( `$config['index_page'] = '';`)中删除index.php、admin.php 字符串

希望我得到你想要的

> 对不起我的英语不好

# jquery - Jquery 可视化编辑器建议

> ID：10311457
> 
> 赞同：3
> 
> 时间：2012-04-25T07:46:29.743
> 
> 标签：jquery, css, user-interface

寻找一个类似于[ace](https://github.com/ajaxorg/ace)的 javascript 编辑器，它允许我在浏览器中更改简单页面的格式。ace 的问题在于它输出的是代码，而不是呈现的 html。

我需要创建类似于 tumblr 上的自定义部分的内容，用户可以在其中实时更新他们博客的主题。即左面板包含控件，右面板包含预览。

由于我对此完全陌生，任何人都可以推荐一些不错的方法/工具来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:48:45.953

当然我知道它的[jsfiddle](http://jsfiddle.net/) 在浏览器中使用你可以使用[nicedit](http://nicedit.com/)

# sql - 多个聚合查询作为一行

> ID：10311464
> 
> 赞同：0
> 
> 时间：2012-04-25T07:46:52.177
> 
> 标签：sql, postgresql

是否可以进行多个查询，每个查询都返回一个 COUNT(*) 并将它们全部放在一行中。

目前我只能使用返回多行的联合来做到这一点。

这是我正在做的一个例子：

```
 SELECT COUNT(*) AS QuotesCreatedCount, 0 AS QuotesReferredCount

    FROM table1

    WHERE column1 = value 1    

    UNION ALL

    SELECT 0, COUNT(*) 

    FROM table2

    WHERE column1 = value1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:55:11.150

您可能会使用子查询：

```
select (select count(*)
          from table1
         where column1 = value1) QuotesCreatedCount,
       (select count(*)
          from table2
         where column1 = value1) QuotesReferredCount 
```

# emacs - 如何使用 GNU Emacs 修改 XPM 映像？

> ID：10311467
> 
> 赞同：6
> 
> 时间：2012-04-25T07:47:13.710
> 
> 标签：emacs

> **可能重复：**
> [如何在 Emacs 中打开和编辑图像](https://stackoverflow.com/questions/11640112/how-to-open-and-edit-images-in-emacs)

我知道 Vim 和 XEmacs 可以修改 XPM 图像。我如何使用 GNU Emacs 来做到这一点？ ![维姆](../Images/c1dbb757c473a428a2c997e5a54dcc2d.png) ![XEmacs](../Images/cbfc313926465fc041f5b37d630ce846.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:29:38.293

像打开普通文件一样打开你的图像，Emacs 会显示它。如果您然后 Cc Cc (image-toggle-display)，那么您将获得图像代码，并且您可以在技术上对其进行编辑。

# wpf - WPF 用户控件生成器

> ID：10311471
> 
> 赞同：0
> 
> 时间：2012-04-25T07:47:30.947
> 
> 标签：wpf, user-controls

我想生成一个带有文本框标签和其他主要控件的用户控件，并允许用户操纵控件的设计（拖放、更改属性等...）。

有没有免费的框架来做它或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:03:20.897

你在找什么是Expression Blend；这些是产品的一些链接：[Expression Blend 4 MSDN](http://msdn.microsoft.com/en-us/library/cc296227.aspx) - [Blend Overview](http://www.microsoft.com/expression/products/Blend_Overview.aspx) - [Blend Wiki](http://en.wikipedia.org/wiki/Microsoft_Expression_Blend)。

# google-app-engine - 谷歌应用引擎错误

> ID：10311472
> 
> 赞同：2
> 
> 时间：2012-04-25T07:47:32.557
> 
> 标签：google-app-engine

在 Google App Engine 上尝试应用程序时出现错误，如下所示...知道为什么吗？我的预感是因为我在代理后面，所以我无法连接到 appengine。如果是这样，我该如何设置？

```
Initializing App Engine server
Apr 25, 2012 1:07:32 PM com.google.appengine.tools.info.RemoteVersionFactory getVersion
INFO: Unable to access http://appengine.google.com/api/updatecheck?runtime=java&release=1.5.4&timestamp=1315604504&api_versions=['1.0']
java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.<init>(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at java.net.URL.openStream(Unknown Source)
    at com.google.appengine.tools.info.RemoteVersionFactory.getVersion(RemoteVersionFactory.java:76)
    at com.google.appengine.tools.info.UpdateCheck.checkForUpdates(UpdateCheck.java:99)
    at com.google.appengine.tools.info.UpdateCheck.doNagScreen(UpdateCheck.java:174)
    at com.google.appengine.tools.info.UpdateCheck.maybePrintNagScreen(UpdateCheck.java:142)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.maybePerformUpdateCheck(AppEngineLauncher.java:115)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:81)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:53:48.470

默认情况下，开发服务器在启动期间检查更新，您可以使用禁用它[`--disable_update_check`](https://developers.google.com/appengine/docs/java/tools/devserver#Command_Line_Arguments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T12:55:01.533

您可以使用[appengine-sdk](https://cloud.google.com/appengine/downloads)中的 appcfg 命令来传递代理。对我来说，它奏效了。

例子 ：

```
appcfg --proxy=10.35.71.201:8080 update ../target/exploded_war 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-31T05:04:03.313

在[https://code.google.com/p/googleappengine/issues/detail?id=3131结尾](https://code.google.com/p/googleappengine/issues/detail?id=3131)

解决方案：创建一个文件名：`.appcfg_no_nag`

在用户路径`System.getProperty("user.home")`中，禁用更新操作。

# c++ - OpenCV 标签连接和计算图像区域的特征测量

> ID：10311476
> 
> 赞同：0
> 
> 时间：2012-04-25T07:48:00.643
> 
> 标签：c++, matlab, opencv, label, regions

我需要与以下 matlab 代码相关的帮助

[labelMap_1,num] = bwlabel(labelMap == 1);

labelMap1Stat = imfeature(labelMap_1,'Area','Centroid');

在 opencv 中，我发现我必须使用 bloblib 的几个线程。

但是假设我不想为了代码而使用它，因为我需要将此代码移植到 android 中并且我担心大小。如何在不使用 blob 库开销的情况下实现相同的目标。

如果没有解决方案，那么 bloblib 中的哪些方法会产生与这两个函数相同的结果？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:16:18.630

尝试使用与轮廓相关的函数，如[cvFindContours()](http://opencv.willowgarage.com/documentation/structural_analysis_and_shape_descriptors.html#cvFindContours)。

[本文](http://areshopencv.blogspot.in/2011/09/blobs-with-opencv-internal-function.html)提供了一些关于如何将 opencv 用于 blob 的见解。

您可以使用[cvMoments()](http://www.cs.indiana.edu/cgi-pub/oleykin/website/OpenCVHelp/ref/OpenCVRef_Cv.htm#decl_cvMoments)函数计算质心信息。然后质心由 yc = M01 / M00 给出，其中 M01 和 M00 是 Moments 调用返回的结构中的字段。

使用[cvContourArea()](http://www710.univ-lyon1.fr/~bouakaz/OpenCV-0.9.5/docs/ref/OpenCVRef_StructAnalysis.htm#decl_cvContourArea)查找面积。

# apache - 需要想办法使用80端口

> ID：10311477
> 
> 赞同：0
> 
> 时间：2012-04-25T07:48:02.413
> 
> 标签：apache, xampp, port

我正在尝试使用 Xamp，但系统正在使用我的端口 80。现在我该怎么做 ？考虑到我不想更改 Xamp/Apache 端口。

编辑。我是从管理工具中找到的。PID 4，但是当我去任务管理器关闭它时，没有服务显示 PID 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:26:31.417

当实用程序显示系统使用端口 80 时，它实际上可能是 IIS。（不，我不知道为什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T14:34:44.800

在 Windows 中“World Wide Publishing Service 正在使用此端口，停止此服务将释放端口 80，您可以使用此端口连接 Apache。要停止服务，请转到“任务管理器 -> 服务选项卡”，右键单击“全球发布服务”并停止。

如果你没有找到那么然后去“运行> services.msc”并再次找到那里并右键单击“World Wide Publishing Service”并停止。

如果你没有找到“World Wide Publishing Service”然后去“运行>>resmon.exe>>网络选项卡>>监听端口”看看哪个进程正在使用端口80

![在此处输入图像描述](../Images/ecdfccb3fb24f265ea0824193c32ba3f.png)

从“Overview>>CPU”中右键单击该进程并单击“End Process Tree”。如果该过程是系统，则可能是一个关键问题。

# android - Android：打开软键板时出现带有线性布局的页脚

> ID：10311480
> 
> 赞同：0
> 
> 时间：2012-04-25T07:48:11.143
> 
> 标签：android

我的应用程序包含页眉、编辑文本、列表视图和页脚它工作正常......但是当软键盘打开编辑文本时，我的页脚出现了。

我还在清单中设置了 android:windowSoftInputMode="adjustPan" 。

我的布局如下

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/middle_bg"
android:focusable="true"
android:focusableInTouchMode="true"
android:orientation="vertical" >

<RelativeLayout
android:id="@+id/header1"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<include
android:id="@+id/header2"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentTop="true"
layout="@layout/header" />
</RelativeLayout>

<TableLayout
android:id="@+id/tbllayout"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_below="@id/header1"
>

<TableRow
android:layout_gravity="left"
android:background="@drawable/tit_bg" >

<TextView
android:id="@+id/lbltit"
android:layout_gravity="center_vertical"
android:layout_weight="2"
android:gravity="center"
android:text="Registered Websites"
android:textSize="20dp"
android:textStyle="bold" />
<Button
android:id="@+id/btnAddNewRege"
android:layout_gravity="center_vertical"
android:layout_weight="3"
android:background="@drawable/plus"
android:gravity="left" />
</TableRow>

<TableRow android:layout_width="fill_parent" >

<View
 android:id="@+id/vwhr1"
 android:layout_width="fill_parent"
 android:layout_height="10dip"
 android:layout_span="2" />
</TableRow>

<TableRow>
<EditText
android:id="@+id/txtSearch"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:layout_gravity="center"
android:background="@drawable/roundedtextview"
android:hint="Search"
android:textSize="13dp"
android:width="280sp"
/>

<Button
android:id="@+id/btnSearchMain"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:background="@drawable/search"
android:gravity="center" />
</TableRow>

<TableRow android:layout_width="fill_parent" >

<View
android:id="@+id/vwhr"
android:layout_width="fill_parent"
android:layout_height="10dip"
android:layout_span="2" />
</TableRow>
</TableLayout>

<LinearLayout
android:id="@+id/tblftr"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:isScrollContainer="true"
>

<TableLayout
android:id="@+id/btnpanel"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:stretchColumns="*" >

<TableRow
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@android:color/black"
> 

<Button
android:id="@+id/btnSetting"
android:layout_weight="1"
android:background="@drawable/settings"
android:width="40dp" />

<Button
android:id="@+id/btnAboutUs"
android:background="@drawable/about_us"
android:width="100dp" />

<Button
android:id="@+id/btnFeedback"
android:background="@drawable/feedback"
android:width="100dp" />
</TableRow>

<TableRow> 
<include
 android:id="@+id/include1"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_alignParentBottom="true"
 android:layout_gravity="bottom"
 layout="@layout/footer" />
 </TableRow>
 </TableLayout>
 </LinearLayout>

 <ListView
 android:id="@+id/lst"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:layout_above="@id/tblftr"
 android:layout_below="@id/tbllayout"
 android:cacheColorHint="@android:color/transparent"
 android:layout_centerHorizontal="true"      >
 </ListView>

 </RelativeLayout> 
```

请指导

感谢和问候米塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:01:41.817

您可以尝试将您的 RelativeLayout 放在`ScrollView`. `ListView`如果没有填满屏幕，这可能无法按预期工作，因为您必须`layout_width="wrap_content"`为您的`RelativeLayout`内部声明`ScrollView`，这会使您的页脚在`ListView`.

试试看它是否适合您的模型。

# c# - 如何让 .NET 表单始终位于另一个应用程序之上？

> ID：10311482
> 
> 赞同：4
> 
> 时间：2012-04-25T07:48:12.793
> 
> 标签：c#, .net, winforms, layout, window

我有一个作为主应用程序运行的 C++ 应用程序。.NET 应用程序也在并行运行，我通过套接字进行进程间通信。如何在 C++ 应用程序上方维护 .NET 主窗体？

方法：

*   目前我已经设置`TopMost = true`，但是当您打开另一个应用程序时这会导致问题：.NET 应用程序出现在所有其他应用程序之上。

*   另一种方法是检查您何时`LostFocus`，如果用户单击了 C++ 应用程序，那么您将 .NET 应用程序带到前台，如果用户切换到另一个应用程序则什么也不做。

有任何想法吗？以前做过吗？我在 Paint.NET 中看到了类似的效果，其中工具调色板保留在另一个窗口的顶部。

![油漆网](../Images/0bd14b41b8a46c2a030f5d3963cc214f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:12:46.617

在显示之前，您是否尝试过让 C++ 窗口成为 .NET 表单的[所有者？](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.owner.aspx)窗口句柄是会话全局的，因此您可以通过 IPC 进行通信。[Show](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)方法接受任何作为`IWin32Window`所有者。从 MSDN 页面：

> 当一个表单被另一个表单拥有时，它会与所有者表单一起关闭或隐藏。例如，考虑一个名为 Form2 的表单，它由名为 Form1 的表单拥有。如果 Form1 被关闭或最小化，Form2 也被关闭或隐藏。**拥有的表单也永远不会显示在其拥有者表单的后面。**

**回复评论**：

也许这还不够清楚：该`Owner`属性是 type ，因此一旦表单可见`Form`，您就不能为其分配任何对象。`IWin32Window`但`Form.Show` *确实*接受`IWin32Window`所有者参数 - 因此您可以在首次显示表单时将所有者设置为任何窗口。我在 Reflector 中看过`Form.Show`，据我所知，它应该处理任何`IWin32Window`参数，即使它不是`Form`.

如果您需要在第一次调用之后设置窗口所有者`Form.Show`，那么您可能必须 PInvoke `SetWindowLong`（[如本答案中所述](https://stackoverflow.com/questions/1095763/how-to-set-a-wpf-window-as-the-owner-of-a-winforms-form)）。这`Form.Show`也是如此。

# javascript - 如何将数据存储限制到本地存储并检索它？

> ID：10311488
> 
> 赞同：0
> 
> 时间：2012-04-25T07:48:26.813
> 
> 标签：javascript, html, cordova, local-storage

嗨，我需要限制添加到本地存储中的数据。如果用户添加第 6 个项目，我只需要存储 5 个项目，第一个项目应该被删除。我完成了那部分，但是在检索它时，它检索已删除的数据并跳过第四项。有任何想法吗？

我是如何设置的

```
 var _i = 0 //global;
 storage.setItem(_i, URL); 
```

检查限制

```
if(storage.length >= 5)
{
   var _a = storage.getItem(0);
   storage.removeItem( _a );
   _a += 1;
} 
```

取回时

```
for( var _x = 1; _x <= storage.length - 1; _x++)
{
  var _url = storage.getItem(_x);
} 
```

# 更新

哦，我忘了提到，当我使用键索引来获取项目时，它不会显示已删除的数据，但会以某种方式跳过第四个数据。

# 更新 2

现在它不会跳过第四条记录，但会显示已删除的数据并且不会显示最后添加的数据。例如

```
the //first
avengers //second
are //third
coming //fourth
now //fifth
excited //sixth 
```

由于我特别将其限制为五 (5) `the`，因此应从列表中删除并`excited`添加。它做得很好但是当我关闭应用程序并尝试检索它返回的数据时

```
the
avengers
are
coming
now 
```

它没有显示`excited`我有道理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:24:46.097

您不能依赖 Web 存储键的顺序。检查这个问题：[HTML5 localStorage key order](https://stackoverflow.com/questions/8340845/html5-localstorage-key-order)
如果你想这样做，只需使用一个将存储在 localStorage 中的数组对象。

# javascript - jQuery 工作流程

> ID：10311496
> 
> 赞同：0
> 
> 时间：2012-04-25T07:48:59.227
> 
> 标签：javascript, jquery

我有两个字段`Course name and Course code`，这个名称和课程的值是`"Master of Arts"`和`"MA"`，我正在尝试更新这些字段，因为这正在调用 jQuery 函数，

```
function updateData(obj) {

    var id = obj.id.split("_");    //here the value of id is "id[1,1,CODE]"

    var objId = id[0];             //objId=1
    var type = id[1];              //type=1

    var objUpdate = new Object();

    objUpdate.Id = objId;
    objUpdate.Name = $("#" + objId + "_" + type + "_NAME").val();
    objUpdate.Code = $("#" + objId + "_" + type + "_CODE").val();
} 
```

执行后`objUpdate.Name`的值是 as`"Master of Arts"`和`objUpdate.Code`as `"MA"`。

它是如何获得名称和代码的，谁能解释一下。

我在这里使用的 HTML 是

```
<table class='acListTable' id='#ID#TYPE'>
    <tr>
        <td>
            <input type='text' class='acEditBox' id='#ID_#TYPE_NAME' value='#NAME'/>
        </td>
    </tr>
    <tr>
        <td>
            <input type='text' class='acEditBox' id='#ID_#TYPE_CODE' value='#CODE'/>
        </td>
    </tr>
</table> 
```

# c - 如何判断一个IP地址是局域网IP还是广域网IP？

> ID：10311501
> 
> 赞同：-1
> 
> 时间：2012-04-25T07:49:09.200
> 
> 标签：c, networking, ip, lan, wan

如何确定一个 IP 地址是 LAN IP 地址还是 WAN IP 地址？我正在 Windows 中编写 C API。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T07:51:41.807

最有可能的是，您要确定该地址是全局地址还是[私有地址](http://en.wikipedia.org/wiki/Private_network)。维基百科文章列出了保留供私人使用的地址块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:54:40.573

私有 IP 地址通常从**私有 IP 地址空间**中设置：

*   `10.0.0.0/8`
*   `172.16.0.0/12`
*   `192.168.0.0/16`

如果接口的 IP 地址属于这些空间之一，您可以假设它是**私有 IP**。否则，它是**公共 (WAN) IP**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:56:21.963

LAN 与 WAN 在 TCP/IP 中毫无意义。只有网络掩码。如果您可以根据 IP 网络掩码定义 LAN 的含义，那么问题就很简单了：`and`网络掩码的 IP 地址是否给出非零结果。如果你不能定义，就没有解决方案。

# android - Android：如何使用服务注册未运行的应用程序？

> ID：10311504
> 
> 赞同：1
> 
> 时间：2012-04-25T07:49:25.817
> 
> 标签：android

背景：Android 提供了一种很好的数据备份方法。要在执行系统范围的备份时备份应用程序的数据，应用程序应在应用程序清单中指定一个备份代理作为其应用程序标记的属性。

```
<application android:label="MyApplication"
         android:backupAgent="MyBackupAgent"> 
```

问：我想为我正在创建的文件检索服务使用类似的机制。我的问题是，如何以编程方式扫描应用程序标签中具有给定属性的应用程序，并启动与该属性关联的对象？这可能吗？

请注意，目标应用程序可能不一定正在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:49:25.160

我想通了。查看 Android 源代码后，我发现无法扩展标准标签的属性。相反，元数据可用于实现类似的结果。

我设计的解决方案是在我希望在我的服务中“注册”的应用程序中包含一个元数据标签。例如：

AndroidManifest.xml（目标应用程序）

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <meta-data android:name="MyAttribute" android:value="myvalue" /> 
```

我开发的服务会扫描已安装的软件包以查找具有相关元数据的软件包：

```
List<PackageInfo> packages = getPackageManager().getInstalledPackages(PackageManager.GET_META_DATA);
for (int a = packages.size();-1; a >= 0; a--) { 
    PackageInfo pkg = packages.get(a);       
    ApplicationInfo ai = packages.get(a).pkg.applicationInfo;
    boolean remove = true;
    if (ai.metaData != null && ai.metaData.get("LogRetrievalAgent") != null) {
    remove = ai.metaData.get("LogRetrievalAgent").toString().compareTo("test") != 0;
    }

    if (remove) {
        packages.remove(pkg);
    }
} 
```

# mysql - 在ubuntu上更新mysql版本后数据是否可以更改？

> ID：10311507
> 
> 赞同：0
> 
> 时间：2012-04-25T07:49:50.503
> 
> 标签：mysql

我通过apt-get更新了mysql。在我注意到列中的一些数据被更改后不久。此列的数据类型是 int(3)，但数据类似于 403929319494。这可能吗？还是我被黑了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:59:21.507

这不是黑客攻击。

[http://dev.mysql.com/doc/refman/5.6/en/numeric-type-attributes.html](http://dev.mysql.com/doc/refman/5.6/en/numeric-type-attributes.html) *显示宽度不限制可以存储在列中的值的范围。它也不会阻止正确显示比列显示宽度更宽的值。例如，指定为 SMALLINT(3) 的列的 SMALLINT 范围通常为 -32768 到 32767，超出三位数允许范围的值将使用多于三位的完整显示。*

# glassfish - GlassFish 3.1.2 中 PostConstruct 方法的 EJB 查找

> ID：10311508
> 
> 赞同：1
> 
> 时间：2012-04-25T07:50:02.093
> 
> 标签：glassfish, ejb, glassfish-3, lookup, postconstruct

在 Glassfish 3.1.2 上部署 ear 并尝试从 Web 服务中的 @PostConstruct 方法查找 EJB bean：

```
 @PostConstruct
   public void init()
   {
      try
      {
         InitialContext initialContext = new InitialContext();

         browserService = (IBrowserService) initialContext.lookup("java:comp/env/BrowserService");
      }
      catch (NamingException ex)
      {
         Logger.getLogger(BrowserWS.class.getName()).log(Level.SEVERE, null, ex);
      }

   } 
```

并得到

[#|2012-04-25T10:15:54.768+0300|SEVERE|glassfish3.1.2|browser.service.BrowserWS|_ThreadID=22;_ThreadName=admin-thread-pool-4848(4);|javax.naming.NamingException : 在 SerialContext [myEnv={java.naming.factory.initial=com.sun.enterpri se.naming.impl.SerialInitContextFactory, java.naming.factory.state=com 中查找“java:comp/env/BrowserService”失败。 sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.ur l.pkgs=com.sun.enterprise.naming} [根异常是 javax.naming.NamingException: Invocation exception: Got null ComponentInvocation]在 com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518) 在 com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)

当我尝试从网络方法做同样的事情时，一切正常。

```
@WebMethod
   public XmlLookupResult lookup(
      @WebParam(name = "inLookupId", mode = WebParam.Mode.IN) String id,
      @WebParam(name = "inLookupParams", mode = WebParam.Mode.IN) List<String> params,
      @WebParam(name = "inFetchLimit", mode = WebParam.Mode.IN) int limit)
   {

      try
      {
         InitialContext initialContext = new InitialContext();

         browserService = (IBrowserService) initialContext.lookup("java:comp/env/BrowserService");
      }
      catch (NamingException ex)
      {
         Logger.getLogger(BrowserWS.class.getName()).log(Level.SEVERE, null, ex);
      }

      return browserService.lookup(id, params, limit);
   } 
```

那么，为什么我不能从 @PostConstruct 方法中查找 bean？

根据规范，JNDI 可以从 PostConstruct 访问 java:comp/env ...

谢谢

升级版：

BrowserService 在 web.xml 中声明为

```
<ejb-local-ref>
   <ejb-ref-name>BrowserService</ejb-ref-name>
   <local>browser.service.IBrowserService</local>
</ejb-local-ref> 
```

# c# - 内部类对象到外部类构造函数到c#

> ID：10311519
> 
> 赞同：3
> 
> 时间：2012-04-25T07:50:54.217
> 
> 标签：c#, .net, inner-classes

我们可以在外部类的构造函数中将内部类的对象创建到C#中吗？合法吗？

```
public class Outer
{
    public Inner InnerObj {get; set; }

    public Outer()
    {
        Inner inner = new Inner();
    }

    public Outer(Inner inner)
    {
        InnerObj = inner;
    }

    public class Inner
    {
    }
} 
```

对于 Java，我从下面的链接中获取参考： [我们可以在外部类的构造函数中创建内部类的对象吗？](https://stackoverflow.com/questions/2208012/can-we-create-an-object-of-the-inner-class-in-the-constructor-of-the-outer-class)

我的同事说这在 C# 中是不可能的，而且是完全非法的。请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:57:35.027

如果您将 Inner 类声明为 public

```
public class Inner { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:57:44.623

您的代码的问题是调用代码如何知道内部 obj 是什么，因为在外部类之外无法访问它。

更好的设计是将内部类放在外部类之外，这样它就不会那么紧密耦合。还将对象传递给接口。

```
public class Outer
{        
    public Outer(IInner inner)
    {

    }
}

public class Inner: IInner
{
}

public Interface IInner
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T08:07:39.190

当然，这是可能的。从技术上讲，您的代码没有任何问题（如果您将内部公开或外部类设为内部）。

但是请注意，不建议使用公共嵌套类，有关详细信息，请参阅此问题：

*   [C#，可以使用嵌套类进行逻辑结构吗？](https://stackoverflow.com/questions/7402849/c-is-it-okay-to-use-nested-classes-for-logical-structure)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:02:39.203

`Inner`在is not之前这是非法的（导致编译器错误）`public`。

标记为公开后，它是绝对合法的。

# android - 我想显示像 iphone HUD 进度条这样的自定义对话框

> ID：10311521
> 
> 赞同：9
> 
> 时间：2012-04-25T07:51:01.620
> 
> 标签：android

我想显示像 iphone hud 进度条样式这样的自定义对话框。但是，我不知道要在 android 上创建像 iphone 这样的 hud 进度条这样的自定义对话框。

我想要如下图所示的自定义对话框：

![在此处输入图像描述](../Images/e807baecba1db23cd3df6f85ef1bb8bd.png)

帮帮我……！

谢谢...！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-10T06:02:57.840

我创建了一个示例 Android 应用程序和一个 ProgressHUD 类，您可以将其用于此目的。你可以在这里找到它： [https ://github.com/anupamdhanuka/AndroidProgressHUD](https://github.com/anupamdhanuka/AndroidProgressHUD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-17T10:01:27.700

看看这个（我的）图书馆。[IOSDialog/Spinner 库](https://github.com/Samehadar/IOSDialog)

它非常易于使用并解决了您的问题。有了它，您可以像在 IOS 中一样轻松创建和使用微调器。代码示例：

```
final IOSDialog dialog1 = new IOSDialog.Builder(IOSDialogActivity.this)
            .setOnCancelListener(new DialogInterface.OnCancelListener() {
                @Override
                public void onCancel(DialogInterface dialog) {
                    dialog0.show();
                }
            })
            .setDimAmount(3)
            .setSpinnerColorRes(R.color.colorGreen)
            .setMessageColorRes(R.color.colorAccent)
            .setTitle(R.string.standard_title)
            .setTitleColorRes(R.color.colorPrimary)
            .setMessageContent("My message")
            .setCancelable(true)
            .setMessageContentGravity(Gravity.END)
            .build(); 
```

[结果](https://i.stack.imgur.com/d3LVY.gif)

```
 final IOSDialog dialog0 = new IOSDialog.Builder(IOSDialogActivity.this)
            .setTitle("Default IOS bar")
            .setTitleColorRes(R.color.gray)
            .build(); 
```

结果：标准 IOS 对话框

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T08:10:11.787

```
 private class loadassync extends
        AsyncTask<String, Void, Void> {

    private final ProgressDialog dialog = new ProgressDialog(
            classname.this);

    protected void onPreExecute() {

        this.dialog.setMessage("loading.....");
        this.dialog.show();
    }

    protected Void doInBackground(final String... args) {

        //add the logic while loading
    }

    protected void onPostExecute(final Void unused) {

        try {
            //add the logic after loading
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        if (this.dialog.isShowing()) {
            this.dialog.dismiss();
        }

    }
} 
```

执行 assynctask

```
 Loadassync mAssyn1 = new LoadAssync();
                mAssyn1.execute(); 
```

# android - 构建引用 Facebook 的 Android 项目时出错

> ID：10311525
> 
> 赞同：3
> 
> 时间：2012-04-25T07:51:27.573
> 
> 标签：android, eclipse, facebook, build

我在我的 Android 项目中运行一个构建目标，它在控制台日志中失败了：

```
-setup:
     [echo] Creating output directories if needed...
     [echo] Gathering info for MyGameProject...
    [setup] Android SDK Tools Revision 19
    [setup] Project Target: Android 2.2
    [setup] API level: 8
    [setup] 
    [setup] ------------------
    [setup] Resolving library dependencies:
    [setup] E:\Android\workspace\MyGameProject: ../../facebook-android-sdk/facebook => E:\Android\facebook-android-sdk\facebook
    [setup] ------------------
    [setup] Ordered libraries:
    [setup] E:\Android\facebook-android-sdk\facebook
    [setup] ------------------
    [setup] API<=15: Adding annotations.jar to the classpath.
    [setup] ------------------
-build-setup:
     [echo] Building Libraries

BUILD FAILED
E:\Android\workspace\MyGameProject\build.xml:51: The following error occurred while executing this line:
C:\Android\android-sdk-windows\tools\ant\build.xml:515: The following error occurred while executing this line:
Target "${build.target}" does not exist in the project "facebook". 
```

有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:40:06.140

facebook-android-sdk 默认没有 build.xml

您可以创建；转到 facebook-sdk 目录并执行命令行：

```
android update project -p . 
```

# google-docs-api - 多个集合在 Google 云端硬盘中不再有效？

> ID：10311533
> 
> 赞同：1
> 
> 时间：2012-04-25T07:51:54.953
> 
> 标签：google-docs-api, google-drive-api

我们在 Document List API 中广泛使用（来自应用程序），一个文件/文档可以分配给多个集合，以便以与标签类似的方式工作。这已经被弃用了吗？至少从 Web 用户界面来看，一个文件只能分配一个文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:09:21.417

在这里工作正常，可以成功分配多个集合。

右键单击一个文件，选择“组织”并选中您希望文档成为其中一部分的每个集合旁边的框。

# android - Android 无法实例化应用程序 java.lang.ClassNotFoundException：

> ID：10311537
> 
> 赞同：28
> 
> 时间：2012-04-25T07:52:16.743
> 
> 标签：android

我正在开发托管在 android 市场上的应用程序。有时（每月一次）我收到一份崩溃报告：

> 无法实例化应用程序 java.lang.ClassNotFoundException

应用下载量在 10,000-50,000 之间。我不知道为什么在某些设备上不是全部都会出现这种异常（我在 3 种不同的设备上对其进行了测试，但我最终无法重新生成它）。

我在不同的 android 论坛上阅读了有关该问题的文章/建议，但我没有成功解决它。有没有人面临类似的问题并建议我该怎么做？

**注意：** 我正在扩展这样的应用程序类

```
public class MyApplication extends Application {

} 
```

我像这样在 manifest.xml 中注册它

```
<application android:icon="@drawable/app_icon"
    android:label="@string/my_app_name" android:name="MyApplication"> 
```

**堆栈跟踪 ：**

```
java.lang.RuntimeException: Unable to instantiate application  com.xyz.MyApplication      java.lang.ClassNotFoundException: com.xyz.MyApplication in loader dalvik.system.PathClassLoader[/mnt/asec/com.xyz-1/pkg.apk]
at android.app.ActivityThread$PackageInfo.makeApplication(ActivityThread.java:650)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4238)
at android.app.ActivityThread.access$3000(ActivityThread.java:126)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2076)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4633)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.xyz.MyApplication in loader dalvik.system.PathClassLoader[/mnt/asec/com.xyz-1/pkg.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
at android.app.Instrumentation.newApplication(Instrumentation.java:942)
at android.app.ActivityThread$PackageInfo.makeApplication(ActivityThread.java:645) 
```

我不知道为什么应用程序在某些设备上崩溃并非全部。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T08:21:56.720

其他一些类似的问题表明这可能是用户错误。“/mnt/asec/...”表示应用程序正在从 sdcard 运行。如果 SD 卡被移除，可能会导致此错误。3rd 方应用程序或 root 设备可能会将应用程序移动到 sdcard，即使清单不允许。

[类似问题](https://stackoverflow.com/questions/11110042/how-to-resolve-java-lang-classnotfoundexception-in-activitythread-performlauncha)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T06:32:00.437

我认为问题在于我在 10 个不同的地方使用过的 getApplication()。所以我使用单例模式来解决这个问题。

```
public class MyApplication extends Application {
    private static MyApplication me;

    @Override
    public void onCreate() {        
        super.onCreate();
        me = this ;

    }
    public static MyApplication getInstance() {
         return me;
    }
} 
```

现在我已经像这样使用 getApplication()

```
 MyApplication application = MyApplication.getInstance(); 
```

安装的

```
 MyApplication application = (MyApplication) getApplication(); 
```

我已经在市场上上传了固定版本，现在等待是否有这种崩溃。如果一切顺利（如果 2 周内不再崩溃），那么我将结束这个问题。同时任何人有更好的想法或知道解决方案，请分享。
谢谢，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T12:14:25.203

就我而言，我正在使用 Eclipse ADT 编译和签名（使用文件 > 导出 > 导出 Android 应用程序...），但如果我反编译我的 .apk，则会丢失一些类。为了解决这个问题，我使用“导出未签名的 APK”并使用 jarsigner 和 zipalign 对其进行签名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T07:53:57.177

```
 android:name=".MyApplication" 
```

还可以考虑添加完整包

# django - Python Django 会话

> ID：10311538
> 
> 赞同：0
> 
> 时间：2012-04-25T07:52:28.450
> 
> 标签：django

我是 django 的新手。

我有这个民意调查应用程序，我想限制选民每次投票每次投票一次。例子：

民意调查#1

民意调查 #2

当我将投票给投票#1，之后我不能投票给投票#1，但我可以投票给投票#2。

所以我决定将投票 id 放入一个列表中，然后检查它是否在那里。

```
poll_list = [] #declare the poll_list variable

@login_required
@never_cache
def vote(request, poll_id):
    global poll_list #declare it as global
    p = get_object_or_404(Poll, pk=poll_id)
    try:
        selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        return render_to_response('polls/detail.html', {
            'poll': p,
            'error_message': "You didn't select a choice.",
        }, context_instance=RequestContext(request))
    else:
        if poll_id in request.session['has_voted']: #here is the checking happens
            return HttpResponse("You've already voted.")

        selected_choice.votes += 1
        selected_choice.save()

        poll_list.append(poll_id) #i append the poll_id
        request.session['has_voted'] = poll_list #pass to a session
        return HttpResponseRedirect(reverse('poll_results', args=(p.id,)))
    return HttpResponse("You're voting on poll %s." % poll_id) 
```

我收到一个错误：

```
KeyError at /polls/3/vote/
'has_voted' 
```

点击投票按钮后会提示此错误

谁能帮我解决这个问题？

谢谢，贾斯汀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:58:25.777

如果你还没有投票，`request.session['has_voted']`还没有被设置，那么你会得到一个 KeyError 因为`'has_voted'`密钥丢失。

您可以使用,缺失`request.session.get('has_voted', [])`时默认为空列表。`has_voted`

（请注意，这`has_voted`听起来像是一个真/假值，`voted_on`可能会更好）。

# objective-c - CLPlacemark.subThoroughfare 奇怪的字符？

> ID：10311543
> 
> 赞同：2
> 
> 时间：2012-04-25T07:52:43.400
> 
> 标签：objective-c, ios, geocoding

当注销或发送（使用 RestKit 的 Web 服务）时，CLPlacemark 的 subThoroughfare 属性会出现在我期望连字符出现的位置。

记录：

```
NSLog(@"%@", placemark.subThoroughfare); 
```

结果是：

```
12- 
```

我期望12-15的地方。15号不见了。

此外，在将 subThoroughfare 字符串发送到 JSON 服务时，我在请求中看到以下内容：

```
12â??15 
```

15 存在，但是连字符被奇怪的字符替换。

无法通过 Google/SO 找到解决方案，我们将不胜感激。

编辑：记录到控制台的地址的更完整示例是：

```
 Placemark Address: 34‚Äì36 Friars Way, Eaton, Engla 
```

请注意，当 ‚Äì 替换连字符 (-) 时，最后 2 个字符也丢失了（应为“England”）。我正在研究编码，但还没有走远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:45:52.793

原来奇怪的字符是由于 LLDB 调试器无法正确显示 Unicode 字符...切换到 GDB 正确显示了字符。

# jquery - 对话框内的jquery-ui datepicker未加载

> ID：10311547
> 
> 赞同：0
> 
> 时间：2012-04-25T07:52:55.877
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui

我正在尝试显示一些包含表单的模式对话框，而无需进入实际视图。

一切正常，直到我想为其中一个字段添加日期选择器。

**在我的意见/计划/_form 我有：**

```
<%= simple_form_for [@customer, @plan], :remote => true do |f| %>
  <fieldset>
    <%= f.input :price  %>
    <%= f.input :guests %>
    <%= f.input :start_date, :as => :string, :input_html => { :class => 'date_picker' } %>
    <%= f.input :end_date, :as => :string, :input_html => { :class => 'date_picker' } %>
    <div class="form-actions">
      <%= f.button :submit %>
    </div>
  </fieldset>
<% end %> 
```

**我从另一个角度称之为：**

```
<%= link_to 'New Plan', new_customer_plan_path(session[:customer_id]), :class => 'btn btn-primary', :remote => true, :id => 'create_plan_link' %> 
```

**在我的 application.js 我有：**

```
$(document).ready(function() {
        $('#create_plan_link').click(function(e) {
var url = $(this).attr('href'); 
$('#modal').dialog({
       title: "New Plan",       
       draggable: true,
       resizable: false,
       modal: true,
       width:'auto',
       open: function(event, ui){
             return $(this).load(url + ' #content');
            $("input.date_picker").datepicker();}               
});
});
    }); 
```

现在，就实际表单而言，一切正常，但在选择字段时它不显示日期选择器。

**当表单加载时，我进入控制台并输入：**

```
$("input.date_picker").datepicker(); 
```

那么它的工作原理！所以我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T07:58:13.353

在您的代码中，您在调用创建日期选择器的行之前返回（退出）该函数。像这样更改顺序：

```
 open: function(event, ui){
         $("input.date_picker").datepicker();
         return $(this).load(url + ' #content');
        } 
```

希望能帮助到你！

**编辑**：在意识到您实际上是通过 ajax 加载表单后，调用该行时您的 datepicker 元素将不存在。您必须为 jQuerys 加载函数提供回调，该函数在内容加载后执行，如下所示：

```
 open: function(event, ui){
         return $(this).load(url + ' #content', function() {
                 $("input.date_picker").datepicker();
             });
        } 
```

# javascript - 从一个框架的页面调用 javascript 函数到另一个框架的页面，给出“权限被拒绝”错误

> ID：10311554
> 
> 赞同：0
> 
> 时间：2012-04-25T07:53:27.813
> 
> 标签：javascript, iframe, frames

我有一个页面，其中包含 2 个框架的框架集。我在 frame1 中加载[http://testhost/test.aspx](http://testhost/test.aspx) [，](http://otherhost/test2.aspx)在 frame2 中加载 http://otherhost/test2.aspx 。现在，我想使用父元素和子元素从 test2.aspx 调用 test.aspx 的 javascript 函数。但是我收到“权限被拒绝”错误，因为两个页面都来自不同的域。

**请注意 test.aspx 和 test2.aspx 位于两个不同的主机下。**

请通过建议解决此问题来帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:34:12.090

你不能直接调用它们，如果你同时控制了test.aspx和test2.aspx，通信是可能的。您可以在支持的浏览器中使用来自[HTML5的](http://www.whatwg.org/specs/web-apps/current-work/multipage/web-messaging.html#web-messaging)[postMessage 。](https://developer.mozilla.org/en/DOM/window.postMessage)

[对于不支持 postMessage 的浏览器](http://caniuse.com/#feat=x-doc-messaging)（例如[easyXDM](https://github.com/oyvindkinsey/easyXDM/#readme) ） ，使用带有后备功能的库会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:09:40.443

您遇到“同源策略”问题，因为页面位于两个不同的域中。

最好的“解决方案”。

[https://developer.mozilla.org/en/document.domain](https://developer.mozilla.org/en/document.domain)

# xml - Perl：将编辑的字段保存到同一个 XML 文件中

> ID：10311562
> 
> 赞同：4
> 
> 时间：2012-04-25T07:54:16.520
> 
> 标签：xml, perl

我一周前才开始使用 Perl，我是一名编程新手。请帮助，因为我的公司项目依赖于此。

**情况：**

我想打开一个 XML 文件，在本例中是 Library.xml 并使用特定的“ISBN”编号编辑 XML 文档。找到 ISBN 编号后，我想更改具有匹配“ISBN”编号的特定书籍的页数。

**问题：**

现在，我可以执行上述操作，但是，我需要以相同的名称“library.xml”保存更新的 XML，并保持原始 XML 文档的 XML 结构。这就是我难住的地方。我尝试过使用 XML::DUMPER 和 XML::TWIG 以及可能其他人，但都失败了。

**原始 XML 文档：**

library.XML 如下所示：

```
<library>
  <book>
    <title>Perl Best Practices</title>
    <author>Damian Conway</author>
    <isbn>0596001738</isbn>
    <pages>542</pages>
    <image src="http://www.oreilly.com/catalog/covers/perlbp.s.gif"
           width="145" height="190" />
  </book>
  <book>
    <title>Perl Cookbook, Second Edition</title>
    <author>Tom Christiansen</author>
    <author>Nathan Torkington</author>
    <isbn>0596003137</isbn>
    <pages>964</pages>
    <image src="http://www.oreilly.com/catalog/covers/perlckbk2.s.gif"
           width="145" height="190" />
  </book>
  <book>
    <title>Guitar for Dummies</title>
    <author>Mark Phillips</author>
    <author>John Chappell</author>
    <isbn>076455106X</isbn>
    <pages>392</pages>
    <image src="http://media.wiley.com/product_data/coverImage/6X/07645510/076455106X.jpg"
         width="100" height="125" />
  </book>
</library> 
```

**编码：**

以下是我试图操纵但没有成功的代码。

```
#!/usr/bin/perl

use strict;
use warnings;
#use XML::Simple qw(:strict);

use XML::LibXML;
use XML::Dumper;

my $dump = new XML::Dumper;

my $perl = ' ';
my $xml  = $dump->pl2xml( $perl );

my $filename = 'library.xml';

my $isbn   = '0596001738';

my $parser = XML::LibXML->new();
my $doc    = $parser->parse_file($filename);

my $query  = "//book[isbn = '$isbn']/pages/text()";

my($node)  = $doc->findnodes($query);
$node->setData('99999');

$perl = $doc->toString;

$xml = $dump->pl2xml( $perl, "library.xml" ); 

print $doc->toString; 
```

**输出：**

以下是我的输出。输出与原始 XML 文档不同。

```
<perldata>
<scalar>&lt;xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;&gt;
&lt;library&gt;
  &lt;book&gt;
    &lt;title&gt;Perl Best Practices&lt;/title&gt;
    &lt;author&gt;Damian Conway&lt;/author&gt;
    &lt;isbn&gt;0596001738&lt;/isbn&gt;
    &lt;pages&gt;99999&lt;/pages&gt;
    &lt;image src=&quot;http://www.oreilly.com/catalog/covers/perlbp.s.gif&quot; width=&quot;145&quot; height=&quot;190&quot;/&gt;
  &lt;/book&gt;
  &lt;book&gt;
    &lt;title&gt;Perl Cookbook, Second Edition&lt;/title&gt;
    &lt;author&gt;Tom Christiansen&lt;/author&gt;
    &lt;author&gt;Nathan Torkington&lt;/author&gt;
    &lt;isbn&gt;0596003137&lt;/isbn&gt;
    &lt;pages&gt;964&lt;/pages&gt;
    &lt;image src=&quot;http://www.oreilly.com/catalog/covers/perlckbk2.s.gif&quot; width=&quot;145&quot; height=&quot;190&quot;/&gt;
  &lt;/book&gt;
  &lt;book&gt;
    &lt;title&gt;Guitar for Dummies&lt;/title&gt;
    &lt;author&gt;Mark Phillips&lt;/author&gt;
    &lt;author&gt;John Chappell&lt;/author&gt;
    &lt;isbn&gt;076455106X&lt;/isbn&gt;
    &lt;pages&gt;392&lt;/pages&gt;
    &lt;image  src=&quot;http://media.wiley.com/product_data/coverImage/6X/07645510/076455106X.jpg&quot;  width=&quot;100&quot; height=&quot;125&quot;/&gt;
  &lt;/book&gt;
&lt;/library&gt;
  </scalar>
</perldata> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T09:38:20.000

您没有充分的理由混合 XML 模块 - 编程的第一步是了解您在做什么，您不能只是将代码放在一起并期望它以某种方式完成您的意思。

从您的程序中删除 18 行后，代码如下所示并且工作正常：

```
#!/usr/bin/perl
use strict;
use warnings;
use XML::LibXML;

my $filename = 'library.xml';
my $isbn   = '0596001738';

my $parser = XML::LibXML->new();
my $doc    = $parser->parse_file($filename);
my $query  = "//book[isbn = '$isbn']/pages/text()";
my($node)  = $doc->findnodes($query);
$node->setData('99999');
print $doc->toString; 
```

唯一缺少的是将更改的文档写回文件中：

```
$doc->toFile('library.xml'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-25T08:15:39.523

[XML::Twig](http://search.cpan.org/~mirod/XML-Twig-3.39/Twig.pm)解决方案：

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Twig;

# That's probably not how you get the data
my %isbn_to_pages= ( '0596001738' => 999, 
                     '076455106X' => 123,
                   );

XML::Twig->new( twig_handlers => { book => \&book },
                keep_spaces => 1,
              )
            # the second argument creates a backup file book_data.xml.bak
          ->parsefile_inplace( 'book_data.xml', '.bak'); 

sub book
  { my( $t, $book)= @_;
    my $isbn= $book->field( 'isbn');
    if( my $pages= $isbn_to_pages{$isbn})
      { $_->first_child( 'pages')->set_text( $pages); }
    $t->flush;
  } 
```

# java - 使用 JAVA 比较两个 xml 文件

> ID：10311563
> 
> 赞同：7
> 
> 时间：2012-04-25T07:54:18.070
> 
> 标签：java, xml

我必须说 xml 文件说 abc.xml 和 123.xml 几乎相似，我的意思是具有相同的内容，但第二个，即 123.xml 比前一个有更多的内容。我想使用 Java 读取这两个文件，并比较每个标签的 abc.xml 中存在的内容是否与 123.xml 中的内容相同，类似于对象比较。请建议我如何使用 java 读取 xml 文件并开始比较。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T08:05:35.780

如果你只是想比较然后使用这个：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
dbf.setNamespaceAware(true);
dbf.setCoalescing(true);
dbf.setIgnoringElementContentWhitespace(true);
dbf.setIgnoringComments(true);
DocumentBuilder db = dbf.newDocumentBuilder();

Document doc1 = db.parse(new File("file1.xml"));
doc1.normalizeDocument();

Document doc2 = db.parse(new File("file2.xml"));

doc2.normalizeDocument();
Assert.assertTrue(doc1.isEqualNode(doc2)); 
```

否则请参阅此 [http://xmlunit.sourceforge.net/](http://xmlunit.sourceforge.net/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T08:06:20.743

我会选择[XMLUnit](http://xmlunit.sourceforge.net/)。它提供的功能：

*   两段 XML 的区别
*   使用 XSLT 转换一段 XML 的结果
*   对一段 XML 的 XPath 表达式求值
*   一段 XML 的有效性
*   由 DOM Traversal 公开的一段 XML 中的各个节点

祝你好运！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T08:04:43.030

我会使用 JAXB 从 XML 文件生成 Java 对象，然后比较 Java 文件。他们将使处理更容易。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T08:12:44.463

一般来说，如果您知道您有两个具有相同结构但略有不同且内容无序的文件，您将不得不“读取”这些文件以比较内容。

如果您的 XML 文件有 XML Schema，那么您可以使用[JAXB](http://jaxb.java.net/)创建一组类，这些类将表示由 XML 模式定义的特定 DOM。这种方法的好处是您不必通过元素和属性的通用函数来解析 XML 文件，而是通过对您的问题有意义的实际字段来解析 XML 文件。

当然，为了能够检测到两个文件中是否存在相同的条目，您必须通过一些公共字段（例如，一些 ID）“匹配”它们。

为了帮助您进行重复发现过程，您可以使用 Java 集合中的一些相关数据结构，例如[Set](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)（或其派生词之一）

我希望这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T08:00:17.367

好吧，如果您只想比较和显示，那么您可以使用[Guiffy](http://www.guiffy.com/)

这是一个很好的工具。如果您想在后端进行处理，那么您必须使用 DOM 解析器将两个文件加载到 2 个 DOM 对象并逐个比较属性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-25T08:38:12.113

正确的方法取决于两个因素：

(a) 您希望对如何进行比较进行多少控制？例如，您是否需要控制空格是否重要、是否应忽略注释、是否应忽略名称空间前缀、是否应忽略多余的名称空间声明、是否应忽略 XML 声明？

(b) 你想要什么答案？(i) 布尔值：相同/不同，(ii) 适合人类处理的差异列表，(iii) 适合应用程序处理的差异列表。

我使用的两种技术是：(a) 将两个文件都转换为规范 XML，然后比较字符串。这几乎没有控制，只给出一个布尔结果。(b) 使用 XPath 2.0 deep-equal() 函数或扩展的 Saxon 版本 saxon:deep-equal() 比较两棵树。Saxon 版本可以更好地控制比较的完成方式，并提供更详细的发现差异报告（供人类阅读，而不是供应用程序使用）。

如果您想编写 Java 代码，您当然可以实现自己的比较逻辑 - 例如，您可以找到 XPath deep-equal 的开源实现，并对其进行修改以满足您的要求。它只有一百行左右的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T08:07:18.833

这有点矫枉过正，但如果您的 XML 有模式，您可以将其转换为 EMF 元模型，然后使用 EMF 比较进行比较。

# groovy - 如何在groovy中将一行限制为每行80个字符

> ID：10311567
> 
> 赞同：2
> 
> 时间：2012-04-25T07:54:39.827
> 
> 标签：groovy

`LineFeed`我有一个字符串，它在每行之后包含一些格式化的内容。我想格式化该变量的内容以限制每行不超过 80 个字符。

有人可以在 Groovy 中帮助我吗？

出于测试目的，我将内容复制到文件中

```
String fileContents = new File('E://Projects//temp//license').text
println fileContents 
```

fileContents 内容或控制台输出

```
List of connectivities are:
    Valid [Metadata Exchange for Microsoft Visio]
   Valid [Metadata Exchange for Microstrategy]
   Valid [Metadata Exchange for Microsoft SQL Server Reporting Services and Analysis Services]
   Valid [Metadata Exchange for Netezza]
   Valid [Metadata Exchange for Oracle]
   Valid [Metadata Exchange for Oracle BI Enterprise Edition]
   Valid [Metadata Exchange for Oracle Designer]

Command ran successfully 
```

**更新**

这是我在 tim_yates 回答后使用的

```
def es=lic.entrySet()
xml.licInfo() {
    int i=0
    es.each{
        if(!it.key.contains("failed with error"))
        {
            String val=new String(it.value)
            license(name:it.key,value:trimOutput(val),assignedTo:resultRows[i++])

        }
    }       
}

def trimOutput(text)
{

    text=text.tokenize( '\n' )*.toList()*.collate(90)*.collect { it.join() }.flatten().join( '\n' )
    text
} 
```

但是给了我以下异常

```
Exception in thread "main" groovy.lang.MissingMethodException: No signature of method: java.util.ArrayList.collate() is applicable for argument types: (java.lang.Integer) values: [90]
Possible solutions: clone(), collect(groovy.lang.Closure), collect(groovy.lang.Closure), clear(), clear(), clear() 
```

**更多更新（println es 的控制台输出）**

```
[license_all =Edition:          BAAC Standard
Software Version:  6.5
Distributed by:    ABC
Issued on:         2012-Feb-06
Validity period:   Non-Expiry
Serial number:     210502
Deployment level:  Production

List of supported platforms are:
   [All operating systems] is authorized for [100] logical CPUs
Number of authorized repository instances: 100
Number of authorized CAL usage count: 100

List of connectivities are:

   Valid [Metadata Exchange for Microsoft SQL Server Reporting Services and Analysis Services]
   Valid [Metadata Exchange for Netezza]
   Valid [Metadata Exchange for Oracle]
   Valid [Metadata Exchange for Oracle BI Enterprise Edition]
   Valid [Metadata Exchange for Oracle Designer]
   Valid [Metadata Exchange for Oracle Warehouse Builder]
   Valid [Metadata Exchange for Popkin System Architect]
   Valid [Metadata Exchange for SAP R/3]
   Valid [Metadata Exchange for Select SE]
   Valid [Metadata Exchange for Silverrun - RDM]
   Valid [Metadata Exchange for SQL Server]
   Valid [Metadata Exchange for Sybase ASE]
   Valid [Metadata Exchange for Sybase PowerDesigner]
   Valid [Metadata Exchange for Teradata]

Command ran successfully.
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:16:12.960

这里有两种不同的方法，具体取决于您想对长度超过 80 个字符的行执行什么操作

```
def text = '''List of connectivities are:
             |    Valid [Metadata Exchange for Microsoft Visio]
             |   Valid [Metadata Exchange for Microstrategy]
             |   Valid [Metadata Exchange for Microsoft SQL Server Reporting Services and Analysis Services]
             |   Valid [Metadata Exchange for Netezza]
             |   Valid [Metadata Exchange for Oracle]
             |   Valid [Metadata Exchange for Oracle BI Enterprise Edition]
             |   Valid [Metadata Exchange for Oracle Designer]
             |
             |Command ran successfully'''.stripMargin()

// Strip everything after 80 chars
println text.tokenize( '\n' )*.  // Split the lines based on newline character
             take( 80 ).         // Only take upto the first 80 chars of each String
             join( '\n' )        // And join them back together with '\n' between them

// Add newline if line is over 80 chars
println text.tokenize( '\n' )*.      // Split the lines based on newline character
             toList()*.              // Convert each String to a list of chars
             collate(80)*.           // Split these into multiple lists, 80 chars long
             collect { it.join() }.  // Join all of the chars back into strings
             flatten().              // Flatten the multiple lists of Strings into one
             join( '\n' )            // And join these strings back together with '\n' between them 
```

* * *

### 编辑

编辑后，这是否有效：

```
String trimOutput( String input, int width=90 ) {
  input.tokenize( '\n' )*.
        toList()*.
        collate( width )*.
        collect { it.join() }.
        flatten().
        join( '\n' )
}

xml.licInfo {
  lic.eachWithIndex { key, value, idx ->
    // Shouldn't this be 'value', not 'key'?
    if( !key.contains( 'failed with error' ) ) {
      license( name: key, assignedTo: idx, trimOutput( value ) )
    }
  }
} 
```

我*认为*您需要更改为检查 lic 映射的值中的“失败并出现错误”，而不是您目前拥有的键，但我不能确定）

* * *

### 编辑2

如果您坚持使用 groovy 1.8.1，则没有任何`collate`方法，因此您必须[自己动手](https://stackoverflow.com/questions/3147537/split-collection-into-sub-collections-in-groovy)：

```
List.metaClass.collate = { size ->
  def rslt = delegate.inject( [ [] ] ) { ret, elem ->
    ( ret.last() << elem ).size() >= size ? ret << [] : ret
  }
  !rslt.last() ? rslt[ 0..-2 ] : rslt
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:06:14.860

使用注入的另一种解决方案：

```
String trimOutput( String input, int width=90 ) {
    input.tokenize('\n')*.inject('') { output, ch ->
        output.size() % (width + 1) ?
            (output + ch) :
            (output + '\n' + ch)
    }.join('\n')
} 
```

或注入和整理的组合：

```
String trimOutput( String input, int width=90 ) {
    input.tokenize('\n').inject([]) { lines, line ->
        lines + line.toList().collate(width)*.join()
    }.join('\n')
} 
```

# c# - 使用接口或类进行依赖注入

> ID：10311571
> 
> 赞同：41
> 
> 时间：2012-04-25T07:54:53.750
> 
> 标签：c#, dependency-injection

使用依赖注入时，我的接口和具体类之间存在一对一的关系，我对此感到内疚。当我需要向接口添加方法时，我最终会破坏所有实现该接口的类。

这是一个简单的例子，但是让我们假设我需要将一个注入`ILogger`到我的一个类中。

```
public interface ILogger
{
    void Info(string message);
}

public class Logger : ILogger
{
    public void Info(string message) { }
} 
```

像这样的一对一关系感觉就像是代码味道。由于我只有一个实现，如果我创建一个类并将该`Info`方法标记为虚拟以在我的测试中覆盖而不是只为单个类创建接口，是否存在任何潜在问题？

```
public class Logger
{
    public virtual void Info(string message)
    {
        // Log to file
    }
} 
```

如果我需要另一个实现，我可以覆盖该`Info`方法：

```
public class SqlLogger : Logger
{
    public override void Info(string message)
    {
        // Log to SQL
    }
} 
```

如果这些类中的每一个都有会创建泄漏抽象的特定属性或方法，我可以提取一个基类：

```
public class Logger
{
    public virtual void Info(string message)
    {
        throw new NotImplementedException();
    }
}

public class SqlLogger : Logger
{
    public override void Info(string message) { }
}

public class FileLogger : Logger
{
    public override void Info(string message) { }
} 
```

我没有将基类标记为抽象的原因是因为如果我想添加另一个方法，我不会破坏现有的实现。例如，如果我`FileLogger`需要一个`Debug`方法，我可以更新基类`Logger`而不破坏现有的`SqlLogger`.

```
public class Logger
{
    public virtual void Info(string message)
    {
        throw new NotImplementedException();
    }

    public virtual void Debug(string message)
    {
        throw new NotImplementedException();
    }
}

public class SqlLogger : Logger
{
    public override void Info(string message) { }
}

public class FileLogger : Logger
{
    public override void Info(string message) { }
    public override void Debug(string message) { }
} 
```

同样，这是一个简单的例子，但我什么时候应该更喜欢界面？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-25T08:00:48.400

**“快速”答案**

我会坚持使用接口。它们被*设计*为外部实体的消费合同。

@JakubKonecki 提到了多重继承。我认为这是坚持使用接口的最大原因，因为如果你强迫它们采用基类，这在消费者方面会变得非常明显......没有人喜欢将基类强加给它们。

**更新的“快速”答案**

您已经陈述了您无法控制的接口实现的问题。一个好的方法是简单地创建一个继承旧接口的新接口并修复您自己的实现。然后，您可以通知其他团队有新界面可用。随着时间的推移，您可以弃用旧接口。

不要忘记您可以使用[显式接口实现](http://msdn.microsoft.com/en-us/library/ms173157%28v=vs.100%29.aspx)的支持来帮助保持逻辑上相同但版本不同的接口之间的良好划分。

如果您希望所有这些都适合 DI，那么请尽量不要定义新接口，而是倾向于添加。或者，为了限制客户端代码更改，尝试从旧接口继承新接口。

**实施与消费**

*实现*接口和*使用*接口是有区别的。添加方法会破坏实现，但不会破坏使用者。

删除方法显然会破坏消费者，但不会破坏实现 - 但是，如果您对消费者具有向后兼容性意识，则不会这样做。

**我的经历**

我们经常与接口有一对一的关系。这主要是一种形式，但你偶尔会得到很好的接口实例，因为我们存根/模拟测试实现，或者我们实际上提供了客户端特定的实现。如果我们碰巧更改接口，这经常会破坏一个实现这一事实并不是代码异味，在我看来，这只是你如何处理接口。

我们基于接口的方法现在对我们有利，因为我们利用工厂模式和 DI 元素等技术来改进陈旧的遗留代码库。测试能够迅速利用接口在代码库中存在多年的事实，然后才找到“确定的”用途（即，不仅仅是与具体类的 1-1 映射）。

**基类缺点**

基类用于向公共实体共享实现细节，在我看来，它们能够通过公开共享 API 来做类似的事情是一个副产品。接口旨在公开共享 API，因此请使用它们。

使用基类，您还可能会泄露实现细节，例如，如果您需要公开某些内容以供实现的另一部分使用。这些都不利于维护一个干净的公共 API。

**破坏/支持实现**

如果您沿着接口路线走，您可能会因为违反合同而难以更改接口。此外，正如您所提到的，您可能会破坏您无法控制的实现。有两种方法可以解决这个问题：

1.  声明你不会破坏消费者，但你不会支持实现。
2.  声明接口一旦发布，就永远不会改变。

我目睹了后者，我看到它有两种形式：

1.  任何新东西的完全独立的接口：`MyInterfaceV1`, `MyInterfaceV2`.
2.  接口继承：`MyInterfaceV2 : MyInterfaceV1`.

我个人不会*选择*走这条路，我会选择不支持破坏性更改的实现。但有时我们没有这个选择。

**一些代码**

```
public interface IGetNames
{
    List<string> GetNames();
}

// One option is to redefine the entire interface and use 
// explicit interface implementations in your concrete classes.
public interface IGetMoreNames
{
    List<string> GetNames();
    List<string> GetMoreNames();
}

// Another option is to inherit.
public interface IGetMoreNames : IGetNames
{
    List<string> GetMoreNames();
}

// A final option is to only define new stuff.
public interface IGetMoreNames 
{
    List<string> GetMoreNames();
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-25T11:15:16.107

当您开始添加,和之外的方法时，您`ILogger`的接口打破了[接口隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)。看看[可怕的 Log4Net ILog 界面](https://logging.apache.org/log4net/release/sdk/html/AllMembers_T_log4net_ILog.htm)，你就会知道我在说什么。`Debug``Error``Critical``Info`

不要为每个日志严重性创建一个方法，而是创建一个采用日志对象的方法：

```
void Log(LogEntry entry); 
```

这完全解决了您的所有问题，因为：

1.  `LogEntry`将是一个简单的 DTO，您可以向它添加新属性，而不会破坏任何客户端。
2.  您可以为您的接口创建一组扩展方法，`ILogger`以映射到该单一`Log`方法。

这是这种扩展方法的示例：

```
public static class LoggerExtensions
{
    public static void Debug(this ILogger logger, string message)
    {
        logger.Log(new LogEntry(message)
        {
            Severity = LoggingSeverity.Debug,
        });
    }

    public static void Info(this ILogger logger, string message)
    {
        logger.Log(new LogEntry(message)
        {
            Severity = LoggingSeverity.Information,
        });
    }
} 
```

有关此设计的更详细讨论，请阅读[此](https://stackoverflow.com/a/5646876/264697)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T07:57:32.433

您应该始终喜欢界面。

是的，在某些情况下你会在类和接口上拥有相同的方法，但在更复杂的场景中你不会。还要记住，.NET 中没有多重继承。

您应该将接口保存在单独的程序集中，并且您的类应该是内部的。

针对接口进行编码的另一个好处是能够在单元测试中轻松地模拟它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:28:47.653

我更喜欢接口。鉴于存根和模拟也是实现（有点），我总是至少有任何接口的两个实现。此外，可以对接口进行存根和模拟以进行测试。

此外，Adam Houldsworth 提到的合同角度非常有建设性。恕我直言，它使代码比接口的 1-1 实现更干净，让它变得很臭。

# android - 如何在android的本地sqlite数据库中存储webview响应？

> ID：10311573
> 
> 赞同：1
> 
> 时间：2012-04-25T07:55:13.370
> 
> 标签：android, json, sqlite, android-webview

我正在尝试在 webview 中访问 JSON api，然后将结果存储在我的应用程序的本地 sqlite 数据库中。

我还想问这是 webview 能够读取本地应用程序数据，我们可以将本地数据放入 webview 的设置中，例如标题、cookie 等

这可能吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:07:15.280

是的，有可能。查看[在 WebView 开发人员指南中构建 Web 应用程序中的将](http://developer.android.com/guide/webapps/webview.html)*JavaScript 代码绑定到 Android 代码*部分，了解 JavaScript <-> Android Java 代码交互的解释和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:02:37.793

是的，使用 GSON（或任何其他解析器）将 json 解析为类对象。可用于 sqlite 的类数据。GSON 用于将 json 解析为直接类对象。

# javascript - jquery - 我的父母听众是谁？

> ID：10311574
> 
> 赞同：3
> 
> 时间：2012-04-25T07:55:15.320
> 
> 标签：javascript, jquery

```
$(".cblClaimSources").on('click', ':checkbox', function (){
    alert('im : '+ $(this).attr('id') + ' and my Parent listener is '+ ?????);
}); 
```

是否有可能`insider $(this)`知道谁是它的听众父母？[ `$(".cblClaimSources")`]？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T07:57:39.717

如果使用 jQuery 1.7：

```
$(".cblClaimSources").on('click', ':checkbox', function (e) {
  var parentListener = e.delegateTarget;
}); 
```

[http://jsfiddle.net/mHXMq/3/](http://jsfiddle.net/mHXMq/3/)

# objective-c - 确定设备旋转时的屏幕尺寸

> ID：10311577
> 
> 赞同：1
> 
> 时间：2012-04-25T07:55:22.630
> 
> 标签：objective-c, uiview

我正在使用`[[UIScreen mainScreen] bounds]`构建许多子视图的基础。我还利用来自`[[UIApplication sharedApplication] statusBarFrame]`并`self.navigationController.toolbar.frame`最终确定我可以在应用程序中使用的有用视图空间的框架。

我在尝试处理设备旋转时遇到了问题。通过一些调试，我了解到我从上述方法中获得的值不一定是我想要的。

简而言之，无论设备旋转如何，我最终都会寻找作为我工作区域的视图大小（屏幕减去状态和导航控制工具栏）。你如何建议我获得这个尺寸/框架？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:44:52.307

通过以下有关此帖子的信息解决此问题 - stackoverflow.com/q/7905432/870345。我的代码：

```
- (CGSize)currentSize
{
    CGSize size = [UIScreen mainScreen].bounds.size;
    UIApplication *application = [UIApplication sharedApplication];
    if (UIInterfaceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation)) {
        size = CGSizeMake(size.height, size.width);
    }
    if (application.statusBarHidden == NO) {
        size.height -= MIN(application.statusBarFrame.size.width, application.statusBarFrame.size.height);
    }
    size.height -= self.navigationController.navigationBar.frame.size.height;
    return size;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:59:50.670

可能不是他最好的方法，但您可以在视图上放置一个 UIView 并设置它的弹簧和支柱，以便它自动调整大小并保持全屏显示。然后通过插座获取框架到这个视图。

# sql - MS SQL中的嵌套连接，不起作用

> ID：10311578
> 
> 赞同：0
> 
> 时间：2012-04-25T07:55:22.990
> 
> 标签：sql, sql-server, join

这是表结构（相关位）：

![基本表结构](../Images/459d16773d9fc1661788db8473fb318a.png)

我正在尝试查找与 clientID 上的声明和声明日期（实际上在 8 小时内）相匹配的 contactLog 条目。这是我想出的：

```
SELECT
D.ClientID
D.DeclarationID   
CL.ContactDescription,
CL.ContactDate,

FROM Declarations D

INNER JOIN  (Contacts C
         INNER JOIN (PartialContacts PC
             INNER JOIN ContactLogs CL
                ON PC.ContactPartID = CL.ContactPartID )
            on PC.ContactID = C.ContactID
     )  
    ON C.ClientID = D.ClientID AND DATEDIFF(hour, D.DeclarationDate, CL.ContactDate) < 8 
```

但是，连接无法正常运行，因为我得到了 CL.ContactDate 的不匹配日期，很明显它只是返回 CL 中该患者 ID 的每一行。我想...我不太确定出了什么问题。

![在此处输入图像描述](../Images/a91a033e57e5b02427b01ce530c456f4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:19:26.330

感谢达米安：

我没有指定 datediff 的下限，所以匹配没有正常工作。显然，连接很好：

```
SELECT
D.ClientID
D.DeclarationID   
CL.ContactDescription,
CL.ContactDate,

FROM Declarations D

INNER JOIN  (Contacts C
         INNER JOIN (PartialContacts PC
             INNER JOIN ContactLogs CL
                ON PC.ContactPartID = CL.ContactPartID )
            on PC.ContactID = C.ContactID
     )  
    ON C.ClientID = D.ClientID AND DATEDIFF(hour, D.DeclarationDate, CL.ContactDate) < 8 DATEDIFF(hour, D.DeclarationDate, CL.ContactDate) > 0.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:20:13.947

```
SELECT
D.ClientID
D.DeclarationID   
CL.ContactDescription,
CL.ContactDate
FROM Declarations D
INNER JOIN Clients CL ON D.ClientID=CL.ClientID
INNER JOIN  Contacts CO ON CL.ClientID=CO.ClientID
INNER JOIN PartialContact PC ON PC.ContactID=CO.ContactID
INNER JOIN ContactLog CL ON CL.ContactPartID=PC.ContactPartID
WHERE DATEDIFF(hour, D.DeclarationDate, CL.ContactDate) BETWEEN 0 AND 8 
```

# wcf - httpWebRequest - 获取错误内容

> ID：10311582
> 
> 赞同：2
> 
> 时间：2012-04-25T07:56:02.573
> 
> 标签：wcf, rest, error-handling

我在我的 REST 服务中抛出一个错误，例如：

```
throw new WebFaultException<String>("bla bla bla",
   HttpStatusCode.HttpVersionNotSupported); 
```

但是当我尝试获取错误内容时

```
var r = (HttpWebResponse)(request.GetResponse());
if (r.StatusCode != HttpStatusCode.OK) {... 
```

问题是 GetResponse() 会引发 WebException 错误。我不可能得到“bla bla bla”的文字。我怎样才能得到这个文本？Web 异常包含状态代码 HttpVersionNotSupported，但没有包含文本“bla bla bla”的属性。我作为 WebFaultException 的第一个参数发送的数据在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:44:15.553

尝试使用[HttpWebResponse.GetResponseStream](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.getresponsestream%28v=vs.90%29.aspx)方法来访问响应的内容。链接中的示例代码应该显示如何读取和清理流。

# asp.net - 没有java脚本的带有选中和未选中复选框的Generete页面

> ID：10311587
> 
> 赞同：0
> 
> 时间：2012-04-25T07:56:33.013
> 
> 标签：asp.net, html, checkbox

我有 asp.net mvc 页面，其中包含以复选框形式显示的大量数据。其中一些被检查其他没有。我有这样的代码

```
@if(item.IsSelected)
{
    <input id="@item.Name" name="@item.Code" type="checkbox" checked/>
}
else
{
    <input id="@item.Name" name="@item.Code" type="checkbox"/>
} 
```

有用。但在我看来，看起来很糟糕。我正在寻找将属性检查设置为`unchecked`或`false`或`0`或`-1`或任何允许我写得更短的值的方法。像下一个：

```
<input id="@item.Name" name="@item.Code" type="checkbox" checked="@item.IsSelected?"checked":"what?!!"/> 
```

笔记。我想找到一个简单的方法。我不想使用 javaScript 或 jQuery，因为它使代码变得复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:32:22.817

您可以使用 Html 帮助程序 CheckBoxFor。您将它绑定到模型的属性，它会根据绑定到的布尔属性的值显示选中或未选中。

就像是`@Html.CheckBoxFor(p => p.item.IsSelected, new { @id = ..., @name= ... })`

# c# - WPF/C# - ListBox 示例什么是 ItemsSource

> ID：10311588
> 
> 赞同：1
> 
> 时间：2012-04-25T07:56:33.920
> 
> 标签：c#, wpf, listbox, msdn

我想了解来自 msdn 的示例（[http://msdn.microsoft.com/en-us/library/ms742521.aspx#defining_simple_datatemplate](http://msdn.microsoft.com/en-us/library/ms742521.aspx#defining_simple_datatemplate)）。

XAML 代码：

```
<ListBox Width="400" Margin="10" ItemsSource="{Binding Source={StaticResource MyTodoList}}">
   <ListBox.ItemTemplate>
     <DataTemplate>
       <StackPanel>
         <TextBlock Text="{Binding Path=TaskName}" />
         <TextBlock Text="{Binding Path=Description}"/>
         <TextBlock Text="{Binding Path=Priority}"/>
       </StackPanel>
     </DataTemplate>
   </ListBox.ItemTemplate>
 </ListBox> 
```

文本块中的数据是对象的属性，对吗？对象在代码隐藏文件中的列表（？）myTodoList 中？

```
protected ObservableCollection<TODO> _myTodoList= new ObservableCollection<TODO>();
public ObservableCollection<TODO> MyTodoList
{
    get { return _myTodoList; }
} 
```

添加待办事项

```
TODO t1 = new TODO();
t1.TaskName = "TaskName1";
t1.Description = "Description1";
t1.Priority = "Priority1";
_myTodoList.Add(t1);

TODO t2 = new TODO();
t2.TaskName = "TaskName2";
t2.Description = "Description2";
t2.Priority = "Priority2";
_myTodoList.Add(t2); 
```

我的测试 TODO 类：

```
public class TODO
{
    public string TaskName { get; set; }
    public string Description { get; set; }
    public string Priority { get; set; }
} 
```

但是代码抛出异常...... ![在此处输入图像描述](../Images/c8e5349061abdd97d1bc6634e0c1da02.png)

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:08:07.317

您必须声明 StaticResource：

```
<Window ...
        xmlns:local="clr-namespace:SDKSample"
        ...
        >
    <Window.Resources>
        <local:Tasks x:Key="MyTodoList"/>
    </Window.Resources> 
```

来自 SDKSample：

```
public class Tasks : ObservableCollection<Task>
{
    public Tasks(): base()
    {
        Add(new Task("Groceries", "Pick up Groceries and Detergent", 2, TaskType.Home));
        Add(new Task("Laundry", "Do my Laundry", 2, TaskType.Home));
        Add(new Task("Email", "Email clients", 1, TaskType.Work));
        Add(new Task("Clean", "Clean my office", 3, TaskType.Work));
        Add(new Task("Dinner", "Get ready for family reunion", 1, TaskType.Home));
        Add(new Task("Proposals", "Review new budget proposals", 2, TaskType.Work));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T08:52:52.163

在您的代码隐藏文件中，在构造函数中输入以下内容：

```
this.DataContext = this.MyTodoList; 
```

然后更改您的列表框：

```
<ListBox Width="400" Margin="10" ItemsSource="{Binding}"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:05:58.160

您确实在此顶部定义了数据上下文

`<ObjectDataProvider ObjectType="{x:Type m:yourvmtype}" x:Key="MyTodoList" MethodName="GetStrings"/> </StackPanel.Resources>`

# jquery - 将哈希值传递给 Jquery .load() 函数

> ID：10311589
> 
> 赞同：2
> 
> 时间：2012-04-25T07:56:43.293
> 
> 标签：jquery, ajax

我正在构建一个基本站点，用户单击一个链接，Jquery 通过对服务器的异步请求使用 Jquery 的 load() 填充一个 id="article" 的 div。这是html：

`<a href="#targetpage.html" onclick="menu('targetpage.html');"> TARGET PAGE</a>`

这调用了这个非常简单的函数：

`var menu = function(page){ $('#article').load(page); //other code };`

它工作正常。

但是，我希望用户能够使用永久链接， `www.mysite.com/index.html#targetpage.html`并且我希望 js 能够读取 URL 中的哈希值并相应地填充 div。

问题是，当我尝试将值 window.location.hash 传递给函数时（加载或就绪状态），一切都卡住了，我的 js 不再工作了。我也尝试使用 ajax() 而不是 load() 函数，但它也不接受该值。

**编辑** 如果我尝试

```
var thispage = document.location.hash;
var hash = thispage.replace( /^#/, '' ); 
```

并输入 mysite.com/#page_one.html，警报显示：

```
page_one.html, 
```

这很好！但是之后

```
menu(hash); 
```

不会将 page_one.html 的内容加载到 div 中。但是，单击我的菜单可以正常工作。在 js 控制台中，我没有任何错误或警告。这是涉及的整个代码：

```
<head><script type="text/javascript" charset="iso-8859-1">
var thispage = document.location.hash;
var hash = thispage.replace( /^#/, '' );
alert(hash);
menu = function(page){
    $('#article').load(page);
    };
menu(hash);
</script>
</head>
<body>
<div id="menu">
<ul>
<li><p class="menuvoice">
        <a href="#page_one.html" onclick="menu('page_one.html');">
            Page One</a></p></li>
<li><p class="menuvoice">
        <a href="#page_two.html" onclick="menu('page_two.html');">
            Page Two</a></p></li>
</ul>
</div>
<div id="article"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:25:42.740

使用 jQuery hashchange 插件怎么样？

[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

当它改变时（即当你点击一个链接或用新的散列重新加载页面时）它会处理解析你当前散列的工作。

**编辑。**示例用法：

```
$(function(){
  // Bind an event to window.onhashchange that, when the hash changes, gets the
  // hash and adds the class "selected" to any matching nav link.
  $(window).hashchange( function(){
    var hash = location.hash;

    // Set the page title based on the hash.
    document.title = 'The hash is ' + ( hash.replace( /^#/, '' ) || 'blank' ) + '.';

    // Iterate over all nav links, setting the "selected" class as-appropriate.
    $('#nav a').each(function(){
      var that = $(this);
      that[ that.attr( 'href' ) === hash ? 'addClass' : 'removeClass' ]( 'selected' );
    });
  })

  // Since the event is only triggered when the hash changes, we need to trigger
  // the event now, to handle the hash the page may have loaded with.
  $(window).hashchange();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:30:43.673

您的控制台中是否有任何错误输出？这将有助于识别问题。

您可以尝试在将检索到的哈希值发送到您的“菜单”函数之前提醒它，这样您就会知道它是否正确（我想知道 # 符号是否未附加到哈希上，我想这会在您的情况下造成问题)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T08:31:55.457

试试这个：

```
var hash = window.location.hash;
if (hash) {
  var hash = hash.replace(/#/, '');
  // Your function using hash
} 
```

# php - 显示数据库中带有空格的值

> ID：10311592
> 
> 赞同：-1
> 
> 时间：2012-04-25T07:56:48.633
> 
> 标签：php, mysql, html

在我的表单中，我有一个 TextArea 框，用户可以在其中输入多行。

输入示例；

```
1) Adam
2) Joe
3) Zack 
```

在我将输入保存在数据库中并将其显示在表格中之后。输出会变成这样；

```
1) Adam 2) Joe 3) Zack 
```

这是代码；

```
<table>
<tr>
    <td align="center"><?php echo $sis_sistem ?></td>

</tr>   
    </table> 
```

变量 $sis_sistem 保存了我从数据库中调用的数据。

问题是这不是我想要显示的。那么我将如何像之前用户的输入一样显示它呢？

像这样;

```
1) Adam
2) Joe
3) Zack 
```

我不知道发生了什么，但是当我多次尝试 nl2br() 函数时，它起作用了。谢谢大家，对错误深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:59:11.617

textarea 元素的错误使用。应该：

```
<textarea>$system</textarea> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T07:59:48.160

试试这个 ：

```
<?php echo nl2br($system); ?> 
```

您的换行符可能会在数据库中保存为 \n，但您需要
在网页中使用 HTML 标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:04:56.903

将您的内容放入文本区域。不要`echo`过多的 html 并在 html 属性值周围使用 "：

```
?><td><TEXTAREA NAME="system" ROWS="4" COLS="40"><?= $system ?></TEXTAREA></td><? 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T07:58:55.330

试试[nl2br()](http://php.net/manual/en/function.nl2br.php)内置函数

```
<?php echo nl2br($system) ?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-25T08:04:32.233

尝试;

```
<table>
    <tr>
      <td align="center" valign="top"><?php echo nl2br($sis_sistem) ?></td>
    </tr>   
</table> 
```

# android - Android google play store 截图变形

> ID：10311593
> 
> 赞同：0
> 
> 时间：2012-04-25T07:56:53.210
> 
> 标签：android, google-play

我正在尝试在 google play store 上发布我的第一个 Android 应用程序，我需要提供一些我的应用程序的屏幕截图。

问题是当我在网站上上传截图时，它们变形了：图像的左侧部分被切断，例如，如果我在屏幕中心有一个点，那么这个点就会更多在左。

你知道如何避免这种情况，或者这只是一个网站展示问题，在 play store 上，图像会正常吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:01:39.007

您在发布页面上看到的所有变形和旋转都只是在该页面上，图像将正确显示在 Play 商店中。（我认为该页面上的某个地方甚至有一些文字可以告诉您这一点，可能隐藏在帮助按钮后面）

# android - 如何放置两个 webview（一个在另一个 webview 之上）

> ID：10311594
> 
> 赞同：2
> 
> 时间：2012-04-25T07:56:57.587
> 
> 标签：android, eclipse, webview

我正在尝试使用两个 webview 进行布局。我的问题是当我想将一个放在另一个 webview 之上时。他们被放在不同的位置。谢谢！！;)

我在这里写我的代码：

```
<?xml version="1.0" encoding="utf-8"?>  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >

     <WebView
         android:id="@+id/webview2"
         android:layout_width="match_parent"
         android:layout_height="50dp"
         android:autoLink="web"
         android:scrollbars="none"
         android:textColor="@android:color/black" />

<WebView
    android:id="@+id/webview1"
    android:layout_width="match_parent"
    android:layout_height="570dp"
    android:autoLink="web"
    android:scrollbars="none"
    android:textColor="@android:color/black" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:01:53.903

```
<?xml version="1.0" encoding="utf-8"?> 
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
>

     <WebView
         android:id="@+id/webview2"
         android:layout_width="match_parent"
         android:layout_height="50dp"
         android:autoLink="web"
         android:scrollbars="none"
         android:textColor="@android:color/black" />

<WebView
    android:id="@+id/webview1"
    android:layout_width="match_parent"
    android:layout_height="570dp"
    android:autoLink="web"
    android:scrollbars="none"
    android:textColor="@android:color/black" />

 </FrameLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:07:05.697

我想这取决于您是否要堆叠它们，以便一个物理上在另一个的顶部，即覆盖它，或者您是否要求能够将它们都堆叠在屏幕上以便一个是在顶部，另一个在其下方，朝向底部。

如果是这种情况，我建议您将它们放在 RelativeLayout 中，并使用 android:layout_align.... 和 android:layout_above|below 属性的组合来排列它们。

然后，您可以通过更改 layout_above|below 属性来切换它们，例如

```
<?xml version="1.0" encoding="utf-8"?>  
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >

 <WebView
     android:id="@+id/webview2"
     android:layout_width="match_parent"
     android:layout_height="50dp"
     android:autoLink="web"
     android:scrollbars="none"
     android:textColor="@android:color/black" />

<WebView
android:id="@+id/webview1"
android:layout_width="match_parent"
android:layout_height="570dp"
android:autoLink="web"
android:scrollbars="none"
android:textColor="@android:color/black" 
android:layout_below="@id/webview2"
android:layout_alignParentLeft="true"/>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:58:27.447

尝试将两个 webview 放在一个框架布局中。这将堆叠视图。

# c# - WP7 PhoneApplicationPage EventHandler 问题

> ID：10311596
> 
> 赞同：2
> 
> 时间：2012-04-25T07:57:05.447
> 
> 标签：c#, windows-phone-7, events, xaml

我将我的*两个电话应用程序*页面合并在一起。第一个显示当前正在播放的歌曲的图片、标题和艺术家。角落里有一个播放/暂停按钮。

第二个是一个空页面，其中我有一个手势处理程序。在空白页面上，GestureHandler 运行良好。但是，当我将 GestureHandler 带到第一页时，它就不再起作用了。不仅手势处理程序，播放/暂停按钮也不起作用。而且我看不出是什么原因导致 EventHandlers 不工作..

这些是我的 2 个文件：

```
<phone:PhoneApplicationPage 
x:Class="EnergyRadio.ChannelView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:local="clr-namespace:EnergyRadio"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
 xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
mc:Ignorable="d" d:DesignHeight="696" d:DesignWidth="480"
shell:SystemTray.IsVisible="True">
<phone:PhoneApplicationPage.Resources>
    <Style x:Key="CustomButtonStyle" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
        <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
        <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="0" Margin="0">
                            <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</phone:PhoneApplicationPage.Resources>
<!--LayoutRoot ist das Stammraster, in dem alle anderen Seiteninhalte platziert werden-->
<Grid Margin="0" x:Name="LayoutRoot" Background="Transparent" VerticalAlignment="Top" IsHitTestVisible="False">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel enthält den Namen der Anwendung und den Seitentitel-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="0" Orientation="Vertical" Opacity="1" HorizontalAlignment="Right" VerticalAlignment="Top">
        <!--<TextBlock x:Name="ApplicationTitle" Text="ENERGY RADIO" Style="{StaticResource PhoneTextNormalStyle}"/>-->
        <Image Margin="0,0,0,0" Source="/EnergyRadio;component/img/subpage_header.jpg" />

        <Grid Grid.Row="1" Margin="24,0,24,0" HorizontalAlignment="Left">
        <!-- <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>-->
            <Image Name="channellogo" Margin="0,0,192,0" Width="240" Height="76"  />
            <Button  Style="{StaticResource CustomButtonStyle}" Width="64" Height="64" Padding="0" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="368,0,0,0" HorizontalContentAlignment="Left" BorderThickness="0">
                <Button.Background>
                    <ImageBrush ImageSource="/EnergyRadio;component/img/WP7_Pause.png" Stretch="None" />
                </Button.Background>

                </Button>
        </Grid>

    </StackPanel>

    <!--ContentPanel - zusätzliche Inhalte hier platzieren-->
    <phone:WebBrowser Name="wemfBrowser" Width="0" Height="0" Source="" />
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="24,24,24,0">
        <Rectangle Height="600" Width="450">
            <toolkit:GestureService.GestureListener>
                <toolkit:GestureListener Flick="GestureListener_Flick" />
            </toolkit:GestureService.GestureListener>
        </Rectangle>
        <Image Height="432" HorizontalAlignment="Left" Margin="0,0,0,0" Name="cover" Stretch="Fill" VerticalAlignment="Top" Width="432" />
        <TextBlock Margin="0,432,0,0"  Height="30" Name="artist" Text="Artist" VerticalAlignment="Top" HorizontalAlignment="Left" />
        <TextBlock Margin="0,456,0,0"  Height="30" Name="title" Text="Title" VerticalAlignment="Bottom" HorizontalAlignment="Left" />
    </Grid>
</Grid>
<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True" Mode="Minimized" Opacity="1.0" >
        <shell:ApplicationBarIconButton IconUri="/Images/save.png" Text="Get Ringtone" Click="getRingtone_Click" />
        <shell:ApplicationBarIconButton IconUri="/Images/delete.png" Text="Add Shortcut" Click="addShortcut_Click" />
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

我的第二个文件（空页面和手势处理程序：）：

```
<phone:PhoneApplicationPage 
x:Class="EnergyRadio.RemoteView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:local="clr-namespace:EnergyRadio"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
shell:SystemTray.IsVisible="True">

<!--LayoutRoot ist das Stammraster, in dem alle anderen Seiteninhalte platziert werden-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel enthält den Namen der Anwendung und den Seitentitel-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="Energy Radio" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="Remote" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <!--ContentPanel - zusätzliche Inhalte hier platzieren-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Rectangle Height="600" Width="450" Fill="White">
            <toolkit:GestureService.GestureListener>
                <toolkit:GestureListener Flick="GestureListener_Flick" />
            </toolkit:GestureService.GestureListener>
        </Rectangle>
    </Grid>
</Grid>

<!--Beispielcode zur Verwendung von ApplicationBar-->
<!--<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Schaltfläche 1"/>
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Schaltfläche 2"/>
        <shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarMenuItem Text="Menüelement 1"/>
            <shell:ApplicationBarMenuItem Text="Menüelement 2"/>
        </shell:ApplicationBar.MenuItems>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar>--> 
```

**编辑：**

好的，我发现我需要给 Rectangle 属性 FILL="white" 才能让手势处理程序工作。

但是 Rectangle 必须在前面，所以我可以在屏幕上的任何地方使用 GestureHandler 并且它必须是透明的。

所以有人知道我如何使矩形透明但仍然“可点击”？如果我只是删除 Fill="white" 它不起作用。

# c# - 窗口 7 中的兼容性帮助问题

> ID：10311598
> 
> 赞同：1
> 
> 时间：2012-04-25T07:57:12.530
> 
> 标签：c#, winforms, windows-7

每当我运行我的应用程序（从安装程序）创建安装程序后，我都会收到程序兼容性助手消息。为了解决这个问题，我在清单文件中添加了以下代码。但我仍然遇到同样的问题。我在我的 2 个应用程序中遇到了这个问题，一个在 vs2010 中，另一个在 VS2005 中。下面的代码修复了 VS2010 应用程序中的问题。但是对于其他应用程序，问题仍然存在。

```
 <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
<security>
  <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
    <!-- UAC Manifest Options
        If you want to change the Windows User Account Control level replace the 
        requestedExecutionLevel node with one of the following.

    <requestedExecutionLevel  level="asInvoker" uiAccess="false" />
    <requestedExecutionLevel  level="requireAdministrator" uiAccess="false" />
    <requestedExecutionLevel  level="highestAvailable" uiAccess="false" />

        Specifying requestedExecutionLevel node will disable file and registry virtualization.
        If you want to utilize File and Registry Virtualization for backward 
        compatibility then delete the requestedExecutionLevel node.
    -->
    <requestedExecutionLevel  level="requireAdministrator" uiAccess="false" />
  </requestedPrivileges>
</security> 
```

```
 <!-- If your application is designed to work with Windows 7, uncomment the following supportedOS node-->
  <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>

</application> 
```

谁能帮我解决上述问题

问候，

维迪亚

# linux - .profile 文件链接

> ID：10311600
> 
> 赞同：0
> 
> 时间：2012-04-25T07:57:22.027
> 
> 标签：linux, unix

我的 unix 系统上有 .profile 文件。我在另一个文件中添加了一些变量（文件名= .others）。
我想在 .profile 文件中链接这个文件。每次我登录系统时，都会加载 .profile 和 .others 属性文件。

如何在这些文件之间链接？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:00:22.657

将此添加到您的 .profile

```
if [ -f "$HOME/.others" ]; then
    . "$HOME/.others"
fi 
```

并像这样向 .others 添加一些内容

```
export foo=bar 
```

或者你想要的任何东西。其他；）

编辑：虽然有一种更简单的方法可以做到这一点，但将 .others 的内容放入 .bashrc （最后）

# python - 如何检查字符串中是否只有定义的符号？

> ID：10311602
> 
> 赞同：2
> 
> 时间：2012-04-25T07:57:25.137
> 
> 标签：python, python-3.x

我需要检查字符串是否仅包含预定义的符号列表并执行以下操作：

```
my_string = 'qwer123asd!@#$%^'
tmp = str.maketrans({'0': None, 'x': None, '#': None, '$': None, 'q': None, 'i': None})
if my_string.translate(tmp) == '':
    print("Only predefined symbols!") 
```

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T08:03:40.070

```
my_string = 'qwer123asd!@#$%^'
predef = set('0x#$qi')

if set(my_string).issubset(predef):
    print "only predefined symbols" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T08:00:18.993

我经常提倡替代正则表达式，因为我认为它经常被用作寻找问题的解决方案，但在这种情况下，我认为它可能是合适的。

```
import re
pat = re.compile("^[0x#$qi]*$")
my_string = 'qwer123asd!@#$%^'
if pat.match(my_string):
    print("Only predefined symbols!") 
```

只需确保 if`"]"`是您的预定义符号之一，它是方括号内的第一个符号。

与 euromino 的 set 方法的快速比较表明，使用您在问题中使用的字符串，这快了 3 倍。的创建`pat`和`predef`被排除在时间之外，所以这是“重复使用”的场景。如果包含它们，差异会更小，但正则表达式仍然更快。

# windows-phone-7 - 辅助磁贴“捕捉”回创建时使用的图像

> ID：10311611
> 
> 赞同：1
> 
> 时间：2012-04-25T07:58:06.243
> 
> 标签：windows-phone-7, windows-phone-7.1, tile

我有一个使用 ShellTileSchedule 进行自我更新的辅助磁贴。

用户可以在设置中关闭该行为。此时，我将辅助图块恢复为 background.png（我还通过调用 .Stop 来停止相关的 ShellTileSchedule）。

```
tile.Update(new StandardTileData() { BackgroundImage = new Uri("Background.png", UriKind.Relative) }); 
```

现在，当我更新设置并执行此代码时，辅助磁贴实际上会显示正确的图像大约 10 秒，但随后它会“快速恢复”到最初创建时使用的图像。

我在主磁贴上运行非常相似的代码，并且在那里运行良好。

知道我做错了什么吗？

编辑：即使我最初将磁贴初始化为 Background.png，一旦设置完成，磁贴也会迅速回到远程 URI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:13:24.113

没关系。我是个白痴。

有另一个代码路径将磁贴返回到远程 uri。呃。

# .net - 确定特定 .NET 程序集分配的内存量

> ID：10311616
> 
> 赞同：0
> 
> 时间：2012-04-25T07:58:22.783
> 
> 标签：.net, performance, memory-management, profiling

我想测量程序中特定托管程序集的内存分配。有没有办法/工具来确定特定托管程序集在运行时分配的内存量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:08:13.107

CLR 具有分配滴答 ETL 事件，但它仅在每 100Kb 分配时触发一次。如果您的程序运行时间足够长（分配了足够的内存），那么数据可能非常准确。

您可以使用 Perfview (http://www.microsoft.com/en-us/download/details.aspx?id=28567) 查看分配滴答事件的调用堆栈。

# javascript - Javascript - 等待函数完成

> ID：10311617
> 
> 赞同：2
> 
> 时间：2012-04-25T07:58:23.327
> 
> 标签：javascript

我需要使用 jquery 对话框来实现确认框替换。我有一个这样的调用函数

```
function callingFunc() {

 var a = confirmJquery("text", 300, 300, "ok", "cancel"); 

 if (a == true) {
   .....
 }
 else {
   .... 
 }
} 
```

这是confirmJquery函数

```
function confirmJquery(msg, width, height, txtOk, txtCancel) {

    var div = document.createElement('div');
    div.className = "confirmJquery";

    var span = document.createElement('span');
    $(span).html(msg);
    div.appendChild(span);

    var buttonOk = document.createElement('button');
    buttonOk.className = 'buttonStyleBigger';
    $(buttonOk).html(txtOk);

    var buttonCancel = document.createElement('button');
    buttonCancel.className = 'buttonStyleBigger';
    $(buttonCancel).html(txtCancel);

    var divBottom = document.createElement('div');
    divBottom.className = 'dialogAction';

    divBottom.appendChild(buttonOk);
    divBottom.appendChild(buttonCancel);

    div.appendChild(divBottom);

    var dialog = window.parent.$(div).appendTo(window.parent.document.body);

     // open the dialog
    dialog.dialog({
        height: height,
        width: width,
        resizable: false,
        // add a close listener to prevent adding multiple divs to the document
        close: function(event, ui) {
            // remove div with all data and events
            dialog.remove();
        },
        modal: true
    });

    $(buttonOk).bind('click', function(){
        return true;

    });

    $(buttonCancel).bind('click', function() {

        return false;
    });

} 
```

问题是，confirmJquery 函数总是在按下按钮（确定或取消）之前完成；因此，调用函数没有任何价值。我需要让confirmJquery 等到用户按下按钮然后函数完成并且调用函数的其余部分继续。我怎样才能做到这一点 ？

我需要更新更多细节：我已经尝试过回调函数的方式。它完美地工作。但是，这样的生活并不容易。这是一个非常庞大、陈旧、混乱的系统。这样做需要我重写很多函数，所以我需要创建一个与 javascript 的确认函数完全一样的函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:03:33.913

由于您的函数将是异步的，因此您需要使用回调。像这样的东西：

```
function myCallback(result)
{
  if (result) {
    // OK
  } else {
    // Cancel
  }
}

function confirmJquery(msg, width, height, txtOk, txtCancel, callback) {
...
    $(buttonOk).bind('click', function(){
        callback(true);
    });

    $(buttonCancel).bind('click', function() {
        callback(false);
    });
} 
```

和

```
confirmJquery(msg, width, height, txtOk, txtCancel, myCallback); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:02:35.953

将函数的其余部分移到另一个函数中，并在 confirmJquery 函数的末尾执行第二个函数。

```
function firstfunction(){

  // Do Some Stuff

  secondfunction();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:04:27.023

首先，为了避免接收方的参数列表很长，您可以使用参数对象来代替。然后通过回调发送到`confirmJquery`

```
function callingFunc() {

    var a = confirmJquery({
        msg:"text", 
        width:300, 
        height:300, 
        txtOk:"ok", 
        txtCancel:"cancel"
    },function(ok){
        if(ok){
            ...
        } else {
            ...
        }
    });
}

function confirmJquery(options,callback) {
    //options.msg
    //options.width
    ...

    $(buttonOk).bind('click', function(){
        callback(true);
    });

    $(buttonCancel).bind('click', function() {
        callback(false);
    });

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:08:59.127

是的，alexander 是对的，只需重新组织代码，一个用于对话框，一个用于基于标志/消息的功能。就像 mvc 模式一样。

# bash - 使用 'sort -g' bash 命令对浮点数进行排序

> ID：10311624
> 
> 赞同：8
> 
> 时间：2012-04-25T07:58:37.343
> 
> 标签：bash, sorting, command-line

我有一个带有指数的浮点数的文件，我想对它们进行排序。AFAIK 'sort -g' 是我需要的。但它似乎排序浮点数扔掉所有的指数。所以输出看起来像这样（这不是我想要的）：

```
$ cat file.txt | sort -g
8.387280091e-05
8.391373668e-05
8.461754562e-07
8.547354437e-05
8.831553093e-06
8.936111118e-05
8.959458896e-07 
```

这给我带来了两个问题：

1.  为什么'sort -g'不能像我期望的那样工作？
2.  如何使用 bash 命令对文件进行排序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-30T15:37:16.137

这是一个巧妙的技巧：

```
$ sort -te -k2,2n -k1,1n test.txt 
8.461754562e-07
8.959458896e-07
8.831553093e-06
8.387280091e-05
8.391373668e-05
8.547354437e-05
8.936111118e-05 
```

将`-te`您的数字分成两个字段，`e`将尾数与指数分开。说首先按`-k2,2`指数排序，然后`-k1,1`说接下来按尾数排序。

适用于所有版本的`sort`命令。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-30T15:13:47.773

`,`问题在于，在某些国家/地区，本地设置可能会通过将其用作小数点分隔符而不是`.`在系统级别上来搞砸。通过输入`locale`终端检查。应该有入口

```
LC_NUMERIC=en_US.UTF-8 
```

如果该值是其他值，则通过编辑语言环境文件将其更改为上述值

```
sudo gedit /etc/default/locale 
```

而已。您也可以通过执行临时使用此值

```
LC_ALL=C sort -g file.dat 
```

`LC_ALL=C`在终端中写入更短，但将其放在语言环境文件中可能并不可取，因为它可能会改变一些其他系统范围的行为，例如时间格式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T10:13:44.843

你的方法绝对正确

```
cat file.txt | sort -g 
```

如果上面的代码不起作用，那么试试这个

```
sed 's/\./0000000000000/g' file.txt | sort -g | sed 's/0000000000000/\./g' 
```

兑换 '。' 到 '0000000000000' ，排序并再次替换为 '.'。我选择了'0000000000000'来替换，以避免数字与输入不匹配。您可以自己操作号码。

# c++ - C ++中的堆损坏错误

> ID：10311625
> 
> 赞同：-1
> 
> 时间：2012-04-25T07:58:38.210
> 
> 标签：c++, crash, heap-memory

我在其中一台机器上遇到运行时错误。我已经在数百台机器上测试了我的应用程序，但没有出现任何错误。错误窗口如下所示。

当应用程序崩溃时显示错误窗口， ![在此处输入图像描述](../Images/9bccf47ca3b0d82b045bcf595df0e454.png)

如果我点击 clickhere 链接，它会显示如下图。 ![在此处输入图像描述](../Images/1ab72c551b1d3b6877ca304c3bfd3725.png)

如果我调试代码，那么它会显示在下面的图像中。 ![在此处输入图像描述](../Images/1b9da528c1e6bd65e95ed7829a388436.png)

我不知道这是我的代码中的问题或操作系统安装中的任何问题，请帮助我。因为我的应用程序在任何地方和所有操作系统上运行，但只在其中一台计算机上出错。

代码如下：

```
rem->m_operationInProgress = false;
delete rem;  // from where error occur.
printf("after deleted.."); //this is not execute. 
```

析构函数是：

```
test::~test()
{
        printf("\n Enter in destructor.. ");

//  
//  m_isRunning = false;
//  Sleep(1000);

//  //-------------------------------------------- 1_4_2012
//  printf("\nCalling m_dataCollection->shutDown()");
////    printf("\n****calling  m_connect.shutDown();****");
//      printf("\nRPA :: 11....");
//  m_connect.shutDown();
//      printf("\nRPA :: 12....");
//  //printf("\n****after m_connect.shutDown();****");
//          printf("\nRPA :: 13....");
//  if(m_device != NULL)
//  {
//      //printf("\n****before delete  m_device;****");
//      printf("\nRPA :: 14....");
//      delete m_device;
//      printf("\nRPA :: 15....");
//      //printf("\n****after delete  m_device;****");
//  }
printf("\n Exited from destructor.. "); // this is also print on console.

} 
```

它成功执行了两个 print f 然后崩溃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:59:01.523

你能告诉我们你正在测试的机器和你测试过的“数百台机器”之间的区别吗？您的应用程序似乎是多线程的，并且将 operation-in-progress 设置为 false 似乎不会立即告诉所有线程退出，尤其是在被测计算机速度缓慢且单核的情况下。所以你可能过早地删除了指针，而其他线程仍在使用它。因此调用了析构函数，但随后缓慢的线程在某处唤醒并尝试使用早已被删除的指针。

您可能需要在指针上添加锁定以确保在所有线程退出之前不会将其删除。

# sql - 这个 SQL 查询可以优化吗

> ID：10311628
> 
> 赞同：0
> 
> 时间：2012-04-25T07:58:53.377
> 
> 标签：sql, sql-server-2005

我在程序中得到了下面的 SQL 查询，这可以更优化以获得最佳结果。

```
SELECT DISTINCT 
      [PUBLICATION_ID] as n
     ,[URL] as u 
  FROM [LINK_INFO]
  WHERE Component_Template_Priority > 0 
    AND PUBLICATION_ID NOT IN (232,481) 
ORDER BY URL 
```

请建议，在这方面使用 NOT Exists 是更好的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:11:26.320

可以使用 NOT EXISTS。只是从上面的代码开始你可能不应该，但它在技术上是可能的。作为基本规则; 一个非常小的、快速解析的集合（肯定会应用两个文字）作为 NOT IN 比作为 NOT EXISTS 执行得更好。当 NOT IN 必须对每一行进行足够的比较以使 NOT EXISTS 的相关子查询（在第一次匹配时停止）更快地解决时，NOT EXISTS 获胜。

这假定比较集不能包含 NULL。否则 NOT IN 和 NOT EXISTS 不会返回相同的结果，因为 NOT IN (NULL, ...) 总是返回 NULL，因此没有行，而 NOT EXISTS 排除它找到匹配项的行，NULL 不会生成匹配项，所以不会排除该行。

第三种比较两组不匹配的方法是使用 OUTER JOIN。从目前的情况来看，我看不出有什么理由去讨论这个问题，所以我暂时放过那个。

一个明确的答案将取决于很多变量（因此对你的问题的评论）......

1.  publication_id 列的基数（不同值的数量）是多少？
2.  列上有索引吗？
3.  表中有多少行？
4.  您从哪里获得 NOT IN 子句中的值？
5.  它们将始终是文字还是来自参数或子查询？

... 仅举几个。当然，最好的找出方法是通过不同的方式编写查询并查看执行时间和查询计划。

**编辑** 另一个是使用集合运算符，如 EXCEPT。再次，可能有点矫枉过正。

# java - 它算作 REST 吗？

> ID：10311630
> 
> 赞同：2
> 
> 时间：2012-04-25T07:58:59.437
> 
> 标签：java, php, rest

我正在尝试了解 REST 方法。我从谷歌会议上观看了一些关于 REST 技术的视频，但我看到的是应用程序与数据库连接的实现。所以我想知道我的代码是否算作 REST。

PHP代码：

```
<?php
mysql_connect("localhost","*****","********");
mysql_select_db("********");
$cname = mysql_real_escape_string($_REQUEST['cname']);
$q=mysql_query("SELECT mdl_course_sections.summary FROM mdl_course, mdl_course_sections WHERE mdl_course.id = mdl_course_sections.course AND mdl_course.fullname = '$cname' AND mdl_course_sections.section > 0");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output));
mysql_close();
?> 
```

JAVA代码：

```
public class CourseSegmentsActivity extends ListActivity{

String courseName = null;
String segmentName = null;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    Intent i = getIntent();
    courseName = i.getStringExtra("courseName");

    ArrayList<HashMap<String,String>> myCoursesList = new ArrayList<HashMap<String,String>>();
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("cname",""+courseName));

    InputStream is = null; 
    String result = null;
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("****************");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-10"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();

            result=sb.toString();
    }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
    }

try{
    JSONArray jArray = new JSONArray(result);
    for(int ii=0;ii<jArray.length();ii++){
            JSONObject json_data = jArray.getJSONObject(ii);
            segmentName = json_data.getString("summary");

            HashMap<String,String> map = new HashMap<String, String>();
            map.put("summary", segmentName);
            myCoursesList.add(map);
    }
} catch(JSONException e){
    Log.e("log_tag", "Error parsing data "+e.toString());
}
ListAdapter adapter = new SimpleAdapter(this, myCoursesList,R.layout.course_segments_list_layout,
        new String[] {"summary"}, new int[] { R.id.name});

setListAdapter(adapter);

}
} 
```

如果不是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:07:58.147

不，你不是。如果您遵循 REST 标准，则应该有效地使用 http 协议。根据 REST 标准，

如果您正在读取数据 - 如果您正在读取元数据，请使用 GET
- 如果您正在写入数据，请使用 HEAD
- 如果您正在修改数据，请使用 POST - 如果您正在删除，请使用 PUT - 使用 DELETE，

请参阅 http 协议 ( [RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) ) 的 w3c 规范以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:01:02.833

不，您正在使用 POST 检索数据。但是，POST 旨在用于*编辑现有*数据。使用 REST 时也不太可能使用查询字符串 - 通常您使用 URL 来指定资源

看看[http://en.wikipedia.org/wiki/REST#RESTful_web_services](http://en.wikipedia.org/wiki/REST#RESTful_web_services)

# permissions - hadoop上猪脚本的权限错误

> ID：10311631
> 
> 赞同：0
> 
> 时间：2012-04-25T07:58:59.583
> 
> 标签：permissions, hadoop, apache-pig

我已经设置了一个 hadoop 集群，它运行得很好。最重要的是，我正在使用猪脚本。

但是我收到以下错误：

```
org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.security.AccessControlException: Permission denied: user=tavasthi, access=WRITE, inode="home":dsslmn:supergroup:rwxr-xr-x 
```

有人可以指点纠正这个错误吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:35:35.333

看起来您在 HDFS 中没有保存到文件夹的权限`home`。您的用户，`tavasthi`不是用户`dsslmn`，因此没有写入`home`文件夹`rwxr-xr-x`的权限（表示只有用户有写入权限）。

您能否将代码发布到您尝试使用 pig STORE 命令的位置，以包含路径，并让我们知道此输出文件夹的路径是否存在，以及您的用户是否有权写入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:22:45.640

我能够通过使用安全模拟功能解决类似的问题 [http://hadoop.apache.org/common/docs/stable/Secure_Impersonation.html](http://hadoop.apache.org/common/docs/stable/Secure_Impersonation.html)

遵循此代码段

```
UserGroupInformation ugi = 
                    UserGroupInformation.createProxyUser("hduser", UserGroupInformation.getLoginUser());
            ugi.doAs(new PrivilegedExceptionAction<Void>() {
                public Void run() throws Exception {
                    Configuration jobconf = new Configuration();
        jobconf.set("fs.default.name", "hdfs://server:hdfsport");
        jobconf.set("hadoop.job.ugi", "hduser");
        jobconf.set("mapred.job.tracker", "server:jobtracker port");
                 String[] args = new String[] { "data/input", "data/output" };
                ToolRunner.run(jobconf, WordCount.class.newInstance(), args);
                    return null;
                }
            }); 
```

[如URL 中](http://hadoop.apache.org/common/docs/stable/Secure_Impersonation.html)`core-site.xml`所述，应添加远程（在我的情况下为 Windows 桌面主机）登录用户 ID

# html - Twitter bootstrap：在拉右和搜索表单中嵌套输入前置

> ID：10311633
> 
> 赞同：2
> 
> 时间：2012-04-25T07:59:08.547
> 
> 标签：html, css, internet-explorer, google-chrome, twitter-bootstrap

以下代码示例代码应生成类似![它应该是什么样子](../Images/c5075e9dc657a5235cef2d95d444f579.png).

```
<form class="well form-search">
  <div class="pull-right">
    <div class="input-prepend">
      <span class="add-on">
        <i class="icon-search"></i>
      </span>
      <input type="text" class="input-large search-query" />
    </div>
    <button class="btn" type="submit">Search</button>
  </div>
</form> 
```

这在 Firefox 中运行良好，但在 Chrome 和 Internet Explorer 7 浏览器中，它看起来如下所示：

![它在 chrome 中的样子](../Images/e0e75597e30a20de31981f94ba87f982.png)

我在用引导程序做一些“非法”的事情吗？我还没有进行任何调整，所以它完全是开箱即用的。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:29:11.840

这是一个报告的问题：[https ://github.com/twitter/bootstrap/issues/1362](https://github.com/twitter/bootstrap/issues/1362)

tonybolzan 在问题中概述的修复效果最好，因为您没有明确设置宽度：

```
.input-prepend, .input-append {
    white-space: nowrap;
    -webkit-padding-end: 27px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:26:02.520

问题在于您的标记中发现的空白，尝试将`span`标记放在与输入相同的行上，如下所示：

```
<form class="well form-search">
  <div class="pull-right">
    <div class="control-group">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-search"></i></span><input type="text" class="input-large search-query" />
        </div>
        <button class="btn" type="submit">Search</button>
    </div>
  </div>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T04:23:51.393

这是旧的，但它帮助我确定了我正在寻找的答案：

问题可能是引导程序将输入的宽度设置为 210px，这导致整个图标/输入/按钮分组比您的井宽。

我已经用问题的示例更新了上面发布的小提琴 Andres，方法是强制井形式的宽度小于默认宽度，并使用宽度更小的输入类进行修复。

[http://jsfiddle.net/dDtUg/2/](http://jsfiddle.net/dDtUg/2/)

# python - 如何使用 PyBrain 网络拟合函数？

> ID：10311642
> 
> 赞同：5
> 
> 时间：2012-04-25T08:00:04.827
> 
> 标签：python, pybrain

有一个函数，如：y = sin(x) 我想使用 PyBrain 网络来拟合函数，这是我所做的：当你运行它时，你会得到我得到的，得到的数据远非它应该是的.

```
from pybrain.datasets import SupervisedDataSet
from pybrain.tools.shortcuts import buildNetwork
from pybrain.supervised.trainers import BackpropTrainer
import pickle
import scipy as sp
import numpy as np
import pylab as pl

x = np.linspace(0, 4*np.pi, 100)
ds = SupervisedDataSet(1,1)

for i in x:
    ds.addSample(i,sin(i))
print ds

n = buildNetwork(ds.indim,3,3,3,ds.outdim,recurrent=True)
t = BackpropTrainer(n,learningrate=0.01,momentum=0.5,verbose=True)
t.trainOnDataset(ds,1000)
t.testOnData(verbose=True)

fileObject = open('trained_net', 'w')
pickle.dump(n, fileObject)
fileObject.close()

fileObject = open('trained_net','r')
net = pickle.load(fileObject)

y = []
for i in x:
    y.append(net.activate(i))

pl.plot(x,y)
pl.plot(x,np.sin(x))
pl.show() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T12:17:40.637

我想你的问题是这个网络不适合这个功能。网络节点总数太少，无法正确拟合这个 sin(x) 函数：函数太复杂。此外，为了拟合任何函数，原则上只需要一个隐藏层。

例如，尝试移除两个隐藏层，并增加隐藏节点的数量（例如，20）。你的代码很适合这个功能

# c# - selected changed 用于在另一个datagridview中查找数据存储以前的值

> ID：10311646
> 
> 赞同：0
> 
> 时间：2012-04-25T08:00:22.690
> 
> 标签：c#, winforms, datagridview

使用 MS Visual Studio 和 C#.net 4.0。

所以，刚刚完成了我的程序的另一部分，它检查重复项，最终“非常感谢所有帮助”。向我的老板展示了喜欢它的人，然后问“他是否要选择显示具有重复值的零件号的 datagridview 的结果，是否可以突出显示与所选结果相等的 maindatagridview”。

现在首先我明白他的意思，但措辞相当困难，因此寻找一些例子让我开始非常困难。

现在虽然我没有任何代码，但我可以显示我目前拥有的代码。

我做的第一件事是在数据网格上识别一个事件处理程序，它可以检测选择了哪一行，我将使用“selectionchanged”。

更新:: 好的，虽然我会告诉你我重用我的代码的意思。请注意，代码非常相似，但只是一个起点，我可能会将以前的方法合并到新的方法中。

```
private void MyErrorGrid_SelectionChanged(object sender, EventArgs e)
    {

        string getPartSelected;
        getPartSelected = MyErrorGrid.CurrentCell.Value.ToString();

        foreach (DataGridViewRow row in ParetoGrid.Rows)
        {
            var cellValue = row.Cells["Keycode"].Value;
            if (cellValue != null && cellValue.ToString() == getPartSelected)
            {
                ParetoGrid.Rows[row.Index].DefaultCellStyle.BackColor = Color.Red;
            }
        }

    } 
```

如您所见，这是可行的，但是存在一些问题。它突出显示但没有取消突出显示，所以我想我需要存储以前选择的？（不确定这是最好的方法）。

还需要添加导航，因为突出显示对用户来说不够好。At the moment ive added in selected = true but again when the selection changes i need to use the previous value.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:17:22.220

好的，这感觉就像我在作弊，但这就是我为解决问题所做的。

```
private void MyErrorGrid_SelectionChanged(object sender, EventArgs e)
    {

        string getPartSelected;

        getPartSelected = MyErrorGrid.CurrentCell.Value.ToString();

        foreach(DataGridViewRow allrow in ParetoGrid.Rows)
        {
            ParetoGrid.Rows[allrow.Index].DefaultCellStyle.BackColor = Color.Empty;
            ParetoGrid.Rows[allrow.Index].Selected = false;
        }
        //might need a do while
        foreach (DataGridViewRow row in ParetoGrid.Rows)
        {
            var cellValue = row.Cells["Keycode"].Value;

            if (cellValue != null && cellValue.ToString() == getPartSelected)
            {
                ParetoGrid.Rows[row.Index].DefaultCellStyle.BackColor = Color.Red;
                ParetoGrid.Rows[row.Index].Selected = true;

            }
        }

    } 
```

正如您所看到的，它在进入下一个更改之前基本上清除了所有内容，因此它可以工作但不使用以前的值。如果有人有更好的解决方案，请随时回答

唯一的事情是当有很多行时，虽然它选择并突出显示它不滚动 datagridview 是否有类似的方法可以做到这一点？

# java - 获取 double[] 的最小值

> ID：10311651
> 
> 赞同：0
> 
> 时间：2012-04-25T08:00:38.310
> 
> 标签：java, double, overflow

我写了以下代码

我的目标是获得最低值，`doble[] absOfSub`但它在行给出以下异常 `compared= Double.compare(d2, d1);`

```
Exception in thread "main" java.lang.StackOverflowError 
```

为什么溢出以及如何修复它？

# 编辑

```
 public class TestThe {
static double[] absOfSub = new double[5];
    private static int index=0;

  private static int compare(int currentIdx, int minIdx) {
      if(index < absOfSub.length) {
         if(absOfSub[currentIdx] < absOfSub[minIdx]) {
             compare(currentIdx + 1, currentIdx);
         } else {
             compare(currentIdx + 1, minIdx);
         }
      }
  return minIdx;
  }

    public static void main(String[] args) {
    absOfSub[0]=1000;
    absOfSub[1]=810;
    absOfSub[2]=108;
    absOfSub[3]=130;
    absOfSub[4]=110;
double result;
   int inndex= compare(0,1);
      System.out.println(absOfSub[inndex]);

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T08:09:03.340

这个简单而优雅的解决方案怎么样？

```
static double min(double... ds) {
  double min = Double.POSITIVE_INFINITY;
  for (double d : ds) min = Math.min(min, d);
  return min;
}

public static void main(String[] args) {
  System.out.println(min(-5.2, 0, -10.1, 3));
} 
```

递归解决方案（不推荐！）：

```
static double minRecur(double... ds) {
  return minRecur(ds, 0, Double.POSITIVE_INFINITY);
}
static double minRecur(double[] ds, int i, double runningMin) {
  return (i < 0 || i >= ds.length)? 
    runningMin : minRecur(ds, i + 1, Math.min(runningMin, ds[i]));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T08:04:24.277

您不会更改`index`方法内部的值。所以这个递归方法调用根本不会停止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T08:10:21.300

您实际上并没有更改索引变量，因此递归永远不会结束。但这还有很多错误。

一种在数组中查找最小值的简单通用方法，无需使用递归：

```
int min = Integer.MAX_VALUE;
for( int i = 0; i < array.length; i++ ) {
    // Math.min returns the lower value of the two arguments given
    min = Math.min( min, array[i] );
}
return min; 
```

这可以很容易地适应您的需求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T08:10:35.087

你永远不会操纵`index`变量的值。您看到人们应该尝试限制他们使用的静态变量数量的另一个原因。让我试着帮助你：

```
public class TestThe {
  private static double[] absOfSub = new double[5];
  private static void compare(int currentIdx, int minIdx) {
      if(currentIdx < absOfSub.length) {
         if(absOfSub[currentIdx] < absOfSub[minIdx]) {
             return compare(currentIdx + 1, currentIdx);
         } else {
             return compare(currentIdx + 1, minIdx);
         }
      } else {
         return minIdx;
      }
  } 

  public static void main(String[] args) {
      absOfSub[0] = 10;
      absOfSub[1] = 810;
      absOfSub[2] = 108;
      absOfSub[3] = 130;
      absOfSub[4] = 110;
      System.out.println("The minimum value is: " + absOfSub[compare(0, 0)]);
  }
} 
```

**编辑**更多注释：

*   始终将属性访问器指定为私有，当这是意图时
*   总是格式化你的代码
*   当您编写递归时，请确保您始终为每次后续调用更改某些内容，并且它可以让您更接近结束条件。
*   `double`原始类型本身定义了一个比较运算符，无需`Double.compare`在您的情况下使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T08:06:17.100

每个例程中的索引都具有 0 或 1 或 2 作为值。

# java - 如何使用 java 邮件将 PDF 嵌入为 INLINE。对于我所做的所有尝试，它是一个附件

> ID：10311652
> 
> 赞同：0
> 
> 时间：2012-04-25T08:00:38.523
> 
> 标签：java, email, pdf, embed, email-attachments

```
InputStream inputStream = new FileInputStream(fileName);

String inputStreamToString = inputStream.toString();

inputStream.close();
ByteArrayInputStream arrayInputStream = new ByteArrayInputStream(inputStreamToString.getBytes());

if (arrayInputStream != null && arrayInputStream instanceof ByteArrayInputStream) {
    // create the second message part with the attachment from a OutputStrean
    MimeBodyPart attachment= new MimeBodyPart();
    ByteArrayDataSource ds = new ByteArrayDataSource(arrayInputStream, "application/pdf"); 
    attachment.setDataHandler(new DataHandler(ds));
    attachment.setDisposition(MimeBodyPart.INLINE);
    attachment.setFileName(fileName);
    multipart.addBodyPart(attachment);
}
mimeMsg.setContent(multipart); 
```

我将 PDF 作为字节获取并使用 ByteArrayDataSource。

我还将处置设置为内联。

# javascript - 通过鼠标控制窗口移动

> ID：10311653
> 
> 赞同：1
> 
> 时间：2012-04-25T08:00:43.550
> 
> 标签：javascript, html

如何在javascript中通过鼠标移动来控制窗口？我的意思是页面应该在移动鼠标时自动滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:02:57.773

这可以使用[视差](http://archive.plugins.jquery.com/project/jquery-parallax-style)来完成，如[http://www.franckmaurin.com/the-parallax-effects-with-jquery/](http://www.franckmaurin.com/the-parallax-effects-with-jquery/)

您实际上不是在控制窗口，而是在控制 div。

这是一个示例基本代码：

```
// Variables for current position

var x, y;

function handleMouse(e)
{
if (x && y) 
{
   window.scrollBy(e.clientX - x, e.clientY - y);
}
x = e.clientX;
y = e.clientY;
}

document.onmousemove = handleMouse; 
```

# android - android：kSOAP 如何从 kSOAP 响应返回的字符串中获取国家/地区列表

> ID：10311659
> 
> 赞同：3
> 
> 时间：2012-04-25T08:00:54.923
> 
> 标签：android, ksoap2, android-ksoap2, ksoap

我的 kSOAP Web 服务将 xml 返回到这种格式我如何从中`country_name`获取

```
 anyType{country=anyType{country_name=Egypt; }; 
    country=anyType{country_name=Pakistan; };
    country=anyType{country_name=United Kingdom; };
    country=anyType{country_name=United States; }; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:34:34.073

```
Arraylist<String> countries = new ArrayList<String>();
for(int i=0;i<response.getPropertyCount();i++){

countries.add(response.getProperty(i).getPropertyAsString(0));

} 
```

# asp.net - 防止 MS SQL 2005 中多个用户访问同一记录。

> ID：10311660
> 
> 赞同：1
> 
> 时间：2012-04-25T08:00:56.307
> 
> 标签：asp.net, sql-server-2005

如果一个用户访问表中 10 条记录中的 1 条记录。如果同时，第二个用户尝试访问第一个用户的同一记录，则不应显示该记录，而是应显示第二个记录，因为第一个用户将持有该记录一段时间以进行处理和更新到那时，即使选择查询是从第二个用户应用程序触发的，也不应向任何其他用户显示此记录。是否可以使用行锁？请为我提供如何实现行锁和保持锁并释放使用行级锁的保持锁的示例。除此之外，如果您有任何其他建议，请分享

我正在使用带有 Asp.Net 的 SqlServer2005

巴布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:26:32.640

我不知道行锁是否会阻止它被选中，但你不能使用审计表吗？例如，当用户 1 访问记录时，该记录的 ID 存储在审计表中，然后当用户 2 尝试使用记录时，应用程序应检查记录的主键是否在审计表中，如果如果不是第二个用户获得访问权，则第二个用户没有获得访问权。一旦用户完成了记录，您可以删除审计表中的记录，或者您可以保留记录但设置一个标志以表示它不再使用，因为这样您可以看到谁更改了哪些记录以及在什么位置如果添加日期时间戳，则为时间。

同样，当使用 select 命令时，只需这样做，以便如果主键存在于审计表中，则不要选择它。

希望这可以帮助

# javascript - 查看 html 表单是否已更改

> ID：10311663
> 
> 赞同：18
> 
> 时间：2012-04-25T08:01:08.443
> 
> 标签：javascript, jquery, html, forms, onchange

使用 jquery，我在表单中添加了一个更改处理程序。这适用于任何输入更改但仅当用户手动更改输入而不是其他代码更改输入时。

即使表单的输入被代码更改，是否有任何方法可以检测表单是否已更改？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-25T08:37:40.283

是的，这似乎有些混乱。在理想的世界中，您会期望在输入发生变化时发生 onchange 事件，但事实并非如此。我确信有充分的理由——也许不是。

我克服这个障碍的一种方法是在显示表单状态之后将其捕获到一个变量中，然后在提交它之前检查状态是否已更改并采取相应措施。

一个易于存储的状态是序列化函数返回的状态。存储状态的一个简单地方是使用数据功能。序列[化](http://api.jquery.com/serialize/)和[数据](http://api.jquery.com/data/)都可用于 jquery。

当然，您可以使用其他不同形式的状态（某种形式的哈希）或存储此状态（例如标准全局变量）。

这是一些原型代码：

如果您的表单 ID 是“xform”，那么您可以在表单显示时调用以下代码：

```
$('#xform').data('serialize',$('#xform').serialize()); 
```

然后，当您需要检查时，例如在按钮提交之前，您可以使用：

```
if($('#xform').serialize()!=$('#xform').data('serialize')){
    // Form has changed!!!
} 
```

您可以将所有这些包装到一个复制和粘贴 javascript 代码段中，该代码段将为您提供一个`formHasChanged()`函数，可以在您需要的任何地方调用它（未测试）：

```
$(function() {
    $('#xform').data('serialize',$('#xform').serialize());
});
function formHasChanged(){
    if($('#xform').serialize()!=$('#xform').data('serialize')){
        return(true);
    }
    return(false);
} 
```

但我会停在这里，否则我将创建另一个 jquery 插件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T10:40:47.463

序列化表单当然是一种选择，但如果出现以下情况，它将不起作用：

*   你想知道哪些字段发生了变化
*   它只需要检查字段的子集
*   动态添加或删除字段。

幸运的是，每个表单元素都有一个与其对象关联的默认值：

*   输入，文本区域：默认值
*   复选框，单选：defaultChecked
*   选择：默认选择

例如：检查输入或文本区域是否已更改：

```
var changed = false;
$(":text,textarea").each(function(){
    changed = this.value != this.defaultValue;
    return !changed; // return if at least one control has changed value
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-01T14:04:42.237

这很容易在没有 jQuery 的 JavaScript 中实现。`initChangeDetection()`可以多次调用：

```
function initChangeDetection(form) {
  Array.from(form).forEach(el => el.dataset.origValue = el.value);
}
function formHasChanges(form) {
  return Array.from(form).some(el => 'origValue' in el.dataset && el.dataset.origValue !== el.value);
} 
```

[在 JS Bin 上测试](https://jsbin.com/viduhukoba/edit?js,console)

* * *

对于不支持新箭头/数组函数的旧浏览器：

```
function initChangeDetection(form) {
  for (var i=0; i<form.length; i++) {
    var el = form[i];
    el.dataset.origValue = el.value;
  }
}
function formHasChanges(form) {
  for (var i=0; i<form.length; i++) {
    var el = form[i];
    if ('origValue' in el.dataset && el.dataset.origValue !== el.value) {
      return true;
    }
  }
  return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T08:04:26.933

不是以常规方式。

您可以通过输入进行更改，然后触发更改事件。

```
$('#inputId').val('foo').trigger('change'); 
```

或者这样：

```
$('#inputId').val('foo').change(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-23T18:51:40.703

这是我所做的（我使用 zaf 的答案找到了我的解决方案）

```
$("form").change(function() {
    $(this).data("changed","true");
});

$("input[type='submit']").click(function() {
    if($("form").data("changed") == "true") {
        var discard = confirm("Some unsaved changes. Discard them ?");
        if(!discard) return false;
    }
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-25T08:06:45.123

尝试`onchange`属性 根据[W3c](http://www.w3schools.com/jsref/event_onchange.asp)，它应该在元素的内容、选择或选中状态发生变化的任何时候触发。

# ios - UITableView 标头不可见

> ID：10311671
> 
> 赞同：0
> 
> 时间：2012-04-25T08:01:55.640
> 
> 标签：ios, cocoa-touch, uitableview, uisearchbar

我想将搜索栏添加到 UITableView 标题，它在 IB 上可见，但在运行后在模拟器上不可见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:20:16.913

检查您是否确实`initWithNibName: bundle:` 正确地调用了方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-25T08:28:39.113

实际上 headers 是 table view 中 section 的一部分，所以你的 view controller 类必须符合 UITableViewDelegate 协议并且必须实现方法 - (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section;

并用于自定义您的标题视图 - (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section

示例 - (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section { return 25.0f; }

或者你可以使用 UITableViewDataSource 方法 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section { return @"#"; }

# iphone - 在 Xcode 中的项目之间共享代码

> ID：10311672
> 
> 赞同：2
> 
> 时间：2012-04-25T08:02:05.973
> 
> 标签：iphone, objective-c, ios, xcode

我制作了一个通用应用程序，并从该应用程序中使用不同的图像来制作不同的应用程序（相同的应用程序，不同的图像）。

到目前为止，我的想法是每次生成新应用程序时，我都会复制代码并更改图像（有时还会更改一些代码行）。但是每次我在主应用程序中更改某些内容时，我都必须在所有子应用程序中进行更改。

我一直在考虑为此使用目标（每次我创建一个新目标时，我都会使用一个新目标并链接一个新的文件夹图像），但我不确定这一点，因为我以前从未使用过目标。

这是最好的方法吗？

如果是，最好的方法是什么？我在我的项目中创建了一个新目标，但它在其中创建了一个全新的项目，它有自己的类。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T08:17:32.957

对于您的情况，使用多个目标是一个很好的解决方案。对于每个目标，您将包含所有源，并且仅包含该目标使用的图像（图像可以具有相同的名称，只需将它们放在单独的文件夹中）。

在 Xcode 4 上，您需要执行以下步骤：

1.  转到项目设置，右键单击您的主应用程序目标并选择“复制”。这将已经包括来自主应用程序的相同来源。

2.  取消链接新目标中不需要的所有图像：

    *   选择要取消链接的所有图像，然后在实用程序面板（通常位于右侧）的“文件检查器”部分中，取消选中您的新目标
3.  创建一个新文件夹，在其中放置新目标/应用程序的图像，并在将它们导入项目时，选择仅与新目标链接。

4.  当你复制你的目标时，它也会自动为你的新应用创建一个新的 info.plist。您需要更改捆绑包 ID，以及您希望的任何其他选项。

另一种选择是将主项目作为静态库，并在所有其他项目中包含主项目，并链接目标。不会涉及到这一点，因为目标解决方案似乎更适合您的情况，仅用于更改图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T14:42:11.483

我希望添加一个显示操作方法的链接 - 以支持上述答案。希望它对其他人也有帮助。

iOS 移动开发：使用 Xcode 目标重用代码

[http://www.itexico.com/blog/bid/99497/iOS-Mobile-Development-Using-Xcode-Targets-to-Reuse-the-Code](http://www.itexico.com/blog/bid/99497/iOS-Mobile-Development-Using-Xcode-Targets-to-Reuse-the-Code)

# php - 访问另一个驱动器的文件

> ID：10311674
> 
> 赞同：0
> 
> 时间：2012-04-25T08:02:21.523
> 
> 标签：php, iis-7

以前我可以在 php 和 IIS 中下载 wav 文件。但是现在文件无法下载。我不知道出了什么问题。在 IIS 中使用 php manager 安装 php 5.3 并将其更改为 php 5.4 后，无法下载该文件。我有文件链接来下载它，如下所示：

```
 <a href="download.php?voice='$filename'"> Download </a> 
```

下载.php 脚本

```
 <?php
       $filename = $_GET['voice'];
       $dir = 'd:/temp_file/voice/';
       if(is_file($dir.$filename))
        {
          header('Content-type: audio/wav');
          header('Content-Disposition: attachment; filename='".$filename.'"');
          echo file_get_contents($dir.$filename);
       }
      ?> 
```

当我试图找到文件无法下载的错误时，我删除了 if 语句并运行程序，它确实提示窗口下载文件，带有空 wav 文件的音频播放器。因此，我得出结论，路径错误，不允许访问另一个驱动器的文件。我在 c:\inetpub\wwwroot\ 中有 php 代码，但要下载的 wav 文件位于 d:\temp_file\voice 路径中。我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:40:42.550

也许是 PHP [open_basedir](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)限制。

尝试将`d:/temp_file/voice/`, 添加到`php.ini`.

**更新**

我从未使用过 IIS，但您必须检查的另一件事是 IIS 用户是否有权读取该目录。尝试添加，仅用于测试，`Everyone`具有对`d:\temp_file\voice`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:26:42.937

> 我不知道出了什么问题

然后[启用错误报告](https://stackoverflow.com/questions/845021/how-to-get-useful-error-messages-in-php)，因为在我看来这是一个语法错误 `header('Content-Disposition: attachment; filename='".$filename.'"')`，您在.`'`之后缺少引号 () `filename='"`。但是，既然您说它有效（并且在没有 的情况下有效`if`），我会说这是一个复制粘贴错误。

然后执行 a `var_dump($filename)`，其中可能包含引号，因为您将引号放在链接 ( `<a href="download.php?voice='$filename'">`) 中的 URL 周围。该文件`D:/temp_file/voice/'foo.wav'`可能不存在。

# php - php数组比较的有效方法

> ID：10311675
> 
> 赞同：0
> 
> 时间：2012-04-25T08:02:26.583
> 
> 标签：php, arrays, compare

这是要比较的两个数组。

```
array_a(
[0] => array('userid' => aaa, 'created_time' => XXXX,),
[1] => array('userid' => bbb, 'created_time' => XXXX,),
[2] => array('userid' => ccc, 'created_time' => XXXX,)
)

array_b(
[0] => array('userid' => aaa, 'created_time' => XXXX,),
[1] => array('userid' => ccc, 'created_time' => XXXX,),
[2] => array('userid' => ddd, 'created_time' => XXXX,)
) 
```

我想检索符合以下条件的所有元素：array_a 的用户 ID 在 array_b 中，并且 array_a 的 created_time 比 array_b 的新

我使用以下代码来执行此操作，但如果数组很大，则需要很长时间。

```
for array_a{
  for array_b{
    if (a[user_id] = b[user_id] && a[created_time] > b[created_time]) {
      //target got
    }
  }
} 
```

有没有办法有效地执行这个逻辑？

谢谢回答。ID 是唯一的。如何转换 array_a( [0] => array('userid' => aaa, 'created_time' => XXXX,), [1] => array('userid' => bbb, 'created_time' => XXXX,) , )

到表单数组（aaa=>XXXX,bbb=>XXXX）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:05:18.510

```
foreach($array_a as $arr)  
  $tmp[$arr['userid']] = $arr['created_time']; //rebulding first array

foreach($array_b as $arr)
  if(isset($tmp[$arr['userid']]) && $arr['created_time'] < $tmp[$arr['userid']]){
    //target  
  } 
```

首先，您必须重建一个数组以构建适合下一步的结构，您将在其中搜索满足您条件的项目。该解决方案应该比您的解决方案更好，因为它的循环数要少得多（2 * n而不是n ^ 2）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:13:19.953

按用户 ID 对两个数组进行排序，然后创建时间。顺序仍然是 O(N^2) 但比较次数大大减少。但是，由于您正在寻找用户 ID 的显式匹配，因此将数组转换为 array('aaa'=>array(0=>'created_time', 1=>'created_time'...)...) 然后得到array_intersect(array_a, array_b) 的值将为您提供所有常见的用户 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:08:08.520

您可以考虑使用每个元素的用户 ID 作为数组键。这使您可以在 O(1) 时间内在 B 中查找正确的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:46:18.460

```
$b_index = 0;
for ($a_index = 0; $a_index < count($a); $a_index++)
{
    if ($a[$a_index]['userid'] == $b[$b_index]['userid'])
    {
        if ($a[$a_index]['created_time'] >= $b[$b_index]['created_time']) 
            $array[] = $a[$a_index];
        $b_index++;
    }
} 
```

如果用户 ID 都以相同的顺序排序，则无需将 a 中的每个用户 ID 与 b 中的每个用户 ID 进行比较来查找匹配。这至少应该是更少的比较。

# nhibernate - nhibernate 加入两个实体并返回另一个实体

> ID：10311676
> 
> 赞同：0
> 
> 时间：2012-04-25T08:02:28.390
> 
> 标签：nhibernate, queryover

我有一个像这样的主实体 Trnx：

```
 public class MasterTrnx
 {
    private int? _AccountId;
    private string _Place;
    private DateTime _ProcessTime;
    private int _TrnxId;
    private decimal? _PaymentValue;
  } 
```

而主人的子实体是这样的：

```
 public class MasterTrnxDetail
  {
    private MasterTrnx _MasterTrnx;
    private decimal _MasterPaymentValue;
    private decimal _PaymentValue;
    private int _Xid;
  } 
```

一个 MasterTrnx 实体比 MasterTrnxDetail 子实体多一个。

```
 using (ISession session = base.GetSession())
        {
            try
            {
                tx = session.BeginTransaction();

                listOfMasterTrnxDetail = session.QueryOver<MasterTrnxDetail>()
                    .JoinQueryOver(d => (IEnumerable<MasterTrnx>)d.Trnx)
                    .List();

                tx.Commit();
            }
            catch (Exception e)
            {
                if (tx != null)
                {
                    tx.Rollback();
                }
                throw e;
            }
            finally
            {
                session.Close();
            }

            return listOfMasterTrnxDetail;
        } 
```

此代码块正在工作。例如，我有一个主实体，它有 3 个三个主详细信息。这段代码给了我 3 条记录。但我想要一个主记录和详细信息的总和 MasterPaymentValues 。我怎样才能做到这一点？我也希望该方法返回另一个这样的实体：

```
public class Trnx
{
    public decimal? PaymentValue { get; set; }
    public DateTime ProcessTime { get; set; }
    public string TrnxName { get; set; }
    public decimal? TotalMasterPaymentValue { get; set; }
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:38:26.257

你的班级模型似乎有点奇怪，所以我只能猜测

```
MasterTrnx mastertx = null;

var subquery = QueryOver.Of<MasterTrnxDetail>()
    .Where(detail => detail.MasterTrnx = mastertx)
    .Select(Projections.Sum<MasterTrnxDetail>(d => d.PaymentValue));

Trnx dto = null;

transactions = session.QueryOver(() => mastertx)
    .SelectList(list => list
        .Select(t => t.ProcessTime).WithAlias(() => dto.ProcessTime)
        .Select(t => t.Place).WithAlias(() => dto.TrnxName)
        .Select(Projections.Subquery(subquery)).WithAlias(() => dto.TotalMasterPaymentValue)
    )
    .TransformUsing(Transformers.AliasToBean<Trnx>())
    .List<Trnx>(); 
```

# java - 从后台工作人员更新 UI

> ID：10311677
> 
> 赞同：0
> 
> 时间：2012-04-25T08:02:31.080
> 
> 标签：java, android, multithreading, service, android-asynctask

我想将我的客户端从 Java Swing( `Java client`) 移植到 Android( `Android client`)。

基本上，我`Java client`有一个线程，它运行一个永远的while循环来接收UDP数据包，并根据UDP数据包的内容，相应的JFrame的UI将被更新。

现在我希望我在 . 中`Android client`有一个`background worker`类似的线程`Java client`，`worker`并将在`main activity`. 然后当有一些来自UDP socket的请求时，`main activity`会启动一些相应的activity（Chat Activity），然后有一些其他的来自UDP socket的请求，`the worker`会在activity上更新（这个activity可以是main activity也可以是一个Chat Activity ) 正在显示在屏幕上。

所以我的问题是`background worker`应该是什么：

*   服务
*   普通Java线程
*   异步任务
*   要不然是啥...

哪个最符合我的要求？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:11:57.070

后台工作者应该是一个服务，因为

> Service 是一个应用程序组件，可以在后台执行长时间运行的操作，并且不提供用户界面。

虽然您的 UI 将是一个活动，但您的服务将读取 UDP 数据包并相应地修改活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:11:42.907

在您的情况下， A[`Service`](http://developer.android.com/reference/android/app/Service.html)是最合适的候选人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:16:56.117

每个 android 应用程序都有一个类 Application 类。首先扩展它，它将在您的应用程序第一次启动时初始化，甚至在您的 Activity 之前。初始化/启动您的普通 java 线程以在此处执行后台工作。关键优势是您可以从应用程序的任何位置获取此应用程序类的实例（这意味着您可以从应用程序的任何位置控制后台线程。发送后台 http 请求等......无论如何......）。然后初始化您想要对其进行更改并执行类似操作的特定活动的 UI 线程上的处理程序。

```
 private Handler myHandler ; 

                  public void checkBackgroundAndUpdateUi()
                  {
                    if(conetxt.getApplicationContext().getStatus == completed)
                    {
                       initializeHandler();
                        handler.postRunnable(myRunnable);

                    }
                  }
             Runnable myRunnable = new Runnable(){

                public void run()
                 {

                  // update your UI views here .....

                 }
             };

             private void initializeHandler(){
               myHandler = new Handler ();
             } 
```

# php - Html 单选按钮使用 Javascript 禁用进程或

> ID：10311678
> 
> 赞同：0
> 
> 时间：2012-04-25T08:02:34.567
> 
> 标签：php, javascript, html

好吧，我有几个像这样的单选按钮的 html 表单......

```
 <tr class="AccountSettingtable">
            <td class="tableHeader">+ Graphics</td>
            <td class="tableHeader">Daily  <input type="radio" name="graphics" value="daily" /></td>
            <td class="tableHeader">Never  <input type="radio" name="graphics" value="never" /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Logo Design</td>
            <td><input type="radio" name="logo" /></td>
            <td><input type="radio" name="logo"   /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Flyers & Postar design</td>
            <td><input type="radio" name="fly" /></td>
            <td><input type="radio" name="fly" /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Print Media</td>
            <td><input type="radio" name="print" /></td>
            <td><input type="radio" name="print" /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Stationery</td>
            <td><input type="radio" name="stationery" /></td>
            <td><input type="radio" name="stationery" /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Packaging Design</td>
            <td><input type="radio" name="packaging" /></td>
            <td><input type="radio" name="packaging" /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Illustrations</td>
            <td><input type="radio" name="illustration" /></td>
            <td><input type="radio" name="illustration" /></td>
            </tr> 
```

在此表单中，表单顶部有两个单选按钮。
**1) 每天
2) 从不。**
那么，如果用户单击从不按钮（单选按钮），有什么方法可以禁用所有按钮（与从不相关），我该怎么做？

非常感谢。

**完整的代码..**

```
<?php
include("include/session.php");
include("include/check.php");
include("database/db.php");
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  
/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><?php echo $_SESSION['uname'] .'s'.  " Profile"; ?></title>
<link rel="stylesheet" type="text/css" href="css/accountpage.css" />
<link rel="stylesheet" type="text/css" href="css/accountpage.css" />
<link rel="stylesheet" type="text/css" href="css/UserAccount.css"/>
<link rel="stylesheet" type="text/css" href="css/stylesheet.css" />

<script type="text/javascript">
$('input#never').bind('click', function() {
 $('input.never').attr('disabled', 'disabled');
 $('input.daily').attr('disabled', '');
});
$('input#daily').bind('click', function() {
 $('input.never').attr('disabled', '');
 $('input.daily').attr('disabled', 'disabled');
});

</script>

</head>
<body>
            <div class="AccountSettingmiddle">
            <table width="631">

            <td class="tableHeader">Daily  <input id="daily" type="radio" name="graphics" value="daily" /></td>
            <td class="tableHeader">Never  <input id="never" type="radio" name="graphics" value="never" /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Logo Design</td>
            <td><input type="radio" name="logo" value="yes" class="daily"  /></td>
            <td><input type="radio" name="logo" value="no"  class="never"   /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Flyers & Postar design</td>
            <td><input type="radio" name="fly" value="yes" class="daily"  /></td>
            <td><input type="radio" name="fly" value="no" class="never"  /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Print Media</td>
            <td><input type="radio" name="print" value="yes" class="daily"  /></td>
            <td><input type="radio" name="print" value="no" class="never"  /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Stationery</td>
            <td><input type="radio" name="stationery" value="yes" class="daily"  /></td>
            <td><input type="radio" name="stationery" value="no" class="never"  /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Packaging Design</td>
            <td><input type="radio" name="packaging" value="yes" class="daily"   /></td>
            <td><input type="radio" name="packaging" value="no" class="never"  /></td>
            </tr>
            <tr class="AccountSettingtable">
            <td class="tableElement">Illustrations</td>
            <td><input type="radio" name="illustration" value="yes" class="daily"  /></td>
            <td><input type="radio" name="illustration" value="no" class="never" /></td>
            </tr>   

            </table>
            <script type="text/javascript">$(function() {    
$('input#never').bind('click', function() { $('input.never').attr('disabled', 
'disabled'); $('input.daily').attr('disabled', ''); }); $('input#daily').bind('click', 
function() { $('input.never').attr('disabled', ''); $('input.daily').attr('disabled', 
'disabled'); }); }); </script> 

            </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:13:18.237

最简单的方法是使用 jquery。您可以将一个类添加到与“从不”相关的所有输入，并将另一个类添加到与“每日”相关的所有输入，如下所示：

```
<td><input type="radio" name="illustration" class="never" /></td>
<td><input type="radio" name="illustration" class="daily" /></td> 
```

然后在您的 2 个单选按钮上添加一个点击处理程序：

```
 <script type="text/javascript">
    $('input#never').bind('click', function() {
     $('input.never').attr('disabled', 'disabled');
     $('input.daily').attr('disabled', '');
    });
    $('input#daily').bind('click', function() {
     $('input.never').attr('disabled', '');
     $('input.daily').attr('disabled', 'disabled');
    });

</script> 
```

当然，您需要在 to radios 中添加一个 id：

```
Daily  <input id="never" type="radio" name="graphics" value="daily" />
Never  <input id="daily" type="radio" name="graphics" value="never" /> 
```

另一种选择是仅更新同一列中的收音机，但我发现它不太灵活......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:27:59.967

是的，绝对使用 jQuery 更好。

这是一个完整的代码，可以满足您的所有需求！

在您的文档头中引用最新的 jquery 代码，源代码为：

```
http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
```

在头部本身的另一个脚本中添加 2 个函数

```
function disableAll() {
    $('.radio').each(function(){
        $(this).attr('disabled', 'disabled');
    });
}
function enableAll() {
    $('.radio').each(function(){
        $(this).removeAttr('disabled');
    });
} 
```

然后在你的 html 代码中：

1.  将一个名为 radio 的类添加到您要禁用/启用的任何单选按钮。
2.  为 Never 单选按钮创建一个 onclick 函数来 disableAll()
3.  为 Daily 单选按钮创建一个 onclick 函数以 enableAll()

    希望有帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T08:18:11.560

您必须做的第一件事是为每个单选按钮分配 id 属性。

现在从不单选按钮添加 onclick 功能..

```
Never  <input type="radio" name="graphics" id="never" value="never" onclick = "disableOther(this)"/> 
```

现在添加一个javascript

如果要禁用选定的单选按钮而不是全部

```
 <script type="text/javascript">
    function disableOther(ele){
       //if never radio button get  checked then 
       if(ele.checked == true){
          //Let we have to disable a radio button with  id gross then
           document.getElementById("gross").disabled = true; 
        } else{
            //Let we have to disable a radio button with  id gross then
           document.getElementById("gross").disabled = false; 
        }    
    }

 </script> 
```

否则，如果要禁用选中的所有单选按钮从不单选按钮

```
<script type="text/javascript">
   function disableOther(ele){
   var radios = document.getElementsByTagName('input');
     for (i = 0; i < radios.length; i++) {
       if (radios[i].type == 'radio' && radios[i].id != "never") {
          var radioid = radios[i].id;             
             if(ele.checked == true){
                  document.getElementById(radioid).disabled = true;
            }else{
                document.getElementById(radioid).disabled = false;
            }                 
         }
       }
   }
</script> 
```

# yii - 如何将数据传递给 CActiveForm

> ID：10311682
> 
> 赞同：0
> 
> 时间：2012-04-25T08:02:55.297
> 
> 标签：yii

我有一个带有 dropDownList 的表单，我需要将数据从 DB 传递到该列表。

```
$form->dropDownList($model,'parent',$dd_data); ?> 
```

我应该在哪里以及如何定义 $dd_data 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:23:31.550

您可以直接在视图中使用[CHtml::listData](http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#listData-detail")来填充`$dd_data`，或者在控制器中使用它并将其传递给视图。

`$dd_data`数组的格式需要：`array('value'=>'display')`检查[CHtml::dropDownList()](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail")。

# wpf - 包含不同长度文本的两个标签的 WPF/XAML 布局，同时保持相同大小的字体缩放

> ID：10311684
> 
> 赞同：2
> 
> 时间：2012-04-25T08:03:07.193
> 
> 标签：wpf, xaml, fonts, scaling

我正在尝试放置两个标签，一个紧挨着另一个（间距很小）。

例如

标签 1 标签 2

每个标签的内容总是不同的，通常标签 2 会有更多字符，但我希望内容随着窗口大小的调整而缩放，并且我希望标签 1 和标签 2 中的字体大小保持一致。

如果标签 2 的内容太长，我不在乎是否被裁剪。

我尝试使用具有两列的网格并将标签放在 ViewBox 内：

```
<Viewbox Margin="0,0,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
    <Label Margin="0,0,0,0" Content="{Binding Path=Suburb}"/>
</Viewbox> 
```

问题在于，定位永远不会正确，字体大小也不会保持一致。

实现这一目标的最佳布局方法是什么？我可以通过绑定来同步字体大小吗？我已经尝试将标签 2 的 FontSize 属性绑定到标签 1 的 FontSize 但这不起作用，因为它每次都返回 12，无论字体实际有多大/小（我假设实际的 FontSize 没有被计算，因为标签位于 ViewBox 内）。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:03:28.060

您可以使用以下方法：

```
<Viewbox VerticalAlignment="Top">
  <DockPanel>
    <TextBlock Text="Second" DockPanel.Dock="Right" />
    <TextBlock Text="First" />
  </DockPanel>
</Viewbox> 
```

请注意，第二个标签永远不会被裁剪，因为`Viewbox`它将允许内容呈现为任何大小然后对其进行缩放。您可以指定`MaxWidth`第二个`TextBlock`将限制其大小（以像素为单位）。

代替 a`DockPanel`你可以使用`Grid`不同的 a`ColumnDefinitions`来达到相同的效果。

重要的是它们都是相同的`Viewbox`（因此，它们不会同步，`FontSize`而是对其包含的所有内容执行视觉缩放）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:13:31.923

以下标记似乎没问题：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Viewbox>
        <Label Content="Label 1" Width="{Binding ActualWidth, ElementName=label2}"/>
    </Viewbox>
    <Viewbox Grid.Column="1">
        <Label Name="label2" Content="Label 2 Label 2 Label 2"/>
    </Viewbox>
</Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:34:46.290

我不能 100% 确定“窗口调整大小时的内容缩放”和“字体大小保持一致”的实际含义，但我想您希望每个标签都根据可用空间进行修剪。

那么为什么不使用`TextBlock`如下

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>
    <TextBlock Text="{Binding Path=Suburb}" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" Margin="0,0,5,0" />
    <TextBlock Text="{Binding Path=Area}" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" Grid.Column="1"/>
</Grid> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:09:36.277

我意识到这个问题很老，但更正确的方法之一是使用**Runs**。

运行是 TextBlock 中的文本部分。

```
<TextBlock Margin="0,0,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
    <Run Text="{Binding Suburb}" />
    <Run Text="{Binding Area}" />
</TextBlock> 
```

请记住，TextBlock 中的所有内容都是对空格敏感的，因此如果您想要两个 Run 背靠背且中间没有任何空格，您可以执行以下操作：

```
<TextBlock Margin="0,0,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
    <Run Text="Foo" /><Run Text="bar" />
    <!-- Prints 'Foobar' -->
</TextBlock> 
```

它类似于 HTML 的呈现方式，如果标签之间有空格，则在这些元素之间的页面上呈现一个空格。此规则仅适用*于*TextBlock 中的项目，而不适用于整个 XAML 页面。

# extjs - 如何呈现组合框下拉列表

> ID：10311692
> 
> 赞同：0
> 
> 时间：2012-04-25T08:03:34.833
> 
> 标签：extjs, combobox

我在过滤数组存储时遇到问题。

**情况**

我有 2 个带有数组存储的组合框。组合框 1 和组合框 2 都处于“本地”模式并具有预定义的数组存储。当我在第一个组合框中单击并选择一行时，我在第二个组合框（尚未单击）上应用过滤器。问题是第二个组合框还没有呈现它的数据（或 html），所以没有应用过滤器。

当我单击第二个组合框，然后单击第一个组合框时，将应用过滤器并开始工作。

我的问题是，如何预渲染 array_store/combobox？

我确实尝试过先扩展组合框，但也没有为我工作。（见注释代码）

```
var store1 = new Ext.data.ArrayStore({
      fields: ['id','name'],
      data:somedata //array of some data
});

var store2 = new Ext.data.ArrayStore({
      fields: ['id','name'],
      data:somedata //array of some data
});

var combobox1 = {
    name: 'combobox_1',
    xtype: 'combo',
    hiddenName: 'combobox_1',
    store: store1,
    displayField:'name',
    valueField:'id',
    mode:'local',
    triggerAction: 'all',
    allowBlank:true,
    emptyText:'Select...',
    listeners:{
        select: function(st, r){
            var selected = r.get('name');
            var combobox2 = Ext.getCmp('combobox2');
            //combobox2.expand();
            combobox2.store.filter([
               {
                property     : 'name',
                value        : selected,
                anyMatch     : true,
                caseSensitive: false
              }
            ]);
        },
        scope:this
    }
}

var combobox2 = {
    name: 'combobox_2',
    xtype: 'combo',
    hiddenName: 'combobox_2',
    store: store2,
    id: 'combobox2'
    displayField:'name',
    valueField:'id',
    mode:'local',
    triggerAction: 'all',
    allowBlank:true,
    emptyText:'Select...',
} 
```

# python - 用于绘制 ROC 曲线的 libsvm

> ID：10311695
> 
> 赞同：5
> 
> 时间：2012-04-25T08:03:47.643
> 
> 标签：python, matplotlib, machine-learning, svm, libsvm

我是 libsvm 的新手，我知道如何使用 libsvm 进行分类。但我不确定如何使用 libsvm 绘制 ROC 曲线，根据 libsvm 的官方网站给出的用法是：

```
 plotroc.py [-v cv_fold | -T testing_file] [libsvm_options] training_file 
```

我没有得到如何在我的程序中替换它。我想实现一个二进制分类器。我是 libsvm 的新手，对于这样一个新手问题，我感到很抱歉。我的数据也是 numpy.ndarray 格式的……我不确定如何创建测试文件。

如果有人可以举一个玩具的例子，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:37:08.220

要使用该脚本，您需要一个 LIBSVM 格式的文件，您可以查看 LIBSVM 的示例以查看格式是什么：class 1:value 2:value ... n:value \n

然后，您可以对训练数据进行交叉验证，或者提供另一个包含测试数据的文件（采用相同的 LIBSVM 格式）并绘制该数据的 ROC。您还需要提供 LIBSVM 选项 -C 1 -g 0.01 -t 2 或其他任何内容，因此您需要知道分类器的参数。

# c# - C#从excel文件中读取数据导致###

> ID：10311697
> 
> 赞同：4
> 
> 时间：2012-04-25T08:04:06.670
> 
> 标签：c#, .net, excel, range, worksheet

我使用此代码从 excel 文件中读取数据

```
 Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;
        Microsoft.Office.Interop.Excel.Range range;

        int rCnt = 0;
        int cCnt = 0;
        string[,] data;

        xlWorkSheet = (Worksheet)wb.Worksheets.get_Item(sheetId);

        range = xlWorkSheet.UsedRange;

        data = new string[range.Rows.Count, range.Columns.Count];

        for (rCnt = 1; rCnt <= range.Rows.Count; rCnt++)
        {
            for (cCnt = 1; cCnt <= range.Columns.Count; cCnt++)
            {          
                data[rCnt - 1, cCnt - 1] = (string)
                (range.Cells[rCnt, cCnt] as Range).Text;
            }
        } 
```

现在我有时会遇到 excel 中的值显示为 ### 的单元格，因为列空间不够大，无法显示数字。当然，在 excel 中，当我单击单元格时，我可以在顶部的行中看到正确的值，但在我的程序中，我将 ### 作为值而不是正确的数字。

这里有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T08:16:42.993

尝试使用[`Range.Value`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.value%28v=office.11%29.aspx)属性而不是`Text`.

所以而不是

```
(range.Cells[rCnt, cCnt] as Range).Text; 
```

你会写

```
(range.Cells[rCnt, cCnt] as Range).Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:13:52.917

我已经看到了许多使用属性 Value OR Value2 读取 Range 的示例。
你能试试这个吗？

```
data[rCnt - 1, cCnt - 1] = (string)(range.Cells[rCnt, cCnt] as Range).Value.ToString(); 
```

Value2 属性与 Value 类似，但不能很好地转换 Date 列，因此如果 Excel 文件中有日期列，则最好使用 Value。有关Value 和 Value2 之间差异的文章，[请参见此处](http://support.microsoft.com/kb/182812)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:18:10.650

use (string) (range.Cells[rCnt, cCnt] as Range).Value as Value 将返回单元格的实际值。文本将返回您在电子表格上实际看到的内容

# css - Google Chrome 中的字体平滑

> ID：10311701
> 
> 赞同：3
> 
> 时间：2012-04-25T08:04:29.563
> 
> 标签：css, google-chrome, fonts, antialiasing, smoothing

我正在尝试将我的图标变成字体字形。

现在，问题是 Windows 7 上 Google Chrome 中字体的抗锯齿（在 OS X 上看起来不错）。我拍了两张照片，在第一张照片上你可以看到想要的行为，就像在 Firefox/Windows 7 和所有其他浏览器上看到的那样，除了谷歌浏览器，这是第二张照片。是字体本身的问题吗？还是因为系统设置？它在CSS设置中吗？

**火狐 12 视窗 7**

## ![在此处输入图像描述](../Images/c0f2e723df133e11b998a4868037044a.png)

**谷歌浏览器 18 Windows 7**

最有问题的部分用红色突出显示。

## ![在此处输入图像描述](../Images/535c91e3adacd4889c25f3cc53c21e71.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:55:51.337

根据 windows 中的渲染字体，使用[CUFON](http://cufon.shoqolate.com/generate/)代替`@font-face`它是一个更好的选择，因为`CUFON`将字体放在画布中并且它在 windows 中看起来很平滑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T19:06:08.357

使用 text-shadow 会有所帮助，尝试添加 4-6 像素模糊的阴影。玩弄它，您可能会找到“最佳位置”。某些字体大小似乎也比其他字体更成问题，尝试将其放大或缩小一两个像素，看看是否有帮助。我现在正在与谷歌合作这个特别的风车，希望我能引起别人的注意。在此图中，顶部示例是 IE9，底部示例是 Google Chrome（均为 Windows 7）。[https://twitter.com/#!/tacomamama/status/197397136470589440/photo/1](https://twitter.com/#!/tacomamama/status/197397136470589440/photo/1)

# ruby-on-rails - 使用橡胶部署后，Rails 控制台无法在 ec2 上运行

> ID：10311704
> 
> 赞同：2
> 
> 时间：2012-04-25T08:04:39.097
> 
> 标签：ruby-on-rails, deployment, amazon-ec2, rails-console

我使用橡胶在 ec2 上部署了我的应用程序，它工作正常，但是当我尝试运行控制台（键入 rails 控制台）时它不起作用。起初它没有识别 scipt，当我尝试从脚本目录运行它时，我收到一条“找不到 ruby​​.exe”的消息。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T12:26:29.003

运行它：

> 捆绑执行导轨 c

# android - 为我的小部件禁用旋转

> ID：10311709
> 
> 赞同：0
> 
> 时间：2012-04-25T08:04:57.970
> 
> 标签：android, android-widget, rotation

我已经开发了 android 小部件，我不想禁用我的小部件的旋转功能。所以它只会渲染纵向而不是横向模式。

我尝试了此代码，但它禁用了所有应用程序的旋转。我只是考虑我的小部件。

```
 public static void setAutoOrientationEnabled(ContentResolver resolver, boolean enabled) {    
    Settings.System.putInt(resolver, Settings.System.ACCELEROMETER_ROTATION, enabled ? 1 : 0);
} 
```

我怎样才能做到？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:10:03.073

您可以创建服务并将其注册到 CONFIGURATION_CHANGED 事件，如下所示

```
public class MyService extends Service {

@Override
public void onCreate() {
    super.onCreate();

    BroadcastReceiver bReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            refreshWidget();  // Code to refresh the widget
        }
    };

    IntentFilter intentFilter = new IntentFilter(Intent.ACTION_CONFIGURATION_CHANGED);
    registerReceiver(bReceiver, intentFilter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:15:23.397

您可以`accelerometer_rotation`用于切换设备旋转：

```
String str = Settings.System.getString(paramContext.getContentResolver(), "accelerometer_rotation");
if (str.equals("0"))
      {
        Settings.System.putString(paramContext.getContentResolver(), "accelerometer_rotation", "1");
      }
if (!str.equals("1"))
      Settings.System.putString(paramContext.getContentResolver(), "accelerometer_rotation", "0");
} 
```

在 manifest.xml 中：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

# javascript - Extjs 4 中的组件选择器

> ID：10311712
> 
> 赞同：1
> 
> 时间：2012-04-25T08:05:20.737
> 
> 标签：javascript, extjs, extjs4

我正在尝试选择位于面板中的多个对象（2 个标签和 2 个文本字段）。我给这些组件一个属性（changeVisibility: true）。

所以我在这里尝试完成的事情非常简单：当用户选中复选框时，所有具有属性 (changeVisibility:true) 的组件都应该变得不可见。所以在我的控制器中，我试图选择这些组件，但到目前为止我无法完成。

非常感谢您的帮助！

我的面板代码：

```
Ext.define('Edocs.view.wizard.card-2.content.mobile-password.Panel', {
extend : 'Ext.FormPanel',
alias : 'widget.mobilePassword',
layout : {
    type : 'vbox',
    pack: 'center'
},
bodyStyle:{"background-color":"beige"},
border:false,
defaults:{

    width: '100%'     
},

items: [{        
    xtype           : 'checkboxfield',
    boxLabel        : 'Enable mobile (iphone) accesibility',
    boxLabelAlign   : 'before',
    name            : 'enableMobile',
    inputValue      : '1',
    id              : 'cbxMobile',
    itemId          : 'cbxMobile'

},{
    xtype: 'label',
    text: "Please enter a password to connect to the platform by mobile (iphone/ipad)",
    style: 'font-weight:bold;',
    changeVisibility :true
},{
    xtype: 'textfield', 
    name: 'mobilePassword',
    id: 'txtMobilePassword',
    inputType: 'password'  ,
    changeVisibility :true
    //width: '100%'
},{
    xtype: 'label',
    text: "Confirm password",
    style: 'font-weight:bold;',
    changeVisibility :true
},
{
    xtype: 'textfield', 
    name: 'mobilePasswordConfirm',
    itemId: 'txtMobilePasswordConfirm',
    inputType: 'password'  ,
    vtype: 'password',
    initialPassField: 'txtMobilePassword',
    changeVisibility :true
}],

initComponent : function() {

    Ext.apply(this, {})
    this.callParent(arguments);
}
}); 
```

这是我的控制器中的函数（在复选框的更改事件上调用此函数）：

```
addMobilePassword : function(checkbox) {
    var items = checkbox.up().down('mobilePassword[changeVisibility=true]');
    if (checkbox.checked){
        for (var i in items){
            items[i].setVisible(false);
        }
    }
} 
```

我在使用这个选择器时遇到了问题：

```
 var items = checkbox.up().down('mobilePassword[changeVisibility=true]'); 
```

如果有人可以就如何选择这些组件给我一些建议。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:05:41.687

`down()`将找到容器的第一个匹配的后代。所以我认为你应该尝试：

```
checkbox.up().down('mobilePassword').query('label[changeVisibility], textfield[changeVisibility]') 
```

或简明扼要

```
checkbox.up().query('label[changeVisibility], textfield[changeVisibility]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:20:00.390

尝试`query('[changeVisibility=true]')`

# c# - Windows8 - Metro - WebView - NavigateToString 干扰网格中的滚动

> ID：10311713
> 
> 赞同：1
> 
> 时间：2012-04-25T08:05:23.153
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我在我们的 Windows 8 Metro Style 应用程序中遇到了这个非常令人不安的错误。

我们有一个由三行组成的网格 - 一个标题 - 一个列表视图（包含允许用户水平滚动的块） - 一个页脚（包含一个显示广告的 WebView）。

..................................................... ......................
                                   标志
...................... ..................................................... .......

ListView 水平滚动 ---------->

..................................................... ......................
                                    广告
...................... ..................................................... …………

问题是 - 当我加载广告的内容（使用 NavigateToString，它加载一些显示广告的 javascript）时，列表视图中的滚动停止工作（除非您使用滚动条）。我已将错误隔离到此特定方法 - 如果我不调用 NavigateToString，但仍包含 WebView - 滚动有效。

我尝试将 Html 作为任务生成，并在调度程序上调用该方法，但没有运气。

我尝试过一些奇怪的东西，比如使用 DispatchtTimer 来延迟广告的加载。它可以工作.. 直到调用 NavigateToString 方法。

一件奇怪的事情 - 视图包含一个底部应用程序栏。如果我显示/隐藏此应用栏，滚动会突然起作用。（也许在执行此特定操作时，焦点会以某种方式重新回到 ListView）..

有什么建议么？=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:42:49.770

设置 IsEnabled=false; 在广告控件上。这是微软广告团队目前建议的解决方法。唯一的缺点是用户无法使用该设置标签到广告，但我认为这是可以接受的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:06:18.997

将 navigationCompleted 事件添加到 webview 并在导航完成事件中将焦点设置为 listview。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T12:41:18.497

WebView 不应放置在 AppBar 中，并且 Visibility 必须设置为 Visible。我已将 WebView 的边距设置为较大的负值，以将其隐藏在应用程序之外。

# facebook - 获取 Facebook iframe 参数

> ID：10311714
> 
> 赞同：0
> 
> 时间：2012-04-25T08:05:30.400
> 
> 标签：facebook, facebook-graph-api

如果用户在请求中单击“接受”，他们将看到一个 iframe，其中包含我的网站。

facebook url（具有 iframe）看起来像这样：

https://apps.facebook.com/[request_id]/?fb_source=notification&request_ids=[request_ids]&ref=notif&app_request_type=user_to_user¬if_t=app_request

如何从 iframe url 获取“request_id”？

JS 库中是否有相应的方法/API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:43:16.900

如果您正在使用`php`

`request_id`你可以通过检索`$_GET['request_id'] or $_REQUEST['request_id']`

如果你正在使用`javascript`

这只是在 javascript 中获取请求参数的一种实现，还有更好的实现，我举了一个例子。

```
var Request = { 
    parameter: function(name) {
        return this.parameters()[name];
    },

    parameters: function() {
        var result = {};
        var url = window.location.href;
        var parameters = url.slice(url.indexOf('?') + 1).split('&');

        for(var i = 0;  i < parameters.length; i++) {
            var parameter = parameters[i].split('=');
            result[parameter[0]] = parameter[1];
        }
        return result;
    }
 } 
```

`var request_id = parameters['request_id'];`

从获取网址`iframe`

> document.getElementById("iframe_id").contentWindow.location.href

希望这是你需要的

# xml - 缺少 xml 标头定义

> ID：10311717
> 
> 赞同：0
> 
> 时间：2012-04-25T08:05:39.880
> 
> 标签：xml, sax, saxparser

我知道我们应该包括

`<?xml version="1.0"?>`
作为xml的标题。
但是，如果我不将它包含在 xml 文档中，例如

```
<message>aaa</message> 
```

后果是什么？
我尝试过我的 java SAX 解析器在没有标头的情况下无法解析这个 xml。

这有什么后果？
SAX 会在没有此标头的情况下进行解析吗？
如果合法，如何解析这种类型的 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:29:21.290

文件前面的 XML 声明是可选的。省略它的后果是解析器必须猜测文件的字符编码。通常它会猜测 UTF-8，除非有其他可用信息，例如 HTTP 标头。

# iphone - 使用户必须在 UIWebView 中滚动

> ID：10311719
> 
> 赞同：-2
> 
> 时间：2012-04-25T08:05:58.537
> 
> 标签：iphone, objective-c, ios, xcode, uiwebview

我有一个在 iPhone 上运行的应用程序，上面有一个 UIWebView。我将一个网页加载到这个视图中，用户可以通过按下我添加到页面底部 UIToolBar 的按钮继续到下一页。我所追求的是阻止用户按下这些按钮，直到他们滚动到一半或一直向下滚动页面。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T08:39:20.003

如果它将位于页面的一半并且更远，那么您可能可以使用 webview 的滚动视图的内容偏移量。

我会在你的控制器中创建一个引用 webview 的滚动视图的实例变量。在 iOS 5 中，您可以使用 webview.scrollView 属性来访问 scrollView，但在以前的版本中，您必须搜索 webView 的子视图。

```
if([_webView respondsToSelector:@selector(scrollView)]) {
  _webViewScrollView = _webView.scrollView;
}
else {
  for (UIView *subview in _webView.subviews) {          
    if ([subview isKindOfClass: [UIScrollView class]]) {
      _webViewScrollView = subview;
      break;
    }
  }
} 
```

然后我会将滚动视图委托设置为我感兴趣的控制器

```
_webViewScrollView.delegate = self; 
```

并实现以下委托方法：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
  if( scrollView.contentOffset.y > someValue ) {
    // Enable Buttons
  }
  else {
    // Make / Keep buttons inactive..
  }
} 
```

另一种方法是使用一些 javascript 并使用 stringByEvaluatingJavaScriptFromString 做一些时髦的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:09:43.667

使用`scrollView`UIWebView 的属性并使用其委托回调

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset 
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate;
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView; 
```

处理滚动结束事件和 UIScrollview 属性 contentOffset 可以告诉您滚动位置相对于其内容大小（您网页的实际大小）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:25:40.417

在应用程序启动时使您的工具栏按钮禁用。然后通过添加此行检查当前滚动位置。

```
int position = [webView stringByEvaluatingJavaScriptFromString:@"window.scrollBy(0,180);"]; 
```

将页面滚动到特定位置上方后，启用工具栏按钮。 **或者** 您可以使用滚动视图委托方法。

# apache - 重定向www。使用 SSL 时裸域

> ID：10311721
> 
> 赞同：0
> 
> 时间：2012-04-25T08:06:13.270
> 
> 标签：apache, ssl, mod-ssl

**一些上下文**：我正在为域下的网站提供服务，`domain.com`并且`alternate-domain.com`. 我想重定向所有请求，以便它们：

1.  使用 SSL（基本上，重定向 http -> https）
2.  使用规范的主机名`domain.com`（例如删除`www`前缀）

这就是我在我的 apache 配置顶部所拥有的：

```
<VirtualHost *:80>
  Redirect permanent / https://domain.com/
</VirtualHost>

<VirtualHost *:433>
  Redirect permanent / https://domain.com/
  SSLEngine on

  # SSL Certificate directives are here.
</VirtualHost> 
```

然后稍后我有[https://domain.com](https://domain.com)的配置：

```
<VirtualHost *:443>
  ServerName domain.com
  # ...
</VirtualHost> 
```

当我访问非 HTTPS 页面时，这按预期工作：

*   [http://www.domain.com](http://www.domain.com)重定向到`https://domain.com`
*   [http://alternate-domain.com](http://alternate-domain.com)重定向到`https://domain.com`

但是，**当我通过 HTTPS 访问域时它不起作用**。我的意思是*重定向不会发生*。

例子：

*   [https://www.domain.com](https://www.domain.com)
*   [https://alternate-domain.com](https://alternate-domain.com)

（注意：出现证书警告是正常的，因为它们与我拥有证书的域不匹配。重定向用户的更多理由。）

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:19:56.177

好的，问题解决了——我犯了一个典型的愚蠢错误。

在 SSL 默认虚拟主机中，我侦听 port `433`。当然应该`443`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:16:21.683

您的配置表明，当有人输入[https://groupstreamer.com/](https://groupstreamer.com/)的 URL 时，服务器应该将他们重定向到[https://groupstreamer.com/](https://groupstreamer.com/) - 您看不到这里的缺陷吗？

丢失 443 虚拟主机中的重定向。如果您必须使用前端控制器（由于很多原因这是错误的），请使用 404 处理程序。

# java - 使用复选框在文本区域中包装文本

> ID：10311727
> 
> 赞同：4
> 
> 时间：2012-04-25T08:06:44.297
> 
> 标签：java, multithreading, swing, word-wrap, jtextarea

我在 Swing 中创建了一个用于编辑数据的对话框。它包含一个`JTextArea`，两个`JButton`实例（`OK`& `Cancel`）和一个`JCheckBox`（`Wrap Text`）。我想要做的是在用户单击复选框时包装文本区域中的文本。我最初使用`setLineWrap(true)`.

我正在使用以下代码：

```
 Runnable r1=new Runnable() {
        @Override
        public void run() {
            System.out.println("True");
            keyField.setLineWrap(true);
            keyField.requestFocus();
        }
    };

    Runnable r2=new Runnable() {
            @Override
            public void run() {
               System.out.println("FALSE");
               keyField.setLineWrap(false);
               keyField.repaint();
               keyField.requestFocus();
            }
     };
    final Thread t1=new Thread(r1) ;
    final Thread t2=new Thread(r2);

    final JCheckBox chkSwing = new JCheckBox("Word Wrap",true);

    chkSwing.addItemListener(
            new ItemListener() {
                @Override
                public void itemStateChanged(ItemEvent e) {
                    //To change body of implemented methods use File | Settings | File Templates.
                    if (e.getStateChange() == ItemEvent.SELECTED) {
                        t1.start();
                    } else if (e.getStateChange() != ItemEvent.SELECTED){
                        t2.start();
                    }
                }
            });

    panel.add(chkSwing); 
```

## 问题

问题是，一旦我取消选中该复选框，文本就会被展开，但再次选中该复选框*不会再次包裹文本*。控制台显示正在调用线程。如何使复选框用于设置/取消设置文本区域的自动换行行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T09:49:52.257

这是工作代码。（带有一个带有注释的可爱动画屏幕截图，其中突出显示了几个答案未指出的内容。）

![TextAreaWrapChooser](../Images/d38606ab53f6b96b5b6351107275d5a6.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;

class TextAreaWrapChooser {

    private JTextArea text = new JTextArea(8,30);

    TextAreaWrapChooser() {
        final JScrollPane scroll = new JScrollPane(text);

        JToolBar tb = new JToolBar();

        JCheckBox wrap = new JCheckBox("Line wrap", false);
        tb.add(wrap);
        wrap.addItemListener(new ItemListener() {
            // this method is called on the EDT
            public void itemStateChanged(ItemEvent ie) {
                boolean doWrap = ie.getStateChange() == ItemEvent.SELECTED;
                System.out.println("Wrap text: " + doWrap);
                text.setLineWrap( doWrap );
            }
        });

        // fill the text area
        try {
            File f = new File("TextAreaWrapChooser.java");
            FileReader fr = new FileReader(f);
            text.read( fr, f );
        } catch(Exception weTried) {
        }

        JPanel gui = new JPanel(new BorderLayout(2,2));
        gui.add(tb, BorderLayout.NORTH);
        gui.add(scroll, BorderLayout.CENTER);

        JOptionPane.showMessageDialog(null, gui);
    }

    public static void main(String[] args) {
        // construct/start the GUI on the EDT.
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new TextAreaWrapChooser();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T08:12:51.250

没有理由开始单独`Thread`的 s。更糟糕的是，您不应该在非 EDT 上修改 Swing 组件。请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)教程

```
chkSwing.addItemListener(
  new ItemListener() {
    @Override
    public void itemStateChanged(ItemEvent e) {
       keyField.setLineWrap( e.getStateChange() == ItemEvent.SELECTED );
    }
  } ); 
```

会做的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T08:10:29.820

为什么在单独的线程中调用包装集？可以调入`SwingUtilities.invokeLater()`吗？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-25T08:15:50.310

在 Swing 中，您对图形组件所做的所有更改都应在 EventDispatchThread 中完成。

要从任何线程执行此操作，最简单的方法是使用该`SwingUtilities.invokeLater()`方法。

在您的情况下，您想从 Swing 侦听器回调更改组件，这意味着您已经在 EventDispatchThread 中。`setLineWrap`因此，您可以从侦听器中调用该方法。

# debugging - 如何在 Erlang 中跟踪函数调用？

> ID：10311732
> 
> 赞同：1
> 
> 时间：2012-04-25T08:06:58.327
> 
> 标签：debugging, erlang, erlang-supervisor

我在 my_sup.erl 中有一个函数，如下所示：

```
init([ems_media_sup]) ->
  {ok, {{simple_one_for_one, ?MAX_RESTART, ?MAX_TIME}, [
   {ems_media_sup, {ems_media, start_link, []}, temporary, 2000, worker, [ems_media]}]
}}; 
```

但是ems_media.erl中没有名为start_link/1的函数，我想知道为什么运行时没有错误

```
supervisor:start_link(?MODULE, [ems_media_sup]) 
```

那么，如何知道调用 init([ems_media_sup]) 之后发生了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:24:01.747

这是因为`my_sup`is 类型`simple_one_for_one`- 所以它只会在通过[supervisor:start_child/2](http://erlang.org/doc/man/supervisor.html#start_child-2)明确要求时启动子进程。

如果主管是任何其他类型（或） `one_for_one`，它会在启动时尝试启动子规范中的所有子代，但是主管用于创建大量仅根据其参数列表而变化的子代，因此在这种情况下函数中的子规范仅起到模板的作用。`one_for_all``rest_for_one``simple_one_for_one``init`

# android - Foursquare Android 应用程序未正确“捕获”签入 URL/事件

> ID：10311734
> 
> 赞同：-2
> 
> 时间：2012-04-25T08:07:03.417
> 
> 标签：android, mobile, foursquare

如果在 Android 手机中，您转到手机网页以进行签到：

例如[https://foursquare.com/mobile/v/bcntouch/4e89646eb634306116691c16](https://foursquare.com/mobile/v/bcntouch/4e89646eb634306116691c16)

然后，当您单击“在此处签入”链接时，Android 原生应用程序会检测到该 url（通过 Intent）并启动。

但是，它会立即关闭而不显示任何 UI，并且您会留在同一网页上，并且检查未完成。

如果您默认禁用本机应用程序捕获该 url 的功能，并重复该过程（并选择浏览器来完成操作，而不是本机 Foursquare 应用程序），那么签入将正确完成。

这对我来说似乎是一个 Foursquare 错误，因为页面和应用程序都来自foursquare ...

我们使用从我们的网页重定向到 Foursquare 中的场地页面（如 Foursquare API 文档中所述）。这反过来会进行更多重定向，直到您最终到达上面的 URL。

在 ICS 中，您需要在每次重定向时手动选择浏览器（并忽略 Foursquare 原生应用程序）才能到达有问题的页面。这不是一件非常合乎逻辑的事情……因此问题在 ICS 上的优先级较低。

在 Gingerbread 上，您没有该选项，浏览器会经历所有重定向，最终您会到达上述网页。然后单击该链接提供 Foursquare 应用程序，但无法签入。

是否有任何已知的解决方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-25T12:43:34.420

这不是错误。这是触发场地活动的错误 URL。请改用以下 URL，如[Foursquare 开发人员文档](https://developer.foursquare.com/resources/client)中所述：

[http://m.foursquare.com/venue/VENUE_ID](http://m.foursquare.com/venue/VENUE_ID)

在你的情况下：http: [//m.foursquare.com/venue/4e89646eb634306116691c16](http://m.foursquare.com/venue/4e89646eb634306116691c16)

# c# - 为什么不支持 Convert.ToDouble(char)？

> ID：10311735
> 
> 赞同：20
> 
> 时间：2012-04-25T08:07:05.637
> 
> 标签：c#

从 msdn 页面：

> `public static double ToDouble( char value )`
> 
> **参数**
> 
> *value*
> 类型：System.Char 要转换的 Unicode 字符。
> 
> *返回值*
> 类型：System.Double 不支持此转换。不返回任何值。

如果不支持，为什么要首先实施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:43:05.770

它不是唯一的。也不支持 Convert.ToBoolean(char)、ToDateTime、ToDecimal 和 ToSingle，它们都像 ToDouble 一样抛出 InvalidCastException。

这只是 .NET 设计，试图让您远离麻烦。将 char 转换为整数类型是合理的，您可以查看 Unicode 映射表并计算代码点。但是转换为布尔值意味着什么？什么 Unicode 代码点是 True？ToDateTime 不需要解释。一个字符怎么可能是一个*小*数值？没有一半或四分之一的代码点。

您*可以*使其工作，先转换为 Int32，然后再转换为 Double。但无论如何，请检查您的代码并确保这是一件*有意义*的事情。.NET 设计者认为不是。他们是对的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:09:40.907

根据 MSDN，此功能保留供将来在 .Net 2.0 中使用，并保留到 4.5 以支持以前版本的 .net 框架。

如果未来的操作系统支持这种类型的转换，他们将实现这一点。目前，操作系统将 char 存储为 int，因此由于大量内部转换，因此不提供将 char 转换为 double 的方法。

由于内部存储格式，Convert.ToDouble(DateTime) 也有同样的限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T08:16:23.150

每个字符都有一个对应的整数。例如：

```
Convert.ToInt16('a') -> returns 97. 
```

我猜 Convert 不支持从 char 转换为其他类型的主要原因是字符的第二天性是整数类型。

也许更清楚的例子是下面的代码：

```
char a = 'a';
int aVal = (int)a; 
```

实际上 Convert.ToInt32 确实（但也会引发溢出异常）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T08:19:31.213

[char 可以隐式转换为 ushort、int、uint、long、ulong、float、double 或 decimal。](http://msdn.microsoft.com/ru-ru/library/x9h8tsay.aspx)

# google-maps - IE 8 剪裁谷歌标记图标

> ID：10311741
> 
> 赞同：1
> 
> 时间：2012-04-25T08:07:37.990
> 
> 标签：google-maps, internet-explorer, google-maps-styled

嗨，我在其他地方看到了与我自己类似的问题，但提供的答案对我不起作用。基本上，我创建的地图在我测试的所有浏览器中都可以正常工作，除了 IE，通过以下方式调用的定制图标：

```
google.maps.MarkerImage("mapIcons/"+ iconColor +".png", 
```

是 26 x 34 并且这个大小也是设置的。

我读到链接到 API 的稳定版本可能会有所帮助，但这并没有解决我也尝试过的问题：

```
 <!--[if IE]>
  <style>
    div#map img{
      margin-top: -1px;
      margin-left: -1px;
    }
  </style>
<![endif]--> 
```

这也失败了，有问题的页面可以在这里查看：http: [//nuweb.northumbria.ac.uk/google/ourframe.html](http://nuweb.northumbria.ac.uk/google/ourframe.html)

# android-logcat - 对于 Eclipse，CCLog 不起作用。CCMessageBox 运行良好

> ID：10311744
> 
> 赞同：5
> 
> 时间：2012-04-25T08:07:50.723
> 
> 标签：android-logcat, cocos2d-x

我正在使用从 GitHub 签出的最新代码。（0.13.0 测试版）

我正在使用 Eclipse 为 Android 开发。我确实在 Android.mk 中添加了 *COCOS2D_DEBUG*。我检查并确保 COCOS2D_DEBUG 确实定义为 1。

问题：CCLog 不会向 LogCat 打印任何内容。同时，CCMessageBox 运行良好。

（然后我在 iOS 上测试了同一组代码，CCLog 和 CCMessageBox 都运行良好。）

我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T10:48:08.580

只是想知道两件事：1.您使用的是CCLog还是CCLOG（都是大案子）？

你放了吗

```
 #define COCOS2D_DEBUG 1 
```

在您要调试的 cpp 文件中的真正顶部（高于任何#include）？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T12:29:26.813

使用 CCLOG("Test String")，全部大写，就可以了。CCLog("Hello") 在 Eclipse 日志猫中不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T08:05:53.873

我自己关于如何使用 CCLOG 在 Eclipse 的 LogCat 中打印信息的经验：

1.  在 Eclipse 中，您的项目打开 jni 文件夹，在 Application.mk 文件中添加 -DCCOCOS2D_DEBUG=1，如下所示：

    APP_CPPFLAGS := -frtti -DCC_ENABLE_CHIPMUNK_INTEGRATION=1 -std=c++1 -fsigned-char -DCCOCOS2D_DEBUG=1

![Application.mk 与 -DCCOCOS2D_DEBUG=1](../Images/87086da6dd2f83f60bcd42fd148fd3de.png)

2.  在你的项目 cpp 文件的某处写 CCLOG 函数： ![在此处输入图像描述](../Images/697ef1947f0ec6b375e5edf060618d50.png)

所有这些功能CCLOG CCLog日志，工作，所以只使用主要的CCLOG ...

3.  根据我的经验，Eclipse 的 LogCat 是一个可怕的工具，我非常讨厌它。非常烦人的事情是，在 3-6 次构建后，LogCat 停止工作，新行停止出现，所以我必须重新启动 Eclipse，然后 LogCat 继续工作...当我在 LogCat 中按 Clear Log 按钮时，所有日志都会消失，新日志不会出现...
    无论如何，要查看日志首先添加一个过滤器，名称无关紧要，并在标签行中写入： debug info ，然后 CCLOG 将显示： ![LogCat CCLOG](../Images/c4a5625074529e2b330964319be6e487.png)

**笔记：**

我评论过

```
//#define COCOS2D_DEBUG 1 
```

在我的项目中，确保没有这样的其他行，我仍然可以在 Visual Studio 2013 中打印出我的 CCLOG，并在 Windows 7 上打印出 Eclipse 的 Logcat：

![visual studio2013 COCOS2D_DEBUG 注释掉了](../Images/5e016612bc2c615d86774322fab5064d.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-09T07:11:48.887

如果你想使用 "CCLog()" 那么不需要设置 #define COCOS2D_DEBUG 1 如果你想使用 CCLOG() 那么你必须设置 #define COCOS2D_DEBUG 1

前 CCLog

```
CClog("Hi this is CCLog"); 
```

CCLOG 的示例代码

```
CCLOG ("Characters: %c %c \n", 'a', 65);

CCLOG ("Decimals: %d %ld\n", 1977, 650000L);

CCLOG ("Preceding with blanks: %10d \n", 1977);

CCLOG ("Preceding with zeros: %010d \n", 1977);

CCLOG ("Some different radixes: %d %x %o %#x %#o \n", 100, 100, 100, 100, 100);

CCLOG ("floats: %4.2f %+.0e %E \n", 3.1416, 3.1416, 3.1416);

CCLOG ("Width trick: %*d \n", 5, 10);

CCLOG ("%s \n", "A string"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-30T13:22:11.717

我添加了同样的问题：logcat 没有显示我的 cocos2dx 日志。然后我明白我的应用程序总是以发布模式构建的。

```
Make sure to activate debug mode in Eclipse for your project:

- Right-click your project
- Choose "Build Configurations" \ "Set Active" \ "Debug" 
```

无需修改您的 application.mk，因为已经在那里设置了一个指令用于调试或运行发布版本......之后在 logcat 窗口中获取日志，

```
- Create a new LogCat's filter and in the "by log tag" type
"cocos2d-x debug info"   (without quotes) 
```

运行应用程序时，在 LogCat 中选择过滤器以查看所有内容。顺便说一句：使用 cocos2dx 日志时使用 CCLOG 宏：

```
CCLOG("Year is %d",2015);      // don't use CCLog 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-07T05:35:11.010

从 cocos2dx 版本 3 开始，至少在 Application.mk 中 COCOS2D_DEBUG 是基于标准 NDK 标志 NDK_DEBUG=1 有条件地设置的。所以只需调用你的构建传递

```
ndk-build NDK_DEBUG=1 
```

这也确保为调试构建生成适当的符号。您将希望使用宏“CCLOG”而不是已弃用的函数调用 CCLog，因为前者将在发布模式下扩展为空，并且在构建发布时不会产生任何性能开销。

# c# - C# Service Application 启动无限线程

> ID：10311750
> 
> 赞同：1
> 
> 时间：2012-04-25T08:08:31.103
> 
> 标签：c#, multithreading, service

我设计了一个启动无穷无尽的应用程序`Thread`。这`Thread`是通过 SOAP-API 从特定设备收集事件并在触发特定事件时执行各种方法。
现在我希望所有这些都作为服务运行，但我不确定如何设计应用程序。

我目前的计划是提供服务。该服务创建一个“poller”类的实例，用于收集信息。之后，创建一个线程，一直执行“poller”的轮询功能。是否应该在我的服务应用程序事件中创建并执行“轮询器”实例和线程`OnStart`？我必须在`OnStop`事件中停止线程吗？还是会有更巧妙的设计？

我不确定这一点，因为我读到，`OnStart`事件不应该永远执行。但是如果我`Thread`从这里调用它会永远执行吗？

感谢您的帮助，因为这是我的第一个服务应用程序:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:28:25.923

'poller' 类将从您创建的轮询线程中使用，因此您有一些选择。我可能会在轮询器类 ctor 中创建轮询线程 - 似乎没有理由让线程具有比这更大的范围。如果添加了更多设备，您需要做的就是创建更多轮询器实例。

在 OnStart() 中，创建一个 poller 实例（它自己创建 poller 线程）并返回，因此满足“OnStart-Event 不应永远执行”条件。

在 OnStop() 中停止线程？首先，尝试停止线程的首选方法 - 根本不要尝试这样做。从服务管理器或任务管理器关闭时，您的服务是否运行正常并立即停止？如果是这样，不要通过尝试在 OnStop() 或轮询器类 dtor 中显式停止轮询线程来进行不必要的工作，并且可能会适得其反。只需将 OnStop() 留空，看看它是否工作正常。

如果你发现你必须在服务进程被操作系统杀死之前终止一个线程，你可能不得不采取狡猾的手段来说服轮询线程立即退出，或者你可能会使用 Thread.Interrupt() 侥幸逃脱。依靠..

只是为了看看，我试过这个：

```
class poller
{
    public static void ThreadProc()
    {
        for (;;)
        {

            Thread.Sleep(0);
        }
    }
    Thread myThread;
    public poller(){
        myThread = new Thread(new ThreadStart(ThreadProc));
        myThread.Priority = ThreadPriority.BelowNormal;
        myThread.Start();
    }
};

class WindowsService : ServiceBase
{
    poller thisPoller;
    public WindowsService()
    {
        this.ServiceName = "My Windows Service";
        this.EventLog.Log = "Application";

        this.CanHandlePowerEvent = true;
        this.CanHandleSessionChangeEvent = true;
        this.CanPauseAndContinue = true;
        this.CanShutdown = true;
        this.CanStop = true;
    }
    protected override void OnStart(string[] args)
    {
        base.OnStart(args);
        thisPoller = new poller();
    }
    protected override void OnStop()
    {
        base.OnStop();
    } 
```

在修改了一些项目属性并运行了正确版本的 installUtil 之后，它构建并安装好了。它开始正常，sleep(0) 循环显然正在工作，因为该服务出现在“进程”选项卡上，我的 i7 上的 CPU 使用率约为 17%。当我在任务管理器服务上选择“停止服务”时，服务状态立即变为“已停止”，但是该进程消失了大约 20 秒，（？）。

为了更有趣，我真的把盒子装满了。我停止了服务，卸载并重建：

```
protected override void OnStart(string[] args)
{
    base.OnStart(args);
    thisPoller = new poller();
    thisPoller = new poller();
    thisPoller = new poller();
    thisPoller = new poller();
    thisPoller = new poller();
    thisPoller = new poller();
    thisPoller = new poller();
    thisPoller = new poller();
} 
```

当我重新安装并重新启动时，我知道它正在工作，因为我可以在进入任务管理器之前听到 CPU 风扇转动的声音。果然，所有 8 个核心 100%。

即使有 8 个 CPU 循环线程，停止也没有问题。同样，状态立即变为“已停止”，该过程在 20 秒后消失。

将睡眠间隔设置为“1000000”以便线程不运行也没有任何问题 - 开始正常，停止正常。

# tsql - 如何在游标循环中使用 WITH table AS 结果来运行存储过程

> ID：10311753
> 
> 赞同：5
> 
> 时间：2012-04-25T08:08:43.333
> 
> 标签：tsql, with-statement, database-cursor

如何让结果`WITH table AS`进入`CURSOR`循环？我之前曾问过如何从我的表中获取递归结果

[如何递归读取所有记录并按级别深度TSQL显示](https://stackoverflow.com/questions/10311080/how-to-read-all-records-recursively-and-show-by-level-depth-tsql)

```
;with C as
(
    definition ...
) 
```

我创建了 CURSOR 循环，我想在其中为所有结果运行特定的存储过程`table`

```
declare @id int, @parent int
declare cur cursor local fast_forward 
for 
    select id, parent from C
open cur
fetch next from cur into @id, @parent
while @@fetch_status = 0
    begin
    exec storedProcedure @id=@id, @parent=@parent
fetch next from cur into @id, @parent
end
close cur
deallocate cur 
```

问题是 CURSOR 不知道`table`WITH AS 结果。

```
Invalid object name 'C'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:27:27.140

您可以创建一个临时表或表变量来保存 CTE 查询返回的行，然后将该表用作游标的源。

```
declare @T table
(
  id int,
  parent int
)

;with C as
(
  select 1 as id, 2 as parent
)
insert into @T
select id, parent
from C

declare cur cursor for select id, parent from @T 
```

# gwt - gwt 的日期时间库

> ID：10311754
> 
> 赞同：12
> 
> 时间：2012-04-25T08:08:45.653
> 
> 标签：gwt, jodatime

我正在开发一个 gwt 应用程序，该应用程序涉及对日期时间的高级操作：从一个时区转换为另一个时区等。Gwt 有一些用于处理日期的低级东西，但它们对我来说太低级了。有没有类似于 joda time 或 threeten for gwt 的选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:26:54.743

您可以查看以下选项。

[http://code.google.com/p/gwt-time/](http://code.google.com/p/gwt-time/)

[http://code.google.com/p/goda-time/](http://code.google.com/p/goda-time/)

[http://github.com/mping/gwt-joda-time](http://github.com/mping/gwt-joda-time)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T22:31:46.173

这是我的 DateTimeUtil 类

```
public class DateTimeUtil {
    public static String getYear(Date date) {
        return DateTimeFormat.getFormat("yyyy").format(date);
    }
    public static String getMonth(Date date) {
        return DateTimeFormat.getFormat("MM").format(date);
    }
    public static String getDay(Date date) {
        return DateTimeFormat.getFormat("dd").format(date);
    }
    public static String getHour(Date date) {
        return DateTimeFormat.getFormat("HH").format(date);
    }
    public static String getMinute(Date date) {
        return DateTimeFormat.getFormat("mm").format(date);
    }
    public static String getSecond(Date date) {
        return DateTimeFormat.getFormat("ss").format(date);
    }

    // The String year must to have yyyy format

    public static Date getDate(String years, String months, String days, String hours, String minutes, String seconds) {
        DateTimeFormat dtf = DateTimeFormat.getFormat("yyyy-MM-dd HH:mm:ss");
        Date date = dtf.parse(years + "-" + months + "-" + days + " " + hours + ":" + minutes + ":" + seconds);
        GWT.log("date parsed " + date);
        return date;
    }
} 
```

# python - 如何将 python 记录器定向到 Tkinker 的列表框？

> ID：10311755
> 
> 赞同：6
> 
> 时间：2012-04-25T08:08:51.103
> 
> 标签：python, logging, tkinter

我有一个简单的应用程序，其中有一个表示数据结构的类和一个用于 GUI 的类。我在第一堂课中使用了一个记录器：

```
class A(object):
    def __init__(self):
        self.logger = logging.getLogger(self.__class__.__name__)
        self.logger.info('creating new A object') 
```

等等

GUI 包含在一个带有列表框的 Tkinter 窗口中。

如何将日志定向到列表框？我希望看到消息在被记录时填充列表而不是显示在控制台或日志文件中。

如何在执行类中的方法时更新列表框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T10:54:03.443

在这种情况下，最好实现自己的 logging.Handler：

```
from logging import Handler, getLogger

class ListboxHandler(Handler):
    def __init__(self, box):
        self._box = box
        Handler.__init__(self)

    def emit(self, record):
        r = self.format(record)
        self._box.insert(0, r)

# quick test:
target = [] # supports insert like Listbox :)
rootLogger = getLogger()
# add handler to the root logger here
# should be done in the config...
rootLogger.addHandler(ListboxHandler(target))
rootLogger.warn('test')
print(target) 
```

通过这种方式，您可以完全控制配置中的格式、日志级别等。

# php - 使用此会话变量时浏览器变为空白

> ID：10311756
> 
> 赞同：0
> 
> 时间：2012-04-25T08:08:51.817
> 
> 标签：php, javascript, jquery, json

我有一个会话变量，它试图检索以下所有图像文件名：

```
$_SESSION ['fileImage'][] ['name'] = $_FILES ['fileImage'] ['name'];. 
```

但是，如果我尝试将此会话代码放在下面的 jsno.encode() 函数中，那么浏览器会变为空白，为什么会这样以及如何修复它以使浏览器不会变为空白？

```
var imagename = <?php echo json_encode(isset($_SESSION ['fileImage'][]) ? $_SESSION ['fileImage'] : null); ?>; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:18:10.650

这段代码对我来说似乎有问题：

```
(isset($_SESSION ['fileImage'][]) 
```

使用双方括号在数组中创建一个新条目。你可能应该给它起一个这样的名字：

```
$_SESSION ['fileImage']['data']['name'] = ... 
```

并检查它是否使用名称设置：

```
(isset($_SESSION ['fileImage']['data']) 
```

虽然我认为创建这个子阵列没有意义，但您可以按照 Sheldon 的建议省略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:12:21.107

尝试;

二传手：

```
$_SESSION['fileImage'] = $_FILES['fileImage']['name']; 
```

吸气剂（Js）：

```
var imagename = <?php echo json_encode(isset($_SESSION['fileImage']) ? $_SESSION['fileImage'] : NULL); ?>; 
```

# ssl - 我可以使用免费的 SSL 从移动设备到我的服务器进行通信

> ID：10311761
> 
> 赞同：-1
> 
> 时间：2012-04-25T08:09:06.693
> 
> 标签：ssl, titanium

我可以实施免费的 SSL 以使用 Titanium 将来自 Android 和 iOS 应用程序的数据发送到我的服务器吗？

有这样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:13:52.487

您可以使用[自签名 SSL 证书](http://en.wikipedia.org/wiki/Self-signed_certificate)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:14:20.610

没有任何 CA a) 被移动电话运营商普遍接受和 b) 免费提供 SSL 证书。SSL 证书不像以前那么昂贵，但也不是免费的。

如果您真的不需要 SSL，但确实需要在服务器和客户端之间加密数据，您可以研究替代编码方案，例如[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)。许多好的，免费的实现是可用的。

# facebook - og：图像标签在facebook中不起作用

> ID：10311762
> 
> 赞同：0
> 
> 时间：2012-04-25T08:09:08.223
> 
> 标签：facebook, share

我已将 og:image 元标记放在该部分内的我的 jsp 页面中。但是，当我在 Facebook 中发布我的页面 URL 时，没有显示 og:image 的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:38:38.780

你试过调试器吗？ [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug) 这将告诉你 facebook 正在阅读什么。（仅供参考，通常会有延迟，理论上点击 [debug] 会清除缓存）

# android - 绘制山图android

> ID：10311763
> 
> 赞同：0
> 
> 时间：2012-04-25T08:09:16.117
> 
> 标签：android, charts, draw, gradient

我想为我的应用绘制山图。图表顶部有一条线，线下方填充有渐变色。看起来这个链接[在这里输入链接描述](http://www.optionshouse.com/faq/android-app/how-can-i-change-the-chart-type-in-the-quote-screen/)。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:21:34.533

您使用的是哪种图表工具？我对 achartengine 做了同样的事情：xySeriesRenderer.setFillBelowLine(true);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:22:30.370

实现这一目标的最简单方法是使用支持您需求的 Android 图表组件。我知道的一个是我工作的公司[Steema Software的](http://www.steema.com/)[TeeChart for Android](http://www.steema.com/teechart/mobile)。它支持带渐变的区域系列。[您可以在图库](http://www.steema.com/gallery/charts/4)中的 TeeChart Mobile -> Android 部分查看一些示例。可在[此处](http://www.steema.com/evaluation/java)下载功能齐全的评估版。一个简单的代码片段是：

```
 tChart1.getAspect().setView3D(false);
    Area series = new Area(tChart1.getChart());
    series.fillSampleValues();
    series.getGradient().setVisible(true); 
```

# c# - Windows 窗体 C#

> ID：10311766
> 
> 赞同：2
> 
> 时间：2012-04-25T08:09:37.630
> 
> 标签：c#, winforms

我有一个带有列表样式表单的 Windows 表单应用程序，其中包含父记录和任何选定父记录的许多相关子记录。

IE。拥有多张发票/报价单/信件等的客户等。

我的表单布局有一个父记录列表，当用户选择父记录时，表单上的其他列表将填充相关的子信息。所有这些列表，用户都可以打开任何记录的详细信息表单。例如，用户可以选择客户 1，然后选择详细信息，然后将打开一个客户详细信息表单，其中显示客户 1 的信息。用户可以返回并选择客户 1 的相关记录，比如说发票 1，然后打开显示发票 1 信息的发票详细信息表单。

因此，在任何时候，用户都可能打开多个发票/报价单/信函等详细表格。用户还可以选择另一个客户并完成打开详细信息表单的相同过程。

The problem I have is that when customer 1 is selected and the user wants to display the detail form I need to check all open forms to see if customer 1 detail form is already opened.

我想知道在这种情况下什么被认为是好的做法。

我试图找到一些可以以某种方式应用于所有形式的通用方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:32:18.587

你可以在某个地方存储一个`IDictionary<Customer, Form>`。这将使您能够进行简单的 O(1) 查找：

```
var dict = new Dictionary<Customer, Form>();
var cust = new Customer();

if(!dict.ContainsKey(cust) || dict[cust].IsDisposed)
{
    dict[cust] = new Form1();
}

dict[cust].Show();
dict[cust].Activate(); 
```

这个样本被缩短了一点：`dict`当然不会是本地的，也不会是`cust`. 它们将是一个实例字段和一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:16:54.337

您可以做的是在左侧列出客户列表，并在右侧有一个包含客户信息的面板。单击客户将使用新的客户信息更新面板。

（想想资源管理器在 Windows 中的工作方式。左边是文件夹，右边是所选文件夹的信息）

面板将保存客户信息，例如发票名称和清单等。单击发票将以新形式打开发票。客户详细信息不需要以新形式打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:25:56.983

一种方法是将表单实例存储在列表中，并尝试在打开新表单之前找到相应的实例（如果您有一些所有其他人都继承自的“基本表单”，它具有客户编号的属性，事情会变得更容易）。

您需要确保在关闭表单时删除列表项。

如果你愿意，我可以在这里提供伪代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:27:00.603

正如我猜测的那样，您需要多次打开同一个表单，但您不需要两次显示相同的客户信息。如果是这样，那么一种选择是在您的客户详细信息表单中创建静态客户列表（例如客户 ID 列表）并检查新实例。如果客户存在于静态列表中，那么您可以取消显示或关注已打开的详细信息表单（当然如果您保存表单句柄）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T08:39:03.570

其他选择可能是使用 MDI 形式。打开所有表单，作为主 MDI 表单的子表单。打开新表单时，您可以随时检查它是否已经存在。

阅读[这篇](http://www.c-sharpcorner.com/uploadfile/kirtan007/how-to-prevent-multiple-instances-of-child-form-in-mdi-windows-form-application/)文章了解详情。

希望这可以帮助。

优点：无需维护已打开实例的单独列表。

# php - str_replace：用函数替换字符串

> ID：10311773
> 
> 赞同：1
> 
> 时间：2012-04-25T08:10:11.810
> 
> 标签：php, str-replace

只是一个简单的问题。我有一个存储在函数中的联系表单，因为在我希望它拥有的页面上调用它更容易。

现在为了扩展可用性，我想使用 str_replace 搜索 {contactform}。

例子：

```
function contactform(){
  // bunch of inputs
}

$wysiwyg = str_replace('{contactform}', contactform(), $wysiwyg); 
```

所以基本上，如果找到 {contactform}。将其替换为contactform 的输出。

现在我知道我可以在替换之前运行该函数并将其输出存储在一个变量中，然后用同一个变量替换它。但我很想知道是否有比我想到的更好的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:14:51.033

要回答您的问题，您*可以*使用 PCRE 和[preg_replace_callback](http://www.php.net/manual/en/function.preg-replace-callback.php)然后修改您的`contactform()`函数或创建一个接受匹配项的包装器。

我认为您将函数运行一次并将其存储在变量中的想法更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:16:44.210

您的方法很好，如果您打算多次使用 contactform() 的内容，我会将其设置为 $var。

在运行 str_replace 函数之前使用[http://php.net/strpos](http://php.net/strpos)检查 {contact_form} 是否存在可能会有所帮助。

您可以尝试两种方式，如果您的服务器支持，请进行基准测试：

```
<?php echo 'Memory Usage: '. (!function_exists('memory_get_usage') ? '0' : round(memory_get_usage()/1024/1024, 2)) .'MB'; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:13:46.240

您可能想在`call_user_func()`这里查看 php 的更多信息[http://php.net/call_user_func](http://php.net/call_user_func)

```
$wysiwyg = 'Some string and {contactform}';

$find = '{contactform}'; 

strpos($wysiwyg, $find) ? call_user_func($find) : ''; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:25:46.027

是的，有：自己写一个。（除非已经有一个，这在 PHP 中总是很难确定；请参阅我的下一点。）

啊，就是这样：[`preg_replace_callback()`](http://www.php.net/manual/en/function.preg-replace-callback.php)。当然，它是三个正则表达式库之一，因此不进行简单的字符串操作。

无论如何，我的观点是：不要遵循 PHP 的 [非] 设计准则。使用回调编写您自己的多字节安全字符串替换函数，不要使用`call_user_func()`.

# visual-studio-2010 - CA0001 : Member FirstOrDefault 找不到，代码分析错误

> ID：10311778
> 
> 赞同：3
> 
> 时间：2012-04-25T08:10:31.957
> 
> 标签：visual-studio-2010, code-analysis, fxcop

在我们的一个解决方案中，打开代码分析 (CA)，我们收到错误：

```
CA0001 : Member 'FirstOrDefault' could not be found in type 'System.Linq.Enumerable' in assembly '[our project]'. 
```

查看 Internet ( [http://msdn.microsoft.com/en-us/library/ms245246.aspx)，Microsoft](http://msdn.microsoft.com/en-us/library/ms245246.aspx)告诉我们查看 CodeAnalysisReport.xml 文件。但是在我的机器上没有这样的文件存在。

此外，msdn 页面告诉我们查看自定义规则，但我们没有任何自定义规则。

有人可以让我们进入正确的方向如何解决这个问题吗？或者如何获得有关 CA 这种奇怪行为的更多信息？

**编辑：@ 2012 年 4 月 25 日 - 10:38**

在对 VS2010 的输出进行了一番调查后，我在 bin/debug 目录中找到了一个文件 [mydll].CodeAnalysisLog.xml。那里的错误更具体：

```
 <Exception Keyword="CA0001" Kind="AssemblyLoad">
   <Type>Microsoft.FxCop.Common.AssemblyLoadException</Type>
   <ExceptionMessage>Member 'FirstOrDefault' could not be found in type 'System.Linq.Enumerable' in assembly 'Prodigy.UI.Modules.SecurityDesigner.Silverlight, Version=0.0.0.1, Culture=neutral, PublicKeyToken=fdb1b3fc35f0c32e'.</ExceptionMessage>
   <StackTrace>   at Microsoft.FxCop.Engines.Phoenix.LoadAndResolutionHandler.HandleFailureToFindMatch(ModuleUnit unit, String memberName, Type memberType, String className, UInt32 memberRefToken, UInt32 classToken)
   at Phx.Metadata.ReaderImplementation.GetExternalDefinitionMemberSymbolHelper(UInt32 memberToken, String name, Byte* signature, Symbol parentSymbol, Symbol originalParentSymbol)
   at Phx.Metadata.ReaderImplementation.GetExternalDefinitionMemberSymbolHelper(UInt32 memberToken, String name, Byte* signature, Symbol parentSymbol, Symbol originalParentSymbol)
   at Phx.Metadata.LoaderImplementation.GetExternalDefinitionMemberSymbol(UInt32 memberToken)
   at Phx.Metadata.LoaderImplementation.GetMemberReferenceSymbol(UInt32 memberReferenceToken)
   at Phx.Metadata.MetadataLoader.LoadMemberReferences(AssemblyUnit unit)
   at Microsoft.FxCop.Engines.Phoenix.AssemblyLoader.LoadAssembly(String filePath)
   at Microsoft.FxCop.Engines.Phoenix.PhoenixAnalysisEngine.AnalyzeInternal()
   at Microsoft.FxCop.Engines.Phoenix.PhoenixAnalysisEngine.Analyze()
   at Microsoft.FxCop.Common.EngineManager.Analyze(Project project, Boolean verboseOutput)</StackTrace>
  </Exception> 
```

但是问题仍然存在，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:32:14.763

检查您的代码，如果程序集“[mydll].Silverlight，版本=0.0.0.1，文化=中性，PublicKeyToken=fdb1b3fc35f0c32e”中的“System.Linq.Enumerable”类型中的成员“FirstOrDefault”？

通过错误描述，好像你的[mydll].Silerlight.dll程序集中有一个“System.Linq.Enumerable”类，是这样吗？

[来自http://social.msdn.microsoft.com/Forums/en-US/vstscode/thread/c2165692-67ea-4b4a-b730-52f4b4ff0313/](http://social.msdn.microsoft.com/Forums/en-US/vstscode/thread/c2165692-67ea-4b4a-b730-52f4b4ff0313/)的片段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:49:16.700

我最近偶然发现了这个问题，在传统的头疼之后，解决方案很有趣。重大变化是在我的项目中引用了一个自定义可移植库。这有效地在结果中带来了两组系统引用。这意味着 System.Core 被两次引用为 4.0.0.0 和 2.0.whatever。看起来 fxcop 不够聪明，无法处理这个问题（代码正在运行，它实际上只是验证）。

**tl;dr**检查您遇到问题的程序集有效引用的内容。确保没有重叠复制人进入您的程序集。

# mysql - 如何使用左连接选择不在关系数据中

> ID：10311782
> 
> 赞同：1
> 
> 时间：2012-04-25T08:10:50.593
> 
> 标签：mysql, left-join

我知道这是一个模棱两可的主题，因为如果我知道确切的名称，谷歌会给我答案。而且，对不起英语。

好的，我有 3 个表，如下所示

```
job   job_hide  user  
---   --------  ----  
id    job_id    id  
name  user_id   name 
```

假设我们有 3 个工作，其中 1、2、3 作为 id 和 2 个用户 test1、test2 作为 id 和 1 个 job_hide 记录，其中 2 作为 job_id 和 test2 作为 user_id。

我的问题是，如果用户 test2 登录并且我想选择除 ID 为 2 的作业之外的所有作业，我如何使用左连接，因为 ID 为 2 的作业已添加到 job_hide 表中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:01:41.557

```
SELECT id, name
FROM job
WHERE id NOT IN
      ( SELECT job_id
        FROM job_hide AS jh
        WHERE jh.job_id = job.id
          AND jh.user_id = 2            --- 2 is the @id_of_the_logged_user
       ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:18:53.570

为此，您可以简单地使用 is null 条件：

```
select job.* from job left join job_hide 
on (job.id = job_hide.job_id and job_hide.user_id = 'test2')
where job_hide.job_id is null 
```

# c# - 绑定到属性

> ID：10311783
> 
> 赞同：2
> 
> 时间：2012-04-25T08:10:55.900
> 
> 标签：c#, wpf, xaml, data-binding

我的 Page 类中有一个属性（MainStudent）：

```
public partial class AddStudent : Page
{
    public AddStudent()
    {
        InitializeComponent();
        MainStudent = new Student();
    }

    public Student MainStudent
    {
        get;
        set;
    }
} 
```

将 MainStudent 属性的 FirstName 属性（学生类有一些方法。例如：FirstName，LastName。）绑定到 XAML 中 TextBox 的 Text 属性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:17:41.390

如果您`Page`有仅引用您的属性，`Student`则可以直接在那里设置它`DataContext`，如当前构造函数中的最后一行：

```
this.DataContext = this.MainStudent; 
```

然后在 XAML 中直接绑定到 Student 的属性：

```
<TextBox Text="{Binding FistName}"></TextBox> 
```

否则，您可以将自己的 DataContext 设置为`Page`：

```
this.DataContext = this; 
```

并进行如下绑定：

```
<TextBox Text="{Binding MainStudent.FirstName}"></TextBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:14:58.277

```
<TextBox Text="{Binding MainStudent.Firstname, UpdateSourceTrigger=PropertyChanged}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:14:01.963

如果包含“MainStudent”的类是您的 DataContext 例如，请使用以下内容

```
<Grid DataContext="{StaticRessource YourViewModelDefinedInRessources}">
    <TextBox Text="{Binding MainStudent.FirstName}" />
    <TextBox Text="{Binding MainStudent.LastName}" />
</Grid> 
```

如果您需要进一步的帮助，请询问；）

# python - 编写 Python 工具将 XML 转换为 Python？

> ID：10311787
> 
> 赞同：1
> 
> 时间：2012-04-25T08:11:21.293
> 
> 标签：python, xml, xml-parsing, elementtree

我被要求研究将[XML](http://pastebin.com/vRRxfWiA)转换为 Python 的可能性，以便可以将 XML 从当前流程中逐步淘汰，并用新的 Python 脚本替换它们。

目前 XML 文件由 python 和 ASP 使用，看起来基本上是这样的；

```
<?xml version="1.0" encoding="UTF-8"?>
<script>
    <stage id="stage1" nextStage="stage2">
        <initialise>
            <variable id="year" value="2012" type="Integer"/>
            <executeMethod class="engineclass_date" method="getTodayAsString">
                <arguments>
                    <variable id="someVar"/>
                </arguments>
                <return>
                    <variable id="todaysDate"/>
                </return>
            </executeMethod> 
```

多亏了[Pepr](https://stackoverflow.com/users/1346705/pepr)，我在工作中没有一个[解析器/编译器](http://pastebin.com/D9DkQdEv)可以从 XML 生成 Python 代码。它仍然需要大量工作来处理所有可能的元素，但它确实有效，希望其他人可以像我一样从中学习！

仍然需要找到一种方法为脚本的每个阶段编写一个单独的文件，以便缩进能够正常运行并正确处理错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:23:00.903

如果您对这些 XML 文件有适当的 XML Schema，则可以使用 GenerateDS 等工具生成基于它们的 python 类。

这将允许您加载内存中的所有文件，并将它们作为对象。然后你如何将这些数据存储在其他地方......好吧，你没有说你想做什么，但你可以用python做任何你通常可以做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:25:28.817

使用标准的[xml.etree.Element](http://docs.python.org/library/xml.etree.elementtree.html)树将信息从 XML 提取到 Python 对象（或具有相同 API的更增强的第三方[lxml ）。](http://lxml.de/)

我建议阅读 Mark Pilrim 的*Dive Into Python 3*，第 12 章。XML ( [http://getpython3.com/diveintopython3/xml.html](http://getpython3.com/diveintopython3/xml.html) )。

这是如何编写解析器/编译器的核心。这个想法是递归遍历元素，收集必要的信息并在可能的情况下输出代码：

```
import xml.etree.ElementTree as ET

class Parser:

    def __init__(self):
        self.output_list = []  # collected output lines
        self.il = 0            # indentation level

    def __iter__(self):
        return iter(self.output_list)

    def out(self, s):
        '''Output the indented string to the output list.'''
        self.output_list.append('    ' * self.il + s)

    def indent(self, num=1):
        '''Increase the indentation level.'''
        self.il += num

    def dedent(self, num=1):
        '''Decrease the indentation level.'''
        self.il -= num

    def parse(self, elem):
        '''Call the parser of the elem.tag name.

        The tag name appended to "parse_" and then the name of that
        function is called.  If the function is not defined, then
        self.parse_undefined() is called.'''

        fn_name = 'parse_' + elem.tag
        try:
            fn = getattr(self, fn_name)
        except AttributeError:
            fn = self.parse_undefined
        return fn(elem)

    def loop(self, elem):
        '''Helper method to loop through the child elements.'''
        for e in elem:
            self.parse(e)

    def parseXMLfile(self, fname):
        '''Reads the XML file and starts parsing from the root element.'''
        tree = ET.parse(fname)
        script = tree.getroot()
        assert script.tag == 'script'
        self.parse(script)

    ###################### ELEMENT PARSERS #######################

    def parse_undefined(self, elem):
        '''Called for the element that has no parser defined.'''
        self.out('PARSING UNDEFINED for ' + elem.tag)

    def parse_script(self, elem):
        self.loop(elem)

    def parse_stage(self, elem):
        self.out('')
        self.out('Parsing the stage: ' + elem.attrib['id'])
        self.indent()
        self.loop(elem)
        self.dedent()

    def parse_initialise(self, elem):
        self.out('')
        self.out('#---------- ' + elem.tag + ' ----------')
        self.loop(elem)

    def parse_variable(self, elem):
        tt = str   # default type
        if elem.attrib['type'] == 'Integer': 
            tt = int
        # elif ... etc for other types

        # Conversion of the value to the type because of the later repr().
        value = tt(elem.attrib['value'])  

        id_ = elem.attrib['id']

        # Produce the line of the output.
        self.out('{0} = {1}'.format(id_, repr(value)))

    def parse_execute(self, elem):
        self.out('')
        self.out('#---------- ' + elem.tag + ' ----------')
        self.loop(elem)

    def parse_if(self, elem):
        assert elem[0].tag == 'condition'
        condition = self.parse(elem[0])
        self.out('if ' + condition + ':')
        self.indent()
        self.loop(elem[1:])
        self.dedent()

    def parse_condition(self, elem):
        assert len(elem) == 0
        return elem.text

    def parse_then(self, elem):
        self.loop(elem)

    def parse_else(self, elem):
        self.dedent()
        self.out('else:')
        self.indent()
        self.loop(elem)

    def parse_error(self, elem):
        assert len(elem) == 0
        errorID = elem.attrib.get('errorID', None)
        fieldID = elem.attrib.get('fieldID', None)
        self.out('error({0}, {1})'.format(errorID, fieldID))

    def parse_setNextStage(self, elem):
        assert len(elem) == 0
        self.out('setNextStage --> ' + elem.text)

if __name__ == '__main__':
    parser = Parser()
    parser.parseXMLfile('data.xml')
    for s in parser:
        print s 
```

当与此处粘贴的数据一起使用[http://pastebin.com/vRRxfWiA](http://pastebin.com/vRRxfWiA)时，脚本会产生以下输出：

```
Parsing the stage: stage1

    #---------- initialise ----------
    taxyear = 2012
    taxyearstart = '06/04/2012'
    taxyearend = '05/04/2013'
    previousemergencytaxcode = '747L'
    emergencytaxcode = '810L'
    nextemergencytaxcode = '810L'

    ...

    maxLimitAmount = 0
    PARSING UNDEFINED for executeMethod
    if $maxLimitReached$ == True:
        employeepayrecord = 'N'
        employeepayrecordstate = '2'
    else:
        employeepayrecordstate = '1'
    gender = ''
    genderstate = '1'
    title = ''
    forename = ''
    forename2 = ''
    surname = ''
    dob = ''
    dobinvalid = ''

    #---------- execute ----------
    if $dobstring$ != "":
        validDOBCheck = 'False'
        PARSING UNDEFINED for executeMethod
        if $validDOBCheck$ == False:
            error(224, dob)
        else:
            minimumDOBDate = ''
            PARSING UNDEFINED for executeMethod
            validDOBCheck = 'False'
            PARSING UNDEFINED for executeMethod
            if $validDOBCheck$ == False:
                error(3007161, dob)
        if $dobstring$ == "01/01/1901":
            error(231, dob)
    else:
        error(231, dob)

Parsing the stage: stage2

    #---------- initialise ----------
    address1 = ''

    ... 
```

# javascript - 保持 MooTools Accordion 在初始 Page Laud 关闭

> ID：10311792
> 
> 赞同：1
> 
> 时间：2012-04-25T08:11:46.397
> 
> 标签：javascript, ajax, mootools, accordion

我有一个用 MooTools 制作的手风琴，效果很好。

***jsfiddle 示例：http:*** [//jsfiddle.net/T6WX7/](http://jsfiddle.net/T6WX7/)

但是，**有人可以解释我如何更新此脚本，以便在页面最初加载时我的手风琴保持关闭状态**。

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:23:06.797

添加： `display: -1,` 到属性。

在这里找到答案：http: [//davidwalsh.name/simple-mootools-accordion#comments](http://davidwalsh.name/simple-mootools-accordion#comments)

喜悦:-D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:25:50.293

实际上这应该有效：

```
window.addEvent('domready', function() {
new Accordion($$('div.toggler'), $$('div.accordion'), {
 alwaysHide: true,
 display: false,
 opacity: false
 });
}); 
```

display:false 应该可以解决问题：http: [//jsfiddle.net/ChristianRomeni/T6WX7/1/](http://jsfiddle.net/ChristianRomeni/T6WX7/1/)

# javascript - 使用 javascript 正则表达式翻译 html

> ID：10311794
> 
> 赞同：1
> 
> 时间：2012-04-25T08:11:58.003
> 
> 标签：javascript, regex

我想用 javascript 构建自己的翻译功能。我已经有一个函数 language.lookup(key) 可以翻译单词或表达式：

```
var frenchHello = language.lookup('hello') //'bonjour' 
```

现在我想写一个函数，它接受一个 html 字符串并用我的查找函数翻译它。在 html 字符串中，我将有一个特殊的语法，例如 #[translationkey]，它将指出这个词应该被翻译。

这是我想要的结果：

```
var html = '<div><span>#[hello]</span><span>#[sir]</span>'
language.translate(html) //'<div><span>bonjour</span><span>monsieur</span> 
```

我将如何编写 language.translate？我的想法是用正则表达式过滤掉我的特殊语法，然后在每个键上运行 language.lookup。也许用字符串替换之类的。

当谈到正则表达式时，我很烂，我只提出了一个非常不完整的例子，但我还是把它包括在内，所以也许有人知道我想要做什么。如果有更好但完全不同的解决方案，那就更受欢迎了。

```
var value = "#[hello], nice to see you.";

lookup = function(word){
    return "bonjour";
};

var res = new RegExp( "\\b(hello)\\b", "gi" ).exec(value)

for (var c1 = 0; c1 < res.length; c1++){
    value = value.replace(res[c1], lookup(res[c1]))
}       
alert(value) //#[bonjour], nice to see you. 
```

正则表达式当然不应该过滤掉单词 hello 而是过滤掉语法，然后通过分组或类似的方式收集密钥。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:57:46.780

只需使用[String.replace](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)方法调用指定为第二个参数的函数来生成替换文本并使用匹配您的语法的正则表达式进行全局替换：

```
var value = "#[hello], #[sir], nice to see you.";

lookup = function(full_match, word){
    if(word == 'hello')
        return "bonjour";
    if(word == 'sir')
        return "monsieur"
};

console.log(value.replace(/#\[(.+?)\]/gi, lookup)) 
```

结果：您好，先生，很高兴见到您。

当然，当您的替换列表变大时，您最好使用查找对象而不是查找函数中的一系列 if，但您真的可以在那里做任何您想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:19:45.893

你可以使用类似的东西：

```
#\\[[^\\]]*\\] 
```

它匹配散列，后跟一个左方括号，后跟零个或多个字符，不包括右方括号，后跟一个右方括号。

或者，也许最好在服务器端处理翻译（甚至可能通过您的模板引擎）并将翻译后的响应发送回您的客户端。否则，（当然取决于您正在处理的具体问题），您最终可能会向浏览器发送大量数据，这可能会使您的应用程序响应缓慢。

编辑：这是一段工作代码：

```
 var q="This #[ANIMAL1] was eaten by that #[ANIMAL2]";
    var u = {"#[ANIMAL1]":"Lion","#[ANIMAL2]":"Frog"};

    function insertAnimal(aString, lookup){
        var res = (new RegExp("#\\[[^\\]]*\\]", "gi"))          
        while (m = res.exec(aString)){
            aString = aString.replace(m, lookup[m])
        }       
        return aString;
    }  

    function main(){
        alert(insertAnimal(q,u));           
    } 
```

您可以从 HTML 文档的正文 onload 事件中调用“main()”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T08:36:20.147

你可以试试这个来找到所有的事件：

```
var re = new RegExp('#\\[([^\\]]+?)\\]', 'gi'),
    str = '#[value1] plain text #[value2]',
    match;

while (match = re.exec(str)) {
    console.log(match);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:23:39.400

我可以将您的要求与“在内容中解析模板文本”进行比较。如果使用 Jquery 可行，您应该尝试[Handlebars.js](http://handlebarsjs.com/) 。

# winapi - 如果光标在其上，则在 Win32 子窗口上显示矩形，如果光标离开子窗口，则擦除

> ID：10311795
> 
> 赞同：3
> 
> 时间：2012-04-25T08:12:06.010
> 
> 标签：winapi, childwindow

当我的光标在窗口上时，我需要在没有标题的子窗口上显示一些形状（准确地说是 5 个矩形），并在光标离开窗口时擦除它们；即进入父窗口区域。

我正在通过 NCHITTEST 跟踪鼠标移动到子窗口，并且矩形完美弹出。但是当我的光标离开子窗口时，我不能让它们消失，它们只会留在客户区，直到窗口调用 WM_PAINT。

谁能告诉我如何实现这个功能？我需要使用 NCHITTEST 案例，因为我的其他功能取决于它。我曾尝试跟踪 mouse_move 和 lbuttondown 事件，但这些事件并未与 nchittest 一起被捕获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:25:59.980

看[`TrackMouseEvent()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646265%28v=vs.85%29.aspx)功能。

这需要在鼠标进入窗口时调用（`WM_MOUSEMOVE`如果它尚未被跟踪），并且会在鼠标离开时通知您的窗口（`WM_MOUSELEAVE`）。

这是一些示例 VB6 代码，但应该可以轻松转换为任何其他语言。

```
Select Case Msg
    Case WM_MOUSEMOVE
      If Not MouseInWindow Then
        Dim ET As TRACKMOUSEEVENTTYPE
        'Set up the mouse leave notification
        ET.cbSize = Len(ET)
        ET.hwndTrack = Me.hWnd
        ET.dwFlags = TME_HOVER Or TME_LEAVE
        ET.dwHoverTime = 0
        TrackMouseEvent ET

        MouseInWindow = True
        'The mouse has just entered
        Redraw
      End If

    Case WM_MOUSELEAVE
      If MouseInWindow Then
        MouseInWindow = False
        'The mouse has just left
        Redraw
      End If
End Select 
```

# android - 如何使用 APK 分发大量数据？

> ID：10311800
> 
> 赞同：0
> 
> 时间：2012-04-25T08:12:31.550
> 
> 标签：android, database, sqlite, installation, apk

我希望在我的 android 包中打包大量数据。我可以为此使用数据库吗？如果是，那么如何用 APK 打包数据库表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:33:30.810

您可以将数据库放在`assets/`文件夹中，当您的应用程序第一次运行时，使用以下代码将您的数据库复制到它们应该在的位置：

```
private void copyFromAssets() {
    InputStream istream = null;
    OutputStream ostream = null;
    try {
        istream = context.getAssets().open(DATABASE_NAME);
        File path = context.getDatabasePath(DATABASE_NAME);
        if (path.exists() == false)
            path.createNewFile();

        ostream = new FileOutputStream(path);

        byte[] buffer = new byte[8192];
        int length;
        while ((length = istream.read(buffer))>0) {
            ostream.write(buffer, 0, length);
        }
        ostream.flush();
    } catch (Exception e) {
        e.printStackTrace();
        Log.e(TAG, "Failed to copy database: " + DATABASE_NAME);
    } finally {
        try {
            if (ostream != null) ostream.close();
            if (istream != null) istream.close();
        } catch (IOException e) {}
    }
} 
```

之后，您可以按照通常的方式使用您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:58:30.530

由于 APK 仍然限制为 50MB，您可以尝试将数据库添加为扩展文件，与应用程序分开。这里有更多细节：[http ://android-developers.blogspot.com/2012/03/android-apps-break-50mb-barrier.html](http://android-developers.blogspot.com/2012/03/android-apps-break-50mb-barrier.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:21:08.920

要创建表格，您可以使用`SQLiteOpenHelper`（参考[这里](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)和信用[那里](http://people.bridgewater.edu/~arn002/csci440/android-tutorial.htm#database)）

```
private class MyOpenHelper extends SQLiteOpenHelper {
    public MyOpenHelper(Context context)
    {
        super(context, DB_NAME, null, DB_VERSION);
    }

    @Override public void onCreate(SQLiteDatabase db)
    {
       // Replace this SQL code with the code for your database.
        String query = "CREATE TABLE people (" +
          "_id integer primary key autoincrement not null, " +
          "first_name text, last_name text);";
        db.execSQL(query);
    }

    @Override public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        // Called when the database needs to be upgraded. The implementation
        // should use this method to drop tables, add tables, or do anything
        // else it needs to upgrade to the new schema version.
    }
} 
```

如果需要，将在访问时创建或更新该表。
如果需要，您还可以在创建表后填充数据库。
如果它可以帮助减小 APK 的大小（如果大小是您关心的问题），您可能希望提供一个 Web 服务来提供初始数据。

# javascript - JS中的文本规范化

> ID：10311805
> 
> 赞同：0
> 
> 时间：2012-04-25T08:13:01.233
> 
> 标签：javascript, unicode, normalization, unicode-normalization, text-normalization

有没有办法在Javascript中将字符串转换为[普通形式C ？](http://unicode.org/reports/tr15/#Norm_Forms)我知道node.js 中的[unorm](https://github.com/walling/unorm)，但我对浏览器内的 JS 很感兴趣，所以合理的标准浏览器 API 是可以的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:21:10.687

不，网络浏览器 javascript 没有开箱即用的转换算法。

**编辑** 这可能是您正在寻找的（但同样，它不仅仅是一个开箱即用的函数调用） [http://rishida.net/blog/?p=222](http://rishida.net/blog/?p=222)

# php - 何时使用 json 以及何时使用 jsonp 与 jquery $.ajax？

> ID：10311821
> 
> 赞同：3
> 
> 时间：2012-04-25T08:13:55.383
> 
> 标签：php, jquery, ajax, cakephp, jsonp

在我们的网站中，有些页面是 SSL，有些是非 SSL。

例如：

```
http://www.example.com/search/patients
https://www.example.com/patients 
```

现在我正在页面上搜索患者并通过功能和`http://www.example.com/search/patients`发送服务器请求。我无法获取数据。`https://www.example.com/patients``jQuery $.ajax``dataType=json`

**问题：**

1.  当我们在同一台服务器上向 to或to`jsonp`请求时，我应该使用吗？`http``https``https``http`

2.  如果我对两个 URL 都使用 SSL，那么它`dataType=json`只能使用

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T08:22:15.223

由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，只有在以下情况下才允许您的 ajax 请求：域名、应用层协议和（在大多数浏览器中）运行脚本的 HTML 文档的端口号相同

**在您的情况下，应用层协议不同，这就是您的脚本失败的原因**。

可能的解决方案是：

*   [JSONP](http://en.wikipedia.org/wiki/JSONP)，必须由服务器提供

*   [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，这是一个更“优雅”和干净的解决方案，但 IE 尚未完全支持（IE7 不支持它，IE8 有一些限制）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T08:21:14.507

如果您对两个 URL 都使用 SSL，它应该可以工作。同样正如@Waqas Raja 所建议的，最好使用相对 URL。

例如`$.ajax({url: '/search/patients'})`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T08:22:24.357

您需要使用 CORS、代理或 JSONP 从不同来源获取内容。更改方案（从 http 到 https 或其他方式）正在更改来源。

将数据从安全服务器拉入不安全页面会消除使用 SSL 的许多好处。

如果您通过 SSL 获取页面和数据源，那么您可以使用纯 JSON，并且不会引入这些安全问题。

# python - 用ply转义正则表达式中的空格？

> ID：10311827
> 
> 赞同：2
> 
> 时间：2012-04-25T08:14:16.857
> 
> 标签：python, regex, escaping, whitespace, ply

我需要在正则表达式中转义一个空格吗？我知道它在 Python 中可以通过以下任一方式工作`re.compile(r'\s')`：`re.compile(r' ')`和`re.compile(r'\ ')`. 因此，您似乎可以使用 Python re 模块逃避它或不逃避它。

但是当我试图通过 ply.lex 为单个空格定义规则时，事情似乎有点不同。

```
##########################
# r'\s' 适用于 ply.lex
def t_WHITESPACE（令牌）：
  r'\s'
  经过

##########################
# r'\' 也可以
def t_WHITESPACE（令牌）：
  r'\'
  经过

##########################
# r' ' 不起作用
# 引发 SyntaxError 并显示消息“规则 't_WHITESPACE' 的正则表达式匹配空字符串”
def t_WHITESPACE（令牌）：
  r''
  经过

```

ply.lex 是否对规则的**文档**字符串进行任何特殊处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T08:20:09.793

我不知道 ply，但这看起来像是使用[`re.VERBOSE`](http://docs.python.org/library/re.html#re.X)选项编译正则表达式，这意味着您确实需要转义文字空格或使用`\s`.

此外，您需要转义哈希 ( `#`)，否则以下部分将被解释为注释。

# windows-8 - 在 Win 8 Metro 应用程序中更新磁贴

> ID：10311832
> 
> 赞同：0
> 
> 时间：2012-04-25T08:14:38.377
> 
> 标签：windows-8, microsoft-metro

嗨，在我的 Metro 应用程序中，我在 appxmainfest 文件中设置了宽徽标，然后在页面上的按钮单击中我已经编写了此代码

```
XmlDocument tileXml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideText03);
var textElement = tileXml.GetElementsByTagName("text")[0].AppendChild(tileXml.CreateTextNode("Hey This my Text Updated on Tile"));
var tn = new TileNotification(tileXml);
TileUpdateManager.CreateTileUpdaterForApplication().Update(tn); 
```

但在最后一行它给了我错误。

提供的应用程序标识符无效。在 Windows.UI.Notifications.TileUpdateManager.CreateTileUpdaterForApplication() 在 TilesCS.ScenarioInput1.UpdateTileWithText_Click(Object sender, RoutedEventArgs e) 在 c:\Users\nitin\Downloads\App 磁贴和徽章示例\C#\ScenarioInput1.xaml.cs:line 68

我尝试了 Microsoft 的示例应用程序，但它也有同样的问题。我搜索了其他示例应用程序和代码，但是我尝试过的都给出了错误。

在一篇文章中，我读到我需要将 tile 的某些属性设置为动态，但我无法在任何地方进行调整。有谁知道我错在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:11:19.480

刚刚解决了。我在模拟器中运行它会出错。但如果我们在 localmachine 中运行应用程序，那就没问题了。因此，在更新瓷砖时，在本地机器上而不是在模拟器上运行应用程序

# ruby-on-rails - 使用 ActiveRecord 排序，使用 Kaminari 进行分页

> ID：10311833
> 
> 赞同：0
> 
> 时间：2012-04-25T08:14:43.663
> 
> 标签：ruby-on-rails, activerecord, kaminari

以下（来自我的活动控制器的索引操作）对显示条目的顺序没有影响：

```
@activities = Activity.order("updated_at").page(params[:page]) 
```

.page-part 用于进行分页的 Kaminari-gem。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:25:57.450

不，你是对的。可能是 kaminari 或其他地方不正确。请查看您的 Activity 的 default_scope。

# android - 如何检查是否启用了定位服务？

> ID：10311834
> 
> 赞同：258
> 
> 时间：2012-04-25T08:14:49.140
> 
> 标签：android, service, location

我正在开发 Android 操作系统上的应用程序。我不知道如何检查位置服务是否启用。

我需要一个方法，如果启用它们，则返回“true”，否则返回“false”（因此在最后一种情况下，我可以显示一个对话框来启用它们）。

* * *

## 回答 #1

> 赞同：404
> 
> 时间：2012-04-25T08:18:22.243

您可以使用以下代码检查是否启用了 gps 提供商和网络提供商。

```
LocationManager lm = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
boolean gps_enabled = false;
boolean network_enabled = false;

try {
    gps_enabled = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
} catch(Exception ex) {}

try {
    network_enabled = lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
} catch(Exception ex) {}

if(!gps_enabled && !network_enabled) {
    // notify user
    new AlertDialog.Builder(context)
        .setMessage(R.string.gps_network_not_enabled)
        .setPositiveButton(R.string.open_location_settings, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface paramDialogInterface, int paramInt) {
                context.startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));
            }
        })
        .setNegativeButton(R.string.Cancel,null)
        .show();    
} 
```

在清单文件中，您将需要添加以下权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

* * *

## 回答 #2

> 赞同：230
> 
> 时间：2014-04-10T07:00:53.927

我使用此代码进行检查：

```
public static boolean isLocationEnabled(Context context) {
    int locationMode = 0;
    String locationProviders;

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT){
        try {
            locationMode = Settings.Secure.getInt(context.getContentResolver(), Settings.Secure.LOCATION_MODE);

        } catch (SettingNotFoundException e) {
            e.printStackTrace();
            return false;
        }

        return locationMode != Settings.Secure.LOCATION_MODE_OFF;

    }else{
        locationProviders = Settings.Secure.getString(context.getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
        return !TextUtils.isEmpty(locationProviders);
    }

} 
```

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2019-02-12T11:11:52.427

就像现在在 2020 年一样

最新，最好和最短的方法是

```
@SuppressWarnings("deprecation")
public static Boolean isLocationEnabled(Context context) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
        // This is a new method provided in API 28
        LocationManager lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
        return lm.isLocationEnabled();
    } else {
        // This was deprecated in API 28
        int mode = Settings.Secure.getInt(context.getContentResolver(), Settings.Secure.LOCATION_MODE,
                Settings.Secure.LOCATION_MODE_OFF);
        return (mode != Settings.Secure.LOCATION_MODE_OFF);
    }
} 
```

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2019-09-26T04:03:15.777

迁移到 AndroidX 并使用

```
implementation 'androidx.appcompat:appcompat:1.3.0' 
```

并使用 LocationManagerCompat

在 Java 中

```
private boolean isLocationEnabled(Context context) {
    LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    return LocationManagerCompat.isLocationEnabled(locationManager);
} 
```

在科特林

```
private fun isLocationEnabled(context: Context): Boolean {
    val locationManager = context.getSystemService(Context.LOCATION_SERVICE) as LocationManager
    return LocationManagerCompat.isLocationEnabled(locationManager)
} 
```

* * *

## 回答 #5

> 赞同：38
> 
> 时间：2012-04-25T08:17:34.610

您可以使用此代码将用户引导至设置，他们可以在其中启用 GPS：

```
 locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    if( !locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) ) {
        new AlertDialog.Builder(context)
            .setTitle(R.string.gps_not_found_title)  // GPS not found
            .setMessage(R.string.gps_not_found_message) // Want to enable?
            .setPositiveButton(R.string.yes, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialogInterface, int i) {
                    owner.startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));
                }
            })
            .setNegativeButton(R.string.no, null)
            .show();
    } 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-04-15T16:15:44.143

根据上面的答案，在 API 23 中，您需要添加“危险”权限检查以及检查系统本身：

```
public static boolean isLocationServicesAvailable(Context context) {
    int locationMode = 0;
    String locationProviders;
    boolean isAvailable = false;

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT){
        try {
            locationMode = Settings.Secure.getInt(context.getContentResolver(), Settings.Secure.LOCATION_MODE);
        } catch (Settings.SettingNotFoundException e) {
            e.printStackTrace();
        }

        isAvailable = (locationMode != Settings.Secure.LOCATION_MODE_OFF);
    } else {
        locationProviders = Settings.Secure.getString(context.getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
        isAvailable = !TextUtils.isEmpty(locationProviders);
    }

    boolean coarsePermissionCheck = (ContextCompat.checkSelfPermission(context, Manifest.permission.ACCESS_COARSE_LOCATION) == PackageManager.PERMISSION_GRANTED);
    boolean finePermissionCheck = (ContextCompat.checkSelfPermission(context, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED);

    return isAvailable && (coarsePermissionCheck || finePermissionCheck);
} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-03-19T08:31:46.440

是的，您可以检查以下代码：

```
public boolean isGPSEnabled(Context mContext) 
{
    LocationManager lm = (LocationManager)
    mContext.getSystemService(Context.LOCATION_SERVICE);
    return lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
} 
```

使用清单文件中的权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-02-06T16:28:15.817

如果未启用提供程序，则“被动”是返回的最佳提供程序。见[https://stackoverflow.com/a/4519414/621690](https://stackoverflow.com/a/4519414/621690)

```
 public boolean isLocationServiceEnabled() {
        LocationManager lm = (LocationManager)
                this.getSystemService(Context.LOCATION_SERVICE);
        String provider = lm.getBestProvider(new Criteria(), true);
        return (StringUtils.isNotBlank(provider) &&
                !LocationManager.PASSIVE_PROVIDER.equals(provider));
    } 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-01-09T11:33:45.840

在我看来，这个 if 子句很容易检查位置服务是否可用：

```
LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
if(!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) && !locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
        //All location services are disabled

} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-11-19T04:23:34.773

要在 android 谷歌地图中获取**当前地理位置，您****应该打开您的设备位置**选项。要检查该位置是否打开，您可以简单地从您的方法中调用此`onCreate()`方法。

```
private void checkGPSStatus() {
    LocationManager locationManager = null;
    boolean gps_enabled = false;
    boolean network_enabled = false;
    if ( locationManager == null ) {
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    }
    try {
        gps_enabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception ex){}
    try {
        network_enabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    } catch (Exception ex){}
    if ( !gps_enabled && !network_enabled ){
        AlertDialog.Builder dialog = new AlertDialog.Builder(MyActivity.this);
        dialog.setMessage("GPS not enabled");
        dialog.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                //this will navigate user to the device location settings screen
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                startActivity(intent);
            }
        });
        AlertDialog alert = dialog.create();
        alert.show();
    }
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-02-09T23:53:15.223

这是一个非常有用的方法，`true`如果`Location services`启用，则返回“”：

```
public static boolean locationServicesEnabled(Context context) {
        LocationManager lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
        boolean gps_enabled = false;
        boolean net_enabled = false;

        try {
            gps_enabled = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
        } catch (Exception ex) {
            Log.e(TAG,"Exception gps_enabled");
        }

        try {
            net_enabled = lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        } catch (Exception ex) {
            Log.e(TAG,"Exception network_enabled");
        }
        return gps_enabled || net_enabled;
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-06-29T12:14:14.890

对于科特林

```
 private fun isLocationEnabled(mContext: Context): Boolean {
    val lm = mContext.getSystemService(Context.LOCATION_SERVICE) as LocationManager
    return lm.isProviderEnabled(LocationManager.GPS_PROVIDER) || lm.isProviderEnabled(
            LocationManager.NETWORK_PROVIDER)
 } 
```

对话

```
private fun showLocationIsDisabledAlert() {
    alert("We can't show your position because you generally disabled the location service for your device.") {
        yesButton {
        }
        neutralPressed("Settings") {
            startActivity(Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS))
        }
    }.show()
} 
```

像这样打电话

```
 if (!isLocationEnabled(this.context)) {
        showLocationIsDisabledAlert()
 } 
```

提示：对话框需要以下导入（android studio 应该为你处理这个）

```
import org.jetbrains.anko.alert
import org.jetbrains.anko.noButton 
```

在清单中，您需要以下权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-12-10T11:06:54.067

**我对NETWORK_PROVIDER**使用这种方式，但您可以为**GPS**添加和。

```
LocationManager locationManager; 
```

在**onCreate**我放

```
 isLocationEnabled();
   if(!isLocationEnabled()) {
        AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
        builder.setTitle(R.string.network_not_enabled)
                .setMessage(R.string.open_location_settings)
                .setPositiveButton(R.string.yes,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));
                            }
                        })
                .setNegativeButton(R.string.cancel,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                dialog.cancel();
                            }
                        });
        AlertDialog alert = builder.create();
        alert.show();
    } 
```

及检查方法

```
protected boolean isLocationEnabled(){
    String le = Context.LOCATION_SERVICE;
    locationManager = (LocationManager) getSystemService(le);
    if(!locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-02-26T12:08:14.497

我使用第一个代码开始创建方法 isLocationEnabled

```
 private LocationManager locationManager ;

protected boolean isLocationEnabled(){
        String le = Context.LOCATION_SERVICE;
        locationManager = (LocationManager) getSystemService(le);
        if(!locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){
            return false;
        } else {
            return true;
        }
    } 
```

我检查条件如果真的打开地图和错误给出意图 ACTION_LOCATION_SOURCE_SETTINGS

```
 if (isLocationEnabled()) {
        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map);
        mapFragment.getMapAsync(this);

        locationClient = getFusedLocationProviderClient(this);
        locationClient.getLastLocation()
                .addOnSuccessListener(new OnSuccessListener<Location>() {
                    @Override
                    public void onSuccess(Location location) {
                        // GPS location can be null if GPS is switched off
                        if (location != null) {
                            onLocationChanged(location);

                            Log.e("location", String.valueOf(location.getLongitude()));
                        }
                    }
                })
                .addOnFailureListener(new OnFailureListener() {
                    @Override
                    public void onFailure(@NonNull Exception e) {
                        Log.e("MapDemoActivity", e.toString());
                        e.printStackTrace();
                    }
                });

        startLocationUpdates();

    }
    else {
        new AlertDialog.Builder(this)
                .setTitle("Please activate location")
                .setMessage("Click ok to goto settings else exit.")
                .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                        startActivity(intent);
                    }
                })
                .setNegativeButton(android.R.string.no, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        System.exit(0);
                    }
                })
                .show();
    } 
```

[![在此处输入图像描述](../Images/c0c508543611ce97b9def9ea7d9f6aac.png)](https://i.stack.imgur.com/4SGNd.png)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2020-09-09T02:39:33.650

在 Android 8.1 或更低版本上，用户可以从
`Settings > Location > Mode > Battery Saving`.
此模式仅使用`WiFi, Bluetooth or mobile data`而不是 GPS 来确定用户位置。

这就是为什么您必须检查网络提供商是否已启用并且`locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)`还不够。

如果您使用`androidx`此代码，将检查您正在运行的 SDK 版本并调用相应的提供程序：

```
public boolean isLocationEnabled(Context context) {
    LocationManager manager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    return manager != null && LocationManagerCompat.isLocationEnabled(manager);
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2014-08-13T11:11:35.773

```
private boolean isGpsEnabled()
{
    LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
    return service.isProviderEnabled(LocationManager.GPS_PROVIDER)&&service.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
} 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-12-19T06:11:40.043

**可以用最简单的方式做**

```
private boolean isLocationEnabled(Context context){
int mode =Settings.Secure.getInt(context.getContentResolver(), Settings.Secure.LOCATION_MODE,
                        Settings.Secure.LOCATION_MODE_OFF);
                final boolean enabled = (mode != android.provider.Settings.Secure.LOCATION_MODE_OFF);
return enabled;
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2020-04-17T08:44:39.280

```
public class LocationUtil {
private static final String TAG = LocationUtil.class.getSimpleName();

public static LocationManager getLocationManager(final Context context) {
    return (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
}

public static boolean isNetworkProviderEnabled(final Context context) {
    return getLocationManager(context).isProviderEnabled(LocationManager.NETWORK_PROVIDER);
}

public static boolean isGpsProviderEnabled(final Context context) {
    return getLocationManager(context).isProviderEnabled(LocationManager.GPS_PROVIDER);
}

// Returns true even if the location services are disabled. Do not use this method to detect location services are enabled.
private static boolean isPassiveProviderEnabled(final Context context) {
    return getLocationManager(context).isProviderEnabled(LocationManager.PASSIVE_PROVIDER);
}

public static boolean isLocationModeOn(final Context context) throws Exception {
    int locationMode = Settings.Secure.getInt(context.getContentResolver(), Settings.Secure.LOCATION_MODE);
    return locationMode != Settings.Secure.LOCATION_MODE_OFF;
}

public static boolean isLocationEnabled(final Context context) {
    try {
        return isNetworkProviderEnabled(context) || isGpsProviderEnabled(context)  || isLocationModeOn(context);
    } catch (Exception e) {
        Log.e(TAG, "[isLocationEnabled] error:", e);
    }
    return false;
}

public static void gotoLocationSettings(final Activity activity, final int requestCode) {
    Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
    activity.startActivityForResult(intent, requestCode);
}

public static String getEnabledProvidersLogMessage(final Context context){
    try{
        return "[getEnabledProvidersLogMessage] isNetworkProviderEnabled:"+isNetworkProviderEnabled(context) +
                ", isGpsProviderEnabled:" + isGpsProviderEnabled(context) +
                ", isLocationModeOn:" + isLocationModeOn(context) +
                ", isPassiveProviderEnabled(ignored):" + isPassiveProviderEnabled(context);
    }catch (Exception e){
        Log.e(TAG, "[getEnabledProvidersLogMessage] error:", e);
        return "provider error";
    }
} 
```

}

使用 isLocationEnabled 方法检测位置服务是否启用。

[https://github.com/Polidea/RxAndroidBle/issues/327#](https://github.com/Polidea/RxAndroidBle/issues/327#)页面将提供更多信息，为什么不使用被动提供程序，而是使用位置模式。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-04-04T15:22:38.027

您可以请求位置更新并一起显示对话框，就像 GoogleMaps 一样。这是代码：

```
googleApiClient = new GoogleApiClient.Builder(getActivity())
                .addApi(LocationServices.API)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this).build();
googleApiClient.connect();

LocationRequest locationRequest = LocationRequest.create();
locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
locationRequest.setInterval(30 * 1000);
locationRequest.setFastestInterval(5 * 1000);
LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder()
                    .addLocationRequest(locationRequest);

builder.setAlwaysShow(true); //this is the key ingredient

PendingResult<LocationSettingsResult> result = LocationServices.SettingsApi.checkLocationSettings(googleApiClient, builder.build());
result.setResultCallback(new ResultCallback<LocationSettingsResult>() {
    @Override
    public void onResult(LocationSettingsResult result) {
        final Status status = result.getStatus();
        final LocationSettingsStates state = result.getLocationSettingsStates();
        switch (status.getStatusCode()) {
            case LocationSettingsStatusCodes.SUCCESS:
                // All location settings are satisfied. The client can initialize location
                // requests here.
                break;
            case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
                // Location settings are not satisfied. But could be fixed by showing the user
                // a dialog.
                try {
                    // Show the dialog by calling startResolutionForResult(),
                    // and check the result in onActivityResult().
                    status.startResolutionForResult(getActivity(), 1000);
                } catch (IntentSender.SendIntentException ignored) {}
                break;
            case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
                // Location settings are not satisfied. However, we have no way to fix the
                // settings so we won't show the dialog.
                break;
            }
        }
    });
} 
```

如果您需要更多信息，请查看[LocationRequest](https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest#public-method-summary)类。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-12-31T18:49:55.033

如果您使用的是 AndroidX，请使用以下代码检查位置服务是否启用：

```
fun isNetworkServiceEnabled(context: Context) = LocationManagerCompat.isLocationEnabled(context.getSystemService(LocationManager::class.java)) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2012-11-22T16:48:09.893

要检查网络提供商，您只需将传递给 isProviderEnabled 的字符串更改为 LocationManager.NETWORK_PROVIDER 如果您检查 GPS 提供商和网络提供商的返回值 - 两者都为 false 表示没有位置服务

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-01-28T16:39:58.173

```
 LocationManager lm = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
    boolean gps_enabled = false;
    boolean network_enabled = false;

    try {
        gps_enabled = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch(Exception e){
         e.printStackTrace();
    }

    try {
        network_enabled = lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    } catch(Exception e){
         e.printStackTrace();
    }

    if(!gps_enabled && !network_enabled) {
        // notify user
        new AlertDialog.Builder(this)
                .setMessage("Please turn on Location to continue")
                .setPositiveButton("Open Location Settings", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface paramDialogInterface, int paramInt) {
                        startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));
                    }

                }).
                setNegativeButton("Cancel",null)
                .show();
    } 
```

# c++ - 如何将返回 C++ 自定义类的函数与 Cython 接口？

> ID：10311837
> 
> 赞同：2
> 
> 时间：2012-04-25T08:14:58.130
> 
> 标签：c++, cython

我有这个 C++ 函数原型：

```
 Bar & getBar() 
```

其中 Bar 是用户定义的 C++ 类。现在我想以最简单的方式将此函数与 Cython 接口。

我的 .pyx 文件如下所示：

```
cdef class PyBar:
   cdef Bar* thisptr 
   (...)

def pygetBar():
   cdef Bar bar = getBar()  
   cdef PyBar pybar = PyBar()

   (*pybar.thisptr) =  bar  # <-- too bad, do not work 
```

无论我尝试什么，我都无法在“thisptr”中复制 C++ Bar 实例。对于上面的行，我收到了这个 Cython 错误消息：

```
 Cannot assign type 'Bar' to 'Bar *' 
```

我找到的唯一解决方案是定义一个只进行复制的 C++ 辅助函数：

```
void helper_copy_bar(Bar* source, Bar* destination)
{ *destination = *source } 
```

虽然这可行，但每次我只想连接这样一个简单的函数时，创建一个新的 C++ 函数是很烦人的。文档中一定有我遗漏的东西。

**编辑**：

我发现了一个有其他缺点的解决方法：

```
 def pygetBar():
    cdef Bar * bar = new Bar(getBar())  
    cdef PyBar pybar = PyBar()
    del pybar.thisptr
    pybar.thisptr = bar

    return pybar 
```

它仍然涉及一个无用的 c++ 对象的新建/删除，但至少不需要外部函数（对懒惰的人有好处）。我仍然想知道哪种解决方案（外部函数或第二个）更好，以及是否有办法在没有外部函数的情况下使用第一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T00:58:42.933

Bar& 是对 Bar 的*引用*，它不是指向 Bar 的指针，尽管在内部，编译器可以将其实现为指针。简化这一点的最简单方法是编写一个辅助 C 函数，我不知道 Cython 对 C++ 有明确的支持？您的“解决方法”看起来很合适。

# android - 没有引擎的Android 2D游戏开发

> ID：10311841
> 
> 赞同：4
> 
> 时间：2012-04-25T08:15:03.120
> 
> 标签：android, opengl-es, game-engine

我想知道制作一款好的安卓游戏的最佳方式或工具！，我所说的“好”是指游戏必须具有良好的性能，没有滞后或类似的东西，..

所以我会从 2D 游戏开发开始，我要避免“游戏引擎”！..

那么最好的方法是什么？！- 通过 Open GL ES 或其他方式制作它？！..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T08:27:29.910

[通过查看Replica Island](http://replicaisland.net/)，您应该能够学到很多关于 open gl 图形编程的知识 。它是一款不使用引擎的开源 2d 平台游戏。作者就 Google IO 进行了一些演讲，您可能会感兴趣：

*   [http://www.youtube.com/watch?v=U4Bk5rmIpic](http://www.youtube.com/watch?v=U4Bk5rmIpic)
*   [http://www.youtube.com/watch?v=7-62tRHLcHk](http://www.youtube.com/watch?v=7-62tRHLcHk)
*   [http://www.youtube.com/watch?v=cdvaPyq_eBU](http://www.youtube.com/watch?v=cdvaPyq_eBU)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-25T08:22:10.510

这可能被认为是一个过于宽泛的问题——我们无法告诉你如何制作游戏。但回答您的最后一个问题：是的，OpenGL 是制作 2D 或 3D 高性能游戏的最佳方式。如果您有一个移动速度较慢的回合制游戏，那么您可以坚持使用 a `Canvas`on a`SurfaceView`甚至使用基本的 View 小部件来构建游戏板的布局。

但如果这是你的第一款游戏，除非你有足够的时间和耐心，否则我强烈建议你尝试现有的游戏引擎。在你完成一半（或 10% 的时间）之前，你可能不会意识到一个像样的游戏引擎需要做多少工作。看看像 LibGDX 这样的引擎的源代码，并考虑它是否是您能够编写的那种东西。

[Android 图形开发指南](http://developer.android.com/guide/topics/graphics/index.html)中有大量信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T08:31:51.793

如果您打算构建一个简单的游戏，那么坚持使用 Basic android。如果是大型游戏，没有游戏引擎，您的游戏开发将是一个较重的过程。如果您想使用大量图像，则会出现内存问题（ OOM）。如果你对游戏引擎感到满意，这将有助于未来的游戏开发。如果你正在制作一个简单的游戏，那么就不需要游戏引擎。

有很多可用的游戏引擎

和引擎，libgdx，cocos2d ..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-08T23:28:55.610

在 Android 中开发 2D 游戏不需要游戏引擎。您也不需要使用 SurfaceView。SurfaceView、OpenGL 和 AndEngine 以及（可能是其他游戏引擎）在各种 Android 设备上存在一致的精灵动画速度和精灵大小的问题。尤其是当游戏有复杂的精灵动作时。我疯狂地尝试构建一个 2D 游戏，让精灵和精灵大小相对于屏幕尺寸和密度（例如平板电脑与手机）保持一致的速度移动。所以，我决定放弃游戏引擎，这就是我完成我最近发布的第一个 2D Android 游戏的方式：

1.  对精灵图像使用 drawable-nodpi（使精灵大小在屏幕密度和大小上保持一致）

2.  使用不同的布局来支持各种屏幕尺寸（例如 layout-large、layout-xlarge 等...）

3.  使用 TranslateAnimation 和 ObjectAnimator 对屏幕上的精灵运动进行动画处理

4.  使用数学计算精灵碰撞（例如屏幕坐标和精灵位置等）

5.  使用处理程序和条件语句来控制游戏事件

您可以通过查看游戏来测试按照上述指南开发没有游戏引擎的 2D Android 游戏的结果。它在 Google Play 上被称为 Yum Yum Pow。免费的限量版也可以在 Google Play 上找到。我只能链接到我认为的免费应用程序，所以这里是：

[https://play.google.com/store/apps/details?id=com.wildroid.yum.yum.pow.limited](https://play.google.com/store/apps/details?id=com.wildroid.yum.yum.pow.limited)

# .net-4.0 - mage.exe 无法更新清单

> ID：10311844
> 
> 赞同：2
> 
> 时间：2012-04-25T08:15:14.863
> 
> 标签：.net-4.0, msbuild, clickonce

我们使用 TFS 2010 和 msbuild。

当我们构建 click once 应用程序的新测试版本时，会在构建服务器上执行以下命令：

mage.exe -u "our.app.manifest" -if green.ico -fd 。-cf "C:\Test\Sources\App\App.Gui\test.pfx" -pwd 密码

大约 12 分钟后，我们收到以下错误消息：

“内部错误，请重试。无法从传输连接读取数据：现有连接被远程主机强行关闭”

当这个问题突然出现时，它已经工作了大约 2 年。证书有效期至 2012 年 10 月。有人知道吗？

# .net - MS Office PIA Com 互操作错误

> ID：10311848
> 
> 赞同：0
> 
> 时间：2012-04-25T08:15:29.363
> 
> 标签：.net, excel, com-interop

我的应用程序读取一个 excel 文件来解析和上传记录。我使用 .NET 4 和 PIA。
该应用程序在我的 Win7 机器上运行良好。但是在 Win2003 服务器上，它在下面的代码行中给出了这个错误

```
var xlApp = new Microsoft.Office.Interop.Excel.Application(); 
```

**由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80040154。**

请给出一些解决这个问题的指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:24:16.330

您必须做的第一件事是确保该服务器上实际安装了 Office。如果组件不存在，您将无法使用 PIA。

您必须做的第二件事是担心您的过程的位数。服务器可能会启动 64 位版本的 Windows，但安装了 32 位版本的 Office。这意味着您的进程也需要是 32 位的。项目 + 属性，构建选项卡，将平台目标设置从 AnyCPU 更改为 x86。如果此代码在 IIS 中运行，则启用 32 位应用程序池支持。

# wordpress - Drupal、Wordpress 或其他 cms 或自己的 cms？

> ID：10311855
> 
> 赞同：0
> 
> 时间：2012-04-25T08:16:13.523
> 
> 标签：wordpress, drupal, content-management-system

我有兴趣创办自己的网站公司。我正在考虑一些选择，也许你们可以给我一些建议。从drupal或wordpress之类的开源CMS开始并制作自己的主题会更好吗？还是从头开始构建自己的 CMS 更好。drupal 或 worpdress 不是因为它太大而慢吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:27:40.077

简而言之，甚至不要考虑创建自己的 CMS。我怀疑您的需求是如此具体，以至于无法通过使用现有的 CMS 来解决，这提供[了许多额外的好处](https://web.archive.org/web/20131031222233/http://migratetowp.com/best-new-year%C2%B4s-resolution-drop-your-custom-cms-and-go-wordpress/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:28:50.883

我很久以前构建了一些 CMS，它很好，但是随着时间的流逝，我不得不添加更新和更新和更新......比我看到 Drupal 并开始用它做网页。

如果你是一个人，开始使用一些现有的开源 CMS，这是我的建议。

# remote-access - JGit：连接到远程存储库

> ID：10311857
> 
> 赞同：7
> 
> 时间：2012-04-25T08:16:19.010
> 
> 标签：remote-access, jgit

我搜索了谷歌、论坛和 JGit 用户指南，但找不到如何使用 API 连接到远程存储库。任何人都有一个例子或只是一个关于如何做到这一点的想法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:19:17.293

目前，JGit 2.0.0-SNAPSHOT 只提供

```
org.eclipse.jgit.storage.file.FileRepository
org.eclipse.jgit.storage.dfs.InMemoryRepository 
```

具体`Repository`类，这意味着由于`org.eclipse.jgit.api.Git`需要 a `Repository`，因此无法远程工作。由于 Git 本身并没有像我想的那样设计为远程操作，我怀疑我们很快就会看到这样的功能。

**更多信息：**

因此，您将需要在本地克隆。你可以通过发出

```
 Git.cloneRepository()
       .setURI(myRemoteURIString)
       .setDirectory(new File(myLocalPathString))
       .call(); 
```

但是，出于 Git 一致性的原因，您应该只克隆一个裸存储库，因此远程位置的非裸存储库虽然在技术上不是，但实际上是无法访问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:20:53.317

我不确定我是否理解这个问题，因为 Git 是为访问其他存储库而设计的，这就是“Git 是分布式的”的意思。

如果您想连接到一个远程存储库，那么是的，您应该克隆它。

我不知道这是否是您正在寻找的，但您也可以使用多个遥控器。再添加一个是使用 Git 使用`git remote add <remote_name> <remote_uri>`. 至于 Jgit，不幸的是我不记得简单的代码，但你可以弄清楚这一点。

至少可以通过修改配置，`getConfig()`从 Repository 对象调用然后调用`setString(...)`它 - 不要忘记最后保存配置。但在修改配置之前，我认为你应该先多了解一下 Git 和 JGit。

我建议您阅读有关它的更多信息，并在您的存储库中进行一些尝试。看看这篇文章：[http](http://caiustheory.com/adding-a-remote-to-existing-git-repo) ://caiustheory.com/adding-a-remote-to-existing-git-repo 。另一个可以帮助您的方法是[如何使用 jgit 执行相当于“git 远程更新”的操作？](https://stackoverflow.com/questions/9594827/how-do-i-do-the-equivalent-of-git-remote-update-with-jgit)

也许其他人确切地知道要运行哪些命令并且可以提供帮助。

# wordpress - wordpress 日历，每个月都有页面

> ID：10311861
> 
> 赞同：1
> 
> 时间：2012-04-25T08:16:23.073
> 
> 标签：wordpress

我正在制作一个 wordpress 网站。它将包括一个活动日历。这是我第一次使用 wordpress，所以我不知道该怎么做。这是它需要遵循的设计。 ![日历设计](../Images/36866cae0fdcd8c2de2c4b0673a94663.png)

如您所见，它每个月都需要一个页面。用户可以在月份之间进行更改。[我用事件管理器插件](http://wp-events-plugin.com)试过这个，但没有任何成功。我是否需要通过永久链接系统添加数据？或者有没有内置这个功能的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:15:18.377

如果您的基本主题是二十一或二十一，它有一个用于此“帖子档案”的默认小部件

它列出了月/年，显示该月的总帖子数（默认启用），

否则你可以使用这个插件

[http://wordpress.org/extend/plugins/wp-archives/](http://wordpress.org/extend/plugins/wp-archives/)

或者您可以自定义创建它

[http://codex.wordpress.org/Function_Reference/wp_get_archives](http://codex.wordpress.org/Function_Reference/wp_get_archives)

如果您使用此插件添加事件，它可以选择存档事件

[http://wordpress.org/extend/plugins/wp-events/](http://wordpress.org/extend/plugins/wp-events/)

# android - AChartEngine 当前位置

> ID：10311865
> 
> 赞同：0
> 
> 时间：2012-04-25T08:16:33.383
> 
> 标签：android, achartengine

我正在为一些 android 应用程序使用 AChartengine，当有人在运行时滚动图形时，我如何更新 X 和 Y 描述？

例如，我想将 X 轴描述为小于 10 的 X 值更新为低，但如果 X 值在 10 到 20 之间，则将描述值设置为中等。

我想知道图表上的当前观点是什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:30:08.787

您可以通过在 GraphicalView 引用上添加一个平移侦听器并在收到平移事件通知时更改自定义标签来做到这一点。

# android - 基于密度的多个 apk

> ID：10311868
> 
> 赞同：3
> 
> 时间：2012-04-25T08:16:53.133
> 
> 标签：android

我想根据 ldpi、mdpi 和 hdpi 的密度在 android 市场上上传 3 个 apk。

我提到了这个链接 [http://developer.android.com/guide/appendix/market-filters.html#MultiApks](http://developer.android.com/guide/appendix/market-filters.html#MultiApks) [http://developer.android.com/guide/market/publishing/multiple-apks.html#HowItWorks](http://developer.android.com/guide/market/publishing/multiple-apks.html#HowItWorks)

[http://developer.android.com/guide/practices/screens_support.html#testing](http://developer.android.com/guide/practices/screens_support.html#testing)

如何在清单中使用以下标签

```
<compatible-screens></compatible-screens> 
```

我的应用程序很大，所以我想根据密度删除资源并根据密度进行构建

这是正确的方法吗？？

请帮帮我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:36:57.160

是的，根据您需要构建的不同 sdk/screen/gl 功能，为同一个应用程序拥有多个 apk 文件很好。

# java - 读取/写入 Java 服务器套接字的最佳实践

> ID：10311872
> 
> 赞同：7
> 
> 时间：2012-04-25T08:17:11.157
> 
> 标签：java, sockets, networking

您如何设计一个在单个套接字上运行的读写循环（支持并行读写操作）？我必须使用多个线程吗？我的（java）解决方案有什么好处吗？那 sleep 命令呢？你如何在这样的循环中使用它？

我正在尝试使用 2 个线程：

读

```
public void run() {
    InputStream           clientInput;
    ByteArrayOutputStream byteBuffer;
    BufferedInputStream   bufferedInputStream;
    byte[]                data;
    String                dataString;
    int                   lastByte;

    try {
        clientInput         = clientSocket.getInputStream();
        byteBuffer          = new ByteArrayOutputStream();
        bufferedInputStream = new BufferedInputStream(clientInput);

        while(isRunning) {  

            while ((lastByte = bufferedInputStream.read()) > 0) {
                byteBuffer.write(lastByte);
            }
                data       = byteBuffer.toByteArray();  
                dataString = new String(data);
                byteBuffer.reset();     
        }   

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

写

```
public void run() {
    OutputStream clientOutput;
    byte[]       data;
    String       dataString;

    try {
        clientOutput = clientSocket.getOutputStream();

        while(isOpen) { 

            if(!commandQueue.isEmpty()) {
                dataString = commandQueue.poll();
                data       = dataString.getBytes();
                clientOutput.write(data);
            }                   
            Thread.sleep(1000);
        }       
        clientOutput.close();           
    } 
    catch (IOException e) {
        e.printStackTrace();
    } 
    catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

读取无法提供正确的结果，因为没有发送 -1。我该如何解决这个问题？

这个睡眠/写循环是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:54:26.957

网络 I/O 基本上有三种方式：

1.  阻塞。在这种模式下，读取和写入将阻塞，直到它们可以完成，所以如果你想同时做这两个，你需要为每个单独的线程。

2.  非阻塞。在这种模式下，读写将返回零（Java）或在某些语言（C）中，当它们无法完成时，会返回状态指示（返回 == -1，errno=EAGAIN/EWOULDBLOCK），因此您不需要单独的线程，但是您确实需要第三个 API 来告诉您何时*可以*完成操作。这就是`select()`API 的目的。

3.  异步 I/O，您可以在其中安排传输并返回某种句柄，您可以通过该句柄查询传输状态，或者在更高级的 API 中，回调。

你*当然*不应该使用你在这里使用的`while (in.available() > 0)`/样式。很少有正确的用途，这不是其中之一，睡眠实际上是在浪费时间。数据可以在睡眠时间内到达，正常人会立即醒来。`sleep()``InputStream.available()``read()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:21:32.737

您应该在需要时使用布尔变量而不是 while(true) 来正确关闭线程。同样是的，您应该创建多个线程，每个连接的客户端一个，因为线程将自己阻塞，直到收到新数据（例如 DataInputStream().read() ）。不，这不是一个真正的设计问题，每个库/框架或语言都有自己的方式从套接字监听，例如从 Qt 中的套接字监听你应该使用所谓的“信号和插槽”，而不是无限循环。

# c - 如何在 C 中将分叉进程与父进程分离

> ID：10311879
> 
> 赞同：4
> 
> 时间：2012-04-25T08:17:37.347
> 
> 标签：c, shell, unix, exec, fork

所以我正在用 C 设计一个基本的 UNIX shell。

```
 signal(SIGCHLD, handler);
        pid = fork();
        switch (pid) {
        case -1: printf("Fork failed; cpid == -1\n");
        break;

        case 0: child_pid = getpid();
                argv[0] = prog;
        argv[1] =NULL;
        //exit(0);
        sid = setsid();
        execv(absPath,argv);        
        //printf("%d: this is the child, pid = %d\n", i, child_pid);
        //sleep(1);
        //exit(0);
        break;

        default: printf("This is the parent: waiting for %d to finish\n", pid);
        waitpid(pid, NULL, WNOHANG);
        printf("Ttttthat's all, folks\n");
        //break;
        }
        //execv(absPath,argv);
        //printf("CHILD PROCESS");
    }

}
void handler(int sig)
{
  pid_t pid;

  pid = wait(NULL);

  printf("Pid %d exit.\n", pid);
  exit(0);
} 
```

但它仍然在同一个 shell 中执行分叉的进程，尽管在“默认”子句之后。

你能帮我让它作为后台进程运行吗？谢谢！

PS：这只是一个片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:38:13.860

评论一些明显的错误：

*   在子进程中，您执行`exit(0);`因此立即退出子进程。删除此行。
*   我认为为清楚起见，您应该`execv()`这样称呼`execv(argv[0], argv);`

**Edit:** [Read the following](http://netzmafia.de/skripten/unix/linux-daemon-howto.html) to solve the problem with forking from a child process.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:24:27.160

作为我的 Fat Controller 应用程序的一部分，我创建了一个库来守护进程。下载源代码并查看 daemonise.c - 它应该得到很好的评论，但如果您有任何其他问题，那么我很乐意提供帮助。

[http://sourceforge.net/projects/fat-controller/files/](http://sourceforge.net/projects/fat-controller/files/)

# c++ - const char [22]' 到 'LPCWSTR'

> ID：10311880
> 
> 赞同：1
> 
> 时间：2012-04-25T08:17:38.640
> 
> 标签：c++, visual-c++, type-conversion

```
error C2664: 'MessageBoxW' : cannot convert parameter 3 from 'const char [22]' to 'LPCWSTR'
     Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast 
```

我正在尝试在下面执行此代码并收到如上所述的错误。

```
bool RegistryHandler::readRegistryEntry(String^ referencePath, String^ keyName, String ^keyValue)
{
    HKEY keyHandle;
    LPCTSTR sk = TEXT("SOFTWARE\\Microsoft\\Office\\Outlook\\Addins\\GoToApp");
    wchar_t  rgValue [1024];
    wchar_t fnlRes [1024];
    DWORD size1;
    DWORD Type;
    if( RegOpenKeyEx(HKEY_CURRENT_USER, sk,0,KEY_QUERY_VALUE, &keyHandle) == ERROR_SUCCESS)
         {
            size1=1023;
            RegQueryValueEx( keyHandle,L"ApplicationUrl", NULL, &Type,(LPBYTE)rgValue,&size1);
            MessageBoxW(NULL,L"inside for readindg",L"Native Addin",MB_OK);
            MessageBoxW(NULL,rgValue, "Product ID of Windows", MB_OK);
         }     
    else {
            MessageBoxW(NULL,L"inside for else",L"Native Addin",MB_OK);     
         }
    RegCloseKey(keyHandle);
    return true ;
} 
```

如何正确获取 rgvalue ???

请帮助新的 Vc++

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T08:37:38.460

“Windows 的产品 ID”字符串前缺少“L”。它应该是：

```
MessageBoxW(NULL,rgValue, L"Product ID of Windows", MB_OK); 
```

# apache-flex - 以编程方式在 mx:TextArea 中添加新行

> ID：10311881
> 
> 赞同：1
> 
> 时间：2012-04-25T08:17:40.900
> 
> 标签：apache-flex, newline, flex4.5

我有一个 flex 4.5 应用程序。当某些事件发生时，我想在 mx:TextArea 中添加新行。我一直在寻找添加独立于操作系统的行尾的正确方法。我发现[File](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)类具有[lineEnding](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#lineEnding)属性。但是文档指出，在浏览器中运行时不会公开此类（这是我的情况）。

我已经搜索过，但找不到任何其他可以提供此信息的课程。实际上，我不确定 TextArea 行尾是否取决于操作系统。

所以实际上我有两个问题：TextArea 行尾是否依赖于操作系统？如果是这样，我怎样才能得到正确的以 flex 结尾的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:36:25.510

您可以使用`String.fromCharCode(13)`. 这将返回一个行尾。这相当于 PHP 的`chr()`方法。

例子：

```
var address_str:String = "dog" + String.fromCharCode(64) + "house.net";
trace(address_str); // output: dog@house.net 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:21:25.927

根据我的经验，“\r”适用于 Windows 和 Mac。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:12:35.563

很简单，您只需要将换行符添加到`text`textArea 中。

```
myTextArea.text+="\n"; //This should work, if not try the other two
myTextArea.text+="\r";
myTextArea.text+="\r\n"; 
```

# netty - Netty 3.4.1.Final 不适用于 Android

> ID：10311885
> 
> 赞同：3
> 
> 时间：2012-04-25T08:17:57.603
> 
> 标签：netty

昨天我尝试从 3.3.2.Final-SNAPSHOT 升级到最新版本。但是，由于以下错误，它在 Android 上失败：

*   /AndroidRuntime（720）：致命例外：主要 E/AndroidRuntime（720）：java.lang.NoClassDefFoundError：java.util.concurrent.LinkedTransferQueue E/AndroidRuntime（720）：在 org.jboss.netty.util.internal.QueueFactory。创建队列（QueueFactory.java:48）

事实证明，在 Android（这是 2.3）上，DetectionUtil.javaVersion() 返回 7，因为 Deflater 类包含字段 SYNC_FLUSH。以下是所有字段 Deflater.getDeclaredFields()。

04-25 08:08:51.305: I/System.out(25674): [public static final int java.util.zip.Deflater.BEST_COMPRESSION, public static final int java.util.zip.Deflater.BEST_SPEED, public static final int java.util.zip.Deflater.DEFAULT_COMPRESSION, public static final int java.util.zip.Deflater.DEFAULT_STRATEGY, public static final int java.util.zip.Deflater.DEFLATED, public static final int java.util.zip.Deflater .FILTERED，私有静态最终 int java.util.zip.Deflater.FINISH，公共静态最终 int java.util.zip.Deflater.FULL_FLUSH，公共静态最终 int java.util.zip.Deflater.HUFFMAN_ONLY，公共静态最终 int java .util.zip.Deflater.NO_COMPRESSION, public static final int java.util.zip.Deflater.NO_FLUSH, private static final [B java.util.zip.Deflater.STUB_INPUT_BUFFER, public static final int java.util.zip.Deflater. SYNC_FLUSH，私有 [B java.util.zip。Deflater.inputBuffer，私有布尔 java.util.zip.Deflater.finished，私有长 java.util.zip.Deflater.streamHandle，私有 int java.util.zip.Deflater.inLength，私有 int java.util.zip.Deflater。 inRead，私有 int java.util.zip.Deflater.compressLevel，私有 int java.util.zip.Deflater.strategy，私有 int java.util.zip.Deflater.flushParm]

有没有其他方法可以解决这个问题，以便它可以在 Android 平台上运行？我还没有调查过（还......）。如果 android 是一个应该支持的平台，也许我们还可以检查 android 特定的类？

可以将类似这样的内容添加到 DetectionUtil 中的 int javaVersion0() 中：

```
try {
        Class.forName("android.app.Application");
        return 5;
    } catch (ClassNotFoundException e) {
        //Ignore
    } 
```

亲切的问候/约翰拉斯克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:45:15.833

请在 netty 的问题跟踪器中打开一个问题。我将确保我们在下周发布的下一个版本中处理它。

请参阅此处的问题跟踪器 [1]。

[1] [https://github.com/netty/netty/issues](https://github.com/netty/netty/issues)

# android - 是否可以在 AndroidManifest.xml 标签中有自定义属性？

> ID：10311890
> 
> 赞同：32
> 
> 时间：2012-04-25T08:18:17.597
> 
> 标签：android, android-manifest

我想在我的 AndroidManifest.xml 文件的应用程序标签中添加一个自定义属性。这在Android环境中可能吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-25T08:27:17.687

是的。这是一个例子。自定义标签是`ContentVersion`.

```
<application android:name=".MyApplication"
             android:icon="@drawable/icon"
             android:label="@string/app_name">

    <meta-data android:name="ContentVersion" android:value="1.9" />

    <activity android:name="com.someone.something.MainActivity"
              android:theme="@android:style/Theme.Translucent.NoTitleBar"
              android:screenOrientation="sensor"
              android:label="@string/app_name"> 
```

要访问它：

```
 ApplicationInfo ai = _context.getPackageManager().getApplicationInfo(_context.getPackageName(),PackageManager.GET_META_DATA);
    ai.metaData.get("ContentVersion") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T08:24:13.003

[您不能为预定义的标签定义自定义属性，但可以添加名为meta-data](http://androiddevblog.blogspot.se/2010/07/using-android-application-meta-data.html)的键值对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:20:37.433

您可以选择[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)，而不是（又名设置）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:24:40.180

在标签（以及服务和接收者）中，您可以使用标签（http://developer.android.com/guide/topics/manifest/meta-data-element.html）

它包含名称和值或资源 ID。

您可以通过 PackageManager 检索它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-26T13:55:04.710

如果有人需要 Xamarin（Android 的 Mono）我找不到常量，但我找到了它的值，即 128。

我使用“for”条件遍历从 0 到 1000 的所有值，并检查 MetaData 属性是否为空。哈哈

# codeigniter - Web 应用程序架构方法 CodeIgniter

> ID：10311901
> 
> 赞同：0
> 
> 时间：2012-04-25T08:19:19.530
> 
> 标签：codeigniter, architecture, modular

一段时间以来，我一直在寻找一个好的架构模型。我认为在一个好的应用程序中应该有控制器和模块，它们应该是不同页面上的可重复部分。例如购物车 - 如果您在网上商店工作，几乎每个页面都需要它。

我的另一个要求是它应该支持轻松更改网站的样式（主题|皮肤） - 这可以通过决定两部分的样式来实现 - 视图和资产（css、图像、javascript）。这意味着所有视图都应该位于一个位置，而不是像模块化扩展中那样。

最后它的目录结构应该是这样的：

```
    应用程序/ 
    ├────控制器/ 
    | ├──── *home.php* 
    | └──── *products.php* 
    ├────模块/ 
    | └──── *shopping-cart.php* 
    └──── views/ 
            └──── style_blue/ 
                    ├──── *home.php* 
                    ├──── *products.php* 
                    └──── modules/ 
                            └── ── *shopping-cart.php* 
    assets/ 
    └──── style_blue/ 
            ├──── css/ 
            | └──── *style.css* 
            ├────js/ 
            | └──── *jquery.js* 
            └────图片/ 
                  └──── *header.png*

```

这是完美的架构不是吗？

*   它可以使用新的模块和控制器进行扩展。
*   它可以有不同的风格（皮肤|主题）
*   它非常简单，同时功能强大

我是 CodeIgniter 的忠实粉丝，我想用它实现类似的目标。有没有适合我的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:27:43.750

您可以查看[http://www.getsparks.org](http://www.getsparks.org)以获取一些附加组件。

我相信这是您自定义样式所需要的：http: [//getsparks.org/packages/template/versions/HEAD/show](http://getsparks.org/packages/template/versions/HEAD/show)

它可以根据描述处理多个主题。此外，这个库非常方便。（我正在使用它，只是还没有使用主题部分）。

此外，对于模块，这可能是您需要的吗？ [https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)

# ember.js - 如何在 Ember.js 模板中使用未绑定的属性作为 if 助手的参数？

> ID：10311904
> 
> 赞同：2
> 
> 时间：2012-04-25T08:19:30.703
> 
> 标签：ember.js

我有一个 Handlebars 助手，它接受一个数字并返回一个类名。我只想在`foobar`存在时运行帮助程序，因为它可能不存在。我最初的尝试是：

```
{{#each content}}
    <div class="other_class {{#if foobar}}{{my_helper foobar}}{{/if}}"></div>
{{/each}} 
```

这不起作用，因为 metamorph 会在`if`助手所在的位置插入脚本标记占位符。我的第二次尝试是：

```
{{#each content}}
    <div class="other_class {{my_helper foobar}}"></div>
{{/each}} 
```

这也不起作用，因为当 foobar 不存在时，字符串`"foobar"`被传递给`my_helper`.

我知道这样做`{{unbound foobar}}`将呈现值而不绑定它，因此没有脚本标记占位符。有没有办法以`if`不受约束的方式使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:01:33.487

您可以创建一个计算属性并将其添加到`classNameBindings`视图中，请参阅[http://jsfiddle.net/pangratz666/MvpUZ/](http://jsfiddle.net/pangratz666/MvpUZ/)：

```
App.MyView = Ember.View.extend({
    classNameBindings: 'omg'.w(),

    omg: function(){
        var foobar = Ember.getPath(this, 'content.foobar');
        return (foobar && foobar === 42) ? 'my-class-name' : null;
    }.property('content.foobar')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T10:34:22.833

有一个帮手。它被称为`unboundIf`：查看[文档](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_unboundIf)

你可以像这样使用它：

```
{{#unboundIf "content.shouldDisplayTitle"}}
  {{content.title}}
{{/unboundIf}} 
```

表达式只计算一次。

# php - PHP 脚本抛出内部服务器错误 500，在打开 display_errors 时已修复

> ID：10311907
> 
> 赞同：0
> 
> 时间：2012-04-25T08:19:44.863
> 
> 标签：php

我今天遇到了一个问题，我的 PHP 脚本在完成后会发送服务器错误 500（在 apache 上）。代码类似于：

```
//many stuff here that work
echo "It reached here";
exit; 
```

我总是在出口前到达目的地；命令。进行谷歌搜索，我遇到了[这篇文章](http://www.infotales.com/php-script-throwing-internal-server-error-500/)，它建议打开 display_errors。我做到了，500 错误消失了。

所以我想问一下，有没有人解释为什么会发生这种情况？这个[SO post](https://stackoverflow.com/questions/1184001/weird-500-internal-server-error-firebug-php-display-errors-ajax)描述了一个类似的案例，但没有解释。

一如既往，提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:26:08.743

很可能您也获得了 500 状态代码，但是因为 PHP 向浏览器回显某些内容，所以 apache 不会跳入并显示它的标准状态 500 错误页面。

您需要验证实际状态代码以确认您仍然不会收到 500 错误。

如果发生致命错误，PHP 通常会发送 500 状态码。由于该过程在那个时候经常失败（因此导致致命）并且有时从那时起没有生成任何输出，因此网络服务器会跳入并为用户提供标准的 500-internal-server-error-page。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:55:47.703

似乎代码在循环中的 eval() 函数内生成了解析错误。这种错误不会中断代码执行，但会产生 500 错误

# python - Python/Windows/ctypes：调用 WaitForMultipleObjects 后如何获取进程返回状态？

> ID：10311909
> 
> 赞同：0
> 
> 时间：2012-04-25T08:19:46.830
> 
> 标签：python, windows, process-management

[我和这个人](https://stackoverflow.com/q/100624/77070)有相同的用例，我真的很喜欢[这个答案](https://stackoverflow.com/a/573196/77070)，除了我有一个额外的要求：我需要从子进程中获取返回状态。

这是我修改他的程序的尝试。我是 Windows 领域和 Python ctypes 的游客，所以希望我没有做任何愚蠢的事情......

```
import ctypes, subprocess
from random import randint
import os
SYNCHRONIZE=0x00100000
PROCESS_QUERY_INFORMATION=0x0400
INFINITE = -1
numprocs = 5
handles = {}

class Err(BaseException): pass

for i in xrange(numprocs):
    sleeptime = randint(5,10)
    p = subprocess.Popen([r"c:\MinGW\msys\1.0\bin\sleep.exe", str(sleeptime)], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=False)
    h = ctypes.windll.kernel32.OpenProcess(SYNCHRONIZE | PROCESS_QUERY_INFORMATION, False, p.pid)
    handles[h] = p.pid
    print "Spawned Process %d" % p.pid

while len(handles) > 0:
    print "Waiting for %d children..." % len(handles)
    arrtype = ctypes.c_long * len(handles)
    handle_array = arrtype(*handles.keys())
    ret = ctypes.windll.kernel32.WaitForMultipleObjects(len(handle_array), handle_array, False, INFINITE)
    h = handle_array[ret]
    print "Process %d done" % handles[h]
    i = ctypes.c_int(0)
    pi = ctypes.pointer(i)
    if ctypes.windll.kernel32.GetExitCodeProcess(h, pi) == 0:
    err = ctypes.windll.kernel32.GetLastError()
        raise Err("GetExitCodeProcess: %d" % (err))
    print "Status code is: %d" % (i)
    if ctypes.windll.kernel32.CloseHandle(h) == 0:
    err = ctypes.windll.kernel32.GetLastError()
    raise Err("CloseHandle: %d" % (err))
    del handles[h]
print "All done! 
```

但是当我运行它时，我遇到了失败：

```
Traceback (most recent call last):
  File "test.py", line 30, in <module>
    raise Err("GetExitCodeProcess: %d" % (err))
__main__.Err: GetExitCodeProcess: 6 
```

看来[错误 6 是 ERROR_INVALID_HANDLE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)。但我不确定为什么句柄无效；我请求了`PROCESS_QUERY_INFORMATION`许可，`CloseHandle()`如果我注释掉通话，通话效果很好`GetExitCodeProcess()`。

有任何想法吗？等待一堆进程后如何获取状态码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:12:46.847

使用这个精确的 Python 代码（与你的相同，只是修复了一些缩进并删除了 sleep.exe 的路径）：

```
import ctypes, subprocess
from random import randint
import os
SYNCHRONIZE=0x00100000
PROCESS_QUERY_INFORMATION=0x0400
INFINITE = -1
numprocs = 5
handles = {}

class Err(BaseException): pass

for i in xrange(numprocs):
    sleeptime = randint(5,10)
    p = subprocess.Popen([r"sleep.exe", str(sleeptime)], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=False)
    h = ctypes.windll.kernel32.OpenProcess(SYNCHRONIZE | PROCESS_QUERY_INFORMATION, False, p.pid)
    handles[h] = p.pid
    print "Spawned Process %d" % p.pid

while len(handles) > 0:
    print "Waiting for %d children..." % len(handles)
    arrtype = ctypes.c_long * len(handles)
    handle_array = arrtype(*handles.keys())
    ret = ctypes.windll.kernel32.WaitForMultipleObjects(len(handle_array), handle_array, False, INFINITE)
    h = handle_array[ret]
    print "Process %d done" % handles[h]
    i = ctypes.c_int(0)
    pi = ctypes.pointer(i)
    if ctypes.windll.kernel32.GetExitCodeProcess(h, pi) == 0:
        err = ctypes.windll.kernel32.GetLastError()
        raise Err("GetExitCodeProcess: %d" % (err))
    print "Status code is: %d" % i.value
    if ctypes.windll.kernel32.CloseHandle(h) == 0:
        err = ctypes.windll.kernel32.GetLastError()
        raise Err("CloseHandle: %d" % (err))
    del handles[h]

print "All done!" 
```

给我这个输出：

```
C:\tmp\pyt>python -V
Python 2.7.3

C:\tmp\pyt>python a.py
Spawned Process 4368
Spawned Process 268
Spawned Process 5792
Spawned Process 4744
Spawned Process 4484
Waiting for 5 children...
Process 5792 done
Status code is: 0
Waiting for 4 children...
Process 4484 done
Status code is: 0
Waiting for 3 children...
Process 268 done
Status code is: 0
Waiting for 2 children...
Process 4368 done
Status code is: 0
Waiting for 1 children...
Process 4744 done
Status code is: 0
All done! 
```

所以它似乎正在工作。你的问题不是完全在其他地方吗？您使用的是什么操作系统（我的是 Vista）？你有最新版本的 Python (2.7.3) 吗？您的“sleep.exe”不是以某种方式损坏了吗？您是否尝试过其他命令？

# asp.net-mvc - 在 asp.net mvc 的视图中不能循环 JSON 结果

> ID：10311918
> 
> 赞同：0
> 
> 时间：2012-04-25T08:20:43.117
> 
> 标签：asp.net-mvc, json

我将数据添加到列表中，并在我的控制器中将其作为 JSON 返回：

```
List<ProductListingModels> prom = new List<ProductListingModels>();
ProductListingModels product = new ProductListingModels();

foreach (var item in ien_item)
{
   if ((item.Brand.IsAuthorized == true) && ((HelperClass.ICEContact.PathBrandImages + 
   item.Brand.Image) != null))
   {
     product.BrandImage = HelperClass.CheckImageUrlExist(item.Brand.Image);
   }
   else
   {
     product.BrandImage = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
   }
}

prom.Add(product);
return Json(new
{
   ja = prom.ToList()

}, JsonRequestBehavior.AllowGet); 
```

我认为这是：

```
$.getJSON("ProductListing/Index", data, function (product) {
  $.each(data, function (index, proValByDep) {
     alert(proValByDep.BrandImage);
  }); 
```

});

我在准备好的萤火虫中对其进行了跟踪，JSON运行良好。问题 ：

```
proValByDep.BrandImage is undefined. 
```

请提供任何解决方案。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:49:57.013

您可能需要循环，`data.ja`因为它是数组，而不是`data`直接循环。

```
$.getJSON("ProductListing/Index", data, function (product) {
  $.each(data.ja, function (index, proValByDep) {
     alert(proValByDep.BrandImage);
  });
}); 
```

或者您可以将服务器端更改为直接返回数组，而不是将其包装在名为的属性中`ja`

```
return Json(prom, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:48:16.400

我认为问题在于您在方法中使用了传递给请求的`data`变量，而不是保存返回数据的参数。`each()``product`

```
$.getJSON("ProductListing/Index", data, function (product) {

  //   changed data to product below and also added .ja as you want to access its value
  $.each(product.ja, function (index, proValByDep) {
     alert(proValByDep.BrandImage);
  });
}); 
```

# javascript - Twitter 分享按钮：分享 URL 的哈希部分？

> ID：10311929
> 
> 赞同：4
> 
> 时间：2012-04-25T08:22:00.810
> 
> 标签：javascript, url, twitter, pushstate

我有一个网站，当用户浏览它时会动态更新 URL 哈希（它是一个 Backbone.js 应用程序，我正在使用 pushState）。

我希望用户能够发布完整的 URL，包括哈希。

我正在使用 Twitter 共享按钮，但它似乎只共享基本 URL 路径，而不是哈希，这非常重要：

```
<a href="https://twitter.com/share" class="twitter-share-button">Tweet</a> 
```

关于如何让用户也共享哈希的任何想法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-09T14:09:14.343

诀窍是用它的 html 编码字符替换井号，即：%23

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:23:44.717

该按钮是否使用引荐来源网址？如果是，那么您很不走运 - 哈希[永远不会发送到服务器](https://stackoverflow.com/questions/2039306/send-a-location-hash-through-a-referrer)。

但是，当使用 pushState 时，除非用户的浏览器太旧，否则您不需要哈希 - 但对于使用最近浏览器的每个人来说，它应该可以正常工作，因为引用者将是地址栏中当前使用的任何内容。

# html - 使 DIV 占用所有较低的空间

> ID：10311932
> 
> 赞同：1
> 
> 时间：2012-04-25T08:22:10.650
> 
> 标签：html, css

比如说：

```
<header>Hello</header>
<div role="main">Body</div>
<footer>&copy;</footer>

header {
    height:20px;
    background: #edf1f5;
}
div {
    background:#ddd;
    padding:20px;
}
footer {
    background: #e4e8ec;
}​ 
```

你如何弥补`footer`所有剩余的空间？我的目标不是在这里有一个粘性页脚，我只是想让页脚填满空间。

* * *

这是一个 Jsfiddle：http: [//jsfiddle.net/XF3E7/](http://jsfiddle.net/XF3E7/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:26:10.540

我一直为此使用解决方法。如果您使正文背景颜色与页脚相同，则会产生向下延伸到页面的错觉。[http://jsfiddle.net/ollie/q3xzh/1/](http://jsfiddle.net/ollie/q3xzh/1/)

```
header {
height:20px;
background: #edf1f5;
}
div {
background:#ddd;
padding:20px;
}
footer {
background: #e4e8ec;
}
body {background:#e4e8ec;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:27:07.383

我猜你想要这样的东西？[http://jsfiddle.net/Ralt/XF3E7/5/](http://jsfiddle.net/Ralt/XF3E7/5/)

但是没有滚动嘿？没有 javascript 或使用表格是不可能的。

我确实建议使用@Ollie 所说的背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:27:57.967

你只需要玩css

[http://jsfiddle.net/XF3E7/10/](http://jsfiddle.net/XF3E7/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:53:32.913

可悲的是，我能够回答我自己的问题：

[http://jsfiddle.net/XF3E7/14/](http://jsfiddle.net/XF3E7/14/)

# java - iReport 错误地在详细信息带和列脚注之间显示摘要

> ID：10311939
> 
> 赞同：6
> 
> 时间：2012-04-25T08:22:27.893
> 
> 标签：java, netbeans, jasper-reports, ireport

**问题是显示摘要带不**正确。为了更清楚，我将提供一些屏幕截图：

这张图不错。

![OK_Image](../Images/3dd14aa4707594770d65db21491f8c91.png)

我的报告有 19 页。在第 1 页到第 18 页上，band 正确显示了它们的位置，但是当它到达最后一页时，我发现`Summary Band`位于和**之间** 。现在，我该如何正确地做到这一点？`Details Band``Column Footer Band`

这是报告最后一页的图像。

![无效波段位置](../Images/809d961825c0da04ae87821d1d08b091.png)

如果这里有人知道如何正确地做到这一点，我非常需要你的帮助。这是我第一次在`iReport`.

我的客户要求我打印 a`Page Total`和 a`Grand Total`的报告。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T03:38:14.817

我不确定你是否遇到了错误。但也许将总计信息放入最后一页页脚带而不是摘要可以解决您的问题。不？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:28:41.877

您可以尝试报告选项：`Float column Footer`

![浮动列页脚](../Images/f3b7f26a9b351a6f9a4938f6f51328c2.png)

# .net - 'object[]' 的托管到非托管封送处理为 IUnknown

> ID：10311941
> 
> 赞同：0
> 
> 时间：2012-04-25T08:22:34.317
> 
> 标签：.net, arrays, pinvoke, marshalling, iunknown

我正在使用 P/Invoke 从 C# 调用非托管 C 函数，并传递对象数组。在非托管代码中，我为 IDispatch 查询 IUnknown。这适用于简单的情况，但如果其中一个对象是数组本身，则获取 IDispatch 失败。

托管代码：

```
 [DllImport("NativeDll.dll")]
    static extern void TakesAnObjectArray(int len, 
        [MarshalAs(UnmanagedType.LPArray, 
         ArraySubType = UnmanagedType.IUnknown)]object[] a);

    public static void exec1(int a, object b, string c)
    {
        Object[] info_array;
        Object[] parameters_array;

        parameters_array = new object[4];
        parameters_array[0] = a;
        parameters_array[1] = b;
        parameters_array[2] = c;
        parameters_array[3] = 55;
        // THIS WORKS GREAT
        TakesAnObjectArray(4, parameters_array);

        info_array = new object[6];
        info_array[0] = parameters_array;
        // THIS DOESN'T
        // I CAN'T GET IDISPATCH FOR THE 1ST 'OBJECT'
        TakesAnObjectArray(6, info_array);
    } 
```

非托管代码：

```
 void TakesAnObjectArray(int len, LPUNKNOWN p[])
    {
        HRESULT hr;
        for (int i=0; i<len; i++)
        {
            IDispatch *disp = NULL;
            hr = p[i]->QueryInterface(IID_IDispatch, (void**)&disp);
        }
    } 
```

QueryInterface 大部分时间都是成功的。但是，如果托管对象实际上是“System.Object[]”，则无法获得 IDispatch 接口（hr = 0x80004002 = E_NOINTERFACE = '不支持此类接口'）。

我可以以某种方式使用 MarshalAs(...) 来解决这个问题吗？还是有另一种方法可以让它发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:55:29.060

有趣的是，CLR 设法使代码段的第一部分完全正常工作。它可能设法生成了一个 IDispatch 指针，因为 System.Array 类型是 [ComVisible(true)]。因此，您可以让 QI 工作，但如果不熟悉 Array 类成员，您实际上无法使用 IDispatch 指针执行任何操作。您在第二个片段中运气不佳，因为声明中没有任何内容强制 CLR 编组数组元素。

您需要以正确的方式解决此问题，数组不是 COM 自动化中的 IDispatch 对象。Object[] 的默认 COM 封送处理是 SAFEARRAY*，它是一个元素为 VARIANT 的安全数组。将 TakesAnObjectArray 参数类型从 LPUNKNOWN[] 更改为 SAFEARRAY*。并将 pinvoke 声明更改为没有 [MarshalAs] 属性的纯对象 []。

您需要在 C++ 代码中使用 SafeArrayLock() 和 SafeArrayGetElement() 来访问数组元素。第二个片段需要额外的间接寻址，因为第一个元素是一个包含 SAFEARRAY 本身的 VARIANT。

# json - 请求在 Play Framework 2 中是如何工作的？

> ID：10311944
> 
> 赞同：9
> 
> 时间：2012-04-25T08:22:50.343
> 
> 标签：json, request, playframework-2.0

我不得不说我对如何使用新的 Play Framework 2 处理请求参数有点困惑。关于如何发出请求的数据来自不同的来源。到目前为止，以下是可能性：

1 - 如果你做一个简单的 GET ：

```
ctx().request().queryString() 
```

2 - 如果您使用 HTML 表单进行 POST ：

表格 ：

```
<form method="post" action="/">
    <input type="hidden" name="foo" value="bar" />
    <input type="hidden" name="t" value="1" />
    <input type="hidden" name="bool" value="true" />
    <input type="submit" name="submit" value="Submit" />
</form> 
```

方法 ：

```
public static Result test() {
    ctx().request().queryString();             // {} ; As expected
    ctx().request().body();                    // contains data
    ctx().request().body().asFormUrlEncoded(); // contains data
    ctx().request().body().asJson();           // empty
    return ok();
} 
```

这似乎很正常。

现在，如果我添加`@BodyParser.Of(BodyParser.Json.class)`（假设我同时接受 Ajax POST 和普通 POST 以在非 JS 情况下回退）：

```
@BodyParser.Of(BodyParser.Json.class)
public static Result test() {
    ctx().request().queryString();             // {} ; as Expected
    ctx().request().body();                    // contains data
    ctx().request().body().asFormUrlEncoded(); // empty : Shouldn't this contains data since I posted them via a simple form ?!
    ctx().request().body().asJson();           // empty
    return ok();
} 
```

然后，地狱发生了：如果没有填写一个简单表单的值（asJson、asFormUrlEncoded 等），我怎么能得到它们？！

3 - 如果您通过 AJAX 进行 POST ：

```
// Code in JS used :
$.ajax({
    'url': '/',
    'dataType': 'json',
    'type': 'POST',
    'data': {'foo': 'bar', 't': 1, 'bool': true}
}); 
```

结果 ：

```
public static Result test() {
    ctx().request().queryString();             // {}
    ctx().request().body();                    // contains data
    ctx().request().body().asFormUrlEncoded(); // contains data
    ctx().request().body().asJson();           // empty
    return ok();
} 
```

与`@BodyParser.Of(BodyParser.Json.class)`：

```
@BodyParser.Of(BodyParser.Json.class)
public static Result test() {
    ctx().request().queryString();             // {}
    ctx().request().body();                    // contains data
    ctx().request().body().asFormUrlEncoded(); // empty
    ctx().request().body().asJson();           // empty : Shouldn't this contains data since I espect JSON ?!
    return ok();
} 
```

`asJson()`根据文档，这里的不一致是应该返回数据的方法

> 注意：这样，对于非 JSON 请求，将自动返回 400 HTTP 响应。(http://www.playframework.org/documentation/2.0/JavaJsonRequests)

我想知道的是，对于可以接受来自 HTML 的简单帖子或带有 POST 的 Ajax 请求的 POST 来说，最好的装饰器+方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T12:44:37.650

我建议使用 PlayFramework 提供的 Form 类。表单将其值绑定到提供的请求数据。

有两种不同的 Form 实现：

1.  DynamicForm：POST 数据可通过 Map 访问器方法获得
2.  Form：Form 的通用形式将 POST 数据映射到实体类的实例[[更多信息]](http://www.playframework.org/documentation/2.0.1/JavaForms)

    该表单还提供了一些有用的功能，如自动类型转换、验证、错误报告等。

一个带有动态表单的简单示例：

阿贾克斯请求：

```
$.post("@routes.Application.movetodo()", 
    { "id": 123, "destination": destination }, function(data)
        {
           // do something when request was successfull
        }); 
```

路由文件：

```
GET     /                           controllers.Application.index()
POST    /movetodo                   controllers.Application.movetodo() 
```

控制器实现：

```
public static Result movetodo()
{
    DynamicForm data = form().bindFromRequest(); // will read each parameter from post and provide their values through map accessor methods
    // accessing a not defined parameter will result in null
    String id = data.get("id");
    String destination = data.get("destination");

    return ok();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T07:05:11.760

asJson() 为空的原因是，默认情况下，**$.ajax**将发送内容类型设置为**'application/x-www-form-urlencoded; 的请求；字符集=UTF-8'**。您需要将其设置为**'application/json; 字符集=utf-8'**：

```
$.ajax({
    contentType: "application/json; charset=utf-8",
    ...
}) 
```

# c++ - 在 if-else 语句内部和外部保留修改后的值？

> ID：10311949
> 
> 赞同：2
> 
> 时间：2012-04-25T08:23:21.150
> 
> 标签：c++, if-statement

我目前在 C++ 方面的背景是我已经参加了一个学期的大学课程。

我很难弄清楚如何使我在 if-else 语句中分配的值保留在它之外。我想如果我事先在外面声明它并使用指针自己处理内存地址，这将是公平的游戏，但显然不是。

我现在的“迷宫”文件：

```
. # # # # # # 
. . . . . # # 
# . # # . # # 
# . # # . . # 
# . . # # . # 
# . # # . . # 
# . # # . # # 
. . . # . . . 
# # . . . # # 
```

这就是我在 maze.h 文件中定义的构造函数。我还没有完成大部分程序，但是我的 main.cpp 已经处理了计算文本文件的迷宫尺寸，然后它只是调用

`Maze *testMaze = new Maze(rows,columns);`

我的 maze.h 文件将 bool maze[0][0] 列为私有成员。它设置为 0 是因为在代码第一次执行时，还没有办法知道迷宫的大小。我运行代码来计算大小，然后将行和列作为参数传递给 Maze 构造函数。

我的 maze.cpp 文件的带有参数的构造函数：

```
Maze::Maze(int rows, int columns)
{
    string mazeRow="";
    int roIndex=0; //Row Index
    int coIndex=0; //Column Index
    bool maze[rows][columns];
    bool* target = NULL;

    ifstream input;
    input.open("MAZE",ios::in);
    if(input)
    {

        while (getline(input, mazeRow))
        {
            //Testprint this row of the maze.
            cout << mazeRow << endl; //mazeRow is the data in that row of the text file.
            //Store each non-space value.

            for (coIndex=0; coIndex<mazeRow.length(); coIndex++) //For each character in that row...
            {
                char check=mazeRow[coIndex];
                target = &maze[roIndex][coIndex];   
                if (check=='.') //Path
                {
                    *target=true;
                cout << *target << " "; //These print statements print correctly.
                }
                else if (check=='#') //Wall
                {
                    *target=false;
                cout << *target << " "; //These print statements print correctly.
                }
                else if (check==' ') //Space
                {
                //ignore spaces
                }
                else //For all other cases, an invalid character is present.
                {
                    cout << "Invalid character detected." << endl;
                }
                cout << *target << " "; //For some odd reason, this line BY ITSELF doubles up print. Ex. instead of printing 1 1 0 1 0, it would print 1 1 1 1 0 0 1 1 0 0.
            }
        cout << "End of row." << endl;
        roIndex++;
        }
    }
    input.close();

    cout << "Storage completed." << endl;

    for (int i=0; i<rows; i++)
    {
    cout << "Row " << i << endl;
        for (int j=0; j<columns; j++)
        {
        /* This is the print test to see if the values 
           are retained outside of the first block. 
           None of them print the maze file properly.
        */
        if (maze[i][j] == true)
            cout << maze[i][j] << "\t" << "." << "\t";
        if (maze[i][j] == false)
            cout << maze[i][j] << "\t" << "#" << "\t";
        cout << "Column " << j << endl;
        }
        cout << "End of row." << endl;
    }
    cout << "Verification completed." << endl;
} 
```

第一次在这里问问题，所以如果我遗漏了什么，请告诉我。

* * *

只是想在这里更新一下。事实证明，我要么压力过大，要么睡眠不足，要么两者兼而有之。把这段代码放了几个小时重新看了一遍，发现代码中逻辑错误太多了，包括但不限于忘记了某些变量为什么存在以及它们是干什么用的，都没有想清楚在循环中递增 (++) 的后果，以及其他类似的草率错误。我已经接受了下面的几个答案/评论，并刷新了我对自己代码的理解，帮助我纠正了这些错误。当我解决它时，如果可以的话，我会提供一个完成的代码。

* * *

解决了这个问题。我将能够在几个小时内自行回答并解释当时实际发生的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:00:19.840

您已经保留了 if(input) 中的值。它们被保留在 bool maze[rows][columns] 中；并且在 if-else 之后完全可以访问。您在 if-else 之后访问它们，在您重新打印迷宫的部分。

我认为您的问题应该是“如何为其他成员方法保留一个成员方法（ctor）的值？”。这个问题的答案是将数组存储在成员变量而不是本地变量中。

将phresnel的建议铭记于心。C++ 中没有二维数组。您可以拥有数组数组，仅此而已。

```
class CMaze
{
   int m_Rows;
   int m_Columns;
   bool** m_arrarrMazeData;

public:
   CMaze(int rows, int columns)
   {
       m_Rows = rows;
       m_Columns = colums;
       //create array of pointers, each one will store another array
       m_arrarrMazeData = new bool*[rows];

      for (int i = 0; i<rows; i++)
      {
           //create new column for every row
           m_arrarrMazeData[i] = new bool[columns];
      }
    //rest of your code here, read into m_arrarrMazeData and forget about local variables, especially bool maze[rows][columns];

   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:25:04.427

您正在设置数据`target = &maze[roIndex][coIndex];`，`coIndex`但在您的示例数据中有空格。这些是“忽略”（未打印），但您仍会增加索引，因此您每次都在跳过数组中的一个值：

第一次迭代集`maze[0][0];`

第二次迭代没有设置任何内容，因为您有空间

第三次迭代集`maze[0][2];`

ETC...

`maze[0][1];`...等永远不会设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T20:31:32.943

首先，感谢大家的帮助。我最初认为错误来自与仅修改变量的本地副本的语句有关的问题。“存储完成”下方的最后一段代码。应该打印出某种形式的验证来测试并打印出数组的值，以便我可以确认其中的值与我尝试分配的值相同。

事实证明，感谢**Component 10**的帖子，我在搁置一段时间后重新分析了我的代码，并发现错误与运行外部 cout 语句的空格有关。这让我重新分析了我在哪里以及如何使用 roIndex 和 coIndex，并质疑为什么在 for 循环中使用 coIndex。就在那时我发现并注意到我在 for 循环中使用的任何变量都将指示 mazeRow 字符串中的位置，而 coIndex 表示数组中的列。这些不应相互混淆。**msam 也**发现了这一点。

例如，使用 mazeRow[ **i** ] 和 maze[roIndex][ **coIndex** ]

1.  mazeRow[ **0** ] 是 '.' 并且 true 将分配给 maze[roIndex][ **0** ]。增加 i++ 和 coIndex++。
2.  mazeRow[ **1** ] 是 ' ' 并且不会对 maze[][] 做任何事情。仅增加 i++。
3.  mazeRow[ **2** ] 是 '#' 并且 false 将被分配给 maze[roIndex][ **1** ]。增加 i++ 和 coIndex++。

一旦我理解了组件 10 所解释的“额外”数字的来源，并澄清了我对自己变量用法的理解，其余的很快就解决了。该问题与变量的本地副本无关。

我当前的代码如下：（抱歉这里有点混乱 - MAZE 文件当前确实有一个 S 和 G 来标记迷宫的开始和目标。）

```
Maze::Maze(int rows, int columns)
{
    string mazeRow="";
    bool maze[rows][columns];
    for (int i=0; i<rows; i++)
    {
        for (int j=0; j<columns; j++)
        {
        maze[i][j] = false;
        }
    }
    bool* target = NULL;
    ifstream input;
    input.open("MAZE",ios::in);
    if(input)
    {
        int roIndex=0; //Row Index
        while (getline(input, mazeRow))
        {
            //Testprint this row of the maze.
            cout << mazeRow << endl; //mazeRow is the data in that row of the text file.
            //Store each non-space value.

            int coIndex=0; //Column Index
            for (int i=0; i<mazeRow.length(); i++) //For each character in that row...
            {
                char check=mazeRow[i];
                target = &maze[roIndex][coIndex];   
                if (check=='.') //Path
                {
                    *target=true;
                    coIndex++;
                }
                else if (check=='#') //Wall
                {
                    *target=false;
                    coIndex++;
                }
                else if (check=='S') //Start
                {
                    *target=true;
                    coIndex++;
                }
                else if (check=='G') //Goal
                {
                    *target=true;
                    coIndex++;
                }
                else if (check==' ') //Space
                {
                    //ignore spaces
                }
                else //For all other cases, an invalid character is present.
                {
                    cout << "Invalid character detected." << endl;
                }
            }
        roIndex++;
        }
    }
    input.close();

    cout << "Storage completed." << endl;

    for (int i=0; i<rows; i++)
    {
        for (int j=0; j<columns; j++)
        {
        cout << maze[i][j] << " ";
        }
        cout << endl;
    }
    cout << "Verification completed." << endl;
} 
```

我希望这对将来的某人有所帮助，并以此作为一个教训：有时最好的解决方案是将您的问题搁置一段时间，并分析您所做的一切应该做的事情与实际做的事情. 知道为什么你有东西，以及它们需要用来做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:59:24.450

我不确定您在这里要达到什么目的，或者实际上您要寻求帮助的问题是什么。

您突出显示了一条未按预期执行的行：

```
 cout << *target << " "; //For some odd reason, this line BY ITSELF doubles up print. Ex. instead of printing 1 1 0 1 0, it would print 1 1 1 1 0 0 1 1 0 0. 
```

但是，此行仅输出布尔值，因此如果更改为：

```
cout << "[" << *target << "] "; 
```

它给：

```
. # # # # # #  
1 [1] [254] 0 [0] [72] 0 [0] [0] 0 [0] [0] 0 [0] [77] 0 [0] [90] 0 [0] [0] [32] End of row. 
```

现在您可以看到，由于您的代码输出读入的行，然后迭代该行，如果字符是“。”，则首先输出 1。如果字符是“#”，则为 0，否则您不分配值，因此该`1 [1] [254]`行的开头正在读取第一个“。” 字符 ( `1 [1]`) 然后忽略空格 ( `[254]`)

（请注意，您没有发布代码来为您的布尔矩阵分配初始值 - 不确定您是否正在这样做，但您肯定会使用矩阵中的值进行输出，而不必在此代码中设置它们。这解释奇整数值。）

因此，它不会加倍，而只是按照您的要求做。也许您需要查看代码可以通过条件的所有路径？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T08:39:52.050

成员变量。

* * *

^(严肃的建议：在学习指针、内存地址、类等之前先学习基本的 C++。)

# html - html表单提交按钮

> ID：10311950
> 
> 赞同：0
> 
> 时间：2012-04-25T08:23:23.520
> 
> 标签：html, forms

我有一个表单，当表单通过浏览器加载时，我希望它自动提交数据。

问题是我编写了一个 PHP 脚本，它可以在测试表单上很好地提交它。我的问题是我试图提交数据以命名按钮“提交”的服务器。

这是示例表格：

```
<html>

<head>
</head>

<form  action="http://www.example.com/post.php"  method="post">
    <input type="text" name="input1" value="test1"  />
    <input type="text" name="input2" value="test2"  />
</form>

<script type="text/javascript">
    document.forms[0].action="submit"
</script>

</body>

</html> 
```

在另一台服务器上创建表单的人将其命名为“提交”。在他们修复之前是否有解决方法？

这是人的形式的一个例子

```
<html>

<head>
</head>

<form  action="http://www.example.com/post.php"  method="post">
    <input type="text" name="input1" value="test1"  />
    <input type="text" name="input2" value="test2"  />
    <input type="submit" name="submit" class="submit" value="Send Data" />
</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:25:26.417

您要提交表格吗？然后简单地使用它的`submit()`方法：

```
document.forms[0].submit(); 
```

如果服务器期望`submit`被 POST，即按钮被点击，你可以简单地触发`click()`按钮的事件。由于您无法使用其名称访问它，因此我将使用 jQuery：

```
$('input[name="submit"]').click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:27:05.190

代替：

```
<html>
<head>
</head>
<form  action="http://www.example.com/post.php"  method="post">
<input type="text" name="input1" value="test1"  />
<input type="text" name="input2" value="test2"  />
</form>
<script type="text/javascript">
document.forms[0].action="submit"
</script>
</body>
</html> 
```

试试这个：

```
<html>
<head>
</head>
<form name="MyForm" action="http://www.example.com/post.php"  method="post">
<input type="text" name="input1" value="test1"  />
<input type="text" name="input2" value="test2"  />
</form>
<script type="text/javascript">
document.MyForm.submit();
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:29:56.943

如果我正确理解您的问题，则输入元素具有 name="submit" 和 type="submit"。它们是不同的东西。

因此，您也可以轻松创建相同的行为。

# android - 从没有 webview 的 Url 播放视频

> ID：10311955
> 
> 赞同：1
> 
> 时间：2012-04-25T08:23:57.727
> 
> 标签：android

我必须在 Android APP 中播放 Dailymotion 视频，但我不能在 WebView 中播放。VideoView 类只接受流式传输的文件，而 Dailymotion API 没有任何 Android 资源。

有谁知道如何实现它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:31:03.907

```
String LINK = "Your_Link_Goes_Here";
setContentView(R.layout.mediaplayer);
VideoView videoView = (VideoView) findViewById(R.id.video);
MediaController mc = new MediaController(this);
mc.setAnchorView(videoView);
mc.setMediaPlayer(videoView);
Uri video = Uri.parse(LINK);
videoView.setMediaController(mc);
videoView.setVideoURI(video);
videoView.start(); 
```

试试这个代码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:31:50.397

VideoView 是最好的，在视频视图中，您可以播放流 url，也可以播放设备 sdcard 上的本地文件或嵌入在应用程序中的本地文件。

请参阅此[链接](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/media/VideoViewDemo.html)此示例

[关联](http://developer.android.com/reference/android/widget/VideoView.html)

# variables - 这个浮点计算可能有什么错误？

> ID：10311958
> 
> 赞同：1
> 
> 时间：2012-04-25T08:24:13.270
> 
> 标签：variables, vim, floating-point, numbers

我总是对变量有很多麻烦：浮点数、字符串和数字。

谁能告诉我为什么这不起作用？
我做错了什么？

```
 let beforeE = '2.18' 
 let nrzeros = '000' 
 let newnr = beforeE * 1.nrzeros 
 echo newnr 
```

这给出了输出 2000 而不是 2180。
为什么？
我尝试使用 str2float 更改变量并尝试了其他一些操作，但只收到错误：
Using float as a string 或 Variable type mismatch

提前Tnx。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:02:58.580

```
let beforeE = 2.18 " or str2float('2.18')
let nrzeros = '000'
let newnr = beforeE * str2float(1.nrzeros)
echo newnr 
```

# java - 静态上下文中的java非静态变量

> ID：10311959
> 
> 赞同：-1
> 
> 时间：2012-04-25T08:24:16.660
> 
> 标签：java

我有以下代码：

```
public class My_program {

    class dbConnect {
       public dbConnect();
       public void connect_to_db(String connect_string) {
          Class.forName(...);
          ...
       }
    }

    public static void main(String[] args) {
       String connect_string = "jdbc...";
       dbConnect db = new dbConnect();
       db.connect_to_db(connect_string)
    }
} 
```

当我尝试编译它时，会出现以下错误：

```
error: non-static variable this cannot be referenced from a static context 
```

所以我试着`dbConnect`像这样制作静态：`static class dbConnect`它工作正常，但java正在生成一个额外的`.class`文件：`My_program$dbConnect.class`我**不想要**。

那么我怎样才能拥有一个`.class`文件并让代码工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:29:22.383

根据您的要求的一种方法：

```
public class My_program {

My_program() { }

public void connect_to_db(String connect_string) {
      Class.forName(...);
      ......
   }

public static void main(String[] args) {
   String connect_string = "jdbc......";
   My_program db = new My_program();
   db.connect_to_db(connect_string)
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:27:09.727

```
My_program$dbConnect.class 
```

这是内部类的类文件。如果您在编译后创建一个内部类，您将获得一个类文件

```
outerclass$innerclass.class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:29:15.310

你不能，会生成额外的 .class 文件。在 java 中，每个类在编译成字节码时都会生成一个 .class 文件。因此您的 dbConnect 类将生成一个 .class 文件。

注意：第一次编译失败，这就是它没有生成 Parent$dbconnect.class 文件的原因

如果您只需要 1 个 .class 文件，则删除内部类并将逻辑放在您的 Parent 类中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:30:23.993

你不可能从两个类中得到一个类文件。这就是 Java 的工作原理。

您需要将这两个类的内容合并为一个。

# iphone - 如何使用 iOS 钥匙串在 iPhone 上存储 OAuth 令牌？

> ID：10311965
> 
> 赞同：1
> 
> 时间：2012-04-25T08:24:55.580
> 
> 标签：iphone, ruby-on-rails, ios, oauth, restkit

我将使用 RestKit 通过 OAuth 访问 web api。在[RestKit 文档 raecommendations 中](https://github.com/RestKit/RestKit/wiki/OAuth-Support-on-RestKit)：

> 我们强烈建议您使用 iOS Keychain 或其他安全存储方式保留 access_token、refresh_token、clientId 和 clientSecret。

如何使用`iOS Keychain`存储秘密令牌？

更新：这个问题被否决了。可能我的问题不够清楚。我*知道*有 iOS 钥匙串和 API。我的问题是如何`token`在应用程序发布之前将 a 存储在一个秘密的地方（使用 iOS 钥匙串或其他加密库），而没有将纯文本版本存储在其他地方（在代码或 plist 中）。由于它是一个 api 令牌，不应该由用户输入，我如何首先初始化令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T23:42:33.813

我们将各种组件（accessToken、refreshToken 等）存储在符合 NSCoding 协议的令牌类中。然后我们归档对象并将其作为字符串存储在钥匙串中。

我们的 TokenModel 协议如下所示：

```
@protocol TokenModel <NSCoding, NSObject>

@property(nonatomic, strong, readonly) NSString *accessToken;
@property(nonatomic, strong, readonly) NSDate *expirationDate;
@property(nonatomic, assign, readonly) NSTimeInterval expiresIn;
@property(nonatomic, strong, readonly) NSString *refreshToken;
@property(nonatomic, strong, readonly) NSString *tokenType;

- (BOOL)isAccessTokenExpired;

@end 
```

我们使用钥匙串服务助手，它让我们可以像访问 NSUserDefaults 一样简单地访问钥匙串，同样要求存储的对象必须符合 NSCoding 协议。

```
@protocol KeychainService <NSObject>

- (id)objectForKey:(id)key error:(NSError * __autoreleasing *)error;
- (BOOL)setObject:(id)object forKey:(id)key error:(NSError * __autoreleasing *)error;

- (BOOL)removeObjectForKey:(id)key error:(NSError * __autoreleasing *)error;

@end 
```

# javascript - 如何删除/销毁 flowplayer 实例？

> ID：10311966
> 
> 赞同：6
> 
> 时间：2012-04-25T08:24:55.790
> 
> 标签：javascript, flowplayer

像这样创建一个 flowplayer 实例后：

```
$f("player", "flowplayer.swf", "my-video.flv"); 
```

当直接移除容器元素时，`$("#player").remove()`（使用jQuery），

我找到了`$f("player")`仍然存在。如何真正删除实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:03:51.563

在 BestKicker 上，我们使用`$f().unload()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T10:04:06.020

我基本上将保存播放器元素的 DOM 元素的内容存储在 DOM 上的 jQuery 数据中：

```
$('.video-holder').each(function(i,el){
    $(el).data('init-state', $(el).html());
}); 
```

...然后通过将存储的数据调用回 holder 元素的 HTML 以有效地“重置”它来重置内容（从而分离 Flowplayer 实例）：

```
$('.video-holder').each(function(i,el){
    $(el).html($(el).data('init-state'));
}); 
```

我只尝试过使用 Flowplayer 手动设置，不认为它会在自动上工作。此外，如果你一遍又一遍地这样做，它可能不会有很好的性能，因为原始的 Flowplayer 实例仍然加载在内存中，只是分离，但这是我能想到的最佳解决方案。

# iphone - 参数列表语法

> ID：10311967
> 
> 赞同：2
> 
> 时间：2012-04-25T08:25:00.290
> 
> 标签：iphone, objective-c, cocoa

我试图理解这样的构造：

```
 - (void)someMethodWithArgs:(type?) param, ...
{
        ???
}

[self someMethodWithArgs:arg1, arg2, arg3]; 
```

*   如何访问参数列表？
*   例如，“type”应该是指针，还是可以是“int”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T08:29:36.803

Objective-C 函数的工作方式。

**宣言**

```
- (void) someMethodWithArgA:(type)paramName argB:(typeB)paramNameB
{
     // do something with paramName and paramNameB 

} 
```

**打电话**

```
[self someMethodWithArgA:val argB:valB]; 
```

* * *

C-等价物是：

```
void someMethodWithArgs(type paramName, typeB paramNameB)
{
     // do something with paramName and paramNameB    
}

someMethodWithArgs(val,valB); 
```

* * *

当然，与 C 一样，变量类型可以是**任何东西**（为什么它们应该只是指针？）。

* * *

**一个简单的例子：**

```
- (int)addNum:(int)a withNum:(int)b
{
      int c = a+b;
      return c;
}

int k = [self addNum:2 withNum:3];
// k = 5 
```

* * *

## 参考

> 面向对象编程的 Objective-C 模型基于向对象实例传递消息。在 Objective-C 中，不是简单地调用一个方法；而是调用一个方法。一**发消息**。

[http://en.wikipedia.org/wiki/Objective-C#Messages](http://en.wikipedia.org/wiki/Objective-C#Messages)

* * *

## **更新**

**实现具有可变数量参数的方法**

```
#import <Cocoa/Cocoa.h>

@interface NSMutableArray (variadicMethodExample)

- (void) appendObjects:(id) firstObject, ...; // This method takes a nil-terminated list of objects.

@end

@implementation NSMutableArray (variadicMethodExample)

- (void) appendObjects:(id) firstObject, ...
{
     id eachObject;
     va_list argumentList;
     if (firstObject) // The first argument isn't part of the varargs list,
     {                                   // so we'll handle it separately.
          [self addObject: firstObject];
          va_start(argumentList, firstObject); 
          // Start scanning for arguments after firstObject.

          // As many times as we can get an argument of type "id"
          while (eachObject = va_arg(argumentList, id)) 
                 [self addObject: eachObject]; 

          va_end(argumentList);
     }
}

@end 
```

来自：http: [//developer.apple.com/library/mac/#qa/qa1405/_index.html](http://developer.apple.com/library/mac/#qa/qa1405/_index.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T08:44:27.637

在 ObjC 参数列表语法中源自 C 参数列表语法。

```
- (void) appendObjects:(id) firstObject, ...
{
id eachObject;
va_list argumentList;
va_start(argumentList, firstObject); // Start scanning for arguments after firstObject.
while (eachObject = va_arg(argumentList, id)) // As many times as we can get an argument of type "id"
  [self addObject: eachObject]; // that isn't nil, add it to self's contents.
va_end(argumentList);
} 
```

您可以从此处找到更多信息：[developer.apple.com](http://developer.apple.com/library/mac/#qa/qa1405/_index.html)

更新：哎呀，我有点晚了:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T08:42:41.080

Matt Gallagher 提供了一个关于变量参数列表的很好的教程：

[Cocoa 中的变量参数列表](http://cocoawithlove.com/2009/05/variable-argument-lists-in-cocoa.html)

在 Apple 的文档中，还有一个关于此主题的简短技术问答 QA1405：

[Objective-C 方法中的变量参数](http://developer.apple.com/library/mac/#qa/qa1405/_index.html)

# javascript - 如何扩展使用 AMD 定义的 Javascript 模块？

> ID：10311968
> 
> 赞同：8
> 
> 时间：2012-04-25T08:25:01.403
> 
> 标签：javascript, module-pattern, js-amd

首先是历史，我们有一个引擎，它由许多本质上是模块的 javascript 文件组成。这些模块返回一个分配给全局范围的单个类，尽管在指定的命名空间下。

引擎本身用于显示 eLearning 内容，每个不同的 eLearning 课程需要略有不同的需求，这是我们根据必要的功能将 javascript 文件包含到页面中的地方。（只有一个入口页面）。

我一直在权衡是否值得更改为 AMD、require.js 和 r.js，或者是否最好继续使用我们当前的系统，该系统包含页面上所需的所有内容并将其最小化到一个脚本中。

我去 AMD 的最大问题之一是，似乎很难轻松地扩展一个类。例如，有时我们必须稍微调整原始类的行为。因此，我们在页面上添加另一个脚本包含，通过复制原始原型来扩展原始类，执行被 apply 覆盖的原始函数，然后执行所需的任何附加代码。

您可以在不修改原始文件的情况下扩展 AMD 模块吗？还是我错过了重点，我们最好坚持目前正在做的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T03:34:26.893

我最近开始了一个使用 RequireJS 的项目，我用来扩展下划线的方法归结为这样的：

相关目录结构：

*   /脚本
*   /scripts/underscore.js
*   /scripts/base/underscore.js

真正的下划线库位于**/scripts/base/underscore.js。**

我的扩展进入**/scripts/underscore.js**。

**/scripts/underscore.js**中的代码如下所示：

```
define(['./base/underscore'], function (_) {
    'use strict';

    var exports = {};

    // add new underscore methods to exports

    _.mixin(exports); // underscore's method for adding methods to itself

    return _; // return the same object as returned from the underscore module
}); 
```

对于普通的扩展，它可能看起来更像这样：

```
define(['underscore', './base/SomeClass'], function (_, SomeClass) {
    'use strict';

    _.extend(SomeClass.prototype, {
        someMethod: function (someValue) {
            return this.somethingOrOther(someValue * 5);
        }
    });

    return SomeClass;
}); 
```

关于下划线的注意事项：在其他地方，我使用 RequireJS shim-config 来获取下划线以作为 AMD 模块加载，但这对非填充 AMD 模块的此过程没有影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:35:17.470

您可以拥有包含构造函数的模块。当这些模块被包含在内时，它们就可以使用了。然后你可以在之后用它们创建对象。

要求中的示例：

```
//construction.js
define(function(){

    //expose a constructor function
    return function(){
        this....
    }
});

//then in foo.js
define([construction],function(Construction){
    var newObj = new Construction;  //one object using constructor
});

//then in bar.js
define([construction],function(Construction){

    //play with Construction's prototype here then use it

    var newObj = new Construction;
}); 
```

# google-drive-api - Google Drive API 的使用限制是多少？

> ID：10311969
> 
> 赞同：58
> 
> 时间：2012-04-25T08:25:02.403
> 
> 标签：google-drive-api

因为这个产品是新产品，我期待在上面开发一个应用程序，所以对 API 的使用是否有任何限制，例如：

*   上传和下载配额
*   每个应用的请求
*   ETC

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-25T10:02:43.997

要查看您允许的配额，请在[Google API 控制台](https://code.google.com/apis/console)中创建一个项目。在“服务”选项卡中，指示了每个服务允许的默认配额。

目前对于 Drive API，它读取“礼貌限制：1,000,000,000 次查询/天”。这是每个应用程序的配额。

启用 Drive API 后，您还可以设置每个用户的速率限制（默认为每 100 秒 1000 个请求），以防止一个用户耗尽您应用的配额。这在“配额”选项卡中可用。

[![云控制台视图，显示每个应用每天 1B 个请求，每个用户每 100 秒 1000 个请求。](../Images/b9bba63e9f70bc488a7c067ee263b039.png)](https://i.stack.imgur.com/yoZku.png)

在“配额”选项卡中还有一个请求更多配额的链接，以防您需要超过默认的 1000 万请求/天，此类请求将通过（轻度）手动审核过程。

此外，文件具有每个文件的播放限制，这取决于许多因素（文件是公开共享还是仅与您的域/用户共享？是视频吗？音频文件？等等）。不幸的是，这些规则目前尚未披露，但例如，每天数百万个匿名会话无法观看公开共享的视频（为此使用 Youtube）。也不能在高流量网站上使用图像。Google Drive 不能用作 Web 规模的 CDN，它是为个人内容共享而扩展的（您与朋友/工作组/公司共享文件）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T15:03:36.380

我收到一条消息说“抱歉，您目前无法查看或下载此文件。最近有太多用户查看或下载了此文件。请稍后再尝试访问该文件。如果您尝试访问的文件特别大或与多人共享的文件，最多可能需要 24 小时才能查看或下载文件。如果 24 小时后仍无法访问文件，请联系您的域管理员。

所以有一个限制，只是没有记录：e 这是一个文件，我在过去一小时内只下载了大约 50 次（测试一些东西）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-25T22:04:59.017

[最佳实践](https://developers.google.com/drive/practices)页面或[性能提示](https://developers.google.com/drive/performance)中没有提到速率限制，但最明显的是，有关[处理错误](https://developers.google.com/drive/handle-errors)的文档不包含任何超过速率限制的错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-14T09:23:46.027

我看到了 Google Drive Api 的免费请求配额。1,000,000,000 个请求/天。

默认每用户限制为：（您可以增加它）10 个请求/秒/用户

您可以访问此页面并使用有效帐户登录以获取更多信息 [https://console.developers.google.com/project/bionic-path-686/apiui/apiview/drive/quotas](https://console.developers.google.com/project/bionic-path-686/apiui/apiview/drive/quotas)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-15T14:25:51.647

除了“配额”之外，还有一些类型的限制。错误例如：

> code=403
> reason=subscriptionRateLimitExceeded
> message=超过创建文件订阅的速率限制。

类似的速率限制没有很好的记录，可能会给应用程序开发人员带来一些痛苦。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-21T13:17:20.317

这不仅仅是关于 API 查询 .. 还有一个下载限制，我总是遇到 .. 但谷歌没有公布允许的数量

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T08:28:21.470

阅读文档，您应该会找到所需的内容。

“任何类型的文件都可以存储在云端硬盘中，最高可达用户的存储限制或最大文件大小为 10GB”

[https://developers.google.com/drive/](https://developers.google.com/drive/)

# .net - 无法从 C# 应用程序中的 VB 库中转换集合属性

> ID：10311975
> 
> 赞同：0
> 
> 时间：2012-04-25T08:25:29.083
> 
> 标签：.net, casting, class-library, c#-to-vb.net

我正在尝试在 C# 应用程序中使用旧的 VB 库。

这个库有几个类，一个特别是有一个方法返回自己的实例示例：`Posts post = new Posts().GetLast();`

Posts 类有一个属性 Comments，它实际上是 object 类型的。在 VB 中，我可以像通过 a 一样遍历 Comments 属性`Microsoft.VisualBasic.Collection`，但在 C# 中，我不能将属性强制转换为任何东西，以便使用它。我尝试导入 Microsoft.VisualBasic 命名空间，并将类型转换为 Collection，但它没有返回一个错误，指出 System.__ComObject 必须从库中转换为特定的接口。

集合内部有实现接口 IComments 的对象，我无法转换为接口，因为它是接口的集合。

我还尝试转换为 ICollection （由 实现的接口 `Microsoft.VisualBasic.Collection`），但没有积极的结果。

关于如何解决这个问题的任何想法，我解决这个问题的唯一方法是将 C# 应用程序更改为 VB 应用程序（不是那么困难，但仍然是我希望避免的事情）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:39:54.830

通过尝试我能想到的所有接口，使用`as`运算符并比较结果 null 我发现该属性可以转换为 IEnumerable （逻辑上`Microsoft.VisualBasic.Collection`实现`ICollection`和`ICollection`实现`IEnumerable`）。

# html - 服务器中的文件存储在哪里？

> ID：10311976
> 
> 赞同：0
> 
> 时间：2012-04-25T08:25:34.650
> 
> 标签：html, file, servlets

`<input type="file">`当我使用HTML 表单上传文件时，我将操作设置为`<form action=auth>`where 'auth' ia a servlet。现在我想知道当用户按下提交按钮时文件在哪里？如果在 Servlet 中我想检索文件，我应该怎么做？
**编辑**
现在我使用java库阅读这个文件（pdf），比如

```
 public void doGet(HttpServletRequest req, HttpServletResponse resp) 
 {
try {
      String INPUTFILE=req.getParameter("filename");
      System.out.println(INPUTFILE);
      PdfReader reader = new PdfReader(INPUTFILE);
      int n = reader.getNumberOfPages();
      System.out.println(n);

      String str=PdfTextExtractor.getTextFromPage(reader, 2); //Extracting the content from a particular page.
      System.out.println(str);

} <br> 
```

但它显示以下错误 `java.io.IOException: java_learn.PDF not found as file or resource`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:09:37.550

如[HTML 规范](http://www.w3.org/TR/html4/interact/forms.html#h-17.4.1)中所述，您必须使用 POST 方法，并且表单的 enctype 属性必须设置为“multipart/form-data”。

[这](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)是 BalusC 上传文件的详细答案。

[这](https://stackoverflow.com/questions/2832715/downloading-excel-file-from-server-using-servlets)是下载文件的启动示例

# c++ - 为什么涉及模板类时派生类不能访问基函数

> ID：10311979
> 
> 赞同：8
> 
> 时间：2012-04-25T08:25:40.450
> 
> 标签：c++, templates

以下代码给出编译错误：

```
template <typename T>
class Base
{
    public:
    void bar(){};
};

template <typename T>
class Derived : public Base<T>
{
    public:
    void foo() { bar(); }   //Error
};

int main()
{
    Derived *b = new Derived;
    b->foo();
} 
```

**错误**

`Line 12: error: there are no arguments to 'bar' that depend on a template parameter, so a declaration of 'bar' must be available`

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T08:28:20.110

该名称`foo()`不依赖于任何`Derived`模板参数 - 它是一个*非依赖*名称。`foo()`另一方面，找到的基类`Base<T>`确实*依赖*于一个`Derived`模板参数（即`T`），因此它是一个*依赖基类*。在查找非依赖名称时，C++ 不查找依赖基类。

要解决此问题，您需要将对`bar()`in的调用限定`Derived::foo()`为`this->bar()`或`Base<T>::bar()`。

这个 C++ FAQ 项目很好地解释了它：见[http://www.parashift.com/c++-faq-lite/templates.html#faq-35.19](http://www.parashift.com/c++-faq-lite/templates.html#faq-35.19)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:31:26.093

您提供的代码在您指示的行上没有构建错误。它在这里有一个：

```
Derived *b = new Derived; 
```

应该是：

```
Derived<int> *b = new Derived<int>(); 
```

（或使用您想要的任何类型而不是 int。）

# iphone - UISlider 自定义图像和拇指高度？

> ID：10311996
> 
> 赞同：2
> 
> 时间：2012-04-25T08:26:45.053
> 
> 标签：iphone, ios, uislider

我正在创建（或尝试）自定义 UISlider 外观，仍然是水平的，但要高得多。我有两个问题。

1.这是我用来将图像放到滑块上的代码。

```
UIImage *minImage = [UIImage imageNamed:@"sliderMin.png"];
UIImage *maxImage = [UIImage imageNamed:@"sliderMax.png"];
UIImage *thumbImage = [UIImage imageNamed:@"sliderThumb.png"];

minImage = [minImage stretchableImageWithLeftCapWidth:33.0 topCapHeight:0.0];
maxImage = [maxImage stretchableImageWithLeftCapWidth:33.0 topCapHeight:0.0];
// thumbImage = [minImage stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0];

[_contrastSlider setMinimumTrackImage:minImage forState:UIControlStateNormal];
[_contrastSlider setMaximumTrackImage:maxImage forState:UIControlStateNormal];
[_contrastSlider setThumbImage:thumbImage forState:UIControlStateNormal];

minImage = nil;
maxImage = nil;
thumbImage = nil;

[_contrastSlider setMinimumValue:0.0];
[_contrastSlider setMaximumValue:100.00];
[_contrastSlider setValue:25.0]; 
```

我有三个图像，最小，最大和拇指。这些是图像以及它们在设备上的外观，这是不正确的。

我还不能发布图片，所以这里有一个显示组件的[链接。`MYSlider.jpeg`](https://skydrive.live.com/redir.aspx?cid=d96ee0343f940893&resid=D96EE0343F940893!539&parid=D96EE0343F940893!116&authkey=!APJHr8MTWDVYHdU)

滑块应在拇指右侧为奶油色，左侧为粉红色。但这并没有发生。

那是问题1。问题2是拇指大小默认值太小。我正在使用这个：[UISlider Height Hack](http://mpatric.blogspot.co.uk/2009/04/more-responsive-sliders-on-iphone.html)试图增加拇指的高度，但遗憾的是它使它更宽而不是更高。所以我正在寻求帮助以使该区域更高，而不是更宽，并且想知道为什么我的粉红色图像被忽略了？

感谢您的任何帮助。

如果有帮助，这是我的 UISlider 子类 .m：

```
-(BOOL) pointInside:(CGPoint)point withEvent:(UIEvent*)event {
CGRect bounds = self.bounds;
bounds = CGRectInset(bounds, -10, -8);
return CGRectContainsPoint(bounds, point); 
```

}

```
-(BOOL) beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event {
  CGRect bounds = self.bounds;
  float thumbPercent = (self.value - self.minimumValue) / (self.maximumValue - self.minimumValue);
  float thumbPos = THUMB_SIZE + (thumbPercent * (bounds.size.width - (2 * THUMB_SIZE)));
  CGPoint touchPoint = [touch locationInView:self];
  return (touchPoint.x >= (thumbPos - EFFECTIVE_THUMB_SIZE) && touchPoint.x <= (thumbPos + EFFECTIVE_THUMB_SIZE));
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:47:49.583

事实证明，在视图中设置我的滑块值确实加载方法导致了问题。我将它们设置在 Interface Builder 中，并且已修复。一旦在 IB 中设置，如果需要没有问题，我可以在代码中调整它们。

至于我的另一个问题，我想知道这是否是因为我没有在实际设备上进行测试，所以我将暂停这个问题，直到几周后我在设备上得到它。