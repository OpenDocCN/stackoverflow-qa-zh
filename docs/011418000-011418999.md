# StackOverflow 问答 11418000-11418999

# ios - 捏缩放OpenGL正交投影矩阵

> ID：11418000
> 
> 赞同：2
> 
> 时间：2012-07-10T16:44:51.960
> 
> 标签：ios, opengl-es, opengl-es-2.0, glkit

我在尝试实现缩放以缩放在 iOS 下使用 OpenGLES 正交投影显示的图像时遇到了一些麻烦。我正在尝试缩放和平移投影矩阵，以使缩放保持在捏合位置的中心。

根据我的更新：方法我配置矩阵：

```
float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
projectionMatrix = GLKMatrix4MakeOrtho(-0.5f, 0.5f, -0.5f / aspect, 0.5f / aspect, -1.0f, 1.0f);
projectionMatrix = GLKMatrix4Multiply(projectionMatrix, GLKMatrix4MakeScale(newScale, newScale, 1.0f)); // scale
projectionMatrix = GLKMatrix4Multiply(projectionMatrix, GLKMatrix4MakeTranslation((endPan1.x + endPan2.x), 0.0 - (endPan1.y + endPan2.y), 0.0f)); //pan 
```

我使用捏合手势识别器获取 newScale 和 endPan1 的值。（endPan2 来自一个双指平移识别器。）：

```
- (void)pinchDetected:(UIGestureRecognizer *)sender;
{
if (sender.state == UIGestureRecognizerStateBegan) {

    lastScale = newScale;        
    startPan1.x = endPan1.x;
    startPan1.y = endPan1.y;    

    GLKMatrix4 pinchMatrix = projectionMatrix;
    CGFloat aspectInv = self.view.bounds.size.height / self.view.bounds.size.width;
    // Get the center offset of the projection matrix:
    GLKVector2 middleVect = GLKVector2Make(pinchMatrix.m30, pinchMatrix.m31);
    CGPoint pointPinch = [sender locationInView:self.view];
    GLKVector2 touchVectPinch = GLKVector2Make((2 * pointPinch.x / self.view.bounds.size.width - 1),
                                               (2 * (self.view.bounds.size.height-pointPinch.y) / self.view.bounds.size.height - 1));
    touchToMiddle = GLKVector2Make((middleVect.x - touchVectPinch.x) * (1.0 / pinchMatrix.m00), (middleVect.y - touchVectPinch.y) * ((1.0 / pinchMatrix.m00) * aspectInv)  );    
}

newScale = [(UIPinchGestureRecognizer*)sender scale] - (1.0 - lastScale);

if (newScale < 0.25) {
    newScale = 0.25;
}
if (newScale > 4.0) {
    newScale = 4.0;
}

// Pan the image to center the scale under the touch point:???
endPan1.x = (((newScale - 1.0) * 0.5) * (touchToMiddle.x )) - startPan1.x ;
endPan1.y = 0.0 - ((((newScale - 1.0) * 0.5) * (touchToMiddle.y )) + startPan1.y); 
} 
```

结果是图像在缩放时不会完全保持在捏合位置的中心。它有点工作......这让我觉得我必须接近？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:21:30.107

我不太确定您的图像是如何放置在屏幕上的，但您可能应该将您的图像相对于屏幕的中间点进行平移。因此，如果您的平均夹点位于屏幕的右上角，那么您应该按照夹点在 x 和 y 方向上远离中间的量进行平移。此平移可能需要根据您的图像与相机的距离（即使其正交）进行缩放。您很可能需要使用这些数字来找到适合您的方法。

一种可能的替代方法是不使用正交视图，使用透视图，然后您可以调整缩放效果的视野，然后将相机移动到应该放大到的点上。

# algorithm - TDD 朴素文本搜索算法

> ID：11418003
> 
> 赞同：1
> 
> 时间：2012-07-10T16:44:58.523
> 
> 标签：algorithm, unit-testing, tdd

我需要测试 Naïve 字符串搜索算法。 [http://en.wikipedia.org/wiki/String_searching_algorithm](http://en.wikipedia.org/wiki/String_searching_algorithm)

有人可以阐明我如何解决这个问题。

我的测试应该只测试外部行为吗？（即模式出现索引与使用的算法无关？）

或者我应该是算法特定的并测试驱动算法特定的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:33:59.433

> 或者我应该是算法特定的并测试驱动算法特定的实现？

这在很大程度上取决于您的课程将如何使用。测试公共合约通常是要走的路（并且为此编写体面的测试相当容易），所以除非您的客户可以以某种方式*使用*实现细节知识，否则我会坚持下去。

请注意，在纸上拥有特定算法可以帮助查明一些基本测试，而无需编写严格的实现相关测试，例如：

*   无效输入（空字符串、空值）
*   输入太大/太小（例如，模式超过搜索的字符串长度 - 那你怎么办？）
*   有效输入，但不匹配

这应该为您提供更多实现特定测试的基本入口点。请记住，利用 [数据驱动测试](http://en.wikipedia.org/wiki/Data-driven_testing)可以帮助您完全避免需要具有实现级别的知识，并且拥有足够大的数据集可能也足以验证算法的正确性。

# shell - awk中的行遍历

> ID：11418004
> 
> 赞同：0
> 
> 时间：2012-07-10T16:44:59.443
> 
> 标签：shell, awk

我正在 awk 中进行文件遍历。这方面的一个例子是

```
Dat time range column session - 1
time name place session animal - 2 
hi bye name things - 3 
```

在这两者中。我需要逐行遍历，并且我需要在包含`session`.

因此，在这种情况下，我需要到达第 1 行和第 2 行，因为它包含单词 session 而不是第 3 行，因为它不包含该字段（从某种意义上说，我可以跳过这个）。从那里我需要逐字遍历以到达会话字段。

我知道`$0`可以代表整条线。但我的问题是到达线后如何逐字遍历。

你能帮我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:49:07.187

`$0`您可以使用此构造循环遍历当前行：

```
for(i = 1; i <= NF; i++) print $i 
```

这利用了预定义的 awk 变量`NF`，该变量代表当前行 ( `$0`) 上的字段数。

您可以在`$i`遍历该行时检查 的值，并根据该值确定如何处理该值。例如，打印、跳过等。`if ($i == "session") ...`

更新：

您还可以使用该`match()`函数来确定您正在处理的当前行是否包含“会话”字符串，而无需遍历该行。例如，

```
where = match($0, "session")
if (where > 0)
   print "Found session in this line";
else
   print "session not found in this line"; 
```

请注意，`match()`它将正则表达式作为第二个参数，因此您的匹配可能非常复杂。[有关此函数和其他awk 字符串函数](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_92.html)的更多信息，请参阅此页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:52:11.820

您可以使用`for`循环，仅过滤包含“会话”的行：

```
awk '/session/{ for (i = 1; i <= NF; i++) { \
                  if ($i == "session") \
                    do_whatever_here \
                } \
              }' 
```

您可以在此处阅读有关这些说明的更多信息：[`for`](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_74.html)、[字符串比较](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_61.html)和[`if`](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_71.html).

# c# - 剪贴板能复制几个字？

> ID：11418006
> 
> 赞同：0
> 
> 时间：2012-07-10T16:45:08.387
> 
> 标签：c#

我的英语很弱，所以我希望你能理解这一点。

我昨天得知剪贴板是副本。

```
//textBox1.Text = "My name is not exciting";
Clipboard.SetText(textBox1.Text);
textBox2.Text = Clipboard.GetText(); 
```

此代码从 textbox1 复制您的所有内容并将其粘贴到 textbox2 中，对吗？

所以可以只从textbox1复制几个单词并将其粘贴到textbox2中吗？

如果你不明白，我只想复制几个单词而不是全部行。

即使这个高级代码仍然带给我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:47:20.867

`Clipboard.GetText();`将返回原始复制的元素。

您可以做的是将它们保存到某个变量中：

```
string text = Clipboard().GetText(); 
```

然后用`text`, 做一些事情来获得你需要的元素：

```
textBox2.Text = text.Substring(0, 10); // An example. 
```

* * *

摆脱这一点的主要想法是，`GetText()`会给你一个字符串。您可以以任何您认为合适的方式对字符串进行切片和切块，然后使用结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:50:02.560

您不需要剪贴板。你的用户不会喜欢这样的;)

只需创建一个像这样的变量：

```
string box1Content = textBox1.Text;
textBox2.Text = boxContent; 
```

您甚至可以跳过该变量。

如果您真的想使用剪贴板，您的方式就是这样做。

为了从文本框中获取一些文本，您可以使用子字符串或正则表达式。 [http://msdn.microsoft.com/en-us/library/aka44szs.aspx](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:20:52.473

我喜欢linq。:-)

这是一个拆分字符串、可枚举字符串并将其合并为一个的示例：

```
textBox1.Text = "My name is not exciting";

int firstWord = 2;
int lastWord = 4;

string[] wordList = textBox1.Text.Split(new[] { ' ', '.', ',' }, StringSplitOptions.RemoveEmptyEntries);

string newText = string.Concat(wordList.Where((word, count) => count >= firstWord - 1 && count < lastWord).Select(w => w + " ")).TrimEnd();

Clipboard.SetText(newText);
textBox2.Text = Clipboard.GetText();

// Result: "name is not" 
```

编辑：没有剪贴板，你可以简单地使用这条线

```
textBox2.Text = newText; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T16:57:58.197

大牛，substring 方法很好用。你只需告诉它你想在哪里获取一段文本，它就会创建一个新的字符串。

```
textBox1.Text = "MY name is not exciting";
        //pretend you only want "not exciting" to show
        int index = textBox1.Text.IndexOf("not");//get the index of where "not" shows up so you can cut away starting on that word.

        string partofText = textBox1.Text.Substring(index);//substring uses the index (in   this case, index of "not") to take a piece of the text. 

        Clipboard.SetText(partofText);
        textBox2.Text = Clipboard.GetText(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T16:50:45.750

在我看来，从文本框中获取选定的文本是更好的主意。

我不确定您正在使用哪种类型的文本框，但是在 WPF 上显示示例，您应该使用[TextBox.SelectedText](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.selectedtext.aspx)属性。

# python - 如何在python中找到当前日期和查询日期时间的时间差？

> ID：11418013
> 
> 赞同：1
> 
> 时间：2012-07-10T16:45:20.817
> 
> 标签：python, datetime, date, range, timedelta

```
+---------+---------------------+---------------------+
| area_id | date_1              | date_2              |
+---------+---------------------+---------------------+
|    NULL | 2012-06-28 10:09:18 | 2012-06-28 10:15:48 |
|      18 | 2012-06-28 10:15:48 | 2012-06-28 10:20:26 |
|      21 | 2012-06-28 10:20:26 | 2012-06-28 10:32:51 |
|       3 | 2012-06-28 10:32:51 | 2012-06-28 10:50:27 |
|      21 | 2012-06-28 10:50:27 | 2012-06-28 11:36:36 |
|      18 | 2012-06-28 11:36:36 | 2012-06-28 11:39:26 |
|      21 | 2012-06-28 11:39:26 | 2012-06-28 11:40:33 |
|       3 | 2012-06-28 11:40:33 | 2012-06-28 11:48:03 |
|       7 | 2012-06-28 11:48:03 | NULL                |
+---------+---------------------+---------------------+ 
```

请帮助我确定 area_id beetwen date1 和 date_2 的范围

```
datetime.now() - date_2 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:26:16.643

你在正确的轨道上。

当减去两个 datetime 对象时，结果是一个 timedelta 对象。

```
from datetime import timedelta
difference = datetime.now() - date_2 
```

timedelta 对象包含时间差，您可以使用

```
difference.days
# or
difference.seconds 
```

无论您需要什么。

# ios5 - 在 mkmapview didSelectAnnotationView 中使用只能触摸一次自定义标记，如何清除

> ID：11418020
> 
> 赞同：2
> 
> 时间：2012-07-10T16:45:50.620
> 
> 标签：ios5, touch, mkmapview

我在地图视图中有自定义标记。当用户触摸一个时，应用程序将移动到另一个页面。如果用户返回地图并再次触摸相同的项目

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view 
```

在您触摸地图中的某个位置然后再次触摸标记之前不会调用。

我尝试取消选择注释视图，但文档说不是，而且无论如何它都不起作用。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:14:47.620

与其`view.selected`直接设置文档中不允许执行的设置，不如调用该`deselectAnnotation:animated:`方法：

```
[mapView deselectAnnotation:view.annotation animated:YES]; 
```

顺便说一句，反过来，有`selectAnnotation:animated:`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:56:48.120

尝试使用 a`UITapGestureRecognizer`来识别注释视图上的点击。

# javascript - 通过浏览器进行指纹登记和验证

> ID：11418028
> 
> 赞同：0
> 
> 时间：2012-07-10T16:46:09.647
> 
> 标签：javascript, asp.net-mvc, fingerprint

我有一个 digialPersona 指纹读取器，我正在开发一个具有指纹注册和验证功能的 Web 应用程序。

是否可以通过浏览器执行此操作？是的，怎么样？

如果不是，最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:51:31.437

-*打印阅读器（硬件）*将有一些用于接口的 api 参考库。您可以`Custom ActiveX control`使用 Winforms/C# 或 C++（取决于 SDK 库参考）编写并通过`Javascript`.

-另一种选择是使用[完全信任 WPF 浏览器应用程序](http://nahidulkibria.blogspot.co.uk/2008/05/how-to-run-wfpxbap-in-full-trust-mode.html)(XBAP)

**注意：**注意这些场景中的客户端权限设置

# oracle-adf - 使用 Oracle ADF af:autoSuggestBehavior 的 maxSuggestedItems

> ID：11418031
> 
> 赞同：1
> 
> 时间：2012-07-10T16:46:20.987
> 
> 标签：oracle-adf, webcenter

我编写了一个简单的概念验证应用程序来测试使用 Oracle ADF 的自动完成字段，虽然它主要工作，但该`maxSuggestedItems`属性似乎没有任何效果。Oracle 的文档表明，放置 -1 以外的值应该限制返回的值列表，并在底部包含一个“更多...”项，这将导致整个列表被返回。相反，总是返回整个列表。

这是我必须手动实现的吗？如果是这样，一种方法将如何解决？

JSFF 页面中包含以下代码：

```
<af:inputText label="Accessories:" id="it4">
  <af:autoSuggestBehavior suggestItems="#{accessorySuggest.onAccessorySuggest}"
                          maxSuggestedItems="5"/>
</af:inputText> 
```

返回建议值（当然都是硬编码）的方法如下：

```
private static final String[] accessories =
{ "Alloy Wheel", "All-Weather Cargo/Trunk Mat", "All-Weather Floor Mats",
  "Audio Unit - Base", "Audio Unit - Premium", "Auto-Dimming Mirror",
  "Bluetooth", "Body Side Moldings", "Capert Floor Mats - Premium",
  "Car Cover", "Cargo Hooks", "Cargo Liner", "Suggestion 1",
  "Suggestion 2", "Suggestion 3", "Suggestion 4", "Suggestion 5",
  "Suggestion 6", "Suggestion 7", "Suggestion 8", "Suggestion 9",
  "Suggestion 10", "Suggestion 11", "Suggestion 12", "Suggestion 13",
  "Suggestion 14", "Suggestion 15", "Suggestion 16", "Suggestion 17",
  "Suggestion 18", "Suggestion 19", "Suggestion 20", "Suggestion 21",
  "Suggestion 22", "Suggestion 23", "Suggestion 24", "Suggestion 25",
  "Suggestion 26", "Suggestion 27", "Suggestion 28", "Suggestion 29",
  "Suggestion 30" };

public List onAccessorySuggest(FacesContext context,
                               AutoSuggestUIHints hints) {
    ArrayList<SelectItem> suggestItems = new ArrayList<SelectItem>();
    String submittedValue = hints.getSubmittedValue();

    //don't return anything until the user has entered at least 3 characters
    if(hints.getSubmittedValue().length() < 3) {
        return suggestItems;
    }

    for (String s : accessories) {
        if (s.toUpperCase().startsWith(submittedValue.toUpperCase())) {
            suggestItems.add(new SelectItem(s));
        }
    }

    return suggestItems;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:38:54.230

请参阅[http://jdevadf.oracle.com/adf-richclient-demo/docs/apidocs/oracle/adf/view/rich/model/AutoSuggestUIHints.html](http://jdevadf.oracle.com/adf-richclient-demo/docs/apidocs/oracle/adf/view/rich/model/AutoSuggestUIHints.html)

实际上，您的实现应该访问并考虑传入的最大建议项目值。唯一可以开箱即用的用例是建议列表来自 ADF BC 中的模型驱动的 LOV 列表

因此，总而言之，您可以从 AutoSuggestUIHints 访问最大项目并缩短您的退货列表

坦率

# actionscript-3 - Flash CS5 中的事件后交叉淡入淡出的声音

> ID：11418038
> 
> 赞同：0
> 
> 时间：2012-07-10T16:46:47.117
> 
> 标签：actionscript-3, audio, flash-cs5

我希望在 Flash CS5 中的事件（例如按下按钮）后交叉淡入淡出两个声音文件。理想情况下，第一个声音循环直到按下按钮，此时淡出将从声音 2 同时淡入开始。我对 actionscript 3 的理解非常有限。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:42:45.263

为了达到这个效果，你需要使用两个 soundChannel。由于您使用 cs5，我假设您正在循环您的第一个声音文件（如果不是，您应该这样做）：

```
var sc1:SoundChannel = myFirstSound.play(0, 999); 
```

现在当事件被调用（按钮被点击）时，你会想要降低第一个声音文件的音量并增加第二个声音文件的音量。为此，您可以使用 soundChannels 上的 soundTransform 属性。这将是减少音量的示例。

```
sc1.soundTransform = new SoundTransform(sc1.soundTransform.volume - .1, 0); 
```

您将在 enterframe 循环中像这样降低第一个声音文件的音量。同样在这个循环中，您需要增加第二个声音文件的音量：

```
var sc2:SoundChannel = mySecondSound.play(0, 999);
sc2.soundTransform = new SoundTransform(0, 0); 
```

然后在 enterframe 循环内增加第二个声音，它与上面的相同，但加法而不是减法：

```
sc2.soundTransform = new SoundTransform(sc2.soundTransform.volume + .1, 0); 
```

在这种情况下，0.1 是声音衰减的速度。你可能不得不玩弄它。一旦第一个声音文件的音量达到零，您应该将其删除并结束循环。无论如何，我认为这是足够的信息来完成你的目标。祝你好运。

# java - Java字符串拆分不起作用

> ID：11418039
> 
> 赞同：2
> 
> 时间：2012-07-10T16:46:48.767
> 
> 标签：java, split

Java 专家，

请查看下面的拆分命令代码，让我知道为什么最后两个空值没有被捕获。

```
String test = "1,O1,,,,0.0000,0.0000,,";
String[] splittest = test.split(",");
System.out.println("length -"+splittest.length);
for (String string : splittest) {
    System.out.println("value"+string);
} 
```

我得到的结果

```
length -7
value1
valueO1
value
value
value
value0.0000
value0.0000 
```

令人惊讶的是，长度是 7，它应该是 9，而且你可以看到 0.0000 之后的值，即最后两个空值不会出现。现在让我们说如果我更改字符串测试“1,O1,,,,0.0000,0.0000,0,0”

```
String test = "1,O1,,,,0.0000,0.0000,0,0";
String[] splittest = test.split(",");
System.out.println("length -"+splittest.length);
for (String string : splittest) {
    System.out.println("value"+string);
} 
```

我得到正确

```
length -9
value1
valueO1
value
value
value
value0.0000
value0.0000
value0
value0 
```

我不认为我做错了。这是一个错误吗？**JAVA版本-jdk1.6.0_31**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T16:48:57.233

它的行为[与 javadoc 中指定的](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)一样：

> 此方法的工作方式就像通过使用给定表达式和零限制参数调用双参数拆分方法一样。**因此，尾随的空字符串不包含在结果数组中。**

如果要保留尾随的空白字符串，可以使用带有负限制的[2 参数拆分方法：](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)

```
String[] splittest = test.split(",", -1); 
```

> 如果限制为非正数，则该模式将尽可能多地应用，并且数组可以具有任意长度。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T16:49:06.217

`split`如 Javadoc 中所指定的，静默丢弃尾随分隔符。

一般来说， 的`split`行为*有点奇怪*。考虑改用[番石榴](https://code.google.com/p/guava-libraries/) [`Splitter`](https://code.google.com/p/guava-libraries/wiki/StringsExplained#Splitter)，它有一些更可预测和可定制的行为。（披露：我为 Guava 做出了贡献。）

```
Splitter.on(',').split("1,O1,,,,0.0000,0.0000,,");
// returns [1, O1, , , , 0.0000, 0.0000, , ]
Splitter.on(',').omitEmptyStrings()
  .split("1,O1,,,,0.0000,0.0000,,");
// returns [1, O1, 0.0000, 0.0000] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T17:00:23.483

如上所述，`test.split(",");`将忽略尾随的空白字符串。您可以使用带有大的第二个参数的双参数方法。但是，API 还指出

```
If n is non-positive then the pattern will be applied as many times
as possible and the array can have any length. 
```

其中 n 是第二个参数。所以如果你想要所有的尾随字符串，我会推荐

`test.split(",", -1);`

# c++-cli - 大批 ^ 在字典中

> ID：11418043
> 
> 赞同：0
> 
> 时间：2012-07-10T16:46:51.673
> 
> 标签：c++-cli

我想将数组字节中的图像数据存储到字典中。

```
int img_sz = img0->width * img0->height * img0->nChannels;

array <Byte>^ hh = gcnew array<Byte> (img_sz);

Marshal::Copy( (IntPtr)img->imageData, hh, 0, img_sz );

Dictionary<String^,array< Byte >^>^ myResult = gcnew Dictionary<String^,array< Byte >^>(); 

myResult->Add("OVERVIEW",hh); 
```

一旦到达 myResult->Add("OVERVIEW",hh);

我得到一个：在 mscorlib.dll 中发生“System.ArgumentException”类型的未处理异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:29:06.690

检查重复键。 `Dictionary::Add`不能用于替换现有数据。

您可以[在此处查看文档中](http://msdn.microsoft.com/en-us/library/k7z0zy8k.aspx)解释的错误。它特别说

> ArgumentException Dictionary 中已存在具有相同键的元素。

# ipad - 如何使用宽屏 16:9 播放输出为 iPad 应用程序设置视图层次结构

> ID：11418044
> 
> 赞同：0
> 
> 时间：2012-07-10T16:46:53.450
> 
> 标签：ipad, uiviewcontroller, uiwindow, airplay, widescreen

我想创建一个 iPad 应用程序，除了普通的 ipad 屏幕 (4:3) 之外，如果附加了第二个屏幕，它还使用包含 16:9 宽屏格式的 UIWindow 的第二个 UIScreen。
我使用 AppleTV 进行连接。

我不只是想将 ipad 屏幕镜像到电视上，因为它只是一个 4:3 的画面——我想让它使用整个 16:9 宽屏。

所以我开始并设置了第二个 UIScreen，窗口现在以宽屏格式显示在电视上，背景为绿色。

```
//Check for Second Screen and if available, make a second UIWindow and put it on the      second screen
NSArray* connectedScreens = [UIScreen screens];
NSInteger numberOfScreens = [[UIScreen screens]count];
NSLog(@"Number of screens connected: %d",numberOfScreens);

if (numberOfScreens > 1) {
    //we have a second screen connected, display an extra window on the second screen
    UIScreen* secondScreen = [connectedScreens lastObject];
    UIWindow* secondWindow = [[UIWindow alloc]initWithFrame:secondScreen.bounds];
    secondWindow.backgroundColor = [UIColor greenColor];
    [secondWindow setScreen: secondScreen];
    [secondWindow makeKeyAndVisible];
    self.tvWindow = secondWindow;
} 
```

到目前为止，一切都很好。

但现在我不确定如何设置导航/视图层次结构。

我想在两个 UIScreens（ipad + TV）上显示相同的数据，只是针对不同的屏幕尺寸进行了优化。

因为我有应该显示的完全相同的数据，并且我不想让类似 viewControllers 的不同实例漂浮在周围，所以我想我可以为每个 ViewController 使用两个 xib 文件，一个用于放入“视图”的 4:3 ipad 视图' viewController 的属性和 16:9 宽屏电视的一个 xib，放入同一 viewController 的 'tvView' 属性中。

ipad UIWindow 有一个 UINavigationController 旋转不同的 UIViewControllers。

因此，如果我将 ViewController 推到 ipad Window 的 Navigationcontroller 上，我可以将 TV-xib 中的相应 tvView 添加到 TV 屏幕的 UIWindow。

我在正确的道路上吗？你会怎么做？

一个小草图: ![查看层次结构草图](../Images/f61b6cb439e81934703ab4b0dcfb0a17.png) :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:35:13.803

这听起来很对。如果您允许用户与导航控制器进行交互，则必须注册为控制器，`delegate`以便跟踪 iPad 上的导航堆栈发生的情况并相应地更换您的电视视图。

# entity-framework - 实体框架预生成视图

> ID：11418045
> 
> 赞同：1
> 
> 时间：2012-07-10T16:46:55.550
> 
> 标签：entity-framework

我正在为我的项目中的实体数据模型预生成视图；按照 MSDN 给出的说明：http: [//msdn.microsoft.com/en-us/library/bb896240.aspx](http://msdn.microsoft.com/en-us/library/bb896240.aspx)

我已经完成了更改，没有任何问题。我现在可以看到添加到我的项目中的 CSDL、SSDL 和 MSL 文件。这是否意味着每次更新实体数据模型时都必须更新这些文件？如果是这样，由于我们的数据库更改非常频繁，因此会产生相当大的开销。

每次我更新 edmx 时，有没有更好的方法来更新这些文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:42:31.257

你可以做我们在项目中做的事情：

*   打开 EDMX 并右键单击表面-> 属性。
*   将元数据工件处理设置为“复制到输出目录”
*   将生成的 /bin/debug/ .csdl .msl 和 .ssdl 添加到您的项目中（在解决方案资源管理器中显示所有文件并右键单击，包含在项目中）
*   接下来将 .csdl .msl 和 .ssdl 属性设置为嵌入资源。
*   在您的运行时项目中构建和引用实体框架连接字符串中的文件。

# javascript - 使用蓝牙扫描仪/键盘在 iOS/Safari 上聆听 HTML/JavaScript 中的按键，而无需关注某个字段

> ID：11418061
> 
> 赞同：9
> 
> 时间：2012-07-10T16:47:40.173
> 
> 标签：javascript, ios, ipad, bluetooth, barcode-scanner

我有以下设置：

*   带有运行 webb 应用程序的 Safari 浏览器的 iPad。
*   与 iPad 连接/配对的蓝牙条码扫描器。

我的 web 应用程序在全局范围内监听按键事件，这使我能够触发扫描功能，而无需用户将焦点放在 webb 应用程序中的文本字段。

当使用 USB 扫描仪在桌面上运行应用程序时，上述方法工作正常。

我的问题是应用程序不会触发 keydown(press/up) 事件，直到连接蓝牙扫描仪时文本字段聚焦在 iPad 上。

有没有可能实现？

不久前的一个相关问题： [如何添加 Javascript 侦听器来捕获从蓝牙条形码扫描仪到 iPad 的输入？](https://stackoverflow.com/questions/3588899/how-can-i-add-a-javascript-listener-to-capture-input-from-bluetooth-barcode-scan)

谢谢/E

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-30T05:05:28.177

我相信对于移动 Safari（和大多数其他 iOS 移动浏览器），只有当表单输入未聚焦时，Web 应用程序才能检测到按键。您的设备（没有外部键盘）无法在没有选择表单输入的情况下进行按键输入，因为键盘无法启动。

# mysql - MySQL 和跳过 WHERE 谓词

> ID：11418064
> 
> 赞同：2
> 
> 时间：2012-07-10T16:47:56.227
> 
> 标签：mysql

如果下面的 last_name 为 NULL，它会跳过该列的 WHERE 比较以提高性能吗？

```
AND (last_name IS NULL OR sp.last_name LIKE CONCAT('%',IFNULL(last_name, ''),'%')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:51:15.690

MySQL 可以自由地以任一顺序执行比较。

它很可能会`NULL`首先进行检查，因为它的计算速度更快，但这并不能保证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:51:47.927

据我所知，这是真的，它将包含该行而不评估后一个表达式。但是，这可以（应该？）使用已知数据集进行测试，方法是让后一个表达式产生副作用（例如递增计数器）并在针对 last_name 列中只有 NULL 的数据集运行之前和之后检查计数器。

# 编辑：测试 v5.5.25

对于好奇：

```
+------+
| name |
+------+
| NULL |
+------+
| Bill |
+------+ 
```

下面的每个查询都以 开头`set @foo=0;`，然后显示 的结果`select @foo;`。

```
SELECT name FROM names WHERE (@foo:=@foo+1 OR name IS NULL);
-- 1 (did optimize) - same without parenthesis

SELECT name FROM names WHERE name IS NULL OR (@foo:=@foo+1);
-- 1 (did optimize)

SELECT name FROM names WHERE (@foo:=@foo+1) OR name IS NULL;
-- 2 (did not optimize) 
```

有趣的是，我无法生成未以这种方式优化的更新查询。即无论我如何安排where 子句中的两个表达式，它*总是*只增加一次@foo。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T16:53:28.217

试试这个：

```
AND  (if(last_name is null,1, sp.last_name 
LIKE CONCAT('%',last_name,'%'))) 
```

# php - 如何设置下拉列表来更新和保存？

> ID：11418065
> 
> 赞同：0
> 
> 时间：2012-07-10T16:47:59.403
> 
> 标签：php, drop-down-menu

我想创建一个下拉列表，允许用户选择开始和结束“年、月、日”，如下所示。当页面更新时，选项将恢复为“原始”选项。当页面更新时，如何允许这些选定的值保存并保留？

```
<?php

if (isset($_POST['action']))
{
    $action = $_POST['action'];
    $startyear = $_POST['startyear'];
    $startmonth = $_POST['startmonth'];
    $startday = $_POST['startday'];
    $endyear = $_POST['endyear'];
    $endmonth = $_POST['endmonth'];
    $endday = $_POST['endday'];
}
else
{
    $action = "";
    if (!isset($_POST['startyear']) || !isset($_POST['startmonth']) || !isset($_POST['startday']) 
        || !isset($_POST['endyear']) || !isset($_POST['startmonth']) || !isset($_POST['startday']))
    {
        $startyear = "";
        $startmonth = "";
        $startday = "";
        $endyear = "";
        $endmonth = "";
        $endday = "";
    }
    else
    {
        $startyear = $_POST['startyear'];
        $startmonth = $_POST['startmonth'];
        $startday = $_POST['startday'];
        $endyear = $_POST['endyear'];
        $endmonth = $_POST['endmonth'];
        $endday = $_POST['endday'];
    }

}

if ($action == "update")
{
    echo "<h3>Start: $startyear-$startmonth-$startday | End: $endyear-$endmonth-$endday</h3>";
}

else
{
    if ($startyear == "" || $endyear == "")
    {
    // something belongs here...not sure
    }
    echo "<h3>Start: $startyear-$startmonth-$startday | End: $endyear-$endmonth-$endday</h3>";
?> 
```

开始/结束年、月、日的选择在这里：

```
<form name='update' action='testing.php' method='POST'>
Start: <select name='startyear'>
    <option value="1">2012</option>
    <option value="2">2011</option>
    <option value="3">2010</option>
    <option value="4">2009</option>
    <option value="5">2008</option>
    <option value="6">2007</option>
    <option value="7">2006</option>
    <option value="8">2005</option>
    <option value="9">2004</option>
    <option value="10">2003</option>
    <option value="11'>2002</option>
    <option value="12">2001</option>
    <option value="13">2000</option>
    <option value="14">1999</option>
    <option value="15">1998</option>
</select>
<select name='startmonth'>
    <option value="1">01</option>
    <option value="2">02</option>
    <option value="3">03</option>
    <option value="4">04</option>
    <option value="5">05</option>
    <option value="6">06</option>
    <option value="7">07</option>
    <option value="8">08</option>
    <option value="9">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
</select>
    <select name='startday'>
    <option value="1">01</option>
    <option value="2">02</option>
    <option value="3">03</option>
    <option value="4">04</option>
    <option value="5">05</option>
    <option value="6">06</option>
    <option value="7">07</option>
    <option value="8">08</option>
    <option value="9">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
</select>
<br>
End:<select name ='endyear'>
    <option value="1">2012</option>
    <option value="2">2011</option>
    <option value="3">2010</option>
    <option value="4">2009</option>
    <option value="5">2008</option>
    <option value="6">2007</option>
    <option value="7">2006</option>
    <option value="8">2005</option>
    <option value="9">2004</option>
    <option value="10">2003</option>
    <option value="11'>2002</option>
    <option value="12">2001</option>
    <option value="13">2000</option>
    <option value="14">1999</option>
    <option value="15">1998</option>
</select>
<select name='endmonth'>
    <option value="1">01</option>
    <option value="2">02</option>
    <option value="3">03</option>
    <option value="4">04</option>
    <option value="5">05</option>
    <option value="6">06</option>
    <option value="7">07</option>
    <option value="8">08</option>
    <option value="9">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
</select>
    <select name='endday'>
    <option value="1">01</option>
    <option value="2">02</option>
    <option value="3">03</option>
    <option value="4">04</option>
    <option value="5">05</option>
    <option value="6">06</option>
    <option value="7">07</option>
    <option value="8">08</option>
    <option value="9">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
</select>
<input type='submit' value='Compare'/>
</form>
 <?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:01:38.960

您需要向生成页面的 HTML 添加更多内容，以便为下拉菜单设置默认选定值。

你需要这样的东西：

```
<option value="1" <?php if ($_POST["startyear"] = "1") echo "selected"; ?>>2012</option> 
```

您需要为每个选项执行此操作，以查看此选项的值是否与 from 的值相同`$_POST`；在这种情况下，您可能需要考虑使用`for`循环来创建 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:05:31.907

无需让 php 为您呈现如此大的 HTML，这还允许您确定**所选**属性是否在选项中呈现。

为了保持表单中选择的值，需要将表单发送回与其呈现的相同 php 脚本`action=''`，并且需要对发布的值进行一些逻辑检查以检查该值是否等于自身，请检查下面的表单。

```
<?php 
//Build an array of values for your forms
$year  = range(1998,2012);
$month = range(01,12);
$day   = range(01,31);

//Handle POST, just an example
if($_SERVER['REQUEST_METHOD']=='POST'){
    foreach($_POST as $key=>$value){
        if(is_numeric($value)){
            $$key = $value;
        }
    }
    /**
     * All POST keys like: startmonth ect will now be php variables like
     * $startmonth
     */

    //Do somthing with $startmonth ect
}

//A more tidy form
?>
<form name='update' action='' method='POST'>
Start: <select name='startyear'>
    <?php foreach(array_reverse($year) as $y):?>
    <option value="<?=$y?>"<?=((isset($startyear) && $startyear == $y)?' selected':null)?>><?=$y?></option>
    <?php endforeach;?>
</select>
<select name='startmonth'>
    <?php foreach($month as $m): $m = str_pad($m, 2, "0", STR_PAD_LEFT);?>
    <option value="<?=$m;?>"<?=((isset($startmonth) && $startmonth == $m)?' selected':null)?>><?=$m;?></option>
    <?php endforeach;?>
</select>
    <select name='startday'>
    <?php foreach($day as $d): $d = str_pad($d, 2, "0", STR_PAD_LEFT);?>
    <option value="<?=$d;?>"<?=((isset($startday) && $startday == $d)?' selected':null)?>><?=$d;?></option>
    <?php endforeach;?>
</select>
<br>
End: <select name='endyear'>
    <?php foreach(array_reverse($year) as $y):?>
    <option value="<?=$y?>"<?=((isset($endyear) && $endyear == $y)?' selected':null)?>><?=$y?></option>
    <?php endforeach;?>
</select>
<select name='endmonth'>
    <?php foreach($month as $m): $m = str_pad($m, 2, "0", STR_PAD_LEFT);?>
    <option value="<?=$m;?>"<?=((isset($endmonth) && $endmonth == $m)?' selected':null)?>><?=$m;?></option>
    <?php endforeach;?>
</select>
    <select name='endday'>
    <?php foreach($day as $d): $d = str_pad($d, 2, "0", STR_PAD_LEFT);?>
    <option value="<?=$d;?>"<?=((isset($endday) && $endday == $d)?' selected':null)?>><?=$d;?></option>
    <?php endforeach;?>
</select>
<input type='submit' value='Compare'/>
</form> 
```

# javascript - 无法将html数组传递给JS

> ID：11418067
> 
> 赞同：0
> 
> 时间：2012-07-10T16:48:14.910
> 
> 标签：javascript, html, forms

嗨，我无法将 html 表单数组发送到 JS。我有动态 html 表单和一些字段：

```
<div id="fields">
<input type="text" name="ppav[]" id="p" />
<input type="text" name="quantity[]" id="q" size="3" />
<input type="text" name="price[]" id="pr" size="10" />
<input type="text" name="sum" id="su" size="10" disabled="disabled"/>
<br />
</div> 
```

在 JS 中，我尝试使用此功能，但得到`undefined`警报而不是结果：

```
var welements = document.getElementsByName('ppav[]');
for (var i = 0, j = welements.length; i < j; i++) {
    var an_element = welements[i];
    alert(an_element.selectedIndex);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:53:27.637

你期待什么？该`selectedIndex`属性返回选择元素中选定选项的索引。如果您想要输入字段的值，请尝试`alert(an_element.value);`

# javascript - 奇怪的 jQuery $.each() 行为

> ID：11418068
> 
> 赞同：0
> 
> 时间：2012-07-10T16:48:19.080
> 
> 标签：javascript, jquery, html-lists

我遇到了 .each() 无法获取某些文本/html 的奇怪问题。

我有：

```
<ul class="errors">
   <li class="title">Please check the details you entered and try again.</li>
   <li id="title">Please supply a title</li>
   <li id="typeID">Please select a type</li>
   <li id="availID">Please select the availablilty</li>
   <li id="city">Please supply a valid city</li>
   <li id="postcode">Please supply a valid postcode</li>
   <li id="contactNum">Please supply a valid contact number</li>
   <li id="description">Please enter a description</li>
</ul> 
```

对于jquery：

```
$('.errors').children('^[id]').each(function(index){
    alert(index + ': ' + $(this).text());
}); 
```

现在的问题是，jquery 没有为“描述”列表项选择文本/html。不管我怎么尝试。

关于为什么会发生这种情况的任何想法？

谢谢， TMP

更新：我设法找到了问题。页面上有另一个具有相同 ID 的元素的事实停止了它的工作。真的很奇怪，因为所有其他列表项都相同但工作得很好。也许是一个错误？

干杯，TMP

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:49:34.763

```
alert(index + ': ' + $(this.text()); 
```

应该

```
alert( index + ': ' + $(this).text() ); 
```

您在 . 之后缺少右括号`this`。

**编辑**

修正了那个错字，我得到了预期的结果：http: [//jsfiddle.net/xQyAt/](http://jsfiddle.net/xQyAt/)

# javascript - JavaScript：使用来自单独 HTML 文档的输入写入当前 HTML 文档？

> ID：11418072
> 
> 赞同：1
> 
> 时间：2012-07-10T16:48:44.697
> 
> 标签：javascript, jquery, jquery-load

**前言：**大家好！开始。首先，我不熟悉 jquery，所以在我研究之前，发布的任何 jquery 代码都与我无关。我正在自学JS。我有不错的 XHTML 经验、不错的 CSS3 熟悉/理解，以及一些（非常少的）应用程序编程经验（C++、Java）。

**情况：**我正在设计一个网站的主页，在*启用*JavaScript 的情况下，链接被*覆盖*，而不是为每个主链接*加载新的 HTML 文档/页面，而是使用 JS**更改* 主页的部分。

**挑战：**我想在不加载完全独立的页面的情况下加载新页面内容。针对此类挑战的类似*旧 HTML 解决方案*是加载页面*框架，*对吗？我想使用服务器上另一个单独的 HTML 文件中的内容覆盖整个容器元素。（可以定制外部文件以适应主页，但如果我可以拉出外部 HTML 文档的一个部分，也许是一个元素，那就*更好了）。*

*   我可以只使用 JavaScript 吗？
*   如果不是，还有哪些其他脚本可以与 JS*结合使用？*
*   我需要实现“AJAX”吗？
*   我必须使用“HTML DOM”吗？- 编辑：我看到 DOM 只是 HTML 等功能的组成部分。

感谢大家的耐心等待和专家建议。我 <3 StackExchange。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:52:04.550

是的，您可以使用 Javascript 和 jQuery 做到这一点，看看 load() 方法正是您需要的

[http://api.jquery.com/load/](http://api.jquery.com/load/)

是的，它使用的是 AJAX，但它真的很容易使用，不用担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:52:10.170

> 我可以只使用 JavaScript 吗？

不，因为服务器需要为您提供您希望放置在 HTML 页面中的内容/数据。您需要将客户端脚本 (JavaScript) 与 Web 服务器上的功能结合起来（请参阅下面的下一个问题）。

> 如果不是，还有哪些其他脚本可以与 JS 结合使用？

那将是您的服务器端语言，例如 PHP、Ruby 或 Python。

> 我需要实现“AJAX”吗？

是的，您所描述的是使用 Ajax 实现的。您提到了 jQuery 库，它确实具有对服务器执行 Ajax 调用的功能（请参阅 参考资料[`$.ajax`](http://api.jquery.com/jQuery.ajax/)）。基本思想是：您的 JavaScript 代码执行 Ajax 调用，您的 Web 服务器返回 HTML，然后您的 JavaScript 代码接收它并将其放置在 HTML 页面中。

> 我必须使用“HTML DOM”吗？

网页总是使用“HTML DOM”。您可以阅读 Wikipedia 上有关[文档对象模型](https://en.wikipedia.org/wiki/Document_Object_Model)的文章以获取更多信息：您必须使用 DOM，但不能选择使用 DOM——它是网页工作方式的一部分。

# cucumber - 如何增加 SpecFlow/Gherkin 步骤之间的可重用性？

> ID：11418074
> 
> 赞同：7
> 
> 时间：2012-07-10T16:48:54.580
> 
> 标签：cucumber, bdd, specflow, acceptance-testing, gherkin

我想我彻底理解了 SpecFlow 背后的概念和想法，但是即使在阅读了[Secret Ninja Cucumber Scrolls](http://cuke4ninja.com/)、[The Cucumber Book](http://pragprog.com/book/hwcuc/the-cucumber-book)并浏览了各种论坛之后，我仍然不确定通往可重用性的道路。

我们的场景已经符合各种准则

*   不言自明
*   必须有一个可以理解的目的（是什么使它与其他场景不同）
*   是独一无二的
*   表示垂直功能切片
*   使用无处不在的语言
*   从利益相关者的角度撰写
*   关于业务功能，而不是软件设计
*   按史诗分组
*   不是测试脚本
*   让其他人阅读它们以查看场景是否正确
*   不涉及 UI 元素
*   代表关键示例
*   非技术
*   精确且可测试
*   尽可能重复
*   “给定”代表状态，而不是动作
*   'When' 代表动作
*   “那么”应该代表一个可见的变化，而不是一些内部事件

我们的步骤必须遵守以下准则（一些特定于 SpecFlow）：

*   使用无处不在的语言
*   不涉及 UI 元素
*   不应该合并
*   应该是可重用的，并且在所有功能上都是全局的
*   不应链接到特定功能
*   按实体、实体组或领域概念分组
*   不要创建步骤以重用步骤定义文件中的逻辑
*   仔细考虑一个步骤属于哪个步骤文件
*   不要在阶段之间重用步骤
*   必须避免在步骤中使用文字字符串，但如果需要，请使用单引号
*   切勿将多个 [Given]、[When] 或 [Then] 属性应用于 step 方法
*   根据它们所代表的阶段对步骤进行排序
*   如果对场景不重要，很重要的就别提了

但是即使我们使用正则表达式占位符，我们仍然会得到相同步骤的许多变体。尤其是如果某件事不重要，则不应提及它的规则会导致这些变化。是的，在内部，这些步骤做了很多重用，但不是在场景中。

例如考虑以下场景：

```
Feature: Signing where both persons are physically available

@Smoke
Scenario: Show remaining time to sign based on previous signature
  Given a draft proposal
  And the first signature has been set
  When I try to set the second signature
  Then the remaining time to sign should be shown

@Smoke
Scenario: Re-signing of the first proposal
  Given a signature that has not been set within the configured time
  And the first signature has just been re-signed
  When I try to set the second signature
  Then the remaining time should start over 
```

将两个“给定”步骤合二为一并失去一些可重用性会更好吗？

其他一些例子：

```
Feature: Conditionally show signatures to be signed

@Smoke
Scenario: Show the correct signature for a proposal with a night shift
  Given I have a proposal for the day shift
  When I change it to the night shift
  Then I should only be able to sign for the night shift

@Smoke
Scenario: Show additional signature when extending the shift
  Given I have a suspended proposal for the night shift
  When I extend the period to the day shift
  Then I should confirm extening the period over the shift 
```

我在这里错过了一个基本概念吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T07:54:47.087

这不是答案，而是一些提示：

*   您可以将多个 Given/When/Then 属性放在同一个方法上。如果参数相同并且仅在措辞上有所不同，这可能很有用
*   在许多项目中，我们使用驱动程序/页面对象模式，因此步骤定义通常很短（2-3 行），因此我们不太关心它们的数量
*   我喜欢你的场景，我不会改变它们。另一方面，尽量关注*可读性*而不是*可重用性*。如果你的语言是一致的，那么可重用性就会到来。
*   为了增加可重用性，特别是当您正在谈论的实体有很多“变化”时，您可以考虑使用[step argument transformations](https://github.com/techtalk/SpecFlow/wiki/Step-Argument-Conversions)。这是一个例子：

您需要一个类来表示带有装饰的测试中的许可证：

```
class PermitDescription{
  bool suspended;
  bool draft;
} 
```

创建转换器方法：

```
[StepArgumentTransformation("permit")]
public PermitDescription CreateSimple(){
  return new PermitDescription();
}
[StepArgumentTransformation("draft permit")]
public PermitDescription CreateDraft(){
  return new PermitDescription() { draft = true; }
}
[StepArgumentTransformation("suspended permit")]
public PermitDescription CreateSuspended(){
  return new PermitDescription() { suspended = true; }
} 
```

您现在可以拥有需要许可的更灵活的步骤定义：

```
[Given(@"I have a (.*) for the day shift")]
public void Something(PermitDescription p)
{ ... } 
```

匹配：

```
Given I have a permit for the day shift
Given I have a draft permit for the day shift
Given I have a suspended permit for the day shift 
```

当然，这是一个也可能被滥用的工具，但在某些情况下它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T18:45:12.453

补充来自@gaspar-nagy 的答案它遵循 C 编程中的类设计模式。在任何地方，一组公共类共享公共属性/方法，这些属性/方法可以重构为基类。

在我们的 SpecFlow 测试中，常见的浏览器操作位于基类中：

```
Login()
Logout()
NavigateToUrl(string url)
UserHasPermission(string permission)
WaitForElementToAppearById(string id)
WaitForElementToAppearByClass(string class) 
```

并且这些方法中的每一个都可以具有 1 个或多个 Given/When/Then 属性，例如 @gasper-nagy 所述。

另一种被证明是无价的技术是在 .features 和它们各自的 C# 步骤文件之间共享变量是使用 ScenarioContext。

例如，每当`Login()`调用以启动基于浏览器的测试时，我们都会这样做：
`ScenarioContext.Current.Set<IWebDriver>(driver, "driver")`

然后在其他任何需要驱动程序的地方，可以通过以下方式获得它：
`var driver = ScenarioContext.Current.Get<IWebDriver>("driver")`

这使得步骤可重用，例如用于验证的用户输入测试，您可能决定像这样传递正在验证的元素： `ScenarioContext.Current.Set<IWebElement>(element, "validation-element")`

# jquery - jQuery - 单击按钮时，仅在父元素中模拟 input[type="file"].change

> ID：11418082
> 
> 赞同：1
> 
> 时间：2012-07-10T16:49:28.630
> 
> 标签：jquery, file, types, input, input-type-file

我不确定标题是否正确说明了我正在尝试做的事情，但我不知道如何命名该问题。

我正在尝试使用 css 和 jquery 为 input[type="file"] 元素添加一些样式。这是我的代码：

```
<div class="input-file">
    <input type="file"><label>Select file...</label><button type="button">...</button>
    </div> 
```

其中 INPUT 具有 display: none 样式，因此不可见。

Javascript：

```
$('.input-file > button').live('click',function() {
$('input[type="file"]').click(); }); 
```

如果页面上只有 1 个元素，则效果很好，但如果有例如 3 个元素，则每当我单击按钮 1 时，它都会触发 3 次功能。我希望它只响应它的父元素`<div class="input-file">`

我如何使用 .parent 或 .before 或任何可以实现此目的的功能？

**编辑：**

@Chandu 有一个很好的解决方案。

此外，另一种选择是 $(this).prev().prev().click(); 如果元素是静态的并且总是在相同的位置。

谢谢@Chandu。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:52:52.327

尝试这个：

```
$('.input-file > button').live('click',function() {
    $(this).closest('.input-file').find('input[type="file"]').click(); 
}); 
```

**更新：** 如果您使用的是 jquery >= 1.7，那么使用这个版本`on`：

```
$('.input-file').on('click', 'button',function() {
    $(this).closest('.input-file').find('input[type="file"]').click(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T13:11:28.133

您也可以使用**标签**标签来模拟点击。标签标签模拟当前表单的点击输入，其 id 类似于**属性**。示例：

```
<label for="file-input">
    Click me!
    <input type="file" id="file-input" style="display:none;" />
</label> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T12:57:25.723

```
<script type="text/javascript">
    $(function () {
        $('#btn-upload').click(function (e) {
            e.preventDefault();
            $('#file').click();
        });
    });
</script>

<style type="text/css">
    #file { display:none; } 
</style>

<div>
    <input type="file" id="file" name="file" />
    <button type="button" id="btn-upload">Image</button>
</div> 
```

# wordpress - Wordpress 在创建或更新帖子时出现可怕的白屏

> ID：11418087
> 
> 赞同：0
> 
> 时间：2012-07-10T16:49:41.687
> 
> 标签：wordpress, screen

我创建了一个 wordpress 主题，在将方案上传并激活到服务器后，一切看起来都很好......但是当我尝试使用 wordpress 的管理部分时，我遇到了“白屏”或创建新帖子时的问题并且在尝试注销时...当我尝试更新帖子或创建新页面时，它仅停留在 post.php 上，并且页面为空白。请建议我该怎么办？我在本地 xampp 服务器上运行了相同的主题，但运行正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-21T18:06:11.970

您应该在 wp-config 文件中启用**Debug ，代码中一定有导致此问题的错误。**

```
define('WP_DEBUG', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-21T18:01:03.223

我有一个类似的问题，每当我添加或更新帖子时，我都会得到白屏。我的问题也出在 functions.php 文件中。不知道具体是什么，但我回去得到了一个旧版本的文件。问题解决了。

# maven - 如何在詹金斯有条件地运行 maven-release:rollback？

> ID：11418089
> 
> 赞同：6
> 
> 时间：2012-07-10T16:49:51.237
> 
> 标签：maven, hudson, jenkins, maven-release-plugin

我正在使用**jenkins/hudson**制作 maven 版本，有时当构建失败时，我没有其他方法可以手动回滚然后再次启动 jenkins 构建。我想知道是否有任何好的和可配置的方式来运行**mvn release:rollback**在构建结束时依赖于**mvn release:prepare**的结果？我的意思是，如果发布过程失败，我想运行 maven release:rollback，否则不会。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T20:02:21.017

您可以将 Jenkins 作业配置为每次启动作业时重新检出源代码。因此，如果您的发布在创建发布标签之前失败，您可以修复问题并重新开始发布。

# ruby - Ruby 中 each_char 与 getc（和类似方法）的效率

> ID：11418093
> 
> 赞同：0
> 
> 时间：2012-07-10T16:50:18.197
> 
> 标签：ruby, file-io

迭代器方法如`each_char`, `each_line`. 等与读取大文件的 while-looped `getc`、`gets`等方法相比？主要是，使用每种方法的开销是多少，哪种会使用更多的内存，哪种会更快？

`file`本质上，如果是 100MB 的文本文件，在内存、开销和速度方面哪个会更好？

```
file.each_char{
|ch|
    #process ch
} 
```

对比

```
ch = ""
until(file.eof?)
    ch = file.getc
    #process ch
end 
```

或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:15:08.900

[您可以使用Ruby 标准库的*基准测试*](http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/index.html)包轻松明确地回答此类问题。

> 或者有没有更好的方法来做到这一点？

我认同。虽然 C 程序可能会合理地一次处理一个文件，但 Ruby 具有内置的字符串和数组功能的高耸大厦，而且这一切都是用 C 语言编写的，因此运行速度很快。

将一行拆分为单词，然后只使用几个单词，或者只计算它们，或者其他什么似乎效率不高，但它可能比一次解析该行一个字符要快得多，并且在必要时更容易阅读和重写.

一般来说，我建议 Ruby 程序利用该库并尽可能多地使用尽可能抽象的对象。

# visual-studio-2008 - Visual Studio 2008 中的 DirectX 链接器错误

> ID：11418096
> 
> 赞同：0
> 
> 时间：2012-07-10T16:50:36.507
> 
> 标签：visual-studio-2008, linker, directx

我有一些 DirectX 示例应用程序可用于大学项目，但是我在使用 DirectX 时遇到了一些问题。

（我使用的是 Visual Studio 2008，我使用的是 64 位 Windows Vista）我安装了 2010 年 6 月版的 DirectX SDK (DXSDK_Jun10)，但是在安装过程结束时我收到一个错误 - '错误代码： S1023' - 虽然检查文件夹（C:\Program Files (x86)\Microsoft DirectX SDK (June 2010)\Lib\x86, C:\Program Files (x86)\Microsoft DirectX SDK (June 2010)\Include 等）这些文件看起来都在那里。）

我打开了示例项目的解决方案（以前曾多次在使用相同操作系统和 Visual Studio 2008 版本的其他 PC 上工作过）并完成了以下步骤 -

*   确保 Visual Studio 知道在哪里查找链接文件 - 工具 -> 选项 -> 项目和解决方案 -> VC 目录并将目录添加到包含文件和库文件（上述目录）

*   我右键单击项目解决方案，Properties -> Linker -> Input (for All Configurations) 并链接到 d3d10.lib d3dx10d.lib dxguid.lib 和 dxerr.lib

编译器给出以下错误“链接：致命错误 LNK1104：无法打开文件 'd3d10.lib,'”

我已经检查过，d3d10.lib 都在 Lib\x64 和 Lib\x86 中。

任何帮助将不胜感激，谢谢！

编辑：我已尝试将库添加到“附加依赖项”，如下面的海报所示。我仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:28:43.510

在链接器选项中指定库目录：Project Properties -> Linker -> General -> Additional Library Directories

# python - Python 无符号右移

> ID：11418112
> 
> 赞同：13
> 
> 时间：2012-07-10T16:51:33.153
> 
> 标签：python, operators, bit-manipulation, shift

> **可能重复：**
> [如何在 python 中获得逻辑正确的二进制移位](https://stackoverflow.com/questions/5832982/how-to-get-the-logical-right-binary-shift-in-python)

如何在 python 中执行无符号右移？

IE 等效的 java 是这样的：

```
x >>> y or x >>>= y 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-10T17:06:13.397

Java 中的整数具有固定位数，但 Python 中没有，因此无符号右移在 Python 中毫无意义。

# c - 生成随机位 - C rand() 中缺乏随机性

> ID：11418113
> 
> 赞同：9
> 
> 时间：2012-07-10T16:51:34.773
> 
> 标签：c, random

我`rand()`用来生成 0 或 1 ( `rand() % 2`)。我正在使用当前时间 ( `srand(time(NULL))`) 播种。

经过多次调试，我意识到`rand()`永远不会连续 16 次或更多次返回偶数（奇数）数。

这是一个已知的问题？有没有 C 附带的更好的 PRNG？

我正在使用 Visual Studio 2010 在 Windows 7 上运行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T17:00:41.143

而不是使用`rand()%2`，尝试`rand()>(RAND_MAX/2)`。您只能假设`rand()`在区间上是均匀的`[0, RAND_MAX]`。

**编辑：**这是 Shahbaz 在评论中提出的，我只是在发布这个答案后才注意到这一点。

**编辑：** ArjunShankar 在我之前的措辞中叫我出来：“rand() 仅在区间 [0, RAND_MAX] 上被指定为统一的”

来自 C99 标准：

> rand 函数计算范围为 0 到 RAND_MAX 的伪随机整数序列。

从技术上讲，没有指定均匀性（或*等分布*），但它是用于实现常用 PRNG（例如 Mersenne Twister）的事实上的标准。这是为了允许程序员轻松创建具有非均匀分布的自定义 PRNG。如果没有此属性，程序员将被迫从头开始实现自定义 PRNG。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:08:44.500

我建议使用更好的RNG。您在 Windows 上运行，因此您可以使用[`rand_s`](http://msdn.microsoft.com/en-us/library/sxtz2fa8%28v=vs.80%29.aspx)：它是使用 Windows 加密 RNG 的 Microsoft 扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:55:00.950

`rand()`是众所周知的吸。 `random()`好一点（有时），但`drand48()`它的家庭要好得多。

如果您需要比这更好，请查看 mersene twister 或其他 PRNG 库。或者查看 /dev/random 是否可以提供足够的数据来满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-24T10:56:28.900

好吧，您可以使用 Mersenne Twister 或 WELL 的算法。WELL 的代码在这里（我没有足够的声誉） [http://i.stack.imgur.com/q6VPL.png](https://i.stack.imgur.com/q6VPL.png)![在此处输入图像描述](../Images/f79517b9147ea04b5b89c800f4bdf280.png)

# java - Groovy 转换 - 来自 Java

> ID：11418114
> 
> 赞同：4
> 
> 时间：2012-07-10T16:51:34.967
> 
> 标签：java, groovy, maven-3

我有一个java类的以下一小部分：

```
public class GBitMaskTest {

    @Test
    public void checkFirstBitTest() {
        BitMask bm = new BitMask(0x8000000000000000L);
        assertEquals(true, bm.isBitSet(63));
    }

...
} 
```

它也应该可以在 Groovy 中编译，因为它是有效的 Java 代码。但我得到以下信息：

```
Groovy Bug --- exception in phase 'conversion' in source unit '/home/g-ut-example/src/test/groovy/com/soebes/training/maven/simple/GBitMaskTest.groovy' For input string: "8000000000000000"
BUG! exception in phase 'conversion' in source unit '/home/g-ut-example/src/test/groovy/com/soebes/training/maven/simple/GBitMaskTest.groovy' For input string: "8000000000000000" 
```

可能是我误解了一件事。有人出主意吗？

这在 Groovy 2.0 与 Maven 的关系中发生过。正是这个例子[https://github.com/khmarbaise/maui/tree/master/src/main/resources/g-ut-example](https://github.com/khmarbaise/maui/tree/master/src/main/resources/g-ut-example)产生了这个问题。我正在编译以下部分：

```
 <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <compilerId>groovy-eclipse-compiler</compilerId>
          <compilerArgument>nowarn</compilerArgument>
          <verbose>true</verbose>
        </configuration>
        <dependencies>
          <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-eclipse-compiler</artifactId>
            <version>2.7.0-01</version>
          </dependency>
          <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-eclipse-batch</artifactId>
            <version>2.0.0-01</version>
          </dependency>
        </dependencies>
      </plugin>
    </plugins>
  </build> 
```

错误信息的其余部分（异常）：

```
GBitMaskTest.groovy' For input string: "8000000000000000"
    at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:1001)
    at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:624)
    at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:600)
    at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:577)
    at org.codehaus.jdt.groovy.internal.compiler.ast.GroovyCompilationUnitDeclaration.processToPhase(GroovyCompilationUnitDeclaration.java:171)
    at org.codehaus.jdt.groovy.internal.compiler.ast.GroovyParser.dietParse(GroovyParser.java:455)
    at org.codehaus.jdt.groovy.integration.internal.MultiplexingParser.dietParse(MultiplexingParser.java:44)
    at org.eclipse.jdt.internal.compiler.Compiler.internalBeginToCompile(Compiler.java:775)
    at org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.java:395)
    at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:485)
    at org.eclipse.jdt.internal.compiler.batch.Main.performCompilation(Main.java:3829)
    at org.eclipse.jdt.internal.compiler.batch.Main.compile(Main.java:1682)
    at org.codehaus.groovy.eclipse.compiler.GroovyEclipseCompiler.compile(GroovyEclipseCompiler.java:243)
    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:678)
    at org.apache.maven.plugin.TestCompilerMojo.execute(TestCompilerMojo.java:161)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.NumberFormatException: For input string: "8000000000000000"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
    at java.lang.Long.parseLong(Long.java:422)
    at org.codehaus.groovy.syntax.Numbers.parseInteger(Numbers.java:215)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.integerExpression(AntlrParserPlugin.java:3184)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.expressionSwitch(AntlrParserPlugin.java:2153)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.expression(AntlrParserPlugin.java:2018)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.expression(AntlrParserPlugin.java:2008)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.expressionSwitch(AntlrParserPlugin.java:2046)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.expression(AntlrParserPlugin.java:2018)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.expression(AntlrParserPlugin.java:2008)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.addArgumentExpression(AntlrParserPlugin.java:3071)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.arguments(AntlrParserPlugin.java:2994)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.constructorCallExpression(AntlrParserPlugin.java:2932)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.expressionSwitch(AntlrParserPlugin.java:2069)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.expression(AntlrParserPlugin.java:2018)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.expression(AntlrParserPlugin.java:2008)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.declarationExpression(AntlrParserPlugin.java:1776)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.variableDef(AntlrParserPlugin.java:1792)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.statement(AntlrParserPlugin.java:1513)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.statementListNoChild(AntlrParserPlugin.java:1599)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.statementList(AntlrParserPlugin.java:1574)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.methodDef(AntlrParserPlugin.java:1045)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.objectBlock(AntlrParserPlugin.java:800)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.innerClassDef(AntlrParserPlugin.java:783)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.classDef(AntlrParserPlugin.java:677)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.convertGroovy(AntlrParserPlugin.java:361)
    at org.codehaus.groovy.antlr.AntlrParserPlugin.buildAST(AntlrParserPlugin.java:269)
    at org.codehaus.groovy.control.SourceUnit.convert(SourceUnit.java:302)
    at org.codehaus.groovy.control.CompilationUnit$3.call(CompilationUnit.java:706)
    at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:992)
    ... 35 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:47:19.340

我很惊讶这在 Java 中编译，因为 0x8000000000000000L 大于`Long.MAX_VALUE`. 看起来 Java 将其视为无符号值。我建议使用 -0x8000000000000000L 代替，因为它是相同的位值，但属于 long 的合法范围，并且适用于 Java 和 groovy。

编辑：根据[Java 语言规范 §3.10.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)，上面的十进制文字`Long.MAX_VALUE`是非法的，但十六进制文字*不是*，只要它们适合 64 位。所以这似乎是有效的Java。

# linq - 使用 LINQ 查询带有 Lambda 表达式的 IDictionary

> ID：11418116
> 
> 赞同：2
> 
> 时间：2012-07-10T16:51:41.967
> 
> 标签：linq, linq-to-entities

为什么即使字典在调试时显示正确的键/值对，它也没有返回正确的字符串？

```
IDictionary<string, string> states = 
                   AFS.MvcApplication.UnitedStates.StateDictionary;

string stateAbbrev = 
               states.Where(x => x.Key == State).Select(x => x.Value).ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:59:39.490

你应该使用：

```
string stateAbbrev =  states[State]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:53:22.677

您想使用`FirstOrDefault`而不是`ToString`，因为 的结果`Select`是`IEnumerable<string>`。这应该有效：

```
string stateAbbrev = states.Where(x => x.Key == State).Select(x => x.Value).FirstOrDefault(); 
```

# php - MySQL AES 解密返回值

> ID：11418120
> 
> 赞同：1
> 
> 时间：2012-07-10T16:51:59.973
> 
> 标签：php, mysql, aes

尝试为使用 PHP/MySQL 的客户端开发 AES 加密数据库。插入加密值有效，但无法返回可用的解密值。

```
public static function auth($username="", $password="") {
    global $database;
    $fields = self::$db_fields;
    array_shift($fields);
    $username = $database->escape_value($username);
    $password = $database->escape_value($password);
    $hashed_pwd = sha1($password);
    $join_str = ", '" . AUTH_KEY . "'), AES_DECRYPT(";

    $sql  = "SELECT id, AES_DECRYPT(";
    $sql .=  join($join_str, $fields) . ", '" . AUTH_KEY . "') FROM " . self::$table_name. " ";
    $sql .= "WHERE u_name = AES_ENCRYPT('{$username}', '" . AUTH_KEY . "') ";
    $sql .= "AND u_pwd = AES_ENCRYPT('{$hashed_pwd}', '" . AUTH_KEY . "') ";
    $sql .= "LIMIT 1"; 
```

使用以下查询：

```
 $query_result = $database->query($sql);
    $result_array = $database->fetch_array($query_result); 
```

}

回报：

```
 Array ( 
        [0] => 5 
        [id] => 5 
        [1] => a_user_name 
        [AES_DECRYPT(user_name, '[PRINTS FULL AUTH KEY]')] => a_user_name 
        [2] => 0000hashedpasswordstring00000 
        [AES_DECRYPT(user_pwd, '[PRINTS FULL AUTH KEY]')] => 0000hashedpasswordstring00000  
        [3] => sample@email.com 
        [AES_DECRYPT(user_email, '[PRINTS FULL AUTH KEY]')] => sample@email.com 
    ) 
```

这是次要解决方案。理想情况下，查询将是面向对象的，但这种方法返回一个包含字段但没有值的数组。

显然，在结果中传输完整的身份验证密钥完全违背了加密的目的。困惑为什么它返回一个组合的关联/索引数组，而不仅仅是一个索引数组，或者只是一个关联数组。SQL 语法中是否有会返回`[user_email] => sample@email.com` 而不是 的 更改`[AES_DECRYPT(user_email, '[PRINTS FULL AUTH KEY]')] => sample@email.com`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:58:22.857

您需要为包含该函数的列使用别名：

```
$sql  = "SELECT id, AES_DECRYPT(";
$sql .=  join($join_str, $fields) . ", '" . AUTH_KEY . "') AS user_email FROM " . self::$table_name. " ";
$sql .= "WHERE u_name = AES_ENCRYPT('{$username}', '" . AUTH_KEY . "') ";
$sql .= "AND u_pwd = AES_ENCRYPT('{$hashed_pwd}', '" . AUTH_KEY . "') ";
$sql .= "LIMIT 1"; 
```

[来自SELECT](http://dev.mysql.com/doc/refman/5.0/en/select.html)的 MySQL 文档：

> 可以使用 AS alias_name 为 select_expr 指定别名。别名用作表达式的列名，可用于 GROUP BY、ORDER BY 或 HAVING 子句。例如：
> 
> SELECT CONCAT(last_name,', ',first_name) AS full_name FROM mytable ORDER BY full_name;

像这样的加密通常在应用程序中完成，而不是在 MySQL 中。在 MySQL 中完成后，密钥最终会出现在 MySQL 日志中。

# oauth-2.0 - cvc-elt.1：找不到元素“oauth-config”的声明。[2]

> ID：11418128
> 
> 赞同：0
> 
> 时间：2012-07-10T16:52:22.397
> 
> 标签：oauth-2.0, joauth

我已经开始实施 Joauth 身份验证。当然，现在我正在复制粘贴以了解它是如何工作的。

目前我面临问题“cvc-elt.1：找不到元素'oauth-config'的声明。[2]”

我采用了参考 URL，该 URL 位于下方。

*   [JOAuth，一个基于 Java 的 OAuth 1（最终版）和 OAuth 2（草案 10）库。我该如何使用它？](https://stackoverflow.com/questions/4376612/joauth-a-java-based-oauth-1-final-and-oauth-2-draft-10-library-how-do-i-us)

oauth-config.xml 代码片段

```
<?xml version="1.0" encoding="UTF-8" ?>
<oauth-config>
 <!-- Twitter OAuth Config -->
 <oauth name="twitter" version="1">
  <consumer key="TWITTER_KEY" secret="TWITTER_SECRET" />
  <provider requestTokenUrl="https://api.twitter.com/oauth/request_token" authorizationUrl="https://api.twitter.com/oauth/authorize" accessTokenUrl="https://api.twitter.com/oauth/access_token" />
 </oauth>

 <!-- Facebook OAuth -->
 <oauth name="facebook" version="2">
  <consumer key="APP_ID" secret="APP_SECRET" />
  <provider authorizationUrl="https://graph.facebook.com/oauth/authorize" accessTokenUrl="https://graph.facebook.com/oauth/access_token" />
 </oauth>

 <service path="/request_token_ready" class="com.neurologic.music4point0.oauth.TwitterOAuthService" oauth="twitter">
  <success path="/start.htm" />
 </service>

 <service path="/oauth_redirect" class="com.neurologic.music4point0.oauth.FacebookOAuthService" oauth="facebook">
  <success path="/start.htm" />
 </service>
</oauth-config> 
```

你能帮忙看看这里有什么问题吗？我认为我们需要添加“dtd”文件。你能在这里给我建议吗？如果您需要任何其他信息，请建议我。

真的很可观，Pradeep

# ajax - 处理完操作后如何在 Grails 中查看和过滤响应？

> ID：11418132
> 
> 赞同：2
> 
> 时间：2012-07-10T16:52:53.887
> 
> 标签：ajax, json, grails, groovy

我正在尝试使用过滤器更改我的 Grails 1.3.7 应用程序中的 JSON 响应，但它们没有按我预期的方式工作。我想做的是`render myobject as JSON`在我的操作中使用类似的东西，然后在过滤器中做这样的事情：

```
jsonPostProcess(controller:'json', action:'*') {
    after = {
        if (myCustomLogicHere) {
            return false // render empty string
        } else if (more logic) {
            // write something else to the response
        }
    }
} 
```

`after`实际发生的是响应在块执行之前被发回。也是如此`afterView`。

有没有办法完成我正在尝试做的 Grails 方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:46:49.553

`myobject`从控制器返回，然后`render`从过滤器调用，例如：

```
class JsonController {

    someAction = {

        ...
        myobject
    }
} 
```

和

```
jsonPostProcess(controller:'json', action:'*') {
    after = {

        myobject ->

        if (myCustomLogicHere) {
            return false // render empty string
        } else if (more logic) {
            // write something else to the response
        }

        render myobject as JSON
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T16:14:08.823

@JonoB 的答案几乎是正确的：

从控制器返回 myobject，然后从过滤器调用渲染，例如：

```
class JsonController {
    someAction = {
         //...some logic
         return [myobject: myobject]
    }
} 
```

并在过滤器中

```
jsonPostProcess(controller:'json', action:'*') {
    after = {
        Map model ->
            //... my custom logic here
            render model.myobject as JSON
            return false
    }
} 
```

# php - 解析JSON字符串时PHP中未定义的索引错误

> ID：11418135
> 
> 赞同：1
> 
> 时间：2012-07-10T16:53:10.873
> 
> 标签：php, jquery, ajax, cordova, jsonp

我有这样的 HTML 文件：

```
<script>
$(document).ready(function () {
   $("#btn").click( function() {
     var id = $('#id').val();
     var name =  $('#name').val();
     var Address = $('#Address').val();
     $.ajax({
        url: "http://localhost/connection.php",
        type: "POST",
        data : { topost: JSON.stringify({id: id, name: name, Address: Address}) },
        //I ASSUME HERE IM PASSING MY THREE FIELDS id, name and Address 
        //IN A STRING CALLED 'TOPOST' TO MY FILE CONNECTION.PHP
        //WHICH IS HOSTED ON MY LOCALHOST, IM USING XAMPP.
        datatype: "jsonp",
        success: function (status) {
            if (status.success == false) {
                alert("Failure!");
            }
            else {
                alert("Success!");
            }
        }
     });
     return false;
   });
});
</script> 
```

现在，在`connection.php`我的本地主机上托管的文件中，我正在尝试读取这三个字段，以便我可以将所有三个字段放入数据库（MySQL）中。

但是，我得到的错误是：

```
Connected to database!<br />
<b>Notice</b>:  Undefined index: topost in <b>C:\xampp\htdocs\connection.php</b> on line <b>27</b><br />
<br />
<b>Notice</b>:  Undefined index: topost in <b>C:\xampp\htdocs\connection.php</b> on line <b>29</b><br /> 
```

### 我的问题是：

为什么'topost'未定义？我如何`connection.php`理解我正在从名为“topost”的变量中的 HTML 文件中发送 JSON 数据？

因此，请仔细阅读以下 PHP 文件并提出错误建议。

### 服务器端 PHP 文件：

```
<?php
    header('Content-type: application/json');
    header('Access-Control-Allow-Origin: *');
    $server = "localhost";
    $username = "root";
    $password = "";
    $database = "jqueryex";
    $con = mysql_connect($server, $username, $password);
    if($con) { echo "Connected to database!"; }
    else { echo "Could not connect!"; }
    //or die ("Could not connect: " . mysql_error());
    mysql_select_db($database, $con);
    $posteddata = $_POST['topost'];
    $thedata= json_decode($_POST['topost']);
    echo ($thedata);
    mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:02:49.667

您的`POST`正文需要进行 url 编码，而不是 JSON 格式。请参阅以下问题：

[Javascript 对象的查询字符串编码](https://stackoverflow.com/questions/1714786/querystring-encoding-of-a-javascript-object)

以下是更多信息和 POST 正文示例：

[http://www.jmarshall.com/easy/http/#postmethod](http://www.jmarshall.com/easy/http/#postmethod)

因此，在您的情况下，您的代码应如下所示：

```
$.ajax({
    url: "http://localhost/connection.php",
    type: "POST",
    data: $.param({
        topost: encodeURIComponent(
            JSON.stringify({id: id, name: name, Address: Address})
        )
    });
    datatype: "jsonp",
    success: function (status) {
        if (status.success == false) {
            alert("Failure!");
        } else {
            alert("Success!");
        }
    }
}); 
```

附加说明：您指定`"jsonp"`为数据类型，这意味着您的脚本应将对象响应包装在与 jsonp 工作方式一致的函数调用中。另一种选择是在您的 PHP 响应中添加一个 CORS 标头（Access-Control-Allow-Origin），以允许 `XMLHttpRequest`在支持`Origin`检查 CORS 的浏览器中连接到它。

`jQuery.ajax()`有关JSONP 数据类型的更多信息，请参阅文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# asp.net - VB.NET - 比较两个字母的代码

> ID：11418142
> 
> 赞同：0
> 
> 时间：2012-07-10T16:53:28.253
> 
> 标签：asp.net, vb.net, string, comparison

我有一个 ASP.NET 4.0 应用程序。在应用程序中，我们希望允许用户选择他们已阅读的文档的修订版本。

现在代码大致如下：

AA AB AC BA BB BC

在这种情况下，AA 是修订版 1，BC 是修订版 6。

我想要做的是检查用户在文本框中输入的值是否为**当前版本或更低版本。**

这就像字符串比较一样简单，还是还有更多？我正在考虑使用 CustomValidator 和服务器端代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:15:49.310

这听起来不像一个简单的字符串比较会做到这一点：使用上面的示例，“AZ”将在“BC”之前排序。因此，从排序的角度来看，它会被认为是“较早的”，但可能不是用户选择的有效值。

如果您知道手头文档的所有有效修订，您最好确认用户的值在列表中。或者甚至让他们（通过 DropDownList）只选择有效值，而不是让他们输入任何 ol' 字符串。

# windows-phone-7 - Azure 对 Windows Phone 进行排队

> ID：11418143
> 
> 赞同：0
> 
> 时间：2012-07-10T16:53:29.670
> 
> 标签：windows-phone-7, azure

我在 Windows Phone 7 上从队列中检索 Azure 消息时遇到问题。

要添加消息，我正在使用这样的代码：

```
var queueClient =  CloudStorageContext.
                       Current.
                       Resolver.
                       CreateCloudQueueClient() as CloudQueueClient;
var queue = queueClient.GetQueueReference("queuein");

queue.Create(
    r => queue.AddMessage(
             new CloudQueueMessage { AsBytes = Encoding.UTF8.GetBytes(msg) },
             c =>
             {
                 // Some logic here.
             })); 
```

要取回消息，看起来我必须遵循类似的原则并使用队列实例。但是`GetMessage()`方法有 VOID 返回类型：

![打印问题的屏幕](../Images/0b2abc6ae1af70914e1a74620f1b7d09.png)

你们能帮我理解移动版 Azure 队列到底发生了什么吗，因为在 Windows 控制台应用程序中，这些方法具有返回类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T18:45:12.997

手机上的异步模式有点不同。您需要在回调函数中处理消息。

```
 ShowAmWorkingInUILol = true;      
    // snip
    queue.GetMessage(TimeSpan.FromMinutes(1), OnMessageReturned);
}

private void OnMessageReturned(CloudOperationResponse<CloudQueueMessage> response)
{
    ShowAmWorkingInUILol = false;
    // here's your response.
} 
```

# jquery - 在 URL 中添加自己的哈希会破坏 jQuery Mobile？

> ID：11418149
> 
> 赞同：0
> 
> 时间：2012-07-10T16:53:47.163
> 
> 标签：jquery, jquery-mobile, browser-history, fragment-identifier, hashbang

我想在 URL 中使用我自己的哈希参数，但是当我这样做时，jQuery Mobile 站点不再工作。只是一个带有无尽旋转器的空白屏幕。使用 jQuery Mobile 时，哈希对我来说是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:07:32.887

如果您需要将参数传递给内部/嵌入式页面，jQuery Mobile 不支持此功能。但是有两个插件可以让你这样做：

*   [https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params)
*   [https://github.com/azicchetti/jquerymobile-router](https://github.com/azicchetti/jquerymobile-router)

我建议您阅读有关 jQuery Mobile 导航模型的官方文档：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html)

“已知限制”部分提到了这两个插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:07:51.437

您必须禁用 hashstate 插件。我不熟悉这样做，但我认为你可以这样做：

```
$(window).bind('hashchange', function (event) {
    event.stopImmediatePropagation();
}); 
```

基本上，jQuery Mobile 侦听此事件并在此事件的事件处理程序触发时转换到页面。

> 独立于单击发生的哈希更改，例如当用户单击后退按钮时，通过 hashchange 事件进行处理，该事件使用 Ben Alman 的 hashchange 特殊事件插件（包含在 jQuery Mobile 中）绑定到窗口对象。当哈希更改发生时（以及第一页加载时），hashchange 事件处理程序会将 location.hash 发送到 $.mobile.changePage() 函数，该函数依次加载或显示引用的页面。

*来源：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html)*

# javascript - JavaScript 和 HTML 图像映射

> ID：11418156
> 
> 赞同：3
> 
> 时间：2012-07-10T16:53:57.980
> 
> 标签：javascript, jquery, html

我正在为我的医生制作一个小型网络应用程序，并希望使这张图片的圆圈可点击。当他们用户点击一个它应该改变颜色。我想我会用 Jquery 和 HTML 图像映射来做到这一点，但我想知道是否有人对如何实现这一点有某种想法？

谢谢！

![主图](../Images/5eb6e7d805140ae9f8c9abde4fc5a968.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:10:16.453

查看我的实现：http: [//jsfiddle.net/riateche/NTkmV/](http://jsfiddle.net/riateche/NTkmV/)

您应该将背景图像替换为相同的没有圆圈。`circles`您应该用圆的坐标（和可选半径）填充数组。我只添加了 4 个圈子。

HTML：

```
<div id="container">
    <img src="http://i.stack.imgur.com/cQdo2.png">
</div> 
```

CSS：

```
#container { position: relative; }
.circle {
    width: 10px;
    height: 10px;
    position: absolute;
    border: 3px solid green;
    border-radius: 100%;
}

.circle.on {
  border-color: red;  
} 
```

JavaScript：

```
var circles = [
  //each item contains x, y and optional size
  [93, 81, 18],
  [44, 173, 18],
  [108, 69],
  [134, 77]
];

$(circles).each(function() {
  console.log("ok");
  var obj = $("<div/>");
  obj.addClass("circle");
  obj.css("left", this[0]);    
  obj.css("top", this[1]);   
  if (this[2]) {
    obj.width(this[2]);
    obj.height(this[2]);
  }
  $("#container").append(obj);  
});

$(document).on("click", ".circle", function(e) {
 $(e.target).toggleClass("on");   
}); 
```

# java - 调用 HSSF 序列化程序调用

> ID：11418160
> 
> 赞同：0
> 
> 时间：2012-07-10T16:54:17.183
> 
> 标签：java, xls, apache-cocoon

我必须编写一个非常大的 XLS 文件，我尝试过 Apache POI，但它占用了太多内存供我使用。

我快速浏览了 StackOverflow，发现了一些对 Cocoon 项目的引用，特别是 HSSFSerializer。似乎这是一种将 XLS 文件写入磁盘的内存效率更高的方法（根据我的阅读，如果我错了，请纠正我！）。

我对这里描述的用例感兴趣：http: [//cocoon.apache.org/2.1/userdocs/xls-serializer.html](http://cocoon.apache.org/2.1/userdocs/xls-serializer.html)。我已经编写了代码来以格式写出文件`Gnumeric`，但我似乎无法找到如何调用将`HSSFSerializer`其转换为 XLS。

进一步阅读，Cocoon 项目似乎是一种网络框架。我很可能会叫错树，但是：

您能否提供一个读取文件、在其`HSSFSerializer`上运行并将该输出写入另一个文件的示例？从文档中不清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:32:26.303

我不知道您所说的“XLS”是指在 Office 2007 之前的特定版本的这种“可怕的电子表格格式”（这是 HSSF 的意思），还是您可以使用最新版本的 MS Office 打开的任何内容， 开发办公室， ...

因此，根据您的客户要求（即那些将打开您的 Excel 文件的要求），可能还有另一个选项可用：生成**.XLSX**文件。

它归结为以**适当的语法生成 XML 文件**，这似乎适合您的情况，因为您似乎已经使用基于 XML 的 Gnumeric 文件格式完成了该操作，没有技术问题，也没有遇到内存效率问题。

请注意 Excel 和其他客户端可以使用的其他基于 XML 的电子表格格式。您可能想深入研究打开的文档文件格式。

* * *

至于是否使用 Apache Cocoon 或其他东西：

*   Cocoon 可以肯定地承载 XSL 处理；如果您需要 Cocoon，可以使用批处理（Cocoon CLI）处理，但要求它不要作为 web 应用程序运行（尽管据我所知，CLI 功能在 2.1 系列的最新版本中被破坏）；并且 Cocoon 带有大量可以满足更多需求的特性和技术。
*   如果只是归结为运行 XSL 转换，Cocoon 可能有点矫枉过正，您可以从中选择一堆众所周知的更轻量级的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:06:59.990

我的朋友，HSSF 序列化器是 POI 的一部分。您只是在要序列化的 xml 中设置某些属性（但您需要一个完整的过程来创建它）。此外，使用此框架设置整个管道来创建 XLS 似乎很奇怪，因为它会更改应用程序的架构。¿ 这是你的决定吗？

从文档：

> 生成电子表格的另一种方法是通过 Cocoon 序列化程序（但您仍将间接使用 HSSF）。使用 Cocoon，您可以通过简单地应用样式表并指定序列化程序来序列化任何 XML 数据源（例如，可能是用 SQL 输出的 ESQL 页面）。

如果内存有问题，请在 POI 中尝试 XSSF 或 SXSSF。

# bash - 在文件中设置 suid 运行 bash 脚本

> ID：11418161
> 
> 赞同：4
> 
> 时间：2012-07-10T16:54:27.497
> 
> 标签：bash, suid

我写了一个小 bash 脚本来测试 suid 权限

```
$ cat phone.sh
#!/bin/sh
echo "abc" >> out.txt

$ ls -l out.txt phone.sh
-rw-r--r-- root wzj      ...         out.txt
-rwsr-xr-x root wzj      ...         phone.sh

$ ./phone.sh
./phone.sh: 2: cannot create out.txt: Permission denied 
```

为什么？我以为我已经设置了suid权限，所以我可以以root权限运行phone.sh来修改out.txt文件，但我失败了。谁能告诉我我哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:09:52.153

大多数 *nix 操作系统不允许脚本使用 SUID。查看Vidar关于该主题[的博客条目。](http://www.vidarholen.net/contents/blog/?p=30)Perl 脚本可以使用 SUID，但正如 Vidar 解释的那样，这是由于 Perl 是如何实现的。看来 Bash 脚本根本无法使用 SUID 运行。抱歉，我没有对你更有用的答案，看起来这只是“事情是怎样的”。

# exchangewebservices - EWS - 未随邀请发送的附件

> ID：11418163
> 
> 赞同：1
> 
> 时间：2012-07-10T16:54:29.273
> 
> 标签：exchangewebservices, ews-managed-api, appointment

我在使用 EWS 托管 API 发送带有邀请的附件时遇到问题。约会与会者没有收到添加到约会的任何附件，但附件确实出现在创建约会的人的日历中。

这是我的代码片段：

```
try
{
    ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP1, TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time"));
    service.Credentials = new WebCredentials("calendar_user", "password1", "acme");
    service.Url = new Uri("https://acme.com/EWS/Exchange.asmx");

    Appointment appointment = new Appointment(service);
    service.ImpersonatedUserId = new ImpersonatedUserId(ConnectingIdType.SmtpAddress, "tin.tin@acme.com");

    String UID = "D09F3FF6-1461-414C-89E8-C05BC3B66A4A";
    appointment.ICalUid = UID;
    appointment.Subject = "Test Subject";
    appointment.Body = "Test Content.";
    appointment.Start = new DateTime(2012, 07, 11, 17, 00, 0);
    appointment.End = appointment.Start.AddMinutes(30);

    FileAttachment attachment = appointment.Attachments.AddFileAttachment(@"C:\Users\tintin\Documents\Test.xlsx");
    attachment.IsInline = false;

    appointment.RequiredAttendees.Add("tin.tin@acme.com");

    appointment.Save(SendInvitationsMode.SendToAllAndSaveCopy);
}
catch (Exception ex)
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:00:36.940

看起来 EWS 在附件处理方面有可怕的限制。我找到了解决此问题的解决方法，该问题需要两次更新约会对象。

```
appointment.ICalUid = UID;
appointment.Subject = "Test Subject";
appointment.Body = "Test Content.";
appointment.Start = new DateTime(2012, 07, 11, 17, 00, 0);
appointment.End = appointment.Start.AddMinutes(30);

FileAttachment attachment = appointment.Attachments.AddFileAttachment(@"C:\Users\tintin\Documents\Test.xlsx");
attachment.IsInline = false;

appointment.Save(folderCalendar, SendInvitationsMode.SendToNone);
appointment.RequiredAttendees.Add("tin.tin@acme.com");

appointment.Update(ConflictResolutionMode.AutoResolve, SendInvitationsOrCancellationsMode.SendToAllAndSaveCopy); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T15:31:32.353

看起来这个问题是 Exchange Server 2010 Service Pack 1 特有的。我遇到了类似的问题，当我将版本更改为 SP2 时，问题得到了解决。下面的代码解决了问题

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T09:34:15.960

第二次更新起到了作用，但它会导致底部的会议被取消。不能在产品中使用。将版本更改为 SP2 不起作用。

Still find a better solution.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-04T13:24:28.350

Yes, EWS has some issue, while updating the meeting with new attachments it is not getting updated for the first time. Needed 2 instances to update it.

```
Microsoft.Exchange.WebServices.Data.Appointment meet1 = await 
Microsoft.Exchange.WebServices.Data.Appointment.Bind(service, strMessageID);
                                meet1.Attachments.Clear();
                                foreach (FileUpload Item in 
objCreateEvent.strAttachmentUploadPath)
                                {
                                    meet1.Attachments.AddFileAttachment(Item.fileName, 
Item.filePath);
                                }
                                meet1.RequiredAttendees.Clear();
                                foreach (string ToItem in objToIds)
                                {
                                    meet1.RequiredAttendees.Add(ToItem);
                                }
                                await 
meet1.Update(ConflictResolutionMode.AlwaysOverwrite, 
SendInvitationsOrCancellationsMode.SendToAllAndSaveCopy);
                                Microsoft.Exchange.WebServices.Data.Appointment 
meeting2 = await Microsoft.Exchange.WebServices.Data.Appointment.Bind(service, 
strMessageID);
                                meeting2.Attachments.Clear();
                                foreach (FileUpload Item in 
objCreateEvent.strAttachmentUploadPath)
                                {

meeting2.Attachments.AddFileAttachment(Item.fileName, Item.filePath);
                                }
                                meeting2.RequiredAttendees.Clear();
                                foreach (string ToItem in objToIds)
                                {
                                    meeting2.RequiredAttendees.Add(ToItem);
                                }
                                await 
meeting2.Update(ConflictResolutionMode.AlwaysOverwrite, 
SendInvitationsOrCancellationsMode.SendToAllAndSaveCopy); 
```

# php - 将 index.php 与包含和文件夹一起使用，而不是命名的 php 文件

> ID：11418165
> 
> 赞同：3
> 
> 时间：2012-07-10T16:54:39.207
> 
> 标签：php, mysql, apache, mod-rewrite

假设我有一个用户数据库并且不想使用 get 获取 id (user.php?i=234) 并且想要使用文件夹和 index.php(s) 代替 (user/234)

我可以通过在用户注册时在该文件夹中创建一个新文件夹和 index.php 文件来做到这一点。我可以在 index.php 文件 ( `include '/users.php'`) 中添加一个包含并调用构建页面的函数 ( `buildUserPage(234);`)

这是最好的方法吗？

如果 234 是用户 ID，如何根据父文件夹获取用户 ID？

如何检查页面的 url 是否为 index.php，以便我可以重定向到“../”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:31:51.320

在用户目录的 .htaccess 文件中，放置以下内容：

```
RewriteEngine On
RewriteRule ^(\d+)/?$ ../users.php?i=$1 [QSA,L] 
```

对于您的问题目录 .htaccess 文件，请尝试以下操作：

```
RewriteEngine On
RewriteRule ^(\w+)?/?(\d+)?/?$ ../question.php?l=$1&i=$2 [QSA,L] 
```

# javascript - 日期时间属性元素

> ID：11418171
> 
> 赞同：1
> 
> 时间：2012-07-10T16:55:10.767
> 
> 标签：javascript, jquery, html

我有一系列时间元素：

```
[ <time class=​"end" datetime>​&lt;/time>​ , 
<time class=​"end" datetime=​"2011-12">​Dec 2011​&lt;/time>​ , 
<time class=​"end" datetime=​"2010-01">​Jan 2010​&lt;/time>​ , 
<time class=​"end" datetime=​"2009-01">​Jan 2009​&lt;/time>​ , 
<time class=​"end" datetime=​"2006-12">​Dec 2006​&lt;/time>​ , 
<time class=​"end" datetime=​"2006-05">​May 2006​&lt;/time>​ ] 
```

可以从 jQuery 语句中选择：

```
$('.workexperience .company .position > time.end') 
```

如果当前月份和日期为空白，我正在尝试填充结束日期时间和 InnerHTML，但在选择`<time>`标记的日期时间属性时遇到困难。

*   如何检查日期时间属性是否为空？和
*   那么我该如何填写文本呢？

我有这个功能来帮助获取当前日期并将其放入月份年份（月份，YYYY）格式。并且可以对其进行调整以获取日期时间属性的数字格式，只是不知道如何使用 JQuery 选择它们。

```
function getCurrentDate() {
var d = new Date();
var m = new Array(7);
var y = d.getFullYear();
m[0] = "January"; m[1] = "February"; m[2] = "March"; m[3] = "April"; m[4] = "May"; m[5] = "June"; m[6] = "July"; m[7] = "August"; m[8] = "September"; m[9] = "October"; m[10] = "November"; m[11] = "December";
return m[d.getMonth()] + ", " + y; 
};` 
```

一如既往，感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:00:25.667

只需使用以下[`.attr()`方法](http://api.jquery.com/attr/)：

```
var ends = $('.workexperience .company .position > time.end');
ends.attr("datetime", function(i, d) {
    if (!d) // empty
        return getCurrentDate();
    return d;
}); 
```

...或者，甚至更好的[`.prop()`方法](http://api.jquery.com/prop/)：

```
ends.prop("dateTime", function(i, d) {...}); 
```

# javascript - 使用 javascript“随机引用”脚本，但跨越两个单独的元素

> ID：11418177
> 
> 赞同：0
> 
> 时间：2012-07-10T16:55:43.557
> 
> 标签：javascript, css, random, hyperlink

我正在尝试通过编写一个基本网站（使用 Twitter Bootstrap）来自学一点 javascript，该网站随机引用古腾堡计划小说中的一句话，对其进行一些讨论，然后页面下方有一个链接可以直接访问到古腾堡计划的小说。

我已经使用这个[JavaScript 源脚本](http://www.javascriptsource.com/miscellaneous/simple-text-rotate.html)取得了很好的效果......对于报价本身。但是当涉及到链接第二个元素时——引用书的链接——按钮中的文本不会出现。

HTML 看起来像这样：

```
<div class="childquote">
                <p>
                <span id="ran1">&#8220;Quote from a first novel.&#8221;<br>
                - Bram Stoker, <em>Dracula</em></span>
                <span id="ran2">&#8220;Quote from a second novel.&#8221;<br>
                - Herman Melville, <em>Moby Dick</em></span> 
```

稍后在页面下方，按钮 HTML 如下所示：

```
 <div class="btn pull-right bookbutton">
                <span id="ran1"><a href="http://www.gutenberg.org/ebooks/345">Read the book</a></span>
                <span id="ran2"><a href="http://www.gutenberg.org/ebooks/2701">Read the book</a></span> 
```

...显然，所有适当的 div 都已关闭，等等。

页面的 CSS 将页面上所有随机选项的显示设置为“无”：

```
#ran1,#ran2,#ran3,#ran4,#ran5,#ran6,#ran7,#ran8,#ran9,#ran10,#ran11,#ran12,#ran13,#ran14,#ran15,#ran16,#ran17,#ran18 {
  display:none;
} 
```

JavaScript 本身看起来像这样：

```
function messageLoad() {

  var wch=Math.floor(Math.random()*18+1);
  document.getElementById('ran'+wch).style.display='inline';
}

function addLoadEvent(func) {
  var oldonload = window.onload;
  if (typeof window.onload != 'function') {
    window.onload = func;
  } else {
    window.onload = function() {
      if (oldonload) {
        oldonload();
      }
      func();
    }
  }
}

addLoadEvent(function() {
  messageLoad();
}); 
```

**据我了解，因为我根本**不懂 JavaScript ，所以 JavaScript 会以某种方式“停用”随机选择的“ranXX”的“display:none”CSS，以便第一部分 - 引用 - 将显示好像没有为该随机数设置“显示：无”。

但是为什么同样的逻辑不适用于链接呢？我得到了随机引用就好了，但按钮文本根本没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:00:38.040

该函数被调用`getElementById`，因此它最多只会返回一个元素。实际上，ID 在页面上应该是唯一的——这就是 ID 的概念。

您可以为链接 ID 提供一个词缀（例如`ran1link`），以便它们*是*唯一可识别的，并将两个元素都设置`display`为`inline`。

请注意，您的`window.onload`技巧并不是真正必要的。有`addEventListener`可以将多个功能附加到一个事件。这样您就不会与其他代码添加`onload`功能发生冲突。

# eclipse - 日食的铬？

> ID：11418183
> 
> 赞同：14
> 
> 时间：2012-07-10T16:55:56.960
> 
> 标签：eclipse, google-chrome, ide, developer-tools, chromebook

我使用 eclipse IDE 开发我的 GWT 和 android 应用程序。我想为我的主要开发计算机过渡到 chromebook，但我不知道如何“安装”eclipse。没有 chrome app 版本的 eclipse，至少我找不到。我确实看到 chrome 商店中还有其他 IDE，但我认为它们不会拥有 eclipse 为谷歌开发人员提供的所有漂亮的帮助插件。有人知道 chrome 版本的 Eclipse 是否即将推出？其他人是否和我一样渴望在 chrome book 上进行开发？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T17:17:27.493

Eclipse 不会出现在 Chrome OS 上。您需要一个 JVM 来运行它，并且需要一个用于 UI 小部件的兼容桌面。因此，您必须从 Chrome OS 桌面逃到基础 Linux 并以某种方式启动常规 Linux 桌面（如 GTK）才能运行 Eclipse。此外，典型的 chromebook 功能太弱，无法运行完整的 IDE。

以下是一些需要考虑的选项：

1.  [Project Orion](http://www.eclipse.org/orion/) - 来自许多开发 Eclipse 的人的基于 Web 的 IDE。目标之一是为 iOS、Android、Chrome OS 等平台启用类似 Eclipse 的功能。它已经有相当多的基本 IDE 功能，但还没有很多插件。如果有的话，可能暂时不会看到像 ADT 这样复杂的东西。谷歌必须在 JavaScript 中实现 Android 模拟器。这不是一件容易的事。
2.  在另一台机器上运行 Eclipse 并使用 chromebook 中的远程桌面。
3.  在另一台机器或云服务器上运行 Eclipse Che 并使用 Chrome

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-12T10:14:19.370

我能够做到的最直接和最透明的方式是做一些事情的组合（其中一些在以前的答案中提到过）：

*   安装[crouton](https://github.com/dnschneid/crouton/blob/master/README.md)（与 ubuntu chroot 一起）——这不是双启动，而是与 Chrome OS 并排运行 Ubuntu，只是在两个窗口系统之间交替运行。

*   安装[crouton chrome 扩展和 xiwi](https://github.com/dnschneid/crouton/blob/master/README.md#prerequisites) - 这可以在 ubuntu chroot 中将 X11 窗口作为本机 Chrome OS 窗口运行，可以轻松切换到该窗口。

*   在 ubuntu chroot 中安装 JDK。

*   下载、挂载并执行[eclipse-installer](http://www.eclipse.org/downloads/download.php?file=/oomph/epp/mars/R/eclipse-inst-linux64.tar.gz&mirror_id=1135)。

*   一旦安装了选择的 eclipse 发行版，为方便起见，我将主 eclipse 可执行文件符号链接到`/usr/local/bin/eclipse`并能够通过`crouton`/从 Chrome OS 运行它`xiwi`：`sudo startxiwi eclipse`

这是完成后的屏幕截图：

[![通过 crouton 和 xiwi 在 chromeos 上进行日食](../Images/a3310bcb09f16872df997512e2c59668.png)](https://i.stack.imgur.com/WUOpY.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T17:12:09.383

Eclipse 需要一个 JVM（甚至可能是一个成熟的 JDK），所以没有办法把它变成一个 Chrome 应用程序。您可以启用开发人员模式并尝试安装 Linux JDK，因为 Chrome 似乎在后台运行 Linux。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T06:57:09.080

其他人是否和我一样渴望在 chrome book 上进行开发？

解决方案是加载一个普通的 linux 发行版并从那里运行 IDE。我正在使用带有英特尔 n260、1G 内存、1.6G Hz 的上网本。NetBeans 运行良好。chromebook 的运行速度要快两倍以上，我相信它会足够好。

至于如何加载 linux，[Cr-48 上的 Ubuntu 页面](http://www.chromium.org/chromium-os/developer-information-for-chrome-os-devices/cr-48-chrome-notebook-developer-information/how-to-boot-ubuntu-on-a-cr-48)详细解释了如何加载。还有这个[非常用户友好的关于 arstechnica 的博客](http://arstechnica.com/gadgets/2012/12/how-to-install-ubuntu-on-acers-199-c7-chromebook/)，或者[这个关于 liliputting 的博客](http://liliputing.com/2012/11/how-to-install-ubuntu-12-04-on-the-199-acer-c7-chromebook.html)。他们最终都将您指向[ChrUbuntu](http://chromeos-cr48.blogspot.ca/)，这是一个手动重新打包的 ubuntu，带有一些脚本以简化您的工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-27T21:23:04.347

您可以通过 crouton 安装 ubuntu（更多信息：[https](https://www.youtube.com/watch?v=d_MuVwJq_XQ&list=FLFel7rdB1nWQSjsJCaepEOg&index=1) ://www.youtube.com/watch?v=d_MuVwJq_XQ&list=FLFel7rdB1nWQSjsJCaepEOg&index=1 ）然后您可以安装 eclipse 我不确定您是否可以从android sdk 网站，但您可以从 eclipse 网站、第三方开发人员安装插件，或者如果您真的想从 android sdk 网站下载它，您可能需要一点点努力才能让它工作。：） 享受

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-08T00:21:22.467

是的！我和你一样渴望在 Chromebook 上编程！虽然我还是一名高中生，但我是一名业余 Java 和 Python 程序员。我的学校为每个教室提供了一组大约 30 台 Chromebook，我不知道如何在它们上运行我的代码。我在家里的 Windows 桌面上安装了 Eclipse。

当我在网上环顾四周时，我发现了一个名为[codenvy.io](http://codenvy.io)的东西。它基本上是一个在线运行的 Eclipse Che IDE。它使用 Docker 镜像来启动工作区，在云中运行，免费帐户拥有 3 GB 的 RAM。

它适合我的需要，我喜欢它！你应该检查一下。

# asp.net-mvc - Telerik MVC 网格自定义列图像按钮

> ID：11418188
> 
> 赞同：1
> 
> 时间：2012-07-10T16:56:22.150
> 
> 标签：asp.net-mvc, model-view-controller, telerik, grid

我使用 Telerik MVC Grid，我正在尝试更改自定义列的按钮图像。

```
column.Command(Sub(cmd)
                   cmd.Custom("Editar").ButtonType(GridButtonType.BareImage).HtmlAttributes(New With{ .class="btnDelete"}).DataRouteValues(Sub(route)
                                                                                                                         route.Add(Function(x) x.idPedidoDocumentacao).RouteKey("idPedidoDocumentacao")
                                                                                                                     End Sub).Action("DetalhePedido", "Pedido").SendDataKeys(True)
                            End Sub).Width("5%").Title("Editar") 
```

我在我的 css 文件中创建了一个类：

```
.btnDelete 
```

{

```
background-position:0px 0px;
background:url(/Images/delete.png); 
```

}

谁能帮我解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:33:28.143

您需要覆盖按钮正在使用的背景图像。在 Bare Image 的情况下，它会创建一个像这样的跨度

```
<span class="t-icon t-add" /> 
```

所以你需要在你的 CSS 样式表上创建一个类

```
span.t-icon.t-add{
background-image: ur('yourimagepath');
} 
```

请注意 Telerik 在其图标上使用精灵，因此您也需要覆盖背景位置

# python - pandas：对 DataFrame 行的复杂过滤器

> ID：11418192
> 
> 赞同：95
> 
> 时间：2012-07-10T16:56:37.887
> 
> 标签：python, pandas

我想通过每行的函数过滤行，例如

```
def f(row):
  return sin(row['velocity'])/np.prod(['masses']) > 5

df = pandas.DataFrame(...)
filtered = df[apply_to_all_rows(df, f)] 
```

或者对于另一个更复杂、人为的例子，

```
def g(row):
  if row['col1'].method1() == 1:
    val = row['col1'].method2() / row['col1'].method3(row['col3'], row['col4'])
  else:
    val = row['col2'].method5(row['col6'])
  return np.sin(val)

df = pandas.DataFrame(...)
filtered = df[apply_to_all_rows(df, g)] 
```

*我该怎么做？*

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-07-13T17:33:12.873

您可以使用 来执行此操作`DataFrame.apply`，它沿给定轴应用函数，

```
In [3]: df = pandas.DataFrame(np.random.randn(5, 3), columns=['a', 'b', 'c'])

In [4]: df
Out[4]: 
          a         b         c
0 -0.001968 -1.877945 -1.515674
1 -0.540628  0.793913 -0.983315
2 -1.313574  1.946410  0.826350
3  0.015763 -0.267860 -2.228350
4  0.563111  1.195459  0.343168

In [6]: df[df.apply(lambda x: x['b'] > x['c'], axis=1)]
Out[6]: 
          a         b         c
1 -0.540628  0.793913 -0.983315
2 -1.313574  1.946410  0.826350
3  0.015763 -0.267860 -2.228350
4  0.563111  1.195459  0.343168 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-10T19:35:29.833

假设我有一个 DataFrame 如下：

```
In [39]: df
Out[39]: 
      mass1     mass2  velocity
0  1.461711 -0.404452  0.722502
1 -2.169377  1.131037  0.232047
2  0.009450 -0.868753  0.598470
3  0.602463  0.299249  0.474564
4 -0.675339 -0.816702  0.799289 
```

我可以使用 sin 和 DataFrame.prod 创建一个布尔掩码：

```
In [40]: mask = (np.sin(df.velocity) / df.ix[:, 0:2].prod(axis=1)) > 0

In [41]: mask
Out[41]: 
0    False
1    False
2    False
3     True
4     True 
```

然后使用掩码从 DataFrame 中进行选择：

```
In [42]: df[mask]
Out[42]: 
      mass1     mass2  velocity
3  0.602463  0.299249  0.474564
4 -0.675339 -0.816702  0.799289 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-21T17:31:15.147

指定`reduce=True`也处理空 DataFrame。

```
import pandas as pd

t = pd.DataFrame(columns=['a', 'b'])
t[t.apply(lambda x: x['a'] > 1, axis=1, reduce=True)] 
```

[https://crosscompute.com/n/jAbsB6OIm6oCCJX9PBIbY5FECFKCClyV/-/apply-custom-filter-on-rows-of-dataframe](https://crosscompute.com/n/jAbsB6OIm6oCCJX9PBIbY5FECFKCClyV/-/apply-custom-filter-on-rows-of-dataframe)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-10T12:16:42.777

我无法评论[Dukeworthd 的答案](https://stackoverflow.com/a/11475486/1849463)，但它并不完美。当数据框为空时它会崩溃：

```
df = pandas.DataFrame(columns=['a', 'b', 'c'])
df[df.apply(lambda x: x['b'] > x['c'], axis=1)] 
```

输出：

```
ValueError: Must pass DataFrame with boolean values only 
```

对我来说，这看起来像是 pandas 中的一个错误，因为 { } 绝对是一组有效的布尔值。有关解决方案，请参阅[Roy Hyunjin Han 的回答](https://stackoverflow.com/a/46866045/1720199)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-01-14T19:04:55.740

我发现最好的方法是，而不是使用`reduce=True`来避免空 df 的错误（因为这个 arg 无论如何都被弃用了），只需在应用过滤器之前检查 df size > 0 ：

```
def my_filter(row):
    if row.columnA == something:
        return True

    return False

if len(df.index) > 0:
    df[df.apply(my_filter, axis=1)] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-15T13:15:26.933

您可以使用该`loc`属性对数据框进行切片。

根据 [文档](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html)， `loc`可以有一个`callable function`as 参数。

```
In [3]: df = pandas.DataFrame(np.random.randn(5, 3), columns=['a', 'b', 'c'])

In [4]: df
Out[4]: 
          a         b         c
0 -0.001968 -1.877945 -1.515674
1 -0.540628  0.793913 -0.983315
2 -1.313574  1.946410  0.826350
3  0.015763 -0.267860 -2.228350
4  0.563111  1.195459  0.343168

# define lambda function
In [5]: myfilter = lambda x: x['b'] > x['c']

# use my lambda in loc
In [6]: df1 = df.loc[fif] 
```

如果您想将您的过滤功能`fif`与其他过滤条件相结合

```
df1 = df.loc[fif].loc[(df.b >= 0.5)] 
```

# java - 使用线程安全集合的多线程

> ID：11418193
> 
> 赞同：0
> 
> 时间：2012-07-10T16:56:38.130
> 
> 标签：java, multithreading

我不明白如何使下面的代码片段成为线程安全的。

```
class MapUser {
    Map<String,Integer> map = new ConcurrentHashMap<String,Integer>

    public void addToMap(String str, Integer val){
        if(checkMagicString(str)){
            map.put(str,val);
        }
    }

    private boolean checkMagicString(String str){
        //some logic to check Magic
        //this logic involved operation on the String parameter str i.e. subString,toCharArray etc
    }
} 
```

注意 addToMap 方法被多个线程同时调用。我想确保维护线程安全。通过使用 ConcurrentHashMap，我可以确保线程安全地将值添加到其中。

但是我不明白方法 checkMagicString(String str) 如何保持线程安全？是让它同步的唯一方法吗？还是应该使调用方方法 addToMap 同步？请注意，我没有在 checkMagicString 方法中访问地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:01:10.617

即使你做`checkMagicString`原子，它不会使序列

```
if(checkMagicString(str)){
   map.put(str,val);
} 
```

原子的，因为线程可以在`if`检查和`map.put`调用之间被中断，因此您最终可能会有两个线程插入相同的字符串。您需要锁定整个序列以确保安全。

**编辑**：如果上述行为是可接受的（即两个线程插入相同的键并覆盖值）并且`checkMagicString`不对共享状态进行操作，那么您的代码就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:19:19.910

如果您想要的是原子操作，那么在这种情况下最好的办法是确保 checkMagicStr 是原子的，并在地图上使用原子操作：

```
boolean done = false;
while(!done) {
  Integer oldVal = map.get(str);
  if (checkMagicStr(str) {
    if (oldVal != null) {
      done = value == map.replace(str, val, oldVal); // otherwise try again...
    } else {
      done = null == map.putIfAbsent(str, val); // otherwise try again...
    }
  } else {
    done = true; // there's nothing to do...
  }
} 
```

您可能希望对该 while 循环进行限制，并在它被命中时抛出异常，因为这可能会在高度并发的系统上永远运行。从你的问题中不清楚为什么这一切都是必要的，b/c 你所拥有的将是“线程安全的”，但也许这无论如何都会有所帮助。

# c# - Windows Phone 的 MVVM 设计模式

> ID：11418195
> 
> 赞同：2
> 
> 时间：2012-07-10T16:56:42.867
> 
> 标签：c#, silverlight, windows-phone-7, mvvm

我正在编写一个 Windows Phone 应用程序并计划在其中使用一些 MVVM 想法。
我知道通过命令绑定我可以轻松地分离 UI 和逻辑，但问题是我不知道如何访问控件属性，例如：
我在主页上有一个地图控件，我想要在用户点击的地方显示一个图钉。但是对于 MVVM，我认为无论如何我都做不到。意味着我不能访问地图属性和方法来做这样的事情，对吗？

如果有人对 MVVM 有经验，请分享您关于如何使用控件的属性和方法来执行任务的想法。

（PS 我不想为此应用程序使用 MVVM Light 或任何工具包）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:05:26.900

您正在尝试做的事情 - 将 a 绑定到确定在地图上的何处显示图钉的属性 - 是一个非常具体的用例，这就是地图控件不为此公开属性的原因。

如果您想遵循 MVVM 模式，我建议创建一个用户控件/自定义控件，该控件包装地图控件并公开您可以绑定到的依赖属性。当这个属性改变时，你检查是否有一个图钉添加到地图中，如果没有，添加一个；否则将其移动到正确的位置。

底线是，如果您想按照 MVVM 模式实现解决方案，您需要创建一些自定义控件并公开要绑定的属性。

# c# - Process.Start（字符串）；- 启动过程几秒钟。C＃

> ID：11418196
> 
> 赞同：1
> 
> 时间：2012-07-10T16:56:44.917
> 
> 标签：c#, process, process.start

我有一个 Windows 7（x86）和我的控制台应用程序（C#）。在我的应用程序中，我需要运行一个新进程。应用程序包括：

`Process.Start(filename);`

当应用程序运行时，它会创建一个新进程，但他会在几秒钟后销毁，甚至没有被初始化。在调试中我看到了这个信息：

```
"proc.MainModule" threw exception "System.ComponentModel.Win32Exception"
NativeErrorCode = 299
ExitCode = -3 
```

如果我通过 Windows 运行所需的应用程序 - 它运行。请问，谁能帮帮我？

当它以管理员身份运行时，它具有相同的错误。

关于 `ReadProcessMemory or WriteProcessMemory didn't complete successfully`. 之后我什么也不做`Process.Start();` 这个错误我可以在调试之后看到`var proc = Process.Start(filename);`。

AOgame.exe - 是我的可执行应用程序。这是一个游戏Allods的exe文件。当我尝试执行其他应用程序时，它们开始良好。我认为这是 AOgame.exe 的问题。但我不知道如何消除错误。

在 AOgame.exe 的属性中没有参数。

我认为这是反作弊保护。但是，如果我尝试从 cmd-console 执行它，它将起作用。

**是的！我找到了解决方案！首先 - 创建一个批处理文件，它将执行 AOgame.exe 然后 - 从我的应用程序执行批处理文件** 这是一个奇怪的解决方案，但它可以工作：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:11:20.403

我将建议您使用将 UseShellExecute 设置为 false 的 ProcessStartInfo 实例，如下所示：

```
ProcessStartInfo processInfo = new ProcessStartInfo("AOGame.exe");
processInfo.UseShellExecute = false;

Process.Start(processInfo); 
```

这迫使启动由可执行文件中提供的进程名称直接处理，而不是依赖于 shell/helper 例程。如果您可以提供有关 AOGame.exe 内部功能的更多详细信息，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:11:36.820

如果您的 Windows 开始菜单中有一个工作链接，您可以试试这个：

```
Process.Start("explorer.exe", @"C:\ProgramData\Microsoft\Windows\Start Menu\Programs\foo\bar.lnk"); 
```

...我不放弃:-D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T05:37:51.763

我已经为此工作了一段时间。我发现调试器实际上不理解运行进程的字符串我的意思是你不能这样做

```
Process.start(path); 
```

相反，您可以使用以下代码：

```
 string pathak="AOgame.exe";
       string rty = pathak.Remove(pathak.Length - 5);
       string path = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) + "\\";
       Process.Start(path + rty + "exe"); 
```

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:56:13.763

也许该过程需要工作目录中的一些文件？...

尝试设置工作目录：

```
ProcessStartInfo processInfo = new ProcessStartInfo("foo.exe");
processInfo.WorkingDirectory = @"C:\bar";

Process.Start(processInfo); 
```

# c# - UpdatePanel ASyncPostBack 问题

> ID：11418199
> 
> 赞同：3
> 
> 时间：2012-07-10T16:56:50.600
> 
> 标签：c#, asp.net, .net, ajax

我在 C#/ASP.NET 应用程序中使用 UpdatePanels 时遇到了一些问题。我将首先发布我的代码，然后解释我的问题。

```
<asp:DropDownList ID="ddlSavedAddresses" runat="server" AutoPostBack="true">
<asp:ListItem Selected="True" Value="">Choose from your saved addresses: </asp:ListItem>
</asp:DropDownList>

<asp:UpdatePanel ID="upnlAddress" runat="server">
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="ddlSavedAddresses" EventName="SelectedIndexChanged" />
</Triggers>
 <ContentTemplate>
 <div>
    <div class="minWidth490 topMargin10">
        <fieldset>
        <div>
            <label for="buildingName">Building Name</label>
        </div>
        <div>
            <asp:Textbox runat="server" id="txtBuildingName" CssClass="short" ToolTip="Enter your house name here" />
        </div>
    </div>
  </ContentTemplate>
</asp:UpdatePanel> 
```

以上是我的 .ascx 文件文件。

```
this.ddlSavedAddresses.SelectedIndexChanged += new EventHandler(ddlSavedAddresses_SelectedIndexChanged);

void ddlSavedAddresses_SelectedIndexChanged(object sender, EventArgs e)
{
    // in my code, I have a breakpoint in this method, which is being hit
    this.txtBuildingName.Text = "FOO";
} 
```

我的实际代码有比这更多的字段（我相信你收集到了），但它只是更相同。

如上所述，事件正在触发，并且我在 ddlSavedAddresses_SelectedIndexChanged 中设置的任何断点都被命中。

我还在 this.txtBuidlingName 的 .Text 值上放了一个快速观察，它看起来像预期的那样是“FOO”，但是，网页呈现的文本框的实际值仍然是空白的。

这是我的问题。无论如何，该值保持空白。如果我多次触发该事件（通过更改 DropDownList 的 SelectedIndex），它只会为我触发的每个事件填充一个“，”中的每个字段。

我相信我是短视的，这是微不足道的，但是，我很茫然，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:13:17.360

**从评论区导入**

1.  `upnlAddress.Update();`在 SelectedIndexChanged 事件的末尾添加。
2.  添加`UpdateMode="Conditional"`到您的 UpdatePanel 定义中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:04:30.347

看来您需要调用更新面板的更新方法。尝试这个 ：

```
void ddlSavedAddresses_SelectedIndexChanged(object sender, EventArgs e)
{    
    this.txtBuildingName.Text = "FOO";
     upnlAddress.Update();
} 
```

# java - spring - 设置休眠命名策略不起作用

> ID：11418200
> 
> 赞同：2
> 
> 时间：2012-07-10T16:56:55.357
> 
> 标签：java, spring, hibernate, spring-mvc

我发现（可能）解决我的 Oracle DB 标识符名称问题非常有趣 - > [http://code.google.com/p/hibernate-naming-strategy-for-oracle/](http://code.google.com/p/hibernate-naming-strategy-for-oracle/) 但我很难让它工作使用 Spring MVC 处理我的项目。

尽管我在每个地方都添加了可能，但不知何故 spring 并没有为我的 Hibernate 设置命名策略。

我的**servlet-context.xml 的一部分**

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="oracle.jdbc.OracleDriver"/>
    <property name="jdbcUrl" value="jdbc:oracle:thin:@127.0.0.1:1521:orcl"/>
    <property name="user" value="xxx"/>
    <property name="password" value="xxx"/>
    <property name="maxPoolSize" value="10"/>
    <property name="maxStatements" value="0"/>
    <property name="minPoolSize" value="5"/>
</bean>

<bean id="namingStrategy" class="com.execon.OracleNamingStrategy"/>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="namingStrategy" ref="namingStrategy"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="configLocation" value="classpath:hibernate.cfg.xml"/>
    <property name="packagesToScan" value="com.execon.models"/>
</bean>

<tx:annotation-driven transaction-manager="txManager"/>

<bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

和**hibernate.cfg.xml**

```
<hibernate-configuration>
<session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</property>
    <property name="show_sql">true</property>
    <property name="format_sql">true</property>
    <property name="hibernate.current_session_context_class">thread</property>
    <property name="hibernate.ejb.naming_strategy">com.execon.OracleNamingStrategy</property>
</session-factory>
</hibernate-configuration> 
```

似乎是什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T07:59:11.240

`hibernate.ejb.naming_strategy`以编程方式设置对我有用。

```
configuration.setNamingStrategy(YourNamingStrategy.INSTANCE); 
```

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-programmatic](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-programmatic)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:11:10.440

在检查了你所做的一切都按预期完成的文档后，获取 Spring 和 Hibernate 的源代码，在配置 SessionFactory 及其命名策略的位置放置断点并通过代码进行调试。

# php - 用php发送邮件

> ID：11418201
> 
> 赞同：0
> 
> 时间：2012-07-10T16:57:00.290
> 
> 标签：php

嗨，我已经用 php 验证了一个表单，但代码中似乎有问题。验证后它应该发送一封电子邮件，但它没有。这是我的代码：

```
 $firstName = $_POST["firstName"];
$lastName = $_POST["lastName"];
$email = $_POST["email"];
$message = $_POST["message"];
$to = "fox.team001@gmail.com";
$subject = $firstName . " " . $lastName;
$headers = "From: fox.team001@gmail.com\r\nReply-To: fox.team001@gmail.com";

validate($firstName , $lastName , $email , $message);

function validate ($firstName , $lastName , $email , $message){
    if(!empty($firstName) && !empty($lastName)  && !empty($email) && !empty($message)){
        if(validateEmail($email)){
            $mail_sent = @mail($to , $subject , $message , $headers);
            header('refresh:5;url=http://www.foxteam.net');
        }else{
           header('refresh:0;url=http://www.foxteam.net/contact.php');
        }
    }else{
        header('refresh:0;url=http://www.foxteam.net/contact.php');
    }
}

function validateEmail($email) {
    $pattern = "^[A-Za-z0-9_\-\.]+\@[A-Za-z0-9_\-]+\.[A-Za-z0-9]+$";
    if(preg_match("/{$pattern}/", $email)) {
        return true;
    }else{
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:50:20.790

```
function validate ($firstName , $lastName , $email , $message){
    if(!empty($firstName) && !empty($lastName)  && !empty($email) && !empty($message)){
        if(validateEmail($email)){
            $mail_sent = @mail($to , $subject , $message , $headers);
            header('refresh:5;url=http://www.foxteam.net');
        }else{
           header('refresh:0;url=http://www.foxteam.net/contact.php');
        }
    }else{
        header('refresh:0;url=http://www.foxteam.net/contact.php');
    }
} 
```

您需要包含`$to`和`$headers`作为函数的参数-它们超出了其范围，因此看不到它们。

# javascript - 如何翻转谷歌图表图例的顺序？

> ID：11418203
> 
> 赞同：2
> 
> 时间：2012-07-10T16:57:03.830
> 
> 标签：javascript, google-visualization

目前，我的谷歌饼图显示如下：

![在此处输入图像描述](../Images/98d069d3dbd21316ce8f424c16e3e87b.png)

我将如何切换图例的顺序，以便积极排在第一位？

[我的代码@jsbin](http://jsbin.com/ifaxey/edit#preview)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:25:12.440

在当前的 API 上，这根本不可能。我的解决方案是禁用 API 的图例并使用 css 实现我自己的图例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:08:02.893

尝试这个：

[http://jsbin.com/ifaxey/3/edit](http://jsbin.com/ifaxey/3/edit)

我已经翻转了数组和颜色。

这是你真正想要的吗？

# objective-c - 在子类中重铸属性

> ID：11418205
> 
> 赞同：2
> 
> 时间：2012-07-10T16:57:07.703
> 
> 标签：objective-c, ios, subclassing

我有一个设置，其中我有一个视图类型的层次结构和模型类型的等效层次结构。设置如下：

节点模型/数据：

```
@interface GenericNode : NSObject
//blah blah blah
@end
@interface ShapeNode : GenericNode
//more blah
@end 
```

nodeViews，它将始终接收一个等效类型的节点作为其模型：

```
@interface GenericNodeView : UIView
@property (nonatomic, strong) GenericNode * model;
@end
@interface ShapeNodeView : GenericNodeView
@end 
```

但是，这里的问题是 的类型`model`始终保留为抽象超类，这迫使我每次想要访问子类属性的方法时都对其进行强制转换。

有没有办法重铸类属性，这样`exampleShapeNodeView.model`总是返回一个实例`ShapeNode`等等？

我尝试过自定义访问器方法，例如

```
@interface GenericNodeView : UIView
@property (nonatomic, strong) GenericNode * model;
-(GenericNode *)myModel;
@end
@interface ShapeNodeView : GenericNodeView
-(ShapeNode *)myModel;
@end

//in genericNodeView implementation
-(GenericNode *)myModel{
  return (GenericNode *) self.model;
}

//in shapeNodeView implementation
-(ShapeNode *)myModel{
  return (ShapeNode *) self.model;
} 
```

但调用`[exampleShapeNodeView myModel]`仍然返回一个`GenericNode`；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:10:06.497

我刚刚对此进行了测试，它对我很有用：

在子类中，使用@property 重新声明：

```
@interface GenericNodeView : UIView
@property (nonatomic, strong) GenericNode * model;
@end
@interface ShapeNodeView : GenericNodeView
@property (nonatomic, strong) ShapeNode * model;
@end 
```

您还需要重新@synthesize，但我的 Xcode (4.3.3) 没有抱怨

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:15:22.660

代码对所有的演员都不是“错误的”，它只是让你“感觉”错了。虽然可能有一种代码方式可以在没有 Xcode 抱怨的情况下完成您想做的事情，但您可能会考虑稍微更改设计。

当然，一种方法是只将所有内容设置为 id 类型，然后您可以在所需的对象上调用任何方法，但我猜您不想这样做。

此外，由于您想在视图层次结构中排列视图，我猜您想在它们之间重用逻辑，即经典对象子类化。

您可能会考虑将 getter 和 setter 放在“叶”类上，例如，层次结构中没有任何子级的类。通过这种方式，您可以根据需要使签名变得具体而无需随意转换，并且由于它们不在上层类中，因此您不会遇到名称冲突。我敢打赌，您想留在父类中的逻辑是常见的，因为它为视图提供通用功能，而不是作用于模型的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:06:49.400

制作另一个变量并执行`ShapeNode *anotherVariable = (ShapeNode *) someVariable`

# c# - 将传入数据定向到正在运行的程序

> ID：11418206
> 
> 赞同：0
> 
> 时间：2012-07-10T16:57:09.417
> 
> 标签：c#, windows, xna-4.0

我在 VS2010 中编写了一个 XNA 4.0 解决方案，它可以获取 3D 笛卡尔坐标列表并生成漂亮的 3D 可视化。

定期地，我从 telnet 连接中获得一个流式传输的新坐标列表。我可以重定向 telnet 会话的输出并让它发出一个操作系统命令来启动我的程序，并将新列表作为命令行参数传递。这将启动程序的一个新实例，使其加载所有资产等并渲染场景。

如果我能以某种方式将我的应用程序这些数据传递给当前正在运行的实例，那么我可以消除弹出多个实例并消除每个新实例的资产加载时间，这会更令人兴奋。

我不太确定这样做需要哪些技术或方法。有没有一种简单的方法可以在运行时传递我的 C# 程序一些数据？

我想到的一种方法是将输出重定向到平面文件，并让我正在运行的实例不断检查平面文件是否有更新。不过，我不确定每秒执行 60 次这样的 IO 命中是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:04:05.707

好的，如果你想用尽可能少的改变来做到这一点（即如果你像我一样），我会这样做：

*   我的主要应用程序，大型 XNA 应用程序，我会让它在你知道的端口上启动一个 TCP 服务器，比如 8012
*   我的 telnet 脚本将运行我编写的一个小应用程序并将文本作为参数发送给它
    *   该程序将连接到端口 8012`localhost`并将参数发送到我的应用程序
    *   我的主要 XNA 应用程序会监听它并自动将其添加到它的数据集中

# php - 避免在注册表单php中注入SQL

> ID：11418211
> 
> 赞同：2
> 
> 时间：2012-07-10T16:57:39.630
> 
> 标签：php, mysql, sql, sql-injection

我的本地主机上有一个简单的注册表单（仍在测试中），我想知道它是否会受到 SQL 注入的攻击？

代码：

```
$name = mysql_real_escape_string($_POST['name']);
$password = mysql_real_escape_string($_POST['password']);
$password = md5($password);
$email = mysql_real_escape_string($_POST['email']);
$refId = $_GET['refid'];
$ip = $_SERVER['REMOTE_ADDR'];

$add = mysql_query("INSERT INTO `users` (`name`, `password`, `email`, `refId`, `ip`)
VALUES('$name','$password','$email','$refId', '$ip')") or die(mysql_error()); 
```

那是安全的还是有人可以使用 SQL 注入（我想知道如何）？如何避免注射？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:02:39.820

避免注入的最好方法是使用[Prepared Statements](https://en.wikipedia.org/wiki/Prepared_statement)。
对于准备好的语句，我更喜欢使用 PDO 来处理我所有的数据库内容。这是我为检索一些基本登录信息而编写的一些 PDO 示例代码：

```
$sql=new PDO("mysql:host=127.0.0.1;dbname=name","user","password");
        $user=$_POST[user];

        $query="select Salt,Passwd from User
                where Name=:user";
        $stmt=$sql->prepare($query);
        $stmt->bindParam(':user',$user);
        $stmt->execute();
        $dr=$stmt->fetch();        
        $sql=null; 
        $password=$_POST[pass];
        $salt=$dr['Salt']; 
```

... ETC

阅读[此](http://php.net/manual/en/book.pdo.php)页面以获取有关 PDO 的更多信息。如果您想知道这里的每一行代码在做什么，请阅读我在另一篇文章中给出的答案[。](https://stackoverflow.com/a/7259534/487075)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T17:00:50.567

它确实很脆弱；你还没有逃脱`$_GET['refid']`。以这个网址为例：

```
yourpage.php?refid='%2C'')%3B%20DROP%20TABLE%20users%3B-- 
```

避免 SQL 注入很容易。使用准备好的语句和 PDO。例如：

```
$query = $dbh->prepare("INSERT INTO `users`(`name`, `password`, `email`, `refId`, `ip`)
VALUES(:name, :password, :email, :refId, :ip)");
$query->bindValue(':name', $_POST['name']);
$query->bindValue(':password', md5($_POST['password'])); # Do not use MD5 for password hashing, and especially not without salt.
$query->bindValue(':email', $_POST['email']);
$query->bindValue(':refid', $_GET['refid']);
$query->bindValue(':ip', $_SERVER['REMOTE_ADDR']);
$query->execute(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-10T17:02:25.870

你没有`mysql_real_escape_string`，`$refId`即使那是从`$_GET`. 这基本上使您的所有其他注射预防措施毫无意义。在切线上，如果您在 md5-ing 之前对密码进行转义，它会更改哈希值。

# c++ - 比较 QKeyPress 事件

> ID：11418212
> 
> 赞同：0
> 
> 时间：2012-07-10T16:57:40.653
> 
> 标签：c++, qt

我有两个想要比较的 QKey 按下事件，一个按键由我的“AddShortcut”表单输入，我希望主表单将用户按键与在我的 Addshortcut 表单上输入的按键进行比较。

有没有办法比较这两个事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:32:57.983

我不确定你到底想做什么，但`QAction`如果你还没有看到它，我会指出它的存在。这是 Qt 实现键盘快捷键等的机制：

[http://qt-project.org/doc/qt-4.8/qaction.html#details](http://qt-project.org/doc/qt-4.8/qaction.html#details)

至于您的具体问题，基线 QEvent 类没有定义相等或比较运算符。在任何情况下，平等都是一个模糊的话题*（如果鼠标点击在相同的像素坐标上，它们是否相等？如果按下 Ctrl/Alt/Shift 会怎样）*？

如果您只想测试两个按键事件以查看它们是否相等，您可以首先使用[QEvent::type()](http://doc.qt.nokia.com/4.7-snapshot/qevent.html#type)测试以查看每个事件的类型。如果他们都是，`QEvent::KeyPress`那么你可以`static_cast<QKeyEvent>`参加这两个活动。然后您可以检查您感兴趣的任何部分是否相等。

显然有[QKeyEvent::key()](http://qt-project.org/doc/qt-4.8/qkeyevent.html#key)但也有修饰符，产生的文本等：

[http://qt-project.org/doc/qt-4.8/qkeyevent.html](http://qt-project.org/doc/qt-4.8/qkeyevent.html)

# sql - 需要基于另一个查询中的选择结果的 SQL 更新语句。不知道如何将两者结合起来

> ID：11418213
> 
> 赞同：0
> 
> 时间：2012-07-10T16:57:42.697
> 
> 标签：sql, sql-server-2008

我的第一个选择语句是这样的：

```
 Select AL.asset_key, AL.group_key, AL.entity_key
From assetlist As AL
Where Not Exists    (
                Select 1
                From assetgroup As AG
                Where AG.group_key = AL.group_key
                    And AG.entity_key = AL.entity_key
                ) 
```

此查询的结果向我显示了任何被错误地分配了 group_key 的资产。我们有一个错误，它会根据非唯一字段抓取第一条记录。因此，如果我有两个名为“Group 1”的组，但它们存在于不同的父类别中，那么根据“Group 1”的第一个匹配项编写新记录的脚本并且不检查它是否是该类别的组. 无论如何，它是固定的，所以我正在尝试做一个清理脚本。上面查询的结果给了我这个：

```
 asset_key  group_key   entity_key
 352        25          3
 376        77          3
 378        77          3 
```

我的另一个查询是检查 group_key 与实体键，看看正确的值应该是什么：

```
SELECT distinct
t1.Group_key, t1.entity_key, t1.group_id
FROM assetgroup t1 
INNER JOIN assetgroup t2 ON t2.Group_ID = t1.Group_ID 
WHERE t2.Group_key != t1.Group_key
and t2.entity_key != t1.entity_key
and t2.Group_ID = t1.Group_ID
order by t1.group_id 
```

结果集如下所示：

```
Group_key   entity_key  group_id
25          1           CID
58          2           CID
59          3           CID
77          2           GROUP 1
79          3           GROUP 1
29          4           RENTAL
51          6           RENTAL
53          1           WAREHOUSE
36          5           WAREHOUSE 
```

所以查看这两个结果，我们看到 group_key 25 不属于 entity_key 3，所以我需要更新资产。group_key 到正确的 group_key 值 59 因为这是 group_id 中实体 3 的正确值`CID`。其他行也是如此。

我们有多个客户数据库都需要运行这个脚本，所以我不能做简单的事情，只看这两个并编写一些手动更新。我如何编写脚本来完成这一切？

以下是对数据的更详细说明以及需要做什么：

*   assetgroup 表将每个资产链接到一个 group_id，该 group_id 完全由 group_key 确定，该 group_key 在表中是唯一的。
*   每个资产组 group_key 都与一个 entity_key 相关联。每个 entity_key 只在每个 group_id 中出现一次。
*   在资产表中，列出了 group_key 和 entity_key，尽管 entity_key 应该完全由 group_key 隐含。
*   但是，某些资产行的 group_key 错误，需要将其更新为与错误 group_key 在同一 group_id 中的该实体的正确 group_key。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:09:54.163

这是您要查找的查询。

```
UPDATE A
SET A.group_key = R.group_key
FROM
   Assets A
   INNER JOIN AssetGroup W -- Wrong
      ON A.group_key = W.group_key -- find group_id of wrong group_key
   INNER JOIN AssetGroup R -- Right
      ON A.entity_key = R.entity_key -- also W.entity_key = R.entity_key
      AND R.group_id = W.group_id -- wrong group_key still has right group_id
WHERE
   A.group_key <> R.group_key 
```

请注意，您的数据库表是非规范化的，因为 entity_key 完全暗示 group_key，但 group_key 在 assets 表中重复。这是一种违反行业最佳实践的数据库设计反模式。group_key 根本不应该在 assets 表中。至少，虽然不理想，但应该有一个约束来防止输入不正确的值组合，例如从 assets 表到 assetsgroup 表的 FK 关系`(group_key, entity_key)`。这有其自身的问题，例如无法在组之间移动实体。该组不唯一标识实体，因此它确实不是密钥的一部分，应该被删除。

最终，您的 group_keys 是`(entity_key, group_id)`用单个值替换每个的代理项。但随后您在 assets 表中重复 entity_key。这根本没有意义。如果您的名字是`Joe Public`，并且您被分配了一个唯一指代这个全名的数字，例如 28975，那么您为什么要称自己为`Joe 28975`？要么一个，要么另一个。这样做的问题是你可以说`Moe 28975`根本不涉及任何人的事情！然后您必须查找人号 28975 的真实名字，然后更改`Moe`为`Joe`。这不是最优的。

在您的情况下，损坏的进程`Public`仅根据姓氏在表中查找并提取相应的数字 11645，给出`Joe 11645`另一个无效组合：

```
Last   First Number
------ ----- ------
Public Joe   29875
Public Moe   11645 
```

因此，您必须查找`11645`的姓氏，并找到 的正确数字`Joe`。我希望这有助于说明这个方案是如何混淆的。

我还想温和地反对您表格中的列顺序。一般来说，至少对我来说，将父列放在子列之前是最有意义的。将子列放在首位是令人困惑的（尤其是没有解释）。后缀`id`在数据库中几乎普遍用于表示内部标识符。`group_id`看到并意识到它是一个文本字符串而不是数字，这有点令人不安。事实上，这是另一种非规范化。如果您想将 group_id 重命名`WAREHOUSE`为，`WAREHOUSE 1`因为您要添加一个`WAREHOUSE 2`? 现在您必须更新引用它的所有行中的值。显然，group_ids 是由人类使用的，并且它们本身具有重要意义，因此它们不应该在许多行中一遍又一遍地重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:14:11.240

我认为这样的事情会起作用（我自己无法真正检查）。

我强烈建议您在尝试之前将其包装在事务中：

```
 with correctGroup(groupKey, entityKey) as (
        SELECT distinct t1.Group_key, t1.entity_key
        FROM assetgroup t1 INNER JOIN assetgroup t2 ON t2.Group_ID = t1.Group_ID 
        WHERE t2.Group_key != t1.Group_key
            and t2.entity_key != t1.entity_key
            and t2.Group_ID = t1.Group_ID)
    update  assetList
    from    assetList al join correctGroup cg on al.entity_key = cg.entitykey
    set     group_key = groupKey
    Where Not Exists (
                    Select 1
                    From assetgroup As AG
                    Where AG.group_key = AL.group_key
                        And AG.entity_key = AL.entity_key
                    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:17:15.220

好的，所以我的一位同事在嘲笑我过于复杂的努力后想出了解决方案。这是查询：

![在此处输入图像描述](../Images/b0fa1d96af326a154ab47de3a5e33590.png)

很抱歉没有详细介绍这背后的业务逻辑。当时我认为这无关紧要，但我发现现在是。干杯，感谢您的投入并忍受一个愤怒的开发人员:)

哦，我的工作防火墙突然认为我正在尝试 sql 注入攻击，因此是图像而不是代码。

# java - 哪个 Eclipse API 用于执行“覆盖/实现方法”菜单？

> ID：11418219
> 
> 赞同：1
> 
> 时间：2012-07-10T16:58:04.137
> 
> 标签：java, eclipse, code-generation

我想知道调用了哪些 Eclipse API 来从给定接口获取方法列表，并且代码在实现该接口的类上生成列表。基本上我想了解菜单“Source > Override/Implement Methods...”的工作原理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:02:46.090

您可以使用[Plug-in Menu Spy](http://www.vogella.com/articles/EclipseCodeAccess/article.html#pluginspy)来查找在 Eclipse 中实现任何菜单操作的类。按下`Alt+Shift+F2`然后调用您感兴趣的菜单项。Plug-in Spy 将显示有关该菜单操作的信息的弹出窗口，包括指向实现该操作的类的链接。

在这种特定情况下，类是`org.eclipse.jdt.ui.actions.OverrideMethodsAction`.

# javascript - 尝试重写一个jquery 滑块与v1.7.1 兼容

> ID：11418220
> 
> 赞同：-2
> 
> 时间：2012-07-10T16:58:07.617
> 
> 标签：javascript, jquery, jquery-ui

试图重新编写它以与 jquery v1.7.1 兼容它目前适用于 1.5 版

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"> </script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"> </script>
<script type="text/javascript">             
$(document).ready(function(){
   $("#content-slipslide").slider({
       animate: true,
       change: handleSliderChange,
       slide: handleSliderSlide
    });
});
function handleSliderChange(e, ui) {
   var maxScroll = $("#content-scroll").attr("scrollWidth") - $("#content-scroll").width();
   $("#content-scroll").animate({scrollLeft: ui.value * (maxScroll / 100) }, 1000);
}
function handleSliderSlide(e, ui) {
   var maxScroll = $("#content-scroll").attr("scrollWidth") - $("#content-scroll").width();
   $("#content-scroll").attr({scrollLeft: ui.value * (maxScroll / 100) });
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:16:24.893

jQuery 1.6（在 1.6.1 中稍作修改）引入了对属性的单独处理（以前，两者都由`attr()`方法处理）。这很方便，但是让我们认为属性和属性是一回事，这是不正确的。

由于滚动属性正是——属性——因此应该通过该`prop()`方法访问。

该问题不保证解释属性和属性之间的差异，但如果被问到，我很乐意编辑答案以提供一些详细信息。

# css - Internet Explorer 和 iFrame 中图像周围的边框

> ID：11418224
> 
> 赞同：0
> 
> 时间：2012-07-10T16:58:29.063
> 
> 标签：css, internet-explorer, stylesheet, image

所以我正在尝试解决我正在处理的网站的一些 css 问题，除了 1 个 iFrame 元素外，一切看起来都差不多。

iFrame 包含一个随机生成的图片，以及一个您单击的按钮，该按钮会将您重定向到另一个页面。所有功能都有效，只是样式。无论我尝试什么，我都无法删除嵌入在 iFrame 元素中的 img 标签周围的 2px 边框。在我放入 iFrame 的实际页面上，所有 3 个浏览器中的图像周围都没有边框，所以出于某种原因，IE 想要在这个 img 标签上放置另一个边框，当它位于主页上的 iFrame 中时......

这是嵌入在主页中的 iFrame。

```
<iframe src="~/Photos/PhotoViewer.aspx" runat="server" scrolling="no" frameBorder="0" class="PhotoViewer"></iframe> 
```

这是css类

```
.PhotoViewer
{
    height: 200px;
    width: 100%;
    margin-left: 0px;
    outline: 0px;
    border:none;
    outline:none;
} 
```

这是嵌入页面的一部分

```
.noBorder
{
    border:none;
    outline:none;
}
</style>
</head>
<body>
<form runat="server" class="noBorder" style="margin:0px;">
    <asp:HyperLink runat="server" NavigateUrl="~/Photos/Default.aspx" Target="_parent" class="noBorder"><img id="randPhoto" runat="server" alt="Photo Unavailable" class="noBorder"/></asp:HyperLink>
    <div style="border:none">
        <asp:Button runat="server" ID="btnUploadPhoto" OnClick="btnUploadPhoto_Click" class="button" style="border:none"/>
    </div>
</form>
</body> 
```

我已经尝试使用我可以在这个网站上找到的大多数建议，例如：

```
a, img {border:none;}
img {border:none;} 
```

我为 IE (F12) 使用了 css 调试功能，我发现即使我在 img 周围放置所有这些边框：无/边框：0px，它仍然会在其周围放置 2px 边框。如何将 css 样式强制到 iFrame 内的 img 元素上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T04:31:30.733

显然，如果您不将 DOCTYPE 应用于主 HTML，那么 IE 会处理它想要的事情......其中包括在内容周围放置边框。

或者，如果您使用的是旧版本的 Internet Explorer，或者通过此元标记强制更新的 Internet Explorer 像旧的 Internet Explorer 一样呈现：X-UA-Compatible

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:36:11.880

尝试将嵌入页面中的 CSS 更改为此；

```
.noBorder img
{
border:none;
outline:none;
} 
```

# php - 我知道如何在 LAMP 堆栈上构建 HTML5/PHP 页面，但不知道如何在 Windows IIS 领域开始

> ID：11418225
> 
> 赞同：-1
> 
> 时间：2012-07-10T16:58:32.580
> 
> 标签：php, html, iis, windows-server-2008, lamp

我需要构建一个可以从 Microsoft SQL 服务器数据库中提取数据的报告系统。

我用 LAMP 堆栈做了类似的事情。但我想知道在 Windows 服务器世界中这样做的最佳方法是什么*（即使这意味着将 PHP 与 IIS 一起使用）*？需要什么工具？我可以使用 Visual Studio、Expression Studio 和任何其他 Microsoft 软件。

编辑：应该澄清一下，这个系统将在内部使用。因此，需要一个可以在生产中工作的强大解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:02:11.830

您可以使用[XAMPP](http://www.apachefriends.org/en/xampp.html)或[WAMP](http://www.wampserver.com/en/)，但请*注意！*这两个开发包*仅用于开发*，如果在没有事先配置的情况下将其用于生产服务器，则会存在一些*严重的安全问题。*

# arrays - sh 脚本：字符串到数组

> ID：11418226
> 
> 赞同：1
> 
> 时间：2012-07-10T16:58:34.643
> 
> 标签：arrays, string, shell, scripting, sh

我为 bash 找到了类似的答案，但对于 sh 却没有，所以我在问。

我有一个 $STRING，其中包含类似“Jun01 Jun02 Jun03 Jun04”的内容。我想把它放入一个数组中，使得 ${ARRAY[0]} 是“Jun01”，${ARRAY[1]} 是“Jun02”，等等。

我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:01:32.210

您不能真正在标准 (Bourne) shell 中本地处理数组。

有关更多详细信息，请参见[此处](http://docstore.mik.ua/orelly/unix/upt/ch45_34.htm)。

> C shell (47.5)、awk (33.11)、Korn shell 和其他一些 UNIX 命令解释器具有内置的数组支持。标准的 Bourne shell 没有，尽管它的命令行是一种数组，您可以使用 set ( 44.19 ) 命令存储它 - 并通过 $1 、 $2 等获取存储的值。

我会尝试使用 bash（如您所见）或更全功能的脚本语言，例如[Perl](http://www.perl.com)（毫无疑问，其他人会推荐他们的最爱！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:32:06.970

sh 没有数组，但以下 hack 通常就足够了：

```
set $STRING
for x; do eval "ARRAY_$((i++))='$x'"; done 
```

现在，（假设`i`未设置或以 0 开头），`$ARRAY_0`具有值`Jun01`、`$ARRAY_1`is`Jun02`等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T00:55:36.247

您可以摆脱位置参数：它们类似于数组。

```
set -- $STRING   # no quotes here
echo $1
echo $2
# etc 
```

# wget - 找不到通过 WGET 成功下载的文件

> ID：11418229
> 
> 赞同：0
> 
> 时间：2012-07-10T16:58:42.350
> 
> 标签：wget

我正在尝试通过 WGET 下载压缩文件，网址为**[http://dl.opensubtitles.org/en/download/sub/3584243](http://dl.opensubtitles.org/en/download/sub/3584243)**。当您尝试将其加载到浏览器中时，会出现一个弹出窗口，询问您将其下载到哪里。当我尝试通过 WGET 下载它时，状态显示下载完成，它在诊断中显示正确的文件大小，但我在文件夹中找不到该文件。什么可能是错的？

![截屏](../Images/bcaa89694ca1707f369c5f2ddf20b614.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:09:24.663

您`wget`以错误的方式使用。使用`-P`开关指定一个目录来保存下载。

**错误的：** `wget http://your.url your_directory`

**正确的：** `wget -P your_directory http://your.url`

另外，尝试添加`--content-disposition`以从文件名本身不属于 url 的 url 获取正确的文件名（如您的示例中）：

`wget --content-disposition -P your_directory http://your.url`

# oauth - OAuth 2.0 API 用于无需登录/重定向的后端服务器调用

> ID：11418230
> 
> 赞同：3
> 
> 时间：2012-07-10T16:58:43.190
> 
> 标签：oauth, google-api, oauth-2.0, google-api-client

例如 API：[https](https://developers.google.com/apis-explorer/#p/calendar/v3/calendar.calendarList.list?_h=4&) ://developers.google.com/apis-explorer/#p/calendar/v3/calendar.calendarList.list?_h=4&需要使用 OAuth 2.0 进行授权才能进行调用。

但是，如果我想在服务器中设置一个 cron 作业并定期获取 API 怎么办？我可以假设访问令牌一直保持不变吗？（除非我手动撤销它）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:16:07.627

访问令牌的生命周期有限。当它过期时，您可以使用刷新令牌以编程方式获取新的访问令牌。实际上，这意味着，一旦访问被授权，它将在没有用户输入的情况下工作，直到访问被撤销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:45:02.650

使用[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。

您可以在每个作业开始时请求访问令牌并在作业期间将其缓存，或将其存储在某处。确保其加密。

对服务器的任何调用都应始终准备好撤销访问令牌。在这种情况下，请获取新的访问令牌并再次尝试请求。如果失败超过一定次数，请停止并假设您的设置有问题。

# django - 创建自定义 Django 管理员搜索表单

> ID：11418235
> 
> 赞同：1
> 
> 时间：2012-07-10T16:59:00.650
> 
> 标签：django, django-admin

我想在 Django 管理员的搜索表单中添加一些输入。

我通过将新模板放在原始“admin/search_form.html”的相关路径中来覆盖原始模板。但是当我在新模板中添加一个“选择小部件”时，例如：`{{ select_widget }}`. 它始终呈现为`<django.forms.widgets.Select object at 0x10f7560d0>`. 但是，如果我调用它的`render()`方法，它会呈现为正确的 html。

如何让小部件呈现为正确的 html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:01:55.140

尝试这个：

```
{{ select_widget.render }} 
```

来自[Django 文档](https://docs.djangoproject.com/en/dev/topics/templates/)：

> 从技术上讲，当模板系统遇到点时，它会按以下顺序尝试以下查找：
> 
> *   字典查找
> *   属性查找
> *   方法调用
> *   列表索引查找

您在这里需要的是第 3 个方法调用。

# java - 在 AES 加密中，迭代次数是否真的增加了更多的安全性？

> ID：11418236
> 
> 赞同：0
> 
> 时间：2012-07-10T16:59:06.280
> 
> 标签：java, encryption, aes, encryption-symmetric

我使用 AES 和 salt String 来加密我的“密码”，使用我制作的 java 程序。（它使用 AES 对称加密）

用户设置要加密的消息、salt、迭代和 16 个字节的密钥。

如果我将它设置为使用大量的加密和解密迭代，比如 255 次，那真的会让我的密码比 1 次迭代更安全吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T17:08:01.880

最简洁的答案是不。添加加密*迭代*无济于事。这与在底层算法中添加*轮次*不同，实际上更多轮次确实有帮助。

更长的答案是您使用了错误的技术来存储密码。您不应该使用对称加密，而应该使用单向散列函数，例如 bcrypt。

您的解决方案（对称加密）的弱点是加密密钥必须对您的软件可用，才能加密或解密密码。这意味着当攻击者闯入您的系统时，他们将能够获得您的密码数据库和密钥，因此他们解密所有密码将是微不足道的。您应该假设攻击者将能够获取您的源代码以及您的所有数据。

如果您使用哈希函数，则无需担心这种情况。即使攻击者获得了您的源代码和密码数据库，他们仍然无法反转单向哈希（假设您使用良好的哈希 - 再次考虑 bcrypt），因此窃取您的数据不会危及您用户的密码。

当您考虑安全性时，几乎总是最好使用现有的解决方案（我提到 bcrypt 了吗？）而不是自己动手。安全性很难做到正确，甚至专家也搞砸了。不要编写自己的密码存储系统。使用由专家设计的，更重要的是，已经被一大群*其他*专家分析和攻击过的。以 Bcrypt 为例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T17:07:59.430

简短的回答是*肯定*的。

把它想象成一个魔方（这不是最好的例子，但请耐心等待）。明文是处于已解决状态的立方体，密文是处于加扰状态的立方体。每一轮加密都将立方体的一个面旋转一次。如果它的混乱程度更高，那么在尽可能短的移动次数内求解立方体在计算上要困难得多。破解一轮 AES 相当于要求某人解决一个旋转了一个面的魔方。

一种可以有效解决减少加密轮次的攻击是 SAT 求解器攻击。

无论如何，您应该使用一种加密操作来存储密码。我相信首选的方法是 bcrypting，因为它在密码学上是安全的（一种方式）并且计算量很大，因此很难暴力破解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:07:37.327

是的，更多轮次将使加密对某些攻击更加强大。但是你应该只存储加盐的、散列的密码。不要加密它们。这样，如果有人窃取了您的数据库，他们就无法解密密码。

# wpf - 根据大小选择数据模板

> ID：11418239
> 
> 赞同：1
> 
> 时间：2012-07-10T16:59:18.143
> 
> 标签：wpf, datatemplate

对于这种情况，让我们显示有关电子邮件的简短信息，其中包含发件人、主题和正文。

我构造了 2 个不同`DataTemplate`的：一个显示发件人和主题，另一个显示发件人、主题和正文的前 3 个非空行。

**问**：如何根据 WPF 可以提供的屏幕空间大小来选择数据模板？如果这不是正确的方法，我如何根据可用大小显示短版本视觉表示与长版本视觉表示？

* * *

我做了什么：我玩过`DataTemplateSelector`但没有找到达到目标的方法。选择器似乎仅根据数据本身进行操作。

我创建了一个控件来显示电子邮件消息并覆盖`Measure(size)`了`Arrange(size)`. 在`Measure(size)`我可以做的：

```
res1 = base.Measure(infSize); // non-restricted size
res2 = base.Measure(size); 
```

我知道 res2 是否小于 res1，这意味着我需要渲染短版本视觉表示；但我此刻被困住了......

# java - 像 encodeAsBase64 方法一样，Grails 是否提供加密/解密方法？

> ID：11418242
> 
> 赞同：0
> 
> 时间：2012-07-10T16:59:26.963
> 
> 标签：java, grails, encryption

在我的 grails 域模型中，是否有任何简单的方法可以仅加密/解密特定字段？有没有可以使用的 Java 类？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:06:18.737

如果您想加密数据库中的数据，但在您的 Domain 类中解密了数据，您可以使用自定义 UserType，它将为您处理加密/解密。

[http://grails.org/doc/latest/guide/GORM.html#customHibernateTypes](http://grails.org/doc/latest/guide/GORM.html#customHibernateTypes)

[http://www.redtoad.ca/ataylor/2011/12/encrypting-a-database-column-in-grails/](http://www.redtoad.ca/ataylor/2011/12/encrypting-a-database-column-in-grails/)

# java - Apache Jelly XML 模板：有条件地渲染标签属性

> ID：11418246
> 
> 赞同：0
> 
> 时间：2012-07-10T16:59:47.657
> 
> 标签：java, xml, jelly

我正在使用[Jelly 脚本](http://commons.apache.org/jelly/overview.html)来生成 HTML 有序列表。有时我想要`<li value="...${computed}...">...big block...</li>`，有时我想要`<li>...</li>`没有`value`属性。`value=""`不合法 - 它必须是整数。

我可以使用`<j:choose>`写两个块，一个使用`value`，一个不使用，但是我的模板必须复制列表项中的所有内容，这会使其更丑陋且更难维护。

在 XSLT 中，您可以将`xsl:attribute`其用于此目的。果冻有什么等价物吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:59:48.030

似乎`${computed}`对数字列表进行评估或`null`就足够了。虽然`<li value="">blank</li>`生成无效的 HTML（与源模板相同），但`<li value="${null}">null</li>`会生成`<li>null</li>`所需的内容。

# android - 如何获得在布局中显示的意图

> ID：11418248
> 
> 赞同：0
> 
> 时间：2012-07-10T16:59:49.493
> 
> 标签：android, android-layout, android-intent, android-widget

我正在使用 achartengine 创建饼图，并且创建它没有任何问题！问题是，我希望这个饼图显示在带有其他一些细节的布局上。我已经创建了活动并对其进行了编码。饼图方法返回一个意图，所以有没有办法让我的意图显示在我的布局中！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:12:07.153

[你可以在这里](https://stackoverflow.com/questions/4062161/android-i-am-using-achartengine-library-for-graphs-but-not-able-to-integrate-a/4079692#4079692)找到一些额外的信息。它准确地解释了为了在布局中嵌入 AChartEngine 图表视图需要做什么。

# freebase - Freebase：约束属性为空

> ID：11418249
> 
> 赞同：1
> 
> 时间：2012-07-10T17:00:00.143
> 
> 标签：freebase, mql

有没有办法在 Freebase 查询中将属性限制为空？特别是，我想找到所有具有 unique=null 和 /freebase/type_hints/mediator=null 的属性。所以是这样的：

```
[{
  type: "/type/property",
  unique: null,
  "expected_type" : {
    "/freebase/type_hints/mediator" : null
  }
}]​ 
```

除了我希望 null 实际上意味着这些属性的 null 值。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:25:10.457

使用`"optional": "forbidden"`.

```
[{
  "id":     null,
  "name":   null,
  "type":   "/type/property",
  "unique": {
    "value":    null,
    "optional": "forbidden"
  },
  "expected_type": {
    "/freebase/type_hints/mediator": {
      "value":    null,
      "optional": "forbidden"
    }
  }
}]​ 
```

通常，除了 in 子句之外，您不需要任何其他内容`"optional": "forbidden"`，但 MQL 不允许您拥有仅包含指令且不包含实际属性的子句，因此`"value": null`只是为了让它开心。

# extjs4 - ExtJS 4 - 创建包含列表列表的模型

> ID：11418250
> 
> 赞同：0
> 
> 时间：2012-07-10T17:00:03.240
> 
> 标签：extjs4

我有一个特定问题要为我的 ExtJs 4 MVC 应用程序创建模型。模型应该读取类似于以下内容的 JSON 版本号：1 图片名称：图片 1 图片 2 ... 图片 N 集 1：URL1 URL2 ... URLN 集 2：URL1 URL2 ... URLN ...

设置 M: URL1 URL2 ... URLN

我正在考虑关联，但这里我们有一个全局对象和这个列表列表。有没有人知道如何定义这个模型。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T12:22:23.103

根据我的经验，没有一种直接的内置方法可以在模型中保存字符串数组。你可以使用你所说的关联，但是你的 JSON 应该有一个对象数组而不是字符串：

```
{
    "urls": [{"url":"www.google.com"}, {"url","www.yahoo.com"}],
    "images": [{"img":"image1.png"}, {"img","image2.png"}]
} 
```

如果我不需要关联提供的额外功能，我通常会做的只是将我的列表作为带有分隔符的字符串返回。（我通常使用管道）

```
{
    "urls": "www.google.com|www.yahoo.com",
    "images": "image1.png|image2.png"
} 
```

然后，如果我需要对它们进行任何处理，我只需调用 .split('|') 并且我有一个数组。如果我需要在某个地方显示它们，我只需设置一个渲染器功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T19:44:17.740

我知道这是一个旧线程，但我试图找出同样的问题并偶然发现了一个非常简单的解决方案 - 只需将列表设置为“文本”字段类型，并且如果 json 数据是 json 的标准列表格式（例如 "urls" : ["www.google.com", "www.yahoo.com"]) 默认情况下它只是将其作为字符串数组移动 - 很简单。如果不需要这种复杂性，则完全跳过关联。以字符串数组的形式访问生成的“urls”字段。

也适用于写入。很高兴。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T17:04:01.230

列表列表不是一棵树吗？你可以使用一棵树

[http://docs.sencha.com/ext-js/4-1/#!/example/tree/two-trees.html](http://docs.sencha.com/ext-js/4-1/#!/example/tree/two-trees.html)

# textbox - 使用 MultiBinding 聚焦时文本框的不同格式不会更新源

> ID：11418254
> 
> 赞同：1
> 
> 时间：2012-07-10T17:00:29.897
> 
> 标签：textbox, focus, string-formatting, multibinding, imultivalueconverter

我想做的很简单，当 TextBox 有焦点时显示一种格式，而在没有焦点时显示另一种格式。在我的情况下，我在不集中时将一个数字四舍五入为 3 位数字，但在集中于编辑时显示实际的整数。

我有一个使用多重绑定的相当简单的解决方案，我觉得我快到了。一切都按预期工作，即时窗口中没有错误，但绑定不会更新源。

我正在使用这种样式来传递我的绑定以及 TextBox 是否将焦点传递给转换器。

```
<Style x:Key="RoundedTextBox" TargetType="{x:Type ContentControl}">
    <Setter Property="Focusable" Value="False"/>
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <TextBox x:Name="TB" TextAlignment="Right" DataContext="{TemplateBinding Content}">
                    <TextBox.Text>
                        <MultiBinding Converter="{StaticResource DecRounder}" UpdateSourceTrigger="PropertyChanged">
                            <MultiBinding.Bindings>
                                <Binding ElementName="TB" Path="DataContext" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" BindsDirectlyToSource="True" />
                                <Binding ElementName="TB" Path="IsFocused" Mode="OneWay" />
                            </MultiBinding.Bindings>
                        </MultiBinding>
                    </TextBox.Text>
                </TextBox>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

示例用法：

```
<ContentControl Style="{StaticResource RoundedTextBox}"
                Content="{Binding Path=Model.SomeNumber}" /> 
```

多值转换器就在这里。

```
public class DecimalRoundingConverter : IMultiValueConverter
{

    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {

        if (values.Length != 2)
            throw new Exception("Invalid number of values for DecimalRoundingConverter!");

        if (values[0] is string)
            return values[0];

        if (values[0] != null && !(values[0] is decimal))
            throw new Exception("Invalid type for first value used with DecimalRoundingConverter!");
        if (!(values[1] is bool))
            throw new Exception("Invalid type for second value used with DecimalRoundingConverter!");
        if (targetType != typeof(string))
            throw new Exception("Invalid target type used with DecimalRoundingConverter!");

        if (values[0] == null)
            return null;

        decimal number = (decimal)values[0];

        bool isFocused;
        if (values[1] == null)
            isFocused = true;
        else if (values[1] is bool)
            isFocused = (bool)values[1];
        else
            if (!bool.TryParse((string)values[1], out isFocused))
                throw new Exception("Invalid converter parameter used with DecimalRoundingConverter!");

        return string.Format(isFocused ? "{0:.#############################}" : "{0:.###}", number);

    }

    public object[] ConvertBack(object value, Type[] targetType, object parameter, System.Globalization.CultureInfo culture)
    {

        decimal d;
        var ret = new object[2];

        if (value == null)
            ret[0] = null;
        else if (decimal.TryParse((string)value, out d))
            ret[0] = d;
        else
            ret[0] = value;

        ret[1] = Binding.DoNothing;

        return ret;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:50:38.517

对于它的价值，我从这篇[CodeProject 文章](http://www.codeproject.com/Articles/31592/Editable-TextBlock-in-WPF-for-In-place-Editing)中得出了一个解决方案。关键是使用样式中的触发器来切换内容模板。提供的示例并不完美，但它是一次很好的学习体验。

这种方法的唯一缺点是必须在 UserControl 中定义 ContentTemplates 和 Style，因为 ContentTemplates 直接引用 TextBox 事件处理程序。这是因为对 TextBox 的引用必须传递给后面的代码。当您尝试覆盖样式时，您将丢失切换 ContentTemplate 的触发器。

这个缺点对我来说很好，因为我绑定到重要属性的应用程序设置，比如 ContentStringFormat。

**编辑**

这是完整 XAML 中更好的方法。我在我的博客上写了一篇[相应的文章](http://www.nathanpjones.com/wp/2012/09/editable-label-in-wpf/)。

```
<ControlTemplate x:Key="EditableDecimalTemplate" TargetType="{x:Type ContentControl}">
    <ContentPresenter Name="contentHolder" 
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                            RecognizesAccessKey="True" 
                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
        <ContentPresenter.Content>
            <Grid Margin="0">
                <Border Name="nonFocusedBorder"
                        Grid.ZIndex="3" IsHitTestVisible="False"
                        BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" 
                        Background="{TemplateBinding Background}" 
                        />
                <TextBox Name="editTextBox"
                            Grid.ZIndex="1" Opacity="0"
                            Margin="0" Padding="{TemplateBinding Padding}"
                            HorizontalAlignment="Stretch" VerticalAlignment="Center"
                            TextAlignment="Right"
                            Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content, Mode=TwoWay}"
                            BorderThickness="{TemplateBinding BorderThickness}" 
                            />
                <Border BorderBrush="{x:Null}" Height="{Binding ElementName=editTextBox, Path=ActualHeight}" Margin="0,0,3,0"
                        Padding="{TemplateBinding BorderThickness}">
                    <TextBlock Name="displayTextBlock" 
                                Grid.ZIndex="2" IsHitTestVisible="False"
                                VerticalAlignment="Center" HorizontalAlignment="Stretch" 
                                Margin="{TemplateBinding Padding}"
                                TextAlignment="Right"
                                Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content, StringFormat={}{0:#.###;-#.###;0}, Mode=OneWay}"
                                />
                </Border>
                <Border/>
            </Grid>
        </ContentPresenter.Content>
    </ContentPresenter>
    <ControlTemplate.Triggers>
        <Trigger SourceName="editTextBox" Property="IsKeyboardFocused" Value="True">
            <Setter TargetName="displayTextBlock" Property="Opacity" Value="0" />
            <Setter TargetName="editTextBox" Property="Opacity" Value="1" />
            <Setter TargetName="nonFocusedBorder" Property="Visibility" Value="Collapsed"/>
        </Trigger>
        <Trigger Property="BorderThickness" Value="0">
            <Setter TargetName="editTextBox" Property="BorderThickness" Value="1" />
            <Setter TargetName="nonFocusedBorder" Property="BorderThickness" Value="1" />
            <Setter TargetName="nonFocusedBorder" Property="BorderBrush" Value="Transparent" />
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate>

<Style x:Key="EditableDecimalLabel" TargetType="{x:Type Label}">
    <Setter Property="Template" Value="{StaticResource EditableDecimalTemplate}" />
    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
    <Setter Property="VerticalContentAlignment" Value="Stretch"/>
    <Setter Property="Padding" Value="4" />
    <Setter Property="FontFamily" Value="Consolas, Lucida Console, Courier New"/>
    <Setter Property="TextElement.FontSize" Value="13" />
    <Setter Property="SnapsToDevicePixels" Value="True"/>
    <Setter Property="BorderThickness" Value="1" />
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="BorderBrush" Value="#B5CFFF"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

和示例用法：

```
<Label Name="TestControl"
       Width="120"
       Content="{Binding Path=MyNumber, Mode=TwoWay}"
       Style="{StaticResource EditableDecimalLabel}"
       /> 
```

# jsf-2 - 在绑定中使用 a4j:repeat var

> ID：11418259
> 
> 赞同：0
> 
> 时间：2012-07-10T17:00:43.413
> 
> 标签：jsf-2, primefaces, richfaces, components

我想问是否可以在 a4j:repeat 标记中使用 var 属性作为内部组件的绑定。例如

```
<a4j:repeat value="#{myController.bindingComponents}" var="component">
  <h:panelGroup binding="#{component}"/>
</a4j:repeat> 
```

我已经尝试过了，但是在评估绑定表达式时组件为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:48:37.947

不，那是不可能的。属性是在视图构建时评估的`binding`（就像`id`属性和所有标记处理程序一样），而作为 UI 组件的 of 是在视图渲染时评估的`value`。`<a4j:repeat>`所以在`binding`属性评估的那一刻，`#{component}`is `null`，因为`<a4j:repeat>`那时还没有运行。

如果您再想一想，它应该完全有道理：JSF 组件树中只有**一个** `<h:panelGroup>`会多次呈现其输出。`<h:panelGroup>`正如您所期望的那样，以这种方式生成多个组件是不正确的。

为了实现您心目中的特定功能需求，您可能希望改用视图构建时迭代标记，例如 JSTL `<c:forEach>`。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# maven - 解密自定义 Maven 插件中的服务器条目

> ID：11418268
> 
> 赞同：3
> 
> 时间：2012-07-10T17:01:05.983
> 
> 标签：maven, maven-2, maven-plugin

我正在尝试编写一个自定义 maven-2 插件，但似乎找不到任何有关读取 settings.xml 和解密服务器条目的文档。

我查看了一些 maven 依赖项，例如`maven-settings`and `maven-settings-builder`（两个版本都是 3.0.3，我假设它适用于 maven 3，因为我遇到了关于方法未找到异常的问题`Server.clone()`）。

`maven-settings:2.2.1`能够加载设置（痛苦的是，您必须提供 settings.xml 的路径 - 是否有工厂方法可以只使用默认的 ${user.home}/.m2/settings.xml？），但是我找不到解密 API（如 3.0.3 中存在的那个）：

```
DefaultMavenSettingsBuilder builder = new DefaultMavenSettingsBuilder();
Settings settings = builder.buildSettings(new File(System.getProperty("user.home") + "/.m2/settings.xml"));
settings.getServer("id").getPassword(); 
// i get the encrypted String "{gsfdGJHv69}" 
```

无论如何，我正在专门寻找有关如何（使用 maven 2.2.1）的指导：

1.  将用户的 settings.xml 加载到`org.apache.maven.Settings`对象中，而无需指定完整路径
2.  解密 settings.xml 文件中的特定命名服务器条目（就像您可以在 3.0.3 中使用 maven-settings-builder:3.0.3`DefaultSettingsDecryptor`类一样）

全部在我的自定义`AbstractMojo`实现的执行方法中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:30:08.640

与往常一样，只需多花几分钟时间搜索和寻找源代码，答案就会出现......

（**更新：请参阅@ST-DDT 对 v3.3 maven 的回答**）

挖掘源代码以了解 3.0.3 如何进行解密时，我偶然发现了 SecDispatcher 接口和 DefaultSecDispatcher 实现。一个关于那个词的快速谷歌把我带到了这篇文章：

*   [http://ambientideas.com/blog/index.php/2009/08/encrypted-scm-passwords-in-maven/](http://ambientideas.com/blog/index.php/2009/08/encrypted-scm-passwords-in-maven/)

其中详细介绍了如何通过 plexus 容器获取 SecDispatcher。所以现在我有了解密的方法，现在我只需要一个更漂亮的方法来获取设置，这类似于获取 SecDispatcher - 使用容器：

```
Settings settings = ( (MavenSettingsBuilder) container.lookup(MavenSettingsBuilder.ROLE) ).buildSettings();

SecDispatcher secDispatcher = (SecDispatcher) container.lookup(SecDispatcher.ROLE, "maven")

String password = secDispatcher.decrypt(settings.getServer("id").getPassword()); 
```

最后的问题是提供范围所需的`maven-plugin-api`和`maven-settings`pom 依赖项（事后很明显），因此它们不会导致捆绑和运行时容器版本之间的 ClassCastExceptions

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T11:24:50.243

这个 github 项目让您解码 setting.xml 文件中的密码

[https://github.com/jelmerk/maven-settings-decoder](https://github.com/jelmerk/maven-settings-decoder)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-06T12:57:51.400

我能够使用 inbuild 解密密码`settingsDecrypter`。

```
@Component
private SettingsDecrypter settingsDecrypter;

SettingsDecryptionRequest decryptionRequest = new DefaultSettingsDecryptionRequest(possibleProxy);
SettingsDecryptionResult decryptionResult = this.settingsDecrypter.decrypt(decryptionRequest);
Proxy proxy = decryptionResult.getProxy(); 
```

使用 Maven 3.3.9 测试。与`proxies`和`servers`类似的作品。

# backbone.js - 骨干集合模型 ID 未保存在 _byId 中

> ID：11418274
> 
> 赞同：0
> 
> 时间：2012-07-10T17:01:35.300
> 
> 标签：backbone.js

我有一个使用 Rails 的 Backbone 应用程序。我从 Rails 中的 API 中获取了一组列表。集合中每个模型的 JSON 如下所示：

```
{
  "id": "4ffc55680be4443f66000005",
  "created_at": "2012-07-10T09:16:40-07:00",
  "name": "List-1",
  "list_items": []
} 
```

出于某种原因，当我获取集合时，列表集合的 _byId 对象没有被填充。我的 JSON 格式是否不正确，或者这里还有其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:57:05.573

你的猜测可能是对的。这是 Rails 生成 JSON 的方式。

您可以更改 Rails，或更改 Backbone 读取 JSON 的方式 [https://gist.github.com/719080](https://gist.github.com/719080)

信用：[如何填充 Backbone.js 集合的 _byId 数组，以便我可以在其上使用 `get`？](https://stackoverflow.com/questions/10051471/how-to-populate-a-backbone-js-collections-byid-array-so-that-i-can-use-get-o)

# remote-desktop - 网络外的 RDPSession 可能吗？

> ID：11418282
> 
> 赞同：1
> 
> 时间：2012-07-10T17:02:09.637
> 
> 标签：remote-desktop, rdp, desktop-sharing

我可以在网络内使用 RDPsession 创建屏幕共享应用程序，但可以在网络外使用吗？

或者除了rdpsession之外的任何其他方式来连接网络外的主机和查看器？

任何提示或帮助将不胜感激..

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:41:39.923

如果您只想显示或控制一个应用程序，像[teamviewer](http://www.teamviewer.com/en/index.aspx?utm_expid=60202728-11&utm_referrer=http://www.google.co.uk/url?sa=t&rct=j&q=teamviewer&source=web&cd=1&sqi=2&ved=0CEwQFjAA&url=http%253A%252F%252Fwww.teamviewer.com%252F&ei=1JkbUKOyOce4hAf4oIHgBg&usg=AFQjCNGHCZ-GmRwuRFVdksOAVFXeCWTYwg)这样的程序可以解决问题或任何其他 VNC 应用程序。如果您设置为从网络外部运行到您的计算机的 RDP 会话，则您需要在路由器上设置[NAT 转发。](http://en.wikipedia.org/wiki/Network_address_translation)TCP 端口将是 3389，您需要从网络 IP 内部将该转发分配给您的机器。所有路由器都不同，因此您需要了解如何为您的路由器型号执行此操作。此外，如果您还没有公共静态 IP 地址，则必须从您的 ISP 获得一个公共静态 IP 地址。如果您不允许更改路由器设置或不允许获取静态 IP，您可以使用像[Hamachi](https://secure.logmein.com/uk/products/hamachi/download.aspx)这样的 VPN 客户端。

# excel - Microsoft Excel 可以浏览蒙德里安立方体吗 ？

> ID：11418287
> 
> 赞同：5
> 
> 时间：2012-07-10T17:02:28.773
> 
> 标签：excel, ssas, data-warehouse, olap, mondrian

是否可以通过 Microsoft Excel 浏览蒙德里安立方体？就像使用 Microsoft SSAS 完成的一样？如果没有，是否有可能使用 Sharepoint 作为前端来浏览蒙德里安立方体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-25T15:48:49.387

[Simba](http://www.simba.com)提供了一个 ODBC 驱动程序来连接到 Microsoft excel 的 mondrian XMLA 服务。

您还可以尝试另一种纯 javascript 数据透视表解决方案，该解决方案完全模仿[webpivottable.com](http://webpivottable.com)上的 microsoft excel 的所有功能 。它是一种客户端解决方案，可直接连接到任何类型的 XMLA 服务。无需任何驱动程序和插件，无需后端依赖。这是[演示](http://webpivottable.com/demo)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-23T11:25:26.823

你也可以试试这个：

[https://sourceforge.net/projects/xmlaconnect/](https://sourceforge.net/projects/xmlaconnect/)

这允许您直接在 Mondrian 上使用数据透视表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:53:58.280

从来没有听说过直接从蒙德里安立方体读取共享点，我不知道它是如何工作的。

有一家名为“Simba”的公司提供的 excel 插件可以让您直接从 mondrian 立方体中读取数据。我没有亲自使用过它，但我知道在很久以前就有过的人。

如果你正在寻找一个漂亮的界面并且只是一个社区用户，你看过 Saiku 吗？显然它是基于服务器的，但是 UI 使用起来非常简单，任何最终用户都应该能够掌握它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T17:09:51.027

Jaspersoft 企业版有一个用于 Mondrian 的 Excel 插件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-27T14:45:53.457

我还使用了这个开源连接器[http://sourceforge.net/projects/xmlaconnect](http://sourceforge.net/projects/xmlaconnect)，我对此非常满意：。这些人还说它可以在 Sharepoint 中使用。你可以在这里阅读更多信息：[http ://www.arquery.com/Sharepoint%202013%20and%20Arquery.pdf](http://www.arquery.com/Sharepoint%202013%20and%20Arquery.pdf)

# html - 从 Google Chrome v20 中的日期输入中删除背景箭头

> ID：11418289
> 
> 赞同：37
> 
> 时间：2012-07-10T17:02:29.820
> 
> 标签：html, google-chrome

自 Google Chrome v20 以来，日期输入中添加了一个新日历。问题是我正在使用 javascript 创建自己的日历，并且我的图标已经与默认的 chrome 箭头位于相同的位置。

我想知道如何删除箭头背景？

![显示带有箭头的下拉菜单的图像](../Images/d91d2b6790f8d24ab32bf1ddd81c7a22.png)

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-10T17:29:27.943

据我所知，您目前无法禁用它。这里正在进行讨论：https: [//plus.google.com/102860501900098846931/posts/hTcMLVNKnec](https://plus.google.com/102860501900098846931/posts/hTcMLVNKnec)

也许他们会添加一些`-webkit`选择器来控制样式。

现在你可能不得不`<input type="text">`改用。

**编辑：**

根据[Jeremy 的回答](https://stackoverflow.com/a/15373370/206614)，现在可以移除箭头和旋转按钮。详细信息可以在 webkit.org 上找到：[样式化表单控件 - WebKit](http://trac.webkit.org/wiki/Styling%20Form%20Controls#inputelement)

**隐藏**控件的 CSS是：

```
<input type="date" class="unstyled" />

.unstyled::-webkit-inner-spin-button,
.unstyled::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
} 
```

但是，这只会**隐藏**而不**禁用**本机日历！- 您仍然可以通过按`Alt`+激活日历`Down Arrow`（至少在 Windows 上）。

要禁用，您需要添加一些 JavaScript，如上述 webkit.org 页面所述：

```
<input type="date" id="dateInput" class="unstyled" />

dateInput.addEventListener('keydown', function(event) {
    if (event.keyIdentifier == "Down") {
        event.preventDefault()
    }
}, false); 
```

你可以看到它在[这个 jsfiddle](http://jsfiddle.net/jfrej/RgY3t/)中工作。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-12T22:19:24.113

在撰写本文时，webkit 已经引入了控件来处理这个问题：

```
input[type="date"]::-webkit-calendar-picker-indicator{
    /* Your CSS here */
}
input[type="date"]::-webkit-inner-spin-button {
    /* Your CSS here */
} 
```

因此，对于这个特定问题，它将是：

```
input[type="date"]::-webkit-calendar-picker-indicator,
input[type="date"]::-webkit-inner-spin-button{
    display: none;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-02-26T16:57:40.960

添加到@jfrej：（*目前无法评论）*

要杀死所有效果 chrome 适用于输入您还需要清除“x”（清除）按钮。 *::-webkit-清除按钮*

防止显示默认文本。哪个不是占位符或值，您可以使用 *::-webkit-datetime-edit-fields-wrapper* 但请注意，您再也看不到该值了。

```
.unstyled::-webkit-clear-button {
    display: none;
    -webkit-appearance: none;
}

#dateInput:not([value])::-webkit-datetime-edit-fields-wrapper,
#dateInput[value=""]::-webkit-datetime-edit-fields-wrapper { 
    visibility: hidden;
} 
```

[http://fiddle.jshell.net/RgY3t/66/](http://fiddle.jshell.net/RgY3t/66/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T17:57:46.183

我不认为现在可以。他们正在研究一个名为[Shadow DOM](http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/)的概念，它允许您操作和设置默认模板的样式。我相信它在 Chrome Canary 中可用，因此您可以尝试使用它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-15T08:01:03.830

你可以这样说

```
input[type="date"]::-webkit-calendar-picker-indicator{
       background-image: url(images/calendar-icon.png);
       background-position: center;
       background-size: 20px 20px;
       background-repeat: no-repeat;
      color: rgba(204,204,204,0);
} 
```

通过将颜色属性设置为 0 不透明度，您将使箭头消失

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-07T21:51:15.680

```
 input[type="date"] {
        &::-webkit-inner-spin-button,
        &::-webkit-calendar-picker-indicator {
            -webkit-appearance: none;
            position: absolute;
            right: 0;
            opacity: 0;
        }
        width: 100%;
    } 
```

在这里，我在最右边有一个很棒的伪图标（插入符号）。因此，我将日历图标放在该位置，每当用户单击插入符号时，它都会执行不可见日历图标的功能

# java - Jpa 事务 javax.persistence.RollbackException：事务标记为 rollbackOnly

> ID：11418290
> 
> 赞同：4
> 
> 时间：2012-07-10T17:02:31.893
> 
> 标签：java, spring, jpa

我有一个应用程序通过 jpa 对各种数据库表进行大量写入。其中一项写入可能会导致乐观锁异常。如果抛出一个，这没什么大不了的，我希望其余的事务提交。

我通过以下方式查看了 spring 事务的不回滚功能：

```
<bean id="transactionTemplate" class="org.springframework.transaction.support.TransactionTemplate">
    <constructor-arg ref="transactionManager"/>
    <constructor-arg ref="ignoreOptimisticLockingExceptionRule"/>
</bean>
<bean id="ignoreOptimisticLockingExceptionRule" class="org.springframework.transaction.interceptor.RuleBasedTransactionAttribute">
    <property name="rollbackRules">
        <list>
            <bean class="org.springframework.transaction.interceptor.NoRollbackRuleAttribute">
                <constructor-arg value="javax.persistence.OptimisticLockException"/>
            </bean>
        </list>
    </property>
</bean>
<bean class="org.springframework.orm.jpa.JpaTransactionManager"
    id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

我的应用程序在将引发此异常的实体的合并方法周围捕获 OLException，但事务仍会回滚。我做了一些挖掘以查看发生了什么，并且在 JpaTransactionManager 的 doCommit 方法中 javax.persistence.RollbackException: Transactionmarked as rollbackOnly 被抛出。它被抛出是因为 rollbackOnly 标志（在 TransactionImpl 中）被标记为真。

深入研究，我看到 AbstractEntityMangerImpl 中的 merge 方法最终将事务标记为 rollbackonly，然后进一步触发异常。不过，我看不到 RuleBasedTransactionAttributes 的应用位置。我不知道我是否正确设置了该设置。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:58:25.047

JPA 规范要求在发生 OptimisticLockException 时将事务标记为回滚。而且我不知道您使用哪个 JPA 引擎，但至少对于 Hibernate（我希望其他引擎也一样），文档说：

> 如果 Session 抛出异常，包括任何 SQLException，立即回滚数据库事务，调用 Session.close() 并丢弃 Session 实例。Session 的某些方法不会使会话保持一致状态。Hibernate 抛出的任何异常都不能被视为可恢复的。通过在 finally 块中调用 close() 确保 Session 将被关闭。

所以如果你遇到这样的异常，你最好的办法是让事务回滚，然后重试。

# python - 在 Python 不同编码上打开多个文件

> ID：11418300
> 
> 赞同：0
> 
> 时间：2012-07-10T17:03:14.677
> 
> 标签：python, python-3.x, python-2.7

我在一个文件夹中保存了很多文件。现在我想阅读所有这些。它们有不同的格式和不同的编码。使用`listdir/glob.glob`我可以找到列表，但是如何`open/read`为不同的编码处理或处理它们？

如果有人可以帮助我。我在 Windows 上使用 Python3.2。

问候， Subhabrata Banerjee。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:21:56.157

假设您知道哪些文件采用哪些编码，请使用[codecs.open()](http://docs.python.org/py3k/library/codecs.html?highlight=codec#codecs.open)。它的工作方式几乎与常规的 open() 完全相同，但需要一个可选的编码参数。

如果您不知道哪些文件采用哪些编码，那就更难了。您可以尝试类似[chardet或](http://pypi.python.org/pypi/chardet)[此问题](https://stackoverflow.com/questions/436220/python-is-there-a-way-to-determine-the-encoding-of-text-file)的其他答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:16:36.807

`open(fp)`是在 python 中打开文件的标准方法，请参见：[http ://docs.python.org/library/functions.html#open](http://docs.python.org/library/functions.html#open)

[一旦打开，您可以按照http://docs.python.org/library/stdtypes.html#bltin-file-objects](http://docs.python.org/library/stdtypes.html#bltin-file-objects)`.read()`的指定读取文件

编码将更加棘手，并且将基于您如何知道每个文件使用什么编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:24:14.677

正如[Jeremiah 所写](https://stackoverflow.com/a/11418564/1346705)的 (for )，`codecs.open()`对于 Python 2 的作用与现代化`open()`对 Python 3 的作用相同。`encoding`参数说明了文件内部使用的编码。

但是，**重要的区别**是如果`codecs.open()`使用，则读取的行是 unicode 字符串（并且要写入的行应该是 unicode 字符串），而不是普通的旧字符串（即字节序列）。在 Python 3 中感觉更自然一些，但在 Python 2 中也可以这样做。

我建议阅读 Mark Pilgrim 的*Dive Into Python 3*，[第 4 章。字符串](http://getpython3.com/diveintopython3/strings.html)。

他的[第 15 章案例研究：将 chardet 移植到 Python 3](http://getpython3.com/diveintopython3/case-study-porting-chardet-to-python-3.html)解释了上述`chardet`模块的工作原理。

# c# - 忽略 TransactionScope 中的 SqlTransaction.Commit

> ID：11418301
> 
> 赞同：8
> 
> 时间：2012-07-10T17:03:16.017
> 
> 标签：c#, entity-framework, transactions, transactionscope

我们正在逐步用实体框架 (4.3.1) 替换遗留数据访问代码。在某些情况下，我们无法避免在一个工作单元中同时使用两种数据访问方式。理想情况下，这应该在一个事务中完成。但是，旧代码使用s在完成工作单元并且 EF 管理自己的事务时`SqlTransaction`调用。`Commit()`

所以我们想到将“旧”和“新”代码包装在一个[`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx). `TransactionScope`但是，即使`TransactionScope`未完成，始终会执行周围环境中的 Commit 。此代码段说明了我的问题：

```
using (var conn = new SqlConnection("connection string"))
{
  conn.Open();
  using (var scope = new TransactionScope())
  {
    using (var tr = conn.BeginTransaction())
    {
      using (var cmd = conn.CreateCommand())
      {
        cmd.Transaction = tr;
        cmd.CommandText = "some update statement";
        cmd.ExecuteNonQuery();
      }
      tr.Commit();
    }
    // In reality the code above is part of a legacy DAL, immutable.
    // (can't insert SaveChanges before tr.Commit).
    context.SaveChanges();
    if (<all ok>) // pseudo code for exception handling.
        scope.Complete(); 
  }
} 
```

未命中时*仍会提交*更新语句。`scope.Complete()`

所以看起来，我不能`TransactionScope`用来强制旧的数据访问代码和`SaveChanges`来自上下文的 a 在一个事务中执行。**或者有没有办法推翻 SqlTransaction.Commit 语句？**

我知道这里有更多关于 TransactionScope 和 SqlTransaction 的帖子，但他们都（正确地）说在使用 TransactionScope 时不需要（也不推荐）使用 SqlTransaction。但是这里不使用 SqlTransaction 不是一个选项。我们有一个遗留框架，它提交自己的`SqlTransaction`s 并且没有 api 来挂钩其事务机制。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T19:22:33.183

> 当 scope.Complete() 没有被命中时，更新语句仍然被提交。

**不好了！！未使用 TransacationScope ¹。**

仅当连接在 TransactionScope*之后*（或*内部*）打开时，自动登记*才有效。*

 **将`Open` *内部放入*`TransactionScope` *应该可以*解决此问题（即使使用手动事务？），因为 Connection 将 [通常] 在环境 TS 上下文中自动登记。

可以将现有连接登记到环境事务范围中：`connection.EnlistTransaction(Transaction.Current)`.

或者，TS 可以从现有事务中创建，例如`new TransactionScope(transaction)`，这里可能有用也可能没有帮助。

如果完全没问题，创建手动事务，但是 TS（在找出问题之后！）使处理事务变得更简单和更容易.. 至少在大多数情况下:)

快乐编码！

* * *

¹ TS 未用于“更新语句”。它仍将 [可能] 用于，`context.SaveChanges()`因为这将打开一个*新*连接，然后自动登记。

我在上面提供了一些选项，尽管我不确定普通的“嵌套”事务。查看上下文中使用的（密封的？）API 可能会揭示更多关于限制/限制的见解。**

# wordpress - 使用 FTP 和 Wordpress 的组和 root 权限

> ID：11418302
> 
> 赞同：0
> 
> 时间：2012-07-10T17:03:23.610
> 
> 标签：wordpress, ubuntu

我有一个vps。我已经安装了wordrpess。但是每次我安装或尝试进行编辑时，我都需要使用 ssh（root 帐户）来完成，因为我创建的已添加到管理员组的 FTP 帐户没有足够的权限来编辑文件。

我想知道我应该怎么做才能让 FTP 帐户拥有所有 root 权限。而且我不必一直使用 root (ssh) 帐户。这个ftp账号也是系统账号。每次我尝试进行更改时，都会收到 550 CHMOD 错误。

我正在使用 vsftpd 在我的 vps 上运行 Ubuntu。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:20:44.050

以 root 身份使用 ftp 是一个坏主意，但您应该能够根据

[http://forums.fedoraforum.org/showthread.php?t=96366](http://forums.fedoraforum.org/showthread.php?t=96366)

> 编辑文件 /etc/vsftpd.ftpusers 和 /etc/vsftpd.user_list 并从每个文件中删除“root”行。

该文件可能会有所不同，具体取决于您使用的发行版。

# javascript - Twitter Bootstrap TypeAhead 与 PlusAsTab

> ID：11418306
> 
> 赞同：1
> 
> 时间：2012-07-10T17:03:48.947
> 
> 标签：javascript, twitter-bootstrap, typeahead

我有一个表单（HTML），我想在其中使用 Enter 键导航元素（Enter 键应该像 Tab 一样）。为了实现这个功能，我使用了[PlusAsTab](https://github.com/joelpurra/plusastab)库。我还需要其中一个文本框的自动完成功能。对于自动完成功能，我使用的是 Twitter Bootstrap 中的 TypeAhead。

所以我同时使用 PlusAsTab 和 Twitter Bootstrap。现在，使用 Enter 键的 PlusAsTab 导航可以很好地处理与 TypeAhead 关联的元素以外的元素。对于与 TypeAhead 关联的元素，我需要按两次 Enter 进行导航。我尝试调试但不成功。我对 Javascript 很陌生，因此无法正确调试它。

**请在[JSFiddle](http://jsfiddle.net/prdinesh/qMtfA/6/)中找到代码。**

为了方便起见，我也在这里附上了代码

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>Trial</title>
 <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
</head>

<body>

<div class="plus-as-tab form-inline" id="transtable">
<select class="span1" autofocus="autofocus"><option>Dr</option><option>Cr</option></select>
<select class="span4">
    <option>SelectAccount</option>
    <option>GodAccount</option>
    <option>SundryCreditors</option>
    <option>SundryDebtors</option>
    <option>Capital</option>
    <option>Cash</option>
    <option>Sales</option>
</select>
 <input type="text" class="span4" placeholder="Narration" style="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source='["ChequeNo : ","Account No : ","No : ","On Canara Bank : " ]'>

<div class="input-prepend">
    <span class="add-on">Rs</span><input class="span3" size="12" type="text" onchange="nextrow(this)" onkeypress="return allowonlynum(event)">
</div>
    </div>

    <script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://joelpurra.github.com/plusastab/lib/emulatetab/src/emulatetab.joelpurra.js"></script>
<script src="http://joelpurra.github.com/plusastab/src/plusastab.joelpurra.js"></script>
    <script src="https://raw.github.com/twitter/bootstrap/master/js/bootstrap-typeahead.js"></script>
    </body>
</html>
​ 
```

请帮助我进一步调试此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:42:56.273

在朋友的帮助下，我暂时解决了这个问题。在[PlusAsTab](https://github.com/joelpurra/plusastab)库中，我又添加了一个调用来聚焦下一个元素，即，它将尝试聚焦下一个元素两次。我知道这不是正确的解决方案，但它正在解决我的问题。

# jpa - 自身实体实现的“一对多”和“多对一”关联；违反唯一约束

> ID：11418307
> 
> 赞同：0
> 
> 时间：2012-07-10T17:03:52.733
> 
> 标签：jpa

我想实现如下映射。我有一些产品和文章。一个产品关联了许多文章。此外，这种关系具有特殊属性，例如返回码。所以关联表应该是这样的。

```
Product_FK | Article_FK | return code
       1   |    1       |      0
       1   |    1       |      1
       1   |    2       |      1 
```

目前，我通过两个协会意识到了这一点。“一（产品）对多（关系表）”和“多（关系表）对一（文章）”关联。

这些实体被注释为休闲：

产品实体：

```
@Entity(name = "product")
@Table(name = "PRODUCT")
public class ProductDTO implements BaseEntityDTO {

   private static final long serialVersionUID = -6613561719098236228L;

   @Id
   @Column(name = "PRODUCT_PK")
   @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "product_pk_seq")
   @SequenceGenerator(name = "product_pk_seq", sequenceName = "product_pk_seq",   allocationSize = 1)
   protected Long pk;

   @OneToMany(cascade = CascadeType.ALL, mappedBy="product")
   private List<ProductArticleRelationDTO> product2article = new ArrayList<ProductArticleRelationDTO>();
  ...
  } 
```

ProductArticleRelation 实体：

```
@Entity(name = "productArticleRelation")
@Table(name = "PRODUCT_2_ARTICLE")
public class ProductArticleRelationDTO implements BaseEntityDTO {

       private static final long serialVersionUID = -1134854397447263839L;

   @Id
   @Column(name = "PRODUCT_2_ARTICLE_PK")
   @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "product2article_pk_seq")
   @SequenceGenerator(name = "product2article_pk_seq", sequenceName = "product2artikle_pk_seq", allocationSize = 1)
   protected Long pk;

   @Override
   public Long getPk() {
    return pk;
   }

   @Override
   public void setPk(long pk) {
    this.pk = Long.valueOf(pk);
   }

   @ManyToOne(cascade = CascadeType.ALL)
   @JoinColumn(name = "PRODUCT_FK")
   private ProductDTO product = null;

   @ManyToOne(cascade = CascadeType.ALL)
   @JoinColumn(name = "ARTICLE_FK")
   private ArticleDTO article = null;

   @Column
   private int returnCode;
     ...
 } 
```

文章实体：

```
@Entity(name = "article")
@Table(name = "ARTICLE")
public class ArticleDTO implements BaseEntityDTO {

   private static final long serialVersionUID = 4397348044985703865L;

   @Id
   @Column(name = "ARTICLE_PK")
   @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "article_pk_seq")
   @SequenceGenerator(name = "article_pk_seq", sequenceName = "article_pk_seq", allocationSize = 1)
   protected Long pk;

   @Override
   public Long getPk() {
    return pk;
   }

   @Override
   public void setPk(long pk) {
    this.pk = Long.valueOf(pk);
   }

   @OneToMany(cascade = CascadeType.ALL, mappedBy = "article")
   private final List<ProductArticleRelationDTO> product2article = new ArrayList<ProductArticleRelationDTO>();

 ...
 } 
```

我很确定注释是错误的。如果我想保留一个添加了一些 productArticleRelations 的产品，我会得到一个唯一的约束违规。

```
 for(ProductArticleRelationDTO relation : newProduct2Article) {
    product.addProduct2Article(relation);

  if(!em.contains(product))
        if(product.getPK() == null)
            em.persist(product);
        else 
        product = em.merge(product);
  else
    em.flush(); 
```

例外：

```
 Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
    Internal Exception: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: Unique Constraint (BC7_BPV.PK_ARTICLE) violated
    Error Code: 1
    Query: InsertObjectQuery(bc7.bpv.common.dto.ProductDTO@38f2f) 
```

我不太确定的是，如果我需要 productArticleRelation 实体。这意味着是否可以通过一个关联“一个（产品）到多个（文章）”和一个具有“返回代码”作为属性的特殊连接表来处理这种类型？

编辑：我忘了，这种关系应该是双向的。

我在数据库中的表是休闲的（为了简化只显示重要的列）：

产品：

```
 | PRODUCT_PK | ... | 
```

文章：

```
 | ARTICLE_PK | ... | 
```

PRODUCT_2_文章：

```
 | PRODUCT_2_ARTICLE_PK | PRODUCT_FK | ARTICLE_FK | RETURNCODE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:49:42.640

首先也是最重要的：`@JoinColumn`应该在拥有方进行注释，即`ProductArticleRelationDTO`仅在。`Product`从和中完全删除它`Article`。要映射集合，您应该使用`@OneToMany(cascade = CascadeType.ALL, mappedBy="property")`，其中 property 是映射属性的 java 名称。在这种情况下，“产品”或“文章”取决于类别。

关于ProductArticleRelationDTO的必要性：只要你需要访问java中的返回码就需要它。如果它只是一个 ManyToMany 映射表，您可以跳过它并直接将 Product 映射到 Article，但现在情况并非如此。

试试这个并评论，如果它不能解决你的问题。

# ruby-on-rails - 在 RESTful 服务中处理多个资源请求

> ID：11418308
> 
> 赞同：1
> 
> 时间：2012-07-10T17:03:57.047
> 
> 标签：ruby-on-rails, rest, restful-url, restful-architecture

我对如何处理传递多个资源的请求感到困惑。

我有以下层次结构。项目有可交付成果，可交付成果有文档。所以项目->可交付成果->文档。

对于特定于文档的自定义操作，比如说 change_status，我有诸如 /projects/1/deliverables/1/documents/1/change_status 之类的路由。至此一切都好。

但是，当我想在多个文档上更改状态时，最佳实践是什么？/projects/1/deliverables/1/documents/change_status （传递文档ID数组）似乎不是RESTFul，因为我的理解是在“文档”之后应该存在特定的ID。

/projects/1/deliverables/1/change_status （传递一组文档ID）并不能说服我有两个原因。首先，将调用我的可交付成果控制器（按照 Rails 中的约定），而且您似乎正在更改可交付成果而不是文档的状态。鉴于可以在文档中更改状态，我认为生成的 url 令人困惑，特别是如果您也可以将状态更改为可交付成果（您如何区分将状态更改为可交付成果或文档，在这种情况下 url 将是相同的） .

所以基本上我对如何处理在 RESTFul 中处理多个资源的请求感到困惑。非常感谢任何帮助/澄清！谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:59:05.923

基本的 RESTful URL 约定绝对不是要在所有情况下都虔诚地应用，当您超出标准 CRUD 场景时，您需要使用最佳判断来判断什么是有意义的。

如果您打算始终更改可交付成果中文档的状态，那么我会选择（就像您建议的那样）：/projects/1/deliverables/1/documents/change_status

如果您计划跨可交付成果和项目更改文档的状态，那么我将使用单独的路径直接访问文档，例如：/documents/change_status

无论哪种方式，您都需要传递一个 document_id 参数数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:01:59.540

此外，您应该只在 URL 中调用状态子资源“状态”，而不是 change_status。

```
PATCH /documents/status HTTP/1.1

approved=true&id=7&id=12 
```

# ruby-on-rails - 缺少模板 - 导轨

> ID：11418311
> 
> 赞同：1
> 
> 时间：2012-07-10T17:04:02.333
> 
> 标签：ruby-on-rails, ruby, templates

这是我项目中视图的结构

```
app
  |
   - views
         | admin
               |
               sidebar.html.erb
         |
         layouts
               |
               admin.html.erb 
```

admin.html.erb 的内容

```
<html>
<head>
  <title>Blog</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
    <div id="container"> <!-- Container begins here -->

<%= render "admin/sidebar" %>

<%= yield %>

    </div> <!-- END Content -->
</div> <!-- END Primary -->

<div class="clear"></div>
</div> <!-- END Container -->

</body>
</html> 
```

我得到这个错误

```
Missing partial admin/sidebar with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "/Users/me/blog/app/views"
  * "/Users/me/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/app/views" 
```

我尝试了不同的侧边栏路径，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:07:35.307

它应该是“_sidebar.html.erb”。部分文件名需要以“_”开头。

# php - 用 PHP 转换特殊字符

> ID：11418313
> 
> 赞同：0
> 
> 时间：2012-07-10T17:04:07.073
> 
> 标签：php, string, special-characters

我正在尝试将标准的 wordpress 标题转换为 slug，使所有字符小写，用破折号替换空格，并删除标题中的所有“&”符号。

所以让我们以这个标题为例：“**身份与寻路**”

这是我的PHP：

```
<?php 
$title = get_the_title(); 
$lower = strtolower($title);
$noDash = str_replace(' ', '-', $lower);
$noAnd = str_replace('&', '', $noDash);
echo $noAnd;
?> 
```

这将我的标题变成“ **identity-#038;-wayfinding** ”

小写转换有效，但将“&”替换为空无效。它将“&”转换为 HTML 特殊字符。知道如何简单地将“&”替换为空白，还可以删除之后的破折号，因此最终标题为：**“identity-wayfinding”**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:12:48.103

如果你想要一个 slug，有很多实用程序可以为你做这件事，但 htmlentities 或 urlencode 都不正确。Doctrine 1.2 包含一个`urlizer`具有一组静态函数的类，包括`urilize`它将以更健壮的方式完成您想要的行为（正确处理 UTF-8 和取消重音等）

可以在[这里找到](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/lib/Gedmo/Sluggable/Util/Urlizer.php)

如果你想要一些不太健壮但更简单的东西：

```
function slugify($sluggable)
{
    $sluggable = preg_replace("/[^a-zA-Z0-9\/_|+ -]/", '', $sluggable);
    $sluggable = trim($sluggable, '-');
    if( function_exists('mb_strtolower') ) { 
        $sluggable = mb_strtolower( $sluggable );
    } else { 
        $sluggable = strtolower( $sluggable );
    }
    $sluggable = preg_replace("/[\/_|+ -]+/", '-', $sluggable);

    return $sluggable;
} 
```

这将去除非字母数字字符（但也包括重音字符）并将空格、+ 符号和连字符变成连字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:09:16.397

使用[str_replace](http://php.net/manual/en/function.str-replace.php)，首先删除“”（空格），然后删除“-”，然后将 & 替换为破折号。

```
$title = "Identity & Wayfinding";
$title = strtolower(str_replace(array(" ","-","&"),array("","","-"),$title));

echo $title; // returns: identity-wayfinding 
```

[示例@viper7](http://codepad.viper-7.com/MIzhIJ)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:22:19.073

你可能在谈论蛞蝓，看这些：

*   [Slug URL 生成函数覆盖Ç](https://stackoverflow.com/questions/11183010/slug-url-generation-function-overriding-the)
*   [逃脱和制造蛞蝓的最佳方法](https://stackoverflow.com/questions/2580581/best-way-to-escape-and-create-a-slug)（以及其中链接的文章）
*   或任何以前链接的答案[SEO 友好链接、js 和/或 php 剥离](https://stackoverflow.com/questions/4758881/seo-friendly-links-js-and-or-php-stripping)在这里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:24:27.303

使用此代码：

```
 <?php
function create_slug($string){
$slug=preg_replace('/[^A-Za-z0-9-]+/', '-', $string);
$slug=ltrim($slug, "-");
$slug=rtrim($slug, "-");
return strtolower($slug);
}
echo create_slug('does this thing work or not');
//returns 'does-this-thing-work-or-not'

echo "<br />";
echo create_slug('"Identity & Wayfinding"');
?> 
```

[现场示例](http://codepad.viper-7.com/fk7Fnl)

当然如果你想在 Wordpress 中使用这个功能，你只需要使用这个：

```
<?php sanitize_title( $title, $fallback_title ) ?> 
```

其中，`$title`是输入字符串 &`$fallback_title`是默认值，如果`$title`输出为空。在此处阅读更多内容：[Wordpress 函数参考/清理标题](http://codex.wordpress.org/Function_Reference/sanitize_title)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T17:25:26.593

这是我使用的功能。

```
function text_as_url($str='', $separator = 'dash', $lowercase = false){
    if ($separator == 'dash'){
        $search     = '_';
        $replace    = '-';
    } else {
        $search     = '-';
        $replace    = '_';
    }

    $trans = array(
                    '\/'                    => '-',
                    '&\#\d+?;'              => '-',
                    '&\S+?;'                => '-',
                    '\s+'                   => $replace,
                    '[^a-z0-9\-\._]'        => '', // accents
                    $replace.'+'            => $replace,
                    $replace.'$'            => $replace,
                    '^'.$replace            => $replace,
                    '\.+$'                  => '-'
                );

    $str = strip_tags($str);

    foreach ($trans as $key => $val){
        $str = preg_replace("#".$key."#i", $val, $str);
    }

    if($lowercase === true){
        $str = strtolower($str);
    }

    return trim(stripslashes($str));
} 
```

# java - 多路网络摄像头馈入一个馈送

> ID：11418318
> 
> 赞同：1
> 
> 时间：2012-07-10T17:04:40.597
> 
> 标签：java, webcam, feed, multiplexing

我想开发一个应用程序来将多个网络摄像头的流组合成一个流。3个月以来，这个想法一直在我脑海中浮现。

该应用程序将接收来自最多 2 个网络摄像头的输入提要，将它们组合成一个提要（分屏）或一次选择一个提要，然后将生成的提要发送到 Skype 等程序。

这是一个流程图： ![在此处输入图像描述](../Images/aad5d9430a0b5469e87258f66b5c38d3.png)

这里有 3 个步骤：

*   从 USB 网络摄像头获取信息
*   将提要合二为一
*   将结果发送到 Skype（创建 Skype 可检测到的虚拟摄像头）

这样做的最佳方法是什么？

有什么特殊的处理吗？

我擅长Java。

# jquery - 将值传递给 ajaxform 数据

> ID：11418319
> 
> 赞同：1
> 
> 时间：2012-07-10T17:04:45.003
> 
> 标签：jquery

我想将变量的值传递给 ajaxForm 数据。

```
value1 = "dynamic_value1";
value2 = "dynamic_value2";
$('form').ajaxForm({
    data: {
      key1: value1, 
      key2: value2 
    }
}); 
```

期待类似的东西：

```
date:{Key1:"dynamic_value1", Key2:"dynamic_value2"} 
```

所以在php中我可以访问

```
echo $_POST['key1']; 
```

======================= 完成脚本

```
<script src="../../bin/addons/jquery-1.7.2.js"></script>
<script src="../../bin/addons/jquery.form.js"></script>
<script>
// jQuery Form-plugin 
(function() {
  var value1 = "dynamic_value1";
  var value2 = "dynamic_value2";
  $('.dummyForm1').ajaxForm({
    data:{
      key1: value1,
      key2: value2
  }
  complete: function(xhr) {
      txt = xhr.responseText;
      alert(txt);
  }
}); 
})(); 
</script>

<form class="dummyForm1" action="form-php.php" method="post">
    <input type="submit" value="Hit!" />
</form> 
```

表单-php.php

```
<?
  echo "Key1 value:". $_POST['key1'];
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T18:09:37.800

您在 data 属性后缺少逗号。

试试这个：

```
(function () {
    var value1 = "dynamic_value1";
    var value2 = "dynamic_value2";
    $('.dummyForm1').ajaxForm({
        data: {
            key1: value1,
            key2: value2
        }, //You were missing this comma.
        complete: function (xhr) {
            txt = xhr.responseText;
            alert(txt);
        }
    });
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T20:11:51.453

给定解决方案的问题是 ajaxform 将在调用事件处理程序时填充变量。

```
var value1 = "dynamic_value1";
/*This will be sent*/
var value2 = "dynamic_value2";
(function () {
    $('.dummyForm1').ajaxForm({
        data: {
            /*On load of event handler the values are set, they are not dynamic anymore*/
            key1: value1,
            key2: value2
        },
        complete: function (xhr) {
            txt = xhr.responseText;
            alert(txt);
        }
    });
})();
/*This will not be sent*/
value2 = "new value"; 
```

您可以使用函数返回全局变量的当前状态

```
var value1 = "dynamic_value1";
/*This will not be sent*/
var value2 = "dynamic_value2";
(function () {
    $('.dummyForm1').ajaxForm({
        data: {
            /*On load of event handler the values are set, they are not dynamic anymore*/
            key1: value1,
            key2: function () {
                /*this returns the current state of the global variable*/
                return value2;
            }
        },
        complete: function (xhr) {
            txt = xhr.responseText;
            alert(txt);
        }
    });
})();
/*This will be sent*/
value2 = "new value"; 
```

# sql - 从每一行制作一个长字符串

> ID：11418323
> 
> 赞同：1
> 
> 时间：2012-07-10T17:05:00.273
> 
> 标签：sql, string, tsql, stored-procedures, varchar

我正在尝试从评论中制作一个长字符串，并创建了这个 sp

```
ALTER FUNCTION ugurcode.comment_summary
    (
    @opinionid int
    )
RETURNS nvarchar(max)
AS
    BEGIN
    declare @cs nvarchar(max);
    select @cs+=comment+'\n' from fev_comment where opinionid=@opinionid
    RETURN @cs/* value */
    END 
```

这返回null，我还能如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:06:21.017

代替

```
declare @cs nvarchar(max); 
```

和

```
declare @cs nvarchar(max) = ''; 
```

串联`NULL`返回`NULL`。

顺便说一句：微软说“[聚合连接查询的正确行为是未定义的。](http://support.microsoft.com/kb/287515/en-us) ”这种方法可能会中断。您可能希望改为查看`XML PATH`（请参阅[在 Transact-SQL 中连接行值](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)）。

# php - 从 mysql 表中更新和删除信息

> ID：11418325
> 
> 赞同：0
> 
> 时间：2012-07-10T17:05:03.283
> 
> 标签：php, mysql

我刚刚开始掌握 PHP，并做了一些 MySql 与它的接口，如下所示。我无法让这个脚本工作，因为它部分来自一本书，我认为我在某个地方出错了。它让我发疯！

任何帮助将不胜感激和感谢。

```
<?php

require_once "login.php";

$db_server = mysql_connect($db_hostname,$db_username,$db_password);

if(!$db_server)
{
die("Couldn't connect to MySql" . mysql_error());
}

mysql_select_db($db_database,$db_server) 
or die("Sorry, couldn't connect to database" . mysql_error());

if(isset($_POST['delete']) && isset($_POST['isbn']))
{
$isbn = get_post('isbn');
$query="DELETE FROM classics WHERE isbn='$isbn'";

if(!mysql_query($query,$db_server)){
echo "Delete failed: $query ". mysql_error() . "<br/><br/>";    
}

if(isset($_POST['author']) &&
    isset($_POST['title']) &&
    isset($_POST['category']) &&
    isset($_POST['year']) &&
    isset($_POST['isbn'])){

    $author = get_post('author');
    $title= get_post('title');
    $category = get_post('category');
    $year = get_post('year');
    $isbn = get_post('isbn');

    $query="INSERT INTO classics VALUES".
    "('$author','$title','$category','$year','$isbn')";

    if(!mysql_query($query,$db_server)){
    echo "Update content of table failed: ". mysql_error() . "<br/><br/>";
    }
  }
 echo <<<_SOQ

 <form action="sqltest.php" method="post">
  <pre>
    Author <input type="text" name="author"/>
    Title <input type="text" name="title"/>
  Category <input type="text" name="category"/>
    Year <input type="text" name="year"/>
    ISBN <input type="text" name="isbn"/> 
    <input type="submit" value="ADD RECORD"/>
  </pre>
 </form>
 _SOQ;

  $query = "SELECT* FROM classics";       
  $result = mysql_query($query);

  if(!$result) die("Database access failed: " .mysql_error());
  $rows = mysql_num_rows($result); 

  for($i=0;$i<$rows;++$i){

   $row = mysql_fetch_row($query); 
   echo <<<_SOQ

  <pre>

  Author $row[0]; 
   Title $row[1]; 
Category $row[2];
   Year: $row[3];  
   ISBN: $row[4];  

  </pre>

 <form action="sqltest.php" method="post">      
 <input type="hidden" name="delete" value="yes"/>
 <input type="hidden" name="isbn" value="$row[4]"/>      
 <input type="submit" value="DELETE RECORD"/>      
 </form>
 _SOQ; 

}     

 mysql_close($db_server);       

 function get_post($var){
 return mysql_real_escape_string($_POST[$var]);   
 } 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:57:15.293

看起来您的以下内容没有右括号：

```
if(isset($_POST['delete']) && isset($_POST['isbn'])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:11:16.893

我认为您需要一个额外的右括号：

```
if (isset($_POST['delete']) && isset($_POST['isbn'])) {
    $isbn = get_post('isbn');
    $query="DELETE FROM classics WHERE isbn='$isbn'";

    if(!mysql_query($query,$db_server)){
        echo "Delete failed: $query ". mysql_error() . "<br/><br/>";    
    }
} 
```

我已经添加了第二个右大括号 - 它现在可以编译吗？

编辑添加：

您的结束 HEREDOC 引用 ( `_SOQ`) 都由空格缩进 - 您不能在带有结束标记的行的开头有任何空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:04:49.863

非常感谢大家昨天的帮助。我现在已经设法对这个脚本进行排序。各种错字和轻微错误是问题所在，主要是为了理解。再次感谢。

```
<?php

require_once "login.php";

$db_server = mysql_connect($db_hostname,$db_username,$db_password);
if(!$db_server) die("Sorry, MySql connection failure: " . mysql_error());

mysql_select_db($db_database, $db_server) 
    or die("Sorry, DB connection failure: " . mysql_error());

/*Code to test for deletion of a field of the table*/

if(isset($_POST['delete']) && isset($_POST['isbn']))
{
$isbn = get_post('isbn');
$query = "DELETE FROM classics WHERE isbn='$isbn'";

if(!mysql_query($query)) die("Sorry, deletion failed: $query" . "<br/><br/>");
}

/*Code to enter fields of the table*/

if(isset($_POST['author']) &&
isset($_POST['title']) &&
isset($_POST['category']) &&
isset($_POST['year']) &&
isset($_POST['isbn']))
{

$author = get_post('author');    
$title = get_post('title');        
$category = get_post('category');       
$year = get_post('year');      
$isbn = get_post('isbn');  

$query = "INSERT INTO classics VALUES".
        "('$author','$title','$category','$year','$isbn')";

if(!mysql_query($query)) die("Update: $query failed" . mysql_error());

}

 echo<<<_SOQ
 <form action="sqltest.php" method="post"><pre>
 Author:   <input type="text" name="author"/>   
 Title:    <input type="text" name="title"/>      
 Category: <input type="text" name="category"/>   
 Year:     <input type="text" name="year"/>
 ISBN:     <input type="text" name="isbn"/>   
 <input type="submit" value="ADD RECORD"/>   
 </pre></form> 
```

_SOQ;

```
$query = "SELECT* FROM classics";
$result = mysql_query($query);

if(!$result) die("Sorry couldn't get the resource" . mysql_error());

$rows = mysql_num_rows($result);

for($j=0;$j<$rows;++$j){
$row = mysql_fetch_row($result);

echo<<<_SOQ
<pre>
Author $row[0]
Title $row[1]
Category $row[2]
Year $row[3]
ISBN $row[4]

<form action="sqltest.php" method="post"><pre>
<input type="hidden" name="delete" value="yes"/>
<input type="hidden" name="isbn" value="$row[4]"/>
<input type="submit" value="DELETE RECORD"/> 
</pre></form> 
```

_SOQ; }

```
mysql_close($db_server);

function get_post($var){
  return mysql_real_escape_string($_POST[$var]);
} 
```

?>

# c++ - Qt 中的 SQLite 数据库

> ID：11418328
> 
> 赞同：1
> 
> 时间：2012-07-10T17:05:28.583
> 
> 标签：c++, qt, oracle11g

我正在研究 Qt C++ GUI，我试图将数据插入到数据库中的表中。

但这是我得到的错误：

> 没有这样的表：编写者无法执行语句。

这是我的代码：

```
#include <QtCore/QCoreApplication>

#include <QtSql>
#include<QtDebug>

int main(int argc, char *argv[])
{
QCoreApplication a(argc, argv);

QSqlDatabase db= QSqlDatabase::addDatabase("QSQLITE");
db.setHostName("FCOESL200656336");
db.setDatabaseName("ORCL");
db.setUserName("scott");
db.setPassword("lion");
db.open();

if(db.open())
{
    qDebug() << "Opened!";

     QString sQuery = " insert into  Writers(W_Id,W_Name,Age,Gender,Nationality,Hand_Used)Values(:W_Id,:W_Name,:Age,:Gender,:Nationality,:Hand_Used)";

             QSqlQuery qry;

             qry.prepare(sQuery);
             qry.bindValue(":W_Id",122);
             qry.bindValue(":W_Name","fgdgd");
             qry.bindValue(":Age",32);
             qry.bindValue(":Gender",'F');
             qry.bindValue(":Nationality","gfdg");
             qry.bindValue(":Hand_Used",'R');

      if( !qry.exec(sQuery) )
          qDebug() << qry.lastError().text();
      else
        qDebug( "Inserted!" );
    }
             else
            {
                  qDebug() <<"Connection failed" << db.lastError().text();
        }

 db.close();
 return a.exec();

     } 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-13T06:59:39.323

## `SQLITE`如果您尝试访问 Oracle 数据库，请不要使用驱动程序。

`SQLite`是一个基于文件的数据库，如 MS Access。因此，当您说*连接到数据库 ORCL*时，它正在寻找一个名为**`ORCL`**而不是尝试连接到您的 Oracle 11g 数据库的文件。

## 解决方案：

安装和配置***`QODBC`***驱动程序并使用它来代替***`SQLITE`***.

之后，表格应该是可见的。

# windows-phone-7 - WP7 自定义 UserControl 绑定

> ID：11418330
> 
> 赞同：0
> 
> 时间：2012-07-10T17:05:36.797
> 
> 标签：windows-phone-7, binding, user-controls

我创建了简单的带水印文本框

```
<Grid x:Name="LayoutRoot">
    <Grid>
        <TextBox Style="{StaticResource TextBoxStyle1}" Name="hint" TextWrapping="Wrap" FontSize="20" IsHitTestVisible="False" />
        <TextBox Name="text" TextWrapping="Wrap" Opacity="0" LostFocus="TextLostFocus" GotFocus="TextGotFocus" />
    </Grid>
</Grid> 
```

定义属性提示

公共字符串提示 { 获取 { 返回提示。文本；} 设置 { 提示。文本 = 值；} }

但我不能在 Hiht 属性上使用数据绑定。应用程序本地化为两种语言并提示 TextBox 必须以正确的语言显示文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:03:05.883

您需要将您的属性 (Hint) 声明为依赖属性以支持绑定到它。参见例如这个在线 [依赖属性声明创建工具](http://www.kirupa.com/blend_silverlight/dependency_property_generator.htm)。

# java - 用于加密/解密的 Java SimpleCrypto 类在 Coldfusion 9 和 Java (Android) 中产生不同的结果

> ID：11418336
> 
> 赞同：1
> 
> 时间：2012-07-10T17:06:21.080
> 
> 标签：java, android, encryption, aes, coldfusion-9

我正在尝试使用广泛使用的 SimpleCrypto java 类来加密 Java (Android) 中的字符串并解密 ColdFusion 9 中的字符串（反之亦然）。我已经将完全相同的 SimpleCrypto 类导入 ColdFusion 并像这样调用它：

```
<cfset myKey = "apple">
<cfscript>
    sc = createObject("java", "SimpleCrypto").init();
    encrypted = sc.encrypt(myKey, "john");
</cfscript>
<cfdump var="#encrypted#"> 
```

当使用“apple”密钥加密字符串“john”时，它在 CF 中输出：9E90A36325AE4F4F7352D6469A7068A2

当我在 Android 中使用 EXACT SAME 类时：

```
String key = "apple";    
try {
    sEncrypted = SimpleCrypto.encrypt(key, "john");
    Log.d(TAG, sEncrypted);
 } catch (Exception e) {
     e.printStackTrace();
 } 
```

日志输出：CBE2ADDBA9882F545DFEC1700E7CD518

不用说，我要疯了，因为这些结果是不同的。有谁知道为什么在 ColdFusion 和 Java 中使用相同的代码会产生不同的结果？任何帮助将不胜感激。

这是 SimpleCrypto.java 的源代码：

```
import java.security.SecureRandom;

import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

/**
 * Usage:
 * <pre>
 * String crypto = SimpleCrypto.encrypt(masterpassword, cleartext)
 * ...
 * String cleartext = SimpleCrypto.decrypt(masterpassword, crypto)
 * </pre>
 * @author ferenc.hechler
 */

public class SimpleCrypto {

    public static String encrypt(String seed, String cleartext) throws Exception {
            byte[] rawKey = getRawKey(seed.getBytes());
            byte[] result = encrypt(rawKey, cleartext.getBytes());
            return toHex(result);
    }

    public static String decrypt(String seed, String encrypted) throws Exception {
            byte[] rawKey = getRawKey(seed.getBytes());
            byte[] enc = toByte(encrypted);
            byte[] result = decrypt(rawKey, enc);
            return new String(result);
    }

    private static byte[] getRawKey(byte[] seed) throws Exception {
            KeyGenerator kgen = KeyGenerator.getInstance("AES");
            SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
            sr.setSeed(seed);
        kgen.init(128, sr); // 192 and 256 bits may not be available
        SecretKey skey = kgen.generateKey();
        byte[] raw = skey.getEncoded();
        return raw;
    }

    private static byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
            Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        byte[] encrypted = cipher.doFinal(clear);
            return encrypted;
    }

    private static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
            Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.DECRYPT_MODE, skeySpec);
        byte[] decrypted = cipher.doFinal(encrypted);
            return decrypted;
    }

    public static String toHex(String txt) {
            return toHex(txt.getBytes());
    }
    public static String fromHex(String hex) {
            return new String(toByte(hex));
    }

    public static byte[] toByte(String hexString) {
            int len = hexString.length()/2;
            byte[] result = new byte[len];
            for (int i = 0; i < len; i++)
                    result[i] = Integer.valueOf(hexString.substring(2*i, 2*i+2), 16).byteValue();
            return result;
    }

    public static String toHex(byte[] buf) {
            if (buf == null)
                    return "";
            StringBuffer result = new StringBuffer(2*buf.length);
            for (int i = 0; i < buf.length; i++) {
                    appendHex(result, buf[i]);
            }
            return result.toString();
    }
    private final static String HEX = "0123456789ABCDEF";
    private static void appendHex(StringBuffer sb, byte b) {
            sb.append(HEX.charAt((b>>4)&0x0f)).append(HEX.charAt(b&0x0f));
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:15:15.543

`getRawKey()`方法有缺陷。它使用实例`SecureRandom`而不是密钥派生函数 (KDF)。

根据实现，该`setSeed()`方法要么*将种子添加*到当前状态，要么将其用作*唯一的种子*。Java SE 7 及之前版本中的 Oracle 提供者将使用它作为单一种子，其他提供者（例如最新版本的 Android 中基于 OpenSSL 的提供者）可能只是将种子添加到状态中。这意味着检索到的密钥可能确实是*完全*随机的；**因此，任何用它加密的东西都无法解密**。

此外，`"SHA1PRNG"`还没有很好地定义的确切实现。所以不同的提供者可能使用不同的实现。请`SecureRandom`仅将实例用于随机数生成。

如果您有密码，请使用基于密码的密钥派生函数（例如 PBKDF2）将其转换为合适的密钥。如果您有一个具有足够熵的秘密，您可以尝试找到基于密钥的密钥派生函数 (KBKDF) 的实现，例如 Bouncy Castle 中的 HKDF。

除了密钥派生之外，该示例代码还存在编码/解码问题。它还使用不安全的 ECB 操作模式（Oracle 提供程序中 Java 的默认设置）。

**不要使用`SimpleCrypto`，这是一个可怕的例子。**

# apache - 无法在我的 apache 服务器上启用 mod_rewrite

> ID：11418337
> 
> 赞同：0
> 
> 时间：2012-07-10T17:06:23.140
> 
> 标签：apache, .htaccess

这就是我的 apache httpd 文件的样子：

```
LoadModule rewrite_module modules/mod_rewrite.so

<Directory / >
Options FollowSymLinks
AllowOverride ALL
Order allow,deny
allow from all
</Directory> 
```

现在我尝试执行这个简单的 mod 规则：

```
RewriteEngine on

RewriteRule ^product-([0-9]+)\.html$ index.php?id=$1 
```

当我按下此链接时，应该会发生这种重写：

```
 <a href="product-91.html">Press me</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:16:02.520

如果您将重写规则放在 apache 配置中，则在 ^ 之后需要一个前导 /（htaccess 不需要）。试试不带 ^ 的规则，看看它是否匹配。我也有一些需要添加 RewriteBase 重写的服务器/虚拟主机。

# c# - SignalR：调用返回值的方法

> ID：11418351
> 
> 赞同：2
> 
> 时间：2012-07-10T17:07:11.253
> 
> 标签：c#, signalr

使用 SignalR 将消息推送到客户端并从客户端推送回服务器，我已经能够取得相当大的进展......到目前为止，这一直是一件幸事。

我不想做的事情，这可能只是 SignalR 无法处理的事情……是调用响应。

SignalR 是否允许调用响应？如果是这样，我可以向客户提出请求，并且只使用第一个响应吗？

我看到了对 HubResponse 和 task.result 的引用，但我不太明白如何让 hub 方法从客户端返回值。

我玩了很多次，要么得到了 AggregateException，要么得到了无效的`Task<Object>`转换`Task<MyType>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:22:48.683

连接的客户端仅广播。那就是服务器不能直接向它们发出请求。因此，您需要执行类似 Hub 方法之类的操作，其中一个客户端可以请求其他人完成请求，然后 Hub 将该请求广播给所有连接的客户端，然后无论哪个客户端首先响应，您都可以将其广播回原始客户端。您需要在 Hub 中维护自己的状态，以将请求/响应明显地定向到正确的受众。我还认为，一旦您收到第一个答复，您就会想告诉所有其他客户不要打扰/停止尝试回答问题。

如果没有更多细节，我不确定我是否可以为此规定一个确切的架构。首先，是否任何客户都能够响应任何请求，或者您会对客户进行分类？如果您可以对客户端进行分类，那么您可以确保仅使用组广播对他们有意义的请求。接下来，您基本上是在尝试定义所有可以提出的问题的界面，还是希望集合能够在不随时间改变 Hub 的情况下扩展？这将决定您是使用强类型的 Hub 方法，还是只使用某种通用的`AskQuestion(string questionId)`. 如果是前者，那么您可能不会使用前面提到的组，而是只为每个请求类别设置不同的集线器。

# c# - VB脚本代码不调用c#函数

> ID：11418353
> 
> 赞同：2
> 
> 时间：2012-07-10T17:07:26.990
> 
> 标签：c#, com, vbscript, registry

我创建了一个 C# dll 并注册为 Com 对象。（使用 ProgID，设置 Comvisible True 并使用强名称对程序集进行签名）。

我正在尝试使用以下 vbscript 代码调用 c# 方法

```
Option Explicit 
Dim testwfhandler 
Set testwfhandler= CreateObject("CoreComponentWorkflow.WorkflowHandler") 
If Not testwfhandler Is Nothing Then     
Call testwfhandler.test()     
End If 
Set testwfhandler= Nothing 
```

我错过了什么吗？还是做错了什么？

以下是我注册的 dll 的注册表信息。

![在此处输入图像描述](../Images/4b9efac5fd70ec365b2e6e27fbcbc7bc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:11:09.540

确保已将 C# 程序集的 ComVisible 设置为 True

使用以下方法注册程序集：

```
regasm /codebase YourAssembly.dll 
```

然后像上面那样调用它。

# android - 回收位图

> ID：11418354
> 
> 赞同：4
> 
> 时间：2012-07-10T17:07:28.193
> 
> 标签：android, memory-management, bitmap, out-of-memory

我正在从事涉及位图操作的项目。因为我不想有 OutofMemoryError 我正在尝试回收每个未使用的位图。不幸的是，我已经回收了太多并且“尝试使用回收的位图”错误。

我在用：

```
 Bitmap.createBitmap(bmp, x,y,w,h, matrix, false);
 Bitmap.createScaledBitmap(bmp, w, h,true); 
```

我应该在这种方法之后回收 bmp 还是由它们回收？像：

```
Bitmap newBitmap = Bitmap.createBitmap(bmp, x,y,w,h, matrix, false);
bmp.recycle(); 
```

我可以在 imageView.setImageBitmap() 回收之前在这里使用的一个之后吗？例如

```
myImageView.setImageBitmap(myBitmap);
myImageView.setImageBitmap(newBitmap);
myBitmap.recycle(); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T17:13:04.930

您应该只在不再需要时回收位图。但是，当您想要*显示*它时，您**确实需要一个位图。**如果您不想显示它，那么您可以回收位图。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:14:11.770

仅在使用完位图并确保不再需要使用其中的数据后才回收位图。在处理位图时，您可以在任何您想为您提供更多内存的地方使用它并不是一种神奇的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:06:07.083

当我想缩放位图时，我使用相同的参考：

```
Bitmap bmp = Bitmap.createBitmap(bmp, x,y,w,h, matrix, false); 
```

当第一个位图对象丢失其引用“bmp”时，它会被 GC（垃圾收集器）删除，因此您无需回收任何东西。至于图像视图，它仅将其源引用到“newBitmap”，它不会创建自己的。*

# c++ - xxx.h：致命错误 C1083：无法打开包含文件：'yyyy.h'：没有这样的文件或目录

> ID：11418362
> 
> 赞同：0
> 
> 时间：2012-07-10T17:07:55.013
> 
> 标签：c++, c, visual-c++

我正在使用 ac 项目，我需要在其中包含一个头文件，该头文件几乎没有其他头文件。当我尝试编译时，编译器也在寻找我正在使用的头文件中包含的头文件。

更清楚地说，我需要`xxx.h`在我当前的程序中使用文件，它对我只有一个有用的功能。但是`xxx.h`文件`yyy.h`中包含了其他一些内容。
编译时出现以下错误：

> `xxx.h`: 致命错误 C1083: 无法打开包含文件: `yyy.h`: 没有这样的文件或目录

任何人都可以建议我一种方法来包含`xxx.h`文件并使用我需要的唯一一个功能来包含`yyy.h`到我当前的项目中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:32:16.627

使用`#ifdef`块来防止包含不需要的标题。

假设您需要一个函数原型，除此之外您不需要任何东西。然后 ：

```
#ifndef MY_APP
#include <notneeded1.h>
#include <notneeded2.h>
.............
.............
#endif
#ifdef MY_APP
void my_needed_foo_bar()
#endif

#ifndef MY_APP
.....
#endif 
```

现在通过定义 MY_APP 编译您的应用程序

就像在 gcc 中一样

```
$gcc -DMY_APP .... 
```

# wso2 - wso2 身份服务器 - 密码策略

> ID：11418365
> 
> 赞同：2
> 
> 时间：2012-07-10T17:08:02.377
> 
> 标签：wso2, wso2is

WSO2 身份服务器是否支持密码老化等密码策略？我在 wso2 网站或身份服务器数据表上看不到与这些功能相关的任何内容。

如果没有，此功能是否在路线图上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:57:07.063

您可以使用“PasswordJavaScriptRegEx”属性在 user-mgt.xml 中定义一组有限的限制，例如长度、允许的字符等。但这适用于前端。

除了 WSO2 Identity Server 没有定义任何密码策略之外，它更依赖于底层用户存储的密码策略。例如，使用 Active Directory 作为用户存储，WSO2 Identity Server 继承了 Active Directory DC 中定义的密码策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T12:59:44.920

使用 WSO2 IS 4.5.0，IS 管理员可以定义自定义密码策略并在创建用户时强制执行。请参阅产品文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T14:36:27.477

根据 WSO2-IS，他们无法直接支持此功能，希望在未来。如果您使用像 LDAP 这样的辅助用户存储，我们可以自定义此要求，但它也取决于 LDAP 类型。

但作为一项政策，您无法找到 WSO2-IS 5.1.0 之前的任何密码老化功能。

希望这可以帮助你。

# c# - html表格单元格中的标签自动换行

> ID：11418367
> 
> 赞同：0
> 
> 时间：2012-07-10T17:08:07.847
> 
> 标签：c#, asp.net, html

代码片段 -

```
HtmlTableCell fixedDataCell = new HtmlTableCell();
fixedDataCell.Style.Add(HtmlTextWriterStyle.Height, "22px");
fixedDataCell.Style.Add(HtmlTextWriterStyle.Width, "100px");
fixedDataCell.Style.Add(HtmlTextWriterStyle.FontSize, "small");
fixedDataCell.NoWrap = true;

Label lbl = new Label();
lbl.Text = "ABCDEFGHIJKLMNOQRSTUVWXYZ";
lbl.Width = 1;

fixedDataCell.Controls.Add(lbl); 
```

单元格扩展而不是截断或向标签的文本添加省略号。单元格保持一定宽度很重要。如何处理该单元格内的标签？

编辑：显然只需添加一个宽度值即可解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:13:54.250

要隐藏溢出，请尝试：

```
fixedDataCell.Style.Add(HtmlTextWriterStyle.OverflowX, "hidden"); 
```

同时，省略号：

```
fixedDataCell.Style.Add(HtmlTextWriterStyle.OverflowX, "ellipsis"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:40:37.607

HTML 只会换行逻辑单词，例如用空格或标点符号分隔的单词，对于长拼写单词，HTML 不会中断或换行。因此，如果容器比单词所需的水平空间“窄”，则内容会流血或强制扩展容器，这在您的示例中是正确的。

通过添加诸如“overflow-x:hidden”之类的 CSS 属性，出血内容将被剪裁以适合容器，但您可能需要添加工具提示以防用户希望看到剪裁的内容。

我会提醒使用“overflow-x: ellipsis”，因为它是一个 CSS3 属性，旧版本的 IE 可能不支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:22:32.000

显然，只需添加一个宽度值即可解决此问题。

# c - 想要使用特定字符将字符串分隔为标记

> ID：11418369
> 
> 赞同：1
> 
> 时间：2012-07-10T17:08:23.063
> 
> 标签：c, strtok

这里我有一个字符串表示字符数组。该数组还包含分隔符。现在我只想取出没有这个分隔符的字符串。

我正在使用`strtok`功能。

我想用这个分隔符分隔我的所有单词。

但是在这里我在这段代码中遇到了一些问题。

如果我做错了什么，请告诉我，或者告诉我不同​​的简单方法来实现这件事，还要考虑内存风险。

这条线在这里`pch = strtok (str,&sep);`什么都没有。问题只在这里。

代码

```
/* strtok example */
#include <stdio.h>
#include <string.h>

#define SEPRATOR 0x03

int main ()
{
    char str[1024];
    int count = 0;
    char sep;
    memset(str,0,1024);
    sep = SEPRATOR;

    memcpy(str,"1",strlen("1"));
    count = count + strlen("1");
    str[count++] = sep;
    memcpy(str+count,"0",strlen("0"));
    count = count + strlen("0");
    str[count++] = sep;
    memcpy(str+count,"2",strlen("2"));
    count = count + strlen("2");
    str[count++] = sep;
    memcpy(str+count,"abc_1.0.xyz",strlen("abc_1.0.xyz"));
    count = count + strlen("abc_1.0.xyz");
    str[count++] = sep;
    memcpy(str+count,"3",strlen("3"));
    count = count + strlen("3");
    str[count++] = sep;
    memcpy(str+count,"23455.456",strlen("23455.456"));
    count = count + strlen("23455.456");

    printf("Input String = %s\n",str);

    char * pch;
    int pchcount = 0;
    pch = strtok (str,&sep);
    while (pch != NULL)
    {
        pchcount++;
        printf ("%d === %s\n",pchcount,pch);
        pch = strtok (NULL,&sep);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:10:11.937

的第二个参数`strtok()`是一个以空字符结尾的字符串 ( `char*`)，但您传递的是单个`char`. 虽然 a `char*`，但它不会以 null 终止。改成：

```
char sep[2] = { SEPRATOR, 0 }; 
```

相应地改变当前用途`sep`：

```
str[count++] = sep[0];

pch = strtok(str, sep); 
```

你可能会发现`snprintf()`构造你的`str`比`memcpy()`调用序列更简单。

另外，如果你想初始化`str`：

```
char str[1024] = ""; /* instead of performing a memset(). */ 
```

# regex - CoreData - 可选字段和正则表达式？

> ID：11418374
> 
> 赞同：0
> 
> 时间：2012-07-10T17:08:52.367
> 
> 标签：regex, xcode, core-data

我的模型中有一个包含电子邮件地址的字段，我使用正则表达式验证该地址。该字段是可选的，但即使值为空也会触发正则表达式检查。

有什么干净的方法可以禁用对空值的检查，还是应该将正则表达式包装进去`()?`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:20:29.697

我不确定是否禁用，但使用交替很容易：

```
/^|your-original-regex$/ 
```

# python - Python 3.3 PEP 418 示例给出“命名空间”对象不可迭代错误

> ID：11418375
> 
> 赞同：2
> 
> 时间：2012-07-10T17:08:56.607
> 
> 标签：python, namespaces, python-3.x, python-3.3

Python 3.3 的测试版已经发布，非常棒。

新改版的[时间](http://docs.python.org/dev/library/time.html)模块具有[get_clock_info](http://docs.python.org/dev/library/time.html#time.get_clock_info)方法来获取有关平台的许多逻辑时钟的信息。[PEP 418](http://www.python.org/dev/peps/pep-0418/)描述了新的时间模块。

当我尝试运行 PEP 418 中引用的示例程序之一[clock_resolution.py](http://hg.python.org/peps/file/tip/pep-0418/clock_resolution.py)时，我进入`TypeError: 'namespace' object is not iterable`下面的第 54 行：

```
46 clocks = ['clock', 'perf_counter', 'process_time']
47 if hasattr(time, 'monotonic'):
48     clocks.append('monotonic')
49 clocks.append('time')
50 for name in clocks:
51     func = getattr(time, name)
52     test_clock("%s()" % name, func)
53     info = time.get_clock_info(name)
54     if 'precision' in info:
55         print("- announced precision: %s" % format_duration(info['precision']))
56     print("- implementation: %s" % info['implementation'])
57     print("- resolution: %s" % format_duration(info['resolution'])) 
```

第 53 行的“信息”包含：

```
>>> info
namespace(adjustable=True, implementation='gettimeofday()', monotonic=False, resolution=1e-06) 
```

那么如何迭代一个命名空间对象呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:24:21.807

您不想迭代对象；您只想测试是否存在属性。两种方式：

```
# "easier to get forgiveness than permission" approach
try:
    print(info.precision)
except AttributeError:
    pass

# "look before you leap" approach
if hasattr(info, "precision"):
    print(info.precision) 
```

该`in`测试用于检查某些内容是否在字典、列表、元组或其他序列中。在一般情况下，`in`将尝试迭代某些内容以找到值（`dict`并且`set`是例外；Python 特例它们以提高效率）。但是`info`是一个不支持迭代的类的实例。

如果你愿意，你可以这样做：

```
# alternate "look before you leap"
if "precision" in info.__dict__:
    print(info.precision) 
```

属性实际上存储在`dict`名为 的实例成员变量中`.__dict__`。

编辑：@DSM 写了一条评论，显示了上述内容的替代方案。内置函数`vars()`会返回`.__dict__`成员变量，所以相当于上面的：

```
# nicer alternate "look before you leap"
if "precision" in vars(info):
    print(info.precision) 
```

# java - XMPP的即时通讯服务

> ID：11418377
> 
> 赞同：0
> 
> 时间：2012-07-10T17:09:00.883
> 
> 标签：java, xmpp, chat

我想创建一个使用 XMPP 的 IM 服务。我不想使用 GTalk、Facebook Chat 和……服务。我怎样才能开始？实际上，我想创建一个包含所有流行服务的应用程序，例如文本聊天、语音聊天、视频聊天、群聊......我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:12:08.643

您可以从使用 OpenFire 等 XMPP 服务器开始——它带有服务器实现、胖客户端、基于 borwser 的 flash 客户端和 javascript 客户端。

此类解决方案为您提供作为平台的所有功能，您可以非常轻松地设置您的解决方案。

您可以访问 openfire 官方网站了解更多信息：[http ://www.igniterealtime.org/projects/openfire/](http://www.igniterealtime.org/projects/openfire/)

# apache - Apache 将 https 主机名重定向/重写为 https 完整 URL

> ID：11418380
> 
> 赞同：0
> 
> 时间：2012-07-10T17:09:21.850
> 
> 标签：apache, redirect, https, rewrite

已实施 Apache 重写以将 URL 从 http 重定向到 https，这可以正常工作

```
RewriteCond %{HTTPS} off

RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

但是`https://hostname`转到“itworks！”页面

`https://hostname`重定向到的语法是什么`https://hostname/sub1/sub2`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:03:06.010

将其放在您拥有的规则之后

```
RewriteCond %{HTTPS} on
RewriteRule ^$ /sub1/sub2 [L] 
```

如果您希望浏览器地址栏中的实际 URL 更改为`/sub1/sub2`，则将括号从 更改`[L]`为`[R=301,L]`。

# c++ - 我创建锁定文件的功能导致访问冲突

> ID：11418382
> 
> 赞同：0
> 
> 时间：2012-07-10T17:09:31.503
> 
> 标签：c++, file, exception, locking

我已经编写了一个函数来在给定目录中创建一个文本文件并将当前的 processID 写入它

当单击对话框上的 OK 按钮时调用该函数，它似乎可以执行我想要的操作，但是当我调用它时，应用程序会在对话框关闭时崩溃。（如果我删除我的功能，它会毫无问题地关闭）。

这就是我所拥有的：

```
void LockFolder(UnicodeString folderLocation)
{
  DWORD processID = GetCurrentProcessId();
  _TCHAR currentProcessID[sizeof(DWORD)];
  _TCHAR* lockID;
  _TCHAR* lock = folderLocation.c_str();
  fstream lockFile;

  _stprintf(currentProcessID,_T("%i"),processID);
  _tcscat(lock,_T("Lock.txt"));

  lockFile.open(lock,ios::out);
  lockFile<<currentProcessID;
  lockFile.close();
} 
```

做了一些更改，但问题仍然存在，版本 2：

```
void LockFolder(UnicodeString folderLocation)
{
  DWORD processID = GetCurrentProcessId();
  _TCHAR* lock = folderLocation.c_str();
  _tcscat(lock,_T("Lock.txt"));

  fstream lockFile;
  lockFile.open(lock,ios::out);
  lockFile<<processID<<"\0";
  lockFile.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:32:51.950

在这些行中，您破坏了堆：

```
_TCHAR* lock = folderLocation.c_str(); 
_tcscat(lock,_T("Lock.txt")); 
```

相反，请执行以下操作：

```
std::stringstream str; // or wstringstream
str << folderLocation << "Lock.txt"; // or L"Lock.txt"
std::string lock = str.str(); // or wstring 
```

# javascript - 如何获取当前的 htmlSelectElements id

> ID：11418384
> 
> 赞同：0
> 
> 时间：2012-07-10T17:09:35.397
> 
> 标签：javascript, html

嗨，我一直在尝试获取我正在循环的当前元素的 id，但我不确定为什么这不起作用，非常感谢任何帮助！

代码：

```
var arr = document.getElementsByClassName("myclass");
for (i = 0; i < arr.length; i++) {
    var key = "";
    var value = "";
    if (arr[i].nodeName == "INPUT" || arr[i].nodeName == "TEXTAREA") {
        key = arr[i].name;
        value = arr[i].value;
    }
    else if (arr[i].nodeName == "SELECT" && arr[i].attr('id') == "multiple") {
        alert("worked");
        key = arr[i].name;
        value = "multi";
    }
    else if (arr[i].nodeName == "SELECT" && arr[i].attr('id') != "multiple") {
        alert("ddint work");
        key = arr[i].name;
        value = "not multi";
    }
}​ 
```

即使它是一个元素，我也无法从我的 arr[i] 位置获取 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:13:22.177

`arr[i]`是一个元素，而不是一个 jQuery 对象。您可以`id`直接使用`arr[i].id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:15:15.030

```
var arr = document.getElementsByClassName("myclass");
for (i = 0; i < arr.length; i++) {
    var key = "";
    var value = "";
    if (arr[i].nodeName == "INPUT" || arr[i].nodeName == "TEXTAREA") {
        value = arr[i].value;
    }
    else if (arr[i].nodeName == "SELECT" && arr[i].id == "multiple") {
        alert("worked");
        value = "multi";
    }
    else if (arr[i].nodeName == "SELECT" && arr[i].id != "multiple") {
        alert("ddint work");
        value = "not multi";
    }
    key = arr[i].name;
}​ 
```

.attr("id") 是一个 jquery 函数。等效的 JavaScript 是 .id

您也可以将关键变量分配移到 if 语句之外，因为无论 if 语句如何，您都可以分配它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T17:20:47.023

不建议在节点上使用 .id。使用 .getAttribute。

# matlab - MATLAB 从数据动画线图

> ID：11418385
> 
> 赞同：2
> 
> 时间：2012-07-10T17:09:44.877
> 
> 标签：matlab, animation, line

我在 DAQ 上登录了 30 个实验性试验，并使用 xlsread 将它们读入 MATLAB。

我现在有一个情节，我在一个图中显示了所有 30 次试验。

**我想要做的是制作一部电影，展示他们一个一个地绘制。**

真的，我总共有 60 个线图（30 个输入和 30 个输出），所以如果我能显示一个的输入和输出，然后是下一个，等等，那就太好了。

现在我的代码与此类似：

```
In_1 = xlsread(filename.xls, #1);
In_2 = xlsread(filename.xls, #2);
...

Out_1 = xlsread(filename.xls, #1);
Out_2 = xlsread(filename.xls, #2);
...
plot(t, In_1,'r')
plot(t, Out_1)
plot(t, In_2,'r')
plot(t, Out_2)
... 
```

我见过很多使用 getframe 和电影的例子。这对我没有帮助，因为我正在绘制 DATA。不是在时间间隔内评估的函数。我正在尝试绘制 30 次数据试验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:02:49.447

用于[`avifile`](http://www.mathworks.com/help/techdoc/ref/avifile.html)创建 AVI 文件，然后[`addframe`](http://www.mathworks.com/help/techdoc/ref/avifile.addframe.html)捕获您绘制的每个绘制图形并将其转换为帧。我还冒昧地添加[`subplots`](http://www.mathworks.com/help/techdoc/ref/subplot.html)以将两个图保持在同一个图中，并将您的代码重写为一个循环。

这是我的（修改后的）建议的解决方案：

```
aviobj = avifile('output.avi');                     %# Create an AVI file
hh = figure;
for i = 1:30
    figure(hh)                                      %# Reuse the figure
    subplot(2, 1, 1)
    eval(['plot(t, In_', num2str(i), ', ''r'')']);  %# Plot i-th input
    %# axis([ something ]);
    subplot(2, 1, 2)
    eval(['plot(t, Out_', num2str(i), ', ''r'')']); %# Plot i-th output
    %# axis([ something ]);
    aviobj = addframe(aviobj, getframe(hh));        %# Convert to a frame
end
aviobj = close(aviobj);                             %# Close the AVI file 
```

您可以使用`avifile`选项来控制生成的视频的质量。

Alos 请注意，每个都`plot`根据绘制的值设置 x 和 y 轴。如果要保持动画“流畅”，则必须在每次绘图之后，使用[`axis`](http://www.mathworks.com/help/techdoc/ref/axis.html)命令强制轴对于每个图形保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:59:04.890

这是一个应该满足您需求的简单示例。

**注意：这将创建一个 .avi 文件，之后您可以在大多数多媒体播放器中查看。**

```
%% Open avi file
aviobj = avifile('fileame.avi','compression','none','fps',framerate);

%% Add one frame at a time
for frame = 1:length(frames)             

    h = figure(1);
    % Plot what ever you want here...

    % Fetch frame
    aviobj = addframe(aviobj, getframe(h));
end

%% Close video
aviobj = close(aviobj); 
```

如果您希望将输入和输出绘制在两个单独的轴上，您可以使用`subplot`.

```
h = figure(1);
subplot(2,1,1)
% Plot input here...
subplot(2,1,2)
% Plot output here... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:45:11.533

最简单的方法是`getframe`在 for 循环中使用该命令将每个图放在一个帧中，然后使用该命令播放它们`movie`，这有一些优点（例如，您可以将结果导出为 avi），但速度很慢有时，如果您想在 matlab 中简单地查看动画并需要它更快一些，您可以刷新绘图窗口中的数据并重新绘制它，它有点复杂，但在这里解释得很好[Link](http://www.mathworks.com/help/techdoc/creating_plots/f10-1460.html)。

此外，在 matlab 中键入 `help getframe`和`help movie`以获取有关如何最好地使用这些命令的一些解释和示例。

希望这可以帮助。

# php - php回显大量数据

> ID：11418386
> 
> 赞同：1
> 
> 时间：2012-07-10T17:09:45.203
> 
> 标签：php, apache, flash

我`echo`用来将各种文件输出到浏览器，包括一些 10MB+ .swf 文件。我遇到的一个负面影响是，它似乎与内容中的一些 Flash 预加载器混淆了，例如，导致图像闪烁而不是显示稳定的进度条。我想知道是否有任何缓冲正在进行或我能做些什么来修复它。

对于一些背景信息，我必须间接提供内容的原因是它被设计为仅提供给授权用户，因此脚本首先检查用户是否具有适当的权限，然后`readfile()`与`echo`. 也许有更好的方法可以做到这一点，我对想法持开放态度。

**编辑**：

`readfile()`当然，`echo`这是一种简化的解释方式。它运行类似：

```
<?php
check_valid_user();
ob_start();
// set appropriate headers for content-type etc
set_headers($file);

readfile($file);

$contents = ob_get_contents();
ob_end_clean();
if (some_conditions()) {
    // does some extra work on html files (adds analytics tracker)
}

echo $contents;
exit;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:38:19.543

我认为在这种情况下缓冲是多余的。你可能会这样做：

```
<?php
    check_valid_user();
    // set appropriate headers for content-type etc
    set_headers($file);

    if (some_conditions())
    {
        $contents = file_get_contents($file);
        // does some extra work on html files (adds analytics tracker)
        // Send contents. HTML is often quite compressible, so it is worthwhile
        // to turn on compression (see also ob_start('ob_gzhandler'))
        ini_set('zlib.output_compression', 1);
        die($contents);
    }
    // Here we're working with SWF files.
    // It may be worthwhile to turn off compression (SWF are already compressed,
    // and so are PDFs, JPEGs and so on.
    ini_set('zlib.output_compression', 0);
    // Some client buffering schemes need Content-Length (never understood why)
    Header('Content-Length: ' . filesize($file));
    // Readfile short-circuits input and output, so doesn't use much memory.
    readfile($file);
    // otherwise:
    /*
    // Turn off buffering, not really needed here
    while(ob_get_level())
        ob_end_clean();
    // We do the chunking, so flush always
    ob_implicit_flush(1);

    $fp = fopen($file, 'r');
    while(!feof($fp))
        print fread($fp, 4096); // Experiment with this buffer's size...
    fclose($fp);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:23:04.783

您可能会使用[fopen](http://us2.php.net/manual/en/function.fopen.php) / [fread](http://us2.php.net/manual/en/function.fread.php)等与 echo 和[flush](http://us2.php.net/manual/en/function.flush.php)串联。如果您还没有，您可能需要事先调用[header来设置内容类型。](http://us2.php.net/manual/en/function.header.php)此外，如果您使用输出缓冲，则需要调用[ob_flush](http://us2.php.net/manual/en/function.ob-flush.php)。

通过这种方式，您可以读取较小的数据并立即回显它们，而无需在输出之前缓冲整个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:24:32.413

您可能想尝试设置 Content-Length 标头。

就像是

```
header('Content-Length: ' . filesize($file)); 
```

# drupal - 在 drupal 6 中显示特定类别的最新帖子标题

> ID：11418388
> 
> 赞同：1
> 
> 时间：2012-07-10T17:10:00.380
> 
> 标签：drupal, drupal-6, drupal-modules, drupal-taxonomy

我想在 Drupal 6 中获取特定类别的最新帖子标题

例如获取一个类别中的 10 个最新帖子

在wordpress中我使用这个代码：

```
query_posts("cat=200&showposts=10") 
```

感谢您的帮助

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:09:59.467

您需要使用“视图”模块。您可以在其中创建任何帖子列表，并选择类别、要在页面上显示的帖子数量。在这里阅读[http://mimiflynn.com/blog/2011/04/07/drupal-views-baby-steps/](http://mimiflynn.com/blog/2011/04/07/drupal-views-baby-steps/)

# html - 垂直对齐列表元素

> ID：11418389
> 
> 赞同：-1
> 
> 时间：2012-07-10T17:10:01.367
> 
> 标签：html, css

我想垂直对齐所有 li 元素（也是多行），这对我来说似乎是个大问题；/ 这是我的小提琴：http: [//jsfiddle.net/5bDVw/1/](http://jsfiddle.net/5bDVw/1/) 我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:18:57.657

他们似乎与我垂直对齐？我因此猜测您想垂直对齐下拉菜单项中的文本？如果是这样，设置 line-height 使其等于元素高度：

```
#top-content  li li a { line-height:38px; } 
```

更新：

这是您的 jsfiddle 的更新版本：http: [//jsfiddle.net/henrikandersson/PfY5N/](http://jsfiddle.net/henrikandersson/PfY5N/) 我认为它可以按您的意愿工作。我删除了您拥有的 38px 高度测量值，并在锚元素上添加了一个填充。但是，我强烈建议稍微清理一下 css，这有点乱 ;)

# ruby-on-rails - 使用现有数据更新 Rails 嵌套模型表单

> ID：11418398
> 
> 赞同：0
> 
> 时间：2012-07-10T17:10:47.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的应用程序中：

```
A song has many setlists through allocations
A setlist has many songs through allocations
allocations belong to setlists and songs 
```

我正在尝试使用以下形式将现有库中的歌曲添加到设置列表中：

```
 <% @songs.each do |song| %>
            <tr>
               <%= nested_form_for(@setlist.allocations.build(song_id: song.id)) do |f| %>
               <td><%= song.title %></td>
               <td><%= song.artist %></td>
               <td><%= song.key %></td>
               <td>
                     <div><%= f.hidden_field :song_id %></div>
                  <%= f.submit "ADD", class: "btn btn-small btn-primary" %>
                  <% end %>

               </td>
            </tr>
          <% end %> 
```

在我的设置列表控制器中，我有：

```
def edit
    @songs = Song.all(order: 'title')
    @setlist = Setlist.find(params[:id])
    @setSongs = @setlist.songs
    @allocations = Allocation.where("setlist_id =?", @setlist) 
  end

  def update
    @setlist = Setlist.find(params[:id])
    song = Song.find(params[:song_id])
    @setlist.allocate!(song)
    if @setlist.update_attributes(params[:setlist])
      # Handle a successful update.
      flash[:success] = "SAVED!"
      redirect_to setlists_path
    else
      render 'edit'
    end
  end 
```

分配方法在 setlist 模型中指定为：

```
 def allocate!(song)
    allocations.create!(song_id: song.id)
  end 
```

目前，每当我单击将歌曲添加到设置列表时，它都会返回以下内容。

SetlistsController 中的 NoMethodError #update undefined method `id' for :song:Symbol

该错误还很奇怪，它仅对表中的第一条记录执行上述错误，而所有其他错误都在未添加记录时呈现“错误”页面。

任何指针将不胜感激。首先十分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:16:39.493

您正在将符号传递`:song`给`allocate!`in

```
@setlist.allocate!(:song) 
```

何时`allocate!`期望`Song`传递一个实例。该`:song`符号没有方法`.id`，因此出现错误。

如果您尝试将`Song`相关信息传递给

```
<%= f.hidden_field :song_id %> 
```

你必须先得到`Song`.

```
song = Song.find(params[:allocation][:song_id])
@setlist.allocate!(song) 
```

# android - 安卓：使用数组适配器 在 MainActivity 的 AsyncTask 中创建的

> ID：11418399
> 
> 赞同：1
> 
> 时间：2012-07-10T17:10:59.930
> 
> 标签：android, arraylist, android-asynctask, return-value, android-arrayadapter

我遇到了以下问题，希望有人能给我提示。

我有一个执行`AsyncTask< String, Void, ArrayList<Custom object >>`. 在`doInBackground()`函数中，我设置了一个新`ArrayList`的自定义对象，它也是返回值。在一个新创建的`onPostExecute()`方法中使用的方法中，它也设置为一个with so far so good！`ArrayList``ArrayAdapter<Custom object>``ListView``lv.setAdapter(adapter).`

现在问题是：回到MainActivity我将再次需要那个适配器，因为我想通过调用`adapter.add(items).` 现在向它添加新项目！`AsyncTask``ListView``ArrayAdapter,`

但是因为我还有另一个类也需要执行它`AsyncTask`，所以我将该内部类`AsyncTask`更改为独立`.java`文件（`CustomAsyncTask.java`）

-> 现在，当我尝试向它添加新项目时，`ArrayAdapter`它当然会抛出一个`NullPointerException!` ，也就是说，导致`ArrayAdapter`属于`AsyncTask`和在那里创建所以我试图将 MainActivity 中的`ListView`和`ArrayAdapter`作为`CustomAsyncTask`构造函数使用它的参数那里但是那不起作用，`ArrayAdapter`在 MainActivity 中始终为 null 导致异常

任何想法如何解决？我真的很感激。

这里是 MainActivity.java 的代码：

```
// global variables
ArrayAdapter<Custom object> arrayadapter;
ListView listview;
ProgressBar progressbar;

...

protected void myMethod() {
    CustomAsyncTask hTask = new CustomAsyncTask(this, listview, progressbar, arrayadapter);
    hTaskPlaylist.execute(String sth);
}

...

protected void anotherMethod() {
    arrayadapter.add(item);
} 
```

和 CustomAsyncTask.java 的代码：

```
package com.mypackage.test;

import java.util.ArrayList;

import android.content.Context;
import android.os.AsyncTask;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.ProgressBar;

public class CustomAsyncTask extends AsyncTask<String, Void, ArrayList<Custom object>>{

    Context context;
    ListView listview;
    ProgressBar progressbar;
    ArrayAdapter<Custom object> arrayadapter;

    public CustomAsyncTask(Context con, ListView lv, ProgressBar pb, ArrayAdapter<Custom object> aa) {
        this.context = con;
        this.listview = lv;
        this.progressbar = pb;
        this.arrayadapter = aa;
    }

    @Override
    protected void onPreExecute() {
        listview.setVisibility(ListView.GONE);
        progressbar.setVisibility(ProgressBar.VISIBLE);
        super.onPreExecute();
    }

    @Override
    protected ArrayList<Custom object> doInBackground(String... params) {
            ArrayList<Custom object> list = new ArrayList<Custom object>();

            ... doing something and populating list
            return list;
    }

    @Override
    protected void onPostExecute(ArrayList<Custom object> list) {
        super.onPostExecute(list);

        arrayadapter = new ArrayAdapter<Custom object>(context, android.R.layout.simple_list_item_1, list);
        listview.setAdapter(arrayadapter);

        progressbar.setVisibility(ProgressBar.GONE);
                listview.setVisibility(ListView.VISIBLE);
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:18:09.777

你可以让你的 ArrayAdapter 静态.. 然后任何时候你想访问它，你可以简单地说 CustomAsyncTask.arrayadapter.add(items); 您还可以将自己的函数添加到自定义 asynctask 类中。您可以创建类似 public ArrayAdapter<> getAdapter() 的东西。但请注意，无论如何，您将有多个线程访问/更改该对象，因此同步访问是一个好主意。

你可以试试这样的...

```
ArrayAdapter globalAdapter;
globalAdapter = new CustomAsyncTask().execute(/*your parameters here*/).get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:45:17.263

现在我尝试了，并将 '`MainActivity`作为参数而不是' 传递`Context`，这是我所做的更改：

```
public class CustomAsyncTask extends AsyncTask<String, Void, ArrayList<Custom object>>{

    **MainActivity activity**;
    ListView listview;
    ProgressBar progressbar;
    ArrayAdapter<Custom object> arrayadapter;

    public CustomAsyncTask(**MainActivity act**, ListView lv, ProgressBar pb, ArrayAdapter<Custom object> aa) {
        **this.activity = act;**
        this.listview = lv;
        this.progressbar = pb;
        this.arrayadapter = aa;
    }

    ...

    @Override
    protected void onPostExecute(ArrayList<Custom object> list) {
        super.onPostExecute(list);

        arrayadapter = new ArrayAdapter<Custom object>(context, android.R.layout.simple_list_item_1, list);
        listview.setAdapter(arrayadapter);
        **activity.arrayadapter = arrayadapter;**

        progressbar.setVisibility(ProgressBar.GONE);
        listview.setVisibility(ListView.VISIBLE);
    }

} 
```

是的，它奏效了！谢谢乔尔，但我仍然想知道为什么我可以从中传递`listview`，`MainActivity`在该列表视图上调用一个函数`AsyncTask`并通常与该列表视图一起工作`MainActivity`，有什么想法吗？

`Activity`还有一个问题：传递对象而不是对象的唯一区别是正确的，`Context`您是否可以访问您在 ? 中定义的可用变量和方法`Activity`？

# jasper-reports - 如何在碧玉报告中将字符串参数转换为双精度值？

> ID：11418400
> 
> 赞同：1
> 
> 时间：2012-07-10T17:11:09.290
> 
> 标签：jasper-reports, ireport

我有一个字符串值（12.023）作为字符串，我想将其转换为双精度值并舍入该值并在文本字段上打印，如何执行此操作。

```
my textfield expression is -> $P{totalAvgBytes}
Expression class -> java.lang.String 
```

我必须做什么

```
Pattern Expr - > ????? 
```

我累了喜欢图案`Expr = Double.valueOf($P{totalAvgBytes}).`

但它会引发错误，例如无法将 double 转换为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:53:44.707

尝试改用 DecimalFormat 类。它应该自动转换为字符串。它也会处理任何舍入。

新的 DecimalFormat("##.#").format(Double.valueOf($P{totalAvgBytes})

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:27:01.340

```
""+Math.round((Double.valueOf($P{totalAvg}))) . It will do that. 
```

# php - 我想一次上传两个文件，但我只能上传一个

> ID：11418402
> 
> 赞同：-3
> 
> 时间：2012-07-10T17:11:11.173
> 
> 标签：php, file, upload

我对这段代码有问题，因为我想上传两个文件，而代码只上传第一个文件。我不知道，这段代码有什么问题。谢谢。

```
$fotografia = $_POST["fotografia"];
        $nombre_archivo = $_FILES['fotografia']['name'];
        $tipo_archivo = $_FILES['fotografia']['type'];
        $tamano_archivo = $_FILES['fotografia']['size'];
        $prefijo = substr(md5(uniqid(rand())),0,6);
        $curriculum = $_POST["curriculum"];
        $nombre_archivo2 = $_FILES['curriculum']['name'];
        $tipo_archivo2 = $_FILES['curriculum']['type'];
        $tamano_archivo2 = $_FILES['curriculum']['size'];
        $prefijo2 = substr(md5(uniqid(rand())),0,6);
        $tmp_name = $_FILES["fotografia"]["tmp_name"];
        $tmp_name2 = $_FILES["curriculum"]["tmp_name"];
        //var_dump("".get_template_directory()."/curri/".$prefijo."_".$nombre_archivo);
        if(($nombre_archivo != "")||($nombre_archivo2 != "")) {
                $destino = "curri\\".$prefijo."_".$nombre_archivo;
                $destino2 = "curri\archivos\\".$prefijo2."_".$nombre_archivo2;
                echo $destino;
                echo $destino2;
                move_uploaded_file($tmp_name, "$destino");
                move_uploaded_file($tmp_name, "$destino2"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:48:48.610

如果我没看错

```
move_uploaded_file($tmp_name, "$destino");
move_uploaded_file($tmp_name, "$destino2"); 
```

不匹配

```
$tmp_name = $_FILES["fotografia"]["tmp_name"];
$tmp_name2 = $_FILES["curriculum"]["tmp_name"]; 
```

您没有在第二个文件移动中指定“tmp_name2”

# android - Android：如何获取搜索建议

> ID：11418403
> 
> 赞同：3
> 
> 时间：2012-07-10T17:11:12.940
> 
> 标签：android, search-suggestion

当我在编辑文本中键入一些文本时如何获取搜索建议。我不是在谈论界面，而是我如何获得实际建议，例如当您在谷歌搜索栏中输入内容时。有可用的 API 吗？

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:13:56.673

Google Suggest API 似乎是您正在寻找的：

[http://blogoscoped.com/archive/2006-08-17-n22.html](http://blogoscoped.com/archive/2006-08-17-n22.html)

您可以在该页面上尝试它，当您单击提交时，它将以 XML 格式显示您的查询结果。

然后，在 Android 上，您将使用 XML 解析器，这里有一个很好的例子：

[http://www.ibm.com/developerworks/opensource/library/x-android/](http://www.ibm.com/developerworks/opensource/library/x-android/)

这是关于解析 XML 的官方 Android 文档：http: [//developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)

# ruby-on-rails - Rubymine - 未找到 Rails gem

> ID：11418408
> 
> 赞同：9
> 
> 时间：2012-07-10T17:11:28.973
> 
> 标签：ruby-on-rails, rubymine

我通过这个解决方案安装了 Rails 3.2.3 和 Ruby 1.9.3 - [http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)。这真的很棒而且毫不费力。我这样做时没有错误。

现在我尝试在 Rubymine 4 中创建一个 Rails 项目，但出现错误：“Rails 版本 - 未找到 Rails gem”。

终端向我显示：

```
alex@ubuntu:~$ rails -v
Rails 3.2.3
alex@ubuntu:~$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
alex@ubuntu:~$ 
```

更新

```
alex@ubuntu:~$ gem environment
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-linux]
  - INSTALLATION DIRECTORY: /home/alex/.rvm/gems/ruby-1.9.3-p194
  - RUBY EXECUTABLE: /home/alex/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /home/alex/.rvm/gems/ruby-1.9.3-p194/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /home/alex/.rvm/gems/ruby-1.9.3-p194
     - /home/alex/.rvm/gems/ruby-1.9.3-p194@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/
alex@ubuntu:~$ gem list

*** LOCAL GEMS ***

actionmailer (3.2.3)
actionpack (3.2.3)
activemodel (3.2.3)
activerecord (3.2.3)
activeresource (3.2.3)
activesupport (3.2.3)
arel (3.0.2)
builder (3.0.0)
bundler (1.1.4)
erubis (2.7.0)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.4)
json (1.7.3)
mail (2.4.4)
mime-types (1.19)
multi_json (1.3.6)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.3)
railties (3.2.3)
rake (0.9.2.2)
rdoc (3.12)
rubygems-bundler (1.0.3)
rvm (1.11.3.5)
sprockets (2.1.3)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
alex@ubuntu:~$ 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-10T17:22:10.963

这可能有助于红宝石。

您需要添加 ruby​​ sdks

在 RubyMine 中从文件 -> 设置 -> ruby​​ Sdk 和 Gems -> 添加 sdk

您可以添加多个 ruby​​ 版本 sdks 及其 gem

从菜单启动项目后，您可以编辑项目特定的 ruby​​ 设置

运行 -> 编辑配置 -> ruby​​ sdk（选择特定的 Rails 环境）

```
$ which ruby  #to get current ruby path 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T12:53:27.513

对于后代：不要从 rvm 生成的包装文件夹中选择 Ruby 版本。Ruby 认为没问题，但你得到 Rails 错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-16T01:32:18.900

在本地安装 gem 时，只需添加 SDK 的路径即可：

例如：`~/.gem/ruby/2.2.0/gems`on `File`> `Project Settings`> `Platform Settings`> `SDKs`> `Classpath`（按下`+`按钮）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-06T03:30:42.460

当您关闭并再次打开时，您会收到一条通知：

> RubyMine Gem Manager：RubyMine 检测到“projectName”所需的某些 gem 未安装。安装

单击`Install`它，它将为项目运行捆绑安装，之后一切都解决了。

# doctrine - 由另一个实体连接的单向多对多

> ID：11418414
> 
> 赞同：2
> 
> 时间：2012-07-10T17:11:54.080
> 
> 标签：doctrine, doctrine-orm

我有项目、网络链接和类别。项目有一个 Weblink，Weblink 有一个类别：

```
/** @Entity */
class Item {
    /**
      * @ManyToOne(targetEntity="Weblink", inversedBy="items")
      */
    private $weblink;
}

/** @Entity */
class Weblink {
    /**
      * @ManyToOne(targetEntity="Category", inversedBy="weblinks")
      */
    private $category;

    /**
      * @OneToMany(targetEntity="Item", mappedBy="weblink")
      */
    private $items;
}

/** @Entity */
class Category {
    /**
      * @OneToMany(targetEntity="Weblink", mappedBy="category")
      */
    private $weblinks;
} 
```

到目前为止，一切都很好。现在我想介绍一个`Category::$items`字段，它将包含所有具有此类别的网络链接的项目。

我尝试使用单向多对多，但失败了，因为它尝试再次创建已经存在的连接表（它是 Weblink 实体的表）：

```
/**
 * @ManyToMany(targetEntity="Item")
 * @JoinTable(name="weblink",
 *      joinColumns = { @JoinColumn(name="category_id", referencedColumnName="id") },
 *      inverseJoinColumns = { @JoinColumn(name="id", referencedColumnName="weblink_id") }
 *      )
 */
private $items; 
```

有没有办法映射这种关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:43:03.540

如果我正确理解了您的问题，则确实不需要映射这种关系。它已经存在于您的映射中。当您想要一个类别中包含的所有项目时，您可以通过编写简单地获取它们：

```
$category_id = $id;
$oCategory = $entityManager->find('Category', $category_id);
$items = $oCategory->getWeblinks()->getItems(); 
```

在您的类别实体中：

```
public function getWeblinks(){
     return $this->weblinks;
} 
```

并在 Weblink 实体中

```
public function getItems(){
     return $this->items;
} 
```

# ruby - 用 db 扩展 jekyll / octopress？

> ID：11418421
> 
> 赞同：3
> 
> 时间：2012-07-10T17:12:13.947
> 
> 标签：ruby, sinatra, jekyll, octopress

我一直希望将我的 wp 博客移至 octopress（基于 jekyll）。我希望可以选择将成员登录/注册系统添加到站点以及以后的其他动态功能，但我喜欢让我的内容静态化的想法，例如 octopress 优惠。我不一定需要在博客上发表评论。我读过 octopress 是基于 sinatra 的，但我不是红宝石专家。是否可以使用 sinatra 来实现我想要的，或者我是否需要使用其他工具包？谢谢，乙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T08:35:37.023

在一天没有回复之后，您已经对“红宝石迷”感到失望......在这样的评论之后它保持沉默并不奇怪。

无论如何，Jekyll 和 Octopress 都是专门针对生成静态页面的。您将生成的 HTML 文件放在服务器上，仅此而已。所以根本没有动态元素。因此，如果您想添加像登录系统这样的动态层，您将看到一个完全不同的野兽。您可以创建它，但您必须自己编写整个系统。

如果你想在 Ruby 中使用创建 CMS，你可能想看看[RefineryCMS](http://refinerycms.com)

# php - ajax 没有发布到 php onclick

> ID：11418423
> 
> 赞同：0
> 
> 时间：2012-07-10T17:12:36.223
> 
> 标签：php, jquery, ajax

```
 $(function(){
                $(".product-item").click(function(){
                    var sku = $(this).attr("name");
                    var dataString = "sku="+sku;
                    $.ajax({
                        type: "POST",
                        url: "data.php",
                        data: dataString,
                        dataType: 'html',
                        success: function(){
                            $("#product").load("shop4.php #product > *", function(){
                                $("#product").delay(200).fadeOut(400);
                                $("#product").delay(601).fadeIn();
                                $(".img-wrap img").delay(500).fadeIn(300);
                                $(".img-wrap img").delay(300).animate({paddingBottom: "15%"});
                                $(".img-wrap img").hover(function(){
                                    $(this).animate({
                                        paddingTop: "5%", paddingBottom: "25%"
                                    });
                                }, function(){
                                    $(this).animate({
                                        paddingTop: "15%", paddingBottom: "15%"
                                    });
                                });
                            });
                        }
                    });
                });
            }); 
```

在我单击产品项目后，产品部分淡出然后淡入所有正确的信息，但是 php 没有读取帖子数据，值得注意的是，为了让点击功能正常工作，我必须将此脚本放在 div 之后标识产品。

php 很简单（这是 data.php）：

```
<?php
global $sku;
if (isset($_POST['sku'])) {
    $sku = $_POST['sku'];
    echo $sku;
}
?> 
```

XHR 响应

```
XHR finished loading: "mysite.com/shop4.php". jquery.min.js:4
f.support.ajax.f.ajaxTransport.send jquery.min.js:4
f.extend.ajax jquery.min.js:4
(anonymous function) shop4.php:238
f.event.dispatch jquery.min.js:3
f.event.add.h.handle.i jquery.min.js:3
XHR finished loading: "mysite.com/shop4.php". jquery.min.js:4
f.support.ajax.f.ajaxTransport.send jquery.min.js:4
f.extend.ajax jquery.min.js:4
f.fn.extend.load jquery.min.js:4
$.ajax.success shop4.php:243
f.Callbacks.o jquery.min.js:2
f.Callbacks.p.fireWith jquery.min.js:2
w jquery.min.js:4
f.support.ajax.f.ajaxTransport.send.d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:17:00.333

你的代码中有一些奇怪的东西。

1）您不会在任何地方使用来自 AJAX 调用的响应。 `success`接受一个提供调用响应的参数，但您从不使用它。

```
$.ajax({
    ...
    success: function(resp) {
        // do something with resp object
    }
}); 
```

2）您`return false;`的函数中有一条语句，它将在 AJAX 调用后立即执行（它不会等待）。所以你的函数总是会立即返回 false，不确定这是否是你正在寻找的行为。

除了这两项之外，您是否可以使用 Chrome 内置的 XHR 调试器或 Firebug 来查看服务器实际发送/接收的内容？

# objective-c - 用于核心数据中 C 结构的 NSValueTransformer

> ID：11418427
> 
> 赞同：3
> 
> 时间：2012-07-10T17:12:54.243
> 
> 标签：objective-c, cocoa, core-data, nsvaluetransformer

如何`NSValueTransformer`为 C 结构创建一个，例如`CGRect`Core Data 中的一个？

显然`transformedValue`&`reverseTransformedValue`要求 and `id`。有没有办法通过 a`void*`或更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:22:23.110

使用 NSValue 包装 C 指针。

```
[NSValue valueWithPointer:&struct] 
```

专门针对 CGRect，您可以使用

```
[NSValue valueWithCGRect:rect] 
```

在 UIKit/UIGeometry.h 中声明

# iphone - 将 UIImageView 作为子视图添加到 OpenGL ES 2.0 视图

> ID：11418428
> 
> 赞同：1
> 
> 时间：2012-07-10T17:12:58.457
> 
> 标签：iphone, ios, opengl-es

我已经在这个 iPhone 之后设置了一个 OpenGL ES 2.0 视图 - 教程：

[http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)

现在我正在尝试在图像上绘画。我已经尝试了以下方法，但没有任何效果：

*   添加 UIImageView 作为 OpenGL 视图的子视图
*   在 OpenGL 视图下的 ViewController 中添加 UIImageView 作为子视图
*   在相同的上下文中使用 OpenGL 绘制图像也不起作用，主要是因为纹理大小不是 2 的幂...

两次都只有 OpenGL 视图可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:50:36.170

如果要在 OpenGL 下绘制图像，则不能将 a 添加`UIImageView`为子视图，它将绘制在您的渲染之上。将其绘制为矩形上的纹理将起作用（我实际上在应用程序中使用它），但您必须调整图像大小。将 OpenGL 视图置于`UIImageView`下方也可以，但您必须先调整一些参数：

1.  确保`kEAGLDrawablePropertyColorFormat`是`kEAGLColorFormatRGBA8`. 这必须`CAEAGLLayer`通过设置属性在您的 , 中设置`drawableProperties`：

    ```
    CAEAGLLayer *eaglLayer = (CAEAGLLayer *)self.layer;
    eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithBool:YES],
                                    kEAGLDrawablePropertyRetainedBacking,
                                    kEAGLColorFormatRGBA8,
                                    kEAGLDrawablePropertyColorFormat,
                                    nil]; 
    ```

    我认为正确的地方是你的`- (void)setupLayer`方法。

2.  确保您的`CAEAGLLayer.opaque`属性设置为`NO`（再次在 中`setupLayer`）。
3.  当你清除缓冲区时，用 0% 的 alpha 颜色清除它，这样 GLView 后面的内容是可见的：

    ```
    glClearColor(0.f, 0.f, 0.f, 0.f);
    glClear(GL_COLOR_BUFFER_BIT); 
    ```

4.  如果您计划使用多重采样或绘制 alpha<1 的对象，请考虑启用 alpha 混合。

无论如何，根据我的经验，保持 GLView 不透明并使用纹理绘制背景要快得多。iPhone 5 用户可能不会注意到，但在旧款 iPhone 3G 上，每秒帧数显着增加。

# xcode - 如果未提交，如何撤消“丢弃”

> ID：11418429
> 
> 赞同：25
> 
> 时间：2012-07-10T17:13:04.057
> 
> 标签：xcode, version-control, atlassian-sourcetree

我在提交更改时不小心单击了放弃。所以我丢弃了整个文件，但我只想丢弃一些大块。但是我没有点击提交，我做了取消。

但现在我在文件中看不到我的代码。

我能做些什么来撤消该死的丢弃？

提前致谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-10-16T15:33:52.173

我知道这个帖子太旧了，但我遇到了类似的情况，不小心点击了 SourceTree 中的“放弃”并丢失了我的更改。

幸运的是，当时我打开了 IDE，即 PHPStorm。尽管它已经刷新了我正在处理的文件并在丢弃后加载了旧副本，但是，我在编辑器中对工作文件进行了“撤消”，它加载了我的更改。

我保存了文件并找回了丢失的更改。

只是想分享一下，以防其他人面临与我类似的情况，并且想恢复他们的变化而几乎没有头脑：D

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-04-12T04:40:56.913

对我来说，当我丢弃文件并想返回时，我正在使用 mac

我打开该文件并使用**TextEditor.app打开**

在顶部栏上单击**文件**->**恢复到**->**浏览所有版本...**

选择您想要的最后一个保存版本，希望它可以节省您的时间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-07-30T06:45:13.457

在 IDE 中打开此文件并按 Command + Z

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-30T16:12:20.577

我不相信你可以做任何事情。如果您在任何时候都没有提交更改，那么在您丢弃它们后就无法恢复它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-07T06:42:20.877

**在日食中，**

*   右键单击包资源管理器中丢弃的文件
*   点击“替换为”
*   点击“本地历史”
*   比较打开的对话框与修订列表
*   选择您的修订并单击“替换”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-24T16:52:03.443

**在 Intellij，**

> 您可以检查本地历史记录并恢复。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-04T10:06:19.700

从 Mac 的 sourcetree 1.8.1 起，没有任何方法可以通过 git 或 sourcetree 取回您的更改；请参阅此处的讨论：

[https://jira.atlassian.com/browse/SRCTREE-2090](https://jira.atlassian.com/browse/SRCTREE-2090)

（如果你登录 jira，你也可以投票支持这个实现！）

当我这样做时，我能够恢复更改，因为文件在我的时间机器备份中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-11T11:30:01.267

如果您丢失了 javascript 或模板文件，如果您正在调试它并且没有重新加载，您可能会在浏览器中找到它。

# python - 如何检查两个单独的文件中是否存在字符串列表

> ID：11418438
> 
> 赞同：0
> 
> 时间：2012-07-10T17:13:42.323
> 
> 标签：python, text, sed, awk, compare

我有两个文件，“文件 A”是 IP 地址列表，对应的 MAC 地址位于同一行。“文件 B”是仅 MAC 地址的列表。我需要比较这两个文件并列出文件 A 中没有在文件 B 中找到 MAC 地址的行。

档案一：

```
172.0.0.1 AA:BB:CC:DD:EE:01
172.0.0.2 AA:BB:CC:DD:EE:02
172.0.0.3 AA:BB:CC:DD:EE:03 
```

文件 B：

```
AA:BB:CC:DD:EE:01
AA:BB:CC:DD:EE:02 
```

所以输出应该是：

```
172.0.0.3 AA:BB:CC:DD:EE:03 
```

我正在寻找 sed、awk、grep、python 或任何能给我想要的文件的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:08:58.907

您的输入是否真的在每一行的开头都有一个美元符号，或者这是您问题的格式怪癖？如果你可以摆脱美元符号，那么你可以使用这个：

```
fgrep -v -f fileb filea 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:31:33.477

Python：

```
macs = set(line.strip() for line in open('fileb'))
with open('filea') as ips:
    for line in ips:
        ip,mac = line.split()
        if mac not in macs:
            print line 
```

**编辑**：好的，所以每个人都发布了相同的 python 答案。我也先接触到 python，但 对此**感到惊讶**：

```
awk 'NR == FNR {fileb[$1];next} !($2 in fileb)' fileb filea 
```

**EDIT2**：OP 从行中删除了前导 $ ，因此 python 和 awk 改变并且 fgrep 出来发挥作用。

```
fgrep -v -f fileb filea 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T17:22:31.353

```
#!/usr/bin/env python
with open('fileb') as fileb, open('filea') as filea:
    macs = set(map(str.strip, fileb))
    for line in filea:
        ip_mac = line.split()
        if len(ip_mac) == 2 and ip_mac[1] not in macs:
           print(" ".join(ip_mac)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T17:23:06.450

```
with open('filea','r') as fa:    
    with open('fileb','r') as f:
        MACS=set(line.strip() for line in f)

    for line in fa:
        IP,MAC=line.split()
        if MAC not in MACS:
            print (line.strip()) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T17:24:07.060

```
with open(FILEB) as file1,open(FILEA) as file2:
file1={mac.strip() for mac in file1}
file2={line.split()[1]:line.split()[0] for line in file2}
    for x in file2:
        if x not in file1:
            print("{0} {1}".format(file2[x],x)) 
```

**输出：**

```
172.0.0.2 AA:BB:CC:DD:EE:05
172.0.0.4 AA:BB:CC:DD:EE:06
172.0.0.6 AA:BB:CC:DD:EE:03
172.0.0.66 AA:BB:CC:DD:EE:0E 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-10T17:24:13.657

一种使用方式`awk`。它将 MAC 保存`fileB`在一个数组中，并为数组中的每个第二个字段`fileA`检查它，并且仅在未找到时打印。

```
awk '
    FNR == NR {
        data[ $0 ] = 1;
        next;
    }
    NFR < NR && !($2 in data)
' fileB fileA 
```

输出：

```
172.0.0.3 AA:BB:CC:DD:EE:03 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T17:17:30.070

Python 是最简单的。将文件 B 读入字典，然后通过文件 A 并在字典中查找匹配项。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-10T22:02:15.300

这可能对你有用（GUN sed）；

```
sed 's|.*|/&/Id|' fileb | sed -f - filea 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-10T17:22:06.453

我可以编写一个 Java 示例，您可以将其翻译成任何您想要的语言

```
import java.io.*;
import java.util.*;
class Macs {
    public static void main(String...args)throws Exception {
        Set<String> macs = loadLines("macs.txt");
        Set<String> ips = loadLines("ips.txt");

        for(String raw : ips) {
            String[] tokens = raw.split("\\s"); // by space
            String ip = tokens[0];
            String mac = tokens[1];
            if(!macs.contains(mac))
                System.out.println(raw);
        } 
    }

    static Set<String> loadLines(String filename) throws Exception {
        Scanner sc = new Scanner(new File(filename));
        Set<String> lines = new HashSet<String>();
        while(sc.hasNextLine()) {
            // substring(1) removes leading $
            lines.add(sc.nextLine().substring(1).toLowerCase());
        }
        return lines;
    }
} 
```

将此输出重定向到文件将为您提供结果。

使用以下输入文件

macs.txt

```
$AA:BB:CC:DD:EE:01
$AA:BB:CC:DD:EE:02
$AA:BB:CF:DD:EE:09
$AA:EE:CF:DD:EE:09 
```

ips.txt

```
$172.0.0.1 AA:BB:CC:DD:EE:01
$172.0.0.2 AA:BB:CC:DD:EE:02
$172.0.0.2 AA:BB:CC:DD:EE:05
$172.0.0.66 AA:BB:CC:DD:EE:0E
$172.0.0.4 AA:BB:CC:DD:EE:06
$172.0.0.5 AA:BB:CF:DD:EE:09
$172.0.0.6 AA:BB:CC:DD:EE:03 
```

结果：

```
c:\files\j>java Macs
172.0.0.6 aa:bb:cc:dd:ee:03
172.0.0.66 aa:bb:cc:dd:ee:0e
172.0.0.2 aa:bb:cc:dd:ee:05
172.0.0.4 aa:bb:cc:dd:ee:06 
```

# class - 当类不调用对象的方法时使用关联

> ID：11418444
> 
> 赞同：0
> 
> 时间：2012-07-10T17:13:50.723
> 
> 标签：class, associations, uml

当具有对第二个类的引用的类实际上没有调用其任何（第二个类的）方法但仍将第二个类的对象作为引用作为参数传递给方法时，显示两个类之间的关联是否正确其他类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:19:35.197

如果类`A`只使用类`B`来传递它，我会创建一个`<<dependency>>`链接而不是类之间的关联链接。

# c++ - 有哪些 C++ 的高级网络库？

> ID：11418445
> 
> 赞同：2
> 
> 时间：2012-07-10T17:13:51.077
> 
> 标签：c++, networking, libraries

我对整个网络完全陌生，每次尝试与各种库建立网络时我都完全迷失了（Boost::Asio 几乎没有文档记录，对初学者来说很糟糕，Winsock 级别极低，Raknet 就在附近无法设置，整个图书馆只有 1 个教程系列）。我正在寻找易于学习且易于操作的高级别的东西。

我对图书馆的用途将是简单的游戏。我不一定需要非常多样化和灵活的东西，只需要适合我需要的东西。跨平台是需要的，但不是必需的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:23:37.070

我建议使用Qt 的[QtNetwork](http://qt-project.org/doc/qt-4.8/qtnetwork.html)模块。您可能会发现 Qt 的其他功能也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:22:36.260

除了上面提到的那些，我发现[enet](http://enet.bespin.org/)很好用，而且很容易学习。或者 - 根据您的需要 - 您可以尝试[SFML](http://www.sfml-dev.org/)或[SDL](http://www.libsdl.org/) ( [SDL_net](http://www.libsdl.org/projects/SDL_net/) ) 的网络部分，但这些更大的库提供的不仅仅是网络。这三者在许可条款方面都相当不错，但如果你对这些感到烦恼，我建议你使用 enet 或 SFML。

# java - 奇怪的 java.lang.NoClassDefFoundError 错误

> ID：11418451
> 
> 赞同：0
> 
> 时间：2012-07-10T17:14:02.783
> 
> 标签：java, exception

`java.lang.NoClassDefFoundError`当我运行此代码时，我得到一个

```
Exception in thread "main" java.lang.NoClassDefFoundError: 
com/connexience/server/workflow/cloud/execution/DataProcessorServiceRunner
Caused by: java.lang.ClassNotFoundException: 
com.connexience.server.workflow.cloud.execution.DataProcessorServiceRunner
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: 
com.connexience.server.workflow.cloud.execution.DataProcessorServiceRunner. Program will exit. 
```

但我确信我可以`com/connexience/server/workflow/cloud/execution/DataProcessorServiceRunner`在项目`.classpath`文件中找到。

有人可以帮忙吗？

干杯，桑迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:17:25.613

尝试运行干净并构建，有时这可以修复错误，否则您将不得不发布更多信息或代码以便我们提供任何帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:17:43.410

当您的代码依赖于一个类文件并且它在编译时存在，但在运行时找不到时，就会出现这种情况。寻找构建时间和运行时类路径的差异。

[http://docs.oracle.com/javase/6/docs/api/java/lang/NoClassDefFoundError.html](http://docs.oracle.com/javase/6/docs/api/java/lang/NoClassDefFoundError.html)

> 如果 Java 虚拟机或 ClassLoader 实例尝试加载类的定义（作为正常方法调用的一部分或作为使用 new 表达式创建新实例的一部分）并且找不到类的定义，则抛出此异常。

# ruby-on-rails-3 - rails 3 模型删除的自定义查询字段

> ID：11418454
> 
> 赞同：0
> 
> 时间：2012-07-10T17:14:13.003
> 
> 标签：ruby-on-rails-3

我正在尝试执行 group_by 查询并传递返回的每个分组行的计数。但是，我的计数列没有出现在结果中。我相信该模型正在删除该列，因为我没有 attr_accessor 。我尝试将动态计数列添加为 attr_accessor 和 attr_accessible，但我仍然无法保留此计数列。

这是我的查询：

`organization = Organization.last`

`referrals = Invitations.recently_invited.select("COUNT(*) as referrals, invitations.*").where("invitee_id IN (?)", organization.map{|m| m.contact.id}).group(:event_id)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:21:11.820

尝试

```
Invitations.recently_invited.select("invitations.*").where("invitee_id IN (?)", organization.map{|m| m.contact.id}).group(:event_id).count 
```

# c++ - 如何在“native c++”环境中使用 WinRT IAsyncOperation* 对象

> ID：11418456
> 
> 赞同：3
> 
> 时间：2012-07-10T17:15:03.710
> 
> 标签：c++, asynchronous, windows-runtime

我有应该移植到 Windows 8 Metro (WinRT) 的 C/C++ SDK 库。库大部分是独立于操作系统的，但它包含一些使用操作系统提供的 API 与硬件交互的模块。

在将其移植到 WinRT 时，我决定尽可能使用 WRL 而不是 C++/CX。所以现在我可以创建和使用大部分必需的 WinRT 对象。但是在使用由 WinRT 提供的异步对象时，我遇到了绝对的障碍。

例如，我使用以下代码枚举硬件设备：

```
// create interface to "static" members of DeviceInformation class
ComPtr<IDeviceInformationStatics>   DeviceInformationStatics;
HRESULT hr = GetActivationFactory(HString::MakeReference(RuntimeClass_Windows_Devices_Enumeration_DeviceInformation).Get(), &DeviceInformationStatics);

ComPtr<IAsyncOperation<DeviceInformationCollection*>> operation;
hr = DeviceInformationStatics->FindAllAsyncDeviceClass( DeviceClass_All, &operation); 
```

此时我有有效的 IAsyncOperation 指针。我认为它可以这样使用：

```
task<ComPtr<DeviceInformationCollection*>> tsk(operation); 
```

但我失败了，因为接受 IAsyncOperation 的 task<> 构造函数在 ppltasks.h 中的“#if defined(__cplusplus_winrt)”下声明，而这又取决于 /ZW 编译器选项。

在这种情况下，我应该如何使用 IAsyncOperation 对象？实际上，我只需要等待操作完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-08-30T07:05:09.483

以防万一其他人在 C++/WinRT 中寻找这个：

```
 auto asyncOp = someFunctionReturningIAsyncOperation();

    asyncOp.Completed([](auto &&result, auto && status) {
        // do whatever with result and status
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:37:19.450

根据我的 C++/CX 经验，您可以构造一个`AsyncOperationCompletedHandler<DeviceInformationCollection*>`对象，使用类中的成员函数对其进行初始化，并将其分配给`Completed`IAsyncOperation 的属性。

在 C++/CX 中，您只需`AsyncOperationCompletedHandler<>`使用两个参数构造对象 -`this`来自调用类，以及指向回调方法的成员指针。像这样：

```
MyAsyncOp->Completed = ref new AsyncOperationCompletedHandler<ResultType ^>(this, &MyClass::OnDone); 
```

其中 OnDone 是这样定义的：

```
void MyClass::OnDone(IAsyncOperation<ResultType ^> ^AsOp, AsyncStatus s)
{
     ResultType ^Result = AsOp->GetResults();
} 
```

我不确定如何在 WRL 中调用构造函数。你想办法解决这个问题。

此外，将在随机线程上调用完成处理程序。如果您需要将某些内容传递回 UI 线程，那`Dispatcher->RunAsync()`是您的朋友。大多数 XAML 类中都有一个 Dispatcher 成员。

编辑：现在我正在查看示例，似乎有一个非托管帮助器类，称为`Callback`您围绕 a`this`和指向成员的指针构建的。查一下。仍然不确定如何将一个连接到 IAsyncOperation...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-20T18:10:04.933

这是一个老问题......但如果有人像我一样需要答案：

[MSDN 文档](http://msdn.microsoft.com/en-us/library/hh973451.aspx)展示了如何在本机 C++ 中完成此操作。这很简单。您初始化 WRL 运行时，即您感兴趣的对象，然后创建一个事件和回调处理程序，该处理程序将在事件触发时被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:20:03.783

如果~~库~~硬件特定模块已经在 Win32 上运行，我建议你保持这种方式。安装一个 Win32 服务与硬件交互，然后 Metro 应用只需要与服务进行通信（许多 IPC 选项，例如套接字、管道，我相信即使在受限的 Metro 沙箱中你也能找到一个也能正常工作的）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-20T21:27:16.480

IAsyncOperation 是一种可等待类型，因此您应该使用 await 的等价物，或者将其称为 Result 属性。

# php - PHP：检查输入是否为有效数字的最佳方法？

> ID：11418461
> 
> 赞同：77
> 
> 时间：2012-07-10T17:15:09.383
> 
> 标签：php, input, validation, numeric

检查输入是否为数字的最佳方法是什么？

*   1-
*   +111+
*   5xf
*   0xf

那种数字不应该是有效的。只有像这样的数字：123、012 (12)，正数应该是有效的。这是我当前的代码：

```
$num = (int) $val;
if (
    preg_match('/^\d+$/', $num)
    &&
    strval(intval($num)) == strval($num)
    )
{
    return true;
}
else
{
    return false;
} 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-10T17:16:11.107

[`ctype_digit`](http://php.net/ctype_digit)正是为此目的而建造的。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-07-10T17:18:00.620

我用

```
if(is_numeric($value) && $value > 0 && $value == round($value, 0)){ 
```

验证一个值是否为数字、正数和整数

[http://php.net/is_numeric](http://php.net/is_numeric)

我不太喜欢 ctype_digit，因为它的可读性不如“is_numeric”，而且当你真的想验证一个值是否为数字时，它实际上有更少的缺陷。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-10T17:19:49.087

[`filter_var()`](http://www.php.net/manual/en/filter.filters.validate.php)

```
$options = array(
    'options' => array('min_range' => 0)
);

if (filter_var($int, FILTER_VALIDATE_INT, $options) !== FALSE) {
 // you're good
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-01-03T13:02:12.013

**对于 PHP 版本 4 或更高版本：**

```
<?PHP
$input = 4;
if(is_numeric($input)){  // return **TRUE** if it is numeric
    echo "The input is numeric";
}else{
    echo "The input is not numeric";
}
?> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-07-10T17:17:06.077

```
return ctype_digit($num) && (int) $num > 0 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-08T21:43:09.880

> 最安全的方式

```
if(preg_replace('/^(\-){0,1}[0-9]+(\.[0-9]+){0,1}/', '', $value) == ""){
  //if all made of numbers "-" or ".", then yes is number;
} 
```

# sql - 报告服务 - 汇总 tablix 列值

> ID：11418466
> 
> 赞同：0
> 
> 时间：2012-07-10T17:15:26.063
> 
> 标签：sql, database, tsql, reporting-services

我有许多函数应用于 tablix 列中的行。我需要对 tablix 列中的所有行求和。我使用的是 Reporting Services 2005，所以 LOOKUP 不存在，我也无权访问 SQL 存储过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:12:29.080

您的问题相当模糊，但我会解决这个问题。假设您在 tablix 列中有一个名为 Textbox5 的文本框。在页脚行（组页脚或 tablix 页脚）中，您可以使用如下表达式：

```
=Sum(ReportItems!Textbox5.Value) 
```

在每行中解析函数后，这将总结该文本框中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T18:10:57.563

并且聚合函数只能用于页眉或页脚中的报表项目！！！

# python - django collectstatic 覆盖

> ID：11418468
> 
> 赞同：6
> 
> 时间：2012-07-10T17:15:39.357
> 
> 标签：python, django, django-staticfiles

我正在使用 Django 1.3.1 和`contrib.collectstatic`应用程序来管理我的静态文件。

我的项目结构是

```
myproject
    - settings.py
    - static-media
    - urls.py
    - media
    - manage.py 
```

where`static-media`是包含此项目的静态文件的文件夹。在我的 settings.py 中，我有：

```
PROJECT_PATH = os.path.realpath(os.path.dirname(__file__))
STATIC_ROOT = os.path.join(PROJECT_PATH, "static")+'/'
STATIC_URL = "/static/"
STATICFILES_DIRS = (
        os.path.join(PROJECT_PATH, 'static-media'),
) 
```

我正在使用[admin_tools](http://django-admin-tools.readthedocs.org/en/latest/index.html)来更改管理员的布局。但是我想从 admin_tools 覆盖一个特定的 css 文件（ theming.css ）。所以在我的静态媒体文件夹中，我放了 admin_tools/css/theming.css。当我第一次运行时`python manage.py collectstatic`，它可以通过忽略 admin_tools 中的默认 theming.css 并使用我在 static-media 中定义的那个来按预期工作。不幸的是，如果我再次运行该命令，它会覆盖我的 css 并添加默认值。

这是 的输出`python manage.py findstatic admin_tools/css/theming.css`：

```
Found 'admin_tools/css/theming.css' here:
  /home/paulo/Desktop/Projects/zennetwork/prd/zennetwork/static-media/admin_tools/css/theming.css
  /home/paulo/Desktop/Projects/zennetwork/prd/lib/python2.7/site-packages/admin_tools/theming/static/admin_tools/css/theming.css 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T19:05:42.083

[Django 文档](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#collectstatic)只说：

> 默认情况下，重复文件名的解析方式与模板解析的工作方式类似：将使用首先在指定位置之一找到的文件。如果您感到困惑， findstatic 命令可以帮助您显示找到了哪些文件。

根据您`findstatic`的第一个输出应该是您的自定义样式，因此应该是收集的那个。为什么它不这样做是一个谜。

你总是可以明确地忽略另一个文件。这有点痛苦，但它可以保证你的风格不会被覆盖：

```
python manage.py collectstatic --ignore site-packages/admin_tools/css/theming.css 
```

如果您还需要忽略其他文件，您可以继续添加`--ignore <pattern>`. 诚然，这不是一个非常可行的长期解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T00:36:56.247

我升级到 Django 1.4，现在问题已解决。

虽然不太清楚是什么原因造成的。

# java - 使用完整目录路径将文件添加到 JEditorPane

> ID：11418469
> 
> 赞同：2
> 
> 时间：2012-07-10T17:15:39.820
> 
> 标签：java, swing, file-io, jtree, jeditorpane

我已经在网上搜索了一段时间，但我无法找到任何关于它的真实信息......我想知道是否有使用文件完整目录路径打开文件（如 java 文件） ?

我目前正在使用将文件添加到我的 JEditorPane

```
FileReader reader = new FileReader(file);
BufferedReader br = new BufferedReader(reader);
jEditorPane.read(br, indexOfFile); 
```

没关系，但是以这种方式添加文件变得更加复杂，因为我已经将应用程序的设计更改为具有 JTree 并且我现在无法正确获取文件的索引！

那么有没有办法使用文件路径将文件添加到 JEditorPane 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:21:24.060

定义一次静态方法并在任何地方使用它：

```
public static void loadTextFileIntoEditorPane(String filePath, JEditorPane editor) throws IOException
{
    File file = new File(filePath);
    editor.setPage(file.toURI().toURL());
} 
```

# performance - 搜索更高值时索引扫描性能下降

> ID：11418471
> 
> 赞同：0
> 
> 时间：2012-07-10T17:15:40.920
> 
> 标签：performance, mongodb, indexing

我的数据集由包含具有整数数组的字段的文档组成。当我指望其字段包含某个范围内的元素的对象时，索引扫描性能似乎随着 indexBounds 值的增加而降低（但该范围扫描的值数量相同）。

测试数据：

```
for (var i = 0; i < 100000; i++) db.foo.insert({tts:(function(){var val = [];for(var j = 0; j < 100; j++) {val[j] = j} return val;})()});
db.foo.ensureIndex({tts:1}); 
```

查询：

```
> db.foo.find({tts:{$elemMatch:{$gte:10, $lte:10}}}).explain()
{
    "cursor" : "BtreeCursor tts_1",
    "isMultiKey" : true,
    "n" : 100000,
    "nscannedObjects" : 100000,
    "nscanned" : 100000,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 1,
    "nChunkSkips" : 0,
    "millis" : 313,
    "indexBounds" : {
        "tts" : [
            [
                10,
                10
            ]
        ]
    },
    "server" : "localhost:27017"
}
> db.foo.find({tts:{$elemMatch:{$gte:90, $lte:90}}}).explain()
{
    "cursor" : "BtreeCursor tts_1",
    "isMultiKey" : true,
    "n" : 100000,
    "nscannedObjects" : 100000,
    "nscanned" : 100000,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 1,
    "nChunkSkips" : 0,
    "millis" : 1286,
    "indexBounds" : {
        "tts" : [
            [
                90,
                90
            ]
        ]
    },
    "server" : "localhost:27017"
} 
```

事实上，我在这个字段中有近 200 个值，当请求的范围具有最高边界时，查询速度会慢 10 倍。（字段中的每个值都属于一个唯一的范围，所有范围选择相同数量的对象（100000），仅对该范围的子范围进行查询）

收藏统计：

```
> db.foo.stats()
{
    "ns" : "test.foo",
    "count" : 100000,
    "size" : 122400128,
    "avgObjSize" : 1224.00128,
    "storageSize" : 140763136,
    "numExtents" : 12,
    "nindexes" : 2,
    "lastExtentSize" : 40071168,
    "paddingFactor" : 1,
    "systemFlags" : 1,
    "userFlags" : 0,
    "totalIndexSize" : 254845920,
    "indexSizes" : {
        "_id_" : 3262224,
        "tts_1" : 251583696
    },
    "ok" : 1
} 
```

有解决此问题的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:39:03.477

Mongo 能够使用索引来确定每个文档中是否有一个元素与 $lte 和 $gte 条件匹配。$elemmatch 要求单个元素匹配两个条件，因此 mongo 扫描每个文档（和子数组）以确定是否存在这样的元素。对于较大的值，mongo 必须将 90 个元素扫描到每个数组中，而不是仅扫描前 10 个元素以找到匹配的元素。因此，查询长数组末尾的匹配元素将花费更长的时间。

请注意，如果您反转数组，则行为会反转：

```
for (var i = 0; i < 100000; i++) db.foo.insert({tts:(function(){var val = [];for(var j = 100; j >= 0; j--) {val[j] = j} return val;})()}); 
```

看起来这可能与[https://jira.mongodb.org/browse/SERVER-6002](https://jira.mongodb.org/browse/SERVER-6002)有关。使用最新的开发版本可能会以稳定性为代价来解决问题。

# java - Spring禁用上下文：组件扫描未检测到控制器

> ID：11418478
> 
> 赞同：0
> 
> 时间：2012-07-10T17:16:15.847
> 
> 标签：java, spring, spring-mvc, spring-security

我的应用程序正在正确运行：

```
<context:component-scan base-package="com.mypackage">  </context:component-scan> 
```

当我用手动 bean 定义替换它时，不再检测到控制器。

在任何情况下，我都使用这些注释：

```
<context:annotation-config />
<mvc:annotation-driven /> 
```

调用了控制器的自动装配方法，但未将 bean 声明为入口点，因此出现 404 错误且不可访问。

组件扫描背后的黑魔法是什么？

控制器是这样声明的：

```
<?xml version="1.0" encoding="UTF-8"?>

    <beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <!-- Controller configuration -->
    <bean class="com.xx.ControllerClass" />

</beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:27:36.070

基于您的评论的推测 - 您已经在 applicationContext-controllers.xml 文件中为您的控制器声明了 bean，现在这个文件是在 Web 应用程序上下文文件中导入的，您使用 DispatcherServlet web.xml 文件声明的那个文件：

```
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/applicationContext-controller.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

如果不是，那么这可能就是问题所在。基于 Spring MVC 的应用程序通常有两种不同的应用程序上下文，一种是您使用 ContextLoaderListener（根 Web 应用程序上下文）声明的，另一种是通过 DispatcherServlet 声明的 Web 相关 bean，您的控制器`mvc:annotation-driven`等需要在 Web 相关 bean 声明中.

# jquery - 带有jquery的html中的可折叠列表

> ID：11418479
> 
> 赞同：0
> 
> 时间：2012-07-10T17:16:16.223
> 
> 标签：jquery, html-lists

我正在尝试为我们的博客制作一个可折叠的日期选择器。我查看了大量 JavaScript/jquery/css 示例，但似乎无法让它们中的任何一个与 3 级列表一起正常工作。这是我要完成的布局：

```
>2012
  >July
    >title of muh new blag! 
```

这里是标签：

```
<ul class="example_menu">
  <li><a class="expanded">Section A</a>
    <ul>
      <li><a href="#">Link A-A</a>
        <ul>
          <li><a href="#">Link A-A-A</a></li>
      <li><a href="#">Link A-A-B</a></li>
     </ul>
       </li>
       <li class="active"><a href="#">Link A-B</a></li>
       <li><a href="#">Link A-C</a></li>
       <li><a href="#">Link A-D</a></li>
    </ul>
  </li>
  <li class="footer"><span> </span></li>
  <li><a class="collapsed">Section B</a>
    <ul>
      <li><a href="#">Link B-A</a>
        <ul>
      <li><a href="#">Link B-A-A</a></li>
      <li><a href="#">Link B-A-B</a></li>
      <li><a href="#">Link B-A-C</a></li>
        </ul>
      </li>
      <li><a href="#">Link B-B</a>
        <ul>
      <li><a href="#">Link B-B-A</a></li>
      <li><a href="#">Link B-B-B</a></li>
        </ul>
      </li>
      <li><a href="#">Link B-C</a></li>
      <li><a href="#">Link B-D</a></li>
    </ul>
  </li>
  <li class="footer"><span> </span></li>
  <li><a class="collapsed">Section C</a>
    <ul>
      <li><a href="#">Link C-A</a></li>
      <li><a href="#">Link C-B</a></li>
      <li><a href="#">Link C-C</a></li>
      <li><a href="#">Link C-D</a></li>
    </ul>
  </li>
  <li class="footer"><span> </span></li>
</ul> 
```

我正在尝试做一些简单的事情，比如 blogspot 的博客存档。（[在这个人的页面上在这里查看](http://wollay.blogspot.com/)）

我发现并且最喜欢这个的是[这个](http://www.mathachew.com/sandbox/collapsible-menu/)。在去掉了很多额外的代码之后，我得出了这个：

> $('.example_menu li > .expanded').show('normal');
> 
> $('.example_menu li > a').click(function() {
> 
> $(this).toggleClass('expanded').toggleClass('collapsed').parent().find('ul').toggle('normal');
> 
> });

此列表扩展和收缩，非常适合简单的 2 级列表，例如：

```
>Year
    >Month 
```

但是，对于 3 级列表，它要么在扩展 2 个更深的级别时折叠，要么同时扩展两个级别。我正在尝试使最下方的列表折叠/展开，并让最下方的列表折叠直到直接激活。

有没有更简单的 jquery 可折叠列表？

或者有没有一种很好的方法来获取直接的内部 ul 元素并切换该元素，同时将所有其他内部 ul 元素转换为折叠？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:55:53.037

显然我快到了。

```
//hide everything
$('.outline li > ul').hide();
//activate class "expanded"
$('.outline li > .expanded + ul').show('normal');
$('.outline li > a').click(function() {
//hide everything
$(this).find('ul').hide();
//toggle next ul
$(this).toggleClass('expanded').toggleClass('collapsed').next('ul').toggle('normal');
}); 
```

# c# - 根据条件合并C#中的两个列表

> ID：11418483
> 
> 赞同：3
> 
> 时间：2012-07-10T17:16:31.097
> 
> 标签：c#, list, merge

我有两个基于班级的清单

```
public class test
{
    public string id { get; set; }
    public Int32 quantity { get; set; }
}

List1 
{"A", 1}
{"B", 2}
{"C", 3}

List2
{"A", 1}
{"B", 4}
{"D", 5} 
```

合并列表需要包含两个列表中的所有项目，如果两个列表中出现相同的 id，则应比较数量并选择数量较大的项目。合并列表需要

```
Merged list
{"A", 1}
{"B", 4}
{"C", 3}
{"D", 5} 
```

列表中项目的顺序并不重要。

如何实现此合并。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T17:20:58.520

你可以使用类似的东西：

```
var query = list1.Concat(list2)
                 .GroupBy(x => x.id)
                 .Select(g => g.OrderByDescending(x => x.quantity).First())
                 .ToList(); 
```

这不好，但它会工作。（这种方法避免像 lc. 的回答那样创建一个*新*的 test 实例。我不知道这对你是否重要，但我可以看到它在某些情况下很重要。）

它确实假设如果一个 ID 在任一列表中出现多次，您仍然只希望它在结果中返回一次。

或者，`MaxBy`使用[MoreLINQ](http://morelinq.googlecode.com)：

```
var query = list1.Concat(list2)
                 .GroupBy(x => x.id)
                 .Select(g => g.MaxBy(x => x.quantity))
                 .ToList(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-10T17:19:49.850

假设“ID”应该始终是唯一的：

```
var list = (from l in List1.Concat(List2)
           group l by l.id into g
           select new test() {id = g.Key, quantity = g.Max(x=>x.quantity)})
           .ToList(); 
```

# sencha-touch - Sencha Touch - 模板下方的显示按钮

> ID：11418485
> 
> 赞同：0
> 
> 时间：2012-07-10T17:16:36.877
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试使用 Sencha Touch 2 框架从模板创建面板，但遇到了一些麻烦。我想做的是显示 HTML 模板，然后在下面显示一个按钮 - 使用 HTML 而不是模板的示例是：

```
Ext.define('GS.view.Home', {

extend: 'Ext.Panel',

config: {
    title: 'Home',
    items: [
        {
            xtype: 'panel',
            html: [
                '<img src="resources/images/someImage.gif"/>',
                '<h1>A Header</h1>',
                "<p>some text</p>"
            ].join("")
        },
        {
            xtype: 'button',
            text: 'Click Me',
            ui: 'forward'
        }
    ]
}
}); 
```

渲染时看起来像这样：

![底部按钮](../Images/f3ad5883ff3c18d00e3cec614a819f59.png)

我想做的是使用模板加载面板，但下面仍然有一个按钮。我的代码目前看起来像这样：

```
var tpl = new Ext.XTemplate(
    '<img src="resources/images/someImage.gif"/>',
    '<h1>A Header</h1>',
    '<p>some text</p>',
    {
        // XTemplate configuration:
        compiled: true
    }
);
Ext.define('GS.view.Home', {

    extend: 'Ext.Panel',
    xtype: 'home',
    config: {
        title: 'Home',
        tpl: tpl,
        data: [],
        items: [

            {
                xtype: 'button',
                text: 'Click Me',
                ui: 'forward'
            }
        ]
    }
}); 
```

但这会导致按钮被放置在模板 HTML 之上：

![在此处输入图像描述](../Images/2f2950dedb955b8837e8a36f209939fc.png)

我还尝试将面板添加到 items 数组，并将 tpl 值设置为模板，但这会导致根本没有呈现 HTML。

**任何人都知道我如何使用模板但底部仍然有一个按钮？如果您的答案只是在模板 html 中包含一个具有正确类名的按钮，那么如何将它链接回控制器？（我通常会使用 itemId 配置属性）。**

干杯，

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:31:52.997

您的两种方法之间存在差异：第一种方法有一个面板，其中包含一个带有 html 和按钮的面板。第二种方法有一个包含 html 和按钮的面板（我猜然后 sencha puts按钮下的html）。

在底部解决方案中使用两个面板应该可以解决问题：

```
Ext.define('GS.view.Home', {

    extend: 'Ext.Panel',
    xtype: 'home',
    config: {
        title: 'Home',
        items: [
           {
               xtype: 'panel',
               tpl: tpl,
               data: [],
            },

            {
                xtype: 'button',
                text: 'Click Me',
                ui: 'forward'
            }
        ]
    }
}); 
```

# sql - 如何查找两个日期之间的天数

> ID：11418496
> 
> 赞同：17
> 
> 时间：2012-07-10T17:17:02.443
> 
> 标签：sql, sql-server

我有一个基本查询：

```
SELECT dtCreated
    , bActive
    , dtLastPaymentAttempt
    , dtLastUpdated
    , dtLastVisit
FROM Customers
WHERE (bActive = 'true') 
    AND (dtLastUpdated > CONVERT(DATETIME, '2012-01-0100:00:00', 102)) 
```

我想在输出中添加另一列...让我们将其称为“差异”以找出“dtcreated”和“dtlastupdated”之间的天数例如，如果记录 1 的 dtcreated 为 1/1/11 和 dtlastupdated是 1/1/12，“差异”列将是“365”。

这可以在查询中完成吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-10T17:20:13.847

你会使用[`DATEDIFF`](http://msdn.microsoft.com/en-us/library/ms189794.aspx)：

```
declare @start datetime
declare @end datetime

set @start = '2011-01-01'
set @end = '2012-01-01'

select DATEDIFF(d, @start, @end)

results = 365 
```

所以对于您的查询：

```
SELECT dtCreated
    , bActive
    , dtLastPaymentAttempt
    , dtLastUpdated
    , dtLastVisit
    , DATEDIFF(d, dtCreated, dtLastUpdated) as Difference
FROM Customers
WHERE (bActive = 'true') 
    AND (dtLastUpdated > CONVERT(DATETIME, '2012-01-0100:00:00', 102)) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-10T17:20:09.167

要查找两个日期之间的天数，请使用：

```
DATEDIFF ( d, startdate , enddate ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T17:21:11.007

我会使用 DATE_DIFF 函数来提供这个值，如下所示：

```
SELECT dtCreated
    , bActive
    , dtLastPaymentAttempt
    , dtLastUpdated
    , dtLastVisit
    , DATEDIFF(d, dtLastUpdated, dtCreated) AS Difference
FROM Customers
WHERE (bActive = 'true') 
    AND (dtLastUpdated > CONVERT(DATETIME, '2012-01-0100:00:00', 102)) 
```

编辑：如果使用 MySQL 你省略了 'd' 留下你

```
DATEDIFF(dtLastUpdated, dtCreated) AS Difference 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T17:23:05.533

如果您使用的是 MySQL，则有 DATEDIFF 函数可以计算两个日期之间的天数：

```
SELECT dtCreated
    , bActive
    , dtLastPaymentAttempt
    , dtLastUpdated
    , dtLastVisit
    , DATEDIFF(dtLastUpdated, dtCreated) as Difference
FROM Customers
WHERE (bActive = 'true') 
    AND (dtLastUpdated > CONVERT(DATETIME, '2012-01-0100:00:00', 102)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-31T09:37:21.427

```
DATEDIFF(d, 'Start Date', 'End Date') 
```

做

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-31T09:29:51.517

**DATEDIFF**函数用于计算所需日期之间的天数

例如，如果您以字符串格式区分当前日期与给定日期

```
SELECT * , DATEDIFF(CURDATE(),STR_TO_DATE('01/11/2017', '%m/%d/%Y')) AS days FROM consignments WHERE code = '1610000154' 
```

这里，**STR_TO_DATE** () ：取一个字符串，返回一个格式掩码指定的日期；

对于您的示例：

```
SELECT dtCreated
    , bActive
    , dtLastPaymentAttempt
    , dtLastUpdated
    , dtLastVisit
    , DATEDIFF(dtLastUpdated, dtCreated) as Difference
FROM Customers
WHERE (bActive = 'true') 
    AND (dtLastUpdated > '2012-01-01 00:00:00') 
```

在 mysql 服务器 5.7.17 上测试

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-20T22:55:51.777

正如@Forte L. 提到的，您也可以执行以下操作；

```
SELECT dtCreated
    , bActive
    , dtLastPaymentAttempt
    , dtLastUpdated
    , dtLastVisit

    , DATEDIFF(day, dtCreated, dtLastUpdated) Difference

FROM Customers
WHERE (bActive = 'true') 
    AND (dtLastUpdated > CONVERT(DATETIME, '2012-01-0100:00:00', 102)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-28T09:47:50.903

```
DECLARE @Firstdate DATE='2016-04-01',
 @LastDate DATE=GETDATE(),/*get today date*/
 @resultDay int=null

SET @resultDay=(SELECT DATEDIFF(d, @Firstdate, @LastDate))
PRINT @resultDay 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-28T09:53:08.760

**获取两天之间的天数**

```
DECLARE @date1 DATE='2015-01-01',
 @date2 DATE='2019-01-01',
 @Total int=null

SET @Total=(SELECT DATEDIFF(DAY, @date1, @date2))
PRINT @Total 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-22T06:59:53.670

```
DATEDIFF('Start Date', 'End Date') 
```

在 MySQL 中，这给了我天数的差异。

# ios - 将 UIImage 对象放入系统缓存？

> ID：11418498
> 
> 赞同：0
> 
> 时间：2012-07-10T17:17:10.543
> 
> 标签：ios, caching, uiimage

如果我在应用程序中创建 UIImage 对象，是否可以将其放入带有名称的 UIImage 图像缓存中？基本上，我稍后想通过调用 imageNamed: 来检索它，除非系统将其丢弃，在这种情况下我会重新创建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:41:33.533

如果您使用`[UIImage imageNamed:"somename.png"]`它创建一个对象，它会自动缓存，并且只有在出现内存警告通知或希望在您暂停应用程序时才会释放它。

如果您想对其进行更多控制，我建议您使用以下任何一种方法：

*   存储到 someDictionary 并将其存储到 userDefaults。例如 {"imageName":"the name.format","imageData":someImageData"}。哎呀，您甚至可以将所有内容存储在字典数组中。
*   枚举数组：将所有必要的图像存储到用户默认值的数组中。并将名称转换为枚举类型定义。只需将字符串与数组索引匹配即可。

请注意，我假设图像具有静态名称。如果您不断更改图像名称，我根本不建议缓存。

# arrays - 使用 IFS 将字符串转换为数组

> ID：11418502
> 
> 赞同：7
> 
> 时间：2012-07-10T17:17:39.680
> 
> 标签：arrays, string, bash, scripting

我在使用 IFS 将字符串转换为数组时遇到问题。这是我的字符串：

```
"Jun01 Jun02 Jun03 Jun04 Jun05 ..." #in that format, separated by spaces 
```

这是我尝试过的代码：

```
IFS=" " #set it to space character
DATES_ARRAY=($DATES_STRING) #from above
echo ${DATES_ARRAY[0]} #output is empty 
```

但是，当我删除 IFS 行时，它可以工作。但是我用了几行来打印出它的默认 ASCII 值，我得到了 '32' 这意味着 'Space' 字符。作为一名强迫症程序员，为了安全起见，我想自己设置它......我不知道它是如何预先预设的！

那么为什么尝试手动将 IFS 设置为 Space 不起作用呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T17:44:22.950

它确实有效，但无论如何都没有必要，因为默认情况下保证空间在 IFS 中。不要手动设置。这样做可能会导致问题。

基本上，永远不要在 Bash 中使用分词。如果非常小心地使用，如果仅限于 POSIX sh，有时需要硬着头皮使用它。如果您要设置 IFS，请将其设置在它有一些效果的少数命令之一的环境中，或者最多在本地设置为函数。

你永远不需要使用它，所以我不会解释一切：

```
$ printf -v str '%s ' Jun{01..10}
$ set -f
$ IFS=' ' declare -a 'arr=($str)'
$ declare -p arr
declare -a arr='([0]="Jun01" [1]="Jun02" [2]="Jun03" [3]="Jun04" [4]="Jun05" [5]="Jun06" [6]="Jun07" [7]="Jun08" [8]="Jun09" [9]="Jun10")' 
```

IFS 在此处冗余设置为空间以显示它有效。

从字符串到数组的最正确方法可能是使用`read`. [这里](http://mywiki.wooledge.org/BashFAQ/001)有很多例子。

规范的方法是：

```
read -ra arr <<<"$str" 
```

如果 IFS`read`不是空格，则可以在 的环境中设置 IFS 作为分隔符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-09T02:06:31.763

我建议不要单独使用`$IFS`将单词拆分为数组，因为设置和恢复 $IFS 很痛苦。使用这样的东西：

```
DATES_STRING='Jun01 Jun02 Jun03 Jun04 Jun05'

IFS=' ' read -a DATES_ARRAY <<< "$DATES_STRING" 
```

`$IFS`我还建议在's 环境中明确设置，`read`以便您绝对确定它是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T17:22:28.553

默认`$IFS`使用空格作为标记分隔符，包括制表符和换行符。

试试这个：

```
echo "$IFS" | cat -vte 
```

如果您没有更改`$IFS`，则输出应为：

```
 ^I$
$ 
```

这是一个空格，后跟一个制表符:`^I`和一个换行符 - 将`cat`任何换行符打印为`$`.

因此，您的脚本摘录应该可以在不触及`$IFS`.

# xamarin.ios - 错误消息“用完类型 0 的蹦床”

> ID：11418505
> 
> 赞同：0
> 
> 时间：2012-07-10T17:17:46.560
> 
> 标签：xamarin.ios

> **可能重复：**
> [用完 0 型蹦床](https://stackoverflow.com/questions/5278592/ran-out-of-trampolines-of-type-0)

我们正在测试基于 MonoTouch for iOS 5.2.12 的应用程序

随机我有这个错误信息：

'/private/var/mobile/Applications/44063255-89FC-437A-B956-E54BF14D103D/MobileCrmMT28.app/mscorlib.dll' (1024) 中的类型为 0 的蹦床用完

有人可以帮助我，提出解决方案/解决方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:35:39.097

您可以通过在 iPhone Build 设置的“extra mtouch arguments”中设置构建标志来扩展蹦床的数量。

有关更多信息，请参阅：

[http://docs.xamarin.com/ios/troubleshooting#Ran_out_of_trampolines_of_type_0](http://docs.xamarin.com/ios/troubleshooting#Ran_out_of_trampolines_of_type_0)

# c++ - ostream.h：没有这样的文件或目录

> ID：11418506
> 
> 赞同：1
> 
> 时间：2012-07-10T17:17:57.017
> 
> 标签：c++, c, include, legacy, ostream

我正在尝试使用更新的编译器和更新的工具（新版本的 vxWorks 但没关系）更新旧项目。在代码中它说：

```
#include <ostream.h> 
```

但是，我收到了大量错误，其中大部分源于：

```
ostream.h: No such file or directory 
```

我查找了错误，并说很多解决方案将其更改为：

```
#include "ostream" 
```

这可行，但是这是遗留代码，我不想更改所有这些。有没有办法可以在不更改代码的情况下更改这些包含？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:19:31.990

好吧，您可以创建一个名为的文件，该文件`ostream.h`仅包含一行：

```
#include <ostream> 
```

# objective-c - iOS GLKit精灵之间的连续滚动精灵

> ID：11418509
> 
> 赞同：2
> 
> 时间：2012-07-10T17:18:00.583
> 
> 标签：objective-c, ios, opengl-es-2.0, glkit

我一直在尝试在 iOS 上为我的 OpenGL ES 2.0 + GLKit 游戏创建一个类。当我提高滚动速度时，精灵之间的间隙会变大。我在 Google 上进行了很多搜索，但没有找到适合我的答案。

我的滚动精灵类继承自具有位置、比例、子级等的“节点”（有点像 Cocos2D）。该类有一个精灵数组（节点），它们在 x 轴上以设定的速度移动，当到达屏幕末端时，移动到最后一个精灵的右侧位置。

这是我的代码的主要部分：

```
 -(id)initWithTexture:(GLKTextureInfo *)texture effect:(GLKBaseEffect *)effect xScrollRange:(float)range yPosition:(float)y xScrollVelocity:(float)velocity{
if (self = [super init]) {
        //set globals
    self.velocity = velocity;
    xRange = range;

        //create a first sprite, set position, add to children
    JGSprite *firstSprite = [[JGSprite alloc] initWithTexture:texture effect:effect];
    firstSprite.position = GLKVector2Make(range, y);
    [self.children addObject:firstSprite];

        //calc how many sprites are needed to cover range+1
    float spritesNum = range/firstSprite.contentSize.width;
    int spritesNumRound = roundf(spritesNum)+1;

        //add enough sprites to cover the screen
    for (int i = 1; i < spritesNumRound; i++) {
            //create, set position, add to children
        JGSprite *sprite = [[JGSprite alloc] initWithTexture:texture effect:effect];
        sprite.position = GLKVector2Make(range - (i*sprite.contentSize.width), y);
        [self.children addObject:sprite];

    }

        //if moving left, set last sprite as right most
    if (velocity < 0)
        lastReorderedSprite = 0;
    else    //set left most
        lastReorderedSprite = self.children.count-1;

   }

    return self;
}

-(void)update:(float)dt
{
        //loop through sprites
    for (JGNode *node in self.children)
    {
            //update sprites position
        node.position = GLKVector2Make(node.position.x + self.velocity*dt, node.position.y);

        //if moving left
    if (self.velocity < 0)
    {
            //if reached gone off screen
        if (node.position.x <= -node.contentSize.width/2) 
        {
                //get last node
            JGNode *lastSprite = [self.children objectAtIndex:lastReorderedSprite];

                //set the position to the right of the last node
            node.position = GLKVector2Make(lastSprite.position.x+lastSprite.contentSize.width, node.position.y);

                //set re-positioned node as lastreordered
            lastReorderedSprite = [self.children indexOfObject:node];
        }            
    }
    else //moving right
    {
            //gone off screen   
        if (node.position.x >= xRange+node.contentSize.width/2) 
        {
                //get last node
            JGNode *lastSprite = [self.children objectAtIndex:lastReorderedSprite];

                //set the position to the left of the last node
            node.position = GLKVector2Make(lastSprite.position.x-node.contentSize.width, node.position.y);

                //set re-positioned node as lastreordered
            lastReorderedSprite = [self.children indexOfObject:node];

        }

    }
    }
} 
```

如果有人可以通过告诉我如何阻止间隙形成来提供帮助，将不胜感激:) 提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:27:43.877

问题很可能是这一行：

```
node.position = GLKVector2Make(node.position.x + self.velocity*dt, node.position.y); 
```

When you increase velocity, the amount added to `x` increases. My guess is that one of your objects is having its speed updated later than the others. To fix it, just have each object check that it's the distance that you want it to be from the others and if it isn't, move it there.

# windows - Powershell 脚本计划任务停止运行（无法启动）

> ID：11418510
> 
> 赞同：0
> 
> 时间：2012-07-10T17:18:01.167
> 
> 标签：windows, powershell

我正在 Windows 2003 Server 上运行计划任务（用于 Powershell 脚本）。我相信脚本工作正常。该任务计划从每天早上 7:00 到晚上 11:50 每 10 分钟运行一次。但是，它的运行时间永远不会超过一天。它总是在下午的某个时间（下午 2 点到 6 点之间）停止。我不确定到底发生了什么，但我总是收到错误

```
The attempt to log on to the account associated with the task failed, therefore, the task did not run.
The specific error is:
0x80070569: Logon failure: the user has not been granted the requested logon type at this   computer. Verify that the task's Run-as name and password are valid and try again. 
```

似乎大多数出现此错误的人都在说他们需要让用户“作为批处理作业登录”。但是，这个选项对我来说是灰色的。我搜索了其他用户有类似问题但没有详细编写解决方案的地方（其中一些与GPO有关）。我只使用了 Windows Server 的基本功能，我不知道如何到达他们所指的地方。

有人可以确认“作为批处理作业登录”是否确实是一个解决方案并提供有关如何解决我的问题的详细演练？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:59:56.403

这确实是问题所在。您无法设置此值的原因可能与组策略有关。服务器是否在域中？如果是这样，请按照以下 Microsoft 文章中的说明检查组策略：

[http://technet.microsoft.com/en-us/library/cc755659(v=ws.10](http://technet.microsoft.com/en-us/library/cc755659(v=ws.10) )

# c# - 如何使 Metro GridView 中的组使用不同的布局？

> ID：11418511
> 
> 赞同：12
> 
> 时间：2012-07-10T17:18:06.703
> 
> 标签：c#, microsoft-metro, windows-runtime

我正在编写一个 Windows 8 Metro 应用程序。我正在尝试用三个组绘制一个 GridView。我希望其中一个组的项目布局与其他组不同。我以前在 WPF 中使用过选择器，所以我认为这是一条很好的路线。所以我尝试了 GroupStyleSelector 并[在 MSDN 上找到了这个示例](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh780627.aspx)：

```
public class ListGroupStyleSelector : GroupStyleSelector
{
  protected override GroupStyle SelectGroupStyleCore(object group, uint level)
  {
    return (GroupStyle)App.Current.Resources["listViewGroupStyle"];
  }
} 
```

所以我从适合我的东西改变/扩展了它：

CS：

```
public class ExampleListGroupStyleSelector : GroupStyleSelector
{
  public ExampleListGroupStyleSelector ()
  {
     OneBigItemGroupStyle = null;
     NormalGroupStyle = null;
  }

  public GroupStyle OneBigItemGroupStyle { get; set; }
  public GroupStyle NormalGroupStyle { get; set; }

  protected override GroupStyle SelectGroupStyleCore( object group, uint level )
  {
     // a method that tries to grab an enum off the bound data object
     var exampleListType= GetExampleListType( group );

     if ( exampleListType== ExampleListType.A)
     {
        return OneBigItemGroupStyle;
     }
     if ( exampleListType== ExampleListType.B|| exampleListType== ExampleListType.B)
     {
        return NormalGroupStyle;
     }

     throw new ArgumentException( "Unexpected group type" );
  }
} 
```

XAML：

```
<Page.Resources>
  <ExampleListGroupStyleSelector 
     x:Key="ExampleListGroupStyleSelector"
     OneBigItemGroupStyle="{StaticResource OneBigGroupStyle}"
     NormalGroupStyle="{StaticResource NormalGroupStyle}" />
</Page.Resources>
<GridView
     ItemsSource="{Binding Source={StaticResource exampleListsViewSource}}"
     GroupStyleSelector="{StaticResource ExampleListGroupStyleSelector}">
     <GridView.ItemsPanel>
        <ItemsPanelTemplate>
           <VirtualizingStackPanel
              Orientation="Horizontal" />
        </ItemsPanelTemplate>
     </GridView.ItemsPanel>
</GridView> 
```

但是我在选择器中给出的组是 null 或 DependencyObject，我似乎无法获取任何数据。如果我没有得到任何信息，我应该如何就如何更改 GroupStyle 做出明智的决定。有没有办法可以通过附加属性或类似的方式传递属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:49:00.150

根据此论坛[主题](http://social.msdn.microsoft.com/Forums/hr/winappswithcsharp/thread/5f12273f-e000-4c96-a4bc-6ccc18a104a0?prof=required)，您可以通过将对象强制转换为 ICollectionView 并访问 .Group 属性来提取对象，您将在该属性中获取将组绑定到的对象。这允许对模板进行智能决策。但是它仍然对我（或线程中的其他人）不起作用，因为尽管返回了不同的样式，但只应用了一种样式。

编辑：事实证明 GroupTemplate 并不打算产生不同的组。它旨在更改组的视图，例如在所有组更改的快照视图或类似情况下。

# html - 基于另一个 div 高度居中一个 div

> ID：11418514
> 
> 赞同：1
> 
> 时间：2012-07-10T17:18:13.687
> 
> 标签：html, css

我有一个外部 div，其中我有两个内部 div 来保存徽标和导航。我创建了这个小提琴[http://jsfiddle.net/thiswolf/ZBMhr/1/](http://jsfiddle.net/thiswolf/ZBMhr/1/)

我希望导航基于徽标 div 居中。这是 html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
  <title>Center Depending on another div</title>
  <style type="text/css">
  .container {
      margin-left:2%;
  }
  .outer {
      position:relative;
      height:100px;
      width:100%;
      background-color:orange;
  }
  .inner-left {
      position:relative;
      float:left;
      height:80%;
      width:200px;
      background-color:green;
      margin-top:10px;
      margin-bottom:10px;
  }
  .inner-right {
      position:relative;
      height:40%;
      width:auto;
      float:right;
      background-color:pink;
  }
  </style>
  <meta charset="uft-8">
</head>
<body>
   <div class="container">
      <div class="outer">
         <div class="inner-left">
            <h1>Logo</h1>
         </div>
         <div class="inner-right">
            <p>Navigation</p>
         </div>
      </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:22:43.330

只要您的导航 div 高 40%，使用

```
margin-top: 30%;
position: absolute:
right: 0; 
```

应该足够了，因为 40% + 30% + 30% 等于整个高度。

当外部容器相对定位时，内部元素可以相对于父容器绝对定位。

如果你想给元素一个固定的高度，你可以试试这个：

```
margin-top: 50%;
height: 40px;
top: -20px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:47:53.383

使用 css 进行垂直居中有几种方法。对于这种情况，我建议采用负上边距方法。您将要居中的元素绝对居中，顶部为 50%，负上边距为高度的一半。

```
position:absolute;
top:50%;margin-top:-20%;//20 is half height in this case
right:0;//float doesn't apply to positioned elements 
```

你可以在这里看到这个工作：http: [//jsfiddle.net/nAAJ7/1/](http://jsfiddle.net/nAAJ7/1/)

# linux - 如何从*在*进程中设置硬件观察点？

> ID：11418518
> 
> 赞同：1
> 
> 时间：2012-07-10T17:18:32.287
> 
> 标签：linux, debugging, powerpc, watchpoint

我想在*同*一个进程中为进程中的变量设置硬件观察点。那可能吗？我该怎么做？

使用 Linux 2.6.32 内核和 PowerPC A2 处理器。

# python - Django：如何使用过滤的 ForeignKey 字段的计数来注释查询集？

> ID：11418522
> 
> 赞同：41
> 
> 时间：2012-07-10T17:19:02.477
> 
> 标签：python, django, django-models

Django新手问题:)

我有以下模型 - 每个评论都是针对一个产品的，每个产品都有一个部门：

```
class Department(models.Model):
    code = models.CharField(max_length=16)
class Product(models.Model):
    id = models.CharField(max_length=40, primary_key=True, db_index=True)
    dept = models.ForeignKey(Department, null=True, blank=True, db_index=True)
class Review(models.Model):
    review_id = models.CharField(max_length=32, primary_key=True, db_index=True) 
    product = models.ForeignKey(Product, db_index=True) 
    time = models.DateTimeField(db_index=True) 
```

我想对日期范围（2012-01-01 到 2012-01-08）进行 Django 查询，并返回所有部门的列表，用部门 ID 进行注释，以及该部门审查的产品数量在该日期范围内。

这让我的大脑有点煎熬:)

我可以获得一个时间范围内的所有评论：

```
 reviews = Review.filter(time__range=["2012-01-01", "2012-01-08"]) 
```

然后我猜每个评论都有一个产品领域，每个产品都有一个部门代码。但是我如何按产品和代码、计数和部门 ID 对它们进行分组？

或者，是否最好请求部门，然后以某种方式用产品数量对它们进行注释？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-11T02:54:10.310

`extra`尽可能避免`raw`。[聚合文档](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#cheat-sheet)几乎有这个用例：

直接来自文档：

```
# Each publisher, each with a count of books as a "num_books" attribute.
>>> from django.db.models import Count
>>> pubs = Publisher.objects.annotate(num_books=Count('book'))
>>> pubs
[<Publisher BaloneyPress>, <Publisher SalamiPress>, ...]
>>> pubs[0].num_books
73 
```

因此，要针对您的特定示例进行修改：

```
depts = Department.objects.
            filter(product__review__time__range=["2012-01-01", "2012-01-08"]).
            annotate(num_products=Count('product')) 
```

单独行上的函数调用只是为了便于阅读，您应该相应地移动它们。我没有对此进行测试，但我认为它应该可以工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-03-15T04:28:22.297

在 django`>= 2.0`中，这可以通过

```
depts = Department.objects.all().annotate(
    num_products=Count('product', filter=Q(product__review__time__range=["2012-01-01", "2012-01-08"]))
) 
```

有关更多信息，请阅读文档[https://docs.djangoproject.com/en/2.0/topics/db/aggregation/#filtering-on-annotations](https://docs.djangoproject.com/en/2.0/topics/db/aggregation/#filtering-on-annotations)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-11T01:26:39.713

在过去的几天里，我不得不做几个类似的查询，最简单的方法是使用[`extra`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra)queryset 函数用过滤后的产品计数来注释查询集中的每个对象：

```
start = ..  # need to be formatted correctly
end = ...
departments = Departments.objects.all().extra(select = {
     'product_count' : """ SELECT COUNT(*) FROM appname_department
                           JOIN appname_product
                               ON appname_product.dept_id = appname_department.id
                           JOIN appname_review 
                               ON appname_review.product_id = appname_product.id
                           WHERE appname_review.time BETWEEN %s AND %s
                       """
}, params=[start, end]) 
```

和

```
{% for department in departments %}
    {{ department.product_count }}
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:34:19.647

聚合文档 [https://docs.djangoproject.com/en/dev/topics/db/aggregation/#cheat-sheet](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#cheat-sheet)

可能有一种使用聚合或注释的方法，但我更喜欢这个：

```
departments = Department.objects.all()
for dept in departments : 
    # Get the number of reviewed products for a given range and department
    num_products = dept.product_set.filter(review__time__range=["2012-01-01", "2012-01-08"]).count() 
```

如果您绝对需要它作为模型的功能：

```
class Department(models.Model) :
    ...
    def num_products(self, start_date, end_date) : 
        return self.product_set.filter(review__time__range=[start_date, end_date]).count() 
```

## 编辑

我认为如果您要进行原始查询（类似这样）

```
sql = """SELECT COUNT(Product.*) as num_products, Department.*
    FROM Department
    LEFT OUTER JOIN Product ON Product.department = Department.id
    LEFT OUTER JOIN Review ON Product.id = Review.product
    WHERE Review.time BETWEEN "2012-01-01" AND "2012-01-08"
    GROUP BY Department.id"""

Department.objects.raw(sql) 
```

然后 num_products 将成为结果中每个 Dept 实例的属性。

您可能需要稍微使用字段+表名

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-07T14:48:52.567

我有类似的数据模型相同的情况。

我的解决方案是：

```
 Department.objects \
.extra(where=["<review_table_name.time_field> BETWEEN <time1> AND <time2> "])\
.annotate(num_products=Count('product__review__product_id')) 
```

# .net - 创建带有 ILMerge 抛出异常的签名库

> ID：11418524
> 
> 赞同：5
> 
> 时间：2012-07-10T17:19:05.627
> 
> 标签：.net, ilmerge, assembly-signing

我正在尝试创建包含 Castle.Core 的 FakeItEasy 合并版本。我阅读了有关 ILMerge 的信息，这似乎是我需要的解决方案。下载并构建 FakeItEasy 后，我将所需的所有文件（FakeItEasy.dll (.NET4)、Castle.Core.dll (.NET4)、ilmerge.exe、FakeItEasy.snk）复制到同一个文件夹中。然后我运行以下命令：

```
ilmerge 
    /keyfile:FakeItEasy.snk 
    /out:..\FakeItEasy.dll 
    /t:library 
    /targetplatform:v4,C:\Windows\Microsoft.NET\Framework\v4.0.30319 
    FakeItEasy.dll Castle.Core.dll 
```

并得到以下结果：

```
An exception occurred during merging:                                                             
An attempt was made to load a program with an incorrect format. (Exception from HRESULT: 0x8007000B)                                                                                                
   at System.Compiler.Writer.MscorsnStrongNameSignatureGeneration(String wszFilePath, String wszKeyContainer, Byte[] pbKeyBlob, Int32 cbKeyBlob, IntPtr ppbSignatureBlob, IntPtr pcbSignatureBlob)  
   at System.Compiler.Writer.WritePE(String location, Boolean writeDebugSymbols, Module module, Boolean delaySign, String keyFileName, String keyName)                                              
   at System.Compiler.Writer.WritePE(CompilerParameters compilerParameters, Module module)        
   at ILMerging.ILMerge.Merge()                                                                   
   at ILMerging.ILMerge.Main(String[] args) 
```

如果我不使用“/keyfile:FakeItEasy.snk”，则合并的程序集创建得很好，但这对我没有帮助，因为我需要一个签名版本。

我还尝试将目标平台指定为：

```
/targetplatform:v4,C:\Windows\Microsoft.NET\Framework64\v4.0.30319 
```

但结果是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T02:00:20.737

我最近在运行 Windows 8 64 位的新机器上设置项目时遇到了这个问题。我之前在 Windows 7 32 位虚拟机上进行开发，没有任何问题。ILMerge 命令作为构建后事件运行。由于 Visual Studio 是一个 32 位进程，我还能够使用构建后事件中使用的相同 ILMerge 命令在 Windows 8 64 位计算机上复制 32 位 Visual Studio 命令提示符中的行为。

```
ILMerge.exe 
   /keyfile:public.snk 
   /targetplatform:"v4,C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0" 
   /t:exe 
   /ndebug 
   /out:Result.exe Source.exe Other.dll 
```

我已经完成了大量连接 .NET 应用程序和本机 C++ 库的工作，因此我非常熟悉异常消息`An attempt was made to load a program with an incorrect format.`这表明存在位问题，例如，32 位进程尝试加载 64 位图书馆。我认为正是这种情况。由于这是一台 64 位机器，我还在 64 位 Visual Studio 命令提示符中尝试了 ILMerge 命令。有趣但并不完全令人惊讶的是，在 32 位提示符下生成异常的同一命令在 64 位提示符下也能正常工作。

我在开发时使用了一个只包含公钥信息的 snk 文件，所以我延迟签署合并的程序集。然后，我查看了 ILMerge 的可用命令开关并发现了该`/delaysign`开关。将此开关添加到 ILMerge 命令可缓解从 32 位进程运行 ILMerge 时的问题。

```
ILMerge.exe 
   /keyfile:public.snk 
   /delaysign
   /targetplatform:"v4,C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0" 
   /t:exe 
   /ndebug 
   /out:Result.exe Source.exe Other.dll 
```

更有趣的是，当使用具有完整公钥/私钥对的 snk 文件时，ILMerge 命令可以在没有`/delaysign`开关的情况下正常工作。因此，当使用仅包含公钥信息的 snk 文件以及从 32 位进程启动 ILMerge 时，似乎会生成异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T19:01:32.820

当我从 VS 2013 升级到 VS 2015 并尝试构建一个始终构建良好的项目时，我开始收到此错误（ILMerge 作为构建的一部分执行）。上面的答案提醒我，私钥需要管理权限。然后我记得我的新 VS 2015 快捷方式没有设置为“以管理员身份运行”。一旦我以管理员身份重新启动 VS 2015，构建的 ILMerge 部分工作正常。

# ruby-on-rails - Rails API——我需要存储我的 Oauth2 访问令牌吗？

> ID：11418529
> 
> 赞同：1
> 
> 时间：2012-07-10T17:19:44.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, oauth, oauth-2.0

我正在为我的 Rails 应用程序发布一个 API，并使用 Oauth2 保护它。我已经设置了 Doorkeeper 来处理 Oauth2 提供程序，并且效果很好。[我可以按照此处](https://github.com/applicake/doorkeeper/wiki/Testing-your-provider-with-OAuth2-gem)的教程对单个会话进行身份验证和设置客户端。我想发布一个 Gem 供人们通过 API 访问他们的帐户，但我只希望他们必须对应用程序进行一次身份验证。所以，我有几个问题：

1.  我是否需要存储访问令牌才能完成此操作？大多数 API 要求您存储密钥和机密，但不需要存储令牌。
2.  如果我确实需要存储它，如何从该存储值实例化一个新令牌？
3.  如果我需要存储它，在安全方面，拥有一个不会过期的令牌是否有问题？如果是这样，我应该启用刷新令牌吗？

一般来说，是否有更好/更标准的 API 方法？用户将能够创建可发货的订单（即涉及到金钱），因此这里的安全性是一个非常重要的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:28:56.497

我希望你的问题是正确的。如果不是这种情况，请告诉我。所以这里。OAuth2 有**资源所有者**和**客户**。在您的情况下，API 的用户是 clients 。通常，他们为资源所有者提供服务，其中涉及访问他们在您系统上的资源。每个客户都应该得到一个对她来说唯一的客户密钥和秘密。他们通过门卫添加到您的应用程序的 /oauth/applications UI 获得它。他们需要提供此令牌，而不是您的图书馆。无论如何，它无法做到这一点，因为每个客户端的密钥和秘密都是唯一的。您可以阅读[此处](http://tools.ietf.org/id/draft-ietf-oauth-v2-28.html)以更好地了解流程。

您可能并不真正需要 OAuth2，因为您的系统中没有单独的资源所有者和客户端的概念。在这种情况下，您不必使用 OAuth2。您可以使用简单的令牌身份验证（我认为设计有这样的选项，有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/7614798/devise-api-authentication)）。您也可以决定在 OAuth2 中使用客户端凭据流，但在我看来这有点过头了。

# python - 在python中将两个预先排序的列表打印到一个输出文件中

> ID：11418530
> 
> 赞同：0
> 
> 时间：2012-07-10T17:19:47.590
> 
> 标签：python, list, file-io, merge

我有两个列表已经按需要排序，我需要将它们放入一个文件中，如下例所示：

```
list1 = [a, b, c, d, e]
list2 = [1, 2, 3, 4, 5] 
```

输出文件应如下所示：

```
a1
b2
c3
d4
e5 
```

我对python相当陌生，所以我不太确定如何进行文件写入。我阅读 using`with open(file, 'w') as f:`是一种更好/更简单的方式来启动写入块，但我不确定如何合并列表并打印它们。我可能可以将它们合并到第三个列表中，然后将其打印到文件中，`print>>f, item`但我想看看是否有更简单的方法。

谢谢！

后期编辑：查看我的列表，它们的长度并不总是相同，但无论如何都需要打印所有数据。因此，如果 list2 变为 7，那么输出将需要是：

```
a1
b2
c3
d4
e5
6
7 
```

反之亦然，其中 list1 可能比 list2 长。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T17:21:51.817

使用[zip()](http://docs.python.org/library/functions.html#zip)函数来组合（即压缩）您的两个列表。例如，

```
list1 = ['a', 'b', 'c', 'd', 'e']
list2 = [1, 2, 3, 4, 5]

zip(list1, list2) 
```

给出：

```
[('a', 1), ('b', 2), ('c', 3), ('d', 4), ('e', 5)] 
```

然后，您可以格式化输出以满足您的需要。

```
for i,j in zip(list1, list2):
    print '%s%d' %(i,j) 
```

产生：

```
a1
b2
c3
d4
e5 
```

**更新**：

如果您的列表长度不等，则使用 [itertools.izip_longest()](http://docs.python.org/library/itertools.html#itertools.izip_longest)的这种方法可能对您有用：

```
import itertools
list1 = ['a', 'b', 'c', 'd', 'e']
list2 = [1, 2, 3]

for i,j in itertools.izip_longest(list1, list2): 
    if i: sys.stdout.write('%s' %i)
    if j: sys.stdout.write('%d' %j)
    sys.stdout.write('\n') 
```

给出：

```
a1
b2
c3
d
e 
```

请注意，如果您使用的是 Python 3，则有一种很好的方法来使用该`print()`函数。我在`write()`这里使用是为了避免项目之间出现额外的空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:22:37.683

你应该使用`zip`功能：

> 此函数返回一个元组列表，其中第 i 个元组包含来自每个参数序列或可迭代对象的第 i 个元素。

```
for a, b in zip(lis1, list2):
write(a, b) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T17:28:27.683

```
>>> list1 = ['a', 'b', 'c', 'd', 'e']
>>> list2 = [1, 2, 3, 4, 5]
>>> map(lambda x:x[0]+str(x[1]),zip(list1,list2))
['a1', 'b2', 'c3', 'd4', 'e5'] 
```

没有`zip()`：

```
>>> map(lambda x,y:x+str(y), list1,list2)
['a1', 'b2', 'c3', 'd4', 'e5'] 
```

**编辑：** `If the list2 is list2 = [1, 2, 3, 4, 5,6,7]`然后使用`izip_longest`

```
>>> from itertools import zip_longest
>>> [y[0]+str(y[1]) if y[0]!=None  else y[1] for y in izip_longest(list1,list2,fillvalue=None)]
['a1', 'b2', 'c3', 'd4', 'e5', 6, 7] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:25:09.617

一个班轮：

```
print "\n".join(("%s%s" % t for t in zip(list1, list2))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T17:42:31.223

Simples ...爱你的Python :)

```
>>> from itertools import *
>>> L1 = list("abcde")
>>> L2 = range(1,8)
>>> [(x if x != None else '') + str(y) for (x,y) in izip_longest(L1,L2)]
['a1', 'b2', 'c3', 'd4', 'e5', '6', '7']
>>> print '\n'.join([(x if x != None else '') + str(y) for (x,y) in izip_longest(L1,L2)])
a1
b2
c3
d4
e5
6
7 
```

# r - 如何在 R 中编写最大似然例程？

> ID：11418534
> 
> 赞同：3
> 
> 时间：2012-07-10T17:19:55.737
> 
> 标签：r

我想在我创建的数据样本上运行一些最大似然代码。这是我到目前为止所拥有的：

```
library("maxLik") 
data <- replicate(20, rnorm(100))
logLikFun <- function(param) {
mu <- param[1]
sigma <- param[2]
sum(dnorm(data, mean = mu, sd = sigma, log = TRUE))
}
mle <- maxLik(logLik = logLikFun, start = c(mu = 0, sigma = 1))
summary(mle) 
```

我在为 20 个样本中的每个样本提取平均值和标准偏差时遇到了一些问题，我修改了 apply 函数以尝试适应这一点，但还没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:30:47.267

创建一个函数（`find.mle`在本例中），它接受一个数据向量并基于它计算 MLE，然后将`apply`其应用于以下列`data`：

```
library("maxLik") 
data <- replicate(20, rnorm(100))

find.mle = function(d) {
    logLikFun <- function(param) {
        mu <- param[1]
        sigma <- param[2]
        sum(dnorm(d, mean = mu, sd = sigma, log = TRUE))
    }
    maxLik(logLik = logLikFun, start = c(mu = 0, sigma = 1))$estimate
}

mles = apply(data, 2, find.mle) 
```

这将为您提供一个 2x20 矩阵，其中包含您的估计：

```
> mles
            [,1]      [,2]        [,3]       [,4]       [,5]        [,6]
mu    0.03675611 0.1129927 -0.06499549 0.04651673 0.06593217 -0.08753828
sigma 0.93497523 0.9817961  0.84734600 0.93139761 1.01083924  1.04114752
           [,7]       [,8]      [,9]       [,10]      [,11]       [,12]
mu    0.1629807 0.01665411 0.2306688 -0.02147982 0.07723695 0.009476477
sigma 1.0428713 1.01658241 1.0073277  0.99781761 0.99327722 0.983356049
           [,13]      [,14]      [,15]      [,16]     [,17]     [,18]
mu    0.06524147 0.02442983 -0.1305258 -0.1050299 0.1449996 0.1172218
sigma 1.04004799 0.89963009  0.9979824  1.0227063 0.9319562 0.9916734
           [,19]       [,20]
mu    -0.1288296 -0.05769467
sigma  0.9975368  0.89506586 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:41:39.117

我真的认为不需要编写任何函数来获得均值和标准差的最大似然（以下称为 ML）估计量。如果 X 是正态随机变量，则总体均值和 sd 的 ML 估计量是样本均值和样本 sd，我们知道样本均值是总体均值的无偏估计量，但方差的 ML 估计量是有偏的（向下），因为方差的分母是 n 而不是 n-1。

所以 R 计算样本准方差（针对自由度进行了校正），这是无偏估计量，所以它不是 ML 估计量，但我们可以从 R 估计中得到 ML 估计量，只需将其相乘即可乘以 (n-1) *(1/n)，结果将是方差的 ML 估计，然后应用平方根，瞧，您将得到 sd 的 ML 估计，但我喜欢简单的东西，所以只需乘以sd by (n-1)* (1/n) 这就是你的答案。有关详细说明，请参阅[http://en.wikipedia.org/wiki/Variance上的总体方差和样本方差](http://en.wikipedia.org/wiki/Variance)

现在您可以在 R 中简单地执行以下操作：

```
## Reproducing @ David Robinson code
install.packages('maxLik')
library("maxLik") 
set.seed(007)  ## making it reproducible
data <- replicate(20, rnorm(100))

find.mle = function(d) {
  logLikFun <- function(param) {
    mu <- param[1]
    sigma <- param[2]
    sum(dnorm(d, mean = mu, sd = sigma, log = TRUE))
  }
  maxLik(logLik = logLikFun, start = c(mu = 0, sigma = 1))$estimate
}

mles = apply(data, 2, find.mle)
apply(data, 2, function(x) c(Mean=mean(x), SD=(n-1)*(1/n)*sd(x))) # my simple answer.

# Comparing results:
> mles
           [,1]      [,2]        [,3]        [,4]       [,5]         [,6]        [,7]
mu    0.1386966 0.1304418 -0.03515036 -0.05065659 0.04170382 0.0007424064 -0.07625412
sigma 0.9540009 0.9442371  1.07218240  1.03162817 0.96140925 1.0274500157  0.87450358
            [,8]       [,9]      [,10]      [,11]      [,12]       [,13]       [,14]
mu    0.02024026 -0.1732926 0.03401213 -0.1254751 0.05263887 -0.01258275 -0.02843866
sigma 0.98456202  0.9628233 0.95087131  0.9912367 1.01347266  0.99542339  1.03761674
           [,15]       [,16]     [,17]      [,18]       [,19]    [,20]
mu    0.02441331 -0.03021781 0.2170172 0.02271656 -0.04946737 0.115728
sigma 1.03889635  1.02796932 1.0457951 1.07906578  0.93627993 1.009641

>  apply(data, 2, function(x) c(Mean=mean(x), SD=(n-1)*(1/n)*sd(x)))
          [,1]      [,2]        [,3]        [,4]       [,5]         [,6]        [,7]
Mean 0.1386966 0.1304418 -0.03515036 -0.05065659 0.04170382 0.0007424064 -0.07625412
SD   0.9492189 0.9395041  1.06680802  1.02645707 0.95659012 1.0222998579  0.87012008
           [,8]       [,9]      [,10]      [,11]      [,12]       [,13]       [,14]
Mean 0.02024026 -0.1732926 0.03401213 -0.1254751 0.05263887 -0.01258275 -0.02843866
SD   0.97962684  0.9579971 0.94610501  0.9862680 1.00839257  0.99043377  1.03241563
          [,15]       [,16]     [,17]      [,18]       [,19]    [,20]
Mean 0.02441331 -0.03021781 0.2170172 0.02271656 -0.04946737 0.115728
SD   1.03368881  1.02281656 1.0405530 1.07365689  0.93158677 1.004580 
```

因此，如果您只使用一个简单的产品，您可以删除该函数（@David Robinson 编写的一个非常好的函数）。这是一个简单的理论统计观点。

# javascript - 如何通过javascript在openCPU上调用自己设计的R函数？

> ID：11418535
> 
> 赞同：2
> 
> 时间：2012-07-10T17:19:56.917
> 
> 标签：javascript, r, opencpu

新的[openCPU](http://www.opencpu.org)平台允许在 HTML/javascript 中集成[R函数。](http://www.r-project.org)但是我一直在努力实现。有人可以提供一个示例，说明如何将您自己设计的 R 函数上传到 openCPU 并通过 javascript 使用其参数调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-31T08:48:03.097

由于修改了 openCPU 服务器路径和缺少 JSON 支持，上述解决方案不再起作用。修改后的工作解决方案

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Call R Through OpenCPU</title> 
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
  <script>

      //When Document is Ready
      $(function () {

          //Go R button Click Event Handler
          $("#cmdGoR").click(function () {
              var resultsUrlPrefix = "http://public.opencpu.org",
                  url = resultsUrlPrefix + "/ocpu/library/base/R/identity/save";
              var rCommands = $("#txtRCommands").val();
              $.post(url,
              {
                  x: rCommands
              },
              function (data) {

                var statResultsLink = resultsUrlPrefix + data.toString().match(/.+\/stdout/m),
                    chartLink = resultsUrlPrefix + data.toString().match(/.+\/graphics\/[1]/m);

                  //Add statistical (textual) results to results div
                  $('#results').append("<br/>");
                  $('<div/>', {
                      id: 'statResults'
                  }).appendTo('#results');

                  $("#statResults").load(statResultsLink);

                  //Add charts results to results div
                  $('#results').append("<br/>");
                    $('<img/>', {
                        id: 'chartResults',
                        src: chartLink
                    }).appendTo('#results');

              })
              .error(function (jqXHR, status, error) {
                  alert(jqXHR.responseText);
              });
          });

      });

  </script>
</head>
<body>

<h3>Set of R Commands</h3>
<textarea rows="8" cols="80" id="txtRCommands">

x <- rnorm(1000); 
print(hist(x));

</textarea> 
<br />
<input type="button" value="Run code" id="cmdGoR" />

<div id="results">
</div>

</body>
</html>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:49:46.040

这是一个可以完成这项工作的独立 HTML 页面。它向 openCPU 服务器发送一个请求，并返回一个带有键的 json 对象，这些键指向同一服务器上的相应对象，然后我将这些对象注入到页面中。只需下载代码并单击“运行代码”按钮。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Call R Through OpenCPU</title> 
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js">       </script>
  <script>

      //When Document is Ready
      $(function () {

          //Go R button Click Event Handler
          $("#cmdGoR").click(function () {
              var resultsUrlPrefix = "http://public.opencpu.org/R/tmp/";
              var url = "http://public.opencpu.org/R/call/base/identity/save";
              var rCommands = $("#txtRCommands").val();
              $.post(url,
              {
                  x: rCommands
              },
              function (data) {
                  var obj = $.parseJSON(data);

                  //Add statistical (textual) results to results div
                  $('#results').append("<br/>");
                  $('<div/>', {
                      id: 'statResults'
                  }).appendTo('#results');
                  var statResultsLink = resultsUrlPrefix + obj.object + "/print";
                  $("#statResults").load(statResultsLink);

                  //Add charts results to results div
                  var charts = obj.graphs;
                  if (charts.length > 0) {
                      for (var i = 0; i < charts.length; i++) {
                          var chartLink = resultsUrlPrefix + charts[i] + "/png";
                          $('#results').append("<br/>");
                          $('<img/>', {
                              id: 'chartResults' + (i + 1),
                              src: chartLink
                          }).appendTo('#results');
                      }
                  }

              })
              .error(function (jqXHR, status, error) {
                  alert(jqXHR.responseText);
              });
          });

      });

  </script>
</head>
<body>

<h3>Set of R Commands</h3>
<textarea rows="8" cols="80" id="txtRCommands">

x <- rnorm(1000); 
print(hist(x));

</textarea> 
<br />
<input type="button" value="Run code" id="cmdGoR" />

<div id="results">
</div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T12:53:18.760

感谢您的提示。我试图从您的应用程序中推断出一些简单示例的代码（见打击）。我删除了所有无关紧要的东西，并创建了一些应该在按下按钮后运行一个简单的 R 代码的代码。但是，似乎有一个我无法弄清楚的错误。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>openCPU example 1</title>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<body>
<div class="container">
<form action="http://public.opencpu.org/R/pub/base/identity/ascii" method="POST" id="knitForm">
<button id="run">Run script</button>
<div id="result"></div>
</form>
</div>
<script>

$('#run').click(function() {
  $('#knitForm').submit();
});

/* attach a submit handler to the form */
$('#knitForm').submit(function(event) {

  /* stop form from submitting normally */
  event.preventDefault(); 

  /* get some values from elements on the page: */
  var $form = $( this ),
      term = ‘{my_func <- function(a,b){plot(a,b);}; my_func(2,3);}‘,
      url = $form.attr('action')

  /* Send the data using post and put the results in a div */
  $.post(url, { term },
    function( data ) {
        $("#result").html(eval(data));
        $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
    })
    .complete(function() {$('#run').attr('class', 'btn');})
    .error(function() { alert("An error occurred!"); });
});
</script>

</body>
</html> 
```

# iis - IIS 重定向规则从页面 a 到 b

> ID：11418539
> 
> 赞同：0
> 
> 时间：2012-07-10T17:20:11.767
> 
> 标签：iis, iis-7, url-rewriting

我有一个重定向如下：

```
 <rewrite>
    <rules>
      <rule name="http://mysite/ru/folder/pagename">
        <match url="http://d000097.tech.com/ru/Solutions/Visual+call+solutions/Products" />
        <action type="Rewrite" url="http://d000097.tech.com/us/Solutions/Visual+call+solutions/Products" />
      </rule>
    </rules>
  </rewrite> 
```

但它似乎没有开始，任何人都可以看到上面有什么明显的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:25:56.170

您不应在 url 中包含主机部分。IIS 只匹配主机之后的 url。将规则更改为以下内容：

```
 <rewrite>
<rules>
  <rule name="http://mysite/ru/folder/pagename">
    <match url="^ru/Solutions/Visual+call+solutions/Products$" />
    <action type="Rewrite" url="us/Solutions/Visual+call+solutions/Products" />
  </rule>
</rules> 
```

# java - 小键盘的 JTextField 问题

> ID：11418540
> 
> 赞同：22
> 
> 时间：2012-07-10T17:20:12.440
> 
> 标签：java, linux, jtextfield, redhat, numpad

我最近遇到了一个关于 Java JTextField 的奇怪问题。当我运行以下代码（见下文）时，在文本字段中输入“0”首先发送粘贴操作，然后输入“0”。例如，如果将“text”复制到剪贴板，则当我输入“0”时会输入“text0”。同样，输入“4”会用“4”替换前一个字符（我猜这是删除操作，然后输入“4”）。键入“7”会在键入“7”之前清除文本字段。

这是代码：

```
import javax.swing.JFrame;
import javax.swing.JTextField;

public class Main {

public static void main(String[] args) {
    JFrame frame = new JFrame();
    JTextField text = new JTextField();
    frame.add(text);
    frame.setSize(500, 500);
    frame.setVisible(true);
}

} 
```

问题出现在 Red Hat Linux 上（使用 VNC 从 Windows XP 访问）；一切都在 Window XP 上按预期运行。

**更新**：Ubuntu上的程序也没有问题。我也尝试过使用不同的键盘和 VNC 查看器。

**更新 2**：Java 版本

对于红帽：

```
 java version "1.6.0_17"
    OpenJDK Runtime Environment (IcedTea6 1.7.7) (rhel-1.17.b17.el5-x86_64)
    OpenJDK 64-Bit Server VM (build 14.0-b16, mixed mode) 
```

对于 XP：

```
 java version "1.7.0_05"
    Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
    Java HotSpot(TM) Client VM (build 23.1-b03, mixed mode, sharing) 
```

**更新 3**：尝试在三台不同的 Red Hat 机器上运行该程序（都在同一个工作组中），另外尝试从另一台 XP 计算机上运行它并重新启动。

**更新 4**：今天我到了工作岗位，发现问题已经神奇地消失了。但是，很高兴知道它*为什么*会首先发生，这样我（以及许多遇到这个奇怪问题的其他人）知道将来如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:36:02.273

我不确定，但我只是为了提供帮助而回答：

我对 IcedTea 的体验很糟糕。我不记得到底发生了什么，但当时，安装官方 Java JRE 解决了我的问题。Id est：Oracle 提供的 JRE。

[http://java.com/en/download/index.jsp](http://java.com/en/download/index.jsp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:18:29.077

好吧，很难给出一个准确的答案，但这并不是一个奇怪的现象。通常当 VNC 或远程桌面共享发生时，一台机器的键盘和鼠标事件会传输到另一台机器。完成此映射后，很可能会出现错误行为，尤其是在剪贴板复制、粘贴时。它不仅发生在 Linux 世界中，也发生在 Windows 世界中。

我根据自己的经验告诉这一点。在我的工作场所，我们经常 rdc 到其他机器，一些运行 XP，一些运行 Windows 7。在一台机器上复制剪贴板并在远程机器上粘贴的操作在某些系统上有效，而在其他系统上失败。

引用另一个关于 java 和远程桌面访问的经验，我有一个在我的 eclipse 上运行的 java 应用程序。当我从其他一些机器 rdc 进入我的机器时，我发现 eclipse 完全无法启动应用程序。为了让它工作，我需要先在我自己的系统上启动它，保持应用程序运行，然后从另一个 rdc 进入我的系统。

试想一下，如果 Windows XP 和 Windows 7 属于同一个家族的话。人们只能希望在将 Linux 和 Windows 与 VNC 一起使用时，不会发生这种古怪的事情：)

如前所述，很难说它发生的原因太准确，但可以肯定地说，这纯粹是在操作系统到操作系统级别发生的事情，而不是在摇摆框架级别发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T21:03:49.423

尝试将此代码放在程序的开头。

```
KeyboardFocusManager.setCurrentKeyboardFocusManager(new DefaultKeyboardFocusManager(){
    public boolean dispatchKeyEvent(KeyEvent e) {
        if (e.getKeyLocation() == KeyEvent.KEY_LOCATION_NUMPAD){
            return true;
        }
        return super.dispatchKeyEvent(e);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:28:08.263

这似乎是 VNC 的一个已知问题。根据VNC官方网站：

> Num Lock 键可能不同步。断开连接，按一次客户端计算机的 Num Lock 键，然后重新连接。

来源：[http ://www.realvnc.com/products/viewerplus/known-issues/](http://www.realvnc.com/products/viewerplus/known-issues/)

这也显示在 VNC 的常见问题解答中：

> Q. 键盘不工作/按键做奇怪的事情！
> 
> 有一个常见问题可能导致此问题。如果按下修改键，例如 Shift、Ctrl 或 Alt，然后查看器窗口失去焦点或死机，则“键释放”消息永远不会到达查看器，因此永远不会到达远程服务器。然后远程机器会认为 M 是 Ctrl-M 等。我们已经做了各种事情来减少这种情况发生的机会；例如，当观众失去焦点时，他们会自动释放各种修饰符，但它仍然会发生并且当它发生时可能会令人困惑。解决方案很简单：只需按下并释放卡住的修改键。如果您不知道它是哪个，请一次尝试一个。

来源：[http ://www-hep.nhn.ou.edu/d0/software/vnc-3.3.2r2/faq.html](http://www-hep.nhn.ou.edu/d0/software/vnc-3.3.2r2/faq.html)

如果此信息表明您的问题，那么可能是当问题“神奇地消失”时，Num Pad 当天只是与 VNC 同步，而在其他方面不同步（这当然意味着问题可能再次出现）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-16T08:47:07.743

检查终端，功能下的“禁用应用程序键盘模式”。

# drupal - 如何在 Views 2 (Drupal 6) 中使用分类参数

> ID：11418543
> 
> 赞同：0
> 
> 时间：2012-07-10T17:20:29.583
> 
> 标签：drupal, drupal-6, drupal-views

我想在具有以下 URL 语法的页面上显示视图：

www.sitename.com/what-we-do/TAXONOMY-NAME

分类名称由破折号分隔，例如“展览-设计-管理”。我只想在视图中显示与 url 共享相同分类术语的节点。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:11:19.067

在视图 3（D6 和 D7）中，您将添加一个分类术语字段作为参数，然后将其默认设置为来自 URL 的术语 ID。有一个复选框可以继承当前节点的分类术语，可以满足您的需求。

但这是不可能的，除非您手动将术语 ID 加载到视图中。试试 [Similar By terms](http://drupal.org/project/similarterms)模块（我猜它适合你的用例）。您还可以查看[此比较表](http://drupal.org/node/323329)以确定最适合您的。Views 3 不需要任何额外的模块。

# php - PHP if 是整数的倍数

> ID：11418552
> 
> 赞同：1
> 
> 时间：2012-07-10T17:21:11.133
> 
> 标签：php, if-statement, for-loop

在 for 循环中，我需要添加一些仅在循环位于 [(3 的倍数) 减 1] 时输出的 HTML。

例如，我可以做的是：

```
for($i=0; $i<count($imagearray); $i++)
{
    if($i=="0" || $i=="2" || $i=="5" || $i=="8" || $i=="11")
    {
        echo 'string';
    }
} 
```

但这对于大的 for 循环来说不是很优雅而且非常无用，有没有合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T17:22:41.593

```
if ( $i==0 || ($i+1)%3 == 0 )
{
    //do stuff
} 
```

这样做的目的是转到下一个索引，将其除以 3，然后查看是否有余数。如果没有，则表示当前索引比可被 3 整除的数字小一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:22:19.663

使用[模运算符](http://php.net/manual/en/language.operators.arithmetic.php)。

```
if (! (($i+1) % 3) ) { 
```

如果`$i+1`除以 3 没有余数，结果将为零。那么你只需要一个布尔值*not*。

如果您也想匹配 0 （因为您在示例中使用它，但它与您的描述不匹配），那么您必须使用`||`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:22:33.630

您想为此使用模数：

```
(1 % 3) == 1
(2 % 3) == 2
(3 % 3) == 0
(4 % 3) == 1 
```

祝你好运

模数就是说，给我除法的余数。所以 1 / 3 等于 0 余数 1，依此类推。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:24:55.140

```
if(($i+1)%3 == 0){
    //do something
} 
```

% 运算符称为模运算符，它返回除法的余数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T17:26:31.940

最优雅的方法是

```
if ($i % 3 === 2) {
  //do stuff
} 
```

因为它不会增加`$i`价值，但所有答案基本上都是正确的！

# google-app-engine - 你如何在谷歌应用引擎（Python）中使用 numpy

> ID：11418558
> 
> 赞同：13
> 
> 时间：2012-07-10T17:21:25.263
> 
> 标签：google-app-engine, numpy

根据[此处](https://developers.google.com/appengine/docs/python/tools/libraries27)的官方文档，支持 numpy 作为谷歌应用引擎中的库。试了几次还是无法导入，谁能分享一下代码来使用？

我相信它应该在 app.yaml 中调用：

```
libraries:
- name: numpy
  version: "1.6.1" 
```

然后以某种方式导入到脚本中。我尝试了明显的：

```
import numpy 
```

但它给了我以下错误：

ImportError：没有名为 numpy 的模块

任何简单的代码都值得赞赏，例如你如何在谷歌应用引擎脚本中执行[“numpy.average”函数？](http://docs.scipy.org/doc/numpy/reference/generated/numpy.average.html)

```
>>> data = range(1,5)
>>> data
[1, 2, 3, 4]
>>> np.average(data)
2.5 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T22:44:46.677

如果你想让它在本地工作，你必须在本地下载并安装它（我从这里得到我的[http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)）

除此之外，您必须确保您正在运行 python27，并且您正在将其导入 app.yaml 文件，例如：

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: no

handlers:
- url: /.*
  script: helloworld.py

libraries:
- name: numpy
  version: "1.6.1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:06:38.633

您可以查看Brian Quinlan[在 App Engine 上充分利用 Python 2.7 中演示的 Predator 应用程序的代码。](https://developers.google.com/events/io/sessions/gooio2012/300/)他从 11:00 开始引导您完成

# mysql - mysql一定要格式化才能进入吗？

> ID：11418559
> 
> 赞同：0
> 
> 时间：2012-07-10T17:21:29.240
> 
> 标签：mysql, insert

这真的超级奇怪，也许有人知道答案，

我有一张这样的桌子

```
mysql> describe sweeps;
+----------------+------------------+------+-----+---------------------+-----------------------------+
| Field          | Type             | Null | Key | Default             | Extra                       |
+----------------+------------------+------+-----+---------------------+-----------------------------+
| entity_id      | int(20) unsigned | NO   | PRI | NULL                | auto_increment              |
| fb_id          | varchar(120)     | YES  |     | NULL                |                             |
| title          | varchar(5)       | YES  |     | NULL                |                             |
| first_name     | varchar(30)      | YES  |     | NULL                |                             |
| last_name      | varchar(30)      | YES  |     | NULL                |                             |
| birthday_month | int(2) unsigned  | YES  |     | NULL                |                             |
| birthday_day   | int(2) unsigned  | YES  |     | NULL                |                             |
| birthday_year  | int(4) unsigned  | YES  |     | NULL                |                             |
| created_at     | datetime         | YES  |     | 0000-00-00 00:00:00 |                             |
| last_submit    | timestamp        | NO   |     | CURRENT_TIMESTAMP   | on update CURRENT_TIMESTAMP |
+----------------+------------------+------+-----+---------------------+-----------------------------+ 
```

`INSERT`如果我像这样把它放在一行中，那将不接受

```
mysql> `sweeps` (entity_id,fb_id,title,first_name,last_name,birthday_month,birthday_day,birthday_year,created_at) VALUES (1,'fooID1','mr','John','Doe',1,1,1999,NOW());
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '`sweeps` (entity_id,fb_id,title,first_name,last_name,birthday_month,birthday_day' at line 1 
```

但奇怪的是，如果我像这样隔开它，它会毫无错误地接受它吗？为什么是这样？

```
mysql> INSERT INTO `sweeps` (
    ->   entity_id,
    ->   fb_id,
    ->   title,
    ->   first_name,
    ->   last_name,
    ->   birthday_month,
    ->   birthday_day,
    ->   birthday_year,
    ->   created_at
    -> ) VALUES (
    ->   1,
    ->   'fooID1',
    ->   'mr',
    ->   'John',
    ->   'Doe',
    ->   1,
    ->   1,
    ->   1999,
    ->   NOW()
    -> );
Query OK, 1 row affected (0.41 sec)

mysql> SELECT * FROM sweeps;
+-----------+--------+-------+------------+-----------+----------------+--------------+---------------+---------------------+---------------------+
| entity_id | fb_id  | title | first_name | last_name | birthday_month | birthday_day | birthday_year | created_at          | last_submit         |
+-----------+--------+-------+------------+-----------+----------------+--------------+---------------+---------------------+---------------------+
|         1 | fooID1 | mr    | John       | Doe       |              1 |            1 |          1999 | 2012-07-10 10:16:58 | 2012-07-10 10:16:58 |
+-----------+--------+-------+------------+-----------+----------------+--------------+---------------+---------------------+---------------------+
1 row in set (0.04 sec) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:23:00.817

它不会插入，因为您`INSERT INTO`在命令中缺少：

```
mysql> `sweeps` (entity_id,fb_id,title,first_name,last_name,... 
```

应该

```
mysql> INSERT INTO `sweeps` (entity_id,fb_id,title,first_name,last_name,... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:26:55.610

你有一个“插入”

您的示例中缺少：

```
mysql> `sweeps` (entity_id, 
```

# c# - C#.NET：警报消息

> ID：11418560
> 
> 赞同：-1
> 
> 时间：2012-07-10T17:21:31.223
> 
> 标签：c#

我正在创建 Windows 应用程序，如果在销售时数据库中的商品库存少于 10（例如），那么它应该发出低库存警报的消息，并且它将持续到库存未更新。

我不确定触发器是否有助于解决这个问题。另外，我对触发器的了解不多。

谁能帮我让它工作？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:24:24.480

检查数据库中的可用数量并决定做什么

```
int limit=10;
var availableQuantity=yourRepositary.GetAvailableQuantity();
if(availableQuantity<limit)
{
  MessageBox.Show("Not enough !");
}
else
{ 
   //continue the transaction
} 
```

假设`GetAvailableQuantity`是您的数据访问层中的一种方法，它为您提供数据库中的可用数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:25:07.467

C# 没有触发器。您是在谈论 SQL 触发器吗？如果是这样，那么您假设他们做了他们没有做的事情。SQL 中的触发器发生在事件上（如表更新或插入）。

如果您在谈论 C# 事件，那么它们可能很有用。这取决于程序的设计以及访问数据库的方式和时间。

# ruby-on-rails - curl，gem install 连接失败

> ID：11418561
> 
> 赞同：2
> 
> 时间：2012-07-10T17:21:48.777
> 
> 标签：ruby-on-rails, ruby, gem, rvm

我已经在谷歌上查看了所有可能的答案，但我无法弄清楚。我在这里真的要疯了！

我正在运行 osx lion 并安装了 ruby​​ 和 ruby​​Gems 但每当我尝试运行时：

```
gem install rails 
```

即使使用 sudo 我得到：

```
WARNING:  Error fetching data: Host is down - connect(2) (http://rubygems.org/latest_specs.4.8.gz)
WARNING:  Error fetching data: Host is down - connect(2) (http://rubygems.org/specs.4.8.gz)
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
Host is down - connect(2) (http://rubygems.org/gems/i18n-0.6.0.gem) 
```

然后当我尝试使用安装 rvm 时：

```
curl -L https://get.rvm.io | bash -s stable 
```

我得到：

```
curl: (7) Failed to connect to 208.85.148.213: Host is down 
```

现在我对整个终端的东西不是很好，所以也许是我，但我不在代理后面，防火墙已关闭。

我检查了 gems 的来源，它是正确的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:27:22.697

这听起来像是防火墙问题 - 你有 LittleSnitch 或 Hands Off 之类的东西吗？安装？如果是这样，请禁用它们并重试；您可能有一条规则阻止从 shell 访问。

快速的谷歌搜索显示[至少有另一个人](http://aminsblog.wordpress.com/2012/05/12/mac-os-x-host-is-down-with-curl-python-pipetc/)遇到了您遇到的问题，并且有防火墙规则阻止访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:31:58.143

如上所述，这听起来像是您的连接问题。验证您的防火墙并尝试运行一些跟踪路由。您的 DNS 设置似乎有些正确，因为您对 rvm.io 的查找为我返回了相同的 IP。

# c# - 如何查找 TextBox 是否为只读

> ID：11418562
> 
> 赞同：0
> 
> 时间：2012-07-10T17:21:50.727
> 
> 标签：c#, .net, microsoft-ui-automation

我正在开发一个应用程序来自动化其他应用程序。我希望能够确定“其他”应用程序上的文本框元素是否是只读的。如果是单行文本框，MS UI 自动化框架提供了 ValuePattern，我可以从该模式中获取只读属性，但是当我们有多行文本框时，没有可用的 ValuePattern，我只能访问 TextPattern 和 ScrollPattern。如何使用 MS UI 自动化从多行文本框中获取只读属性？

PS 我试图在互联网上找到一些关于这个的东西，但似乎没有太多关于 MS UI 自动化的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:35:11.583

该`TextPattern`模式提供了一种检查只读状态范围的方法。检查完整`DocumentRange`会告诉您整个文本框是否为只读：

```
TextPattern textPattern = textProvider.GetCurrentPattern(TextPattern.Pattern) as TextPattern;

object roAttribute = textPattern.DocumentRange.GetAttributeValue(TextPattern.IsReadOnlyAttribute);
if (roAttribute != TextPattern.MixedAttributeValue)
{
    bool isReadOnly = (bool)roAttribute;
}
else
{
    // Different subranges have different read only statuses
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-21T10:54:21.623

例如检查是否`textBox2`是只读的。

检查是否`textBox2` 为只读的方法：

```
private bool checkReadOnly(Control Ctrl)
        {
            bool isReadOnly = false;
            if(((TextBox)Ctrl).ReadOnly == true)
            {
                isReadOnly = true;
            }
            else
            {
                isReadOnly = false;
            }
            return isReadOnly;
        } 
```

使用按钮单击事件的方法：

```
private void button1_Click(object sender, EventArgs e)
        {
            if (checkReadOnly(textBox2) == true)
            {
                MessageBox.Show("textbox is readonly");
            }
            else
            {
                MessageBox.Show("not read only textbox");
            }
        } 
```

`textboxes`如果只读或不使用相同的方法检查表单上的所有内容：

```
private void button2_Click(object sender, EventArgs e)
        {
            foreach(Control ct in Controls.OfType<TextBox>())
            {
                if (checkReadOnly(ct) == true)
                {
                    MessageBox.Show(ct.Name + " textbox is readonly");
                }
                else
                {
                    MessageBox.Show(ct.Name + " not read only textbox");
                }
            }
        } 
```

# wordpress - 集成 Wordpress 和自定义 URL 重写

> ID：11418567
> 
> 赞同：0
> 
> 时间：2012-07-10T17:22:07.807
> 
> 标签：wordpress, .htaccess, mod-rewrite, url-rewriting

我正在使用打开永久链接的 Wordpress 3.4.1。在我的 .htaccess 中，我有以下代码：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

我还想设置自定义重写（不是重定向），以便当用户访问此 URL 时：

[http://example.com/about/video-center/youtubeID/title-slug/](http://example.com/about/video-center/youtubeID/title-slug/)

它在内部被重写为：

[http://example.com/about/video-center/](http://example.com/about/video-center/)

现在，第一个 URL 404s。

* * *

我尝试在该行之后将此规则添加到我的 .htaccess 中`RewriteBase /`：

```
RewriteRule ^about/video-center/(.+)$ /about/video-center/ [NC,L] 
```

什么都不做（我仍然得到 404）。如果我将 a 添加`R`到标志中，那么它会重定向并且 /about/video-center/ 加载得很好，这使我相信该规则正在匹配并适当地重写。

* * *

我的理论是重写工作正常......但是当 WP 的重写规则生效时，我拥有的任何自定义重写规则都会被覆盖——即使它在内部重写，WP 仍在尝试处理地址栏中的 URL。

我不知道如何解决这个问题并使我的自定义重写与 Wordpress 一起工作。

现在，我意识到单独从 .htaccess 可能无法实现我想要的结果，并且可能需要一个插件或我的 Theme 的 functions.php 中的一些自定义代码来解决这个问题。我愿意接受任何解决方案来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:24:39.127

[这](http://codex.wordpress.org/Class_Reference/WP_Rewrite)看起来很有希望。（来自 WP 的文档）查看那里的第一个示例 - 您可能可以跳过添加查询变量，因为您正在寻找的重写似乎更简单。

但是，ID / url-slug 会发生什么？不再需要该信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:14:04.423

花了太多时间试图找到解决方案，我将使用散列代替：

[http://example.com/about/video-center/#youtubeID/title-slug/](http://example.com/about/video-center/#youtubeID/title-slug/)

# iphone - OpenGL ES 2.0 Z 轴不影响遮挡

> ID：11418593
> 
> 赞同：1
> 
> 时间：2012-07-10T17:22:49.930
> 
> 标签：iphone, objective-c, opengl-es, glkit

因此，我正在使用本教程进行一些 OpenGL 实验，但我遇到了一个问题，由于某种原因，我的顶点的深度似乎与它们的绘制方式无关。在下面的屏幕截图中，立方体的大小相同，但较大的立方体更靠近屏幕。我相信它应该遮挡较小的立方体，但事实并非如此。我几乎完全按照教程中的代码进行了操作，有什么明显的错误吗？

[http://games.ianterrell.com/opengl-basics-with-glkit-in-ios5-encapsulated-drawing-and-animation/](http://games.ianterrell.com/opengl-basics-with-glkit-in-ios5-encapsulated-drawing-and-animation/)

[截图 http://dl.dropbox.com/u/2396540/image.png](http://dl.dropbox.com/u/2396540/image.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:39:37.323

您可能设置了没有深度缓冲区的 GLKView。GLKView 具有`drawableDepthFormat`控制可绘制对象深度缓冲区的创建和精度的属性。默认值`GLKViewDrawableDepthFormatNone`适用于 2D 合成。

当您想要绘制 3D 对象时，您应该将其设置为`GLKViewDrawableDepthFormat16`或者`GLKViewDrawableDepthFormat24`如果您需要更高的深度精度。

# php - 如何在 PHP 中减小图像大小而不损失质量

> ID：11418594
> 
> 赞同：45
> 
> 时间：2012-07-10T17:22:51.400
> 
> 标签：php, image, performance, compression, google-pagespeed

我正在尝试开发一个基于图像的网站。对于更快的页面加载速度和最佳压缩实践的最佳图像类型，我真的很困惑。请告诉我压缩图像大小的最佳方法。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-10-16T13:34:20.600

如果您希望使用编码本身来减小大小，您可以在 php.ini 中遵循此代码。

```
<?php 
function compress($source, $destination, $quality) {

    $info = getimagesize($source);

    if ($info['mime'] == 'image/jpeg') 
        $image = imagecreatefromjpeg($source);

    elseif ($info['mime'] == 'image/gif') 
        $image = imagecreatefromgif($source);

    elseif ($info['mime'] == 'image/png') 
        $image = imagecreatefrompng($source);

    imagejpeg($image, $destination, $quality);

    return $destination;
}

$source_img = 'source.jpg';
$destination_img = 'destination .jpg';

$d = compress($source_img, $destination_img, 90);
?> 
```

* * *

```
$d = compress($source_img, $destination_img, 90); 
```

这只是一个 php 函数，它传递源图像（即`$source_img`）、目标图像（`$destination_img`）和要压缩的图像质量（即 90 ）。

```
$info = getimagesize($source); 
```

该`getimagesize()`函数用于查找任何给定图像文件的大小并返回尺寸以及文件类型。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-10T17:26:37.493

我会去`jpeg`。阅读[这篇](https://superuser.com/questions/283366/reducing-an-image-size-without-losing-its-quality)关于缩小图像大小的帖子，并在决定技术后，使用[ImageMagick](http://php.net/manual/en/book.imagick.php)

希望这可以帮助

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-10T17:26:11.607

您可以调整大小，然后使用 imagejpeg()

不要将 100 作为 imagejpeg() 的质量 - 任何超过 90 的东西通常都是矫枉过正的，只会让你得到更大的 JPEG。对于缩略图，尝试 75 并向下工作，直到质量/大小的权衡是可以接受的。

```
imagejpeg($tn, $save, 75); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-05T22:41:29.230

好吧，我想我有一些有趣的东西给你...... [https://github.com/whizzkid/phpimageresize](https://github.com/whizzzkid/phpimageresize)。我写它的目的完全相同。高度可定制，并且做得很好。

# jquery - jQuery滑块给出不正确的值

> ID：11418610
> 
> 赞同：1
> 
> 时间：2012-07-10T17:23:37.373
> 
> 标签：jquery, slider

我对使用 jQuery 很陌生，所以如果这个问题很荒谬，请原谅。

我有一个 jQuery 滑块，它显示当前选择的值，共 100 个。我现在需要获取余数，以便稍后在计算中使用它。

我的代码显示了两个值，但是 percent2 通常是应该显示的两侧的 1 或 2 个数字，因此 percent1 将显示为 100，而 percent2 将显示为 2。

代码是：

```
<script type="text/javascript">
    $(function () {
        $("#percent_slider").slider({
            orientation: "horizontal",
            range: false,
            min: 0,
            max: 100,
            value: 50,
            step: 1,
            slide: function (event, ui) {
                $("#percent1").text(ui.value);
                var percent2 = 100 - ($("#percent_slider").slider("value"));
                $("#percent2").text(percent2.toFixed(0));
            },
        });
    });
</script> 
```

这是找到我想要的价值的最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:26:48.233

出于某种原因，我真的不知道为什么，这是有效的：

```
slide: function( event, ui ) {
    var sliderVal = ui.value,
        percent2 = 100-sliderVal;
    $( "#percent1" )
        .text(sliderVal);
    $("#percent2" )
        .text(percent2);

    console.log(sliderVal, percent2, sliderVal + percent2); 
```

[JS Bin 演示](http://jsbin.com/ofahew/2/)。

尽管我不完全确定，但我假设在`ui.value`整个函数中对变量的重复评估之间存在时间延迟；将该值分配给变量似乎消除了延迟，或者至少将其最小化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:36:09.163

也许需要将其作为整数进行处理，似乎这个值是一个字符串......像这样使用**parseInt()**：

```
 var percent2 = 100 - parseInt($("#percent_slider").slider("value")); 
```

# java - java中的实例变量创建

> ID：11418612
> 
> 赞同：2
> 
> 时间：2012-07-10T17:23:51.800
> 
> 标签：java, inheritance, hierarchy, instance-variables

如果我有以下情况：

```
public class Foo extends Baz{
  private String banana = "banana";
  //blah blah blah
}

public class Baz{
  protected static String apple = "apple"; 
} 
```

首先创建的是苹果还是香蕉？我想说苹果首先被创建，但我不确定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T17:26:45.650

`apple`是首先创建的。它是静态的，并且在父级类中。

静态初始化程序（初始化`apple`变量）将在`Baz`加载类后立即运行，这必须在创建实例之前发生`Baz`。

intsance 初始化程序（初始化`banana`变量）将在`Foo`创建实例后立即运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T17:27:45.367

`apple`是一个*静态*变量，所以它在类初始化时被初始化。这发生*在*可以创建实例之前 - 因此在这种特殊情况下它是*在之前初始化的。* `banana`

如果`apple`是一个*实例*变量，它仍然会在之前被初始化`banana`：实例变量被初始化，就好像初始化器出现在构造函数体的开头，但是*在*任何链接到超类构造函数之后。（如果您感兴趣，这与 C# 不同，其中实例变量初始化程序在构造函数链接*之前执行。）*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T17:28:12.233

要创建一个类的实例，您需要加载和初始化这个类，所以很明显，静态字段将在第一个实例字段初始化之前被初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T14:08:31.567

您已经清楚地给出`Baz`了父类并且`Foo`正在扩展`Baz`. 因此，当类初始化时，父类变量将初始化。那也是`apple`静态变量。

何时静态变量将在实例变量之前初始化。如果那些没有被初始化，它将把 int 的默认值设为 '0'。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T17:35:14.953

如前所述，`apple`先创建后`banana`创建。[您可以在java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)第12 章中了解为什么会出现这种情况[。执行](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html)：

*   [12.2\. 类和接口的加载](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.2)
*   [12.5。创建新的类实例](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)

# objective-c - 显示视图后无法更改 UITableView

> ID：11418613
> 
> 赞同：0
> 
> 时间：2012-07-10T17:23:57.273
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我有一个 UINavigationController 将自定义 UITableViewController 推送到堆栈上。这个推送的视图控制器，也是表视图委托和数据源，然后需要从互联网下载所需的数据才能显示。当用户滚动到表格视图的底部时，也会发生这种下载过程，其中新下载的数据会附加到表格视图的底部。

我想通知用户此下载正在进行。问题是我尝试了很多方法，但表格视图没有显示我在下载之前所做的任何更改。我已将通知和下载封装到自定义 UITableViewController 类中的单个方法中：

```
- (void) extractArticlesFromURL:(NSURL) url
{   
    // 1st method - set alpha
    self.tableView.alpha = 0.2;

    // 2nd method - push an overlay while downloading
    UIViewController* overlay = [[UIViewController alloc] init];
    overlay.view.backgroundColor = [UIColor blackColor];
    [self.navigationController pushViewController:overlay animated:NO];

    // 3rd method - introduce a BOOL isLoading, which is used in data source
    // and delegate methods in an attempt to change display
    isLoading = YES;

    [self.tableView reloadData];
    [self.tableView setNeedsDisplay];

    // Spend a few seconds downloading data which is stored in an
    // array which is accessed during UITableViewDelegate method calls...

    self.tableView.alpha = 1;
    isLoading = NO;
    [self.navigationController popViewControllerAnimated:NO];

    [self.tableView reloadData];
} 
```

我将这个特殊的方法称为 in `-(void)scrollViewDidScroll: (UIScrollView*)scrollView`，这肯定会被调用，因为表格视图附加了新数据，但在下载过程中显示没有变化。我不介意应用程序冻结，只是它在冻结之前没有更新显示。

如果有帮助，我将使用 XCode 4.3.2 和 LLVM 3.1，并使用 iPhone Simulator 5.1 测试功能。应用程序的这个组件是单线程的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:31:03.103

您会冻结视图，因为您需要花费大量时间来完成这些操作并且您正在主线程中运行。

解冻视图的最佳方法是使用单独的线程收集所有远程数据。当您结束加载数据时，您调用主控制器并告诉它更新视图（更新表、推送新控制器等）。

此外，当您开始在单独的线程中加载数据时，您可以在主线程中更新您的视图，即在屏幕上添加一个旋转轮或一些“正在加载...”消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:45:11.290

我的回答只是给出提示，而不是关于实施。

好吧，您可以在异步调用方法中使用 @synchronize 方法，并且您可以在用户滚动 tableView 时识别 tableView 的最后一行，然后您可以调用仅更新数据模型的刷新/更新方法，否则您可以放置导航栏上的一个刷新按钮以允许用户下载更多项目，否则您可以运行计时器，如果它与您的缓存模型没有不同，则只需从您的服务器下载最新数据。您应该始终缓存数据模型。

# c# - 在VS2010中放置断点会影响程序的运行时行为吗？

> ID：11418614
> 
> 赞同：1
> 
> 时间：2012-07-10T17:23:58.993
> 
> 标签：c#, visual-studio-2010, debugging, breakpoints

一段时间以来，我一直在研究这个问题，对我来说很明显普通断点的放置会极大地影响程序的运行时行为。

我在这里说的是条件断点，例如，当设置断点条件时，`var == null`这种情况永远不会发生，但是当我删除断点时，这种`var == null`情况经常发生。

可以吗？

**附录：**

好吧，我的代码是多线程的，因此很难发布代码以重现错误。基本上我有两个线程。一种是将项目放入队列中，另一种是将项目永久地从队列中取出。在下面的代码片段中，我遇到的情况是第一个线程从不将空项排入队列，但由于某种原因，它们正在寻找进入队列的方式。这让我插入 if 语句以防止出现*NullReferenceException*。虽然是一个临时的解决方法，但我的程序确实从那时起运行了。然后我对空项从队列中出列的频率很感兴趣，我在带有条件的 if 语句的行中放置了一个条件断点`inv == null`. 现在的效果是，当有断点时 inv 似乎永远不会为空，而当没有断点时 inv 似乎通常为空。

```
public void _dequeue () {

            while (!Signals.TerminateSignal.WaitOne(0, false)) {

                if (Signals.DequeueSignal.WaitOne()) {

                    lock (Queue) {

                        IInvocation inv;
                        Queue.TryDequeue(out inv);

                        // Conditional Breakpoint
                        if (inv != null)
                            inv.Invoke();

                        _poolHooks[PoolIndex].DecrementWaiting();
                        _poolHooks[PoolIndex].IncrementPending();

                        if (Queue.Count == 0) Signals.DequeueSignal.Reset();

                    }
                }
            }
        } 
```

当队列中的某些项目开始为空项目时，我的问题再次开始，尽管我从未添加空项目。即使出于这个原因，我也放置了一条在有空值时抛出异常的行。异常永远不会被抛出，但我的队列中仍然有空项目，我不知道为什么。

```
public static void EnqueueInvocation (int poolIndex, IInvocation inv ) {

        if (inv == null) throw new Exception("Red Alert");

        lock (_deqThreads[poolIndex].Queue) {

            _poolHooks[poolIndex].IncrementWaiting();

            _deqThreads[poolIndex].Queue.Enqueue(inv);
            _deqThreads[poolIndex].Signals.DequeueSignal.Set();
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T17:25:36.727

“条件断点”肯定会影响时间。如果您有竞争条件，它肯定会改变行为。您也可以开始看到超时。

这是因为在大多数处理器上不存在真正的“条件断点”。您实际上拥有的是“断点，有条件地随后自动恢复执行”，即使条件不满足，这也很慢，因为调试器断点处理程序必须运行，读取内存，测试条件，然后发出继续。

* * *

现在您已经发布了代码，我想我看到了问题所在。

您没有检查`TryDequeue`. 当没有什么要出队时， inv 将是`null`，不是因为`null`被放入队列，而是因为队列中根本没有项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:28:43.650

这些断点根本不应该影响您的代码执行（除了减慢标记的代码行）。你确定你不是不小心写`var = null`的或类似的东西吗？这也可能是一些与时间相关的问题（例如，您的代码较慢，因此一些多线程情况/竞争条件很少发生），但最终真的很难说 - 至少它不是因为使用这些而导致的一般问题或劣势.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T17:37:23.053

无论我在哪里设置断点，我都看不到 x 的评估行为有什么不同。

```
 static void Main(string[] args)
    {
        var x = new object();
        if (x == null)
        { Console.WriteLine("x is null"); }
        else
        { Console.WriteLine(x.ToString()); }
        x = null;
        if (x == null)
        { Console.WriteLine("x is null"); }
        else
        { Console.WriteLine(x.ToString()); }
    } 
```

> System.Object
> x 为空

# jquery - 如何禁用和取消禁用是和否按钮

> ID：11418619
> 
> 赞同：0
> 
> 时间：2012-07-10T17:24:17.187
> 
> 标签：jquery

我有 2 个按钮，分别是“是”和“否”

```
<input class="answerBtns answers answerBtnsOff" name="answerYesName"   id="answerYes"   type="button"   value="Yes"     onclick="btnclick(this);"/>
<input class="answerBtns answers answerBtnsOff" name="answerNoName"    id="answerNo"        type="button"   value="No"      onclick="btnclick(this);"/> 
```

我试图做的是，如果突出显示“是”按钮，则禁用“否”按钮，如果突出显示“否”按钮，则禁用“是”按钮，如果没有突出显示 2 个按钮，然后从两个按钮中删除禁用。

但是我似乎可以完成这项工作，当我尝试使用 .class() 读取类时，我的 if 语句中不断出现错误，我怎样才能让下面的函数像我所说的那样工作？

```
function btnclick(btn) {
    var context = $(btn).parents('#optionAndAnswer');
    if (context.length == 0) {
        context = $(btn).parents('tr');
    }
    $(btn).toggleClass("answerBtnsOff");
    $(btn).toggleClass("answerBtnsOn");
    if (btn = 'Yes').class('.answerBtnsOn') {
        $(btn = 'No').attr("disabled", "disabled");
    } else if (btn = 'No').class('.answerBtnsOn') {
        $(btn = 'Yes').attr("disabled", "disabled");
    } else if (btn = 'Yes' && btn = 'No').class('.answerBtnsOff') {
        $(btn = 'Yes' && btn = 'No').removeAttr("disabled");
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:29:22.270

您发布的 javascript 存在很多问题，但对于您的问题，您应该使用`hasClass()`not `class()`。这将返回一个布尔值；如果元素包含类，则为 true，否则为 false。

[http://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:41:15.383

我认为这就是你想要的：

演示：http: [//jsfiddle.net/SO_AMK/7qSen/](http://jsfiddle.net/SO_AMK/7qSen/)

HTML：

```
<input class="answerBtns answers answerBtnsOff" name="answerYesName"   id="answerYes"   type="button"   value="Yes"/>
<input class="answerBtns answers answerBtnsOff" name="answerNoName"    id="answerNo"        type="button"   value="No"/>​ 
```

jQuery：

```
$(".answerBtns").click(function(){
    if ($(this).val() == "Yes") {
        $("#answerNo").attr("disabled", "disabled");
    }

    else if ($(this).val() == "No") {
        $("#answerYes").attr("disabled", "disabled");
    }

});​ 
```

# python - Tkinter 中的非阻塞信息对话框

> ID：11418625
> 
> 赞同：7
> 
> 时间：2012-07-10T17:24:29.723
> 
> 标签：python, tkinter

我需要一个简单的信息框来显示一些状态输出，或者使用`print`. 我发现的最简单的可能性如下：

```
import Tkinter as tk
root = tk.Tk()
root.withdraw()

from tkMessageBox import showinfo    
showinfo('some caption', 'some info') 
```

这个实现的唯一问题是我的程序（**不是用 Tkinter 编写的**）不会继续运行，直到`showinfo`按下消息框的“确定”按钮。也就是说，`showinfo`对话框将被阻塞。

**因此我的问题是：**有没有一种简单的方法可以使`showinfo`非阻塞？Tkinter 中是否有非阻塞的替代消息框实现？我可以想到显示帮助页面的典型用例——窗口应该打开并且主程序继续正常运行。

**EDIT1：**这是我想出的一个简单的帮助窗口，但不幸的是它没有显示，除非我启动不同`tkMessageBox`或类似的对象：

```
class TextInfo(object):

    def __init__(self, parent, window_title = 'window', textfield = 'a text field', label = None):

        self.top = tk.Toplevel(parent)
        self.parent = parent
        self.window_title = window_title
        self.textfield = textfield

        # set window title
        if window_title:
            self.top.title(window_title)

        # add label if given
        if label:
            tk.Label(self.top, text=window_title).grid(row=0)

        # create the text field
        self.textField = tk.Text(self.top, width=80, height=20, wrap=tk.NONE)
        if textfield:
            self.textField.insert(1.0, textfield)
        self.textField.grid(row=1)

        # create the ok button
        b = tk.Button(self.top, text="OK", command=self.ok)
        b.grid(row=2)

    def ok(self):
        self.top.destroy() 
```

这就是我所说的窗口：

```
root = tk.Tk()
root.withdraw()
TextInfo(self.root, window_title, textfield, label)  
# don't call root.mainloop() here, because this will lead to blocking. 
```

是否需要设置某种属性或事件才能显示窗口？如果我调用`root.mainloop()`该窗口将显示，但随后我的 GUI 再次被阻止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:14:04.067

不要使用 tkMessageBox，因为它不允许进行太多配置。只需创建您自己的自定义对话框，看起来像一个。这个[页面](http://effbot.org/tkinterbook/tkinter-dialog-windows.htm)讨论了很多关于创建自定义 Tkinter 对话框的内容。

# cuda - cuSparse 与 cuBlas 三角求解器

> ID：11418630
> 
> 赞同：0
> 
> 时间：2012-07-10T17:24:48.520
> 
> 标签：cuda, linear-algebra, sparse-matrix, cublas

实际上我几天前发布了一个相关问题，但是我得到了零答案，但是，我昨天发现了一个非常奇怪的发现，正如我之前的问题中提到的那样：[cusparse csrsv_analysis 的性能非常慢](https://stackoverflow.com/q/11382346/1501149)， cusparse 的稀疏三角求解器的分析阶段非常慢，更不用说当系数矩阵稀疏模式不允许并行化时有时是不必要的，所以我想看看 cublas 密集三角求解器如何处理这个问题，所以我替换了在将我的系数矩阵转换为密集格式后，带有 cublas 求解器的 cusparse 求解器，并且 cublas 版本比给定相同矩阵的 cusparse 版本快约 7 倍，甚至在 CuBlas 求解器中包含矩阵格式转换时间之后！我修改了解决方案，所以在这两种情况下都是正确的！

**Cu稀疏版**

```
// Analysis phase   
cusparseStatus = cusparseDcsrsv_analysis(cusparseHandle, CUSPARSE_OPERATION_NON_TRANSPOSE, N, NZ, descrL, matrixLU, iRow, jCol, inforL) ;
if(cusparseStatus != CUSPARSE_STATUS_SUCCESS) printf("%s \n\n","cusparseDcsrsv_analysis1 Error !") ;
cusparseStatus = cusparseDcsrsv_analysis(cusparseHandle, CUSPARSE_OPERATION_NON_TRANSPOSE, N, NZ, descrU, matrixLU, iRow, jCol, inforU) ;
if(cusparseStatus != CUSPARSE_STATUS_SUCCESS) printf("%s \n\n","cusparseDcsrsv_analysis2 Error !") ;

// Solve phase  
cusparseStatus = cusparseDcsrsv_solve(cusparseHandle, CUSPARSE_OPERATION_NON_TRANSPOSE, N, &c2, descrL, matrixLU, iRow, jCol, inforL, r, t) ;
if(cusparseStatus != CUSPARSE_STATUS_SUCCESS) printf("%s \n\n","cusparseDcsrsv_solve1 Error !") ;
cusparseStatus = cusparseDcsrsv_solve(cusparseHandle, CUSPARSE_OPERATION_NON_TRANSPOSE, N, &c2, descrU, matrixLU, iRow, jCol, inforU, t, z) ;
if(cusparseStatus != CUSPARSE_STATUS_SUCCESS) printf("%s \n\n","cusparseDcsrsv_solve2 Error !") ; 
```

**CuBlas 版本**

```
// CSR to dense conversion
cusparseStatus = cusparseDcsr2dense(cusparseHandle, N, N, descrLU, matrixLU, iRow, jCol, aLU, N) ; 
if(cusparseStatus != CUSPARSE_STATUS_SUCCESS) printf("%s \n\n","cusparseDcsr2dense1 Error !") ;

// Solving directly
cublasStatus = cublasDtrsv(cublasHandle, CUBLAS_FILL_MODE_LOWER, CUBLAS_OP_N, CUBLAS_DIAG_UNIT, N, aLU, N, z, 1) ;
if(cublasStatus != CUBLAS_STATUS_SUCCESS) printf("%s \n\n","cublasSolve1 Error !") ;
cublasStatus = cublasDtrsv(cublasHandle, CUBLAS_FILL_MODE_UPPER, CUBLAS_OP_N, CUBLAS_DIAG_NON_UNIT, N, aLU, N, z, 1) ;
if(cublasStatus != CUBLAS_STATUS_SUCCESS) printf("%s \n\n","cublasSolve2 Error !") ; 
```

测试用例：

*   尺寸 (N) = **5000 * 5000**
*   非零数 (NZ) = **35,000**
*   迭代次数：**3**
*   CuSparse 求解时间，分析阶段执行一次：**180 ms**
*   CuBlas 求解时间：**30 ms**
*   显卡：**GeForce GTX 550 Ti**
*   操作系统：**Windows 7 终极版，64 位**

当然，使用 CuBlas 对我来说是不切实际的，因为我的工作涉及到大维度矩阵，从 100,000 开始甚至达到 1,000,000，因此，这种大小的内存分配根本不切实际，那么有没有办法在没有分析阶段 ?

# asp.net-mvc - HttpWebRequest 自动添加 IfNoneMatch 头

> ID：11418632
> 
> 赞同：3
> 
> 时间：2012-07-10T17:24:57.183
> 
> 标签：asp.net-mvc, rest, asp.net-web-api

我正在编写一个 RESTful 服务。我已经在我的服务中实现了电子标签、修改日期和缓存控制标头。

我还在编写一个非常简单的 Get、Put、Post、Delete 请求/响应 API，供我们的脚本编写人员使用。

我正在使用 HttpWebRequest，我认为它是一个具有良好控制的低级类，因此我添加了用于提供 ETag 和条件 Get 等的 API。

问题是，HttpWebRequest 似乎是自己做的！当我将缓存级别设置为重新验证时，它似乎可以与 WinInet 缓存（在 Windows 7 桌面上）一起使用，并使用缓存的 ETag 值自动附加 if-none-match 标头。

从表面上看，你会认为这很酷。无需自己缓存 ETag 和表示，但事实并非如此。

例如，我的 Web 服务对条件获取返回 NotModified 响应，但最终进入我的客户端的响应是 200 OK，因此我的测试需要考虑这种抽象。

有谁知道更多关于这种无证行为的信息？

卢克

# ruby-on-rails - XMLRPC::DateTime 格式化

> ID：11418638
> 
> 赞同：1
> 
> 时间：2012-07-10T17:25:19.700
> 
> 标签：ruby-on-rails, datetime, parameters, xml-rpc, trac

我正在开发一个需要使用 XMLRPC 协议来访问 Trac 数据库的 Rails 项目。

在我需要使用参数发出请求之前，一切都运行良好`XMLRPC::DateTime`。现在，当我去加载页面时，我收到错误消息：

```
Wrong content-type (received 'application/xml' but expected 'text/xml') 
```

我尝试以多种不同的方式（如下所列）格式化日期参数，但似乎没有任何效果。

我试过了：

```
 - @date = Time.now #=> (Tue Jul 10 10:18:01 -0700 2012)
    - @date = DateTime.now #=> (2012-07-10T10:17:37-07:00)
    - @date = Time.now.to_datetime #=> (2012-07-10T10:19:24-07:00)
    - @date = XMLRPC::Convert.dateTime(Time.now.to_datetime.to_s) #=> 
      #<XMLRPC::DateTime:0x1276aa068> 
      (The above hex number changes each time the page is refreshed) 
```

你知道这里可能出了什么问题吗？

更新：我进行调用的代码粘贴在下面（我使用 trac4r ruby​​ gem 来实际调用 API）：

```
def foo  
   date = DateTime.now.to_s  
   tickets = trac.tickets.query(:max => 1000, :created_at => date)  
   return tickets.size  
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:53:01.977

您使用的 gem 已超过 2 年未更新。我之所以提到这一点，是因为随着年龄的增长，由于 Ruby 的 XMLRPC 中可能发生的变化，gem 的某些功能可能不再起作用*（我将不得不进行更多挖掘以找到证据）*。

我不喜欢的是这种[`args_to_trac_args`](https://github.com/csexton/trac4r/blob/master/lib/trac4r/tickets.rb#L171)方法。

```
> args_to_trac_args({:max => 1000, :created_at => DateTime.now.to_s})
  => "max=1000&created_at=2012-07-10T13:58:13-04:00" 
```

然后将该字符串传递给`XMLRPC::Client`实例的[`call`](https://github.com/csexton/trac4r/blob/master/lib/trac4r/query.rb#L51)方法。

在`XMLRPC::Client`'`call`方法中，将上述字符串传递给[`methodCall`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/xmlrpc/rdoc/XMLRPC/Create.html#method-i-methodCall)in `XMLRPC::Create`。如果您查看该方法的源代码，您会看到它尝试为每个传递的参数生成有效的 XML 元素。

```
parameter = params.collect do |param|
    @writer.ele("param", conv2value(param))
end 
```

这正在生成一个`<param>`像

```
<param>
  <value>
    <string>max=1000&amp;created_at=2012-07-10T13:58:13-04:00</string>
  </value>
</param> 
```

`"max=1000&created_at=2012-07-10T13:58:13-04:00"`如果我使用字符串作为 gem手动生成完整的文档

```
require "xmlrpc/client"

writer = XMLRPC::Create.new
writer.methodCall('ticket.query', "max=1000&created_at=2012-07-10T13:58:13-04:00") 
```

生成的 XML**无效**，因为`&created_at=...`

```
<?xml version="1.0" ?>
<methodCall>
    <methodName>ticket.query</methodName>
    <params>
        <param>
            <value>
                <string>max=1000&amp;created_at=2012-07-10T13:58:13-04:00</string>
            </value>
        </param>
    </params>
</methodCall> 
```

对我来说，预期的反应似乎更像

```
<?xml version="1.0" ?>
<methodCall>
    <methodName>ticket.query</methodName>
    <params>
        <param>
            <value>
                <string>max=1000</string>
            </value>
        </param>
        <param>
            <value>
                <string>created_at=2012-07-10T13:58:13-04:00</string>
            </value>
        </param>
    </params>
</methodCall> 
```

但我不太了解 Trac 期望作为请求参数的内容，或者 gem 打算如何让 Ruby 的 XMLRPC 客户端在 2 年前工作。

我将验证预期的请求格式（一个*包含参数查询字符串或多个**元素的**XML`<param>``<param>`* ） ，派生 Github 存储库，并对`args_to_trac_args` *（对我来说这似乎是问题的根源）*进行必要的更改。

如果参数没有连接到单个字符串中并作为数组保留，例如`["max=1000", "created_at=2012-08-10T13:58:13-04:00"],`methodCall` 将在上面显示的第二个文档中生成有效的 XML

```
writer = XMLRPC::Create.new
writer.methodCall('ticket.query', "max=1000", "created_at=2012-07-10T13:58:13-04:00") 
```

# c++ - afxdb.h 错误？

> ID：11418641
> 
> 赞同：1
> 
> 时间：2012-07-10T17:25:33.707
> 
> 标签：c++, visual-c++, mfc, odbc

我正在用 C++ 编写一个 *dll 来连接数据库。我尝试在我的控制台应用程序中使用 afxdb.h，它工作正常。现在，我想在我的 *dll 中使用相同的代码。所以，我将 afxdb.h 添加到 stdafx.h 中，当我编译时给了我这个错误

```
mfcs42d.lib(dllmodul.obj) : error LNK2005: _DllMain@12 already defined in JunkDLL.obj
mfcs42d.lib(dllmodul.obj) : warning LNK4006: _DllMain@12 already defined in JunkDLL.obj; second definition ignored
Creating library Debug/JunkDLL.lib and object Debug/JunkDLL.exp
Debug/JunkDLL.dll : fatal error LNK1169: one or more multiply defined symbols found 
```

我的 stdafx.h 看起来像

```
#if !defined(AFX_STDAFX_H__123__INCLUDED_)
#define AFX_STDAFX_H__123__INCLUDED_
#if _MSC_VER > 1000
#pragma once
#endif // _MSC_VER > 1000

#include "afxwin.h"
#include "afxext.h"
#include "afxdb.h"
// Insert your headers here
#define WIN32_LEAN_AND_MEAN// Exclude rarely-used stuff from Windows headers
#include "windows.h"
// TODO: reference additional headers your program requires here
//{{AFX_INSERT_LOCATION}}
// Microsoft Visual C++ will insert additional declarations immediately before the  previous line.
#endif // !defined(AFX_STDAFX_H__123__INCLUDED_) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:41:48.137

您的 DLL[静态链接到 MFC](http://msdn.microsoft.com/en-us/library/f22wcbea.aspx)。在这种情况下，MFC 提供了自己的`DllMain()`入口点，而您的 DLL 不应提供。

您可以在[CWinApp](http://msdn.microsoft.com/en-us/library/akdx0603.aspx)派生的单例`InitInstance()`方法中执行初始化，也[可以将 DLL 动态链接到 MFC](http://msdn.microsoft.com/en-us/library/30c674tx.aspx)。

# excel - Excel 公式 MMM 到 int

> ID：11418645
> 
> 赞同：0
> 
> 时间：2012-07-10T17:25:47.473
> 
> 标签：excel, excel-2007, excel-formula

是否有将短日期格式的文本月份转换为其数值的 excel 公式？

示例：一月 = 1，二月 = 2，等等。我熟悉通过 =TEXT(1,"MMM") 将数字显示为文本，但对于这些文本值则不然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:52:02.990

你可以使用这个版本

`=MONTH(1&A1)`

如果 A1 包含像 July 或 Jul 这样的文本值，则 Excel 会将 1July 或 1Jul 解释为日期，即当年的 7 月 1 日，MONTH 可以为您提供所需的月份数。如果 A1 为空，则公式返回 1，因此您可能需要添加这样的 IF 函数

`=IF(A1="","",MONTH(1&A1))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:29:01.077

试试这个[`DATEVALUE`](http://office.microsoft.com/en-us/excel-help/datevalue-HP005209044.aspx)功能：

```
=MONTH(DATEVALUE("01/" & A1 & "/2012")) 
```

# c# - NUnit 测试事件参数数据

> ID：11418647
> 
> 赞同：2
> 
> 时间：2012-07-10T17:26:03.580
> 
> 标签：c#, unit-testing, nunit, eventargs

我总是通过 - 不幸的是 - 减少使用事件来解决这个问题。然而这次我想出了一个漂亮的技巧，但我不认为下面会被认为是一个合适的方法。有没有推荐的方法来达到相同的结果？

注意：如果没有在*_args.Fixture*上获得空引用异常，除非您在其上设置断点 - 竞争条件。

```
private Parser _parser;
private ParsedArgs _args;        

[TestFixtureSetUp]
public void Setup()
{
    _parser = new Parser();
    _parser.DataParsed += DataParsed;
}

void DataParsed(object sender, ParsedArgs e)
{
    _args = e;
}

[Test]
public void TestDocParse()
{
    _parser.ParseFixture(File.ReadAllText(EventDataPath));

    while (_args == null || _args.Fixture == null) { }

    Assert.IsNotNull(_args.Fixture);
    var fixture = _args.Fixture;
    Assert.AreEqual("2F7PY1662477", fixture.Id);            
} 
```

我发现[以下](https://stackoverflow.com/questions/9831514/testing-method-which-create-a-new-thread-and-result-we-get-from-event-nunit-2)导致不得不考虑一个可能不准确的时间尺度来完成解析......

我的目标是测试fixture.Id 是否等于“2F7PY1662477”。

***谢谢***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:15:28.393

我首先将测试/夹具与需要读取某种文件分离。我只是将罐装数据发送到 ParseFixture——您要么正在测试是否可以解析文件，要么正在测试是否引发了预期的事件。

然后我会避免在后台解析。这将阐明竞争条件，因为您将同步执行所有操作。

然后我会有一个标志，表明是否发生了有效事件。

例如：

```
private bool eventOccurred;
private void DataParsed(object sender, ParsedArgs e)
{
   eventOccurred = e.Id == "2F7PY1662477";
}

[Test]
public void TestDocParse()
{
    _parser.ParseFixture(TextToParse);
    Assert.IsTrue(eventOccurred);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:59:27.483

```
System.Threading.SpinWait.SpinUntil
    (() => _args != null && _args.Fixture != null, 30000); 
```

这可以确保解析器完成了它的工作，但是如果某处出现问题，它不会让我的测试继续运行。

谢谢 vcsjones

# emacs - 如何设置默认的emacs背景和前景色？

> ID：11418648
> 
> 赞同：25
> 
> 时间：2012-07-10T17:26:04.453
> 
> 标签：emacs

在我的`.emacs`文件中，我有以下内容：

```
(set-foreground-color "#E0DFDB")
(set-background-color "#102372") 
```

当我启动 emacs 时，默认 emacs 窗口的配色方案是正确的，但所有新窗口都以白色背景和黑色前景的默认配色方案开始。任何人都可以指出如何让emacs在所有新窗口中设置我的首选配色方案的方向吗？[注意：如果我`M-x load-file ~/.emacs`在打开一个新窗口后这样做，颜色会按照我想要的方式设置，但是每次我想打开一个新窗口时手动这样做会分散注意力/烦人。]

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-10T18:35:55.140

将以下内容添加到您的`.emacs`:

```
(add-to-list 'default-frame-alist '(foreground-color . "#E0DFDB"))
(add-to-list 'default-frame-alist '(background-color . "#102372")) 
```

您可能想查看[http://www.emacswiki.org/emacs/FrameParameters](http://www.emacswiki.org/emacs/FrameParameters)和其中的链接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T22:49:17.347

欢迎使用 emacs。使用颜色主题更好地适应您的环境。 [https://www.emacswiki.org/emacs/ColorThemes](https://www.emacswiki.org/emacs/ColorThemes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T11:22:02.190

此处提供了另一种出色的颜色实现方法：

[http://homepages.inf.ed.ac.uk/s0243221/emacs/](http://homepages.inf.ed.ac.uk/s0243221/emacs/)

我发现通过名称而不是 HEX 代码来调用颜色很方便。

# java - 多个网络处于活动状态的 Android NetworkInfo 状态

> ID：11418651
> 
> 赞同：1
> 
> 时间：2012-07-10T17:26:13.187
> 
> 标签：java, android, android-networking

各位开发者，

我正在开发一个需要在任何时候都在特定网络上使用的应用程序。我听“SUPPLICANT_CONNECTION_CHANGE_ACTION”或“NETWORK_STATE_CHANGED_ACTION”没有问题。我想知道会返回什么

```
NetworkInfo info = manager.getActiveNetworkInfo();
info.getSubtypeName(); 
```

如果多个网络处于活动状态？比如 3/4g 和 WIFI 同时激活。我无法对此进行测试，因为我正在没有 3g 的平板电脑上进行测试。

正如你们中的一些人可能意识到的那样，这不会检查与特定 WIFI 的连接。我对此有不同的解决方案，所以请不要发布答案说^^这不起作用。

我注意到打电话

```
manager.getActiveNetworkInfo() 
```

如果您没有打开 wifi 或 3g，则返回 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:13:17.170

实际上，您不需要对此进行测试，因为它`ConnectivityManager`可以确保您在任何给定时间只有一个连接处于活动状态。这就是为什么`getActiveNetworkInfo`只返回一个`NetworkInfo`对象。

# javascript - 使用 servlet 数据的 javascript

> ID：11418652
> 
> 赞同：0
> 
> 时间：2012-07-10T17:26:30.740
> 
> 标签：javascript, servlets, request, el

我有一个设置 5 个参数的 servlet：balance1、balance2、....、balance5

在我的 .jsp 文件中，我尝试使用 ${balance#} 获取数据。然后我将把这些值推入一个数组中，但为此我只是使用`document.write(param)`示例。

它最终只是吐出字符串而不请求值。

```
for (var i = 0; i <5 ; i++) {
   var loan = "\"$" + "{balance" + i + "}\"";
   document.write("</br>");
   document.write(loan);
} 
```

我尝试在调用周围使用带引号和不带引号，但除非我特别写，否则它不起作用：

`document.write("${balance1}")`

将数据从 servlet 检索到 javascript 的写入方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:01:59.550

假设您的余额参数是数字类型，您可以这样做：

```
<script type="text/javascript">
  var balanceArray = [
    ${balance1}, ${balance2}, ${balance3}, ${balance4}, ${balance5}
  ];
</script> 
```

如果是文本，你可以这样做：

```
<script type="text/javascript">
  var balanceArray = [
    "<c:out value="${balance1}"/>"
  , "<c:out value="${balance2}"/>"
  , "<c:out value="${balance3}"/>"
  , "<c:out value="${balance4}"/>"
  , "<c:out value="${balance5}"/>"
  ];
</script> 
```

但是，我建议创建一个平衡项目列表，这样您就可以像这样解决它：

```
<script type="text/javascript">
  var balanceArray = [
    <c:forEach items="${balanceList}" var="balance" varStatus="status">
      ${status.first ? '' : ', '}${balance}
    </c:forEach>
  ];
</script> 
```

# php - 无法使用 PHP 发送电子邮件

> ID：11418661
> 
> 赞同：-1
> 
> 时间：2012-07-10T17:26:53.313
> 
> 标签：php, email, smtp, imap

我正在使用 LinuxMint 13，我无法从 PHP 脚本发送电子邮件。我已经使用 Postfix 进行了很多配置，但没有任何成功，所以我决定删除它。

我只是希望能够将电子邮件发送到另一台计算机或/和任何电子邮件地址，并能够执行类似`imap_open()`or的功能`imap_mail()`。当我有 Postfix 时，这些函数将返回 true，但没有发送任何内容。所以现在我希望能够执行这个功能。我还希望能够通过我登录的帐户发送电子邮件。

请告诉我什么不起作用以及哪些软件包有用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:33:59.333

如果你想使用 PHP`mail()`功能，你只需要安装`sendmail`( `sudo apt-get install sendmail`)。它应该设置您发送邮件所需的一切。

一些主要的 ISP 可能会阻止您的邮件，因为您不符合发送要求（例如具有非通用主机名，并且您的 IP 地址需要正确的反向 DNS 记录），但这应该是您发送邮件所需要的全部来自 PHP 的邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:33:53.593

您可以使用 PHP 的默认`mail`函数。 [这是关于那个的文档](http://php.net/manual/en/function.mail.php)。它可以像下面这样工作（文档中的示例）：

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

如果您遇到问题，可以使用[PHPMailer](http://phpmailer.worxware.com/)，这是一个库，可让您更好地控制您发送的邮件。他们甚至提供[了一些非常致命的例子](http://phpmailer.worxware.com/index.php?pg=examples)。

# wpf - 所选项目的 DataGrid 行的前景色

> ID：11418664
> 
> 赞同：0
> 
> 时间：2012-07-10T17:26:58.417
> 
> 标签：wpf, wpfdatagrid

我为我的 DataGrid 定义了一个 RowStyle，以将我的网格中具有拒绝状态或 Reject_X 或 Reject_Y 的项目的前景色更改为红色：

```
 <Style TargetType="DataGridRow">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Status}" Value="{x:Static StatusTypes:Status.Reject_X}">
                        <Setter Property="Foreground" Value="Red"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Status}" Value="{x:Static StatusTypes:Status.Reject_Y}">
                        <Setter Property="Foreground" Value="Red"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style> 
```

除了所选项目的前景色是黑色而不是红色之外，此样式效果很好。所以，我需要知道如何设置所选项目的样式，以便前景颜色也是红色。IE

如果该项目被选中并且状态等于 Reject_X 或 Reject_Y 然后将前景设置为红色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:31:28.567

我认为这样的事情应该这样做。我也会将类似的 MultiTriggers 放在您的 DataGridRow 样式中......

```
 <Style TargetType="DataGridCell">
    <Style.Triggers>
        <MultiTrigger>
            <MultiTrigger.Conditions>
                <Condition Property="IsSelected" Value="True"/>
                <Condition Binding="{Binding Status}" Value="{x:Static StatusTypes:Status.Reject_X}"/>
            </MultiTrigger.Conditions>
            <Setter Property="Foreground" Value="Red"/>
        </MultiTrigger>
        <MultiTrigger>
            <MultiTrigger.Conditions>
                <Condition Property="IsSelected" Value="True"/>
                <Condition Binding="{Binding Status}" Value="{x:Static StatusTypes:Status.Reject_Y}"/>
            </MultiTrigger.Conditions>
            <Setter Property="Foreground" Value="Red"/>
        </MultiTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:37:02.197

我会查找多数据触发器。那应该给你你想要的。

# mongodb - 在嵌入式文档上使用 MongoDB Group

> ID：11418666
> 
> 赞同：1
> 
> 时间：2012-07-10T17:27:17.857
> 
> 标签：mongodb

我的文档*曾经*是这样的：

```
{
  _id : 47cc67093475061e3d95369d, 
  Name : "A name", 
  Description  : "Some description",
  DisciplineCode  : "105",
  DisciplineName  : "A Name",
  OtherProperty : "Something"
} 
```

为此，以下组命令起作用，以便从我的文档中获取不同的 DisciplineNames 和 DisciplineCodes

```
disciplines = db.result.group({ 
    key: {DisciplineName:1, DisciplineCode:1}, 
    reduce: function(obj, prev) { if (!obj.hasOwnProperty("DisciplineName")) { 
        prev.DisciplineName = obj.DisciplineName; 
        prev.DisciplineCode = obj.DisciplineCode; 
    }}, 
    initial: { } 
}); 
```

但是，我的文档现在已更改为：

```
{
  _id : 47cc67093475061e3d95369d, 
  Name : "A name", 
  Description  : "Some description",
  Discipline: {
    Code  : "105",
    Name  : "A Name"},
  OtherProperty : "Something"
} 
```

如您所见，`Discipline`是一个嵌入式文档。

如何修改我的组命令以仍然执行相同的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:12:08.750

我相信您正在尝试返回一个文档，其中列出了学科代码和名称的所有不同组合。在您的第一个组命令中，我认为没有调用 reduce 函数（如果我错了，请纠正我）。

既然嵌入了代码和名称，要获得所有不同的学科组合，您可以使用点表示法：

```
db.example.group({
    key: {"discipline.name": 1, "discipline.code":1},
    initial: {},
    reduce: function(obj, prev){}
}) 
```

输入：

```
{ "_id" : 1, "doc" : { "name" : "Jenna", "number" : 1 } }
{ "_id" : 2, "doc" : { "name" : "Jenna", "number" : 2 } }
{ "_id" : 3, "doc" : { "name" : "Jenna", "number" : 2 } }
{ "_id" : 4, "doc" : { "name" : "J", "number" : 2 } }
{ "_id" : 5, "doc" : { "name" : "J", "number" : 1 } } 
```

结果：

```
[ 
        {
            "doc.name" : "Jenna",
            "doc.number" : 1
        },
        {
            "doc.name" : "Jenna",
            "doc.number" : 2
        },
        {
            "doc.name" : "J",
            "doc.number" : 2
        },
        {
            "doc.name" : "J",
            "doc.number" : 1
        }
    ] 
```

# ruby - 如何在所有 Zookeeper 连接上强制 SASL

> ID：11418668
> 
> 赞同：5
> 
> 时间：2012-07-10T17:27:23.853
> 
> 标签：ruby, apache-zookeeper, sasl

我有一个最近的 zookeeper 版本（版本 = 3.4.3-1240972，建于 2012 年 2 月 6 日 10:48 GMT），并且无法强制在所有客户端连接上使用 SASL。

使用发行版的本地 conf/ 目录，我有以下配置（在 Ubuntu 12.04 上运行）：

**conf/zoo.cfg**

```
tickTime=2001
initLimit=10
syncLimit=5
dataDir=/tmp/zookeeper
clientPort=2181
authProvider.1=org.apache.zookeeper.server.auth.SASLAuthenticationProvider 
```

**conf/jaas.conf**

```
Server {
    org.apache.zookeeper.server.auth.DigestLoginModule required
    user_super="1adminsecret";
};
Client {
    org.apache.zookeeper.server.auth.DigestLoginModule required
    username="super"
    password="1adminsecret";
}; 
```

**conf/java.env**

```
export JVMFLAGS="-Djava.security.auth.login.config=`pwd`/conf/jaas.conf" 
```

当我从 zkCli.sh 脚本连接时，它将正确验证，更改 jaas.conf 文件将导致它无法查询。这是预期的行为。

但是，当我使用 ruby​​ “zookeeper” gem 并运行（使用 irb）时：

```
require 'zookeeper'
z = Zookeeper.new("localhost:2181")
z.get_children(:path => "/")
z.create(path:'/asdf', data:'test') 
```

它正确返回结果。如果我需要 SASL 进行登录，那么 ruby​​ 客户端如何绕过安全性。我知道这不仅仅是读写问题，因为我也可以创建密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T05:03:43.073

在 conf/zoo.cfg 中，添加一行，

```
requireClientAuthScheme=sasl 
```

从[这里](https://cwiki.apache.org/ZOOKEEPER/zookeeper-and-sasl.html)的服务器配置部分，

> requireClientAuthScheme=sasl 是可选的：如果设置为任何值，它将只允许未经身份验证的客户端 ping、创建会话、关闭会话或 sasl-authenticate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-21T03:52:52.717

我有类似的问题，并通过将 JVM 参数添加到 env 文件来解决它。（动物园管理员 3.6.3）

```
export JVMFLAGS="-Djava.security.auth.login.config=`pwd`/conf/jaas.conf \
-Dzookeeper.authProvider.1=org.apache.zookeeper.server.auth.SASLAuthenticationProvider \
-Dzookeeper.allowSaslFailedClients=false \
-Dzookeeper.sessionRequireClientSASLAuth=true \
" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T14:26:15.577

几年后我也遇到了类似的问题哈哈。我希望 Zookeeper 3.5 增加一种单独且不那么棘手的方法来保护 Zookeeper 服务器。看看我的问题：[保护 Zookeeper](https://stackoverflow.com/questions/32106117/securing-zookeeper-where-to-start/32273336#32273336)

# gnu - 如何在 Windows 7 中安装 GNU 科学库

> ID：11418669
> 
> 赞同：1
> 
> 时间：2012-07-10T17:27:27.047
> 
> 标签：gnu, histogram

我正在使用 CodeBlocks，并且正在尝试使用 GNU 科学库提供的直方图函数之一。但是，我不知道如何安装这个库。我的计算机运行的是 Windows 7，而 CodeBlocks 使用的是 GNU GCC 编译器。

请指教！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:33:55.857

尝试研究 Cygwin（用于 Winodws 的 unix shell 和工具）。您应该能够将 CodeBlocks 安装到其中。

# perl - perl 循环排序

> ID：11418670
> 
> 赞同：0
> 
> 时间：2012-07-10T17:27:30.777
> 
> 标签：perl, round-robin

我有一个散列的散列设置如下：

```
$hash->{$val}->{$val2} 
```

在第二个散列（对应于 的散列`$val2`）内部是一个值列表。我可以有三个这样的列表：

```
$hash->{$val}->{1} = [1,2,3]
$hash->{$val}->{2} = [4,5,6]
$hash->{$val}->{3} = [7,8,9] 
```

我想将这些列表的值放入一个新数组中，按循环顺序排序`$val2`。因此结果将如下所示：

```
@new_arr = (1,4,7,2,5,8,3,6,9) 
```

有谁知道我可以做到这一点的 perl 方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:34:42.910

如果您有 CPAN 访问权限，则可以安装[`List::MoreUtils`](http://search.cpan.org/~adamk/List-MoreUtils-0.33/lib/List/MoreUtils.pm)和使用它：

```
use List::MoreUtils qw(zip);

my @new_arr = zip(@$hash->{$val}{1}, @$hash->{$val}{2}, @$hash->{$val}{3}); 
```

如果键/值对的数量`$hash->{$val}`是动态的，不幸的是，`zip`由于原型设计需要实际的数组（并且数组引用不会这样做）。幸运的是，您可以通过强制旧式调用并传入数组 refs 来绕过它：

```
use List::MoreUtils qw(zip);

my @ordered_array_refs;
push @ordered_array_refs, $hash->{$val}{$_} for sort keys %{$hash->{$val}};
my @new_arr = &zip(@ordered_array_refs);     # nasty :-( 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:31:56.880

[`List::Gen`](https://metacpan.org/module/List%3a%3aGen)的`tuples`函数也可以做到这一点：

```
my @tuple = tuples [1..3], [4..6], [7..9];

say "@$_" for @tuple;  # 1 4 7
                       # 2 5 8
                       # 3 6 9 
```

# iphone - 使用情节提要的 iphone 视图控制器转换

> ID：11418673
> 
> 赞同：0
> 
> 时间：2012-07-10T17:27:45.203
> 
> 标签：iphone, storyboard, viewcontroller, uistoryboardsegue

我正在使用情节提要制作我的 iPhone 应用程序。初始视图控制器有一个按钮，当点击它时，新的视图控制器应该从右侧出现。现在，当我在按钮上的 Story board Segues 中选择 Push 或 Custom 时，新的视图控制器永远不会出现。当我选择 Modal 时，新的视图控制器从下到上出现。

问题。1\. 为什么新的视图控制器没有出现在 Push 或 Custom 模式？2\. 当点击主屏幕上的按钮时，如何从右到左显示新的视图控制器？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:35:46.207

只有当视图控制器包含在导航控制器中时，才能使用推送序列。如果您想在不嵌入导航控制器的情况下使用推式转场，那么您需要定义自己的自定义转场类来执行转场作为推式，但实际上不会将 VC 推入导航堆栈。

Custom segue 没有为您做任何事情的原因可能是因为您尚未定义要使用的实际自定义 segue。

[查看iOS 的新特性：iOS 5.0](https://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iOS5.html#//apple_ref/doc/uid/TP30915195-SW1)中关于故事板和转场的部分

# sql - 员工总工资小时数

> ID：11418676
> 
> 赞同：3
> 
> 时间：2012-07-10T17:27:56.330
> 
> 标签：sql, ms-access

好的，我们有一个 Access 数据库，我们在其中记录每个员工每天的后期制作、非制作和其他时间。员工可能有几天时间在项目之间分配。

出于工资输入目的，我们设计了一份报告，该报告汇总了工作时间并计算了正常时间和加班时间。我遇到的问题是，如果一天的工作时间分为两个项目，那么它计算的那个日期的小时数是错误的。

例如，7 月 10 日，该员工总共工作了 11 个小时。在这些时间中，有 5 个花费在`WA302`，6 个花费在`HU047`. 当我生成工资单小时报告时，它分别为我提供了两个金额的总计，这意味着加班时间将无法正确计算。

如何根据每天工作的日期计算总小时数？

这是 SQL 语句：

```
SELECT
    EmployeeLookUptbl.EmployeeDriver,
    EquipmentTimesheettbl.Employee,
    EquipmentTimesheettbl.Date,
    EquipmentTimesheettbl.ProductionHours,
    EquipmentTimesheettbl.NonProductionHours,
    EquipmentTimesheettbl.RepairHours,
    EquipmentTimesheettbl.[Stat Holiday],
    EquipmentTimesheettbl.TravelTime,
    EquipmentTimesheettbl.TruckWash,
    EquipmentTimesheettbl.FirstAid,
    EquipmentTimesheettbl.DesignatedDriver,
    EquipmentTimesheettbl.LOA,
    EquipmentTimesheettbl.[Vehicle Allownance],
    EquipmentTimesheettbl.DaysWorked,
    [ProductionHours]+[NonProductionHours]+[RepairHours] AS TotalHours,
    IIf([TotalHours]>8,8,[TotalHours]) AS RegularHours,
    IIf([totalhours]<8,0,[totalhours]-8) AS Overtime,
    EquipmentTimesheettbl.RPP,
    EmployeeLookUptbl.FirstName,
    EquipmentTimesheettbl.Phase
FROM
    EquipmentTimesheettbl
    LEFT JOIN EmployeeLookUptbl
    ON EquipmentTimesheettbl.Employee = EmployeeLookUptbl.ReportName
WHERE
    (((EquipmentTimesheettbl.Date)
    Between [Enter Start Date] And [Enter End Date]))
ORDER BY EquipmentTimesheettbl.Date; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:32:46.010

hours 应该是作业的属性，因此您可以像这样访问它：

```
Total.hours = Job.hours + Job2.hours; 
```

翻译成

```
Total.hours = WA302.hours + HU047.hours; 
```

翻译成

```
Total.hours = 6+5; 
```

希望这对您的思考过程有所帮助，但除非您向我们展示您目前的工作方式（SQL、Java 等），否则我们无法帮助您完成思考过程。

编辑：从 SQL，

```
sum(hours) 
```

每个工作都应该是自己的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:55:09.417

您需要使用`SUM()`来提供单个总小时数。另外，简化查询——删除所有不需要的字段。

从这个开始：

```
SELECT Equip.Employee,
    Sum([ProductionHours]) AS TotalProductionHours, 
    Sum([NonProductionHours]) AS TotalNonProductionHours, 
    Sum([RepairHours]) AS TotalRepairHours, 
FROM EquipmentTimesheettbl As Equip
    LEFT JOIN EmployeeLookUptbl As Employee 
    ON Equip.Employee = Employee.ReportName
WHERE
    (((Equip.Date)
    Between [Enter Start Date] And [Enter End Date]))
ORDER BY Equip.Date; 
```

然后将其用作新查询的基础。您可以使上面的这个更加稀疏 - 如果他们提供的信息仅用于报告，则保存您的 JOINS 以供以后使用。

无论您在何处看到单独的行而不是总计，请删除强制突破的字段或插入 GROUP BY 子句。“日期”是属于该`WHERE`子句但不在“SELECT”子句中的字段的一个很好的例子。

这是一个可能会有所帮助的[教程。](http://www.opengatesw.net/ms-access-tutorials/Access-Articles/Microsoft-Access-Query2.htm)此外，Access Help 应该会为您回答这个问题（尽管刚才我还没有找到我想要的关于这个主题的内容）。

此外，不要将表字段命名为“日期”，因为它是 Access 保留关键字，这一点**非常重要**！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:42:12.263

听起来您是按日期和项目分组，而不仅仅是日期。如果不知道 Access 数据库的架构或您尝试使用的查询，就不可能确定。

从您的问题的声音来看，您需要一份报告，该报告将按日期和员工为您提供小计。

我知道这不能完全解决您的问题，但是有很多工具可以跟踪员工的工作并进行工资核算。除非您有非常特殊的需求，否则我建议您使用 Quickbooks 之类的东西，而不是在 Access 中构建一些东西。查看[http://quickbooksonline.intuit.com/time-tracking-software](http://quickbooksonline.intuit.com/time-tracking-software)。请注意，我什至不使用它们，也不为它们工作，但几乎绝对值得他们为所有功能每月收取 40 美元。

# android - 用于设置图像视图的 AsyncTask

> ID：11418680
> 
> 赞同：2
> 
> 时间：2012-07-10T17:28:03.877
> 
> 标签：android, android-layout, android-asynctask, android-imageview

所以我一直在尝试使用`runOnUiThread()`和 View 之类的方法。

**发布以从不扩展 Activity**的主类之外的类更新我的图像视图，并且我一直遇到同样的问题：

第一次运行很好，但是当我重新启动应用程序时，图像视图将不再更新。

我可以使用`AsyncTask`该类获取位图，然后使用该位图对其进行设置和图像视图吗？如果是这样，谁能给我举个例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:34:50.077

如果你像这样扩展 AsyncTask

类 ClassName 扩展 AsyncTask

您必须从 doInBackground() 返回一个位图，并且您将被覆盖 onPostExecute(Bitmap)，它将在 UI 线程上运行，这意味着您可以将该位图设置为 ImageView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:35:57.780

只有`runInBackground()`AsyncTasks 的方法在`worker thread`. 其他方法在 UI 线程上调用，因此您可以使用它来调用对 UI 的更改。

您可以使用`onPreExecute()`for 像一个进度条开始。

正如它所说，您可以使用`publishProgress()`发布任务的进度，例如说您下载了多少百分比。

您可以使用`onPostExecute()`来设置您的视图，例如位图或您可能已下载的文本片段。

# objective-c - Parts of a method inside an NSObject not being executed

> ID：11418683
> 
> 赞同：1
> 
> 时间：2012-07-10T17:28:32.930
> 
> 标签：objective-c, xcode, macos, cocoa, nsobject

I have 2 classes: AppDelegate and ViewAddFriendsWindowObject.
In AppDelegate.m i have these lines of codes:

```
#import "ViewAddFriendsWindowObject.h"

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    ViewAddFriendsWindowObject *viewAddFriends = [[ViewAddFriendsWindowObject alloc] init];
    [viewAddFriends isFirstRun:YES];
} 
```

In ViewAddFriendsWindowObject.h i have:

```
#import <Foundation/Foundation.h>

@interface ViewAddFriendsWindowObject : NSObject 

@property IBOutlet NSButton *cancelSkipBtn;
@property IBOutlet NSButton *doneBtn;

- (void)isFirstRun:(BOOL)firstRun;

@end 
```

In ViewAddFriendsWindowObject.m i have:

```
 #import "ViewAddFriendsWindowObject.h"

    @implementation ViewAddFriendsWindowObject
    @synthesize cancelSkipBtn=_cancelSkipBtn;
    @synthesize doneBtn=_doneBtn;

    - (void)isFirstRun:(BOOL)firstRun{

        NSLog(firstRun ? @"Yes" : @"No");

        if(firstRun == YES){
            NSLog(@"YES");
            [_cancelSkipBtn setTitle:@"Skip"];
            [_cancelSkipBtn setEnabled:NO];
        }else{
            NSLog(@"NO");
            [_cancelSkipBtn setTitle:@"Cancel"];
        }

    }
@end 
```

Here's the problem. `The NSLog(@"YES")` is executed but `[_cancelSkipBtn setTitle:@"Skip"];` and `[_cancelSkipBtn setEnabled:NO];` are not. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:33:03.510

When you alloc and init an object in code, you are bypassing any connections you made in IB. Therefore, your IBOutlet properties are not being set to anything before you call `isFirstRun` on it

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:12:16.757

In your xib, make sure that you have an object with the class set to `ViewAddFriendsWindowObject` in the identity inspector. Make your IBOutlet connections from the `ViewAddFriendsWindowObject`, then add an `awakeFromNib` method to ViewAddFriendsWindowObject.m. Finally, send the appropriate `isFirstRun` message to `self` in `awakeFromNib` based on a setting in the shared user defaults. Something like this:

```
- (void)awakeFromNib
{
   if (![[NSUserDefaults standardUserDefaults] boolForKey:@"PreviouslyRun"]) {
      [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"PreviouslyRun"];
      [[NSUserDefaults standardUserDefaults] synchronize];
      [self isFirstRun:YES];
   } 
   else
      [self isFirstRun:NO];
} 
```

# vb.net - vb.net 列表框搜索

> ID：11418685
> 
> 赞同：2
> 
> 时间：2012-07-10T17:28:40.997
> 
> 标签：vb.net, search, listbox

我正在尝试制作`TextBox1`一个搜索栏，以在`ListBox1`.

我希望它删除没有我搜索的字符串的其他项目。例如，如果一个列表包含（奶酪、鸡蛋、牛奶、鸡肉、巧克力），那么搜索“ch”只会显示奶酪、鸡肉和巧克力。这可能吗？

我在这里的这段代码*将*搜索字符串，但不会消除其他字符串。

编辑：-这些都是非常好的响应，但我不能使用它们中的任何一个，因为列表框是由来自特定目录的文件名填充的，这给了我这个错误；

> 设置 DataSource 属性时无法修改项目集合。

```
Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged
    Dim i As Integer = ListBox1.FindString(TextBox1.Text)
    ListBox1.SelectedIndex = i
    If TextBox1.Text = "" Then
        ListBox1.SelectedIndex = -1
    End If
End Sub 
```

我很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:54:12.827

为了以这种方式工作，您需要一个列表来存储所有项目，然后`ListBox1`只显示匹配项。否则，当用户点击退格键来缩短他们的搜索短语时，原始项目将不会返回。因此，在这种情况`TextBox1_TextChanged`下，最简单的方法是清除`ListBox1`，然后循环遍历内存中的所有项目，然后将匹配的项目添加到`ListBox1`. 例如：

```
Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged
    ListBox1.Items.Clear()
    For Each item As String In allItems
        If item.StartsWith(TextBox1.Text, StringComparison.CurrentCultureIgnoreCase) Then
            ListBox1.Items.Add(item)
        End If
    Next
End Sub 
```

在这个例子`allItems`中是所有项目的内存列表。如果您的项目是字符串，就像看起来一样，那么我建议将其`List(Of String)`设为 a 并在类/表单级别将其声明为私有字段：

```
private allItems As New List(Of String)() 
```

然后，您需要在某个地方填写列表，可能是在表单的`Load`事件中：

```
allItems.Add("cheese")
allItems.Add("eggs")
allItems.Add("milk")
allItems.Add("chicken")
allItems.Add("chocolate") 
```

但是，如果您只需要一个自动完成的文本框，那么重新发明轮子就很愚蠢。WinForm`TextBox`控件通过其`AutoComplete`属性固有地支持此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:54:46.920

```
 Dim lstBindTheseStrings As List(Of Object) = (From objString As Object _
                                                  In ListBox1.Items _
                                                  Where CStr(objString).StartsWith(TextBox1.Text)).ToList()

    ListBox1.DataSource = lstBindTheseStrings

    ListBox1.SelectedIndex = If((ListBox1.FindString(TextBox1.Text) > -1), _
                                 ListBox1.FindString(TextBox1.Text), -1) 
```

编辑：

上面的代码将过滤列表框中最初的内容。SteveDog 的解决方案更符合您的需求，但您可以将我的 Linq 语句中的 ListBox1.Items 替换为您的 AllItems 列表，以到达您想要的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:02:19.883

SteveDog 的解决方案是您想要的方式，因此您不必在每次搜索后不断重新填充列表框。但是，如果您设置在该路径上...

```
 Dim i As Integer
    For i = 0 To ListBox1.Items.Count - 1
        If i > ListBox1.Items.Count - 1 Then Exit For
        If Not ListBox1.Items(i).Contains(Textbox1.Text) Then
            ListBox1.Items.Remove(ListBox1.Items(i))
            i -= 1
        End If
    Next 
```

不过看起来很乱，不是吗？

# c# - parallel.foreach 和 perfmon 报告了线程

> ID：11418686
> 
> 赞同：1
> 
> 时间：2012-07-10T17:28:43.340
> 
> 标签：c#, parallel-processing, task, perfmon

我有一个从包含 100s-1000 行的文本文件中读取的应用程序。

每行都使用 parallel.foreach 进行处理，使用 ParallelOptions 来限制触发的任务数量。这是“控制器”任务。

在这个“控制器”parallel.foreach 中是另一个parallel.foreach，它将执行实际工作。触发的每个控制器任务将执行相同的工作，并使用原始文件行中指定的不同数据输入。再次，这项工作 parallel.foreach 使用并行选项来限制触发的任务数量。

在我上次的测试中，我使用了 Controller foreach: MaxDegreeOfParallelism=4 Worker foreach: MaxDegreeOfParallelism:4

根据我的数学，这应该意味着任何时候最多有 16 个任务在工作。

但是，当我检查 perfmon.exe 时，我可以看到我的应用程序使用了 700 个线程。再过几个小时，这将超过 1000。

怎么会这样？为什么 GC 不收集这些完成的线程？

以前，我的代码在 Thread[] 中触发了具有相同问题的实际线程。然后我将它移到一个 Task[] 并遇到了同样的问题。我假设某处存在线程泄漏，并且引用仍然指向线程/任务。我花了很多时间寻找这个无济于事。

所以我转向parallel.foreach 的想法是，如果我从未创建过对任务的引用，就不会发生任务泄漏，因为这一切都发生在一个lamda 中。

但问题仍然存在。关于为什么会这样的任何想法？还是正常？

添加了下面的代码，由于所有测试和尝试调试这个问题，它有点乱，试图清理一下。

```
public static void RunActions(
    List<paramsActionSettings> listActions,
    string[] arrList,
    int numThreads,
    string domain = null,
    delGetParamsActionSettings delGetActionsList = null,
    delProcessString callbackActionsComplete = null
    )
{

    int iCntr= 0;
    int iTotal = arrList.Length;

    ParallelOptions prlOptions = new ParallelOptions
    {
        MaxDegreeOfParallelism = numThreads
    };

    //foreach (string listItemIter in arrList)
    object oLock = new object();
    Parallel.ForEach(arrList, prlOptions,(listItemIter) =>
    {
        lock (oLock)
        {
            Console.WriteLine("starting "+iCntr + " of " + iTotal + " run actions");
            iCntr++;
        }

        string listItemCopySafe = string.Copy(listItemIter);

        bool bCanDo = true;
        List<paramsActionSettings> listActionsUse;
        if (listActions == null)
        {
            listActionsUse = delGetActionsList();
        }
        else
        {
            listActionsUse = listActions;
        }
        foreach (paramsActionSettings prms in listActionsUse)
        {
            if (prms.delCanDo != null && !prms.delCanDo(listItemCopySafe, domain))
            {
                bCanDo = false;
                break;
            }
        }
        if (!bCanDo) return;

        List<paramsFire> listParams = new List<paramsFire>();

        //create a list of paramsfire objects, the object holds the params and the delfunction
        foreach (paramsActionSettings prms in listActionsUse)
        {
            listParams.Add(new paramsFire(prms.delGetDoParams(listItemCopySafe), prms.delDoSomething));
        }

        FireActions(listParams, callbackActionsComplete, listItemCopySafe);
        Console.WriteLine("Finished " + iCntr + " of " + iTotal );
    }); 
}

private static void FireActions(List<paramsFire> list, delProcessString callbackActionsComplete, string itemArr)
{
    int icntr = 0;
    foreach (paramsFire prms in list)
    {
        try
        {
            if (icntr == 0) 
            {
                if (!prms.delDoSomething(prms.oParams))
                {
                    break;
                }
            }
            else
            {
                prms.delDoSomething(prms.oParams); 
            }
            icntr++;

        }
        catch (Exception e)
        {
            ErrorLog.WriteLine("foreach (paramsFire prms in list)");
            UtilException.Dump(e, "foreach (paramsFire prms in list)");
        }
    } 
     if (callbackActionsComplete != null)
    {
        try
        {
            callbackActionsComplete(itemArr);
        }
        catch { }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:34:04.440

我做了一点重写。我的机器上最多只能有 22 个线程（8 个 proc 框）。随意使用以下任何更改：

```
 public static void RunActions(
        IEnumerable<paramsActionSettings> listActions,
        IEnumerable<string> arrList,
        int numThreads,
        string domain = null,
        delGetParamsActionSettings delGetActionsList = null,
        delProcessString callbackActionsComplete = null)
    {

        var cntr = 0;
        var total = arrList.Count();

        var prlOptions = new ParallelOptions
        {
            MaxDegreeOfParallelism = numThreads
        };

        ////foreach (var listItemIter in arrList)
        Parallel.ForEach(arrList, prlOptions, listItemIter =>
        {
            Interlocked.Increment(ref cntr);
            Console.WriteLine("starting " + cntr + " of " + total + " run actions");

            var listItemCopySafe = string.Copy(listItemIter);

            var listActionsUse = listActions ??
                ((delGetActionsList == null) ? new paramsActionSettings[0] : delGetActionsList());
            var canDo = listActionsUse.All(prms => prms.delCanDo == null
                || prms.delCanDo(listItemCopySafe, domain));

            if (!canDo)
            {
                return;
            }

            var listParams = listActionsUse.Select(prms => new paramsFire(
                prms.delGetDoParams(listItemCopySafe),
                prms.delDoSomething));

            // create a list of paramsfire objects, the object holds the params and the delfunction
            FireActions(listParams, callbackActionsComplete, listItemCopySafe);
            Console.WriteLine("Finished " + cntr + " of " + total);
        });
    }

    private static void FireActions(
        IEnumerable<paramsFire> list,
        delProcessString callbackActionsComplete,
        string itemArr)
    {
        var icntr = 0;

        foreach (var prms in list)
        {
            try
            {
                if (icntr == 0)
                {
                    if (!prms.delDoSomething(prms.oParams))
                    {
                        break;
                    }
                }
                else
                {
                    prms.delDoSomething(prms.oParams);
                }

                icntr++;
            }
            catch (Exception e)
            {
                ErrorLog.WriteLine("foreach (paramsFire prms in list)");
                UtilException.Dump(e, "foreach (paramsFire prms in list)");
            }
        }

        if (callbackActionsComplete == null)
        {
            return;
        }

        try
        {
            callbackActionsComplete(itemArr);
        }
        catch
        {
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:11:12.527

显然，问题不在于任何特定的 API，正如您所说的线程、任务和`Parallel.ForEach`.

不要问为什么框架没有做它的工作（因为它是）。问一下，为什么你的代码产生的线程比你预期的要多。如果没有看到更多代码，这个问题就无法完全回答。

# google-app-engine - 谷歌应用引擎服务器经常宕机

> ID：11418689
> 
> 赞同：0
> 
> 时间：2012-07-10T17:28:48.737
> 
> 标签：google-app-engine, server-error

我在谷歌应用程序引擎上运行一个网络应用程序，大部分时间一切运行顺利，但是对于大约 20 个请求中的 1 个，我会收到服务器错误，然后当我重新运行该请求时，比如提交表单，它会通过就好了。

这可能是因为我的实例关闭了几秒钟并且它正在刷新自己，或者 gae 只是时不时地关闭？当我检查日志时，没有记录任何错误，所以我认为它不是我这边的任何东西，否则它只是没有记录它是什么。

我没有很多用户——通常只有我自己和网站上的一两个其他人——所以在这个小规模的情况下，谷歌可能没有运行很多实例，有时根本就没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:25:53.850

检查您的日志。调度程序很可能已经删除了您的一个活动实例，并且当有新请求进来时，使实例一个运行的加载时间将导致您的服务器错误。我已经看到我的 QPS 非常低的 F1 应用程序在启动后一两分钟后被调度程序删除。免费与付费应用似乎更频繁。如果您的应用程序启动速度很慢，则有很多关于如何最好地优化以缩短启动时间的讨论。您还可以找到使用空闲实例设置的设置。我使用自动/自动，所以不能在这里给出见解。

# php - 在 PHP 中创建一个网络服务器（没有 Apache）

> ID：11418690
> 
> 赞同：13
> 
> 时间：2012-07-10T17:28:48.963
> 
> 标签：php, apache, http, sockets, webserver

我刚试过这段代码：

```
<?php
set_time_limit(0);

$address = '176.9.117.136';
$port = 9000;

$sock = socket_create(AF_INET, SOCK_STREAM, 0);
socket_bind($sock, $address, $port) or die('Could not bind to address');

while(1)
{
    socket_listen($sock);
    $client = socket_accept($sock);

    $input = socket_read($client, 1024);
    echo $input;

    $output = 'URL: http://ip-of-my-server:9000/
HTTP/1.1 200 OK
Date: Tue, 10 Jul 2012 16:58:23 GMT
Server: TestServer/1.0.0 (PHPServ)
Last-Modified: Fri, 06 Jul 2012 14:29:58 GMT
ETag: "13c008e-1b9-4c42a193de580"
Accept-Ranges: bytes
Content-Length: 441
Vary: Accept-Encoding
Content-Type: text/html

';
    socket_write($client, $output);

    socket_close($client);
}

socket_close($sock);
?> 
```

但有一个问题。Apache 不使用 $output 的内容作为标头，而是返回自己的标头...

我不知道为什么，因为我通过以下命令执行脚本：`php webserv.php`.

但是它实际上可以工作，因为当我`http://ip-of-my-server:9000/`从浏览器加载页面时，它会向我显示客户端在服务器上发送的标头，并将内容返回`$output`给客户端（我的浏览器）。

如果可能的话，我只想在 PHP 中创建自己的网络服务器。我只想知道如何在没有 Apache 的情况下运行它，这样我就可以管理自己的 HTTP 标头。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-10T17:32:10.757

是否有理由在 PHP 中实现 HTTP 服务器（所有事物）？没有线程等。这会很痛苦……（除非这是某种学术问题……）

PHP 5.4 附带一个[内置的网络服务器](http://php.net/manual/en/features.commandline.webserver.php)。也许这就是你要找的……</p>

* * *

**更新：**

虽然我理解你学习这类东西的动机，但我相信你在使用 PHP 尝试这类东西时走错了路。PHP 并不是真正为长时间运行的进程而设计的（就像服务器一样），它不适合并行处理（线程）。即使是多处理也需要[PCNTL](http://de2.php.net/manual/en/book.pcntl.php)，特别是[pcntl_fork()](http://php.net/pcntl_fork)并将您的教育漫游限制为基于 Unix 的系统（但这可能不是问题）。

如果您的目标是了解服务器如何处理并发性，我建议使用专为此设计的语言（Erlang、Go、Scala ......）。或者使用一种至少可以模拟并行处理的语言（Python、Ruby，……[有点，因为它们的 GIL]）。

如果您的目标是了解 HTTP（让我告诉您 HTTP 是一头野兽，如果您正在超越 HTTP/1.0 并希望做对），那么摆弄 PHP 可能会很好，如果它是您唯一的语言如果是这样，请查看这篇（可悲的德语）关于[PHP 中的 Socket Servers 的](http://www.phpgangsta.de/wie-erstelle-ich-einen-socket-server-in-php)文章中的示例代码（聊天服务器），以获取运行集中在实际 HTTP 上的基本套接字内容。

* * *

**更新 2：**

要回答您关于标题的问题……我不知道 apache 将如何适应您问题中描述的场景。但是我看到您正在使用换行符来分隔标题，并使用双换行符来分隔标题与正文。除非您已将 php 文件保存`\r\n`为默认换行符（windows 样式），否则您的 header-part 格式错误，因此将被识别为正文。根据 http 客户端（用户代理，可能是您的浏览器、curl 或其他），这可能会被处理为“插入一些默认标头”。用换行符替换并重`\r\n`试。

如果您的服务器可以从 Internet 访问，请尝试使用一些[标头测试工具](http://www.webconfs.com/http-header-check.php)来验证您的 HTTP 是否正确。如果它是 localhost-only，看看会`curl -I http://ip-of-my-server:9000`吐出什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:50:12.077

我认为您`web-server`在这种情况下的意思只是服务器和客户端或排序之间的一些套接字通信。我使用 PHP 和套接字的经验是使用 Flash 代理客户端。

这包括在页面的某处嵌入一个 1x1px 的 flash 像素，并将其用作 flash 像素、Javascript 和 PHP 套接字服务器之间的桥梁。[（一旦您知道了 ActionScript 的工作原理，](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/Socket.html) socket 通信就变得轻而易举了）。此方法也是您获得最大浏览器兼容性的唯一方法（即使是更高级的 websocket 框架，如[socket.io](http://socket.io/)也使用此 flash 像素方法作为后备）。

另一种选择当然是[WebSockets](http://en.wikipedia.org/wiki/WebSocket)，类似于在这个站点上用于实时刷新功能的那些。Stack Overflow 上甚至还有[一个专门针对它的标签。](https://stackoverflow.com/questions/tagged/websocket)

如果您想尝试使用 PHP 创建一个**套接字服务器**，那么您的客户端必须*不仅仅是*您的浏览器。

希望这会引导您朝着正确的方向前进...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-01T20:42:26.073

您最初尝试的代码非常接近，但只需要进行一些小改动：

```
<?php
set_time_limit(0);

$address = '127.0.0.1';
$port = 80;

$sock = socket_create(AF_INET, SOCK_STREAM, 0);
socket_bind($sock, $address, $port) or die('Could not bind to address');

echo "\n Listening On port $port For Connection... \n\n";

while(1)
{
    socket_listen($sock);
    $client = socket_accept($sock);

    $input = socket_read($client, 1024);

    $incoming = array();
    $incoming = explode("\r\n", $input);

    $fetchArray = array();
    $fetchArray = explode(" ", $incoming[0]);

    $file = $fetchArray[1];
    if($file == "/"){ 

        $file = "index.html"; 

    } else {

        $filearray = array();
        $filearray = explode("/", $file);
        $file = $filearray[1];
    }

echo $fetchArray[0] . " Request " . $file . "\n"; 

$output = "";
$Header = "HTTP/1.1 200 OK \r\n" .
"Date: Fri, 31 Dec 1999 23:59:59 GMT \r\n" .
"Content-Type: text/html \r\n\r\n";

$Content = file_get_contents($file);
$output = $Header . $Content;

    socket_write($client,$output,strlen($output));
    socket_close($client);
} 
```

此处的代码现在将恢复请求数据包的标头以查找请求的文件，然后它将转到该文件的本地目录。就目前而言，这仅适用于 html，因此它不支持图像，但它可以作为一个非常轻量级的 Web 服务器。它目前默认为 index.html，所以只需保存它，将一些 html 文件放在同一目录中，然后将浏览器指向它。

干杯希望这有帮助！

# javascript - 手风琴菜单无法正常工作

> ID：11418695
> 
> 赞同：0
> 
> 时间：2012-07-10T17:28:58.540
> 
> 标签：javascript, jquery, css

我正在使用手风琴菜单。第二个菜单在单击后不会向上滑动，而是在加载时始终向上滑动。我想改变它。单击时，它应该详细说明子菜单。我不知道该怎么做。这是我的js代码

```
function initMenu() {
    $('#menu ul').hide();
    $('#menu ul:first').show();

    $('#menu li a').click(function() {
        var checkElement = $(this).next();

        if ((checkElement.is('ul')) && (checkElement.is(':visible'))) {
            return true;
        }

        if ((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
            $('#menu ul:visible').slideUp('normal');
            checkElement.slideDown('normal');
            return false;
        }
    });
}

$(document).ready(function() {
    initMenu();
}); 
```

这是我的CSS

```
#menu{
    font-family:'Open Sans';
    font-size:13px;
    text-align:center;

text-transform:uppercase;
line-height:15px;
width:250px;
font-weight:bold;

}
ul#menu, ul#menu ul {

  list-style-type:none;
  margin: 0;
  padding: 0;
  padding-top:5px;
  padding-bottom:0px;
  width: 15em;
  background:url(images/button_menu.png) no-repeat;
  line-height:15px;
}

ul#menu a {
  display: block;
  text-decoration: none;    
}

ul#menu li {
  margin-top: 1px;
}

ul#menu li a {

  line-height:15px;
  text-transform:uppercase;
  color: #fff;  
  padding: 0.5em;
  line-height:20px;

}

ul#menu li a:hover {

  background:url(images/button_menu_hover.png) no-repeat;
}

ul#menu li ul li a {
  background:#F7F7F7;
  color: #000;
  padding-top: 3px;
  padding-bottom: 3px;
  line-height: 14px;

  padding-left: 10px;
   border-bottom:0px;
   line-height:20px;

}

ul#menu li ul li a:hover {
  background:url(images/button_menu_hover.png) no-repeat;
  border-left: 5px #006600 solid;
  padding-left: 10px;
  color:#fff;
} 
```

请帮我怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:46:02.437

我正在做类似的事情，这就是我从我正在使用的代码中提取的内容。

```
instance.$el.find('li.st-open').each( function() {
var $this   = $(this);
$this.css( 'height', $this.data( 'originalHeight' ) + $this.find('div.st-content').outerHeight( true ) );
}); 
```

CSS是：

```
.st-accordion ul li.st-open > a{
margin-top:70px;
}
.st-accordion ul li{
height:auto;
}
.st-accordion ul li > a span{
 visibility:hidden;
} 
```

和html是：

```
<div id="st-accordion" class="st-accordion">
   <ul>
      <li><a href="#"><h2>Title 1</h2></a>
          <div class="st-content">
            <p>Content goes here.</p>
          </div>
      </li>
      <li><a href="#"><h2>Title 2</h2></a>
          <div class="st-content">
            <p>Content goes here.</p>
          </div>
      </li>
  </ul>
</div> 
```

# html - 调整窗口大小时如何在 HTML 中保持图像和文本对齐？

> ID：11418697
> 
> 赞同：2
> 
> 时间：2012-07-10T17:29:02.267
> 
> 标签：html, css, layout

我正在尝试解决以下问题：在房屋蓝图的图像上，我需要放置“标签”。所以，在厨房的上方，一定有一个“KITCHEN”的标签；卫生间上方，“BATHROOM”等。即使调整了浏览器窗口的大小，标签也必须保留在其相应的房间上。我如何保证只使用 HTML/CSS/JS？

这是我的 HTML：

```
<html>
<head>
    <link href="overlay.css" rel="stylesheet" type="text/css" />
</head>
<div class="image">
      <img src="blueprint.png" alt="" />
      <span>LABEL</span>
</div>
</html> 
```

假设厨房位置在顶部 10% 和左侧 40%，`overlay.css`看起来像这样：

```
img {
   max-width:100%; 
   max-height:100%;
}
.image { 
   position: relative;
   width: 100%; /* for IE 6 */
  overflow: hidden;
}  
span { 
   position: absolute; 
   top: 10%; 
   left: 40%; 
   color: white; 
   font: bold 24px/45px Helvetica, Sans-Serif; 
   letter-spacing: -1px;  
   background: rgb(0, 0, 0); /* fallback color */
   background: rgba(0, 0, 0, 0.7);
} 
```

它有点工作，但调整窗口大小会使一切都不合适和不成比例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:06:37.103

我会 HTML5 元素给`figure`&`figcaption`一个镜头。他们有很好的筑巢和谐。

**来自 W3C：**

> figure 元素表示一个内容单元，可以选择带有标题，它是自包含的，通常作为单个单元从文档的主要流程中引用，并且可以从文档的主要流程中移开而无需影响文档的意义。

可以在[The figure & figcaption elements](http://html5doctor.com/the-figure-figcaption-elements/)找到一篇精彩的博客文章。

让您的图像大小决定区域，不要像使用`img { max-width:100%; max-height:100%; }`.

您的 CSS 也可以进行一些清理。

这是您重新调整用途的代码。复制、粘贴并试一试。

```
<style type="text/css">
figure {
    margin: 0;
}
img {
    position: absolute;
}
figcaption {
    background: black;
    color: white;
    display: inline-block;
    font: bold 24px/45px Helvetica, Sans-Serif; 
    left: 10px;
    padding: 10px;
    position: relative;
    top: 10px;
}
</style>
<figure>
    <img src="bathroom.jpg" alt="Bathroom" />
    <figcaption>Bathroom</figcaption>
</figure> 
```

# windows - 如何为 puppet 安装全局自定义提供程序？

> ID：11418700
> 
> 赞同：4
> 
> 时间：2012-07-10T17:29:12.917
> 
> 标签：windows, linux, configuration, puppet, chocolatey

我想使用[巧克力木偶提供者](https://github.com/rismoney/puppet-chocolatey)作为 Windows 的包源。我的理解是我必须将文件保存到`{module}/lib/puppet/provider/package/chocolatey.rb`. 如果我只在一个特定模块中使用它，那似乎没问题。但是，如果我想让它对我的所有模块可用怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T15:15:05.063

好的，为了回答 - 只需将其作为模块安装在 Chocolatey/lib/puppet/provider/package/chocolatey.rb 文件夹下，所有模块都可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:25:40.600

我添加了这个，因为它找不到环境变量。只有当您将 Chocolatey 作为您的 puppet 清单的一部分安装时，才会发生这种情况。

```
if chocopath.empty?
    puts "Could not find environment variable value for ENV['ChocolateyInstall']. Using C:\ChocolateyInstall instead"
    chocopath = 'C:\Chocolatey'
  end 
```

# android - 无法使用片段为平板电脑和手机运行 Android 应用程序

> ID：11418701
> 
> 赞同：-1
> 
> 时间：2012-07-10T17:29:18.343
> 
> 标签：android, android-layout, android-fragments

我正在使用片段为平板电脑和手机开发一个 android 应用程序。我按照教程[http://www.vogella.com/articles/Android/article.html#fragments_tutorial](http://www.vogella.com/articles/Android/article.html#fragments_tutorial)创建了我自己的基础适配器类。实现的基本思想是mainactivity必须产生一个gridview，当点击gridview上的图像时，它必须在手机和平​​板电脑上打开一个新的activity，我们必须同时查看这两个activity。

但不知何故，我无法运行该应用程序。我开始时它正在崩溃，留下运行时错误。我是 android 开发的新手，几周以来一直在解决这个问题。请帮助我。在此先感谢。

请在应用程序中找到我的课程下方

GridFragment.class

```
public class GridFragment extends Fragment{
@Override
public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
View view = inflater.inflate(R.layout.gridview,container,false);
GridView gridView = (GridView) view.findViewById(R.id.gridView);
gridView.setAdapter(new EveryoneAdapter(view.getContext()));
// uses the view to get the context instead   of getActivity().
    return view;
}
 public void onActivityCreated(Bundle savedInstanceState) {
     super.onActivityCreated(savedInstanceState);
 }
} 
```

每个人Adapter.class

```
public class EveryoneAdapter extends BaseAdapter {
private Context mContext;

public EveryoneAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(final int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
        imageView.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
              Log.d("onClick","position ["+position+"]");
            }

          });
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
}

// references to our images
private Integer[] mThumbIds = {
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7
};
} 
```

DetailFragment.class

```
public class DetailFragment extends Fragment {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
Log.e("Test", "hello");
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.details, container, false);
    return view;
}

  } 
```

DetailActivity.class

```
public class DetailActivity extends Activity {
   @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Need to check if Activity has been switched to landscape mode
    // If yes, finished and go back to the start Activity
    if (getResources().getConfiguration().orientation == 
            Configuration.ORIENTATION_LANDSCAPE) {
        finish();
        return;
    }

    setContentView(R.layout.details_activity_layout);

}
  } 
```

还有我的 MainActivity.class

```
public class MainActivity extends Activity {

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
 } 
```

布局文件如下

main.xml（横向模式）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<fragment
    android:id="@+id/gridFragment"
    android:layout_width="150dip"
    android:layout_height="match_parent"
    android:layout_marginTop="?android:attr/actionBarSize"
    class="com.fxpal.unity.android.GridFragment" ></fragment>

<fragment
    android:id="@+id/detailFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.fxpal.unity.android.DetailFragment" >
    <!-- Preview: layout=@layout/details -->
</fragment> 
```

详细信息.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<fragment
    android:id="@+id/gridFragment"
    android:layout_width="150dip"
    android:layout_height="match_parent"
    android:layout_marginTop="?android:attr/actionBarSize"
    class="com.fxpal.unity.android.GridFragment" ></fragment>

<fragment
    android:id="@+id/detailFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.fxpal.unity.android.DetailFragment" >
    <!-- Preview: layout=@layout/details -->
</fragment> 
```

details_activity_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<fragment
    android:id="@+id/gridFragment"
    android:layout_width="150dip"
    android:layout_height="match_parent"
    android:layout_marginTop="?android:attr/actionBarSize"
    class="com.fxpal.unity.android.GridFragment" ></fragment>

<fragment
    android:id="@+id/detailFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.fxpal.unity.android.DetailFragment" >
    <!-- Preview: layout=@layout/details -->
</fragment>

</LinearLayout> 
```

main.xml（纵向模式）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<fragment
    android:id="@+id/gridFragment"
    android:layout_width="150dip"
    android:layout_height="match_parent"
    android:layout_marginTop="?android:attr/actionBarSize"
    class="com.fxpal.unity.android.GridFragment" ></fragment>

<fragment
    android:id="@+id/detailFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.fxpal.unity.android.DetailFragment" >
    <!-- Preview: layout=@layout/details -->
</fragment>

</LinearLayout> 
```

我的 Manifest.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.fxpal.unity.android"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="List of Mobiles"
        android:name=".MainActivity" >
         <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".DetailActivity"
        android:label="@string/app_name" >
    </activity>
</application> 
```

我的错误日志如下

```
07-10 04:06:06.625: E/AndroidRuntime(1393): FATAL EXCEPTION: main
07-10 04:06:06.625: E/AndroidRuntime(1393): java.lang.RuntimeException: Unable to start activity      ComponentInfo{com.fxpal.unity.android/com.fxpal.unity.android.MainActivity}: android.view.InflateException:   Binary XML file line #7: Error inflating class fragment
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.os.Looper.loop(Looper.java:137)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at java.lang.reflect.Method.invokeNative(Native Method)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at java.lang.reflect.Method.invoke(Method.java:511)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at dalvik.system.NativeStart.main(Native Method)
07-10 04:06:06.625: E/AndroidRuntime(1393): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.Activity.setContentView(Activity.java:1835)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at com.fxpal.unity.android.MainActivity.onCreate(MainActivity.java:14)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.Activity.performCreate(Activity.java:4465)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-10 04:06:06.625: E/AndroidRuntime(1393):     ... 11 more
07-10 04:06:06.625: E/AndroidRuntime(1393): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.fxpal.unity.android.ListFragment: make sure class name exists, is public, and has an empty constructor that is public
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.Fragment.instantiate(Fragment.java:581)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.Fragment.instantiate(Fragment.java:549)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.Activity.onCreateView(Activity.java:4235)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)
07-10 04:06:06.625: E/AndroidRuntime(1393):     ... 21 more
07-10 04:06:06.625: E/AndroidRuntime(1393): Caused by: java.lang.ClassNotFoundException: com.fxpal.unity.android.ListFragment
07-10 04:06:06.625: E/AndroidRuntime(1393):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
07-10 04:06:06.625: E/AndroidRuntime(1393):     at android.app.Fragment.instantiate(Fragment.java:571)
07-10 04:06:06.625: E/AndroidRuntime(1393):     ... 24 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:36:00.553

要么你没有复制粘贴你正在使用的所有布局文件，要么你在某处加载了错误的布局文件。堆栈跟踪清楚地提到，在某些时候它会尝试`com.fxpal.unity.android.ListFragment`从布局文件中加载具有完全限定类名的片段。但是，您提供的片段中没有这样的`ListFragment`类。

在您的项目中搜索`com.fxpal.unity.android.ListFragment`并更正任何引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:36:16.133

尝试在布局 xml 中使用`anodrid:name=""`而不是。`class=`

# vb.net - 下拉列表将空值返回到我的控制器操作结果

> ID：11418705
> 
> 赞同：1
> 
> 时间：2012-07-10T17:29:28.517
> 
> 标签：vb.net, razor, asp.net-mvc-4

嗨，我是 MVC 新手，浏览了大量这些帖子，但无法解决我的问题。

我已经使用 html 帮助程序的 dropdownlist 成功填充了我的下拉列表，但是当我提交表单时，所选项目的值没有与模型一起传递到操作结果中。换句话说，当我调试和检查下拉列表的属性值时，它什么都不是。我相信这会导致“ModelState.isValid”也返回 false。

这是我的模型：

```
 Public Class Warranty

        Public Property state As DropDownList

        Private _States As IEnumerable(Of State)
        Public Property States As IEnumerable(Of State)
            Get
                If _States Is Nothing Then
                    _States = GetStates()
                End If
                Return _States
            End Get
            Set(value As IEnumerable(Of State))
                _States = value
            End Set
         End Property

        Public Shared Function GetStates() As List(Of State)
            Dim l As New List(Of State)
            l.Add(New State With {.Value = "none", .Text = "Selected One"})
            l.Add(New State With {.Value = "UT", .Text = "Utah"})
            l.Add(New State With {.Value = "NV", .Text = "Nevada"})
            Return l
        End Function
    End Class 
```

这是我的州级：

```
 Public Class State

        Public Property Value As String
        Public Property Text As String
    End Class 
```

这是我的控制器方法：

```
 ' GET: /Warranty
    Function WarrantyRegistration() As ActionResult
        ViewData("Message") = "Warranty Registration Form"
        Dim _statesList As New SoleWebSite.Models.Warranty
        Return View(_statesList)
    End Function

    '

    'POST: /Warranty
    <HttpPost()> _
    Function WarrantyRegistration(ByVal warranty As SoleWebSite.Models.Warranty) As ActionResult
        If ModelState.IsValid Then

            war.state = warranty.state.SelectedItem.Value.ToString()
            //  warranty.state

            db.AddTowarranty_registrations(war)
            db.SaveChanges()
            db.Dispose()

            Return RedirectToAction("WarrantyRegistration")
        End If
        Return View(warranty)
    End Function 
```

这是我的看法：

```
 <td>@Html.DropDownListFor(Function(m) m.state, New SelectList(Model.States, "Value", "Text"))</td> 
```

我不确定我做错了什么。

我想保持所有的强类型，并尽可能避免使用 viewbag 或 viewdata。

任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:34:47.003

选定的值属性应该是简单的标量类型，例如`String`or `Integer`，而不是复杂类型，例如[`DropDownList`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.aspx). 顺便说一句，DropDownList 类型是一个经典的 WebForms 服务器端控件，它在 ASP.NET MVC 应用程序中完全没有任何关系。您应该完全摆脱对`System.Web.UI.WebControls`ASP.NET MVC 应用程序中命名空间的任何引用。所以在你`Warranty`使用一个简单的类型：

```
Public Property state As String 
```

在您的 POST 操作中，您只需读取值：

```
<HttpPost()> _
Function WarrantyRegistration(ByVal warranty As SoleWebSite.Models.Warranty) As ActionResult
    If ModelState.IsValid Then
        war.state = warranty.state
        //  warranty.state
        db.AddTowarranty_registrations(war)
        db.SaveChanges()
        db.Dispose()
        Return RedirectToAction("WarrantyRegistration")
    End If
    Return View(warranty)
End Function 
```

# sql - 在循环中的特定关键字之后显示部分 WordPress 内容

> ID：11418706
> 
> 赞同：0
> 
> 时间：2012-07-10T17:29:43.313
> 
> 标签：sql, wordpress

我是 SQL 和 $wpdb 的新手，所以请多多包涵。

我正在开发一个旧的 WordPress 博客，其中的帖子可以追溯到 2002 年。几年前它从另一个 CMS 迁移到了 WordPress。

在过去的十年中，帖子标题、日期、作者信息，有时还有其他数据（例如问题编号）被手动添加到每个帖子的顶部。此信息现在在较新的帖子中动态填充，但仍存在于旧帖子的内容中。

我想要做的是向网站添加标签。大多数帖子都被标记了，但标记功能从未被实时推送。

标签工作正常，但在每个标签存档页面上，我想显示*实际*内容的前几段。换句话说，我希望它排除手动输入的元数据的前 X 段。

该手动发布信息并不总是遵循可预测的模式，但它似乎总是包含发布信息最后一行的日期。

因此，在帖子的实际内容中，它可能如下所示：

```
<h1>[Post Title]</h1>
<p>By [Author], [Title]<br />
[Month] [Day], [Year]</p>

[ACTUAL POST CONTENT] 
```

或者它可能看起来像这样：

```
<p class="post_title">[Post Title]</p>
<br><br>
By [Author], [Title]<br>
[Month] [Day], [Year]; Issue #[issue]

[ACTUAL POST CONTENT] 
```

所以帖子开始之前的实际行数是可变的，但最后一行的日期是不变的。

我想知道是否有任何方法可以运行查询（在循环内），在 post_content 中搜索“年份”（2002-2012）并**仅**显示包含年份的行之后的三个段落。

谢谢你的帮助。我希望我的连续句子不是太，嗯，连续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:04:38.473

试试这个（将其粘贴到模板文件夹中的 functions.php 文件中），正如您所说的 2002 年和 2012 年之间的 4 位数年份之后的前三段，所以它会过滤内容并找到年份（2002、2003 ... 2012）并将返回前三个段落（包含在`<p>`标签中的文本）

```
add_filter('the_content', 'filter_year');
function filter_year($content)
{
    $text=$content;
    preg_match('/(20)(\d{2})/', $text, $matches);
    if($matches && ($matches[0] >= 2002 && $matches[0] <= 2012))
    {
        $matches_splited=preg_split('/20[0-9]{2}/', $text);
        preg_match_all('/<p.*?\>(.*?)<\/p>/si', $matches_splited[1], $paras);
        if($paras)
        {
            $c=0;
            foreach($paras[0] as $p)
            {
                if($c <= 2) $new_content.=$p;
                $c++;
            }
            return $new_content;
        }   
    }
    return $content;
} 
```

从以下内容

开始测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试 `2010` `<p>First Paragraph</p><p>Second Paragraph</p><p>Third Paragraph</p><p>Fourth Paragraph</p><p>Fifth Paragraph</p>`

你会得到

```
<p>First Paragraph</p>
<p>Second Paragraph</p>
<p>Third Paragraph</p> 
```

这会回响

```
First Paragraph
Second Paragraph
Third Paragraph 
```

# ruby - 在公差范围内确定两条线段是否属于同一段的最有效方法是什么？

> ID：11418707
> 
> 赞同：6
> 
> 时间：2012-07-10T17:29:45.320
> 
> 标签：ruby, math, opencv, computer-vision, cluster-analysis

**编辑：**更改了标题。我对这两个段是否相同不太感兴趣，而是如果它们彼此共线，则在一定的公差范围内。如果是这样，那么这些线应该聚集在一起作为一个单独的段。

**编辑：**我想一个简短的说法：我试图以一种有效的方式将相似的线段聚集在一起。

假设我有线段`f` `(fx0, fy0)`和`(fx1, fy1)`和`g` `(gx0, gy0)`和`(gx1, gy1)`

这些来自诸如计算机视觉算法边缘检测器之类的东西，在某些情况下，两条线基本相同，但由于像素容差而被视为两条不同的线。

**有几种情况**

*   `f`并`g`共享完全相同的端点，例如：`f = (0,0), (10,10) g = (0,0), (10,10)`
*   `f`并`g`共享大致相同的端点和大致相同的长度，例如：`f = (0,0.01), (9.95,10) g = (0,0), (10,10)`
*   `f`是 的子集`g`，这意味着它的端点落在该段内`g`并与该段共享相同的斜率`g`。想象一条粗略的线，笔在其中来回移动以使其变粗。例如：`f = (4.00, 4.02), (9.01, 9.02) g = (0,0), (10,10)`

以下将**不**被视为相同：

*   `f`并且`g`有超过一定的斜率差`tolerance`
*   `f`并且`g`可能具有相同的斜率但相隔一段距离`tolerance`，即平行线
*   `f`并且`g`在同一平面和同一坡度上，但根本不重叠……即虚线内的一组线段。

判断它们是否相同的最简单方法是如果`gx1 - fx1 <= tolerance`（对其他三个点重复），但在某些情况下，线`f`可能比线短`g`（同样，由于像素差异和/或照片扫描不佳）。

那么将这两个线段转换成极坐标并比较角度会更好吗？在这种情况下，两个 rho 将在容差范围内。但是你必须确保两条线段具有相同的“方向”，这在笛卡尔坐标或极坐标中计算是微不足道的。

所以这很容易找到一种方法，但我只是想知道是否有一种更清洁的方法，基于我早已忘记的线性代数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:45:32.483

Your problem is two-fold: you want to compare both the difference in length and difference in angles. To compute the difference in length, you'd take the length of the first line and divide it by the length of the second line.

To take the difference in angle, you can use `atan` or, my favourite:

`angle = acos(abs((u dot v)/(u.length * v.length)))`

Hopefully this helps. Sorry for the mistaken answer earlier.

**Old answer:**

Here's an idea for you: why not compare the difference in the start and end points of the two line segments to the total length of one of the lines? Then your difference function would look something like:

```
def difference(Line l1, Line l2):
    # Distance between first point on first line and first point on second line
    first_point_diff = (Line(l1.x1, l2.x1, l1.y1, l2.y1).length())

    # Distance between first point on first line and first point on second line
    second_point_diff = (Line(l1.x2, l2.x2, l1.y2, l2.y2).length())

    return (first_point_diff + second_point_diff)/l1.length() 
```

This function will return the "difference" between two lines as a fraction of the total length of the first line.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:01:22.530

Can you use the coordinates to define equations for the lines? If so, then you could use the two equations in a system of equations, solve the system, and find out if and where the lines intersect. If the lines do not intersect at all but the distance between them is very small, or with in the tolerance you could consider them a single line.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:09:48.960

If all you want is to see if they are in the same direction, couldn't you just consider the dot product divided by the magnitudes? Closer it is to 1, the closer the alignment between the two lines.

# java - 使用 Jetty 公开目录（或克服同源策略）

> ID：11418709
> 
> 赞同：0
> 
> 时间：2012-07-10T17:29:59.153
> 
> 标签：java, jetty, same-origin-policy

我目前有一个通过 Jetty 在端口 14436 上运行的 Java Servlet。在同一台服务器上，我在 /data/web 中有一些静态文件通过端口 80 提供服务。因此，当我尝试获取时遇到了违反同源策略的问题通过 javascript 与 Servlet 对话的静态文件。

有没有一些简单的方法可以：

a) 将静​​态文件打包到我的 Java 项目中，并通过 Jetty 公开它们

b) 配置 Jetty 以暴露 /data/web/myproject 目录

或其他一些解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:49:08.077

您可以查看：[http ://wiki.eclipse.org/Jetty/Feature/Cross_Origin_Filter](http://wiki.eclipse.org/Jetty/Feature/Cross_Origin_Filter)

或者，您也可以根据需要连接 DefaultServlet 来提供这些文件，或者将 ResourceHandler 添加到您的处理程序链中也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:53:11.027

如果您通过 Apache 等 Web 服务器在端口 80 上提供静态内容，您可以通过 Web 服务器代理 Jetty。通过这种方式，您还可以获得更无缝的方法，而无需将您的 Jetty 端口暴露给世界。

# java - 如何为项目创建属性列表？链表、数组列表、文件？

> ID：11418710
> 
> 赞同：0
> 
> 时间：2012-07-10T17:30:05.537
> 
> 标签：java

我不确定这是否是 stackoverflow 的正确问题，但无论如何我都会尝试。

我正在尝试模拟一个生产系统，其中几个部件进入一个系统以在不同的机器上运行。我试图让事情保持简单，但要继续前进，我需要创建某种列表，允许我将属性和值索引到“对象”，如下所示：

```
 Machine [num][type][avg_time][posx][posy][state]
 Part [num][type][order][state] 
```

这样我就可以创建某种列表，允许我在任何给定时间检索属性，例如：

```
 Machine [1][a][19][100][100][busy]

 and Machine[posx] would retrieve the saved value for it 
```

我仍在进一步阅读 ArrayLists、LinkedLists 等，但似乎无法找出最好的方法来做到这一点。这样做的最佳方法是什么，以便我可以进一步阅读该主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:26:25.457

上述问题指向称为**Maps**的集合。

从下面选择一个，您认为更适合您的问题。

**1.**如果您希望属性**按排序顺序使用 TreeMap。**

**2.**如果你想要**最快**的Map，那就选择**HashMap。**

**3.**如果你希望 Map 是**线程安全**的，那就选择**HashTable。**

**4.**为了**线程安全，您还可以使用**java.util.concurrent 包中的 ConcurrentHashMap 。

**例如：**

```
HashMap<Properties, Value> myMachine = new HashMap<Properties, Value>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:34:06.480

`Enums`并且`HashMap`可以让你这样做：

```
public enum Properties {
 POSX, POSY, ...
}

Map<Properties, Value> machine = new HashMap<Properties, Value>(); 
```

设置值....

```
machine.put(Properties.POSX, 151); //if Value is of Integer class, perhaps 
```

并检索值...

```
machine.get(Properties.POSX) 
```

# iphone - __weak 在 NSURL 和 NSString 上的不同行为

> ID：11418715
> 
> 赞同：1
> 
> 时间：2012-07-10T17:30:18.993
> 
> 标签：iphone, objective-c

__weak 上的 NSString 和 NSURL 有什么区别？

我的例子：

```
__weak NSURL *myURL = [NSURL fileURLWithPath:@"/tmp"];
__weak NSString *myString = @"123";

NSLog(@"myURL: %@", myURL);
NSLog(@"myString: %@", myString); 
```

**结果：**

> 2012-07-10 19:23:49.858 myApp[56093:303] myURL: (null)
> 
> 2012-07-10 19:23:49.859 myApp [56093:303] myString: 123

为什么结果不是 myString == (null)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:34:08.673

这是因为您示例中的字符串是一个永远*不会*被释放的**字符串文字。**您的属性不保留字符串，但由于它没有被释放，它仍然指向您分配的值。

 *如果您使用`[NSString stringWithFormat:@"hello"];`then 创建了字符串，您将看到预期的行为。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T19:06:33.477

尝试这个

NSLog(@"myURL: %@", [myURL 描述]);

NSLog(@"myString: %@", myString);

因为“%@”用于表示 NSString 而不是 NSURL。*

# ruby-on-rails - 关于 config.active_record.default_timezone

> ID：11418716
> 
> 赞同：0
> 
> 时间：2012-07-10T17:30:20.653
> 
> 标签：ruby-on-rails

我的**application.rb**中有：

```
config.active_record.default_timezone = :local 
```

因此发生的事情是，每当将某些内容保存到数据库时，它都会将其时间戳记到发布它的用户的时区。

在这里猜测.. 但是如果用户在 EST 中，则时间戳是相对于 EST 的。如果它们在 PST 中，则印章与 PST 相关。

因此，如果他们要取消小时，那么数据库会将其转换回他们最初存储的时间。当然，这一切都发生在 Rails 的底层，并且没有这种转换的实际记录。

例如，我将日期保存为下午 4 点。我检查了我的数据库，它是 UTC 格式的。然后，如果我在视图中显示该日期，它会回到我的本地时区，而无需我特别说明。

问题来了！

假设我希望 Resque 工作人员在位于弗吉尼亚州的服务器上为最初由居住在爱尔兰的用户创建的对象克隆一个对象。

会发生什么，该对象将更新到服务器的本地时间，而不是用户。

**问题：**如何提取保存对象的原始本地时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:26:44.017

我假设您将用户的时区存储在某个地方并在每个请求中设置它，最有可能在`application_controller.rb`. 显然，这一步不是由 Resque worker 执行的，所以会默认为服务器时区。

如果 worker 中的对象或某个变量以某种方式与特定用户相关联，您可以在 worker 方法中获取用户的时区并像在主应用程序中一样设置它：

```
Time.zone = obj.user.time_zone 
```

或者，如果合适，将时区存储在对象本身中。

# c++ - 带有 Microsoft Visual C++ 2010 Express 的 FLTK-1.1.10

> ID：11418721
> 
> 赞同：1
> 
> 时间：2012-07-10T17:30:52.587
> 
> 标签：c++, visual-studio-2010, fltk

我正在尝试遵循编程 - 使用 C 的原则和实践，并且到目前为止我很喜欢它。上周初，我遇到了一个阻碍进一步进展的问题。我需要安装 FLTK。

在成功构建和运行 FLTK-1.3.0（请参阅我的其他问题/解决方案）之后，我遇到了它不能与 Stroustrup 的头文件一起运行的问题。我认为这是由于版本不同，但不确定。

所以我回到尝试让 1.1 工作。

我无法使用 MVC++2010 从他的网站构建 FLTK-1.1.10 或 fltk-1.1.9。

所以这将我们引向问题

1) 如果我使用 MinGW/Msys 构建它，它仍然可以从 VC++ 运行吗？到目前为止，我一直试图弄清楚 MinGW/Msys，但收效甚微，所以我还没有构建任何东西，所以我自己还不能测试这个。

2) 如果它不会运行 MinGW 构建，有没有办法用 VC++ 构建它？

据我了解，Building 将在 FLTK 目录中创建更多文件，以便我使用它。-MinGW 使用与 VC++ 不同的编译器，它们不能很好地协同工作

我觉得我在这部分浪费了很多时间，但是这是一次很好的学习经历。可能对我的血压不太好。

我想此时我的主要选择是转移到另一个 IDE。Eclipse 看起来很不错。但我真的很想解决这个问题，而不是远离 VC++。

我之前的帖子（[Microsoft 2010 visual c，安装 FLTK](https://stackoverflow.com/questions/11357047/microsoft-2010-visual-c-installing-fltk)）详细介绍了编译期间发生的错误，以防万一。

我已经用谷歌搜索了这个问题，但还没有找到真正的解决方案。我希望这篇文章能为我自己和其他未来的程序员澄清这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:32:24.170

好吧，这花了我足够长的时间，但我终于弄明白了。这似乎是土地的布局。

1.  FLTK 1.3.0 与头文件兼容，但 graph.cpp 需要稍作更改才能运行。
2.  FLTK 1.1.10 不能与 Visual Express 2010 一起正确构建，但可以与 2008 版本一起使用。
3.  头文件两者都可以使用，但您需要对 Graph.cpp 进行一些小的更改才能使它们正常工作。

在让所有这些都正常工作感到沮丧之后，我认为为可能处于类似情况的人编写分步指南是公平的。这本书面向的是新手程序员，而不是已经能够调试他的头文件和 cpp 文件的人。我很抱歉解决方案有点冗长，但我认为它只适合像我这样可能面临它的人。

**Visual Express 2008 / 2010 指南**

1) 构建 FLTK。不像听起来那么容易，但也不算太糟糕。2008 年使用 FLTK 1.1.0。2010 年使用 1.3.0。

1.  对于 2010 年，请参阅我在此处编写的解决方案 – [Microsoft 2010 visual c ，安装 FLTK](https://stackoverflow.com/questions/11418721/fltk-1-1-10-with-microsoft-visual-c-2010-express)

2.  对于 2008，请改为运行 C:\fltk-1.1.10\vc2005\fltk.lib.vcproj。

    如果在构建过程中出现任何错误，您将需要找出问题所在。

2) 建立一个新项目

1.  对于 2010 年，只需按照上面的指南
2.  2008 年——基本相同，但有一些变化
    1.  确保将 1.3.0 的所有引用更改为 1.1.10
    2.  在输入部分，而不是用分号分隔 .lib 文件；请改用空格，因此链接器>输入>附加依赖项将如下所示 c:\fltk-1.1.10\lib\fltk.lib wsock32.lib comctl32.lib c:\fltk-1.1.10\lib\fltkjpeg。库 c:\fltk-1.1.10\lib\fltkimages.lib

3) 运行测试程序以确保您的 FLTK 工作正常，尝试 -

```
#include <FL/Fl.h>
#include <FL/Fl_Window.h>

int main()
{
Fl_Window win(320,200);
win.show();
return Fl::run();
} 
```

如果这里有任何错误，那么您将无法继续。

4) 将[他网站上](http://www.stroustrup.com/Programming/Graphics/)的文件放入正确的文件夹中。

1.  对于 2008 年，在名为 headertest 的项目中 -
    1.  C:\Users\User\Documents\Visual Studio 2008\Projects\headertest\ 把 std_lib_facilities.h 放在这里
    2.  C:\Users\User\Documents\Visual Studio 2008\Projects\headertest\headertest\ 将他网站上的所有其他 .cpp 和 .h 文件放在这里，当然你的 headertest.cpp 和 .h （如果需要）将是在这里创建。
    3.  确保按照上面我的指南中的步骤正确设置了项目。
2.  2010 年在名为 Fri_FLTK_Test 的项目中 -
    1.  执行与上述相同的操作，但将文件放在 2010 等效项中 - C:\Users\User\Documents\Visual Studio 2008\Projects\headertest 和 ..Visual Studio 2010\Projects\Fri_FLTK_Test\Fri_FLTK_Test

5) 将 .h 和 .cpp 文件添加到您的活动项目中。

1.  只需右键单击项目添加>现有项目 - 选择默认目录中的所有 .h 和 .cpp 文件。您不需要添加 ..\std_lib_facilities.h 因为您已经直接引用了它。不要问我为什么，但这有效。

6）现在你会发现，如果你运行这个项目，你会得到一堆错误，最重要的是——

> c:\users\user\documents\visual studio 2010\projects\fri_fltk_test\graph.cpp(237): 错误 C2084: 函数 'Graph_lib::Circle::Circle(Point,int)' 已经有一个主体

7) 我们可以通过打开 Graph.cpp 并注释掉 Circle::Circle 部分来解决这个问题，比如 -

```
//Circle::Circle(Point p, int rr)    // center and radius
//:r(rr)
//{
//    add(Point(p.x-r,p.y-r));       // store top-left corner
//} 
```

8) 保存更改并再次运行您的项目，您应该会发现它可以工作了！9) 现在最好的部分，将书中的代码放入（或从[-Chapter13/chapter.13.2.cpp](http://www.stroustrup.com/Programming/Programming-code.zip)复制它并运行它！它应该可以工作。

任务完成！

认为在那之后我应该喝啤酒！我花了很多时间来弄清楚这一切，查看了 Msys、g++、Netbeans 和许多其他与 IDE 相关的东西。但是让它在我最初的选择上工作是一种很好的感觉。我希望本指南可以帮助遇到类似情况的其他人。

特别感谢 Dream.In.Code 论坛的 Skydiver 对这个问题的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:15:01.180

可能是因为您运行的是 Express 版吗？我遇到过类似的问题，不得不切换到旧版本的 Express。

你看过这个帖子吗？

[http://answerpot.com/showthread.php?275672-FLTK+%26+Visual+C%2B%2B+Express%3F](http://answerpot.com/showthread.php?275672-FLTK+%26+Visual+C%2B%2B+Express%3F)

-硅。

# asp-classic - Maxmind GeoIP 城市 javascript

> ID：11418722
> 
> 赞同：1
> 
> 时间：2012-07-10T17:30:55.020
> 
> 标签：asp-classic

我正在尝试从 Maxmind GeoIP City 实现 tha javascript webservices，就像[这里](http://www.maxmind.com/app/javascript_city)描述的那样，但他们说：

> 为了在您的网站上使用此 JavaScript，请链接回 www.maxmind.com 网站

我不能在我的代码中使用链接，因为我需要使用服务器脚本来检查城市，所以我想使用一些引用方法......但我不确定如何做到这一点。

PD：我在服务器中使用 Classic ASP。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:22:25.343

他们的网站说：

> 为了在您的网站上使用此 JavaScript，请链接回 www.maxmind.com 网站，或以每百万次查找 10 美元的价格购买 JavaScript 无归属许可。

付款并在他们那里注册后，该代码将起作用。

如果您正在寻找免费版本，您可以使用[MaxMind GeoLite](http://www.maxmind.com/app/geolite)，并从服务器端调用它（参见[http://www.maxmind.com/app/csharp](http://www.maxmind.com/app/csharp)）

# mysql - 为 00.0 指定浮点大小

> ID：11418724
> 
> 赞同：1
> 
> 时间：2012-07-10T17:31:02.633
> 
> 标签：mysql, sql, database, sqldatatypes

考虑到我知道一个字段的范围 (0 - 10)，并且我只需要将精度保持在小数点后一位 00.0，那么该列的最佳字段类型是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:32:47.483

[十进制](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)。很多人使用`FLOAT`，但在大多数情况下这是不必要的。

```
DECIMAL(3,1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T17:34:29.873

您想要的数据类型是[`DECIMAL(3, 1)`](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html). 根据文档，这将存储从`-99.9`to 的任何值`99.9`。

# c - 考虑 C 中函数的“数据类型”？

> ID：11418727
> 
> 赞同：2
> 
> 时间：2012-07-10T17:31:11.130
> 
> 标签：c

我将对此非常模糊，我很抱歉。这是家庭作业，我正在尝试学习一些东西，所以并不真正想要答案，而是想要解释。问题是

```
 What is the datatype of thisThing 
```

这不是实际代码，而是类似的示例

```
 int* (*thisThing[])(int*, int*) = {someFunction1, someFunction2} 
```

据我了解，thisThing 的“数据类型”只是一个 int。但是，我从未见过将函数返回类型称为“数据类型”。是否有一个原因？我知道在 C 中有指向函数的指针；这些指针与变量指针没有什么不同吗？任何解释都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:33:46.287

> thisThing 的“数据类型”只是一个 int

它实际上是一个函数指针数组，其中指向的函数是：

```
int *fun(int *, int *); 
```

你应该看看[螺旋法则](http://c-faq.com/decl/spiral.anderson.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:36:56.330

thisThing 是一个指向 a 的指针数组（函数将两个指向整数的指针作为参数并返回一个指向整数的指针）。您可以阅读“K&R”C 书中复杂声明的章节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:41:01.533

变量`a`是`int`：

```
int a; 
```

`b`数组中的变量`int`：

```
int b[] = {3, 4}; 
```

变量`c`是指向的指针`int`：

```
int *c = &a; 
```

您还可以组合类型，例如，`d`是指向的指针数组`int`：

```
int *d[] = {c, b} 
```

变量`e`是指向函数的指针，该函数返回`int`并将指针`int`作为单个参数：

```
int (*e)(int*); 
```

因此， 的类型是`thisThing`什么？显然不是简单`int`...

```
int* (*thisThing[])(int*, int*) = {someFunction1, someFunction2} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:44:08.837

“数据类型”不是 C 标准中使用的术语；正确的术语是“类型”。

在您的情况下，给定一个声明的值，如`int* (*thisThing[])(int*, int*)`您所见，它可以称为：`int *result = (*thisThing[0])((int *)0, (int *)0)`，因此其类型的名称是*指向函数的指针的未指定长度数组 (pointer-to-int, pointer-to-int) 和返回指向 int 的指针*。

指向函数的指针与指向数据的指针*相似*但*不同*；重要的是，它们不可互换，例如，您*不能*将函数指针强制转换为`void *`（而您可以使用任何数据指针来实现）。这是为了确保您的程序在函数指针和数据指针具有不同表示形式的平台上运行。

# performance - SQL Server 2008/2012 对等复制 - 配置速度

> ID：11418730
> 
> 赞同：1
> 
> 时间：2012-07-10T17:31:22.247
> 
> 标签：performance, sql-server-2008, replication, sql-server-2012

我在 SQL Server 2012 中设置了一个示例对等复制测试，并且我在其中一个节点中批量插入了 300 万行。

复制正在工作......但它似乎被限制为每秒 100 次插入。两台服务器基本上都处于闲置状态。

有什么方法可以配置日志阅读器/分发器以更快地运行……也就是说，一次尝试 1000 个，等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:46:12.883

尝试增加分发代理参数**-CommitBatchSize**并查看是否有帮助。默认值为 100，尝试将其提高到 1000。

[复制分发代理](http://msdn.microsoft.com/en-us/library/ms147328.aspx)

# session - 在 grails 1.3.7 中设置会话变量

> ID：11418731
> 
> 赞同：0
> 
> 时间：2012-07-10T17:31:25.310
> 
> 标签：session, grails, scope

我有一个问题可能会有一个非常简单的解决方案。我正在运行 grails 1.3.7，并且正在尝试设置一个会话变量，例如：`session["username"] = uName`其中 uName 是从数据库查询返回的值。

我遇到的问题是`session`grails 似乎无法识别该关键字（带有下划线）。此外，当我实际尝试运行该应用程序时，我收到此错误：`No such property: session for class:`.

我没有任何进口，应该吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:32:24.710

您只能`session`在控制器、标签库和 GSP 中使用该变量，而不是在服务或域类中。您始终可以通过线程本地持有者访问它，但请记住，如果当前线程是请求处理程序（即，如果它是后台线程，则不是），您只有一个会话：

```
import org.springframework.web.context.request.RequestContextHolder

def currentRequest = RequestContextHolder.requestAttributes
if(currentRequest) { // we have been called from a web request processing thread
  // currentRequest is an instance of GrailsWebRequest
  currentRequest.session["uName"] = ...
} else {
  // not in a request handler thread, so no session available
} 
```

但通常最好将需要访问 HTTP 请求的逻辑保留在控制器（或标记库）中，您知道您将始终拥有“当前请求”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:45:30.030

保存会话变量必须在控制器而不是域类中完成。感谢@Igor Artamonov 的有用评论。

# java - 将 JSON 字符串转换为“Object.class”

> ID：11418737
> 
> 赞同：0
> 
> 时间：2012-07-10T17:31:54.663
> 
> 标签：java, json, serialization, jackson

我目前正在尝试使用 Jackson 将对象转换为 JSON 字符串，这很容易通过

```
public byte[] toJSON(Object obj) throws IOException {
        ObjectMapper map = new ObjectMapper();
        return map.writeValueAsString(obj).getBytes();
    } 
```

我遇到麻烦的地方是当我要获取字节数组并将它们转换为对象时。目前我有：

```
public Object toObject(byte[] bytes) throws IOException, ClassNotFoundException {
    ObjectMapper map = new ObjectMapper();
    return (Object)map.readValue(bytes, Object.class);
} 
```

我成功地将一个对象转换为 JSON 字符串，但从 toObject 方法返回的对象始终是 LinkedHashMap，而不是最初转换为 JSON 字符串的对象。

抱歉，如果我在传达我的问题方面做得不好，但我会尝试简单地总结一下。我希望我的代码能够执行以下操作：

```
MyClass someObject = new MyClass();
String json = toJSON(someObject);
Object tempObject = toObject(json);
MyClass sameObject = (MyClass) tempObject; 
```

此代码当前抛出以下内容：

```
java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.MyClass 
```

任何有关此事的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:48:24.877

您正在请求一个`Object`，因此杰克逊创建了一个`Object`它知道它可以创建的：a `Map`。JSON 数组会变成 a`List`等等。

如果需要`MyClass`，您必须明确请求它，或者，如果您想要通用的序列化/反序列化，则按照@csd 的建议包含类型标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:00:38.707

首先，我有点困惑为什么你需要处理`byte[]`。 `objectMapper.writeVaueAsString(obj)`为您提供完美`String`的对象的 JSON 表示。如果您需要转换为，`byte[]`则需要`String`在调用之前转换回`readValue`。

但是暂时先把它放在一边，让我们假设你已经得到了`String`包含 JSON 的那个。默认情况下，Jackson 不够聪明，无法知道（仅通过查看 JSON）在您调用`readValue`. 在您的示例中，您传入`Object.class`，这对 Jackson 没有太大帮助，因为 Java 中的每个对象都扩展自`Object`. 因此，在这种情况下，它会选择其内置默认值，即使用 JSON 中列出的键和值构建 a `Map`（特别是 a ）。`LinkedHashMap`

正如一位评论者指出的那样，您可以给杰克逊一个提示并`MyClass.class`作为第二个参数传递给`readValue`（而不是`Object.class`）。如果你这样做了，那么 JSON 将`MyClass`在`readValue`. 当它在 JSON 中看到类似“ `foo: 43`”的内容时，它会尝试在其中找到一个字段或设置器（即`public int foo;`或`public void setFoo(int f)`）`MyClass`并相应地设置值。

如果您不提前知道它是什么类型的对象（即作为第二个参数传递的值`readValue`），那么还有其他选项。其中一个示例是要求您的 JSON 对象具有`class`Jackson 将用作提示创建哪种类型的 Java 对象的属性。以下是该代码的样子：

```
// This annotation tells Jackson to include the class name as
// a "class" property when *writing* JSON.
@JsonTypeInfo(include=As.PROPERTY, use=Id.CLASS, property="class")
public class MyClass {
    public int foo;
} 
```

这将使您的 JSON 看起来像这样：

```
{ "class":"MyClass", foo:0 } 
```

然后在您的代码中读取对象，执行以下操作：

```
ObjectMapper objectMapper = new ObjectMapper();
objectMapper.enableDefaultTypingAsProperty(DefaultTyping.JAVA_LANG_OBJECT, "class");
// Note Object.class as second parameter.  Jackson will find the "class"
// property in the JSON and use it to determine which class to make.
MyClass foo = (MyClass) objectMapper.readValue(jsonString, Object.class); 
```

# jquery - http://api.easyjquery.com/ips/ 没有返回值

> ID：11418738
> 
> 赞同：0
> 
> 时间：2012-07-10T17:31:56.363
> 
> 标签：jquery, json

HTML：

```
<div class=iplookup>23.25.49.250</div>;
<div class=iplookup>188.2.50.62</div>; 
```

jQuery：

```
$("div").mouseup(function () {
    IP = $(this).text();
    $.getJSON("http://api.easyjquery.com/ips/", {
        IP: IP
    }, function (data) {
        alert("XXX");
        alert(data.continentName + "\n" + data.countryName + " " + data.cityName);
        $(this).append("=" + data.countryName + "," + data.cityName);

    });

}); 
```

这段代码有什么问题？为什么没有`alert()`显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:34:27.033

该服务未返回 JSONP，这是跨域调用所需的。有关类似问题，请参见[此处](https://stackoverflow.com/questions/760993/jquery-getjson-cross-domain-problems)。

# php - simplexml_load_string 和子节点

> ID：11418744
> 
> 赞同：0
> 
> 时间：2012-07-10T17:32:28.260
> 
> 标签：php, xml, simplexml

我正在尝试从 xml 字符串中获取信息并查看其中的子节点。我在用：

```
'Title' => $current->AttributeSets->children('ns2')->ItemAttributes->Title, 
```

在 $current 的数组中

```
$current = $parsed_xml->ListMatchingProductsResponse->ListMatchingProductsResult->Products->Product; 
```

命名空间是 ns2，子类是 ItemAttributes 和 Title。当我运行它时，我没有得到标题应该在哪里的信息。这是我运行脚本时的响应：

```
SimpleXMLElement Object() 
```

谁能指出我正确的方向？我查看了其他帖子并尝试使用他们的示例，但它们对我不起作用。这是 XML：

```
 <?xml version="1.0"?>
<ListMatchingProductsResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<ListMatchingProductsResult>
<Products xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
<Product>
<AttributeSets>
<ns2:ItemAttributes xml:lang="en-US">
<ns2:Title>JavaScript: The Missing Manual</ns2:Title> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:35:59.583

您通常需要将 simpleXml 元素转换为字符串以获取值。尝试 `'Title' => (string)$current->AttributeSets->children('ns2')->ItemAttributes->Title`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:41:00.770

如果其他人需要做类似的事情，获取孩子信息的正确方法是：

```
'Title' => $current->AttributeSets->children('ns2', true)->ItemAttributes->Title, 
```

String 不是必需的，但 true 是。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T12:36:35.240

另一个解决方案是删除命名空间 ns2，然后通过简单的字符串替换将其放入 simplexml_load_string，我认为这是一种 hack，但我就是这样做的。

```
$response = str_replace('ns2:', '', $response);
$parse_xml = simplexml_load_string($response); 
```

# module - 在 openerp 中，如何覆盖产品的基本标价？

> ID：11418748
> 
> 赞同：1
> 
> 时间：2012-07-10T17:32:57.033
> 
> 标签：module, overriding, product, openerp

我有 OpenERP 外部的代码，可用作现有的产品定价系统。我们的每种产品都有一个以某种复杂的方式确定的基本价格。

这个外部系统通过 RPC api 在 OpenERP 中管理和创建销售订单。

我们想从我们的外部定价系统中删除计算价格信息的代码，/之后/它已经确定了一个基本价格。也就是说，在 OpenERP 术语中，每个产品都会有（比如说）十个不同的标价。

从这里开始，我们想使用 OpenERP 的价目表系统对这个基础价格进行进一步的计算。

目前，我有向 OpenERP 询问产品价格的代码：

```
...
    date_order = time.strftime(DEFAULT_SERVER_DATE_FORMAT) #Pricelists are seasonal
    price = self.pool.get('product.pricelist').price_get(cr, uid, [pricelist_id], product.id, qty, partner.id, {
        'uom': uom,
        'date': date_order,
    })[pricelist_id]

...
    price_taxes = tax_obj.compute_all(cr, uid, tax_objs, price, qty, billing_addr.id, product.id, partner.id) 
```

这可以正常工作，并为我提供特定产品的价格。

价格表树（因为价格表可以基于彼此等）最终调用`product_product.price_get(self, cr, uid, ids, ptype='list_price', context=None)`读取 list_price via `self.browse( ... )[ptype]`。

我认为修改它的最简单方法是在 product.list_price 上按请求覆盖。我的意思是创建一个在上下文中设置变量的 rpc 方法，并修改 price_get 以读取上下文变量而不是产品对象。

另一种选择是使用线程本地，但这仍然是对 price_get 函数的修改。

我正在考虑覆盖列定义并添加一个 getter 方法，但我不确定它是否会在 self.browse 调用中使用。

你会推荐什么？覆盖`price_get`，覆盖列`list_price`，还是别的什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:58:53.273

我这样解决了我的问题：

```
class product_product(osv.osv):
    def _get_dyn_list_price(self, cr, uid, ids, field_name, arg, context):
        res = {}
        b = self.browse(cr, uid, ids)
        for obj in b:
            res[obj.id] = context.get('dyn_prices', {}).get(obj.id, None)
        return res

    _name = _inherit = 'product.product'
    _columns = {
        'dynamic_list_price': fields.function(_get_dyn_list_price, type='float', method=True, string='Dynamic List Price', store=False, digits_compute=dp.get_precision('Sale Price'), help="Dynamic base price for product after applying door styles, etc.", readonly=True),
    }

    def price_get(self, cr, uid, ids, ptype='list_price', context=None):
        if ptype != 'list_price':
            return super(product_product, self).price_get(cr, uid, ids, ptype, context)
        ptype = 'dynamic_list_price' #Will cause price_margin / price_extra to not be respected
        res = super(product_product, self).price_get(cr, uid, ids, ptype, context)

        for k, v in res.iteritems():
            if v is None:
                if context.get('require_dyn_prices', False):
                    raise osv.except_osv('Error !', 'Dynamic prices required, but product ID not found in context.')
                res[k] = super(product_product, self).price_get(cr, uid, [k], ptype, context)[k]
        return res 
```

然后可以这样使用：

```
 date_order = time.strftime(DEFAULT_SERVER_DATE_FORMAT) #Pricelists are seasonal
    price = self.pool.get('product.pricelist').price_get(cr, uid, [pricelist_id], product.id, qty, partner.id, {
        'uom': uom,
        'date': date_order,
        'dyn_prices': {product.id: unit_price},
        'require_dyn_prices': True,
    })[pricelist_id] 
```

# c# - 如何实现调用自身的方法？

> ID：11418750
> 
> 赞同：4
> 
> 时间：2012-07-10T17:33:27.040
> 
> 标签：c#, recursion, loops

我的手腕被打了一巴掌，因为在一个作业中，当输入错误发生时，我有一个方法调用本身。我不知道如何或使用什么来代替我编写的代码。我需要帮助才能找到正确的方法。

我喜欢编码，所以我只需要以正确的方式轻推！:)

我写的代码是这样的。

```
 private void SumTheNumbers()
 {
 Console.Write("Please give the value no "+ index + " :");
        if (false == int.TryParse(Console.ReadLine(), out num))
        { 
            //Errormessage if the user did not input an integer.
            Console.WriteLine("Your input is not valid, please try again.");
            Console.WriteLine();
            sum = 0;
            SumTheNumbers();
        }
        else
        {
            //Calculate the numbers given by user
            sum += num;
        }
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T17:37:05.057

我个人有点喜欢这种风格，但它*效率*低下（如果用户多次输入无效输入，可能会导致堆栈溢出）。您的讲师可能希望您使用`while`循环：

```
Console.Write("Please give the value no "+ index + " :");
while (false == int.TryParse(Console.ReadLine(), out num))
{ 
    //Errormessage if the user did not input an integer.
    Console.WriteLine("Your input is not valid, please try again.");
    Console.WriteLine();
    sum = 0;
}

//Calculate the numbers given by user
sum += num; 
```

顺便说一句，这`false ==`一点非常不习惯，并且会引起大多数团队的注意（作为旁注：如果你的教练建议你写这个，他/她可能来自不同的语言背景，这是为了防止意外分配；相信我，在 C# 领域中没有必要或正常）。这看起来更典型：

```
while (!int.TryParse(Console.ReadLine(), out num))
{
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T17:36:35.027

实现这一点的标准方法是使用 while 循环。

```
int num;
while (!int.TryParse(Console.ReadLine(), out num))
{
    Console.WriteLine("Your input is not valid, please try again.\n");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T17:43:20.907

使用 while 循环。

```
Console.Write("Please give the value no "+ index + " :");
while(!int.TryParse(Console.ReadLine(), out num))   //I find "!" easier to read then "false == "
{
    Console.WriteLine("Your input is not valid, please try again.");
    Console.WriteLine();
    Console.Write("Please give the value no "+ index + " :");
} 
```

这里不需要递归，所以 do while 循环更好。

# android - AsyncTask 中的 HTTP 请求

> ID：11418753
> 
> 赞同：0
> 
> 时间：2012-07-10T17:33:36.673
> 
> 标签：android, request, android-asynctask

我有一个解析 XML 文件的 HTTP 请求。我正在尝试从 asyntask 连接到互联网，但我无法

我这样做并通过将代码放在线程中而不是在 AsycTask 中来工作我遇到的问题是 HTTP 请求是在使用以下代码行的字符串中调用的：

```
String xml = parser.getXmlFromUrl(URL); 
```

运行这个

```
public String getXmlFromUrl(String url) {
            Thread t= new Thread(){
                public void run() {
                    xml = null;              
                    try {
                        Log.i("Log1","Parse");
                        // defaultHttpClient
                        DefaultHttpClient httpClient = new DefaultHttpClient();
                        HttpPost httpPost = new HttpPost("http://api.androidhive.info/music/music.xml");

                        HttpResponse httpResponse = httpClient.execute(httpPost);
                        HttpEntity httpEntity = httpResponse.getEntity();
                        xml = EntityUtils.toString(httpEntity);

                    } catch (UnsupportedEncodingException e) {
                        e.printStackTrace();
                    } catch (ClientProtocolException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    mHandler.post(mUpdateResults);
                }
            };
            t.start();
            return xml;
        }

        final Runnable mUpdateResults =new Runnable (){
            public void run(){//2

            }
        }; 
```

正如我所提到的，HTTP 请求在一个线程中，但是当我尝试将它放在 AsycTask 中时，我总是会发现错误......我不知道该怎么做。

我已经参考了 AsycTask 的文档并阅读了很多次，我搜索了教程，但我无法正确构建它。

两天后，我开始有点绝望

我为我的工作放了完整的代码，如果有人能告诉我如何替换 AsyncTask 线程，我将非常感激。

非常感谢和问候

*完整的活动：*

```
public class PruebasActivity extends Activity {

    static final String URL = "http://api.androidhive.info/music/music.xml";
    // XML node keys
        static final String KEY_SONG = "song"; // parent node
        static final String KEY_ID = "id";
        static final String KEY_TITLE = "title";
        static final String KEY_ARTIST = "artist";
        static final String KEY_DURATION = "duration";
        static final String KEY_THUMB_URL = "thumb_url";

        private ArrayList<HashMap<String, String>> data;
        ArrayList<HashMap<String, String>> songsList;

        ListView list;
        LazyAdapter adapter;
        String xml;

        final Handler mHandler=new Handler();

        // constructor
        public void XMLParser() {

        }

        /**
         * Cogiendo el XML de la URL mediante HTTP request
         * @param url string
         * */
        public String getXmlFromUrl(String url) {
            Thread t= new Thread(){
                public void run() {
                    xml = null;              
                    try {
                        Log.i("Log1","Parse");
                        // defaultHttpClient
                        DefaultHttpClient httpClient = new DefaultHttpClient();
                        HttpPost httpPost = new HttpPost("http://api.androidhive.info/music/music.xml");

                        HttpResponse httpResponse = httpClient.execute(httpPost);
                        HttpEntity httpEntity = httpResponse.getEntity();
                        xml = EntityUtils.toString(httpEntity);

                    } catch (UnsupportedEncodingException e) {
                        e.printStackTrace();
                    } catch (ClientProtocolException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    mHandler.post(mUpdateResults);
                }
            };
            t.start();
            return xml;
        }

        final Runnable mUpdateResults =new Runnable (){
            public void run(){//2

            }
        };

        /*
         * @param XML string
         * */
        public Document getDomElement(String xml){
            Document doc = null;
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            try {

                DocumentBuilder db = dbf.newDocumentBuilder();

                InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
        }

        /*
         * @param elem element
         */
        public final String getElementValue( Node elem ) {
            Node child;
            if( elem != null){
                if (elem.hasChildNodes()){
                    for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                        if( child.getNodeType() == Node.TEXT_NODE  ){
                            return child.getNodeValue();
                        }
                    }
                }
            }
            return "";
        }

        /*
         * @param Element node
         * @param key string
         * */
        public String getValue(Element item, String str) {      
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        list=(ListView)findViewById(R.id.list);

        songsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // Cogiendo XML de la URL
        Document doc = parser.getDomElement(xml); // Cogiendo DOM de los elementos

        NodeList nl = doc.getElementsByTagName(KEY_SONG);
        // looping through all song nodes <song>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
            map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));          

            // adding HashList to ArrayList
            songsList.add(map);
        }

        // Pasando datos parseados del adaptador al arrayList
        adapter=new MinAdapter(this, songsList);        
        list.setAdapter(adapter);   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:13:08.463

以下代码应该适合您。试试看：

```
public class PruebasActivity extends Activity {

static final String URL = "http://api.androidhive.info/music/music.xml";
// XML node keys
    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    private ArrayList<HashMap<String, String>> data;
    ArrayList<HashMap<String, String>> songsList;

    ListView list;
    LazyAdapter adapter;
    String xml;

    // constructor
    public void XMLParser() {

    }

    /**
     * Cogiendo el XML de la URL mediante HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
            xml = null;              
            try {
                Log.i("Log1","Parse");
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost("http://api.androidhive.info/music/music.xml");

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);

            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

        return xml;
    }

    /*
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
    }

    /*
     * @param elem element
     */
    public final String getElementValue( Node elem ) {
        Node child;
        if( elem != null){
            if (elem.hasChildNodes()){
                for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                    if( child.getNodeType() == Node.TEXT_NODE  ){
                        return child.getNodeValue();
                    }
                }
            }
        }
        return "";
    }

    /*
     * @param Element node
     * @param key string
     * */
    public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    list=(ListView)findViewById(R.id.list);

    AsyncTask<Void, Void, Void> ast = new AsyncTask<Void, Void, Void>(){
        ProgressDialog p;
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
             p = new ProgressDialog(EditTextDemoActivity.this);
            //write code to start the progress dialog
        }

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            songsList = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // Cogiendo XML de la URL
            Document doc = parser.getDomElement(xml); // Cogiendo DOM de los elementos

            NodeList nl = doc.getElementsByTagName(KEY_SONG);
            // looping through all song nodes <song>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
                map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));          

                // adding HashList to ArrayList
                songsList.add(map);
            }
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            p.dismiss();
            adapter=new MinAdapter(this, songsList);        
            lst.setAdapter(adapter); 
        }
    };

    ast.execute();
}
} 
```

我已经使用`AsyncTask`. `Thread`当您使用`AsyncTask`. 我留下了一小部分编码（用于创建和显示进度对话框）作为练习。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:45:25.060

HTTP 请求可以在 Asynctask 的 doInBackground 函数中运行，而您的可运行对象是 onPostExecute 函数。结果是这样的：

```
public class XmlTask extends AsyncTask<String, Void, String>{

    public String doInBackground(String... urls){
        String url = urls[0];

        // Place your getXmlFromUrl content here

        return xml;
    }

    public void onPostExecute(String xml){
        // Your XML parsing staement here
    }
} 
```

在此代码中，不需要 Thread 和 runnable。

在您的活动中，只需点击：

```
new XmlTask().execute("http://yoururl"); 
```

# java - 抽象类中的静态类

> ID：11418756
> 
> 赞同：3
> 
> 时间：2012-07-10T17:33:55.793
> 
> 标签：java, static, abstract

```
abstract class MyClass{

    static class StaticClass{
        public void showAdd(){
            System.out.println(" show add");
        }
    }
}

public class SampleClass extends MyClass{

    public static void main(String[] args){
         MyClass myClass = new SampleClass();
         MyClass.StaticClass staticClass = new MyClass.StaticClass();
         staticClass.showAdd();
    }
} 
```

输出如预期的那样正确，但我们如何用**抽象**类编写**新的？**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:38:27.777

您不是在抽象类上做`new`，而是在这个抽象类中存在的内部类上做。在这种情况下，抽象类充当命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:55:50.423

您不能实例化抽象类。您的示例“有效”，因为您并没有真正实例化抽象类。

```
MyClass myClass = new SampleClass(); 
```

SampleClass 是 MyClass 类的子类和实现，因此它不是抽象的。所以这条线可以正常工作。尝试替换`new SampleClass()`为`new MyClass()`，你会得到一个编译器错误。

```
MyClass.StaticClass staticClass = new MyClass.StaticClass(); 
```

在这种情况下与以下内容相同：

```
StaticClass staticClass = new StaticClass(); 
```

只是在抽象类中声明的内部类的实例化。由于这个内部类不是抽象的，它可以被实例化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:36:16.300

您不能为抽象类创建实例（除非您使用反射）。所以，如果你这样做`new MyClass()`，那么只有编译时错误。否则它工作正常，你的例子就是这种情况。

您没有使用为静态类创建实例 `new MyClass.StaticClass();`

抽象类是没有完全实现的类（一些事实留给子类）。阅读本[文档](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)以及[内部类如何工作](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)。

静态内部类就像类的静态变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:19:04.397

试试这个...

**1.**外部类对其内部类的占有欲非常强（无论是静态的还是非静态的）。

**2.**所以要访问内部类（静态或非静态）需要外部类。

**例如：**

```
Outer.Inner i = new Outer.Inner(); 
```

在上面的例子中，我**没有初始化外部类，而且在你的例子中它是抽象的，所以它没有被初始化的问题**，但是它的**内部静态类，也称为顶级类被初始化。**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-10T17:37:17.587

抽象类不能被实例化！这就是Java规则。**

# canvas - JavaScript 库 - WebGL-2D 动画不起作用

> ID：11418757
> 
> 赞同：3
> 
> 时间：2012-07-10T17:33:56.853
> 
> 标签：canvas, javascript, webgl

我找到了一个漂亮的 JavaScript 库，它允许“硬件加速”画布 2d 绘图：[https ://github.com/corbanbrook/webgl-2d](https://github.com/corbanbrook/webgl-2d)

我尝试了这个例子，第一帧渲染得像它应该的那样，但是在第一帧之后，画布是白色的。

我在这里设置了一个小提琴：http: [//jsfiddle.net/RaW5x/5/](http://jsfiddle.net/RaW5x/5/)

我必须假设它是库，因为这是存储库中的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T23:45:58.960

简短的回答：我不认为这是图书馆的*错*，但这绝对是图书馆应该解决的问题。

具体来说，webgl-2d[在初始化期间](https://github.com/gameclosure/webgl-2d/blob/master/webgl-2d.js#L296)使用`gl.colorMask(1, 1, 1, 0)`-- 设置 GL 颜色掩码，从而阻止对 alpha 通道的任何写入。

现在，我必须承认，我不完全确定发生了什么使屏幕变白。混合函数是(src alpha, 1减src alpha)，这意味着对于每一种写出的颜色，都会根据源alpha分量与背景颜色混合。为简化解释，这里仅列出红色通道的公式：

```
Red = Rs * As + Rd * (1 - As) 
```

...其中 Rs 是源（新）红色通道，As 是源 Alpha 通道，Rd 是目标（当前背景）红色通道。

因此，如果我们假设红色为 50（或在 WebGL 中约为 0.196），我的理解是*应该*发生的事情是：

```
Red = 0.196 * 1 + 0.196 * (1 - 1) = 0.196 
```

换句话说，它应该用新颜色替换以前的颜色。

只要源通道等于目标通道，即使涉及 1.0 以外的 alpha，数字也会发生一些变化，但结果不会：

```
Red = 0.196 * 0.5 + 0.196 * (1 - 0.5) = 0.196 
```

如果目标红色通道实际上与源通道不同，结果显然会改变，但即便如此，我也看不出它是如何变成白色的。如果问题完全是由于混合造成的，我预计会根据 Alpha 通道中的值逐步迈向白色，而不是在单个帧中“跳转”到白色。

所以从数学上讲，它对我来说看起来不错。但是，我可以通过设置颜色掩码以防止 alpha 写入，在我自己的 WebGL 框架 ( [Jax](http://blog.jaxgl.com/what-is-jax) ) 中重现此问题，因此这不完全是库的错。我的猜测是，这可能是您和我（以及无数其他）机器上的 OpenGL 驱动程序中的错误。

我将继续研究这个问题，如果我能学到任何东西，我会更新这个答案。

无论如何，这个问题可以在*webgl-2d*库中解决。我已经向开发人员[提交了一个拉取请求](https://github.com/gameclosure/webgl-2d/pull/29)。（仅供参考，您在问题中链接的存储库是原始存储库的一个分支；我不知道当前的维护者是谁，所以我将拉取请求发送到原始存储库。）

在拉取请求被（希望）接受，或者问题得到解决之前，我相信你可以这样做：

```
ctxGL.colorMask(1, 1, 1, 1); 
```

...在进行任何渲染之前，它应该可以正常工作。

# javascript - 如何在three.js中检测立方体和球体之间的碰撞？

> ID：11418762
> 
> 赞同：3
> 
> 时间：2012-07-10T17:34:06.550
> 
> 标签：javascript, collision-detection, three.js

我的场景中有 2 个简单的 3D 对象（一个球体和一个立方体），我想检测它们是否发生碰撞。

如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T18:55:10.637

最简单的选择是使用两个对象之间的欧式距离，使用 Vector3 的[distanceTo()](https://github.com/mrdoob/three.js/blob/master/src/core/Vector3.js#L251)或 distanceToSquared 函数。

例如

```
console.log(yourCube.position.distanceToSquared(yourSphere.position)); 
```

如果两个物体之间的距离大于球体半径和立方体边的总和，那么这将是潜在的碰撞。我还建议使用 distanceToSquared，因为它更快（因为它不调用 sqrt）并且检查碰撞仍然很有用。

**请注意**，这种方法不是非常精确 - 它本质上是检查两个球体之间的碰撞（将立方体估计为半径等于立方体边一半的球体），但我希望它对于您的设置来说足够接近/足够好，因为它是在我看来，最容易和最快的实现。

您可能会注意到立方体的角会发生碰撞，直到一定距离才会触发碰撞。您可以通过传递不同的立方体边比来调整“阈值”。想象一下您的立方体周围有一个球体，该球体的比例应该有多大才能为您的设置获得合适的估计碰撞。

想到的另一种方法是在球体上找到最接近立方体的点：

*   你知道可以通过减去两个位置向量得到从球体中心到立方体中心的点
*   您可以通过对上述差异向量进行归一化并按球体半径对其进行缩放，从而在立方体方向上获得球体上的点
*   然后您可以检查该点是否在立方体内（通过检查坐标是否在立方体的轴对齐边界框内（AABB）

例如

```
var pointOnSphere = yourSphere.position.clone().sub(yourCube.position).normalize(). multiplyScalar(yourSphereRadius); 
```

如果这不是我的想法，所以我不能保证上面的代码片段会起作用，可能值得先在 pointOnSphere 的坐标处放置一个粒子进行检查。

您可以在[本书](http://realtimecollisiondetection.net/)中查看其他更高级的 3D 碰撞检测算法，但最好让事情尽可能简单/快速。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:04:08.463

不幸的是，three.js 没有任何碰撞检测器：[碰撞检测？](https://github.com/mrdoob/three.js/issues/49).

我认为您需要使用插件库。像这样：http: [//yomotsu.github.com/threejs-examples/cannonjs_box/](http://yomotsu.github.com/threejs-examples/cannonjs_box/)。

# php - PHP/MySQL 搜索不返回所有结果

> ID：11418765
> 
> 赞同：0
> 
> 时间：2012-07-10T17:34:12.947
> 
> 标签：php, mysql

所以我有一个表格，可以搜索公司列表以查看该特定公司是否已在网站上注册。

当公司名称是三个或更少的字符并且我可以看到它在数据库中时，结果不会显示。

例如，如果公司名称是“ABB Eutech”并且搜索的是 ABB，则搜索返回 0。

但是，如果您搜索 Eutech，则搜索会返回结果。

这是我正在使用的代码：

```
 <?php 
        $out = '';
        if ((isset($_POST['companysearch-name'])) && ($_POST['companysearch-name']==NULL)) {
            $out .= '<h3>No matches. Please enter a company name.</h3>';
        } else if (isset($_POST['companysearch-name'])) {
            $queryString = htmlspecialchars($_POST['companysearch-name'],ENT_QUOTES);                   
            if(strlen($queryString) >0) {
                $query = $wpdb->get_results("SELECT DISTINCT (company_name) FROM wp_companies WHERE MATCH (company_name) AGAINST ('$queryString')");
                $searchStr = "%" . $queryString . "%";
                $searchStr = str_replace(" ","%",$searchStr);
                $numresults = count($query);
                if($query) {
                    $out .= '<div><ul>';
                    foreach($query as $result):

                    $out .= '<li>'.$result->company_name.'</li>';
                    endforeach;
                    $out .= '</ul></div>';
                    $out .= "<p>Is your company on this list? If YES, your company already has the scheme in place and you can setup a donation right now.</p>";
                    $out .= '<a class="button" href="/donate/"><span>Start Giving</span><b></b></a>';
                } else {
                    $out .= '<h3>No matches found.</h3>';
                    $out .= "<p>Can't find your employer? They may have only just signed up - <a href='/contact-us/'>contact us</a> and we'll check it out for you.</p>";
                }
            }
        }
    ?> 
```

大大收到任何帮助！……温柔点，我是第一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:36:43.067

默认情况下，MySQL 中的全文索引会省略包含三个或更少字符的单词。

> 要索引的单词的最小和最大长度由 ft_min_word_len 和 ft_max_word_len 系统变量定义。（请参阅第 5.1.3 节，“服务器系统变量”。）默认最小值是四个字符；默认最大值取决于版本。如果更改任一值，则必须重建 FULLTEXT 索引。例如，如果您想搜索三个字符的单词，您可以通过将以下行放入选项文件中来设置 ft_min_word_len 变量： [mysqld] ft_min_word_len=3
> 
> 然后重新启动服务器并重建 FULLTEXT 索引。请特别注意此列表后面的说明中有关 myisamchk 的注释。

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-fine-tuning.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-fine-tuning.html)

# google-chrome - 托管的 chrome 浏览器扩展是否仍然不允许跨源请求？

> ID：11418772
> 
> 赞同：1
> 
> 时间：2012-07-10T17:34:34.163
> 
> 标签：google-chrome, google-chrome-extension

[chrome 扩展中的跨域 XMLHttpRequest](https://stackoverflow.com/questions/9421933/cross-origin-xmlhttprequest-in-chrome-extensions/9422216#9422216)

我在网站上搜索我的问题时发现了这篇文章，但这些信息仍然有效吗？远程托管的 chrome 浏览器扩展是否仍然不允许跨源请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:48:52.133

[是的，因为没有请求跨域访问的权限。](https://developers.google.com/chrome/apps/docs/developers_guide#offline)

我的想法是，打包的应用程序就像恰好有一个应用程序图标而不是浏览器或页面操作的扩展程序，托管应用程序只是具有一些特殊属性的美化书签。只有扩展才能请求访问跨域请求。

# javascript - 如何在 jQuery 选择器中使用基于 scriptlet 的 id

> ID：11418780
> 
> 赞同：0
> 
> 时间：2012-07-10T17:35:02.157
> 
> 标签：javascript, jquery, jsp

我必须在我的表单中使用动态 id，基于 scriptlet 中的 jsp 变量。如何使用 jQuery 的 id 选择器选择正确的元素而不会出错？

这是我的代码：

```
<form name="intakeOnly" id="intakeOnly_<%=complaint%>" method="post" action="../Intake.do">
<table class="normal">
  <tr>
    <td><b>Clinician Signature: </b> <span id="cSigI_<%=complaint%>"><%=clinicianSig%>,<%=signedDate%></span></td>
  </tr>
  <tr>
    <td><input type="button" id="submitSig_<%=complaint%>" name="submitSig" value="Sign and Save" onClick="intakeSubmit();"></td>
  </tr>
</table>
</form> 
```

Javascript：

```
function intakeSubmit() {
   var complaint = <%=complaint%>;
   var fname = new String("<%=userFirstName%>");
   var lname = new String("<%=userLastName%>");
   var date = new String("<%=DateUtils.getDate()%>");
   jQuery("#cSigI_"+complaint).append("<br>"+fname+" "+lname + ","+ date); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:50:05.310

这一行：

```
var complaint = <%=complaint%>; 
```

应该

```
var complaint = "<%=complaint%>"; 
```

不需要更改后面的行以匹配该语法`new String(str)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:39:57.183

有处理这些字符`escape(string)`的函数`unescape(string)`

# ios - 一个视图控制器上的多个视图控制器

> ID：11418789
> 
> 赞同：2
> 
> 时间：2012-07-10T17:35:21.287
> 
> 标签：ios, objective-c, cocoa-touch, uiviewcontroller

我想在 iPad 上创建一个两人游戏，但我真的不知道我应该怎么做才对。我的概念就像两人游戏的“水果忍者”（一对一）。

我的意思是一个播放器将在 viewcontrollerA 中播放，而另一个播放器将在 viewcontrollerB 中播放（应该与 viewcontrollerA 倒置）。

我该怎么做？我是否需要创建两个视图控制器并通过控制器包含显示，还是有另一种更好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T22:22:22.447

在 iOS5 中，控制器接收定向事件、添加/删除回调以及将它们正确插入到响应者链中是一种幸运的方式。因此，如果您要这样做，这是最好的方法。只要你不做一些愚蠢的事情，比如将同一个视图添加到两个 UIViewController 中，你就可以了。

为什么这样做？我认为将游戏引擎放在主控制器上，编写一个客户端，将该客户端封装在一个子视图控制器上，然后为两个玩家重用它是合乎逻辑的。

如果你觉得你需要这样的东西，你也可以使用嵌套控制器来封装复杂性。示例：一个用于与游戏引擎对话的界面，另一个用于从引擎获取事件的屏幕。

UIViewController 包含很容易。您需要阅读 6 种方法并了解什么叫什么。欢迎您阅读文档，但简而言之：

*   [`addChildViewController:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/addChildViewController%3a)添加一个子视图控制器。您还需要手动添加孩子的视图：`[self.view addSubView:chieldVC.view];`。
*   [`removeFromParentViewController`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/removeFromParentViewController)删除子视图控制器。
*   [`transitionFromViewController...`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/transitionFromViewController%3atoViewController%3aduration%3aoptions%3aanimations%3acompletion%3a)替换视图或将视图移到前面。
*   [`willMoveToParentViewController:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/willMoveToParentViewController%3a)由 自动调用`addChildViewController:`。仅当您要删除时才调用它（传递 nil 表示控制器成为孤儿）。仅当您需要自定义代码时才覆盖它。
*   [`didMoveToParentViewController:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/didMoveToParentViewController%3a)您必须`addChildViewController`在动画完成后调用它（或者如果没有动画，请立即调用它）。
*   [`automaticallyForward...`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers). 仅当您要手动转发轮换和外观呼叫时才覆盖并返回 NO。

例如，要将一个控制器嵌套在另一个控制器中，请将子视图添加为常规视图，并按如下所示顺序调用 addChildViewController: 和 didMoveToParentViewController:：

```
// from the parent view controller
ChildViewController *child = [ChildViewController new];
[self addChildViewController:child];
[self.view addSubview:child.view];
[child didMoveToParentViewController:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:40:00.430

最好的方法是只拥有一个作为整个屏幕的根视图控制器，然后是每个玩家屏幕的两个子视图。你不想嵌套视图控制器

# c# - 将查询结果从实体框架映射到我自己的模型类的最佳方法是什么？

> ID：11418793
> 
> 赞同：-2
> 
> 时间：2012-07-10T17:35:45.293
> 
> 标签：c#, sql-server, entity-framework

我在实体框架中有一个带有以下事件模型的 SQL Server Express 2012：

eventPage：ID、名称、描述 .. eventDates：IDEvent、DateStart、DateEnd .. eventTopics：IDEvent IDTopic ..主题：ID、名称、描述..

所以 eventDates 有一个 eventPage 属性， eventPage 有一个 IEnumerable 并且 eventTopic 有一个 topic 属性等等。

我想通过模型进行查询，结果将其映射到我在 C# 中的自定义类。我不想使用 EF 生成的模型类，我有一些具有我需要的唯一属性的类。IE：

主题：ID、名称 EventDate：DateStart、DateEnd 事件：ID、名称、主题、开始、结束

成为主题是主题列表，日期是 EventDates 列表

我有一个方法可以进行查询并返回一个 IQueryable 并从中我想要一个列表。

所以我得到它的方式是：

```
var events=GetEvents(start, end);
var eventsList = (from ev in events
                  select new {event = ev, eventPage = ev.eventPage,topics=ev.eventTopics)).ToList();
//Mapping
var map = (from ev in eventsList
select new Event(ev.event,ev.eventPage,ev.topics)).ToList(); 
```

在构造函数中我设置了属性：

```
this.name=eventPage.Name;
this.start=event.Start;
this.end=event.End;
this.topics = topics.Select(t=>t.Topic).ToList(); 
```

但这对于大量事件来说有点慢，我想知道是否有更优化的方式。

一开始，构造函数唯一的参数是事件，在里面我得到了 event.eventPage.Name 等，但它太慢了，所以我先得到我需要的数据，然后我调用构造函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:44:53.027

[在这种情况下， AutoMapper](http://automapper.org/)是您的朋友。

我建议您阅读[入门指南](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)。这很容易理解，您将能够非常快速地将查询映射到您的自定义 DTO。

这是完整的[Wiki 指南](https://github.com/AutoMapper/AutoMapper/wiki)。请参阅[列表和数组](https://github.com/AutoMapper/AutoMapper/wiki/Lists-and-arrays)。

在你的情况下，它会是这样的：

```
Mapper.CreateMap<Event, MyCustomEvent>();

var events =
    Mapper.Map<IEnumerable<Event>, IEnumerable<MyCustomEvent>>(Database.Events).
    AsQueryable(); 
```

`AutoMapper`还允许您执行以下操作：

```
Mapper.CreateMap<Event, MyCustomEvent>().
ForMember(dest => dest.SomeCollectionProperty, opt => opt.MapFrom(src => src.RelationshipProperty.SomeCollectionProperty)); 
```

它真的很强大！例如，实体框架默认情况下让您延迟加载相关实体，因此我认为上面的示例开箱即用，只需对数据库进行一次查询即可获取根对象。

# excel - 使用 jxls 下载 excel 的超链接

> ID：11418796
> 
> 赞同：2
> 
> 时间：2012-07-10T17:35:53.673
> 
> 标签：excel, export, jxls

**首先是上下文：**

我正在使用 jxls 使用 excel 模板导出到 excel 并且工作正常。我正在保存到 webcontent 下的文件夹

```
WebContent\reports\report_output.xls 
```

**我还需要做什么：**

我必须在网页中向将访问此保存文件的用户提供超链接。

**我没有做的事情：**

如果我不在 Eclipse 中刷新我的网络内容，超链接会引发异常（找不到资源）

**我的问题**

一个。通过 java 刷新 web 内容是否是解决这种情况的方法？湾。记住替代方法我不能做以下

1\. 不能使用 spring mvc 框架（时间和精力限制）并且只坚持使用 jxls。

2.出于安全原因，不能将文件保存在本地驱动器中并通过超链接访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:08:17.453

我使用特定的 URK 模式弄清楚了，servlet 将在复制内容并使用 mime 类型作为 XSL 流回之后做出响应。这是工作示例： [“导出到 Excel：JXLS”](http://fundapass.blogspot.in/2012/07/this-method-is-getting-called-from-ajax.html)。

# php - 基于某个选择在mySQL中计数

> ID：11418797
> 
> 赞同：0
> 
> 时间：2012-07-10T17:35:57.687
> 
> 标签：php, mysql

全部，假设我在 mySQL 中有以下 Select 语句：

```
$qry = "Select filename from upload where file_id='$file_id'";
$result = mysql_query($qry);
$resultset = mysql_fetch_array($result); 
```

该查询工作正常，但我还想做的是计算同一文件名在同一语句中该表的其他位置出现的次数，因此我只需运行一次 mySQL 语句，而不是从中获取该文件名结果，然后执行另一个像这样的查询：

```
$qrycheck = "Select COUNT(filename) from upload where filename='$resultset[filename]'"; 
```

无论如何要在单个 mySQL 语句中执行此检查吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:37:44.293

```
SELECT COUNT(filename) AS filenameOccurences, filename FROM upload WHERE filename = '$resultset[filename]' GROUP BY filename; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:43:38.037

```
SELECT u.filename, c.cnt
FROM upload AS u
INNER JOIN 
(
    SELECT COUNT(*) AS cnt, uu.filename 
    FROM upload AS uu
    GROUP BY uu.filename
) AS c ON u.filename = c.filename
WHERE u.file_id = '$file_id' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:43:58.347

自加入是您的朋友。

```
$qry = "SELECT DISTINCT filename, a
    FROM (SELECT count(filename) AS a, file_id FROM upload GROUP BY file_id) AS x
    JOIN upload ON upload.file_id = x.file_id
    WHERE upload.file_id = '$file_id'"; 
```

这`DISTINCT`有助于防止相同的文件名多次出现（尽管如果您只抓取第一行，那真的没关系）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:50:56.050

它可以帮助你

```
SELECT COUNT( * ) AS  `Cnt` ,  `filename` 
FROM  `upload` 
GROUP BY  `filename`
limit 10; 
```

你可能想要它

```
SELECT filename, count(*) as cnt 
from upload 
where file_id='###my_file_id###' 
group by filename; 
```

你可以用谷歌搜索'mysql group by'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T17:46:55.433

如果我理解正确，您有几个具有不同 file_id 的 'filename' 实例（我认为 file_id 是一个唯一 ID，因此计算 file_id 的出现是没有意义的 - 你会得到 1 或 0）：

```
 file_id  filename
  1        filename1.jpg
  2        filename2.jpg
  3        filename1.jpg
  4        filename1.jpg 
```

如果是这种情况，您必须自己加入上传：

```
 SELECT uploads.filename, count(names.instance) AS instances FROM upload AS uploads
       JOIN upload AS names ON (uploads.filename = names.filename)
       WHERE uploads.file_id = '$file_id' GROUP BY uploads.filename; 
```

这将返回 $resultset['filename'] 中的名称和 $resultset['instances'] 中的实例数。

# java - 如何在Eclipse中使用JDK1.3运行程序（安装JDK1.7）？

> ID：11418801
> 
> 赞同：0
> 
> 时间：2012-07-10T17:36:09.430
> 
> 标签：java, assert

我想使用 JDK1.3 运行这个程序。. . 如何在我安装 JDK1.7 时使用 Eclipse 运行此代码。在此程序中，“assert”不能用作从 JDK1.4 开始的标识符，因为它已更改为 KEYWORD。因此，我想使用 JDK1.3 作为标识符运行。如何在 Eclipse 中更改 JDK 版本。是否需要安装JDK1.3？

```
public class A
{
    public static void main(String[] args)
    {
        System.out.println(1);
        int assert = 10;
        System.out.println(2);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:44:15.710

在你的文件中解压JDK1.3，然后进入Eclipse，菜单Window-->preferences，然后在左侧菜单中选择Java-->Installed JREs。

选择按钮添加，然后选择标准 VM。在那里您可以设置要使用的JDK1.3 的位置。

然后进入你的项目，右键，Properties，Java Compiler and JDK compliance to 1.3。在同一个 Project Properties 菜单中，查找 Java Build Path，然后在 Libraries 选项卡中更改 JRE System Library（删除它并添加另一个库 - JRE System library -- 选择刚刚添加的 JDK1.3）。

完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:26:08.343

是的，您需要安装 JDK 1.3（尽管您确实需要考虑为什么要安装 JDK 并考虑是否最好花时间重构一些代码并使其至少在 Java 6 上运行，甚至在 Java 7 上更好），1.3 太旧了.

1.  将 JDK 1.3 安装到您的机器上
2.  在 Eclipse 中，在已安装的 JRE 列表中添加 JDK 1.3（Preferences -> Java -> Installed JREs）
3.  如果你想为你的 Eclipse 应用 JDK 1.3 作为 DEFAULT，然后转到 Preferences -> Java -> Compiler 并将编译器合规级别设置为 1.3（请注意，如果项目已经覆盖了默认值，他们将保留该设置）
4.  如果要更改特定的项目编译器级别，请右键单击项目，属性 -> Java 编译器 - 然后选中“启用项目特定设置”并选择 1.3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:40:36.687

尝试这个：

1.  从菜单栏中，选择`Window`-> `Preferences`。
2.  从左侧面板中选择`Java`-> 。`Compiler`
3.  选择`1.3`为`Compiler compliance level`。
4.  单击`Apply`，然后单击`OK`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:41:02.153

在 Eclipse 中，您可以在首选项中指定两件事：

*   编译类格式（preferences/java/compiler：编译器合规级别）

*   使用的 jdk (preferences/java/installed jres)

您可能想同时设置两者。但是为了设置使用的 JDK，您必须安装 JDK1.3（您可以在 PC 上安装任意数量的 jdk）。

# django - 在 ec2 中自动部署

> ID：11418807
> 
> 赞同：3
> 
> 时间：2012-07-10T17:36:23.217
> 
> 标签：django, amazon-ec2

我对 Amazon Web Services 非常陌生，我想知道是否有人有在 EC2 上部署 Django 应用程序的经验？我现在有我的应用程序在 EC2 上运行，但如果我必须为多个实例部署所有内容，这将需要一些时间——随着我们的不断发展，我可能没有时间。

我的问题是，人们通常会做什么来自动部署 django 应用程序？我们可以配置（最好是免费的）工具吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:40:00.610

[Fabric](http://fabfile.org)是在分布式服务器组上运行命令的非常棒的工具（我使用它来进行配置和设置以及运行维护和部署任务）；如果你想管理配置，你可能想看看[Puppet](http://puppetlabs.com/)或[Chef](http://www.opscode.com/chef/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T19:13:02.803

您可能还想看看开源工具[Cloudify](http://www.cloudifysource.org)，它可以自动安装、配置、监控和扩展 EC2（或任何其他云）上的应用程序。您可以使用纯脚本或 Chef 说明书来安装和配置您的应用程序。

# android - 尝试设置 GCM 演示应用程序 - 设备注册不起作用

> ID：11418813
> 
> 赞同：0
> 
> 时间：2012-07-10T17:36:44.567
> 
> 标签：android, registration, android-c2dm, google-cloud-messaging

所以我一直在按照 Google 的教程在 Android 模拟器上设置 GCM 演示应用程序（这里的那个：http: [//developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)）。我让服务器端正常工作 - 我有一个显示“未注册设备！”的 tomcat 服务器 在 GCM 演示页面上。我已经在带有目标 Google API 的 Android 模拟器上安装了客户端应用程序（试图让 GCM 在一个针对 4.1 的模拟器上工作，每次运行应用程序时都会吐出“不幸的是，GCM Demo 已停止”） - 应用程序运行成功，但它无法连接到服务器来注册设备（它经历了所有 5 次尝试）。我确实将 SERVER_URL、SENDER_ID 和 api.key 编辑为正确的值（我 已遵循本教程的每一步）-我在这里缺少什么？模拟器上的浏览器似乎也可以正常工作。

编辑：固定网址演示 - nickl

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T18:11:15.610

您的 tomcat 服务器在哪里运行，您在 Android 应用程序中提供的 SERVER_URL 是什么？我在尝试那个演示时遇到了问题，因为我的 tomcat 在本地运行，但请记住，模拟器就像一个“虚拟路由器”，所以你不能`http://localhost:8080`仅从你的 android 应用程序访问你的 tomcat 服务器。您必须使用运行 Tomcat 服务器的机器的 IP，所以它就像`http://[tomcat-machine's ip]:8080/gcm-demo`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T03:30:43.597

这个问题可能有很多来源，在我看来是因为我使用了错误的服务器 URL，你应该停在[http://yourserveraddress.com/gcm-demo](http://yourserveraddress.com/gcm-demo)而不是 .../gcm-demo/home

```
SERVER_URL = "http://yourserveraddress.com/gcm-demo" 
```

另外，您是否检查过用于构建 WAR 文件的 API 密钥是用于网络服务器的，而不是用于应用程序引擎的（通过 Google 控制台 API 注册时生成了 2 个）？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T12:45:21.717

如果您尝试访问运行 android 模拟器的计算机的 localhost，则必须使用 10.0.2.2，您可以在此处阅读更多信息：http: [//developer.android.com/tools/devices/emulator.html #networkaddresses](http://developer.android.com/tools/devices/emulator.html#networkaddresses)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T21:31:24.817

我有同样的问题。我意识到我已经在家里的网络上构建了这些文件，并在我在工作网络中时尝试编译这些文件。这改变了我电脑的ip。在将 SERVER_URL 更改为 CommonUtilities.java 文件中的新 ip 后，我忘记重新编译我的代码。

# dependencies - rpm 在哪里寻找依赖关系？

> ID：11418814
> 
> 赞同：12
> 
> 时间：2012-07-10T17:36:45.810
> 
> 标签：dependencies, rpm

我有一个使用 rpmbuild 构建的 rpm。可以说它是sample.rpm。它构建成功。rpm 具有可执行文件（我们称其为 init）。

当我尝试使用它安装它时，`rpm -ivh sample.rpm`它显示我失败的依赖项。

假设错误`Failed dependency for: example.so`意味着 rpm 无法找到此共享对象文件。（即使so文件存在于同一目录中）。

因此，我将 rpm 安装为`rpm -ivh sample.rpm --nodeps`（因为我知道我有所需的 so 文件）。

那么为什么 rpm 不能安装那些 rpm 呢？它在哪里寻找目标文件？（Linux 加载程序是否会查找这些 .so）。我有 LD_LIBRARY_PATH 来包含这些 .so 的路径，所以当我从它运行的 rpm 运行安装的文件（init）时。

那为什么 rpm 不能安装 sample.rpm （它到底在哪里寻找依赖关系）？是否需要在构建 rpm 时指定？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T03:17:47.010

RPM 文件的依赖关系在其`.spec`文件中的“Requires:”行中指定。

### 样本 SPEC 文件：

```
Summary: <Summary for my Linux project>
Name: <Name for my Linux project>
Version: 2.5.1
Release: GA
Requires: libx1.so >= 2.6.3
BuildArch: i586
Group: System / Applications
License: GPL 2.0
Vendor: <my organization> 
```

您还可以运行此命令来确定需要哪些依赖项：

```
$ rpm -q --requires <my_rpm>
libx1.so.2
$ 
```

依赖项`libx1.so`本身应该通过 RPM 安装，以便将其存在输入到 RedHat 包管理器维护的数据库中。换句话说，`libx1.so`文件系统上的物理存在不是依赖测试的标准。

要找出哪个包提供了依赖项，请运行以下命令：

```
$ rpm -q --whatprovides libx1 
```

如果没有包提供`libx1.so`，您的 RPM 将继续显示依赖错误，除非您`libx1.so`从“Requires:”行中删除。

要禁用依赖项的自动检测，您可以将其添加到您的`.spec`文件中：

```
AutoReqProv: no 
```

更多信息位于[rpm.org](http://www.rpm.org/max-rpm/s1-rpm-depend-auto-depend.html)和[rpm5.org](http://rpm5.org/docs/api/dependencies.html)。

# entity-framework - 当 POCO 具有 IsReference = true 属性时序列化 EF 代理

> ID：11418822
> 
> 赞同：2
> 
> 时间：2012-07-10T17:37:23.610
> 
> 标签：entity-framework, serialization, ef-code-first

当它代理的类被装饰时，如何序列化实体框架代码优先代理`DataContractAttribute(IsReference = true)`？

将 DataContractSerializer 与 ProxyContractResolver 一起使用时，我得到以下信息：

> 类型“System.Data.Entity.DynamicProxies.MyType_59A83378572C10D0B31B6892FB6C3E7428C4BA214322C7A77BD5E1EB19E529CA”的 IsReference 设置为“False”，但其父类“My.Namespace.MyType”的相同设置为“True”。派生类型的 IsReference 值必须与基类型相同。更改类型的设置

似乎 EF 代理生成器不尊重 IsReference 属性，我在 POCO 上确实需要该属性（否则我最终会由于相互引用而导致堆栈溢出）。

在这些情况下，是否有任何机制可以序列化 EF 代理？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T21:13:40.400

我只是按照非常简单的示例进行了操作，并且`ProxyDataContractResolver`按预期工作-具有周期的代理实体图已正确序列化。

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Data.Objects;
using System.IO;
using System.Linq;
using System.Runtime.Serialization;

namespace CFSerialization
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var context = new Context())
            {
                context.Database.Delete();
                context.Database.CreateIfNotExists();

                context.Masters.Add(new Master
                    {
                        Name = "abc",
                        Details = new List<Detail>
                            {
                                new Detail { Name = "a" },
                                new Detail { Name = "b" },
                                new Detail { Name = "c" }
                            }
                    });
                context.SaveChanges();
            }

            using (var context = new Context())
            {
                // This will get proxied Master
                var master = context.Masters.First();

                var serializer = new DataContractSerializer(typeof(Master), new DataContractSerializerSettings()
                    {
                        DataContractResolver = new ProxyDataContractResolver()
                    });

                using (var stream = new MemoryStream())
                {
                    // This will also lazy load all details
                    serializer.WriteObject(stream, master);
                    stream.Seek(0, SeekOrigin.Begin);
                    var newMaster = (Master)serializer.ReadObject(stream);
                }
            }
        }
    }

    [DataContract(IsReference=true)]
    public class Master
    {
        [DataMember]
        public int Id { get; set; }
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public virtual ICollection<Detail> Details { get; set; }
    }

    [DataContract(IsReference=true)]
    public class Detail 
    {
        [DataMember]
        public int Id { get; set; }
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public virtual Master Master { get; set; }
    }

    public class Context : DbContext
    {
        public DbSet<Master> Masters { get; set; }
    }
} 
```

您的模型中必须有更复杂的东西来破坏功能 - 您的所有实体都标有`DataContract(IsReference=true)`吗？

注意：我在 .NET 4.5 中对其进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:55:38.060

请注意，`ProxyDataContractResolver()`如果代理类`IsReference=true`直接指定，则使用唯一有效。
如果它是在上面第一条评论中提到的基类上完成的，它目前不起作用。

# iphone - 谷歌 GTL Objective-C API

> ID：11418826
> 
> 赞同：0
> 
> 时间：2012-07-10T17:37:31.593
> 
> 标签：iphone, objective-c, macos, ipad

我一直在研究 Google Objective-c API，在他们的旧 GData API 上有一小部分，但现在他们似乎已经放弃了它，并且他们称之为新的 GTL API。

如果我错了，请告诉我。看着它，我可以看到有关日历和 Google Drive API 等的一些内容，但与 YouTube 无关，它们是否包括在内？

我需要 API 才能访问 YouTube。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:52:23.370

YouTube XML API 尚未被 JSON API 取代。

# mysql - MySQL 插入循环

> ID：11418833
> 
> 赞同：2
> 
> 时间：2012-07-10T17:38:06.183
> 
> 标签：mysql, database, loops, stored-procedures

我想将一些行数据复制到另一个表中，*例如：*

我有这**2 个**表：( `qa_items_purchases`), ( `qa_suppliers_invoices`)

`qa_items_purchases`， 数据：

![在此处输入图像描述](../Images/27a11f8b7d6cee91c41673b576576de0.png)

`qa_suppliers_invoices`是空的：

![在此处输入图像描述](../Images/9a490447d6b38e5d0cd2d8b2065c9389.png)

我需要复制表 (qa_items_purchases) 中包含的所有记录，仅提取另一个表具有的字段。

**编辑：** 在表格之间，名称会有所不同：

```
purchase_code AS itempurchase_code
supplier_invoice_code AS item_invoicecodesupplier
supploer_invoice_date as itempurchase_date 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:40:36.900

试试这个：

```
INSERT INTO qa_suppliers_invoices (purchase_code,supplier_code, user_code, status_code, supplier_invoice_code,supplier_invoice_date)

SELECT itempurchase_code,supplier_code, user_code, status_code,item_invoicecodesupplier,itempurchase_date FROM qa_items_purchases 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:07:50.667

插入选择手册，访问 [http://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

```
insert into qa_suppliers_invoices 
(purchase_code, supplier_invoice_code, supploer_invoice_date )
SELECT itempurchase_code, item_invoicecodesupplier, itempurchase_date
FROM qa_items_purchases 
```

如果您需要更多列，只需添加列。cols 顺序很重要。

# c - 在函数中传递字符串 (C)

> ID：11418834
> 
> 赞同：7
> 
> 时间：2012-07-10T17:38:06.933
> 
> 标签：c, string

我有这个小程序：

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

#define SIZE 30

void inverti (char s);

int main ()
{
        char str[SIZE+1];

        gets(str);

        printf ("Your imput: ");
        puts(str);

        invert(*str);

        printf ("It works!");

        return 0;
}

void invert (char s)
{
    int i;

    for (i = 0; i < SIZE + 1; i++)
    {
        if (isupper(str[i]))
            str[i] = tolower(str[i]);

        else if (islower(str[i]))
            str[i] = toupper(str[i]);
    }

    puts(str);
} 
```

是错误吗？为什么我不能传递`str`给我的函数？

```
In function ‘main’:|
warning: passing argument 1 of ‘inverti’ makes integer from pointer without a cast [enabled by default]|
note: expected ‘char’ but argument is of type ‘char *’|
In function ‘invert’:|
error: ‘str’ undeclared (first use in this function)|
note: each undeclared identifier is reported only once for each function it appears in|
||=== Build finished: 3 errors, 1 warnings ===| 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T17:38:58.913

您的代码至少有 3 个问题。

首先，与您的具体问题最相关的是，您已将函数的参数声明为单个字符：`char`. 要传递 C 字符串，请将参数声明为`char *`- 指向字符的指针也是用于 C 字符串的类型：

```
void invert(char *str) 
```

并且在传递参数时不需要取消引用：

```
invert(str); 
```

另请注意，您在函数原型中输入了错误的函数名称：您在`inverti`那里调用了它。原型中的名称**必须**与代码后面的函数定义中的名称匹配。

您还需要更改更正和重命名的函数原型中的参数类型：

```
void invert(char *str); 
```

您的代码还有一个额外的问题：您正在使用`SIZE`. `SIZE`是数组的最大大小，但不一定是字符串的大小：如果用户只输入 5 个字符怎么办？您应该查看并使用该函数[`strlen`](http://en.cppreference.com/w/c/string/byte/strlen)来获取实际长度，并且在您的循环中，仅迭代字符串的实际长度。

# javascript - JavaScript：解析布尔值

> ID：11418836
> 
> 赞同：2
> 
> 时间：2012-07-10T17:38:15.430
> 
> 标签：javascript, parsing, boolean

是否有一个函数（或语言构造）我可以用来仅评估以下值`true`（以及任何其他值`false`）？

```
var trueValues = [
    true,               // boolean literal
    "true",             // string literal
    "\t tRUe ",         // case-insensitive string literal with leading/trailing whitespace
    1,                  // number literal
    1.00,               // number literal
    "1",                // string literal of number literal
    "1.0",              // string literal of number literal
    "1.00000000"        // string literal of number literal
]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:45:16.870

假设您将这些作为示例，并且您的真正意思是：

1.  解释为字符串，仅包含不区分大小写的单词“true”以及可选的周围空格。
2.  解释为数字，计算结果正好为 1。

以下两个条件将过滤掉所有异常值。

```
/^\s*true\s*$/i.test(value) || Number(value) == 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:44:49.500

以下将修剪任何空白，将其更改为小写，并将其与字符串文字进行比较`true`。将返回`true`值的另一种情况是`1`传递给时返回的数字`parseInt()`

```
if(!String.prototype.trim) {
  bool = (val.replace(/^\s\s*/, '').replace(/\s\s*$/, '').toLowerCase() === "true" || Number(val) === 1)
} else {
  bool = (val.trim().toLowerCase() === "true" || Number(val) === 1)
} 
```

# ios - 实现 2 个不同的委托来处理 UIImagePickerController 事件

> ID：11418840
> 
> 赞同：1
> 
> 时间：2012-07-10T17:38:23.423
> 
> 标签：ios, delegates, uiimagepickercontroller

我很想知道实现以下内容的共识设计模式：

我有一个带有 2 个按钮的主视图，允许用户执行不同的任务，两者都需要使用 a 选择图像`UIImagePickerController`（假设任务 1 =“选择/拍摄类型的照片`foo`”和任务 2 =“选择/拍摄类型的照片`bar`”）。目前，我正在`<UIImagePickerControllerDelegate>`呈现 UIIPC 的视图控制器中实现协议，但是鉴于我需要对委托方法有 2 个不同的响应：

```
 - (void) imagePickerController: (UIImagePickerController *) pickerdidFinishPickingMediaWithInfo: (NSDictionary *) info 
```

取决于用户是选择 a`foo`还是`bar`photo 我对实现 2 种不同`<UIImagePickerController>`委托方法的最佳方式感兴趣。包含在呈现视图控制器中并实例化两次的独立委托对象是否效果最好？（我在 iOS 上只有几周的时间，所以还在接受设计模式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:50:33.153

如果您将选取器创建为标头中的属性，则可以在委托方法之间`picker`进行比较`yourPicker`

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:07:48.580

声明两个不同的代表。最好的方法，永远不要实例化同一个委托两次，因为它最终会在你的代码中发生奇怪的 juju。

在你的 UIImagePickerController.h 中写：

```
 #pragma mark - Protocols advance declarations 
    @protocol imageTypeADelegate
    @required
      -(void) takeImageOfTypeA:(id)object;
    @end

    #pragma mark - Protocols advance declarations 
    @protocol imageTypeBDelegate
    @required
       -(void) takeImageOfTypeB:(id)object;
    @end 
```

将它们添加到您的财产声明中

```
 #pragma mark - Property declarations 
    @property (assign) id <imageTypeADelegate> typeADelegate;
    @property (assign) id <imageTypeADelegate> typeBDelegate; 
```

**然后**你在你的 .m 文件中添加：

```
 #pragma mark - Protocols
    -(void) pressedButtonToTakeImageOfTypeA:(id)sender;
    {
       [[self _typeADelegate] takeImageOfTypeA:(id)object];
    }
    -(void) pressedButtonToTakeImageOfTypeB:(id)sender;
    {
       [[self _typeBDelegate] takeImageOfTypeB:(id)object];
    } 
```

然后在您需要他们运行例程的任何课程上，您所要做的就是将其添加到您希望它通知的 .h

```
 #import "UIImagePickerController.h"
    @interface OtherViewController : UIViewController <imageTypeADelegate, imageTypeBDelegate> 
```

在你的 .m 某处

```
-(void) takeImageOfTypeA:(id)object;
{ 
   // Do something
}

-(void) takeImageOfTypeA:(id)object;
{
   // Do something
} 
```

/~行尾

# android - app-inventor：将应用程序安装到 SD 卡上

> ID：11418841
> 
> 赞同：2
> 
> 时间：2012-07-10T17:38:27.513
> 
> 标签：android, android-sdcard, app-inventor

**[在提问一周后编辑显示当前的游戏状态]**

我深入研究了应用程序发明者，因为我的孩子（10 岁和 12 岁）即将获得他们的第一部 Android 手机，并且已经完成了一些拖放编程（游戏制作者），所以我认为这对他们来说可能是一个很好的切入点。

我现在自己和应用程序发明者一起编写了 5 个应用程序，并在我的手机上安装了 4 个，但我无法安装第 5 个，因为我显然“内存不足”，尽管手机上的 SD 卡上有 3 个免费演出。

好的，这是怎么回事？设置->应用程序->管理应用程序并没有削减它，因为“移动到 SD 卡”选项在 appinventor 应用程序上显示为灰色。

我将我的第 5 个应用程序打包为 apk，然后将其解压缩以查看 AndroidManifest.xml，但它不是纯文本：-/

不适合我的解决方案：

(1) “等待”

（2）“根你的手机，然后......”

（3）“从你的手机内存中删除一些东西”[解决方法，而不是解决方案]

(4) “买这个产品然后……”

* * *

好的，这是一个更新。我仍然没有设法解决这个问题。这是我到目前为止所做的。

1）我在 appinventor 中创建了一个名为“test123”的应用程序，带有一张图片和一个按钮（什么都不做）。

2) 我创建了一个 apk，并把它贴在我的网站上：你可以在[这个链接](http://www2.imperial.ac.uk/~buzzard/appinventor_problem/before/test123.apk)上看到它。任何想要下载并在手机上运行的人都可以，只要他们的手机上有 4 兆左右的可用内存。据我所知，他们无法将其下载到他们的 SD 卡上。因此，让我澄清一下，挑战在于将链接中的那个应用程序安装到手机 SD 卡上。

好的，让我们试试吧！

3）我把 apk 放在一个 linux 盒子上，下载[apktool](http://code.google.com/p/android-apktool/)，然后运行

```
apktool d test123.apk 
```

经过一点点 baksmaling，我现在有了一个目录 test123 。

4）我进入目录 test123 ，在那里我找到了一个文件 AndroidManifest.xml 。我编辑了这个文件；前几行是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="3" android:versionName="1.5" package="appinventor.ai_************.test123"
  xmlns:android="http://schemas.android.com/apk/res/android"> 
```

[我用 *** 审查了我的 gmail 地址]

我把它们改成

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="3" android:versionName="1.5" package="appinventor.ai_************.test123"
  xmlns:android="http://schemas.android.com/apk/res/android" android:installLocation="preferExternal"> 
```

5）我进入旧apk所在的目录（即包含目录test123的目录）并输入

```
apktool b test123 
```

在一些smaling之后，程序终止了。

6）我改成目录

```
test123/dist 
```

在其中我找到了一个新的 .apk 文件，也称为 test123.apk 。我把它放在我的网站[上](http://www2.imperial.ac.uk/~buzzard/appinventor_problem/after/test123.apk)。请注意，apk 的“之前 apktools”和“之后 apktools”版本具有完全相同的名称 - test123.apk 。

7）我现在将“之后”文件（由 apktool b 创建的版本）下载到 Windows 机器上，并用 7-Zip 打开它（切换到 Windows 只是为了让我可以使用答案中建议的精确程序） . 我找不到建议我删除的文件。我懂了

```
AndroidManifest.xml
classes.dex
resources.arsc
assets/smallkez.png
res/drawable/ya.png 
```

就是这样。

* * *

总之，我似乎在 DarkXphenomenon 解决方案的第 5 步失败了（在撰写本文时）。如果我将“after”文件下载到手机上并尝试安装它，我会收到令人难以置信的信息错误“！未安装应用程序”，我唯一的选择是单击“完成”。

不幸的是，我仍然不知道我是否正在尝试做不可能的事情，即谷歌搜索是否会导致人们找到曾经有效但不再有效的解决方案，或者我是否只是错过了一些愚蠢的事情。

这对我来说是一个根本性的问题！我的手机开箱即用，有大约 21 兆的可用内存，而我的 sd 卡有千兆字节和千兆字节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:49:54.950

**问题本身**：移动到 sd 卡选项显示为灰色。

![问题](../Images/8d10e77ea1d7f165537333693434c444.png)

**解决方案：**

目前，app-inventor 本身还不支持安装到外部 SD 功能。因此，您面临的问题是显示这一点的应用程序。

这种方法**确实**有效。我测试过了！我还将我使用的所有工具上传到我的 Google Drive 帐户以便于下载。

`test_orig.apk`是来自 app-inventor 的原始文件。

**步骤 1.**使用 apktool 反编译 APK。它可以在windows下使用apktool完成。 [这](https://docs.google.com/open?id=0BwTtSeDsboEFOVZndFpFQmY4bEk)是我在windows下使用的存档。无需对源进行解码即可编辑清单。因此，使用的命令是`apktool d -s test_orig.apk`

![反编译](../Images/fae1d7114f1a7af6fbf4bc65eb54adcf.png)

**第 2 步。**`test_orig`这将创建在包含 apktool 的同一目录中命名的文件夹。在这个目录中是文件夹`AndroidManifest.xml`。在文本编辑器中打开它并更改以下行。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"  ...android:installLocation="preferExternal"> 
```

![变更清单](../Images/dfed4b7d653b3aeef0ed137111ae9778.png)

**步骤 3.**是时候重新编译 apk 了`apktool b test_orig` ![重新编译](../Images/4a77d2fc9ab97f36512b404bbcd84eec.png)

**第 4 步**。现在，是时候签署它了。[使用Sign+](https://docs.google.com/open?id=0BwTtSeDsboEFMTlUNzRvUEIwTG8)可以轻松签名。只需添加 apk，它就会输出一个签名副本。没有其他事情需要做。

![签约](../Images/f3684029db9595848af88a96b3517106.png)

**第 5 步。**您的签名 apk 已准备好安装。**记得卸载你的旧apk**，否则你会看到一个错误，上面写着`Application Not Installed: An existing package with a conflicting signature exists.`

**最终结果：**

![结尾](../Images/32a25504e0128afe4e54ce339f0b6380.png)

已签名的应用程序可在[此处](https://docs.google.com/open?id=0BwTtSeDsboEFR2NQZ01GUDhZN3M)下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:45:49.907

这似乎是一个已知问题：

[http://code.google.com/p/app-inventor-for-android/issues/detail?id=186](http://code.google.com/p/app-inventor-for-android/issues/detail?id=186)

该线程中的某人说他们找到了解决方案，但如果我不得不猜测，我猜他们使用的解决方案是在 apk 文件中的清单被混淆之前。

不幸的是，我认为目前没有（简单的）方法可以将应用程序移动到 SD 卡。

[在MIT 应用程序发明者论坛](http://beta.appinventor.mit.edu/forum/index.html)上发布这个问题可能是值得的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:27:03.313

我需要经常挂在这里...

有两个第三方应用程序可让您编辑 mainfest。他们通过拆开 apk 并获取清单来完成您正在处理的工作，以便您可以对其进行编辑。

我提出了一个新版本的 ai4a App Inventor [http://sourceforge.net/projects/ai4a-configs/files/V1.2/](http://sourceforge.net/projects/ai4a-configs/files/V1.2/)

它将清单保存在您的临时文件夹中，您可以在其中编辑它，然后使用您编辑的清单重建 apk。我还没有测试安装到 sd 卡上（我在 Google TV 上放了一些 App Inventor 应用程序只是为了看看它是否工作 ;-)）。如果您尝试使用 ai4a 服务器，请务必告知我们。

这是我们谈论服务器的地方[https://groups.google.com/forum/?hl=en#!forum/ai4a](https://groups.google.com/forum/?hl=en#!forum/ai4a)

这里是支持[https://groups.google.com/forum/?hl=en#!forum/usgsuacwai](https://groups.google.com/forum/?hl=en#!forum/usgsuacwai)

加里

# iphone - facebook整合问题IOS

> ID：11418843
> 
> 赞同：0
> 
> 时间：2012-07-10T17:38:28.563
> 
> 标签：iphone, facebook

我正在尝试将 facebook 集成到我的 iOS 5 应用程序中。正如 facebook 文档中提到的，我正在按照他们提到的那样做所有事情。通常当facebook发起授权时，它会将用户带到浏览器打开facebook网站并要求进行身份验证。但在我的情况下，它会打开浏览器并立即返回应用程序。我不明白发生了什么。

它没有在facebook上发布任何内容。它只是过渡到本机应用程序，然后又回来了。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) 

{

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"SELECT uid, name, pic, email FROM user WHERE uid=me()", @"query",nil];

    [facebook requestWithMethodName:@"fql.query"
                          andParams:params
                      andHttpMethod:@"POST"
                        andDelegate:self];

    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];

    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"Facebook"
                              message:@"You are successfully signed in."
                              delegate:nil
                              cancelButtonTitle:nil
                              otherButtonTitles:nil,
                              nil];
    [self performSelector:@selector(dismissAlertView:) withObject:alertView afterDelay:2];
    [alertView show];

    NSLog(@"signed in");
       }

if (![facebook isSessionValid]) {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_likes", 
                            @"read_stream",
                            @"publish_stream",

                            nil];
    [facebook authorize:permissions];
    [permissions release];

} 
```

else if ([facebook isSessionValid]) { facebookOut.hidden=NO;

```
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:32:20.920

您是否尝试添加权限以由用户授权？？？类似的东西

```
 NSArray *permissions = [[NSArray alloc] initWithObjects:
        @"user_likes", 
        @"read_stream",
        nil];
   [facebook authorize:permissions];
   [permissions release]; 
```

# windows - cmake 创建解决方案时未链接 64 位可执行文件

> ID：11418864
> 
> 赞同：0
> 
> 时间：2012-07-10T17:39:59.270
> 
> 标签：windows, cmake, devenv

我正在使用 cmake 将项目从 linux 移植到 windows。该项目是 clapack 以及一些测试程序。当我构建 32 位版本时，一切正常。但是，当我使用 64 位编译器构建时，无法运行可执行文件。

我运行的命令是：

### 32位：

> ```
>  cmake .
>     devenv CLAPACK.sln /build 
> ```

### 64位：

> ```
>  cmake "-DARCH=x86-64_Windows-7_VC10" -G "Visual Studio 10 Win64"
>     devenv CLAPACK.sln /Rebuild "Release|x64" /project ALL_BUILD 
> ```

我正在运行 Windows 7 和 cmake 2.8.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:03:31.360

好吧，我不知道如何运行测试，但是程序在我的机器上启动得很好（我使用了`cmake`问题中的第二个命令，然后在 Visual Studio 2010 中打开了生成的解决方案文件并构建了整个解决方案）。安装程序完成后，我将使用 2010 SP1 重试。

* * *

所以这是我`RUN_TESTS`在 VS2010 SP1 中构建的输出。 `xeigtsts`通过没问题，但`xeigtstz`屡次失败。

```
1>  Test project C:/Users/BEN/Downloads/clapack-3.2.1-CMAKE/clapack-3.2.1-CMAKE
1>        Start  1: xblat1s
1>   1/94 Test  #1: xblat1s ..........................   Passed    0.15 sec
1>        Start  2: xblat1c
1>   2/94 Test  #2: xblat1c ..........................   Passed    0.03 sec
1>        Start  3: xblat1d
1>   3/94 Test  #3: xblat1d ..........................   Passed    0.02 sec
1>        Start  4: xblat1z
1>   4/94 Test  #4: xblat1z ..........................   Passed    0.02 sec
1>        Start  5: xblat2s
1>   5/94 Test  #5: xblat2s ..........................   Passed    0.06 sec
1>        Start  6: xblat2c
1>   6/94 Test  #6: xblat2c ..........................   Passed    0.07 sec
1>        Start  7: xblat2d
1>   7/94 Test  #7: xblat2d ..........................   Passed    0.07 sec
1>        Start  8: xblat2z
1>   8/94 Test  #8: xblat2z ..........................   Passed    0.10 sec
1>        Start  9: xblat3s
1>   9/94 Test  #9: xblat3s ..........................   Passed    0.07 sec
1>        Start 10: xblat3c
1>  10/94 Test #10: xblat3c ..........................   Passed    0.12 sec
1>        Start 11: xblat3d
1>  11/94 Test #11: xblat3d ..........................   Passed    0.05 sec
1>        Start 12: xblat3z
1>  12/94 Test #12: xblat3z ..........................   Passed    0.07 sec
1>        Start 13: xlintsts_stest_in
1>  13/94 Test #13: xlintsts_stest_in ................   Passed    2.43 sec
1>        Start 14: xlintstc_ctest_in
1>  14/94 Test #14: xlintstc_ctest_in ................   Passed    7.79 sec
1>        Start 15: xlintstd_dtest_in
1>  15/94 Test #15: xlintstd_dtest_in ................   Passed    2.24 sec
1>        Start 16: xlintstz_ztest_in
1>  16/94 Test #16: xlintstz_ztest_in ................   Passed    7.56 sec
1>        Start 17: xlintstds_dstest_in
1>  17/94 Test #17: xlintstds_dstest_in ..............   Passed    0.59 sec
1>        Start 18: xlintstzc_zctest_in
1>  18/94 Test #18: xlintstzc_zctest_in ..............   Passed    1.64 sec
1>        Start 19: xlintstrfs_stest_rfp_in
1>  19/94 Test #19: xlintstrfs_stest_rfp_in ..........   Passed    0.22 sec
1>        Start 20: xlintstrfd_dtest_rfp_in
1>  20/94 Test #20: xlintstrfd_dtest_rfp_in ..........   Passed    0.21 sec
1>        Start 21: xlintstrfc_ctest_rfp_in
1>  21/94 Test #21: xlintstrfc_ctest_rfp_in ..........   Passed    0.83 sec
1>        Start 22: xlintstrfz_ztest_rfp_in
1>  22/94 Test #22: xlintstrfz_ztest_rfp_in ..........   Passed    0.83 sec
1>        Start 23: xeigtsts_nep_in
1>  23/94 Test #23: xeigtsts_nep_in ..................   Passed    0.10 sec
1>        Start 24: xeigtsts_sep_in
1>  24/94 Test #24: xeigtsts_sep_in ..................   Passed    0.40 sec
1>        Start 25: xeigtsts_svd_in
1>  25/94 Test #25: xeigtsts_svd_in ..................   Passed    2.57 sec
1>        Start 26: xeigtsts_sec_in
1>  26/94 Test #26: xeigtsts_sec_in ..................   Passed    0.27 sec
1>        Start 27: xeigtsts_sed_in
1>  27/94 Test #27: xeigtsts_sed_in ..................   Passed    0.12 sec
1>        Start 28: xeigtsts_sgg_in
1>  28/94 Test #28: xeigtsts_sgg_in ..................   Passed    0.09 sec
1>        Start 29: xeigtsts_sgd_in
1>  29/94 Test #29: xeigtsts_sgd_in ..................   Passed    0.13 sec
1>        Start 30: xeigtsts_ssb_in
1>  30/94 Test #30: xeigtsts_ssb_in ..................   Passed    0.02 sec
1>        Start 31: xeigtsts_ssg_in
1>  31/94 Test #31: xeigtsts_ssg_in ..................   Passed    0.39 sec
1>        Start 32: xeigtsts_sbal_in
1>  32/94 Test #32: xeigtsts_sbal_in .................   Passed    0.02 sec
1>        Start 33: xeigtsts_sbak_in
1>  33/94 Test #33: xeigtsts_sbak_in .................   Passed    0.02 sec
1>        Start 34: xeigtsts_sgbal_in
1>  34/94 Test #34: xeigtsts_sgbal_in ................   Passed    0.02 sec
1>        Start 35: xeigtsts_sgbak_in
1>  35/94 Test #35: xeigtsts_sgbak_in ................   Passed    0.02 sec
1>        Start 36: xeigtsts_sbb_in
1>  36/94 Test #36: xeigtsts_sbb_in ..................   Passed    0.03 sec
1>        Start 37: xeigtsts_glm_in
1>  37/94 Test #37: xeigtsts_glm_in ..................   Passed    0.02 sec
1>        Start 38: xeigtsts_gqr_in
1>  38/94 Test #38: xeigtsts_gqr_in ..................   Passed    0.03 sec
1>        Start 39: xeigtsts_gsv_in
1>  39/94 Test #39: xeigtsts_gsv_in ..................   Passed    0.03 sec
1>        Start 40: xeigtsts_lse_in
1>  40/94 Test #40: xeigtsts_lse_in ..................   Passed    0.02 sec
1>        Start 41: xeigtstc_nep_in
1>  41/94 Test #41: xeigtstc_nep_in ..................   Passed    0.17 sec
1>        Start 42: xeigtstc_sep_in
1>  42/94 Test #42: xeigtstc_sep_in ..................   Passed    0.62 sec
1>        Start 43: xeigtstc_svd_in
1>  43/94 Test #43: xeigtstc_svd_in ..................   Passed    4.62 sec
1>        Start 44: xeigtstc_cec_in
1>  44/94 Test #44: xeigtstc_cec_in ..................   Passed    0.05 sec
1>        Start 45: xeigtstc_ced_in
1>  45/94 Test #45: xeigtstc_ced_in ..................   Passed    0.22 sec
1>        Start 46: xeigtstc_cgg_in
1>  46/94 Test #46: xeigtstc_cgg_in ..................   Passed    0.20 sec
1>        Start 47: xeigtstc_cgd_in
1>  47/94 Test #47: xeigtstc_cgd_in ..................   Passed    0.19 sec
1>        Start 48: xeigtstc_csb_in
1>  48/94 Test #48: xeigtstc_csb_in ..................   Passed    0.03 sec
1>        Start 49: xeigtstc_csg_in
1>  49/94 Test #49: xeigtstc_csg_in ..................   Passed    0.67 sec
1>        Start 50: xeigtstc_cbal_in
1>  50/94 Test #50: xeigtstc_cbal_in .................   Passed    0.04 sec
1>        Start 51: xeigtstc_cbak_in
1>  51/94 Test #51: xeigtstc_cbak_in .................   Passed    0.03 sec
1>        Start 52: xeigtstc_cgbal_in
1>  52/94 Test #52: xeigtstc_cgbal_in ................   Passed    0.02 sec
1>        Start 53: xeigtstc_cgbak_in
1>  53/94 Test #53: xeigtstc_cgbak_in ................   Passed    0.02 sec
1>        Start 54: xeigtstc_cbb_in
1>  54/94 Test #54: xeigtstc_cbb_in ..................   Passed    0.05 sec
1>        Start 55: xeigtstc_glm_in
1>  55/94 Test #55: xeigtstc_glm_in ..................   Passed    0.03 sec
1>        Start 56: xeigtstc_gqr_in
1>  56/94 Test #56: xeigtstc_gqr_in ..................   Passed    0.06 sec
1>        Start 57: xeigtstc_gsv_in
1>  57/94 Test #57: xeigtstc_gsv_in ..................   Passed    0.04 sec
1>        Start 58: xeigtstc_lse_in
1>  58/94 Test #58: xeigtstc_lse_in ..................   Passed    0.03 sec
1>        Start 59: xeigtstd_nep_in
1>  59/94 Test #59: xeigtstd_nep_in ..................   Passed    0.09 sec
1>        Start 60: xeigtstd_sep_in
1>  60/94 Test #60: xeigtstd_sep_in ..................   Passed    0.50 sec
1>        Start 61: xeigtstd_svd_in
1>  61/94 Test #61: xeigtstd_svd_in ..................   Passed    3.00 sec
1>        Start 62: xeigtstd_dec_in
1>  62/94 Test #62: xeigtstd_dec_in ..................   Passed    0.20 sec
1>        Start 63: xeigtstd_ded_in
1>  63/94 Test #63: xeigtstd_ded_in ..................   Passed    0.13 sec
1>        Start 64: xeigtstd_dgg_in
1>  64/94 Test #64: xeigtstd_dgg_in ..................   Passed    0.10 sec
1>        Start 65: xeigtstd_dgd_in
1>  65/94 Test #65: xeigtstd_dgd_in ..................   Passed    0.14 sec
1>        Start 66: xeigtstd_dsb_in
1>  66/94 Test #66: xeigtstd_dsb_in ..................   Passed    0.02 sec
1>        Start 67: xeigtstd_dsg_in
1>  67/94 Test #67: xeigtstd_dsg_in ..................   Passed    0.50 sec
1>        Start 68: xeigtstd_dbal_in
1>  68/94 Test #68: xeigtstd_dbal_in .................   Passed    0.02 sec
1>        Start 69: xeigtstd_dbak_in
1>  69/94 Test #69: xeigtstd_dbak_in .................   Passed    0.02 sec
1>        Start 70: xeigtstd_dgbal_in
1>  70/94 Test #70: xeigtstd_dgbal_in ................   Passed    0.02 sec
1>        Start 71: xeigtstd_dgbak_in
1>  71/94 Test #71: xeigtstd_dgbak_in ................   Passed    0.02 sec
1>        Start 72: xeigtstd_dbb_in
1>  72/94 Test #72: xeigtstd_dbb_in ..................   Passed    0.03 sec
1>        Start 73: xeigtstd_glm_in
1>  73/94 Test #73: xeigtstd_glm_in ..................   Passed    0.03 sec
1>        Start 74: xeigtstd_gqr_in
1>  74/94 Test #74: xeigtstd_gqr_in ..................   Passed    0.03 sec
1>        Start 75: xeigtstd_gsv_in
1>  75/94 Test #75: xeigtstd_gsv_in ..................   Passed    0.03 sec
1>        Start 76: xeigtstd_lse_in
1>  76/94 Test #76: xeigtstd_lse_in ..................   Passed    0.02 sec
1>        Start 77: xeigtstz_nep_in
1>  77/94 Test #77: xeigtstz_nep_in ..................***Failed   42.68 sec
1>        Start 78: xeigtstz_sep_in
1>  78/94 Test #78: xeigtstz_sep_in ..................***Failed    9.85 sec
1>        Start 79: xeigtstz_svd_in
1>  79/94 Test #79: xeigtstz_svd_in ..................***Failed    7.24 sec
1>        Start 80: xeigtstz_zec_in
1>  80/94 Test #80: xeigtstz_zec_in ..................***Failed    9.30 sec
1>        Start 81: xeigtstz_zed_in
1>  81/94 Test #81: xeigtstz_zed_in ..................***Failed    6.65 sec
1>        Start 82: xeigtstz_zgg_in
1>  82/94 Test #82: xeigtstz_zgg_in ..................***Failed    7.73 sec
1>        Start 83: xeigtstz_zgd_in
1>  83/94 Test #83: xeigtstz_zgd_in ..................***Failed    7.55 sec
1>        Start 84: xeigtstz_zsb_in
1>  84/94 Test #84: xeigtstz_zsb_in ..................***Failed    6.85 sec
1>        Start 85: xeigtstz_zsg_in
1>  85/94 Test #85: xeigtstz_zsg_in ..................***Failed    7.41 sec
1>        Start 86: xeigtstz_zbal_in
1>  86/94 Test #86: xeigtstz_zbal_in .................***Failed    7.36 sec
1>        Start 87: xeigtstz_zbak_in
1>  87/94 Test #87: xeigtstz_zbak_in .................***Failed    6.84 sec
1>        Start 88: xeigtstz_zgbal_in
1>  88/94 Test #88: xeigtstz_zgbal_in ................***Failed    7.31 sec
1>        Start 89: xeigtstz_zgbak_in
1>  89/94 Test #89: xeigtstz_zgbak_in ................***Failed    6.79 sec
1>        Start 90: xeigtstz_zbb_in
1>  90/94 Test #90: xeigtstz_zbb_in ..................***Failed    6.81 sec
1>        Start 91: xeigtstz_glm_in
1>  91/94 Test #91: xeigtstz_glm_in ..................***Failed    7.59 sec
1>        Start 92: xeigtstz_gqr_in
1>  92/94 Test #92: xeigtstz_gqr_in ..................***Failed    7.38 sec
1>        Start 93: xeigtstz_gsv_in
1>  93/94 Test #93: xeigtstz_gsv_in ..................***Failed    7.14 sec
1>        Start 94: xeigtstz_lse_in
1>  94/94 Test #94: xeigtstz_lse_in ..................***Failed    7.64 sec
1>  
1>  81% tests passed, 18 tests failed out of 94
1>  
1>  Total Test time (real) = 211.82 sec
1>  
1>  The following tests FAILED:
1>       77 - xeigtstz_nep_in (Failed)
1>       78 - xeigtstz_sep_in (Failed)
1>       79 - xeigtstz_svd_in (Failed)
1>       80 - xeigtstz_zec_in (Failed)
1>       81 - xeigtstz_zed_in (Failed)
1>       82 - xeigtstz_zgg_in (Failed)
1>       83 - xeigtstz_zgd_in (Failed)
1>       84 - xeigtstz_zsb_in (Failed)
1>       85 - xeigtstz_zsg_in (Failed)
1>       86 - xeigtstz_zbal_in (Failed)
1>       87 - xeigtstz_zbak_in (Failed)
1>       88 - xeigtstz_zgbal_in (Failed)
1>       89 - xeigtstz_zgbak_in (Failed)
1>       90 - xeigtstz_zbb_in (Failed)
1>       91 - xeigtstz_glm_in (Failed)
1>       92 - xeigtstz_gqr_in (Failed)
1>       93 - xeigtstz_gsv_in (Failed)
1>       94 - xeigtstz_lse_in (Failed)
1>  Errors while running CTest 
```

重建该项目并不能解决问题。dumpbin 说 PE 头是有效的。

当我在调试器中运行时，我肯定会得到大量的调试输出。堆栈溢出。我必须启用符号才能准确查看发生了什么。但首先，让我们看看 Debug 构建是否以同样的方式失败。

是的，它确实。测试用例被严重破坏，它试图使用数兆字节的自动变量，这些变量不适合堆栈。这是罪魁祸首：

```
doublecomplex a[243936] /* was [17424][14] */, b[87120] /* was [17424]
    [5] */, c__[160000] /* was [400][400] */; 
```

该项目已经调整为使用 10MB 的堆栈而不是默认的 1MB。在 x64 构建中，这仍然不够。将链接器选项更改为 后`/STACK:40000000`，崩溃就消失了。（这不是一个好的解决方案，最初扩展到 10MB 也不是一个好主意。不要使用大小可笑的自动变量，我们有动态和静态的生命周期。）

更改该测试的链接器选项后：

```
1>  100% tests passed, 0 tests failed out of 94
1>  
1>  Total Test time (real) =  48.98 sec 
```

# sql - SQL - GROUP BY 和 COALESCE 的丑陋组合

> ID：11418870
> 
> 赞同：6
> 
> 时间：2012-07-10T17:40:26.273
> 
> 标签：sql, group-by, sql-server-2000, max, coalesce

我有一个表格，其中的数据类似于以下内容：

### [ID]、[州]、[foo]、[DateCreated]、[DateUpdated]

我在这方面工作的时间越长，我的 SQL 就越难看，这告诉我我可能做错了什么。我想要的是每个州的唯一列表，只要该州的 foo 始终相同*（如果该州的所有记录的 foo 都不相同，我根本不想要该州）*。另外，我想合并 DateCreated 和 DateUpdated 并希望该状态的最大值。

因此，鉴于此数据：

```
[ID], [State], [foo], [DateCreated], [DateUpdated]
1,  MA, data1,  05/29/2012, 06/02/2012
2,  MA, data1,  05/29/2012, 06/03/2012
3,  RI, data2,  05/29/2012, NULL
4,  RI, data3,  05/29/2012, NULL
5,  NH, data4,  05/29/2012, NULL
6,  NH, data4,  05/29/2012, 06/05/2012 
```

我只想要这些结果：

```
[State], [foo], [LastUpdated]
MA, data1,  06/03/2012
NH, data4,  06/05/2012 
```

获得我所追求的最优雅的方式是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T17:52:43.413

另一个：

[http://sqlfiddle.com/#!6/fd219/1](http://sqlfiddle.com/#!6/fd219/1)

```
SELECT
  t.State,
  MAX(t.foo),
  MAX( COALESCE( t.DateUpdated, t.DateCreated ))
FROM t
GROUP BY t.State
HAVING COUNT(DISTINCT t.foo) = 1; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T17:57:19.667

一个带有嵌套查询的简单 Group by 就足够了：

```
Select State, coalesce(max_created,max_updated) from (
  Select State, min(foo) as min_foo, max(foo) as max_foo, 
    max(DateCreated) as max_created,
    max(DateUpdated) as max_updated
  From Data
  Group by State)
 Where min_foo = max_foo 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T17:57:06.377

不那么优雅，但对于你可怜的 SQL 2000 灵魂来说：

```
SELECT T1.State, T2.Foo, T1.LastUpdated
FROM (
    SELECT State, MAX([ID]) AS [ID], 
        MAX(COALESCE(DateUpdated, DateCreated)) AS LastUpdated
    FROM YourTable
    GROUP BY State
    HAVING COUNT(DISTINCT Foo) = 1
) T1 
INNER JOIN YourTable T2 ON T1.State = T2.State AND T1.[ID] = T2.[ID] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T17:48:39.503

假设您使用的是 SQL Server 2005 或 >

试试这个：

```
WITH Data AS
(
    SELECT  *,
        COALESCE([DateCreated], [DateUpdated]) AS LastUpdated,
        ROW_NUMBER() OVER(PARTITION BY State ORDER BY COALESCE([DateCreated], [DateUpdated]) DESC) Position
      FROM <YOUR-TABLE> a
     WHERE NOT EXISTS
     (
        SELECT  1 
            FROM    <YOUR-TABLE> b
         WHERE  a.State = b.State
            AND a.foo <> b.foo
     )
)
SELECT State, foo, LastUpdated
  FROM Data
 WHERE Positon = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-08T16:28:47.007

试试这个：

```
select state_name,foo,max(dateUpdated) from state where state_name in (select state_name from state group by state_name having count(distinct foo)=1) group by state_name,foo; 
```

# php - 嵌套的 foreach 循环，第一个循环不循环

> ID：11418875
> 
> 赞同：0
> 
> 时间：2012-07-10T17:40:43.400
> 
> 标签：php

我试图让我的数组在 foreach 循环中循环，但它一遍又一遍地循环同一个。我究竟做错了什么？

```
$classes = array('red', 'blue', 'yellow', 'green', 'black', 'purple', 'grey');
foreach($classes as $class){
foreach ($html->find('.yfnc_datamodoutline1 .yfnc_tabledata1') as $element){
    $symbols = $element->outertext;
    echo '<div class="'.$class.'">'.$symbols.'</div>';
} 
```

它输出这个

```
<div class="red">Jul 6, 2012</div>
<div class="red">12,889.40</div>
<div class="red">12,889.40</div>
<div class="red">12,702.99</div>
<div class="red">12,772.47</div>
<div class="red">967,600</div>
<div class="red">12,772.47</div> 
```

我试图让它输出这个

```
<div class="red">Jul 6, 2012</div>
<div class="blue">12,889.40</div>
<div class="yellow">12,889.40</div>
<div class="green">12,702.99</div>
<div class="black">12,772.47</div>
<div class="purple">967,600</div>
<div class="grey">12,772.47</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:42:35.540

您不能为此使用嵌套循环，而是使用颜色数组中的索引。

```
$classes = array('red', 'blue', 'yellow', 'green', 'black', 'purple', 'grey');
$ci = 0;
foreach ($html->find('.yfnc_datamodoutline1 .yfnc_tabledata1') as $element){
    $symbols = $element->outertext;
    echo '<div class="'.$classes[$ci].'">'.$symbols.'</div>';
    $ci++;
    if($ci == count($classes)) $ci = 0;
} 
```

# node.js - Node.js 示例原生扩展

> ID：11418878
> 
> 赞同：0
> 
> 时间：2012-07-10T17:41:01.153
> 
> 标签：node.js, native

我无法运行最简单的 Node.js 原生扩展类型，即 Hello World，我不知道为什么。

我在这里使用示例：[http ://nodejs.org/api/addons.html#addons_hello_world](http://nodejs.org/api/addons.html#addons_hello_world)

`node-gyp`运行得很好，但是当我在节点中尝试`require`它时，我得到一个错误：

```
  错误：无效参数
    在 Object..node (module.js:472:11)
    在 Module.load (module.js:348:31)
    在 Function._load (module.js:308:12)
    在 Module.require (module.js:354:17)
    在需要 (module.js:370:17)
    在回复：1:13
    在 REPLServer.eval (repl.js:80:21)
    在 repl.js:190:20
    在 REPLServer.eval (repl.js:87:5)
    在界面。(repl.js:182:12)

```

这是什么，在使用本机扩展时如何调试这样的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:57:24.080

此外，如果您有机会遵循此示例：[https ://www.cloudkick.com/blog/2010/aug/23/writing-nodejs-native-extensions/](https://www.cloudkick.com/blog/2010/aug/23/writing-nodejs-native-extensions/)

请记住，您给予的初始化函数`NODE_MODULE` **一定不能`static`**！似乎 Node.js 用于注册模块的自省库或其他机制不支持读取 C 中的静态函数（名称）。

希望这可以帮助遇到类似问题的每个人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:30:03.523

显然，在我将该`init`部分包装在一个`extern "C"`块中之后，该示例现在可以工作了。

现在一切都很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T16:50:28.410

[https://github.com/olalonde/node-notify](https://github.com/olalonde/node-notify)

自述文件中解释了所有内容。

# c# - 如何：当用户不编辑时刷新 PropertyGrid

> ID：11418882
> 
> 赞同：3
> 
> 时间：2012-07-10T17:41:05.720
> 
> 标签：c#, .net, winforms, propertygrid

这是我关于stackoverflow的第一个问题，所以如果我犯了任何错误，请多多包涵。

**背景：** 我有一个 Winform PropertyGrid，它显示来自相机对象的增益和曝光等状态。用户可以通过 PropertyGrid 轻松控制/编辑相机属性。同时，相机对象会定期从物理相机中查询最新状态，并通过 INotifyProperfyChanged 在 PropertyGrid 中进行刷新。

**问题：** 如果用户在属性网格上输入/编辑数据时发生刷新（例如输入新的快门时间值），焦点突然丢失，输入的值将被相机的新值替换。这导致了不友好的 UI 体验。

**问题：** 如何防止 PropertyGrid 在用户进行编辑时执行刷新？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:13:13.870

**编辑（1:54 PM CST）**：您想要的代码是这样的，因为您将包装更新代码/方法调用以在其中进行更新：

```
if(FindFocusedControl(this).GetType().ToString() != "GridViewEdit")
{

} 
```

这将检查活动控件（在本例中为 propertygrid 中的单元格）是否处于活动状态，如果为 true，则跳过嵌套代码。

* * *

使用[此 SO question and answer](https://stackoverflow.com/a/439606/771928)中的以下方法，您应该能够将执行更新的任何代码包装在 If 条件中，以检查正在聚焦/使用的控件。如果使用的控件是propertygrid，不要做任何事情。

```
 public static Control FindFocusedControl(Control control)
    {
        var container = control as ContainerControl;
        while (container != null)
        {
            control = container.ActiveControl;
            container = control as ContainerControl;
        }
        return control;

    } 
```

如果您想尝试，请将您的表格传递给它并查看结果：

```
var a = FindFocusedControl(this); 
```

由于您是新用户，如果这对您有用，您可以通过单击所提供答案左侧的复选标记来接受答案。这可以让其他用户在以后遇到您的问题时知道什么对您有用。

# android - 谷歌地图静态图像未显示（Android 浏览器）

> ID：11418884
> 
> 赞同：1
> 
> 时间：2012-07-10T17:41:08.840
> 
> 标签：android, html, google-maps, mobile, jquery-mobile

我正在使用 MetroWEB 测试我正在处理的移动页面，该页面使用 jQuery Mobile 1.1 作为框架。

您可以在以下位置找到相关页面：[Callaro's Mobile - Location](http://www.callarossteakhouse.com/_mobi/location.html)

现在，我以前真的从来没有做过移动页面，所以我基本上是边走边学。无论如何，我的问题是我的谷歌地图静态图像根本没有出现在我的移动浏览器上。我看到的只是一个巨大的白色正方形，中间有一个蓝色问号。

我遵循了 T 的 API 说明（或者至少我认为我做到了）。地图图像的直接链接和 img 标签在我的桌面上完美运行。有人知道这里的功能在哪里中断吗？

img 标签的构造如下：

```
<img width="300" height="300" src="http://maps.googleapis.com/maps/api/staticmap?center=717+Lake+Ave,Lake+Worth,FL&zoom=14&size=300x300&scale=2&markers=color:red|label:C|717+Lake+Ave,Lake+Worth,FL&sensor=false&key=AIzaSyCuOjnPNvw0HZhIWt0yQEeeXQn-GKfi7k8" style="display:block;width:300px;height:300px;margin:auto;" /> 
```

非常感谢您的帮助！

# java - 使用 DOM 解析器

> ID：11418885
> 
> 赞同：1
> 
> 时间：2012-07-10T17:41:13.660
> 
> 标签：java, xml, xml-parsing

我正在尝试使用以下代码解析 xml，我能够解析它并读取值。但我不确定如何修改代码以读取节点“INFO”，我已经转义了该节点并直接使用 PARAM如下：

XML

```
<?xml version="1.0" encoding="UTF-8"?>
<myxml>
  <id>23343</id>
  <INFO>
    <PARAM>
      <PARAM_NAME>data</PARAM_NAME>
      <PARAM_VALUE>345</PARAM_VALUE>
    </PARAM>
    <PARAM>
      <PARAM_NAME>CdataID</PARAM_NAME>
      <PARAM_VALUE>6788</PARAM_VALUE>
    </PARAM>
  </INFO>
</myxml> 
```

Java代码是：

```
 DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
      DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
      Document doc = dBuilder.parse(fXmlFile);
      doc.getDocumentElement().normalize();

      NodeList nList = doc.getElementsByTagName("PARAM");

      for (int temp = 0; temp < nList.getLength(); temp++) {
        Node nNode = nList.item(temp);
        if (nNode.getNodeType() == Node.ELEMENT_NODE) {
          Element eElement = (Element) nNode;
          if (getTagValue("PARAM_NAME",eElement).equals("data")) {
            String type = getTagValue("PARAM_VALUE", eElement);
          } 
        }
      }
    } catch (Exception e) {
      e.printStackTrace();
    }
  }

  private static String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();
    Node nValue = (Node) nlList.item(0);
    return nValue.getNodeValue();
  }
} 
```

我想添加INFO节点，如何修改上面的代码？

# python - 使用 Python 在 Mac OSX 中转义正斜杠路径目录？

> ID：11418886
> 
> 赞同：9
> 
> 时间：2012-07-10T17:41:14.373
> 
> 标签：python, path, directory, escaping

这是我的第二篇文章，如果我做错了什么，我深表歉意——我会尽量简洁。

我做了一些搜索，大多数转义必须处理嵌入的 JSON 字符串——我的问题实际上是打开文件本身。

目前，我正在尝试使我的代码尽可能通用，所以我正在使用：

```
file = open(os.path.expanduser(r'~/Desktop/Austin/Tweets/10_7_2012_12/09-Tweets.txt'), 'r') 
```

问题是，当解释器看到这段代码时，它会在文件名中看到“/”，我认为它试图进入另一个目录。我通过删除文件名中的“/”并键入以下内容来确认这一点：

```
file = open(os.path.expanduser(r'~/Desktop/Austin/Tweets/10_7_2012_1209-Tweets.txt'), 'r') 
```

它加载得很好。

对所有这些文件执行此操作的问题是我有数百个包含数千条推文的文件，这有点不切实际。

所以我的问题是：有没有办法加载文件*名*中带有正斜杠的文件？

我看到了很多使用搜索按钮加载文件的方法，但没有一种方法包括如何处理名称中的正斜杠......我试过了：

```
file = open(os.path.expanduser('~/Desktop/Austin/Tweets/10_7_2012_12\/09-Tweets.txt'), 'r') 
```

和

```
file = open(os.path.expanduser('~/Desktop/Austin/Tweets/10_7_2012_12//09-Tweets.txt'), 'r') 
```

一切都无济于事。

如果有人愿意教一个天真的本科生，欢迎解释 Python 如何处理正斜杠。

我在 Leopard 上使用 Mac OSX。我正在运行一个与 Twitter 流 API 通信的网络爬虫；名称中的斜线是用“/”保存它们以指定日期的结果。

解决方案：您可以在 Mac OSX 上的文件名中使用正斜杠。从文件系统的角度来看，/ 实际上是一个冒号，它在 Finder 中被转换为 /。

Kindall 的解释如下： Carbon 层是必需的，它使用标准的 Mac 文件名分隔符、冒号。历史上允许在 Mac 文件名中使用斜杠可以追溯到 1984 年。Mac 用户还希望看到冒号，而不是斜杠，作为 GUI 中的路径名分隔符（或者至少在 2001 年，当这种行为被制定时）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:57:44.997

我假设您使用的是类 Unix 操作系统，我的理解是在此类系统中的文件名中不允许使用正斜杠。如果你`ls`在，你会看到什么`~/Desktop/Austin/Tweets/`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:58:23.180

就个人而言，我宁愿对这些文件运行批量重命名工具。文件名中的斜杠通常是个坏主意。

否则，答案是`r'~/Desktop/Austin/Tweets/10_7_2012_12:09-Tweets.txt'`。参看。[OSX 文件名中的特殊字符？（Python os.rename）](https://stackoverflow.com/questions/1896442/special-characters-in-osx-filename-python-os-rename)

# powershell - 在 Start-Job 脚本块中指定 ComputerName 的问题

> ID：11418898
> 
> 赞同：1
> 
> 时间：2012-07-10T17:41:54.790
> 
> 标签：powershell

这是我正在尝试运行的脚本，其中 $servers = @("computer1","computer2")

```
$servers | % {
    Start-Job -ScriptBlock {param($c) Get-EventLog -LogName "Application" -Newest 10 -ComputerName $c} -ArgumentList $_
} 
```

我遇到的问题是这些工作将保持“运行”。我想这可能是传递参数的问题，所以我删除了脚本的那部分，就像这样-

```
$servers | % {
    Start-Job -ScriptBlock {param($c) Get-EventLog -LogName "Application" -Newest 10} -ArgumentList $_
} 
```

......它奏效了。然后我尝试指定计算机名（以验证它是一个参数传递问题），就像这样 -

```
$servers | % {
    Start-Job -ScriptBlock {param($c) Get-EventLog -LogName "Application" -Newest 10 -ComputerName "computer1"} -ArgumentList $_
} 
```

预期的效果是它可以在同一台服务器上获得两次远程事件。相反，我遇到了与以前相同的问题：脚本启动了 2 个作业，它们都永远处于运行状态。

任何想法或指示？

快速编辑：

我也尝试在远程机器上使用 Get-EventLog 而不尝试在作业中运行它。这很好用。

最终编辑：

从基思的回应看来，问题出在我的环境中。我将自行进一步排除故障并接受基思的回答，因为它指出了我的结论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:24:29.270

用这个怎么样？

```
$servers = @("computer1","computer2")

$servers | ForEach-Object {$comp = $_
           Start-Job -ScriptBlock {Get-EventLog -LogName "Application" -Newest 10 -ComputerName $input} -InputObject $comp} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:12:58.777

对于它的价值，我无法在 PowerShell V2 或 V3 上重现此错误：

```
8# 'build3','build5' | %{ Start-Job -ScriptBlock {param($c) Get-EventLog -LogName "Application" -Newest 10 -Comput
erName $c} -ArgumentList $_}

Id              Name            State      HasMoreData     Location             Command
--              ----            -----      -----------     --------             -------
5               Job5            Running    True            localhost            param($c)...
7               Job7            Running    True            localhost            param($c)...

9# Get-Job

Id              Name            State      HasMoreData     Location             Command
--              ----            -----      -----------     --------             -------
1               Job1            Failed     False           localhost            param($c)...
3               Job3            Completed  False           localhost            param($c)...
5               Job5            Completed  True            localhost            param($c)...
7               Job7            Completed  True            localhost            param($c)...

10# Receive-Job -id 5

   Index Time          EntryType   Source                 InstanceID Message
   ----- ----          ---------   ------                 ---------- -------
 1397893 Jul 20 15:47  Warning     Group Policy Inte...   2248216579 The description for Event ID '-2046750717' in S...
 1397892 Jul 20 15:47  Warning     Group Policy Regi...   2248216579 The description for Event ID '-2046750717' in S... 
```

可能是配置问题。您是否在服务器上运行了远程注册表服务？此外，您可以在作业上运行 Receive-Job，即使它们正在运行以获取中间输出和错误。也许一些错误信息将有助于追查问题。

# eclipse - 从本地 Git 存储库导入 Eclipse/EGit？

> ID：11418905
> 
> 赞同：2
> 
> 时间：2012-07-10T17:42:16.967
> 
> 标签：eclipse, git, grails, egit

我似乎无法弄清楚这一点。我一直在导入，但我没有从 repo 中得到任何文件。

我有一个本地存储库，其中包含一个我签入的 grails 项目。现在，我想将这些文件放到 eclipse 中的一个新项目中。（使用 EGit）。

我尝试了几种不同的方法，但我得到的只是一个空的 grails 项目。我可以在 git repo 浏览器中看到包含所有源代码的源代码树。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:02:15.093

我通常这样做：

*   将现有项目导入 Eclipse（可能你必须做一些导入现有 Grails 项目，具体取决于插件），然后选择项目目录（也恰好是 Git 存储库）

*导入项目后，Eclipse 仍然不知道 Git 存储库*。

要解决这个问题：

*   右键单击项目
*   选择团队 -> 分享
*   在下一个对话框中选择 Git
*   单击下一步一两次，您就完成了。

# delphi - 将 Delphi XE2 ADO 组件与 SQLOLEDB.1 提供程序一起使用是否存在已知问题？

> ID：11418906
> 
> 赞同：3
> 
> 时间：2012-07-10T17:42:25.667
> 
> 标签：delphi, ado, delphi-xe2

我正在尝试解决与我的应用程序的新版本有关的问题。症状是应用程序在尝试使用 TADOQuery.ExecSQL 更新 SQL 表中的行时，在 SQLOLEDB.dll 中出现访问冲突异常。

我无法在我的开发环境中重现该问题，我所在组织的 QA 团队也没有。不过，我们的用户一直在努力打击它。

此问题版本与其前身之间的两个重大变化是 1) 我们从 Delphi 2006 迁移到 DXE2 和 2) 我们从 XPSP3 切换到 Win7SP1 作为构建环境。用户仍在 XPSP3 上，处于非常严格控制的变更管理制度中。

编辑添加：madExcept 错误报告

```
date/time         : 2012-06-27, 08:24:18, 775ms
computer name     : 
user name         : 
registered owner  : 
operating system  : Windows XP Service Pack 3 build 2600
system language   : English
system up time    : 48 minutes 7 seconds
program up time   : 7 minutes 48 seconds
processors        : 2x Intel(R) Core(TM)2 Duo CPU E8400 @ 3.00GHz
physical memory   : 854/2030 MB (free/total)
free disk space   : (C:) 47.30 GB
display mode      : 1024x768, 32 bit
process id        : $3d4
allocated memory  : 14.44 MB
command line      : 
executable        : xxxxxxxxxxxxxxxxx.exe
exec. date/time   : 2012-06-15 11:39
version           : 3.5.0.24
compiled with     : Delphi XE2
madExcept version : 3.0n
contact name      : 
contact email     : 
callstack crc     : $4dd03195, $4d9f14cf, $4d9f14cf
exception number  : 1
exception class   : EAccessViolation
exception message : Access violation at address 4DD03195 in module 'sqloledb.dll'. Read of address 03217000.

main thread ($938):
4dd03195 +000 sqloledb.dll
007e71d9 +091 xxxxxxxxxxxxxxxxx.exe Data.Win.ADODB              TADOCommand.Execute
007f08a5 +03d xxxxxxxxxxxxxxxxx.exe Data.Win.ADODB              TADOQuery.ExecSQL
00825f6a +5fa xxxxxxxxxxxxxxxxx.exe uauthorization    1528  +74 TAuthorization.SynchAuthToSQL
00822fd7 +d43 xxxxxxxxxxxxxxxxx.exe uauthorization    1228 +148 TAuthorization.Save
00b656a2 +15a xxxxxxxxxxxxxxxxx.exe form              1489  +33 TfrmMain.CreateOrEditAuthorization
00b6600f +02b xxxxxxxxxxxxxxxxx.exe form              1641   +2 TfrmMain.actEditAuthorizationExecute
0048834f +00f xxxxxxxxxxxxxxxxx.exe System.Classes              TBasicAction.Execute
004f4441 +031 xxxxxxxxxxxxxxxxx.exe Vcl.ActnList                TContainedAction.Execute
004f522c +050 xxxxxxxxxxxxxxxxx.exe Vcl.ActnList                TCustomAction.Execute
00488213 +013 xxxxxxxxxxxxxxxxx.exe System.Classes              TBasicActionLink.Execute
00508a00 +058 xxxxxxxxxxxxxxxxx.exe Vcl.Controls                TControl.Click
006dbd31 +051 xxxxxxxxxxxxxxxxx.exe AdvGlowButton     3040   +9 TAdvCustomGlowButton.Click
00508ec1 +065 xxxxxxxxxxxxxxxxx.exe Vcl.Controls                TControl.WMLButtonUp
006dca97 +397 xxxxxxxxxxxxxxxxx.exe AdvGlowButton     3508 +126 TAdvCustomGlowButton.WMLButtonUp
005084bc +2d4 xxxxxxxxxxxxxxxxx.exe Vcl.Controls                TControl.WndProc
0050ce07 +5b3 xxxxxxxxxxxxxxxxx.exe Vcl.Controls                TWinControl.WndProc
0050c45c +02c xxxxxxxxxxxxxxxxx.exe Vcl.Controls                TWinControl.MainWndProc
00489044 +014 xxxxxxxxxxxxxxxxx.exe System.Classes              StdWndProc
7e418a0b +00a USER32.dll                                        DispatchMessageW
005eb023 +0f3 xxxxxxxxxxxxxxxxx.exe Vcl.Forms                   TApplication.ProcessMessage
005eb066 +00a xxxxxxxxxxxxxxxxx.exe Vcl.Forms                   TApplication.HandleMessage
005eb399 +0c9 xxxxxxxxxxxxxxxxx.exe Vcl.Forms                   TApplication.Run
00b84f68 +0ac xxxxxxxxxxxxxxxxx.exe xxxxxxxxxxxxxxxxx   64   +8 initialization

thread $1054:
7c90daa8 +0a ntdll.dll                       NtReplyWaitReceivePortEx
004bc199 +0d xxxxxxxxxxxxxxxxx.exe madExcept CallThreadProcSafe
004bc203 +37 xxxxxxxxxxxxxxxxx.exe madExcept ThreadExceptFrame
>> created by main thread ($938) at:
77e7d10d +00 RPCRT4.dll

thread $1028:
7c90df48 +00a ntdll.dll                       NtWaitForMultipleObjects004bc199 +00d xxxxxxxxxxxxxxxxx.exe madExcept CallThreadProcSafe
004bc203 +037 xxxxxxxxxxxxxxxxx.exe madExcept ThreadExceptFrame
>> created by main thread ($938) at:
5b891d46 +1f1 NETAPI32.dll                    Netbios

thread $1058:
7c90df58 +0a ntdll.dll                       NtWaitForSingleObject
7c8025d5 +85 kernel32.dll                    WaitForSingleObjectEx
7c80253d +0d kernel32.dll                    WaitForSingleObject
004bc199 +0d xxxxxxxxxxxxxxxxx.exe madExcept CallThreadProcSafe
004bc203 +37 xxxxxxxxxxxxxxxxx.exe madExcept ThreadExceptFrame
>> created by main thread ($938) at:
76663fb6 +00 comsvcs.dll

thread $1384:
7c90daa8 +0a ntdll.dll                       NtReplyWaitReceivePortEx
004bc199 +0d xxxxxxxxxxxxxxxxx.exe madExcept CallThreadProcSafe
004bc203 +37 xxxxxxxxxxxxxxxxx.exe madExcept ThreadExceptFrame
>> created by thread $1054 at:
77e7d10d +00 RPCRT4.dll

modules:
00400000 xxxxxxxxxxxxxxxxx.exe 3.5.0.24         \\xxxxxxxxxxx\xxxxxxxx\xxxx
02bd0000 msadcer.dll           2.81.1132.0      C:\Program Files\Common Files\System\msadc
02ee0000 SQLOLEDB.RLL          2000.85.1132.0   C:\Program Files\Common Files\System\Ole DB
03340000 xpsp2res.dll          5.1.2600.5512    C:\WINDOWS\system32
10000000 sxwmon32.dll          4.4.1401.0       C:\WINDOWS\system32
4dd00000 sqloledb.dll          2000.85.1132.0   C:\Program Files\Common Files\System\Ole DB
4de10000 msado15.dll           2.81.3012.0      C:\Program Files\Common Files\System\ado
4ec50000 gdiplus.dll           5.2.6002.22791   C:\WINDOWS\WinSxS\x86_Microsoft.Windows.GdiPlus_6595b64144ccf1df_1.0.6002.22791_x-ww_c8dff154
5ad70000 uxtheme.dll           6.0.2900.5512    C:\WINDOWS\system32
5b860000 NETAPI32.dll          5.1.2600.5694    C:\WINDOWS\system32
5edd0000 olepro32.dll          5.1.2600.5512    C:\WINDOWS\system32
605d0000 mslbui.dll            5.1.2600.5512    C:\WINDOWS\system32
60e30000 MSDATL3.dll           2.81.1132.0      C:\Program Files\Common Files\System\Ole DB
61880000 oleacc.dll            7.0.2600.6153    C:\WINDOWS\system32
662b0000 hnetcfg.dll           5.1.2600.5512    C:\WINDOWS\system32
68000000 rsaenh.dll            5.1.2600.5507    C:\WINDOWS\system32
68100000 dssenh.dll            5.1.2600.5507    C:\WINDOWS\system32
6d4f0000 DBNETLIB.DLL          2000.85.1132.0   C:\WINDOWS\system32
71a50000 mswsock.dll           5.1.2600.5625    C:\WINDOWS\System32
71a90000 wshtcpip.dll          5.1.2600.5512    C:\WINDOWS\System32
71aa0000 WS2HELP.dll           5.1.2600.5512    C:\WINDOWS\system32
71ab0000 WS2_32.dll            5.1.2600.5512    C:\WINDOWS\system32
71ad0000 wsock32.dll           5.1.2600.5512    C:\WINDOWS\system32
71f80000 security.dll          5.1.2600.5512    C:\WINDOWS\system32
73000000 winspool.drv          5.1.2600.5512    C:\WINDOWS\system32
73160000 oledb32.dll           2.81.1132.0      C:\Program Files\Common Files\System\Ole DB
73bc0000 dciman32.dll          5.1.2600.5512    C:\WINDOWS\system32
74060000 msadce.dll            2.81.3002.0      C:\Program Files\Common Files\System\msadc
74720000 MSCTF.dll             5.1.2600.5512    C:\WINDOWS\system32
74e30000 RICHED20.DLL          5.30.23.1230     C:\WINDOWS\system32
750b0000 RESUTILS.DLL          5.1.2600.5512    C:\WINDOWS\system32
750f0000 MTXCLU.DLL            2001.12.4414.706 C:\WINDOWS\system32
75130000 colbact.DLL           2001.12.4414.700 C:\WINDOWS\system32
75350000 OLEDB32R.DLL          2.81.1132.0      C:\Program Files\Common Files\System\Ole DB
755c0000 msctfime.ime          5.1.2600.5512    C:\WINDOWS\system32
76360000 WINSTA.dll            5.1.2600.5512    C:\WINDOWS\system32
76380000 msimg32.dll           5.1.2600.5512    C:\WINDOWS\system32
76390000 IMM32.DLL             5.1.2600.5512    C:\WINDOWS\system32
763b0000 comdlg32.dll          6.0.2900.5512    C:\WINDOWS\system32
765b0000 MSDART.DLL            2.81.1132.0      C:\WINDOWS\system32
76620000 comsvcs.dll           2001.12.4414.702 C:\WINDOWS\system32
76790000 cryptdll.dll          5.1.2600.5512    C:\WINDOWS\system32
767a0000 ntdsapi.dll           5.1.2600.5512    C:\WINDOWS\system32
767f0000 schannel.dll          5.1.2600.6175    C:\WINDOWS\system32
769c0000 USERENV.dll           5.1.2600.5512    C:\WINDOWS\system32
76b40000 winmm.dll             5.1.2600.6160    C:\WINDOWS\system32
76d10000 CLUSAPI.DLL           5.1.2600.5512    C:\WINDOWS\system32
76d60000 iphlpapi.dll          5.1.2600.5512    C:\WINDOWS\system32
76f20000 DNSAPI.dll            5.1.2600.6089    C:\WINDOWS\system32
76f50000 wtsapi32.dll          5.1.2600.5512    C:\WINDOWS\system32
76f60000 WLDAP32.dll           5.1.2600.5512    C:\WINDOWS\system32
76fb0000 winrnr.dll            5.1.2600.5512    C:\WINDOWS\System32
76fc0000 rasadhlp.dll          5.1.2600.5512    C:\WINDOWS\system32
76fd0000 CLBCATQ.DLL           2001.12.4414.700 C:\WINDOWS\system32
77050000 COMRes.dll            2001.12.4414.700 C:\WINDOWS\system32
77120000 oleaut32.dll          5.1.2600.6058    C:\WINDOWS\system32
773d0000 comctl32.dll          6.0.2900.6028    C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.6028_x-ww_61e65202
774e0000 ole32.dll             5.1.2600.6168    C:\WINDOWS\system32
77a80000 crypt32.dll           5.131.2600.6149  C:\WINDOWS\system32
77b20000 MSASN1.dll            5.1.2600.5875    C:\WINDOWS\system32
77c00000 version.dll           5.1.2600.5512    C:\WINDOWS\system32
77c10000 msvcrt.dll            7.0.2600.5512    C:\WINDOWS\system32
77c70000 msv1_0.dll            5.1.2600.5876    C:\WINDOWS\system32
77dd0000 ADVAPI32.dll          5.1.2600.5755    C:\WINDOWS\system32
77e70000 RPCRT4.dll            5.1.2600.6022    C:\WINDOWS\system32
77f10000 GDI32.dll             5.1.2600.5698    C:\WINDOWS\system32
77f60000 SHLWAPI.dll           6.0.2900.5912    C:\WINDOWS\system32
77fe0000 Secur32.dll           5.1.2600.5834    C:\WINDOWS\system32
7c800000 kernel32.dll          5.1.2600.5781    C:\WINDOWS\system32
7c900000 ntdll.dll             5.1.2600.6055    C:\WINDOWS\system32
7c9c0000 shell32.dll           6.0.2900.6072    C:\WINDOWS\system32
7e410000 USER32.dll            5.1.2600.5512    C:\WINDOWS\system32

processes:
0000 Idle                  0   0
0004 System                0   0
07dc smss.exe              0   0
0284 csrss.exe             0   0
0320 winlogon.exe          0   0
0368 services.exe          0   0
0374 lsass.exe             0   0
0440 ati2evxx.exe          0   0
0450 svchost.exe           0   0
04ac svchost.exe           0   0
0550 svchost.exe           0   0
05ac svchost.exe           0   0
064c svchost.exe           0   0
0674 DVService.exe         0   0
06d8 spoolsv.exe           0   0
0758 ac.sharedstore.exe    0   0
0770 scardsvr.exe          0   0
0118 BESClient.exe         0   0
023c BESClientHelper.exe   0   0
02d8 FireSvc.exe           0   0
02ec PMService.exe         0   0
0310 HIPSvc.exe            0   0
03b4 EngineServer.exe      0   0
04c0 FrameworkService.exe  0   0
05c0 VsTskMgr.exe          0   0
0614 mdm.exe               0   0
06b0 mfevtps.exe           0   0
07ac NwmSvc.exe            0   0
00f8 scomc.exe             0   0
01b0 Svchost32.exe         0   0
0224 naPrdMgr.exe          0   0
0288 uphclean.exe          0   0
0294 VergenceLocator.exe   0   0
0538 WakeUpAgt.exe         0   0
0814 Mcshield.exe          0   0
095c CcmExec.exe           0   0
097c mfeann.exe            0   0
0984 alg.exe               0   0
0be0 wmiprvse.exe          0   0
0db0 wmiprvse.exe          0   0
0c04 acevents.exe          0   0
0de0 ati2evxx.exe          0   0
05fc Explorer.EXE          342 235 normal C:\WINDOWS
0908 NWMCLI.EXE            14  6   normal C:\Program Files\1E\Agent\NightWatchman
0f40 RTNotify.exe          65  35  normal C:\Program Files\Lumension\Endpoint Security\Client
00dc MOM.exe               11  15  normal C:\Program Files\ATI Technologies\ATI.ACE\Core-Static
0ce4 BGinfo.exe            54  47  normal C:\WINDOWS\system32
021c smax4pnp.exe          19  7   normal C:\Program Files\Analog Devices\Core
0c34 Clagent.exe           47  23  normal C:\Program Files\Vista\Broker
0f38 UdaterUI.exe          52  41  normal C:\Program Files\McAfee\Common Framework
0c10 GrooveMonitor.exe     11  4   normal C:\Program Files\Microsoft Office\Office12
0e74 McTray.exe            123 113 normal C:\Program Files\McAfee\Common Framework
0d8c FireTray.exe          37  17  normal C:\Program Files\McAfee\Host Intrusion Prevention
0b70 acevents.exe          11  9   normal C:\Program Files\ActivIdentity\ActivClient
0378 accrdsub.exe          50  22  normal C:\Program Files\ActivIdentity\ActivClient
057c DVTrayApp.exe         22  14  normal C:\Program Files\Tumbleweed\Desktop Validator
0a74 ctfmon.exe            103 49  normal C:\WINDOWS\system32
0fc0 acsagent.exe          23  19  normal C:\Program Files\ActivIdentity\ActivClient
0580 BESClientUI.exe       121 91  normal C:\Program Files\BigFix Enterprise\BES Client
0f54 OUTLOOK.EXE           463 267 normal C:\Program Files\Microsoft Office\Office12
0474 ccc.exe               44  51  normal C:\Program Files\ATI Technologies\ATI.ACE\Core-Static
147c xxxxxxxxx.EXE         246 331 normal \\xxxxxxxxxx\xxxx\xxxx
1580 C2W_CM.exe            8   5   normal C:\Program Files\Sentillion\DesktopComponents\COMAdapters
0a0c r2win.exe             214 117 normal C:\Program Files\Attachmate\Reflection
14fc WINWORD.EXE           268 105 normal C:\Program Files\Microsoft Office\Office12
03d4 xxxxxxxxxxxxxxxxx.exe 216 151 normal \\xxxxxxxxxxx\xxxxxxxx\xxxx

hardware:
+ Computer
  - ACPI Multiprocessor PC
+ Disk drives
  - SAMSUNG HD083GJ
+ Display adapters
  - ATI Radeon HD 3450 - Dell Optiplex (driver 8.513.1.0)
  - ConfigMgr Remote Control Driver
+ DVD/CD-ROM drives
  - HL-DT-ST DVD+-RW GT10N
+ Human Interface Devices
  - USB Human Interface Device
  - USB Human Interface Device
+ IDE ATA/ATAPI controllers
  - Intel(R) ICH10 Family 2 port Serial ATA Storage Controller 2 - 3A06 (driver 9.0.0.1005)
  - Intel(R) ICH10 Family 4 port Serial ATA Storage Controller 1 - 3A00 (driver 9.0.0.1005)
  - Primary IDE Channel
  - Primary IDE Channel
  - Secondary IDE Channel
  - Secondary IDE Channel
  - Standard Dual Channel PCI IDE Controller
+ Keyboards
  - HID Keyboard Device
+ Mice and other pointing devices
  - HID-compliant mouse
+ Monitors
  - Plug and Play Monitor
  - Plug and Play Monitor
+ Network adapters
  - Intel(R) 82567LM-3 Gigabit Network Connection (driver 10.3.39.0)
+ Ports (COM & LPT)
  - Communications Port (COM1)
  - ECP Printer Port (LPT1)
  - Intel(R) Remote PC Assist Technology - SOL (COM4) (driver 5.5.0.1057)
+ Processors
  - Intel(R) Core(TM)2 Duo CPU     E8400  @ 3.00GHz
  - Intel(R) Core(TM)2 Duo CPU     E8400  @ 3.00GHz
+ Smart card readers
  - Smart Card Reader Keyboard (driver 1.0.0.2)
+ Sound, video and game controllers
  - Audio Codecs
  - Legacy Audio Drivers
  - Legacy Video Capture Devices
  - Media Control Devices
  - SoundMAX Integrated Digital High Definition Audio (driver 5.10.1.5851)
  - Video Codecs
+ System devices
  - ACPI Fixed Feature Button
  - ACPI Power Button
  - Direct memory access controller
  - High precision event timer
  - Intel(R) 4 Series Chipset PCI Express Root Port - 2E11 (driver 9.0.0.1009)
  - Intel(R) 4 Series Chipset Processor to I/O Controller - 2E10 (driver 9.0.0.1009)
  - Intel(R) 82801 PCI Bridge - 244E (driver 7.0.0.1011)
  - Intel(R) ICH10 Family PCI Express Root Port 1 - 3A70 (driver 9.0.0.1009)
  - Intel(R) ICH10 Family PCI Express Root Port 2 - 3A72 (driver 9.0.0.1009)
  - Intel(R) ICH10 Family SMBus Controller - 3A60 (driver 9.0.0.1005)
  - Intel(R) ICH10D LPC Interface Controller - 3A1A (driver 9.0.0.1009)
  - Intel(R) Management Engine Interface
  - ISAPNP Read Data Port
  - Logical Disk Manager
  - Microcode Update Device
  - Microsoft ACPI-Compliant System
  - Microsoft System Management BIOS Driver
  - Microsoft UAA Bus Driver for High Definition Audio
  - Microsoft Windows Management Interface for ACPI
  - Numeric data processor
  - OpenManage Client Instrumentation device driver (driver 7.6.0.732)
  - PCI bus
  - Plug and Play Software Device Enumerator
  - Printer Port Logical Interface
  - Programmable interrupt controller
  - System board
  - System CMOS/real time clock
  - System speaker
  - System timer
  - Terminal Server Device Redirector
  - Terminal Server Keyboard Driver
  - Terminal Server Mouse Driver
  - Volume Manager
+ Universal Serial Bus controllers
  - Intel(R) ICH10 Family USB Enhanced Host Controller - 3A6A (driver 9.0.0.1005)
  - Intel(R) ICH10 Family USB Enhanced Host Controller - 3A6C (driver 9.0.0.1005)
  - Intel(R) ICH10 Family USB Universal Host Controller - 3A64 (driver 9.0.0.1005)
  - Intel(R) ICH10 Family USB Universal Host Controller - 3A65 (driver 9.0.0.1005)
  - Intel(R) ICH10 Family USB Universal Host Controller - 3A66 (driver 9.0.0.1005)
  - Intel(R) ICH10 Family USB Universal Host Controller - 3A67 (driver 9.0.0.1005)
  - Intel(R) ICH10 Family USB Universal Host Controller - 3A68 (driver 9.0.0.1005)
  - Intel(R) ICH10 Family USB Universal Host Controller - 3A69 (driver 9.0.0.1005)
  - USB Composite Device
  - USB Root Hub
  - USB Root Hub
  - USB Root Hub
  - USB Root Hub
  - USB Root Hub
  - USB Root Hub
  - USB Root Hub
  - USB Root Hub

cpu registers:
eax = 00000ff8
ebx = 03206e38
ecx = 0000007d
edx = 00000ff8
esi = 03216ffd
edi = 03209244
eip = 4dd03195
esp = 0012e520
ebp = 0012e650

stack dump:
0012e520  20 94 0c 03 00 00 00 00 - 00 00 00 00 02 02 02 02  ................
0012e530  20 94 0c 03 02 02 02 02 - 02 02 02 02 02 02 02 4f  ...............O
0012e540  4c 45 44 42 53 53 44 65 - f1 71 21 03 64 34 00 00  LEDBSSDe.q!.d4..
0012e550  00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
0012e560  33 64 34 00 00 00 00 00 - 00 00 00 00 0b 6c 00 00  3d4..........l..
0012e570  90 ed 12 00 38 00 00 00 - 78 3b 20 03 18 d6 20 03  ....8...x;......
0012e580  9b 4c d4 4d 78 3b 20 03 - ff 03 00 00 1f 5f fe 77  .L.Mx;......._.w
0012e590  d8 e5 12 00 37 5f fe 77 - 00 00 00 00 02 02 02 02  ....7_.w........
0012e5a0  02 02 02 02 02 02 02 02 - 02 02 02 00 c0 e5 12 00  ................
0012e5b0  d5 48 12 77 06 c4 13 77 - 00 00 00 00 00 00 00 00  .H.w...w........
0012e5c0  0a 00 00 00 00 00 00 00 - ec f0 12 00 e8 e8 12 00  ................
0012e5d0  c0 33 0e 03 09 04 00 00 - 00 00 00 00 2c e6 12 00  .3..........,...
0012e5e0  e5 c0 13 77 09 04 00 00 - 00 00 00 00 06 00 00 00  ...w............
0012e5f0  ec f0 12 00 e8 e8 12 00 - 01 00 00 00 ff 1f 00 00  ................
0012e600  00 00 00 00 01 00 00 00 - 00 00 00 00 00 00 00 00  ................
0012e610  01 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
0012e620  00 00 00 00 75 e6 12 00 - 00 00 00 00 84 e6 12 01  ....u...........
0012e630  84 e6 12 00 ad 02 15 77 - 5c e6 12 00 74 e6 12 00  .......w\...t...
0012e640  00 00 08 00 4c e6 12 00 - 02 02 02 02 0b 6c 00 00  ....L........l..
0012e650  78 e6 12 00 89 75 d2 4d - 20 94 0c 03 e0 c8 20 03  x....u.M........

disassembling:
[...]
00825f59        mov     eax, [eax]
00825f5b        call    -$34dc4 ($7f119c)      ; dssLog.TLogFile.Add00825f60 1528   mov     eax, [$b94e44]
00825f65        mov     eax, [eax]
00825f67        mov     eax, [eax+$64]
00825f6a      > call    -$35707 ($7f0868)      ; Data.Win.ADODB.TADOQuery.ExecSQL
00825f6f 1529   mov     eax, [$b944bc]
00825f74        mov     eax, [eax]
00825f76        mov     edx, $8269a8
00825f7b        call    -$34de4 ($7f119c)      ; dssLog.TLogFile.Add00825f80 1531   mov     eax, [$b94e44]
[...]

error details: 
```

编辑添加：发生崩溃的过程（对不起，它是一些没有保留缩进的 vcs 合并的受害者）。违规行是`dmSQL.adoGenericQuery.ExecSQL;`结束之前的行：

```
procedure TAuthorization.SynchAuthToSQL(sStationIFN:string='';bForceUpdate:boolean=false);
const
  CountQuery = 'select count(*) from DSS_Authorizations'+
    ' where AuthIEN = :authIEN '+
    ' and authstationifn = :stationIFN' +
    ' and patientien = :patientIEN ';
var
    sStart,sEnd:string;
    sDxStripped: string;
  i: integer;
begin
    log.add('Synch Auth to SQL: '+FAuthIEN);
    if FAuthIEN = '' then
        exit;
    if sStationIFN = '' then
    sStationIFN := dmBroker.CurrentVistaStation.StationNumber;
    sStart := FormatDateTime('mm/dd/yyyy',FMDateTimeToTDateTime(FAuthFromDateVista));
    sEnd := FormatDateTime('mm/dd/yyyy',FMDateTimeToTDateTime(FAuthToDateVista));

    log.add('Begin auth count');
    //First the main authorizations part
  dmSQL.adoGenericQuery.SQL.Text := CountQuery;
  with dmSQL.adoGenericQuery.Parameters do
  begin
    FindParam('authIEN').Value := FAuthIEN;
    FindParam('stationIFN').Value := sStationIFN;
    FindParam('patientIEN').Value := FPatient.InternalValue;
  end;
    dmSQL.adoGenericQuery.Open;
    if dmSQL.adoGenericQuery.Fields[0].Value = 0 then
    begin
    InsertAuthToSQL;
    end
    else if bForceUpdate then
    begin
        //Update-deliberately does not update the ImportedFromVista and DateCreated fields
    dmSQL.adoGenericQuery.SQL.Text :=
      'update DSS_Authorizations set' +
      ' DateStart = :DateStart' +
      ',DateEnd = :DateEnd' +
      ',VendorIEN = :VendorIEN' +
      ',FacilityIEN = :FacilityIEN' +
      ',DXCode1= :DXCode1' +
      ',DXCode2 = :DXCode2' +
      ',DXCode3 = :DXCode3' +
      ',TreatmentTypeIEN = :TreatmentTypeIEN' +
      ',TypeofCareIEN = :TypeofCareIEN' +
      ',PatientTypeIEN = :PatientTypeIEN' +
      ',PurposeOfVisitIEN = :PurposeOfVisitIEN' +
      ',Remarks = :Remarks' +
      ',ClerkIEN = :ClerkIEN' +
      ',CostRecovery = :CostRecovery' +
      ',AccidentRelated = :AccidentRelated' +
      ',LastEditedBy = :LastEditedBy' +
      ',LastEditedDT = :LastEditedDT' +
      ',ContractID = :ContractID' +
      ' where AuthIEN =:AuthIEN and ' +
      ' AuthStationIFN = :AuthStationIFN and' +
      ' PatientIEN = :PatientIEN';
    with dmSQL.adoGenericQuery.Parameters do
    begin
      FindParam('DateStart').Value := sStart;
      FindParam('DateEnd').Value := sEnd;
      FindParam('VendorIEN').Value := FVendor.InternalValue;
      FindParam('FacilityIEN').Value := FLocation.IEN;
      FindParam('DXCode1').Value := FDXLine1;
      FindParam('DXCode2').Value := FDXLine2;
      FindParam('DXCode3').Value := FDXLine3;
      FindParam('TreatmentTypeIEN').Value := FTreatmentType.InternalValue;
      FindParam('TypeofCareIEN').Value := FTypeOfCare.InternalValue;
      FindParam('PatientTypeIEN').Value := FPatientType.InternalValue;
      FindParam('PurposeOfVisitIEN').Value := FPurpose.IEN;
      FindParam('Remarks').Value := FRemarks;
      FindParam('ClerkIEN').Value := FClerk.InternalValue;
      FindParam('CostRecovery').Value := BoolToOneZeroString(FCostRecovery);
      FindParam('AccidentRelated').Value := BoolToOneZeroString(FAccidentRelated);
      FindParam('LastEditedBy').Value := dmBroker.dssBroker.UserDuz + ';' + dmBroker.dssBroker.UserName;
      FindParam('LastEditedDT').Value := Now;
      FindParam('ContractID').Value := FContract.ExternalValue;
      FindParam('AuthIEN').Value := FAuthIEN;
      FindParam('AuthStationIFN').Value := sStationIFN;
      FindParam('PatientIEN').Value := FPatient.InternalValue;
    end;
    log.add('Begin update of existing auth: '+ dmSQL.adoGenericQuery.SQL.Text);
    dmSQL.adoGenericQuery.ExecSQL;
        log.add('Update done');
    end;
    dmSQL.adoGenericQuery.close;
    log.add('Auth synch done');
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T01:43:09.667

我怀疑这是您的应用程序中的特定内存损坏错误。它实际上可能是由 XE2 VCL 或 RTL 中的某些东西引起的，但更有可能是代码中的某些问题，例如从 Ansi 到 Unicode 的错误端口。

您声明移动是从 Delphi 2006 (String=AnsiString) 到 XE2 (String=UnicodeString)。您的代码中的以下任何内容：

*   任何无类型的 var 参数？
*   您假设 Sizeof(Char)=Sizeof(Byte) 的任何地方？
*   当您应该向/从 PAnsiChar 转换时，您向 PChar 转换或从 PChar 转换的任何地方，因为 PChar 在 XE2 中是指向 UnicodeChar 的指针，但在 2006 中的 PChar 是指向 AnsiChar 的指针。

# asp.net-mvc - 如何将文本转换为操作链接？

> ID：11418907
> 
> 赞同：0
> 
> 时间：2012-07-10T17:42:27.153
> 
> 标签：asp.net-mvc

在下面的标记中，我想将 Description 和/或 EventDate 显示为 ActionLinks。我如何使它们具有可操作性？文本右侧定义的 ActionLink 有效，但我不想看到一堆显示“查看”的链接。将文本或日期设为可点击似乎更简洁。

谢谢！

```
@foreach (var item in Model)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EventDate)
        </td>
        <td>
            @Html.ActionLink("View", "Details", "Event", new { id = item.Id }, null)
        </td>
    </tr>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:44:04.830

如果你想生成一个，而不是使用`DisplayFor`一个：`ActionLink``ActionLink`

```
@Html.ActionLink(item.Description, "Details", "Event", new { id = item.Id }, null) 
```

EventDate 也是如此。只是您可能需要将其转换为 ActionLink 帮助程序期望作为第一个参数的字符串。

# javascript - 在 Javascript 中转换 DayOfYear 值以在 Flot 中使用

> ID：11418913
> 
> 赞同：2
> 
> 时间：2012-07-10T17:42:53.887
> 
> 标签：javascript, jquery, datetime, plot, flot

我试图通过让 X 轴显示日期从 flot jQuery 库中获得可用的显示；但是，我收到的数据是 DayOfYear 格式，而不是：

```
var data = [[192,6.9],[191,49.52],[190,2],[189,0], etc...] 
```

192、191 等代表一年中的日子，我想将它们转换为实际日期。我会很感激我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:52:30.230

```
function getDate(iYear, iDayOfYear) {
    var oDate = new Date(iYear, 0);
    oDate.setDate(iDayOfYear);
    return oDate;
} 
```

另请参阅[此示例](http://jsfiddle.net/qt6Yr/)。

# ms-access - 字典使所有键的值等于最近的键/值添加

> ID：11418919
> 
> 赞同：3
> 
> 时间：2012-07-10T17:43:38.760
> 
> 标签：ms-access, vba, dictionary, ms-access-2010

我正在尝试将一些项目添加到字典对象（数据库 ID 和值对）中，以让用户在提交之前确认他们的选择。我有以下代码部分，它将一个项目添加到字典中。添加后，我循环遍历 Dictionary.Keys 并将每个键/值打印到列表框以供用户查看。我的字典对象是我的表单上的一个公共变量，并在 Form_Load 事件中设置。

```
Dim PickListID As Integer
If txtPercentOfStream <> "" Then
    PickListID = cboCoalTypes
    If Not CoalsInStreamDic.Exists(PickListID) Then
        CoalsInStreamDic.Add PickListID, txtPercentOfStream
    End If
Else
    Exit Sub
End If 
```

奇怪的是，每当我添加一个新的键/值对时，新键的值就会变成除新键之外所有现有键的值。

我在与字典交互之前和之后运行这个小块

```
Dim key As Variant
For Each key In CoalsInStreamDic.Keys
    Debug.Print key & "::" & CoalsInStreamDic.item(key)
Next key
Debug.Print 
```

即用户单击按钮，*首先*想到的是上面的块，以确认旧键具有其原始值，但它们没有。它们已经被“新值”所取代。之后运行该块可以确认这一点。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:53:08.430

问题是您没有添加 TextBox 的文本，而是添加了 TextBox

如果您将代码更改为以下内容，它应该可以工作

```
If txtPercentOfStream <> "" Then
    Dim PickListID As Integer, PercentOfStream As Integer
    PercentOfStream = txtPercentOfStream
    PickListID = cboCoalTypes
    If Not CoalsInStreamDic.Exists(PickListID) Then
        CoalsInStreamDic.Add PickListID, PercentOfStream
    End If
Else
    Exit Sub
End If 
```

# mysql - 如何从 .sql 文件发送查询？

> ID：11418920
> 
> 赞同：2
> 
> 时间：2012-07-10T17:43:51.903
> 
> 标签：mysql, r, odbc, character

### 背景：

我正在使用 RMySQL 来查询数据库；我已经用带引号的字符串成功地做到了这一点，但我现在想从 .sql 文件发送更长的查询。

sql文件在`mypackage/inst/extdata/myquery.sql`

### 问题：

`myquery.sql`从数据库导入查询并将其提交到数据库的最佳方式是什么？

### 我试过的：

这是我正在处理的功能：

```
library(RMySQL)
library(mypackage)

myqueryfun <- function(...){
   file    <- system.file("extdata", "myquery.sql", package = "mypackage")
   query   <- SOMEFUN(file)
   con     <- dbConnect(...)
   q       <- dbSendQuery(con, query)
   result  <- fetch(q, n = -1)
   return(result)
} 
```

所以，我正在寻找函数`SOMEFUN`及其附加参数。我已经尝试过`scan`and `readLines`，并且我尝试过对这些函数使用不同的参数，例如`scan(file, sep = '\n', what = 'character')`我得到的最接近的是`writeLines(readLines(file))`，但是我得到了一些与解析文件相关的错误，例如对以下内容的响应`writeLines(readLines())`：

```
Error in function (classes, fdef, mtable)  : 
  unable to find an inherited method for function "dbSendQuery", for signature "MySQLConnection", "NULL"
Called from: stop("unable to find an inherited method for function \"", fdef@generic, 
    "\", for signature ", cnames) 
```

如果查询是长度为 1 的字符向量，例如`"show tables;"`，我会得到预期的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:03:52.133

正如@Andre 指出的那样，您正在寻找的功能包含`scan`在`paste(scan(...), collapse = "")`：

```
SOMEFUN <- function(file){
    paste(scan(file, sep = "\n", what = "character"), collapse = "")
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T00:32:55.907

这不是您问题的完整答案，但它应该有所帮助。

您会注意到它在 paste() 函数将所有内容折叠成一行之前删除了单行注释。您不想要这样的折叠 SQL 字符串：

`SELECT * --mycomment FROM etc..`

解释器不会对它太友好，因为第一个之后的所有内容都`--`将被忽略。

所以试试这个...

```
sqlImport <- function(file) {

  sqlStr <- readLines(file)
  sqlStr <- gsub("^[ \t]+","", sqlStr)
  sqlStr <- gsub("^--.*","", sqlStr)
  sqlStr <- paste(sqlStr, collapse=" ")
  return(sqlStr)

}

sqlString <- sqlImport("mysqlfile.sql") 
```

此外，这有助于轻松获取您真正感兴趣的 .sql 文件。

```
sqlFiles <- list.files(getwd(), pattern = ".sql$", ignore.case = T)
sqlFiles
sqlString <- sqlImport(sqlFiles[2])  #where you want the second .sql file listed 
```

# c# - C#中的线程错误

> ID：11418922
> 
> 赞同：1
> 
> 时间：2012-07-10T17:43:53.393
> 
> 标签：c#

好的，所以我在项目中使用这行代码

```
System.Threading.ThreadPool.QueueUserWorkItem(new System.Threading.WaitCallback(ProcessReport)); 
```

但它抛出以下错误

> “ProcessReport”没有重载匹配委托“System.Threading.WaitCallback

我将上述行替换为以下行：

```
Thread t = new Thread(new ThreadStart(ProcessReport));
t.Start(); 
```

这消除了错误，但这是正确的方法。因为我是一家公司的实习生，所以我无法在那里检查输出，这是整个大项目的一部分。请帮忙。

我不能发布整个 ProcessReport，因为我不允许这样做，但它以此开头：

> > 公共无效进程报告（）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:47:52.790

我的假设是，因为它编译：

```
new ThreadStart(ProcessReport) 
```

您的`ProcessReport`方法如下所示：

```
void ProcessReport()
{
} 
```

`QueueUserWorkItem`接受一个`WaitCallback`委托，这需要传递一个对象作为参数。因此，将您的方法的签名更改为如下所示：

```
void ProcessReport(object state)
{
} 
```

你应该没事。`state`如果您不需要使用该参数，您可以忽略它，但它的值是您作为`QueueUserWorkItem`. 由于您使用的重载不会将对象传递给`QueueUserWorkItem`，因此它将始终为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:53:04.717

可能发生的问题之一

> 线程 t = new Thread(new ThreadStart(ProcessReport));
> 
> t.Start();

就是如果你在不检查任何条件的情况下以这种方式启动这么多线程，你的程序很可能会崩溃，在某些情况下甚至可能导致系统崩溃。但是，如果它是一个在该线程启动之前必须发生事件的应用程序，那么您的代码应该没问题。

# java - 如果客户端只是建立连接并且不发送任何数据，我的服务器将冻结

> ID：11418926
> 
> 赞同：0
> 
> 时间：2012-07-10T17:44:08.527
> 
> 标签：java, tcp-ip

我正在努力使我的服务器更稳定。它使用服务器套接字和套接字类。信息的传输是使用流类完成的。

我注意到有时调试会在一段时间内释放每一盎司。

我发现我的客户端只是做了一个套接字连接并且没有发送数据，或者少于服务器期望服务器会冻结类 InputStream 的读取方法。

有没有办法让读取方法超时？文件离子没有谈论时间噘嘴，但确实说它会阻止信息数据是和蔼可亲的。

如果读取无法超时，是否有另一种方法可以通过套接字连接读取数据并且如果客户端不再发送数据则不会冻结？？？？

读取数据及其冻结位置的代码片段

```
public String ReadLine(){
    String out="";

    // read in one line
    try{
        request = new StringBuffer(1000);
        boolean f=true;
        while(true){
            int c=in.read(); // WILL FREEZ HEAR IF CLIENT NO LONGER CONNECTED OR SENDING DATA
            if (c=='\r'){
                // next should be a \n
                c=in.read(); 

    //..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:46:33.727

请发布您的完整代码，但如果您使用 InputStream，它是一种阻塞 I/O 方法，只要您的客户端连接到它，它就会“冻结”。如果您断开客户端连接，它应该释放块。与其担心自己，不如创建一个单独的线程来处理 I/O。另外，这里真正的问题应该是，为什么客户端不发送消息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:52:00.450

你能不能试试...

```
int c = 0;
while((c = in.read()) != -1) {
...
} 
```

看看它是否能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:58:53.283

如果您使用的是套接字，那么您需要在套接字上设置 SO_TIMEOUT 值。这将允许读取超时并抛出`InterruptedIOException`.

`Socket.setSoTimeout`是看的方法。请注意，超时是在套接字本身上设置的，而不是在从套接字获得的输入流上设置的。

# iphone - 如何创建 Facebook SDK 静态库？

> ID：11418929
> 
> 赞同：0
> 
> 时间：2012-07-10T17:44:16.103
> 
> 标签：iphone, objective-c, ios5, xcode4.3

我正在尝试在 Xcode 4.3 中将 Facebook 集成到我的应用程序中，并且我在这一步中有库存，我尝试将脚本更改为： XCODEBUILD_PATH=/Applications/Xcode.app/Contents/Developer/usr/bin 我把那行，他们我在终端中使用这一行：

```
XCODEBUILD_PATH=/Applications/Xcode.app/Contents/Developer/usr/bin 
```

并返回未找到的错误文件。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:47:00.907

您的 Xcode 是否实际安装在`/Applications`? 如果不是，您需要将它移到那里或将路径的基础更改到它所在的任何位置。

# mysql - 对百万行表，MySQL 的 LIKE 查询的性能

> ID：11418932
> 
> 赞同：23
> 
> 时间：2012-07-10T17:44:41.937
> 
> 标签：mysql, database, performance, processing-efficiency

从任何有实际经验的人看来，如果字段有一个普通的 INDEX，LIKE 查询如何在数百万行表上的 MySQL 中执行，在速度和效率方面？

是否有更好的替代方法（不过滤结果，如 FULLTEXT 50% 规则）在数百万行表上执行数据库字段搜索？

**例子：**

```
Schema (comments table)

id (PRIMARY) title(INDEX) content time stamp

Query

SELECT * FROM 'comments' WHERE 'title' LIKE '%query%' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T17:52:02.007

`%`如果您在模式的开头有 a，LIKE 将执行全表扫描。

您可以在布尔（而不是自然语言）模式下使用 FULLTEXT 来避免 50% 规则。

> 布尔全文搜索具有以下特征：
> 
> 他们不使用 50% 的阈值。

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-10T17:56:42.710

> 从任何有实际经验的人看来，如果字段有一个普通的 INDEX，LIKE 查询在数百万行表的速度和效率方面如何在 MySQL 中执行？

不太好（我想我在 900k 范围内进行了一些搜索，不能说我有数百万行 LIKE 的经验）。

通常您应该尽可能地限制搜索，但这取决于表结构和应用程序用例。

此外，在某些**Web**用例中，可以通过一些技巧来实际提高性能和用户体验，例如索引单独的关键字并创建关键字表和 rows_contains_keyword (id_keyword, id_row) 表。关键字表与 AJAX 一起使用来建议搜索词（简单词）并将它们编译为整数 - id_keywords。那时，查找包含这些关键字的行变得*非常*快。一次更新一行表格也很高效；当然，批量更新成为明确的“不要”。

如果仅使用 + 运算符，这与[全文 MATCH..IN BOOLEAN MODE](https://dev.mysql.com/doc/refman/5.6/en/fulltext-boolean.html)已经完成的操作并无太大不同：

```
SELECT * FROM arts WHERE MATCH (title) AGAINST ('+MySQL +RDBMS' IN BOOLEAN MODE); 
```

你可能想要一个 InnoDB 表来做到这一点：

> 布尔全文搜索具有以下特征：
> 
> *   它们不会自动按照相关性递减的顺序对行进行排序。...
> *   InnoDB 表需要 MATCH() 表达式的所有列上的 FULLTEXT 索引来执行布尔查询。即使没有 FULLTEXT 索引，针对 MyISAM 搜索索引的布尔查询也可以工作，尽管以这种方式执行的搜索会很慢。...
> *   他们不使用适用于 MyISAM 搜索索引的 50% 阈值。

你能提供更多关于具体案例的信息吗？

# 更新：AJAX方式

设置：您将所有`title`s 分解为单词。这很快就会给你一张`title_words`桌子`( id integer not null autoincrement, word varchar(50) )`和一张大`title_contains_word ( word_id integer, title_id integer )`桌子。

如果你有 1000 万个标题，平均有 4 个单词（对于书籍来说可能，对于论文来说不太可能），你可以期望一个 5000 行的`title_words`表和一个包含两个 INTEGER 列的 4000 万个表；那是大约 400 MB 的额外数据。

对于搜索，用户开始输入一个单词，您可以从 titlewords*自动完成该单词。*完成此操作后，查询将变为单词 ID 列表；当然，任何标题中没有的单词甚至都不能输入，因此会立即给出否定结果，而且是免费的。

实际搜索现在可以通过多种方式进行，但我喜欢的一种方式是`SELECT COUNT(*) FROM title_contains_word WHERE word_id={id}`在每个用户选择之后，*在*真正的搜索开始之前运行。

*这允许从最稀有*的单词开始构建复合查询或公共表表达式。实际上，如果任何单词的计数低于 20，您可以选择所有这些（平均）八个 TCW 行并获取所有相关单词的 ID，然后简单地验证（在 MySQL 之外）是否有一个标题 ID，例如您的查询的所有 wordID 都存在一对 (titleID, wordID)。

即使你不得不诉诸最粗略的形式，

```
SELECT a.title_id 
FROM title_contains_word AS tcw1
JOIN title_contains_word AS tcw2 USING (title_id)
JOIN title_contains_word AS tcw3 USING (title_id)
JOIN title_contains_word AS tcw4 USING (title_id)
...
WHERE (tcw1.word_id = {id1})
  AND (tcw2.word_id = {id2})
  ... 
```

JOIN 将由非常小的虚拟缓冲表组成，扫描时间非常短。

*获得所有相关的标题 ID 后，您可以使用主键*title_id从数百万行的大型数据库中直接运行 SELECT 。最后一次搜索也应该很快。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-10T17:47:34.560

我建议您也通过其他子句（例如日期范围）来限制您的查询，因为 a`LIKE '%something'`可以保证您进行全表扫描

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-05T10:56:19.710

使用 Workbench，在 SELECT 之前使用 EXPLAIN 来测试 LIKE 的不同条件使用，有和没有 INDEX，在搜索词的不同部分使用通配符。您将根据您的测试得出自己的结论，因为每个案例都是一个特定案例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-31T16:24:15.970

您可以进行 Subselect 以获取最新的寄存器。

```
select s.* from (select * from my_table order by "create" desc  limit 10) as s
where   s.event like '%status%' 
```

# tablecellrenderer - 自定义单元格渲染 JXtreetable

> ID：11418935
> 
> 赞同：0
> 
> 时间：2012-07-10T17:45:01.067
> 
> 标签：tablecellrenderer, jxtreetable

这是我的第一篇文章，我实际上是在实现 JXtreetable 组件，我已经设法显示其中包含的所有数据，但我想创建一个自定义单元格渲染，以便显示与他们的孩子不同的父行（即字体加粗），有没有人可以帮忙？到目前为止，我只能通过使用更改列的渲染

```
myTreeTable.getColumn (int col). setCellRenderer (myRendererObj); 
```

在我之前制作 myRendererObj 的地方，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:49:09.150

可以使用的`setTreeCellRenderer(...)`方法`JXTreeTable`。你给它 a`DefaultTreeRenderer`然后你可以给它 a `ComponentProvider`。我进行了子类`ComponentProvider`化来做我的自定义树单元。

# javascript - emacs：我可以停止 js2-mode 的语法检查吗？

> ID：11418941
> 
> 赞同：0
> 
> 时间：2012-07-10T17:45:19.860
> 
> 标签：javascript, emacs

也许这是一个简单的问题：我可以停止 js2-mode 的语法检查吗？如何 ？

似乎它减慢了 emacs 进程。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:59:57.323

简短的回答是，不，你不能。您可以关闭解析器，但它会破坏大部分其他内容。

如果你只是想要`js2-mode`-like 缩进，你可以使用它的缩进功能`js-mode`：

```
(add-hook 'js-mode-hook
          (lambda ()
            (require 'js2-mode)
            (setq indent-line-function 'js2-indent-line))) 
```

# c# - LINQ - 查找一个列表中不在另一个列表中的所有项目

> ID：11418942
> 
> 赞同：58
> 
> 时间：2012-07-10T17:45:20.337
> 
> 标签：c#, .net, linq, .net-3.5

我坚持使用 LINQ 查询（或任何其他有效的方法来完成同样的事情）。有人可以告诉我如何选择一个列表中不存在于另一个列表中的所有项目吗？

基本上，我有一个通过匹配其他两个列表之间的项目形成的列表。我需要在第一个列表中找到未找到匹配项的所有项目。有人可以在下面的第二个 LINQ 查询中填写可以实现此目标的查询吗？如果我使用 TSQL，我会这样做`SELECT * NOT IN ()`，但我认为 LINQ 不允许这样做。

```
//Create some sample lists.
List<IdentifierLookupData> list1 = new List<IdentifierLookupData> { /*Init */ };
List<IdentifierLookupData> list2 = new List<IdentifierLookupData> { /*Init */ };

//Find all items in list1 and list2 that match and store them in joinItems.
var joinItems = (from d1 in list1
    join d2 in list2 on d1 equals d2
    select d1).ToList<IdentiferLookupData>();

//Find all items in list1 not in joinItems.
var deletedItems = (from d1 in list1
     ***select all items not found in joinItems list.*** 
```

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-07-10T17:47:57.993

尝试使用`.Except`扩展方法[^(*（文档）*)](http://msdn.microsoft.com/en-us/library/bb300779.aspx)：

```
var result = list1.Except(list2); 
```

会给你所有`list1`不在的项目`list2`。

重要提示：即使为该方法提供了指向 MSDN 文档的链接，我仍将在此处指出：`Except`仅适用于原始类型集合的开箱即用，对于 POCO/对象，您需要在该对象上实现 IEquatable。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-05-15T02:15:39.347

试试这个：

```
var List2 = OriginalList.Where(item => !List1.Any(item2 => item2.ID == item.ID)); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-10T17:46:29.703

最简单的方法是使用`Except`方法。

```
var deletedItems = list1.Except(joinItems); 
```

这将返回`list1`不包含在`joinItems`

# amazon-ec2 - Elasticfox 无法连接 - DescribeRegions 的 EC2 错误

> ID：11418948
> 
> 赞同：1
> 
> 时间：2012-07-10T17:45:40.763
> 
> 标签：amazon-ec2, firefox-addon

我最近开始在使用 Elasticfox 时遇到错误。

> EC2 以 DescribeRegions 的错误响应
> 
> 请求编号：
> 
> 故障代码：请求错误
> 
> 详细信息：请检查您的 EC2 URL 'https://ec2.us-east-1.amazonaws.com/' 是否正确，或使用 about:config 删除 ec2ui.endpoints 中的值并重试。

我已按照说明清除 about:config 中的端点值，但仍然出现此错误。我的一些同事遇到了同样的错误，而其他人则没有。我的用户对我们的 ec2 资源拥有完全权限。任何人都可以提供解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T07:32:35.143

您关于 ec2ui.endpoints 的观点帮助我解决了这个问题。（我最近遇到了同样的问题。）

使用 ({}) 的字符串值创建一个新的 ec2ui.endpoints 并解决它。

ps：讨厌最新的stackoverflow用户时尚结束问题。（不动但关闭。）

# android - 应用程序不会在设备上启动

> ID：11418949
> 
> 赞同：4
> 
> 时间：2012-07-10T17:45:42.780
> 
> 标签：android, eclipse, android-4.2-jelly-bean, galaxy-nexus

我是 Java、Eclipse 和 Android 应用程序开发的菜鸟。我正在阅读[Android 应用教程](http://developer.android.com/training/basics/firstapp/running-app.html#RealDevice)，但似乎无法在我的设备上启动第一课。在修复了一些阻止项目编译的问题后，我能够让它在 AVD 上运行。但是在物理设备上没有运气。以下是我的环境的详细信息以及控制台向我显示的内容。

在手机上，我尝试在应用程序、下载和桌面下寻找安装，但没有看到。

电脑：Windows XP

设备：运行 4.1 的三星 Galaxy Nexus，内核 3.036-04142-gfa7dc12-dirty

开发环境：Eclipse Juno

安慰：

```
[2012-07-10 13:35:11 - MyFirstProject] ------------------------------
[2012-07-10 13:35:11 - MyFirstProject] Android Launch!
[2012-07-10 13:35:11 - MyFirstProject] adb is running normally.
[2012-07-10 13:35:11 - MyFirstProject] Performing com.example.myfirstapp.MainActivity activity launch
[2012-07-10 13:35:14 - MyFirstProject] Uploading MyFirstProject.apk onto device '014994321500300C'
[2012-07-10 13:35:14 - MyFirstProject] Installing MyFirstProject.apk...
[2012-07-10 13:35:14 - MyFirstProject] Success!
[2012-07-10 13:35:14 - MyFirstProject] Starting activity com.example.myfirstapp.MainActivity on device 014994321500300C 
```

* * *

感谢您的快速回复。

调试时可以从 Eclipse 中看到我的手机。我没有在我正在执行此操作的机器上专门安装三星驱动程序。检查设备管理器我看到手机没有被 Windows 正确识别。我已经安装了驱动程序，现在可以通过命令提示符在手机上执行操作（例如 adb reboot）。

安装驱动程序后，我重新启动了我的电脑和手机。不幸的是，默认意图仍然没有像使用 AVD 时那样加载到手机上。我很乐意使用 AVD，但它在我的电脑上速度很慢，而且拿在手中更酷（它更真实）。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-26T09:31:28.607

对于 google Nexus 设备，您应该从这里下载 Google USB 驱动程序： http : [//developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)在您的物理设备上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T20:35:12.113

这里的其他答案不是真的，而且完全没有帮助。我处于这种确切的情况，它总是因为一个愚蠢的错误而引起的。检查你的清单！如果您的清单是空白的，或者没有应用程序或启动器活动，那么 Android 将不知道如何启动您的活动，因此不会显示启动器图标！

不幸的是，没有堆栈跟踪，您的应用程序将在应用程序管理器中显示为已安装。

我自己在切换 gradle 配置时遇到了这个问题。我不小心没有加载我用来合并空白清单的清单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T11:40:19.183

**我认为您在使用 ADT 插件进行配置方面存在问题，并且您还必须安装相关的 SDK 更新版本。** 根据您的应用程序具体选择模拟器版本。

从下面的链接获取新的 Eclipse 版本和 SDK

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

采用 Android 4.2 API

[http://developer.android.com/about/versions/android-4.2.html](http://developer.android.com/about/versions/android-4.2.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T23:31:26.307

如果您的设备已列出或使用 adb devices 命令从控制台检查，请检查 Eclipse ADT 的 DDMS 透视图。从日志中，它似乎找到了设备并正确安装，所以这很可能不是问题。

在调试透视图中，转到首选项并选择中断异常选项并以调试模式启动应用程序。此链接显示如何配置 eclipse：

[抛出异常时中断](https://stackoverflow.com/questions/3066199/eclipse-break-when-exception-is-thrown)

然后，您将能够检查您的应用程序失败的错误。另一种选择是检查 logcat 是否有错误。

# c - float和int之间的转换，字节表示？

> ID：11418952
> 
> 赞同：3
> 
> 时间：2012-07-10T17:45:47.540
> 
> 标签：c

我有一个问题涉及计算机系统中浮点数和字节之间的表示差异。例如，float 如何从 float 转换为 int 并返回；它导致字节的完全不同的表示。有什么资源可以用来为我指明正确的方向吗？任何帮助深表感谢！我在网上找不到任何东西，正确方向的链接将非常有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:27:42.793

浮点数最常见的编码使用 IEEE 754。对于单精度数，有一个符号位 (s)、8 个指数位 (e) 和 23 个小数位 (f)。

对于 s、e 和 f 的大多数值，表示的值是 -1 ^s •2 ^(e-127) •F，其中 F 是通过写“1”得到的数字。然后是 f 的 23 位，然后将该字符串解释为二进制数字。例如，如果 f 为 10000000000000000000000，则二进制数为 1.10000000000000000000000，即（十进制）为 1.5，因此 F 为 1.5。

只要 0 < e < 255，上述情况就成立。值 0 和 255 是特殊的。

当 e 为 0 时，表示的值与上面相同，只是 F 以“0”开头。而不是“1.”。特别是，如果 f 为零，则表示的值为零。如果 f 不为零，则这些被称为非正规数，因为它们小于上述主要方式中表示的正常值。

当 e 为 255 且 f 为 0 时，表示的值是 +infinity 或 -infinity，根据符号位 s。当 e 为 255 且 f 不为零时，表示的值称为 NaN，Not a Number，用于调试或捕获错误或其他特殊用途。有安静的 NaN（不会导致陷阱；它们通常用于您想要继续计算以获得最终结果，然后弄清楚如何处理 NaN）和信号 NaN（确实会导致陷阱；它们通常用于当您因为发生错误而要中止计算时）。

编码在不同平台上的显示方式可能会有所不同，尤其是 32 位内的字节顺序。有些平台不使用 IEEE 754 编码。

双精度编码使用相同的方案，只是e是11位，127（称为指数偏差）改为1023，f是52位。此外，指数的特殊值是它的 11 位最大值 2047，而不是 8 位最大值 255。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:13:32.083

C 标准没有指定如何表示浮点值。每个实现/平台都可以自由地实现它们认为合适的浮点数。实现必须遵守某些约束，但位级表示是实现定义的。

由于您通常无法预测浮点数将如何存储或表示，因此没有真正的方法来回答这个书面问题。如果您考虑到特定的浮点实现，我们也许可以提供一些细节。然而，这些细节只与特定的实现相关。另请注意，不同的 CPU 架构可能会以不同的方式转换值，即使它们使用相同的浮点表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:14:21.697

在一般情况下，将浮点值视为“精确”是危险的。一旦你有一个分数，一个浮点数可能是近似的。（如果分数可以精确地用二进制表示，它可能仍然是精确的，例如`1/2`。但例如，`1/10`将是一个近似值。）

有几个人向您指出了 Wikipedia 文章。阅读那些。基本上，浮点值是符号位、指数和尾数。如果你有一个浮点值，`50.0`那么浮点值看起来与 的整数表示完全不同`50`。（原不正确的讨论已删除；详情见评论。）

没有简单的方法可以将整数转换为浮点数，反之亦然。你的计算机的 CPU 有内置的指令来为你进行转换，或者你可以编写一个程序来完成它，但没有一个简单的技巧。

编辑：上面被编辑删除了我写了一些不正确的东西的部分。@Eric Postpischil 指出了我犯的主要错误：50 的值将存储为一个小数值，其幂次大于一，而不是我最初所说的。这是一个愚蠢的错误，我道歉。他还指出，“尾数”部分在技术上是“有效数”；我会简单地说，我经常看到它被称为“尾数”，无论这是否正确。

我将重复重要的部分：没有简单的方法可以将整数转换为浮点数，反之亦然。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:34:51.083

特定平台的表示`float`和`int`在特定平台上的表示是严格定义的，并且该平台上的 C 编译器知道。这意味着总是有一个定义明确的算法可以将一个转换为另一个。在实践中，当使用自然平台特定类型时，转换由 CPU (FPU) 在内部执行。CPU 有一个专用命令，可以将`float`内存中的数据读取到内部 CPU 寄存器中。然后另一个命令可以将该数据作为值写回内存`int`。反之亦然。

例如，在 x86 平台上，`float_value = int_value`分配通常会被转换为一系列 CPU 命令，例如

```
fld int_value   ; read `int` value from `int_value` to the internal register
fst float_value ; save `float` value from the internal register to `float_value` 
```

当涉及转换硬件不立即支持的算术数据类型时，C 编译器必须在生成的代码中逐字说明所有必要的转换步骤。有时，可能需要对语言甚至不支持的整数或浮点类型的支持，在这种情况下，必须手动实现转换。

# jquery - 如何在使用 jQuery 的 URL 获取上确定像 pinterest 这样的图像大小

> ID：11418955
> 
> 赞同：3
> 
> 时间：2012-07-10T17:46:07.970
> 
> 标签：jquery, image, pinterest, image-size

我正在创建一个网页，允许用户输入 URL 并从 URL 中提取图像，例如 Facebook 或 pinterest 和 thefancy.com。您输入一个 URL，他们会为您获取宽度大于指定宽度的图像。

我的代码都是 jQuery，不需要确定图像大小并且工作正常。我还应该说我的 javascript 知识非常有限。

当用户点击回车时，页面向服务器端脚本发出一个 ajax 请求（使用 jQuery），并接收一个包含从页面中提取的图像源数组的 json 对象。在 ajax.success 回调中，我将此图像数组传递给使用 jquery append() 方法将图像动态添加到 DIV 的方法。

```
 // server script errors are also reported inside 
                    // ajax success callback
                    success: function(response){
                        switch(response.code) {
                            case 401 :
                                webgloo.sc.ImageSelector.showMessage(response.message,{"css":"color-red"});
                                break ;
                            case 200 :
                                webgloo.sc.ImageSelector.processUrlFetch(response);
                                break ;
                            default:
                                webgloo.sc.ImageSelector.showMessage(response.message,{"css":"color-red"});
                                break ;
                        }
                    }, 
```

我试图在成功回调处理程序中获取图像大小。在阅读了 SO 之后，我添加了一个图像加载处理程序，并且在该图像加载处理程序中，我有一个回调 addImage()，它增加了一个 num_added 变量。稍后我想使用这个 num_added 变量来确定向用户显示什么样的消息。

问题是 showNextMessage() 不会等待 processUrlFetch() 中的循环完成。调用 processUrlFetch() 后立即触发 showNextMessage()。因此，我总是显示“未找到图像”消息。

我曾尝试研究该主题，但在这里我的深度不够。我认为混合 jquery 和 DOM 事件可能是一个问题。另外，我不确定我通过 image.load() 获取图像大小的方法有多防弹。我也不知道 imagesloaded 插件是否会帮助我的事业。

我有两个问题

1.  如果我在这里为动态插入的图像获取“真实”图像大小所做的是一种有效的跨浏览器技术（依赖于 img.load 事件）
2.  如何确保仅在循环完成后触发 showNextMessage()？

processesUrlFetch : function(response) { var images = response.images ;

```
 for(i = 0 ; i < images.length ; i++) {
                var img = new Image();
                /* trouble part */
                img.onload = function() {
                    if((this.width >= 300) && (this.height >= 300 )) {
                        webgloo.sc.ImageSelector.addImage(this.src);
                    }

                }

                img.src = images[i] ;
                webgloo.imagep.src = images[i] ;
            }

            webgloo.sc.ImageSelector.showNextMessage();
        },

        showNextMessage : function() {

            if(webgloo.sc.ImageSelector.num_added > 0 ) {
                $("#stack").fadeIn("slow");
                $("#next-message").fadeIn("slow");
            } else {
                var message = "No image of appropriate size found!"; 
                webgloo.sc.ImageSelector.showMessage(message, {"css":"color-red comment-text"});
            }

        },

        addImage : function(image) {
            webgloo.sc.ImageSelector.num_added++ ;
            var index = webgloo.sc.ImageSelector.num_added ;

            if(webgloo.sc.ImageSelector.debug) {
                console.log("Adding image : " + index + " : " + image);
            }

            var buffer = this.imageDiv.supplant({"srcImage":image, "id":index } );
            // logo, small icons etc. are first images in a page
            // what we are interested in will only come later.
            $("div#stack .images").prepend(buffer);

            this.bucket[index] = { "id":index, "srcImage": image, "selected" : false} ;

        }, 
```

* * *

如果您想查看完整代码 - 这是要点：- [https://gist.github.com/3084904](https://gist.github.com/3084904)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:25:14.083

就获得图像尺寸的可靠方法而言，如果您使它们成为 DOM 元素（例如在 img 标签中），您应该能够使用 jQuery.actual 插件获得包含图像的元素的真实高度和宽度。对不起，如果我误解了你的问题。

来源：[https](https://github.com/dreamerslab/jquery.actual/) ://github.com/dreamerslab/jquery.actual/ 演示：http: [//dreamerslab.com/demos/get-hidden-element-width-with-jquery-actual-plugin](http://dreamerslab.com/demos/get-hidden-element-width-with-jquery-actual-plugin)

至于 showNextMessage 在适当的时间只被调用一次，我没有给你一个可靠的答案，但也许你可以将对 webgloo.sc.ImageSelector.showNextMessage() 的调用移动到附加到图像的回调中最后完成的负载。

# assembly - ARM 显示器转 VGA

> ID：11418960
> 
> 赞同：1
> 
> 时间：2012-07-10T17:46:35.937
> 
> 标签：assembly, arm

我想知道在哪里可以找到任何关于学习使用 ARM 架构显示到 VGA 的好资源，正如我一直在搜索的那样，除了 Wikipedia 页面，它有一点帮助之外，我想找到一个很好的基础教程或论文。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:54:40.270

您是在谈论视频中的VGA吗？

ARM 是处理器，而不是视频芯片。如果您想要视频，则需要讨论独立于处理器的视频。您想编写外围驱动程序，asm 是一个非常糟糕的选择，只需用 C 编写或更好地借鉴大量开源代码（用 C 语言）。

如果不知道您要为什么操作系统编写此驱动程序，我们也无法进行此讨论。您是在谈论金属（无操作系统）还是为已经编写的 linux 重新发明驱动程序？

假设在金属上，并且由于您提到 qemu（bochs 是 x86 而不是 arm），请找到一个由 qemu 支持的系统，该系统同时具有 arm 处理器和模拟视频。查找该模拟视频的文档，无论是芯片还是某种帧缓冲区。该系统将有一个 linux 驱动程序，因此您可以将其用作参考。

带有视频的 Arm 系统足够便宜，你可以只买一个（ipod classic/video、nintendo gba/nds、open-rd、hawkboard、beagleboard、beaglebone、pandaboard、raspberry pi 等，列表很长）有些是低于 100 美元。在购买之前进行研究，您可能需要额外的硬件才能在平台上进行该级别的开发。

当然，如果您正在谈论采用现有的 vga 解决方案，这意味着您正在对芯片进行编程，并且这些芯片彼此之间都是不同的，并且它们的编程与 vga 本身几乎没有关系，那么所有这些都是隐藏的。你，你只是在操作寄存器来定义高度、宽度和深度等，然后操作内存中的像素。处理器与外围接口的接口也因一种解决方案而异，同一个视频芯片可以通过多种方式连接到 arm，因此您可以处理所有这些问题。

使用 visualboyadvance 或其中一个 nds 仿真器对 gba 或 nds 进行编程可能是一个很好的起点，通常将像素放在某物上并与外围设备对话。

如果您指的是VGA的另一种定义，请改进您的问题，即使是视频，请改进您的问题，它确实无法回答。

# actionscript-3 - 以前级别的总分

> ID：11418968
> 
> 赞同：0
> 
> 时间：2012-07-10T17:47:25.667
> 
> 标签：actionscript-3, dynamic, text

我试图为每个级别获得一个新分数，但最后将它们全部添加到总分中。我正在使用引擎中的状态来更改级别以及每个级别的新影片剪辑和类，但评分是相同的，并且 ScoreCounter 的名称。

我还希望玩家在最后选择他们最喜欢的 2 个关卡，将两者的分数乘以 2，但这超出了我的范围。

在循环中我有

```
scoreCount.text = String(score); 
```

和得分

```
if ( currentKey is Up && upKey )
{
    score += scoreBonus;

    currentKey.active = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:47:02.073

这应该可以解决问题，如果我解释得不够好，请查看一些关于自定义事件和共享对象的教程。

您可以将分数保存到共享对象（闪存 cookie）

如果您为下一级别或赢得级别等发送了自定义事件，那么您可以保存分数（使您的自定义事件具有在调用时更新的分数变量）。如果您不使用自定义事件，那么您应该看看一些教程，它们很方便。

无论如何，为您的事件添加分数参数

```
public class YourEvent extends Event {

    public var lvlScore:int;
    public static const NEXT_LEVEL:String = "Next Level";

    public function YourEvent( type:String, score:int ) {

        super( type );
        lvlScore = score;
    }
} 
```

看看自定义事件！

要使用共享对象保存分数：

在 .as 的顶部

```
private var sharedObj:SharedObject = SharedObject.getLocal( "YourGame" ); 
```

要获取/设置分数，只需使用

```
sharedObj.data.level1Score 
```

检查它是否存在

```
if( sharedObj.data.level1Score ) 
```

祝你好运！

# ios - 在 MKPinAnnotationView 中显示 UITableView

> ID：11418974
> 
> 赞同：3
> 
> 时间：2012-07-10T17:47:59.457
> 
> 标签：ios, ios5, mkmapview

我试图在 MKPinAnnotationView 的标注内显示 UITableView。我在我的故事板文件中添加了 UITableViewController。我正在使用以下代码将 leftAccessoryView 分配给 UITableView。

```
- (MKAnnotationView *)mapView:(MKMapView *)mv viewForAnnotation:(id < MKAnnotation >)annotation
{
    if([annotation isKindOfClass:[MKUserLocation class]])
        return nil; 

    NSString *annotationIdentifier = @"ZillowPropertyDetailsIdentifier"; 

    MKPinAnnotationView *propertyDetailsView = (MKPinAnnotationView *) [mv 
                                                            dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];

    if (!propertyDetailsView) 
    {
        propertyDetailsView = [[MKPinAnnotationView alloc] 
                    initWithAnnotation:annotation 
                    reuseIdentifier:annotationIdentifier];

        // get view from storyboard 
        PropertyDetailsViewController *propertyDetailsViewController = (PropertyDetailsViewController *) [self.storyboard instantiateViewControllerWithIdentifier:@"PropertyDetailsIdentifier"];

        propertyDetailsView.leftCalloutAccessoryView = propertyDetailsViewController.view;

        [propertyDetailsView setPinColor:MKPinAnnotationColorGreen];
        propertyDetailsView.animatesDrop = YES; 
        propertyDetailsView.canShowCallout = YES; 

    }
    else 
    {
        propertyDetailsView.annotation = annotation;
    }

    return propertyDetailsView; 
} 
```

PropertyDetailsViewController：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    return cell;
} 
```

当我单击该引脚时，它会因 BAD_EXCEPTION 或其他原因而崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:26:59.413

你只有记忆问题。当你这样做

```
PropertyDetailsViewController *propertyDetailsViewController = (PropertyDetailsViewController *) [self.storyboard instantiateViewControllerWithIdentifier:@"PropertyDetailsIdentifier"]; 
```

这将返回一个**自动释放**的PropertyDetailsViewController。稍后您只需将其视图分配给标注附件视图，但没有人保留视图控制器。儿子当方法完成时，视图控制器保留计数为零并且被释放。当访问该视图控制器上的任何内容时，会引发 BAD_EXCEPTION。

实际上，BAD_EXCEPTION 通常是内存问题（释放过多、两次自动释放等）。激活“启用僵尸对象”标志可以更好地跟踪它们。这使得对象不会被完全释放，因此您可以看到哪个失败了。

# css - 带有 CSS 的平行四边形导航背景

> ID：11418977
> 
> 赞同：8
> 
> 时间：2012-07-10T17:48:06.980
> 
> 标签：css, background, nav

我正在尝试创建此导航菜单（绿色突出显示为活动页面，灰色为悬停状态）：

![导航菜单](../Images/bb1137fa27e428210352c70da7adeea4.png)

我可以使用以下 CSS 制作平行四边形：

```
ul#nav li a {
    text-decoration:none;
    padding:4px 10px;
    border-radius:3px;
    transform: skew(-10deg);
    -o-transform: skew(-10deg);
    -moz-transform: skew(-10deg);
    -webkit-transform: skew(-10deg);
    color:#757575;
}

ul#nav li a:hover {
    background:#f3f1eb;
}

ul#nav li a.current-menu-item {
    color:#fff;
    background:#5d9732;
}

ul#nav li a.current-menu-item:hover {
    background:#5d9732;
} 
```

不幸的是，这也会导致文本倾斜，显示为斜体：

![导航菜单倾斜](../Images/1551965531bc1fd40fde8c01bee26c10.png)

这是一个显示设置的 jsfiddle（尽管倾斜在 jsfiddle 中不起作用）：http: [//jsfiddle.net/K3bQJ/4/](http://jsfiddle.net/K3bQJ/4/)

有什么办法可以防止文本倾斜，所以它不会出现斜体？我正在加载 jQuery，但更愿意避免它，或者至少有一个可用的 CSS 后备。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T17:59:57.303

[试试这个](http://jsfiddle.net/K3bQJ/6/)在你的标签中添加一个跨度并将其设置为相反的方向（注意使用 skewX，根据[https://developer.mozilla.org/en/CSS/-moz-transform](https://developer.mozilla.org/en/CSS/-moz-transform)认为这是正确的）

```
<ul id="nav">
    <li><a class="current-menu-item" href="#"><span>Nav Item 1</span></a></li>
<li><a href="#"><span>Nav Item 2</span></a></li>
<li><a href="#"><span>Nav Item 3</span></a></li>
</ul>

ul#nav li a {
    display: inline-block;
    text-decoration:none;
    padding:4px 10px;
    border-radius:3px;
            transform: skewX(-10deg);
         -o-transform: skewX(-10deg);
       -moz-transform: skewX(-10deg);
    -webkit-transform: skewX(-10deg);
    color:#757575;
}

ul#nav li a span {
    display: inline-block;
            transform: skewX(10deg);
         -o-transform: skewX(10deg);
       -moz-transform: skewX(10deg);
    -webkit-transform: skewX(10deg);
} 
```

# actionscript-3 - AIR - 将位图数据传输到 FFmpeg 视频

> ID：11418978
> 
> 赞同：2
> 
> 时间：2012-07-10T17:48:07.867
> 
> 标签：actionscript-3, flash, air, stream, ffmpeg

嘿，我遇到了类似的问题：[Converting RGB to YUV, + ffmpeg](https://stackoverflow.com/questions/9463264/converting-rgb-to-yuv-ffmpeg/11418728#11418728)

在 AIR 中，我认为编码太长而无法以合理的速率渲染帧 - 所以我将 argb ByteArray 从`bitmap.getPixels(rect)`直接导出到文件。

因此，对于 30 秒的 flash 动画，我将假设 1500 帧导出到 1500 个`.argb`文件。

这种方法效果很好。我能够使用 ffmpeg cmd 渲染高清视频：

```
ffmpeg -f image2 -pix_fmt argb -vcodec rawvideo -s 640x380 -i frame_%d.argb -r 24 -qscale 1.1 -s 640x380 -i ./music.mp3 -shortest render-high.mpg 
```

到现在为止还挺好！然而，在这两个进程之间，我们需要存储大约 3gb 的数据。

然后，我尝试将所有 argb 附加到一个文件并让 ffmpeg 使用它，但没有从中得到任何好处……还尝试弄乱 tcp/udp 但卡住了……

有谁知道简化该过程并希望将 Air 和 ffmpeg 连接在一起的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T11:49:12.070

您需要使用以下参数启动 ffmpeg NativeProcess：

```
ffmpeg -f rawvideo -pix_fmt argb -s 640x480 -r 24 -i - -c libx264 -b:v 1024k video.mp4 
```

在这里，您需要指定输入帧大小 (-s) 帧速率 (-r) 和视频输出比特率 (-b:v) 和输出文件名。这些论点的顺序也很重要。

然后，您只需逐帧将字节数组从管道`bitmap.getPixels(rect)`传输到此 nativeProcess 的标准输入`_process.standardInput.writeBytes(data, 0, data.bytesAvailable);`。

偶尔会发生 IOErrorEvent.STANDARD_INPUT_IO_ERROR - 这意味着 ffmpeg 无法跟上您的数据并且帧将被丢弃。除了降低帧大小、帧速率或比特率之外，您无能为力 - 您可能希望为帧设置某种队列，但高分辨率未压缩图像非常大，因此您只能存储数十个它们在内存中，由于 IO 速度慢，您将无法将它们存储在磁盘上。而这个问题只有在处理高清视频编码时才会出现。

`_process.closeInput();`当您没有更多帧要发送并等待 ffmpeg 进程以代码 0 退出时调用。

# mongodb - Mongodb 聚合框架 | 分组多个值？

> ID：11418985
> 
> 赞同：27
> 
> 时间：2012-07-10T17:48:50.020
> 
> 标签：mongodb, aggregation-framework

我想使用 mongoDB 的聚合框架来运行 SQL 中看起来有点像的东西：

```
SELECT SUM(A), B, C from myTable GROUP BY B, C; 
```

文档状态：

> 您可以指定管道中文档中的单个字段、先前计算的值或由多个传入字段组成的聚合键。

但目前还不清楚“由几个传入字段组成的聚合键”实际上是什么？

我的数据集有点像这样：

```
[{ "timeStamp" : 1341834988666, "label" : "sharon", "responseCode" : "200", "value" : 10, "success" : "true"},
{ "timeStamp" : 1341834988676, "label" : "paul", "responseCode" : "200", "value" : 60, "success" : "true"},
{ "timeStamp" : 1341834988686, "label" : "paul", "responseCode" : "404", "value" : 15, "success" : "true"},
{ "timeStamp" : 1341834988696, "label" : "sharon", "responseCode" : "200", "value" : 35, "success" : "false"},
{ "timeStamp" : 1341834988166, "label" : "paul", "responseCode" : "200", "value" : 40, "success" : "true"},
{ "timeStamp" : 1341834988266, "label" : "paul", "responseCode" : "404", "value" : 99, "success" : "false"}] 
```

我的查询如下所示：

```
resultsCollection.aggregate(
    { $match : { testid : testid} },
    { $skip : alreadyRead },
    { $project : {
            timeStamp : 1 ,
            label : 1,
            responseCode : 1 ,
            value : 1,
            success : 1
        }},
    { $group : {
            _id : "$label",
            max_timeStamp : { $timeStamp : 1 },
            count_responseCode : { $sum : 1 },
            avg_value : { $sum : "$value" },
            count_success : { $sum : 1 }
        }},
    { $group : {
            ?
        }}
); 
```

我的直觉是尝试将结果传递给第二组，我知道您可以这样做，但它不会起作用，因为第一组已经过多地减少了数据集并且丢失了所需的细节级别。

我想要做的是分组使用`label`，`responseCode`并`success`从结果中获取值的总和。它应该看起来有点像：

```
label   | code | success | sum_of_values | count
sharon  | 200  |  true   |      10       |   1
sharon  | 200  |  false  |      35       |   1
paul    | 200  |  true   |      100      |   2
paul    | 404  |  true   |      15       |   1
paul    | 404  |  false  |      99       |   1 
```

其中有五组：

```
1\. { "timeStamp" : 1341834988666, "label" : "sharon", "responseCode" : "200", "value" : 10, "success" : "true"}

2\. { "timeStamp" : 1341834988696, "label" : "sharon", "responseCode" : "200", "value" : 35, "success" : "false"}

3\. { "timeStamp" : 1341834988676, "label" : "paul", "responseCode" : "200", "value" : 60, "success" : "true"}
   { "timeStamp" : 1341834988166, "label" : "paul", "responseCode" : "200", "value" : 40, "success" : "true"}

4\. { "timeStamp" : 1341834988686, "label" : "paul", "responseCode" : "404", "value" : 15, "success" : "true"}

5\. { "timeStamp" : 1341834988266, "label" : "paul", "responseCode" : "404", "value" : 99, "success" : "false"} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-10T22:33:37.363

好的，所以解决方案是为 _id 值指定一个聚合键。这[在此处](http://docs.mongodb.org/manual/reference/aggregation/#_S_group)记录为：

> 您可以指定管道中文档中的单个字段、先前计算的值或由多个传入字段组成的聚合键。

但它实际上并没有定义聚合键的格式。[阅读这里](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-AggregationFramework)的早期文档，我看到以前的 collection.group 方法可以采用多个字段，并且在新框架中使用了相同的结构。

因此，要对多个字段进行分组，您可以使用`_id : { success:'$success', responseCode:'$responseCode', label:'$label'}`

如：

```
resultsCollection.aggregate(
{ $match : { testid : testid} },
{ $skip : alreadyRead },
{ $project : {
        timeStamp : 1 ,
        label : 1,
        responseCode : 1 ,
        value : 1,
        success : 1
    }},
{ $group : {
        _id :  { success:'$success', responseCode:'$responseCode', label:'$label'},
        max_timeStamp : { $timeStamp : 1 },
        count_responseCode : { $sum : 1 },
        avg_value : { $sum : "$value" },
        count_success : { $sum : 1 }
    }}
); 
```

# bash - 修复覆盖的 svn 文本库等

> ID：11418993
> 
> 赞同：0
> 
> 时间：2012-07-10T17:49:33.450
> 
> 标签：bash, svn, unix

我有一种情况，我正在使用 gitHub 来管理对我从使用 svn 的开源项目中提取的存储库的更改。

一切都很好，直到我意识到在使用`sed`更改内容时，我已经更改了 svn 跟踪文件。手动修复的太多了。

我基本上有[这个](http://glob.bushi.net.nz/glob/2007/02/14/subversion-checksum-mismatch-easy-workaround/)大规模的问题。

我需要这些完好无损，所以我想我会做以下事情：

1.  创建基于 svn 的原始代码的新本地工作副本。
2.  递归删除此树中的所有非“.svn”文件夹。IE，遇到我的项目树只有“.svn”文件夹及其内容的情况。
3.  递归删除“gitHub”树中的所有“.svn”文件夹。
4.  将“.svn”文件夹复制到“gitHub”树

三个问题：

*   这是可取的吗？
*   如果没有，关于如何恢复 svn 的任何建议？
*   如果在正确的轨道上，我如何实现第 2 步？IE，递归删除除“.svn”文件夹之外的所有内容？我在谷歌上找到了很多东西来做第 3 步，但这是这些的翻转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:26:26.427

通常，不要在目录之间复制 Subversion 元数据文件夹。***以这种***方式做事很容易陷入困境。

相反，请尝试创建一个脚本来恢复对 Subversion 元数据所做的更改。您可以使用该命令`find . -name .svn -exec some_command '{}' +`查找所有 Subversion 元数据文件夹并在它们上运行命令。替换`some_command`为执行递归恢复到最后已知工作状态所需的任何 git 命令。

另一种选择是在最后一个已知的工作状态下创建一个分支。从该分支工作，合并所有更改，但对元数据文件夹的更改*除外。*根据元数据损坏以来的时间长短，这可能是一种更简单的方法。

另请注意，如果您使用的是 Subversion 1.7，这会更容易一些，因为`.svn`每个工作副本只有一个文件夹，而不是每个目录一个。在这种情况下，使用`find`可能有点矫枉过正。

如果您需要删除除“ `.svn`”文件夹之外的所有内容，请尝试命令`find $folder -type f | grep -v '.svn' | xargs rm -f`。这将删除当前目录（递归到子目录）中路径中没有“.svn”的每个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:23:11.740

发现我最初提出的方法效果很好。

# 采取的步骤

*   创建等效于 'gitrepos' 的 'svnrepos' 以有两个子目录来保存实际的 repo 和原始文件集：

`mkdir /home/build/REPOS/svnrepos && mkdir /home/build/REPOS/svnrepos/repos && mkdir /home/build/REPOS/svnrepos/files`

*   创建本地 svn 存储库：

`cd /home/build/REPOS/svnrepos/repos && svnadmin create project_name`

*   获取原始源文件。这将解压为“project_name”：

`cd /home/build/REPOS/svnrepos/files && wget http://site.net/project_name.tar.gz && tar -xzf project_name.tar.gz`

*   将原始源文件导入新的本地仓库：

`svn import /home/build/REPOS/svnrepos/files/project_name file:///home/build/REPOS/svnrepos/repos/project_name -m "Initial import of project_name"`

*   重命名现有的“GIT_Project”文件夹，因为我们将使用此名称作为临时 svn 工作文件夹：

`cd /home/build/REPOS/gitrepos && mv GIT_Project GIT_Project_git`

*   创建新的 'GIT_Project' 文件夹并将 svn repo 签入：

`mkdir GIT_Project && svn co file:///home/build/REPOS/svnrepos/repos/project_name /home/build/REPOS/gitrepos/GIT_Project`

*   递归删除新临时 svn 工作文件夹中不在“.svn”目录树下的每个文件。保持文件夹结构不变：

`cd /home/build/REPOS/gitrepos/GIT_Project && find . -type f | grep -v '.svn' | xargs rm -f`

*   递归删除原始 git 版本文件夹中的每个“.svn”文件夹：

`cd /home/build/REPOS/gitrepos/GIT_Project_git && rm -rf`寻找 。-type d -name .svn`

*   从截断的临时 svn 工作文件夹创建一个 tar 文件：

`cd /home/build/REPOS/gitrepos && tar -czf svn.tgz GIT_Project`

*   删除临时 svn 工作文件夹：

`rm -fr GIT_Project`

*   将 git 版本文件夹重命名为其原始名称：

`mv GIT_Project_git GIT_Project`

*   解压缩截断的临时 svn 工作文件夹 tar 文件，以将更新的“.svn”文件夹和内容添加到 git 版本文件夹：

`tar -xzkf svn.tgz`

*   获取 git 版本文件夹的 svn 状态。它将显示
    带有“？”的已删除文件或文件夹 前缀和缺少带有“！”的文件或文件夹 字首。将列表保存到外部文件并使用查找和替换将它们分别更改为“svn add”和“svn delete”。记得跳过不应该添加到 svn 的文件和文件夹：

`cd GIT_Project && svn status`

*   使用修改后的 svn 状态输出来更新 svn：

`svn add fileORfolder_1 && svn add fileORfolder_2 ... && svn add fileORfolder_n`

`svn delete fileORfolder_1 && svn delete fileORfolder_2 ... && svn delete fileORfolder_n`

`svn commit -m "Realign svn and git"`

# c# - Windows 窗体关闭后不关闭？

> ID：11418995
> 
> 赞同：0
> 
> 时间：2012-07-10T17:49:43.657
> 
> 标签：c#, winforms

我做了一个非常简单的程序，但是当我使用右上角的红色 X 关闭它时，我仍然可以在进程下列出的 Windows 任务管理器中看到它。该程序仍在运行并消耗内存。我怎样才能避免这种情况？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework;

namespace PS3Controller
{
public partial class Form1 : Form
{
    GamePadState pad;

    Vector2 centroIzq = new Vector2(138, 132);
    Vector2 centroDer = new Vector2(139, 252);

    float distancia = 20f;

    float ledIzqAngulo = 0;
    float ledDerAngulo = 0;

    float ledIzqVelocidad = 0.0022f;
    float ledDerVelocidad = 0.0022f;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        pad = GamePad.GetState(Microsoft.Xna.Framework.PlayerIndex.One);

        if (pad.Buttons.Y == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledTtriangulo.Visible = true;
        else
            ledTtriangulo.Visible = false;

        if (pad.Buttons.X == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledCuadrado.Visible = true;
        else
            ledCuadrado.Visible = false;

        if (pad.Buttons.A == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledX.Visible = true;
        else
            ledX.Visible = false;

        if (pad.Buttons.B == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledCirculo.Visible = true;
        else
            ledCirculo.Visible = false;

        if (pad.DPad.Left == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledIzq.Visible = true;
        else
            ledIzq.Visible = false;

        if (pad.DPad.Right == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledDer.Visible = true;
        else
            ledDer.Visible = false;

        if (pad.DPad.Up == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledArriba.Visible = true;
        else
            ledArriba.Visible = false;

        if (pad.DPad.Down == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledAbajo.Visible = true;
        else
            ledAbajo.Visible = false;

        if (pad.Buttons.Start == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledStart.Visible = true;
        else
            ledStart.Visible = false;

        if (pad.Buttons.Back == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledSelect.Visible = true;
        else
            ledSelect.Visible = false;

        if (pad.Buttons.LeftShoulder == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledL1.Visible = true;
        else
            ledL1.Visible = false;

        if (pad.Buttons.RightShoulder == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledR1.Visible = true;
        else
            ledR1.Visible = false;

        if (pad.Buttons.BigButton == Microsoft.Xna.Framework.Input.ButtonState.Pressed)
            ledHome.Visible = true;
        else
            ledHome.Visible = false;

        if (pad.Triggers.Left > 0)
            ledL2.Visible = true;
        else
            ledL2.Visible = false;

        if (pad.Triggers.Right > 0)
            ledR2.Visible = true;
        else
            ledR2.Visible = false;

        lblIzqX.Text = pad.ThumbSticks.Left.X.ToString();
        lblIzqY.Text = pad.ThumbSticks.Left.Y.ToString();
        lblDerX.Text = pad.ThumbSticks.Right.X.ToString();
        lblDerY.Text = pad.ThumbSticks.Right.Y.ToString();

        Vector2 ledIzqPos = new Vector2(
            (float)Math.Cos(ledIzqAngulo) * distancia,
            (float)Math.Sin(ledIzqAngulo) * distancia);

        Vector2 ledDerPos = new Vector2(
            (float)Math.Cos(ledDerAngulo) * distancia,
            (float)Math.Sin(ledDerAngulo) * distancia);

        if (pad.ThumbSticks.Right.X == 0 &&
            pad.ThumbSticks.Right.Y == 0)
        {
            ledPadDer.Top = 139;
            ledPadDer.Left = 252;
        }

        if (pad.ThumbSticks.Left.X == 0 &&
            pad.ThumbSticks.Left.Y == 0)
        {
            ledPadIzq.Top = 138;
            ledPadIzq.Left = 132;
        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:57:12.267

请务必关闭该进程的所有线程...有时，尽管窗体已关闭，但线程仍保持进程继续执行...您可以在`OnClosing`windows 窗体的方法中执行此操作......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T17:58:00.597

您确定您的应用程序仍在运行还是 YourApp.vshost.exe？vshost 适用于 Visual Studio，并且在您打开项目时始终运行。

# voting-system - 投票系统向非注册用户开放

> ID：11418997
> 
> 赞同：0
> 
> 时间：2012-07-10T17:49:50.953
> 
> 标签：voting-system

嗨，我正在考虑实施一个简单的 Thumb Up 投票系统。问题是我想让投票系统甚至对未注册到网站的用户开放，同时我想跟踪用户是否已经投票（最好的情况是让用户有机会删除投票）。

饼干是最好的选择吗？如果访问者禁用了 cookie 怎么办？

任何建议都更值得赞赏！

非常感谢P。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:56:04.707

我可以想到两种方法来做到这一点：您可以通过计算机或 IP 跟踪用户。

如果您通过计算机进行跟踪，最好使用 cookie；但是，这是一个客户端解决方案，正如您所指出的，禁用 cookie 的用户可以绕过它。

使用 IP 跟踪用户具有服务器端的优势（因此不能被用户禁用）；但是，存在多个用户在同一个公共 IP 上、用户在不同地点之间移动等问题。它比使用 cookie 进行跟踪更不可靠。

在我看来，cookies 是你最好的选择。它更可靠，如果他们没有启用 cookie，那么您可以对此进行测试，也许只是不给他们投票（或通过 IP 跟踪）。

# .net - 如何创建和运行一个新线程？

> ID：11418999
> 
> 赞同：0
> 
> 时间：2012-07-10T17:49:56.033
> 
> 标签：.net, winforms, multithreading, c++-cli, managed-c++

我创建了一个`System::Windows::Forms`定义函数的类：

```
System::Void expanding(System::Windows::Forms::TreeViewEventArgs^ e)
{
    //some code
} 
```

我想通过键入以下内容在单独的线程中调用：

```
Thread^ thisThread = gcnew Thread(
    gcnew ThreadStart(this,&Form1::expanding(e)));
    thisThread->Start(); 
```

where由组件的函数`e`传递。`afterCheck``treeView`

根据[这个来自 MSDN 的例子，](http://msdn.microsoft.com/en-us/library/ts553s52%28v=vs.90%29.aspx)一切都应该可以正常工作，但是我得到一个编译器错误：

> 错误 C3350：“System::Threading::ThreadStart”：委托构造函数需要 2 个参数

和

> 错误 C2102：“&”需要左值

我试图创建一个`Form1`与 MSDN 示例中显示的完全相同的新实例，但我的结果是相同的。

* * *

@Tudor adivced 做到了。但是使用**System::Threading**我无法修改 Form1 类中的任何组件。所以我一直在寻找其他解决方案，我发现[了这个](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

也许我不理解**BackgroundWorker**的工作方式，但它会阻止 GUI。

我想要完成的是运行单独的线程（无论它需要以什么方式完成），这将使 gui 可管理，因此用户将能够使用特定按钮停止进程，并且这个新线程将能够使用来自父线程的组件.

**这是我使用BackgroundWorker**的示例代码

 **```
//Worker initialization
this->backgroundWorker1->WorkerReportsProgress = true;
            this->backgroundWorker1->DoWork += gcnew System::ComponentModel::DoWorkEventHandler(this, &Form1::backgroundWorker1_DoWork);
            this->backgroundWorker1->ProgressChanged += gcnew System::ComponentModel::ProgressChangedEventHandler(this, &Form1::backgroundWorker1_ProgressChanged);
            this->backgroundWorker1->RunWorkerCompleted += gcnew System::ComponentModel::RunWorkerCompletedEventHandler(this, &Form1::backgroundWorker1_RunWorkerCompleted); 
```

按钮单击事件处理程序调用异步操作

```
System::Void fetchClick(System::Object^  sender, System::EventArgs^  e) {
         dirsCreator();//List of directories to be fetched
         backgroundWorker1 ->RunWorkerAsync();       
     } 
```

**DoWork**函数是一个基本的递归获取函数

```
System::Void fetch(String^ thisFile)
     {
         try{
         DirectoryInfo^ dirs = gcnew DirectoryInfo(thisFile);
         array<FileSystemInfo^>^dir = (dirs->GetFileSystemInfos());
         if(dir->Length>0)

             for(int i =0 ;i<dir->Length;i++)
             {
                 if((dir[i]->Attributes & FileAttributes::Directory) == FileAttributes::Directory)
                     fetch(dir[i]->FullName);
                 else
                     **backgroundWorker1 -> ReportProgress(0, dir[i]->FullName);**//here i send results to be printed on gui RichTextBox

             }
         }catch(...){}
      } 
```

这是报告功能

```
System::Void backgroundWorker1_ProgressChanged(System::Object^  sender, System::ComponentModel::ProgressChangedEventArgs^  e) {
             this->outputBox->AppendText((e->UserState->ToString())+"\n");
             this->progressBar1->Value = (this->rand->Next(1, 99));
         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:52:33.910

您不必为函数调用指定参数：

```
Thread^ thisThread = gcnew Thread(
         gcnew ThreadStart(this,&Form1::expanding));
         thisThread->Start(); 
```

此外，该函数不应带任何参数，否则它不符合`ThreadStart`签名。

查看更多示例的[MSDN 页面。](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx#Y0)`Thread`**