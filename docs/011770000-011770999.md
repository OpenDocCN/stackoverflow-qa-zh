# StackOverflow 问答 11770000-11770999

# jquery - JQuery 工具覆盖和链接

> ID：11770001
> 
> 赞同：1
> 
> 时间：2012-08-02T01:53:18.000
> 
> 标签：jquery, overlay, jquery-tools

我在使用 JQuery Tools Overlay 时遇到了一些问题。在我的场景中，我有一个链接到 PDF 文件的图像，以便通过“_blank”目标下载。当用户单击链接时，我希望链接启动*并且*我还希望调用 .overlay() 。似乎调用了 .overlay() ，但从未执行过链接。任何人都知道如何获得所需的行为？

这是我的图像：

```
<a target='_blank' href='log.server.php?sid=26'><img class='options-img' rel='#img-transcript' src='images/pdf_icon.png' alt='Download Transcript' title='Download Transcript'/></a> 
```

这是我对叠加层的调用：

```
$(function() {
    $("img[rel]").overlay();
}); 
```

最后是叠加层：

```
<div class="overlay" id="img-transcript">
  <img src="about.png" style="float:left; margin:0 15px 20px 0" />
  <table style="margin:0">
    <tr>
      <div class="label">Success!</div>
      <div class="message">Your transcript has been downloaded. See downloads to view.</div>
    </tr>
  </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:12:07.433

我有一种感觉，当您以这种方式使用 jQuery 工具时，它会阻止链接的默认操作。

我发现稍微重构你的代码可以让它工作：

```
$("#img-transcript").overlay({
    load: false // don't initially load the dialog
});

/* Load the overlay on click: */
$("a").on("click", function () {
    $("#img-transcript").data("overlay").load();
}); 
```

**示例： http:** [//jsfiddle.net/h5NHk/](http://jsfiddle.net/h5NHk/)（对不起所有的猫）

# php - 使用 JavaScript onclick submit 执行 PHP

> ID：11770005
> 
> 赞同：0
> 
> 时间：2012-08-02T01:54:23.103
> 
> 标签：php, javascript, pdo, onclick

如何使用 JavaScript onclick 按钮执行 PHP？我可以让表单提交，但 PHP 没有得到执行。我想这是因为`if(isset($_POST['form']))`

这是我要执行的 PHP：

```
if(isset($_POST['form']))
{
    if(!isset($error))
    {
        $database->query('UPDATE table SET field = :value WHERE id = :id', array(':field' => $value, ':id' => $id));
    }
} 
```

这是我的`<form>`标签之前的按钮：

```
<div onclick="javascript: $(\'#form\').submit();">Update</div> 
```

当然，我的`<form>`标签看起来像这样：

```
<form name="form" id="form" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
  <select name="value">
    <option value="1">Value1</option>
    <option value="2">Value2</option>
    <option value="3">Value3</option>
  </select>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:57:08.677

PHP 通常运行在服务器端。JavaScript 通常在浏览器中运行。您需要将 PHP`blah.php`放在服务器上的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:06:44.683

我怀疑你有一个`$_POST['form']`变量。 `$_POST`将包含所有表单元素的 ID，例如电子邮件、电话、姓名等... `$_POST['email']`，但可能不包含通用的“表单”键。

我会用 `if (isset($_POST))`

# c# - 每 2 分钟运行一次任务调度程序

> ID：11770007
> 
> 赞同：1
> 
> 时间：2012-08-01T13:11:28.663
> 
> 标签：c#

我想创建每 2 分钟触发一次的任务计划程序。我正在使用以下命名空间

使用 Microsoft.Win32.TaskScheduler

我写了以下代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Win32.TaskScheduler;

namespace SchedulerTest1
{
    class Program
    {
        static void Main(string[] args)
        {
            // Get the service on the local machine
            using (TaskService ts = new TaskService())
            {
                // Create a new task definition and assign properties
                TaskDefinition td = ts.NewTask();
                td.RegistrationInfo.Description = "Does something";

                // Create a trigger that will fire the task at this time every other day
                td.Triggers.Add(new DailyTrigger());

                // Create an action that will launch Notepad whenever the trigger fires
                td.Actions.Add(new ExecAction("notepad.exe", "D:\\test.log", null));

                // Register the task in the root folder
                ts.RootFolder.RegisterTaskDefinition(@"Test", td);

                // Remove the task we just created
                ts.RootFolder.DeleteTask("Test");
            }
        }
    }
} 
```

我想每 2 分钟运行一次任务。在我的代码中需要更新什么？帮我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T13:40:07.410

我刚刚遇到了同样的挑战。基本上，您创建一个 TimeTrigger 并设置间隔，如下所示：

```
 // Get the service on the local machine
    using (var ts = new TaskService())
    {
      // Create a new task definition and assign properties
      TaskDefinition td = ts.NewTask();
      td.Settings.MultipleInstances = TaskInstancesPolicy.IgnoreNew;          
      td.RegistrationInfo.Description = "FTP, Photo and Cleanup tasks";

      // Create a trigger that will execute very 2 minutes. 
      var trigger = new TimeTrigger();
      trigger.Repetition.Interval = TimeSpan.FromMinutes(2);                    
      td.Triggers.Add(trigger);         

      // Create an action that will launch my jobs whenever the trigger fires
      td.Actions.Add(new ExecAction(System.Reflection.Assembly.GetExecutingAssembly().Location, null, Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location)));

      // Register the task in the root folder
      ts.RootFolder.RegisterTaskDefinition(@"My Task Name", td);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T02:47:15.227

由于您使用的是[Task Scheduler Managed Wrapper](http://taskscheduler.codeplex.com)库，我建议您查阅[Triggers](http://taskscheduler.codeplex.com/wikipage?title=TriggerSamples&referringTitle=Documentation)的文档。更具体地说，阅读如何使用`TimeTrigger`类以及如何使用它来指定重复间隔的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T13:13:55.237

我不知道代码，但是......你需要指定频率。在命令行上运行：

> schtasks /create /SC MINUTE /MO 2 /TN DoThis /tr "notepad d:\test.log"

这应该每 2 分钟重复一次（在 cmd 行上）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-23T10:43:25.933

如果您想在特定时间触发为什么不使用服务，它将每 2 分钟自动触发您的电脑启动，例如

```
Timer timer = new Timer();

protected override void OnStart(string[] args)
    {

        //handle Elapsed event
        timer.Elapsed += new ElapsedEventHandler(OnElapsedTime);

        //This statement is used to set interval to 2minute (= 60,000 milliseconds)

        timer.Interval = 120000;

        //enabling the timer
        timer.Enabled = true;

    }
 private void OnElapsedTime(object source, ElapsedEventArgs e)
    {
       // writr code here for 
      //run your Note pad file using process.start or using batch file
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-06T20:25:31.657

为 Task Scheduler v2.0 提供更新的答案。

您不能再以小于 5 分钟的间隔重复任务，但您始终可以使用 StartBoundary 偏移数分钟多次注册任务，以获得您需要的确切重复模式。如果您决定这样做，请务必更改 regTask 参数中的名称，否则注册只会更新先前注册的任务。

为下面的额外使用引用道歉，我从一个更大的模块中提取了这个，不想花时间弄清楚下面的代码不需要哪些：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using Microsoft.Win32;
using TaskScheduler;

private void CreateWindowsTask()
{
    TaskScheduler.TaskScheduler ts = new TaskScheduler.TaskScheduler();
    ts.Connect(null, null, null, null); //connect to local machine as current user
    ITaskDefinition task = ts.NewTask(0);
    task.RegistrationInfo.Author = System.Security.Principal.WindowsIdentity.GetCurrent().Name;
    task.RegistrationInfo.Description = "Put your desription here";

    ITrigger trigger = (ITrigger)task.Triggers.Create(_TASK_TRIGGER_TYPE2.TASK_TRIGGER_DAILY);
    trigger.Id = "MyTimeTrigger";
    string StartTime = "T" + DateTime.Now.ToString("HH:MM:00");
    trigger.StartBoundary = DateTime.Now.ToString("yyyy-MM-dd") + StartTime;
    trigger.EndBoundary = DateTime.Now.Date.AddYears(2).ToString("yyyy-MM-dd") + "T12:00:00";
    trigger.Repetition.Interval = "PT5M";   //5 minutes
    trigger.Repetition.Duration = "P1D";    //repeat for 1 day
    trigger.Repetition.StopAtDurationEnd = true;

    IExecAction action = (IExecAction)task.Actions.Create(_TASK_ACTION_TYPE.TASK_ACTION_EXEC);
    action.Id = "MyAction";
    action.Path = "C:\\Windows\\System32\\notepad.exe";

    ITaskFolder root = ts.GetFolder("\\");
    IRegisteredTask regTask = root.RegisterTaskDefinition(
        "Task Scheduler Demo",
        task,
        (int)_TASK_CREATION.TASK_CREATE_OR_UPDATE,
        null, null, //user, passwrod
        _TASK_LOGON_TYPE.TASK_LOGON_INTERACTIVE_TOKEN,
        ""          //sddl
        );
    IRunningTask runTask = regTask.Run(null);
} 
```

# php - PHP动态命名和访问变量

> ID：11770010
> 
> 赞同：-2
> 
> 时间：2012-08-02T01:55:40.680
> 
> 标签：php, variables

```
$var1 = 'First Variable';
$var2 = 'Second Variable';
$var3 = 'Third Variable';

$number = 2;

$variable_to_get = 'var'.$number; 
```

假设您想根据 $number 是什么来回显一个变量；例如，在这种情况下，$number 是 2，所以我们想要回显 $var2。如果不使用 switch 语句/ifs，你将如何做到这一点；只是直接命名一个变量并显示结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:00:14.107

变量变量

```
echo ${'var'.$number}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:59:41.250

不确定，可能是牙套？${'var'.$number} 只是一个猜测

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T02:05:56.737

你最好使用数组。

```
$var = array(
   'first variable',
   'second variable',
   'third variable',
); 
```

所以你会有`$var`这样的：

```
array (
    [0] => 'first variable',
    [1] => 'second variable',
    [2] => 'third variable',
) 
```

然后获取值：

```
$variable_to_get = $var[$number-1]; 
```

`$number`应该是 -1，因为数组从索引 0 开始。

另一种方法，您可以直接分配其索引。

```
$var[1] = 'first variable'
$var[2] = 'second variable'
$var[3] = 'third variable' 
```

但是，如果您真的希望使用

```
$var1 = 'First Variable';
$var2 = 'Second Variable';
$var3 = 'Third Variable';

$number = 2;

$variable_to_get = 'var'.$number; 
```

尝试使用[eval](http://php.net/manual/en/function.eval.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T01:59:56.177

```
$var = array('First Variable','Second Variable','Third Variable');

$variable_to_get = 'var'.$var[0]; // returns First Variable

$variable_to_get = 'var'.$var[1]; // returns Second Variable 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T02:04:35.410

您可以使用双 $$ 来访问变量名称作为第二个变量中的字符串。第二个访问变量字符串，第一个访问名为字符串的变量：

```
$foo = 'bar';
$bar = 'foo';

echo $$foo; // echoes foo 
```

在你的情况下意味着：

```
$var1 = 'First Variable';
$var2 = 'Second Variable';
$var3 = 'Third Variable';

$number = 2;

$variable_to_get = 'var'.$number; //will contain the string 'var2'

echo $$variable_to_get; //echoes 'Second Variable' 
```

# linux - IPsec/Openswan 记录用户名和公网 IP

> ID：11770012
> 
> 赞同：1
> 
> 时间：2012-08-02T01:55:54.387
> 
> 标签：linux, vpn, ipsec

我正在尝试建立一个更有条理的 openswan 日志系统，但我想我已经想多了。我真的只是想保存用户名和公共 IP。到目前为止，这是我所做的，但它仍然返回比我需要的更多的数据，我宁愿不构建一个复杂的解析器。我想必须有一种方法来获取这些信息而不会变得过于复杂。

```
ipsec 自动 --status | grep 'STATE_MAIN_R3' > /home/ipsec.log
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-20T19:05:38.573

提供您用于身份验证的协议将有所帮助

既然你提到了“用户名和公共 IP”，我猜你正在做某种道路担忧 IPSec 连接。如果这是真的，那么对于 openswan，它通常是 L2TP/IPSec。在这种情况下，您将不会在“ipsec auto --status”中看到用户 ID，因为用户身份验证是由 L2TP/PPP 堆栈完成的。如果您使用的是 xl2tpd，那么它通常会登录到 /var/log/syslog

希望这会有所帮助

# linq - 无法强制 LINQ 评估

> ID：11770025
> 
> 赞同：0
> 
> 时间：2012-08-02T01:58:11.157
> 
> 标签：linq, automapper

如果页面上发生错误，我正在尝试获取记录并将其存储以供以后使用。

此代码用于创建/编辑。所以我从视图模型中获取值并映射到数据库实体：

```
Dim objExistingSupplier As SUPPLIER = db.SUPPLIER.Single(Function(e) e.SUPPLIER_ID = Supplier.SUPPLIER_ID)
objPermStaffAction = objExistingSupplier
objSupplier = Mapper.Map(Of SupplierViewModel, SUPPLIER)(Supplier, objExistingSupplier) 
```

据我了解， .Single 应该强制评估。但是，映射发生后，objPermStaffAction 对象中的属性会丢失/更改。有人可以解释我做错了什么吗？

这是整个功能：

```
 Private Function SaveSupplier(Supplier As SupplierViewModel) As ActionResult
        Dim objSupplier, objPermStaffAction As SUPPLIER
        If Supplier.SUPPLIER_ID = 0 Then
            objSupplier = Mapper.Map(Of SupplierViewModel, SUPPLIER)(Supplier)
        Else
            Dim objExistingSupplier As SUPPLIER = db.SUPPLIER.Single(Function(e) e.SUPPLIER_ID = Supplier.SUPPLIER_ID)
            objPermStaffAction = objExistingSupplier
            objSupplier = Mapper.Map(Of SupplierViewModel, SUPPLIER)(Supplier, objExistingSupplier)
        End If

        If ModelState.IsValid Then
            If Supplier.SUPPLIER_ID = 0 Then
                objSupplier.CREATED_BY = Session("AppUserID")
                db.SUPPLIER.Add(objSupplier)
            Else
                objSupplier.UPDATED_BY = Session("AppUserID")
                UpdateModel(objSupplier)
            End If

            Try
                db.SaveChanges()
                Return RedirectToAction("Index")
            Catch ex As Exception
                If InStr(ex.InnerException.InnerException.Message, "PRSNL.SUPPLIER_UK") > 0 Then
                    ModelState.AddModelError("SUPPLIER_CODE", "Supplier Code already exists. Please choose another.")
                End If
            End Try

        End If

        'This will run if an error occured
        If Supplier.SUPPLIER_ID > 0 Then
            Supplier = Mapper.Map(Of SupplierViewModel)(objPermStaffAction)
        End If
        ViewBag.YNList = Common.GetYNList
        Return View(Supplier)
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:06:14.190

SupplierViewModel 是引用类型。所以 objPermStaffAction 指的是映射后更新的同一个对象。

为什么需要原始（未映射）对象？

# javascript - 归属地未显示在谷歌地图上

> ID：11770031
> 
> 赞同：0
> 
> 时间：2012-08-02T01:59:01.157
> 
> 标签：javascript, mobile, jquery-mobile, google-maps-api-3

所以我今天注意到应该与地图一起使用的谷歌属性没有显示出来。有没有一种简单的方法可以让我手动将它放在地图上的某个地方？

该地图正在使用 Javascript v3 api 构建。我们正在使用 html5/javascript、jquery 和 jquery mobile 来构建 iOS 和 android 上运行手机差距的应用程序的内容。

```
var myOptions = {
        center: currentLocation,
        zoom: 15,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        panControl: false
    };

    map = new google.maps.Map(element[0], myOptions); 
```

这就是我设置地图的方式。

编辑：找到了！我第一次检查页面元素时找不到归属信息的内容，但今天早上我找到了。似乎其他东西正在设置我的地图 div 的高度，它正在推动屏幕的版权信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:02:01.203

我不相信有任何方法可以选择性地摆脱 Maps API v3 中的 Google 归因。

如果它只是没有出现，那可能是 Maps API 中的一个错误。我不会担心的。如果他们非常关心归因，谷歌会修复它。

如果您真的认为这是您正在做的事情而不是 API 中的错误，请发布一些代码，也许有人可以弄清楚发生了什么。

# javascript - Jquery - 加载动态内容时悬停效果不起作用 - 带有hastags的URI

> ID：11770035
> 
> 赞同：4
> 
> 时间：2012-08-02T01:59:29.923
> 
> 标签：javascript, jquery, dynamic, hover

我目前正在网站上工作前端。我正在使用 jquery 来创建动态内容。

我的问题是，当我键入我的 URI (localhost/jquery/myfile/) 并加载 index.php 时，我的 jquery 脚本可以工作，但是当我单击导航栏并且我的 #index.php 被放置在 URI (localhost /jquery/myfile/#index.php）我的一个 js 脚本，一个具有悬停效果的脚本不起作用（但我所有的其他 js 文件都可以工作，例如我的导航菜单脚本，其中也包含悬停效果） .

我进行了研究，发现当加载新的 URI 时，悬停效果停止工作。

**索引.php**

```
<section id="main-content">
<div id="guts">
    <div id="items">
        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span style="display: none;" class="caption">8 Extremely </span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span class="caption">8 Amazing Javascript Experiments of Physic and Gravity Simulation</span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span class="caption">8 Incredible Wordpress Plugins</span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span class="caption">9 Web CSS Tools You Must Know</span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span style="display: none;" class="caption">10 Image Galleries jQuery Script with Thumbnail Filmstrip</span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span style="display: none;" class="caption">Single Page Websites With Creative Javascript Effects</span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span class="caption">13 Simple but Useful Online Tools for Web Development</span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span class="caption">8 Ways to Increase the Readibility and Beautify your HTML Code</span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span class="caption">12 Insanely Awesome Javascript Effects</span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span style="display: none;" class="caption">10 New jQuery Plugins You Have to Know</span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span class="caption">20 Firefox Plug-ins for Web Designers and Developers</span></a>

        <a style="opacity: 1;" class="item" href="#" title="">
        <img src="#" width="190" height="120">
        <span class="caption">12 Amazing and Creative Javascript Games</span></a>
    </div>
</div>
</section> 
```

**ext.js**

```
$(document).ready(function () {

//loop through all the children in #items
//save title value to a span and then remove the value of the title to avoid tooltips
$('#items .item').each(function () {
    title = $(this).attr('title');
    $(this).append('<span class="caption">' + title + '</span>');  
    $(this).attr('title','');
});

$('#items .item').hover(
    function () {
        //set the opacity of all siblings
        $(this).siblings().css({'opacity': '0.2'});

        //set the opacity of current item to full, and add the effect class
        $(this).css({'opacity': '1.0'}).addClass('effect');

        //show the caption
        $(this).children('.caption').show();   
    },
    function () {
        //hide the caption
        $(this).children('.caption').hide();       
    }
);

$('#items').mouseleave(function () {
    //reset all the opacity to full and remove effect class
    $(this).children().fadeTo('100', '1.0').removeClass('effect');     
});   
}); 
```

**动态页面.js**

```
$(document).ready(function () {

$(function() {

    var newHash      = "",
        $mainContent = $("#main-content"),
        $pageWrap    = $("#page-wrap"),
        baseHeight   = 0,
        $el;

    $pageWrap.height($pageWrap.height());
    baseHeight = $pageWrap.height() - $mainContent.height();

    $("nav").delegate("a", "click", function() {
        window.location.hash = $(this).attr("href");
        return false;
    });

    $(window).bind('hashchange', function(){

        newHash = window.location.hash.substring(1);

        if (newHash) {
            $mainContent
                .find("#guts")
                .fadeOut(200, function() {
                    $mainContent.hide().load(newHash + " #guts", function() {
                        $mainContent.fadeIn(200, function() {
                            $pageWrap.animate({
                                height: baseHeight + $mainContent.height() + "px"
                            });
                        });
                        $("nav a").removeClass("current");
                        $("nav a[href='"+newHash+"']").addClass("current");
                    });
                });
        };

    });

    $(window).trigger('hashchange');
});
}); 
```

如果您能帮我找出发生这种情况的原因，我将不胜感激。

在此先感谢，harris21

**编辑：* *我的动态菜单工作正常，问题是 ext.js 脚本不工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T02:11:10.270

如果您使用的是最新版本的 jQuery（1.7+），请尝试使用 on()，如果是旧版本，请尝试使用 delegate()，而不仅仅是 hover()

像这样：

```
$("#main-content").on("mouseenter", "#items .item", function(event){
// your function
}).on("mouseleave", "#items .item", function(event){
// your function
}); 
```

见：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:11:55.980

处理动态内容时，请务必使用`jquery.on`（较新版本的 live）。

```
$.on('click', function(){

}); 
```

代替

```
$.click(function(){}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T20:18:48.410

我找到了一些解决这个问题的方法。

```
$(document).on("mousemove",".objectclass",function(){
   console.log("mousemove");
}); 
```

它工作正常！

# python - 在 Django 模板中访问字典值时遇到问题

> ID：11770036
> 
> 赞同：0
> 
> 时间：2012-08-02T01:59:32.810
> 
> 标签：python, django-templates

这是我的视图功能：

```
def detail(request, movie_id):
    movie = Movie.objects.get(id = movie_id)
    movieReleases = Release.objects.filter(movie = movie)
    reviews = Review.objects.filter(movie = movie)

    initRating = 0

    if request.user.is_authenticated():
        user = Account.objects.get(user = request.user.id)
        try:
            myreview = Review.objects.get(movie = movie, user = user)
            initRating = myreview.rating
        except:
            pass

        releaseContext = dict()
        for release in movieReleases:
            if release.isReleased():
                releaseContext[release.id] = {'buttonURL' : reverse('movies.views.add', args=(release.id,)), 'buttonText' : 'Add to cart'}
            elif MovieReleaseReminder.objects.filter(account=user, movie=release).exists():
                releaseContext[release.id] = {'buttonURL' : reverse('movies.views.unsubscribeFromReleaseReminder', args=(release.id,)), 'buttonText' : 'Unsubscribe from release reminder'}
            else:
                releaseContext[release.id] = {'buttonURL' : reverse('movies.views.subscribeForReleaseReminder', args=(release.id,)), 'buttonText' : 'Subscribe to release reminder'}

        if MovieUpdateSubscription.objects.filter(account=user, movie=movie).exists():
            movieSubscribeURL = reverse('movies.views.unsubscribeFromUpdates', args=(movie.id,))
            movieSubscribeButtonText = 'Unsubscribe from updates'
        else:
            movieSubscribeURL = reverse('movies.views.subscribeForUpdates', args=(movie.id,))
            movieSubscribeButtonText = 'Subscribe for updates'

    else:
        releaseContext = None
        movieSubscribeURL = None
        movieSubscribeButtonText = None

    averageRating = calculateAverageRating(movie)

    t = loader.get_template('movies/detail.html')
    c = RequestContext(request, {'movie' : movie,
                                 'movieReleases' : movieReleases,
                                 'releaseContext' : releaseContext,
                                 'reviews': reviews,
                                 'averageRating': averageRating,
                                 'initRating': initRating,
                                 'movieSubscribeURL' : movieSubscribeURL,
                                 'movieSubscribeButtonText' : movieSubscribeButtonText})
    return HttpResponse(t.render(c)) 
```

这是有问题的模板代码：

```
{% if movieReleases%}
    <table border="1px">
        {% for release in movieReleases %}
            <tr>
                <td>{{release.format}}</td>
                <td>{{release.region}}</td>
                <td>{{release.price}}</td>
                {% if user.is_authenticated %}
                    {% with release_id=release.id %}
                        <td><form action="{{ releaseContext.release_id.buttonURL }}" method="post">{% csrf_token %}<input type="submit" value="{{ releaseContext.release_id.buttonText }}" /></form></td>
                    {% endwith %}
                {% endif %}
            </tr>
        {% endfor %}
    </table>
{% endif %} 
```

问题是，在渲染模板时，两者`{{ releaseContext.release_id.buttonURL }}`都`{{ releaseContext.release_id.buttonText }}`评估为空字符串，即使我已经在调试器中检查了 releaseContext 具有适当的数据。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:42:39.220

由于`releaseContext`是字典，因此您需要的不是属性查找 (xy)，而是元素查找 (x[y])。

所以而不是：

`{{ releaseContext.release_id.buttonURL }}`

利用

`{{ releaseContext['release_id']['buttonURL'] }}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-20T17:59:42.260

在将值传递给模板之前尝试从字典中获取值：

```
{% display = releaseContext['release_id']['buttonURL'] %}
{{ display }} 
```

# iphone - 您将如何暂停 iPhone 游戏？

> ID：11770039
> 
> 赞同：0
> 
> 时间：2012-08-02T01:59:41.250
> 
> 标签：iphone, ios, xcode

我希望能够暂停我的 iphone 游戏，而不仅仅是暂停它，而是基本上冻结它，除非按下继续按钮，否则只解冻它。我不能仅仅消除用户交互并停止所有动画，因为方法不断在计时器上运行。想象一下与敌人一起射击，你会如何暂停这种类型的游戏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T03:13:42.563

你的游戏中应该有一个主游戏循环，它基本上测量上次更新的时间增量，根据增量更新游戏状态并重绘。当这个循环停止旋转时，游戏就暂停了。定时器与主循环解决方案并没有真正的不同，只是暂停定时器，你就暂停了游戏。

# jquery - 改进多个 if 语句的语法？

> ID：11770044
> 
> 赞同：0
> 
> 时间：2012-08-02T02:00:15.867
> 
> 标签：jquery, loops, syntax, if-statement

有没有办法让这个更漂亮？

```
if ($("#Input").text === "A") { sOutput = "a"; lColor = "red"; }
if ($("#Input").text === "B") { sOutput = "b"; lColor = "orange"; }
if ($("#Input").text === "C") { sOutput = "c"; lColor = "yellow"; }
if ($("#Input").text === "D") { sOutput = "d"; lColor = "green"; }
if ($("#Input").text === "E") { sOutput = "e"; lColor = "blue"; }
if ($("#Input").text === "F") { sOutput = "f"; lColor = "violet"; }
... 
```

真正的代码要广泛得多，带有 && 和 || 不同变量之间。但是每一行都遵循相同的语法，保存我正在寻找的“字母”和我设置的变量。我有这么多ifs，这让我觉得很浪费。

*代码是虚拟代码来说明我的观点。

*编辑*

虚拟代码并不能说明我的观点，所以这里有一个真实的示例；

```
 if ($(".Fig_Main").hasClass("Active")) {
        sect_1 =  (($(".Fig_A").hasClass("Active")) && ($(".Fig_1").hasClass("Active"))) ? "Slide_A1"
              : (($(".Fig_A").hasClass("Active")) && ($(".Fig_B").hasClass("Active"))) ? "Slide_AB"
              : (($(".Fig_1").hasClass("Active")) && ($(".Fig_B").hasClass("Active"))) ? "Slide_1B"
              : (($(".Fig_1").hasClass("Active")) && ($(".Fig_3").hasClass("Active"))) ? "Slide_13"
              ... 
```

我将这个块（长几行）重复了几次，每次都使用不同的 sect_# 和结果设置值（Slide_XY）。

非常感谢所有当前的建议。保持它来。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T02:03:36.963

你可以这样做：

```
var dic = {
  "a": "red",
  "b": "orange",
  "c": "yellow",
  "d": "green",
  "e": "blue",
  "f": "violet"
};

sOutput = $("#Input").text().toLowerCase();
lColor = dic[sOutput]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T02:03:41.543

您可以使用对象文字。

```
//extend the object as needed.
var obj = {
    'A': { sOutput:'a', lColor: 'red' },
    'B': { sOutput:'b', lColor: 'orange' },
}

var x = 'B';

console.log( obj[x] ); 
```

编辑：

您甚至可以进一步测试以查看是否定义了“x”变量的值：

```
var x = 'Z';

if( !(x in obj) ){
     //do stuff if Z isn't defined
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:22:52.007

`switch`语句可读。你可以尝试任何其他花哨的方式，但对我来说，可读性是第一要务。

```
switch ($("#Input").text){
    case "A": 
        sOutput = "a"; 
        lColor = "red";
        break;
    case "B":
        sOutput = "b"; 
        lColor = "orange"; 
        break;
    case "C": 
       sOutput = "c"; 
       lColor = "yellow";
       break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T15:19:55.083

我决定重新设计我的整个逻辑，并开发出更好的东西。

感谢大家的帮助！

# python - 第三方库和 Py2exe

> ID：11770046
> 
> 赞同：1
> 
> 时间：2012-08-02T02:00:26.477
> 
> 标签：python, beautifulsoup, exe, py2exe

我将如何使用 py2exe 将美丽的汤与我的代码捆绑到一个 exe 中？

我现在用于 setup.py 的代码是

```
from distutils.core import setup
import py2exe

# equivalent command line with options is:
# python setup.py py2exe --compressed --bundle-files=2 --dist-dir="my/dist/dir" --dll-excludes="w9xpopen.exe"
options = {'py2exe': {
           'compressed':1,  
           'bundle_files': 1, 
           'dist_dir': "exe/dist/dir"
           'dll_excludes'  }}

setup(console=[''], options=options,zipfile = None) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T02:03:02.830

在您的`options`中，您可以添加一个属性`includes`并以这种方式添加库。一个例子：

```
options = { "py2exe": {
                "includes": ["LIBRARY HERE", ...]
          }} 
```

这包括 Py2exe 尚未找到的外部库。如果我没记错的话，Py2exe 应该尝试找到它自己的依赖项，任何它没有找到的都可以使用上述方法。

我不确定 Beautiful Soup 的库结构，因为我没有使用它，但一个例子是：

`"includes": ["matplotlib.backends.backend_tkagg"]`

# c# - 在 TFS 中创建的 Dll 不起作用

> ID：11770047
> 
> 赞同：0
> 
> 时间：2012-08-02T02:00:55.977
> 
> 标签：c#, dll, tfs

我尝试使用 VS2010 在 TFS 中创建 .dll 并在新项目中使用 .dll。但是，它不断返回一条错误消息，指出无法找到该方法的实体点。

为了查看类库的代码是否有错误，我创建了另一个类库项目，但这次没有在 TFS 中。这完全有效。C# 可以使用“使用”来引用这个。

但是，无法引用在 TFS 中创建的那个。

我想问一下，我创建的这两个.dll 有什么区别，我该怎么做才能成功引用我在TFS 中创建的.dll。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T15:17:58.857

您确定错误没有说“未找到入口点”吗？当一个项目设置为以 x86 格式构建时，我已经多次看到它应该在 x64 或 AnyCPU 中构建。右键单击解决方案并转到属性。单击配置属性。找到您的项目并查看 Platform 列。AnyCPU 通常是您最安全的选择。

# c++ - 使用 STL 克隆有哪些优势？

> ID：11770050
> 
> 赞同：3
> 
> 时间：2012-08-02T02:01:31.573
> 
> 标签：c++, stl

*   我什么时候需要 C++ 的 STL 的替代品？
*   使用替代 STL 有什么优势吗？
*   如果有的话，你会推荐哪些？

很抱歉这些菜鸟要点，但我看到很多产品都链接了不同的 STL，我想知道这样的东西什么时候有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T02:11:42.160

我假设您在谈论 STL 的替代实现，而不是 STL 的替代方案。

您可能使用 3rd 方 STL 实现而不是编译器提供的默认实现有几个原因。

1.  一致性 - 您可能正在使用多个编译器并希望确保在每个平台上获得相同的行为。

2.  速度 - 一种实现可能比您的编译器提供的更有效。

3.  完整性 - 您的编译器默认库可能无法提供完整的 STL 功能。（这可能仅适用于旧编译器、嵌入式系统编译器或 C++11 功能）。

4.  额外功能 - STL 的一些实现提供了改进的无效迭代器调试等功能，这些功能可能不在您的编译器实现中。

显然，并非所有这些都适用于所有编译器.. 但在某些情况下，第 3 方 STL 肯定会有所帮助。

至于实现：你可以在[这里找到一个列表](http://en.wikipedia.org/wiki/Standard_Template_Library#Implementations)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T02:54:50.267

迈克尔提供了一个很好的答案 - 只需添加几点：

*   “速度”不仅仅是一个线性的东西，你可以果断地说 STL 实现 X 比 STL Y 快 N%：在各种使用场景中，存在权衡速度和内存使用的实现选择。例如，“短字符串优化”可能允许将非常短的字符串直接存储在字符串对象中而不是堆内存中；对于超出当前容量的容器调整大小的方式，实现可能会略有不同。

*   二进制互操作性很重要：如果您需要调用预编译的库函数以接受 STL X 对象，您不能简单地链接该库并为其提供 STL Y 等效项：可能会在损坏的名称中存在差异，从而阻止链接时，对象的二进制布局很可能会有所不同，即使没有并且您强制执行此类调用 - 您的客户端代码对这些对象执行的操作可能不是库代码所期望或需要的所有内容（即不会维护相同的不变量）。

*   线程安全是“额外功能”的一个值得注意的例子……例如，许多早期的 STL 在 Copy-on-Write 字符串实现方面存在错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:59:06.743

另一点：一些 STL 实现允许您禁用异常，可能使用自定义全局错误处理程序而不是 C++ 异常。这在今天已经不那么重要了，但是很长一段时间以来，很多系统由于各种原因禁用了异常，并且仍然有一些异常系统不鼓励或完全不支持异常。

# java - Java TCP/IP Socket 互联网连接问题

> ID：11770051
> 
> 赞同：1
> 
> 时间：2012-08-02T02:01:32.013
> 
> 标签：java, netbeans, client-server, port, tcpsocket

我在 java 中使用 TCP/IP 套接字来尝试创建客户端-服务器应用程序。该程序在本地和局域网上运行时都可以正常工作，但是当我使用互联网 IP 地址时，客户端连接被拒绝。

我使用[这个](http://whatismyipaddress.com)网站来获取我的 IP 地址，并添加了一个防火墙条目来解锁我正在使用的端口（端口 4445）。

我几乎可以肯定问题出在某种阻止端口的安全措施上。我在同一台 PC 上运行客户端和服务器但使用前面提到的网站的 IP 地址是否重要？

如果我能得到一个测试端口实际上是否打开的方法列表，或者为了让我的程序运行而尝试的事情列表，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:04:12.723

该网站很可能会为您提供您的 PC 连接到互联网的网关的 IP 地址，如果网关超出您的控制范围（据我所知，这是大多数情况），您将无能为力使用该 IP 地址来测试您的程序。这里有一些建议：

1.  试试[http://aws.amazon.com](http://aws.amazon.com)，注册后您可以免费使用一年的微型服务器（可以通过 DNS/Elastic IP 公开访问。）
2.  如果您的 PC 有一个公共 IP 地址，您不需要该网站来找出它是什么。只需检查您的网络适配器控制面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:05:42.893

服务器在哪里？如果您的服务器位于某些商业主机中，则您使用的端口可能会被阻止。此外，如果您在本地网络中使用带路由器的调制解调器或仅使用路由器，您应该检查 nat 表。

# javascript - Collada 模型面无法在 three.js 中正确显示

> ID：11770052
> 
> 赞同：4
> 
> 时间：2012-08-02T02:01:44.330
> 
> 标签：javascript, three.js, collada

将 collada 模型导入到 three.js 后，模型的某些面只能从模型内部可见，而不能从外部可见。

如何解决相关面孔的问题？

是否可以从两侧看到模型的脸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:00:37.327

它无法正常工作的原因是因为您的文件设置了这个双面标志：

```
<effect id="material_3_4_0-effect" name="material_3_4_0-effect">
   <profile_COMMON>
      ...
      <extra>
         <technique profile="GOOGLEEARTH">
            <double_sided>1</double_sided>
         </technique>
      </extra>
   </profile_COMMON>
</effect> 
```

three.js ColladaLoader 不会寻找这个标志，而是像它应该的那样在材质上设置 doubleSided。我已经为这个问题[提交了一个错误](https://github.com/mrdoob/three.js/issues/2280)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:17:54.577

要修复方向不正确的面，请将模型加载到[Blender](http://blender.org/)等 3D 建模程序中，并翻转未正确显示的面的法线。

Three.js 网格有一个可以设置的双面属性，这通常允许您显示模型，其面从两侧可见。

这是一个关于如何加载 collada 网格并启用双面渲染的简短示例。

```
var loader = new THREE.ColladaLoader();
loader.load('path/to/mesh.dae', loadModel);

function loadModel(geom) {
    var mesh = new THREE.Mesh(geom, new THREE.MeshBasicMaterial());
    mesh.doublesided = true;
    scene.add(mesh);
} 
```

还有一个活生生的例子：http: [//jsfiddle.net/r7Yq2/](http://jsfiddle.net/r7Yq2/)

# sql-server - 查找所有使用链接服务器的视图

> ID：11770053
> 
> 赞同：2
> 
> 时间：2012-08-02T02:01:58.743
> 
> 标签：sql-server, tsql

我正在更新链接服务器的 url。在进行更改之前，我想知道所有引用此链接服务器的视图。是否有任何编程方式（TSQL）来执行此任务？

谢谢你的帮助。

我使用的是 SQL Server 2005、2008 和 2012。引用链接服务器的数据库服务器大多是 SQL Server 2005

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T02:37:53.960

虽然它可能会返回误报，并且不会捕获使用动态 SQL 构造四部分名称的任何情况，但这可能是最简单的方法：

```
SELECT name FROM sys.views
WHERE LOWER(OBJECT_DEFINITION([object_id])) LIKE LOWER('%LinkedServerName%'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:39:53.867

这将找到视图：

```
SELECT t2.name, OBJECT_DEFINITION(t1.[object_id]) view_definition  
FROM sys.views t1 join sys.servers t2 on 
OBJECT_DEFINITION(t1.[object_id]) like '%['+ t2.name + '].%' ESCAPE '[' 
```

如果表、视图、模式或数据库与链接服务器同名，它可能会失败。

如果某些视图没有通过第一次检查，您可以添加此行，这部分不会检查链接服务器名称周围的方括号。但请注意，这部分更有可能包含额外的不需要的视图

```
or OBJECT_DEFINITION(t1.[object_id]) like '% '+ t2.name + '.%' 
```

编辑：将 sys.sysservers 更改为 sys.servers。谢谢亚伦伯特兰

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T04:52:02.660

如果您需要按名称查找数据库对象（例如表、列、触发器） - 请查看名为[SQL Search的](http://www.red-gate.com/products/sql-development/sql-search/)**免费**Red-Gate 工具，它会在您的整个数据库中搜索任何类型的字符串。

![在此处输入图像描述](../Images/06aa8195296565da03113074a84f9fa1.png)

![在此处输入图像描述](../Images/2b38d4018a9fbf766a665542ad2c611d.png)

对于任何 DBA 或数据库开发人员来说，它都是一个很棒的必备工具——我是否已经提到它完全**免费**用于任何用途？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T05:36:59.873

尝试这个：

```
SELECT name, OBJECT_DEFINITION([object_id]) FROM sys.views
where OBJECT_DEFINITION([object_id]) like '%.%.dbo.%' 
```

# php - PHP读取文件并将信息存储在变量中

> ID：11770058
> 
> 赞同：0
> 
> 时间：2012-08-02T02:02:24.417
> 
> 标签：php, file, file-get-contents, file-read

有没有办法读取文本文件并将信息存储到变量中？

我的 file.txt 就像，

```
Timestamp 1343872162
No.of tall 2
No.of long 5
tall1 171
tall2 172
long1 170
long2 168
long3 168
long4 166
long5 166 
```

也就是说，我必须从该文件中检索这些值 $time=1343872162, $tall1=171, $tall2=172,$long1=170 等等。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:07:31.190

您可以使用 fgets() 每行读取文件行。

请参阅：[PHP fgets() 文档](http://php.net/manual/en/function.fgets.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:12:25.120

试试这个：

```
<?php
$handle = @fopen("/tmp/inputfile.txt", "r");
if ($handle) {
    while (($buffer = fgets($handle, 4096)) !== false) {
        list( $key, $value ) = explode( ' ', trim($buffer) );
        $$key = $value; //Double $$ to set a var with the string name in $key
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
}
?> 
```

# android - 线程以未捕获的异常退出

> ID：11770059
> 
> 赞同：0
> 
> 时间：2012-08-02T02:02:34.783
> 
> 标签：android

我首先实现了系统和引擎多人游戏，然后能够调整所有导入和库并在没有任何错误的情况下运行`MOTODEV`，但是模拟器“意外停止”。

您可以[在此处查看代码](http://code.google.com/r/nemoryoliver-andengine/source/browse/src/org/anddev/andengine/examples/MultiplayerExample.java?r=0f271e101598cebc1f5c9b7692c5fe469eea1073)。

模拟器上的错误：

```
08-02 00:52:55.500: D/AndroidRuntime(330): Shutting down VM
08-02 00:52:55.500: W/dalvikvm(330): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-02 00:52:55.549: E/AndroidRuntime(330): FATAL EXCEPTION: main
08-02 00:52:55.549: E/AndroidRuntime(330): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.multiplayerand/com.multiplayerand.MainActivity}: java.lang.ClassNotFoundException: com.multiplayerand.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.multiplayerand-2.apk]
08-02 00:52:55.549: E/AndroidRuntime(330):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
08-02 00:52:55.549: E/AndroidRuntime(330):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-02 00:52:55.549: E/AndroidRuntime(330):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-02 00:52:55.549: E/AndroidRuntime(330):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-02 00:52:55.549: E/AndroidRuntime(330):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-02 00:52:55.549: E/AndroidRuntime(330):  at android.os.Looper.loop(Looper.java:123)
08-02 00:52:55.549: E/AndroidRuntime(330):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-02 00:52:55.549: E/AndroidRuntime(330):  at java.lang.reflect.Method.invokeNative(Native Method)
08-02 00:52:55.549: E/AndroidRuntime(330):  at java.lang.reflect.Method.invoke(Method.java:521)
08-02 00:52:55.549: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-02 00:52:55.549: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-02 00:52:55.549: E/AndroidRuntime(330):  at dalvik.system.NativeStart.main(Native Method)
08-02 00:52:55.549: E/AndroidRuntime(330): Caused by: java.lang.ClassNotFoundException: com.multiplayerand.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.multiplayerand-2.apk]
08-02 00:52:55.549: E/AndroidRuntime(330):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
08-02 00:52:55.549: E/AndroidRuntime(330):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
08-02 00:52:55.549: E/AndroidRuntime(330):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
08-02 00:52:55.549: E/AndroidRuntime(330):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-02 00:52:55.549: E/AndroidRuntime(330):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
08-02 00:52:55.549: E/AndroidRuntime(330):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:23:58.597

请注意日志中的这一行：

```
Unable to instantiate activity ComponentInfo{com.multiplayerand/com.multiplayerand.MainActivity}: java.lang.ClassNotFoundException: com.multiplayerand.MainActivity in loader dalvik.system.PathClassLoader 
```

那行说，你试图`instantiate activity`它的名字是`MainActivity`，它会在`com.multiplayerand`包中，但是系统找不到任何具有这个组件信息的活动，所以 java.lang。`ClassNotFoundException`已经发生。

我想你可以解决问题，如果你：

*   检查您的活动名称是否为`MainActivity`。
*   检查是否`MainActivity`在带有 name 的包中`com.multiplayerand`。
*   检查您是否在`manifest`项目中注册了 MainActivity。

# google-bigquery - 文件中的错误字符

> ID：11770060
> 
> 赞同：1
> 
> 时间：2012-08-02T02:02:45.523
> 
> 标签：google-bigquery

我尝试从云端加载数据，但失败了 3 次。

```
Job ID: job_2ed0ded6ce1d4837873e0ab498b0bc1b
Start Time: 9:10pm, 1 Aug 2012
End Time: 10:55pm, 1 Aug 2012
Destination Table: 567402616005:company.ox_data_summary_ad_hourly
Source URI: gs://daily_log/ox_data_summary_ad_hourly.txt.gz
Delimiter:
Max Bad Records: 30000

Job ID: job_47447ab60d2a40f588c89dfe638aa438
Line:176073205 / Field:1, Bad character (ASCII 0) encountered. Rest of file not processed.
Too many errors encountered. Limit is: 0. 
```

我应该再试一次吗？还是源文件有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:25:03.787

这是一个处理 gzip 压缩文件的已知错误。目前唯一的解决方法是使用未压缩的文件。

即将推出的更改应该可以更轻松地处理大型未压缩文件（导入速度更快，文件大小限制将增加）。

# java - Java Long 返回奇怪的值

> ID：11770061
> 
> 赞同：-1
> 
> 时间：2012-08-02T02:02:46.327
> 
> 标签：java, long-integer

关于以下方法：

```
private long getCountdownLeft(Integer seconds) {
        long now = System.currentTimeMillis();
        long elapsedMillis = now - seconds;
        long millisLeft = seconds * 1000 - elapsedMillis;
        return millisLeft/1000;
}   

public static void Main(String[] args) {
      getApi().getLogger.debug("TimeLeft " + getCountDownLeft(3600)); //base time
} 
```

它返回的值类似于：-12039495960，这是为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:11:58.910

如果 3600 是您传入的值，那么您显然会得到一个负值。

打印出来`System.currentTimeMillis()`，你会发现这是一个相当大的值。

`currentTimeMillis()`定义[为](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#currentTimeMillis%28%29)：

```
the difference, measured in milliseconds, between the current time and midnight, January 1, 1970 UTC. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:11:06.180

根据给出的信息很难判断，但是要使此方法起作用，`seconds`必须使用`System.currentTimeMillis() / 1000`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:37:07.100

归结为一个陈述，你有

```
 return (seconds * 999 - System.currentTimeMillis())/1000; 
```

如果`System.currentTimeMillis()`是 unix 时间（现在是 1343874904292），那么当然这将是负数。我不确定你要写什么，但这显然不是......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T02:37:29.617

你的问题是你从*毫秒中减去**秒*。

 *尝试这个：

```
long elapsedMillis = now - (seconds * 1000); // convert seconds to millseconds 
```

看来你真的只是想这样做：

```
private long getCountdownLeft(Integer seconds) {
    return seconds * 1000;
} 
```*

# python - Django 教程第 3 部分 - 模板

> ID：11770065
> 
> 赞同：0
> 
> 时间：2012-08-02T02:02:57.320
> 
> 标签：python, django

我是 Django 和 Python 的新手。所以如果我的问题是微不足道的，请原谅。

这是参考 Django Docs，[教程第 3 部分](https://docs.djangoproject.com/en/dev/intro/tutorial03/?from=olddocs/)

在**解耦 URLConfs**部分中，作者说在**mysite/urls.py**中有以下内容：

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^polls/', include('polls.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

以下代码将成为**polls/urls.py的一部分**

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('polls.views',
    url(r'^$', 'index'),
    url(r'^(?P<poll_id>\d+)/$', 'detail'),
    url(r'^(?P<poll_id>\d+)/results/$', 'results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'vote'),
) 
```

通过在投票目录中添加 URLS.PY，我一直在学习本教程。

是否有包含 URLS.PY 的 MYSITE 目录和投票目录？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:18:31.527

关于 django 的一件事是它以拥有可插拔和模块化的应用程序而自豪。`urls.py`目录里面是你的`mysite`PROJECT 范围的 url conf。

这条线

`url(r'^polls/', include('polls.urls')),`

告诉您的项目您有一个包含`urls.py`文件的 app/directory/python 包。在此文件中，`mysite/polls/urls.py`您将拥有投票应用程序的 url conf，该应用程序将存在`/polls/whatever`于您的浏览器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:29:34.763

我是python新手。巧合的是，几个小时前，我偶然浏览了整个教程。您`urls.py`应该只位于`/mysite/mysite/`目录中。

这是我`urls.py`所在的位置

> /home/mattrising/desktop/mysite/mysite#

希望有帮助:-)

编辑：默认情况下，您的`polls`目录不应包含`urls.py`文件。

# java - AVD 没有 LogCat 输出？

> ID：11770068
> 
> 赞同：3
> 
> 时间：2012-08-02T02:03:36.047
> 
> 标签：java, android, eclipse, avd

当我启动我的 avd 并部署我的应用程序时，没有输出发送到 LogCat，关于如何解决这个问题的任何想法？当它发生时，我只是重新制作项目并添加所有文件。有什么方法可以强制 logcat 选项卡从特定的 avd 获取输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:13:50.250

将您的应用程序集中在 Windows 中的设备/显示视图中

# mysql - 用于操作“=”的排序规则 (utf8_unicode_ci,IMPLICIT) 和 (utf8_general_ci,IMPLICIT) 的非法混合

> ID：11770074
> 
> 赞同：187
> 
> 时间：2012-08-02T02:05:04.440
> 
> 标签：mysql, stored-procedures

MySql 上的错误信息：

```
Illegal mix of collations (utf8_unicode_ci,IMPLICIT) and (utf8_general_ci,IMPLICIT) for operation '=' 
```

我已经浏览了其他几个帖子，但无法解决这个问题。受影响的部分与此类似：

```
CREATE TABLE users (
    userID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    firstName VARCHAR(24) NOT NULL,
    lastName VARCHAR(24) NOT NULL,
    username VARCHAR(24) NOT NULL,
    password VARCHAR(40) NOT NULL,
    PRIMARY KEY (userid)
) ENGINE = INNODB CHARACTER SET utf8 COLLATE utf8_unicode_ci;

CREATE TABLE products (
    productID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    title VARCHAR(104) NOT NULL,
    picturePath VARCHAR(104) NULL,
    pictureThumb VARCHAR(104) NULL,
    creationDate DATE NOT NULL,
    closeDate DATE NULL,
    deleteDate DATE NULL,
    varPath VARCHAR(104) NULL,
    isPublic TINYINT(1) UNSIGNED NOT NULL DEFAULT '1',
    PRIMARY KEY (productID)
) ENGINE = INNODB CHARACTER SET utf8 COLLATE utf8_unicode_ci;

CREATE TABLE productUsers (
    productID INT UNSIGNED NOT NULL,
    userID INT UNSIGNED NOT NULL,
    permission VARCHAR(16) NOT NULL,
    PRIMARY KEY (productID,userID),
    FOREIGN KEY (productID) REFERENCES products (productID) ON DELETE RESTRICT ON UPDATE NO ACTION,
    FOREIGN KEY (userID) REFERENCES users (userID) ON DELETE RESTRICT ON UPDATE NO ACTION
) ENGINE = INNODB CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
```

我正在使用的存储过程是这样的：

```
CREATE PROCEDURE updateProductUsers (IN rUsername VARCHAR(24),IN rProductID INT UNSIGNED,IN rPerm VARCHAR(16))
BEGIN
    UPDATE productUsers
        INNER JOIN users
        ON productUsers.userID = users.userID
        SET productUsers.permission = rPerm
        WHERE users.username = rUsername
        AND productUsers.productID = rProductID;
END 
```

我正在使用 php 进行测试，但 SQLyog 给出了相同的错误。我还测试过重新创建整个数据库，但效果不佳。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2012-08-02T02:25:30.540

存储过程参数的默认排序规则是`utf8_general_ci`并且您不能混合排序规则，因此您有四个选项：

**选项 1**：添加`COLLATE`到您的输入变量：

```
SET @rUsername = ‘aname’ COLLATE utf8_unicode_ci; -- COLLATE added
CALL updateProductUsers(@rUsername, @rProductID, @rPerm); 
```

**选项 2**：添加`COLLATE`到`WHERE`子句：

```
CREATE PROCEDURE updateProductUsers(
    IN rUsername VARCHAR(24),
    IN rProductID INT UNSIGNED,
    IN rPerm VARCHAR(16))
BEGIN
    UPDATE productUsers
        INNER JOIN users
        ON productUsers.userID = users.userID
        SET productUsers.permission = rPerm
        WHERE users.username = rUsername COLLATE utf8_unicode_ci -- COLLATE added
        AND productUsers.productID = rProductID;
END 
```

**选项 3**：将其添加到`IN`参数定义中（MySQL 5.7 之前）：

```
CREATE PROCEDURE updateProductUsers(
    IN rUsername VARCHAR(24) COLLATE utf8_unicode_ci, -- COLLATE added
    IN rProductID INT UNSIGNED,
    IN rPerm VARCHAR(16))
BEGIN
    UPDATE productUsers
        INNER JOIN users
        ON productUsers.userID = users.userID
        SET productUsers.permission = rPerm
        WHERE users.username = rUsername
        AND productUsers.productID = rProductID;
END 
```

**选项 4**：更改字段本身：

```
ALTER TABLE users CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

~~除非您需要按 Unicode 顺序对数据进行排序，否则我建议您更改所有表以使用`utf8_general_ci`排序规则，因为它不需要更改代码，并且会稍微加快排序速度。~~

**更新**：utf8mb4/utf8mb4_unicode_ci 现在是首选的字符集/整理方法。建议不要使用 utf8_general_ci，因为性能提升可以忽略不计。见[https://stackoverflow.com/a/766996/1432614](https://stackoverflow.com/a/766996/1432614)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-02-10T21:52:33.150

我花了半天时间寻找相同的“非法混合排序规则”错误的答案，其中 utf8_unicode_ci 和 utf8_general_ci 之间存在冲突。

我发现我的数据库中的某些列没有专门整理*utf8_unicode_ci*。似乎 mysql 隐含地整理了这些列*utf8_general_ci*。

具体来说，运行“SHOW CREATE TABLE table1”查询会输出如下内容：

```
| table1 | CREATE TABLE `table1` (
`id` int(11) NOT NULL,
`col1` varchar(4) CHARACTER SET utf8 NOT NULL,
`col2` int(11) NOT NULL,
PRIMARY KEY (`col1`,`col2`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci | 
```

注意*'col1' varchar(4) CHARACTER SET utf8 NOT NULL*行没有指定排序规则。然后我运行了以下查询：

`ALTER TABLE table1 CHANGE col1 col1 VARCHAR(4) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL;`

这解决了我的“非法混合排序规则”错误。希望这可以帮助那里的其他人。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-09T12:49:45.220

我有一个类似的问题，但是当我的查询参数是使用变量设置时，我在程序内部发生了这个问题，例如`SET @value='foo'`。

`collation_connection`造成这种情况的原因是数据库排序不匹配。更改`collation_connection`为匹配`collation_database`，问题就消失了。我认为这比在参数/值之后添加 COLLATE 更优雅。

总结一下：所有排序规则都必须匹配。使用`SHOW VARIABLES`并确保`collation_connection`和`collation_database`匹配（也使用检查表排序规则`SHOW TABLE STATUS [table_name]`）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-05T09:40:02.867

有点类似于@bpile 答案，我的案例是 my.cnf entry setting `collation-server = utf8_general_ci`。在我意识到这一点之后（并在尝试了上述所有操作之后），我强行将我的数据库切换到 utf8_general_ci 而不是 utf8_unicode_ci ，就是这样：

```
ALTER DATABASE `db` CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-08T03:06:04.007

答案正在添加到@Sebas 的答案 - 设置我的本地环境的排序规则。不要在生产中尝试这个。

```
ALTER DATABASE databasename CHARACTER SET utf8 COLLATE utf8_unicode_ci;

ALTER TABLE tablename CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
```

此[解决方案的来源](https://stackoverflow.com/a/35765099/2181576)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-29T07:15:16.990

在我自己的情况下，我有以下错误

用于操作“=”的排序规则 (utf8_general_ci,IMPLICIT) 和 (utf8_unicode_ci,IMPLICIT) 的非法混合

> $this->db->select("users.username as matric_no, CONCAT(users.surname, ' ', users.first_name, ' ', users.last_name) as fullname") ->join('users', 'users .username=classroom_students.matric_no', 'left') ->where('classroom_students.session_id', $session) ->where('classroom_students.level_id', $level) ->where('classroom_students.dept_id', $dept );

经过数周的谷歌搜索，我注意到我正在比较的两个字段包含不同的排序规则名称。第一个，即用户名是utf8_general_ci，而第二个是utf8_unicode_ci，所以我回到第二个表的结构并将第二个字段（matric_no）更改为utf8_general_ci，它就像一个魅力。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-23T14:26:53.607

尽管发现了大量关于同一问题的问题（[1](https://stackoverflow.com/questions/3029321/troubleshooting-illegal-mix-of-collations-error-in-mysql)、[2](https://stackoverflow.com/questions/36832497/getting-error-illegal-mix-of-collations-utf8mb4-unicode-ci-implicit-and-utf8m)、[3](https://stackoverflow.com/questions/1008287/illegal-mix-of-collations-mysql-error)、[4](https://stackoverflow.com/questions/3029321/troubleshooting-illegal-mix-of-collations-error-in-mysql/21061305)），但即使在这里，我也从未找到考虑性能的答案。

尽管已经给出了多种可行的解决方案，但我想做一个性能考虑。

编辑：感谢 Manatax 指出选项 1 不会出现性能问题。

使用*选项~~1 和~~2*，即**COLLATE 强制**转换方法，可能会导致潜在的瓶颈，导致不会使用列上定义的任何索引，从而导致**完全扫描**。

即使我没有尝试过*Option 3*，我的直觉是它会遭受与 option ~~1 和~~2 相同的后果。

最后，如果可行，*选项 4*是非常大的表的最佳选择。我的意思是没有其他依赖于原始排序规则的用法。

考虑这个简化的查询：

```
SELECT 
    *
FROM
    schema1.table1 AS T1
        LEFT JOIN
    schema2.table2 AS T2 ON T2.CUI = T1.CUI
WHERE
    T1.cui IN ('C0271662' , 'C2919021')
; 
```

在我原来的例子中，我有更多的连接。当然，table1 和 table2 有不同的排序规则。使用**collat​​e**操作符进行强制转换，会导致索引没有被使用。

见下图中的sql解释。

[使用 COLLATE 强制转换时的可视化查询说明](https://i.stack.imgur.com/GKph2.png)

另一方面，*选项 4*可以利用可能的索引并导致快速查询。

在下图中，您可以看到在应用*Option 4*之后正在运行相同的查询，也就是更改架构/表/列排序规则。

[排序规则更改后的可视查询解释，因此没有排序规则转换](https://i.stack.imgur.com/MyWD4.png)

总之，如果性能很重要并且您可以更改表的排序规则，请*选择 Option 4*。如果您必须对单个列进行操作，则可以使用以下内容：

```
ALTER TABLE schema1.table1 MODIFY `field` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-04T10:54:08.450

当列显式设置为不同的排序规则或查询的表中的默认排序规则不同时，就会发生这种情况。

如果您有很多表要在运行此查询时更改排序规则：

```
select concat('ALTER TABLE ', t.table_name , ' CONVERT TO CHARACTER 
SET utf8 COLLATE utf8_unicode_ci;') from (SELECT table_name FROM 
information_schema.tables where table_schema='SCHRMA') t; 
```

这将输出将所有表转换为每列使用正确排序规则所需的查询

# java - 在 Java 中解析 YAML 前端

> ID：11770077
> 
> 赞同：6
> 
> 时间：2012-08-02T02:05:31.643
> 
> 标签：java, parsing, yaml, jekyll, snakeyaml

我必须像这样解析[`YAML Front Matter`](http://jekyllrb.com/docs/frontmatter/)，所以我查看了源代码，[发现了这个](https://github.com/mojombo/jekyll/blob/master/features/step_definitions/jekyll_steps.rb#L16)，但我不太明白（我不太了解红宝石）。`java``jekyll`

所以我的问题是，如何`YAML Front Matter`在 java 中解析？

我的类路径中有[snakeyaml](https://bitbucket.org/asomov/snakeyaml)，我`YAML Front Matter`将从markdown文件中解析，为此我使用[pegdown](https://github.com/sirthias/pegdown)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T11:01:26.010

```
void parse(Reader r) throws IOException {
    BufferedReader br = new BufferedReader(r);

    // detect YAML front matter
    String line = br.readLine();
    while (line.isEmpty()) line = br.readLine();
    if (!line.matches("[-]{3,}")) { // use at least three dashes
        throw new IllegalArgumentException("No YAML Front Matter");
    }
    final String delimiter = line;

    // scan YAML front matter
    StringBuilder sb = new StringBuilder();
    line = br.readLine();
    while (!line.equals(delimiter)) {
        sb.append(line);
        sb.append("\n");
        line = br.readLine();
    }

    // parse data
    parseYamlFrontMatter(sb.toString());
    parseMarkdownOrWhatever(br);
} 
```

要获得 get `Reader`，您可能需要 a[`FileReader`](http://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html)或[`InputStreamReader`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T17:24:29.390

好的，因为您的评论澄清了您的问题：

`---`yaml 前面的内容是包含三个破折号 ( )的行内的所有内容。YAML Front matter 总是在文件的开头。

因此，您只需解析文件并从文件开头提取 YAML Front Matter。您可以使用自动机或正则表达式对其进行解析。这真的取决于你。它的结构总是相同的：

```
---
这里有一些 YAML
---
Markdown / Textile / HTML 文件内容

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T17:25:15.093

如果你只是对前面的事情感兴趣，你可以使用 SnakeYaml 的 loadAll 方法：

```
Object yamlFrontMatter(Yaml yaml, InputStream in) {
    return yaml.loadAll().iterator().next();
} 
```

SnakeYaml 只会读取第一个 yaml 结构（前面的内容）并忽略尾随的非 yaml 文本。

不幸的是，SnakeYaml 没有优雅的方式来输出剩余的文本，所以如果你想同时解析前端和正文，这种方法没有优势:-(

# android - 重新启动应用程序而不关闭它

> ID：11770084
> 
> 赞同：1
> 
> 时间：2012-08-02T02:06:28.850
> 
> 标签：android, android-widget, android-2.2-froyo

我有一个运行良好的小提示计算器应用程序，我正在尝试实现一个清除按钮，但是使用我尝试的代码它只是关闭了应用程序，我将如何重新开始代码......这是我尝试过的以下..

```
clearButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            percentage = 0;
            output = 0;
            output1 = "";
             TextView textView = null;

            textView.clearComposingText();

            percentageInp = 0;
            billAmount = 0;

            myEditField.setText("");
            myEditField2.setText("");

            return;
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:10:03.733

您将 textView 设置为 null 然后尝试对其调用方法，因此它可能会强制关闭，从而关闭应用程序。去除那个

```
TextView textView = null; 
```

要清除

```
TextView textView = (TextView)findViewById(R.id.textView1);
textView.setText(""); 
```

这假设您的 textview 称为 textView1。您现在清除变量的方式似乎没问题，而且是一种简单的方法，因为它是一个小费计算器，我假设没有太多要清除的变量，所以这种手动方式就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:14:54.370

您基本上可以将以前的 pid 参数传递给新实例，然后在加载新实例时终止旧实例。使用`Process.GetCurrentProcess`方法读取旧实例 pid。`Arguments`使用 中的属性将参数传递给新实例`ProcessStartInfo`。然后在新实例中使用`Process.GetProcessById`以在传递新实例参数时获取并杀死旧实例。

获取进程（安卓）：

```
ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
List l = am.getRunningAppProcesses(); 
```

# django - Django 在视图中设置表单初始数据

> ID：11770085
> 
> 赞同：0
> 
> 时间：2012-08-02T02:06:29.777
> 
> 标签：django, django-forms, modelform

我正在尝试使用从外部源提供的初始数据填充 django modelform。为了实现这一点，我首先从外部源中提取所有需要的数据：

```
url =('http://myapi.example.com')
data = urllib2.urlopen(url)
result = json.load(data)

api_data_name = result['properties']['name']
api_data_type = result['properties']['type'] 
```

然后填充一个字典，它将作为我表单的初始数据：

```
data = {}
for field in my_model._meta.fields:
    if field.name == 'name':
        data[field.name] = api_data_name
form = MyEditForm(initial=data) 
```

然后我将表单传递给模板，初始数据正在按预期填充我的文本字段，但现在我需要能够根据从外部源收到的字符串设置选择字段的值，而我没有得到我怎么能做到这一点，因为做了类似的事情：

```
if field.name == 'type':
    data[field.name] = api_data_type 
```

无法完成这项工作，因为选择元素具有“0”、“1”、“2”等作为选项值，而不是我从`api_data_type`变量中获得的长描述。

如何从`<option value="1">long_description</option>`我的视图中选择字段的所有选项中获取 long_description，以便我可以将每个选项与`api_data_type`?

下面是我的 models.py 和 forms.py 的示例：

```
#models.py

TYPE = (
    ('0',_(u'Type1')),
    ('1',_(u'Type2')),
    ('2',_(u'Type3')),
)

class MyModel(models.Model):
    ...
    type=models.CharField(max_length=30,choices=TYPE,blank=True)
    ...

#forms.py
class MyEditForm(forms.ModelForm):
    class Meta:
        model = MyModel

        widgets = {
            ...
            'type': Select(attrs={'class':'select-small span2'}),
            ...
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:42:47.093

了解如何完成我的要求。

```
# For select fields
if field.name == 'classification':
    for choice in field.choices:
        if choice[1].lower() == api_poi_classification.lower():
            data[field.name] = choice[0] 
```

对于任何试图填充​​多对多字段的人（在我的例子中是复选框）

```
# Many to many fields populate          
for field in hotel_poi._meta.many_to_many:
    if field.name == 'views':
        if u'Vista' in api_poi_review_fields:
            api_vistas = api_poi_review[u'Vista']
            # The api_vistas string comes from api in the format (v1; v2; v3; v4)
            views = api_vistas.split(';')
            choices = field.get_choices()
            temp = []
            for view in views:
                for choice in choices:
                    if view.lower().strip() == choice[1].lower().strip():
                    temp.append(choice[0])          
            data[field.name]=temp 
```

如果我有直接的数据库访问权限，所有这些都可以避免......在这种情况下，我只需要设置一个对象实例`m = MyModel.objects.filter(id=1)`并调用`form = MyEditForm(instance=m)`

但事实并非如此，这就是使这个问题有点特别的原因。

# java - JSF - xmlns:h 未被识别？

> ID：11770087
> 
> 赞同：0
> 
> 时间：2012-08-02T02:06:48.067
> 
> 标签：java, jsf, xml-namespaces

在我项目的“搜索”XHTML 部分中，“h”标签未被识别。我真的不知道为什么他们不工作。有什么见解吗？这是托管在 google 代码上的 xhtml 文件的链接，因此可以查看整个项目。

[https://code.google.com/p/xdsgui/source/browse/trunk/Frontend/WebContent/search.xhtml](https://code.google.com/p/xdsgui/source/browse/trunk/Frontend/WebContent/search.xhtml)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:39:02.627

它们应该由`FacesServlet`. 如果它们在检索到的 HTML 输出中显示为未解析，则仅表示根本`FacesServlet`没有调用它们。

您的项目`web.xml`显示它已映射到`*.jsf`. 因此，如果您`.xhtml`将浏览器地址栏中页面的请求 URL 中的扩展名更改为`.jsf`，那么它将起作用。

然而，更好的方法是直接将 映射到`FacesServlet`URL 模式上`*.xhtml`。这样，您永远不需要摆弄虚拟 URL，并且最终用户在故意将`.jsf`扩展名更改`.xhtml`为请求 URL 时也将永远无法看到原始 JSF 源代码。

# search - IMAP 以什么顺序返回 SEARCH 结果？

> ID：11770094
> 
> 赞同：2
> 
> 时间：2012-08-02T02:07:43.063
> 
> 标签：search, sorting, imap

我一直在查看 IMAP4 的 RFC 规范，但我找不到 SEARCH 应该返回匹配消息的顺序。它甚至是在任何地方指定的（最新的到最旧的还是什么？）还是因实现而异？

我猜是后者。如果是这样，大多数大型服务器是否遵循任何非正式约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:14:00.353

至少，根据我的简单搜索经验，结果总是按递增顺序排列（按消息 ID 或 UID）。

例如：UID SEARCH UNSEEN 在我尝试后返回的值按递增顺序排列。

但是，您是对的，RFC 似乎并未表明必须以任何顺序返回 id。

# ssis - 将字符串转换为日期的 SSIS 表达式

> ID：11770101
> 
> 赞同：1
> 
> 时间：2012-08-02T02:08:16.120
> 
> 标签：ssis

使用 SQL Server 2008、Visual Studio 2008。

尝试将数据从字符串列转换为派生日期列。该字符串可以有两种格式，一种是：“dd/mm/yy”（可以假定为 20 世纪），或者是“dd/mm/yyyy”。例如“02/05/12”、“23/12/02”、“13/08/2012”。

所以我为 Derived 列尝试了这样的表达式：

```
DateReceived == "" ? NULL(DT_DATE) : (DT_DATE)((LEN(RTRIM(DT_DATE)) == 10 ? SUBSTRING(DateReceived,7,4) : ("20" + SUBSTRING(DateReceived,7,2))) + "-" + SUBSTRING(DateReceived,4,2) + "-" + SUBSTRING(DateReceived,1,2)) 
```

但 Visual Studio 给出错误：“表达式无效，或者存在内存不足错误”。

它接受一个更简单的表达式，如：

```
DateReceived == "" ? NULL(DT_DATE) : (DT_DATE)("20" + SUBSTRING(DateReceived,7,2) + "-" + SUBSTRING(DateReceived,4,2) + "-" + SUBSTRING(DateReceived,1,2)) 
```

但此表达式仅适用于“dd/mm/yy”格式。

我究竟做错了什么 ？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:33:46.860

没关系，错误是由于错字造成的。（在列类型上调用 RTRIM，而不是列名）。

以下作品：

```
DateReceived == "" ? NULL(DT_DATE) : (DT_DATE)((LEN(RTRIM(DateReceived)) == 10 ? SUBSTRING(DateReceived,7,4) : ("20" + SUBSTRING(DateReceived,7,2))) + "-" + SUBSTRING(DateReceived,4,2) + "-" + SUBSTRING(DateReceived,1,2)) 
```

# php - MVC 中的 CMS 路由

> ID：11770104
> 
> 赞同：0
> 
> 时间：2012-08-02T02:08:35.313
> 
> 标签：php, arrays, model-view-controller

我正在用 php 创建自己的 MVC 框架，作为学习更高级编程的一种方式。我已经启动并运行了框架，但是我对当前的路由方法有疑问。我希望框架支持后端 cms 来补充前端网站。问题是我的路由结构是这样工作`mywebsite.com/controller/method/id` 的 - 路由引擎将信息排序到这样的数组中

```
segments 0 => controller, 1 => method, 2 => id 
```

现在，如果我访问 mywebsite.com/projects，它会将我带到我设置为管理页面的页面。我不仅希望只能从 mywebsite.com/admin/projects 访问它，还希望 mywebsite.com/projects 将我带到前端。

因此，如果我想访问`mywebsite.com/projects`，我希望它呈现“前端”控制器，将“项目”推送到方法中。如果我访问`mywebsite.com/admin/projects`我希望它加载项目控制器。

这是整个当前路由类，如下所示。

```
<?php

class Request {

    //url domain.com/controller/method/other
    //holds url segments 0 => controller, 1 => method, 2 => other, etc
    public $segments;
    function  __construct() {
        $this->parse_globals();
    }

    function parse_globals(){
        //$uri = preg_replace("|/(.*)|", "\\1", str_replace("\\", "/", $_SERVER['REQUEST_URI']));
        $uri = (empty($_GET['rt'])) ? '' : $_GET['rt'];
        $this->segments = array_filter(explode('/', $uri));
        if (in_array("admin", $this->segments)) {
            array_shift($this->segments);
        }
        print_r($this->segments);
        //remove index php
        if( reset($this->segments) == 'index.php') {
            array_shift ($this->segments);
        }
    }

    function controller(){
        return $this->segment(0);
    }

    function method(){
        return $this->segment(1);
    }

    function param( $str ){
        return isset($_REQUEST[$str]) ? $_REQUEST[$str] : false;
    }

    function segment( $no ){
        return isset($this->segments[$no]) ? $this->segments[$no] : false;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T04:07:21.990

您可以使用一组正则表达式模式，而不是简单地使用`explode()`来分隔 URL 段。

例如，以下模式将尝试在 firsts 处匹配`action`，如果`action`存在，则检查其之前是否存在`controller`设置：

```
'/(:?(:?\/(?P<controller>[^\/\.,;?\n]+))?\/(?P<action>[^\/\.,;?\n]+))?/' 
```

大多数 PHP 框架使用不同的方法来生成此类模式，并带有简化的符号。通过这种方式，您可以设置每个模式的哪些部分是强制性的，哪些是可选的。并且还可以为可选部分提供备用值。

那就是说...

在开始使用框架制作像 cms 这样复杂的东西之前，您可能会花一些额外的时间来研究 OOP。我建议至少观看 Miško Hevery 和 Robert C. Martin 的讲座。仅仅因为您认为，您知道如何编写一个类，并不意味着您了解面向对象编程。

**更新**

我在[这个答案](https://stackoverflow.com/a/9855170/727208)中列出了一些材料。你可能会发现它们很有用，

此外，这里还有两堂课，上面没有回答：

*   [清洁代码 I：参数](https://vimeo.com/13439458)
*   [清洁代码 III：函数](https://vimeo.com/13702091)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T03:29:32.973

我的理解是有三种路由情况：

基本的一个：

```
/<controller>/<action>/<parameters> 
```

管理面板的特殊面板（其中“admin”是一种单独的模块）：

```
/<module>/<controller>/<action>/<parameters> 
```

最后是“/projects”的一个特例，它映射到“/front/projects”。

在这种情况下，您需要使您的路由类更加灵活，以便它可以处理任何类型的路由方案。在像 Kohana 这样的框架中，这将通过以下规则完成：

```
Route::set('adminModule', 'admin/projects')
    ->defaults(array(
        'controller' => 'projects',
        'action'     => 'admin',
    ));

Route::set('projectPage', 'projects')
    ->defaults(array(
        'controller' => 'front',
        'action'     => 'projects',
    ));

Route::set('default', '(<controller>(/<id>(/<action>)))')
    ->defaults(array(
        'controller' => 'index',
        'action'     => 'index',
    )); 
```

显然这只是一个例子，但你明白了。基本上，您希望提供一些合理的默认路由（例如控制器/操作/id），但您还需要允许用户配置其他路由。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-09T07:06:31.620

我目前正在开发一个针对**极高性能**的 php 路由器。你可能想看看。

[https://github.com/c9s/Pux](https://github.com/c9s/Pux)

我们还提供了一个与您做同样事情的模式编译器。但是您可以编写更简单的路径而不是复杂的模式。

例如，你可以这样写：

```
 /product/:id/:name       [ id => '\d+', name => '\w+' ] 
```

供参考：

Pux 在静态路由调度方面比 symfony 路由器快 48.5 倍，在正则表达式调度方面快 31 倍。（安装了 pux 扩展）

Pux 尽量不消耗计算时间来动态构建所有路由（如 Symfony/Routing）。相反，Pux 将您的路由编译为普通的 PHP 数组进行缓存，编译后的路由可以非常快速地从缓存中加载。

借助 Pux PHP 扩展支持，您可以比纯 PHP Pux 快 1.5~2 倍地加载和调度路由。

# php - 使用 html_entity_decode 显示图像

> ID：11770105
> 
> 赞同：0
> 
> 时间：2012-08-02T02:08:42.047
> 
> 标签：php, image, html-encode

目前我正在尝试使用 html_entity_decode 在同一页面上显示 2 个图像。

```
 $ent  = file_get_contents('./olympic.jpg');
   $ent1 = file_get_contents('./olympic1.jpg');
   $s  =  htmlspecialchars($ent1,ENT_COMPAT,'iso-8859-1');
   $s1 =  htmlspecialchars($ent,ENT_COMPAT,'iso-8859-1');

   $s2 = html_entity_decode($s, ENT_COMPAT,'iso-8859-1');
   $s3 = html_entity_decode($s1, ENT_COMPAT,'iso-8859-1');

   Header("Content-Type: image/jpeg");
   echo ($s2);
   echo ($s3); 
```

我现在可以显示 $s2 但无法显示 $s3。这只是一个测试页面，在真实系统中，图像将从 web 服务以 iso-8859-1 编码发送过来。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:05:06.553

这与 html_entity_decode() 无关。您不能在单个 HTTP 响应中显示两个图像。您必须提供包含两个嵌入图像的 HTML 文档（内容类型：text/html）。

# jquery - 如何将下拉菜单的选项值设置为选中

> ID：11770106
> 
> 赞同：0
> 
> 时间：2012-08-02T02:08:45.120
> 
> 标签：jquery

我在用着

```
var back_color = "#000000";
var id = 1;
var back_color = "#ffffff"
jQuery("#color"+id+" option[value=back_color]").attr("selected", "selected"); 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:13:20.173

```
var back_color = "#000000";
var id = 1;
// var back_color = "#ffffff" Why are you defining this twice? 
```

大概您想要`back_color`这里的值，而不仅仅是字面意思。（此外，根据 CSS，在属性选择器中不引用属性值在技术上是合法的，但根据我的经验，如果没有引号，jQuery 将无法工作。）

```
jQuery("#color"+id+" option[value='"+back_color+"']").attr("selected", "selected"); 
```

# objective-c - iOS - UITableViewCell 的图像在选择时位于表格顶部？

> ID：11770108
> 
> 赞同：0
> 
> 时间：2012-08-02T02:08:51.677
> 
> 标签：objective-c, ios, uitableview

我在一个视图中有 2 个表。表 A 列出了一组用户。表 B 列出了一个用户对象。当在表 A 中选择一行时，表 B 会重新加载属于该用户的对象。

因此，当用户选择表 A 中的一行时，单元格背景中的图像将变为图像的突出显示版本。

这是背景图像的普通版本：![默认图片](../Images/0dd96e8dd62b7577e0aec5e3d1aebf15.png)

这是背景图像的突出显示版本：![在此处输入图像描述](../Images/599e6c8c785e929cf41c2b35506bb9fb.png)

如您所见，突出显示的版本右侧有一个小箭头。这个箭头超出了表格本身的表格单元格的宽度。选择该行后，图像会发生应有的变化，但图像会缩小以使整个图像适合单元格。

我想要发生的是图像超出表格，或者位于该选定行的表格顶部。

我认为一种可能的解决方案是将表格置于所选行的中心，然后覆盖该图像，但如果用户要尝试滚动表格，则图像需要移动，这将是一个很大的痛苦。

所以我想知道是否可以将单元格的大小扩展到它选择的表格之外？

提前致谢！

**编辑：**

以下方法不起作用，以防万一有人尝试：

`[cell setFrame:CGRectMake(cell.frame.origin.x, cell.frame.origin.y, cell.frame.size.width+20, cell.frame.size.height)];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:30:09.813

将 views 的 clipsToBounds 属性设置为 NO 将允许视图在其自己的框架之外绘制。

在您的 UITableViewController 子类中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do what you normally do here, if anything then add...

    self.view.clipsToBounds = NO;
} 
```

这样做有一个副作用，您将看到在 tableview 的底部或顶部创建完整的单元格，而不是它们部分滚动到视图中。要么将表格视图放入另一个将 clipsToBounds 设置为 YES 的视图中，要么将表格视图的边缘与屏幕的边缘对齐，或者让视图覆盖底部和顶部（就像 UIToolbar 和 UINavigationBar 通常那样）。

要让 UITableViewCell 的 selectedBackgroundView 扩展到表格视图的框架之外，请创建 UITableViewCell 的子类并覆盖 layoutSubviews 方法。

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code

        self.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"YQGyZ"]];
        self.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"CQXYh"]];

        self.textLabel.backgroundColor = [UIColor clearColor];
        self.detailTextLabel.backgroundColor = [UIColor clearColor];
    }
    return self;
}

- (void)layoutSubviews {
    [super layoutSubviews];

    CGRect frame = self.selectedBackgroundView.frame;
    frame.size.width += 13; // where 13 is the size of the arrow overhang from the same images
    self.selectedBackgroundView.frame = frame;

    // You can also change the location of the default labels (set their background colors to clear to see the background under them)
    self.textLabel.frame = CGRectMake(70, 0, 148, 30);
    self.detailTextLabel.frame = CGRectMake(70, 30, 148, 30);
} 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:13:36.823

我建议修改未选定单元格背景的图像资源，使其与选定背景的宽度相同，但侧面只有一个透明矩形。

# html - 类似 Facebook 的标题/顶栏

> ID：11770109
> 
> 赞同：0
> 
> 时间：2012-08-02T02:08:52.813
> 
> 标签：html, css

我一直在尝试用一些 CSS 来组成这个类似于 facebook 的顶部栏（或标题，我不知道）。我认为这很容易，而且，第一个结果确实如此。

我已经为栏设置了一个`fixed`位置，它的`top`和`left`属性设置为 0。它`padding`设置为`4px`并且效果很好；正如我想要的那样。

但现在的问题是……内容呢？我可以简单地将它包裹在 a 中，并将其相对放置在底部`<div>`几s 处。`em`但是，如果超过浏览器的最大高度，它不会隐藏内容的底部吗？而且，这可能会导致*某些*浏览器的大小不兼容（我讨厌 IE）。

很抱歉，如果这里已经问过这个问题，我找不到这样的问题。更清楚地说，我不想要任何“动态更新”的标题——至少现在还没有。我想我可以用一些 HTML5 做到这一点。

这里的主要问题是：做这种标题的最佳方法是什么？是`position: fixed`真正的方法吗？如果是这样，显示内容的最佳方式是什么？

TIA，安德烈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:18:29.283

`position:fixed`会做。

简单地在内容顶部添加边距。（与标题的高度相同。）

因此，当您位于页面顶部时，您的页眉将覆盖页边距。当您向下滚动时，它将按预期运行。并且浏览器不会隐藏底部。

# php - $var = null 和 unset($var) 的区别

> ID：11770110
> 
> 赞同：4
> 
> 时间：2012-08-02T02:08:56.087
> 
> 标签：php

> **可能的重复：**
> [使用 PHP 释放内存有什么好处：unset() 或 $var = null](https://stackoverflow.com/questions/584960/whats-better-at-freeing-memory-with-php-unset-or-var-null)

就垃圾收集而言，在任何情况下 1 是否都比另一个好？

编辑：特别是如果`$var`是一个非常大的变量，具有很多级别的递归和其他对象（与递归清理大对象有关）

编辑：删除了这个：我只能想到一件事，那就是`isset($var)`在任何一种情况下都会有不同的反应。

因为显然我错了……他们的反应都是一样的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T02:17:45.710

```
unset($var);
// You will get Undefined variable Notice.
if ($var) {}

$var = null;
// it's ok.
if ($var) {} 
```

***添加 php 的 GC。***

PHP 的垃圾回收是基于`refcount`的`zval`，如果`refcount`变为 0，则`zval`可以释放。

所以 if `$a = $b = array(/*a very large array*/);`, unset only`$a`或 only`$b`不会释放大数组的内存。

`unset($a);`或 `$a = null`或分配另一个值`$a`将全部减1，但只有减为0`refcount`时才会释放内存。`refcount`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T02:26:25.133

`unset`不强制立即释放内存，而是将其留给 gc。`$var = null;`但是*会强制*立即释放内存。

**参见示例：**

```
 // $a = NULL; (better I think)
 $a = 5;
 $b = & $a;
 $a = NULL;
 print "b $b "; // b 
 print(! isset($b)); // 1 
 ?> 
```

还值得注意的是，在***数组的情况下***完全取消设置***`destroys`***变量。IE：

```
<?php
$ar = array(1,2,3,4);
var_dump($ar);
echo "<br />";

unset($ar[2]);
var_dump($ar);
echo "<br />";

$ar[1] = null;
var_dump($ar);
?> 
```

***返回输出：***

> ```
> array(4) { [0]=> int(1) [1]=> int(2) [2]=> int(3) [3]=> int(4) } 
> array(3) { [0]=> int(1) [1]=> int(2) [3]=> int(4) } 
> array(3) { [0]=> int(1) [1]=> NULL [3]=> int(4) } 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T02:26:05.267

```
$a = 5;
$b = &$a;
unset($b); //just say $b should not pointer to any var
print $a; // 5

$a = 5;
$b = &$a;
$b = null;
print $a; // nothing, because $a = null 
```

# python - 为什么 select() 总是在非阻塞模式下阻塞

> ID：11770114
> 
> 赞同：4
> 
> 时间：2012-08-02T02:09:27.167
> 
> 标签：python, sockets

尽管我将套接字设置为非阻塞，但 seclect() 函数仍然被阻塞。请帮我。

这是我的代码：

```
import socket
import select
if __name__ == '__main__':
   server = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
   server.bind(("localhost",9006))
   server.listen(10)
   server.setblocking(False)
   inputs = [server]
   while True:
      try:
         a,b,c = select.select(inputs, [], [])
      except Exception:
        print ("exception")
      print ("Timeout") 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T02:19:02.573

从[选择文档](http://docs.python.org/library/select.html#select.select)：

> 可选的 timeout 参数将超时指定为以秒为单位的浮点数。当省略超时参数时，函数会阻塞，直到至少一个文件描述符准备就绪。

换句话说，套接字“阻塞”状态与此处无关。您需要指定任何超时来禁用阻塞；您可以设置`0`为在没有内容可读取时立即返回（但请注意，您的循环将大量占用 CPU）。

例如：

```
a,b,c = select.select(inputs, [], [], 0) 
```

# javascript - jQuery 成功处理程序未在生产服务器上执行，但在 dev 中工作正常

> ID：11770122
> 
> 赞同：2
> 
> 时间：2012-08-02T02:10:05.360
> 
> 标签：javascript, ajax, callback, http-headers, doctype

好吧，这很奇怪。

快速总结：我正在使用 SilverStripe CMS，它通过一组 ajax 延迟加载面板在其管理中加载 UI。这一切在开发中都很好用。用于获取主面板数据的 ajax 调用在两者中都有效。也就是说，它在开发服务器和生产服务器上返回数据（在这种情况下为 html），代码为 200（Firebug 说）。

现在，在处理程序中有一个成功、错误和完整的函数——成功获取数据并创建主内容面板。在我的本地开发服务器上，成功和完全火都很好。但是在生产中，只有完整的火灾，即使我可以用 Firebug 看到数据返回得很好（就像我说的那样，有 200 个）。为什么没有成功运行？当然，我可以将*成功*逻辑移至*完成*，但此服务器可能会继续产生问题。

以下是 Dev ajax 调用的响应标头：

```
Cache-Control     no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection        Keep-Alive
Content-Length    38407
Content-Type      text/html; charset=utf-8
Date              Thu, 02 Aug 2012 01:02:08 GMT
Expires           Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive        timeout=5, max=100
Pragma            no-cache
Server            Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/1.0.1c DAV/2 PHP/5.3.12
Set-Cookie        PastMember=1; expires=Wed, 31-Oct-2012 01:02:09 GMT; path=/; httponly
X-Controller      CMSPagesController
X-Include-CSS     /framework/admin/thirdparty/jquery-notice/jquery.notice.css?m=1340880397...
X-Include-JS      /framework/thirdparty/jquery/jquery.js?m=1340880400...
X-Powered-By      PHP/5.3.12
X-Title           SilverStripe - Pages 
```

以下是生产中的标头（明显的区别是编码/压缩）：

```
Cache-Control     no-store, no-cache, must-revalidate, post-check=0, pre-check=0, max-age=0
Connection        Keep-Alive
Content-Encoding  gzip
Content-Length    2796
Content-Type      text/html; charset=utf-8
Date              Thu, 02 Aug 2012 01:44:20 GMT
Expires           Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive        timeout=2, max=98
Pragma            no-cache
Server            Apache
Set-Cookie        PastMember=1; expires=Wed, 31-Oct-2012 01:44:22 GMT; path=/; httponly
Vary              Accept-Encoding
X-Controller      CMSPagesController
X-Include-CSS     /framework/admin/thirdparty/jquery-notice/jquery.notice.css?m=1342411329...
X-Include-JS      /framework/thirdparty/jquery/jquery.js?m=1342412461...
X-Mod-Pagespeed   0.10.21.2-1381
X-Title           SilverStripe - Pages 
```

为了让事情变得非常奇怪，我可以通过破坏文档来“修复”这种情况。如果我在 DOCTYPE: 之前添加一个字符`.<!DOCTYPE html>`，则成功处理程序运行并加载面板。删除一个字符，面板不再加载。我很难过：-/

==== 编辑 ====

这是 ajax 处理程序，非常普通，没什么特别的。我添加了用于调试的控制台。错误永远不会运行，只是在开发服务器上*成功*并*完成*，只在生产中*完成。*现在我的猜测是它正在尝试根据 doctype (html5) 验证 html 并且出现错误？我不认为 jQuery 走得那么远。另外，我将在生产中关闭压缩和 pagespeed 模块，看看是否有效果，因为 dev 没有这些功能。

```
$.ajax({
url: url,
complete: function() {
    self.removeClass('loading');
    if(window.console) console.log('complete');
},
success: function(data, status, xhr) {
    if(window.console) console.log('success');
    self.html(data);
},
error: function(){
    if(window.console) console.log('error');
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:37:21.913

好的，我终于想通了。问题是 apache 的一个 mod 仍处于测试阶段（至少在我的主机上）。您可以在此处阅读有关 mod_pagespeed 的所有信息：[https ://developers.google.com/speed/pagespeed/mod](https://developers.google.com/speed/pagespeed/mod)

一旦我禁用它并重新启动 apache、viola、jQuery 成功读取 html 数据并且事件正确触发，现在面板正在加载。为什么？出于某种原因，pagespeed 所做的“优化”在几分钟内杀死了 html 结构，但显然很重要。

我在 pagespeed 之前和之后都通过 w3c 验证器运行了这些片段，并且存在相同的三个错误。所以最后我不确定pagespeed到底是如何搞砸的，我只知道它是值得的。

# android - Android 数据库究竟创建了哪些文件？

> ID：11770126
> 
> 赞同：1
> 
> 时间：2012-08-02T02:11:20.727
> 
> 标签：android, sqlite

在我的一些应用程序中，我确实提供了 Android 数据库的应用程序内备份和恢复。数据库文件的名称在 SQLiteOpenHelper 中设置。

现在我听说可能会有其他文件取决于 Android 版本和/或制造商（例如 HTC）。

所有这些文件的名称是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:28:55.723

It depends.

Standard Android SQLite installations create just one single database file for each database. This file is located in "/data/data//databases" and is named as you instructed to do so for example in the "name" parameter in this constructor:

```
SQLiteOpenHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) 
```

So a database file is called for example:

```
/data/data/<packagename>/databases/mydatabase.db 
```

SQLite itself has a new feature called Write-Ahead-Logging (WAL). This WAL uses a different logging mechanism than those from traditional database makers. With WAL new commited data will be stored in an additional file that has "-wal" attached to your original filename. For example:

```
/data/data/<packagename>/databases/mydatabase.db-wal 
```

This data is missing in the traditional database file until a configurable threadhold is reached - or the app developer instructs the database to move this data over.

However, a WAL-enabled database is not valid with the "*.db" file alone. All additional files are required to form the database. This means a WAL-enabled database will not work on an Android device with an SQLite version that does not support WAL. So a database backup from a WAL-enabled database will not work on older Android systems.

However, only few devices (from HTC for example) and some custom-ROMs enable WAL. Standard Android does not enable WAL.

# jquery - 将标题添加到 jQuery 移动控件组

> ID：11770127
> 
> 赞同：1
> 
> 时间：2012-08-02T02:11:24.590
> 
> 标签：jquery, mobile

我想在 jQuery mobile 中向控件组添加标题。我想要的输出与您在 jQuery mobile Theme Roller 页面上看到的相同，下面应显示一个示例（[http://jquerymobile.com/themeroller/](http://jquerymobile.com/themeroller/)）

![在此处输入图像描述](../Images/bab2a99cbff04546c48894946d4ad161.png)

如您所见，有一个控制组，顶部有一个标题。查看主题滚轮页面的 DOM，他们在控件组的输入/标签对之前添加了列表项元素。

我可以将标记的列表项插入到我的控件组中（如 JQM 生成的 HTML），但默认情况下它会将第一个控件项的角变圆 - 因为背景颜色进入边缘，所以几乎看不到，但仍然很明显：

![在此处输入图像描述](../Images/1e2715bf6a924e9d797c0034fb9a9096.png)

所以，理想情况下，我很想知道是否有一种简单的方法来添加标题并让 jQuery 做它的魔法让它看起来像它应该的那样。

这是我尝试过的代码，它产生了上面的第二个示例。请注意，它使用主干和下划线，因此变量替换：

```
 <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" data-type="vertical">
            <li data-swatch="a" class="ui-li ui-li-divider ui-btn ui-bar-a ui-corner-top ui-btn-up-undefined" data-role="list-divider" data-form="ui-bar-a">Apprentice/Trainee Role</li>
            <% for ( var i in area_template.roles ) {
                var role = area_template.roles[i];
            %>
                <input name="checkbox_<%= role.id %>" id="checkbox_<%= role.id %>" type="checkbox">
                <label for="checkbox_<%= role.id %>"><%= role.name %></label>
            <% } %>
        </fieldset>
    </div> 
```

**编辑：感谢您的工作和建议 Jeemusu。**我仍然可以看到角落。我将粘贴您的小提琴页面生成的代码与我的应用程序生成的代码之间的差异。我只能预测它可能与使用 JQM 1.0.1 的小提琴有关，而我的应用程序使用 JQM 1.1.1。我尝试改造 1.0.1。并且错误太多。

**再次编辑：**我刚刚删除了很多粘贴的代码，因为我在 jsFiddle 上意识到我可以切换到 jQuery 1.7.2，它允许我切换到 jQm 1.1.1，当我在小提琴上运行你的代码时，角落出现。尽管它们出现在代码中，但由于使用了较浅的颜色，因此几乎看不到。但是您肯定可以看到使用两个不同库之间的 DOM 差异。也许这表明 1.1.1 中存在错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:59:09.960

我将控制组从主题编辑器中剥离出来，并将其剥离到最低限度的标记。你可以在[这个 jsfiddle](http://jsfiddle.net/3txqn/6/)中找到结果。我还包括了您在问题中的代码，因为您可以看到我们的代码并没有太大的不同。希望这将帮助您指出正确的方向。

查看您的代码，您有一些不必要的标记，例如：

```
<div data-role="fieldcontain">
        <fieldset data-role="controlgroup" data-type="vertical"> 
```

上面的代码不需要`<div data-role="fieldcontain">`，这将由 jquerymobile 自动构建并包裹任何`<fieldset>`.

**更新**

由于默认主题使用非常浅的颜色，因此在我上面的示例中似乎看不到对照组中第一个项目的圆角。您唯一的选择可能是使用 css hack 通过定位`.ui-btn-inner`类来删除它们。我已将 css 添加[到此更新的 jsfiddle](http://jsfiddle.net/3txqn/9/)中。有问题的CSS是这样的：

```
.ui-btn-inner {
    border-top: none !important;  // Use to remove borders all together 
    border-radius: 0 !important;  // Use this to remove the radius  
} 
```

​</p>

# python - Django在数据库中保存带有额外字符的表单字符串（u'string'）

> ID：11770135
> 
> 赞同：4
> 
> 时间：2012-08-02T02:11:58.943
> 
> 标签：python, django, postgresql, django-forms, django-postgresql

`form.cleaned_data`在尝试将其保存在 postgres 数据库中时，我在 django 中遇到了问题。

```
user_instance.first_name = form.cleaned_data['first_name'] 
```

数据以这种方式保存`(u'Firstname',)`，带有'u'前缀和括号，就像我在数据库中保存一个元组一样。

我已经在 mysql 数据库中使用了很多次，而且以前从未发生过，

我的 django 版本是 1.3.1

**更新**

我以这种方式使用逗号 user_profile.phone_area = phone_area, user_profile.phone_number = phone_number, user_profile.email = email,

我编辑了别人的源代码并忘记删除逗号，这就是它生成元组的原因。谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:56:15.287

除了验证之外，`form.clean_data()`还会对 Python 数据类型执行一些隐式转换。`str()`您可以通过使用或`unicode()`内置的包装返回值来简单地执行显式转换。之后，使用`strip("(''),")`.

# asp.net-mvc-views - 查看操作链接未将值传递给控制器 操作

> ID：11770138
> 
> 赞同：0
> 
> 时间：2012-08-02T02:12:21.457
> 
> 标签：asp.net-mvc-views

我有以下看法：

```
<h2>
Contract</h2>
@Using Html.BeginForm()
@Html.ValidationSummary(False)
@<fieldset>
<legend>Hire Contract</legend>
<div class="editor-label">
@Html.LabelFor(Function(model) model.ContractNo)
</div>
<div class="editor-field">
@Html.DisplayTextFor(Function(model) model.ContractNo)
</div>

<div class="editor-label">
@Html.LabelFor(Function(model) model.HireId)
</div>
<div class="editor-field">
@Html.DisplayTextFor(Function(model) model.HireId)
</div>

-- More fields here --- 

<div>
<table>
<tr>
<th>
Line Id
</th>
<th>
Description
</th>
<th>
Return Quantity
</th>
<th>
</th>
</tr>

<p/>
@Html.ActionLink("Add Line", "AddContractLine")
<p/>

@For Each item In Model.HireContractLines
Dim currentItem = item
@<tr>
<td>
@Html.DisplayFor(Function(modelItem) currentItem.LineId)
</td>
<td>
@Html.DisplayFor(Function(modelItem) currentItem.Description)
</td>

-- Many other fields here ...

<td>
@Html.ActionLink("Edit", "EditContractLine", New With {.id = currentItem.LineId})
|
@Html.ActionLink("Delete", "DeleteContractLine", New With {.id = currentItem.LineId})
|
@Html.ActionLink("Return Line", "ReturnContractLine", New With {.id = currentItem.LineId})
</td>
</tr>
Next
</table>
</div>
<p>
<input type="submit" value="Full Return" />
</p>
</fieldset> 
```

控制器看起来像：

```
Function EditContractLine(hireLineId? As Integer) As ActionResult
Dim contractLine = GetContractLine(CInt(hireLineId))
Return View(ContractLine)
End Function 
```

但是，当我单击 Edit Line 或 Delete Line 时，值不会传递给控制器​​操作。它始终为 Null。

谁能指出我的问题？任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T00:50:53.440

我发现问题出在哪里：

Action Link 和 Controller Parameter 中的参数名称应相同。

例如 .id 应该是 .hireLineId 以匹配控制器参数名称！！

@Html.ActionLink("Return Line", "ReturnContractLine", New With {.id = currentItem.LineId})

# css - 在正文标签中设置字体样式，不适用于表格

> ID：11770140
> 
> 赞同：2
> 
> 时间：2012-08-02T02:12:47.133
> 
> 标签：css, fonts

如何在 css 中为整个页面设置字体样式？我设置了它们，`body {...}`但它不适用于我页面中的表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:51:58.833

在某些浏览器的[Quirks 模式中，以及在](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)*非常*旧的浏览器中，表不继承它们应该由规范继承的某些属性。因此，您的页面看起来像是在 Quirks 模式下处理的。通过在开始时添加来更改`<!doctype html>`它很容易，但它也可能导致几乎任何其他事情。

处理这个问题的最简单方法是在表格上设置字体属性，例如

```
body, table { font-family: Helvetica, Arial, sans-serif; }
body { font-size: 85%; }
table { font-size: 100%; } 
```

要为整个页面设置字体样式，在*所有*元素上，使用通用选择器`*`，例如

```
* { font-family: Helvetica, Arial, sans-serif; font-size: 100%; } 
```

（某些元素，如`input`和`pre`，根据浏览器的默认设置有自己的默认字体设置，因此继承不适用于它们。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:51:38.130

```
body {
    font-family: /*what ever */;
} 
```

**某些浏览器无法`font properties` 正确继承到表格单元格中。**

所以你可以试试

```
body, table, td {
    font-family:/*what ever*/;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:18:14.010

如果没有专门设置更精确的位置（例如使用另一个元素、类或 ID），它会自动包含表格。

您可以尝试使用重置 css 文件来重置所有标准字体和样式。[Html5Boilerplate](http://html5boilerplate.com/)有一个非常好的，或者你可以尝试更具体：

```
body, table, td {
    font: san-serif;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T02:19:53.413

尝试

```
* {font-style:normal;} 
```

虽然我认为您的意思是“字体系列”，因为您只有三种字体样式选择——粗体、斜体和正常，并且拥有一整页的一种样式会很难看......如果那是这种情况下，这里是字体系列的例子：

尝试

```
* {font-family:verdana;} 
```

或者

正文 {font-family:yourstyle;}

您应该会看到整个页面的变化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T02:15:53.530

```
html{font-size:20px;} 
```

你可以试试这个。

# python - 通过 Synaptic 安装 python3-numpy 但无法在 python3 中导入模块 numpy

> ID：11770142
> 
> 赞同：0
> 
> 时间：2012-08-02T02:13:14.777
> 
> 标签：python, ubuntu, numpy, python-3.x

python3-scipy 也有同样的想法。我使用 Synaptic 安装了 python-numpy/scipy、python3-numpy/scipy/。但它们都安装在`python3`没有`python3.2`。我的系统是 Ubuntu 12。任何人都可以有 Synaptic 的经验吗？

```
ImportError: No module named numpy. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:05:31.320

在 Ubuntu 12.04 上 /usr/bin/python3.2 和 /usr/bin/python3 是相同的 Python。因此，如果它是为 /usr/bin/python3 安装的，它也会为 /usr/bin/python3.2 安装（当然，除非你覆盖了 /usr/bin/python3.2）。

因此，我怀疑您的机器上安装了多个 Python，可能是 /usr/local/bin/python3.2？

当您使用 Synaptic（或 apt-get 或 aptitude 等）安装模块时，它将仅为系统提供的 Python 安装，即 /usr/bin 中的那些。如果您想将它用于任何其他安装，您还必须为该安装安装它，然后您需要按照该软件包文档中的安装说明进行操作。

通常`pip install <packagename>`会起作用，但并非所有软件包都可以以这种方式安装（当然，最值得注意的是 pip 本身）。

# javascript - 另一个函数中的 JavaScript + 引用对象？

> ID：11770144
> 
> 赞同：0
> 
> 时间：2012-08-02T02:13:32.497
> 
> 标签：javascript

如果我在 onLoad 函数中创建一个对象，然后尝试在 onChange 函数中引用该对象，则该对象是“未定义的”......我该如何引用它？

**HTML：**

```
<body onLoad="loaded()">
    <select onChange="updateObject(event)">
        <option value="v1">--v1--</option>        
        <option value="v2">--v2--</option>
    </select>
</body> 
```

**JS：**

```
function loaded(){             
    var obj = new ObjectExample();
}
function updateObject(event){
    console.log(obj);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:19:10.233

您在这里处理的是变量范围。对象 'obj' 仅存在于 'loaded' 函数中，因为它是声明它的位置。解决此问题的一种快速简便的方法是为变量提供更大的范围。例如，全局范围。

```
var obj;

function loaded(){                  
    obj = new ObjectExample(); 
} 
function updateObject(event){     
    console.log(obj); 
} 
```

'obj' 变量现在存在于 'window' 对象上（尝试在浏览器控制台工具中输入 window.obj！）。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:18:18.550

```
var obj;

function loaded(){             
    obj = new ObjectExample();
}
function updateObject(event){
    console.log(obj);
} 
```

# enums - Sax XML Parser，switch 不带字符串

> ID：11770145
> 
> 赞同：0
> 
> 时间：2012-08-02T02:13:32.877
> 
> 标签：enums, switch-statement, saxparser

我们正在尝试使用 sax 解析器解析 xml 文件，但使用 switch in 时遇到了问题：

```
 public void startElement(String uri, String localName, String qName,
    Attributes atts) throws SAXException {
    switch(MyEnum.valueOf(qNam))
     case tag1: 
          .......
                 break;
        case tag2:  
         ........
                 break;
        case tag5:  
         .......... 
```

在每种情况下，我们都在填充一些 pojo 对象。

问题是当解析器遇到一个我们忽略它的标签时会抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:23:22.270

抛出异常是因为您自己的代码调用 MyEnum.valueOf 的参数不能保证是枚举常量的名称。

因为你想忽略异常，所以最好不要抛出异常。例如，可以通过将以下方法添加到 MyEnum 来完成：

```
public static boolean isOneOfTheValues(String val) {
    for (MyEnum m: values()) {
        if (m.name().equals(val)) {
            return true;
        }
    }
    return false;
} 
```

如果已知它是未知值，则根本不进入 switch 语句：

```
if (!MyEnum.isOneOfTheValues(s)) {
    return;
}
switch(MyEnum.valueOf(qNam)) 
```

如果枚举包含许多常量，则使用重建集而不是迭代 values() 的返回值可以提供更好的性能。

# html - 没有足迹的 HTML 元素，但可以是另一个元素的容器

> ID：11770147
> 
> 赞同：1
> 
> 时间：2012-08-02T02:13:41.750
> 
> 标签：html, css, backbone.js, templating, backbone-views

是否有一个 HTML 元素，或者一个元素，当与正确的 CSS 样式属性结合使用时，除了可以用作其他元素的容器之外没有占用空间？

它几乎就像页面标记上的“标记”，实际的 HTML 应该由 jQuery 放置。

它可能是什么样子的示例：

```
<span id='the_view_container' style='display:dont-do-anything'></span> 
```

我问的原因是因为我正在使用 Backbonejs，当我必须向屏幕添加视图时，我发现我要么必须指定在创建视图时应该将视图挂钩的元素，这有其缺点：

```
theView = new TheView({
    el:    $('#the-view-container')
}); 
```

或者我必须在现有元素中插入视图，通常是 div。这给模板带来了困难：

```
theView = new TheView({});
$('#the-view-container').html(theView.el);
$('#the-view-container').addClass('theViewClass');  // <-- Shouldn't have to do this 
```

任何输入表示赞赏，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:32:08.687

未附加到文档流的 DOM 元素应该可以解决问题。尝试`div`例如：

```
var detachedDiv = $('<div/>');

theView = new TheView({
    el:    detachedDiv
}); 
```

然后，当您希望附加视图时，您可以将其附加到`<body>`例如：

```
$('body').append(detachedDiv); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:42:59.733

你最好动态创建一个元素。

但是，您可以像这样创建一个“无”元素：

```
<div id="nothing" style="display: none; visibility: hidden; width: 0; height: 0; line-height: 0"></div> 
```

然后`style`在需要时设置：

```
$('#nothing').css(''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T03:03:33.193

（假设您的 CSS 没有异常重置，）只需使用`<div>`带有 ID 的空。

```
<div id="backboneJScontent"></div> 
```

由于默认情况下 div 的高度为 0，因此在给定高度、边框、边距、轮廓或填充之前，它们不会在文档流中呈现任何空间。（默认情况下他们没有这些）

然后，当您需要向其中插入内容时，您可以直接将其插入到该 div 中，只需使用 ID 选择它即可。

```
$("#backboneJScontent"); 
```

# python - 从python中的继承类访问私有方法

> ID：11770156
> 
> 赞同：1
> 
> 时间：2012-08-02T02:15:16.870
> 
> 标签：python, class, inheritance

我想遵循良好的编程习惯，所以我有点卡在这个问题上：

假设我有类根，

```
Class root(Object):
   def __init__(self):
     self._root_tree = 'Base'

   def __str__(self):
     return self._root_tree

   def _test(self):
      return 'test' 
```

假设我创建了一个名为 Oak 的类

```
Class Oak(root):
    def __str__(self):
      return 'Oak'
    def _test(self):
      return 'Oak_test'
    def _new_fun(self):
      return 'new_func_only_in_oak' 
```

然后在 Class Cherry 中，我可以执行以下操作吗

```
Class Cherry(root):
    def _grab_trees(self,another_tree): #another_tree is a Oak object
      other_tree = another_tree.__str__() #this will return Oak
      return 'The other three is: ' + other_tree
    def _test2(self,another_tree):
      return another_tree._test()
    def _testing_new(self,another_tree):
      return another_tree._new_fun() 
```

基本上调用`__str__()` `_new_fun()`并`_test()`在 Cherry 类中有效（良好做法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:22:02.930

你可以，但在这个例子中，最好只调用`str(another_tree)`. 一般来说，您不应该直接调用双下划线方法，除非您正在做一些与它们的实现特别相关的事情（例如，从子类实现中调用超类实现）。大多数情况下，双下划线方法的存在是为了让类在更“正常”的上下文中以某种方式表现，并且您应该将该正常上下文用于正常目的。例如，`__str__`当你调用它时，存在让类做正确的事情`str()`，所以你应该调用`str()`它而不是`__str__`直接调用。

至于单下划线方法，除非您编写它们，否则调用它们通常不是一个好主意。这样做没有“惩罚”，但按照惯例，单个下划线表示不属于公共 API 的方法。因此，如果您使用它们，如果您正在使用的库已更新并且这些下划线方法消失或更改，您将面临代码中断的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:23:36.613

这取决于您的设计声明为这些类方法的逻辑接口的内容。

如果您以某种方式在某处指定您正在返回非实例，那么您所做的一切都很好。如果您正在创建隐含的期望，即方法返回 Cherry 的实例并且您正在返回 Oak，那么您正在为严重的错误引入空间。

一般来说，`__method__`为类的内部工作和重铸保留约定。

# html - 在锚点内垂直对齐文本

> ID：11770160
> 
> 赞同：1
> 
> 时间：2012-08-02T02:16:04.603
> 
> 标签：html, css

我正在尝试集思广益，寻找在锚点内垂直对齐文本的最佳方法，以及该方法与跨浏览器兼容（ie7+）。到目前为止，我想出的最好方法是在锚中创建一个人造元素，然后将锚的内容包装在一个跨度中（`<ins>`只是一个内联元素）。

```
<a href="#"><ins></ins><span>blah</span></a> 
```

通常，简单的填充可以实现这一点，但在我的测试用例（[http://jsfiddle.net/2jnSP/1/](http://jsfiddle.net/2jnSP/1/)）中，其中一个锚点有多行文本。

所以，如果你有更好的想法，就把它们扔在那里！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:30:49.700

**编辑：**

我在这里做了一个例子：http: [//jsfiddle.net/Egqjf/1/](http://jsfiddle.net/Egqjf/1/)。

它对 IE < 8`display: table`等使用一些条件注释，用于现代浏览器。

这可以根据您拥有的元素进行调整。

**HTML：**

```
<!--[if lt IE 8]>
<style type="text/css">
.inner {
    position: absolute;
    top: 50%
}
.content {
    position: relative;
    top: -50%
}
</style>
<![endif]-->
<div class="wrapper">
    <!--[if lt IE 8]>
    <div class="inner">
    <![endif]-->
        <div class="content">
            <div>blah blah (line 1)</div>
            <div>lorem ipsum (line 2)</div>
        </div>
    <!--[if lt IE 8]>
    </div>
    <![endif]-->
</div> 
```

**CSS：**

```
.wrapper {
    display: table;
    position: relative;
    width: 150px;
    height: 200px;
    background: green
}
.content {
    display: table-cell;
    vertical-align: middle
} 
```

* * *

**原始答案可能对这个问题没有用，但可能对其他人有用：**

* * *

**HTML：**

```
<a href="#">blah</a> 
```

**CSS：**

```
a {
    display: block;
    height: 50px;
    line-height: 50px
} 
```

# php - 包含后查看 PHP 代码

> ID：11770164
> 
> 赞同：1
> 
> 时间：2012-08-02T02:16:17.177
> 
> 标签：php

基本上，我需要在包含之后查看文件的 PHP 代码。我试图确切地查看正在运行的 PHP 代码。例如...

```
<?php // a.php
    $a = 10;
?>

<?php // b.php
    include('a.php');
    $b = 20;
?> 
```

如果我试图获取 b.php 的代码，它将显示以下内容：

```
<?php
    $a = 10;
    $b = 20;
?> 
```

那可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:20:06.333

```
// at the end of your script
<?php
$totalRunCode = '';
$scripts = get_included_files();
foreach($scripts as $script)
{
   $totalRunCode .= file_get_contents($script);
}

// do whatever with totalRunCode 
```

虽然我不知道你为什么要这样做。

# c++ - 如何将结构属性转换为 C++ 中的指针引用？

> ID：11770169
> 
> 赞同：0
> 
> 时间：2012-08-02T02:16:34.183
> 
> 标签：c++, json, pointers, struct, directed-acyclic-graphs

我有一个 JSON 格式的 DAG，其中每个节点都是一个条目：它有一个名称和两个数组。一个数组用于其他带有箭头的节点，另一个数组用于该节点指向的节点（传出箭头）。

因此，例如：

```
{ 
  'id': 'A',   
  'connected_from' : ['B','C'],  
  'connects_to' : ['D','E']
} 
```

我有这些节点的集合，它们一起形成了一个 DAG。

我想将节点映射到一个结构来保存这些节点，其中 id 只是一个字符串，我希望数组成为这个结构的指针向量：

```
struct node { 
    string id;  
    vector<node*> connected_from;
    vector<node*> connected_to;
} 
```

如何将 JSON 数组中的节点条目作为“id”转换为指向包含该节点的正确结构的指针？

一种明显的方法是构建一个键值对映射，其中 key = id，value = 指向具有该 id 的结构的指针，然后进行查找 - 但有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:20:48.160

不，仅考虑您提供的信息没有更好的方法：您需要构建地图。

但是，对于单个字母 id，映射可能采用简单数组的形式，例如 26 个英文字母条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:24:18.640

将有一些容器对象保存所有节点（否则您将泄漏它们。）您始终可以扫描容器以找到节点。但这将是低效的 - O(N^2) 而地图查找将是 O(N log N )。

虽然如果您将对象按排序顺序存储在容器中（或使用排序容器），您可以将这两种情况减少到 O(N log N)。

但是常数会有所不同，因此对于小图，扫描可能会更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T02:34:03.887

我认为您的建议很好...从 ID 映射到节点。它简单、直观且足够快，足以满足实际用途。考虑到数据是从 JSON 解析的，您的存储和查找不会显着影响性能。如果您真的很担心，请实施字典来替换您的地图。

一般来说，我总是提倡完成工作的最简单、最干净的方法。太多人沉迷于算法中的内存或性能损失，而他们代码中的实际瓶颈在其他地方。

# r - 在不使用“for”结构的情况下创建列表列表的任何更简洁/优雅的方法？

> ID：11770175
> 
> 赞同：4
> 
> 时间：2012-08-02T02:17:29.127
> 
> 标签：r, list, for-loop

我需要创建一个对象来计算和存储过去两年中一年中每个月电网中 14 个节点的 3 组电价（高峰、非高峰和每日平均）。我认为嵌入式列表数据结构是合适的（如果这不是最佳的，请纠正我）。

无论如何，我都不喜欢使用 for 循环来创建这种结构。如果有一种优雅的方法可以做到这一点，如果有人能帮助我朝着正确的方向前进，我将不胜感激。我正在尝试练习和改进我的编码。谢谢你。

```
hb_lz_names <- c("HB_BUSAVG", "HB_HOUSTON", "HB_HUBAVG", "HB_NORTH", "HB_SOUTH", 
"HB_WEST", "LZ_AEN", "LZ_CPS", "LZ_HOUSTON", "LZ_LCRA", "LZ_NORTH", 
"LZ_RAYBN", "LZ_SOUTH", "LZ_WEST")

power_price <- list()
for (i in 1:2){
  power_price[[i]] <- list()
  for (j in 1:12){
    power_price[[i]][[j]] <- list()
    for (k in 1:NROW(hb_lz_names)) {
      power_price[[i]][[j]][[k]] <- list()
      for (l in 1:3){
        power_price[[i]][[j]][[k]][[l]] <- l
      }
      names(power_price[[i]][[j]][[k]]) <- c("on-peak", "off-peak", "average")
    }
    names(power_price[[i]][[j]]) <- hb_lz_names
  }
  names(power_price[[i]]) <- c("jan", "feb", "mar", "apr", "may", "jun", "jul", "aug",
                             "sep", "oct", "nov", "dec")
}
names(power_price) <- c("2011", "2012") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T02:25:43.567

我认为对于像这样的*常规*（不参差不齐）数据集，使用数组会更好**：**

```
period_names <- c("on-peak", "off-peak", "average")
hb_lz_names <- c("HB_BUSAVG", "HB_HOUSTON", "HB_HUBAVG", "HB_NORTH", "HB_SOUTH", 
"HB_WEST", "LZ_AEN", "LZ_CPS", "LZ_HOUSTON", "LZ_LCRA", "LZ_NORTH", 
"LZ_RAYBN", "LZ_SOUTH", "LZ_WEST")
yrs <- 2011:2012

power.price <- array(1,dim=c(2,12,length(hb_lz_names),length(period_names)))
dimnames(power.price) <- list(year=yrs,month=month.abb,node=hb_lz_names,
                              period=period_names) 
```

（给列表中的元素*命名*`dimnames`——即命名你的维度——对于尝试记住数组结构很有帮助......）

然后，您可以使用 轻松计算适当边距的平均值（或其他汇总统计数据）`apply`，并使用 ... 转换为长格式（用于`ggplot`图形或统计分析）`reshape2::melt`。根据我的经验，深度嵌套的列表很麻烦。

# mysql - 在 3 个表上左连接 - 无法正确处理

> ID：11770182
> 
> 赞同：1
> 
> 时间：2012-08-02T02:17:54.697
> 
> 标签：mysql

我正在尝试使用 where 子句对 3 个表进行左连接，但无法正常工作。

我的桌子是：

```
sale:
sale_id (int)
terminal_id (int)
zread_id (int)
... more fields about total amounts, dates times etc

sale_payment:
payment_id (int)
sale_id (int)
payment_type (enum: 'P','W','A')
method_id (int)
payment_amount (Decimal)

sale_writeoff_method:
method_id (int)
description (varchar)
display_order (int) 
```

销售可以通过 3 种不同的方式完成（支付）（因此是枚举）实物支付 - 现金、支票等，“注销”支付 - 库存以成本价（即浪费、赠品等）或账户 -客户信用等

在销售期结束时（一天结束），用户进行 Z-Read 收集所有发生的交易并生成报告，然后用户必须平衡抽屉中的现金等。当我创建初始 Z-Read 对象，我可以使用查询收集我需要的信息：

```
SELECT m.method_id, m.description, SUM(s.sale_total) as z_total, COUNT(s.sale_id) as total_sales
FROM sale_writeoff_method m
LEFT JOIN sale_payment p ON m.method_id = p.method_id
LEFT JOIN sale s ON s.sale_id = p.sale_id 
WHERE s.zread_id IS NULL 
AND (p.payment_type = 'W' OR p.payment_type IS NULL) 
AND (s.terminal_id = ? OR s.terminal_id IS NULL) 
GROUP BY p.payment_type, m.method_id 
ORDER BY m.display_order; 
```

一旦一切都平衡并最终确定，销售表中所有类型的所有收集的销售都将使用插入此对象产生的 zread_id 进行标记。

现在我的问题是，当我将来需要重新创建 z-read 对象时，例如重新打印报告，我无法显示所有的方法 ID 和描述 - 我一直在使用的查询是：

```
SELECT m.method_id, m.description, SUM(s.sale_total) as z_total, COUNT(s.sale_id) as total_sales 
FROM sale_writeoff_method m 
LEFT JOIN sale_payment p ON m.method_id = p.method_id 
LEFT JOIN sale s ON s.sale_id = p.sale_id 
WHERE s.zread_id = 1 
AND (p.payment_type = 'W' OR p.payment_type IS NULL) 
GROUP BY p.payment_type, m.method_id 
ORDER BY m.display_order;

But it only displays methods that had sales attached for that Z-Read period. I can't use WHERE s.zread_id IS NULL because that will include all the sales that haven't been finalised yet. 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:58:08.390

问题是左连接为未找到匹配行的连接列值返回空值，但您正在检查`where`子句中的这些列值，但`where`谓词在所有行连接*后*执行，因此它们永远不会匹配并且您的外部连接已下沉。

即，这个示例查询：

```
select *
from table1 t1
left join table2 t2 on t2.fk = t1.id
where t2.col1 = 'x' 
```

永远*不会*返回任何在 中没有对应行的行`table2`，因为`col1`will be`null`和与`null`are 的比较总是`false`，除了`col1 is null`.

要解决此问题，您需要将测试移动到`ON`子句中，以便*在进行连接时进行*比较，如下所示：

```
select *
from table1 t1
left join table2 t2 on t2.fk = t1.id and t2.col1 = 'x' 
```

现在左连接仍然会在匹配键时返回行，并应用额外的谓词来进一步细化匹配。

在您的情况下，您正在对 进行外部（即`left`）连接`sale_payment p`，但`p.payment_type = 'W'`在 where 子句中进行测试，这是行不通的。

`ON`这是固定查询，在子句中对左连接表进行了测试：

```
SELECT
    m.method_id,
    m.description,
    SUM(s.sale_total) as z_total,
    COUNT(s.sale_id) as total_sales
FROM sale_writeoff_method m
LEFT JOIN sale_payment p ON m.method_id = p.method_id AND p.payment_type = 'W'
LEFT JOIN sale s ON s.sale_id = p.sale_id AND s.terminal_id = ?
GROUP BY m.method_id, m.description
ORDER BY m.display_order; 
```

请注意，我还删除了`group by p.payment_type`，因为您尚未选择该列，并且我添加了 group by `m.description`，因为您*已*选择了该列。

您可能需要微调查询，但希望这会非常接近

# ios - 如何使用 POST 请求或更安全的方法从服务器下载文件，而不使用 iOS 应用程序的 GET 请求。

> ID：11770183
> 
> 赞同：0
> 
> 时间：2012-08-02T02:17:55.500
> 
> 标签：ios, ios5, post, webserver, download

我不想使用 asihttp 方法，所以有没有办法从服务器下载文件而不必使用 get 请求？如何使用发布请求从服务器下载文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:52:32.730

由于 OP 无论如何都想要答案，因此我将为此使用 PHP。

iOS客户端：

```
NSString *phpURLString = [NSString stringWithFormat:@"%@/getFile.php", serverAddress];
NSURL *phpURL = [NSURL URLWithString:phpURLString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:phpURL];

NSString *post = [NSString stringWithFormat:@"filePath=%@", filePath];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding];
NSString *postLength = [NSString stringWithFormat:@"%d", [post length]];

[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];

NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]: 
```

对于 PHP 端：

```
<?php

$filePath = htmlspecialchars($_POST['filePath']);

$fileData = file_get_contents($filePath);

echo $fileData;

?> 
```

这是非常基本的。同样对于 iOS 端，您可能希望将整个请求包装在一个在后台异步运行的代码块中。您可以为此使用 GCD。在 iOS 中将文件作为 responseData 后，您可以将文件保存到本地容器，然后用它做很多事情。

# network-protocols - 如何在没有客户端支持的情况下使用 TCPCT 防止 DDOS？

> ID：11770190
> 
> 赞同：0
> 
> 时间：2012-08-02T02:18:47.770
> 
> 标签：network-protocols

我阅读了有关 TCP Cookie 事务的 RFC 6013。实际上cookie事务可以防止DDOS。但这只是一种 TCP 选项。它需要客户端和服务器同时支持它。但是，如果客户端是恶意攻击者，为什么要使用此选项？

我不认为 TCP Cookie Transactions 可以阻止 DDOS

如果客户端不使用该选项，TCPCT 如何防止 DDOS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:33:34.650

您的问题有很多可能的答案，但这可能是最简单的：一旦 TCPCT 被广泛采用，在 DDOS 攻击期间，您可以拒绝所有不使用 TCPCT 的连接。因此，与支持 TCPCT 的客户端的合法连接将继续工作，从而击败 DDOS 攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:12:44.343

@David Schwartz 的好答案，但我不明白这如何防止僵尸网络 DDoS 实际使用“合法”受感染的机器。（即特洛伊木马 DDoS） 这些是相当常见的攻击策略 - 易于使用且价格低廉。这只是有关该主题的众多资源之一：

[http://www.scmagazine.com/easy-available-tools-botnets-contribute-to-ddos-rise/article/253382/](http://www.scmagazine.com/easily-available-tools-botnets-contribute-to-ddos-rise/article/253382/)

是的，TCP Cookie 可以防止 SYN 洪水，但这些已经可以通过 ACK 验证来缓解（最好是反向代理来阻止更大的洪水）

我在一家安全公司 ( [Incapsula](http://www.incapsula.com/) ) 工作，我们每天都在处理 DDoS。我们阻止了许多僵尸网络攻击，并且数量/攻击规模只会继续增长。

我认为，在未来 3 到 5 年内，大多数 SMB 商业网站都将配备 3rd 方 DDoS 保护，因为这只是一场竞赛（攻击量与管道大小），而第 3 方前门代理是成本最高的——拥有可扩展且高效的 DDoS 解决方案的有效方法。

# delphi - 在 Delphi 中获取 Advantage Database 查询的进度

> ID：11770203
> 
> 赞同：3
> 
> 时间：2012-08-02T02:21:08.437
> 
> 标签：delphi, delphi-xe, advantage-database-server

我已经搜索和搜索，但无法找到如何在 Delphi 中获取查询的进度。我找到了 Advantage .NET 数据提供程序的一些信息，但可以使用 Delphi 的一些帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T02:32:41.987

您需要[AdsRegisterCallbackFunction](http://devzone.advantagedatabase.com/dz/webhelp/Advantage11/index.html?ade_adsregistercallbackfunction.htm)方法。这是一个快速示例，用于在为 TAdsTable 创建索引期间显示进度；对于 a 的进展，它的工作方式完全相同`TAdsQuery`：

```
implementation

var
  // Holder for reference to progressbar on form, so it can be
  // accessed easily from  the callback - see below
  PB: TProgressBar = nil;  

// replacement for Application.ProcessMessages, since we don't have 
// access to the Application from the callback either

procedure KeepWindowsAlive;
var
  M: TMsg;
begin
  if PeekMessage(M, 0, 0, 0, pm_Remove) then
  begin
    TranslateMessage(M);
    DispatchMessage(M);
  end;
end;

// The callback function itself - note the stdcall at the end
// This updates the progressbar with the reported percentage of progress
function ProgressCallback(Percent: Word; CallBackID: LongInt): LongInt; stdcall;
begin
  if PB <> nil then
    PB.Position := Percent;
  KeepWindowsAlive;
  Result := 0;
end;

// The button click handler. It registers the callback, calls a function 
// that creates the index (not shown here), and then unregisters the callback.
//
// As I mentioned above, it works the same way with a TAdsQuery.
// You'd simply assign the SQL, set any params, and register the
// callback the same way. Then, instead of calling my CreateIndexes
// method, you'd Open the query; it will call the progress callback
// periodically, and when the query finishes you just unhook the
// callback as shown here.
procedure TCreateIndexesForm.CreateButtonClick(Sender: TObject);
begin
  // Grab a reference to the progress bar into the unit global, so we don't
  // need a reference to the form by name in the callback.
  PB := Self.ProgressBar1; 

  // AdsTable is a property of the form itself. It's set
  // during the constructor. It's just a `TAdsTable` instance.
  // The index info is set in that constructor as well (tag, 
  // expression, type, etc.).
  AdsTable.AdsRegisterCallbackFunction(@ProgressCallBack, 1);
  try
    CreateIndexes;
  finally
    // Unhook the progress callback
    AdsTable.AdsClearCallbackFunction;
    // Clear the outside reference to the progress bar
    PB := nil;
  end;
end; 
```

请注意，回调必须是独立的过程（如上所示），而不是表单方法。我已经展示了一种方法，通过使用对进度条的单元全局引用，不必对特定表单名称的访问进行硬编码。

# c# - c# 从 DataGridView 中的单元格检索数据时出现 NullReferenceException

> ID：11770205
> 
> 赞同：1
> 
> 时间：2012-08-02T02:21:16.677
> 
> 标签：c#, datagridview, nullreferenceexception

这是我的代码：

```
private void CostList_Load(object sender, EventArgs e)
{
    // TODO: This line of code loads data into the 'lSEStockDataSet.CostPrice' table. You can move, or remove it, as needed.
    this.costPriceTableAdapter.Fill(this.lSEStockDataSet.CostPrice);

    con = new System.Data.SqlClient.SqlConnection();
    con.ConnectionString = "Data Source=tcp:SHEN-PC,49172\\SQLEXPRESS;Initial Catalog=LSEStock;Integrated Security=True";
    con.Open();

    DataGridView datagridview1 = new DataGridView();
    String retrieveData = "SELECT CostID, SupplierName, CostPrice FROM CostPrice WHERE PartsID ='" + textBox1.Text + "'";
    SqlCommand cmd = new SqlCommand(retrieveData, con);
    int count = cmd.ExecuteNonQuery();
    SqlDataReader dr = cmd.ExecuteReader();
    DataTable dt = new DataTable();
    dt.Load(dr);
    dataGridView1.DataSource = dt;
    con.Close();

}

private void button1_Click(object sender, EventArgs e)
{

    if (dataGridView1.Rows.Count > 0)
    {   
        int nRowIndex = dataGridView1.Rows.Count-1;

        if (dataGridView1.Rows[nRowIndex].Cells[2].Value != null)
        {
            textBox2.Text = Convert.ToString(dataGridView1.Rows[nRowIndex].Cells[2].Value);
        }
        else
        {
            MessageBox.Show("NULL");
        }
    }
} 
```

当我单击按钮时它显示 NULL，这是什么问题？我在那里有 3 列，我想获取最后一行的第 3 列的数据，但它显示为 NULL 但指定单元格中有数据。任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:02:24.973

不要从行数中减去 1，而是尝试减去 2。减一将为您提供“添加”行的从零开始的索引，该行在最后一列中确实有一个空值。

```
 int nRowIndex = dataGridView1.Rows.Count-2; 
```

通过从计数中减去 2，您将获得最后一行的从零开始的索引，其中包含实际数据。我想这就是你要找的。

顺便说一句，您可能希望参数化您的 SQL 查询，如下所示：

```
String retrieveData = "SELECT CostID, SupplierName, CostPrice FROM CostPrice WHERE PartsID = @inPartsID";
SqlCommand cmd = new SqlCommand(retrieveData, con);
cmd.Parameters.Add(new SqlParameter("@inPartsID", textBox1.Text)); 
```

这将使您的查询更可靠（如果 textBox1 中有单引号字符会发生什么情况）并且您的数据更安全（作恶者可以使用 SQL 注入对您的数据库造成损害或从中获取他们不应该的数据）。

# c# - Windows 服务可以自行停止吗？

> ID：11770206
> 
> 赞同：25
> 
> 时间：2012-08-02T02:21:23.260
> 
> 标签：c#, windows, windows-services

我有一个启动类型为自动的 Windows 服务，但我想在服务启动时进行一些检查，并在这些检查失败时让服务自动停止。

我怎样才能做到这一点？我的服务是用 C# 编写的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-02T02:41:01.690

你可以在你的类上调用该`Stop`方法。有关详细信息，`ServiceBase`请参阅[msdn 。](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.stop.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-02T02:26:50.027

您可以使用[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)并调用 .stop。

```
ServiceController sc= new ServiceController(service);
sc.Stop(); 
```

# c# - 将数据从视图传输到 javascript 的最佳方式

> ID：11770207
> 
> 赞同：1
> 
> 时间：2012-08-02T02:21:32.947
> 
> 标签：c#, javascript, asp.net-mvc-3, hidden-field

我在一个 Asp.Net MVC 3 项目中工作，在我的一个 javascript 文件中，向用户显示一条消息。此消息目前使用一种语言，但我希望此消息使用多种语言。我不想将这些语言直接存储在 javascript 文件中，而是存储在数据库中。我想知道是否可以将数据（字符串）从视图传输到 javascript 文件。

我发现的一种解决方案是在隐藏字段中从我的视图中设置数据，然后从我的 javascript 文件中提取它。这个解决方案的问题是我必须放置很多隐藏字段，这很难维护。

这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:10:11.740

您可以尝试 JavaScriptModel ( [http://jsm.codeplex.com](http://jsm.codeplex.com) )。

使用此库，您可以通过在控制器操作中调用以下函数来添加变量：

```
this.AddJavaScriptVariable("VariableNameInJavaScript", SomeValue); 
```

您可以传递原始类型或复杂类型。

此外，您可以在控制器操作中使用以下代码执行 javascript 函数：

```
this.AddJavaScriptFunction("FunctionInJavaScript", SomeParameter, AnotherParameter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:25:54.100

是的，你在正确的道路上。您需要做的就是适当地水合您的模型并使用 Razor 语法将值从服务器传递到客户端“按照以下几行”：

```
<script src="@Url.Content("~/scripts/yourapi.js")"></script>
<script>
    yourapi.foo('@Model.SomeValue');
</script> 
```

# debugging - qDebug Qt 控制台应用程序输出到 Qt Creator 应用程序输出

> ID：11770211
> 
> 赞同：8
> 
> 时间：2012-08-02T02:22:36.560
> 
> 标签：debugging, console-application, qt-creator, qdebug, qtconsole

如何在 Qt 控制台应用程序中使用 qDebug 输出到 Qt Creator“应用程序输出”窗口？当前 qDebug 写入控制台窗口，这会干扰非调试输出。

默认情况下，在 Qt GUI 应用程序中使用 qDebug 输出到应用程序输出窗口。

![应用程序输出](../Images/843c6434365c2a72a36fdef4ec2e658c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T17:25:21.130

您可以将所有内容输出到控制台，也可以将所有内容输出到 Qt Creator 的应用程序输出面板。

为了完整起见：如果您想在面板中而不是控制台中拥有所有输出，您可以在项目->运行设置中取消选中“在终端中运行”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T21:35:13.837

要将 QDebug 重定向到多个位置，您可能必须编写一些代码，可能是这样的：

```
QList<QtMsgHandler> messageHandlers_;

static void messageDispatcher(QtMsgType type, const char *msg)
{
  foreach (QtMsgHandler callback, ::messageHandlers_)
    callback(type, msg);
}

static void messageLogger(QtMsgType type, const char *msg)
{
  QString output;
  switch (type) {
  case QtDebugMsg:    output = QString("mesage: %1\n").arg(msg); break;
  case QtWarningMsg:  output = QString("warning: %1\n").arg(msg); break;
  case QtCriticalMsg: output = QString("critical: %1\n").arg(msg); break;
  case QtFatalMsg:    output = QString("fatal: %1\n").arg(msg); break;
  default: return;
  }

  QFile file("log.txt");
  if (file.open(QIODevice::WriteOnly | QIODevice::Append))
    QTextStream(&file) << output;
}

int main()
{
  ...
  ::messageHandlers_.append(messageLogger)
  qInstallMsgHandler(messageDispatcher);
  ...
} 
```

# javascript - 在一个很明显是数字的变量上获取 NaN

> ID：11770216
> 
> 赞同：0
> 
> 时间：2012-08-02T02:23:15.040
> 
> 标签：javascript, variables, nan

这是迄今为止我见过的最奇怪的错误。

在我的程序中，我有一个名为 avgVolMix 的变量。这是一个十进制变量，而不是 NaN（console.log(avgVolMix) 将 0.3526246 打印到控制台）。但是，在赋值语句中使用该变量会导致它破坏任何试图使用它的 NaN。例子：

```
console.log(avgVolMix); <- prints a working decimal
var moveRatio = 10 + avgVolMix * 10;
console.log(moveRatio); <- prints NaN 
```

我真的不知道为什么会这样。我已经尝试了一切来解决它；我已将其转换为字符串，然后返回，将其四舍五入到小数点后 2 位，加上 0.0001 - 没有任何效果！这是我现在可以让它“工作”的唯一方法：

```
var temp = 0.0;
for(i = 0; i <= avgVolMix; i+=0.1)
     temp = i; 
```

这会将接近 avgVolMix 的数字分配给 temp。但是，正如您所看到的，这是非常糟糕的编程。我还应该注意，这不仅仅与这个变量有关，与我正在使用的库相关联的每个变量都会这样做（我正在研究音乐可视化器）。有谁知道为什么会发生这种情况？

编辑：我现在实际上无法访问代码来测试任何这些东西，而且由于这是一个公司项目，我无论如何都不愿意打开一个 jsfiddle。我只是想知道是否有人曾经经历过这样的事情。我可以告诉你，我从这里得到了有问题的图书馆：http: [//gskinner.com/blog/archives/2011/03/music-visualizer-in-html5-js-with-source-code.html](http://gskinner.com/blog/archives/2011/03/music-visualizer-in-html5-js-with-source-code.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:07:24.423

如果将变量值显示为 NaN。然后尝试将变量转换为 parseInt(); 方法。希望它有效。因为我也遇到过这样的问题并在尝试时解决了。

# java - zip文件中的文件名太长java

> ID：11770226
> 
> 赞同：0
> 
> 时间：2012-08-02T02:24:49.903
> 
> 标签：java, file, io

我有一个将 zip 文件作为 Java 输入的应用程序。我的应用程序将解压缩 zip 文件，并且在 zip 文件内有一些文件包含文件名超过 256 个字符

我可以在不解压缩的情况下修改 zip 中文件的文件名吗

操作系统：linux/mac

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T02:30:54.297

它更多的是对所使用的文件系统的限制，而不是操作系统本身。

您只能通过将驱动器格式化为支持更长文件名的不同文件系统来更改此设置。

为什么你需要一个几英里长的文件名，这超出了我的理解。但我能给出的唯一建议是，尽量缩短文件名。

**：：编辑：：**

既然你更新了你的问题。这是正确的答案。:)

通常，您的方法是正确的。尽管如果您的 zip 包含较长的文件名，您可以截断它们。（取第一个，250，忽略其余的。现在，您可能有重复的文件名。在末尾添加一个数字，因为您还剩下 5 个字符）另一个选项是要求用户输入一个新的文件名。

只要您知道 .etc 的结构，就可以编辑 zip 文件本身。

我不知道 Java 内置 API 允许编辑 zip 文件。虽然不久前，我遇到了这个库名称 DotNetZip for Microsoft.NET，它允许所有典型功能以及编辑 zip 文件中的条目、加密、密码等。（顺便说一句，这太棒了）

寻找类似的 Java 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:34:58.707

如果用户为要创建的文件提供文件名，我认为您只需要要求一个较短的名称，足够短以避免引发此异常。

但听起来这是要读取的现有文件的名称；在那种情况下，如果系统（文件或操作；无论哪种方式，你无法控制的东西）说它不是一个有效的文件名，你怎么能期望能够从中读取呢？

# jsp - Struts2：一个jsp页面与许多Action类交互

> ID：11770229
> 
> 赞同：0
> 
> 时间：2012-08-02T02:24:58.760
> 
> 标签：jsp, struts2, action

我是 Struts2 的初学者。我想知道如果同一个页面与许多 Action 类进行交互是否会成为问题（在运行或概念中）。

例如，**page.jsp 与 LoginAction.java、AdvertiseAction 和 NewsAction.java**。非常感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:51:33.607

Struts2 是基于动作的。当然，单个 jsp 可以与许多动作类交互。您需要做的就是在您的操作执行后转发到您的 jsp。这通常在`struts.xml`. 但是，为什么要在应用程序中使用单个 jsp？

# wordpress - Wordpress 永久链接更改没有 404 错误

> ID：11770237
> 
> 赞同：0
> 
> 时间：2012-08-02T02:25:51.490
> 
> 标签：wordpress, permalinks

我目前有多个子域的 wordpress 博客。目前永久链接结构是/%year%/%monthnum%/%day%/%postname%/ 我想改变它删除年份月份和日期，只输入postname。如果我现在这样做的问题，现有链接将引发 404 错误，为了避免它我想将当前的永久链接结构重定向到新的永久链接结构

例如我有 url [http://subdomain1.mydomain.com/2012/07/30/my-post-name/](http://subdomain1.mydomain.com/2012/07/30/my-post-name/)然后我希望它被重定向到[http://subdomain1.mydomain.com/my-post-name /](http://subdomain1.mydomain.com/my-post-name/)

```
RedirectMatch 301 ^/([0-9]{4})/([0-9]{2})/([0-9]{2})/(.*)$ http://subdomain1.mydomain.com/$4 
```

上述正则表达式的问题是将每个子域重定向到 subdomain1.mydomain.com，我想要类似的东西

```
 RedirectMatch 301 ^subdomain1.domain.com/([0-9]{4})/([0-9]{2})/([0-9]{2})/(.*)$ http://subdomain1.domain.com/$4     
 RedirectMatch 301 ^subdomain2.domain.com/([0-9]{4})/([0-9]{2})/([0-9]{2})/(.*)$ http://subdomain2.domain.com/$4 
```

上面的东西不起作用。

你能让我更正正则表达式吗？如果需要，我准备为每个子域添加一行 .htaccess

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:45:17.870

Solved it by removing the domain name

```
RedirectMatch 301 ^/([0-9]{4})/([0-9]{2})/([0-9]{2})/(.*)$ /$4 
```

It solves my current requirement, but what if i wanted to some subdomains to redirect and some not to in the future. Can anyone provide a better solution.

tried the below one too but it did not work for me

```
RewriteCond %{HTTP_HOST} ^subdomain\.domain\.com$
RewriteRule ^/([0-9]{4})/([0-9]{2})/([0-9]{2})/(.*)$ http://subdomain.domain.com/$4 [R=301,L] 
```

# javascript - JSON字符串未在Javascript中解析

> ID：11770239
> 
> 赞同：0
> 
> 时间：2012-08-02T02:25:59.527
> 
> 标签：javascript, ruby, ruby-on-rails-3

我正在尝试通过 rails 应用程序将数字签名存储在数据库中。

我正在使用将签名转换为 JSON 字符串的 javascript 插件。接下来我从参数中提取 JSON 字符串并存储在一个变量中。现在我想通过将采摘的 JSON 字符串提供给反向 javascript 函数来重新生成签名。

如果我将 javascript 中的变量直接设置为 JSON 字符串并将其传递给函数，则反向函数可以正常工作。但是，当我将变量分配给存储 JSON 字符串的 rails 变量时，它不起作用。两种情况下 JSON 字符串的值完全相同。

在第一种情况下，typeof var 正确显示 obj.obj 类型，但在第二种情况下，它显示为字符串。我厌倦了使用 JSON 和 Jquery 解析的所有技巧，但它不起作用。

我的导轨控制器：

```
@recipient_signature = params[:recipient_signature] 
```

我想查看使用 JSON 字符串生成的签名的视图。

```
 var sig = "<%=@recipient_signature%>";
    $(document).ready(function() {
      $('.sigPad').signaturePad({displayOnly:true}).regenerate(sig);
    }); 
```

即使 @recipient_signature 中的值是正确格式的 JSON 字符串，上述情况也不起作用。

但是当我将相同的 JSON 字符串分配给 sig 时，它可以工作......

```
var sig =  [{"lx":55,"ly":25,"mx":55,"my":24},{"lx":55,"ly":25,"mx":55,"my":25}....']; 
```

此 JSON 字符串与 @recipient_signature 中的相同，并显示在`<%=@recipient_signature%> correctly.`

Javascript 在第一种情况下不会以某种方式将其识别为数组，而在第二种情况下会......如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:31:01.253

您将 json 用引号括起来并使用 html 编码形式的变量：

```
var sig = "<%=@recipient_signature%>"; 
```

应该

```
var sig = <%=raw @recipient_signature%>; 
```

或者你应该解析 json：

```
var sig = JSON.parse('<%=raw @recipient_signature%>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:31:58.660

删除引号。也就是说，改变：

```
var sig = "<%=@recipient_signature%>"; 
```

到

```
var sig = <%=@recipient_signature%>; 
```

这样，当浏览器收到它时，它看起来就像您的第二个示例一样有效。

请注意，这并不是真正使用 JSON，它只是使用您的服务器端代码将 JS 数组文字直接输出到 JS 代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:35:12.877

我的猜测是您分配用双引号括起来的 sig 会导致问题 - 尝试使用单引号。

# javascript - HTML5 Canvas 的环绕：如何获取（静态）形状以在 Canvas 的边缘周围继续

> ID：11770240
> 
> 赞同：2
> 
> 时间：2012-08-02T02:25:58.317
> 
> 标签：javascript, html5-canvas

我正在尝试在 HTML5 画布上使用 Javascript 绘制**平铺背景**，但它不起作用，因为与画布边缘相交的形状不会环绕到另一侧。（要明确一点：这些是静态形状——**不涉及时间运动**。）我怎样才能让被画布的一侧打断的对象环绕到另一侧？

基本上我正在寻找许多电子游戏使用的“环绕”效果——最著名的是小行星；我只是想要这种效果用于**静态**目的。[这个页面](http://www.kevs3d.co.uk/dev/asteroids/)似乎是一个例子，表明它是可能的。请注意屏幕右边缘的小行星（无论是否移动）如何继续向左边缘移动。或者就此而言，角落中的对象在所有四个角落之间分割。同样，不一定涉及任何动议。

任何人都知道我如何能够画出一个正方形或一条环绕边缘的线？画布或Javascript可能有某种选择吗？我使用明显关键字的谷歌搜索结果为空。

* * *

## 编辑

为了提供更多背景信息，我的工作基于此处的示例：[Canvas as Background Image](http://www.webkit.org/blog/176/css-canvas-drawing/)。（也从这里链接：[使用 <canvas> 作为 CSS 背景](https://stackoverflow.com/questions/3397334/use-canvas-as-a-css-background/4641945#4641945)。）重复图像没有问题。问题是让形状的截断部分环绕到另一侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:32:03.073

我不确定您是如何设置瓷砖的，但是，如果它们都是单个“包装”幻灯片的一部分，该幻灯片有自己的 x，x，例如 0,0，那么您实际上可以只绘制两次，或根据需要生成新幻灯片。希望这段代码能更好地说明这个概念。

```
// Here, the 'tilegroup' is the same size of the canvas
function renderbg() {
    tiles.draw(tiles.posx, tiles.posy);
    if(tiles.posx < 0) 
        tiles.draw(canvas.width + tiles.posx, tiles.posy);
    if(tiles.posx > 0) 
        tiles.draw(-canvas.width + tiles.posx, tiles.posy);
} 
```

所以基本上，这里的想法是绘制两次瓷砖分组。一旦在它的实际位置，并再次填补空白。您仍然需要计算整个组何时完全离开画布，然后将其重置，但希望这会引导您朝着正确的方向前进！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:00:51.287

您总是可以在画布中创建您的可耕作图像，生成一个 toDataUrl()，然后将该数据 url 作为背景分配给某物，然后让 CSS 进行平铺……只是一个想法。

编辑：如果您在绘制可耕作图像时遇到问题，您可以创建一个 3*widthx3*width 画布，在其上进行常规绘制（假设您从数据的中心正方形抓取数据作为最终结果），然后查看是否您不能从画布的子集绘制到自身。看起来你必须使用：

var myImageData = context.getImageData(left, top, width, height); context.putImageData(myImageData, dx, dy);

（适当的测量）

[https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas/](https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas/)

编辑二：想法是你有一个足够大的画布，它有一个感兴趣的中心区域，它周围的缓冲区足够大，可以容纳你可能绘制的任何形状，如下所示：

```
XXX  
XCX
XXX 
```

您可以在这个大画布上绘制一次形状，然后`X`将该中心区域周围的每个区域盲目地绘制到中心区域（然后清除这些区域以进行下一次绘图）。因此，如果 K 是形状的数量而不是 4*K 绘制，则您有 K + 8 绘制（然后 8 清除）。显然，它的实际适用性取决于形状和重叠问题的数量，尽管我敢打赌它可以被调整。根据形状的复杂性，按照您最初的想法绘制形状 4 次，或者绘制到某个缓冲区或缓冲区，然后将其像素数据绘制 4 次或其他内容可能是有意义的。我承认，这是我脑海中突然出现的一些想法，所以我可能会遗漏一些东西。

Edit III: And really, you could be smart about it. If you know how a set of objects are going to overlap, you should only have to draw from the buffer once. Say you got a bunch of shapes in a row that only draw to the north overlapping region. All you should need to do is draw those shapes, and then draw the north overlapping region to the south side. The hairy regions would be the corners, but I don't think they really get hairy unless the shapes are large.... *sigh*.. at this point I probably need to quiet down and see if there's any existing implementations of what I speak out there because I'm not sure my writing off-the-cuff is helping anybody.

# java - 一个参数的多个值

> ID：11770242
> 
> 赞同：1
> 
> 时间：2012-08-02T02:26:05.437
> 
> 标签：java, parameters, applet

快速简单的问题...我想知道如何从 Java 小程序滚动横幅中的一个参数中获取多个值。

我需要我的小程序来显示诺基亚、爱立信和三星的产品参数。

有人告诉我，Applet 只能获取一个特定名称的参数，所以我需要弄清楚如何从一个“产品”参数中获取多个值。

我目前正在使用的..

```
 <param name=im0 value=" Text Here ">
 <param name=im1 value=" Text Here ">
 <param name=im2 value=" Text Here ">
 <param name=im3 value=" Text Here ">
 <param name=im4 value=" Text Here ">
 <param name=im5 value=" Text Here ">
 <param name=im6 value=" Text Here ">
 <param name=im7 value=" Text Here ">
 <param name=im8 value=" Text Here "> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:50:45.870

这里有 3 种方法，您似乎已经发现了其中一种。

*   将每个部分添加为`paramNN`where`NN`代表一个数字。继续尝试新的值`NN`直到 a`null`返回。
*   使用它们通常不包含的字符（例如`,`或`|`）连接值，并在收到后拆分值。
*   使用参数值指定包含复杂数据的文件的名称。

# php - 将图片存储在服务器上

> ID：11770244
> 
> 赞同：0
> 
> 时间：2012-08-02T02:26:16.270
> 
> 标签：php, apache

我很难找到有关以安全方式存储图像（个人资料图片）的信息。在您看来，是否有必要将它们存储在 Web 目录之外？更改 .htaccess 权限还不够吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:31:28.520

如果您只希望应该拥有权限的人可以访问它们，那么您希望将它们放在 web 目录之外。您可以通过以下几种方式处理为它们提供服务：.htaccess，或者通过在通过某些条件时为它们提供服务的脚本。无论哪种方式，如果要保护它们，您希望公共/匿名用户无法访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:30:18.550

如果您真的不希望除您的应用程序之外的任何人访问它们，那么您应该将它们存储在网站文档根目录之外。然后，只有对文件系统具有权限的应用程序才能访问它们。

你到底想做什么？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T02:28:29.547

无论如何，它们会在浏览器中呈现吗？任何人都可以右键单击它们并将它们保存到他们的硬盘上。尝试隐藏它们真的有必要吗？

标记

# javascript - HTML5，Javascript 画布标签 image.onload() 问题

> ID：11770252
> 
> 赞同：0
> 
> 时间：2012-08-02T02:26:50.093
> 
> 标签：javascript, html, canvas

```
 function LoadResources(){   
      alert("In load socket");

    var canvas   = document.getElementById("myCanvas");
    var context  = canvas.getContext("2d");
    var tiles= new Array();

    var loadedCount=0;
    for (x = 101; x <= 155; x++) {
      var imageObj = new Image(); // new instance for each image
      imageObj.src = "Resources/ClassicCardImages/deck1/dood_deck/"+x+".GIF";

      imageObj.onload=function(){
        loadedCount++;
        if(loadedCount==55){
            cardsImagesLoaded();
        }else {
          alert(loadedCount);
        }
      };
      tiles.push(imageObj);

     }
  }; 
```

因此，当我调用函数 LoadResources() 时，它确实会在“加载套接字中”发出警报，但在 imageObj.onload 函数中不会发出警报。

在 html 文档正文中使用时，您可以使用 window.onload 函数，即“window.onload = function() {..}”和我的函数。

另外，我在 Google chrome 上运行它。chrome 的 onload 是否有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:05:34.447

即使该`onload`函数仅被调用一次（在图像已完全加载的那一刻），您也试图增加加载计数器，因此无法多次触发警报。对我来说，你想做什么并不是很明显。无论如何，如果您想使用`onload`函数加载多个图像，最佳实践是使用闭包，否则在每次迭代时，可能会在循环结束时仅加载最后一个图像。我不会详细介绍什么是闭包，但原理是这样的：

```
for (var i = 0; i< 4; i++) {
    var imgObj = new Image();
    imgObj.onload = (function(img) {

        return function () {
            ctx.drawImage(imgObj, 0, 0);
        }
    })(i);

    imgObj.src = 'image.png';
} 
```

这样，通过调用一个新函数，您将创建一个新的执行上下文，保留`i`每次迭代的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:37:30.023

我只是为您的代码添加一点帮助。

要按照您的方式分配功能，按照以下方式进行操作会更便宜。

```
 for (x = 101; x <= 155; x++) {
      var imageObj = new Image(); // new instance for each image
      imageObj.src = "Resources/ClassicCardImages/deck1/dood_deck/"+x+".GIF";

      imageObj.onload= imageOnLoad;
     }
function imageOnLoad(){
        loadedCount++;
        if(loadedCount==55){
            cardsImagesLoaded();
        }else {
          alert(loadedCount);
        }
      };
      tiles.push(imageObj);
} 
```

# php - 会话破坏/注销奇怪问题

> ID：11770254
> 
> 赞同：0
> 
> 时间：2012-08-02T02:27:46.607
> 
> 标签：php, session, cookies, login, logout

我的站点使用一个简单的登录系统，它为用户名和登录会话创建一个 cookie。如果有人访问 home.php 并且登录会话设置为已登录，则他们将被推送到已登录区域。否则，他们使用简单的表单和处理程序页面登录。要注销用户，请单击将他们带到 logout.php 的链接，其中包含以下代码：

```
<?

session_start();

setcookie(username, $username, time()-360000);

session_start($_SESSION['login']);
$_SESSION["Login"] = "no";

header("Location: home.php");
session_destroy();

?> 
```

这是正在发生的事情。单击注销按钮的用户会被正确踢出到 home.php 页面。如果他们刷新页面，它们将保留在 home.php 页面上。目前看来还不错。

但是，如果他们离开主页，则会进入登录区域。如果他们转到登录区域的 url，他们不会被踢出（因为会话检查脚本确认会话值设置为已登录）。

我傻眼了。我无论如何都不是 PHP 专业人士——我做错了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:48:14.250

要使您的会话无效，您只需删除您的 cookie。

```
setcookie("username", "", time()-360000); 
```

将完成这项工作。请注意，用户名应该用引号引起来，`"`否则它不会引用 cookie 名称。

因此，您在注销时的代码将如下所示

```
<?
    session_start();
    setcookie("username", "", time()-3600);
    header("Location: home.php");
?> 
```

当用户登录并通过验证时，您需要为他们设置一个 cookie，然后将它们重定向到您经过身份验证的 url

您还需要在已验证区域中每个页面的开头检查您的 cookie，如下所示

```
<?
    session_start();
    if (!isset($_COOKIE["username"]))
        header("Location: home.php");
?> 
```

希望这可以帮助

[这](http://www.w3schools.com/php/php_cookies.asp)是另一个设置、使用和删除 cookie 的示例

# mysql - 选择帖子内部连接类别 slug

> ID：11770256
> 
> 赞同：0
> 
> 时间：2012-08-02T02:28:11.210
> 
> 标签：mysql, join

```
╔═════════════╦════════════╗
║    posts    ║ categories ║
╠═════════════╬════════════╣
║ id          ║ id         ║
║ title       ║ name       ║
║ slug        ║ slug       ║
║ content     ║            ║
║ category_id ║            ║
╚═════════════╩════════════╝ 
```

给定`slug`一个类别，我想选择该类别中的所有帖子。这些帖子与`category_id`-> `id`of category 链接。

```
SELECT `posts.title` 
FROM `categories` 
INNER JOIN `posts` 
ON `posts`.`division` = "1"
WHERE `category_slug` = "$category_slug" 
```

它给了我一个`Unknown column 'posts.title' in 'field list'`虽然。给定类别的 slug，我如何选择所有帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:31:03.643

看起来你想要

```
SELECT `posts`.`title` 
```

代替

```
SELECT `posts.title` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:31:24.490

应该

```
SELECT `posts`.`title` 
```

# opengl - GLM - 从投影矩阵计算平截头体

> ID：11770262
> 
> 赞同：8
> 
> 时间：2012-08-02T02:29:03.507
> 
> 标签：opengl, frustum

GLM 提供了一种声明投影矩阵的方法：

投影矩阵 = glm::perspective(45.0f, 4.0f / 3.0f, 0.1f, 1000.f);

由此，我希望能够检查边界框是否在我的截锥体中。我如何获得平截头体平面或我需要从投影矩阵计算它的任何东西？这甚至是正确的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T07:42:02.147

这将有所帮助：[http ://crazyjoke.free.fr/doc/3D/plane%20extraction.pdf](http://web.archive.org/web/20120531231005/http://crazyjoke.free.fr/doc/3D/plane%20extraction.pdf)

另请注意，为了提取平截头体，您还需要使用模型和视图矩阵来提取它，否则您需要在边界框上应用模型和视图转换才能执行测试。

# php - 如何比较mysql和php中的两个表？

> ID：11770264
> 
> 赞同：0
> 
> 时间：2012-08-02T02:29:43.130
> 
> 标签：php, mysql

我又遇到了麻烦！

**表格1**

*   n: 1
*   n: 2
*   n: 3

**表2**

*   n: 1
*   n: 3

**查询1**

*   结果数：3

**查询2**

*   结果数：2

我需要比较这些表，如果*Table1 == Table2*回显“找到”。所以我做了2个不同的查询，我这样做是这样的：

```
while($row1 = mysql_fetch_array($Query1))
{
while($row2 = mysql_fetch_array($Query2))
{
if($row1['n'] == $row2['n'] )
{
echo 'found';
}
}
} 
```

有点傻？:\ 因为它似乎只显示第一个结果并停止。

谢谢

## 编辑

示例：我得到了这张桌子：客户和桌子：VIP 客户。如果有任何具有相同 id 的客户端，我需要在表 VIP 客户端上搜索，并产生回显：“找到它”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:49:51.047

不确定这是否是您想要的，但您可以在一个查询中执行此操作以查看 vipclients 中是否有任何匹配的记录。

```
select a.*,b.* ,CASE WHEN b.clientid IS NOT NULL 
       THEN 'FOUND'
       ELSE 'NOT FOUND'
END AS vipexists 
from clients a left outer join vipclients b on a.clientid=b.clientid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:40:20.840

如果我理解正确，您想知道两个表中是否存在相同的数据。您可以将结果存储到两个不同的数组中

```
$table1 = array();
$table2 = array();
while ($row = mysql_query($result1)){
  $table1[] = $row[0];
}
while ($row = mysql_query($result2)){
  $table2[] = $row[0];
} 
```

然后用[`array_intersect()`](http://php.net/manual/en/function.array-intersect.php)找到两者的交集

```
$intersect = array_intersect($table1, $table2);
echo count($intersect) > 0 ? "Found" : "Not Found"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:58:44.030

```
 if( !array_diff( $row1, $row2) )
    {
      echo 'found';
    } 
```

# javascript - IE 7 的 Fancybox 弹出警告

> ID：11770270
> 
> 赞同：0
> 
> 时间：2012-08-02T02:30:32.173
> 
> 标签：javascript, jquery, internet-explorer, fancybox

我正在尝试创建一个花式框/灯箱警告，当用户使用 IE7 访问我的网站时将显示该警告。我在 Fancybox 网站上四处挖掘，发现了这个脚本，它允许 fancybox 在页面启动时显示。我添加了一个 IE7 if 语句。所以我的最终代码类似于下面的代码：

```
<!--[if IE 7]>
jQuery(document).ready(function() {
$.fancybox(
    '<h2>Hi!</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam quis mi eu elit tempor facilisis id et neque</p>',
    {
            'autoDimensions'    : false,
        'width'                 : 350,
        'height'                : 'auto',
        'transitionIn'      : 'none',
        'transitionOut'     : 'none'
    }
);
});
<![endif]--> 
```

简而言之，它没有用。我把代码放在我的身体后面，而且为了清楚起见，我确实在我的脑海中启用了所有的 js 文件和 jquery 文件。关于如何让它发挥作用的任何想法？有没有更好的解决方案来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:35:57.550

```
<!--[if IE 7]>
<script>
jQuery(document).ready(function() {
$.fancybox(
    '<h2>Hi!</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam quis mi eu elit tempor facilisis id et neque</p>',
    {
            'autoDimensions'    : false,
        'width'                 : 350,
        'height'                : 'auto',
        'transitionIn'      : 'none',
        'transitionOut'     : 'none'
    }
);
});
</script>
<![endif]--> 
```

你需要`<script>`标签。

您可以使用浏览器嗅探脚本而不是条件注释...

就像是：

```
if($.browser.msie && parseInt($.browser.version) < 8){ // This would catch IE7 and below
    //fancybox script   
} 
```

# java - JComboBox 只能使用一次并且不会更新

> ID：11770271
> 
> 赞同：0
> 
> 时间：2012-08-02T02:30:48.643
> 
> 标签：java, swing, jcombobox

下面是我的代码，我已经尝试了每一件事。我试过添加getSelectedItem()等。都无济于事，ComboBox只能使用一次，甚至不会更新。帮帮我吧伙计们！

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.*;

import javax.swing.*;

public class MainClass extends JFrame implements ActionListener {
    String[] AmtOfPpl = {"1", "2", "3", "4"};

    private JLabel jlabel = new JLabel("Please select a table:");
    private JButton a01 = new JButton("A01");
    private JButton a02 = new JButton("A02");
    private JButton a03 = new JButton("A03");
    private JButton a04 = new JButton("A04");
    private JButton a05 = new JButton("A05");
    private JButton a06 = new JButton("A06");
    private JButton a07 = new JButton("A07");
    private JButton a08 = new JButton("A08");
    private JButton a09 = new JButton("A09");
    private JButton a10 = new JButton("A10");

    private JButton c01 = new JButton("C01");
    private JButton c02 = new JButton("C02");
    private JButton c03 = new JButton("C03");
    private JButton c04 = new JButton("C04");
    private JButton c05 = new JButton("C05");
    private JButton c06 = new JButton("C06");
    private JButton c07 = new JButton("C07");
    private JButton c08 = new JButton("C08");
    private JButton c09 = new JButton("C09");
    private JButton c10 = new JButton("C10");
    private JButton c11 = new JButton("C11");
    private JButton c12 = new JButton("C12");

    private JLabel FstName = new JLabel("*First Name: ");
    private JLabel LstName = new JLabel("*Last Name: ");
    private JLabel Addrss = new JLabel("Address: ");
    private JLabel PstlCode = new JLabel("Postal Code: ");
    private JLabel HndPne = new JLabel("*Handphone No.: ");
    private JLabel AoP = new JLabel("*Amount of People: ");
    private JLabel Mndtry = new JLabel("Fields marked with * are mandatory.");
    private JTextField FName = new JTextField();
    private JTextField LName = new JTextField();
    private JTextField Addr = new JTextField();
    private JTextField PCode = new JTextField();
    private JTextField HP = new JTextField();
    private JComboBox<?> AmtPpl = new JComboBox<Object>(AmtOfPpl);

    public MainClass() {

        JPanel p1 = new JPanel();
        p1.setLayout(new GridLayout(2,5,10,25));
        p1.add(a01);
        p1.add(a02);
        p1.add(a03);
        p1.add(a04);
        p1.add(a05);
        p1.add(a10);
        p1.add(a09);
        p1.add(a08);
        p1.add(a07);
        p1.add(a06);

        JPanel p2 = new JPanel();
        p2.setLayout(new GridLayout(6,2,2,2));
        p2.add(c01);
        p2.add(c02);
        p2.add(c03);
        p2.add(c04);
        p2.add(c05);
        p2.add(c06);
        p2.add(c07);
        p2.add(c08);
        p2.add(c09);
        p2.add(c10);
        p2.add(c11);
        p2.add(c12);

        a01.addActionListener(this);
        a02.addActionListener(this);
        a03.addActionListener(this);
        a04.addActionListener(this);
        a05.addActionListener(this);
        a06.addActionListener(this);
        a07.addActionListener(this);
        a08.addActionListener(this);
        a09.addActionListener(this);
        a10.addActionListener(this);

        c01.addActionListener(this);
        c02.addActionListener(this);
        c03.addActionListener(this);
        c04.addActionListener(this);
        c05.addActionListener(this);
        c06.addActionListener(this);
        c07.addActionListener(this);
        c08.addActionListener(this);
        c09.addActionListener(this);
        c10.addActionListener(this);
        c11.addActionListener(this);
        c12.addActionListener(this);

        AmtPpl.setSelectedIndex(3);
        AmtPpl.addActionListener(this);

        setLayout(new BorderLayout(20,10));
        add(jlabel, BorderLayout.NORTH);
        add(p1, BorderLayout.CENTER);
        add(p2, BorderLayout.EAST);

    }

    public static void main(String[] args) {
        MainClass frame = new MainClass();
        frame.setTitle("Table Reservation System");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(550, 300);
        frame.setVisible(true);
    }

    public void actionPerformed(ActionEvent e) {

        JPanel InputPanel = new JPanel();
        InputPanel.setLayout(new GridLayout(7,2));
        InputPanel.add(FstName);
        InputPanel.add(FName);
        InputPanel.add(LstName);
        InputPanel.add(LName);
        InputPanel.add(Addrss);
        InputPanel.add(Addr);
        InputPanel.add(PstlCode);
        InputPanel.add(PCode);
        InputPanel.add(HndPne);
        InputPanel.add(HP);
        InputPanel.add(AoP);
        InputPanel.add(AmtPpl);
        InputPanel.add(Mndtry);

        if(e.getSource()==a01) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==a02) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==a03) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==a04) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==a05) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==a06) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==a07) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==a08) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==a09) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==a10) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c01) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c02) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c03) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c04) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c05) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c06) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c07) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c08) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c09) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c10) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c11) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
        else if(e.getSource()==c12) {
            JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
        }
    }
} 
```

提前致谢！（：

PS如果您有关于如何清理代码的提示，请分享！谢谢！顺便说一句，这是餐桌预订系统的一些简单编码。虽然不完整。将很快实现 MySQL 服务器和后端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:43:58.453

你`actionPerformed`充满了一堆重复。至少请尝试通过从您的以下内容中删除来封装大量代码来消除混乱`actionPerformed`：

```
 if(e.getSource()==a01) {
        JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);
    } 
```

&tc,.，并制作如下方法：

```
 private void showOptionPane() {
   JPanel InputPanel = new JPanel();
    InputPanel.setLayout(new GridLayout(7,2));
    InputPanel.add(FstName);
    InputPanel.add(FName);
    InputPanel.add(LstName);
    InputPanel.add(LName);
    InputPanel.add(Addrss);
    InputPanel.add(Addr);
    InputPanel.add(PstlCode);
    InputPanel.add(PCode);
    InputPanel.add(HndPne);
    InputPanel.add(HP);
    InputPanel.add(AoP);
    InputPanel.add(AmtPpl);
    InputPanel.add(Mndtry); 

    JOptionPane.showConfirmDialog(null, InputPanel, "Please enter the required information", JOptionPane.OK_CANCEL_OPTION);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T02:48:15.333

问题出现在这里

```
AmtPpl.addActionListener(this); 
```

基本上，当它执行时，它会构建另一个对话框并显示。所以是的，值正在改变，但是因为您正在显示另一个对话框，所以它会覆盖它。

# android - 如果文本框为空，则结束方法？

> ID：11770274
> 
> 赞同：0
> 
> 时间：2012-08-02T02:30:56.733
> 
> 标签：android, android-layout, android-emulator, android-widget, android-sdk-2.3

我的小费计算器仅在我填写了两个文本字段时才起作用，我想让它显示一条消息，然后阻止应用程序强制关闭...

这是我尝试过的java，但它不起作用

```
 package tip.calculator;

import android.os.Bundle;
import android.app.Activity;
import android.text.TextUtils;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
import android.view.View;
import android.widget.Button;

public class TipCalculator extends Activity 
{

private Button enter;
EditText myEditField ;
EditText myEditField2;
float percentage = 0;
float percentageInp = 0;
float billAmount = 0;
double output = 0; 
String output1 = "";
Button clearButton ;
TextView textView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myEditField = (EditText) findViewById(R.id.percentText);
    enter = (Button)findViewById(R.id.button1);
    myEditField2 = (EditText) findViewById(R.id.billText);
    clearButton = (Button) findViewById(R.id.clearButton);

    enter.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

             TextView errors;
             textView = (TextView) findViewById(R.id.textView1);
             errors = (TextView) findViewById(R.id.errorText);    

             if((myEditField2 != null) && (!TextUtils.isEmpty(myEditField2.getText().toString()))){

                percentageInp = Float.parseFloat(myEditField.getText().toString());
                billAmount = Float.parseFloat(myEditField2.getText().toString());

                percentage = ((float)percentageInp /100);

                output = (double)(billAmount * percentage);

                double result = output * 100;
                result = Math.round(result);
                result = result / 100;

                output1 = Double.toString(result);

                textView.setText(output1 + " $");

             } else{
                //Toast.makeToast(.....).show(); //Inform user about the error
             }

        }
    });

    clearButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            percentage = 0;
            output = 0;
            output1 = "";

            TextView textView = (TextView)findViewById(R.id.errorText);
            textView.setText("");

            TextView textView2 = (TextView)findViewById(R.id.percentText);
            textView2.setText("");

            TextView textView3 = (TextView)findViewById(R.id.billText);
            textView3.setText("");

            TextView textView1 = (TextView)findViewById(R.id.textView1);
            textView1.setText("");

            percentageInp = 0;
            billAmount = 0;

            myEditField.clearComposingText();
            myEditField2.clearComposingText();

        }

    });
}
} 
```

这是堆栈跟踪，更新的java在上面

```
08-01 21:24:17.824: E/AndroidRuntime(19302): FATAL EXCEPTION: main
08-01 21:24:17.824: E/AndroidRuntime(19302): java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to android.widget.TextView
08-01 21:24:17.824: E/AndroidRuntime(19302):    at tip.calculator.TipCalculator$1.onClick(TipCalculator.java:48)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at android.view.View.performClick(View.java:3620)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at android.view.View$PerformClick.run(View.java:14292)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at android.os.Handler.handleCallback(Handler.java:605)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at android.os.Looper.loop(Looper.java:137)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at android.app.ActivityThread.main(ActivityThread.java:4507)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at java.lang.reflect.Method.invoke(Method.java:511)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-01 21:24:17.824: E/AndroidRuntime(19302):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:56:15.973

检查文本字段是否为空不是问题。但是您绝对必须检查文本是否有空字符串和 null 。android.text.TextUtis.isEmpty() [http://developer.android.com/reference/android/text/TextUtils.html#isEmpty(java.lang.CharSequence](http://developer.android.com/reference/android/text/TextUtils.html#isEmpty(java.lang.CharSequence) ) 在这种情况下很方便。此外，您必须确保输入的字符串是浮点数。因此，您还必须尝试捕获任何解析错误并将文本字段的 android:inputType 属性设置为 numberDecimal 以确保输入是浮点数。

因此：

1.  在您的布局中，添加属性`android:inputType="numberDecimal"` ，以确保您的用户只能输入有效的十进制数。
2.  做所有的安全检查

```
    if((myEditField2 != null) && (!TextUtils.isEmpty(myEditField2.getText().toString()))){
        //在这里使用你的数据
    } 别的{
       Toast.makeToast(.....).show() //通知用户错误
    }

```

如果你做 1，你可能不需要 `Float.parseFloat(myEditField.getText().toString())` 用 try-catch来包围`NumberFormatException`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:49:23.837

如果要检查编辑文本中的字符串是否为空，可以使用：

```
if(et.getText().toString() != null){

} 
```

# c# - 从静态 WPF XAML 到以编程方式添加的控件破坏了 DevEx LayoutControl.ReadFromXML

> ID：11770279
> 
> 赞同：0
> 
> 时间：2012-08-02T02:31:12.257
> 
> 标签：c#, wpf, devexpress

编辑：想通了，问题不是创建名称范围和注册名称。现在工作，将在下面提供答案。

原始问题：

我认为在以编程方式将控件添加到我的 WPF 屏幕时我做错了。

一直在研究这个拖放式可配置 UI 的原型，它允许您使用 WPF DevEx LayoutControl 保存和加载布局。

它工作正常，但是当我从使用在 Visual Studio 中制作的静态 WPF 屏幕转到以编程方式添加了 FrameworkElements 的屏幕时，我打破了它。

下面是向 LayoutControl 添加元素的简单测试：

```
 public static void InstallItemsInLayoutControl(LayoutControl layoutControl)
    {
        // FAKE TEST VERSION
        Button btn = new Button();
        btn.Name = "TESTBUTTON";
        btn.Content = "Test Me";
        btn.Height = 23;
        btn.Width = 100;
        btn.HorizontalAlignment = HorizontalAlignment.Left;
        btn.VerticalAlignment = VerticalAlignment.Top;
        btn.Width = 100;

        layoutControl.Children.Add(btn);
    } 
```

对于下面的结果，这是添加到否则为空屏幕的唯一项目。

当我加载此屏幕并启用拖放编辑模式时，确实存在该按钮。它不可见，但我可以将它从可用项目中拉到屏幕中，四处移动，然后将布局保存为看起来不错的 XML。例如，这是一个简单的布局，屏幕上除了这个按钮之外什么都没有，在顶层：

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <LayoutControl Orientation="Vertical">
  <Element ID="TESTBUTTON" HorizontalAlignment="Left" VerticalAlignment="Top" Width="100" Height="23" /> 
  <AvailableItems /> 
  </LayoutControl 
```

如果我从屏幕上删除 Button 并保存，则 XML 看起来会有所不同：

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <LayoutControl Orientation="Vertical">
- <AvailableItems>
  <Element ID="TESTBUTTON" HorizontalAlignment="Left" VerticalAlignment="Top" Width="100" Height="23" /> 
  </AvailableItems>
  </LayoutControl> 
```

（注意按钮不再在布局中，而是在可用项目中）

我查看了 DevEx 代码，并从 XML 元素中获取 ID，并将其传递给 FrameworkElement.FindName(string)，文档中说查看 Name 属性。

我的运行时对象的 ID 和 Name 属性之间似乎存在匹配。

查看 WPF Tree Visualizer，我在可视化树中看到，当我第一次显示此屏幕时，层次结构如下所示：

AdornerDecorator->AvalonAdapter->LayoutControl->ItemsContainer->TESTBUTTON

我不确定 ItemsContainer 的这种间接性是什么，但我怀疑它是“可用项目”容器，它是不在屏幕上但可以在其上定制的东西挂出的地方。

可视化工具显示运行时的 Name 属性确实是 TESTBUTTON。

这个确切的场景是使用未以编程方式添加的项目，我想我的下一步是将一些设计时元素也放在那里。

但我对 WPF 很陌生，有什么明显的我做错了我如何添加我的按钮可能会解释这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:48:44.683

名称查找确实失败了，因为我没有包含名称范围然后注册名称。

正确的实施是：

1.  在实例化时为我的 LayoutControl 创建一个名称范围：

    ```
    NameScope.SetNameScope(layoutControl, new NameScope()); 
    ```

2.  注册我的按钮名称：

    ```
    public static void InstallItemsInLayoutControl(LayoutControl layoutControl)
    {
        // FAKE TEST VERSION
        Button btn = new Button();
        btn.Name = "TESTBUTTON";
        btn.Content = "Test Me";
        btn.Height = 23;
        btn.Width = 100;
        btn.HorizontalAlignment = HorizontalAlignment.Left;
        btn.VerticalAlignment = VerticalAlignment.Top;
        btn.Width = 100;
        layoutControl.RegisterName(btn.Name, btn);  // THIS LINE WAS MISSING
        layoutControl.Children.Add(btn);
    } 
    ```

# python - 拉力赛 Python API

> ID：11770283
> 
> 赞同：2
> 
> 时间：2012-08-02T02:31:36.920
> 
> 标签：python, rally, pyral

我正在尝试按照[http://developer.rallydev.com/help/python-toolkit-rally-rest-api上的说明使用 Python 工具包订阅我公司的 Rally](http://developer.rallydev.com/help/python-toolkit-rally-rest-api)

但是，我遇到了以下错误。

> 回溯（最后一次调用）：文件“test_prog.py”，第 12 行，在拉力赛中 = Rally（服务器，用户，密码，工作空间=工作空间，项目=项目）文件“C:\Python27\lib\site-packages\ pyral\restapi.py”，第 184 行，在 **init** self.contextHelper.check(self.server) 文件“C:\Python27\lib\site-packages\pyral\context.py”，第 153 行，检查中引发 RallyRESTAPIError(问题）pyral.context.RallyRESTAPIError：主机名：'https://rally1.rallydev.com/slm/login.op'不存在或无法访问

有谁知道是否有任何订阅设置可以使用 pyral Rally REST API 控制/限制对其的访问？

我在 Windows 7 平台上使用 Python 2.7 使用带有请求 0.9.3 和证书 0.0.8 的 pyral 0.9.1。

非常感谢任何帮助/见解。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:59:14.077

您是否通过代理服务器访问互联网？您可能希望与您的 IT 部门核实这一点。

不幸的是，请求和 urllib 包（pyral 依赖于）处理 HTTP over HTTPS 存在一些限制。

请求包机制不正确支持基于 HTTP 的 HTTPS，这正是代理连接到 Rally 必须做的事情，因为所有 URL 都是基于 HTTPS 的。requests 包的维护者意识到了这种情况，并且有针对当前正在评估是否包含的底层依赖项 (urllib3) 的代码修复。

当 requests 包合并代码以正确支持代理时，Rally 的开发人员计划合并该代码并将提供配置步骤（设置环境变量）以使 pyral 在代理环境中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-20T13:09:36.467

pyral 使用 ping 检查服务器是否可用，因此它不会通过代理工作，直到您更新 pyral 源代码中的 context.py（注释掉第 146-150 行）

```
###reachable, problem = Pinger.ping(target_host)
###if not reachable:
###if not problem:
###problem = "host: '%s' non-existent or unreachable"  %    target_host
###raise RallyRESTAPIError(problem) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-30T11:03:47.460

当您尝试将 CA Agile Central 与您的 python API 集成时，如果发生此错误。

```
Target Rally host: 'https://rally1.rallydev.com' non-existent or unreachable 
```

尝试使用“rally1.rallydev.com”而不是“ [https://rally1.rallydev.com](https://rally1.rallydev.com) ”

```
rally = Rally(server="rally1.rallydev.com", user,
                      password,
                      workspace,
                      project) 
```

使用 pyral 版本：1.4.0

# magento - Magento 获取类别中的 SKU 列表

> ID：11770285
> 
> 赞同：4
> 
> 时间：2012-08-02T02:31:42.933
> 
> 标签：magento

我知道可以使用 Magento 类别， `$categories = Mage::getResourceModel('catalog/category_collection')` 但是如何获得这些类别及其各自项目 SKU 的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:37:39.987

您可以使用 ：

```
$categories = Mage::getResourceModel('catalog/category_collection');
foreach ($categories as $category) {
    $products = $category->getProductCollection();
    foreach ($products as $product) {
        $sku[$product->getId()] = $product->getSku();
    }
} 
```

我将所有 sku 存储`$sku`为一个数组。你的可能不一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:02:52.163

如果您只需要一个包含类别 ID 和 skus 数组的数组...

```
$skuArray = array();
$categoryCollection = Mage::getModel('catalog/category')->getCollection();
foreach ($categoryCollection as $category) {
    $skuArray[$category->getId()] = $category->getProductCollection()->getColumnValues('sku');
} 
```

或者，向每个集合对象添加一个新字段以包含 skus...

```
$categoryCollection = Mage::getModel('catalog/category')->getCollection();
foreach ($categoryCollection as $category) {
    $skus = $category->getProductCollection()->getColumnValues('sku');
    $category->setData('skus', $skus);
} 
```

如果您稍后在代码中对集合做进一步的工作并且您仍然需要访问产品 sku 数组，这将是一个选项。

```
foreach($categoryCollection as $category) {
    $categorySkus = $category->getData('skus');
} 
```

# html - 如何在博客上为图像 css 添加边框

> ID：11770293
> 
> 赞同：0
> 
> 时间：2012-08-02T02:33:07.953
> 
> 标签：html, css, blogger

我在博主圈子上制作相关帖子小部件缩略图的尝试没有成功。这是我正在使用的代码..

```
.popular-posts .item-thumbnail {
border: 5px solid #dddddd !important; 
border-radius: 100px !important;
} 
```

我的博客tipsontricks (dot) com，请参阅侧边栏-我希望边框位于图像的顶部，而不是下方。谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:42:11.017

就像 mariusnn 说的，把这些款式脱下`.item-thumbnail`来直接放在上面`img`，看看你是否更喜欢这种效果。

# php - 在 WordPress 中对上传的 mp3 文件进行编码

> ID：11770298
> 
> 赞同：0
> 
> 时间：2012-08-02T02:33:53.320
> 
> 标签：php, javascript, wordpress

有没有办法对我在 WordPress 网站中附加的每个 MP3 文件进行编码？这是您访问源代码时代码的外观：

```
<ol class='songs'><li><a href='http://localhost/wordpress/wp-content/uploads/2011/10/f1678576.mp3' title='Song Title'>Artist - Song</a></li></ol> 
```

PHP代码：

```
if ($attachments) {
        echo "<ol class='songs'>";
        foreach ($attachments as $attachment) {
        echo "<li>";
            echo wp_get_attachment_link($attachment->ID);
            echo "</li>";
        }
        echo "</ol>";
    } 
```

我看到了 WPaudio 但不知道如何实现它。这是 WPaudio 代码的外观：

```
<pre><code><script type='text/javascript'>_wpaudio.enc['wpaudio-5019e1ff1c9da'] = '\u0068\u0074\u0074\u0070\u003a\u002f\u002f\u0075\u0072\u006c\u002e\u0074\u006f\u002f\u0079\u006f\u0075\u0072\u002e\u006d\u0070\u0033';</script><a id='wpaudio-5019e1ff1c9da' class='wpaudio wpaudio-enc' href='#'>Artist - Song</a></code></pre> 
```

如果您有任何建议，请随时表达。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:31:20.373

WPAudio 的安装看起来相当简单，如果这是您想要的方式... [http://wpaudio.com/#install](http://wpaudio.com/#install) ...在一天结束时，您将花费大量精力隐藏一个当您可以使用另一个播放器时，通过对文件名进行编码。

如果您要成为偏执狂，不妨使用 SoundCloud [http://soundcloud.com/之类的服务](http://soundcloud.com/)

# php - RegEx 语句问题 - PHP

> ID：11770308
> 
> 赞同：0
> 
> 时间：2012-08-02T02:35:09.427
> 
> 标签：php, regex

我正在尝试使用 RegEx 删除以下数据：

```
mlb_s_left1=Baltimore 3   ^NY Yankees 12 (FINAL)&mlb_s_right1_1=W: Hughes L: Britton&mlb_s_right1_count=1&mlb_s_url1=http://sports.espn.go.com/mlb/boxscore?gameId=320801110&mlb_s_left2=^Chicago Sox 3   Minnesota 2 (FINAL)&mlb_s_right2_1=W: Peavy L: Diamond S: Reed&mlb_s_right2_count=1&mlb_s_url2=http://sports.espn.go.com/mlb/boxscore?gameId=320801109 
```

我希望按主队（第一城市）、主场比分（第一位）、客队（第二城市）、客场比分（第二位）以及比赛的位置（括号内）来划分。这是我目前拥有的正则表达式，但我感觉非常错误。

```
preg_match_all('/mlb_s_left[0-9]=(?P<hometeam>.*?) (?P<homescore>.*?)   (?P<awayteam>.*?) (?P<awayscore>.*?)\((?P<time>.*?)\)/', $content, $matches); 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:52:07.550

这样的事情应该让你接近。

```
preg_match_all('/mlb_s_left\d+=(?P<hometeam>\D+)\s+(?P<homescore>\d+)\s+(?P<awayteam>\D+)\s+(?P<awayscore>\d+)\s*\((?P<time>[^)]+)\)/',
    $content, $matches); 
```

请注意，`\d`匹配任何数字，并`\D`匹配任何**非**数字。

`[^)]+`匹配一个或多个非闭合括号字符；`\s+`匹配一个或多个空白字符，并`\s*`匹配零个或多个空白字符。

如果你有一个带有数字的城市名称，这将不会很好地工作，如果你有一个很大的字符串，它可能会挂在某个地方；您可能会考虑将其拆分并更零碎地匹配。

一般来说，我会避免`.*?`作为模式匹配，因为它基本上匹配几乎任何东西。根据您对数据的了解，您的正则表达式最好尽可能具体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T03:07:04.513

我在 php 5.4.5 中测试了以下代码片段：

```
 <?php
$foo = 'mlb_s_left1=Baltimore 3   ^NY Yankees 12 (FINAL)&mlb_s_right1_1=W: Hughes L: Britton&mlb_s_right1_count=1&mlb_s_url1=http://sports.espn.go.com/mlb/boxscore?gameId=320801110&mlb_s_left2=^Chicago Sox 3   Minnesota 2 (FINAL)&mlb_s_right2_1=W: Peavy L: Diamond S: Reed&mlb_s_right2_count=1&mlb_s_url2=http://sports.espn.go.com/mlb/boxscore?gameId=320801109';
preg_match_all('/mlb_s_left\d=\^?(?P<hometeam>[a-zA-Z]+(?:\s+[a-zA-Z]+)*)\s+(?P<homescore>\d+)\s+\^?(?P<awayteam>[a-zA-Z]+(?:\s+[a-zA-Z]+)*)\s+(?P<awayscore>\d+)\s+\((?P<time>\w+)\)/', $foo, $matches, PREG_SET_ORDER);

print_r($matches);

?> 
```

输出：

```
 Array
(
    [0] => Array
        (
            [0] => mlb_s_left1=Baltimore 3   ^NY Yankees 12 (FINAL)
            [hometeam] => Baltimore
            [1] => Baltimore
            [homescore] => 3
            [2] => 3
            [awayteam] => NY Yankees
            [3] => NY Yankees
            [awayscore] => 12
            [4] => 12
            [time] => FINAL
            [5] => FINAL
        )

    [1] => Array
        (
            [0] => mlb_s_left2=^Chicago Sox 3   Minnesota 2 (FINAL)
            [hometeam] => Chicago Sox
            [1] => Chicago Sox
            [homescore] => 3
            [2] => 3
            [awayteam] => Minnesota
            [3] => Minnesota
            [awayscore] => 2
            [4] => 2
            [time] => FINAL
            [5] => FINAL
        )

) 
```

# python - 将发布请求与可能的海报元素区分开来

> ID：11770312
> 
> 赞同：0
> 
> 时间：2012-08-02T02:36:03.857
> 
> 标签：python, html, post, bottle

那么，我遇到的问题是我如何知道我的页面的哪个元素发出了发布请求？我有多个元素可以在页面上发出发布请求，但是如何从创建请求的元素中获取值？看起来这将是相当微不足道的，但我什么都没有想出，当做了很多谷歌搜索时，我又什么都没找到。

有没有办法使用瓶子做到这一点？

我对 sql 页面的路由（当然需要身份验证）有一个想法，用于为表单提供操作并使用模板在操作中呈现 id，但我认为必须有更好的方法这没有路由另一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:24:52.163

您可以使用特定值向页面上的每个表单添加一个隐藏的输入字段。在服务器端，检查该字段的值以检测 post 请求来自哪个表单。

# python - 金字塔和python的请求库之间的奇怪行为

> ID：11770315
> 
> 赞同：1
> 
> 时间：2012-08-02T02:36:32.800
> 
> 标签：python, pyramid, python-requests

所以我试图创建一个系统来索引搜索数据库中的用户，但是金字塔和请求库让我失望了。这是一段搞砸的代码：

```
requests.put('http://localhost:9200/master/user/%s' % str(session.query(User).filter(User.username == request.params['username']).first().user_id)
, data = '{"name" : %s, "reputation" : 0, "username" : %s}' % (str(request.params['name']), str(request.params['username'])) 
```

)

它在 python 解释器中运行良好，但在视图中，它一直返回 400 状态。我确实`session.flush()`在这行代码之前运行。我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T05:17:01.197

```
user = session.query(User).filter_by(username=request.params['username']).first()
if user is None:
   "not found" # do whatever appropriate in your case e.g., return 404

headers = {'content-type': 'application/json'}
requests.put('http://localhost:9200/master/user/{userid}'.format(user.user_id),
             data=json.dumps(dict(name=request.params['name'], reputation=0,
                                  username=request.params['username'])),
             headers=headers) 
```

# python - 如何解决这个 Python 字符串插值相关的问题？

> ID：11770328
> 
> 赞同：0
> 
> 时间：2012-08-02T02:39:47.097
> 
> 标签：python, string-interpolation

我需要做一个 python 测验。

这是问题：

> 您在这里面临的挑战是编写一个函数 format_point，它返回一个表示 2 空间中的点的字符串。该函数接受三个参数。前两个是浮点数，表示一个点的 x 和 y 坐标，第三个参数是一个整数，指定小数点后所需的位数。返回的字符串格式为“(23.176, 19.235)”。例如，以下三行代码应打印输出 (0.67, 17.12)。

我所做的是：

```
>>> def coordinate(x,y,n):
...     str_x = format(x,"."+n+"f")
...     str_y = format(y,"."+n+"f")
...     print("("+str_x+","+str_y+")")
... 
>>> coordinate(10.242,53.124,2) 
```

我得到了错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in coordinate
TypeError: cannot concatenate 'str' and 'int' objects 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:43:02.623

> 不能连接“str”和“int”对象

尝试

```
format(str(x), "." + str(n) + "f") 
```

或者

```
format(str(x), ".%sf" % n) 
```

# jaxb - 验证查询参数值球衣

> ID：11770329
> 
> 赞同：0
> 
> 时间：2012-08-02T02:39:52.017
> 
> 标签：jaxb, jersey, jax-rs, wadl

除了下面的方法之外，是否还有其他方法可以验证查询参数值，即通过 wadl 映射到模式是否有 Jersey 方法。谢谢

```
@Path("smooth")
@GET
public Response smooth(
    @DefaultValue("blue") @QueryParam("min-color") ColorParam minColor,

public class ColorParam extends Color {
 public ColorParam(String s) {
    super(getRGB(s));
 }

 private static int getRGB(String s) {
    if (s.charAt(0) == '#') {
        try {
            Color c = Color.decode("0x" + s.substring(1));
            return c.getRGB();
        } catch (NumberFormatException e) {
            throw new WebApplicationException(400); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:07:54.540

不幸的是，当前 JAX-RS 版本对验证的支持有限。但是根据[JAX-RS 2.0 的草案](http://java.net/projects/jax-rs-spec)，它在未来会有更好的验证处理。

[您可以在此处](http://java.net/projects/jax-rs-spec/pages/Validation)查看新功能的示例。

# ios - viewDidAppear 运行，然后不运行。

> ID：11770332
> 
> 赞同：0
> 
> 时间：2012-08-02T02:40:23.947
> 
> 标签：ios

在我的 ios 应用程序中，我首先使用下面显示的代码加载 SecondViewController。当该视图控制器出现时，我还运行 viewDidAppear，如下面的代码片段所示。这行得通。从那里，我加载我的 FifthViewController 并进行一些计算，哪些需要返回给 SecondViewController。不幸的是，当我通过相同的方法返回 SecondViewController 时， viewDidAppear 方法没有运行。任何有关如何解决此问题的建议将不胜感激。

```
-(IBAction) loadSecondView:(id)sender
{

NSLog(@"In loadSecondView method \n");

[secondViewController viewDidAppear:YES];

[self clearView];
[self.view insertSubview:secondViewController.view atIndex:1];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:50:16.197

如果您希望每次关闭视图控制器后都执行某些操作，则应使用委托方法。它比 viewDidAppear 或 viewWillAppear 更具体。

这是一个您可以开始使用的[网站。](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)

# ios - 来自 ios sdk 的 HTTP Post

> ID：11770333
> 
> 赞同：-1
> 
> 时间：2012-08-02T02:40:51.107
> 
> 标签：ios, goo.gl

我将不得不在 iOS sdk 中进行 HTTP post 调用，

curl [https://www.googleapis.com/urlshortener/v1/url](https://www.googleapis.com/urlshortener/v1/url) \ -H 'Content-Type: application/json' \ -d '{"longUrl": "http://www.google.com/"} '

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:10:42.153

很多答案可以在这里和通过谷歌获得。但是，这是一个代码示例。如果您需要更多信息，请进行更深入的搜索。

```
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:POST_TARGET_URL] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:30.0];
[theRequest setHTTPMethod:@"POST"]; // set the method to post
[theRequest addValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@",QUERY_VALUE_BOUNDRY] forHTTPHeaderField: @"Content-Type"];

NSMutableData *queryData = [[NSMutableData alloc] init];
for (NSString *key in [queryDict allKeys]) { // iterate the keys in an NSDictionary to build the post data with key/value pairs
    [queryData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\n\n", key] dataUsingEncoding:NSUTF8StringEncoding]];
    [queryData appendData:[[NSString stringWithFormat:@"%@", [queryDict objectForKey:key]] dataUsingEncoding:NSUTF8StringEncoding]];
    [queryData appendData:[[NSString stringWithFormat:@"\n--%@\n", QUERY_VALUE_BOUNDRY] dataUsingEncoding:NSUTF8StringEncoding]]; // begin bounds
}

[theRequest setHTTPBody:queryData]; // set the data object to the body of the post request

_URLConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; // open an NSURLConnection with the request that was just constructed. 
```

# cocoa - Mountain Lion 中的 NSTableView 奇怪的滚动行为

> ID：11770336
> 
> 赞同：0
> 
> 时间：2012-08-02T02:41:56.377
> 
> 标签：cocoa, nstableview, appkit, nsscrollview, osx-mountain-lion

我有一个带有源列表的应用程序。在 Lion 中，它的效果非常好。在 Mountain Lion 中，它工作得很好，但有一个不需要的副作用。每当源列表中选定的行发生变化时，Mountain Lion 都会将该行滚动到滚动视图的顶部。无论更改是由于单击还是通过代码发生，都会发生这种情况。正如我所说，它不会发生在 Lion 中，只会发生在 Mountain Lion 中。

有没有人自己经历过这样的事情？

# cakephp - cakephp 线程评论

> ID：11770339
> 
> 赞同：0
> 
> 时间：2012-08-02T02:42:23.873
> 
> 标签：cakephp

我对 cakephp 有点陌生，我想知道为什么我会遇到这种问题。

基本上，我在 cakephp 中做一个线程化的评论。但我的问题是，每次我尝试对“评论”进行“评论”时，它的显示方式都不同。

这是一个屏幕截图： ![在此处输入图像描述](../Images/c98b30e3baad09b2290cc969b42da709.png)

我希望它被反转，就像所有子评论都应该发布在最后一行一样。目前，当我添加新评论时，它显示在顶部而不是底部。我希望它变得像 Facebook 的评论方式一样。

这是我的代码：

```
$comments = $this->UserDiscussionComment->find('threaded', array('conditions' => array('UserDiscussionComment.user_discussion_id' => $slug), 'order' => array('UserDiscussionComment.id DESC', 'UserDiscussionComment.created ASC'))); 
```

这是数据库中的示例记录：

![在此处输入图像描述](../Images/0ecfaab92e09cffd18ef95a1db805019.png)

我想更改子评论的顺序。我尝试了“ASC”和“DESC”，但它不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:43:35.063

[根据find('threaded')](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-threaded)的文档，您将无法以不同的顺序对子项进行排序。我要做的是在您的 find 调用之后，只需反转数组：

```
$comments = $this->UserDiscussionComment->find('threaded', array(
    'conditions' => array('UserDiscussionComment.user_discussion_id' => $slug),
    'order' => array('UserDiscussionComment.id DESC')
));

for ($i = 0; $i < sizeof($comments); $i++) {
    $comments[$i]['children'] = array_reverse($comments[$i]['children']);
} 
```

未经测试，但它应该可以解决问题（我也假设您只能像屏幕截图所示那样评论 1 级深度）。

* * *

**编辑**

我想分享一种我过去使用的不同方法来完成你想要完成的同一件事。基本上我这样设置我的`Comment`模型：

```
class Comment extends AppModel {

    public $belongsTo = array(
        'ParentComment' => array(
            'className' => 'Comment',
            'foreignKey' => 'parent_id'
        ),
        'User'
    );

    public $hasMany = array(
        'ChildComment' => array(
            'className' => 'Comment',
            'foreignKey' => 'parent_id'
        )
    );
} 
```

然后，当我想进行查找时，我可以对父子评论进行不同的排序（请注意，我正在使用该`Containable`行为）：

```
$comments = $this->Comment->find('all', array(
    'order' => 'Comment.id DESC',
    'contain' => array(
        'ChildComment' => array(
            'order' => 'ChildComment.id ASC'
        )
    )
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:29:37.667

```
array('UserDiscussionComment.id DESC', 'UserDiscussionComment.created ASC') 
```

我认为错误就在那里。

由于 UserDiscussionComment.id 都是不同的，所以没有什么可订购的`UserDiscussionComment.created ASC`。

尝试：

```
array('UserDiscussionComment.parent_id DESC', 'UserDiscussionComment.created ASC') 
```

# c# - 如何在另一个视图中使用 RenderAction 突出显示 MVC 3 中的当前页面

> ID：11770342
> 
> 赞同：0
> 
> 时间：2012-08-02T02:42:52.433
> 
> 标签：c#, asp.net-mvc-3, highlight, renderaction, current-page

我试过这些：http: [//developerstyle.posterous.com/highlighting-current-page-in-mvc-3-slick-tric](http://developerstyle.posterous.com/highlighting-current-page-in-mvc-3-slick-tric)

[ASP.NET MVC - 当前页面在导航中突出显示](https://stackoverflow.com/questions/9289909/asp-net-mvc-current-page-highlighting-in-navigation)

[ASP.net MVC - 导航和突出显示“当前”链接](https://stackoverflow.com/questions/4099621/asp-net-mvc-navigation-and-highlighting-the-current-link)

以上解决方案均不适用于 RenderAction。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:53:58.190

你可以试试[`ParentActionViewContext`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllercontext.parentactionviewcontext.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:56:49.363

什么不工作？您没有在 Html 中获得“选定”类吗？还是你的css有问题？？您提供的所有链接似乎都是工作示例。

我从来没有试过这个，但你应该能够像这样获得当前的“页面”：

```
String controller = String.Empty;
if (ViewContext.RouteData.Values.ContainsKey("controller")) {
    controller = (String)ViewContext.RouteData.Values["controller"];
}
String action = String.Empty;
if (ViewContext.RouteData.Values.ContainsKey("action")) {
    action = (String)ViewContext.RouteData.Values["action"];
}
String area = String.Empty;
if (ViewContext.RouteData.DataTokens.ContainsKey("area")) {
    area = (String)ViewContext.RouteData.DataTokens["area"];
} 
```

然后应该将这些信息与您创建的链接进行比较和比较。

# javascript - 检查是否至少选中了一个复选框

> ID：11770346
> 
> 赞同：0
> 
> 时间：2012-08-02T02:43:04.607
> 
> 标签：javascript, forms, validation

在将数据发送到表单发送脚本之前，我需要验证是否至少选中了一个复选框。这就是我到目前为止所拥有的（验证所有字段，复选框一个在底部）

```
$('form#ajax_form .submit').click(function () {
    $('#ajax_form .error').hide(); //if error visibile, hide on new click
    var name = $('input#name').val();
    if (name == "" || name == " " || name == "Name") {
        $('input#name').focus().before('<div class="error">Hey, what´s your name...?</div>');
        return false;
    }
    var email_test = /^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;
    var email = $('input#email').val();
    if (email == "" || email == " ") {
        $('input#email').focus().before('<div class="error">Psssst. You missed one...</div>');
        return false;
    } else if (!email_test.test(email)) {
        $('input#email').select().before('<div class="error">Please recheck your email</div>');
        return false;
    }
    var message = $('#message').val();
    if (message == "" || message == " " || message == "Message") {
        $('#message').focus().fadeIn('slow').before('<div class="error">Remember your message!</div>');
        return false;
    }
    if ($("[name=Field]:checked").length > 0) {
        $('#services1').focus().after('<div class="error">Choose at least one please.</div>');
        return false;
    }
    var company = $('input#company').val();
    $.post(rootUrl + '/wp-admin/admin-ajax.php', {
        action: "two2_send_contact_form",
        email: email,
        name: name,
        message: message,
        company: company
    }, function (data) {
        $('form#ajax_form').slideUp('fast').before('<div id="success"></div>');
        $('#success').html(data).slideDown(9000);
    }); 
```

和复选框。

```
 <div style="display:inline;">
    <span>
      <label class="choice" for="Field1" style="display:inline;margin-left:0px;margin-right:5px;">
        <input id="Field1" name="Field[]" type="checkbox" class="field checkbox" value="Web Design" style="width:0px;">Web Design    
 </label>
    </span>
    <span>
      <label class="choice" for="Field2" style="display:inline;margin-left:0px;margin-right:5px;">
        <input id="Field2" name="Field[]" type="checkbox" class="field checkbox" value="Graphic Design" style="width:0px;">Graphic Design
</label>
    </span>
    <span>
      <label class="choice" for="Field3" style="display:inline;margin-left:0px;margin-right:5px;">
        <input id="Field3" name="Field[]" class="field checkbox" type="checkbox" value="Illustration" style="width:0px;">Illustration
 </label>
    </span>
    <span>
      <label class="choice" for="Field4" style="display:inline;margin-left:0px;margin-right:5px;">
        <input id="Field4" name="Field[]" type="checkbox" class="field checkbox" value="Identity Dev/Branding" style="width:0px;">Identity Dev/Branding
</label>
    </span>
    <br>
    <span>
      <label class="choice" for="Field1_3" style="display:inline;margin-left:0px;margin-right:5px;">
        <input id="Field5" name="Field[]" class="field checkbox" type="checkbox" value="Identity Dev/Branding" style="width:0px;">Web App Development
</label>
    </span>
    <span>
      <label class="choice" for="Field1_4" style="display:inline;margin-left:0px;margin-right:5px;">
        <input id="Field6" name="Field[]" class="field checkbox" type="checkbox" value="CGI" style="width:0px;">CGI
</label>
    </span>
    <span>
      <label class="choice" for="Field1_5" style="display:inline;margin-left:0px;margin-right:5px;">
        <input id="Field7" name="Field[]" class="field checkbox" type="checkbox" value="VFX" style="width:0px;">VFX
</label>
    </span>
    <span>
      <label class="choice" for="Field1_6" style="display:inline;margin-left:0px;margin-right:5px;">
        <input id="Field8" name="Field[]" class="field checkbox" type="checkbox" value="Video Production" style="width:0px;">Video Production 
 </label>
    </span>
    <span>
      <label class="choice" for="Field1_7" style="display:inline;margin-left:0px;margin-right:5px;">
        <input id="Field9" name="Field[]" class="field checkbox" type="checkbox" value="Motion Project" style="width:0px;">Motion Project
</label>
    </span>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:44:51.783

```
$('input[type="checkbox"]:is("checked")').length > 0 
```

至少有一个复选框被选中

使用 jquery > 1.7 你可以调用

```
$('input:checked').length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:47:47.477

改变：

```
if ($("[name=Field]:checked").length > 0) { 
```

到：

```
if ($("[name='Field[]']:checked").length > 0) { 
```

您所有的复选框的名称属性中都有方括号，`name="Field[]"`但您试图选择没有方括号的它们作为`name=Field`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:48:48.313

这取决于您希望如何实现这一目标。如果您只想确保选中所有组中的至少一个复选框，那么这应该足够了：

```
if ($('input[type=checkbox]:checked').length) {
   // at least one is checked do something
} 
```

如果您想检查每组是否至少检查一个，则稍微复杂一些。这是我不久前为回答另一个问题而创建的小提琴，可能会有所帮助：http: [//jsfiddle.net/elclanrs/GFCKA/](http://jsfiddle.net/elclanrs/GFCKA/)

无论如何，当您使用更多验证元素和输入时，我建议您看看[这个插件](http://elclanrs.github.com/jq-idealforms/)，它也可以帮助您处理其他事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-01T20:04:29.797

对于那些不使用 jQuery 的人：

```
const form = document.getElementById('ajax_form');
const valid = ajax_form.querySelectorAll('input[type="checkbox"]:checked').length;

if (valid > 0) {
  // code block here
} 
```

否则，请参阅[此答案](https://stackoverflow.com/questions/11770346/check-if-at-least-one-checkbox-is-checked#11770352)。

# c# - 固定图标状态

> ID：11770347
> 
> 赞同：0
> 
> 时间：2012-08-02T02:43:26.843
> 
> 标签：c#, asp.net, .net, html, css

好的，所以您知道 IE9 和 10 中固定网站的全部内容，对吧？您还可以在任务栏上的跳转列表中添加极小的小图标...

当您收到新通知时，您是否（不再存在）看到 Facebook 任务栏图标发生变化？在任务栏中，它从普通的“f”标志变为“f”标志，在“f”标志顶部带有一个数字（表示新通知的数量）。

我们如何更改（或交换）任务栏图标以向用户传达新通知？

在过去的几个小时里，我在 MSDN 上查看了固定站点的文档，但我看不到任何关于该特定功能的参考资料。

有没有人有这方面的经验？或者你知道你可能见过的任何资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:46:37.880

它们被称为“图标叠加层”。

[http://msdn.microsoft.com/en-us/library/ie/gg491744(v=vs.85).aspx#create](http://msdn.microsoft.com/en-us/library/ie/gg491744(v=vs.85).aspx#create)

谷歌搜索：固定网站，即通知

另外，查看这个为你包装了很多内容的 jQuery 插件：http: [//ie9ify.codeplex.com/](http://ie9ify.codeplex.com/)

# php - MySQL 错误：mysql_fetch_array 期望参数 1 是资源

> ID：11770348
> 
> 赞同：0
> 
> 时间：2012-08-02T02:43:31.003
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我最近从一个客户那里得到了一份工作，我必须将折旧的 php 旧代码更改为新代码。在该代码中，我遇到了 mysql_db_query ，我将其转换为 mysql_query 但给出了错误

mysql_fetch_array 期望参数 1 是资源，给定的布尔值

```
//the old code was like:

$result = mysql_db_query($mysql_db,"SELECT Hierarchy FROM MenuSystem WHERE LENGTH(Hierarchy) >= 2 AND LOCATE(" . $_SESSION['AccessLevel'] . ",AccessLevels) <> 0;");

//and my new code is :

$result = mysql_query("SELECT Hierarchy FROM MenuSystem WHERE LENGTH(Hierarchy) >= 2 AND LOCATE(" . $_SESSION['AccessLevel'] . ",AccessLevels) <> 0"); 
```

请告诉我问题

它指的是第 11 行，其中是 while 循环的结束括号

```
while ($row = mysql_fetch_array($result)) {
    $ConcatHierarchy .= $row["Hierarchy"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:51:39.893

我看不出唯一的代码会导致错误。但是，如果您想将 $result 用作数组，则可能会出现问题，因为我们需要先对其进行检查。如果查询失败，它将返回一个 FALSE 而不是一个资源，即一个数组。

（我的意思是你稍后将资源用作数组。但是是的，$result 是 FALSE 或资源，可以通过调用 mysql_fetch_array() 来使用。感谢您的评论）

实际上您可以查看其他帖子，例如： [mysql_fetch_array() 期望参数 1 是资源问题](https://stackoverflow.com/questions/2697438/mysql-fetch-array-expects-parameter-1-to-be-resource-problem)

仅供参考，正如手册所建议的那样，人们现在可能更喜欢 PDO： *不鼓励使用此扩展。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T03:33:40.500

您正在对缺少引号的东西进行字符串操作以使其成为字符串：

```
... AND LOCATE(" . $_SESSION['AccessLevel'] . ",AccessLevels) <> 0");
               ^--                             ^--- 
```

指示的点需要单引号 ( `'`)。现在你可能正在嵌入一些字符串，比如“SuperUser”。没有引号，这在 MySQL 看来是一个字段名称，几乎可以肯定它不存在。

如果您在代码中进行了适当的错误处理，您会立即从错误消息中看到这一点：

```
$result = mysql_query(...) or die(mysql_error());
                          ^^^^^^^^^^^^^^^^^^^^^^--- bare minimum 
```

# java - Java ASM 字节码修改-改变方法体

> ID：11770353
> 
> 赞同：9
> 
> 时间：2012-08-02T02:45:06.003
> 
> 标签：java, classloader, code-injection, bytecode, java-bytecode-asm

我在一个 jar 中有一个类的方法，我想用我自己的来交换它的主体。在这种情况下，我只想让方法将“GOT IT”打印到控制台并返回 true；

我正在使用系统加载器来加载 jar 的类。我正在使用反射使系统类加载器能够通过字节码加载类。这部分似乎工作正常。

我正在关注此处的方法替换示例：asm.ow2.org/current/asm-transformations.pdf。

我的代码如下：

```
public class Main 
{
    public static void main(String[] args) 
    {
        URL[] url = new URL[1];
        try
        {
            url[0] = new URL("file:////C://Users//emist//workspace//tmloader//bin//runtime//tmgames.jar");
            verifyValidPath(url[0]);
        }
        catch (Exception ex)
        {
            System.out.println("URL error");
        }
        Loader l = new Loader();
        l.loadobjection(url);
    }

    public static void verifyValidPath(URL url) throws FileNotFoundException
    {
        File filePath = new File(url.getFile());
        if (!filePath.exists()) 
        {
          throw new FileNotFoundException(filePath.getPath());
        }
    }
}

class Loader
{
    private static final Class[] parameters = new Class[] {URL.class};

    public static void addURL(URL u) throws IOException
    {
        URLClassLoader sysloader = (URLClassLoader)  ClassLoader.getSystemClassLoader();
        Class sysclass = URLClassLoader.class;

        try 
        {
            Method method = sysclass.getDeclaredMethod("addURL", parameters);
            method.setAccessible(true);
            method.invoke(sysloader, new Object[] {u});
        }
        catch (Throwable t) 
        {
            t.printStackTrace();
            throw new IOException("Error, could not add URL to system classloader");
        }

    }

    private Class loadClass(byte[] b, String name) 
    {
        //override classDefine (as it is protected) and define the class.
        Class clazz = null;
        try 
        {
            ClassLoader loader = ClassLoader.getSystemClassLoader();
            Class cls = Class.forName("java.lang.ClassLoader");
            java.lang.reflect.Method method =
                cls.getDeclaredMethod("defineClass", new Class[] { String.class, byte[].class, int.class, int.class });

            // protected method invocaton
            method.setAccessible(true);
            try 
            {
                Object[] args = new Object[] {name, b, new Integer(0), new Integer(b.length)};
                clazz = (Class) method.invoke(loader, args);
            }
            finally 
            {
                method.setAccessible(false);
            }
        }
        catch (Exception e) 
        {
            e.printStackTrace();
            System.exit(1);
        }
        return clazz;
    }

    public void loadobjection(URL[] myJar)
    {
        try 
        {
            Loader.addURL(myJar[0]);            
            //tmcore.game is the class that holds the main method in the jar
            /*
            Class<?> classToLoad = Class.forName("tmcore.game", true, this.getClass().getClassLoader());
            if(classToLoad == null)
            {
                System.out.println("No tmcore.game");
                return;
            }
            */
            MethodReplacer mr = null;

            ClassReader cr = new ClassReader("tmcore.objwin");
            ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_FRAMES);
            MethodVisitor mv = null;
            try
            {
                mr = new MethodReplacer(cw, "Test", "(Ljava/lang/String;ZLjava/lang/String;)Z");
            }
            catch (Exception e)
            {
                System.out.println("Method Replacer Exception");
            }
            cr.accept(mr, ClassReader.EXPAND_FRAMES);

            PrintWriter pw = new PrintWriter(System.out);
            loadClass(cw.toByteArray(), "tmcore.objwin");
            Class<?> classToLoad = Class.forName("tmcore.game", true, this.getClass().getClassLoader());
            if(classToLoad == null)
            {
                System.out.println("No tmcore.game");
                return;
            }

            //game doesn't have a default constructor, so we need to get the reference to public game(String[] args)
            Constructor ctor = classToLoad.getDeclaredConstructor(String[].class);
            if(ctor == null)
            {
                System.out.println("can't find constructor");
                return;
            }

            //Instantiate the class by calling the constructor
            String[] args = {"tmgames.jar"};
            Object instance = ctor.newInstance(new Object[]{args});
            if(instance == null)
            {
                System.out.println("Can't instantiate constructor");
            }

            //get reference to main(String[] args)
            Method method = classToLoad.getDeclaredMethod("main", String[].class);
            //call the main method
            method.invoke(instance);

        }   
        catch (Exception ex)
        {
            System.out.println(ex.getMessage());
            ex.printStackTrace();
        }
    }
}

public class MethodReplacer extends ClassVisitor implements Opcodes
{
    private String mname;
    private String mdesc;
    private String cname;

    public MethodReplacer(ClassVisitor cv, String mname, String mdesc)
    {
        super(Opcodes.ASM4, cv);
        this.mname = mname;
        this.mdesc = mdesc;
    }

    public void visit(int version, int access, String name, String signature, 
                      String superName, String[] interfaces)
    {
        this.cname = name;
        cv.visit(version, access, name, signature, superName, interfaces);
    }

    public MethodVisitor visitMethod(int access, String name, String desc, String signature,
                                     String[] exceptions)
    {
        String newName = name;
        if(name.equals(mname) && desc.equals(mdesc))
        {
            newName = "orig$" + name;
            generateNewBody(access, desc, signature, exceptions, name, newName);
            System.out.println("Replacing");
        }
        return super.visitMethod(access,  newName,  desc,  signature,  exceptions);
    }

    private void generateNewBody(int access, String desc, String signature, String[] exceptions,
                                String name, String newName)
    {
        MethodVisitor mv = cv.visitMethod(access,  name,  desc,  signature,  exceptions);
        mv.visitCode();
        mv.visitVarInsn(Opcodes.ALOAD, 0);
        mv.visitMethodInsn(access, cname, newName, desc);
        mv.visitFieldInsn(GETSTATIC, "java/lang/System", "out", "Ljava/io/PrintStream;");
        mv.visitLdcInsn("GOTit!");
        mv.visitMethodInsn(INVOKEVIRTUAL, "java/io/PrintStream", "println", "(Ljava/lang/String;)V");
        mv.visitInsn(ICONST_0);
        mv.visitInsn(IRETURN);
        mv.visitMaxs(0, 0);
        mv.visitEnd();
    }
} 
```

问题似乎`mv.visitMethodInsn(access, cname, newName, desc);`在`generateMethodBody`里面`MethodReplacer`。

我收到“常量池中的非法类型”错误。

我不确定我错过了什么……但是在阅读和测试了大约 3 天之后，我仍然没有得到任何结果。

**[编辑]**

如果您想知道，`tmcore`这是一个律师的单人“异议”游戏。我这样做是为了好玩。该程序成功启动了游戏，一切都很好，删除修改`MethodReplacer`使游戏按设计运行。所以这个问题似乎与我在方法替换器中的错误字节码/修改有关。

**[编辑2]**

`CheckClassAdapter.verify(cr, true, pw);`返回函数在编辑之前应该具有的完全相同的字节码。就好像没有进行更改一样。

**[编辑3]**

`classtoload`根据评论注释掉的副本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T15:43:42.910

如果你使用 Eclipse，你应该安装[Bytecode Outline](http://andrei.gmxhome.de/bytecode/index.html) - 它是不可或缺的。

我为您想要实现的目标构建了一个小测试（这应该与您的测试方法的签名相匹配，您必须更改包和类名）：

```
package checkASM;

public class MethodCall {

    public boolean Test(String a, boolean b, String c) {
        System.out.println("GOTit");
        return false;
    }
} 
```

需要以下字节码来构建方法：

```
{
mv = cw.visitMethod(ACC_PUBLIC, "Test",
    "(Ljava/lang/String;ZLjava/lang/String;)Z", null, null);
mv.visitCode();
Label l1 = new Label();
mv.visitLabel(l1);
mv.visitFieldInsn(GETSTATIC, "java/lang/System",
   "out", "Ljava/io/PrintStream;");
mv.visitLdcInsn("GOTit");
mv.visitMethodInsn(INVOKEVIRTUAL, "java/io/PrintStream",
   "println", "(Ljava/lang/String;)V");
Label l2 = new Label();
mv.visitLabel(l2);
mv.visitInsn(ICONST_0);
mv.visitInsn(IRETURN);
Label l3 = new Label();
mv.visitLabel(l3);
mv.visitLocalVariable("this", "LcheckASM/MethodCall;", null, l1, l3, 0);
mv.visitLocalVariable("a", "Ljava/lang/String;", null, l1, l3, 1);
mv.visitLocalVariable("b", "Z", null, l1, l3, 2);
mv.visitLocalVariable("c", "Ljava/lang/String;", null, l1, l3, 3);
mv.visitMaxs(4, 4);
mv.visitEnd();
} 
```

调用`visitLineNumber`可以省略。显然，您缺少所有标签，忘记加载方法参数，没有忽略返回值，设置错误的值`visitMaxs`（这不一定需要，如果我没记错，这取决于您的 ClassWriter 标志）并且没有访问局部变量（或本例中的参数）。

此外，您的类加载似乎有点混乱/混乱。我没有罐子（所以我不能说这些是否有效），但也许你可以替换 Main 和 Loader：

**主要的：**

```
import java.io.File;
import java.io.FileNotFoundException;
import java.net.URL;

public class Main {
    public static void main(String[] args) {
        try {
            Loader.instrumentTmcore(args);
        } catch (Exception e) {
            System.err.println("Ooops");
            e.printStackTrace();
        }
    }
} 
```

**装载机：**

```
import java.io.IOException;
import java.io.PrintWriter;
import java.lang.reflect.Constructor;
import java.lang.reflect.Method;
import java.net.URL;
import java.net.URLClassLoader;

import org.objectweb.asm.ClassReader;
import org.objectweb.asm.ClassWriter;
import org.objectweb.asm.MethodVisitor;

public class Loader {

    public static ClassReader fetchReader(String binaryName) throws Exception {
        return new ClassReader(
                Loader.class.getClassLoader().getSystemResourceAsStream(
                    binaryName.replace('.', '/') + ".class"
                )
            )
        ;
    }

    public static synchronized Class<?> loadClass(byte[] bytecode)
                throws Exception {
        ClassLoader scl = ClassLoader.getSystemClassLoader();
        Class<?>[] types = new Class<?>[] {
                String.class, byte[].class, int.class, int.class
        };
        Object[] args = new Object[] {
                null, bytecode, 0, bytecode.length
        };
        Method m = ClassLoader.class.getMethod("defineClass", types);
        m.setAccessible(true);
        return (Class<?>) m.invoke(scl, args);
    }

    public static void instrumentTmcore(String[] args) throws Exception {
        ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_FRAMES);
        MethodReplacer mr = new MethodReplacer(cw, "Test",
                    "(Ljava/lang/String;ZLjava/lang/String;)Z");
        fetchReader("tmcore.objwin").accept(mr, ClassReader.EXPAND_FRAMES);
        loadClass(cw.toByteArray());
        Class.forName("tmcore.game")
            .getMethod("main", new Class<?>[] {args.getClass()})
            .invoke(null, new Object[] { args });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T18:48:20.227

**提问者的答案从问题中移出**

java 字节码从来都不是问题。这是我加载 jar 的方式，这使得无法检测代码。

感谢 Ame 帮助我解决了这个问题。

以下代码有效：

主要的

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.PrintWriter;
import java.lang.reflect.Constructor;
import java.lang.reflect.Method;
import java.io.FileInputStream;

import org.objectweb.asm.ClassReader;
import org.objectweb.asm.ClassWriter;
import org.objectweb.asm.Opcodes;

public class Main implements Opcodes
{
    public static void main(String[] args) throws Exception
    {

        byte[] obj = readClass("tmcore/obj.class");
        ClassReader objReader = new ClassReader(obj);
        ClassWriter objWriter = new ClassWriter(ClassWriter.COMPUTE_FRAMES | ClassWriter.COMPUTE_MAXS);

        MethodReplacer demoReplacer = new MethodReplacer(objWriter, "run", "()V");
        demoReplacer.visit(V1_6, ACC_PUBLIC + ACC_SUPER, "tmcore/obj", null, "java/applet/Applet", new String[] { "java/lang/Runnable" });
        objReader.accept(demoReplacer, ClassReader.EXPAND_FRAMES);

        objReader = new ClassReader(objWriter.toByteArray());

        Class objC = Loader.loadClass(objWriter.toByteArray(), "tmcore.obj");
        if(objC == null)
        {
            System.out.println("obj cannot be loaded");
        }

        Class game = ClassLoader.getSystemClassLoader().loadClass("tmcore.game");
        if(game == null)
        {
            System.out.println("Can't load game");
            return;
        }

        Constructor ctor = game.getDeclaredConstructor(String[].class);
        if(ctor == null)
        {
            System.out.println("can't find constructor");
            return;
        }

        //Instantiate the class by calling the constructor
        String[] arg = {"tmgames.jar"};
        Object instance = ctor.newInstance(new Object[]{args});
        if(instance == null)
        {
            System.out.println("Can't instantiate constructor");
        }

        //get reference to main(String[] args)
        Method method = game.getDeclaredMethod("main", String[].class);
        //call the main method
        method.invoke(instance);

    }

    public static void verifyValidPath(String path) throws FileNotFoundException
    {
            File filePath = new File(path);
            if (!filePath.exists()) 
            {
              throw new FileNotFoundException(filePath.getPath());
            }
    }

    public static byte[] readClass(String classpath) throws Exception
    {
        verifyValidPath(classpath);
        File f = new File(classpath);

        FileInputStream file = new FileInputStream(f);
        if(file == null)
            throw new FileNotFoundException();

        byte[] classbyte = new byte[(int)f.length()];

        int offset = 0, numRead = 0;
        while (offset < classbyte.length
                && (numRead=file.read(classbyte, offset, classbyte.length-offset)) >= 0) 
        {
             offset += numRead;
        }

        if (offset < classbyte.length) 
        {
            file.close();
            throw new IOException("Could not completely read file ");
        }

        file.close();
        return classbyte;
    }
} 
```

装载机：

```
import java.io.IOException;
import java.lang.reflect.Method;
import java.net.URL;
import java.net.URLClassLoader;

class Loader
{
    private static final Class[] parameters = new Class[] {URL.class};

     public static void addURL(URL u) throws IOException
     {
            URLClassLoader sysloader = (URLClassLoader) ClassLoader.getSystemClassLoader();
            Class sysclass = URLClassLoader.class;

            try 
            {
                Method method = sysclass.getDeclaredMethod("addURL", parameters);
                method.setAccessible(true);
                method.invoke(sysloader, new Object[] {u});
            } 
            catch (Throwable t) 
            {
                t.printStackTrace();
                throw new IOException("Error, could not add URL to system classloader");
            }

     }

     public static Class loadClass(byte[] b, String name) 
     {
            //override classDefine (as it is protected) and define the class.
         Class clazz = null;
         try 
         {
             ClassLoader loader = ClassLoader.getSystemClassLoader();
             Class cls = Class.forName("java.lang.ClassLoader");
             java.lang.reflect.Method method =
                     cls.getDeclaredMethod("defineClass", new Class[] { String.class, byte[].class, int.class, int.class });

              // protected method invocaton
              method.setAccessible(true);
              try 
              {
                  Object[] args = new Object[] {name, b, new Integer(0), new Integer(b.length)};
                  clazz = (Class) method.invoke(loader, args);
              } 

              finally 
              {
                  method.setAccessible(false);
              }
         } 
         catch (Exception e) 
         {
             e.printStackTrace();
             System.exit(1);
         }
            return clazz;
    }
} 
```

MethodReplacer 保持不变。

# android - 是否可以在 Android 主线程中开发一个简单的套接字应用程序？

> ID：11770355
> 
> 赞同：0
> 
> 时间：2012-08-02T02:45:16.787
> 
> 标签：android, multithreading, sockets

为了简单地演示套接字编程在 Android 平台中的工作原理，我想开发一个没有线程/异步任务的简单套接字程序，并且（如果可能）没有异常捕获。那可能吗？我已经尝试过，但它不起作用（正如许多其他人指出的那样，套接字最好在其他线程上运行）。

```
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tv = (TextView) findViewById(R.id.TextView01);
    tv.setText("Nothing from client yet");

 }

 public Void handleOnClick(View v) {
     Socket s = null;
     try {
     ss = new ServerSocket(SERVERPORT);
     } catch (IOException e) {
     e.printStackTrace();
     }
     try {
     s = ss.accept();
     BufferedReader input = new BufferedReader(
         new InputStreamReader(s.getInputStream()));
     String st = null;
     st = input.readLine();
     mClientMsg = st;
     } catch (IOException e) {
     e.printStackTrace();
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:21:01.343

你可以在不使用 AsyncTask 的情况下开发任何东西，但我绝对不推荐它，因为你的应用程序会阻塞直到任务完成（我相信你已经知道了）！在这种情况下，您的套接字需要足够快地响应，以便操作系统不会杀死您的进程（请参阅[此处关于 ANR](http://developer.android.com/guide/practices/responsiveness.html)的讨论）。

您将不得不在某一时刻处理异常。您能做的最好的事情就是让您的方法抛出异常并在调用方法的任何地方处理它们，但这并不意味着您不必处理它们；这只会耽误他们。

```
public Void handleOnClick(View v) throws IOException {
    Socket s = null;
    ss = new ServerSocket(SERVERPORT);
    s = ss.accept();
    BufferedReader input = new BufferedReader(
            new InputStreamReader(s.getInputStream()));
    String st = null;
    st = input.readLine();
    mClientMsg = st;
} 
```

*如果这是为了给其他人做一个例子或示范，它应该结构良好，以便人们学会正确地*做事。我强烈建议您考虑处理应该处理的异常（或在链上抛出更有意义的异常）。此外，如果你正在教一个班级或个人这些东西，你应该在某一时刻展示如何避免被 ANR 扇耳光。

# asp.net - ashx 处理程序删除请求不起作用 HTTP 405.0

> ID：11770356
> 
> 赞同：4
> 
> 时间：2012-08-02T02:45:20.830
> 
> 标签：asp.net, iis-7, iis-7.5

我在尝试从我尝试实现的 jquery 文件上传器向 .ashx 处理程序发出 DELETE 请求时收到 HTTP 错误 405.0 - Method Not Allowed 错误。

参考这个问题（http://stackoverflow.com/questions/6695587/enabling-put-on-iis-7-5-for-an-ashx-handler-using-windows-authentication）我已将以下部分添加到我的 web.config 文件，但似乎无法让错误消失。我没有发现其他任何技巧可以让 DELETE 起作用吗？

我正在使用 .Net 4.0 和 IIS7.5，同时运行 Windows azure 存储模拟器。

```
<system.webServer>
    <modules>
        <remove name="WebDAVModule" />
    </modules>
    <handlers accessPolicy="Read, Write, Execute, Script">
        <remove name="WebDAV" />
        <remove name="SimpleHandlerFactory-Integrated-4.0" />
        <remove name="SimpleHandlerFactory-Integrated" />
        <add name="SimpleHandlerFactory-Integrated" path="*.ashx" verb="GET,HEAD,POST,DEBUG,PUT,DELETE" type="System.Web.UI.SimpleHandlerFactory" resourceType="Unspecified" requireAccess="Write" preCondition="integratedMode" />
        <add name="SimpleHandlerFactory-Integrated-4.0" path="*.ashx" verb="GET,HEAD,POST,DEBUG,PUT,DELETE" type="System.Web.UI.SimpleHandlerFactory" resourceType="Unspecified" requireAccess="Write" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
    <security>
        <authorization>
            <remove users="*" roles="" verbs="" />
            <add accessType="Allow" users="*" verbs="GET,HEAD,POST,PUT,DELETE,DEBUG" />
        </authorization>
    </security>
</system.webServer> 
```

这是调用处理程序的前端代码：

```
<td class="delete">
<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only" data-url="/webservices/FileTransferHandler.ashx?f=df69bfd1-2a15-43e3-9310-3ca163e2aeb2" data-type="DELETE" role="button" aria-disabled="false" title="Delete">
<span class="ui-button-icon-primary ui-icon ui-icon-trash"></span>
<span class="ui-button-text">Delete</span>
</button>
</td> 
```

我已经启用了失败的请求跟踪，它正在尝试使用 staticFileModule，而基于 .ashx 的请求扩展名我认为它会尝试使用 SimpleHandlerFactory。

这是我点击的链接： http://local.testsite.com:80/webservices/FileTransferHandler.ashx?f= [df69bf1-2a15-43e3-9310-3ca163e2aeb2](http://local.testsite.com:80/webservices/FileTransferHandler.ashx?f=df69bf1-2a15-43e3-9310-3ca163e2aeb2)

为什么该链接会使用 staticFileModule，不是用于 .jpg 和 .pdf 之类的图像或文档吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T01:52:57.597

这是最后的 web.config 部分。我需要添加的东西是我缺少的是将 staticFileHandler 从使用“所有动词”更改为所有动词。

```
<system.webServer>
    <modules>
        <remove name="WebDAVModule" />
    </modules>
    <handlers accessPolicy="Read, Write, Execute, Script">
        <remove name="StaticFile" />
        <remove name="SimpleHandlerFactory-ISAPI-2.0" />
        <remove name="WebDAV" />
        <remove name="SimpleHandlerFactory-Integrated-4.0" />
        <remove name="SimpleHandlerFactory-Integrated" />
        <add name="SimpleHandlerFactory-Integrated" path="*.ashx" verb="GET,HEAD,POST,DEBUG,PUT,DELETE" type="System.Web.UI.SimpleHandlerFactory" resourceType="Unspecified" requireAccess="Write" preCondition="integratedMode" />
        <add name="SimpleHandlerFactory-Integrated-4.0" path="*.ashx" verb="GET,HEAD,POST,DEBUG,PUT,DELETE" type="System.Web.UI.SimpleHandlerFactory" resourceType="Unspecified" requireAccess="Write" preCondition="integratedMode,runtimeVersionv4.0" />
        <add name="SimpleHandlerFactory-ISAPI-2.0" path="*.ashx" verb="GET,HEAD,POST,DEBUG,PUT,DELETE" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" responseBufferLimit="0" />
        <add name="StaticFile" path="*" verb="GET,HEAD,POST,DEBUG,PUT,DELETE" modules="StaticFileModule,DefaultDocumentModule,DirectoryListingModule" resourceType="Either" requireAccess="Read" />
    </handlers>
    <security>
        <authorization>
            <remove users="*" roles="" verbs="" />
            <add accessType="Allow" users="*" verbs="GET,HEAD,POST,PUT,DELETE,DEBUG" />
        </authorization>
    </security>
    <tracing>
        <traceFailedRequests>
            <remove path="*" />
            <add path="*">
                <traceAreas>
                    <add provider="ASP" verbosity="Verbose" />
                    <add provider="ASPNET" areas="Infrastructure,Module,Page,AppServices" verbosity="Verbose" />
                    <add provider="ISAPI Extension" verbosity="Verbose" />
                    <add provider="WWW Server" areas="Authentication,Security,Filter,StaticFile,CGI,Compression,Cache,RequestNotifications,Module,FastCGI" verbosity="Verbose" />
                </traceAreas>
                <failureDefinitions statusCodes="405" />
            </add>
        </traceFailedRequests>
    </tracing>        
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T11:28:09.507

如果您在 IIS 服务器中使用 PHP，请按照以下步骤操作。我通过为 PHP 模块添加删除动词解决了这些问题。1.打开IIS。2.进入配置编辑器。3.Form Section DropDown 选择System.WebServer。4.选择处理程序，它将显示可用的处理程序单击旁边的
计数以打开处理程序。5.转到 PHP_viaFastCGI 并在 POST 旁边添加删除作为动词。

# javascript - 静态 HTML 表格上的分页是否有助于提高性能

> ID：11770362
> 
> 赞同：2
> 
> 时间：2012-08-02T02:46:33.837
> 
> 标签：javascript, html, performance, html-table

我有一个从数据库转储的大 HTML 表（约 10K 行，4 列，仅文本）。我在 Chrome/Firefox 中打开它时遇到性能不佳的问题。

我没有直接访问数据库的权限，所以不可能逐页加载。所有数据都是静态 HTML。

在这种情况下，使用一些 jQuery 插件进行分页是否有助于提高性能？还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:58:46.160

如果适用，设置`table-layout: fixed`有助于大大减少渲染时间。缓慢主要是由于在默认的表格布局方法中，浏览器必须解析和处理整个表格，计算所有单元格的宽度要求，然后才能渲染表格的任何部分。

固定布局告诉浏览器根据第一行设置列宽（注意可能适用于它的任何 CSS）。当然，如果宽度不适合其他行，这可能会导致混乱。对于行通常非常相似的数据表，宽度可能可以适当设置。

这并没有改变很少有人（如果有的话）会阅读所有 10,000 行的问题。人们可能会在那里寻找一些特定的数据。最好设置一个搜索表单，让用户得到他想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:11:19.353

分页肯定会解决这个问题。您也可以尝试最初将表格样式设置为`display: none`. 尽管分页可能会在浏览器尝试呈现表格之前生效。

您还可以将表格存储在单独的 html 文件中，对文档进行 ajax 调用，并实现[实时滚动](http://www.fieg.nl/infinite-ajax-scroll-a-jquery-plugin)。虽然，这取决于您期望用户如何探索数据。如果跳到特定的愤怒喜欢`100-199`是有用的，[分页表](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/#.UBn8T2HXG8A)将是理想的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T23:25:38.260

我有一个类似的问题并制作了一个 jQuery 插件：

[https://github.com/lperrin/infinitable](https://github.com/lperrin/infinitable)

要使用它，您可以使用 Ajax 调用加载所有数据，将其转换为一个巨大的数组，然后将其传递给插件。

它基本上隐藏了不可见的单元格，同时使排序或过滤单元格变得容易。还有其他解决方案可以实现这一点，但除了 jQuery 之外，这个解决方案没有依赖项。

该项目包含一个演示，其中包含一个包含 100,000 个元素的表。

# ruby-on-rails-3.1 - 骨干网和 Rails 重定向

> ID：11770364
> 
> 赞同：1
> 
> 时间：2012-08-02T02:46:42.497
> 
> 标签：ruby-on-rails-3.1, backbone.js, coffeescript

我是主干和 Rails 的新手。当我返回最后一行的索引视图时，索引视图不会使用创建的新值进行更新。

```
class App.Views.ProfilesIndex extends Backbone.View
template: JST['profiles/index']

initialize: ->
    @collection.on('reset', @render, this)

render: ->
    $(@el).html(@template(profiles: @collection))
    this 
```

这是我的新视图代码

```
class App.Views.ProfilesNew extends Backbone.View
template: JST['profiles/new']

initialize: ->
    @collection = new App.Collections.Profiles()

events: ->
    'submit #new_profile': 'createProfile'

render: ->
    $(@el).html(@template())
    this

createProfile: (event) ->
    event.preventDefault()
    attributes = name: $('#new_profile_name').val()
    @collection.create attributes,
        success: -> Backbone.history.navigate("/profiles", {trigger: true}) 
```

因此，我需要在创建新元素并将其返回到索引视图时更新集合。

# 路由器

```
class App.Routers.Profiles extends Backbone.Router
routes:
    'profiles': 'index'
    'profiles/new': 'new'

initialize: ->
    @collection = new App.Collections.Profiles()
    @collection.fetch()

index: ->
    view = new App.Views.ProfilesIndex(collection: @collection)
    $('#container').html(view.render().el)

new: ->
    view = new App.Views.ProfilesNew()
    $('#container').html(view.render().el) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:03:40.533

你有两个不同的`App.Collections.Profiles`集合。您的路由器有一个：

```
class App.Routers.Profiles extends Backbone.Router
    #...
    initialize: ->
        @collection = new App.Collections.Profiles() 
```

你的`ProfilesNew`观点有它自己的：

```
class App.Views.ProfilesNew extends Backbone.View
    #...
    initialize: ->
        @collection = new App.Collections.Profiles() 
```

您的`createProfile`方法将新配置文件添加到`@collection`视图中`ProfilesNew`，然后路由器将其`@collection`交给`ProfilesIndex`视图：

```
index: ->
    view = new App.Views.ProfilesIndex(collection: @collection)
    $('#container').html(view.render().el) 
```

我认为你应该只有一个集合：路由器中的那个。然后将其交给`ProfilesNew`视图：

```
new: ->
    view = new App.Views.ProfilesNew(collection: @collection)
    $('#container').html(view.render().el) 
```

并从中删除该`initialize`方法`ProfilesNew`。视图[`initialize`](http://backbonejs.org/#View-constructor)将为您复制`collection`选项`@collection`：

> 有几个特殊选项，如果通过，将直接附加到视图：`model`、**`collection`**、`el`、`id`、`className`和。`tagName``attributes`

强调我的。

# c - 如何在 JavaScriptCore 中记录输出？

> ID：11770366
> 
> 赞同：0
> 
> 时间：2012-08-02T02:46:59.037
> 
> 标签：c, logging, javascriptcore

在终端上运行 jsc 命令时，我可以访问函数 print()。它只是记录到标准输出。

我正在构建一个框架以使 JS 库在 C 中可用，并且当我的 JS 源尝试调用 print() 时引发异常。console.log 也不存在。

在 C 程序中使用时，捕获和打印异常是从 JavaScriptCore 获取输出的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T19:40:38.673

如果您直接使用 JavaScriptCore 框架，则打印和控制台对象都不存在。您必须自己构建这些对象。您免费获得的只是基本的 JavaScript (ECMAScript) 实现。

# javascript - 使用 JavaScript 将带有时区的日期字符串转换为本地时间的日期对象

> ID：11770367
> 
> 赞同：33
> 
> 时间：2012-08-02T02:46:59.567
> 
> 标签：javascript, datetime, timezone

我的日期字符串的格式如下所示：`yyyy-MM-ddTHH:mm:ss-0Z00`

**示例 1**：`2010-03-05T07:03:51-0800`

**示例 2**：`2010-07-01T20:23:00-0700`

我需要使用这些日期字符串创建一个日期对象。`new Date()`不适用于此字符串。请帮我将这些日期字符串转换为具有本地时区的日期对象。

谢谢！

编辑：我在 Pentaho Data Integration 4.3.0 中使用它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-05-25T03:24:18.933

以我的时区为例（AEST）：

```
function parseDate(str_date) {
  return new Date(Date.parse(str_date));
}

var str_date = "2015-05-01T22:00:00+10:00"; //AEST time
var locale_date = parseDate(str_date); 
```

locale_date：2015 年 5 月 1 日星期五 22:00:00 GMT+1000 (AEST)

```
var str_date = "2015-05-01T22:00:00+00:00" //UTC time
var locale_date = parseDate(str_date); 
```

locale_date：2015 年 5 月 2 日星期六 08:00:00 GMT+1000 (AEST)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-02T02:51:26.413

您可以使用[Moment.js](http://momentjs.com)等库来执行此操作。

请参阅字符串 + 格式解析。

[http://momentjs.com/docs/#/parsing/string-format/](http://momentjs.com/docs/#/parsing/string-format/)

以下内容*应*解析您提供的日期，但您可能需要根据需要对其进行修改。

```
var oldDate = "2010-03-05T07:03:51-0800";

var dateObj = moment(oldDate, "YYY-MM-DDTHH:mm:ssZ").toDate(); 
```

或者，请参阅 Moment 的字符串解析器，它看起来像您提供的格式，除了时间的秒数和时区之间的空格。

[http://momentjs.com/docs/#/parsing/string/](http://momentjs.com/docs/#/parsing/string/)

## 选择

第二种方法是 Date.js，另一个似乎可以很好地解析格式的库。[http://www.datejs.com](http://www.datejs.com)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-02T03:13:24.453

日期字符串：

`var strDate = "2010-07-01T20:23:00-0700";`

本地 JS Date 对象中的本地时间表示：

`var ltzDate = (new Date(strDate)).toLocaleString();`

# php - 尝试在 MySQL 表中插入多行

> ID：11770369
> 
> 赞同：0
> 
> 时间：2012-08-02T02:47:12.667
> 
> 标签：php, mysql

目前我正在尝试使用以下代码将多行插入 MySQL 数据库，但是我不断收到错误 500（内部服务器错误）...我在这里做正确的事情吗？我对 PHP 比较陌生。谢谢

```
for ($i = 0; $i < $numberOfOptions; $i++) {
  var $insertOptions;   <<<<<<<< Error here. Should not have 'var' pre-fix

  if ($numbersOrLetters == 0) {

           $optionNumber = $i + 1;
           $insertOptions = "INSERT INTO Survey_results (Survey_authKey, Option_name, Option_value) 
                       VALUES ('$userAuthKey','$optionNumber','0')";
     }
  else {
           $currentValue = $letter[$i];

           $insertOptions = "INSERT INTO Survey_results (Survey_authKey, Option_name, Option_value) 
                       VALUES ('$userAuthKey','$currentValue','0')";
     }

              mysql_query($insertOptions);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T03:05:36.670

将此添加到您的脚本之上以启用错误报告。

```
 ini_set('display_errors','On');
 error_reporting(E_ALL); 
```

然后你就会知道问题可能是什么。

[PHP 错误报告](http://us2.php.net/manual/en/function.error-reporting.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:38:08.170

按照要求：

`var $插入选项;

不合适的 OOP 或大脑中的大量 javascript？

# php - Php 联系表 - 可选字段（修剪）

> ID：11770372
> 
> 赞同：0
> 
> 时间：2012-08-02T02:47:54.087
> 
> 标签：php, forms, trim, contact

我有一个 php 联系表，我正在尝试编辑以满足我的需要。目前，需要填写每个字段才能使表单正常工作。为了使某些字段可选，我需要编辑什么？下面不是完整的脚本，但我感觉它是我需要做的最重要的领域部分。

谢谢

```
$name    = $_POST['name'];
$email  = $_POST['email'];
$phone  = $_POST['phone'];
$date    = $_POST['date'];
$guests  = $_POST['guests'];
$subject  = $_POST['subject'];
$comments = $_POST['comments'];

if (isset($_POST['verify'])) : 
    $posted_verify   = $_POST['verify']; 
    $posted_verify   = md5($posted_verify); 
else :
    $posted_verify = '';
endif;

// Important Variables
$session_verify = $_SESSION['verify'];

if (empty($session_verify)) $session_verify = $_COOKIE['verify'];

$error = '';

    if(trim($name) == '') {
        $error .= '<li>Your name is required.</li>';
    }

    if(trim($date) == '') {
        $error .= '<li>Your event date is required.</li>';
    }

    if(trim($email) == '') {
        $error .= '<li>Your e-mail address is required.</li>';
    } elseif(!isEmail($email)) {
        $error .= '<li>You have entered an invalid e-mail address.</li>';
    }

    if(trim($phone) == '') {
        $error .= '<li>Your phone number is required.</li>';
    } elseif(!is_numeric($phone)) {
        $error .= '<li>Your phone number can only contain digits.</li>';
    }

    if(trim($comments) == '') {
        $error .= '<li>You must enter a message to send.</li>';
    }

    if(trim($guests) == '') {
        $error .= '<li>The number of guests is required.</li>';
    } elseif(!is_numeric($guests)) {
        $error .= '<li>Your phone number can only contain digits.</li>';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:52:32.760

删除您希望成为可选变量的 if 语句。

示例删除此名称为可选： `if(trim($name) == '') { $error .= '<li>Your name is required.</li>'; }`

# iis - 在 Windows XP 下将 DNS 与 IIS Express 一起使用

> ID：11770376
> 
> 赞同：1
> 
> 时间：2012-08-02T02:48:28.520
> 
> 标签：iis, ssl, acl, netsh, httpcfg.exe

我正在使用 IIS 7.5 Express 设置 VS2010 SP1，因此我可以在我的开发环境中使用 SSL。

跟随 Scott Hanselman 的出色帖子[在这里](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx)为我工作。唯一的问题是他在 Windows 7 上运行（我假设），而我在 XP 上。

让我感到困惑的是他在哪里进行了 URL 预订：

```
netsh http add urlacl url=http://hanselman-w500:80/ user=everyone 
```

这不适用于XP。经过一番谷歌搜索，我发现了[这一点](http://msdn.microsoft.com/en-us/library/ms733768.aspx)并发现我需要使用“httpcfg”实用程序，一般语法：

```
httpcfg set urlacl /u {http://URL:Port/ | https://URL:Port/} /a ACL 
```

但是，似乎没有等效的 'user=' 开关，而且我对 ACL 描述符语言不够熟练，无法计算出等效的开关。

谁能给我使用 httpcfg 的等效命令，或者在 XP 下无法使用等效命令？

编辑：在 Hanselman 帖子的底部有一个命令行辅助方法可以完成这项工作

```
IisExpressAdminCmd.exe setupFriendlyHostnameUrl -url:http://hanselman-w500:80/ 
```

但是我希望使用完整的逐步过程，所以问题是存在的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:26:30.800

此链接看起来像 Hanselman 帖子所基于的内容。它具有命令的 netsh 和 httpcfg 形式。

[http://learn.iis.net/page.aspx/1005/handling-url-binding-failures-in-iis-express/](http://learn.iis.net/page.aspx/1005/handling-url-binding-failures-in-iis-express/)

# php - 打印指定行 mysql & PHP

> ID：11770380
> 
> 赞同：1
> 
> 时间：2012-08-02T02:49:02.137
> 
> 标签：php, mysql

好吧，这里是一个非常新手的问题，但我找不到合适的问题将它放在谷歌或这里。

我有一个非常小的表，只有 3 行，每一行都有一个定义的 ID（1、2、3）。

我想要做的是打印每个的行数据，但避免循环功能。

IE

查询将是：

```
$query = "SELECT field1, field2, field3 FROM table";
$var1 = mysql_query($query);
$var2 = mysql_fetch_assoc($var1);
$var3 = mysql_num_rows($var1); 
```

PHP：

```
<p><?php echo $var2['field1'];//how can i tell to the code "use the row with this id here -> id=1" ?></p>

<p><?php echo $var2['field1']; // "and use the row with the id "2" here" ?></p> 
```

PS：对不起我的英语不好，阿根廷老兄。

好的，

这就是为什么我不想把它作为一个循环来做：

我知道我可以这样做：

```
<?php do { ?>

<p>bla bla <?php echo $var2[field1]; ?> </p> 

<?php } while ($var2 = mysql_fetch_assoc($var1)); ?> 
```

但不能这样，因为网站设计将这些数据放在不同的div中，有不同的定位和CSS格式。

我想以正确的方式做到这一点，避免每行使用一个查询。

行将永远为 3，并且每一行的 id 将始终相同（1、2、3）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:03:08.687

你可以像这样使用[mysql_field_seek](http://www.php.net/manual/en/function.mysql-field-seek.php)：

```
$query = "SELECT field1, field2, field3 FROM table";
$query_result = mysql_query($query);

$var1 = mysql_field_seek($query_result,0);
$var2 = mysql_field_seek($query_result,1);
$var3 = mysql_field_seek($query_result,2);

$resutl1 = mysql_fetch_field($var1);
$resutl2 = mysql_fetch_field($var2);
$resutl3 = mysql_fetch_field($var3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:54:06.383

没有循环就没有办法做到这一点。但是，为什么要避免循环？它应该相当简单，例如：

```
$query = 'SELECT field1, field2, field3 FROM table';
$result = mysql_query($query);
while ($row = mysql_fetch_assoc($result))
    echo "<p>{$row['field1']}</p>";
mysql_free_result($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:57:25.600

这是一个获取字段名和 ID 的简单函数。然后，您可以为您需要的任何字段/ID 组合调用它。

```
function getField($fieldName, $id)
{ 
  $sql = sprintf("SELECT `%s` FROM `table` WHERE `id` = %d", $fieldName, $id);
  $result = mysql_query($sql);
  return mysql_num_rows($result) == 1 ? mysql_result($result, 0, 0) : null;
}

echo getField('field1', 1);
echo getField('field1', 2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T03:07:54.370

我想不出不使用循环的理由... 一般来说，mysql_fetch_assoc 函数从结果资源中返回一行数据，然后自动递增结果资源中的内部行指针。这将是执行此操作的循环方式：

```
while ($row = mysql_fetch_assoc($var1)) {
    echo $row["field1"];
    echo $row["field2"];
    echo $row["field3"];
}

mysql_free_result($var1); 
```

但是，您可以这样做，因为内部行指针会自动递增。

```
$row1 = mysql_fetch_assoc($var1);
$row2 = mysql_fetch_assoc($var1);
$row3 = mysql_fetch_assoc($var1);

echo $row1["field1"];
echo $row1["field2"];
echo $row1["field3"];

echo $row2["field1"];
... 
```

这基本上会让你在没有循环的情况下得到同样的东西。快乐编码！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T03:08:45.950

这个怎么样？这可能对你有用。

```
$result = mysql_query("SELECT field1, field2, field3 FROM table");

$arr1 = (mysql_fetch_array($result));
$arr2 = (mysql_fetch_array($result));
$arr3 = (mysql_fetch_array($result));

switch ($x)
{
    case 1: echo $arr1[0] ." - ".$arr1[1] ." - ".$arr1[2]; break;
    case 2: echo $arr2[0] ." - ".$arr2[1] ." - ".$arr2[2]; break;
    case 3: echo $arr3[0] ." - ".$arr3[1] ." - ".$arr3[2]; break;
    default: echo "Unknown";
} 
```

# c - 在不分配给变量的情况下在内核中调用非空函数是否安全

> ID：11770390
> 
> 赞同：0
> 
> 时间：2012-08-02T02:51:04.917
> 
> 标签：c, linux-kernel, spinlock

我正在*尝试*调试内核代码，因为“原子调度”使我的系统崩溃。在实际内核模块的某个点上，我添加了一行来调用另一个内核模块中定义的函数（这个是我制作的）。电话是：

```
mycallback(svc, skb); 
```

并且`mycallback()`函数返回`int`。所以我有两个问题：

1.  在内核内部调用非 void 函数而不将其结果分配给变量是否安全？

2.  如果`mycallback()`调用的代码是 spin_locked 或类似的，它会安全吗？它会是 spin_locked/atomic 还是我可能会睡觉并危及内核？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T06:18:32.477

> 在内核内部调用非 void 函数而不将其结果分配给变量是否安全？

是的。

> 如果`mycallback()`调用的代码是 spin_locked 或类似的，它会安全吗？它会是 spin_locked/atomic 还是我可能会睡觉并危及内核？

如果调用的代码`mycallback()`可以持有自旋锁，则`mycallback()` **不得**调用任何可以休眠的函数。如果您确实尝试在持有自旋锁时睡觉，您将看到您所描述的“原子时调度”崩溃。

潜在的睡眠功能包括`copy_to_user()`, `copy_from_user()`, `kmalloc()`（没有`GFP_ATOMIC`标志），`mutex_lock()`还有更多。

# jquery - Grails + Jquery，纯HTML不起作用

> ID：11770391
> 
> 赞同：1
> 
> 时间：2012-08-02T02:51:15.010
> 
> 标签：jquery, ajax, grails

我正在尝试使用 ajax 和 grails。这个页面应该是独立的，所以我不能使用gsp标签，只能使用纯HTML。

```
<head>
    <title>Teste</title>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

</head>
<body>
    <form>
        <fieldset>
            <legend>Test</legend>
            <label>User:
                <input type="text" name="username" />
            </label>
            <label>Code:
                <input type="text" name="code" />
            </label>
            <input type="submit" value="Enviar" />
        </fieldset>
    </form>
<script>

    $("form").submit(function() {
        $.ajax({
          type: "POST",
          url: "http://localhost:9091/teste/paciente/index",
          dataType: "text",
          data: $(this).serialize(),
          success: function(data) {alert("oi")},
          error:function (xhr, ajaxOptions, thrownError){
            alert(xhr.status);
            alert(thrownError);
          }  

        })
        return false;
    })
</script>
</body> 
```

圣杯

```
 class PacienteController {

        def index = {
            def username = params.username
            def code = params.code

            //response.contentType = "application/"
            render text: 'sent successfully', contentType: 'text/plain'

        }
    } 
```

我可以调试我的控制器，但在那之后，我从 jQuery 中得到一个错误（空消息）。我不知道 Grails 在幕后做了什么，但根本无法返回数据。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:27:27.067

这是一个跨域 AJAX 问题。标准 AJAX 仅限于将数据返回到与请求相同的域。您可以使用 JSONP 来解决这个问题，但您必须将数据作为 JSON 返回。

所以你可以改变你的控制器来做到这一点：

```
def result = ['status': 'sent successfully']
render "${params.callback}(${result as JSON})" 
```

`params.callback`里面有一个由请求自动创建和发送的回调函数。

就请求而言，我认为您所要做的只是修改，`dataType: 'jsonp'`但无论如何我都不是这方面的专家。如果您需要更多信息，请参阅[jQuery 文档...](http://api.jquery.com/jQuery.ajax/)

# sql-server - SSIS 连接管理器 2012

> ID：11770400
> 
> 赞同：2
> 
> 时间：2012-08-02T02:52:35.597
> 
> 标签：sql-server, ssis

我使用 SSIS 2012 创建了一个包；我使用了一个连接管理器，但该连接管理器是使用“转换为包级连接”在包级设置的。现在，当我使用 SQL 数据工具或 New 2012 BIDS 运行此包时，它运行良好，但是当我使用执行包实用程序运行包时，它无法运行，因为它找不到包级连接管理器。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:08:47.317

当您将项目部署到 SSMS 时，它可以工作。当它部署时，也会进行连接。

# android - 如何在 PageCurl 中添加 TextView？

> ID：11770405
> 
> 赞同：0
> 
> 时间：2012-08-02T02:53:30.153
> 
> 标签：android, textview, android-relativelayout, page-curl

我是 android 新手，我在这个链接[http://code.google.com/p/android-page-curl/](http://code.google.com/p/android-page-curl/)中找到了这个很棒的 android page curl 。我的问题是，如何添加 TextView？我已经尝试过了，但是当我尝试时它总是强制关闭。这是我在布局 xml 中的代码。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
    <cv.tarie.pagecurl.PageCurlView
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:id="@+id/dcgpagecurlPageCurlView1"/>

    <LinearLayout android:id="@+id/textlayout"
        android:layout_width="fill_parent" android:layout_height="100dp"
        android:layout_alignParentBottom="true" android:gravity="center"
        android:background="#55000000" android:padding="5dp">

        <TextView android:id="@+id/dialog" android:layout_width="fill_parent"
            android:layout_height="fill_parent" android:textSize="18dp"
            android:textColor="#FFFFFF" />

    </LinearLayout>
</RelativeLayout> 
```

我在 PageCurlView 中添加了这段代码。

```
TextView tv = (TextView) findViewById(R.id.dialog);
tv.setText("Hello!"); 
```

我的代码有问题？？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:08:40.893

您应该提供更多信息：您在哪里添加了该代码？什么是 logcat 输出，...

无论如何，从查看您的 XML 开始，对您自己提出一个简单的问题：为什么 PageCurlView 应该能够找到 TextView 元素，它不是它的子元素？

你有：

*   相对布局
    *   页面卷曲视图
    *   线性布局
        *   文本视图

TextView 是RelativeLayout 和LinearLayout 的唯一子级。在 PageCurlView 中找不到 TextView。FindViewById() 仅下降到 ViewGroups 子项，而不是父项。

我只是在想，可能你的问题是完全错误的。您是否尝试询问“如何使 PageCurl 在 TextViews 之间切换，而不仅仅是图像？”。答案是：阅读文档，或者只是主网站的第一页。这不可能。它只能在图像之间切换。

# jquery - Jquery如何获取具有特定数据属性的隐藏字段并设置另一个数据属性

> ID：11770406
> 
> 赞同：1
> 
> 时间：2012-08-02T02:53:32.510
> 
> 标签：jquery

我有隐藏字段：

```
<input type="hidden" class="deleted" name="Deleted" data-id="2" value="@Model.Deleted" /> 
```

所以页面上会有一些这些，但具有不同的 data-id 值。

我想要得到这个特定的并将值设置为 true。

要获得所有隐藏字段会是什么？

```
$(':hidden') 
```

但是我只想得到一个`class="deleted"`这样的吗？

```
$(':hidden.deleted') 
```

现在我想把它缩小到一个`data-id="2"`

这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:55:30.643

尝试以下操作：

```
$('.deleted[data-id="2"]:hidden') 
```

# spring-security - 元素“b:bean”的前缀“b”未绑定

> ID：11770411
> 
> 赞同：0
> 
> 时间：2012-08-02T02:54:11.360
> 
> 标签：spring-security

> **可能重复：**
> [security.xml 使用 Spring 的奇怪错误](https://stackoverflow.com/questions/8021611/security-xml-strange-error-using-spring)

请我有一个问题，我正在使用带有 jsf 1.2 的 spring-security 3.1，并且我正在尝试使用数据库作为我的用户的来源。

这是 application-context.xml 的一部分

控制台错误：org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException：来自 ServletContext 资源 [/WEB-INF/applicationContext.xml] 的 XML 文档中的第 19 行无效；嵌套异常是 org.xml.sax.SAXParseException；行号：19；列号：94；元素“b:bean”的前缀“b”未绑定。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:security="http://www.springframework.org/schema/security"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <b:bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <beans:property name="driverClassName" value="org.postgresql.Driver" />
        <beans:property name="url" value="jdbc:postgresql://localhost/protopaie" />
        <beans:property name="username" value="??????" />
        <beans:property name="password" value="??????" />
    </b:bean>

    <security:http auto-config="true">

        <security:intercept-url pattern="/loginUtilisateur.jsf"
                            access="IS_AUTHENTICATED_ANONYMOUSLY"/>
        <security:intercept-url pattern="/images/**" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
        <security:intercept-url pattern="/css/**" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
        <security:intercept-url pattern="/js/**" access="IS_AUTHENTICATED_ANONYMOUSLY"/>

        <security:intercept-url pattern="/accessDenied.jsp"
                            access="IS_AUTHENTICATED_ANONYMOUSLY"/>
        <security:intercept-url pattern="/**" access="ROLE_FORMATEUR"/>

    <security:form-login
        login-processing-url="/j_spring_security_check"
        login-page="/loginUtilisateur.jsf"
        authentication-failure-url="/accessDenied.jsp" 
        default-target-url="/pages/gestionAdministration/accueil/pageAccueil.jsf"/>
    <!--<security:logout logout-success-url="/index.jsf"/>-->
    </security:http>

</beans> 
```

# actionscript-3 - 将对象转换为日期

> ID：11770415
> 
> 赞同：1
> 
> 时间：2012-08-02T02:55:09.083
> 
> 标签：actionscript-3, apache-flex

我已经导入了一个包含日期戳的 xml 文件。我通过将日期戳放入一个对象中来提取它：

```
dataObject = new Object();
dataObject.date = ... etc. 
```

日期戳是由sql数据库创建的，其结构如下，但不再是Date了：

```
 2011-02-03 16:30:10 
```

我可以将 Object 中的文本转换回 Flex 中的 Date 对象以便能够使用 Date 方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T02:59:15.550

您可以`Date::parse`为此使用：

```
var date:Date = new Date(Date.parse(dateString)); 
```

但是请注意，Flash 不将“-”识别为分隔符，因此您需要先转换字符串。像这样的东西应该工作：

```
dateString = dateString.replace(new RegExp(/-/g), '/');
var date:Date = Date.parse(dateString); 
```

# android - drawBitmap 空指针异常

> ID：11770416
> 
> 赞同：0
> 
> 时间：2012-08-02T02:55:12.433
> 
> 标签：android, canvas, nullpointerexception, drawbitmap, pixmap

我在以下代码中的 android java 代码中遇到了 nullpointerexception。这是在 AndroidGraphics.java 中。

```
public void drawPixmap(Pixmap pixmap, int x, int y) {
    canvas.drawBitmap(((AndroidPixmap)pixmap).bitmap, x, y, null);
} 
```

AndroidPixmap.java 在这里：

```
package com.badlogic.androidgames.framework.impl;

import android.graphics.Bitmap;

import com.badlogic.androidgames.framework.Graphics.PixmapFormat;
import com.badlogic.androidgames.framework.Pixmap;

public class AndroidPixmap implements Pixmap{
    Bitmap bitmap;
    PixmapFormat format;

    public AndroidPixmap(Bitmap bitmap, PixmapFormat format){
        this.bitmap = bitmap;
        this.format = format;
    }

    @Override
    public int getWidth(){
        return bitmap.getWidth();
    }

    @Override
    public int getHeight(){
        return bitmap.getHeight();
    }

    @Override
    public PixmapFormat getFormat(){
        return format;
    }

    @Override
    public void dispose(){
        bitmap.recycle();
    }
} 
```

选角有问题吗？任何帮助都会很棒！

编辑：这是像素图类：

```
package com.badlogic.androidgames.framework;

import com.badlogic.androidgames.framework.Graphics.PixmapFormat;

public interface Pixmap {
    public int getWidth();

    public int getHeight();

    public PixmapFormat getFormat();

    public void dispose();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:22:27.973

尝试这个：

```
public void drawPixmap(AndroidPixmap pixmap, int x, int y) {
    canvas.drawBitmap(pixmap.bitmap, x, y, null);
} 
```

或者，如果您想保留`Pixmap`签名，您可以将其设为抽象类并扩展它而不是接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:21:15.703

您的 AndroidPixmap*实现*了 Pixmap，它不是从 Pixmap 继承/扩展的。如果你转换为 Pixmap，你只会得到实现，我假设它有 bitmap=null。由于您没有将 Pixmap 类添加到问题中，因此很难更详细地回答。

# php - 使用 cakephp 查找数据时出错

> ID：11770418
> 
> 赞同：0
> 
> 时间：2012-08-02T02:55:24.663
> 
> 标签：php, sql, cakephp

当我尝试查找给定用户的帖子时（在 UsersController 中），我收到以下错误 "Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Posts.user_id' in 'where clause'" 。这是配置文件功能

```
public function profile($id = null) {
    $this->User->id = $id;
    if (!$this->User->exists()) {  //if the user doesn't exist while on view.ctp, throw error message
        throw new NotFoundException(__('Invalid user'));
    }
    $this->set('user', $this->User->read(null, $id)); //sends info to view.ctp. 
    $conditions = array('posts.user_id' => $id);
    $this->set('posts', $this->User->Posts->find('all',array('conditions' => $conditions))); 
```

这是查询。

```
 SQL Query: SELECT `Post`.`id`, `Post`.`title`, `Post`.`body`, `Post`.`created`, `Post`.`modified`, `Post`.`user_id` FROM `blog`.`posts` AS `Post` WHERE `posts`.`user_id` = 1 
```

**编辑 - 我得到了查询，现在我遇到了另一个问题**

在我的 profile.ctp 页面上，我收到以下错误

```
Invalid argument supplied for foreach() [APP/View/Users/profile.ctp, line 35] 
```

这是第 35 行

```
 <?php foreach ($posts as $post): ?> 
```

这是用户控制器中配置文件函数的语句

```
$this->set('posts', $this->User->Posts->find('all',array('conditions' => $conditions))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:04:45.593

假设`Post`模型*属于* `User`并且`User` *有很多* `Post`，修改你的代码为：

```
$this->set('posts', $this->User->Post->find('all',array('conditions' => $conditions))); 
```

# android - android - 如何将图像上传到保管箱？

> ID：11770419
> 
> 赞同：0
> 
> 时间：2012-08-02T02:55:26.850
> 
> 标签：android, image, upload, dropbox

我正在使用 Dropbox api，但不知道如何上传图片，即使我浏览图片时，我也会不断收到未找到文件的异常。

我得到这样的图片网址（我使用浏览方法来查找图片，所以图片肯定存在）这里 uri.getPath() 是图片的路径，例如：“/external/images/media/ 536"

```
protected void photoToPostChosen(Uri uri){
    Uri photoUri = uri;
    String id = photoUri.getLastPathSegment();
    if(null != id){
        //Bitmap thumbBitmap = MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(), Long.parseLong(id), MediaStore.Images.Thumbnails.MICRO_KIND, null);
        EditText imagetextbox = (EditText) findViewById(R.id.UI_txt_image_name);
        imagetextbox.setText(uri.getPath());

    }
} 
```

然后我使用此代码将其上传到保管箱，但它一直给我找不到文件。

```
 // Uploading content.
    mySharedPreferences = getSharedPreferences("User_info_file", MODE_PRIVATE);
    String imgpath = mySharedPreferences.getString("TEXT_IMAGELOCATION_KEY", "test");
    FileInputStream inputStream = null;
    try {
        Uri path = Uri.parse(imgpath);
        File file = new File(path.toString());
        inputStream = new FileInputStream(file);
        Entry newEntry = mDBApi.putFile("/testing.txt", inputStream,
                file.length(), null, null);
        Log.i("DbExampleLog", "The uploaded file's rev is: " + newEntry.rev);
    } catch (DropboxUnlinkedException e) {
        // User has unlinked, ask them to link again here.
        Log.e("DbExampleLog", "User has unlinked.");
    } catch (DropboxException e) {
        Log.e("DbExampleLog", "Something went wrong while uploading.");
    } catch (FileNotFoundException e) {
        Log.e("DbExampleLog", "File not found.");
    } finally {
        if (inputStream != null) {
            try {
                inputStream.close();
            } catch (IOException e) {}
        }
    } 
```

有谁知道代码是否有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:10:57.727

你在你的xml文件中添加了权限吗

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# perl - Perl Net::Pcap 十六进制转储数据包会话

> ID：11770420
> 
> 赞同：0
> 
> 时间：2012-08-02T02:55:29.297
> 
> 标签：perl, packet, hexdump

我有以下由[`Net::Pcap`](https://metacpan.org/module/Net%3a%3aPcap)模块生成的信息，用于在捕获中打印感兴趣的数据包的有效负载。

下面的数据是在 Perl 中捕获的 Windows 可执行文件的摘录。

我希望能够将所有十六进制数据输出捕获到一个文件或变量中，以评估文件下载的会话数据，同时保持十六进制转储的完整性。

我遇到的问题是对于为下载文件而生成的每个数据包，它显然会产生一个十六进制转储输出。这很容易从下面的输出中通过字符串“Payload”看到，我打印每个数据包/十六进制转储输出。

我想将给定文件下载会话的所有相关数据联系在一起。我怎样才能在 Perl 中做到这一点？

```
Payload:HTTP/1.1 200 OK
Date: Fri, 15 Jun 2012 02:31:32 GMT
Server: Apache
Last-Modified: Sat, 10 Dec 2011 13:38:37 GMT
ETag: "dc44da-4d000-4b3bd04c7a2f1"
Accept-Ranges: bytes
Content-Length: 315392
Keep-Alive: timeout=15, max=99
Connection: Keep-Alive
Content-Type: application/x-msdos-program

MZ<90>^@^C^@^@^@^D^@^@^@<FF><FF>^@^@<B8>^@^@^@^@^@^@^@@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@<F8>^@^@^@^N^_<BA>^N^@<B4> <CD>!<B8>^AL<CD>!This program cannot be run in DOS mode.^M
$^@^@^@^@^@^@^@4^TGmpu)>pu)>pu)>c}@>ru)>uyI>ru)>uy&>ku)>c}t>ru)><F3>}t>uu)>pu(>
u)>uyv><DA>u)><9C>~w>qu)>uys>qu)>Richpu)>^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@PE^@^@L^A^D^@^_R<E3>N^@^@^@^@^@^@^@^@<E0>^@^O^A^K^A^G
^@<80>^C^@^@<90>^A^@^@^@^@^@g^F^C^@^@^P^@^@^@<90>^C^@^@^@@^@^@^P^@^@^@^P^@^@^D^@^@^@^@^@^@^@^D^@^@^@^@^@^@^@^@ ^E^@^@^P^@^@^@^@^@^@^C^@^@^@^@^@^P^@^@^P^@^@^@^@^P^@^@^P^@^@^@^@^@^@^P^@^@^@^@^@^@^@^@^@^@^@<A8><91>^D^@P^@^@^@^@^@^E^@<C8>^T^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@<91>^D^@H^@^@^@^@^@^@^@^@^@^@^@^@<90>^C^@<D0>^A^@^@^@^@^@^@^@^@
^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@.text^@^@^@As^C^@^@^P^@^@^@<80>^C^@^@^P^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@`.rdata^@^@<C2>^K^A^@^@<90>^C^@^@^P^A^@^@<90>^C^@^@^@^@^@^@^@^@^@^@^@^@^@@^@^@@.data^@^@^@D]^@^@^@<A0>^D^@^@^P^@^@^@<A0>^D^@^@^@^@^@^@^@^@^@^@^@^@^@@^@^@<C0>.rsrc^@^@^@<C8>^T^@^@^@^@^E^@^@ ^@^@^@<B0>^D^@^@^@^@^@^@^@^@^@^@^@^@^@@^@^@@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@Payload:^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ 
```

谢谢鲍罗丁的建议。但是，我不知道如何正确使用这个模块，很明显我仍然得到相同的输出。这是我在这个模块中使用的代码片段和打印的十六进制。正如您所看到的，打印的十六进制并没有作为一个十六进制输出捆绑在一起，而是对于我想要捆绑在一起的给定 TCP 流是两个单独的。任何帮助表示赞赏。

```
my $user_data;
my $header;
my $packet;    
my $err ='';
my $pcap = Net::Pcap::open_offline("./pcap", \$err) or die "can't open ./pcap...$err\n";
Net::Pcap::loop($pcap, -1, \&process_pkt, '');
Net::Pcap::Reassemble::loop($pcap, -1, \&rend_callback, '');
Net::Pcap::close($pcap);

my $ip;
my $tcp;
my $payload;
sub process_pkt   
{
my ($user_data,$header, $packet) = @_;
$ip = NetPacket::IP->decode(eth_strip($packet));
$tcp = NetPacket::TCP->decode($ip->{data});
$payload = $tcp->{data};

my $hexPayload = hexdump(data => $payload, start_position => 0) if length $payload;
print "Hex Payload:". $hexPayload;
} 
```

> 打印输出：
> 
> 十六进制有效负载：0x0000：47 45 54 20 2F 6D 61 63 2F 5F 62 61 73 65 5F 76：GET./mac/_base_v 0x0010：31 2F 73 63 72 69 70 74 2F 6A 71 75 65/脚本 72 十六进制： /jquery-0x0020：31 2E 36 2E 31 2E 6A 73 20 48 54 54 50 2F 31 2E：1.6.1.js.HTTP/1。0x0030：31 0D 0A 48 6F 73 74 3A 20 77 77 77 2E 6D 69 63：1..主机：.www.mic 0x0040：72 6F 73 6F 66 74 2E 63 6F 6D 0D 0A：55 73 65 7.2 ..用户 0x0050：2D 41 67 65 6E 74 3A 20 4D 6F 7A 69 6C 6C 61 2F：-代理：.Mozilla/ 0x0060：35 2E 30 20 28 4D 61 63 69 6E 74 6F 73 68 （3B .2 Macintosh;. 0x0070：49 6E 74 65 6C 20 4D 61 63 20 4F 53 20 58 20 31：Intel.Mac.OS.X.1 0x0080：30 2E 36 3B 20 72 76 3A 31 33 2E 7650 29 20 4： 0.6;.rv:13.0).Ge 0x0090：63 6B 6F 2F 32 30 31 30 30 31 30 31 20 46 69 72：cko/20100101.Fir 0x00A0：65 66 6F 78 2F 31 6 53 2E 30 6 0D 70：*/*..接受-L 0x00C0：61 6E 67 75 61 67 65 3A 20 65 6E 2D 75 73 2C 65：语言：.en-us，e 0x00D0：6E 3B 71 3D 30 2E 35 0D 0A 41 63 63 65 7 7 ：n;q=0.5..Accept- 0x00E0：45 6E 63 6F 64 69 6E 67 3A 20 67 7A 69 70 2C 20：编码：.gzip，。0x00F0：64 65 66 6C 61 74 65 0D 0A 52 65 66 65 72 65 72：放气..Referer 0x0100：3A 20 68 74 74 70 3A 2F 2F 77 77 77 2E 6D 69 63：。麦克风 0x0110：72 6F 73 6F 66 74 2E 63 6F 6D 2F 6D 61 63 2F 72：rosoft.com/mac/r 0x0120：65 6D 6F 74 65 2D 64 65 73 6B 74 6F 70 2D 桌面 - 63 6 cl 0x0130：69 65 6E 74 0D 0A 44 4E 54 3A 20 31 0D 0A 43 6F：东方..DNT：.1..Co 0x0140：6E 6E 65 63 74 69 6F 6E 3A 20 6B 65 65 70 2 :.keep-a 0x0150 : 6C 69 76 65 0D 0A 0D 0A 00 00 00 00 00 00 00 00 : live ...... Hex Payload: 0x0000 : 48 54 54 50 2F 31 2E 31 20 32 30 30 20 4F 4B 0D：HTTP/1.1.200.OK。0x0010：0A 43 61 63 68 65 2D 43 6F 6E 74 72 6F 6C 3A 20：.缓存控制：。0x0020：6D 61 78 2D 61 67 65 3D 39 30 30 0D 0A 43 6F 6E：最大年龄=900..Con 0x0030：74 65 6E 74 2D 54 79 70 65 3A 20 61 70 70 6C 6 类型： .appli 0x0040：63 61 74 69 6F 6E 2F 78 2D 6A 61 76 61 73 63 72：阳离子/x-javascr 0x0050：69 70 74 0D 0A 43 6F 6E 74 65 6E 74 2D 45.-6E 6编码 0x0060：6F 64 69 6E 67 3A 20 67 7A 69 70 0D 0A 4C 61 73：oding：.gzip..Las 0x0070：74 2D 4D 6F 64 69 66 69 65 64 3A 20 57 65 6 修改：4 .Wed，0x0080：20 30 38 20 4A 75 6E 20 32 30 31 31 20 31 38 3A：.08.Jun.2011.18：0x0090：34 35 3A 34 39 20 47 4D 5453 0D 0A 701：6 49.GMT..接受 缓存控制：。0x0020：6D 61 78 2D 61 67 65 3D 39 30 30 0D 0A 43 6F 6E：最大年龄=900..Con 0x0030：74 65 6E 74 2D 54 79 70 65 3A 20 61 70 70 6C 6 类型： .appli 0x0040：63 61 74 69 6F 6E 2F 78 2D 6A 61 76 61 73 63 72：阳离子/x-javascr 0x0050：69 70 74 0D 0A 43 6F 6E 74 65 6E 74 2D 45.-6E 6编码 0x0060：6F 64 69 6E 67 3A 20 67 7A 69 70 0D 0A 4C 61 73：oding：.gzip..Las 0x0070：74 2D 4D 6F 64 69 66 69 65 64 3A 20 57 65 6 修改：4 .Wed，0x0080：20 30 38 20 4A 75 6E 20 32 30 31 31 20 31 38 3A：.08.Jun.2011.18：0x0090：34 35 3A 34 39 20 47 4D 5453 0D 0A 701：6 49.GMT..接受 缓存控制：。0x0020：6D 61 78 2D 61 67 65 3D 39 30 30 0D 0A 43 6F 6E：最大年龄=900..Con 0x0030：74 65 6E 74 2D 54 79 70 65 3A 20 61 70 70 6C 6 类型： .appli 0x0040：63 61 74 69 6F 6E 2F 78 2D 6A 61 76 61 73 63 72：阳离子/x-javascr 0x0050：69 70 74 0D 0A 43 6F 6E 74 65 6E 74 2D 45.-6E 6编码 0x0060：6F 64 69 6E 67 3A 20 67 7A 69 70 0D 0A 4C 61 73：oding：.gzip..Las 0x0070：74 2D 4D 6F 64 69 66 69 65 64 3A 20 57 65 6 修改：4 .Wed，0x0080：20 30 38 20 4A 75 6E 20 32 30 31 31 20 31 38 3A：.08.Jun.2011.18：0x0090：34 35 3A 34 39 20 47 4D 5453 0D 0A 701：6 49.GMT..接受

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:18:16.140

看一眼[`Net::Pcap::Reassemble`](https://metacpan.org/module/Net%3a%3aPcap%3a%3aReassemble)

> 该模块对 Net::Pcap loop() 函数返回的 libpcap 数据包捕获数据中的碎片数据报进行重组

# google-closure - 如何在 Google Closure 中获取当前鼠标位置？

> ID：11770423
> 
> 赞同：1
> 
> 时间：2012-08-02T02:55:32.043
> 
> 标签：google-closure, google-closure-library

我正在使用 Google Closure javascript 库制作拖放应用程序。

如何在拖动事件中检测鼠标的当前位置？

```
var dragOverCallBack = function (e) {
  console.log(e.somehowGetMouseXPosition());
} 
```

我尝试过`e.clientX`但`e.pageX`无济于事（两者都未定义）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T03:38:31.313

我不确定为什么 e.clientX 和 e.pageX 将是未定义的，除非 e 被作为未定义传递，这意味着您的回调设置不正确。我会尝试在您的回调中运行运行 console.debug(e) 并在 chrome 的开发人员工具控制台中查看该对象。它可能会提供对传递给您的事件对象的一些见解。

除了 e.clientX 和 e.pageX 之外，还有各种其他选项可以为不同的用途提供鼠标坐标（e.offsetX、e.screenX 等），[本文](http://www.quirksmode.org/js/events_properties.html#position)很好地介绍了这些不同的坐标。你可以尝试其中的一些，看看你能不能得到任何东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T10:47:57.197

更好的方法是尝试控制您的全局对象，例如`console.log(goog)`or `console.log(goog.fx)`。您可以从闭包对象中获取对象。

# node.js - Node.js Express 3.x 将变量传递给视图

> ID：11770425
> 
> 赞同：3
> 
> 时间：2012-08-02T02:55:55.300
> 
> 标签：node.js, templates, views, express

您可以使用 app.local 和 res.locals 向视图公开数据。有人确切知道两者之间的区别是什么吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T03:39:41.397

来自 express.js API 文档：

### 应用程序.locals

> 应用程序局部变量提供给应用程序内呈现的所有模板。这对于为模板提供帮助函数以及应用程序级数据很有用。

### res.locals

> 响应局部变量的范围仅限于请求，因此仅可用于在该请求/响应周期中呈现的视图（如果有）。否则，此 API 与 app.locals 相同。

这意味着唯一的区别是 res.locals 仅在请求的生命周期内有效。

# php - 使用while时PHP中的MySql_fetch_array（）错误

> ID：11770426
> 
> 赞同：1
> 
> 时间：2012-08-02T02:56:01.463
> 
> 标签：php, mysql, loops, while-loop

好的，这是我的代码：

```
$select_status = 0;
$select_status = "<select name='status'>\n";
$select_status .= "<option value=''>SELECT ONE</option>\n";
$sdataset = mysql_query("SELECT id, name FROM phponly_category") or die(mysql_error());

while($srow=mysql_fetch_assoc($sdataset)) {
    echo implode(", ", $srow);
    echo "<br />";

    $select_status .= "<option value='".$srow['name']."'";
    $select_status .= ">".$srow['name']."</option>\n";

} // end while loop
echo "out of the loop";
$select_status .= "</select>\n";
// now insert the <select> list control into the page
echo $select_status; 
```

代码工作正常，直到最后一行中断。我无法打印*echo $select_status 。*我试图通过打印每一行来查看 SQL 查询结果发生了什么，但那里的一切看起来都很好。出于某种原因，在最后一行，*while 循环*中断，甚至*while 循环*之后的代码也没有被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:59:28.623

不要`or die(mysql_error())`在while测试中做这部分......之前做。

```
if($sdataset==false) {
    die(mysql_error());
}
while($srow=mysql_fetch_array($sdataset)) {
    $select_status .= "<option value='".$srow['name']."'".">".$srow['name']."</option>\n";
} // end while loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T03:09:08.850

当`or die()`您读取结果集的末尾时，您的 while() 循环实际上会终止脚本。mysql_fetch 将返回 false，触发`or die()`.

虽然在查询中检查错误很有用，但在获取部分你不能这样做，因为你会得到这样的误报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T03:15:47.733

使用`mysql_fetch_assoc`这样您就可以使用字段名称作为键来获取数据。

```
<?php

$conn = mysql_connect('localhost', 'username', 'password');
mysql_select_db('test');

$select_status = "<select name='status'>\n";
$select_status .= "<option value=''>SELECT ONE</option>\n";
$sdataset = mysql_query("SELECT id, name FROM phponly_category") or die(mysql_error());

while($srow=mysql_fetch_assoc($sdataset)) {
    $select_status .= "<option value='".$srow['name']."'".">".$srow['name']."</option>\n";

} // end while loop

$select_status .= "</select>\n";
echo $select_status;
?> 
```

注意：不鼓励使用此扩展。看看mysqli或PDO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T03:22:52.023

我个人不喜欢回显 html 代码，如果你的目标是验证查询是否有结果，你可以做这样的事情

```
<?php
    $sdataset = mysql_query("SELECT id, name FROM phponly_category");
    if (mysql_num_rows($sdataset) > 0) {
?>
    <select name='status'>
    <option value=''>SELECT ONE</option>
<?php
    while($srow = mysql_fetch_array($sdataset)) {
?>
    <option value='<?php echo $srow['name'] ?>'><?php echo $srow['name'] ?></option>
<?php } // end while loop ?>
    </select>
<?php
    } // end of if
    else {
        // Whatever you wanna put here
    }
?> 
```

编辑：有一个错字`mysql_num_rows`，再试一次

# c# - Detailview 列文本到 C# 中的 DateTime 类型属性字段

> ID：11770430
> 
> 赞同：0
> 
> 时间：2012-08-02T02:56:33.233
> 
> 标签：c#, datetime

您好我有一个应用程序，我试图将详细视图列文本存储到 DateTime 类型属性，如下所示

```
public DateTime StartDateTime
{
    get { return Convert.ToDateTime(detailview1.Rows[1].Cells[1].Text); }
} 
```

当 detailview1.Rows[1].Cells[1].Text 有一些不是日期格式的文本时会发生异常。像' '。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:02:52.723

首先使用 DateTime.TryParse 将文本验证为有效的日期时间。

```
DateTime d ;
DateTime.TryParse("12 Jun 2012", out d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:00:57.793

如果您知道您的字符串格式不正确，请尝试使用正则表达式来提取有效日期

```
Regex regex = new Regex(@"\d{1,2}\s+?(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\w*\s+?\d{4}"
    RegexOptions.IgnoreCase
    | RegexOptions.CultureInvariant
    | RegexOptions.IgnorePatternWhitespace
    | RegexOptions.Compiled
    );

DateTime.Parse(regex.Match(detailview1.Rows[1].Cells[1].Text).Groups["date"].Value) 
```

# c++ - 为什么将“ifstream”和“ofstream”添加到“std”中，而“fstream”可以同时满足这两个目的？

> ID：11770431
> 
> 赞同：10
> 
> 时间：2012-08-02T02:57:08.250
> 
> 标签：c++, fstream, ifstream, ofstream

使用 `std::fstream`one 可以声明类型`ifstream`和`ofstream`. 唯一的区别是，`fstream`我们需要提供`in`, `out`,`app`作为其他两个可能并不总是需要的参数。

有没有什么特别的东西`ifstream,ofstream`不能用`fstream`或者只是编码方便来完成？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T03:02:50.043

这有点像问我们为什么想要`const`你无论如何都可以从变量中读取和写入。它允许编译时检查，这是减少错误的宝贵功能。它也更具自我记录性，因为在没有构造函数调用的情况下查看声明时，您可以看到它是输入、输出还是两者兼而有之：您提到的参数通常只能在可能不可用的实现文件中看到。此外，每种类型的流可能在他们需要的数据成员上存在一些差异 - 可能使用与您的实际需求相匹配的最小功能类可以节省内存、时间初始化或检查其他变量等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T03:23:25.280

如果有的话，`fstream`那只是一种方便。特别是，您所拥有的基本上是：

```
namespace std { 
class ifstream { /* ... */ };

class ofstream { /* ... */ };

class fstream : public ifstream, public ofstream { /* ... */ };
} 
```

[显然跳过了很多不相关的细节]。

简而言之，`fstream`提供了 a 的所有输入能力和 a 的所有输出`ifstream`能力。没有and ， an （至少在任何类似于其当前形式的情况下）根本不存在。`ofstream``ifstream``ofstream``ifstream``ofstream``fstream`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T03:00:28.593

整个要点是通用的。如果你只需要读取一个文件，你可以把一个ifstream作为参数，然后任何支持读取的东西都可以传入，即使它是不可写的。反之亦然。

# android - 在android中使用cocos 2D从一个场景移动到另一个场景（多级）

> ID：11770432
> 
> 赞同：2
> 
> 时间：2012-08-02T02:57:13.483
> 
> 标签：android, cocos2d-iphone, cocos2d-android, multi-level

我想制作一个有关卡的游戏。这意味着在第一关中用户必须杀死一些目标，如果他赢了，他会通过新目标和新背景进入下一个关卡。我用[这个游戏教程！](http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/)

我有这些课程---->

```
package game.wael.ialhi;

 import org.cocos2d.layers.CCScene;
 import org.cocos2d.nodes.CCDirector;
 import org.cocos2d.opengl.CCGLSurfaceView;
 import org.cocos2d.sound.SoundEngine;
 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.Window;
 import android.view.WindowManager;
 import android.widget.Toast;

 public class SimpleGame extends Activity{
 protected CCGLSurfaceView _glSurfaceView;

 @Override
 public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);

 requestWindowFeature(Window.FEATURE_NO_TITLE);
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON,
        WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

_glSurfaceView = new CCGLSurfaceView(this);

setContentView(_glSurfaceView);
  }

 @Override
public void onStart()
{
super.onStart();

CCDirector.sharedDirector().attachInView(_glSurfaceView);

 CCDirector.sharedDirector().setDeviceOrientation(CCDirector
        .kCCDeviceOrientationLandscapeLeft);

CCDirector.sharedDirector().setDisplayFPS(true);

CCDirector.sharedDirector().setAnimationInterval(1.0f / 60.0f);

CCScene scene = GameLayer.scene();
CCDirector.sharedDirector().runWithScene(scene);
}

 @Override
  public void onPause(){
  super.onPause();

CCDirector.sharedDirector().pause();
SoundEngine.sharedEngine().stopSound();
  }

  @Override
  public void onResume(){
 super.onResume();

CCDirector.sharedDirector().resume();
  }

  @Override
 public void onStop(){
super.onStop();

CCDirector.sharedDirector().end();
SoundEngine.sharedEngine().stopSound();
 }
} 
```

我在这个 GameLayer 类中进行了一些修改。在更新方法中，我添加了这些 ligne，以便当用户获胜时，他传递到下一个场景（GameLayer1）---->

```
 CCScene scene=GameLayer1.scene();                           
 CCDirector.sharedDirector().runWithScene(scene); 
```

这是完整的课程------>

```
 package game.wael.ialhi;

 public class GameLayer extends CCColorLayer{
 protected ArrayList<CCSprite> _targets;
  protected ArrayList<CCSprite> _projectiles;
 protected int _projectilesDestroyed;
 public static int nb;

 public static CCScene scene() {
CCScene scene = CCScene.node();
CCColorLayer layer = new GameLayer(ccColor4B.ccc4(255, 255, 255, 255));

scene.addChild(layer);

return scene;
  }

  protected GameLayer(ccColor4B color){
super(color);

this.setIsTouchEnabled(true);

_targets = new ArrayList<CCSprite>();
_projectiles = new ArrayList<CCSprite>();
_projectilesDestroyed = 0;

CGSize winSize = CCDirector.sharedDirector().displaySize();
CCSprite player = CCSprite.sprite("Player.png");

player.setPosition(CGPoint.ccp(player.getContentSize().width / 2.0f,
        winSize.height / 2.0f));

addChild(player);

// Handle sound
Context context = CCDirector.sharedDirector().getActivity();
SoundEngine.sharedEngine().preloadEffect(context, R.raw.pew_pew_lei);
SoundEngine.sharedEngine().playSound(context, R.raw.background_music_aac,
        true);

this.schedule("gameLogic", 1.0f);
this.schedule("update");
   }

  @Override
  public boolean ccTouchesEnded(MotionEvent event){
// Choose one of the touches to work with
CGPoint location =
        CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), 
        event.getY()));

// Set up initial location of projectile
CGSize winSize = CCDirector.sharedDirector().displaySize();
CCSprite projectile = CCSprite.sprite("Projectile.png");

projectile.setPosition(20, winSize.height / 2.0f);

// Determine offset of location to projectile
int offX = (int)(location.x - projectile.getPosition().x);
int offY = (int)(location.y - projectile.getPosition().y);

// Bail out if we are shooting down or backwards
if (offX <= 0)
    return true;

// Ok to add now - we've double checked position
addChild(projectile);

projectile.setTag(2);
_projectiles.add(projectile);

// Determine where we wish to shoot the projectile to
int realX = (int)(winSize.width + (projectile.getContentSize().width /
         2.0f));
float ratio = (float)offY / (float)offX;
int realY = (int)((realX * ratio) + projectile.getPosition().y);
CGPoint realDest = CGPoint.ccp(realX, realY);

// Determine the length of how far we're shooting
int offRealX = (int)(realX - projectile.getPosition().x);
int offRealY = (int)(realY - projectile.getPosition().y);
float length = (float)Math.sqrt((offRealX * offRealX) + (offRealY * 
         offRealY));
float velocity = 480.0f / 1.0f; // 480 pixels / 1 sec
float realMoveDuration = length / velocity;

// Move projectile to actual endpoint
projectile.runAction(CCSequence.actions(
        CCMoveTo.action(realMoveDuration, realDest),
        CCCallFuncN.action(this, "spriteMoveFinished")));

// Pew!
Context context = CCDirector.sharedDirector().getActivity();
SoundEngine.sharedEngine().playEffect(context, R.raw.pew_pew_lei);

return true;
 }

  public void gameLogic(float dt){
addTarget();
  }

  public void update(float dt){
ArrayList<CCSprite> projectilesToDelete = new ArrayList<CCSprite>();

for (CCSprite projectile : _projectiles)
{
    CGRect projectileRect = CGRect.make(projectile.getPosition().x 
          - (projectile.getContentSize().width / 2.0f),
                                        projectile.getPosition().y -  
        (projectile.getContentSize().height / 2.0f),
                                        projectile.getContentSize().width,
                                        projectile.getContentSize().height);

    ArrayList<CCSprite> targetsToDelete = new ArrayList<CCSprite>();

    for (CCSprite target : _targets)
    {
        CGRect targetRect = CGRect.make(target.getPosition().x -
             (target.getContentSize().width),
                                        target.getPosition().y - 
             (target.getContentSize().height),
                                        target.getContentSize().width,
                                        target.getContentSize().height);

        if (CGRect.intersects(projectileRect, targetRect))
            targetsToDelete.add(target);
    }

    for (CCSprite target : targetsToDelete)
    {
        _targets.remove(target);
        removeChild(target, true);
    }

    if (targetsToDelete.size() > 0)
        projectilesToDelete.add(projectile);
}
int k=0;
for (CCSprite projectile : projectilesToDelete)
{
    _projectiles.remove(projectile);
    removeChild(projectile, true);

    if (++_projectilesDestroyed > 4)
    {
        _projectilesDestroyed = 0;
        CCDirector.sharedDirector().replaceScene(GameOverLayer.
                        scene("You Win!",255,255,255,255));
        nb=1;
        /*Thread timer = new Thread() {
            @Override
            public void run() {
                try {
                    sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } finally {

       // i add these lignes to pass to the next scene if the user wins     
CCScene scene = GameLayer1.scene();
CCDirector.sharedDirector().runWithScene(scene);

                }
            }
        };
        timer.start();*/

    }
 }

 }

  protected void addTarget(){
Random rand = new Random();
CCSprite target = CCSprite.sprite("Target.png");

// Determine where to spawn the target along the Y axis
CGSize winSize = CCDirector.sharedDirector().displaySize();
int minY = (int)(target.getContentSize().height / 2.0f);
int maxY = (int)(winSize.height - target.getContentSize().height / 2.0f);
int rangeY = maxY - minY;
int actualY = rand.nextInt(rangeY) + minY;

// Create the target slightly off-screen along the right edge,
// and along a random position along the Y axis as calculated above
target.setPosition(winSize.width + (target.getContentSize().width / 2.0f),
         actualY);
addChild(target);

target.setTag(1);
_targets.add(target);

// Determine speed of the target
int minDuration = 2;
int maxDuration = 4;
int rangeDuration = maxDuration - minDuration;
int actualDuration = rand.nextInt(rangeDuration) + minDuration;

// Create the actions
CCMoveTo actionMove = CCMoveTo.action(actualDuration,
       CGPoint.ccp(-target.getContentSize().width / 2.0f, actualY));
CCCallFuncN actionMoveDone = CCCallFuncN.action(this, 
        "spriteMoveFinished");
CCSequence actions = CCSequence.actions(actionMove, actionMoveDone);

target.runAction(actions);
 }

 public void spriteMoveFinished(Object sender){
CCSprite sprite = (CCSprite)sender;

if (sprite.getTag() == 1)
{
    _targets.remove(sprite);

    _projectilesDestroyed = 0;
    CCDirector.sharedDirector().replaceScene(GameOverLayer.
                scene("You Lose :(",255,255,255,255));
    nb=0;
}
else if (sprite.getTag() == 2)
    _projectiles.remove(sprite);

this.removeChild(sprite, true);
    }
  } 
```

但是当用户只赢得背景变化时，新的精灵永远不会出现..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T13:58:34.900

*我希望这能帮到您。我需要创建 Level2.class 并更改背景图像。使用 getter 和 setter 在类中设置级别值。*

```
if (Score.getLevel() == 1) {

            CCScene scene = Level2.scene();
            CCDirector.sharedDirector().replaceScene(
                    CCSlideInRTransition.transition(.5f, scene));

        } 
```

*从 Level 屏幕设置 Level 值。*

# php - base64编码问题

> ID：11770438
> 
> 赞同：1
> 
> 时间：2012-08-02T02:58:13.663
> 
> 标签：php, websocket, base64

这可能是一个明显的答案，但我无法弄清楚......

我正在阅读这个维基百科条目，[http](http://en.wikipedia.org/wiki/WebSocket#WebSocket_protocol_handshake) ://en.wikipedia.org/wiki/WebSocket#WebSocket_protocol_handshake ，在示例中它说 Base64 编码的字符串`1d29ab734b0c9585240069a6e4e3e91b61da1969`是`HSmrc0sMlYUkAGmm5OPpG2HaGWk=`

现在使用 PHP 函数`base64_encode`，我得到了不同的输出。我在一些在线 base64 编码器上也得到了不同的结果！维基百科到底是从哪里得到这个 base64 值的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T03:07:38.263

`1d29ab734b0c9585240069a6e4e3e91b61da1969`是您需要对 sha1 二进制值进行 base64 编码的十六进制字符串。

```
<?= base64_encode(pack('H*','1d29ab734b0c9585240069a6e4e3e91b61da1969'))?> 
```

[http://ideone.com/K0d6y](http://ideone.com/K0d6y)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:59:11.417

或者你可以简单地；

```
base64_encode(sha1(<shavalue>,true)); 
```

# facebook - Facebook 应用垃圾邮件阈值

> ID：11770439
> 
> 赞同：-4
> 
> 时间：2012-08-02T02:58:27.643
> 
> 标签：facebook, spam, threshold

如果应用程序超过垃圾邮件阈值会发生什么？应用会被下架并被列入黑名单吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T05:15:11.173

它因应用程序而异，因此无法保证，但通常您可以期待以下一项或全部 -

*   限制对某些 API 的访问，尤其是那些你要最大化垃圾邮件报告的 API。
*   从 App Center 中删除（如果相关）
*   删除有问题的应用程序。
*   删除您作为管理员的所有应用程序
*   删除您的 Facebook 帐户

# f# - 如何在 F# 中编写类似 ZipN 的函数？

> ID：11770441
> 
> 赞同：6
> 
> 时间：2012-08-02T02:58:45.833
> 
> 标签：f#

我想创建一个具有签名的函数，该函数`seq<#seq<'a>> ->seq<seq<'a>>`类似于 Zip 方法，采用任意数量的输入序列（而不是 Zip2 和 Zip3 中的 2 或 3 个）并返回序列序列而不是元组作为结果。

也就是说，给定以下输入：

```
[[1;2;3];
 [4;5;6];
 [7;8;9]] 
```

它将返回结果：[[1;4;7]; [2;5;8]; [3;6;9]]

除了序列而不是列表。

我对 F# 很陌生，但我创建了一个可以满足我需求的函数，但我知道它可以改进。它不是尾递归，它似乎可以更简单，但我还不知道如何。我还没有找到一种在`int list list`没有第二个函数的情况下以我想要的方式（接受，例如，作为输入）获取签名的好方法。

我知道这可以直接使用枚举器来实现，但我有兴趣以一种功能性的方式来实现。

这是我的代码：

```
let private Tail seq = Seq.skip 1 seq
let private HasLengthNoMoreThan n = Seq.skip n >> Seq.isEmpty

let rec ZipN_core = function
    | seqs when seqs |> Seq.isEmpty -> Seq.empty
    | seqs when seqs |> Seq.exists Seq.isEmpty -> Seq.empty
    | seqs ->
        let head = seqs |> Seq.map Seq.head
        let tail = seqs |> Seq.map Tail |> ZipN_core
        Seq.append (Seq.singleton head) tail

// Required to change the signature of the parameter from seq<seq<'a> to seq<#seq<'a>>
let ZipN seqs = seqs |> Seq.map (fun x -> x |> Seq.map (fun y -> y)) |> ZipN_core 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T14:42:01.247

```
let zipn items = items |> Matrix.Generic.ofSeq |> Matrix.Generic.transpose 
```

或者，如果你真的想自己写：

```
let zipn items = 
  let rec loop items =
    seq {
      match items with
      | [] -> ()
      | _ -> 
        match zipOne ([], []) items with
        | Some(xs, rest) -> 
          yield xs
          yield! loop rest
        | None -> ()
    }
  and zipOne (acc, rest) = function
    | [] -> Some(List.rev acc, List.rev rest)
    | []::_ -> None
    | (x::xs)::ys -> zipOne (x::acc, xs::rest) ys
  loop items 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-05T17:00:19.577

因为这似乎是`zipn`在 f# 中编写 a 的规范答案，所以我想添加一个“纯”`seq`解决方案，它可以保持惰性，并且不会像[`Matrix.transpose`](https://stackoverflow.com/questions/3016139/help-me-to-explain-the-f-matrix-transpose-function)函数一样强迫我们一次将完整的源序列加载到内存中。在某些情况下，这非常重要，因为它 a) 更快并且 b) 适用于包含 100 MB 数据的序列！

这可能是我一段时间以来编写的最不惯用的 f# 代码，但它完成了工作（嘿，如果你不能用它们来用函数式语言编写程序代码，为什么在 f# 中会有序列表达式）。

```
 let seqdata = seq {
  yield Seq.ofList [ 1; 2; 3 ]
  yield Seq.ofList [ 4; 5; 6 ]
  yield Seq.ofList [ 7; 8; 9 ]
}

let zipnSeq (src:seq<seq<'a>>) = seq {
  let enumerators = src |> Seq.map (fun x -> x.GetEnumerator()) |> Seq.toArray
  if (enumerators.Length > 0) then
    try 
      while(enumerators |> Array.forall(fun x -> x.MoveNext())) do 
        yield enumerators |> Array.map( fun x -> x.Current)
    finally 
      enumerators |> Array.iter (fun x -> x.Dispose())
}

zipnSeq seqdata |> Seq.toArray

val it : int [] [] = [|[|1; 4; 7|]; [|2; 5; 8|]; [|3; 6; 9|]|] 
```

顺便说一句，传统的矩阵转置比@Daniel 的答案简洁得多。但是，它需要一个`list`或`LazyList`两个最终都将在内存中具有完整的序列。

```
let rec transpose = 
  function 
  | (_ :: _) :: _ as M -> List.map List.head M :: transpose (List.map List.tail M)
  | _ -> [] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T11:32:47.157

为了处理不同长度的子列表，我使用选项类型来发现元素是否用完。

```
let split = function
    | []    -> None,    []
    | h::t  -> Some(h), t

let rec zipN listOfLists =
    seq { let splitted = listOfLists |> List.map split

          let anyMore = splitted |> Seq.exists (fun (f, _) -> f.IsSome)

          if anyMore then
              yield splitted |> List.map fst
              let rest = splitted |> List.map snd
              yield! rest |> zipN } 
```

这将映射

```
let ll = [ [ 1; 2; 3 ];
           [ 4; 5; 6 ];
           [ 7; 8; 9 ] ] 
```

到

```
seq
    [seq [Some 1; Some 4; Some 7]; seq [Some 2; Some 5; Some 8];
     seq [Some 3; Some 6; Some 9]] 
```

和

```
let ll = [ [ 1; 2; 3 ];
           [ 4; 5; 6 ];
           [ 7; 8 ] ] 
```

到

```
seq
    [seq [Some 1; Some 4; Some 7]; seq [Some 2; Some 5; Some 8];
     seq [Some 3; Some 6; null]] 
```

这与您的方法不同，但避免使用您之前的一些操作（例如 Seq.skip、Seq.append），您应该小心这些操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-31T15:41:04.023

我意识到这个答案不是很有效，但我确实喜欢它的简洁性：

```
[[1;2;3]; [4;5;6]; [7;8;9]] 
    |> Seq.collect Seq.indexed 
    |> Seq.groupBy fst 
    |> Seq.map (snd >> Seq.map snd);; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-15T21:48:54.183

另外一个选项：

```
let zipN ls =
    let rec loop (a,b) =
        match b with
        |l when List.head l = [] -> a
        |l ->
            let x1,x2 =
                (([],[]),l)
                ||> List.fold (fun acc elem ->
                    match acc,elem with
                    |(ah,at),eh::et -> ah@[eh],at@[et]
                    |_ -> acc)
            loop (a@[x1],x2)
    loop ([],ls) 
```

# css - IE定位div布局问题

> ID：11770442
> 
> 赞同：0
> 
> 时间：2012-08-02T02:58:48.220
> 
> 标签：css, internet-explorer, css-position

我知道这不是一个罕见的问题，但我在所有其他浏览器中工作的布局在 IE（8 和 9）中完全崩溃了。

我不知道协议是在这里发布所有代码还是只是一个链接......

它是：[www.megadyne.com/safezone/index.php](http://www.megadyne.com/safezone/index.php)

我认为相关的部分是我有一个容器 div，它是`position:relative`里面的一堆 div，它们是 position:absolute 并且内部 div 在 IE 中被推出。

布局还有很多其他问题——仅在 IE 中，但希望它们是相关的？

提前致谢！

布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:05:38.950

看看[http://html5boilerplate.com/](http://html5boilerplate.com/)的 css，在你输入代码之前，它很好地标准化了浏览器的所有 css。尝试使用他们的 css 并将您的 css @inline 放入他们的 css 中，它会要求您提供自定义 css，并查看是否可以解决问题。

如果这不起作用，您可以使用 HTML5 代码为 IE 创建一个单独的 css 文件

```
//If browser is IE version 8 or greater
<!--[if gte IE 8]>
<link rel="stylesheet" type="text/css" href="iespecific.css" />
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:34:44.630

原来我的声明有问题。解决了这个问题，世界又恢复了。

# objective-c - 在静态单元格上使用 UIDatePicker

> ID：11770443
> 
> 赞同：1
> 
> 时间：2012-08-02T02:58:48.280
> 
> 标签：objective-c, ios, uistoryboard

我想在**静态单元格**上显示从 UIDatePicker 挑选的日期。

![屏幕](../Images/2f844baf846b439c3d51b56f00c10ef3.png)

问题代码如下。我想`self.label.text`通过使用 UIDatePicker 更改日期来更改，但它不会改变。

```
- (IBAction)inputDate:(id)sender {
    self.label.text = [NSString stringWithFormat:@"%@", self.datePicker.date];
} 
```

*   方法`inputDate:`连接到 UIDatePicker。
*   属性`datePicker`也连接到 UIDatePicker。

有什么特定的方法可以改变静态单元格吗？谢谢你的好心。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:08:08.620

我建议您将要更改的单元格作为 ivar 存储在表格视图中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    //...
    // configure your birth date cell
    self.birthDateCell = cell;
    //...
} 
```

然后你的方法看起来像：

```
- (IBAction)inputDate:(id)sender {
    self.birthDateCell.label.text = [NSString stringWithFormat:@"%@", sender.date];
} 
```

那应该这样做。此外，请确保您使用日期选择器的适当事件操作调用 inputDate 函数。

**编辑：**此外，您可能需要重新加载单元格以显示数据，如下所示：

```
- (IBAction)inputDate:(id)sender {
    self.label.text = [NSString stringWithFormat:@"%@", sender.date];
    [self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0] 
                      withRowAnimation:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:04:47.757

仅一行代码就解决了问题。Stunner 的建议对这个最终答案非常有帮助。

```
- (IBAction)inputDate:(id)sender {
    self.label.text = [NSString stringWithFormat:@"%@", self.datePicker.date];
    [self.tableView reloadData]; // <- add this row !
} 
```

![截屏](../Images/c453ff1a5526684793ed1a1c8662a2ef.png)

# haskell - 使用模板 haskell 获取范围内的所有函数/值

> ID：11770449
> 
> 赞同：4
> 
> 时间：2012-08-02T02:59:23.957
> 
> 标签：haskell, template-haskell

使用模板haskell，有没有办法列出范围内的所有函数？就像是

```
allVarsInScope :: Q [Name] 
```

我想要做的是获取以 test_ 开头的所有导入函数的列表，并自动运行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:59:09.083

遗憾的是，在 Template Haskell 中没有这样的反射功能，但有一些变通方法。但是，在自己编写这样的东西之前，我建议尝试[test-framework-th](http://hackage.haskell.org/package/test-framework-th)包，它已经为以 . 开头的 HUnit 测试`case_`和以`prop_`.

在底层，这个包使用[language-haskell-extract](http://hackage.haskell.org/package/language-haskell-extract)包，它本质上是在模块上运行它自己的解析传递来挑选定义。这是一个有点老套的解决方案，但在实践中效果很好。但是，它确实带来了相当多的依赖项，并且额外的解析过程可能会减慢您的构建速度。

# c - “__attribute__((packed,aligned(4)))”是什么意思

> ID：11770451
> 
> 赞同：151
> 
> 时间：2012-08-02T02:59:30.683
> 
> 标签：c, gcc

它是C语言。它是这样写的：

```
typedef struct __attribute__((packed, aligned(4))) Ball {
    float2 delta;
    float2 position;
    //float3 color;
    float size;
    //int arcID;
    //float arcStr;
} Ball_t;
Ball_t *balls; 
```

请告诉我它是什么意思，以及如何使用这个关键字。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-08-02T06:44:40.723

在回答之前，我想给你一些来自维基的数据

* * *

**数据结构对齐**是数据在计算机内存中排列和访问的方式。它由两个独立但相关的问题组成：*数据对齐*和*数据结构填充*。

当现代计算机读取或写入内存地址时，它将以字大小的块（例如 32 位系统上的 4 字节块）执行此操作。***数据对齐***意味着将数据放置在等于字大小的某个倍数的内存偏移处，由于 CPU 处理内存的方式，这会提高系统的性能。

为了对齐数据，可能需要在最后一个数据结构的结尾和下一个数据结构的开头之间插入一些无意义的字节，这就是***数据结构填充***。

* * *

gcc 提供了禁用结构填充的功能。即在某些情况下避免这些无意义的字节。考虑以下结构：

```
typedef struct
{
     char Data1;
     int Data2;
     unsigned short Data3;
     char Data4;

}sSampleStruct; 
```

`sizeof(sSampleStruct)`将是 12 而不是 8。由于结构填充。默认情况下，在 X86 中，结构将被填充为 4 字节对齐：

```
typedef struct
{
     char Data1;
     //3-Bytes Added here.
     int Data2;
     unsigned short Data3;
     char Data4;
     //1-byte Added here.

}sSampleStruct; 
```

我们可以使用`__attribute__((packed, aligned(X)))`坚持特定（X）大小的填充。X 应该是 2 的幂。参考[这里](https://stackoverflow.com/questions/11667181/why-does-padding-have-to-be-a-power-of-two)

```
typedef struct
{
     char Data1;
     int Data2;
     unsigned short Data3;
     char Data4;

}__attribute__((packed, aligned(1))) sSampleStruct; 
```

所以上面指定的 gcc 属性不允许结构填充。所以大小将是 8 个字节。

如果您希望对所有结构做同样的事情，我们可以简单地将对齐值推送到堆栈使用`#pragma`

```
#pragma pack(push, 1)

//Structure 1
......

//Structure 2
......

#pragma pack(pop) 
```

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2012-08-02T03:03:27.917

*   `packed`意味着它将使用尽可能小的空间`struct Ball`- 即它将字段填充在一起而无需填充
*   `aligned`意味着每个`struct Ball`都将从 4 字节边界开始 - 即对于 any `struct Ball`，它的地址可以除以 4

这些是 GCC 扩展，不是任何 C 标准的一部分。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-08-02T03:04:45.543

该属性`packed`意味着编译器不会在`struct`. 填充通常用于使字段与其自然大小对齐，因为某些架构会对未对齐的访问施加惩罚或根本不允许这样做。

`aligned(4)`意味着该结构应与可被 4 整除的地址对齐。

# c# - 在第一个鼠标事件已经触发时触发一个特殊的鼠标事件

> ID：11770460
> 
> 赞同：-1
> 
> 时间：2012-08-02T03:01:51.347
> 
> 标签：c#, .net, winforms, window

现在我有一个 mousedown 事件触发，同时我也想触发我的 mousemove 事件。但是这样做：`this.capture = false;`将触发所有鼠标事件。我想要的只是在鼠标按下事件触发时触发鼠标移动事件（特定事件）；

思考的方法是。我希望在触发事件 A 时触发事件 B（不是任何事件）

我想到了多线程。但是我没有足够的关于多线程的信息来继续做。因此，如果这是需要做的，任何人都可以为我提供一些编码供我参考吗？非常感谢您的阅读。

* * *

而且我知道你们在想什么：“为什么不直接在 mousedown 中调用鼠标移动事件” 好吧，我试过这样做，但是 mouseeventarg 没有更新，换句话说，鼠标移动的鼠标位置仍然保持不变一个恒定的位置，因为在我的情况下捕获仍然是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:11:53.043

可能发生的情况是，由于您正在移动控件，因此鼠标相对于控件的位置是恒定的，这就是 mouseeventarg 不更新的原因。在 MouseDown 上，您应该保存控件的初始位置，并且在调用 MouseMove 时，您应该将 currentPosition.Left - initialPosition.Left 添加到鼠标 X，并将 .Top 用于 Y。

触发事件时，创建一个新的 MouseEventArgs 对象：

```
int newX = oldMea.X + Control.Left - initialPosition.Left;
int newY = oldMea.Y + Control.Top - initialPosition.Top;
var newMea = new MouseEventArgs(oldMea.Button, newX, newY, oldMea.Delta); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T04:37:17.843

我是怎么做到的，我使用另一个计时器来替换鼠标移动事件，我简单地使用全局屏幕鼠标位置来定位鼠标按下事件期间我想要的任何位置，这可以模拟鼠标拖动动作。是的，我也许应该在我的代码开头使用鼠标拖动。感谢大家的帮助。

# html - 离线存储 - 不缓存 HTML 页面

> ID：11770461
> 
> 赞同：1
> 
> 时间：2012-08-02T03:02:01.867
> 
> 标签：html, offline, cache-manifest

我在我的网站上添加了一个缓存清单文件，用于缓存静态内容和更快的加载时间。但是，默认情况下，引用缓存清单文件的页面也会被缓存。我想缓存图像、css 和 js 文件之类的东西，但我不想缓存页面本身，因为它是动态的并且由 PHP 生成。

有没有办法缓存页面上的静态资源，而不是实际页面本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:24:37.877

浏览器应该已经基于这些资源（ , 等）的 HTTP 响应中的缓存标头缓存静态资源`cache-control`，`expires`前提是这些标头存在。它们应该看起来像这样：

```
cache-control:private, max-age=31536000
date:Thu, 02 Aug 2012 14:22:25 GMT
expires:Thu, 02 Aug 2012 14:22:25 GMT 
```

您应该能够使用浏览器的内置开发人员工具、插件或扩展（如 FireBug）或调试代理（如 Fiddler 或 Charles）来查看这些标头。如果它们不存在，许多 HTTP 服务器可以配置为根据您指定的规则自动包含这些标头。如果做不到这一点，您可以实现自己的“处理程序”，它将为资源提供服务并附加触发浏览器缓存所需的标头。

使用 HTML5 缓存清单将向有能力的浏览器发出该页面/应用程序应该可以离线使用的信号。浏览器将存储页面以及清单中引用的项目，以便在没有网络连接的情况下显示它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:25:11.350

您可以通过将文件添加到`NETWORK`缓存清单的部分来强制 Web 浏览器始终下载文件：

```
NETWORK:
index.php   # index.php will always be downloaded 
```

无论如何，缓存清单是为了允许 HTML5 应用程序脱机工作，所以我可能不建议这样做：您的应用程序将无法脱机工作。

# jquery - 如果您不知道成对的名称，则显示 json 字符串？

> ID：11770462
> 
> 赞同：0
> 
> 时间：2012-08-02T03:02:10.760
> 
> 标签：jquery, json

我有一个 json 对象（我知道，从技术上讲，它不是`object`），但我不知道名称/值对中的名称。我怎样才能浮出水面？我试过类似的东西，`alert(jsonObj[0].innerHTML());`但那不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:02:04.837

控制台.log(jsonObj); 在 Firefox 中就是它！谢谢吉姆苏！

# php - 数组 _POST 变量的单独迭代

> ID：11770463
> 
> 赞同：0
> 
> 时间：2012-08-02T03:02:22.287
> 
> 标签：php, if-statement, foreach

我在设计用于将固定装置插入体育联盟数据库的表单时遇到了一些问题。

上一页包含一个通过 _POST "area"/"division"/"season" 定义的表单，并包含一组灯具字段的迭代（到十个）循环，这些字段被定义为具有数组名称，如“hometeam[$i ]"、"awayteam[$i]" 等等。

在处理灯具输入的页面上，我需要从 $_POST 数组中提取表单的每个单独迭代——即“hometeam[1]”“awayteam[1]”等等——并将其插入到MYSQL 数据库在移动到下一个之前。我对 foreach 和 if 子句完全不知所措，所以我认为最好在这里问。

```
<?php
$a=1;
while($a<11){
foreach($_POST as $key){
if(is_array($key))
{foreach($key as $value1=>$value2){
    if($value1=$a){
    if($_POST='hometeam')$home_id=$value2;
    else if($_POST='awayteam')$away_id=$value2;
    else if($_POST='day')$day=$value2;
    else if($_POST='month')$month=$value2;
    else if($_POST='year')$year=$value2;
    else if($_POST='hour')$hour=$value2;
    else if($_POST='mins')$mins=$value2;}
    $date = ($year . "-" . $month . "-" . $day);
    $time = (($hour) . ":" . ($mins) . ":00");
    $enter_query = "INSERT INTO matches (home_id, away_id, date, time, league_id) VALUES ('$home_id', '$away_id', '$date', '$time', '$league_id'";
    if($hour != "00"){
$enter_result = mysql_query($enter_query);
}}}

}
$a++;
}
?> 
```

如果有人能指出我在这里公然出错的地方，我将不胜感激。我敢肯定这并不意味着这么难，但我很慌张，看不到我输入的内容，而且我不确定我的知识是否准确。

在数组上运行 print_r 会得到以下结构：

```
Array ( [area] => 1 [season] => 2 [division] => 1 [hometeam]
=> Array ( [1] => 17 [2] => 2 [3] => 12 [4] => 17 [5] => 17
[6] => 17 [7] => 17 [8] => 17 [9] => 17 [10] => 17 ) [awayteam]
=> Array ( [1] => 6 [2] => 4 [3] => 10 [4] => 17 [5] 
```

其中相同的 10 倍结构继续索引为主队、客队、日、月、年、小时、分钟的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:52:03.250

您也可以使用 php 变量来创建其他 php 变量。
因此，要将 post 变量转换为相应的变量，请将变量放在“${$variable}”

中，如果可以的话，我还建议您将年、月、日作为任何日期**字符串**传递并
使用**date(" Ymd",strtotime($dateStr))**来格式化它。

您还可以使用 php date 和 mktime 来格式化您的时间，而不是连接 **date("H:i:00",mktime($hour,$mins))**；

另外，确保你清理你的输出 [http://www.php-developer.org/best-practices-when-sanitizing-post-to-prevent-mysql-and-xss-attacks/](http://www.php-developer.org/best-practices-when-sanitizing-post-to-prevent-mysql-and-xss-attacks/)

```
for ($ix=0; $ix<11; $ix++) {
    foreach ($_POST as $key=>$stat) {
        // If it is an array, extract value according to index ($ix)
        /* Update
        if(is_array($stat))
            ${$key}=sanitize_str($key[$stat][$ix]);
        else
            ${$key}=sanitize_str($key[$stat]);
        */
        //UPDATE!
        if(is_array($stat))
            ${$key}=sanitize_str($stat[$ix]);
        else
            ${$key}=sanitize_str($stat);
    }
    // If you pass date as separate values
    $date = $year."-".$month."-".$day;
    // If you pass date as a sting, use
    // $date=date("Y-m-d",strtotime($date));
    $time = $hour.":".$mins.":00");

    $enter_query = "INSERT INTO matches (home_id, away_id, date, time, league_id) 
                VALUES ('$home_id', '$away_id', '$date', '$time', '$league_id')";
    if($hour != "00"){
        $enter_result = mysql_query($enter_query);
    }
}

function sanitize_str($data){
    $data=trim($data);
    $data=htmlspecialchars($data);

    $data = mysql_real_escape_string($data);
    return $data;
} 
```

我还没有完全测试过这个，但它应该可以工作。
在 ${$key} 行中，如果 $key 是值“hometeam”，则 ${$key} 变为 ${hometeam}，这与说 $hometeam 相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:27:05.823

`$_POST`是一个关联数组，因此可以通过键名访问其值，例如`$_POST['hometeam']`. 这将包含每个值的数组`hometeam[]`。

我看到的第二件事是您需要记住 = 运算符用于分配值，而 == 用于比较。所以 if ($value = $a) 会将 $a 分配给 $value 并返回结果，而不是逻辑测试。

您应该考虑用选择块替换 if/else 的大链。但这是可选的，我将其保留在您的示例中。

我最后的建议是，你不必有空格，它确实可以在代码不能正常工作时更容易审查代码。

我还没有测试过这段代码，但这就是我将如何修改你所拥有的。

```
<?php
    $a=1;
    while ($a<11) {
        foreach ($_POST as $key => $value) {
            if (isarray($value)) {
                foreach ($value as $value1 => $value2) {
                    if ($value1 == $a){
                        if ($key == 'hometeam') { $home_id = $value2; }
                        else if($key == 'awayteam') { $away_id = $value2; }
                        else if($key == 'day') { $day = $value2; }
                        else if($key == 'month') { $month = $value2; }
                        else if($key == 'year') { $year = $value2; }
                        else if($key == 'hour') { $hour = $value2; }
                        else if($key == 'mins'){ $mins = $value2;}
                        $date = ($year . "-" . $month . "-" . $day);
                        $time = (($hour) . ":" . ($mins) . ":00");
                        $enter_query = "INSERT INTO matches (home_id, away_id, date, time, league_id) VALUES ('$home_id', '$away_id', '$date', '$time', '$league_id')";
                        if ($hour != "00"){
                            $enter_result = mysql_query($enter_query);
                        }
                }
            }

        }
        $a++;
    }
?> 
```

我希望这至少能让你走上正轨。

编辑：我已经对此进行了一些重构。它不会检查表单上返回的内容（这是一个安全问题），但这超出了这个问题的范围。

```
<?php
    $a=1;
    while ($a<11) {

        $date = ($_POST['day'][$a] "-" . $_POST['month'][$a] . "-" . $_POST['day'][$a]);
        $time = ($_POST['hour'][$a] . ":" . $_POST['mins'][$a] . ":00");
        $hometeam = $_POST['hometeam'][$a];
        $awayteam = $_POST['awayteam'][$a];
        $enter_query = "INSERT INTO matches (home_id, away_id, date, time, league_id) VALUES ('$hometeam', '$awayteam', '$date', '$time', '$league_id')";
        if ($_POST['hour'][$a] != "00"){
            $enter_result = mysql_query($enter_query);
        }
        $a++;
    }
?> 
```

我看不到league_id 来自哪里。如果它是 $_POST 的一部分，您可以以相同的方式引用它（如果它不是数组，则不要使用 [$a]）。

# javascript - 动态变量名语法

> ID：11770474
> 
> 赞同：0
> 
> 时间：2012-08-02T03:03:14.987
> 
> 标签：javascript, jquery

另一个让我陷入困境的新手问题。

我有三个变量

```
var state1
var state2
var state3 
```

我需要根据单击对象的属性在 .click 事件上访问其中一个。

如何访问正确的变量？基本上我需要通过将“状态”和正确的数字加在一起来获得变量名。

我会尽快用一些代码更新这篇文章，以备不时之需。

```
var backstate1;
var backstate2;
var backstate3;
var currentFrame;

function hotspotHover(){
var currentElement = this;
var daName =this.name;
$("#hotspot" +daName).hover(

    function() { 
    $("img.changeOutline").prop("src", currentElement.outlinesArray[currentFrame]);
    $("#outlines").show(); 
    }, 
    function() { 
    $("#outlines").hide(); 
    }
).click(function() {
    var backstateLevelNumber = currentElement.backStateLevel; //not working
    window['backstate'+ backstateLevelNumber]=currentFrame; //trying to set backstate+number to current frame variable
    hoverClick(currentElement.defaultFrame);
    checkReverse();
    checkSeqLoop();
});

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:08:51.410

使用数组可以解决您的问题：

```
var states = [null, null, null]; 
```

访问它们将是：（假设`currentStateId`是当前状态编号）

```
var currentState = state[currentStateId] //Access state 
```

对于设置：

```
states[currentStateId] = "State"; //Set State 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:05:30.803

将状态添加为数组：

```
var states = [ 'state1', 'state2'];
var stateNumber = 0;
var state = states[stateNumber]; 
```

# javascript - 将数据从android传递到javascript时未定义的值

> ID：11770475
> 
> 赞同：0
> 
> 时间：2012-08-02T03:03:20.290
> 
> 标签：javascript, android, android-webview

我正在使用此代码，但值表示“未定义”有人能指出我的问题吗？

这是我的java类代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(com.frux.web.R.layout.activity_main);
    String value = "Isiah";
    WebView web = (WebView) findViewById(R.id.web1);
    web.getSettings().setJavaScriptEnabled(true);
    web.loadUrl("file:///android_asset/www/webpage");
    web.loadUrl("javascript:setValue("+ value +")");

} 
```

这是我的网页代码

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

Whats your Name?
<input id="name" value="" />
<button onclick = "setValue()">Submit</button>

<script type="text/javascript"> 
function setValue(value){
var myValue = value;
document.getElementById("name").value = myValue;

}
</script>
</body>
</html> 
```

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:28:01.230

在javascript方面：

```
function setValue(value){
   myValue=value;
} 
```

在Java方面：

> myWebView.loadUrl("javascript:setValue("+value+");");

# android - “无法实例化活动 ComponentInfo”加

> ID：11770484
> 
> 赞同：0
> 
> 时间：2012-08-02T03:04:20.853
> 
> 标签：android

由于空指针异常，在活动设置期间强制关闭。

## 错误日志：

```
08-02 12:50:33.913: E/main(383): Birds clicked on - new activity starting....id
08-02 12:55:22.977: D/AndroidRuntime(383): Shutting down VM
08-02 12:55:22.977: W/dalvikvm(383): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-02 12:55:23.104: E/AndroidRuntime(383): FATAL EXCEPTION: main
08-02 12:55:23.104: E/AndroidRuntime(383): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.kissta.safari/com.kissta.safari.viewscreen}: java.lang.NullPointerException
08-02 12:55:23.104: E/AndroidRuntime(383):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
08-02 12:55:23.104: E/AndroidRuntime(383):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-02 12:55:23.104: E/AndroidRuntime(383):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-02 12:55:23.104: E/AndroidRuntime(383):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-02 12:55:23.104: E/AndroidRuntime(383):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-02 12:55:23.104: E/AndroidRuntime(383):  at android.os.Looper.loop(Looper.java:130)
08-02 12:55:23.104: E/AndroidRuntime(383):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-02 12:55:23.104: E/AndroidRuntime(383):  at java.lang.reflect.Method.invokeNative(Native Method)
08-02 12:55:23.104: E/AndroidRuntime(383):  at java.lang.reflect.Method.invoke(Method.java:507)
08-02 12:55:23.104: E/AndroidRuntime(383):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-02 12:55:23.104: E/AndroidRuntime(383):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-02 12:55:23.104: E/AndroidRuntime(383):  at dalvik.system.NativeStart.main(Native Method)
08-02 12:55:23.104: E/AndroidRuntime(383): Caused by: java.lang.NullPointerException
08-02 12:55:23.104: E/AndroidRuntime(383):  at android.app.Activity.findViewById(Activity.java:1647)
08-02 12:55:23.104: E/AndroidRuntime(383):  at com.kissta.safari.viewscreen.<init>(viewscreen.java:125)
08-02 12:55:23.104: E/AndroidRuntime(383):  at java.lang.Class.newInstanceImpl(Native Method)
08-02 12:55:23.104: E/AndroidRuntime(383):  at java.lang.Class.newInstance(Class.java:1409)
08-02 12:55:23.104: E/AndroidRuntime(383):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-02 12:55:23.104: E/AndroidRuntime(383):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
08-02 12:55:23.104: E/AndroidRuntime(383):  ... 11 more 
```

## 根据日志命令，我的应用程序在打开 viewscreen 或 viewxml 时似乎失败了：

```
// ...abridged...import android.widget.ImageButton; 

public class main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainxml);

// ... abridged
ImageButton ibone = (ImageButton) findViewById(R.id.imageButton1);
ibone.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent explicitIntent1 = new Intent(main.this,viewscreen.class);
                explicitIntent1.putExtra("id", 1);
                startActivity(explicitIntent1);
                Log.e("main", "Birds clicked on - new activity starting...." + "id");
            }
        });

....further abridged... 
```

显现：

```
<uses-sdk
    android:minSdkVersion="8"/>

<application
    android:icon="@drawable/iconanimal"
    android:label="@string/app_name"
    android:screenOrientation="landscape"
    android:theme="@style/Theme.Transparent" >
    <activity
        android:name=".splash"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".main"
        android:label="@string/app_name"
        android:screenOrientation="landscape" >
    </activity>
    <activity
        android:name=".viewscreen"
        android:label="@string/app_name"
        android:screenOrientation="landscape" >
</activity>

</application>

</manifest> 
```

## 在视屏活动中：

```
package com.kissta.safari;

import java.util.ArrayList;

import android.app.Activity;
import android.content.res.Resources;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.GestureDetector;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.ViewSwitcher;

public class viewscreen extends Activity implements OnClickListener,
    OnGestureListener {

// references to our image
private animals animalclass = new animals();

int TotalAnimals; // starting from 0 of course (so an 11=12 fruit)
int currentAnimal = 0;

boolean active = true;
long starttime = System.currentTimeMillis();
long timedelay = 50;

ArrayList<Integer> imagearray = new ArrayList<Integer>();
ArrayList<Integer> soundarray = new ArrayList<Integer>();
// ArrayList<String> printarray = new ArrayList<String>();

private ViewSwitcher switcher;
private GestureDetector gesturedetector;
public boolean viewone = true;
public int menuoption;
Handler myHandler = new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.e("viewscreen1", "xml loading"); // does not reach here
    setContentView(R.layout.viewxml); 
```

永远不会触发上面的日志消息，这意味着永远不会到达 viewxml.xml（？？？）。

这是 viewxml.xml：

```
`<?xml version="1.0" encoding="utf-8"?>
<!-- Note:  Can't add more than 2 views to a ViewSwitcher -->
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/fullscreenrelative"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:layout_gravity="center_horizontal"
>

<ViewSwitcher
    android:id="@+id/viewSwitcher"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/bottomtablerow"
    android:layout_centerHorizontal="true"
    android:layout_gravity="center_horizontal|top"
    android:inAnimation="@anim/in_animation"
    android:outAnimation="@anim/out_animation" >

    <RelativeLayout
        android:id="@+id/view1relative"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:background="@drawable/swan"
        android:gravity="center_horizontal" >

        <ImageView
            android:id="@+id/view1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/clear32" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/view2relative"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:background="@drawable/kangaroo" >

        <ImageView
            android:id="@+id/view2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:src="@drawable/clear32" />
    </RelativeLayout>
</ViewSwitcher>

<TableRow
    android:id="@+id/bottomtablerow"
    android:layout_width="fill_parent"
    android:layout_height="48dp"
    android:layout_alignParentBottom="true"
    android:background="#303030"
    android:gravity="center_horizontal" >

    <ImageButton
        android:id="@+id/btnPrevious"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_weight=".2"
        android:background="@drawable/whiteleft"
        android:textStyle="bold" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight=".1"
        android:src="@drawable/clear" />

    <TextView
        android:id="@+id/textll"
        android:layout_width="wrap_content"
        android:layout_height="44dp"
        android:layout_gravity="center_horizontal|top"
        android:layout_weight="1"
        android:gravity="center"
        android:includeFontPadding="false"
        android:padding="10dip"
        android:text="@string/app_name"
        android:textColor="#FFFFFF"
        android:textSize="25sp" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight=".1"
        android:src="@drawable/clear" />

    <ImageButton
        android:id="@+id/btnNext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right|center_vertical"
        android:layout_weight=".2"
        android:background="@drawable/whiteright"
        android:textStyle="bold" />
</TableRow>

</RelativeLayout>` 
```

PS 我现在也收到一个可能无关的 AVD 错误：“模拟器：错误：无法加载 OpenGLES 仿真库：无法加载 DLL！” 不过，我根本不相信我在使用 OpenGL。[请参阅http://code.google.com/p/android/issues/detail?id=33336](http://code.google.com/p/android/issues/detail?id=33336)上的常见错误报告

PSS 我的应用程序也拒绝使用非谷歌 api 虚拟机

PSS 这里是所要求的完整主文件：package com.kissta.safari；

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ImageButton;

public class main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainxml);
    // android:tileMode="repeat"

    Log.e("main", "main all good");

    SoundManager.getInstance();
    SoundManager.initSounds(main.this);
    SoundManager.loadSounds();
    Log.e("main", "sm LoadSounds worked, all done.");

        // SECTION FOR GAME CHOICE BUTTONS!!!!!!!!!
        // ***
        ImageButton ibone = (ImageButton) findViewById(R.id.imageButton1);
        ibone.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent explicitIntent1 = new Intent(main.this,viewscreen.class);
                explicitIntent1.putExtra("id", 1);
                startActivity(explicitIntent1);
                Log.e("main", "Birds clicked on - new activity starting...." + "id"); // it gets this far perfectly fine
            }
        });

        // ***

        ImageButton ibtwo = (ImageButton) findViewById(R.id.imageButton2);
        ibtwo.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Playsound2.stop();
                Intent explicitIntent2 = new Intent(main.this,
                        viewscreen.class);
                explicitIntent2.putExtra("id", 2);
                startActivity(explicitIntent2);
            }
        });

        // ***

        ImageButton ibthree = (ImageButton) findViewById(R.id.imageButton3);
        ibthree.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Playsound2.stop();
                Intent explicitIntent3 = new Intent(main.this,
                        viewscreen.class);
                explicitIntent3.putExtra("id", 3);
                startActivity(explicitIntent3);
            }
        });

        // ***

        ImageButton ibfour = (ImageButton) findViewById(R.id.imageButton4);
        ibfour.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Playsound2.stop();
                Intent explicitIntent4 = new Intent(main.this,
                        viewscreen.class);
                explicitIntent4.putExtra("id", 4);
                startActivity(explicitIntent4);
            }
        });

        ImageButton ibfive = (ImageButton) findViewById(R.id.imageButton5);
        ibfive.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Playsound2.stop();
                Intent explicitIntent5 = new Intent(main.this,
                        viewscreen.class);
                explicitIntent5.putExtra("id", 5);
                startActivity(explicitIntent5);
            }
        });

        ImageButton ibsix = (ImageButton) findViewById(R.id.imageButton6); // settings - adjust
        ibsix.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Playsound2.stop();
                Intent explicitIntent6 = new Intent(main.this,
                        viewscreen.class);
                explicitIntent6.putExtra("id", 6);
                startActivity(explicitIntent6);
            }
        });

        ImageButton ibsev = (ImageButton) findViewById(R.id.imageButtonau); // settings - adjust
        ibsev.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Playsound2.stop();
                Intent explicitIntent6 = new Intent(main.this,
                        viewscreen.class);
                explicitIntent6.putExtra("id", 7);
                startActivity(explicitIntent6);
            }
        });

        // / *************** END OF GAME CHOICE BUTTONS

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:31:33.303

```
Intent explicitIntent1 = new Intent(main.this,viewscreen.class);
explicitIntent1.putExtra("id", 1);
startActivity(explicitIntent1);
Log.e("main", "this finished ok"); // app gets to here fine 
```

在这段代码之后，出现了类似于

```
findViewById(.. 
```

检查您的 xml 中是否存在此 ID

# javascript - json 格式作为 cordova 或 phonegap ios 插件的参数

> ID：11770485
> 
> 赞同：1
> 
> 时间：2012-08-02T03:04:28.573
> 
> 标签：javascript, cordova, phonegap-plugins

我正在为 ios 创建一个 phonegap 插件我的问题是我可以传递一个 json 格式参数而不是通常的“字符串”参数吗？

我发现的每个教程都使用字符串作为参数。如果我将使用 json 格式变量作为​​插件的参数，我会怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:03:48.960

如果您准备 JSON 数据，则在将其传递给 Cordova.exec 之前使用`JSON.stringify`

```
PhoneGap.exec('Alarm.update',JSON.stringify(list)); 
```

也许这可以帮助你：[PhoneGap exec 传递 JSON](https://stackoverflow.com/questions/3993410/phonegap-exec-passing-objects-between-js-and-obj-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T12:09:53.643

在当前版本中，可以读取 Javascript 中传递的 Object：

```
JSONObject params = args.getJSONObject(0); 
```

# perl - 调用 DBI 模块时出现错误“无法在 @INC 中找到 version.pm”

> ID：11770488
> 
> 赞同：0
> 
> 时间：2012-08-02T03:04:47.267
> 
> 标签：perl, cpan

我已经在我的计算机中安装了 DBI 和 DBD 模块，但是当我执行 perl 脚本时，出现“无法在 @INC 中定位 version.pm”之类的错误。我的 DBD 有问题吗？或者是否需要安装一些依赖项？

我的操作系统是Redhat Linux，perl 5.8.8版本，满足DBD安装要求。

这是@INC 包含的内容：

```
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi
/usr/lib64/perl5/site_perl/5.8.7/x86_64-linux-thread-multi
/usr/lib64/perl5/site_perl/5.8.6/x86_64-linux-thread-multi
/usr/lib64/perl5/site_perl/5.8.5/x86_64-linux-thread-multi
/usr/lib/perl5/site_perl/5.8.8
/usr/lib/perl5/site_perl/5.8.7
/usr/lib/perl5/site_perl/5.8.6
/usr/lib/perl5/site_perl/5.8.5
/usr/lib/perl5/site_perl
/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi
/usr/lib64/perl5/vendor_perl/5.8.7/x86_64-linux-thread-multi
/usr/lib64/perl5/vendor_perl/5.8.6/x86_64-linux-thread-multi
/usr/lib64/perl5/vendor_perl/5.8.5/x86_64-linux-thread-multi
/usr/lib/perl5/vendor_perl/5.8.8
/usr/lib/perl5/vendor_perl/5.8.7
/usr/lib/perl5/vendor_perl/5.8.6
/usr/lib/perl5/vendor_perl/5.8.5
/usr/lib/perl5/vendor_perl
/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi
/usr/lib/perl5/5.8.8

locate version returns:
/opt/app/ora11g/product/11.2.0/client_1/perl/lib/5.10.0/version.pm 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T03:35:14.740

```
corelist version

version was first released with perl v5.9.0 
```

由于您的 perl 版本早于 perl ^(**5.9.0**)，您可能必须`version.pm`手动安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:36:17.093

您的 Perl 安装似乎有问题。

`version`自 Perl v5.9.0 以来一直是核心模块，仅被少数模块使用，不包括 DBI

哪个软件包因此错误而失败？该消息将告诉您正在使用哪个文件`version`。您可以不使用此软件包或安装更新版本的 Perl

# ruby-on-rails - 设计 /users/sign_in 重定向到错误的控制器

> ID：11770494
> 
> 赞同：3
> 
> 时间：2012-08-02T03:05:38.810
> 
> 标签：ruby-on-rails, ruby, devise, journey

命脉：

*   ruby 1.9.3p194（2012-04-20 修订版 35410）
*   [i686-linux] Rails 3.2.7
*   设计 2.1.2

GET /users/sign_in 试图重定向到错误的控制器。它已停止重定向到 wecome#welcome（有效），ans 现在正在重定向到 devise/welcome#welcome，它不存在并导致重定向时出现 500 错误，并记录以下错误：

```
ActionController::RoutingError (没有路由匹配 {:controller=>"devise/welcome", :action=>"welcome"}):

```

这开始于最近，并且似乎是由一系列 gem 更新中的某些东西引起的。它曾经完美地工作。

有谁知道为什么这会开始失败（ei哪个gem的哪个更新）或者我能做些什么？

**编辑：**

这是 routes.rb 的根路由：

```
root :to => "welcome#welcome" 
```

我回滚到以前的部署，并且该应用程序再次运行。部署在 rails 3.2.7 之前。

宝石文件：

```
source 'http://rubygems.org'

gem 'rails', '~> 3.2.1'
gem 'rake'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'

gem 'devise', '~> 2.1.0'
gem 'devise-encryptable', '~> 0.1.1'
gem 'devise_invitable', '~> 1.0.0'

gem 'haml', "~> 3.1.6"
gem "rdiscount", "~> 1.6.8"
gem 'markaby'

gem 'foreigner', "~> 1.1.5"

gem 'ancestry'
gem 'acts_as_list'

gem 'dynamic_form'
gem 'friendly_id', "~> 4.0.0"

gem 'net-ssh', :git => 'git://github.com/nessche/net-ssh.git'

group :assets do
  gem 'sass-rails',   "~> 3.2.3"
  gem 'coffee-rails', "~> 3.2.1"
  gem 'uglifier', "~> 1.2.3"
end

gem 'therubyracer', "~> 0.10.1"
gem 'jquery-rails', "~> 2.0.1"

gem 'newrelic_rpm', "~> 3.3.1"

gem "marginalia", "~> 1.1.0"

group :development do
  gem 'capistrano', "~> 2.12.0"
  gem 'rvm-capistrano'
#  gem "mail_view", "~> 1.0.1", :git => 'https://github.com/37signals/mail_view.git'
#  gem 'rails_admin'
  gem 'rails-footnotes', '>= 3.7.5.rc4'
  gem 'annotate', '~> 2.4.0'
end

# Bundle the extra gems:
# gem 'bj'
# gem 'nokogiri'
# gem 'sqlite3-ruby', :require => 'sqlite3'
# gem 'aws-s3', :require => 'aws/s3'

# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
 group :development, :test do
   gem 'webrat'
   gem 'rspec'
   gem 'cucumber'
   gem 'gherkin'
   gem 'spork'
   gem 'spin'
   gem 'capybara'
   gem 'sqlite3'
   gem 'nifty-generators'
   gem 'mocha'
 end 
```

*编辑*：2012-08-27 -
设计 2.1.2 + rails 3.2.6 + Journey 1.0.3 = 工作。
设计 2.1.2 + 轨道 3.2.6 + 旅程 1.0.4 = 失败。

设计 2.1.2 + 轨道 3.2.7 + 旅程 1.0.4 = 失败。
设计 2.1.2 + rails 3.2.8 + travel 1.0.4 = 失败。

Rails 3.2.7 和 3.2.8 是安全版本，需要旅程 1.0.4。这让我陷入了困境，直到我可以修复旅程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T21:27:14.307

我在设计路由到一个奇怪的地方（在我的例子中是“设计/作者”）时遇到了类似的问题。

它在包含旅程 1.0.4 的 gem 包更新后被破坏。我通过将旅程锁定到 1.0.3 来修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:14:49.063

I fixed a similar problem by checking the link_to helpers in the site's header, which is shown also on devise sign-up and sign-in pages. Please see the details [here](https://stackoverflow.com/questions/12163950/how-to-fix-broken-devise-routing-under-journey-1-0-4/12258136#12258136).

# facebook - 发布 Wordpress 帖子时如何将照片发布到 Facebook？

> ID：11770496
> 
> 赞同：0
> 
> 时间：2012-08-02T03:05:53.003
> 
> 标签：facebook, facebook-graph-api, wordpress

我有一个 wordpress 网站。它现在正在使用[官方的 Facebook 插件](http://developers.facebook.com/wordpress/)。发布新帖子时，将在 Facebook 上发布操作。发布的消息包含一个小缩略图、帖子标题和一些描述。

但我想改变这种方法。我发现[Posterous](http://posterous.com)允许用户在发布帖子时将照片发布到Facebook。

有谁知道任何可以在发布时将照片发布到 Facebook 的 Wordpress 插件？

谢谢大家。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T00:27:46.850

你可以看看这个 wordpress 插件[http://www.nextscripts.com/](http://www.nextscripts.com/)

# r - 如何关闭 R 热图功能中的平滑？

> ID：11770499
> 
> 赞同：0
> 
> 时间：2012-08-02T03:06:35.673
> 
> 标签：r, heatmap

如何在 R 热图功能中关闭颜色平滑？在 R 中绘制相关性热图时，我一直在尝试关闭平滑以获得白色对角线。

这就是我正在使用的：

```
(h <- round(cor(data[,c(83,3:39)],use = "pairwise.complete.obs"),2))
heatmap(h,Colv = NA, Rowv = NA) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T03:18:43.777

尝试设置`scale = "none"`关闭矩阵值的默认缩放。

# python - 我如何使用tastepie登录django

> ID：11770501
> 
> 赞同：24
> 
> 时间：2012-08-02T03:06:51.583
> 
> 标签：python, django, tastypie

我试图在我的自定义身份验证中覆盖 is_authenticated 。我有一些简单的（开始）像这样：

```
class MyAuthentication(BasicAuthentication):
    def __init__(self, *args, **kwargs):
        super(MyAuthentication, self).__init__(*args, **kwargs)

    def is_authenticated(self, request, **kwargs):
        return True 
```

然后在我的 ModelResource 我有

```
class LoginUserResource(ModelResource):

    class Meta:
        resource_name = 'login'
        queryset = User.objects.all()
        excludes = ['id', 'email', 'password', 'is_staff', 'is_superuser']
        list_allowed_methods = ['post']

        authentication = MyAuthentication()
        authorization = DjangoAuthorization() 
```

我不断收到 500 错误`"error_message": "column username is not unique"`。我在数据库中只有一个用户名，它是我要验证的用户。

关于为什么返回此错误的任何想法？我将如何允许 api 客户端登录？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-02T03:42:31.773

您的方法将尝试使用您正在验证的用户名创建一个新用户。正如您所注意到的，这将在 DB 层冒泡，这样的用户已经存在。

您想要的是创建一个`UserResource`，在其上添加一个方法，用户可以发布并使用传入用户名/密码的数据登录。

```
from django.contrib.auth.models import User
from django.contrib.auth import authenticate, login, logout
from tastypie.http import HttpUnauthorized, HttpForbidden
from django.conf.urls import url
from tastypie.utils import trailing_slash

class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        fields = ['first_name', 'last_name', 'email']
        allowed_methods = ['get', 'post']
        resource_name = 'user'

    def override_urls(self):
        return [
            url(r"^(?P<resource_name>%s)/login%s$" %
                (self._meta.resource_name, trailing_slash()),
                self.wrap_view('login'), name="api_login"),
            url(r'^(?P<resource_name>%s)/logout%s$' %
                (self._meta.resource_name, trailing_slash()),
                self.wrap_view('logout'), name='api_logout'),
        ]

    def login(self, request, **kwargs):
        self.method_check(request, allowed=['post'])

        data = self.deserialize(request, request.raw_post_data, format=request.META.get('CONTENT_TYPE', 'application/json'))

        username = data.get('username', '')
        password = data.get('password', '')

        user = authenticate(username=username, password=password)
        if user:
            if user.is_active:
                login(request, user)
                return self.create_response(request, {
                    'success': True
                })
            else:
                return self.create_response(request, {
                    'success': False,
                    'reason': 'disabled',
                    }, HttpForbidden )
        else:
            return self.create_response(request, {
                'success': False,
                'reason': 'incorrect',
                }, HttpUnauthorized )

    def logout(self, request, **kwargs):
        self.method_check(request, allowed=['get'])
        if request.user and request.user.is_authenticated():
            logout(request)
            return self.create_response(request, { 'success': True })
        else:
            return self.create_response(request, { 'success': False }, HttpUnauthorized) 
```

现在您可以发送 POST 到`http://hostname/api/user/login`with data `{ 'username' : 'me', 'password' : 'l33t' }`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T09:02:58.383

此更新消除了 GET 方法的安全问题。适用于 Django 1.5.4。

```
class UserResource(ModelResource):

    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        allowed_methods = ['post']

    def prepend_urls(self):
        return [
            url(r"^user/login/$", self.wrap_view('login'), name="api_login"),
            url(r"^user/logout/$", self.wrap_view('logout'), name='api_logout'),
        ]

    def login(self, request, **kwargs):
        self.method_check(request, allowed=['post'])

        data = self.deserialize(request, request.raw_post_data, format=request.META.get('CONTENT_TYPE', 'application/json'))

        username = data.get('username', '')
        password = data.get('password', '')

        user = authenticate(username=username, password=password)
        if user:
            if user.is_active:
                login(request, user)
                return self.create_response(request, {
                    'success': True
                })
            else:
                return self.create_response(request, {
                    'success': False,
                    'reason': 'disabled',
                }, HttpForbidden )
        else:
            return self.create_response(request, {
                'success': False,
                'reason': 'incorrect',
                }, HttpUnauthorized )

    def logout(self, request, **kwargs):
        self.method_check(request, allowed=['post'])
        if request.user and request.user.is_authenticated():
            logout(request)
            return self.create_response(request, { 'success': True })
        else:
            return self.create_response(request, { 'success': False }, HttpUnauthorized) 
```

# java - 如果找不到Java拆分中的字符串怎么办

> ID：11770502
> 
> 赞同：33
> 
> 时间：2012-08-02T03:07:03.143
> 
> 标签：java, string, split

```
 String incomingNumbers[ ] = writtenNumber.split("\\-"); 
```

> 该程序接受自然语言数字，例如三十二或五。
> 因此，如果输入 5，我的incomingNumbers 数组中会出现什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-02T03:14:56.533

您会得到一个大小为 1 的数组，其中包含原始值：

```
Input       Output
-----       ------
thirty-two  {"thirty", "two"}
five        {"five"} 
```

您可以在以下程序中看到这一点：

```
class Test {
    static void checkResult (String input) {
        String [] arr = input.split ("\\-");
        System.out.println ("Input   : '" + input + "'");
        System.out.println ("    Size: " + arr.length);
        for (int i = 0; i < arr.length; i++)
            System.out.println ("    Val : '" + arr[i] + "'");
        System.out.println();
    }

    public static void main(String[] args) {
        checkResult ("thirty-two");
        checkResult ("five");
    }
} 
```

输出：

```
Input   : 'thirty-two'
    Size: 2
    Val : 'thirty'
    Val : 'two'

Input   : 'five'
    Size: 1
    Val : 'five' 
```

# android - android中的GCM服务器端代码

> ID：11770511
> 
> 赞同：3
> 
> 时间：2012-08-02T03:08:23.470
> 
> 标签：android, google-cloud-messaging

[我尝试了此处](http://android.amolgupta.in/2012/07/google-cloud-messaging-gcm-tutorial.html#comment-form)给出的 GCM 代码

使用它，我可以获得我的应用程序的注册 ID（我在设备上检查并发现它被打印到`TextView`我设置的设备上）。

但是现在我如何检查来自服务器的消息（推送通知）的接收。实际上如何将我的代码连接到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:45:23.583

这有点模糊。所以你还没有在你的服务器上设置任何东西？首先，您需要设置服务器。[您只需使用GCM Server](http://developer.android.com/guide/google/gcm/gcm.html#server)找到的规范进行常规 http 调用

这是服务器部分，但您可能需要阅读整个文档以获得完整的图片

# android - 从导航列表更改代码中的 ActionBar 背景颜色

> ID：11770512
> 
> 赞同：5
> 
> 时间：2012-08-02T03:08:37.400
> 
> 标签：android, android-actionbar

当用户在导航列表中选择一个选项时，我想更改操作栏背景的颜色。

目前，我的代码如下所示：

```
@Override
    public boolean onNavigationItemSelected(int itemPosition, long itemId) {
        ColorDrawable colorDrawable = new ColorDrawable();
        ActionBar actionBar = getActionBar();
        if(itemPosition == 0)
        {
            colorDrawable.setColor(0xffFEBB31);
            actionBar.setBackgroundDrawable(colorDrawable);
            return true;
        }
        if(itemPosition == 1)
        {
            colorDrawable.setColor(0xff9ACC00);
            actionBar.setBackgroundDrawable(colorDrawable);
            return true;
        }
        return false;
    } 
```

但是，当我第一次在导航列表中选择 itemPosition 1 时，它会将 ActionBar 颜色更改为白色。

![在此处输入图像描述](../Images/cdadac0ecbb8064f3abd31e8234e4753.png)
第二次单击导航列表中的 itemPosition 1 时，我没有问题。

![在此处输入图像描述](../Images/a37f3b062944dccde99ddba3c8a14c7f.png)
谁能告诉我这是为什么以及如何解决这个问题？感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T00:33:38.130

尝试使用此代码：

```
ColorDrawable colorDrawable = new ColorDrawable(Color.parseColor("#ffFEBB31"));
actionBar.setBackgroundDrawable(colorDrawable); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-28T04:20:56.963

尝试这个：

```
myActivity.invalidateOptionsMenu(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-31T12:40:57.957

我遇到了同样的问题。

对于 Visual Studio 等中的 Xamarin 用户。

请在活动类中的 SetContentView(Resource.Layou...... 之后粘贴此内容。

`// Setting ActionBar (Toolbar) background color natively var actionBar = this.ActionBar; actionBar.SetBackgroundDrawable(new ColorDrawable(Color.Black));`

您可以根据需要对 actionBar 变量进行更多更改。

谢谢希望这会有所帮助。

# php - 使用 PHP 获取网页 h1 标签内容的最佳（也是最安全）方法是什么？

> ID：11770516
> 
> 赞同：1
> 
> 时间：2012-08-02T03:09:04.403
> 
> 标签：php, file-get-contents

我正在使用 PHP 的`get_meta_tags()`函数来获取不同网页的元标记。我想知道获取`<h1>`网页标签内容的最佳方法是什么。我应该使用`file_get_contents()`，还是有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T03:15:30.940

是的，我会使用：

```
$page = file_get_contents('http://example.com');
$matches = array();
preg_match( '#<h1>(.*?)</h1>#', $page, $matches ); 
```

你的信息应该在`$matches`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T03:23:12.037

`file_get_contents()`可以为您获取页面的内容。获得内容后，如何提取`h1`标签取决于您。

您可以尝试一个简单的正则表达式来返回第一个`h1`标签的内容：

```
$contents = file_get_contents($url);
preg_match_all("/<h1>(.*?)<\/h1>/", $contents, $matches);
$h1 = $matches[1]; 
```

但是，在处理 HTML 时，我更喜欢使用 DOM 解析器。[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/index.htm)非常易于使用。就像是：

```
$contents = file_get_contents($url);
$html = str_get_html($contents);
$h1 = $html->find("h1")[0]; 
```

**注意**：我没有测试这些代码片段。只是一些样本可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T03:14:32.417

`<h1>`标签不是元标签，因此您不能使用该功能`get_meta_tags()`。HTML 文档中的元标记是`<head>`包含页面信息的部分中的标记，而不是内容本身。

[PHP.DOM](http://php.net/manual/en/book.dom.php)可能是获取所需信息的最佳方式。这是一个不错的教程的[链接](http://www.php4every1.com/tutorials/php-domdocument-tutorial/)，应该可以让您很好地开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T03:15:43.863

尝试使用[简单的 HTML DOM](http://simplehtmldom.sourceforge.net)。

代码：

```
<?php
require_once('simple_html_dom.php');
$raw = '<h1>blah</h1>'; // Set the raw HTML of the webpage here
$html = str_get_html($raw);
$h1 = $html->find('h1', 0)->plaintext;
echo $h1;
?> 
```

# iphone - 应用程序在 Game Center 身份验证时崩溃

> ID：11770518
> 
> 赞同：0
> 
> 时间：2012-08-02T03:09:09.660
> 
> 标签：iphone, objective-c, ios, game-center

我似乎在这里不知所措。当我打开我的应用程序并注销 Game Center 应用程序时，我的应用程序崩溃了，但是当 Game Center 登录时，它工作得很好。这是我正在使用的代码。难道我做错了什么？

```
[[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error) {
        if (error == nil) {
            // Insert code here to handle a successful authentication.
            //gcSuccess = YES;
        }
        else
        {
            // Your application can process the error parameter to report the error to the player.
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Could not connect with Game Center servers." delegate:nil cancelButtonTitle:@"Try Later" otherButtonTitles:nil];
             [alert show];
        }
    }]; 
```

此外，这是我在应用程序崩溃时看到的唯一错误，我只在控制台中看到，而不是在运行日志中看到。

```
Aug  1 20:15:08 Zachary-Christopouloss-iPhone backboardd[52] <Warning>: BKSendGSEvent ERROR sending event type 23: (ipc/send) invalid destination port (0x10000003) 
```

对此的任何帮助都会很棒。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:17:51.197

我*相信*您应该`[GKLocalPlayer localPlayer].isAuthenticated`在进行身份验证之前进行检查...这不应该影响它，但是如果您跳过它，那里可能会发生一些 init 会生气？

# android - 为 Android 编译 ICU 库

> ID：11770519
> 
> 赞同：2
> 
> 时间：2012-08-02T03:09:13.457
> 
> 标签：android, android-ndk, libxml2, icu

我想为我的 Android 项目编译 libxml2，但似乎 libxml2.so 需要 libicu.so 才能正常运行。我看到了几个关于如何编译和创建 libicu.so 文件的网站。[我从https://github.com/android/platform_external_icu4c](https://github.com/android/platform_external_icu4c)下载了源代码并阅读了说明。我可以成功地为 Linux (Ubuntu) 编译。但我不知道我应该如何为 Android 交叉编译。我看到了几个堆栈溢出问题，但它们对我来说似乎有点令人困惑。

有人可以指导我如何构建适用于 Android 的 ICU 库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:33:57.207

你运行什么版本的安卓？该库可能已安装。例如，在我的 Android 4.0.3 中，以下库已经存在：`/system/lib/libicui18n.so`, `/system/lib/libicuuc.so`.

# ruby-on-rails - 使用link_to时如何始终使用www作为子域

> ID：11770521
> 
> 赞同：0
> 
> 时间：2012-08-02T03:09:16.790
> 
> 标签：ruby-on-rails, routing

我在secure.website.com 有一个安全支付页面。使用设计在该特定页面上注销，注销会中断说没有 id=sign_out 的用户。我猜这是因为当我在安全页面上时，该页面上的所有链接也都有secure.website.com/users/sign_out（例如）。

而不是总是指定我想在我的 link_to 中使用 www 作为 url ...我想将其设置为默认值。我尝试做 default_url_options 但这似乎不起作用。除非另有说明，否则如何确保所有链接始终是 www 子域？

最后，我一直在做的保证页面是 www 除非在安全页面上是这样的：

```
 def always_use_www
    if params[:controller] != 'subscriptions' && request.subdomain != 'www'
      redirect_to :subdomain => "www"
    end
  end 
```

我把它作为前置过滤器放在应用程序控制器中。这似乎是一种非常糟糕的方式。有“正确”的方法吗？我只希望一个安全页面具有不同的子域...否则始终使用 www。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:28:36.150

您可以创建一个方法`default_url_options`：

```
def default_url_options
  {
    :host => "www.example.com",
    :only_path => false
  }
end 
```

您可以将此方法放在子控制器的应用程序控制器中。据我所知，您只能设置整个主机，而不是子域。通常，您可以在此方法中放置任何选项`url_for`支持。

# xml - 使用 XSLT 转换 XHTML 代码时出错

> ID：11770522
> 
> 赞同：2
> 
> 时间：2012-08-02T03:10:14.280
> 
> 标签：xml, xslt, xhtml, xslt-1.0

我已经使用 XSLT 将一个 XHTML 文件转换为其他 XHTML 文件。它已成功转换，输出看起来与所需的相同，但转换后的输出在浏览器和 Dreamweaver 中打开时不显示任何内容，所有标签的颜色从`</head>`标签开始保持黑色，而不是通常的多-颜色。找到我附加的输出的屏幕截图以及我的代码。请帮我解决这个问题。感谢您！

**输入文件**

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />
  <meta http-equiv="Content-type" content="text/html; charset=us-ascii" />
  <script type="t/j" src="abc.js">
</script>
  <title></title>
</head>
<body>
  <div id="o">
    <div id="m">
      <div id="nD">
        <p id="nT">Part 1</p>
      </div>

      <div class="TF" id="123">
        <script type="t/j" src="xyz.js"></script>
        <script type="t/j" src="abc.js"></script>

        <div class="iD">
          <img alt="" src="ic.gif" /> <span class="iDe">ABC</span><br />

          <div class="iDev">
            <div id="ta12" class="bl" style="dis:bl"></div>

            <div class="q">
              <div id="t0b" class="block">
                1<span style="color">TEXT1</span>
              </div><br />
              T <input type="radio" name="o0" id="t0" onclick="getFeedback()" /> 
              F <input type="radio" name="op0" id="f0" onclick="getFeedback()" />

              <div id="18">C</div>
              <div id="sfb"></div>
            </div><br />
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html> 
```

**我的 XSLT：**

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml" version="1.0" exclude-result-prefixes="xhtml">
  <xsl:output method="xml" indent="yes" encoding="UTF-8"/>
  <xsl:strip-space elements="*"/>
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="xhtml:body">
    <script type="t/j" src="pqr.js" xml:space="preserve"/>
    <script type="t/j" src="stu.js" xml:space="preserve"/>
    <body onload="loadPage()" onunload="unloadPage()">
      <xsl:apply-templates select="@*|node()"/>
    </body>
  </xsl:template>
  <xsl:template match="xhtml:div[@id='123']/@*">
    <xsl:attribute name="class">QT</xsl:attribute>
    <xsl:attribute name="id">456</xsl:attribute>
  </xsl:template>
  <xsl:template match="xhtml:script[@src='xyz.js']">
    <xsl:copy>
      <xsl:apply-templates select="@*[not(@src)]"/>
      <xsl:attribute name="src">lmn.js</xsl:attribute>
      <xsl:apply-templates select="node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="xhtml:body//xhtml:script[@src='abc.js']"/>
  <xsl:template match="@onclick"/>
  <xsl:template match="xhtml:body//xhtml:div[@id='19']"/>
  <xsl:template match="xhtml:div[@class='iD']">
    <form name="form">
      <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
      <xsl:apply-templates select="following-sibling::xhtml:div[1]" mode="inside-form"/>
      <br/>
      <input type="submit" name="sub" value="Done"/>
    </form>
  </xsl:template>
  <xsl:template match="xhtml:div[@id='ta12']">
    <xsl:copy>
      <xsl:attribute name="class">pa</xsl:attribute>
      <xsl:attribute name="value">10</xsl:attribute>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="xhtml:div[@id='t0b']">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:attribute name="id">ta0b8</xsl:attribute>
      <xsl:apply-templates select="node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="xhtml:input[@name='o0']">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:attribute name="name">key0b8</xsl:attribute>
      <xsl:attribute name="class">block</xsl:attribute>
      <xsl:apply-templates select="node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="xhtml:input[@name='op0']">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:attribute name="name">key0b8</xsl:attribute>
      <xsl:attribute name="class">block</xsl:attribute>
      <xsl:apply-templates select="node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

**输出截图-**

![代码的输出](../Images/2192bf43b34011289345b6b7ef33ed70.png)

请在上图中查看所有标签从关闭头标签开始都是黑色的，并且设计部分是空白的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:26:00.210

如果我改变，我会得到输出：

```
 <xsl:output method="xml" indent="yes" encoding="UTF-8"/> 
```

到：

```
 <xsl:output method="html" indent="yes" encoding="UTF-8"/> 
```

# algorithm - 随机进出存储结构

> ID：11770529
> 
> 赞同：1
> 
> 时间：2012-08-02T03:11:15.660
> 
> 标签：algorithm

我正在寻找一种适当有效的存储结构来处理以随机顺序到达但必须以指定顺序从堆栈中处理和/或删除的数据。

为了更清楚地说明这一点：

每个项目 x 都有一个索引 i，一个时间戳 t，并按如下方式处理（假设存储结构已填充）。

```
repeat
  1) Process (remove) the item with the smallest time stamp.
  2) Add new items (0 or more).
  3) Remove (0 or more) items (referenced by their index).
until false 
```

保证每个项目都有唯一的时间戳和索引。但是，在步骤 1) 完成之前，无法预测在步骤 2) 中将添加多少项，或者在步骤 3) 中删除多少项，直到在算法的每个循环中完成步骤 1) 和 2)。无法预测传入项目的时间戳分布（除了新的时间戳将在“未来”中），并且可能随时间变化 - 即可能有一堆随机分布的时间戳，然后是一堆时间戳更大的时间戳（或小于）列表中剩余的任何项目。任何时候都会有最大数量的元素等待处理，但这可能相当大~10^6-10^8，

如果我在步骤 2) 中将每个项目添加到链接排序列表中，则步骤 1) 是 O(0)，但步骤 2) 是 O(n)。如果我使用二叉树，那么步骤 1) 仍然是 O(1)，现在步骤 2) 最初是 O(log n)，但是如果时间戳没有很好地分布，树可能会很快变得不平衡，这会减慢步骤 2)显着下降（如果我不定期重新平衡树，最终不会比 O(n) 好）。

我的猜测是，如果重新平衡以正确的时间间隔完成，那么具有定期重新平衡的二叉树应该提供 O(log n) ，但我认为这类问题已经得到很好的解决，所以有人可以指导我找到合适的参考或给我一些建议，以帮助我避免重新发明轮子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T03:46:57.493

使用数据结构堆，您可以在 O(logN) 中轻松完成所有操作。

[http://en.wikipedia.org/wiki/Heap_(data_structure)](http://en.wikipedia.org/wiki/Heap_(data_structure))

堆以时间戳为键。并且您将需要一个额外的数组（或字典）来存储对 Q=（item.Index，堆中项目的位置）。

由于它是一个堆，因此操作 1) 和 2) 将花费 O(logN) 处理每个项目。

对于操作 3)，您需要从堆中删除随机项。[幸运的是，正如这里](https://stackoverflow.com/questions/8705099/how-to-delete-in-a-heap-data-structure)提到的，这很容易。因为 item.index 不是它在堆中的实际位置，所以您需要上面提到的字典 Q ，通过 O(1) 中的 item.Index 查找项目在堆中的位置（用于哈希映射） ，否则寻找该位置将花费 O(N)。并且由于项目的位置在操作（包括操作 1 和 2）期间可能会发生变化，因此请记住每次在堆中移动项目时更改 Q 中的值。

正如有人提到的优先队列，我将在这里添加更多内容。

优先级队列是一种抽象数据类型，具有一些抽象接口。而且这些界面不包括常识中的“删除随机项目”。

堆是一种数据结构。

优先级队列可以用堆来实现。但是堆可以支持比优先级队列更多的操作。

# android - 如何拦截 ALT-META_LEFT getKeyCode();？

> ID：11770534
> 
> 赞同：0
> 
> 时间：2012-08-02T03:12:33.713
> 
> 标签：android, keyboard

更新：我误读了参考资料。我无法停止的关键代码是 ALT 和 META_LEFT

## 我已经更新了这篇文章的标题。我很抱歉。

我有一个使用蓝牙鼠标演示器来控制它的应用程序。我已经拦截了设备上的所有按钮，除了一个。当它被按下时，我会在我的应用程序中发生各种事情，比如去 Google Play，或者弹出一个询问我想使用什么音乐播放器的弹出窗口。我试图拦截它但失败了。即使是不让键码通过而只做一个 Toast 的测试代码也让这个键码通过。

有问题的键码是 57 和 117，根据[this](http://developer.android.com/reference/android/view/KeyEvent.html)是 ALT-MENU 。

这是代码可以成功拦截除此之外的任何其他键。例如，我可以添加一个 24 的案例，平板电脑或鼠标演示器上的向上音量键将不再起作用。

```
@override // tried both with and without the override
public boolean dispatchKeyEvent(KeyEvent ke){
    int keyCode = ke.getKeyCode();
    if(ke.getAction() == KeyEvent.ACTION_DOWN){
        Toast.makeText(this, String.valueOf(keyCode), Toast.LENGTH_SHORT).show();
        switch (keyCode)
        {
            case 117:
            case 57:
            case 44:
            case 59:
                return true;

            case 30:
                Intent target = new Intent(this, StartLine2.class);
                startActivity(target);
                return true;
            case 19:
                new Thread(new Runnable() {         
                    @Override
                    public void run() {                 
                        new Instrumentation().sendKeyDownUpSync(KeyEvent.KEYCODE_TAB);
                    }   
                }).start();
                return true;
            case 20:
                new Thread(new Runnable() {         
                    @Override
                    public void run() {                 
                        new Instrumentation().sendKeyDownUpSync(KeyEvent.KEYCODE_DPAD_CENTER);
                    }   
                }).start();
                return true;
        }
    }
    else if(ke.getAction() == KeyEvent.ACTION_UP){
        switch (keyCode){
            case 117:
            case 57:
            case 30:
            case 44:
            case 59:
            case 19:
            case 20:
                return true;
        }
    }

    return super.dispatchKeyEvent(ke);
} 
```

我期望的是 57 和 117 都没有传递给 dispatchKeyEvent ，因此什么也不做。然而，正如我所说，他们启动了一些过程。它曾经是 Google Play，但现在似乎要求我选择一个音乐播放器“使用...完成操作”

理想情况下，我想将该键用于有用的东西，但作为后备，只是让错误地击中它不会弄乱我的应用程序将是一个不错的第二选择。

我不知道该怎么做，很想在这个问题上得到一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:23:17.500

我使用以下代码进行拦截

```
ownET.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
    if (event.getAction() == KeyEvent.ACTION_DOWN) {

        switch (keyCode) {
        case KeyEvent.KEYCODE_DPAD_CENTER:
        case KeyEvent.KEYCODE_ENTER:
        ...;
        return true;
        default:
        break;
        }
    }
    return false;
    }
}); 
```

我希望这能捕捉到所有关键事件......抱歉，我无法尝试自己，因为我无法获得 ALT-MENU......

# ruby - Timeout::Error 没有在 Ruby 中拯救

> ID：11770535
> 
> 赞同：5
> 
> 时间：2012-08-02T03:12:46.783
> 
> 标签：ruby, http, timeout

我还是 Ruby 的新手，我第一次尝试将 Timeout 用于某些 HTTP 函数，但显然我在某处遗漏了标记。我的代码在下面，但它不起作用。相反，它引发了以下异常：

```
C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `initialize': execution expired (Timeout::Error) 
```

这对我来说没有多大意义，因为它超时的代码部分被包装在开始/救援/结束块中，并专门救援 Timeout::Error。我做错了什么，还是 Ruby 不支持的东西？

```
 retries = 10
    Timeout::timeout(5) do
      begin
        File.open("#{$temp}\\http.log", 'w') { |f|
          http.request(request) do |str|
            f.write str.body
          end
        }
      rescue Timeout::Error
        if retries > 0
          print "Timeout - Retrying..."
          retries -= 1
          retry
        else
          puts "ERROR: Not responding after 10 retries!  Giving up!")
          exit
        end
      end
    end 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-02T03:21:06.767

在对的`Timeout::Error`调用中引发了`Timeout::timeout`，因此您需要将其放在`begin`块内：

```
retries = 10
begin
  Timeout::timeout(5) do
    File.open("#{$temp}\\http.log", 'w') do |f|
      http.request(request) do |str|
        f.write str.body
      end
    end
  end
rescue Timeout::Error
  if retries > 0
    print "Timeout - Retrying..."
    retries -= 1
    retry
  else
    puts "ERROR: Not responding after 10 retries!  Giving up!")
    exit
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-11T12:08:16.060

使用 retryable 使这变得简单

[https://github.com/nfedyashev/retryable#readme](https://github.com/nfedyashev/retryable#readme)

```
require "open-uri"

retryable(:tries => 3, :on => OpenURI::HTTPError) do
  xml = open("http://example.com/test.xml").read
end 
```

# static-libraries - TAO 1.6a - 如何制作 .a 库？

> ID：11770540
> 
> 赞同：0
> 
> 时间：2012-08-02T03:13:39.740
> 
> 标签：static-libraries, aix, corba, ace, tao

我在 AIX 5.3 中构建了从 OCI 下载的 TAO 1.6a。我构建成功。但是，我只能在 $ACE_ROOT/lib 中看到 .so 文件。如何构建它以获取 .a 文件？我已经构建了 1.5a 版本，它给了我 .a 文件。有没有制作标志？请给我样品。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:12:05.770

TAO1.5 和更早的版本为每个库生成 .a（归档库文件）。例如：`libTAO.a, libTAO_CosNaming.a, libTAO_PortableServer.a, libTAO_AnyTypeCode.a`

我认为为什么所有库都放在存档文件中是因为库名称与默认相同，`"shr.o"`.

事实是所有库名称都相同，但只有存档名称不同。

例如：

```
Archive Name            Library Name
------------            ------------
libTAO.a                  shr.o
libTAO_CosNaming.a        shr.o
libTAO_PortableServer.a   shr.o
libTAO_AnyTypeCode.a      shr.o 
```

但是，TAO1.6 和更新版本会生成不同名称的库。例如：`libTAO.so, libTAO_CosNaming.so, libTAO_PortableServer.so, libTAO_AnyTypeCode.so`

而且，这些库没有放在存档文件 (.a) 中。这就是为什么我无法在 .a 中找到“.a”文件的原因`$ACE_ROOT/lib`。

如果要为所有库创建 .a 文件，请执行以下步骤。不知道有没有更简单的方法。如果是这样，请在这里分享。

在`$ACE_ROOT/lib`.so 文件中，所有 .so 文件都是从其原始项目目录进行符号链接的。

所以，从哪里找出来。我会做`libACE.so`的例子。

```
$cd ACE_ROOT/lib
$ls -lrt libACE.so
--> libACE.so -> ../ace/libACE.so.5.6a_p13 
```

好的，现在，我知道了文件的来源，并会去那里。

```
$cd ../ace 
```

创建 .a 文件并将源代码放入其中。用法-“ar -rv archivelibname.a sourcelibname”

```
$ar -rv libACE.a libACE.so.5.6a_p13 
```

并返回到 $ACE_ROOT 并符号链接 .a 文件

```
$cd $ACE_ROOT/lib
$ln -sf ../ace/libACE.a libACE.a 
```

就这样。但是，您必须为所有库执行这些步骤，这很累。

**编辑：我只是不知道 -brtl**

使用 -brtl 参数编译项目，它们将与 .so 库一起工作。

# java - 如何通过其值查找枚举

> ID：11770542
> 
> 赞同：0
> 
> 时间：2012-08-02T03:14:15.677
> 
> 标签：java

```
public enum Foo {
   one ("one"), two ("two")
} 
```

如何通过它的值（比如`Foo.getFoo("two")`）找到一个枚举应该返回`Foo.two`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T03:17:00.260

每个`enum`都有一个`valueOf(String)`查找给定名称的实例的方法。

```
Foo.valueOf("one") == Foo.one 
```

这是基于枚举值的名称。枚举没有值的概念——只有名称和序数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:30:04.473

你有一些选择...

### 知道枚举，想按名字查

如果您知道确切的枚举类型及其名称，正如其他人指出的那样，您可以直接使用它：

```
Foo myFoo = Foo.valueOf("one"); 
```

请记住，字符串必须与枚举名称完全匹配，包括大小写。枚举值通常都是大写的，所以如果你用 some 查找`String s`，这样做通常是个好主意`Foo.valueOf(s.toUpperCase())`。

### 有枚举的Class，想按名字查找

如果您没有该类型，但您有一个表示枚举类型的类，则可以使用静态方法`Enum.valueOf(Class<T>, String)`获取枚举的名称：

```
Class<T> myEnumClass = whatever();
T myEnum = Enum.valueOf(myEnumClass, "one"); 
```

如上所述，字符串区分大小写。

### 想通过一些非名称属性查找

如果您想通过其他一些（可能是唯一的）值来查找枚举，一种方法是遍历枚举值。你可以从 获取它们`Foo.values()`，或者，如果你只有一个`Class<T>`，你可以使用实例方法`Class.getEnumConstants()`：

```
T[] values = myEnumClass.getEnumConstants();
for (T value : values) ... 
```

### 相同，但可能更快

如果您需要经常这样做，并且速度是一个问题，那么将这些预加载到地图中*可能会很有用（但请参阅下面的警告）：*

```
Map<EnumVal, Foo> valuesToEnum = new HashMap<EnumVal, Foo>();
for (Foo foo : Foo.values()) {
    EnumVal val = foo.getValue();
    Foo oldFoo = valuesToEnum.put(val, foo);
    assert oldFoo == null : "multiple Foos have a value " + val;
        // ^^^ this means we can't meaningfully look up by EnumVals.
}
// now you can do something like
EnumVal lookupBy = whatever2();
Foo foo = valuesToEnum.get(lookupBy);
if (foo == null)
    throw new IllegalArgumentException("no Foo has the value " + lookupBy); 
```

请注意，这需要计算`EnumVal`' 的哈希，如果它没有预先计算，然后进行几次查找。如果枚举中有很多值，则此查找可能是值得的。否则，在少数项目上的循环可能与正负一样快 - 无论哪种方式，它都可以忽略不计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T03:18:15.167

特别是在您的情况下，`Foo.valueOf(String)`会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T03:53:59.963

`valueOf(String)`唯一适用于声明的`name`s 的`Enum`. 如果你想`enum`通过一些自定义值来查找，最好的方法是提供一个 find 方法：

```
public static Foo fromValue(String value) {
    for (Foo foo : Foo.values()) {
        if (foo.value.equals(value)) {
            return foo;
        }
    }
} 
```

# ruby-on-rails - 运行 rspec 时如何让 Rails.logger 打印到控制台/标准输出？

> ID：11770552
> 
> 赞同：90
> 
> 时间：2012-08-02T03:15:41.870
> 
> 标签：ruby-on-rails, logging, rspec, console, stdout

同标题：运行 rspec 时如何`Rails.logger`打印到控制台/标准输出？例如。

```
Rails.logger.info "I WANT this to go to console/stdout when rspec is running"
puts "Like how the puts function works" 
```

我也还`Rails.logger`想去`log/test.log`。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2015-09-17T10:36:47.243

对于 Rails 4.x，日志级别的配置与 Rails 3.x 稍有不同

将此添加到`config/environment/test.rb`

```
# Enable stdout logger
config.logger = Logger.new(STDOUT)

# Set log level
config.log_level = :ERROR 
```

记录器级别从以下位置在记录器实例上设置`config.log_level`：[https ://github.com/rails/rails/blob/v4.2.4/railties/lib/rails/application/bootstrap.rb#L70](https://github.com/rails/rails/blob/v4.2.4/railties/lib/rails/application/bootstrap.rb#L70)

**环境变量**

作为奖励，您可以允许使用具有默认值的环境变量覆盖日志级别，如下所示：

```
# default :ERROR
config.log_level = ENV.fetch("LOG_LEVEL", "ERROR") 
```

然后从 shell 运行测试：

```
# Log level :INFO (the value is uppercased in bootstrap.rb)
$ LOG_LEVEL=info rake test

# Log level :ERROR
$ rake test 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2014-01-31T21:59:52.570

对于 Rails 4，请参阅[此答案。](https://stackoverflow.com/a/32628272/798224)

对于 Rails 3.x，配置一个记录器`config/environments/test.rb`：

```
config.logger = Logger.new(STDOUT)
config.logger.level = Logger::ERROR 
```

这会将测试期间记录的任何错误交错到 STDOUT。您可能希望将输出路由到 STDERR 或使用不同的日志级别。

将这些消息发送到控制台和日志文件需要比 Ruby 内置的**Logger**类更强大的东西。[**日志记录**](https://github.com/TwP/logging)gem 会做你想做的事。将其添加到您的`Gemfile`中，然后在 中设置两个附加程序`config/environments/test.rb`：

```
logger = Logging.logger['test']
logger.add_appenders(
    Logging.appenders.stdout,
    Logging.appenders.file('example.log')
)
logger.level = :info
config.logger = logger 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-12-23T21:32:38.533

将日志作为[后台作业](http://tldp.org/LDP/abs/html/x9612.html)(&) 尾随，它将与 rspec 输出交错。

```
tail -f log/test.log &
bundle exec rspec 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-05-08T17:53:52.430

我喜欢的一个解决方案是执行以下操作，因为它将 rspec 输出与实际的 rails 日志输出分开：

*   打开第二个终端窗口或选项卡，并对其进行排列，以便您可以看到正在运行 rspec 的主终端以及新终端。
*   在第二个窗口中运行 tail 命令，以便在测试环境中看到 rails 日志。默认情况下，这可以像`$ tail -f $RAILS_APP_DIR/logs/test.log`或`tail -f $RAILS_APP_DIR\logs\test.log`对于 Window 用户
*   运行您的 rspec 套件

如果您正在运行像 iTerm 这样的多窗格终端，这将变得更加有趣，并且您可以`rspec`并排`test.log`输出。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-02T03:42:44.537

您可以在 spec_helper.rb 中定义一个向 Rails.logger.info 和 puts 发送消息并将其用于调试的方法：

```
def log_test(message)
    Rails.logger.info(message)
    puts message
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-26T10:29:26.203

我在rails 5.0中遇到了类似的问题。我的 api/request 规范没有将错误输出到控制台，而是输出到 log/test.log 文件中。其他测试类型正常输出错误到控制台。

更改`config.action_dispatch.show_exceptions`以`false`解决问题：

```
# config/environments/test.rb
config.action_dispatch.show_exceptions = false 
```

# ruby-on-rails - 如何针对枚举验证 Rails 模型？

> ID：11770555
> 
> 赞同：3
> 
> 时间：2012-08-02T03:15:47.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, rails-models

类似于 nodejs 的 mongoose 有一个枚举验证器，其中字段的值必须是预定义数组中的值之一，Rails 中的 mongoid 模型如何复制这种行为？

IE。

```
field :category, type: String --> must be in one of [categoryA, categoryB, categoryC] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T03:20:35.267

你可以使用这个：

```
validates :category, :inclusion => { :in => ["categoryA", "categoryB", "categoryC"] } 
```

# php - 确定对象属性是否为空

> ID：11770556
> 
> 赞同：15
> 
> 时间：2012-08-02T03:15:49.170
> 
> 标签：php

我觉得我在这里遗漏了一些东西。我一直在使用 PHP 的`empty()`函数来确定变量是否为空。我想用它来确定一个对象的属性是否为空，但不知何故它不起作用。这是一个简化的类来说明问题

```
// The Class 
class Person{
    private $number;

    public function __construct($num){
        $this->number = $num;
    }

    // this the returns value, even though its a private member
    public function __get($property){
        return intval($this->$property);
    }
} 
```

* * *

```
// The Code    
$person = new Person(5);

if (empty($person->number)){
    echo "its empty";
} else {
    echo "its not empty";
} 
```

所以基本上，`$person`对象的 number 属性应该有一个值 (5)。正如您可能已经猜到的那样，问题在于 php 回显“它是空的”。但不是！！！

但是，如果我将属性存储在变量中，然后评估它，它确实有效。

那么确定对象属性是否为空的最佳方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-02T03:22:38.393

您需要实现[__isset()](http://www.php.net/manual/en/language.oop5.overloading.php#object.isset)魔术方法。

> __isset() 通过在不可访问的属性上调用 isset() 或 empty() 来触发。

```
public function __isset($property){
    return isset($this->$property);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-19T20:32:22.227

```
if (empty(($person->number)))

/* OR */

if (!isset($person->nothing) || empty(($person->nothing))) 
```

将 () 放在 Object->Property 值周围将强制在调用空之前对其进行评估。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T03:21:18.393

检查返回值是否`null`相反。应该给你正确的答案。

# git - Git：设置远程存储库

> ID：11770558
> 
> 赞同：1
> 
> 时间：2012-08-02T03:15:55.340
> 
> 标签：git

我对 Git 很陌生，在理解设置远程存储库的步骤时遇到了一些困难。非常感谢一些指导。谢谢！=)

就我而言，我一直在我的 PC 上做一些项目。现在，我想创建一个共享远程存储库，该存储库将托管在我的 PC 上，以便我的队友可以从他们的 PC 访问。顺便说一句，我的团队是通过 LAN Connection 连接的。

我不确定我的做法是否正确。首先，我创建了一个名为 GIT_Repository 的存储库。接下来，我将所有项目文件复制并粘贴到该文件夹​​并提交。我相信这是一个本地存储库。我怎样才能使它成为一个远程存储库？如何配置 URL？

任何人都可以指导我吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T15:59:01.633

在另一个 SO question here 上有一些解决这个问题的方法

[Windows 局域网上的 Git](https://stackoverflow.com/questions/2230500/git-on-a-windows-lan)

来自那些认为不可能提供建议的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:33:52.590

无法为您提供指导，因为有很多方法可以提供对远程存储库的访问；您可以做些什么以及如何做，还取决于您打算用于托管的平台 (OS)。

至少您必须阅读并理解[这一点](http://git-scm.com/book/en/Git-on-the-Server)（但您现在可以跳过有关设置各种软件的详细信息）。然后，您必须评估可用的选择，了解您的团队成员将使用哪些平台来访问该共享存储库，进行一些进一步的研究，然后最终尝试实施解决方案。

由于您提供了关于您的团队使用哪种“PC”的零信息，我想我会做几个笔记以防万一：

*   可以在 Windows 上实现通过 SSH 和 HTTP[S] 访问 repo；它通常需要额外的油漆来设置，但这是可行的；HOWTO 可以在网上找到。
*   如果您经营一家仅限 Windows 的商店并且想要一些非常简单的东西，您可以从您的回购中分享；[它](https://stackoverflow.com/q/11240817/720999)需要小心。

至于用于访问 repo 的 URL，它们高度依赖于访问方案，因此目前无法回答这个问题。

# php - PHP中preg_replace（）的字符串的最大长度？

> ID：11770559
> 
> 赞同：5
> 
> 时间：2012-08-02T03:16:17.227
> 
> 标签：php, regex

我发现如果我尝试对一个很长的字符串使用 preg_replace，PHP 会向我的浏览器返回一个空页面，而不会显示错误消息。我能够在我的测试环境中重现这个错误。preg_replace 可以处理的字符串的最大长度是多少？可以增加这个长度吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-07T07:07:33.243

对于超过 4M 的 $pattern 匹配字符串，我也遇到了同样的情况。可能您将不得不使用 ini_set() 或编辑 php.ini来增加**pcre.backtrack_limit 。**

检查 preg 是否有最后一个错误：

```
 $retval = preg_replace ($pattern, $replacement, $subject);
    if ($retval === null) {
      // see http://php.net/manual/en/function.preg-last-error.php
      echo preg_last_error();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T23:45:04.030

我也遇到了这个问题，使用这个正则表达式（我在不记得的地方找到了它）：

```
'~\[quote(?:=([^\]]+))?\]((?:(?R)|.)*?)\[/quote\]~s' 
```

这用于替换嵌套的引号 BBcode，使用**(?R)**递归模式修饰符。

当引号之间的字符串接近 300 个字符（确实很少）时，我的浏览器中会出现“重置连接”。Apache 或 PHP 的错误日志中没有任何内容（我正在使用 PHP 5.4.16 运行 Wampserver 2.4）。

似乎 (?R) 是一个[实验设施](http://php.net/manual/en/regexp.reference.recursive.php)。在这篇文章中：[PHP，preg_replace 中的嵌套模板](https://stackoverflow.com/questions/12912165/php-nested-templates-in-preg-replace)，有一个带有 (?R) 的正则表达式，详细解释了它，这使我找到了一个适用于更长字符串的解决方案：

```
'%\[quote(?:=([^\]]+))?\]((?:[^[]*(?:\[(?!/?quote(?:=[^\]]+)?\])[^[]*)*|(?R))*)\[/quote\]%x' 
```

希望能帮助到你。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-18T05:31:27.627

pcre.backtrack_limit 的默认值为 1000000。如果您的字符串长度高于该值，您可以通过将其添加到脚本的开头轻松解决它：

```
ini_set('pcre.backtrack_limit', 5000000); 
```

在上面的代码中，字符串的最大长度已设置为 5000000。根据您自己的需要进行调整。

# python - web2py 表单返回 NoneType 对象

> ID：11770560
> 
> 赞同：0
> 
> 时间：2012-08-02T03:16:20.057
> 
> 标签：python, web2py

```
form=FORM('Your name:',INPUT(_name='_name', requires=IS_NOT_EMPTY()),
          'Your email:',INPUT(_email='_email', requires=IS_NOT_EMPTY()),
          'Your message:',INPUT(_message='_message', requires=IS_NOT_EMPTY()),
          INPUT(_type='submit'))
if form.accepts(request,session):
    response.flash = 'Your information has been sent successfully'
    message = [form.vars._name, form.vars._email, form.vars._message]
    mail.send(to='me@gmail.com', reply_to=form.vars._email,
        subject='Suggestion',
        message='<html>%s</html>' % message) 
```

我无法创建一个简单的表单，它将三个字段通过电子邮件发送到一个帐户 - “名称”、“电子邮件”和“消息”。提交表单时，仅识别并发送“名称”，而其他两个变量始终返回 NoneType 对象。因此，电子邮件看起来像 ['Person's Name', 'None', 'None']。我无法弄清楚最后两个变量与第一个变量有何不同。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:37:17.287

应该：

```
INPUT(_name='_email', ...),
INPUT(_name='_message', ...), 
```

助手的“_name”参数转换为标签`INPUT()`的“name”属性。`<input>`因此，`INPUT(_name='email')`将导致`<input name="_email">`，这将导致`request.vars._email`包含在“_email”输入字段中输入的值，然后将复制到`form.vars._email`.

# iphone - 振动命令仅在“设置”>“声音”>“振动”开关打开时有效

> ID：11770566
> 
> 赞同：1
> 
> 时间：2012-08-02T03:17:21.813
> 
> 标签：iphone, objective-c, jailbreak

我正在使用 AudioServicesPlaySystemSound (kSystemSoundID_Vibrate) 来振动手机，但它仅在“设置”>“声音”>“振动”开关打开时才有效。当“设置”>“声音”>“振动”开关关闭可编程性时，如何振动我的手机。我的手机越狱了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:42:54.207

需要打开振动选项开关。

您将需要编辑**com.apple.springboard.plist**

```
NSString *sbPath = @"/var/mobile/Library/Preferences/com.apple.springboard.plist";

NSMutableDictionary *sbDict = [[NSMutableDictionary alloc] initWithContentsOfFile:sbPath];

[sbDict setValue:[NSNumber numberWithBool:YES] forKey:@"ring-vibrate"];
[sbDict setValue:[NSNumber numberWithBool:YES] forKey:@"silent-vibrate"];
[sbDict writeToFile:sbPath atomically:YES];

/* Check to make sure the settings took */
AudioServicesPlaySystemSound (kSystemSoundID_Vibrate); 
```

您还可以发送通知以更新首选项。我不确定这是否仍然有效。

```
notify_post("com.apple.SpringBoard/Prefs"); 
```

# regex - OCaml 中“不属于”的正则表达式

> ID：11770567
> 
> 赞同：2
> 
> 时间：2012-08-02T03:17:40.743
> 
> 标签：regex, ocaml, lex, lexer

我想`non-line-termination-character = <any character other than %x000D / %x000A>`在`lexer.mll`. 我试过`let non_line_termination_character = [^('\x0D' '\x0A')]`了，但它给了我一个语法错误。

我认为`let non_line_termination_character = [^'\x0D'] intersect [^'\x0A']`会起作用，但我不知道如何表达`intersect`。

有人可以帮忙吗？

PS：规则位于`12.2.4 Regular expressions`：[http ://caml.inria.fr/pub/docs/manual-ocaml/manual026.html](http://caml.inria.fr/pub/docs/manual-ocaml/manual026.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:43:53.827

ocamllex 中字符集的语法不允许使用括号。以下对我有用：

```
let non_line_termination_character = [^ '\x0d' '\x0a' ] 
```

ocamllex 中没有用于相交正则表达式的通用运算符。但是对于两个字符集 a 和 b 你可以写`a # (a # b)`.

```
let nona = [^ 'a']
let nonb = [^ 'b']
let nonab = nona # (nona # nonb) 
```

（奇怪的是，我的测试表明这适用于我尝试的每个字符集，但它对于非 CR 和非 LF 的特定示例失败。它实际上看起来像一个错误。但也许我遗漏了一些明显的东西。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T03:46:56.657

`[^'\x0D']`include描述的集合，`'\x0A'`反之亦然，所以这两个集合的并集包含了一切。我认为这就是你想要的：

```
[^'\x0D' '\x0A'] 
```

# c++ - 互斥锁是如何真正工作的？

> ID：11770571
> 
> 赞同：37
> 
> 时间：2012-08-02T03:17:57.147
> 
> 标签：c++, multithreading, concurrency, mutex

互斥锁背后的想法是在任何时候只允许一个线程访问一段内存。如果一个线程锁定了互斥体，任何其他锁定尝试都将阻塞，直到第一个解锁。然而，这是如何实现的呢？要锁定自己，互斥锁必须在某个地方设置一个表示它已锁定的位置。但是，如果第二个互斥锁同时读取第一个互斥锁，该怎么办。更糟糕的是，如果他们同时锁定互斥锁怎么办？互斥体将屈服于它旨在防止的相同问题。

互斥锁是如何真正工作的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-02T03:24:17.593

低级原子操作。这些本质上是在硬件中实现的互斥锁，除了您只能以原子方式执行很少的操作。

考虑以下等效伪代码：

```
mutex global_mutex;
void InterlockedAdd(int& dest, int value) {
    scoped_lock lock(mutex);
    dest += value;
}
int InterlockedRead(int& src) {
    scoped_lock lock(mutex);
    return src;
}
void InterlockedWrite(int& dest, int value) {
    scoped_lock lock(mutex);
    dest = value;
} 
```

这些功能是由 CPU 作为指令实现的，它们在不同程度上保证了线程之间的一致性。确切的语义取决于所讨论的 CPU。x86 提供顺序一致性。这意味着操作的行为就像它们是按某种顺序按顺序发出的一样。这显然涉及到一些阻塞。

您可以准确地推测原子操作可以用互斥锁来实现，反之亦然。但通常，原子操作由硬件提供，然后由操作系统在它们之上实现互斥锁和其他同步原语。这是因为有些算法不需要完整的互斥体并且可以操作所谓的“无锁”，这意味着只使用原子操作来实现一些线程间的一致性。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-02T03:24:09.720

过去使用的一个简单实现是使用 CPU 级别的原子“锁定和交换”指令。这是一条特殊指令，它以原子方式将给定值与某个内存位置中的值交换。

线程可以通过尝试将 1 值交换到内存位置来获取这样的互斥锁。如果该值返回为 0，则线程将假定它具有互斥锁并继续。否则，如果返回值为 1，则线程将知道某个*其他*线程当前拥有互斥锁。在这种情况下，它会等到再次尝试。

以上是对简单系统中可能发生的情况的高度简化概述。如今，真正的操作系统要复杂得多。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-07-21T03:43:44.337

这是互斥锁需要工作的快速概述，它是我的完整文章[互斥锁如何工作的缩写形式？](https://mortoray.com/2011/12/16/how-does-a-mutex-work-what-does-it-cost/)

*   内存中有一个整数表示锁定状态，值为 1 或 0。
*   互斥体需要一个原子`compare_and_swap`函数，它可以原子地尝试修改该值并报告它是否成功。这允许线程同时检查和修改状态。
*   操作系统需要提供一个函数在互斥锁被锁定的情况下等待。在 Linux 上，低级函数是`futex`. 这会将线程放入队列中，并监视内存中的整数。
*   涉及的操作还包括数据围栏，以防止内存中的修改在锁定之前可见，并且在锁定之后完全可用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-02T03:32:48.500

您所需要的就是以原子方式进行。它可以由硬件提供，例如原子比较和交换指令，也可以由操作系统通过系统调用提供。一旦它进入操作系统域，就很容易确保只有一个线程试图锁定互斥锁。

在实践中，这两种方法是结合的。参见例如 Linux 的 futexes。

# html - 是否有必要使用媒体查询？

> ID：11770579
> 
> 赞同：2
> 
> 时间：2012-08-02T03:18:58.077
> 
> 标签：html, css, web, media-queries

`media queries`尽管我对这个领域很陌生，但我真的很困惑。我开发了一个网站，它`width:1024px`。它在所有浏览器中都能正常工作。它不是一个移动网站，所以有必要使用`media queries`。我用谷歌搜索，我得到了这样的答案，根据屏幕大小，我们可以使用媒体查询（尤其是对于移动网站）

但我不想在移动设备上工作我的网站，

**我的问题**

**`media queries` 我们开发网站时是否必须使用**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:34:03.443

基本上没有，

如果您更喜欢使用多种屏幕尺寸，那么只需要考虑媒体查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:24:01.663

是强制性的吗？它取决于你。

用户在从台式机到笔记本电脑到上网本到平板电脑到手持设备的所有设备上查看您的网站时都有一定的期望。他们需要高水平的用户体验满意度。为此，您可以使用`Media queries`

`Media queries`是向不同设备提供不同风格的绝佳方式，为每种类型的用户提供最佳体验。作为 CSS3 规范的一部分，媒体查询扩展了控制样式应用方式的媒体属性的作用

试试这个链接，你会得到一个好主意`media queries`

[什么时候可以使用 CSS3 媒体查询？](http://caniuse.com/css-mediaqueries)

[http://www.adobe.com/devnet/dreamweaver/articles/introducing-media-queries.html](http://www.adobe.com/devnet/dreamweaver/articles/introducing-media-queries.html)

[http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:04:27.357

不，没有任何要求网站应该使用媒体查询。

此外，仅仅使用媒体查询是没有用的。它们用于为不同的视口或设备设置不同的演示样式。如果您不打算考虑有人可能会在小于 1024 像素的窗口中查看您的页面，我不明白您为什么会考虑使用媒体查询（至少对于宽度问题，这是迄今为止最与媒体查询相关）。

关键是媒体查询本质上是“if ... then ...”结构中的条件。如果“then”部分只有一种选择，则该条件没有用。

# c# - 运行相互依赖的脚本/应用程序的标准做法

> ID：11770580
> 
> 赞同：1
> 
> 时间：2012-08-02T03:18:58.877
> 
> 标签：c#, sql, ssis, etl

我需要您就如何正确设置此项目提供指导。我使用我编写的一些工具、我下载的一些工具和我的 SSIS 包从几个不同的来源提取数据。

以下是应该发生的事情的时间表：

> 1.  文件从 ftp/sftp 站点或 windows 目录中获取
> 2.  某些文件需要使用 PGP 解密
> 3.  所有源文件都移动到它们指定的源文件位置
> 4.  SSIS 包运行以读取和加载所有数据并执行操作

**问题：**我如何确保这些单独的应用程序不会相互碰撞？是的，我可以将它们全部设置为在不同时间安排任务，但是如果以前的应用程序卡在某个地方怎么办？是否有最佳实践方法来运行相互依赖且不得重叠的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T04:43:00.680

**调度**

对于调度使用 Sql Server Agent。

这是[一篇让您入门的文章](http://answers.oreilly.com/topic/1568-how-to-use-sql-server-agent/)

**简单的多步骤作业**

如果您的工作的不同步骤之间的关系非常简单（a 然后 b 然后 c 等），您也可以使用 SQL Server 代理来处理它。

这是[一篇文章](http://databases.about.com/od/sqlserver/ss/sql_server_agent.htm)，展示了如何在同一个 sql server 代理作业中使用多个步骤。尤其见第 4 和 5 页。

**更复杂的工作**

如果你的工作在需要运行的不同事物之间的关系方面变得非常复杂，我建议使用一个主 SSIS 包，它本身可以调用其他 SSIS 包。您仍然使用 Sql Server 代理进行调度。在这种情况下，代理作业只是启动主包。

主包通常使用执行包任务调用子包。这个过程对我的团队来说效果很好。也就是说，您可能需要使用脚本任务的额外灵活性。在这种情况下，请参阅[这篇文章。](http://www.duncansutcliffe.com/?p=38)

# wordpress - woocommerce 结帐错误：您无权编辑此帖子

> ID：11770582
> 
> 赞同：0
> 
> 时间：2012-08-02T03:19:04.190
> 
> 标签：wordpress, checkout, woocommerce

我的 woocommerce 帐户在这里遇到了一些问题，

问题是当我尝试从结帐表格中结帐时，我总是收到此错误消息

“您无权编辑此帖子”

我是 wocommerce 的新手，我在 google 上搜索它，但在那里没有得到任何信息..

这是屏幕截图

![在此处输入图像描述](../Images/ed83d6c95215df392938c3b936d50a91.png)

这里的任何人都可以帮助我...

谢谢之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T02:16:52.673

显示的错误是“您无权编辑帖子”。

原来是和一个插件有关，wp-easy seo 那个，当我停用那个插件后，就可以下单了。

关闭它，它会工作。

# android - 安卓模拟器无法启动

> ID：11770583
> 
> 赞同：0
> 
> 时间：2012-08-02T03:19:39.853
> 
> 标签：android

我的 Android 模拟器已停止工作。没有错误。它只是永远启动。我已经重新安装了 eclipse indigo、Android SDK 甚至 Java se。这就是它在控制台中显示的内容

```
[2012-08-02 13:05:14 - Task Reminder] Android Launch!
[2012-08-02 13:05:14 - Task Reminder] adb is running normally.
[2012-08-02 13:05:14 - Task Reminder] Performing com.android.taskreminder.TaskReminderActivity activity launch
[2012-08-02 13:05:14 - Task Reminder] Automatic Target Mode: launching new emulator with compatible AVD 'Device1'
[2012-08-02 13:05:14 - Task Reminder] Launching a new emulator with Virtual Device 'Device1' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:22:12.053

您在 Logcat 控制台中看到什么了吗？

您可以尝试的其他一些事情：

*   您是否尝试过删除 AVD 并创建一个新的？
*   您拥有的所有版本的 Android SDK 都会发生这种情况吗？
*   建议也选择“擦除用户数据”，然后尝试重新启动 AVD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:37:45.887

在 AVD 管理器中，您需要删除旧的 API 级别并添加新的 API - 然后应该打开 Android 模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T03:47:46.747

在 eclipse ddms 设备视图中执行 adb 重置

```
Go to adb shell try this

    adb shell stop
    adb shell start
    restart adb by using adb kill-server and adb start-server then check adb devices 
```

# php - 为什么我的 PHP 上传脚本在 filezilla（其他机器/服务器）中导出时不起作用？

> ID：11770585
> 
> 赞同：0
> 
> 时间：2012-08-02T03:19:47.373
> 
> 标签：php

//这是一个示例文件上传。它在我的本地主机中运行良好，但在 Intranet 中无法运行.. //这是我的代码

```
<?php require_once "../session.php" ?>
<?php
$host='localhost'; // My hostname
$username='root'; // Mysql username
$password='*******'; // Mysql password
$db_name='jobs'; // DB name

// Connect to server and select database.
mysql_connect($host, $username, $password)or die("Cannot Connect");
mysql_select_db($db_name);

// Where the file is going to be placed 
$TARGET_PATH = "uploads/";
// Get our POSTed variables
$uploadedfile = $_FILES['uploadedfile'];
// Sanitize our inputs
$uploadedfile['name'] = mysql_real_escape_string($uploadedfile['name']);

// Build our target path full string.  This is where the file will be moved do
// i.e.  images/picture.jpg
$TARGET_PATH .= $uploadedfile['name'];

/* Add the original filename to our target path.  
Result is "uploads/filename.extension" */
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if (move_uploaded_file($uploadedfile['tmp_name'], $TARGET_PATH))
{
    $sql = "update personal set resume='" . $uploadedfile['name'] . "' where username='".$_SESSION['name']."'";
    $result = mysql_query($sql) or die ("Could not insert data into DB: " . mysql_error());
    header("Location: ../scripts/view.php");
    exit;
}
else
    {
        echo "There was an error uploading the file, please try again!";
    }

?> 
```

这仅适用于我的电脑（使用 wamp 的本地主机）。:((

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:32:57.973

确保对`uploads/`文件夹具有适当的权限。使用 Filezilla 进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:39:00.093

我已经检查了我的服务器它的工作正常我认为上传目录的权限问题或者可能是上传目录的路径错误。

```
<html>
<body>

<form action="fileupload.php" method="post" enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="uploadedfile" id="uploadedfile" />
<br />
<input type="submit" name="submit" value="Submit" />
</form>

</body>
</html> 
```

//你的php代码

```
<?php require_once "../session.php" ?>
<?php
$host='localhost'; // My hostname
$username='root'; // Mysql username
$password=''; // Mysql password
$db_name='blog'; // DB name

// Connect to server and select database.
mysql_connect($host, $username, $password)or die("Cannot Connect");
mysql_select_db($db_name);

// Where the file is going to be placed 
$TARGET_PATH = "uploads/";
// Get our POSTed variables
$uploadedfile = $_FILES['uploadedfile'];
// Sanitize our inputs
$uploadedfile['name'] = mysql_real_escape_string($uploadedfile['name']);

// Build our target path full string.  This is where the file will be moved do
// i.e.  images/picture.jpg
$TARGET_PATH .= $uploadedfile['name'];

/* Add the original filename to our target path.  
Result is "uploads/filename.extension" */
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if (move_uploaded_file($uploadedfile['tmp_name'], $TARGET_PATH))
{
    echo $sql = "update personal set resume='" . $uploadedfile['name'] . "' where username='".$_SESSION['name']."'";
    $result = mysql_query($sql) or die ("Could not insert data into DB: " . mysql_error());
    header("Location: ../scripts/view.php");
    exit;
}
else
    {
        echo "There was an error uploading the file, please try again!";
    }

?> 
```

# c# - 如何在c#中获取按钮的BackgroundImage路径

> ID：11770587
> 
> 赞同：0
> 
> 时间：2012-08-02T03:20:15.740
> 
> 标签：c#, winforms, image, path

我正在尝试使用一种方法获取所有按钮的背景图像的路径，但我似乎无法获取路径。这是我的代码

```
b1.BackgroundImage = Image.FromFile(C:\\Users\\m\\Documents\\Visual Studio 
2010\\Projects\\PApp\\Papp\\1.jpg) ;

b2.BackgroundImage = Image.FromFile(C:\\Users\\m\\Documents\\Visual Studio 2010\\Projects\\PApp\\Papp\\2.jpg) ;

Console.WriteLine(b2.BackgroundImage);
Console.WriteLine(b1.BackgroundImage); 
```

我可以在按钮中显示图像，但我希望它在控制台中显示路径，但我得到的只是 System.Drawing.Bitmap。顺便说一下，路径是静态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:30:50.653

你不能。加载位图后，位图对象会忘记路径，因为它不再需要它。

您可以创建一个新类并让它继承按钮。添加一个名为 BackgroundImagePath 的属性，该属性执行上述代码以设置基类（按钮）BackgroundImage。也将它存储在一个私有变量中，然后在属性 get 中咳出。

那是装的。但这是唯一的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:26:18.937

如果您使用 Winforms 设计器设置了 BackgroundImage 属性，Visual Studio 会在 .Designer.cs 文件中为您生成以下行：

```
this.button1.BackgroundImage = global::WindowsFormsApplication5.Properties.Resources.my_image_name; 
```

如您所见，它将 System.Drawing.Bitmap 类型的值影响到 System.Drawing.Image 类型的属性。您在这里拥有的唯一信息是图像本身。

如果您自己添加图像：

```
string resourceKey = "my_image_name";
this.button1.BackgroundImage = (System.Drawing.Image)Properties.Resources.ResourceManager.GetObject(resourceKey); 
```

# mongodb - mongodb序列化子集结果

> ID：11770590
> 
> 赞同：3
> 
> 时间：2012-08-02T03:20:48.370
> 
> 标签：mongodb, mongodb-php

我有这个简单的数据库，其中包含元素子集：

```
{ "_id" : ObjectId("5019eb2356d80cd005000000"),
    "photo" : "/pub/photos/file1.jpg",
    "comments" : [
        {
            "name" : "mike",
            "message" : "hello to all"
        },
        {
            "name" : "pedro",
            "message" : "hola a todos"
        }
    ]
},
{ "_id" : ObjectId("5019eb4756d80cd005000001"),
    "photo" : "/pub/photos/file2.jpg",
    "comments" : [
        {
            "name" : "luca",
            "message" : "ciao a tutti"
        },
        {
            "name" : "stef",
            "message" : "todos bien"
        },
        {
            "name" : "joice",
            "message" : "vamos a las playa"
        }
    ]
} 
```

当我执行子集查找时： db.photos.find({},{"comments.name":1})

我收到这个结构：

```
[
    {
        "_id" : ObjectId("5019eb2356d80cd005000000"),
        "comments" : [
            {
                "name" : "mike"
            },
            {
                "name" : "pedro"
            }
        ]
    },
    {
        "_id" : ObjectId("5019eb4756d80cd005000001"),
        "comments" : [
            {
                "name" : "luca"
            },
            {
                "name" : "stef"
            },
            {
                "name" : "joice"
            }
        ]
    }
] 
```

但我想得到一个简单的一维数组，像这样（或类似的）：

```
[
    {
        "name" : "mike"
    },
    {
        "name" : "pedro"
    },
    {
        "name" : "luca"
    },
    {
        "name" : "stef"
    },
    {
        "name" : "joice"
    }
] 
```

我需要用mongo php官方驱动来实现这个查询，但是语言并不重要，我只是想了解通过mongo shell可以通过什么逻辑来完成这个

天呐！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:30:42.577

最简单的选择是使用[distinct()](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)：

```
>db.photos.distinct("comments.name");
[ "mike", "pedro", "joice", "luca", "stef" ] 
```

这是另一个使用 JavaScript 的示例：

```
// Array to save results
> var names = []

// Find comments and save names
> db.photos.find({},{"comments.name":1}).forEach(
          function(doc) { doc.comments.forEach(
              function(comment) {names.push(comment.name)})
          })

// Check the results
> names
[ "mike", "pedro", "luca", "stef", "joice" ] 
```

以下是在即将推出的 MongoDB 2.2 中使用新聚合框架的示例：

```
db.photos.aggregate(
  { $unwind : "$comments" },
  { $group : {
     _id: "names",
     names: { $addToSet : "$comments.name" }
  }},
  { $project : {
     '_id' : 0,
     'names' : 1,
  }}
) 
```

# android - 如果 editText 为空，则结束方法

> ID：11770591
> 
> 赞同：0
> 
> 时间：2012-08-02T03:20:53.293
> 
> 标签：android, android-layout, android-emulator, android-widget, android-source

这是 Java 中的小费计算器应用程序。如果两个字段都没有填写，它应该在 a 中显示一条错误消息`TextView`，但它只会冻结应用程序......有什么提示吗？

```
package tip.calculator;

import android.os.Bundle;
import android.app.Activity;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;
import android.view.View;
import android.widget.Button;

public class TipCalculator extends Activity 
{

private Button enter;
EditText myEditField ;
EditText myEditField2;
float percentage = 0;
float percentageInp = 0;
float billAmount = 0;
double output = 0; 
String output1 = "";
Button clearButton ;
TextView textView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myEditField = (EditText) findViewById(R.id.percentText);
    enter = (Button)findViewById(R.id.button1);
    myEditField2 = (EditText) findViewById(R.id.billText);
    clearButton = (Button) findViewById(R.id.clearButton);

    enter.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

             TextView errors;
             textView = (TextView) findViewById(R.id.textView1);
             errors = (TextView) findViewById(R.id.errorText);    

             if(myEditField.getText().equals("")){
                 errors.setText("Percent must be filled in");

             }

             if(myEditField.getText().equals("")){
                 errors.setText("Bill Amount must be filled in");

             }

            percentageInp = Float.parseFloat(myEditField.getText().toString());
            billAmount = Float.parseFloat(myEditField2.getText().toString());

            percentage = ((float)percentageInp /100);

            output = (double)(billAmount * percentage);

            double result = output * 100;
            result = Math.round(result);
            result = result / 100;

            output1 = Double.toString(result);

            textView.setText(output1 + " $");

        }
    });

    clearButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            percentage = 0;
            output = 0;
            output1 = "";

            TextView textView = (TextView)findViewById(R.id.errorText);
            textView.setText("");

            TextView textView2 = (TextView)findViewById(R.id.percentText);
            textView2.setText("");

            TextView textView3 = (TextView)findViewById(R.id.billText);
            textView3.setText("");

            TextView textView1 = (TextView)findViewById(R.id.textView1);
            textView1.setText("");

            percentageInp = 0;
            billAmount = 0;

            myEditField.clearComposingText();
            myEditField2.clearComposingText();

            return;
        }

    });
}* 
```

}

这是布局xml（由请求提供）...

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/errorText"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:onClick="onEnterClick" >

    <EditText
        android:id="@+id/billText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="Bill Amount"
        android:inputType="numberDecimal|textAutoComplete"
        android:singleLine="true" />

    <EditText
        android:id="@+id/percentText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/billText"
        android:layout_below="@+id/billText"
        android:ems="10"
        android:hint="Percent"
        android:inputType="number"
        android:singleLine="true" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/percentText"
        android:layout_centerHorizontal="true"
        android:text="Calculate" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/percentText"
        android:layout_toRightOf="@+id/billText"
        android:text="$"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/percentText"
        android:layout_alignLeft="@+id/textView2"
        android:text="%"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/clearButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button1"
        android:layout_centerHorizontal="true"
        android:text="Clear" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/textView3"
        android:layout_below="@+id/clearButton"
        android:text="Solution Will Appear Here"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button1"
        android:layout_below="@+id/errorText"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

这是 LogCat 输出（仅限错误）

```
08-01 20:49:08.424: E/(13643): URE: SkPaint in getMeasureCacheProc index: 2
08-01 20:49:08.689: E/(13643): URE: SkPaint in getMeasureCacheProc index: 2
08-01 20:49:10.844: E/(13643): URE: SkPaint in getMeasureCacheProc index: 2
08-01 20:49:12.074: E/(13643): URE: SkPaint in getMeasureCacheProc index: 2
08-01 20:49:12.254: E/(13643): URE: SkPaint in getMeasureCacheProc index: 2
08-01 20:49:16.649: E/AndroidRuntime(13643): FATAL EXCEPTION: main
08-01 20:49:16.649: E/AndroidRuntime(13643): java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to android.widget.TextView
08-01 20:49:16.649: E/AndroidRuntime(13643):    at tip.calculator.TipCalculator$2.onClick(TipCalculator.java:91)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at android.view.View.performClick(View.java:3620)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at android.view.View$PerformClick.run(View.java:14292)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at android.os.Handler.handleCallback(Handler.java:605)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at android.os.Looper.loop(Looper.java:137)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at android.app.ActivityThread.main(ActivityThread.java:4507)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at java.lang.reflect.Method.invoke(Method.java:511)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-01 20:49:16.649: E/AndroidRuntime(13643):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:32:28.357

为什么你`return`有`onClick`？你也有一个`*`倒数第二个`}`我不知道这是否能解决你的问题，但它引起了我的注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:24:38.867

从您的 LogCat 中，我知道 ID 没有`TextView`errorText *，*但是您在编译时看不到任何错误，因为您有一个`RelativeLayout`带有此 ID 的错误；但是你`ClassCastException`在运行时得到错误。

```
 errors = (TextView) findViewById(R.id.errorText); 
```

此外，请始终使用`""..equals(myEditField.getText())`（`myEditField.getText().equals("")`即首先使用硬编码值）。

否则，如果您`EditText`为空，`myEditField.getText()`将返回*null*，因此尝试在*null*上使用 equals() 方法时会出错。

或者，您可以使用`myEditField.getText().length() = 0`来检查 是否`EditText`为空。

# android - 使用 SL4A (Python) 和蓝牙

> ID：11770594
> 
> 赞同：3
> 
> 时间：2012-08-02T03:21:07.607
> 
> 标签：android, python, bluetooth, sl4a

寻找一些指示让我开始。

我的左手有一个运行 ICS 的 SGS2。我已经启动并运行了 SL4A 并安装了 Python 2.6.2

在我的右手里，我有一个通用的中国蓝牙 RFID 阅读器。它工作，它读取标签（它有一个显示器），它与手机配对。

我希望他们玩得很好——我想编写一些脚本来持续监视设备并在传输代码时捕获代码。

我不是 Python 专家，但我已经使用它在 Web 服务器上构建简单的 I/O 作业有一段时间了，所以我几乎可以找到自己的方法。

但不同寻常的是，我在处理这个问题时遇到了真正的问题——我找不到任何“蓝牙和 SL4A 入门”资源来克服建立持久连接和监控输出的第一步。

有小费吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T01:36:29.610

it seems that what you need is the bluetooth facade. Here are some commands pertaining to bluetooth that might be helpful to you:

```
bluetoothAccept
bluetoothActiveConnections
bluetoothConnect
bluetoothDiscoveryCancel
bluetoothDiscoveryStart
bluetoothGetConnectedDeviceName
bluetoothGetLocalAddress
bluetoothGetLocalName
bluetoothGetRemoteDeviceName
bluetoothGetScanMode
bluetoothIsDiscovering
bluetoothMakeDiscoverable
bluetoothRead
bluetoothReadBinary
bluetoothReadLine
bluetoothReadReady
bluetoothSetLocalName
bluetoothStop
bluetoothWrite
bluetoothWriteBinary
checkBluetoothState
toggleBluetoothState 
```

To call any of these commands you would do something like

```
import android
droid = android.Android()
#call your commands with droid.bluetoothcommand
droid.bluetoothDiscoveryStart()
#or
droid.toggleBluetoothState(True) 
```

Here is an example of some bluetooth functions, it is included with SL4A, but I added the comments for clarity:

```
import android #for bluetooth functions
import time #for waiting

#get everything setup
droid = android.Android()

#turn on bluetooth
droid.toggleBluetoothState(True)

#ask user
droid.dialogCreateAlert('Be a server?')
droid.dialogSetPositiveButtonText('Yes')
droid.dialogSetNegativeButtonText('No')
droid.dialogShow()

#get user response to question
result = droid.dialogGetResponse()

#if the result is 'Yes' ('positive') then is_server is set to True
is_server = result.result['which'] == 'positive'

if is_server:
  #so if is_server is true make the device discoverable and accept the next connection
  droid.bluetoothMakeDiscoverable()
  droid.bluetoothAccept()
else:
  #attempts to connect to a device over bluetooth, the logic being that if the phone
  #is not receiving a connection then the user is attempting to connect to something
  droid.bluetoothConnect()

if is_server:
  result = droid.getInput('Chat', 'Enter a message').result #Gets a message to send 
  #via bluetooth
  if result is None:
    droid.exit() #exit if nothing is in the message
  droid.bluetoothWrite(result + '\n') #otherwise write the message

while True: #receives a message
  message = droid.bluetoothReadLine().result
  droid.dialogCreateAlert('Chat Received', message)
  droid.dialogSetPositiveButtonText('Ok')
  droid.dialogShow()
  droid.dialogGetResponse()
  result = droid.getInput('Chat', 'Enter a message').result
  if result is None:
    break
  droid.bluetoothWrite(result + '\n')

droid.exit() 
```

Finally, for a full list of bluetooth commands, check out [http://code.google.com/p/android-scripting/wiki/ApiReference](http://code.google.com/p/android-scripting/wiki/ApiReference) and scroll down to the bluetooth facade. Best of luck!

# html - 使这种布局流畅的最佳方法是什么？

> ID：11770596
> 
> 赞同：1
> 
> 时间：2012-08-02T03:21:14.823
> 
> 标签：html, css

我想知道，用纯 CSS 制作这个布局的最佳结构是什么。箭头可以是图像。

[http://www.labonedesign.com.br/layout_2012.png](http://www.labonedesign.com.br/layout_2012.png)

我需要一个流畅的布局，但我不知道怎么做。

粉红色是菜单容器，棕色是我的内容容器。

我已经尝试过了，但是在小分辨率下这不起作用：

```
 <body>

    <div class="glob">
    <div class="main">
        <div class="wrap_lateral">
            <div class="lateral">

            </div>
        </div>
        <div class="conteudo">

        </div>
    </div>
    </div>  

 </body> 
```

CSS：

```
body {position:absolute; min-width:100%; min-height:700px; width:100%; height:100%; overflow:hidden;}
.glob {position:absolute; width:100%; height:100%; overflow:hidden;}
.main {margin:0px auto 0 auto; width:100% z-index:2; height:100%;}

.wrap_lateral{
    width:20%;
    height:100%;
    float:left;
    background:#FFCC00 url(../img/seta.png) 330px center no-repeat;
}

.lateral{
    position:relative;
    left:0;
    top:0;
    width:330px;
    height:100%;
    float:left;
    background:#ff0066;
}

.conteudo{
    width:80%;
    height:100%;
    float: left;
    background:#CC0000;
} 
```

PS.：我是在 Photoshop 上做的 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:44:32.143

我做了一个简化的例子，似乎符合您提供的图像和描述。这是你要找的吗？

**HTML**

```
<nav></nav>
<div></div>
<section></section> 
```

**CSS**

```
nav { /* left bar */
    position: absolute;
    height: 100%;
    width: 200px;
    background: red;
}
div { /* CSS triangle */
    position: absolute;
    top: 50%;
    left: 200px;
    height: 0;
    width: 0;
    border-left: 20px solid red;
    border-top: 20px solid transparent;
    border-bottom: 20px solid transparent;
}
section { /* box */
    position: absolute;
    height: 200px;
    width: 100%;
    width: calc(100% - 220px);
    width: -webkit-calc(100% - 220px);
    width: -moz-calc(100% - 220px);
    top: 50%;
    top: calc(50% - 80px);
    top: -webkit-calc(50% - 80px);
    top: -moz-calc(50% - 80px);
    left: 220px;
    background: brown;
} 
```

**[jsFiddle 演示](http://jsfiddle.net/AF9zp/1/)**

它使用 CSS 三角形而不是图像。您可能需要对其进行一些调整以适合您的具体情况，因为您现在所拥有的似乎没有任何内容。

**编辑：**

上面使用的标签来自新的 HTML5 规范，不适用于旧版浏览器。您可以通过将`nav`和`section`标签替换为 来解决此问题`div`。

可以使单独的样式表仅针对 IE 或特定版本的 IE。

*仅限 IE：*

```
<!--[if IE]>
    <link rel="stylesheet" type="text/css" href="ie.css" />
<![endif]--> 
```

*仅限 IE 7：*

```
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7.css">
<![endif]--> 
```

*IE版本小于9：*

```
<!--[if lt IE 9]>
    <link rel="stylesheet" type="text/css" href="ielt9.css" />
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:28:37.710

### 将此*CSS*用于您的工作：

```
.lateral img {position: absolute; top: 42.5%; right: -50px; width: 100px;} 
```

看看这个**小提琴**：http: [//jsfiddle.net/QhUVA/](http://jsfiddle.net/QhUVA/)

# python - Python 读取 txt 文件作为输入：IndexError: list index out of range?

> ID：11770604
> 
> 赞同：1
> 
> 时间：2012-08-02T03:22:14.613
> 
> 标签：python, list, indexing

这是我的代码：

```
if __name__ == '__main__':
  fid = open ('200502.txt')
  data = fid.readlines()
  data = map (string.strip, data)
  x = []
  y = [] 
  da = []
  for d in data:
    s = d.split()
    x.append(float(s[0])/10000.0)
    y.append(float(s[1])/10000.0)
    da.append(float(s[2])) 
```

当我运行它时，我得到：

```
Traceback (most recent call last):
  File "plot_data.py", line 286, in ?
    x.append(float(s[0])/10000.0)
IndexError: list index out of range 
```

200502.txt (840kb) 文件如下：

```
1131087 224529 3.923   
1131096 224529 3.958 
1131106 224530 3.897    
1131116 224530 3.917   
1131126 224530 3.847 
(....) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T03:26:34.837

这是加载数据的一种脆弱方式。我的猜测是它在文件末尾换行，或者类似的东西。无论如何，您应该`numpy.loadtxt`改为加载文件（`csv`如果您无权访问，则使用模块`numpy`）。

为了让你开始：

```
>>> import numpy
>>> data = numpy.loadtxt('/tmp/200502.txt')
>>> xs = data.T[0]/10000.
>>> ys = data.T[1]/10000.
>>> da = data.T[2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:26:56.683

输入文件中至少有一个元素不包含数据。您正在迭代`data`，其中一个元素正在从 生成一个长度为 0 的列表`d.split()`。我还建议考虑将您的数据加载到更结构化的组织中。类似的东西`loaded_data = [zip(('x', 'y', 'da'), d.split()) for d in data]`。

# regex - 匹配所有字母、空格和冒号的正则表达式

> ID：11770607
> 
> 赞同：0
> 
> 时间：2012-08-02T03:22:46.180
> 
> 标签：regex

我需要一个匹配的正则表达式，它包含所有单词，然后是一个空格，后跟一个冒号

```
 [All alphabets][whitespace][colon] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:36:36.467

以下模式可用于 Ruby、Perl、JavaScript、.Net...
`[a-zA-Z]+\s+:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:34:47.310

也许是这样：

```
[a-zA-Z]+[\W]; 
```

这可以像这样匹配：

`test ;` `test2 ;`这不起作用但是这个`does ;` `work ;`

# validation - 在铁路中实施模型验证

> ID：11770612
> 
> 赞同：1
> 
> 时间：2012-08-02T03:23:19.440
> 
> 标签：validation, node.js, railway.js

因此，我正在尝试熟悉[Railway.js](http://railwayjs.com/)，因此我正在制作一个小型应用程序，其中一部分涉及模型上的电子邮件验证。现在：

-取自 db/schema.js-

```
var User = describe('User', function () {
    property('email', String, { index : true });
    property('password', String);
    property('public_key', String);
}); 
```

-取自 app/models/user.js-

```
User.validatesPresenceOf('email', 'password', 'public_key');
User.validatesFormatOf('email', ''); /* ARR HERE BE THE DRAGONS! */ 
```

所以，我想实现我自己的电子邮件验证例程，因为我想检查 MX 记录的存在，以及其他一些正则表达式无法解决的问题。无论如何，关键是我看不出如何解决这个问题，官方文档也没有太大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:48:02.813

好吧，在仔细考虑之后，我意识到 Railway.js 使用了[JugglingDB](https://github.com/1602/jugglingdb)，这导致我检查了存储库。嗯，关键在[JugglingDB 的文档](http://1602.github.com/jugglingdb/validatable.html#class/validate)中。

# javascript - 在 Meteor 中使用 Jquery $(this)

> ID：11770613
> 
> 赞同：8
> 
> 时间：2012-08-02T03:23:22.927
> 
> 标签：javascript, jquery, this, meteor, self

如何在流星中使用此功能？例如，我希望能够点击任何给定的

元素并找出它的类是什么。另外，我怎样才能获得关于我用 Meteor 点击的项目的信息？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-02T06:37:21.947

假设在代码中的某处您有一个模板处理事件：

```
Template.tmpl_name.events = {
  'click #logo': function (e) {
    // Instead of using $(this), you can do:
    var $this = $(e.target);
    // Your usual code here, e.g.:
    console.log($this.attr('href'));
  }
}; 
```

# asp.net - 如何编写用于接受数字、+ 和 - 的正则表达式

> ID：11770616
> 
> 赞同：-2
> 
> 时间：2012-08-02T03:23:39.107
> 
> 标签：asp.net, regex

任何人都可以帮我写一个可以接受的正则表达式 -

1.  数字
2.  +
3.  -
4.  字符总数应为 20。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:26:59.590

使用字符集`[...]`

给你： `[-+\d]{20}`

# jquery - 如何避免在 jQuery 动画 [fadeIn() 或 animate()] 结束时出现文本闪烁？

> ID：11770618
> 
> 赞同：1
> 
> 时间：2012-08-02T03:23:46.277
> 
> 标签：jquery, jquery-animate, fadein, flicker

使用 jQuery 时，如何避免在动画 [fadeIn() 或 animate()] 结束时出现文本闪烁？这似乎只发生在字体大小 < 40px 的情况下。

**查看小提琴中的问题**：http : [//jsfiddle.net/HV7Az/8/](http://jsfiddle.net/HV7Az/8/)

您会注意到，*我发现的唯一解决方案是将不透明度设置为 99% 而不是 100%*。这对我来说似乎是一个糟糕的解决方案。

我尝试过使用各种 HTML 格式，例如淡出父 div 而不是实际文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:32:57.390

我还没有测试过这个跨浏览器，但是对于基于 webkit 的浏览器，我相信它与 GPU 加速有关。我通过添加以下内容来测试我的理论：

```
.animate-99, .animate-100 {
opacity: 0;
-webkit-font-smoothing: antialiased;
} 
```

有了这个，我**认为**字体会被渲染和褪色，在你的 jsfiddle 中，当不透明度达到 100% 时会重新渲染它。这在 IE9/10/Gecko 浏览器中可能是也可能不是问题；您必须在那里进行测试，看看是否可以通过对文本进行抗锯齿来欺骗加速。

# c# - C# 中 JSON 到 XML 的转换

> ID：11770630
> 
> 赞同：13
> 
> 时间：2012-08-02T03:25:39.673
> 
> 标签：c#, json, json.net

我一直在使用 Json.Net 将 JSON 解析为对象并转换为 XMLDocument 但我得到了

> InvalidOperationException 此文档已经有一个“DocumentElement”节点。

我有这个 JSON 数据：

```
{
   "data": [
      {
         "name": "Eros Harem",
         "id": "2345123465"
      },      
      {
         "name": "Vincent Dagpin",
         "id": "56783567245"
      },
      {
         "name": "Vrynxzent Kamote",
         "id": "3456824567"
      }
   ],
   "paging": {
      "next": "nextURLHere"
   }
} 
```

这是我的代码

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using System.Xml;
using Newtonsoft.Json;

namespace JsonToXML
{
    class Program
    {
        static void Main(string[] args)
        {
            string json = File.ReadAllText("friends.json");

            // To convert JSON text contained in string json into an XML node
            XmlDocument doc = (XmlDocument)JsonConvert.DeserializeXmlNode(json);
        }
    }
} 
```

我错过了一些设置吗？

我希望有这样的输出。

```
<?xml version="1.0"?>
<friends>    
    <data>
        <name>Eros Harem</name>
        <id>2345123465</id>        
    <data>
        <name>Vincent Dagpin</name>
        <id>56783567245</id>        
    </data>
    <data>
        <name>Vrynxzent Kamote</name>
        <id>3456824567</id>        
    </data>
    <paging>
        <next>nextURLHere</next>
    </paging>
</friends> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-02T03:31:57.410

我认为您需要的是 json 中的根元素。这正是 XML 所需要的。

我认为你可以通过

```
XmlDocument doc = (XmlDocument)JsonConvert.DeserializeXmlNode(json, "friends"); 
```

# blackberry - 显示列表数据后如何下载在线图像？

> ID：11770635
> 
> 赞同：0
> 
> 时间：2012-08-02T03:26:04.410
> 
> 标签：blackberry, listfield

对于我当前的代码，它会先下载图像，然后只显示数据并导致设备滞后。

```
public Custom_ListField(Vector content, boolean islatest) {
    this.content = content;
    this.islatest = islatest;

    newsid = new int[content.size()];
    title = new String[content.size()];
    category = new String[content.size()];
    date = new String[content.size()];
    imagepath = new String[content.size()];
    catsid = new int[content.size()];
    imagebitmap = new Bitmap[content.size()];
    ischeck = new boolean[content.size()];

    for (int i = 0; i < content.size(); i++) {
        newslist = (List_News) content.elementAt(i);
        newsid[i] = newslist.getID();
        title[i] = newslist.getNtitle();
        category[i] = newslist.getNewCatName();
        date[i] = newslist.getNArticalD();
        imagepath[i] = newslist.getImagePath();
        catsid[i] = newslist.getCatID();
        ischeck[i] = false;

        if (!imagepath[i].toString().equals("no picture")) {
            if (Config_GlobalFunction.isConnected())
                imagebitmap[i] = Util_ImageLoader.loadImage(imagepath[i]);
            else
                imagebitmap[i] = localimage;
        }
    }
    initCallbackListening();
}

private void initCallbackListening() {
    callback = new ListCallback();
    this.setCallback(callback);
    this.setRowHeight(-2);
}

private class ListCallback implements ListFieldCallback {
    public ListCallback() {

    }

    public void drawListRow(ListField listField, Graphics graphics,
            final int index, int y, int width) {
        currentPosition = index;

        if (!imagepath[index].toString().equals("no picture")) {
            float ratio = (float) ((float) localimage.getHeight() / (float) imagebitmap[index]
                    .getHeight());
            Bitmap temp = new Bitmap(
                    (int) (imagebitmap[index].getWidth() * ratio),
                    (int) (imagebitmap[index].getHeight() * ratio));
            imagebitmap[index].scaleInto(temp, Bitmap.FILTER_BILINEAR,
                    Bitmap.SCALE_TO_FIT);
            imagebitmap[index] = temp;

            graphics.drawBitmap(
                    Display.getWidth()
                            - localimage.getWidth()
                            - 5
                            + ((localimage.getWidth() - imagebitmap[index]
                                    .getWidth()) / 2),
                    y
                            + (listField.getRowHeight(index) - imagebitmap[index]
                                    .getHeight()) / 2,
                    imagebitmap[index].getWidth(),
                    imagebitmap[index].getHeight(), imagebitmap[index], 0,
                    0);

            graphics.setColor(Color.BLACK);
            text = Config_GlobalFunction
                    .wrap(title[index], Display.getWidth()
                            - imagebitmap[index].getWidth() - 15);

            for (int i = 0; i < text.size(); i++) {
                int liney = y + (i * Font.getDefault().getHeight());
                graphics.drawText(
                        (String) text.elementAt(i),
                        5,
                        liney + 3,
                        DrawStyle.TOP | DrawStyle.LEFT | DrawStyle.ELLIPSIS,
                        Display.getWidth() - imagebitmap[index].getWidth()
                                - 10);
            }
        } else {
            graphics.setColor(Color.BLACK);
            text = Config_GlobalFunction.wrap(title[index],
                    Display.getWidth() - 10);
            for (int i = 0; i < text.size(); i++) {
                int liney = y + (i * Font.getDefault().getHeight());
                graphics.drawText(
                        (String) text.elementAt(i),
                        5,
                        liney + 3,
                        DrawStyle.TOP | DrawStyle.LEFT | DrawStyle.ELLIPSIS,
                        Display.getWidth() - 10);
            }
        }

        if (text.size() == 2) {
            graphics.setColor(Color.GRAY);
            graphics.drawText(date[index], 5, y
                    + Font.getDefault().getHeight() + 3);

            if (islatest) {
                graphics.setColor(Color.RED);
                graphics.drawText(category[index], Font.getDefault()
                        .getAdvance(date[index]) + 15, y
                        + Font.getDefault().getHeight() + 3);
            }
        } else if (text.size() == 3) {
            graphics.setColor(Color.GRAY);
            graphics.drawText(date[index], 5, y
                    + Font.getDefault().getHeight() * 2 + 3);

            if (islatest) {
                graphics.setColor(Color.RED);
                graphics.drawText(category[index], Font.getDefault()
                        .getAdvance(date[index]) + 15, y
                        + Font.getDefault().getHeight() * 2 + 3);
            }
        }

        if (!imagepath[index].toString().equals("no picture"))
            setRowHeight(index, imagebitmap[index].getHeight() + 10);
        else {
            if (text.size() == 2)
                setRowHeight(index, getRowHeight() + 9);
            else if (text.size() == 3) {
                setRowHeight(index, getRowHeight() * 15 / 10 + 9);
            }
        }

        graphics.setColor(Color.WHITE);
        graphics.drawRect(0, y, width, listField.getRowHeight(index));

        ischeck[index] = true;
    }
 } 
```

我希望`imagebitmap[i] = Util_ImageLoader.loadImage(imagepath[i]);`在显示数据之后运行，这样就不需要卡在那里了。然而，我试图把它放在里面`drawListRow`，它工作但很慢，因为最初显示它会运行 0-8 次，然后当我滚动列表字段时，它会再次运行。它被下载并再次下载。

**更新**

```
public class Util_LazyLoader implements Runnable {
String url = null;
BitmapDowloadListener listener = null;

public Util_LazyLoader(String url, BitmapDowloadListener listener) {
    this.url = url;
    this.listener = listener;
}

public void run() {
    Bitmap bmpImage = getImageFromWeb(url);
    listener.ImageDownloadCompleted(bmpImage);
}

private Bitmap getImageFromWeb(String url) {
    HttpConnection connection = null;
    InputStream inputStream = null;
    EncodedImage bitmap;
    byte[] dataArray = null;

    try {
        connection = (HttpConnection) (new ConnectionFactory())
                .getConnection(url + Database_Webservice.ht_params)
                .getConnection();

        int responseCode = connection.getResponseCode();
        if (responseCode == HttpConnection.HTTP_OK) {
            inputStream = connection.openDataInputStream();
            dataArray = IOUtilities.streamToBytes(inputStream);
        }
    } catch (Exception ex) {
    } finally {
        try {
            inputStream.close();
            connection.close();
        } catch (Exception e) {
        }
    }

    if (dataArray != null) {
        bitmap = EncodedImage.createEncodedImage(dataArray, 0,
                dataArray.length);
        return bitmap.getBitmap();
    } else {
        return null;
    }
}
} 
```

我创建了一个新类，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:12:41.117

您需要在这里使用延迟加载概念。例如：

[http://supportforums.blackberry.com/t5/Java-Development/How-to-load-images-quickly-like-android/mp/1487995#M187253](http://supportforums.blackberry.com/t5/Java-Development/How-to-load-images-quickly-like-android/m-p/1487995#M187253)

[http://supportforums.blackberry.com/t5/Java-Development/Lazy-loading-issue-in-blackberry/mp/1835127](http://supportforums.blackberry.com/t5/Java-Development/Lazy-loading-issue-in-blackberry/m-p/1835127)

您需要在单独的线程中下载图像（而不是在 UI 线程中）。实际上，当您渲染列表行时会发生什么，它会查找位图图像。因此，一旦您创建了列表视图，您可以做什么。提供默认加载位图图片，启动线程下载图片，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:42:21.563

**您应该在将数据从 Url 放入向量的线程上创建方法。这可能在您已扩展为线程的连接类中。像这样>>>>**

```
getimagemethod(image[i]); 
```

**在您声明您的方法后，获取该方法的图像字符串 url。像这样>>**

```
private void getimagemethod(String image2) 
{
this.imageforlist = image2; 
```

**// 你应该将 imageforlist 字符串声明为全局字符串..**

```
newBitmap1 = Util_ImageLoader.getImageFromUrl(imageforlist); 
```

****//newBitmap1 也是全局 Bitmap..**** }**

 ****在此之后将您的位图（即 newBitmap1）放到 Vector 中，如下所示>>**

```
imagevct.addElement(newBitmap1); 
```

**这里 imagevct 是向量，也是全局的** **为了创建全局向量，请使用这个....**

```
private Vector imagevct = new Vector(); 
```

**现在您已准备好在列表中绘制位图**

**为此这样做......**

```
public void drawListRow(ListField list, Graphics g, int index, int y, int w) {
Bitmap imagee = (Bitmap) imagevct.elementAt(index);
g.drawBitmap(HPADDING, 15 + y, 60, 60, imagee , 0, 0);
} 
```

**这里 HPADDING 是>>>>** private static final int HPADDING = Display.getWidth() <= 320 ？6：8；

**这只是一步一步的教程示例。如果有任何疑问，您可以在此处发布...****

# python - 从本地机器查询 MIT START 网站的 python 脚本

> ID：11770636
> 
> 赞同：3
> 
> 时间：2012-08-02T03:26:04.740
> 
> 标签：python

我正在学习 Python，我目前自己设置的项目包括从连接到网络的笔记本电脑发送一个问题，连接到[MIT START NLP 数据库](http://start.csail.mit.edu/)，输入问题，检索响应并显示响应。我已经阅读了 docs.python.org 上的“HOWTO 使用 urllib2 获取 Internet 资源”，但我似乎遗漏了这个想法的一些尖锐之处。这是我的代码：

```
import urllib
import urllib2

question = raw_input("What is your question? ")

url = 'http://start.csail.mit.edu/'
values = question

data = urllib.urlencode(values)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req)
the_page = response.read()

print the_page 
```

这是我得到的错误：

> 回溯（最后一次调用）：文件“mitstart.py”，第 9 行，在 data = urllib.urlencode(values) 文件“/usr/lib/python2.7/urllib.py”，第 1298 行，在 urlencode 中引发 TypeError TypeError：不是有效的非字符串序列或映射对象

所以我认为我在 vales 中提出问题的方式是错误的，所以我做了

`values = {question}`

和`values = (question)`

和`values = ('question')`

没有喜悦。

（我知道，我的回答是“我在学习，已经很晚了，突然我的妻子决定她需要和我谈谈一些琐碎的事情，而我正试图解决这个问题）

我可以得到一些指导，或者至少可以指出正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:36:40.557

请注意，您的错误说：`TypeError: not a valid non-string sequence or mapping object`

因此，当您创建`values`为字符串时，您需要一个非字符串序列或映射对象。

urlencoding 需要键值对（例如映射对象或字典），因此您通常将其传递给字典。

查看表单的源代码，您会看到：

```
<input type="text" name="query" size="60"> 
```

这意味着您应该创建一个字典，例如：

```
values = { 'query': 'What is your question?' } 
```

然后你应该能够将它作为参数传递给 urlencode()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:37:59.850

[`urllib.urlencode()`](http://docs.python.org/library/urllib.html#urllib.urlencode) doesn't accept a string as an argument.

As @ernie said you should specify `query` parameter. Also the url is missing the `/startfarm.cgi` part:

```
<form method="post" action="startfarm.cgi"> 
```

Updated example:

```
import cgi
from urllib import urlencode
from urllib2 import urlopen

data = urlencode(dict(query=raw_input("What is your question?"))).encode('ascii')
response = urlopen("http://start.csail.mit.edu/startfarm.cgi", data)

# extract encoding from Content-Type and print the response
_, params = cgi.parse_header(response.headers.get('Content-Type', ''))
print response.read().decode(params['charset']) 
```

# html - 错误的页面滚动响应

> ID：11770640
> 
> 赞同：-1
> 
> 时间：2012-08-02T03:26:18.780
> 
> 标签：html, css

出于某种原因，我的页面较低的内容向上移动并覆盖了“封面照片”。为什么这样做？我究竟做错了什么？

这是我的来源：

[http://jsfiddle.net/JffAm/](http://jsfiddle.net/JffAm/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:31:56.110

这是因为您的图像是固定的，即使您滚动，它也会卡在同一位置。

# c - 指针约定：指向某些元素的指针数组

> ID：11770645
> 
> 赞同：1
> 
> 时间：2012-08-02T03:26:40.137
> 
> 标签：c, coding-style

这个问题是关于处理我自己研究的这个指针问题的最佳实践。

我有一个在读取 csv 的函数中动态生成的结构数组。

```
int init_from_csv(instance **instances,char *path) {
    ... open file, get line count
   *instances = (instance*) malloc( (size_t) sizeof(instance) * line_count );
    ... parse and set values of all instances
    return count_of_valid_instances_read;
}
// in main()
instance *instances;
int ins_len = init_from_csv(&instances, "some/path/file.csv"); 
```

现在，我必须对这些原始数据执行功能，对其进行拆分，然后在拆分后再次执行*相同*的功能。这个数据集可能相当大，所以我不想复制实例，我只想要一个指向拆分中的结构的指针数组。

```
instance **split = (instance**) malloc (sizeof(instance*) * split_len_max);
int split_function(instance *instances, ins_len, instances **split){
  int i, c;
  c = 0;
  for (i = 0; i < ins_len; i++) {
    if (some_criteria_is_true) {
      split[c++] = &instances[i];
  }
  return c;
} 
```

现在我的问题是在结构数组和指针数组上执行函数的最佳实践或最易读的方式是什么？举个简单的例子`count_data()`。

```
int count_data (intances **ins, ins_len, float crit) {
  int i,c;
  c = 0;
  for (i = 0; i < ins_len; i++) {
    if ins[i]->data > crit) {
      ++c;
    }
  }
  return c;
}

// code smell-o-vision going off by now
int c1 = count_data (split, ins_len, 0.05);  // works
int c2 = count_data (&instances, ins_len, 0.05); // obviously seg faults 
```

我可以让我的 init_from_csv ma​​lloc 成为一个指向实例的指针数组，然后 malloc 我的实例数组。在我开始更改一堆代码之前，我想了解一个经验丰富的 c 程序员如何处理这种事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:25:05.740

这可能看起来有点邋遢，但如果你真的想传递那个实例**指针并希望它同时适用于主数据集和拆分，你真的需要为主数据集创建一个指针数组. 这是您可以做到的一种方法...

```
size_t i, mem_reqd;
instance **list_seg, *data_seg;

/* Allocate list and data segments in one large block */
mem_reqd = (sizeof(instance*) + sizeof(instance)) * line_count;
list_seg = (instance**) malloc( mem_reqd );
data_seg = (instance*) &list_seg[line_count];

/* Index into the data segment */
for( i = 0; i < line_count; i++ ) {
    list_seg[i] = &data_seg[i];
}

*instances = list_seg; 
```

现在，您始终可以对指针数组进行操作`instance*`，无论是主列表还是拆分。我知道您不想使用额外的内存，但是如果您的`instance`结构不是非常小，那么为每个实例分配一个额外的指针以防止混淆代码重复是一个好主意。

完成主实例列表后，您可以执行以下操作：

```
void free_instances( instance** instances )
{
    free( instances );
} 
```

我很想将其实现为结构：

```
struct instance_list {
    instance ** data;
    size_t length;
    int owner;
}; 
```

这样，您可以以更好的方式从函数中返回它：

```
instance_list* alloc_list( size_t length, int owner )
{
    size_t i, mem_reqd;
    instance_list *list;
    instance *data_seg;

    /* Allocate list and data segments in one large block */
    mem_reqd = sizeof(instance_list) + sizeof(instance*) * length;
    if( owner ) mem_reqd += sizeof(instance) * length;
    list = (instance_list*) malloc( mem_reqd );
    list->data = (instance**) &list[1];
    list->length = length;
    list->owner = owner;

    /* Index the list */
    if( owner ) {
        data_seg = (instance*) &list->data[line_count];
        for( i = 0; i < line_count; i++ ) {
            list->data[i] = &data_seg[i];
        }
    }

    return list;
}

void free_list( instance_list * list )
{
    free(list);
}

void erase_list( instance_list * list )
{
    if( list->owner ) return;
    memset((void*)list->data, 0, sizeof(instance*) * list->length);
} 
```

现在，从 CSV 加载的函数不必关注创建这个怪物的细节，因此它可以简单地完成它应该完成的任务。您现在可以从*其他*函数返回列表，无论它们包含数据还是简单地指向其他列表。

```
instance_list* load_from_csv( char *path )
{
    /* get line count... */
    instance_list *list = alloc_list( line_count, 1 );
    /* parse csv ... */
    return list;
} 
```

等等......好吧，你明白了。不保证此代码将编译或工作，但它应该是关闭的。我认为这很重要，每当您使用比简单数组稍微复杂一点的数组做一些事情时，花一点额外的努力来封装它是很有用的。这是您将用于分析或其他任何事情的主要数据结构，因此赋予它一点地位是有意义的，因为它有自己的数据类型。

不知道，是不是太过分了？=)

# android - 如何将 EditText 的整数值存储到 SQLite 数据库 [Android]

> ID：11770649
> 
> 赞同：0
> 
> 时间：2012-08-02T03:26:58.837
> 
> 标签：android, database, sqlite

我无法在 SQLite 数据库中存储整数值。
这是我的代码。

我的 Create_Events.java 插入代码

```
Button btnCreate = (Button)findViewById(R.id.saveButton);
btnCreate.setOnClickListener(new OnClickListener()
{

        @Override
        public void onClick(View v)
        {
           calDB.open();
           long _id;
           EditText txtTitle = (EditText) findViewById(R.id.txtTitle);
          String title = txtTitle.getText().toString(); 
           EditText txtLocation = (EditText) findViewById(R.id.editText1);
           String location = txtLocation.getText().toString();
           EditText startTime = (EditText) findViewById(R.id.editText2);
           String startTime = startTime.getText().toString();
          _id = calDB.insertEvent(title, location, 0, 0);

           calDB.close();

        }

}); 
```

CalendarAdapter.java（数据库类）

```
package main.page;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class CalendarAdapter
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_TITLE = "title";
    public static final String KEY_LOCATION = "location";
    public static final String KEY_START = "starttime";
    public static final String KEY_END = "endtime";
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "anniversary";
    private static final String DATABASE_TABLE = "calendar";
    private static final int DATABASE_VERSION = 2;

    private static final String DATABASE_CREATE = "create table calendar(_id integer primary key autoincrement,"+
    "title text not null, location text not null, starttime integer, endtime integer);";

    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public CalendarAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            try
            {
            db.execSQL(DATABASE_CREATE);    
            }catch(SQLException e)
            {
                e.printStackTrace();
            }

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(TAG, "Upgrading database from version "+oldVersion+" to "+newVersion+", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS calendar");
            onCreate(db);
        }

    }

    public CalendarAdapter open() throws SQLException
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    public void close()
    {
        DBHelper.close();
    }

    public long insertEvent(String title, String location, int starttime, int endtime)
    {
       ContentValues initialValues = new ContentValues();
       initialValues.put(KEY_TITLE, title);
       initialValues.put(KEY_LOCATION, location);
       initialValues.put(KEY_START, starttime);
       initialValues.put(KEY_END, endtime);
       return db.insert(DATABASE_TABLE, null, initialValues);

    }

    public boolean deleteEvent(long rowId)
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    public Cursor getAllEvents()
    {
        return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE, KEY_LOCATION, KEY_START, KEY_END}, null, null, null, null, null);

    }

    public Cursor getEvent(long rowId) throws SQLException
    {
        Cursor c = db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE, KEY_LOCATION, KEY_START, KEY_END}, KEY_ROWID + "=" + rowId, null, null, null, null, null);
        if(c != null)
        {
            c.moveToFirst();
        }
        return c;
    }

    public boolean updateEvent(long rowId, String title, String location, int starttime, int endtime)
    {
        ContentValues args = new ContentValues();
        args.put(KEY_TITLE, title);
        args.put(KEY_LOCATION, location);
        args.put(KEY_START, starttime);
        args.put(KEY_END, endtime);
        return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;

    }

} 
```

正如您在上面看到的，我已经成功地将 EditText 中的文本值存储到数据库中。所以现在我正在尝试将 starttime(Integer) 存储到数据库中。
任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:35:14.820

我猜你真正的问题是“如何在 SQLite 数据库中存储时间或日期”？您需要将它们转换为整数以存储它们，然后转换回您阅读的任何内容。请查看关于该主题的 SQLite 文档的第 1.2 章：[http ://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:04:09.670

我没有看到存储整数的问题 - 但是时间不等于整数。

您有 2 种可能性来存储日期/时间值。要么获取组件并分别存储每个组件，例如年、月、日、分钟、秒，要么将其存储为字符串 - 但您不能使用一个整数来存储日期/时间。

# objective-c - 如何从 Objective-C 方法返回结构？

> ID：11770653
> 
> 赞同：0
> 
> 时间：2012-08-02T03:27:04.647
> 
> 标签：objective-c, ios

我正在为 iPad 编写代码。我有一个我定义的点结构：

```
typedef struct __Point32_t
{
    int32_t x;
    int32_t y;
}Point32_t; 
```

这是我从 Objective-C 方法接收结构的代码：

```
Point32_t ModalityPan = [self ReadPoint]; 
```

这是方法：

```
-(Point32_t)ReadPoint
{
    Point32_t P;
    P.x = [self ReadInt];
    P.y = [self ReadInt];
    return P;
} 
```

将返回值分配给结构会在编译时产生错误。该错误声称我的初始化程序无效。如果我将作业更改为：

```
Point32_t * ModalityPan = [self ReadPoint]; 
```

错误消失了。所以我想知道在Objective-C中实际传回的是什​​么。我搜索了许多帖子，其中一些是在 SO 上的，我的印象是结构在 Obj-C 中的方法之间传递和返回，而无需引用结构（例如，我可以按值传递）。

谁能解释这里发生了什么？什么回来了，参考还是结构？如果是结构，为什么我需要将引用指定为分配给的变量类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:55:35.833

事实证明，编译器以一种非常间接的方式警告我，我的方法没有在@interface 中定义，并且该方法的实现低于我的使用方法。所以编译器似乎无法弄清楚返回类型是什么。它现在可以正确编译。

# jrules - 在 Rules Studio 中运行调试模式时出现问题

> ID：11770656
> 
> 赞同：0
> 
> 时间：2012-08-02T03:27:51.743
> 
> 标签：jrules

我写了一个技术规则，想在调试模式下测试这个规则。我正在使用 JUnit 测试用例进行单元测试。我已经在 J​​Unit 测试项目中部署了规则集。我在技术规则中设置了断点。但是在调试模式下运行时，控件不会在断点处停止。我检查了 RuleApp 项目的 archive.xml 中的“启用调试”选项。

请让我知道在调试模式下测试规则集需要注意哪些事项。

提前致谢。

哈里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:37:47.693

您可以在调试模式下运行规则，是的，但您不能在条件中仅在操作中设置断点。
在使用 JUnit 之前，请确保您可以使用简单的 Java 项目来在调试模式下运行规则集以获取规则。
测试条件的一种解决方法是创建一些返回 true 的打印 (log/sysout) 函数，并逐个打印条件。
希望对你有帮助

# php - 价值搜索 VIA group By

> ID：11770658
> 
> 赞同：0
> 
> 时间：2012-08-02T03:28:19.053
> 
> 标签：php, mysql, sql, search

我刚刚深入了解了 Mysql，我有以下表格：

```
items,table1 
```

项目包含`item_name`和包含`id`, , 现在我必须以这样的方式浏览浏览，它会给出如下所示：`table1``name``item_id``value`

```
name1-item_id-sum(value)
name2-item_id-sum(value)
name3-item_id-sum(value)
name4-item_id-sum(value)
name5-item_id-sum(value) 
```

我试图搜索双组，但没有成功...请尽快帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:46:36.040

嗯。我想，这可能会有所帮助。

您不需要使用项目表，因为首先，您没有从中获得任何帮助。

```
mysql_query("SELECT name, item_id, SUM(value) FROM table1 GROUP BY item_id, name"); 
```

ADD：`ORDER BY name DESC`用于许多正式的结果。

# ruby-on-rails - 使用机架在另一个 rails 3 应用程序中提供 rails 3 应用程序

> ID：11770664
> 
> 赞同：0
> 
> 时间：2012-08-02T03:28:39.750
> 
> 标签：ruby-on-rails, rack

我在 rails 3 应用程序中使用了 rackup

> 机架配置.ru

这开始从端口 9292 为 rails 应用程序提供服务

```
[2012-08-01 23:00:05] INFO  WEBrick 1.3.1
[2012-08-01 23:00:05] INFO  ruby 1.9.3 (2011-10-30) [x86_64-darwin11.2.0]
[2012-08-01 23:00:05] INFO  WEBrick::HTTPServer#start: pid=3887 port=9292 
```

现在，我想在路径下的另一个 Rails 3 应用程序 (B) 中使用这个 Rails 3 应用程序 (A)（比如 /mycoolappB ）。根据我了解到的情况，我需要修改app B中的routes.rb，添加一个可以将该路径指向App A的匹配命令。

这里的例子是针对 Sinatra::Base 的。

[http://asciicasts.com/episodes/222-rack-in-rails-3](http://asciicasts.com/episodes/222-rack-in-rails-3)

所以，我想知道我在这里尝试做的事情是否可行，如果可以，最好的方法是什么。

提前致谢，

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:47:32.590

**一个想法 - 我在这件事上没有任何经验，所以把它当作它的价值：D**

您可能想查看 Rails 引擎。我相信这将是您所描述的最佳方法。想法是将 app_b 挂载到 app_a 中，以便 app_a 可以使用所有控制器、模型和路由。以下是一些资源：

[http://edgeguides.rubyonrails.org/engines.html](http://edgeguides.rubyonrails.org/engines.html)

[Rails 3.1：引擎与可安装应用程序](https://stackoverflow.com/questions/6118905/rails-3-1-engine-vs-mountable-app)

[http://www.astjohn.ca/2011/08/06/rails-31-engines-mountable-or-full-part-1](http://www.astjohn.ca/2011/08/06/rails-31-engines-mountable-or-full-part-1)

# flash - 如何在 Flash 中删除项目周围的空间（示例链接）

> ID：11770665
> 
> 赞同：0
> 
> 时间：2012-08-02T03:28:41.433
> 
> 标签：flash, resize, request, space

我有一个 Flash 文件，它是一个音乐播放器，它在播放器周围有一个我不想要的空间。尺寸为 590X300 但实际播放器约为 100px，所以我不想拥有所有这些空间。只有玩家。看看下面的链接： [音乐播放器](http://activeden.net/item/decent-player/10176)

如您所见，播放器位于舞台中央，周围有很大的空间。事实上它是没有用的。

我试图减小 HTML 对象标记的大小，但它减小了所有文件，因此播放器变得像不可见一样小。

在顶级网站的评论中，已经有人问了，开发者谈到了电影剪辑，我不知道，反正我也有.fla格式，但不知道如何修复它，因为我是新手在闪存中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:55:11.440

从属性中更改文档的大小并按照建议重新发布。如果要根据舞台大小导出，请确保选择屏幕大小。

# lucene - lucene的复合文件有什么优势

> ID：11770666
> 
> 赞同：5
> 
> 时间：2012-08-02T03:28:43.460
> 
> 标签：lucene

像lucene的复合文件这样的单个文件和依赖索引类型的多文件有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:08:28.863

它使用较少的文件来保留索引，因此它可以帮助避免[打开文件过多](https://issues.apache.org/jira/browse/SOLR-4)的问题（在 unix 中您使用 ulimit 处理）。

它也较慢。

# c# - 如果服务器未准备好或不可用，如何停止尝试通过命名管道客户端连接到服务器

> ID：11770667
> 
> 赞同：4
> 
> 时间：2012-08-02T03:29:03.140
> 
> 标签：c#, named-pipes

我现在正在实施我的学术项目软件，使用命名管道技术通过网络连接异构系统。我使用**了 .net framework 4 和 C# 语言。**问题是如果服务器未准备好或不可用，客户端程序将无法继续。客户端命名管道不断尝试连接到服务器命名管道，直到可用连接。

如果服务器连接在 3 秒内不可用（可能是任何持续时间），我希望客户端程序能够继续其他功能。像这样的场景：当客户端程序启动时，它会尝试连接到服务器。如果服务器不可用，客户端将停止尝试连接服务器并自行离线运行。

我的问题的一些代码片段......

```
pipeClient.Connect(); <-- this is the problem point,
frmUserprofile.show(); <-- until the connection is available, the program will not execute this line 
```

我想得到的解决方案......

```
pipeClient.Connect()
if (3 seconds is over && server connection is unavailable) <-- this is what I need    
{  pipeClient stops try to connect;  }

frmUserprofile.show(); 
```

有人可以帮我给我一些实用的解决方案...顺便说一句，我希望如果你能用C#语言解决这个问题，请用C#给出答案，但不一定提前谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T03:43:23.490

如果您使用的是`NamedPipeClientStream`类，则有[`Connect(int)`](http://msdn.microsoft.com/en-us/library/bb355337.aspx)方法重载，它接受超时值：

```
bool isConnected = false;
try
{
    pipeClient.Connect(3000);
    isConnected = true;
}
catch(TimeoutException)
{
    // failed to connect
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:43:44.000

如果您将 NamedPipeClientStream 用于您的任务，则有 Connect(Int32) 方法需要超时

[http://msdn.microsoft.com/en-us/library/bb355337.aspx](http://msdn.microsoft.com/en-us/library/bb355337.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T03:44:36.217

使用`NamedPipeClientStream`. 它有一个连接超时。

请参阅[NamedPipeClientStream.Connect](http://msdn.microsoft.com/en-us/library/bb355337.aspx)

# visual-studio-2010 - WCF、netTcp 和 Visual Studio 10

> ID：11770668
> 
> 赞同：0
> 
> 时间：2012-08-02T03:29:11.170
> 
> 标签：visual-studio-2010, wcf, iis-7, tcp

我有一个带有 netTcp 绑定的 WCF 服务。这是我的第一个 WCF 服务，我遇到了一些端点问题。

我在开发阶段的目标是使用端口转发从我的开发机器公开服务。我已将 IIS7 默认网站配置为在端口 12345 上侦听 TCP，并创建了必要的绑定。该端口在我的防火墙上打开，端口在路由器上转发。Net.TCP 服务都在运行。我想我已经采取了这里文章中推荐的所有步骤！

但是，当我尝试使用服务 IP 地址处的 svc 文件在 Visual Studio 10 中添加服务引用时，它会创建一个像这样的端点，指向我的本地主机名（VULCAN）：

```
<client>
    <endpoint address="net.tcp://vulcan:12345/CloudnetService/Dispatcher.svc"
        binding="netTcpBinding" bindingConfiguration="netTcpBinding_IDispatcher"
        contract="CloudnetService.IDispatcher" name="netTcpBinding_IDispatcher" />
</client> 
```

这当然可以在本地工作，但显然不能在 Internet 上工作。

我的第二个问题是，虽然我实现的服务在本地运行良好，但从外部似乎看不到。Telnet localhost 12345 找到该服务。Netstat 显示正在侦听 TCP 的端口。但是当我 Telnet 我的 IP 和端口时，我得到“无法在端口 12345 上打开与主机的连接：连接失败”。

这是我的 web.config 中的 system.serviceModel 部分（---.---.-.-- 是我的 IP 地址的占位符）：

```
<bindings>

  <netTcpBinding>
    <binding name="netTcpBinding_IDispatcher"
        closeTimeout="00:01:00"
        openTimeout="00:01:00"
        receiveTimeout="00:10:00"
        sendTimeout="00:01:00"
        transactionFlow="false"
        hostNameComparisonMode="StrongWildcard"
        maxBufferPoolSize="524288"
        maxReceivedMessageSize="65536">
      <readerQuotas
          maxDepth="32"
          maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <reliableSession
        ordered="true"
        inactivityTimeout="00:10:00" />
      <security mode="None">
        <message 
          clientCredentialType="None" 
          algorithmSuite="Default" />
      </security>
    </binding>
  </netTcpBinding>

</bindings>

<services>

  <service name="Service.Dispatcher">

    <endpoint address=""
      binding="netTcpBinding"
      bindingConfiguration="netTcpBinding_IDispatcher"
      contract="Service.Interfaces.IDispatcher"
      name="netTcpBinding_IDispatcher">
    </endpoint>

    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://---.---.-.--:12345/CloudnetService"/>
      </baseAddresses>
    </host>      

  </service>

</services>

<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>

<serviceHostingEnvironment multipleSiteBindingsEnabled="false" /> 
```

作为新手，我相信我在做一些非常基本的错误！

提前谢谢了。陶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:40:16.343

基于 TCP 的 Internet 连接非常困难，因为 Internet 不是 TCP 友好的。网络上的任何防火墙/路由器都可以简单地阻止您的流量，而且也很难排除故障，因为这是您必须潜入的互联网。所以通常 netTcp 仅限于 Intranet 或 localhost 使用。

您将不得不坚持使用基于 HTTP/HTTPS 的绑定。

# sql-server - 将生产数据库恢复到多个测试数据库 SQL server

> ID：11770669
> 
> 赞同：2
> 
> 时间：2012-08-02T03:29:26.737
> 
> 标签：sql-server

将生产数据库复制到多个测试数据库，同时保持完全限定名称的完整性的最佳方法是什么？

目前为了刷新测试环境，我们从生产数据库恢复测试数据库。然后，我们编写所有存储过程/视图/等的脚本。并对所有数据库引用进行查找/替换以指向测试对象。在我们把所有的引用都正确之后，我们改变它们。

例如，从生产环境中复制数据库后，我们将有一个如下所示的存储过程：

```
alter procedure dbo.SomeProcedure
as
select SomeColumn
from DB.dbo.SomeTable
join Validation.dbo.AnotherTable on SomId = AnoId 
```

对于测试数据库，它需要是：

```
alter procedure dbo.SomeProcedure
as
select SomeColumn
from DBQA1.dbo.SomeTable
join ValidationQA1.dbo.AnotherTable on SomId = AnoId 
```

每个测试数据库都有视图/存储过程/函数可以引用多达30个不同的其他测试数据库，因此“查找/替换”过程非常耗时并且容易出错。

恢复这些测试环境的最佳方法是什么？

我们使用的是 SQL Server 2008R2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:15:40.103

假设不同的环境在不同的 SQL Server 上（或至少在不同的实例上），那么建议您在所有环境中保持数据库名称完全相同。使用权限（例如集成安全性）确保只有正确的环境系统和用户才能访问适当的环境数据库。

但是，如果您确实需要为不同的环境（例如，同一 SQL 实例上的所有环境）保留不同的数据库名称，您可以考虑使用带有 -v开关的[sqlcmd来参数化数据库名称。](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

然后，您的更改脚本需要像这样重写：

```
alter procedure dbo.SomeProcedure
as
   select SomeColumn
   from [$(InternetSecurity)].dbo.SomeTable
   join [$(Validation)].dbo.AnotherTable on SomId = AnoId 
```

然后您可以编写批处理文件以将正确的参数值传递给 sqlcmd。

或者，您可以使用 Visual Studio 中的 .dbproj 项目来设置多个配置，以便为每个环境提供不同的值，并从 Visual Studio 生成脚本/发布。

此外，AFAIK SQL[同义词](http://msdn.microsoft.com/en-us/library/ms177544.aspx)在这里并没有真正的帮助。您需要将所有过程和函数中的 3 部分表名称替换为同义词，这可能会混淆问题，因为它无法明确表是本地的还是外部的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:24:00.853

据我所知，没有比这里替换脚本中的数据库名称更简单的方法了。

# c - C - 我的程序不停地 fork，让我的终端崩溃

> ID：11770681
> 
> 赞同：3
> 
> 时间：2012-08-02T03:32:51.757
> 
> 标签：c

我的终端不断创建和分叉。我认为我的代码做错了，我实际上想要在客户端连接时分叉，但是当我启动服务器时，当我使用 linux 命令“ps”检查时，它会一直分叉，我如何更改我的代码以使其工作适当地。

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <sys/un.h>
#include <sys/types.h>
#include <sys/socket.h>

using namespace std;

int main()
{

int serverFd;
int clientFd;
int serverLen;
int clientLen;
string message;
string serverSockAddrPtr;
struct sockaddr* serverSockAddressPnt;
struct sockaddr* clientSockAddressPnt;
struct sockaddr_un serverAddress;
struct sockaddr_un clientAddress;

// SOCKET CREATION PART - SERVER
serverFd = socket (AF_LOCAL, SOCK_STREAM, 0);

/* Set domain type */
serverAddress.sun_family = AF_LOCAL; 

/* Set name */ 
strcpy (serverAddress.sun_path, "CountryServer"); 

/* GET SIZE OF Server Addres */
serverLen = sizeof serverAddress;
/* GET SIZE OF Client Addres */
clientLen = sizeof clientAddress;

/* Get Server Sock Address Pointer*/
serverSockAddressPnt = (struct sockaddr *) &serverAddress; 
/* Get Client Sock Address Pointer*/
clientSockAddressPnt = (struct sockaddr *) &clientAddress; 

/* Create file */
bind (serverFd, serverSockAddressPnt , serverLen);

/* listen for connection */
listen (serverFd,5);

// SOCKET CREATION END - SERVER

while(1)
{
//accept client connection
clientFd = accept(serverFd, clientSockAddressPnt, (socklen_t*)&clientLen);

if(fork()==0)
{
message="Successfully connected to the server";
write(clientFd,message.c_str(),strlen(message.c_str())+1);
close(clientFd);
exit(0);
}
else
close(clientFd);

}

return 0;
} 
```

我的问题是：我如何让服务器在连接时分叉一个进程来处理客户端查询。

我不希望它无缘无故地分叉。感谢大家的帮助，这是我第一次使用 C 编码来学习更多关于编程的知识。

我的客户端和服务器通过 localhost、sockaddr_un 而不是互联网进行通信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T03:39:56.747

你的循环应该有的是：

```
while (1) {
    clientFd = accept(serverFd, clientSockAddressPnt, (socklen_t*)&clientlen);
    if (clientFd >= 0) {
        if(fork() == 0) {
            message="Successfully connected to the server";
            write(clientFd,message.c_str(),strlen(message.c_str())+1);
            close(clientFd);
            exit(0);
        }
        else
            close(clientFd);
    }
} 
```

这样，只有在接受返回非负值时才会分叉（这意味着它成功完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T03:44:30.880

您应该检查来自`accept()`. 你得到一个错误，你应该修复它。

它不断调用 fork() 的原因是因为每次您绕过循环时，accept() 都会返回（非常快！）错误，而不是等待新的连接。

# javascript - Javascript：我在这里如何滥用正则表达式构造函数？

> ID：11770691
> 
> 赞同：0
> 
> 时间：2012-08-02T03:34:06.690
> 
> 标签：javascript, regex, constructor

```
_("test1: "+ ("slayers get more".match(RegExp("^" + "slayers get magic"), "g"))); 
```

我期待结果“slayers get m”，但我得到了 null？

键入正则表达式文字确实有效。

另一个问题：我如何让它只匹配整个单词，以便结果是 "slayers get" ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:53:51.180

`"g"`应该是 的第二个参数，`RegExp()`而不是 的第二个参数`.match()`。（尽管您的正则表达式以 a`^`开头，以匹配您根本不需要的字符串的开头`"g"`。）

此外，`new`如下使用会“更正确”：

```
_("test1: "+ ("slayers get more".match(RegExp("^" + "slayers get magic", "g")))); 
```

但是我相信`RegExp()`无论有没有`new`.

> *'我期待结果'slayers get m'，但我得到了null？'*

`null`是该字符串和该正则表达式的正确结果，因为它*不匹配*. 也就是说，正则表达式要么匹配要么不匹配（在这种情况下不匹配），它不会返回进行部分匹配的字符串部分。

看起来您真正想要做的是返回与第二个字符串的开头匹配的第一个字符串的那部分，直到但不包括第一个不同的字符。如果是这样，试试这个：

```
function getCommon(s1,s2) {
   var i = 0, len = s1.length;
   while (i < len && s1.charAt(i) === s2.charAt(i))
      i++;
   return s1.substr(0,i);
}

_("test1: "+ getCommon("slayers get more", "slayers get magic")); 
```

> *“另一个问题：我如何让它只匹配整个单词，这样结果就是“slayers get”？*

基于与我之前的函数相同的想法，一次只比较一个单词：

```
function getCommon(s1,s2) {
   var a1 = s1.split(" "),
       a2 = s2.split(" "),
       len = a1.length,
       i = 0;
   while (i < len && a1[i] === a2[i])
      i++;
   return a1.slice(0,i).join(" ");
} 
```

这会将两个字符串拆分为单独的单词，一次比较一个单词直到出现不匹配，然后返回匹配到该点的单词（如果没有匹配，则返回空字符串）。

演示：http: [//jsfiddle.net/j8zsU/1/](http://jsfiddle.net/j8zsU/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:53:17.567

你有两个问题：

1.  [`match`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)只需要一个参数，但您要传递两个参数。我认为您想将 传递`"g"`给`RegExp`构造函数：`new RegExp("^" + "slayers get magic", "g")`
2.  该`"slayers get more"`字符串与正则表达式不匹配，`/^slayers get magic/`因此当然`match`返回`null`。

如果你这样做：

```
"slayers get more".match(new RegExp("^" + "slayers get m")) 
```

然后你会得到你期望的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T03:56:52.483

您的问题是对正则表达式运算符如何工作的误解。你的正则表达式“^slayers get magic”说的是在字符串的开头寻找短语“slayers get magic”。这意味着除非字符串的开头完全匹配，否则它将返回 null。你需要做的是让每个单词都是可选的，这样它就可以删除不匹配的单词。（我不是正则表达式专家，我真的建议阅读[这个网站](http://www.regular-expressions.info/)，这是一个很棒的正则表达式资源）

```
"slayers get more".match(RegExp("^(slayers)? (get)? (magic)?", "g")) 
```

此代码在每个单词周围添加可选操作 (?)，以便匹配匹配可用的内容。这将返回：

```
["slayers get "] 
```

而不是空值。

# c - 简单的 c 编程 gui

> ID：11770693
> 
> 赞同：6
> 
> 时间：2012-08-02T03:34:19.657
> 
> 标签：c, user-interface, button, textbox, win32gui

我用 C 语言开发了蒸汽表方程求解器……但是在黑屏控制台中输入值很无聊。

所以我非常想用 C 创建简单的 GUI。

我搜索了hello world代码，都很长。但这是我唯一理解的。

```
#include <windows.h>

int main()
{
MessageBoxA( NULL, "Hello World!", "Hello", MB_OK );
} 
```

通过使用 C 的 gui 构建器，我得到了这段代码，现在我在想如何在单击 COMMANDBUTTON1 时扫描 TEXTBOX1 和 TEXTBOX2 的值并在**TEXTBOX3****中**显示**输出**？

 ****```
#define WIN32_LEAN_AND_MEAN

#include <windows.h>
#include <windowsx.h>
#include <commctrl.h>
#include "hello.auto.h"

HWND hwnd_Label1, hwnd_Label2, hwnd_TextBox1, hwnd_TextBox2, hwnd_CommandButton1,
hwnd_TextBox3;

HFONT MSSansSerif_8pt;

void CreateChildWindows(HWND hwndMainWindow, HINSTANCE hInstance)
{
InitCommonControls();

MSSansSerif_8pt = CreateFont(-11,0,0,0,FW_NORMAL,0,0,0,0,0,0,0,0,"MS Sans Serif");

hwnd_Label1 = CreateWindowEx(0, "Static", "Pressure",
    WS_CHILD | WS_VISIBLE,
    11, 55, 95, 38, hwndMainWindow,
    (HMENU)Label1, hInstance, NULL);

SetWindowFont(hwnd_Label1, MSSansSerif_8pt, TRUE);

hwnd_Label2 = CreateWindowEx(0, "Static", "Temperature",
    WS_CHILD | WS_VISIBLE,
    11, 110, 95, 38, hwndMainWindow,
    (HMENU)Label2, hInstance, NULL);

SetWindowFont(hwnd_Label2, MSSansSerif_8pt, TRUE);

hwnd_TextBox1 = CreateWindowEx(WS_EX_CLIENTEDGE, "Edit" , NULL,
    WS_CHILD | ES_WANTRETURN | WS_VISIBLE,
    187, 55, 83, 35, hwndMainWindow,
    (HMENU)TextBox1, hInstance, NULL);

SetWindowFont(hwnd_TextBox1, MSSansSerif_8pt, TRUE);

hwnd_TextBox2 = CreateWindowEx(WS_EX_CLIENTEDGE, "Edit" , NULL,
    WS_CHILD | ES_WANTRETURN | WS_VISIBLE,
    187, 99, 83, 35, hwndMainWindow,
    (HMENU)TextBox2, hInstance, NULL);

SetWindowFont(hwnd_TextBox2, MSSansSerif_8pt, TRUE);

hwnd_CommandButton1 = CreateWindowEx(0, "Button", "CommandButton1",
    WS_CHILD | BS_MULTILINE | BS_PUSHBUTTON | WS_VISIBLE,
    308, 77, 117, 52, hwndMainWindow,
    (HMENU)CommandButton1, hInstance, NULL);

SetWindowFont(hwnd_CommandButton1, MSSansSerif_8pt, TRUE);

hwnd_TextBox3 = CreateWindowEx(WS_EX_CLIENTEDGE, "Edit" , NULL,
    WS_CHILD | ES_WANTRETURN | WS_VISIBLE,
    66, 220, 385, 35, hwndMainWindow,
    (HMENU)TextBox3, hInstance, NULL);

SetWindowFont(hwnd_TextBox3, MSSansSerif_8pt, TRUE);

return;
}

HWND GetItem(int nIDDlgItem)
{
switch(nIDDlgItem)
{
    case -1:
        return GetParent(hwnd_Label1);
    case Label1:
        return hwnd_Label1;
    case Label2:
        return hwnd_Label2;
    case TextBox1:
        return hwnd_TextBox1;
    case TextBox2:
        return hwnd_TextBox2;
    case CommandButton1:
        return hwnd_CommandButton1;
    case TextBox3:
        return hwnd_TextBox3;
    default: return NULL;
}
}

void Form_Unload(HWND hMainWnd)
{
DeleteFont(MSSansSerif_8pt);
return;
} 
```

**我尝试了很多次，但都失败了。即使你们给我好的网站链接，我也会很感激的。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T03:50:44.447

您正在寻找一本关于使用 C 进行 Win32 API 编程的好书。幸运的是，有一本很棒的书，几乎每个人都用来学习它。它是由 Charles Petzold 编写的，它被称为（恰如其分地）[*Programming Windows*](https://rads.stackoverflow.com/amzn/click/com/157231995X)。您想要第 5 版，它是讨论 Win32 编程的最新版本。

如果您搜索“Win32 编程”，也可以在线获得各种教程。但是，其中一些包含一些错误和误解（例如 ANSI 和 Unicode 字符串之间的差异），而好的则相当短且不完整。您不会从在线教程中学到编写一个重要程序所需的所有知识，但您应该能够在屏幕上获得一些非常简单的东西。[theForger 的这个](http://www.winprog.org/tutorial/)是我多次推荐过的。

但是请注意，编写 GUI 代码（尤其是在如此低的级别）往往比简单地将文本显示到控制台程序的屏幕上要冗长得多*。*您最终将编写一堆代码，这些代码仅用于使 GUI 工作，与您的程序逻辑无关。如果你先学习 C 语言会容易得多，而且最好通过简单的控制台类型的纯文本程序来完成。

* * *

至于您的具体问题，您已经在屏幕上创建了三个文本框控件，名为`hwnd_TextBoxX`，其中`X`是 1 到 3 之间的数字。您可能已经知道，`hwnd`表示*窗口的句柄 (wnd)*，因此这些变量持有句柄到文本框窗口。

Win32 API 提供了一个[`GetWindowText`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520.aspx)，您可以使用该函数从特定窗口中检索文本。您将一个指向所需窗口 ( `hWnd`) 的句柄、一个指向字符缓冲区的指针以及一个指示缓冲区长度的整数值传递给它。C 语言的丑陋特性已经出现了——你必须了解字符串在 C 中是如何工作的，才能正确调用函数。

一旦您检索到显示在其中一个文本框中的字符串，您可以使用类似的[`SetWindowText`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633546.aspx)将其显示在另一个文本框窗口中，该函数仅使用窗口句柄 ( `hWnd`) 和指向包含该字符串的缓冲区的指针。

代码看起来像这样：

```
// Get the text displayed in textbox 1
TCHAR szBuffer[100];
GetWindowText(hwnd_TextBox1, szBuffer, 100);

// Display that text in textbox 3
SetWindowText(hwnd_TextBox3, szBuffer); 
```

要响应单击按钮执行此操作，您需要了解 Win32 中的“事件”等价物——窗口消息。子窗口，如按钮控件，在发生可能有趣的事情时（例如用户单击它们）向其父窗口（即对话框）发送通知消息。

特别是，按钮控件通过[message](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647591.aspx)向其父级发送[`BN_CLICKED`通知](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761825.aspx)。通过在主窗口的窗口过程 ( ) 方法中处理消息，您可以检查参数是否与按钮控件的窗口句柄 ( )匹配，并且与通知代码匹配。[`WM_COMMAND`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647591.aspx)`WM_COMMAND``WndProc``lParam``hWnd``HIWORD(wParam)``BN_CLICKED`

您肯定需要一本好书，其中包含该示例的分步示例代码。在堆栈溢出答案中彻底解释有点太难了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T04:05:00.417

仅使用 Win32 API 编写 GUI 应用程序有些有趣，但也很乏味。使用某种框架要容易得多。但这并不意味着它是不可能的。以下是您如何执行此操作的快速概述。

首先，将`main`例程替换为[WinMain](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633559%28v=vs.85%29.aspx)。此例程是应用程序的新入口点。它将负责创建窗口并设置消息分发循环。

请注意，我说的是“窗口”，而不仅仅是“窗口”。在 WinAPI 中，您在“窗体”上看到的每个“控件”都是一个“窗口”。“表格”本身也是一个窗口。每个窗口都有一个窗口句柄 ( `HWND`)。您可以使用[CreateWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632679%28v=vs.85%29.aspx)创建一个应用程序窗口。这将为您提供一个窗口句柄，您可以将其传递给`CreateChildWindows`GUI 构建器为您创建的函数。这会将子窗口（控件）添加到应用程序窗口。

现在您需要对所有这些窗口进行编程。您可以通过处理消息来做到这一点。创建应用程序窗口时，您需要提供一个*窗口过程*。此过程将在消息进入时对其进行响应。例如，单击按钮`WM_COMMAND`会产生一条您必须处理的消息。最后一件事`WinMain`是启动一个消息处理循环，该循环重复调用您`WndProc`的任何传入消息。

一旦您完成了另一个答案中链接的教程，这一切都将开始变得有意义。然后你可能会厌倦这个并拿起一个 GUI 工具包:)****

# php - 锂中某些模型的不同数据库

> ID：11770697
> 
> 赞同：1
> 
> 时间：2012-08-02T03:34:50.790
> 
> 标签：php, lithium

我的应用程序要求我使用 2 个数据库。大多数模型只使用一个模型的数据，但有些模型需要我使用不同的数据库。是否可以在模型中指定要使用的数据库？我正在为我的数据库使用 MongoDB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:30:24.373

[Lithium 文档](http://lithify.me/docs/manual/working-with-data/using-models.wiki)在“模型创建和配置”部分中解释了多个连接

从该页面，如果您想使用“备份”连接：

```
<?php
namespace app\models;
class Posts extends \lithium\data\Model {
    protected $_meta = array(
        'connection' => 'backup'
    );
}
?> 
```

来自同一页面的进一步解释：

> 配置模型的 $_meta 属性后，Lithium 会在运行时将其与默认设置合并。因为 Post 模型有一个指定的连接，所以使用备份连接而不是默认连接。

# css - Nivo滑块css下拉菜单冲突

> ID：11770703
> 
> 赞同：0
> 
> 时间：2012-08-02T03:35:40.763
> 
> 标签：css, menu, slider, nivo-slider

我正在尝试向其中添加 nivo 滑块的网站上工作。我遇到的问题是滑块覆盖了 CSS 下拉菜单，我在菜单中看不到方向箭头。

当我将 z-index:-50 添加到 nivo-slider.css 文件中的 .nivoSlider 行时，菜单没有隐藏在滑块后面，但我仍然没有导航箭头，现在导航实际滑块（​​左或右）中的箭头可见但不起作用。

查看这些问题的链接在[这里](http://www.clarkbrands.com/gallery2.php)。

任何建议的帮助将不胜感激。谢谢，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:03:54.663

好的，首先从`.nivoSlider`. 第二个也是最重要的部分 - 你在菜单中有这样的结构：

```
<ul id="nav-one" class="dropmenu css-only">
<li><a style="border-left:1px solid #CCCCCC; padding-left:23px; padding-right:23px;" href="index.php">Home</a></li>

<li><a href="company.php">Company</a>
    <ul class="SomeNewClass">
    <li><a href="history.php">History</a></li>
    <li><a href="markets.php">Markets</a></li>
    <li><a href="news.php">News</a></li>
    <li><a href="licensee-advisory-board.php">Licensee Advisory Board</a></li>
    <li><a href="copyright-notice.php">Copyright Notice</a></li>
    </ul>
    </li>
<li><a href="branding.php">Branding</a>
    <ul class="SomeNewClass">
    <li><a href="graphics.php">Graphics</a></li>
    <li><a href="signs.php">Signs</a></li>
    <li><a href="paint.php">Paint</a></li>
    <li><a href="dispenser-doorSkins.php">Dispenser DoorSkins</a></li>
    <li><a href="dispenser-overlays.php">Dispenser Overlays</a></li>
    <li><a href="image-manual.php">Image Manual</a></li>
    <li><a href="image-evaluation-form.php">Image Evaluation Form</a></li>
    </ul>
</li>
<li><a href="payments-processing.php">Payments Processing</a>
    <ul class="SomeNewClass">
    <li><a href="fleet-card.php">Fleet Card</a></li>
    <li><a href="echoSat.php">EchoSat</a></li>
    <li><a href="PCI-compliance.php">PCI Compliance</a></li>
    <li><a href="transnational.php">TransNational</a></li>
    </ul>
</li>
....
....
.... 
```

如您所见，我添加了名为`.SomeNewClass`. 把这个类放在我在例子中展示给你的所有位置，然后把它放到你的 CSS 中

```
.SomeNewClass
{
    z-index: 99999;
} 
```

# javascript - 求和值时的Javascript舍入问题

> ID：11770704
> 
> 赞同：1
> 
> 时间：2012-08-02T03:36:00.933
> 
> 标签：javascript, floating-point, floating-accuracy

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

用户在前两个文本框中输入值，当他们键入时，Javascript（抱歉，没有 jQuery，我还没达到这个水平）用于计算精确的总和并将总和四舍五入为 2 位数。

为什么我会出现舍入错误，我该怎么做才能纠正它？

非常感谢。

嗯.... ParseFloat？错误的数据类型？

我想看看精确的答案是否就像添加在计算器上一样。是否有我可以使用的 parseDecimal 或其他数据类型？

![在此处输入图像描述][1]

```
 function SumValues() {
        //debugger;
        var txtSubsContrRbtAmt = document.getElementById("<%=txtSubsContrRbtAmt.ClientID%>");
        var txtDeMinAmt = document.getElementById("<%=txtDeMinAmt.ClientID%>");
        var txtTotRbtAmt = document.getElementById("<%=txtTotRbtAmt.ClientID%>");
        var txtRndRbtAmt = document.getElementById("<%=txtRndRbtAmt.ClientID%>");

        var total = Add(txtSubsContrRbtAmt.value, txtDeMinAmt.value);

        txtTotRbtAmt.value = total;
        txtRndRbtAmt.value = RoundToTwoDecimalPlaces(total);
    }

    function Add() {
        var sum = 0;
        for (var i = 0, j = arguments.length; i < j; i++) {
            var currentValue;
            if (isNumber(arguments[i])) {
                currentValue = parseFloat(arguments[i]);
            }
            else {
                currentValue = 0;
            }

            sum += currentValue;
        }
        return sum;
    }

    function RoundToTwoDecimalPlaces(input) {

        return Math.round(input * 100) / 100
    }

    function IsNumeric(input) {
        return (input - 0) == input && input.length > 0;
    }

    function isNumber(n) {
        return !isNaN(parseFloat(n)) && isFinite(n);
    }

  [1]: http://i.stack.imgur.com/5Otrm.png 
```

更新。我正在评估这样的事情：

```
function AddWithPrecision(a, b, precision) {
        var x = Math.pow(10, precision || 2);
        return (Math.round(a * x) + Math.round(b * x)) / x;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T04:39:20.523

对于任何在金融领域（或任何处理金钱的软件）编写软件的人来说，有一条黄金法则：永远不要使用浮点数。因此，大多数处理货币的软件仅使用整数并将十进制数表示为数据结构。

这是一种方法：

（注意：这个函数添加了两个看起来像数字的字符串）

（附加说明：没有进行错误检查以帮助清晰。也不处理负数）

```
function addNumberStrings (a,b) {
    a = a.split('.');
    b = b.split('.');
    var a_decimal = a[1] || '0';
    var b_decimal = b[1] || '0';
    diff = a_decimal.length - b_decimal.length;
    while (diff > 0) {
        b_decimal += '0';
        diff --;
    }
    while (diff < 0) {
        a_decimal += '0';
        diff ++;
    }
    var decimal_position = a_decimal.length;

    a = a[0] + a_decimal;
    b = b[0] + b_decimal;

    var result = (parseInt(a,10)+parseInt(b,10)) + '';

    if (result.length < decimal_position) {
        for (var x=result.length;x<decimal_position;x++) {
            result = '0'+result;
        }
        result = '0.'+result
    }
    else {
        p = result.length-decimal_position;
        result = result.substring(0,p)+'.'+result.substring(p);
    }
    return result;
} 
```

*注意：代码已简化，附加功能作为作业省略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:55:04.727

为了以您想要的方式修复您的添加，我建议以某种方式计算每个数字中的小数位数[这种方法，例如](http://forums.devarticles.com/javascript-development-22/how-to-determine-the-number-of-decimal-places-95291.html)然后将最大值传递给 toFixed，并修剪任何剩余的零。

```
function AddTwo(n1, n2) {
    var n3 = parseFloat(n1) + parseFloat(n2);
    var count1 = Decimals(n1, '.');
    var count2 = Decimals(n2, '.');
    var decimals = Math.max(count1, count2);
    var result = n3.toFixed(decimals)
    var resultDecimals = Decimals(result, '.');
    if (resultDecimals > 0) {
        return result.replace(/\.?0*$/,'');
    }
    else {
        return result;
    }
}

// Included for reference - I didn't write this
function Decimals(x, dec_sep)
{
    var tmp=new String();
    tmp=x;
    if (tmp.indexOf(dec_sep)>-1)
        return tmp.length-tmp.indexOf(dec_sep)-1;
    else
        return 0;
} 
```

这是一个[JSFiddle](http://jsfiddle.net/mootinator/rsZ3t/2/)

# c# - xsl 和 XML 转换产生重复记录

> ID：11770707
> 
> 赞同：1
> 
> 时间：2012-08-02T03:36:20.397
> 
> 标签：c#, asp.net, xslt

我收到以下 xml 和 xsl 文件的重复记录。我只想转换一组列表项。如果可能，尽量不要从 xsl 部分中删除任何内容（只需添加即可）。

```
<?xml version="1.0" encoding="utf-8" ?>
<data>
  <listitems name="Select..." CtrId="Id2"/>
  <listitems name="Item A" CtrId="Id2"/>
  <listitems name="Item B" CtrId="Id2"/>
  <listitems name="Select..." CtrId="Id4"/>
  <listitems name="Item A" CtrId="Id4"/>
  <listitems name="Item B" CtrId="Id4"/>  
  <listitems name="Select..." CtrId="Id6"/>
  <listitems name="Item C" CtrId="Id6"/>
  <listitems name="Item D" CtrId="Id6"/>  
</data> 
```

```
 <xsl:template match="data/listitems">
    <html>
      <head>
        <title>Untitled</title>
      </head>
      <body>
        <xsl:value-of select="@name"/>
      </body>
    </html>
  </xsl:template> 
```

结果（不正确的行为；重复） 选择... 项目 A 项目 B 选择... 项目 A 项目 B

期望的行为（仅获得 1 组） 选择... 项目 A 项目 B

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:38:45.550

这是一个相对简单的方法：

```
<xsl:param name="useId" select="/data/listitems[1]/@CtrId" />

<xsl:template match="/">
  <html>
    <head>
      <title>Untitled</title>
    </head>
    <body>
      <xsl:apply-templates select="data/listitems[@CtrId = $useId]"/>
    </body>
  </html>
</xsl:template>

<xsl:template match="listitems">
  <xsl:value-of select="concat(@name, ' ')" />
</xsl:template> 
```

您现有的模板实际上会`html`为每个`listitems`元素添加一个元素 - 您似乎很可能只想要一个。

`<xsl:param>`顶部的声明选择文件中的第一个 CtrId，并使用它。您可以将其更改为文字值`select="'Id2'"`（注意双引号内的单引号），或者您可以将参数传递到带有您想要挑选的 ID 的样式表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:21:29.463

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="/*">
    <html>
      <head>
        <title>Untitled</title>
      </head>
      <body>
       <xsl:apply-templates select=
          "*[starts-with(@name,'Select')][1]"/>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="*[starts-with(@name,'Select')]">
    <xsl:apply-templates mode="inGroup" select=
    "(.|following-sibling::*
        [generate-id(following-sibling::*
                     [@name[starts-with(.,'Select')]][1]
                     )
        =
         generate-id(current()/following-sibling::*
                               [@name[starts-with(.,'Select')]][1])
        ]
     )/@name
    "/>
  </xsl:template>

  <xsl:template match="@name" mode="inGroup">
   <xsl:value-of select="concat(., ' ')"/>
  </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<data>
  <listitems name="Select..." CtrId="Id2"/>
  <listitems name="Item A" CtrId="Id2"/>
  <listitems name="Item B" CtrId="Id2"/>
  <listitems name="Select..." CtrId="Id4"/>
  <listitems name="Item A" CtrId="Id4"/>
  <listitems name="Item B" CtrId="Id4"/>
</data> 
```

**产生想要的正确结果：**

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

      <title>Untitled</title>
   </head>
   <body>Select... Item A Item B </body>
</html> 
```

# google-apps-script - 基于其他工作表的 onEdit 时间戳

> ID：11770710
> 
> 赞同：0
> 
> 时间：2012-08-02T03:36:39.173
> 
> 标签：google-apps-script, google-sheets

截至目前，谷歌电子表格似乎不允许锁定单元格范围，而是必须在整个工作表的基础上进行锁定。我想与另一个用户共享一个工作表，并让他们在工作表 1 上输入数据。为了防止篡改，我希望在工作表 2 上复制的数据（由我锁定）以及工作表 1 上最后一次更改的时间戳。我一直在玩这个 onEdit() 函数，但是当我编辑工作表 1 时它没有给出更新的时间，但仍然只有在我编辑工作表 2 时才给出。我只是还没弄清楚我做错了什么。

```
function onEdit(e) 
{
  var ss = e.source.getActiveSheet();
  var rr  = e.source.getActiveRange();

//comment 2 lines below if you want it working on all sheets, not just on 2nd one
  if(ss.getIndex()!= 2)
    return;
 ///
  var firstRow = rr.getSheetByName(Sheet2).getRow();
  var lastRow = rr.getSheetByName(Sheet2).getLastRow();

//the last modified date will appear in 12th column
  for(var r=firstRow; r<=lastRow; r++)
    ss.getRange(r, 12).setValue(new Date());
} 
```

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:05:19.917

您不能使用脚本来防止其他用户篡改，因为他可以转到工具>脚本编辑器并编辑您的脚本，使其空闲，然后编辑 Sheet1，然后恢复您的脚本。请参阅[此问题的问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1600&can=1&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)。您无法保护您的脚本不被与您共享至少一个电子表格工作表的其他用户编辑。

另一方面，抛开脚本，您始终可以查看由谁以及何时编辑的历史：文件>查看修订历史。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-22T17:23:29.957

I see a couple of problems. First, you're trying to use `.getSheetByName()` on a range object, but that method is only supported by spreadsheet objects. You can run `.getSheet()` on a range and that will return the sheet the range is in. Secondly, formatting: GAS requires standard Javascript which means that your `if` and `for` functions need to have `{}`. This should work for what you want:

```
onEdit(e){
if(e.range.getSheet().getSheetName()!="Sheet2"){
 var row1=e.range.getRow();
 var col2=e.range.getColumn();
 var row2=e.range.getLastRow();
 var col2=e.range.getLastColumn();
 var data=e.range.getValues();//the data to be copied
 var copySheet=e.source.getSheetByName("Sheet2");//sheet you want to copy to
 var copyRange=copySheet.getRange(row1,col1,row2-row1,col2-col1);// the range data will be copied to
 var time=new Date();
 var timeRange=copySheet.getRange(row,col);//wherever you want the time signature to be. 
 timeRange.setValue(time);//inserts time stamp into sheet
 copyRange.setValues(data);//copies data to the range
}
} 
```

Just replace `row` and `col` with the row and column you want to place the time into. It takes the edited range and copies it to the same location on sheet 2 so it only works if sheet 1 is the only sheet to be edited. Otherwise you'll end up with overlapping data. You could also set a time stamp to be adjusted to the range, meaning put its position as something like `(row1,col2+5)`. That would put it 5 columns right of the edited range.

# html - http-equiv 中的内容处置或其他？

> ID：11770712
> 
> 赞同：2
> 
> 时间：2012-08-02T03:37:04.800
> 
> 标签：html, http, http-headers, meta-tags

元标记支持的标头列表是`http-equiv`一个有限的子集，还是它实际上接受您可以作为 http 标头的任何内容？

具体来说，我可以使用`content-disposition`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:21:38.730

`meta`浏览器、搜索引擎和其他软件几乎都会忽略所有标签。

尽管 HTML 4.01 规范说“HTTP 服务器使用 [the `http-equiv`] 属性来收集 HTTP 响应消息头的信息”，但这并没有发生。（很早以前在一些特殊的服务器中就发生了一些这样的属性。）相反，`meta`具有属性的标签`http-equiv`被*浏览器*识别，但仅在极少数情况下。最重要的情况是`http-equiv="Content-Type"`可以用来决定字符编码，如果它已经在实际的 HTTP 标头中指定。

在 HTML5 草稿中，带有属性的`meta`标签称为“<a href="http://www.w3.org/TR/html5/the-meta-element.html#pragma-directives" rel="nofollow">pragma directives” `http-equiv`，并指定了一个明确的允许值列表。因此，所有其余的都是不合格的（实际上，主要是只写标签，被浏览器忽略）。

你不能影响`content-disposition`在那里使用的任何东西。要影响浏览器处理您在 HTML 文档中链接到的 CSV 文件的方式，您可能无法*在 HTML*中执行任何操作。您必须让服务器发送实际的 HTTP 标头，通常这样您的链接才能引用服务器端脚本，该脚本会获取 CSV 文件并将其与合适的 HTTP 标头一起发送。

# python - Python：多个实例似乎共享属性（或什么？！）

> ID：11770716
> 
> 赞同：0
> 
> 时间：2012-08-02T03:37:51.273
> 
> 标签：python, multiple-instances

Python 是我的第一语言，我对它很陌生，所以答案可能很清楚，但经过数小时的寻找和试验，我不确定是什么导致了问题。

模块概述：DicePool 模块用于管理“骰子”集合，存储为字典项。每个字典键（此处为 poolKey）都有一个列表，其中包含有关一种“类型”骰子的信息，最重要的是，一个描述其面的元组和一个表示“池”中“骰子”类型“x”的数量的整数。

我的具体问题是关于 Transfer 方法，它曾经是两种方法（基本上是发送和接收），但我认为我可以将它们组合成一种方法。当底部的测试代码运行时，我希望它离开 dp.dictPool[poolKey][1] == 0 和 dp2.dictPool[poolKey][1] == 2。但是在我所做的每一次尝试中, 值是一样的。抱歉，我无法更好地对这个问题进行分类。. . 我真的不知道问题是什么。

无论如何，Transfer 方法的一半应该为“发送者”实例运行，而另一半应该为“接收者”实例运行。

```
import random

class DicePool(object):

    def __init__(self):
        self.dictPool = {}

    def AddDice(self, poolKey, faces = 6, quant = 1, color = "white"):
        '''faces must be int or items 'a,b,c'; count must be int or def to 1'''
        try: #if count is not an integer, it defaults to 1
            quant = int(quant)
        except:
            print("Quant is not an integer, defaulting to 1")
            quant = 1
        try: #if faces is can be int, a list is built of numbers 1 to faces
            faces = int(faces)
            if faces < 2: #a 1 or 0-sided die breaks the program
                faces = 2
            tempList = []
            for i in range(1, faces+1):
                tempList.append(i)
            faces = tempList
        except: #if faces is not an integer, it is split into list items by ","
            faces = faces.split(",")
        if poolKey in self.dictPool.keys(): #if the key already exists in pool
            self.dictPool[poolKey][1] += quant #add to the quantity, 
        else: #if the key does not already exist, set all attributes
            self.dictPool[poolKey] = [faces, quant, color]

    def Transfer(self, poolKey, targetPool, sendQuant, senderPool = None):
        '''targetPool must be DicePool instance'''
        if targetPool:
            self.dictPool[poolKey][1] -= sendQuant
            targetPool.Transfer(poolKey, None, sendQuant, self)
        else:
            try:
                self.dictPool[poolKey][1] -= sendQuant
            except:
                self.dictPool[poolKey] = senderPool.dictPool[poolKey]
                self.dictPool[poolKey][1] = sendQuant

dp = DicePool()
dp2 = DicePool()

dp.AddDice("d6")
dp.AddDice("d6")
dp.Transfer("d6",dp2,2)
print(dp.dictPool,dp2.dictPool) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:54:10.727

问题出在这一行：

```
self.dictPool[poolKey] = senderPool.dictPool[poolKey] 
```

dictPools 中的值是列表。在这里，您将一个对象的 dictPool 值设置为与另一个对象*相同的列表*。不是列表的副本，而是相同的列表。因此，稍后如果您从该列表中添加或减去，它也会影响另一个，因为它们共享一个列表对象。

尝试做`self.dictPool[poolKey] = senderPool.dictPool[poolKey][:]`。抓取列表的`[:]`内容而不是列表对象本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:51:32.633

在 if/else 的两个部分中，`Transfer`您都在减去数量。您不想在一种情况下减去它，但在另一种情况下添加它吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T03:51:57.210

`else: try: self.dictPool[poolKey][1] -= sendQuant`应该是`+= sendQuant`代替吗？

可能是语义问题，而不是 Python 语法问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:12:04.760

这是 Transfer() 方法的一个版本，它似乎按预期工作（或多或少），尽管它看起来很笨拙：

```
def Transfer(self, poolKey, targetPool, sendQuant, senderPool = None):
    '''targetPool must be DicePool instance'''
    if isinstance(targetPool, DicePool):
        #valid target, so subtract dice here, then call Transfer on target
        temp = self.dictPool[poolKey][1:2][0] - sendQuant
        print("sent",sendQuant,"leaving",temp)
        targetPool.Transfer(poolKey, "Receiver", sendQuant, self)
    elif targetPool == "Receiver":
        #this executes if a DicePool is named as the targetPool of Transfer
        if poolKey in self.dictPool.keys():
            self.dictPool[poolKey][1:2][0] += sendQuant
        else:
            self.dictPool[poolKey] = senderPool.dictPool[poolKey]
            self.dictPool[poolKey][1:2] = [sendQuant]
        print("now have",self.dictPool[poolKey][1:2][0])
        pass
    else:
        print("Not a valid targetPool, apparently") 
```

# php - joomla 组件中的错误

> ID：11770718
> 
> 赞同：0
> 
> 时间：2012-08-02T03:38:01.757
> 
> 标签：php, joomla, joomla2.5, joomla-component

我正在尝试创建一个 joomla 组件。该组件是关于生成一个句子。基本上，这是帮助我生成它的代码/函数。

```
function getCategory()
{
    $cat = array("walk","reside","eat");
    return $b = $cat[array_rand($cat)];
}
function getS1() //function 1.1
{
      $db = JFactory::getDBO();
      $query = "select words from #__wordbank where function = 1.1 order by rand() LIMIT 1";
      $db->setQuery($query);
      return $db->loadResult();
}

function getV11() //function 2.11
{
    $db = JFactory::getDBO();
    $b = getCategory();
    $query = "select words from #__wordbank where function = 2.11 AND category = '$b' order by rand() LIMIT 1";
    $db->setQuery($query);
    return $db->loadResult();
}
function getP1() //function p1.1
{
    //load preposition
    $db = JFactory::getDBO();
$b = getCategory();
    $query = "select words from #__wordbank where function = 'p1.1' AND category =   '$b' order by rand() LIMIT 1";
    $db->setQuery($query);
    return $db->loadResult();
}
function getP2() //function p1.2
{
    //load noun 
    $db = JFactory::getDBO();
    $b = getCategory();
    $query = "select words from #__wordbank where function = 'p1.2' AND category = '$b' order by RAND() limit 1";
    $db->setQuery($query);
    return $db->loadResult();
} 
```

问题是当我`getCategory()`返回值总是不同时。我尝试使用 if else 但它仍然返回不同的值，因为`$cat[array_rand($cat)]`. 如果你们能帮我解决这个错误，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:49:44.363

你必须使用array_rend。此函数从数组中选择一个或多个随机条目

见网址：-

[http://php.net/manual/en/function.array-rand.php](http://php.net/manual/en/function.array-rand.php)

```
<?php
$input = array("Neo", "Morpheus", "Trinity", "Cypher", "Tank");
$rand_keys = array_rand($input, 2);
echo $input[$rand_keys[0]] . "\n";
echo $input[$rand_keys[1]] . "\n";
?> 
```

# android - 将可绘制资源加载到纹理中并渲染它

> ID：11770723
> 
> 赞同：2
> 
> 时间：2012-08-02T03:38:25.040
> 
> 标签：android, opengl-es-2.0

我正在尝试了解 android 中的 OpenGL ES 2.0。我从教程中得到了一个代码，但我不明白纹理是如何工作的。我什至无法理解渲染发生在哪里。这是我得到的代码。

```
@Override
public void surfaceCreated(GL10 gl) {
    // set up the surface
    gl.glDisable(GL10.GL_DITHER);
    gl.glHint(
        GL10.GL_PERSPECTIVE_CORRECTION_HINT,
        GL10.GL_FASTEST);
    gl.glClearColor(0.4f, 0.2f, 0.2f, 0.5f);
    gl.glShadeModel(GL10.GL_SMOOTH);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    // fetch the checker-board
    initImage(gl);
}
@Override
public void drawFrame(GL10 gl) {
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    GLU.gluLookAt(gl, 0, 0, -5, 0f, 0f, 0f, 0f, 1.0f, 0.0f);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    // apply the checker-board to the shape
    gl.glActiveTexture(GL10.GL_TEXTURE0);
    gl.glTexEnvx(
        GL10.GL_TEXTURE_ENV,
        GL10.GL_TEXTURE_ENV_MODE,
        GL10.GL_MODULATE);
    gl.glTexParameterx(
        GL10.GL_TEXTURE_2D,
        GL10.GL_TEXTURE_WRAP_S,
        GL10.GL_REPEAT);
    gl.glTexParameterx(
        GL10.GL_TEXTURE_2D,
        GL10.GL_TEXTURE_WRAP_T,
        GL10.GL_REPEAT);
    // animation
    int t = (int) (SystemClock.uptimeMillis() % (10 * 1000L));
    gl.glTranslatef(6.0f - (0.0013f * t), 0, 0);
    // draw
    gl.glFrontFace(GL10.GL_CCW);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuf);
    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuf);
    gl.glDrawElements(
        GL10.GL_TRIANGLE_STRIP,
        5,
        GL10.GL_UNSIGNED_SHORT, indexBuf);
}

private void initImage(GL10 gl) {
    int[] textures = new int[1];
    gl.glGenTextures(1, textures, 0);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);
    gl.glTexParameterf(
        GL10.GL_TEXTURE_2D,
        GL10.GL_TEXTURE_MIN_FILTER,
        GL10.GL_NEAREST);
    gl.glTexParameterf(
        GL10.GL_TEXTURE_2D,
        GL10.GL_TEXTURE_MAG_FILTER,
        GL10.GL_LINEAR);
    gl.glTexParameterf(
        GL10.GL_TEXTURE_2D,
        GL10.GL_TEXTURE_WRAP_S,
        GL10.GL_CLAMP_TO_EDGE);
    gl.glTexParameterf(
        GL10.GL_TEXTURE_2D,
        GL10.GL_TEXTURE_WRAP_T,
        GL10.GL_CLAMP_TO_EDGE);
    gl.glTexEnvf(
        GL10.GL_TEXTURE_ENV,
        GL10.GL_TEXTURE_ENV_MODE,
        GL10.GL_REPLACE);
    InputStream in = context.getResources().openRawResource(R.drawable.cb);
    Bitmap image;
    try { image = BitmapFactory.decodeStream(in); }
    finally {
        try { in.close(); } catch(IOException e) { }
    }
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, image, 0);
    image.recycle();
} 
```

谁能向我解释从可绘制文件加载图像的位置，转换为纹理的位置以及渲染发生的位置？我似乎无法理解这一点。我熟悉如何在 OpenGL 中做到这一点，但似乎 OpenGL ES 2.0 使用了不同的技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T03:47:24.060

`GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, image, 0);`是一个实用函数，可以将 android Bitmap 转换为 OpenGL 纹理。

调用此方法时，它将位图存储`image`到当前绑定的纹理中，在您的情况下为`textures[0]`.

`glDrawElements`是实际触发渲染调用的命令。如果您想知道其他任何功能的作用，我建议您查看他们的在线帮助页面。

# jquery - JqChart - 如何在同一页面上显示两个图表？

> ID：11770725
> 
> 赞同：1
> 
> 时间：2012-08-02T03:38:32.380
> 
> 标签：jquery, charts, jqchart

如何在同一页面上显示两个图形？

我试图在折线图旁边放一个柱形图，并在函数中使用不同名称的变量，这两个图是冲突的。在萤火虫中没有显示错误，但图形很“疯狂”。

[http://www.jqchart.com](http://www.jqchart.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:53:59.947

你需要有不同的 id-s。您可以添加 2 个具有不同名称的 div 容器，并使用 $('#selector') 将它们制作成图表：

```
...
$('#jqChart1').jqChart({...});
$('#jqChart2').jqChart({...});
... 
<div id="jqChart1" style="width: 400px; height: 250px;">
</div>
<div id="jqChart2" style="width: 400px; height: 250px;">
</div>
... 
```

您也可以查看此示例： [http ://www.jqchart.com/samples/FinancialCharts/StockChartWithVolume](http://www.jqchart.com/samples/FinancialCharts/StockChartWithVolume)

它在页面上有 2 个图表。

# php - date_default_timezone_set('UTC') 不起作用

> ID：11770730
> 
> 赞同：13
> 
> 时间：2012-08-02T03:39:18.410
> 
> 标签：php, configuration, timezone

这似乎很奇怪，但我已经检查了所有内容，但仍然发生了奇怪的事情。

**我无法更改我的 php 脚本的时区**。

首先要做的事情是：我所做的是这样的：

```
<?php
date_default_timezone_set('UTC');
echo '<br>';
echo date('Y-m-d H:i:s');
?> 
```

[当我在测试http://codepad.org/rpYZ0flA](http://codepad.org/rpYZ0flA)上尝试这个时，这似乎工作正常。

我的服务器时区设置为 UTC+8:00 台北，但是当我尝试上面的代码时，它并没有真正起作用。它仍然在我的服务器时区显示我当前的 date_time，而不是遵循上面的代码。

这是我服务器的 php.ini 配置：

```
date/time support                    enabled
"Olson" Timezone Database Version   2012.3
Timezone Database                   internal
Default timezone                     Europe/Berlin 
```

为什么会这样？这已经是一个错误了吗？还是 server_setup 上的错误，或者我只是错过了代码中的某些内容？

谢谢你。

**注意：** 我的环境是使用 PHP 5.4.4 在 VM 中运行的 Windows 7N

**使固定：**

我通过手动更改 php.ini 得到了修复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-06T05:35:54.640

尝试这个

```
<?php 
echo date('Y-m-d H:i:s T', time()) . "\n";
date_default_timezone_set('UTC');
echo date('Y-m-d H:i:s T', time()) . "\n"; 
```

在这里你会发现测试结果[http://codepad.org/gc5oYnLW](http://codepad.org/gc5oYnLW)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-26T13:15:43.993

如果您只想要自 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 00:00:00 GMT）以来的秒数和时区。使用下面的代码：

```
<?php
date_default_timezone_set("UTC"); 
time()+date("Z"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T07:11:48.807

它应该可以正常工作。

如有疑问，请使用以下代码进行检查：

```
<?php 
date_default_timezone_set('America/Virgin');
echo date('Y-m-d H:i:s T') . "\n";
date_default_timezone_set('UTC');
echo date('Y-m-d H:i:s T') . "\n"; 
```

为了您的方便，[这里有一个键盘预览。](http://codepad.org/w8YbgLgC)

返回将如下所示（带有更新的日期和时间）：

```
2017-12-11 03:09:58 AST
2017-12-11 07:09:58 UTC 
```

如果失败，请仔细检查您的服务器配置……从您的`PHP.ini`文件开始。

# initialization - Ruby，setter和initialize方法有什么区别

> ID：11770731
> 
> 赞同：1
> 
> 时间：2012-08-02T03:39:19.870
> 
> 标签：initialization, setter

```
class Account
  def initialize(starting_balance = 0)
     @balance = starting_balance
  end

  def balance #instance getter method
     @balance #instance variable visible only to this object
  end 
```

 ****```
 def balance=(new_amount)
     @balance = new_amount
  end 
```**  **```
 def deposit(amount)
     @balance+=amount
  end 
```

 ****```
 @@bank_name= "MyBank.com" # class (static) variable

  # A class method
  def self.bank_name
     @@bank_name
  end
  # or: def SavingsAccount.bank_name : @@bank_name : end 
```**  **```
end 
```

我想理解粗体的代码片段。他们在做什么？setter 和 initialize 方法有什么区别。如果我有一个对象 test=Account.new() 以及为什么 test(30) 会出错。那不是假设使用参数 30 调用 setter 方法并设置余额吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:50:03.553

`initialize``Account.new`是在执行或时在新创建的对象上调用的方法`Account.new(my_starting_balance)`。在第一种情况下`initialize`将使用默认值`0`for调用，`starting_balance`在第二种情况下使用`my_starting_balance`.

当您执行where is class 的实例时，将`balance=`调用setter 方法。因此，如果您有以下代码，将在第 1 行（以 0 作为其参数）和在第 2 行（以 23 作为其参数）调用：`my_account.balance = some_value``my_account``Account``initialize``balance=`

```
my_account = Account.new
my_account.balance = 23 
```

当然，在这种情况下，我也可以编写以下内容，而根本不使用 setter 方法：

```
my_account = Account.new(23) 
```

但是，这并不总是有效，因为有时您可能希望在对象已创建`balance` *后更改 的值。*

> 如果我有一个对象 test=Account.new() 以及为什么 test(30) 会出错。

因为`test(30)`意味着“使用参数 30 调用方法”并且您的代码`test`中没有调用方法。`test`

* * *

关于代码的第二个粗体部分：正如注释所示，它设置了一个名为的类变量`@@bank_name`并定义了一个返回该变量值的类方法。********

# haskell - Haskell Data.List.Class 和语法

> ID：11770733
> 
> 赞同：8
> 
> 时间：2012-08-02T03:39:29.663
> 
> 标签：haskell, syntax, typeclass

我正在尝试阅读 Haskell 包 Data.List.Class 的源代码。（列表-0.4.2）。但我坚持使用一些语法。

开头是这样写的：

```
data ListItem l a =
    Nil |
    Cons { headL :: a, tailL :: l a } 
```

我不熟悉第 3 行的语法。我猜这最后一行相当于`Cons a (l a)`？？？。但我不太确定。我注意到文件的标题说：`{-# LANGUAGE FlexibleContexts, TypeFamilies #-}`.

然后，随着我的继续，该`type`语句有一个奇怪的用法： `type ItemM l :: * -> *`，我无法理解。

```
Data.List.Class
-- | A class for list types. Every list has an underlying monad.
class (MonadPlus l, Monad (ItemM l)) => List l where
    type ItemM l :: * -> *
    runList :: l a -> ItemM l (ListItem l a)
    joinL :: ItemM l (l a) -> l a
    cons :: a -> l a -> l a
    cons = mplus . return 
```

谁能帮忙解释一下这些是什么意思？我对 Data.List 有一个完美的理解，但是这个类型类的东西对我来说并不是很清楚。我还搜索了有关使用 Data.List.{Class,Tree} 的 wiki、示例和/或教程，但似乎没有任何内容，除了代码附带的注释。这里有任何指示吗？

谢谢。

-- 更新 -- 第一个答案 (@Chris) 帮助我理解了 Kind 签名和 Record 语法，这真的很有帮助。但是，就它如何捕获/定义 List 的行为以及它为熟悉的 Data.List 定义增加什么价值而言，我仍然无法从整体上理解那段代码。这里有一些进一步的细节，其中只有两个实例语句。该`Identity`术语也来自`import Data.Functor.Identity (Identity(..))`. 你能帮忙解释一下这是什么类型类来捕捉我们通常知道的列表的特征吗？同样，我在网上搜索了它，但除了代码本身之外，实际上没有 Data.List.Class 的文档。有谁知道？

此外，在 typeclass 约束中是否有另一个示例使用该`type`语句，类似于本示例中的内容？我搜索了 learnyouahaskell.com/ (@Landei) 但找不到这样的例子。我假设`type`这里的用法类似于`typedef`在 C++ 模板中使用 's 来定义“类型上的函数”，对吧？

再次感谢。

```
instance List [] where
    type ItemM [] = Identity
    runList [] = Identity Nil
    runList (x:xs) = Identity $ Cons x xs
    joinL = runIdentity
    cons = (:)

instance Functor m => Functor (ListItem m) where
    fmap _ Nil = Nil
    fmap func (Cons x xs) = Cons (func x) (fmap func xs) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T04:30:58.463

## 记录语法

这

```
data ListItem l a = Nil | Cons { headL :: a, tailL :: l a } 
```

称为*记录语法*。当您猜测结构与您输入的相同时，您是正确的

```
data ListItem l a = Nil | Cons a (l a) 
```

但是，您还可以获得两个访问器函数：

```
headL :: ListItem l a -> a
headL (Cons a _) = a

tailL :: ListItem l a -> l a
tailL (Cons _ as) = as 
```

记录语法是语法糖——在这里它可以为您节省大约 4 行代码。您可以以正常方式进行模式匹配，如本段正上方的代码，或者您可以在模式匹配中使用记录语法：

```
safeHeadL :: ListItem l a -> Maybe a
safeHeadL Nil                = Nothing
safeHeadL (Cons {headL = a}) = Just a 
```

同样，这被取消为标准模式匹配。

## 亲切的签名

这

```
class (MonadPlus l, Monad (ItemM l)) => List l where
  type ItemM l :: * -> *
  runList :: l a -> ItemM l (ListItem l a)
  joinL   :: ItemM l (l a) -> l a

  cons :: a -> l a -> l a
  cons = mplus . return 
```

是一个*类型族*声明。线

```
 type ItemM l :: * -> * 
```

是一种*亲切的签名*。当我们说某物有 kind`*`时，我们的意思是它是一个基本类型，比如`Int`or `Float`。说某物有种类`* -> *`意味着它是一个*类型构造函数*，即它接受一个类型并返回另一个类型。

`Maybe`类型构造函数有这样的签名：

```
Maybe :: * -> * 
```

请记住，`Maybe`它本身不是一种类型。它必须被赋予一个类型，然后它返回一个类型。给它`Int`，你得到`Maybe Int`。给它`Double`，你得到`Maybe Double`。

类型构造函数`ItemM l`接受一个类型参数（类型`*`）并返回一些类型`*`。请注意，既然`l`是善良的`*`，你有

```
ItemM :: * -> * -> * 
```

ie`ItemM`接受两种类型，并返回一个类型（等效地，它接受一种类型并返回一个一元类型构造函数）。

通过在类中包含类型声明，您施加了一个约束，即在类的所有实例中，`l`in`ItemM l`必须与`l`in匹配`List l`。不可能创建这些不匹配的类的实例。

# java - Java - 多元化包？

> ID：11770740
> 
> 赞同：2
> 
> 时间：2012-08-02T03:40:46.410
> 
> 标签：java, grammar

> **可能重复：**
> [单词的复数形式](https://stackoverflow.com/questions/5907296/plural-form-of-a-word)

如果我传递一个不是 1 的数字，是否有一些现有的类或库用于将“s”添加到字符串？基本上，我有一只猫。如果我有 1 只猫，我需要字符串“cat”。如果我有 2 只猫，我需要字符串“cats”。自己做是一件简单的事情，但是做完之后，我想可能已经有一个库可以导入了。但是，如您所见，如果存在的话，我很难将它用谷歌的话来描述一个包的名称。:P 只是我一直在写这个函数，我想知道它是否已经存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:49:44.393

复数化可能很简单，除了[像“cactus”或“tooth”](http://www.hintsandthings.co.uk/library/plurals.htm)这样的单词列表有些特殊，你不需要完整的 API 或者你可以自己实现。如果你真的不想尝试它，那么[`Inflector`图书馆](http://www.atteo.org/2011/12/12/Evo-Inflector.html)之类的东西可以为你做这件事。如果您搜索“java复数”，可能还有其他人。

此处为 Inflector 的 Javadocs：http: [//www.atteo.org/static/evo-inflector/apidocs/index.html](http://www.atteo.org/static/evo-inflector/apidocs/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:55:34.383

> 真的，我只是在做时间词（秒，分钟，小时）......

如果您有少量/固定的单词集，则使用静态查找表或类似的东西可能更简单。一个通用的解决方案太重了，IMO。

# android - Android语音识别不起作用

> ID：11770742
> 
> 赞同：1
> 
> 时间：2012-08-02T03:41:23.783
> 
> 标签：android, speech-recognition, speech, speech-to-text

我正在使用来自 newboston 的这个示例，它提示我进行录制，但在它识别出我所说的内容后，它不会更新列表视图。

这是代码。

```
public class MainActivity extends Activity {

private static final int RECOGNIZER_RESULT = 1234;
ListView list;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    list = (ListView) findViewById(R.id.list);

    Button btn_speach = (Button)findViewById(R.id.btn_speak);
    btn_speach.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
            intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speech to search");
            startActivityForResult(intent, RECOGNIZER_RESULT);

        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if(requestCode == RECOGNIZER_RESULT && requestCode == RESULT_OK){
        ArrayList<String> matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
        list.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, matches));
        for(int i = 0; i < matches.size(); i++){
            Log.i("MainActivity", matches.get(i));
        }
    }

    super.onActivityResult(requestCode, resultCode, data);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

这是xml布局。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/btn_speak"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button1" >

    </ListView>

</RelativeLayout> 
```

我没有收到任何错误。以下代码也不会在 LogCat 中打印任何内容。

```
for(int i = 0; i < matches.size(); i++){
            Log.i("MainActivity", matches.get(i));
} 
```

我正在我的具有语音识别功能的 android 设备上进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T10:18:36.813

你可以试试这个代码..它正在我的应用程序中运行......

```
import java.util.ArrayList;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.speech.RecognizerIntent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class MainActivity extends Activity {

    Button speak;
    ListView options;
    ArrayList<String> results;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //doctory endsl...
        speak = (Button) findViewById(R.id.bSpeak);
        options = (ListView) findViewById(R.id.lvOptions);

        speak.setOnClickListener(new OnClickListener() 
        {

            @Override
            public void onClick(View v) 
            {
                // This are the intents needed to start the Voice recognizer
                Intent i = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
               // i.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                     //   RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
                i.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US");
                i.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 15); // number of maximum results..
                i.putExtra(RecognizerIntent.EXTRA_PROMPT, "Say something");

                startActivityForResult(i, 1010);
            }
        });

        // retrieves data from the previous state. This is incase the phones
        // orientation changes
        if (savedInstanceState != null) {
            results = savedInstanceState.getStringArrayList("results");

            if (results != null) {
                options.setAdapter(new ArrayAdapter<String>(this,
                        android.R.layout.simple_list_item_1, results));
            }
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        // retrieves data from the VoiceRecognizer
        if (requestCode == 1010 && resultCode == RESULT_OK) {
            results = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

            if (results.contains("close"))
            {
                finish();
            }//extra testing...
            options.setAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, (results));
        }

        super.onActivityResult(requestCode, resultCode, data);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        // This should save all the data so that when the phone changes
        // orientation the data is saved
        super.onSaveInstanceState(outState);

        outState.putStringArrayList("results", results);
    } 

} 
```

和 xml 是...

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<ListView
    android:id="@+id/lvOptions"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1" >
</ListView>

<Button
    android:id="@+id/bSpeak"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="Speak" /> 
```

# objective-c - 使用 hitTest:withEvent 捕获其父视图框架之外的子视图的触摸：

> ID：11770743
> 
> 赞同：98
> 
> 时间：2012-08-02T03:41:24.313
> 
> 标签：objective-c, ios, uiview-hierarchy

**我的问题：**我有一个`EditView`基本上占据整个应用程序框架的超级视图，以及一个`MenuView`只占用底部 ~20% 的子视图，然后`MenuView`包含它自己的子视图`ButtonView`，它实际上位于`MenuView`' 的边界之外（像这样：）`ButtonView.frame.origin.y = -100`。

（注意：`EditView`有其他不属于`MenuView`的视图层次结构的子视图，但可能会影响答案。）

您可能已经知道这个问题：当`ButtonView`在 的范围内`MenuView`（或者，更具体地说，当我的触摸在`MenuView`的范围内时），`ButtonView`响应触摸事件。当我的触摸超出`MenuView`' 范围（但仍在`ButtonView`' 范围内）时， 不会收到任何触摸事件`ButtonView`。

**例子：**

*   (E) is `EditView`，所有视图的父级
*   (M) is `MenuView`, EditView 的一个子视图
*   (B) 是`ButtonView`，MenuView 的子视图

**图表：**

```
+------------------------------+
|E                             |
|                              |
|                              |
|                              |
|                              |
|+-----+                       |
||B    |                       |
|+-----+                       |
|+----------------------------+|
||M                           ||
||                            ||
|+----------------------------+|
+------------------------------+ 
```

因为 (B) 在 (M) 的框架之外，所以 (B) 区域中的点击将永远不会发送到 (M) - 事实上， (M) 在这种情况下从不分析触摸，触摸被发送到层次结构中的下一个对象。

**目标：**我认为覆盖`hitTest:withEvent:`可以解决这个问题，但我不明白如何。就我而言，应该在（我的“主”超级视图）`hitTest:withEvent:`中被覆盖？`EditView`还是应该在`MenuView`未接收触摸的按钮的直接超级视图中覆盖它？还是我想错了？

如果这需要一个冗长的解释，一个好的在线资源会很有帮助——除了 Apple 的 UIView 文档，我没有说清楚。

谢谢！

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-02-14T13:13:11.897

我已将接受的答案的代码修改为更通用 - 它处理视图将子视图剪辑到其边界的情况，可能被隐藏，更重要的是：如果子视图是复杂的视图层次结构，则将返回正确的子视图。

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {

    if (self.clipsToBounds) {
        return nil;
    }

    if (self.hidden) {
        return nil;
    }

    if (self.alpha == 0) {
        return nil;
    }

    for (UIView *subview in self.subviews.reverseObjectEnumerator) {
        CGPoint subPoint = [subview convertPoint:point fromView:self];
        UIView *result = [subview hitTest:subPoint withEvent:event];

        if (result) {
            return result;
        }
    }

    return nil;
} 
```

**斯威夫特 3**

```
override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {

    if clipsToBounds || isHidden || alpha == 0 {
        return nil
    }

    for subview in subviews.reversed() {
        let subPoint = subview.convert(point, from: self)
        if let result = subview.hitTest(subPoint, with: event) {
            return result
        }
    }

    return nil
} 
```

我希望这可以帮助任何尝试将此解决方案用于更复杂用例的人。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-08-03T17:39:13.773

好的，我做了一些挖掘和测试，这就是`hitTest:withEvent`工作原理 - 至少在高水平上。想象这个场景：

*   **(E) 是 EditView**，所有视图的父级
*   **(M) 是 MenuView**， EditView 的子视图
*   **(B) 是 ButtonView**， MenuView 的子视图

图表：

```
+------------------------------+
|E                             |
|                              |
|                              |
|                              |
|                              |
|+-----+                       |
||B    |                       |
|+-----+                       |
|+----------------------------+|
||M                           ||
||                            ||
|+----------------------------+|
+------------------------------+ 
```

因为 (B) 在 (M) 的框架之外，所以 (B) 区域中的点击将永远不会发送到 (M) - 事实上， (M) 在这种情况下从不分析触摸，触摸被发送到层次结构中的下一个对象。

但是，如果您`hitTest:withEvent:`在 (M) 中实现，应用程序中任何地方的点击都将被发送到 (M)（或者它至少知道它们）。在这种情况下，您可以编写代码来处理触摸并返回应该接收触摸的对象。

更具体地说： 的目标`hitTest:withEvent:`是返回应该接收命中的对象。因此，在 (M) 中，您可能会编写如下代码：

```
// need this to capture button taps since they are outside of self.frame
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{   
    for (UIView *subview in self.subviews) {
        if (CGRectContainsPoint(subview.frame, point)) {
            return subview;
        }
    }

    // use this to pass the 'touch' onward in case no subviews trigger the touch
    return [super hitTest:point withEvent:event];
} 
```

我对这种方法和这个问题还是很陌生，所以如果有更有效或更正确的方法来编写代码，请发表评论。

我希望这对以后遇到这个问题的其他人有所帮助。:)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-03-28T14:24:54.277

在斯威夫特 5

```
override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {
    guard !clipsToBounds && !isHidden && alpha > 0 else { return nil }
    for member in subviews.reversed() {
        let subPoint = member.convert(point, from: self)
        guard let result = member.hitTest(subPoint, with: event) else { continue }
        return result
    }
    return nil
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T04:07:01.913

我要做的是让 ButtonView 和 MenuView 都存在于视图层次结构中的同一级别，方法是将它们都放在一个框架完全适合它们的容器中。这样，被剪切项目的交互区域将不会因为它的超级视图边界而被忽略。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-03T06:51:21.773

如果您的父视图中有许多其他子视图，那么如果您使用上述解决方案，那么大多数其他交互式视图可能都不起作用，在这种情况下，您可以使用类似这样的东西（在 Swift 3.2 中）：

```
class BoundingSubviewsViewExtension: UIView {

    @IBOutlet var targetView: UIView!

    override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {
        // Convert the point to the target view's coordinate system.
        // The target view isn't necessarily the immediate subview
        let pointForTargetView: CGPoint? = targetView?.convert(point, from: self)
        if (targetView?.bounds.contains(pointForTargetView!))! {
            // The target view may have its view hierarchy,
            // so call its hitTest method to return the right hit-test view
            return targetView?.hitTest(pointForTargetView ?? CGPoint.zero, with: event)
        }
        return super.hitTest(point, with: event)
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-19T10:50:45.783

将以下代码行放入您的视图层次结构中：

```
- (UIView*)hitTest:(CGPoint)point withEvent:(UIEvent*)event
{
    UIView* hitView = [super hitTest:point withEvent:event];
    if (hitView != nil)
    {
        [self.superview bringSubviewToFront:self];
    }
    return hitView;
}

- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent*)event
{
    CGRect rect = self.bounds;
    BOOL isInside = CGRectContainsPoint(rect, point);
    if(!isInside)
    {
        for (UIView *view in self.subviews)
        {
            isInside = CGRectContainsPoint(view.frame, point);
            if(isInside)
                break;
        }
    }
    return isInside;
} 
```

为了更清楚地说明，在我的博客“goaheadwithiphonetech”中有关于“自定义标注：按钮不可点击的问题”的解释。

希望对你有帮助……！！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-26T17:16:59.213

如果有人需要，这里是快速的选择

```
override func hitTest(point: CGPoint, withEvent event: UIEvent?) -> UIView? {
    if !self.clipsToBounds && !self.hidden && self.alpha > 0 {
        for subview in self.subviews.reverse() {
            let subPoint = subview.convertPoint(point, fromView:self);

            if let result = subview.hitTest(subPoint, withEvent:event) {
                return result;
            }
        }
    }

    return nil
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-30T15:22:34.550

我花了一些时间来了解它是如何工作的，因为上述解决方案对我不起作用，因为我有很多嵌套的子视图。我将尝试简单地解释 hitTest 以便每个人都可以根据情况调整他的代码。

想象一下这种情况：一个名为 GrandParent 的视图在其边界内有一个名为 Parent 的子视图。此 Parent 有一个名为 Child 的子视图，其边界超出 Parent 的 bounds ：

```
-------------------------------------- -> Grand parent 
|              ------- -> Child      |
|              |     |               |
|          ----|-----|--- -> Parent  |
|          |   |   ^ |   |           |
|          |   |     |   |           |
|          ----|-----|---            |
|              | +   |               |
|     *        |-----|               |
|                                    |
-------------------------------------- 
```

`*` `+`并且`^`是 3 种不同的用户触摸。`+`在 Child 上无法识别 touch 每当您在其边界的任何位置触摸祖父***时，无论您在祖父中触摸的哪个位置，祖父都会******调用其所有直接子视图`.hitTest`***。所以在这里，对于 3 次触摸，祖父母会打电话给`parent.hitTest()`。

hitTest 应该返回包含给定点的最远后代（该点是相对于自身边界给出的，在我们的示例中，Grand Parent 调用 Parent.hitTest() 并带有一个相对于 Parent 边界的点）。

对于`*`触摸，parent.hitTest 返回 nil，非常完美。对于`^`触摸，parent.hitTest 返回 Child，因为它在其边界内（hitTest 的默认实现）。

但是对于`+`触摸， parent.hitTest 默认返回 nil，因为触摸不在父母的范围内。因此，我们需要自定义实现 hitTest，以便基本上将相对于 Parent 边界的点转换为相对于 Child 边界的点。然后在孩子上调用 hitTest 以查看触摸是否在孩子边界内（孩子应该具有 hitTest 的默认实现，返回与其边界内最远的后代，即：自身）。

如果您有复杂的嵌套子视图，并且上述解决方案对您来说效果不佳，则此说明可能有助于您进行自定义实现，以适应您的视图层次结构。

# xml - SOAP 事务中的 CFML？

> ID：11770745
> 
> 赞同：1
> 
> 时间：2012-08-02T03:41:38.217
> 
> 标签：xml, soap, coldfusion, cfml

我远非 ColdFusion 或 XML 方面的专家，所以这可能是一个愚蠢的问题。但是有没有办法动态地构造 SOAP 事务的各个部分，也许是通过在事务本身中包含 CFML？我正在使用的 API 有一个“MultiQuery”，它允许在单个 SOAP 事务中运行许多简单的查询。我想使用此功能使用上一个网页提供的一堆唯一 ID 进行查询。我事先不知道需要将多少个 ID 添加到“MultiQuery”中，所以我的想法是将每个 ID 传递到包含“MultiQuery”的页面上的数组中，然后循环遍历数组（“allOfficers ") 来构建 SOAP 事务，如下所示：

```
<cfset queryOpen=HTMLEditFormat("<arr:string>")>
<cfset queryClose=HTMLEditFormat("</arr:string>")>
<soapenv:Body>
  <ser:MultiQuery>
     <ser:associationGuid>e1c095ca39af</ser:associationGuid>
     <ser:queries>
        <cfloop index="i" from="1" to="#arrayLen(allOfficers)#">
            <cfoutput>#queryOpen#</cfoutput>from Membership memb where memb.Owner='<cfoutput>#allOfficers[1]#</cfoutput>'<cfoutput>#queryClose#</cfoutput>
        </cfloop>
    </ser:queries>
  </ser:MultiQuery>
</soapenv:Body> 
```

这当然行不通。当我只输出数组时，它会产生很好的输出，如下所示：

```
<arr:string>from Membership memb where memb.Owner='006e1c09-25f9-4178-86de-13c3e63200ce'</arr:string> 
```

这正是我需要的 SOAP 信封格式。但同样，它不起作用——显然这是我试图使用的 cfloop，因为当我手动插入循环的输出时，SOAP 事务工作正常。

所以，如果有人能给我一些建议或让我指出正确的方向，我肯定会很感激。同样，我基本上是在尝试向 SOAP 事务动态添加内容。在此先感谢您的帮助！

更新：这是我用来尝试构建此 SOAP 请求的完整代码。谢谢大家的帮助！

```
<cfset queryOpen=HTMLEditFormat("<arr:string>")>
<cfset queryClose=HTMLEditFormat("</arr:string>")>

<cfloop index="i" from="1" to="#arrayLen(allOfficers)#">
<cfoutput>#queryOpen#</cfoutput>from Membership memb where memb.Owner='<cfoutput>#allOfficers[1]#</cfoutput>'<cfoutput>#queryClose#<br /></cfoutput>
        </cfloop>

<cfsavecontent variable="soapBody">
<cfoutput>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:imp="http://test.com/Services/Imports" xmlns:ser="http://test.com/Services" xmlns:arr="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
<soapenv:Header>
  <imp:SessionIdentifier Id="#URL.sessionGuid#"/>
</soapenv:Header>
<soapenv:Body>
  <ser:MultiQuery>
     <ser:associationGuid>12345</ser:associationGuid>
     <ser:queries>
        <cfloop index="i" from="1" to="#arrayLen(allOfficers)#">
            <cfoutput>#queryOpen#</cfoutput>from Membership memb where memb.Owner='<cfoutput>#allOfficers[i]#</cfoutput>'<cfoutput>#queryClose#</cfoutput>
        </cfloop>
    </ser:queries>
  </ser:MultiQuery>
</soapenv:Body>
</soapenv:Envelope>
</cfoutput>
</cfsavecontent>

<cfhttp url="https://test.com/Live/Partner/ObjectService" method="post" useragent="#CGI.http_user_agent#">
<cfhttpparam type="header" name="SOAPAction" value="http://test.com/Services/IObjectService/MultiQuery" />
<cfhttpparam type="header" name="accept-encoding" value="no-compression" />
<cfhttpparam type="xml" name="soapenv" value="#trim(soapBody)#" /> 
</cfhttp>

<cfset soapBody = xmlParse(cfhttp.fileContent) />
<cfset soapBody = soapBody['s:Envelope']['s:Body'].MultiQueryResponse.MultiQueryResult.Objects.ArrayOfanyType.anyType.Fields />
<cfset keyValue = xmlSearch(soapBody,"//*[local-name()='KeyValueOfstringanyType']") /> 
```

然后我可以遍历 keyValue[] 来构建我的页面。上面显示的代码不起作用。当我取出 cfloop 并手动更换它时，它可以工作。所以我想我的问题是，如何向 SOAP 主体的查询部分添加更多查询？或者，这甚至是正确的方法吗？我不知道每个委员会有多少分会官员，在用户选择分会之前我也不知道他们的 GUID。

希望这是有道理的！再次感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:40:05.513

为什么不在`<cfsavecontent>`它周围放一个标签，然后将其转储到屏幕上以查看输出。

我在那里看不到任何`<cfoutput>`标签，但很难猜测它是作为文本还是 cfml 执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:26:47.300

您应该看到 Ben Nadel 关于[使用 ColdFusion 和 CFHTTP 进行 SOAP Web 服务请求的帖子](http://www.bennadel.com/blog/1809-Making-SOAP-Web-Service-Requests-With-ColdFusion-And-CFHTTP.htm)

另外，您为什么要进行大量查询？为什么不做一个？

```
<cfoutput>#queryOpen# from Membership memb where memb.Owner in (<cfqueryparam cfsqltype="cf_sql_integer" value="#arrayToList(allOfficers)#" list="true" > ) #queryClose#</cfoutput> 
```

# iphone - UIButton点击传递参数？

> ID：11770746
> 
> 赞同：1
> 
> 时间：2012-08-02T03:41:41.430
> 
> 标签：iphone, objective-c, ios

除了在下面的代码中使用 button.tag 之外，有没有办法将布尔值传递给 addClicked 方法？

```
[cellview.buttonAdd addTarget:self action:@selector(addClicked:) forControlEvents:UIControlEventTouchUpInside];

-(void) addClicked:(id)sender {

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:27:02.967

如果要添加整数属性，可以使用标签。如果要添加非整数属性，则必须使用具有关联引用的类别，继承的 UIButton 根本无法发布属性。你可以看到这个：

## [子类 UIButton 添加属性](https://stackoverflow.com/questions/5500327/subclass-uibutton-to-add-a-property/5500525#5500525)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T03:49:38.763

尝试这样的事情：

```
-(void) addClicked:(id)sender
{
    UIButton * button = (UIButton*)sender;
    NSLog(@"Button Tag: %i", button.tag);
} 
```

*不确定**通过 Boolean**是什么意思。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T03:50:50.547

简短回答：*您不能直接将额外信息传递给方法。*

你为什么要这样做呢？除了被点击的事实之外，按钮“知道”它需要交流什么？

应该通过实现单击处理程序的类中的实例变量来完成此操作。

如果您确实必须在按钮本身内部维护状态，请将其子类化：

```
@interface CustomButton : UIButton

@property (nonatomic, assign) BOOL myBoolValue;

@end

/* ... */

- (void)addClicked:(id)sender
{
    CustomButton *button = (CustomButton *)sender;
    if (button.myBoolValue) {
        // Whatever you want to do.
    }
} 
```

# regex - ant中的正则表达式否定

> ID：11770749
> 
> 赞同：3
> 
> 时间：2012-08-02T03:41:55.310
> 
> 标签：regex, ant, regex-negation, regex-greedy

我试图计算文件中不包含以下行的行数：

```
/*================================================= */ 
```

或者

```
Number of current users: 
```

或空行

我能够计算包含的行数`LIB`，

```
<propertyregex property="noOfUsers"
               input="@{line}"
               regexp="Number of current users:\s*([0-9]+)$"
               select="\1" /> 
```

但是，我无法得出否定表达式。有人可以帮我解决这个正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:29:05.540

1.  这是查找注释行的模式，例如`/* anything * /`。在您的语言中使用下面的模式，通过循环您可以找到注释行的数量。

    图案：`/^[/][*].*[*][/]$/`

2.  要查找空行，您可以使用以下模式

    图案：`/^\n/`

谢谢，阿伦

# html - 头像未正确放置在讲台 CSS 上

> ID：11770762
> 
> 赞同：0
> 
> 时间：2012-08-02T03:45:08.097
> 
> 标签：html, css

我只是想知道如何让化身人物站在讲台上（另一张图片）。这是我的意思的一个例子。我希望化身人像图片 B 一样站在讲台上。

我玩过它，结果是错误的。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:00:49.087

代码的重要部分是：

```
<img src="/path/to/avatar" />
<div id="avatar-holder"></div> 
```

您在 之前指定了图像`div`，因此它显示在顶部。我们想要它的头像。

因此，让我们将 html 更改为：

```
<div id="avatar-holder">
   <img src="/path/to/avatar" />
</div> 
```

我们想自由地定位我们的图像，所以我们这样做：

```
#avatar-holder {position:static;}
#avatar-holder > img {position:absolute;}
/* OR:
#avatar-holder > img {position:relative;}
*/ 
```

现在你摆弄图像的`top`/`left`属性，可能分配负像素值，直到它看起来正确。仅适用于始终大小相同的图像，或者我们需要更复杂的东西。*你也可以使用margins*来做布局，但我不认为这很优雅。

如果结果应该让头像覆盖您的文本框，只需`margin-top`在头像持有者中添加一个。

使用背景图像时，您可能还想使用`no-repeat`; 您确实使用过的属性，`color`在`text-shadow`这里完全没用。

# docbook-5 - 为什么 DocBook 生成的 XHTML5 章节标题中有 ASCII #c2 字符？

> ID：11770764
> 
> 赞同：0
> 
> 时间：2012-08-02T03:45:27.953
> 
> 标签：docbook-5

我注意到我生成的 XHTML5 编号的章节标题在数字和标题字符串之间有一个 Â。我认为这是一个世代错误。但是不，我的 DocBook 发行版的 gentext 文件 common/en.xml 实际上指定了这一点。

common/en.xml 的第 338 行：

```
<l:template name="section" text="%n. %t"/> 
```

当在十六进制编辑器中查看时，%n 后面的点和空格是 ASCII 字符代码 C2 和 A0，它们分别是 Â 和 NBSP 字符。我能理解NBSP。但为什么是？

我知道我可以在我的自定义层中更改它。但默认值似乎很奇怪。

我正在使用 docbook-xsl-ns-1.77.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:26:41.087

那是因为编码是 UTF-8，这是当今文本的正常 Unicode 编码。在 UTF-8 中，任何高于 0x7F 的字符都由 2、3 或 4 个字节的序列表示，具体取决于它包含多少有效代码位。

0xC2 是开始 2 字节序列的字符之一。在二进制中，它是 1100 0010。两个 1 位表示一个 2 字符序列，而后五位是编码字符的前五位。第二个 0xA0 是 1001 0000。单个前导 1 位（后跟 0 位）表示序列的延续，底部 6 位是编码字符的底部位。

将第一个字节的低五位与第二个字节的低六位放在一起，我们得到 000 1001 0000，十六进制 U+A0，这确实是不间断的空间。

# xml - XML 序列化和 dataset.XMLReader 是否可以使用相同的 XML 文件？

> ID：11770766
> 
> 赞同：0
> 
> 时间：2012-08-02T03:46:00.407
> 
> 标签：xml, serialization, dataset, xmlreader

我正在开发一个计时器应用程序，它使用两个单独的 XML 文件来存储数据。XML 文件 1 存储分配时间和游戏名称的摘要数据。XML 文件 2 存储数据集的内容，这更像是事件的叙述。这允许用户加载保存的数据，并且基本上从他们离开的地方开始。我正在对 XML 文件 1 使用序列化/反序列化并将值加载到变量和 dataset.XMLReader(xml 文件路径) 以加载数据集。

我想合并这两个 XML 文件，但经过几个小时的搜索和尝试不同的代码后，我陷入了僵局。我正在尝试做的事情甚至可能吗？

我的一个想法是不要对 XML 文件 1 使用序列化/反序列化，而是重新构建我的应用程序（呃）以将这些变量也加载到数据集中，然后从那里填充变量。但是我仍然遇到 dataset.XMLReader(xml file path) 遇到多个根节点或节点结构不一致的问题的问题。

非常感谢使用 3 行代码让我的生活更轻松的问题、评论或圣杯解决方案。

XML 文件 1 的代码：

```
 static public void SerializeToXML(TimeData times, String filename)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(TimeData));
        TextWriter textWriter = new StreamWriter(filename);
        serializer.Serialize(textWriter, times);
        textWriter.Close();
    }

    private void DeSerializeFromXML(string filename)
    {
        XmlSerializer serializer = new
        XmlSerializer(typeof(TimeData));

        FileStream fs = new FileStream(filename, FileMode.Open);
        XmlReader reader = XmlReader.Create(fs);

        TimeData i;
        i = (TimeData)serializer.Deserialize(reader);            

        [bunch of code to convert ticks to readable time values and whatnot]

        fs.Close();
    }

XML File 1:

<?xml version="1.0" encoding="utf-8"?>
<TimeData>
  <Name>Test</Name>
  <TimeAllotted>76000000</TimeAllotted>
  <CumulativeTime>0</CumulativeTime>
  <TimeRemaining>76000000</TimeRemaining>
</TimeData> 
```

XML 文件 2 的代码：

本质上它只是 ds.ReadXml(xmlFileName); 和 ds.WriteXml(newFilename);

```
XML File 2:
<?xml version="1.0" encoding="utf-8"?>
<Detail>
  <Timer>
    <ID>1</ID>
    <Segment>1</Segment>
    <Event>Start</Event>
    <Value>00:00:00</Value>
    <Notes>Some Text</Notes>
  </Timer>
    <Timer>
      <ID>2</ID>
      <Segment>1</Segment>
      <Event>Start</Event>
      <Value>00:00:00</Value>
      <Notes>Some More Text</Notes>
  </Timer>
</Detail> 
```

我希望生成的 XML 文件看起来像什么，或者至少是包含上面所有数据的类似文件：

```
XML File 1:
<?xml version="1.0" encoding="utf-8"?>
<TimeApp>
  <TimeData>
    <Name>Test</Name>
    <TimeAllotted>76000000</TimeAllotted>
    <CumulativeTime>0</CumulativeTime>
    <TimeRemaining>76000000</TimeRemaining>
  </TimeData>
  <Detail>
    <Timer>
      <ID>1</ID>
      <Segment>1</Segment>
      <Event>Start</Event>
      <Value>00:00:00</Value>
      <Notes>Some Text</Notes>
    </Timer>
      <Timer>
        <ID>2</ID>
        <Segment>1</Segment>
        <Event>Stop</Event>
        <Value>00:00:00</Value>
        <Notes>Some More Text</Notes>
    </Timer>
  </Detail>
</TimeApp> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:38:13.113

问题解决了，我通过使用古老的“退一步，前进两步”方法做到了。

我没有将要保存在 XML 文件中的数据保存在数据表和一组类变量中，而是将两者放在同一数据集中的单独数据表中。此时需要做的只是一个 dataset.GetXML，然后将其保存到一个极值文件中。要重新加载，只需使用 dataset.ReadXML(xmlFilename)。

问题解决了。希望这对类似泡菜的人有所帮助。

# php - 两个动态模式之间的正则表达式

> ID：11770767
> 
> 赞同：1
> 
> 时间：2012-08-02T03:46:07.053
> 
> 标签：php, regex

我想找到任何匹配的东西

`[^1] and [/^1]`

例如，如果主题是这样的

```
sometext[^1]abcdef[/^1]somemoretext[^2]12345[/^2] 
```

我想取回一个以 abcdef 和 12345 作为元素的数组。

我读[了这个](https://stackoverflow.com/questions/1454913/regular-expression-to-find-a-string-included-between-two-characters-while-exclu)

我写了这段代码，我无法在 [] 之间推进过去的搜索

```
<?php

$test = '[12345]';

getnumberfromstring($test);

function getnumberfromstring($text)
{
    $pattern= '~(?<=\[)(.*?)(?=\])~';
    $matches= array();
    preg_match($pattern, $text, $matches);

    var_dump($matches);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:00:28.060

您的测试检查`'[12345]'`不适用于具有 的“开”`[^digit]`和“闭”的规则的字符串`[\^digit]`。此外，您在`preg_match`应该使用时使用：`preg_match_all`

试试这个：

```
<?php

$test = 'sometext[^1]abcdef[/^1]somemoretext[^2]12345[/^2]';

getnumberfromstring($test);

function getnumberfromstring($text)
{
    $pattern= '/(?<=\[\^\d\])(.*?)(?=\[\/\^\d\])/';
    $matches= array();
    preg_match_all($pattern, $text, $matches);

    var_dump($matches);
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:04:04.597

其他答案并不真正适用于您的情况；您的定界符更复杂，您必须使用开始定界符的一部分来匹配结束定界符。此外，除非标签内的数字限制为一位，否则您不能使用后向匹配来匹配第一个数字。您必须以正常方式匹配标签并使用捕获组来提取内容。（无论如何我都会这样做。Lookbehind 永远不应该是您使用的第一个工具。）

```
'~\[\^(\d+)\](.*?)\[/\^\1\]~' 
```

起始分隔符的数字被捕获在第一组中，并且反向引用`\1`匹配相同的数字，从而确保分隔符正确配对。分隔符之间的文本在组 #2 中捕获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T04:01:55.263

我在 php 5.4.5 中测试了以下代码：

```
<?php
$foo = 'sometext[^1]abcdef[/^1]somemoretext[^2]12345[/^2]';    
function getnumberfromstring($text)
{    
    $matches= array();
    # match [^1]...[/^1], [^2]...[/^2]
    preg_match_all('/\[\^(\d+)\]([^\[\]]+)\[\/\^\1\]/', $text, $matches, PREG_SET_ORDER);    
    for($i = 0; $i < count($matches); ++$i)
        printf("%s\n", $matches[$i][2]);
}
getnumberfromstring($foo);

?> 
```

输出：

```
abcdef
123456 
```

# c# - 创建用户定义的动态表

> ID：11770771
> 
> 赞同：0
> 
> 时间：2012-08-02T03:46:18.773
> 
> 标签：c#, asp.net

我有一个保存用户文档的数据库。用户可以将自己的元数据存储到每个文档中，为此我有 20 个“关键”字段。每个用户可以使用 1 到 20 列，并根据需要在 gridview 中重命名和排序。

文档表如下所示

```
Documents:
ID int primary key identity,
SiteID int foreign key references sites(id),
PDFFolder varchar(100),
Key1 varchar(300),
keyN varchar(300);  //Upto 20 keys 
```

现在我有另一个名为 KeyNames 的表：

```
KeyNames:
ID int primary key identity,
SiteId int foriegn key references sites(id),
KeyName1 varchar(50),
KeyOrder1 int,         //1 is Textbox, 2 is Multi Choice, 3 is date ect
KeyType1 int,
KeyNameN varchar(50),   //Repeat 20times
KeyOrderN int,
KeyTypeN int 
```

我正在使用的当前方法是为某个用户（拥有一个站点）获取文档的 DataTable

```
DataTable documents = GetDocuments(int userId, int siteId); 
```

然后我更改每个键的顺序和标题，如果顺序 < 0 则将其删除

```
 //Set Order of Keys
    if ((keys.KeyOrder1 <0) || (keys.KeyOrder1 == null))
    { 
        documentsTable.Columns.Remove("Key1");
   }
   else
    {
        documentsTable.Columns["Key1"].SetOrdinal((int)keys.KeyOrder1);
        documentsTable.Columns["Key1"].ColumnName = keys.Keyname1;                
    }

    //Repeat 20 times 
```

现在我只需将我的 gridview 的数据源设置为 DataTable 并绑定

```
this.Session["documents"] = documentsTable; //Save to session for future use
gvMail.DataSource = documentsTable;
gvMail.DataBind(); 
```

一切正常，除了现在我需要制作它，以便用户可以编辑每个键并将其保存回数据库。为了让事情变得更难，当每一行都放在editview中时，我希望它是一个Textbox或DropDownView（将来我会使用JavaScript来制作一个日期选择器，但不是这个例子）。

我试图扭转这个过程

```
 protected void btnEdit_Click(Object sender, EventArgs e)
 {
        Button btn = sender as Button;
        GridViewRow row = (GridViewRow)btn.NamingContainer;

        if (btn.Text == "Edit")
        {
            for (int i = 0; i < row.Cells.Count; i++)
            {
               //Get Header
               string header = gvMail.HeaderRow.Cells[i].Text;
               //Get Keys
               KeyName keys = db.GetKeys(SiteID);
               //Cycle through keys to find right key 
               //ie if (keys.KeyName1 == header)
               //  {
               //    switch (keys.KeyType1)
                     {
                        case 1: //Add Textbox
                        case 2: //add drop down box code
               //  }
        } 
```

我遇到的许多问题中的一个是它需要我重复代码 20 次以循环遍历所有键以查找它是哪个键并找到类型。

然后下一个问题是当我通过以下方式添加控件时：

```
 TextBox txtBox = new TextBox();
                    txtBox.Text = row.Cells[i].Text;

                    row.Cells[i].Controls.Add(txtBox); 
```

回发后它不存在..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:24:47.780

为什么不使用 DataGridView 中的模板列来创建 TextBox 和 DropDown 列表列？它非常简单易行，将解决您在回发后清除控件的问题。

# asp.net-mvc - 如何将html5属性和值放入mvc HiddenFor

> ID：11770772
> 
> 赞同：10
> 
> 时间：2012-08-02T03:46:20.363
> 
> 标签：asp.net-mvc

我有以下隐藏输入：

```
<input type="hidden" class="deleted" name="Deleted" data-id="@Model.Id" value="@Model.Deleted" /> 
```

我想将其转换为 MVC 助手 HiddenFor。

走到这一步：

```
@Html.HiddenFor(x => x.Deleted, new { @class="deleted" }) 
```

这样就涵盖了课程。我还需要 data-id 属性和值。

尝试将数据 ID 添加为：

```
@Html.HiddenFor(x => x.Deleted, new { @class="deleted", data-id="@Model.Id" }) 
```

好吧，助手似乎不喜欢 data-id 中的连字符。

那么怎么进去呢？

还有怎么进去`value="@Model.Deleted"`呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-02T03:58:10.657

渲染时使用`_`和 MVC 将其转换为。`-`

你也不需要`@`前面的`Model.Id`. 也删除双引号。下面的代码应该可以工作。

```
@Html.HiddenFor(x => x.Deleted, new { @class="deleted", data_id=Model.Id }) 
```

你为什么要给隐藏字段一个css类？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T03:53:53.287

尝试

```
@Html.HiddenFor(x => x.Deleted, new { @class="deleted", "data-id"="@Model.Id" }) 
```

# android - 来自 xml 的 ListFragment 布局

> ID：11770773
> 
> 赞同：6
> 
> 时间：2012-08-02T03:46:24.147
> 
> 标签：android, xml, layout, fragment

如何从 xml 创建**ListFragment**（支持 v4 库的）**布局**？ `ListFragment`以编程方式设置它的布局，所以如果你想修改它，你需要弄乱添加/删除视图。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T16:17:09.820

我已将创建的布局转换为 xml，您可以添加/删除小部件或添加`pulltorefresh`解决方案。您不应该更改所需的 ID。由于某些小部件需要内部 id，因此需要调用辅助函数，并且它需要在支持 v4 命名空间中，因为常量是内部的，具有默认可见性。

`list_loader.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/progress_container_id"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:orientation="vertical"
        android:visibility="gone" >

        <ProgressBar
            style="?android:attr/progressBarStyleLarge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <FrameLayout
        android:id="@+id/list_container_id"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TextView
            android:id="@+id/empty_id"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center" />

        <ListView
            android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:drawSelectorOnTop="false" >
        </ListView>
    </FrameLayout>
</FrameLayout> 
```

和中的类（`ListFragmentLayout`在`android.support.v4.app`你的项目中，你不需要修改支持v4 jar）

```
package android.support.v4.app;

import your.package.R;
import android.view.View;

public class ListFragmentLayout
{
    public static void setupIds(View view)
    {
        view.findViewById(R.id.empty_id).setId(ListFragment.INTERNAL_EMPTY_ID);
        view.findViewById(R.id.progress_container_id).setId(ListFragment.INTERNAL_PROGRESS_CONTAINER_ID);
        view.findViewById(R.id.list_container_id).setId(ListFragment.INTERNAL_LIST_CONTAINER_ID);
    }
} 
```

在您扩展的片段中`ListFragment`

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    View view = inflater.inflate(R.layout.list_loader, container, false);
    ListFragmentLayout.setupIds(view);
    return view;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-26T16:12:02.777

从 android sdk (ListFragment) ( [http://developer.android.com/reference/android/app/ListFragment.html](http://developer.android.com/reference/android/app/ListFragment.html) ):

> *public View onCreateView (LayoutInflater inflater, ViewGroup 容器, Bundle savedInstanceState)*
> 
> 提供默认实现以返回简单的列表视图。子类可以覆盖以替换为自己的布局。如果这样做，返回的视图层次结构必须有一个 ID 为 android.R.id.list 的 ListView，并且可以选择有一个兄弟视图 id android.R.id.empty，当列表为空时显示。
> 
> 如果您使用自己的自定义内容覆盖此方法，请考虑在布局文件中包含标准布局 list_content，以便继续保留 ListFragment 的所有标准行为。特别是，这是目前显示内置不确定进度状态的唯一方法。

因此，当您想要自己的 layout.xml 用于 FragmentList 覆盖 onCreateView 并膨胀您自己的布局时。

例如：

创建一个 android 布局 ( *yourlistlayout.xml* ) 并将以下 xml 放在要显示 ListFragment 的位置。

```
 <ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >
    </ListView> 
```

在您的*ListFragment*类中放入以下代码：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.yourlistlayout, null);       
    return v;       
} 
```

# node.js - 代理授权未通过 HTTPS 发送

> ID：11770775
> 
> 赞同：1
> 
> 时间：2012-08-02T03:46:39.210
> 
> 标签：node.js, https, proxy, http-headers

我在 Node.js 中创建了一个中间人代理。我实现了一个非常适合请求`Proxy-Authenticate`的`Proxy-Authorization`流程，`HTTP`但对于请求`Proxy-Authorization`完全省略了流程`HTTPS`。我想知道这是否有任何合乎逻辑的原因。

# ruby - 有关捆绑安装的信息

> ID：11770776
> 
> 赞同：3
> 
> 时间：2012-08-02T03:46:40.877
> 
> 标签：ruby, bundle

我正在运行 ruby​​ 1.9.3-p125 和 rails 3.2.6。当我运行时`bundle install`，我收到错误：

```
 Could not find addressable-2.3.1 in any of the sources 
```

我的 Gemfile.lock 包含“可寻址（2.3.1）”，但它不是我的应用程序的显式依赖项。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-06T14:28:00.027

addressable-2.3.1 被拉出`http://rubygems.org/gems/addressable/versions/2.3.1`

用于`bundle update`更新 Gemfile，它将使用 addressabe-2.3.2 代替

# css - Futura Condensed Extra Bold 的字体系列不起作用

> ID：11770787
> 
> 赞同：7
> 
> 时间：2012-08-02T03:48:07.370
> 
> 标签：css, font-family

问这个问题我感觉像个布偶，但我怎样才能让**Futura Condensed Extra Bold**出现在 CSS 中。

在有人说之前，是的，我知道那里的那些 Windows 人将无法看到它，但这是针对 Mac 社区的，无论如何在这个阶段我什至看不到它，我的系统上安装了字体。

所以我尝试了这个短语的很多变体，但都没有奏效。我已经尝试过使用和不使用引号、空格、破折号等各种方式，但它仍然无法正常工作。

```
font-family: "Futura-CondensedExtraBold", sans-serif; 
```

这是已安装字体的屏幕截图，您可以看到我使用的名称也与 PostScript 名称匹配。

[字体册截图](http://www.melbourneipsum.com.au/Screenshot.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:02:32.787

大多数在网络上使用 Futura 的人都是通过 Typekit 等服务加载的。因此，如果您在喜欢的网站上经常看到这种字体，就是因为这个原因。我建议尝试该服务或类似服务，以便每个人都可以看到它。我相信有一个免费的个人版本，它只是一个脚本安装。然后你的

```
font-family: "Futura-CondensedExtraBold", sans-serif; 
```

会工作。只需检查 Typekit 使用什么来加载它。我相信会有

```
font-family: "futura-pt-condensed", sans-serif; font-weight: 600; 
```

[https://typekit.com/fonts/futura-pt-condensed](https://typekit.com/fonts/futura-pt-condensed)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:43:28.600

可能该名称不是浏览器知道的名称。这可能与 PostScript 名称不同。尝试使用[列出已安装字体的工具](http://hasseg.org/stuff/fontList/example.html)（参见其[说明](http://hasseg.org/blog/post/526/getting-a-list-of-installed-fonts-with-flash-and-javascript/)）来确定名称。我的猜测是它可能是“Futura Condensed ExtraBold”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-27T04:10:52.567

除了标志性的 Futura Condensed Extra Bold，他们还在 nike.com 的标题上使用 Trade Gothic Condensed Bold

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-25T17:01:34.167

我自己也有类似的问题。在 Firefox 中，您可能只需要使用`"Futura"`with`font-stretch`和`font-weight`属性。Webkit/Blink 识别连字符字体。这对我在 Mac 上的跨浏览器有用：

```
font-family: "Futura-CondensedExtraBold", Futura, sans-serif;
font-stretch: condensed;
font-weight: bold; 
```

电子邮件 Web 客户端会去除 CSS，因此请对其进行测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T16:16:57.323

字体名称也是出了名的不一致，所以这可能是一个问题。你试过`@font-face`吗？这是一种更可靠的引用非标准字体的方法。前往[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

您需要字体的 OTF 或 TTF。它会为您完成剩下的工作并压缩演示和转换后的字体。

# java - 黑莓设备无法连接到互联网？

> ID：11770789
> 
> 赞同：1
> 
> 时间：2012-08-02T03:48:32.033
> 
> 标签：java, blackberry, blackberry-simulator, blackberry-jde, blackberry-webworks

我正在开发一个应用程序，我使用浏览器字段在其中加载 html 文件。我的代码如下。

主.java

```
 //pushing screen to browser field page..

public Main()
{        
    // Push a screen onto the UI stack for rendering.
    pushScreen(new WebViewController());
} 
```

WebViewController.java

```
 BrowserFieldConfig bfConfig = new BrowserFieldConfig();
    bfConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,
            BrowserFieldConfig.NAVIGATION_MODE_POINTER);
    bfConfig.setProperty(BrowserFieldConfig.JAVASCRIPT_ENABLED,
            Boolean.TRUE);
    bfConfig.setProperty(BrowserFieldConfig.ALLOW_CS_XHR, Boolean.TRUE);  
    bfConfig.setProperty(BrowserFieldConfig.INITIAL_SCALE, new Float(0.0));
    bwf = new BrowserField(bfConfig);
    add(bwf);

    UiApplication.getUiApplication().invokeLater(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            bwf.requestContent("local:///html/index.html");         
        }
    }, 500, false); 
```

**我所有的服务器代码和 UI 设计都分别在从 index.html 页面调用的 javascript 和 html 页面中......**

根据以下代码，它在模拟器中工作（执行）并在运行时从服务器获取数据。但是当我在 BlackBerry 设备上运行时，只有 UI 设计从 index.html 页面加载，但没有从服务器获取数据。我不知道错误是什么。我也在黑莓设备中启用了javascript，但它仍然无法正常工作..

由于我是这个黑莓开发的新手，在黑莓设备中运行时无法找到我的应用程序有什么问题。

**根据以下代码，我是否必须添加任何外部代码才能从服务器获取数据（就像签名后在黑莓设备中访问互联网一样）**

**在模拟器中，它运行良好并从服务器获取数据。在黑莓设备中执行时，只有主页 UI（index.html 中的 UI）正在加载，但不从服务器获取数据。**

谁能帮我这个.....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T06:35:11.307

这个问题是**“为什么我在黑莓上的连接有问题”**问题的变体。我会试着告诉你如何解决它们。

与 j2me、android 或 iphone 连接不同，网络连接要复杂得多，您通常要求系统打开 TCP/HTTP/UDP 连接。RIM 引入了[网络传输](https://www.youtube.com/watch?v=0bwM7T1ebc4)。我不确定原因——或者他们想让开发人员有权选择特定的传输方式，或者因为 BES 管理员/运营商可能会限制某些连接，或者其他原因。但副作用是 BB 开发人员必须指定他想为设备上的当前连接使用哪种传输。默认连接的戏剧性事情是直接 TCP（通过 APN 运营商设置）。直接 TCP 在模拟器上运行完美。但 BB 设备上最常用的连接是 BIS-B 和 WiFi。此外，BIS-B 以前对普通开发人员不可用，他们最近才向所有人开放。

在 5.0 之前，OS 开发人员有大量代码来确定设备上可用的传输，并且传输尝试按顺序打开循环。RIM[`ConnectionFactory`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/io/transport/ConnectionFactory.html)在 5.0 OS 中引入，它提供标准机制来打开确定可用传输并打开连接（[示例](http://supportforums.blackberry.com/t5/Java-Development/Sample-Code-Using-the-ConnectionFactory-class-in-a-BrowserField/ta-p/532860)）。

**您始终必须使用`ConnectionFactory`要打开连接的位置。`Connector`如果您直接通过或通过到达远程主机并不重要`BrowserField`。你必须使用`ConnectionFactory`.**

戏剧性的是，即使您使用它也无法到达 BIS-B 传输。正如我之前提到的，它仅适用于联盟成员。RIM 目前不限制任何开发人员使用 BIS-B。但我没有看到他们也举了任何例子。要允许 ConnectionFactory 打开 BIS-B，您需要[下一行](https://stackoverflow.com/questions/11612942/blackberry-bis-option-secret-key-vs-mds-public)：

```
connFact.setTransportTypeOptions(TransportInfo.TRANSPORT_BIS_B,
        new BisBOptions("mds-public")); 
```

这只是黑莓上连接的一小部分摘要。但它应该为您提供解决问题的正确方向。

# python - 无法将摄氏度转换为华氏度

> ID：11770790
> 
> 赞同：-3
> 
> 时间：2012-08-02T03:48:42.123
> 
> 标签：python

这是我的代码：

```
# Note: Return a string of 2 decimal places.
def Cel2Fah(temp): 
    fah = float((temp*9/5)+32)
    fah_two = (%.2f) % fah
    fah_string = str(fah_two)
    return fah_string 
```

这是我应该得到的：

```
>>> Cel2Fah(28.0)
    '82.40'
>>> Cel2Fah(0.00)
    '32.00' 
```

但我收到一个错误：

```
Traceback (most recent call last):
File "Code", line 4
fah_two = (%.2f) % fah
^
SyntaxError: invalid syntax 
```

我不确定发生了什么...

由于某种原因，这似乎也不起作用：

```
# Note: Return a string of 2 decimal places.
def Cel2Fah(temp): 
    fah = temp*9/5+32
    fah_cut = str(fah).split()
    while len(fah_cut) > 4:
        fah_cut.pop()
    fah_shorter = fah_cut
    return fah_shorter 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T03:51:47.910

看起来你想要：

```
fah_two = "%.2f" % fah 
```

格式化操作符的结果`%`是字符串，所以不需要`fah_string`，因为`fah_two`已经是字符串了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:09:03.660

此外，我认为`temp * 9 / 5`应该是`temp * 9 / 5.0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T04:20:30.073

```
sucmac:~ ajung$ cat x.py 
def toF(cel):
    return '%.2f' % (cel * 1.8 +32)

print toF(0)
print toF(50)
print toF(100)

sucmac:~ ajung$ python x.py 
32.00
122.00
212.00 
```

# python - python搜索文件并使用正则表达式解析

> ID：11770793
> 
> 赞同：0
> 
> 时间：2012-08-02T03:49:05.073
> 
> 标签：python

我是 python 新手。我正在尝试编写一个快速而肮脏的python脚本来查找某些字符串日志文件并从该行中提取某些信息。日志文件中的行如下所示

```
2012-08-01 13:36:40,449 [PDispatcher: ] ERROR  Fatal error DEF_CON encountered. Shutting down
2012-08-01 14:17:10,749 [PDispatcher: ] INFO  Package 1900034442 Queued for clearance.
2012-08-01 14:23:06,998 [PDispatcher: ] ERROR Exception occurred attempting to lookup prod id 90000142 
```

我有一个函数，其中输入参数将是文件名和要查找的模式数组。目前我可以找到文件中包含一个或多个指定模式的所有行（尽管不确定它是否是最有效的方法）并且我能够提取行号和行。

```
def searchLogs(fn, searchPatterns):
    res = []
    with open(fn) as f:
        for lineNo, line in enumerate(f, 1):
            #check if pattern strings exist in line
            for sPattern in searchPatterns:
                if sPattern in line:
                    fountItem = [fn, pattern, lineNo, line]
                    res.append(fountItem)
    return res

searchLogs("c:\temp\app.log", ["ERROR", "DEF_CON"]) #this should return 3 elements based on the above log snipped (2 for the first line and 1 for the third line) 
```

我还想做的是在搜索时提取日期和时间。因此，我正在考虑将搜索模式修改为带有分组的正则表达式字符串，以搜索和提取日期。只有一个问题，我不确定如何在 python 中做到这一点......任何帮助将不胜感激。

***编辑（解决方案）***：在塞巴斯蒂安的帮助和乔尔提供的链接下，我想出了这个解决方案：

```
def search_logs(fn, searchPatterns):
    res = []
    with open(fn) as f:
        for lineNo, line in enumerate(f, 1):
            #check if pattern strings exist in line
            for sPattern in searchPatterns:
                #crude reg ex to match pattern and if matched, 'group' timestamp
                rex = r'^(.+) \[.*' + pattern 
                ms = re.match(rex, line)
                if ms:
                    time = ms.group(1)
                    item = Structs.MatchedItem(fn, pattern, lineNo, line, time)
                    res.append(item)
    return res

search_logs("c:\temp\app.log", ["ERROR", "DEF_CON"]) #this should return 3 elements based on the above log snipped (2 for the first line and 1 for the third line) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:05:35.437

有两个部分：

*   提取日期时间字符串
*   将其解析为日期时间对象

对于后者，您可以使用[`datetime.strptime()`函数](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)：

```
try:
    dt = datetime.strptime(line.split(" [", 1)[0], "%Y-%m-%d %H:%M:%S,%f")
except ValueError:
    dt = None 
```

前者取决于您的日志文件的规则性以及您希望解决方案的速度和健壮程度，例如，`line.split(" [", 1)[0]`速度快但脆弱。一个更强大的解决方案是：

```
' '.join(line.split(None, 2)[:2]) 
```

但它可能会更慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:57:06.073

这是您的正则表达式。我已经测试了正则表达式，但没有测试完整的代码

```
def searchLogs(fn, searchPatterns):
    res = []
    with open(fn) as f:
        for lineNo, line in enumerate(f, 1):
            #check if pattern strings exist in line
            for sPattern in searchPatterns:
                if sPattern in line:
                    date = re.search(r'(19|20)\d{2}-(0[1-9]|[12])-(0[1-9]|[12][0-9]|3[01])',line).group()
                    time = re.search(r'\b([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]),[0-9][0-9][0-9]',line).group()
                    fountItem = (fn, pattern, lineNo, date, time, line) # prefer a tuple over list
                    res.append(fountItem)
    return res 
```

**PS**：REs总是在错误的地方很痛苦。如果您需要解释，请告诉我。:)

# android - 如何在android中的广播发送者和接收者中设置权限

> ID：11770794
> 
> 赞同：36
> 
> 时间：2012-08-02T03:49:18.047
> 
> 标签：android, broadcastreceiver

我们如何在广播发送应用程序中指定哪个应用程序可以接收此广播，以及在接收应用程序中指定哪个特定应用程序有权向其广播接收器发送广播...

我是 android 新手..我阅读了互联网上的文档等，但找不到指定这些权限的语法。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-03-09T22:10:59.350

要控制谁能够接收广播消息，可以使用方法[sendBroadcast](http://developer.android.com/reference/android/content/Context.html#sendBroadcast%28android.content.Intent,%20java.lang.String%29)：

```
public abstract void sendBroadcast (Intent intent, String receiverPermission) 
```

您在其中准确填写所需权限的名称。如果接收者没有声明这个权限，它将无法得到消息。例如，广播发送者可以：

```
Intent broadcast = new Intent(this, MyBroadcastReceiver.class);
sendBroadcast(broadcast, "andro.jf.mypermission"); 
```

在广播发送者的清单中，应该声明一个新的权限：

```
<!--  Declaring the special permission -->
<permission android:name="andro.jf.mypermission" 
        android:label="my_permission" 
        android:protectionLevel="dangerous"></permission> 
```

然后，在应该接收此广播的应用程序中，您必须声明此权限并说您使用它。在清单中，您可以添加：

```
<!--  I use the permission ! -->
<uses-permission android:name="andro.jf.mypermission"/> 
```

当然，你必须声明你的广播接收器：

```
<receiver android:name="MyBroadcastReceiver" android:exported="true" /> 
```

您可以查看[这篇文章](https://stackoverflow.com/a/8817231/1156363)以获取自定义权限的完整示例以及关于此的[android 开发者页面](http://developer.android.com/guide/topics/security/permissions.html#declaring)。[请注意应用程序的安装顺序，因为应首先安装](https://stackoverflow.com/a/4426512/1156363)定义权限的应用程序。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-02-02T16:59:52.430

如果您想限制谁只能向您的广播接收器发送意图，请这样做：

广播**接收器**：

```
<manifest ...>

    <!-- Permission declaration -->
    <permission android:name="my.app.PERMISSION" />

    <receiver 
        android:name="my.app.BroadcastReceiver"
        android:permission="my.app.PERMISSION"> <!-- Permission enforcement for delivering intents to this receiver -->
        <intent-filter>
            <action android:name="my.app.Action" />
        </intent-filter>
    </receiver>

    ...
</manifest> 
```

广播**发送者**：

```
<manifest ...>
    <!-- We declare we own the permission to send broadcast to the above receiver -->
    <uses-permission android:name="my.app.PERMISSION" />

    ...
</manifest> 
```

**从发送方**Activity 向**接收**方发送广播：

```
Intent intent = new Intent();
intent.setAction("my.app.Action");
activity.sendBroadcast(intent); 
```

如果您像这样声明权限：

```
<permission android:protectionLevel="signature" android:name="my.app.PERMISSION" /> 
```

然后，只有当**发送者**和**接收者**应用程序都由同一个开发者证书签名时，**发送者**才能使用此权限并向接收者发送广播。

 ***** * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-03-06T09:27:05.007

## 声明许可

首先，您需要在您的`AndroidManifest.xml`

```
<permission android:name="YOUR_PERMISSION_STRING" android:protectionLevel="signature"/>
<uses-permission android:name="com.codylab.photogallery.PRIVATE"/> 
```

`the android:name`value 用作权限值，稍后将使用。

## 用法

与广播接收器相关的权限使用有两种：

(1) 控制哪个应用程序可以接收您的广播：

```
String PERMISSION_STRING_PRIVATE_RECEIVER = "YOU_NEED_THIS_TO_RECEIVE_THIS_BROADCAST"
sendBroadcast(intent, PERMISSION_STRING_PRIVATE_RECEIVER); 
```

通过这种用法，您可以控制只有授权的应用程序才能处理您发送的广播。

(2) 只处理具有指定权限的广播

```
String PERMISSION_STRING_PRIVATE_BROADCASTER = "ONLY HANDLE BROADCASTS WITH THIS PERMISSION"
IntentFilter filter = new IntentFilter(ACTION_SAMPLE);
registerReceiver(mReceiver, filter, PERMISSION_STRING_PRIVATE_BROADCASTER, null); 
```

通过这种用法，您可以确保广播者已获得授权。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-02T03:54:11.543

在清单的接收者标签中使用意图过滤器

```
 <receiver
    android:name="Your receiver"
    android:enabled="true"
    android:exported="false" >
    <intent-filter>
        <action android:name="action"/>
        <category android:name="category" />
    </intent-filter>
</receiver> 
```

向应用发送广播

```
 Intent intent = new Intent();
   intent.setAction("use same action in receiver");
   intent.addcategory("use same category in receiver");
   context.sendBroadcast(intent); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-28T03:16:21.537

经过半天的搜索和测试，根据@JFL的回答，我发现发送者应用程序必须同时添加`<permission>`标签和`<uses-permission>`标签，然后接收者才能接收到有权限的广播。否则，接收方应用程序将不会接收到广播。****

# numpy - 涉及倒置矩阵的稀疏矩阵乘法

> ID：11770795
> 
> 赞同：0
> 
> 时间：2012-08-02T03:49:21.930
> 
> 标签：numpy, sparse-matrix, matrix-multiplication

我有两个大的方形稀疏矩阵 A 和 B，需要计算以下内容：`A * B^-1`以最有效的方式。我有一种感觉，答案涉及使用`scipy.sparse`，但我一生都无法弄清楚。

经过广泛的搜索，我遇到了以下线程：[Efficient numpy / lapack routine for product of inverse and sparse matrix?](https://stackoverflow.com/questions/6766838/efficient-numpy-lapack-routine-for-product-of-inverse-and-sparse-matrix) 但无法弄清楚最有效的方法是什么。

有人建议使用 scipy 的稀疏模块中内置的 LU 分解，但是当我尝试对样本矩阵执行 LU 时，结果是奇异的（尽管当我只执行 * B^-1 时我得到了答案）。我也听说有人建议使用`linalg.spsolve()`，但我不知道如何实现它，因为它需要一个向量作为第二个参数。

如果有帮助，一旦我有了解决方案 st `A * B^-1 = C`，我只需要知道矩阵 C 的一行的值。矩阵大约为 1000x1000 到 1500x1500。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:20:33.467

实际上 1000x1000 矩阵并没有那么大。您可以在现代台式计算机上使用 numpy.linalg.inv(B) 在不到 1 秒的时间内计算出此类矩阵的逆矩阵。

但是，如果考虑到您只需要一行 C 的事实（实际上经常出现这种情况），您可以重写您的问题，从而提高效率。

让我们写 d_i = [0 0 0 ... 0 1 0 ... 0 ]，一个在第 i 个元素上只有一个的向量。如果 ^t 表示转置，您可以编写：

```
AB^-1 = C <=> A = CB <=> A^t = B^t C^t 
```

对于第 i 行：

```
A^t d_i = B^t C^t d_i <=> a_i = B^t c_i 
```

所以你有一个线性逆问题，可以使用 numpy.linalg.solve 来解决

```
ci = np.linalg.solve(B.T, a[i]) 
```

# iphone - Mobile CSS Won't Display

> ID：11770798
> 
> 赞同：1
> 
> 时间：2012-08-02T03:49:41.353
> 
> 标签：iphone, css, mobile

I'm trying to teach myself how to make a mobile version of a website, so I started off with something basic.

I have the following code

```
<body> 
You are using...
<p class="mobile">
Mobile
</p>

<p class="desktop">
Desktop
</p> 
</body> 
```

with the CSS

```
@media screen and (max-width: 480px)  
{    
     p.desktop {
         display:none;
     }
}

    p.mobile {
        display:none;
    } 
```

Basically, I want either "mobile" or "desktop" to display depending on which device you're using. When I navigate to the site on my desktop it says "desktop", so that seems fine. But when I do so on my iPhone it still says desktop.

I have tried increasing the max-width to 640px which is the iPhone 4S' resolution. But I still have no luck. What am I doing wrong?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T03:57:27.560

The default viewport on an iOS device is somewhere around 1000 pixels. You may notice when you pull up your test page that it doesn't look like it's a 320px wide - it's way zoomed out.

You need a viewport `meta` tag in your page `head` that sets the viewport width to that of the device:

```
<meta name="viewport" content="width=device-width"> 
```

Once in place, you'll find your @media query works nicely (although you need a `p.mobile { display: block; }` bit to make the "mobile" text show up).

# objective-c - 在目标 C 中使用 [release]

> ID：11770804
> 
> 赞同：0
> 
> 时间：2012-08-02T03:50:35.417
> 
> 标签：objective-c, memory-management

我对 Objective-C 中的内存管理有疑问。

```
-(void)viewDidLoad
{
NSNumber *num=[[NSNumber alloc] initWithInt:10];
[num release];
NSLog(@”%i”,num);
} 
```

通过打印值，上面的代码可以正常工作。但是一旦对象被释放，它就失去了它的价值，对吧？那它怎么能正常工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:25:50.353

这是正在发生的事情。首先你这样做：

```
NSNumber *num=[[NSNumber alloc] initWithInt:10]; 
```

您的`num`变量现在包含一个指向`NSNumber`对象的指针，并且（因为您使用了`alloc`）您*拥有*该对象。然后你这样做：

```
[num release]; 
```

当您发送`release`到该对象时，您放弃了对它的所有权。该对象可能仍然存在并且未更改，或者它可能已被销毁。你不知道。您的`num`变量仍然包含相同的指针，但它指向的内存现在可能不是有效对象，因此您无法安全地向该对象发送消息。

然后你这样做：

```
NSLog(@”%i”,num); 
```

在此`NSLog`语句中，您将`num`其视为*整数*，**而不是**指针，因为`%i`格式化整数。您只是在打印`NSNumber`对象所在的地址（内存位置）（并且可能仍然存在 - 您不知道）。因此，是否`num`指向有效对象并不重要；您只是将`num`其视为任意整数。您没有尝试向`NSNumber`对象发送任何消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T04:10:14.080

1.  通过在对象上调用 [release]，我们可以减少对象的保留计数。
2.  如果对象是通过调用其中包含 copy、new、alloc 的方法创建的，则调用者被称为该对象的所有者，并且所有者应始终释放拥有的对象。
3.  如果您不拥有该对象，则不应释放它。
4.  保留对象时始终调用对象的释放，这意味着如果调用保留方法，则应调用相应的释放调用。应匹配保留释放。

# cuda - 如何在推力函数中推进迭代器

> ID：11770805
> 
> 赞同：0
> 
> 时间：2012-08-02T03:50:35.620
> 
> 标签：cuda, thrust, system-error

我正在研究推力。但我不明白如何获取迭代器指向的值。

示例代码如下：

```
#include <thrust/for_each.h>
#include <thrust/device_vector.h>
#include <iostream>
#include <vector>
using namespace std;

class ADD
{
private:
    typedef typename thrust::device_vector<int>::iterator PTR;
public:
    ADD(){}
    ~ADD(){}
    void setPtr(PTR &ptr)
    {this->ptr=ptr;}
    __host__ __device__
    void operator()(int &x)
    {
            // note that using printf in a __device__ function requires
            // code compiled for a GPU with compute capability 2.0 or
            // higher (nvcc --arch=sm_20)
            x+=add();
    }
    __host__ __device__
    int add()
    {return *ptr++;}
private:
    PTR ptr;
};
int main()
{
    thrust::device_vector<int> d_vec(3);
    d_vec[0] = 0; d_vec[1] = 1; d_vec[2] = 2;
    thrust::device_vector<int>::iterator itr=d_vec.begin();
    ADD *addtest=new ADD();
    addtest->setPtr(itr);
    thrust::for_each(d_vec.begin(), d_vec.end(), *addtest);
    for(int i=0;i<3;i++)
            cout<<d_vec[i]<<endl;
    return 0;
} 
```

当我使用 nvcc -arch=sm_20 test.cu 编译它时，我收到以下警告：

```
test.cu(28): warning: calling a host function("thrust::experimental::iterator_facade<thrust::detail::normal_iterator<thrust::device_ptr<int> > , thrust::device_ptr<int> , int, thrust::detail::cuda_device_space_tag, thrust::random_access_traversal_tag, thrust::device_reference<int> , long> ::operator *") from a __device__/__global__ function("printf_functor::add") is not allowed

test.cu(28): warning: calling a host function("thrust::experimental::iterator_facade<thrust::detail::normal_iterator<thrust::device_ptr<int> > , thrust::device_ptr<int> , int, thrust::detail::cuda_device_space_tag, thrust::random_access_traversal_tag, thrust::device_reference<int> , long> ::operator *") from a __device__/__global__ function("printf_functor::add") is not allowed 
```

我无法编译它。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:42:34.280

@Gang.Wang：我认为您只是混淆了 2 个不同的东西：所有类似 STL 的功能，包括 for_each、device_vector 迭代器等，都只是一个仅存在于主机上的“外观”。

而 operator() 包含编译到 CUDA 内核并并行应用于向量的每个元素的实际 GPU 代码。因此，您的仿函数无法访问 device_vector::iterators。

# retina-display - 为什么 icon composer 2.4 不再支持 1024x1024 大小的图标了？

> ID：11770806
> 
> 赞同：5
> 
> 时间：2012-08-02T03:50:42.487
> 
> 标签：retina-display, xcode4.4, hig, icon-composer

Xcode 4.3.3中的icon composer 2.2支持1024x1024的icns。但是，对于 icon composer 2.4，它不再支持。这很讽刺，因为苹果推送retina display mbp，并要求新提交的应用程序使用1024x1024图标，但图标编写器不再支持它。

Apple 是否有任何替代或新推出的解决方案来创建大小为 1024x1024 的图标？我真的不明白苹果为什么要这样做。

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-03T03:11:08.773

Icon Composer 2.4 不再支持 1024x1024 大小的图标，因为为 Mac 或 iOS 应用程序创建应用程序图标的工作流程发生了变化。

请参阅[OS X 高分辨率指南的](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Introduction/Introduction.html)[提供所有应用程序图形资源的高分辨率版本](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html#//apple_ref/doc/uid/TP40012302-CH7-SW3)部分。

新的工作流程如下：

1.  创建一个扩展名为 .iconset 的文件夹（例如 MyApp.iconset）
2.  放置具有每个文件大小的 .png 文件：

    icon_16x16.png
    icon_16x16@2x.png
    icon_32x32.png
    icon_32x32@2x.png
    icon_128x128.png
    icon_128x128@2x.png
    icon_256x256.png
    icon_256x256@2x.png
    icon_512x512.png
    icon_512x512@2x.png

3.  将此 .iconset 目录结构转换为 .icns 文件。有两种选择：
    *   将新的 .iconset 文件夹拖放到 Xcode 项目中，并将其用作应用程序图标。
    *   在终端中使用`iconutil -c icns -o myicon.icns myicon.iconset`（无需安装 XCode）。

完成此操作后，每次构建 Xcode 时都会将 .iconset 文件夹编译为 .icns 文件并在应用程序包中使用它。这具有将您的应用程序图标视为派生 .icns 文件的一组“源图像”的明显优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T22:05:28.190

最新版本的 Xcode 不再需要这个（我使用的是 Xcode 5.1）。只需单击文件列表左上角的项目，然后选择常规选项卡。图标资产有一个部分，单击“使用资产目录”，您的项目将更新为自动为您构建图标文件。

![在此处输入图像描述](../Images/a4cf1328f0f5d4915d93654eedc4e98f.png)

然后只需单击资产目录旁边的箭头，它将打开一个屏幕，显示每个所需的图标大小以及@1x 和@2x 密度的斑点。

![在此处输入图像描述](../Images/53ab1bd2b429dd2bbdd66917c25de0d0.png)

# java - spring-roo 生成骨架应用程序是如何工作的？

> ID：11770816
> 
> 赞同：0
> 
> 时间：2012-08-02T03:51:49.543
> 
> 标签：java, spring, spring-roo

我很好奇 spring-roo 生成的应用程序是如何工作的，我有一些问题：

1.  servlet 在哪里？
2.  将域对象链接到 GUI 的代码在哪里？
3.  实例化spring POJO的代码在哪里？
4.  数据持久化代码在哪里？
5.  为什么域类（bean）没有在spring配置文件中声明？

谁能帮我理解骨架项目的结构？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:34:12.987

spring roo 参考文档的[架构](http://static.springsource.org/spring-roo/reference/html/architecture.html)部分包含可以回答您大部分问题的信息。如果你对spring、jpa和aop有一定的了解，会更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:25:57.743

这是我经过一番研究后的答案，我不确定它是否正确。非常感谢任何评论或更正。

> 1.servlet在哪里？

Roo 生成的项目使用 spring mvc 作为表示层，Spring 将搜索所有带有“@controller”注释的类作为控制器类。

> 2\. 将域对象链接到 GUI 的代码在哪里？

域对象是用“@Entity”注释的类，roo 还添加了“@RooJpaActiveRecord”来表示 DAO 功能。

> 3.实例化spring POJO的代码在哪里？

所有域对象都通过数据库查询实例化，该查询位于 *_Roo_Jpa_ActiveRecord.aj 中。

> 4.数据持久化代码在哪里？

在 Q2 中回答。

> 5.为什么spring配置文件中没有声明domain class(bean)？

Spring通过注解“@Entity”自动检测域对象

# c# - 如何在 C# 中将字符串数组转换为类型

> ID：11770820
> 
> 赞同：3
> 
> 时间：2012-08-02T03:52:49.687
> 
> 标签：c#, asp.net, devexpress

我正在使用 ASPxGridView PerformCallback 方法将 javascript 值传递给后面的代码，它可以工作。但我需要转换或转换类型的字符串数组并绑定到 ASPxGridView。我该怎么做？

```
 protected void detailGrid_CustomCallback(object sender, ASPxGridViewCustomCallbackEventArgs e)
    {
        Group [] data = (Group)e.Parameters.Split(';');

        List<Group> l = new List<Group>();
        for (int i = 0; i < data.Length; i++)
        {
            l.Add(data[i]);
        }

        XFGridView1.DataSource = data;
        XFGridView1.DataBind();

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T04:26:32.270

LINQ 适用于“转换”或“选择”：

```
IEnumerable<Group> data = e.Parameters.Split(';').Select(p=>new Group(p));  
//or
IEnumerable<Group> data = e.Parameters.Split(';').Select(p=>new Group{SomeProperty=p}); 
```

假设您的 Group 类有一个构造函数，该构造函数分别采用您希望填充的字符串值或某些属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T04:07:55.733

您可以使用[Array.ConvertAll](http://msdn.microsoft.com/en-us/library/exc45z53.aspx)

假设你的`Group`类是这样的：

```
class Group
{
    public string MyProperty { get; set; }
} 
```

那么你可以这样做：

```
string parameters = "abc,def,hij,klm,nop";
string[] myArray = parameters.Split(',');
Group[] groupArray  = Array.ConvertAll<string, Group>(myArray, delegate(string str)
             {
                 return  new Group { MyProperty = str };

             }); 
```

上面的代码将字符串`parameters`拆分为字符（`'`），然后`Group`使用 Array.ConvertAll 将字符串数组转换为数组，`Group`该类有一个属性，该属性`MyProperty`将用字符串元素填充。

# c# - 使用 c# 和 Interop 保存为 PDF 不将嵌入的 pdf 保存在 word 文档中

> ID：11770821
> 
> 赞同：5
> 
> 时间：2012-08-02T03:52:52.897
> 
> 标签：c#, pdf, ms-word, office-interop

**背景**：我正在尝试使用 c# 和 Interop 生成一个 word 文档。我成功地插入了表格、页眉、页脚、图表……大部分工作正常。作为下一步，我希望将其转换为 pdf。

**流程调整：**由于我使用的是 word 2011 和 word 2007（安装 saveaspdf 插件后），我使用“另存为”将文档保存为 pdf，然后文件类型为 pdf。

**提出的问题**：我已使用以下代码成功地将 pdf 嵌入到我的文档中。

```
 Object oIconLabel = new FileInfo(file_path).Name;
        Object oFileDesignInfo = file_path;
        Object oClassType = "AcroExch.Document.7";
        Object oTrue = true;
        Object oFalse = false;
        Object oMissing = System.Reflection.Missing.Value;
        Object index = 0;
        Range r = d.Bookmarks.get_Item(ref eod).Range;

        r.InlineShapes.AddOLEObject(
            ref oClassType, ref oFileDesignInfo, ref oFalse, ref oTrue, ref oMissing,
            ref index, ref oIconLabel, ref oMissing); 
```

这里 d 是 Document 对象。现在，当我尝试将此 word 文档另存为 pdf 时，使用

```
 d.SaveAs(ref filename, ref filetype, ref oMissing, ref oMissing, ref oMissing, 
ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, 
ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing); 
```

pdf正在生成。但是我嵌入的文档没有嵌入到生成的 pdf 中。而是只显示一个图标。

如何将文档嵌入到 pdf 中？我们通常如何处理这种情况。如果问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T19:39:14.413

这是我选择的错误 API。它不应该是另存为。它是 ExportAsFixedFormat。

文档在[这里](http://msdn.microsoft.com/en-us/library/office/bb256835(v=office.12).aspx)

样品用法可以

```
d.ExportAsFixedFormat(filename.ToString(), WdExportFormat.wdExportFormatPDF,false,WdExportOptimizeFor.wdExportOptimizeForOnScreen,
                    WdExportRange.wdExportAllDocument,1,1,WdExportItem.wdExportDocumentContent,true,true,
                    WdExportCreateBookmarks.wdExportCreateHeadingBookmarks,true,true,false,ref oMissing); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-23T13:04:53.363

这段代码对我来说适用于 word 文档中的文本、表格、图形和图像。
需要在服务器中安装 Word。
我正在使用 Word 2013 并且没问题。

```
Microsoft.Office.Interop.Word.Application wordApplication = new Microsoft.Office.Interop.Word.Application();

                    object oMissing = System.Reflection.Missing.Value;
                    Object oFalse = false;
                    Object filename = (Object)path;

                    Microsoft.Office.Interop.Word.Document doc = wordApplication.Documents.Open(ref filename, ref oMissing,
                        ref oFalse, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                        ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                        ref oMissing, ref oMissing, ref oMissing, ref oMissing);

                    doc.Activate();

                    var pathfilename = Path.Combine(Server.MapPath("~/UploadDocuments/PDF"), fileName).Replace(".docx", ".pdf"); ;
                    Object filename2 = (Object)pathfilename;

                    doc.SaveAs(ref filename2, WdSaveFormat.wdFormatPDF,
                        ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                        ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                        ref oMissing, ref oMissing, ref oMissing, ref oMissing);

                    // close word doc and word app.
                    object saveChanges = WdSaveOptions.wdDoNotSaveChanges;

                    ((_Document)doc).Close(ref saveChanges, ref oMissing, ref oMissing);

                    ((_Application)wordApplication).Quit(ref oMissing, ref oMissing, ref oMissing);

                    wordApplication = null;
                    doc = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:18:37.440

在此处查找函数 SaveAs 的所有参数的含义：

[http://msdn.microsoft.com/en-us/library/office/bb256835(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb256835(v=office.12).aspx)

使用 UseISO19005_1 = True 嵌入字体子集

# css - `:hover` 和 `mouseenter` 事件在 IE7 中未设置`background-color` 时失败

> ID：11770822
> 
> 赞同：1
> 
> 时间：2012-08-02T03:52:54.160
> 
> 标签：css, internet-explorer, hover

相关的样式规则如下所示：

```
 .name {
        display: inline-block;
        *display: inline;
        zoom: 1;
        width: 220px;
        text-indent: 24px;
        *margin-left: -24px;
        background: rgba(198, 211, 205, 0.5);   
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#50c6d3cd,endColorstr=#50c6d3cd);
        &:hover {
            background: rgba(150, 171, 165, 0.5);
            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#5096aba5,endColorstr=#5096aba5);
        }   
    } 
```

`.name`是一个`anchor`元素。

当我将鼠标放在 a 上时`.name`，`:hover`规则仅在光标位于边框上时适用，但当光标进入元素内部时不会发生任何事情。

但是当我`background-color: red`为元素设置 a 时，它又`:hover`变得可用了。

这里可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T11:52:01.210

也使用`background-image: url("about:blank");`

这应该可以解决问题

# audio - SDL 音频流回调函数从未触发

> ID：11770825
> 
> 赞同：1
> 
> 时间：2012-08-02T03:53:28.513
> 
> 标签：audio, mingw, sdl

我正在尝试通过 mingw32 环境为使用 SDL 的 C++ 应用程序流式传输音频。据我了解，这是一件相当简单的事情：

```
extern "C" void audioStep(void* unused, Uint8* stream, int len);

void initAudio()
{
    SDL_AudioSpec* fmt;
    fmt = (SDL_AudioSpec*)malloc(sizeof(SDL_AudioSpec));
    fmt->freq = 22050;
    fmt->format = AUDIO_S16;
    fmt->channels = 1;
    fmt->samples = 8192;
    fmt->callback = audioStep;
    fmt->userdata = NULL;
    SDL_AudioSpec obFmt;

    if (SDL_OpenAudio(fmt, &obFmt) < 0)
    {
        fprintf(stderr, "Unable to open audio: %s\n", SDL_GetError());
        getchar();
        exit(1);
    }

    SDL_PauseAudio(0);
}

.
.
.

extern "C" void audioStep(void* unused, Uint8* stream, int len)
{
    // Do stuff.
} 
```

我遇到的问题是`audioStep`似乎从来没有被调用过。在`initAudio`运行之前`SDL_Init`使用`SDL_INIT_EVERYTHING`. 然后完全初始化图形（`SDL_SetVideoMode`等等），然后使用上面的代码初始化音频系统。

有没有可能我在没有音频支持的情况下编译了 SDL？（有没有办法检查音频是否启用或者它是否使用某种空音频设备？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:57:48.180

我在 SDL.NET 中有工作代码，所以也许这会有所帮助。我发现我必须打开一个视频窗口：

```
 SdlDotNet.Graphics.Video.SetVideoMode(1, 1);
  SdlDotNet.Audio.Mixer.OpenAudio(stream);
  // BUG: close (or hide) it
  SdlDotNet.Graphics.Video.Close(); 
```

否则，它将无法正确初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:38:16.127

如果您从不播放声音，为什么应该调用 @audioStep@？没什么可做的。

[使用 SDL 声音](http://www.libsdl.org/intro.en/usingsound.html)

# php - 如果语句返回 true 而它应该是 false .. 我认为

> ID：11770826
> 
> 赞同：0
> 
> 时间：2012-08-02T03:53:46.400
> 
> 标签：php, mysql

好吧，我遇到了一个非常奇怪的问题。我试图从 WoW 军械库中导入数据，并在此过程中将此信息添加到我自己的数据库中名为 user 的表下。

现在我在添加新成员的同时检查当前成员的所有信息是否仍然正确使用（请记住，修复所有 sql 注入问题是我在此之后要做的事情）：

```
@$json = file_get_contents("http://$region.battle.net/api/wow/guild/$realm/$guild?fields=members,achievements");
if($json == false)
{
throw new Exception("Failed To load infomation. check setup options");
} 
$decode = json_decode($json, true);

foreach($decode['members'] as $p) {
    $mrank = $p['rank'];
    $mname = $p['character']['name'];
    $mclass = $p['character']['class'];
    $mrace = $p['character']['race'];
    $mlevel = $p['character']['level'];
    $mgender = $p['character']['gender'];

    $check = mysql_query("SELECT * FROM user WHERE charactername='$mname'");
    if($check == false)
    { 
        die("Sql query failed"); 
    }
    if(mysql_num_rows($check) != 0)
    {
        if($mlevel !== $check['level'])
        {
            mysql_query("UPDATE user SET level='$mlevel' WHERE charactername='$mname'");
            $uCount = $uCount + 1; 
            echo "level $mname<br />"; 
        }
        if($mclass !== $check['class'])
        {
            mysql_query("UPDATE user SET class='$mclass' WHERE charactername='$mname'");
            $uCount = $uCount + 1; 
            echo "class $mname<br />"; 
        }
        if($mrace !== $check['race'])
        {
            mysql_query("UPDATE user SET race='$mrace' WHERE charactername='$mname'");
            $uCount = $uCount + 1; 
            echo "race $mname<br />"; 
        }
        if($mgender !== $check['gender'])
        {
            mysql_query("UPDATE user SET gender='$mgender' WHERE charactername='$mname'");
            $uCount = $uCount + 1; 
            echo "gender $mname<br />"; 
        }
        if($mrank !== $check['rank'])
        {
            mysql_query("UPDATE user SET rank='$mrank' WHERE charactername='$mname'");
            $uCount = $uCount + 1; 
            echo "rank $mname<br />"; 
        }
    $pCount = $pCount + 1;

    }   
    else
    {
    //add new user otherwise
        $sql="INSERT INTO user (charactername, class, race, level, gender, rank) VALUES ('$mname','$mclass','$mrace','$mlevel','$mgender','$mrank')";
        $nCount = $nCount + 1;
        if (!mysql_query($sql,$con))
            {
            die('Error: ' . mysql_error());
            }
    }
}
    echo "$nCount new members added.<br />";
    echo "$pCount member(s) already existed.<br />";
    echo "$uCount member(s) got updated <br />"; 
```

但现在是问题，使用此代码更新部分，所以所有：

```
if($mlevel !== $check['level'])
        {
            mysql_query("UPDATE user SET level='$mlevel' WHERE charactername='$mname'");
            $uCount = $uCount + 1; 
            echo "level $mname<br />"; 
        } 
```

无论如何都要运行，我不明白为什么。我比较了数据，并且在回显时两者都相等。因此，据我所知，使用 !== 应该只有在它们不相同时才会触发。在目前的情况下，我的更新脚本运行了 800 次。并且这也从字面上更新了用户表中的所有数据 800 次。据我所知，这不是必需的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:03:26.610

您应该尝试 != `if($mlevel != $check['level'])`as !== 检查它们是否是相同的确切值和数据类型，并且由于您检索的两个不同，php 可能已经为每个分配了不同的数据类型

或者您可以同时转换 $a =(int)$mlevel 和 $b = (int)$check['level'] 然后执行 !==

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:25:32.610

虽然这可能不是最好的方法，但在通过@MatthewBlancarte 发现查询得到 Null 后，我决定修改代码：

```
foreach($decode['members'] as $p) {
$mrank = $p['rank'];
$mname = $p['character']['name'];
$mclass = $p['character']['class'];
$mrace = $p['character']['race'];
$mlevel = $p['character']['level'];
$mgender = $p['character']['gender'];

$check = mysql_query("SELECT * FROM user WHERE charactername='$mname'");

while($row = mysql_fetch_array($check)){
    $prank = $row['rank'];
    $pname = $row['charactername'];
    $pclass = $row['class'];
    $prace = $row['race'];
    $plevel = $row['level'];
    $pgender = $row['gender'];
}

if($check == false)
{ 
    die("Sql query failed"); 
}

if(mysql_num_rows($check) != 0)
{   
    if($mlevel != $plevel)
    {
        mysql_query("UPDATE user SET level='$mlevel' WHERE charactername='$mname'");
        $uCount = $uCount + 1; 
        //echo "level $mname<br />"; 
    } 
```

使用 mysql_fetch_array 添加额外的查询 while 循环：

```
while($row = mysql_fetch_array($check)){
    $prank = $row['rank'];
    $pname = $row['charactername'];
    $pclass = $row['class'];
    $prace = $row['race'];
    $plevel = $row['level'];
    $pgender = $row['gender']; 
```

是什么修复了它，将它与这些变量进行比较是有效的。谢谢大家的帮助。在更多人评论之前是的.. 我会修复 sql 注入.. >.>

# java - 多类的 onLongClick 自定义按钮

> ID：11770834
> 
> 赞同：0
> 
> 时间：2012-08-02T03:54:11.117
> 
> 标签：java, android, custom-controls, onlongclicklistener

这是我的代码

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.widget.Button;

public class MyLongPressCustomButton extends Button{

    private InStock instock;

    public MyLongPressCustomButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public MyLongPressCustomButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MyLongPressCustomButton(Context context) {
        super(context);
    }

    public void setSampleLongpress(InStock sl) {
        instock = sl;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        cancelLongpressIfRequired(event);
        return super.onTouchEvent(event);
    }

    @Override
    public boolean onTrackballEvent(MotionEvent event) {
        cancelLongpressIfRequired(event);
        return super.onTrackballEvent(event);
    }

    @Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_DPAD_CENTER)
                || (keyCode == KeyEvent.KEYCODE_ENTER)) {
            cancelLongpress();
        }
        return super.onKeyUp(keyCode, event);
    }

    private void cancelLongpressIfRequired(MotionEvent event) {
        if ((event.getAction() == MotionEvent.ACTION_CANCEL)
                || (event.getAction() == MotionEvent.ACTION_UP)) {
            cancelLongpress();
        }
    }

    private void cancelLongpress() {        
        if (instock != null) {
            instock.cancelLongPress();
        }
    }    
} 
```

我需要用于多类，现在它只用于 InStock 类，如何更改我的多类代码？当我将 InStock 更改为 Activity 时，cancelLongpress() 方法未定义。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:16:46.773

在这种情况下，您应该使用[委托模式。](http://en.wikipedia.org/wiki/Delegation_pattern)

```
 public interface MyDelegate{
      void cancelLongPress();
  } 
```

然后将此委托用于您的自定义按钮

```
 public class MyLongPressCustomButton extends Button{
      MyDelegate delegate;

      public MyLongPressCustomButton (MyDelegate delegate){
          this.delegate = delegate;
      }

      private void cancelLongpress() {        
        if (null  != delegate) {
            delegate.cancelLongPress();
        }
     }              
 } 
```

如果您想将其用于许多类，只需实现此接口即可。例如

```
 public class YourActivity extend Activity implements MyDelegate{
      @override  
      void oncreate(){
           //create new button with a delegate
        MyLongPressCustomButton btn = new  MyLongPressCustomButton(this);
         //do something
      }

      //real work is here
      @override  
      public void cancelLongPress(){

      }
  } 
```

# php - Phonegap (Cordova) jQuery Ajax 登录

> ID：11770836
> 
> 赞同：0
> 
> 时间：2012-08-02T03:54:42.460
> 
> 标签：php, jquery, mysql, cordova

好的，所以我正在使用 jQuery 和 Cordova 尝试登录到 mySQL 数据库。遇到一些问题，也许有人可以帮助我。

```
 <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery.mobile-1.1.1.js"></script>
    <script type="text/javascript" charset="utf-8">
        function login() {
            $(document).ready(function() {
                              var user = $("#user")[0].value;
                              var pass = $("#pass")[0].value;
                              $.ajax({
                                     type: "GET",
                                     url: "http://www.greekhighlight.com/mob_login.php",
                                     data: "users"+user+"&pass="+pass,
                                     success: function(result){
                                     if (value){
                                     $("#message")[0].value = "Success "+result;
                                     } else {
                                     $("#message")[0].value = "error";
                                     }
                                     });

        }
                              };
        </script> 
```

这是我在 head 标签中的 javascript。

```
 <form>
        Username: <input type="text" size="25" id="user" onkeyup= "login()" />
        <br />
        Password: <input type="text" size="25" id="pass" onkeyup= "login()"/>
        <br />
        <input type="text" size="25" id="message" value="error" />
        </form> 
```

这是我的 HTML 表单。

```
<?php
$user = $_REQUEST['user'];
$pass = $_REQUEST['pass'];
include('php/connect.php');

$result = mysql_query("SELECT email, password, userid FROM users WHERE email = '$user'");
while($row = mysql_fetch_array($result)){
if(md5($pass) == $row["password"]){
    echo $row["userid"];
} else {
    echo "";
}
} 
?> 
```

这是我的 PHP 文件。

这是我第一次使用 Phonegap 等，所以我希望这不是我忽略的东西。我的连接文件是正确的。我遵循的教程取得了成功，所以我不确定为什么我的教程没有。

如果有人可以在正确的方向上推动我，我希望我能弄清楚。

提前致谢。

**更新：**决定使用 Aurigma Up 和网站的移动版本，因为这个项目才刚刚开始阶段。希望在某个时候回到这个问题并使其正常工作。再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:29:38.953

试试这个我也会确保你在你的 php 端使用一些保护来防止查询注入

html

```
 <form>
    Username: <input type="text" size="25" id="user" onkeyup= "login()" />
    <br />
    Password: <input type="text" size="25" id="pass" onkeyup= "login()"/>
    <br />
    <input type="text" size="25" id="message" value="error" />
    <input type="button" value="Submit" onclick="login()"/>
    </form> 
```

javascript

```
function login() {
            $(document).ready(function() {
           var user = $("#user").val();
           var pass = $("#pass").val();
     $.ajax({
            url: "http://www.greekhighlight.com/mob_login.php",  
            type: "GET",        
            data: { username: user, password: pass }     
            cache: false,
            success: function (html) {  
                alert(html);      
            }   
          });
       });
} 
```

和你的 php

```
 <?php
    $user = $_GET['username'];
    $pass = $_GET['paswords'];
    include('php/connect.php');

    $result = mysql_query("SELECT email, password, userid FROM users WHERE email = '$user'");
    while($row = mysql_fetch_array($result)){
    if(md5($pass) == $row["password"]){
        echo $row["userid"];
    } else {
        echo "";
    }
    } 
    ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T04:24:24.677

您的代码有几个问题：

1.  您可能应该使用`POST`此请求，并且我假设您想`result`在成功函数检查中使用该值（也许考虑返回带有 的 JSON obj `status`）。
2.  你`ajax.data`应该更沿着这条线`{"user":user,"pass":pass}`
3.  您的 php 代码不安全，应使用准备好的语句。
4.  如今，将密码存储为`md5(password)`一个大**禁忌**，请对更好/安全的哈希函数进行一些研究。
5.  您的登录事件是`onkeyup`

**一些示例可以为您指明正确的方向**

HTML：

```
 ...
 <input type="text" size="25" id="pass"/>
 ...
 <input type="button" id="#login_button" value="Login">
 ... 
```

JS：

```
 $(document).ready(function() {
     $('#login_button').click(function() {
         // ... ajax request here ...
     });
 }); 
```

PHP：

```
$stmt = $con->prepare('SELECT email, password, userid, salt FROM users WHERE email = ?');
$stmt->bind_param($email);
$stmt->bind_result($hash,$salt);
$stmt->execute();
if ($stmt->fetch_result()) {
     if (hash('sha512',$password.$salt)==$hash) {
         // ... OK ...
     }
} 
```

祝你好运。

注释： [PHP 准备好的语句参考](http://php.net/manual/en/mysqli.prepare.php)，Google “secure password storage with salt”，在[jsfiddle.net上玩](http://jsfiddle.net)

# php - Joomla 2.5 在 config.xml 中获取组件配置总是返回 null

> ID：11770837
> 
> 赞同：1
> 
> 时间：2012-08-02T03:54:53.480
> 
> 标签：php, joomla

请在这件事上给予我帮助

我正在创建一个组件。我的组件中有一个 config.xml 我在 userCheck.php 中编写了我的自定义 JFormFieldUserCheck 我想从 config.xml 加载参数或字段

我用了

```
$param = JComponentHelper::getParams('com_my-component');
var_dump($param); 
```

结果是

```
object(stdClass)#214 (0) { } 
```

但是当我将 com_my-component 更改为 com_content （Joomla 默认组件）时。然后 var_dump，结果很好。

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T12:46:20.060

**我添加了博客条目的摘录：**

插件内部的插件参数

```
$param = $this->params->get('paramName', 'defaultValue'); 
```

插件外部的插件参数

```
$plugin = &JPluginHelper::getPlugin('exampleType', 'example');
$pluginParams = new JParameter($plugin->params);
$param = $pluginParams->get('paramName', 'defaultValue'); 
```

来自模块内部的模块参数

```
$param = $params->get('paramName', 'defaultValue'); 
```

来自模块外部的模块参数

```
$module = &JModuleHelper::getModule('example');
$moduleParams = new JParameter($module->params);
$param = $moduleParams->get('paramName', 'defaultValue'); 
```

来自组件内部的组件参数

```
$componentParams = &JComponentHelper::getParams('com_example');
$param = $componentParams->get('paramName', 'defaultValue'); 
```

来自组件外部的组件参数

```
$componentParams = &JComponentHelper::getParams('com_example');
$param = $componentParams->get('paramName', 'defaultValue'); 
```

模板内部的模板参数

```
$param = $this->params->get('paramName'); 
```

来自模板外部的模板参数

```
jimport('joomla.filesystem.file');
$mainframe = &JFactory::getApplication();
$params = $mainframe->getParams(JFile::read(JURI::root() .'/templates/template_name/params.ini'));
$param = $params->get('paramName', 'defaultValue'); 
```

来自 Joomla 框架之外的包含文件的模板参数

```
// Get params.ini relative to the current file location (use your own relative path here)
$paramsFile = dirname(__FILE__) . '/../../params.ini';

// Only continue if the file exists
if(file_exists($paramsFile)) {
// Get contents from params.ini file
$iniString = file_get_contents($paramsFile);

// Escape double quotes in values and then double-quote all values (because Joomla doesn't do that for us..)
$iniQuoted = preg_replace('/=(.*)\\n/', "=\"$1\"\n", addcslashes($iniString, '"'));

// Parse the ini string to an associative array
$iniParsed = parse_ini_string($iniQuoted);
} else {
$iniParsed = '';
}

// Set params to obtained values or empty array
$params = (!empty($iniParsed)) ? $iniParsed : array();

// Get param value from array
$param = $params['paramName']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:31:42.533

显然，Joomla 不了解您的组件。确保它在 Joomla 中正确安装，并且组件的 xml 文件准确且格式正确。如果 Joomla 确实找到了您的组件，或者无法加载 XML，那么您的 PHP 将无法使用这些参数。这些步骤是使用数据库中的有效条目和 XML 完成的，这两者通常都是通过组件安装完成的，但只要您全部正确，就可以手动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T10:09:56.307

有同样的问题。结果是空的，直到我转到组件的配置并保存它（尽管在文本字段中打印了默认值）。

# upload - 在 vaadin 中从 OutputStream 创建 ExternalResource

> ID：11770838
> 
> 赞同：2
> 
> 时间：2012-08-02T03:54:54.587
> 
> 标签：upload, vaadin, cropfield

是否可以从 vaadin 中的 OutputStream 对象创建一个 ExternalResource 对象？我想要的是允许用户裁剪通过上传组件上传的图像，但不将其保存在服务器端。只有当他确认裁剪区域时，我才会保存它。

问题是 Upload 的 receiveUpload 方法返回 OutputStream ，我不知道如何从中获取 ExternalResource 对象以将其传递给 CropField(addon) 构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:41:52.213

回答我自己的问题：可以创建一个非常适合 CropField 构造函数的 StreamResource 实例。

```
StreamSource streamSource = new StreamResource.StreamSource() {

            @Override
            public InputStream getStream() {
                return new ByteArrayInputStream(bos.toByteArray());
            }
        };
        final StreamResource streamRes = new StreamResource(streamSource, UUID.randomUUID().toString(), getApplication()); 
```

# ruby-on-rails - 控制器动作的观察者

> ID：11770848
> 
> 赞同：0
> 
> 时间：2012-08-02T03:56:29.173
> 
> 标签：ruby-on-rails

我想记录一些动作，比如用户打开一些视图，点击一些链接。但我不想使用谷歌分析，因为远程移动客户端调用了一些操作。任何插件或 gem 都可以像 Active:Record 的观察者一样做到这一点？我还用图表展示了这些动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:58:51.907

尝试混合面板。强烈推荐它。

# django - 如何在 Django 中生成随机数作为对象的 id / 主键

> ID：11770850
> 
> 赞同：1
> 
> 时间：2012-08-02T03:56:30.033
> 
> 标签：django, random, primary-key

您如何生成一个唯一的随机数以设置为 django 中对象的主键？

编辑 - 随机数不必是主键，但它需要对每个对象都是唯一的，以便我可以通过该数字引用/获取/调用对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T05:32:57.970

任何随机生成的数字唯一性都受到生成随机数的空间大小的限制。UUID/GUIDS 的长度为 128 位，因此发生冲突的可能性很小。[然而，除了第 4 版之外的](http://blogs.msdn.com/b/oldnewthing/archive/2012/05/23/10309199.aspx)`0x4`所有UUID都不是完全随机的（即使是那些，一个半字节固定在尽管他为 Microsoft 工作，而且他的大部分专栏都与 Microsoft 相关，但这篇文章适用于使用 UUID/GUID 的任何内容）。

因此，我们不要为此考虑 UUID。首先需要确定的是您需要多大的空间，然后可以确定适合您需求的编码方案。这在很大程度上取决于您要参考的项目数量。由于[生日问题](http://en.wikipedia.org/wiki/Birthday_problem)，两个随机生成的数字之间发生冲突的可能性非常低，维基上的[生日攻击](http://en.wikipedia.org/wiki/Birthday_attack)页面提供了一个近似值，即：

![在此处输入图像描述](../Images/1237684bc79f618e9c651d79c4986a00.png)

H 是可能值的数量，Q(H) 是在发生碰撞之前我们可以生成多少个项目。我将假设冲突是不可取的，因为要检查一个，很可能您必须访问您的数据库以查看生成的数字是否存在，如果存在，则创建另一个并再次检查它。随着您在数据库中获得越来越多的项目，此过程将花费越来越长的时间。当然，您仍然需要检查碰撞，但是您必须多次检查的可能性应该非常低。

因此，让我们从 32 位值开始。根据上面的公式，您将生成大约 82,000 个项目，然后才能预期发生碰撞。如果您预计只有几千或几万，这可能是可接受的位数。对于其他一些值，以下是为多个位生成的项目数量：

```
16 bits: 320
24 bits: 5100
32 bits: 82,000
40 bits: 1.3*16^6
48 bits: 2.1*10^7
64 bits: 5.4*10^9 
```

我认为这些计数是您希望在您的表中拥有的最大值。如果它与安全相关，我会选择一个比您需要的范围大得多的范围（外部可见的用户 ID，您不希望人们猜测其他人，最多几百个用户？48 位是我最满意的最小值那里）

在一个特定的注释中，我将使用[random.getrandbits()](http://docs.python.org/library/random.html#random.getrandbits)为非安全相关项目生成这些数字，对于那些，我将使用[ssl.RAND_bytes()](http://docs.python.org/dev/library/ssl.html#ssl.RAND_bytes)代替。

现在，对于问题的另一部分：将这些随机位编码成可打印的东西。最基本的将是十六进制编码，我们是`0-9A-F`，长度将是您生成的位数除以 4（32 位标识符将是 8 个字符，40 位 10 等）。这将不区分大小写并且最容易键入。

另一种选择是 base-64 编码。这将导致输出 (1/6)*n（向上舍入）字符（其中 n 是位数）。因此，对于 32 位、6 个字符、40 位、7 个字符等。Base 64 值区分大小写，如果要将一个值放入 URL 必须小心（+ 和 / 都是 base 64 编码的一部分，并且可以替换为 . 和 _ 例如，用于 URL 编码）。这将使它们更难键入，但对于较大的值会更短（base64 为 11 个字符，而 64 位值的十六进制为 16 个字符，并且这种节省会增加）。

虽然这并不能直接回答您的问题（尽管我想您知道如何为数据库中的存储分配一个值，并且请记住，这些值应该以字符串编码形式存储在数据库中，或者作为 BLOB，因为您的数据库可能会将其中一些值视为已签名，并导致坏事），它应该为您提供您需要知道的内容，以便为您的应用程序找出正确的组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T04:21:17.710

也许只是生成一个uuid？

```
>>> from uuid import uuid4
>>> uid = uuid4()
>>> uid
UUID('88016297-726a-4a42-a5d3-7c1047e27cac')
>>> uid.int
180782199398610579001229174541650132140L
>>> uid.hex
'88016297726a4a42a5d37c1047e27cac'
>>> uid.bytes
'\x88\x01b\x97rjJB\xa5\xd3|\x10G\xe2|\xac' 
```

长 uuid 旨在避免冲突并保证高度的唯一性。如果您需要更短的 id，这将取决于您打算如何使用它。如果它需要在所有模型中唯一，因为您将其用作根 url，`/<slug>/`那么它将增加您在分配之前查询数据库检查唯一性的需要。

您可能想查看使用[slugfield](https://docs.djangoproject.com/en/dev/ref/models/fields/#slugfield)和这样的[片段](http://djangosnippets.org/snippets/690/)，它在模型保存时设置唯一的 slug 值。

简而言之...长 UUID == 即时值。较短的 slug 值 == 查询循环以确认唯一性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-16T06:42:39.550

以下是使用 Django 模型执行此操作的方法：

```
from django.db import models
from django.contrib.auth.models import User
from random import randint

class Account(models.Model):
    id = models.BigAutoField(primary_key=True)
    user = models.OneToOneField(User, related_name='account',on_delete=models.CASCADE)

    def save(self):
        if not self.id:
            is_unique = False
            while not is_unique:
                id = randint(1000000000000000000, 1999999999999999999) # 19 digits: 1, random 18 digits
                is_unique = Account.objects.filter(id=id).exists()
            self.id = id
        super(Account, self).save() 
```

# android - 如何将日历中的日期传递给另一个活动 [Android]

> ID：11770855
> 
> 赞同：0
> 
> 时间：2012-08-02T03:57:22.460
> 
> 标签：android, calendar

我无法将日历中的日期传递给其他活动。这不是我想要显示的当前日期，而是用户在我编码的日历上选择的日期。
以下是我的代码。

```
 @Override
                public void onClick(View view)
                {
                    String date_month_year = (String)view.getTag();
                    selectedDayMonthYearButton.setText(new StringBuilder().append("Selected:").append(date_month_year));

                    Intent k = new Intent(Calendar_Event.this, Create_Events.class);
                 startActivity(k);

                    try
                    {
                        Date parsedDate = dateFormatter.parse(date_month_year);
                        Log.d(tag, "Parsed Date: " + parsedDate.toString());
                    }
                    catch(ParseException e)
                    {
                        e.printStackTrace();
                    }
                } 

                public int getCurrentDayOfMonth()
                    {
                        return currentDayOfMonth;
                    }

                private void setCurrentDayOfMonth(int currentDayOfMonth)
                    {
                        this.currentDayOfMonth = currentDayOfMonth;
                    }
                public void setCurrentWeekDay(int currentWeekDay)
                    {
                        this.currentWeekDay = currentWeekDay;
                    }
                public int getCurrentWeekDay()
                    {
                        return currentWeekDay;
                    }

        }//end GridCellAdapter 
```

我试图将选择的 onClick 日期传递给该类链接到的下一个活动。
任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:05:36.890

用于`Intent.putExtra(String date)`将日期从一项活动传递到另一项活动。更改您的按钮单击代码，如 Calendar_Event.class：

**在 Calendar_Event 活动中：**

```
//Create new Intent Object, and specify class
Intent intent = new Intent();

intent.setClass(Calendar_Event.this,Create_Events.class);

intent.putExtra("passdate","Date_var_here");  

Calendar_Event.this.startActivity(intent); 
```

**在 Create_Events 活动中：**

```
//obtain  Intent Object send  from SenderActivity
  Intent intent = this.getIntent();

  /* Obtain String from Intent  */
  if(intent !=null)
  {
     String strdata = intent.getExtras().getString("passdate");
    // DO SOMETHING HERE
  }
  else
  {
    // DO SOMETHING HERE
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-06T19:35:53.660

考虑通过调用将日历变量转换为 long`getTimeInMillis()`

```
/* GetDateActivity.java */

Intent intent = new Intent();

Calendar myDate = Calendar.getInstance();
myDate.set(Calendar.YEAR, 1970);
myDate.set(Calendar.MONTH, 1);
myDate.set(Calendar.DAY_OF_MONTH, 1);

intent.putExtra("myDateKey", myDate.getTimeInMillis());
setResult(RESULT_OK, intent);
// Terminate current activity
finish(); 
```

然后，内部活动称为`startActivityForResult(intent)`，即`MainActivity.java`

```
public static final int REQUEST_DATE_CODE = 777;

...

Intent i = new Intent(MainActivity.class, GetDateActivity.class);
startActivityForResult(i, REQUEST_DATE_CODE);

...

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case REQUEST_DATE_CODE:
            if (resultCode == RESULT_OK && data != null) {

                Calendar myDate = Calendar.getInstance();
                myDate.setTimeInMillis(extras.getLong("myDateKey"));

                Date date = myDate.getTime();
                SimpleDateFormat simpleDateFormatter = new SimpleDateFormat("EEE, MMM d, ''yy", Locale.getDefault());
                Log.d(tag, "Parsed Date: " + simpleDateFormatter.format(date));
           }
           break;
    }
} 
```

# javascript - 使用javascript函数设置HTML文本框值？

> ID：11770858
> 
> 赞同：3
> 
> 时间：2012-08-02T03:57:29.313
> 
> 标签：javascript, android, html

我正在使用此代码使用 Javascript 函数设置 HTML 文本框值。但它似乎不起作用。谁能指出，这段代码有什么问题？

```
Whats your Name?
<input id="name" value="" />

<script type="text/javascript"> 
function setValue(value){
var myValue=value;
document.getElementsById("name").value = myValue;
}
</script> 
```

“价值”来自我的 android java 类使用这些代码

```
String value = "Isiah";
    WebView web = (WebView) findViewById(R.id.web1);
    web.getSettings().setJavaScriptEnabled(true);
    web.loadUrl("file:///android_asset/www/webpage");
    web.loadUrl("javascript:setValue("+ value +")"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T04:14:20.913

```
 function setValue(value) {
    var myValue=value; //unnecessary
    document.getElementById("name").value= myValue;
} 
```

但是正如评论中指出的那样，您需要在代码中的某处调用 setValue(value) 。现在你刚刚定义了这个函数永远不会被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:22:48.327

您可以通过名称访问元素的值：

```
 document.getElementsByName("textbox1"); // returns a list of elements with name="textbox1"
    document.getElementsByName("textbox1")[0] // returns the first element in DOM with name="textbox1" 
```

所以：

```
 input name="buttonExecute" onclick="execute(document.getElementsByName('textbox1')[0].value)" type="button" value="Execute" /> 
```

或者您为元素分配一个 ID，然后标识它，您可以使用 getElementById 访问它：

```
 <input name="textbox1" id="textbox1" type="text" />
    <input name="buttonExecute" onclick="execute(document.getElementById('textbox1').value)" type="button" value="Execute" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T04:45:38.217

我想你错过了引号，

尝试，

```
web.loadUrl("javascript:setValue('"+ value +"')"); 
```

还要考虑错字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T04:10:43.630

您没有将功能链接到任何东西。例如，单击：

```
<input id="name" value="" onclick="javascript:this.value=12;"/> 
```

替换所需功能的 onclick 属性，无论它做什么（您需要更具体）

此外，没有语言属性（至少不再使用）`type="text/javascript"`代替

这是一个小提琴：http: [//jsfiddle.net/4juEp/](http://jsfiddle.net/4juEp/)

单击输入以查看其工作。

看看这第二把小提琴。[http://jsfiddle.net/4juEp/1/](http://jsfiddle.net/4juEp/1/)

它将隐藏输入中定义的任何内容加载到名称输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T04:14:29.010

你正在使用`document.getElementsById("name")`它应该是`document.getElementById("name")`

不是`Elements`_`Element`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T04:36:08.483

首先，您的 javascript 函数中有一个错字，即您使用`getElementsById`的`getElementById`

要在页面加载时设置文本框的值，我建议您使用替代方法

```
<body onload="setValue('yourValueToSet');">

<!-- Your usual html code in the html file -->

</body> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-02T00:45:25.867

看一下这个：

```
<body onload="setvalue($value);">
Whats your Name?<input id="name" name="name" value=""/>
<script type="text/javascript">
function setValue(value){
document.{formname}.name.value = value;}</script> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-03-23T10:03:09.910

不是元素 是元素

你应该使用`document.getElementById('object-id');`

# ios - 如何在 iOS 中检索存储信息

> ID：11770862
> 
> 赞同：1
> 
> 时间：2012-08-02T03:58:16.113
> 
> 标签：ios, storage

我想以编程方式检索存储信息，如容量、可用存储、应用程序总数、视频、图片等。在此先感谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T04:04:40.060

试试这些。但不能保证在**非越狱**设备上工作。

```
- (NSNumber *) totalDiskSpace
{
    NSDictionary *fattributes = [[NSFileManager defaultManager] attributesOfFileSystemForPath:NSHomeDirectory() error:nil];
    return [fattributes objectForKey:NSFileSystemSize];
}

- (NSNumber *) freeDiskSpace
{
    NSDictionary *fattributes = [[NSFileManager defaultManager] attributesOfFileSystemForPath:NSHomeDirectory() error:nil];
    return [fattributes objectForKey:NSFileSystemFreeSize];
} 
```

要计算目录中的文件数（包括它的子目录，我使用了这个*（这不是最有效的方法）*：

```
-(NSString *)numberOfSongs
{   
    NSString *musicPath = @"/var/mobile/Media/iTunes_Control/Music/"; 
    NSArray *dirs = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:musicPath error:nil];
    NSArray *subs = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:musicPath error:nil];

    int totalFiles;
    int subT = [subs count];
    int dirT = [dirs count];
    totalFiles = subT - dirT;

    return [NSString stringWithFormat:@"%i", totalFiles];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T05:19:03.627

看起来 WrightsCS 回答了磁盘空间问题。

如果您想要图像数量，请查看[`ALAssetsLibrary`](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)（`AssetsLibrary.framework`您必须在`Target`设置的“将二进制文件与库链接”部分中包含此框架），然后：

```
#import <AssetsLibrary/AssetsLibrary.h>

// get the image assets

ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
NSAssert(library, @"Unable to open ALAssetsLibrary");

NSUInteger __block images = 0;
[library enumerateGroupsWithTypes:ALAssetsGroupAll
                       usingBlock:^(ALAssetsGroup *group, BOOL *stop){
                           NSLog(@"%@", group);
                           images += group.numberOfAssets;
                           dispatch_async(dispatch_get_main_queue(), ^{
                               // update my UI with the number of images
                           });
                       }
                     failureBlock:^(NSError *err){
                         NSLog(@"err=%@", err);
                     }]; 
```

如果您想在非越狱设备上访问 iTunes 库，请查看[iPod Library Access Programming Guide](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/AboutiPodLibraryAccess/AboutiPodLibraryAccess.html)，它向您展示了如何使用`MPMediaQuery`（记得`MediaPlayer.framework`在您的项目中包含 ），然后：

```
#import <MediaPlayer/MediaPlayer.h>

MPMediaQuery *everything = [[MPMediaQuery alloc] init];
NSAssert(everything, @"Unable to open MPMediaQuery");

iTunesMediaCount = [[everything items] count]; 
```

我不知道是否有用于获取应用程序数量的已发布 API。有越狱设备的解决方案，但我不知道我们其他人。

您没有问过这个问题，但是如果您想要可用的 RAM（不是闪存，而是可用于应用程序的内存），您可以通过以下方式获得它：

```
#import <mach/mach.h>
#import <mach/mach_host.h>

- (void)determineMemoryUsage
{
    mach_port_t host_port;
    mach_msg_type_number_t host_size;
    vm_size_t pagesize;

    host_port = mach_host_self();
    host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t);
    host_page_size(host_port, &pagesize);        

    vm_statistics_data_t vm_stat;

    if (host_statistics(host_port, HOST_VM_INFO, (host_info_t)&vm_stat, &host_size) != KERN_SUCCESS)
        NSLog(@"Failed to fetch vm statistics");

    /* Stats in bytes */ 
    natural_t mem_used = (vm_stat.active_count +
                          vm_stat.inactive_count +
                          vm_stat.wire_count) * pagesize;
    natural_t mem_free = vm_stat.free_count * pagesize;
    natural_t mem_total = mem_used + mem_free;

    // do whatever you want with mem_used, mem_free, and mem_total
} 
```

# .net - 在 WPF 4.0 中：如何渲染到（PNG）位图和窗口一样好？

> ID：11770863
> 
> 赞同：0
> 
> 时间：2012-08-02T03:58:36.677
> 
> 标签：.net, wpf, bitmap, wpf-4.0

我正在以另一种方式将我的 WPF（4.0）视觉效果（矢量图）导出为某些图像格式......

```
 public void ExportImageTo(BitmapEncoder Encoder, Stream ExportStream, Visual SourceVisual, int Width, int Height)
    {
        var Result = new RenderTargetBitmap(Width, Height, WPF_DPI, WPF_DPI, PixelFormats.Default);
        Result.Render(Source);

        Encoder.Frames.Add(BitmapFrame.Create(Result));
        Encoder.Save(ExportStream);

        ExportStream.Flush();
        ExportStream.Close();
    } 
```

问题是即使使用 PngBitmapEncoder（无损算法），它仍然会生成一些与屏幕上不同的小像素。

我认为它与 WPF 呈现文本或处理抗锯齿的方式有关，并且存在诸如 UseLayoutRounding、SnapsToDevicePixels 和 BitmapScalingMode 之类的属性（注意：我没有在我的代码中使用这些属性）。

那么，我该怎么做才能使我导出的视觉效果看起来像在屏幕上呈现的那样？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:47:41.040

显然，如果 WPF 以透明背景为目标，则 WPF 不会呈现 ClearType 文本（谷歌此：RenderOptions.ClearTypeHint）。我想知道使用 24 位图像格式（无 alpha 通道）是否会取得更好的成功。此外，宽度/高度与实际宽度/实际高度不同。

# iphone - 将项目从情节提要更改为 xib 文件时出现“此类与键的键值编码不兼容”错误

> ID：11770865
> 
> 赞同：0
> 
> 时间：2012-08-02T03:58:56.187
> 
> 标签：iphone, ios, xcode, debugging

我在一个开始使用故事板和 xib 文件的项目中取得了很大进展。然后我决定将其全部更改为 xib 文件，以便 5.0 之前的固件可以使用它们。我在这样做时遇到了一些麻烦，所以我创建了一个新项目并开始复制 xib 文件的所有代码和内容。但是，当我运行该项目时，调试器给了我错误“这个类不符合 key gameStarts 的键值编码”（出口名称）。我已经尝试从 DerivedData 文件夹中清除所有目标，重置我的 iOS 模拟器，并检查指定 xib 文件的连接检查器以查找稀有出口，但似乎没有任何效果。我已经搜索了几个小时没有成功。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:26:16.333

似乎 .xib 文件有一个对 gameStarts 的出口引用，但在控制器文件中，没有 IBOutlet 属性 gameStarts。检查您是否在 xCode 4 中正确设置它的最简单方法是切换到 xib 文件，选择文件的所有者，单击类名右侧的三角形。这应该将您带到类文件。我之前也遇到过类似的问题，都是由于引用不正确造成的。

并在 xib 文件中找到连接到 gameStarts 的元素，将其重新连接到您的控制器。我猜你会从故事板文件中复制界面。

# hibernate - Grails hasMany：查找所有具有符合条件的子记录的主记录

> ID：11770867
> 
> 赞同：3
> 
> 时间：2012-08-02T03:59:43.210
> 
> 标签：hibernate, grails, grails-domain-class, hibernate-criteria

我有这个**Grails 2.0.3**项目，其中有两个模型`DomainA`，`DomainB`并且两者都通过`many-to-many`关系相互关联，`DomainB`其中`DomainA`.

```
class DomainA {
  // properties
  static hasMany = [domains: DomainB]
}

class DomainB {
  // properties
  static hasMany = [domains: DomainA]
  static belongsTo = [DomainA]
} 
```

鉴于这种设计，我想查询所有`DomainB`存在/是`DomainA`遵循查询集的实例`DomainA`。

```
def domainsList = DomainA.createCriteria().list() {
   // other criterions for the other properties
}
DomainB.createCriteria().list() {
   inList("domains", domainsList)
   // other criterions for the other properties
} 
```

执行上述代码时，提示错误，`ERROR util.JDBCExceptionReporter - Parameter #1 has not been set.`其中`Parameter #1`提示条件中的`domains`属性名称`inList`。

遇到这个问题，能解决吗？如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T07:42:20.183

看看[GORM 指南](http://grails.org/doc/latest/guide/GORM.html)，寻找“查询关联”。让我们宁愿尝试用一个查询来完成这一切。

使用新的“where”查询，它是

```
def query = DomainB.where {
  domains { someAField == 3 } && someBField == 8
} 
```

或与`CriteriaBuilder`：

```
DomainB.withCriteria {
  domains { 
    eq 'someAField', 3 
  }
  eq 'someBField', 8
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T05:01:46.833

您可以使用 HQL：

```
def domainBsWithDomainAs = DomainB.executeQuery( 'SELECT DISTINCT b FROM DomainB b INNER JOIN b.domains a WHERE a IN(SELECT DISTINCT a FROM DomainA a)' ) 
```

或使用[createCriteria](http://grails.org/doc/latest/ref/Domain%20Classes/createCriteria.html)：

```
def domainsList = DomainA.createCriteria().list() {
   // other criterions for the other properties
}
DomainB.createCriteria().list() {
   "in"("domains", domainsList) // Use "in" (including quotes) instead of inList.
   // other criterions for the other properties
} 
```

# php - 在 jqgrid 中更新和重新加载单行

> ID：11770869
> 
> 赞同：0
> 
> 时间：2012-08-02T03:59:45.613
> 
> 标签：php, javascript, jqgrid

> **可能重复：**
> [重新加载单个 jqGrid 行？](https://stackoverflow.com/questions/3786445/reload-single-jqgrid-row)

我有一个 jqGrid，我使用 ondblClickRow 事件来显示编辑对话框。我知道如何重新加载整个网格，但我只想重新加载我在我的编辑对话框中单击关闭按钮后我 ondblClickRow 的行，它将自动在我的网格中查看我更新的数据。有人可以给我一个想法或示例代码（必须非常感谢）如何做到这一点。

PS我知道关于这个话题已经提出了同样的问题，但我仍然不知道如何做到这一点。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:57:38.320

看看这个帖子和最后一个答案

[http://www.trirand.com/blog/?page_id=393/help/reload-row/](http://www.trirand.com/blog/?page_id=393/help/reload-row/)

# c# - 具有整数约束的 C# 泛型方法拒绝从整数转换为泛型类型

> ID：11770882
> 
> 赞同：6
> 
> 时间：2012-08-02T04:02:59.807
> 
> 标签：c#, generics

如果我有一个被限制为“int”类型的泛型方法，那么我当然应该能够将整数转换为泛型 T 类型。例如...

```
 public T ExampleMethod<T>(int unchanged) where T : int
    {
        return (T)unchanged;
    } 
```

...编译器抱怨*无法将类型“int”转换为“T”*，但我有一个约束表明目标是整数。那么它肯定应该工作吗？

**更新：**

实际情况是我想要一个返回枚举值的辅助方法。所以我理想的辅助方法会更像这样......

```
public T GetAttributeAsEnum<T>(XmlReader reader, string name) where T : enum
{
    string s = reader.GetAttribute(name);
    int i = int.Parse(s);
    return (T)i;
} 
```

...并像这样使用它...

```
StateEnum x = GetAttributeAsEnum<StateEnum>(xmlReader, "State");
CategoryEnum y = GetAttributeAsEnum<CategoryEnum>(xmlReader, "Category");
OtherEnum z = GetAttributeAsEnum<OtherEnum>(xmlReader, "Other"); 
```

...但你不能通过枚举来限制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T04:08:19.680

“*只能将类或接口指定为约束。* ” (c) ReSharper

int (Int32) 只是一个结构。您可以将 T 限制为*struct*。但你不能使用任何结构作为约束。

您可以在此处找到可能的限制的完整列表 - [http://msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

**UPD**

and for Enum constraint see this question - [Is there a workaround for generic type constraint of "special class" Enum in C# 3.0?](https://stackoverflow.com/questions/1404077/is-there-a-workaround-for-generic-type-constraint-of-special-class-enum-in-c-s)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T04:06:23.197

*int*（以及所有其他数字类型和枚举）不能用作通用约束。

看

[通用 C# 代码和加号运算符](https://stackoverflow.com/questions/4039694/generic-c-sharp-code-and-the-plus-operator)

了解更多详情和选项。

有关与 C# 的创建者 Anders Hejlsberg 关于泛型和类型约束的讨论，请参阅

[http://www.artima.com/intv/generics.html](http://www.artima.com/intv/generics.html)

可以像这样放置*struct*的类型约束：

```
public class Generic<T> where T : struct { }

Generic<int> gen = new Generic<int>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T04:06:49.027

你确定它的编译？

在这里，它给出了以下错误：

> 错误 CS0701：“int”不是有效的约束。用作约束的类型必须是接口、非密封类或类型参数。

# asp.net - 验证码的不一致行为

> ID：11770886
> 
> 赞同：1
> 
> 时间：2012-08-02T04:03:31.463
> 
> 标签：asp.net, updatepanel, captcha

我的一个表格有一个验证码。

我不得不使用这个验证码，因为我之前已经写了很多代码。

这种方法很简单：

有一个`ashx`文件。将使用该文件创建图像。同时，该文件将从图像中创建一个具有相同值的会话。

提交后，代码将检查它们是否相同。如果是这样，请继续。如果没有，请返回。

页面刷新后，验证码将更新。

然后我需要根据`ajax update panel`要求添加。

然后验证码在 chrome 和 safari 中仍然可以正常工作，但是当页面在 IE 和 firefox 中再次加载时它不会刷新。

我为验证码创建了一个简单的页面

```
aspx

<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default7.aspx.cs" Inherits="Default7" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">

    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <img height="30" alt="" src="Handler.ashx" width="80"><br>
            <asp:Button ID="btnSubmit" runat="server" Text="Submit" 
                onclick="btnSubmit_Click"/>
        </ContentTemplate>
    </asp:UpdatePanel>
    <div>

    </div>
    </form>
</body>
</html>

aspx.cs

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Default7 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnSubmit_Click(object sender, EventArgs e)
    {

    }
}

handler.ashx 

<%@ WebHandler Language="C#" Class="Handler" %>

using System;
using System.Web;
using System.Web.SessionState;
using System.Drawing;
using System.Drawing.Imaging;
using System.Drawing.Text;

public class Handler : IHttpHandler,System.Web.SessionState.IRequiresSessionState {
    public void ProcessRequest(HttpContext context)
        {
            Bitmap objBMP = new System.Drawing.Bitmap(60, 20);
            Graphics objGraphics = System.Drawing.Graphics.FromImage(objBMP);
            //objGraphics.Clear(Color.Blue);

            objGraphics.TextRenderingHint = TextRenderingHint.AntiAlias;

            //' Configure font to use for text
            Font objFont = new Font("Arial", 8, FontStyle.Bold);
            string randomStr = "";
            int[] myIntArray = new int[5];
            int x;

            //That is to create the random # and add it to our string
            Random autoRand = new Random();

            for (x = 0; x < 5; x++)
            {
                myIntArray[x] = System.Convert.ToInt32(autoRand.Next(0, 9));
                randomStr += (myIntArray[x].ToString());
            }

            randomStr = GetRandomString();

            //This is to add the string to session cookie, to be compared later
            context.Session.Add("randomStr", randomStr);

            //' Write out the text
            objGraphics.DrawString(randomStr, objFont, Brushes.White, 3, 3);

            //' Set the content type and return the image
            context.Response.ContentType = "image/GIF";
            objBMP.Save(context.Response.OutputStream, ImageFormat.Gif);

            objFont.Dispose();
            objGraphics.Dispose();
            objBMP.Dispose();

        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }

        private string GetRandomString()
        {
            string[] arrStr = "A,B,C,D,1,2,3,4,5,6,7,8,9,0".Split(",".ToCharArray());
            string strDraw = string.Empty;
            Random r = new Random();
            for (int i = 0; i < 5; i++)
            {
                strDraw += arrStr[r.Next(0, arrStr.Length - 1)];
            }
            return strDraw;
        }

} 
```

任何的想法？

* * *

我现在得到了答案。

将图像控制更改为服务器控制。

并在后面的代码中使用当前日期时间更改图像源

`<img height="30" alt="" src="/Handler.ashx" width="80" runat="server" id="imgCaptcha">`

`imgCaptcha.Src = "Handler.ashx?dt=" + DateTime.Now.ToString();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:07:25.407

将图像控制更改为服务器控制。

并在后面的代码中使用当前日期时间更改图像源

```
<img height="30" alt="" src="/Handler.ashx" width="80" runat="server" id="imgCaptcha">

imgCaptcha.Src = "Handler.ashx?dt=" + DateTime.Now.ToString(); 
```

# android - 如何结合sherlock和viewpageindicator？

> ID：11770887
> 
> 赞同：0
> 
> 时间：2012-08-02T04:03:47.367
> 
> 标签：android

嘿，我是android开发的新手。我现在尝试同时使用 sherlock 库和 viewpageindicator，但我不能。 **你能发布我们如何结合这两者的教程吗？**

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:14:33.503

下面是包含用于组合 sherlock 和查看页面指示器的示例程序的链接。

[https://github.com/JakeWharton/Android-ViewPagerIndicator/](https://github.com/JakeWharton/Android-ViewPagerIndicator/)

我希望您学习完整的示例并分析整个程序，您可以轻松理解这个概念。

这将为您提供有用的信息，我的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:50:46.040

您应该稍微修改一下 Shelock Action Bar 源代码（更改从 Activity 扩展到 FragmentActivity）

从：

```
public abstract class SherlockActivity extends Activity 
```

至：

```
public abstract class SherlockActivity extends FragmentActivity 
```

（用于实现查看页面指示器）

然后，再次构建 Sherlock Action Bar 库，像往常一样使用它。

# mysql - 奇怪的编码类型转换为 utf8

> ID：11770897
> 
> 赞同：0
> 
> 时间：2012-08-02T04:05:33.520
> 
> 标签：mysql, utf-8, fonts

我的数据库中有超过 1k 条记录，其值看起来很奇怪：

```
LÆ°u BÃ­ch vá» Viá»‡t Nam lÃ m liveshow 
```

但是，当我在 utf-8 中查看它们时，它看起来很好且可读。我如何立即将所有这些转换为在 mysql 中看起来像这样的 ut8：

```
Lưu Bích về Việt Nam làm liveshow 
```

非常感谢任何形式的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:44:00.603

我将假设列编码是 utf8。如果不是，请更改它，因为 latin1 没有 Việt 所需的字符。

此时，您在列中拥有的是双重 UTF-8 编码的文本。如果所有文本都以同样的方式被破坏，您可以通过将列类型首先更改为 latin1 文本，然后更改为 blob，然后更改为 utf8 文本来解决此问题。但是，如果列中的某些数据是单独编码的，则您需要检测损坏的值并仅更新这些值。此更新语句试图做到这一点：

```
update mytable set mycolumn = @txt where char_length(mycolumn) = 
    length(@txt := convert(binary convert(mycolumn using latin1) using utf8)); 
```

或者，您可以定义一个[执行“安全” utf-8 转换的函数](http://jonisalonen.com/2012/fixing-doubly-utf-8-encoded-text-in-mysql/)，检测原始数据何时正常并仅在不正常时返回转换后的版本，然后使用它进行更新。

# saml-2.0 - IdP 如何识别用户是否具有安全上下文

> ID：11770901
> 
> 赞同：5
> 
> 时间：2012-08-02T04:06:15.250
> 
> 标签：saml-2.0

我有一个关于 SAML2 的基本问题。典型流程是用户从受保护的 SP 请求资源。SP 检查用户是否有安全上下文（比如 cookie？），如果没有找到安全上下文，它会构造 AuthRequest，然后将浏览器重定向到 IdP。现在 IdP 同样首先检查用户是否具有现有的安全上下文。IdP 如何做到这一点？IdP 是否也为此目的使用 cookie？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T12:18:02.910

是的。对于 SAML Web SSO 配置文件，会话几乎总是作为 cookie 保存在 IDP 和 SP 的浏览器中。但是，没有关于如何管理它的规则。IDP 可以选择不保持活动会话并提示用户登录每个 SSO 事务。

伊恩

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T01:02:31.967

@Ian - 很好的答案。但是，如果 IDP 不维护会话 cookie [B/W 浏览器和身份提供者 (IDP)]，那么您将错过单点登录 (SSO) 的显着优势。将丢失的 SSO 用户体验 (UX) 功能在以下场景中进行了描述：

0) 假设 IDP 已在 Google Apps 和 Salesforce 中注册。
1) 打开浏览器。注意：SAML 是基于浏览器的。您需要一个浏览器才能使 SAML 工作。
2) 尝试访问 Google Apps；（您没有现有的会话 cookie [B/W 浏览器和 Google Apps]）然后将您重定向到 IDP。
3) 您使用有效的 IDP 凭据登录。
4) IDP 然后在您的浏览器中存储一个会话 cookie [B/W Browser and IDP]。（这是@Ian 提到的步骤，IDP 可以跳过） 5) IDP 然后将您重定向回 Google Apps（通过 HTTP POST），并在 POST 中嵌入 SAML 令牌。您现在在 Google Apps 中。（现在您的浏览器上存储了一个会话 cookie [B/W Browser 和 Google Apps]） 5) 尝试访问 Salesforce。
6) Salesforce 发现您没有活动会话 cookie[B/W Browser 和 Salesforce]，因此他们将您重定向到 IDP。

*** 这是我添加的用户体验 (UX) ***
7) IDP 将查找会话 cookie [B/W 浏览器和 IDP]，如果 IDP 配置为不存储维护一个，您必须输入单点登录(SSO) 又名 IDP 凭证。

关于第 7 步的讨论：为每个单独的服务输入 SSO 凭据，额外步骤乘以您正在使用的服务数量。我认为实现的主要吸引力是只输入一次凭据并访问所有内容（安全主题除外）。但是，如果 IDP 不存储会话 cookie [B/W 浏览器和 IDP]，您仍然只使用一组凭据（而不是每个服务的单独凭据），所以生活仍然更轻松。

@Ajava - 您似乎对如何使用 cookie 感到困惑。我希望您可以按照我上面的步骤，更好地了解如何将 cookie 与 SAML 一起使用。
这也是我发现解释 cookie 的一个很好的链接：http: [//lifehacker.com/5461114/fact-and-fiction-the-truth-about-browser-cookies](http://lifehacker.com/5461114/fact-and-fiction-the-truth-about-browser-cookies)

# c++ - C++ 自动为 boost::make_shared 生成包装器

> ID：11770904
> 
> 赞同：0
> 
> 时间：2012-08-02T04:06:24.660
> 
> 标签：c++, boost, shared-ptr

我正在广泛使用 boost 共享指针，所以我正在创建一个具有一堆有用/通用功能的类。作为其中的一部分，我想创建环绕 boost::make_shared 的静态成员函数来分配/构造对象的实例。例如，如果类 A 具有构造函数：

```
class A {
  A(int arg1, double arg2);
  ...
} 
```

然后围绕 make_shared 的相应包装器将如下所示：

```
class A {
  A(int arg1, double arg2);
  static boost::shared_ptr<A> MakeShared(int arg1, double arg2) {
    return boost::make_shared<A, int, double>(arg1, arg2);
  }
  ...
} 
```

然后要创建一个实例，您只需执行以下操作：

```
boost::shared_ptr<A> a_ptr = A::MakeShared(1, 2.3); 
```

显然构造函数和 MakeShared 之间的关系是非常机械的，所以我的问题是是否/如何创建一个预处理器宏或基类，它可以自动为每个构造函数提供 MakeShared 的一个版本？所以代码看起来像这样：

```
class A {
  A(int arg1, double arg2);
  A(int arg1, double arg2, bool arg3);
  ...
  DEFINE_CORRESPONDING_MAKE_SHARED_FUNCTIONS
  ...
} 
```

使用 boost 预处理器库（或其他库）很好，但较大的项目还没有准备好使用 C++11，所以希望我们可以避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:18:10.160

这可以通过预定义数量的参数来实现：

```
#define DEFINE_MAKE_SHARED_FUNCTIONS(CLASS_TYPE) \
  template<typename A1> \
  static boost::shared_ptr<CLASS_TYPE> make_shared( const A1& a ) {\
      return boost::make_shared<CLASS_TYPE>( a );\
  }\
  template<typename A1,typename A2> \
  static boost::shared_ptr<CLASS_TYPE> make_shared( const A1& a, const A2& a2 ) {\
      return boost::make_shared<CLASS_TYPE>( a, b) );\
  } 
```

如果你想变得花哨，你可以使用 boost 预处理器来自动化宏，但你可以很容易地在一个宏中实现所有 N 个版本（可能编译得更快）。

您可以使用 veridic 模板来减少对宏的需求，但目前它不可移植（不支持 VC++）。

另外，我质疑这样做的必要性，因为 make_shared(args...) 本身就可以工作。

# joomla - joomla 2.5 - 删除 joomlaxtc 网站的首页内容块

> ID：11770905
> 
> 赞同：0
> 
> 时间：2012-08-02T04:06:27.843
> 
> 标签：joomla, joomla2.5

我试图环顾四周来编辑 joomla 的首页。我使用来自 joomlaxtc 的模板，这是我认为我遇到问题的另一个原因，因为编码有点不同。

我想要实现的是删除我的 Joomla 2.5 首页的组件或文章区域。

这是网站

[http://colmandesigns.123abc.co.nz/tyrelink/](http://colmandesigns.123abc.co.nz/tyrelink/)

如您所见，我想删除“即将推出”白色文本框，但我只想将其删除到首页而不是其余页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:02:38.900

只需转到模板管理器并转到高级参数并在主页上查看显示组件并选择无

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T19:09:01.060

我无法让您的网站出现，但 joomla 网站的主页通常由主菜单上的默认项目决定。

从管理员控制面板：

1.  选择菜单->主菜单
2.  在列表中找到“主页”列中带有星号的菜单项
3.  点击菜单项，根据你看到的，判断文章是什么
4.  转到那篇文章，然后在那里编辑。

这假定您的主页是一篇文章，就像标准 Joomla 站点中的情况一样，并且不考虑您的模板在功能或设置方面可能做的任何事情，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T19:17:59.337

如果要删除“即将推出”位，请转到包含“即将推出”位的模块。在左侧，您应该看到“模块分配”。单击它，然后为`Home Page: assign to`.

[该视频](http://people.joomla.org/videos/adeelch/video/861-how-to-see-template-positions-in-joomla-25-a-1617.html)也可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T14:29:08.067

您的模板可能具有从首页隐藏主要内容块的配置，但如果没有，则可以使用 index.php 下面的代码块或将定义模板布局的 php 文件来隐藏它。

```
<?php if (JRequest::getVar('view') != 'featured'): ?>
<div id="maincontentdiv"><jdoc:include type="component" /></div>
<?php endif; ?> 
```

# ios - CCNode覆盖draw（）方法不起作用

> ID：11770912
> 
> 赞同：2
> 
> 时间：2012-08-02T04:08:03.460
> 
> 标签：ios, cocos2d-iphone, overriding, draw

我想绘制一些自定义的 opengl 元素，例如`ccdrawline()`. 根据 cocos2d 文档，我应该重写`draw()`方法来在我的子类层中绘制我的东西。但是它不起作用。而如果我重写该`visit()`方法，我可以看到我想要绘制的内容。我对此感到困惑，我正在寻找解决这个问题的想法。

我是这样设计的：

```
- (void)draw
{
  [super draw];
  CGPoint a = ccp(0,0);
  CGPoint b = ccp(480,320);
  ccDrawLine(a,b);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:59:45.970

您的代码是正确的，它应该可以工作。但我隐约记得 CCLayer 类不调用 draw 。无论哪种方式，draw 或 visit 几乎都是相同的方法，所以只要使用任何一个有效的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:12:04.747

可能是因为你错过了告诉如何画线的方法吗？值得一试。

```
// Set color
glColor4f(0.5, 0.5, 0.5, 1.0);

// Set line width
glLineWidth(6.0f); 
```

# asp.net - 将 Microsoft LCDS 内容发布到 LMS 并跟踪用户交互的教程

> ID：11770916
> 
> 赞同：0
> 
> 时间：2012-08-02T04:08:26.690
> 
> 标签：asp.net, scorm

我想使用 Microsoft LCDS 构建一个 LMS 来发布符合 SCORM 的内容。该系统应该能够跟踪所有用户交互、每个模块花费的时间、课程完成百分比、测验答案并将它们记录在数据库中，然后像 Microsoft E-Learning 一样在课程报告中显示详细信息。

有没有办法做到这一点？我找不到任何教程如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:47:34.813

Microsoft LCDS 基于 SCORM 1.2。以下链接为您提供了包含有关 SCORM 1.2 的所有技术要求的文档，包括 LMS 和创作工具。

[http://www.adlnet.gov/wp-content/uploads/2011/07/SCORM_1_2_pdf.zip](http://www.adlnet.gov/wp-content/uploads/2011/07/SCORM_1_2_pdf.zip)

# css - 如何同时使用@media screen 和@-moz-document？

> ID：11770918
> 
> 赞同：1
> 
> 时间：2012-08-02T04:08:40.850
> 
> 标签：css

我将如何使用`@media screen`和`@-moz-document`规则一起。尝试设置仅在 Firefox 中以特定宽度查看的规则。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T04:42:15.383

尝试这个

```
@media screen and (min-width : 500px){

    div { color: green; } // div color green default

    @-moz-document regexp('http:.*'){
        div { color:red; } // red in FF/Gecko
    }
} 
```

[**演示**](http://jsfiddle.net/KRvqd/4/)和[**更多在这里**](https://developer.mozilla.org/en/CSS/@-moz-document)。

# perl - 如何在 perl 脚本中获取子例程的返回值以 bash

> ID：11770924
> 
> 赞同：-2
> 
> 时间：2012-08-02T04:09:25.470
> 
> 标签：perl, bash, shell

我已经完成了一个 shell 脚本，它获取`.jar`文件的输出并分配给一个变量。

奖励生成器.sh

```
APP_ROOT=/home/testApps/
JAR=${APP_ROOT}ClusterGenerator/generator.jar

#get clusters
clusters=$(loadClusters $1)

for i in `echo $clusters | sed 's/,/ /g'`
do
    #pull cluster records from database and save query return status to $x
    x=$(/usr/IBM/WebSphere/ProcServer/java/bin/java ${JAR} ${i/-/_} 2>&1)
done 
```

基本上，我对 java 应用程序所做的就是`System.out.print`查询返回状态。然后使用`2>&1`in bash 进入输出流并将值分配给 shell 脚本变量。

现在如何获取 perl 脚本的返回值并将其分配给 shell 脚本变量？它与我上面所做的相同还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:09:50.470

您可以使用反引号在 bash 脚本中记录外部命令的输出。

这是一个简单的例子：

```
#!/bin/bash

# Execute the script, recording output to a variable
x=`/path/to/script.pl`

# Display or act on the output some time later
echo "script output: $x" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:02:57.330

> 现在如何获取 perl 脚本的返回值并将其分配给 shell 脚本变量？

```
#! /bin/bash
perl script.pl
return_value=$? 
```

# javascript - Django：密码检查在应该返回true时返回false

> ID：11770925
> 
> 赞同：0
> 
> 时间：2012-08-02T04:09:27.637
> 
> 标签：javascript, python, django, django-views

作为表单验证的一部分，将比较密码和密码 2。这是一个简化的 ajax 请求系统的一部分，用于返回少量数据的极小站点（所以我不使用 JSON）。该程序的想法/目标/总结是它尝试登录用户。如果用户不存在，它会要求客户端加载/显示新用户的表单（只是添加了密码 2 字段并要求输入笔名）。这是文件，我已经标记了程序冻结的运动`#*********`

Forms.py（错误不在这里）：

```
class new_user(forms.Form):
    username = forms.EmailField()
    password = forms.PasswordInput()
    password2 = forms.PasswordInput()
    pen_name = forms.CharField(max_length=30) 
```

Views.py，错误是：

```
def user_log_in(request):
    #add stuff for ajax request
    user_pass = log_in(request.POST)
    er = []
    if user_pass.is_valid():
        print "valid"
        cleaned_info = user_pass.cleaned_data
        user_object = User.objects.filter(email = cleaned_info['username'])
        if user_object.exists():
            logged_in_user = auth.authenticate(username=cleaned_info['username'], auth_password=cleaned_info['password'])
            #add in is_active
            if logged_in_user is not None:
                auth.login(request, logged_in_user)
                return HttpResponseRedirect('/home')
            else:
                er.append("Incorrect Password")
        else:
            new_user_pass = new_user(request.POST)
            if new_user_pass.is_valid():
                cleaned_info_new = new_user_pass.cleaned_data
                print "check points"
                if cleaned_info_new['password'] == cleaned_info_new['password2']: #********
                    print "clean"
                    new_user_query = creat_user(
                        username=cleaned_info_new['username'],
                        password=cleaned_info_new['password'],
                        email=cleaned_info_new['username']
                    )
                    new_user_query.save()
                    msg = ""
                    try:
                        send_mail("Activate", msg,  'mrgnippy@gmail.com',
                            [cleaned_info['username']], fail_silently=False)
                    except:
                        er.append("Error Sending Email")
                else:
                    er.append('Passwords are not the same')
            elif "TN" in request.POST:
                print "TN"
                for e in new_user_pass.errors:
                    er.append(e)
            #elif to check for is_active
            else:
                print "n_usr"
                return HttpResponse('n_usr')
    else:
        for e in user_pass.errors:
            er.append(e)
        for e in er:
            print"-"
            print e
            print"-"
    return HttpResponse('SOS') 
```

django 调试页面显示以下内容：

```
KeyError at /ajax/login 'password' Request Method: POST Request URL: http://127.0.0.1:8000/ajax/login Django Version: 1.4 Python Executable: 
```

错误中的 post 变量内容是这样的（我删除了我的电子邮件并且）：

```
GET: No GET data POST: username = u'********@aol.com' TN = u'TN' password2 = u'test' password = u'test' pen_name = u'testing123' FILES: No FILES data 
```

以防万一出现问题，我已经包含了 javascript 文件。

```
n_usr = false;
function log_in () {
    if(!$('#pass_enter').hasClass('#usr_enter')){
        password = $('#pass_enter').val();
    }else{
        password = '';
    }
    if(!$('#usr_enter').hasClass('blur_field')){
        username = $('#usr_enter').val();
    }else{
        username = '';
    }
    alert(username);

    if(!n_usr){
        $.post('/ajax/login',{password: password, username: username}, function(data) {
            if(data == "n_usr"){
                $('#new_user_entry').show('slow');
                n_usr = true;
            }
            else {

            }

        })
    }else {
        if (!$('#pass_re_enter').hasClass('blur_field')){
                password2 = $('#pass_re_enter').val();
        }else {
                password2 = '';
        }
        if (!$('#pass_re_enter').hasClass('blur_field')){
            penname = $('#pen_enter').val();
        }else {
            penname = '';
        }
            $.post('/ajax/login', {password: password, password2: password2, username: username, pen_name: penname, TN: "TN"}, function(data) {
                if(data == "e_act"){

                } else {

                }
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:52:40.743

我刚刚注意到我在 forms.py 文件中使用了错误的字段。问题解决了。

# c# - C#找不到文件

> ID：11770928
> 
> 赞同：2
> 
> 时间：2012-08-02T04:09:45.500
> 
> 标签：c#, visual-studio-2008, file-io

我有一个 C# Visual Studio 2008 表单，它需要读取相关文件“character/attacks.txt”的内容 File.Exists() 在我运行它时返回 false，即使我确定我的目录已排序。代码：

```
 try
            {
                System.IO.StreamReader file = new System.IO.StreamReader("character/attacks.txt");
                int counter = 0;
                int numberOfLines = 0;
                string line;
                while ((line = file.ReadLine()) != null) { numberOfLines++; }
                string[] attacks = new string[numberOfLines];
                while ((line = file.ReadLine()) != null) { attacks[counter] = line; counter++; }
                file.Close();
                print(attacks.ToString());
            }
            catch (Exception ex) 
            {
                print("ERROR"); print("Did you edit any files?"); print(ex.ToString()); 
            } 
```

异常错误：

```
System.IO.FileNotFoundException: Could not find file 'D:\Users\Andrey\Desktop\Turn\character\attacks.txt'.
File name: 'D:\Users\Andrey\Desktop\Turn\character\attacks.txt'
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.StreamReader..ctor(String path, Encoding encoding, Boolean detectEncodingFromByteOrderMarks, Int32 bufferSize)
   at System.IO.StreamReader..ctor(String path)
   at TurnByTurn.Form1.button1_Click(Object sender, EventArgs e) in D:\Users\Andrey\Desktop\C#\TurnByTurn\TurnByTurn\Form1.cs:line 52 
```

我正在从 Python 移植我的代码，并且从来没有遇到过任何麻烦。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T05:04:42.010

这很奇怪。计算机似乎坚信目录中没有`attacks.txt`文件`D:\Users\Andrey\Desktop\Turn\character\`，但你说它肯定存在。你们中的一个人一定是错的，多年来我了解到计算机比我更经常是正确的。

您确定您的文件实际上有`.txt`扩展名，而不是`.txt.somethingelse`扩展名吗？如果您在 Windows shell 中关闭了文件扩展名的显示，您可能会丢失这个额外的文件扩展名。但是，计算机内部并没有丢失它，并且它认为这是一个与您请求的文件完全不同的文件。这也是[这个人](https://stackoverflow.com/a/2147461/366904)遇到的问题。

要重新配置 Windows 资源管理器：

1.  打开控制面板文件夹。
2.  点击“文件夹选项”。
3.  切换到“查看”选项卡。
4.  在“高级设置”列表框中的项目列表中找到“显示隐藏的文件、文件夹和驱动器”单选按钮，并确保它已被选中。
5.  单击确定。

这个问题的其他答案确实提出了一些很好的建议。其中：

1.  确保如果您在字符串文字中使用反斜杠（这是标准的 Windows 路径分隔符），则使用第二个反斜杠“转义”它们。需要这样做的原因是反斜杠被 C# 编译器解释为转义字符，它允许您键入诸如`\t`插入制表符之类的内容。如果要插入常规反斜杠，则必须转义转义符—<code>\\。这就是您在尝试使用单个反斜杠时遇到错误的原因。

2.  您可以告诉 C# 编译器*准确*地解释您的字符串文字，而不是转义反斜杠字符，包括空格。这些被称为[逐字字符串文字](http://msdn.microsoft.com/en-us/library/aa691090.aspx)。您可以通过在字符串前面加上字符来做到这一点`@`。例如：`@"C:\MyDirectory\MyFile.txt"`

3.  您现在使用的正斜杠字符之所以起作用，完全是出于向后兼容的原因。这不是错误的原因（正如您从异常消息中看到的那样，其中包括正在搜索的路径），但在路径中使用正斜杠可能仍然不是一个好主意。正如我上面提到的，反斜杠是 Windows 中的标准路径分隔符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-18T04:33:46.377

这是因为您创建了一个文本文件，所以它自动带有 .txt 扩展名。因此，如果您故意添加 .txt，那么该文件现在实际上是 Attacks.txt.txt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T04:17:10.787

我认为因为您的文件名中有一个“\”，所以它可能会弄乱它并告诉它在字符文件夹中查找 Attacks.txt 文件。

编辑：或者至少看起来你告诉它你的文件中有一个斜杠。它在错误中为您提供的文件路径是您机器上文件的实际位置吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T04:27:49.187

是的，如果你用'\'替换'/'，你会得到一个无效的字符错误。用 2 个斜线试试这个

```
System.IO.StreamReader file = new System.IO.StreamReader("character\\attacks.txt"); 
```

或者

```
System.IO.StreamReader file = new System.IO.StreamReader(@"character\attacks.txt"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T05:38:11.980

1.  **`Posix`**is`/`和 in 中的路径拆分**`Windows`**器`\`。
2.  用于[`Directory.GetCurrentDirectory`](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)确保当前目录正确。
3.  如果当前目录不正确，请使用完整路径或更改当前目录[`Directory.SetCurrentDirectory`](http://msdn.microsoft.com/en-us/library/system.io.directory.setcurrentdirectory)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-22T20:23:49.817

这将工作正常...

```
 string fileName = file_name+".pdf";
                string files = System.IO.Path.Combine("pdf/") + fileName;
                if (!System.IO.File.Exists(files))
                {
                    return RedirectToAction("index", new { message = "File Not Found" });

                }
                else
                {

                    byte[] fileBytes = System.IO.File.ReadAllBytes(files);
                    return File(fileBytes, System.Net.Mime.MediaTypeNames.Application.Octet, files);

                } 
```

# objective-c - 以最简单的方式为 @selector 传递 2 个参数

> ID：11770933
> 
> 赞同：0
> 
> 时间：2012-08-02T04:10:51.087
> 
> 标签：objective-c, ios

```
SEL twoArgumentSelector = @selector(methodWithTwoArguments:and:); 

[newsButton addTarget:self action:@selector(twoArgumentSelector) forControlEvents:UIControlEventTouchUpInside];

-(void)methodWIthTwoArguments:(id)argumentOne and:(id)argumentTwo; 
```

我已经看到了一些示例，它们可以让您在选择器中使用两个参数。在上面的代码中怎么做？提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:14:05.453

```
@selector(twoArgumentSelector:and:) 
```

虽然我不确定你将如何发送带有控制事件的两个参数......

编辑：

你知道选择器实际上并没有调用方法，所以你不能用选择器传递参数。它基本上只是代码块（方法）的名称。读[这个](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Selector.html)。更好的解决方案是让控制事件调用一个单独的方法，然后该方法可以确定要发送到具有 2 个参数的方法的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:18:38.553

UIControls 事件仅在其目标选择器允许一个参数时才会发送对自身的引用。这就是你所得到的。UIButton 就是这样一种 UIControl 子类。

```
- (void)buttonAction:(id)sender; //(reference to button) 
```

完成您想要的最简单的方法是在您的按钮目标（在本例中`self`）上创建另一个方法来调用您的两个参数选择器。

```
[newsButton addTarget:self action:@selector(buttonAction:) forControlEvents:...];

- (void)buttonAction:(id)sender
{
  [self methodwithTwoArguements:sender and:otherObject];
} 
```

这也可以通过 UIButton 子类来解决，但取决于您需要的第二个参数，这是*最简单*的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T04:19:07.963

除非您对对象进行子类化，否则不需要这样做，因为 UIControlEvents 的参数是发送事件的实例的 id。您可以从该实例中获取您可能需要的所有信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T04:29:25.227

您正在寻找的是[NSInvocation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsinvocation_Class/Reference/Reference.html)。

这是一个例子：

```
SEL mySelector; // 2 parameter selector.

// ...

NSMethodSignature *signature = [[MyClass class] instanceMethodSignatureForSelector:mySelector];
NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
[invocation setTarget:myTarget];
[invocation setArgument:arg1 atIndex:0];
[invocation setArgument:arg2 atIndex:1];
[invocation invoke]; 
```

这将完全符合您的要求。

然而，值得注意的是，您绑定的控制事件不会为第二个参数传递任何内容。这只有在按照约定，回调的对象实际上有第二个参数要传入时才有效。

# java - Java - System.currentTimeMillis(); 不退差价

> ID：11770935
> 
> 赞同：3
> 
> 时间：2012-08-02T04:10:59.887
> 
> 标签：java

出于某种原因，我得到了函数返回的一致 3600：

```
private static long getCountdownLeft() {
    long now = System.currentTimeMillis();
    long elapsedMillis = now - initialTime; //difference of current 'current' time
    long millisLeft = secondsOfGame * 1000 - elapsedMillis;
    return millisLeft/1000;
}

public static void Main(String[] args ) {
     System.out.println("Time is " + getCountdownLeft());
}

private static int secondsOfGame = 3600;
private static long initialTime = System.currentTimeMillis(); 
```

这是事件驱动的。我希望每次调用该函数时都能看到时间上的差异。我只是使用 main 来表明我正在调用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:16:41.363

这很可能是因为它`elapsedMillis`是零。我建议`System.nanoTime()`用于计算经过的时间。

我不太确定你的代码是如何工作的（正如现在发布的那样），但这样的事情可能会奏效。请注意，您需要添加计算逻辑，这只是一个示例：

```
public class TimeTest {

    private long startTime;

    public TimeTest(){
        startTime = System.nanoTime();
    }

    public void computeTimeDifference(){
        long currentTime = System.nanoTime();
        long elapsedTime = currentTime - startTime;

        System.out.println("Difference: "+elapsedTime+ "ns");
    }

    public static void main(String[] args) {
        new TimeTest().computeTimeDifference();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:17:35.717

在调用 getCountdownLeft 之前，您的代码将花费很少的时间。尝试更新此代码：

```
 public static void Main(String[] args) throws InterruptedException {
    long gameTime = System.currentTimeMillis(); // pass the current time
    Thread.currentThread().sleep(1000); // sleep one second before invoke getCountdownLeft
    System.out.println("Time is " + getCountdownLeft(gameTime));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T04:39:14.837

嘿，我刚刚为 prev、new 和 elapsed 变量添加了打印语句。值是

> 上一次 1343882409054
> 
> 现在时间 1343882409054
> 
> 经过时间 0
> 
> 时间是3600

所以你的 millisLeft 将永远是 3600 。

但是如果你尝试使用

> System.nanoTime()

这些值是，

> 上一次 519222175869357
> 
> 现在时间 519222175923421
> 
> 经过时间 54064
> 
> 时间是 3545

所以你必须在这里更细化，并考虑使用 System.nanoTime()。

# restkit - [RKClient sharedClient].requestQueue 和 [RKObjectManager sharedManager].requestQueue 是同一个队列吗？

> ID：11770947
> 
> 赞同：1
> 
> 时间：2012-08-02T04:13:23.363
> 
> 标签：restkit

[RKClient sharedClient].requestQueue 和 [RKObjectManager sharedManager].requestQueue 是同一个队列吗？

```
[[RKObjectManager sharedManager].requestQueue cancelRequestsWithDelegate:self]; 
[[RKClient sharedClient].requestQueue cancelRequestsWithDelegate:self]; 
```

我请求这个

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:final_url usingBlock:
    ^(RKObjectLoader *loader){...}]; 
```

我知道我似乎应该使用第一个，但第二个会做同样的工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:40:39.663

这些并不总是一回事。第一个要创建的 RKObjectManager 成为 sharedManager，第一个 RKClient 对象成为 sharedClient。

在普通应用程序（在应用程序生命周期开始时创建的一个管理器）中，这些是相同的对象是的。

# ruby-on-rails - 您可以为 Globalize3 实现自定义后备吗？

> ID：11770948
> 
> 赞同：0
> 
> 时间：2012-08-02T04:13:24.753
> 
> 标签：ruby-on-rails, internationalization, globalize3

我想为 Globalize3 on Rails 提供一些客户回退。

我知道你可以设置

```
config.i18n.fallbacks = true 
```

并将未翻译的文本回退到其默认语言环境，但我宁愿在回退文本之前或之后有一些表明它未翻译的内容，例如#not tnranslated#。

例如，如果默认语言环境文本是

```
Foo bar 
```

我希望未翻译文本上显示的后备文本是

```
Foo bar #not translated!# 
```

我能想到的唯一方法是在文本周围加上 if else 并检查当前语言环境是否已翻译，这似乎并不优雅，就像这样。

```
<% if article.is_translated?(I18n.locale) %>
  <%= article.title %>
<% else %>
  <%= article.title %>#not translated#
<% end %> 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:12:23.220

如何添加这样的补丁：

```
Globalize::ActiveRecord::Adapter.class_eval do
  def fetch(locale, name)
    record.globalize_fallbacks(locale).each do |fallback|
      value = stash.contains?(fallback, name) ? fetch_stash(fallback, name) : fetch_attribute(fallback, name)

      unless fallbacks_for?(value)
        set_metadata(value, :locale => fallback, :requested_locale => locale)
        return value if (fallback == locale)
        return value + " #not translated#"
      end
    end
    return nil
  end
end 
```

如果不清楚，我更改的两行是这些：

```
 return value if (fallback == locale)
        return value + " #not translated#" 
```

# lua - Lua 的 linting 工具

> ID：11770951
> 
> 赞同：11
> 
> 时间：2012-08-02T04:13:55.120
> 
> 标签：lua, grammar

我最近开始为 Minecraft 的模组 Computer Craft 做一些 Lua。我一直沉迷于 javascript，而我发现最有用的工具是 JS Lint。我的问题是，有没有像 JS Lint 这样的东西可以用来检查我的 Lua 脚本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T04:43:17.360

[Lua-Checker](https://www.ohloh.net/p/lua-checker)将为您完成工作。另一个工具是[Lua Lint](http://lua-users.org/wiki/LuaLint)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-03T04:38:09.487

还有[lua-inspect](http://lua-users.org/wiki/LuaInspect)。我将它集成到[ZeroBrane Studio IDE](http://studio.zerobrane.com)中，并扩展了它报告的潜在问题列表。以下是我的一项测试报告的部分内容：

*   inspect.lua(1): 第一次赋值给全局变量'f'
*   inspect.lua(2): 首次使用未知全局变量 'b'
*   inspect.lua(4)：匿名函数中未使用的参数“to”
*   inspect.lua(8): 未使用的局部变量 'y'; 考虑删除或替换为“_”
*   inspect.lua(11): 局部变量 'y' 掩盖了第 10 行的早期声明
*   inspect.lua(15): 局部函数 'y' 掩盖了第 8 行的早期声明
*   inspect.lua(17): 未使用的本地函数 'test'
*   inspect.lua(17)：函数“test”中未使用的参数“x”
*   inspect.lua(30)：函数“tbl.foo”中未使用的参数“bar”

# c# - Outlook 2010 自动完成流（缓存的联系人）

> ID：11770955
> 
> 赞同：3
> 
> 时间：2012-08-02T04:14:24.423
> 
> 标签：c#, autocomplete, outlook

我目前正在尝试开发一个 Outlook 插件。为了实现非功能性要求，我需要访问存储在 .nk2 文件中的 Outlook 缓存联系人。我参考了这篇[文章](http://blogs.msdn.com/b/officedevdocs/archive/2011/06/13/programmatically-accessing-the-nickname-cache-in-outlook-2010.aspx)，但不知道该怎么做。

编辑（答案）：

```
Microsoft.Office.Interop.Outlook.Application oApp = Globals.ThisAddIn.Application;
        Microsoft.Office.Interop.Outlook.MAPIFolder inboxFolder = oApp.GetNamespace("MAPI").GetDefaultFolder(OlDefaultFolders.olFolderInbox);

        StorageItem storage = inboxFolder.GetStorage("IPM.Configuration.Autocomplete", OlStorageIdentifierType.olIdentifyByMessageClass);

        //IPM.Configuration.Autocomplete

        PropertyAccessor propertyAcc = storage.PropertyAccessor;

        byte[] got = propertyAcc.GetProperty("http://schemas.microsoft.com/mapi/proptag/0x7C090102"); 
```

目前我一直在访问字节数组，当我访问数组时，值与这篇[文章中提到的不同](http://stephengriffin.members.winisp.net/nk2/NK2WithBinaryExample.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:53:02.630

```
Microsoft.Office.Interop.Outlook.Application oApp = Globals.ThisAddIn.Application;
Microsoft.Office.Interop.Outlook.MAPIFolder inboxFolder = oApp.GetNamespace("MAPI").GetDefaultFolder(OlDefaultFolders.olFolderInbox);

StorageItem storage = inboxFolder.GetStorage("IPM.Configuration.Autocomplete", OlStorageIdentifierType.olIdentifyByMessageClass);

PropertyAccessor propertyAcc = storage.PropertyAccessor;

byte[] got = propertyAcc.GetProperty("http://schemas.microsoft.com/mapi/proptag/0x7C090102"); 
```

使用[此处](http://stephengriffin.members.winisp.net/nk2/NK2WithBinaryExample.pdf)的描述访问`byte[]`. 我完成了它工作正常的代码。您只需遍历每个字节并在访问时检查数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:38:04.117

**编辑：**

您可以使用对象而不是字节数组吗（如果这不起作用，请将鼠标悬停`GetProperty`在调试期间，然后查看它期望的返回类型）。例如：

```
Dim objPropAcc As Outlook.PropertyAccessor    
Dim result As Object
objPropAcc = BindingStorageItem.PropertyAccessor
result = objPropAcc.GetProperty("http://schemas.microsoft.com/mapi/id/{00062040-0000-0000-C000-000000000046}/8A48001E").ToString(); 
```

参考：[如何从 Outlook 获取共享点日历​​ URL？](http://social.msdn.microsoft.com/Forums/el-GR/outlookdev/thread/0096a989-a653-4002-a143-231269f11d48)

**老的：**

这是 Microsoft 知识库文章[如何将 .nk2 文件导入 Outlook 2010](http://support.microsoft.com/kb/980542)

> Outlook 2007 和 2010 与昵称缓存交互，也称为“自动完成流”。自动完成流是 Outlook 保留自动完成列表的位置，该列表是在用户撰写电子邮件时显示在“收件人”、“抄送”和“密件抄送”编辑框中的名称列表。[本主题在此处](http://msdn.microsoft.com/en-us/library/ff625288.aspx)描述 Outlook 2007 和 Outlook 2010 如何与自动完成流交互，还讨论文件的二进制格式以及与自动完成流交互的推荐方式。

还可以在这里查看一些示例：http: [//ol2010mapisamples.codeplex.com/](http://ol2010mapisamples.codeplex.com/)，我*认为*这个 codeplex 项目是由[MAPI 专家 Stephen Griffin](http://www.codeplex.com/site/users/view/sgriffin)运行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T17:40:00.993

除了解析原始流之外，您还可以使用[Redemption](http://www.dimastr.com/redemption)及其[RDONicknames](http://www.dimastr.com/redemption/rdonicknames.htm)对象 - 它可以访问文件 (NK2) 和基于存储的昵称。

# php - 这是 MYSQL 还是 PHP 错误？当mysql_fetch_array

> ID：11770956
> 
> 赞同：0
> 
> 时间：2012-08-02T04:14:27.670
> 
> 标签：php, mysql, sql, database

我有这样的错误：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\lab\try.php on line 40 
```

查询是：

```
$graphquery = mysql_query ("SELECT
  $cluster,
  SUM(IF(idx=3,1,0)) AS green,
  SUM(IF(idx=2,1,0)) AS yellow,
  SUM(IF(idx=1,1,0)) AS red
FROM (SELECT
        $cluster
        $xcond
        ,LEAST(999 $acond) idx 
      FROM table
      WHERE date >= '". $startDate ."'
          AND date <= '". $endDate ."'
          AND $regional = '$gregcond'
          AND $latitude IS NOT NULL 
      GROUP BY $cluster, $lac, $mainid
      HAVING $cluster IS NOT NULL
$paraxcond
      ) A
GROUP BY $cluster"); 
```

如果我回显查询，它将是这样的（没有错误，顺便说一句，结果也很完美）：

```
SELECT
  cluster,
  SUM(IF(idx=3,1,0)) AS green,
  SUM(IF(idx=2,1,0)) AS yellow,
  SUM(IF(idx=1,1,0)) AS red
FROM (SELECT
        cluster,
        ROUND(AVG(some_value_Index))    some_value_Index,
        LEAST(999, AVG(some_value_Index) )    idx
      FROM TABLE
      WHERE tanggal >= '2012-07-10'
          AND tanggal <= '2012-08-02'
          AND Regional = 'Regional_Example'
          AND Latitude IS NOT NULL
      GROUP BY cluster, Lac, ID
      HAVING cluster IS NOT NULL
          AND some_value_Index IN(3,2,1)) A
GROUP BY cluster 
```

当我在该脚本上添加 mysql_error 时，听起来像这样：

```
Incorrect parameter count in the call to native function 'LEAST' 
```

以下是我愿意使用 MYSQL 查询的方式：

```
$row = mysql_fetch_array ($graphquery) 
```

当我 ECHO 查询并在 SQLYOG 或 PHPMYADMIN 上尝试时，没有包含错误，所以谁能告诉我错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:25:31.600

您在 LEAST() 函数中遗漏了一个逗号。LEAST 需要 2 个或更多参数。所以查询将是。

```
mysql_query ("SELECT
  $cluster,
  SUM(IF(idx=3,1,0)) AS green,
  SUM(IF(idx=2,1,0)) AS yellow,
  SUM(IF(idx=1,1,0)) AS red
FROM (SELECT
        $cluster
        $xcond
        ,LEAST(999, $acond) idx 
      FROM table
      WHERE date >= '". $startDate ."'
          AND date <= '". $endDate ."'
          AND $regional = '$gregcond'
          AND $latitude IS NOT NULL 
      GROUP BY $cluster, $lac, $mainid
      HAVING $cluster IS NOT NULL
$paraxcond
      ) A
GROUP BY $cluster"); 
```

我`LEAST(999 $acond)`改为`LEAST(999, $acond)`

# objective-c - 如何制作带有图标的内置应用程序？

> ID：11770961
> 
> 赞同：0
> 
> 时间：2012-08-02T04:14:35.173
> 
> 标签：objective-c, macos, cocoa

我正在编写一个 OSX 应用程序并为其添加了一个图标。

在 Xcode 中构建后，我可以在 Products 文件夹下看到带有图标的应用程序，但是当我右键单击->“在 Finder 中显示”时，构建的文件显示为没有图标。我希望构建的文件有一个图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:32:52.937

对于 Mac OS 应用程序，您需要创建一个**.icns**文件并将其包含在**Info.plist 中**，就像任何其他项目一样。

![在此处输入图像描述](../Images/1ccc9640d2a40d097a748d520f012f87.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:33:02.870

只需将 icon.png 更改为 icon.icns

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T15:57:37.650

当我为我的应用程序提交图标图像时，我从不添加 .icns 扩展名。它由编译器自动假定。所以对于图标文件“icon.icns”，只需输入“icon”即可。

# php - 在 jQuery.load 之后操作表单值

> ID：11770963
> 
> 赞同：0
> 
> 时间：2012-08-02T04:14:47.297
> 
> 标签：php, jquery, ajax, forms

各位晚上好，

我目前正在尝试清理我的内联 JS 并将其分解为自己的 .js 文件，并将我的一些代码分解为函数。下面我提供了我的代码，我有一个`div`名为`#main`. 在准备好文档时，我想调用我的`firstLoad`函数。它只是调用`$("#main").load("login.php");` 似乎很简单，但是我的下一步是在提交表单时，我想序列化提交的数据，转为字符串并通过 post 提交。如果我将表单硬编码到`index.php`文件中，出于某种原因，这将起作用，但如果我使用 .load 填写 .load 则不会`#main`。我不知道为什么会这样，我相信如果有人能解释一下这很简单，那就太好了。我的代码如下：

**更新** 经过更多搜索，我遇到了[这个线程](https://stackoverflow.com/questions/11588309/jquery-load-and-trigger-function-after-new-content-loads-just-like-javascri)，上面写着以下内容：

> 事实证明，jquery .load() 函数工作完美，我正在接近这个错误。
> 
> 一旦 .load() 函数成功完成，它就会调用程序员包含的任何“回调”函数，就像任何其他接受回调作为其“参数”之一的 jquery 函数一样。***一旦 .load() 函数出错或成功开始 HTML 替换和加载新内容，它就完成了****， 但***就是这样！然后**，无论加载内容需要多长时间，但您的 .load 调用在此之前已经完成**。因此，期望回调在 .load 内容加载后运行只会让您失望。;)**
> 
>  **我希望其他人可以像我一样从中吸取教训，包括那些认为我认为是这样的人。证明：如 jquery ajax .load 页面中所述，回调在请求完成时执行，而不是在加载完成时执行。尤里卡。哎呀。**

 **这导致了后续问题，在加载内容添加到 DOM 后如何操作表单？这肯定是一个简单的修复，但我是 AJAX 的新手，可以在正确的方向使用微调。我注意到在 login.php 脚本中添加一个文档（就绪）可以正常工作，因为它是与 html 一起添加的，但它似乎不是最干净的做事方式，因为我试图阻止内联 JS。还有什么建议吗？

**/更新**

PHP/HTML

索引.php

```
<?php
    session_start();
    $sessionNumber = session_id();
?>
<!doctype html>
<!-- Conditional comment for mobile ie7 blogs.msdn.com/b/iemobile/ -->
<!--[if IEMobile 7 ]>    <html class="no-js iem7" lang="en"> <![endif]-->
<!--[if (gt IEMobile 7)|!(IEMobile)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
  <meta charset="utf-8">

  <title>MyMobile</title>
  <meta name="description" content="">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width">

  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/h/apple-touch-icon.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/m/apple-touch-icon.png">
  <link rel="apple-touch-icon-precomposed" href="img/l/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="img/l/apple-touch-icon.png">

  <meta http-equiv="cleartype" content="on">

  <link rel="stylesheet" href="css/style.css">

  <script src="js/libs/modernizr-2.0.6.min.js"></script>
</head>

<body>

  <div id="container">
    <header id="header">
        <img alt="Logo" src="img/logo.png" />
        <div id="blackHead">Please sign-in to continue</div>
    </header>
    <div id="main" role="main">

    </div>

    <footer id="footer">
        <div id="greyFoot">
            &copy; 2012 ACME<br />
            <pre id="result"></pre>
        </div>
    </footer>
  </div> <!--! end of #container -->

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script>
  <script type="text/javascript" src="js/firstLoad.js"></script>

</body>
</html> 
```

登录.php

```
<?php session_start();
    $sessionNumber = session_id();
?>

<!-- begin login form -->
<?php if(isset($_SESSION['sessionemail'])){ ?>
    <a href="logout.php" id="logout">Logout</a>
<?php }else { ?>

<form id="logForm" name="login" method="post" action="#">
    <label for="sessionemail">Email</label><br />
    <input id="sessionemail" type="email" name="sessionemail" autofocus="autofocus" autocapitalize="off" maxlength="150" required="true" value="" class="inputText" /><br />
    <label for="password">Password</label>
    <input id="password" type="password" name="password" required="true" value="" class="inputText" /><br />
    <br />
    <input type="hidden" name="sessionid" id="sessionid" value="<?php echo $sessionNumber; ?>" />
    <input type="hidden" name="subtocall" id="subtocall" value="g2.web.login.sub" />
    <input type="submit" value="Sign-In" name="submit" class="submitBox" />

</form><!-- end login form -->
<?php } ?> 
```

最后，我的 JS/Jquery

firstLoad.js

```
//function serializes our object

(function($){
    $.fn.serializeObject = function()
    {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name] !== undefined) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };
})(jQuery);

//firstLoad function runs on document ready
//it loads the login form into the main div and slides
//the container down
(function($){

    $.fn.firstLoad = function(){
        return this.each(function() {
            $("#container").slideUp("slow", function(){
                $("#main").load('./login.php', function(){
                    $("#container").slideDown("slow", function(){
                    });
                });
            });
        });
    };
})(jQuery);

//logParse takes the loginResponse from the server
//changes from string to object, runs a check for authentication then
//manipulates the object dropping excess keys and adding new relevant ones for
//the intial to do list call
(function($){
    $.fn.logParse = function(xml){
        return this.each(function() {
            //parse the JSON login check string from the XML response
            var loginResponse = $(xml).find('string').text();
            //setup isBad variable for error check
            var isBad = false;
            //convert to JSON object from parsed string data
            loginResponse = $.parseJSON(loginResponse);
            //check if the sessionID is correct and user authenticated properly
            if((loginResponse.SESSIONID != "<?php echo $sessionNumber; ?>") || (loginResponse.ISAUTHENTICATED == 0)){isBad = true;}
            //if error flag is raised alert and bounce back to login
            if(isBad){
                alert("Unauthorized connection, please try again.");
            }
            //if there are no errors
            else{
                alert("so far so good!");
                //set up a new JSON object for to do list passback
                //and import the values from the lognResponse object
                //var todoPost =
            }
        });
    };
})(jQuery);

$(document).ready(function(){
    //hide screen for slidedown
     //$("#container").addClass("noShow");
    //allow cross domain scripts
    $.support.cors = true;
    //call firstLoad function to slide in the login prompt
    $("#main").firstLoad(function(){

        //create JSON object to store form input for AJAX POST
        //create submit listener
        $("#logForm").submit(function(){

            alert("inside submit");
            //parse form into formObj for data passing and manipulation
            var formObj = JSON.stringify($("form").serializeObject());
            //output initial formObj into result pane
            $("#result").text(formObj);
            $("#main").text("submitted: " + formObj);

            //AJAX POST call
            $.ajax({
                //type of communication
                type: "POST",
                //action for form
                url: "http://mydomain.com/JSONService.asmx/G2WebRequest",
                //data to be passed
                data: "request="+ formObj,
                //type of data passed in
                contentType: "application/x-www-form-urlencoded; charset=utf-8",
                //enable cross domain
                crossDomain: "true",
                //data type returned from webservice
                dataType: "xml",

                //if login POST was successful
                success: function(xml){
                    alert("post successful");
                    $.logParse(xml);

                },
                //if login POST failed
                error: function(XMLHttpRequest, textStatus, errorThrown){
                    alert(errorThrown);
                }

            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:15:04.900

`JQuery.on()`解决了这个问题。我花了一段时间才弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:42:47.000

`$("#logForm")`您可能在登录表单完全加载到 DOM 之前设置了侦听器。这可以解释为什么登录表单在硬编码时有效。您可以通过以下方式对其进行测试`alert($("#logForm").length);`- 如果未找到，则为零。

如果是这种情况，您需要确保等到登录页面完全加载后再尝试附加侦听器。一旦完成，我可能会`firstLoad`调用一个函数。`load`

祝你好运。**

# orm - Coldfusion ORM：多对多条件属性

> ID：11770964
> 
> 赞同：1
> 
> 时间：2012-08-02T04:15:09.870
> 
> 标签：orm, coldfusion, many-to-many, where-clause

我正在尝试将 where 子句添加到我在其中一个对象中定义的多对多属性。我一定是做错了什么，因为我不断收到休眠错误，说该列不存在。

在模板cfc中：

```
<cfproperty
    name="Settings"
    fieldtype="many-to-many"
    cfc="Setting"
    linktable="settings_templates"
    fkcolumn="templateID"
    inversejoincolumn="settingsId"
    where="deleted='false'"
> 
```

在设置cfc中：

```
<cfproperty
    name="templates"
    fieldtype="many-to-many"
    cfc="Template"
    linktable="settings_templates"
    fkcolumn="settingsId"
    inversejoincolumn="templateID"
    where="deleted='false'"
> 
```

我得到的错误是：

> 08/02 16:06:27 [jrpp-170] 休眠错误 - [Macromedia][SQLServer JDBC 驱动程序][SQLServer]无效的列名“已删除”。

谁能看到我做错了什么？两个表中都有一个已删除的列，但链接表中没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:59:01.897

`where`多对多的属性行为非常奇怪......

> 为了调试这个，激活 Hibernate logging is primordial。请参考这篇文章：[http ://www.rupeshk.org/blog/index.php/2009/07/coldfusion-orm-how-to-log-sql/](http://www.rupeshk.org/blog/index.php/2009/07/coldfusion-orm-how-to-log-sql/)

举个例子：

文章.cfc

```
/**
 * @output false
 * @persistent true
 * @table article
 */
component {

    property name="id" fieldtype="id";
    property name="title";

    property 
        name="tags" singularname="tag" 
        fieldtype="many-to-many" cfc="Tag" linktable="link_article_tag" fkcolumn="articleId" 
        inversejoincolumn="tagId" where=" deleted = 0 "
    ;

} 
```

标记.cfc

```
/**
 * @output false
 * @persistent true
 * @table tag
 */
component {

    property name="id" fieldtype="id";
    property name="name";
    property name="deleted" dbdefault="0";

    property 
        name="articles" singularname="article" 
        fieldtype="many-to-many" cfc="Article" linktable="link_article_tag" fkcolumn="tagId" 
        inversejoincolumn="articleId"
    ;

} 
```

当我尝试列出所有这样的文章时`ormExecuteQuery('from Article')`，请查看休眠日志中附加的内容：

```
select
    tags0_.articleId as articleId6_1_,
    tags0_.tagId as tagId1_,
    tag1_.id as id0_0_,
    tag1_.name as name0_0_,
    tag1_.deleted as deleted0_0_ 
from
    link_article_tag tags0_ 
inner join
    tag tag1_ 
        on tags0_.tagId=tag1_.id 
where
    tags0_.deleted = 0 
```

该死！WTF :| tags0_ == join table ... 你看到什么问题了吗？

为了理解这种行为，我将在 Application.cfc 中激活 HBMXML 生成，`this.ormSettings.saveMapping = true` 文件如下：

```
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                                   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class entity-name="Tag" lazy="true"
        name="cfc:www.app.models.test.Tag" table="tag">
        <id name="id" type="string">
            <column length="255" name="id"/>
        </id>
        <property name="name" type="string">
            <column name="name"/>
        </property>
        <property name="deleted" type="string">
            <column default="0" name="deleted"/>
        </property>
        <bag name="articles" table="link_article_tag">
            <key column="tagId"/>
            <many-to-many class="cfc:www.app.models.test.Article" column="articleId"/>
        </bag>
    </class>
</hibernate-mapping> 
```

我们可以看到：`where`属性是在`bag`level 上设置的，而不是在 to 上`many-to-many`。如果我这样编辑：

```
 <bag name="tags" table="link_article_tag">
        <key column="articleId"/>
        <many-to-many class="cfc:www.app.models.test.Tag" column="tagId" where=" deleted = 0 "/>
    </bag> 
```

生成的 SQL 变为：

```
select
    tags0_.articleId as articleId62_1_,
    tags0_.tagId as tagId1_,
    tag1_.id as id59_0_,
    tag1_.name as name59_0_,
    tag1_.deleted as deleted59_0_ 
from
    link_article_tag tags0_ 
inner join
    tag tag1_ 
        on tags0_.tagId=tag1_.id 
where
    tag1_.deleted = 0 
```

此方法有效，但不利于代码维护和可读性。如果有人有更好的解决方案，我很感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T19:22:36.450

到目前为止，我发现解决此问题的唯一方法是使用`ORMExecuteQuery()`. 在那里我可以直接查询对象并查找诸如此类的内容。就个人而言，我更喜欢在 cfscript 中工作，所以我的代码看起来像这样：

```
public array function getSettings() {
    return ORMExecuteQuery("SELECT s FROM template t JOIN t.settings s WHERE t.id=:id AND s.deleted=:deleted", {
        deleted=false, id=this.getId()
    });
} 
```

*NB – 未测试的示例*

当然，您不必**像**我一样使用参数，您可以使用`deleted=false`，但这取决于您（我个人喜欢使用参数）。

另外，不要忘记`singularName`多对多属性的属性。

在相关说明中，我在使用两个对象的属性时遇到了问题。在这种情况下，您实际上只需要在模板对象上使用它们。这样想：模板需要知道它的设置，但设置不需要知道它们所属的模板——以这种方式在两个对象上使用属性可能会导致错误，在某些情况下。

# java - 如何使用推土机事件

> ID：11770965
> 
> 赞同：0
> 
> 时间：2012-08-02T04:15:13.673
> 
> 标签：java, dozer

我目前是推土机的新手。我可以使用 map K,V 将我的 excel 文件完美地映射到 java 对象。问题是当我将 '$5000' 从 excel 映射到 java double/BigDecimal 时，当然存在转换异常。我可以使用自定义转换器来更正数据，但 id 真正喜欢做的是获取发生错误的“KEY”或“VALUE”并将其显示在页面上。推土机可以吗？我研究了推土机事件，但它没有足够的资源或示例代码供我检查。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:10:38.183

您也无法使用侦听器获取“KEY”和“VALUE”，因为在`ConversionException`抛出 a 之前执行的唯一侦听器方法是*`public void mappingStarted(DozerEvent arg0)`*，它的事件参数 ( `DozerEvent`) 将为您提供源对象的实例，但不是`Map`被映射的元素。

我认为即使使用自定义转换器也无法获取被映射的 Map 元素的详细信息。您最好的选择是创建一个自定义转换器 from `Map`to`Object`并使用**`custom-converter-param`**to 传递您要映射的属性的键。在转换器中，您必须处理值验证和映射。

# c++ - C++ 重载运算符 double * Vec

> ID：11770967
> 
> 赞同：3
> 
> 时间：2012-08-02T04:15:31.977
> 
> 标签：c++, visual-c++, operator-overloading

我正在尝试制作一个 Vec 类来分别表示一组 3 个双精度数 x、y、z。我想做的是使它可以将标量乘以向量并让它乘以每个分量。

当我将向量乘以标量时，我已经能够让它工作，但当我做相反的事情时却不行。例如，以下工作：

```
Vec a = Vec(1.0, 1.0, 1.0);
Vec b = a * 2.0; 
```

但是，每当我尝试将标量乘以向量时，它都不起作用。理想情况下，该命令如下所示：

```
Vec a = Vec(1.0, 1.0, 1.0);
Vec b = 2.0 * a; 
```

这是我到目前为止所做的代码：

```
#include "Vec.h"
#include <limits>
#include <cmath>
#include "constants.h"
#include <iostream>
#include <string>

double Vec::angle( const Vec & vec) {
    return acos((this->dot(vec))/(this->mag() * mag()));
}

double Vec::angle_d(const Vec & vec) {
    return (angle(vec) * _PI / 180.0);
}

double Vec::angle_r(const Vec & vec)    {
    return this->angle(vec);
}

Vec Vec::cross( const Vec& vec) {
    return Vec( (y * vec.z - z * vec.y),
            (z * vec.x - x * vec.z),
            (x * vec.y - y * vec.x));
}

double Vec::dot( const Vec & vec)   {
    return (x * vec.x + y * vec.y + z * vec.z);
}

double Vec::mag()   {
    return std::sqrt(x*x + y*y + z*z);
}

Vec Vec::operator=(const Vec& rhs)  {
    return Vec(rhs);
}

Vec Vec::operator*(const Vec& rhs)  {
    return Vec( x * rhs.x, y * rhs.y, z * rhs.z);
}

Vec Vec::operator*(const double rhs)    {
    return Vec(rhs * x, rhs * y, rhs * z);
}

Vec::Vec()  : 
    x(std::numeric_limits<double>::signaling_NaN()),
    y(std::numeric_limits<double>::signaling_NaN()),
    z(std::numeric_limits<double>::signaling_NaN()) {   }

Vec::Vec( double c) :
    x(c), y(c), z(c)    {}

Vec::Vec(const Vec & vec)   : 
    x(vec.x), y(vec.y), z(vec.z)    {   }

Vec::Vec(double a, double b, double c)  
    : x(a), y(b), z(c)  {   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T04:26:22.940

您需要一个带有两个参数的全局运算符：一个 double 和一个 Vec，并且可以通过调用您已经列出的运算符轻松实现

```
inline Vec operator*(double s, const Vec& v) {
    return v * s;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T04:22:02.787

尝试创建新的全局运算符：

```
Vec operator*(int i, const Vec& rhs) {
    return Vec(i * rhs.x, i * rhs.y, i * rhs.z);
} 
```

# ruby - 使用 watir-webdriver 遍历 URL 数组时跳过慢速网站

> ID：11770968
> 
> 赞同：0
> 
> 时间：2012-08-02T04:15:44.580
> 
> 标签：ruby, google-chrome, selenium, watir, watir-webdriver

我正在尝试使用 watir-webdriver 在 Chrome 中循环浏览一系列网站，但我总是在某些网站上遇到错误。最近，我在[http://adage.com](http://adage.com)遇到了这个问题。循环将完美执行，直到到达[http://adage.com](http://adage.com)，然后它将挂起，直到显示以下错误：

```
/Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill': Timeout::Error (Timeout::Error)
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_request'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:1293:in `request'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:1286:in `block in request'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:745:in `start'
from /Users/default/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:1284:in `request'
from /Users/default/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:82:in `response_for'
from /Users/default/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:38:in `request'
from /Users/default/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
from /Users/default/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
from /Users/default/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute'
from /Users/default/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:536:in `getActiveElement'
from /Users/default/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/target_locator.rb:60:in `active_element'
from /Users/default/.rvm/gems/ruby-1.9.3-p125/gems/watir-webdriver-0.6.1/lib/watir-webdriver/browser.rb:136:in `send_keys'
from /Users/default/Dropbox/beta_scripts/loop_test.rb:16:in `rescue in <main>'
from /Users/default/Dropbox/beta_scripts/loop_test.rb:11:in `<main>' 
```

我不知道如何避免这种情况。我尝试设置超时，甚至`ESC`在救援期间发送密钥以阻止 Chrome 加载页面，但没有任何成功。最终，我希望能够*可靠地*连续加载 500 多个网站，但考虑到其中一个网站可能会挂起，这似乎是不可能的。**有什么方法可以阻止加载缓慢的页面并移动到数组中的下一个元素？**

以下是我的代码的缩短版本，用于隔离问题：

```
#!/usr/bin/env ruby

require 'watir-webdriver'

b = Watir::Browser.new :chrome

sites = ["twitter.com", "cars.com", "autotrader.com", "rolex.com", "newyorker.com", "adage.com", "theatlantic.com", "pcmag.com"]

sites.each do |uri|
  begin
    Timeout::timeout(10) do
      b.goto uri
    end
  rescue Timeout::Error => e_time
    sleep 5
    b.send_keys :escape
    p "#{uri} is taking forever to load (#{e_time})"
  rescue Exception => e_exception
    p e_exception
  end
end

b.close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:28:04.380

好吧，我能理解你的沮丧伙伴，因为我在处理 selenium webdriver 时遇到了同样的情况。这是您需要做的，以 100% 确保您的脚本将完美无缺且健壮地运行到您的 500 多个网站的最后。

```
 sites.each do |uri|    
!30.times { if ((b.goto uri)rescue false)then break else sleep 1; end }     
    end 
```

上面的代码将尝试访问每个网站最多 30 秒，然后移动到下一个网站。

# ruby-on-rails - 为什么在 rails 3.1 及更高版本中生成三个资产目录

> ID：11770970
> 
> 赞同：2
> 
> 时间：2012-08-02T04:16:21.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, assets

谁能解释以下目录的用途是什么？

*   `app/assets/`
*   `lib/assets/`
*   `vendor/assets/`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T05:08:13.880

这些目录都是*Rails 的 Asset Pipeline*的一部分。

从概念上讲，该`app/assets`目录用于存放您的应用程序资产（例如，您的应用程序的样式表和图像）。`lib/assets`适用于您编写的所有代码，这些代码独立于您的 Rails 应用程序（可能是 JavaScript 库）。`vendor/assets`旨在容纳所有第三方库（例如 jQuery）。

默认情况下，所有这些路径都包含在资产管道中。这意味着可以使用 sprocket 将它们的内容包含到其他文件中，自动连接到一个文件（javascript 或 css）中，从而减少请求数量，从而减少加载时间。资产管道还可以编译您的咖啡脚本并缩小您的 javascript 以用于生产。

# testing - 测试表单提交的最佳方法

> ID：11770971
> 
> 赞同：0
> 
> 时间：2012-08-02T04:16:40.600
> 
> 标签：testing, automated-tests

我有一个发布到外部 url 的表单

```
<form method="post" action="http://api.domain.com/AddAnswer"> 
```

我正在使用 MongoHQ 来“转储”该表单的结果

我想做一个简单的测试来提交 100 个表格，看看我是否在 MongoHQ 中得到 100 个答案

是否有任何可用的服务，或者我需要创建自己的自动提交？

**[Blitz.io](http://Blitz.io)**仅适用于 GET，我也认为测试浏览器也很好，因为 Chrome 总是收到 Origin 错误，因为表单主机和表单操作位于不同的服务器中（即使表单提交正确）。

如果在这种情况下没有可用的服务，您将如何处理？

我正在考虑创建一个 HTML 页面并托管在某个地方，然后打开一个 Windows/Web 页面，我会点击该 url 100 次。

我可以很容易地添加

```
$(function() {

    var dt = new Date();

    // set date so we can have different posts data
    $("#dt").val(dt.getTime());

    // auto submit
    $("form").submit();
}); 
```

到静态页面...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:00:55.247

如果我认为您的想法正确，您希望执行 100 个发布请求，然后验证响应是否正确。如果我是对的，我可以建议你[http://www.soapui.org/](http://www.soapui.org/)。按照他们提供的教程创建这种测试用例非常简单。基本上，在您的情况下，您只需要开发一个执行请求并验证响应内容的测试（如果仅等待响应代码 200 对您来说还不够的话）。然后你需要开发负载测试，调用你的验证测试N次。就这样。结果，您将拥有验证您有 N 个正确响应的测试用例。

# c# - 从 cmdlet 中调用 Set-Location

> ID：11770973
> 
> 赞同：2
> 
> 时间：2012-08-02T04:16:42.140
> 
> 标签：c#, powershell, cmdlets

我正在为 PowerShell 创建一个 cmdlet，我需要能够从 cmdlet 中调用`Set-Location`(aka `cd`)。我会这样做

```
var setLocation = new Microsoft.PowerShell.Commands.SetLocationCommand();
setLocation.Path = path;
setLocation.Invoke(); 
```

除了它给了我一个错误，上面写着`You cannot invoke a cmdlet that derrives from PSCmdlet`。我想使用`Set-Location`，但我很乐意只更改 shell 的目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T03:00:56.487

我能找到的最佳答案是用于`InvokeScript`更改目录：

```
InvokeCommand.InvokeScript(string.Format("Set-Location {0}", fullPath)); 
```

可能有一种“更多的 C#”方法可以做到这一点，但我找不到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-02T11:50:37.280

这个问题有点老，但这里有一个更好的解决方案：

[PathIntrinsics](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.pathintrinsics)类包含方法[SetLocation](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.pathintrinsics.setlocation)。

要操作当前会话的路径，您可以使用[Path](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.sessionstate.path)属性通过[SessionState访问](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.sessionstate)[PathIntrinsics 。](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.pathintrinsics)

长话短说：

```
SessionState.Path.SetLocation("C:/some/path"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T12:52:57.280

您可以尝试从 CMDLET 而不是 PSCMDLET 派生。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T12:26:44.933

只需在脚本中使用 Set-Location 即可完成工作。

例如：

```
# Script.ps1
CD ~
Get-Location
Set-Location c:\Windows
Get-location 
```

脚本完成后，再次尝试 Get-Location！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-03T04:51:43.530

如果我在脚本中使用 Set-Location，我通常喜欢先使用 Push-Location 来存储当前位置，然后在脚本结束时使用 Pop-Location 将用户返回到他们所在的位置。

```
Push-Location $PWD
Set-Location $somewhere
#script body
Pop-Location 
```

当然，除非脚本的目的是为用户更改目录。

# objective-c - Interface Builder 上设置的 Tint Color 生成警告

> ID：11770976
> 
> 赞同：1
> 
> 时间：2012-08-02T04:17:13.817
> 
> 标签：objective-c, ios, xcode, ios5, xcode4.3

我在 XIB 文件中有一个带有 2 个段的分段控件。当我将 Tint 属性设置为 Black 时，它会给我一条警告消息：***“属性不可用：在 3.0 之前的 iOS 版本的界面生成器中设置的色调颜色”***。
我设置了色调颜色，因为我需要一个黑色分段控件。如何删除此警告。我只想在 5.0 之前的 iOS 版本上运行我的项目。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:25:27.013

**您可以通过在Targets**下的**Build Settings**中搜索“Interface Builder”来为 Interface Builder 设置警告：

 **![在此处输入图像描述](../Images/91f24c5817f5cd8626093272053446e2.png)

在 Interface Builder 中，设置**Document Versioning** Deployment：

![在此处输入图像描述](../Images/7e2cde6d18f78fad6da26b8dca8decd6.png)**

# ruby-on-rails - 如果为空则返回默认值

> ID：11770977
> 
> 赞同：0
> 
> 时间：2012-08-02T04:17:26.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter

如果客户的推特句柄是空白的，我希望它默认为另一个推特句柄。对于此示例，假设默认句柄是 @google。

```
twitter_handle = customer.twitter_name 
#add @ sign if user name doesn't have it
twitter_handle = '@' + customer.twitter_name.gsub.to_s('@', '') unless twitter_handle.blank?

tape_name = name.truncate(27)

"I just bought #{twitter_handle} product}" 
```

我试过了：

```
twitter_handle = customer.twitter_name || "@google"
twitter_handle = '@' + customer.twitter_name.to_s.gsub('@', '') 
```

我知道错误与这一行有关，因为如果我将其注释掉，它就会起作用：

```
twitter_handle = '@' + customer.twitter_name.to_s.gsub('@', '') 
```

它切断了整个用户句柄，只返回空白。

```
tape_name = name.truncate(27)

"I just bought #{twitter_handle} product}" 
```

但我收到此错误：

```
Sorry, that page does not exist:
 Twitter::Error::NotFound in ProductsController#download 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:52:30.350

试一试：

# 编码

```
twitter_handle = customer.twitter_name ||= '@google'
twitter_handle[/^@/] ? nil : twitter_handle = "@#{twitter_handle}" 
```

# 没有'@'的测试

```
1.9.3p194 :001 > twitter_name = 'bjernigan52' #Set without '@' sign
 => "bjernigan52" 
1.9.3p194 :002 > twitter_handle = twitter_name ||= '@google'
 => "bjernigan52" 
1.9.3p194 :003 > twitter_handle[/^@/] ? nil : twitter_handle = "@#{twitter_handle}"
 => "@bjernigan52" 
1.9.3p194 :004 > puts twitter_handle
@bjernigan52
 => nil 
```

# 带有“@”的测试

```
1.9.3p194 :001 > twitter_name = '@bjernigan52'  #Set with '@' sign                                   
 => "@bjernigan52" 
1.9.3p194 :002 > twitter_handle = twitter_name ||= '@google'                       
 => "@bjernigan52" 
1.9.3p194 :003 > twitter_handle[/^@/] ? nil : twitter_handle = "@#{twitter_handle}"
 => nil 
1.9.3p194 :004 > puts twitter_handle                                               
@bjernigan52
 => nil 
```

# objective-c - 无法在 initWithCoder 内的 IBOutlets 上调用方法：方法

> ID：11770979
> 
> 赞同：1
> 
> 时间：2012-08-02T04:17:44.203
> 
> 标签：objective-c, iboutlet

我有一个设置`keyboard`为其输入视图的类

```
NSArray *bundle = [[NSBundle mainBundle] loadNibNamed:@"FormulaKeyboard" owner:self options:nil];

for (id object in bundle) {
    if ([object isKindOfClass:[FormulaKeyboard class]])
        keyboard = (FormulaKeyboard *)object;
} 
```

在键盘类（NSObject 的子类）的 init 方法中，我尝试设置使用 nib 创建的几个 UIButton 的标题文本。

```
- (id)initWithCoder:(NSCoder *)coder {
    self = [super initWithCoder:coder];
    if (self) {

    NSArray *keyboardElements =  [delegate provideKeyElements];
    [element1 setTitle:[keyboardElements objectAtIndex:0]  forState: UIControlStateNormal];
    [element2 setTitle:[keyboardElements objectAtIndex:1]  forState: UIControlStateNormal]; 
    [element3 setTitle:[keyboardElements objectAtIndex:2]  forState: UIControlStateNormal]; 
    [element4 setTitle:[keyboardElements objectAtIndex:3]  forState: UIControlStateNormal]; 
    [element5 setTitle:[keyboardElements objectAtIndex:4]  forState: UIControlStateNormal]; 

    }
    return self;
} 
```

但是，按钮不会收到消息。当我将代码实现到另一个方法中时，setTitle: 方法工作正常，但我希望在创建键盘后立即调用这些方法。我已经使用 NSLog 验证了调用了 initWithCoder: 方法。我也尝试将代码放入 awakeFromNib 方法中，但这也不起作用。

# php - 在javascript中对复选框值进行排序

> ID：11770980
> 
> 赞同：0
> 
> 时间：2012-08-02T04:18:08.537
> 
> 标签：php, javascript, jquery, forms

我需要在 javascript 中使用逗号对选中复选框的所有值进行排序，这样我就可以将其发送到发送 php 脚本的表单。

的JavaScript：

```
var services = [];
$('#field-services:checked').each(function() {
services.push($(this).val());
});

$.post(rootUrl+'/wp-admin/admin-ajax.php', { action:"two2_send_contact_form", services:services } 
```

我在 div 中有复选框，id`field-services` 是发送电子邮件的 php

```
$services = $_POST["services"];
$subject = "BLAH BLAH";
    $body = "Services: $services, \n\n$message"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:21:33.767

`$('#field-services:checked')`当然不会工作，因为 id 必须是唯一的，所以必须只有一个`#field-services`检查。你可能想做：

```
var services = []
$('#field-services input:checked').each(function(){
  services.push(this.value)
}) 
```

# php - superfish 菜单冲突联系页面 - silverstripe

> ID：11770987
> 
> 赞同：0
> 
> 时间：2012-08-02T04:19:18.350
> 
> 标签：php, javascript, jquery, content-management-system, silverstripe

我正在为我的网站使用超级鱼菜单（使用 Silverstripe），请参阅[此处的超级鱼菜单示例](http://users.tpg.com.au/j_birch/plugins/superfish/#sample5)。

该网站一切正常，但联系页面，似乎每次我输入 $contactUsForm 时，联系页面都会首先尝试加载联系表格，超级鱼菜单中的向下箭头消失了几秒钟，菜单移向左。然后出现箭头，并且在表单加载后菜单再次移动到正常位置。

其他每一页都很好。谁能给我一些提示，为什么会发生这种情况，我该如何解决？谢谢。

这是我的 ContactPage.php，如果需要，我可以在此处添加更多代码。

```
static $db = array(

    "Phone"     => "Varchar",

    "Email"     => "Varchar",

    "Address"   => "Text",

    "Thanks"    => "Text",

    "Long"      => "Int",

    "Lat"       => "Int",

    //added for google map 04012012

     "EmbedCode" => "HTMLText" 

);

static $has_one = array(

);

function getCMSFields() {

    $fields = parent::getCMSFields();

    $fields->addFieldToTab('Root.Content.ContactDetails', new TextField('Phone'));

    $fields->addFieldToTab('Root.Content.ContactDetails', new TextField('Email'));

    $fields->addFieldToTab('Root.Content.ContactDetails', new TextareaField('Address','Address',8,3));

    $fields->addFieldToTab('Root.Content.ContactDetails', new TextareaField('Thanks','Thank You Message',8,3));     

    #$fields->addFieldToTab('Root.Content.Main', new TextField('Long'));

    #$fields->addFieldToTab('Root.Content.Main', new TextField('Lat'));

    //added for google map 04012012

     $fields->addFieldToTab('Root.Content.ContactDetails', new TextareaField('EmbedCode', 'Embed Code')); 

    return $fields;

     }

     function HasSentContact() {

        return (isset( $_GET['sent'] ) ) ? true : false;

     }

   function onBeforeWrite() {

$this->EmbedCode = str_replace("></iframe>", "> </iframe>", $this->EmbedCode);

 parent::onBeforeWrite();

}

}

 class ContactPage_Controller extends Page_Controller {

public function init() {

    parent::init();

    Requirements::themedCSS('Contact'); 

}

function contactUsForm() {

            $recaptchaField = new RecaptchaField('MyCaptcha');
    $recaptchaField->jsOptions = array('theme' => 'white'); // optional it changes the look added 07122011

    // Create fields

    $fields = new FieldSet(

    new TextField('Name'),

    new TextField('Surname'),

    new TextField('Email', 'Email Address'),

    new TextField('Phone', 'Phone Number'),

    new TextareaField('Message', 'Enquiry'),

    new LabelField('MyCaptcha', 'Please enter the characters below'),
    $recaptchaField

    //new PhpCaptchaField(),

    //new HeaderField ("Please Enter What You See Here, it's not case sensitive", "6")

    );

    // Create actions

    $actions = new FieldSet(

    new FormAction('doContactUs', 'Submit')

    );

    //valididate fields

    $validator = new RequiredFields('Name', 'Email', 'Message');

    return new Form($this, 'contactUsForm', $fields, $actions, $validator);

}

function doContactUs($data, $form) {

    $from = $data['Email'];

    $to = $this->Email;

    $subject = 'Contact Us Form';

    $body = $data['Name'].' '.$data['Surname'].'\n'.$data['Email'].'\n'.$data['Phone'].'\n\n'.$data['Message'];

    $email = new Email($from, $to, $subject, $body);

    $email->sendPlain();

    //Director::redirectBack();

    Director::redirect($this->Link().'?sent=1');

}

}
?> 
```

ContactPage.ss:

```
 <div id="intro">

                    <h1 id="h1_home">$Title</h1>

<% if HasSentContact %>
    <div id="Form">
    <h2>$Thanks</h2>
    </div>
<% else %>
    $Content
    <div id="Form">
    $contactUsForm
    </div>    
<% end_if %>

    <div id="Details">
        <h3>GOOGLE MAP</h3>
        <!--added 05012011, added divs-->
        <div id="googlemap">    {$EmbedCode} </div>

        <div id="contactinfo">
        <h3>Contact Info</h3>
        <table class="alignRight">
            <tr>
                <td class="width200 alignLeft">Phone</td>
                <td>{$Phone}</td>
            </tr>
            <tr>
                <td class="alignLeft">Email</td>
                <td><a href="mailto:{$Email}">{$Email}</a></td>
            </tr>
            <tr>
                <td class="alignLeft">Address</td>
                <td>{$Address}</td>
            </tr>
        </table>
        </div><!-- contactinfo -->
    </div><!--Details-->

     $Form 
     </div><!--intro--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:56:32.597

听起来像是 JavaScript 冲突问题。SilverStripe 2.4 包括一些 Prototype JS 以及一些 jQuery，用于在前端呈现表单。他们在一起玩得不好。

尝试将您的 Superfish JS（您的代码，而不是您从他们的网站下载的文件）包装在一个闭包中，如下所示：

```
(function($) {
    $(document).ready(function(){
        // your code here.
    })
})(jQuery); 
```

在 SS 文档中阅读更多信息 - [http://doc.silverstripe.org/framework/en/topics/javascript/](http://doc.silverstripe.org/framework/en/topics/javascript/)

另一个提示 - 使用 JS 调试器。在 Chrome 中捆绑了很棒的开发工具，而 FireFox 有 FireBug 插件。使用 JS 控制台查看是否有任何 JavaScript 错误。

# python - QGraphicsRectItem.paint 中的透明度在项目移动时留下痕迹

> ID：11770988
> 
> 赞同：0
> 
> 时间：2012-08-02T04:19:19.827
> 
> 标签：python, user-interface, graphics, qt4, pyqt4

我正在使用 PyQt4 开发节点编辑器，并整理了 QGraphicsView 和 QGraphicsItem 的基础知识，但在透明度方面遇到了问题。

我的代码在下面，它看起来与我找到的示例相似，但是当我移动节点时，根据链接的图像留下了痕迹。

我是否错过了一些需要设置的标志或某处的某种更新调用？

[链接到输出示例](http://imagebin.org/222984)

```
def paint(self, painter, option, widget=None):

    painter.setPen(Node.shadow_color)
    painter.setBrush(Node.shadow_color)
    painter.setOpacity(0.3)
    shadow_rect = self.rect()
    shadow_rect.translate(Node.shadow_offset, Node.shadow_offset)
    painter.drawRoundedRect(shadow_rect, Node.corner_radius, Node.corner_radius)

    if self.check_state(Node.SELECTED):
        painter.setPen(Node.outline_selected_colour)
        painter.setBrush(Node.background_selected_colour)
    else:
        painter.setPen(Node.outline_colour)
        painter.setBrush(Node.background_colour)

    if self.check_state(Node.HOVER):
        painter.setPen(Node.outline_hover_colour)
        painter.setBrush(Node.background_hover_colour)

    painter.setOpacity(1.0)
    painter.drawRoundedRect(self.rect(), Node.corner_radius, Node.corner_radius) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:49:59.727

发生的事情是 QGraphicsView 仅更新由节点的 QRect 区域定义的边界区域。

当您从前一个位置拖动节点时，您的阴影实际上是在项目的边界矩形（由 QGraphicsRectItem.rect() 定义）之外绘制的，因此视图不会重绘该空间 - 这就是您看到的原因小径。

您可以尝试将 QGraphicsView.viewportUpdateMode 设置为 FullViewportUpdate 之类的东西，看看它是否可以解决您的问题（但它会带来性能损失），但我建议您将节点的矩形视为边界绘图区域 - 并偏移实际大小您的节点及其阴影在该空间内绘制与在该空间外绘制边框和阴影。

如果您想查看（或使用）它作为 PyQt 扩展的开源 ProjexUI 库的一部分，我有一个节点小部件。它位于：

[http://dev.projexsoftware.com/projects/projexui](http://dev.projexsoftware.com/projects/projexui)

该类是 projexui.widgets.xnodewidget，我将它用于许多不同的事情，但 Orbiter 应用程序使用它。

# c# - 在 xaml 中使用枚举时，visualstudio2010/wpf 设计器中的错误

> ID：11770990
> 
> 赞同：0
> 
> 时间：2012-08-02T04:19:41.830
> 
> 标签：c#, wpf, visual-studio-2010, xaml

所以我暂时完全忽略了这个问题，只是没有使用设计器，但如果我只是想在编译之前快速查看一些边距，那就越来越令人沮丧了。

我从设计师那里得到的错误是`"Type 'local:MainWindow+TireSeasonFilterEnum' was not found."`

而对应的xaml是

```
<Style...
<Style.Triggers...

<DataTrigger Binding="{Binding Path=TireSeasonFilter}" 
             Value="{x:Static local:MainWindow+TireSeasonFilterEnum.All}">
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="TextDecorations" Value="Underline" />
</DataTrigger> 
```

枚举只是位于窗口代码隐藏中的公共枚举。

设计者拒绝加载，直到错误修复，但没有错误。代码完全按照它应该的方式编译和运行。

有什么方法可以修改我的代码以达到相同的结果，但避免错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:20:55.967

WPF 设计器不支持嵌套类。这是一个已知的错误。

我建议您将枚举移到父类之外。

# javascript - 如何进行 JavaScript 原型继承（原型链）

> ID：11770992
> 
> 赞同：9
> 
> 时间：2012-08-02T04:19:58.647
> 
> 标签：javascript, inheritance, prototype, chain

这是 JavaScript 大师的问题。我正在尝试更优雅地使用 JavaScript 原型模型。这是我的实用程序代码（它提供了真正的原型链和使用 instanceof 运算符的正确工作）：

```
function Class(conf) {
  var init = conf.init || function () {};
  delete conf.init;

  var parent = conf.parent || function () {};
  delete conf.parent;

  var F = function () {};
  F.prototype = parent.prototype;
  var f = new F();
  for (var fn in conf) f[fn] = conf[fn];
  init.prototype = f;

  return init;
}; 
```

它允许我做这样的事情：

```
var Class_1 = new Class({
  init: function (msg) { // constructor
    this.msg = msg;
  },

  method_1: function () {
    alert(this.msg + ' in Class_1::method_1');
  },

  method_2: function () {
    alert(this.msg + ' in Class_1::method_2');
  }
});

var Class_2 = new Class({
  parent: Class_1,

  init: function (msg) { // constructor
    this.msg = msg;
  },

  // method_1 will be taken from Class_1

  method_2: function () { // this method will overwrite the original one
    alert(this.msg + ' in Class_2::method_2');
  },

  method_3: function () { // just new method
    alert(this.msg + ' in Class_2::method_3');
  }
});

var c1 = new Class_1('msg');
c1.method_1(); // msg in Class_1::method_1
c1.method_2(); // msg in Class_1::method_2

var c2 = new Class_2('msg');
c2.method_1(); // msg in Class_1::method_1
c2.method_2(); // msg in Class_2::method_2
c2.method_3(); // msg in Class_2::method_3

alert('c1 < Class_1 - ' + (c1 instanceof Class_1 ? 'true' : 'false')); // true
alert('c1 < Class_2 - ' + (c1 instanceof Class_2 ? 'true' : 'false')); // false

alert('c2 < Class_1 - ' + (c2 instanceof Class_1 ? 'true' : 'false')); // true
alert('c2 < Class_2 - ' + (c2 instanceof Class_2 ? 'true' : 'false')); // true 
```

***我的问题是：有没有更简单的方法来做到这一点？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T11:26:54.647

经过一些研究，我得出结论，没有更简单的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:07:56.953

是的，有更好的方法来做到这一点。

```
var call = Function.prototype.call;

var classes = createStorage(),
    namespaces = createStorage(),
    instances = createStorage(createStorage);

function createStorage(creator){
  var storage = new WeakMap;
  creator = typeof creator === 'function' ? creator : Object.create.bind(null, null, {});
  return function store(o, v){
    if (v) {
      storage.set(o, v);
    } else {
      v = storage.get(o);
      if (!v) {
        storage.set(o, v = creator(o));
      }
    }
    return v;
  };
}

function Type(){
  var self = function(){}
  self.__proto__ = Type.prototype;
  return self;
}

Type.prototype = Object.create(Function, {
  constructor: { value: Type,
                 writable: true,
                 configurable: true },
  subclass: { value: function subclass(scope){ return new Class(this, scope) },
              configurable: true,
              writable: true }
});

function Class(Super, scope){
  if (!scope) {
    scope = Super;
    Super = new Type;
  }

  if (typeof Super !== 'function') {
    throw new TypeError('Superconstructor must be a function');
  } else if (typeof scope !== 'function') {
    throw new TypeError('A scope function was not provided');
  }

  this.super = Super;
  this.scope = scope;

  return this.instantiate();
}

Class.unwrap = function unwrap(Ctor){
  return classes(Ctor);
};

Class.prototype.instantiate = function instantiate(){
  function super_(){
    var name = super_.caller === Ctor ? 'constructor' : super_.caller.name;
    var method = Super.prototype[name];

    if (typeof method !== 'function') {
      throw new Error('Attempted to call non-existent supermethod');
    }

    return call.apply(method, arguments);
  }

  var Super = this.super,
      namespace = namespaces(Super),
      private = instances(namespace)

  var Ctor = this.scope.call(namespace, private, super_);
  Ctor.__proto__ = Super;
  Ctor.prototype.__proto__ = Super.prototype;
  namespaces(Ctor, namespace);
  classes(Ctor, this);
  return Ctor;
} 
```

示例用法：

```
var Primary = new Class(function(_, super_){
  var namespace = this;
  namespace.instances = 0;

  function Primary(name, secret){
    this.name = name;
    _(this).secret = secret;
    namespace.instances++;
  }

  Primary.prototype.logSecret = function logSecret(label){
    label = label || 'secret';
    console.log(label + ': ' + _(this).secret);
  }

  return Primary;
});

var Derived = Primary.subclass(function(_, super_){

  function Derived(name, secret, size){
    super_(this, name, secret);
    this.size = size;
  }

  Derived.prototype.logSecret = function logSecret(){
    super_(this, 'derived secret');
  }

  Derived.prototype.exposeSecret = function exposeSecret(){
    return _(this).secret;
  }

  return Derived;
});

var Bob = new Derived('Bob', 'is dumb', 20);
Bob.logSecret();
console.log(Bob);
console.log(Bob.exposeSecret()); 
```

# ios - 将 OAUTH2 令牌从 iOS 传递到 Rails

> ID：11770995
> 
> 赞同：2
> 
> 时间：2012-08-02T04:20:35.257
> 
> 标签：ios, ruby-on-rails, oauth-2.0

我有一个实施了 Google OAUTH2 并且可以正常工作的 Rails 网站。

我们正在开发一个 iOS 应用程序，它将使用 API 与我的 Web 服务器通信。某些 API 需要对用户进行身份验证。这个想法是，iOS 应用程序在设备上使用 OAUTH2 对用户进行身份验证，然后通过 SSL 将令牌从设备发送到 Web 作为身份验证。我需要网站来验证令牌。

在 Google API 控制台中，我添加了 iPhone 设备的客户端 ID，并通过以下方式获取了访问令牌：

```
https://accounts.google.com/o/oauth2/auth?
scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&
redirect_uri=urn:ietf:wg:oauth:2.0:oob&
response_type=code&
client_id={my client id} 
```

然后，我将令牌传递给我的站点。在我的网站上，我通过以下方式验证令牌：

```
google = OmniAuth::Strategies::GoogleOauth2.new(ENV['GOOGLE_API_KEY'],['GOOGLE_CLIENT_API_SECRET'])
client = OAuth2::Client.new(ENV['GOOGLE_API_KEY'],['GOOGLE_CLIENT_API_SECRET'], google.options.client_options)
access_token = OAuth2::AccessToken.new(client, params[:token], google.options.access_token_options || {})
google.access_token = access_token
google.auth_hash 
```

当我尝试时`auth_hash`，返回以下错误：

```
 {
  "error": {
   "errors": [
    {
     "domain": "global",
     "reason": "authError",
     "message": "Invalid Credentials",
     "locationType": "header",
     "location": "Authorization"
    }
   ],
   "code": 401,
   "message": "Invalid Credentials"
  }
 } 
```

从这里开始，我不知道为什么我指定了无效的凭据。

`ENV['GOOGLE_API_KEY']`指向与网站相同的 API 密钥，并`ENV['GOOGLE_CLIENT_API_SECRET']`指向 iOS 客户端的密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:32:06.087

我想，我上面使用的 URL 给了我一个`access token`. 实际上，它返回给我一个`authorization code`（然后可以用来获取一个`access token`）。

解决方案是将 , 换成`authorization code`,`access token`然后我可以传递令牌并使用它。

`authorization code`在 Google 网站上，an和 an之间的区别`access token`有些模糊，但您可以在此处阅读有关如何交换它们的信息： [https ://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)