# StackOverflow 问答 11040000-11040999

# firefox - Firefox12：多个 css 类似乎对我不起作用

> ID：11040001
> 
> 赞同：2
> 
> 时间：2012-06-14T19:26:20.073
> 
> 标签：firefox, css

我的网页上有几个不同颜色的按钮。我有一个按钮形状的类，然后是一些给它们颜色的类。

```
.button    {
  font-family:"Helvetica Neue W01 75 Bold", Helvetica, Arial, Sans-serif;    
  text-decoration: none;
  white-space: nowrap;
  color: #333;
  padding: 13px 15px;
  display: inline-block;
  font-size: 1em;
  font-weight: bold;
  text-align: center;
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 0 1px 0 rgba(0,0,0,0.1);
}   

a.button {
  color: #333;
}

.black.button    {
  background-color: #dedede;
  background: -webkit-gradient(linear, left bottom, left top, color-stop(0.1, #D3D3D3), color-stop(0.45, #EFEFEF), color-stop(0.90, #D3D3D3));
  background: -moz-linear-gradient((linear, left bottom, left top, color-stop(0.1, #D3D3D3), color-stop(0.45, #EFEFEF), color-stop(0.90, #D3D3D3));
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=##EFEFEF, endColorStr=##D3D3D3);
  -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#EFEFEF, endColorstr=#D3D3D3)";
  -webkit-appearance: push-button;
}

.black.button:hover    {
  background: #E2E2E2;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#E2E2E2, endColorStr=#E2E2E2);
  -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#E2E2E2, endColorstr=#E2E2E2)";
}

.orange.button    {
  background-color:  #ffaa44;
  background: -webkit-gradient(linear,left bottom, left top, color-stop(0.22, rgb(255,144,9)), color-stop(0.81, rgb(255,170,68)));
  background: -moz-linear-gradient(center bottom, rgb(255,144,9) 22%, rgb(255,170,68) 81%);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#ffaa44, endColorStr=#ff9009);
  -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffaa44, endColorstr=#ff9009)";
}   

.orange.button:hover    {
  background: #ff9009;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=#ff9009, endColorStr=#ff9009);
  -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff9009, endColorstr=#ff9009)";
} 
```

我像这样使用它们：

```
<a class="orange button" href="#">Click Me</a> 
```

这适用于 Chrome 和 Safari，但不适用于 Firefox12（和 IE）。我所看到的只是一个带有“ClickMe”的白框（因此可能应用了.button，但没有应用.orange）

根据我的阅读，Firefox 支持此功能。但我无法弄清楚我的样式表有什么问题。

当我执行“检查元素”时，Firefox 将类显示为 a.orange.button，但在“样式”选项卡中，它不显示这些类。它正在选择我的样式表，因为页面的其余部分显示正常。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:01:32.793

如果您删除无效的 CSS 代码，它似乎可以工作。我想知道您的原始 CSS 代码中是否有这些确切的行（带有`...`和未闭合的括号 - 这应该会导致问题）：

*   `background: -webkit-gradient(...`
*   `border-radius:...`

[清理 jsFiddle 演示](http://jsfiddle.net/RVdCR/1/)

问题肯定不在于多个类。[它们在每个现代浏览器中都能正常工作](http://www.quirksmode.org/css/contents.html#t14)。

* * *

**更新：**我发现了基于[这个 jsFiddle](http://jsfiddle.net/BFLHW/)的问题。就是这样的声明：

```
.black.button    {
  background: -moz-linear-gradient((linear, left bottom, left top, color-stop(0.1, #D3D3D3), color-stop(0.45, #EFEFEF), color-stop(0.90, #D3D3D3));
} 
```

之后，您的空缺`(`比需要的多`-moz-linear-gradient`。

正确版本（[jsFiddle](http://jsfiddle.net/BFLHW/3/)）：

```
.black.button    {
  background: -moz-linear-gradient(linear, left bottom, left top, color-stop(0.1, #D3D3D3), color-stop(0.45, #EFEFEF), color-stop(0.90, #D3D3D3));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:01:24.307

尝试使用类似下面的东西

```
 background: -moz-linear-gradient( top left, white, black ); 
```

`-webkit-gradient`适用于 webkit 浏览器——比如 Chrome 和 Safari；Firefox 不是 webkit 浏览器。

见[http://jsfiddle.net/Wfxym/](http://jsfiddle.net/Wfxym/)

发现了一些注释@[线性渐变](http://www.the-art-of-web.com/css/linear-gradients/)，尤其是[跨浏览器 CSS 渐变](http://webdesignerwall.com/tutorials/cross-browser-css-gradient)（有关 Firefox 实现的详细信息可以在 MDN 上找到：[https](https://developer.mozilla.org/en/CSS/linear-gradient) ://developer.mozilla.org/en/CSS/linear-gradient ）

# matlab - MATLAB中的后向消除技术

> ID：11040006
> 
> 赞同：0
> 
> 时间：2012-06-14T19:26:31.110
> 
> 标签：matlab, selection, forward

我是统计系的学生，我有一篇关于与肥胖相关的日常生活行为因素的论文。

我对 200 人做了一个测试，问了 30 个问题，比如他们是否吸烟以及快餐消费等……

我的问题是；我如何使用 MATLAB 中的后向消除或前向选择技术找到主要与肥胖情况相关的重要变量。

我是 MATLAB 的新手，不知道从哪里开始。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:40:20.197

如果您有权访问 Statistics Toolbox，请查看函数`stepwisefit`和`sequentialfs`. 两者都执行前向和后向特征选择的形式。`stepwisefit`进行逐步线性回归，而`sequentialfs`用于适用于许多模型类型的通用顺序特征选择。

# matlab - 这些地块之间有什么区别？

> ID：11040020
> 
> 赞同：0
> 
> 时间：2012-06-14T19:27:10.313
> 
> 标签：matlab, plot

我使用了以下代码：

```
bar([c f], 0.1,'stacked'); 
```

和

```
 bar( [c , f ] , 1.5); 
```

其结果是： ![代码1](../Images/6cd98b87a70929004789a8b116346fe6.png) ![代码2](../Images/3122b2ede9b38a3c8ba0a317cb2c3ca0.png)

我很困惑的是价值观不一样你能解释发生了什么吗？

现在正确吗？

```
 bar( [c , c+f ] , 0.5); 
```

![代码3](../Images/1c09af9ed4dbd243271647010f3e9f27.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:32:56.417

堆叠版本在底部显示第一个向量，以蓝色显示，第二个向量“堆叠”在第一个向量的顶部，以红色显示。这个想法是总和是最重要的视觉价值，但你也可以看到输入的独立贡献。所以是的，c+f 图应该类似于堆叠图，因为条形图的高度应该相同。唯一的区别是堆积图在同一个栏中显示 c*和f。*明白了吗？

# php - Find first free date in agenda

> ID：11040021
> 
> 赞同：1
> 
> 时间：2012-06-14T19:27:13.863
> 
> 标签：php, mysql, php-5.3

in my component I have created an agenda, where user can save their appointments.
Agenda table is quite simple: there is a title, description and start/end datetime fields.

When a user adds a new event, I'd wish to hint him with the first empty spot.

How can I achieve that?
Is that possible with a single/bunch queries, or I have to create a loop until I find the first empty spot?

For example this is my table:

```
|  ID |       Start date     |       End date      |
|  1  | 2012-06-14 09:00:00  | 2012-06-14 09:32:00 |
|  2  | 2012-06-14 15:00:00  | 2012-06-14 15:45:00 |
|  3  | 2012-06-14 18:20:00  | 2012-06-14 18:55:00 | 
```

The first free datetime should be `2012-06-14 09:33:00`, how can I fetch this date?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:23:04.967

Interesting challenge to be done in one query :) Took me a while but I came with solution. With these assumptions:

*   minimum appointment duration is 30 minutes
*   appointment starts and ends in one day
*   day starts at 9:00 and ends at 17:00
*   minimum interval between ending and starting times is 1 minute

There are 4 cases to take into consideration:

1.  There is some free time in the morning
2.  There is some free time during the day
3.  First free slot is next day to the last appointment in db
4.  You have all free slots from now on

So yo have to select minimum form these dates.

And the query:

```
SELECT
    MIN(next_start_date) AS next_start_date
FROM
( 
    (
        SELECT 
            DATE_FORMAT(t1.start_date,'%Y-%m-%d 09:00:00') AS next_start_date
        FROM
            agenda t1
        WHERE
            t1.start_date > NOW()
        AND
            TIME(t1.start_date) > '09:30:00'
        AND
            NOT EXISTS(
                SELECT 1 FROM agenda t2 WHERE DATE(t2.start_date) = DATE(t1.start_date) AND TIME(t2.start_date) <= '09:30:00'
            )
        LIMIT 1
    )
    UNION
    (
        SELECT
            t3.end_date + INTERVAL 1 MINUTE AS next_start_date
        FROM
            agenda t3
        WHERE
            t3.start_date > NOW()
        AND
            TIME(t3.start_date) >= '09:00:00'
        AND
            TIME(t3.end_date) < '16:30:00'
        AND NOT EXISTS
            (SELECT 1 FROM agenda t4 WHERE TIMESTAMPDIFF(MINUTE,t3.end_date,t4.start_date) BETWEEN 0 AND 30 )
        ORDER BY
            t3.start_date ASC
        LIMIT 1
    )
    UNION
    (
        SELECT CONCAT(CAST(DATE((SELECT MAX(t5.start_date) + INTERVAL 1 DAY FROM agenda t5 WHERE t5.start_date > NOW())) AS CHAR), ' 09:00:00') AS next_start_date
    )
    UNION
    (
        SELECT 
            IF( 
                TIME(NOW()) < '09:00:00', 
                DATE_FORMAT(NOW(),'%Y-%m-%d 09:00:00'), 
                IF(
                    TIME(NOW()) < '16:30', 
                    NOW(),
                    DATE_FORMAT(NOW() + INTERVAL 1 DAY,'%Y-%m-%d 09:00:00' ) 
                )
            ) AS next_start_date
        FROM
            (SELECT 1) t6
        WHERE NOT EXISTS(
            SELECT 1 FROM agenda t7 WHERE t7.start_date > NOW()
        )
        LIMIT 1
    )
) t 
```

Of course it is not perfect - when there next free slot occurs in the next day, there's a chance that it is Saturday or other day off from work. Taking it into consideration, the best way will be to check if returned is valid work day, if not then repeat the query with `NOW()` replaced by datestring of next valid work day.

# javascript - jquery 延迟和 queue:false 是否相互否定？

> ID：11040023
> 
> 赞同：2
> 
> 时间：2012-06-14T19:27:20.440
> 
> 标签：javascript, jquery, queue, delay

这是我的代码：

```
$('.content').delay(1000).animate({left: '10'}, {duration:1000, queue:false});
$('.content').delay(1000).animate({opacity: 0}, {duration:1000, queue:false}); 
```

内容 div 应该向左移动 10px 并同时淡出，效果很好。不过不会造成 1000 次延迟。queue:false 是否会抵消延迟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:37:35.147

如果您指定动画不排队，则延迟将被忽略，因为延迟是添加到动画正在忽略的队列的回调。

更新：

```
$('.content').delay(1000).animate({left: 10,opacity: 0}, {duration:1000}); 
```

# javascript - 在 Handlebars.js 模板中检索私有数组数据

> ID：11040025
> 
> 赞同：0
> 
> 时间：2012-06-14T19:27:27.737
> 
> 标签：javascript, handlebars.js, information-hiding

给定这个简单的 JavaScript 结构：

```
var MyObject = function() {
  var privateArray = [
    { name: 'one' },
    { name: 'two' }
  ];
  this.returnPrivate = function(index) {
    return privateArray[index];  
  };
};
var obj = new MyObject(); 
```

在车把模板中，我希望能够在使用函数`name`的特定索引处打印对象的属性。`privateArray``returnPrivate`

```
// This of course does not work.
<p>{{returnPrivate(1).name}}</p> 
```

我刚开始使用handlebars.js，所以可能已经有一种标准的方法来做到这一点。或者这可能是试图在模板中构建太多逻辑，并与车把的全部内容背道而驰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:27:28.223

我想出了一个帮助器来做我需要的事情，但我非常感谢一些关于这是否是使用 Handlebars 解决此类问题的最佳方法的反馈。

```
/**
 * Given the name of a function that returns an array value, this helper
 * returns the value at a given index.  Optionally it takes a property name
 * in case the array value at the given index is itself an object.
 */
Handlebars.registerHelper('eqf', function(func, index, prop) {
  if (typeof prop === 'string') {
    return func(index)[prop];
  } else {
    return func(index);
  }
}); 
```

问题示例的用法：

```
<p>{{eqf returnPrivate 1 "name"}}</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T19:27:40.857

Handlebars 具有处理数字或符号标识符的特殊语法，[如此处所述](http://handlebarsjs.com/expressions.html)。如果您能够将数组索引作为文字传递，则可以使用以下内容：

```
{{privateArray.[1].name}} 
```

这仅在您重组对象以使其`privateArray`可用于模板时才有效。如果您真的想隐藏`privateArray`并强制模板使用函数调用，那么您必须使用助手。

# php - 十六进制整数溢出

> ID：11040030
> 
> 赞同：1
> 
> 时间：2012-06-14T19:27:33.340
> 
> 标签：php

我从php主页阅读了手册

它写道：

```
// this doesn't go for 
//hexadecimal specified integers above 2^32-1:

var_dump( 0x100000000 );

// output: int(2147483647) 
```

但它有 4.5 个字节，比 int（4 个字节）大，我对其进行了测试。

它输出浮点数。

我不明白他们为什么矛盾？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:40:58.670

来自[关于整数的 PHP 手册页](http://php.net/manual/de/language.types.integer.php)：“如果 PHP 遇到超出整数类型边界的数字，它将被解释为浮点数。此外，导致数字超出整数类型边界的操作将返回而是漂浮。”

由于`integer`类型太小而无法表示该数字，PHP 会自动将其转换为 a `float`，这样您就不会丢失数据。这是预期的行为。

但是，您引用的具体示例在手册中显然是错误的。看起来有人在编写手册时出错了，或者可能是自编写手册页以来，超大十六进制文字的行为发生了变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:30:30.203

它为我输出一个浮点数：`float(4294967296)`

演示：[http ://codepad.org/otsGOiWf](http://codepad.org/otsGOiWf)

# android - admob 妥协的应用程序

> ID：11040034
> 
> 赞同：1
> 
> 时间：2012-06-14T19:27:53.480
> 
> 标签：android, facebook, admob

我也在使用 facebook sdk 为 android 2.2+ 制作应用程序。我的应用程序运行良好，因此在将其投放市场之前，我决定使用 admob 投放一些广告。要将 admob 与以前的版本一起使用，您必须使用 adnroid 32+ 进行编译，这就是我所做的（我使用了 api 15）。在 android 2.2-3.2 我的应用程序和 admob 也可以工作，但是在 ICS 中（我正在与 android 4.0.4 的关系上对其进行测试）admob 不显示任何广告，一些 facebook 请求返回一个空结果和一些下载图片给出错误（我说“一些”，因为其他请求和其他图片下载工作..）。我将在这里发布我的清单的相关部分和其他两个错误。如果删除广告并将我的应用程序编译到 2.2，它会再次开始正常工作......

在我的 project.properties 中：

```
# Project target.
target=android-15 
```

我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
package="com.***.***"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8"
          android:targetSdkVersion="15" 

   />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
 <application
    android:icon="@drawable/icon_transparent_zk"
    android:label="***" >
<activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" /> 
```

这是对 facebook 的请求（我需要它来获取用户 ID）：

```
String result_me = mFacebook.request("me"); 
```

现在是图像，我可以向您保证 json 中包含的 url 是正确的：

```
URL img_value = new URL(json.getString("pic"));
Bitmap icon = BitmapFactory.decodeStream(img_value.openConnection().getInputStream()); 
```

如果有人可以帮助我，我将不胜感激！谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:01:53.237

冰淇淋三明治（如果我没记错的话，甚至是 Honeycomb）不允许您在主线程上执行网络操作。

`Thread`在对象中执行您的 admob 请求。

```
(new Thread() {
    public void run() {
        //Admob stuff
    }
}).start(); 
```

这是为了确保您不会在长时间的网络操作中 ANR 您的应用程序。

# c++ - 模板类、继承和指向成员函数的指针的编译器错误

> ID：11040036
> 
> 赞同：2
> 
> 时间：2012-06-14T19:27:56.117
> 
> 标签：c++, templates, inheritance, pointer-to-member

```
class A{

    virtual int foo1(int a){ 

        return foo1_1(a,filler(a));
    }   

    template<typename FunctionPtr_filler> 
    int foo1_1(int a, FunctionPtr_filler ptrFn)
    {   
        int b;
        b = (this->*ptrFn)(a);  // --> compile error: pointer to member type int (B::)(int) incompatible with object type A
        return b;
    }   

    protected:
    virtual int filler(int a){ 
        return a*a;
    }   
};

class B: public A{
    virtual int foo1(int a){ 
        return foo1_1(a, &B::filler);
    }   
    virtual int filler(int a){ 
        return (a+a);
    }   
}; 
```

他们有什么方法可以克服这个错误。我想通过填充函数并避免重复代码的代码气味。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:46:44.517

我认为这里的问题是您将以下内容作为参数传递：

```
&B::filler 
```

这是一个指向成员函数的指针，定义在`B`. 在基类中，您试图将其称为

```
(this->*ptrFn)(a); 
```

这里的问题是，如果接收者对象实际上不是 type 的对象`B`，这将导致严重的运行时错误，因为您将在`B`类型不是的对象上调用方法`B`。C++ 给你一个编译器错误，告诉你这是不允许的。

要解决此问题，请将调用更改为传入

```
&A::filler 
```

这是 中的一个方法`A`，所以任何`A`对象都会有这个特定的方法。C++ 将虚拟地自动解析调用以引用该方法的最派生实现，因此`B`在这种情况下它应该调用函数的版本。

希望这可以帮助！

# c# - 在java脚本函数之前执行函数后面的VB代码

> ID：11040041
> 
> 赞同：-1
> 
> 时间：2012-06-14T19:28:14.893
> 
> 标签：c#, asp.net, .net, vb.net

> **可能重复：**
> [从 javascript 调用 ASP 函数](https://stackoverflow.com/questions/11039545/calling-asp-function-from-javascript)

好的运行这段代码：

```
 <script type="text/javascript">
    function hello() { 
        alert("hello world from javascript ")
    }
 </script>
  </head>
 <body>
<form id="form1" runat="server">
<div>
    <asp:Button ID="buttonme" runat="server" OnClientClick="javascript:hello()" Text="click" />
</div> 
```

代码背后：

```
 Protected Sub buttonme_Click(ByVal sender 
As Object, ByVal e As EventArgs) Handles buttonme.Click
    MsgBox("hello world from vb.net ")
End Sub 
```

会在 vb.net MsgBox 之前执行 javascript 消息吗？有没有办法让它翻转以第二次执行javascript函数谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:30:28.673

最简洁的答案是不。VB代码是服务器端的。javascript代码在客户端。有多种方法可以从 javascript（例如 Ajax）执行服务器端代码。

此外，您不想在 Web 服务器上调用 MessageBox.Show，因为那里不应该有 UI，它会阻止执行。

# iphone - ManagedObjectContext 保存导致 NSManagedObject 数据损坏/失效

> ID：11040049
> 
> 赞同：0
> 
> 时间：2012-06-14T19:28:49.640
> 
> 标签：iphone, ios, core-data, nsmanagedobjectcontext

保存上下文时我遇到了这个问题。它是间歇性的。一半的时间，上下文正确保存，一半的时间，对象的成员变为空（实际上上下文中没有任何内容。

“mylist”是 NSManagedObject 的列表，它属于我正在保存的上下文。“结果”始终为 YES，因此没有错误。

```
 // prints out results before save
    for (MyObj* obj in mylist) {
        NSLog(@"%p, %@", obj, [obj message]);
    }

    //context save here
    NSError *error;
    BOOL result = [[[Core appDelegate] managedObjectContext] save:&error];
    if (!result) {
        NSLog(@"Save Failed!");
        NSLog(@"report: %@, %@, %@", error, [error userInfo],[error localizedDescription]);
    } else {
        NSLog(@"Save succeeded");
    }

    // prints out results after save
    for (MyObj* obj in mylist) {
        NSLog(@"%p, %@", obj, [obj message]);
    } 
```

控制台显示如下内容：

```
 0x9af6990, message0
    0x9af8910, message1
    0x9afa390, message2
    0x9afa5a0, message3
    Save succeeded
    0x9af6990, (null)
    0x9af8910, (null)
    0x9afa390, (null)
    0x9afa5a0, (null) 
```

我也尝试从上下文中重新获取，保存后我得到 0 个对象。这一切都在主线程中完成。有任何想法吗？在这一点上我真的很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:12:42.253

也许您应该遵循 Apple 在众多代码示例中展示的建议，并在获取和设置`NSManagedObject`. 您应该`@properties`在 中声明`@interface`并使用 自动设置/获取`@dynamic`。

```
@interface MyObj : NSManagedObject 
@property (nonatomic, retain) NSString * message;
@end 

@implementation MyObject
@dynamic message;
@end 
```

如果您需要自定义访问器，只需`(NSString *)message`在您的实现中覆盖。

# c# - 未定义的 CLR 命名空间 - 未找到解决方案

> ID：11040051
> 
> 赞同：13
> 
> 时间：2012-06-14T19:28:52.620
> 
> 标签：c#, .net, wpf, xaml, namespaces

我已经研究了一段时间，试图找出发生以下情况的原因，但 StackOverflow 或 Google 上的解决方案都无法帮助我。

我有一个自定义 UserControl 正在尝试引用同一项目中的命名空间：

```
xmlns:my="clr-namespace:ColorPicker" 
```

但是，当我编译时，出现以下错误：

> 未定义的 CLR 命名空间。“clr-namespace” URI 指的是程序集中未包含的命名空间“ColorPicker”。

这导致无法在 xaml 中构建我的项目或引用其他自定义控件，从而产生以下类型的错误：

> 找不到类型“my:ColorSelector”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。

我已经尝试了这些帖子中给出的所有解决方案：

[向 xaml 添加自定义命名空间](https://stackoverflow.com/questions/3297660/adding-a-custom-namespace-to-xaml)

[WPF xmlns：“clr-namespace”URI 引用了程序集中未包含的命名空间](https://stackoverflow.com/questions/7130143/wpf-xmlns-the-clr-namespace-uri-refers-to-a-namespace-that-is-not-included-in)

[“clr-namespace” URI 指的是程序集中未包含的命名空间](https://stackoverflow.com/questions/3425954/the-clr-namespace-uri-refers-to-a-namespace-that-is-not-included-in-the-assemb)

[未定义的 CLR 命名空间](https://stackoverflow.com/questions/5470158/undefined-clr-namespace)

另外，为了清楚起见，我没有收到有关此项目中其他文件的任何其他错误，因此这似乎不是其他文件未编译的结果。

*更新*：可以在此处下载为我产生错误的示例项目：[http ://www.filefactory.com/file/28fbmhj3f4qj/n/ColorPicker_zip](http://www.filefactory.com/file/28fbmhj3f4qj/n/ColorPicker_zip)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:07:35.767

您的[第一个链接问题](https://stackoverflow.com/questions/3297660/adding-a-custom-namespace-to-xaml)有答案。答案是：您必须先构建包含命名空间和引用的类/控件的程序集，然后才能在 .xaml 中引用它。我注释掉了您的 xaml 命名空间声明，然后注释掉了这些命名空间中的 xaml 元素，然后注释掉了由于不再声明这些元素而中断的 C# 代码。换句话说，我一直在评论，直到我可以成功构建。构建程序集后，我取消注释 xaml 命名空间声明，然后取消注释元素。这给出了需要在这些元素上使用 x:Name 而不是 Name 的错误，所以我这样做了。然后取消注释 C# 代码并构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T17:53:55.640

`xmlns:my="clr-namespace:ColorPicker;assembly=ColorPicker"`.

这对我有用！它更快，更不烦人​​！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T22:18:42.017

我不得不将我的移动到外部资源字典。我通过更改解决了我的问题：

```
<UserControl.Resources>
    <SHCL:GoodBadConverter x:Key="GoodBadConverter"/>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/StandardHelperClassLibrary;component/WPF/Dictionaries/WindowStylesDictionary.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources> 
```

到

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/StandardHelperClassLibrary;component/WPF/Dictionaries/WindowStylesDictionary.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources> 
```

where 已移至列出的资源字典之一。

# ruby-on-rails - 如何让我的 Rails 应用程序将 url 显示为用户名？

> ID：11040054
> 
> 赞同：4
> 
> 时间：2012-06-14T19:29:33.107
> 
> 标签：ruby-on-rails, url, routes, naming-conventions

在我的 Rails 应用程序中，用户可以创建一个注册表，并且 URL 是例如：

```
http://localhost:3000/registries/3 
```

我怎样才能使该网址成为例如：

```
http://localhost:3000/erinwalker 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T19:54:18.303

最简单的方法是在您的 routes.rb 文件底部创建一个新路由：

```
match "/:username" => "registries#show" 
```

将它放在您的 routes.rb 文件*的底部*很重要，因为这将匹配任何格式为“/whatever”的路由，它与它之前的路由不匹配。

这将指向您的注册表控制器的显示操作。所以在那个动作中你可以做

```
@user = User.find_by_username params[:username]
@registry = @user.registry 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:31:27.920

在IMO， [friendly_id gem](https://github.com/norman/friendly_id)和其他 slugging gem 是最简单的方法。

（这是一个[friendly_id railscast。](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast)）

也就是说，很容易创建一个接受合法 slug 值的路由并自己重定向或查找它。

# html - 按钮不会在 Firefox 或 IE 中单击

> ID：11040058
> 
> 赞同：0
> 
> 时间：2012-06-14T19:29:38.097
> 
> 标签：html, css, xhtml

我使用 HTML/CSS 和 Java 脚本创建了一个按钮。该按钮应该将某人引导到不同的页面，但它不起作用。它在 Chrome 和 Safari 中运行良好，但在 Firefox 中无法运行。

任何人都可以帮助编写代码以便它在 Firefox 和 IE 中运行吗？

谢谢。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <title>WTF</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>

<style type="text/css">

button{
color:#08233e;
font:2.4em Futura, ‘Century Gothic’, AppleGothic, sans-serif;
font-size:70%;
padding:14px;
background:url(overlay.png) repeat-x center #ffcc00;
background-color:rgba(255,204,0,1);
border:1px solid #ffcc00;
-moz-border-radius:10px;
-webkit-border-radius:10px;
border-radius:10px;
border-bottom:1px solid #9f9f9f;
-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
cursor:pointer;
}

button:hover{background-color:rgba(255,204,0,0.8);}

</style>

<body>

<button><a href="http://www.ihatelebronjames.com" class="button1">LEBRON IS A NO-GOOD, BACK-STABBING, AFRAID-OF-THE-MOMENT CHOKE ARTIST!</a></button><br>
<button><a href="http://www.lebronjames.com" class="button2">LEBRON IS THE PINNACE OF BASKETBALL PERFECTION!</a></button>            

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:34:11.717

一个非常简单的解决方法是：

```
<a href="http://www.lebronjames.com" class="button2"><button>LEBRON IS THE PINNACE OF BASKETBALL PERFECTION!</button></a> 
```

将按钮标签放在 a 标签内

另一个（和更好的做法）选项：

[http://jsfiddle.net/a6seL/](http://jsfiddle.net/a6seL/)

这里我们只是添加一个类“button2”到`<a>`. 然后我们像你一样设置它的样式`<button>`，但是为了真正获得按钮的外观，我们还添加`display : block`到类中。

现在您只需要`<a>`并且不再需要`<button>`。

请参阅我的 jsfiddle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:37:08.967

使用**链接或按钮**。将两者混合在一起并没有真正的意义。如果需要链接，请使用链接。如果你想要一个按钮，请使用一个按钮。

仅将按钮（或任何其他元素）用于样式目的是一种**非常糟糕的做法**。将您的 CSS 调整为语义化、有意义的 HTML。

此外，在 XHTML 1.0 中，您根本无法将 a`<a>`放入 a 中`<button>`：

```
<!-- button uses %Flow; but excludes a, form and form controls -->

<!ENTITY % button.content    "(#PCDATA | p | %heading; | div | %lists; | %blocktext; |
    table | %special; | %fontstyle; | %phrase; | %misc;)*"> 
```

来自[XHTML 1.0 过渡 DTD](http://www.w3.org/TR/xhtml1/dtds.html#a_dtd_XHTML-1.0-Transitional)（您正在使用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T19:34:29.500

我认为如果您将锚点包裹在按钮之外，它会正确，尽管我不是 100% 确定如何为按钮实现有效的墨水

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T19:38:17.360

你不能那样做，按钮不是重定向，你可以创建一个链接，让它看起来像一个带有 CSS 的按钮，或者你可以创建一个按钮并赋予它 JS 功能，如下所示：

```
<button onclick="self.location=('http://www.ihatelebronjames.com');">LEBRON IS A NO-GOOD, BACK-STABBING, AFRAID-OF-THE-MOMENT CHOKE ARTIST!</a></button><br>
<button onclick="self.location=('http://www.lebronjames.com');">LEBRON IS THE PINNACE OF BASKETBALL PERFECTION!</a></button> 
```

# ruby - 为 ruby 安装 sqlite3

> ID：11040059
> 
> 赞同：0
> 
> 时间：2012-06-14T19:29:39.487
> 
> 标签：ruby, sqlite

我已经安装了最新版本的 ruby​​ 和 mysql，但是当我尝试通过 aptana 使用“需要 'rubygems' 和 '需要 'sqlite3' 运行某些东西时，我会在控制台中看到以下内容：

```
/home/carladessi/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in`require': cannot load such file -- sqlite3 (LoadError)
from /home/carladessi/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'from /home/carladessi/Documents/Aptana Studio 3 Workspace/Test/rubydb.rb:2:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:39:00.300

您发布的错误是针对 sqlite3 而不是 MySQL。我没有使用过 Apatana Studio，它看起来好像是，或者您的程序正在请求 sqlite3，而不是 MySQL。检查您的 Gemfile（如果有的话）以获取 sqlite3。还要检查 Apatana Studio 的要求，看看它是否需要 sqlite3。

**更新以反映问题的变化：**

看起来好像您正在使用 RVM。从终端尝试以下操作。

1.如果您使用的是`Gemfile`然后`bundler`在终端上确保您正在执行您的应用程序`bundle exec`。例如：

```
bundle exec myapp.rb 
```

1.  确保您使用与安装 sqlite3 相同的 gemset `gem install sqlite`。

# java - 如何在不显式的情况下从 ResultSet 获取数据

> ID：11040060
> 
> 赞同：0
> 
> 时间：2012-06-14T19:29:51.777
> 
> 标签：java, jdbc, resultset

我正在制作一个非常简单的应用程序来在网页上显示数据库表的内容，因此我想循环遍历一个 ResultSet 并将每个单元格的内容粘贴在`<td>`标签之间，等等。

问题是表可能非常大，我不想使用显式的*getString()*、*getInt()*、 *getXXX()*方法。相反，使用*ResultSetMetaData*方法*getColumnType()*作为更通用的 ResultSet`getData(<columName>, <type>)`方法的参数会更好，但似乎没有。

这可能吗？我是不是走错了路，还是离基地太远了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:37:48.607

有一个 getObject() 方法，但您仍然必须转换结果对象，除非它们都是不需要特殊格式的字符串和整数。在这种情况下，您只需检查它是否为 null 并调用 toString() 如果它有效。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#getObject(int](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#getObject(int) )

# php - 有没有一种方法可以在不让用户成为管理员的情况下从应用程序发布到页面？

> ID：11040066
> 
> 赞同：0
> 
> 时间：2012-06-14T19:30:22.403
> 
> 标签：php, facebook, facebook-graph-api

我一直在尝试使用 Facebook Graph API 设置应用程序，以便用户可以在公司页面上登录并发布到 Facebook（或设置发布时间，有点像 HootSuite）。我唯一的问题是用户必须是页面上的管理员才能在其上发布。

我想要的是应用程序将状态/照片/任何内容发布到页面，而无需用户以自己的身份登录（因此他们不必成为页面管理员即可发布到页面）。

通过应用程序有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:02:50.877

你可以得到一个页面访问令牌，然后用它来发帖——但我想所有的帖子都来自页面本身。

否则，您必须设置页面，以便每个人都可以发布到他们的墙上。

# visual-studio-2010 - .net Micro Framework 使用 Web 服务 wsdl 错误

> ID：11040074
> 
> 赞同：0
> 
> 时间：2012-06-14T19:30:59.833
> 
> 标签：visual-studio-2010, .net-micro-framework

VS2010 SP1 或 .netMF 4.1 中可能存在的错误。

我有一个用 VS2008 编码的 Web 服务和一个使用它的 .netMicro 应用程序。在不详细介绍如何让 .netMF 使用 Web 服务的情况下，我想指出这个问题。

Web 服务 WSDL 由 VS 动态构建。这是一个简单的过程。如果您查看服务说明（示例如下）

```
<?xml version="1.0" encoding="utf-8" ?> 
 <wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
                xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" 
                xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
                xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/"
                **xmlns:s="http://www.w3.org/2001/XMLSchema"** 
                xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
                xmlns:http="http://schemas.xmlsoap.org/wsdl/http/"  
                xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"> 
```

此示例中只有一个定义在末尾缺少斜杠。

VS 2008 和 VS 2010 都以这种方式构建 WSDL，但是 .netMF 在 VS2010 中编码时会出错。

在此问题上生成 netMF 文件的过程出错。

有没有人遇到过这个？添加斜线可以解决问题，但是添加斜线可能会产生什么影响。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:48:33.933

您是否在 netmf 4.2 中尝试过，结果相同？

如果使用完整框架（非 netmf）应用程序尝试使用 wsdl 作品，您可以在官方存储库/问题跟踪器上检查/发布：http: [//netmf.codeplex.com/workitem/list/basic](http://netmf.codeplex.com/workitem/list/basic)和/或在[支持论坛上](http://www.netmf.com/forum/default.aspx?g=topics&f=6)得到进一步的回应。

我不建议将斜杠添加到“http://www.w3.org/2001/XMLSchema”地址，因为附加了“/”的 url 不会返回相同的页面（给出 404 错误）。

您可以访问[此页面](http://atmanes.blogspot.ca/2006/07/short-explanation-of-xml-namespaces.html)以获取 xml 命名空间的简要概述。您也可以使用较新版本的架构（该架构基于 2001 版）并查看是否有效。

WSDL 定义中引用的某些 URL 返回 404 错误。netmf 有可能验证这些 URL 以返回正确的 xml 并失败。

# java - 如果我想在 jvm 上实现 dart-lang，我应该学习什么？

> ID：11040075
> 
> 赞同：1
> 
> 时间：2012-06-14T19:31:01.233
> 
> 标签：java, jvm, dart

这对我来说是一项非常艰巨甚至不可能完成的任务，但我仍然对此感兴趣。

我是一名 java 程序员，我发现[dart-lang](http://dartlang.org)很有趣。如果我想在jvm上实现它，我应该学习什么？像 jvm(jruby) 上的 ruby​​ 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:39:33.467

[JVM 规范](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)，JVM 字节码，JVM 如何进行 OOP。

最近没有很多关于 JVM/字节码黑客的参考，但有一些较旧的参考：

我用过的两个是：

*   [Java™ 平台的组件开发](https://rads.stackoverflow.com/amzn/click/com/0201753065)
*   [Java 虚拟机内部](https://rads.stackoverflow.com/amzn/click/com/0079132480)

看看其他语言如何处理代码生成是有帮助的，如果压倒性的话。一般来说，语言越简单，就越容易从中学习。例如，[循环](http://looplang.org/)是一种更新、更小的 JVM 语言——它也是一种不同的范式，因此可能直接有用，也可能没有直接帮助。

显然，处理源文件需要正常的词法分析和解析，但 Dart 显然使用[ANTLR](http://antlr.org/)作为其[语法](https://code.google.com/p/dart/source/browse/branches/bleeding_edge/dart/language/grammar/Dart.g)。根据 Dart VM 与 JVM 的相似程度，您可以通过消化 Dart 实现本身来获得很多知识。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T20:33:54.353

您可能还想看看[jdart 项目](http://code.google.com/p/jdart/)。我不确定它的最新情况——我认为这只是一个快速的实验。

它是从一开始就创建的，当时 Dart 于去年 10 月向世界发布。 [这是在](https://groups.google.com/a/dartlang.org/group/misc/browse_frm/thread/a938fcc42e83fc5b/2bd66e67ca3a2877?lnk=gst&q=dart%20java%20jvm#2bd66e67ca3a2877)dartlang 公告板上注明其发布的链接，其中还讨论了它的工作原理。

# oracle - 根据一天中的时间选择

> ID：11040078
> 
> 赞同：2
> 
> 时间：2012-06-14T19:31:08.253
> 
> 标签：oracle, date

我有一个 Oracle DATE 列，例如，这些值：

```
 RUN_DATE
-------------------
2012-06-09 13:15:00
2012-06-10 14:28:00
2012-06-11 12:20:00
2012-06-12 13:14:00
2012-06-13 11:50:00 
```

我想选择在 13:00 的一个小时内发生的那些值。对于上面的数据，这将是第 1 行、第 3 行和第 4 行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:34:21.997

```
WHERE to_char(run_date, 'HH24:MI' ) between '12:00' and '14:00' 
```

将工作。当然，您可能需要一个基于函数的索引`to_char(run_date, 'HH24:MI' )`来使其高效运行。

# libreoffice - LibreOffice 页码错误？

> ID：11040080
> 
> 赞同：8
> 
> 时间：2012-06-14T19:31:09.220
> 
> 标签：libreoffice

我正在尝试为使用 LibreOffice 编写的文档插入页码。一切正常，直到我添加一个偏移量（这样计数从 7 开始）。我添加了 6 的偏移量。工作正常，除了最后 6 页没有显示的数字（即使页脚字段在那里）。

这对我很重要。请让我知道我能做什么

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T20:26:06.697

如果您想从某个页码开始，请[不要使用偏移量。](http://help.libreoffice.org/Writer/Edit_Fields#Offset)而是在文档的第一页[编辑第一段的属性。](http://help.libreoffice.org/Writer/Page_Numbers#To_Start_With_a_Defined_Page_Number)转到菜单`Format`-> `Paregraph`-> `Text Flow`-> `Breaks`-> `Insert`-> `With Page Style`。现在，您可以指定自定义页码。

![页码的段落属性](../Images/7d214cd851be0abbdc30877bba0f0878.png)

**编辑：**

似乎“偏移”功能[给许多用户带来了严重的困惑](https://bugs.launchpad.net/ubuntu/+source/openoffice.org/+bug/118935)。我几乎想不出offest功能真正有用的用例。特别是，不适合以一致的方式修改页码：即使设置了偏移量，目录仍将使用“真实”编号，忽略偏移量。

如果要修改页码，例如

*   使 Writer 以 1 以外的任何数字开头；
*   对文档的不同部分使用不同的编号样式（罗马数字的序言，阿拉伯数字的主要内容......）
*   从编号中排除某些页面

你应该使用**页面样式**和**分页符**。请注意，分页符是**第一段“在分页符之后”的属性**：该段落包含以下信息：在它之前有一个分页符**，在**该分页符之后使用哪种页面样式，以及要应用哪个页码。

关于偏移量：您可以将偏移量用作对当前页面之前或之后页面的一种交叉引用。但是对于这样的场景，“真实”的交叉引用功能比偏移功能强大得多。

关于这个问题的更多信息：

*   **[OOo Writer 文档页码](http://wiki.services.openoffice.org/wiki/Documentation/OOo3_User_Guides/Writer_Guide/Numbering_pages)**；
*   [Hagar Delest 来自 OOo 论坛的有关页码编号的提示](http://user.services.openoffice.org/en/forum/viewtopic.php?t=1221#p4790)；
*   [扩展以更方便地处理页码](http://extensions.services.openoffice.org/node/374)；
*   [处理空白页](http://openoffice.blogs.com/openoffice/2009/07/the-simplest-approach-to-the-most-reliable-way-to-have-no-page-number-on-the-first-page-in-openoffic.html)；
*   [TOC 和页面偏移量](http://www.oooforum.org/forum/viewtopic.phtml?t=85884)
*   [页码教程](http://www.8daysaweek.co.uk/forums/viewtopic.php?t=34)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:40:21.280

我一直在努力获得正确的页码。我有三个标题页和十几个普通页面，图像插得满满当当。一个典型的指南。在遵循每条可以想象的路径一天之后，我可以得出结论，要么它是错误的，要么至少是令人难以置信的不直观。

令人困惑的是如何确定页脚（或可能的页面）是索引、脚注、默认值或其他，因为页脚被命名为其中之一。有时页脚会显示在第一页，而其他则不会。

我开始使用 Scribus 是因为我习惯了排版工具。然而，它缺乏太多的基本功能，这使得解决它们变得非常痛苦。（EMACS 需要从头开始做太多的工作，而且我想看看我会得到什么。）决定我需要的大部分东西都在 Libra Office 中，并着手创建指南。一切都很好，但对于该死的页码。

好的，终于成功了。我使用格式段落和文本流，中断。页面样式允许我将页面设置为某种样式。您可能会认为 Format Page Style 是要走的路，但这项业务有一些非常不直观的地方。

从来没有想过我会得到这个工作。我仍然没有完全理解它应该如何使用。我的漫无边际可能也不是很有用，但也许它会告诉其他人你可以有没有页脚的标题页，并在你想要的页面上开始页数。

# facebook - node.js - express.static 和 facebook-wrapper - 无法发布

> ID：11040082
> 
> 赞同：1
> 
> 时间：2012-06-14T19:31:18.240
> 
> 标签：facebook, node.js, post

我正在开发一个 node.js 项目，我需要与 facebook 建立联系。我选择了一些 facebook 库。我喜欢的最后一个是[facebook-wrapper](https://github.com/vladbagrin/facebook-wrapper)。他们的例子很完美，但是当我添加时`express.static(__dirname + '/public')`，我得到一个错误：`Cannot POST /`。我也尝试过[连接](http://www.senchalabs.org/connect/)，但我有同样的错误。

```
var server = express.createServer( 
  express.logger(), 
  express.bodyParser(), 
  express.cookieParser(), 
  express.session({ secret: 'secret123' }), 
  facebook.auth(options), 
  express.static(__dirname + '/public')
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:59:09.277

问题是静态中间件不服务带有 POST 方法的请求。您必须在路由器中明确处理它，如下所示：

```
app.post('/', function(req, res) {
    res.sendfile(__dirname + '/public/index.html');
}); 
```

但是有一个拉取请求来缓解这个问题：[https](https://github.com/senchalabs/connect/pull/482) ://github.com/senchalabs/connect/pull/482 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:24:19.423

论点顺序对 Connet 和 Express 很重要。重新排列论点。尝试将 'facebook.auth(options)' 作为最后一个参数。

# mvvm - 如何在 MVVM 中实现具有选定详细信息的列表

> ID：11040086
> 
> 赞同：0
> 
> 时间：2012-06-14T19:31:32.247
> 
> 标签：mvvm, silverlight-4.0, telerik, prism

我有一个使用 MVVM 和 Prism 的 Silverlight 项目。

我跟着[http://www.telerik.com/help/silverlight/patterns-and-practices-eventtocommand-prism.html](http://www.telerik.com/help/silverlight/patterns-and-practices-eventtocommand-prism.html)

我在网格中选择了一行，调试器点击了我设置 Detail 对象的预期方法 (SelectPerson)。但是我认为我对细节对象（PersonDetail）的绑定表达式是错误的。

这是我的视图模型：

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Collections.ObjectModel;
using Telerik.Windows.Controls;
using Telerik.Windows.Controls.GridView;

namespace RadControlsSilverlight
{
    public class PersonViewModel
    {
        public ObservableCollection<PersonInfo> GridItems { get; set; }
        public PersonInfo PersonDetail { get; set; }
        public DelegateCommand SelectPersonCommand { get; set; }

        public PersonViewModel()
        {
            SetupData();
            SelectPersonCommand = new DelegateCommand(SelectPerson);
        }

        public void SelectPerson(object obj)
        {
            Telerik.Windows.Controls.SelectionChangeEventArgs e = obj as Telerik.Windows.Controls.SelectionChangeEventArgs;
            PersonInfo person = (PersonInfo)e.AddedItems[0];

            PersonDetail = person;

        }

        public void SetupData()
        {
            Random rnd = new Random();

            GridItems = new ObservableCollection<PersonInfo>();

            for (int i = 0; i < 100; i++)
            {
                PersonInfo edi = new PersonInfo();
                edi.ID = i;
                edi.Name = "Name " + i.ToString();
                edi.Date = DateTime.Today.AddDays(i);
                edi.IsAvailable = (i % 3 == 0 ? true : false);

                GridItems.Add(edi);
            }

        }
    }
} 
```

这是视图

```
<UserControl x:Class="RadControlsSilverlight.PersonList"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
              xmlns:prismcommands="clr-namespace:RadControlsSilverlight.PrismCommands"

              xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"

      xmlns:local="clr-namespace:RadControlsSilverlight"
    d:DesignHeight="300" d:DesignWidth="400">

    <UserControl.Resources>
        <local:PersonViewModel x:Key="xVM" />
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot"
          Background="White"
          DataContext="{StaticResource xVM}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <telerik:RadGridView x:Name="xRadGridView"
                             ItemsSource="{Binding GridItems, Mode=TwoWay}"

                             prismcommands:SelectionChangedCommand.Command="{Binding SelectPersonCommand}"

                             >

        </telerik:RadGridView>
        <telerik:RadDataForm x:Name="DataForm1"
                             Grid.Column="1"
                              CurrentItem="{Binding PersonDetail, Mode=TwoWay}"
                             Header="Person Detail"/>

    </Grid>
</UserControl> 
```

为了在 DataForm 中显示被选中的单个 PersonInfo 对象，我需要进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:50:09.150

您缺少通知 UI 要更新然后重新绑定的 PersonDetail 的事件。`NotificationObject`您可以通过在 PRISM 中实施来实现这一点。

```
public class PersonViewModel : NotificationObject
{
    private PersonInfo _personDetail;
    public PersonInfo PersonDetail
    {
        get { return _personDetail; }
        set
        {
            if(_personDetail != value)
            {
                _personDetail = value;
                //Notify UI of update
                RaisePropertyChanged(() => PersonDetail);               
            }
        }
    }           
} 
```

# c++ - 为什么需要类而不是结构

> ID：11040087
> 
> 赞同：3
> 
> 时间：2012-06-14T19:31:39.967
> 
> 标签：c++, oop

有人可以告诉我为什么在 C++ 中引入了类。是否有一些类可以执行而使用结构无法实现的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:34:12.417

在这里阅读 Stroustrup 的解释：[类有什么了不起的？](http://www2.research.att.com/%7Ebs/bs_faq.html#class)

> 类是代码中一个想法、一个概念的表示。类的对象代表代码中思想的特定示例。如果没有类，代码的读者将不得不猜测数据项和函数之间的关系——类使这种关系明确并被编译器“理解”。有了类，程序的高级结构更多地反映在代码中，而不仅仅是注释中。
> 
> 一个设计良好的类向它的用户展示了一个干净简单的界面，隐藏了它的表示并让它的用户不必知道那个表示。如果表示不应该被隐藏——比如说，因为用户应该能够以任何他们喜欢的方式更改任何数据成员——你可以将该类视为“只是一个普通的旧数据结构”；例如：

```
struct Pair {
        Pair(const string& n, const string& v) : name(n), value(v) { }
        string name, value;
}; 
```

> 请注意，即使是数据结构也可以受益于辅助函数，例如构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:45:39.900

Actually, structures in C++ are a special case of classes, and are included to make C++ more backward compatible with C. Recall from C that a structure is a description of a collection of data items of potentially different types that's given a name. This is also somethimes called a *record* in other languages.

In C++ there is a basic thing called a *class*, wich is a collection of data items of potentially different types *along with* functions that operate on them.

In C, a structure lets you define a chunk of memory using the structure declaration as a pattern.

In C++, a class lets you define a chunk of memory using the class declaration as a pattern, and have it associated with functions that operate on it.

In C, a common pattern to do things with a structure is something like this:

```
struct T {
   ?* some declarations */
};

struct T * foo.

struct T * create_a_T(}{/* malloc memory */}
void init_a_T(struct T * t){/* set it up */}
void do_something_with_T(struct T * t, ?* more arguments*/){/* more good things */} 
```

In C++, a class *method* works exactly the same way, *except* that you don't need to have the `struct T *` as an argument; that's take care of automatically.

*Along with* all that, in C++ a class lets you make certain elements of the class "private" or "protected", which is to say they're not accessible from outside the class methods. This can protect you from many kinds of programming errors.

Also, in C++ you can use *inheritance*, which means that you can define a new class that is "just like" an existing class, *except* for code that adds other data declarations or methods. This lets you organize the code around a relationship called "a kind of", so, for example, you can have a class Car, and define a new class Mercedes that is "a kind of" Car, but has special Mercedes-related pieces.

All of this goes along with the notion of "object oriented programming" which is too much to explain in one answer, but which has historically proven to make it easier to build large programs correctly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:44:23.810

```
class CL
{
    int x;
};

struct ST
{
    int x;
}; 
```

ST 和 CL 的唯一区别是`CL.x`is`private`和`ST.x`is `public`。

**最佳实践**：当您定义一个只有公共对象的小型数据结构时，使用关键字 struct，不同地使用关键字 class。

**更新：**

这是有效的 -->`class A;`

这是无效的 -->`struct B; // error: forward declaration of struct B`

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2012-06-14T19:38:01.840

C++是面向对象的，而对象是由类构成的，所以C++只用它

# javascript - 有什么办法可以让这种洪水在 HTML5 画布中更快地填充？

> ID：11040090
> 
> 赞同：3
> 
> 时间：2012-06-14T19:32:08.003
> 
> 标签：javascript, performance, html, canvas, profiling

我现在正在使用[本教程](http://www.williammalone.com/articles/html5-canvas-javascript-paint-bucket-tool/)，并且它运行良好，但我唯一担心的是它有点慢。我有一个 600x600 的画布，当使用填充工具时，填充画布大约需要 2 秒。在 Microsoft Paint 中，填充画布的大小是即时的，填充画布 10 倍的大小（6000x6000）仍然略短，大约为 1 秒。

这只是 javascript 和 canvas 元素的限制，还是可以对其进行优化以接近 MS Paint 等桌面程序的速度？我用 Firebug 对其进行了分析，这个功能似乎是主要瓶颈之一，但它确实必须运行每次迭代，所以..

```
function matchStartColor(pixelPos, startR, startG, startB) {
    var r = colorLayerData.data[pixelPos];
    var g = colorLayerData.data[pixelPos + 1];
    var b = colorLayerData.data[pixelPos + 2];

    return (r == startR && g == startG && b == startB);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:46:18.620

MS Paint 是用本机代码（C 或 C++ 转换为机器代码）编写的，它比 canvas/javascript 更快，如果编写正确，渲染效率更高。还要考虑 MS Paint 可能会使用计算机上硬件的视频渲染工具，我认为 canvas 在大多数浏览器中默认情况下不会这样做。

此外，MS Paint 的泛光/填充算法可能与您使用的不同。实现某事的方法总是不止一种。您是否尝试过简单的逐行扫描，边走边填充白色像素吗？您可以尝试一下，只是为了进行基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:02:27.887

我也跟着这个教程。这个算法不适用于预定义的图像。它只适用于你在画布上绘制的东西。

# python - 无法从 tkinter widget.after 函数传递参数

> ID：11040098
> 
> 赞同：9
> 
> 时间：2012-06-14T19:32:48.673
> 
> 标签：python, popup, window, tkinter, arguments

我正在使用 tkinter 构建的 GUI 的一部分有一个弹出窗口，上面写着“程序运行时请稍候”。然后在它完成后窗口消失。我正在使用 widget.after 命令打开窗口并运行该命令。但是，如果我传递我调用参数的函数，则弹出窗口永远不会出现。这是一个例子：

```
def backupWindow
    self.restoreCB = Toplevel()

    message = "Please wait while backup runs"
    Label(self.restoreCB, text=message, padx=100, pady=20).pack()

    widget.after(10, self.runBackup)

def runBackup(self):
    <backup code>
    self.backupCB.destroy() 
```

这运行良好并且可以执行我想要的操作，在备份运行时弹出窗口，然后在备份后关闭窗口。但是，如果我像下面的代码一样从 widget.after 传递 and 参数，“请稍候”消息永远不会出现。

```
def backupWindow
    self.restoreCB = Toplevel()

    message = "Please wait while backup runs"
    Label(self.restoreCB, text=message, padx=100, pady=20).pack()

    widget.after(10, self.runBackup(mybackup))

def runBackup(self,mybackup):
    <backup code using mybackup>
    self.backupCB.destroy() 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-14T22:47:16.207

当你这样做时：

```
widget.after(10, self.runBackup(mybackup)) 
```

...您是在告诉 Tkinter“运行命令`runBackup`，当它返回时，将结果用作`after`”的参数。因为`runBackup`returns `None`，上面的等价于：

```
self.runBackup(mybackup)
widget.after(10, None) 
```

相反，您希望*引用*`after`该函数，而不是*调用*该函数。如果命令需要参数，可以将这些参数作为附加参数提供。**`after`**

 **例如：

```
widget.after(10, self.runBackup, mybackup) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T19:55:09.553

我会尝试 functools.partial 来包装你的电话，如下所示：

```
widget.after(10, functools.partial(self.runBackup, mybackup)) 
```

或者您可以定义一个不带参数但传递参数的本地函数（本质上就是 functools.partial 所做的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-24T21:18:25.803

添加：使用 Lambda 函数格式，函数在多次递归调用后不会失败。例如：

```
Function abc(par):
           stat-1
           stat-2
           ...
           stat-n
           root.after(1000, lambda : abc(par))

    ... 
```

（例如，在窗口左上方更新时钟非常有用...）**

# c# - 我可以从三元运算中获得什么类型？

> ID：11040100
> 
> 赞同：1
> 
> 时间：2012-06-14T19:33:04.257
> 
> 标签：c#, ternary-operator

> **可能重复：**
> [为什么这段代码在 C# 中无效？](https://stackoverflow.com/questions/202271/why-is-this-code-invalid-in-c)
> [条件运算符不能隐式转换？](https://stackoverflow.com/questions/2215745/conditional-operator-cannot-cast-implicitly)

如果我执行以下操作：

```
bool someBool = false;
uint value = 0; 
```

这些很好：

```
value = (someBool) ? 0 : (uint)1;
value = (someBool) ? (uint)0 : 1; 
```

但这不是：

```
value = (someBool) ? 0 : 1; 
```

当我可以轻松地说：为什么我不能使用最后一个：

```
value = 0;
value = 1; 
```

三元运算符的类型是如何确定的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T19:34:58.703

您必须将其转换为，`uint`以便编译器知道。0 和 1 都可以是 a`uint`或 an `int`。

这是语言规范（可以从 MSDN 下载[）](http://msdn.microsoft.com/en-us/library/ms228593.aspx)：

> ?: 运算符的第二个和第三个操作数控制条件表达式的类型。设 X 和 Y 是第二个和第三个操作数的类型。然后，
> 
> 如果 X 和 Y 是相同的类型，那么这是条件表达式的类型。
> 
> 否则，如果存在从 X 到 Y 的隐式转换，但不存在从 Y 到 X 的转换，则 Y 是条件表达式的类型。
> 
> 否则，如果存在从 Y 到 X 的隐式转换，但不存在从 X 到 Y 的转换，则 X 是条件表达式的类型。
> 
> 否则，无法确定表达式类型，并出现编译时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:35:37.817

如果您不将任何数字转换为`uint`，编译器将假定三元运算符的结果是`int`，它不能隐式转换为`uint`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T19:36:45.083

我的简短总结：

```
 var x = c ? a : b; 
```

编译器将尝试 if`b`可转换为 的类型`a`，否则将尝试 if 可转换`a`为 的类型`b`。当两者都不可能时，就会出现错误。

但在

```
 uint value = (someBool) ? 0 : 1; 
```

三元运算符简单地返回`int`（两者`a`都是`b`整数）。

**确定类型时不**考虑赋值左侧的变量。

# c# - Windows 服务中的 FileWatcher 突然停止工作

> ID：11040105
> 
> 赞同：1
> 
> 时间：2012-06-14T19:33:16.973
> 
> 标签：c#, service, filesystemwatcher

我在 Windows 2003 中运行 Windows 服务。上个月我每天都在添加/更改代码，上个月我的文件观察器每天都在工作。但是，由于某些奇怪的原因，它今天停止工作。如果我恢复到旧代码，它仍然不会引发事件。我已经在我的 Win7 机器上测试了相同的代码，它工作正常。我假设有一个外部进程干扰，但我什至不确定要寻找什么。

以下是相关代码：

```
private void InitializeComponent()
    {
        this.processfileWatcher = new System.IO.FileSystemWatcher();
        ((System.ComponentModel.ISupportInitialize) (this.processfileWatcher)).BeginInit();
        this.processfileWatcher.EnableRaisingEvents = true;
        this.processfileWatcher.Filter = "done.txt";
        this.processfileWatcher.Changed += new System.IO.FileSystemEventHandler(this.processfileWatcher_Changed);
        this.ServiceName = "Service1";
        ((System.ComponentModel.ISupportInitialize)(this.processfileWatcher)).EndInit();

    }

private void processfileWatcher_Changed(object sender, System.IO.FileSystemEventArgs e)
    {
        try
        {
            processfileWatcher.EnableRaisingEvents = false;
            //Do stuff here
            Debug.WriteLine(" End of processfileWatcher for: " + e.FullPath);
        }

        finally
        {
            processfileWatcher.EnableRaisingEvents = true;
        }

    } 
```

通过调试语句，我可以确认我的 onStart() 方法已经结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:59:36.447

尝试使用 this.processfileWatcher.Created 事件对其进行测试，并查看在创建新文件时它是否仍会引发。还可以尝试手动设置 NotifyFilter 属性（[doc](http://msdn.microsoft.com/en-us/library/system.io.notifyfilters.aspx)），看看是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:51:45.740

如果某些东西导致大量磁盘快速更改，则您可能在有机会捕获您正在寻找的东西之前就用完了缓冲区，或者您的服务凭据可能不适用于您正在监视的内容。

尝试授予显式权限，然后通过为 fileystemwatcher 的错误事件添加处理程序来查找缓冲区问题。

[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.error%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.error%28v=vs.100%29.aspx)

# java - 使用 SHA-256 散列图像字节会产生许多随机冲突，我做错了什么？

> ID：11040106
> 
> 赞同：4
> 
> 时间：2012-06-14T19:33:18.877
> 
> 标签：java, bufferedimage, sha, hash-collision, message-digest

我正在使用 SHA-256 算法来检测数据库中的相同图像。因为我们使用了很多不同的图像格式，所以我不想直接在文件上计算哈希值。相反，我想提取像素数据并计算其哈希值。

不幸的是，我遇到了很多随机冲突：68 个不具有相同字节的图像使用相同的像素提取（如下）从 6000 个图像中散列到相同的值。我觉得这是一个疯狂的碰撞次数。此外，我将我从像素数据计算的字节转储到文件中，然后尝试：

回声-n [字节转储文件] | sha256sum

这导致转储图像的哈希值不同，这让我相信我在使用 MessageDigest 时做错了什么。

这是我获取像素数据的方法：

```
 imageBytes = new byte[4 * width * height];
    for (int y = 0; y < height; y++)
    {
        for (int x = 0; x < width; x++)
        {

            // grab color information
            int argb = image.getRGB(x, y);

            // a,r,g,b ordered bytes per this pixel. the values are always 0-255 so the byte cast is safe
            int offset = y * width;
            int pushX = x * 4;
            imageBytes[pushX + offset] = (byte) ((argb >> 24) & 0xff);
            imageBytes[pushX + 1 + offset] = (byte) ((argb >> 16) & 0xff);
            imageBytes[pushX + 2 + offset] = (byte) ((argb >> 8) & 0xff);
            imageBytes[pushX + 3 + offset] = (byte) (argb & 0xff);

        }
    } 
```

然后我使用 MessageDigest 类计算哈希：

```
 MessageDigest digest = MessageDigest.getInstance("SHA-256");
    digest.reset();

    for (int i = 0; i < imageBytes.length; i++)
    {
        digest.update(imageBytes[i]);
    }

    String hashString = new String(encodeHex(digest.digest())); 
```

其中 encodeHex 只是：

```
 private static String encodeHex(byte data[])
    {
        StringBuilder hex = new StringBuilder(2 * data.length);
        for (byte b : data)
        {
            hex.append(HEXES.charAt((b & 0xF0) >> 4)).append(HEXES.charAt((b & 0x0F)));
        }

    return hex.toString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:50:08.330

我认为`offset`是计算错误。它应该是：

```
int offset = y * width * 4; 
```

创建`imageBytes`可能的更好方法是[`ByteBuffer`](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html); 它允许您简单地`put`按顺序排列每个字节，而无需计算索引。此外，它可以直接与[MessageDigest](http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html#update%28java.nio.ByteBuffer%29)一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:40:03.897

尝试

```
digest.update(imageBytes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T21:56:56.627

我想出了这个。根据上面的评论：

```
private String calculateHash(BufferedImage img) throws NoSuchAlgorithmException {
    final int width = img.getWidth();
    final int height = img.getHeight();
    final ByteBuffer byteBuffer = ByteBuffer.allocate(4 * width * height);
    for (int y = 0; y < height; y++)
    {
        for (int x = 0; x < width; x++)
        {
            // grab color information
            int argb = img.getRGB(x, y);

            // a,r,g,b ordered bytes per this pixel. the values are always 0-255 so the byte cast is safe
            byteBuffer.put((byte) ((argb >> 24) & 0xff));
            byteBuffer.put((byte) ((argb >> 16) & 0xff));
            byteBuffer.put((byte) ((argb >> 8) & 0xff));
            byteBuffer.put((byte) (argb & 0xff));
        }
    }

    MessageDigest digest = MessageDigest.getInstance("SHA-256");
    digest.reset();

    byte[] hashBytes = digest.digest(byteBuffer.array());
    return Base64Utils.encodeToString(hashBytes);
} 
```

# ubuntu - 登录后我只需要显示一个窗口（ubuntu）

> ID：11040108
> 
> 赞同：0
> 
> 时间：2012-06-14T19:33:25.433
> 
> 标签：ubuntu, login, window, kiosk, kiosk-mode

我需要在登录后加载一个程序，而不加载桌面。只显示我制作的程序。我在 ubuntu 上需要它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:41:57.400

尝试这个：

[http://www.alandmoore.com/blog/2011/11/05/creating-a-kiosk-with-linux-and-x11-2011-edition/](http://www.alandmoore.com/blog/2011/11/05/creating-a-kiosk-with-linux-and-x11-2011-edition/)

或这个：

[http://www.instructables.com/id/Setting-Up-Ubuntu-as-a-Kiosk-Web-Appliance/?ALLSTEPS](http://www.instructables.com/id/Setting-Up-Ubuntu-as-a-Kiosk-Web-Appliance/?ALLSTEPS)

如果是触摸屏，我会给 xmonad 一个镜头以确保全屏，否则你可能会在没有窗口管理器的情况下得到奇怪的边框。火柴盒也不错。

# c++ - 删除数组 - 检测到堆损坏

> ID：11040111
> 
> 赞同：0
> 
> 时间：2012-06-14T19:33:38.767
> 
> 标签：c++, memory-management

我有这个简单的代码（为了缩短事情，重要的位可能只有构造函数和 add 方法。）（代码更新）。

```
#include "general.h"
template <class T>
class Template
{
private:
    T* oldArr;
    T* newArr;
    int oldArrTop;
    int oldArrLen;
public:
    Template();
    ~Template();
    void add(const T& val);
    void print();
};

template <class T>
Template<T>::Template()
{
    oldArr=new T[2];
    oldArrTop=0;
    oldArrLen=2;
    newArr=new T[4];
    //newArr's length is always 2.
}

template <class T>
Template<T>::~Template()
{
    delete[] oldArr;
    delete[] newArr;
}

template <class T>
void Template<T>::add(const T& val)
{
    //add normally
    oldArr[oldArrTop]=val;
    //need to copy 2 elements
    if( oldArrTop%2==1 )
    {
        newArr[oldArrTop]=oldArr[oldArrTop];
        newArr[oldArrTop-1]=oldArr[oldArrTop-1];
    }
    oldArrTop++;
    //need to double array's size
    if( oldArrTop==oldArrLen )
    {
        delete[] oldArr;
        oldArr=newArr;
        oldArrLen*=2;
        newArr=new T[oldArrLen*2];
    }
}

template <class T>
void Template<T>::print()
{
    for (int i=0; i<oldArrTop; i++)
        cout<<oldArr[i]<<endl;
} 
```

这是使用模板的代码：

```
Template<int> a=Template<int>();
    for(int i=0;i<10;i++)
        a.add(i);
    a.print(); 
```

但是，当我将模板与整数一起使用时（例如），我第一次删除数组时（第一次进入 add 中的“需要加倍数组的大小”部分时，我得到一个堆损坏错误。任何人都知道问题是什么？非常感谢！

* * *

我不确定是什么修复了它，但堆损坏错误消失了。但是，它不是打印从 0 到 9 的数字，而是打印一个奇怪的数字 (-842105421)。任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:42:56.687

我认为您可以在这里访问分配区域后面的内存：

```
oldArr[oldArrTop]=newArr[oldArrTop]; 
```

当您添加第二个值 oldArrTop 将变为 2 并且您将输入`if( oldArrTop%2==0 )`. 在此，如果您`oldArr`只有两个分配的元素但您尝试访问第三个（因为 oldArrTop==2 并且它意味着第三个元素）：

```
oldArr[2]=newArr[2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:37:07.660

只需使用`std::vector<T>`. 它将为您管理内存（如果需要，数组大小将加倍:)）

# javascript - 在浏览器中解析 A NSI 转义码颜色？

> ID：11040112
> 
> 赞同：12
> 
> 时间：2012-06-14T19:33:40.560
> 
> 标签：javascript

我有一个源，它在它吐出的字符串上附加了 ANSI 转义码颜色。这些字符串被发送到浏览器。我想在浏览器中用 javascript 解析这些 ANSI 转义码，这样它看起来就像在终端窗口中一样。

目标：ANSI 字符串 -> html 跨越样式

这可能吗？首先我需要知道如何在 JS 中解析 A​​NSI 字符串。

谢谢！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T20:51:28.290

[https://github.com/mmalecki/ansispan](https://github.com/mmalecki/ansispan)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T19:40:15.590

以前做过。一个快速的谷歌搜索发现[escapes.js](http://256.io/escapes.js/)作为一个例子。

# objective-c - 具有大量自动释放对象的线程如果是/否，在这种情况下是否必须使用自动释放池，为什么？

> ID：11040114
> 
> 赞同：0
> 
> 时间：2012-06-14T19:33:44.307
> 
> 标签：objective-c, ios, nsthread, nsautoreleasepool

考虑我们正在使用大量自动释放对象实现我们自己的线程。如果是/否，是否必须在这种情况下使用自动释放池，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T19:35:30.877

[在您创建的任何线程](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW16)上都必须有一个自动释放池，因为[Cocoa 内部期望](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)有一个，如果它不存在，您将泄漏内存。

> Cocoa 总是希望有一个可用的自动释放池。如果池不可用，则不会释放自动释放的对象，并且您的应用程序会泄漏内存。如果您在池不可用时发送自动释放消息，Cocoa 会记录适当的错误消息。

* * *

> 在 Objective-C 框架中链接的应用程序通常必须在其每个线程中创建至少一个自动释放池。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T19:36:13.557

即使使用单个自动释放的对象，它也是强制性的，否则它会泄漏。

# c# - 使用 WCF Contracts 操作 WPF Client

> ID：11040116
> 
> 赞同：0
> 
> 时间：2012-06-14T19:34:00.390
> 
> 标签：c#, wpf, wcf, web-services

我正在尝试为用户提供功能，让他们可以从移动设备或笔记本电脑远程控制系统上的客户端。

我创建的是一个 WCF 控制台应用程序，它保存合同等并启动服务器。

现在事情是这样的，如果我创建一个 HTML 页面，我无法对其进行任何操作以使其与服务器和客户端进行通信，因为我需要 HTML 页面在我的 WPF 客户端上调用一个方法来启动一个行动。

有没有人有这方面的经验，我认为我的解决方案几乎就在那里，只是我碰到了这堵墙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:53:13.283

如果您正在寻找一种从网页调用 WCF 服务器功能的方法，请使用启用 Ajax 的 WCF 服务。在这里阅读：http: [//www.codeproject.com/Articles/33234/A-beginner-s-guide-for-sumption-a-WCF-service-in](http://www.codeproject.com/Articles/33234/A-beginner-s-guide-for-consuming-a-WCF-service-in)

# android - Listview 中的搜索框：总是相同的结果

> ID：11040117
> 
> 赞同：0
> 
> 时间：2012-06-14T19:34:01.450
> 
> 标签：android, android-listview, search-box

当我将 serachbox 用于我的 Listview 时，我每次都会得到相同的结果。例如：

汽车 花 恨 爱 水

当我输入 f 或 h 或 l 等时，结果是 Car。我使用这个例子[http://androidcocktail.blogspot.in/2012/04/search-custom-listview-in-android.html](http://androidcocktail.blogspot.in/2012/04/search-custom-listview-in-android.html)

活动：

```
package de.bodprod.rettinfo;

import java.util.ArrayList;
import java.util.HashMap;
import android.app.ListActivity;
import android.content.Context;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;

public class AntidotList extends ListActivity{
    ArrayList<HashMap<String, Object>> antidots;
    ArrayList<HashMap<String, Object>> antidotsResult;
    LayoutInflater inflater;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.antidotlist_layout);
        final EditText searchBox=(EditText) findViewById(R.id.EditText01);
        ListView antidotListView=(ListView) findViewById(android.R.id.list);

        inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        antidots = new ArrayList<HashMap<String,Object>>();        
        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
        antidots = db.getAllAntidots();

        antidotsResult = new ArrayList<HashMap<String,Object>>(antidots);

        final CustomAdapter adapter = new CustomAdapter(this, R.layout.antidotlist_layout, antidotsResult);
        antidotListView.setAdapter(adapter);

        searchBox.addTextChangedListener(new TextWatcher() {
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                //get the text in the EditText
                String searchString=searchBox.getText().toString();
                int textLength=searchString.length();

                antidotsResult.clear();

                for(int i=0;i<antidots.size();i++){
                    String toxinname=antidots.get(i).get("toxin").toString();
                    if(textLength<=toxinname.length()){
                        if(searchString.equalsIgnoreCase(toxinname.substring(0,textLength)))
                            antidotsResult.add(antidots.get(i));
                    }
                } 
                adapter.notifyDataSetChanged();
            }
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
            public void afterTextChanged(Editable s) {}
        });
    }

    private class CustomAdapter extends ArrayAdapter<HashMap<String, Object>>{
        public CustomAdapter(Context context, int textViewResourceId, ArrayList<HashMap<String, Object>> Strings) {
            super(context, textViewResourceId, Strings);
        }
        private class ViewHolder{
            TextView sqlite_id, tox_layout, antidot_layout;
        }

        ViewHolder viewHolder;

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if(convertView==null){        
                convertView=inflater.inflate(R.layout.antidotlistitem_layout, null);
                viewHolder=new ViewHolder();

                viewHolder.sqlite_id=(TextView) convertView.findViewById(R.id.sqlite_id);
                viewHolder.tox_layout=(TextView) convertView.findViewById(R.id.tox_layout);
                viewHolder.antidot_layout=(TextView) convertView.findViewById(R.id.antidot_layout);

                convertView.setTag(viewHolder);

            }else{
                viewHolder=(ViewHolder) convertView.getTag();
            }

            viewHolder.sqlite_id.setText(antidots.get(position).get("sql_id").toString());
            viewHolder.tox_layout.setText(antidots.get(position).get("toxin").toString());
            viewHolder.antidot_layout.setText(antidots.get(position).get("antidot").toString());

            return convertView;
        }
    }
} 
```

数据库处理器：

```
package de.bodprod.rettinfo;

import java.util.ArrayList;
import java.util.HashMap;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHandler extends SQLiteOpenHelper {
    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 7;

    // Database Name
    private static final String DATABASE_NAME = "rettinfo";

    // Antidot table name
    private static final String TABLE_ANTIDOT = "antidotlist";

    // Antidot Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_TOX = "tox";
    private static final String KEY_ANTIDOT = "antidot";
    private static final String KEY_DOS = "dos";
    private static final String KEY_KAT = "kat";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.d("Create: ", "Creating ..");
        String CREATE_ANTIDOT_TABLE = "CREATE TABLE " + TABLE_ANTIDOT + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_TOX + " TEXT,"
                + KEY_ANTIDOT + " TEXT," + KEY_DOS + " TEXT," + KEY_KAT + " INTEGER" + ")";
        Log.d("Create: ", CREATE_ANTIDOT_TABLE);
        db.execSQL(CREATE_ANTIDOT_TABLE);

        ContentValues values = new ContentValues();
        values.put(KEY_TOX, "Alkylphosphat");
        values.put(KEY_ANTIDOT, "Atropinsulfat");
        values.put(KEY_DOS, "Initial: 2 - 5 mg i.V. alle 10 bis 15 Min &#xA; Kinder - Initial: 0,5 - 2 mg i.V. &#xA; bis zum Rückgang der Bronchialsekretion");
        values.put(KEY_KAT, "1");
        db.insert(TABLE_ANTIDOT, null, values);

        values.put(KEY_TOX, "E605 (Alkylphosphat)");
        values.put(KEY_ANTIDOT, "Atropinsulfat");
        values.put(KEY_DOS, "Initial: 2 - 5 mg i.V. alle 10 bis 15 Min &#xA; Kinder - Initial: 0,5 - 2 mg i.V. &#xA; bis zum Rückgang der Bronchialsekretion");
        values.put(KEY_KAT, "1");
        db.insert(TABLE_ANTIDOT, null, values);

        values.put(KEY_TOX, "DDVP (Alkylphosphat)");
        values.put(KEY_ANTIDOT, "Atropinsulfat");
        values.put(KEY_DOS, "Initial: 2 - 5 mg i.V. alle 10 bis 15 Min &#xA; Kinder - Initial: 0,5 - 2 mg i.V. &#xA; bis zum Rückgang der Bronchialsekretion");
        values.put(KEY_KAT, "1");
        db.insert(TABLE_ANTIDOT, null, values);       

        values.put(KEY_TOX, "Sarin (Alkylphosphat)");
        values.put(KEY_ANTIDOT, "Atropinsulfat");
        values.put(KEY_DOS, "Initial: 2 - 5 mg i.V. alle 10 bis 15 Min &#xA; Kinder - Initial: 0,5 - 2 mg i.V. &#xA; bis zum Rückgang der Bronchialsekretion");
        values.put(KEY_KAT, "1");
        db.insert(TABLE_ANTIDOT, null, values);         

        values.put(KEY_TOX, "Nervengas (Alkylphosphat)");
        values.put(KEY_ANTIDOT, "Atropinsulfat");
        values.put(KEY_DOS, "Initial: 2 - 5 mg i.V. alle 10 bis 15 Min &#xA; Kinder - Initial: 0,5 - 2 mg i.V. &#xA; bis zum Rückgang der Bronchialsekretion");
        values.put(KEY_KAT, "1");
        db.insert(TABLE_ANTIDOT, null, values);         
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_ANTIDOT);
        // Create tables again
        onCreate(db);
    }   

    public ArrayList<HashMap<String,Object>> getAllAntidots() {
        ArrayList<HashMap<String,Object>> antidotList = new ArrayList<HashMap<String,Object>>();
        String selectQuery = "SELECT  * FROM " + TABLE_ANTIDOT + " ORDER BY " + KEY_TOX;
        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        HashMap<String , Object> antidot;
        if (cursor.moveToFirst()) {
            do {
                antidot = new HashMap<String, Object>();
                antidot.put("sql_id", Integer.parseInt(cursor.getString(0)));
                antidot.put("toxin", cursor.getString(1));
                antidot.put("antidot", cursor.getString(2));
                antidotList.add(antidot);
            } while (cursor.moveToNext());
        }
        return antidotList;
    }    
} 
```

antidotlist_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    style="@style/mainView" 
    android:orientation="vertical" >
    <EditText android:id="@+id/EditText01"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:hint="Suchen">                               
    </EditText>    
    <ListView
        android:id="@android:id/list"
        style="@style/mainView" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>           
</LinearLayout> 
```

antidotlistitem_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    style="@style/mainView" 
    android:padding="5dip">

    <!-- SQLite row id / hidden by default -->
    <TextView android:id="@+id/sqlite_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
        <!-- android:visibility="gone" -->

    <!-- web site title -->
    <TextView
        android:id="@+id/tox_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="8dip"
        android:paddingLeft="8dip"
        android:paddingBottom="4dip"
        android:textSize="18dip"
        android:textColor="#1a1a1a" />

    <!-- web site url -->
    <TextView android:id="@+id/antidot_layout"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:paddingLeft="8dip"
        android:paddingBottom="6dip"
        android:textSize="15dip"
        android:textColor="#c00300"
        android:layout_below="@id/tox_layout"/>
</RelativeLayout> 
```

我将文件上传为 Eclipse 工作区：[http ://www.file-upload.net/download-4447258/test.rar.html](http://www.file-upload.net/download-4447258/test.rar.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:45:40.807

Are you sure this line works?:

`if(searchString.equalsIgnoreCase(toxinname.substring(0,textLength))){`

Maybe try this instead:

`if(toxiname.toUpperCase().indexOf(searchString.toUpperCase()) != -1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T02:57:48.903

我发现了问题。在 Activity 中，最后三个 viewHolder 使用了 antidots 而不是 antidotsResult

错误的：

```
viewHolder.sqlite_id.setText(antidots.get(position).get("sql_id").toString());
viewHolder.tox_layout.setText(antidots.get(position).get("toxin").toString());
viewHolder.antidot_layout.setText(antidots.get(position).get("antidot").toString()); 
```

作品：

```
viewHolder.sqlite_id.setText(antidotsResult.get(position).get("sql_id").toString());
viewHolder.tox_layout.setText(antidotsResult.get(position).get("toxin").toString());
viewHolder.antidot_layout.setText(antidotsResult.get(position).get("antidot").toString()); 
```

# php - 随机数生成速度

> ID：11040131
> 
> 赞同：0
> 
> 时间：2012-06-14T19:34:56.283
> 
> 标签：php, javascript, random

快速提问，有没有人对 javascript 和 php 之间的随机数生成做过基准测试？我不是在谈论 4-5 次随机函数调用，而是在大规模上，我对速度而不是更好的随机数更感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:37:10.000

这在很大程度上取决于您的硬件和环境。例如，在 Javascript 中，不同的浏览器将以不同的速度运行。

最好的办法是在每个循环中编写一个循环并运行它以生成大量随机数并显示它花了多长时间。这样，您将知道哪个更适合您的特定设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:49:31.210

正如 Alan 所指出的，JavaScript 随机数的性能取决于客户端为聚会带来的资源。但是，还有一些事情需要考虑：
由于您正在寻找大规模生成的随机数，因此请务必注意浏览器可能会阻止您的 JavaScript 到达循环结束。一些浏览器可能会假设脚本在某处包含死锁，并要求用户停止或调试脚本。*除此之外，只有当客户端在页面上并且*启用了 JavaScript
时，才会生成数字。

 *在 PHP 上，有两件事需要考虑（除了服务器硬件）。如果您真的打算生成大量随机数，那么对您的客户的响应也会变慢。尽管 PHP 比 JavaScript 快（到目前为止），但让您的访问者等待服务器响应的时间过长是不好的。
一个可能的解决方案可能是无论如何发送响应并通过 ajax 获取随机生成的数字。这里的缺点是：您失去了 php 的速度优势。

在您的情况下，我会保留随机生成器服务器端。如果您真的关注速度和服务器负载（PHP 资源昂贵），也许可以研究其他语言来编写一个小 C 程序。但再次坚持标签：坚持使用 php - 毕竟，无论如何，很多都是 C ......*

# windows - #defining WIN32_LEAN_AND_MEAN 究竟排除了什么？

> ID：11040133
> 
> 赞同：201
> 
> 时间：2012-06-14T19:35:01.330
> 
> 标签：windows, visual-c++

我找到了定义`WIN32_LEAN_AND_MEAN` *“通过排除一些不常用的 API 来减小 Win32 头文件的大小”*的解释。我在其他地方读到它加快了构建过程。

那么究竟`WIN32_LEAN_AND_MEAN`排除了什么？我应该关心这个预处理器指令吗？它是否加快了构建过程？

我还在项目中看到了一个预处理器指令，命名为额外精益。这是我应该知道的另一个深奥的预处理器咒语吗？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-06-14T19:41:35.597

根据[Windows 开发中心](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745%28v=vs.85%29.aspx)，WIN32_LEAN_AND_MEAN 不包括加密、DDE、RPC、Shell 和 Windows 套接字等 API。

* * *

## 回答 #2

> 赞同：186
> 
> 时间：2012-06-14T19:45:49.603

直接来自 Windows.h 头文件：

```
#ifndef WIN32_LEAN_AND_MEAN
    #include <cderr.h>
    #include <dde.h>
    #include <ddeml.h>
    #include <dlgs.h>
    #ifndef _MAC
        #include <lzexpand.h>
        #include <mmsystem.h>
        #include <nb30.h>
        #include <rpc.h>
    #endif
    #include <shellapi.h>
    #ifndef _MAC
        #include <winperf.h>
        #include <winsock.h>
    #endif
    #ifndef NOCRYPT
        #include <wincrypt.h>
        #include <winefs.h>
        #include <winscard.h>
    #endif

    #ifndef NOGDI
        #ifndef _MAC
            #include <winspool.h>
            #ifdef INC_OLE1
                #include <ole.h>
            #else
                #include <ole2.h>
            #endif /* !INC_OLE1 */
        #endif /* !MAC */
        #include <commdlg.h>
    #endif /* !NOGDI */
#endif /* WIN32_LEAN_AND_MEAN */ 
```

如果您想知道每个头文件的实际作用，在[MSDN](http://msdn.microsoft.com/en-us/library/ms123401.aspx)库中的搜索中键入头文件名称通常会生成该头文件中的函数列表。

此外，来自[Microsoft 的支持页面](http://web.archive.org/web/20121219084749/http://support.microsoft.com/kb/166474)：

> 为了加快构建过程，Visual C++ 和 Windows 头文件提供了以下新定义：
> 
> ```
> VC_EXTRALEAN
> WIN32_LEAN_AND_MEAN 
> ```
> 
> 您可以使用它们来减小 Win32 头文件的大小。

最后，如果您选择使用这些预处理器定义中的任何一个，并且缺少您需要的东西，您可以自己包含那个特定的头文件。在 MSDN 中键入您要使用的函数的名称通常会在页面底部生成一个条目，如果您想使用它，该条目会告诉您要包​​含哪个标题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-01-21T16:22:32.170

补充上述答案以及[Windows Dev Center](https://docs.microsoft.com/en-us/windows/win32/winsock/creating-a-basic-winsock-application)文档中的“Parroting”，

> Winsock2.h 头文件内部包含来自 Windows.h 头文件的核心元素，因此 Winsock 应用程序中的 Windows.h 头文件通常没有#include 行。如果 Windows.h 头文件需要 #include 行，则应以 #define WIN32_LEAN_AND_MEAN 宏开头。由于历史原因，Windows.h 标头默认包含 Windows Sockets 1.1 的 Winsock.h 标头文件。Winsock.h 头文件中的声明将与 Windows Sockets 2.0 所需的 Winsock2.h 头文件中的声明冲突。WIN32_LEAN_AND_MEAN 宏防止 Winsock.h 被包含在 Windows.h 头文件中。

# erlang - 分布式 RabbitMQ 节点不能相互识别

> ID：11040141
> 
> 赞同：4
> 
> 时间：2012-06-14T19:35:51.327
> 
> 标签：erlang, distributed, rabbitmq, connectivity

我正在研究 RabbitMQ 分布式 POC，但我一直停留在集群节点的基础知识上。
我正在尝试遵循兔子的集群[教程，所以这是我的参考。](http://www.rabbitmq.com/clustering.html)
安装 erlang (R14B04) 和 rabbit (2.8.2-1) 后，我将`.erlang.cookie`文件内容从一个节点复制到另外两个节点。
我不确定如何让 erlang 注意到这种变化，因为我必须自己重新启动机器（相当蛮力，但我根本不知道 erlang）。
此外，我在 iptables 4369 和 5 个额外的通信端口中打开 `/usr/lib64/erlang/bin/sys.config`了以下配置：

```
{kernel,[{inet_dist_listen_min, XX00},{inet_dist_listen_max,XX05}]}] 
```

然后再次重新启动（我知道愚蠢）以验证 erlang 将这些考虑在内，但仍然在我运行时：

```
rabbitmqctl cluster rabbit@HostName1 
```

我得到：

```
Clustering node rabbit@HostName2 with [rabbit@HostName1] ...
Error: {no_running_cluster_nodes,[rabbit@HostName1],
                                 [rabbit@HostName1]} 
```

我对 erlang.cookie 或端口的摆弄有可能没有成功，但我不知道如何检查它们。我尝试输入`erl`cmd 然后`erl_epmd:names()`或其他命令来获取更多信息，但我可能在 erlang 领域还很遥远。

真的很感激任何帮助

**更新：**
我尝试手动 ping 两个 erlang 节点并`pang`返回。
我做了以下事情：
连接到两个节点，停止rabbitmq（不确定是否需要，但可以肯定），当erlang命令行启动时像这样（`erl -sname dilbert`和）启动erlang，我在每个节点上运行并分别得到和。然后，我尝试使用单引号运行并在两个节点中不使用它们（当然更改了名称）并得到了所有 8 个案例。 当我在其中一台机器上运行时，我得到了一个空数组。 我还尝试允许防火墙中的所有流量（[脚本](http://pastebin.com/KLre0vXp)`erl -sname dilbert2``node().``dilbert@HostName1``dilbert2@HostName2``net_adm:ping('dilbert').``net_adm:ping('dilbert@HostName1').``pang`
`nodes().`
) 然后尝试运行上面的命令（不用担心它们现在又回来了）并且仍然返回`pang`.
**Update2：**
由于某种原因，我需要解决 cookie 不匹配问题（感谢@kjw0188 的建议 [我`erlang:get_cookie().`在 erlang 命令行中运行]）。
这没有帮助，我需要完全停止 iptables（不知道为什么，但我很快就会弄清楚）并加载 erlang 节点，`-name dilbert@my-ip`因为我的机架空间服务器没有 dns 名称。这最终使我能够得到一个 pong 并看到节点互相看到（`nodes().`在 ping 之后返回一个非空数组）。
我现在面临的问题是如何指示 RabbitMQ 在启动 erlang 时使用 -name 而不是 -sname。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T13:24:24.583

所以我在连接我的两个 RabbitMQ 节点时遇到了多个问题 -
我将补充一点，我的节点托管在机架空间上，因此没有默认的可公开主机名，并且需要 iptables，因为没有 DMZ 或内置安全组概念，例如亚马逊。

**问题：**
1\. Cookie - 不知道如何或为什么，但我有多个实例`.erlang.cookie`（`/root`在我的主目录和 in 中`/var/lib/rabbitmq/`）我只在 rabbitmq 中保留了一个，并验证所有节点都具有相同的 cookie。
2\. IPTables-为了让节点进行通信，我需要`epmd`为实际通信打开端口和端口范围`inet_dist_listen_min` `inet_dist_listen_max`。

```
/sbin/iptables -A INPUT -i eth1 -p tcp --dport ${epmd} -s ${otherNode} -j ACCEPT
/sbin/iptables -A INPUT -i eth1 -p tcp --dport ${inet_dist_listen_min}:${inet_dist_listen_max} -s ${otherNode} -j ACCEPT 
```

`empd`是通常的 4369 端口，对于其他范围，请使用您想要的任何范围。
`${otherNode}`是我另一个节点的ip。
我还需要通过 rabbitmq 配置 erlang 以使用这些端口（请参阅最后的配置文件）
3\. HostName- 看到我没有主机名，我需要编辑要使用的 rabbit 脚本`-name`而不是`-sname`（第一个告诉 erlang 采取整个名称，后者代表短名称，因此附加了一个 @ 符号和主机名）。
这是通过编辑完成的：
`/usr/lib/rabbitmq/bin/rabbitmqctl`
在开头添加了`RABBITMQ_NODE_IP_ADDRESS`属性的定义

```
DEFAULT_NODE_IP_ADDRESS=auto
DEFAULT_NODE_PORT=5672
[ "x" = "x$RABBITMQ_NODE_IP_ADDRESS" ] && RABBITMQ_NODE_IP_ADDRESS=${NODE_IP_ADDRESS}
[ "x" = "x$RABBITMQ_NODE_PORT" ] && RABBITMQ_NODE_PORT=${NODE_PORT}

[ "x" = "x$RABBITMQ_NODE_IP_ADDRESS" ] && [ "x" != "x$RABBITMQ_NODE_PORT" ] && RABBITMQ_NODE_IP_ADDRESS=${DEFAULT_NODE_IP_ADDRESS}
[ "x" != "x$RABBITMQ_NODE_IP_ADDRESS" ] && [ "x" = "x$RABBITMQ_NODE_PORT" ] && RABBITMQ_NODE_PORT=${DEFAULT_NODE_PORT} 
```

在实际的 erl 命令中，我更改
`-sname ${RABBITMQ_NODENAME} \`为
`-name ${RABBITMQ_NODENAME}@${RABBITMQ_NODE_IP_ADDRESS}\`.
这使得 rabbitmq 只监听指定的 ip 地址（在最后的配置文件中指定）并使用该 ip 而不是通常的主机名加载。

已编辑`/usr/lib/rabbitmq/bin/rabbitmq-server`
将实际的 erl 命令从更改`-sname ${RABBITMQ_NODENAME} \`为`-name ${RABBITMQ_NODENAME}@${RABBITMQ_NODE_IP_ADDRESS}`\

添加了一个 rabbit conf ( `/etc/rabbitmq/rabbitmq-env.conf`) 文件，其中包含 -

```
#the ip address which rabbit should use, this is to limit rabbit to only use internal rackspace communication and not publicly accessible ports  
NODE_IP_ADDRESS=myIpAdress  
#had to change the nodename becaue otherwise rabbitmq used rabbit@Hostname and not only rabbit  
NODENAME=myCompany
#This instructed rabbit to instruct erlang which ports it should use for its communications with other nodes  
export SERVER_ERL_ARGS="$SERVER_ERL_ARGS -kernel inet_dist_listen_min somePort -kernel inet_dist_listen_max someOtherBiggerPort" 
```

在此过程中帮助我的一些资源：
[RabbitMQ Clustering Guide](http://www.rabbitmq.com/clustering.html)
[Clustering RabbitMQ servers for High Availability](http://dudefrommangalore.wordpress.com/2009/08/22/clustering-rabbitmq-servers-for-high-availability/)
[rabbitmq-env.conf(5) 手册页](http://www.rabbitmq.com/man/rabbitmq-env.conf.5.man.html)
[Node communication by public IP address erlang mailing list](http://erlang.2086793.n4.nabble.com/Node-communication-by-public-IP-address-td2089236.html) (The middle post)
[在云上配置 RabbitMQ 集群](http://suniluiit.wordpress.com/2010/10/26/configuring-rabbitmq-cluster-on-cloud/)

希望这对其他人有帮助。

**编辑：**
不知道我是怎么弄错的，但似乎我的 erlang-rabbit 端口指令没有被考虑或不够。最终不得不允许两个节点之间的所有通信......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T03:09:23.560

真正要注意的一件事是 erlang cookie 文件中的任何类型的空格，尤其是 cookie 内容之后的换行符。只要两者相同，就可以了，但是当一个有换行符而另一个没有换行时，事情就行不通了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-29T21:05:11.900

**背景：**我在设置 Rabbitmq 集群时遇到了同样的问题。我正在使用在我的主机上运行的 2 个 docker 容器，这相当于 2 个单独的节点，我无法创建这两个节点的集群。

**解决方案：** 1\. 确保所有集群节点上都有相同的 erlang cookie，默认位置是`/var/lib/rabbitmq/.erlang.cookie`. 此文件用于身份验证，因此请确保您在所有节点上都拥有相同的文件。更改 .erlang.cookie 后***重新启动您的 rabbitmq 服务。***

2.  确保节点可以相互访问，使用 ping 或 telnet 检查连接。

3.  检查 /etc/hosts 是否有正确的条目，例如如果 rabbit2 想要加入集群 rabbit1，则 rabbit2 的 /etc/hosts 应该包含。

    ```
    172.68.1.6      rabbit1
    172.68.1.7      rabbit2 
    ```

现在停止服务，`$rabbitmqctl stop_app`然后使用`$rabbitmqctl join_cluster rabbit@rabbit1`，启动你的服务`rabbitmqctl start_app`并检查`$rabbitmqctl cluster_status`你是否加入了集群的天气。

我按照[rabbitmq 官方文档](https://www.rabbitmq.com/clustering.html)来设置集群。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T08:43:07.960

要更改 RabbitMQ sname/name 行为，您可以编辑脚本：

*   rabbitmq-多
*   rabbitmq-服务器
*   兔子mqctl

**示例** 在脚本 rabbitmqctl 中有以下代码：

```
exec erl \
    -pa "${RABBITMQ_HOME}/ebin" \
    -noinput \
    -hidden \
    ${RABBITMQ_CTL_ERL_ARGS} \
    -sname rabbitmqctl$$ \
    -s rabbit_control \
    -nodename $RABBITMQ_NODENAME \
    -extra "$@" 
```

你必须改变它：

```
exec erl \
    -pa "${RABBITMQ_HOME}/ebin" \
    -noinput \
    -hidden \
    ${RABBITMQ_CTL_ERL_ARGS} \
    -name rabbitmqctl$$ \
    -s rabbit_control \
    -nodename $RABBITMQ_NODENAME \
    -extra "$@" 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-05-03T20:48:19.887

**[http://pearlin.info/?p=1672](http://pearlin.info/?p=1672)**

所以你需要从你试图连接的节点复制cookie

示例：-rabbit@node1 rabbit@node2

转到 rabbit@node1 并从 cat /var/lib/rabbitmq/.erlang.cookie 复制 cookie

去 rabbit@node2 删除当前的 cookie 并粘贴新的。

在同一个节点上

> /usr/sbin/rabbitmqctl stop_app
> 
> /usr/sbin/rabbitmqctl 重置
> 
> /usr/sbin/rabbitmqctl 集群 rabbit@node1

应该这样做。

同样记录在这里。

[http://pearlin.info/?p=1672](http://pearlin.info/?p=1672)

# c++ - C++，共享库，主函数中的“单元测试”

> ID：11040148
> 
> 赞同：3
> 
> 时间：2012-06-14T19:36:35.097
> 
> 标签：c++, testing

**背景：**我有一个复杂的应用程序，我继承并正在扩展（研究生研究项目）。我想确保我的重组对可维护性和可用性产生积极的长期影响——换句话说，我想确保我以尽可能标准的方式为未来可能从事代码工作的人设置东西。我没有时间，也不是我的工作来*完全*重新构建应用程序。

该应用程序是一个生态系统模型。它由一个用 C++ 编写的共享库组成，可以完成繁重的工作。该库包含在“驱动”模拟的 Java 应用程序中——处理一些数据库 I/O 并提供 GUI。

在我的开发过程中，我为项目添加了许多实用函数，主要是为了在运行时方便地将内部变量打印到控制台（直接来自代码的 C++ 部分）。

我现在将这些函数分解为一个实用程序文件（头文件和 cpp），该文件根据需要包含在其他文件中。我将这些函数放在他们自己的命名空间中，下面是一个示例：[Organizing utility functions in C++](https://stackoverflow.com/questions/8226489/organising-utility-functions-in-c)

**问题：**如果我想为实用函数编写一些测试，这样我就可以开发和试验而无需重新编译和修改/运行整个模型，这些测试应该在哪里以及如何最好地包含？

如果我在 util.cpp 文件中有 main() 函数，会不会有问题？令我惊讶的是，我尝试了这个并且它有效；我可以独立编译和运行 util.cpp 文件。此外，包含 util.cpp 的主要应用程序仍然可以正常编译和运行。我很惊讶，因为我认为第二个 main() 的存在会是一个问题——尽管应用程序入口点在 java 代码中。

但是我不确定这是否是最好的路线；我没有足够的经验来看待这种策略的未来陷阱。

这是我的 util.cpp 文件的一个简短示例：

```
#include "util.hpp"
#include <iostream>
#include <vector>
namespace util {
  /** Prints a std::vector of doubles in a format that can be 
  * copied directly into a python console. */
  void util::pyprint_vec(const std::vector<double> & v){
    std::cout << "[";
    for(std::vector<double>::const_iterator it = v.begin(); it != v.end(); ++it){
      std::cout << *it << ", ";
    } 
    std::cout << "\b\b]"; // remove the last comma
  }
}

int main() {
  using namespace util;
  using namespace std;

  cout << "Testing some of the utility functions...\n";
  vector<double> a_vec(50,12.0);
  pyprint_vec(a_vec);
  cout << endl;

  return 0;
} 
```

最终，我设想模板化一些函数（此时它们实际上移动到 util.hpp）并添加到文件中以及能够在其他项目中使用它。提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:52:36.930

通常，您会想要编写一个单独的可执行程序，其中包括单元测试并链接到要测试的函数。例如，您可以创建一个`util_test.cpp`包含 main() 函数和带有测试的代码，以及 *#include*s util.hpp。编译时，使用静态或动态链接到要测试的代码。

从技术上讲，在 util.cpp 中有一个 main() 函数不会有问题。但是，如果您在库中的其他位置包含第二个主函数（以对其他内容进行单元测试），并将其链接到同一个共享对象，您将收到链接器错误。

main 函数没有特殊含义，只是在链接器创建可执行文件时，它会插入特殊代码，以便在启动程序时执行 main 中的代码。如果加载“共享对象”库，则不会“启动”程序，并且只要不显式调用 main 函数，代码就不会被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:20:55.860

从纯粹的工作角度来看，一个主函数很好，但两个会破坏你的编译，因为在启动时只能调用一个。

你真的很想研究一个单元测试框架，比如[cppunit](http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page)或[cxxtest](http://cxxtest.com/)（我目前最喜欢的）。这些将提供功能，如果您尝试单干，您会发现自己重新实现很糟糕。生成多个可执行文件是一个失败者的游戏，如果你的代码库是任何大小的，编译都将*花费很长时间。*你真的想要一个由某种框架驱动的编译可执行文件。

# jquery - jquery ui.timepickr 显示 {z} 而不是 am 或 pm

> ID：11040156
> 
> 赞同：0
> 
> 时间：2012-06-14T19:37:09.903
> 
> 标签：jquery, jquery-ui-timepicker

例如：03:00 {z} 而不是 03:00 am，同时在其菜单上移动鼠标（以及在单击之后）。

我使用这个 timepickr：[http ://code.google.com/p/jquery-utils/wiki/UiTimepickr](http://code.google.com/p/jquery-utils/wiki/UiTimepickr)

我的代码：

```
$(document).ready(function(){
    $('.timepicker').timepickr({convention: 12, suffix: ['am', 'pm']});
}); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:15:30.467

```
$(".timepicker").timepickr({
            convention: 12,
            format12: "{h:02.d}:{m:02.d} {z:s}"
        }); 
```

或者

```
$(".timepicker").timepickr({
            convention: 12,
            format12: "{h:02.d}:{m:02.d} {z}"
        }); 
```

这应该让你

# c# - 转换错误：将数据插入自定义 MembershipUser

> ID：11040159
> 
> 赞同：5
> 
> 时间：2012-06-14T19:37:16.377
> 
> 标签：c#, asp.net, membership-provider

`NCCMembershipUser`我正在尝试使用以下代码向我的数据填充：

```
string name = User.Identity.Name;

NCCMembershipUser currentUser = (NCCMembershipUser)NCCMembershipProvider.GetUser(name, true);

currentUser.Salutation = GenderSelect.SelectedValue;
currentUser.FirstName = TextBoxFirstName.Text;
currentUser.LastName = TextBoxLastName.Text;
currentUser.Position = TextBoxPosition.Text;
...

try
{
    NCCMembershipProvider u = (NCCMembershipProvider)Membership.Provider;
    u.UpdateUser(currentUser);
} 
```

我收到错误消息*“非静态字段、方法或属性‘System.Web.Security.MembershipProvider.GetUser(string, bool)’需要对象引用”*

如果我改为使用`Membership.GetUser()`（不带`name`字符串）来访问当前用户，它会给我一个转换错误，并且`GetUser()`看起来它不能被覆盖。

编辑：

我得到的转换错误是“[A]NCC.App_Code.NCCMembershipProvider 无法转换为 [B]NCC.App_Code.NCCMembershipProvider。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:10:25.197

该错误告诉您该`GetUser`方法不是[static](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.100%29.aspx)`NCCMembershipProvider` ，因此如果没有该类的实例就无法调用它。

你必须在你的方法中更早地抓住你的提供者：

```
string name = User.Identity.Name;
NCCMembershipProvider u = (NCCMembershipProvider)Membership.Provider;

NCCMembershipUser currentUser = (NCCMembershipUser)u.GetUser(name, true);

currentUser.Salutation = GenderSelect.SelectedValue;
currentUser.FirstName = TextBoxFirstName.Text;
currentUser.LastName = TextBoxLastName.Text;
currentUser.Position = TextBoxPosition.Text;
// ...

try
{
    u.UpdateUser(currentUser);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T03:45:50.183

> 我得到的转换错误是“[A]NCC.App_Code.NCCMembershipProvider 无法转换为 [B]NCC.App_Code.NCCMembershipProvider。”

对于此错误，请确认您的`App_Code`文件夹中没有该类，如果有，请将其移动到另一个位置，例如名为的新文件夹`Membership`

这将解决转换问题，因为应用程序正在将 2 个不同的 DLL 编译到临时 asp.net 文件夹中的 2 个不同位置。

# java - 如何在 Java 中模拟指针类型操作，或者 Java 是通过引用传递还是按值传递？

> ID：11040160
> 
> 赞同：3
> 
> 时间：2012-06-14T19:37:22.217
> 
> 标签：java, pointers, field

我正在将 Mysql 数据库建模为 Java 中的练习。个人实验。而且我想将表排序规则存储为字符串，因为列可以具有与表不同的排序规则，所以我也需要为每一列存储它。如果列的排序规则字段可以只指向表的排序规则字段，那将非常有帮助。但我知道 Java 没有指针。

您是否知道如何将一个对象的场指向另一个对象的场，以便两者始终匹配？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T19:38:16.283

Java 有引用，这是指针的优点，但不能进行指针数学运算。

```
public class Table {

  // name does not store a String, it stores a reference to a String
  private String name;

  // tableName is not passed in by copy, tableName's reference is passed in.
  public Table(String tableName) {
    // this is not a copy assignment, but a reference assignment
    name = tableName;
  }

} 
```

至于总是指向 Java 中的一个字段，您必须记住一些事情。对象是面向对象编程语言中的基本元素，而不是名称。因此，您无法构建对对象内部名称的引用，因为永远不清楚您是通过其基类型还是通过超类型来引用该对象。由于相同的名称可以存在于超类和子类中（然后可以隐藏超类类型），如果不知道它们正在解析的实际类实例，就无法正确解析字段名称引用。

这是设计使然，而不是偶然。事实上，类成员字段的外部知识正是使代码维护如此困难的原因，因为没有“垫片”可以在调用者和数据之间插入代码。通过封装数据（放入方法调用之后），为未来的代码维护奠定了基础；因为，然后可以插入代码以根据可能更改的内部数据元素生成返回值。

一个例子

```
public class Table {

  public Column[] columns;

  public String name;

  public Table() {
    name = ...;
    columns = ...;
  }

}

public class CreateTableDDL {

  public String statement(Table table) {
    StringBuilder buffer = new StringBuilder();
    buffer.append("CREATE TABLE ");
    buffer.append(table.name);
    buffer.append(" (");
    for (int i = 0; i < table.columns.length; i++) {
      Column column = table.columns[i];
      ...
    }
    ...
    return buffer.toString();
  }

} 
```

暴露`columns`为 type 的数组`Column`，这不一定是坏事，直到我们决定我们希望它是 a `List`of ，这样我们就可以在新的 nifty`Column`中动态添加或删除s 。`Column``TableEditor`

由于我们暴露了基础数据元素，现在我们必须搜索整个代码库以找到该字段的任何用途，并将所有用途重写为现在使用`List`接口。实际上，我们需要做的*还不止这些，*因为我们还必须搜索每个可能`columns`直接使用该字段的外部库，因为我们不知道的多个 JAR 可能使用了这个公共类。

此外，我们很快就会注意到，我们所做的大部分工作`columns`实际上都是`Table`'s 业务，但位于“帮助者”和辅助类中，这些类有损于表中最好本地化的职责。

最后，我们甚至可能注意到外部类正在修改表的列，而表并不知情。因为，它们绕过了任何可能通过直接抓取数据来提醒表注意更改的代码。

如果我们只是做了

```
public class Table {

  private Column[] columns;

  private String name;

  public Table() {
    name = ...;
    columns = ...;
  }

  public Column[] getColumns() {
    Column[] copy = new Column[columns.length];
    for (int i = 0; i < columns.length; i++) {
      copy[i] = columns[i].clone();
    }
    return copy;
  }

} 
```

然后我们可以轻松地将基本存储转换为 a`List`并从列表中构建我们的“向后兼容”列数组。调用代码现在*不需要*更改，即使我们决定我们以前存在的`columns`字段现在需要是`Map of String to DataType`.

```
 public class CreateTableDDL {

  public String statement(Table table) {
    StringBuilder buffer = new StringBuilder();
    buffer.append("CREATE TABLE ");
    buffer.append(table.getName());
    buffer.append(" (");
    for (int i = 0; i < table.getColumns().length; i++) {
      Column column = table.getColumn(i);
      ...
    }
    ...
    return buffer.toString();
  }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T23:55:50.603

首先是一些定义。请记住，术语传递并不是指用于管理数据的底层机制。它指的是您可以期望对该数据的操作会给您带来什么结果。

所有数据都存储在内存位置。这在 JVM 之间是如何定义的，并且与讨论无关。

指针是一个变量，它存储数据的内存位置，而不是实际数据。

引用是存储某种索引值的任何变量的通用术语，该索引值引用某些数据。所以指针是一种引用。在这个讨论中，我们关心的唯一类型。

现在在参考语言中，内存中的实际数据在分配期间不会被操作。数据保存在内存中。并且引用被分配一个值，告诉计算机去内存位置获取实际数据。当您将一个变量分配给另一个变量时，您分配的值与告诉计算机数据的内存位置相同的值。所以两个参考索引相同的数据。如果您更改实际数据，则两个引用都会索引新更改的数据。一次操作可以改变许多仅受计算机能力限制的变量。一个通用代码示例如下：

```
a = <valueof 1>; //"1" is now stored in memory, and a is a index to "1" in memory.
b = a; //b now indexes the same memory location as a. They both index the "1" in memory.

a = <value of 2>; //"2" now replaces "1" at the indexed memory location.
output a; //In this case would get the index value the language uses.
output b; //You'd get the same index value as a since they index the same memory location.
output <valueof a>; //Now you get "2", because however it's done in the language you have extracted the data in the memory location indexed by a.
output <valueof b>; //Same output as before as b indexes the same memory location as a. 
```

在值传递语言中，b 仍然会得到 1，a 现在会得到 2。这是因为 b 不会被分配与 a 相同的引用。它将被分配该值作为新的参考。通用代码看起来相同，但会给您不同的结果。

```
a = <valueof 1>; //"1" is now stored in memory, and a is a index to "1" in memory.
b = a; //b now indexes a new memory location that now also stores "1".

a = <value of 2>; //"2" now replaces "1" at the indexed memory location.
output a; //You get "2" because a pass by value language will be designed to give you value, not the index.
output b; //You get "1" because when b was assigned to match a, a stored "1". But b is independent of a once assignment is complete. 
```

混淆来自这样一个事实，即在某些情况下，Java 使用按引用传递机制来实现按值传递设计。在原语的情况下，Java 充当按值传递。在对象的情况下，它充当引用传递。而且，如果您将原语包装在通常推荐的对象中，它将充当引用传递。但是，虽然字符串是对象，但它们也可以作为值传递。但是字符串很奇怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T19:42:00.450

Java 变量通过引用传递。因此，如果您已声明`Object obj`, then`obj`将始终是对当前范围内同一对象的引用。传递`obj`给方法时，传递的不是对象的副本，而是对它的引用。

此外，Java 还具有用于实现该接口的集合的迭代器`Iterable`，您可能想研究一下。这些行为就像指向 a`List`或类似中特定位置的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T19:42:38.403

您创建一个包含所有可能排序规则类型列表的 Enum，并向 Table 和 Column 类添加一个名为 collat​​ionType 的成员/属性，并将相同的 Enum 成员分配给它们相同的对象。

# c# - 具有相同签名的两个方法的互斥约束

> ID：11040161
> 
> 赞同：8
> 
> 时间：2012-06-14T19:37:27.360
> 
> 标签：c#

所以这两种方法具有相同的签名但不同的约束

```
public static void Method<T>(ref T variable) where T : struct { }

public static void Method<T>(ref T variable) where T : class { } 
```

但是它们不能在单个类中定义，因为它们具有相同的签名。但在这种特殊情况下，它们是相互排斥的。（除非我错了）

我知道您可以添加额外的约束`class`，`struct`但您不能同时指定两者`struct`和`class`相同的方法。那么为什么编译失败呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T19:39:06.223

[通用约束不被视为方法签名的一部分](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)（感谢[@Anthony](https://stackoverflow.com/users/414076/anthony-pegram)提供链接）。

就编译器而言，您有一个*重复*的方法 - 相同数量和类型的参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T19:39:24.457

它们在语义上是互斥的，是的。但是编译器认为它们具有相同的“名称”，因此存在歧义。“名称”在这里的意思是“方法签名”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T19:39:53.680

尽管编译器可能足够聪明，可以弄清楚（它似乎不是），但您不知道要做什么`object`（因为它可以是`class`或`struct`）。

# python - datetime：以微秒为单位的舍入/修剪位数

> ID：11040177
> 
> 赞同：69
> 
> 时间：2012-06-14T19:38:57.910
> 
> 标签：python, datetime, formatter

目前我正在记录东西，我正在使用我自己的格式化程序和自定义`formatTime()`：

```
def formatTime(self, _record, _datefmt):
    t = datetime.datetime.now()
    return t.strftime('%Y-%m-%d %H:%M:%S.%f') 
```

我的问题是微秒`%f`是六位数。反正有没有吐出更少的数字，比如微秒的前三位？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-06-14T19:42:57.467

最简单的方法是使用切片来切掉微秒的最后三位数字：

```
def format_time():
    t = datetime.datetime.now()
    s = t.strftime('%Y-%m-%d %H:%M:%S.%f')
    return s[:-3] 
```

我强烈建议只切碎。我曾经写过一些记录代码，它对时间戳进行舍入而不是截断，当舍入更改最后一位时，我发现它实际上有点令人困惑。有定时代码在某个时间戳停止运行，但由于四舍五入，存在具有该时间戳的日志事件。切碎更简单，更可预测。

如果你想实际地对数字进行四舍五入而不是仅仅切碎，那就需要做更多的工作，但并不可怕：

```
def format_time():
    t = datetime.datetime.now()
    s = t.strftime('%Y-%m-%d %H:%M:%S.%f')
    head = s[:-7] # everything up to the '.'
    tail = s[-7:] # the '.' and the 6 digits after it
    f = float(tail)
    temp = "{:.03f}".format(f)  # for Python 2.x: temp = "%.3f" % f
    new_tail = temp[1:] # temp[0] is always '0'; get rid of it
    return head + new_tail 
```

显然，您可以用更少的变量来简化上述内容；我只是想让它很容易理解。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2021-04-15T09:02:43.417

从 Python 3.6 开始，该语言内置了以下功能：

```
def format_time():
    t = datetime.datetime.now()
    s = t.isoformat(timespec='milliseconds')
    return s 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-05T21:11:55.533

此方法应始终返回与此完全相同的时间戳（有或没有时区，取决于输入`dt`对象是否包含时区）：

**2016-08-05T18:18:54.776+0000**

它需要一个`datetime`对象作为输入（您可以使用 生成`datetime.datetime.now()`）。要获得像我的示例输出中那样的时区，您需要`import pytz`并通过`datetime.datetime.now(pytz.utc)`.

```
import pytz, datetime

time_format(datetime.datetime.now(pytz.utc))

def time_format(dt):
    return "%s:%.3f%s" % (
        dt.strftime('%Y-%m-%dT%H:%M'),
        float("%.3f" % (dt.second + dt.microsecond / 1e6)),
        dt.strftime('%z')
    ) 
```

我注意到，如果有一个（例如`0.870`become `0.87`），上面的一些其他方法会省略尾随零，这导致我将这些时间戳输入的解析器出现问题。这种方法没有这个问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-12T07:32:05.163

一个适用于所有情况的简单解决方案：

```
def format_time():
    t = datetime.datetime.now()
    if t.microsecond % 1000 >= 500:  # check if there will be rounding up
        t = t + datetime.timedelta(milliseconds=1)  # manually round up
    return t.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3] 
```

基本上，您首先对日期对象本身进行手动舍入，然后您可以安全地修剪微秒。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-03T16:09:31.620

编辑：正如一些人在下面的评论中指出的那样，当微秒值达到 999500 时，此解决方案（以及上述解决方案）的四舍五入会带来问题，因为 999.5 会四舍五入为 1000（溢出）。

如果没有重新实现 strftime 以支持我们想要的格式（由舍入引起的潜在溢出需要传播到几秒，然后是几分钟等），只截断到前 3 位数字要简单得多，如接受的答案，或使用类似的东西：

`'{:03}'.format(int(999999/1000))`

-- 原始答案保留在下面 --

就我而言，我试图用毫秒格式化为“ddd”的日期戳。我最终用来获得毫秒的解决方案是使用对象的`microsecond`属性`datetime`，将其除以 1000.0，必要时用零填充，然后用格式对其进行舍入。它看起来像这样：

```
'{:03.0f}'.format(datetime.now().microsecond / 1000.0)
# Produces: '033', '499', etc. 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-05-14T23:16:40.020

您可以从微秒中减去当前日期时间。

```
d = datetime.datetime.now()
current_time = d - datetime.timedelta(microseconds=d.microsecond) 
```

这将`2021-05-14 16:11:21.916229`变成`2021-05-14 16:11:21`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-13T00:12:15.397

此方法允许灵活的精度，如果您指定的精度过高，则会消耗整个微秒值。

```
def formatTime(self, _record, _datefmt, precision=3):
    dt = datetime.datetime.now()
    us = str(dt.microsecond)
    f = us[:precision] if len(us) > precision else us
    return "%d-%d-%d %d:%d:%d.%d" % (dt.year, dt.month, dt.day, dt.hour, dt.minute, dt.second, int(f)) 
```

此方法实现舍入到小数点后 3 位：

```
import datetime
from decimal import *

def formatTime(self, _record, _datefmt, precision='0.001'):
    dt = datetime.datetime.now()
    seconds = float("%d.%d" % (dt.second, dt.microsecond))
    return "%d-%d-%d %d:%d:%s" % (dt.year, dt.month, dt.day, dt.hour, dt.minute,
                             float(Decimal(seconds).quantize(Decimal(precision), rounding=ROUND_HALF_UP))) 
```

`strftime`我故意避免使用该方法，因为**我不希望在**不重新验证的情况下修改完全序列化的日期时间对象。这种方式还可以显示日期内部，以防您想进一步修改它。

在舍入示例中，请注意`Decimal`模块的精度是基于字符串的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-24T08:34:02.527

这是我使用正则表达式的解决方案：

```
import re

# Capture 6 digits after dot in a group.
regexp = re.compile(r'\.(\d{6})')
def to_splunk_iso(dt):
    """Converts the datetime object to Splunk isoformat string."""
    # 6-digits string.
    microseconds = regexp.search(dt.isoformat()).group(1)
    return regexp.sub('.%d' % round(float(microseconds) / 1000), dt.isoformat()) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-09T04:58:37.413

根据[Pablojim](https://stackoverflow.com/users/110478/pablojim)修复建议的解决方案评论：

```
from datetime import datetime

dt = datetime.now()

dt_round_microsec = round(dt.microsecond/1000) #number of zeroes to round   
dt = dt.replace(microsecond=dt_round_microsec) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-05T09:44:40.280

如果曾经想获得星期几（即'星期日）'以及结果，那么切片'[：-3]'将不起作用。到时候你可以一起去，

```
dt = datetime.datetime.now()
print("{}.{:03d} {}".format(dt.strftime('%Y-%m-%d %I:%M:%S'), dt.microsecond//1000, dt.strftime("%A")))

#Output: '2019-05-05 03:11:22.211 Sunday' 
```

%H - 24 小时制

%I - 12 小时制

谢谢，

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-23T17:05:25.653

在这里添加我的两美分，因为这种方法将允许您编写微秒格式，就像您使用 c 样式的浮点数一样。他们都使用`%f`.

```
import datetime
import re

def format_datetime(date, format):
    """Format a ``datetime`` object with microsecond precision.
       Pass your microsecond as you would format a c-string float.
       e.g "%.3f"

       Args:
            date (datetime.datetime): You input ``datetime`` obj.
            format (str): Your strftime format string.

        Returns:
            str: Your formatted datetime string.
    """
    # We need to check if formatted_str contains "%.xf" (x = a number) 
    float_format = r"(%\.\d+f)"
    has_float_format = re.search(float_format, format)
    if has_float_format:
        # make microseconds be decimal place. Might be a better way to do this
        microseconds = date.microsecond
        while int(microseconds):  # quit once it's 0
            microseconds /= 10
        ms_str = has_float_format.group(1) % microseconds
        format = re.sub(float_format, ms_str[2:], format)
    return date.strftime(format)

print(datetime.datetime.now(), "%H:%M:%S.%.3f")
# '17:58:54.424' 
```

# glassfish - JavaMail - Pop3Folder 意外关闭

> ID：11040183
> 
> 赞同：0
> 
> 时间：2012-06-14T19:39:14.897
> 
> 标签：glassfish, jakarta-mail

在成功打开`Pop3Folder`并从中检索消息后，我有时会在`folder.isOpen`返回时直奔主题`false`。同时，`Pop3Folder`在调试模式下查看 's 字段时，我看到该字段`opened`设置为`true`.

有人可以给我一个提示，这里可能出了什么问题？

这是代码：

```
public void popMail(MessageProcessor messageProcessor) throws MessagingException {
  Folder inboxFolder = null;
  Store store = null;
  try {
    store = mailSession.getStore();
    store.connect(mailSession.getProperty("mail.user"),
        mailSession.getProperty("mail.password"));
    // OK. Connected to POP3 Store.
    inboxFolder = store.getFolder("inbox");
    inboxFolder.open(Folder.READ_WRITE);
    // The folder is successfully opened.
    Message[] msgs = inboxFolder.getMessages();
    // Messages are successfully retrieved.
    if (msgs != null && msgs.length > 0) {
      for (Message msg : msgs) {
        if (messageProcessor != null) {
          // Calling custom listener to process message
          messageProcessor.processMessage(msg);
        }
        msg.setFlag(Flag.DELETED, true);
      }
    }
  } finally {
    // Oops, inboxFolder.isOpen returns false.
    // Meanwhile I see in debug mode that inboxFolder#opened is set to true
    if (inboxFolder != null && inboxFolder.isOpen()) {
      try {
        inboxFolder.close(true);
      } catch (MessagingException e) {
        log.warn("Error while closing folder");
      }
    } if (store != null) {
        try {
          store.close();
        } catch (MessagingException e) {
          log.warn("Error while closing store");
        }
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:21:04.410

如果您的 processMessage 方法花费的时间太长，服务器可能会超时连接。打开会话调试并检查协议跟踪以寻找线索。

# c# - 取决于 MSF 中的决策的参数

> ID：11040197
> 
> 赞同：2
> 
> 时间：2012-06-14T19:40:03.910
> 
> 标签：c#, .net, optimization, constraint-programming, ms-solver-foundation

在 Microsoft Solver Foundation 中，我想知道是否可以添加一个参数，其值取决于决策值。

即我想要 TSP 模型的一些东西，但它也应该考虑从一个点到另一个点的流量。请注意：交通取决于销售人员在该路线上行驶的时间。

这是模型：

我有一个城市之间所有可能组合的矩阵。

决策变量是`Order`销售人员的路线。0 是第一个，1 秒，...

我有一个属性`timeToTravel`，该属性绑定到一个属性，该属性从该值计算路线发生的时间，`Order`并返回行程时间，包括当天该时间的交通量。

在我看来，参数值在`Solve`调用函数时被读取一次并缓存，我正确吗？如果是，有没有人有任何建议来解决这个问题？

*[最初我在 MSF 论坛上](http://social.msdn.microsoft.com/Forums/en-US/solverfoundation/thread/54a1ad6a-dc9e-4040-81ec-604a5f999cfb)问了这个问题，但我认为它会在 Stack Overflow 上得到更多关注。此外，我对 MSF 以外的其他求解器持开放态度，但我更愿意留在 .NET 环境中。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:43:14.953

[这里](http://nathanbrixius.wordpress.com/2009/04/27/solving-traveling-salesman-problems-using-solver-foundation/)有一篇关于使用 Solver Foundation 解决“静态”旅行商问题的好文章。如果您还没有自己的实现，也许您可​​以将您的解决方案基于该代码。

这是上述文章的目标表述：

```
// Goal: minimize the length of the tour.
Goal goal = model.AddGoal("TourLength", GoalKind.Minimize,
    Model.Sum(Model.ForEach(city, i => 
        Model.ForEachWhere(city, 
            j => dist[i, j] * assign[i, j], j => i != j)))); 
```

如果我理解正确，在您的问题中，两个城市之间旅行的时间取决于一天中的时间？

我不相信您可以`dist[,]` `double`在优化期间动态更新数组。但是，使用[Model](http://msdn.microsoft.com/en-us/library/microsoft.solverfoundation.services.model%28v=vs.93%29)类的构建块，应该可以将`dist[,]`数组重新表示为一组函数，这些函数依赖于已行驶的总距离/时间。

为了完整起见，[这里](http://yetanothermathprogrammingconsultant.blogspot.se/2009/03/tsp-in-oml-ms-solver-foundation.html)是另一篇关于使用 OML 制定 TSP 的有趣文章。

# windows-7 - 如何在 Windows 批处理文件中组合文件名和扩展名？

> ID：11040199
> 
> 赞同：0
> 
> 时间：2012-06-14T19:40:06.567
> 
> 标签：windows-7, batch-file, command

我已经设法提取文件名和扩展名并将其传递给`.bat`Windows 中的文件。就像是

```
%1 = filename
%2 = extension 
```

我遇到的问题是我似乎做不到，`%1%2`因为该命令似乎不喜欢该`%1%2`命令？如果我这样做`%1<space>%2`，它看起来很高兴，但是文件被破坏了，因为它就像`file<space>.js`

我怎样才能让它们并排打印出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:46:44.350

```
@set NAME=somefile
@set SUFFIX=txt
@echo file = %NAME%.%SUFFIX% 
```

输出：

> 文件 = somefile.txt

# javascript - 如何获取 SELECT COUNT(*) 的值？

> ID：11040200
> 
> 赞同：0
> 
> 时间：2012-06-14T19:40:08.263
> 
> 标签：javascript, sqlite, firefox-addon, storage

我真的整天都在努力让 Firefox 服从我的意志......

我想 ：

```
int c = SELECT COUNT(*) FROM ... 
```

我试过`executeAsync({...});`了，但我认为这是错误的范例，因为我想要立即得到结果。（并`mozIStoragePendingStatement`导致错误）

```
var count = 0;
var conn = Services.storage.openDatabase(dbfile); // Will also create the file if it does not exist
let statement = conn.createStatement("SELECT COUNT(*) FROM edges LIMIT 42;");
console.log("columns: " + statement.columnCount);  // prints "1";
console.log("col name:" + statement.getColumnName(0)); // is "COUNT(*)"

while (statement.executeStep())
    count = statement.row.getResultByIndex(0); // "illegal value"
    count = statement.row.getString(0); // "illegal value", too
    count = statement.row.COUNT(*); // hahaha. still not working
    count = statement.row[0]; // hahaha. "undefinded"
    count = statement.row[1]; // hahaha. "undefinded"
}
statement.reset(); 
```

它基本上可以工作，但我没有得到价值。所有语句（循环内的语句）有什么问题。

感谢您的任何提示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:48:45.947

> 我试过`executeAsync({...});`了，但我认为这是错误的范例，因为我想要立即得到结果。

您不应该这样，Storage API 是异步的是有原因的。对数据库的同步访问可能会导致随机延迟（例如，如果硬盘驱动器繁忙）。而且由于您的代码在主线程（为用户界面提供服务的同一线程）上执行，因此在您的代码等待数据库响应时，整个用户界面将挂起。Mozilla 开发人员在 Firefox 3 中尝试了同步数据库访问，并很快注意到它降低了用户体验 - 因此使用异步 API，数据库处理发生在后台线程上，不会阻塞任何东西。

您应该更改代码以异步工作。例如，应该这样做：

```
Components.utils.import("resource://gre/modules/Services.jsm");

var conn = Services.storage.openDatabase(dbfile);
if (conn.schemaVersion < 1)
{
  conn.createTable("edges", "s INTEGER, t INTEGER");
  conn.schemaVersion = 1;
}

var statement = conn.createStatement("SELECT COUNT(*) FROM edges");
statement.executeAsync({
  handleResult: function(resultSet)
  {
    var row = resultSet.getNextRow();
    var count = row.getResultByIndex(0);
    processResult(count);
  },
  handleError: function(error) {},
  handleCompletion: function(reason) {}
});

// Close connection once the pending operations are completed
conn.asyncClose(); 
```

另请参阅：[mozIStorageResultSet](https://developer.mozilla.org/en/mozIStorageResultSet)、[mozIStorageRow](https://developer.mozilla.org/en/mozIStorageRow)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:04:51.147

尝试别名计数（*）作为总数，然后获取

# python - 按字符串位置解析文本文件

> ID：11040201
> 
> 赞同：1
> 
> 时间：2012-06-14T19:40:12.120
> 
> 标签：python, parsing

我有一个文本文件，需要在一行中的某些字符位置拆分。理想情况下，我想简单地在指定位置插入一个逗号，以便我可以将其加载到 MS Access 表（或类似表）中。文本的线条如下所示：

"00ZZ101 Bla Bla BlaBlaBla 022000G0132000R6G00BBDJ1000 091030820514 BlaBla Bla 1PP"

我需要从0:4、13:29、30:32、33:34等开始解析文本……

我需要将结果基本上用逗号分隔，以便我可以将它们加载到表格中。所以基本上取前四个字符并拆分它们，然后将第 13 到第 29 个字符拆分，依此类推。文本文件中的问题在每行末尾（第 167 个字符位置）有一个回车。所以我需要根据一些规则将每一行分成多个部分，这些规则决定了哪些数据应该组合在一起。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T19:48:59.000

从 Python 控制台：

```
>>> s = "00ZZ101 Bla Bla BlaBlaBlaBla 022000G0132000R6G00BBDJ1000 091030820514 BlaBla Bla 1PP"
>>> slices = [(0,4), (13,29), (30,32), (33,34)]
>>> [s[slice(*slc)] for slc in slices]
['00ZZ', 'la BlaBlaBlaBla ', '22', '0'] 
```

如果您从输入文本文件中的每一行读取字符串，这是读取文件并依次处理每一行的方法：

```
with open('xyzzy.txt') as sourcefile:
    for line in sourcefile: 
        # process each line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:44:15.813

你有：

```
s = "00ZZ101 Bla Bla BlaBlaBlaBla 022000G0132000R6G00BBDJ1000 091030820514 BlaBla Bla 1PP" 
```

在 python 外壳中

```
>>> s = "00ZZ101 Bla Bla BlaBlaBlaBla 022000G0132000R6G00BBDJ1000 091030820514 BlaBla Bla 1PP"
>>> s[0:4]
'00ZZ'
>>> s[13:29]
'la BlaBlaBlaBla '
>>> s[30:32]
'22'
>>> 
```

# c++ - 函数映射 c++

> ID：11040203
> 
> 赞同：15
> 
> 时间：2012-06-14T19:40:18.453
> 
> 标签：c++, function-pointers

我制作了一张功能图。所有这些函数都是无效的并且接收单个字符串参数。

代码：

```
void f1(string params){...}
void f2(string params){...}
void f3(string params){...}

map<string , void*> funcMap;

funcMap["f1"] =(void*)&f1;
funcMap["f2"] =(void*)&f2;
funcMap["f3"] =(void*)&f3; 
```

我如何调用函数？我尝试了下一个代码，但 id 不起作用：

```
void (*func)(string) =  &funcMap[commandType];
func(commandParam); 
```

我收到此错误消息：

```
Server.cpp:160:46: error: cannot convert ‘void**’ to ‘void (*)(std::string) {aka void (*)(std::basic_string<char>)}’ in initialization 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-14T19:42:56.903

```
using pfunc = void (*)(string);

map<string, pfunc> funcMap; 
funcMap["f1"] = f1; //and so forth 
```

然后调用：

```
pfunc f = funcMap[commandType];
(*f)(commandParam); 
```

一般来说，为什么要抛弃类型安全？如果它是函数指针的映射，则将其声明为一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T19:50:49.303

为什么不将它们作为单独的类。

然后将方法设为虚拟。

然后，您可以在字符串和基类之间建立映射。

IE

```
class Someoperation
{
    virtual void Doit() = 0;
};

map<string, Someopertion> ops; 
```

然后

```
class MyOp : public Someoperation
{
   void Doit() { /* Some code here */}
}; 
```

只需添加对象

```
ops["Hello"] = MyOp(); 
```

然后调用它

```
ops["Hello"].Doit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T19:41:13.770

`&funcMap[commandType]`

只需放下`&`. 您的编译错误在这里很有用。它`void**`在右侧有一个，这是因为您获取了函数指针的*地址*。您不希望那里有两个间接级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-17T10:01:05.793

尝试 C++ 风格。它有分配和继承的开销，但如果您将来需要更多功能，它会更加灵活和可扩展。

```
#include <iostream>
#include <string>
#include <unordered_map>
#include <memory>
using namespace std;

class Someoperation {
public:
    virtual void Doit() = 0;
};

class MyOp1 : public Someoperation {
public:
    void Doit() final { cout << "MyOp1" << endl; }
};

class MyOp2 : public Someoperation {
public:
    void Doit() final { cout << "MyOp2" << endl; }
};

int main() {
    unordered_map<string, unique_ptr<Someoperation> > ops;

    ops["1"] = unique_ptr<Someoperation>(new MyOp1);
    ops["2"] = unique_ptr<Someoperation>(new MyOp2);
    ops["1"]->Doit();   // Out: MyOp1
    ops["2"]->Doit();   // Out: MyOp2

    return 0;
} 
```

# java - 解释“与函数不兼容的参数”异常消息

> ID：11040206
> 
> 赞同：9
> 
> 时间：2012-06-14T19:40:33.453
> 
> 标签：java, exception, verifyerror

关于 java.lang.VerifyError 异常的快速问题。假设我收到如下所示的错误：

```
Java call terminated by uncaught Java exception: java.lang.VerifyError:(class: com/.../MyClassName, method: <init> signature: (Ljava/io/Reader;)V) Incompatible argument to function 
```

您能帮我理解“init”和“(Ljava/io/Reader;)V)”部分的相关内容吗？对我来说，它们看起来不像方法名称或签名，但我对 java 不太熟悉。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T19:43:39.417

此错误意味着在您的代码中某处，您尝试调用`<init>`传入错误参数集的构造函数（方法）。预期的参数是一个`Reader`对象。

这可能意味着您之前编译了一个类文件，然后以某种方式更改了类定义而没有重新编译类文件。因此，您的代码会尝试调用不再存在的函数。尝试重新编译代码，看看是否可以修复它。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T19:55:34.730

如果您在应用程序服务器上运行应用程序，则可能是类加载问题。

您针对库编译了代码，当您尝试运行代码时，它正在针对库的不同（旧？）版本运行。

较旧的库可能没有该方法或构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T15:51:26.597

只是为了留下一个不同的原因。

始终在应用程序服务器上（在我的情况下为 WildFly 10），您可能会在模块和 EAR 库上加载相同的库。如果这个库包含需要由模块实现的接口，这可能会导致冲突，因为由两个不同的类加载器加载的同一个类/接口被认为是两种不同的类型。

# mysql - 禁用 MySQL 严格模式

> ID：11040207
> 
> 赞同：6
> 
> 时间：2012-06-14T19:40:37.243
> 
> 标签：mysql, sql

我正在将 5000 个 csv 文件扫描到数据库中。遗憾的是，文件有 ''，为 0。因此，当我运行我的脚本时，它会崩溃。我听说这个错误可以通过简单地禁用严格模式来避免。因此，我尝试禁用严格模式，以允许我将空字符串读取为数字字段的 0。但是错误仍然存​​在。

那么禁用严格模式是否允许将 '' 读入 int 字段？（'' 是两个 qoutes 即空字符串）

如果是这样，为什么要设置

sql_mode=''

在 my.ini 配置文件中不能解决问题。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-14T19:49:23.533

`LOAD DATA INFILE`我猜您使用命令导入 CSV 文件。在执行此命令之前，请键入：

```
SET sql_mode = ''; 
```

有关各种 SQL 模式的更多信息，请参阅[文档](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-12T13:59:43.190

我需要这样做，并正常工作：

1.  要禁用严格的 SQL 模式，请以 root 身份 SSH 到您的服务器
2.  创建这个文件：*/etc/mysql/conf.d/disable_strict_mode.cnf*
3.  打开文件并输入这两行：

    [mysqld] sql_mode=IGNORE_SPACE,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

4.  使用以下命令重新启动 MySQL：*sudo service mysql restart*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T20:00:09.797

您可以修改您的[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)语句以更正这些值。这些方面的东西应该起作用。

```
LOAD DATA INFILE 'filepath.csv'
INTO TABLE MyTable(Column1,@Col2,@Col3)
SET Column2=CASE WHEN @Col2 = '' THEN 0 ELSE @Col2 END
,Column3=CASE WHEN @Col3 = '' THEN 0 ELSE @Col3 END; 
```

此查询将值按原样导入 column1，并修复第 2 列和第 3 列的值。使用它，您不必禁用严格模式，并且您实际上可以控制进入数据库的数据是什么能够以可靠的方式修复它。您还可以使用此功能更改日期格式，或导入十六进制编码的 blob 值。非常有用的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-08T20:42:45.383

我把这个放在一个答案中，因为我还没有代表评论你关于设置不是“持有”的后续问题。根据我对 MySQL 的经验，配置文件中的设置仅在启动服务器时读取，因此您必须重新启动服务器才能使新设置生效。

服务器是命令行客户端在运行命令时与之通信的守护进程，因此重新启动命令行客户端实际上不会重新启动服务器本身。

此答案提供了更详细的解释：[https](https://serverfault.com/a/79051) ://serverfault.com/a/79051 。

# javascript - JS正则表达式匹配字符串中的函数参数

> ID：11040208
> 
> 赞同：2
> 
> 时间：2012-06-14T19:40:46.470
> 
> 标签：javascript, regex, string-parsing

我有一个这样的字符串：`matrix(10, 0, 1, 0, -198, 23)`

然后我需要匹配该函数的参数并放入数组中：

```
var regexp = /.../gi
var match = regexp.exe('matrix(10, 0, 1, 0, -198, 23)');

console.debug(match) // must return: [10, 0, 1, 0, -198, 23] 
```

我对正则表达式不是很熟悉，但我认为这将是完成这项工作的最快方法。

在这种情况下，拆分字符串是不可能的。

遮阳篷的性能测试：http: [//jsperf.com/regexp-match-vs-string-split](http://jsperf.com/regexp-match-vs-string-split)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T19:46:11.573

```
'matrix(10, 0, 1, 0, -198, 23)'.match(/-?\d+/g) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:51:59.093

三个步骤：

1.  使用正则表达式获取括号的内容
2.  自己替换括号，一无所有
3.  以逗号分隔，后跟 0 个或多个空格

```
var str = 'matrix(10, 0, 1, 0, -198, 23)',
    regex = /\(.*\)/,
    arr;

str = str.match(regex)[0];
str = str.replace(/[()]/g, '');
arr = str.split(/,\s+/);

​console.log(arr);​ 
```

# c# - 在 Silverlight 中，一个属性可以绑定多少次？

> ID：11040211
> 
> 赞同：1
> 
> 时间：2012-06-14T19:40:51.050
> 
> 标签：c#, silverlight, data-binding

我有一个场景，需要在网格中显示一堆数据，但它以如此复杂的方式使用列组和行组，以至于我们无法使用数据网格。我们所拥有的是在 A、B 和 C 行中具有垂直列组 c1 和 c2 的部分组。并且可能会显示此控件的 2 个版本。

A最多可以有5个。每个A最多可以有5个B，每个B有8个C，每个C在c1中有5个属性，在c2中有5个属性。

这些 B 中的每一个都打印出 C 的标签，然后是 c1 的该标签的所有值，然后是 c2 下该标签的所有属性。

每个 C 都可以隐藏、显示或突出显示，由网格外的不确定复选框控制。

我遇到的问题是，在第 5 个 A 附近，它下面的所有 C 开始失去与复选框的绑定（通过相对绑定绑定）。

一个属性可以绑定多少次以使其停止评估绑定是否有限制？每个 C 都有自己的复选框，它们几乎同时发出。事情是它都是一个 ItemsControl 所以它在最后一次迭代中 - 前 4 次没有任何变化，这一切都完成了，这只是控件的第 5 次迭代。

如果我删除其中一个 C 以减少需要处理的内容，问题就会消失。如果我添加另一个，问题会更早发生。

我已经绘制了一个快速图像来显示我在这里谈论的内容： ![在此处输入图像描述](../Images/e3dbc0c0643f7b20a681f4c724c2fa9d.png) 请注意，任何 C 都可以突出显示或隐藏。但是在某一点之后，问题是突出显示和隐藏简单地停止了。输出窗口中没有错误，异常，没有任何内容。绑定只是停止被评估。

* * *

**更新**：

看来是有限制的。如果我使用以下 xaml 进行测试：

```
 <ItemsControl ItemsSource="{Binding TestCollection}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Index}" Visibility="{Binding DataContext.TestVisibility, RelativeSource={RelativeSource AncestorType=navigation:Page}}" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

并像这样在我的视图模型中填充它：

```
 List<TestModelObject> initList = new List<TestModelObject>();
        for (int i = 0; i < 15000; i++)
        {
            initList.Add(new TestModelObject(i));
        }

        TestCollection = new ObservableCollection<TestModelObject>(initList); 
```

并在我的 ViewModel 中将 TestVisibility 设置为 false。在运行它并让它处理之后，因为一次将 15K 项添加到 UI 需要一点时间，如果我的 ItemsControl 中的整数从 9640 左右开始，我会得到一个列表。但是，如果我重新加载，我每次都会得到一个稍微不同的数字。它基于执行时间吗？

我在 Silverlight 5 和 Silverlight 4 中都对此进行了测试。对于 silverlight 4，我当然使用了 RelativeBinding 的解决方法，但结果是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:18:41.553

据我所知，没有也不应该有约束力的限制。

如果我在哪里猜，我会说您在 C 上覆盖 Equals 或 GetHashCode。（或者因为您在同一个容器中多次使用相同的 C 实例，不清楚您是否这样做）。当多个项目彼此相等，或者相等的项目不相等时，应该或类似的一些与选择相关的非常奇怪的事情可能会发生，就像你上面描述的那样。确保每个 C 实例都会产生唯一的相等和/或哈希码值。

# tomcat - tomcat ssl 四月 x509

> ID：11040212
> 
> 赞同：3
> 
> 时间：2012-06-14T19:40:51.667
> 
> 标签：tomcat, ssl, apr

这是我在这个论坛的第一个问题，请提前接受我的歉意。我在使用 SSL 和 APR 配置 tomcat 时遇到问题。

**上下文：** tomcat 7、Java 7、OpenSSL、几个有效的 x509 证书。

**我的 https 连接器：**

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true" maxThreads="150" scheme="https" secure="true"
           SSLVerifyClient="require" SSLVerifyDepth="3"
           SSLCertificateFile="${catalina.home}/security/server.pem"
           SSLCertificateKeyFile="${catalina.home}/security/server.key"
           SSLCertificateChainFile="${catalina.home}/security/trust.pem"
           SSLCACertificateFile="${catalina.home}/security/trust_ca.pem"
           /> 
```

**PKI 树：**

```
ROOT -> CA_intermediate -> CA4Servers -> server (tomcat)
                                      -> serv2Cert
                        -> CA4People  -> people1Cert 
```

在 Windows 密钥库 (Windows-MY) 中具有 2 个证书的 Windows pc 客户端：people1Cert 和 serv2Cert

*trust.pem*包括 ROOT、CA_intermediate、CA4Servers 和 tomcat pem 编码的公钥。 *trust_ca.pem*所有 trust.pem 但 tomcat 证书。

**我想要什么：** 转到`https://tomcat.server:8443/`，浏览器向我显示带有一个证书的证书选择器对话框：serv2Cert，我选择它并成功进入网页。如果我选择另一个证书，服务器会显示一个错误页面。

**我的问题：** 当我得到证书选择器对话框时，我看到 2 个证书：serv2Cert 和 people1Cert (?)。他们两个都让我去网页！如果我更改 SSLVerifyDepth 或 trust_ca.pem 以将客户端证书限制为仅 serv2Cert，我会收到诸如**未知 ca**或**未知证书之类的 SSL 错误**

我已经尝试过一些 SSLVerifyDepth 值，例如 1、2、3、4。只有“3”让我登录服务器。如果我从 trust_ca.pem 中删除除 ROOT 之外的所有 CA 证书，让我使用两个客户端证书（people1Cert 和 serv2Cert）登录。

我会为此提供任何帮助，对不起我的英语不好，提前谢谢你。最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:00:07.723

You can't do this with Tomcat. It is very inflexible about SSL. Note that you are configuring for the entire Tomcat container, not a single web app. I recommend you put an Apache HTTP in front of Tomcat, i.e. as a reverse proxy. Apache HTTPD lets you configure every aspect of SSL, including acceptable client identities, right down to the level of individual directories.

# database - 在德比中，我应该使用 APP 模式还是 MYDBNAME 模式

> ID：11040213
> 
> 赞同：0
> 
> 时间：2012-06-14T19:40:54.643
> 
> 标签：database, derby, javadb

每次我创建一个 derby 数据库时，都会有几个模式，包括 APP 模式和一个与 USERNAME 同名的模式。我应该使用哪个模式，APP 还是 USERNAME 模式？如果将 USERNAME 架构设置为默认架构，为什么要引入 APP 架构。希望这对德比职业选手来说是一个快速的问题。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:47:35.353

你可以使用任何你想要的模式。如果您没有明确指定模式，Derby 会为您选择一个默认模式。[http://db.apache.org/derby/docs/10.8/ref/rrefsqlj32268.html](http://db.apache.org/derby/docs/10.8/ref/rrefsqlj32268.html)。我不确定您为什么要获得与数据库同名的架构；您是否有意设置该架构？

# android - 调整视频视图大小

> ID：11040217
> 
> 赞同：8
> 
> 时间：2012-06-14T19:41:06.033
> 
> 标签：android, android-widget, android-videoview

我正在尝试动态设置 Android VideoView 的大小。我查看了 StackOverflow 以及互联网；我发现的最佳解决方案来自[这里](http://clseto.mysinablog.com/index.php?op=ViewArticle&articleId=2992625)。我把我的实现放在下面：

```
public class ResizableVideoView extends VideoView {

    public ResizableVideoView(Context c) {
        super(c);
    }

    private int mVideoWidth = 100;
    private int mVideoHeight = 100;

    public void changeVideoSize(int width, int height) {
        mVideoWidth = width;      
        mVideoHeight = height;

        // not sure whether it is useful or not but safe to do so
        getHolder().setFixedSize(width, height); 

        forceLayout();
        invalidate(); // very important, so that onMeasure will be triggered
    } 

    public void onMeasure(int specwidth, int specheight) {
        Log.i("onMeasure","On Measure has been called");
        setMeasuredDimension(mVideoWidth, mVideoHeight);
    }

    public void onDraw(Canvas c) {
        super.onDraw(c);
        Log.i("onDraw","Drawing...");
    }
} 
```

视频可以在 Android 模拟器和 Motorola Droid X 上正确调整大小；但在摩托罗拉 Droid 上，VideoView 会调整大小，但 VideoView 中播放的视频不会调整大小。在 Motorola Droid 上，如果 VideoView 设置为比播放视频更大的尺寸，VideoView 中会出现黑色背景，而在黑色背景之上，VideoView 左上角正在播放视频。

如何在 Android 中正确调整 VideoView 的大小？

谢谢，万斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:21:24.910

我的实现是这样的：

```
RelativeLayout.LayoutParams videoviewlp = new RelativeLayout.LayoutParams(newwidth, newheight);
    videoviewlp.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);
    videoviewlp.addRule(RelativeLayout.CENTER_VERTICAL, RelativeLayout.TRUE);
    videoview.setLayoutParams(videoviewlp);
    videoview.invalidate(); 
```

通过使视频视图无效，您将强制它使用新的 LayoutParams（和新尺寸）重新绘制整个视频视图。

# jquery - 将元素的字符串存储到变量中，通过 Toggle() 传递

> ID：11040219
> 
> 赞同：1
> 
> 时间：2012-06-14T19:41:15.053
> 
> 标签：jquery

我从一个包含标题的 div 框开始。

我希望有一个`toggle()`事件，当单击标题时，它将标题字符串存储到一个变量中，更改该标题的 HTML，并为`parent()`包含它的 div 框设置动画。

第二个功能是`parent()`再次为 div 框设置动画，并将 HTML 更改回其原始文本（将存储为变量。）

不过我遇到了麻烦，我不确定我的问题出在哪里。我`html()`用来“获取”原始标题的字符串，但我不确定这是否正确。我也不确定是否需要更多预防措施来传递变量或正确调用变量。

[http://jsfiddle.net/94nPv/1/](http://jsfiddle.net/94nPv/1/)

请让我知道我做错了什么。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:44:21.787

可以使用`.data()`方法存储原始html [http://jsfiddle.net/94nPv/3/](http://jsfiddle.net/94nPv/3/)

```
jQuery(document).ready(function($) {
    $('h5').toggle(function() {
        var $this = $(this);
        $this.data('originalText',$this.html());
        $this.parent('div.softwarebox').animate({ height: "700px" });
        $this.html("Close");
    }, function() {
        var $this = $(this);
        $this.parent('div.softwarebox').animate({ height: "19px" });
        $this.html($this.data('originalText'));
    });        
});​ 
```

略微优化（无需额外调用 .html 或 .data）：http: [//jsfiddle.net/94nPv/7/](http://jsfiddle.net/94nPv/7/)

```
jQuery(document).ready(function($) {
    $('h5').each(function(){
        var $this = $(this);
        $this.data('originalText',$this.html());
    });
    $('h5').click(function() {
        var $this = $(this);
        if ($this.text() === "Close") {
            $this.html($this.data('originalText'));
            $this.parent('div.softwarebox').animate({
                height: "19px"
            });
        }
        else {
            $this.text("Close");
            $this.parent('div.softwarebox').animate({
                height: "700px"
            });
        }
    });
});​ 
```

# .net - “Smtp”在命名空间“MailBee.SmtpMail”中不明确

> ID：11040222
> 
> 赞同：0
> 
> 时间：2012-06-14T19:41:20.200
> 
> 标签：.net, vb.net, email

我们第一次使用 MailBee，但收到此错误：

```
'Smtp' is ambiguous in the namespace 'MailBee.SmtpMail'. 
```

这是什么意思，我们如何创建 objSMTP 对象？

完整的编码如下所示：

```
Imports MailBee
Imports MailBee.DnsMX
Imports MailBee.Mime
Imports MailBee.SmtpMail
Imports MailBee.Pop3Mail
Imports MailBee.ImapMail
Imports MailBee.Security
Imports MailBee.AntiSpam
Imports MailBee.Outlook
Imports MailBee.Pdf

Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

        Dim objSMTP As New Smtp

        objSMTP = CreateObject("MailBee.SMTP")

        ' Enable logging SMTP session into a file
        objSMTP.EnableLogging = True
        objSMTP.LogFilePath = "C:\emad.txt"
        objSMTP.ClearLog()

        objSMTP.LicenseKey = "This part is hidden"

        ' Set SMTP server name
        objSMTP.ServerName = "mail.bluebottle.com"

        ' Enable SMTP authentication
        objSMTP.AuthMethod = 2

        ' Set authentication credentials
        objSMTP.UserName = "This part is hidden"
        objSMTP.Password = "secret"

        ' Set message properties
        objSMTP.FromAddr = "This part is hidden"
        objSMTP.ToAddr = "someone@gmail.com"
        objSMTP.Subject = "Test"
        objSMTP.BodyText = "Body of the test message"

        ' Try to send message
        If objSMTP.Send Then
            MsgBox("Sent successfully")
        Else
            MsgBox("Error #" & objSMTP.ErrCode & ", " & objSMTP.ErrDesc)
        End If

    End Sub
End Class 
```

有错误的行是 dim 语句行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:05:11.193

尝试这个：

```
 Dim objSMTP As New MailBee.Smtp 
```

同时，这不是必需的：

```
 objSMTP = CreateObject("MailBee.SMTP") 
```

它与 New MailBee.Smtp 行做同样的事情

# window - pyQT4：如何从另一个窗口打开一个窗口

> ID：11040223
> 
> 赞同：1
> 
> 时间：2012-06-14T19:41:28.203
> 
> 标签：window, pyqt4, qt-designer

单击按钮时，我试图打开一个窗口（QWidget）。我的问题是，无论我尝试了什么，当我点击按钮时，第二个窗口都不会出现。这两个窗口是使用 QTDesigner 创建的。这是一个小片段，解释了我正在尝试做的事情：

```
from PyQt4.QtGui import *
from PyQt4.QtCore import *
from win1 import *
from win2 import *
import sys

class win1(QWidget, Ui_Win1):
  def __init__(self, parent = None):
    self.parent = parent
    QWidget.__init__(self)
    self.setupUi(parent)
    self.connect(self.pushButton, SIGNAL("clicked()"), self.on_btn_clicked)

  def on_btn_clicked(self):
    self.child = win2(self.parent)
    self.child.show()

class win2(QWidget, Ui_Win2):
  def __init__(self, parent = None):
    QWidget.__init__(self)
    self.setupUi(parent)

def main(args):
  app = QApplication(args)
  win = QWidget()
  a = win1(win)
  win.show()
  result = app.exec_()

if __name__=="__main__":
    main(sys.argv) 
```

我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:39:18.880

不确定，但有两个随机的想法：

如果在 中添加打印语句`on_btn_clicked`，单击按钮时是否看到任何内容？这将诊断它是否是事件触发问题

`setupUI(parent)`如果您将命令更改为 ，它是否有效`setupUI(self)`？

# c++ - 在 1 秒内打印前 100 万个素数，程序大小为 50000 字节且内存有限

> ID：11040224
> 
> 赞同：0
> 
> 时间：2012-06-14T19:41:28.697
> 
> 标签：c++, primes, sieve-of-eratosthenes, sieve-of-atkin

我尝试了 Eratosthenes 的筛子：以下是我的代码：

```
void prime_eratos(int N) {
    int root = (int)sqrt((double)N);
    bool *A = new bool[N + 1];
    memset(A, 0, sizeof(bool) * (N + 1));
    for (int m = 2; m <= root; m++) {
        if (!A[m]) {
            printf("%d  ",m);
            for (int k = m * m; k <= N; k += m)
                A[k] = true;
        }
    }

    for (int m = root; m <= N; m++)
        if (!A[m])
            printf("%d  ",m);
    delete [] A; 
}

int main(){

    prime_eratos(179426549);
    return 0;
} 
```

这需要时间：我的系统中真正的 7.340 秒。

我还尝试了阿特金斯筛（比埃拉托色尼筛更快地研究的地方）。

但就我而言，这需要时间：真正的 10.433 秒。

这是代码：

```
int main(){
    int limit=179426549;
    int x,y,i,n,k,m;
    bool *is_prime = new bool[179426550];

    memset(is_prime, 0, sizeof(bool) * 179426550);

    /*for(i=5;i<=limit;i++){
      is_prime[i]=false;
      }*/
    int N=sqrt(limit);
    for(x=1;x<=N;x++){
        for(y=1;y<=N;y++){
            n=(4*x*x) + (y*y);
            if((n<=limit) &&(n%12 == 1 || n%12==5))
                is_prime[n]^=true;
            n=(3*x*x) + (y*y);
            if((n<=limit) && (n%12 == 7))
                is_prime[n]^=true;
            n=(3*x*x) - (y*y);
            if((x>y) && (n<=limit) && (n%12 == 11))
                is_prime[n]^=true;
        }
    }
    for(n=5;n<=N;n++){
        if(is_prime[n]){
            m=n*n;
            for(k=m;k<=limit;k+=m)
                is_prime[k]=false;

        }
    }
    printf("2   3   ");
    for(n=5;n<=limit;n++){
        if(is_prime[n])
            printf("%d   ",n);
    }
    delete []is_prime;
    return 0;
} 
```

现在，我想知道，没有人能够在 1 秒内输出 100 万个素数。

一种方法可能是：

```
 I store the values in Array but the program size is limited. 
```

有人可以建议我用更少的时间获得前 100 万个素数吗

比满足约束的一秒（上面讨论过）？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:03:49.280

尝试

```
int main()
{
    std::ifstream  primes("Filecontaining1MillionPrimes.txt");
    std::cout << primes.rdbuf();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T19:57:00.937

你算错了质数。第百万个素数是 15485863，比你建议的要小得多。

您可以通过消除筛子中的偶数来加快程序并节省空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:03:39.317

我知道检查一个数字是否为素数的最快方法是检查复合性，我已经实现了[http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)对 RSA 非常成功，它是概率性的，成功程度取决于您运行它的次数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-14T19:50:59.343

步骤 1\. 不要执行 printf

步骤 2\. 购买速度更快的计算机。

# serialization - 相当于 SWI Prolog 中的 Python 酸洗？

> ID：11040227
> 
> 赞同：2
> 
> 时间：2012-06-14T19:41:33.243
> 
> 标签：serialization, io, prolog, iso-prolog

我有一个 Prolog 程序，我在其中对所有字符串进行暴力搜索，直到一定长度。我正在检查哪些字符串与某个模式匹配，不断添加模式，直到希望找到一组涵盖所有字符串的模式。我想将哪些存储到与我的任何模式都不匹配的文件中，这样当我添加新模式时，我只需要检查剩余部分，而不是再次进行整个蛮力搜索。

如果我在 python 中编写它，我只会挑选字符串列表，然后从文件中加载它。有人知道如何在 Prolog 中做类似的事情吗？

我有丰富的 Prolog 编程经验，但很少使用 Prolog IO。我可能会编写一个谓词来读取文件并将其解析为一个术语，但我认为可能有一种方法可以更轻松地做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:06:04.950

如果您想写出一个术语并能够在以后随时读取它，除非变量名称，请使用 ISO 内置`write_canonical/1`或`write_canonical/2`. [当前系统很好地支持](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/conformity_assessment#write_canonical)它。`writeq/1`也`write/1`经常工作，但并非总是如此。`writeq/1`使用运算符语法（因此您需要使用相同的运算符将其读回）并且`write/1`不使用引号。所以他们“大部分时间”都在工作——直到他们崩溃。

或者，您可以使用或`[quoted(true), ignore_ops(true), numbervars(false)]`中的 ISO 写入选项。如果您想使用更多选项（例如保留变量的名称），这可能对您来说很有趣。`write_term/2``write_term/3``variable_names/1`

另请注意，书面术语末尾不包括句点。所以你必须在最后手动写一个空格和一个句点。需要空格以确保由图形字符组成的原子不会与末尾的句点相冲突。想想写`'---'`必须写成`--- .`而不是写成的原子`---.`你可能只写一个原子的空间。或者一个不“粘合”的原子`.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T21:24:15.513

考虑使用 read/1 来读取 Prolog 术语。对于更复杂或不同类型的解析，请考虑使用 DCG，然后将 phrase_from_file/2 与 SWI 的库（pio）一起使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T05:58:44.127

[writeq](http://www.swi-prolog.org/pldoc/doc_for?object=writeq/1)和[read](http://www.swi-prolog.org/pldoc/man?predicate=read/1)做类似的工作，但是如果你声明了，请阅读 writeq 关于操作符的注释。

# cocos2d-iphone - 在每次更新时为 CCSprite 设置动画

> ID：11040229
> 
> 赞同：0
> 
> 时间：2012-06-14T19:41:35.647
> 
> 标签：cocos2d-iphone, augmented-reality

我有一个 CCSprite 对象，我需要尽快更新它的屏幕 (x,y) 位置。它是一个增强现实应用程序，因此屏幕上的位置需要看起来固定在现实世界的位置。

目前，每次`update`我检查设备的航向和姿态，然后通过确定新的 x 和 y 位置相应地移动精灵

```
[spriteObject setPosition:ccp(newX, newY)]; 
```

航向的每一度变化对应于屏幕位置的 10 个像素，因此通过以这种方式设置位置，精灵会以 10 个像素的间隔跳跃，这看起来很愚蠢。我想流畅地制作动画，也许通过使用

```
[spriteObject runAction:[CCMoveTo actionWithDuration:0.2f position:ccp(newX, newY)]]; 
```

但这里的问题是，在精灵动画时会出现新的位置更新，这有点搞砸了整个事情。有人知道这个问题的一个很好的解决方案吗？非常感谢任何帮助，因为我已经尝试了许多失败的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:07:52.233

您可以尝试只为您的精灵运动设置动画。我的意思是，您可以在一秒钟内多次运行动画位置校正，持续时间为 1/numberOfUpdates 在一秒钟内。就像是

```
- (void) onEnter
{
    [super onEnter];
    [self schedule:@selector(updatePositionAnimated) interval:0.2f];

}

- (void) updatePositionAnimated
{
    [spriteObject runAction:[CCMoveTo actionWithDuration:0.2f position:ccp(newX, newY)]];
} 
```

我想，在这种情况下你会有足够流畅的动画

# asp.net - 在asp.net c#中将事件处理程序添加到更改的会话值

> ID：11040231
> 
> 赞同：1
> 
> 时间：2012-06-14T19:41:43.017
> 
> 标签：asp.net, session, login, event-handling, logout

我可以使用 c# 将事件处理程序添加到 asp.net 中的会话值吗？我计划在用户登录和注销时更新数据库，并使用会话值控制登录和注销，但是会话可能会在没有用户点击的情况下结束，比如超时，所以我想添加一个事件处理程序到“ isloggedin”会话值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:44:29.637

你需要在 global.asax 中处理这个问题。

```
protected void Session_Start(Object sender, EventArgs e) 
{
 //your code
}

protected void Session_End(Object sender, EventArgs e) 
{
 //your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:46:20.543

您可以`Session_End`在 global.asax 中实现该方法。在那里，您将从会话中检索所需的信息，并执行所需的操作（例如在数据库中为用户设置注销标志）：

这是我所做的一个示例，尽管您可以根据需要对其进行调整：

```
void Session_End(object sender, EventArgs e)
{
    SessionPlayerContext context = (SessionPlayerContext)this.Session[Constants.SessionKeys.UserContext];
    if (context != null)
        PlayerManager.SetPlayerOnlineStatus(context.PlayerID, false);
} 
```

关键是我正在获取我之前存储在会话中的用户对象（当用户登录时），如果它存在，然后我将用户标记为在数据库中注销（通过 PlayerManager）

您不仅应该在 中检查它`Session_End`，而且还应该在用户实际注销的任何地方检查它。

至于将用户设置为已登录，您将在用户物理登录时处理。

# iphone - UIScrollview 仅在拖动 uiviews 时滚动

> ID：11040232
> 
> 赞同：2
> 
> 时间：2012-06-14T19:41:55.363
> 
> 标签：iphone, ios, uiscrollview

我正在尝试创建一个滚动视图，它将有许多视图（uiimageviews、uitextfield 等）并且它们是间隔开的。滚动有效，但仅当您实际触摸其中的 uiImages 时。只要您触摸滚动视图中的任何位置，我就希望它滚动。我确定这是一个新手错误，但如果您需要代码，我可以发布一些。

**更新**`backgroundColor`这很奇怪，但 如果我将 uiscrollview 设置为具有`clearColor`.

**更新 2** 更奇怪的是，如果我设置 [self.view setBackground = [UIColor whiteColor]]`，滚动视图在没有背景颜色的情况下工作得非常好。使用背景颜色是否有某种要求？

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:19:45.160

当一个视图有一个`clearColor`集合时，它不会响应触摸事件。检查我最近接受的答案之一，以获取另一个 SO Post 上的解决方案。

[UIView 背景颜色影响 iOS 5 中的触摸](https://stackoverflow.com/questions/11011974/uiview-background-color-affects-touches-in-ios-5/11012121#11012121)

# sql - SQL：具有 DATE 类型列的聚合函数

> ID：11040235
> 
> 赞同：4
> 
> 时间：2012-06-14T19:42:00.447
> 
> 标签：sql, date, aggregate-functions, ansi-sql

我偶然发现了一个关于哪些聚合函数适用于 DATE 类型列的问题（在测试中）。因此，据我了解， COUNT 只会计算行数，而 MIN 和 MAX 返回最早/最晚日期。但是，我对 SUM 和 AVG 函数有点困惑。他们是否会将 DATE 值转换为整数并计算这些整数的总和/平均值？还是我在这里错了？无论如何，这种行为在所有 SQL 实现中是否一致？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T19:45:45.737

In MS SQL Server You cannot call the `SUM` operator on `datetime` types, nor can you call the `AVG` operator.

MSDN lists the return types of the `SUM` operator here:
[http://msdn.microsoft.com/en-us/library/ms187810.aspx](http://msdn.microsoft.com/en-us/library/ms187810.aspx)

It is also a valid reference for the types on which you may *invoke* the `SUM` operator.

**EDIT:** In response to your comment, you may use a site like sqlfiddle to test various implementations

[http://www.sqlfiddle.com/#!3/22cee/1](http://www.sqlfiddle.com/#!3/22cee/1)

Considering the backend storage of `datetime` is not standardized, I contend that it should **not** be depended upon for any database to return `SUM` or `AVG` results in predictable ways.... better not to do it at all...

# .htaccess - 在 .htaccess 中使用 - 而不是 _（下划线）

> ID：11040236
> 
> 赞同：1
> 
> 时间：2012-06-14T19:42:03.070
> 
> 标签：.htaccess, mod-rewrite, redirect

我正在使用以下代码将我的所有 php 文件访问到 /it 目录中，而没有指定扩展名，效果很好。换句话说，我只需编写“http://www.mydomain.com/it/about”就可以访问*“* *http://www.mydomain.com/it/about.php”*。

```
Options -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ http://www.mydomain.com/it/$1.php [L] 
```

当我尝试访问[http://www.mydomain.com/it/question_answers.php](http://www.mydomain.com/it/question_answers.php)时也会发生同样的情况。我怎样才能直接访问 *"http://www.mydomain.com/it/question_answers.php"* 也写*"http://www.mydomain.com/it/question-answers"*？我在前面写了下面的流式代码，但它似乎不起作用。

```
Redirect 301 /question-answer http://www.mydomain.com/it/question_answer.php 
```

因为如果我写“http://www.mydomain.com/it/question-answer”，浏览器会尝试打开页面： *“http://www.mydomain.com/it/question-answer.php.php。 php.php.php.php.php.php.php.php.php.php.php.php.php.php.php.php.php.php"*

这篇文章的一个小摘要：

*   我有页面 *"http://www.mydomain.com/it/question_answers.php"*
*   通过代码的第一部分，我可以使用链接 *"http://www.mydomain.com/it/question_answers"*
*   我还想**使用**以下*“http://www.mydomain.com/it/question-answers”访问同一页面*

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:06:06.693

这应该适合你：

```
Options -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ http://www.mydomain.com/$1.php

RewriteRule it/question-answer\.php http://www.mydomain.com/it/question_answer.php [R=301,L] 
```

我改变了两件事：我`it/`在第一个 RewriteRule 的新 URL 中删除了。否则你会被重定向到`it/it/`
我还添加`\.php`到第二个 RewriteRule。我真的不知道为什么，但 RewriteRule 似乎取代了模式而不是重定向。如果您的模式是`it/question-answer`并且真正的 url 是`it/questions-answer.php`不会`.php`被替换的。

# c# - 在 Metro 应用程序中从 ftp 服务器下载文件

> ID：11040240
> 
> 赞同：1
> 
> 时间：2012-06-14T19:42:26.283
> 
> 标签：c#, ftp, microsoft-metro

在 Metro 应用程序中，我想将文件从 ftp 服务器下载到本地。

我尝试使用 Windows.Networking.BackgroundTransfer 命名空间并使用代码：DownloadOperation download = downloader.CreateDownload(ftpsource, destinationFile);

但是方法 download.GetResponseInformation() 总是返回 null。

我如何在 Metro 应用程序中使用 ftp 服务器？

地铁应用程序的任何专家都可以完全回答这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:22:40.117

我对新的 WinRT 东西不太熟悉 - 但据我所知，BackgroundTransfer 命名空间中的类用于 Web 服务和 HTTP 传输，而不是 FTP。

您可以参考 System.Net.FtpWebRequest / FtpWebResponse 吗？

# android - Android中的许多和大型图像加载

> ID：11040255
> 
> 赞同：2
> 
> 时间：2012-06-14T19:43:47.153
> 
> 标签：android, graphics, loading, xamarin.android, android-image

我有一个问题：（否则我不会在这里；）

我正在创建一个具有显示“3D”模型功能的应用程序。这部分实际上是从多个角度拍摄的图像集合，并允许用户“旋转”“模型”。这个想法运行良好，但问题在于图像的加载。

我发现有两种方法：

1.  将所有图像加载到内存中，然后简单地将它们切换到正确的角度。
2.  根据需要加载图像 - 我们可以提前加载一些。

然而这些都有问题：

1.  如果我幸运的话，这些图像会适合记忆，但事实并非如此。它们每个大约 1.5-2MB，每个模型大约有 75-100 张图像。这使总大小至少达到约 115MB。
2.  如果我幸运的话，图像的加载速度会比用户“旋转”的速度快，但他们不会。用户可以轻松切换到尚未加载的角度，从而导致黑屏几秒钟。

我创建了一个加载器，它允许我简单地将我需要的图像添加到堆栈中，然后加载器将一个接一个地加载图像。如果用户滚动得相当慢，这可以正常工作。我的加载器会在完成后释放内存，所以无论我加载多少图像，只要我指定要存储在内存中的最大图像，应用程序通常不会崩溃。我的加载器可以非常快速地加载图像，但仍有几毫秒（~250ms）的时间将大图像加载到内存中。当然，加载器在不同的线程上，加载绝不会阻碍 UI 响应。这就是为什么如果用户快速来回滑动，实际上不会显示任何图像，因为加载和卸载都在同时工作，导致没有图像:)

所以，我的问题是：如何在不将所有图像加载到内存的情况下提供平滑且用户满意的图像旋转？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T19:58:25.463

不要加载（或存储）您不需要的分辨率。如果您的用户需要缩放，内存不足的*二进制图像金字塔*是一种便宜的方法，可以让您仅加载必要的缩放级别。如果您的用户需要平移大于您的显示区域的图像，您可以将大图像分成较小的图块，并仅加载您需要的图块。

如果你想变得花哨，你可以编写一个 UI 感知缓存管理器来抢先加载你认为你*可能*很快需要的切片，并标记你很确定很快*不需要*的切片以进行抢占。

更好的压缩可以将更多的图像数据放入内存，并加快加载时间。所以，要注意个别图片压缩，也不要加载你不需要的图片质量。

作为一项非凡的措施：由于角度略有不同的图像彼此相似，因此您可以通过表示差异来节省时间和空间，而不是 - 查找*光场压缩*。您仍然需要将压缩形式转换为可以绘制的特定位图，但如果压缩允许数据集保留在内存中，您可能会获得很大的速度。

如果您无法将压缩数据集放入内存，则用户很有可能能够足够快地来回滑动以破坏您的缓存。因此，如果平滑度是您的主要目标，您可以尝试通过将旋转速率（或每次滑动旋转范围？）限制为数据加载器可以遵循的“UI 解决方案”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:57:27.100

我唯一的建议是有效地加载它们。我假设您正在使用[此处描述的技术](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

如果图像的分辨率高于屏幕，您可以计算要渲染的图像的样本大小，然后您可以加载适合您的屏幕的图像，而不是使用更少内存的全尺寸图像。如果您已经这样做了，那么对我来说，您似乎已经在有效地做这件事了。也许您可以在加载图像时向用户显示某种占位符图形，这样他们就不会只有空白空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T22:55:08.573

感谢您的回答。我自嘲一笑，看完答案就上床睡觉了。让我分享一下我是如何解决这个问题的——它使用了一些答案：

我试图在内存中缓存大图像 - 这是不必要的，为什么不存储较低分辨率的版本，然后在用户停止滚动时加载高分辨率？然后用户可以随心所欲地滚动，并且内存中总会有图像可以快速绘制。当用户停止/减慢滚动时，我们会加载高分辨率图像。

因为他会快速滚动，他将无法看到较低分辨率的较低质量。而且，由于只有一个高分辨率要加载，因此约 250 毫秒的延迟几乎不会引起注意。

这确实结合了两种情况的优点。我可以使用 Android 的方法来加载较低分辨率版本的位图。

# c# - 如何将 xAxis 标签显示为时间跨度，同时在 C# winforms 中允许 > 24 小时的持续时间

> ID：11040256
> 
> 赞同：1
> 
> 时间：2012-06-14T19:43:47.967
> 
> 标签：c#, winforms, charts

我正在使用 System.Windows.Forms.DataVisualization.Charting 图表对象。我想将 TimeSpan 对象添加到 x 轴，但我不知道正确的形式是什么。

我正在以这样的方式添加积分：

```
 graph.Series[i2].Points[i3].XValue = DateTime.FromOADate(0).Add(temp).ToOADate(); 
```

其中 temp 是感兴趣的时间跨度。我仍在使用 datetime 对象并将它们转换为双精度，因为我不知道 TimeSpan 对象将如何以双精度形式表示。也许这是我的问题？

图表会自动生成这些标签。

我目前有一行代码：

```
 graph.ChartAreas[0].AxisX.LabelStyle.Format = "T"; 
```

这将显示一个时间跨度，但我需要时间跨度来表示天数和小时数。我需要将天数设为 0 索引，因此似乎 datetime 对象不是一个选项（因为 3 月 0 日不存在）。

有没有办法做到这一点？

我一直在尝试诸如

```
 graph.Series[0].XValueType = ChartValueType.DateTimeOffset; 
```

但我还没有找到显示日期而不是实际日期的东西。

我不确定代码是否会使问题更清楚，但如果请求我会发布请求的摘录。如果我可以更简洁地说明我的问题的特定部分，请告诉我。

多谢你们

# html - 在 html5 中对齐图像

> ID：11040258
> 
> 赞同：0
> 
> 时间：2012-06-14T19:44:02.463
> 
> 标签：html, css

我有这个代码：

```
<header>
    <div id="title">                
        <img alt="logo" src="/Content/logo.gif" />
    </div>
    <nav>
        <ul id="menu">
            <li>Products</li>
            <li>Auctions</li>
            <li>Segmentation</li>
        </ul>
    </nav>
</header> 
```

生成这个：

![http://img36.imageshack.us/img36/4290/38501640.png](../Images/c3b2db12a96248eacab8aeca478436b8.png)

我希望图像位于白框上方（它将根据图像对齐）。我该怎么做？

顺便说一句，我使用默认的 asp.net mvc3 模板。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:48:36.140

我假设您正在浮动这些元素。如果是这样，请尝试设置标头的溢出属性：

```
header {
   overflow: auto
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:52:35.520

如果您希望它在其自然位置上方放置 100 像素，请使用它。

```
#title img {
   margin-top: 100px
} 
```

或这个：

```
#title img {
   position: relative;
   top: 100px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T19:56:12.610

如果您在 Internet Explorer < 9 中对此进行测试，请确保您`<header>`使用

```
<script type='text/javascript'>document.createElement('header')</script> 
```

或[库](http://modernizr.com/)`header{display:block}`并在尝试对其进行样式设置之前将其设置为块级元素 ( )。

# android - 我如何为 Android 应用程序硬编码 SQLite 数据库

> ID：11040260
> 
> 赞同：1
> 
> 时间：2012-06-14T19:44:10.060
> 
> 标签：android, database, sqlite

我正在开发一个需要我使用数据库的 Android 应用程序。读了一段时间后，我决定使用 SQLite 数据库，我开始阅读我应该如何使用它，但是每本书/教程/等等……都通过允许用户向其中添加信息来开发一个可更新的数据库。（如日记或运行时间记录应用程序样式）。我只需要创建（我的意思是，像硬编码）我的数据库并查询它。我的数据库将无法由用户更新。我很确定这应该是一种简单/虚拟的方法，但我还没有找到它。所以，如果有人可以帮助我，那就太棒了。;)

谢谢。阿美特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:13:29.310

请查看以下链接： [使用 DAO 和 Content Provider 的 SQLite 数据库教程](http://www.vogella.com/articles/AndroidSQLite/article.html)。

您只需要 2 个类：

*   数据库类（4.3\. 数据库和数据模型）：

公共类 MySQLiteHelper 扩展 SQLiteOpenHelper {

```
public static final String TABLE_COMMENTS = "comments";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_COMMENT = "comment";

private static final String DATABASE_NAME = "commments.db";
private static final int DATABASE_VERSION = 1;

// Database creation sql statement
private static final String DATABASE_CREATE = "create table "
        + TABLE_COMMENTS + "(" + COLUMN_ID
        + " integer primary key autoincrement, " + COLUMN_COMMENT
        + " text not null);";

    // Database creation sql statement
private static final String TABLE_CREATE = "CREATE TABLE tablename....."

public MySQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
    database.execSQL(TABLE_CREATE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // You don't need this. If you don't change the DATABASE_VERSION value then this method will not be called.
} 
```

}

*   道

公共类 CommentsDataSource {

```
// Database fields
private SQLiteDatabase database;
private MySQLiteHelper dbHelper;
private String[] allColumns = { MySQLiteHelper.COLUMN_ID,
        MySQLiteHelper.COLUMN_COMMENT };

public CommentsDataSource(Context context) {
    dbHelper = new MySQLiteHelper(context);
}

public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
}

public void close() {
    dbHelper.close();
}

public List<Comment> getAllComments() {
    List<Comment> comments = new ArrayList<Comment>();

    Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
            allColumns, null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Comment comment = cursorToComment(cursor);
        comments.add(comment);
        cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return comments;
}

private Comment cursorToComment(Cursor cursor) {
    Comment comment = new Comment();
    comment.setId(cursor.getLong(0));
    comment.setComment(cursor.getString(1));
    return comment;
} 
```

}

*   但我建议您也检查一下内容提供程序示例（8.4\. 创建 ContentProvider）。它一点也不复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:56:50.953

您可以使用 SQLiteOpenHelper 的 onCreate 方法来执行创建数据库所需的 sql。sql 可以是硬编码的，也可以是从文件中读取的。这样做可以让您在首次运行应用程序时初始化数据库。

另一种选择是使用[SQLite 数据库浏览器等工具](http://sqlitebrowser.sourceforge.net/)

这是一个桌面应用程序，可用于构建 sqlite 数据库。一旦你创建了它，你就必须决定如何部署它。我从来没有尝试过这样做，但我想你可以将它捆绑在你的资源文件夹中，然后在应用程序安装后首次运行时将其移动到正确的目录中。

# iphone - 适用于 iOS 5/6 的在线实时多人游戏

> ID：11040263
> 
> 赞同：3
> 
> 时间：2012-06-14T19:44:26.437
> 
> 标签：iphone, cocoa-touch, cocoa

我知道已经有一些关于这个主题的帖子，但我找不到我需要的答案，我不知道从哪里开始。

我想为 iPhone 创建一个在线多人游戏，玩家可以通过 Internet 一起对战。例如一个 2 人赛车游戏，一旦 2 人匹配和连接，他们就可以实时控制他们的汽车。例如像马里奥车。

我知道游戏套件会这样做，但只能通过蓝牙或同一个 wifi 网络。我希望这是通过互联网（仅限 wifi），玩家可以在世界各地互相对抗。

我知道已经有一些框架可以做到这一点。但它们的成本很高，并且取决于连接的数量。有没有便宜的或者我敢说，免费的方式来做到这一点？比如让游戏套件进行匹配，然后以其他方式完成连接和发送数据？就像让 iPhone 托管游戏一样？而不是拥有专用服务器。我没有预算，也没有创建专用服务器的知识和经验。

匹配很简单。共有 30 个关卡，任何 2 名想要玩同一关卡的玩家都可以匹配。

欢迎任何链接或书籍推荐。我的网络知识非常有限，不知道从哪里开始。

我可以阅读和学习这些技术，即使它们是技术性的，但我需要正确的资源来让我开始

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T04:17:29.317

实际上，您可以使用 Game Kit API 做您正在寻找的事情。基本上，您使用 GKMatchMakerViewController 创建匹配。要进行匹配，您使用 GKMatchMakerViewController 开始寻找其他玩家，一旦它找到其他玩家，它就会通知 GKMatchMakerViewControllerDelegate 已经找到匹配并将传递 GKMatch 对象。然后你需要一个实现 GKMatchDelegate 协议的对象来处理实际数据。您将您的委托对象设置为您传递的 GKMatch 的委托，然后使用 GKMatchDelegate 协议中的方法，例如 – match:didReceiveData:fromPlayer: 和 GKMatch 中的方法来发送数据。

下面是一些示例代码来帮助解释。这只是最基本的，你当然需要实现你的游戏内容，以及一些错误处理。

此外，您可以在这四个链接中找到您需要的文档

[GKMatchMakerViewController](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchmakerViewController_Ref/Reference/Reference.html) [GKMatchMakerViewControllerDelegate](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchmakerViewControllerDelegate_Ref/Reference/Reference.html) [GKMatch](http://developer.apple.com/library/ios/#DOCUMENTATION/GameKit/Reference/GKMatch_Ref/Reference/Reference.html) [GKMatchDelegate](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchDelegate_Ref/Reference/Reference.html)

```
- (void)match:(GKMatch *)match didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID{
    if(matchStarted){
        Packet *msg = (Packet *)[data bytes];
       //do whatever you want with the data received from other people
    }
}

-(void)sendPosition{
    //call this to update the other players devices (should be self explanatory)
    NSError *error;
    Packet msg;
    //Here the msg object is actually a typedefed struct name Packet. I use this to send and receive data
    NSData *packet = [NSData dataWithBytes:&msg length:sizeof(msg)];
    [myMatch sendDataToAllPlayers: packet withDataMode: GKMatchSendDataUnreliable error:&error];
    if (error != nil)
    {
        // handle the error
    }
}

#pragma mark MatchSetup

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)match{
    [self dismissModalViewControllerAnimated:YES];
    self.myMatch = match; // Use a retaining property to retain the match.
    self.myMatch.delegate = self;
    if (!matchStarted)
    {
        // Insert application-specific code to begin the match.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:47:01.637

您应该查看实时点对点网络服务[PubNub](http://www.pubnub.com/)，因为它听起来非常适合您的项目。

我发现 PubNub 很容易实现，即使我的编程知识不多。集成不同平台也很容易，因为大多数常用语言都有 SDK。我有一个基于 PHP 的网页，作为我基于 iOS 的应用程序的记分牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:02:14.827

您正在寻找的是一个可能确实存在的 GameKit“托管匹配”包装器。需要注意的是，Apple 不托管这些类型的比赛，您自己的服务器可以。因此，您需要一个虚拟主机，而这些通常不是免费的。亚马逊的 AWS 对微型实例是免费的，但根据规模，您可能会获得足够的同步播放。

既然你已经提出了它，我对了解潜在的 GameKit 包装器更感兴趣。你能评论一下你的发现吗，你提到它们很贵并且对连接有限制。

PS - Apple 的限制是最多 16 名玩家

# python - Python：根据另一个二维数组的索引从二维数组中选择项目

> ID：11040270
> 
> 赞同：1
> 
> 时间：2012-06-14T19:44:40.900
> 
> 标签：python, sorting

我正在尝试做一个简单的任务，但无法找到一个快速的解决方案。

我有两个相同大小的二维数组。一个数组是只包含 0 或 1 的掩码数组；我想将值保留在另一个数组中，只要掩码数组索引为 1。

掩码数组可能如下所示：

```
mask    = [[0,0,0,0],[0,0,1,1],[0,0,0,1],[0,0,0,1]] 
```

并说我有第二个数组：

```
testarr  = [[1,1,1,1],[2,2,2,2],[3,3,3,3],[4,4,4,4]] 
```

我想从中提取`[2,2,3,4]`值`testarr`。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:48:26.427

If you convert your `mask` to bools, you can use numpy to do this. First convert your arrays to numpy arrays using `maskl = np.array(mask, dtype=bool)` and `estarray = np.array(estarray)`. Then:

```
>>> estarr[mask]
array([2, 2, 3, 4]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T19:47:35.020

You could use `zip`.

```
for mask_list,val_list in zip(arr1, arr2):
    for m,v in zip(mask_list, val_list):
       if m:
           # put in results 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T19:54:32.370

[您可以使用itertools.chain](http://docs.python.org/library/itertools.html#itertools.chain)展平列表，然后简单地遍历压缩列表，例如如下：

```
mask     = [[0,0,0,0],[0,0,1,1],[0,0,0,1],[0,0,0,1]]
testarr  = [[1,1,1,1],[2,2,2,2],[3,3,3,3],[4,4,4,4]]

from itertools import chain, izip
print [x for m,x in izip(chain(*mask), chain(*testarr)) if m]
# output:
#  [2, 2, 3, 4] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T00:19:33.703

您还可以查看 numpy.ma 模块。[http://docs.scipy.org/doc/numpy/reference/maskedarray.html](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)

```
import numpy as np
mask    = np.array([[0,0,0,0],[0,0,1,1],[0,0,0,1],[0,0,0,1]],dtype=np.bool)
testarr  = np.array([[1,1,1,1],[2,2,2,2],[3,3,3,3],[4,4,4,4]])

ma = np.ma.array(testarr, mask=np.invert(mask))
print ma[~ma.mask] 
```

输出

```
[2 2 3 4] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T20:57:34.690

```
mask    = [[0,0,0,0],[0,0,1,1],[0,0,0,1],[0,0,0,1]]
testarr  = [[1,1,1,1],[2,2,2,2],[3,3,3,3],[4,4,4,4]]
n = len(mask)
m = len(mask[0])
filtered = []
for i in xrange(n):
        for j in xrange(m):
                if mask[i][j]:
                        filtered.append(testarr[i][j]) 
```

我就是这样做的。也许你可以把它写成一个单独的函数，并传入两个列表。

可能有更多“优雅”的方式，但我不认为有更“有效”的方式来做到这一点。我个人喜欢可读性。

# android - strictMode 在我的应用程序中不起作用

> ID：11040272
> 
> 赞同：0
> 
> 时间：2012-06-14T19:44:47.810
> 
> 标签：android, android-strictmode

我想实现 strictMode 以使我的应用程序更快，但是每当我尝试通过以下方式导入它时：

导入android.os.StrictMode；

它不可用。我读过 strictMode 不适用于 2.3.3 之前的版本。这是一个问题，因为该应用程序是为 2.2 froyo 设计的。有没有办法让我的应用程序进入 2.3.3 并能够使用 strictMode？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:52:57.707

答案很简单，你需要 2.3.3 才能使用严格模式，所以没有办法解决这个问题，但你可以在开发期间将应用程序设置为 2.3.3，当你想释放它时，将 apilevel 设置回“8”

正如 vogella 在他的教程中所说：

> 例如，如果您的应用程序违反了某些 Android 政策，以下设置将使您的应用程序崩溃。StrictMode 应该只在开发过程中使用，而不是在您的实时应用程序中。

所以最后你只需要删除所有严格模式功能，就像你通常必须做的那样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:50:53.290

在此处阅读有关 StrictMode 的更多信息：[http ://android-developers.blogspot.com/2010/12/new-gingerbread-api-strictmode.html](http://android-developers.blogspot.com/2010/12/new-gingerbread-api-strictmode.html)

我没有亲自使用它，但你应该只在开发期间使用它。因此，您可以做的是暂时针对 2.3.3 及更高版本的 Android 设备，以使用 StrictMode，然后将最小值降至 2.2。

您可以将最小值设置为 2.2 并将目标 android 版本设置为 2.3.3，但我对此不确定，目前无法尝试。

# javascript - 选择器将 jQuery 事件应用到两个 DOM id

> ID：11040273
> 
> 赞同：2
> 
> 时间：2012-06-14T19:44:48.423
> 
> 标签：javascript, jquery, jquery-selectors

我有两个选择菜单（#id1 和#id2），当它们被验证为包含用户错误时，应该在其中任何一个交互时引发一些 DOM 更改（删除错误通知）。

再次：

```
var Heat_Check = jQuery('#id1' or '#id2').change(function() { ... }); 
```

PS。我知道该链没有返回值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:49:27.543

可能是您想检查是否`change`从其中任何一个选择中触发。试试下面，

```
var Heat_Check = false;

jQuery('#id1, #id2').change(function() { Heat_Check = true; });

function heatCheck () {
   if(Heat_Check) {
      //Do your stuff
      console.log('It is hot');
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:52:16.083

@Vega 的评论是正确的，但为了完整起见，您也可以这样做：

```
 heatChangeHandler = function() {
     // ....
 };

 $('#id1').change(heatChangeHandler);
 $('#id2').change(heatChangeHandler); 
```

一般来说，最好将多个选择器放在一个中`$()`，但值得知道的是，函数可以作为变量来寻址，因此可以多次引用。

# java - 使用 Jena API 在 SPARQL 中自定义函数

> ID：11040274
> 
> 赞同：4
> 
> 时间：2012-06-14T19:44:49.933
> 
> 标签：java, sparql, jena

第一次在这里发帖。我希望有人可以帮助我制作自定义 SPARQL 函数以在 Jena (ARQ) API 中使用。我需要 SPARQL 来做一些聚合，我知道它已经实现了 avg、count、min、max 和 sum，但我还需要能够做标准差和中位数（我也需要范围，但这可以是仅使用 min 和 max 完成）。

我希望查询可以类似于您用于已实现功能的查询：

```
PREFIX example: <http://www.examples.com/functions#>  
PREFIX core: <http://www.core.com/values#>  
SELECT (stddev(?price) as ?stddev)  
WHERE {  
    ?s core:hasPrice ?price  
} 
```

我不知道这是否可能，但如果我需要像其他自定义函数一样使用它也可以，只要它仍然可以获得结果的标准偏差。

我所知道的是这些函数将用 Java 编写，我已经非常了解了。所以，我想知道是否有人知道解决这个问题的好方法，或者从哪里开始寻找一些指导。我已经尝试寻找有关它的文档，但似乎没有任何东西。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:02:26.183

我不确定您是否可以在不实际更改语法的情况下做您想做的事情。

例如 SUM(...) 是由 SPARQL 语法定义的关键字：

*   [https://svn.apache.org/repos/asf/jena/trunk/jena-arq/Grammar/sparql_11.jj](https://svn.apache.org/repos/asf/jena/trunk/jena-arq/Grammar/sparql_11.jj)
*   [https://svn.apache.org/repos/asf/jena/trunk/jena-arq/src/main/java/com/hp/hpl/jena/sparql/expr/aggregate/AggSum.java](https://svn.apache.org/repos/asf/jena/trunk/jena-arq/src/main/java/com/hp/hpl/jena/sparql/expr/aggregate/AggSum.java)

过滤器函数或属性函数可能不是您想要的。

顺便说一句，您也不会在 SQL 中获得 STDDEV。是因为需要两次传递数据吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:25:22.073

聚合函数是 SPARQL（以及 ARQ）函数的特例。我认为在 ARQ 中，扩展聚合函数集并不容易，而扩展过滤器函数集和属性函数集则很容易（并记录在案）。无论如何，您都可以使用以下方法计算标准偏差：

```
PREFIX afn: <http://jena.hpl.hp.com/ARQ/function#>
PREFIX core: <http://www.core.com/values#>  
SELECT ( afn:sqrt( sum( (?price - ?avg) * (?price - ?avg) ) / (?count - 1) ) as ?stddev )  
WHERE {
  ?s core:hasPrice ?price .
  {  
    SELECT (avg(?price) as ?avg) (count(*) as ?count) 
    WHERE {  
      ?s core:hasPrice ?price
    }
  }
} 
```

无论如何，我都被迫使用 afn:sqrt 这是一个 ARQ“专有”函数，不在 SPARQL 1.1 草案中，所以这个查询不适用于不同于 Jena 的框架

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T07:50:56.373

是的，ARQ 可以通过多种方式进行扩展。[ARQ 扩展页面](http://jena.apache.org/documentation/query/extension.html)将是最好的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-15T16:10:32.017

ARQ 允许您通过在`AggregateRegistry`. 示例[代码](https://github.com/apache/jena/blob/master/jena-arq/src-examples/arq/examples/aggregates/CustomAggregate.java)显示了这是如何完成的。这可用于添加问题中请求的自定义标准差聚合函数。在下面的示例中，[Commons Math](http://commons.apache.org/proper/commons-math/)用于进行计算。

```
import org.apache.commons.math3.stat.descriptive.SummaryStatistics;
import org.apache.jena.graph.Graph;
import org.apache.jena.query.*;
import org.apache.jena.rdf.model.Model;
import org.apache.jena.rdf.model.ModelFactory;
import org.apache.jena.sparql.engine.binding.Binding;
import org.apache.jena.sparql.expr.ExprList;
import org.apache.jena.sparql.expr.NodeValue;
import org.apache.jena.sparql.expr.aggregate.Accumulator;
import org.apache.jena.sparql.expr.aggregate.AccumulatorFactory;
import org.apache.jena.sparql.expr.aggregate.AggCustom;
import org.apache.jena.sparql.expr.aggregate.AggregateRegistry;
import org.apache.jena.sparql.function.FunctionEnv;
import org.apache.jena.sparql.graph.NodeConst;
import org.apache.jena.sparql.sse.SSE;

public class StandardDeviationAggregate {
    /**
     * Custom aggregates use accumulators. One accumulator is created for each group in a query execution.
     */
    public static AccumulatorFactory factory = (agg, distinct) -> new StatsAccumulator(agg);

    private static class StatsAccumulator implements Accumulator {
        private AggCustom agg;
        private SummaryStatistics summaryStatistics = new SummaryStatistics();

        StatsAccumulator(AggCustom agg) { this.agg = agg; }

        @Override
        public void accumulate(Binding binding, FunctionEnv functionEnv) {
            // Add values to summaryStatistics
            final ExprList exprList = agg.getExprList();
            final NodeValue value = exprList.get(0).eval(binding, functionEnv) ;
            summaryStatistics.addValue(value.getDouble());
        }

        @Override
        public NodeValue getValue() {
            // Get the standard deviation
            return NodeValue.makeNodeDouble(summaryStatistics.getStandardDeviation());
        }
    }

    public static void main(String[] args) {
        // Register the aggregate function
        AggregateRegistry.register("http://example/stddev", factory, NodeConst.nodeMinusOne);

        // Add data
        Graph g = SSE.parseGraph("(graph " +
                "(:item1 :hasPrice 13) " +
                "(:item2 :hasPrice 15) " +
                "(:item3 :hasPrice 20) " +
                "(:item4 :hasPrice 30) " +
                "(:item5 :hasPrice 32) " +
                "(:item6 :hasPrice 11) " +
                "(:item7 :hasPrice 16))");

        Model m = ModelFactory.createModelForGraph(g);
        String qs = "PREFIX : <http://example/> " +
                    "SELECT (:stddev(?price) AS ?stddev) " +
                    "WHERE { ?item :hasPrice ?price }";

        // Execute query and print results
        Query q = QueryFactory.create(qs) ;
        QueryExecution qexec = QueryExecutionFactory.create(q, m);
        ResultSet rs = qexec.execSelect() ;
        ResultSetFormatter.out(rs);
    }
} 
```

我希望这个例子至少对某人有所帮助，即使这个问题是几年前发布的。

# android - 具有自定义视图而不是菜单项的 ActionProvider？

> ID：11040275
> 
> 赞同：2
> 
> 时间：2012-06-14T19:44:54.673
> 
> 标签：android, android-layout, android-actionbar

是否可以在 Android 3.0+ 中使用菜单项的自定义视图创建 ActionBar ActionProvider？到目前为止，我已经看到了这些带有图标和文本的内容，以及带有复选框的文本，但是是否可以改为膨胀任意视图？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T23:26:12.843

`ShareActionProvider`间接使用`PopupWindow`，它可以容纳你想要的任何东西。

# mysql - MySql：可变行最大最小查询？

> ID：11040280
> 
> 赞同：0
> 
> 时间：2012-06-14T19:45:28.823
> 
> 标签：mysql, sql

我有一个包含股票报价（stock_symbol、quote_date、open_price、high_price、low_price、close_price）的 MySql 表，需要找出各种最大值和最小值：10/20/245/252 天的最高最高/最低最低。

我知道如何使用每个时期的 SELECT 查询来做到这一点：

```
SELECT max(high_price), min(low_price) FROM mytable WHERE stock_symbol = 'GOOG' ORDER BY quote_date DESC LIMIT 10; 
```

是否可以使用单个 SELECT 语句来完成，而不会使数据库服务器的查询过于密集？单个 SELECT 语句会比多个 SELECT 语句执行得更好吗？

任何想法/帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:48:10.187

最好在一个语句中执行此操作，但问题仅在于索引：确保在您询问最小值和最大值或在 where 子句中添加的所有列上都有一个索引：hight_price、low_price 和 stock_symbol。

有了索引，这个请求将是即时的，即使对于非常大的表并且没有你的`LIMIT 10`

不要`ORDER BY`在这个查询中放一个：它是没用的，因为最小值和最大值是相同的，与你查看集合的顺序无关。

您的查询应该很简单

```
SELECT max(high_price), min(low_price) FROM mytable WHERE stock_symbol = 'GOOG' 
```

如何创建索引：[http ://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

# php - 使用户输入对 XML 安全

> ID：11040285
> 
> 赞同：5
> 
> 时间：2012-06-14T19:45:40.810
> 
> 标签：php, xml, character-encoding

使用 PHP 从用户提交的文本生成有效 XML 的最佳实践是什么，例如带有与号、尖括号、非 ascii 重音字符、新行等的电子商务销售数据。

人们依赖什么函数、库、正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T19:48:11.677

将信息包装在`CDATA`标签中并对数据进行编码[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)

```
'<tag><![CDATA[' . htmlentities($theData) . ']]></tag>' 
```

或者使用[DOM](http://php.net/manual/en/domdocument.createcdatasection.php)

```
$dom = new DOMDocument("1.0", "utf-8");

/* ... */

$dom->createCDATASection(htmlentities($theData)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:10:19.430

如果你想要二进制安全，那么你需要使用额外的传输编码。例如，您可以使用[base64](http://www.php.net/manual/en/function.base64-encode.php)或[uuencode](http://php.net/manual/en/function.convert-uuencode.php)以二进制安全方式将数据存储在 XML 块中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T19:47:43.133

*   [`htmlspecialchars()`](http://us.php.net/manual/en/function.htmlspecialchars.php)
*   [`htmlentities()`](http://us.php.net/manual/en/function.htmlentities.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T02:48:24.657

您也可以尝试：

[html_entity_decode()](http://us.php.net/manual/en/function.html-entity-decode.php)

# c++ - Can't move QDockWidget

> ID：11040291
> 
> 赞同：3
> 
> 时间：2012-06-14T19:46:04.640
> 
> 标签：c++, qt, qwidget, qmainwindow, qdockwidget

I want to create a widget that contains several `QDockWidgets` on purpose of putting it into a `QMainWindow`. Problem is that if I add `QDockWidgets` to my `QWidget` class with `layout->addWidget(dockWidget);`(I don't know any other way of doing it) and then `setLayout(layout)` I can't do anything to the `QDockWidgets` but dock and undock. I can't move them, I can't position them in another place.

`QMainWindow` has this feature `addWidgets` that `QWidget` doesn't have. Using `QMainWindow` everything works perfect, but I want it to work the same if I add a `QWidget` object(containing some `QDockWidgets`) to `QMainWindow`.

Is there any possibility to make my `QWidget` fully support those `QDockWidgets`, and use the on full potential(move, scale, dock, change position)?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:05:24.990

如果您使用大量`QDockWidgets`，只需启用[停靠嵌套](http://qt-project.org/doc/qt-4.8/qmainwindow.html#dockNestingEnabled-prop)可能是解决潜在问题的方法。

如果您绝对需要在 内有一个小部件`QMainWindow`，您可以尝试`QMainWindow`在第一个小部件中放置另一个。您可能必须将第二个的[windowFlags](http://qt-project.org/doc/qt-4.8/qwidget.html#windowFlags-prop)属性设置`QMainWindow`为`Qt::Widget`.

# hadoop - 创建比我们拥有的节点更多的reducer有意义吗？

> ID：11040296
> 
> 赞同：3
> 
> 时间：2012-06-14T19:46:41.740
> 
> 标签：hadoop, mapreduce

所以主要认为良好的减少阶段是良好的分区分布。但是例如我们无法控制它，或者不知道该怎么做（我们不知道我们的数据）。

大量的 reducer 是否会增加每个 reducer 数据分布更好的机会？这个问题的常见做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:57:24.700

数据通常使用模散列分区在 reducer 之间均匀分布。这意味着（有效地）键的哈希除以reducer 的数量，余数是值被发送到的reducer 的索引。例如，如果你的 key 的哈希是 47269893425623，并且你有 10 个 reducer，47269893425623 % 10 = 3，那么第 4 个 reducer（记住，0-indexed）获取该记录。

如果您的记录有热点键，这意味着大部分值具有完全相同的键，那么添加减速器可能无济于事（您只会增加开销 - 所有这些键仍将转到同一个减速器）。

如果您没有这种情况，那么添加减速器可能会有所帮助。请记住，mapper 和 reducer 之间存在网络复制阶段。拆分reducer 越多，mapper 和reducer 之间需要进行的复制就越多，因此部分工作会变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:03:42.950

选择减速器的数量在某些方面更像是一门艺术而不是一门科学。你只需要尝试不同的东西，看看什么最适合你的特定工作。

一般来说，我看到几个主要选项：

*   1-2个reducer——这对于输出量很少的工作很有用，只需要输出几个文件就可以使后期处理更加高效
*   系统上 95% 的 reduce 槽——这将充分利用您的集群来处理中型和大型 MapReduce 作业。您想使用 95%，这样您就不会阻止较小的工作完成。
*   系统上 190% 的 reduce 槽——这仅适用于非常大的作业，不需要太频繁地使用。

增加减速器的数量只会有很大帮助。在数学意义上，假设您的所有密钥都是均匀分布的，除了`hotkey`. 然后，给定的减速器分布`hotkey`是 100MB，其他一切都是 100MB（极端）。如果您有两个减速器，则大约有 150MB 的减速器 1 和 50MB 的减速器 2。使用三个减速器，您将拥有 1 个 133MB（100MB + 33MB）的减速器，另外两个 33MB。如果有 100 个 reducer，你会看到一个 101MB，其余的都是 1MB。如您所见，增加减速器的数量并没有太大帮助，但确实有一点帮助。可能还不足以真正将它传播得那么薄。

* * *

Hotspots are not going to be a problem for many jobs. The default partitioning behavior is completely reasonable for giving you a relatively even spread.

If you do have a hotspot that you are trying to squash or a very skewed data set, you can write a custom partitioner to write special rules for which reducer the data goes to. For example, if you know you have three keys that are hot spots, you can write a partitioner that sends key1 to reducer 1, key2 to reducer 2, key3 to reducer 3, then sends everything else to other reducers.

# c++ - c++: 无法解决向量订阅错误

> ID：11040304
> 
> 赞同：0
> 
> 时间：2012-06-14T19:47:23.740
> 
> 标签：c++, visual-studio-2010, vector

我试图`hours`通过遍历我的向量来获取所有变量的总和。现在我收到这个矢量订阅错误，我不知道如何解决它。这是我的代码：

```
int hulpInt = hours[0];

for (int i = hours[1]; i != hours[hours.size()-1]; i++)
{
    hulpInt = hulpInt + i;
}

int HOUR = hulpInt + hours[hours.size()]; 
```

如果您需要更多代码，请发表评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T19:55:00.810

解决这个问题的两种方法。

```
#include <functional>
#include <numeric>
#include <vector> 
```

方法一：使用vector.size()

```
int hulpInt =0;
for(int i=0;i<hours.size();i++){
    hulpInt+= hours[i];
} 
```

方法 2：使用 std::accumulate

```
int hulpInt = std::accumulate(hours.begin(),hours.end(),0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T19:52:18.303

请参阅[本文档](http://en.cppreference.com/w/cpp/container/vector)。

你应该这样做：

```
int sum = 0;

for (int i = 0; i < hours.size(); ++i) {
    sum += hours[i];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T19:55:01.810

当您遇到错误时，最好也将其包括在内。

具体来说，我猜您的索引超出了范围，`hours[hours.size()]`因为向量是基于零的索引。

STL 容器有漂亮的迭代器，有助于保持界限：

```
int h[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12};
std::vector<int> hours(h, h+12);
int total(0);
for (std::vector<int>::const_iterator i(hours.begin()); i != hours.end(); ++i)
    total += *i; 
```

STL 也有使用这些迭代器为你做常见事情的算法：

```
#include <numeric>

int h[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12};
std::vector<int> hours(h, h+12);
int total = std::accumulate(hours.begin(), hours.end(), 0); 
```

当然你也可以滚动你自己的循环：

```
int h[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12};
std::vector<int> hours(h, h+12);
int total(0);
for (int i(0); i < int(hours.size()); ++i)
    total += hours[i]; 
```

以上所有这些都得出了相同的结果，它们只是以稍微不同的方式进行。正如他们所说，给猫剥皮的方法总是不止一种。

# mysql - 如何获取当天的随机行？

> ID：11040305
> 
> 赞同：1
> 
> 时间：2012-06-14T19:47:29.010
> 
> 标签：mysql, sql

我有一个带有引号行的表，`(ID, QUOTE)`并且我有一个查询来获取随机报价`(ORDER BY RAND() LIMIT 0,1)`。我知道它很慢，但我没有太多行。所以现在我想得到当天的报价。它应该是随机报价，但在一天内不可更改。我不想添加新列，也不想选择当天的报价。我只想要一个查询，该查询将获得一个随机报价，但报价在一天中都是相同的，第二天它将返回其他随机报价。如何执行此 SQL Palladins？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T19:49:53.073

根据当前日期为随机数生成器使用种子：

```
ORDER BY RAND(20120714) LIMIT 1 
```

* * *

我也很好奇您在这里所说的“其他”是什么意思：

> 第二天它将返回*其他*随机报价。

如果您想每天选择*不同*`ORDER BY RAND(seed)`的随机报价，那么您不应该使用简单的. 这可能会连续三天返回相同的报价。

如果您想避免这种情况发生，您可以改为存储每天选择的报价，并从过去 n 天内未使用的报价中选择随机报价。当然，如果您要存储上次使用报价的时间，那么您的原始问题也有一个自然的解决方案：

*   查找今天最后一次使用的报价。
*   如果有的话，那就是当天的报价。
*   如果不是，则从过去 n 天内未使用的行中选择一个新的当天报价，并更新该行以显示它是今天的当天报价。

* * *

> 我不想添加新列

好的，稍微不同的方法怎么样：

```
ORDER BY RAND(201207) LIMIT 14, 1
--            yyyymm        dd 
```

现在您不需要额外的列，也不会重复，除非月份发生变化。此解决方案假定您至少有 32 个报价可供选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:30:13.813

解决此问题可能涉及编写一个应用程序，该应用程序将每天选择一次最大和最小 ID；从该范围计算一个随机数；然后将该数字写入文件。

负责打印报价的应用程序将根据存储在文件中的 ID 选择报价。

如今，足够多的语言（如 Python、Perl、PHP 和其他语言）拥有良好的数据库接口。Python 也有一个随机库。

# c++ - Can I get Doxygen to merge namespace contents in different files?

> ID：11040310
> 
> 赞同：2
> 
> 时间：2012-06-14T19:47:45.000
> 
> 标签：c++, doxygen

I have different .h files that each provide declarations in the same namespace. Doxygen generates a new entry for each file, with the same name. Can I make doxygen to merge all these?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:57:02.697

添加至少一个记录在案的命名空间声明。我习惯在一个单独的头文件中执行此操作，该文件包含项目根命名空间的文档全局定义（主页、组等）。

# javascript - 如何删除openlayer中的特定标记

> ID：11040312
> 
> 赞同：2
> 
> 时间：2012-06-14T19:47:47.767
> 
> 标签：javascript, html, openlayers, markers

这是从 capdragon 更新的新代码，但现在它不会创建标记。我现在不知道如何解决这个问题。我认为代码片段是解决我之前识别标记问题的一种非常聪明的方法，它可能是我现在缺少的一个非常小的东西。再次提供任何帮助将不胜感激。

```
<title>Open Street Map</title>
        <style type="text/css">
        html, body, #demo {
        position: absolute;
        left: 2%;
        width = 25%
        }
        html, body, #activePlanes {
        position: absolute;
        left: 2%;
        width = 25%
        }
        html, body, #mapBox {
        position: fixed;
        top: 0;
        right: 0;
        width: 75%;
        height: 100%;
        }
        </style>

        <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
        <script type="text/javascript">

        var arrMarkers = [];
        function AddPlaneMarker(planeID, lonlat)
        {
            var markers = new OpenLayers.Layer.Markers("Markers");
            map.addLayer(markers);
            var marker = new OpenLayers.Marker(lonlat);
            marker.PlaneID = planeID;
            markers.addMarker(marker);
            arrMarkers.push(marker);
        }

        function RemovePlaneMarker(planeID)
        {
            for(var x in arrMarkers)
            {
                if(arrMarkers[x].PlaneID == planeID)
                {
                    arrMarkers.splice(x, 1);
                    markers.removeMarker(arrMarkers[x]); 
                    return;
                }       
            }
        }  

        function GetPlaneMarker(planeID)
        {
            for(var x in arrMarkers)
            {
                if(arrMarkers[x].PlaneID == planeID)
                {
                    return arrMarkers[x];
                }       
            }
        }

        function displayPlane()
        {
            var x = document.getElementById('planeList');
            var newPlane = document.createElement('option');
            newPlane.text = document.getElementById("plane_ID").value;
            if (newPlane.text == null || newPlane.text == "")
            {
                alert("Please specify an Aircraft ID");
            }
            else
            {
                try
                {
                    x.add(newPlane, x.newPlane[null]); // standards compliant; doesn't work in IE
                }
                catch(e)
                {
                    x.add(newPlane, null); // IE only
                }
                var lonLat = new OpenLayers.LonLat(document.getElementById("long").value, document.getElementById("lat").value).transform(
                new OpenLayers.Projection("EPSG:4326"),
                map.getProjectionObject());
                var planeID = document.getElementById("plane_ID");
                AddPlaneMarker(planeID,lonLat);
            }
        }

        function init()
        {
            map = new OpenLayers.Map("mapBox");
            map.addLayer(new OpenLayers.Layer.OSM());
            focusPoint = new OpenLayers.LonLat(-81.04818, 29.18710)
            focusPoint.transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject());
            map.setCenter(focusPoint, 14);
        }

        function newLonLat()
        {
            var newValues = prompt("Please specify new location of the Aircraft", "-81.07870 29.17210");
            var theValues = newValues.split(" ");
            var newPixel = map.getLayerPxFromViewPortPx(map.getPixelFromLonLat(new OpenLayers.LonLat(theValues[0], theValues[1]).transform(
            new OpenLayers.Projection("EPSG:4326"),
            map.getProjectionObject())));
            marker.moveTo(newPixel);
        }

        function removePlane()
        {
            var x=document.getElementById("planeList");
            x.remove(x.selectedIndex);
            var planeID = x.options[x.selectedIndex].text;
            RemovePlaneMarker(planeID);
        }
        </script>

        <body onload="init();">
        <div id="mapBox"></div>
        </body>
        <body>
        <br /><div id="demo">
        Aircraft ID: <input type="text" id="plane_ID" value="AA5024"/><br />
        Longitude: &nbsp;<input type="text" id="long" value="-81.04818" /><br />
        Latitude: &nbsp;&nbsp;&nbsp;&nbsp;<input type="text" id="lat" value="29.18710" /><br /><br />
        <dd>&nbsp;&nbsp;&nbsp;&nbsp;<button value="Add Aircraft" OnClick="displayPlane()">Add Aircraft</button></dd>
        <br /><br />
        <h3><dd>Active Planes</dd></h3>
        <select id="planeList" size="10" multiple="multiple" style="text-align:center" ondblclick="newLonLat()">
        <option>----------Plane ID----------</option>
        </select><br />
        <dd><button value="Remove Aircraft" OnClick="removePlane()">Remove Aircraft</button></dd>
        </div>
        </body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:29:01.983

`markers`并且`marker`看起来它们不在`removePlane()`.

尝试在全局范围内声明它们并在`var`实例化它们时删除它们。：

```
<script type="text/javascript">
...
var markers, marker;
...
        function displayPlane()
             ...
             markers = new OpenLayers.Layer.Markers(name);
             ...
             marker = new OpenLayers.Marker(lonLat);
... 
```

# 每条评论更新：

我实际上最喜欢我的最后一个选择

~~我会在我自己的包含对标记的引用的平面对象数组中跟踪它们。像这样的东西：~~

 ~~```
​var arrPlaneObjects = []​;

function AddPlaneMarker(planeID, lonlat){

    var objPlane = {};
    objPlane.ID = planeID;
    objPlane.Marker = new OpenLayers.Marker(lonLat);
    //Add to layer.
    markers.addMarker(objPlane.Marker);
    //Add to array.
    arrPlaneObjects.push(objPlane);
}

function RemovePlaneMarker(planeID){
    for(var x in arrPlaneObjects){
        if(arrPlaneObjects[x].ID == planeID){
            //Remove from array.
            arrPlaneObjects.splice(x, 1);
            //Remove from layer.
            markers.removeMarker(arrPlaneObjects[x].Marker); 
            return;
        }       
    }
} 
```~~ 

~~然后您可以使用它轻松添加和删除标记：~~

 ~~```
AddPlaneMarker("AA5024", lonLat);

RemovePlaneMarker("AA2222"); 
```

另一种选择是只跟踪数组中的标记并将平面 ID 存储在该标记中，如下所示：

```
​var arrMarkers = []​;

function AddPlaneMarker(planeID, lonlat){

    var marker = new OpenLayers.Marker(lonLat);
    marker.PlaneID = planeID;
    //Add to layer.
    markers.addMarker(marker);
    //Add to array.
    arrMarkers.push(marker);
}

function RemovePlaneMarker(planeID){
    for(var x in arrMarkers){
        if(arrMarkers[x].PlaneID == planeID){

            //Remove from layer.
            markers.removeMarker(arrMarkers[x]); 
            //Remove from array.
            arrMarkers.splice(x, 1);
            return;
        }       
    }
} 
```

稍后给他们打电话：

```
function GetPlaneMarker(planeID){
    for(var x in arrMarkers){
        if(arrMarkers[x].PlaneID == planeID){
            return arrMarkers[x];
        }       
    }
}

var myPlaneMarker = GetPlaneMarker("AA2222"); 
```

# 解决方案更新

```
<title>Open Street Map</title>
        <style type="text/css">
        html, body, #demo {
        position: absolute;
        left: 2%;
        width = 25%
        }
        html, body, #activePlanes {
        position: absolute;
        left: 2%;
        width = 25%
        }
        html, body, #mapBox {
        position: fixed;
        top: 0;
        right: 0;
        width: 75%;
        height: 100%;
        }
        </style>

        <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
        <script type="text/javascript">

            var arrMarkers = [];
            var markers;

            function AddPlaneMarker(planeID, lonlat) {

                var marker = new OpenLayers.Marker(lonlat);
                marker.PlaneID = planeID;
                markers.addMarker(marker);
                arrMarkers.push(marker);

            }

            function RemovePlaneMarker(planeID) {
                for (var x in arrMarkers) {
                    if (arrMarkers[x].PlaneID == planeID) {

                        markers.removeMarker(arrMarkers[x]);
                        arrMarkers.splice(x, 1);

                        return;
                    }
                }
            }

            function GetPlaneMarker(planeID) {
                for (var x in arrMarkers) {
                    if (arrMarkers[x].PlaneID == planeID) {
                        return arrMarkers[x];
                    }
                }
            }

            function displayPlane() {
                var x = document.getElementById('planeList');
                var newPlane = document.createElement('option');
                newPlane.text = document.getElementById("plane_ID").value;
                if (newPlane.text == null || newPlane.text == "") {
                    alert("Please specify an Aircraft ID");
                }
                else {
                    try {
                        x.add(newPlane, x.newPlane[null]); // standards compliant; doesn't work in IE
                    }
                    catch (e) {
                        x.add(newPlane, null); // IE only
                    }
                    var lonLat = new OpenLayers.LonLat(document.getElementById("long").value, document.getElementById("lat").value).transform(
                new OpenLayers.Projection("EPSG:4326"),
                map.getProjectionObject());
                    var planeID = document.getElementById("plane_ID").value;
                    AddPlaneMarker(planeID, lonLat);
                }
            }

            function init() {
                map = new OpenLayers.Map("mapBox");
                map.addLayer(new OpenLayers.Layer.OSM());
                focusPoint = new OpenLayers.LonLat(-81.04818, 29.18710)
                focusPoint.transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject());
                map.setCenter(focusPoint, 14);

                markers = new OpenLayers.Layer.Markers("Markers");
                map.addLayer(markers);
            }

            function newLonLat() {
                var newValues = prompt("Please specify new location of the Aircraft", "-81.07870 29.17210");
                var theValues = newValues.split(" ");
                var newPixel = map.getLayerPxFromViewPortPx(map.getPixelFromLonLat(new OpenLayers.LonLat(theValues[0], theValues[1]).transform(
            new OpenLayers.Projection("EPSG:4326"),
            map.getProjectionObject())));
                marker.moveTo(newPixel);
            }

            function removePlane() {
                var x = document.getElementById("planeList");
                var id = x.options[x.selectedIndex].value;
                x.remove(x.selectedIndex);
                RemovePlaneMarker(id);
            }
        </script>

        <body onload="init();">
        <div id="mapBox"></div>

        <br /><div id="demo">
        Aircraft ID: <input type="text" id="plane_ID" value="AA5024"/><br />
        Longitude: &nbsp;<input type="text" id="long" value="-81.04818" /><br />
        Latitude: &nbsp;&nbsp;&nbsp;&nbsp;<input type="text" id="lat" value="29.18710" /><br /><br />
        <dd>&nbsp;&nbsp;&nbsp;&nbsp;<button value="Add Aircraft" OnClick="displayPlane()">Add Aircraft</button></dd>
        <br /><br />
        <h3><dd>Active Planes</dd></h3>
        <select id="planeList" size="10" multiple="multiple" style="text-align:center" ondblclick="newLonLat()">
        <option>----------Plane ID----------</option>
        </select><br />
        <dd><button value="Remove Aircraft" OnClick="removePlane()">Remove Aircraft</button></dd>
        </div>
        </body> 
```~~

# jquery - Checkbox Alignment

> ID：11040313
> 
> 赞同：0
> 
> 时间：2012-06-14T19:47:48.657
> 
> 标签：jquery, css

I'm wanting to figure out why the th checkbox never gets aligned with the rest of the column. All checkboxes should be center aligned.

[http://jsfiddle.net/waZRR/](http://jsfiddle.net/waZRR/)

UPDATE: Actual Live Version

[My link](http://www.kansasoutlawwrestling.com/kowmanager/bios/quotes)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:52:43.813

添加此样式规则，

```
.table thead th:first-child,
.table tbody td:first-child { text-align: center; } 
```

**演示：http:** [//jsfiddle.net/skram/waZRR/3/](http://jsfiddle.net/skram/waZRR/3/)

你的现场版本与你在小提琴中的不同。但问题出在下面的风格上`myccs.css`，

```
table .checkbox {
    margin: 0 !important;
    padding: 8px 13px;
} 
```

尝试添加如下样式，

```
table .checkbox {
    margin: 0 !important;
    padding: 8px 0px !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:55:57.490

你的运球示例通过放置

```
 table tr td:first-child { text-align: center !important; } 
```

[http://jsfiddle.net/waZRR/4/](http://jsfiddle.net/waZRR/4/)

**更新**

Vega 的解决方案显然更好！别理我^^

**更新 2**

按照 Vaga 的建议使用 css，并添加新的填充规则。像这样：

```
 .table thead th:first-child,
 .table tbody td:first-child { text-align: center; padding:4px 0px; } 
```

然后看起来不错:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T19:51:24.710

表头上的填充大于单元格上的填充。您将需要修改其上的填充以使您的`th`复选框与您的其他复选框对齐，`td`如下所示：

```
.table thead th {
  padding:7px;
} 
```

更新小提琴：http: [//jsfiddle.net/waZRR/1/](http://jsfiddle.net/waZRR/1/)

# google-apps-script - Not able to close a UiApp after it is invoked as a published service

> ID：11040315
> 
> 赞同：1
> 
> 时间：2012-06-14T19:47:54.487
> 
> 标签：google-apps-script

I have a published service on my script, the link to which I pass out to an email. Once the active account invokes the service a UiApp opens up for further processing. I do that using doGet(). Once the processing on the UiApp is complete I have a Submit button, linked to a server click handler, which is supposed to process the changes made through the UiApp forms. While I am able to change the values on the spreadsheet that I wish to change using this UiApp, I still have two issues which I encounter on clicking the Submit button:

1.  The Ui App doesn't close on pressing the submit button
2.  I am not able to call a browser msgBox to give a process complete verification message.

I have read a lot that on closing and returning the app the UiApp is supposed to get closed, but it isn't happening and I am assuming this is because that happens only if there is no serverClickHandler involved. I could be wrong.

Can someone help me with resolving Issue 1 and getting around Issue 2? A relevant version of my doGet and clickHandler functions are attached below.

```
function doGet(e) //On invoking service in the mail.
{
  //Adding all other elements of the UiApp here
  /* …
     …  All other elements of the UiApp
     …
*/
  //Adding Submit button to the UiApp
  var button = app.createButton('Submit');
  var handler = app.createServerClickHandler('click').addCallbackElement(panel);
  button.addClickHandler(handler);
  panel.add(button);
  app.add(panel);
  return app;
}

 function click(eventInfo) {
   var app = UiApp.getActiveApplication();
 //Processing the actions that have to be performed on hitting the submit button
/* …
   … Processing the actions that have to be performed on hitting the submit button
   …
*/
   app.close();
   return app;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:02:15.400

Browser.messageBox 在已发布的 UiApp 中不可用，您应该使用不可见的标签，直到您在流程结束时使其可见。另一个问题也不是问题：UiApp 无法关闭您的浏览器窗口，您可以简单地使 UI 的主面板不可见。

结合这两种修改将允许您隐藏表单并将其替换为“已完成，感谢提交”消息。

# python - 一次让其他人对 python 感兴趣的机会

> ID：11040321
> 
> 赞同：1
> 
> 时间：2012-06-14T19:48:11.153
> 
> 标签：python

这个问题不是技术问题，但仍然是关于编程的。

对于从未编程过的人来说，编程中最有趣、最有趣的部分是什么？你会怎么做才能激发成年人对编程的兴趣？当试图让某人感兴趣时，我不觉得谈论打印、函数和循环将是一个好方法。

Python 可能是最好的语言，但是你从哪里开始才不会觉得无聊呢？学习其他人解决特定问题可能会奏效，但我觉得我需要的不止这些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:24:13.517

我怀疑您能否让某人对编程*机制感兴趣。*这一切都是可怕的虐待狂。

另一方面，您可以通过编程*做的事情很棒。*我是在游戏编程的背景下被介绍给它的，我目前正在编写小型物理模拟程序（几乎总是某种数值积分器），以帮助我可视化和玩弄我们在讲座中学到的概念。我发现这些是您可以通过编程*长期做的很好的例子。*我知道它们都是简单的例子（我想知道你们中有多少人嘲笑“长期”），但它们足够复杂，对于不了解该主题的人来说是有趣且“不明显”的。

我更推荐的是普通初学者程序员实际上能够做到的事情，例如：

1.  基本的网络编程，如果你愿意的话，即使是在 python 中。很多人喜欢制作自己的网页，并包含一些 php 或 python 功能以提供更有趣的交互性总是很好的。

2.  对于某些乏味的事情，我还推荐使用小型自动化脚本。我最喜欢的例子是我的大学课程选择过程的自动登录脚本，它的容量很可怕。为自己节省了很多腕管和眼泪。

我发现最后一个确实适合人们。当他们第一次遇到问题时，灯就会亮，然后说*“我现在实际上可以做点什么”*，或者*“我不必浪费时间在几秒钟内可以完成的事情上”*，这就是我认为的洞察力早期的程序员（尤其是入门课程中不情愿的程序员）确实需要。

至于语言，我第二个python。它非常易于使用，让您专注于手头的实际*问题*，而不会被语法所束缚，这确实简化了学习过程，让您更快地获得好东西。想要深入编程的人总是可以在以后将他们学到的知识应用到低级语言中。

# php - Intercept a click into a twitter button via twitter iframe for internal counter via jquery

> ID：11040323
> 
> 赞同：2
> 
> 时间：2012-06-14T19:48:20.710
> 
> 标签：php, ajax, jquery, twitter

Looking to intercept a click into a stock twitter button. Am attempting to make a note of the click and simply update my on internal counter of these clicks. By running an ajax request to a page that ratchets up. Can a click on this iframed element be caught? Have tried many renditions, here is a stripped down version. Have tried wrapping the element in divs to no avail.

```
<!-- START TW SHARE --> 
<a id="XXX" href="https://twitter.com/share" class="twitter-share-button" data-url="." data-text="Join the Challenge &amp; Join now:" data-size="large" data-related="sample data" data-count="none">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<!-- END TW SHARE -->   

/// VIA JQuery
       $("XXX']").click(function() {
        $.ajax({url: 'plus.php?ID=<?php echo $ID;?>' });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:58:33.533

您将需要使用[**Twitter API**](https://dev.twitter.com/docs)来完成此操作。

我会开始研究他们的[**Javascript 事件**](https://dev.twitter.com/docs/intents/events)，它可以测量与推文按钮的交互。

**编辑：**特别是，它是您之后的[**点击**](https://dev.twitter.com/docs/intents/events#click)方法：

`Receive an event when the user has clicked the Tweet Button or Follow Button.`

`"tweet" — the click occurred on the Tweet Button itself, invoking an Intent (which will trigger an Intent Event Callback when complete).`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:03:14.287

我有一个想法，但我不知道它是否可行（从未尝试过）。我认为如果 iframe 不在同一个域中，jquery 将无法正常工作。下面是 jquery iframe 拦截，如果它是同一个域

```
<iframe id="myframe" src='/'></iframe> 
```

js

```
$('#myframe').contents().find('body').bind('click', function(e) {

   alert('clicked');
}); 
```

但我认为这不起作用，因为 twitter 位于不同的域中，所以我想的是制作一个带有 twitter 按钮的空白页面，然后使用您的 iframe 和我们上面的代码调用该页面。从技术上讲，您仍在单击不同的域内容，但由于您的原始呼叫是您的域，它可能会注册？你可以试一试，我现在就去测试。这是一个长镜头。

编辑：不，没有用！

# c# - Autogenerate Columns from data in grid control

> ID：11040325
> 
> 赞同：2
> 
> 时间：2012-06-14T19:48:27.217
> 
> 标签：c#, devexpress

I set the datasource for a WPF `dxg:GridControl` to that of a hard coded list.

```
 gridControl1.ItemsSource = new List<Entity> { new Entity() { Name = "1" }, new Entity() { Name = "2" }, new Entity() { Name = "3" } }; 
```

I have to specify each column in the XAML:

```
 <dxg:GridControl.Columns>
            <dxg:GridColumn FieldName="Name" Name="gridColumn1" />
            <dxg:GridColumn FieldName="Column2" Name="gridColumn2" />
        </dxg:GridControl.Columns> 
```

How can I get the columns to autogenerate instead of specifying XAML?

I tried removing the columns. That displayed nothing. The data actually comes from a WCF service at runtime, so the "Populate Columns" button in design mode is probably not going to work either.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:53:08.083

在黑暗中有点刺，但WPF中的其他网格通常有这样的东西......

```
<dxg:GridControl AutoPopulateColumns ="True"> 
```

（编辑以获取实际属性名称）

# php - Is this mail() function safe from header injection?

> ID：11040328
> 
> 赞同：11
> 
> 时间：2012-06-14T19:48:41.443
> 
> 标签：php, security, spam-prevention

I'm building a simple contact form for a website. It does not connect to a database, it just sends the email. Will this code prevent spammers from using header injections? Are there any vulnerabilities I'm not seeing?

```
//create short variable names
$name= filter_var($_POST['Name'],FILTER_SANITIZE_STRING);
$email= filter_var($_POST['Email'],FILTER_SANITIZE_STRING, FILTER_VALIDATE_EMAIL);
$subject= filter_var($_POST['Subject'],FILTER_SANITIZE_STRING);
$message= filter_var($_POST['Message'],FILTER_SANITIZE_STRING);

//set up some static information
$toaddress = 'blah@localhost.com,blahblah@localhost.com';

$mailcontent = "Customer name: ".$name."\n".
            "Customer email: ".$email."\n".
            "Subject: ".$subject."\n\n".
            $message;

$fromaddress = "From:" . $email;

//invoke mail() function to send mail
mail($toaddress, "Website Contact Form",$mailcontent, $fromaddress);
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T20:20:50.277

标头注入依赖于能够在标头变量中插入额外的换行符，这使得字符串看起来像一个新的标头。

例如，允许主题值`Testing\nCc: spamrecipient@example.com\n\nSome body text`将导致消息头包含：

```
Subject: Testing
Cc: spamrecipient@example.com

Some body text 
```

即施虐者不仅添加了额外的收件人，而且他们还设法提供了自己的正文。

但是，在您的情况下，它`$toaddress`是恒定的，即使`$toaddress`是用户提供的，它也应该由`mail()`函数正确清理。

您的主题标题同样是恒定的

该`$message`变量是安全的，因为根据定义，它是正文，仅在真正的标题之后发送。

那只会留下`$fromaddress`，并且您已经在使用`FILTER_VALIDATE_EMAIL`that 也应该拒绝任何带有换行符的内容。

但是，您应该严格检查该测试的结果，如果结果为`FALSE`. 因为如果验证失败，`mail()`则会抱怨给了一个空白`From:`地址，但那里没有标头注入机会。

*那么，据我所知，这段代码实际上是安全的。*

* * *

另外，恕我直言，您不应该从用户提供的电子邮件地址发送电子邮件。这将违反 SPF 等反垃圾邮件机制。

您应该使用`From:`属于您自己域的常量值。如果您愿意，您可以在`Reply-To`标头中使用正确清理的值，以便更容易将后续回复发送到所需地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:59:25.810

恕我直言，您的代码不安全，因为您错过了`\r`字符`\n`。`filter_var()`仅杀死那些，如果`FILTER_SANITIZE_STRING`与 一起使用`FILTER_FLAG_STRIP_LOW`，它还将过滤掉 ASCII 32 以下的任何字符：

```
$message= filter_var($_POST['Message'], 
                     FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_LOW); 
```

此外，`FILTER_VALIDATE_MAIL`将返回一个真或假，你也没有考虑。我建议查看[这个](http://www.phpro.org/tutorials/Filtering-Data-with-PHP.html)优秀的源代码`filter_var()`，因为主要的 PHP 手册信息非常少。

* * *

**更新：**正如 Alnitak 指出的那样，通过`\n\n`代码中的 ，这实际上并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T19:50:14.813

不，这不会消毒任何东西。

捏造那个邮件是非常非常容易的。

我可以在帖子值（您阅读的）中添加任何内容来操作邮件程序。

# html - 试图在无序列表中浮动 div

> ID：11040330
> 
> 赞同：0
> 
> 时间：2012-06-14T19:48:48.760
> 
> 标签：html, css, list, css-float, html-lists

我是一个初出茅庐的网页设计师，并不总是努力将我的设计实现为代码，但今天当我在一个网站上工作时，我遇到了一个问题。我正在尝试在`<li>`列表元素中嵌套两个 div。我希望一个跨越`<li>`元素的整个高度，`float: left;`而另一个 div 包含两行文本，我希望它能够`float: right;`。我认为我想做的事情相当简单，但由于某种原因，我真的很难让它正常工作。我基本上只是制作一个日历事件列表，最终我将使用 PHP 从 Google 日历中提取数据并重新填充您在下面看到的示例信息。

我试图让列表看起来像这样：

[![列表设计示例](../Images/f697fbc77ec2692100633cef926ae863.png)](https://i.stack.imgur.com/PRgmC.jpg)

请记住，为了让代码正常工作，我暂时在 CSS 中用*Arial Black*和*Arial*替换了我的 Google Webfont 。*Arial Black*应用于`.day`类字体，*Arial*应用于`.info`类字体（又名时间和地点线）。

## 任何帮助将不胜感激！谢谢！！

**HTML：**

```
<ul class="gcal">
    <li>
        <div class="gcal-event">
            <div class="day">
                6.07
            </div>
            <div class="info">
                <span class="time">8pm-10:30pm</span><br />
                    456 Fake Ln. Blvd., New York, NY
            </div>
        </div>
    </li>
    <li>
        <div class="gcal-event">
            <div class="day">
                7.12
            </div>
            <div class="info">
                <span class="time">6pm-7pm</span><br />
                    123 Fake Ln., Chicago, IL
            </div>
        </div>
    </li>
</ul> 
```

**CSS：**

```
ul.gcal {
    list-style: none;
    padding: 0 0 0 15px;
}

ul.gcal li {
    padding: 0 0 0 50px;
    display: block;
}

.gcal-event {
}

.day {
    float: left;
    width: 150px;
    text-align: right;
    padding: 7px 0 0 0;
    font-family: 'Arial Black', sans-serif;
    font-size: 48px;
    line-height: 0.6em;
}

.info {
    float: right;
    width: 640px;
    text-align: left;
    padding: 0 0 0 10px;
    font-family: 'Arial', sans-serif;
    font-size: 20px;
    line-height: 1em;
}

.info span.time {
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:59:09.813

这是因为`li`s 正在失去他们的高度。浮动的孩子不会影响父母的身高。添加`overflow: hidden`到`li`s 以解决此问题。

```
ul.gcal li {
    padding: 0 0 0 50px;
    display: block;
    overflow: hidden;
} 
```

[小提琴](http://jsfiddle.net/BVX6U/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T21:12:40.957

非浮动元素中的浮动元素会导致问题。我发现在试图弄清楚发生了什么时向我的代码添加背景颜色或边框很有帮助。如果您为所有元素添加背景颜色，您会发现`<li>`缺少 。为了帮助您的浏览器确定包含元素的位置，您需要将其与浮动分组。你有几个选择，要么

```
ul.gcal li {
    padding: 0 0 0 50px;
    display: block;
    background-color: red;
    float: left;
} 
```

或者在浮动内容的底部添加一个清除，就像这样

```
<li>
    <div class="gcal-event">
        <div class="day">
            7.12
        </div>
        <div class="info">
            <span class="time">6pm-7pm</span><br />
                123 Fake Ln., Chicago, IL
        </div>
    </div>
    <br clear="all">
</li> 
```

`clear="all"`不再鼓励该属性（相反，我们应该在下一个元素上使用明确的类`.clear { clear:both; }`），但有时我仍然这样做。我是说……不，我没有！！ho说我做到了？？诽谤！

这是一个小提琴[http://jsfiddle.net/WkBgg/](http://jsfiddle.net/WkBgg/)

我注意到的另一件事是`float:right;`硬编码宽度。根据浏览器（如移动浏览器）的大小，这将导致其上方的内容出现一些奇怪的对齐。您可能需要重新考虑如何调整这两者。在小提琴中，如果您将窗口缩小到小于 640 像素，您就会明白我的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:00:17.803

尝试这样的事情：[jsfiddle](http://jsfiddle.net/Vnp9T/1/)。可能是我的例子可以帮助你。如果你需要更多的东西问我。

# performance - 矩阵求逆的最快方法

> ID：11040333
> 
> 赞同：3
> 
> 时间：2012-06-14T19:48:59.023
> 
> 标签：performance, algorithm, opencv, linear-algebra, matrix-inverse

我想用反函数和很多函数处理图像。为了使代码快速运行，在 3 种反转方法中，任何人都可以提出快速方法吗？

```
double cvInvert(const CvArr* src, CvArr* dst, int method=CV_LU) 
```

*   CV_LU 高斯消除，选择了最佳枢轴元素
*   CV_SVD 奇异值分解 (SVD) 方法
*   CV_SVD_SYM 对称正定义矩阵的 SVD 方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T21:02:26.263

在 OpenCV2.x 中，有一个新接口`Mat::inv(int method)`用于计算矩阵的逆。请参阅[参考资料](http://opencv.itseez.com/modules/core/doc/basic_structures.html)。

> C++: MatExpr Mat::inv(int method=DECOMP_LU) const
> 
> 参数：方法——</p>
> 
> ```
>  Matrix inversion method. Possible values are the following:
>         DECOMP_LU is the LU decomposition. The matrix must be non-singular.
>         DECOMP_CHOLESKY is the Cholesky LL^T decomposition for symmetrical positively defined matrices only. This type is about twice faster than LU on big matrices.
>         DECOMP_SVD is the SVD decomposition. If the matrix is singular or even non-square, the pseudo inversion is computed. 
> ```

我对每种方法进行了测试，它表明 DECOMP_CHOLESKY 对于测试用例来说是最快的，而 LU 给出了类似的结果。

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <iostream>

int main(void)
{
    cv::Mat img1 = cv::imread("2.png");
    cv::Mat img2, img3, img;
    cv::cvtColor(img1, img2, CV_BGR2GRAY);
    img2.convertTo(img3, CV_32FC1);
    cv::resize(img3, img, cv::Size(200,200));

    double freq = cv::getTickFrequency();

    double t1 = 0.0, t2 = 0.0;
    t1 = (double)cv::getTickCount();
    cv::Mat m4 = img.inv(cv::DECOMP_LU);
    t2 = (cv::getTickCount()-t1)/freq;
    std::cout << "LU:" << t2 << std::endl;

    t1 = (double)cv::getTickCount();
    cv::Mat m5 = img.inv(cv::DECOMP_SVD);
    t2 = (cv::getTickCount()-t1)/freq;
    std::cout << "DECOMP_SVD:" << t2 << std::endl;

    t1 = (double)cv::getTickCount();
    cv::Mat m6 = img.inv(cv::DECOMP_CHOLESKY);
    t2 = (cv::getTickCount()-t1)/freq;
    std::cout << "DECOMP_CHOLESKY:" << t2 << std::endl;

    cv::waitKey(0);
} 
```

这是运行结果：

> 陆：0.000423759
> 
> DECOMP_SVD:0.0583525
> 
> DECOMP_CHOLESKY:9.3453e-05

# linux - Linux：如何在新的终端窗口中“分叉”而不是执行新进程？

> ID：11040334
> 
> 赞同：0
> 
> 时间：2012-06-14T19:49:14.830
> 
> 标签：linux, process, fork

我正在使用带有posix的fedora 15，并且我想在一个新的终端窗口中分叉我的子进程，在该窗口中我只能与子进程交互，而父进程仍保留在原始终端中。我不想执行，因为这需要我重新安排我的所有代码，这些代码目前似乎不可行，因为我必须在后天展示我的项目。这可能吗？如何？我试过 forkpty 但它给了我一个编译错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:07:02.890

看看`man screen`。我认为这可能是您正在寻找的东西..

例如，您可以运行：

```
screen -dmS SESSION_NAME bash -c "COMMAND" 
```

其中 SESSION_NAME name 是会话的名称，COMMAND 是您要执行的命令。这样，它将作为守护进程启动，与您当前的 shell 分离。您没有义务这样做，但似乎更适合您的问题的解决方案。`-dmS SESSION_NAME`如果你想在前台删除它。

然后，您可以通过以下方式与孩子互动：

```
screen -r SESSION_NAME 
```

您可以使用以下命令返回主 shell：

```
screen -d 
```

# c++ - 复制 boost::array 到 std::string

> ID：11040335
> 
> 赞同：8
> 
> 时间：2012-06-14T19:49:17.527
> 
> 标签：c++, string, boost, iterator, stdstring

我正在尝试 cvopy`boost::array<char>`到`std::string`.

```
boost::array<char, 1024> _buffer;
std::string data;
std::copy(_buffer.begin(), _buffer.begin()+bytes_transferred, data.begin()); 
```

这是行不通的。所以我稍微改了一下。

```
char _buffer[1024];
std::string data;
std::copy(_buffer, _buffer+bytes_transferred, data.begin()); 
```

第二个也不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T19:50:39.787

这里的问题是`copy`假设您正在写入的数据已经存在空间；它不会为您创造任何新空间。因此，上述两段代码都会导致未定义的行为，因为您要将字符复制到以前未保留空间的位置。

最好的方法是使用`string`构造函数：

```
boost::array<char, 1024> _buffer;
std::string data(_buffer.begin(), _buffer.end()); 
```

或者

```
char _buffer[1024];
std::string data(_buffer, _buffer + 1024); 
```

这会将字符串初始化为存储在数组中的数据的副本。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T19:59:40.060

您可以使用[back_insert_iterator](http://en.cppreference.com/w/cpp/iterator/back_insert_iterator)。分配给它会调用`push_back`底层容器的函数，所以你不必担心手动分配空间。

```
std::copy(_buffer.begin(), _buffer.begin()+bytes_transferred, std::back_inserter(data)); 
```

# java - 如何在 GitHub 上管理外部 JS/CSS 库

> ID：11040337
> 
> 赞同：15
> 
> 时间：2012-06-14T19:49:24.017
> 
> 标签：java, javascript, maven, repository, project-management

对于我使用**Maven的****Java**项目，我最近将 Twitters Bootstrap 添加到了我在 GitHub 上的存储库中。现在我注意到我的 GitHub 语言统计数据从

 ***   100% 爪哇

至

*   66,% Java 33,3% JavaScript

由于我没有编写 JS 部分，有没有一种方法可以管理这不被视为我的，或者**通常如何管理 GitHub 存储库**或项目中的外国 JS 代码

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-29T20:28:51.650

我最近也遇到了这个*问题*。有几种方法可以处理它：

*   使用性能优化的版本，例如**bootstrap.min.js**而不是**bootstrap.js**等[。GitHub 使用文件大小](https://github.com/github/linguist/blob/master/lib/linguist/repository.rb#L83)来确定每个存储库的语言比例。这不会将其降低到零，但至少会降低比例

*   **这可能是您想要的：** GitHub 有一个供应商列表，其中包含从语言图中排除的[正则表达式。](https://github.com/github/linguist/blob/master/lib/linguist/vendor.yml)在那里你会看到，jQuery 已经是排除的一部分。还有一个待处理的拉取请求以添加 Twitter Bootstrap。如果这没有通过，您可以随时将文件添加到名为**vendor**的目录中，它们将从统计信息中排除。

*   使用[Maven AntRun 插件：使用它，您可以简单地使用](http://maven.apache.org/plugins/maven-antrun-plugin/)[Ant Get](http://ant.apache.org/manual/Tasks/get.html)下载 JavaScript 库文件

*   这些 JavaScript 库也有 Maven 存储库：[Bootstrap-Maven](https://github.com/efsavage/Bootstrap-Maven)。但是，文件安装在`/ext/bootstrap/`，我不知道这有什么帮助

*   还有更多的解决方案，比如[Maven War Plugin using overlays](http://maven.apache.org/plugins/maven-war-plugin/examples/war-overlay.html)。

最后我的建议：只需将文件放入您的存储库。我在 GitHub 上使用 jQuery 和 Twitter Bootstrap 研究了一些更大的项目，它们**都**将 JavaScript 库文件放入存储库。

这些 JavaScript 库文件的优点是它们不必像以往那样编译。利用这一优势，不要为了美观而增加额外的负担。最佳实践似乎是将其添加到存储库并使用愚蠢的语言图。谁知道呢，也许将来某些文件会被忽略。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-01T07:19:18.303

这个问题相当老了，但为了将来参考，应该注意的是 GitHub 在 2014 年添加了一个新[功能](https://github.com/github/linguist#overrides)来处理这个问题。可能要感谢[语言学家](https://github.com/github/linguist)存储库上的一个未[解决问题](https://github.com/github/linguist/issues/137)。

此功能允许将某些文件视为库、文档或特定语言。

只需将`.gitattributes`文件添加到您的存储库。例如，要忽略库文件夹，只需添加以下行：

```
library/* linguist-vendored 
```

或者要设置 docs 文件夹，请添加以下行：

```
docs/* linguist-documentation 
```

更多示例可以在[这里](https://github.com/github/linguist#overrides)找到。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T19:54:55.457

两个观察：

*   GitHub 的统计数据并没有错：您的项目由这些数量的 Java 和 JavaScript 代码组成。说它是 100% Java 项目是不正确的。
*   在您自己的代码存储库中包含依赖项并不常见。您可以手动或自动安装它们（使用因每种编程语言/环境而异的系统/方法）。例如，Python 有一个名为 requirements.txt 的文件，其中列出了依赖项，但在 Java 中，我可以想象会有类似的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-30T13:08:49.723

使用 git 子模块或将您的第 3 方文件放在名为“供应商”的目录中。那么 Github 不会将它们算作你的代码的一部分

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T04:32:41.627

将项目拆分为多个子模块是 Maven 的最佳实践，每个子模块都有一个小的、明确定义的用途。如果您将不同类型的源代码放在同一个 Maven 模块中，那么您就没有正确使用它。假设最终你会得到一个 .war，那么我的建议是添加 Bootstrap、jQuery 和任何其他你正在使用的库作为将包含在 war 构建中的 zip 依赖项。

假设您可以将这些库作为可下载的 Maven 依赖项获取（我将在下面讨论您实现此目的的选项），那么您只需将它们声明为您的战争工件的依赖项：

```
 <dependency>
    <groupId>com.twitter.bootstrap</groupId>
    <artifactId>twitter-bootstrap</artifactId>
    <version>2.0.4</version>
    <type>zip</type>
    <scope>runtime</scope>
  </dependency> 
```

就您自己的代码而言，这就是您需要“包含”的所有引导程序。

你如何获得可用的拉链？好吧，最好的办法是看到它在中央 Maven 存储库上发布，但这不是**您**应该做的事情；Twitter 应该加强并照顾所有 Maven 用户。

下一个最好的办法是找到另一个已经打包好的公共存储库，但是在短暂的谷歌搜索之后我找不到一个*打包好的*，也许你会有更多的运气。

第三种选择是将事情掌握在自己手中，并为该 zip 创建适当的 Maven 构建并将其发布到您自己的存储库中。

[我更喜欢构建此类资源 zip 的一种解决方案是使用 maven 程序集插件，您可以使用这个 maven 项目](https://github.com/xwiki/xwiki-platform/tree/b0be057e741eead5af4d01943eaa262508bbc5b3/xwiki-platform-core/xwiki-platform-toucan)作为灵感：将源（js、css 和图像文件）放入[`src/main/resources`](https://github.com/xwiki/xwiki-platform/tree/3ba9fbbca51ffebac4ea320e4406317f78fcc93d/xwiki-platform-toucan/src/main/resources)，并添加一个[简单的程序集文件](https://github.com/xwiki/xwiki-platform/blob/3ba9fbbca51ffebac4ea320e4406317f78fcc93d/xwiki-platform-toucan/src/assemble/skin.xml)，它只是复制将资源目录中的所有文件压缩成一个 zip。在服务器上设置一个 maven 存储库（具有 sftp 访问权限的简单 HTTP 服务机器就足够了），并在该项目上进行 maven 发布以将工件上传到服务器上。

（无论如何，您应该有一个 Maven 存储库来发布您自己的项目）

接下来，您需要在真实项目的 pom 文件中声明您的存储库，添加对 bootstrap 工件的依赖项，并配置 maven-dependency-plugin 以将其解压缩到您选择的位置：

```
...
  <repositories><repository>
    <id>bootstrap-repo</id>
    <name>bootstrap public repository</name>
    <url>http://repo.yourhost.net/release</url>
    <releases>
      <enabled>true</enabled>
    </releases>
    <snapshots>
      <enabled>false</enabled>
    </snapshots>
  </repository></repositories>
...
  <dependencies><dependency>
    <groupId>com.twitter.bootstrap</groupId>
    <artifactId>twitter-bootstrap</artifactId>
    <version>2.0.4</version>
    <type>zip</type>
    <scope>runtime</scope>
  </dependency></dependencies>
...
  <build><plugins><plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
      <execution>
        <id>unpack-dependencies</id>
        <phase>prepare-package</phase>
        <goals>
          <goal>unpack</goal>
        </goals>
        <configuration>
          <artifactItems>
            <!-- Unpack the Bootstrap library -->
            <artifactItem>
              <groupId>com.twitter</groupId>
              <artifactId>twitter-bootstrap</artifactId>
              <type>zip</type>
              <outputDirectory>${project.build.directory}/bootstrap</outputDirectory>
            </artifactItem>
          </artifactItems>
        </configuration>
      </execution>
    </executions>
  </plugin></plugins></build>
... 
```

（我不确定将其`com.twitter`用作 groupId 是否安全，因为他们不是发布该工件的人，因此请使用您自己的 groupId）

由于您自己的代码只是声明了对此 twitter-bootstrap 工件的依赖关系，因此您可以保持主 GitHub 存储库没有第三方代码。如果您不希望您的编码统计受到影响，那么您根本不必提交构建 twitter-bootstrap 工件的项目，尽管您编写的每一行代码都应该提交。

## 替代方案：maven-antrun-plugin

使用 mavenized 第三方库打包的替代方法是使用[maven-antrun-plugin](http://maven.apache.org/plugins/maven-antrun-plugin/)中的 ant 任务从其官方 zip 发行版中提取这些文件，以下载 zip 并从中提取文件。

或者，您可以在 twitter-bootstrap maven 项目中使用此技巧，以避免复制其源文件。**

# linux - Gnome-terminal：重置键盘快捷键

> ID：11040342
> 
> 赞同：4
> 
> 时间：2012-06-14T19:49:34.937
> 
> 标签：linux, unix, terminal, gnome-terminal

我想重置`gnome-terminal`.

我试过：

*   `apt-get autoremove gnome-terminal`
*   `apt-get purge gnome-terminal`

这些成功安装，但没有任何区别。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T00:29:40.883

我发现。

```
cd ~/.gconf/apps/gnome-terminal/
rm -r keybindings/ 
```

还是非常感谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:01:01.243

如果我对您的理解正确，您可以尝试使用`reset`或`tput reset`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:01:41.437

你的意思是重置打开终端窗口的快捷键吗？如果是，您可以在系统设置的键盘部分找到它。您使用的是什么 GNU/Linux 发行版？在 Ubuntu 上，您转到 System Settings->Keyboard->Shortcuts->Launchers 并在那里找到 Launch Terminal。默认快捷键是`Ctrl`+ `Alt`+`T`

# sql - 访问查询帮助

> ID：11040344
> 
> 赞同：0
> 
> 时间：2012-06-14T19:49:43.047
> 
> 标签：sql, ms-access

我有一个名为 SOLDIER INFO 的表 我在该表中有一个名为 ORDER NUMBER 的字段。我想在 ORDER NUMBER 所在的任何地方更新。您会看到该列基于儒略日，并且一直填充为 5、15 或 152。我需要它填充为 005 或 015，显然 152 是好的。

基本上我需要字段 ORDER NUMBER 始终为 3 位数。它永远不会为空。但我需要它是 001、008、015 等，而不是 1、8、15。希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:02:48.860

我不知道访问 SQL 语法，如果您包含表结构等，它将帮助您获得更好的答案。此外，您尝试的任何查询的代码。但这里是你需要做什么来完成你的任务的想法。取`RIGHT`“000”串联中的 3 个（实际上您可以使用“00”，但如果您使用 3 个零并且确实有任何空值，那么该值将是“000”）并且该值已经在 [ORDER NUMBER] 中。任何长度为 1 的东西都会有 2 个前导零，长度为 2 的东西将有 1 个前导，而 3 看起来仍然相同。您可以使用(Length) 函数消除`WHERE`子句中已经是 3 个字符的任何内容。`LEN`我确实谷歌看到这两者`LEN`都是`RIGHT`访问功能。

```
UPDATE [SOLDIER INFO]
SET [ORDER NUMBER] = RIGHT('000' + [ORDER NUMBER],3)
WHERE LEN([ORDER NUMBER]) < 3 
```

# bison - 关于移位/减少警告的野牛

> ID：11040346
> 
> 赞同：0
> 
> 时间：2012-06-14T19:49:57.870
> 
> 标签：bison, lex

我写了一个 flex/bison prog 语言解析器。目前几乎完成（我相信已经完成，只需要处理语法错误）。在特定的类中，出现了一些奇怪的问题。

我相信问题出在解析器中。我停止阅读编译控制台，今天，我回到它并看到了一件坏事：

```
parser.y: conflicts: 801 shift/reduce, 237 reduce/reduce 
```

之后，我重新启动以构建解析器并读取结果以在完成后立即发现问题。

```
input:
    | input expression { std::cout << $2; }
    ;

expression:
      expression comparing expression { $$ = new AExpOperation( $1, $2, $3 ); }
    | expr2 { $$ = $1; }
    | TNEW identifier TLBRACKET TRBRACKET { $$ = new AExpNewArray( NULL, $2 ); }
    | TLPAREN expression TRPAREN { $$ = new AExpParent( $2 ); }
    ;

expr2:
      TPLUS expr2 { $$ = $2; }
    | TMINUS expr2 { $$ = new AExpFastOp( $2, $1, true ); }
    | TBNOT expr2 { $$ = new AExpFastOp( $2, $1, true ); }
    | TNOT expr2 { $$ = new AExpFastOp( $2, $1, true ); }
    | expr2 TINCREMENT { $$ = new AExpFastOp( $1, $2, false ); }
    | TINCREMENT expr2 { $$ = new AExpFastOp( $2, $1, true ); }
    | expr2 TDECREMENT { $$ = new AExpFastOp( $1, $2, false ); }
    | TDECREMENT expr2 { $$ = new AExpFastOp( $2, $1, true ); }
    ;

comparing:
      TEQ | TNE | TLT | TLE | TGT | TGE | TPLUS | TMINUS | TDIVIDE | TMULT | TOR | TAND
    | TBXOR | TLSHIFT | TRSHIFT | TZFILL | TBOR | TBAND | TBNOT | TEQA | TNEA | TINSTANCEOF
    ;

identifier:
      TNUMBER { $$ = new AExpression( $1 ); }
    | TNAME { $$ = new AExpression( $1 ); }
    | TSTRING { $$ = new AExpression( $1 ); }
    | TFALSE { $$ = new AExpression( $1 ); }
    | TTRUE { $$ = new AExpression( $1 ); }
    | TNULL { $$ = new AExpression( $1 ); }
    | TTHIS { $$ = new AExpression( $1 ); }
    ; 
```

只是这小部分出现了我不明白为什么的错误：

```
parser.y: warning: 1 useless nonterminal and 9 useless rules
parser.y:40.25-29: warning: useless nonterminal: expr2
parser.y:69.11-28: warning: useless rule: expression: expr2
parser.y:75.11-34: warning: useless rule: expr2: TPLUS expr2
parser.y:76.11-63: warning: useless rule: expr2: TMINUS expr2
parser.y:77.11-62: warning: useless rule: expr2: TBNOT expr2
parser.y:78.11-61: warning: useless rule: expr2: TNOT expr2
parser.y:79.11-68: warning: useless rule: expr2: expr2 TINCREMENT
parser.y:80.11-67: warning: useless rule: expr2: TINCREMENT expr2
parser.y:81.11-68: warning: useless rule: expr2: expr2 TDECREMENT
parser.y:82.11-67: warning: useless rule: expr2: TDECREMENT expr2 
```

例如，为什么说 TPLUS expr2 没用？

现在我想知道 shift/reduce 和 reduce/reduce 有多糟糕？

嗯，我需要一个线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:59:31.677

它告诉你规则`expr2`永远不能减少，因为没有`expr2`不包含递归的 an 的产生`expr2`，这意味着没有（有限的）输入可以匹配 an `expr2`。

您可能打算`expr2: identifier`制作 - 添加这将使`useless rule`警告消失，但仍会留下一些转变/减少和减少/冲突需要解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:52:18.520

简而言之，你确实想解决你的 shift/reduce 和 reduce/reduce 冲突。冲突是解析器生成器在给定特定（不明确）输入的情况下表示它不知道要应用哪个产品的方式。

我认为“无用”是野牛的说法，即没有可以`expr2`应用非终端的可能输入。

关于您的语法的一些观察：（1）您的表达式非终结符似乎缺少`identifier`. 我读你的语法的方式，“a + 2”不是一个有效的表达。(2) 缺少语句分隔符让我感到困扰——这并没有错，但我认为你正在引入歧义的机会。也许这是您正在解析的语言的限制。

一个可能的策略：暂时删除一元运算符功能 ( `expr2`) 并让解析器的其余部分正常工作；然后重新添加该功能。

# iphone - Objective-C - Hello World 应用修改

> ID：11040357
> 
> 赞同：0
> 
> 时间：2012-06-14T19:50:51.740
> 
> 标签：iphone, objective-c

我只是在学习做“Hello, World”应用程序。但我有一个问题。我想更改代码，使结果显示为“World，Hello”，但无法弄清楚我做错了什么。

这是原始代码：

```
- (IBAction)changeGreeting:(id)sender {

self.userName = self.textField.text;

NSString *nameString = self.userName;
if ([nameString length] == 0) {
    nameString = @"World";
}
    NSString *greeting = [[NSString alloc] initWithFormat:@"Hello, %@!", nameString];
    self.label.text = greeting;
} 
```

我认为如果我可以将其更改为：

```
- (IBAction)changeGreeting:(id)sender {

self.userName = self.textField.text;

NSString *nameString = self.userName;
if ([nameString length] == 0) {
    nameString = @"World";
}
    NSString *greeting = [[NSString alloc] initWithFormat:nameString , @"Hello, %@!"];
    self.label.text = greeting;
} 
```

然而，这仍然没有奏效。我会怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T19:52:38.830

更改此行

```
NSString *greeting = [[NSString alloc] initWithFormat:nameString , @"Hello, %@!"]; 
```

至

```
NSString *greeting = [[NSString alloc] initWithFormat:@"%@, Hello!", nameString]; 
```

`initWithFormat``@"%@, Hello!"`, 当你写的时候使用占位符`"%@"`表示后面的字符串`nameString`将被它替换所以当`@"%@, Hello!"`我们真正的意思是`@"nameString, Hello!"`（你的例子中的nameString是World）

# scala - Scala中的子类型化函数参数

> ID：11040359
> 
> 赞同：1
> 
> 时间：2012-06-14T19:50:55.870
> 
> 标签：scala, polymorphism

我正在尝试定义一个抽象类，该类具有运算符来比较该类的两个实例。然而，在具体化类时，我希望这些方法只比较相同类型的实例。像这样的东西

```
abstract class ComparableSuper{
  def <(other: ComparableSuper): Boolean  
  def <=(other: ComparableSuper): Boolean  
  def >(other: ComparableSuper): Boolean
  def >=(other: ComparableSuper): Boolean
}

class Comparable (val a: Int) extends ComparableSuper {
   def <(other: Comparable): Boolean = this.a < other.a
   def >(other: Comparable): Boolean = this.a > other.a
   def <=(other: Comparable): Boolean = this.a <= other.a
   def >=(other: Comparable): Boolean = this.a >= other.a
} 
```

当然，这段代码不会编译，因为我没有覆盖抽象类中的方法。但是，如果我在方法中将 Comparable 更改为 ComparableSuper，我将无法保证字段 a 存在。

有没有办法可以在方法签名中指定类的类型？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:10:40.090

我强烈建议您查看[Ordering](http://www.scala-lang.org/api/current/scala/math/Ordering.html)类型类。

我发现，这个问题的类型类方法比做它的方法要好得多`Comaprable`（你想要比较的对象实际上是 extend `Comparable`）。

使用类型类方法，您还将为您提供更多的类型安全性和灵活性。您实际上可以`Ordering`为现有类（您无法控制和更改的类）定义实例。

* * *

`Ordering`使用起来可能有点笨拙，但`Ordered`有一些隐式可以让你编写如下代码：

```
import math.Ordered._

def isGreater[T : Ordering](a: T, b: T) = a > b 
```

因此，您甚至不会损害便利性。（顺便说一下，`Ordered`相当于Java的`Comparable`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T22:03:55.697

在这种情况下使用`math.Ordered`or`math.Ordering`是一个更好的主意，但如果您确实需要这种模式，您可以使用[*F* -bounded polymorphism](http://en.wikipedia.org/wiki/Bounded_quantification#F-bounded_quantification)：

```
trait Foo[A <: Foo[A]] {
  def f(that: A): Int
}

class Bar(val x: Int) extends Foo[Bar] {
  def f(that: Bar) = this.x - that.x
} 
```

参数化超类型涉及一些语法开销，但它允许您拥有需要相同子类实例的方法。

# android - 在Android中更新ormlite数据库表中的所有列

> ID：11040362
> 
> 赞同：5
> 
> 时间：2012-06-14T19:51:05.590
> 
> 标签：android, orm

我有以下数据库表对象：

```
public class Goal {
    @DatabaseField(generatedId = true)
    private int id;
    @DatabaseField
    private String goal_title;
    @DatabaseField
    private String goal_desc;
    @DatabaseField
    private String goal_why;
    ...
} 
```

我已经在这个表中添加了一些行，现在我想编写一个查询来更新这个表中一行的所有列。我看过 ORM 的文档，但不知道如何编写这个查询。请帮助我如何编写此查询。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T14:35:21.397

> 我已经向该表添加了一些行，现在我想编写一个查询来更新该表中一行的所有列。

我认为您需要RTFM。[我在ORMLite](http://ormlite.com/)文档上花了很长时间，我认为它[涵盖了`UpdateBuilder`](http://ormlite.com/docs/update-builder)相当不错的内容。随意提出更具体的问题，如果没有，我可以添加更多细节。

引用文档：

> DAO 还可用于构造自定义 UPDATE 和 DELETE 语句。更新语句用于更改表中与 WHERE 模式匹配的行中的某些字段 - 如果没有 where()，则更新所有行。Delete 语句用于从表中删除与 WHERE 模式匹配的行 - 如果没有 where()，则删除所有行。

要调整示例代码以使用您的`Goal`对象：

```
UpdateBuilder<Goal, Integer> updateBuilder = goalDao.updateBuilder();
// update the goal_title and goal_why fields
updateBuilder.updateColumnValue("goal_title", "some other title");
updateBuilder.updateColumnValue("goal_why", "some other why");
// but only update the rows where the description is some value
updateBuilder.where().eq("goal_desc", "unknown description");
// actually perform the update
updateBuilder.update(); 
```

希望这可以帮助。

# html - Firefox - 宽度：100% 不适用于列表中的列表（显示：表格；）

> ID：11040364
> 
> 赞同：3
> 
> 时间：2012-06-14T19:51:14.000
> 
> 标签：html, css, list, firefox, css-tables

我想使用格式化为表格的列表元素进行导航，因此所有元素的宽度都是相同的，但它不适用于 Firefox。

HTML：

```
<div id="#navigation">
   <ul>
      <li>
         <a>Menu1</a>
         <ul>
            <li><a>Sub1</a></li>
            <li><a>Sub2</a></li>
         </ul>
      </li>
      <li><a>Menu2</a></li>
   </ul>
</div> 
```

CSS（缺少一些属性，但只有颜色之类的东西......）：

```
#navigation {
   position: relative;
   height: 25px;
   width: 852px;
}

#navigation>ul {
   width: 850px;
   top: 0px;
   padding: 0;
   margin: 1px;
   list-style-type: none;
   display: table;
   table-layout: fixed;
   border-collapse: collapse;
}

#navigation>ul>li {
   position: relative;
   height: 25px;
   display: table-cell;
}

#navigation>ul>li>ul {
   position: absolute;
   width: 100%;
   margin: 0;
   padding: 0;
   list-style-type: none;
}

#navigation>ul>li>ul>li {
   /* nothing really happening here */
} 
```

JS 小提琴：http: [//jsfiddle.net/ZrsXv/2/](http://jsfiddle.net/ZrsXv/2/)

在 Chrome、Safari、IE8 和更高版本中一切正常，在 IE6 和 IE7 中也进行了一些修改

![铬菜单](../Images/8b9d890672d1c338350736058ee9caf2.png)

但是在 Firefox 中我总是会得到这个

![FF 菜单 1](../Images/3514e3a7ed2dd67dfabfb6aeb5dd3ff3.png)

我知道我不是第一个遇到问题的人，但我也尝试过在 stackoverflow 上找到的解决方案，但**如果有**什么变化，这就是我得到的一切

![FF 菜单 2](../Images/821d9ecc3a235339ec5e0d1d40309201.png)

那么有没有一个不会把一切都搞砸的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:08:11.157

我认为你的问题是那个位置：相对；不适用于表格单元格。我目前找不到来源，但我很确定我以前遇到过同样的问题。

所以在 Firefox 中发生的事情是 #navigation>ul>li>ul 的宽度被计算为 #navigation 的 100%，它是具有除静态（默认位置值）以外的位置值的最近祖先。

你可以通过插入一个带有 position: relative; 的虚拟元素来解决这个问题。(f.ex. a div) inside #navigation>ul>li 然后 #navigation>ul>li>ul 必须更改为 #navigation>ul>li>div>ul

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:58:57.040

最简单的解决方案是参考从嵌套列表构建的现有菜单示例。

[http://www.devarticles.com/c/a/HTML/Building-a-Drop-Down-Menu-with-Nested-HTML-Lists/2/](http://www.devarticles.com/c/a/HTML/Building-a-Drop-Down-Menu-with-Nested-HTML-Lists/2/)

我也不确定您为什么要使用`display: table`; 自从我上次自己制作多级菜单已经有一段时间了，但我从未使用过那种显示方法，而且我在简短搜索后找到的示例也没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T09:46:30.643

阅读其他答案和评论，我了解您使用的原因`display: table`，并且可以接受...

我尝试了不同的解决方案，但对 Firefox 没有任何作用，所以，如果您有兴趣使用这种方法，我可以建议使用 javascript / jQuery`li`为孩子们提供第一个元素宽度，`ul`就像我在您的**[jsfiddle中所做的那样](http://jsfiddle.net/ZrsXv/5/)**

否则我不能以不同的方式帮助你......对不起。

# ruby-on-rails - sass-rails 资产管道：生成图像路径不正确；`url(/images/blah.png)` 而不是 `url(/assets/blah.png)`

> ID：11040366
> 
> 赞同：18
> 
> 时间：2012-06-14T19:51:32.120
> 
> 标签：ruby-on-rails, sass, asset-pipeline, compass-sass

在[第 2.2.2 节“CSS 和 Sass”](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)中，我被告知要放入`image-url('delete.png')`我的 sass。所以我有。

但是，它正在生成 CSS

```
background-image: url(/images/delete.png) 
```

而不是我在任何地方都被告知它应该生成的东西，正确而明显的东西，

```
background-image: url(/assets/delete.png) 
```

什么。见鬼。

我花了几天的时间试图弄清楚这是从哪里来的。

以下是导致此行为[的相关设置的要点。](https://gist.github.com/2932450)这[是我们代码库早期版本中相同文件的要点](https://gist.github.com/2932478)（就在我们实施资产管道之后，它实际上工作了大约一周，然后才出现这种令人沮丧的行为）。你能发现差异吗？您能想到的任何其他文件可能会导致这种情况吗？

## 笔记

*   我们故意使用旧版本，`sass-rails`因为新版本`Stack level too deep!`在预编译时会导致错误。
*   我们正在使用指南针。

* * *

## 变通办法的两次骇人听闻的尝试

因为实际上对资产管道进行故障排除有点糟糕。

### 1：将图片放入/images

我试图将所有图像移动到`public/images`并将其添加为加载路径。这在开发中有效（图像可在`/assets`或中访问`/images`），但生产的预编译仅将指纹图像放入`/assets`（obvs），因此当 sass-rails 放入时`url(/imagse/delete-120398471029384102364.png)`，无法找到它。

### 2：使 /public/images 成为 /public/assets 的符号链接

这可能在生产中有效，但在开发中 /assets 文件夹不存在，因此`url(/images/delete.png)`指令会导致找不到图像。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T15:57:29.240

如果你还没有这个，命名你的 css 文件`*.css.scss`（而不是`.sass`- 如果你这样做，你可能需要调整一些语句的语法）。然后使用`image_path`helper 代替`image-path`，例如：

```
background-image:url(image_path('delete.png')); 
```

我希望这可以解决您的问题。如果没有，这种方法为您生成的资产路径是什么？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-24T01:12:56.487

这似乎是由于您的 sass-rails (3.1.0) 版本。我可以重现您的问题（感谢您发布 Gemfile），并且在遇到 sass-rails 3.1.4 时它会消失。

尝试升级到 3.1.4 并清除`tmp/cache`. 还要确保您没有访问任何浏览器缓存。

我知道你说 3.1.4 引起了其他问题……你试过更高版本吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T21:41:53.603

看起来确实像这个问题：[https](https://github.com/rails/sass-rails/issues/57) ://github.com/rails/sass-rails/issues/57 如果是这样，您应该尝试在 Compass 和 Sass-rails 之间找到良好的版本组合。

也许将所有东西（包括 Rails）升级到最新版本，这仍然是最好的方法（使用`bundle outdated`bundler 1.2 中的命令来了解要升级的 Gems）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T21:50:55.413

这是我们的 haml-rails、compass 和 sass-rails 的组合。不过，我们正在运行 rails 3.2.6。这对我们来说效果很好。

宝石'指南针'，git：'git：//github.com/chriseppstein/compass.git'，参考：'3a4c5c75dca9f07f6edf2f0898a4626269e0ed62'

宝石'haml-rails'，git：'git：//github.com/indirect/haml-rails.git'，参考：'92c41db61f20a9f122de25bc73e5045cfccdbcd5'

gem 'sass-rails', '~> 3.2.5'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T00:12:17.613

健全性检查您当前资产管道中的文件。检查它是否在此处列出的目录之一中：

```
<%= debug Rails.application.config.assets.paths %> 
```

接下来检查 compass 期望找到图像的相对路径（并查看它是否匹配。根据[Compass config docs](http://compass-style.org/help/tutorials/configuration-reference/)，其中一个应该告诉您：

```
<%= debug config.compass.http_images_path %>
<%= debug config.compass.http_generated_images_path %> 
```

我猜这是第一个。无论哪种方式，将它们的路径与图像的asset_path进行比较：

```
<%= debug asset_path 'delete.png' %> 
```

如果路径不匹配，您可能需要将环境配置（development.rb，...）中的路径调整为此，例如：

```
config.compass.http_images_path = '/assets. 
```

或者，您可以将图像移动到 http_images_path 或 http_generated_images_path 期望找到它的位置。

此时，asset_path/asset_url（比硬编码要脆弱得多）应该可以工作。我基于我在样式表中看到的[类似技术，](https://github.com/compass/compass-rails#upgrading-existing-rails-projects-using-compass-to-compassrails)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T14:25:53.927

不一定是一个解决方案，但肯定是一个可用的选项：如果您愿意使用指南针精灵，您将减少 http 请求的数量并能够使用精灵图手动指定您的图像路径，即 '$sprites : sprite-map("PATH/*.png");'

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-19T19:14:36.337

为了我，

转为工作。`image_path`_ 后来，我再次更改为，现在工作正常。`image-path``.scss``image_path`

删除缓存对我没有帮助。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-11-02T12:55:13.950

在我编辑了我的 .scss 文件（添加了一个空格）并重新加载页面后，我得到了正确的结果。删除空间后，它可以正常工作。

# algorithm - 将项目重新排列到一个没有相似项目的数组中

> ID：11040368
> 
> 赞同：4
> 
> 时间：2012-06-14T19:51:44.730
> 
> 标签：algorithm

可以说我有一组块。12个红色，8个蓝色，5个黄色，1个绿色。我需要创建一个算法，将这些对象输出到单个数组中，其中没有相邻的红色块，没有相邻的蓝色块等。输出应该如下所示：

红、蓝、红、蓝、红、蓝、黄、蓝、绿、红、黄等

到目前为止，在我的编程经验中，我不得不多次编写算法来执行此操作。我最后一次这样做是在大约 2 年前为一家初创公司工作。我在python中实现了这样一个算法，但是源代码不可用。我记得我至少花了 100 行来创作。

这个算法有名字吗？我不想再次实施它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T20:41:28.167

我不知道这个问题的名称。下面是我想出的解决它的算法。

您需要跟踪剩余的每个块的#。

```
repeat:
output 1 block of largest color set.
output 1 block from the second largest color set. 
```

输出：

> rbrbrbrbrgrbrgrbrgrbr grbgy

注意：在运行此算法之前，您需要检查最大颜色集的大小是否大于 1 + 其他颜色大小的总和。如果是，则没有解决方案。

注意：不需要从第二大集合中挑选。循环中的第二个选择可以来自任何非最大的颜色集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:06:51.887

就在我的脑海中 - 创建一个队列，其中包含您想要以递减数量插入的所有块（即使用上面的示例队列将包含 12 个红色然后 8 个蓝色然后 5 个黄色然后 1 个绿色）。将队列中的一个元素插入数组的每个偶数索引，然后插入每个奇数索引（即在索引 0、2、4、6、8、10、12、14、16、18、20、22 处插入一个红色块，然后在 24、1、3、5、7、9、11、13 处插入蓝色，然后在 15、17、19、21 处插入黄色，在 23 处插入绿色）

请注意，对于某些块组合，此任务是不可能的 - 在运行算法之前，您必须检查具有最高编号的块集的块数是否不超过所有块的总和除以 2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:12:55.303

1.  首先你需要检查这样的数组是否存在。

    例如，如果您有 4 个红色而只有 1 个蓝色，则它不存在

    因此，如果最大集合的数量小于所有其他集合的总和减 1，则没有有效的解决方案

2.  然后，您只需将您最大收藏的所有项目（例如红色）作为列表放在那里。

    在列表的每个项目之间，它是您可以插入其他元素的地方

    ```
    e.g. _ red _ red _ red _ red _ red _ red ... 
    ```

3.  现在，您可以将其他项目集合插入到这些位置。集合的顺序无关紧要。

    ```
    e.g. blue red blue red blue red blue red yellow red yellow red _ red _ red .. 
    ```

    您需要始终从左到右（或始终从右到左）消耗这些点。

    每当您用完点时，您就会从左侧（或右侧）重新开始将项目插入新点。

    ```
    e.g. green blue _ red _ blue _ red _ blue _ red _ blue _ red _ yellow _ red ... 
    ```

# html - 为什么列表项上的这种简单的负文本缩进适用于除 IE8 之外的所有浏览器？

> ID：11040369
> 
> 赞同：2
> 
> 时间：2012-06-14T19:51:44.673
> 
> 标签：html, css, internet-explorer

# CSS

我有一些简单的 CSS`text-indent`在`li`in上应用负值`ul`：

```
<style type="text/css">
    ul.indent li { text-indent: -20px; padding-left: 20px; }
</style>

<!--[if lte IE 8 ]>
<style type="text/css">
    ul.indent li { text-indent: -20px; padding-left: 0; margin-left: 20px; }
</style>
<![endif]--> 
```

由于 Internet Explorer 8 及更低版本处理列表项边距和填充的方式与现代浏览器不同，因此我使用 IE8 及以下版本的条件注释来应用不同的填充和边距值。（旁注：如果有人知道一个通​​用的、跨浏览器的 CSS 解决方案，可以在不使用条件注释的情况下获得一致的边距/填充，我会全力以赴。我需要支持 IE6 及更高版本、Chrome、Firefox、Safari 和 Opera。 )

# HTML

这是我的 HTML：

```
<ul>
    <li>Lorem ipsum...</li>
</ul>

<ul class="indent">
    <li>Lorem ipsum...</li>
</ul> 
```

第一个列表完全没有样式（作为实验的对照），第二个列表使用上面定义的 CSS 类 ( `class="indent"`)。

# 结果

**这就是问题所在：上面的 HTML/CSS在除 IE8 之外的所有浏览器中都会**产生一致的结果。这是我在浏览器中看到的：

![所有浏览器与 IE8](../Images/90ad4dd0b931d190cb614131cbca4a07.png)

我在 IE6、IE7、IE9、Chrome、Firefox、Safari 和 Opera 中看到了左侧的内容。

我看到 IE8 右侧的内容。请注意以红色突出显示的区域。一旦向 CSS 添加负文本缩进值，IE8 似乎会在列表项项目符号和列表项文本之间抛出一堆额外的像素。

如何防止 IE8 添加这些额外的像素？

您可以在此处查看实际代码：http: [//jsfiddle.net/Kxb8v/](http://jsfiddle.net/Kxb8v/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:07:47.640

UL 和 LI 元素是块级元素……这可能就是它在浏览器级别上不可预测的原因。如何将该文本包装在 ap 标记中，然后应用文本缩进，因为它不适用于块级元素。

```
<style type="text/css">
    .indent { text-indent: -20px; padding-left: 20px; }
</style>

<ul>
    <li><p class="indent">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce venenatis mi sit amet mauris varius ut viverra magna eleifend. Aliquam viverra, magna sed mollis adipiscing, libero mi adipiscing ante, ut hendrerit lacus leo id elit. Nulla commodo mi nec nulla ornare congue.</p></li>
</ul> 
```

**编辑**

因此，以防我的回答不清楚......列表项除了包含文本外，还用于许多事情。一些网站使用它们进行布局。列表项还具有填充和**列表样式**等属性，可让您控制用于每个列表项的图像。

因此，知道了这一点后，似乎可以通过几种方式来处理要求列表项进行**文本缩进的处理。**您可以缩进任何包含文本，或者缩进可能是指列表项本身，包括图像；）我敢打赌，这个决定由浏览器决定，因此版本之间的处理方式不同。

希望这有助于澄清我的去向。

# java - 如何在 Java 中缓冲没有任何缓冲区限制的 OutputStream？

> ID：11040370
> 
> 赞同：0
> 
> 时间：2012-06-14T19:51:53.673
> 
> 标签：java, buffer, outputstream

*这个案例有点复杂，希望我能简化一下。*

当我收到`PrintStream`我应该输出一些数据的地方时，我的任务就开始了。然而整个任务是计算+打印，当我完成计算时我可以打印。所以这可能是 2-pass 任务，但我希望是 1-pass。

为了实现这一点，我想创建一些输出缓冲区，进行计算和打印（到缓冲区），然后从缓冲区打印到真正的输出流。

到目前为止一切顺利，问题是我无法找到合适的缓冲类——`BufferedOutputStream`如果我理解正确，当缓冲区已满时开始从缓冲区写入。我必须对其进行更严格的控制——在我明确表示之前不要写入实际输出。

**问题**——是否有适合这项任务的课程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:55:56.940

您可以使用 ByteArrayOutputStream 作为缓冲区。此流写入的字节数组会自动放大以容纳您写入的所有内容。

完成生成输出后，只需调用该`writeTo`方法将缓冲区的内容写入输出流，该输出流会写入某个实际设备。

有关详细信息，请参阅[http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:56:03.727

从[flush方法的javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedOutputStream.html#flush%28%29)：

> 刷新此缓冲输出流。这会强制将任何缓冲的输出字节写出到底层输出流。

# android - 需要帮助将 listView 中的项目格式化为货币

> ID：11040371
> 
> 赞同：0
> 
> 时间：2012-06-14T19:51:56.433
> 
> 标签：android, listview, currency

我正在编写我的第一个重要的 android 应用程序，需要一些帮助，将货币格式应用于 listView 中的一些 textViews。我想将 CURRENT_VALUE 和 TOTAL_VALUE 字段格式化为货币。我已经阅读了一些关于 ViewBinde 的文章，我怀疑这是我需要使用的，但似乎无法理解它与我已经拥有的代码之间的关系。任何帮助，将不胜感激。

```
 private void fillData() {

    DBAdapter db = new DBAdapter(this);
        db.open();
    Cursor c = db.getAllInventory();
        startManagingCursor(c);

        String[] from = new String[] { db.DESCRIPTION ,db.QUANTITY,db.CURRENT_VALUE, db.TOTAL_VALUE};
        int[] to = new int[] { R.id.text1,R.id.text2,R.id.text3,R.id.text4 };

        SpecialCursorAdapter invItems =
            new SpecialCursorAdapter(this, R.layout.inv_item, c, from,to);
        setListAdapter(invItems);
    }

public class SpecialCursorAdapter extends SimpleCursorAdapter 

{
    private int[] colors = new int[] { 0xFFD0D1D2, 0xFFFFFFFF };

    public SpecialCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to)
    {
        super(context,layout, c, from, to);

    }
   @Override
    public View getView(int position, View convertView, ViewGroup parent) {
      View view = super.getView(position, convertView, parent);
      int colorPos = position % colors.length;
      view.setBackgroundColor(colors[colorPos]);
      return view;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:32:36.800

我在我的`getView`方法中使用 DecimalFormat 类来做到这一点，如下所示：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null)
        convertView = View.inflate(context, layout, null);
    View row = convertView;
    c.moveToPosition(position);

    TextView fourth = (TextView) convertView.findViewById(R.id.ListItem4);

    DecimalFormat df = new DecimalFormat("0.00");
    Double total = Double.valueOf(c.getString(3));

    fourth.setText("$" + df.format(total));
    fourth.setTextColor(MyApplication.shoplistitem_desc);

    return row;
} 
```

# javascript - 从里面关闭一个书签

> ID：11040374
> 
> 赞同：2
> 
> 时间：2012-06-14T19:52:09.927
> 
> 标签：javascript, bookmarklet

我正在创建一个执行类似于亚马逊的功能的书签，将任何内容添加到您的愿望清单书签 (http://www.amazon.com/wishlist/get-button)。我正在尝试制作一个取消按钮，但我似乎无法让它工作。

如何制作一个取消按钮，该按钮将显示*在*书签的 iframe 内，并关闭 iframe？

我试过使用：`window.close`从 iframe 内部来做，但这没有用。我也尝试过使用`parent.document.body.removeChild(parent.document.getElementById('iframe'))`，但我遇到了跨域权限问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T01:15:12.913

将 iframe 包装在一个 div 中。将取消按钮放在 div 内部，但在 iframe 外部，以便取消按钮实际上在父页面中。这避免了交叉原点问题。

有很多方法可以解决跨源问题，但这是迄今为止针对您的特定问题最简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:55:31.050

您将不得不使用[window.postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)来告诉父窗口中的函数关闭它。

# open-source - GPL 是否要求 RedHat 免费提供其操作系统，因此 CentOS 为何存在？

> ID：11040378
> 
> 赞同：2
> 
> 时间：2012-06-14T19:52:17.650
> 
> 标签：open-source, licensing, centos, gpl, redhat

我有一些与 GPL 相关的问题：

1.  **是**或**否**：如果您在商业上销售 GPL 软件，您必须免费提供源代码吗？

2.  **Yes** or **No** : 由于 RedHat 使用 GPL 软件使其成为商业销售的 RedHat Linux 操作系统，它必须按照 GPL 的要求免费发布 RedHat Linux OS。

3.  **是**或**否**：CentOS 的存在是为了满足 GPL 的要求，即提供其商业销售的 RedHat Linux 操作系统的免费版本？

* * *

更新：我已经改写了我原来的问题，以使其更清楚。

更新 2：请注意，没有人直接回答这些问题，即使有 4 个回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:57:31.377

GPL 不允许销售相关软件；它只是说 - 简化！- 当他们这样做时，他们必须包括来源或以其他方式使其可用。

如果可以出售，您可以以数百万美元的价格出售 GPL 代码；没关系。但是您需要交出资源或以其他方式使它们可用。

在这种情况下，源代码是根据 GPL 提供的，因此第三方使用它来创建一个发行版，然后免费发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:00:48.973

对不起。我现在下班回家了，所以我也会根据您更新的问题更新我的答案，使其更加清晰。

1.  **是的。**现在，我不是 GPL 或法律方面的专家，所以可能有一种我不知道的解决方法，但这通常是 GPL 的设计目的。Richard Stallman（自由软件基金会的创始人和 GPL 的设计者）基本上希望所有软件都“像言论一样自由”（无论它是否“像啤酒一样自由”），用户能够根据需要调整软件（编辑代码、修复、扩展等）。为此，GPL 旨在防止公司锁定他们的源代码，对用户隐藏它。

2.  **不**。事实上，RHEL（Red Hat Enterprise Linux）**不是**免费的。它可能是最成功的商业 Linux 发行版。

3.  **不**，CentOS 根本不是 Red Hat 的产品。相反，它是由一个专门的社区使用 RHEL 的源代码作为基础构建的，因为他们认为它非常好，应该可供更广泛的受众使用。它被称为不同的东西而不是“Red Hat Lite”或其他东西的全部原因正是因为它们**不**隶属于 Red Hat，而且 Red Hat 不允许他们使用他们的品牌。

HTH :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:00:06.537

即使 GPL 要求 RedHat 允许您使用代码，它也不禁止他们限制其他东西的使用。例如，一些游戏已通过 GPL 代码开源，但图形数据未开源。在这种情况下，问题在于品牌，这是可以理解的——只有 RedHat 应该能够销售 RedHat (TM) Linux。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T20:02:13.663

从[维基](http://en.wikipedia.org/wiki/CentOS)：

```
 Red Hat Enterprise Linux is available only through a paid subscription service
that provides access to software updates and varying levels of technical support.
The product is largely composed of software packages distributed under either an open
source or a free software license and the source code for these packages is made
public by Red Hat.
    CentOS developers use Red Hat's source code to create a final product very
similar to Red Hat Enterprise Linux. Red Hat's branding and logos are changed because
Red Hat does not allow them to be redistributed.[5]
    CentOS is available free of charge. Technical support is primarily provided by
the community via official mailing lists, web forums, and chat rooms. The project
is not affiliated with Red Hat thus receives no financial or logistical support
from the company; instead, the CentOS Project relies on donations from users and
organizational sponsors. 
```

# r - 从 mtable/outreg 类型表中省略一些系数

> ID：11040380
> 
> 赞同：4
> 
> 时间：2012-06-14T19:52:29.303
> 
> 标签：r, latex

我一直在运行一堆不同的回归模型，现在想将他们的估计值放入 LaTeX 表中。为了使不同的规格具有可比性，我想使用包装或产品中的那种表，即不同模型显示在列中，这些模型的参数估计显示在适当的行中`outreg`。这就是我所拥有的：`rockchalk``mtable``memisc`

```
df <- data.frame(x=rnorm(20),
                 z=rnorm(20),
                 group=gl(5,4,20,labels=paste('group',rep(1:5))))
df$y = 5 + 2*df$x + 5*df$z + rep(c(3.2,5,6.2,8.2,5),each=4) + rnorm(20)

model1 <- lm(y ~ x + z + factor(group),data=df)
model2 <- lm(y ~ x + factor(group),data=df)
model3 <- lm(y ~ x + z,data=df)

library(memisc)

reg.table <- mtable("Model 1"=model1,"Model 2"=model2,"Model 3"=model3,
                summary.stats=c("sigma","R-squared","F","p","N"))

toLatex(reg.table) 
```

这工作得很好，但我有一个大约有 200 个级别和相应大量系数的因子。我想做的是要么从表中省略与该因子相关的系数，要么（为了奖励积分！）以简单的“是”或“否”表明该因子在模型中使用。所以，我理想的输出是这样的：

```
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    %
%
% Calls:
% Model 1:  lm(formula = y ~ x + z + factor(group), data = df) 
% Model 2:  lm(formula = y ~ x + factor(group), data = df) 
% Model 3:  lm(formula = y ~ x + z, data = df) 
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    %
\begin{tabular}{lcD{.}{.}{7}cD{.}{.}{7}cD{.}{.}{7}}
\toprule
&&\multicolumn{1}{c}{Model 1} && \multicolumn{1}{c}{Model 2} && \multicolumn{1}{c}{Model 3}\\
\midrule
(Intercept)                    &  &  8.315^{***} &&    4.235     && 10.338^{***}\\
                               &  &  (0.537)     &&   (3.276)    &&  (0.468)    \\
x                              &  &  1.976^{***} &&    2.398     &&  1.858^{***}\\
                               &  &  (0.238)     &&   (1.530)    &&  (0.443)    \\
z                              &  &  5.389^{***} &&              &&  5.359^{***}\\
                               &  &  (0.226)     &&              &&  (0.463)    \\
group                          &  &   yes        &&    yes       &&     no      \\
\midrule
sigma                          &  &     0.929    &&     5.981    &&     2.092   \\
R-squared                      &  &     0.984    &&     0.265    &&     0.891   \\
F                              &  &   129.485    &&     1.009    &&    69.306   \\
p                              &  &     0.000    &&     0.448    &&     0.000   \\
N                              &  &    20        &&    20        &&    20       \\
\bottomrule
\end{tabular} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T20:49:14.097

只需选择前三个系数就非常简单：

```
reg.table$coefficients <- reg.table$coefficients[,,1:3,,drop=FALSE]
toLatex(reg.table) 
```

* * *

“奖金”问题（即添加描述“组”的手工构建的第 4 行）需要更多的工作：

```
## Select the first three coeffients + one to be modified
reg.table$coefficients <- reg.table$coefficients[,,1:4,,drop=FALSE]

## Make a copy of all the coefficients, and in the copy, modify the 4th
j <- reg.table$coefficients
j[,,4,] <- c("yes", "", "yes", "", "no", "")
dimnames(j)[[3]][4] <- "group"

## Put the modified coefficients back into `reg.table`
reg.table$coefficients <- j 
```

瞧瞧

```
toLatex(reg.table)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Calls:
% Model 1:  lm(formula = y ~ x + z + factor(group), data = df) 
% Model 2:  lm(formula = y ~ x + factor(group), data = df) 
% Model 3:  lm(formula = y ~ x + z, data = df) 
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tabular}{lcD{.}{.}{7}cD{.}{.}{7}cD{.}{.}{7}}
\toprule
&&\multicolumn{1}{c}{Model 1} && \multicolumn{1}{c}{Model 2} && \multicolumn{1}{c}{Model 3}\\
\midrule
(Intercept) &  &   8.830^{***} &&   9.846^{**}  && 10.342^{***} \\
            &  &   (0.626)     &&    (3.272)    &&   (0.442)    \\
x           &  &   2.047^{***} &&     1.765     &&  1.937^{***} \\
            &  &   (0.244)     &&    (1.276)    &&   (0.319)    \\
z           &  &   5.138^{***} &&               &&  4.847^{***} \\
            &  &   (0.267)     &&               &&   (0.372)    \\
group       &  &  yes          &&   yes         &&   no         \\
            &  &               &&               &&              \\
\midrule
sigma       &  &     1.204     &&     6.310     &&      1.812   \\
R-squared   &  &     0.975     &&     0.270     &&      0.927   \\
F           &  &    85.576     &&     1.033     &&    107.717   \\
p           &  &     0.000     &&     0.436     &&      0.000   \\
N           &  &    20         &&    20         &&     20       \\
\bottomrule
\end{tabular} 
```

* * *

**编辑：**

这是我更喜欢的版本。它解决了 OP 在下面的第一条评论，并使用`abind()`（如`rbind()`数组）将组信息添加到数组中，我发现它更干净：

```
library(abind)

j <- reg.table$coefficients

groupFac <- array(c("yes", "", "yes", "", "no", ""), dim=c(2,1,3))
nonGroupFacs <- which(!grepl("group", dimnames(j)[[3]]))
j <- j[,,nonGroupFacs,,drop=FALSE]
j <- abind(j, groupFac, along=3)
dimnames(j)[[3]][length(nonGroupFacs)+1] <- "group"

reg.table$coefficients <- j

toLatex(reg.table) 
```

# perl - 如何使用 chdir 遍历子目录并解析 XML 文件？

> ID：11040386
> 
> 赞同：0
> 
> 时间：2012-06-14T19:52:40.830
> 
> 标签：perl

我想编写一个遍历目录及其子目录的脚本，获取所有 XML 文件并解析它们。我遇到了麻烦`chdir`。这工作正常：

```
my $search = "/home/user/books";
chdir($search) or die "cant change dir to $search $!";
system("ls"); 
```

但我希望用户决定他想要搜索它的路径，所以我正在使用`Getopt::Long`：

```
use strict;
use warnings;
use Data::Dumper;
use XML::Simple;
use Getopt::Long;

my $outputFile = '';
my $searchPath = "";
my $debug      = 0;
GetOptions('outputFile=s' => \$outputFile, 'searchPath=s' => \$searchPath);
if ($outputFile eq '' or $searchPath = '') {
    die("parameter --outpulFile=s is required.");
}
$searchPath =~ s/\/*$/\//;
my @founddirs = `cd $searchPath`;
foreach my $foundfiles (@founddirs) {
    print $foundfiles;
    chdir($foundfiles) or die "cant change dir to $searchPath $!";
    chdir('..');
} 
```

运行命令：

```
perl sample.pl --outputFile=books.txt --searchPath=/home/user/june18 
```

我想从子目录中获取所有 recursive.xml 文件并解析它们。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:28:52.547

```
#!/usr/bin/perl --
use strict; use warnings;
use Data::Dump qw/ dd /;
use File::Find::Rule qw/ find /;
my @files = find(
    file =>
    name => '*.xml',
    in => \@ARGV
);

dd \@files;

__END__
$ perl ffrule
[]

$ perl ffrule ../soap
[
 "../soap/ex1.xml",
 "../soap/ex2.xml",
 "../soap/ex3.xml",
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:03:07.190

这里有几个问题：

*   `$searchPath = ''`在输入验证期间将搜索路径设置为空字符串。改用`eq`（不是`==`）
*   `@founddirs`将不包含任何内容，因为反引号运算符将不返回任何内容。这是因为

    ```
    my @founddirs = `cd $searchPath`; 
    ```

    不打印由换行符分隔的找到的目录。也许你在追求`ls $searchPath`

顺便说一句，为什么不`File::Find`改用呢？

```
use strict;
use warnings;

use File::Find;
use Getopt::Long;

my $outputFile;
my $searchPath;

GetOptions(
            'outputFile=s' => \$outputFile,
            'searchPath=s' => \$searchPath,
          );

die "Usage : perl sample.pl -outputFile -searchPath\n"
  unless $outputFile && $searchPath;

die "No such directory found: $searchPath\n" unless -d $searchPath;

find( sub { print "$File::Find::name\n" if /$outputFile/ }, $searchPath ); 
```

# java - 我应该如何本地化数据库中必须始终为英文的系统字符串？

> ID：11040393
> 
> 赞同：0
> 
> 时间：2012-06-14T19:53:18.167
> 
> 标签：java, localization

我们正在本地化我们的产品，我遇到了一个绊脚石。我们的服务器没有本地化，因此数据库（它轮询数据库）需要保持英文。我们的客户正在本地化。问题是，对于系统字符串（服务器期望始终为英文的字符串），我们如何/何时在更新数据库之前进行查找/转换？

例如，我们有一个字符串 READY。此字符串将以不同的语言显示在客户端中。如果用户选择此字符串，我们必须在更新数据库之前将其转换回 READY。确实有 2 次转换，当客户端读取 db 时它的英文为 READY，因此需要将其转换为当前语言环境，然后当用户选择该值时，它需要将其转换回英文 READY。实现这些转换的最佳方法是什么？

注意：我们使用常用的 java 属性文件进行本地化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:55:25.263

在控件上存储一个索引，该索引始终引用（或包含）未翻译的字符串，这样即使显示的文本已被l10n'ed，您也可以使用它。

# unix - 如何让 awk 忽略输入文件中的特殊字符？

> ID：11040394
> 
> 赞同：1
> 
> 时间：2012-06-14T19:53:20.527
> 
> 标签：unix, awk, special-characters

好的，这就是问题所在。我正在尝试创建一个 awk 程序，该程序将一些字符添加到文件的列中。很简单，但问题是文件包含 awk 解释为转义字符或特殊字符的字符，例如 \ ^ & 和 /...实际上记录字符）只是应该在那里并且不传达特殊信息。我不希望它以任何特殊方式解释任何文件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:28:00.320

从您的评论来看，您似乎是在告诉 awk 将文件当作程序来使用，而不是将其视为数据。尝试：

```
awk -F\| '{print $2}' NH3 
```

# javascript - 选择列表未填充（jQuery Ajax）

> ID：11040396
> 
> 赞同：2
> 
> 时间：2012-06-14T19:53:35.007
> 
> 标签：javascript, ajax, jquery

**更新：**通过禁用干扰 Ajax 成功响应的 CodeIgniter Profiler 来实现这一点。我认为它在 JSON 响应中添加了一个 div。

我正在尝试使用 mysql 数据库中的数据填充依赖选择框。问题是，尽管响应 Ajax 请求以正确的格式获取数据，但相关选择框并未得到填充。

请帮助我，因为我对这里发生的事情一无所知。下面是我的 JavaScript 代码。

```
<script type="text/javascript">

$(document).ready(function(){
    $('#country').change(function(){ 
        $("#cities > option").remove(); 

        var form_data = {
            country: $('#country').val(),
            csrf_token_name: $.cookie("csrf_cookie_name")
        };

        $.ajax({
            type: "POST",
            url: "http://localhost/outlets/get_cities", 
            data: form_data,
            dataType : "JSON",
            success: function(cities)
            {
               $.each(cities,function(id,name)
                {
                    var opt = $('<option />'); 
                    opt.val(id);
                    opt.text(name);
                    $('#cities').append(opt); 
                });
            }

        });

    });
});
</script> 
```

这是HTML。我正在使用 Codeigniter。

```
<form id="form">
<?php $cities['#'] = 'Please Select'; ?>
<label for="country">Country: </label><?php echo form_dropdown('country_id', $countries, '#', 'id="country"'); ?><br />
<label for="city">City: </label><?php echo form_dropdown('city_id', $cities, '#', 'id="cities"'); ?><br />
</form> 
```

这是控制器：

```
function get_cities(){
    $country = $this->input->post('country');
  $this->load->model('city');
  header('Content-Type: application/x-json; charset=utf-8');
  echo (json_encode($this->city->get_cities($country)));
} 
```

＆ 该模型：

```
function get_cities($country = NULL){
  $this->db->select('id, name');

  if($country != NULL){
      $this->db->where('countries_id', $country);
  }
  $query = $this->db->get('cities');

  $cities = array();

  if($query->result()){
      foreach ($query->result() as $city) {
          $cities[$city->id] = $city->name;
      }
  return $cities;
  }else{
      return FALSE;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:56:55.867

将您的 ajax 成功回调更改为：

```
 success: function (cities) {
        for (var id in cities) {
            var opt = $('<option />');
            opt.val(id);
            opt.text(cities[id]);
            $('#cities').append(opt);
        }
    } 
```

因为您的 ajax 结果不是数组而是 json 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:03:28.410

好的，我设法通过禁用 CodeIgniter Profiler 来完成这项工作。Codeigniter 分析器，否则是一个方便的工具，使用 Ajax 破坏任何页面上的 javascript。如果您离不开分析器，请使用[使 CodeIgniter 的 Profiler AJAX 兼容中提供的解决方案](http://dragffy.com/blog/posts/making-codeigniters-profiler-ajax-compatible)

# java - 如何在 Java 中计算和打印字符串数组中的重复字符串？

> ID：11040397
> 
> 赞同：4
> 
> 时间：2012-06-14T19:53:36.150
> 
> 标签：java

我手上有一个难题。经过多次试验和错误，我仍然无法弄清楚这个简单的任务。

我有一个数组

```
String [] array = {anps, anps, anps, bbo, ehllo}; 
```

我需要能够遍历数组并找到重复项并将它们打印在同一行上。没有重复的单词应该单独显示

输出需要是这样的

```
anps anps anps
bbo
ehllo 
```

我试过while，for循环，但逻辑似乎是不可能的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T20:11:24.387

`HashMap`好的，`HashSet`对于这个非常简单的迭代问题，错误答案或答案的数量令人担忧，因此这是一个正确的解决方案。

```
Arrays.sort(array);

for (int i = 0; i < array.length; ++i){
    if (i+1 == array.length) {
        System.out.println(array[i]);
    } else if (array[i].equals(array[i+1])) {
        System.out.print(array[i]+" ");
    } else {
        System.out.println(array[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T19:57:50.310

有多种方法可以实现这一目标。

1.  使用两个 for 循环，一个循环遍历数组并选择一个值，另一个内部循环通过数组（从当前索引）查找该值
2.  您可以有一个包含单词的地图，循环遍历数组，并使用与当前从数组中获取的值相对应的出现次数填写地图

第二种方式更好。代码类似于：

```
Map<String, Integer> occurences = new HashMap<String, Integer>();
for(int index=0; index < array.length; index++){
       int nOcc = 1;
       if(occurences.containsKey(array[index]){
         nOcc = occurences.get(array[index]) + 1;
       }
       occurences.remove(array[index]);
       occurences.put(array[index], nOcc);
} 
```

此时，地图应包含所有单词（键）及其对应的出现次数（值）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T20:02:18.143

先对数组排序，然后

```
for(int i = 0, i < array.length; i++){
    String temp = array[i];
    System.out.print(temp+" ");
    for(int j = i+1; j < array.length; j++){
        String temp2 = array[j];
        if(temp.compareTo(temp2) == 0){
            System.out.print(temp2+" ");
            i++;
        }
    }
    System.out.println();
} 
```

或类似的东西...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T19:56:47.507

如果先对数组进行排序，则只需检查当前索引是否等于下一个索引（请记住，您必须考虑`IndexOutOfBounds`），如果它们相等，则执行 a，`System.out.print()`如果不相等，则执行 a `System.Out.println()`。

```
String [] array = {"anps", "anps", "anps", "bbo", "ehllo"};
// If you already are assured that the strings in the array are sorted
// then the sort is not necessary. 
Arrays.sort(array);
for(int i = 0; i < array.length; i++){
    if((i+1)==array.length || !array[i].equals(array[(i+1)])){
        System.out.println(array[i]);
    } else {
        System.out.print(array[i]+" ");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T19:59:47.520

复杂性`n^2`，从第一个值开始到最后找到相同的值，如果你在一行中找到打印并转到新行，你也应该删除所有打印的值。

复杂性`nlogn + n`==或排序`nlogn`，然后转到末尾并 pring 序列值。还有更多解决方案，但我认为对您来说已经足够了。`merge``quick`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T20:03:58.143

朴素算法

*   创建地图
*   遍历所有数组
*   检查地图中是否已存在密钥
*   如果是，则更新值 +1
*   如果没有插入
*   根据需要打印地图

你应该能够做你正在寻找的！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-12T17:19:38.053

## 使用以下逻辑

```
import java.util.ArrayList;

public class RepeatStringPrint {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        try {
            String[] x = { "anps", "anps", "anps", "bbo", "ehllo" };
            String total[] = new String[50];
            String sTotal[] = null;
            for (int i = 0; i < x.length; i++) {
                total[i] = x[i];
            }
            for (int k = 0; k < total.length; k++) {
                int count = 0;
                if (total[k] != null) {
                    sTotal = new String[50];
                    for (int i = 0; i < total.length; i++) {
                        if (total[k] == total[i]) {
                            count++;
                            if (count <= 1) {
                                sTotal[i] = total[k];
                            }
                        }
                    }
                    if (sTotal[k] != null) {
                        for(int j=0; j<count; j++){
                            System.out.print(sTotal[k]+"\t");
                        }
                        System.out.print("\n");
                    }
                }

            }
        }
        catch (Exception e) {

        }
    }

} 
```

# arrays - Scala ListBuffer（或等效）随机播放

> ID：11040399
> 
> 赞同：30
> 
> 时间：2012-06-14T19:53:48.220
> 
> 标签：arrays, list, scala, shuffle

Scala 列表是否有简单的随机播放功能？

如果没有，最简单的实现方法是什么？

我在整个代码中都有很多这些事情要做，所以调用越简单越好

Ruby 中的一个例子

```
a = [ 1, 2, 3 ]           #=> [1, 2, 3]
a.shuffle                 #=> [2, 3, 1] returns new array shuffled 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-14T20:03:35.053

在 Scala 中，您可以使用[`scala.util.Random`](http://www.scala-lang.org/api/current/scala/util/Random%24.html)：

```
util.Random.shuffle((1 to 10).toSeq)
//Vector(9, 6, 8, 7, 10, 1, 2, 5, 3, 4)

util.Random.shuffle(List('A', 'B', 'C', 'D', 'E', 'F'))
//List(B, D, A, E, C, F) 
```

您的结果可能会有所不同...

# javascript - 在一个函数中返回变量以在另一个函数中使用

> ID：11040401
> 
> 赞同：0
> 
> 时间：2012-06-14T19:54:00.833
> 
> 标签：javascript

我正在尝试这样做，这样我就可以编写一个定义变量的函数，然后在另一个函数中调用该函数来给我变量。

这是我所做的：

```
function getLat(){
  navigator.geolocation.getCurrentPosition(function(lat){
    var latCoord = lat.coords.latitude;
    return latCoord;
  });
}
function getLong(){
  navigator.geolocation.getCurrentPosition(function(lon){
    var longCoord = lon.coords.latitude;
    return longCoord;
  });
}
function getImage(){
  var the_lat = getLat(),
      the_lon = getLong();
  console.log(the_lat + ' ' + the_lon);
}
getImage(); 
```

如您所见，我具有获取纬度和经度的`getLat()`功能。`getLong()`然后，`getImage()`我希望能够调用`getLat()`一个变量以将 latCoord 分配给该变量。我希望`return latCoord;`这样做，但我错了。

这是可能的，还是我应该以不同的方式去做？如果是这样，我可以看到一个我应该如何做的例子吗？

这是一个 jsbin [http://jsbin.com/ulelix/edit](http://jsbin.com/ulelix/edit)

如果我需要澄清任何事情，或者如果您需要我添加任何信息，请告诉我，我会酌情这样做。我已经四处搜索，但似乎无法得到我正在寻找的答案。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:58:07.850

该`navigator.geolocation.getCurrentPosition`方法是异步的。`undefined`在执行回调之前，您的函数已经返回。

您需要将依赖于该方法响应的任何代码移动到回调中。

我建议将您的两个函数合二为一，因为回调中的纬度和经度都可用：

```
function getLatLng(){
    navigator.geolocation.getCurrentPosition(function(pos) {
        var lat = pos.coords.latitude,
            lng = post.coords.longitude;

        //Do stuff relying on lat/lng here...
    });
} 
```

# ruby-on-rails-3 - 为 Tomcat 打包 Jruby on Rails 的基础知识

> ID：11040402
> 
> 赞同：0
> 
> 时间：2012-06-14T19:54:08.523
> 
> 标签：ruby-on-rails-3, jruby

我有一个示例 Rails 应用程序，在正常运行时运行良好。但是，我似乎无法将它打包为将部署到 Tomcat 7 中的战争。Warbler 似乎没有生成 web.xml 文件。打包将在 Tomcat 中运行的简单战争文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T16:25:36.067

这本书用 Jruby 部署 Rails 对此进行了很好的总结。

基本情况是：

`warble config`

（生成`warble.rb`文件）

然后调整该文件以满足您的需要：

`warble executable war`或者只是简单`warble`的可能会起作用。

`warble -T`列出了 warble 可以做的所有任务。

在 warble.rb 文件中，您可以添加在创建战争时显示在 web.xml 文件中的选项。

例如这一行：

`config.webxml.jruby.max.runtimes = 4`

将配置选项放在 webxml 中。

# html - 文本在 Chrome 中可读；Firefox 中的微观

> ID：11040411
> 
> 赞同：1
> 
> 时间：2012-06-14T19:55:07.057
> 
> 标签：html, css, firefox, google-chrome, font-size

我在 Chrome/Safari 中很小但可读的页面上有一些文本（这就是我的意图），但由于某种原因在 Firefox 中变得微观。任何人都可以提出修复建议，以便文本在 Firefox 和 IE 中可读吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <title>WTF LBJ?!</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>

<style type="text/css">

#credit {font-family: "helvetica"; font-size: 20%; color: black; text-align:center; }

</style>

<body>

    <div id="credit"; >
        Created by <a href="http://www.twitter.com/varunsshetty">Varun Shetty</a> and <a href="http://www.twitter.com/bcfromblo">Bobby Corp</a>. Inspired by LBJ and <a href="http://www.whatthefuckhasobamadonesofar.com">WTF Obama</a>. Bobby loves Lebron; Varun loves the idea of Lebron.<br>
        Sorry for the swear word, but LBJ gets people fired up.
    </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:02:16.227

`20%`等于`0.2em`, 或字体大小的 1/5。我的猜测是 Chrome / Safari 配置了最小字体大小以保持可读性。尝试将其调整`font-size`为更高的值，例如`0.4em`看看它在 Chrome / Safari 中是否真的变大了。如果没有，您刚刚达到浏览器定义的最小值，“真实”字体大小实际上更小。

↪[示例](http://jsfiddle.net/Q2YsH/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:58:27.110

尝试将字体大小设置为特定数字而不是 %，例如 8pt 或 10px

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T20:20:17.747

我想知道是否是因为您在特定字体上使用的百分比较低。默认情况下，大多数浏览器显示相对于 16px 的字体。因此，当您定义 时`#credit {font-size: 20%;}`，您是在告诉浏览器，*“我想要 16 像素的 20%，或者大约 3.2 像素的大小。”* 这是一个可能的解决方案...

当我开始构建网站时，我总是首先在我的`body`标签上设置默认字体大小。我已经阅读了网络上的几个地方（包括 Chris Coyier 的流行 CSS-tricks 博客），如果你设置`body {font-size: 62.5%;}`，这实际上将有助于在不同的浏览器之间使字体大小相似。

如果您的目标是屏幕设备（似乎有些人已经建议），以像素为单位设置字体大小是可以的，尽管我开始成为*ems*的粉丝，因为它们看起来非常强大。 *Ems*是好的，因为它们总是相对于父级（在这个例子中，你的`body`文本）。如果您根据您的字体大小（即 62.5%（翻译 = ~16px））在*ems*`body`中的其他页面元素上设置字体大小，那么您就是黄金。您为您的用户提供了最大的灵活性，并且您还支持 IE 浏览器在不降低字体质量的情况下放大和缩小...对于可能需要放大一点以阅读某些内容或缩小一点的用户总是有帮助的查看整个页面。

通过使用*ems*的这种方法并设置默认`body`字体大小，*ems*中的所有内容几乎都可以进行字面转换。因此，例如，如果您希望某些文本大小为 10px，只需将 font-size 设置为 1.0em。如果您想要 22px 的字体大小，请将您的字体大小设置为 2.2em...12px = 1.2em、72px = 7.2em 等。

简而言之，尝试设置您的`body {font-size: 62.5%;}`然后设置`#credit {font-size: 0.8em;}`. 这应该在 8px 的浏览器窗口之间为您提供类似的字体大小。如果您想要更小或更大的东西，请相应地调整。

更简单的答案是像其他人建议的那样只使用像素，但就像我说的那样，创建您的网站时要考虑到您的用户。:)

希望有帮助！

# php - 我的代码没有将数据插入数据库

> ID：11040415
> 
> 赞同：0
> 
> 时间：2012-06-14T19:55:17.727
> 
> 标签：php, mysql, mysqli

我有一个旧的 mysql 代码，它成功地将值插入到数据库中。但是由于人们现在说 mysqli 更好用（不能使用 PDO，因为我的 php 版本低于 5.3），我试图更改我的代码，以便它使用 mysqli 而不是 mysql。

问题是它现在没有在进行此更改后将值插入数据库。我是 mysqli 新手，所以如果有人可以帮助我更改下面的代码以便可以使用 mysqli 将数据插入数据库，我将不胜感激。我究竟做错了什么？错误报告中没有错误。

以下是我目前对此的尝试：

```
 $username="xxx";
    $password="xxx";
    $database="mobile_app";

      $mysqli = new mysqli("localhost", $username, $password, $database);

      /* check connection */
      if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        die();
      }

    $sql = "SELECT TeacherId FROM Teacher WHERE (TeacherUsername = ?)";

    $stmt=$mysqli->prepare($sql);
    $stmt->bind_param("s",$_SESSION['teacherusername']);
    $stmt->execute();
    $record = $stmt->fetch();
    $teacherid = $record['TeacherId'];

    if($_SERVER['REQUEST_METHOD'] == 'POST')

    {

    $time = str_replace(array(' Hrs ', ' Mins ', ' Secs'), array(':', ':', ''), $_SESSION['durationChosen']);

    $insertsql = "INSERT INTO Session (SessionId, SessionTime, SessionDate, SessionWeight, SessionDuration, TotalMarks, ModuleId, TeacherId, Room) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)";
    $insert = $mysqli->prepare($insertsql);

for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; ++$i) {
    $sessid = $_SESSION['id'] . ($n == 1 ? '' : $i);
    $sessdate = date("Y-m-d", strtotime($_SESSION['dateChosen']));

    $insert->bind_param("sssssssss", $sessid, $_SESSION['timeChosen'], $sessdate,
                     $_SESSION['textWeight'], $time, $_SESSION['textMarks'],
                     $_SESSION['module'], $teacherid, $_SESSION['rooms']);

    $insert->execute();
}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:57:39.157

看起来你错过了这一行的结尾引号：

```
$insertsql = "INSERT INTO Session (
    SessionId, SessionTime, SessionDate, SessionWeight,
    SessionDuration, TotalMarks, ModuleId, TeacherId, Room) 
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?); 
```

做了

```
$insertsql = "INSERT INTO Session (
    SessionId, SessionTime, SessionDate, SessionWeight,
    SessionDuration, TotalMarks, ModuleId, TeacherId, Room) 
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)"; 
```

看起来您还需要在绑定参数之前放置 for 循环，因为您在绑定中使用了所述 for 循环的结果。

# ruby - Thor：当我定义了一个参数时，如何让我的 Thor 任务显示帮助？

> ID：11040420
> 
> 赞同：2
> 
> 时间：2012-06-14T19:55:33.953
> 
> 标签：ruby, thor

我正在将一个小项目转换为使用 Thor，并且心不在焉的我想使用内置帮助记录可用的任务。但是，如果我使用参数定义任务，任务级帮助将恢复为类的帮助 - 这意味着不会显示任务描述或预期参数的详细信息。

我希望能够拥有一个可以使用参数而不是参数调用的方法，因此可以像这样使用它

```
$ thor broke:foo hello
in a.thor broke:foo arg1=hello 
```

我已将问题归结为以下 thorfile，除了损坏的帮助输出之外，它可以按我的意愿工作。我已经去掉了任何其他参数，因为它们对问题没有影响。第一个任务 ok:foo 将正常显示帮助，第二个任务 broken:foo 帮助不大：

```
class Ok < Thor
    desc "foo", "ok test2"
    def foo
        puts "in a.thor ok:foo\n"
    end
end
class Broke < Thor
    argument :arg1, :type=>:string, :desc => "arg1"
    desc "foo", "broke test1"
    def foo
        puts "in a.thor broke:foo arg1=#{self.arg1}\n"
    end
end 
```

请求 ok:foo 任务方法的帮助给出：

```
$ thor help ok:foo
    Usage:
      thor ok:foo

    ok test 
```

为 break:foo 任务请求帮助的帮助不大：

```
$ thor help broke:foo
    Tasks:
      thor broke:foo ARG1          # broke test1
      thor broke:help ARG1 [TASK]  # Describe available tasks or one specific task 
```

如何定义参数并显示正确的任务帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:49:48.227

你的thorfile中有一个小错误。

您有**参数**而不是**method_option**。

这里正确的版本：

```
class Ok < Thor
    desc "foo", "ok test2"
    def foo
        puts "in a.thor ok:foo\n"
    end
end
class Broke < Thor
    method_option :arg1, :type=>:string, :desc => "arg1"
    desc "foo", "broke test1"
    def foo
        puts "in a.thor broke:foo arg1=#{self.arg1}\n"
    end
end 
```

[关于**github.com**上 method_option 的 Wiki](https://github.com/wycats/thor/wiki/Method-Options)

# mysql - 数据库查询以查找共享 IP 地址的用户

> ID：11040423
> 
> 赞同：0
> 
> 时间：2012-06-14T19:55:50.090
> 
> 标签：mysql

使用 MySQL，我有一个简单的表来记录用户登录的 IP 地址：

```
TableIPLog
------------
ColumnID (primary key)
ColumnUserID (the ID of the user)
ColumnIP (the IP address the user used to login) 
```

我想要一个查询，它会找到共享 IP 地址的用户！

澄清一下，我希望查询仅显示 IP 地址已被超过 1 个成员使用的行。

我难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:58:41.657

你可以走这条路，这是针对 SQL-Server 的，但我确信有一个 mysql 等价物：

```
select ColumnIP, count(*)
from TableIPLog
group by ColumnIP
having count(*) > 1 
```

然后您可以使用这些 ip 来查找与它们关联的用户名...

编辑：考虑到这一点，它可能无法正常工作，具体取决于您对日志的实现，但它不会花太多时间来让它工作......也许使用exists子句......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T02:14:36.423

```
SELECT a.id,a.userid,a.ip 
FROM ip_log a inner join ip_log b 
ON a.userid<>b.userid and a.ip=b.ip; 
```

这将列出所有具有相同 IP 但不同用户 ID 的用户 ID 和 IP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:03:56.287

我建议您像这样存储 IP（请查看[此链接](http://daipratt.co.uk/mysql-store-ip-address/)）：

```
mysql> SELECT INET_ATON('192.168.0.10') AS ipn;
+------------+
| ipn        |
+------------+
| 3232235530 |
+------------+

mysql> SELECT INET_NTOA(3232235530) AS ipa;
+--------------+
| ipa          |
+--------------+
| 192.168.0.10 |
+--------------+ 
```

并进行搜索应该是这样的：

```
select INET_NTOA(columnIp), count(*) from tableIPLOG group by columnIp having count(*)>1 
```

# drupal-7 - drupal 7中标签自动比较中的Ajax错误

> ID：11040426
> 
> 赞同：1
> 
> 时间：2012-06-14T19:56:00.473
> 
> 标签：drupal-7

我正在使用 drupal 7 建立一个网站

我有分类标签，但是当用户点击标签时，它会提醒这个错误

```
An AJAX HTTP error occurred.
HTTP Result Code: 200
Debugging information follows.
Path: http://www.mydomain.com/taxonomy/autocomplete/field_tags
StatusText: OK
ResponseText: 
```

我试图禁用所有外部 Ajax 功能，但没有成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:03:45.617

我遇到了这个问题，它与我安装的节点访问模块有关。

默认情况下，如果安装了节点访问模块但没有为特定节点创建一个或多个授权，则如果节点已发布，Drupal 将创建一个默认授权，授予对“所有”领域（所有用户）的查看访问权限。我使用的节点访问模块授予用户查看和编辑特定节点的访问权限，但对于默认（全部）以外的领域。由于此授权是为节点创建的，Drupal 跳过了创建默认授权，这是自动完成小部件用来确定用户是否有权查看和引用当前节点的授权。

因此，为了确保用户可以通过自动完成小部件引用实体，Drupal 默认授予授予对“所有”领域的查看访问权限，必须存在于正在编辑的节点。

# c++ - C ++ boost线程：使用并发队列根据互斥体/条件让工作线程暂停和取消暂停

> ID：11040429
> 
> 赞同：1
> 
> 时间：2012-06-14T19:56:05.153
> 
> 标签：c++, multithreading, boost, mutex

我对多线程编程相当陌生，所以请原谅我可能不精确的问题。这是我的问题：

我有一个函数处理数据并生成许多相同类型的对象。这是在几个嵌套循环中迭代完成的，因此只进行所有迭代，将这些对象保存在某个容器中，然后在该容器上处理接口代码以执行后续步骤是可行的。但是，我必须创建数百万个这样的对象，这会破坏内存使用。这些限制主要是由于我无法控制的外部因素。

只生成一定数量的数据是理想的，但打破循环并稍后在同一点重新启动也是不切实际的。我的想法是在一个单独的线程中进行处理，该线程将在 n 次迭代后暂停，并在所有 n 对象完全处理后恢复，然后恢复，进行 n 次下一次迭代，依此类推，直到所有迭代完成。等待线程完成所有 n 次迭代是很重要的，这样两个线程就不会真正并行运行。

这就是我的问题开始的地方：如何在这里正确地进行互斥锁？我的方法产生 boost::lock_errors。这是一些代码来显示我想要做什么：

```
boost::recursive_mutex bla;
boost::condition_variable_any v1;
boost::condition_variable_any v2;
boost::recursive_mutex::scoped_lock lock(bla);
int got_processed = 0;
const int n = 10;

void ProcessNIterations() {
  got_processed = 0;
  // have some mutex or whatever unlocked here so that the worker thread can 
  // start or resume. 
  // my idea: have some sort of mutex lock that unlocks here and a condition
  // variable v1 that is notified while the thread is waiting for that.
  lock.unlock();
  v1.notify_one();

  // while the thread is working to do the iterations this function should wait
  // because there is no use to proceed until the n iterations are done
  // my idea: have another condition v2 variable that we wait for here and lock
  // afterwards so the thread is blocked/paused
  while (got_processed < n) {
    v2.wait(lock);
  }
}

void WorkerThread() {
  int counter = 0;
  // wait for something to start
  // my idea: acquire a mutex lock here that was locked elsewhere before and 
  // wait for ProcessNIterations() to unlock it so this can start
  boost::recursive_mutex::scoped_lock internal_lock(bla);

  for (;;) {
    for (;;) {
      // here do the iterations
      counter++;
      std::cout << "iteration #" << counter << std::endl;
      got_processed++;

      if (counter >= n) {
        // we've done n iterations; pause here
        // my idea: unlock the mutex, notify v2
        internal_lock.unlock();
        v2.notify_one();

        while (got_processed > 0) {
          // when ProcessNIterations() is called again, resume here
          // my idea: wait for v1 reacquiring the mutex again
          v1.wait(internal_lock);
        }
        counter = 0;
      }
    }
  }
}

int main(int argc, char *argv[]) {
  boost::thread mythread(WorkerThread);

  ProcessNIterations();
  ProcessNIterations();

  while (true) {}
} 
```

上面的代码在执行 10 次迭代后失败，`v2.wait(lock);`并显示以下消息：

```
terminate called after throwing an instance of 'boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::lock_error> >'
  what():  boost::lock_error 
```

我该如何正确地做到这一点？如果这是要走的路，我该如何避免 lock_errors？

**编辑：**我使用[这里](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)讨论的并发队列解决了它。这个队列也有一个最大大小，之后 a`push`将简单地等待，直到至少一个元素被`pop`编辑。因此，生产者工作者可以简单地继续填充这个队列，其余代码可以`pop`根据需要进入。不需要在队列外进行互斥锁。队列在这里：

```
template<typename Data>
class concurrent_queue
{
private:
  std::queue<Data> the_queue;
  mutable boost::mutex the_mutex;
  boost::condition_variable the_condition_variable;
  boost::condition_variable the_condition_variable_popped;
  int max_size_;
public:
  concurrent_queue(int max_size=-1) : max_size_(max_size) {}

  void push(const Data& data) {
    boost::mutex::scoped_lock lock(the_mutex);

    while (max_size_ > 0 && the_queue.size() >= max_size_) {
      the_condition_variable_popped.wait(lock);
    }

    the_queue.push(data);
    lock.unlock();
    the_condition_variable.notify_one();
  }

  bool empty() const {
    boost::mutex::scoped_lock lock(the_mutex);
    return the_queue.empty();
  }

  bool wait_and_pop(Data& popped_value) {
    boost::mutex::scoped_lock lock(the_mutex);
    bool locked = true;
    if (the_queue.empty()) {
      locked = the_condition_variable.timed_wait(lock, boost::posix_time::seconds(1));
    }

    if (locked && !the_queue.empty()) {
      popped_value=the_queue.front();
      the_queue.pop();
      the_condition_variable_popped.notify_one();
      return true;
    } else {
      return false;
    }
  }

  int size() {
    boost::mutex::scoped_lock lock(the_mutex);
    return the_queue.size();
  }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:02:10.827

这可以使用条件变量来实现。一旦你执行了 N 次迭代，就在条件变量上调用 wait()，当对象在另一个线程中处理时，在条件变量上调用 signal() 以解除阻塞在条件变量上的另一个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:06:24.843

您可能需要某种有限容量的队列列表或堆栈以及条件变量。当队列已满时，生产者线程等待条件变量，并且任何时候消费者线程从队列中删除一个元素，它都会向条件变量发出信号。这将允许生产者醒来并再次填充队列。如果您真的想一次处理 N 个元素，那么只有当队列中有 N 个元素的容量时才让工作人员发出信号，而不是每次他们从队列中拉出一个项目时发出信号。

# excel - 如何在弹出提示中显示多个变量？

> ID：11040432
> 
> 赞同：0
> 
> 时间：2012-06-14T19:56:27.843
> 
> 标签：excel, vba, userform

我有一个 VBA 代码，我在其中计算许多变量的值（为简单起见，我们将它们命名为 A、B、C）。

我需要弹出一个比具有多个 vbLines 的 MsgBox 更专业和参与的提示。例如，有一个框架包含三个框，每个框显示一个变量的值，并在其中有一个标题。

MsgBox 对于这项任务似乎太有限了。我尝试了一个用户窗体，但用户窗体可用的控件都是组合框、列表框等。我可以在用户窗体中插入简单的“显示框”吗？

此外，我最终需要在弹出提示中有一个附加框，用户在其中输入一些值，单击“确定”，然后重新计算变量 A、B、C 的值并在显示中更新。

我需要什么工具？消息框？对话框？用户表单？等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:15:24.553

用户表单是要走的路。您可以在标签或文本框中显示变量。您可以使用 Frame 控件对它们进行分组。如果用户输入的值来自有限集合，我会使用组合框，将 MatchRequired 设置为 true 并对其 Click 事件进行计算。如果他们可以输入任何内容，那么我会为此使用文本框。

# php - WordPress 中的多步 AJAX 表单

> ID：11040435
> 
> 赞同：0
> 
> 时间：2012-06-14T19:56:35.070
> 
> 标签：php, forms, wordpress, jquery

我正在构建一个多问题 AJAX 表单，其中第一个问题出现，第二个问题被隐藏并取决于第一个问题的答案。

我的 jQuery 监听点击并存储变量，然后隐藏原始 HTML 并显示第二个 div。这与第一个答案无关。

我如何a）根据第一个变量的值在显示/隐藏 jQuery 上提供 IF 响应，并且 b）如果我在 50 个 div 中有 50 个问题，则不依赖隐藏特定的 div id 并显示特定的 div id ！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:04:12.587

看看这个：[http ://wpquestions.com/question/show/id/1484](http://wpquestions.com/question/show/id/1484)

具体来说，他指向**cformsII**插件 ( [http://www.deliciousdays.com/cforms-plugin/](http://www.deliciousdays.com/cforms-plugin/) )

# iphone - 当 ios 中已授予 facebook 权限时弹跳

> ID：11040437
> 
> 赞同：2
> 
> 时间：2012-06-14T19:56:40.893
> 
> 标签：iphone, objective-c, ios, facebook, ios5

我有一个与 facebook 集成的 ios 应用程序（用于登录和在墙上发帖），所以问题是当经常性用户（使用 facebook 登录 - 已授予权限）执行注销并再次尝试登录时，得到：

```
“已经自动化了”
" 你已经对这个应用程序进行了自动化。
按确定继续“

```

我想避免按下“确定”按钮和 facebook 反弹到我的应用程序（如 instagram、配乐等）。所以我需要在我的 facebook 应用程序中配置一些东西？

我在我的应用程序中添加了此代码，但仍然无法正常工作：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [[[FacebookManager sharedFb] facebook] handleOpenURL:url];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:40:59.527

好的，我想出了如何做到这一点：

第一：将此添加到您的应用中

```
// Pre iOS 4.2 support
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [facebook handleOpenURL:url]; 
}

// For iOS 4.2+ support
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
    sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [facebook handleOpenURL:url]; 
} 
```

第二：填写 facebook 应用表格 ( [http://developers.facebook.com/apps/](http://developers.facebook.com/apps/) ) ![Facebook 应用程序表单](../Images/d441783d166444e369b3a73290ebd976.png)

# python - 类变量在python中的所有实例之间共享？

> ID：11040438
> 
> 赞同：30
> 
> 时间：2012-06-14T19:56:41.733
> 
> 标签：python, class, global-variables, instance-variables, member

一周前我开始使用 python 编码，这是我的错误，我很快就开始使用 oops、类和对象进行编码。我认为我的 C++ 熟练程度会有所帮助....我被以下代码所吸引

```
class A:
     var=0
     list=[]
     def __init__(self):
            pass 
```

令我惊讶的是， var 和 list 有点像全局变量，它似乎在所有实例中共享......我认为它在所有实例中都不同......我花了半天时间才弄清楚那.... 一个变量只能由一个类对象访问，但在所有实例之间共享.. 只是好奇，这背后有什么原因吗？ ??

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-14T20:01:20.923

`var`只要您通过`instance.var`或访问它，绝对不应该共享它`self.var`。但是，对于列表，您的语句所做的是在评估类时，创建一个列表实例并将其绑定到类字典，因此所有实例都将具有相同的列表。每当你设置`instance.list = somethingelse`resp。`self.list = somethingelse`，它应该得到一个实例级别的值。

示例时间：

```
>>> class A():
...     var = 0
...     list = []
...
>>> a = A()
>>> b = A()
>>> a.var
0
>>> a.list
[]
>>> b.var
0
>>> b.list
[]
>>> a.var = 1
>>> b.var
0
>>> a.list.append('hello')
>>> b.list
['hello']
>>> b.list = ['newlist']
>>> a.list
['hello']
>>> b.list
['newlist'] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-14T19:59:32.073

这些基本上就像 Java 中的静态变量：

```
// Example equivalent Java
class A {
    static int var = 0;
    static String[] list;
} 
```

这是预期的行为：类变量*用于类*。

对于普通的实例变量，在构造函数中声明它们：

```
class A:
    def __init__(self):
        self.var = 0
        self.list = [] 
```

您可能想查看[Python 中的静态类变量](https://stackoverflow.com/questions/68645/static-class-variables-in-python)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-14T20:03:54.317

原因是在 Python`class`中是一个可执行语句，可以像其他任何语句一样执行。类定义的主体在定义类时执行一次。如果你在那里有一行行`var = []`，那么它只会执行一次，因此只能创建一个列表作为该行的结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T20:00:37.767

请注意，您看不到 的这种行为`var`，您只会看到它`list`：

```
>>> class A:
...     var = 0
...     list = []
... 
>>> a1 = A()
>>> a2 = A()
>>> a1.var = 3
>>> a2.var
0 
```

# javascript - 获取 URL 参数作为 Javascript 变量

> ID：11040439
> 
> 赞同：-1
> 
> 时间：2012-06-14T19:56:43.810
> 
> 标签：javascript, variables, parameters

> **可能重复：**
> [如何使用 JQuery 获取 GET 和 POST 变量？](https://stackoverflow.com/questions/439463/how-to-get-get-and-post-variables-with-jquery)
> [在 JavaScript 中获取查询字符串值](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

假设我的网站有网址[http://www.akbrowser.tk/ds/?q=http://www.chess.com&r=http://www.blackle.com](http://www.akbrowser.tk/ds/?q=http://www.chess.com&r=http://www.blackle.com)

（这两个参数是网址）

我现在想在网站上获取两个 javascript 变量，以及两个 url 的值。（所以第一个变量是 chess.com，第二个是 blackle.com [当然它会有 http 和所有，但我只能发布一个超链接]）

我该怎么做？

我在这个网站上看到了一些其他类似的问题，发帖者给出了一个我不明白的长解决方案（我认为这与找到一个 '=' 并在它之后取走所有东西有关）但在这种情况下它会给“http: [//www.chess.com&r= http://www.blackle.com](http://www.blackle.com) [没有空格]”作为变量之一。

我还看到了另一个像我一样有多个参数的帖子，但是发帖人给出了一个很长的解决方案，所以由于我不明白，我无法真正让它做我想做的事情。

那么有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:31:52.507

试试这个功能：

```
function getQueryParam(href, paramName) {
    var query = href.substring(href.indexOf('?')+1);
    var params = query.split('&');
    for(var i = 0; i < params.length; i++) {
        var param = params[i].split('=');
        if(param.length > 1) {
            if(param[0] == paramName) {
                return param[1];
            }
        }
    }
    return null;
}

console.log(getQueryParam('http://www.akbrowser.tk/ds/?q=http://www.chess.com&r=http://www.blackle.com', 'r')); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T19:59:44.693

```
function gup(name) {
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(window.location.href);
    if (results == null)
        return "";
    else
        return results[1];
}

 var qString = gup("q");
 var rString = gup("r"); 
```

这样做是做一个正则表达式来找到你传递给函数的任何 [name]。

# android - Android EditText isSelectAll() 方法？

> ID：11040442
> 
> 赞同：0
> 
> 时间：2012-06-14T19:56:53.450
> 
> 标签：android, android-edittext

EditText 的 selectAll() 有助于选择小部件的所有文本。现在，我的问题是：“是否可以检查是否已选择 EditText 的所有文本？”。在技​​术方面，我想在 EditText 上实现 isSelectAll() 方法。这怎么可能？

提前感谢您的宝贵答案和建议。

~ PCCoder

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:09:31.217

像这样的东西怎么样：

```
boolean isSelectAll() {
    return ((editText.getSelectionStart() == 0) && (editText.getSelectionEnd() == editText.getText().length()));
} 
```

# java - 编织 Eclipse 3.7 插件项目中包含的 AspectJ 方面

> ID：11040450
> 
> 赞同：5
> 
> 时间：2012-06-14T19:57:26.773
> 
> 标签：java, eclipse-plugin, aspectj, eclipse-pde

## 目标

我正在构建一个针对 3.7 环境的 Eclipse 插件，并希望在插件中包含一个方面，该方面为插件中的代码提供建议。

## 设置

考虑到 3.4 和 3.7 之间的明显差异，我一直在努力遵循这些准则的精神：http: [//www.eclipse.org/equinox/incubator/aspects/equinox-aspects-quick-start。 php](http://www.eclipse.org/equinox/incubator/aspects/equinox-aspects-quick-start.php)

这是我到目前为止所拥有的：

1.  一个带有方面和一些源代码的插件项目。
2.  插件项目已转换为 AspectJ 项目，这会触发 Eclipse 自动添加`org.aspectj.runtime (1.6.12)`到插件的依赖项中。
3.  `org.aspectj.runtime`我检查了插件配置中依赖项的“重新导出此依赖项” 。
4.  我在 META-INF 目录中的*aop.xml*中定义了方面。
5.  我的 MANIFEST.MF`Export-Package`在方面所在的包上有一个条目。
6.  我的运行配置包括以下插件和启动级别：
    *   `org.eclipse.equinox.weaving.aspectj`（1级开始）
    *   `org.eclipse.equinox.weaving.hook`（默认的起始级别为 4）
    *   `org.aspectj.runtime`（1级开始）
    *   `org.aspectj.weaver`（1级开始）

## 当前结果

我看到控制台中的行看起来像这样，但似乎这个处理发生在第一次加载每个类时。

`[com.my.traceeditor] info processing reweavable type com.my.util.ByteUtil: com\my\util\ByteUtil.java`

没有建议被应用。是不是织工织的不够早？该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:25:22.503

当您编写一个仅在同一个包中应用的方面时，您不需要Equinox 编织。这仅适用于交叉束编织。只要确保您的包使用编译时编织，您就可以删除对编织插件的依赖。

# java - AspectJ 可以将字段调用替换为 getter/setter 吗？

> ID：11040452
> 
> 赞同：1
> 
> 时间：2012-06-14T19:57:28.177
> 
> 标签：java, aspectj, javassist

例如，我有一个带有公共字段和相应 getter/setter 的类：

```
public class User {
    public String name;
    public String getName() { return name; }
    public void setName(String name) { this.name = name;}
} 
```

现在调用该字段`name`：

```
User user = new User();
user.name = "test";
System.out.println(user.name); 
```

是否可以使用aspectj来增强类让字节码为：

```
User user = new User();
user.setName("test");
System.out.println(user.getName()); 
```

我知道[javassist](http://www.javassist.org)可以做到这一点，但是 AspectJ 可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:03:59.593

查看[切入点文档](http://www.eclipse.org/aspectj/doc/released/progguide/semantics-pointcuts.html)和`get(FieldPattern)`切入点`set(FieldPattern)`。

在同一个文档中有一些[额外的文章](http://www.eclipse.org/aspectj/doc/released/progguide/semantics-pointcuts.html#d0e5248)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T06:05:13.877

```
User user = new User();
user.setName("Bob");  //<- This line matched the pointcut below
user.name = "Alex";  //<- This line too matched the pointcut below
System.out.println("User name is " + user.name); 
```

对于上面 User 类的 main 方法中的代码，我写了下面的 Aspect

```
public aspect UserAspect {
public pointcut propSet() : set(* User.*);

   void around() : propSet(){
    System.out.println(thisJoinPoint.getSignature() + " is being set");
    proceed();
   }
} 
```

输出是..

```
String test.User.name is being set
String test.User.name is being set
User name is Bob 
```

所以，我的理解是 AspectJ 以相同的方式对待成员变量赋值和 setter。因此，您可能无法使用 Javassist 进行操作

# model-view-controller - 在 node.js 中适当地分离关注点？

> ID：11040456
> 
> 赞同：0
> 
> 时间：2012-06-14T19:57:40.267
> 
> 标签：model-view-controller, node.js, mongodb, mongoose, separation-of-concerns

我是一个完全 node.js 的菜鸟，并试图找出通过适当分离关注点来构建我的应用程序的最佳方法。

我正在通过 mongoose 使用 mongodb，并已成功使用 node.js 模块将我的控制器分离出来，然后尝试分离出我的模型。我所做的似乎有效，但是当我检查数据库时，什么都没有保存。另外，我在保存功能中尝试了一个`console.log()`，但没有记录任何内容。

从我的 server.js 我有：

```
app.post(api.urlslug + '/messages', messagesapi.insert); 
```

然后我有一个/controllers/api/messages.js：

```
var m = require('../../models/message');

exports.index = function(req, res, next){
    res.send('all the messages...');
}

exports.insert = function(req, res, next){
    var message;
    message = new m.Message({
        messagebody: req.body.messagebody
    });
    message.save(function(err) {
        console.log('here we are in the save');
        if(!err) {
            return console.log('message created');
        } else {
            return console.log(err);
        }
    });
    return res.send(message);
} 
```

我的 /models/message.js 看起来像这样：

```
// required modules
var mongoose = require('mongoose')
    , db = require('../models/db');

// setup database connection
mongoose.connect(db.connectionstring());

var Message = exports.Message = mongoose.model('Message', new mongoose.Schema({
    messagebody: String
})); 
```

当我发布到 API 时，我得到了一个正确的 JSON，它甚至有 _id 字段，在我看来是 mongodb 提供的唯一 ID。有了这个，如果它似乎正在创建对象并与 mongodb 正确通信，我无法理解为什么它实际上并没有进入 mongodb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:06:48.527

听起来好像没有建立联系。尝试监听默认猫鼬连接的打开/错误事件以找出原因。

```
function log (msg) { console.log('connection: ', msg) }
mongoose.connection.on('open', log);
mongoose.connection.on('error', log); 
```

# html - 当一个容器需要是一个可点击的链接时

> ID：11040457
> 
> 赞同：1
> 
> 时间：2012-06-14T19:57:40.533
> 
> 标签：html, hyperlink, anchor

我不太确定处理这种情况的最佳方法。这是一个假设的情况：

```
<a href="/my-page/">
    <div style="width: 150px; height: 150px; background-image: url('images/myimage.jpg') 0 0 no-repeat; position: relative;">
        <div style="line-height: 50px; position: absolute; bottom: 0; left: 0;">
            <span>My Clickable Box</span>
        </div>
    </div>
</a> 
```

所以在这种情况下，我有一个容器，另一个容器位于底部用于实际文本......但我需要整个框都是可点击的。

众所周知，当您将锚标记指定为特定的高度或宽度时，它的效果并不好……因此您几乎依赖于内部内容来执行此操作。

我不知道，我对这个有点茫然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:03:27.673

如果您将其显示更改为`block`或`inline-block`您可以调整其大小，则无需使用我敢肯定在其中无效的 div。

```
<a style="display:inline-block;width: 150px; height: 150px; background-image: url('images/myimage.jpg') 0 0 no-repeat; position: relative;" href="/my-page/">
    <span>My Clickable Box</span>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:00:51.360

您可以将需要可点击的 div 放置在锚标签内，并在 div 上设置大小。然后整个 div 将是可点击的，因为它位于链接内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:05:47.007

您可以像设置 div 一样设置锚点的样式，然后整个区域都是可点击的。例如

```
<a href="/my-page/" style="width: 150px; height: 150px; background-image: url('images/myimage.jpg') 0 0 no-repeat; position: relative; line-height: 50px; position: absolute; bottom: 0; left: 0;">My Clickable Box 
```

# node.js - 启动 Node.js 服务器时获取“listen EINVAL”，为什么？

> ID：11040460
> 
> 赞同：1
> 
> 时间：2012-06-14T19:58:00.420
> 
> 标签：node.js

升级到 Node 0.6.18 后，出现错误：启动时监听 EINVAL。

似乎不是它找不到我正在运行的文件。

例如我运行节点 myserver.js

然后它说 myserver.js throw EINVAL 这似乎是一个文件未找到错误。

但是，我不确定。那是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:13:06.597

从`listen(3p)`手册页：

> ```
>  EINVAL The socket is already connected. 
> ```

确保某些东西尚未在该端口上侦听。

# python - 正则表达式提取匹配单词周围的一组单词

> ID：11040461
> 
> 赞同：-1
> 
> 时间：2012-06-14T19:58:02.620
> 
> 标签：python, regex, django

我一直在寻找一种在找到的匹配项周围抓取单词的方法，但对于我的情况来说它们太复杂了。我只需要一个正则表达式来抓取，比如说 10 个，匹配单词之前和之后的单词。有人能帮我建立一个模式来做到这一点吗？

例如，让我们看这个句子（没有意义）：

```
 sentence = "The hairy yellow, stinkin' dog, sat round' the c4mpfir3 and ate the brown/yellow smore's that the kids(*adults) were makin." 
```

假设我们要匹配 smore's 之前和之后的 3 个单词（已经清理以匹配）。输出将是：

```
 "ate the brown/yellow smore's that the were" 
```

现在让我们以想要在 stinkin' 前后各取一个词为例：

```
 "yellow, stinkin' dog" 
```

另一个例子。“坐”：

```
 "yellow, stinkin' dog, round' the and 
```

现在让我们造一个新的句子：

```
 sentence = "If the problem is still there after 30 minutes. Give up" 
```

如果我试图匹配那里的单词，并在输出之前和之后取 2 个单词将是：

```
 "is still there after minutes" 
```

我知道它不是 10，但我想你明白这个例子吗？如果没有，请告诉我，我会提供更多。当我做这个时，我意识到我想要的比我最初想象的要多得多。我对正则表达式相当陌生，但我要试一试这个模式。

```
 ('[a-zA-Z\'.,/]{3}(word_to_match)[a-zA-Z\'.,/]{3}') 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:03:01.973

这是“单词”的一个可能定义：一串非空格字符。这是另一个：一串字母和数字，但没有标点符号。Python 对两者都有方便的快捷方式。

`\w`是具有第二种含义（字母和数字）的任何“单词”字符，并且`\W`是任何*其他*字符。像这样使用它：

```
m = re.search(r'((\w+\W+){0,4}grab(\W+\w+){0,4})', sentence)
print m.groups()[0] 
```

如果您更喜欢第一个定义，只需使用`\S`(任何不是空格的字符) 和`\s`(任何空格字符)：

```
re.search(r'((\S+\s+){0,4}grab(\s+\S+){0,4})', sentence) 
```

你会注意到我在前后匹配了零到四个单词。这样，如果您的单词在句子中排在第三位，您仍然会得到匹配。（搜索是“贪婪的”，所以如果可能的话，你总是会得到四个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:54:16.317

这个正则表达式会让你开始

```
((?:\w*\s*){2})\s*word3\s*((?:\s*\w*){2}) 
```

第 1 组将包含目标之前的单词，第 2 组将包含目标之后的单词

在示例中，我选择捕获 2 个单词，但您可以随意调整。

让我知道它是如何进行的，以及它是否适用于您的输入。

你可以通过阅读这个简短的建议来改进你的问题[http://worksol.be/regex.html](http://worksol.be/regex.html)

![在此处输入图像描述](../Images/c89aba070de7320aa8bc576a5a3cad4e.png)

# linq - 我可以使用这种方法从我的数据库中获取值但不生成额外的文本吗？

> ID：11040468
> 
> 赞同：2
> 
> 时间：2012-06-14T19:58:32.157
> 
> 标签：linq, entity-framework

我对编程很陌生，我似乎找不到解决方法。也许还有更好的方法。

我试图从我的数据库中的单行中获取 2 个值。我已经使用 EF 连接到它。

我的代码是：

```
using (var myEntities = new dataEntities())
{
  var myValues = (from values in myEntities.PointValues
                  where values.PointID == dataValue && values.DataTime >= fromDate && values.DataTime <= toDate
                  select new
                  { values.DataTime,
                    values.DataValue
                  }).ToList(); 
```

然后我使用以下代码将它们写入文件：

```
using (StreamWriter sw = new StreamWriter(@"c:\Test.csv"))
        {
          for (var i = 0; i < myValues.Count; i++)
          {
            sw.WriteLine(myValues[i]);
          }
        } 
```

问题是生成的 CSV 文件是这样的： { DataTime = 1/20/2010 2:15:00 AM, DataValue = 11.72 }

如何摆脱 { DataTime =, DataValue 和 close }？（DataTime 和 DataValue 是数据库中的字段标签）。

非常感谢您的帮助。

亲切的问候，

朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:02:37.847

你只需要改变你写出信息的方式：

```
using (var sw = new StreamWriter(@"c:\Test.csv"))
{
    foreach(var value in myValues)
    {
        sw.WriteLine(string.Format("{0}, {1}", value.DataTime, value.DataValue));
    }
} 
```

现在，您正在直接写出匿名类，而不是根据需要创建格式化的输出。

或者，您可以直接在查询中构建字符串并使用以下命令轻松编写结果：

```
 var myValues = (from values in myEntities.PointValues
              where values.PointID == dataValue && values.DataTime >= fromDate && values.DataTime <= toDate
              select new 
              { values.DataTime, 
                values.DataValue 
              })
             .AsEnumerable()
             .Select(v => string.Format("{0}, {1}", v.DataTime, v.DataValue));
 File.WriteAllLines(@"c:\Test.csv", myValues); 
```

这只会构建一个`IEnumerable<string>`而不是构建匿名类。

如果您没有将查询结果用于写入文件以外的任何内容，我会使用这种方法。如果您在其间的其他代码中使用匿名类，则第一个将使您无需更改该代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:04:30.017

最后添加另一个选择。

```
var myValues = (from values in myEntities.PointValues 
               where values.PointID == dataValue 
                     && values.DataTime >= fromDate 
                     && values.DataTime <= toDate 
               select new 
               { values.DataTime, 
                 values.DataValue 
               })
               .ToList()
               .Select(x => string.Format("{0}, {1}", x.DateTime, x.DataValue); 
```

此外，如果您不需要 StreamWriter 的花里胡哨，您还可以使用[File.WriteAllLines()](http://msdn.microsoft.com/en-us/library/dd383693.aspx)：

```
File.WriteAllLines(@"c:\Test.csv", myValues); 
```

（*根据 Reed 的帖子更新*）

# xml - 如何选择不同级别的多个节点？

> ID：11040469
> 
> 赞同：20
> 
> 时间：2012-06-14T19:58:32.623
> 
> 标签：xml, xpath, xml-parsing

拥有这个（简化的）XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml>
<Document>
        <Placemark>
            <name>Poly 1</name>
            <Polygon>
                        <coordinates>
                            -58.40844625779582,-34.60295278618136,0
                        </coordinates>
            </Polygon>
        </Placemark>
        <Placemark>
            <name>Poly 2</name>
            <Polygon>
                        <coordinates>
                            -58.40414334150432,-34.59992445476809,0
                        </coordinates>
            </Polygon>
        </Placemark>
</Document>
</kml> 
```

如何选择每个地标的名称和坐标？现在我可以使用以下 XPath 表达式选择他们的名字：

```
//Document//Placemark//name 
```

如何在没有任何其他数据的情况下同时选择两者？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-14T20:09:54.583

您可以在 XPath 表达式中使用联合。只需使用运算符：`|`

```
//Document/Placemark/name | //Document/Placemark/Polygon/coordinates 
```

如果不需要，请不要使用`//`（*后代轴）。*使用`//`，这也可以工作：`//name | //coordinates`。指定确切的路径在性能方面会更好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T01:37:46.303

**使用**：

```
/*/*/Placemark/name | /*/*/Placemark/*/coordinates 
```

这指定了两个单独的 XPath 表达式的结果的*联合*`|`——使用标准的 XPath 联合运算符。选择的是作为 XML 文档顶部元素的孙元素的`name`子元素的所有子元素，*以及*`Placemark`作为 XML 文档顶部元素的孙元素的孙元素的所有子元素。*`coordinates``Placemark`*

 *选择的元素按文档顺序出现（尽管没有规范的 W3C 文档指定顺序），这意味着在评估结果中（通常是 XmlNodeList 类型），任何`name`元素都直接跟在其对应的`coordinates`元素之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T06:15:58.823

已解决：//地标/*[self::name or descendant::coordinates]*

# javascript - 如何使用包含属性名称的变量检查对象属性是否存在？

> ID：11040472
> 
> 赞同：774
> 
> 时间：2012-06-14T19:58:45.113
> 
> 标签：javascript, object

我正在检查一个对象属性是否存在，其中一个变量包含有问题的属性名称。

```
var myObj;
myObj.prop = "exists";
var myProp = "p"+"r"+"o"+"p";

if(myObj.myProp){
    alert("yes, i have that property");
}; 
```

这是`undefined`因为它正在寻找`myObj.myProp`但我希望它检查`myObj.prop`

* * *

## 回答 #1

> 赞同：1469
> 
> 时间：2012-06-14T20:01:03.240

```
var myProp = 'prop';
if(myObj.hasOwnProperty(myProp)){
    alert("yes, i have that property");
} 
```

或者

```
var myProp = 'prop';
if(myProp in myObj){
    alert("yes, i have that property");
} 
```

或者

```
if('prop' in myObj){
    alert("yes, i have that property");
} 
```

请注意，`hasOwnProperty`它不会检查继承的属性，而`in`会检查。例如`'constructor' in myObj`是真的，但`myObj.hasOwnProperty('constructor')`不是。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2015-05-10T07:22:07.810

您可以使用**hasOwnProperty**，但根据您在使用此方法时需要**引号的参考：**

```
if (myObj.hasOwnProperty('myProp')) {
    // do something
} 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)

另一种方法是使用**in**运算符，但您也需要在此处使用**引号**：

```
if ('myProp' in myObj) {
    // do something
} 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-06-15T15:15:56.800

感谢大家的帮助和推动摆脱 eval 声明。变量需要放在括号中，而不是点符号。这有效并且是干净，正确的代码。

其中每一个都是变量：appChoice、underI、underObstr。

```
if(typeof tData.tonicdata[appChoice][underI][underObstr] !== "undefined"){
    //enter code here
} 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2017-10-15T12:57:34.460

对于自己的财产：

```
var loan = { amount: 150 };
if(Object.prototype.hasOwnProperty.call(loan, "amount")) 
{ 
   //will execute
} 
```

注意：使用**Object.prototype.hasOwnProperty**比 loan.hasOwnProperty(..) 更好，以防在原型链中定义了自定义 hasOwnProperty（这里不是这种情况），比如

```
var foo = {
      hasOwnProperty: function() {
        return false;
      },
      bar: 'Here be dragons'
    }; 
```

// [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)

要在查找结果中包含继承的属性，请使用**in**运算符：（但您必须在 'in' 的右侧放置一个对象，原始值会引发错误，例如 **'home' 中的 'length'**会引发错误，但**'length'在 new String('home')**中不会）

```
const yoshi = { skulk: true };
const hattori = { sneak: true };
const kuma = { creep: true };
if ("skulk" in yoshi) 
    console.log("Yoshi can skulk");

if (!("sneak" in yoshi)) 
    console.log("Yoshi cannot sneak");

if (!("creep" in yoshi)) 
    console.log("Yoshi cannot creep");

Object.setPrototypeOf(yoshi, hattori);

if ("sneak" in yoshi)
    console.log("Yoshi can now sneak");
if (!("creep" in hattori))
    console.log("Hattori cannot creep");

Object.setPrototypeOf(hattori, kuma);

if ("creep" in hattori)
    console.log("Hattori can now creep");
if ("creep" in yoshi)
    console.log("Yoshi can also creep"); 
```

// [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in)

注意：人们可能会想使用 typeof 和 [ ] 属性访问器作为以下代码，这**并不总是有效**...

```
var loan = { amount: 150 };

loan.installment = undefined;

if("installment" in loan) // correct
{
    // will execute
}

if(typeof loan["installment"] !== "undefined") // incorrect
{
    // will not execute
} 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-07-25T12:36:57.800

检查对象上是否存在属性的更安全的方法是使用空对象或对象原型来调用`hasOwnProperty()`

```
var foo = {
  hasOwnProperty: function() {
    return false;
  },
  bar: 'Here be dragons'
};

foo.hasOwnProperty('bar'); // always returns false

// Use another Object's hasOwnProperty and call it with 'this' set to foo
({}).hasOwnProperty.call(foo, 'bar'); // true

// It's also possible to use the hasOwnProperty property from the Object
// prototype for this purpose
Object.prototype.hasOwnProperty.call(foo, 'bar'); // true 
```

来自[MDN Web 文档的参考 - Object.prototype.hasOwnProperty()](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-11-07T15:38:09.343

您可以使用`hasOwnProperty()`以及`in`运算符。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-11-04T22:42:19.697

检查对象属性是否存在的几种方法。

```
const dog = { name: "Spot" }

if (dog.name) console.log("Yay 1"); // Prints.
if (dog.sex) console.log("Yay 2"); // Doesn't print. 

if ("name" in dog) console.log("Yay 3"); // Prints.
if ("sex" in dog) console.log("Yay 4"); // Doesn't print.

if (dog.hasOwnProperty("name")) console.log("Yay 5"); // Prints.
if (dog.hasOwnProperty("sex")) console.log("Yay 6"); // Doesn't print, but prints undefined. 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-06-30T23:12:01.527

有更简单的解决方案，我看不到您的实际问题的任何答案：

> “它正在寻找 myObj.myProp 但我希望它检查 myObj.prop”

1.  要从变量中获取属性值，请使用[括号表示法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_Accessors#bracket_notation)。
2.  要测试该属性的真实值，请使用[可选链接](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining)
3.  要返回布尔值，请使用[double-not / bang-bang / (!!)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_NOT#double_not_!!)
4.  如果您确定您有一个对象并且只想检查属性是否存在（即使 prop 值未定义） ，请使用该[`in`运算符。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in)`true`或者可能与[无效合并运算符结合使用？](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator)以避免抛出错误。

```
var myBadObj = undefined;
var myGoodObj = {prop:"exists"}
var myProp = "prop";

//1 use brackets. 
myGoodObj.myProp && console.log("wrong"); //dot is incorrect here
//(myBadObj[myProp]) //this would throw because undefined
myGoodObj[myProp] && console.log("1 - yes, i have that property");

// 2 use optional chaining.  tolerates undefined myBadObj
myBadObj?.[myProp] && console.log("2 - myBadObj has that");
myGoodObj?.[myProp] && console.log("2 - myGoodObj has that");

//3 get a boolean from the truthy value
console.log(3, !!myBadObj?.[myProp]);
console.log(3, !!myGoodObj?.[myProp]); 

//4 use in operator
//console.log(4, myProp in myBadObj); // would throw
console.log(4, myProp in {prop:undefined});
console.log(4, myProp in myGoodObj);
console.log(4, myProp in (myBadObj ?? {}));

//5 probably don't use hasOwnProperty()
myProp = "hasOwnProperty";
// doesn't catch inherited properties (ex: hasOwnProperty is itself inherited)
console.log(5, myGoodObj.hasOwnProperty(myProp)); // false :(
// intolerant of undefined obj
console.log(5, myBadObj.hasOwnProperty(myProp)); // throws because undefined :(
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-28T10:23:20.847

使用该`Object.hasOwn`方法也是一种替代方法，其目的是替换该`Object.hasOwnProperty`方法。

如果指定的对象将指定的属性作为其自己的属性，则此静态方法返回 true；如果该属性是继承的或该对象上不存在该属性，则返回 false。

请注意，在生产中使用它之前，您必须仔细检查浏览器兼容性表，因为它仍然被认为是一种实验性技术，并且还没有被所有浏览器完全支持（很快就会支持）

```
 var myObj = {};
    myObj.myProp = "exists";

    if (Object.hasOwn(myObj, 'myProp')){
        alert("yes, i have that property");
    }
```

更多关于`Object.hasOwn`- [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn)

`Object.hasOwn`浏览器兼容性 - [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn#browser_compatibility](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn#browser_compatibility)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-05-04T16:25:12.937

在答案中我没有看到`!!`操作员

```
if (!!myObj.myProp) //Do something 
```

# windows - 批处理文件字符串字符拆分

> ID：11040473
> 
> 赞同：0
> 
> 时间：2012-06-14T19:58:47.830
> 
> 标签：windows, string, character-encoding, batch-file

我想编写一个批处理文件来将文件名中的字符存储到变量中。

例如，如果我的文件名是`helloworld`or `how_are_you?`，我想将第四个字符从右边存储到变量`x`中（在上述情况下是`o`and `_`）。
在我的情况下，文件名没有空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:07:49.250

假设文件名存储在一个名为 的变量中`filename`，您可以这样做：

```
set "rstr=%filename:~-4%"
set "x=%rstr:~0,1%" 
```

PS
如果您需要`filename`作为命令行参数传递（例如，第一个），请在评估`rstr`and之前使用它`x`：

```
set "filename=%1" 
```

# c++ - 文件路径搜索

> ID：11040474
> 
> 赞同：-1
> 
> 时间：2012-06-14T19:58:51.347
> 
> 标签：c++, winapi, directory, c++builder

我需要在 c:\ 或用户指定的任何目录中找到文件“Test.TXT”的所有出现。我需要在 embarcadero c++ 中执行此操作。

最终结果是我需要所有文件的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:14:12.083

您可以使用[`System.SysUtils.FindFirst`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.FindFirst)和[`System.SysUtils.FindNext`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.FindNext)搜索文件的任何出现。

# wordpress - wordpress 删除任何添加到编辑器中的 html

> ID：11040478
> 
> 赞同：1
> 
> 时间：2012-06-14T19:58:57.493
> 
> 标签：wordpress

我正在使用 WordPress 3.4。仅使用 wordpress 默认安装附带的插件。

我的问题是我无法从编辑器向我的帖子添加任何链接或 html。

似乎 wordpress 正在过滤所有代码，我只能添加文本。

我还尝试通过 html 选项卡嵌入代码，但代码再次被删除。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:43:29.817

在 HTML 文本区域中添加 HTML 代码应该没问题，但如果它不是用有效的 HTML 编写的，它会删除一些代码。您可以粘贴您一直在尝试添加的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:47:49.253

我希望我认为您的意思是在可视化编辑器和 HTML 编辑器之间切换是正确的。几周前我也遇到了这个问题，经过一个多小时的研究，似乎这就是编辑器的工作方式。

在 Google 上搜索“html stripped wordpress editor”会得到这个结果，可以追溯到 2008 年。

我的研究导致我安装了**Preserved HTML Editor Markup**和**TinyMCE Advanced**，以确保在保存草稿或切换编辑器模式时不会剥离 html/代码。

安装插件后，您必须对 TinyMCE Advanced 进行一项设置更改。在管理区域中，导航到“设置 > TinyMCE 高级”。在高级设置下，[检查此设置。](http://i46.tinypic.com/6gzam1.png)

在编辑器之间切换或保存草稿时，您的 HTML 代码不应再被剥离。如果这不是你所指的，对不起！

插件： [http](http://wordpress.org/extend/plugins/preserved-html-editor-markup) ://wordpress.org/extend/plugins/preserved-html-editor-markup http://wordpress.org/extend/plugins/tinymce-advanced

（我会使用超链接，但我需要 10 个声望才能在帖子中使用两个以上的超链接。）

# c# - 无法将对象的 Javascript 数组传递给 MVC3 控制器，与 WCF 服务一起使用，有什么想法吗？

> ID：11040484
> 
> 赞同：1
> 
> 时间：2012-06-14T19:59:30.797
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3

我在将 javascript 数组传递给 MVC3 控制器时遇到问题，不确定我做错了什么，但这段代码确实适用于标准 WCF 服务。

```
$(function () {
    $("button").click(function () {
        Poster();
    });
});

function Poster() {
    var data = [];
    data.push(new WidgetProperty("test1", "value1"));

    alert(data.length);

    $.post("Home/Test", {test : data});
}

function WidgetProperty(name, value) {
    this.Name = name;
    this.Value = value;
} 
```

控制器是

```
[HttpPost]
public ActionResult Test(WidgetProperty[] test)
{
    return View("About");
}

public class WidgetProperty
{
    public string Name { get; set; }
    public string Value { get; set; }
} 
```

任何想法为什么来到控制器的对象的属性具有空值？用提琴手检查，它似乎传递了正确的值。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:14:27.280

您应该在发布数据之前对数据使用 JSON.stringify()，并且由于您知道数据类型是 JSON，因此最好指定要发布的数据是 JSON。

```
$.post("Home/Test", {test : JSON.stringify(data) }, "json"); 
```

[现场演示](http://jsfiddle.net/aXEDe/3/)

**编辑**：

我对此进行了更多研究，看来您需要包含`contentType: "application/json"`才能使其在 mvc3 中工作：

```
$.ajax({
     type: "POST",
     url: "Home/Test",
     data: JSON.stringify(data),
     success: function(data){},
     dataType: "json",
     contentType: "application/json"
 }); 
```

# android - findViewById 为 radioGroup 返回 null 但找到了 radioButtons？

> ID：11040486
> 
> 赞同：0
> 
> 时间：2012-06-14T19:59:32.743
> 
> 标签：android, radio-group, findviewbyid

我有一个执行以下操作的 Activity

```
Button distanceSort = (Button) findViewById(R.id.distanceSortButton);
    Button waitTimeSort = (Button) findViewById(R.id.waitTimeSortButton);
    Button nameSort = (Button) findViewById(R.id.nameSortButton);
    Button mapButton = (Button) findViewById(R.id.locationsMapButton);
    Button dashboardButton = (Button)findViewById(R.id.dashboardButton);
    RadioGroup sortingGroup = (RadioGroup)findViewById(R.id.sortingRadioGroup); 
```

xml就是这个

```
<RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/sortingRadioGroup"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_below="@id/headerBar"
android:layout_centerHorizontal="true"
android:checkedButton="@+id/distanceSortButton"
android:orientation="horizontal" >

<RadioButton
    android:id="@id/distanceSortButton"
    style="@style/tabText"
    android:layout_weight="1"
    android:background="@drawable/radio_group_selector"
    android:button="@null"
    android:checked="true"
    android:gravity="center"
    android:text="@string/distance_sort_button" />

<View
    android:layout_width="1dp"
    android:layout_height="48dp"
    android:background="@drawable/tab_separator" />

<RadioButton
    android:id="@+id/waitTimeSortButton"
    style="@style/tabText"
    android:layout_weight="1"
    android:background="@drawable/radio_group_selector"
    android:button="@null"
    android:gravity="center"
    android:text="@string/wait_time_sort_button" />

<View
    android:layout_width="1dp"
    android:layout_height="48dp"
    android:background="#464646" />

<RadioButton
    android:id="@+id/nameSortButton"
    style="@style/tabText"
    android:layout_weight="1"
    android:background="@drawable/radio_group_selector"
    android:button="@null"
    android:gravity="center"
    android:text="@string/name_sort_button" />
</RadioGroup> 
```

我的问题是找到了所有按钮，但单选组始终返回 null。我想使用那个 RadioGroup 来找出哪个按钮被选中。可以找到单选组内的按钮但单选组本身不能找到对我来说没有意义吗？

# sql - SQL：从两个历史表构建时间线的最佳方法

> ID：11040488
> 
> 赞同：7
> 
> 时间：2012-06-14T19:59:35.617
> 
> 标签：sql, tsql

考虑到以下情况：

```
CREATE TABLE Members (MemberID INT)
INSERT Members VALUES (1001)

CREATE TABLE PCPs (PCPID INT)
INSERT PCPs VALUES (231)
INSERT PCPs VALUES (327)
INSERT PCPs VALUES (390)

CREATE TABLE Plans (PlanID INT)
INSERT Plans VALUES (555)
INSERT Plans VALUES (762)

CREATE TABLE MemberPCP (
    MemberID INT
    , PCP INT
    , StartDate DATETIME
    , EndDate DATETIME)
INSERT MemberPCP VALUES (1001, 231, '2002-01-01', '2002-06-30')
INSERT MemberPCP VALUES (1001, 327, '2002-07-01', '2003-05-31')
INSERT MemberPCP VALUES (1001, 390, '2003-06-01', '2003-12-31')

CREATE TABLE MemberPlans (
    MemberID INT
    , PlanID INT
    , StartDate DATETIME
    , EndDate DATETIME)
INSERT MemberPlans VALUES (1001, 555, '2002-01-01', '2003-03-31')
INSERT MemberPlans VALUES (1001, 762, '2003-04-01', '2003-12-31') 
```

我正在寻找一种简洁的方法来构建成员/PCP/计划关系的时间表，其中 PCP 或成员计划的更改将导致结果中出现单独的开始/结束行。例如，如果在几年内，一名成员更改了他们的 PCP 两次和一次计划，但每次都在不同的日期，我会看到如下内容：

```
MemberID  PCP  PlanID  StartDate    EndDate
1001      231  555     2002-01-01   2002-06-30
1001      327  555     2002-07-01   2003-03-31
1001      327  762     2003-04-01   2003-05-31
1001      390  762     2003-06-01   2003-12-31 
```

如您所见，对于涉及成员/PCP/计划关联差异的每个日期期间，我需要一个单独的结果行。我有一个解决方案，但它与 WHERE 子句中的许多 CASE 语句和条件逻辑非常复杂。我只是在想有一种更简单的方法可以做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:22:15.743

与 T-SQL 兼容。我同意格伦的一般方法。

另一个建议：如果您允许在您的业务期间之间进行跳跃，则此代码将需要进一步调整。否则，我认为从下一条记录的 StartDate 推迟 EndDate 值会更好地从您的代码中获得更多受控行为。在这种情况下，您希望在数据到达此查询之前确保规则。

编辑：刚刚从 Andriy M 的帖子中了解了 With 语句和 SQL Fiddle。你也可以[在 SQL Fiddle 看到我的答案](http://sqlfiddle.com/#!3/5550a/1)。

编辑：修复了 Andriy 指出的错误。

```
WITH StartDates AS (
SELECT MemberId, StartDate FROM MemberPCP UNION
SELECT MemberId, StartDate FROM MemberPlans UNION
SELECT MemberId, EndDate + 1 FROM MemberPCP UNION
SELECT MemberId, EndDate + 1 FROM MemberPlans
),
EndDates AS (
SELECT MemberId, EndDate = StartDate - 1 FROM MemberPCP UNION
SELECT MemberId, StartDate - 1 FROM MemberPlans UNION
SELECT MemberId, EndDate FROM MemberPCP UNION
SELECT MemberId, EndDate FROM MemberPlans
),
Periods AS (
SELECT s.MemberId, s.StartDate, EndDate = min(e.EndDate)
  FROM StartDates s
       INNER JOIN EndDates e
           ON s.StartDate <= e.EndDate
          AND s.MemberId = e.MemberId
 GROUP BY s.MemberId, s.StartDate
)
SELECT MemberId = p.MemberId,
       pcp.PCP, pl.PlanId,
       p.StartDate, p.EndDate
  FROM Periods p
       LEFT JOIN MemberPCP pcp
           -- because of the way we divided period,
           -- there will be one and only one record that fits this join clause
           ON p.StartDate >= pcp.StartDate
          AND p.EndDate <= pcp.EndDate
          AND p.MemberId = pcp.MemberId
       LEFT JOIN MemberPlans pl
           ON p.StartDate >= pl.StartDate
          AND p.EndDate <= pl.EndDate
          AND p.MemberId = pl.MemberId
 ORDER BY p.MemberId, p.StartDate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:58:40.460

我的方法是将每个成员的唯一开始日期组合作为起点，然后从那里构建查询的其他部分：

```
--
-- Traverse down a list of 
-- unique Member ID and StartDates
-- 
-- For each row find the most 
-- recent PCP for that member 
-- which started on or before
-- the start date of the current
-- row in the traversal
--
-- For each row find the most 
-- recent PlanID for that member
-- which started on or before
-- the start date of the current
-- row in the traversal
-- 
-- For each row find the earliest
-- end date for that member
-- (from a collection of unique
-- member end dates) that happened
-- after the start date of the
-- current row in the traversal
-- 
SELECT MemberID,
  (SELECT TOP 1 PCP 
   FROM MemberPCP 
   WHERE MemberID = s.MemberID 
   AND StartDate <= s.StartDate 
   ORDER BY StartDate DESC
  ) AS PCP,
  (SELECT TOP 1 PlanID 
   FROM MemberPlans 
   WHERE MemberID = s.MemberID 
   AND StartDate <= s.StartDate 
   ORDER BY StartDate DESC
  ) AS PlanID,
  StartDate,  
  (SELECT TOP 1 EndDate 
   FROM (
    SELECT MemberID, EndDate 
    FROM MemberPlans 
    UNION 
    SELECT MemberID, EndDate 
    FROM MemberPCP) e
   WHERE EndDate >= s.StartDate 
   ORDER BY EndDate
  ) AS EndDate
FROM ( 
  SELECT
    MemberID,
    StartDate
  FROM MemberPlans
  UNION 
  SELECT
    MemberID,
    Startdate
  FROM MemberPCP
) s
ORDER BY StartDate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:13:33.763

作为可能不是最有效但至少简单直接的解决方案，我将执行以下操作：

*   1）扩大范围；

*   2）加入扩展范围；

*   3) 对结果进行分组。

当然，这假设只使用日期（即时间部分`00:00`适用于每个表`StartDate`和`EndDate`两个表）。

为了扩大日期范围，我更喜欢使用[数字表](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers "SQL，数字辅助表")，如下所示：

```
SELECT
  m.MemberID,
  m.PCP,
  Date = DATEADD(DAY, n.Number, m.StartDate)
FROM MemberPCP m
  INNER JOIN Numbers n
    ON n.Number BETWEEN 0 AND DATEDIFF(DAY, m.StartDate, m.EndDate) 
```

同样对于`MemberPlans`.

要生成一个组合行集，我会使用`FULL JOIN`，但如果您事先知道两个表涵盖完全相同的时间段，`INNER JOIN`我也会这样做：

```
SELECT *
FROM MemberPCPExpanded pcp
  FULL JOIN MemberPlansExpanded plans
    ON pcp.MemberID = plans.MemberID AND pcp.Date = plans.Date 
```

现在您只需要对结果行进行分组，并为每个组合找到最小和最大日期`(MemberID, PCP, PlanID)`：

```
SELECT
  MemberID  = ISNULL(pcp.MemberID, plans.MemberID),,
  pcp.PCP,
  plans.PlanID,
  StartDate = MIN(ISNULL(pcp.Date, plans.Date)),
  EndDate   = MAX(ISNULL(pcp.Date, plans.Date))
FROM MemberPCPExpanded pcp
  FULL JOIN MemberPlansExpanded plans
    ON pcp.MemberID = plans.MemberID AND pcp.Date = plans.Date
GROUP BY
  ISNULL(pcp.MemberID, plans.MemberID),
  pcp.PCP,
  plans.PlanID 
```

请注意，如果您使用`INNER JOIN`而不是`FULL JOIN`，则不需要所有这些`ISNULL()`表达式，只需选择任一表的列即可，例如，`pcp.MemberID`代替`ISNULL(pcp.MemberID, plans.MemberID)`和`pcp.Date`代替`ISNULL(pcp.Date, plans.Date)`。

完整的查询可能如下所示：

```
WITH MemberPCPExpanded AS (
  SELECT
    m.MemberID,
    m.PCP,
    Date = DATEADD(DAY, n.Number, m.StartDate)
  FROM MemberPCP m
    INNER JOIN Numbers n
      ON n.Number BETWEEN 0 AND DATEDIFF(DAY, m.StartDate, m.EndDate)
),
MemberPlansExpanded AS (
  SELECT
    m.MemberID,
    m.PlanID,
    Date = DATEADD(DAY, n.Number, m.StartDate)
  FROM MemberPlans m
    INNER JOIN Numbers n
      ON n.Number BETWEEN 0 AND DATEDIFF(DAY, m.StartDate, m.EndDate)
)
SELECT
  MemberID  = ISNULL(pcp.MemberID, plans.MemberID),
  pcp.PCP,
  plans.PlanID,
  StartDate = MIN(ISNULL(pcp.Date, plans.Date)),
  EndDate   = MAX(ISNULL(pcp.Date, plans.Date))
FROM MemberPCPExpanded pcp
  FULL JOIN MemberPlansExpanded plans
    ON pcp.MemberID = plans.MemberID AND pcp.Date = plans.Date
GROUP BY
  ISNULL(pcp.MemberID, plans.MemberID),
  pcp.PCP,
  plans.PlanID
ORDER BY
  MemberID,
  StartDate 
```

[您可以在 SQL Fiddle](http://sqlfiddle.com/#!3/e296c/2)尝试此查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:06:45.417

也许这会给一个开始的一些想法：

```
SELECT y.memberid, y.pcp, z.planid, x.startdate, x.enddate
  FROM (
        WITH startdates AS (

            SELECT startdate FROM memberpcp
            UNION
            SELECT startdate FROM memberplans
            UNION
            SELECT enddate + 1 FROM memberpcp
            UNION
            SELECT enddate + 1 FROM memberplans

            ), enddates AS (
            SELECT enddate FROM memberpcp
            UNION
            SELECT enddate FROM memberplans

          )

        SELECT s.startdate, e.enddate
          FROM startdates s 
              ,enddates e
          WHERE e.enddate = (SELECT MIN(enddate)
                               FROM enddates
                               WHERE enddate > s.startdate)
       ) x
       ,memberpcp y
       ,memberplans z

  WHERE (y.startdate, y.enddate) = (SELECT startdate, enddate FROM memberpcp WHERE startdate <= x.startdate AND enddate >= x.enddate)
    AND (z.startdate, z.enddate) = (SELECT startdate, enddate FROM memberplans WHERE startdate <= x.startdate AND enddate >= x.enddate) 
```

我在 Oracle 上运行，结果如下：

```
1001    231 555 01-JAN-02   30-JUN-02
1001    327 555 01-JUL-02   31-MAR-03
1001    327 762 01-APR-03   31-MAY-03
1001    390 762 01-JUN-03   31-DEC-03 
```

这个想法是首先定义不同的日期范围。那是在“WITH”子句中。然后查找其他表中的每个范围。这里有很多关于重叠范围等的假设。但也许是一个开始。我试着在没有分析函数的情况下查看这个，因为可能没有对 tsql 分析函数的良好支持？我不知道。在构建真实的日期范围时，范围也需要由 memberid 构建。

# android - 如何从元素中获取数据

> ID：11040493
> 
> 赞同：1
> 
> 时间：2012-06-14T20:00:00.700
> 
> 标签：android, list, iteration, element, serializable

我有这个代码：

```
Serializable newList;
newList=extras.getSerializable("list");
Iterator<Element> itr =( (List<Element>) newList).iterator();
Element froga=null;
while (itr.hasNext()) {
    Object element = itr.next();
    Log.i("***Selected Tab", "Im currently in tab with index::" + element);
} 
```

列表是这样的： `HashMap < String, String >`

并输出：

```
Im currently in tab with index::{L=blablabla, T=blablaba} 
```

如何选择 L？ **我可以选择带有索引之类的特定元素吗？**

十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:13:00.027

我会使用子字符串，因为输出将始终以“我当前在带有索引的选项卡中：：”开头，然后我会使用类似的东西

```
String str = "Im currently in tab with index::" + element;
int i = str.indexOf("index::{L=")); 
```

然后使用循环来抓取该索引之后的字符，直到到达字符逗号，然后中断例如：

```
String L ="";
int i = str.indexOf("index::{L="));
while(true){
   i++;
   if(str.charAt(i) == ',')
      break;
   L+=str.charAt(i+1);
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:51:40.693

我设法这样做，不确定它是否是最好的方法，但它有效。

```
 while (itr.hasNext()) {
                    element = itr.next();
                    entry = (HashMap<String, String>) element;
                    entry.get("T");//get variable

                } 
```

谢谢

# android - 可以在后台启动默认音乐播放器吗？

> ID：11040497
> 
> 赞同：1
> 
> 时间：2012-06-14T20:00:10.997
> 
> 标签：android, android-intent, media-player, android-service

我的应用程序中有 2 个区域可以在设备上启动默认媒体播放器并播放音频文件（播客）。一个在下载后从文件系统中获取它，另一个从站点上的文件中流式传输它。

这现在工作正常，问题是如果我在启动媒体播放器、播放器关闭并且播放停止后回击或回家尝试返回我的应用程序。

有没有办法在后台或作为服务启动它，这样当我回到应用程序时，音乐会继续在播放器中播放。我希望它的功能就像您从音乐播放器开始播放歌曲一样。所以用户可以正常使用设备，播放将继续。

这是我启动音乐播放器进行流式传输的代码。

```
private void playPodcast( Podcast podcast ) {
    Intent intent = new Intent( Intent.ACTION_VIEW );
    intent.setDataAndType( Uri.parse( podcast.getContentLink() ), "audio/*" );
    startActivity( intent );
} 
```

提前致谢。

* * *

**编辑！** 在收到以下建议后，我尝试将其作为服务启动。我已经尝试了两种方式。
两种方式都将其作为清单条目：

```
<service android:name=".DefaultMusicPlayerLaunchService">
</service> 
```

第一次尝试是创建一个只是一个骨架的服务类，并使用与上述类似的方法启动它。

DefaultMusicPlayerLaunchService V1：

```
public class DefaultMusicPlayerLaunchService extends Service {

    @Override
    public IBinder onBind( Intent intent ) {
        // TODO Auto-generated method stub
        return null;
    }

    public int onStartCommand( Intent intent, int flags, int startId ) {
        return START_STICKY;
    }
} 
```

播放播客方法：

```
 private void playPodcast( Podcast podcast ) {
        Intent intent = new Intent( getApplicationContext(), 
                                    DefaultMusicPlayerLaunchService.class );
        intent.setDataAndType( Uri.parse( podcast.getContentLink() ), "audio/*" );
        startService( intent );
    } 
```

我的想法是这样，它会启动音乐播放器，就像我之前在 Activity 中的方式一样，但在不离开它所在的屏幕的情况下启动它。我没有看到 LogCat 中发生任何事情。我觉得这应该可行，但我错过了一些东西。

我尝试的另一种方法是将播客对象序列化为额外对象，并将其放在`Intent`我为`DefaultMusicPlayerLaunchService`. 然后，在`onStartCommand`方法中，我抓取了对象，创建了一个新对象，`Intent`然后像顶部`startActivity`的原始方法一样调用它。`playPodcast`正如预期的那样，它所做的正是顶级的......启动播放器，但只要我回击或回家，它就会关闭。

如果我遗漏了一些明显的东西，我深表歉意。我是 Android 新手，到目前为止我使用过的所有东西都使用过`Activity`. 这是我第一次尝试启动`Service`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:32:04.223

是的，您可以将其作为服务启动。您需要创建一个扩展 android.app.Service 的类。并从一个 Activity 调用 startService(intent) 并传递一个将启动服务的意图。覆盖 onStartCommand 方法并让它返回 START_STICKY ，这将使服务运行直到它显式停止。由您在代码中或由 Android 操作系统来节省资源。您还可以重写 onBind 以将服务绑定到 Activity，这将使服务具有与前台 Activity 相同的重要性，从而降低 Android 杀死服务以节省资源的可能性。

# jquery - IE8 的 JQuery 问题：预期的标识符

> ID：11040501
> 
> 赞同：1
> 
> 时间：2012-06-14T20:00:29.080
> 
> 标签：jquery, internet-explorer, cross-browser

我尝试了一些我在这里找到的修复程序，但它们似乎没有工作，所以......

我得到了一个预期的标识符、字符串或数字 char 36，所以是左括号。我尝试用双引号替换所有单引号没有变化......

```
if (($('#attachment_asset').length) && ($('p.please-wait').length == 0)) {
    $('.buttons').append($('<p/>', {
        class: 'please-wait', 
        text: 'Please wait, uploading your file...'
    }));
} 
```

似乎在任何地方都可以正常工作，但 IE ......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:06:45.740

Word`class` [似乎保留在 IE 中](http://jonathonhill.net/2009-11-24/javascript-reserved-words-trigger-expected-identifier-error-on-ie/)。尝试用引号括起来：

```
$('.buttons').append($('<p/>', {
    "class": 'please-wait',
    text: 'Please wait, uploading your file...'
})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:09:59.623

没有错。

问题是与文件中其他内容的组合发生的。发布整个文件。这在 ie9 中运行良好。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

  <script language="javascript">
if (($('#attachment_asset').length) && ($('p.please-wait').length == 0)) {
    $('.buttons').append($('<p/>', {class: 'please-wait', text: 'Please wait, uploading your file...'}));
}
  </script>
 </head>

 <body>

 </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:11:58.033

试试这个

```
$('.buttons').append($("<p>").addClass("please-wait").append("Please wait, uploading your file...")); 
```

# xml - XQuery 月份函数

> ID：11040506
> 
> 赞同：0
> 
> 时间：2012-06-14T20:01:00.790
> 
> 标签：xml, xquery

我有以下 DTD：

```
<!DOCTYPE guests [
<!ELEMENT Guest (Gname, youth+, car+)>
<!ELEMENT youth (Yname, dateofbirth)>
<!ELEMENT car (carType, excursion+)>
<!ELEMENT excursion (week, location)>
<!ELEMENT Gname (#PCDATA)>
<!ELEMENT Yname (#PCDATA)>
<!ELEMENT dateofbirth (#PCDATA)>
<!ELEMENT carType (#PCDATA)>
<!ELEMENT week (#PCDATA)>
<!ELEMENT location (#PCDATA)>
>] 
```

我想使用 XQuery 来查找所有有一个年轻人的生日是八月的客人的姓名。这就是我想出的：

```
for $x in Guest/youth
let $GuessN := $x/@Gname
where $x/month:=8
return <Gname> $GuessN </Gname> 
```

和

```
For $x in Guest/youth[month=8]
Return <Gname>$x/@Gname </Gname> 
```

有什么功能可以读取月份吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:47:20.297

如果您尝试检查月份`youth/dateofbirth`（请参阅我上面的评论），您可以使用：

`month-from-date()`如果`dateofbirth`是`xs:date`或
`month-from-dateTime()`如果`dateofbirth`是`xs:dateTime`

xs:date        `2012-06-14`
示例： xs:dateTime 示例： `2012-06-14T22:34:52.682-06:00`

如果`dateofbirth`可转换为 xs:date 或 xs:dateTime，则必须手动提取月份（很可能使用`tokenize()`）。

这是一个使用`month-from-date()`. 我必须添加元素声明，`guests`并且必须正确关闭内部子集（`]>`而不是`>]`）。

**XML 输入**

```
<!DOCTYPE guests [
<!ELEMENT guests (Guest+)>
<!ELEMENT Guest (Gname, youth+, car+)>
<!ELEMENT youth (Yname, dateofbirth)>
<!ELEMENT car (carType, excursion+)>
<!ELEMENT excursion (week, location)>
<!ELEMENT Gname (#PCDATA)>
<!ELEMENT Yname (#PCDATA)>
<!ELEMENT dateofbirth (#PCDATA)>
<!ELEMENT carType (#PCDATA)>
<!ELEMENT week (#PCDATA)>
<!ELEMENT location (#PCDATA)>
]>
<guests>
    <Guest>
        <Gname>Guest 1</Gname>
        <youth>
            <Yname>Youth A</Yname>
            <dateofbirth>2012-06-14</dateofbirth>
        </youth>
        <car>
            <carType/>
            <excursion>
                <week/>
                <location/>
            </excursion>
        </car>
    </Guest>
    <Guest>
        <Gname>Guest 2</Gname>
        <youth>
            <Yname>Youth B</Yname>
            <dateofbirth>2012-08-14</dateofbirth>
        </youth>
        <car>
            <carType/>
            <excursion>
                <week/>
                <location/>
            </excursion>
        </car>
    </Guest>
    <Guest>
        <Gname>Guest 3</Gname>
        <youth>
            <Yname>Youth C</Yname>
            <dateofbirth>2000-12-25</dateofbirth>
        </youth>
        <car>
            <carType/>
            <excursion>
                <week/>
                <location/>
            </excursion>
        </car>
    </Guest>
</guests> 
```

**XQuery**

```
<guests>
{
for $guest in /guests/Guest[month-from-date(youth/dateofbirth) = 8]
    return $guest/Gname
}
</guests> 
```

**XML 输出**

```
<guests>
   <Gname>Guest 2</Gname>
</guests> 
```

* * *

实际上，XQuery 可以简化为：

```
<guests>{/guests/Guest[month-from-date(youth/dateofbirth) = 8]/Gname}</guests> 
```

# asp.net-mvc-3 - MVC3 Routes - 如何确保具有特定值的路由优先？

> ID：11040510
> 
> 赞同：0
> 
> 时间：2012-06-14T20:01:05.090
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

给定以下两个定义的路线：

```
 routes.MapRoute(name: "CityCategoryPage", url: "{city}-{state}/{categoryName}/__c/", defaults: new { controller = "Home", action = "GeoSubCategories" });
        routes.MapRoute(name: "CityStateCategoryResults", url: "{city}-{state}/{categoryName}/{searchTerm}/{pageNumber}/{pageSize}", defaults: new { controller = "Results", action = "SearchCityStateCategory", pageNumber = UrlParameter.Optional, pageSize = UrlParameter.Optional }); 
```

如果我删除第二条路线，我会得到在主页上看到结果的预期操作。但是，由于存在第二条路线，我总是被转发到结果页面。

我知道为什么会发生这种情况：“_ *c”仍然被视为一个可选参数，它与第二条路线的可选条件相匹配，但不知道如何让它工作。我不希望将“* _c”附加到 URL - 还想知道是否有其他方法解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:14:00.250

如果我对您的理解正确，您希望在没有提供搜索词的情况下显示首页？

如果是这样，请先尝试将路由与可选的 searchTerm 匹配，如果没有 searchTerm，则默认为主页路由，如下所示：

```
routes.MapRoute(name: "CityStateCategoryResults", url: "{city}-{state}/{categoryName}/{searchTerm}/{pageNumber}/{pageSize}", defaults: new { controller = "Results", action = "SearchCityStateCategory", pageNumber = UrlParameter.Optional, pageSize = UrlParameter.Optional });
routes.MapRoute(name: "CityCategoryPage", url: "{city}-{state}/{categoryName}/", defaults: new { controller = "Home", action = "GeoSubCategories" }); 
```

# java - Java ImageIcon 到 JLabel 数组

> ID：11040512
> 
> 赞同：0
> 
> 时间：2012-06-14T20:01:19.723
> 
> 标签：java, arrays, swing, jlabel, imageicon

当我尝试将此 JLabel 的 ImageIcon 设置为某个值时，为什么会出现错误。它返回一个空指针异常。有谁知道这个问题？

```
public class Window extends JFrame{

    JPanel panel = new JPanel();
    JLabel stick[] = new JLabel[10];    

    Window(){

        super("ThisIsWindow");
        setSize(650,550);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);

        add(panel);
        panel.setLayout(null);

        stick[5].setIcon(new ImageIcon("stick.gif"));

    }
} 
```

错误发生在将stick[5] 设置为stick.gif 的代码的最后一行。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T20:03:23.270

添加

```
stick[5] = new JLabel(); 
```

前

```
stick[5].setIcon(new ImageIcon("stick.gif")); 
```

* * *

基本上，您正在创建一个包含 10 个 type 引用的数组`JLabel`，并且这些引用在开头没有引用任何内容（null）：

```
JLabel stick[] = new JLabel[10]; 
```

因此，您需要创建 10 个`JLabel`with实例`new JLabel()`并让这 10 个引用指向它们：

```
for(int i = 0; i < 10; i++) stick[i] = new JLabel(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:03:19.437

中是否有 JLabel 对象`stick[5]`？

# android - 何时使用 Horizo ntalListView 与 Horizo nalScrollView？表现？

> ID：11040516
> 
> 赞同：0
> 
> 时间：2012-06-14T20:01:24.980
> 
> 标签：android, android-layout, android-listview, android-view

我一直在使用这个[自定义的 android 视图](http://www.dev-smart.com/archives/34)在我的应用程序中有一个水平列表视图。但最近我一直在玩弄视图，发现我可以使用`HorizonalScrollView`原生 android 布局的 a 来拥有相同的元素。
现在我的问题是，由于`HorizotalListView`是常规的改编，`ListView`因此可以使用该`convertView`功能，是使用更快`HorizontalScrollView`还是应该继续使用`HorizontalListView`？
以下是我打算如何使用`HorizontalScrollView`：

```
public class AndTestActivity extends Activity implements OnClickListener{
    /** Called when the activity is first created. */
    Context c = this;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        LinearLayout ll = (LinearLayout) findViewById(R.id.ll);
        int max = 20;
        ImageView img;
        TextView tv;
        for(int i = 0;i<max;i++){
            LayoutInflater li = getLayoutInflater();
            View v = li.inflate(R.layout.item, null);
            img = (ImageView) v.findViewById(R.id.imageView1);
            img.setId(i);
            img.setImageResource(R.drawable.ic_launcher);
            img.setPadding(10, 10, 10, 10);
            v.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    Toast.makeText(c, "Item clicked!", Toast.LENGTH_SHORT).show();
                }
            });
            tv = (TextView) v.findViewById(R.id.textView1);
            tv.setText("Item: "+img.getId());
            ll.addView(v);
        }
    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }
} 
```

# php - 使用 PHP 将图像渲染得更小

> ID：11040517
> 
> 赞同：0
> 
> 时间：2012-06-14T20:01:26.303
> 
> 标签：php, image, render

在我的网站上，我得到了大约 10GB 的图像，但其中 90% 的图像真的很大。我需要的是在缩略图中渲染它们，但我不想为每个图像创建缩略图。我创建了一个代码来调整它的大小并用 PHP 打印它，然后调用 PHP。

但我还需要以下数据，我不知道如何添加它。

```
<img src="<? echo $img; ?>" width="<? echo $width; ?>" height="<? echo $height; ?>" alt="<? echo $descr; ?>" tag='<? echo $tags; ?>' id="img_idea"/> 
```

我怎样才能添加所有这些信息？

纳克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:10:48.767

如果您关心带宽，您会希望在上传大图像时制作更小的新副本。

如果您还关心空间，您可以创建一个页面（即 www.mysite.com/image.php?imgid=133）来查找图像，检查较小的版本，如果不存在则创建它，然后提供较小的版本。

查看 PHP GD 及其衍生的众多插件，了解如何调整图像大小。

如果你不关心带宽，你可以将你的 img 包装在一个 div 中，然后将所需的宽度/高度应用于 div 和 max-width: 100%; 和 max-height: img 的 100%。

# c# - 如何用for循环替换foreach循环

> ID：11040523
> 
> 赞同：0
> 
> 时间：2012-06-14T20:01:48.737
> 
> 标签：c#, asp.net-mvc-3, linq, for-loop, ienumerable

我正在寻找合适的语法。我正在使用 MVC，在我看来，我需要遍历模型，因为我需要以不同的数量做一些其他的事情。我是这里的新手，浏览了大量帖子，但没有找到语法。这是有效的代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<MvcMysurvey.Models.Mysurvey>>" %>
<% foreach (var item in Model) {%>
            <%: Html.HiddenFor(m => item.ID) %>

And here is the code I need the syntax for to make it working:

   <% for (int i = 0; i < Model.Count(); i++) {%>
             <%: Html.HiddenFor(m => m[i].ID) %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T00:31:15.060

你的模型是 type `IEnumerable<MvcMysurvey.Models.Mysurvey>`。

问题是它`IEnumerable<T>`没有公开[indexer( `[]`) 运算符](http://msdn.microsoft.com/en-us/library/a3hd7ste.aspx)。您有两种选择来处理这种不便。

1.  **请改用数组或列表。**
    数组和`IList<T>`实现确实公开了索引器运算符。要使用索引器语法，您需要将模型转换为数组或其他`IList<T>`. 所以，只要改变你的

    ```
    <% for (int i = 0; i < Model.Count(); i++) {%>
       <%: Html.HiddenFor(m => m[i].ID) %> 
    ```

    到

    ```
    <% var items = Model.ToArray();
       for (int i = 0; i < items.Length; i++) {%>
          <%: Html.HiddenFor(m => items[i].ID) %> 
    ```

2.  **使用[方法](http://msdn.microsoft.com/en-us/library/bb299233.aspx)方法[_`ElementAt`](http://msdn.microsoft.com/en-us/library/bb299233.aspx)**

    虽然`IEnumerable<T>`没有公开索引器运算符，但有一个 LINQ 扩展方法可以做同样的事情。就是[方法](http://msdn.microsoft.com/en-us/library/bb299233.aspx)。[_ `ElementAt`](http://msdn.microsoft.com/en-us/library/bb299233.aspx)要使用此语法，您可以将代码更改为：

    ```
     <% for (int i = 0; i < Model.Count(); i++) {%>
        <%: Html.HiddenFor(m => m.ElementAt(i).ID) %> 
    ```

不过，数组语法几乎肯定会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:16:27.470

我想这可能是你要找的？您的问题不太清楚，但听起来您正在寻找基于计数等于某物的条件来做某事。如果是这种情况，您只需要添加一个 if 语句来检查计数是否与您要查找的任何值相匹配。

```
<% for (int i = 0; i < Model.Count(); i++)
<% { %>
    <% if (i == someCount) %>
    <% { %>
        <!-- Do Something Here -->
    <% } %>
    <%: Html.HiddenFor(m => m[i].ID) %>
<% } %> 
```

# javascript - 与 D3.js 的相互作用力

> ID：11040527
> 
> 赞同：3
> 
> 时间：2012-06-14T20:02:12.463
> 
> 标签：javascript, d3.js, physics, gravity, force-layout

我试图在粒子向“焦点”移动时“模拟”粒子上的引力。实际上，我正在尝试修改以下代码，以便粒子在前往蓝色节点的途中被橙色节点略微拉离轨道。我的问题是我无法使用 D3.js 强制定向布局来概念化它。我意识到这是一个非常模糊的问题，但非常感谢任何帮助！图像和代码如下：

![在此处输入图像描述](../Images/5645fc2f8f4bf588357e1bda233bfc31.png)

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>Force Layouts - Quantitative Foci</title>
    <script type="text/javascript" src="http://d3js.org/d3.v2.min.js?2.8.1"></script>
    <style type="text/css">

circle {
  stroke: #fff;
}

svg {
  fill: #fff;
  stroke: #000;
}

    </style>
  </head>
  <body>
    <div id="body">
      <div id="chart"></div>
    </div>
    <script type="text/javascript">

var w = 1280,
    h = 800,
    color = d3.scale.category10();

var force = d3.layout.force()
    .gravity(0)
    .charge(-5)
    .linkStrength(0)
    .size([w, h]);

var links = force.links(),
    nodes = force.nodes(),
    centers = [
      {type: 0, x: 3 * w / 6, y: 2 * h / 6, fixed: true},
      {type: 1, x: 4 * w / 6, y: 4 * h / 6, fixed: true}
    ];

var svg = d3.select("#chart").append("svg:svg")
    .attr("width", w)
    .attr("height", h);

svg.append("svg:rect")
    .attr("width", w)
    .attr("height", h);

svg.selectAll("circle")
    .data(centers)
  .enter().append("svg:circle")
    .attr("r", 12)
    .attr("cx", function(d) { return d.x; })
    .attr("cy", function(d) { return d.y; })
    .style("fill", fill)
    .call(force.drag);

force.on("tick", function(e) {
  var k = e.alpha * .1;
  nodes.forEach(function(node) {
    var center = centers[node.type];
    node.x += (center.x - node.x) * k;
    node.y += (center.y - node.y) * k;
  });

  svg.selectAll("circle")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });

  svg.selectAll("line")
      .attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });
});

var p0;

svg.on("mousemove", function() {
  var p1 = d3.svg.mouse(this),
      a = {type: 0, x: p1[0], y: p1[1], px: (p0 || (p0 = p1))[0], py: p0[1]},
      b = {type: 1, x: centers[1].x, y: centers[1].y, fixed:true},
      link = {source: a, target: b};

  p0 = p1;

  svg.selectAll()
      .data([a, b])
    .enter().append("svg:circle")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; })
      .attr("r", 4.5)
      .style("fill", fill)
    .transition()
      .delay(3000)
      .attr("r", 1e-6)
      .remove();

  svg.insert("svg:line", "circle")
      .data([link])
    .transition()
      .delay(3000)
      .each("end", function() {
        nodes.splice(nodes.indexOf(a), 1);
        nodes.splice(nodes.indexOf(b), 1);
        links.splice(links.indexOf(link), 1);
      })
      .remove();

  nodes.push(a, b);
  links.push(link);
  force.start();
});

function fill(d) {
  return color(d.type);
}

    </script>
  </body>
</html> 
```

[1](https://i.stack.imgur.com/QtAjm.gif) [http://jsfiddle.net/fbW7T/1/——](http://jsfiddle.net/fbW7T/1/)之前。

[2] [http://jsfiddle.net/fbW7T/2/](http://jsfiddle.net/fbW7T/2/) -- 之后，根据 Lephix 的提议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:44:34.803

首先，你的问题很有趣:)。
将您的 force.on("tick", function(e) {...}) 替换为以下代码。实际上我只是在函数中添加了一个变量和 10 行代码。
**fr**表示粒子应偏离橙色节点的圆形区域的半径。

```
var fr = 100;
force.on("tick", function(e) {
  var k = e.alpha * .1;
  nodes.forEach(function(node) {
  var center = centers[node.type];
  node.x += (center.x - node.x) * k;
  node.y += (center.y - node.y) * k;

if (node.type == 0) {
    center = centers[1];
    while (Math.abs(node.x - center.x) < fr && Math.abs(node.y - center.y) < fr) {
        if (Math.abs(node.x - center.x) >= Math.abs(node.y - center.y)) {
            node.x += (node.x - center.x)/Math.abs(node.x - center.x);
        } else {
            node.y += (node.y - center.y)/Math.abs(node.y - center.y);
        }
    }
}
});

svg.selectAll("circle")
  .attr("cx", function(d) { return d.x; })
  .attr("cy", function(d) { return d.y; });

svg.selectAll("line")
  .attr("x1", function(d) { return d.source.x; })
  .attr("y1", function(d) { return d.source.y; })
  .attr("x2", function(d) { return d.target.x; })
  .attr("y2", function(d) { return d.target.y; });
}); 
```

# php - 为我的整个网站创建一个数据库层类，PHP 需要一些建议吗？

> ID：11040532
> 
> 赞同：2
> 
> 时间：2012-06-14T20:02:37.593
> 
> 标签：php, object, installation

我目前正在尝试为自己构建一些不错的类，以更快地构建我的页面。

我目前有这个设置，

```
// page class
class Page extends DBC {
    // creates a page
    public function create($data = false) {
       echo 'SOME BASIC HTML TO SETUP PAGE';
       // pass the database connection var to content function
       content($this -> $dbc, $data);
       echo 'SOME BASIC HTML TO SETUP PAGE';
    }
}
// dbc class
class DBC {
    public $dbc;
    public function __construct() {
        // sets the database connection
    }
} 
```

对于我创建的每个新页面，我只是在将我的类添加到脚本中之后执行此操作。

```
// content function
function content($dbc) {
    // some content
    // am able to use dbc
}
// new page object
$page = new Page();
// am able to use dbc var fine here too
$page -> dbc -> // execute a query
// create page
$page -> create(); 
```

但我现在面临的问题是如何最好地在我的`DBC`类中创建函数以使我的查询构建更快。我尝试将以下函数添加到类`DBC`中，

```
public static function query($q, $data, $options = array()) {
    // execute prepared query
    $q = $this -> dbc -> prepare($q);
    return $q -> execute($data);
} 
```

但是我不能在我的`content`函数中使用它，因为只有数据库连接被传递给它，并且类`query`内的函数`DBC`在对象上下文中使用该连接。

解释我的问题后，我的问题如下；

最好在我的`DBC`班级中创建为我执行查询的函数`static`并传入现有的连接？

或者

`DBC`将整个对象传递给我`content`在`Page`类中的函数会更好吗，如下所示，

```
content(new DBC(), $data); 
```

这样我就可以在对象上下文中使用函数。该类`Page`仍然需要由`DBC`该类扩展，因为我也需要在函数`dbc`之外使用 var 。但是，当它被扩展时，这`content`不会产生类的 2 个实例，而当传递给函数时，会产生一个类的实例吗？`DBC``Page``content`

感谢您花时间阅读此问题并提供任何答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:36:10.530

您应该查看 MVC（模型-视图-控制器）模式。你不希望你的 html/Page 代码和你的数据库代码混合在一起。如果您打算花时间创建数据库访问层，您应该继续将显示代码和数据代码分开。

如果现在完全分离 MVC 工作量太大，我建议您使用存储库模式进行数据库访问。它将在一个简洁的系统中为您提供所需的数据库方法，您可以从 Page 类中访问这些方法。

这个问题的公认答案为您提供了很好的信息： [在 MVC 中设置存储库模式](https://stackoverflow.com/questions/9244584/setting-up-a-repository-pattern-in-mvc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:39:59.500

按照我的理解，我认为一个例子是最好的，所以你可以看看并根据你的要求进行改进。[检查我在github](https://github.com/emmanix2002/PHP-Utility-Scripts/blob/master/database-communication/class.connection-manager.php)
上写的这个类 并检查这个关于使用的[要点](https://gist.github.com/2143067) 所以我想说的是，看看它并提出一个适合你需要的解决方案，或者你可以直接使用它......它当然是免费的

# php - 怎么解决 包括文件上传和其他文本输入，在同一页面上

> ID：11040535
> 
> 赞同：16
> 
> 时间：2012-06-14T20:02:44.423
> 
> 标签：php, html, forms, testing, upload

我的表格需要帮助。我想将输入、文本区域和文件上传混合到数据库中。

我在中使用什么？我是否使用普通表单属性：

```
 <form action="" method=""> 
```

或者

```
<form enctype="" action="" method=""> 
```

请记住，我必须在单个页面中执行此操作，并且图片上传必须与其他文本输入一起完成。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T20:05:55.350

您必须`enctype="multipart/form-data"`用于文件上传，这也适用于非文件上传表单。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T20:06:15.287

您需要设置`enctype="multipart/form-data"`和使用`method="post"`任何包含文件输入的表单。这不会阻止您包含其他类型的字段。

（这些字段提交给服务器的方式会改变，但是你的表单解析库会自动处理这些差异，如果你自己解析原始输入，你只需要担心它们）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T20:24:46.563

`<form enctype="multipart/form-data" method="post" action="submit.php">`

`submit.php`在这种情况下，将处理您的表单的外部 PHP 脚本（如果您决定使用 PHP）。但是您可以随意命名`.php`脚本（*例如* `cats.php`）。

上传的文件/图像数据将存储在内部`$_FILES`，所有文本字段、文本区域、单选按钮、复选框和其他数据都将驻留在`$_POST`超全局内部。

收到`submit.php`提交的表单后，您可以对其进行各种处理，例如验证用户是否提交了正确类型的文件/图像，将文件/图像的文件路径存储在本地数据库中（客户端/服务器或基于文件系统）， 以及更多。

确保也验证用户输入客户端和服务器端。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T20:03:38.047

```
<form enctype="multipart/form-data" action="yourpage.php" method="post"> 
```

`enctype`如果您希望文件上传正常工作，您将需要该属性。仅供参考，一个表单可以包含所有字段类型，包括文件上传，并且工作得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-25T15:30:19.887

在经典 ASP 中，当使用 enctype="multipart/form-data" 时，我必须访问我的文本字段`load.getFileData("textfield")` 而不是标准`Request("textfield")`

# php - 从内部连接创建一个 mysql 表

> ID：11040538
> 
> 赞同：2
> 
> 时间：2012-06-14T20:02:48.863
> 
> 标签：php, mysql, inner-join

我正在尝试从其他两个表之间的内部连接创建一个 mysql 表。我正在处理某人创建的具有以下表格的数据库：

*   `sitematrix_sites`
*   `sitematrix_databases`

它们与另一个名为的表（我不知道为什么不使用外键）相关，该表`sitematrix_sites_databases`具有以下字段： `site_id`和`database_id`.

这就是两张表的关系。现在我正在尝试删除它以使我的生活更轻松，所以我有：

```
mysql> CREATE TABLE result AS(select * from sitematrix_databases INNER JOIN site
matrix_site_databases ON sitematrix_site_databases.database_id = sitematrix_data
bases.database_id);
ERROR 1060 (42S21): Duplicate column name 'database_id' 
```

但是，我得到了那个错误。有人知道如何在不重复该`database_id`字段的情况下合并两个表吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:05:27.363

删除`*`SELECT 语句中的 并实际列出新表中所需的列。对于出现在两个原始表中的列，也要为表命名（例如`sitematrix_databases.database_id`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:06:49.827

不要使用`*`命名每一列并使用别名。例如，`sitematrix_database.database_id`您可以拥有`alternativeName`. 您也可以通过这种方式选择您想要的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:06:05.397

在 SQL Server 中，您可以使用“select into”。这可能是 mySql 的等效语法：

*   [http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-select-into-table.html](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-select-into-table.html)

不幸的是，这是两个命令（不仅仅是一个）：

*   [http://www.tech-recipes.com/rx/1487/copy-an-existing-mysql-table-to-a-new-table/](http://www.tech-recipes.com/rx/1487/copy-an-existing-mysql-table-to-a-new-table/)

`CREATE TABLE recipes_new LIKE production.recipes; INSERT recipes_new SELECT * FROM production.recipes;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T20:11:09.653

而不是使用`SELECT * ...`尝试`SELECT database_id ...`

MySQL 不喜欢连接具有相同列名的表。

# bash - 如何使用域列表作为输入来更新配置文件？

> ID：11040540
> 
> 赞同：3
> 
> 时间：2012-06-14T20:02:52.733
> 
> 标签：bash, sed, awk

我有两个文件：domainList 和 config.cnf。domainList 文件只包含一个域列表，如下所示：

```
facebook.com
yahoo.com
youtube.com 
```

config.cnf 是一个配置文件，具有相同的列表，但格式略有不同。我需要编写一个脚本，在更新列表时更新配置文件。每当更新第一个列表时，我都可以执行 bash 脚本。这是配置文件中列表的格式...

```
*other config options/entries*
[my_list]
WWW.1 = facebook.com
WWW.2 = yahoo.com
WWW.3 = youtube.com
EOF 
```

因此，如果删除 yahoo 并将 ebay 添加到 domainList 中并且我运行我很酷的 bash 脚本，我需要像这样更新配置文件......

```
*other config options/entries*
[my_list]
WWW.1 = facebook.com
WWW.2 = youtube.com
WWW.3 = ebay.com
EOF 
```

使事情复杂化（稍微）域可以有子域和通配符（即 news.google.com 或 *.google.com）。任何关于如何实现这一点的想法将不胜感激！我该怎么做才能不让数字完全失控？它可能只需要每次清除列表并重新生成它，对吧？

谢谢！

电动汽车

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T20:25:13.663

这是一个简单的脚本来实现这一点：

```
# delete all lines after [my_list]
sed -i '/my_list/q' config.cnf

# add the domain list to the bottom of the config
awk '{print "WWW." NR " = " $0}' domainList >> config.cnf 
```

该脚本可以使用 awk 或 sed 编写为单行脚本，但上述方法（希望）在其方法中非常清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:21:54.207

```
#!/usr/bin/env bash

FIN=domainList
FOUT=config.cnf

echo "config.cnf template header" > $FOUT
awk '{ print "WWW." FNR " = " $1 }' $FIN >> $FOUT
echo "config.cnf template footer" >> $FOUT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:15:24.733

这是 awk 中的一个单行代码

```
awk '
BEGIN{var=1}
NR==FNR{a[NR]=$1;next} 
var && /WWW/{var=0; for (x=1;x<=length(a);x++) {print "WWW." x " = " a[x]};next}
!var && /WWW/ {next}
1' domainList config.cnf > config.cnf_new 
```

### 测试：

```
$ cat domainList 
facebook.com
youtube.com
ebay.com

$ cat config.cnf
*other config options/entries*
[my_list]
WWW.1 = facebook.com
WWW.2 = yahoo.com
WWW.3 = youtube.com
EOF

$ awk ' 
BEGIN{var=1}
NR==FNR{a[NR]=$1;next} 
var && /WWW/{var=0; for (x=1;x<=length(a);x++) {print "WWW." x " = " a[x]};next}
!var && /WWW/ {next}
1' domainList config.cnf
*other config options/entries*
[my_list]
WWW.1 = facebook.com
WWW.2 = youtube.com
WWW.3 = ebay.com
EOF
$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:11:57.630

带有一点 awk 的 bash

```
while IFS= read -r line; do
  echo "$line"
  if [[ $line = '[my_list]' ]]; then
    awk '{print "WWW." NR " = " $0}' domainList
    echo "EOF" # is this literally in your config file?
    break
  fi
done < config.cnf > tmpfile && mv tmpfile config.cnf 
```

# java - 关键监听器不工作

> ID：11040546
> 
> 赞同：1
> 
> 时间：2012-06-14T20:03:26.587
> 
> 标签：java, applet, keylistener, event-listener

```
 public void paint (Graphics g)
{
    bufferGraphics.setColor (Color.black);
    bufferGraphics.clearRect (0, 0, dim.width, dim.width);
    while (input != KeyEvent.VK_SPACE)
    {
        bufferGraphics.fillRect (0, 0, dim.width, dim.height);
    }

    bufferGraphics.drawImage (track, 0, 0, dim.width, dim.height, this);
    bufferGraphics.setFont (new Font ("Calibri", Font.PLAIN, 25));
    bufferGraphics.drawString ("Level: " + level, 30, 30);
    bufferGraphics.drawImage (car, 620, myCarY, 70, 120, this);
    bufferGraphics.drawImage (opponent, 415, oppCarY, 70, 120, this);
    move (); 
```

这是现在的代码。执行时，我得到一个甚至无法关闭的冻结空白窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:12:12.273

您的问题在您的 if 语句中。

```
if(run = false) 
```

永远不会执行，因为 assignment 返回被分配的值（例如 false）。

您需要将您的更改`=`为`==`.

您可能还想将无限 for 循环更改为 while 循环，例如

```
while(input != KeyEvent.VK_SPACE) {
} 
```

还要确保将您的 KeyListener 添加到您的课程中（在 ctor 中）

`addKeyListener(new MyKeyListener())`

我刚刚测试了代码，它工作正常。

# php - HTACCESS 我如何使用我的代码来获得正确的重定向

> ID：11040548
> 
> 赞同：0
> 
> 时间：2012-06-14T20:03:29.843
> 
> 标签：php, .htaccess, url, mod-rewrite

我的 HTACCESS 文件目前如下所示：

```
RewriteEngine On        
RewriteBase /

# stop directory listings
#Options -Indexes 

#stops htaccess views
#<Files .htaccess>
#order allow,deny
#deny from all
#</Files>        

# redirect game folders     
RewriteRule ^games/([^/]+)/([^/]+) games.php?author=$1&slug=$2 [L]   

# redirect edit     
RewriteRule ^protected/edit-game/([^/]+)/([^/]+) protected/edit-game.php?author=$1&slug=$2 [L] 
RewriteRule ^admin/edit-game/([^/]+)/([^/]+) admin/edit-game.php?author=$1&slug=$2 [L]

# redirect view     
RewriteRule ^protected/view-game/([^/]+)/([^/]+) protected/view-game.php?author=$1&slug=$2 [L]   

# redirect user
RewriteRule ^page/([^/]+) user.php?user=$1 [L]  

# remove .php; use THE_REQUEST to prevent infinite loops
RewriteCond %{THE_REQUEST} ^GET\ (.*)\.php\ HTTP
RewriteRule (.*)\.php$ $1 [R=301]     

# remove index
RewriteRule (.*)/index$ $1/ [R=301]

# remove slash if not directory
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /$
RewriteRule (.*)/ $1 [R=301]

# add .php to access file, but don't redirect
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L]   

ErrorDocument 404 /error-404.php 
```

我有一个新的要求，所以当有人去 www.domain.com/im-a-page-in-database

它转到我的 page.php，获取隐藏的“slug”->“im-a-page-in-database”并查询返回该特定页面对象的数据库。

问题是，如果我在我的 HTACCESS 文件中添加如下内容：

```
# redirect pages/posts 
RewriteRule ^([^/]+) page.php?slug=$1 [L] 
```

它只是覆盖所有以前可能成功的重写并显示我的 page.php，无论它放在 htaccess 文件中的什么位置？我认为 L 的意思是如果规则被认可......它应该停止尝试做事。所以如果我把我的新行放在我所有的重定向下，它应该最后做页面检查..但是不行:(

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:10:23.693

也许那是因为您的 301 重定向？浏览器会缓存这些重定向，因此您必须尝试使用​​其他浏览器或清除缓存。

# iphone - 在 Xcode 中有条件地链接第三方 API

> ID：11040553
> 
> 赞同：3
> 
> 时间：2012-06-14T20:03:46.380
> 
> 标签：iphone, ios, xcode4.2

我有一个第三方 API，我正在尝试将其集成到我的 iOS 通用应用程序中。如果在设备上运行该 API 可以正常工作，但在尝试在模拟器上运行它时会引发编译时链接错误。那么，如果我在模拟器上运行，有没有办法可以跳过他们的静态库链接？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:43:57.063

实际上，这比我想象的要容易得多。

第 1 步：将链接器标志`-ObjC`和添加`-all_load`到您的目标。这告诉 objc 运行时即使我们没有在代码中引用一个类，它仍然会将它加载到内存中。

第 2 步：在您的代码中，您可以执行以下操作：

```
Class cls = NSClassFromString(@"SomeClassInStaticLibrary");
if (cls == nil)
{
   // on the simulator
}
else
{
   // on the device, use the class like usual
   id myInstance = [[cls alloc] init];
} 
```

不幸的是，您必须将所有内容都称为`id`，因为如果包含标头，您将收到链接器错误。

它有点破解，但它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:17:00.853

您可以做的是将静态库构建为一个库`FAT`。编译两种架构 armv 和 i386 以在模拟器中运行。

您可以在此处找到有关此的更多信息，

[http://mark.aufflick.com/blog/2010/11/18/making-a-fat-static-library-for-ios-device-and-simulator](http://mark.aufflick.com/blog/2010/11/18/making-a-fat-static-library-for-ios-device-and-simulator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:22:43.300

您可以在目标的 Xcode (4.3) Build Settings 选项卡中控制此设置。在它谈到“其他链接器标志”的地方，您可以添加条件设置（单击并按住右下角的“+”图标，默认情况下显示“添加构建设置”）。在这里，您可以使用正常的 -l/-L 链接器标志指定要链接的库，但仅适用于指定为“任何 iOS SDK”的构建，但不要为“任何 iOS 模拟器 SDK”添加此标志。

# python - Django 单元测试数据库没有被拆除？

> ID：11040557
> 
> 赞同：8
> 
> 时间：2012-06-14T20:03:51.090
> 
> 标签：python, django, unit-testing

我编写了一些单元测试来测试我的 Django 应用程序。特别是一个测试套件的功能中有很多代码`setUp()`。所述代码的目的是为数据库创建测试数据。（是的，我知道固定装置，并且在这种情况下选择不使用它们）。当我运行单元测试套件时，运行的第一个测试通过，但是套件中的其余测试失败。所有失败的消息都是相同的：它提到错误的位置是“self.database_object.save()”，原因是“IntegrityError: column name is not unique”。所以，我最好的猜测是 Django 在每次测试后都没有正确地删除数据库。

今天早些时候它正在工作，但我想我做了一些重构把它搞砸了。关于为什么 Django 在每次测试后没有正确拆除数据库的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T20:36:59.057

你使用 TestCase 还是 TransactionTestCase 作为你的基类？有时这种行为与 Django 为支持 TransactionTestCase 而对 TestCase 进行的优化有关。这是区别：

[https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs#django.test.TransactionTestCase](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs#django.test.TransactionTestCase)

> 类 TransactionTestCase
> 
> Django TestCase 类利用数据库事务工具（如果可用）来加快在每次测试开始时将数据库重置为已知状态的过程。然而，这样做的结果是事务提交和回滚的效果无法通过 Django TestCase 类进行测试。如果您的测试需要测试此类事务行为，则应使用 Django TransactionTestCase。
> 
> **TransactionTestCase 和 TestCase 是相同的，除了将数据库重置为已知状态的方式以及测试代码测试提交和回滚效果的能力。TransactionTestCase 在测试运行之前通过截断所有表并重新加载初始数据来重置数据库。TransactionTestCase 可以调用 commit 和 rollback 并观察这些调用对数据库的影响。**
> 
> **另一方面，TestCase 不会在测试开始时截断表并重新加载初始数据。相反，它将测试代码包含在一个数据库事务中，该事务在测试结束时回滚**。它还防止被测代码对数据库发出任何提交或回滚操作，以确保测试结束时的回滚将数据库恢复到其初始状态。为了保证所有 TestCase 代码都以干净的数据库开始，Django 测试运行程序首先运行所有 TestCase 测试，然后再运行任何其他可能会更改数据库而不将其恢复到原始状态的测试（例如 doctests）。

# php - 如何在 dictionary2 查询生成器 where 语句中添加运算符

> ID：11040558
> 
> 赞同：6
> 
> 时间：2012-06-14T20:03:53.807
> 
> 标签：php, symfony, doctrine, doctrine-orm

我试图从所选持续时间除以条目持续时间等于没有余数的表中进行选择。

```
$qb = $em->createQueryBuilder()
->from('AcmeBlogBundle:Entry', 'e')
->andWhere(":duration % e.duration = 0")
->setParameter('duration', $duration); 
```

这将返回错误：

```
[Syntax Error] line 0, col 226: Error: Expected =, <, <=, <>, >, >=, !=, got '%' 
```

这将在普通 SQL 中工作。有人知道如何使用 Doctrine 的查询构建器来做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T20:29:37.837

该符号`%`不是 DQL 运算符。尝试这个：

```
$qb = $em->createQueryBuilder()
->from('AcmeBlogBundle:Entry', 'e')
->andWhere("mod(:duration,e.duration) = 0")
->setParameter('duration', $duration); 
```

或阅读：[http](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html) ://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html 第 12.5.1 段。

```
MOD(a, b) - Return a MOD b. 
```

# nginx - NGINX [emerg] 配置文件中的未知指令“upload_pass”错误

> ID：11040565
> 
> 赞同：0
> 
> 时间：2012-06-14T20:04:24.863
> 
> 标签：nginx, passenger

我在运行 Lion Server 的 Mac Mini 上安装了 Nginx 1.2.0 和Passenger。我使用了下面链接中的说明。

[https://github.com/coverall/nginx](https://github.com/coverall/nginx)

我会预先声明我是 Nginx 和Passenger 的新手。我正在开发一个我想在服务器上托管的 Ruby on Rails 项目。当我尝试启动 Nginx 时，出现以下错误：

```
[emerg] unknown directive "upload_pass" in /usr/local/etc/nginx/virtualhosts/adam.localhost.coverallcrew.com.conf:20 
```

以下是相关文件的第 19 行和第 20 行。这是我假设 Nginx 安装中包含的文件。我使用的唯一配置文件是 nginx.conf，我在其中添加了希望托管我的 Rails 应用程序的行。

```
# pass request body to here
upload_pass @fast_upload_endpoint; 
```

这是我第二次尝试对如何纠正这个错误进行广泛的网络搜索。我曾希望找到是否需要在 nginx.conf 中添加一些内容或在某处定义 upload_pass 的内容，但只找到了确实缺少该指令的解决方案。

我看了一下 nginx.conf。有很多语句被注释掉了。以下是那些不是：

```
http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    gzip  on;
    server_name_in_redirect off;
    port_in_redirect off;

    client_max_body_size 8m;
    client_body_buffer_size 128k;

    include upstreams/*.conf;
    include virtualhosts/*.conf;
    include third-party/*.conf;

    server {
        listen 8080;
        server_name www.lightbesandbox2.com;
        root /Sites/iktusnetlive_ror/public;
        passenger_enabled on;
    }
} 
```

另一个问题：我是否需要 Nginx 安装中包含的这些虚拟主机？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:42:32.460

看来您的 Nginx 没有使用[upload_pass](http://www.grid.net.ru/nginx/upload.en.html)模块编译，因此它不理解该指令。我不确定如何使用自制软件执行此操作，但您可以将其编译为：

`./configure --add-module=/path/to/upload_pass/source`

# python - Python：写入包中另一个目录的正确方法

> ID：11040569
> 
> 赞同：1
> 
> 时间：2012-06-14T20:04:38.287
> 
> 标签：python, packages, abstraction

当前使用以下包结构：

```
/package
    __init__.py
    final.py
    /write
        __init__.py
        write.py
    /data
        backup.txt
        backup1.txt
        backup2.txt 
```

final.py 导入write.py，应该可以回一个目录，将一系列备份的.txt 文件写入/data。

**final.py 应该能够在另一个调用**期间进入 /data并访问备份文件，因此需要将信息保存在 /data 中。

1.  我不确定这应该是包文件的正确层次结构吗？/write 如何在不使用绝对文件路径的情况下在与自身分开的目录分支中创建文本文件，以防整个项目文件被移动到服务器上。

2.  将retrieve.py添加到/data中是否会错误（一旦创建了backup.txt文件）它会以某种数据结构返回.txt文件并使/data成为一个包，或者（2）应该final.py直接输入 /data 并检索文本文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:22:47.103

1.  IMO，您不应该将其写入您的包裹中。设置您的代码，以便您写入可能在您的包之外的数据目录。许多代码部署策略假定您的代码将位于通常不可写的目录中。（例如，如果它是为常见的 linux 发行版打包的，代码将进入 /usr/lib/python.../yourpackage/ 并且数据将写入 /var/lib/yourpackage，或类似的东西。）
2.  将您的retrieve.py 放在.../data 之外，可能在.../read 目录中，或者放在final.py 旁边，具体取决于您需要的组织。

要写入任意位置，只需将完整路径传递给`open`. 例如，假设您将数据目录的路径存储在一个常量中：

```
DATA_PATH = '/var/lib/mypackage'

def backup():
    f = open(os.path.join(DATA_PATH, 'backup.txt'), 'w')
    f.write('some backup data...')
    f.close() 
```

# php - 检测php打开标签之外的文本

> ID：11040576
> 
> 赞同：2
> 
> 时间：2012-06-14T20:05:18.120
> 
> 标签：php

是否可以检测 php 打开和关闭标签之外的文本。大多数情况下，由于拼写错误，这些标签之外的文本。由于在这些标签之外有文本是“语法上”正确的，因此 php -l 成功退出

```
some random unwanted text due to a typo
<?
 //some useful code
?> 
```

我想检测在 php 打开标签之前有一些文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:28:29.270

PHP 标记本身之外的任何内容都可能属于客户端语言（如 JavaScript）中的 DOM 级交互，即使如此，一旦页面呈现，php 标记也不存在于 DOM，因为它们在相应的 HTML 变体中呈现说话的问题。如果你想真正找到`<? /*code*/ ?>`你之外的东西，可以查看[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)并打开文件服务器端，但你必须建立一些解析器逻辑的形式，它将查找 php 标签并查看它们的上方或下方（外部）是否有任何不合适的地方。

或者，您也可以仔细检查您的工作，以确保标签正确打开和关闭，并且没有任何东西像您所寻找的那样。

附带说明一下，您是否想弄清楚为什么您实际上想查看 PHP 标记之外的内容？

# windows - 从目录和子目录中删除超过 x 个文件的 Windows 脚本

> ID：11040580
> 
> 赞同：1
> 
> 时间：2012-06-14T20:05:25.630
> 
> 标签：windows

我正在寻找一个脚本，从最旧的第一个开始删除超过“n”个文件（可能是 5 个版本），将最新的 5 个文件保留在数百个目录中。这些目录都嵌套在一个根文件夹下。

这些是在夜间过程中创建的备份文件的副本，出于我不会深入讨论的原因，我目前无法控制备份系统来告诉它只保留 5 个副本，否则我会这样做。 .. 我不能只使用仅基于日期的任何东西，因为在某些情况下，最后 10 个版本是最后 10 天，但在其他情况下，备份是每周、每月甚至临时备份，因此日期可以追溯到 10 周/月在固定的一天或其他什么...我自己尝试过各种脚本，但看不到正确的...

我找到了一个适用于*单个*目录的目录，但我无法让它通过子目录并正常工作。

## 所以，如果我运行这个：

@echo off &setlocal 设置文件夹=d:\test\test1

推送“%文件夹%”

for /f "skip=5 tokens=*" %%i in ('dir /a:-ds /b /o:-d') do del "%%i"

流行音乐

* * *

它进入 'd:\test\test1' 目录并保留最新的 5 个文件并删除其余文件。无论该目录中有多少文件，它都有效。

所以现在，我真正想要的是从 'd:\test' 到下面的目录，并删除所有这些目录中除 5 个文件版本之外的所有文件版本。我已经尝试过在 dir 命令中使用 '/s' 的变体，但还没有找到一个完全可以做到的...

玩了几天没有成功...任何人有任何想法我对任何事情都持开放态度...谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:38:58.123

```
FOR /R "d:\test\test1\" %%G in (.) DO (
Pushd %%G

Echo now in %%G

for /f "skip=5 tokens=*" %%i in ('dir /a:-d-s /b /o:-d') do echo "%%i"

Popd ) 
```

# android - 当我们向下滚动时，在 ListView 中添加更多项目

> ID：11040582
> 
> 赞同：1
> 
> 时间：2012-06-14T20:05:35.740
> 
> 标签：android

我有一个自定义列表视图（带有两个图像和 5 个文本视图），当我第一次使用所有数据加载它时，我必须在其中显示 200 多个数据，然后它返回内存不足异常，以解决我想要的相同问题我们向下滚动列表视图直到列表的最后一项，然后它的应用程序再次将更多数据添加到同一个列表中。它运行相同，直到我们在列表视图中获得所有数据。请不要告诉我使用 EndlessAdapter，因为 EndlessAdapter 总是每 10 秒后下载项目。一段时间后，它也会返回内存不足。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:14:42.040

我建议每次用户滚动时检查 ListView 的第一个元素的位置。

```
ListView.getFirstVisiblePosition() 
```

如果它接近列表中元素的数量，您可以将项目添加到列表底部并从列表顶部删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:10:02.447

将列表[http://developer.android.com/reference/java/util/List.html](http://developer.android.com/reference/java/util/List.html)分配给您的 addapter，然后您可以调用 [item.add](http://developer.android.com/reference/java/util/List.html#add%28E%29)和[item.remove](http://developer.android.com/reference/java/util/List.html#remove%28int%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:10:40.027

请试试这个

[无尽的列表视图](https://github.com/commonsguy/cwac-endless)

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T20:12:21.357

关于内存不足，5个imageViews和5个textViews是不可能造成内存不足的。您可能将所有 200 张图像保存在一起，而不是使用某种缓存（如软引用和[LruCache](http://developer.android.com/reference/android/util/LruCache.html)）。适配器的重点是使用最少的内存显示大量项目（当然不是同时）。你可以看到，如果你通过滚动玩得足够多，即使是 Play Store（我仍然喜欢称之为 android Market）应用程序也会使用内存缓存......

有关列表视图的更多信息，请观看[此](http://www.youtube.com/watch?v=wDBM6wVEO70)

您可能还想在[此处](http://developer.android.com/training/displaying-bitmaps/index.html)阅读有关处理图像的更多信息。

无论如何，您可以将 getView 作为触发器（使用与 getCount() 值相比的位置参数）来确定何时加载更多项目，然后使用 notifyDatasetChanged 更新适配器（并更新 getCount() 值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T20:20:10.607

当用户向下滚动一次 ExpandableListView 时，我做了这样的事情来加载更多元素。

```
myListView.setOnScrollListener( new OnScrollListener() 
            {
                public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) 
                {
                    int lastVisibleElement = firstVisibleItem + visibleItemCount;
                    if(lastVisibleElement == totalItemCount)
                    {
                        //Load elements
                        myListAdapter.notifyDataSetChanged();
                    }
                } 
```

# sql - 在另一个选择语句中使用一个选择语句中选择的字段？

> ID：11040583
> 
> 赞同：0
> 
> 时间：2012-06-14T20:05:47.033
> 
> 标签：sql, select, join

我有这个查询，需要向它添加一个新字段。我可以做一堆连接来获取该字段，但宁愿加入一次，然后在所有其他选择语句中使用该字段。以下是查询：

```
select
  BCCR.DocumentNumber
  , BCCR.BCCRDebitMemo
  , BCCR.BCCRDate
  , BCCR.RejectFlag
  , BCCR.ManualEntry
  , BCCR.DebitTotal
  , coalesce(BCCRApproved.BCCRAmount,0) BCCRAmount
  , coalesce(BCCRRejected.BCCRRejectedAmount,0) BCCRRejectedAmount
  , coalesce(BCCRRejected.BCCRRejectedLines,0) BCCRRejectedLines
from
(select
  h.DocumentNumber
  , h.DebitMemo as BCCRDebitMemo
  , h.TransmissionDate as BCCRDate
  , 'N' RejectFlag
  , h.ManualEntry
  , h.DebitTotal
from chargebackheader h 
where h.TransmissionDate >= @BeginDate
and h.TransmissionDate <= @EndDate) BCCR left join
(select
  h.DocumentNumber
  , ROUND(SUM(d.ChargebackAmount),2) as BCCRAmount
from chargebackheader h join chargebackdetail d on
  h.DocumentBranchPlant=d.DocumentBranchPlant
  and h.DocumentNumber=d.DocumentNumber
  and h.DocumentType=d.DocumentType
where h.TransmissionDate >= @BeginDate
and h.TransmissionDate <= @EndDate
and d.RejectFlag = 'N'
group by
  h.DocumentNumber
  , h.DebitMemo
  , h.TransmissionDate
  , h.ManualEntry
  , h.DebitTotal) BCCRApproved on BCCR.DocumentNumber = BCCRApproved.DocumentNumber 
```

所以说我想在第二个 BCCR 选择语句中添加一个处理日期字段。我可以在那里加入。我还需要将此字段添加到第三个 select 语句中。我可以从第二个语句中取出该字段并将其添加到第三个语句中，而不必重做第三个语句中的连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:09:08.860

在我看来，您想使用存储过程。

[http://msdn.microsoft.com/en-us/library/aa174792(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa174792(v=sql.80).aspx)

然后，您可以简单地将`DECLARE`变量和`SELECT`结果放入其中。

[http://blog.sqlauthority.com/2011/03/18/sql-server-2008-2011-declare-and-assign-variable-in-single-statement/](http://blog.sqlauthority.com/2011/03/18/sql-server-2008-2011-declare-and-assign-variable-in-single-statement/)

分配变量后，您可以在存储过程的范围内随意使用它。

# sql - 从 2 个表中选择的简单 SQL（什么是联接？）

> ID：11040587
> 
> 赞同：0
> 
> 时间：2012-06-14T20:06:00.310
> 
> 标签：sql, join, multiple-tables

我是 SQL 新手。我从两个不同的表中获取结果有一个简单的问题。

我在数据库中有两个表。第一个表有一个带有 id 引用的列，它对应于第二个表中的行。我需要执行什么 SELECT 才能获得结果，以便 id 被第二个表中的所有值替换。为了可视化我正在讨论的表格：

```
TABLE_USERS
===========
id      username      group
--      --------      -----
1       jim           A
2       alice         A
3       brandon       B

TABLE_GROUPS
============
id      groupname         members
--      ---------         -------
A       designer          134
B       photographer      39

DESIRED_SELECTION
=================
id      username      group
--      --------      -----
1       jim           designer
2       alice         designer
3       brandon       photographer 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:07:16.783

你想要一个加入：

```
SELECT
    u.id,
    username,
    groupname
FROM
    TABLE_USERS AS u
LEFT JOIN TABLE_GROUPS AS g
    ON u.group = g.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T20:20:00.900

实际上，您确实想加入这两个表：

```
SELECT * FROM
    TABLE_USERS LEFT JOIN TABLE_GROUPS 
    ON TABLE_USERS.group = TABLE_GROUPS.id 
```

连接表的技巧是在两个表中找到必须匹配的值，并使用`on`告诉 SQL 匹配它们。此表有一个 ID 列可让您执行此操作 = 您将加入表，`ON`然后列出需要相等的值。

如果您不想要两个表中的所有列，您可以只列出最终查询中需要的列。这意味着`Select *`您列出了您想要的列，而不是 。如下所示，如果两个表中出现同名的列，则需要在表名前面加上，以便 SQL 知道您想要哪个值。

```
SELECT TABLE_USERS.ID, Username, Groupname 
  FROM TABLE_USERS 
     LEFT JOIN TABLE_GROUPS 
     ON TABLE_USERS.group = TABLE_GROUPS.id 
```

# node.js - 无法更新 mongo 文档中的嵌入项目（无方法更新）

> ID：11040591
> 
> 赞同：1
> 
> 时间：2012-06-14T20:06:14.257
> 
> 标签：node.js, mongodb, mongoose

我有一个看起来像这样的猫鼬模式，我可以很好地更新和查询：

```
// Subscriber Schema
var Subscriber = new Schema({
    'user': ObjectId,
    'level': { type: String, enum: [ 'sub', 'poster', 'blocked' ] }, //blocked means users has opted out of list
    'dateAdded': { type: Date, default: Date.now }
});

// Group Schema
var Group = new Schema({
    'groupEmail': { type: String, lowercase: true, validate: [validatePresenceOf, 'an email is required'], index: { unique: true } },
    'groupOwner': ObjectId,
    'groupName': String,
    'twitterFeed': String,
    'subscribers': [Subscriber],
    'createdAt': { type: Date, default: Date.now }
}); 
```

我正在尝试更新组文档中的订阅者，并更改其级别，然后保存更改。我可以使用以下方法找到该组：

```
Group.findOne({ _id: req.params.groupId }, function(err, g) 
```

拥有该组后，我想找到一个订阅者以便更新它。如果我尝试：

```
g.subscribers.update({ 'user': req.params.userId }, { level: newStatus }); 
```

我得到：

```
TypeError: Object { user: 4fc53a71163006ed0f000002,
  level: 'sub',
  _id: 4fd8fa225904a5451c000006,
  dateAdded: Wed, 13 Jun 2012 20:37:54 GMT },{ user: 4fda25ac00cd9bdc4f000004,
  level: 'sub',
  _id: 4fda270bbce9f8d058000005,
  dateAdded: Thu, 14 Jun 2012 18:01:47 GMT },{ user: 4fda2a634499dfd16e00000d,
  level: 'sub',
  _id: 4fda2a634499dfd16e00000e,
  dateAdded: Thu, 14 Jun 2012 18:16:03 GMT } has no method 'update' 
```

我尝试了更新、查找等的各种排列，但总是得到“没有方法”错误。我究竟做错了什么？我应该以不同的方式更新 Subscriber.level 吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:18:04.043

@eltoro 大部分是正确的，数组没有`update`方法，使用的建议`Group.update`很好，但是更新语法缺少`$`in `subscribers.$.level`。

```
Group.update(
    {_id: req.params.groupId, 'subscribers.user': req.params.userId}, 
    { 'subscribers.$.level': newStatus }, function(err, result) {}
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:13:01.310

我认为您收到错误是因为您在实例而不是模型上调用更新。

也许尝试这样的事情：

```
Group.update(
    {_id: req.params.groupId, subscribers.user: req.params.userId}, 
    { subscribers.level: newStatus }, function(err, result) {}
); 
```

# android - android NDK JNI loadLibrary 崩溃

> ID：11040594
> 
> 赞同：0
> 
> 时间：2012-06-14T20:06:18.423
> 
> 标签：android, android-ndk, java-native-interface

我的 Android 应用程序在我使用时崩溃

```
static {
    system.LoadLibrary("MySharedLib");
} 
```

这是我收到的唯一明显的错误消息：

> 无法将堆栈跟踪写入 /data/anr/traces.txt（6738 中的 5571）：没有这样的文件或目录

libMySharedLib.so 是从 ndk-build 生成的。我正在使用 powerVR SDK，因此我假设这个库是在内部预先加载的。

如果我将代码分离到不同的共享库中，我可以让它工作，但这违背了我需要的目的（所有数据、指针都存在于 MySharedLib 中，我想从 Java 调用 c++ 函数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T17:46:21.453

答案就像大海捞针。

确保你的所有 java JNI_OnLoad 和其他函数都包含在 extern "C" 中。简单的。

# jquery - jquery：如何在 HTML 中应用函数？

> ID：11040601
> 
> 赞同：0
> 
> 时间：2012-06-14T20:06:54.810
> 
> 标签：jquery

我是 jQuery 的新手。我有一个具有唯一 ID 的动态生成的行。我需要对每一行应用一个 jQuery 函数。

我的 jQuery 函数在页面加载后立即启动，而不是等待我点击。

```
<script type="text/javascript">
$(function popup() {
  $(this).hover(function() {
    $('div#pop-up').show();
  }, function() {
    $('div#pop-up').hide();
  });
});
</script> 
```

我希望 jQuery popup() 函数在我单击“tr”行时执行它的操作，并且只影响该特定行。

```
<tr id="abc" onclick="popup()">
  <td>blah</td>
</tr>
<tr id="def" onclick="popup()">
  <td>blah</td>
</tr>
<tr id="ghi" onclick="popup()">
  <td>blah</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:10:50.050

使用选择器指定函数应应用于哪些元素，然后将该选择传递给适当的 jQuery 方法：

```
$('tr').click(
    function(){
        popup();
    }); 
```

在上面的函数`popup()`中，只有当有人点击一个`tr`元素（或其子元素，因为点击会冒泡）时才会调用该函数。

`on()`如果要在初始 DOMReady 事件之后动态添加任何`tr`元素，您也可以使用：

```
$('tbody').on('click','tr',function(){
    popup();
}); 
```

事件绑定到`on()`最接近动态添加的元素的元素，并且该方法被传递一个事件类型（`click`）和可选的选择器（`tr`），以确定哪些元素将触发在方法。

但请记住，根据您用于弹出窗口的元素，an`id`只能用于文档中的一个***唯一***元素。

参考：

*   [jQuery API 选择器索引](http://api.jquery.com/category/selectors/)。
*   [`on()`](http://api.jquery.com/on/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:09:11.387

像这样调用 Onclick`this`

```
<tr id="abc" onclick="popup(this)">
  <td>blah</td>
</tr> 
```

然后`popup`改为

```
function popup(elem) {
  $(elem).hover(function() {
    $('div#pop-up').show();
  }, function() {
    $('div#pop-up').hide();
  });
} 
```

你的语法

```
$(function popup() { 
```

不正确应该是

```
$(function(){
     function popup() {
     ....
     .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:12:16.753

将类添加到“ *popup* ”元素：

```
<tr id="abc" class="pop-up-class" >
  <td>blah</td>
</tr>
<tr id="def" class="pop-up-class" >
  <td>blah</td>
</tr>
<tr id="ghi" class="pop-up-class" >
  <td>blah</td>
</tr> 
```

然后在你的脚本中：

```
$(function() {
  $('.pop-up-class').hover(function() {
    $('div#pop-up').show();
  }, function() {
    $('div#pop-up').hide();
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T20:13:28.720

我猜您的意思是将`click`事件绑定到 TR 行，而不仅仅是调用该函数。将函数绑定到 DOM 元素的正确方法是将回调函数绑定到它们。这允许您为一组元素定义一个回调函数，然后在触发事件的元素的上下文中执行代码。当一个事件被触发时，绑定的回调被执行，并`this`成为 DOM 元素。

此外，您的 jQuery 代码应该被包装在一个事件中，该事件将在 DOM 准备好时触发；此时可以确定您的 DOM 已完成加载，确保您想要绑定事件的元素存在。

最后，您可以像这样重写您的回调：

```
<script type="text/javascript">
$(document).ready(function(){
    $("tr").on("click", function() {
    $(this).hover(function() {
        $("div#pop-up").show();
      }, function() {
        $("div#pop-up").hide();
      });
    });
});
</script> 
```

更多解释和示例：[http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

你还应该知道：

*   如果您需要根据悬停的元素采取行动，则`hover`事件内部也将是上下文元素。`this`
*   jQuery`.on()`会将事件绑定到匹配选择器的元素，即使它们还没有在 DOM 中，允许您动态插入元素并且仍然将事件绑定到它们。

# vb.net - 在 VB 应用程序中使用 WCF 服务

> ID：11040603
> 
> 赞同：0
> 
> 时间：2012-06-14T20:06:59.810
> 
> 标签：vb.net, wcf

纠正我如果我做错了，

我刚刚开始检查 WCF 服务，因此使用两种方法 IService 创建了一个示例 WCF 服务应用程序

```
 [ServiceContract]
public interface IService1
{

    [OperationContract]
    string GetData(int value);

    [OperationContract]
    CompositeType GetDataUsingDataContract(CompositeType composite);

    // TODO: Add your service operations here
} 
```

并想在 VB 应用程序中使用此服务，因此使用 Servicereference>>Advanced>>AddWebreference 添加了我的服务

之后尝试在 VB 表单中单击一个简单的按钮来调用服务中的方法

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As    
   System.EventArgs) Handles Button1.Click
    Dim client As New localhost.Service1
    client.GetData(10, True)
End Sub 
```

但是当我试图执行按钮时，点击我得到超时异常。有人可以帮助我解决我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:18:27.517

您只需要对 WCF 服务的服务引用，Web 引用适用于 ASMX。

此外，如果您有 Visual Studio 2010，在工具下，您将看到一个内置的“WCF 测试客户端”来验证您的服务。

最后，使用服务引用很方便，但会生成很多不必要的文件（尤其是如果您使用源代码管理），因此建议使用代理类形式的单个文件（.vb 或 .cs）。这是通过 svcutil.exe 自动生成的（有关详细信息，请参见[此处）。](http://msdn.microsoft.com/en-us/library/ms733133.aspx)

# python - 如何根据字典中值的百分比相似性来唯一化字典列表

> ID：11040604
> 
> 赞同：0
> 
> 时间：2012-06-14T20:07:02.557
> 
> 标签：python, list, dictionary, unique, similarity

我有一个字典列表，其属性可能与列表中的其他字典重复或相似。我想使用相似度比较函数来唯一化这个列表。如果任何 dicts 对于键“greeting”的值在一定百分比内相似，则只应保留一个。

例如，在此列表中，我只希望保留一个“hello world”：

```
list = [{"greeting":"HELLO WORLD!", ...}, {"greeting":"Hello Mars", ...}, {"greeting":"Hello World!!!", ...}, {"greeting":"hello world", ...}] 
```

唯一化后，结果将是：

```
list = [{"greeting":"HELLO WORLD!", ...}, {"greeting":"Hello Mars", ...} 
```

应从列表中删除所有其他具有类似问候语的字典。保留哪些类似的字典并不重要。

这是[Nadia Alramli](https://stackoverflow.com/a/1471603/192298)的一个函数：

```
def similar(seq1, seq2):
    return difflib.SequenceMatcher(a=seq1.lower(), b=seq2.lower()).ratio() > 0.9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:53:37.623

使用确定唯一性的函数，您可以执行以下操作：

```
import difflib

def similar(seq1, seq2):
    return difflib.SequenceMatcher(a=seq1.lower(), b=seq2.lower()).ratio() > 0.9

def unique(mylist, keys):
    temp = mylist[:]
    for d in mylist:
        temp.pop(0)
        [d2.pop(i) for i in keys if d.has_key(i)
         for d2 in temp if d2.has_key(i) and similar(d[i], d2[i])] 
    return mylist 
```

请注意，这将修改您的字典：

```
mylist = [{"greeting":"HELLO WORLD!"}, {"greeting":"Hello Mars"}, {"greeting":"Hello World!!!"}, {"greeting":"hello world"}]
unique(mylist, ['greeting'])

print mylist 
```

输出：

```
[{'greeting': 'HELLO WORLD!'}, {'greeting': 'Hello Mars'}, {}, {}] 
```

# c# - 如何从 winform (c#) 应用程序生成 HTML

> ID：11040606
> 
> 赞同：1
> 
> 时间：2012-06-14T20:07:17.457
> 
> 标签：c#, html, winforms

我需要创建一个包含 HTML（表格等）的日志文件。在普通的 winforms 应用程序中似乎不支持 HtmlTextWriter，它是为 ASP.NET 设计的。事实是否如此，如果是这样，哪些类可用于生成 HTML？我试图使用 FileStream/StreamWriter 但它被“非法字符”阻塞。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T20:09:44.540

[`HtmlTextWriter`](http://msdn.microsoft.com/en-us/library/system.web.ui.htmltextwriter.aspx)可用于 WinForms 应用程序，只是默认情况下不可用。您必须`System.Web`在 WinForms 项目中添加对才能使用它的引用。

# .htaccess - .htaccess 强制 HTTPS

> ID：11040607
> 
> 赞同：4
> 
> 时间：2012-06-14T20:07:32.900
> 
> 标签：.htaccess, redirect, https

我正在尝试在域上强制使用 HTTPS。它必须使用通过域名而不是端口号工作的方法来完成（由于主机结构/设置）。

我最接近的尝试是：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mydomain.com$
RewriteRule ^.*$ https://www.mydomain.com/$1 [R=301,L] 
```

这在地址栏中输入“mydomain.com”时有效，自动重定向到“https://mydomain.com”但是当我输入“www.mydomain.com”时它不起作用。我认为这是一个语法问题，因为我对 htaccess 非常陌生，并且花了大约 4 个小时试图从其他代码创建解决方案。

有指针的机会吗？

* * *

使设置更易于理解。

`/public_html/`- 此文件夹中的所有文件都与`www.mydomain.com`
`/public_html/subfolder`- 这些文件夹包含的文件也相关`mydomain.com`
`/public_html/subdomain`- 这些文件夹包含与`www.myotherdomain.com`

我的其他域相关的文件，它们`mydomain.com`是要在主机的 cpanel 中列出的子域。
例如：`subdomain.mydomain.com`与 相同`www.myotherdomain.com`。

希望这可以清除结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:12:26.237

只要向确切的域发出请求`mydomain.com`（这就是 RewriteCond 正在测试的内容），就会发生重定向。它不适用于任何其他域，也不会检测 HTTPS。改用这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?mydomain.com$
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://www.mydomain.com/$1 [R=301,L] 
```

# c# - Stylecop 不明白

> ID：11040610
> 
> 赞同：2
> 
> 时间：2012-06-14T20:07:51.417
> 
> 标签：c#, documentation, stylecop, inheritdoc

我正在尝试使用 Stylecop 4.7.31 我有一个项目，其中声明了一个接口：

```
public interface IRmlManager
{
    /// <summary>
    /// Adds the notification.
    /// </summary>
    /// <param name="notificationData">The notification data.</param>
    void AddNotification(RmlNotificationData notificationData);
} 
```

和另一个项目，其中接口的实现：

```
public class RmlManager : IRmlManager
{
........
    /// ???
    void AddNotification(RmlNotificationData notificationData);
........
} 
```

如果我使用`<inheritdoc />`而不是 ???，Stylecop 会忽略它并产生错误：

```
BusinessLogic\RmlManager.cs(39,1): error : SA1604: The documentation header must have a summary tag.
BusinessLogic\RmlManager.cs(39,1): error : SA1611: The documentation header must contain param tags matching the element's parameter list. 
```

有什么想法我做错了吗？据谷歌称，Stylecop 大约从 4.1 版本开始支持这个标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:14:33.993

我不想告诉你，但是 StyleCop 支持 Inheritdoc，根据[http://stylecop.codeplex.com/workitem/6637](http://stylecop.codeplex.com/workitem/6637)。

所以，这只能被假定为一个特定的实例（即它确实无法理解inheritdoc，只是这个特定的例子是一个错误行为）。

鉴于 inheritdoc 已被普遍接受，我建议您在 stylecop 特定列表上询问（在[http://stylecop.codeplex.com/discussions](http://stylecop.codeplex.com/discussions)上的 codeplax 上的他们网站上打开讨论），并可能制作一个重现案例并打开一个错误。

# java - QueryStringBindable 用于自定义枚举

> ID：11040611
> 
> 赞同：6
> 
> 时间：2012-06-14T20:08:00.060
> 
> 标签：java, enums, playframework, query-string

我已经定义了一个`Format`实现`QueryStringBindable`. 我想我已经正确实现了它，但是在我的路由文件中，我无法将我的类型指定为路由参数，因为编译器找不到它，而且我不知道如何将它导入到路由文件中。

这是枚举：

```
package web;

import java.util.Map;

import play.libs.F;
import play.mvc.QueryStringBindable;

public enum Format implements QueryStringBindable<Format> {
    Html,
    Pdf,
    Csv;

    private Format value;

    @Override
    public F.Option<Format> bind(String key, Map<String, String[]> data) {
        String[] vs = data.get(key);
        if (vs != null && vs.length > 0) {
            String v = vs[0];
            value = Enum.valueOf(Format.class, v);
            return F.Option.Some(value);
        }
        return F.Option.None();
    }

    @Override
    public String unbind(String key) {
        return key + "=" + value;
    }

    @Override
    public String javascriptUnbind() {
         return value.toString();
    }
} 
```

这是我的路线：

```
GET     /deposits                                    controllers.Deposits.index(selectedAccountKey: Long ?= 0, format: Format ?= Format.Html) 
```

如何告诉编译器我的枚举？谢谢！

**编辑**

我还尝试按照其他帖子中的建议在 Build.scala 中添加类型的路径：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  routesImport += "web.Format",
  resolvers += Resolver.url("My GitHub Play Repository", url("http://www.joergviola.de/releases/"))(Resolver.ivyStylePatterns)
) 
```

我改变了它并重新启动了我的服务器，但它似乎没有任何区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-14T03:29:26.277

我遇到了同样的问题，我终于发现它无法按原样解决。

通过阅读 for 的文档`PathBindable`，`QueryStringBindable`我发现 play 框架**需要**Bindable 提供一个 No Argument 公共构造函数。`enum`根据定义，这在 Java 中是不可能的。

我想为您提供与另一个（更新的）问题相同的解决方案。我只是将枚举包装到一个小的 Wrapper 类中，该类实现`QueryStringBindable`或`PathBindable`.

[播放框架 - 在路由中绑定枚举](https://stackoverflow.com/questions/21468483/play-framework-bind-enum-in-routes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T01:11:12.337

在路由文件中使用限定名，即 web.Format

# c++ - C++ 4.8 运行时堆损坏

> ID：11040617
> 
> 赞同：2
> 
> 时间：2012-06-14T20:08:27.847
> 
> 标签：c++, qt, heap-memory, heap-corruption

我们正在使用 Qt 4.8，但我真的相信这与它无关（但我指出以防万一）

我们创建了这个类，它编译得很好，但在运行时崩溃并出现以下错误：

***错误：53:01 Windows 在 C_plus_plus_QT_project.exe 中触发了断点。这可能是由于堆损坏，这表明 C_plus_plus_QT_project.exe 或其已加载的任何 DLL 中存在错误。这也可能是由于用户在 C_plus_plus_QT_project.exe 具有焦点时按 F12。输出窗口可能有更多诊断信息。***

问题是 QFrame m_FrameHeader; 在 .h 文件和我们去做的类构造函数上声明：

```
QFrame m_FrameHeader(this); 
```

老实说，我很惊讶这个编译。如果这将是一个测试并且有人会问我结果是什么，我会说这不会编译，因为变量重新定义、歧义或类似的东西。但这完全会在运行时编译并崩溃，并出现前面提到的堆损坏错误。

谁能解释它为什么会编译，并且当它崩溃时，它会作为堆损坏错误而不是堆栈 [whatever] 错误而崩溃？为什么是堆而不是堆栈？我已经解决了这个问题（它构建正常，运行正常）但我无法解释为什么它的行为是这样而不是我所期望的（编译错误，如果那是错误的，我会期望它是堆栈错误，而不是堆）

我们预计代码会很糟糕，因为我们现在正在玩 Qt，所以我们没有关注它的质量。请忽略它（除非您认为这是手头问题的一部分，在这种情况下，请尽可能多地指出，哈哈）。

我们的环境：Qt 4.8.2、VS2010、Windows 7 x64。

这是.h

```
#include <QtGui\QWidget>
#include <QtGui\QLabel>
#include <QtGui\QHBoxLayout>
#include <QtGui\QVBoxLayout>
#include <QtGui\QGridLayout>
#include <QtGui\QFrame>

class Quiniela : public QWidget
{
private:
    QLabel m_Fecha;
    QLabel m_Titulo;
    QLabel m_Hora;
    QHBoxLayout m_HeaderLayout;
    QFrame m_FrameHeader;
    QHBoxLayout m_SorteosLayout;
    QHBoxLayout m_EntesLayout;
    QGridLayout m_MainLayout;
public:
    Quiniela(int w = 800, int h = 600,QWidget* parent = 0);
    ~Quiniela();
}; 
```

这是.cpp

```
#include "Quiniela.h"
#include "FramePrincipal.h"
#include "Utils.h"

Quiniela::Quiniela(int w, int h, QWidget * parent)
    : QWidget(parent)
{
    Utils objUtil;
    QFont fontHead("Arial", 24, QFont::Black);
    QFont fontSorteos("Arial", 20, QFont::Normal);
    resize(w,h);
    setWindowTitle("QUINIELA");
    QFrame m_FrameHeader(this);
    m_FrameHeader.setGeometry(0,0,800,50);
    m_Fecha.setText(objUtil.getDate());
    m_Fecha.setFont(fontHead);
    m_Titulo.setText("*** QUINIELA ***");
    m_Titulo.setFont(fontHead);
    m_Hora.setText(objUtil.getTime());
    m_Hora.setFont(fontHead);
    m_HeaderLayout.addWidget(&m_Fecha,0,Qt::AlignLeft);
    m_HeaderLayout.addWidget(&m_Titulo,0,Qt::AlignCenter);
    m_HeaderLayout.addWidget(&m_Hora,0,Qt::AlignRight);
    m_HeaderLayout.setAlignment(Qt::AlignTop);
    m_FrameHeader.setLayout(&m_HeaderLayout);
}

Quiniela::~Quiniela()
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:22:13.037

您必须为 Qt 对象使用指针（Qt 通过指针维护其对象的父子链接，并在父删除时销毁子对象）。在您的示例中， m_FrameHeader 在构造函数返回时被销毁，因为它被声明为局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:29:23.287

没有编译器错误，因为`QFrame m_FrameHeader(this)`声明了一个名为 m_FrameHeader 的新（本地）变量。这*应该*会从编译器生成一个警告，表明您正在隐藏同名的类变量。你确定没有？无论如何，崩溃的发生是因为 m_FrameHeader 在构造函数返回后被销毁，但它仍然被未销毁的东西引用。比如m_HeaderLayout。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T02:48:36.550

您的问题是删除未直接在堆上分配的对象。

最初，您放在`Quiniela`类中的小部件是无父的。

最终，您将它们安装在`m_headerLayout`布局中，它们将被重新设置为您设置布局的小部件。

该行将和的`m_FrameHeader.setLayout(&m_HeaderLayout)`父级设置为。`m_Fecha``m_Titulo``m_Hora``m_FrameHeader`

现在请注意，这`m_FrameHeader`是您在行中定义的本地堆栈分配变量`QFrame m_FrameHeader(this)`。它在构造函数的末尾超出范围`Quiniela`。当一个带有孩子的 QObject 被销毁时，它将调用`delete`所有的孩子。然而，那些孩子，具体来说`m_Fecha`，`m_Titulo`并`m_Hora`没有在堆上使用`new`.

即使您修复了隐藏班级成员的错误`m_FrameHeader`，您仍然无法修复崩溃。它只会延迟到 的实例销毁`Quiniela`。

修复它的唯一方法是分配堆上的所有小部件。您的小部件应如下所示：

```
class Quiniela : public QWidget
{
private:

    QLabel * m_Fecha;
    QLabel * m_Titulo;
    QLabel * m_Hora;
    QHBoxLayout * m_HeaderLayout;
    QFrame * m_FrameHeader;
    QHBoxLayout * m_SorteosLayout;
    QHBoxLayout * m_EntesLayout;
    QGridLayout * m_MainLayout;
    ...

}; 
```

您不需要显式删除任何这些对象。Qt 会为你做这件事，因为它们最终会被重新定义为 Quiniela 小部件实例。

# php - 使用 php DOM 获取元素长度

> ID：11040621
> 
> 赞同：0
> 
> 时间：2012-06-14T20:09:16.893
> 
> 标签：php

我被这个困住了。我尝试使用 php dom 来解析一些 html 代码。我如何才能知道我在 for 循环中迭代的当前元素有多少个子元素？

```
<?php
$str='
<table id="tableId">
<tr>
    <td>row1 cell1</td>
    <td>row1 cell2</td>
</tr>
<tr>
    <td>row2 cell1</td>
    <td>row2 cell2</td>
</tr>
</table>
';

$DOM = new DOMDocument;
$DOM->loadHTML($str);   // loading page contents
$table = $DOM->getElementById('tableId');   // getting the table that I need
$DOM->loadHTML($table);     

$tr = $DOM->getElementsByTagName('tr');     // getting rows

echo $tr->item(0)->nodeValue;   // outputs row1 cell1 row1 cell2 - exactly as I expect with both rows
echo "<br>";
echo $tr->item(1)->nodeValue;   // outputs row2 cell1 row2 cell2

// now I need to iterate through each row to build an array with cells that it has
for ($i = 0; $i < $tr->length; $i++)
{
echo $tr->item($i)->length;     // outputs no value. But how can I get it?
echo $i."<br />";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:29:41.290

这将为您提供所有[子节点](http://php.net/manual/en/class.domnode.php#domnode.props.childnodes)：

```
$tr->item($i)->childNodes->length; 
```

...但是：它将包含`DOMText`带有空格等的节点（因此计数为 4）。如果您不一定需要长度，只想遍历所有节点，您可以这样做：

```
foreach($tr->item($i)->childNodes as $node){
    if($node instanceof DOMElement){
        var_dump($node->ownerDocument->saveXML($node));
    }
} 
```

如果您只需要一定长度的元素，您可以这样做：

```
$x = new DOMXPath($DOM);
var_dump($x->evaluate('count(*)',$tr->item($i))); 
```

你可以这样做：

```
foreach($x->query('*',$tr->item($i)) as $child){
    var_dump($child->nodeValue);
} 
```

通过 foreach-ing`->childNodes`我更喜欢简单的“数组构建”。请记住，您只需`foreach`通过`DOMNodeList`'s 就好像它们是数组一样，可以节省很多麻烦。

从表中构建一个简单的数组：

```
$DOM = new DOMDocument;
$DOM->loadHTML($str);   // loading page contents
$table = $DOM->getElementById('tableId'); 
$result = array();
foreach($table->childNodes as $row){
   if(strtolower($row->tagName) != 'tr') continue;
   $rowdata = array();
   foreach($row->childNodes as $cell){
       if(strtolower($cell->tagName) != 'td') continue;
       $rowdata[] = $cell->textContent;
   }
   $result[] = $rowdata;
}
var_dump($result); 
```

# java - 使用数组和列表的正确循环结构

> ID：11040625
> 
> 赞同：0
> 
> 时间：2012-06-14T20:09:36.410
> 
> 标签：java, arrays, list, for-loop

在这个简单的示例中，我想创建一个字符串数组，其中填充了每个人在我的数据库中的第一个和最后一个。我知道我遗漏了一些非常明显的东西，因为我一直`i`在以下循环方法中覆盖。第二只眼睛肯定会有所帮助。

```
 /**
 * 
 * @return
 */
public String[] buildFullNameContainer(){

    List<Person> allPeople = Person.findAllPeople();
    String[] peopleContainer = new String[] {""};
    String fullName = "";

        for (int i = 0; i < peopleContainer.length; i++) {
            for (Person person : allPeople) {
                fullName = person.getFirstName() + " " + person.getLastName();  
                peopleContainer[i] = fullName; 

            }
        }
    return peopleContainer;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:13:34.910

您的数组始终只有一个元素 - 您应该将其创建为与列表相同的长度。此外，你有两个无缘无故的嵌套循环，我认为`fullName`变量没有意义。这是我要使用的代码：

```
String[] peopleContainer = new String[allPeople.size()];

for (int i = 0; i < peopleContainer.length; i++) {
    Person person = allPeople.get(i);
    peopleContainer[i] = person.getFirstName() + " " + person.getLastName();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T20:12:47.163

代替

```
String[] peopleContainer = new String[] {""}; 
```

和

```
String[] peopleContainer = new String[allPeople.size()]; 
```

* * *

另外，编辑你的循环如下：

```
for(int i = 0; i < peopleContainer.length; i++)
{
    Person person = allPeople.get(i);
    fullName = person.getFirstName() + " " + person.getLastName();  
    peopleContainer[i] = fullName;  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:13:49.653

我认为这需要改变：

```
String[] peopleContainer = new String[] {""}; 
```

到：

```
String[] peopleContainer = new String[allPeople.size()]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T20:15:54.117

您正在循环您的结果数组，而不是您的源数据集合。您必须首先正确调整数组的大小，然后循环遍历数组或列表的大小。不需要嵌套的 for。

```
public String[] buildFullNameContainer(){

    List<Person> allPeople = Person.findAllPeople();
    String[] peopleContainer = new String[allPeople.size()];
    for (int i = 0; i < peopleContainer.length; i++) {
        Person person = allPeople.get(i);
        String fullName = person.getFirstName() + " " + person.getLastName();  
        peopleContainer[i] = fullName; 
    }
return peopleContainer;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T20:16:46.470

试试这个。

```
 List<Person> allPeople = Person.findAllPeople();
    String[] peopleContainer = new String[allPeople.size()];

    for (int i=0;i < allPeople.size();i++;) {
          Person person=allPeople.get(i);
          fullName = person.getFirstName() + " " + person.getLastName();  
          peopleContainer[i] = fullName; 
    } 
```

# python - Pandas DataFrame 将列添加到索引而不重置

> ID：11040626
> 
> 赞同：58
> 
> 时间：2012-06-14T20:09:38.423
> 
> 标签：python, dataframe, pandas

如何添加`'d'`到下面的索引而不必先重置它？

```
from pandas import DataFrame
df = DataFrame( {'a': range(6), 'b': range(6), 'c': range(6)} )
df.set_index(['a','b'], inplace=True)
df['d'] = range(6)

# how do I set index to 'a b d' without having to reset it first?
df.reset_index(['a','b','d'], inplace=True)
df.set_index(['a','b','d'], inplace=True)

df 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-08-08T02:50:06.007

我们添加了一个`append`选项`set_index`。试试看。

命令是：

```
df.set_index(['d'], append=True) 
```

（我们不需要指定 ['a', 'b']，因为它们已经在索引中并且我们正在附加到它们）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T15:45:35.037

您的代码无效，reset_index 在我的熊猫版本（0.8.1）中没有就地参数。以下实现了您想要的，但可能有一种更优雅的方式，但是您没有提供足够的信息来说明为什么要避免使用 reset_index。

```
df2.index = MultiIndex.from_tuples([(x,y,df2['d'].values[i]) for i,(x,y) in enumerate(df2.index.values)]) 
```

高温高压

# android - 无法在主线程中创建处理程序？

> ID：11040627
> 
> 赞同：1
> 
> 时间：2012-06-14T20:09:41.853
> 
> 标签：android, handler

执行以下代码时，用户的手机出现错误，我正在检查用户当前是否正在通话，然后再运行`AsyncTask`Web 服务调用。我这样做的原因是因为有些人在通话时失去了互联网连接，所以我每 5 秒检查一次，看看他们是否在通话。如果不是，则调用 AsyncTask

```
do{
        Handler handler = new Handler();
        handler.postDelayed(new Runnable(){

            @Override
            public void run() {

                 onCall = ((TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE))
                        .getCallState() != TelephonyManager.CALL_STATE_IDLE;
                 if(!onCall){
                     new CallRegWS().execute();
                 }  
            }
        },5000);
    }while(onCall); 
```

我没有完整的堆栈跟踪，只有这向我显示了错误

```
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

显然不是太有帮助，但这就是我所要做的。他们不断收到该错误，因此它必须在我创建处理程序时发生。

所有这一切都是在`main thread`所以我不知道问题是什么，关于如何解决这个问题的任何见解？

**更新** 这是从服务调用的，并且该方法位于单独的类中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T20:29:01.300

尝试`Handler handler = new Handler(Looper.getMainLooper());`

另外，请参阅有关此错误的帖子：http: [//levinotik.com/loopers-handlers-runtimeexceptions-explained/](http://levinotik.com/loopers-handlers-runtimeexceptions-explained/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T23:11:17.650

首先，您必须知道，处理程序会自动附加到文档中指定的创建线程：

**处理程序类概述**

> Handler 允许您发送和处理与线程的 MessageQueue 关联的 Message 和 Runnable 对象。每个 Handler 实例都与单个线程和该线程的消息队列相关联。当您创建一个新的处理程序时，它会绑定到创建它的线程的线程/消息队列——从那时起，它会将消息和可运行对象传递到该消息队列并在它们从消息中出来时执行它们队列。[处理程序 | 安卓开发者](http://developer.android.com/reference/android/os/Handler.html)

现在，考虑到这一点，并且由于当前线程没有消息队列，为了正常工作，线程需要一个实际的“队列”，这正是系统通过调用 Looper.prepare 告诉你要做的事情() 您正在创建的线程中创建消息循环器，因为默认情况下线程没有文档中提到的消息循环器：

**Looper 类概述**

> 用于为线程运行消息循环的类。默认情况下，线程没有与之关联的消息循环；要创建一个，请在要运行循环的线程中调用 prepare()，然后 loop() 让它处理消息，直到循环停止。[活套 | 安卓开发者](http://developer.android.com/reference/android/os/Looper.html)

换句话说，以简单的方式，主 UI 确实已经准备好消息队列，这就是为什么在“onCreate、onStart、onResume 等...”中调用 new Handler() 时看不到该错误的原因，但是对于创建的任何工作线程，系统需要一个队列来在使用处理程序时将消息发送到，尽管代码没有显示它，但我敢打赌，代码正在工作线程中执行，无论是普通线程还是 AsyncTask 的 doInBackground 方法，这就是是什么导致了错误，为了避免它记得总是在从工作线程创建处理程序之前调用 Looper.prepare。

希望这可以帮助。

问候！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T20:17:47.513

你怎么知道这是在主线程上运行的？何时何地调用它？不要在使用之前创建处理程序，而是在 Activity 或 Service 的 onCreate 方法中创建它（取决于它是什么）。然后在你的 onDestroy 中将值设为空。

# python - 记忆一个 NumPy 向量化函数

> ID：11040631
> 
> 赞同：2
> 
> 时间：2012-06-14T20:09:58.157
> 
> 标签：python, numpy

我有一个函数**is_prime(n)**如果*n*是素数则返回*True ，否则返回**False*。在 NumPy 中，我正在循环，检查数组是否包含素数，并且数组的开头在每次迭代中都是相同的，所以我想**记住 is_prime(n)**函数以避免大量不必要的计算。

 ****因为我有一个数组，所以我想对**is_prime(n)**进行矢量化，以便我可以将它逐个元素地应用于数组，NumPy 样式。我使用 NumPy 教程中的一行代码（稍后显示）

我还使用了我在网上找到的一个记忆模板：

```
def memoize(function):
    cache = {}
    def decorated_function(*args):
        if args in cache:
            return cache[args]
        else:
            val = function(*args)
            cache[args] = val
            return val
    return decorated_function 
```

然后：

```
is_prime = memoize(is_prime) 
```

**但是**，如果我**现在**矢量化记忆的**is_prime**函数，V_prime 现在是否正确记忆？：

```
V_prime = np.vectorize(is_prime) 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T20:25:57.870

好吧，让我们测试一下。

```
import numpy as np

def test(input):
    return input

def memoize(function):
    cache = {}
    def decorated_function(*args):
        if args in cache:
            print 'cached'
            return cache[args]
        else:
            print 'not cached'
            val = function(*args)
            cache[args] = val
            return val
    return decorated_function

test = memoize(test)
print test(9)
print test(9)
test = np.vectorize(test)
print test(9)
print test(10)
print test(10) 
```

我在我的机器上得到这个。

```
not cached
9
cached
9
cached
cached
9
not cached
10
cached
10 
```

所以是的，它是 memoize，在我的机器上使用 numpy 1.6.1****

# python - PyQt4 - 标签中的断字

> ID：11040635
> 
> 赞同：0
> 
> 时间：2012-06-14T20:10:17.750
> 
> 标签：python, qt4, pyqt4, hyphenation

我有很多字符串，例如：

```
"Hy~~phen~~a~~tion by Com~~put~~er" 
```

并希望在标签中显示它们。“~~”标记了一个断字点，因此不应显示但用于断字。

有什么方法可以为 QT4 标签启用断字，如果是这样，我该如何标记应该允许断字的点？

目标基本上是具有相同的行为，就像我将 ~~ 与“-”交换一样，但“-”仅在发生实际换行时显示。

例如：

```
Hyphena-
tion by
Compu-
ter 
```

Qt4有可能吗？

# python - 用芹菜包裹的织物任务的标准输出和标准错误

> ID：11040637
> 
> 赞同：1
> 
> 时间：2012-06-14T20:10:22.313
> 
> 标签：python, django, celery, fabric

我正在运行一个简单的任务，从 django 视图触发：

```
task = mock_deploy.delay() 
```

mock_deploy 定义为：

```
from celery.decorators import task as ctask
from project.fabscripts.task.mock import *

@ctask(name="mock_deploy")
def mock_deploy():
    print "hi form celery task b4 mockdeploy 1234"
    output = execute(mock_deploy2)
    return "out: %s" % (output) 
```

而fabric任务本身定义为：

```
@task
def mock_deploy2():
    lrun("ls -l /")
    lrun("ifconfig eth0")
    # i need to get the full output from those commands and save them to db 
```

现在......我试图替换标准输出，覆盖结构执行功能：

```
def execute(task):
    output = StringIO()
    error = StringIO()
    sys.stdout = output
    sys.stderr = error
    task()
    sys.stdout = sys.__stdout__
    sys.stderr = sys.__stderr__
    return (output.getvalue(), error.getvalue()) 
```

我试图在织物任务中替换标准输出。不管我做了什么，我得到的唯一输出是第一行“面料想要做什么”

```
out: [localhost] local: ls -l / 
```

然后， ls 命令的整个输出在 celery 日志中打印得非常好。除了缺少一行 out: [localhost] local: ls -l / `9the one 我设法得到作为输出）

```
[2012-06-14 21:33:56,587: DEBUG/MainProcess] TaskPool: Apply <function execute_and_trace at 0x36710c8> (args:('mock_deploy', '2a90d920-130a-4942-829b-87f4d5ebe80f', [], {}) kwargs:{'hostname': 's16079364', 'request': {'retries': 0, 'task': 'mock_deploy', 'utc': False, 'loglevel': 10, 'delivery_info': {'routing_key': u'celery', 'exchange': u'celery'}, 'args': [], 'expires': None, 'is_eager': False, 'eta': None, 'hostname': 's16079364', 'kwargs': {}, 'logfile': None, 'id': '2a90d920-130a-4942-829b-87f4d5ebe80f'}})
[2012-06-14 21:33:56,591: DEBUG/MainProcess] Task accepted: mock_deploy[2a90d920-130a-4942-829b-87f4d5ebe80f] pid:22214
hi form celery task b4 mockdeploy 1234
total 3231728
-rw-r--r--   1 root root 3305551148 2012-06-13 14:43 dumpling.sql
drwxr-xr-x   2 root root       4096 2012-05-09 17:42 bin
drwxr-xr-x   4 root root       4096 2012-02-14 15:21 boot
drwxr-xr-x   2 root root       4096 2012-03-09 14:10 build
drwxr-xr-x   2 root root       4096 2010-05-11 19:58 cdrom
-rw-------   1 root root    2174976 2012-05-23 11:23 core
drwxr-xr-x  15 root root       4080 2012-06-11 12:55 dev
drwxr-xr-x 135 root root      12288 2012-06-14 21:15 etc
drwxr-xr-x   6 root root         77 2012-05-21 14:41 home

... 
```

一个可怕的解决方法是包装一个结构运行命令，在每个命令上添加一个“>/tmp/logfile.log”，然后当任务完成时，我会用 scp 检索文件......

简而言之，我的问题是如何在用芹菜触发时获得织物任务的完整输出？

以下是诀窍：

```
@ctask(name="mock_deploy")
def mock_deploy():
    env.roledefs.update({'remote':  ['root@1.1.1.1',]})
    output = StringIO()
    sys.stdout = output
    execute(mock_deploy2)
    sys.stdout = sys.__stdout__
    return output.getvalue() 
```

# c# - C/C# 中的模数更快？

> ID：11040646
> 
> 赞同：30
> 
> 时间：2012-06-14T20:11:02.807
> 
> 标签：c#, math, optimization, modulus

是否有一种技巧可以创建比特定基数的标准 % 运算符更快的整数模数？

对于我的程序，我会寻找大约 1000-4000（例如 n%2048）。有没有比简单地执行 n 模数 2048 更快的方法：`n%2048`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-14T20:16:13.257

如果在编译时知道分母是 2 的幂，就像您的 2048 示例一样，您可以减去 1 并执行按位与运算。

那是：

```
n % m == n & (m - 1) 
```

...哪里`m`是 2 的幂。

例如：

```
22 % 8 == 22 - 16 == 6

         Dec   Bin
       -----   -----
          22 = 10110
           8 = 01000  
       8 - 1 = 00111 
22 & (8 - 1) =   10110 
               & 00111 
               -------
           6 =   00110 
```

请记住，一个好的编译器会有自己的优化`%`，甚至可能与上述技术一样快。算术运算符往往经过大量优化。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-14T20:14:25.897

对于 2 的幂`2^n`，您所要做的就是将除最后一位之外的所有位清零`n`。

例如（假设 32 位整数）：

`x%2`相当于`x & 0x00000001`

`x%4`相当于`x & 0x00000003`

一般`x % (2^n)`等于`x & (2^n-1)`。用 C 写出来，这将是`x & ((1<<n)-1)`.

这是因为在第th 位（从右边）`2^n`给你一个 1 。`n+1`所以`2^n-1`会`n`在右边给你一个，在左边给你零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T20:13:58.840

您可以将高阶位归零，即

x = 11 = 1011
x % 4 = 3 = 0011

所以对于 x % 4 你可以只取最后 2 位 - 我不确定如果使用负数会发生什么

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-15T07:58:44.913

[这里有一些](http://cc.davelozinski.com/c-sharp/use-the-modulus-operator-or-alternative)复制模数运算的技术。

在这些基准测试中，这是最快的（经过修改以适应您的 2048 年情景）。只要您的“最大值”不是数百万并且在您提到的 1000-4000 范围内，它也可能对您更快：

```
int threshold = 2048; //the number to mod by
int max = 1000; //the number on the left. Ex: 1000 % 2048
int total = 0;
int y = 0;
for (int x = 0; x < max; x++)
{
    if (y > (threshold - 1))
    {
        y = 0;
        total += x;
    }
    y += 1;
}
return total; 
```

搏一搏。它在作者的机器上以各种设置[运行得更快，因此对你来说也应该表现得非常好。](http://cc.davelozinski.com/c-sharp/use-the-modulus-operator-or-alternative)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-07T02:54:01.323

通过在运行时预先计算魔法[常数，可以实现无分支的](https://stackoverflow.com/a/45353957)*非*二次幂模数，以使用乘加移位来实现除法。

`%`这比我的英特尔酷睿 i5 上的内置模运算符快大约 2 倍。

我很惊讶它并没有更引人注目，因为 x86 CPU`div`指令在某些 CPU 上的 64 位除法可能具有高达 80-90 个周期的[延迟](https://gmplib.org/~tege/x86-timing.pdf)`mul`，而在 3 个周期和每个 1 个周期的按位操作。

如下所示的概念证明和时间证明。`series_len`指在单个 var 上串行执行的模运算数。这是为了防止 CPU 通过并行化隐藏延迟。

* * *

```
#include <stdint.h>
#include <stdlib.h>
#include <stdio.h>
#include <sys/time.h>

typedef int32_t s32;
typedef uint32_t u32;
typedef uint64_t u64;

#define NUM_NUMS 1024
#define NUM_RUNS 500
#define MAX_NUM UINT32_MAX
#define MAX_DEN 1024

struct fastdiv {
    u32 mul;
    u32 add;
    s32 shift;
    u32 _odiv;  /* save original divisor for modulo calc */
};

static u32 num[NUM_NUMS];
static u32 den[NUM_NUMS];
static struct fastdiv fd[NUM_NUMS];

/* hash of results to prevent gcc from optimizing out our ops */
static u32 cookie = 0;

/* required for magic constant generation */
u32 ulog2(u32 v) {
    u32 r, shift;
    r =     (v > 0xFFFF) << 4; v >>= r;
    shift = (v > 0xFF  ) << 3; v >>= shift; r |= shift;
    shift = (v > 0xF   ) << 2; v >>= shift; r |= shift;
    shift = (v > 0x3   ) << 1; v >>= shift; r |= shift;
                                            r |= (v >> 1);
    return r;
}

/* generate constants for implementing a division with multiply-add-shift */
void fastdiv_make(struct fastdiv *d, u32 divisor) {
    u32 l, r, e;
    u64 m;

    d->_odiv = divisor;
    l = ulog2(divisor);
    if (divisor & (divisor - 1)) {
        m = 1ULL << (l + 32);
        d->mul = (u32)(m / divisor);
        r = (u32)m - d->mul * divisor;
        e = divisor - r;
        if (e < (1UL << l)) {
            ++d->mul;
            d->add = 0;
        } else {
            d->add = d->mul;
        }
        d->shift = l;
    } else {
        if (divisor == 1) {
            d->mul = 0xffffffff;
            d->add = 0xffffffff;
            d->shift = 0;
        } else {
            d->mul = 0x80000000;
            d->add = 0;
            d->shift = l-1;
        }
    }
}

/* 0: use function that checks for a power-of-2 modulus (speedup for POTs)
 * 1: use inline macro */
#define FASTMOD_BRANCHLESS 0

#define fastdiv(v,d) ((u32)(((u64)(v)*(d)->mul + (d)->add) >> 32) >> (d)->shift)
#define _fastmod(v,d) ((v) - fastdiv((v),(d)) * (d)->_odiv)

#if FASTMOD_BRANCHLESS
#define fastmod(v,d) _fastmod((v),(d))
#else
u32 fastmod(u32 v, struct fastdiv *d) {
    if (d->mul == 0x80000000) {
        return (v & ((1 << d->shift) - 1));
    }
    return _fastmod(v,d);
}
#endif

u32 random32(u32 upper_bound) {
    return arc4random_uniform(upper_bound);
}

u32 random32_range(u32 lower_bound, u32 upper_bound) {
    return random32(upper_bound - lower_bound) + lower_bound;
}

void fill_arrays() {
    int i;
    for (i = 0; i < NUM_NUMS; ++i) {
        num[i] = random32_range(MAX_DEN, MAX_NUM);
        den[i] = random32_range(1, MAX_DEN);
        fastdiv_make(&fd[i], den[i]);
    }
}

void fill_arrays_pot() {
    u32 log_bound, rand_log;
    int i;

    log_bound = ulog2(MAX_DEN);
    for (i = 0; i < NUM_NUMS; ++i) {
        num[i] = random32_range(MAX_DEN, MAX_NUM);
        rand_log = random32(log_bound) + 1;
        den[i] = 1 << rand_log;
        fastdiv_make(&fd[i], den[i]);
    }
}

u64 clock_ns() {
    struct timeval tv;
    gettimeofday(&tv, NULL);
    return tv.tv_sec*1000000000 + tv.tv_usec*1000;
}

void use_value(u32 v) {
    cookie += v;
}

int main(int argc, char **arg) {
    u64 builtin_npot_ns;
    u64 builtin_pot_ns;
    u64 branching_npot_ns;
    u64 branching_pot_ns;
    u64 branchless_npot_ns;
    u64 branchless_pot_ns;
    u64 t0, t1;
    u32 v;
    int s, r, i, j;
    int series_len;

    builtin_npot_ns = builtin_pot_ns = 0;
    branching_npot_ns = branching_pot_ns = 0;
    branchless_npot_ns = branchless_pot_ns = 0;

    for (s = 5; s >= 0; --s) {
        series_len = 1 << s;
        for (r = 0; r < NUM_RUNS; ++r) {
            /* built-in NPOT */
            fill_arrays();
            t0 = clock_ns();
            for (i = 0; i < NUM_NUMS; ++i) {
                v = num[i];
                for (j = 0; j < series_len; ++j) {
                    v /= den[i];
                }
                use_value(v);
            }
            t1 = clock_ns();
            builtin_npot_ns += (t1 - t0) / NUM_NUMS;

            /* built-in POT */
            fill_arrays_pot();
            t0 = clock_ns();
            for (i = 0; i < NUM_NUMS; ++i) {
                v = num[i];
                for (j = 0; j < series_len; ++j) {
                    v /= den[i];
                }
                use_value(v);
            }
            t1 = clock_ns();
            builtin_pot_ns += (t1 - t0) / NUM_NUMS;

            /* branching NPOT */
            fill_arrays();
            t0 = clock_ns();
            for (i = 0; i < NUM_NUMS; ++i) {
                v = num[i];
                for (j = 0; j < series_len; ++j) {
                    v = fastmod(v, fd+i);
                }
                use_value(v);
            }
            t1 = clock_ns();
            branching_npot_ns += (t1 - t0) / NUM_NUMS;

            /* branching POT */
            fill_arrays_pot();
            t0 = clock_ns();
            for (i = 0; i < NUM_NUMS; ++i) {
                v = num[i];
                for (j = 0; j < series_len; ++j) {
                    v = fastmod(v, fd+i);
                }
                use_value(v);
            }
            t1 = clock_ns();
            branching_pot_ns += (t1 - t0) / NUM_NUMS;

            /* branchless NPOT */
            fill_arrays();
            t0 = clock_ns();
            for (i = 0; i < NUM_NUMS; ++i) {
                v = num[i];
                for (j = 0; j < series_len; ++j) {
                    v = _fastmod(v, fd+i);
                }
                use_value(v);
            }
            t1 = clock_ns();
            branchless_npot_ns += (t1 - t0) / NUM_NUMS;

            /* branchless POT */
            fill_arrays_pot();
            t0 = clock_ns();
            for (i = 0; i < NUM_NUMS; ++i) {
                v = num[i];
                for (j = 0; j < series_len; ++j) {
                    v = _fastmod(v, fd+i);
                }
                use_value(v);
            }
            t1 = clock_ns();
            branchless_pot_ns += (t1 - t0) / NUM_NUMS;
        }

        builtin_npot_ns /= NUM_RUNS;
        builtin_pot_ns /= NUM_RUNS;
        branching_npot_ns /= NUM_RUNS;
        branching_pot_ns /= NUM_RUNS;
        branchless_npot_ns /= NUM_RUNS;
        branchless_pot_ns /= NUM_RUNS;

        printf("series_len = %d\n", series_len);
        printf("----------------------------\n");
        printf("builtin_npot_ns    : %llu ns\n", builtin_npot_ns);
        printf("builtin_pot_ns     : %llu ns\n", builtin_pot_ns);
        printf("branching_npot_ns  : %llu ns\n", branching_npot_ns);
        printf("branching_pot_ns   : %llu ns\n", branching_pot_ns);
        printf("branchless_npot_ns : %llu ns\n", branchless_npot_ns);
        printf("branchless_pot_ns  : %llu ns\n\n", branchless_pot_ns);
    }
    printf("cookie=%u\n", cookie);
} 
```

* * *

## 结果

Intel Core i5 (MacBookAir7,2)，macOS 10.11.6，clang 8.0.0

```
series_len = 32
----------------------------
builtin_npot_ns    : 218 ns
builtin_pot_ns     : 225 ns
branching_npot_ns  : 115 ns
branching_pot_ns   : 42 ns
branchless_npot_ns : 110 ns
branchless_pot_ns  : 110 ns

series_len = 16
----------------------------
builtin_npot_ns    : 87 ns
builtin_pot_ns     : 89 ns
branching_npot_ns  : 47 ns
branching_pot_ns   : 19 ns
branchless_npot_ns : 45 ns
branchless_pot_ns  : 45 ns

series_len = 8
----------------------------
builtin_npot_ns    : 32 ns
builtin_pot_ns     : 34 ns
branching_npot_ns  : 18 ns
branching_pot_ns   : 10 ns
branchless_npot_ns : 17 ns
branchless_pot_ns  : 17 ns

series_len = 4
----------------------------
builtin_npot_ns    : 15 ns
builtin_pot_ns     : 16 ns
branching_npot_ns  : 8 ns
branching_pot_ns   : 3 ns
branchless_npot_ns : 7 ns
branchless_pot_ns  : 7 ns

series_len = 2
----------------------------
builtin_npot_ns    : 8 ns
builtin_pot_ns     : 7 ns
branching_npot_ns  : 4 ns
branching_pot_ns   : 2 ns
branchless_npot_ns : 2 ns
branchless_pot_ns  : 2 ns 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T20:20:23.613

乘/除无符号整数的最快方法是向左或向右移动它们。移位操作直接匹配 CPU 命令。例如，3 << 2 =6，而 4>>1 = 2。

您可以使用相同的技巧来计算模块：将整数向左移动足够远，以便只剩下余数位，然后将其向右移动，以便检查余数。

另一方面，整数模也作为 CPU 命令存在。如果整数模运算符在优化构建中映射到此命令，则使用位移技巧不会看到任何改进。

以下代码通过移动足够远以至于只剩下最后 2 个位（因为 4=2^2）来计算 7%4。这意味着我们需要移动 30 位：

```
uint i=7;
var modulo=((i<<30)>>30); 
```

结果是 3

**编辑：**

我刚刚阅读了所有提出简单擦除高阶位的解决方案。它具有相同的效果，但更简单直接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T20:51:40.047

如果您要除以二的幂的文字，那么答案可能是否定的：任何体面的编译器都会自动将此类表达式转换为 AND 操作的变体，这非常接近最优值。

# hadoop - 附加不适用于蜂巢

> ID：11040647
> 
> 赞同：2
> 
> 时间：2012-06-14T20:11:09.153
> 
> 标签：hadoop, hive

我正在尝试将数据从表 a 插入到表 b（两者都是外部表），基本上依赖于环境的附加功能。我也对托管表进行了同样的尝试，但行为是相同的。

不知何故，追加对我来说不起作用。另一方面，覆盖工作得很好。

例如以下失败

```
hive> insert table page_view select viewtime, userid, page_url, country from page_view1;
FAILED: Parse Error: line 1:0 cannot recognize input near 'insert' 'table' 'page_view' in insert clause 
```

但是，以下工作就好了......

```
hive> insert overwrite table page_view select viewtime, userid, page_url, country from page_view1; 
```

我在 hadoop 1.0.2 和 hive 0.8.1

需要帮助...

插入表 page_view 从 page_view1 中选择查看时间、用户 ID、page_url、国家；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T20:31:49.950

我相信根据我在此处（https://issues.apache.org/jira/browse/HIVE-306）的评论中看到的内容，您缺少**INTO**关键字。我认为这样的事情可能会奏效：

```
insert INTO table page_view select viewtime, userid, page_url, country from page_view1; 
```

# actionscript-3 - FLEX DataGrid 列修改

> ID：11040650
> 
> 赞同：2
> 
> 时间：2012-06-14T20:11:13.880
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

我是 Flex 的新手。我想以附加的网格格式显示数据。我找到了在 DataGrid 中显示的最佳方式。但是 CIs 列有多个条目，因此其他列会重复。我想避免其他列中的重复数据。随附的屏幕截图是 excel，我想在 Flex 中实现相同的格式。我正在使用 Flex 4.5

![  我的要求  ](../Images/d77faab0548fbedcb4bd1401eedfd86e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:15:36.420

我认为做你想做的最好的方法是为 CLS 列创建一个自定义项渲染器，并将其渲染为列表控件。这样，每一行中的 CLS 项将只占用一行而不是多行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:52:41.593

您可以通过以下代码获得一些想法......您可以使用以下概念为您的实现构建逻辑。以下示例是根据您的要求不完整的示例：-

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.core.UIComponent;
            import mx.events.AdvancedDataGridEvent;
            import mx.events.ListEvent;

            [Bindable]
            private var dpHierarchy:ArrayCollection= new ArrayCollection
                ([
                    {name:"Barbara Jennings", address: "Arizona", contact:999970, orders:["1"]},
                    {name:"Dana Binn", address: "Arizona", contact:9999130, orders:["2"]},
                    {name:"Joe Smith", address: "California", contact:9992929, orders:["3"]},
                    {name:"Alice Treu", address: "California", contact:9999230, orders:["4"]}
                ]);                    

            private function addOrder():void
            {
                for(var i:int = 0 ; i < dpHierarchy.length; i++)
                {
                    if(dropDownID.selectedItem.name == dpHierarchy[i].name)
                    {
                        var itemUpdated:Array = dpHierarchy[i].orders;
                        itemUpdated.push(orderNumber.text);
                        dpHierarchy[i].orders = itemUpdated;
                        dpHierarchy.itemUpdated(dpHierarchy[i]);
                        break;
                    }
                }
            }

        ]]>
    </fx:Script>
    <mx:VBox x="30" y="30" width="450" height="400">
        <s:HGroup>
            <s:Button label="Add Order" click="addOrder()"/>
            <s:DropDownList id="dropDownID" dataProvider="{dpHierarchy}" labelField="name" selectedIndex="0"/>
            <s:TextInput id="orderNumber" width="100"/>
        </s:HGroup>
        <mx:AdvancedDataGrid id="myADG"   
                             dataProvider="{dpHierarchy}"
                             variableRowHeight="true" wordWrap="true">
            <mx:columns>
                <mx:AdvancedDataGridColumn dataField="name" headerText="Name"/>
                <mx:AdvancedDataGridColumn dataField="address" headerText="Address"/>
                <mx:AdvancedDataGridColumn dataField="contact" headerText="Contact"/>
                <mx:AdvancedDataGridColumn dataField="orders" headerText="Orders" itemRenderer="OrderItemRenderer"/>

            </mx:columns>   
        </mx:AdvancedDataGrid>
    </mx:VBox>  
</s:Application> 
```

项目重新渲染器名称： - OrderItemRenderer

```
<?xml version="1.0" encoding="utf-8"?>
<s:MXAdvancedDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark" 
                                  xmlns:mx="library://ns.adobe.com/flex/mx" 
                                  focusEnabled="true" width="90%" height="90%">
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;

            [Bindable]
            private var initDG:ArrayCollection = new ArrayCollection();

            override public function set data(value:Object):void
            {
                super.data = value;
                initDG = new ArrayCollection(value.orders)
            }
        ]]>
    </fx:Script>
    <mx:DataGrid id="dataGrid" dataProvider="{initDG}" headerHeight="0" rowCount="{initDG.length}"/>
</s:MXAdvancedDataGridItemRenderer> 
```

# c# - 如何强制 BinaryReader 正确读取此数组？

> ID：11040651
> 
> 赞同：0
> 
> 时间：2012-06-14T20:11:23.553
> 
> 标签：c#, .net, stream, endianness

我有一个字节数组，通过网络从 java 应用程序接收。我需要正确解析这个数组。格式如下：

```
int - first for bytes
int - next for bytes
string - rest of data. 
```

看看这个[截图](https://dl.dropbox.com/u/3055964/cs.gif)。
如您所见，前四个字节是`0, 0, 0, 1`. 实际的整数值应该是`1`，但是当我阅读它时`BinaryReader.ReadInt32`，我收到了`16777216`。我怀疑这与字节字节序有关（但可能是错误的），但我不知道如何解决它。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:19:00.497

是的，这是一个字节序问题。[这个问题](https://stackoverflow.com/questions/3294659/c-sharp-big-endian-ulong-from-4-bytes)有如何反转整数类型的字节顺序的例子

# java - Java日期解析特定格式

> ID：11040653
> 
> 赞同：2
> 
> 时间：2012-06-14T20:11:24.850
> 
> 标签：java, parsing, date

我写了一小段代码来暴露我的问题。

```
public class date {
    public static void main(String args[]) {
        SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy",Locale.ENGLISH);
        System.out.println("The date format is : dd-MM-yyyy.");
        String date1 = "20-06-2012";
        System.out.println("The date1 is : " + date1);
        String date2 = "2012-06-20";
        System.out.println("The date2 is : " + date2);
        try {
            System.out.println(formatter.parse(date1).toString());
            System.out.println(formatter.parse(date2).toString());
        } catch (ParseException e) {
            e.printStackTrace();
        }
    }
} 
```

输出如下所示：

```
The date format is : dd-MM-yyyy.
The date1 is : 20-06-2012
The date2 is : 2012-06-20
Wed Jun 20 00:00:00 EDT 2012
Mon Dec 03 00:00:00 EST 25 
```

问题是我希望在提交的日期与 中指定的模式不匹配时引发错误`SimpleDateFormat`，不幸的是，它看起来像是在字符串中的正确位置看到数字，由破折号分隔，因此它通过了。是否有其他工具可以做到这一点，还是我错误地使用了`SimpleDateFormat`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T20:14:18.687

使用[`SimpleDateFormat.setLenient(boolean)`并设置为`false`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)绕过 SDF 解析启发式。

[然后切换到[Joda-Time](http://joda-time.sourceforge.net/) ;)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-27T23:19:02.833

正如其他答案所说，您必须定义适合您数据的格式化程序。

# java.time

Java 8 及更高版本与新的[java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)框架（[教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)）捆绑在一起。这些新类取代了旧的 java.util.Date/.Calendar 和 java.text.SimpleDateFormat 类，这些类已被证明如此混乱和麻烦。这个新框架的灵感来自非常成功的[Joda-Time](http://www.joda.org/joda-time/)库，由[JSR 310定义，并由](https://jcp.org/en/jsr/detail?id=310)[ThreeTen-Extra](http://www.threeten.org/threeten-extra/)项目扩展。

此外，java.time 包括一个[`LocalDate`](http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)仅表示日期的类，没有时间和时区，正如您在问题中所拥有的那样。

格式化模式以类似于 java.text.SimpleDateFormat 的方式定义，但可能略有不同。一定要学习[文档](http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)。

```
String input = "20-06-2012";
DateTimeFormatter formatter = DateTimeFormatter.ofPattern( "dd-MM-yyyy" );
LocalDate localDate = LocalDate.parse( input , formatter ); 
```

转储到控制台。

```
System.out.println( "localDate : " + localDate ); 
```

跑的时候。

> 本地日期：2012-06-20

# 此处不需要语言环境

这里[`Locale.English`](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#ENGLISH)不需要，因为您的数据中没有要翻译的月份或星期几的名称。

有关何时在解析/生成日期时间值的字符串表示时使用 Locale 的更多信息，请参阅[何时`Locale`需要在 Java 中解析日期时间字符串？](https://stackoverflow.com/q/32162108/642706).

# asp.net-mvc-3 - 无法创建请求生命周期范围，因为 HttpContext 不可用

> ID：11040656
> 
> 赞同：2
> 
> 时间：2012-06-14T20:11:28.263
> 
> 标签：asp.net-mvc-3, autofac, unit-of-work, signalr

很难尝试使用一些异步非 httprequest 设置 AutoFac。

我在 App_Start 上有以下内容

```
 var builder = new ContainerBuilder();
        builder.RegisterControllers(typeof(MvcApplication).Assembly);
        builder.RegisterType<sfEntities>().As<IUnitOfWork>().InstancePerHttpRequest();
        builder.RegisterGeneric(typeof(sfRepository<>)).As(typeof(IRepository<>)).InstancePerHttpRequest();
        builder.RegisterGeneric(typeof(BaseServices<>)).As(typeof(IBaseServices<>)).InstancePerHttpRequest();
        builder.RegisterType<EmailServices>().As<IEmailServices>().InstancePerHttpRequest();
        builder.RegisterType<UserServices>().As<IUserServices>().InstancePerHttpRequest();
        builder.RegisterType<ChatServices>().As<IChatServices>().InstancePerHttpRequest();
        builder.RegisterType<DefaultFormsAuthentication>();
        builder.RegisterType<WebSecurity>();
        builder.RegisterType<Chat>();
        IContainer container = builder.Build();
        DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

如果我更改为 InstancePerLifetimeScope()，我会遇到 UnitofWork.SaveChanges() 的问题。以这种方式设置工作正常，除了异步调用。

ps：UnitOfWork在服务间传递EF DbContext，保证使用同一个实例，并正确dispose。如果我更改为 InstancePerLifetimeScope，我在调用 .SaveChanges() 时会遇到身份冲突，可能是因为应该有多个 UnitOfWork 实例。

以下代码引发以下异常：

```
Timer timer = new Timer(new TimerCallback(OnTimer), null, TimeSpan.FromMinutes(1), TimeSpan.FromMinutes(1));

    private static void OnTimer(object o)
    {
         using (var timerScope = AutofacDependencyResolver.Current.ApplicationContainer.BeginLifetimeScope())
         {
             var chatServices = timerScope.Resolve<IChatServices>();
             chatServices.MarkInactiveUsers();
         }
    } 
```

> 从请求实例的范围中看不到具有与“httpRequest”匹配的标记的范围。这通常表明注册为 per-HTTP 请求的组件正在被 SingleInstance() 组件（或类似场景）请求。在 Web 集成下，始终从 DependencyResolver.Current 或 ILifetimeScopeProvider.RequestLifetime 请求依赖项，而不是从容器本身.

在 SignalR 上，以下代码引发以下异常：

```
SignalR.GlobalHost.DependencyResolver.Register(typeof(Chat), () => new Chat(DependencyResolver.Current.GetService<IUnitOfWork>(), DependencyResolver.Current.GetService<IChatServices>(), DependencyResolver.Current.GetService<IUserServices>())); 
```

> 无法创建请求生命周期范围，因为 HttpContext 不可用

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-22T16:56:05.270

> 很难尝试使用一些异步非 httprequest 设置 AutoFac。

对于非 http 请求，或者更具体地说，对于非 ASP.NET 管道请求（如 WCF 或 ServiceStack），您绝对应该将所有`InstancePerHttpRequest()`代码更改为`InstancePerLifetimeScope()`. 您可以而且应该这样做，因为 `InstancePerLifetimeScope()` [它可以在 ASP.NET 管道和非 ASP.NET 管道上下文中解析](https://groups.google.com/d/msg/autofac/vPrvd0RtOtM/zKb1OxdDitkJ)。

> 如果我更改为 InstancePerLifetimeScope()，我会遇到 UnitofWork.SaveChanges() 的问题。以这种方式设置工作正常，除了异步调用...如果我更改为 InstancePerLifetimeScope，我在调用 .SaveChanges() 时遇到身份冲突，可能是因为应该有多个 UnitOfWork 实例。

是的，应该有多个 的实例`UnitOfWork`，但是您可以通过一次注册来实现，该注册的范围应为`InstancePerLifetimeScope()`：

例子：

```
builder.RegisterType<NhUnitOfWork>().As<IUnitOfWork>().InstancePerLifetimeScope(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:56:47.310

该`IChatServices`服务已注册为`InstancePerHttpRequest`，因此仅在 http 请求生命周期范围内可用。您正在从无法“访问”当前请求的应用程序范围内解析，因此因您提到的错误而失败。所以是的，要让计时器工作，您必须在应用程序范围内注册服务。

基本上，您可以拥有访问应用程序范围服务的请求范围服务，但反之则不行。

问题是：`UnitOfWork.SaveChanges`做什么以及你遇到什么“问题”？请详细说明。

# mysql - 在 mySQL 中执行“nodupkey”（SAS）的最佳方法是什么？

> ID：11040661
> 
> 赞同：2
> 
> 时间：2012-06-14T20:11:48.987
> 
> 标签：mysql, duplicates, sas

任何人都可以让我知道在 mySQL 中创建“nodupkey”的最有效方法是什么，它会给出与此处的 SAS 代码相同的结果？

```
 Proc sort data=T1 nodupkey out = T2; By ID; Run; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:42:12.860

对于您的情况，似乎一个简单的 distinct 就足够了，因此您的 MySQL 代码应如下所示：

```
create table T2 
 select distinct ID
 from T1 
```

更多信息可以在[这里找到](http://dev.mysql.com/doc/refman/5.0/en/create-table-select.html)

希望这有帮助

**编辑：**

正如 Mozan 所说，这应该只在你的表上有一个名为 ID 的变量时才有效

# mongodb - 使用 Mongo 聚合框架的多组操作

> ID：11040662
> 
> 赞同：24
> 
> 时间：2012-06-14T20:11:51.960
> 
> 标签：mongodb

给定一组链接调查和类别 ID 的问题：

```
> db.questions.find().toArray();
[
    {
        "_id" : ObjectId("4fda05bc322b1c95b531ac25"),
        "id" : 1,
        "name" : "Question 1",
        "category_id" : 1,
        "survey_id" : 1,
        "score" : 5
    },
    {
        "_id" : ObjectId("4fda05cb322b1c95b531ac26"),
        "id" : 2,
        "name" : "Question 2",
        "category_id" : 1,
        "survey_id" : 1,
        "score" : 3
    },
    {
        "_id" : ObjectId("4fda05d9322b1c95b531ac27"),
        "id" : 3,
        "name" : "Question 3",
        "category_id" : 2,
        "survey_id" : 1,
        "score" : 4
    },
    {
        "_id" : ObjectId("4fda4287322b1c95b531ac28"),
        "id" : 4,
        "name" : "Question 4",
        "category_id" : 2,
        "survey_id" : 1,
        "score" : 7
    }
] 
```

我可以通过以下方式找到类别平均值：

```
db.questions.aggregate(
    { $group : {
        _id : "$category_id",
        avg_score : { $avg : "$score" }
    }
}
);

{
    "result" : [
        {
            "_id" : 1,
            "avg_score" : 4
        },
        {
            "_id" : 2,
            "avg_score" : 5.5
        }
    ],
    "ok" : 1
} 
```

**如何获得类别平均值的平均值（注意这与简单地平均所有问题不同）？** 我会假设我会做多个组操作，但这失败了：

```
> db.questions.aggregate(
...   { $group : {
...     _id : "$category_id",
...     avg_score : { $avg : "$score" },
...   }},
...   { $group : {
...     _id : "$survey_id",
...     avg_score : { $avg : "$score" },
...   }}
... );
{
    "errmsg" : "exception: the _id field for a group must not be undefined",
    "code" : 15956,
    "ok" : 0
}
> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-15T17:42:44.723

重要的是要了解 aggregate() 参数中的操作形成一个*pipeline*。这意味着管道中任何元素的输入都是管道中前一个元素生成的文档流。

在您的示例中，您的第一个查询创建了一个如下所示的文档管道：

```
{
    "_id" : 2,
    "avg_score" : 5.5
},
{
    "_id" : 1,
    "avg_score" : 4
} 
```

这意味着管道的第二个元素是查看一系列文档，其中唯一的键是“_id”和“avg_score”。此文档流中***不再存在***键“category_id”和“score” 。

如果您想在此流上进一步聚合，则必须使用在管道中此阶段看到的键进行聚合。由于您想要平均平均值，因此您需要为 _id 字段输入一个常量值，以便将所有输入文档分组为一个结果。

以下代码产生正确的结果：

```
db.questions.aggregate(
    { $group : {
        _id : "$category_id",
        avg_score : { $avg : "$score" },
        }
    },
    { $group : {
        _id : "all",
        avg_score : { $avg : "$avg_score" },
        }
    }
); 
```

运行时，它会产生以下输出：

```
 {
    "result" : [
        {
        "_id" : "all",
        "avg_score" : 4.75
        }
    ],
    "ok" : 1
 } 
```

# iphone - XCode 4.3 无法加载持久存储 UserDictionary.sqlite

> ID：11040681
> 
> 赞同：42
> 
> 时间：2012-06-14T20:13:21.603
> 
> 标签：iphone, ios, xcode, store, persistent

我已经在 iOS 应用程序上工作了一段时间，突然每次我在 iOS 5.1 模拟器中运行应用程序时都会遇到以下崩溃。

该应用程序不使用核心数据，我不确定是什么原因造成的。

我已经从模拟器中删除了该应用程序，完成了清理和重建，但似乎没有任何帮助。

```
Unable to load persistent store at URL 'file://localhost/Users/jcottrell/Library/Application%20Support/iPhone%20Simulator/5.1/Library/Keyboard/UserDictionary.sqlite' ({
    metadata =     {
        NSPersistenceFrameworkVersion = 407;
        NSStoreModelVersionHashes =         {
            UserDictionaryEntry = <f0c9025b 602122f9 37a4e274 bdaacec1 b9a66f83 fca5c43b bed5e80a 6baee338>;
        };
        NSStoreModelVersionHashesVersion = 3;
        NSStoreModelVersionIdentifiers =         (
            ""
        );
        NSStoreType = SQLite;
        NSStoreUUID = "43DABF34-7F7E-4FE9-B78D-8AF64292A967";
        "_NSAutoVacuumLevel" = 2;
    };
    reason = "The model used to open the store is incompatible with the one used to create the store";
}) 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-06-14T23:09:05.177

我已经解决了这个问题。我点击了“iOS 模拟器”-> 重置内容和设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:14:28.803

删除您提到的文件：`/Users/jcottrell/Library/Application%20Support/iPhone%20Simulator/5.1/Library/Keyboard/UserDictionary.sqlite`以及随附的`plist`. 这是一个仅限模拟器的问题，因此您可以忽略它。

# c++ - 从字符串加载字节数组工作不正常？

> ID：11040692
> 
> 赞同：1
> 
> 时间：2012-06-14T20:14:03.070
> 
> 标签：c++, .net

我正在尝试加密字符串，将其保存在文件中，然后从文件中读取字符串并解密。但是当我运行代码时，我只是得到“要解密的数据长度无效”错误：/通过调试，我发现字节数组（数组^字节）由于某种原因在我尝试时长度为 12解密字符串，当我加密字符串时它的长度为8。

这是加密字符串的代码：

```
String^ EncryptS(){
String^ DecryptedS;
MD5CryptoServiceProvider^ md5Crypt = gcnew MD5CryptoServiceProvider();
UTF8Encoding^ utf8Crypt = gcnew UTF8Encoding();
TripleDESCryptoServiceProvider^ crypt = gcnew TripleDESCryptoServiceProvider();
crypt->Key = md5Crypt->ComputeHash(utf8Crypt->GetBytes("123"));
crypt->Mode = CipherMode::ECB;
crypt->Padding = PaddingMode::PKCS7;
ICryptoTransform^ transCrypt = crypt->CreateEncryptor();    
DecryptedS = utf8Crypt->GetString(transCrypt->TransformFinalBlock(utf8Crypt->GetBytes(form1::passwordTextBox->Text), 0, utf8Crypt->GetBytes(form1::passwordTextBox->Text)->Length));
return DecryptedS; } 
```

这是解密字符串的代码

```
String^ decryptS(String^ encryptedS){
String^ decryptedS;
array<Byte>^ bytes;
MD5CryptoServiceProvider^ md5Crypt = gcnew MD5CryptoServiceProvider();
UTF8Encoding^ utf8Crypt = gcnew UTF8Encoding();
UTF8Encoding^ utf8ToByte = gcnew UTF8Encoding();
TripleDESCryptoServiceProvider^ crypt = gcnew TripleDESCryptoServiceProvider();
crypt->Key = md5Crypt->ComputeHash(utf8Crypt->GetBytes("123"));
crypt->Mode = CipherMode::ECB;
crypt->Padding = PaddingMode::PKCS7;
ICryptoTransform^ transCrypt = crypt->CreateDecryptor();
bytes = utf8ToByte->GetBytes(encryptedS);
return decryptedS = utf8Crypt->GetString(transCrypt->TransformFinalBlock(bytes, 0, bytes->Length)); } 
```

我一直试图在几个小时内解决这个问题，但没有成功，非常感谢您的帮助:)

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:17:21.417

您正在尝试使用 UTF-8 将任意字节数组转换为字符串。这就像尝试加载一些随机文本文件，就好像它是 JPEG 一样，并期望它是有效的图像。

仅`Encoding.GetString(byte[])`当字节数组确实是使用该编码的文本编码时才应使用。

如果您想表示“任意”二进制数据（通常是压缩或加密数据），您应该使用 base64 或十六进制，具体取决于您的要求。（[`Convert.ToBase64String`](http://msdn.microsoft.com/en-us/library/system.convert.tobase64string.aspx)并且[`Convert.FromBase64String`](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)是你的朋友。）

# java - 使用两个摄像头进行立体校准和对象的 3D 重建？

> ID：11040693
> 
> 赞同：2
> 
> 时间：2012-06-14T20:14:03.350
> 
> 标签：java, graphics, opencv, computer-vision, javacv

我有两个摄像头设置，如下图所示：

![在此处输入图像描述](../Images/fec4f034cee11c553b4f51bddca8ebc9.png)

我有这个设置：

*   此绿色对象的顶视图，`(x1,y1)`其 2D 图像坐标。
*   此绿色对象的侧视图，`(x2,y2)`其 2D 图像坐标。

如何`(x,y,z)`通过这两个摄像头（即顶视图图像和侧视图图像的组合）跟踪/识别这个绿色对象的真实世界 3D 坐标？

我知道如何使用 JavaCV/OpenCV 校准单个相机，但我不知道如何使用 JavaCV/OpenCV 执行立体校准其他东西。

通过两个摄像头进行这种立体校准的分步程序是什么？

这种立体校准过程的输出（例如，内在矩阵、失真等）是什么？我如何使用该输出来计算这个绿色对象的真实世界 3D 坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:20:27.307

您好，以下博客将回答您的所有问题... [http://blog.martinperis.com/2011/01/opencv-stereo-camera-calibration.html](http://blog.martinperis.com/2011/01/opencv-stereo-camera-calibration.html)

没有上传图片..只需检查一下，否则您可以从书中找到理论概念 [http://www.amazon.com/Learning-OpenCV-Computer-Vision-Library/dp/0596516134](https://rads.stackoverflow.com/amzn/click/com/0596516134)

或者对于使用相机实现的实际代码，可以参考 [http://www.youtube.com/watch?v=jVdKK_5l9XU&feature=plcp](http://www.youtube.com/watch?v=jVdKK_5l9XU&feature=plcp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:40:00.140

查看图片后，我认为您在为您的设置实施立体算法时可能会遇到问题。当相机几乎正面平行时，立体校正效果很好。对于您的相机设置，您几乎无法获得任何可以找到任何视差匹配的校正图像。

# python - Python "and if" 等价物

> ID：11040701
> 
> 赞同：0
> 
> 时间：2012-06-14T20:14:40.387
> 
> 标签：python, if-statement

假设“mylist”可以包含值“video”、“audio”、“visual”或全部三个。如果在“mylist”中找到字符串，我希望我的脚本将匹配数据附加到列表“files”中，如果“mylist”中只有一个字符串，则此方法有效，但如果有多个字符串，则只有第一个字符串在“mylist”中得到匹配。有什么我可以使用的东西来代替等效于“and if”的“elif”吗？

```
 if request.method == 'POST':
    mylist = request.POST.getlist('list')
    files = []
    if 'video' in mylist:
      files.append('/home/dbs/public_html/download/codex/codex.html')
    elif 'audio' in mylist:
      files.append('/home/dbs/public_html/download/audio/audio_player.html')
    elif 'visual' in mylist:
      files.append('/home/dbs/public_html/download/visual/visual.html')
    return HttpResponse(files)
  else:
    return http.HttpResponseForbidden() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T20:16:19.637

只需使用`if`而不是`elif`.

```
if 'video' in mylist:
    files.append('/home/dbs/public_html/download/codex/codex.html')
if 'audio' in mylist:
    files.append('/home/dbs/public_html/download/audio/audio_player.html')
if 'visual' in mylist:
    files.append('/home/dbs/public_html/download/visual/visual.html') 
```

您还可以使用映射对象和循环，以防有多个项目，因为您不必重复``... in mylist`代码，这样会更好：

```
paths = {
    'video': '/home/dbs/public_html/download/codex/codex.html',
    'audio': '/home/dbs/public_html/download/audio/audio_player.html',
    'visual': '/home/dbs/public_html/download/visual/visual.html'
}

files += [path for key, path in paths.iteritems() if key in mylist] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T20:16:53.443

为什么不只是如果？*如果*每种情况发生，您都需要它。每个子句之间没有关系。:)

# c++ - 将 unicode 转换为 char

> ID：11040703
> 
> 赞同：1
> 
> 时间：2012-06-14T20:14:42.633
> 
> 标签：c++, unicode, char, locale, c++builder

如何将 Unicode 字符串转换为 a `char*`or `char* const`in [embarcadero](http://www.embarcadero.com/) c++ ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:54:36.450

```
String text = "Hello world";
char *txt = AnsiString(text).c_str();

Older text.t_str() is now AnsiString(String).c_str() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T20:36:47.613

“Unicode 字符串”确实不够具体，无法知道您的源数据是什么，但您的意思可能是“UTF-16 字符串存储为 wchar_t 数组”，因为大多数不知道正确术语的人都使用这种方式。

"char*" 也不足以知道你想要定位什么，尽管 "embarcadero" 可能有一些约定。除非您另有说明，否则我将假设您需要 UTF-8 数据。

此外，我将把我的例子限制在 VS2010 中的工作范围内

```
// your "Unicode" string
wchar_t const * utf16_string = L"Hello, World!";

// #include <codecvt>
std::wstring_convert<std::codecvt_utf8_utf16<wchar_t>,wchar_t> convert;

std::string utf8_string = convert.to_bytes(utf16_string); 
```

这假定 wchar_t 字符串是 UTF-16，就像 Windows 上的情况一样，否则是可移植代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T20:17:53.583

您可以合法地将任何数组重新解释为 char 指针数组。因此，如果您的 Unicode 数据采用 4 字节代码单元，例如

```
char32_t data[100]; 
```

然后您可以将其作为 char 数组访问：

```
char const * p = reinterpret_cast<char const*>(data);

for (std::size_t i = 0; i != sizeof data; ++i)
{
    std::printf("Byte %03zu is 0x%02X.\n", i, p[i]);
} 
```

这样，您可以逐个检查 Unicode 数据的各个字节。

*（这当然与转换文本的编码*无关。为此，请使用像`iconv`ICU 之类的库。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-02T20:54:55.770

如果您使用 Windows：

```
//#include <windows.h>
u16string utext = u"объява";
char text[0x100];
WideCharToMultiByte(CP_UTF8,NULL,(const wchar_t*)(utext.c_str()),-1,text,-1,NULL,NULL);
cout << text; 
```

我们不能使用 std::wstring_convert，因此在 MinGW 4.9.2 中不可用。

# android - SQLite 数据库没有被 insert() 语句正确填充

> ID：11040706
> 
> 赞同：0
> 
> 时间：2012-06-14T20:14:52.023
> 
> 标签：android, sqlite

所以最近，我[问了一个](https://stackoverflow.com/questions/11023046/trying-in-insert-values-into-a-database-but-the-insert-is-failing/11023111#11023111)关于我创建的扩展 SQLiteOpenHelper 的类的问题，其中的`insert()`语句导致 Logcat 中的错误。最近，我决定使用 ddms 来提取我的应用程序应该充当接口的数据库，然后在终端中查看它。结果是这样的：

![图为：我正在查看最近提取的应用程序数据库版本](../Images/c86c9ea04b198c1be0fdf9ed096c1e40.png) 令我惊讶的是，我只看到一个插入语句（无论如何来自我的应用程序）。我在我的应用程序中尝试了多次插入，只有最初的“Hello world！” 让它进来。

我不确定问题是什么。谁能帮我弄清楚为什么我的数据库只是自重？我的猜测涉及主键没有正确增加，但我不知道为什么会这样。此外，Logcat 中不再出现错误。

我已经包含了我班级中的构造函数，以防它们可能会有所帮助。此外，我还包括了自上一个问题以来我对 getNewTaskId() 所做的更改：

```
public NagTasksDatabaseHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);
    // TODO Auto-generated constructor stub
}

/*
public NagTasksDatabaseHelper(Context context, String name,
        CursorFactory factory, int version,
        DatabaseErrorHandler errorHandler) {
    super(context, name, factory, version, errorHandler);
    // TODO Auto-generated constructor stub
    // NOTE TO SELF: Do not use this constructor. DatabaseErrorHandler only exists in Honeycomb onward.
}
*/
public NagTasksDatabaseHelper(Context context, CursorFactory factory){
    super(context, "NagTasks", factory, 1);
}
public NagTasksDatabaseHelper(Context context) //Most frequently use constructor
{
    super(context, "NagTasks", null, 1);
}
public int getNewTaskId(SQLiteDatabase db)
{
    Cursor c = db.rawQuery("SELECT MAX(_id) FROM TASKS", null);
    c.moveToFirst();
    int columnID = c.getColumnIndex(ID);
    if (columnID == -1)
    {
        c.close();
        return 0;
    } else {
        int newTaskID = c.getInt(columnID) +1;
        c.close();
        return newTaskID;
    }
}
public void addTask(String title, String notes)
{
    SQLiteDatabase db = getWritableDatabase();
    int newestID = getNewTaskId(db);
    ContentValues values = new ContentValues();
    values.put("_id", newestID);
    values.put("TASK", title);
    values.put("NOTE", notes);
    values.put("ISCHECKED", 0);
    db.insert("TASKS", null, values);
    db.close();
}
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE IF NOT EXISTS TASKS (_id INTEGER PRIMARY KEY, TASK TEXT, NOTE TEXT, ISCHECKED INTEGER);");
} 
```

**编辑：**我将这些`getColumnIndex()`行更改为`getColumnIndexorThrow()`并在 LogCat 中得到这些错误：

```
06-17 18:47:40.557: V/LoaderManager(329): onLoadComplete: LoaderInfo{44f2ac00 #854 : SQLiteCursorLoader{44f2b950}}
06-17 18:47:40.557: V/LoaderManager(329):   onLoadFinished in SQLiteCursorLoader{44f2b950 id=854}: SQLiteCursor{44ee0800}
06-17 18:47:51.887: D/AndroidRuntime(329): Shutting down VM
06-17 18:47:51.887: W/dalvikvm(329): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-17 18:47:51.907: E/AndroidRuntime(329): FATAL EXCEPTION: main
06-17 18:47:51.907: E/AndroidRuntime(329): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mowdownDevelopments.nagTasks/com.mowdownDevelopments.nagTasks.NagTasksAddTasksActivity}: java.lang.IllegalArgumentException: column '_id' does not exist
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.os.Looper.loop(Looper.java:123)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-17 18:47:51.907: E/AndroidRuntime(329):  at java.lang.reflect.Method.invokeNative(Native Method)
06-17 18:47:51.907: E/AndroidRuntime(329):  at java.lang.reflect.Method.invoke(Method.java:521)
06-17 18:47:51.907: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-17 18:47:51.907: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-17 18:47:51.907: E/AndroidRuntime(329):  at dalvik.system.NativeStart.main(Native Method)
06-17 18:47:51.907: E/AndroidRuntime(329): Caused by: java.lang.IllegalArgumentException: column '_id' does not exist
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:314)
06-17 18:47:51.907: E/AndroidRuntime(329):  at com.mowdownDevelopments.nagTasks.NagTasksDatabaseHelper.getNewTaskId(NagTasksDatabaseHelper.java:127)
06-17 18:47:51.907: E/AndroidRuntime(329):  at com.mowdownDevelopments.nagTasks.NagTasksDatabaseHelper.getNewTaskId(NagTasksDatabaseHelper.java:141)
06-17 18:47:51.907: E/AndroidRuntime(329):  at com.mowdownDevelopments.nagTasks.NagTasksAddTaskFragment.onActivityCreated(NagTasksAddTaskFragment.java:42)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:891)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1062)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1810)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:501)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.app.Activity.performStart(Activity.java:3781)
06-17 18:47:51.907: E/AndroidRuntime(329):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2636)
06-17 18:47:51.907: E/AndroidRuntime(329):  ... 11 more
06-17 18:47:58.947: I/Process(329): Sending signal. PID: 329 SIG: 9 
```

...那么，“_id”怎么会不存在呢？它将解释旧版本如何总是通过 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:31:40.933

> 我的猜测涉及主键没有正确增加，但我不知道为什么会这样。

所以你`_id`不是自动递增的，因为你没有指定它是递增的。所以`onCreate`用这个替换你的方法：

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE TASKS (_id INTEGER PRIMARY KEY AUTOINCREMENT, TASK TEXT, NOTE TEXT, ISCHECKED INTEGER);");
} 
```

您必须`AUTOINCREMENT`为您的`_id`.

您没有在插入数据的位置添加代码，但您应该使用`insert()`这种`SQLiteDatabase`结合`ContentValues`.

```
public boolean addNewData(String name, String address) {
   ContentValues data = new ContentValues();
   data.put("NameColumn", name);
   data.put("AddressColumn", address);
   db.insert("TASKS", "NameColumn", data);
} 
```

你也应该调用in或`close()`方法的方法。只需在此处添加更多代码片段或整个实现即可。`SQLite``onStop``onDestroy`

* * *

**编辑：**

getNewTask 示例

```
public int getNewTask(SQLiteDatabase db) {
        String SELECT_QUERY = "SELECT MAX(_id) FROM TASKS";
        Cursor c = db.rawQuery(SELECT_QUERY, null);
        if (c.getCount() > 0) {
            c.moveToFirst();
            int i = c.getInt(0);
            if (i > 0) {
                return i;
            }   
            else {
                return 0;
            }
        }
        else {
            return 0;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T02:34:34.880

那不应该是

```
int columnID = c.getColumnIndex("_id"); // not ID 
```

你总是得到 0 的回报`getNewTaskId`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T20:22:44.187

所以，事实证明问题实际上是传递给的列名`getColumnIndex()`实际上是不存在的。因此，简单的解决方法是将别名分配给`MAX(_id)`...

```
public int getNewTaskId(SQLiteDatabase db)
{
    Cursor c = db.rawQuery("SELECT MAX(_id) AS max FROM TASKS", null);
    c.moveToFirst();
    int columnID = c.getColumnIndex("max");
    if (columnID == -1)
    {
        c.close();
        return 0;
    } else {
        int newTaskID = c.getInt(columnID) +1;
        c.close();
        return newTaskID;
    }
} 
```

这解决了这个问题。

# c# - 用于 Guid 的 C# 正则表达式

> ID：11040707
> 
> 赞同：146
> 
> 时间：2012-06-14T20:14:54.863
> 
> 标签：c#, regex

我需要解析一个字符串并在每个 Guid 值周围添加单引号。我在想我可以使用正则表达式来做到这一点，但我不完全是正则表达式大师。

是否有一个好的正则表达式可用于识别 Guid？

我的第二个问题是一旦我找到了一个有效的正则表达式，我假设我会使用`Regex.Replace(String, String, MatchEvaluator)`，但我不太确定语法。也许是这样的：

```
return Regex.Replace(stringToFindMatch, GuidRegex, match =>
{
    return string.Format("'{0}'", match.Groups[0].ToString());
}); 
```

我试图解析的字符串可能如下所示：

> “选择密码co0_.PASSWORD_CONFIG_ID 作为PASSWORD1_46_0_，从PASSWORD_CONFIG 密码co0_ WHERE passwordco0_.PASSWORD_CONFIG_ID=baf04077-a3c0-454b-ac6f-9fec00b8e170；@p0 = baf04077-a3c0-454b-ac6f-9fec00b8e170；@p0 = baf04077-a3c0-454b-ac6f-9fec00b8e10)]"

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-06-14T20:37:36.033

这个很简单，不需要你说的委托。

```
resultString = Regex.Replace(subjectString, 
     @"(?im)^[{(]?[0-9A-F]{8}[-]?(?:[0-9A-F]{4}[-]?){3}[0-9A-F]{12}[)}]?$", 
     "'$0'"); 
```

这与以下样式匹配，这些样式都是 GUID 的等效且可接受的格式。

```
ca761232ed4211cebacd00aa0057b223
CA761232-ED42-11CE-BACD-00AA0057B223
{CA761232-ED42-11CE-BACD-00AA0057B223}
(CA761232-ED42-11CE-BACD-00AA0057B223) 
```

**更新 1**

@NonStatic 在评论中指出，上述正则表达式将匹配具有错误结束分隔符的误报。

这可以通过广泛支持的正则表达式条件来避免。

Conditionals are supported by the JGsoft engine, Perl, PCRE, Python, and the .NET framework. Ruby supports them starting with version 2.0\. Languages such as Delphi, PHP, and R that have regex features based on PCRE also support conditionals. (source [http://www.regular-expressions.info/conditional.html](http://www.regular-expressions.info/conditional.html))

The regex that follows Will match

```
{123}
(123)
123 
```

And will not match

```
{123)
(123}
{123
(123
123}
123) 
```

Regex:

```
^({)?(\()?\d+(?(1)})(?(2)\))$ 
```

The solutions is simplified to match only numbers to show in a more clear way what is required if needed.

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2016-02-26T09:42:43.850

Most basic regex is following:

```
(^([0-9A-Fa-f]{8}[-][0-9A-Fa-f]{4}[-][0-9A-Fa-f]{4}[-][0-9A-Fa-f]{4}[-][0-9A-Fa-f]{12})$) 
```

or you could [paste it here](https://regex101.com/r/hD8sJ8/3).

Hope this saves you some time.

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2018-04-12T02:23:05.783

For C# .Net to find and replace any guid looking string from the given text,

Use this RegEx:

```
[({]?[a-fA-F0-9]{8}[-]?([a-fA-F0-9]{4}[-]?){3}[a-fA-F0-9]{12}[})]? 
```

Example C# code:

```
var result = Regex.Replace(
      source, 
      @"[({]?[a-fA-F0-9]{8}[-]?([a-fA-F0-9]{4}[-]?){3}[a-fA-F0-9]{12}[})]?", 
      @"${ __UUID}", 
      RegexOptions.IgnoreCase
); 
```

Surely works! And it matches & replaces the following styles, which are all equivalent and acceptable formats for a GUID.

```
"aa761232bd4211cfaacd00aa0057b243" 
"AA761232-BD42-11CF-AACD-00AA0057B243" 
"{AA761232-BD42-11CF-AACD-00AA0057B243}" 
"(AA761232-BD42-11CF-AACD-00AA0057B243)" 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-28T10:25:00.210

In .NET Framework 4 there is enhancement System.Guid structure, These includes new TryParse and TryParseExact methods to Parse GUID. Here is example for this.

```
 //Generate New GUID
    Guid objGuid = Guid.NewGuid();
    //Take invalid guid format
    string strGUID = "aaa-a-a-a-a";

    Guid newGuid;

    if (Guid.TryParse(objGuid.ToString(), out newGuid) == true)
    {
        Response.Write(string.Format("<br/>{0} is Valid GUID.", objGuid.ToString()));
    }
    else
    {
        Response.Write(string.Format("<br/>{0} is InValid GUID.", objGuid.ToString()));
    }

    Guid newTmpGuid;

    if (Guid.TryParse(strGUID, out newTmpGuid) == true)
    {
        Response.Write(string.Format("<br/>{0} is Valid GUID.", strGUID));
    }
    else
    {
        Response.Write(string.Format("<br/>{0} is InValid GUID.", strGUID));
    } 
```

In this example we create new guid object and also take one string variable which has invalid guid. After that we use TryParse method to validate that both variable has valid guid format or not. By running example you can see that string variable has not valid guid format and it gives message of "InValid guid". If string variable has valid guid than this will return true in TryParse method.

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-03-27T16:12:28.490

You can easily auto-generate the C# code using: [http://regexhero.net/tester/](http://regexhero.net/tester/).

Its free.

Here is how I did it:

![enter image description here](../Images/ff03cd5284c0fa37beb7160d0b3ee01e.png)

The website then auto-generates the .NET code:

```
string strRegex = @"\b[A-F0-9]{8}(?:-[A-F0-9]{4}){3}-[A-F0-9]{12}\b";
Regex myRegex = new Regex(strRegex, RegexOptions.None);
string strTargetString = @"     {CD73FAD2-E226-4715-B6FA-14EDF0764162}.Debug|x64.ActiveCfg =         Debug|x64";
string strReplace = @"""$0""";

return myRegex.Replace(strTargetString, strReplace); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-06-05T14:02:13.047

I use an easier regex pattern

```
^[0-9A-Fa-f\-]{36}$ 
```

# android - 无法在 Maven 中将带有 ActionBarSherlock 的 android 应用程序编译为 apklib

> ID：11040708
> 
> 赞同：3
> 
> 时间：2012-06-14T20:15:01.233
> 
> 标签：android, maven-2, actionbarsherlock

尝试使用 Maven 编译/运行我的应用程序时出现此错误。我已成功将 actionbarsherlock 作为库安装到我的本地 maven 存储库中，并将依赖项添加到我的应用程序中。但是仍然无法编译我的应用程序，我什至尝试在编译时强制使用 sdk-15。有任何想法吗？

Maven 日志

```
C:\repository\myapp>mvn install
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building myapp 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- android-maven-plugin:3.1.1:generate-sources (default-generate-sources) @ myapp ---
[DEBUG] Expanding: user\.m2\repository\com\actionbarsherlock\library\4.1.0\library-4.1.0.apklib into C:\repository\myapp\target\unpack\apklibs\com.actionbarsherlock_library_apklib_4.1.0
[DEBUG] expand complete
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] C:\Program Files (x86)\Android-SDK\platform-tools\aapt.exe [package, -m, -J, C:\repository\myapp\target\generated-sources\r, -M, C:\repository\myapp\AndroidManifest.xml, -S, C:\repository\myapp\res, -S, C:\repository\myapp\target\unpack\apk
libs/com.actionbarsherlock_library_apklib_4.1.0/res, --auto-add-overlay, -I, C:\Program Files (x86)\Android-SDK\platforms\android-15\android.jar]
[INFO] C:\Program Files (x86)\Android-SDK\platform-tools\aapt.exe [package, -m, -J, C:\repository\myapp\target\generated-sources\r, --custom-package, com.actionbarsherlock, -M, C:\repository\myapp\AndroidManifest.xml, -S, C:\repository\myapp\res, -S, C
:\repository\myapp\target\unpack\apklibs/com.actionbarsherlock_library_apklib_4.1.0/res, --auto-add-overlay, -I, C:\Program Files (x86)\Android-SDK\platforms\android-15\android.jar]
[INFO]
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ myapp ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\repository\myapp\src\main\resources
[INFO] skip non existing resourceDirectory C:\repository\myapp\target\generated-sources\extracted-dependencies\src\main\resources
[INFO] Copying 0 resource
[INFO]
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ myapp ---
[INFO] Compiling 130 source files to C:\repository\myapp\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR :
[INFO] -------------------------------------------------------------
[ERROR] \repository\myapp\target\unpack\apklibs\com.actionbarsherlock_library_apklib_4.1.0\src\com\actionbarsherlock\internal\widget\IcsAdapterView.java:[31,33] cannot find symbol
symbol  : class AccessibilityNodeInfo
location: package android.view.accessibility
.....
[ERROR] \repository\myapp\target\unpack\apklibs\com.actionbarsherlock_library_apklib_4.1.0\src\com\actionbarsherlock\internal\ActionBarSherlockNative.java:[232,55] cannot find symbol
symbol  : class ActionMode
location: package android.view
.....
[ERROR] \repository\myapp\target\unpack\apklibs\com.actionbarsherlock_library_apklib_4.1.0\src\com\actionbarsherlock\internal\nineoldandroids\widget\NineLinearLayout.java:[62,17] cannot find symbol
symbol  : method setTranslationX(float)
location: class android.widget.LinearLayout
......
[ERROR] \repository\myapp\target\unpack\apklibs\com.actionbarsherlock_library_apklib_4.1.0\src\com\actionbarsherlock\internal\widget\IcsAdapterView.java:[878,4] method does not override or implement a method from a supertype
[INFO] 100 errors
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 29.225s
[INFO] Finished at: Thu Jun 14 22:00:04 CEST 2012
[INFO] Final Memory: 15M/175M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project myapp: Compilation failure: Compilation failure:
[ERROR] \repository\myapp\target\unpack\apklibs\com.actionbarsherlock_library_apklib_4.1.0\src\com\actionbarsherlock\internal\widget\IcsAdapterView.java:[31,33] cannot find symbol
[ERROR] symbol  : class AccessibilityNodeInfo
[ERROR] location: package android.view.accessibility
[ERROR] \repository\myapp\target\unpack\apklibs\com.actionbarsherlock_library_apklib_4.1.0\src\com\actionbarsherlock\internal\widget\IcsAdapterView.java:[893,50] cannot find symbol
[ERROR] symbol  : class AccessibilityNodeInfo
[ERROR] location: class com.actionbarsherlock.internal.widget.IcsAdapterView<T>
.....
[ERROR] symbol  : class FragmentTransaction
[ERROR] location: package android.app
[ERROR] \repository\myapp\target\unpack\apklibs\com.actionbarsherlock_library_apklib_4.1.0\src\com\actionbarsherlock\internal\widget\IcsAdapterView.java:[67,32] cannot find symbol
[ERROR] symbol  : variable HONEYCOMB
[ERROR] location: class android.os.Build.VERSION_CODES
[ERROR] \repository\myapp\target\unpack\apklibs\com.actionbarsherlock_library_apklib_4.1.0\src\com\actionbarsherlock\internal\widget\ActionBarView.java:[201,34] cannot find symbol
......
[ERROR] symbol  : variable ICE_CREAM_SANDWICH
[ERROR] location: class android.os.Build.VERSION_CODES
[ERROR] \repository\myapp\target\unpack\apklibs\com.actionbarsherlock_library_apklib_4.1.0\src\com\actionbarsherlock\internal\widget\ActionBarView.java:[1318,21] cannot find symbol 
```

我的 pom.xml

```
<project>
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.company.android</groupId>
    <artifactId>myapp</artifactId>
    <version>0.1-SNAPSHOT</version>
    <packaging>apk</packaging>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>2.2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.actionbarsherlock</groupId>
            <artifactId>library</artifactId>
            <version>4.1.0</version>
            <type>apklib</type>
        </dependency>
    </dependencies>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <java.version>1.6</java.version>
        <android.home>C:\Program Files (x86)\Android-SDK</android.home>
        <android.version>4.0.3</android.version>
        <android.platform>15</android.platform>
        <android-support.version>r7</android-support.version>
        <android-maven.version>3.1.1</android-maven.version>
        <junit.version>4.10</junit.version>
    </properties>

    <build>
        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-javadoc-plugin</artifactId>
                <version>2.8</version>
            </plugin>

            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>${android-maven.version}</version>
                <extensions>true</extensions>
                <configuration>
                    <sdk>
                        <path>${android.home}</path>
                        <platform>${android.platform}</platform>
                    </sdk>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T20:22:49.773

您需要针对 ICS 进行编译。将您的 android 依赖版本更改为`4.0.1.2`.

# java - 为集合中的每个项目创建 Swing GUI 元素 - JAVA

> ID：11040709
> 
> 赞同：0
> 
> 时间：2012-06-14T20:15:05.113
> 
> 标签：java, swing, user-interface, linked-list

如果我有一组对象：

```
public class Party {
    LinkedList<Guy> partyList = new LinkedList<Guy>();

    public void addGuy(Guy c) {
        partyList.add(c);
    }
} 
```

还有一个 tabbedPane：

```
public class CharWindow
{
private JFrame  frame;

/**
 * Launch the application.
 */
public static void main(String[] args)
{
    EventQueue.invokeLater(new Runnable()
    {
        @Override
        public void run()
        {
            try
            {
                CharWindow window = new CharWindow();
                window.frame.setVisible(true);
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the application.
 */
public CharWindow()
{
    initialize();
}

/**
 * Initialize the contents of the frame.
 */
private void initialize()
{
    frame = new JFrame();
    frame.setBounds(100, 100, 727, 549);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JTabbedPane tabbedPane = new JTabbedPane(SwingConstants.TOP);
    frame.getContentPane().add(tabbedPane, BorderLayout.CENTER);

    JTabbedPane PartyScreen = new JTabbedPane(SwingConstants.TOP);
    tabbedPane.addTab("Party Screen", null, PartyScreen, null);

    JTabbedPane tabbedPane_2 = new JTabbedPane(SwingConstants.TOP);
    tabbedPane.addTab("New tab", null, tabbedPane_2, null);

    JTabbedPane tabbedPane_3 = new JTabbedPane(SwingConstants.TOP);
    tabbedPane.addTab("New tab", null, tabbedPane_3, null);
}
} 
```

如何将内容添加到 tabbedPane“派对屏幕”，以便它为我的 LinkedList 中的每个项目显示一个 JLabel“名称”和一个垂直的 JSeparator？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:39:23.940

首先，JTabbedPane 是为每个元素面板创建一个新选项卡的小部件。它*不是*选项卡式界面的子级。（例如，JTabbedPane 应该包含一个名为 partyScreen 的 JPanel。）

```
JTabbedPane tabbedPanel = new JTabbedPane(); // holds all tabs

// this is how you add a tab:
JPanel somePanel = new JPanel();
tabbedPanel.addtab("Some Tab", somePanel);

// this is how you'd add your party screen
JPanel partyScreen = new JPanel();
tabbedPanel.addTab("Party Screen", partyScreen); 
```

请记住，Java 命名约定有一个以小写字母开头的变量——因此 partyScreen 优于 PartyScreen。

然后遍历每个`Guy`对象`Party`并添加适当的组件。我不知道您为什么使用 a`LinkedList`而不是 a `List`，但我假设您有充分的理由未包含在上面的代码中。

```
// myParty is an instance of Party; I assume you have some sort of accessor to 
// the partyList
LinkedList<Guy> partyList = myParty.getPartyList();
ListIterator<Guy> it = partyList.listIterator();
while( it.hasNext() ) {
    Guy g = it.next();
    partyScreen.add(new JLabel( g.getName() ));
    partyScreen.add(new JSeparator() );
} 
```

根据您希望它在`partyScreen`面板中的排列方式，您可能需要查看[Layout Manager](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。

# ajax - JQuery - 迭代 JSON 响应

> ID：11040711
> 
> 赞同：1
> 
> 时间：2012-06-14T20:15:44.287
> 
> 标签：ajax, json, jquery

**到目前为止的故事......**

尝试学习 JS 和 JQuery，我想我会从基础开始，然后尝试一点 AJAX *“键入时搜索”的*魔法。首先，我只想正确处理 AJAX 部分并遍历返回的 JSON 对象并将其附加到无序列表中。我此时没有对输入的值与返回的 JSON 结果进行验证，我只想要一种受控的方式来确定**何时**执行 AJAX getJSON 调用。稍后，一旦我做对了，我将进行验证。

无论如何，我无法在 ul 中显示帐号。目前唯一显示的是li 中的**AccountNumber**而不是我的 ACCOUNT NUMBERS

我的 JS 代码在这里：

[http://jsfiddle.net/garfbradaz/HBYvq/54/](http://jsfiddle.net/garfbradaz/HBYvq/54/)

但为了方便也在这里：

```
$(document).ready(function() {
$("#livesearchinput").keydown(function(key) {
    $.ajaxSetup({
        cache: false
    });
    $.getJSON(" /gh/get/response.json//garfbradaz/MvcLiveSearch/tree/master/JSFiddleAjaxReponses/", function(JSONData) {
        $('<ul>').attr({
            id: "live-list"
        }).appendTo('div#livesearchesults');
        $.each(JSONData, function(i, item) {
            var li = $('<li>').append(i).appendTo('ul#live-list');
            //debugger;
        });

    });

}); 
```

});​</p>

我的 JSON 文件托管在 github 上，但为了方便起见，这里是：

[https://github.com/garfbradaz/MvcLiveSearch/blob/master/JSFiddleAjaxReponses/demo.response.json](https://github.com/garfbradaz/MvcLiveSearch/blob/master/JSFiddleAjaxReponses/demo.response.json)

```
{

   "AccountNumber": [

      1000014,

      1015454,

      1000013,

      1000012,

      12

   ]

} 
```

这也是我的 Fiddler 结果，证明我的 JSON 对象正在被返回。

![在此处输入图像描述](../Images/6e5c1cc2091edbe16596e9490d1d4d99.png)

**编辑：**

关于我想要实现的目标有很多疑问，所以这里是：

1.  学习 jQuery
2.  构建**“键入时搜索”**输入框。首先，我想首先正确处理 AJAX 部分，然后我将构建一个利用此功能的 MVC3 (ASP.NET) 应用程序，并整理 JQuery 代码，其中包括对输入与返回的 JSON 的验证。

下面的 Cheesos 答案对我有用，JSFiddle 可以在这里找到：

[http://jsfiddle.net/garfbradaz/JYdTU/](http://jsfiddle.net/garfbradaz/JYdTU/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:00:21.037

首先，我认为 keydown 可能是进行 json 调用的错误时间，或者至少......*每次*keydown 都进行 json 调用是错误的。这电话太多了。如果我在输入框中输入“hello”，大约 0.8 秒内，就有 5 个 json 请求和响应。

但是你可以让它只在第一次通过时检索 json，使用一个标志。

像这样的东西：

```
$(document).ready(function() {
    var $input = $("#livesearchinput"), filled = false;
    $.ajaxSetup({ cache: false });
    $input.keydown(function(key) {
        if (!filled) {
          filled = true;
          $.getJSON("json101.js", function(JSONData) {
            var $ul =
            $('<ul>')
                .attr({id: "live-list"})
                .appendTo('div#livesearchesults');
            $.each(JSONData, function(i, item) {
                $.each(item, function(j, val) {
                  $('<li>').append(val).appendTo($ul);
                });
            });
          });
        }
    });
}); 
```

关键是我使用了一个内部`$.each()`.

外部`$.each()`可能是不必要的。您收到的 JSON 在对象中只有一个元素 - “AccountNumber”，它是一个数组。所以你不需要遍历对象中的所有项目。

这可能看起来像这样：

```
 $.each(JSONData.AccountNumber, function(i, item) {
                $('<li>').append(item).appendTo($ul);
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:49:08.030

你可能想要的是这样的：

```
 $.each(JSONData.AccountNumber, function(i, item) {
        var li = $('<li>').append(item).appendTo('ul#live-list');
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:53:02.383

你的代码：

```
$.each(JSONData, function(i, item) {
    var li = $('<li>').append(i).appendTo('ul#live-list');
}); 
```

说“迭代外部 JSON 结构的键和值，并打印键”。第一个键是“AccountNumber”，因此您最终会打印它。

您想要做的是遍历存储在的数组`JSONData.AccountNumber`，并打印值：

```
$.each(JSONData.AccountNumber, function() {
    var li = $('<li>').append(this).appendTo('ul#live-list');
}); 
```

# javascript - JQuery 选择值到变量中

> ID：11040714
> 
> 赞同：0
> 
> 时间：2012-06-14T20:15:58.373
> 
> 标签：javascript, jquery

我已经看遍了，无法弄清楚为什么这段代码不起作用。

[http://jsfiddle.net/kCLxJ/](http://jsfiddle.net/kCLxJ/)

当下拉列表设置为值“3”或“4”时，下拉列表下方应弹出另一个字段。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:18:20.820

[jsFiddle](http://jsfiddle.net/A4cUN/)

改变这个：

```
var val = $('#event_options_id option:selected').html(); 
```

到 ：

```
var val = $('#event_options_id').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:19:17.203

**[固定工作版本](http://jsfiddle.net/loktar/kCLxJ/3/)**

首先，您需要`.val()`像指出的那样打电话。

```
var val = $('#event_options_id option:selected').val(); 
```

然后根据您使用的选择器，您需要`parseInt()`在 val 上使用它以使其成为这样的数字

```
if ($.inArray(parseInt(val,10), arr) > -1) { 
```

定义数组时还有一个额外的逗号。

**完整的工作代码**

```
$(document).ready(function() {

    $('#event_options_id').change(function() {

        $('.container_add_form').remove();

        var val = $('#event_options_id option:selected').val();
        var arr = [3, 4];

        if ($.inArray(parseInt(val,10), arr) > -1) {
            $('<input type="hidden" name="age_required" id="age_required" value="yes" /><div class="container_add_form"><p class="text_content">Please enter your age for grouping purposes.<br /><input name="age" type="text" id="age" size="3" /></p></div>').fadeIn('slow').appendTo('.add_form');
        }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:21:28.587

1) 使用`.val()`而不是`.html()`获取选项的值。

2）您将字符串值与数组中的数字进行比较，这总是会失败。

[http://jsfiddle.net/kCLxJ/4/](http://jsfiddle.net/kCLxJ/4/)

```
var val = $('#event_options_id option:selected').val();
var arr = ['3', '4']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T20:30:24.400

更改这些行。

```
 var val = $('#event_options_id option:selected').val();
    var arr = ["3", "4"]; 
```

要获取组合框值，您必须使用 'val()' 而不是 'html()'。而且您必须将数组的元素更改为字符串。变量 val 是一个字符串。inArray 将尝试将元素作为字符串而不是整数来查找。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-14T20:22:31.900

我更新了你的代码：http: [//jsfiddle.net/kCLxJ/7/](http://jsfiddle.net/kCLxJ/7/)

```
$(document).ready(function() {

    $('#event_options_id').change(function() {

        $('.container_add_form').remove();

        // you used .text() but should've used .val()
        var val = $('#event_options_id option:selected').val();
        var arr = [3, 4];

        /*
            another problem was that you didn't parse the value into an integer
            but you were comparing the value to an array of integers
        */
        if ($.inArray(parseInt(val), arr) > -1) {
            $('<input type="hidden" name="age_required" id="age_required" value="yes" /><div class="container_add_form"><p class="text_content">Please enter your age for grouping purposes.<br /><input name="age" type="text" id="age" size="3" /></p></div>').fadeIn('slow').appendTo('.add_form');
        }
    });
}); 
```

# c# - 选择 DGV 单元

> ID：11040717
> 
> 赞同：-1
> 
> 时间：2012-06-14T20:16:11.787
> 
> 标签：c#, winforms

请问这里有什么问题

```
foreach (DataGridViewRow row in frm02.dgv02.Rows)
{
foreach (DataGridViewCell cell in row.Cells)
{
if (cell.Value.ToString() == "323")
//if (cell.RowIndex == 3)
{
cell.Selected = true; 
```

我得到了 NullReferenceException

**如果**我用第二个替换第一个 - 它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:21:18.433

您正在访问的单元格中的值似乎包含一个空值。然后，您对该空值调用 .ToString() 。在尝试对该值调用 .ToString() 之前，您可以进行空检查。

你会这样做：

```
if (cell.Value != null && cell.Value.ToString() == "323") 
```

# javascript - jQueryUI - 一页上的多个滑块

> ID：11040719
> 
> 赞同：3
> 
> 时间：2012-06-14T20:16:18.763
> 
> 标签：javascript, jquery-ui

我想在一个页面上有多个 jQuery ui 滑块。我看了一堆例子，仍然不明白为什么我不能让它工作。这是我的代码。

HTML

```
 <div class='eigenvalue'>
    <div class="slidername">Eigenvector 1</div>
    <div id='s1' class="slider"></div>
    <div id='r1'  class="slider-result">0</div> 
  </div>
  <div class='eigenvalue'>
    <div class="slidername">Eigenvector 2</div>
    <div id='s1' class="slider"></div>
    <div id='r1'  class="slider-result">0</div> 
  </div> 
```

Javascript

```
$(function(){
  $('.eigenvalue').each(function(){
    $( this).('#s1').empty().slider({
       animate: true,
       range: "min",
       value: 0,
       min: -5,
       max: 5,
       step: 0.1,
       slide: function( event, ui ) {
         $( this ).('#r1').html( ui.value );
       },
      change: function(event, ui) {

        //Functionality 
       }
    });
  });
}); 
```

如果有人能指出我正确的方向，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T11:29:38.397

感谢下面的一些评论，问题被确定 - 我需要使用[.find()](http://api.jquery.com/find)

以下是正确的javascript代码：

```
$(function(){
  $('.eigenvalue').each(function(){
    $( this).find('#s1').empty().slider({
      animate: true,
      range: "min",
      value: 0,
      min: -5,
      max: 5,
      step: 0.1, //this gets a live reading of the value and prints it on the page
      slide: function( event, ui ) {
        $( this ).find('#r1').html( ui.value );
      },
      change: function(event, ui) {
      }
    });
  });
}); 
```

# c# - 从 Silverlight 控件导航 URL

> ID：11040723
> 
> 赞同：0
> 
> 时间：2012-06-14T20:16:28.463
> 
> 标签：c#, asp.net, silverlight, silverlight-4.0

我在 Silverlight 控件中工作，我需要从 XML 文件同步上传一些静态数据。该文件在我的同一个 Web 服务器中。我可以像这样获取控件的 URI：

```
HtmlPage.Document.DocumentUri.ToString(); 
```

这将返回带有显示控件的查询的 URI：

```
http://example.com:8085/MyWeb/CustomPage.aspx?waid=a1a5780a8ddea6c517ae1-b4ef&nid=id78 
```

我需要的只是[http://example.com:8085/MyWeb](http://example.com:8085/MyWeb)（除了主机名/端口外，它总是相同的）我不想硬编码，因为这将部署在多个服务器中。所以，我想做的是获取网站 URI。我在 DocumentUri 对象中尝试了一些东西，比如 localpath、host、AbsolutePath 和其他东西，但似乎都没有给我我需要的东西。如果不进行大量操作，我怎么能做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:31:19.570

尝试以下操作：

```
var absoluteUri = Application.Current.Host.Source.AbsoluteUri;
int lengthWithoutParams = absoluteUri.IndexOf("?") < 0 ? absoluteUri.Length : absoluteUri.IndexOf("?");
string uploadUrl = absoluteUri.Substring(0, lengthWithoutParams).Replace("/ClientBin/<YourXAPfile>.xap", filePath); 
```

最后：

```
HtmlPage.Window.Navigate(new Uri(uploadUrl)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:20:41.710

尝试：

```
System.Windows.Browser.HtmlPage.Window.Navigate(new Uri("urlString")); 
```

# jquery - jQuery 选择器中的正确结束标记

> ID：11040725
> 
> 赞同：1
> 
> 时间：2012-06-14T20:16:36.750
> 
> 标签：jquery, html, jquery-selectors

这是我在网上看到的一段代码，我想知道`<p/>`是错字还是什么

```
 'config' : {

    'content' : $('#topGlobal')
  },

topGlobal.$content= topGlobal.config.content;

topGlobal.$sections = topGlobal.$content.
    find('ul.sections > li');

topGlobal.$side_nav = $('<p/>')
  .attr('id','side_nav ')
  .prependTo(topGlobal.$content);

topGlobal.$item_nav = $('<p/>')
  .attr('id','item_nav')
  .insertAfter(topGlobal.$side_nav);

... 
```

在`<p/>`此代码的几个附加部分中重复了。这听起来像是一个愚蠢的问题，虽然我没有测试过，但我知道`<p></p>`HTML 是正确的。但是因为作者是非常受人尊敬的 JS 作者，所以我在问。这可能是一个错字，但我仍然想知道为什么代码选择了结束标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:18:27.653

`<p/>`是您可以在 jQuery 中用于创建新的 HTML 元素实例的简写。在这种情况下，一个段落元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T20:23:38.713

`<p/>`相当于`<p></p>`在 HTML 中。它不是一个结束标签，它是`</p>`.

# vba - 在 Excel 中对一列中的数据执行计算并将结果移动到另一列。

> ID：11040727
> 
> 赞同：0
> 
> 时间：2012-06-14T20:16:43.663
> 
> 标签：vba, excel, vectorization

这是我第一次使用VBA，所以我对excel VBA的语法一点都不好（我之前学过c++和matlab）。

我正在尝试获取一列数据，进行一些简单的计算（例如乘以 3），然后将其放入新列中。

现在我试图排序的数据中有重复项。例如，此列有：

```
1  
2  
3  
4

2  
3  
6   
8    
9  
2  
3 
```

重复的数字，有时是空白。现在我不太担心排序。我很难从一列中取出一堆数组，然后在下一列中放置一组不同的数组。我该怎么做呢？下面的代码适用于字符串，我该如何调整呢？谢谢！

这是我的尝试：

```
Sub unique()
    Dim arr As New Collection, a
    Dim aFirstArray() As Variant
    Dim i As Long

    aFirstArray() = Range("E:E")
    ' On Error Resume Next
    For Each a In aFirstArray
        arr.Add a, Str(a)
        'I tried changing Str(a) to Integer(a), apparently it doesn't work like this in Excel
    Next

    For i = 1 To arr.Count
        Cells(i, 3) = arr(i)
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:55:20.540

这可能与您的思维过程不完全一致，但我认为本质就在那里，使用一些不同的 VBA 工具。让我知道您是否有问题或它不能解决您的问题。

此代码忽略重复和空白单元格。如果您想将它们保留在列表中，应该很容易调整。

```
Sub unique()

Dim i As Integer
Dim dict As New Dictionary
Dim cel As Range
Dim rng As Range

Set rng = Range("A1:A12")

i = 1
For Each cel In rng
    If cel <> vbNullString Then
        If Not dict.Exists(cel.Value) Then
            dict.Add cel.Value, i
            i = i + 1
        End If
    End If
Next

For i = 1 To dict.Count - 1
    Cells(i, 3) = dict.Keys(i)
Next

End Sub 
```

# meteor - 如何根据集合的大小制作有条件的模板？

> ID：11040730
> 
> 赞同：14
> 
> 时间：2012-06-14T20:16:51.493
> 
> 标签：meteor, handlebars.js

我想做这样的事情：

```
<template name="list">
  <ul>
  {{#if items}}
      {{#each items}}
        <li>{{itemContents}}</li>
      {{/each}}
  {{else}}
    <li class="placeholder">There are no items in this list.</li>
  {{/if}}
  <ul>
</template> 
```

`items`Meteor.cursor在哪里：

```
Template.list.items = function() {
  return Items.find();
}; 
```

但是，上面的代码不起作用，因为即使没有项目，条件也会积极评估（这有点令人惊讶，因为 Handlebars 评估`[]`为假）。我尝试将条件更改为

```
{{#if items.count}} 
```

但后来我得到了神秘的错误

```
Unknown helper 'items' 
```

那么，有没有办法在流星把手模板中编写这样的条件？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-12T18:42:36.460

这将是正确的方法：

```
<template name="list">
  <ul>
  {{#each items}}
    <li>{{itemContents}}</li>
  {{else}}
    <li class="placeholder">There are no items in this list.</li>
  {{/each}}
  <ul>
</template> 
```

有关更多信息，请查看[handlebarsjs.com](http://handlebarsjs.com/)。

*（Meteor 使用受 Handlebars 启发的[Spacebars](https://github.com/meteor/meteor/blob/devel/packages/spacebars/README.md)。所以语法几乎相同。）*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-14T22:48:32.013

`with`通过使用更改评估上下文，我能够使我的模板正常工作：

```
<template name="list">
  <ul>
  {{#with items}}
    {{#if count}}
        {{#each this}}
          <li>{{itemContents}}</li>
        {{/each}}
    {{else}}
      <li class="placeholder">There are no items in this list.</li>
    {{/if}}
  {{/with}}
  <ul>
</template> 
```

注意修改后的表达式`{{#if count}}`和`{{#each this}}`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T21:13:54.663

过去几周我一直在评估 Handlebars，我遇到了类似的问题。对我有用的是读取长度属性并添加 else 标签。

```
 {{#if competitions.length}}
        <div class="game-score span-4"> 
        ...code goes here...    
        </div>
   {{else}}
        {{> allGameNotes}}
   {{/if} 
```

# ruby-on-rails - Rails 统计属性的数量

> ID：11040743
> 
> 赞同：2
> 
> 时间：2012-06-14T20:17:44.020
> 
> 标签：ruby-on-rails, attributes, count

在 Rails 3.1 中，我如何计算对象的属性数量？

例如，我有一个名为 Projects 的对象，我想知道它有多少个属性（列）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T20:21:40.613

干得好：

```
Project.columns.size 
```

[文档在这里](http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/ClassMethods.html#method-i-attribute_names)。

# ios - Webcore 中的内存泄漏

> ID：11040748
> 
> 赞同：1
> 
> 时间：2012-06-14T20:17:56.160
> 
> 标签：ios, ios5, memory-management, memory-leaks

我有一个相当奇怪的问题。当我在 iOS 5.0 中运行我的应用程序时，没有泄漏，但总分配量继续以大约 10KB/秒的速度增长，而我没有做任何事情。我在应用程序中使用 UIWebview。

我运行仪器分配工具来获取数据，发现以下代码导致了泄漏，但不明白为什么这个似乎是不同线程的代码会导致它。它没有任何应用程序代码。这似乎根本不会在 iOS 4.3 上发生。任何帮助将不胜感激：

0 核心基础 __CFAllocatorSystemAllocate

1 CoreFoundation CFAllocatorAllocate

2 核心基础__CFBasicHashRehash

3 核心基础__CFBasicHashAddValue

4 CoreFoundation CFBasicHashAddValue

5 CoreFoundation CFSetAddValue

6 CoreFoundation CFRunLoopAddTimer

7 核心基础 __CFRunLoopAddItemToCommonModes

8 核心基础 __CFSetApplyFunction_block_invoke_0

9 CoreFoundation CFBasicHashApply

10 CoreFoundation CFSetApplyFunction

11 CoreFoundation CFRunLoopAddTimer

12 WebCore WebCore::setSharedTimerFireTime(double)

13 WebCore WebCore::MainThreadSharedTimer::setFireTime(double)

14 WebCore WebCore::ThreadTimers::sharedTimerFiredInternal()

15 WebCore WebCore::ThreadTimers::sharedTimerFired()

16 WebCore WebCore::timerFired(__CFRunLoopTimer*, void*)

17**核心基础 CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION**

18 核心基础 __CFRunLoopDoTimer

19 核心基础 __CFRunLoopRun

20 CoreFoundation CFRunLoopRunSpecific

21 核心基础 CFRunLoopRunInMode

22 WebCore RunWebThread(无效*)

23 libSystem.B.dylib_pthread_start

24 libSystem.B.dylib thread_start

# python - 在 python 列表中查找项目的排列，增加了复杂性

> ID：11040749
> 
> 赞同：2
> 
> 时间：2012-06-14T20:17:57.623
> 
> 标签：python, list, permutation

当我努力解释这一点时，请多多包涵；我的数学生疏了，我刚开始计算机编程，对不起！

假设我有一个包含 3 个项目的列表。我想在此列表中找到所有可能的项目排列，其中每个排列由 3 个项目组成。

接下来，仍然使用我的原始列表，我想找到列表项目的所有可能排列，除了我只希望排列由两个项目组成。

最后，我想再次做同样的事情，除了安排只包含一个项目。

所以我期待3！+ 3！/1！+ 3!/2!，或总共 15 个安排。只是为了明确说明我想要什么，如果我的列表是 [1, 2, 3]，那么代码应该产生：

```
1, 2, 3
1, 3, 2
2, 1, 3
2, 3, 2
3, 1, 2
3, 2, 1

1, 2
1, 3
2, 1
2, 3
3, 1
3, 2

1
2
3 
```

我在下面写的代码可以做我上面写的，但只适用于长度为 3 的列表。我可以通过添加额外的“for”循环和“elif”语句来修改代码以处理更大长度的列表，但我觉得必须有一种方法来概括这种模式。我应该怎么做才能为任何长度的列表获得上述类型的排列？

我认为我详尽的枚举方法可能会使这比它需要的更复杂......如果找到解决方案，将尝试考虑其他方法并更新。

```
def helperFunction(itemsList):

    fullPermutationsOutputList = []

    def fullPermutations(itemsList, iterations):

        for item1 in itemsList:
            if iterations == 2:
                if len([item1]) == len(set([item1])):
                    fullPermutationsOutputList.append((item1,))
            else:    
                for item2 in itemsList:
                    if iterations == 1:
                        if len([item1, item2]) == len(set([item1, item2])):
                            fullPermutationsOutputList.append((item1, item2))
                    else:
                        for item3 in itemsList:
                            if iterations == 0:
                                if len([item1, item2, item3]) == len(set([item1, item2, item3])):
                                    fullPermutationsOutputList.append((item1, item2, item3))

        if iterations == 0:                        
            fullPermutations(itemsList, iterations + 1)
        elif iterations == 1:
            fullPermutations(itemsList, iterations + 1)

    fullPermutations(itemsList, 0)
    return fullPermutationsOutputList 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T20:24:07.983

只是[`itertools.permutations`](http://docs.python.org/library/itertools.html#itertools.permutations)。如果你想要精确的算法，你可以检查它的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:28:12.530

这会做你想要的：[https ://stackoverflow.com/a/10784693/1419494](https://stackoverflow.com/a/10784693/1419494)

```
def perm(list_to_perm,perm_l,items,out):
            if len(perm_l) == items:
                out +=[perm_l]
            else:
                for i in list_to_perm:
                    if i not in perm_l:
                        perm(list_to_perm,perm_l +[i],items,out)

a = [1,2,3]
for i in range(1,len(a) +1):
    out = []
    perm(a,[],i,out)
    print out 
```

# wpf - winforms，WPF和metro的区别？

> ID：11040751
> 
> 赞同：11
> 
> 时间：2012-06-14T20:18:03.583
> 
> 标签：wpf, winforms, windows-8, windows-store-apps, windows-10-universal

Metro 与 WPF 和 WinForms 有何不同？

Windows App Store 是否只允许销售 Metro 风格的应用程序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T20:25:12.583

Metro 应用程序是专门为 Windows 8 编写的应用程序，利用了 Windows 8 必须提供的所有优势。它们可以放在 Windows 8 应用商店中。[http://devcomponents.com/blog/?p=1061](http://devcomponents.com/blog/?p=1061)

WinForms 是旧的 Windows 格式，在某种程度上被 WPF 取代。WPF 更加优化并包含例如矢量图形。与 WinForms 应用程序相比，WPF 提供了更好的性能。它提供了更丰富的 UI 体验。它使用 XAML 进行开发（UI 的 XML 描述）。WinForms 和 WPF 为您提供现有的 Windows 外观。

Metro Apps 看起来更像 Windows Phone 7 应用程序，但功能更多（但我认为未来两者都会融合）。它们主要针对平板电脑市场和触摸屏（以及未来的混合设备）。Metro 应用程序可以与 iPad 应用程序相比，但功能更丰富，并具有 Windows 操作系统的全部功能。

如果您想编写使用鼠标界面并且像当前 Windows 应用程序一样工作的标准 Windows 应用程序，我建议使用 WPF。

如果您想专门针对 Windows 8 市场并创建触摸友好的应用程序，您必须使用 Metro 应用程序。

我不再建议将 WinForms 用于新项目。仅适用于迁移到 WPF 在时间和金钱上过于昂贵的旧现有项目。

您可以查看 MS patterns & practice for WPF 和 WinForms 架构发布的架构指南以获得进一步的建议（它还不包含 Metro Apps）。[http://apparchguide.codeplex.com/](http://apparchguide.codeplex.com/)

希望有帮助。

# php - PHP 无法连接到 RDS 上的 MySQL

> ID：11040760
> 
> 赞同：2
> 
> 时间：2012-06-14T20:18:55.437
> 
> 标签：php, mysql, amazon-ec2, amazon-web-services, amazon-rds

最近几天我遇到了一个奇怪的问题，即RDS上的php无法连接到mysql，而手动连接很好。

所以我有几个 php 脚本位于我们托管在 EC2 上的服务器上，客户端调用这些脚本与 RDS 上的 mysql 服务器进行通信。脚本已设置，因此如果发生任何连接错误，它们会向我发送电子邮件通知。

所以最近几天我收到了数千封来自我的脚本的错误电子邮件，在最初的几天里，错误很简单，说服务器主机无法识别，但我确信地址是正确的。现在错误几乎都是说“由于许多连接错误，主机 XXX 被阻止，使用 mysqladmin flush-hosts 解除阻止......”如果我刷新主机，错误会在一段时间后返回给我。

最让我困惑的是，我无法重现该问题！我尝试通过命令行和测试 php 脚本从我的 EC2 服务器连接到 RDS 服务器……它们都可以工作！如果我手动调用向我发送错误电子邮件的脚本，它们也可以工作！查看 RDS 监视器，所有统​​计数据看起来都正常，CPU 在 50% 左右反弹，并且硬盘空间充足。

所以我现在完全糊涂了......谁能给我一些关于如何解决这个问题的见解？我现在都不知道在哪里看...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:16:38.533

您需要检查与 mysql 服务器的连接并检查错误。在此之前，您可以使用“刷新主机”来临时解决问题。请注意，这应该仅用作临时修复。

# java - Java - 忽略字符串中的分隔符

> ID：11040764
> 
> 赞同：2
> 
> 时间：2012-06-14T20:19:27.123
> 
> 标签：java

我有一个使用管道符号“| 作为分隔符的字符串。但是，字符串数据也*包含*管道符号。有没有办法忽略这个？

例子：

```
name|address|age

John|123 Wood Road|Street, London|25 
```

因此，当我这样做时 -

```
text.split("\\|") 
```

给我：

```
John

123 Wood Road

Street, London

25 
```

我期待这个：

```
John

123 Wood Road|Street, London

25 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T20:26:44.833

`String.split()`无法区分同一符号的不同出现。您必须在代码或正则表达式中制定一些规则。根据您的数据，我猜测虽然您说管道可以出现在字符串数据中，但它确实不能出现在名称或年龄中，因此您可以执行以下操作：

```
String[] results = text.split("\\|")

String name = results[0];
String age = results[results.length - 1]

String address = results[1];
for (int i = 2; i < results.length-1; i++) {
    address = address + "|" + results[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:25:32.873

> ***但是，字符串数据也包含管道符号。有没有办法忽略这个？***

这是错误的解决方法。

如果用户输入姓名、地址和年龄，您应该**在存储之前对其进行消毒**。

那么在这种情况下，您将如何清理用户输入。好吧，您通常会使用反斜杠（在连接最终字符串之前）转义任何用户输入的管道字符，而不是存储

```
John|123 Wood Road|Street, London|25 
```

你会存储

```
John|123 Wood Road\|Street, London|25 
```

这样，您始终可以通过以下方式取回用户输入的内容

1.  拆分未转义的管道字符
2.  解开每一部分。

但是，我鼓励您为此使用库，例如​​ OpenCSV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T20:28:03.140

简单的答案是使用不同的分隔符。

尽管这不是万无一失的，因为您可能会在您的某个部分（姓名、地址或年龄）中遇到新的分隔符作为有效字符。

我更好的建议是加入某种转义字符，以便在遇到管道时不将管道视为定界管道。（也许是`\`？？？）

我想您熟悉转义字符的概念，因为您在提供给`String.split()`.

> “约翰|伍德路 123 号\|伦敦街|25”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T20:28:05.387

这是你想要的？

```
String text = "John|123 Wood Road|Street, London|25";

int first = text.indexOf("|");
int last = text.lastIndexOf("|");

String name = text.substring(0, first);
String age = text.substring(last + 1);
String address = text.substring(first + 1, last);

System.out.println(name);
System.out.println(address);
System.out.println(age); 
```

**输出：**

```
John
123 Wood Road|Street, London
25 
```

* * *

更通用的解决方案：

```
public static void main(String[] args)
{
    String text = "John|123 Wood Road|Street, London|25";
    for(String s : getArray(text, 0, 1, 0)) System.out.println(s);
}

public static String[] getArray(String text, int... pipeCount)
{
    String[] arr = text.split("\\|");
    String[] result = new String[3];

    int counter = 0;
    for(int i = 0; i < result.length; i++)
    {
        result[i] = "";
        for(int j = 0; j <= pipeCount[i]; j++) result[i] += arr[counter++];
    }
    return result;
} 
```

**输出：**

```
John
123 Wood Road|Street, London
25 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T20:28:07.133

*   通常，您不能将任何属于数据的一部分作为分隔符。如果它们是相同的字符，如何区分分隔符和数据？解决这个问题的方法是使用一些不常见的作为分隔符，如双管道`||`或其他不太可能出现在数据中的模式。
*   如果可能，您可以使用其他数据格式，如 XML、JSON、CSV 等。这比前一种解决方案要好得多，因为它总是有效的。
*   在这种特殊情况下，如果您确定只有地址可以包含`|`但名称和年龄不能包含`|`，那么您可以使用 拆分`|`，将第一个作为名称，将最后一个作为年龄，并将它们之间的所有部分作为地址。如果它们之间有多个部分，则地址包含`|`. `|`然后，您可以在知道它们是地址的一部分的情况下加入中间部分。但这不是一个好的解决方案，因为如果`|`在第一个和最后一个字段中允许，这将不起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T20:42:19.263

您可以通过某种方式转义用户输入。例如，如果`|`是您的分隔符，并且您的数据包含一个分隔符，请将其更改为`%p`（p 表示管道！）。但是你也必须逃避 all `%`。在序列化数据时执行此操作，然后在反序列化时撤消它。

# sql-server - 使用字段内容作为查询的一部分

> ID：11040766
> 
> 赞同：0
> 
> 时间：2012-06-14T20:19:30.557
> 
> 标签：sql-server, tsql

我有一个表，在其中一个字段中我存储了一个这样的字符串：

```
RMaster.dbo.fnFormatDate (GETUTCDATE(), 'Company_Enroll_YYYY-MM-DD.csv') 
```

我想将它用作我可以从我的 c# 代码调用的查询的一部分，所以查询看起来像这样：

选择 ThisField, ... 从 mytable

这是可行的吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:42:09.323

是的，只需通过嵌套生成一个 SQL 字符串。

```
SET NOCOUNT ON;
DECLARE @t TABLE (formula NVARCHAR(MAX));
INSERT @t(formula) SELECT 
  'RMaster.dbo.fnFormatDate (GETUTCDATE(), ''Company_Enroll_YYYY-MM-DD.csv'')';

DECLARE @sql NVARCHAR(MAX);

SELECT @sql = N'SELECT ' + formula + ', [other columns] 
  FROM dbo.mytable' FROM @t -- WHERE...;

PRINT @sql;
--EXEC sp_executesql @sql; 
```

**编辑**

这是处理多行场景的一种方法：

```
SET NOCOUNT ON;

CREATE TABLE dbo.src(ID INT, formula NVARCHAR(MAX));
INSERT dbo.src(ID, formula) SELECT 
  1, 'RMaster.dbo.fnFormatDate (GETUTCDATE(), ''Company_Enroll_YYYY-MM-DD.csv'')'
  UNION ALL SELECT 
  2, 'RMaster.dbo.fnFormatDate (GETUTCDATE(), 'Foo_MM.DD.YYYY.csv'')';

DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + CHAR(13) + CHAR(10) + N'UNION ALL SELECT ID, ' + formula + '
  FROM dbo.src WHERE ID = ' + CONVERT(VARCHAR(12), ID)
  FROM dbo.src -- WHERE...;

SET @sql = STUFF(@sql, 1, 12, '') + ';';

PRINT @sql;
--EXEC sp_executesql @sql;

DROP TABLE dbo.src; 
```

这会产生一个丑陋的联合查询：

```
SELECT ID, RMaster.dbo.fnFormatDate (GETUTCDATE(), 'Company_Enroll_YYYY-MM-DD.csv')
  FROM dbo.src WHERE ID = 1
UNION ALL SELECT ID, RMaster.dbo.fnFormatDate (GETUTCDATE(), 'Foo_MM.DD.YYYY.csv')
  FROM dbo.src WHERE ID = 2; 
```

您可能可以动态构建一个糟糕且复杂得多的`CASE`表达式，但只要 ID 上有一个良好的支持索引，以便每个查询都是单行查找，这应该没问题。无论如何，对 UDF 的调用可能比其余的查询更能杀死你。

# internet-explorer - window.history.back() 在 iframe 中重新加载 Internet Explorer 中的页面？

> ID：11040768
> 
> 赞同：6
> 
> 时间：2012-06-14T20:19:38.073
> 
> 标签：internet-explorer, iframe, back, browser-history

当我的页面位于 iframe 中时，我注意到 Internet Explorer 的一种奇怪行为。似乎 iframe 在调用 window.history.back() 时会自行重新加载，即使只有 URL 中的哈希值应该改变。当页面不在 iframe 中时，它会正常运行并且不会重新加载页面。知道为什么会发生这种情况以及如何预防吗？

我创建了一个小提琴，将在 IE9 中演示这一点：

[http://jsfiddle.net/peh96/5/](http://jsfiddle.net/peh96/5/)

jsfiddle 使用 iframe，因此行为将是 iframe 行为。单击“#foo”和“#bar”将更改 URL 中的哈希值。现在单击“返回”链接将触发 window.history.back()。请注意，当您这样做时时间戳会发生变化，表明页面正在重新加载。

或者，如果您直接加载 iframe：

[http://fiddle.jshell.net/peh96/5/show/](http://fiddle.jshell.net/peh96/5/show/)

您会注意到单击“返回”时时间戳不会改变。

这只是一个 IE 问题，因为无论是否在 iframe 内，Chrome 和 Firefox 都是一致的。

知道如何防止这种重新加载吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:30:30.540

好吧，当我从上下文菜单中选择*后退*命令时，它也是如此。在 IE10 中，您可以使用[HTML5 状态管理](http://msdn.microsoft.com/en-us/hh771459.aspx)。恐怕在 IE9 中您必须跟踪哈希历史，然后像这样更改它：

```
document.getElementById('back').addEventListener('click', function () {
    window.location.hash = 'abc';
}, false); 
```

**编辑**

那这个呢？当您调用时`javascript:window.top.location.hash='bar'`，您可以在父窗口中捕获`onhashchange`事件，然后`scrollTo`在 iframe 中调用。但这仅适用于同一域。

# jquery - 如何在jQuery中只选择标签之外的文本

> ID：11040770
> 
> 赞同：1
> 
> 时间：2012-06-14T20:19:45.470
> 
> 标签：jquery, html, search, selector

我正在尝试在 Wordpress 网站上为客户实现[文本突出显示搜索脚本。](https://www.nothingbutsharepoint.com/sites/eusp/Pages/search-on-this-page-using-jquery.aspx)该脚本对来自网页的原始 HTML 数据执行正则表达式搜索，将 span 标签/css 元素添加到与查询匹配的文档的任何部分。

但是，我正在尝试搜索一些多级 HTML（标题等），并且一些标签具有描述性的 id 和类名，实际上最终会被脚本找到并突出显示。当脚本在其中一个名称中找到匹配项时，这会导致一些不稳定的行为`id`（例如：搜索“Cont”会换行`<div id="Container">`变成`<div id="<span class="highlight">Cont</span>ainer">`.

这显然不是我想要的。

所以，我想知道是否有办法区分将显示在页面上的“真实文本”和原始 HTML，以便我*只能*突出显示实际显示的 HTML 元素。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:16:43.330

我删除了我的第一篇文章以避免混淆，尽管它回答了主题问题。) 但在你的情况下，我想应该使用不同的方法：

1）通过...获取所有文本节点

```
var textNodes = $('body').find('*').contents().filter(function() { 
  return this.nodeType === 3 }); 
```

2）用一些替换操作突出显示搜索词：

```
var term = 'xxx';
textNodes.each(function() {
  var $this = $(this);
  var content = $this.text();
  content = content.replace(term, '<span class="highlight">' + term + '</span>');
  $this.replaceWith(content);
} 
```

# c# - 如何以通用方式对 KeyValuePair 进行操作？

> ID：11040773
> 
> 赞同：1
> 
> 时间：2012-06-14T20:19:49.920
> 
> 标签：c#, generics

通用接口：

```
interface IEntity<TKey, TValue>
{
    TKey Key { get; set; }
    TValue Value { get; set; }
} 
```

我的实体类：

```
class MyEntity : IEntity<int, string>
{
    public Key { get; set; }
    public Value { get; set; }
} 
```

以及一种以通用方式对所有可能的实体做某事的方法：

```
void MyMethode<T>(T entity) where T : IEntity<int, string> // there is no point, need T parameters
{
    DoEntity(entity.Key, entity.Value);
} 
```

我需要完成类似的事情：

```
void MyMethode<T>(T entity) where T : IEntity<TKey, TValue> // this is not allowed
{
    DoEntity(entity.Key, entity.Value);
} 
```

我需要在我的实体上编写通用数据库操作，但问题是我不知道 Key 和 Value 将是什么类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:22:31.057

在这种情况下，您需要像这样定义它：

```
void MyMethode<T, TKey, TValue>(T entity) where T : IEntity<TKey, TValue> 
{
    DoEntity(entity.Key, entity.Value);
} 
```

但这似乎有点疯狂。

更好的选择可能是拥有一个`IEntity`由`IEntity<TKey, TValue>`. `IEntity`将简单地将值和键公开为对象而不是特定类型：

```
interface IEntity
{
    object Key { get; set; }
    object Value { get; set; }
}

interface IEntity<TKey, TValue> : IEntity
{
    TKey Key { get; set; }
    TValue Value { get; set; }
}

class MyEntity : IEntity<int, string>
{
    int IEntity<int, string>.Key
    {
        get { ... }
        set { ... }
    }

    string IEntity<int, string>.Value
    {
        get { ... }
        set { ... }
    }

    object IEntity.Key
    {
        get { ... }
        set { ... }
    }

    object IEntity.Value
    {
        get { ... }
        set { ... }
    }
} 
```

然后你可以简单地这样做：

```
void MyMethode<T>(T entity) where T : IEntity
{
    DoEntity(entity.Key, entity.Value);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T20:21:23.753

```
void MyMethode<T, TKey, TValue>(T entity) where T : IEntity<TKey, TValue> 
{
    DoEntity(entity.Key, entity.Value);
} 
```

# ruby-on-rails - 我们如何才能规避这些远程表单的缺陷？

> ID：11040774
> 
> 赞同：4
> 
> 时间：2012-06-14T20:19:51.100
> 
> 标签：ruby-on-rails, ajax, remote-forms

为了使我们网站中的所有内容都可以翻译（包括验证的错误消息），我们将几乎所有的表单都切换到了远程表单。虽然这有助于翻译错误消息，但我们遇到了其他问题，例如：

*   如果用户多次单击提交按钮，则该操作会被多次调用。如果我们有一个用于在数据库中创建新记录的远程表单，并假设用户的数据是有效的，那么每次点击都会添加一个新对象（内容完全相同）。有什么方法可以确保这样的事情不会发生吗？

有什么地方可以读到有关远程表单最佳实践的信息吗？我该如何处理多次点击问题？将所有表格切换到远程表格是一个很大的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:34:42.883

有一个名为 .rails 3 的选项`:disable_with`。将其放在输入元素上以在提交远程表单时禁用并重新标记它们。它为这些输入添加了一个 data-disable-with 标签，并且 rails.js 可以选择和绑定此功能。

```
submit_tag "Complete sale", :disable_with => "Please wait..." 
```

更多信息可以在[这里找到](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:03:57.567

很容易，您可以根据自己的喜好以多种方式实现这一目标：

1.  只需使用 ajax 请求手动发布表单，并在等待响应时禁用/隐藏（或任何您需要的）表单，以确保用户不会继续发帖疯狂。一旦您从服务器获得响应，您就可以再次允许用户再次发布（首先清理表单），或显示其他内容或将其重定向到另一个页面或再次您需要的任何内容。

2.  使用 link_to :remote=>true 提交表单并添加回调函数来处理响应，并在提交时禁用/隐藏（或任何您需要的）表单

3.  向表单添加一个 js 侦听器以检测何时提交，然后禁用/隐藏/无论表单

如您所见，有很多不同的方法可以实现您所需要的。

**编辑：**如果您需要有关绑定或处理从 js 提交的表单的信息，您会发现非常简单有趣的示例，可以帮助您执行我建议的操作！[jQuery 提交](http://api.jquery.com/submit/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T23:39:10.573

我自己有很多远程表单，在大多数情况下我会避免使用它们。但有时您的布局或 UX 需要动态下拉表单，而无需重新加载或刷新整个页面。

所以，让我逐步解决这个问题。

### 1.防止范式双发

即使使用普通表单，用户也可以双击您的按钮，或者单击多次，如果用户没有得到明确的指示，表明单击已注册并且操作已开始。

有很多方法（例如 javascript）可以使其可见，但在 rails 中最简单的是：

```
= f.button  :submit, :disable_with => "Please wait..." 
```

这将在第一次单击后禁用按钮，清楚地表明单击已注册并且操作已开始。

### 2.处理远程表单

对于远程形式，它并没有太大的不同，但最有可能的区别是：*之后会发生什么*？

使用远程表单，您有几个选项：

1.  如果出现错误：您使用错误更新表单。
2.  您将表单保持打开状态，允许用户继续输入数据（我认为这是您的情况？）
3.  您将用户重定向到某个地方。

让我处理这些案件。请理解，这三种情况在做正常形式时是完全标准的。但不是在进行远程呼叫时。

2.1 出错时

要使远程表单正确更新，您必须做更多的事情。不是很多，而是一点点。

使用 haml 时，您将有一个名为的视图`edit.js.haml`，它看起来像

```
:plain
  $('#your-form-id').replaceWith('#{j render(:partial => '_form') }'); 
```

这是做什么的：只用表单替换完整的haml。您将必须相应地构建您的视图，以使其工作。这并不难，但只是必要的。

2.2 清除表格

您有两个选择： * 完全重新呈现表单，与错误一样。只需确保您*从新*元素呈现表单，而不是刚刚发布的！* 只需发送以下 javascript：

```
$('#your-form-id').reset(); 
```

这将使表单空白，通常情况下，这将有效地使任何后续点击无效（某些客户端验证可能会阻止发布，直到某些字段被填写）。

2.3 重定向

由于您使用的是远程表单，因此您不能只是重定向。这必须发生在客户端，所以这有点复杂。

再次使用haml，这将类似于

```
:plain
  document.location.href = '#{@redirect_uri}'; 
```

## 结论

为了防止使用远程表单的双重（三重、四重、更多）帖子，您必须

*   首次单击后禁用按钮（使用`:disable_with`）
*   提交成功后清除表单（重置表单或使用新元素渲染）

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T11:46:20.003

You can try something like that for ajax requests.

Set block variable true for ajax requests

```
 before_filter :xhr_blocker

  def xhr_blocker
    if request.xhr? 
      if session[:xhr_blocker]
        respond_to do |format|
          format.json, status: :unprocessable_entity
        end
      else
        session[:xhr_blocker] = true 
      end      
    end
  end 
```

Clear xhr_blocker variable with an after filter method

```
 after_filter :clear_xhr_blocker

  def clear_xhr_blocker
    session[:xhr_blocker] = nil
  end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T04:35:19.883

我在鼠标悬停时使用弹出窗口也遇到过类似的问题，并且不想将多个请求排队。为了获得更多控制权，您可能会发现直接使用 javascript/coffeescript 而不是 UJS（就像我一样）更容易。

我解决它的方法是将 Ajax 调用分配给一个变量并检查该变量是否已分配。在我的情况下，我会中止 ajax 调用，但是一旦 ajax 调用成功完成，您可能希望从函数返回并将变量设置为 null。

这个咖啡脚本示例来自我使用“GET”的弹出窗口，但理论上它应该与“POST”或“PUT”相同。

例如

```
jQuery ->
  ajaxCall = null

  $("#popupContent").html "&nbsp;"

  $("#popup").live "mouseover", ->
    if ajaxCall
      return

    ajaxCall = $.ajax(
      type: "GET"
      url: "/whatever_url"
      beforeSend: ->
        $("#popupContent").prepend "<p class=\"loading-text\">Loading..please wait...</p>"

      success: (data) ->
        $("#popupContent").empty().append(data)

      complete: ->
        $"(.loading-text").remove()
        ajaxCall = null
    ) 
```

为了简洁起见，我省略了鼠标悬停和计时器处理。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T17:18:00.763

我不想这么说，但听起来你想出了比疾病更糟糕的治疗方法。

为什么不使用 i18n 进行翻译？那肯定是'Rails方式'......

如果你必须继续沿着这条路线走，你将不得不开始使用 Javascript。远程表单通常用于投票或评论等小型“AJAXy 事物”。在不离开页面的情况下创建整个对象对于人们可能想要连续创建大量对象（您要解决的确切问题）很有用。

一旦你开始使用 AJAX，你就必须处理你必须开始做一些 JS 的事实。这是客户端的东西，因此不是 Rail 的专长。

如果您觉得您在这条路上走得太远以至于无法回头，我建议 AJAX 响应至少应该重置表单。然后，这将阻止人们多次错误地创建相同的东西。

从 UI/UX 的角度来看，它还应该显示一条消息，让用户知道他们成功创建了对象。

总而言之 - 如果你有时间，git reset 并开始使用 i18n，如果你不能，让 ajax 回调重置表单并设置一个 flash 消息。

编辑：我突然想到你甚至可以让 AJAX 为你重定向页面（但你必须自己处理 Flash 消息）。*但是*，使用然后通过 javascript 重定向的远程表单是 FUGLY...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-26T03:21:35.497

最简单的解决方案是为每个表单生成一个令牌。然后您的`create`操作可以确保它尚未被使用并确定是否应该创建记录。

以下是我将如何编写此功能。请注意，我实际上并没有对此进行测试，但这个概念应该有效。

1\. 在`new`动作内部创建一个哈希来识别表单请求。

```
def new
  @product = Product.new
  @form_token = session["form_token"] = SecureRandom.hex(15)
end 
```

2\. 在表单中添加一个隐藏字段来存储表单令牌。这将在`create`操作中被捕获，以确保之前没有提交过表单。

```
<%= hidden_field_tag :form_token, @form_token %> 
```

3\. 在`create`操作中，您可以确保表单标记在`session`和`params`变量之间匹配。这将使您有机会查看这是第一次提交还是第二次提交。

```
def create
  # delete the form token if it matches
  if session[:form_token] == params[:form_token]
    session[:form_token] = nil
  else
    # if it doesn't match then check if a record was created recently
    product = Product.where('created_at > ?', 3.minutes.ago).where(title: params[:product][:title]).last

    # if the product exists then show it
    # or just return because it is a remote form
    redirect_to product and return if product.present?
  end

  # normal create action here ...
end 
```

* * *

**更新：**我上面描述的有一个名字，它被称为同步器（或似曾相识）令牌。如[本文](http://www.corej2eepatterns.com/Design/PresoDesign.htm)所述，是防止重复提交的正确方法。

> 该策略解决了重复表单提交的问题。同步器令牌在用户会话中设置，并包含在返回给客户端的每个表单中。提交该表单时，会将表单中的同步器令牌与会话中的同步器令牌进行比较。令牌应在第一次提交表单时匹配。如果令牌不匹配，则可能不允许提交表单并将错误返回给用户。当用户提交表单，然后单击浏览器中的“后退”按钮并尝试重新提交相同的表单时，可能会发生令牌不匹配。
> 
> 另一方面，如果两个令牌值匹配，那么我们确信控制流完全符合预期。至此，会话中的token值被修改为新值，接受表单提交。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-21T21:55:55.103

我会绑定到 ajax:complete，（或 ajax:success 和 ajax:error）来重定向或更新 DOM，以便在请求完成时根据需要删除/更改表单。

# javascript - 从变量中设置 div 样式标签中的宽度和高度值

> ID：11040780
> 
> 赞同：2
> 
> 时间：2012-06-14T20:20:18.577
> 
> 标签：javascript, html, styles, height, width

在我的 javascript 文件中，我有以下行：

```
<div id="mygraph" style="width:200px;height:100px;"></div> 
```

我想从两个变量中设置样式标签中的宽度和高度值，这些变量从相应的函数中获取它们的值：

```
var my_width = getWidth();
var my_height = getHeight(); 
```

我怎样才能做到这一点？我错过了正确的语法。先感谢您...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T20:23:25.737

以下假设您的函数返回的`my_height`和是纯数字：`my_width`

```
document.getElementById('mygraph').style.height = my_height + "px";
document.getElementById('mygraph').style.width = my_width + "px"; 
```

# jsf - s:link 动作的参数为空

> ID：11040796
> 
> 赞同：1
> 
> 时间：2012-06-14T20:21:33.817
> 
> 标签：jsf

我在数据表的每一行都有一个链接。单击时，它应该在控制器中执行 test(_item) 方法，但 _item 始终为空。

这是代码：

```
<rich:datatable value="#{controller.items}" var="_item">
    <rich:column>
        <s:link view="/nextPage.xhtml" propagation="nested" action="controler.test(_item)">
            <h:outputText value="click!" />
        </s:link>
    </rich:column>
</rich:datatable> 
```

有人知道修复吗？

# maven - maven执行java命令

> ID：11040801
> 
> 赞同：1
> 
> 时间：2012-06-14T20:21:54.110
> 
> 标签：maven

我想使用来自 maven 的参数执行一个 jar 文件。下面列出了我要执行的命令。我`perf4j`在依赖项中有jar文件。该`times.log`文件在他们的文件系统中。

```
java -jar perf4j-0.9.16.jar times.log 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:33:07.517

你可能想看看@ [exec-maven-plugin](http://mojohaus.org/exec-maven-plugin/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-17T12:49:56.997

第一的

```
mvn clean install 
```

比

```
mvn exec:java -Dexec.mainClass="com.java.App" -Dexec.args="Args" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:36:33.677

你真正想做的是什么？使用 jar（这是一个依赖项）来监控您的应用程序？

你看过[maven exec 插件](http://mojo.codehaus.org/exec-maven-plugin/)吗？

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2.1</version>
        <executions>
          <execution>
            ...
            <goals>
              <goal>exec</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <executable>maven</executable>
          <!-- optional -->
          <workingDirectory>/tmp</workingDirectory>
          <arguments>
            <argument>-X</argument>
            <argument>myproject:dist</argument>
            ...
          </arguments>
        </configuration>
      </plugin>
    </plugins>
  </build>
   ...
</project> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T02:27:17.450

我看过 maven exec 插件，但不确定如何以及在哪里指定 jar 文件名，因此感谢您的回复，但我正在查看更多信息，尤其是 jar 文件。通过一些试验和错误，以下工作。我必须从 jar 文件中找到要使用的主类。`mvn install`运行该文件并产生以下输出：

```
 <build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <executions>
                <execution>
                    <phase>install</phase>
                    <goals>
                        <goal>java</goal>
                    </goals>
                    <configuration>
                        <mainClass>org.perf4j.LogParser</mainClass>
                        <arguments>
                            <argument>InlineLogging.log</argument>
                        </arguments>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>org.perf4j</groupId>
        <artifactId>perf4j</artifactId>
    </dependency>
</dependencies> 
```

# sql-server-2005 - 计算字段的 SQL 聚合

> ID：11040803
> 
> 赞同：1
> 
> 时间：2012-06-14T20:22:11.600
> 
> 标签：sql-server-2005

使用 SQL Server 2005，我有一个查询，该查询从具有数量计算字段的捆绑包中获取子记录。查询看起来像这样：

```
SELECT  TblB_1.fooID, 
    TblC.quantity * (TblA.quantity) AS Quantity, 
    TblB_1.name AS Name
    FROM    TblB AS TblB_1 INNER JOIN
              TblC ON TblB_1.fooID = TblC.fooID RIGHT OUTER JOIN
              TblB INNER JOIN
                TblA ON TblB.fooID = TblA.fooID ON TblC.parentfooID = TblB.fooID
    WHERE   (TblB.isBundle = 1) AND (TblA.isDeleted = 0) 
```

我需要能够按 id 分组并获得数量字段的总和。我试过用 sum 包裹数量线，如下所示：

```
SUM(TblC.quantity * (TblA.quantity)) AS Quantity, 
```

然后添加

```
GROUP BY TblB_1.fooID 
```

在 WHERE 子句之后，但这会导致“TblB_1.name 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中”错误。

我还尝试使用子查询来完成这项任务，但我也无法完成这项工作，也无法在此处或在 Web 上找到我能够适应的示例。谢谢 - 丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:29:40.690

您很接近，您需要按所有非聚合字段进行分组。像这样

```
SELECT  TblB_1.fooID, 
    SUM(TblC.quantity * (TblA.quantity)) AS Quantity, 
    TblB_1.name AS Name
FROM    TblB AS TblB_1 INNER JOIN
          TblC ON TblB_1.fooID = TblC.fooID RIGHT OUTER JOIN
          TblB INNER JOIN
            TblA ON TblB.fooID = TblA.fooID ON TblC.parentfooID = TblB.fooID
WHERE   (TblB.isBundle = 1) AND (TblA.isDeleted = 0)
GROUP BY TblB_1.fooID, TblB_1.name 
```

# gwt - 使用 GWT ClickHandler 进行 MVP 设计

> ID：11040804
> 
> 赞同：1
> 
> 时间：2012-06-14T20:22:12.393
> 
> 标签：gwt, mvp

使用 GWT 的 ClickHandler 的 MVP 方法是什么？

我的视图中有一个按钮，我想添加一个点击处理程序。

查看 button.addClickHandler(?)

传递了什么？主持人？新的点击处理程序？

示例案例1.查看代码：

```
this.myButton.addClickHandler(new ClickHandler()
    {
        @Override
        public void onClick(ClickEvent event)
        {
            myPresenter.buttonClicked();
        }
    }); 
```

在这种情况下，无法测试向按钮添加点击处理程序...

示例案例 2\. Presenter 代码：

```
this.view.addClickHandlerToButton(this);

    @Override
    public void onClick(ClickEvent event)
    {
        buttonClicked();
    } 
```

在这种情况下，在presenter中引入了GWT代码（ClickEvent），应该避免。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:04:18.783

我这样解决了这个问题：

将视图注册到clickevent，并在视图中处理：

onClick(){presenter.onButtonClicked(); }

可能该按钮具有一些语义，例如“deleteEntry”，因此演示者方法将是“onDeleteEntryClicked”或“deleteEntry”

mvp 说让视图决定使用哪种 ui 元素，演示者执行命令。所以“deleteEntry”背后的逻辑不会改变，而您可以用其他 ui 元素替换按钮 - 也没有 hasClickHandler。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T21:03:16.360

该按钮实现了一个名为 HasClickHandlers 的接口，该接口有一个注册点击事件的方法。

在您的 View 界面中，您可以将此界面返回给您的演示者，演示者可以在其上调用 addClickHandler。

查看界面：

```
public MyView extends IsWidget{
    public HasClickHandlers getButton();

} 
```

您的视图实现：

```
public HasClickHandler getButton(){
    return button;
} 
```

在您的演示者中：

```
view.getButton().addClickHandler(new ClickHandler(){
....
}); 
```

# asp.net - ASP.net 网站引用依赖于非编译代码的代码文件

> ID：11040809
> 
> 赞同：1
> 
> 时间：2012-06-14T20:22:28.823
> 
> 标签：asp.net, compilation, webforms

我有一个网站没有使用 App_Code 文件夹来 jit 编译代码文件（这就是 App_code 的用途，对吧？）。相反，开发人员必须要么将页面所需的所有必要类塞入代码文件中，要么塞入获取页面上的 Assembly Directive src 的单个 .cs 文件（这是因为源文件之间的依赖关系）。

有没有办法将相互依赖的类放在单独的文件中？

例如 Presenter.cs 依赖于 Model.cs。我想在我的 Presenter.cs 页面中添加一个程序集指令，并让它快乐。但由于这不能编译 Model.cs，所以它不起作用。为这两个代码文件添加程序集引用也不起作用。

有没有我遗漏的机制？

编辑：我认为答案是 App_Code 文件夹正是为此任务创建的，并且没有其他/更好的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:30:29.303

当您说“CodeBehind”时，您实际上指的是“CodeFile”吗？（我不喜欢“ASP.NET 网站”并且更喜欢 MVC 的众多原因之一）。

AFAIK，ASP.NET 运行时将所有 App_Code 文件一起编译到它们自己的程序集中，但是每个页面的 CodeFile（而不是它们的 CodeBehind）中的代码只能引用这个匿名程序集，而不能引用彼此的代码。

你能澄清你所说的“页面汇编参考”是什么意思吗？您是在做`<%@ Assembly %>`还是您的意思是命名空间导入`<%@ Import %>`（因为正如我所说，很多代码都被编译成匿名程序集）。

我建议您只需将公共代码和类移动到 App_Code 中的 *.cs 文件。它应该可以工作。

# for-loop - 使用 for 循环命名对象

> ID：11040811
> 
> 赞同：0
> 
> 时间：2012-06-14T20:22:30.447
> 
> 标签：for-loop, naming

有没有办法像这样命名一系列对象：

```
for (i=0; i<numberOfObjectsDesired; i++;) {
    Object ("thisone"+i);
    thisone+i = new Object();
} 
```

这样 thisone0, thisone1, thisone2, thisone3, ... 等都是 Objects 的唯一实例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:26:48.337

当然，它被称为**数组**：

```
var thisone = new object[numberOfObjectsDesired];

for (i=0; i<numberOfObjectsDesired; i++;) {
    Object ("thisone"+i);
    thisone[i] = new Object();
} 
```

请注意，您必须将您的实例称为`thisone[0]`,`thisone[1]`等，而不是`thisone0`, `thisone1`, ...

# php - PHP - 将 PDF 转换为文本（无法访问 exec/shell_exec）

> ID：11040815
> 
> 赞同：0
> 
> 时间：2012-06-14T20:22:46.030
> 
> 标签：php, pdf, exec, pdftotext

案子：

*   服务器不支持 exec/shell_exec (所以 pdftotext 被排除在外)
*   其他图书馆不接受 PDF。Pdftotext 有效（在本地文件上测试）

以下是（PDF）代码的一些摘录：

```
 5 0 obj
>
stream
Gat$ugPXc?%"6H'p]ofd'_qs00UX27?3p0*8m>KOQL4]:u"*$$^'f*q*SGMee*e$5&=alj\@GV7YPq9pg!Lr0>Y2n'&lmd4Br?V9N
P:_",WI.kJ\#'cs>77M9eTkA;,t#f)aaGuNS-6=Wp*uBg,Ft9Tcj#aI]nD[C6&m@9m?m!p6=IBt=o_LGHh!q>f$C.jdOXbSP/796HV`_Y]Y
l)M(]FZ9Ld-J_mMRe2q(D>`V@G`NM]crn@_V?sGC@W9^bnrY$.mqeVN^YEcqK)blO~>
endstream
endobj
```

关于创作者：

```
%PDF-1.4
1 0 对象
>
结束对象

```

我想获得一些关于如何在 PHP 中将其转换为纯文本的建议，而不使用 exec/shell_exec 函数。

谢谢你。

（其他解决方案，如[http://webcheatsheet.com/php/reading_clean_text_from_pdf.php](http://webcheatsheet.com/php/reading_clean_text_from_pdf.php)不起作用，我无法让他们至少将此代码转换为看起来像 ASCII 代码的东西。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:51:51.147

您不能只解析此流，因为您需要然后使用文件中的许多其他数据（如字体编码）解码数据。你真的想使用图书馆来做到这一点......

# wcf - 寻找“在 IIS 中托管的 ACS + SOAP WCF 服务”示例

> ID：11040819
> 
> 赞同：1
> 
> 时间：2012-06-14T20:23:09.587
> 
> 标签：wcf, acs

我一直在试图弄清楚如何在 IIS 中托管 SOAP WCF 服务并通过 ACS 保护它，但是我一直遇到我能找到的每个示例的问题。例如，没有一个标准的 ACS 示例 ( [http://acs.codeplex.com](http://acs.codeplex.com/) ) 显示如何执行此操作。相反，最接近的示例显示了如何自托管 WCF 服务，但没有显示如何在 IIS 中托管服务。其他示例工作正常，但要么是面向 REST 的，要么是莫名其妙的，或者根本无法编译。我对此进行了很多研究，但显然无处可去。我真正需要的是端到端的详细演练。在这方面的任何帮助将不胜感激。谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:30:36.540

AFAIK归结为让web.config正确。这在电子书[http://www.microsoft.com/en-us/download/details.aspx?id=28362](http://www.microsoft.com/en-us/download/details.aspx?id=28362)第 145 页及以下内容中进行了解释。您需要在 Web 服务上正确配置 ws2007FederationHttpBinding。

# c# - Assembly.GetExportedTypes() 在 .NET 4.0 中不起作用（相同的代码在 3.5 中运行）

> ID：11040821
> 
> 赞同：0
> 
> 时间：2012-06-14T20:23:31.260
> 
> 标签：c#, .net, .net-assembly

嘿伙计们（和女孩们）我在 .NET 4.0 中使用 Assembly GetExportedTypes() 时遇到问题。相同的代码在针对旧 .NET 版本的项目中运行良好。

**注意：** **代码适用于本地程序集，但是当尝试从网络驱动器打开它们时它不起作用，这是我的问题......它看起来正在加载程序集，但它声称在使用时找不到它GetExportedTypes()。同样，如果我从我的机器上打开一个 dll 它可以工作，这个错误只发生在位于网络驱动器上的 dll **

**编辑：** GetExportedTypes 上引发错误

**编码：**

```
 Assembly assembly;
        Type[] t;

        assembly = Assembly.LoadFrom(dllPathOpenFileDialog.FileName.ToString());

        t = assembly.GetExportedTypes(); 
```

**错误：** 无法加载文件或程序集 ' *** *。****.* ***** **** .***********.* ****、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。***

 ****（我用星号隐藏个人信息——文件名）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:28:55.167

处理某些安全策略的方式在 .NET 4.0 中发生了变化。[这篇文章](http://msdn.microsoft.com/en-us/magazine/ee677170.aspx)应该提供一些背景。***

# php - 使用 php 取消设置数组

> ID：11040822
> 
> 赞同：1
> 
> 时间：2012-06-14T20:23:38.417
> 
> 标签：php, arrays, unset

我有一个问题，比如我有一个多维数组，如果内部数组包含“编辑”，我想删除父数组，数组是这样的

```
[fields] => Array
    (
        [0] => Array
            (
                [header] => Array
                    (
                        [fieldName] => edit
                        [displayName] => Edit
                        [width] => 40
                        [group] => 0,1,2,3
                        [cssClass] => dgAssetsCentered
                    )

                [visibility] => Array
                    (
                        [showOnStart] => 1
                        [editable] => 
                    )

                [cell] => Array
                    (
                        [type] => link
                        [params] => Array
                            (
                                [label] => Edit
                            )

                    )

                [sort] => Array
                    (
                        [sortable] => 1
                    )

                [validator] => Array
                    (
                        [name] => 
                        [params] => 
                    )

            )

        [1] => Array
            (
                [header] => Array
                    (
                        [fieldName] => OFFERID
                        [displayName] => Offer Id
                        [group] => 0 
```

我想删除数组 0，因为内部数组包含“编辑”我能够删除 [标题] 数组无法删除 [0] 数组。请建议。

谢谢亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:31:06.960

```
foreach($fields as $key => $field)
{
  if(isset($field['header']['fieldName']) && $field['header']['fieldName'] == 'edit')
    unset($field[$key]);
} 
```

UPD：另外，如果你想删除数组，如果任何元素等于“编辑”，试试这个算法：

```
foreach($fields AS $key => $array)
{
  foreach($array as $innered)
  {
    if(array_search('edit', $innered)) 
    {
      unset($fields[$key]);
      break;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:31:18.373

`unset(fields);`将清除整个数组。

`unset(fields[0]);`将清除字段数组中的元素 0

# c# - 在 asp.net mvc 中使用异步控制器有什么好处？

> ID：11040825
> 
> 赞同：6
> 
> 时间：2012-06-14T20:23:50.603
> 
> 标签：c#, asp.net-mvc

在我的 ASP.NET MVC 网站中使用异步控制器有哪些优势？请用简单的术语解释；我不是 .NET 专家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:29:31.550

我认为文档用非常简单的术语说：http: [//msdn.microsoft.com/en-us/library/ee728598.aspx](http://msdn.microsoft.com/en-us/library/ee728598.aspx)

> AsyncController 类使您能够编写异步操作方法。**您可以对长时间运行的非 CPU 绑定请求使用异步操作方法。这可以避免在处理请求时阻止 Web 服务器执行工作。**

工作 URL：[在 ASP.NET MVC 4 中使用异步方法](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)

# c++ - 带有模板类的强制转换运算符

> ID：11040831
> 
> 赞同：1
> 
> 时间：2012-06-14T20:24:21.880
> 
> 标签：c++, templates, visual-studio-2005

我想重载一个强制转换运算符，我有以下代码：

```
template <typename _T>
class CTest
{
public :
    _T data;

    CTest(_T _data) : data(_data) {}
    ~CTest() {}

    operator _T(){ return data; }
}; 
```

和 MS Visual Studio 2005，给我以下错误：

> 警告 C4003：宏“ *T”没有足够的实际参数 警告 C4003：宏“* _T”没有足够的实际参数 错误 C2833：“运算符 L”不是可识别的运算符或类型，请参阅类模板实例化“CTest<_T>”正在编译错误 C2059：语法错误：“换行符”错误 C2334：“{”之前的意外标记；跳过明显的函数体错误 C2833：'operator L' 不是可识别的运算符或类型

如何正确声明**运算符 _T()**？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T20:28:43.177

`_T`是一个 WINAPI 宏（请参阅[Tchar.h 中的通用文本映射](http://msdn.microsoft.com/en-us/library/c426s321%28v=vs.80%29.aspx)或[我应该在 C++ 字符串文字上使用 _T 还是 _TEXT？](https://stackoverflow.com/questions/2074579/should-i-use-t-or-text-on-c-string-literals)）：更改`_T`为`T`.

# asp.net-mvc-3 - 在 MVC 中将实体属性转换为 HiddenField 的问题

> ID：11040833
> 
> 赞同：1
> 
> 时间：2012-06-14T20:24:24.817
> 
> 标签：asp.net-mvc-3

我有一个供应商实体，其中包含

```
ID - int
Status - string
Name - string
CreateDate- datetime 
```

我正在使用部分类方法为上述实体创建数据注释。如此处[所述](http://ryanhayes.net/blog/data-annotations-for-entity-framework-4-entities-as-an-mvc-model/)

```
[MetadataType(typeof(SupplierMetadata))]
public partial class Supplier
{
    // Note this class has nothing in it.  It's just here to add the class-level attribute.
}

public class SupplierMetadata
{
    // Name the field the same as EF named the property - "FirstName" for example.
    // Also, the type needs to match.  Basically just redeclare it.
    // Note that this is a field.  I think it can be a property too, but fields definitely should work.

    [HiddenInput]
    public Int32 ID;

    [Required]
    [UIHint("StatusList")]
    [Display(Name = "Status")]
    public string Status;

    [Required]
    [Display(Name = "Supplier Name")]
    public string Name;
} 
```

HiddenInput 注释会引发错误，指出“属性‘HiddenInput’在此声明类型上无效。它仅在‘类、属性、索引器’声明上有效。”

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:46:03.757

该错误指出该属性只能添加到“类、属性或索引器声明”。

`public Int32 ID;`这些都不是——它是一个领域。

如果您将其更改为属性

`public Int32 ID { get; set; }`您将能够使用该属性来装饰它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T01:15:04.993

您的所有属性都定义不正确，因为它们缺少 get/set 访问器。.NET 中的所有属性都需要 getter 和/或 setter 访问器。将您的代码更改为：

```
public class SupplierMetadata
{
    [HiddenInput]
    public Int32 ID { get; set; }

    [Required]
    [UIHint("StatusList")]
    [Display(Name = "Status")]
    public string Status { get; set; }

    [Required]
    [Display(Name = "Supplier Name")]
    public string Name { get; set; }
} 
```

# javascript - jQuery 构造函数中的函数有什么不同吗？

> ID：11040834
> 
> 赞同：0
> 
> 时间：2012-06-14T20:24:31.587
> 
> 标签：javascript, jquery

我觉得我只在 SO 上看到过这个，但我似乎找不到任何关于它的文档。我正在谈论的代码是这样的：

```
$(function foo(){
    alert('foo');
}); 
```

这有什么关系吗，或者这只是新手因为认为 jQuery 是一种语言而做的事情？范围没有变化。这似乎完全没有必要。是否有任何方法可以调用，例如：

```
$(function foo(){ alert('foo'); }).someMethod(); 
```

我能想到的最接近的是[$.proxy](http://api.jquery.com/jQuery.proxy/)，但它不使用这种语法。我是对的，这完全没有必要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:27:27.090

这就是*在 DOM 初始化之后*调用函数的方式。相当于

```
$().ready(function() { ... } ); 
```

**编辑：**从文档中：

> 以下所有三种语法都是等效的：
> 
> ```
>  - $(document).ready(handler)
>  - $().ready(handler) (this is not recommended)
>  - $(handler) 
> ```

见：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

# jboss - 如何重命名接缝项目

> ID：11040835
> 
> 赞同：0
> 
> 时间：2012-06-14T20:24:31.957
> 
> 标签：jboss, project, seam, rename

我使用 seam-gen 实用工具创建了一个接缝项目。我想更改项目的名称。我该如何更新它？

非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:50:12.790

如果您的项目在 IDE（Eclipse、Netbeans）中，您可以重构它并重命名它。如果您没有投入太多工作，您可以使用不同的项目名称再次运行 seam-gen。

# ffmpeg - ffmpeg & png 水印问题

> ID：11040847
> 
> 赞同：5
> 
> 时间：2012-06-14T20:25:25.747
> 
> 标签：ffmpeg, png

我试图`png`在这样的视频上创建水印（使用图像）：

```
ffmpeg -i test.wmv -b:a 300k -ar 22050 -t 10 -f flv -s 352x288 -vf "movie = watermark_logo352.png [watermark]; [in][watermark] overlay =0:0 [out]" out.flv 
```

但我得到了错误：

```
ffmpeg version 0.10.4 Copyright (c) 2000-2012 the FFmpeg developers
built on Jun 14 2012 13:14:31 with gcc 4.4.5   configuration:
--prefix=/home/username --enable-cross-compile --enable-shared --arch=amd64 --target-os=linux --disable-yasm --enable-decoder=png --enable-encoder=png   
        libavutil      51\. 35.100 / 51\. 35.100   
        libavcodec     53\. 61.100 / 53\. 61.100   
        libavformat    53\. 32.100 / 53\. 32.100   
        libavdevice    53\.  4.100 / 53\.  4.100   
        libavfilter     2\. 61.100 /  2\. 61.100   
        libswscale      2\.  1.100 /  2\.  1.100   
        libswresample   0\.  6.100 /  0\.  6.100 
        Input #0, asf, from 'test.wmv':   
        Metadata:
            >     WMFSDKVersion   : 9.00.00.2980
            >     WMFSDKNeeded    : 0.0.0.0000
            >     IsVBR           : 1
            >     VBR Peak        : 351
            >     Buffer Average  : 728   Duration: 00:00:05.59, start: 0.000000, bitrate: 574 kb/s
            >     Stream #0:0(jpn): Audio: wmav2 (a[1][0][0] / 0x0161), 22050 Hz, 2 channels, s16, 32 kb/s
            >     Stream #0:1(jpn): Video: wmv1 (WMV1 / 0x31564D57), yuv420p, 352x288, 520 kb/s, SAR 8:9 DAR 88:81, 29.97 tbr, 1k tbn, 1k tbc File
            > 'out2.flv' already exists. Overwrite ? [y/N] y w:352 h:288
            > pixfmt:yuv420p tb:1/1000000 sar:8/9 sws_param: 
    [image2 @ 0x551f880] decoding for stream 0 failed 
    [image2 @ 0x551f880] Could not find codec parameters (Video: png) 
    [movie @ 0x551f440] Failed to find stream info
    [movie @ 0x551f440] Failed to find any codec 
    Error initializing filter 'movie' with args 'watermark_logo352.png' 
    Error opening filters! 
```

当我使用 a`jpg`时，它就像一个魅力。

我在 Debian 6 Squeeze 上使用 ffmpeg v 0.10.4。任何帮助将非常感激。

**编辑**

问题比我想象的要简单。如果我将 ffmpeg -i 与任何 png 图像一起使用，我会收到类似的错误：

```
 libavutil      51\. 35.100 / 51\. 35.100
  libavcodec     53\. 61.100 / 53\. 61.100
  libavformat    53\. 32.100 / 53\. 32.100
  libavdevice    53\.  4.100 / 53\.  4.100
  libavfilter     2\. 61.100 /  2\. 61.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\.  6.100 /  0\.  6.100
  libpostproc    52\.  0.100 / 52\.  0.100
[image2 @ 0xc8b73a0] decoding for stream 0 failed
[image2 @ 0xc8b73a0] Could not find codec parameters (Video: png)
watermark.png: could not find codec parameters 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T18:31:48.950

看来您的编译没有 zlib 支持，这是 PNG 解码和编码的要求（请参阅 FFmpeg`configure`文件的代码以查看还有什么需要它）。

对于 Debian/Ubuntu，这意味着您需要**zlib1g-dev**或对于 CentOS **zlib-devel**作为构建依赖项并重新编译 FFmpeg。它由 FFmpeg 自动检测，因此您无需添加其他`./configure`参数，这意味着您也可以省略`--enable-decoder=png --enable-encoder=png`.

[请参阅FFmpeg Wiki](https://trac.ffmpeg.org/wiki/)上的各种[FFmpeg 编译指南](https://trac.ffmpeg.org/wiki/CompilationGuide)，或直接[下载 ffmpeg 的构建](http://ffmpeg.org/download.html#LinuxBuilds)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:24:37.730

替换`[watermark]`为`[wm]`它就像一个魅力。我用这个：

```
-vf "movie=0:png:./watermark.png [wm];[in][wm] overlay=main_w-overlay_w-10:main_h-overlay_h-10 [out]" 
```

（用于右下水印）

# php - 如何使用 Facebook PHP API 在没有文件 POST 的情况下将照片上传到墙上？（使用 URL 可能吗？）

> ID：11040848
> 
> 赞同：0
> 
> 时间：2012-06-14T20:25:26.937
> 
> 标签：php, facebook, ipad, upload, photo

我正在为即将到来的项目做初步研究。基本上这里是用户/数据流：

*   活动中的网络摄像头拍摄照片并将照片发送到本地服务器

*   一位品牌代表拥有一台带有应用程序的 iPad（开发为作为应用程序保存到 iPad 主屏幕的 HTML 应用程序）。该应用程序通过简单的 AJAX 调用将来自本地服务器的所有照片显示为缩略图，以将它们加载到视图中。

*   用户选择一张照片。该照片将从我们的本地服务器发送到我们的远程服务器。远程服务器将托管一个 Facebook iFrame 选项卡，其中包含用户选择的照片。

*   同时，带有查询字符串的 iFrame 选项卡的链接将发布在用户的 Facebook 墙和 Twitter 上（当然，如果他们选择进行身份验证）。

现在是棘手的部分，我们 99% 确定客户也希望将照片直接上传到 Facebook 用户的相册。可能对 TwitPic 也是如此，但这是次要问题。所以我的问题是，有没有一种方法可以使用 PHP 将照片上传到 Facebook 墙上，而无需使用典型的 html 文件输入字段和 POST？理想情况下，如果我们可以从本地服务器对照片 URL 执行某种 file_get_contents 操作，并使用 PHP/FB API 上传照片 URL 的内容，我们的状态会很好。

目标是将照片上传到用户墙上，并带有如下标题：

> 看看我在**_**活动拍摄的照片！***[带有照片 ID 的客户端 facebook 标签的 URL]***。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:31:09.927

@jeremyharris 说 Facebook 的 PHP SDK 包装了 cURL 是对的。您确实需要使用 cURL 将请求发布到 Facebook 的 API 端点。不过，请先阅读[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/) *发布*部分以了解机制，然后再使用他们的[SDK](http://developers.facebook.com/docs/sdks/)。

然后熟悉[提要对象](http://developers.facebook.com/docs/reference/api/post/)。您可以使用它或[照片](http://developers.facebook.com/docs/reference/api/photo/)对象来上传照片。

# android - Android Intent 启动应用程序的主要活动

> ID：11040851
> 
> 赞同：16
> 
> 时间：2012-06-14T20:25:49.850
> 
> 标签：android, android-intent, alarmmanager

我正在尝试从 BroadcastReceiver 内部开始主要活动。我不想提供活动类名称，而是使用 android 的操作和类别来确定主要活动。

它似乎不起作用。

发送代码：

```
Intent startIntent = new Intent();

startIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startIntent.setAction(Intent.ACTION_MAIN);
startIntent.setPackage(context.getPackageName());
startIntent.addCategory(Intent.CATEGORY_LAUNCHER);        
context.startActivity(startIntent); 
```

我收到此错误：

> 引起 bt: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 pkg=com.xyz.abc (有附加功能) }

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-09-21T12:37:51.257

从另一个主题复制：

这适用于 API 级别 3 (Android 1.5)：

```
private void startMainActivity(Context context) throws NameNotFoundException {
    PackageManager pm = context.getPackageManager();
    Intent intent = pm.getLaunchIntentForPackage(context.getPackageName());
    context.startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-14T20:37:10.013

这不是 startActivity 的正确方法。
试试这个代码：

```
Intent startIntent = new Intent(context, MainActivity.class);
startIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);        
context.startActivity(startIntent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-04T06:17:51.137

甚至我一直在尝试通过库 Activity 启动 MainActivity。

这对我有用：

```
Intent startIntent = new Intent();
startIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startIntent.setPackage(getApplicationContext().getPackageName());
getApplicationContext().startActivity(startIntent); 
```

确保在库的清单中添加活动！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-20T12:32:59.740

尽管为时已晚。将来可能对某人有用。这对我有帮助。

```
Intent intent = new Intent(this, MainActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
this.startActivity(intent); 
```

# xcode - 当 UITextField 与 UILabel 具有相同的文本时，Xcode 如何使用 if 语句停止计时器标签

> ID：11040853
> 
> 赞同：1
> 
> 时间：2012-06-14T20:25:58.933
> 
> 标签：xcode, if-statement, timer, uitextfield, uilabel

我一直在尝试在应用程序上执行此操作，但我无法使其正常工作，请有人帮助我并发布一些关于我将如何执行此操作的代码。我需要发生的是当 UITextField 中的文本等于 UILabel 时。谢谢

H。视图控制器

```
@interface AlphabetSceneViewController : UIViewController {

UILabel *stopWatchLabel;
NSTimer *stopWatchTimer;
NSDate *startDate;

IBOutlet UILabel *wordToType;
IBOutlet UITextField *wordTyped; 
```

还有他们。视图控制器

```
 - (void)updateTimer
{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"mm:ss.SSS"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    NSString *timeString=[dateFormatter stringFromDate:timerDate];
    stopWatchLabel.text = timeString;
}

- (IBAction)onStartPressed:(id)sender {
    startDate = [NSDate date];

    stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                      target:self
                                                    selector:@selector(updateTimer)
                                                    userInfo:nil
                                                     repeats:YES];
}

- (IBAction)onStopPressed:(id)sender {    

    [stopWatchTimer invalidate];
    stopWatchTimer = nil;
    [self updateTimer];

    if ([wordToType.text isEqualToString:@"stop"]) {

    }

} 
```

非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:33:38.783

我想出了如何做到这一点，我会为任何想知道的人提供代码。它只是 .m 文件的代码，而警报视图只是最后的一些额外代码，以使其在计时器停止时用户所拥有的时间时显示警报。

```
- (IBAction)stopTimer:(id)sender {

    if([wordTyped.text isEqualToString:wordToType.text]){

        [stopWatchTimer invalidate];
        stopWatchTimer = nil;
        [self updateTimer];

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Nice Work" message:[NSString stringWithFormat:@"Good Job! You're time to type the alphabet was %@. Let's see if you can do better...", stopWatchLabel.text]
                                                       delegate:self cancelButtonTitle:@"Main Menu" otherButtonTitles: nil];

        [alert show];
    }
} 
```

# c# - 解释这种行为：ListView + checkbox + DataPager + Viewstate off = Exception。添加另一个复选框 => 有效

> ID：11040856
> 
> 赞同：1
> 
> 时间：2012-06-14T20:26:11.650
> 
> 标签：c#, asp.net, listview, viewstate, datapager

我有一个关闭视图状态的 ListView、Data Pager 和一个 LinqDataSource。ListView 的 ItemTemplate 中有一个复选框。单击任何 DataPager 按钮时，我得到一个异常“无效的回发或回调参数。事件验证在配置中启用或在页面中使用 <%@ Page EnableEventValidation="true" %>。”

*页面标记*

[http://pastebin.com/qbnJQtm0](http://pastebin.com/qbnJQtm0)

*代码隐藏*

[http://pastebin.com/MFGnAWL4](http://pastebin.com/MFGnAWL4)

我可以通过启用 ViewState 来解决问题，但是我需要将其关闭。我的一位同事给了我一个解决问题的解决方案：将此行添加到 ItemTemplate 解决了问题

*完整代码*

[http://pastebin.com/ZC9k9pre](http://pastebin.com/ZC9k9pre)

我很高兴我的代码现在可以工作，但我想知道为什么带有 Checked=true 状态的第二个隐藏复选框可以解决问题。

有任何想法吗？

# html - 最后一个单元格更改大小时表格的位置问题

> ID：11040858
> 
> 赞同：-1
> 
> 时间：2012-06-14T20:26:19.967
> 
> 标签：html, css

```
<table>                                        
    <tbody>                                        
        <tr style="height:30px">                              
            <td>Has a Menu and is goes to the extreme left</td>
            <td style="position: absolute; right: 238px;">this cell has a Checkout image and needs to be close to the next cell</td>
            <td style="vertical-align: top; padding-top: 0px; position: absolute; right: 12px;">has another menu and needs to go to the extreme right</td>
        </tr>
    </tbody>
</table> 
```

第二个 TD`style="position: absolute; right: 238px;"`需要能够根据最后一个 TD 调整自身大小`style="vertical-align: top; padding-top: 0px; position: absolute; right: 12px;"`。最后一个 TD/Cell 很好，需要精确到它所在的位置，这就是我必须设置位置的原因：absolute.... 但是之前的 TD 需要在它之前。
如果我在第二个 TD 上删除 position:absolute ，那么它会转到我不想要的左侧。如果我保持原样，那么当最后一个 TD 减小或增大时，如果影响第二个 TD 的屏幕位置 - 我需要第二个 TD 始终接近最后一个 TD
你能通过重新定义/重构样式来提供帮助吗对于 td 与`style="position: absolute; right: 238px;"`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T20:41:46.467

我不会使用 a`table`因为你没有显示表格数据。此外，发出`position:absolute`声音`td`真的很奇怪，甚至不确定它是否有效（所以它在一个浏览器中可能看起来不错，但在另一个浏览器中可能不行，特别是在 IE 7 及更低版本中，你可能想检查一下）

相反，使用`<div>`s 并定位它们应该更容易。就像是 ...

```
<div style='overflow:auto'>
  <div style='float:left'>Has a Menu and is goes to the extreme left</div>
  <div style='float:right'>has another menu and needs to go to the extreme right</div>
  <div style='float:right'>this cell has a Checkout image and needs to be close to the next cell</div>
</div> 
```

举个例子，你当然需要玩定位。注意你的第三个“细胞”是如何在第二个之前出现的。这不是一个错字，这是因为它们是向右浮动的，所以最右边的元素首先出现，下一个浮动的元素在它旁边停止，等等。

# php - 在同一个表的不同列中显示来自数据库的不同值

> ID：11040859
> 
> 赞同：0
> 
> 时间：2012-06-14T20:26:21.507
> 
> 标签：php, sql, database

以下是我的代码，我试图在其中显示来自同一个表的值，但在我的 HTML 表的不同列中显示不同的 id，比如假设我的表有三列，然后在每一列中显示不同的值

**我只希望我各自的 id 在同一张表中显示的数据的每一列上发生变化**

类似于： ID1 的值 | ID2 的值 | ID3 的值

但目前我正在做这样的事情：ID1的值| ID1 的值 | ID1 的值

请让我知道如何修复以下代码：

```
 <table width="714" height="318" border="0" align="right" cellpadding="2" cellspacing="0">
          <?php $count=0; do { 
                  { ++$count;

          ?> <tr>
            <td width="231" height="288" valign="top" background="images/viv.png"><div align="center"><img src="get.php?id=<?php echo $row_Recordset1['ID']; ?>"  width="270" height="270" /><br />
                <br />
              <a href="get_deal.php?id=<?php echo $row_Recordset1['ID']; ?>"><img src="button.png" width="182" height="36" border="0" /></a><br />
              <br />
            </div></td>
            <td width="231" valign="top" background="images/viv.png"><div align="center"><img src="get.php?id=<?php echo $row_Recordset1['ID']; ?>"  width="270" height="270" /><br />
                    <br />
                    <a href="get_deal.php?id=<?php echo $row_Recordset1['ID']; ?>"><img src="button.png" width="182" height="36" border="0" /></a><br />
                    <br />
            </div></td>
            <td width="231" valign="top" background="images/viv.png"><div align="center"><img src="get.php?id=<?php echo $row_Recordset1['ID']; ?>"  width="270" height="270" /><br />
                    <br />
                    <a href="get_deal.php?id=<?php echo $row_Recordset1['ID']; ?>"><img src="button.png" width="182" height="36" border="0" /></a><br />
                    <br />
            </div></td>
          </tr>
              <tr>
                <td height="23" valign="top">&nbsp;</td>
                <td valign="top">&nbsp;</td>
                <td valign="top">&nbsp;</td>
              </tr>
              <?php }

              } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1));
if ($count == 0)
            echo '<span style="font-family:Tahoma;color:white;font-size:200%">No Deals Available</span>';   ?>
        </table></td>
      </tr>
    </table> 
```

**解决方案：** [http ://www.qualitycodes.com/tutorial.php?articleid=33&title=Displaying-Records-in-Multiple-Columns-Using-PHP](http://www.qualitycodes.com/tutorial.php?articleid=33&title=Displaying-Records-in-Multiple-Columns-Using-PHP)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:30:12.610

您一直在回`$row_Recordset1['ID'];`显，这意味着您一直在显示 ID 列。您必须更改`ID`为要显示的列的名称。

在这种情况下，他们继续做 ID1 所以如果所有三个值都是 ID 那么你需要在你的选择中做别名（称它们不同的名字），这样你就可以使用`ID1`,`ID2`和`ID3`

例如，如果您当前的 sql 查询是：

```
select *
from tablex..... 
```

然后你现在必须提取列并命名它们：

```
select tablex.ID as ID1, secondTable.ID as ID2, thirdTable.ID as ID3
from tablex..... 
```

然后您可以将它们称为`ID1`,`ID2`和`ID3`。

# php - php交换表行列（数组）

> ID：11040863
> 
> 赞同：1
> 
> 时间：2012-06-14T20:26:38.310
> 
> 标签：php, arrays

我有一个数组，例如`(1,2,3,4,5,6,7,8,9,10)`. 我想把它放在桌子上。我可以做这个：

```
|-------------------------------|
|   1   |  2  |  3  |  4  |  5  |
|-------------------------------|
|   6   |  7  |  8  |  9  |  10 |
|-------------------------------| 
```

但我想要这个：

```
|-------------------------------|
|   1   |  3  |  5  |  7  |  9  |
|-------------------------------|
|   2   |  4  |  6  |  8  |  10 |
|-------------------------------| 
```

列数是固定的（例如 5）。行数必须是同质的，例如`(2, 2, 2, 2, 2)`or `(3, 3, 2, 2, 2)`or `(3, 3, 3, 3, 2)`, NOT `(4, 3, 3, 2, 2)`and NOT `(2, 2, 3, 3, 3)`...

我怎样才能做到这一点？

PS：表格是html的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:31:46.977

像这样的东西应该工作：

```
$array = array(1,2,3,4,5,6,7,8,9,10);
$size = count( $array);
$cols = 5;
$rows = $increment = ceil( $size / $cols); // It looks like this need a ceil()

for( $i = 0; $i < $rows; $i++) {
    for( $j = $i; $j < $size; $j += $increment) {
        echo $array[$j];
    }
} 
```

**[这是一个工作演示。](http://codepad.org/83zvzkw8)**

# delphi - Delphi：如何在 TGpStringHash-close 中清除 hashtable 的值

> ID：11040867
> 
> 赞同：0
> 
> 时间：2012-06-14T20:27:19.180
> 
> 标签：delphi, hashtable

唯一的方法是让[TGpStringHash](http://code.google.com/p/gpdelphiunits/source/browse/trunk/src/GpStringHash.pas)释放。然后重新创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:39:21.170

TGpStringHas 没有 Delete 或 Clear 方法，因此唯一的方法确实是销毁并重新创建实例。

# android - 使用 sdk 目标 13 销售应用程序？

> ID：11040871
> 
> 赞同：0
> 
> 时间：2012-06-14T20:27:47.390
> 
> 标签：android, admob

我想知道 Android 2.3 或更低版本的手机是否可以下载具有以下功能的应用程序：

```
<uses-sdk android:minSdkVersion="7"  android:targetSdkVersion="15"/> 
```

和构建目标 15？

因为我必须这样做才能使用 AdMob jar。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:47:41.770

是的，他们可以，这是`android:minSdkVersion`属性的目标。它可以防止使用较旧 android 版本的用户下载和安装该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:56:21.850

是的，任何运行 SDK 版本 7 及更高版本的设备都可以安装您的应用程序。该`targetSdkVersion`属性不限制设备安装您的应用程序。相反，它指定了您的应用程序应该能够在其上运行的最高 API 级别。

请注意保护早期版本的 Android 不使用 SDK 15 中提供的新方法，因为这会导致您的应用程序崩溃。

# ios - 如何在 2 个 ViewController 之间的导航栏上放置一个后退按钮？

> ID：11040872
> 
> 赞同：1
> 
> 时间：2012-06-14T20:27:52.333
> 
> 标签：ios, ios5, xcode4, segue, uistoryboard

我正在尝试在两个场景之间创建过渡，这是我在生产代码中的简化版本：

![2 视图控制器](../Images/1adc38c7d6b896522b140102794cdca7.png)

两者都是`ViewController`，左边的里面有一个 TableView，当点击它时，它应该转换到右边的场景，从点击的任何单元格传递数据。

目前，使用模态segue，我可以点击单元格并正确转换，但是，**我不知道如何将后退按钮放置到导航栏上**。

我正在从单元格过渡到第二个视图控制器，如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [self performSegueWithIdentifier:@"toSecond" sender:self];

}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{
    if ([segue.identifier isEqualToString:@"toSecond"])
    {
        NSLog(@"Preparing segue for toSecond, setting some data on target scene");

        NSIndexPath *path = [self.theTableView indexPathForSelectedRow];
        MyData * myData = [myDataArray objectAtIndex:path.row];

        // Obtain handles on the current and destination controllers
        FirstController * startingViewController;
        SecondController * destinationController;

        startingViewController = (FirstController * ) segue.sourceViewController;
        destinationController = (SecondController * ) segue.destinationViewController;

        destinationController.someData = myData;
    }
} 
```

在 上`SecondController`，我尝试修改 viewDidLoad 方法以编程方式包含一个后退按钮项，如上一个 SO 问题中所建议的那样：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UIBarButtonItem * back = [[UIBarButtonItem alloc] initWithTitle:@"Back" 
                                                              style:UIBarButtonItemStylePlain 
                                                             target:nil 
                                                             action:nil];

    [self.navigationItem setBackBarButtonItem:back];
} 
```

所以我的问题是，我怎样才能在导航栏上获得后退按钮？像这样的东西：

![所需的后退按钮](../Images/bebf603b7cc58cfb33363b8b314c33cd.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:36:51.383

使用故事板的一种（简单）方法是将导航控制器嵌入到具有表格的视图中。确保正确的视图（带有表格的视图）突出显示，然后转到编辑器 > 嵌入 > 导航控制器。

当您单击表格的一行时，后退按钮将自动出现。就像 Dan 说的那样，确保它是图片中两个视图之间的推动 segue。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:41:19.340

您将无法轻松地将后视按钮添加到模态呈现的 ViewController

如果您只想在栏的左侧添加一个普通按钮，请执行以下操作

```
 UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" 
style:UIBarButtonSystemItemDone target:nil action:nil];

    UINavigationItem *item = [[UINavigationItem alloc] initWithTitle:@"Title"];
    item.leftBarButtonItem = rightButton;
    item.hidesBackButton = YES;
    [self.yourNavigationBar pushNavigationItem:item animated:NO]; 
```

如果您坚持以模态方式呈现您的视图并且仍然想要后退按钮样式，您可以使用 [Three20](http://three20.info/home#Style)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:31:53.147

代替您拥有带有表格的视图的位置，我们`UINavigationController`不要删除带有表格的视图，而只是代替您对其进行定位的位置，或者如果它是根控制器，请使用 nav con。使带有表格的视图成为导航控制器的根视图控制器，然后简单地使用推送转场而不是模态转场，您应该会自动获得后退按钮

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T20:36:27.047

最好的方法是只使用 a`UINavigationController`作为表视图控制器的父级，并使用 push segue 而不是模态 segue。

您可以通过设置栏的属性创建两个实例`UINavigationItem`并告诉它们。实例 0 代表表视图控制器。`UINavigationBar``items`

您可以`UIButton`使用 101 类型（未记录的后退按钮类型）创建一个，并将其包装在`UIBarButtonItem`using 中`initWithCustomView:`。

# sql - 行差异之和

> ID：11040874
> 
> 赞同：-1
> 
> 时间：2012-06-14T20:28:03.217
> 
> 标签：sql

我在这样的列中有示例值：

```
 values 
    -------
    89    
    65    
    56    
    78    
    74   
    73    
    45    
    23    
    5    
    654   
    643   
    543   
    345   
    255   
    233   
    109   
    43    
    23    
    2 
```

值上升，然后下降到 0 并再次上升。我需要计算新列中行之间的差异以及所有值的这些差异的总和（累积总和）。值 56 和 5 是与零
的新差，总和为 819。底部示例> (23-2)+(43-23)+(109-43)+..+(654-643)+(5)+ (23-5)+..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:56:06.623

好的，这是我的尝试。但是，您需要添加一个 Identity 字段（我称之为“AddSequence”），该字段以 1 开头作为第一个值（“2”），每隔一个值递增 1。

```
SELECT SUM(C.Diff) FROM
(
 SELECT CASE WHEN (A.[Value] - (SELECT [Value] FROM [TestValue] AS B WHERE B.[AddSequence]= A.[AddSequence]-1)) > 0
    THEN (A.[Value] - (SELECT [Value] FROM [TestValue] AS D WHERE D.[AddSequence]= A.[AddSequence]-1))
    ELSE 0
    END AS Diff
 FROM [TestValue] AS A
) AS C 
```

第一个解决方案我忽略了一个事实，即只要差异为负，我们就必须重新开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:06:28.777

**已编辑 - 基于您的问题编辑** (T-SQL) 我不知道如何在不添加 ID 的情况下执行此操作。如果您添加一个 ID - 这将提供您在编辑之前发布的确切输出。可能有更好的方法，但这既快速又肮脏-一次性拍摄。使用`SELF JOIN`. 差异最初是您的新列的名称。

```
UPDATE A
SET differences = CASE WHEN A.[values] > B.[Values] THEN A.[values] -  B.[Values]
ELSE A.[values] END
FROM SO_TTABLE A
JOIN SO_TTABLE B ON A.ID = (B.ID - 1) 
```

**输出**

```
Select [Values], differences FROM SO_TTABLE 

   [values]     differences   
    ------------------------
    89          24             
    65           9            
    56          56             
    78           4             
    74           1            
    73          28             
    45          22             
    23          18              
     5           5              
   654          11           
   643         100            
   543         198           
   345          90            
   255          22            
   233         124            
   109          66             
    43          20             
    23          21              
     2           0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:31:09.627

我认为您正在寻找类似的东西：

```
SELECT SUM(a - b)) as sum_of_differences
FROM ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:16:59.360

我认为你想要这个差异，我已经在 sqlite 中测试过

```
SELECT CASE WHEN (v.value - val) < 0 THEN 0 ELSE (v.value - val) END AS differences
FROM v,
(SELECT rowid, value AS val FROM v WHERE rowid > 1) as next_val
WHERE v.rowid = next_val.rowid - 1 
```

至于金额

```
SELECT SUM(differences) FROM
(
    SELECT CASE WHEN (v.value - val) < 0 THEN 0 ELSE (v.value - val) END AS differences
    FROM v,
    (SELECT rowid, value AS val FROM v WHERE rowid > 1) AS next_val
    WHERE v.rowid = next_val.rowid - 1
) 
```

# file - Scala新手多个文件

> ID：11040875
> 
> 赞同：0
> 
> 时间：2012-06-14T20:28:04.717
> 
> 标签：file, class, scala, main

我是 Scala 的新手，我似乎找不到这些信息。目前我有 2 个文件：ClassA.scala 和 MyMain.scala。当我运行 `>scalac *.scala`它时，它可以很好地编译这两个文件。但是，当我运行时，`> scala MyMain.scala`我收到一条错误消息“未找到：键入 ClassA”。要在另一个文件中包含一个类，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:44:44.753

您需要告诉 scala 您尝试加载的类的类路径。您可以使用`scala -classpath`或更短的`scala -cp`. 因此，对于您的示例，如果类文件位于当前目录中，它将是`scala -cp . MyMain`. 如果您需要向类路径添加更多路径，可以用冒号分隔它们。例如`scala -cp .:dir:otherdir MyMain`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:34:19.280

您需要在类路径中同时包含这两个类。“scala MyMain.scala”将 MyMain.scala 放在类路径上，而不是 ClassA。 `scala MyMain.scala -classpath ClassA.scala`应该做的伎俩。有关更多详细信息，请参阅[入门页面。](http://www.scala-lang.org/node/166)

# git - Jenkins 使用带有部署密钥的 Git 构建

> ID：11040881
> 
> 赞同：5
> 
> 时间：2012-06-14T20:28:26.393
> 
> 标签：git, github, jenkins

我将 git 插件添加到 Jenkins。我已经在构建服务器上以 jenkins 用户的身份生成了一个公钥。我将此密钥作为部署密钥添加到 github。我添加了带有 jenkins 名称和电子邮件的全局 git 属性，并且电子邮件与公钥末尾的内容相匹配。

当 Jenkins 尝试从 git 存储库（托管在 Github）中提取时，我得到以下信息：

```
Started by user anonymous
Building in workspace /var/lib/jenkins/jobs/Test Deployment/workspace
Checkout:workspace / /var/lib/jenkins/jobs/Test Deployment/workspace - hudson.remoting.LocalChannel@9ba3afe
Using strategy: Default
Cloning the remote Git repository
Cloning repository origin
ERROR: Error cloning remote repo 'origin' : Could not clone git@github.com:GenRocket/GenRocket.git
hudson.plugins.git.GitException: Could not clone git@github.com:GenRocket/GenRocket.git
    at hudson.plugins.git.GitAPI.clone(GitAPI.java:245)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1121)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1063)
    at hudson.FilePath.act(FilePath.java:839)
    at hudson.FilePath.act(FilePath.java:821)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1063)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1218)
    at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:586)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:475)
    at hudson.model.Run.run(Run.java:1438)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:239)
Caused by: hudson.plugins.git.GitException: Command "git clone --progress -o origin git@github.com:GenRocket/GenRocket.git /var/lib/jenkins/jobs/Test Deployment/workspace" returned status code 128:
stdout: Cloning into /var/lib/jenkins/jobs/Test Deployment/workspace...

stderr: Host key verification failed.
fatal: The remote end hung up unexpectedly 
```

不知道问题是什么，或者我忘记在配置方面做什么。任何帮助表示赞赏。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:43:47.403

对于权限被拒绝错误，您需要确保您使用的是您创建的密钥。为此，请在 ~/.ssh 目录中创建一个名为“config”的文件。使用以下内容填充配置文件：

*   主机名 github.com
*   用户 git
*   身份文件 ~/.ssh/id_rsa
*   身份只有是

只需确保 IdentityFile 值指向您的密钥。:)

使用以下内容进行验证： ssh -vT git@github.com

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T20:56:40.897

尝试将 github 添加到 jenkins 用户的 .ssh/known_hosts 文件中。如果您手动尝试以 jenkins 用户身份进行克隆，它应该会提示您将 github.com 添加为已知主机。一旦你这样做了，jenkins 应该能够在构建时验证主机密钥。

# spring-security - 用于生产的 Spring Security kerberos 扩展？

> ID：11040883
> 
> 赞同：3
> 
> 时间：2012-06-14T20:28:40.747
> 
> 标签：spring-security, kerberos

[Spring Security – Kerberos 扩展在Spring Source 网站](http://static.springsource.org/spring-security/site/extensions/krb/index.html)上列为 1.0M2 版本。它始于 2009 年。

为什么它没有发布 1.0 版本？

是否适合生产使用？

如果它不适合生产使用，那么插入 Spring Security 的最佳替代方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:05:23.423

一年多以来，我们在生产中成功使用了 Spring Security Kerberos/SPNego，我们对此非常满意！

但是，我不能说为什么没有发布 1.0。

# android - 外化 Android Linux 内核模块

> ID：11040888
> 
> 赞同：2
> 
> 时间：2012-06-14T20:28:56.947
> 
> 标签：android, linux-kernel

我不知道我正在尝试做的事情是否可能，虽然这可能是不可取的，但我想知道我是否可以完成这项工作。

我有一个为 Android 平板电脑编译的 Linux 内核，我需要对其中一个内置模块进行一些更改。（在这种特殊情况下，从源代码编译新内核不是我的选择）。

我已经使用修改后的源代码进行编译并编译了我需要的 .ko 文件。但是，在编译这些模块时，我得到一个如下所示的错误列表：

```
WARNING: "alarm_start_range" [/modules/p3_battery.ko] undefined! 
```

似乎我的 Makefile 没有正确链接此标头：

```
#include <linux/power/p3_battery.h> 
```

无论如何，我尝试在设备上加载这些模块，当我尝试这样做时`insmod p3_battery.ko`，我收到一条失败消息（这是我所期望的）。查看 dmesg，我看到消息告诉我以下内容：

```
p3_battery: Unknown symbol alarm_start_range (err 0) 
```

如上所述，这些函数确实存在于 kallsyms 表中。

如果有帮助，我可以通过提供我的 Makefile 来提供更多细节，但我想提供一个简明的问题表述，看看我在这里所做的是否有意义。

# c# - 将参数传递给 ProcessStartInfo 类

> ID：11040894
> 
> 赞同：0
> 
> 时间：2012-06-14T20:29:19.490
> 
> 标签：c#, .net, processstartinfo, redirectstandardoutput

我想使用 Process.Start 调用命令提示符命令，然后使用 StandardOutput 我想在我的应用程序中使用 StreamReader 进行读取，但是当我运行下面的程序时，在 MessageBox 中我只是找到了直到 Debug 的路径，我已经说过我的命令in arguments 不执行。

```
ProcessStartInfo info = new ProcessStartInfo("cmd.exe", "net view");
            info.UseShellExecute = false;
            info.CreateNoWindow = true;
            info.RedirectStandardOutput = true;    

            Process proc = new Process();
            proc.StartInfo = info;
            proc.Start();

            using(StreamReader reader = proc.StandardOutput)
            {
                MessageBox.Show(reader.ReadToEnd());
            } 
```

在这里，我的 net view 命令永远不会执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:30:56.540

如果你想运行一个命令，`cmd`你也必须指定`/c`参数：

```
new ProcessStartInfo("cmd.exe", "/c net view"); 
```

但是，在这种情况下，您根本不需要`cmd`。`net`是本机程序，可以按原样执行，无需外壳：

```
new ProcessStartInfo("net", "view"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:43:14.440

还要记住拦截 StandardErrorOutput 否则什么也看不到：

```
var startInfo = new ProcessStartInfo("net", "view");
startInfo.UseShellExecute = false;
startInfo.CreateNoWindow = true;
startInfo.RedirectStandardError = true;
startInfo.RedirectStandardOutput = true;

using (var process = Process.Start(startInfo))
{
    string message;

    using (var reader = process.StandardOutput)
    {
        message = reader.ReadToEnd();
    }

    if (!string.IsNullOrEmpty(message))
    {
        MessageBox.Show(message);
    }
    else
    {
        using (var reader = process.StandardError)
        {
            MessageBox.Show(reader.ReadToEnd());
        }
    }
} 
```

# android - android滑动删除列表行

> ID：11040895
> 
> 赞同：11
> 
> 时间：2012-06-14T20:29:21.897
> 
> 标签：android, list, dynamic, swipe

所以我做了一些搜索，但没有找到一个好的答案。任何熟悉 android 4.0 的人都知道花哨的滑动来删除正在运行的应用程序。我正在尝试将其实现为动态列表。

当我说动态时，它是一个使用基本适配器和支架构建的列表。

我想知道是否有人有一个很好的例子来说明如何将此滑动功能实现到动态列表中。我希望它具有精美的动画，并且在删除元素后列表的所有内容都重新折叠在一起。但是，就目前而言，我正在寻找如何正确实施这一点的良好起点。

任何和所有的帮助总是值得赞赏的。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T20:43:51.867

[SwipeListView](https://github.com/47deg/android-swipelistview)是一个出色的 ListView 扩展，它可以做到这一点。Google Play 上也提供了一个演示应用程序：https: [//play.google.com/store/apps/details?id=com.fortysevendeg.android.swipelistview](https://play.google.com/store/apps/details?id=com.fortysevendeg.android.swipelistview)

# javascript - Node.js 的 SQLite3 教程和需要的代码示例说明

> ID：11040897
> 
> 赞同：10
> 
> 时间：2012-06-14T20:29:28.637
> 
> 标签：javascript, database, node.js, sqlite

目前我对 SQLite 有点困惑，因为这是我第一次使用数据库。我从这里得到了 sqlite3：[https](https://github.com/developmentseed/node-sqlite3) ://github.com/developmentseed/node-sqlite3 。

我正在看那个例子，有些事情我明白，而有些事情我不明白。大多数包含在 中的数据库命令`.run()`等等`.prepare()`让我很难受。

这是一个例子：

```
var usersDB = new sqlite3.Database("databases/users.db");

  usersDB.serialize(function() {
  usersDB.run("CREATE TABLE lorem (info TEXT)");

  var stmt = usersDB.prepare("INSERT INTO lorem VALUES (?)");
  for (var i = 0; i < 10; i++) {
      stmt.run("Ipsum " + i);
  }
  stmt.finalize();

  usersDB.each("SELECT rowid AS id, info FROM lorem", function(err, row) {
      console.log(row.id + ": " + row.info);
  });
});

usersDB.close(); 
```

另外，我如何在 Node.js 上的 SQLite 数据库中存储简单的东西，例如用户名、密码（我必须自己对它们进行哈希处理吗？）和电子邮件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T14:29:35.517

有两个不同的东西需要学习：sqlite 数据库程序和 node-sqlite3 提供对 sqlite db 服务的访问的 nodejs 模块。首先了解数据库程序 sqlite 将最好地回答您的数据库问题。我建议从：[http](http://www.sqlite.org/) ://www.sqlite.org/ 获取和安装 sqlite 。该站点有很好的文档，可以帮助您学习存储用户名和密码。您可以从命令行创建表、添加数据并了解正在发生的事情。之后，如果您了解 node.js 的概念，那么 node-sqlite3 对您来说会更有意义。否则，花一些时间在 node.js 站点上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T22:15:13.233

也许你可以试试[grumdrig 的 node-sqlite](https://github.com/grumdrig/node-sqlite)。他有一个[非常好的“示例驱动”文档](http://grumdrig.com/node-sqlite)。

# java - Android 新手：java.lang.RuntimeException：无法实例化活动 ComponentInfo

> ID：11040903
> 
> 赞同：0
> 
> 时间：2012-06-14T20:29:41.127
> 
> 标签：java, android, xml, runtime, manifest

这是我的 MyTasteActivity 代码：

```
package MyTaste;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MyTasteActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         TextView tv = new TextView(this);
         tv.setText("Hello, Android");
         setContentView(tv);

    }
} 
```

这是我的 XML Android 清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="My.Taste.App"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MyTaasteActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

那么为什么我不断收到此错误：

```
06-14 20:22:48.779: E/AndroidRuntime(749): FATAL EXCEPTION: main

06-14 20:22:48.779: E/AndroidRuntime(749): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{My.Taste.App/My.Taste.App.MyTasteActivity}: java.lang.ClassNotFoundException: My.Taste.App.MyTasteActivity

06-14 20:22:48.779: E/AndroidRuntime(749):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)

06-14 20:22:48.779: E/AndroidRuntime(749):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)

06-14 20:22:48.779: E/AndroidRuntime(749):  at android.app.ActivityThread.access$600(ActivityThread.java:123)

06-14 20:22:48.779: E/AndroidRuntime(749):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)

06-14 20:22:48.779: E/AndroidRuntime(749):  at 
android.os.Handler.dispatchMessage(Handler.java:99)

06-14 20:22:48.779: E/AndroidRuntime(749):  at android.os.Looper.loop(Looper.java:137)

06-14 20:22:48.779: E/AndroidRuntime(749):  at android.app.ActivityThread.main(ActivityThread.java:4424)

06-14 20:22:48.779: E/AndroidRuntime(749):  at java.lang.reflect.Method.invokeNative(Native Method)

06-14 20:22:48.779: E/AndroidRuntime(749):  at java.lang.reflect.Method.invoke(Method.java:511)

06-14 20:22:48.779: E/AndroidRuntime(749):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)

06-14 20:22:48.779: E/AndroidRuntime(749):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)

06-14 20:22:48.779: E/AndroidRuntime(749):  at dalvik.system.NativeStart.main(Native Method)

06-14 20:22:48.779: E/AndroidRuntime(749): Caused by: java.lang.ClassNotFoundException: My.Taste.App.MyTasteActivity

06-14 20:22:48.779: E/AndroidRuntime(749):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)

06-14 20:22:48.779: E/AndroidRuntime(749):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)

06-14 20:22:48.779: E/AndroidRuntime(749):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)

06-14 20:22:48.779: E/AndroidRuntime(749):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)

06-14 20:22:48.779: E/AndroidRuntime(749):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)

06-14 20:22:48.779: E/AndroidRuntime(749):  ... 11 more 
```

AVD 将显示消息“不幸的是，MyTaste 已停止”。我不知道出了什么问题，我已经重新安装了几次 Android SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:33:21.057

您将包指定为：

```
package="My.Taste.App" 
```

而代码中指定的包是：

```
package MyTaste; 
```

我认为一致性会解决这个问题

编辑：下面的 awnser 显示了另一个一致性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:33:22.000

java类名与Manifest定义不同..

```
public class MyTasteActivity extends Activity {

android:name=".MyTaasteActivity" 
```

注意双`a`

该错误也是相当不言自明的......

```
java.lang.ClassNotFoundException: My.Taste.App.MyTasteActivity 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T16:52:32.727

我遇到了同样的问题，但是我在 Manifest 文件中声明了我的活动，并且名称正确。

我的问题是我不必在“libs”文件夹中导入第三方库，我需要在我的项目中引用它们（右键单击、属性、Java 构建路径、库、添加 Jar ...）。

关于如何在清单文件中声明活动，正确使用 .ActivityName 总是该活动位于主包中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-10T20:41:46.100

给出相同错误但在不同行号上的另一个原因是：

类 MyActivity ... { private String MyString = getString(R.strings.....);

您需要在 onCreate 中初始化所有内容:)

# android - Achartengine 从图表创建位图始终为空

> ID：11040914
> 
> 赞同：0
> 
> 时间：2012-06-14T20:30:27.907
> 
> 标签：android, achartengine

在谷歌搜索几个小时后，我尝试了各种方法。有些方法似乎对某些人有所帮助，但对我而言却不是。我在这里想念什么？也许是许可？我知道这是一个常见的错误或其他东西，但必须有一个解决方案。

所有的方法都是相似的。

**第一的：**

```
GraphicalView v = ChartFactory.getBarChartView(ChartsDuration.this, buildBarDataset(titles, values), renderer, Type.DEFAULT); 
                    v.setDrawingCacheEnabled(true);
                    v.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_HIGH);
                    v.buildDrawingCache(true);
                    Bitmap bitmap = Bitmap.createBitmap(v.toBitmap()); //bitmap is null
                    v.setDrawingCacheEnabled(false);

or this:

                    Bitmap bitmap = Bitmap.createBitmap(v.getDrawingCache()); //bitmap is null 
```

**我也尝试了[这里](https://stackoverflow.com/questions/2339429/android-view-getdrawingcache-returns-null-only-null)的解决方案：**

```
 v.setDrawingCacheEnabled(true);

                 // this is the important code :)  
                 // Without it the view will have a dimension of 0,0 and the bitmap will be null          
                 v.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
                             MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
                 v.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight()); 

                 v.buildDrawingCache(true);
                 Bitmap b = Bitmap.createBitmap(v.getDrawingCache());
                 v.setDrawingCacheEnabled(false); // clear drawing cache 
```

**[然后这个](http://achartengine.googlecode.com/svn-history/r420/trunk/achartengine/src/org/achartengine/GraphicalView.java)页面底部的方法：**

```
v.setDrawingCacheEnabled(false);
                    if (!v.isDrawingCacheEnabled()) {
                      v.setDrawingCacheEnabled(true);
                    }
                    if (renderer.isApplyBackgroundColor()) {
                      v.setDrawingCacheBackgroundColor(renderer.getBackgroundColor());
                    }
                    v.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_HIGH);
                    v.getDrawingCache(true);
                    Bitmap b = Bitmap.createBitmap(v.getDrawingCache()); 
```

**我也没有得到任何运气：**

```
 v.setDrawingCacheEnabled(true);
                    v.requestFocus();
                    v.getRootView();

                    v.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
                    MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
                    v.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight());

                    v.buildDrawingCache(true);
                    Bitmap mBitmap = v.getDrawingCache(); 
```

位图始终为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:42:27.687

只是一个想法，不确定它是否可行：

将 Achartengine 视图放在另一个视图中（例如 frameLayout ），然后捕获它而不是 Achartengine 视图。

另外，确定您的代码仅在一段时间后运行，所有视图都已自行绘制？为了检查它，尝试获取视图的宽度或高度。

您也没有任何异常或特殊日志吗？

# java - 无法找到协议的提供者：smtp

> ID：11040919
> 
> 赞同：14
> 
> 时间：2012-06-14T20:30:59.240
> 
> 标签：java, spring, jakarta-mail

春天的新人。我正在捕获以下异常：

```
2012-06-14 16:20:57,719 [http-8080-6] ERROR com.nimchip.lmu.data.service.impl.CoworkerServiceImpl - Error sending mail:
org.springframework.mail.MailSendException: Mail server connection failed; nested exception is javax.mail.NoSuchProviderException: Unable to locate provider for protocol: smtp. Failed messages: javax.mail.NoSuchProviderException: Unable to locate provider for protocol: smtp
    at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:400) ~[spring-context-support-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:306) ~[spring-context-support-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:296) ~[spring-context-support-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at com.nimchip.lmu.data.service.impl.CoworkerServiceImpl.genUpdateNomination(CoworkerServiceImpl.java:224) ~[lmu-dataaccess-1.0.0.jar:na]
    at com.nimchip.lmu.controller.coworkerNom.CoworkerController.genUpdateNomination(CoworkerController.java:312) 
```

我有一个在我的 web.xml 中注册的 mail-config.xml。这里是：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
        <property name="host" value="10.30.137.190"/>
        <property name="port" value="25"/>
    </bean>

</beans> 
```

我应该能够匿名登录到指定的邮件服务器，因此不需要用户名或密码。

我错过了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-14T20:33:56.587

你的类路径中有`mail.jar`and`activation.jar`吗？

这些类应该提供 smtp-provider。

如果您使用的是 maven，只需将其添加到您的 pom 中：

```
 <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4</version>
    </dependency>

    <dependency>
        <groupId>javax.activation</groupId>
        <artifactId>activation</artifactId>
        <version>1.0.2</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T16:33:50.793

我有同样的问题。我使用 mailapi 作为工件 id，这导致了这个问题。我替换 `<artifactId>mailapi</artifactId>`为 `<artifactId>mail</artifactId>`它工作正常

# javascript - JavaScript：在内容操作期间使用对象文字来节省时间和工作

> ID：11040920
> 
> 赞同：2
> 
> 时间：2012-06-14T20:31:01.500
> 
> 标签：javascript, javascript-objects

如果我们写这个——

```
var myVariable={
   propertyA:"valueA",
   propertyB:"valueB",
} 
```

我们可以`propertyB`这样称呼——

```
myVariable.propertyB 
```

记住这一点，当我们写 -

```
document.getElementById('myDiv').style.visibility='hidden' 
```

我们可以这样写，像这样——

```
document.getElementById('myDiv').style={
                                   visibility:'hidden',
                                   display:'inline',
                                 } 
```

好吧，如果那是正确的，那么我们可以这样做——

```
document.getElementById('myDiv')={
       innerHTML:'this is a div',
       style:{
         visibility:'hidden',
         display:'inline',
       }
} 
```

现在，如果这些是正确的，那么可能也是——

```
document={
  getElementById('myDiv'):{
    innerHTML:'this is a div',
    style:{
      visibility:'hidden',
      display:'inline',
    }
  }
  getElementById('mySpan'):{
    innerHTML:'this is a span',
    style:{
      visibility:'visible',
      display:'table',
    }
  }
} 
```

那么，其中有多少是错误/正确的？如果错了，为什么以及什么是错的？你能给我更多与此相关的信息吗？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:48:21.087

所有 Javascript 对象都是哈希，反之亦然——所以你的假设是基于事实的。但是，Javascript 赋值是一种替换操作，而不是扩充。这可以在一个简单的例子中很容易地看出：

```
obj = { a: { b: 2 } }
obj.a.b   // => 2
obj.a = { c: 3 }
obj.a.c   // => 3
obj.a.b   // => undefined 
```

`HTMLElement`除非在 a的属性的实现中使用魔法，`style`否则分配给它不会简单地合并值。您分配的链条越靠前，您造成的伤害就越大。

最后，在对象文字中 a 之前给出的任何值`:`都应该是字符串或裸字（将被引用）——变量和函数调用（如`getElementById('mySpan')`）不能用作对象文字中的键。

但是，您可以通过以下方式获得您正在寻找的行为：

```
var divStyles = document.getElementById('myDiv').style;
var styles = { visibility:'hidden', display:'inline' };

for (key in styles) {
  if (styles.hasOwnProperty(key)) {
    divStyles[key] = styles[key];
  }
} 
```

开销可能值得也可能不值得，这取决于您要更改的属性数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:35:47.893

每当你这样做

```
myVar.someObject = { ... } 
```

您完全覆盖了“someObject”，丢弃了它在分配之前的所有属性。

```
var myvar = { obj: {a:1, b:2} };
myvar.obj = {a:3}

console.log(myvar.obj.a) // 3; ok
console.log(myvar.obj.b) // undefined; oh no! 
```

# database - 在 CouchDb 视图中列出所有数据库，验证函数

> ID：11040923
> 
> 赞同：6
> 
> 时间：2012-06-14T20:31:10.440
> 
> 标签：database, function, view, couchdb

我需要在视图/验证函数中获取 Couchdb 服务器中所有数据库的列表。

是否有 CouchDb 预定义功能，我可以在函数内部使用它（如发射）？

我知道我可以做 http 请求来得到这个，比如：

“http://server/_all_dbs”

但它真的很乱。

谢谢奥伦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-12-03T15:06:43.917

您有两种方法可以列出 CouchDB 服务器中的所有数据库

无密码

```
curl -X GET http://127.0.0.1:5984/_all_dbs 
```

带密码

```
curl -X GET http://USER:PASSWORD@127.0.0.1:5984/_all_dbs 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T07:15:30.970

不，在视图中，您只能看到您正在处理的文档。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-17T20:21:41.157

> 我知道我可以做 http 请求来得到这个，比如：
> 
> " [http://server/_all_dbs](http://server/_all_dbs) "
> 
> 但它真的很乱。

您可以使用[jq](https://stedolan.github.io/jq/)来减少混乱：

```
ccurl /all_dbs | jq 
```

（以上使用[ccurl](https://www.npmjs.com/package/ccurl)让生活更轻松。）

# linq - 按子集合的子属性对 LINQ 查询进行排序？

> ID：11040926
> 
> 赞同：3
> 
> 时间：2012-06-14T20:31:19.417
> 
> 标签：linq, entity-framework, entity-framework-4.1

我有这些对象：

```
public class Class
{
     public Guid Id {get;set;}
     public string Name {get;set;}
     public virtual ICollection<Schedule> Schedules{get;set;}
}

public class Schedule
{
     public Guid Id {get;set;}
     public virtual DayOfTheWeekId {get;set;}
     public virtual DayOfTheWeek {get;set;}
     public DateTime StartTime {get;set;}
     public DateTime EndTime {get;set;}
} 
```

我当前的查询看起来像这样，但我得到了这个异常：**至少一个对象必须实现 IComparable。**：

```
 Repository
.Get(c => c.Schedules.Any(s => s.DayOfTheWeekTypeId == dayOfTheWeekId))
.OrderBy(e => e.Schedules.OrderBy(s => s.StartDateTime)).ToList() 
```

当我设置时间时，我总是使用同一天，因为我需要在一周中的某些日子上课。这就是 DayOfTheWeek 对象发挥作用的地方。这就是我设置时间的方式：

```
var schedule = new Schedule{
                           StartDateTime = new DateTime(1999,1,1) + new TimeSpan(9, 15, 0),
                           EndDateTime = new DateTime(1999,1,1) + new TimeSpan(9, 15, 0),
                           DayOfTheWeekTypeId = 1
                           } 
```

**更新：**

考虑到这一点，我想我可能想要分组......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T20:43:32.410

您正在尝试按顺序*排序*。那有什么意思？

按时间表中最早的事件排序会更有意义：

```
.OrderBy(e => e.Schedules.Min(s => s.StartDateTime)) 
```

我不知道这是否*可行*，但至少更有意义。（它可以在 LINQ to Objects 中工作。不过我不知道 EF。）

# codeigniter - 如何从这一行代码为我的助手创建一个函数？

> ID：11040933
> 
> 赞同：-1
> 
> 时间：2012-06-14T20:32:03.480
> 
> 标签：codeigniter

我认为有一个菜单：

```
<ul>

    <li>
         <a href="<?php echo base_url(); ?>news" <?php if($nav_item == 'news'): ?>class="active-nav-item"<?php endif; ?>>News about Cars</a>
    </li>

    <li>
     <a href="<?php echo base_url(); ?>products" <?php if($nav_item == 'products'): ?>class="active-nav-item"<?php endif; ?>>Latest Products</a>
    </li>

    <li>
     <a href="<?php echo base_url(); ?>media" <?php if($nav_item == 'media'): ?>class="active-nav-item"<?php endif; ?>>Audio/Video</a>
    </li>

</ul> 
```

我从我的控制器发送一个变量 $nav_item 到这个视图，例如新闻（我对导航中的每个项目都有控制器，所以：新闻、产品和媒体控制器），如下所示：

```
class News extends CI_Controller {

    public function index()
    {
        $data['nav_item'] = 'news'; // variable for navigation 
        $data['main_content'] = 'pages/news';
        $this->load->view('template', $data);
    }
} 
```

所以，它工作正常，但链接中的代码真的很长：

```
<a href="<?php echo base_url(); ?>news" <?php if($nav_item == 'news'): ?>class="active-nav-item"<?php endif; ?>>News about Cars</a> 
```

我想从中创建一个函数，我只发送两个参数，它会自动执行其他操作。例如，它可能看起来像这样：

```
<a href="<?php echo base_url(); ?>news" <?php activeitem($navitem,'news'); ?>>News about Cars</a> 
```

所以，`if $navitem == 'news'`它回响`"class='active-nav-item'"`

如何执行此功能，以便我可以将它放在我的例如 myown_helper.php 中的 helpers 文件夹中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:50:03.503

助手的功能可以是：

```
function activeitem($active_variable = '', $active_nav = '')
{
    return $active_variable == $active_nav ? 'class="active-nav-item"' : '';
} 
```

然后在链接上做：

```
<?=activeitem($nav_item, 'news')?> 
```

# java - 如何指定外部 log4j 属性文件来启动 jboss 服务器？

> ID：11040936
> 
> 赞同：1
> 
> 时间：2012-06-14T20:32:15.080
> 
> 标签：java, jboss, log4j

如何指定一个外部 log4j 属性文件来运行 jboss 服务器？

我需要使用 bash/ 终端命令来执行此操作吗？不是以编程方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:43:04.830

创建一个文件夹来存储`log4j.properties`（即`C:\PropertiesFolder`）。
然后将此文件夹的链接添加到 JBoss 类路径：

1.  去`[server folder]\bin`
2.  编辑`run.bat`（如果服务器在 Windows 上运行）或`run.sh`（对于 Linux）
3.  通过添加文件夹链接来编辑类路径行：

片段：

```
if "x%JBOSS_CLASSPATH%" == "x" (
  set "RUN_CLASSPATH=%RUNJAR%;C:\PropertiesFolder;"
) else (
  set "RUN_CLASSPATH=%JBOSS_CLASSPATH%;%RUNJAR%;C:\PropertiesFolder;"
) 
```

最后重新启动服务器然后通过命令行运行（转到`[server folder]\bin`然后键入`run`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:20:51.567

如果 Jboss 的目标版本是**7.1.x** - 那么您需要遵循官方文档中描述的简单 2 个步骤。

***如何使用 log4j.properties 或 log4j.xml 而不是使用日志子系统配置？***

[https://docs.jboss.org/author/display/AS71/How+To#HowTo-HowdoIuselog4j.propertiesorlog4j.xmlinsteadofusingtheloggingsubsystemconfiguration%3F](https://docs.jboss.org/author/display/AS71/How+To#HowTo-HowdoIuselog4j.propertiesorlog4j.xmlinsteadofusingtheloggingsubsystemconfiguration%3F)

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:59:27.040

您可以将 log4j.properties 文件放在类路径中。

# java - 如何实现带有进度条的启动画面？- 安卓

> ID：11040938
> 
> 赞同：5
> 
> 时间：2012-06-14T20:32:30.343
> 
> 标签：java, android, timer, progress-bar, splash-screen

我在启动时有一个启动画面。使用以下编码

```
public class Splash extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    Thread logoTimer = new Thread(){
        public void run(){
            try{
                int logoTimer = 0;
                while (logoTimer<5000){
                    sleep(100);
                    logoTimer=logoTimer+100;
                     }
                startActivity(new Intent("com.package.MAIN"));
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
            finally{
                finish();
            }
        }
    };
    logoTimer.start();
}} 
```

现在我只想在屏幕底部的上述启动活动中添加一个**水平进度条。***所以当启动屏幕同时出现时，进度条应该加载，当它完成时应该出现下一个活动。*

在进度条上搜索了几个例子，但无法做我想做的事。有很多带有对话框的进度条示例。但在这里我不想要任何对话框。我只需要在初始屏幕上显示一个简单的**水平进度条。**

那么有人可以帮助我完成所需的编码和东西吗？请！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T11:56:42.520

给你，写了一个教程如何创建一个带有进度条的SplashScreen：

[http://blog.blundellapps.com/tut-splashscreen-with-progress-bar/](http://blog.blundellapps.com/tut-splashscreen-with-progress-bar/)

基本上，它不是你的线程启动一个 ASyncTask，而是将你的progressSpinner 的引用传递给 ASyncTask，这将在线程下载资源（或你想做的任何事情）时更新它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:49:18.933

此 XML 示例将创建一个水平 ProgressBar：

```
<ProgressBar
    android:id="@+id/progress_bar"
    style="@android:style/Widget.ProgressBar.Horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:progress="0" /> 
```

# html - 视图包中的控制器侧列表对象。然后在 html 端使用 foreach 逐步生成表格

> ID：11040941
> 
> 赞同：1
> 
> 时间：2012-06-14T20:32:59.340
> 
> 标签：html, asp.net-mvc, list, foreach, c#-3.0

我有一个列表，其中包含许多对象。我想逐步完成它，并为每个我想创建一行的对象。基本上我想要一张桌子。谁能帮帮我吗。

```
 List<Event> events = parseResponse.Deserialize<List<Event>>(_responseAsString);
           ViewBag.eventss = events; 
```

html

我如何逐步完成它并创建行或表格谢谢

下面的信息是我的“事件”列表中的许多对象 "[{\"event_key\":\"cc2a1802-2b04-4530-ad50-0d4f0ed19dd3\",\"user_token\":\"40e62a11-40c4-408d- 8cdd-1293cbaf9a41\",\"event_set_key\":\"615017f2-ae28-4b8d-9def-cf043642b928\",\"event_type\":\"到达\",\"event_date\":\"6/20/ 2011 下午 4:15:28\",\"event_amount\":\"100\",\"event_location_key\":\"50fc1c22-d77b-4a91-b31d-da036827060b\",\"event_location_name\":\" Store2\",\"event_location_city\":\"匹兹堡\",\"event_location_state\":\"PA\",\"event_location_country\":\"US\",\"event_location_lat\":\"\" ,\"event_location_long\":\"\",\"event_description\":\"\",\"event_acknowledged\":\"True\"},{\"event_key\":\"2ac9e25e-137c-4a72-8cc5-157d67ea66c1\" ,\"user_token\":\"58cb4fcd-e140-4232-88c9-06eecb95b63d\",\"event_set_key\":\"00710ca7-f5d7-4c7a-bbfb-95491ae278ef\",\"event_type\":\"到达\",\"event_date\":\"9/23/2011 4:15:28 PM\",\"event_amount\":\"45\",\"event_location_key\":\"5a732dd5-9459-4cdd -a980-f3daf1a07343\",\"event_location_name\":\"Store4\",\"event_location_city\":\"匹兹堡\",\"event_location_state\":\"PA\",\"event_location_country\":\ "美国\",\"event_location_lat\":\"\",\"event_location_long\":\"\",\"event_description\":\"\",\"event_acknowledged\":\"False\"},{\"event_key\":\"386b1fa1-11b2-48d9-b7f1- 4bbe21ced487\",\"user_token\":\"c3d8b7ff-d85f-42a8-98f6-e091b48c2280\",\"event_set_key\":\"dc55843b-f8cf-4e8a-9091-188ce0609fe1\",\"event_type\": \"到达\",\"event_date\":\"9/18/2011 4:15:28 PM\",\"event_amount\":\"100\",\"event_location_key\":\"be6d4fb4- c0e3-4303-b70d-7a22b721aa56\",\"event_location_name\":\"Store1\",\"event_location_city\":\"Pittsburgh\",\"event_location_state\":\"PA\",\"event_location_country\ “：\“我们\”，\”event_location_lat\":\"\",\"event_location_long\":\"\",\"event_description\":\"\",\"event_acknowledged\":\"False\"}]"

我已经有一个包含所有元素的类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:03:18.613

您可以使用以下代码（在 aspx 视图引擎中）。下面的 ViewModel 应该有一个 EventList，它本质上是您的事件集合：

```
<table id="domainlist" border="0" cellspacing="0" cellpadding="0">
    <thead>
        <tr>
            <th>
                Year
            </th>
             <th>
                Program
            </th>                
            <th>
                Min Score
            </th>           
            <th>
                Max Score
            </th>
             <th>
               Action
            </th>
        </tr>
    </thead>
    <tbody>
    <% foreach (var item in Model.EventList)
       { %>        
        <tr>
            <td>
                <%: item.FiscalYear%>
            </td>
            <td>
                  <%: item.ProgramTypeDescription%>
            </td>               
            <td>
                <%: item.MinScore%>
            </td>           
            <td>
                <%: item.MaxScore%>
            </td> 
            <td>
            <%: Html.ActionLink("View", "ViewProgram", "Program", new { programId = item.Id })%>
            </td>                    
        </tr>        
    <% } %>
    </tbody>
    </table> 
```

# c++ - 使用属性树在 boost 中解析 xml

> ID：11040943
> 
> 赞同：0
> 
> 时间：2012-06-14T20:33:12.623
> 
> 标签：c++, boost, boost-propertytree

我有以下 xml 文件。它显示了 2 个驱动器（托架 1 和托架 2）的固件版本信息。此时，除了托架 1 和托架 2 外，两个驱动器的一切看起来都相似。但我希望它们具有不同的固件版本。我需要阅读并能够比较托架 1 和托架 2 驱动器是否具有相同的固件版本。我正在使用 Boost（Red Hat 和 C++ 上的 1.41 版属性树）

```
<Node>
   <Type>XET</Type>
   <Reference>00110232</Reference>
   <Date>02-09-2012</Date>
</Node>
<Node>
   <Type>XET</Type>
   <Reference>000000</Reference>
   <Date>02-09-2012</Date>
</Node> 
```

我的 C++ 不是那么好，关于 Boost 的文档真的很烂。到目前为止，我可以读取 xml 文件，但无法搜索并查看固件版本是否相同。我尝试了几种不同的方法，但运气不佳。我真的很感激这方面的一些帮助。

```
 #include <boost/property_tree/ptree.hpp>
  #include <boost/property_tree/xml_parser.hpp>

  using boost::property_tree::ptree;
  ptree pt;

  // reading file.xml
  read_xml(xmlFilePath, pt, boost::property_tree::xml_parser::trim_whitespace );

  string c ;
  try
  {
    c = pt.get<string>("Node.Reference");
  }
  catch(std::exception const& e)
  {
    std::cout << e.what() << std::endl;
  }

  cout << "value is: " << c << endl; 
```

我解决了一些问题。有人可以告诉我如何获取所有节点吗？此代码当前找到第一个匹配项并打印它，仅此而已。如果我知道将有多少节点，我可以使用 for 循环。其他人有更好的主意，比如使用迭代器吗？如果是这样，请告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T06:24:53.073

```
...
#include <boost/foreach.hpp>
...

namespace PT = boost::property_tree;

...
    read_xml(xmlFilePath, pt, boost::property_tree::xml_parser::trim_whitespace );

    BOOST_FOREACH(const PT::ptree::value_type& node, pt.get_child("Node"))
    {
        PT::ptree& nodeTree = node.second;
        const std::string type      = nodeTree.get<std::string>("Type");
        const std::string reference = nodeTree.get<std::string>("Reference");
        const std::string date      = nodeTree.get<std::string>("Date");
        ...
    }
... 
```

# silverlight - 在 ChildWindow 中加载事件后，Silverlight DataGrid 为空

> ID：11040946
> 
> 赞同：0
> 
> 时间：2012-06-14T20:33:27.233
> 
> 标签：silverlight, xaml

这是 XAML 结构。您将在下面看到我订阅了网格的 Loaded 事件。但是当偶数触发时，`this.selectionGrid`它仍然是`null`- 即使在随后的布局更新中它仍然是`null`，即使我可以看到网格全部填充。

我确实使用了 MEFedMVVM 和 MvvmLight，但我看不出它与这种情况有什么关系。

任何想法为什么？

```
<Grid x:Name="LayoutRoot" Margin="2">
    <toolkit:BusyIndicator IsBusy="{Binding IsBusy}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <ContentPresenter
                    Visibility="{Binding Path=CurrentStep,Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=1}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <TextBlock Text="Select Equipment" Style="{StaticResource HeaderBlockStyle}" /> 
                    <ScrollViewer Grid.Row="1">
                        <sdk:DataGrid x:Name="selectionGrid" GridLinesVisibility="All" AlternatingRowBackground="White" ItemsSource="{Binding Path=AvailableEquipmentView}" AreRowDetailsFrozen="True" 
                                AutoGenerateColumns="False" SelectionMode="Extended" RowDetailsVisibilityMode="Visible" LayoutUpdated="selectionGrid_LayoutUpdated" Loaded="selectionGrid_Loaded" LoadingRowGroup="selectionGrid_LoadingRowGroup"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:37:12.247

您应该删除 ContentPresenter。ContentPresenter 旨在显示其 Content 属性，而不是“手动”子项。

我还要提一下，您不需要将控件放入 BusyIndi​​cator。BusyIndi​​cator 将填充所有可用空间，因此将其放置在网格的“底部”（在 xaml 中的所有其他控件下方）

```
<Grid x:Name="LayoutRoot" Margin="2">
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Grid Visibility="{Binding Path=CurrentStep,Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=1}">
        <Grid.RowDefinitions>
             <RowDefinition Height="Auto" />
              <RowDefinition />
        </Grid.RowDefinitions>
        <TextBlock Text="Select Equipment" Style="{StaticResource HeaderBlockStyle}" /> 
        <ScrollViewer Grid.Row="1">
            <sdk:DataGrid x:Name="selectionGrid" GridLinesVisibility="All" AlternatingRowBackground="White" 
                          ItemsSource="{Binding Path=AvailableEquipmentView}" AreRowDetailsFrozen="True" 
                          AutoGenerateColumns="False" SelectionMode="Extended" RowDetailsVisibilityMode="Visible" 
                          LayoutUpdated="selectionGrid_LayoutUpdated" Loaded="selectionGrid_Loaded" 
                          LoadingRowGroup="selectionGrid_LoadingRowGroup">
    <! -- Other controls -->
    <toolkit:BusyIndicator IsBusy="{Binding IsBusy}">
</Grid> 
```

# mysql - MySQL JOIN 与 SUM 和 3 个表

> ID：11040948
> 
> 赞同：3
> 
> 时间：2012-06-14T20:33:35.533
> 
> 标签：mysql, join, sum

我有以下表格（球员、赛事、分数）

![在此处输入图像描述](../Images/e6491c7fd7ae5ba4f35f584af4bb0617.png)

我想要一份每个球员在 2012 年获得多少积分的列表。我希望该列表包含所有球员，即使有些球员在 2012 年还没有参加比赛。

所以理论上它应该打印：

```
Ola Hansen     6  
Tove Svendson  0  
Kari Pettersen 0 
```

我试过了：

```
SELECT *, sum(Points) as Points FROM Players
LEFT OUTER JOIN Scores ON P_Id=Player
LEFT OUTER JOIN Events ON Event=E_Id AND Year='2012' 
GROUP by P_Id ORDER by Points DESC 
```

但这计算了所有年份的所有分数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:23:25.593

得分和事件需要在将它们外连接到玩家*之前进行内连接。*

我们可以使用子查询或括号来强制这个特定的连接“优先级”，但最好只使用 SQL 文本中的 JOIN 顺序，然后小心地将最后一个 JOIN“定向”给玩家（在这种情况下是正确的）。

COALESCE 仅用于将 NULL 转换为 0。

```
SELECT
    P_Id, LastName, FirstName, COALESCE(SUM(Points), 0) TotalPoints
FROM
    Scores
    JOIN Events
        ON Event = E_Id AND Year = 2012
    RIGHT JOIN Players
        ON P_Id = Player
GROUP BY
    P_Id, LastName, FirstName
ORDER BY
    TotalPoints DESC; 
```

这会产生：

```
P_ID    LASTNAME    FIRSTNAME   TOTALPOINTS
1       Hansen      Ola         6
2       Svendson    Tove        0
3       Pettersen   Kari        0 
```

您可以在这个[SQL Fiddle](http://sqlfiddle.com/#!2/03622/38)中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:03:56.827

尝试这个：

```
select firstName, lastName, sum(if(year is null, 0, points)) points from p
left join s on p_id = player
left join e on e_id = event and year = 2012
group by p_id, lastName, firstName
order by points desc 
```

我想它应该比子查询执行得更好......但便携性会降低。试试看！

这是[小提琴](http://sqlfiddle.com/#!2/11953/1/0)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T20:42:16.200

由于人们（包括我自己）喜欢将“最重要”或“主题”表放在首位，因此您可以通过首先发生事件和分数之间的连接并作为 INNER JOIN 来完成您要查找的内容：

```
SELECT
   P.P_Id,
   P.LastName,
   P.FirstName,
   IsNull(Sum(P.Points), 0) TotalPoints
FROM
   Players P
   LEFT JOIN (
      Events E
      INNER JOIN Scores S
         ON E.Event = S.E_Id
         AND E.Year = '2012'
   ) ON P.P_Id = S.Player
GROUP BY P.P_Id, P.LastName, P.FirstName -- no silly MYSQL implicit grouping for me!
ORDER BY TotalPoints DESC 
```

强制连接顺序的诀窍在于它实际上是执行它的 ON 子句的位置 - 您可以删除括号，它应该仍然有效。但我更喜欢使用它们，因为我认为额外的清晰度是必须的。

通过将 INNER JOIN 放在最前面，OUTER 在最后，这也是强制执行连接顺序的一种完全有效的方法。只是，您希望最后一个表是决定最终组成员资格的表。因此，将其切换为 RIGHT JOIN 即可：

```
SELECT
   P.P_Id,
   P.LastName,
   P.FirstName,
   IsNull(Sum(P.Points), 0) TotalPoints
FROM
   Events E
   INNER JOIN Scores S
      ON E.Event = S.E_Id
      AND E.Year = '2012'
   RIGHT JOIN Players P
      ON S.Player = P.P_Id
GROUP BY P.P_Id, P.LastName, P.FirstName
ORDER BY TotalPoints DESC 
```

我觉得有必要补充一点，在我看来，当在不同的表中为 PK 与 FK 时，为列使用不同的名称是对最佳实践的严重违反。应该是所有表中的“P_Id”，或者所有表中的“Player”，并且不能不一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T20:46:27.303

```
SELECT P.FIRSTNAME, P.LASTNAME,  A.Points as Points 
FROM Players P
LEFT OUTER JOIN 
(
   SELECT S.Player, sum(Points) 
   FROM Scores S, Events E 
   WHERE S.Event=E.E_Id 
   AND E.Year='2012' 
   GROUP BY S.Player
) A 
ON A.PLAYER = P.P_ID
ORDER by Points DESC 
```

基本上，您需要一个`INNER JOIN`between events 和 Scores 来强制 2012 的积分总和以及`LEFT OUTER JOIN`带有此子结果的 a，因为您希望所有球员 + 他们在 2012 年的积分。

# r - 存储函数的迭代

> ID：11040951
> 
> 赞同：0
> 
> 时间：2012-06-14T20:33:42.683
> 
> 标签：r

我对 R 并不陌生，但我对在 R 中编写函数并尝试编写一个将重复命令一定次数并将每次迭代的结果存储在向量中的函数很陌生。在这种情况下，我有一个大小为“m”的有序向量（我称之为“甲板”），它被洗牌“n”次。每次洗牌时，我都想将原始牌组与洗牌后的牌组进行比较，并计算原始牌组和洗牌后的牌组在同一位置有数字的次数。如果有任何匹配，存储一个“1”，如果根本没有匹配，存储一个“0”

我从理论上知道不匹配的百分比应该收敛到 1/e

这是我经过几个小时的反复试验后得到的，但它只生成一个带有单个元素的向量。我似乎无法保留比较迭代。在我下面的代码中，“w”是存储每个随机比较的向量。

```
shuffle = function(m,n){
    deck=1:m
    repeat {        
    x=deck - sample(deck,size=length(deck))
    w=ifelse(length(x[x==0])>0, 1,0)
    if(length(w)==n)
    break
    }
return(w)
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:54:03.083

编辑：更有效的功能

```
shuffle  <- function(m,n) {
  deck <- 1:m
  w <- numeric(n)
  for(i in 1:n){
    x <- sample(deck, m)
    w[i] <- 1*!(sum(deck==x)==0)
  }
  return(w)
} 
```

就像你说的

```
1-sum(shuffle(20,1000))/1000
[1] 0.363
1/exp(1)
[1] 0.3678794 
```

旧版本：

```
shuffleSlow  <- function(m,n) {
  deck <- 1:m
  w <- numeric(0)
  repeat {        
    x <- sample(deck, length(deck))
    w <- c(w, 1*!(sum(deck==x)==0))
    if(length(w) == n)
      break
  }
  return(w)
} 
```

和有用的比较

```
> system.time(1-sum(shuffleSlow(30,100000))/100000)
   user  system elapsed 
  52.20    0.36   52.65 
> system.time(1-sum(shuffle(30,100000))/100000)
   user  system elapsed 
   2.95    0.00    2.94 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T20:54:51.957

您缺少的部分是在 内部`repeat`，您应该为该迭代计算输出的单个值，并将其分配给输出向量中的特定位置（与迭代相对应的位置）。

或者，该`replicate`函数会为您处理大部分内容：

```
shuffle <- function(m,n){
    deck <- 1:m
    replicate(n, {newdeck <- sample(deck)
                  anymatches <- as.numeric(any(deck==newdeck))
                  deck <- newdeck
                  anymatches})
} 
```

和一些例子：

```
> shuffle(5,35)
 [1] 0 1 0 1 1 0 1 1 1 1 1 1 1 1 0 1 1 0 0 1 1 0 1 0 1 1 1 1 1 0 1 1 1 1 1
> shuffle(20,30)
 [1] 0 0 0 0 0 0 0 1 0 0 1 1 1 1 1 1 1 1 0 0 1 1 1 1 1 0 1 0 0 0
> shuffle(52,35)
 [1] 1 1 1 0 1 0 0 1 1 1 1 1 0 0 0 1 1 1 1 0 0 1 0 1 1 1 0 0 1 1 0 1 0 1 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T21:00:14.187

`w`您在每次迭代时都会覆盖，因此您只会`w`在最后一次迭代中得到值。

如果您知道要洗牌多少次，那么使用`for`循环比使用循环更好`repeat`。

目前尚不清楚您是否要包含与s 和s 的向量`w`的实际比较，`deck`或者仅包含表示是否存在匹配项的向量。无论如何，这里有几个实现这两个的例子：`0``1`

```
shuffle <- function(deck, n) {
    out <- logical(length = n)
    shuf <- deck
    for(i in seq_len(n)) {
        shuf <- sample(shuf)
        out[i] <- any(shuf == deck)
    }
    out <- as.numeric(out)
    out
} 
```

使用如下并产生：

```
> set.seed(42)
> deck <- 1:100
> (out <- shuffle(deck, 20))
 [1] 0 1 1 1 1 0 1 0 0 1 1 0 1 1 1 1 0 1 0 1 
```

`deck`返回洗牌后的牌组之间的匹配位置的版本是：

```
shuffle2 <- function(deck, n) {
    out <- matrix(NA, ncol = n, nrow = length(deck))
    shuf <- deck
    for(i in seq_len(n)) {
        shuf <- sample(shuf)
        out[,i] <- shuf == deck
    }
    out <- out + 0
    out
} 
```

如下使用并产生

```
> set.seed(42)
> deck <- 1:100
> (out2 <- shuffle2(deck, 20))
       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11]
  [1,]    0    0    0    0    0    0    0    0    0     0     0
  [2,]    0    0    0    0    0    0    0    0    0     0     0
  [3,]    0    0    0    0    0    0    0    0    0     0     0
  [4,]    0    0    0    0    0    0    0    0    0     0     0
  [5,]    0    0    0    0    0    0    0    0    0     0     0
  [6,]    0    0    0    0    0    0    0    0    0     0     0
  [7,]    0    0    0    0    0    0    0    0    0     0     0
  [8,]    0    0    0    0    0    0    0    0    0     0     0
  [9,]    0    0    0    0    0    0    0    0    0     0     0
 [10,]    0    0    0    1    0    0    0    0    0     0     0
.... 
```

该匹配矩阵很容易处理以产生任何匹配或不匹配的向量：

```
> as.numeric(apply(out2 > 0, 2, any))
 [1] 0 1 1 1 1 0 1 0 0 1 1 0 1 1 1 1 0 1 0 1 
```

与 给出的匹配`shuffle()`。

您当然可以将两者结合起来，并由函数返回：

```
shuffle3 <- function(deck, n) {
    out <- matrix(NA, ncol = n, nrow = length(deck))
    shuf <- deck
    for(i in seq_len(n)) {
        shuf <- sample(shuf)
        out[,i] <- shuf == deck
    }
    out <- list(matches = out+0,
                summary = as.numeric(apply(out > 0, 2, any)))
    out
} 
```

用作并产生：

```
> set.seed(42)
> deck <- 1:100
> out3 <- shuffle3(deck, 20)
> str(out3)
List of 2
 $ matches: num [1:100, 1:20] 0 0 0 0 0 0 0 0 0 0 ...
 $ summary: num [1:20] 0 1 1 1 1 0 1 0 0 1 ...
> out3$summary
 [1] 0 1 1 1 1 0 1 0 0 1 1 0 1 1 1 1 0 1 0 1 
```

请注意，无论我使用哪个版本，我都会先创建一个对象来保存所需大小的结果，然后在循环中填充该对象。

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::Error 看不到使变量可访问的位置

> ID：11040952
> 
> 赞同：0
> 
> 时间：2012-06-14T20:33:43.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

从表单创建新对象时出现以下错误：`Can't mass-assign protected attributes: feature_ids`. 在我的模型中，我有以下内容：

```
class Outboard < ActiveRecord::Base
  attr_accessible :make, :model, :price, :features
  has_many :features, :through => :Outboardfeature
  has_many :Outboardfeature
end

class Feature < ActiveRecord::Base
  attr_accessible :name
  has_many :outboards, :through => :Outboardfeature
  has_many :Outboardfeature
end

class Outboardfeature < ActiveRecord::Base
  attr_accessible :feature_id, :outboard_id
  belongs_to :feature, :class_name => "Feature", :foreign_key => "feature_id"
  belongs_to :outboard, :class_name => "Outboard", :foreign_key => "outboard_id"
end 
```

我看不到在哪里可以从错误中访问 feature_ids，因为在我的 Outboard 模型中我已经使功能可以访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:18:25.997

添加`:feature_ids`到舷外模型`attr_accessible`。

# javascript - 推荐一款塔防游戏的JS游戏引擎

> ID：11040958
> 
> 赞同：3
> 
> 时间：2012-06-14T20:34:00.667
> 
> 标签：javascript

我最近开始用 javascript 开发游戏，并开始寻找游戏引擎。以为我打算开发一个塔防游戏，我想要一个游戏引擎，我将来也可以用于其他游戏。:)

但是那里非常像丛林，我真的没有时间深入研究所有这些框架，所以我希望有人可以为我推荐一个。

我一直在研究 ImpactJS 以及 Cocos2D，因此非常感谢您对其中任何一个发表评论。

可能值得一提的是，我的目标是移动平台和桌面。:)

谢谢你。

# java - 是否有一些 Java api 可以将复杂的 JSON 存储到 Cassandra？

> ID：11040959
> 
> 赞同：1
> 
> 时间：2012-06-14T20:34:10.773
> 
> 标签：java, json, cassandra, persist

假设您有一些复杂的 JSON，例如：

```
{A : valA, B : { C : [ arrayC... ] , D : valD } , etc... } 
```

我的问题是，是否有 Java API 可以在 Cassandra 中保留如此大的对象？经过搜索，MongoDB似乎表现得很好，但我想知道它是否可以通过一些API在Cassandra中制作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:21:27.407

Cassandra 在 1.2 中添加了对类似 JSON 的地图、列表和集合的支持：[https ://issues.apache.org/jira/browse/CASSANDRA-3647](https://issues.apache.org/jira/browse/CASSANDRA-3647)

# python - 有没有更好的方法在 PyDev/Eclipse 中使用适当的类浏览器来探索 Python 标准库？

> ID：11040961
> 
> 赞同：2
> 
> 时间：2012-06-14T20:34:29.907
> 
> 标签：python, eclipse, ide, pydev

我可以在 Eclipse 的 Package Explorer 中浏览到我的 Python System Libs .py 文件，但这种体验还有很多不足之处。

在学习 Python 时，如何使用 Eclipse 和 PyDev 作为标准库的适当类浏览器？我最接近的是浏览和打开库的 .py 文件的能力。我不仅希望在参考手册（字符串服务、数字、文件和目录访问、IPC 等）中按类别查看库的层次视图，还希望单击类以查看方法、可用参数和说明。

编辑：看看 IDLE 有什么：模块的层次视图，带有类和方法的视图。我在 PyDev 中寻找类似的东西：

![在此处输入图像描述](../Images/c1039a2d3086309ea494cfb655afcda5.png)

在 Eclipse 中导入时比较相同的 pickle.py。只有模块的视图，而不是类或其方法。对于我自己的代码，这对我来说不是问题——我可以清楚地看到我在 Eclipse 中编写的类、函数和对象。我什至可以在全局浏览器中查找库的详细信息。但如果能找到一种方法在包资源管理器或任何其他窗口中使用它会更好。

![在此处输入图像描述](../Images/e6c7e188b38ee80065bfdf443d850f7d.png)

在 IDE 中我能想到的最好的例子是 Visual Studio 中的类视图或对象资源管理器——在其中，微软有他们所有的库可供探索——并带有精彩的文档。

**明确地说，我知道*如何*以及*在何处*通过 pydocs、在线参考等访问标准库。我正在寻找更集成的体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:44:04.377

不幸的是，你现在不能在当前的 PyDev 包资源管理器中这样做......

现在，如果有人有兴趣在 PyDev 中实现它，那么只需从[https://github.com/aptana/Pydev/blob/development/plugins/org.python.pydev扩展方法 getChildren() /src_navigator/org/python/pydev/navigator/InterpreterInfoTreeNodeRoot.java](https://github.com/aptana/Pydev/blob/development/plugins/org.python.pydev/src_navigator/org/python/pydev/navigator/InterpreterInfoTreeNodeRoot.java)用于尝试解析它并创建正确节点的不是目录或zip文件的用例。

（如果代码是按照以下说明正确获取的：http: [//pydev.org/developers.html](http://pydev.org/developers.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:05:04.830

您可以启动 python 附带的 python doc 服务器，然后导航到：

```
http://localhost:7464 
```

在 Windows 中，它位于名为“Module Docs”的开始菜单中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T20:51:34.367

如果我正确理解您的问题，您有几个我知道的选项。

您可以在此处浏览：http: [//docs.python.org/library/index.html](http://docs.python.org/library/index.html) ，这将为您提供标准库中的所有内容。

此外，根据您的系统，您可以找到相同的 html 文件并在本地查看它们。在我的 Fedora 盒子上，它们存放在 /usr/share/doc/python-docs-2.7.3/html/index.html（不要忘记 yum install python-docs）

# c# - 对不同命令使用不同装饰器的简单注入器

> ID：11040962
> 
> 赞同：4
> 
> 时间：2012-06-14T20:34:35.443
> 
> 标签：c#, .net, inversion-of-control, ioc-container, simple-injector

嗨，我开始在我的所有项目中使用[Simple Injector DI 容器](http://simpleinjector.codeplex.com)，并且想要一些关于如何适应我的要求的强大功能的建议。

我有几个命令处理程序装饰器将包装命令：

```
public class TransactionCommandHandlerDecorator<TCommand>
    : ICommandHandler<TCommand>
{
    private readonly ICommandHandler<TCommand> handlerToCall;
    private readonly IUnitOfWork unitOfWork;

    public TransactionCommandHandlerDecorator(
        IUnitOfWork unitOfWork, 
        ICommandHandler<TCommand> decorated)
    {
        this.handlerToCall = decorated;
        this.unitOfWork = unitOfWork;
    }

    public void Handle(TCommand command)
    {
         this.handlerToCall.Handle(command);
         unitOfWork.Save();
    }
} 
```

互斥装饰器：

```
public class TransactionCommandHandlerWithMutexDecorator<TCommand>
    : ICommandHandler<TCommand>
{
    private readonly ICommandHandler<TCommand> handlerToCall;
    private readonly IUnitOfWork unitOfWork;
    private static object Lock = new object();

    public TransactionCommandHandlerWithMutexDecorator(
        IUnitOfWork unitOfWork, 
        ICommandHandler<TCommand> decorated)
    {
        this.handlerToCall = decorated;
        this.unitOfWork = unitOfWork;
    }

    public void Handle(TCommand command)
    {
        lock (Lock)
        {
            this.handlerToCall.Handle(command);
            unitOfWork.Save();
        }
    }
} 
```

在某些情况下，仅以这种阻塞方式包装一些命令（通过使用 TransactionCommandHandlerWithMutexDecorator）才有意义，并允许其他人在所有线程中不受限制地访问（使用 TransactionCommandHandlerDecorator），此外，如果互斥锁不在命令类型之间共享会很好 - 使用我当前的代码，锁是静态的，将在所有类型之间共享。

所以关于我的问题：

1) 我如何将 TransactionCommandHandlerWithMutexDecorator 应用于特定的命令或命令，其余的使用 TransactionCommandHandlerDecorator - 我会使用 ExpressionBuilt 事件吗？

2）我是否需要为我希望装饰的每个命令创建一个新类（以确保每个命令都有一个唯一的锁定对象），还是有更好的方法（使用拦截）？

感谢有关执行上述操作的最佳方法的建议。

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T21:02:56.030

> 使用我当前的代码，锁是静态的，将在所有类型之间共享。

这是不正确的。[泛型类型不共享静态成员](http://www.codeproject.com/Articles/26514/Generic-Types-Don-t-Share-Static-Members)。每一个`TCommand`都会有一个新的静态类型。换句话说，a `Decorator<int>`will 具有与 a will 不同的`static object Lock`实例`Decorator<string>`。

如果你想要它反过来，因此对所有命令都有一个单一的锁，这会有点困难。你基本上可以做三件事：

1.  从非通用基础派生装饰器并在那里定义锁。
2.  在静态非泛型类中定义锁，并从泛型装饰器中引用该类。
3.  将锁移动到非泛型类，并将其作为正常依赖注入到装饰器中。

但同样，这不是你想要的。您想要的行为是默认情况下发生的，这与 Simple Injector 无关。这就是泛型在 C# 和 .NET 中的工作方式。

> 如何将 TransactionCommandHandlerWithMutexDecorator 应用于特定的命令或命令，其余的使用 TransactionCommandHandlerDecorator

This is more easy than you might think. There is an `RegisterDecorator` overload that takes in a `Predicate<T>`, which allows you to tell when to decorate. This might look like this:

```
// Some helper methods
private static Type GetCommandType(Type handlerType)
{
    return handlerType.GetGenericArguments()[0];
}

private static bool IsMutexCommand(Type commandType)
{
    // Determine here is a class is a mutex command. 
    // Example:
    return typeof(IMutexCommand).IsAssignableFrom(commandType);
}

// Decorator registration with predicates.
container.RegisterDecorator(
    typeof(ICommandHandler<>),
    typeof(TransactionCommandHandlerWithMutexDecorator<>),
    c => IsMutexCommand(GetCommandType(c.ServiceType)));

// Decorator registration with predicates.
container.RegisterDecorator(
    typeof(ICommandHandler<>),
    typeof(TransactionCommandHandlerDecorator<>),
    c => !IsMutexCommand(GetCommandType(c.ServiceType))); 
```

As everything with the Simple Injector the `RegisterDecorator` is higly optimized. Under normal circumstances* the predicate will be called just once.

*It is possible the predicate is called multiple times, when multiple threads are simultaniously requesting that same instance for the same time, but after the built Expression is cached and the delegate is built, the predicate won't be called anymore.

# c - 检查是否在 C 枚举中定义了一个值？

> ID：11040964
> 
> 赞同：12
> 
> 时间：2012-06-14T20:34:47.033
> 
> 标签：c, enums

假设我有这个：

`enum { A = 0x2E, B = 0x23, C = 0x40 }`

可以检查是否`x`定义为`enum`？

我是手动做的：`int isdef = (x == A || x == B || x == C);`但我想要一些更有活力的东西。`GCC-extensions`也欢迎。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T20:41:10.697

据我所知，不是。C 中的枚举只是一系列

```
#define A 0x2E 
```

陈述。

如果枚举很大并且它的值恰好是连续的，则声明最小/最大常量并与这些常量进行比较：

```
enum { E_MIN = 0x2E, A = 0x2E, B = 0x23, C = 0x40 ..., E_MAX=0x100};

if(x >= MIN && x <= MAX)
    ItsInEnum(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-14T20:55:45.560

这是您问题的一种修改版本，但取决于您在做什么，这样的事情可能会起作用：

```
enum {A,B,C};
const int E[] = {0x2E,0x23,0x40};
// Or:
// enum { A = 0x2E, B = 0x23, C = 0x40 };
// const int E[] = {A,B,C};

int isEnum(int x)
{
    for(int i=0; i<(sizeof(E)/sizeof(*E)); i++)
    {
        if(E[i] == x){ return 1; }
    }
    return 0;
}

int main(void)
{
    printf("Value of A: 0x%02x\n", E[A]);
    // Or:   
    // printf("Value of A: 0x%02x\n", A);

    printf("isEnum(0x2e): %s\n", isEnum(0x2e) ? "true" : "false");
    printf("isEnum(0x2f): %s\n", isEnum(0x2f) ? "true" : "false");
} 
```

哪个输出

```
A的值：0x2e
isEnum(0x2e): 真
isEnum(0x2f): 假

```

编辑：TJD 击败了我，他建议使用排序数组并进行二进制搜索，这会将您的搜索时间从*n*减少到 log( *n* )。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-04-10T02:47:32.807

最简单的方法是：

* * *

```
enum {
    MODE_A,
    MODE_B,
    MODE_C
};

int modeValid(int mode)
{
    int valid = 0;

    switch(mode) {
        case MODE_A:
        case MODE_B:
        case MODE_C:
            valid = 1;
    };

    return valid;
}

void setMode(int mode)
{
    if (modeValid(mode)) {
        // Blah, blah
    }
}

int main(void)
{
    setMode(1);   // Okay
    setMode(500); // Error
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-10T17:58:04.510

要扩展已接受的答案，请使用 X-macros 使用预处理器从相同数据构建枚举和数组。

```
/* Only need to define values here. */
#define ENUM_VALUES \
    X(A, 0x2E)  \
    X(B, 0x23)  \
    X(C, 0x40)

/* Preprocessor builds enum for you */
#define X(a, b) a = b,
    enum {
        ENUM_VALUES
    };
#undef X

/* Preprocessor builds array for you */
#define X(a, b) a,
    const int E[] = {
        ENUM_VALUES
    };
#undef X

/* Copied from accepted answer */
int isEnum(int x)
{
    for(int i=0; i<sizeof(E);i++)
    {
        if(E[i] == x){ return 1; }
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T21:58:21.520

An`enum`本质上与使用宏定义常量相同，只是`enum`将一组关联的常量包装成一个数据类型。这使您的代码更具自我记录性，但并没有真正提供任何附加功能。

如果您在标准 C 领域之外冒险，一些编译器可以做一些`enum`他们不能用宏做的额外事情。一些调试器会将`enum`变量映射回它们的名称，而不是显示它们的值。此外，一些编译器提供了添加运行时检查的能力，例如越界`enum`值。这与您显示的代码基本相同，只是编译器会自动添加它。使用 GreenHills 的 C 编译器，此功能通过`-check=assignbound`编译器选项启用。我不确定 gcc 是否有这样的内置功能。你用的是什么编译器？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-06T13:15:42.993

这是另一种可能的解决方案：

```
#include <stdio.h>
#include <stdint.h>

typedef enum {
  VALUE_1 = 0x01,
  VALUE_2 = 0x03,
  VALUE_3 = 0x0A
} values_e;

int main(void)
{
  int a = 0;
  values_e vlr;

  for (int i = 0; i < 10; i++) {
    scanf("%d", &a);

    vlr = (values_e)a;
    switch (vlr) {
      case VALUE_1:
        printf("do ... value 1:\r\n");
        break;

      case VALUE_2:
        printf("do ... value 2:\r\n");
        break;

      case VALUE_3:
        printf("do ... value 3:\r\n");
        break;

      default:
        printf("ops...\r\n");
    }
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-04T10:37:52.533

正如已经指出的，无法通过直接引用枚举成员来检查枚举是否定义。但是，有一个非常简单的捷径：为每个枚举类型定义一个唯一标识符。然后，当您要检查枚举的元素是否存在时，您可以简单地检查关联的标识符是否已定义：

```
//Header File:
typedef enum 
{
   ENUM_ELEMENT_1 = 0,
   ENUM_ELEMENT_2 = 1,
   ENUM_ELEMENT_3 = 2,
   ENUM_ELEMENT_MAX
} eEnumElement;

#define ENUM_ELEMENT_DEFINED  1 
```

...

```
//Source file:
void TaskOperateOnEnums(void) 
{
   #if defined(ENUM_ELEMENT_DEFINED)
   eEnumElement Test = ENUM_ELEMENT_1;
   ...
   #endif
} 
```

# javascript - 活动链接，javascript css

> ID：11040965
> 
> 赞同：-1
> 
> 时间：2012-06-14T20:34:48.053
> 
> 标签：javascript, css, hyperlink, navigation

```
<script type="text/javascript">
            $(document).ready(function(){
            $('#info a.tooltip').addClass('active');
            });
</script>

<ul class="ca-menua">
                    <li><a href="#home" class="tooltip"><span class="ca-icona">O</span></a></li>
                    <li><a href="#info" class="tooltip"><span class="ca-icona" id="info">e</span></a></li>
                    <li><a href="#komp" class="tooltip"><span class="ca-icona">S</span></a></li>
                    <li><a href="#cases" class="tooltip"><span class="ca-icona">F</span></a></li>
                    <li><a href="#kont" class="tooltip"><span class="ca-icona">@</span></a></li>
                </ul>

a.tooltip.active #info  {
    color: #f3cb12;
    font-size: 50px;
} 
```

我正在尝试做一个主动链接效果，但我似乎无法做到正确。效果在此链接上（来自第 2 页，而不是首页）[单击此处查看网站。](http://sabinequardon.dk/umami/)

“活动功能不起作用。当您在特定页面时，该页面的导航项应该处于活动状态......现在它不起作用。 - 这样你就可以看到你在哪里。”

Javascript：

```
<script type="text/javascript">
$(function() {
    $('a.tooltip').click(function(e) {
        var $this = $(this);
        $(".ca-menua").load($this.attr('href'));
        $('a.tooltip').removeClass('active');
        $(this).addClass('active');

        // prevent default link click
        e.preventDefault();
    })
});</script> 
```

HTML：

```
 <ul class="ca-menua">
               <li><a href="#home" class="tooltip"><span class="ca-icona">O</span></a></li>
               <li><a href="#info" class="tooltip"><span class="ca-icona">e</span></a></li>
               <li><a href="#komp" class="tooltip"><span class="ca-icona">S</span></a></li>
               <li><a href="#cases" class="tooltip"><span class="ca-icona">F</span></a></li>
               <li><a href="#kont" class="tooltip"><span class="ca-icona">@</span></a></li>
</ul> 
```

CSS：

```
li a.tooltip.active .ca-icon {
    color: #f3cb12;
    font-size: 50px;
} 
```

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:43:20.170

在您的网站上，我收到一个错误，`$ is not defined`这通常意味着您的代码不在外部，`$('document').ready()`或者您没有正确包含 jQuery。

实际上，当我在控制台中手动运行您的代码时

```
$('a.tooltip').click(function(e) {
    var $this = $(this);
    $(".ca-menua").load($this.attr('href'));
    $('a.tooltip').removeClass('active');
    $(this).addClass('active');

    // prevent default link click
    e.preventDefault();
}) 
```

您想要的效果有效（缩小的黄色图标）。

您只需将该脚本放在您的 jQuery 包含之后。

# function - python 3.2，tkinter。按下按钮时使用函数和图形返回变量

> ID：11040966
> 
> 赞同：0
> 
> 时间：2012-06-14T20:34:50.307
> 
> 标签：function, button, python-3.x, tkinter

我正在尝试让我的 main() 函数调用 getWordUser() 函数来创建一个按钮。一旦按下按钮，就会调用 Word_and_Username() 函数以返回用户名和单词。出于某种原因，我无法让它工作。这是代码：

```
from tkinter import*
import random
root = Tk()
root.title("Hangman")
root.geometry("200x200")
username = ""

def Word_and_Username():
    file = open("Hangmanwords.txt","r")
    randomize = random.randint(1,117)
    words = file.readlines()
    line = words[randomize]
    word = line[:-1]
    username = root.username.get()

    return word,username

def getWordUser():
    root.username = Entry()
    root.username.grid(row=1, column=0)

    root.theGame = Button(text = "Continue", command=Word_and_Username)
    root.theGame.grid(row=1, column=1)

def main():
    getWordUser()
    print (username)

main()
root.mainloop() 
```

基本上，我需要 main 来调用该函数，等到按下继续按钮并将变量返回给 main，同时继续使用 main 函数。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:42:15.067

通过将值分配给根属性，您可以以非常直接的方式存储并准备好使用这些值。这是您修改后的脚本，显示了这一点。按“我知道的”在 shell 中查看给定用户的单词。

```
from Tkinter import*
import random
root = Tk()
root.title("Hangman")
root.geometry("250x200")
root.word = None
root.user = None

def Word_and_Username():
    file = open("C:/test/test.csv","r")
    randomize = random.randint(1,4)
    words = file.readlines()
    line = words[randomize]
    root.word = line[:-1]
    root.user = root.username.get()

def getWordUser():
    root.username = Entry()
    root.username.grid(row=1, column=0)

    root.theGame = Button(text = "Continue", command=Word_and_Username)
    root.theGame.grid(row=1, column=1)

    root.ask = Button(text = "What I know", command=ask)
    root.ask.grid(row=2, column=1)

def ask():
    print 'word is %s for user %s' %(root.word, root.user)

getWordUser()
root.mainloop() 
```

# mongodb - Grails/MongoDB Morphia 插件：

> ID：11040967
> 
> 赞同：0
> 
> 时间：2012-06-14T20:35:05.243
> 
> 标签：mongodb, grails, morphia

我正在尝试通过 Mongodb Morphia Plugin (v.0.7.8) 将 Mongodb 与 Grails 应用程序一起使用。我用 com.google.code.morphia.annotations.Entity 注释注释了一个域类（*不在*grails-app/mongo 文件夹内）：

```
import com.google.code.morphia.annotations.Entity

@Entity("Question")
class Question {
    Integer order
    String question
} 
```

现在我正在尝试将一个新实体保存到控制器中的数据库中：

```
def index() {
    def q = new Question()
}
q.save() 
```

但这会引发 HTTP 500 错误：

```
java.lang.IllegalStateException
Method on class [Question] was used outside of a Grails application. If running in the context of a test using the mocking API or bootstrap Grails correctly. 
```

我究竟做错了什么？

编辑：

我将我的域类移动到 grails-app/mongo 并删除了 @Entity 注释。现在错误消失了，但是数据库还是空的？

编辑2：

现在我得到：

```
URI
/Survey/survey/index
Class
java.lang.NoSuchMethodException
Message
survey.Survey.<init>() 
```

要么这个插件有严重的错误，要么它不像快速入门微示例所暗示的那样容易设置。再次：我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:41:39.423

这是有关如何使用该插件的用户指南[http://jkuehn.github.com/gorm-mongodb/guide/2.%20Quickstart.html](http://jkuehn.github.com/gorm-mongodb/guide/2.%20Quickstart.html)

此处提供示例应用程序[https://github.com/jkuehn/gorm-mongodb](https://github.com/jkuehn/gorm-mongodb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:56:35.720

以下是您可以做的事情：

首先：如果您像我一样来自 GORM MongoDB，请尝试检查您的 DataSource.groovy。并将 mongo {} 替换为 mongodb{} 以便 mongodb-morphia 可以工作。

第二：编辑您的课程，然后执行以下操作：

```
import com.google.code.morphia.annotations.Entity
@Entity
class Question {
   ///your code...
} 
```

我注意到除非您从其他对象扩展，否则没有必要添加 @Entity('Question') 。

**编辑：** 好的，在看到您的错误消息和代码后，我才意识到，您在 Controller 操作方法之外调用 q.save() 。

这是你的代码：

```
def index() {
    def q = new Question()
}
q.save() 
```

请试试：

```
def index() {
    def q = new Question()
    q.save()
} 
```

# java - 生成 JAVA 文件并在运行时使用它们

> ID：11040968
> 
> 赞同：0
> 
> 时间：2012-06-14T20:35:05.463
> 
> 标签：java, testing, code-generation, testng

我正在尝试 Cedric Beust 在其他线程中建议的以下内容。

> 您可以自己将其作为预测试任务执行：实现一个代码生成器，以 XML 形式获取信息，获取相应的 Java 源文件并生成一个 TestNG 源文件，其中所有注释都放置在正确的位置。然后在该文件上运行 TestNG。

我对代码生成一无所知。有人可以指导我正确的方向吗？一些简单的例子会很棒。

更新：这是我想要生成的模板。

```
public class <tobeReadFromConfigFile>
{
  @Test(groups="to be read from config file")
  public void <tobereadfromconfigfile>{
     //to be read from config file(Name of function to call)
     //to be read from config file(Name of function to call)
     //to be read from config file(Name of function to call)
  }
  .
  .
  .
} 
```

函数内部的代码只是函数调用，必须从配置文件中完全读取和复制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:56:45.080

FreeMarker 模板看起来像这样：

```
public class ${className} {
    @Test(groups="${testGroups}")
    public void ${testMethodName}() {
        <#list methods as m>
        ${m}
        </#list>   
    }
} 
```

它将从一个上下文中填充，本质上是一个带有 , 等条目的哈希映射`className`，`testGroups`这些条目将从您的 XML 文件中读取。`methods`将是一个`Collection`（如列表），也是从 XML 文件中读取的。

当然还有很多其他的模板库；这只是一个例子。

[自由标记](http://freemarker.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:25:47.820

我编写了一个 Eclipse 插件，它使用 freemarker 模板并提供命名 java 类的上下文作为来自 org.eclipse.jdt.core 的 ICompilationUnit。您可以在[https://github.com/karajdaar/templator查看](https://github.com/karajdaar/templator)

# xml - 在 perl 中编写和读取 XML 的最佳方法是什么？

> ID：11040975
> 
> 赞同：0
> 
> 时间：2012-06-14T20:35:54.820
> 
> 标签：xml, perl, perl-data-structures

我正在使用仅使用典型函数打开、打印、关闭来写入 XML 文件的 Perl 程序。XML 文件稍后由 PHP Web 应用程序消化。

```
#!/usr/bin/perl
#opening file
open FILE, ">derp.xml" or die $!;

#data is created in variables like so...
$first       = '<\?xml version=\"1.0\" encoding=\"UTF-8\" \?>';
$openperson  = '<person>\n';
$name        = '<name>Gary</name>\n';
$birthday    = '<brithday>01/10/1999</birthday>\n';
$car         = '<car>minivan</car>\n';
$closeperson = '</person>\n';

#writing variables to file
print FILE $first;
print FILE $openperson;
print FILE $name;
print FILE $birthday;
print FILE $car;
print FILE $closeperson;
close FILE; 
```

或多或少这基本上是当前系统的工作方式。我相信一定有更好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T20:43:38.403

这些 CPAN 模块是什么：

*   XML::LibXML
*   XML::编写器
*   XML::简单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:52:29.213

# c# - 如何使用 WPF 将消息从主窗口传递到其页面？

> ID：11040976
> 
> 赞同：0
> 
> 时间：2012-06-14T20:35:58.607
> 
> 标签：c#, wpf, xaml, delegates, dispatcher

我有一个使用 WPF 的 C# 应用程序，该应用程序由一个窗口组成，该窗口在网格内的框架内保存四个页面。主窗口通过套接字接收消息。我正在尝试将这些消息发送到适当的页面进行处理，但不确定 1）如何正确引用它和 2）如何将消息传递给页面或调用页面的函数之一来处理消息。窗口、网格、框架和页面在 xaml 中构建，以防万一。

在我编写的一个类似的 Windows 窗体应用程序中，我使用委托进行回调。主窗口会收到一条消息，然后调用一个表单的委托——看起来像这样：

```
Invoke(myFormInstance.myFormDelegateFunction, myMessage); 
```

myFormInstance.MdiParent 设置为此窗口的位置。

我基本上是在尝试找到等效的 WPF，或者可能是更好的方法。我研究了 WPF 调度程序，我认为这可能是一种直接访问 Page 组件的方式 - 但我希望 Page 本身处理消息并决定更新哪些组件以及如何更新。

有什么建议吗？调度员是否以某种方式解决了这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:44:36.893

我会尝试使用 MVVM Light Toolkit，特别是 Messenger 对象。它允许类之间的通信。本质上，发送者只会通知带有与消息相关的任何数据的消息，然后为该特定消息注册的任何类都可以根据自己的选择处理它。所以你的套接字消息的主要接收者可以通知它已经收到一个套接字消息，然后将套接字消息作为数据附加。

[http://mvvmlight.codeplex.com/](http://mvvmlight.codeplex.com/)

# tfs - 无法在 TFS 2012 RC 中使用代码审查功能

> ID：11040977
> 
> 赞同：6
> 
> 时间：2012-06-14T20:36:01.157
> 
> 标签：tfs, team-explorer

我在签入文件时尝试使用代码审查功能，但在团队资源管理器顶部收到以下消息：

> 要请求同行进行代码审查，请启用新功能。单击此处启用新功能

当我单击该链接时，它会将我带到我的项目配置文件站点，但我在任何地方都看不到任何激活代码审查功能的选项......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:47:32.227

阅读 Ewald Hofman 的这两篇[博客](http://blogs.msdn.com/b/visualstudioalm/archive/2012/05/31/deep-dive-on-configure-features.aspx) [文章](http://blogs.msdn.com/b/visualstudioalm/archive/2012/05/31/how-to-configure-features-for-dozens-of-team-projects.aspx)，它们涵盖了升级团队项目或流程模板以允许新功能的过程。

如果无法执行自动升级，请遵循此[MSDN 文章](http://msdn.microsoft.com/library/ms194972.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T22:42:09.473

估计你升级了 如果您从 TFS 2010 升级到 TFS 2012 RC（而不是升级到 TFS 11 Beta），现在可以自动神奇地处理 - 运行[配置功能向导](http://msdn.microsoft.com/en-us/library/ff432837%28v=vs.110%29.aspx)。

您的项目可能缺少代码审查功能正常工作所需的新工作项类型定义和相关工件。我发送的同一页面包含有关如何手动添加该部分的说明的链接，但配置功能向导的痛苦要小得多。

# grails - Grails 2 Spring Security 插件 - 成功登录后重定向到 /login/denied

> ID：11040981
> 
> 赞同：0
> 
> 时间：2012-06-14T20:36:31.850
> 
> 标签：grails, spring-security, grails-plugin

我的 Spring Security Plugin 在 Grails 2.0.4 中大部分时间都成功地工作了。如果我转到页面“localhost:8080/dashboard”，我将被重定向到登录屏幕。当我成功登录时，我被重定向到“/dashboard”。

我遇到的问题是，如果我只是转到“localhost:8080/”而不向 URL 添加任何控制器。如果我这样做，那么无论我是否成功登录，我都会被重定向到“/login/denied”。如果我此时尝试转到“/dashboard”，它会起作用，因为我是成功登录的用户。

我的问题是如何更改登录后重定向到的默认屏幕。这是我尝试过的。如果有什么我遗漏的，请告诉我。除了实际的重定向之外，一切似乎都在工作。

尝试更改 URLMappings.groovy

```
static mappings = {
    "/"(controller: "dashboard")
} 
```

尝试在 Config.groovy 中更改：

```
grails.plugins.springsecurity.successHandler.defaultTargetUrl = '/dashboard'
grails.plugins.springsecurity.securityConfigType = SecurityConfigType.InterceptUrlMap
grails.plugins.springsecurity.interceptUrlMap = [
    '/dashboard/**': ["IS_AUTHENTICATED_FULLY"],

    '/js/**': ["IS_AUTHENTICATED_ANONYMOUSLY"],
    '/css/**': ["IS_AUTHENTICATED_ANONYMOUSLY"],
    '/images/**': ["IS_AUTHENTICATED_ANONYMOUSLY"],
    '/login/**': ["IS_AUTHENTICATED_ANONYMOUSLY"],
    '/logout/**': ["IS_AUTHENTICATED_ANONYMOUSLY"]
] 
```

这些都没有解决我上面解释的问题。任何帮助是极大的赞赏。

谢谢，贾里德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T03:38:09.363

答案是在我的 interceptUrlMap 中添加另一个条目：

```
grails.plugins.springsecurity.interceptUrlMap = [
    '/**': ["IS_AUTHENTICATED_FULLY"]
] 
```

这允许用户访问 URLMappings 中的“/”映射，从而被转发到“/dashboard”。如果没有这个映射，'/' 就没有规则，我们默认阻止它，因此没有机会到达要转发的 URLMappings。

# javascript - 如何使用触摸屏在 Chrome 和 MSIE10 中的 javascript 中捕获触摸事件

> ID：11040986
> 
> 赞同：3
> 
> 时间：2012-06-14T20:37:10.290
> 
> 标签：javascript, internet-explorer, google-chrome, touch, draggable

我希望我的 Web 应用程序在带有触摸屏的 Windows 设备上使用可拖动对象工作，但新的 Chrome 和新的 MSIE 10 不再允许我使用为鼠标开发的拖动。所以这个[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)适用于鼠标但不适用于触摸。

如何在 Chrome 和 MSIE 10 中通过触摸使可拖动工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:10:22.777

Windows 7[上的 Chrome 尚不支持触摸事件](http://caniuse.com/touch)

但是在 Chrome 20+ 中，您可以导航到实验性 chrome://flags 并打开“启用触摸事件”以触发 TouchStart/Move/End 事件，但它似乎确实破坏了其他行为，例如捏缩放和手指滚动。

[禁用此标志后，由于Chrome 中的此错误](http://code.google.com/p/chromium/issues/detail?id=131659)，TouchStart/End 会失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:47:41.637

如果您正在寻找“滑动”事件，请查看[jQuery++ 库](http://jquerypp.com/#swipe)。看看我为演示提供的链接。

> jQuery.event.swipe 添加了对滑动动作的支持，提供了可委托的 swipeleft、swiperight、swipedown、swipeup 和 swipe 事件：

# html - 将 HTML 文件转换为 RDF 文件

> ID：11040990
> 
> 赞同：0
> 
> 时间：2012-06-14T20:37:16.337
> 
> 标签：html, rdf

我想知道是否有任何方法/工具可以将 HTML 文件转换为其等效的 RDF 文件。

提前谢谢。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:06:25.550

没有来自任意 HTML 的标准等效 RDF 表示。如果您有高度规则的页面，您可以使用 XSLT 或简单的 XML 解析来从它们中抓取 RDF。iirc，这就是 DBPedia 项目最初获取数据的方式，通过抓取格式往往非常规则的维基百科页面，尤其是每个页面上的侧框。

但在一般情况下，这是不可能的。您可能感兴趣的一件事是[RDFa](http://www.w3.org/TR/xhtml-rdfa-primer/)，它是关于如何在 HTML 中*嵌入*RDF 的 w3c 标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:42:23.587

不幸的是，不，不是真的。阅读[this](http://internet-apps.blogspot.com/2007/10/converting-html-to-rdf.html)和[this](https://stackoverflow.com/questions/4876179/converting-websites-in-html-xml-into-rdf)可能会帮助您理解原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:49:19.727

没有正式的方法可以做到这一点。XHTML 词汇表有一个名称空间：

[http://www.w3.org/1999/xhtml/vocab#](http://www.w3.org/1999/xhtml/vocab#)

以及 XHTML 的命名空间

[http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml)

这可能需要一些 HTML 元素的 uri，无论是属性还是类。你也可以使用 Dublin Core 的点点滴滴。

# c# - c# MailMessage：我可以控制回复的文本吗？

> ID：11040994
> 
> 赞同：1
> 
> 时间：2012-06-14T20:37:42.170
> 
> 标签：c#, asp.net, mailmessage

我正在使用 asp .net 和 c#（MailMessage 对象）发送电子邮件。我利用 ReplyToList.Add() 来指定对地址的不同回复。我想知道的是：

有没有办法创建邮件消息（以我构造它的方式），以便如果用户实际选择回复，则会显示预定的正文？这通常是怎么做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:41:59.880

正如之前的评论者所解释的，这是由客户控制的。

我能想到的最接近的事情是将格式化的 mailto 链接放在 html 电子邮件的正文中，但是许多邮件客户端不会正确处理这个。

这将适用于某些客户端，因此如果您控制观众并仔细测试，您可能会侥幸成功。

# java - Java 类 java.util.ArrayList 的消息体编写器

> ID：11040995
> 
> 赞同：28
> 
> 时间：2012-06-14T20:38:08.317
> 
> 标签：java, list, jersey, jax-rs

访问我的 jax-rs 资源时，我收到了以下堆栈跟踪。

我正在使用 Tomcat 7、Jersey 1.12 和 Hibernate 4 和 MySQL。

我在寻找解决方案时找到了本教程：http: [//aruld.info/handling-generified-collections-in-jersey-jax-rs/](http://aruld.info/handling-generified-collections-in-jersey-jax-rs/)但列出的示例似乎都不起作用。

我在这里想念什么？

请不要让我写答案`MessageBodyWriters`，这应该可以解决。（而且我知道有一个解决方案，我就是想不通。）

这是我所有的罐子：

```
antlr-2.7.7.jar
asm-3.1.jar
commons-collections-3.2.1.jar
dom4j-1.6.1.jar
gson-1.7.1.jar
hibernate-commons-annotations-4.0.1.Final.jar
hibernate-core-4.1.0.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
jackson-core-asl-1.9.2.jar
jackson-jaxrs-1.9.2.jar
jackson-mapper-asl-1.9.2.jar
jackson-xc-1.9.2.jar
javassist-3.15.0-GA.jar
jboss-logging-3.1.0.CR2.jar
jboss-transaction-api_1.1_spec-1.0.0.Final.jar
jersey-client-1.12.jar
jersey-core-1.12.jar
jersey-json-1.12.jar
jersey-server-1.12.jar
jersey-servlet-1.12.jar
jettison-1.1.jar
jsr311-api-1.1.1.jar
mysql-connector-java-3.1.12-bin.jar 
```

这是我的资源类和方法：

```
@Path("/region")
public class RegionService {
    // This method is called if TEXT_PLAIN is request
    @GET
    @Produces(MediaType.APPLICATION_JSON)   
    public JResponse<List<Region>> region() {
        RegionDao regionDao = new RegionDao();
        regionDao.openSession();
        List<Region> regions = regionDao.getAll();
        regionDao.closeSession();
        return JResponse.ok(regions).build();
    }
} 
```

这是堆栈跟踪：

```
SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class java.util.ArrayList, and Java type java.util.List<campher.hibernate.entities.Region>, and MIME media type application/json was not found
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:285)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1451)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-14T20:51:09.920

您需要使用 @XmlRootElement 注释 Region 类。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-11T13:58:29.540

作为一个快速的解决方案，我看到：

```
final List<MyModel> myList = new ArrayList<>();
Response.ok().entity(new GenericEntity<List<MyModel>>(myList) {}).build(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-27T15:30:21.420

另一个答案对我不起作用（我已经有 XmlRootElement 注释），但我终于让它与 JSON 一起工作。它返回 XML 很好，而不是 JSON。

我正在使用 jersey-bundle-1.17.jar （也尝试将 asm-3.1.jar 和 jersey-json-1.17.jar 添加到类路径中，但仍然无法正常工作）。我终于尝试下载包含 12 个不同 jar 的 zip。一旦我将所有 12 个 jars 添加到我的类路径中，我终于摆脱了错误并且返回 JSON 效果很好。

我希望这对某人有所帮助。

编辑：这是包含 12 个 jar 文件的 zip 文件的链接：[jersey-archive-1.17.zip](http://repo1.maven.org/maven2/com/sun/jersey/jersey-archive/1.17.1/jersey-archive-1.17.1.zip)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-26T13:39:18.900

@XmlRootElement 使用此注释可以在 Jersey 中选择 JSON 或 XML。非常感谢！

只需添加以下内容：@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})

如果您在 xml 或 json 中赢得了回报，则根据您在标题中设置的请求！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-20T20:48:00.310

添加依赖

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>${jersey-version}</version>
</dependency> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-11T01:14:29.023

正如您所期望的那样，您可以使用 @XmlRootElement 注释您的 bean 类。但同样不适用于 Map。Jersey 内部使用 moxy 来完成工作。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-07-21T12:59:26.483

`@@XmlRootElement`在您的班级地区之前添加

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-03-19T09:08:24.673

```
 You can use JSONObject to create a Json Response 

    eg: 

    List<Region> regions = regionDao.getAll();
    JSONArray list = new JSONArray();
    for(Region region : regions )
    {
       JSONObject jObject= new JSONObject();
       //put all the data in json object
       jObject.put(region.getSomething());
       // and put this Jsonobject in JsonArray
       list.add(jObject);
    }

Or 

Response.ok().entity(new GenericEntity<List<Region>>(regions) {}).build(); 
```

PS：如果答案不适合您，请不要投反对票。

# sql-server - CodeSmith 6：生成数据库类型

> ID：11040998
> 
> 赞同：0
> 
> 时间：2012-06-14T20:38:16.833
> 
> 标签：sql-server, database, code-generation, codesmith

从 CodeSmith 6 中的 ColumnSchema 对象，我需要能够生成 SQL Server 表定义。我无法生成类型；我需要能够生成以下类型：

```
varchar(100)
varchar(MAX)
int
bit
etc... 
```

但是我找不到这个属性。codesmith中有什么东西可以提取吗？我一直在寻找，但找不到任何东西......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:26:00.100

您可以通过让模板继承[SqlCodeTemplate](http://docs.codesmithtools.com/display/Generator/SqlCodeTemplate)来轻松创建这些值。然后，您只需将 ColumnSchema 对象传递给 GetSqlParameterStatement 方法，该方法将返回此类型信息。

我强烈建议您查看 Database\DbSnapShot\TableSchema.cst 和 StoredProcedures\StoredProcedures.cst 模板，因为它们都显示出洞察力/或做您正在寻找的东西。

谢谢

——布莱克·涅米斯基