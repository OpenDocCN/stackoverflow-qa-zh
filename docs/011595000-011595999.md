# StackOverflow 问答 11595000-11595999

# java - 如何从 Netbeans IDE 中的现有类生成类图

> ID：11595001
> 
> 赞同：11
> 
> 时间：2012-07-21T18:53:42.917
> 
> 标签：java, netbeans, uml

我在给定的包中创建了 java 实体类。我想为包中的那些 java 类创建一个 UML 图。任何人都知道如何在 NetBeans IDE 7 中做到这一点？（我安装了插件并且它正在工作。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-11T18:51:50.933

对于使用 Netbeans 版本 8 的用户，请查看这些插件

easyUml -> [http://plugins.netbeans.org/plugin/55435/easyuml](http://plugins.netbeans.org/plugin/55435/easyuml)

PlantUml -> [http://plugins.netbeans.org/plugin/49069/plantuml](http://plugins.netbeans.org/plugin/49069/plantuml)

[Visual Paradigm](https://www.visual-paradigm.com/)是一款还有助于生成 UML 图的软件。

# sql-server - 德尔福表连接

> ID：11595003
> 
> 赞同：1
> 
> 时间：2012-07-21T18:53:51.677
> 
> 标签：sql-server, delphi

我的任务是修补 Delphi 软件以使用新的数据库（mssql）结构。在之前的数据库（mssql）中，所有被读取的列都在同一个表中。在新版本中，file_name 和 class_name 与数量值位于不同的表中。我相信我可以通过为这两个数据库表编写一个 Join 来解决这个问题。问题是，我不熟悉德尔福！
当前代码如下。如何让这两个数据库合二为一？

数据表=样式001 数据表1=样式

谢谢！！！

```
 dataTable.Active := True;
  datatable.Open;
  dataTable1.Active := True;
  datatable1.Open;

  while not datatable1.Eof do
  begin
    Application.ProcessMessages;

    file_name := trim(datatable1.FieldByName('code').asString) + '.jpg';
    class_name := trim(datatable1.FieldByName('category').asString);

    if not FileExists(picfolder + file_name) then
    begin
      dataTable1.next;
      continue;
    end;

    instock := datatable.FieldByName('onhand').asString;
    TryStrToInt(instock, instock_num);

    quantity := datatable.FieldByName('onorder').asString;
    TryStrToInt(quantity, num);

    num := instock_num - num;

    is_active := ( num > 10 );

    for i := 0 to file_count-1 do
    begin
      if is_active = active_class[file_class[i]] then
      if SameText(files[i],file_name) then
      begin // use TStringList instead
        if SameText(class_name, classes[file_class[i]]) then // same class
        begin
          file_ok[i] := true;
          class_ok[file_class[i]] := true;
        end;
        break;
      end;
    end;

    if class_name <> '' then class_name := class_name + '\';
    dest := picfolder + active_path[is_active] + class_name;
    deldest := picfolder + active_path[not is_active] + class_name;

    {$I-}

    if FileExists(deldest + file_name) then
      DeleteFile(PChar(deldest + file_name ));

    if not FileExists(dest + file_name) then
    begin
      ForceDirectories(dest);
      CopyFile(PChar(picfolder + file_name ), PChar(dest + file_name ), true );
    end;

    dataTable1.next;
  end;

  for i := 0 to file_count-1 do
    if not file_ok[i] then
    begin // delete wrong file if empty
//      ShowMessage('problem: ' + picfolder + active_path[active_class[file_class[i]]] + classes[file_class[i]] + '\' + files[i]);
      DeleteFile(picfolder + active_path[active_class[file_class[i]]] + classes[file_class[i]] + '\' + files[i]);
    end;
  for i := 0 to class_count-1 do
    if not class_ok[i] then
    begin // delete old class if empty
//      ShowMessage('problem: ' + picfolder + active_path[active_class[i]] + classes[i] + '\' );
      RemoveDir(picfolder + active_path[active_class[i]] + classes[i] + '\' );
    end;

  beep;
  dataTable.Active := False;
  dataTable1.Active := False; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:37:28.670

JOIN 在 SQL 请求中，而不是您在此处显示的使用循环代码。

您必须使用 a`TQuery`而不是 two `TTable`，并编写一个 SQL 选择来连接这两个表。

您必须修改 SQL 请求，在 SELECT 的 FROM 子句中添加两个表，并在 WHERE 子句中添加一个 JOINture。请参阅[这篇关于 JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29)的文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T21:27:41.350

使用 a`TDataSource`并将其`DataSet`属性连接到其中一个表。然后将`MasterSource`另一个表的属性设置为该数据源。单击`MasterFields`属性的省略号按钮并选择连接字段。

假设*样式*字段是唯一的，当您浏览第一个表格时，第二个表格将自动跟随。

# javascript - 淘汰赛js变量覆盖

> ID：11595006
> 
> 赞同：3
> 
> 时间：2012-07-21T18:54:07.327
> 
> 标签：javascript, knockout.js

我的脚本中有一些全局变量：

```
var yardsToFirst = 10;
var yardsToTD = 80;
var exactDown = 1; 
```

在我的 ViewModel 中，我接受并修改变量。根据 Google Chrome 的 javascript 控制台，正在修改变量。我尝试让他们观察，以便他们可以像这样更新 UI：

```
self.down = ko.observable(exactDown);
self.toGo = ko.observable(yardsToFirst);
self.toGoal = ko.observable(yardsToTD); 
```

当我加载页面时，一切正常。当我开始修改数据时，问题就来了。用户界面永远不会改变。我已经检查过了，javascript 控制台说全局变量包含正确的数字，但 UI 仍然没有更新。我是在做一些不可能的事情，还是我做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:00:39.490

你这样做是不对的。当您创建淘汰赛可观察属性时，它们只会使用您给它们的值进行初始化，即`ko.observable(exactDown)`. 之后，knockout 就无法知道您用于初始化的变量何时发生了变化。就像你试图打电话一样`ko.observable(1)`。

用一些全局变量初始化 knockout observable 属性并不意味着 knockout 将开始观察该变量的变化。

而不是像你这样修改全局变量：

```
exactDown = newValue; 
```

...并期望淘汰赛将获得新值，您需要直接修改淘汰赛属性，如下所示：

```
viewModel.down(newValue); 
```

要修改剔除属性，您需要将它们称为函数（因为它们基本上是 JavaScript 函数）。

# ruby-on-rails - ActionView::Template::Error（未预编译）：在 heroku cedar 上

> ID：11595007
> 
> 赞同：11
> 
> 时间：2012-07-21T18:54:07.633
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

更新：

事实证明，有时 results.image 为 nil 或“”，所以这破坏了应用程序，因为资产管道正在寻找像“”这样的图像而没有找到它。现在，如果没有图像，我不会显示图像，但我必须为丢失的图像添加默认图像......这应该是一个更永久的修复。

* * *

关于heroku cedar和Rails资产管道的这个问题，我有很多SO问题，我尝试了很多解决方案，但没有一个有效，这可能是因为我遇到的问题有一个皱纹我在其他任何地方都没有见过。

我的应用程序使用 Rails 3.2.6，我已经将它部署在 Heroku 的 cedar 堆栈上。这是一个基本的搜索应用程序，它通过 websolr 搜索附加的 postgres db，所以当你加载没有 params[:q].present 的索引 (index#index) 时？你会得到一个搜索框，这很好用。但是当我在搜索框中放一些东西并点击提交时，index#index 再次加载但这次尝试显示结果，我得到：

```
app[web.1]: Completed 500 Internal Server Error in 440ms
app[web.1]: 
app[web.1]: ActionView::Template::Error ( isn't precompiled):
app[web.1]:     12:         - @results.each do |result|
app[web.1]:     13:           %li
app[web.1]:     14:             %div
app[web.1]:     15:               = image_tag result.image
app[web.1]:     16:             %div
app[web.1]:     17:               = result.title
app[web.1]:     18:             %div
app[web.1]:   app/views/index/index.html.haml:15:in `block in _app_views_index_index_html_haml___4350601325072829986_32734540'
app[web.1]:   app/views/index/index.html.haml:12:in   _app_views_index_index_html_haml___4350601325072829986_32734540' 
```

我的特殊案例与我见过的其他案例的奇怪之处在于以下几行：

```
ActionView::Template::Error ( isn't precompiled): 
```

对于我见过的所有其他类似问题，括号中有一个css文件，即（“foo.css”未预编译），或者在我的情况下它似乎应该是（“index.css”没有预编译）。但这里只是空白！

这是我正在尝试开始工作的暂存部署，因此我尝试运行 RAILS_ENV=staging rake assets:precompile （当然，然后提交结果），但这并不能解决问题。我什至尝试去掉视图中的（注意那里没有任何实际样式）。没有任何效果，我很茫然。任何帮助将不胜感激。

作为参考，这是我的 gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'
gem 'pg'
gem 'haml-rails'
gem 'mongoid'
gem 'sunspot_rails', '~> 1.3.0'
gem 'sunspot_solr'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :development do
  gem 'heroku_san'
  gem 'annotate'
  gem 'awesome_print'
end

group :development, :test do
  gem 'rspec-rails'
end

group :test do
  gem 'cucumber-rails', :require => false
  gem 'capybara'
  gem 'database_cleaner'
  gem 'spork'
  gem 'launchy'
end

group :staging, :production do
  gem 'thin'
end 
```

以下是我的 config/application.rb 文件中的配置选项：

```
config.encoding = "utf-8"
config.filter_parameters += [:password]
config.active_support.escape_html_entities_in_json = true
config.active_record.whitelist_attributes = true
config.assets.enabled = true
config.assets.version = '1.0'
config.assets.compile = true 
```

这是我的环境/staging.rb 文件中的配置选项：

```
config.cache_classes = true
config.consider_all_requests_local       = false
config.action_controller.perform_caching = true
config.serve_static_assets = false
config.assets.compress = true
config.assets.compile = true
config.assets.precompile += ['index.css.scss']
config.assets.digest = true
config.i18n.fallbacks = true
config.active_support.deprecation = :notify 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T23:40:23.570

您是否有可能在某处有一个空的图像 URL？您是否安装了 CarrierWave 之类的东西？

我从你的代码中看到`image_tag result.image`- 这可能是空的吗？

该线程应该解决它： [ActionView::Template::Error （未预编译）：](https://stackoverflow.com/questions/11068190/actionviewtemplateerror-isnt-precompiled?lq=1)

# c# - 枚举 EF 5.0 - 数据库优先

> ID：11595008
> 
> 赞同：27
> 
> 时间：2012-07-21T18:54:23.777
> 
> 标签：c#, entity-framework, enums, entity-framework-5, database-first

如果我使用 Database First，我如何才能使我的上下文对象使用 Entity Framework 5.0 中的 Enum 功能。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-21T19:05:44.247

转到模型浏览器并创建一个新的枚举类型，然后转到您希望使用它的任何列并将其类型更改为您刚刚创建的枚举。

# perl - 匿名哈希中的奇数个元素

> ID：11595011
> 
> 赞同：14
> 
> 时间：2012-07-21T18:55:24.470
> 
> 标签：perl

我试图理解这个 Perl 代码......

如果有一个流它可以工作，如果有 2 个或更多流它会警告匿名哈希中的奇数个元素。在这种情况下，它似乎返回了一个数组。如何将数组元素正确添加到@streams？它似乎在 if 子句中正确添加了 HASH 案例。else 子句是假的吗？

```
 my $x = $viewedProjectDataObj->{streams};

    if (ref($x) eq 'HASH') {
        push(@streams, $x->{id});
    } elsif (ref($x) eq 'ARRAY') {

        print "$x\n";
        print "@$x\n";
        my @array = @$x;
        foreach my $obj (@array) {
            print "in $obj\n";
            print Dumper( $obj);
            push(@streams,  ($obj->{id}) );
        }
    }

    print "streamcount " . @streams % 2;
    print Dumper(@streams);

    my $stream_defect_filter_spec = {
        'streamIdList' => @streams,
        'includeDefectInstances' => 'true',
        'includeHistory' => 'true',
    };

    my @streamDefects = $WS->get_stream_defects($defectProxy, \@cids,             $stream_defect_filter_spec);
    print Dumper(@streamDefects); 
```

我正在添加下一行...

```
if ($defectSummary->{owner} eq "Various") {
    foreach (@streamDefects) {
        if (exists($_->{owner})) {
            $defectSummary->{owner} = $_->{owner};
            last;
        }
    }
}

my $diref = $streamDefects[0]->{defectInstances};
if ($diref) {
    my $defectInstance;
    if (ref($diref) eq 'HASH') {
        $defectInstance = $diref;
    } elsif (ref($diref) eq 'ARRAY') {
        $defectInstance = @{$diref}[0];
    } else {
        die "Unable to handle $diref (".ref($diref).")";
    } 
```

它现在错误

Web API 返回错误代码 S:Server: calling getStreamDefects: No stream found for name null。$VAR1 = -1; 我在 xyz-handler.pl 第 317 行使用“strict refs”时不能使用字符串（“-1”）作为 HASH 引用。

一些 Dumper 输出

```
$VAR1 = {
      'streamIdList' => [
                          {
                            'name' => 'asdfasdfadsfasdfa'
                          },
                          {
                            'name' => 'cpp-62bad47d63cfb25e76b29a4801c61d8d'

                          }
                        ],
      'includeDefectInstances' => 'true',
      'includeHistory' => 'true'
    }; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-21T19:22:40.433

分配给哈希的列表是一组键/值对，这就是为什么元素的数量必须是偶数的原因。

因为`=>`运算符只是一个逗号，并且`@streams`数组在列表中被展平，所以这个

```
my $stream_defect_filter_spec = {
  'streamIdList' => @streams,
  'includeDefectInstances' => 'true',
  'includeHistory' => 'true',
}; 
```

相当于这个

```
my $stream_defect_filter_spec = {
  'streamIdList' => $streams[0],
  $streams[1] => $streams[2],
  $streams[3] => $streams[4],
  ...
  'includeDefectInstances' => 'true',
  'includeHistory' => 'true',
}; 
```

所以我希望你能看到如果数组中有*偶数*个元素，你会收到警告。

要解决问题，您需要将哈希元素的值作为数组*引用*，这是一个标量，不会破坏事物的方案

```
my $stream_defect_filter_spec = {
  'streamIdList' => \@streams,
  'includeDefectInstances' => 'true',
  'includeHistory' => 'true',
}; 
```

这样你就可以访问数组元素

```
$stream_defect_filter_spec->{streamIdList}[0] 
```

等等

`map`顺便说一句，你可以通过让做它擅长的事情来大幅整理你的代码：

```
if (ref $x eq 'HASH') {
  push @streams, $x->{id};
}
elsif (ref $x eq 'ARRAY') {
  push @streams, map $_->{id}, @$x;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-21T19:30:49.523

中的任务：

```
my $stream_defect_filter_spec = {
        'streamIdList' => @streams,    # <---- THIS ONE
        'includeDefectInstances' => 'true',
        'includeHistory' => 'true',
}; 
```

不正确，您从 1 3 5th ... 数组元素中获取哈希键。

您可能想要分配对数组的引用，而不是数组本身：

```
'streamIdList' => \@streams, 
```

不需要的示例（如您的代码中所示）：

```
use strict;
use warnings;
use Data::Dump;

my @z = qw(a b c x y z);
dd \@z;

my $q = {
    'aa' => @z,
};
dd $q; 
```

不想要的结果：

```
["a", "b", "c", "x", "y", "z"]
Odd number of elements in anonymous hash at a line 12.
{ aa => "a", b => "c", x => "y", z => undef }

                                      ^-here 
```

分配参考的示例

```
use strict;
use warnings;
use Data::Dump;

my @z = qw(a b c x y z);
dd \@z;

my $q = {
    'aa' => \@z,
};
dd $q; 
```

产生：

```
["a", "b", "c", "x", "y", "z"]
{ aa => ["a", "b", "c", "x", "y", "z"] } 
```

差异是显而易见的。

# ios - 急需 Xcode 中的网络错误警报

> ID：11595013
> 
> 赞同：0
> 
> 时间：2012-07-21T18:55:34.393
> 
> 标签：ios, xcode, alert, connect

我最近开始了一个 Xcode 项目，它主要基于 Web，从某种意义上说，它主要与 UIWebView 一起使用。我在这方面完全是菜鸟。我想发出“无 Internet 连接警报”。如果您没有互联网连接，基本上会出现警报。我尝试过使用可达性，但由于我是个菜鸟，所以我没有设法弄清楚任何事情。这是我的视图控制器：这是我的 .h 文件：PS：我的 WebView 被称为“webone”。

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController

-(IBAction)refreshClicks:(id)sender;

@property (weak, nonatomic) IBOutlet UIWebView *webone;
@end 
```

这是我的 .m 文件：

```
#import "FirstViewController.h"
@interface FirstViewController ()

@end

@implementation FirstViewController
@synthesize webone;

-(void)viewDidLoad {
    NSURL *url = [NSURL URLWithString:@"http://www.lostcraft.net/mobile"]; 
    NSURLRequest *req = [NSURLRequest requestWithURL:url]; 
    [webone loadRequest:req];    
    [super viewDidLoad];
}

-(void)awakeFromNib{  //IGNORE
    [self refreshClicks:self]; //IGNORE
}

-(IBAction)refreshClicks:(id)sender{//IGNORE
    [webone loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.lostcraft.net/mobile"]]];//IGNORE
}

- (void)viewDidUnload
{
    [self setWebone:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:45:21.637

把它放在你的 .m 文件中

在您的 IBAction 下：

```
NSString *web = @"http://YOUR WEB ADRESS HERE";
                 NSURL *url = [NSURL URLWithString:web];
NSURLRequest *requestUrl = [NSURLRequest requestWithURL:url];
[webdone loadRequest:requestUrl]; 
```

然后在你的 .m 中的某个地方

```
-(void)webView:(UIWebView *)webdone didFailLoadWithError:(NSError *)error {
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Please check     your internet connection" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];

} 
```

进入 xcode 界面生成器中的连接选项卡

![在此处输入图像描述](../Images/2f826296c4a17c89f82eb352f152a401.png)

如图所示，从代表处右键单击（顶部选项）并将其拖到您的视图控制器中，您可以在其中拥有 Web 视图（webdone）

![在此处输入图像描述](../Images/dbe159f2e45ce7092828f3d9436f357c.png)

# jakarta-ee - 击中服务器时在哪里提到端口？

> ID：11595014
> 
> 赞同：0
> 
> 时间：2012-07-21T18:55:38.307
> 
> 标签：jakarta-ee, tomcat, servlets, webserver, tomcat6

我有一个小疑问，可能很愚蠢，但我想消除疑问。

假设我有运行 tomcat 和 apache 服务器的服务器计算机。

我现在可以使用 "http://localhost:8080/" = Tomcat for java "http://localhost/" = Apache Server for php 页面访问管理页面

[所以现在当我访问像http://www.abc.com/Construction/index.html](http://www.abc.com/Construction/index.html)这样的 url 时 ，它会去点击哪个应用程序，即 apache 或 tomcat，当两者都有 index.html 页面时。

总之我们用哪里来提端口？ [http://www.abc.com/](http://www.abc.com/)在这个 url 中提到的应用程序端口在哪里以及 http 协议端口 80 将如何出现在图片中？

请清除我的疑问。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:59:39.460

当未指定端口时，`http://`协议默认为端口 80。`http://localhost/`相当于`http://localhost:80/`.

`http://www.abc.com/Construction/index.html`将连接到`www.abc.com`端口 80 上的主机，然后请求 URL `/Construction/index.html`。由于 Tomcat 在 8080 端口上运行，Apache 在 80 端口上运行，Apache 将是处理这个请求的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:03:13.073

这取决于所使用的协议。如果未指定端口号，则将使用该协议的默认端口。对于 HTTP，它是 80，而对于 HTTPS，它是 443。

并且只有一个 Web 服务器可以在一个端口上服务/绑定。因此，如果您在同一台机器上运行 IIS 和 Tomcat。两者都必须在不同的端口上运行。因此[http://www.abc.com/](http://www.abc.com/)将由运行在端口 80 上的 Web 服务器提供服务。

# c++ - Qt QDomElement 性能问题

> ID：11595015
> 
> 赞同：3
> 
> 时间：2012-07-21T18:55:50.313
> 
> 标签：c++, xml, qt

我正在编写一个用于处理[GPX 文件](http://www.topografix.com/gpx.asp)的应用程序，并且在使用 QDomElement 类读取大型 XML 文档时遇到了性能问题。包含数千个航点的 GPS 路径文件可能需要半分钟才能加载。

这是我用于读取路径（路线或轨道）的代码：

```
void GPXPath::readXml(QDomElement &pathElement)
{
    for (int i = 0; i < pathElement.childNodes().count(); ++i)
    {
        QDomElement child = pathElement.childNodes().item(i).toElement();
        if (child.nodeName() == "trkpt" ||
            child.nodeName() == "rtept")
        {
            GPXWaypoint wpt;
            wpt.readXml(child);
            waypoints_.append(wpt);
        }
    }
} 
```

在使用 Apple 的 Instruments 分析代码时，我注意到 QDomNodeListPrivate::createList() 负责大部分计算时间，它被 QDomNodeList::count() 和 QDomNodeList::item() 调用。

看起来这不是遍历 QDomElement 的子元素的有效方法，因为似乎为每个操作重新生成了列表。我应该改用什么方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:17:07.777

我试过这个

```
void GPXPath::readXml(QDomElement &pathElement)
{
    QDomElement child = pathElement.firstChildElement();
    while (!child.isNull())
    {
        if (child.nodeName() == "trkpt" ||
            child.nodeName() == "rtept")
        {
            GPXWaypoint wpt;
            wpt.readXml(child);
            waypoints_.append(wpt);
        }
        child = child.nextSiblingElement();
    }
} 
```

事实证明，它快了 15 倍。通过使用 SAX，我也许可以更快地完成它，但现在就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:07:50.767

您应该考虑使用[QT SAX](http://doc.qt.nokia.com/4.7-snapshot/xml-sax.html)而不是 DOM。SAX 解析器通常不会将整个 XML 文档加载到内存中，并且在您的情况下很有用

# php - PHP 将图片从 URL 上传到 Facebook

> ID：11595016
> 
> 赞同：1
> 
> 时间：2012-07-21T18:55:55.953
> 
> 标签：php, facebook, api

> **可能重复：**
> [PHP - 通过 Graph API 将网络托管的照片上传到 Facebook 相册](https://stackoverflow.com/questions/3220434/php-upload-a-web-hosted-photo-to-facebook-album-via-graph-api)

我知道您可以使用此代码上传到用户相册

```
$facebook = new Facebook(array(  
  'appId'  => 'ID',  
  'secret' => 'SECRET',  
  'fileUpload' => true,  
  'cookie' => true // enable optional cookie support  
));  

$facebook->setFileUploadSupport(true);  

# File is relative to the PHP doc  
$file = "@".realpath("../../_images/stuff/greatness.jpg");  

$args = array(  
    'message' => 'Photo Caption',  
    "access_token" => "urtoken",  
    "image" => $file  
);  

$data = $facebook->api('/ALBUMID_GOES_HERE/photos', 'post', $args);
if ($data) print_r("success"); 
```

现在这总是从我的服务器上传，Facebook 是否有可能从外部 URL（如[http://www.test.com/image.jpg](http://www.test.com/image.jpg) ）获取图像而不是使用我的服务器上传？

# javascript - 是否可以在 Kendo 网格中仅显示 Kendo 数据源中的某些字段，但在“添加”弹出窗口中全部显示？

> ID：11595018
> 
> 赞同：1
> 
> 时间：2012-07-21T18:56:10.580
> 
> 标签：javascript, html, web, kendo-ui

我有一个包含 10 个字段的 Kendo UI 数据源。我想使用 Kendo Grid 对数据进行 CRUD 操作。所有10个字段都需要输入，但我只想在实际的Grid控件中显示其中的几个。显示所有 10 个会使 Grid 变得非常大并且看起来臃肿。

如果我使用网格的内置“弹出”编辑功能，是否可以让用户输入弹出窗口中的所有字段但只有其中一些字段显示在实际网格中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:04:21.160

由于列不可重新调整大小，我最终只是将宽度属性设置为 1。这将适用于我的目的。

# android - AlertDialog 导致 java.lang.RuntimeException：无法实例化活动 ComponentInfo

> ID：11595023
> 
> 赞同：2
> 
> 时间：2012-07-21T18:56:59.540
> 
> 标签：android, runtime, android-alertdialog

单击 AlertDialog box OK Button to Intent to next Activity 后出现此错误，数据仍在插入数据库中，但应用程序崩溃了。

日志错误：

```
07-22 02:26:08.603: E/JSON(10170): {"tag":"register","success":1,"error":0,"uid":"500af44ea075b5.28543539","user":{"name":"Dddds","email":"Saasa","imei":"359616041330986","created_at":"2012-07-22 02:26:22","updated_at":null}}
07-22 02:26:08.623: E/JSON(10170): {"uid":"500af44ea075b5.28543539","error":0,"user":{"created_at":"2012-07-22 02:26:22","updated_at":null,"email":"Saasa","imei":"359616041330986","name":"Dddds"},"success":1,"tag":"register"}
07-22 02:26:08.758: D/dalvikvm(10170): GC_CONCURRENT freed 142K, 3% free 13469K/13831K, paused 7ms+2ms
07-22 02:26:09.608: D/dalvikvm(10170): newInstance failed: p0 i0 [0 a1
07-22 02:26:09.608: D/AndroidRuntime(10170): Shutting down VM
07-22 02:26:09.608: W/dalvikvm(10170): threadid=1: thread exiting with uncaught exception (group=0x40c681f8)
07-22 02:26:09.613: E/AndroidRuntime(10170): FATAL EXCEPTION: main
07-22 02:26:09.613: E/AndroidRuntime(10170): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{nyp.android.project/nyp.android.project.DashboardActivity}: java.lang.InstantiationException: can't instantiate class nyp.android.project.DashboardActivity
07-22 02:26:09.613: E/AndroidRuntime(10170):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1891)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at android.os.Looper.loop(Looper.java:137)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at android.app.ActivityThread.main(ActivityThread.java:4511)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at java.lang.reflect.Method.invokeNative(Native Method)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at java.lang.reflect.Method.invoke(Method.java:511)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at dalvik.system.NativeStart.main(Native Method)
07-22 02:26:09.613: E/AndroidRuntime(10170): Caused by: java.lang.InstantiationException: can't instantiate class nyp.android.project.DashboardActivity
07-22 02:26:09.613: E/AndroidRuntime(10170):    at java.lang.Class.newInstanceImpl(Native Method)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at java.lang.Class.newInstance(Class.java:1319)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at android.app.Instrumentation.newActivity(Instrumentation.java:1026)
07-22 02:26:09.613: E/AndroidRuntime(10170):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
07-22 02:26:09.613: E/AndroidRuntime(10170):    ... 11 more
07-22 02:26:59.308: I/Process(10170): Sending signal. PID: 10170 SIG: 9
07-22 02:31:13.878: D/OpenGLRenderer(10938): Flushing caches (mode 0)
07-22 02:31:15.773: D/dalvikvm(10938): GC_CONCURRENT freed 155K, 3% free 13114K/13511K, paused 2ms+2ms
07-22 02:31:17.708: D/OpenGLRenderer(10938): Flushing caches (mode 0)
07-22 02:31:26.963: E/JSON(10938): {"tag":"register","success":1,"error":0,"uid":"500af58d0aa288.05836094","user":{"name":"Test","email":"Test","imei":"359616041330986","created_at":"2012-07-22 02:31:41","updated_at":null}}
07-22 02:31:26.968: E/JSON(10938): {"uid":"500af58d0aa288.05836094","error":0,"user":{"created_at":"2012-07-22 02:31:41","updated_at":null,"email":"Test","imei":"359616041330986","name":"Test"},"success":1,"tag":"register"}
07-22 02:31:27.008: D/dalvikvm(10938): GC_FOR_ALLOC freed 214K, 3% free 13240K/13639K, paused 20ms
07-22 02:31:28.468: D/dalvikvm(10938): newInstance failed: p0 i0 [0 a1
07-22 02:31:28.468: D/AndroidRuntime(10938): Shutting down VM
07-22 02:31:28.468: W/dalvikvm(10938): threadid=1: thread exiting with uncaught exception (group=0x40c681f8)
07-22 02:31:28.473: E/AndroidRuntime(10938): FATAL EXCEPTION: main
07-22 02:31:28.473: E/AndroidRuntime(10938): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{nyp.android.project/nyp.android.project.DashboardActivity}: java.lang.InstantiationException: can't instantiate class nyp.android.project.DashboardActivity
07-22 02:31:28.473: E/AndroidRuntime(10938):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1891)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at android.os.Looper.loop(Looper.java:137)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at android.app.ActivityThread.main(ActivityThread.java:4511)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at java.lang.reflect.Method.invokeNative(Native Method)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at java.lang.reflect.Method.invoke(Method.java:511)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at dalvik.system.NativeStart.main(Native Method)
07-22 02:31:28.473: E/AndroidRuntime(10938): Caused by: java.lang.InstantiationException: can't instantiate class nyp.android.project.DashboardActivity
07-22 02:31:28.473: E/AndroidRuntime(10938):    at java.lang.Class.newInstanceImpl(Native Method)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at java.lang.Class.newInstance(Class.java:1319)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at android.app.Instrumentation.newActivity(Instrumentation.java:1026)
07-22 02:31:28.473: E/AndroidRuntime(10938):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
07-22 02:31:28.473: E/AndroidRuntime(10938):    ... 11 more 
```

代码：

```
 JSONObject json = userFunction.registerUser(name, email, password, IMEI.getText().toString());

            // check for login response
            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    registerErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS); 
                    if(Integer.parseInt(res) == 1){
                        // user successfully registered
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        AlertDialog alertDialog = new AlertDialog.Builder(RegisterActivity.this).create();

                        // Setting Dialog Title
                        alertDialog.setTitle("Registration");

                        // Setting Dialog Message
                        alertDialog.setMessage("Registration successful");

                        // Setting Icon to Dialog
                        alertDialog.setIcon(R.drawable.tick);

                        // Setting OK Button
                        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                        // Write your code here to execute after dialog closed
                        //Toast.makeText(getApplicationContext(), "You clicked on OK", Toast.LENGTH_SHORT).show();

                        // Launch Dashboard Screen
                        Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Registration Screen
                        finish();

                        }
                        });

                        // Showing Alert Message
                        alertDialog.show();     

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT), json_user.getString(KEY_IMEI));                     

                    }else{
                        // Error in registration
                        registerErrorMsg.setText("Error occured in registration");
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:03:15.160

我从未见过使用 getApplicationContext() 创建的意图。您是否尝试使用 ClassName.this 代替？

通常是：

```
Intent intent = new Intent(CurrentActivity.this, NextActivity.class); 
```

# android - 用户 Fragment.setRetainInstance 不处理娱乐是一个好习惯吗？

> ID：11595030
> 
> 赞同：4
> 
> 时间：2012-07-21T18:58:19.203
> 
> 标签：android

为了摆脱处理娱乐、保存实例状态等，`Fragment.setRetainInstance()`为所有人使用它是一种好习惯吗？为什么不？`Fragments``Fragment`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:36:54.647

是的，如果必须保留配置更改，您可以将它与不在后台堆栈中的片段一起使用。它只是让事情变得更简单。

另请参阅[https://stackoverflow.com/a/8550351/1300995](https://stackoverflow.com/a/8550351/1300995)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:25:00.413

这并不总是好的，不。通过保留该实例，您是在告诉您旧的 Android 给您提供完全相同的`Fragment`背面实例，即`onDestroy`永远不会调用 Fragment，而是使用 onAttach(ed) 和 onDetach(ed)。

通常，由于方向更改（例如），您需要重新排列视图以利用不同的屏幕比例，并且让您的片段保持其状态将意味着框架不会尝试使用您的“风景友好" 例如，如果以纵向模式启动，则视图。

的影响`onRetainInstance`是微妙的，它不是灵丹妙药。小心使用。

# c# - 保存 blob 时出现异常

> ID：11595032
> 
> 赞同：1
> 
> 时间：2012-07-21T18:58:27.500
> 
> 标签：c#, azure, asp.net-mvc-4

我正在使用`WindowAzure`云计算 API。我正在开发一个非常基本的应用程序，`saving`因为我今天开始学习它。我为 VWD express 2010 安装了 SDK。我使用以下连接字符串连接到本地运行的存储模拟器：`accessing``Blob`

```
 . 
  .
  <add key="StorageConnectionString" value="UseDevelopmentStorage=true" />
</appSettings> 
```

我保存 Blob 的代码，其中出现异常 ( `Unable to connect to the remote server`)，行标记：

```
 public void Save()
    {
        CloudBlobClient blobclient = Account.CreateCloudBlobClient();

        CloudBlobContainer container = blobclient.GetContainerReference(Container);
=====>  container.CreateIfNotExist(); 

        container.SetPermissions(new BlobContainerPermissions() { PublicAccess = BlobContainerPublicAccessType.Blob });

        CloudBlob blob = container.GetBlobReference(Blob);
        blob.UploadFromStream(Data);
    } 
```

为什么它连接到远程服务器，它应该在本地运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:22:05.550

“远程服务器”是一个通用响应，意味着它无法连接到您在连接字符串中指定的服务器（开发服务器）。显然存储模拟器没有运行。启动它，您的代码应该可以工作。

# java - java交换运算符temp

> ID：11595033
> 
> 赞同：4
> 
> 时间：2012-07-21T18:58:37.463
> 
> 标签：java

我试图了解如何编写以下涉及交换/交换运算符的语句的逻辑。到目前为止，我已经用谷歌搜索并搜索了文本（Java 解决问题的介绍），但没有任何运气。以前有没有人在以下问题上苦苦挣扎，也许找到了答案（这是字符串的一个例子，但我一般都在使用 temp 的交换运算符苦苦挣扎）：

> 有两个字符串变量 s1 和 s2 已经被声明和初始化。编写一些代码来交换它们的值。

我知道我应该使用临时变量，而这正是我的逻辑为空的地方。

我写它的方式，我知道它的错误如下：

```
temp = s1;
s2 = temp; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:02:26.323

在您不正确的解决方案中，您失去了`s2`. 您想使用`temp`来*保留*任一变量的值，以便在交换期间*不会丢失该值。*

以下是您需要做的事情的清单：

*   复制`s1`某处的值。
*   `s1`现在，使用stashed的副本，您可以分配`s1`.`s2`
*   现在分配给`s2`您制作的副本`s1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T21:44:03.313

为了完整起见，当您不需要临时变量时，有一种特殊情况。

当您要交换的两个值长度相等并且语言允许您对它们使用按位运算符时，您可以进行[XOR 交换](http://en.wikipedia.org/wiki/XOR_swap_algorithm)：

```
A = A bitwise xor B
B = A bitwise xor B
A = A bitwise xor B 
```

尽管在现代计算机上这很少实用，但了解并演示 XOR 操作的一个有趣方面是件好事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:02:25.753

将变量视为只能容纳一件事的容器。要交换两个变量的值，您需要三个容器。

```
String s1 = "Some string", s2 = "Another string", tmp;
tmp = s1; // put the first item into the third bin
s1 = s2; // put the second item into the first bin
s2 = tmp; // put the first item into the second item 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T19:02:27.667

在所有语言中：

```
temp = s1; // temporarily store the s1 value because we'll replace it next
s1 = s2; // now s1 lost it's value, and got a new one
s2 = temp; // luckily s2 doesn't go home empty handed, the temp is still good 
```

# mysql - mysql 2 查询合一

> ID：11595035
> 
> 赞同：0
> 
> 时间：2012-07-21T18:58:40.427
> 
> 标签：mysql, merge

我有两个 mysql 查询，第一个是

```
SELECT  `first_name` ,  `last_name` ,  `email` ,  `mobile`
FROM  `member_master` 
WHERE  `id` = $member_id  AND  `dob` =  $date 
```

第二个是

```
SELECT  `email` 
FROM  `member_master`
WHERE  `id` = $member_id  AND  `dob` !=  $date 
```

需要将这 2 个查询合并到一个查询中，这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:13:00.340

如果你真的想要一个标注的两个单独的结果，我想你可以发出一个带有标志（result_id）和空值的 UNION，其中第二个结果没有列：

```
select * from
(
SELECT 1 as result_id
 , first_name 
 , last_name
 , email
 , mobile
FROM member_master
WHERE id = $member_id AND dob = $date

union 

SELECT 2 as result_id
 , null
 , null
 , email
 , null
FROM member_master
WHERE id = $member_id AND dob != $date
) my_result
order by result_id 
```

这样您就可以确定合适的集合。

**编辑**：添加了外部选择，以便我们可以按“标志”列排序，这样我们就可以一次处理一组。但是您仍然会在一个结果中有两组，必须对其进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:04:00.700

作为同一张表，您可以使用这样的 OR 语句（唯一的问题是所有记录都将包含 `first_name`等 `last_name`）：

```
 SELECT  `first_name` ,  `last_name` ,  `email` ,  `mobile`
                   FROM  `member_master` WHERE  (`id` = $member_id  AND  `dob` =  $date ) or ( `id` = $member_id  AND  `dob` !=  $date) 
```

# python - eclipse 无法识别默认语言环境

> ID：11595037
> 
> 赞同：0
> 
> 时间：2012-07-21T18:58:44.290
> 
> 标签：python, django, eclipse

# 怀疑

在终端中，我更改了 LANG=en_US.UTF-8 ， LC_ALL=en_US.UTF-8 的设置，当我从终端生成运行 python manage.py createsuperuser 时，它可以工作，但它不能从 ECLIPSE IDE 工作，为什么？

# 代码

```
import locale

print locale.getdefaultlocale() 
```

# 输出

```
(None, None) 
```

# 当我从 Eclipse 运行 createsuperuser 时出错

```
Traceback (most recent call last):
  File "/Users/Abhimanyu/Documents/workspace/new1/manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Library/Python/2.6/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Python/2.6/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.6/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Python/2.6/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Library/Python/2.6/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 70, in handle
    default_username = get_default_username()
  File "/Library/Python/2.6/site-packages/django/contrib/auth/management/__init__.py", line 105, in get_default_username
    default_username = get_system_username()
  File "/Library/Python/2.6/site-packages/django/contrib/auth/management/__init__.py", line 85, in get_system_username
    return getpass.getuser().decode(locale.getdefaultlocale()[1])
TypeError: decode() argument 1 must be string, not None 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:20:28.340

不是一个很好的解决方案，但是在 manage.py 中添加以下两行应该可以让事情正常进行。将它们放在对 os.environ.setdefault("DJANGO_SETTINGS_MODULE", "*PROJECT_NAME*.settings") 的调用下方。

```
os.environ["LANG"] = "en_US.UTF-8"
os.environ["LC_ALL"] = "en_US.UTF-8" 
```

至于为什么部分，请看[这里](https://code.djangoproject.com/ticket/16017)。

# matlab - 后面的 Matlab GUI 代码中的全局（共享）变量。有没有比使用句柄结构更好的方法呢？

> ID：11595040
> 
> 赞同：3
> 
> 时间：2012-07-21T18:59:13.033
> 
> 标签：matlab, oop, user-interface, matlab-guide

我最近花了一些时间创建复杂的 Matlab GUI 工具。我正在使用 GUIDE GUI 构建器。

我不喜欢 Matlab 在后面的代码中管理全局变量的方式（带有函数的 .m 文件）。如果我想在函数调用之间共享数据，我必须将它们存储在`handles`作为参数给每个函数调用的结构中。我认为它很容易出错，因为我必须`handles`时刻注意存储和更新。以这种方式处理全局变量对我来说是相当不自然的。使用*appdata*更糟糕。

是否可以将类用作 GUI 的代码？所有回调都是方法，因此它们将`obj`作为参数接收，我可以将全局变量存储在类属性中。这在我看来要清楚得多。

这只是一个想法，可能根本不可能......但是如果有更好的实践如何在 Matlab GUI 中处理全局变量，那么请提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T05:31:57.157

[使用 MATLAB 类](http://www.mathworks.com/matlabcentral/fileexchange/33816-example-using-a-matlab-class-to-control-a-gui)从 MATLAB File Exchange 控制 GUI 的示例。

# c#-4.0 - .NET 4.0 中要求使用代码合同对输入参数集合进行排序的最有效方法是什么？

> ID：11595041
> 
> 赞同：-1
> 
> 时间：2012-07-21T18:59:31.010
> 
> 标签：c#-4.0, .net-4.0, static-analysis, code-contracts

如何实现输入参数排序的前置条件执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:56:44.550

一些代码将帮助我们所有人帮助您。

我会假设你有一个沿着这条线的方法..

```
public void MyMethod(params string[] list) {...} 
```

并且您想使用代码契约来确保只会使用排序列表调用此方法。您是否为身体尝试过以下类似的方法？

```
Contract.Requires(list.OrderBy(s => s).SequenceEquals(list)); 
```

# python - Python RegEx：提取链接

> ID：11595048
> 
> 赞同：0
> 
> 时间：2012-07-21T19:00:59.320
> 
> 标签：python, regex, string

我有这样的：

```
javascript:ColdFusion.Window.show('theformats');ColdFusion.navigate('exportformats.cfm?id=1900067&expformat=bibtex','theformats'); 
```

让我们把它分成两部分：

1) 'exportformats.cfm?id=1900067&expformat=bibtex' 2) 剩下的，左右两边

鉴于 2) 永远不会改变，在 Python 中获得 1) 的最佳方法是什么？

到目前为止，我已经尝试在字符串中“查找” [ColdFusion.navigate('] 并从那里切片直到 [','] 但我真的很想学习如何为它编写最好的 RegEx 并在 Python 中这样做， 请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:08:42.730

你不需要正则表达式。通常，当遇到配对符号时，您可以执行以下操作：

```
mystr = "javascript:ColdFusion.Window.show('theformats');ColdFusion.navigate('exportformats.cfm?id=1900067&expformat=bibtex','theformats');"
mystr.split("'")[3] # Returns exportformats.cfm?id=1900067&expformat=bibtex 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:12:16.783

```
>>> import re
>>> sample = "javascript:ColdFusion.Window.show('theformats');ColdFusion.navigate('exportformats.cfm?id=1900067&expformat=bibtex','theformats');"
>>> regex = r"javascript:ColdFusion\.Window\.show\('theformats'\);ColdFusion.navigate\('([^']+)','theformats'\);"
>>> print re.match(regex, sample).group(1)
'exportformats.cfm?id=1900067&expformat=bibtex' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T19:18:41.247

我同意 arxanas 的回答，但如果您`1)`可能在其中包含单引号或其他字符：

```
str = "javascript:ColdFusion.Window.show('theformats');ColdFusion.navigate('exportformats.cfm?id=1900067'&expformat=bibtex','theformats');"
str = str.split("javascript:ColdFusion.Window.show('theformats');ColdFusion.navigate('")[1].split("','theformats');")[0] 
```

[http://codepad.org/lAk5d6ZV](http://codepad.org/lAk5d6ZV)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T19:10:37.363

我相信你在追求：

```
re.search(r"ColdFusion.navigate\('(.*?)'", string).group(1) 
```

或者对于之前和之后：

```
m = re.match(r"(.*?)ColdFusion.navigate\('(.*?)'(.*)", string)
# m.group(1) == before, m.group(2) = url, m.group(3) = after 
```

# css - 为什么我的菜单项在 iPad 上很难点击？

> ID：11595051
> 
> 赞同：0
> 
> 时间：2012-07-21T19:01:20.613
> 
> 标签：css, ipad, menu

如果您尝试使用 iPad 在我的网站[http://goo.gl/Pluy2](http://goo.gl/Pluy2)上导航，您会注意到水平菜单的反应不太好。在发生某些事情之前，您需要按几次每个菜单项。

你知道为什么网站在 iPad 上会有这样的反应吗？它可以通过CSS修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:18:53.803

我不知道这是否是问题所在，但它可能是点击事件而不是点击事件。为了解决这个问题，我认为你可以这样做

```
$('a').click(function(e) {
    e.preventDefault();
    $(this).bind('tap');
}); 
```

或一些变化，因为我不知道这是否有效。基本上，jQuery 点击事件是为移动浏览器和人类手指设计的。它可能会也可能不会解决问题，但值得一试。

可能也有 JS 解决方案，但我最喜欢 jQuery，所以如果您不在您的网站上使用 jQuery，您可能会寻找替代方法来挖掘。

# svn - 在 Subversion 中恢复已删除目录时出现“找不到文件”

> ID：11595052
> 
> 赞同：2
> 
> 时间：2012-07-21T19:01:22.160
> 
> 标签：svn

我想将我的项目回滚到更早的阶段，所以我尝试了这个：

```
svn rm -m "clear out mistakes rolling back" ^/MyProject/trunk
svn copy -m "roll back" -r 165 ^/MyProject/trunk ^/MyProject/trunk 
```

但我不断收到错误“找不到文件：修订版 265，路径'/MyProject/trunk'”。265 是 HEAD，但我不知道为什么它会在现有修订版中寻找目标目录，而不是简单地创建它。

显然问题出在 ^ 符号上，因为使用完整的 URL 可以正常工作：

```
svn copy -m "roll back" <full URL>/MyProject/trunk@165 <full URL>/MyProject/trunk 
```

但我最近使用 ^ 符号通过类似的复制操作创建了一个分支。（客户端是命令行 svn 1.6.17。）那么，为什么它在这种情况下不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:22:05.660

我认为问题在于“-r”和“@rev”：它们具有不同的含义。

`-r rev <path>`--- 有效修订 --- 表示 @HEAD 处于修订“rev”时的状态（例如，如果@HEAD 不存在，则命令失败；如果它是从修订 > rev 中的某个路径 2 替换/复制的，则状态是 path2@rev)

`path@rev`---peg revision --- 表示路径的状态正好在版本 rev （那么路径是否存在于 HEAD 无关紧要，即使 path@HEAD 被 path2 替换，状态也是 path@rev）。

在此处查看更多信息[http://svnbook.red-bean.com/en/1.6/svn.advanced.pegrevs.html](http://svnbook.red-bean.com/en/1.6/svn.advanced.pegrevs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T05:56:44.680

您将不得不删除该文件并添加一个具有新名称的新文件（即使名称中的单个字符更改也可以）。然后会在存储库中更新。

# objective-c - 试图从一个 Viewcontroller 中的 UILabel 获取 NSString 以放置在另一个 Viewcontroller 的 UITextView 中

> ID：11595053
> 
> 赞同：0
> 
> 时间：2012-07-21T19:01:22.080
> 
> 标签：objective-c, ios, uiviewcontroller, uilabel, uitextview

我有一个带有两个视图控制器的应用程序，我想在 VC2 内部的 UITextView 中显示来自 VC1 中的 UILabel 的文本。

我已经能够在 VC2 的 viewDidLoad 中从 VC1 访问 UILabel，但实际文本没有出现。

在 VC2 中我创建了一个 VC1 对象并且可以访问 VC1。这是 VC2 viewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.textView.text = vc1Controller.label.text;
} 
```

但是当我运行应用程序并出现 VC2 时，UITextView 中什么也没有出现。我确实已经连接了它，并且可以通过执行 NSLog(@"Yes"); 来显示文本；例如在上述方法中。

当我做一个 NSLog(@”%@”, vc1Controller.label.text); 我在输出中得到 NULL。

我需要创建自定义吸气剂吗？任何建议表示赞赏。我对所有编程都比较陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:04:46.617

在行中：

```
self.textView.text = [vc1Controller self.label.text]; 
```

您正在使用`self`关键字 in `[vc1Controller self.label.text]`，但这将引用当前视图控制器（视图控制器 2）中不存在的 UILabel。将 vc1Controller 中的标签设为属性，然后使用：

```
vc1Controller.label.text; 
```

访问其文本值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:21:20.167

这是从视图传递 NSString 的方式：

第一视角：

```
@interface ViewController : UIViewController{
IBOutlet UILabel *firstLbl;
NSString *firstString;
}

-(IBAction)labelTouched:(id)sender;

@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

firstString = @"I'm the first labels text";
firstLbl.text = firstString;

}

-(IBAction)labelTouched:(id)sender{

ViewController2 *view2 = [[ViewController2 alloc] init];
view2.selectedFirstLabelString = firstString;
[self presentModalViewController:view2 animated:YES];
[view2 release];
} 
```

第二视图：

```
@interface ViewController2 : UIViewController{
IBOutlet UILabel *secondLbl;
}
@property (nonatomic, retain)NSString *selectedFirstLabelString;

-(IBAction)done:(id)sender;
@end

@implementation ViewController2
@synthesize selectedFirstLabelString;

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.

secondLbl.text = selectedFirstLabelString;
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T02:50:12.190

当你在 VC2 中创建一个 VC1 对象时，你显然不是指推送 VC2 的 VC1。

您的 vc2 正在尝试从新创建的 vc1 中读取标签值，而您实际上想从推送 VC2 的 VC1 中读取值。

有几种方法可以让您的代码正常工作：

1）访问 parentViewController（如果您将 vc2 呈现为模态）

在 VC2 中，你可以引用你的父控制器：

VC1* vc = (VC1 *)self.parentViewController; VC2.textView.text = vc.label.text;

2）从navigationcontroller堆栈访问vc1： [如何访问UINavigationController中的堆栈](https://stackoverflow.com/questions/6498017/how-to-acess-the-stack-in-uinavigationcontroller)这篇文章有它的全部

3）使用委托模式。 [自定义委托](https://stackoverflow.com/questions/5675711/custom-delegate)这一个拥有一切！

希望您觉得这个有帮助。

# python - 检查 `urllib.urlretrieve(url, file_name)` 完成状态

> ID：11595054
> 
> 赞同：4
> 
> 时间：2012-07-21T19:01:29.140
> 
> 标签：python, urllib

`urllib.urlretrieve(url, file_name)`在允许我的程序前进到下一条语句之前，如何检查是否已完成？

以下面的代码片段为例：

```
import traceback
import sys
import Image
from urllib import urlretrieve

try:
        print "Downloading gif....."
        urlretrieve(imgUrl, "tides.gif")
        # Allow time for image to download/save:
        time.sleep(5)
        print "Gif Downloaded."
    except:
        print "Failed to Download new GIF"
        raw_input('Press Enter to exit...')
        sys.exit()

    try:
        print "Converting GIF to JPG...."
        Image.open("tides.gif").convert('RGB').save("tides.jpg")
        print "Image Converted"
    except Exception, e:
        print "Conversion FAIL:", sys.exc_info()[0]
        traceback.print_exc()
        pass 
```

当通过下载 'tides.gif'`urlretrieve(imgUrl, "tides.gif")`花费的时间比`time.sleep(seconds)`导致空文件或不完整文件的时间长时，`Image.open("tides.gif")`会引发一个`IOError`（由于潮汐.gif 文件大小为 0 kB）。

如何检查 的状态`urlretrieve(imgUrl, "tides.gif")`，让我的程序只有在语句成功完成后才能前进？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T19:21:54.193

Requests 比 urllib 更好，但您应该能够这样做以同步下载文件：

```
import urllib
f = urllib.urlopen(imgUrl)
with open("tides.gif", "wb") as imgFile:
    imgFile.write(f.read())
# you won't get to this print until you've downloaded
# all of the image at imgUrl or an exception is raised
print "Got it!" 
```

这样做的缺点是它需要将整个文件缓冲在内存中，因此如果您一次下载大量图像，您最终可能会使用大量内存。这不太可能，但仍然值得知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T19:13:22.963

我会使用来自[http://docs.python-requests.org/en/latest/index.html](http://docs.python-requests.org/en/latest/index.html)的 python 请求，而不是普通的 urllib2。requests 默认情况下是同步的，因此如果不先获取图像，它就不会进入下一行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:09:31.590

**我在这里发现了一个类似的问题：** [为什么“raise IOError("cannot identify image file")" 只显示部分时间？](https://stackoverflow.com/questions/11593158/why-is-raise-ioerrorcannot-identify-image-fileshowing-up-only-part-of-the)

更具体地说，请查看问题的答案。用户指向其他几个线程，这些线程准确地解释了如何以多种方式解决问题。您可能感兴趣的第一个包括进度条显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-04T21:35:29.087

所选答案不适用于大文件。这是正确的解决方案：

```
import sys
import time
import urllib

def reporthook(count, block_size, total_size):
    if int(count * block_size * 100 / total_size) == 100:
        print 'Download completed!'

def save(url, filename):
    urllib.urlretrieve(url, filename, reporthook) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-20T16:17:49.020

你可以试试这个：

```
import time

# ----------------------------------------------------
# Wait until the end of the download
# ----------------------------------------------------

valid=0
while valid==0:
    try:
        with open("tides.gif"):valid=1
    except IOError:
        time.sleep(1)

print "Got it !"

# ----------------------------------------------------
# //////////////////////////////////////////////////
# ---------------------------------------------------- 
```

# iphone - CocoaTouch - 如何从 SQL 问题中删除条目

> ID：11595059
> 
> 赞同：0
> 
> 时间：2012-07-21T19:01:56.603
> 
> 标签：iphone, sql, cocoa-touch, sqlite

我对 SQL 语句有疑问。我有一个 UITableView ，当用户选择一个项目时，他们会得到一个选项列表。删除条目目前正在返回：

`2012-07-21 19:54:08.025 appName[25029:f803] *** Assertion failure in -[listSavedItemsViewController deleteEntryAtLocation:withField1:field1Value:andField2:field2Value:andField3:field3Value:andField4:field4Value:andField5:field5Value:andField6:field6Value:andField7:field7Value:andField8:field8Value:andField9:field9Value:andField10:field10Value:], /Users/Richard/Dropbox/**iOS Development**/App Development/turnAround/listSavedItemsViewController.m:133 2012-07-21 19:54:08.026 appName[25029:f803] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Error updating table.' *** First throw call stack: (0x159e022 0x172fcd6 0x1546a48 0xa762cb 0x7dbf 0x79fa 0x4b93f1 0x159fe99 0xe214e 0xe20e6 0x188ade 0x188fa7 0x188266 0x1073c0 0x1075e6 0xeddc4 0xe1634 0x1488ef5 0x1572195 0x14d6ff2 0x14d58da 0x14d4d84 0x14d4c9b 0x14877d8 0x148788a 0xdf626 0x2962 0x28d5) terminate called throwing an exception(lldb)`

我使用的代码类似于 INSERTION 代码，但显然带有 DELETE 语句：

```
NSArray *strSplit = [cellText componentsSeparatedByString:@":"];
NSString *selectedOrderReference = [strSplit objectAtIndex:2];

NSString *sqlStatement = [NSString stringWithFormat:@"DELETE FROM '%@' WHERE '%@ = '%@')", turnAround, orderRef, selectedOrderReference];
NSLog(@"Clean: %@", sqlStatement);
char *err;
if (sqlite3_exec(turnAroundDB, [sqlStatement UTF8String], NULL, NULL, &err) != SQLITE_OK) {
    sqlite3_close(turnAroundDB);
    NSAssert(0, @"Error updating table.");
} else {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Deleted" 
                                                    message:@"Your entry has been successful deleted"
                                                   delegate:self 
                                          cancelButtonTitle:@"Done"
                                          otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:57:28.997

我认为您在查询中缺少单引号：

```
[NSString stringWithFormat:@"DELETE FROM '%@' WHERE '%@ = '%@')", turnAround, orderRef, selectedOrderReference]; 
```

应该

```
[NSString stringWithFormat:@"DELETE FROM '%@' WHERE '%@' = '%@')", turnAround, orderRef, selectedOrderReference]; 
```

您可能还希望在您的断言中更具描述性（例如添加查询或 sqlite 返回的错误），这样这样的事情可能会更加明显。

# postgresql - Nginx 配置中的 JSON

> ID：11595060
> 
> 赞同：0
> 
> 时间：2012-07-21T19:02:11.330
> 
> 标签：postgresql, nginx

`ngx_postgres`可以使用和从 PostgreSQL 返回 JSON `ngx_rds_json`。是否可以将 JSON 插入 PostgreSQL（无需外部脚本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-31T02:51:27.440

尝试实验模块[ngx_pgcopy](https://github.com/AntonRiab/ngx_pgcopy)。[您可以在slim_middle_samples](https://github.com/AntonRiab/slim_middle_samples)中找到如何操作的示例。您需要示例 slim_middle_samples/sql/1.import.export.sql 和 nginx.conf/import.export.nginx.conf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:51:45.047

这个问题的答案很大程度上取决于你想要做什么。这是一个非常笼统的问题，根本不清楚要问什么，但在这种情况下，我会回答两种方法，以便其他人在看到它时做出决定。

**在 PostgreSQL 中存储 JSON**

在 PostgreSQL 9.2 中，PostgreSQL 带有原生 JSON 类型。这已由 Andrew Dunstan 向后移植到 9.1，可在[https://bitbucket.org/adunstan/json_91获得](https://bitbucket.org/adunstan/json_91)

对于早期版本，您唯一的选择是使用文本字段。JSON 类型的功能不是很全。它进行验证，仅此而已。至少开箱即用，您无法轻松地从 JSON 转换为其他类型。如果您所做的只是存储自由格式的数据（类似 Mongo），这对您来说可能已经足够了，但您可能需要`plv8js`安装它来做任何特别有用的事情（例如，基于是否索引 json 字段）给定的属性存在，如果存在，它的值是多少）。

**在 PostgreSQL 中操作 JSON**

PostgreSQL 没有开箱即用的工具来操作 JSON。然而，PostgreSQL 也是世界上最可编程的 RDBMS 之一，所以一切皆有可能。

最简单的选择可能是在后端数据库中安装`plv8js`和编写在 javascript 中操作 json 的函数。然后，您可以使用触发器等隐藏视图背后的逻辑，或使用存储过程接口。这与其说是外部脚本，不如说是您在数据库中编写的数据表示功能。

如果 Javascript 不是您的菜，您也可以使用`plperlu`或编写函数。`plpython`

# .net - .NET 值类型和引用类型

> ID：11595063
> 
> 赞同：0
> 
> 时间：2012-07-21T19:02:27.300
> 
> 标签：.net

“值类型是堆栈分配的，而引用类型存在于托管堆上。”

如果我在类的方法中有一个局部变量（如 int a=2;），它分配在哪里？

在我们的示例中，值类型包含在引用类型中。由于引用存在于托管堆中，我假设这里的值类型（int a）也在托管堆中而不是堆栈中。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:39:29.020

主要是 JIT 编译器确定局部变量的存储位置。这是一个繁重的架构实现细节，让我们将其限制为 x86 抖动。它做出的常见选择：

*   无处。在您给出的非常简单的示例中会发生这种情况，抖动优化器可以看到局部变量已初始化但未在任何地方使用并将消除它。

*   在 CPU 寄存器中。这是一个非常重要的优化，没有存储位置更快。至少在方法体执行的部分时间里，变量几乎总是存在于寄存器中，这是必要的，因为许多 cpu 指令要求操作数首先存在于寄存器中。抖动只会在变量用完寄存器（x86没有很多）并且需要重新使用寄存器进行另一个操作时才会将变量溢出到堆栈帧

*   在方法的堆栈帧中。每个人都认为的传统方式。变量存储在 EBP 寄存器的固定偏移处。访问这些变量非常快，不如将它们存储在寄存器中时那么快。

然而，我还必须讨论编译器影响在语言中具有本地范围的变量的存储位置的方式（感谢 Marc）：

*   在垃圾收集堆上。这是由编译器在重写代码以实现迭代器、捕获匿名方法或 lambda 表达式的变量或实现用*async*关键字标记的方法时完成的。局部变量成为隐藏类的字段，并正常分配在堆上。

*   在加载程序堆中。对 C# 程序员来说很奇怪，但由带有 Static 关键字的 VB.NET 编译器支持。由编译器实现的功能，它的作用类似于 C# 静态字段，但范围仅限于方法主体。使用大量自动生成的代码来确保它被正确初始化，即使是从线程调用时也是如此。

它涵盖了变量的几乎所有可能的存储位置:) 尽管我在提出 [ThreadStatic] 示例时遇到了麻烦。这可能是信息过载的一种情况，最常见的方法集中在第 2 条和第 3 条。当然还有第 3 条有效地思考托管代码的工作方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T19:10:36.677

首先，应该注意的是，您帖子的第一行具有误导性、不完整和不准确。值类型几乎可以在任何地方。

> 在我们的示例中，值类型包含在引用类型中。

这里的“包含在其中”具有误导性。您将其与此混为一谈的“包含在其中”是“实例字段”。这不适用于方法局部变量。方法局部变量，作为实现细节，存在于堆栈中......除非它们不存在！其中包括迭代器块和捕获的变量。由于您没有提到这些事情，答案可能是“在堆栈上”。

我还应该注意，即使对于*引用类型*的方法局部变量，**变量**（即引用，而不是对象）仍然存在于堆栈中（除非它不存在，完全相同的规则）。

请注意，我将讨论限制**在 IL 术语**中，即*C# 编译器*的作用。Hans 说 JIT 可以在看到 IL 时为所欲为，这是非常正确的。

# jsf - JSF 2.0 -- 跨集群共享或 Prime OmniFaces 组合资源缓存

> ID：11595078
> 
> 赞同：2
> 
> 时间：2012-07-21T19:04:24.737
> 
> 标签：jsf, jsf-2, resources, cluster-computing, omnifaces

JSF 中有没有一种方法可以跨集群使用组合资源？基本上我正在寻找一个解决方案，其中集群中引入资源的第一台服务器可以将其同步到其他服务器的资源缓存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:45:01.937

这是不可能的，因为组合资源的唯一 ID 是基于 MD5 生成的，MD5 是一种不可逆的单向加密。因此，如果资源是在服务器 X 上创建并在服务器 Y 上请求的，那么服务器 Y 将无法根据唯一 ID 从缓存中解析资源。

从 OmniFaces 1.2 开始，通过将 MD5 方法替换为 ZLIB 和 Base64 的组合来解决这个问题，这使得它变得短且可逆。服务器 Y 现在将能够根据 ID 自行解析资源，然后将其存储在缓存中。

顺便说一句，Base64 编码方法还有一个额外的步骤，即用 , 替换`/`,`+`和`=`字符`~`，`-`并`_`使其成为[URL 安全的](http://en.wikipedia.org/wiki/Percent-encoding#Types_of_URI_characters)，这样它就可以通过 URL 传递任何可能与平台无关的 URL 编码麻烦。

# java - Java Swing 打开一个新按钮，其中包含另一个文件中的组件

> ID：11595080
> 
> 赞同：0
> 
> 时间：2012-07-21T19:04:49.443
> 
> 标签：java, eclipse, swing

我为基本的 Java Swing 窗口编写了代码，现在我想在另一个窗口中运行游戏。窗口基本上是暂时的，直到用户点击按钮。这是第一个窗口的代码：

```
 import javax.swing.*;

public class Main extends Game {
    public static int height = 300;
    public static int width = 200;
    public String x = "X", y = "Y", player1, player2;
    public String[] grid;

    public static void main(String args[]) {
/*--------------------------- DECLARATIONS ----------------------------*/
        JFrame sudwin = new JFrame("Tic tac toe");
        JLabel label1 = new JLabel("<html><b>Welcome to Tic Tac Toe!</b></html>");  
        JLabel label2 = new JLabel("Player 1:");
        JLabel label3 = new JLabel("Player 2:");
        JLabel label4 = new JLabel("<html>Enter your names in the boxes, then </br>" + "click the start button to begin!</html>");
        JLabel label5 = new JLabel("Version 0.1");
        JTextField np1 = new JTextField();
        JTextField np2 = new JTextField();
        JButton btstart = new JButton("Start");

        sudwin.getContentPane().add(label1);
        sudwin.getContentPane().add(label2);
        sudwin.getContentPane().add(label3);
        sudwin.getContentPane().add(label4);
        sudwin.getContentPane().add(np1);
        sudwin.getContentPane().add(np2);
        sudwin.getContentPane().add(btstart);
        sudwin.getContentPane().add(label5);
/*--------------------------- METHODS ---------------------------------*/
        sudwin.setSize(width, height);
        sudwin.setVisible(true);
        sudwin.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        sudwin.setLocationRelativeTo(null);
        sudwin.getContentPane().setLayout(null);

        label1.setBounds(26, 11, 156, 14);
        label2.setBounds(10, 102, 100, 10);
        label3.setBounds(10, 144, 100, 10);
        label4.setBounds(10, 39, 172, 52);
        label5.setBounds(10, 241, 100, 14);
        np1.setBounds(10, 113, 111, 20);
        np2.setBounds(10, 156, 111, 20);
        btstart.setBounds(50, 202, 100, 28);

        btstart.addActionListener(new act1());
    }
/*--------------------------- EVENT HANDLERS ----------------------------*/
    static class act1 implements ActionListener {
        public void actionPerformed(ActionEvent e) {

        }
    }
} 
```

基本上，我有 2 个 java 文件：Main.java 和 Game.java

Main.java 有上面的代码，可以完美执行，Game.Java 有 Jlabels 和 JFrame，但默认情况下它是不可见的。如何让 Main.java 识别来自 Game.java 的所有声明并在单击按钮时使其可见？

我在 Windows XP 上，使用 Eclipse。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:17:07.760

您不希望 Main.java 可以使用 Game.java 的所有字段，但您想要的是一个可以调用的方法，例如`public void setGameVisible()`. 然后在您的 Main.java 中您将有一个 Game.java 的实例，`Game game = new Game()`然后您可以`game.setGameVisible()`在单击按钮时执行此操作。在这种方法中，您将拥有使 Game.java 组件可见的所有逻辑。

通常，您不想公开字段。在[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)的一般概念中，您希望通过方法使一个类中的字段可用于其他类。例如

```
public class Main
{
  protected String gameName = "Super Awesome Game";

  public String getName()
  {
    return gameName;
  }
} 
```

这样，其他人就无法更改 String gameName，如果它是公开的，他们将能够做到这一点。保留字段`protected`允许 Main.java 的子类仍然可以访问这些字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T20:28:10.593

根据马特给你的建议，在你的动作监听器中，你只是想破坏新类并显示窗口。

```
static class act1 implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        OtherClass other = new OtherClass();
        other.setVisible(); // assuming we are a window of some type
    }
} 
```

如果类在同一个包中，则不需要先导入，否则不要忘记先导入类

# html - HTML/CSS 中的按钮

> ID：11595086
> 
> 赞同：-4
> 
> 时间：2012-07-21T19:05:06.697
> 
> 标签：html, css

我有以下按钮：

![在此处输入图像描述](../Images/2d74a7483bb676928a1f8b92066df460.png)

我需要使用 HTML/CSS3 来完成。我已经尝试了很多东西，比如径向渐变。

我试过 -webkit-gradient(linear.. 和 -webkit-gradient(radial...

任何帮助或想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:28:37.423

[这是一个尝试：](http://jsfiddle.net/sYuaU/)

```
div {
    background-image:-moz-radial-gradient(50% 100%, yellow, #FFCC00, yellow);
    background-image:-webkit-radial-gradient(50% 100%, yellow, #FFCC00, yellow);
    background-image: radial-gradient(50% 100%, yellow, #FFCC00, yellow);
    height:47px;
    width:202px;
    border-radius:5px;
    text-align:center;
    line-height:47px;
    font-weight:bold;
    font-family: sans-serif;
    color:#AA8100;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:00:58.460

径向渐变仅适用于圆形或椭圆形，因此如果没有图像或某些 css 画布，您将无法获得该样式...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-21T19:28:27.313

使用 CSS，我能得到的最接近的只是一个线性渐变，从上到下。底部的一点点光线很难用 CSS 做。您可能需要考虑一个图像，如果它不是很大，不会对性能产生太大影响。

您可能希望查看服务器端编码的性能，因为这是大多数时候的问题。如果是因为您需要加载大量图像，您可以获取站点上的所有图像并将其放在一个文件中，并且始终获取该文件但具有不同的背景位置。StackOverflow 也使用这个。这种技术被称为使用`sprites`

关于它的作用和工作原理的指南可以在这里找到：[CSS Tricks: Sprites](http://css-tricks.com/css-sprites/)。

这是我得到的最接近的：http: [//jsfiddle.net/DU3QJ/](http://jsfiddle.net/DU3QJ/)

# php - 将数组作为 json 发送到 php 脚本：返回空数组

> ID：11595089
> 
> 赞同：0
> 
> 时间：2012-07-21T19:06:08.390
> 
> 标签：php, javascript, jquery

我正在尝试将表单输入作为数组发送到 php 脚本

```
function submit_form(){
    var arr  =  [];
    var key, val ;
    $('#form input').each(function(){

        key = $(this).attr('id');
        val = $(this).val();
        arr[key] = val;

    })
    alert(arr['username']); // check to see if array is not empty

    var jsondata =  JSON.stringify(arr); 

    $.post(base_url+'profile/edit_profile/<?php echo $profile_username; ?>' , {data : jsondata }, function(){
    })
} 
```

在 php 脚本上

```
$data =  json_decode($_post['data']);
var_dump($data);
exit; 
```

这是结果

```
array (size=0)
  empty 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:11:23.043

当您应该使用对象时，您正在使用数组。

```
var obj = {};
var key, val ;
$('#form input').each(function(){

    key = $(this).attr('id');
    val = $(this).val();
    obj[key] = val;

}); 
```

JSON 方法将忽略数组的非数字属性。

* * *

虽然不是使用`id`属性，而是使用`name`，然后使用`.serialize()`.

```
var data = $('#form input').serialize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:12:45.587

这需要首先进行基本调试。在解码数据之前，将其转储以确保数据正确：

```
$data =  $this->input->post('data');
var_dump($data);
$array = json_decode($data);
var_dump($array);
exit; 
```

教训：

*   一步一步做。越愚蠢越好。
*   在每一步之前和之后，验证数据。

# javascript - Javascript - 在不同的子域上调用网络服务？

> ID：11595092
> 
> 赞同：0
> 
> 时间：2012-07-21T19:06:38.470
> 
> 标签：javascript, web-services

经过一番研究，据我了解，您不能在外部域上的 javascript 中调用 Web 服务。
子域呢？我的网站在[http://example.com上，我在](http://example.com)[http://services.example.com](http://services.example.com)上有一些网络服务。

这种情况，我可以打电话给他们吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:34:48.743

通常您不能在其他域（不同的域名或端口）中调用 Web 服务。

但是，如果您控制 Web 服务，则无法使用 JSONP 对其进行包装。从技术上讲，每次调用都会在您的页面中嵌入一个脚本，从而调用页面中已经定义的函数，并将从 web 服务调用返回的数据传递给它。

大多数库都支持这种跨域通信，包括 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:29:14.600

我发现在这些情况下（我可以控制两台服务器）有用的是发布到同一域上的文件，然后再发布到另一个域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:17:57.497

这是可能的，但你需要做一些工作。查看 CORS 规范，这里有一些链接可以通过：

[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

[https://developer.mozilla.org/en/http_access_control](https://developer.mozilla.org/en/http_access_control)

特别寻找Access-Control-Allow-Origin。这就是你想要的方式。

# javascript - jScrollPane 和 Facebook 评论

> ID：11595094
> 
> 赞同：0
> 
> 时间：2012-07-21T19:07:06.317
> 
> 标签：javascript, facebook, jscrollpane

我正在建立一个网站，我想显示 facebook 评论并使用 Jscrollpane，但它不起作用。我不知道我做错了什么，这应该很容易，因为我不想要任何花哨的效果，只需替换丑陋的原生滚动条。而已。

评论出现了，但根本没有滚动条。

提前感谢大家的帮助。

```
 <div id="fb-root">/div>  

   <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/es_LA/all.js#xfbml=1&appId=";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script> 
```

//这是facebook评论的div

```
<div class="fb-comments" data-href="" data-num-posts="3" data-width="390" data-colorscheme="dark" style="height: 400px; overflow:auto;"></div> 
```

//JScrollpane 的脚本

```
 <script type="text/javascript">
                    $(function(){
                        $('.fb-comments').jScrollPane({
                            showArrows: true,
                            maintainPosition: false
                        });
                    });
                </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:34:50.773

### 为此，您需要`autoReinitialise`将`true`!

```
$('.fb-comments').jScrollPane({
    showArrows: true,
    maintainPosition: false,
    autoReinitialise: true
}); 
```

### 解释：

> 初始初始化后是否`jScrollPane`应定期自动重新初始化。这可以在滚动窗格（或周围元素）的内容大小发生变化时提供帮助。但是，它确实涉及在计时器上运行 javascript 函数的开销，因此建议仅在必要时激活。

# c++ - 我想我已经覆盖了一个虚拟方法，但我仍然得到：“X 必须实现继承的纯虚拟方法 Y”

> ID：11595096
> 
> 赞同：7
> 
> 时间：2012-07-21T19:07:36.390
> 
> 标签：c++, eclipse, inheritance, gcc, virtual

我正在尝试在 C++ 中为我正在编写的游戏实现一个接口，但我运行时出错。

这是我创建的接口及其子类：

```
//Attack.h
//defines a set of values associated with all attacks
//and an interface for all attacks
typedef unsigned const int attack_type;
typedef unsigned const int p_attack_type;
//defines the attack types
static const attack_type NORMAL = 0;
static const attack_type ADDER = 1;
static const attack_type MULTIPLIER = 2;
static const attack_type AREA_OF_EFFECT = 3;
static const attack_type DAMAGE_OVER_TIME = 4;
static const attack_type STATUS = 5;

//String representation of the names of attack types
static std::string attack_types [] = {"Normal","Adder","Multiplier","Area-Of-Effect","Damage-Over-Time","Status"};

class Attack
{
    protected:
        std::string attack_name;//the name of this attack
        attack_type type;//the type of attack this represents
        int cool_down_turns;//represents the number of turns this ability cannot be used after being used
        bool causesGlobalCooldown;//does this attack cause ALL abilities to cooldown -- during combat should force cooldown on everything
        bool on_cool_down;

    public:
        Attack(std::string name, attack_type, int cooldown_t, bool causesGlobalCooldown = false)
        {
            this->attack_name = name;
            this->type = attack_type;
            this->causesGlobalCooldown = causesGlobalCooldown;//whether or not ALL abilities need to cooldown
            this->cool_down_turns = cooldown_t;//amount of turns that cooldown occurs
            this->on_cool_down = false;//whether or not this attack is on cooldown
        }

        //the main method called to perform this attack
        //calculate damage, calculate cooldown -- for spells calculate cost
        //return the amount of damage this attack does
        virtual int do_attack(int modifier, int roll)
        {
            //calculate damage
            int damage = calculate_damage(modifier,roll);
            //check cooldown
            if(this->cool_down_turns>0)
            {
                this->cooldown(true);
            }
            return damage;
        }

        //defined by sub classes -- useful to tell you how much damage the attack is going to do
        virtual int calculate_damage(int modifier, int roll) = 0;

        //**standard method definitions**//

        //get the attack name
        std::string get_attack_name() const
        {
            return this->attack_name;
        }

        //get the attack type
        attack_type get_attack_type() const
        {
            return this->type;
        }

        //get the attack type name of this attack
        std::string get_attack_type_name() const
        {
            return attack_types[this->type];
        }

        //check the cooldown status of this attack
        bool cooldown() const
        {
            return on_cool_down;
        }

        //set the cooldown status of this attack
        void cooldown(bool set)
        {
            this->on_cool_down = set;
        }

}; 
```

这是子类：

```
/*
 * Normal.cpp
 *
 *  Created on: Jul 15, 2012
 *      Author: christian
 *      Standard Definition of a Normal attack
 */
#include "Attack.h"

class Normal : public Attack
{
    public:

        Normal(std::string name)
        {
            Attack(name,NORMAL);
        }

        int calculate_damage(int modifier, int roll) const
        {
            return roll + modifier;
        }
}; 
```

编译器返回的错误是：“攻击”类型必须实现继承的纯虚方法“攻击::calculate_damage”

有谁知道这个的正确语法？我的继承设置是否正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T19:10:19.193

派生类中的`const`使派生类的方法签名与基类中的虚拟方法不同。就编译器而言，您已经在类中**重载**了calculate_damage `Normal`，给它一个`const`和`non-const`版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T19:11:02.200

您可能正在寻找

```
Normal(std::string name)
  : Attack(name,NORMAL)
{} 
```

正如您可能想要的那样，这会调用基本构造函数。现在的代码创建了一个临时的未命名类型变量`Attack`，它是一个抽象类，它是触发错误的原因。

此外，基本功能`calculate_damage`不是`const`.

# c# - C# 数据验证设计模式

> ID：11595097
> 
> 赞同：3
> 
> 时间：2012-07-21T19:07:36.103
> 
> 标签：c#, validation, design-patterns

我的 C# 项目中有一堆数据类。在处理这些类的对象之前，我需要执行验证。这些类没有公共接口。我正在尝试制定某种设计模式，我可以在其中指定需要在类的每个字段上执行的验证；没有一组 if else 类型条件。

我遇到了规范模式，但这似乎不太令人信服。

我可以使用任何现有的模式/C# 方法吗？

[更新：我最终使用了注释和规范模式的组合。基本验证可以通过注释完成。如果发生任何无法通过注释验证的特殊情况，则这些验证将通过规范编写]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:14:41.340

您可能只想使用 Attributes 来指定您的验证规则。这是存在所有基本验证的命名空间：[ComonpentModel.DataAnnotations](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx)。如果你想变得更高级，这个 NuGet 包为你提供了许多额外的属性：[数据注释扩展](http://dataannotationsextensions.org/)。这两者都支持使用 ASP.NET 的 MVC 不显眼的验证进行客户端验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:16:41.073

除了 Milimetric 的答案，您还可以查看[Code Contracts](http://msdn.microsoft.com/en-us/library/dd264808.aspx)。从您的问题来看，它是否符合您的需求尚不清楚

> 代码契约提供了一种在代码中指定前置条件、后置条件和对象不变量的方法。前提条件是输入方法或属性时必须满足的要求。后置条件描述了方法或属性代码退出时的期望。对象不变量描述了处于良好状态的类的预期状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:50:20.490

看看[NCommon](https://github.com/riteshrao/ncommon/)库，它是围绕规范和验证的有用模式的集合。

有关更多链接和信息，另请参阅[我对这篇文章的回答](https://stackoverflow.com/questions/9655171/ddd-using-specification-pattern-for-validation/9676307#9676307)。

# java - 注释不起作用

> ID：11595100
> 
> 赞同：6
> 
> 时间：2012-07-21T19:07:53.417
> 
> 标签：java, ant, annotations

我正在研究一个注释，它的目的是强制一个类是不可变的。这里是处理器的代码：

```
@SupportedAnnotationTypes("archipel.immutability.IsImmutable")
@SupportedSourceVersion(SourceVersion.RELEASE_6)
public class IsImmutableProcessor extends AbstractProcessor {

    @Override
    public boolean process(Set<? extends TypeElement> annotations,
            RoundEnvironment roundEnv) {
        for (TypeElement type : annotations) {
            processMustBeImmutable(roundEnv, type);
        }
        return true;
    }

    private void processMustBeImmutable(RoundEnvironment env, TypeElement type) {
        for (Element element : env.getElementsAnnotatedWith(type)) {
            processClass(element);
        }
    }

    private void processClass(Element element) {
        boolean isFinal=false;

        for(Modifier modifier : element.getModifiers()) {
            if (modifier.equals(Modifier.FINAL)) {
                isFinal=true;
                break;
            }
        }

        if (!isFinal) {
            processingEnv.getMessager().printMessage(Diagnostic.Kind.ERROR, "Class "+element+" is not immutable because it is not final");
        } else {
            for (Element subElement : element.getEnclosedElements()) {
                if (subElement.getKind()==ElementKind.FIELD) {
                    isFinal=false;

                    for(Modifier modifier : subElement.getModifiers()) {
                        if (modifier.equals(Modifier.FINAL)) {
                            isFinal=true;
                            break;
                        }
                    }
                    if (!isFinal) {
                        processingEnv.getMessager().printMessage(Diagnostic.Kind.ERROR, "Field "+element+" is not immutable because it is not final");
                    } else {
                        Element superElement = subElement.getEnclosingElement();
                        // TODO
                    }
                }
            }
        }
    }

} 
```

注释本身是微不足道的，当然：

```
@Inherited
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.SOURCE)
public @interface IsImmutable {
} 
```

我用 Ant 脚本编译它：

```
<project name="immutability" basedir="." default="main">

    <property name="lib.dir" value="lib"/>

    <property name="src.dir" value="src"/>

    <property name="build.dir" value="build"/>
    <property name="classes.dir" value="${build.dir}/classes"/>
    <property name="meta.dir" value="${build.dir}/META-INF"/>
    <property name="jar.dir" value="${build.dir}/jar"/>

    <property name="processor-package"
        value="archipel.immutability" />

    <property name="processor" value="${processor-package}.IsImmutableProcessor"/>

    <path id="classpath">
        <fileset dir="${lib.dir}" includes="**/*.jar"/>
        <fileset dir="${classes.dir}"/>
    </path>

    <target name="clean">
    <delete dir="${build.dir}"/>
    </target>

    <target name="compile" description="Compiles the code.">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}" classpathref="classpath" />
    </target>

    <target name="jar" depends="compile">
        <mkdir dir="${jar.dir}"/>
        <jar destfile="${jar.dir}/${ant.project.name}.jar">
            <fileset dir="${classes.dir}"/>
            <service type="javax.annotation.processing.Processor" provider="archipel.immutability.IsImmutableProcessor"/>
        </jar>
    </target>

    <target name="main" depends="clean,jar"/>

</project> 
```

问题是，必须缺少一些东西，因为当我尝试使用结果 jar 文件提供的结果注释时，如下所示，没有任何反应：

```
@IsImmutable
public class Immut {

    private int toto;

    public int getToto() {
        return toto;
    }

    public void setToto(int toto) {
        this.toto = toto;
    }

    public final static void main(String args[]) {
        Immut truc = new Immut();
        truc.setToto(5);
        truc.setToto(6);
    }

} 
```

很明显，这个类不是最终的，并且该类应该在 Eclipse 中发出错误信号。但事实并非如此。

任何想法？

**编辑**：我用 build.xml 构建的 jar 文件似乎是正确的：它包含类文件，还有一个`META-INF/services/javax.annotation.processing.Processor`文件，其中包含`archipel.immutability.IsImmutableProcessor`. 我在我的测试项目中导入了这个 jar 文件，当我在 Immut 类中使用注解时（这只是一个粗略的测试），什么也没有发生。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T19:24:40.160

默认情况下，注释处理在 Eclipse 中是禁用的。为了启用它，您需要打开项目属性，然后 1\. Java 编译器 -> 注释处理：启用注释处理 2\. Java 编译器 -> 注释处理 -> 工厂路径：添加带有工厂的 jar

如果您需要更多信息，请查看：[eclipse 中的 AP 入门](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_apt_getting_started.htm)

**编辑：**

看看这个[教程](http://kerebus.com/2011/02/using-java-6-processors-in-eclipse/)。它详细解释了如何设置 eclipse 以使用自定义注释处理器。

重要提示：打印错误时使用此方法： `javax.annotation.processing.Messager.printMessage(Kind, CharSequence, Element)` 而不是：
`javax.annotation.processing.Messager.printMessage(Kind, CharSequence).`

第一个消息在 Problems 视图和大多数与源相关的视图中可见，而来自第二个的消息仅在 ErrorLog 视图中可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:13:10.977

可能值得使用**cglib**使您的对象不可变。因为假设您的类中有一个集合，并且集合字段是最终的。你也有这个集合的吸气剂。这是否意味着不能在课堂之外修改集合？不完全是。仅当此集合使用**Collections.unmodifiedCollection**方法包装时。或者，如果您使用的是 guava 不可变集合[http://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained](http://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained)

关键是 - 不要试图处理这只是检查字段是否是最终的 - 它不会处理所有情况。使用**cglib**代理，而不是像**spring 和 hibernate**那样

# php - Symfony 1.4 路由：来自不同类的字段

> ID：11595101
> 
> 赞同：0
> 
> 时间：2012-07-21T19:07:56.640
> 
> 标签：php, symfony1, symfony-1.4

如何使用来自不同类的字段创建和匹配路由？可能吗？是否有任何自定义路由类？

例如我有这两个类：

```
File:
  columns:
    name: { type: string(255), unique: true, notnull: true }
    ...

Link:
  columns:
    file_id: { type: bigint, notnull: true }
    ticket: { type: string(64), notnull: true }
  relations:
    File:
      local: file_id
      foreign: id
      foreignAlias: links
  ... 
```

现在假设我想创建这样的路由：`mysite.com/:ticket/:name` 如您所见，`ticket`是`Link`表`name`的字段，也是表的字段`File`。有没有办法在 symfony 1.4 中创建这样的链接？

第一个解决方案是更改`File`表的主键并将其设置为它的名称。我知道这一点，但我想知道是否有办法通过路由来处理这个问题。

我的目标是当我调用 getObject 方法时，它返回一个带有已发送票证的 Link 对象，但还应检查与已发送文件名的存在和关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:56:14.710

IIRC你可以做这样的事情：

```
my_route:
  url: /:ticket/:name
  class: sfDoctrineRoute
  param: { module: yourModule, action: yourAction }
  options: { type: object, model: Link, method: findLinkWithSendTicket } 
```

然后 symfony 应该调用`LinkTable::findLinkWithSendTicket`方法并将参数传递给它，以便您可以使用它来获取对象。

链接可能会有所帮助：

*   [sfDoctrineRoute.class.php](http://trac.symfony-project.org/browser/branches/1.4/lib/plugins/sfDoctrinePlugin/lib/routing/sfDoctrineRoute.class.php#L104)
*   [sfObjectRoute](http://www.symfony-project.org/reference/1_4/en/10-Routing#chapter_10_sfobjectroute)

# xml - 节点的 XSL 比较

> ID：11595102
> 
> 赞同：1
> 
> 时间：2012-07-21T19:08:04.963
> 
> 标签：xml, xslt

您好，我是 xml 新手，想使用 xsl 样式表比较一些值

```
`<a>
 <b>   <name>foo</name>   </b>
 <b>   <name>bar</name>   </b>
 <b>   <name>fred</name>  </b>
 <b>   <name>fred</name>  </b>
 </a>` 
```

我想编写一个样式表来检查所有 b 节点并返回具有相同值的值，因此使用上面的简单示例，我希望输出类似于：
“您的重复字符串是 fred”

我使用了一个 for each 循环来返回所有值，但是比较名称并返回重复项让我望而却步。如果可能的话，我想通过使用 while 类型循环来实现比较。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:30:35.310

**XSLT 1.0：使用键的简单解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:key name="kNameByVal" match="name" use="."/>

 <xsl:template match="/*">
  Your duplicate strings are: <xsl:text/>

  <xsl:apply-templates select=
    "b/name[generate-id() = generate-id(key('kNameByVal', .)[2])]"/>
 </xsl:template>

 <xsl:template match="name">
  <xsl:if test="position() >1">, </xsl:if>
  <xsl:value-of select="."/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:variable name="vSeq" select="data(/a/b/name)"/>

 <xsl:template match="/">
  Your duplicate strings are: <xsl:text/>
  <xsl:sequence select="$vSeq[index-of($vSeq,.)[2]]"/>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

**三、XPath 2.0 单行**

```
$vSeq[index-of($vSeq,.)[2]] 
```

这将产生给定序列中的所有值，这些值具有重复项（一组重复项中的一个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:53:46.330

基于`<xsl:key>`- 的解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:key name="kName" match="b/name" use="text()" />

  <xsl:template match="/">
    <xsl:for-each select="//b/name">
      <xsl:if test="count(key('kName', text())) &gt; 1">
        <xsl:value-of select="concat('Your duplicate is: ', text(), '&#xA;')" />
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

对于大型输入文档，这将比使用`preceding::`检查的解决方案更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T19:40:04.747

使用 while 循环是违反 XSLT 理念的，即使它可以做到。

有一些更简单的方法可以做你想做的事，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method='text' />
<xsl:template match="b">
   <xsl:if test='preceding::b/name/text()=./name/text()'>
Your duplicate is: <xsl:copy-of select='./name/text()' />
   </xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

这是在寻找节点 b，并检查前面的 b 节点是否具有相同的名称 text

# oracle - 从 csv 导入到 Oracle 时间戳

> ID：11595104
> 
> 赞同：1
> 
> 时间：2012-07-21T19:08:22.120
> 
> 标签：oracle, import, oracle11g, type-conversion

我在 csv 文件中有一个名为`created`值的列：

```
2012-04-16 14:46:42
2012-06-16 12:40:52.653000000 
```

我正在尝试使用 SQL Developer 3.1.07 将其导入 Oracle 11gR2

我将其用作格式：`RRRR-MM-DD HH24:MI:SS.FF`

我收到错误`input value not long enough for the date format`

如果我将格式更改为`RRRR-MM-DD HH24:MI:SS`我得到错误`SQL Error: ORA-01830: date format picture ends before converting entire input string`

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T20:18:57.897

你有一些日期和一些时间戳。这就是从数据完整性不佳的系统导入数据的问题。

您有两个选择：在导入之前清理数据或在导入期间清理。

有多种不同的方法可以预先清理数据。一种选择是使用支持正则表达式的文本处理器或 IDE，并进行搜索和替换以修复那些缺少小数秒的值。

导入期间最简单的清理方法是使用外部表作为中介（而不是 SQL 加载器）。外部表是高度整洁的对象，允许我们像在数据库中一样操作 OS 文件（例如 CSV）中的结构化数据。与 SQL Loader 相比，外部表的最大优势在于我们可以在 DML 语句中使用它们。 [了解更多](http://docs.oracle.com/cd/B19306_01/server.102/b14215/part_et.htm#i436567)。

为此，您需要将该列定义为 varchar2 的外部表。您还需要构建一个函数，该函数接受一个字符串并将其转换为时间戳。

```
 create or replace function fix_ts (str in varchar2)
      return timestamp
 is
      is_a_date exception;
      pragma exception_init(is_a_date, -1840);
      rv timestamp;
 begin
      begin
           rv := to_timestamp(str);
      exception
            when is_a_date then
                 rv := to_timestamp(str)||'.000000000';
      end;
      return rv;
 end; 
```

然后你可以像这样将记录插入到你的目标表中：

```
 insert into target_table
      (id, created, whatever)
 select id
         , fix_ts(created)
         , whatever
 from external_table; 
```

如果这是一次性的数据清理练习，那么您最好在 IDE 中处理数据。如果这是一个常规的数据馈送，那么构建更自主和更强大的东西是值得的。

* * *

根据您的评论，还有第三种选择：让源系统在导出过程中修复数据。这可能容易或困难，取决于许多因素；很多时候，政治问题比技术问题更难解决。

# css - 备用列（）类，甚至可能是rails中的列内容？

> ID：11595106
> 
> 赞同：0
> 
> 时间：2012-07-21T19:08:46.997
> 
> 标签：css, ruby-on-rails, ruby, cycle, html-table

在rails中我知道你可以做到

```
<tr class="<%= cycle("even", "odd") %>"> 
```

循环给定行的类。

但在这种情况下

```
<% @products.each do |p| %>
<tr class="headers">
    <td><%= p.name %></td>
    <td><%= p.idnum %></td>
    ...
</tr>
<% end %> 
```

我如何自动替换列类？

有什么办法我可以这样吗？（为了说明起见，发明了一些奇特的方法名称（'.column_names'））

```
<% @products.each do |p| %>
    <tr class="headers">
        <% products.column_names.each do |c| %>
            <td class="<%= cycle("even", "odd") %>"><%= c %></td>
        <% end %>
    </tr>
<% end %> 
```

编辑：（恰当的例子）

```
<table>
  <tr class="headers">
    <td class="even">&nbsp;</td>
    <td class="odd">Name</td>
    <td class="even">Followers</td>
    <td class="odd">Date Joined</td>
    <td class="even">Slogan</td>
    <td class="odd">Location(s)</td>
    <td class="even">Segments(s)</td>
    <td class="odd">Website</td>
  </tr>
  <tr class="body">
    <td class="even"><img src="<%= company.thumbnail_logo %>"></td>
    <td class="odd"><%= company.company_name %></td>
    <td class="even"><%= company.followers %></td>
    <td class="odd">...</td>
    ...
  </tr>
</table> 
```

这就是我目前正在写的内容，你可以看到它相当冗长。我希望减少这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T19:31:31.557

这只是为了造型目的吗？您可以使用 CSS3 来执行此操作，而无需分配类。

```
tr:nth-of-type(even){ your_css_here } 
```

或者

```
td:nth-of-type(even){ your_css_here } 
```

替换`even`为`odd`如果这是你想要的

另外，你不会使用`<th>`标题吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T21:23:17.503

您可以在同一个循环中使用多个命名循环来实现此效果。这是一个使用模型的示例，该模型使用与属性名称对应的类来`Example`打印其自己的每个属性：`<td>`

```
<% @examples.each do |example| %>
  <tr class="<%= cycle('odd', 'even', :name => 'row-cycle') %>">
    <% example.attributes.each_pair do |attribute, value| %>
      <td class="<%= cycle(*example.attribute_names, :name => 'column-cycle') %>"><%= value %></td>
    <% end %>
  </tr>
<% end %> 
```

此代码的一些示例输出：

```
<tr class="odd">
  <td class="id">1</td>
  <td class="name">Brandan</td>
  <td class="location">Raleigh</td>
  <td class="created_at">2012-07-21 21:14:45 UTC</td>
  <td class="updated_at">2012-07-21 21:14:45 UTC</td>
</tr> 
```

如果您不想打印每条记录上的所有属性，您可以调整它以满足您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:13:50.407

实际上 Rails 中有一个*循环*助手：

[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-cycle](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-cycle)

# c# - 在c#中使用读写锁

> ID：11595109
> 
> 赞同：0
> 
> 时间：2012-07-21T19:09:07.893
> 
> 标签：c#

我正在尝试执行一个简单的代码。我希望结果 RWL 工作将显示在消息框中。当我按下按钮时，我确实等待文本框中发生事件。当文本框事件发生时，我需要处理事件的结果。我正在尝试使用读取锁定机制。但是它不起作用。是机制有什么问题吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;

namespace ReadWriteLockTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        static ReaderWriterLock rwl = new ReaderWriterLock();
        static int resource = 0;

        private void button1_Click(object sender, EventArgs e)
        {
            scanner();
        }

        private void scanner()
        {
            int falg = 0;
            int i = 0;

            while (true)
            {
                Thread.Sleep(5000);
                try
                {
                    rwl.AcquireReaderLock(100);
                    try
                    {
                        Console.WriteLine(i);
                         i++;

                        if (resource == 1)
                            falg = 1;
                    }
                    finally
                    {
                        rwl.ReleaseReaderLock();
                    }
                }
                catch (ApplicationException)
                {

                }
                if (falg == 1)
                    break;
            }

            MessageBox.Show("RWL WORKS");

        }

        private DateTime CharReadTime;
        private void textBox1_TextChanged(object sender, EventArgs e)
        {
           CharReadTime = DateTime.Now;
            if (!timer1.Enabled)
                timer1.Start();
        }

        int j = 0;
        private void Form1_Load(object sender, EventArgs e)
        {
            timer1.Enabled = true;
            timer1.Interval = 1000;
        }

        private void timer1_Tick_1(object sender, EventArgs e)
        {
            const int timeout = 3;

            Console.WriteLine("j =" + j);
            j++;
            if ((DateTime.Now - CharReadTime).Seconds < timeout)
                return;

            if (String.Compare(textBox1.Text, "") == 0)
                return;

            try
            {
                rwl.AcquireWriterLock(100);
                try
                {
                    resource = 1;
                }
                finally
                {
                    rwl.ReleaseWriterLock();
                }
            }
            catch (ApplicationException)
            {
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:20:38.100

您从工具箱中拖动的常规计时器在 UI 线程中运行，因此 timer1_tick 永远不会与 button1_click 同时运行。system.timers.timer 从另一个线程运行，如果是那种计时器，您将需要锁。

我建议使用较新的 readerwriterlockslim，它更快且错误更少，请参阅[https://issues.apache.org/jira/browse/LOG4NET-232](https://issues.apache.org/jira/browse/LOG4NET-232)和[http://msdn.microsoft.com/en-us/library/ system.threading.readerwriterlockslim.aspx](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:14:54.517

添加更多细节。System.Windows.Forms.Timer（唯一具有 Tick 事件的 Timer 类，您可以在 WinForms 中访问而无需添加 WPF 程序集）*在 UI 线程上*运行 tick 事件处理程序。在扫描仪方法运行时，UI 线程很忙，无法调用 Tick 事件处理程序。这意味着您永远无法在使用您详细说明的代码获得写入器锁的同时获得读取器锁。

也许如果你详细说明你希望完成什么，有人可以提供一些建议。

# lua - Lua 区分大小写和全词搜索

> ID：11595114
> 
> 赞同：1
> 
> 时间：2012-07-21T19:09:42.200
> 
> 标签：lua

谁能告诉我如何在字符串查找中切换区分大小写的搜索？

还有整个单词搜索？，这甚至可能吗？，我想我可以将空格字符连接到我要查找的字符串的开头和结尾，但是如果搜索的单词位于字符串的开头或结尾，这将不起作用.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:32:17.447

> 谁能告诉我如何在字符串查找中切换区分大小写的搜索？

Lua 的模式 api 中没有不区分大小写的标志/切换。看：

*   [http://www.lua.org/pil/20.4.html](http://www.lua.org/pil/20.4.html)
*   [不区分大小写的 Lua 模式匹配](https://stackoverflow.com/questions/11401890/case-insensitive-lua-pattern-matching)

> 还有全词搜索？，这甚至可能吗？，

Lua 的模式匹配没有“单词边界”元字符，就像其他模式匹配/正则表达式 api 一样。所以答案是：“不”。

> 我想我可以将空格字符连接到我要查找的字符串的开头和结尾，但是如果搜索的单词位于字符串的开头或结尾，这将不起作用。

这有点棘手：想想标点符号。

# c++ - 结构内的动态指针数

> ID：11595115
> 
> 赞同：0
> 
> 时间：2012-07-21T19:10:00.483
> 
> 标签：c++, dynamic, struct

朋友们

我有一个包含指针的结构。不同的指针将连接到不同的数据类型。问题是我不知道当前结构将连接到多少，以及这些数据结构将是什么。

例如，

```
struct root
{
  branch1 *a;
  branch2 *b;
  branch3 *c;
  /// ...
}; 
```

Branch1、2、3 本身就是不同的结构。但我现在不知道我会将根连接到多少个分支 1、2、3。因此，如果以后我知道根将连接到多少个，有没有办法动态地将额外的指针引入结构？

让我更具体一点。根是不同逻辑门之间的连线。branch1, 2, 3 实际上指向由这条线驱动的门。由于有不同的门（不同数量的输入，不同的功能），我现在不知道线的扇出是什么。

---------------我目前的方法-------------------------------- --

在我按照一些朋友的建议去学习一些成熟的数据结构之前，比如vector，

目前我正在尝试使用一些固有的类和多态性来实现。

所有电线都是基础电线固有的，但具有不同的扇出

所有门都是输入数量最多的基础门所固有的，固有门使用其中一些来实现门功能

我还在努力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:21:42.820

看看这个[http://www.parashift.com/c++-faq/heterogeneous-list.html](http://www.parashift.com/c++-faq/heterogeneous-list.html) 它归结为例如`std::vector<boost::shared_ptr<BranchBase>>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:19:27.897

您始终可以使用继承和向量。

例子

```
struct Branch{

}

struct Branch1 : public Branch{

}

struct root{

  vector<branch*> branches;
}; 
```

[更多关于这里](http://en.wikipedia.org/wiki/Subtype_polymorphism)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:17:29.653

创建一个名为 Branch 的类。使所有其他类从 Branch1、Branch2、..

在您的结构中，创建一个指向 Branch 的指针数组或向量，如下所示：

```
struct root{

    vector<branch *>branches;

...... }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T19:25:09.980

相反，您应该为所有不同的分支类型使用基类（或 java 术语中的接口），并将指向该类的指针存储在可以动态增长的数据结构中（C++ STL 中的列表或向量更简单）。

```
class BaseBranch
{
...
};

class Branch1 : public BaseBranch
{
...
};

using namespace std;
list<BaseBranch*>mybranches; 
```

如果您需要按位置访问元素而不是总是从列表的第一个元素开始，我建议使用 std::vector

```
using namespace std;
vector<BaseBranch*>mybranches; 
```

编辑：修正了一个错字 - 感谢 Linuxios

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T21:13:09.550

这里有一些更详细的解释为什么你需要继承解决方案：

1.  C++ 代码生成生成的 asm 代码具有大量编译时偏移量的常量，这些常量从内存中查找 c++ 程序中的数据。
2.  C++ 有一个重要的特性叫做 sizeof(T)。每种类型都支持它，并且它记录了 c++ 类型的行为。它的返回值是编译时常量，在运行时不能改变。
3.  sizeof(root) 显然有同样的限制。就像您的结构一样，每种 c++ 类型的行为方式都相同。
4.  超越限制的唯一方法是通过 new 的数组版本。它超越了 c++ 类型系统，结果是一个指针，而不是包含所有数据的类型。
5.  std::vector 通过保留两个独立的内存区域在内部解决了这个问题。同样，实际数据不在 c++ 类型中。
6.  因此，处理运行时可变数据量的唯一方法是在运行时从一种类型跳转到另一种类型。如果你只有一种类型，那是不够的。
7.  具有基类和可能的虚函数的继承解决方案是一种从一种类型跳转到另一种类型的方法。还有其他方法可以进行相同的跳跃。

# jquery - 如何为 jquery 插件制作 i18n，？

> ID：11595116
> 
> 赞同：0
> 
> 时间：2012-07-21T19:10:01.870
> 
> 标签：jquery, plugins, internationalization

我已经完成了一些 jquery 插件（http://code.google.com/p/ax-jquery-multiuploader/），现在我想为插件的文本添加翻译。我只是想知道如何以标准方式为我的插件创建 i18n 翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:10:54.500

您可能会像在 momentjs [https://github.com/timrwood/moment/tree/master/lang](https://github.com/timrwood/moment/tree/master/lang)中那样做。（字符串的经典映射 - 并从那里获取所需的资源）。

默认为英文。加载其他文件会将所需的资源设置为所需的语言。

# php - preg_match sql 数据库连接

> ID：11595117
> 
> 赞同：0
> 
> 时间：2012-07-21T19:10:03.073
> 
> 标签：php, sql, database

我想知道是否有人可以解释这一点：我正在尝试将 php 转换为 SQL，但它一直在失败。我在密码领域缺少什么吗？我应该输入什么？

```
define('DB_HOST',"localhost");
define('DB_USER', (preg_match("/url.co.cc/i",$_SERVER["SERVER_NAME"])?"databaseName":"databaseUser"));
define('DB_PASS', (preg_match("/url.co.cc/i",$_SERVER["SERVER_NAME"])?"password":"password"));
define('DB_NAME', (preg_match("/url.co.cc/i",$_SERVER["SERVER_NAME"])?"databaseName":"databaseUser")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-07T13:49:21.490

我认为你做错了，试着像这样实现它：

```
<?php
$username = "your_name";
$password = "your_password";
$hostname = "localhost"; 

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
  or die("Unable to connect to MySQL");
echo "Connected to MySQL<br>";
?> 
```

# google-fusion-tables - Google Fusion Table API v1 - 正确组合 REST 格式以发布更新

> ID：11595122
> 
> 赞同：0
> 
> 时间：2012-07-21T19:10:20.740
> 
> 标签：google-fusion-tables

你好，善良的互联网人，我正在努力通过 Javascript 对 Google Fusion Table 进行更新……这是一个博客，但我想我会把它全部写在一个地方而不是一块膳食问题（都是相互关联的）。

我能够从 Fusion Tables 中进行 SELECT（简单），并且我还能够通过 oauth 检索 Auth Token（更多工作），因此通过 RowID 和字段名称更新字段值似乎是合理的可行。

google-api-javascript-client 有许多相当不错的帖子和示例，但是，唉，在阅读和阅读了许多这些帖子之后，我还没有成功地结合和推断使它们为我的预期目的工作：

-我希望允许网页的用户通过 javascript 对我的 Fusion Table 中已经存在的记录进行简单更新（使用 Fusion Tables 作为数据库），而不依赖于任何服务器端 PHP 或 Java oauth 等

关于上述问题的问题：仅通过javascript尝试这是合理的事情吗？...还是我应该放弃“客户端”策略？...而是开发服务器端架构（用于将Fusion Tables作为数据库处理）。

通过 javascript 更新的一些特定问题： A.) 更新是否需要 REST 调用上的 API 密钥？

B.)...或者 REST 调用是否只需要 Auth Token？

C.)...或者 API 密钥和身份验证令牌？

D.) UPDATE 是否需要“&callback=”？在 REST 通话中？

E.) GWT oauth javascript 库 ( [http://code.google.com/p/gwt-oauth2/](http://code.google.com/p/gwt-oauth2/) ) 能否与 javascript-api-client 库 ( [https://code.google.com/p/ ) 结合使用google-api-javascript-client/](https://code.google.com/p/google-api-javascript-client/)）？或者这是混合苹果和橙子？

F.) 对融合表的纯 REST 调用如何仅使用 jQuery 库进行组合和格式化？标头和 POST 方法如何包含在 url 字符串中？..auth 令牌呢？，以及如何完成回调？

F.1）google-api-javascript-client 的“gapi.client.request”方法具有提交 REST 调用的结构......我想这就是该库存在的原因：但是“gapi. client.request" 明确包含身份验证令牌？...它是否应该是 URL 字符串的一部分？

这是通过 gapi.client.request 推送 REST 调用的 URL 示例...真实的 tableID 当然在字符串中，当然下面的访问令牌已经过期...但是基本的SQL 是： UPDATE TABLEID SET STATUS COMPLETED WHERE ROWID 2

[https://www.googleapis.com/fusiontables/v1/query?sql=UPDATE%20](https://www.googleapis.com/fusiontables/v1/query?sql=UPDATE%20) TABLEID %20SET%20STATUS%20%3D%20COMPLETED%20WHERE%20ROWID%20%3D%20'2'&access_token=ya29.AHES6ZSCxJu4V0kOXN98H3PBKJon6ynewZ4jI4w9iFs3IOs7

上面看起来应该基本上可以工作并更新表格，但是该死的，没有。

这是我的测试代码，因为我尝试了很多组合，所以有点乱：

请注意，我也在为回调而苦苦挣扎......因为它（还）也不起作用，是的，也许如果我能看到回调，我可以更好地解决这种情况（我觉得我必须相当接近解决方案，所以还不想放弃并退回到 PHP 服务器端）......所以任何关于回调的帮助也将不胜感激。

非常感谢您提供的任何帮助/见解。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%@ Page Language="C#" %>
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled 1</title>
<script type="text/javascript" src="gwt-oauth2.js"></script>
<script src="https://apis.google.com/js/client.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
<body>

<form id="form1" runat="server">
  <div data-role="fieldcontain" id="div-myButton1" >
     <p></p>
        <input type="button" id="myButton1" value="oAuth & Get Token" />
     <p></p>
   </div>

 <p id="myOutput"><i>token goes here 3...</i></p>

<div data-role="fieldcontain" id="div-myButton2" >
     <p></p>
        <input type="button" id="myButton2" value="Attempt Fusion Table Update" />
     <p></p>
</div>

<p id="myOutput2"><i>transmitted POST url here...</i></p>

<p id="insert-data-output"><i>Fusion table callback status here...</i></p>

<script type="text/javascript">
$( "#myButton1" ).click(function() {
 //Using the GWT oauth2 javascript library to get the Auth token
 //...as was not able to explicitly retrieve token using the google-api-javascript 
 //alert("got here");
 var GOOGLE_AUTH_URL = "https://accounts.google.com/o/oauth2/auth";
//my client ID
var GOOGLE_CLIENT_ID = "YOURID.apps.googleusercontent.com";
var PLUS_ME_SCOPE = "https://www.googleapis.com/auth/plus.me";
//
var req = {
     "authUrl" : GOOGLE_AUTH_URL,
     "clientId" : GOOGLE_CLIENT_ID,
     //"scopes" : [ PLUS_ME_SCOPE ],
     "scopes" : ['https://www.googleapis.com/auth/fusiontables'],
   };
   oauth2.login(req, function(token) {
     //alert("Got an OAuth token:\n" + token + "\n"
     //    + "Token expires in " + oauth2.expiresIn(req) + " ms\n");
     //
     myOutput.innerText = token;
     //
   }, function(error) {
     alert("Error:\n" + error);
   });
 });
 </script>  

 <script type="text/javascript">
 $( "#myButton2" ).click(function() {
 //Attempting to update a Fusion Table record using gapi, google-api-javascript
 //...as was not able to update using the GWT javascript library
 //
 //TBD???: Where does the auth Token go when composing the REST update string?...tac on to the end?
 //??does UPDATE also require the API key?...if so where in the string?
 //
 //alert("got here");
 //myOutput2.innerText = "got here";
 //
 //my Fusion Table: TABLEID
 var query = "UPDATE TABLEID SET STATUS = COMPLETED WHERE ROWID = '2'";
 var encodedQuery = encodeURIComponent(query);
 // Construct the URL
 //the push seems to be putting in extra commas! :-(
 //var url = ['https://www.googleapis.com/fusiontables/v1/query'];
 var url = 'https://www.googleapis.com/fusiontables/v1/query';
 //url.push('?sql=' + encodedQuery);
 url = url + '?sql=' + encodedQuery;
 //my API key
 //url.push('&key=YOURAPIKEY');
 //Is the API Key required?
 //&access_token=
 //another choice might be to drop the API key, and put in the access token
 //url.push('&access_token=');
  myAccessTokenIs = '&access_token=' + myOutput.innerText;
  //url.push(myAccessTokenIs);
  url = url + myAccessTokenIs;
  //maybe drop the call back stuff too???
  //url.push('&callback=?');
  //
  //alert("my url is: " + url);
  myOutput2.innerText = url;
  //
  var path = '/fusiontables/v1/query';
  //
  //used for the callback of the gapi.client.request
  var callback = function(what) {
  alert("got to call back??");
  var output = JSON.stringify(what);
  insert-data-output.innerText = output;
  };
  ////var callback = function(element) {
  //    return function(resp) {
  //    var output = JSON.stringify(resp);
  //    document.getElementById(element).innerHTML = output;
  //};
  // 
  gapi.client.request({
    path:path,
    body: url,
    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
    method:'POST'},
   callback
   );
  });
 </script>  

 <script>
  function helloCallBack(callback) {
   //callback('insert-data-output');
 };
 </script>
 </form>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:42:10.003

我试着回答你所有的问题：

*   请参阅[JavaScript API 示例](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/javascript-api.html)以了解 gapi-client 的用法。您需要所有请求的 API 密钥以及 client_id 和 OAuth 范围来授权用户。
*   您想要的并不完全可能：如果您想要一个仅限客户端的解决方案，您所能做的就是要求用户使用他们的帐户进行身份验证（如上面的示例）。但是如果你想访问你共享的一个特定的表，你必须有某种服务器端代码。
*   我首先开始使用 JSONP API（使用 jQuery 创建调用，就像你建议的那样），但随后切换到了 gapi-client。它更容易，它可以为您提供有意义的错误消息，并且我可以毫无问题地访问我的数据。

我有非常相似的要求：尽可能使用客户端代码，访问属于我的 Google-Account 的单个表（使用 FT 作为数据库）。关键是使用所谓的[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。您无需请求用户授权，而是使用服务帐户在服务器上执行此操作：

1.  创建帐户
2.  为服务帐户的表设置权限
3.  授权账户（获取访问令牌）
4.  提出授权请求

现在您有 2 个选项：

*   通过您的服务器将所有请求路由到融合表（添加访问令牌）

或者

*   将获取的令牌提供给客户端，并从那里处理所有请求

第二个选项是危险的，因为这意味着服务帐户是公开的，所以你必须仔细检查你给这个帐户哪些权限（即如果你不注意可能会删除记录），但除此之外你将服务器端代码的数量减少到最低限度。

在我的应用程序中，我选择了第二个选项。但是为了限制我创建的帐户作为我的表的读取视图和写入视图的可能性。并且服务帐户只能访问这两个视图。在读取视图中，该帐户具有“查看者”权限，因此可以读取整个表（*SELECT*语句）。在写视图上，它具有“编辑器”权限，这使得*插入*/*更新*/*删除*成为可能（尽管*不可能*删除）。

我个人没有使用 GWT 库，但我看不出这不起作用的原因。我使用[PHP OAuth library](https://code.google.com/p/google-api-php-client/wiki/OAuth2)进行了服务器端调用。包含我的代码的存储库是公开的，对您来说有趣的部分可能是我[的 FT 的 JavaScript 库（GftLib）](https://github.com/odi86/GFTPrototype/blob/master/lib/gftlib-js/GftLib.js)和[服务器端代码](https://github.com/odi86/GFTPrototype/blob/master/services/OAuthToken.php)（用于将服务帐户的访问令牌获取到客户端的 JSONP 接口）。

我想我回答了你所有的问题，如果我留下了什么，请随时要求澄清。

# php - PHP密码保护

> ID：11595126
> 
> 赞同：-1
> 
> 时间：2012-07-21T19:10:41.560
> 
> 标签：php, forms, passwords, password-protection

我已经研究了这么久，我已经这样做了数百次，但我现在忘记了。最简单的事情。如何在 PHP 中进行密码保护。请帮忙，当我点击提交时，什么都没有弹出。这是我的代码：

```
<html>
<style type="text/css">
#textbox1 {
text-shadow:2px 2px 3px #000000;
}

label {
text-shadow:2px 2px 3px #000000;
font-family:"Arial";
}
</style>
</style>
<script type="text/javascript">
function clearText(target){target.value= "";}
</script>
<head>
<center>
<form action="" method="POST">
<label face="Arial">Password:  </label><input id="textbox1" type="password" name="password" value="" onfocus="clearText(this)">
<input id="button" type="submit" value="Login to Uploader">
</form>
</center>
</html>
<?php

$pass = $_POST['password'];
$submit = $_POST['submit'];

if (isset($_POST['submit'])) {
if ($pass == "pengsuploader123" || $pass="pass") {
echo "Test";
} else {
echo "Wrong!";
}
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:13:21.650

您需要为提交按钮`name="submit"`提供 PHP 检测它的属性。此外，`$pass="pass"`应该是`$pass == "pass"`.

# perl - 尝试通过 cpanm 安装 Glib，cc 访问被拒绝

> ID：11595127
> 
> 赞同：1
> 
> 时间：2012-07-21T19:10:49.273
> 
> 标签：perl, glib, access-denied, cc

我正在尝试通过 cpanm 安装 Glib 模块。我有所有的先决条件，但在“构建和测试”阶段，安装失败。我检查了构建日志，看起来当应用程序调用“cc Glib.c”时我的访问被拒绝了。我有 MinGw 编译器，并且是我计算机的管理员。有任何想法吗？在此先感谢您的帮助。

编辑：这是来自构建日志最后四行的实际错误消息。

[CC Glib.c]

访问被拒绝。

dmake.exe：错误代码 129，同时制作“Glib.o”

-> FAIL 安装 Glib 失败。有关详细信息，请参阅 .cpanm\build.log。

这是完整的日志：

```
cpanm (App::cpanminus) 1.5015 on perl 5.014002 为 MSWin32-x86-multi-thread 构建
工作目录是/.cpanm/work/1342897626.5500
你已经 make C:\Perl\c\bin\dmake.exe
你有 LWP 6.03
你有 C:\Eclipse\bin\tar.exe、C:\Eclipse\bin\gzip.exe 和 C:\Eclipse\bin\bzip2.exe
在 cpanmetadb 上搜索 Glib ...
--> 使用 Glib
获取 http://www.cpan.org/authors/id/X/XA/XAOC/Glib-1.261.tar.gz
-> 好的
解压 Glib-1.261.tar.gz
进入 Glib-1.261
从 META.yml 检查配置依赖项
配置 Glib-1.261
运行 Makefile.PL
包括生成的 API 文档...
检查您的套件是否完整...
看起来不错
为 Glib 编写 Makefile
编写 MYMETA.yml 和 MYMETA.json
-> 好的
检查来自 MYMETA.json 的依赖关系...
检查您是否有 ExtUtils::MakeMaker 0 ... 是 (6.62)
检查您是否有 ExtUtils::Depends 0.300 ... 是 (0.304)
检查您是否有 ExtUtils::PkgConfig 1.00 ... 是 (1.13)
构建和测试 Glib-1.261
cp lib/Glib/GenPod.pm blib\lib/Glib/GenPod.pm
cp build/IFiles.pm blib\arch/Glib/Install/Files.pm
cp C:\.cpanm\work\1342897626.5500\Glib-1.261\typemap blib\arch/Glib/Install/typemap
cp lib/Glib.pm blib\lib/Glib.pm
cp gperl.h blib\arch/Glib/Install/gperl.h
cp lib/Glib/Object/Subclass.pm blib\lib/Glib/Object/Subclass.pm
cp devel.pod blib\lib/Glib/devel.pod
cp gperl_marshal.h blib\arch/Glib/Install/gperl_marshal.h
cp lib/Glib/MakeHelper.pm blib\lib/Glib/MakeHelper.pm
cp lib/Glib/ParseXSDoc.pm blib\lib/Glib/ParseXSDoc.pm
cp lib/Glib/CodeGen.pm blib\lib/Glib/CodeGen.pm
cp doctypes blib\arch/Glib/Install/doctypes
[ XS Glib.xs ]
[CC Glib.c]
访问被拒绝。
dmake.exe：错误代码 129，同时制作“Glib.o”
-> FAIL 安装 Glib 失败。有关详细信息，请参阅 \.cpanm\build.log。
```

# android - 如何为 Android 中的 SQLite 插入正确准备字符串？

> ID：11595129
> 
> 赞同：1
> 
> 时间：2012-07-21T19:11:08.047
> 
> 标签：android, insert, android-sqlite

所以当我学习 Android 时，我得到了很多关于如何使用`ContentProvider`以及如何正确插入东西的建议`SqliteDatabase`。现在我有一个没有意义的错误，至少每个人都告诉我的一切都是这样。错误是这样的：

```
android.database.sqlite.SQLiteException: near "s": syntax error:
while compiling: SELECT * FROM events WHERE time_stamp='07/21/2012 2:59:03 PM' AND
event='Test This's' 
```

只要`'`没有出现在任何地方，一切正常。我知道为什么，因为它需要逃脱。但这没有意义，因为每个人都告诉我不要使用原始查询，而是使用提供的绑定方法，如果这甚至有意义的话。让我提供我的示例：

```
ContentValues newValues = new ContentValues();
newValues.put("event_id", eventId);
newValues.put("event_name", eventName);
newValues.put("start_date", startDate);
newValues.put("start_time", values.getAsString("start_time"));
newValues.put("end_date", endDate);
newValues.put("end_time", values.getAsString("end_time"));
newValues.put("location", values.getAsString("location"));
Long success = database.insert("events_info", null, newValues); 
```

据我所知，既然它假设绑定它，为什么我需要逃避它！？除非这仅适用于其他方法，如`query()`和`update()`。在任何一种情况下，我都希望有人能阐明在 Android 中为 SQLite 插入准备字符串的正确做法。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:18:10.063

SELECT * FROM events WHERE time_stamp='07/21/2012 2:59:03 PM' AND event='Test This's

我想你知道，日期字符串`'07/21/2012 2:59:03 PM'`是正确分隔的，而事件字符串`'Test This's'`不是。

简单的修复它将字符串更改为`'Test This''s'`

一般问题，“你如何更正和验证输入”，实际上是一个非常大的问题 - 涉及的问题不仅仅是“引号”分隔符。

可以说，您*最好*的防线是使用“查询参数”：

```
EXAMPLE:
p_query = "select * from mytable where name_field = ?";
mDb.rawQuery(p_query, new String[] { uvalue }); 
```

我很难找到关于该主题的好教程 - 抱歉。这是我能做的最好的：

*   [http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

这是一篇关于相关主题“SQL 注入”的好文章：

*   [http://en.wikipedia.org/wiki/Sql_injection](http://en.wikipedia.org/wiki/Sql_injection)

最后，如果你真的想“转义”你的输入字符串，你可能会比使用简单的 Java String.replaceAll () 做得更糟：

*   [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)

# ruby-on-rails-3 - 定期检查 API 以获取新数据并将其保存到 Rails 应用程序的最佳方法是什么？

> ID：11595132
> 
> 赞同：1
> 
> 时间：2012-07-21T19:12:04.417
> 
> 标签：ruby-on-rails-3, api

我正在构建一个简单的应用程序，它存储从 Google Analytics API 获取的数据并将其呈现在仪表板中。现在我只是每天检查一次是否有任何新数据，然后将其保存到数据库中。

我想知道这种交互是否有任何最佳实践？任何指南、教程或伟大的宝石将不胜感激。

# haskell - 将非空列表传递给函数

> ID：11595135
> 
> 赞同：2
> 
> 时间：2012-07-21T19:12:50.420
> 
> 标签：haskell, parameter-passing, tail

我编写了这个小函数来检索列表的尾部：

```
let getTail l = if length l > 0 then tail l else "empty list" 
```

传递`[]`给`getTail`返回`empty list`但传递`[1,2,3]`给出以下错误：

```
<interactive>:1:14:
No instance for (Num Char)
  arising from the literal `3'
Possible fix: add an instance declaration for (Num Char)
In the expression: 3
In the first argument of `getTail', namely `[1, 2, 3]'
In the expression: getTail [1, 2, 3] 
```

我不明白那个错误是什么意思。问题是什么？使用 GHCi 7.0.4

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T19:19:34.743

让我们考虑一下您的`getTail`函数的类型。最初，我们可以想象`l`成为任何列表。但是，返回类型必须是 a`String`因为您有时会返回`"empty list"`。由于这是 if 语句的一部分，您也可以在其中 return `tail l`，这意味着`l` *必须*是`String`.

所以你的`getTail`函数有 type `String -> String`。

当您调用`getTail`with 时`[1,2,3]`，它需要一个`String`，这只是一个`[Char]`。请记住，数字文字是重载的：`[1,2,3]`相当于调用`[fromInteger 1, fromInteger 2, fromInteger 3]`. 所以，给定这个列表，Haskell 试图从`Char`. 由于`Char`s 不是`Num`该类的一部分，因此这会失败，从而给您带来错误。

一个好的解决方案是返回一个`Maybe`类型并给出`Nothing`错误而不是返回`"empty list"`。所以将你的函数重写为：

```
let getTail l = if length l > 0 then Just (tail l) else Nothing 
```

现在它的类型是`[a] -> Maybe [a]`. 使用它会强制任何使用你的函数的人`getTail`在能够使用结果之前检查是否成功。

另一种选择是返回`[]`代替“空列表”。在这种情况下，您的`getTail`函数将与`drop 1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T19:15:59.983

```
Prelude> let getTail l = if length l > 0 then tail l else "empty list" 
```

您没有给出`getTail`类型签名，因此推断出一个。

```
Prelude> :t getTail
getTail :: [Char] -> [Char] 
```

*`:t`为您提供 GHCi 中任何内容的类型。这是非常有用的。类型签名对 Haskell 中的函数有很多说明。*

这可能不是你的意思。为什么它只适用于`[Char]`, （或等效地 , `String`），而不适用于任何列表？

原因如下：

一个函数只能有一种返回类型。由于您`"empty list"`在列表为空时返回，因此返回类型必须为`String`. `tail xs`碰巧where `xs`is a的返回类型`[Char]`也是 a `String`，这就是为什么当你第一次定义函数时不会出错的原因。因此，您的功能必须是`[Char] -> [Char]`.

你试图用参数来调用它`[1, 2, 3]`，它的类型是`Num a => a`. GHC 告诉您“A`Char`没有 Num 的实例”，或者“我无法将数字转换为 Char”。这涉及到类型类——如果你还不理解这些，那没关系，因为你仍然会得到一个你尝试过的错误`getTail ([1, 2, 3] :: [Int])`。您正在尝试将 s 列表传递给接受`Int`s 列表的函数`Char`。

我建议通读[LYAH](http://learnyouahaskell.com/introduction)以了解 Haskell 类型系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T19:18:19.797

应该而`[]`不是`"empty list"`（您正在混合类型）

```
Prelude> let getTail l = if length l > 0 then tail l else []
Prelude> getTail [1, 2, 3]
[2,3] 
```

# ruby-on-rails - Heroku 识别不存在的模型

> ID：11595138
> 
> 赞同：0
> 
> 时间：2012-07-21T19:13:18.110
> 
> 标签：ruby-on-rails, heroku

我试图在 Heroku 上上传我的 rails3.2 应用程序。我按照 Heroku 上的说明进行了上传。

打开应用程序后，我得到了错误。我跑了“heroku日志”并得到了

```
 2012-07-21T19:07:01+00:00 app[web.1]: => Booting Thin
    2012-07-21T19:07:01+00:00 app[web.1]: => Rails 3.2.6 application starting in production on http://0.0.0.0:34125
    2012-07-21T19:07:01+00:00 app[web.1]: => Call with -d to detach
    2012-07-21T19:07:01+00:00 app[web.1]: Exiting
    2012-07-21T19:07:01+00:00 app[web.1]: => Ctrl-C to shutdown server
    2012-07-21T19:07:01+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require':   /app/app/models/question.rb:2: syntax error, unexpected '\n', expecting tASSOC (SyntaxError) 
```

该日志说我在“question.rb”中有 SyntaxError，但我之前已经删除了该模型。因此，这意味着 Heroku 识别出不存在的模型。

我尝试了“heroku pg:reset SHARED_DATABASE”和“bundle exec rake db:drop:all”但 Heroku 仍然错误地识别了模型。

我怎样才能解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:44:44.707

似乎您还没有从 git 存储库中删除模型文件。

首先让我们检查一下你的 git repo 中是否还有模型文件。这是为了检查我是否怀疑是问题所在。

在你`git log`的终端做

复制最近提交的 git 提交代码，看起来像`af99fe31c0598a8aezecf704c68d20c153ccad9c`

在您`git ls-tree -r --name-only af99fe31c0598a8aezecf704c68d20c153ccad9c`的终端中执行。

很可能，您仍会在列表中找到模型文件。

做`git rm /app/app/models/question.rb`

提交任何更改，然后推送到 Heroku。

做`heroku run rake db:migrate`和`heroku restart`

看看问题是否仍然存在。

# javascript - 使用 jQuery 加载 LessCSS

> ID：11595143
> 
> 赞同：5
> 
> 时间：2012-07-21T19:13:39.377
> 
> 标签：javascript, jquery, html, less

我正在使用[jQuery](http://jquery.org/)从 Google 代码加载[LessCSS](http://lesscss.org/) ，并希望通过使用来访问[LessCSS](http://lesscss.org/)对象。`Parser()``less.Parser`

我可以通过hack中的标签来使用[jQuery来加载](http://jquery.org/)[LessCSS](http://lesscss.org/)；但是加载两次。我宁愿加载并使用动态插入它。这样做似乎需要调用.`<link rel>``<head>``style.less``style.less``toCSS``less.Parser`

目前下面的代码不会插入css；我认为这是因为我没有为`Parser`该类使用正确的命名空间。

如何使用[jQuery动态加载](http://jquery.org/)[LessCSS](http://lesscss.org/)？

* * *

**问题的原始代码**

```
<script type="text/javascript" id="less_hack">
    // Load LessCSS javascript
    var less_file="/style.less";
    $(function() {
        var css="";
        $.getScript("toCSS.js")
        $.getScript("http://lesscss.googlecode.com/files/less-1.3.0.min.js",function(){
          $.get(less_file,function(data){
            new(less.Parser)().parse(data,function(e,tree){
              css = tree.toCSS();
            });
          });
        });
    });
    // $('head').append('<link rel="stylesheet/less" type="text/css" href="'+less_file+'">');
</script> 
```

我的 Python 比 JavaScript 更流利；如果我以某种方式错过了基本的 js 概念，请提前道歉。

* * *

**帕特里克回答后修改的代码**

```
<head>
<script type="text/javascript"
  src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js">
</script>
<script type="text/javascript">
    // Load LessCSS javascript
    var less_file="http://www.mysite.local/style.less";
    $(function() {
        var css="";
        $.getScript("http://lesscss.googlecode.com/files/less-1.3.0.min.js",function(){
          $.get(less_file,function(data){
            var parser = new(less.Parser);
            parser.parse(data, function (err, tree) {
                if (err) { return console.error(err) }
                css = tree.toCSS();
                // Insert rendered css inline
                $("<style/>").html(css).appendTo("body");
            });
          });
        });
    });
</script>
</head> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:27:12.790

**更新：**

我认为问题在于您将 Parser 作为函数调用，而不是 object `new(less.Parser)()`。

将您的代码修改为：

```
var less_file="/style.less";
$(function() {
    var css="";
    $.getScript("http://lesscss.googlecode.com/files/less-1.3.0.min.js",function(){
      $.get(less_file,function(data){
        var parser = new(less.Parser);
        parser.parse(data, function (err, t) {
            if (err) { return console.error(err) }
            css = t.toCSS();
            $("<style/>").html(css).appendTo("body");
        });            
      });
    });
}); 
```

在此处查看工作版本：http: [//jsfiddle.net/E6hsC/](http://jsfiddle.net/E6hsC/)

# ios - UIButton 高亮区域延伸到按钮之外

> ID：11595145
> 
> 赞同：3
> 
> 时间：2012-07-21T19:14:15.583
> 
> 标签：ios, uibutton, touch

当用户触摸 UIButton 时，应启动高亮状态。当他将手指滑出按钮时（仍然没有抬起手指），按钮突出显示应该停止，而当他抬起手指时，按钮不应该被触发。

这种行为正是 iOS 的工作方式，但我对仍然应用高光的有效区域感到有点惊讶。对于一个小按钮，我必须在高亮停止之前将手指移动到按钮上方或下方的按钮高度数倍。

这是正常的，还是我做错了什么？高光区域应该由框架控制还是我可以设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:53:48.727

这是任何 UIButton 框架的正常行为，无论您选择“触摸时显示高光”属性还是不为按钮选择属性。

但是当一个人使用“信息灯”按钮时，行为会有一点变化。“信息灯”按钮的选择区域略大于其自身的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-26T18:24:12.847

我遇到了同样的问题，最终将 UIButton 子类化以获得所需的行为。在此示例中，我更改按钮背景以向用户显示他们何时触发按钮以及何时不触发。

```
override func touchesMoved(_ touches: Set<UITouch>, with event: UIEvent?) {

    guard let touch = touches.randomElement() else { return }

    let touchPoint = touch.location(in: self)

    if self.bounds.contains(touchPoint){

        self.backgroundColor = UIColor.gray
    }
    else{

        self.backgroundColor = UIColor.lightGray
    }
}

override func touchesEnded(_ touches: Set<UITouch>, with event: UIEvent?) {

    guard let touch = touches.randomElement() else { return }

    let touchPoint = touch.location(in: self)

    if self.bounds.contains(touchPoint){

        super.touchesEnded(touches, with: event)
        self.backgroundColor = UIColor.lightGray
    }
    else{

        super.touchesCancelled(touches, with: event)
    }
} 
```

有趣的是，如果您编写 UIAlertController 代码，则 UIAlertAction 按钮的行为与您预期的一样：如果触摸离开按钮边界，则突出显示会消失。然而对于 UIButton 的 touchDragInside 框架比图形框架大很多。其他人建议这是为了允许笨拙和/或“胖”手指的用户。两个按钮之间的不一致很烦人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-24T07:15:56.630

```
button.addTarget(self, action: #selector(touchDragOutside), for: . touchDragOutside)

@objc func touchDragOutside() {
    button.isHighlighted = true
} 
```

# ruby-on-rails - 预编译错误 Rake 中止

> ID：11595146
> 
> 赞同：1
> 
> 时间：2012-07-21T19:14:37.653
> 
> 标签：ruby-on-rails, git, heroku

我无法让我的应用程序在 Heroku 上呈现。以下是详细信息：

命令后： **git push heroku master**

![在此处输入图像描述](../Images/954c61883b4bab4e6d0f54e5e1491102.png)

我运行**heroku 日志**：

![在此处输入图像描述](../Images/501a16de7db542d62845fc0b646df6d0.png)

我正在对预编译错误做功课，但我确定我并不真正*理解*错误以推断解决方案 - 非常感谢指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:34:41.760

您将需要检查您的 application.css 文件。你有一些不正确的样式。当 heroku 尝试编译资产时，它遇到了错误。

style3.css 的第 80 行有一个额外的逗号。另外，你已经声明`body`了两次。但是，`body`两次不应该产生错误，但它会覆盖前一个条目。

老实说，超过 3000 行有点疯狂。您可能希望将其拆分为不同的部分。在第 3000 行（不确定这是 Snippi 的限制还是您没有完成标签），您错过了`}`标签的结尾。

# windows - 在 windows 上编译的 node-expat 但找不到模块

> ID：11595149
> 
> 赞同：1
> 
> 时间：2012-07-21T19:15:14.150
> 
> 标签：windows, node.js, node-gyp

[https://github.com/TooTallNate/node-expat/tree/gyp](https://github.com/TooTallNate/node-expat/tree/gyp)和 node-gyp 用于编译它。生成了 node_expat.node。在代码中引用时出现以下错误：

```
module.js:485
  process.dlopen(filename, module.exports);
          ^
Error: The specified module could not be found.
C:\Users\s\Desktop\Translink\TooTallNate-node-expat-e7d7cb5\build\Releas
\node_expat.node
    at Object.Module._extensions..node (module.js:485:11)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (C:\Users\s\Desktop\Translink\server.js:1:181)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

我无法进一步尝试在 Windows 上获取 node-expat。感谢任何输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:12:23.093

它需要 libexpat.dll，因为 .node 实际上是一个动态链接库。我将 libexpat.dll 复制到 Release 目录中以使其工作。它也可以复制到 system32 中。

# iphone - presentModalViewController 在 3G 上发送电子邮件时崩溃

> ID：11595155
> 
> 赞同：1
> 
> 时间：2012-07-21T19:16:38.657
> 
> 标签：iphone, email, ios5, 3g, presentmodalviewcontroller

我正在尝试通过电子邮件并使用以下代码发送设备日志文件。我可以在 iPod Touch 和 iPad 中通过 Wi-Fi 网络发送电子邮件。但是当我尝试在 3G 网络上用 iPhone 发送电子邮件时，出现了崩溃。我首次展示了代码，然后才知道这是在执行 presentModalViewController 时崩溃了。

请帮助我，如何解决这个问题。

```
- (IBAction)sendEmail:(id)sender
{
  MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
  picker.mailComposeDelegate = self;

  // Set the subject of email
  [picker setSubject:@"Debug Log"];

  // Add email addresses
  [picker setToRecipients:[NSArray arrayWithObjects:@"emailaddress1@domainName.com", @"emailaddress2@domainName.com", nil]];

  // Fill out the email body text
  NSString *emailBody = @"Debug Log content…… ";

  // This is not an HTML formatted email
  [picker setMessageBody:emailBody isHTML:NO];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    
NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *logPath = [documentsDirectory   
stringByAppendingPathComponent:@"console.log"];
NSData *data = [NSData dataWithContentsOfFile:logPath];
  [picker addAttachmentData:data mimeType:@"text/xml" fileName:@"console.log"];

  // Show email view    
  [self presentModalViewController:picker animated:YES];//app crash

  // Release picker
  [picker release];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{
  // Called once the email is sent
  // Remove the email view controller   
  [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:32:46.800

在发送邮件之前，请检查 iOS 设备中是否配置了电子邮件。

您可以在发送邮件之前通过代码检查发送邮件的能力，如下所示。

```
- (IBAction)sendEmail:(id)sender
{
  MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
  picker.mailComposeDelegate = self;

  // Set the subject of email
  [picker setSubject:@"Debug Log"];

  // Add email addresses
  [picker setToRecipients:[NSArray arrayWithObjects:@"emailaddress1@domainName.com", @"emailaddress2@domainName.com", nil]];

  // Fill out the email body text
  NSString *emailBody = @"Debug Log content…… ";

  // This is not an HTML formatted email
  [picker setMessageBody:emailBody isHTML:NO];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    
NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *logPath = [documentsDirectory   
stringByAppendingPathComponent:@"console.log"];
NSData *data = [NSData dataWithContentsOfFile:logPath];

  [picker addAttachmentData:data mimeType:@"text/xml" fileName:@"console.log"];

  // Show email view    
 Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
  if (mailClass != nil) {
    // We must always check whether the current device is configured for sending emails
    if ([mailClass canSendMail]) {
      [self presentModalViewController:picker animated:YES];
    } else {
      //do something
    }
  } else {
   //do something
  } 
  // Release picker
  [picker release];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{
  // Called once the email is sent
  // Remove the email view controller   
  [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-25T09:09:22.757

简单的答案是`presentModalViewController`使用以下代码片段封装您对 的调用：

```
Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
if (mailClass != nil)
{ 
    if ([mailClass canSendMail])
    {
        [self presentModalViewController:YOURMAILCOMPOSER animated:YES];
    }
} 
```

这甚至会为您的用户提供一个自动生成的警报视图，告诉他们在继续之前设置邮件帐户......

# iphone - 使用 Core Data 图像填充 tableView

> ID：11595159
> 
> 赞同：0
> 
> 时间：2012-07-21T19:17:07.610
> 
> 标签：iphone, objective-c, ios, core-data, uiimage

我正在开发一个消息应用程序（类似于 WhatsApp），用户可以互相发送文本和图像消息。

我创建了一个`Message`对象，它的子类`NSManagedObject`，用于存储消息详细信息，例如：
sender_name、timetemp、message_text 和 message_image（用于图像消息）
* 图像的平均大小就像从 iPhone 相机胶卷库中拍摄的图像的大小。

第一个问题是：
**将图像保存到 Core Data 是个好主意，还是将它们保存到文件系统更好？**

问题是，当我在聊天视图中并滚动 tableView 以查看旧消息时，当有图像要从核心数据加载时，滚动性能会变得非常糟糕。

我正在使用 a`NSFetchedResultsController`来获取消息，并且一次获取的消息不超过 30 条。我试图通过创建一个`MessageImage`对象（也是 的子类`NSManagedObject`）来存储`UIImage`.
一个`Message`对象与 具有一对一的关系`MessageImage`，我这样做是为了当 fetcher 从 Core Data 加载 30 条消息时，UIImage 本身在请求之前不会被加载。但我仍然表现不佳......

所以第二个问题是：
**我能做些什么来提高滚动性能？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:25:52.113

创建图像的缩略图，这是它们将在滚动视图中缩放到的确切大小。这样您就不必读取所有高分辨率图像，也不必缩放它们。您可以使用 Core Data 或文件系统存储缩略图。我不认为会有很大的不同。但绝对将高分辨率原件存储在文件系统上。当用户点击图像时，您可以加载它们并显示原始全屏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:23:08.777

我想好的做法是不要将图像存储在比图标大小大的核心数据中。将它们存储在文件系统中。性能方面：您可以使用 GCD 在后台加载图像，然后在加载后立即在主线程上显示它们。看看这里[使用块从后台线程加载图像](https://stackoverflow.com/questions/7502073/loading-images-from-a-background-thread-using-blocks/7502281#7502281)

# javascript - Javascript mailto函数加载问题

> ID：11595160
> 
> 赞同：1
> 
> 时间：2012-07-21T19:17:13.163
> 
> 标签：javascript

我正在使用 JavaScript`mailto`函数，当单击按钮时，邮件会加载到同一个选项卡中。如何在新标签中加载邮件？

这是我的代码：

```
<input type="button" value="Apply" name="apply" onclick="mailJob('Sample');"> 
```

```
function mailJob(code)
{
    window.location="mailto:example@gmail.com?subject="+code;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:21:27.953

使用`window.open`功能。

```
window.open('mailto:example@gmail.com?subject='+code, '_blank') 
```

[在这里](http://www.pageresource.com/jscript/jwinopen.htm)阅读更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:24:41.187

window.location 会将当前页面重定向到指定的 url。为了打开一个新窗口或选项卡，您需要执行 window.open，如 Yan 链接到的答案所示。

# ruby - 返回一组具有不同瞬态属性的非显着记录

> ID：11595164
> 
> 赞同：0
> 
> 时间：2012-07-21T19:17:34.087
> 
> 标签：ruby, ruby-on-rails-3

我有一个 Rails 3.2 应用程序，我有一个模型，我们称之为 Car。

用户输入一系列信息，应用程序会根据该信息返回推荐汽车的列表。现在，每辆车都有一组用户可能想要或不想要的临时属性，例如建议的内饰、建议的颜色等。这些“建议的”属性是根据用户输入的信息动态计算的。因此，该应用程序不仅会猜测用户可能想要什么汽车，它还会猜测用户可能想要的其他选项，并将该信息暂时存储在 Car 记录中。

这是 Car 模型相关部分的伪代码表示：

```
def self.suggested_cars
  @cars = basic_cars(user_height, user_weight)
  add_upholstery_suggestions(@cars, user_wealth)
  add_color_suggestions(@cars, user_gender)
end 
```

问题是建议汽车和选项的算法可以返回不明确的实际汽车记录。例如，对建议汽车的一项请求可以返回汽车 A 和汽车 A，同时配备真皮座椅。但是我有一个问题，因为当同时从活动记录中请求两个相同的实体时，两个实例都引用同一个对象，即它们不能有不同的瞬态数据。

我怀疑发生这种情况时我可能需要使用 .dup 方法来复制对象，但我觉得有一个更优雅的解决方案。我愿意接受任何建议。有没有一种通用的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:52:38.497

问题是你有两个不同的东西，你试图强行合二为一。一个是汽车类型列表；另一个是汽车配置列表。汽车配置具有一种汽车类型。一种车型有多种配置。

通过将它们变成两个不同的类来修复，例如：

```
class Car < ActiveRecord::Base
  def self.basic_cars(user)
    # returns a relation
  end
end

class CarConfig
  attr_accessor :car, :opts

  def initialize(car, opts)
    @car, @opts = car, opts
  end

  def self.suggested_configs
    configs = []
    Car.basic_cars(user).each do |car|
      configs << upholstery_suggestions(car, user)
      configs << color_suggestions(car, user)
    end
    configs.flatten
  end

  def self.upholstery_suggestions(car, user)
    [self.new(car, seats: 'standard'), 
     self.new(car, seats: 'leather')]
  end
end 
```

# iphone - iPhone游戏重启攻略

> ID：11595166
> 
> 赞同：1
> 
> 时间：2012-07-21T19:17:42.280
> 
> 标签：iphone, uiviewcontroller

我是开发 iPhone 游戏的新手，实际上是游戏开发。我想知道，最常见的重启游戏策略是什么？

*   在 gameViewController 中有重置函数并调用它吗？
*   有没有一种快速的方法来重新启动控制器？（但必须确保我的导航解除方法在退出游戏到菜单时也能正常工作）

哪个更足够？

另一个更好的建议会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:28:11.853

我会有一个单独的 gameController 对象，它在 init 中完成所有游戏设置，并且只使用控制器进行显示。当您想要重置游戏时，分配一个新的 gameController 对象并将其连接到视图以代替旧的。直接从 viewController 运行游戏逻辑通常不是一个好主意，因为您可能仍然想要视图而不想要游戏 - 最好将它们分成离散的对象。

可视化：

```
[ViewController] has properties:
==>[Game Controller] (Knows to display in view)
==>[View] 
```

重启：只消除【游戏控制器】并创建一个新的。

# c# - 在 C# 中将 SQL 和 LINQ 与我的 winforms 应用程序一起使用的先决条件是什么？

> ID：11595183
> 
> 赞同：4
> 
> 时间：2012-07-21T19:20:10.063
> 
> 标签：c#, sql, sql-server, linq

具体来说，如果我有一台服务器，我想使用我的 SQL Server 数据库，我是否必须在每台服务器计算机上安装一个 SQL 数据库？我可以将它与软件安装捆绑在一起吗？如果我想使用 LINQ，我是否仅限于使用 SQL Server？

同样，我的数据库数据必须是安全的。有没有一种方法可以确保只有我的程序才能修改/查询我的程序数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:28:34.357

> 问题 1) 我必须在每台服务器计算机上安装 SQL 数据库吗？

不，您可以只托管一台 sql server 并通过 Internet 访问

> 问题 2) 我可以将它与软件安装捆绑在一起吗？

是的，我遇到的最简单的打包程序和安装程序称为 Inno Setup

> 问题 3）如果我想使用 LINQ，我是否仅限于使用 MSSQL？

不，因为[语言集成查询（LINQ，发音为“链接”）](http://en.wikipedia.org/wiki/Language_Integrated_Query)是一个 Microsoft .NET Framework 组件，它为 .NET 语言添加了本机数据查询功能，尽管存在 Java [1](http://en.wikipedia.org/wiki/Language_Integrated_Query)、PHP 和 JavaScript 的端口。

> 问题 4) 有没有一种方法可以确保只有我的程序才能修改/查询我的程序数据库？

是的，您的应用程序可以使用将从配置文件中读取的[连接字符串](http://www.connectionstrings.com/)

# mono - Monodroid 没有在 Jelly Bean 4.1.1 上运行

> ID：11595184
> 
> 赞同：2
> 
> 时间：2012-07-21T19:20:14.973
> 
> 标签：mono, xamarin.android

直截了当：我的 Galaxy Nexus 安装了 ICS (4.0.4)，这很有趣。上周来了 JB (4.1.1)，非常有趣。

问题是，甚至没有一个空白项目（只有一个按钮来计算点击次数）在其上运行 Mono For Android 4.2.4 的项目。

输出：打包应用程序.. Microsoft (R) Build Engine 版本 4.0.30319.1 [Microsoft .NET Framework，版本 4.0.30319.269] 版权所有 (C) Microsoft Corporation 2007。保留所有权利。

构建于 2012 年 7 月 21 日下午 4:10:07 开始。节点 1 上的项目“C:\Trabalho\Temp\AndroidApplication1\AndroidApplication1\AndroidApplication1.csproj”（SignAndroidPackage 目标）。_GenerateAndroidAssetsDir：跳过目标“_GenerateAndroidAssetsDir”，因为它没有输出。_ResolveMonoAndroidSdks：MonoAndroid 工具：C:\Program Files (x86)\MSBuild\Novell\ MonoAndroid 框架：C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v4.0.3\;C:\Program Files ( x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\ MonoAndroid 二进制文件：C:\Program Files (x86)\MSBuild\Novell\ Android SDK：C:\Android\android-sdk\ Java SDK：C:\程序文件 (x86)\Java\jdk1.7.0_05\ _ValidateAndroidPackageProperties：GetAndroidPackageName 任务清单文件：AssemblyName：AndroidApplication1 PackageName：GenerateTargetFrameworkMonikerAttribute：跳过目标“GenerateTargetFrameworkMonikerAttribute”，因为所有输出文件相对于输入文件都是最新的。CoreCompile：跳过目标“CoreCompile”，因为所有输出文件相对于输入文件都是最新的。CopyFilesToOutputDirectory：AndroidApplication1 -> C:\Trabalho\Temp\AndroidApplication1\AndroidApplication1\bin\Debug\AndroidApplication1.dll _ConvertDebuggingFiles：跳过目标“_ConvertDebuggingFiles”，因为所有输出文件相对于输入文件都是最新的。_ResolveAssemblies：ResolveAssemblies 任务 ReferenceAssembliesDirectory：C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v4.0.3\;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0 \;; \Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v4.0.3\Mono.Android.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\mscorlib.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.Core.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System .dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\Mono.Security.dll C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0 \System.Xml.dll _GenerateJavaStubs：跳过目标“_GenerateJavaStubs”，因为所有输出文件相对于输入文件都是最新的。_AddStaticResources：资源 obj\Debug\android\assets\machine.config 不变。跳过。资源 obj\Debug\android\src\mono\MonoRuntimeProvider.java 不变。跳过。资源 obj\Debug\android\src\mono\android\Seppuku.java 不变。跳过。_GeneratePackageManagerJava：跳过目标“_GeneratePackageManagerJava”，因为所有输出文件相对于输入文件都是最新的。_CreateBaseApk：跳过目标“_CreateBaseApk”，因为所有输出文件相对于输入文件都是最新的。_CompileJava：跳过目标“_CompileJava”，因为所有输出文件相对于输入文件都是最新的。_CompileDex：跳过目标“_CompileDex”，因为所有输出文件相对于输入文件都是最新的。_BuildApkFastDev：跳过目标“_BuildApkFastDev”，因为所有输出文件相对于输入文件都是最新的。_Mandroid：跳过目标“_Mandroid”，因为所有输出文件相对于输入文件都是最新的。_Sign：跳过目标“_Sign”，因为所有输出文件相对于输入文件都是最新的。完成构建项目“C:\Trabalho\Temp\AndroidApplication1\AndroidApplication1\AndroidApplication1.csproj”（SignAndroidPackage 目标）。

构建成功。0 警告 0 错误

经过时间 00:00:00.25

等待设备.. 目标设备是 armeabi-v7a.. 安装 Mono 共享运行时 (armeabi-v7a - 40204).. 安装 API 15 平台框架.. 删除任何以前的版本.. 将应用程序复制到设备... 开始安装路径... 安装程序集... ========== 部署：0 成功，1 失败，0 跳过 ==========

停止：安装包程序集时出错。 [http://i46.tinypic.com/10pbqma.png](http://i46.tinypic.com/10pbqma.png)

（尝试直接发布 img 但“没有声誉”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:11:05.197

[这是 Mono for Android 中的一个错误](https://bugzilla.xamarin.com/show_bug.cgi?id=6117)，阻止部署到 Jelly Bean 硬件。（据报道，部署到模拟器仍然有效。）

这将在即将发布的 4.2.5 版本中修复。对不起给您带来不便。

作为一种解决方法，您可以禁用共享运行时。（很遗憾，这不是评估版的选项，而且还会大大增加部署时间。）

相反，我建议[使用 x86 模拟器](http://docs.xamarin.com/android/getting_started/installation/Configuring_the_x86_Emulator)，直到修复此错误，除非您有另一个（非 Jelly Bean）硬件设备要测试。

# c# - 接口实现混乱

> ID：11595186
> 
> 赞同：4
> 
> 时间：2012-07-21T19:21:15.270
> 
> 标签：c#, oop, interface

假设你有这个：

```
// General purpose
public interface ISerializer
{
    IDataResult Serialize<T>(T instance);
}

// General purpose
public interface IDataResult
{
}

// Specific - and I implement IDataResult
public interface IMyCrazyDataResult : IDataResult
{
}

public class MyCrazySerializer : ISerializer
{
    // COMPILE ERROR:
    // error CS0738: 'MyCrazySerializer' does not implement interface member 'ISerializer.Serialize<T>(T)'. 
    // 'MyCrazySerializer.Serialize<T>(T)' cannot implement 'ISerializer.Serialize<T>(T)' because it does 
    // not have the matching return type of 'IDataResult'.
    public IMyCrazyDataResult Serialize<T>(T instance)
    {
        throw new NotImplementedException();
    }
} 
```

为什么我会得到这个编译错误？我尊重接口——事实上，我确实返回了一个 IDataResult，尽管是间接的。是编译器无法弄清楚还是从根本上（在OO级别）有什么问题？

我认为拥有一个接口的全部意义在于我可以保证一些实现，但让它保持开放让我添加到它。这就是我正在做的 - 但我得到一个编译错误。

在我的真实代码中，我希望返回类型更具体一点，因为我在派生接口中有几个附加方法。如果我将 MyCrazySerializer.Serialize 的返回类型设为 IDataResult 类型，那么智能感知只会向我显示基本的常用方法，我想在其中显示更具体的接口。

我还能怎么做到这一点？这段代码有什么问题？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T19:26:27.613

C# 不支持[返回类型协方差](http://en.wikipedia.org/wiki/Covariant_return_type)，因此您需要`Serialize<T>`完全按照界面上显示的方式实现该方法。但是，您可以显式地实现它，这意味着任何知道真实类型的客户端都`MyCrazySerializer`可以访问更具体的方法：

```
public class MyCrazySerializer : ISerializer
{
    public IMyCrazyDataResult Serialize<T>(T instance)
    {
        throw new NotImplementedException();
    }

    IDataResult ISerializer.Serialize<T>(T instance)
    {
        return this.Serialize(instance);
    }
} 
```

正如评论所指出的，您可以在显式实现中简单地调用更具体的版本。

您可以将其用作：

```
IMyCrazyDataResult result = new MyCrazySerializer().Serialize<int>(1);
ISerializer serializer = (ISerializer)new MyCrazySerializer();
IDataResult = serializer.Serialize<int>(1); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T19:28:34.577

您可以在 C# 中构建自己的返回类型协方差：

```
// General purpose
public interface ISerializer<out TResult> where TResult : IDataResult
{
    TResult Serialize<T>(T instance);
}

// General purpose
public interface IDataResult
{
}

// Specific - and I implement IDataResult
public interface IMyCrazyDataResult : IDataResult
{
}

public class MyCrazySerializer : ISerializer<IMyCrazyDataResult>
{
    public IMyCrazyDataResult Serialize<T>(T instance)
    {
        throw new NotImplementedException();
    }
} 
```

的返回类型`Serialize`被明确声明为派生自 的东西`IDataResult`，而不是精确的`TResult`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T19:24:53.067

> 为什么我会得到这个编译错误？我尊重界面

不，你不是。你不是返回一个`IDataResult`，而是一个`IMyCrazyDataResult`。是的，它继承自`IDataResult`，但与它不同*。*

当涉及到接口时，您不会得到差异 - 类型必须完全匹配。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-21T19:26:12.320

您没有履行接口契约，因为您指定了不同的方法的返回类型，签名必须完全匹配。这并不意味着您不能返回更指定的接口，以下是完全可以的：

```
// General purpose
public interface ISerializer
{
    IDataResult Serialize<T>(T instance);
}

// General purpose
public interface IDataResult
{
}

// Specific - and I implement IDataResult
public interface IMyCrazyDataResult : IDataResult
{
}

public class MyCrazySerializer : ISerializer
{
    public IDataResult Serialize<T>(T instance)
    {
        // return a IMyCrazyDataResult here
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T19:26:20.773

与 C++ 不同，C# 没有[协变返回类型](http://connect.microsoft.com/VisualStudio/feedback/details/90909/need-covariant-return-types-in-c-all-net-langage)。

# functional-programming - 读SICP的前提条件是什么？

> ID：11595187
> 
> 赞同：4
> 
> 时间：2012-07-21T19:21:15.020
> 
> 标签：functional-programming, lisp, scheme, sicp

现在我得到了像“Simply scheme”和“The little schemer”这样的建议。还有哪些可用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:26:38.933

如果你以前没有在 Scheme 中编程，那么从更简单的书开始。从易到难排序：

1.  小谋士
2.  简单方案
3.  SICP

对于他们中的任何人来说，拥有良好的数学和逻辑直觉，以及大量的好奇心和自学的动力都会有所帮助。

# android - Android：OnTouchListener 在 MapView 上没有响应

> ID：11595189
> 
> 赞同：3
> 
> 时间：2012-07-21T19:21:30.237
> 
> 标签：android, google-maps

我有以下代码可以在 Google 地图上显示我的实际位置：

```
public class LocationProjectActivity extends MapActivity implements OnTouchListener {
private MapController mapController;
private MapView mapView;
private LocationManager locationManager;
private MyOverlays itemizedoverlay;
private MyLocationOverlay myLocationOverlay;
private GeoPoint MyPoint;
public static int longitude;
public static int latitude;
private GeoPoint destinationPoint;

public void onCreate(Bundle bundle) {
  super.onCreate(bundle);
  setContentView(R.layout.main);
  mapView = (MapView) findViewById(R.id.mapview);
  mapView.setBuiltInZoomControls(true);
  mapView.setSatellite(true);
  mapView.computeScroll();
  mapController = mapView.getController();
  mapController.setZoom(13);
  locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
  locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, new GeoUpdateHandler());
  myLocationOverlay = new MyLocationOverlay(this, mapView);
  mapView.getOverlays().add(myLocationOverlay);
  myLocationOverlay.runOnFirstFix(new Runnable() {
    public void run() {
      mapView.getController().animateTo(myLocationOverlay.getMyLocation());
    }
  });
}

@Override
public boolean onTouch(View v, MotionEvent event) {
  System.out.println("SCREEN WAS CLICKED");
  return true;
} 
```

我想要做的是在我触摸屏幕时捕捉，但该方法从未被调用。我已经搜索并找到了这个： [地图中的 OnTouch](https://stackoverflow.com/questions/3664554/ontouch-in-mapview-only-fires-the-first-time)

我尝试了一切，唯一有效的代码是：

```
mapView.setOnTouchListener(new OnTouchListener() {
  public boolean onTouch(View v, MotionEvent event) {
    // Your code and remember to return true!        
    return (true);
  }
}); 
```

问题是，如果我使用这段代码，我的 MapView 会失去它已经拥有的自然翻转和缩放，那么我怎样才能在我的 MapView 中拥有一切？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:56:35.450

有两种方法可以实现您正在寻找的内容，下面是代码：

```
@Override 
      public boolean onTap(GeoPoint p, MapView mapView) {
            Log.d("tap event ", "tap called");
            mapOverlays = mapView.getOverlays();
            drawable  =getResources().getDrawable(R.drawable.marker);
            itemizedOverlay = new SitesOverlay(drawable);
            int lat=(int)p.getLatitudeE6();
            int lng=(int)p.getLongitudeE6();

            GeoPoint point = new GeoPoint(lat,lng);
            Log.d("tap event ", "tapcalled"+lat+""+lng);
            OverlayItem overlayitem = new OverlayItem(point, "", "");

            items.add(overlayitem);
            populate();
            Log.d("tap event ", "populated");
            //      mapOverlays.add(itemizedOverlay);   

            return true;
        } 
```

您可以通过这种方式执行此操作，但这不会在地图上添加任何叠加项目/图钉/标记。

```
@Override
public boolean onTouchEvent(MotionEvent event, MapView mapView) 
{   
    //---when user lifts his finger---
    if (event.getAction() == 1) {                
        p = mapView.getProjection().fromPixels(
            (int) event.getX(),
            (int) event.getY());
            Toast.makeText(getBaseContext(), 
                p.getLatitudeE6() / 1E6 + "," + 
                p.getLongitudeE6() /1E6 , 
                Toast.LENGTH_SHORT).show();
    }                            
    return false;
} 
```

这是教程的链接，用于检测地图上任何位置的触摸

[检测 MapView 上的触摸](http://android-coding.blogspot.com/2011/08/detect-touch-on-mapview-ontapgeopoint-p.html)

在地图上制作标记/图钉/项目并检测每个图钉/标记的点击

[检测 MapView 中标记的触摸](http://android-coding.blogspot.com/2011/08/detect-touch-on-marker-in-mapview.html)

我希望这能帮到您 ：）

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:26:06.187

如果您只想查看触摸屏幕的时间，您仍然可以返回 false，这将允许所有其他拖动和缩放触摸事件起作用。

如果您希望单独的触摸事件不继续其他人，您只会返回 true。

# objective-c - iOS上是否有默认按钮样式

> ID：11595192
> 
> 赞同：2
> 
> 时间：2012-07-21T19:21:51.157
> 
> 标签：objective-c, ios, uikit, uibutton

我正在以编程方式创建视图，当我添加一个带有标题的按钮时，我看到的只是一些文本和清晰的背景。有没有办法获得一个具有圆角、边框和按下状态的默认外观按钮，而无需手动指定每个属性？

如果是后者，是否有样式指南以便我可以获得默认外观按钮？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T19:24:32.490

试试这个：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];                     
button.frame = CGRectMake(100, 100, 30, 30);
button.titleLabel.text = @"A Button";
[self.view addSubview: button]; 
```

以下是每行的作用：

*   第一行将按钮类型设置为圆角矩形，但也可以是`UIButtonTypeCustom`, `UIButtonTypeDetailDisclosure`, `UIButtonTypeInfoLight`, `UIButtonTypeInfoDark`, `UIButtonTypeContactAdd`。
*   第二行设置按钮的框架，即它应该在屏幕上的位置以及按钮的高度和宽度。
*   第三行将按钮的文本设置为“A Button”。
*   第四行也是最后一行将按钮添加到屏幕上。

该按钮将如下所示：

![在此处输入图像描述](../Images/726bdd33854fc64ce4de5a7f1b120ee5.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T19:24:37.513

采用

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

# php - 如何使用数据表和数据映射器？他们有必要吗？

> ID：11595196
> 
> 赞同：2
> 
> 时间：2012-07-21T19:22:32.483
> 
> 标签：php, zend-framework, php-5.3, zend-db, zend-db-table

我以前有过使用框架的经验，但从未真正深入了解过模型。我不知道这是否适用于所有框架或只是 zend，但目前我正在学习 Zend Framework。

我一直在浏览示例应用程序并尝试阅读大量文章，但对于让我感到困惑的事情，我找不到简短而明确的答案。

3个类之间有什么关系？（模型、模型映射器、数据表）

假设我有一个名为的数据库表`users`，它有 3 个字段`userID, userName, userPassword`示例代码是什么？

是否有必要以这种方式构建我的应用程序的模型部分？如果我只有从数据库中检索数据并将结果作为数组返回的函数，这会是一种不好的做法吗？

请考虑这是一个非常简单的应用程序，它具有用户、他们的图片库和消息传递功能。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T11:47:10.440

对于简单的应用程序并在 ZF 中涉足，只需使用将数据库表绑定到数据库适配器的 DbTable 模型即可开始。这不是最佳实践，但它很容易，可以帮助您入门。

使用 Zend_Tool cli 命令将具有这种格式
`zf create db-table name actual-table-name module force-overwrite`，
它将转换为：

```
zf create db-table Users users 
```

db 这将创建一个名为`Users.php`at的文件`/application/models/DbTable/`，它看起来像：

```
<?php

class Application_Model_DbTable_Users extends Zend_Db_Table_Abstract
{
    protected $_name = 'users'; //name of table, does not have to match name of class
} 
```

现在在控制器中使用它`fetchAll`很简单：

```
<?php

class IndexController extends Zend_Controller_Action {

   public function indexAction(){
       $db = new Application_Model_DbTable_Users();//instantiate model
       $result = $db->fetchAll();//perform query, see Zend_Db_Table_Abstract for API
       $this->view->users = $result;//send to view
    } 
} 
```

只需制作这个小类，您就可以访问所选数据库适配器的功能。您还可以在 DbTable 模型中构建方法来自定义您的访问需求。

```
<?php

class Application_Model_DbTable_Users extends Zend_Db_Table_Abstract
{
    protected $_name = 'users'; //name of table, does not have to match name of class

    public function getUser($id) {
       $select = $this->select();//see Zend_Db_Select for info, provides more secure interface for building queries.
       $select->where('id = ?', $id);//can be chained

       $result = $this->fetchRow($select);//returns a row object, if array is needed use ->toArray()
       return $result;
    }
} 
```

此方法的使用方式与 fetchAll() 方法类似：

```
<?php

class IndexController extends Zend_Controller_Action {

   public function indexAction(){
       $id = $this->getRequest()->getParam('id');//assumes the id is set somehow and posted
       $db = new Application_Model_DbTable_Users();//instantiate model
       $result = $db->getUser($id);//perform query, see Zend_Db_Table_Abstract for API
       //$this->view->user = $result;//send to view as object
       $this->view->user = $result->toArray();//send to view as an array
    } 
} 
```

希望这可以帮助您入门，不要忘记阅读[手册](http://framework.zend.com/manual/en/zend.db.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T09:55:11.433

一般来说，与许多其他框架相比，Zend Framework 不会强制您使用特定的模型架构。因此，您可以自由使用最适合您的应用程序的架构。因此，使用[对象关系映射器](http://en.wikipedia.org/wiki/Object-relational_mapping)只是众多方法中的一种。

但是要回答您的具体问题：使用映射器的原因仅仅是因为存储在关系数据库中的信息无法 1:1 转换为对象模型。这称为[对象关系阻抗失配](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)，并在相应的 Wikipedia 文章中进行了详细描述。

`messages`对于您的示例应用程序，让我们考虑和之间的关系`users`。假设您有两个表，括号中的列是：

```
users (id, username, email, password)
messages (recipient: users.id, sender: users.id, message) 
```

这将对应于“哑”对象`User`和`Message`. 现在您要加载特定消息。Object`Message`提供了方法`getRecipient()`，`getSender()`它们都应该返回`User`. 但是，如果您读取数据库中的特定行，它将返回一个数组，而不是包含对您需要的其他对象的所有引用的对象。这正是映射器的用武之地：**它负责将来自数据库的“平面”结果转换为对象，并确保对其他对象的所有必要引用都可用。**

最后，另一个重要的功能是将持久性与普通模型分开。假设有一天您想从经典的关系数据库引擎切换到 XML 存储。只要您的新持久层可以提供必要的对象，您就根本不需要接触业务逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T22:02:20.347

我想确认我的理解。

`Application_Model_User`并且`Application_Model_Message`只有变量及其 setter 和 getter 方法。基本上它们是存储模型。

`Application_Model_MessageMapper`具有类似的函数`getSender`可能会返回一个实例，映射器`Application_Model_User`也使用 db-table 类来检索数据。

现在我可以在我的控制器中做这样的事情；

```
$id = $this->getRequest()->getParam('id'); // I received the message ID
$messageMapper = new Application_Model_MessageMapper(); 
$message = $messageMapper->getMessageByID($id); // this method uses Application_Model_DbTable_Message to fetch data, 
// then creates an object type of Application_Model_Message to set its fields and return.

$sender = $messageMapper->getSender($message);  // returns an instance of Application_Model_User after doing the necessary processes.
```

**因此 Mappers 与 db-table 类对话，从中获取数据，并将该数据设置为模型对象以返回。**

到目前为止，我是否正确理解了这一点？如果是这样，我将开始从事该项目，并在进行过程中了解更多信息。

我仍然不知道如何将这些 db-table 类与多对多关系所需的链接表一起使用，但我想如果我得到了基础，我最终会弄明白的。

请指出我误解的任何内容。

# html - IE导航后台问题

> ID：11595199
> 
> 赞同：1
> 
> 时间：2012-07-21T19:23:00.197
> 
> 标签：html, css

现在完成我的网站，现在有两个问题 - [http://harden6615.com/portfolio/index.html](http://harden6615.com/portfolio/index.html) - 我在另一篇文章中发布了最后一个问题，但另一个问题与 IE 和我的主要导航有关。背景看起来从底部切开，我的悬停没有显示正确的悬停颜色，但在所有其他浏览器中显示良好。没有线索。有什么建议么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:35:27.603

由于您使用过滤器来获取 IE 的渐变背景，因此您必须设置`filter`为`none`悬停样式才能显示正确的背景颜色。

```
#right-nav li a:hover
{
    filter: none;
    background: #434343;
    color: #45FFE0;
} 
```

# azure - 如何计算或估计 Azure 应用程序 (SaaS) 上的每位用户成本？

> ID：11595201
> 
> 赞同：5
> 
> 时间：2012-07-21T19:23:15.213
> 
> 标签：azure, azure-configuration

我相信没有神奇的公式可以得到一个精确的数字，它可能取决于应用程序和用户的一系列不同方面。

但事情是这样的：

我正在开发一个软件，让教会可以管理他们的成员、员工和捐款。将其视为 CRM（或任何类似的东西）。此外，我们必须记住，有些教会有 200 名成员，有些则有 6000 名成员。有的教会一个月能收到几十次捐款，有的一个月能收到几千次捐款。

它将是托管在 Azure 上的 SaaS。每个教堂都会为一个帐户支付月费，这就是我卡住的地方。我如何知道成本以便决定最终价格？

我想知道是否有人可以分享一些有助于我估计的数据：

1) 保持此应用程序运行的最低每月费用（假设有一个教堂）。

2) 每个教堂的预计/估计成本，以便我们计算最终价格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:26:16.607

这是一个非常开放的问题，你可以选择你的架构来优化不同的东西（例如成本、可用性、速度）。您需要决定是构建单租户应用程序还是多租户应用程序。前者可能更简单，更容易根据每个客户进行计量，因为每个部署实际上只有一个客户（或教堂）；但是，这最终可能会导致运行成本高昂，因为您可能会在非高峰时段拥有空闲的网络/工作人员角色。多租户应用程序可让您获得更好的整体计算利用率，但您需要计量每个租户的方法。即使使用多租户应用程序，如果需要，您仍然可以使用单租户数据库。

您可能需要考虑基于某些运营单位（或每个教堂的某些用户数量）的分层定价模型。为了帮助计量，您可以：

*   查看存储分析（这提供了有关访问的 blob/表/队列的详细日志记录，包括在什么时间访问的确切资源）。
*   创建自定义性能计数器并使用您的 Windows Azure 诊断程序发出这些计数器
*   查看 Windows Azure SQL 消耗（[包括动态管理视图](http://msdn.microsoft.com/en-us/library/windowsazure/ff394114.aspx)）

对于基线成本：考虑以下几点：

*   对于 SLA 和一般正常运行时间可靠性，您至少需要 2 个实例
*   始终使用您可以操作的最小实例大小，并随着负载的增加扩展到更多实例
*   假设您正在优化成本，因此您在 Web 角色实例中运行所有后台/队列处理/调度/等，而无需任何工作角色实例
*   对于本练习，假设多租户计算和单租户数据库（Web 版，每个租户平均 < 100MB）。这导致每个租户每月在数据库上花费 5 美元。
*   假设有 5 个教堂。假设最少 2 个小型实例，并假设它在一天中突增到 4 个实例持续 12 小时。这是 3 个实例的平均运行率，即每月 260 美元。
*   假设一些带宽费用，哦，每月 10 美元。
*   假设队列、blob、诊断的一些存储费用为每月 25 美元。

有了上面的假设（完全是为了给你一个稻草人开始）：

*   DB：5 美元 x 5 位租户：每月 25 美元。
*   计算：每月 260 美元
*   带宽：每月 10 美元
*   存储：每月 25 美元
*   球场总计：每月 300-400 美元。

现在：这完全是虚构的，我不知道您的应用程序将存储/生成多少数据或带宽。但希望这能让您大致了解如何开始预测成本。请注意，我没有*在*估算中包括存储事务。我认为这只是背景噪音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T20:37:44.283

1.  运行一台服务器（/数据库/您正在测量的任何内容）。
2.  生成负载，直到一台服务器不再足够。
3.  外推。

由于我用简洁的步骤来回应，这里还有一件事要考虑。如何确定您的价格：

1.  确定您的成本。
2.  确定您的客户将支付多少费用。
3.  在两者之间收取一些费用。

请注意，#1*可能*真的无关紧要。假设成本是

# php - 通过超链接将循环中的 PHP 变量传递给另一个 PHP 文件

> ID：11595202
> 
> 赞同：0
> 
> 时间：2012-07-21T19:23:40.980
> 
> 标签：php, mysql, variables, while-loop

这本质上是一个评级系统，其中显示一些文本，用户点击好/坏，数据库添加或减去投票。我目前正在尝试这样做：

文件 #1 (rate.php) - 打印带有文本的随机数据库行。有一个指向 good.php 的“好”超链接和一个指向 bad.php 的“坏”超链接。

文件 #2（good.php 或 bad.php）- 单击链接可根据需要添加或删除数据库中的投票，并通过 header 函数返回 rate.php。

我目前很难将变量从 while 循环传递给 good.php 和 bad.php。因为它们是超链接，所以没有形式。

我什至应该使用while循环吗？有没有更好的方法来构建整个事情？这需要会话吗？

**编辑：**

这是while循环。

```
$query = "SELECT * FROM challenges WHERE visible = 1 ORDER BY RAND() LIMIT 0,1";
$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
    echo "<div id='box'>";
    echo $row['challenge'];
    echo "</div>";
    echo "<div style='text-align: center; font-size: 12px;'>
<span id='good'><a href='good.php'>good</a></span> &nbsp;
<span id='skip'><a href='rate.php'>skip</a></span> &nbsp;
<span id='bad'><a href='bad.php'>bad</a></span></div>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:29:10.550

只需使用 GET 变量传递行 ID

```
good.php?row_id=12345
bad.php?row_id=12345 
```

在 good.php 和 bad.php 中，它变成了一个变量，如：

```
$_GET['row_id'] 
```

# iphone - 多次保存大型 nsstring 文件会使应用程序崩溃

> ID：11595203
> 
> 赞同：0
> 
> 时间：2012-07-21T19:23:48.333
> 
> 标签：iphone, ios, memory-leaks, nsstring

以下代码崩溃。基本上我正在访问保存为文件的非常大的字符串（xml - 包含图像数据）...修改它并将其保存为新名称...在分析时我没有看到此代码有任何泄漏。 .. 但是在重复这个过程 20-25 次之后......应用程序在 iphone 3gs 上崩溃，内存警告级别为 3，它也杀死了整个运行的应用程序......我找不到任何地方这个应用程序泄漏导致内存警告....任何建议

```
NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *documents = [paths objectAtIndex:0];
 NSString *filename = [NSString stringWithFormat:@"%@.yyy",fileToDuplicate];
 NSString *initPath = [documents stringByAppendingPathComponent:filename];
 NSString *final = [NSString stringWithFormat:@"%@.yyy",[[alertView textFieldAtIndex:0] text]];
 NSString *finalPath = [documents stringByAppendingPathComponent:final];
 NSString *newName=[[[alertView textFieldAtIndex:0] text] copy];
 NSError *error;
 NSString *xml = [[NSString alloc] initWithContentsOfFile:initPath encoding:NSASCIIStringEncoding error:&error] ;
 NSString *xml_1=[xml stringByReplacingOccurrencesOfString:[NSString stringWithFormat:@"<file_name><name>%@.yyy</name></file_name>",fileToDuplicate] withString:[NSString stringWithFormat:@"<file_name><name>%@.yyy</name></file_name>",newName]];
NSString *xml_2=[xml_1 stringByReplacingOccurrencesOfString:[NSString stringWithFormat:@"<property_name>%@</property_name>",fileToDuplicate] withString:[NSString stringWithFormat:@"<property_name>%@</property_name>",newName]];
[xml_2 writeToFile:finalPath atomically:YES encoding:NSASCIIStringEncoding error:&error];
 xml=nil;
 [xml release];
 xml_1=nil;
 xml_2=nil;
 [self.mTableView reloadData];
 fileToDuplicate=@"";
 [newName release];
 [pool drain];
 return ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T02:06:54.047

如果您没有看到泄漏的位置，**请**切换到 ARC。就像中间的一天一样清晰：

分配`xml`

将变量`xml`设置为零（泄漏！！！！！！）

释放`xml`(nil) <--- 这什么都不做

最后两个是相反的。您需要在将其设置为 nil**之前释放它。**如果您不理解这个概念，我建议您阅读更多关于指针的内容。释放消息作用于指针的内容，而不是指针本身。后者没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T04:51:33.970

你的问题是这段代码：

```
 xml=nil;
 [xml release]; 
```

您正在将要释放的变量设置为无，然后才有机会被释放...想想看，如果您将一个对象设置为 nil ，则曾经指向该对象的指针不再指向它。现在您没有对要释放的对象的引用，这就是在这种情况下导致内存泄漏的原因。代码应如下所示：

```
 [xml release];
 xml=nil; 
```

# java - 在客户端执行的 Oracle 查询

> ID：11595215
> 
> 赞同：1
> 
> 时间：2012-07-21T19:25:28.310
> 
> 标签：java, oracle

是否可以找到在客户端执行的 oracle 查询。

比如说，从 jdbc 客户端到 oracle 服务器的 sql 请求。此通信是否会记录在临时位置的某处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:37:47.407

您可以使用[log4jdbc](http://code.google.com/p/log4jdbc/)在客户端记录查询。

我认为记录通信本身没有意义，因为 oracle 使用的协议可能没有公开记录。

# mysql - 将 BIGINT UNSIGNED 转换为 INT

> ID：11595217
> 
> 赞同：15
> 
> 时间：2012-07-21T19:25:44.377
> 
> 标签：mysql, types, casting

我知道将某些数据从较大的数据类型转换为较小的数据类型是非正统的并且具有潜在的危险。但是，在这种情况下，列的值极不可能`BIGINT UNSIGNED`大于列的最大大小`INT`。

所以，使用 MySQL，我正在读取表结构。在阅读`information_schema.columns.ordinal_position`专栏时，我意识到它是`BIGINT UNSIGNED`. 现在，我希望它作为`INT`我的处理目的。我想在 SQL 中转换/转换类型。

`CAST`并且`CONVERT`只允许我更改数据类型的符号，显然。

```
SELECT CAST(ordinal_position AS SIGNED)
FROM information_schema.columns 
```

我希望该列专门返回为`INT`. 例如，在 an 的最大值处截取列`INT`并返回该值。

现在，我将在拉回值后更改数据类型。但我想知道如何在 SQL 中做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T20:03:32.533

[这篇文章](http://www.ehow.com/how_7593959_convert-bigint-int.html)似乎有一个解决方案：

> 创建将执行转换的函数：
> 
> CREATE FUNCTION BigToInt (n BIGINT) 返回整数 返回 n;
> 
> 如您所见，该函数非常简短：它接受一个 BIGINT 并立即将其作为普通整数返回。然而，这样做的一个后果是一些数据将被截断为 Int 的最大可能值。

（大概您可以将“未签名”添加到签名中 - 如果没有，您仍然可以将其与您已经拥有的演员组合，以删除未签名的部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T13:35:47.543

如果您尝试以这种方式创建函数，您将收到此错误：

```
ERROR 1418 (HY000): This function has none of DETERMINISTIC, NO SQL,
or READS SQL DATA in its declaration and binary logging is enabled
(you *might* want to use the less safe log_bin_trust_function_creators
variable) 
```

有关如何解决它的详细信息，请参阅此链接：

[http://dev.mysql.com/doc/refman/5.0/en/stored-programs-logging.html](http://dev.mysql.com/doc/refman/5.0/en/stored-programs-logging.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-18T18:28:57.453

不幸的是，我无权在我正在工作的数据库上创建函数，所以在尝试了一些可行的方法之后：

```
ALTER TABLE table_name MODIFY column_name INTEGER; 
```

让我不必重写 15 个外键。

# vba - 如何在 Excel VBA 中将整数转换为字符串？

> ID：11595226
> 
> 赞同：183
> 
> 时间：2012-07-21T19:26:35.693
> 
> 标签：vba, string, type-conversion, integer

如何在 Excel VBA中将**整**数值“45”转换为**字符串值“45”？**

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-07-21T19:33:18.670

`CStr(45)`就是你所需要的（转换字符串函数）

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2012-07-21T19:32:42.830

试试 CStr() 函数

```
Dim myVal as String;
Dim myNum as Integer;

myVal = "My number is:"
myVal = myVal & CStr(myNum); 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2015-08-20T17:11:04.543

大多数时候，您不需要“转换”；VBA 将为您进行安全的隐式类型转换，*而无需*使用 `CStr`.

下面的代码没有任何问题，因为变量是 String 类型，并且**会自动为您完成隐式类型转换！**

```
Dim myVal As String
Dim myNum As Integer

myVal = "My number is: "
myVal = myVal & myNum 
```

结果：

> “我的号码是：0”

您甚至不必花哨，这也可以：

```
Dim myString as String
myString = 77 
```

> “77”

**唯一需要转换的情况是变量类型不明确**（例如，类型变体或单元格`Value`（即*变*体））。

`CStr`即使那样，如果您与另一个字符串变量或常量复合，您也不必使用函数。像这样：

```
Sheet1.Range("A1").Value = "My favorite number is " & 7 
```

> “我最喜欢的数字是 7”

所以，真的，唯一*罕见*的情况是当你真的想将一个整数值存储到一个变体或单元格值中，而*不是*与另一个字符串复合（这是一个非常罕见的情况，我可能会补充）：

```
Dim i as Integer
i = 7
Sheet1.Range("A1").Value = i 
```

> 7

```
Dim i as Integer
i = 7
Sheet1.Range("A1").Value = CStr(i) 
```

> “7”

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-07-15T08:18:02.640

就我而言，找不到函数 CString 。但是向该值添加一个空字符串也可以。

```
Dim Test As Integer, Test2 As Variant
Test = 10
Test2 = Test & ""
//Test2 is now "10" not 10 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-04T12:53:52.973

不声明变量的最短方法是使用[Type Hints](https://riptutorial.com/vba/example/2960/type-hints)：

```
s$ =  123   ' s = "123"
i% = "123"  ' i =  123 
```

这不会与`Option Explicit`. 类型将不是`Variant`but`String`和`Integer`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-11-07T23:18:50.907

如果您拉入的字符串恰好是一个十六进制数字，例如 E01，那么即使您使用 CStr 函数，即使您首先将其存入 String 变量类型，Excel 也会将其翻译为 0。解决此问题的一种方法是将 ' 附加到值的开头。

例如，当从 Word 表中提取值并将它们带到 Excel 中时：

```
strWr = "'" & WorksheetFunction.Clean(.cell(iRow, iCol).Range.Text) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-02-27T09:04:24.600

[![在此处输入图像描述](../Images/b53728c2402dfd00e0830e2e891ec2b7.png)](https://i.stack.imgur.com/KtJXH.png)

```
 Sub NumToText(ByRef sRng As String, Optional ByVal WS As Worksheet)
    '---Converting visible range form Numbers to Text
        Dim Temp As Double
        Dim vRng As Range
        Dim Cel As Object

        If WS Is Nothing Then Set WS = ActiveSheet
            Set vRng = WS.Range(sRng).SpecialCells(xlCellTypeVisible)
            For Each Cel In vRng
                If Not IsEmpty(Cel.Value) And IsNumeric(Cel.Value) Then
                    Temp = Cel.Value
                    Cel.ClearContents
                    Cel.NumberFormat = "@"
                    Cel.Value = CStr(Temp)
                End If
            Next Cel
    End Sub

    Sub Macro1()
        Call NumToText("A2:A100", ActiveSheet)
    End Sub 
```

[参考：MrExcel.com – 使用 VBA 将数字转换为文本](https://www.mrexcel.com/board/threads/convert-numbers-to-text-with-vba.30232/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-22T01:55:17.197

另一种方法是将数值的两个解析部分拼接在一起：

```
Cells(RowNum, ColumnNum).Value = Mid(varNumber,1,1) & Mid(varNumber,2,Len(varNumber)) 
```

我发现这比`CStr()`因为`CStr()`在我的经验中似乎没有转换来自变体的十进制数字更好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-11T04:56:42.750

如果您有一个有效的整数值并且您的要求是比较值，您可以简单地继续进行比较，如下所示。

```
Sub t()

Dim i As Integer
Dim s  As String

' pass
i = 65
s = "65"
If i = s Then
MsgBox i
End If

' fail - Type Mismatch
i = 65
s = "A"
If i = s Then
MsgBox i
End If
End Sub 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-27T23:24:46.720

接受的答案适用于较小的数字，最重要的是当您从 Excel 工作表中获取数据时。因为较大的数字将自动转换为科学数字，即 e+10。
所以我认为这会给你更一般的答案。我没有检查它是否有任何垮台。

```
CStr(CDbl(#yourNumber#)) 
```

这将适用于 e+ 转换后的数字！因为刚才`CStr(7.7685099559e+11)`将显示为“7.7685099559e+11”而不是预期的：“776850995590”所以我宁愿说我的答案将是更通用的结果。

问候，米

# ios - 架构 i386 的未定义符号：“_OBJC_CLASS_$_Barcode”，引用自：objc-class-ref in

> ID：11595232
> 
> 赞同：2
> 
> 时间：2012-07-21T19:27:55.763
> 
> 标签：ios, xcode, generator, qr-code

我正在尝试将 QR 码生成库集成到我的应用程序中。

QR 生成器库是：

[https://github.com/kuapay/iOS-QR-Code-Generator](https://github.com/kuapay/iOS-QR-Code-Generator)

我想我一定是把它整合错了，因为我收到了这个错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_Barcode", referenced from:
      objc-class-ref in QRViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

最有可能导致这种情况的原因是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T23:49:51.080

您很可能链接到为设备编译的库版本（ARMv6/v7 架构），同时尝试为模拟器（i386 架构）进行编译。尝试在设备上运行。

如果在设备上运行它也不起作用，那么您可能根本没有链接到该库，您应该验证您是否在项目的“Link Binary With Libraries”构建阶段看到了该库。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-04T11:43:10.090

我的问题就这样解决了。
请遵循以下指示：

```
TargetSettings -> Build Phases -> Compile Sources -> add your .m class  ->Build and Run 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-10T07:33:01.290

我通过首先将目标更改为库并按下“CMD + B”来解决我的问题，这将构建所有库文件。然后改回主目标以在设备上编译和运行。

注意：我正在使用 cocoapods，并且在我的项目中也有我自己的自定义动态库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-08T12:43:29.267

我通过转到 Xcode Build 设置解决了同样的问题，在 Architecture 中将标准架构更改为：-

$(ARCHS_STANDARD_32_BIT)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-04T07:12:16.150

清理你的 DerivedData 文件夹，这对我有帮助

```
mv ~/Library/Developer/Xcode/DerivedData ~/Library/Developer/Xcode/DerivedData.old 
```

# html - 怎么做 显示内联？

> ID：11595235
> 
> 赞同：1
> 
> 时间：2012-07-21T19:28:19.667
> 
> 标签：html, css

如何使所有标签内`<li>`联？
就像屏幕截图一样：

![在此处输入图像描述](../Images/539aa1811ec3fa268a9c8b8ea8924b46.png)

页面上有需要应用此解决方案的链接。
[http://vk-magazin.com/products/krossovki-adidas-1](http://vk-magazin.com/products/krossovki-adidas-1)

源代码：

```
<h6 class="product-section-title">Размеры</h6>

<ul>
  <li>
    <input checked="checked" id="products_1025786064_97292824" name="products[1025786064]" type="radio" value="97292824" />
     <label for="products_1025786064_97292824">
     <span class="variant-description">
         Color: Green, Size: M
      </span>
     </label>
   </li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:34:49.507

您的标签标签显示为块`all-0b8239987d681e98cf22b9d4fd156db2.css`，您可以通过添加样式来覆盖它

```
#product-variants label {display:inline;} 
```

# ios - 将 UIImageView 添加到 Storyboard 中的表视图

> ID：11595237
> 
> 赞同：0
> 
> 时间：2012-07-21T19:28:32.067
> 
> 标签：ios, xcode, storyboard

我想在表格视图的底部添加一个 ImageView（在单元格上方的固定位置），以便我可以在那里放置一个自定义选项卡栏。但是，当我将 Image View 拖到 Storyboard 中的 Table 视图时，它会将自身附加到原型单元格的底部。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:26:47.750

不要使用图像视图，而是在情节提要中选择您的 tableView ViewController，然后在实用程序窗格（右窗格）的模拟指标部分中，为“底部栏”设置选择选项卡栏。

然后你可以将你的 tabBarItems 拖到模拟的标签栏上。

![在此处输入图像描述](../Images/e129121a291bdd397585570fa89a8a7e.png)

# c - 悬空指针..在一本书中？

> ID：11595241
> 
> 赞同：1
> 
> 时间：2012-07-21T19:28:47.480
> 
> 标签：c

我可能错过了一些东西，但只是想问.. 我在 Advanced Linux Programming 一书中找到了这段代码：

```
 char* get_self_executable_directory ()
    {
      int rval;
      char link_target[1024];
      char* last_slash;
      size_t result_length;
      char* result;
      /* Read the target of the symbolic link /proc/self/exe. */
      rval = readlink (“/proc/self/exe”, link_target, sizeof (link_target));
      if (rval == -1)
        /* The call to readlink failed, so bail. */
        abort ();
      else
        /* NUL-terminate the target. */
        link_target[rval] = ‘\0’;
      /* We want to trim the name of the executable file, to obtain the
      directory that contains it. Find the rightmost slash. */
      last_slash = strrchr (link_target, ‘/’);
      if (last_slash == NULL || last_slash == link_target)
        /* Something strange is going on. */
        abort ();
      /* Allocate a buffer to hold the resulting path. */
      result_length = last_slash - link_target;
      result = (char*) xmalloc (result_length + 1);
      /* Copy the result. */
      strncpy (result, link_target, result_length);
      result[result_length] = ‘\0’;
      return result;
    } 
```

我的问题是，这个函数不是返回一个悬空指针吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T19:30:55.870

它返回一个指针并期望释放将在客户端代码中完成。当您看到返回指针的函数时，您总是要问自己（实际上是作者......）内存的所有权（即释放它的责任）是否传递给函数的客户端，如果是，它应该如何传递被释放。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T19:30:22.867

不——它分配内存，并返回它。

# validation - GWT ListEditor 实现 HasEditorErrors，ListEditor 的自定义错误标记

> ID：11595246
> 
> 赞同：0
> 
> 时间：2012-07-21T19:29:51.660
> 
> 标签：validation, gwt, bean-validation

我有这个 ListEditor 负责编辑客户的许可证。在我的`CustomerEditor`中，thie`LicensesEditor`绑定到类型为 的路径许可证`List<License>>`。

> 客户 (1)--> (许多) 许可证 (java.util.List)

现在，验证规则规定每个客户至少需要一个许可证。约束违规工作完美。但是如何为 ListEditor 实现 HasEditorErrors ...我想提供自己的错误标记。

**我为 HasEditorErrors < T > 的泛型参数 T 注入什么类型**？

```
public interface HasEditorErrors<T> extends Editor<T> 
```

ListEditor 的签名如下...

```
public class LicensesEditor extends Composite implements IsEditor<ListEditor<License, LicenseInListEditor>> 
```

我试图实现`HasEditorErrors<List<License>>`在运行时给出错误：

> [调试] [klawtapp] - 下降到许可证 [错误] [klawtapp] - 在代理类型 java.util.List 中找不到路径编辑器的 getter

如果我实施`HasEditorErrors<LicensesEditor>`

> [错误] [klawtapp] 在代理类型 com.klawt.screen.ui.customers.LicensesEditor 中找不到路径编辑器的 getter

在 HasEditorErrors 中保留问号作为实现的接口会产生编译时错误：

> LicensesEditor 类型不能扩展或实现 HasEditorErrors。超类型不能指定任何通配符 LicensesEditor.java

有人吗？

*更新，下面的完整代码：*

```
public class LicensesEditor extends Composite implements IsEditor<ListEditor<License, LicenseInListEditor>> {

    @UiField
    Image validationErrorIcon;

    interface LicensesEditorUiBinder extends UiBinder<Widget, LicensesEditor> {
    }

    private static LicensesEditorUiBinder uiBinder = GWT.create(LicensesEditorUiBinder.class);

    @UiField
    VerticalPanel container;

    ListEditor<License, LicenseInListEditor> editor;

    public LicensesEditor() {
        initWidget(uiBinder.createAndBindUi(this));
        editor = ListEditor.of(new LicenseInListEditorSource());
        clearErrors();
    }

    @Override
    public ListEditor<License, LicenseInListEditor> asEditor() {
        return editor;
    }

    public void addLicense(License emailAddress) {
        editor.getList().add(emailAddress);
        if (emailAddress.getAdministrator()) {
            setPrimary(editor.getList().size() - 1);
        }
    }

    public void remove(int index) {
        editor.getList().remove(index);
    }

    public void update(int index, License emailAddress) {
        editor.getList().remove(index);
        editor.getList().add(index, emailAddress);
    }

    /**
     * make the phonenumber at the index the primary phonenumber and the other
     * phone numbers not primary.
     * 
     * @param index
     */
    public void setPrimary(int index) {
        int loop = 0;

        for (License emailAddress : Collections.unmodifiableList(editor.getList())) {
            emailAddress.setAdministrator(index == loop);
            update(loop, emailAddress);
            loop++;
        }
    }

    private class LicenseInListEditorSource extends EditorSource<LicenseInListEditor> {

        @Override
        public LicenseInListEditor create(final int index) {
            LicenseInListEditor editor = new LicenseInListEditor();
            editor.addDeleteHandler(new ListEditorDeleteEventHandler() {
                @Override
                public void onEditorEvent(ListEditorDeleteEvent event) {
                    remove(index);
                }
            });
            editor.addUpdateHandler(new EditorUpdateEventHandler() {
                @Override
                public void onEditorUpdate(EditorUpdateEvent event) {
                    License emailAddress = (License) event.getUpdated();
                    update(index, emailAddress);
                    if (emailAddress.getAdministrator()) {
                        setPrimary(index);
                    }
                }
            });
            container.insert(editor, index);
            updateOddEven();
            return editor;
        }

        @Override
        public void dispose(LicenseInListEditor subEditor) {
            container.remove(subEditor);
            updateOddEven();
        }

        @Override
        public void setIndex(LicenseInListEditor editor, int index) {
            container.insert(editor, index);
            updateOddEven();
        }

        public void updateOddEven() {
            for (int widgetIndex = 0; widgetIndex < container.getWidgetCount(); widgetIndex++) {
                container.getWidget(widgetIndex).setStyleName(KlawtResources.INSTANCE.form().listEditorEven(),
                        (widgetIndex % 2 == 0));
                container.getWidget(widgetIndex).setStyleName(KlawtResources.INSTANCE.form().listEditorOdd(),
                        (widgetIndex % 2 == 1));
            }
        }

    }

    // @Override
    // public void showErrors(List<EditorError> errors) {
    // StringBuilder sb = new StringBuilder();
    // int errorCount = 0;
    // for (EditorError editorError : errors) {
    // if (errorCount > 0) {
    // sb.append("\n");
    // }
    // errorCount++;
    // sb.append(editorError.getMessage());
    // }
    // if (errorCount == 0) {
    // clearErrors();
    // } else {
    // container.setStyleName(KlawtResources.INSTANCE.form().formError(), true);
    // validationErrorIcon.setVisible(true);
    // validationErrorIcon.setTitle(sb.toString());
    // }
    // }

    private void clearErrors() {
        container.setStyleName(KlawtResources.INSTANCE.form().formError(), false);
        validationErrorIcon.setVisible(false);
        validationErrorIcon.setTitle("");
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T01:18:20.737

`T`不是问题，混合和匹配`Editor`，并且`IsEditor`当与（我怀疑 - 没有发布超过类型 decls 很难说）一些内部`LicensesEditor`（即`ListEditor`成员的访问修饰符，我认为你称之为`editor`）结合时。

接口用于表示“`IsEditor<E>`我自己不是编辑器，但我可以提供一个”，其实现的非私有成员`Editor`将被忽略，但框架仍会下降到`E`. 因为（我怀疑）你的`LicensesEditor`内部实际上有一个非私人编辑成员，

那么这会给你带来什么影响呢？几个对我来说似乎有意义的选择：

*   停止使用`IsEditor`，以便您可以实施`HasEditorErrors`. 相反，make `LicensesEditor extends Composite implements Editor<List<Licenses>>, HasEditorErrors<List<Licenses>>`（虽然技术上第一个`Editor`被第二个覆盖，但我发现它有助于可读性）。现在您仍然需要一个 ListEditor 成员（几乎可以肯定您目前已经拥有），但是用注释`@Path("")`表示它应该编辑整个编辑器获得的相同值。

*   使用`IsEditor`，但使其在两者上都通用`HasEditorErrors`-`ListEditor`创建一个 ListEditor 子类，该子类也实现`HasEditorErrors`并具有错误支持。这允许您仍然`Composite`在包装类中进行扩展。把这个转过来，你就...

*   扩展`ListEditor`，并实现`IsWidget`而不是扩展 Composite。这实现了与第一个选项相同的效果（您可以通过摆脱 来`LicensesEditor`实现），而不用使事情变得有意义。现在，不再调用 ，而是保留对小部件的引用，并将其返回给.`HasEditorErrors``IsEditor``@Path``Composite.initWidget``IsWidget.asWidget()`

*   最后，什么都不做。来自`IsEditor`Javadocs：

    > 一个类型同时实现 Editor 和 IsEditor 是合法的。在这种情况下，从 {@link #asEditor()} 返回的编辑器将是 IsEditor 实例的共同编辑器。

    这意味着它`LicensesEditor`应该是一个有效的`Editor - any non-private Editor member should either be changed to private or tagged with`@Ignore`。

# asp.net - 小型 MySQL 数据库备份中断 TCP 流量

> ID：11595247
> 
> 赞同：0
> 
> 时间：2012-07-21T19:29:59.647
> 
> 标签：asp.net, mysql, tcp, backup

我有一个我正在开发的系统如下：

- 在任何时候，三个或四个客户端通过 TCP 套接字向中央服务器发送数据。
-Windows 7 Pro，2.4ghz 双核 Xeon 服务器，具有 4gb（即将成为 8gb）RAM，其中包含接收客户端数据的 C# ASPX Web 应用程序以及随后放置数据的 MySQL 数据库进入。
- 存储数据库备份的迷你电脑，每晚都会进行备份。我运行的批处理文件在没有传入 TCP 流量时工作正常，是：

> @echo off
> echo 运行转储...
> net use z: \\BackupComputerName\SharedFolder >c:\debuglog.txt 2>&1
> cd C:\Program Files\MySQL\MySQL Server 5.5\bin
> mysqldump.exe -uroot -pmypassword - -result-file="z:\backup.sql" database_name
> echo 完成！

现在，数据库转储只有大约 5 兆字节。即便如此，我注意到当 Xeon 服务器在传入 TCP 流量时执行它们时，客户端 TCP 套接字即使没有完全断开连接也会显着减慢。并且数据库转储没有成功到备份机器。事实上，它于昨晚 8 点 20 分开始在 Windows 任务管理器中运行，到现在（下午 12 点 21 分），它仍然列为正在运行！（还没有生成备份文件。）我认为我的一个客户在昨晚触发备份任务大约一分钟后死亡并不是巧合。

任何关于如何重新配置​​备份例程和/或系统配置以使其工作的想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:49:38.977

已`mysqldump`创建本地文件，然后使用`rsync`该`--bwlimit`选项，或`robocopy`使用`/IPG:n`将文件复制到网络共享的选项：

```
@echo off
echo Running dump...
net use z: \\BackupComputerName\SharedFolder >c:\debuglog.txt 2>&1
cd C:\Program Files\MySQL\MySQL Server 5.5\bin
mysqldump.exe -uroot -pmypassword --result-file="%temp%\backup.sql" database_name
robocopy "%temp%\backup.sql" z:\ /IPG:100
echo Done! 
```

# javascript - 输出导致与正则表达式不匹配的第一个字符

> ID：11595255
> 
> 赞同：3
> 
> 时间：2012-07-21T19:30:49.910
> 
> 标签：javascript, regex

是否可以从导致与正则表达式不匹配的字符串（其索引）中输出第一个字符？是否可以仅使用正则表达式匹配操作或必须使用更复杂的操作？

例如，在 JavaScript 中，我可能有一个`/^\d{3}\s\d{2}$/`匹配字符串的正则表达式，其中包含 3 位数字，后跟一个空格和另外 2 位数字。我有一个字符串`"123a45"`，我应用了这个正则表达式。由于正则表达式不匹配，因此执行此操作（例如`"123a45".match(/^\d{3}\s\d{2}$/)`）会返回。`null`如何获取导致这种不匹配的第一个字符（在本例`"a"`中为索引为 3 的字符）？

一个用例可能是将用户直接指向导致用户输入的字符串根据用于其验证的某些正则表达式无效的字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:58:08.390

您需要将正则表达式模式分解为部分匹配的所有可能匹配模式，以及从最长匹配到最短匹配（或无匹配）排序的此类模式列表。一旦你得到匹配，计算（部分）匹配的长度，你将得到导致不匹配的字符的位置。来自该位置且长度为一个字符的子字符串正是该不匹配背后的字符（如果有的话）。如果没有不匹配，则返回空（子）字符串。

```
var s = "123a45";
alert(s.substr(s.match(/^(\d{3}\s\d{2}|\d{3}\s\d|\d{3}\s|\d{0,3})/)[1].length,1)); 
```

[http://jsfiddle.net/ETWWS/](http://jsfiddle.net/ETWWS/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T20:09:28.333

要详细解释输入无效的原因，最好编写一个小型解析器并提供反馈。可以将用户指向导致问题的角色，并提供更有帮助和针对性的错误消息。

在解析器中，您可以使用正则表达式来断言字符串中的某些属性以生成有针对性的错误消息。例如，如果输入必须包含 6 个字符，并且前 3 个字符是数字，后 3 个字符是字母字符，那么您可以编写一个正则表达式来断言输入的长度以向用户报告错误。

要么这样，要么只使用您一直在使用的正则表达式并提供通用错误消息（有关如何正确输入的有用说明）。普通用户最多2-3次就可以正确输入数据。在此之上，可能是恶意用户，或者要输入的数据不适用于所有用户，或者缺少您的指令。

# php - 如何使用 url 发送 php 变量

> ID：11595257
> 
> 赞同：-3
> 
> 时间：2012-07-21T19:30:58.840
> 
> 标签：php

例如，我想发送`$test`一个 url，然后我想使用`$_GET`ti 获取变量。

这可能是一个愚蠢的问题，但是如果您有其他方法，请告诉我。顺便说一句，我通常会为此使用 include ，但由于一些很长的原因，这次我不能使用它。我考虑的另一个选项是 fwrite。这样做的问题是多个用户将尝试一次写入此文件。它只是不实用。

任何帮助或提示都会很棒。多谢你们。对不起这个愚蠢的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:33:19.523

你应该在你的网络浏览器中输入这个

```
www.host/yourscript.php?test=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:40:57.250

啊，我现在明白你的问题了。

您想使用已经定义的变量`$test`并将其传递到脚本中的某个地方。

如果您通过 URI 传递“变量”，如下所示：`page.php?a=test`

那你可以说...

```
echo "The value of of \$test is " . $$_GET['a']; 
```

示例它是如何工作的：

```
$test = 'apples'; // your variable
$_GET['a'] = 'test'; // the get variable

echo $$_GET['a']; // the string value of the get value appended to an empty variable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:37:19.227

```
<?php
    $test = 1
    $passvar = "mynextpage.php?test=$test";
?> 
```

从下一页你可以做

```
<?php
    $passed_var = $_GET['test'];
?> 
```

# php - 覆盖 symfony2 控制台命令？

> ID：11595261
> 
> 赞同：11
> 
> 时间：2012-07-21T19:31:12.803
> 
> 标签：php, symfony

是否可以覆盖 symfony2 应用程序/控制台命令？例如，在 FOS UserBundle 中，我想添加更多字段，它会在使用控制台创建用户命令创建用户时询问它。这可能吗，还是我需要在自己的包中创建自己的控制台命令？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T11:19:52.163

向命令中添加更多字段的整个过程是：

1.在您的 AcmeDemoBundle 类中，您必须将 FOSUser 设置为父级：

```
<?php

namespace Acme\UserBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;
use Symfony\Component\DependencyInjection\ContainerBuilder;

class AcmeUserBundle extends Bundle
{
    public function getParent()
    {
        return 'FOSUserBundle';
    }
} 
```

2.一旦你这样做了，你可以在你的包中重新创建 CreateUserCommand：

```
<?php

namespace Acme\UserBundle\Command;

use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use FOS\UserBundle\Model\User;

/**
 * @author Matthieu Bontemps <matthieu@knplabs.com>
 * @author Thibault Duplessis <thibault.duplessis@gmail.com>
 * @author Luis Cordova <cordoval@gmail.com>
 */
class CreateUserCommand extends ContainerAwareCommand
{
    /**
     * @see Command
     */
    protected function configure()
    {
        $this
            ->setName('fos:user:create')
            ->setDescription('Create a user.')
            ->setDefinition(array(
                new InputArgument('username', InputArgument::REQUIRED, 'The username'),
                new InputArgument('email', InputArgument::REQUIRED, 'The email'),
                new InputArgument('password', InputArgument::REQUIRED, 'The password'),
                new InputArgument('name', InputArgument::REQUIRED, 'The name'),
                new InputOption('super-admin', null, InputOption::VALUE_NONE, 'Set the user as super admin'),
                new InputOption('inactive', null, InputOption::VALUE_NONE, 'Set the user as inactive'),
            ))
            ->setHelp(<<<EOT
The <info>fos:user:create</info> command creates a user:

  <info>php app/console fos:user:create matthieu</info>

This interactive shell will ask you for an email and then a password.

You can alternatively specify the email and password as the second and third arguments:

  <info>php app/console fos:user:create matthieu matthieu@example.com mypassword</info>

You can create a super admin via the super-admin flag:

  <info>php app/console fos:user:create admin --super-admin</info>

You can create an inactive user (will not be able to log in):

  <info>php app/console fos:user:create thibault --inactive</info>

EOT
            );
    }

    /**
     * @see Command
     */
    protected function execute(InputInterface $input, OutputInterface $output)
    {
        $username   = $input->getArgument('username');
        $email      = $input->getArgument('email');
        $password   = $input->getArgument('password');
        $name       = $input->getArgument('name');
        $inactive   = $input->getOption('inactive');
        $superadmin = $input->getOption('super-admin');

        $manipulator = $this->getContainer()->get('acme.util.user_manipulator');
        $manipulator->create($username, $password, $email, $name, !$inactive, $superadmin);

        $output->writeln(sprintf('Created user <comment>%s</comment>', $username));
    }

    /**
     * @see Command
     */
    protected function interact(InputInterface $input, OutputInterface $output)
    {
        if (!$input->getArgument('username')) {
            $username = $this->getHelper('dialog')->askAndValidate(
                $output,
                'Please choose a username:',
                function($username) {
                    if (empty($username)) {
                        throw new \Exception('Username can not be empty');
                    }

                    return $username;
                }
            );
            $input->setArgument('username', $username);
        }

        if (!$input->getArgument('email')) {
            $email = $this->getHelper('dialog')->askAndValidate(
                $output,
                'Please choose an email:',
                function($email) {
                    if (empty($email)) {
                        throw new \Exception('Email can not be empty');
                    }

                    return $email;
                }
            );
            $input->setArgument('email', $email);
        }

        if (!$input->getArgument('password')) {
            $password = $this->getHelper('dialog')->askAndValidate(
                $output,
                'Please choose a password:',
                function($password) {
                    if (empty($password)) {
                        throw new \Exception('Password can not be empty');
                    }

                    return $password;
                }
            );
            $input->setArgument('password', $password);
        }

        if (!$input->getArgument('name')) {
            $name = $this->getHelper('dialog')->askAndValidate(
                $output,
                'Please choose a name:',
                function($name) {
                    if (empty($name)) {
                        throw new \Exception('Name can not be empty');
                    }

                    return $name;
                }
            );
            $input->setArgument('name', $name);
        }
    }
} 
```

注意我添加了一个名为 name 的新输入参数，在命令中我使用的是 acme.util.user_manipulator 服务而不是原来的操作系统，我还将处理用户名。

3.创建自己的UserManipulator：

```
<?php

namespace Acme\UserBundle\Util;

use FOS\UserBundle\Model\UserManagerInterface;

/**
 * Executes some manipulations on the users
 *
 * @author Christophe Coevoet <stof@notk.org>
 * @author Luis Cordova <cordoval@gmail.com>
 */
class UserManipulator
{
    /**
     * User manager
     *
     * @var UserManagerInterface
     */
    private $userManager;

    public function __construct(UserManagerInterface $userManager)
    {
        $this->userManager = $userManager;
    }

    /**
     * Creates a user and returns it.
     *
     * @param string  $username
     * @param string  $password
     * @param string  $email
     * @param string  $name
     * @param Boolean $active
     * @param Boolean $superadmin
     *
     * @return \FOS\UserBundle\Model\UserInterface
     */
    public function create($username, $password, $email, $name, $active, $superadmin)
    {
        $user = $this->userManager->createUser();
        $user->setUsername($username);
        $user->setEmail($email);
        $user->setName($name);
        $user->setPlainPassword($password);
        $user->setEnabled((Boolean)$active);
        $user->setSuperAdmin((Boolean)$superadmin);
        $this->userManager->updateUser($user);

        return $user;
    }
} 
```

在这个类中，我只需要创建函数，因此其他命令（如提升、降级..）不知道您的用户的新属性，因此我不需要创建 CompilerPass 来覆盖整个服务。

4.最后，在 Resources/config 目录中定义这个新的 UserManipulator 服务，并将其添加到 DependencyInjection Extension 中：

```
services:
    acme.util.user_manipulator:
        class:      Acme\UserBundle\Util\UserManipulator
        arguments:  [@fos_user.user_manager] 
```

完毕！！！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-07-19T07:17:48.430

Symfony 4[移除了包继承](https://symfony.com/doc/current/bundles/inheritance.html)，但你仍然可以通过装饰命令来覆盖它们。它更干净，不需要捆绑。只需将其添加到`services.yaml`：

```
services:
    App\Command\MyCustomCommand:
        decorates: command_you_want_to_override 
```

请注意，这`command_you_want_to_override`是一个服务名称。对于旧的，Symfony 3.3 之前的命令，它将是带有点和下划线的小写字母（例如。`doctrine_migrations.diff_command`），对于较新的命令，它将是一个类名。您可以通过检查其捆绑包的服务配置或搜索`debug:container`. 在 Linux 或 macOS 上，它将是：

```
php bin/console debug:container | grep Command 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-22T11:00:01.737

如果您创建（或已经拥有）您自己的作为该捆绑包子的捆绑包（请参阅[捆绑包继承](http://symfony.com/doc/master/cookbook/bundles/inheritance.html)），您可以覆盖捆绑包的控制台命令。然后通过在你的包中放置一个与原始命令具有相同位置/名称的类，你可以有效地覆盖它。

例如，要覆盖 FOS/UserBundle/Command/CreateUserCommand.php，创建 MyCompany/UserBundle/Command/CreateUserCommand，其中 MyCompanyUserBundle 将 FOSUserBundle 作为其父级。

您的命令类可以扩展 FOS 命令类以重用（部分）它。但是，查看 FOS CreateUserCommand 后，我认为您需要覆盖所有方法以添加更多输入字段，在这种情况下，这样做没有任何好处。当然，这也意味着您可以在任何包中创建自己的命令，但我认为最好将 FOSUserBundle 的自定义保留在子包中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-11T09:01:18.523

在 Symfony **(3.3)**中，您可以通过以下链接覆盖控制台命令。 [https://symfony.com/doc/current/console/calling_commands.html和](https://symfony.com/doc/current/console/calling_commands.html)[https://symfony.com/doc/current/console/input.html](https://symfony.com/doc/current/console/input.html) 上的选项

来自 symfony 文档的代码：

```
use Symfony\Component\Console\Input\ArrayInput;
// ...

protected function execute(InputInterface $input, OutputInterface $output)
{
    $command = $this->getApplication()->find('demo:greet');

    $arguments = array(
        'command' => 'demo:greet',
        'name'    => 'Fabien',
        '--yell'  => true,
    );

    $greetInput = new ArrayInput($arguments);
    $returnCode = $command->run($greetInput, $output);

    // ...
} 
```

# python-2.7 - Python 2.7 的 argparse - 打开文件以读取 utf-16

> ID：11595263
> 
> 赞同：2
> 
> 时间：2012-07-21T19:31:22.113
> 
> 标签：python-2.7, argparse

我正在使用模块 argparse，我想要一个 input_file 的命令行参数，它是 utf-16 中文件的路径。我想使用 argparse.FileType 来做类似的事情：

```
parser.add_argument('input_file', type=argparse.FileType('r')) 
```

不幸的是， argparse.FileType`__init__`不接收编码参数。

有没有另一种方法可以做到这一点，而不是仅仅将`input_file`'s 的类型设置为 str，并实现一个子类`argparse.Action`来打开文件`codecs`？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:34:58.230

`argparse.FileType` [不是那么长或复杂](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Lib/argparse.py#l1100)。[您可以通过子类化或仅通过复制源代码](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Lib/argparse.py#l1100)并对其进行修改来制作自己的带有编码参数的版本。（子类化似乎有点傻，因为你必须覆盖整个类，除了可能`__repr__`。）

# javascript - Ajax（这个）不起作用

> ID：11595266
> 
> 赞同：10
> 
> 时间：2012-07-21T19:31:55.077
> 
> 标签：javascript, jquery, html, ajax

当试图访问 $container 的 '.box' 类时，在 ajax 调用中使用 (this) 不起作用。

```
$container.on(
        "click",
        ".box",
        function(event){
            var description;
            if($(this)[0].style.width == '70%'){
                $(this).find(".resultData").fadeOut('slow');
                $(this).css('width', '18%');
            }else{
                $.ajax({
                    url:'scripts/php/fetchResultsData.php',
                    data: {action:value},
                    type: 'post',
                    dataType: 'json',
                    success: function(data){
                        description = data[0];
                        $(this).css('width', '70%');
                        $(this).append("\
                            <div class='resultData'>\
                                <div class='resultName'>" + $(this).find("p").html() + "</div>\
                                <div class='resultDesc'>" + description +"</div>\
                            </div>");
                        /*alert($(this).find("p").html());*/
                    }
                    })
            }
            $container.masonry('reload');
        }
    ); 
```

如果不清楚我要做什么，我正在尝试更改动态元素的 css。但例如，

`$(this).css('width','70%');`

根本没有调整css。如果我将它移到 ajax,success 部分之外，它可以工作，但是我无法获得“描述”。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-21T19:35:36.113

你很近。在您使用它的上下文中，“this”指的是 ajax 请求，而不是发出事件的东西。要解决此问题，请在发出 ajax 请求之前存储此副本：

```
 }else{
                        var me = this;
                        $.ajax({
                            ...
                            success: function(data){
                                description = data[0];
                                $(me).css('width', '70%'); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-21T19:48:40.030

只需将此添加到您的`$.ajax`通话中...

```
context: this, 
```

......它会工作的。

* * *

```
`$.ajax({
    context: this, **// <-- right here**
    url:'scripts/php/fetchResultsData.php',
    data: {action:value},
    type: 'post',
    dataType: 'json',
    success: function(data) { // ...` 
```

# javascript - Concat 似乎不适用于 JSON 获得的数组

> ID：11595268
> 
> 赞同：1
> 
> 时间：2012-07-21T19:32:07.213
> 
> 标签：javascript, jquery, json, concat

我在使用 javascript 中的 concat 函数时遇到了一些问题。据我所知，我使用正确，但它没有成功地将 JSON 中的数组“值”连接到数组“currentAbilities”：

```
$.each(ABILITIES, function(key,value) {
        if(key==raceName||(key==className&&(!isAcolyte)))
        {
            document.getElementById('abs').innerHTML = value[1];
            currentAbilities.concat(value);
        }
    }) 
```

innerHTML 设置行显示数组“value”确实存在。知道为什么我无法连接吗？价值当然来自 JSON，这与它有什么关系吗？恐怕我最近才熟悉 $.each 和 JSON 的用法，可能做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T19:54:34.303

假设 JSON 已被解析，您需要保留对创建的新 Array 的引用，`concat()`因为该`.concat()`方法不会修改原始...

```
currentAbilities = currentAbilities.concat(value); 
```

* * *

或者如果你想修改数组就使用`.push`with ...`.apply``currentAbilities`

```
currentAbilities.push.apply(currentAbilities, value) 
```

* * *

此外，请确保您的`raceName`和`className`变量是您所期望的。

# c# - 是否有任何第三方库用于将 Postgresql 或 MySql 与 C# 一起使用，允许直接对象到数据库的转换？

> ID：11595276
> 
> 赞同：1
> 
> 时间：2012-07-21T19:33:04.187
> 
> 标签：c#, mysql, linq, postgresql

基本上，我想做 LINQ 所做的事情，并在没有查询的情况下加载和保存我的对象。有小费吗？

看起来我正在尝试模拟 LINQ to SQL 对象关系映射。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:41:51.077

你所要求的看起来像一个带有 LINQ 提供程序的[对象关系映射器。](http://en.wikipedia.org/wiki/Object-relational_mapping)

例如，[NHibernate](http://nhforge.org/Default.aspx) ORM（我个人最喜欢的）支持 PostgreSQL 和 MySQL。从[3.0 版](http://www.zvolkov.com/clog/2010/12/04/whats-new-in-nhibernate-3-0-ga/)开始，它有一个内置的 LINQ 提供程序。

Microsoft 的[实体框架](http://msdn.microsoft.com/en-us/library/bb399572.aspx)没有像 NHibernate 那样对许多数据库引擎提供开箱即用的支持，但是有[第三方解决方案](http://msdn.microsoft.com/en-us/data/dd363565.aspx)。顺便说一句，EF两天前[开源了。](http://weblogs.asp.net/scottgu/archive/2012/07/19/entity-framework-and-open-source.aspx)

有一个有趣的网站可以比较 .NET 世界中的各种 ORM - [ORM Battle](http://ormbattle.net/)。在那里，您可以找到其他流行的 ORM 列表，并查看它们之间的比较。

一些 SO ORM 问题：
[https ://stackoverflow.com/questions/132676/which-orm-for-net-would-you-recommend](https://stackoverflow.com/questions/132676/which-orm-for-net-would-you-recommend)
[Best ORM to use with C# 4.0](https://stackoverflow.com/questions/3187928/best-orm-to-use-with-c-sharp-4-0)

此外，[微 ORM](https://stackoverflow.com/questions/5829891/which-micro-orm-to-use)最近也越来越受欢迎。它们并没有真正提供数据库映射的完整对象，也没有提供 Linq 支持（大多数），但它们可能是完成这项工作的好工具。

# javascript - 在提交时将表单值传递给 ajax 调用

> ID：11595285
> 
> 赞同：0
> 
> 时间：2012-07-21T19:33:57.930
> 
> 标签：javascript, jquery

我有一个常见的情况是允许用户提交带有一些值的表单，并且需要将这些值传递给我的 ajax 调用。这种方法有效，但是除了使用选择器之外，还有更优雅/更有效的方式来访问表单值吗？

```
$("#myForm").submit(function(){

myData = {name: $("#name").val(), age: $("#age").val()}

  $.ajax({
    url: "foo.php",
    data: myData, 
    type: get
  });
});

<form id="myForm">
Name: <input type="text"  id="name">
Age: <input type="text" id="age">
</form> 
```

# ruby-on-rails - 路径需要以 / 开头（ArgumentError）

> ID：11595286
> 
> 赞同：0
> 
> 时间：2012-07-21T19:34:14.077
> 
> 标签：ruby-on-rails, webmatrix, helicontech

这个问题与几天前[Neil Hoff 的帖子类似。](https://stackoverflow.com/questions/11569614/deploy-sinatra-template-on-helicon-zoo)我使用 Helicon Zoo 的 ruby​​ 包下载了 Ruby On Rails。我正在使用 IIS Express 和 WebMatrix 在 Windows 7 上运行它。

就像，当我浏览该网站时，另一个问题是，我得到以下信息：

```
[tid-12570000] paths need to start with / (ArgumentError)
C:/Ruby19/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/urlmap.rb:33:in `block in remap'
C:/Ruby19/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/urlmap.rb:25:in `each'
C:/Ruby19/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/urlmap.rb:25:in `map'
C:/Ruby19/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/urlmap.rb:25:in `remap'
C:/Ruby19/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/urlmap.rb:18:in `initialize'
C:/Ruby19/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:128:in `new'
C:/Ruby19/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:128:in `to_app'
C:/ZooExpress/Workers/ruby/lib/app.rb:45:in `build_app'
C:/ZooExpress/Workers/ruby/lib/app.rb:16:in `initialize'
C:/ZooExpress/Workers/ruby/lib/worker.rb:4:in `new'
C:/ZooExpress/Workers/ruby/lib/worker.rb:4:in `initialize'
C:/ZooExpress/Workers/ruby/zoorack.rb:30:in `new'
C:/ZooExpress/Workers/ruby/zoorack.rb:30:in `<module:Zack>'
C:/ZooExpress/Workers/ruby/zoorack.rb:12:in `<main>' 
```

我知道 Windows 上的 RoR 没有大量追随者，但在过去 2 天里一直在寻找解决方案，并且通过谷歌，唯一远程相关的文本似乎是上面提到的另一个 SO 问题，没有答案。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:07:03.913

请将 Helicon Zoo 模块从 feed 升级到 1.0.0.47 或更高版本。只需转到 Zoo -> Modules 并再次安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:07:58.183

你的虫子来自机架。我认为他搜索这样的网址：`http://localhost/`。要知道他做了什么，我建议你进入这个文件：`C:/Ruby19/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/urlmap.rb`并更改代码以查看`location`. 您可以尝试使用 pry 或 ruby​​-debug 调试您的代码。我知道，这很难。我暂时没有更好的答案。祝你好运！

# asp-classic - 不同环境下的 DbStatus 值 -1 vs 0

> ID：11595291
> 
> 赞同：1
> 
> 时间：2012-07-21T19:34:53.373
> 
> 标签：asp-classic, vb6, odbc

这是我在 VB 中通过 ODBC 检索数据的代码：

```
Dim Ssql
Dim dbstatus 
Dim rs

'*************  

 Ssql =  " Select * from User_Access A Where A.User_pwd ='1234' "
  set rs = Server.CreateObject("ADODB.RecordSet")
  rs = DB.execute(Ssql,dbstatus)      
  Response.Write(dbstatus)
  If dbstatus <> 0 Then
        'Error code here
  Else
        'code here 
  END IF

'************* 
```

代码工作正常。成功执行 sql 语句后，dbstatus 值为 -1 。但根据代码，它应该返回 0 以供进一步执行。对于 0 以外的值，它将给出 Error 。

我在 sql server 2005 和 windows 7 上执行这个。

***但是相同的代码在成功执行 sql 语句时，dbstatus 值在 ODBC 版本和 sql server 版本不同的其他环境中为 0。

谁能帮我吗 。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:02:57.757

如果您在 ADO 和 VB 中使用 Connection.Execute Methode，则第二个参数表示受影响的行。

![在此处输入图像描述](../Images/2fb9eb2f4d1475962ead2d5ed7b3d5d5.png)

# php - 如何根据记录值使 2 个表中的信息匹配

> ID：11595298
> 
> 赞同：0
> 
> 时间：2012-07-21T19:35:47.450
> 
> 标签：php, mysql

我在 PHP 和 MYSQL 中执行此操作，它用于订购系统，订单带有特定项目，我有一个查找表，其中包含我试图排序的唯一编号，我需要弄清楚一种表示订购的商品是否与表中的商品匹配的方法，将 id 复制到订单表中，如下所示

查找表

# 商品编号

1 蝙蝠侠漫画书 1111 2 超人漫画 1112 3 蜘蛛侠漫画 1113

订单表

# Ordered_item 排序 ID

1 蜘蛛侠漫画 NULL 2 蝙蝠侠漫画书 NULL 3 超人漫画 NULL

```
 $sort = "SELECT ordered_item, sort_id
        FROM order table 
            WHERE packing_slip_printed = 0 
    AND LOWER(payment_status) = 'completed' 
    AND address_name <> ''";
 $item_ids = "SELECT *
    FROM look up table";

$rows = $db -> fetch_all_array($sort);
$updaters = $db -> fetch_all_array($item_ids);
$itemname = $updaters['item']; 
$itemkey = $rows['sort_id'];
$updatekey = $updaters['ID'];
echo $updatekey;
if ($itemkey = NULL)
 { if ($updaters['item'] == $rows['item_name'])
     $itemkeys = $updatekey;
mysql_query("UPDATE `paypal_ipn_orders` SET `key` = '. $itemkeys .'");
} 
```

我想更新订单表 Sort_ID 以匹配查找表中的 ID。

我想我可以使用嵌套的 if 语句，但 Sort_ID 只是返回 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:42:10.907

您需要退后一两步，重新考虑您正在做的一切。

1.  您的 sql 无效（至少 $sort 查询缺少 WHERE 关键字）
2.  您显然是在混合 mysqli/pdo 和 mysql_* 函数
3.  您的表结构似乎缺少将它们链接在一起的正确引用（为什么 sort_ID 为空，同样重要的是 - 基于它为空 - 为什么您希望它返回 null 或 0 以外的值？）

或者，也许我们缺少很多关于您尝试编写的代码的信息。

# vim - 在 Vim 中控制选项卡名称

> ID：11595301
> 
> 赞同：3
> 
> 时间：2012-07-21T19:36:17.603
> 
> 标签：vim

在 MacVim 中，选项卡的名称似乎设置为最近在该选项卡中打开的缓冲区的名称。这在使用拆分时会造成混淆。如何将选项卡名称固定到选项卡的左上角窗口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T20:12:38.713

以下函数返回加载在左上角窗口中的缓冲区的名称：

```
function! GuiTabLabel()
    return bufname(winbufnr(1))
endfunction 
```

既然您提到了 MacVim，您可以使用`guitablabel`，将其设置为我们定义的函数：

```
set guitablabel=%{GuiTabLabel()} 
```

上述函数的一个问题是 - 根据工作目录 - 它会将选项卡名称设置为左上角缓冲区中文件的完整路径，这可能会变得很长。

将函数更改为仅使用文件名，丢弃路径：

```
function! GuiTabLabel()
    return fnamemodify(bufname(winbufnr(1)), ":t")
endfunction 
```

要坚持这一点，请在 .vimrc 中定义函数，并在函数之后：

```
set guitablabel=%!GuiTabLabel() 
```

但是这个简单的设置对我使用 MacVim 不起作用：看起来 MacVim 启动正在覆盖我的更改。在 .gvimrc 中设置它在MacVim 中**确实**有效。介于两者之间`:scriptnames`，`:verbose set guitablabel`看起来就像在 .vimrc 中设置它应该可以工作，就像在 windows gvim 中一样。

有关`:help setting-guitablabel`更多信息和更复杂的函数示例，请参阅；查看`:help fname-modifiers`更多路径修饰符选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T19:51:36.063

你可以使用类似的东西

```
au BufEnter * set guitablabel=%{fnamemodify(bufname(winbufnr(1)), ":t")} 
```

请参阅`:help statusline`和`:help guitablabel`了解更多信息。这基本上将选项卡标签设置为左上角窗口的名称。其余的在`:help`... `BufEnter`, `fnamemodify(`, `bufname(`,`winbufnr(`等中。

# objective-c - 为什么更改字典中包含的可变数组不需要更新字典？

> ID：11595303
> 
> 赞同：3
> 
> 时间：2012-07-21T19:36:32.407
> 
> 标签：objective-c, cocoa-touch, collections

我正在尝试 CS193P 课程（Objective-C）中的一段代码。我注意到编译器的工作方式。被`NSMutableArray`调用`photos`添加到`NSMutableDictionary`, `photosByPhotographer`。后来，在`photos`没有任何更改的情况下对进行了更改`photosByPhotographer`。当我登录`photosByPhotographer`时，更改会自动应用到它，它不需要任何额外的代码行！

我想知道编译器是如何做到这一点的？有什么资料可以读吗？

代码如下：

```
- (void)updatePhotosByPhotographer
{
    NSMutableDictionary *photosByPhotographer = [NSMutableDictionary dictionary];
    for (NSDictionary *photo in self.photos) {
        NSString *photographer = [photo objectForKey:FLICKR_PHOTO_OWNER];
        NSMutableArray *photos = [photosByPhotographer objectForKey:photographer];
        if (!photos) {
            photos = [NSMutableArray array];
            [photosByPhotographer setObject:photos forKey:photographer];
            NSLog(@"photosByPhotographer in if: %@", photosByPhotographer);
        }
        [photos addObject:photo];
        NSLog(@"photosByPhotographer after if: %@", photosByPhotographer);
    }
    self.photosByPhotographer = photosByPhotographer;
} 
```

结果`NSLog()`如下：

```
2012-07-20 20:05:57.618 Shutterbug[453:f803] photosByPhotographer in if: {
Dowbiggin =     (
);
}

2012-07-20 20:05:57.620 Shutterbug[453:f803] photosByPhotographer after if: {
Dowbiggin =     (
            {
        accuracy = 16;
        context = 0;
        dateupload = 1342836026;
        description =             {
            "_content" = "";
        };
        farm = 9;
        "geo_is_contact" = 0;
        "geo_is_family" = 0;
        "geo_is_friend" = 0;
        "geo_is_public" = 1;
        id = 7612787270;
        isfamily = 0;
        isfriend = 0;
        ispublic = 1;
        latitude = "37.307085";
        longitude = "-121.900395";
        originalformat = jpg;
        originalsecret = 052e70d412;
        owner = "22751315@N05";
        ownername = Dowbiggin;
        "place_id" = cils8sJUV7MeXHwt9A;
        secret = 4437007c99;
        server = 8161;
        tags = "square squareformat iphoneography instagramapp uploaded:by=instagram foursquare:venue=49f13597f964a5209c691fe3";
        title = "My little goofball";
        woeid = 55971033;
    }
);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T19:45:19.687

那是因为在 Cocoa 中，您使用的是对象并通过引用传递。

想象一下这段代码：

```
NSMutableArray *a, *b;

a  = [NSMutableArray new];
[a addObject:@"A"]; // a contains @"A"
b = a; // b is assigned to the same object
[b addObject:@"B"]; // a and b contain @"A", @"B"

NSLog(@"a = %p and b = %p", a, b); // same values 
```

变量`a`和`b` **指向**同一个对象。您还可以通过比较指针值来看到这一点。

但是，如果我们执行以下操作：

```
NSMutableArray *a, *b;

a  = [NSMutableArray new];
[a addObject:@"A"]; // a contains @"A"
b = [[a mutableCopy] autorelease]; // b is assigned to a COPY of the object
[b addObject:@"B"]; // b contains @"A", @"B", while a still contains @"A"

NSLog(@"a = %p and b = %p", a, b); // NOT the same values 
```

`b`被分配给一个副本`a`（不是原始的），所以`b`指向另一个对象。您可以通过比较对象的地址来检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T19:41:35.580

数组通过`photos`引用存储在 NSDictionary 中，而不是作为副本。因此，如果您更改底层数组，您将在访问字典时看到。

这就是为什么通过引用提供一些可变类型而不是存储它们的副本可能很危险。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T20:29:17.480

您需要了解指针和引用是如何工作的。基本上，代码中的变量不是实际的完整结构和对象，通常它们是对这些结构的引用或指针。您可以通过多种方式可视化该概念，但可能有用的一种方法是考虑一个变量，例如：

```
NSDictionary *myDict; 
```

实际上只是一个数字，它是 myDict 对象的内存地址。这是它如何工作的可视化：

![在此处输入图像描述](../Images/38535cf6dbdc6f64594f603f0f3dcb8c.png)

您的`NSDictionary`引用指向内存中的一个对象，该对象本身包含对其他对象的多个引用，可以在不影响字典本身的情况下对其进行更改。在这个例子中，我展示了`NSArray`一个添加了一个新对象的例子。字典中对数组的引用保持不变。任何时候都只有一个数组实例和其中的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T19:53:30.590

当你调用`NSLog`一个`NSDictionary`对象时，它的方法`description`就会被调用。

在方法的实现中`description`，`NSDictionary`是调用其`description`所有键的每个值（对象）的方法。因此，当一个值（对象）发生变化时，其`description`方法的输出也会发生变化。这就是为什么`NSLog`在`NSDictionary`再次调用对象时会反映它的原因。

# ruby-on-rails - brew安装的RoR ffmpeg

> ID：11595305
> 
> 赞同：0
> 
> 时间：2012-07-21T19:36:36.090
> 
> 标签：ruby-on-rails, ffmpeg, carrierwave, homebrew

我正在开发一个需要 ffmpeg 的 Ruby on Rails 应用程序，以对我拥有的文件进行一些处理。

但是，当尝试使用 ffmpeg 时，我收到此错误

```
Failed encoding. Errors: no output file created. Full output: dyld: Library not loaded: /usr/local/lib/libogg.0.dylib
Referenced from: /usr/local/bin/ffmpeg
Reason: Incompatible library version: ffmpeg requires version 9.0.0 or later, but libogg.0.dylib provides version 6.0.0 
```

它基本上是一个 CarrierWave 项目，可以在这里看到：[http ://www.freezzo.com/2010/12/23/create-ffmpeg-processor-for-carrierwave-in-rails-3/](http://www.freezzo.com/2010/12/23/create-ffmpeg-processor-for-carrierwave-in-rails-3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T23:52:55.557

看来您的 libogg 版本已过时，您应该尝试一下

```
brew update && brew upgrade libogg

$ otool -L /usr/local/lib/libogg.0.dylib
/usr/local/lib/libogg.0.dylib:
    /usr/local/lib/libogg.0.dylib (compatibility version 9.0.0, current version 9.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0) 
```

# entity-framework - 实体更新失败

> ID：11595310
> 
> 赞同：0
> 
> 时间：2012-07-21T19:37:41.190
> 
> 标签：entity-framework

存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

我刚开始学习实体，并在 Winforms 和现在的 Webforms 中玩过它。几天前它工作正常，现在当我尝试更新 DataView 中的字段时出现错误。DV 中的“AutoGenerateEditButton="True"。DV 连接到 EntityDataSource。一位朋友访问了网络表单并从不同位置编辑了一个，这是最后一次编辑/更新工作。

如果有帮助，这是更新事件：

```
Sub dgv_RowUpdating(ByVal sender As Object, ByVal e As GridViewUpdateEventArgs) Handles dgv.RowUpdating
Try
  Dim row As GridViewRow = dgv.Rows(dgv.EditIndex)
  Dim list As DropDownList = CType(row.FindControl("ddlDoseType"), DropDownList)
  e.NewValues("DoseType") = list.SelectedValue
Catch ex As Exception
  MsgBox(ex.ToString)
End Try
End Sub 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:08:33.410

如果您执行以下操作，您可以重现此错误

*   客户端 A 读取 ID = 1 的行
*   客户端 B 删除 ID = 1 的行
*   客户端 A 更改行的内容
*   Clinet A 尝试保存更改

由于 ID = 1 的行不存在，因此您会收到问题中的错误。

看起来您发布的代码不会导致错误，因为这是数据网格的更新，而不是将数据保存到数据库。

# sql - 针对 SQL 中的选择表达式的安全性

> ID：11595312
> 
> 赞同：0
> 
> 时间：2012-07-21T19:37:48.283
> 
> 标签：sql, sql-server-2008, security

考虑到您可以在查询中使用选择表达式

```
 select table1.ID, (select table2.salary, table1.id from table2 inner join...
from table1 
```

并检索您不必在 from 语句中引用的数据，就企业 DBMS 的安全性而言，这是如何防范的？做表权限工作，这样你就不能允许对它们的任何引用（因为这种情况它不在你的 from 语句中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:43:22.770

您可以强制执行列级权限。因此，请求是否来自选择列表、子查询、存在位置等都无关紧要：

```
DENY SELECT ON OBJECT::dbo.table2(salary) TO [user/role]; 
```

您还可以完全拒绝对基础表的选择，并创建一个仅公开您希望用户看到的列的视图。或者让他们执行一个只选择一个子集的存储过程。

# php - Mysqli数据库连接问题

> ID：11595313
> 
> 赞同：0
> 
> 时间：2012-07-21T19:37:59.687
> 
> 标签：php, mysqli

我目前正在使用`mysqli`创建到我的数据库的连接。我的主机服务器不支持 PDO 连接，所以这就是我使用 mysqli 的原因。建立连接时出现此错误：

```
Fatal error: Call to undefined method mysqli_result::fetchAll() 
```

是`fetchAll()`不是mysqli的一部分？

**PHP 连接到数据库**

```
$mysqli = new mysqli('localhost', 'user', 'password', 'database');

if (mysqli_connect_error()) {
    die('Connect Error (' . mysqli_connect_errno() . ') '
            . mysqli_connect_error());
}
else {
echo ('Success... '); 
}

    $sql = "SELECT * 
            FROM `categories`
            WHERE `master` = 0";
    $statement = $mysqli->query($sql);
    $list = $statement->fetchAll(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:40:14.387

不：是`fetch_all()`，不是`fetchAll()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:40:39.183

您可能想要`fetch_all()`, 而不是`fetchAll()`.

```
mysqli_result::fetch_all();
PDO::fetchAll(); 
```

**[手动输入](http://php.net/manual/en/mysqli-result.fetch-all.php)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:40:24.137

根据文档，它仅适用于[mysqlnd](http://www.php.net/manual/en/book.mysqlnd.php)但是 mysql fetch all 页面上的第一条评论描述了如何创建一个执行相同操作的函数。

[http://php.net/manual/en/mysqli-result.fetch-all.php](http://php.net/manual/en/mysqli-result.fetch-all.php)

也是 fetch_all 不是 fetchAll

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T20:08:47.950

当您调用 时`$mysqli->query($sql)`，这可以返回一个`mysqli_result`对象，或者在`false`发生错误时返回该值。我认为您的查询不成功，并返回值 false，当然如果您要求`false->fetchAll()`这样做会给出错误消息。

因此，您必须首先检查查询是否成功（使用`===`运算符并检查 for `false`），然后您可以使用查询结果。

PS这就是为什么我从不自己编写函数，使用混合类型的返回值......

# osx-lion - 如何使用命令行捕获窗口

> ID：11595314
> 
> 赞同：0
> 
> 时间：2012-07-21T19:38:11.907
> 
> 标签：osx-lion, command-line-interface, screen-capture

该`screencapture`命令在从命令行调用时似乎无法捕获特定窗口，但是当它与 shift+command+4 交互使用时能够做到这一点。

如何从脚本中捕获窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:34:29.210

$ screencapture -l #windowId 捕获.png

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:47:37.320

```
screencapture -w yourfile.png 
```

然而，窗口选择本身仍然是交互式的。

# android - getWidth 在 Fragment 中返回 0，getPaddingLeft 返回非零

> ID：11595315
> 
> 赞同：7
> 
> 时间：2012-07-21T19:38:13.553
> 
> 标签：android, android-layout, android-fragments

我正在尝试将我的 Android 应用程序转换为 Fragments 以支持多种屏幕尺寸并正确使用新的 ICS 选项卡。以前我使用该`onWindowFocusChanged()`方法并在其中运行以下代码 - 基本上这在创建布局后对我的布局进行了一些动态格式化。

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

LinearLayout theLayout = (LinearLayout)inflater.inflate(R.layout.tab_frag2_layout, container, false);

getWidthEditButton = (ImageButton) theLayout.findViewById(R.id.buttonEditPoints);
buttonAddPointsManual = (ImageView) theLayout.findViewById(R.id.buttonAddPointsManual);

linearPointsUsed = (LinearLayout) theLayout.findViewById(R.id.linearLayoutPointsUsed);

int paddingLeftForTracker = linearPointsUsed.getPaddingLeft();
int paddingRightForTracker = getWidthEditButton.getWidth();

linearPointsUsed.setPadding(paddingLeftForTracker, 0, paddingRightForTracker, 0);
} 
```

现在我已经转移到 Fragments 并且由于某种原因我的 paddingRightForTracker 返回 0。我之前遇到了一个问题，我试图过早地获得宽度，因此我之前转移到 onWindowFocusChanged，但这对 Fragments 不可用。奇怪的是 paddingLeftForTracker 实际上返回一个非零值。

如果我手动设置 paddingRightForTracker，则会发生更改，因此我知道代码正在运行。只是无法弄清楚为什么我的 getWidth 返回 0。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-21T19:57:00.887

您可以尝试在 onActivityCreated() 中执行此操作。因此，您可以在 onCreateView 中保存对这些视图的引用，然后在 onActivityCreated() 中访问它们。我认为当您尝试访问它时视图尚未完成创建，这就是它不返回宽度的原因。

[http://developer.android.com/reference/android/app/Fragment.html#onActivityCreated(android.os.Bundle)](http://developer.android.com/reference/android/app/Fragment.html#onActivityCreated(android.os.Bundle))

* * *

好的，所以我发现了另一种获取宽度的方法。我也无法在 onViewCreated、onCreateView 和 onResume 上获得按钮宽度。我找到了这个，试过了，它返回了一个值，所以也许它对你有用！

[如何获取Button的高度和宽度](https://stackoverflow.com/questions/7750102/how-to-get-height-and-width-of-button)

```
ViewTreeObserver vto = button.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
        width = button.getWidth();
        height = button.getHeight(); 
    }
}); 
```

仅供参考，我在 onResume 中运行了这段代码，所以我不确定它还能在哪里工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-15T15:08:38.960

这对我有用，而且看起来更干净（我也在使用 lambda，但它不是必需的）：

```
v.post(() -> {
        int width = v.getWidth();
        doSomething(width>300);
    }); 
```

# emacs - 如何使 Emacs C 源目录永久化？

> ID：11595317
> 
> 赞同：15
> 
> 时间：2012-07-21T19:38:39.253
> 
> 标签：emacs

我是 Emacs 的新手，我只是在学习如何使用它。我知道如何设置我的“Emacs C 源目录”，但我不知道如何使这种更改永久化。我想我必须在我的 .emacs 文件中设置它，但我不知道它的命令是什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-21T20:39:27.197

通常大多数用户可设置的变量都可以使用自定义进行编辑，但由于某种原因，该`source-directory`变量不是其中之一。

您将需要编辑`~/.emacs`文件以包含以下行：

```
(setq source-directory "/path/to/emacs/source/dir") 
```

不包括尾随`src`目录；它将自动添加。然后退出并重新启动 Emacs。

请注意，在 Emacs 运行后设置此设置可能无效，因为它仅在`find-func.el`加载时读取。您可以`find-function-C-source-directory`改为设置（使用`/src`），但这可能会被覆盖。最好只是`(setq source-directory ...)`在启动时，如上所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-31T08:44:26.723

假设你有一个像样的[locate](https://www.linfo.org/locate.html)风格的 shell 命令，这样你就不必准确地记住路径了。因此，如果您升级到较新版本，它应该仍然可以在您`~/.emacs.d/init.el`的系统中使用，只要您仍然拥有[源代码](http://gnu.askapache.com/emacs/)。

```
(setq source-directory
      (file-name-directory
       (shell-command-to-string
    (concat "locate --limit 1 emacs-" emacs-version "/src")))) 
```

# pycharm - 如何找出我目前在 Pycharm 中的哪个班级？

> ID：11595319
> 
> 赞同：24
> 
> 时间：2012-07-21T19:38:45.027
> 
> 标签：pycharm

一个相当简单的问题，我确信有答案，我似乎无法通过搜索找到它

有时我正在查看或编写一些代码，我想仔细检查或找出我所在的班级，有没有更简单的方法可以在不滚动到该`class`行的情况下找到？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-12-17T09:27:06.293

Try`ALT+Q`或 Mac: `Ctrl + Shift + Q`for Mac，如[PyCharm 文档中所述](https://www.jetbrains.com/idea/help/viewing-current-caret-location.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-22T02:10:40.820

`Navigate`| `Select In...`| **Project View**或**File Structure ，或者您可以在启用****Autoscroll from Source**选项的情况下保持 Project 或 Structure 视图可见。

也可以使用`Navigate`| 显示您当前位置的弹出窗口的**文件结构。**

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-08-16T08:12:17.617

**编辑器下方的面包屑栏**

从 Pycharm 2017.02 开始，每个编辑器窗口下都有一个面包屑导航，显示如下信息：

```
ClassName > FunctionName > for i in range(): > if True: 
```

您也可以单击以转到代码中的任何这些点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-18T13:25:05.547

对于 mac，它是：`Ctrl`++ 。`Shift``q`

# android - phonegap 在 android 上将数据库存储在哪里？

> ID：11595320
> 
> 赞同：0
> 
> 时间：2012-07-21T19:38:50.840
> 
> 标签：android, cordova, sqlite

我认为它应该在/data/data//databases/mydb.db，

但是当我使用 adb 时，它无法找到数据库。我创建数据库的方式是：

```
db = window.openDatabase("mydb", "1.0", "My DB", 200000); 
```

有趣的是，我从我的代码中访问数据库/创建表没有问题。但不是 DDMS 或 adb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:43:42.107

`window.openDatabase(...)`我假设这是 javascript 代码并且是`window`浏览器窗口对象。在这种情况下，您使用的*不是*Android 的原生 SQLite 数据库，而是移动浏览器支持的内置浏览器数据库。

因此，数据库应该位于浏览器应用程序内部的某个位置，您无法通过 adb 访问它。

# c# - 在读取 XML 之前使用代理

> ID：11595327
> 
> 赞同：0
> 
> 时间：2012-07-21T19:39:43.440
> 
> 标签：c#, xml, proxy, rss

在尝试回到 C#.NET 和 WPF 时，我一直在关注[这个 RSS Reader Demo](http://www.dreamincode.net/forums/topic/34745-creating-your-own-rss-reader-in-c%23/)。我了解代码发生了什么，但是在执行以下代码行时出现代理错误：

```
using (XmlReader reader = XmlReader.Create(Url)) 
```

我的假设是我需要将此请求设置为使用默认浏览器代理 (IWebProxy) 来传递默认值。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:45:18.447

非常感谢 Darkey 的文章。添加 DefaultWebProxy 的代码行创造了奇迹。我所做的只是在“使用”语句之前添加以下行：

httpWebRequest.Proxy = System.Net.WebRequest.DefaultWebProxy;

在 using 语句之前。

# c++ - new、() 和 [] 运算符都在一条指令中

> ID：11595331
> 
> 赞同：1
> 
> 时间：2012-07-21T19:40:16.543
> 
> 标签：c++, new-operator

为什么我不能`new`像这样使用运算符：

```
char* p;

p = new char('a')[3];

delete[] p; 
```

编译器说：

```
error C2143: syntax error : missing ';' before '['
error C3409: empty attribute block is not allowed
error C2143: syntax error : missing ']' before 'constant' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T19:43:41.467

在 C++11 中，您可以通过新的[统一初始化](http://www.codeguru.com/cpp/cpp/article.php/c19081/C-2011-Uniform-Initialization.htm)来初始化动态分配的聚合：

```
p = new char[3] {'a', 'a', 'a'}; 
```

在 C++98 中，不能为动态分配的聚合指定初始值设定项列表。你所能做的就是首先分配数组，然后用一个值填充它：

```
p = new char[3];
std::fill(p, p + 3, 'a'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T19:43:12.607

在 C++11 中，你可以说：

```
char * p = new char[3] { 'a', 'a', 'a' }; 
```

在 11 之前，除了零（或默认值）之外，没有其他方法可以初始化动态数组。在这种情况下，您可以使用`std::fill`：

```
#include <algorithm>

std::fill(p, p + 3, 'a'); 
```

# asp.net - 提供本地（内联网）托管的 MVC ASP.NET 网站的策略

> ID：11595337
> 
> 赞同：1
> 
> 时间：2012-07-21T19:40:48.450
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, deployment

平台：ASP.NET 4.5、MVC 4、C#

我目前正在设计一个可在公共领域使用的网站。但是，我的目标市场中有相当一部分人不愿意将一些信息放在公共网站上，即使它是 https 等。

我想做的是允许企业用户使用我的网站，其中一种方法是允许他们在他们的 Intranet 上托管我的网站。当然，通常的缺点是他们的网站更新速度不如公众网站那么快，而且在支持方面我也很头疼。

我的问题是

1.  有哪些策略可以让“企业友好型”部署变得轻松无忧？

2.  有没有办法我可以只使用 Intranet 中的数据库来公开网站（看不到如何......但我不是技术专家）

3.  如果我别无选择，只能将其本地托管 - 那么将我的开发/支持开销保持在最低限度的最佳方法是什么？

我希望mods不要锁定这个。我要求针对一个非常现实的问题提供具体的方法和技术方法。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:50:07.280

对于＃1，这个问题有很多方面。一些想法可能会帮助您思考：

1.  **部署您的应用程序**：使您的应用程序版本之间的部署和升级变得简单。尝试将其作为单个操作进行，而不是手动手动升级不同的部分。正如 Darin Dimitrov 所提到的，您可以研究像 Web 部署包这样的技术，尤其是在 Visual Studio 2012 中，它将具有增量数据库发布（在 VS2010 中，数据库是非增量的，因此没有真正的“更新”故事）。降低部署成本，以便他们能够负担得起更频繁的升级（不是您的产品成本，而是为保持系统更新和运行而获得报酬的人的开销）。
2.  **考虑在 Internet 和 Intranet 上运行之间的差异**：例如，Internet 上的身份验证通常使用基于表单的身份验证来完成。在 Intranet 上，您可能需要考虑支持 Windows 身份验证，以便为企业用户提供无缝登录体验。这应该会影响您的设计，以允许在您的部署之间进行模块化身份验证。
3.  **企业对新技术的采用可能比您想要的要慢**：您使用的是最新最好的 (ASP.NET 4.5/MVC4)。有些公司现在或几年后可能还没有准备好部署它。考虑一下您是否可以使用较旧的、成熟的技术，例如 .NET 4 - 已经出现了几年，它已经得到了一定程度的证明并被采用。

对于您的第二个问题，这取决于他们的 IT 愿意提供什么。许多公司站点在安全的 LAN 中都有数据库，但可以从公共 Internet 访问 Web 服务器。这当然是一个很好理解的网络设计，但是根据您的应用程序中涉及的资产，您的客户可能会也可能不会同意它。这是一个商业决策。

对于#3，答案对于任何长期软件项目都是通用的。如果您想尽量减少麻烦，它必须是高质量和可维护的。

*   如果您只支持最后的 N 个版本，请明确说明。避免支持您在过去很久就修复的代码。考虑提供额外的支持或负担得起的升级，以让您的客户使用更新的（希望是更好的）版本。
*   请记住版本之间需要升级哪些组件。您的网络应用程序（显然），还有您的数据库架构以及您正在使用的任何依赖项或库。这与#1 的考虑基本相同。确保您有一个良好的升级*和*回滚计划。
*   最重要的是，**测试，测试，测试**。进行功能回归测试和安装/升级测试，并尝试尽可能多的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:58:39.730

仅回答上述 1)。我会推荐一个持续集成工具。我们使用 TeamCity 并通过单击按钮将 mvc3 和 mvc4 应用程序部署到我们的公共和私有托管站点。之前我们使用巡航控制，但现在我们对 TeamCity 更加满意。阅读它们。可能会引导你走向正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T06:46:38.863

您可以查看 Visual Studio 的[Web 部署包](http://msdn.microsoft.com/en-us/library/dd465337%28v=vs.110%29)。它们允许您准备一个可以直接安装在您客户的 Web 服务器上的软件包。

# mysql - 为所有组获取一条记录？

> ID：11595339
> 
> 赞同：0
> 
> 时间：2012-07-21T19:41:06.633
> 
> 标签：mysql

```
id | group | text
1  | 1     | sadsd
2  | 1     | sdffs
3  | 1     | sdffs
4  | 2     | sdf
5  | 2     | sdfs
6  | 3     | sdfsdf
7  | 4     | 243
8  | 4     | dfgd 
```

我怎样才能使用 SQL 所有组，但只有一个组？我想展示：

```
group:
1
2
3
4 
```

其他示例：

```
id | group | text
1  | v     | sadsd
2  | b     | sdffs
3  | n     | sdffs
4  | v     | sdf
5  | v     | sdfs
6  | n     | sdfsdf
7  | m     | 243
8  | b     | dfgd 
```

我怎样才能使用 SQL 所有组，但只有一个组？我想展示：

```
group:
v
b
n
m 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:43:47.363

如果您只想要所有组的列表，您可以使用`SELECT DISTINCT ..`

```
SELECT DISTINCT `group` FROM yourTable; 
```

如果你还想选择一些额外的数据，你应该使用`GROUP BY`

```
SELECT `group` FROM yourTable GROUP BY `group`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:42:53.817

```
SELECT `group` FROM `groupTable` GROUP BY `group` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T19:43:47.590

使用[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

```
SELECT group 
FROM TableName 
GROUP BY group 
```

# csv - 读取 CSV 文件并生成字典

> ID：11595340
> 
> 赞同：0
> 
> 时间：2012-07-21T19:41:15.010
> 
> 标签：csv, dictionary

我有一个 CSV 文件看起来像

命中 39、命中 24、命中 9

命中 8、命中 39、命中 21

命中 46、命中 47、命中 20

命中 24、命中 53、命中 46

我想根据先到先得的原则读取文件并创建字典

比如 Hit39 : 1, Hit 24:2 等等......

但请注意 Hit39 出现在第 2 列和第 2 行。因此，如果读者阅读它，则不应将其附加到字典中，它将继续使用新数字。

访问行号后，如果出现，则不应包含该行号之后的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:58:19.560

使用**Python** - 在澄清 OP 之前最好的猜测 - 将文件视为一个巨大的列表，并将递增变量分配给唯一出现的值。

```
import csv
from itertools import count

mydict = {}
counter = count(1)
with open('infile.csv') as fin:
    for row in csv.reader(fin, skipinitialspace=True):
        for col in row:
            mydict[col] = mydict.get(col, next(counter)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:50:56.710

由于 Python 是一种具有字典的流行语言，因此您*必须*使用 Python。至少我假设。

```
import csv

reader = csv.reader(file("filename.csv"))
d = dict((line[0], 1+lineno) for lineno, line in enumerate(reader))

print d 
```

# ios - AWS iOS：如何恢复分段上传

> ID：11595343
> 
> 赞同：2
> 
> 时间：2012-07-21T19:41:52.700
> 
> 标签：ios, amazon-s3, multipart

根据这个示例[http://aws.amazon.com/articles/0006282245644577](http://aws.amazon.com/articles/0006282245644577)，很清楚如何使用 AWS iOS SDK 使用分段上传。但是，当我尝试恢复中断的上传时，我的上传似乎没有正确拼接在一起。

我使用下面的代码来恢复上传。这是设置分段上传的上传 ID 的正确方法吗？

```
S3InitiateMultipartUploadRequest *initiateRequest = [[S3InitiateMultipartUploadRequest alloc] initWithKey:key inBucket:bucketName];
S3InitiateMultipartUploadResponse *initiateResponse = [self.amazonS3Client initiateMultipartUpload:initiateRequest];
self.multipartUpload = [initiateResponse multipartUpload];

// Set upload id to resume upload
self.multipartUpload.uploadId = uploadId; 
```

我将不胜感激任何帮助或指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:05:42.040

您的代码应该足够健壮，以处理您可能需要跟踪哪些部分已上传的情况。分段上传的分段上传可以通过多种方式完成（并行、多线程方式或一个接一个依次）。

无论上述方法是什么，您都可以使用 listParts API 来确定成功上传了多少部分。由于您已经拥有上传 ID，因此您的设计必须支持从以下部分上传继续的能力。

```
 GET /ObjectName?uploadId=UploadId HTTP/1.1
  Host: BucketName.s3.amazonaws.com
  Date: Date
  Authorization: Signature 
```

另一个有助于优化分段上传的有用资源：http: [//aws.typepad.com/aws/2010/11/amazon-s3-multipart-upload.html](http://aws.typepad.com/aws/2010/11/amazon-s3-multipart-upload.html)

# c# - 为桌面背景创建倒计时应用程序c#

> ID：11595348
> 
> 赞同：0
> 
> 时间：2012-07-21T19:42:34.447
> 
> 标签：c#

我想写一个小应用程序，它将是一个倒计时应用程序，它基本上应该没有框架也没有背景 - 只是计算从现在到 app.config 中设置的日期的时间。

我知道如何编写倒计时本身。我的问题是我不知道哪种应用程序可以没有表格？

我怎样才能让东西看起来像那样？我应该创建什么类型的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:55:07.930

我可以为您想出两种可能的解决方案。

解决方案 1 将其编写为服务

[http://industriousone.com/blog/writing-windows-services-c](http://industriousone.com/blog/writing-windows-services-c)

解决方案 2 将使用 WinForm，然后将 visible 设置为 false，这样它就不会出现。它仍然会在后台工作。

# c++ - 使用 winapi 进行 GUI 设计的“完整”参考

> ID：11595357
> 
> 赞同：-1
> 
> 时间：2012-07-21T19:43:49.063
> 
> 标签：c++, winapi, user-interface

虽然我们在互联网上有很多资源，但有时它并不能如我们所愿。有没有什么好书专注于使用winapi进行GUI设计？事实上，我需要一个带有几个子窗口的主窗口。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T19:59:39.050

Programming Windows，Charles Petzold，第 5 版。这是使用 win32 api 构建应用程序的权威指南。预先警告它是一本 sdk c 风格的书。然而，这些信息可以很容易地应用于 c++。

# ruby-on-rails-3 - 将单选渲染为按钮/图像 simple_form

> ID：11595358
> 
> 赞同：1
> 
> 时间：2012-07-21T19:43:51.210
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, simple-form

我正在使用 SimpleForm 并且能够创建收音机列表。有没有办法可以将它们呈现为按钮或图像？

我做了一些搜索并尝试了这个：

```
- f.collection_radio_buttons(:category, [['Male', 'icon_male'], ['Female', 'icon_female']], :first, :last) do |category|
  = category.label { image_tag("/assets/icons/16x16/#{category.text}.png") + category.radio_button  } 
```

但是，它仍然呈现单选图标，见下文

![在此处输入图像描述](../Images/0c0e7e39d2f6dc50db2bf33855294a52.png)

有没有办法将其呈现为可选择的图像或类似于 Twitter Bootstrap 按钮的按钮？[http://twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons)

此外，这需要我指定视图中的图像列表，我需要将其从模型中驱除，例如`category.image_url`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:40:25.797

我最终没有使用 simple_form 的 radio 元素。我只是求助于 jQuery 和一个隐藏的输入元素。

# php - SOAP：HTTPS 客户端证书路径无效

> ID：11595360
> 
> 赞同：0
> 
> 时间：2012-07-21T19:44:19.043
> 
> 标签：php, zend-framework, soap, https

当我运行下面给出的代码时，`ERROR: Invalid HTTPS client certificate path`会生成错误。我检查了 certificate.pem 和 test.wsdl 的路径是否正确。这种错误的原因可能是什么？

```
$wsdl = 'http://localhost:10088/test/test.wsdl';

$options = array(
    'local_cert' => 'http://localhost:10088/test/certificate.pem',
    'soap_version' => SOAP_1_1
);

try {
    $client = new Zend_Soap_Client($wsdl, $options);
    $result = $client->getLastResponse();
    print_r($result);
} catch (SoapFault $s) {
    die('ERROR: [' . $s->faultcode . '] ' . $s->faultstring);
} catch (Exception $e) {
    die('ERROR: ' . $e->getMessage());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:47:22.793

该选项的值`local_cert`必须是文件路径而不是 URL。将代码更改为此`$options`：

```
$options = array(
    'local_cert' => '/path_where_cert_is_stored/certificate.pem',
    'soap_version' => SOAP_1_1
); 
```

由于[Zend_Soap_Client](http://framework.zend.com/manual/en/zend.soap.client.html)的文档不完整，您可以查看[PHP: SOAP - Manual](http://www.php.net/manual/en/book.soap.php)以获取更多信息，因为这是在后台`Zend_Soap_Client`使用的。在我看来，可能的参数在[PHP: SoapClient::SoapClient - Manual](http://www.php.net/manual/en/soapclient.soapclient.php)中得到了更好的描述（特别是看这个例子）。

# ruby-on-rails - 辅助方法未暴露给控制器 Rails

> ID：11595361
> 
> 赞同：0
> 
> 时间：2012-07-21T19:44:38.083
> 
> 标签：ruby-on-rails

这是代码：

```
class SyncController < ApplicationController
  def get_sync
    @passed_ids = params[:ids].split(',')
    @users = @passed_ids.collect{|id| User.find(id)}

    #add the current user to the list
    @users << current_user
    @recommendations = get_recommendations(@users)
  end
end

module SyncHelper
  def get_recommendations(users)
    users
  end
end 
```

我收到一个找不到`get_recommendations`方法错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:08:28.153

您的`SyncHelper`模块需要包含在您的`SyncController`课程中。您可以添加该行

```
include SyncHelper 
```

在你的类定义中，或者，如果`SyncHelper`存在于预期的 app/helpers 文件中，你可以使用 rails [helper](http://apidock.com/rails/AbstractController/Helpers/ClassMethods/helper)方法。

# c# - ASP 按钮甚至没有触发

> ID：11595362
> 
> 赞同：0
> 
> 时间：2012-07-21T19:44:40.843
> 
> 标签：c#, asp.net

我已经设置了一个带有提交按钮的页面，用户可以单击该按钮并登录。我需要收集字段值，然后做一些后端工作，但是当单击按钮时，我设置的偶数处理程序方法没有不开火。下面是按钮代码：

```
<asp:Button UseSubmitBehavior="false" CssClass="btn btn-primary" ID="btnTest" runat="server" Text="Submit" OnClick="btnTest_Click" /> 
```

和代码隐藏：

```
public partial class SignIn : System.Web.UI.Page
{
    protected void Page_Load(Object sender, EventArgs e)
    {
        btnTest.Click += new EventHandler(this.btnTest_Click);
    }

    protected void btnTest_Click(Object sender, EventArgs e)
    {
        string user = username.Value;
        string pass = password.Value;
        int userid = -1;
        RoomSvc.Data.Person[] persons = RoomService.Service.ServiceClient.GetPersons();
        RoomSvc.Data.Person pUser = null;
        foreach (RoomSvc.Data.Person p in persons)
        {
            if (p.username == user && p.password == pass)
            {
                pUser = RoomService.Service.ServiceClient.GetPerson(userid.ToString());
            }
            else
            {
                return;
            }
        }
        RoomService.Global.currentUser = pUser;
    }
} 
```

我已经尝试了所有方法，但没有任何效果，请有人指教。

编辑：.aspx 代码：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="SignIn.aspx.cs" Inherits="RoomService.Account.SignIn" %>

   <asp:Content ID="SignInHeader" ContentPlaceHolderID="HeadContent" runat="server">
    </asp:Content>
    <asp:Content ID="SignInContent" ContentPlaceHolderID="MainContent" runat="server">
        <form action="SignIn.aspx" class="form-horizontal well span5 offset5">
            <fieldset>
              <legend>Sign In</legend>
              <div class="control-group">
                <label class="control-label" for="input01">Username</label>
                <div class="controls">
                  <input runat="server" type="text" class="input-medium" id="username" />
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="input01">Password</label>
                <div class="controls">
                  <input runat="server" type="text" class="input-medium" id="password" />
                </div>
              </div>
              <div class="form-actions">
                <asp:Button CssClass="btn btn-primary" ID="btnTest" runat="server" Text="Submit" OnClick="btnTest_Click" />
              </div>
            </fieldset>
        </form>
    </asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:55:14.910

您的表单标签丢失 runat="server

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:47:05.620

I figured it out.

I had to add the even handler in Page_Init() not Page_Load()

# jquery - Jquery each() 比 load() 更快

> ID：11595367
> 
> 赞同：1
> 
> 时间：2012-07-21T19:45:14.797
> 
> 标签：jquery, load, each

我有这样的东西

```
function loadImages(){
   var num = 1;
   $('.myElement').each(function(){
      var image = $("<img>").attr("src",mySrc).load(function(){
         if(num == 1){
            //do something - does not work
         }
      });       
      num++;
   });
} 
```

并且条件 if(num == 1) 根本不起作用。我认为，这是因为虽然将加载第一张图像，但 each() 函数仍然有效，并且 var num 具有更大的价值，因为我在 load() 函数中的条件开始发挥作用......我该如何解决它？

谢谢

全功能代码

```
function loadThumbs(imageCount){
var perc = 0;
var cache = [];
var thumbHolderWidth = 0;
var thumbHolderHeight = 0;
$('#thumbs').find(".image_thumb").each(function(enumThumb){
    if(enumThumb == 0){
          $(this).addClass('active');
    }                               
    var thisThumbSrc = $(this).find('img').attr('src');
    var smallim = $("<img>").attr("src",thisThumbSrc).load(function(){
        var thumbWidth = this.width;
        var thumbHeight = this.height;
        thumbHolderWidth = thumbHolderWidth + thumbWidth + 12;
        if(thumbHeight > thumbHolderHeight){
            thumbHolderHeight = thumbHeight;
        }
        });
        cache.push(smallim);

    var imgSrc = $(this).attr('bigimg');
    var im = $("<img>").attr("src",imgSrc).load(function(){
        if(enumThumb == 0){
            imWidth = this.width;
            imHeight = this.height;
            resizeOverlay(imWidth,imHeight,imgSrc);
        }
        perc = perc + (100/imageCount);
        var loaderWidth = Math.round(winWidth*perc/100);
        $('#thumb_loader').stop().animate({'width':loaderWidth+'px'});
        if(Math.round(perc) >= 100){
            $('#thumb_loader').animate({
                'height':'1px',
                'margin-top':'0px'
            },'fast',function(){
                $('#thumb_loader').addClass('loaded');
            });
        }
    });
    cache.push(im);
});
$('#images_overlay').find('#thumbs').css({
    'width':thumbHolderWidth+'px',
    'height':thumbHolderHeight+10+'px',
    'left':winWidth/2-thumbHolderWidth/2+'px'
})
$('#images_overlay').find('#thumbs').fadeIn();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:50:01.573

jQuery 的`each`方法为回调函数提供索引。您不需要专用的迭代器变量。

```
$( '.myElement' ).each(function ( i ) {
    // use i here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:58:16.047

看来您没有传递正确的`mySrc`值。

`mySrc`应该是这样的`YourImage.jpg`

```
$('<img>').attr('src', mySrc).load(function() {  
  alert('Image Loaded');  
}); 
```

> **为什么需要使用`num++`？您可以使用每个函数本身获取元素的索引。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T20:08:19.460

您将`$.each`函数与`for`循环混淆了。不需要`num`变量或增加它。

这是一个示例，说明您可以使用 $.each 函数的所有功能。

```
function loadImages(){
  $('.myElement').each(function(i, el){
    var image = $('<img>', {
      src: 'myimage'+i+'.jpg' // Loads a different image for each element.
    }).load(function(){
      image.hide().appendTo( $(el) ).fadeIn();  // Once loaded, appends image to .myElement and fades it in
    });
  });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T21:21:52.203

你创建的`num`在他函数的范围内`loadImages`，一旦`each`完成，它的值将`num`是它的最大值。现在`'load'`是一个异步的东西，即使`each`完成后它也会被调用，那时'num'的值应该是最大值。因此，对于每个呼叫，`load` `num`都已经达到最大值，并且`num==1`永远不会满足

一种解决方案可以是：

```
function loadImages(){
   $('.myElement').each(function(num){
     var image = $("<img>")
       .attr("src",mySrc)
       .load((function(numAlias){
         return function() {
            if(numAlias == 1){
            //do something - does not work
            }
          }
      })(num));       
   });
} 
```

可以在此处找到有关为每次迭代创建子范围的更多说明，[从匿名包装器返回函数？](https://stackoverflow.com/questions/11200279/return-a-function-from-the-anonymous-wrapper)

也可能存在特定于浏览器的情况，在附加负载之前设置 src 时似乎错过了加载事件。问题之前就存在，不确定它是否已修复，例如 Chrome 有时会出现针对 cahced 图像的错误。

在加载后添加 src 看起来是一种可靠的方法。

```
var image = $("<img>").load(function(){
         if(num == 1){
            //do something - does not work
         }
      }).attr("src",mySrc); 
```

# spring - Spring Data Repos 未选择 Neo4j 本机 api 数据

> ID：11595370
> 
> 赞同：0
> 
> 时间：2012-07-21T19:45:26.973
> 
> 标签：spring, neo4j, spring-data, spring-data-neo4j

我有一些数据已经使用本机 api 被注入到 neo4j 实例中。由 Spring 数据图支持的应用程序使用相同的实例。存储库无法找到数据。我假设这是由于索引和/或缺少属性而导致的问题。

当数据被抽取时，以下属性被设置：

```
node.setProperty("__type__", "com.x.x.Class"); 
```

索引设置如下：

```
Index<Node> typeIndex = indexManager.forNodes("__types__");
typeIndex.add(node, "className", "com.x.x.Class"); 
```

任何线索/帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:46:17.520

伊玛目，

如果您发布了一个重现问题的简单测试，我将不胜感激，最好是[https://groups.google.com/forum/?fromgroups#!forum/neo4j](https://groups.google.com/forum/?fromgroups#!forum/neo4j)

但是顺便说一句，你说的有道理，我没有任何其他提示。但是，如果我们得到一些代码/测试来处理，我们可能会提供帮助。

拉斯

# java - 在 Java 中从 InputStream 获取没有已知大小的字节数组？

> ID：11595373
> 
> 赞同：1
> 
> 时间：2012-07-21T19:46:04.443
> 
> 标签：java, stream, bytearray, inputstream

我通过套接字发送一个字节数组，并通过 DataInputStream 接收它。不知道字节数组的大小，也没办法查。我试过这样做：

```
byte[] content = new byte[ARRAY_SIZE]; 
int something; 

while((something = inFromStream.read()) > 0)  
    output.write(something); 
```

然而，这仍然意味着我需要知道字节数组的大小。我不想只填写一个巨大的数字（因为从流中接收到的字节数组可能是 100 甚至可能是 5000000000）。我该如何处理（最好使用标准 Java API/库）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T19:54:31.540

您可以将这`byte[]`件作品明智地发送到`OutputStream`

```
byte[] buffer = new byte[1024 /* or some other number */];
int numRead;

while((numRead = inputStream.read(buffer)) > 0) {
    outputStream.write(buffer, 0, numRead);
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-21T19:58:07.937

解决方法 - 只是没有代码示例的逻辑

> getSizeOfInput int countTokens (){
> 
> readInput tokenizeInput countTokens
> 
> 返回计数令牌}
> 
> 创建一个大小为 countTokens 的数组

但总而言之 - 查看链接 [创建一个字节数组列表](https://stackoverflow.com/questions/6340999/create-an-arraylist-of-bytes)

# php - 无法使用 PHP 检索某些 cookie

> ID：11595375
> 
> 赞同：1
> 
> 时间：2012-07-21T19:46:10.017
> 
> 标签：php, cookies

我必须遗漏一些简单的东西，但这让我很生气。

我正在设置一大堆数组cookie，如下所示：

```
setcookie("adjusted[$title]", $title, time() + 3600, "/", ".domain.com"); 
```

这很好用，正在设置 cookie，我可以在浏览器的 cookie 列表中看到它们。

但是，我似乎无法只读取某些值！我不知道为什么。例如，我设置了这个 cookie：

```
adjusted[calldelivernow.net] 
```

我可以在 Firefox 的 cookie 页面中看到它的名称，内容是“calldelivernow.net”。但是所有这样做的尝试都返回错误：

```
if(isset($_COOKIE["adjusted"]["calldelivernow.net"]))
    die("Cookie is set"); 
```

这只是众多示例中的一个，所有示例都使用相同的参数，只是域名不同。我到底在这里想念什么？cookie 怎么可能明明存在于浏览器中，而 PHP 却无法读取呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:49:37.233

因为你没有正确地用它的名字来称呼它。与表单名称不同，cookie 不会堆叠到数组中。

试试`$_COOKIE["adjusted[calldelivernow.net]"]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T02:21:46.343

问题似乎是 cookie 名称不能包含句点！奇怪的是，Firefox 实际上显示 cookie 名称是正确的并且包含句点，但是`$_COOKIE`数组用下划线替换句点，如下所示： `["calldelivernow_net"]=> string(4) "test"`

# authentication - 流星日志

> ID：11595377
> 
> 赞同：2
> 
> 时间：2012-07-21T19:46:48.827
> 
> 标签：authentication, logging, meteor

我从流星 [OSX 上的版本 0.3.8 (7510b8430e)] 开始并克隆了其中一个示例。我在服务器端添加了几个 console.log() 语句，并试图查看输出。根据手册是

```
meteor logs <site> 
```

但是该命令要求进行身份验证？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:33:58.877

你有没有在某个时候跑过

```
meteor deploy yoursite --password 
```

或者

```
meteor deploy yoursite -P 
```

? 如果是这样，那就是您当时设置的密码。如果您确定没有，也许是其他人打败了您（因为任何人都可以在没有密码的情况下在已部署的应用程序上设置密码）？

# php - 关于具有单入口点的应用程序的基本 OOP 架构 - PHP？

> ID：11595382
> 
> 赞同：0
> 
> 时间：2012-07-21T19:47:36.183
> 
> 标签：php, oop

我的应用程序有一个单一的入口点，我们称之为`index.php`。

在`index.php`其中实例化一个如下所示的类；

```
final class Griff {

    public $a, $b, $c, $d, $e;

    public function __construct() {
         spl_autoload_register(array($this, 'autoload',));
         $this->a = 'a';
         // blah blah blah
         new RouterGriff($this);
    }

    private function autoload($name) {
         // autoload function
    }
}

new Griff(); 
```

您会注意到它`RouterGriff`在内部实例化`Griff::__construct()`，`RouterGriff`如下所示：

```
final class RouterGriff {

    private $griff;

    public function __construct(Griff $griff) {
         $this->griff = $griff;
         $this->griff->b = 'b';
         $this->griff->c = 'c';
    }
} 
```

我的问题如下；你会注意到我正在为存储的属性设置变量，`Griff`因为`RouterGriff`我想要一种注册表类型的结构到我的应用程序但不想使用单例。

如果我只设置属性`RouterGriff`而不是会更好`Griff`吗？或者考虑到我的应用程序在输出任何内容之前可以深入 10 个类，是否将传递`Griff`给每个类是一种*有效的做事方式？*

我希望我说得通，谢谢

**编辑**

换一种方式，我想这样做，

```
final class Griff {

    public $a;

    public function __construct() {
         spl_autoload_register(array($this, 'autoload',));
         $this->a = 'a';
         // blah blah blah
         new RouterGriff();
    }

    private function autoload($name) {
         // autoload function
    }
}

new Griff();

final class RouterGriff {

    public $b, $c;

    public function __construct() {
         $this->b = 'b';
         $this->c = 'c';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:49:08.710

您正在寻找的问题的答案被命名为“依赖注入”或“依赖注入容器”。这是一本题材广泛的填书书籍。如果你对这个话题感兴趣，我可以建议你：`Clean Code: A Handbook of Agile Software Craftsmanship (Robert C. Martin)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:52:55.663

我不认为你对注入`Griff`一切正常的东西是错误的。至于哪些类得到哪些属性，我认为这取决于属性的性质。例如，我将`GriffRequest`在此示例中包含一个，您可以在其中访问/存储路由器提供的解析参数，例如：

```
final class Griff {

    protected $_request,
              $_response,
              $_router;

    public function __construct() {
         spl_autoload_register(array($this, 'autoload',));
         $this->_request = new GriffRequest($this);
         $this->_response = new GriffResponse($this);
         $this->_router = new RouterGriff($this);
    }

    private function autoload($name) {
         // autoload function
    }

    public function getRequest() {  return $this->_request; }

    public function getResponse() {  return $this->_response; }

    public function getRouter() {  return $this->_router; }
}

final class RouterGriff {

    protected $_application;

    public function __construct(Griff $application) {
         $this->_application = $application;
    }

    public function route() {
        // do stuff with request
        // assign params
        $request = $application->getRequest();
        $request->a = 'value';
        $request->b = 'value2';
    }
} 
```

如果您`Griff`为应用程序的所有重要子模块创建一个引用，然后注入所有这些模块，那么您可以在某个时候`Griff`访问您可能需要的所有内容。`Griff`如果你觉得链条太长，你总是可以做方便的吸气剂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T20:10:16.997

如果您正在谈论全局应用程序设置（我认为您是），只需使用常量。

它们是全局的，但无法更改，并且易于编写和使用。

# html - 通过 CSS 检测自定义 IE7 及以下版本

> ID：11595385
> 
> 赞同：0
> 
> 时间：2012-07-21T19:48:37.533
> 
> 标签：html, css

由于许多不同的原因，我最近决定完全放弃对 IE7 及以下版本的支持。我想要的是当在 IE7 中查看该站点时或在一条消息下方显示“您的浏览器已过时。单击此处进行更新”。

以下是我在我将（希望）用于我未来所有项目的当前框架中对此的看法。我知道它很乱，但它可以工作，只是想确保它可以安全使用，如果我错过了任何东西，我们将非常感谢反馈和错误发现。

[http://jsfiddle.net/JcZjY/](http://jsfiddle.net/JcZjY/)

干杯! 汤姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:10:14.353

除了评论中已经说明的内容，对我来说它看起来还不错。如果您将使用 HTML5 元素，请不要忘记使用[HTML5shim](http://code.google.com/p/html5shim/)或 HTML5shiv（它们是相同的）来保持 IE8 中的所有内容。

```
<!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

# doctrine-orm - 原则 2.1 - 记录整个实体的活动

> ID：11595388
> 
> 赞同：0
> 
> 时间：2012-07-21T19:49:48.173
> 
> 标签：doctrine-orm

我希望能够记录登录用户所做的操作......持久/更新等

我已经设置了鉴别器等，它工作得很好但是，它只记录所有新的持久数据......所以我有一个名为 user_actions 的表上的信息，1 - 添加了一个新客户，2 - 添加了一个新的备忘录等

但是，它不会记录对我的数据库上实体的任何更新...例如 1 - 更新的用户 - id 1 ...

我正在考虑转储鉴别器超类并使用旧方法来记录，，，......就像创建一个带有字段的表：id | 动作类型 | 描述 | 用户名 | 日期

我不确定，在学说 2.1 中记录所有交易的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:31:18.567

你考虑过`HasLifecycleCallbacks`吗？您不仅可以跟踪`PostPersist`，还可以跟踪`PostUpdate`和`PostRemove`（或什至`Pre*`）

# php - Rijndael 128 在 vb.net 和 php 之间加密/解密

> ID：11595389
> 
> 赞同：5
> 
> 时间：2012-07-21T19:49:54.207
> 
> 标签：php, vb.net, encryption, rijndael

**编辑：**

对不起这个问题，我自己立即解决了......我唯一要做的就是将填充设置为零：

```
aes.Padding = PaddingMode.Zeros 
```

我正在尝试在没有 SSL 的情况下加密我的 VB.Net 应用程序之间的流量（因为用户不应该只能看到一些敏感参数）。所以尝试在 PHP 和 VB.Net 中实现相同的加密/解密结果，但它不起作用。

起初我的小型 VB.Net 加密功能：

```
Friend Enum CryptionMode
    Encrypt
    Decrypt
End Enum

Friend Function cryptAes(ByVal mode As CryptionMode, ByVal input As Byte(), ByVal pw As String) As Byte()
    Dim salt As Byte() = {42, 248, 0, 22, 19, 46, 162, 81, 192, 167, 174, 102, 233}
    Dim aes As New RijndaelManaged

    Dim keyGen As New Rfc2898DeriveBytes(pw, salt)
    aes.Key = keyGen.GetBytes(aes.Key.Length)
    aes.IV = keyGen.GetBytes(aes.IV.Length)

    Debug.WriteLine(Convert.ToBase64String(aes.Key))
    Debug.WriteLine(Convert.ToBase64String(aes.IV))

    Dim ms As New MemoryStream
    Dim cs As New CryptoStream(ms, If(mode = CryptionMode.Decrypt, aes.CreateDecryptor, aes.CreateEncryptor), CryptoStreamMode.Write)
    Try
        cs.Write(input, 0, input.Length)
        cs.Close()
        Dim output As Byte() = ms.ToArray
        Debug.WriteLine(output.Length)
        ms.Close()
        Return output
    Catch ex As Exception
        Debug.WriteLine("Error")
        Return Nothing
    End Try
End Function

Friend Function cryptAesToBase64(ByVal mode As CryptionMode, ByVal input As Byte(), ByVal pw As String) As String
    Return Convert.ToBase64String(cryptAes(mode, input, pw))
End Function 
```

通过执行这一行

```
cryptAesToBase64(CryptionMode.Encrypt, System.Text.Encoding.ASCII.GetBytes("hallihallo"), "pass") 
```

我得到了以下

```
9sNq3BjYaU6ZIrLEfG1hXrkdOoGc6FoeCQ3T2asXSs4= (key)
oxBgLuPha+Rvm7KV5+3V3A== (IV)
16 (output length)
"hwcc7Cog9FornwAzo6hIuA==" (output) 
```

但是现在有了 PHP 加密：起初我需要定义一个等效于 Rfc2898DeriveBytes 函数的函数：

```
function pbkdf2($algorithm, $password, $salt, $count, $key_length, $raw_output = false)
{
    $algorithm = strtolower($algorithm);
    if(!in_array($algorithm, hash_algos(), true))
        die('PBKDF2 ERROR: Invalid hash algorithm.');
    if($count <= 0 || $key_length <= 0)
        die('PBKDF2 ERROR: Invalid parameters.');

    $hash_length = strlen(hash($algorithm, "", true));
    $block_count = ceil($key_length / $hash_length);

    $output = "";
    for($i = 1; $i <= $block_count; $i++) {
        // $i encoded as 4 bytes, big endian.
        $last = $salt . pack("N", $i);
        // first iteration
        $last = $xorsum = hash_hmac($algorithm, $last, $password, true);
        // perform the other $count - 1 iterations
        for ($j = 1; $j < $count; $j++) {
            $xorsum ^= ($last = hash_hmac($algorithm, $last, $password, true));
        }
        $output .= $xorsum;
    }
    return substr($output, 0, $key_length);
} 
```

现在加密命令：

```
$mySalt = base64_decode("KvgAFhMuolHAp65m6Q==");
$dev = pbkdf2("sha1", "pass", $mySalt, 1000, 48, true);
$key = substr($dev, 0, 32); //Keylength: 32
$iv = substr($dev, 32, 16); // IV-length: 16

echo "key: ".base64_encode($key)."<br>";
echo "iv: ".base64_encode($iv)."<br>";

$text = base64_decode("aGFsbGloYWxsbw=="); //"hallihallo";
$crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $text, MCRYPT_MODE_CBC, $iv);
echo strlen($crypttext)."<br>";
echo base64_encode($crypttext); 
```

通过执行此操作，我得到以下输出：

```
key: 9sNq3BjYaU6ZIrLEfG1hXrkdOoGc6FoeCQ3T2asXSs4=
iv: oxBgLuPha+Rvm7KV5+3V3A==
16 (output length)
BeyMKI9PAy5IThiM6XcsVQ== 
```

现在我有点困惑，因为我在 PHP 和 VB.Net 中有相同的键、相同的 IV、相同的输入、相同的 Ciphermode，但输出不同。有人现在有什么问题吗？

谢谢你，对不起我的英语不好:)

# r - 扩展公式中的因子相互作用

> ID：11595392
> 
> 赞同：10
> 
> 时间：2012-07-21T19:50:18.373
> 
> 标签：r

我有许多（类`formula`或`Formula`）形式的公式`y ~ a*b`，其中`a`和`b`是因素。

我需要编写一个函数，该函数采用这样的公式并返回一个公式，其中包含交互中的所有术语“拼写出来”。这是一个例子：

```
fac1 <- factor(c('a', 'a', 'b', 'b'))
fac2 <- factor(c('c', 'd', 'c', 'd'))
BigFormula(formula(x ~ fac1*fac2)) 
```

哪里`BigFormula`返回`formula(x ~ a + b + c + d + a:c + a:d + b:c + b:d)`。

有没有一种简单的方法可以做到这一点？

（上下文：我正在运行许多形式的命令`anova(mod1, mod2)`，其中`mod2`嵌套在 中`mod1`，并且两个模型的右侧都包含类似的术语。这些命令的重点是计算 F 统计量。问题`fac1*fac2`在于`anova`将`fac1*fac2`变量，尽管它通常代表三个以上的变量。（例如，在上面的代码中，`fac1*fac2`代表八个变量。结果，`anova`低估了嵌套模型中的限制数量，并且高估了我的自由度。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T20:48:04.517

查看帮助，`formula`因为可能存在对您有用的东西。

例如，该公式`y ~ (a + b + c + d)^2`将为您提供所有主要效果和所有 2 路交互，并且该公式`y ~ (a + b) * (c + d)`给出了您在上面显示的扩展。您还可以减去术语，因此`y ~ a*b*c - a:b:c`不包括 3 向交互。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-22T11:44:56.813

下面的解决方案怎么样。我使用了一个更极端的复杂交互示例。

`f = formula(y ~ a * b * c * d * e)`

为了说明交互项，我们从 terms.formula() 返回的值中提取项：

`terms = attr(terms.formula(f), "term.labels")`

产生：

```
> terms
 [1] "a"         "b"         "c"         "d"         "e"         "a:b"       "a:c"      
 [8] "b:c"       "a:d"       "b:d"       "c:d"       "a:e"       "b:e"       "c:e"      
[15] "d:e"       "a:b:c"     "a:b:d"     "a:c:d"     "b:c:d"     "a:b:e"     "a:c:e"    
[22] "b:c:e"     "a:d:e"     "b:d:e"     "c:d:e"     "a:b:c:d"   "a:b:c:e"   "a:b:d:e"  
[29] "a:c:d:e"   "b:c:d:e"   "a:b:c:d:e" 
```

然后我们可以将其转换回公式：

`f = as.formula(sprintf("y ~ %s", paste(terms, collapse="+")))`

```
> f
y ~ a + b + c + d + e + a:b + a:c + b:c + a:d + b:d + c:d + a:e + 
    b:e + c:e + d:e + a:b:c + a:b:d + a:c:d + b:c:d + a:b:e + 
    a:c:e + b:c:e + a:d:e + b:d:e + c:d:e + a:b:c:d + a:b:c:e + 
    a:b:d:e + a:c:d:e + b:c:d:e + a:b:c:d:e 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-21T21:03:39.673

我还没有学习公式的所有技巧，但如果我想要明确的公式，我会倾向于使用 sapply 和粘贴：

```
# the factors
fac1 <- factor(c('a', 'a', 'b', 'b'))
fac2 <- factor(c('c', 'd', 'c', 'd'))

# create all the interaction terms
out <- sapply(levels(fac1), function(ii) {
  sapply(levels(fac2), function(jj) {
    paste0(ii,":",jj)
  })
})
# along with the single terms
terms <- c(levels(fac1), levels(fac2), as.vector(out))

# and create the rhs of the formula
rhs <- paste0(terms, collapse=" + ")

# finally add the lhs
f <- paste0("x ~ ", rhs) 
```

我们最终得到：

```
> f
[1] "x ~ a + b + c + d + a:c + a:d + b:c + b:d" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-13T04:46:38.693

我只是偶然发现了这个解决方案：

```
 fac1 <- factor(c('a', 'a', 'b', 'b'))
  fac2 <- factor(c('c', 'd', 'c', 'd'))
  update(formula(x ~ fac1*fac2),~.) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-21T20:09:41.347

我们遇到了类似的问题，但更容易一些——在公式中我们得到了大约 50 个变量，我们必须经常更改它们；我们的解决方案是在 R 脚本中将它们循环发送到外部文件，制作实际公式，然后简单地读取该 txt 文件并粘贴它；据我记得，它可以在嵌套循环中完成，以制作更多公式，然后逐行读回文件；总而言之，同时使用 R 脚本和 bash 总是好的

# php - 如何重现 YouTube 的“显示更多”功能？

> ID：11595394
> 
> 赞同：-5
> 
> 时间：2012-07-21T19:50:21.963
> 
> 标签：php, javascript, jquery, css, youtube

我想在我的网站上重现 YouTube 的“显示更多”功能。在每个视频下方，都有一个“显示更多”链接。如果您单击该链接，它会向下移动，并显示一些以前隐藏的文本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T01:42:12.250

我刚刚做的纯 CSS 版本：http: [//dabblet.com/gist/3157489](http://dabblet.com/gist/3157489)

它适用于 Chrome、Firefox、Safari、Opera、IE9+。Show/hide 在 IE9 中可以使用，但缺少过渡（渐变淡入淡出是使用附加元素模拟的）。

HTML 结构类似于：

```
<div class="info-wrapper">
    <input type="checkbox" id="showhide">
    <label for="showhide">
            <div class="more">Show more</div>
            <div>Show less</div>
    </label>
    <div class="info">
        <p><!-- text, text, more text --></p>
        <!--[if lte IE 9]><div class="aftershadow"></div><![endif]-->
    </div>
</div> 
```

CSS：

```
body {
    background: #ccc;
}
.info-wrapper {
    height: auto;
    width: 500px;
    margin: 4em auto;
    padding: 0 0 2em 0;
    position: relative;
}
.info {
    max-height: 120px;
    height: auto;
    padding: .5em 0;
    border-bottom: solid 1px #fff;
    border-radius: 0 0 1em 1em;
    overflow: hidden;
    position: relative;
    transition: 1s;
}
p { margin: 1em; }
.info:after, .aftershadow {
    bottom: 0;
    width: 100%;
    height: 3em;
    border-radius: 0 0 1em 1em;
    position: absolute;
    background: linear-gradient(rgba(192,192,192,0), #ccc);
    content: '';
}
.aftershadow {
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#00cccccc, endColorstr=#ffcccccc);
}
.info-wrapper input[type=checkbox] {
    display: none;
}
.info-wrapper label {
    left: 50%;
    bottom: 1.5em;
    width: 9em;
    height: 1.25em;
    margin:  0 0 0 -2.5em;
    border-bottom: solid 1px #fff;
    border-radius: 0 0 1em 1em;
    overflow: hidden;
    position: absolute;
    font: 700 .67em/1.25em Arial;
    text-align: center;
    text-shadow: 0 1px 0 #fff;
    cursor: pointer;
}
.info-wrapper label .more { margin: -.1em 0 .35em; transition: 1s; }
.info-wrapper input[type=checkbox]:checked ~ .info {
    max-height: 15em;
}
.info-wrapper input[type=checkbox]:checked + label .more {
    margin-top: -1.65em;
} 
```

想法如下：在 HTML 结构中，您有一个隐藏的复选框，但可以通过单击它来选中/取消选中`label`。

最初，信息被压缩并且复选框未被选中。单击“显示更多”（位于 内部`label`）勾选复选框，您现在可以使用[**伪类**](https://developer.mozilla.org/En/CSS/:checked)`label`更改作为其兄弟元素的元素的样式，并在 HTML（`.info`在本例中为 the和一般[**同级选择器**](https://developer.mozilla.org/En/CSS/General_sibling_selectors)。[**`:checked`**](https://developer.mozilla.org/En/CSS/:checked)[](https://developer.mozilla.org/En/CSS/General_sibling_selectors)

 **这是执行此操作的部分：

```
.info-wrapper input[type=checkbox]:checked ~ .info {
    max-height: 15em;
}
.info-wrapper input[type=checkbox]:checked + label .more {
    margin-top: -1.65em;
} 
```

* * *

在 IE8 中也可以使用的另一种方法是使用链接及其`:focus`/`:active`伪类，而不是复选框及其`:checked`伪类。这种方法的缺点是，只要您单击页面中的任何其他位置，`.info`就会再次压缩。

演示：http: [//jsfiddle.net/thebabydino/U7Cyk/](http://jsfiddle.net/thebabydino/U7Cyk/)

HTML 变化不大，我只是用两个链接替换了复选框和标签

```
<div class="info-wrapper">
    <a href="#" tabindex="1" class="more">Show more</a>
    <a href="#" tabindex="1" class="less">Show less</a>
    <div class="info">
        <p><!--stuff, not wasting space here with it--></p>
        <!--[if lte IE 9]><div class="aftershadow"></div><![endif]-->
    </div>
</div> 
```

CSS 基本相同。`input`与&相关的所有`label`内容都已发布，取而代之的是：

```
.info-wrapper a {
    left: 50%;
    bottom: 1.5em;
    width: 9em;
    height: 1.25em;
    margin: -.1em 0 .35em -4.5em;
    border-bottom: solid 1px #fff;
    border-radius: 0 0 1em 1em;
    display: block;
    overflow: hidden;
    position: absolute;
    color: #000;
    font: 700 .67em/1.25em Arial;
    text-align: center;
    text-decoration: none;
    text-shadow: 0 1px 0 #fff;
    transition: 1s;
    cursor: pointer;
}
.info-wrapper a:focus { outline: none; }
.info-wrapper .less { 
    margin-top: -1.5em;
    opacity : 0;
    z-index: -1;
}
.info-wrapper .more:focus ~ .info, 
.info-wrapper .more:active ~ .info { 
    max-height: 15em;
}
.info-wrapper .less:focus ~ .info, 
.info-wrapper .less:active ~ .info { 
    max-height: 120px;
}
.info-wrapper .more:focus, 
.info-wrapper .more:active {
    opacity: 0;
}
.info-wrapper .more:focus + .less,
.info-wrapper .more:active + .less {
    opacity: 1;
    z-index: 1;
} 
```

* * *

* * *

使用 jQuery - 演示[http://jsfiddle.net/thebabydino/yDfTq/](http://jsfiddle.net/thebabydino/yDfTq/)

```
$('.more').click(function(){
    $(this).animate({'opacity': '0'}, 1000);
    $('.less').animate({
        'opacity': '1', 
        'z-index': '1'
    }, 1000);
    $('.info').animate({'height': '15em'}, 1000);
});
$('.less').click(function(){
    $(this).animate({
        'opacity': '0',
        'z-index': '-1'
    }, 1000);
    $('.more').animate({'opacity': '1'}, 1000);
    $('.info').animate({'height': '120px'}, 1000);
}); 
```

​HTML 是一样的，CSS 也大体相同：

```
.info {
    height: 120px;
    padding: .5em 0;
    border-bottom: solid 1px #fff;
    border-radius: 0 0 1em 1em;
    overflow: hidden;
    position: relative;
}
p { margin: 1em; }
.info:after, .aftershadow {
    bottom: 0;
    width: 100%;
    height: 3em;
    border-radius: 0 0 1em 1em;
    position: absolute;
    background: linear-gradient(rgba(192,192,192,0), #ccc);
    content: '';
}
.aftershadow {
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#00cccccc, endColorstr=#ffcccccc);
}
.info-wrapper a {
    left: 50%;
    bottom: 1.5em;
    width: 9em;
    height: 1.25em;
    margin: -.1em 0 .35em -4.5em;
    border-bottom: solid 1px #fff;
    border-radius: 0 0 1em 1em;
    display: block;
    overflow: hidden;
    position: absolute;
    color: #000;
    font: 700 .67em/1.25em Arial;
    text-align: center;
    text-decoration: none;
    text-shadow: 0 1px 0 #fff;
    cursor: pointer;
}
.info-wrapper a:focus { outline: none; }
.info-wrapper .less { margin-top: -1.5em; opacity: 0; z-index: -1; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T20:05:40.540

其中一个标签表明您愿意使用 jQuery。以下链接说明了如何使用 slideToggle 实现此效果。`display: none;`如果您希望在第一个页面加载时将其隐藏，则应设置 div 或其他元素的样式。

[http://www.mkyong.com/jquery/jquery-slideup-slidedown-and-slidetoggle-example/](http://www.mkyong.com/jquery/jquery-slideup-slidedown-and-slidetoggle-example/)

```
$("#slideToggle").click(function () {
   $('.slideTogglebox').slideToggle();
}); 
```

官方文档：[http ://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)**

# sharepoint-2010 - 如何在将 InfoPath 任务表单移动到新网站集后将其重新连接到 SPD 工作流

> ID：11595395
> 
> 赞同：0
> 
> 时间：2012-07-21T19:50:35.860
> 
> 标签：sharepoint-2010, migration, sharepoint-designer, infopath2010

我的测试站点集合中有全局可重用工作流（在 SPD 中创建）。此 WF 使用自定义 InfoPath 任务表单。现在我正在尝试将其移至新的生产网站集。我已经完成了接下来的步骤。

1.  复制我的全局可重用 WF（在 SPD 中）以使其可重用（我无法将 GLOBALLY 可重用 WF 保存为模板）。
2.  将新的可重用 WF（不可全局重用）另存为 WF 模板并将其部署到生产环境。

现在我的 WF 运行良好，但我错过了我的自定义 InfoPath 任务表单，我不知道如何将它连接到我的 WF。

**从测试环境转移到生产环境后，有什么方法可以重用我的工作流程中的 InfoPath 任务表单？可能我必须使用另一种方法吗？**

每一个建议都非常感谢。非常感谢您提前。

PS：当我在 SPD 中创建自定义 InfoPath 任务表单时，我不完全了解幕后发生的事情。我用谷歌搜索了它，但找不到任何好的文章来澄清。如果您知道任何可以帮助我理解 InfoPath 和 SharePoint 2010 之间关系的文章或书籍，如果您推荐它，那就太好了。

PPS：SharePoint 2010。

**更新 1：**似乎在步骤 1 中丢失了 InfoPath 表单（我在 wsp 文件中看不到表单）。如果我使用 InfoPath 表单创建新的可重用 WF（不是全局），我可以在 wsp 文件中看到它们，并且 WF 可以正确部署到表单中。似乎[Microsoft 建议将 Globaly 可重用 WF 转换为可重用 WF](http://msdn.microsoft.com/en-us/library/ff358272.aspx)的方式效果不佳，并且错过了 InfoPath 任务表单。

我还在 MSDN 论坛上发现了一个[关于相同问题的未回答问题。](http://social.technet.microsoft.com/Forums/en-US/sharepoint2010customization/thread/5be39312-88ea-4f1b-ab5b-d2c1cce965ca/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:14:57.773

感谢 Gennady Vanin，他帮助我找到[了解决方案](https://sharepoint.stackexchange.com/questions/41542/how-to-reconnect-infopath-task-form-to-spd-workflow-after-moving-it-to-the-new-s/41551#41551)。

要重新连接 InfoPath 表单，我们可以使用下一种方法：

**1\. 导出表格源文件。** 在 InfoPath 设计器中打开表单。而且因为我们不能使用向导将它重新发布到不同的地方（它的类型是工作流表单），我们应该将源文件（从菜单文件\发布）导出到某个文件夹。在这一步之后，我们收到了一组文件，其中一个是“manifest.xsf”。

**2\. 关闭 InfoPath 设计器。**

**3\. 更正 manifest.xsf** 中的 URL 在文本编辑器中打开“manifest.xsf”。查找与第一个网站集相关的所有 URL，并将其替换为链接到新网站集的新 URL。保存文件。 **提示：**如果您不知道要在新网站集中发布的 URL，您可以以相同的方式从中打开自动生成的表单（查看其 manifest.xsf 中的 URL）。

**4\. 发布更改的表格。** 打开 InfoPath 设计器，在其中打开更正后的 manifest.xsf 并发布它（例如通过按下发布按钮）。

**5\. 万岁！表单部署到新的地方！**

您应该对工作流中的所有自定义 InfoPath 任务表单重复此步骤。

如果有人需要更详细的描述，我可以添加屏幕截图。

# ios - 从 UIView 外部输入的 iOS 触摸

> ID：11595398
> 
> 赞同：3
> 
> 时间：2012-07-21T19:50:57.623
> 
> 标签：ios, uiview, multi-touch, touches

我正在尝试为 iOS 构建一个虚拟钢琴键盘。我遇到的最大问题之一是如何处理在 UIView 之外开始的触摸然后进入它。由于在另一个视图上调用了 touchesBegan，所以当触摸在其中移动时，我无法弄清楚如何让目标视图识别触摸。

是否有捷径可寻？

# mysql - 多列的条件排序

> ID：11595400
> 
> 赞同：0
> 
> 时间：2012-07-21T19:51:19.970
> 
> 标签：mysql, ruby-on-rails-3

我有一个 Post 模型和一个 View 模型（记录用户对每个帖子的视图），如下所示：

```
class View < ActiveRecord::Base
    belongs_to :user, :class_name => 'User'
    belongs_to :post, :class_name => 'Post'
    validates_uniqueness_of :user_id, :scope =>:post_id
end 
```

每个帖子都有一个名为“special”的布尔字段。

我想获取具有以下排序条件的所有帖子：

1.  如果一个帖子是“特殊的”并且当前用户没有查看（比如 user_id=2），那么它应该出现在结果的顶部，内部按 id 降序排序）。
2.  根据帖子的 id 字段对所有其他帖子（非特殊和查看特殊）进行排序。

无法弄清楚我是否以及如何做到这一点。

首先，我尝试了以下查询：

```
posts = Post.order("(case when special = true then 'special desc, id desc' else 'id desc' end)") 
```

但它的行为方式很有趣：返回顶部的所有特殊帖子，然后是常规帖子，但 id 按升序排序。

我在这里想念什么？另外，如何使用带有如此复杂的 order by 子句的连接（用于视图表）？我试图为此编写一个 SQL，但也在那里苦苦挣扎！给我看点光:)

PS我是Rails的新手，还在学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:22:10.277

您发布的代码是，对于每一行，计算 2 个字符串文字中的一个，并根据这些文字进行排序，这就是为什么您没有得到您想要的示例的原因。我会做类似的事情

```
Post.order('special desc, id desc') 
```

由于 Rails 在 MySQL 中将布尔字段存储为 0/1，这会将特殊帖子排序在非特殊帖子之前。

向其中添加视图并不会改变很多：您需要离开加入视图表并执行类似的操作

```
Post.joins('left join views on posts.id=post_id and user_id=2').order(' ( views.id is null && special)  desc, id desc') 
```

检测是否找到了一个视图，该`is null`视图随后与帖子的特殊性相结合。

# php - 找到用户喜欢的页面：最好的方法？

> ID：11595402
> 
> 赞同：-1
> 
> 时间：2012-07-21T19:51:41.697
> 
> 标签：php, facebook, facebook-graph-api

```
 $likes = $facebook->api("/me/likes");
 foreach($likes['data'] as $page_likes) {
    if($page_likes['id'] == "someid") {

    }
  } 
```

有没有什么简单的方法可以找到它而不是循环那些成百上千的喜欢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:14:23.293

最佳方法（回答此类问题）：**阅读文档……！**

[https://developers.facebook.com/docs/reference/api/user/#likes](https://developers.facebook.com/docs/reference/api/user/#likes)：

> “您可以通过向 /PROFILE_ID/likes/PAGE_ID 发出 HTTP GET 来检查用户是否喜欢特定页面。[...] 如果用户连接到页面，这将在数据数组中返回具有以下字段的对象：[...] 如果用户未连接到页面，则数据数组将为空。”</ p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:59:07.217

array_map 或 array_walk 可能更有效，但这取决于你想对数据做什么......

# wpf - 如何将 Treeview 与项目集合绑定

> ID：11595403
> 
> 赞同：0
> 
> 时间：2012-07-21T19:51:59.140
> 
> 标签：wpf, vb.net, treeview

我有一堂课：

```
Public Class treeModel

    Public Property title As String
    Public Property type As String
    Public Property id As String
    Public Property items As List(Of treeModel) 'Sons

End Class 
```

此类包含有关每个项目的元数据及其儿子的列表，如何将此类绑定到 WPF Treeview 控制器？，以及何时选择项目我如何访问它的元数据？

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:32:29.837

要将嵌套的对象集合绑定到您的 treeView，您需要在视图中定义一个`Hierarchical DataTemplate`with `DataTemplate`。如果这对您来说是新事物，这些链接可能对您有所帮助 -

[WPF TreeView binding](http://social.msdn.microsoft.com/Forums/en-us/wpf/thread/187ce3d2-f7ea-4488-b172-299a684222fb "WPF 树视图绑定") and [Binding with treeView](https://stackoverflow.com/questions/272854/wpf-treeview-binding "与树视图绑定") or let a search engine do the honor of for you - [Search for Binding to treeView in WPF](http://www.google.co.in/search?q=binding%20to%20treeview%20wpf "在 WPF 中搜索绑定到 treeView")

# c++ - 为什么 const 方法不覆盖 C++ 中的非常量方法？

> ID：11595404
> 
> 赞同：3
> 
> 时间：2012-07-21T19:52:27.283
> 
> 标签：c++

考虑这个简单的程序：

```
class Shape
{
public:
    virtual double getArea() = 0;

};

class Rectangle : public Shape
{
    int width;
    int height;

public:
    Rectangle( int w , int h ) :width(w) , height(h) {}

    double getArea() const
    {
        return width * height;
    }
};

int main() {

    Rectangle* r = new Rectangle(4,2);
} 
```

试图编译这个问题给了我：

```
 'Rectangle' : cannot instantiate abstract class 
```

当协变返回类型是时，为什么在 C++ 中不允许这样做？**当然，我可以通过使其`Rectangle::getArea`成为非常量函数**来修复程序，但我很好奇为什么语言设计者会做出不同的决定。

**编辑**

很多人在他们的答案中提到了签名的不同之处。但也是如此

```
class Shape
{
public:
    virtual BaseArea* getArea() = 0;

};

class Rectangle : public Shape
{
public:
    virtual RectangleArea* getArea();
}; 
```

但是当 C# 不允许时，C++ 会竭尽全力允许它。

C++ 支持协变返回类型，因为如果我希望接口返回 a`BaseArea*`并且实现返回 a `RectangleArea*`，那么只要 RectangleArea 派生自 BaseArea 就可以，因为我的合同得到满足。

同样，提供非变异函数的实现不是满足只要求变异函数的接口吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T19:55:03.227

因为你未能覆盖

```
virtual double getArea() = 0; 
```

那不一样

```
virtual double getArea() const = 0; 
```

这不是同一个功能；两者都可以在一个类定义中共存。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-21T19:58:59.493

在这种情况下会发生什么：

```
struct base
{
    virtual void foo(); // May implement copy-on write
    virtual void foo() const;
};

struct derived : base
{
    // Only specialize the const version, the non const
    // default suits me well. How would I specify that I don't
    // want the non-const version to be overriden ?
    void foo() const;
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-21T19:59:45.317

这是因为`const`方法与非方法具有不同的签名`const`。所以编译器正在寻找一个没有实现的方法。据推测，非`const`版本可以做一些与版本完全不同的事情`const`。但是，如果这是您想要的语义，您可以轻松地提供它：

```
class Shape
{
public:
    virtual double getArea() {
        return static_cast<const Shape *>(this)->getArea();
    }
    virtual double getArea() const = 0;
}; 
```

在您的编辑中，您提供了协变返回类型的示例：

> C++ 支持协变返回类型，因为如果我希望一个接口返回一个 BaseArea* 和一个返回为 RectangleArea* 的实现，那么如果 RectangleArea 派生自 BaseArea 是可以的，因为我的合同得到满足。

方法或函数的返回值从未成为其签名的一部分。方法的`const`-ness 与返回值无关。它影响方法调用的对象，本质上使函数的第一个参数成为指向`const`对象的指针。并且函数和方法参数控制它的签名（除其他外，比如它的名字，它是否是`static`，等等）。

你问得更具体：

> 在同一行中，不是提供非变异函数的实现满足只要求变异函数的接口。

即使该语言可以（并且我认为它实际上在某些情况下确实可以）解析为该`const`版本，它仍然需要为非`const`版本提供一个实现，因为那是被声明为纯虚拟的方法。

对于`const`在 non`const`也可用时调用版本的情况，请考虑：

```
class Shape {
public:
    virtual double getArea() {
        std::cout << "non-const getArea" << std::endl;
        return static_cast<const Shape *>(this)->getArea();
    }
    virtual double getArea() const = 0;
}; 
```

再加上`Rectangle`你的例子。然后：

```
Rectangle *r = new Rectangle(4,2);
Shape *s = r;
r->getArea(); // calls const version
s->getArea(); // call non-const version 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-21T22:00:06.103

大多数答案都说明了为什么根据当前的语言规则不允许这样做，而不是说明为什么规则是这样写的。我将尝试回答为什么规则不能按照您的建议方式进行。

Stroustrup 的*C++ 设计与演进*这本书描述了为什么放宽了压倒一切的规则以允许协变返回，而这在 C++ 中并不总是允许的。因此，您的问题的一个答案是，最初的覆盖必须与签名完全匹配，并且对于不会削弱虚函数合同的“兼容”返回类型进行了例外处理。可能他们只是没有进一步放松，因为没有人想到或没有人建议。D&E 确实提到了其他可能的压倒性规则放宽，但表示“我们认为通过压倒性允许此类转换的好处不会超过实施成本和混淆用户的可能性。” 这很重要，因为我认为您的想法很有可能使用户感到困惑，并且实际上会导致安全问题，

考虑：

```
class Square : public Rectangle
{
public:
  explicit Square(int side) : Rectangle(side, side) { }

  virtual double getArea() // N.B. non-const, overrides Shape::getArea
  {
    // class author decides this would be a sensible "sanity check"
    // (I'm not suggesting this is a good implementation)
    if (height != width)
      height = width;
    return Rectangle::getArea();
  }
};

const Square s(2);

int main()
{

  double (Rectangle::*area)() const = &Rectangle::getArea;
  double d = (s.*area)();
} 
```

我相信您的想法会使此代码有效，在 const 对象上调用 const 成员函数，但实际上它是一个虚函数，因此它调用`Square::getArea()`的*不是 const*，因此它尝试修改 const 对象，这可能是存储在只读内存中，因此会导致段错误。

这只是示例中允许您压倒一切的放松如何`Shape`导致未定义行为的一个示例，我相信在更现实的代码中可能会有更大，甚至更微妙的问题。

您可能会争辩说编译器不应该允许非常量函数覆盖`Rectangle::getArea`，因此应该拒绝`Square::getArea`（“一旦虚函数变为 const，它就不能返回”），但这会使层次结构非常脆弱。添加或删除具有不同常量的函数的中间基类`getArea`将改变是否`Square::getArea()`是覆盖或重载。虚函数已经存在一些像这样的脆弱性，尤其是协变返回，但根据 D&E Stroustrup 的说法，协变返回很有用，因为“放松允许人们在类型系统中做一些重要的事情，而不是使用强制转换。” 我不认为允许 const 函数覆盖非 const 函数非常适合类型系统，并且不允许做任何重要的事情，并且不会摆脱强制转换以允许使用新的（安全）技术.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T19:57:18.710

一个方法可以被重载以同时拥有一个是`const`和一个不是的版本。（由于返回类型不是方法的唯一签名的一部分，并且方法可能不接受任何参数，`const`因此可能是区分返回的东西的*唯一*`const X*`方法，比如说，或`X*`。）

如果编译器不要求您对此进行精确处理，那么有人可能会`const`向基类添加一个非版本，然后您会突然覆盖一个不同的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-21T20:02:36.200

已经提到了 const 部分，所以我跳过这个。假设您将基类视为您要确保履行的合同。由于函数的 const 和非 const 版本可以共存并且应该共存，因此应该告知您是否不履行给定的合同。

想象一个基类，它有一个 const 和一个非 const 方法，例如一个具有两种风格的 operator[] 的容器。现在您继承但不提供这两个功能。您的孩子没有履行合同，也没有提供所需的功能。所以你应该得到一个错误，因为你的孩子可能无法通过多态性使用

# c++ - QWebPage 和多线程

> ID：11595407
> 
> 赞同：1
> 
> 时间：2012-07-21T19:52:55.160
> 
> 标签：c++, multithreading, qt, qwebkit, qwebpage

我有这个代码：

```
class TestThread : public QThread
{
public:
    void run()
    {
        QFile file("test.html");
        file.open(QIODevice::ReadOnly);
        QWebPage page;
        page.mainFrame()->setHtml(file.readAll());
        qDebug() << page.mainFrame()->toHtml();
        qDebug() << "\n\n\n\n";
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    for(int i = 0; i < 2; ++i)
    {
        TestThread thread;
        thread.start();
        thread.wait();
    }
    return a.exec();
} 
```

并输出：

```
"<html><head>
    <title>My page</title>
  </head>
  <body>
        My content

</body></html>" 

"<html><head></head><body><html>
  <head>
    <title>My page</title>
  </head>
  <body>
        My content
  </body>
</html></body></html>" 
```

在第二遍中，标签过多。什么是解决方法？或者我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:53:23.170

我在 Linux 操作系统中遇到了问题。在 Windows 中，我收到消息“必须在 GUI 线程中创建小部件”。但是 QWebPage 中的内容是正确的。所以，我不会使用 QWebPage 来完成我的任务。

# ios - UIScrollView 没有缩放

> ID：11595409
> 
> 赞同：1
> 
> 时间：2012-07-21T19:53:01.140
> 
> 标签：ios, uiscrollview, uiscrollviewdelegate

UIScrollView 的缩放功能有问题。它根本不起作用。我读过类似的帖子，其他人使用的修复似乎都不适合我。我的 viewController 引用了 UIScrollViewDelegate，我有一个 UIScrollView 的实例变量，我将我的子视图声明为 UIScrollView 的委托对象，并且我有`(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView`. 这是我的 loadView 函数：

```
(void)loadView 
{
    CGRect frame = CGRectMake(0, 0, 320, 480);

    scrollView = [[UIScrollView alloc] initWithFrame:frame];
    [scrollView setScrollEnabled:YES];

    CGRect reallyBigRect;
    reallyBigRect.origin = CGPointZero;
    reallyBigRect.size.width = frame.size.width * 2.0;
    reallyBigRect.size.height = frame.size.height * 2.0;
    [scrollView setContentSize:reallyBigRect.size];

    CGPoint offset;
    offset.x = frame.size.width * 0.5;
    offset.y = frame.size.height * 0.5;
    [scrollView setContentOffset:offset];

    [scrollView setMinimumZoomScale:1];
    [scrollView setMaximumZoomScale:5];
    [scrollView setUserInteractionEnabled:YES];
    self.scrollView.delegate = self;

    self.view = scrollView;

    views = [[HypnosisView alloc] initWithFrame:reallyBigRect];

    [scrollView addSubview:views];

    [self.view setBackgroundColor:[UIColor clearColor]]; 

} 
```

此代码允许我很好地滚动，但不存在缩放。

希望收到某人的来信，戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:16:01.293

您是否尝试过实施`scrollViewDidEndZooming:withView:atScale:`？

* * *

来自[Apple 的 UIScrollView 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html)：

> 滚动视图还处理内容的缩放和平移。当用户做出捏合或张开手势时，滚动视图会调整内容的偏移量和比例。当手势结束时，管理内容视图的对象应该根据需要更新内容的子视图。（请注意，手势可以结束并且手指仍然可以向下。）当手势正在进行时，滚动视图不会向子视图发送任何跟踪调用。
> 
> 该类`UIScrollView`可以有一个必须采用`UIScrollViewDelegate`协议的委托。**为了使缩放和平移工作**，委托**必须同时实现**和`viewForZoomingInScrollView:`scrollViewDidEndZooming **:withView:atScale:** ; 此外，最大 ( `maximumZoomScale`) 和最小 ( `minimumZoomScale`) 缩放比例必须不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-04T08:13:19.830

要启用缩放，需要做两件事：

1.  使用`UIScrollViewDelegate`协议并实现`viewForZoomingInScrollView:UIScrollView -> UIView?`。将滚动条委托设置为实现类。这期望 UIView 的返回被缩放。所以一个简单的例子是：

    ```
     @IBOutlet var myZoomableImageView: UIImageView?`

    override func viewDidLoad() {
        myScrollView?.delegate = self
    } 

    func viewForZoomingInScrollView(scrollView: UIScrollView) -> UIView? {
        return myZoomableImageView
    } 
    ```

2.  `UIScrollView.minimumZoomScale`使用和`UIScrollView.maximumZoomScale`像这样将最大和最小缩放设置为滚动视图：

    ```
     myScrollView?.minimumZoomScale = 1.0
    myScrollView?.maximumZoomScale = 3.0 
    ```

    `

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-15T01:12:31.900

这篇文章[重点介绍了启用缩放所需的三件事](https://stackoverflow.com/a/6143833/35690)：

> 1.  您需要一个在您的实例上实现`UIScrollViewDelegate`并设置为的委托`delegate``UIScrollView`
> 2.  在您的委托上，您必须实现一种方法：（`viewForZoomingInScrollView:`它**必须返回您对缩放感兴趣的内容视图**）。您也可以 `scrollViewDidEndZooming:withView:atScale:`选择实施。
> 3.  在您的`UIScrollView`实例上，您必须将`minimumZoomScale`和设置`maximumZoomScale`为不同（默认情况下它们是 1.0）。

从您的示例代码中，我们可以看到 #1 和 #3 已实现。因此，#2 很可能是问题所在。仔细检查实现该`viewForZoomingInScrollView`方法的代码，或者最好将其包含在上面的代码中。

# jquery - 如果 var 条件重定向到 url

> ID：11595413
> 
> 赞同：0
> 
> 时间：2012-07-21T19:53:47.390
> 
> 标签：jquery, jquery-mobile, jquery-selectors

我正在尝试使用此处提供的移动重定向脚本的 jQuery 版本 - [http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

简单的指令说，“如果浏览器是移动设备，jQuery.browser.mobile 将是真的”

我正在创建一个 if 条件来重定向页面，但我是新手。帮助将不胜感激。

```
var mobile = "jQuery.browser.mobile";
var url = "http//domain.com/mobile";

$(document).ready(function() {
    if (mobile = true) {
        $(location).attr('http://domain.com/mobile',url);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:54:58.187

```
if(jQuery.browser.mobile) {
    location.href = 'http://domain.com/mobile';
} 
```

但是，您**需要先学习 JavaScript**。您发布的代码清楚地表明您不了解该语言的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:54:39.397

```
if (mobile = true) { 
```

应该

```
if (mobile == true) { 
```

或者更好，

```
if (mobile) { 
```

# jquery - jQuery-Validation-Engine：基于另一个字段的必填字段

> ID：11595415
> 
> 赞同：0
> 
> 时间：2012-07-21T19:53:56.593
> 
> 标签：jquery, jquery-validation-engine

在我的交易订单表格中，如果用户选择订单类型 = "limit"，则必须指定限价。我正在尝试使用 funcCall 强制执行此规则，但它不起作用。如果选择了限价单并且限价字段留空，验证引擎将成功验证表单。这是我的 HTML：

```
<li>
    <label for=tradeForm_orderType>Order Type</label>
    <select id=tradeForm_orderType name=orderParams.type>
        <option value=Market>Market</option>
        <option value=Limit>Limit</option>
    </select>
</li>            

<li id=tradeForm_limitPriceItem>
    <label for=tradeForm_limitPrice>Limit Price</label>
    <input class="validate[funcCall[checkLimitOrder],custom[number]]"
        type=text name=orderParams.limitPrice.amount id=tradeForm_limitPrice>
</li> 
```

这是我的 checkLimitOrder 函数：

```
function checkLimitOrder(field, rules, i, options) {
    if ($('#tradeForm_orderType').val() === 'Limit' && field.val().length === 0) {
        return 'Please enter a limit price';
    }
} 
```

这几乎可以工作！确实调用了 checkLimitOrder 并返回错误消息。但是在返回时，jQuery 验证引擎会根据以下逻辑（第 582-583 行）忽略错误消息：

```
// If the rules required is not added, an empty field is not validated
if(!required && field.val() == "") options.isError = false; 
```

好吧，我不能使该字段成为必填项，因为它只是有条件地需要。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:10:00.163

回答我自己的问题。

原来验证引擎不验证隐藏字段（尽管这没有明确[记录](http://posabsolute.github.com/jQuery-Validation-Engine/)。所以解决方案是在不需要字段时隐藏limitPriceItem。现在我可以将“validate[required,custom[number]]”放在限制价格字段，并且仅在该字段可见时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T18:42:18.893

您还可以使用 condRequired 参见[http://posabsolute.github.io/jQuery-Validation-Engine/#validators/condrequired](http://posabsolute.github.io/jQuery-Validation-Engine/#validators/condrequired)

# apache - mod_rewrite 用于通配符子域

> ID：11595420
> 
> 赞同：0
> 
> 时间：2012-07-21T19:54:15.283
> 
> 标签：apache, mod-rewrite

我需要帮助编写一个 mod_rewrite 来为用户分配他们自己的个人子域。

我想将 sub.domain.com 转换为 sub.domain.com/profile?user=sub

但是如果用户打开任何页面，也应该传递“用户”变量，即

sub.domain.com/page 到 sub.domain.com/page?user=sub

它应该被屏蔽，即没有重定向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:02:32.367

尝试将此添加到文档根目录中的 htaccess 文件中

```
# for / requests
RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com$ [NC]
# this step may not be necessary if you don't care about "www.domain.conm"
RewriteCond %1 !www
RewriteRule ^$ /profile?user=%1 [QSA,L]

# for any "page"
RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com$ [NC]
# this step may not be necessary if you don't care about "www.domain.conm"
RewriteCond %1 !www
RewriteRule ^(.*)$ /$1?user=%1 [QSA,L] 
```

# c - 哪个定义更好？

> ID：11595431
> 
> 赞同：5
> 
> 时间：2012-07-21T19:55:38.153
> 
> 标签：c

```
#include<stdio.h>
int main(int argc , char *argv[])
{
    int array[2][2] = {{1,100},{1000,10000}};

    int *pointer    = array;
    int *ppointer   = &array;
    int *pppointer  = array[0];
    int *ppppointer = &array[0];

    printf("%d\n",*pointer);
    printf("%d\n",*ppointer);
    printf("%d\n",*pppointer);
    printf("%d\n",*ppppointer);

    return 0;
} 
```

四个指针指向数组的第一个元素。上面显示的哪个定义更好？而且我不知道为什么数组和 &array 的值相同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T20:17:53.530

编译所有定义的唯一原因是您的 C 编译器在指针类型转换方面过于允许。如果你在这方面使用了一些使其更加迂腐的开关，它应该立即告诉你只有第三次初始化是有效的，而其余的都是错误的。

在大多数情况下（除了少数例外），当`T[N]`表达式中使用类型数组时，它会“衰减”（隐式转换）为指针类型`T *`- 指向其第一个元素的指针。换句话说，在任何数组的这种上下文中`A`，`A`表达式都等价于`&A[0]`。唯一不会发生数组类型衰减的上下文是一元运算`&`符、`sizeof`运算符和用作`char`数组初始值设定项的字符串文字。

在您的示例`array`中是一个`int [2][2]`类型的值。当在初始化的右侧使用时，它会衰减为指针类型`int (*)[2]`。因此，这是无效的

```
int *pointer    = array; 
```

右手边是`int (*)[2]`，而左手边是`int *`。这些是不同的指针类型。你不能用另一个初始化一个。

这

```
int *ppppointer = &array[0]; 
```

与前一个完全相同：右侧产生一个`int (*)[2]`类型的值。由于同样的原因，它是无效的。

该`&array`表达式产生一个`int (*)[2][2]`类型的指针。再次，出于这个原因

```
int *ppointer   = &array; 
```

是无效的。

您的示例中唯一有效的初始化是

```
int *pppointer  = array[0]; 
```

`array[0]`是`int [2]`类型的表达式，它衰减为`int *`类型 - 与左侧的类型相同。

换句话说，这里没有哪个“更好”的问题。你的初始化只有一个是有效的，其他的都是非法的。有效的初始化也可以写成

```
int *pppointer  = &array[0][0]; 
```

由于我上面描述的原因。现在，哪个右侧“更好”（`array[0]`或`&array[0][0]`）取决于您的个人喜好。

* * *

为了使您的其他初始化有效，指针应声明如下

```
int (*pointer)[2]     = array;
int (*ppointer)[2][2] = &array;
int (*ppppointer)[2]  = &array[0]; 
```

但是这样的指针将具有与指针不同的语义`int *`。你显然需要`int *`特别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T20:02:43.697

只有第三个实际上做了正确的事情。所有其他三个都是无效的 C++，并在我的 C 编译器中引起警告。通常最好编写同样是有效 C++ 的 C，因为在某些平台上，`C++`编译器也是 C 的推荐编译器（MSVC）。这也使得在 C++ 项目中包含 C 代码变得更容易，而无需大量的构建系统摆弄。

为什么您的编译器抱怨 1、2 和 4？右侧的表达式都没有要转换为的正确类型`int*`。

1.  `array`具有`int[2][2]`可以转换为的类型`int(*)[2]`，而不是`int*`
2.  `&array`是一个指针`int[2][2]`
3.  `array[x]`实际上有类型`int*`
4.  `&array[x]`有类型`int**`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T20:04:35.887

```
int *pointer    = array;     //Incorrect
int *ppointer   = &array;    //Incorrect
int *pppointer  = array[0];  //Correct
int *ppppointer = &array[0]; //Incorrect 
```

那是简短的版本。现在说说原因。

第一个指针不正确，因为您正在分配“数组”（这是一个没有任何进一步说明的指针）...但不是 int 之一，而是 int *[] 之一

第二个指针不正确，因为您要分配指针的地址……本质上是变量的地址，该地址保存指向数据的指针。

第三个是正确的，因为无论大小如何，您都会得到一个指向 int 数组的指针。

第四个不正确，因为您正在复制第一个数组的地址。这使它成为一个 int **，而不是一个 int *。

很抱歉进行了许多编辑……我一定很累。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T20:16:42.827

简短的回答：

> $猫decls.c

```
int main(void)
{
    int array[2][2] = {{1,100},{1000,10000}};
    int *pointer    = array;
    int *ppointer   = &array;
    int *pppointer  = array[0];
    int *ppppointer = &array[0];
} 
```

> $ clang decls.c -Wall -o decls

```
decls.c:4:7: warning: incompatible pointer types initializing 'int *' with an
      expression of type 'int [2][2]' [-Wincompatible-pointer-types]
        int *pointer    = array;
             ^            ~~~~~
decls.c:5:7: warning: incompatible pointer types initializing 'int *' with an
      expression of type 'int (*)[2][2]' [-Wincompatible-pointer-types]
        int *ppointer   = &array;
             ^            ~~~~~~
decls.c:7:7: warning: incompatible pointer types initializing 'int *' with an
      expression of type 'int (*)[2]' [-Wincompatible-pointer-types]
        int *ppppointer = &array[0];
             ^            ~~~~~~~~~ 
```

所以只有第三个声明是正确的。

稍微长一点的答案：当您在 C 中声明某些内容时，您使用一个**表达式**声明它，该表达式在评估时会为您提供左侧的类型。

因此，如果您有`char name[][]`，则意味着当您拥有 时`name[2][3]`，您将获得`char`。这反过来起作用： let `A = name[3]`; 你怎么能`char`摆脱`A`呢？通过这样做`A[2]`，`A`一个`char *`。

这就是为什么只有第三个声明是正确的：因为左边的声明表达式和右边的表达式都具有相同的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T20:21:41.667

它们都不是正确的（第三个不会出错，但我认为这不是海报想要的价值）。

它应该是：

```
int ** pointer1    = array;
int ** pointer2   = &array;        //This one is wrong
int ** pointer3  = array[0];      //This one is not correct in this case
int * ppointer3  = array[0];
int ** pointer4 = &array[0];
int * pointer5 = &array[0][0]; 
```

我更喜欢第一个和最后一个。

如果是一维数组，我更喜欢第一个，因为它表明数组基本上是指针。如果是多维数组，我会使用最后一个（因为它只需要解引用一次即可获取值，但要注意索引：例如如果要获取 1000，则需要使用`pointer5[2]`而不是`pointer5[1][1]`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-21T20:03:17.503

它们都是等价的。

&array 是数组的地址，它从与第一个元素相同的位置开始，因此 &array = &array[0]

array 是一个数组，但在某些情况下，它可以衰减为指向其第一个元素的指针，这就是为什么 array = &array = &array[0]

至于 `int *pppointer = array[0];`

我的第一印象是这应该是错误的。可能是别人可以解释。

更新：我的猜测是，这里的编译器将数组视为指针，给出：

`int *pppointer = (&array)[0] = array[0]`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-07-21T20:12:53.637

因此，您在数组中有一个数组。所以变量“array”实际上是一个指向另一个指针的指针。

所以如果你说：

```
int *pointer = array; 
```

你有一个类型不匹配。`*pointer`是指向 int 的指针，但又`array`是指向另一个指针的指针。

当你说：

```
int *ppointer = &array; 
```

你仍然有类型不匹配。&array 为我们提供了指向指针的指针的地址，我们只能将其分配给指向指针的指针。

当你说：

```
int *pppointer = array[0]; 
```

这是对的。方括号*取消引用*数组变量。所以`array[0]`实际上是指一个指向 int 的指针，它与`*pppointer`'s 的类型相匹配。

当你说：

```
int *ppppointer = &array[0]; 
```

所以，我们有点回到我们从这里开始的地方。`array[0]`是指向 int 的指针，指向 int`&array[0]`的指针的地址也是如此，我们只能将其分配给指向指向 int 的指针的指针。

所以最后，第三个是唯一真正有效的。但是，我个人认为实现此目的的更好方法是：

```
int *pointer = *array; 
```

# c++ - 为 QScrollArea 保留空间

> ID：11595433
> 
> 赞同：3
> 
> 时间：2012-07-21T19:55:42.647
> 
> 标签：c++, qt

我正在使用带有自定义 QWidget 的 QScrollArea。我面临的问题是，每当出现滚动条时，都会导致小部件中的元素发生变化。所以，我想保留一些空间，所以当滚动条出现或消失时，小部件不受影响。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T15:56:43.903

```
scrollArea->setWidgetResizable(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T08:37:39.870

我遇到了这个问题并且刚刚解决了它（可能不完全）。

我为滚动小部件和 QScrollArea 设置了固定宽度，并设置了 QScrollArea Horizo​​ntal SizePolicy 固定，并隐藏了 Horizo​​ntalScrollBar。示例代码

```
QWidget *pWidget = new QWidget(this);
pWidget->setFixedWidth(500);
pWidget->setLayout(...)

QScrollArea *pScrollArea = new QScrollArea();
// Same with widget
pScrollArea->setFixedWidth(500);
pScrollArea->setWidget(pWidget);
pScrollArea->setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Expanding);
// Needed.
pScrollArea->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff); 
```

我还发现了一个错误报告：[QTBUG-2347 QScrollArea: a new scroll policy that reserved space for the scroll bar](https://bugreports.qt.io/browse/QTBUG-2347)，它被关闭了。但我不知道这个错误是否已修复以及解决方案是什么。

# visual-studio - Visual Studio 2012 无法识别 Xaml 文件，设计视图损坏

> ID：11595434
> 
> 赞同：4
> 
> 时间：2012-07-21T19:55:46.253
> 
> 标签：visual-studio, xaml, visual-studio-2012, xaml-designer

Visual Studio Professional RC 2012 上的 Xaml 设计视图曾经为我工作。却不知为何突然停了下来。

*   Visual Studio 11 不再识别 Xaml 文件。
*   在属性中，它将 XAML 文件视为 XML。
*   在解决方案资源管理器中，它将其识别为 xaml 文件
*   右键单击 -> 设计视图打开一个新的 Xaml*代码*页
*   控件工具箱不显示任何内容
*   我的操作系统是 Windows 7 x64。
*   我已将截至 2012 年 7 月的所有更新应用到 VS11
*   我曾尝试修复 Visual Studio 和重置设置，但无济于事。
*   在搜索或 stackoverflow 中没有任何东西可以解决这个问题。
*   我没有尝试卸载/重新安装

[Visual Studio 2012 RC 设计器无法识别 Windows Metro 应用程序的 xaml](https://stackoverflow.com/questions/10875565/visual-studio-2012-rc-designer-does-not-recognize-xaml-for-a-windows-metro-app)看起来与我的情况相同，但我的问题表明这个问题比他的标题更普遍。

重新安装解决了他的问题，但并没有阐明这个令人沮丧的问题。

有人可以帮忙吗？

* * *

**编辑**- 重新安装几乎解决了这个问题。设计视图正常工作，工具箱已填充，自动完成功能又回来了，XAML 在工具-> 选项-> 文本...下可用，并且可以查看控件元素属性。

除了 XAML 代码视图不再进行语法突出显示这一奇怪的事实外，一切都很正常。这并不奇怪，因为与[http://msdn.microsoft.com/en-us/library/bb907395(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb907395(v=vs.90).aspx)所期望的不同，显示的项目中没有 XAML 前缀项目。

也许在事情的计划中相对较小，但也是一个非常烦人的损失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T04:06:45.790

[此链接](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/cb7b792e-a2fa-4381-b78d-b22f288600d3)中的建议 4对我有用： `devenv /resetuserdata`在命令提示符中。

所以至少在我的情况下，重新安装然后上面的命令清除了所有问题。重置用户数据可能不需要重新安装，但我现在不知道。

我仍然不能说是什么导致了这种情况，但它似乎是一个相当长的尾巴问题，偶尔发生并且看起来在旧版本中有前兆。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T20:21:34.967

检查以下内容：

1.  `Tools`->`Options`
2.  展开`Text Editor`-> `XAML`->`Miscellaneous`
3.  确保未选中“始终以完整 XAML 视图打开文档”

或者可能打开文件的默认程序`.xaml`已更改：

1.  在解决方案资源管理器中右键单击您的`.xaml`文件
2.  点击`Open With...`
3.  选择`XAML UI Designer`
4.  点击`Set as Default`按钮
5.  点击`OK`

**编辑**

这似乎是VS11 早期版本的一个[已知错误。](http://social.msdn.microsoft.com/Forums/sv/vseditor/thread/102a6219-4608-4754-91f9-1f5684551123)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T15:58:44.083

如果有人有兴趣。我遇到了失败：无法在 Visual Studio 2012 中打开 XAML 和配置文件。现在我检测到原因：解决方案 suo 文件在系统崩溃后损坏。所以我（不确定）在另一个文件夹中重建了 sln 文件，并将 sln 和 suo 文件（它们是隐藏的！）复制到旧文件夹中。这绝对让我找回了丢失的功能。也许只需要删除旧的 suo 文件。于尔根

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-20T01:38:04.017

在 Visual Studio 2013 中，我遇到了类似的问题 - 我将构建操作从`BundleResource`to更改为，`AndroidResource`并且我能够让它工作。

![在此处输入图像描述](../Images/63133f3d933f709d9ddba187eab34fc0.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-14T08:40:23.937

我在 Vs 2012 速成版中遇到了同样的问题。通过运行vs2012命令提示符并执行代码解决

WDExpress/重置设置

# php - 为什么我的 htaccess 规则不能完美运行？

> ID：11595436
> 
> 赞同：0
> 
> 时间：2012-07-21T19:56:13.243
> 
> 标签：php, apache, .htaccess, mod-rewrite, clean-urls

我想使用 htaccess 和 mod_rewrite 使用这些样式制作两种类型的 URL。

```
http://www.site.com/product
http://www.site.com/product/1/something 
```

为此，我将这些行添加到 htaccess 文件中：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([^/]*)/([^/]*)/([^/]*)$ /index.php?p=$1&id=$2&des=$3 [N]
RewriteRule ^([^/]*)$ /index.php?p=$1 [F] 
```

但是每当我运行我的应用程序并提示**http://localhost/project/**时，Web 服务器会将我重定向到**http://localhost/**。

现在我有两个问题：

1.  为什么我重定向到 localhost 以及为什么上面的代码不起作用？
2.  如何在干净 URL 的末尾添加斜杠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:02:40.630

1.  添加 RewriteBase / 应该会有所帮助

2.  将规则更改为

    ```
    RewriteRule ^([^/]*)/([^/]*)/([^/]*)/?$ /index.php?p=$1&id=$2&des=$3 [N]
    RewriteRule ^([^/]*)/?$ /index.php?p=$1 [F] 
    ```

最终的 .htaccess 应该如下所示：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/([^/]*)/([^/]*)/?$ /index.php?p=$1&id=$2&des=$3 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/?$ /index.php?p=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:56:04.947

您可能想摆脱`N`and`F`标志。不确定您为什么会被重定向，看起来您拥有的规则对此不负责任。您还想重复两个规则的 2 个条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/([^/]*)/([^/]*)$ /index.php?p=$1&id=$2&des=$3 [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)$ /index.php?p=$1 [L,QSA] 
```

# jquery - 两个独立的下拉框。一个onclick另一个悬停

> ID：11595442
> 
> 赞同：0
> 
> 时间：2012-07-21T19:57:49.863
> 
> 标签：jquery

这似乎是一个简单而直接的问题，它可能有一个简单的答案。我的工具栏中有两个下拉框，一个在悬停时下降，另一个在单击时下降，另一个在悬停时下降。

我一辈子都想不出如何让它们独立运行。我对 jquery 很陌生，在来这里之前已经搜索了互联网。

没有 css 的小提琴，但仍然做同样的事情。

[http://jsfiddle.net/GQtuH/](http://jsfiddle.net/GQtuH/)

这是jquery

```
$(document).ready(function () { 

$('#discoverDrop').hover(
    function () {
        //show its submenu
        $('ul, this').slideDown(500);

    }, 
    function () {
        //hide its submenu
        $('ul, thid').slideUp(500);         

});

$('#profile').toggle(function(){
        $('ul, this').slideDown(500);
    }, function(){
        $('ul, this').slideUp(500);
    });

}); 
```

和必要的标记

```
<span id="discoverDrop">
       <span id="drop"><m2>Discover</m2>
        <ul>
         <li><m2><a href="../artists"><m2>Artists</m2></a></li></m2>
         <li><m2><a href="../tracks"><m2>Tracks</m2></a></li></m2>
         <li><m2><a href="../sessions"><m2>Sessions</m2></a></li></m2>
         <li><m2><a href="../gigs"><m2>Gigs</m2></a></li></m2>
        </ul>         
       </span>
      </span>

      <span id="profile">
        <span id="profileDrop">
          <ul>
           <li><m2><a href="../phpscripts/logout.php"><m2>Logout</m2></a></li></m2>
           <li><m2><a href="../tracks"><m2>Tracks</m2></a></li></m2>
           <li><m2><a href="../sessions"><m2>Sessions</m2></a></li></m2>
           <li><m2><a href="../gigs"><m2>Gigs</m2></a></li></m2>
        </ul>         
        </span>
      </span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:36:11.850

`$(arg1, arg2)` `arg1`通常是一个包含我们需要被选中的选择器的字符串。`arg2`是`jQuery Object`我们应该检查的内部。

Doing`$('ul, this')`将传递一个参数，jQuery 将在整个文档中搜索`'ul, this'`带有标记名的元素。`'ul'``'this'`

做 $`('ul', this)`看起来像你想要的。

```
$(document).ready(function () {
    $('#discoverDrop').hover(
        function () {
            //show its submenu
            $('ul', this).slideDown(500);

        },
        function () {
            //hide its submenu
            $('ul', this).slideUp(500);         

    });
    $('#profile').toggle(function(){
            $('ul', this).slideDown(500);
        }, function(){
            $('ul', this).slideUp(500);
        });

}); 
```

* * *

```
<span id="discoverDrop">
   <span id="drop"><m2>Discover</m2>
        <ul>
         <li><m2><a href="../artists"><m2>Artists</m2></a></li></m2>
         <li><m2><a href="../tracks"><m2>Tracks</m2></a></li></m2>
         <li><m2><a href="../sessions"><m2>Sessions</m2></a></li></m2>
         <li><m2><a href="../gigs"><m2>Gigs</m2></a></li></m2>
        </ul>         
   </span>
</span>

<span id="profile">
    Click Me to Toggle
    <span id="profileDrop">
        <ul>
           <li><m2><a href="../phpscripts/logout.php"><m2>Logout</m2></a></li></m2>
           <li><m2><a href="../tracks"><m2>Tracks</m2></a></li></m2>
           <li><m2><a href="../sessions"><m2>Sessions</m2></a></li></m2>
           <li><m2><a href="../gigs"><m2>Gigs</m2></a></li></m2>
        </ul>         
    </span>
</span> 
```

小提琴：http: [//jsfiddle.net/GQtuH/3/](http://jsfiddle.net/GQtuH/3/)

**更新**

如果您`float right`在布局中使用 for profile，则始终建议将正确的浮动元素放在 HTML 中。像 ：

```
<span id="profile">
...
</span>
<span id="discoverDrop">
...
</span> 
```

# android - 安排多个警报

> ID：11595444
> 
> 赞同：0
> 
> 时间：2012-07-21T19:57:59.323
> 
> 标签：android, android-intent, android-alarms

我正在尝试使用警报管理器在不同时间触发 3 个警报。这是我的代码（请注意，alarm1、alarm2、alarm3 是我代码中前面设置的三个日历对象）：

```
AlarmNum=1;
new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub

            // TODO Auto-generated method stub
            Intent myIntent = new Intent(MainActivity.this,
                    MyAlarmService.class);
            pendingIntent = PendingIntent.getService(MainActivity.this, 0,
                    myIntent, 0);

            if (AlarmNum == 1)
                alarmManager.set(AlarmManager.RTC_WAKEUP,
                        alarm1.getTimeInMillis(), pendingIntent);
            else if (AlarmNum == 2)
                alarmManager.set(AlarmManager.RTC_WAKEUP,
                        alarm2.getTimeInMillis(), pendingIntent);
            else
                alarmManager.set(AlarmManager.RTC_WAKEUP,
                        alarm3.getTimeInMillis(), pendingIntent);

            Toast.makeText(MainActivity.this, "Start Alarm",
                    Toast.LENGTH_LONG).show();
        }
    }; 
```

在上面的代码中，我启动了一个意图，它引发了下面给出的 MyAlarmService 类：

```
public class MyAlarmService extends Service {
MainActivity instance;
MediaPlayer mp;

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    Toast.makeText(this, "MyAlarmService.onCreate()", Toast.LENGTH_LONG)
            .show();
    mp = MediaPlayer.create(this, R.raw.alarmtone);
    instance = new MainActivity();
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    Toast.makeText(this, "MyAlarmService.onBind()", Toast.LENGTH_LONG)
            .show();
    return null;
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_LONG)
            .show();
}

@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    super.onStart(intent, startId);
    Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG)
            .show();
    mp.start();
    instance.setAlarmNum(instance.getAlarmNum() + 1);
}

@Override
public boolean onUnbind(Intent intent) {
    // TODO Auto-generated method stub
    mp.release();
    mp.reset();
    Toast.makeText(this, "MyAlarmService.onUnbind()", Toast.LENGTH_LONG)
            .show();
    return super.onUnbind(intent);
} 
```

我认为这里有问题，因为祝酒词永远不会出现，警报也不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:21:40.167

我从您的代码和注释中了解到，您希望第一个警报触发第二个警报，第二个警报触发第三个警报，等等。

我注意到您的代码存在几个问题。

1）这是开始活动的错误方式，它不起作用：

```
instance = new MainActivity(); 
```

相反，您应该这样做：

```
Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.parse(url));
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intent); 
```

无论上述问题如何，您不必在每次触发警报时都启动 MainActivity。您可以在服务中触发新警报。**在这里，我假设第二次警报触发时间晚于第一次，第三次晚于第二次，依此**类推。否则，您的算法将不起作用。

第一个警报将在您的活动中设置：

```
Intent myIntent = new Intent(MainActivity.this, MyAlarmService.class);
myIntent.addExtra("AlarmNum",1);
PendingIntent pendingIntent = PendingIntent.getService(MainActivity.this, 0,
                    myIntent, 0);

alarmManager.set(AlarmManager.RTC_WAKEUP,alarm1.getTimeInMillis(), pendingIntent); 
```

请注意，我在您的意图中添加了一个额外的整数，以便您的服务能够了解之前设置的警报。

回到你的服务 onBind 函数，你应该从你的 Intent 中额外阅读这个。

```
@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
...
int AlarmNum = intent.getIntExtra("AlarmNum",0);
...
    return null;
} 
```

然后，检查 AlarmNum 的值，并以与我们相同的方式设置下一个警报，具体取决于该值（如果 AlarmNum == 1，则设置第二个警报，将您的意图的额外值增加 1，等等）。由于您要设置 3 个警报，如果它显示为 3，那么您将只完成您的服务。

作为附带说明，使用 Handler 在您的服务中显示 toast 消息是一种更好的做法。

# c# - 如何在 c# 正则表达式中捕获匹配和不匹配？

> ID：11595445
> 
> 赞同：1
> 
> 时间：2012-07-21T19:58:03.833
> 
> 标签：c#, regex

我有一些格式的消息，例如：

```
"?I?Message message message\r\n" 
```

现在我想使用命名组通过正则表达式捕获此消息：

```
(?<Message>\?(?<Type>\S)\?(?<Text>[\S\s]+(\r\n)+)) 
```

但我也想拥有与此消息格式不匹配的所有字符串。例如：

```
"Some data?I?Message message\r\nAnother part of data\n" 
```

会给我3场比赛：

*   “一些数据”
*   ?I?消息消息\r\n
*   "另一部分数据\n"

我可以检查消息组是否将成功字段设置为 true，以检查是否出现任何上述格式的消息。否则我会得到一些“原始数据”。是否可以使用 regex 和 Matches 做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T17:51:46.937

`To match mismatches`

```
string toSearchString = "your string here";

Match match = new Regex("*some pattern here*").Match(toSearchString );

string unmatchedString = toSearchString.Replace(match.Value,""); 
```

所以现在你有了 Unmatched String。你可以喝咖啡！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:19:44.907

这是一种方法：

```
var str = "Some data?I?Message message\r\nAnother part of data\n";
var unmatchedCharIndices = Enumerable.Range(0, str.Length);
foreach (Match match in Regex.Matches(str, @"(?<Message>\?(?<Type>\S)\?(?<Text>[\S\s]+(\r\n)+))"))
{
    unmatchedCharIndices = unmatchedCharIndices.Except(Enumerable.Range(match.Index, match.Length));
    //do other stuff with match
}
var unmatchedStrings = unmatchedCharIndices
            .Select((n, i) => new { n, i })
            .GroupBy(x => x.n - x.i) //this line will group consecutive nums in the seq
            .Select(x => str.Substring(x.First().n, x.Count()));
foreach (var unmatchedString in unmatchedStrings)
{
    //do something with non-match text
} 
```

（`unmatchedStrings`代码感谢[使用 LINQ 获取最后 x 个连续项目](https://stackoverflow.com/questions/10359069/getting-last-x-consecutive-items-with-linq)作为开始）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T20:27:26.277

结果对象`Regex.Match`的类型为[`Match`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)。它的`Success`属性显示*整个*正则表达式是否匹配。

但还有一个`Groups`属性可用于查看个人（无论是否命名）捕获组。如果命名捕获失败，则该组的`Success`属性将为 false。

所以随着

```
var m = Regex.Match("Fubar", "(?<x>Z)?.*"); 
```

然后

```
m.Success 
```

是真的，但是

```
m.Groups['Z'].Success 
```

是假的。

使用`Regex.Matches`正则表达式可以匹配多次，每次匹配将是`Match`返回的单个对象`MatchCollection`。*但是*正则表达式默认会跳过不匹配的输入部分，因此：

```
Regex.Matches("ZaZ", "Z") 
```

将返回两个匹配项的集合，但“ `a`”没有任何内容。`\G`您可以使用锚点强制下一场比赛在前一场比赛之后立即开始。

# macos - 如何在没有驱动器的情况下从 DVD 安装 Adob es Suite？

> ID：11595446
> 
> 赞同：1
> 
> 时间：2012-07-21T19:58:06.180
> 
> 标签：macos, adobe, installation

所以我得到了适用于 MAC 的 Adob​​e Creative Suite 6（Design & Web Premium），但在 MacBook 上没有光驱。

我拥有的是一台带有 DVD 的 Windows PC 和一台带有 DVD 的旧 Macbook，它们通过 LAN 连接

我尝试简单地复制并粘贴目录来安装软件，并且还尝试使用图像但没有成功。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T04:16:21.187

你可以为你的 Mac 购买一个 SuperDrive 并这样做。或者，您可以下载 CS CD 的 ISO（合法，因为您已经拥有一个副本）并从 OS X 安装它并以这种方式安装。我喜欢后一种选择，因为它更具技术性和成本效益，但是，无论您的船如何漂浮都可以。

# java - 使用 resourcecount 获取属性中的行数

> ID：11595453
> 
> 赞同：5
> 
> 时间：2012-07-21T19:58:29.493
> 
> 标签：java, ant

我正在尝试获取一个 ANT-Buildscript 来计算存储在 ANT 属性中的行。从示例中，我得到了计算文件中行数的方法，如下所示：

```
<resourcecount count="0" when="eq">
    <tokens>
        <concat>
            <filterchain>
                <tokenfilter>
                    <linetokenizer/>
                </tokenfilter>
            </filterchain>
            <fileset file="${file}" />
        </concat>
    </tokens>
</resourcecount> 
```

现在我想引用一个 ANT 属性而不是文件。有没有办法做到这一点？`<echo file="${temp.file}">${the.property.with.many.lines}</echo>`我知道使用和使用上面的代码将属性的内容写入文件的解决方案。但我想知道是否有没有临时文件的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T20:37:50.943

一个[`propertyresource`](http://ant.apache.org/manual/Types/resources.html#propertyresource)元素可以用来代替`fileset`如下：

```
<property name="lines"
    value="line01${line.separator}line02${line.separator}line03"/>

<target name="count-lines">
  <resourcecount property="line.count" count="0" when="eq">
    <tokens>
      <concat>
        <filterchain>
          <tokenfilter>
            <stringtokenizer delims="${line.separator}" />
          </tokenfilter>
        </filterchain>
        <propertyresource name="lines" />
      </concat>
    </tokens>
  </resourcecount>
  <echo message="${line.count}" />
</target> 
```

### 输出

> 计数线：[回声] 3
> 
> 构建成功总时间：0 秒

# wpf - 基于 DataGrid + 自定义事件的 WPF 自定义控件

> ID：11595454
> 
> 赞同：0
> 
> 时间：2012-07-21T19:58:35.067
> 
> 标签：wpf, events, datagrid, custom-controls

我目前正在编写基于标准 WPF Datagrid 的自定义控件。我已经实现了一个带有排序、分组和过滤等功能的工具栏。使用 ICollectionView 作为 ItemsSource 这些功能相当容易实现。

我的问题在于工具栏按钮应该触发的事件：我已经设法通过命令（SortClick、GroupClick、FilterClick）将 buttonclick 事件引发到我的视图代码隐藏（MyDataGrid.cs）。

```
 <ToolBarTray Orientation="Vertical" Grid.Row="1" Grid.Column="2" IsLocked="True">
                                        <ToolBar Band="1" BandIndex="1" >
                                            <Button Width="24" Height="24" ToolTip="Sort" Command="{x:Static local:PDataGrid.SortClick}">
                                                <Image Source="pack://application:,,,/PControls;component/Resources/sort.png" />
                                            </Button>
                                            <Button Width="24" Height="24" ToolTip="Filter" Command="{x:Static local:PDataGrid.GroupClick}">
                                                <Image Source="pack://application:,,,/PControls;component/Resources/filter.png" />
                                            </Button>
                                            <Button Width="24" Height="24" ToolTip="Group" Command="{x:Static local:PDataGrid.FilterClick}">
                                                <Image Source="pack://application:,,,/PControls;component/Resources/group.png" />
                                            </Button>
                                        </ToolBar>
                                    </ToolBarTray> 
```

但是我如何从我的视图中引发这些事件，以便任何使用我的控件的类（在我的情况下为 MyDataGridView.cs）都可以处理它们？

我的 ICommands 被定义为静态的（正如我在一些示例中看到的那样）。我将使用 RaiseEvent 来引发我的视图模型可以捕获的 RoutedEvent 是非静态的。

```
 public static readonly RoutedEvent SortClickEvent = EventManager.RegisterRoutedEvent("SClick", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(PDataGrid));

    public event RoutedEventHandler SClick
    {
        add { AddHandler(SortClickEvent, value); }
        remove { RemoveHandler(SortClickEvent, value); }
    }

    private void raiseSortClickEvent()
    {
        RoutedEventArgs e = new RoutedEventArgs(PDataGrid.SortClickEvent);
        RaiseEvent(e);
    }

    private static ICommand sortClick;
    public static ICommand SortClick
    {
        get
        {
            if (sortClick == null)
            {
                sortClick = new BaseCommand(sort);
            }

            return sortClick;
        }
        set { sortClick = value; }
    }

    private static void sort()
    {
        // sort() = static, therefore not working...
        //raiseSortClickEvent();
    } 
```

请帮忙 - 也许有一个更简单的解决方案，我目前看不到......

* * *

哦，我忘了提到我正在 MVVM 模式下开发我的控件，并希望坚持下去。整个逻辑（过滤器、组、排序）应该在我的视图模型中。

编辑：哦，我忘了提到我正在 MVVM 模式下开发我的控件，并希望坚持下去。整个逻辑（过滤器、组、排序）应该在我的视图模型中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:36:57.310

我没有完全明白。是什么阻止您将按钮命令绑定到 viewmodel 并在 viewmodel 中发挥作用？（如 CollectionView 排序等）。通常你直接绑定 DataContext&viewmodel。不涉及背后的代码。

# android - 我应该什么时候将数据保存到 SQLite 中，并在我的 Android 应用程序的片段中输入？

> ID：11595464
> 
> 赞同：4
> 
> 时间：2012-07-21T19:59:46.407
> 
> 标签：android, sqlite, events

我正在观看谷歌的一个应用评论，他们正在翻阅这个有保存按钮的应用，如果你在离开之前没有保存，它会弹出一个对话框。他们说安卓应用程序应该只是保存而不打扰用户。

我有一个片段，有几个字段，需要确定何时将数据保存到 SQLite 数据库中。我正在考虑通过`onFocusChange`事件节省每个字段的退出？或者这可能太频繁了？也许片段的`onPause`事件？我应该什么时候保存（请具体事件）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T20:55:57.273

`Fragments`与生命周期非常相似`activities`。保存持久状态的正确位置也是如此`onPause()`，以后`onPause()`可能为时已晚并且可能导致数据丢失。Google 建议使用“就地编辑”用户模型。也就是说，立即保存编辑，在您的情况下，当用户在输入字段之间切换时保存数据是一种好方法。如果您的`Fragment`/`Activity`被系统杀死，这可以防止数据丢失。如果您认为保存状态可能需要几秒钟，您也可以`IntentService`在`onPause()`. 在您的场景中，`AsyncTask`当用户在输入字段之间切换时，我将执行更新您的数据库，可能会检测是否确实发生了更改。

编辑：如果您使用的是`ContentProvider`比考虑使用[AsyncQueryHandler](http://developer.android.com/reference/android/content/AsyncQueryHandler.html)而不是`AsyncTask`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T20:05:25.077

```
public void onDestroy()

Called when the fragment is no longer in use. This is called after onStop() and before onDetach(). 
```

我可能会使用它；这意味着用户已完成使用该片段。我不知道以这种方式或您的方式这样做有什么缺点。

# excel - 为函数中的单元格赋值

> ID：11595465
> 
> 赞同：0
> 
> 时间：2012-07-21T20:00:18.120
> 
> 标签：excel, vba

我正在编写一个代码，其中一行（ ***Range("H5").value = 10***）应将特定值分配给特定单元格。但是它给了我一个#VALUE！我的手机上的错误。这是我的代码，请帮忙！！：

```
Function TotalAdUnits(Money As Currency, CycleEarning As Integer) As Integer

 TapCost = 16
 TotalAdUnits = 0
 AdUnit = 0
 i = 1

 Money = Money + CycleEarning

 Do While (Money >= TapCost)

  Money = Money - TapCost
  TotalAdUnits = TotalAdUnits + Range("L1").Offset(i, 0)
  TapCost = Range("J2").Offset(i, 0)

  Range("H5").value = 10

  i = i + 1

 Loop

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:06:49.383

您不能从 UDF 设置单元格值 - 以这种方式使用的函数只能将值返回到调用单元格（或范围，如果它用作数组函数）。编辑您的函数以返回值，而不是尝试直接设置它。

话虽如此，我还不清楚你到底想用这个功能做什么。为什么在循环中设置相同的值？

此外，如果您直接从函数中引用范围，并且这些范围没有作为参数传递，则需要将其包含 `Application.Volatile` 在函数中，以便 Excel 知道在工作表更改时重新计算它。

```
Function TotalAdUnits(Money As Currency, CycleEarning As Integer) As Integer

 TapCost = 16
 TotalAdUnits = 0
 AdUnit = 0
 i = 1

 Money = Money + CycleEarning

 Do While (Money >= TapCost)

     Money = Money - TapCost
     TotalAdUnits = TotalAdUnits + Range("L1").Offset(i, 0)
     TapCost = Range("J2").Offset(i, 0)

     Range("H5").value = 10

     i = i + 1

 Loop

 'need to return a value...
 TotalAdUnits = 10 '?
End Function 
```

# android - 关闭时使用 AsyncTask 的 Activity 崩溃

> ID：11595467
> 
> 赞同：0
> 
> 时间：2012-07-21T20:01:33.083
> 
> 标签：android, android-asynctask

当活动被破坏时，我正在尝试遵循以下[模式](http://www.shanekirk.com/2012/04/asynctask-missteps/)来保护我的后台任务。由于我想在不同的活动中重用我的任务，我为每个任务实现了一个“TaskMethod”类。

```
public class TaskMethod
{
   private SomeActivity mAct_ = null;
   private MyTask mTask_ = null;

    public TaskMethod(SomeActivity act)
    {
        mAct_ = act;
    }

    public void execute()
    {
           mTask_ = (MyTask) mAct_.getLastNonConfigurationInstance();

           if (mTask_ != null)
           {
                mTask_.activity_ = mAct_;

                if (mTask_.isFinished_)
                   mTask_.updateUI();
           }
           else
           {
                mTask_ = new MyTask();
                mTask_.activity_ = mAct_;
                mTask_.execute();
           }
    }

    public void cleanUp()
    {
           myTask_.activity_ = null;

           if (mAct_.isFinishing())
            myTask_.cancel(false);
    }

    static class MyTask extends AsyncTask<Void, Void, String>
    {

       @Override
        protected String doInBackground(Void... params)
        {
            ...
        }

    @Override
    protected void onPostExecute(String result) 
        {
            ...
            isFinished_ = true;
            updateUI();
        }

        public void updateUI()
        {
            if (activity_ != null)
            {
                ...
            }            
        }

        SomeActivity activity_ = null;
        boolean isFinished_  = false;
} 
```

所以，每次我想在活动中使用任务时，我都会声明它

公共类 SomeActivity {

```
private TaskMethod task_;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
{
        super.onCreate(savedInstanceState);

        task_ = new TaskMethod(this);
        task_.execute();
    }

@Override
public void onDestroy()
{
    super.onDestroy();

    task_.cleanUp();
} 
```

}

但是，当我的活动关闭时，我收到以下异常：

```
07-21 19:37:15.195: E/AndroidRuntime(25724): FATAL EXCEPTION: main
07-21 19:37:15.195: E/AndroidRuntime(25724): java.lang.RuntimeException: Unable to destroy activity 
{com.signals.signals/com.signals.signals.activity.PreferencesActivity}: java.lang.NullPointerException
07-21 19:37:15.195: E/AndroidRuntime(25724):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3108)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3126)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at android.app.ActivityThread.access$1200(ActivityThread.java:122)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1179)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at android.os.Looper.loop(Looper.java:137)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at android.app.ActivityThread.main(ActivityThread.java:4340)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at java.lang.reflect.Method.invokeNative(Native Method)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at java.lang.reflect.Method.invoke(Method.java:511)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at dalvik.system.NativeStart.main(Native Method)
07-21 19:37:15.195: E/AndroidRuntime(25724): Caused by: java.lang.NullPointerException
07-21 19:37:15.195: E/AndroidRuntime(25724):    at com.signals.signals.activity.tasks.CitiesTaskMethod.cleanUp(CitiesTaskMethod.java:92)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at com.signals.signals.activity.PreferencesActivity.onDestroy(PreferencesActivity.java:117)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at android.app.Activity.performDestroy(Activity.java:4629)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1079)
07-21 19:37:15.195: E/AndroidRuntime(25724):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3095) 
```

我究竟做错了什么？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:13:58.460

似乎当您调用it is时，您只需要`cleanUp()`在调用之前对变量进行空值检查即可。希望这可以帮助。`task_``null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T20:20:28.347

当你完成你的活动时， onDestroy() 被调用，在其中，你正在调用你自己的清理函数。

此函数中的变量之一为 null，因此它返回 NullPointerException，因此无法销毁活动。

在您的清理函数中放置一个断点并检查那里使用的变量的值。其中之一（很可能是 mAct_）为空。

# android - 带有 Chronometer 的 AsyncTask 示例

> ID：11595470
> 
> 赞同：0
> 
> 时间：2012-07-21T20:02:18.103
> 
> 标签：android, chronometer

我有一个 Chronometer，但是当我改变我的视图（使用 ActionBar）时它会停止。

我不是很了解如何使用 AsyncTask，也没有找到教程。

有什么容易解决我的问题吗？我真的很想举一个Chronometer的例子......

非常感谢！

到目前为止的代码：

```
public class BFragment extends SherlockFragment {

private Button start;
private View v;
private Chronometer chrono;
private Button pause;
private Button reset;
private long lastPause;
private Button resume;
private Boolean richtig;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the layout for this fragment

    v = inflater.inflate(R.layout.activity_bfragment, container, false);
    start = (Button) v.findViewById(R.id.start); 
    chrono = (Chronometer) v.findViewById(R.id.chronometer1);
    pause = (Button) v.findViewById(R.id.pause);
    reset = (Button) v.findViewById(R.id.reset);
    resume = (Button) v.findViewById(R.id.resume);

    richtig = true;

    new chronom().execute();

    return v;

}
private class chronom extends AsyncTask<URL, Integer, Long> {
    protected Long doInBackground(URL... urls) {
        start.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                chrono.setBase(SystemClock.elapsedRealtime());
                chrono.start();

                System.out.println(SystemClock.elapsedRealtime());
                richtig = false;
            }
        });

        pause.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                lastPause = SystemClock.elapsedRealtime();
                chrono.stop();
                richtig = true;

            }
        });

        resume.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                if (richtig) {
                    chrono.setBase(chrono.getBase() + SystemClock.elapsedRealtime() - lastPause);
                    chrono.start();
                } else {

                }
            }
        });

        reset.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                chrono.setBase(SystemClock.elapsedRealtime());
                System.out.println(chrono.getBase());
                richtig = false;
            }
        });

        return null;
    }

    protected void onProgressUpdate(Integer... progress) {

    }

    protected void onPostExecute(Long result) {

    }
}
} 
```

我刚刚复制了代码......（Chrono 工作，但不在后台）

# c# - 在 C# 中根据 CSV 文件中的映射来搜索和替换文本文件的内容

> ID：11595472
> 
> 赞同：2
> 
> 时间：2012-07-21T20:02:27.857
> 
> 标签：c#, csv, replace

我是编程新手，正在开发一个 C# 项目，该项目将搜索文本文件中的某些单词并将其替换为新值。我有一些有效的代码，但 OLD 和 NEW 值现在是硬编码的。我想使用外部 CSV 文件作为配置文件，以便用户可以在以后添加或更新 OLD 到 NEW 映射。这是我当前的代码，其中包含硬编码的 OLD 和 NEW 值：

```
try
{
    StreamReader file = new StreamReader(inputfullfilepath);
    TextWriter writer = new StreamWriter(outputfile);

    while ((line = file.ReadLine()) != null)
    {
        line = line.Replace("OLD1", "NEW1");
        line = line.Replace("OLD2", "NEW2");
        // etc....

        writer.WriteLine(line);
    }
    file.Close();
    File.Move(inputfullfilepath, inputfullfilepath + ".old");
    writer.Close();
    File.Move(outputfile, outputfilepath + @"\" + inputfilename);
    MessageBox.Show("File Scrub Complete", "Success");
}
catch
{
    MessageBox.Show("Error:  Be sure data paths are valid.", "Error", 
                    MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
} 
```

该代码获取文本文件的每一行，尝试对所有 OLD 到 NEW 映射进行搜索/替换，然后转到文本文件中的下一行。我试图解决的问题是能够根据 CSV（或 XML，如果这样更容易？）配置文件使这个 OLD 到 NEW 映射列表动态化，以便用户可以添加新的搜索/替换关键字。

我尝试在 Visual Studio 中使用 C# 应用程序设置（它创建了一个 XML 配置文件），但我很难理解如何使其工作。这样做的最佳方法是什么，以便不必对值进行硬编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:07:53.380

一个 csv 文件可以正常工作。

我将创建一个名为 ReplaceObject 的新对象

```
public ReplaceObject()
{
public string original;
public string updated;

//ideally you'd use getters and setters, but I'll keep it simple
} 
```

现在我们从 csv 中读取

```
List<ReplaceObject> replaceList = new List<ReplaceObject>

while (reader.peek != -1)
{
string line = reader.readln();

var splitLine = line.split(',');

ReplaceObject rObject = new ReplaceObject();

rObject.original = splitLine[0];
rObject.updated = splitLine[1];

replaceList.add(rObject);

} 
```

现在我们浏览列表..并替换

```
string entireFile = //read all of it

foreach (ReplaceObject o in replaceList)
{
entireFile.Replace(o.original,o.updated);
}

//write it at the end 
```

（请注意，我的代码缺少一些检查，但您应该明白这一点。您可能还想使用 StringBuilder）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:16:22.750

我的建议是您使用`Settings.cs`CSV 而不是

使用它们非常容易，并且涉及的代码非常少

```
e.g. Properties.Settings.Default.Old1; 
```

这是一个演练[http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx)

请参阅此示例，展示如何使用它[http://www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C](http://www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C)

# php - 无需重新加载页面即可更改 $_SESSION

> ID：11595480
> 
> 赞同：0
> 
> 时间：2012-07-21T20:03:00.367
> 
> 标签：php, ajax, session, session-variables

我有两个`$_SESSION`变量声明为数组`index.php`，比如：

```
$_SESSION['a'] = array(1,2,3);
$_SESSION['b'] = array(4,5,6); 
```

`index.php`我从to进行 AJAX 调用`result.php`，其中会话变量的值更改为，例如：

```
$_SESSION['a'] = array(2,3,1,4);
$_SESSION['b'] = array(5,6); 
```

我所做的是，我从两个数组中删除第一个元素并将其附加回第一个数组，`$_SESSION['a']`.

在成功的 AJAX 调用中，我想在`index.php`. 可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:04:12.423

是的，在成功的 ajax 调用中，您可以这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:11:32.000

这很简单。

在您`results.php`中，您只需返回带有一些 JSON 的新数据。

结果.php：

```
//set the session vars to whatever here....

//now, return them. In the example, I shall assign your session vars to temp vars.

$sessA=$_SESSION['a'];
$sessb=$_SESSION['b'];

echo json_encode(array('a'=>$sessA,'b'=>$sessb)); 
```

现在在您的 AJAX 中（假设您使用的是 jQuery）：

```
$.getJSON('results.php', function(data){

alert(data.a);
alert(data.b);

}); 
```

你有它。

编辑：

在您的 index.php 中，您说您将会话变量设置为原始值。但是在您的评论中，您说您想使用 index.php 中的新变量。如果您在每个请求上将它们设置为 index.php 中的原始值，这将是不可能的。你应该做的是首先检查它们是否已经设置，然后做需要做的事情。像这样：

代替：

```
$_SESSION['a'] = array(1,2,3);
$_SESSION['b'] = array(4,5,6); 
```

做这个：

```
if ( isset($_SESSION['a']) === false && isset($_SESSION['b']) === false )
{

# - The vars are not already set...so it's okay to set them to its original value.

$_SESSION['a'] = array(1,2,3);
$_SESSION['b'] = array(4,5,6);

} 
```

# ruby-on-rails - Rails - 通过关联使用 has_many 播种数据？

> ID：11595489
> 
> 赞同：0
> 
> 时间：2012-07-21T20:05:21.057
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有一个种子文件，其中包含以下代码：

```
300.times do
  # create the customer
  customer = Customer.create([
    {customer_type_id: '1'}
  ])

  # create an address for the customer
  address = Address.create([
    {city: Faker::Address.city, country: 'UK'}
  ])
  postcode = Postcode.create([
    {value: Faker::Address.uk_postcode}
  ])
  name_number = NameNumber.create([
    {value: Random.rand(495)}
  ])
  street = Street.create([
    {value: Faker::Address.street_name + " " + Faker::Address.street_suffix}
  ])
  state = State.create([
    {value: Faker::Address.uk_county}
  ]) 
```

这工作正常。然而，我曾希望能够做到以下几点：

```
address = Address.create([
  {city: Faker::Address.city, country: 'UK'}
])
address.postcode = Postcode.create([
  {value: Faker::Address.uk_postcode}
]) 
```

我在第一行中创建了地址，我正在为第二行中的地址创建邮政编码。但是，这会产生错误。

谁能建议我怎么做？

谢谢！

编辑：根据要求，生成的错误是：

```
rake db:seed
rake aborted!
undefined method `postcode=' for #<Array:0x007f9df1f26818>

Tasks: TOP => db:seed
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:26:05.613

您将一个数组传递给`create`，它为数组中的每个属性散列创建一个对象，并返回生成的对象数组。由于您一次只创建一个对象，只需删除属性散列周围的方括号（如果需要，甚至可以删除花括号），它应该可以正常工作：

```
address = Address.create(city: Faker::Address.city, country: 'UK') 
```

# javascript - 如何跳过论坛的确认页面？

> ID：11595493
> 
> 赞同：0
> 
> 时间：2012-07-21T20:06:08.373
> 
> 标签：javascript, redirect, greasemonkey

我正在为一个论坛编写一个 Greasemonkey 脚本，如果你在你写的帖子上点击“提交”，你将被带到一个通知页面，上面写着“你的帖子已发布”。

我试图通过完全跳过这个页面来解决这个问题。

到目前为止，我想出的唯一解决方案是：

```
// @include        *posting.php?mode=reply*
// ==/UserScript==
// @run-at document-start

{
location.href = document.referrer
} 
```

这可能是一个完整的迂回方式，但这并不是我想要的。我希望完全跳过确认页面，然后立即重新加载回您刚才所在的页面。我也试过`history.go(-1)`，但没有骰子。

任何想法如何实现这些目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:38:22.297

您的脚本无法正常运行的原因是您发布的代码中存在错误。元[数据块](http://wiki.greasespot.net/Metadata_Block)已损坏并且`@run-at`指令在块之外。

附加问题：

1.  您可能应该使用`location.replace()`以防止确认页面弄乱历史记录和后退按钮。
2.  `@include *posting.php?mode=reply*`将不必要地减慢所有 Firefox 的速度。这是因为 Greasemonkey 必须对每个 URL 进行*深入*的逐字符比较。

    如果可以的话，不要从`@includes`多字符通配符开始（或任何编程语言的任何比较）。最好有多个包含，如下所示：

    ```
    // @include     http://SITE_1/posting.php?mode=reply*
    // @include     http://SITE_2/posting.php?mode=reply*
    //etc. 
    ```

所以，这个脚本对你来说应该足够好：在实践中，你永远不会看到确认页面（我自己使用这种技术）：

```
// ==UserScript==
// @name        Whatever
// @include     http://SITE_1/posting.php?mode=reply*
// @include     http://SITE_2/posting.php?mode=reply*
// @include     http://SITE_3/posting.php?mode=reply*
// @run-at      document-start
// ==/UserScript==

location.replace (document.referrer); 
```

请注意，像[Rab Nawaz 的回答](https://stackoverflow.com/a/11595513/331508)这样的方法可以提供更好的 UI 体验，但并不像他的回答显示的那么简单。您需要在典型的论坛页面上捕获许多表单、按钮和链接。并非所有内容都发布到相同的目的地，并且您如何处理结果因操作而异。

这`location.replace()`是 UI 平滑度与潜在的大型代码复杂性之间的良好折衷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:09:50.040

使用 AJAX 进行发布。那么您可以避免进入消息页面。只要得到回应，然后做任何你想做的事。

基于jquery的ajax

```
 $("#submitButtonId").click(function() {

    var url = "path/to/your/script.php"; // the script where you handle the form input.

    $.ajax({
           type: "POST",
           url: url,
           data: $("#idForm").serialize(), // serializes the form's elements.
           success: function(data)
           {
               alert(data); // show response from the php script.
           }
         });

    return false; // avoid to execute the actual submit of the form.
}); 
```

# php - PHP：直接利用 Unicode 字形和 Open Type 字体 (otf) 的字距调整表的优势来创建 PDF 作为服务器响应

> ID：11595496
> 
> 赞同：0
> 
> 时间：2012-07-21T20:07:12.737
> 
> 标签：php, pdf, typography, opentype, font-embedding

我使用文档数据库，每个内容包含 5 到 20 页的文本数据。
我有三个任务：

1.  将多语言输出为 PDF 文档。UTF8 格式的文本，可能包含英语、法语、德语、俄语等内容以及翻译等组合。
2.  在 PDF 中添加自动排版，这意味着 Unicode 字符的字距调整和替换组合。
3.  我的工作有 MinionPro-xxx.otf（10 ligatures）字体。

我尝试使用 Wayne Munro (pdf@ros.co.nz) 的 PHP Cphf 库，并在其中添加了很多正则表达式。我已经添加了很多 PDF 文本格式操作符，就像`Ts, TL, T*, Tc, Tw, Tz`我几乎完成了，但是我无法访问 Type 1 字符表之外的字符的字形，我不知道**如何从中获取“kern”和“hmtx”表字体文件？如何嵌入字形？**

我相信，我可以通过矩阵变换 PDF 文本指令进行字距调整：

```
[ (A) 120 (W) 120 (A) 95 (Y again) ] TJ 
```

* * *

**UPD#1：** MinionPro 字体没有“kern”表。它有“GPOS”（字形定位表），我非常接近解决这个问题。顺便说一句，通过 PHP 走进二进制文件是一场噩梦（（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:56:11.683

在小字体文本字符串中使用手动字距调整是完全错误的策略。Microsoft Excel PDF 文本导出器执行相同的操作，结果不可接受。

# javascript - 在实体系统中存储组件

> ID：11595500
> 
> 赞同：1
> 
> 时间：2012-07-21T20:08:13.270
> 
> 标签：javascript, arrays, object, dictionary, entity

*注意：这个介绍是关于实体系统的。但是，即使您不知道这些是什么，或者自己没有实现它们，它也是非常基础的，如果您有一般的 Javascript 经验，您可能有足够的资格来回答。*

我正在T=machine 博客上阅读有关实体系统的文章[。](http://t-machine.org/index.php/2007/09/03/entity-systems-are-the-future-of-mmog-development-part-1/)

作者 Adam 建议实体应该只是一个 id，可用于获取它的组件（即实体应该表示的实际数据）。

我选择了所有实体都应该存储在“一个地方”的模型，我实现这种存储的主要嫌疑人是许多人使用的数组数组方法，这意味着**动态**实体 id 表示组件所属的*索引*到一个实体，而组件在那个“一个地方”中按类型分组（从现在起我将称之为“存储”），我计划将其实现为`Scene`. 这`Scene`将是一个处理实体组合、存储并可以对实体（`.addComponent(entityID, component)`等）进行一些基本操作的对象。

我不关心`Scene`对象，我很确定这是一个很好的设计，但我不确定存储的实现。

我有两个选择：

**A)**使用 array-of-array 方法，其中存储如下所示：

```
//storage[i][j] - i denotes component type, while j denotes the entity, this returns a component instance
//j this is the entity id

[
    [ComponentPosition, ComponentPosition, ComponentPosition],
    [ComponentVelocity, undefined, ComponentVelocity],
    [ComponentCamera, undefined, undefined]
]

//It's obvious that the entity `1` doesn't have the velocity and camera components, for example. 
```

**B)**将存储对象实现为字典（技术上是 Javascript 中的对象）

```
{
    "componentType": 
    {
        "entityId": ComponentInstance
    }
} 
```

字典方法意味着实体 id 是**static**，这对于在实体系统本身之外实现游戏循环和其他功能似乎是一件非常好的事情。此外，这意味着系统可以轻松地存储他们感兴趣的实体 id 数组。entityId 变量显然也可以是字符串，而不是整数索引。

我反对array-of-arrays方法的原因是删除实体会在删除单个实体时使其他实体ID发生变化。

实际的实现细节可能很谨慎，但我想知道哪种方法在性能方面会更好？

我也感兴趣的事情（请尽可能跨平台，但如果需要，请以 V8 为例）：

*   访问属性时的开销有多大，这是如何实现的？可以说他们正在从本地范围内访问。
*   内存中有什么`undefined`，需要多少？我问这个，因为在数组数组方法中，所有内部数组必须具有相同的长度，并且如果实体没有特定组件，则该字段设置为`undefined`.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-21T20:39:42.970

不用担心数组。它是 JavaScript 中的对象，即没有“真正的”数组，只是索引是对象属性（字典、哈希、映射）的数字“名称”。

这个想法很简单，一个数组有一个长度属性，允许循环知道在哪里停止迭代。通过简单地从数组中删除一个元素（记住，它是一个对象），长度属性实际上并没有改变。所以...

```
// create an array object
var array = ['one','two', 'three'];
console.log(array.length); // 3
// these don't actually change the length
delete array['two']; // 'remove' the property with key 'two'
console.log(array.length); // 3
array['two'] = undefined; // put undefined as the value to the property with key 'two'
console.log(array.length); // 3
array.splice(1,1); // remove the second element, and reorder
console.log(array.length); // 2
console.log(array); // ['one','three'] 
```

1.  您必须意识到 JavaScript 并不像您期望的那样“工作”。性能方面的对象和数组是相同的，即像字典一样访问数组；
2.  Scope 与其他“c 风格”语言不同。只有**全局和函数作用域，**即没有块作用域（永远不要在另一个 for(var i) 中写 for(var i)）；
3.  undefined in memory 与 null 的数量完全相同。不同之处在于 null 是故意缺失值，而 undefined 只是意外（非故意）缺失；
4.  不要通过做来检查一个字段是否存在，`if(array['two'])`因为一个字段实际上可以保存**undefined、null、0、""、false**和评估为 false 的假值。始终检查`if('two' in array)`；
5.  当使用`for(key in array)`always use循环时，`if(array.hasOwnProperty(key))`您不会迭代原型的属性（从某种意义上说是父级）。此外，由构造函数创建的对象也可能使用“构造函数”键循环。

# sql - 如何使用相同的查询选择具有所有可能 id-s 的项目或仅选择一个特定的项目？

> ID：11595503
> 
> 赞同：1
> 
> 时间：2012-07-21T20:08:19.307
> 
> 标签：sql

SQL 中是否有一个变量可以用来表示一个字段的**所有**可能值？像这样的伪代码

```
SELECT name FROM table WHERE id = *ALL_EXISTING_ID-s* 
```

在这种情况下，我想返回所有行，但是稍后当我进行搜索并且只需要一个项目时，我可以简单地将那个变量替换为`id`我正在寻找的变量，即

```
SELECT name FROM table WHERE id = 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T20:09:57.223

最简单的方法是删除 WHERE 子句。这将返回所有行。

```
SELECT name FROM table 
```

如果您想要一些“神奇”值，您可以将其用于您可以在现有查询中使用的 ID，它将返回所有行，我认为您不走运。

虽然你可以使用这样的东西：

```
SELECT name FROM table WHERE id = IFNULL(?, id) 
```

如果`NULL`提供了该值，则将返回所有行。

如果您不喜欢，请`NULL`尝试以下查询，如果提供了值，它将返回所有行`-1`：

```
SELECT name FROM table WHERE id = IFNULL(NULLIF(?, -1), id) 
```

另一种实现相同效果（但需要绑定 id 两次）的方法是：

```
SELECT name FROM table WHERE (id = ? OR ? = -1) 
```

# iphone - 当我按下另一个选项卡时重置选项卡

> ID：11595506
> 
> 赞同：0
> 
> 时间：2012-07-21T20:08:36.890
> 
> 标签：iphone, xcode, navigation, uitabbarcontroller, reset

我正在从 Storyboard 中的 TabBarController 构建 iPhone 应用程序。大多数选项卡都指向带有 TableViews 的 NavigationControllers。现在，当我按下另一个选项卡时，我希望刚刚离开的选项卡跳回主/默认视图。我希望在某些选项卡上发生这种情况，但是对于其中一些选项卡，如果它保留在它留下的视图中会更实用。如何在我的应用程序中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T19:52:44.157

To reset a view controller back to its original state, you can do this in viewWillAppear of a the given ViewController.

# php - 如何根据启动页面上的选择加载自定义样式表？

> ID：11595509
> 
> 赞同：0
> 
> 时间：2012-07-21T20:09:18.303
> 
> 标签：php, css, themes, customization

当我的访问者到达我的站点时，他们会看到一个带有“主题选择”的启动页面。当他们选择主题时，他们将被重定向到实际站点，该站点将根据他们的选择加载适当的外部样式表。为此，我想避免使用单选按钮；相反，只是一个可点击的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:15:41.070

在单击的链接上发送一个与 URL 连接的标志，并在登录页面上根据收到的标志选择样式表。如果以后需要，也可以将其保存在 session 或 coockies 中以供以后调用。

# asp.net - 如何将项目根目录添加到本地主机路径

> ID：11595510
> 
> 赞同：0
> 
> 时间：2012-07-21T20:09:19.080
> 
> 标签：asp.net

我的 asp.net 项目，目前从**http://localhost:51143/default.aspx运行**

无论如何，我可以像**http://localhost:51143/TOrders/default.aspx**这样包含根目录我想这样做的原因是因为在菜单点击事件上调用的 URls 是指“TOders/Reports /aaa.aspx 等等，在生产中它会引用 Intranet/TOrders/Reports/aaa.aspx 等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:26:08.677

您需要[HttpRequest.ApplicationPath](http://msdn.microsoft.com/en-us/library/system.web.httprequest.aspx)属性或[HostingEnvironment.ApplicationVirtualPath](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.applicationvirtualpath.aspx)属性。

[VirtualPathUtility](http://msdn.microsoft.com/en-us/library/system.web.virtualpathutility.aspx)类对构建虚拟路径也很有用。

**编辑：**

尝试将您的项目复制到您的 Web 根目录的子文件夹中，例如。在 IIS 中：

```
C:\inetpub\wwwroot\  (or what you set)
C:\inetpub\wwwroot\MyProject\ 
```

现在在 IIS 管理控制台中，在您的默认 Web 中，您创建一个新的“应用程序”。要么升级现有文件夹，要么为文件夹创建一个虚拟的新文件夹。

然后选择一个虚拟路径（TOrders）并设置物理路径。如果您有 .NET 4，您还将在此处设置 AppPool，或者如果您在 IIS6.x 上有 2.0/3.5，则选择运行时。先试试最高版本...

转到 localhost/Torders/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:17:20.830

一种解决方案可能是拦截**Global.asax中****Application_BeginRequest**方法中的每个请求。 在那里，您可以创建一个规则以从一开始就删除**TOders/**。尝试这样的事情：

 ****```
void Application_BeginRequest(object sender, EventArgs e)
{
    if (Request.RawUrl.StartsWith("TOrders/"))
        Server.Transfer(Request.RawUrl.Substring(8));
} 
```

这可能不是最好的解决方案，但它应该足以让您知道该怎么做。

**编辑：**

由于您有网络项目（不是网站），因此您可以设置项目的**虚拟路径**。我想这就是你要找的。

如果您使用的是 VS2010，请在解决方案资源管理器中右键单击您的项目并选择**Properties**，然后在**Web**选项卡上的 Servers 部分中，将项目的**虚拟路径**更改为**/TOrders/**而不是**/**这是默认值。现在你应该得到**http://localhost:51143/TOders/default.aspx******

# macros - Lisp：宏与函数

> ID：11595523
> 
> 赞同：11
> 
> 时间：2012-07-21T20:11:11.047
> 
> 标签：macros, common-lisp

为了完全理解如此强大的 lisp 宏，我想到了一个问题。我知道关于宏的一条黄金法则是*“当函数完成工作时，切勿使用宏”*。然而，阅读第 9 章 -[实用：构建单元测试框架](http://www.gigamonkeys.com/book/practical-building-a-unit-test-framework.html)- 从《实用的通用 Lisp

```
;; Function defintion. 

(defun report-result (result form)
  (format t "~:[FAIL~;pass~] ... ~a~%" result form))

;; Macro Definition

(defmacro check (form)
  `(report-result ,form ',form)) 
```

好的，我理解它的目的，但我可以使用函数而不是宏来完成它，例如：

```
(setf unevaluated.form '(= 2 (+ 2 3)))

(defun my-func (unevaluated.form)
  (report-result (eval unevaluated.form) unevaluated.form)) 
```

1.  这是否可能只是因为给定的宏太简单了？
2.  此外，由于代码本身（如控制结构、函数等）被表示为 LIST，Lisp 宏系统相对于它的对手来说是否如此强大？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-21T20:28:58.700

但如果它是一个宏，你可以这样做：

```
(check (= 2 (+ 2 3))) 
```

使用函数，您必须执行以下操作：

```
(check '(= 2 (+ 2 3))) 
```

此外，宏`(= 2 (+ 2 3))`实际上是由编译器编译的，而函数是由 eval 函数评估的，不一定是同一件事。

附加物：

是的，它只是评估功能。现在这意味着什么取决于实现。有些人可以解释它，有些人可以编译和执行它。但简单的事情是你不知道从一个系统到另一个系统。

其他人提到的空词汇环境也很重要。

考虑：

```
(defun add3f (form)
  (eval `(+ 3 ,form)))

(demacro add3m (form)
  `(+ 3 ,form)) 
```

然后观察：

```
[28]> (add3m (+ 2 3))
8
[29]> (add3f '(+ 2 3))
8
[30]> (let ((x 2)) (add3m (+ x 3)))
8
[31]> (let ((x 2)) (add3f '(+ x 3)))

*** - EVAL: variable X has no value
The following restarts are available:
USE-VALUE      :R1      Input a value to be used instead of X.
STORE-VALUE    :R2      Input a new value for X.
ABORT          :R3      Abort main loop
Break 1 [32]> :a 
```

对于大多数用例来说，这真的很糟糕。由于 eval 没有词法环境，它无法`x`从封闭的. 中“看到” `let`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T20:28:28.853

更好的替换是 not with `eval`，它不会在所有情况下都按预期执行（例如，它无法访问词法环境），而且也是矫枉过正（见这里：[https ://stackoverflow.com/ a/2571549/977052](https://stackoverflow.com/a/2571549/977052)），但是使用匿名函数的东西，像这样：

```
(defun check (fn)
  (report-result (funcall fn) (function-body fn)))

CL-USER> (check (lambda () (= 2 (+ 2 3)))) 
```

顺便说一句，这就是在 Ruby 中完成这些事情的方式（`procs`那里调用匿名函数）。

但是，正如您所看到的，它变得不那么优雅了（除非您添加语法糖），而且实际上还有一个更大的问题：`function-body`Lisp 中没有函数（尽管可能有非标准的方法来实现它）。总体而言，如您所见，对于这项特定任务，替代解决方案要差得多，尽管在某些情况下这种方法可能会奏效。

但是，一般来说，如果您想对传递给宏的表达式的源代码做一些事情（通常这是使用宏的主要原因），函数是不够的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T02:25:31.830

该`report-result`函数需要源代码和执行结果。

该宏`CHECK`从单一来源形式提供两者。

如果你将一堆`check`表单放入文件中，它们很容易使用编译 Lisp 文件的通常过程进行编译。您将获得检查代码的编译版本。

使用函数和`EVAL`（更好地使用`COMPILE`）您会将源评估推迟到以后。它是否被解释或编译也不清楚。在编译的情况下，您稍后会得到编译器的检查。

# java - 将元素存储在文件中的列表

> ID：11595525
> 
> 赞同：1
> 
> 时间：2012-07-21T20:11:15.903
> 
> 标签：java, data-structures

java中是否有任何将元素存储在文件中的列表？我有一个相当占用内存的应用程序，我想要这样的东西。是否可能/是否已实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:19:21.013

我认为您不会在标准库或常用框架之一中找到类似的东西。

一种合理的方法可能是使用数据库来支持您的数据。有一些非常轻量级的数据库，例如 Derby，并且大多数 JPA 实现可以自动构建表，因此您只需要一个 persistence.xml 和一个 JPA 实体来保存您的数据。

# java - 通过 HTTP 标头发送附加信息

> ID：11595526
> 
> 赞同：1
> 
> 时间：2012-07-21T20:11:23.683
> 
> 标签：java, http, http-headers

我已经使用 Java 编写了一个简单的 HTTP 服务器，并希望向客户端（即常规浏览器）发送一些附加信息（拼图参数和一个小型拼图求解程序）。

同样，浏览器也应该将信息（解决方案）发送回服务器。

有没有办法通过仅通过 HTTP 标头传输此信息来做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:44:49.000

the headers are usually used to add http protocol relevant information. You should probably use either the body of the response or cookies to add the needed information. Adding a cookie is done using the header so it kind of fits what you are asking for.

But I wonder why you need to put it in the header? it seems like what you are asking for is url parameters (client to server) and response body (server to client).

# python - 伪代码解释

> ID：11595530
> 
> 赞同：2
> 
> 时间：2012-07-21T20:11:53.230
> 
> 标签：python, pseudocode

以下伪代码将如何转换为 Python？

```
function IntNoise(32-bit integer: x)             

    x = (x<<13) ^ x;
    return ( 1.0 - ( (x * (x * x * 15731 + 789221) + 1376312589) & 7fffffff) / 1073741824.0);    

end IntNoise function 
```

我不确定以下项目：调用`32-bit integer: x`中的参数`IntNoise`；`<<`和`&7fffffff`。_

该函数是来自此网页的随机数生成器： [Perlin Noise](https://web.archive.org/web/20160510013854/http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T20:32:08.760

逐行，以下是更改：

1.  `function IntNoise(32-bit integer: x)`

    我们不需要声明参数类型，也不想使用 CamelCase，所以第一行是：

    ```
    def intnoise(x): 
    ```

2.  下一行唯一的错误是分号。删除它，我们得到：

    ```
    x = (x << 13) ^ x 
    ```

    x 将*向左移动*13 位，然后结果将与 x 的起始值按位*异或。*

3.  在下一行，再次没有分号，并且`7ffffff`需要以 为前缀`0x`，因此：

    ```
    return ( 1.0 - ( (x * (x * x * 15731 + 789221) + 1376312589) & 0x7fffffff) / 1073741824.0) 
    ```

* * *

总而言之，这使得：

```
def intnoise(x):
    x = (x << 13) ^ x
    return (1.0 - ((x * (x * x * 15731 + 789221) + 1376312589) & 0x7fffffff) / 1073741824.0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T20:18:59.550

“32 位整数”部分没有，除非您使用`numpy.int32`. 只需在有意义时将值屏蔽为 32 位。

“<<”代表。

“& 7fffffff”需要转换。“&”代表，但十六进制文字需要一点：`0x7fffffff`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T20:31:51.287

作为一个学习练习——很好，但是一旦你理解了它，就可以使用`os.urandom(4)`随机数，或者`random`用于各种伪随机生成器的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T20:20:38.737

从您的代码中，我确实理解的是，该函数`IntNoise`作为`32-bit integer`输入。据我所知，这`<<`是左移运算符。并将数字的位向左移动 13 次。`^`是指数的。并且`7fffffff`必须是一个以十六进制格式表示的数字。它是 8 位数字，每个数字即 f 和 7 占用 4 位。`f`是`15`十六进制的值。

# php - 在 ubuntu 11.10 上安装 codeigniter 时出现 500 内部服务器错误

> ID：11595532
> 
> 赞同：1
> 
> 时间：2012-07-21T20:12:31.340
> 
> 标签：php, apache, codeigniter, ubuntu-11.10

我已经在 Windows 上开发了我的 codeigniter 项目，现在我将它放在服务器上，即 Ubuntu 11.10 我把我的根文件夹放在

> 无功/万维网

当我通过网络浏览器访问我的本地主机时，它会正确显示登录页面，但是当我尝试登录时，它会显示

> 500内部服务器错误

当我查看我的 /var/log/apache2/error.log 时，它显示以下内容：

> [错误] [客户端 127.0.0.1] 由于可能的配置错误，请求超出了 10 次内部重定向的限制。如有必要，使用“LimitInternalRecursion”增加限制。使用“LogLevel debug”获取回溯。

知道是什么原因造成的，以及如何解决这个问题？？？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:54:20.937

嗯，问题已经解决了，但是我真的不知道为什么？！！我所做的是我在 var/www 中创建了一个新文件夹并将我的根文件夹放入其中，因此我的应用程序的完整路径如下所示：

> var/www/myapplications/applicationRoot

然后我对文件进行了一些更改

> /etc/apache2/sites-enabled/000-default

我将“DocumentRoot”设置为

> var/www/myapplications/applicationRoot

和“目录”相同

> var/www/myapplications/applicationRoot

然后我尝试从我的网络浏览器访问应用程序

> 本地主机

它很好地显示了登录页面，然后当我登录时它工作得很好，没有任何错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:01:01.783

检查 CodeIgniter 目录根目录中的 .htaccess 文件（如果有的话）。该文件或其他地方是否使用了 RewriteBase 指令？是否配置正确？共享 .htaccess 文件（如果有的话）有助于定位您的问题。

# file - 如何使用循环从 .txt 文件中删除行？

> ID：11595537
> 
> 赞同：2
> 
> 时间：2012-07-21T20:13:03.517
> 
> 标签：file, bash, loops, edit

在我当前的目录中，我有几个 .txt 文件。我想编写一个脚本来搜索这些 .txt 文件中的字符串，并删除包含该字符串的行。例如，我想删除当前目录中所有 .txt 文件中包含“start”一词的所有行。

我已经写了以下代码，但我不知道如何继续！

```
#!bin\bash
files=`find . -maxdepth 1 -name \*.txt` 
```

我应该如何使用“while”来浏览每个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T20:20:09.750

Easy cheasy： `sed -i "s/^.*string.*//" *.txt` 这将删除每个 .txt 文件中包含“字符串”的任何行

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T21:48:58.347

### 使用 Glob 填充循环变量

`-maxdepth 1`在当前目录上使用时，不会递归到子目录中。如果是这种情况，根本不需要使用*find*来匹配带有扩展名的文件；您可以改用[shell glob](http://www.gnu.org/software/bash/manual/bashref.html#Filename-Expansion)来填充循环结构。例如：

```
#!/bin/bash

# Run sed on each file to delete the line.
for file in *txt; do
    sed -i '/text to match/d' "$file"
done 
```

这很简单，并且避免了在进程之间传递文件名参数时可能遇到的许多与文件名相关的问题。把事情简单化！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T20:16:42.140

[在将结果传递给它之后，`read`](http://mywiki.wooledge.org/BashFAQ/001)您可以使用它来依次获取每个文件名`find`。然后你只需传递文件名来`sed`删除你感兴趣的行。

# iphone - 以编程方式将新短信添加到 iPhone 收件箱

> ID：11595542
> 
> 赞同：-1
> 
> 时间：2012-07-21T20:14:49.623
> 
> 标签：iphone, ios, sms

我在 Stack Overflow 上搜索了所有已经提出的问题，所有这些问题都以编程方式“发送”短信到另一部手机，这不是我想要的。

我只想在收件箱中添加一条短信，而不使用蜂窝网络或任何其他服务，并从“my_company_name”等中写一个。基本上我想避免让用户或我的公司为短信付费。我知道推送通知，我也会使用它们，但我需要 SMS。

我想也许，如果用户向自己发送短信，那将是免费的，但“似乎”根本不是真的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:24:11.283

消息应用程序（及其通知 UI）仅显示通过 SMS 或 iMessage 传入的消息。使用公共 API 无法实现您要查找的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T22:25:15.853

As there is no public API available to do this (I guess you already now that), you'll have to go for the private APIs.

You might want to take a look at the source code of BigBoss's [WifiSMS](https://github.com/treason/WifiSMS/tree/master/wifiSMS). This app allows one to control the iPhone's SMS system thru your computer. I haven't tested it myself yet, but BigBoss is a pretty credible application creator when it comes to jailbroken devices.

# java - 为什么我的 java web 应用程序没有在 tomcat 7 中发送打印

> ID：11595543
> 
> 赞同：0
> 
> 时间：2012-07-21T20:14:55.273
> 
> 标签：java, jsp, printing, tomcat7

我在 Eclipse 中使用 JSP 和 Spring MVC 开发了一个 Web 应用程序。当我在 Eclipse 中运行应用程序时运行良好，但是当我在 tomcat 7 中加载 war 文件时，当应用程序必须打印票时它不会，并且不会引发错误。下一个日志来自本地主机访问

```
> 127.0.0.1 - - [23/Jul/2012:11:41:29 -0600] "GET /LilyStore/ HTTP/1.1" 200 2866
> 127.0.0.1 - - [23/Jul/2012:11:41:29 -0600] "GET /LilyStore/Css//LiliStyle.css HTTP/1.1" 304 -
> 127.0.0.1 - - [23/Jul/2012:11:41:29 -0600] "GET /LilyStore/JS//funciones.js HTTP/1.1" 304 -
> 127.0.0.1 - - [23/Jul/2012:11:41:33 -0600] "POST /LilyStore/forms/validateLogin.html?parametro=jav&param2=123 HTTP/1.1"
> 200 6606
> 127.0.0.1 - - [23/Jul/2012:11:41:33 -0600] "GET /LilyStore//Css//LiliStyle.css HTTP/1.1" 304 -
> 127.0.0.1 - - [23/Jul/2012:11:41:33 -0600] "GET /LilyStore//JS//funciones.js HTTP/1.1" 304 -
> 127.0.0.1 - - [23/Jul/2012:11:41:38 -0600] "GET /LilyStore/forms/showVentasPorRango HTTP/1.1" 200 9581
> 127.0.0.1 - - [23/Jul/2012:11:41:38 -0600] "GET /LilyStore//JS//calendar_eu.js HTTP/1.1" 304 -
> 127.0.0.1 - - [23/Jul/2012:11:41:39 -0600] "GET /LilyStore/forms/makeCorte.html HTTP/1.1" 200 9581 
```

Catalina log it ok without errors 下一部分是 catalina log.jul 的最后几行

```
23, 2012 11:41:10 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/showVentasPorRangoMostrar.*] onto handler 'ventasControllerImpl'
jul 23, 2012 11:41:10 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/showVentasPorRangoMostrar/] onto handler 'ventasControllerImpl'
jul 23, 2012 11:41:10 AM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'dispatcher': initialization completed in 5980 ms
jul 23, 2012 11:41:10 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\docs
jul 23, 2012 11:41:10 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\manager
jul 23, 2012 11:41:10 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\ROOT
jul 23, 2012 11:41:10 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
jul 23, 2012 11:41:10 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
jul 23, 2012 11:41:10 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 9738 ms
jul 23, 2012 11:52:47 AM org.apache.jasper.compiler.TldLocationsCache tldScanJar
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time. 
```

在程序中创建一个文件来打印它。打印该文件的方法如下：

```
public void imprimir(String ticketName){
    DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
    //use the default printer
    PrintService service = PrintServiceLookup.lookupDefaultPrintService();
    if (service != null) {
        try {
            //create a print job
            DocPrintJob job = service.createPrintJob();
            //attributes of the job
            DocAttributeSet das = new HashDocAttributeSet();
            FileInputStream fis = new FileInputStream(ticket+".txt");
            Doc doc = new SimpleDoc(fis,flavor,das);
            try {
                //the job is send it to the printer
                job.print(doc,null);
            }
            catch(Exception e){
                e.printStackTrace();
            }
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:15:44.380

我发现问题是要打印的文件的路径，当我的应用程序在warfile的路径中打印时，tomcat会在文件夹的根目录中创建文件

# c# - cocoaasynsocket 到 c 夏普服务器

> ID：11595551
> 
> 赞同：1
> 
> 时间：2012-07-21T20:16:38.647
> 
> 标签：c#, iphone, sockets, cocoaasyncsocket

我想通过套接字在 iPhone 和 C# 服务器之间进行通信，当我尝试使用 cocoaasynsockets 通过 LAN 创建从 iPhone 到我的 C Sharp 服务器的套接字时，但它没有在我的服务器上创建任何套接字。我尝试提供不同的 IP，例如在 (whatispmyip.com) 上找到的 127.0.0.1/192.168.2.102(local)/IP，但没有任何收获，

这是我的 iPhone 测试代码

```
- (IBAction)connect:(id)sender{
GCDAsyncSocket *socket;
socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
NSError *err = nil;

if (![socket connectToHost:@"192.168.2.102" onPort:52523 error:&err]) // Asynchronous!
{
    NSLog(@error : %@"", err);
}

}

- (void)socket:(GCDAsyncSocket *)sender didConnectToHost:(NSString *)host port:(UInt16)port
{
NSLog(@"connected");
} 
```

这是我的cSharp服务器代码

```
TcpListener _tcpListerner;

    public void startingServer() {

       // IPAddress ipad = Dns.Resolve("localhost").AddressList[0];

        IPAddress ipad = IPAddress.Parse("192.168.2.102");
         _tcpListerner = new TcpListener(ipad, 52523);

         _tcpListerner.Start();

        Console.WriteLine("The local End point is  :" +_tcpListerner.LocalEndpoint);
        Console.WriteLine("Waiting for a connection.....");

        Thread thread = new Thread(acceptClients);
        thread.Start();

    }

    void acceptClients()
    {

        Socket s = _tcpListerner.AcceptSocket();
        Console.WriteLine("Connection accepted from " + s.RemoteEndPoint);

        byte[] b = new byte[100];
        int k = s.Receive(b);

        char cc = ' ';
        string test = null;
        Console.WriteLine("Recieved...");
        for (int i = 0; i < k - 1; i++)
        {
            Console.Write(Convert.ToChar(b[i]));
            cc = Convert.ToChar(b[i]);
            test += cc.ToString();
        } 
```

我在其中缺少什么，我应该提供什么 IP，或者在服务器端或 iphone（客户端）上有一些设置来接受/创建来自网络的套接字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:38:10.650

在服务器上使用[`IPAddress.Any`](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.any%28v=vs.71%29.aspx)以侦听*所有*机器地址。在客户端使用您要连接的*服务器的 LAN 地址。*

# ios4 - CALayer 作为子层不可见

> ID：11595555
> 
> 赞同：5
> 
> 时间：2012-07-21T20:17:11.827
> 
> 标签：ios4, core-animation, invisible, quartz-core

我正在尝试构建一个动画圆圈，该圆圈将顺时针绘制，直到它变成完整的圆圈，如[iPhone Core Animation - Draw a Circle](https://stackoverflow.com/questions/7991086/iphone-core-animation-drawing-a-circle)

问题是`CALayer`没有添加或构建对象。我测试并看到它没有访问我的`drawInContext:CGContextRef`和`animatingArc`方法。

到目前为止我所做的是：

**在 AnimateArc.h 中**

```
@interface AnimateArc : CALayer {

CAShapeLayer *circle;
}

-(void) animatingArc;

@end 
```

**在 AnimateArc.m 中**

```
-(void) drawInContext:(CGContextRef)ctx
{
CGFloat radius = 50.0;
circle = [CAShapeLayer layer];

//make a circular shape
circle.path = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(0.0, 0.0, 2 * radius, 2 * radius) cornerRadius:radius].CGPath;

    CGPoint centerPoint = CGPointMake(CGRectGetWidth(self.bounds)/2, CGRectGetHeight(self.bounds)/2);    

//center the shape in self.view
circle.position = centerPoint;

//configure appearence of circle
circle.fillColor = [UIColor clearColor].CGColor;
circle.strokeColor = [UIColor blackColor].CGColor;
circle.lineWidth = 5;                                           

/*CGPointMake((self.contentsCenter.size.width), (self.contentsCenter.size.height));*/

//path the circle
CGContextAddArc(ctx, centerPoint.x, centerPoint.y, radius, 0.0, 2 * M_PI, 0);
CGContextClosePath(ctx);

//fill it
CGContextSetFillColorWithColor(ctx, [UIColor redColor].CGColor);
CGContextFillPath(ctx); } 
```

///////////////////////////////////////// ///////////////////

```
-(void) animatingArc
{
CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"arcEnd"];
anim.duration = 20.0; //animate over 20 seconds
anim.repeatCount = 1.0; //animate only once
anim.removedOnCompletion = NO; //Reamin there after completion

//animate from start to end
anim.fromValue = [NSNumber numberWithFloat:50.0f];
anim.toValue = [NSNumber numberWithFloat:150.0f];

//experiment with timing to get appearence to look the way you want
anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];

//add animation to circle
[circle addAnimation:anim forKey:@"animatingArc"]; 
} 
```

///////////////////

```
//needed since key not part of animatable properties
+(BOOL) needsDisplayForKey:(NSString *)key
{
if([key isEqualToString:@"arcEnd"])
    return YES;
else
    return [super needsDisplayForKey:key];

}

//ensure custom properties copied to presentation layer
-(id) initWithLayer:(id)layer
{
if((self = [super initWithLayer:layer]))
{
    if ([layer isKindOfClass:[AnimateArc class]])
    {
        AnimateArc *other = (AnimateArc *) layer;
        [other setNeedsDisplay];
    }
}
return self; } 
```

最后在我的 viewController 中，

```
- (void)viewDidLoad
{
[super viewDidLoad];
[self.view.layer addSublayer:AnimateArcObject];
[AnimateArcObject animatingArc];
 } 
```

为格式错误道歉....请有人告诉我我做错了什么？我也怀疑我的代码在访问这两个函数后会在任何地方崩溃，因为我是 Core Animation 的新手，并且不知道我的方向是否正确。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-21T22:29:39.230

根据我对 CoreAnimation 的痛苦体验，您必须**始终**设置*任何*您实例化的`bounds`属性。 *`CALayer`*

 *因此，您的图层未显示，因为您缺少以下内容：

`layer.bounds = CGRectMake(0, 0, width, height);`

您应该在实例化图层后立即放置它，并养成这样做的习惯，这样您就不会再次陷入其中。

至于你的代码崩溃，对不起。它太分散了，我不确定它是如何链接在一起的，所以我无法帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:21:13.600

经过一番搜索，我以为我走错了方向。所以我删除了这个`AnimateArc`文件并添加了一个**继承自`UIViewController`.**

然后在方法中，我从[这个链接](http://nachbaur.com/blog/core-animation-part-1)`viewDidLoad`编写了代码来 使用路径创建圆和动画。

在*父视图控制器*中，我添加了`AnimatedArc ViewController's subview`. 现在它工作得很好:)*

# .net - DataContractJsonSerializer 不允许在 json 对象键名中使用冒号

> ID：11595556
> 
> 赞同：0
> 
> 时间：2012-07-21T20:17:28.177
> 
> 标签：.net, json, wcf, dictionary

我正在构建 WCF REST 服务，并且我注意到当我将带有冒号的 JSON 对象作为键名传递并尝试将这些对反序列化为字典时，什么也没有发生。REST 服务中的反序列化执行没有错误，但是包含冒号的 JSON 对象中对应的键名的对象字段不会被反序列化。

我发现问题出在 DataContractJsonSerializer 和自定义字典类上。我在这里找到了可序列化的字典[Generic WCF JSON Deserialization](https://stackoverflow.com/questions/2297903/generic-wcf-json-deserialization)），它只是不想用冒号解析键。

这是一个例子

```
void Main()
{
    var stream = new MemoryStream(System.Text.Encoding.UTF8.GetBytes(
        @"{ ""a:b:c"": ""adfsfsf"", ""res"": 123, ""dict"": { ""a:b"": ""va"", ""b"": ""vb"" } }"));
    var ser = new DataContractJsonSerializer(typeof(A));
    var a = (A)ser.ReadObject(stream);
    a.Dump();
}

[DataContract]
class A 
{
    [DataMember(Name = "a:b:c")]
    public string AF { get; set; }

    [DataMember(Name = "res")]
    public int Res { get; set; }

    [DataMember(Name = "dict")]
    public JsonDictionary Dict { get; set; } 
}

// NOTE: Code from https://stackoverflow.com/questions/2297903/generic-wcf-json-deserialization
[Serializable]
public class JsonDictionary : ISerializable
{
    private Dictionary<string, string> m_entries;

    public JsonDictionary()
    {
        m_entries = new Dictionary<string, string>();
    }

    public IEnumerable<KeyValuePair<string, string>> Entries
    {
        get { return m_entries; }
    }

    protected JsonDictionary(SerializationInfo info, StreamingContext context)
    {
        m_entries = new Dictionary<string, string>();
        foreach (var entry in info)
        {
            m_entries.Add(entry.Name, (string)entry.Value);
        }
    }

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        foreach (var entry in m_entries)
        {
            info.AddValue(entry.Key, entry.Value);
        }
    }
} 
```

结果，我得到了一个带有填充字段 a:b:c 和 res 的 A 实例。但在字典中我只得到 1 对（它是 b/vb）。并且 a:b/va 这对只是不出现在结果字典中。如果我将 a:b 重命名为 a。然后 a/va 出现在字典中。

有什么问题？

# jquery - 显示内部页面的加载微调器

> ID：11595557
> 
> 赞同：0
> 
> 时间：2012-07-21T20:17:30.063
> 
> 标签：jquery, ajax, jquery-mobile, loading

我正在使用 jQuery 1.1.1 和 HTML5 构建一个网络移动应用程序。

当用户单击以打开从 XML 文件中获取数据的页面时，我想显示加载微调器。

我正在使用 Ajax 和 GET 来列出大 XML 文件中的数据。

我在 jQuery 文档中发现有一个选项，但仅适用于外部页面。

提前致谢

这是我的问题“感谢您的帮助”的答案。

```
 $.ajax({
      type: "GET",
      url: "js/database/surah/"+$(this).attr("FileName"),
      dataType: "xml",
      async:   false,
      beforeSend : function () {
           $.mobile.showPageLoadingMsg();
      },
      complete : function(){
           $.mobile.hidePageLoadingMsg();
      },
      success: function(xml) {
      Ayah_nbr = $(xml).find('Verse').last().attr("VerseID");
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:56:26.177

你是说颤抖者？

只需在您的网站上放一点旋转动画并默认隐藏即可。

使用 ajax 请求上的 before 选项，您可以像这样显示 throbber

```
$("#throbber").show(); 
```

当您的请求的成功功能被触发时，您只需再次隐藏它！:)

```
$("#throbber").hide(); 
```

悸动者本身应该是一个小动画，可能有一个覆盖页面其余部分的环绕 div，没有人可以点击任何其他链接或其他东西。

您也可以只显示 throbber 并删除链接上的点击处理程序，如果它花费的时间比预期的要多（例如，在像 UMTS 这样的慢速连接上！），则不可能两次触发相同的操作

# hibernate - 查询数据库时出现 org.hibernate.TypeMismatchException

> ID：11595567
> 
> 赞同：0
> 
> 时间：2012-07-21T20:20:15.087
> 
> 标签：hibernate, jsf

我正在开发我的第一个 web 应用程序，我将使用 hibernate。

我有 ：

*   休眠 3.2.5
*   JSF 2.1
*   Netbeans 7.2 Rc1

我想要做的是，在我的 web 应用程序中有一个表单，用户将在其中输入他们的凭据，然后我会将它们与我在数据库中的内容进行匹配。

第一步是获取信息，尽管 JSF ==> 工作正常。下一步是查询数据库以检查我有这个用户并且密码是否正确。

对于第二步，我有一个问题。

这是我正在调用的代码：

```
public String checkUser() {
    /** 1° Query the database for active users with specified name. */
    session = helper.getSessionFactory().openSession();
    PAC_USERS queryUsr = new PAC_USERS();
    session.load(PAC_USERS.class, queryUsr);
    session.beginTransaction();
    queryUsr.setName(this.name);
    this.user = (PAC_USERS) session.get(PAC_USERS.class, queryUsr);
    session.close();
    return null;
    /** 2° verify password against the one stored in the DB. */
} 
```

这是休眠映射文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
   <class catalog="pac" name="com.a3c.pac.jsf.beans.PAC_USERS" table="pac_users">
       <id column="id" name="id" type="integer">
           <generator class="identity"/>
       </id>
       <property column="name" name="name" type="string"/>
       <property column="password" name="password" type="string"/>
   </class>
</hibernate-mapping> 
```

这是我的表的 SQL 语句：

```
CREATE TABLE `pac_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  `password` varchar(45) NOT NULL,
  `active` int(11) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1$$ 
```

我想要的是在 PAC_USERS 表中查询具有通过网页提供的名称的记录。

PAC_USERS.java 类也可能有帮助，这里是：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.a3c.pac.jsf.beans;

import java.io.Serializable;

/**
 *
 * @author Utilisateurs
 */
public class PAC_USERS implements Serializable {
    private Integer id;
    private String name;
    private String password;
    private Boolean active = false;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public Boolean getActive() {
        return active;
    }

    public void setActive(Boolean active) {
        this.active = active;
    }
} 
```

任何建议将不胜感激。

提前致谢。

保重，马可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:57:46.747

完全不了解 session.load 和 session.get 的目的。如果您想按名称加载 PAC_USERS 对象（我什至不会进入该命名），那么您只需这样做（假设名称是唯一的）：

```
session = helper.getSessionFactory().openSession();
this.user = (PAC_USERS) session.createQuery( "select u from PAC_USERS u where u.name = :username" )
        .setParameter( "username", this.name )
        .uniqueResult();
session.close(); 
```

但是，这里有很多事情可以做得更好。首先，这似乎是我们称之为 session-per-operation 的反模式的一个主要示例，特别是为数据库的每个请求打开和关闭一个 Session。也许这只是这个特定用例的性质，请注意......

接下来，这是@NaturalId（或`<natural-id/>`）映射的良好候选者。从 4.1 开始，Hibernate 提供按 natural-id 加载实体作为与按 id 加载相同的一等公民。假设您已将名称映射为自然 id，您可以这样做：

```
session = helper.getSessionFactory().openSession();
this.user = (PAC_USERS) session.bySimpleNaturalId( PAC_USERS.class ).load( this.name );
session.close(); 
```

最后，如果您对这个返回的用户所做的只是验证他们的身份验证凭据，那么您最好不要返回该实体。或者，直接选择密码并验证：

```
session = helper.getSessionFactory().openSession();
final String password = (String) session.createQuery( "select u.password from PAC_USERS where u.name = :username" )
        .setParameter( "username", this.name )
        .uniqueResult();
session.close(); 
```

或者只是在查询中执行验证：

```
session = helper.getSessionFactory().openSession();
final Long matches = (Long) session.createQuery( "select count(*) from PAC_USERS where u.name = :username and u.password = :pswd" )
        .setParameter( "username", this.name )
        .setParameter( "pswd", this.password )
        .uniqueResult();
// count should == 1...
session.close(); 
```

# regex - 用正则表达式解析，不带尾随字符

> ID：11595568
> 
> 赞同：0
> 
> 时间：2012-07-21T20:20:21.577
> 
> 标签：regex, parsing

如何以该格式成功解析下面的文本以仅解析

```
To: User <test@test.com> 
```

和

```
To: <test@test.com> 
```

当我尝试解析下面的文本时

```
/To:.*<[A-Z0-9._+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}>/mi 
```

它抓住

```
Message-ID <CC2E81A5.6B9%test@test.com>, 
```

我不想在我的答案中。

我试过使用 $ 和 \z 都没有工作。我究竟做错了什么？

**要解析的信息**

```
To: User <test@test.com> Message-ID <CC2E81A5.6B9%test@test.com>
To:

<test@test.com> 
```

这是我在 Rubular [http://rubular.com/r/DQMQC4TQLV中的解析信息](http://rubular.com/r/DQMQC4TQLV)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:48:25.887

由于您没有确切指定您的工具/语言是什么，因此必须做出假设。

一般来说，正则表达式模式匹配往往是积极的，匹配最长的可能模式。您的模式以 开头`.*`，这意味着您将匹配以您的模式其余部分结尾的最长可能字符串，该字符串`<[A-Z0-9._+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}>`与.`<CC2E81A5.6B9%test@test.com>``Message-ID`

Apalala 和 nhahtdh 的评论都给了你一些尝试。避免`.*`在一开始就包含所有内容，并使用更具体的内容：匹配前导空格，或匹配除您真正感兴趣的第一部分之外的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T20:35:43.657

您需要通过在通配符后面添加一个问号来使通配符匹配不贪心：

```
To:.*?<[A-Z0-9._+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}> 
```

# salesforce - 通过触发器显示警报框 - salesforce

> ID：11595574
> 
> 赞同：1
> 
> 时间：2012-07-21T20:21:06.280
> 
> 标签：salesforce, apex-code, force.com

是否可以通过触发器显示警报消息（不是错误消息）？我编写了一个触发器来检查系统中的重复帐户。此时的触发器会向用户提供一条错误消息，告诉用户存在重复帐户。但是，如果用户更改字段的值“记录是否接近重复？” 为YES，触发器允许用户保存记录。

但是，我想在警报弹出框中显示错误消息，例如“存在此名称的帐户，您确定要继续”，然后用户单击“是”并创建记录。关于我如何做到这一点的任何想法。我的代码如下：

```
for(Account account: System.Trigger.New)  
{  
 if(accountMap.containsKey(account.Physical_Street__c)==accountMap2.containsKey(account.Phone))
 if(accountMap.containsKey(account.Physical_Street__c)==accountMap3.containsKey(account.Name))  
 if(account.Is_record_near_to_duplicate__c.equals('No'))  
  {  
   account.addError('Account with this Name,Street and Phone Number already      exists. If you still wish to create the agency change the value of field "Is Record Near To Duplicate" to YES');  
  }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:56:08.820

如果您真的需要一个警告框，那么您可以创建一个自定义 javascript 按钮，该按钮使用[ajax 工具包](http://www.salesforce.com/us/developer/docs/ajax/index.htm)来替换标准的保存按钮。

然而，正如 Baxter 所说，您与标准的销售人员外观和感觉相去甚远。我建议改为在复选框字段而不是对象上添加错误，以便用户清楚他们需要选择什么。

```
if(account.Is_record_near_to_duplicate__c.equals('No'))  
  {  
     account.Is_record_near_to_duplicate__c.addError('Agency with this Name, Physical Street and Phone Number already exists. If you still wish to create the agency change the value of field "Is Record Near To Duplicate" to YES');  
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:25:22.153

Unless you write a custom visualforce page that processes the error message and then displays it as a popup there's no way to do this.

If you wanted the alert to modify the data you may look at using the ajax api to set the Is_record_near_to_duplicate__c field to 'Yes' but either way you're getting pretty far from the standard functionality and interface with this.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:03:06.910

为触发错误实施弹出式警报并不是一件容易的事，而且弹出式窗口很久以前就已经过时了。如果您遇到麻烦，不妨在 VF 页面上实现自定义灵魂。

从触发器中抛出一个自定义异常（针对欺骗帐户），并在您的控制器中捕获它。当您捕获此异常时，您可以在页面上动态显示部分，要求用户确认他/她的操作。当用户确认操作时，页面将完成其余的工作。

希望这是有道理的！

阿努普

# php - Using ON DUPLICATE KEY UPDATE with 2 keys

> ID：11595575
> 
> 赞同：1
> 
> 时间：2012-07-21T20:21:23.283
> 
> 标签：php, mysql, sql, codeigniter

I have a table with columns `id`, `user_id`, `post_id`, `like`, `views`. When a user click the Like button, a row will be added to the table with the corresponding `user_id` and `post_id`, and `like` will be set to `1`. If the row already exist and the `like` column already is `1`, nothing will happen.

When the user visits a particular page, a row will be added to the table with the corresponding `user_id` and `post_id`, and `view` will be set to `1`. However if the row already exist, the value in `view` will be incremented.

**Problem:** I tried using `INSERT INTO mytable ... ON DUPLICATE KEY UPDATE like = 1`, but the primary key of the table is `id` and not `user_id` or `post_id`. If I set the primary key to either `user_id` or `post_id`, there will be a problem because the row will only be duplicated if there exist a row with the same `user_id` and `post_id`.

In this situation, how should the query be built?

Or will a better situation be to split the table into 2 tables, one for `likes` and 1 for `views`. If this is the case, I still need to make the row unique based on both `user_id` and `post_id` columns.

Or do multiple SQL queries?

Please advise, thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:05:22.893

I would suggest that you have a table for likes, and then in whatever table that you keep posts in, you add a row for views. So whenever this post is viewed, you simply update the view value for that post to view = view + 1\.

Now to address the problem that you outlined about the primary keys, you should note that you can use a unique key in that scenario, which can apply to multiple columns and would fix the issue that you ran into. So for example if in your scenario you had a unique key that encompassed both the userid and postid, your database would not allow for two different rows in that table with the same userid and postid.

So for future reference, use a unique key if you need to :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:32:58.417

1.  discard the id as primary key
2.  use two tables
3.  make primary key on (user_id, post_id)
4.  when handle insert like, do a insert ignore
5.  when handle insert view, do a insert .. duplicate key update view = view+1

# c# - 建模管理员可以控制网页上某些用户输入字段的只读/视图/默认值的场景？

> ID：11595576
> 
> 赞同：3
> 
> 时间：2012-07-21T20:21:25.990
> 
> 标签：c#, sql-server, asp.net-mvc-3, entity-framework-4.1, ef-code-first

我希望管理员控制默认值，并确定输入字段是否默认/是否可以被用户写入/查看。

我有几个想法是：

*   包括一个管理员可以更新的“默认”记录，然后在每次用户创建新条目时获取值。在这种情况下，我不确定如何控制只读/视图。
*   创建一个使用“字段”对象的结构，并在“字段”中包含用于只读/可查看的布尔值，以及用于实际字段类型和默认值的字段。缺点是保存用户条目的表将是这组对象的一个​​子集。我也不确定这个结构最终会变得多么复杂，关于客户端/服务器验证等。

如果重要的话，我们使用 ASP.net MVC3 和 Code-First Entity Framework 4.1。另一个想法是在运行时更改注释，这看起来很复杂，可能难以维护/容易搞砸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:47:11.387

这是我将很快实施的事情，所以我一直在考虑。这是我的想法。我还没有实现任何东西或研究这些想法中的哪些（如果有的话）会起作用，所以请以这种方式接收它们。

首先，我想我会有一个存储过程，它可以从数据库中的安全表中读取数据并以标准化格式返回。然后可以将此数据放入将存储在应用程序中的对象（将在请求之间持续存在的地方）以用于将来的请求。

接下来，我将创建编辑器模板或 html 帮助程序，它们将使用存储的安全信息来确定是否显示只读/可编辑以及是否显示默认值。

同样，请记住，这些只是我的初步想法，尚未研究或实施。

希望这会有所帮助。

# php - curl无法下载网页

> ID：11595579
> 
> 赞同：2
> 
> 时间：2012-07-21T20:21:48.500
> 
> 标签：php, curl

我正在尝试打开网站的主页，并使用 curl 和 php 从它的 html 标记中提取标题和描述，我在某种程度上成功地做到了这一点，但是我无法打开许多网站。我的代码在这里：

```
function curl_download($Url){
     if (!function_exists('curl_init')){
        die('Sorry cURL is not installed!');
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $Url); 
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    $output = curl_exec($ch);
    curl_close($ch); 
    return $output;
}
// $url is any url
$source=curl_download($url);
$d=new DOMDocument();
$d->loadHTML($source);
$title=$d->getElementsByTagName("title")->item(0)->textContent)
$domx = new DOMXPath($d);
$desc=$domx->query("//meta[@name='description']")->item(0);
$description=$desc->getAttribute('content');
?> 
```

此代码适用于大多数网站，但有很多网站甚至无法打开。可能是什么原因？

当我尝试使用`get_headers`函数获取这些网站的标题时，它工作正常，但没有使用 curl 打开这些标题。其中两个网站是`blogger.com`和`live.com`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T20:54:35.633

代替：

```
$output = curl_exec($ch); 
```

和

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
curl_setopt($ch, CURLOPT_SSLVERSION, 3);
$output = curl_exec($ch);
if (!$output) {
   echo curl_error($ch);
} 
```

看看为什么 Curl 失败了。

始终检查函数调用的结果以查看它们是否成功并在它们失败时报告是一个好主意。虽然一个功能可能在 99.999% 的时间内有效，但您需要报告它失败的次数以及失败的原因，以便在可能的情况下识别和修复根本原因。

# ant - indexof : ant 中的类似函数

> ID：11595580
> 
> 赞同：-2
> 
> 时间：2012-07-21T20:22:46.433
> 
> 标签：ant

我正在使用 ant，任​​何人都可以告诉我是否有与 ant 中的 indexof 类似的功能。

如果索引大于 1，它应该实现不同的逻辑。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:39:46.113

我不知道您到底想做什么，但 ant 提供`translate`和`replace`任务以及`script`您可以从中调用 JavaScript 的任务。请参阅[手册](http://ant.apache.org/manual/index.html)。

# asp.net - ASP.net - 中心对齐面板？

> ID：11595585
> 
> 赞同：1
> 
> 时间：2012-07-21T20:24:29.013
> 
> 标签：asp.net, html, alignment, panel, center

我需要居中对齐面板。我使用以下内容：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="TestDefault.aspx.cs" Inherits="tregware.TestDefault" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<asp:Panel ID="Root" runat="server" BackColor="Red"  HorizontalAlign="Center" Style="left: 0px; top: 0px; width: 100%; height: 100%; position: absolute; z-index: 0;">

<asp:Panel ID="Body" runat="server" BackColor="Blue" 
    Style="left: 0px; top: 24px;width: 800px; height: 100%; position: absolute; z-index: 0;" 
    HorizontalAlign="Center">
</asp:Panel>

</asp:Panel>
</form>
</body>
</html> 
```

但是面板（“Body”）不会居中。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:34:26.077

您已设置`position: absolute`，因此您用于居中元素的许多常规方法可能不起作用。

由于您设置了一个固定`width`的`800px`，您可以使用：

```
Style="left: 50%; margin-left: -400px; ..." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-09T18:50:50.680

Panel 具有**Horizo​​ntalAlign的属性**

```
<asp:Panel id="reqId" runat="server" HorizontalAlign="center" >
Your Text Here
</asp:Panel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T20:31:58.277

创建一个名为`.panel { align:center }`

然后将其添加到面板`CssClass = "panel"`

# php - 无法在 PHP&MYSQL 中更新图像

> ID：11595589
> 
> 赞同：0
> 
> 时间：2012-07-21T20:25:00.723
> 
> 标签：php, mysql, image

嗨，伙计们，我正在做一个项目，我有一个 student_edit.php 文件，该文件更新了学生的详细信息，我的所有数据都已成功更新，但是当我更新时有一个问题，可以说只有两个字段而不是所有字段，然后图像被空白并且我的字段更新成功。

我正在做的是我正在展示学生图片，除此之外我还有另一个输入字段来浏览图像以更新图像。我想要的很简单，如果我不更新图像而是更新其他字段图像应该仍然存在并且不会变为空白。

必要的代码片段是这样的：

```
<?php

    $file_name = $_FILES['picture']['name'];
    $tmp_name  = $_FILES['picture']['tmp_name'];

    if (copy($tmp_name, "images/" . $file_name)) {
        $picture = "images/" . $file_name;
    }

    if (!isset($_POST['picture'])) {
        $res = mysql_query("UPDATE student SET `id`='$id',`branch_id`='$branch_id',`class_id`='$class_id',`section_id`='$section_id',`roll_number`='$roll_number',`student_name`='$student_name',`father_name`='$father_name',`dob`='$dob',`student_address`='$student_address',`gender`='$gender',`status`='$status',updated=now() WHERE id='$id'") or die(mysql_error());
    }
    else {
        $res = mysql_query("UPDATE student SET `id`='$id',`branch_id`='$branch_id',`class_id`='$class_id',`section_id`='$section_id',`roll_number`='$roll_number',`student_name`='$student_name',`father_name`='$father_name',`dob`='$dob',`student_address`='$student_address',`gender`='$gender',`status`='$status',`picture`='$picture',updated=now() WHERE id='$id'") or die(mysql_error());
    }

?> 
```

他们是我称之为图片的图片区域

```
<p>
    <label for="picture"><strong>Picture:</strong> </label>
    <a href="#"><img src="<?php echo $rec['picture'];?>" width="100" height="100"/></a>
    <input name="picture" type="file" value="">

</p> 
```

他们是我称之为图片的图片区域

```
<p>
    <label for="picture"><strong>Picture:</strong> </label>
    <a href="#"><img src="<?php echo $rec['picture'];?>" width="100" height="100"/></a>
    <input name="picture" type="file" value="">

</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:41:51.470

只是通过查看您的代码进行快速猜测，您并没有逃避`$picture`将其放入数据库时​​的值，这可能是数据库中的图像值没有更新的原因。

另外，不要使用`if(!isset($_POST['picture']))`，而是尝试`if (!isset($_FILES['picture']) || (isset($_FILES['picture']) && $_FILES['picture']['name'] == "")`。`$_POST`超级全局不起作用，因为文件是通过超级全局发送的`$_FILES`。

把它们放在一起：

```
$file_name = $_FILES['picture']['name'];
$tmp_name = $_FILES['picture']['tmp_name'];

if (!isset($_FILES['picture']) || (isset($_FILES['picture']) && $_FILES['picture']['name'] == "")) {
  $res = mysql_query("UPDATE student SET `id`='$id',`branch_id`='$branch_id',`class_id`='$class_id',`section_id`='$section_id',`roll_number`='$roll_number',`student_name`='$student_name',`father_name`='$father_name',`dob`='$dob',`student_address`='$student_address',`gender`='$gender',`status`='$status',`picture`='$picture',updated=now() WHERE id='$id'") or die(mysql_error());
} else {
  copy($tmp_name, "images/" . $file_name)

  $picture = mysql_real_escape_string("images/".$file_name);
  $res = mysql_query("UPDATE student SET `id`='$id',`branch_id`='$branch_id',`class_id`='$class_id',`section_id`='$section_id',`roll_number`='$roll_number',`student_name`='$student_name',`father_name`='$father_name',`dob`='$dob',`student_address`='$student_address',`gender`='$gender',`status`='$status',updated=now() WHERE id='$id'") or die(mysql_error());
} 
```

另外，我真的建议您使用 MySQLi 扩展：[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

上面的代码完全未经测试，但*应该可以*工作。

# actionscript-3 - 弹性 4 裹

> ID：11595590
> 
> 赞同：1
> 
> 时间：2012-07-21T20:25:02.150
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flex4

`<s:Group>`我在 Flex 4中有以下组件示例：

```
<s:Group left="10" top="10" right="10">
    <s:layout>
        <s:HorizontalLayout gap="20"/>
    </s:layout>

    <s:Image id="image" source="{data.imageURL}"/>
    <s:Label right="0" styleName="description" text="{data.description}"/>
</s:Group> 
```

`<s:Label>`如果组件对于组内的图像宽度和标签的宽度都太长，是否可以将组件包装到新行上？

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T01:46:24.083

为了让`Label`文字环绕文本，它需要有某种宽度，所以它知道从哪里开始环绕。

所有这些标签都以一种或另一种方式指定了宽度，如果需要，应该自动换行：

```
<s:Label id="fixedWidth" width="100"/>
<s:Label id="percentWidth" width="25%"/>
<s:Label id="constraintBasedWidth" left="0" right="0"/>
<s:Label id="maxWidth" maxWidth="100"/> 
```

也许您可以尝试`maxWidth`在标签上使用。这应该把它放在图像旁边，让它包裹更长的文本。

还有[maxDisplayedLines](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/TextBase.html#maxDisplayedLines)属性，您可能会发现它很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:28:24.783

听起来像你想要`TileLayout`的。这将水平排列组件并在空间不足时包装。

# javascript - 使用 Backbone.js，如何绑定到数组的更改而无需手动触发？

> ID：11595593
> 
> 赞同：1
> 
> 时间：2012-07-21T20:25:41.207
> 
> 标签：javascript, jquery, backbone.js

我正在创建一个允许用户输入电子邮件的邀请对话框。目前在模型中，我正在创建一个数组来保存电子邮件：

```
initialize : function() {
    this.model.set({
        invite_email_array : new Array()
    });
} 
```

然后我在视图中添加/删除项目，如下所示：

```
this.model.get('invite_email_array').push('email@domain.com'); 
```

然后问题是当我从模型中添加或删除电子邮件时没有触发活页夹。这是我的活页夹：

```
binder : function() {
          model.on("change:invite_email_array", onInviteEmailArrayChange() )
} 
```

我能够触发绑定的唯一方法是在我进行更新时手动触发它......一个丑陋的黑客

```
 this.model.trigger("change:invite_email_array"); 
```

关于维护电子邮件列表然后能够在添加/删除时绑定到对象的更好方法的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:28:59.413

在您给出的示例中，您`set`通过直接更改数组来绕过。为了触发更改，您需要在推送新电子邮件*后*`set`更改数组。大意是：

 *```
var arr = _.clone(this.model.get('invite_email_array'));
arr.push('email@domain.com');

this.model.set({ invite_email_array: arr }); 
```

然而，一旦你引入了一个数组，可能值得考虑视图的设计是否真的反映了它的意图。任何东西的集合（或数组）通常表明是时候考虑简化模型或视图了。即使将单个电子邮件分配给它自己的视图/模型似乎太微不足道，但将一组电子邮件作为“邀请”视图的集合进行跟踪并观察相应的更改可能是有意义的。*

# java - 使用 Hibernate (JPA) 查询 Postgresql 找不到表

> ID：11595599
> 
> 赞同：5
> 
> 时间：2012-07-21T20:26:43.563
> 
> 标签：java, hibernate, postgresql, jakarta-ee, jpa

我正在使用 JPA 和 Hibernate 和 Postgresql 开发一个应用程序。使用 Netbeans 向导，我从现有数据库创建了实体类。此类之一的摘录如下：

```
@Entity
@Table(name = "ADM_TYPES")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "AdmTypes.findAll", query = "SELECT a FROM AdmTypes a"),
    @NamedQuery(name = "AdmTypes.findByCType", query = "SELECT a FROM AdmTypes a WHERE a.cType = :cType"),
    @NamedQuery(name = "AdmTypes.findByVlType", query = "SELECT a FROM AdmTypes a WHERE a.vlType = :vlType"),
    @NamedQuery(name = "AdmTypes.findByDsType", query = "SELECT a FROM AdmTypes a WHERE a.dsType = :dsType"),
    @NamedQuery(name = "AdmTypes.findByVlStatus", query = "SELECT a FROM AdmTypes a WHERE a.vlStatus = :vlStatus"),
    @NamedQuery(name = "AdmTypes.findByCTypePrefix", query = "SELECT a FROM AdmTypes a WHERE a.cType like :cTypePrefix")})
public class AdmTypes implements Serializable { 
```

在 EJB 中，我有：

```
@Stateless 
@LocalBean
public class ModelManagement {
    @PersistenceContext 
    private EntityManager em;

    public List<AdmTypes> listAdmTypesPrefix(String prefix){
        TypedQuery<AdmTypes> query = em.createNamedQuery("AdmTypes.findByCTypePrefix", AdmTypes.class);
        query.setParameter("cTypePrefix", "'%"+prefix+"%'");
        return query.getResultList();
    } 
```

当我尝试执行`ModelManagement.listAdmTypesPrefix("APREFIX")`它会产生以下错误：

```
javax.ejb.EJBException
    at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5193)
    at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5091)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4879)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2039)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1990)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
    at $Proxy192.listAdmTypesPrefix(Unknown Source)
    at com.librethinking.simmodsys.ejb.__EJB31_Generated__ModelManagement__Intf____Bean__.listAdmTypesPrefix(Unknown Source)
    at com.librethinking.MockServlet.processRequest(MockServlet.java:64)
    at com.librethinking.MockServlet.doGet(MockServlet.java:94)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: ERROR: relation "adm_types" does not exist
  Position: 136
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1367)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:265)
    at com.librethinking.simmodsys.ejb.ModelManagement.listAdmTypesPrefix(ModelManagement.java:39)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5366)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5338)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5326)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    ... 32 more
Caused by: org.hibernate.exception.SQLGrammarException: ERROR: relation "adm_types" does not exist
  Position: 136
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:122)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy194.executeQuery(Unknown Source)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
    at org.hibernate.loader.Loader.doQuery(Loader.java:829)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
    at org.hibernate.loader.Loader.doList(Loader.java:2438)
    at org.hibernate.loader.Loader.doList(Loader.java:2424)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2254)
    at org.hibernate.loader.Loader.list(Loader.java:2249)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1248)
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:256)
    ... 55 more
Caused by: org.postgresql.util.PSQLException: ERROR: relation "adm_types" does not exist
  Position: 136
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2101)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1834)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:255)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:510)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:386)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:271)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 70 more 
```

我知道 Postgres 对大写的表名有点烦人，但是如何将查询更改为指向“ADM_TYPES”而不是 AdmTypes？这不应该自动完成吗（毕竟我从现有数据库创建了实体类）？代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T20:36:34.577

Postgres (used to, not sure on the newer) convert table names to lower case. That's the preferred operating procedure. If you log your queries you'll see hibernate may be or may not be quoting your table name (I'd guess it isn't).

[Hibernate saving User model to Postgres](https://stackoverflow.com/questions/3608420/hibernate-saving-user-model-to-postgres/3611916#3611916)

Honestly, if you're running on Postgres you really should either configure hibernate properly, or, as I would look at it, normalize your database as tables shouldn't have a namespace collision (thus removing the problem).

//From the article...

```
@Entity
@Table(name="\"User\"")
public class User {
    ...
} 
```

**EDITED 07/31/12:**

This change must be done to the fields of the tables in the following way:

For `@Column`, change the name of the column adding escaped ":

```
@Column(name = "\"C_MODEL\"") 
```

For `@JoinColumn`, change the name of the column adding `:

```
@JoinColumn(name = "`TP_MODEL`") 
```

You will have to do it manually on the columns giving you errors.

# mongodb - 你如何限制 Mongo 中的数组子元素？

> ID：11595603
> 
> 赞同：11
> 
> 时间：2012-07-21T20:27:49.840
> 
> 标签：mongodb, pymongo

假设我在 Mongo 中有以下数据模型：

```
{
   _id: ...,
   name: "...",
   obj: {...},
   list: [ ... ],
} 
```

现在假设，我的`list`数组很长，我不想每次都抓取整个文档。所以我想得到`obj`and `name`，但只抓住最后 5 个元素`list`。你如何用 Mongo 做到这一点？我正在使用 pymongo。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-21T20:40:44.450

我认为您正在寻找`$slice`运营商。文档在[这里](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields#RetrievingaSubsetofFields-RetrievingaSubrangeofArrayElements)。

您正在寻找的语法是这样的：

```
db.coll.find({}, {obj:1, name: 1, list:{$slice: -5}}); // last 5 
```

请注意，这也将`_id`默认返回该字段。如果不想在前面`_id`加上。这是 JS 语法，但 python 语法会非常接近。`_id:0``obj:1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-26T08:22:06.330

使用**$slice**运算符限制数组元素

```
GeoLocation.find({},{name: 1, geolocation:{$slice: -5}})
    .then((result) => {
      res.json(result);
    })
    .catch((err) => {
      res.status(500).json({ success: false, msg: `Something went wrong. ${err}` });
}); 
```

其中地理位置是数据数组，从中我们得到最后 5 条记录。

# gnuplot - gnuplot - 误差线和拟合原始数据的计算

> ID：11595604
> 
> 赞同：1
> 
> 时间：2012-07-21T20:27:56.370
> 
> 标签：gnuplot, gaussian, propagation

如果我有这样的 data.txt 文件，gnuplot 会做什么：

```
#x  y  dx  dy
 1  2  0.2 0.1 
 3  5  0.1 0.3 
```

其中 dx 和 dy 是与 x 和 y (x +- dx, y +- dy) 直接相关的误差。我这样做：

```
plot data.txt using (1/$1):($2*5):3:4 with xyerrorbars 
```

gnuplot 会为 x 和 y 执行此操作吗

```
(1/x) +- dx
5y +- dy 
```

或者那个

```
1/(x +- dx)
5(y +- dy) 
```

或者那个

```
1/x +- 1/dx 
```

或者说，从 sqrt(sum(derivative times the error)^2) 得到的正确的高斯误差传播

```
1/x -+ dx/x^2 
```

以及如何适应这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:09:57.030

Gnuplot 肯定会做第一个选项 `(1/x) +- dx`。至于配件，你必须更具体一点......

# objective-c - 我有没有办法将这 3 种方法组合成 1 种？

> ID：11595605
> 
> 赞同：2
> 
> 时间：2012-07-21T20:28:03.987
> 
> 标签：objective-c, encapsulation

基本上，我有 3 个委托方法，它们具有几乎完全相同的代码，除了每个方法和参数中的 1 行。我意识到我可以封装很多代码以在每个方法中制作 3 或 4 行代码，但我想知道是否有一种方法可以只创建 1 个方法。

此外，被调用`tempData`的方法与下面的委托方法具有相同的方法名称，但它们实际上是不同的方法。

```
- (void)addElement:(NSString *)currentElement FromKeyboard:(NSString *)name {

    UIView *tempView; 
    NSMutableArray *tempViewList;
    EquationData *tempData;    

    if ([name isEqualToString:@"leftEqCellKeyboard"]) {
        tempData = leftData;
        tempViewList = leftEqViewList;
        tempView = equationCell.leftView;
    }

    if ([name isEqualToString:@"rightEqCellKeyboard"]) {
        tempData = rightData;
        tempViewList = rightEqViewList;
        tempView = equationCell.rightView;
    }

    [tempData addElement:currentElement]; // different

    if ([tempViewList count] != 0) 
        [self clearViewsStoredIn:tempViewList];
    [self setUpView:tempView fromArray:tempData.equation toArray:tempViewList];
}

- (void)changeState:(NSString *)stateName FromKeyboard:(NSString *)name {

   UIView *tempView; 
    NSMutableArray *tempViewList;
    EquationData *tempData;    

 if ([name isEqualToString:@"leftEqCellKeyboard"]) {
        tempData = leftData;
        tempViewList = leftEqViewList;
        tempView = equationCell.leftView;
    }

    if ([name isEqualToString:@"rightEqCellKeyboard"]) {
        tempData = rightData;
        tempViewList = rightEqViewList;
        tempView = equationCell.rightView;
    }

    [tempData changeState:stateName]; // different

    if ([tempViewList count] != 0) 
        [self clearViewsStoredIn:tempViewList];

       [self setUpView:tempView fromArray:tempData.equation toArray:tempViewList];

}

- (void)changeCharge:(NSString *)chargeIncrease FromKeyboard:(NSString *)name {

    UIView *tempView;
    NSMutableArray *tempViewList;
    EquationData *tempData;   

if ([name isEqualToString:@"leftEqCellKeyboard"]) {
        tempData = leftData;
        tempViewList = leftEqViewList;
        tempView = equationCell.leftView;
    }

    if ([name isEqualToString:@"rightEqCellKeyboard"]) {
        tempData = rightData;
        tempViewList = rightEqViewList;
        tempView = equationCell.rightView;
    }  
    [tempData changeCharge:chargeIncrease]; // different

    if ([tempViewList count] != 0) 
        [self clearViewsStoredIn:tempViewList];

    [self setUpView:tempView fromArray:tempData.equation toArray:tempViewList];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:34:51.117

（也许你应该看看[http://codereview.stackexchange.com](http://codereview.stackexchange.com)）

“不同”部分始终为 形式`[tempData doSomethingOn:aString];`，因此您可以使用**选择器**“doSomethingOn:”进行参数化：

```
-(void)doSomethingOnString:(NSString*)parameter 
              withSelector:(SEL)selector
              fromKeyboard:(NSString*)name 
{
    // The common parts before

    [tempData performSelector:selector withObject:parameter];

    // The common parts after
}

-(void)addElement:(NSString *)currentElement FromKeyboard:(NSString *)name {
    [self doSomethingOnString:currentElement
                 withSelector:@selector(addElement:)
                 fromKeyboard:name];
}

// etc. 
```

也可以看看：

*   [`-performSelector:withObject:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/performSelector%3awithObject%3a)
*   [Objective-C 中的“选择器”概念](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocSelectors.html)

# c# - 使用 blob 名称搜索 blob

> ID：11595610
> 
> 赞同：0
> 
> 时间：2012-07-21T20:28:35.200
> 
> 标签：c#, azure, asp.net-mvc-4

`Blob`我们如何从`Container`使用名称中找出`Blob`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:56:18.183

你问怎么办`container.GetBlobReference(name)`？

# java - 程序停止后如何保持布尔值的特定值？

> ID：11595615
> 
> 赞同：0
> 
> 时间：2012-07-21T20:29:54.873
> 
> 标签：java, boolean

我创建了一个类变量如下

```
private boolean xyz = false; 
```

之后我调用一个方法来做一些事情，然后将布尔变量的值更改为`true`.

现在，当我下次重新运行代码时，布尔值不会保持为真，它会回到假。

即使我关闭我的程序然后稍后再次运行它，我也希望它保持真实。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T20:31:46.643

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:51:03.857

当您退出程序时，请使用以下命令将变量保存到您自己位置的文件中，最好是程序的本地目录。它被称为*序列化*。

```
try
      {
         FileOutputStream fileOut = new FileOutputStream("xyz.ser");//this saves to the directory where your program runs in
         ObjectOutputStream out = new ObjectOutputStream(fileOut);
         out.writeObject(xyz);
         out.close();
          fileOut.close();
      }catch(IOException i)
      {
          i.printStackTrace();
      } 
```

然后，当你启动你的程序时，你可以用下面的代码读回它。这称为*反序列化*。

```
try
         {
            FileInputStream fileIn = new FileInputStream("xyz.ser");
            ObjectInputStream in = new ObjectInputStream(fileIn);
            xyz = (boolean) in.readObject();
            in.close();
            fileIn.close();
        }catch(IOException i)
        {// you are here if xyz.ser does not exist
            i.printStackTrace();
            return;
        } 
```

您可能还想检查该文件是否是以前创建的，否则，您将捕获 IOException。您可以通过创建一个文件名为 xyz.ser 的 File 对象并在其上调用 exists() 来实现。

# github - 从 github 存储库更新我的网站

> ID：11595616
> 
> 赞同：3
> 
> 时间：2012-07-21T20:30:06.140
> 
> 标签：github

我使用网站进行测试。我测试的部分内容是 GitHub 上的公共存储库。我想做的是让我的站点定期检查存储库并将任何更改拉到我站点中的文件夹中。

我正在使用 LAMP 服务器，是否有一些 php 和 cronjob 可用于检查并从存储库中获取文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:38:27.947

我会使用Github 允许的[webhooks 。](https://help.github.com/articles/post-receive-hooks/)如果 Github 存储库更新，请参阅此处以执行自动拉取的[简单 PHP 示例。](https://gist.github.com/619858)

# ios - iOS 模型层通知控制器对象

> ID：11595617
> 
> 赞同：6
> 
> 时间：2012-07-21T20:30:07.307
> 
> 标签：ios, xcode, model-view-controller

[https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)

在上面的链接中，我看到了关于模型层应该如何与 ViewController 通信的以下内容。

“当模型对象发生变化时（例如，通过网络连接接收到新数据），它会通知控制器对象，控制器对象会更新相应的视图对象。”

**我的问题是，模型对象如何通知 Controller 对象？**有哪些不同的方法可以做到这一点？我的模型层获取用户的位置，然后调用 Web 服务。下载该数据时，我应该如何通知控制器对象？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T20:33:49.230

有几种方法可以做到这一点，具体取决于您的具体情况。通常，您会使用协议/委托实现、键值观察或通知。[这里](http://blog.shinetech.com/2011/06/14/delegation-notification-and-observation/)有一个很好的概述。

**编辑：**

认为我应该添加，正如对该答案的评论所述：使用回调块也是一个非常可靠的选择，具体取决于您的需要。关于哪种解决方案最适合什么情况，有很多可能的决定因素，但这里是我遵循的一般大纲。

如果您保证一次只需要一个观察者：我通常使用块或委托。我个人的偏好是，如果只有一两个回调，我会使用块，因为这是它们的亮点，但如果有多个可能的方法，我会使用委托协议。

如果您可能需要多个观察者，我会通过`NSNotificationCenter`.

当我只需要观察实例上的特定属性而不是事件时，我会使用 Key-Value-Observing。

# r - 神经网络中的额外权重值（R 包的 nnet）

> ID：11595621
> 
> 赞同：3
> 
> 时间：2012-07-21T20:30:37.900
> 
> 标签：r, neural-network

我正在尝试在 Excel 中使用一些简单的输入数据对 nnet 包的工作方式进行逆向工程。这是我采取的步骤

1.  导入虚拟数据：`test <- read.csv('dataScaled.csv',header=TRUE,sep = ",")`

2.  训练网络： `anntrain <- nnet(Price ~ Sqft + Bedrooms + Bathrooms,test[1:650,],size=2, maxit=5000,linout=TRUE)`

3.  获取 ANN 的权重： `anntrain$wts` 输出：

    [1] -2.12443010 6.68900321 0.85338018 -0.73329823 -3.95336239 7.91917321 [7] -5.38893137 4.05941771 -0.02062346 0.26584364 0.32881053

4.  获取训练网络的拟合值： `anntrain$fitted.values` 这将输出我认为是训练网络对我在上面训练的 650 笔交易中的每笔交易的缩放价格预测。

5.  通过使用 sigmoid 函数使用上述权重重新计算来证明拟合值。

我的困惑是它输出 11 个重量值。如果我只有 3 个输入、2 个隐藏节点和 1 个输出，那不应该等于只有 8 个权重吗？3个额外的重量是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:49:05.210

每一层都有偏差（[为什么使用偏差/阈值？](ftp://ftp.sas.com/pub/neural/FAQ2.html#A_bias)）。偏差就像一个总是给你输入 1 的节点。因此你有 (3+1)*2+(2+1)*1 = 11 个权重。

# c++ - 将类的成员函数传递给回调函数？

> ID：11595622
> 
> 赞同：0
> 
> 时间：2012-07-21T20:30:43.407
> 
> 标签：c++, templates, wrapper

我有这个模板：

```
template <class T>
v8::Handle<v8::Value> jsFunctionTemplate(const v8::Arguments &args)
{
    T *t = static_cast<T*>(args.This()->GetPointerFromInternalField(0));
    if (t != NULL) t->volume(args[0]->NumberValue());
    return args.This();
} 
```

我想让它 100% 动态化，所以我希望`t->volume`用指针替换（std::mem_fn？）。问题是，我无法从类似的示例/问题中弄清楚如何保留 jsFunctionTemplate 的当前类型（它必须是 a `v8::InvocationCallback`）

```
typedef Handle<Value> (*InvocationCallback)(const Arguments& args); 
```

所以它的用法仍然可以是：

```
audio->PrototypeTemplate()->Set("Volume", v8::FunctionTemplate::New(&jsFunctionTemplate<Audio>)); 
```

我什至不反对使用 C++11 语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T23:15:43.400

我并没有声称完全理解 v8 API 在这里施加的限制，但是如果类型的模板参数没问题，那么我希望你可以使用**指向成员的模板参数**来实现你想要在这里实现的目标. 以下独立且经过测试的示例，虽然没有 v8，但应该演示如何做到这一点：

```
#include <iostream>

struct foo {
  void bar(int arg) {
    std::cout << "bar(" << arg << ") called" << std::endl;
  }
};

template<class T, void (T::*fun)(int)>
void ptfWrapup(void* ptr, int arg) {
  (static_cast<T*>(ptr)->*fun)(arg);
}

int main() {
  foo f;
  ptfWrapup<foo, &foo::bar>(&f, 42);
} 
```

应用于您的情况，并假设`NumberType`是该`NumberValue`调用的返回值，或者更重要的是您要调用的函数的第一个参数的类型，它看起来像这样：

```
template <class T, void (T::*fun)(NumberType)>
v8::Handle<v8::Value> jsFunctionTemplate(const v8::Arguments &args)
{
    T *t = static_cast<T*>(args.This()->GetPointerFromInternalField(0));
    if (t != NULL) (t->*fun)(args[0]->NumberValue());
    return args.This();
}

… v8::FunctionTemplate::New(&jsFunctionTemplate<Audio, &Audio::volume>) … 
```

与上面的示例相比，这里未经测试，但另一方面更接近您的代码。我希望，他们应该一起使这个想法一清二楚。

# c++ - 细绳 与字符串

> ID：11595624
> 
> 赞同：-1
> 
> 时间：2012-07-21T20:30:52.927
> 
> 标签：c++, string, performance

我有一个关于“普通”C++ 字符串和无符号字符串之间区别的问题。在生成一些 chars 和`unsigned char`s 的伪随机字符串时，我注意到代码构建普通字符串所需的时间和由`unsigned char`s 组成的字符串之间存在巨大的性能差异。

我使用的代码：

```
#include <tr1/random>
#include <string>

using namespace std;
using namespace tr1;

typedef basic_string<unsigned char > ustring;

string generateString(){
    string retStr;
    char a;

    for(unsigned int i = 0; i < 1000; i++){             
        a = rand();
        retStr+=a;            
    }
    return retStr;
}

ustring generateUString(){
    ustring retStr;
    unsigned char a;

    for(unsigned int i = 0; i < 1000; i++){
        a = rand();
        retStr+=a;
    }
    return retStr;
}

int main(int argc, char* args[]){

    srand(0);

    string thing;
    ustring uthing;

    for(unsigned int i = 1; i< 100000; i++){ 
        //thing = generateString(); // this needs 2 second to execute
        uthing = generateUString(); //  and this 13

    }

    return 0;
} 
```

所以基本上，代码执行 100 000 次需要 2 秒`generateString()`，而执行 100 000 次需要 13 秒`generateUString()`。

这究竟是什么原因？我猜是`+=`操作员，因为当我切割相应的行时差异消失了（实际上，`generateUstring()`我猜当时似乎更快，因为在这种情况下模算术更容易）。

`unsigned char`但是，为什么将 char 附加到字符串比将 a 附加到`unsigned char`s字符串要快得多呢？因此，我应该避免使用`unsigned char`s 字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:36:10.837

原因可能`basic_string<char>`是显式实例化，`libstdc++.so`其中（默认情况下）使用`-O2`. 因此，如果您不使用优化编译程序，则 `basic_string<unsigned char>`操作将未优化，但所有`basic_string<char>`未内联的操作都将使用`libstdc++.so`.

# c - 警告不兼容的指针，为什么会发生这种情况？

> ID：11595627
> 
> 赞同：3
> 
> 时间：2012-07-21T20:31:28.933
> 
> 标签：c

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T20:34:18.623

你需要改变

```
typedef struct { 
```

至

```
typedef struct Cell { 
```

定义了一个无`typedef struct { /* ... */ } Cell;`标签结构。实际上，结构本身没有可以直接引用的名称。该名称`Cell`只是`typedef`引用此未命名结构的 a 的名称。

当您使用`struct Cell`to declare`next`时，它​​表示“名为 的结构`Cell`”。但是，没有一个名为 的结构`Cell`，因为您定义的结构没有名称。

通过命名结构（给它一个标签），您可以使用`struct Cell`符号来引用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T20:34:26.247

您需要为您的 提供标签`struct`，而不仅仅是 typedef：

```
typedef struct Cell {
    element_type e;
    struct Cell *next; 
} Cell,*List; 
```

如果没有标签，`struct Cell *`则未定义，导致错误。

理解这个 typedef 的结构非常有帮助：它是两个声明的组合：

```
struct Cell {
    element_type e;
    struct Cell *next; 
}; 
```

和

```
typedef struct Cell Cell; 
```

没有标签，你就是`typedef`一个无标签的`struct`。

# c# - 动态 ASP.net MVC 路由

> ID：11595635
> 
> 赞同：1
> 
> 时间：2012-07-21T20:33:00.617
> 
> 标签：c#, asp.net, asp.net-mvc

我需要一些动态路由。所以我的路线看起来像这样：

```
{UserName}
{UserName}/Edit/{id}
{UserName}/Delete/{id} 
```

用户将被路由到用户控制器的位置。但我仍然想维护到控件的路线，例如：

```
{Controller}/Edit/{id}
{Controller}/Delete/{id} 
```

所以基本上我希望它指向物理控制器，比如称为 OrdersController 进行编辑删除，但如果有人导航到 /jdoe/，它会将其发送到用户控制器。

我如何在我的路线中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:43:21.493

您需要创建多条路线，并将它们保持在适当的顺序

```
// one route for Users
routes.MapRoute("Users",
     "{username}/{action}/{id}",
     new { controller = "Users", action = "Index", username = string.Empty, id = UrlParameter.Optional },
     new { id = @"\d+" }
);
// one route for everything else
routes.MapRoute("Default",
     "{controller}/{action}/{id}",
     new { controller = "Home", action = "Index", id = UrlParameter.Optional},
     new { id = @"\d+" }
); 
```

它不像上面“真的”那么容易，但这就是它的要点。您还需要添加一个[RouteConstraint](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Custom-route-constraint-to-validate-against-a-list.aspx)来验证用户名。

最后，如果您使用的是用户名参数，那么为什么需要 id？只是一个想法。

* * *

另外：
如果您查看 StackOverflow 上的用户部分，您会看到路由看起来更像这样。

*   用户/{id}/{用户名}
*   用户/{id}/编辑
*   用户/{id}/删除

我个人会说要实现的工作要少得多……但是，这只是我。

# mysql - 另一个复杂的 SQL 查询

> ID：11595636
> 
> 赞同：-2
> 
> 时间：2012-07-21T20:33:08.993
> 
> 标签：mysql, sql

再次修订：

```
SELECT x.Imaging, x.Indication FROM medicalimaging x 
 WHERE MCGID = '1036' 
and x.Indication not in (
select Indication FROM invoicefields a join invoices b on a.InvoiceNumber = b.InvoiceNumber WHERE a.PatientID = '10120003' and x.MCGID = b.StudyID and x.Imaging = a.TypeOfExam
)
Order By Imaging ASC, Indication ASC 
```

谢谢大家的回答，我做了一些研究，这就是我想出来的。

```
SELECT x.Imaging, x.Indication
FROM medicalimaging x
WHERE MCGID =  'McG 1032'
AND x.Indication NOT 
IN (

SELECT Indication
FROM invoicefields a
JOIN invoices b ON a.InvoiceNumber = b.InvoiceNumber
WHERE a.PatientID =  '10120003'
AND x.MCGID = b.StudyID
) 
```

我试图弄清楚已经开具发票的内容并将其从列表中排除。这些是我的表、一些示例数据和查询结果。

```
Medical Imaging ( These are the fields to be used in the list)
id | MCGID | Imaging | Indication 
1    1032     Xray       Visit 1
2    1032     Xray       Visit 2
3    1032     Xray       Visit 3
4    1032     CT         Emergency
5    1045     Xray       Initial

invoice ( Generic Invoice Data)
InvoiceNumber | StudyID |     TypeInvoice       | void | 
     1            1032        Medical Imaging        0 
     2            1045        Medical Imaging        0
     3            1032        Medical Imaging        1
     4            1032        Medical Imaging        0 

Invoicefields ( The Rows of charges in the Invoice ) 
InvoiceNumber     |    PatientID   |    TypeofExam   | Indication 
1                   PT25        Xray            Visit 1   
1                   PT30        Xray            Visit 1   
2                   PT36        Xray            Initial
2                   PT25        Xray            Initial
4                   PT25        Xray            Visit 2   
4                   PT30        Xray            Visit 2   
4                   PT25        Xray            Visit 3   

After Query Results

Ex. 1 Provided  MCGID=1032  and PatientID=PT25.

Results:   CT , Emergency

Ex. 2 Provided  MCGID=1032  and PatientID=PT30.

Results:           Xray    ,    Visit 3         
                   CT       ,   Emergency 
```

所以，这是通用结构。作为参考，MCGID 与 StudyID 相同，而 Type of Exam 与 Imaging 相同。另外需要注意的是MCGID是唯一的，而PatientID是唯一的MCGID。这意味着 PatientID 可以重复用于另一个 MCGID。为了运行查询，我将为它提供 PatientID 和 MCGID。所以我的目标是创建一个潜在的成像和指示列表，这些列表未在 TypeofExam 和指示下的发票字段中列出。此外，如果 void=1，它也应该忽略发票编号。

编辑 ：

我了解基本的 sql 函数，我了解如何从多个表中提取数据，我只是不知道如何从多个表中交叉引用数据。问题是我必须交叉引用数据大约 3 次。所以这就是我现在的位置。

```
SELECT medicalimaging.Imaging,medicalimaging.Indication FROM medicalimaging WHERE MCGID='1032' 
```

我只是不确定如何告诉它从其他表中获取数据并将其与我将要提取的数据进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:51:45.087

这感觉很草率，但似乎有效。SQLFiddle[在这里](http://sqlfiddle.com/#!2/76df8/49/2 "http://sqlfiddle.com/#!2/76df8/49/2")。

```
set @Patient = 'PT25';
set @MCGID = 1032;
select distinct
  @Patient PatientID,
  m.id,
  m.MCGID,
  m.Imaging,
  m.Indication
from 
  MedicalImaging m
  inner join 
  (
    select
      i.StudyID,
      f.PatientID,
      f.TypeOfExam,
      f.Indication
    from 
      invoice i
      inner join InvoiceFields f 
        on i.InvoiceNumber = f.InvoiceNumber
    where 
      f.PatientID = @Patient
      and i.StudyID = @MCGID
  ) p
  on m.MCGID = p.StudyID
where not exists
  (
    select
      i.StudyID,
      f.PatientID,
      f.TypeOfExam,
      f.Indication
    from 
      invoice i
      inner join InvoiceFields f 
        on i.InvoiceNumber = f.InvoiceNumber
    where 
      f.PatientID = @Patient
      and i.StudyID = @MCGID
      and f.TypeOFExam = m.Imaging
      and f.Indication = m.Indication
  )
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T23:52:08.593

最简单的解决方案是使用存在来查找具有发票的成像数据并排除它们：

```
select *
 from MedicalImaging mi
 where mi.mcgid = 1032
   and not exists (select null
                     from Invoice i
                    inner join InvoiceFields f
                       on i.invoicenumber = f.invoicenumber
                    where i.studyid = mi.mcgid
                      and i.void = 0
                      and f.typeOfExam = mi.imaging
                      and f.Indication = mi.indication
                      and f.PatientID = 'PT30') 
```

我必须在这里发挥创造力。我添加`InvoiceFields.Indication = MedicalImaging.Indication`了能够缩小重复考试的范围。我不清楚这种模式背后的原因。也许您有关于患者的未公开表格，这些表格将解释您如何知道要为该查询提供哪个 PatientID 才能工作。

[这是 DEMO@Sql Fiddle](http://sqlfiddle.com/#!2/5bdac/7)。您可以在那里更改架构以提供更多信息，并返回链接。

# iphone - uitableview 重复图像

> ID：11595637
> 
> 赞同：2
> 
> 时间：2012-07-21T20:33:09.483
> 
> 标签：iphone, objective-c, uiimageview

我有显示酒店的表格视图，以及他们是否喜欢。如果宿舍是最喜欢的，在宿舍行附件视图中我放置了最喜欢的图像。但图像不仅仅出现在目标的宿舍。我随机放置在tableView的其他单元格中。这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectMake(0, 0, 320, 50) reuseIdentifier:CellIdentifier] autorelease];
}

// Set up the cell...
        //First get the dictionary object
        NSDictionary *dictionary = [listOfItems objectAtIndex:indexPath.section];
        NSArray *array = [dictionary objectForKey:@"Countries"];
        NSString *cellValue = [array objectAtIndex:indexPath.row];
        cell.textLabel.text = cellValue;

        if (![favorites count] == 0) {
            if ([favorites containsObject:[array objectAtIndex:indexPath.row]]) {
                NSUInteger indexx = [favorites indexOfObject:cellValue];
                if ([[favorites objectAtIndex:indexx] isEqual:cellValue]) {

                    // here is the image view

                    UIImageView *imageView = [[UIImageView alloc] init];
                    [imageView setImage:[UIImage imageNamed:@"small_ItsMyFavorite.png"]];
                    imageView.frame = CGRectMake(276, 0, 50, 50);
                    [cell addSubview:imageView];
                    [imageView release];
                }
            }

        }
    }
}

return cell;
} 
```

我正在搜索和搜索，有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T20:51:31.980

由于 UITableView 正在重用单元格，因此您的设计存在一些问题。

您将 UIImageView 添加到单元格，即使它被重用，所以例如当您有 50 行并且您一直向下滚动时，每次重用一个单元格时，您都在向单元格添加一个 UIImageView。所以刷新内存。

最好将 UITableViewCell 子类化，在其中添加 UIImageView。不要忘记覆盖 prepareForReuse 方法，您可以在其中将 UIImageView 的图像设置为 nil

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T20:43:08.180

由于`UITableViewCell`对象是回收的，因此您需要添加一个`else`分支以在不喜欢宿舍时清除图像。正如您目前拥有的那样，曾经用于显示收藏夹的单元格将永远包含图像。

```
if ([[favorites objectAtIndex:indexx] isEqual:cellValue]) {
    // here is the image view
    UIImageView *imageView = [[UIImageView alloc] init];
    [imageView setImage:[UIImage imageNamed:@"small_ItsMyFavorite.png"]];
    imageView.frame = CGRectMake(276, 0, 50, 50);
    [cell addSubview:imageView];
    [imageView release];
} else {
    // Find the UIImageView in the subviews of your cell,
    // and remove it from superview.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T23:29:50.567

你必须做这样的事情

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
cell = [[[UITableViewCell alloc] initWithFrame:CGRectMake(0, 0, 320, 50) reuseIdentifier:CellIdentifier] autorelease];
}
else 
{
    [[cell.contentView viewWithTag:999] removeFromSuperView];
}

// Set up the cell...
    //First get the dictionary object
    NSDictionary *dictionary = [listOfItems objectAtIndex:indexPath.section];
    NSArray *array = [dictionary objectForKey:@"Countries"];
    NSString *cellValue = [array objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;

    if (![favorites count] == 0) {
        if ([favorites containsObject:[array objectAtIndex:indexPath.row]]) {
            NSUInteger indexx = [favorites indexOfObject:cellValue];
            if ([[favorites objectAtIndex:indexx] isEqual:cellValue]) {

                // here is the image view

                UIImageView *imageView = [[UIImageView alloc] init];
                [imageView setImage:[UIImage imageNamed:@"small_ItsMyFavorite.png"]];
                imageView.frame = CGRectMake(276, 0, 50, 50);
                imageView.tag = 999; // for example 
                [cell addSubview:imageView];
                [imageView release];
            }
        }

    }
}
}

return cell;

} 
```

# android - AlertDialog中的Android异步任务不起作用

> ID：11595639
> 
> 赞同：0
> 
> 时间：2012-07-21T20:33:30.617
> 
> 标签：android, android-asynctask, android-alertdialog

我显示一个带有确定或取消的警报框。我想按 OK 执行异步任务。还没有完成异步并一直在努力解决它。我也不明白 asych 课程的去向。它是在正在执行的方法之外还是在它之外？当前代码如下：

```
 private abstract  class DoAsynchTask extends AsyncTask<Void,Void,Void> 
 {
  protected  void doInBackground()
  {
   Drawable drawable= getImage(imageSelect);     
   MakeWallPaper(drawable,1);
  }

  /* protected void onProgressUpdate(Integer... progress) 
  {
   setProgress(progress[0]);
  }*/

  protected void onPostExecute() 
  {
   Toast.makeText(getApplicationContext(), "Wallpaper Saved.",Toast.LENGTH_LONG).show();      
   AlertDialogProcessing=0;
  }
 }

 public void getWallpaper(final View v)
 {
  if(AlertDialogProcessing==0)
  {  
   final String title="Set Image to Wallpaper";
   final String message="Press OK to set as Wallpaper or CANCEL.\nWait after pushing OK.";
   final String ok="OK";
   final String cancel="CANCEL";
   final AlertDialog.Builder alertbox = new AlertDialog.Builder(this);
   alertbox.setCancelable(true);
   alertbox.setIcon(android.R.drawable.ic_dialog_alert);
   alertbox.setTitle(title);
   alertbox.setMessage(message);
   alertbox.setNegativeButton(cancel, null);
   final AlertDialog dlg = alertbox.create();

   alertbox.setPositiveButton(ok,new DialogInterface.OnClickListener()
   {  
     public void onClick(DialogInterface dlg, int which)
     {  
       DoAsynchTask.execute(null,null,null);  //<<<<Wrong
       dlg.dismiss();
       Vibrate(ClickVibrate); 
     } 
    });
    alertbox.setNegativeButton(cancel,new DialogInterface.OnClickListener(){ public  void onClick(DialogInterface arg0, int arg1){AlertDialogProcessing=0;                     
     Vibrate(ClickVibrate); } });
 alertbox.show();
    }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:41:16.643

由于您`doInBackground()`没有指定任何参数，因此您应该`DoAsynchTask.execute()`不带参数调用。

为什么你的类是抽象的？通常，AsyncTask 应该是启动它的 Activity 的内部类。因此，在活动中创建您的对话框，并在单击 OK 按钮时执行 AsyncTask，就像您一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T07:33:19.070

代码中有几个问题。

**1）**首先，编译器可能会给你这个消息：

> MyActivity.DoAsynchTask 类型必须实现继承的抽象方法 AsyncTask.doInBackground(Void...) MyActivity.java

如果您仔细查看错误消息，您会发现您定义的内容是这样的：

```
protected  void doInBackground() { 
```

这不是所需要的。尽管看起来很傻，但当您的`AsyncTask`子类`Void`作为泛型参数类型时，这意味着它`doInBackground()`必须看起来像这样：

```
protected Void doInBackground(Void... arg0) { 
```

编译器抱怨是因为你没有实现那个（确切的）方法。当您从一个`abstract`类继承并且未能实现其**所有**必需/抽象方法时，您也只能通过将子类标记为抽象来编译它。但是，这并不是你真正想要的。

因此，只需将您的代码更改为（`abstract`从您的课程中删除）：

```
private class DoAsynchTask extends AsyncTask<Void,Void,Void> 
```

和

```
protected Void doInBackground(Void... arg0) {
{
   Drawable drawable= getImage(imageSelect);     
   MakeWallPaper(drawable,1);
   return null;
} 
```

**2）**正如其他人指出的那样，第二个问题是您必须从以下内容开始您的任务：

```
new DoAsynchTask().execute(); 
```

不是

```
DoAsynchTask.execute(null,null,null); 
```

您的代码只有在`execute()`是 in 的`static`方法时才是正确的`AsyncTask`，而事实并非如此。为了调用非静态`execute()`方法，您首先需要一个类的`new`实例`DoAsynchTask`。最后，`null, null, null`参数列表也不是必须的，虽然我也不认为它会导致代码失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T14:21:08.077

//最终的工作副本-谢谢大家

```
public void getWallpaper(final View v)
{
 Vibrate(ClickVibrate); 

 final class SetWallPaperAsynchTask extends AsyncTask<Void,Void,Void> 
 {
  @Override
  protected  Void doInBackground(Void... arg0)
  {
   Drawable drawable= getImage(imageSelect);     
   MakeWallPaper(drawable,1);
   return null;
  }

 @Override
 protected void onPostExecute(Void result) 
 {Toast.makeText(getBaseContext(), "Wallpaper Saved.", Toast.LENGTH_LONG).show();     
  AlertDialogProcessing=0;
 }
}

if(AlertDialogProcessing==0)
{    
 ProgressDialog progress;  
 final String title="Set Image to Wallpaper";
 final String message="Press OK to set as Wallpaper or CANCEL.";
 final String ok="OK";
 final String cancel="CANCEL";

 final AlertDialog.Builder alertbox = new AlertDialog.Builder(this);
 alertbox.setCancelable(true);
 alertbox.setIcon(android.R.drawable.ic_dialog_alert);
 alertbox.setTitle(title);
 alertbox.setMessage(message);
 alertbox.setNegativeButton(cancel, null);
 final AlertDialog dlg = alertbox.create();

 alertbox.setPositiveButton(ok,new DialogInterface.OnClickListener()
 {  
  public void onClick(DialogInterface arg0, int arg1)
  {  
   new SetWallPaperAsynchTask().execute();
   dlg.dismiss();
   Vibrate(ClickVibrate); 
  } 
  });
  alertbox.setNegativeButton(cancel,new DialogInterface.OnClickListener(){ public void  onClick(DialogInterface arg0, int arg1){AlertDialogProcessing=0; Vibrate(ClickVibrate); }   });
  alertbox.show();
  }
 } 
```

# java - 用“|”分割字符串

> ID：11595646
> 
> 赞同：1
> 
> 时间：2012-07-21T20:34:25.947
> 
> 标签：java, data-structures

我在 txt 文件中有一些数据，就像这种形式

> | item_id | 频道 | 排名 | 头| 身体 | 来源 | 时间戳 | 链接_1_id | link_1_manual/auto | 链接_1_名称/标题 | 链接_2_id | link_2_manual/auto | 链接_2_名称/标题 | ... |

我需要在管道字符处拆分它。但是，如果我这样做：

```
String[] cols = line.split("|"); 
```

它将按每个字符拆分数据，这不是我想要的。我需要做什么才能用“|”分割？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T20:35:12.327

采用

```
line.split("\\|"); 
```

拆分模式被解释为正则表达式，并且`|`在正则表达式中具有特殊含义——它不仅仅被解释为字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:37:11.977

**1.** “|” 在正则表达式中有特殊含义。

**2.** 所以在“|”之前使用“\” 去掉它的特殊含义。

**例子：**

`String[] cols = line.split("\\|");`

# c# - XPath 解析给了我一个错误

> ID：11595648
> 
> 赞同：0
> 
> 时间：2012-07-21T20:34:29.240
> 
> 标签：c#, .net, html-agility-pack

我正在尝试从[该](http://leagueoflegends.wikia.com/wiki/Akali)站点获取第一张图片，但我不断收到错误消息，无法完全弄清楚为什么..

这是代码：

```
string pictureurl = webdoc.DocumentNode.SelectSingleNode("//div[2]/table[1]/tr/td/a").Attributes["href"].Value; 
```

错误是`Object reference not set to an instance of an object.`

谁能告诉我为什么？如果我删除上面的行它工作正常..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:45:50.400

使用`//div[2]/table[1]/tbody/tr/td/a`. 根据配置设置 HtmlAgilityPack 插入一个 tbody 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T20:46:40.887

您的 xpath 不正确，无法获取 img

请使用这种方式

```
string pictureurl = 
webdoc.DocumentNode
.SelectSingleNode("//div[2]/table[1]/tr/td/a/img")
.Attributes["src"].Value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T20:47:19.550

通过调试器仔细检查以下内容实际上返回了一些东西......

```
webdoc.DocumentNode.SelectSingleNode("//div[2]/table[1]/tr/td/a"); 
```

我的猜测不是，而是使用以下（注意额外的`tbody`）..

```
webdoc.DocumentNode.SelectSingleNode("//div[2]/table[1]/tbody/tr/td/a"); 
```

# python - 为什么这个算法对于不是 2 的幂的整数会失败？

> ID：11595651
> 
> 赞同：1
> 
> 时间：2012-07-21T20:35:01.067
> 
> 标签：python, algorithm, python-3.x

基于[这个答案](https://stackoverflow.com/a/1804399/869912)，我在**Python 3.x**中实现了一个简单的算法来确定一个整数`n`是否是另一个整数的幂`base`。但是，该算法不会返回正确的结果。链接答案中的代码是：

```
while (n % 3 == 0) {
    n /= 3;
}
return n == 1; 
```

（[评论](https://stackoverflow.com/questions/1804311/how-to-check-if-an-integer-is-power-of-3#comment1692859_1804399)表明检查`n == 0`也是必要的，逻辑上）。这是我的代码：

```
def is_power(n: int, base: int) -> bool:
    if n == 0:
        return false
    while (n % base == 0):
        n /= base
    return n == 1 
```

我编写了简单的测试代码来测试一定范围的基数和指数，但它返回的结果是不正确的。测试代码：

```
for base in range(3, 10):
    print("Base: {0}".format(base))
    for exp in range(30, 40):
        b = is_power(pow(base, exp), base)
        if not(b):
            print("{: <3}: {: <5}".format(exp, str(b))) 
```

我用更大的范围测试了这个，但为了输出，我在这个例子中限制了它。这输出：

```
Base: 3
35 : False
36 : False
37 : False
38 : False
39 : False
Base: 4
Base: 5
30 : False
31 : False
32 : False
33 : False
34 : False
35 : False
36 : False
37 : False
38 : False
39 : False
Base: 6
35 : False
36 : False
37 : False
38 : False
39 : False
Base: 7
30 : False
31 : False
32 : False
33 : False
34 : False
35 : False
36 : False
37 : False
38 : False
39 : False
Base: 8
Base: 9
30 : False
31 : False
32 : False
33 : False
34 : False
35 : False
36 : False
37 : False
38 : False
39 : False 
```

这显然是不正确的。我试过调试一个小例子，在哪里`n = pow(3, 35)`并在循环中`base = 3`产生这些值：`n`

```
50031545098999707
1.6677181699666568e+16 
```

循环结束，因为 50031545098999707 / 3 == 1.667718169966656 **9** e+16 （注意最后一位不同）。这是问题吗？Python的计算失败了吗？如果不是，这个算法有什么问题？

如果我改用该算法，该算法也会失败得更多`math.pow`，但我并不一定对此感到惊讶，因为检查一个示例证明了这一点`pow`并且`math.pow`并不总是返回相同的值。

```
import math
pow(3, 35) == math.pow(3, 35) # 50031545098999707 != 5.0031545098999704e+16 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T20:40:32.710

由于您使用的是 Python 3，因此您应该使用

```
def is_power(n: int, base: int) -> bool:
    if n == 0:
        return false
    while (n % base == 0):
        n //= base
    #     ^^ note two slashes
    return n == 1 
```

在 Python 3.x 中，该`/`操作始终执行“实数除法”并返回一个*浮点数*，但在您链接到的算法中，它期望`/`进行整数除法，这是通过`//`("floor division")运算符。

正如您所料，测试失败的真正原因是浮点运算缺乏精度。`/`当返回一个无限精度的实数时，该算法仍然是正确的。以 3.0 ^(34)为例，

```
3.0 ** 34 == 16677181699666569
          == 0b111011001111111100111011110011000100000011001010001001 
```

默认的浮点格式只支持5个**3**位的精度，但是上面的数字需要5**个4**位来表示，所以我们要对最后一位（即1）进行四舍五入，导致

```
 0b111011001111111100111011110011000100000011001010001000
                                                                    ^
          == 16677181699666568 
```

其模数为 3 将返回 2，这将打破循环并返回 false。

（我还没有检查为什么它向下而不是向上取整，但即使它向上取整，模数仍然不为零，所以它仍然会返回 false。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T20:51:46.510

想想你的算法：你想做`/=`什么？

浮点除法？还是整数除法？您的问题显然使用了前者，但请手动尝试，看看它是否会起作用——您将继续除以`base`并得到非整数。

在 python 3 中，整数除法是`//`.

# javascript - 忽略共享导航栏导轨 3

> ID：11595661
> 
> 赞同：0
> 
> 时间：2012-07-21T20:37:13.580
> 
> 标签：javascript, css, ruby-on-rails-3

我正在为我当前的项目使用 Rails，并正在为 IE5-7 用户创建一个登录页面，说明我们目前不支持。（将努力完成这项工作）。

我对我的所有页面都使用了 _shared Navabr，但显然只想为登陆 IE 登陆页面隐藏它。有没有一种方法可以忽略这一页，无论是 CSS 还是 javascript。我已经尝试过使用 css 来显示：导航栏没有（它的 twitter 引导程序），但还没有任何乐趣

使用渲染选项我可以在控制器中做些什么吗？

任何人都遇到过这个

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:33:45.540

解决了这个。以为我会分享它

它布局/应用程序将其放在标题上方

```
 <% unless current_page?(:controller => 'public_pages', :action => 'internetex7')  %> 
```

然后放置

```
 <% end %> 
```

就在之前

```
 </ul> 
```

# android - 在 SQLite 中保存资源路径

> ID：11595665
> 
> 赞同：4
> 
> 时间：2012-07-21T20:38:15.350
> 
> 标签：android, sqlite, drawable

我需要将图像保存在 SQLite 数据库中的资源文件夹中。该数据库是预加载的（复制到数据/路径），因此在运行时不会填充。我试图将它保存在 SQLite 的文本字段中：“R.drawable.picture1”。

我的可绘制文件夹中有大约 300 张小尺寸图片（jpg）。当我运行查询当然光标返回特定字符串。现在我需要将它设置为 ImageView 上的 ImageResource，但无论我尝试什么，它似乎都不起作用。

我尝试将其解析为 int，但似乎不起作用。无论我尝试什么，logcat 都会告诉我 R.id.picture1 不是有效整数。前段时间我看到了一个可能的解决方案，但我已经搜索了一整天但似乎找不到它。

我不想要的：将图像转换为字节数组，以便我可以将其保存为 blob。我只需要一种方法来存储和检索可用于在 ImageView 上设置可绘制对象的可绘制引用。

我不是那么有经验，所以我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T21:45:19.560

如果您有资源的名称，您可以查找资源标识符并将其用于您的 ImageResource。

```
int resId = context.getResources().getIdentifier("picture1","drawable",context.getPackageName());
image.setImageResource(resId);; 
```

# openlayers - 获取 Openlayer 矢量特征与集群

> ID：11595666
> 
> 赞同：0
> 
> 时间：2012-07-21T20:38:24.763
> 
> 标签：openlayers

我正在使用带有集群策略的 openLayers Vector。当我使用 Vector.features 来获取作为列表返回的特征时，它返回一个集群数组而不是特征数组。这使得这些功能无法单独解决。有谁知道在使用聚类策略时如何获取功能列表？任何帮助表示赞赏。

（例如，如果我的 KML 中有 5 个特征被聚类为 1，那么我得到 vector.features.length=1。我需要长度为 5 的原始特征列表）

下面是我的 Vector 的实现：

```
var maps_layer = new OpenLayers.Layer.Vector("KML", {
                     strategies: [new OpenLayers.Strategy.Cluster()],
                     protocol: new OpenLayers.Protocol.HTTP({
                        url: "kml/maps.kml",
                        format: new OpenLayers.Format.KML({
                           extractStyles: true, 
                           extractAttributes: true,
                        })
                    })
                 })

 var my_array = maps_layer.features; //Here is the problem. 
```

这是文档：[http ://dev.openlayers.org/docs/files/OpenLayers/Layer/Vector-js.html](http://dev.openlayers.org/docs/files/OpenLayers/Layer/Vector-js.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:35:13.880

你*可以试一试，我现在还没有环境来测试它，但它应该可以工作。（注意：你*指的是搜索引擎用户..）

```
function getFeatures(maps_layer) {
    var features = new Array();
    for (var i = 0; i < maps_layer.features.length; i++) {
        if (maps_layer.features[i].cluster) {
            for (var j = 0; j < maps_layer.features[i].cluster.length; j++)
            features.push(maps_layer.features[i].cluster[j]);
        } else {
            features.push(maps_layer.features[i]);
        }

    }
} 
```

# c++ - Boost.Phoenix 本质上是否比等效的 C++11 lambda 慢（它是否使用虚拟调用、'volatile' 用法等）？

> ID：11595669
> 
> 赞同：6
> 
> 时间：2012-07-21T20:39:03.937
> 
> 标签：c++, visual-c++, boost, lambda, boost-phoenix

我一直认为 Boost.Phoenix 使用类型推断来静态推断一切，直到我尝试了这段代码：

```
#include <vector>
#include <boost/phoenix/phoenix.hpp>

using namespace boost::phoenix;
using namespace boost::phoenix::placeholders;

struct Foo { int x; };

int main()
{
    std::vector<int> bar;
    bind(&Foo::x, ref(bar)[_1])("invalid index");   // oops
    return 0;
} 
```

并收到警告：

> 警告 C4239：使用了非标准扩展：'argument'：从转换`const char [3]`为非`volatile const boost::proto::detail::anyns::any &`
> const 引用只能绑定到左值

这让我很惊讶。我没想到会在`any`任何地方看到，更不用说`volatile`！

这是否意味着 Boost.Phoenix 实际上本质上比其等效的 C++11 lambdas 慢（忽略我在这里使用的特定编译器）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:22:14.837

不是`Boost.Any`，它`any`来自`Boost.Proto`实现细节 - 请参阅`boost/proto/detail/decltype.hpp`。它的运行时开销为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:55:03.117

我希望 Boost.Phoenix 比等效的 C++11 lambda 慢。该`bind`函数获取稍后调用的函数的地址，因此编译器将比使用直接调用所需函数的 lambda 更难内联生成的函数调用。

我在这里指的开销是间接调用函数的开销，足够智能的编译器可以将其删除，但我不确定是否有任何编译器实际上为 Boost.Phoenix 执行此操作。

# javascript - Javascript e 未定义，无法对 mousedown 执行连续操作

> ID：11595676
> 
> 赞同：1
> 
> 时间：2012-07-21T20:40:07.353
> 
> 标签：javascript, javascript-events

这是我认为我需要描述这个问题的所有内容的代码片段。我正在尝试在激活 mousedown 时执行连续操作，但出现错误：

> Uncaught ReferenceError: e is not defined (匿名函数)

我很确定这个错误源于 beginAction 函数，我在引号中有 findClick(e) ，不知何故我认为 e 在这里没有正确传递。

```
function Cell(row, column) {
    this.row = row;
    this.column = column;
    }

function foo(bar) {
    //do stuff here
    gCanvas.addEventListener("mousedown", beginAction, false);
    document.addEventListener("mouseup", endAction, false);
    }

function beginAction(e) {
    findClick(e);
    var findClick_timeout = setInterval("findClick(e)", 50);
    }

function endAction(e) {
    if (typeof(findClick_timeout) != "undefined"){ clearTimeout(findClick_timeout);}
    }

function getCursorPosition(e) {
    //finds the cell position here... works
    var cell = new Cell(Math.floor(y/cellSize), Math.floor(x/cellSize));
    return cell;
    }

function findClick(e) { 
    var cell = getCursorPosition(e);
    //do stuff with the cell!!!!!!
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:43:56.993

计时器字符串被转换为**全局范围内的**函数。这就是为什么你不应该使用它们：

```
var findClick_timeout = setInterval(function() { findClick(e); }, 50); 
```

这样，那个小匿名函数将可以从创建它的“beginAction”函数访问“e”。但是，当您只传递一个字符串时，运行时会在全局范围内评估它，并且没有“e”在那里。

在较新的浏览器中，您可以使用一个名为“bind”的函数：

```
var findClick_timeout = setInterval(findClick.bind(this, e), 50); 
```

它只是一个工具，本质上是做匿名函数所做的事情。

# ember.js - 如何路由到相同的嵌套状态但具有不同的上下文？

> ID：11595681
> 
> 赞同：0
> 
> 时间：2012-07-21T20:40:41.660
> 
> 标签：ember.js, ember-old-router

我目前很难找到一个嵌套的工作路线，其中一个路径元素是动态的。这就是我想要实现的场景：

该页面包含项目的描述。页面内是一个选项卡菜单，用于选择不同的视图。这也应该反映在 URL 中。所以我想要不同的网址，例如：

```
url#/project1/info
url#/project1/status
url#/project1/... 
```

为了不重复`:project`参数，我添加了一个嵌套项目路由，它不是叶子，但只负责项目本身的序列化/反序列化。只要我使用初始项目，一切正常。但它可能发生，我想从一个项目链接到另一个项目。这意味着 URL 应该更改`url#/project1/info -> url#/project2/info`，因此视图也应该更改以显示有关 project2 的信息。

听起来很简单。但是，当我使用操作助手链接到 project2 时，不会调用项目路由的反序列化方法

```
<a {{action changeProject context="App.project2" href=true}}>Go to project 2</a> 
```

我想那是因为我已经处于信息状态。但是，我如何传播上下文更改？一个简化的案例你可以在小提琴[http://jsfiddle.net/jocsch/HYbZj/30/](http://jsfiddle.net/jocsch/HYbZj/30/)中找到或者直接查看[http://jsfiddle.net/jocsch/HYbZj/30/show/#/project1/info](http://jsfiddle.net/jocsch/HYbZj/30/show/#/project1/info)

```
Router: Ember.Router.extend({
    enableLogging: true,
    root: Ember.Route.extend({
        changeProject: Em.State.transitionTo('project.info'),                 
        index: Ember.Route.extend({
          route: '/',
         }),
         project: Ember.Route.extend({
           route: '/:project', 
           deserialize: function(router, params) {
              var proj = App.get(params['project']);
              router.get("applicationController").set("content", proj);
              return proj;
           },
           serialize: function(router, context) {
               return {project: context.id};
           },
           index: Ember.Route.extend({
              route: '/',
              redirectsTo: 'info'   
            }),                                    
            info: Ember.Route.extend({
              route: '/info',
              connectOutlets: function(router) {
                var ctrl = router.get('applicationController');
                ctrl.connectOutlet('project', ctrl.get('content'));
             }
         })
      })
   })
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T06:08:33.173

您不需要任何自定义序列化/反序列化。

您的代码中缺少的一件重要的事情是在 changeProject 处理程序中传递的上下文。

我会把整个事情写如下：

**JS**

```
App = Ember.Application.create();

App.Project = DS.Model.extend({
    name: DS.attr('string'),
    description: DS.attr('string')
});

App.Project.FIXTURES = [{
    id: '36',
    name: 'First project',
    description: 'My very first project'
}, {
    id: '42',
    name: 'Another project',
    description: 'My other favorite project'
}];

App.store = DS.Store.create({
    adapter: DS.fixtureAdapter,
    revision: 4
});

App.ApplicationController = Ember.Controller.extend();
App.ApplicationView = Ember.View.extend({
    templateName: 'app-view'
})

App.ProjectsController = Ember.ArrayController.extend();
App.ProjectsView = Ember.View.extend({
    templateName: 'projects-view'
})

App.ProjectController = Ember.ObjectController.extend();
App.ProjectView = Ember.View.extend({
    templateName: 'project-view'
})

App.InfoController = Ember.ObjectController.extend();
App.InfoView = Ember.View.extend({
    templateName: 'info-view'
})

App.Router = Ember.Router.extend({
    enableLogging: true,

    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/'
        }),

        showProjects: function(router) {
            router.transitionTo('projects.index');
        }, 

        projects: Ember.Route.extend({
            route: 'projects',

            connectOutlets: function(router) {
                var applicationController = router.get('applicationController');
                applicationController.connectOutlet({
                    outletName: 'projectsList',
                    name: 'projects',
                    context: App.Project.find()
                });
            },

            index: Ember.Route.extend({
                route: '/'
            }),

            showProject: function(router, event) {
                var project = event.context;
                router.transitionTo('project.info', project);
            },

            project: Ember.Route.extend({
                route: '/:project_id',
                modelClass: 'App.Project',

                connectOutlets: function(router, project) {
                    var applicationController = router.get('applicationController');
                    applicationController.connectOutlet('project', project);
                },

                info: Ember.Route.extend({
                    route: 'info',

                    connectOutlets: function(router) {
                        var projectController = router.get('projectController'),
                            project = projectController.get('content');
                        projectController.connectOutlet('info', project);
                    }
                })
            })
        })
    })
});

App.initialize(); 
```

**车把**

```
<script type="text/x-handlebars" data-template-name='app-view'>
    <h1>Welcome to projects app!</h1>
    <a {{action showProjects}}>Projects home</a>
    <hr/>
    {{outlet projectsList}}
    <hr/>
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name='projects-view'>
    {{controller.length}} projects:
    <ul>
    {{#each project in controller}}
        <li>
            <a {{action showProject context="project"}}>{{project.name}}</a>
        </li>
    {{/each}}
    </ul>
</script>

<script type="text/x-handlebars" data-template-name='project-view'>
    <h2>Showing project <i>{{name}}</i></h2>
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name='info-view'>
    {{description}}
</script> 
```

JSFiddle @ [http://jsfiddle.net/MikeAski/fRea6/](http://jsfiddle.net/MikeAski/fRea6/)

# asp.net-mvc - 访问控制服务和 Azure 网站无法加载 System.IdentityModel.Services

> ID：11595684
> 
> 赞同：1
> 
> 时间：2012-07-21T20:41:08.540
> 
> 标签：asp.net-mvc, azure, wif, acs

我在 Windows 8 发布预览版上使用 Visual Studio 2012 RC 创建了一个 ASP.NET MVC 4 应用程序。我下载并安装了 WIF 工具包，并使用解决方案菜单中的“身份和访问”选项来添加我的访问控制服务元数据端点。本地测试，一切正常。当我部署到我的免费天蓝色网站时，我得到黄色屏幕说

> “无法加载文件或程序集 'System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 或其依赖项之一。系统找不到指定的文件。”

这些程序集在项目中没有被引用，所以我添加了它们，发送到输出到 bin 文件夹并重新部署。然后我收到一条消息，说程序集可能被篡改了。有谁知道如何克服这个？

编辑添加本地会导致此错误

> 无法加载文件或程序集“System.IdentityModel.Services”或其依赖项之一。无法验证强名称签名。该程序集可能已被篡改，或者它被延迟签名但未使用正确的私钥完全签名。（来自 HRESULT 的异常：0x80131045）

在 web 配置中，模块被定义为

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules>
      <add name="WSFederationAuthenticationModule" type="System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
      <add name="SessionAuthenticationModule" type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
    </modules>
  </system.webServer> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:13:37.587

我认为这是 Azure 中的一个已知问题，您需要使用运行 gacutil.exe 的启动脚本来注册 IdentityModel.dll。

请按照此处的步骤操作：http: [//blogs.infosupport.com/adding-assemblies-to-the-gac-in-windows-azure/](http://blogs.infosupport.com/adding-assemblies-to-the-gac-in-windows-azure/)

**编辑：**
我的错，我以为你在谈论网络角色。正如 asaykov 所说，您不能在网站中进行启动任务。好吧，也许这会帮助其他人:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T22:17:00.340

因此，您需要将 Idendity 程序集显式添加为对 Web 应用项目的引用，然后将它们的“复制本地”属性显式设置为“真”，然后按照此[MSDN 论坛线程](http://social.msdn.microsoft.com/Forums/pl-PL/windowsazurewebsitespreview/thread/e7a67171-cab3-4373-9ac1-ed507758e7b5)并使用[此会话令牌处理程序](https://github.com/thinktecture/Thinktecture.IdentityModel.40/blob/master/IdentityModel/Thinktecture.IdentityModel/Web/MachineKeySessionSecurityTokenHandler.cs)。通读那篇[博文](http://leastprivilege.com/2012/07/12/machinekey-based-session-protection-for-wif/)。

按照所有步骤，您将拥有启用 WIF 的 ACS 消费应用程序，就像我刚刚在此处创建的应用程序一样：[http](http://wawsacs.azurewebsites.net/) ://wawsacs.azurewebsites.net/ （请注意，我将在 2012 年 7 月 25 日删除此网站）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T00:22:50.203

System.identityModel.Services 是一个[.NET Framework 4.5 命名空间](http://msdn.microsoft.com/en-us/library/hh568674%28v=vs.110%29.aspx)，没有 .NET Framework 4.0 版本。Windows Azure 网站不支持 .NET Framework 4.5。

# javascript - 如何在画布上实时使用多重混合模式？

> ID：11595694
> 
> 赞同：3
> 
> 时间：2012-07-21T20:42:54.287
> 
> 标签：javascript, html, canvas, webgl

**从 2016 年开始编辑：为**[globalCompositeOperation](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation)实现了“乘”值。性能对于实时图形来说绰绰有余。

* * *

本质上，我有两个画布（一个是用于绘图的不可见画布），我想使用多重混合模式将不可见画布混合到可见画布上。

`Context.globalCompositeOperation`不包括乘法（尽管我认为应该），并且使用`imageData`手动混合画布太慢（我需要能够以 60fps 的速度进行此操作）。

有什么更快的方法可以用来混合画布吗？我相信这可以使用**WebGL**来完成，但我没有使用它的经验。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T00:36:38.793

WebGL 的混合模式也不包括（源和目标的）乘法。但是，您可以使用 WebGL 的渲染到纹理功能有效地执行乘法运算：

1.  让您的可见画布成为 WebGL 画布。
2.  创建两个纹理；称它们为“源”和“目的地”。
3.  将您的不可见画布内容渲染到“源”纹理；这可以通过直接使用 WebGL 绘图操作（不使用额外的画布）或通过将 2D 不可见画布的内容上传到纹理来完成（这是一个内置操作）：

    ```
    var sourceTexture = gl.createTexture()
    gl.bindTexture(gl.TEXTURE_2D, sourceTexture)
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, sourceCanvas)
    // ...also set texture filters — see any WebGL tutorial... 
    ```

4.  渲染要与“目标”纹理相乘的其他内容。

5.  最后，针对实际可见的画布，使用片段着色器将“源”和“目标”纹理相乘。这里的技术是用于**后期处理效果**的技术——我建议查找[这样的教程](http://ssp.impulsetrain.com/porterduff.html)或简单的示例。简而言之，要将片段着色器应用于整个画布，您需要绘制一个覆盖整个视口**的全屏四边形几何体。**顶点着色器是微不足道的，片段着色器就像：

    ```
    varying vec2 texCoord;
    uniform sampler2D sourceTexture;
    uniform sampler2D destTexture;
    void main(void) {
      gl_FragColor = texture2D(sourceTexture, texCoord) * texture2D(destTexture, texCoord);
    } 
    ```

如果你想每帧做多个*重叠*的乘法混合，那么如果不超过 8 个，你可以扩展上面的过程来乘几个纹理；如果有很多，您将需要执行多个阶段，将两个纹理相乘，同时渲染到第三个，然后交换角色。

如果您想要更具体的答案，请扩展您的问题，并详细说明您要相乘的图形数量和类型。

# mongodb - Spring Data Mongodb Cross store:: MySQL @RelatedDocument(s) 未更新

> ID：11595695
> 
> 赞同：2
> 
> 时间：2012-07-21T20:42:57.343
> 
> 标签：mongodb, spring-data, spring-data-jpa, spring-data-document

我正在为 MySQL 使用 Spring Data Mongodb 和 Spring Data JPA 模块。

我已按照参考文档中的建议成功配置。尽管我能够成功更新 MYSQL 字段，但我能够保存但无法更新 mongodb“RelatedDocuments”。

实体关系就像

用户（Mysql）有地址（蒙戈）>有地址列表（与参考中的调查示例非常相似。

**我的情况与[http://forum.springsource.org/showthread.php?126897-Using-Spring-Data-with-MongoDB-and-MySQL完全相同](http://forum.springsource.org/showthread.php?126897-Using-Spring-Data-with-MongoDB-and-MySQL)**

我使用的版本如下

```
spring-data.mongodb.version = 1.1.0.M1
spring.version = 3.1.2.RELEASE
    spring.data.jpa.version = 1.1.0.RELEASE

hibernate.entitymanager.version = 4.1.4.Final
hibernate.jpa-api.version = 1.0.1.Final (using JPA 2.0)

    aspectj.version = 1.6.12 
```

请有人指出我可能缺少什么，配置文件如下

```
<!-- Activate Spring Data JPA repository support -->
<jpa:repositories base-package="com.domain.domain.*.repo" factory-class="com.mydomainit.domain.repo.BaseJpaRepositoryFactoryBean"/> 
```

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" p:persistenceXmlLocation="classpath*:META-INF/persistence.xml"
    p:persistenceUnitName="spring-jpa" p:dataSource-ref="dataSource" p:jpaVendorAdapter-ref="hibernateVendor" />

<bean id="hibernateVendor" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" p:showSql="true" p:generateDdl="false"
    p:database="MYSQL" />

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager" p:entityManagerFactory-ref="entityManagerFactory" />

<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager" /> 
```

MongoDB配置如下

```
<mongo:repositories base-package="com.domain.*.mongorepo" repository-impl-postfix="CustomImpl"
    factory-class="com.domain.mongorepo.CommonMongoRepoFactoryBean" />

<mongo:mongo id="mongoRef" host="${mongo.host.name}" port="${mongo.host.port}">
    <mongo:options connections-per-host="8" threads-allowed-to-block-for-connection-multiplier="4" connect-timeout="1000" max-wait-time="1500"
        auto-connect-retry="true" socket-keep-alive="true" socket-timeout="1500" slave-ok="true" write-number="${mongo.db.w}" write-timeout="${mongo.db.wtimeout}"
        write-fsync="${mongo.db.fsync}" />
</mongo:mongo>

<mongo:db-factory id="mongoDbFactory" dbname="${mongo.db.name}" username="${mongo.db.username}" password="${mongo.db.password}"
    mongo-ref="mongoRef" />

<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate" c:mongoDbFactory-ref="mongoDbFactory" c:mongoConverter-ref="mappingConverter" />

<bean class="org.springframework.data.mongodb.crossstore.MongoDocumentBacking" factory-method="aspectOf">
    <property name="changeSetPersister" ref="mongoChangeSetPersister" />
</bean>
<bean id="mongoChangeSetPersister" class="org.springframework.data.mongodb.crossstore.MongoChangeSetPersister">
    <property name="mongoTemplate" ref="mongoTemplate" />
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<bean class="org.springframework.data.mongodb.core.MongoExceptionTranslator" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T00:11:15.837

Internet 上的文档比较陈旧，配置比较困难；库之间存在许多依赖关系，并且一些 api 发生了变化。我设法使其工作如下。我希望它有帮助：

**pom.xml**

```
 <spring.version>3.2.0.RELEASE</spring.version>
    <querydsl.version>2.9.0</querydsl.version>
    <spring-data-jpa.version>1.2.0.RELEASE</spring-data-jpa.version>
    <mongodb.version>1.1.1.RELEASE</mongodb.version>

    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-mongodb</artifactId>
        <version>${mongodb.version}</version>
    </dependency>
    <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-mongodb</artifactId>
        <version>2.9.0</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-mongodb-cross-store</artifactId>
        <version>${mongodb.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>jcl-over-slf4j</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.7.0</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjtools</artifactId>
        <version>1.7.0</version>
    </dependency> 
```

**数据库上下文.xml**

```
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>
<mongo:mongo host="localhost" port="27017" />
<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg ref="mongo" />
    <constructor-arg name="databaseName" value="databasename" />
</bean>
<mongo:repositories base-package="com.yourcompany.repository.mongodb" />

<bean class="org.springframework.data.mongodb.core.MongoExceptionTranslator" />
<bean class="org.springframework.data.mongodb.crossstore.MongoDocumentBacking" factory-method="aspectOf">
    <property name="changeSetPersister" ref="mongoChangeSetPersister" />
</bean>
<bean id="mongoChangeSetPersister" class="org.springframework.data.mongodb.crossstore.MongoChangeSetPersister">
    <property name="mongoTemplate" ref="mongoTemplate" />
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

**产品对象（存储在 MySQL 中）**

```
@Entity
public class Product {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id; // MySQL + MongoDB
    private double value; // MySQL
    @RelatedDocument
    private ProductInfo info; // MongoDB
} 
```

**ProductInfo 对象（存储在 MongoDB 中）**

```
@Document
public class ProductInfo {
    @Id
    public ObjectId id;
    private String name;
    private String description;
} 
```

**产品存储库**

```
@Repository
public interface ProductRepository extends JpaRepository<Product, Long>{} 
```

**JUnit 测试**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = { TestApplicationContext.class })
@TestExecutionListeners({ TransactionalTestExecutionListener.class,
        DependencyInjectionTestExecutionListener.class })
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = false)
public class JournalMongoDBServiceIT  {
    @Resource
    ProductRepository productRepository;

    @Test
    @Transactional
    public void crossStoreProduct(){
        Product product = new Product();
        ProductInfo info = new ProductInfo();
        info.setName("Test");
        info.setDescription("Test Product");
        product.setInfo(info);
        productRepository.save(product);
    }

    @Test
    @Transactional
    public void crossStoreProductFindAndUpdate(){
        Product product = productRepository.findOne(32L);
        product.setValue(999L);
        product.getInfo().setDescription("Updated description");
        productRepository.save(product);
    }
} 
```

# mysql - 如何从 MySQL 中选择随机记录样本？

> ID：11595696
> 
> 赞同：2
> 
> 时间：2012-07-21T20:42:57.803
> 
> 标签：mysql, sql

考虑下表：

```
tweets
-----------------------
id  tweet         class
-----------------------
1   Foo bar baz!  2
2   Lorem ipsum   2
3   Foobar lorem  3
4   Activi set    1
5   Baz baz bar?  3
7   Dolor mez foo 3
8   Samet set bar 1 
```

实际上，该表有 600,000 条记录，但如示例表所示，一些`id`s 已被删除（因此最高`id`> 600,000）。 `class`可以是`1`,`2`或`3`.

我需要**随机选择**1200 条推文，每条推文 400 条`class`。这可能与一个查询有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T20:47:23.057

如果`class`(3) 的可能值数量有限，则可以通过一组`UNION`查询轻松完成，每个查询都有自己的`ORDER BY RAND()`and `LIMIT 400`：

```
(SELECT id, tweet, class FROM tweets WHERE class = 1 ORDER BY RAND() LIMIT 400)
UNION
(SELECT id, tweet, class FROM tweets WHERE class = 2 ORDER BY RAND() LIMIT 400)
UNION
(SELECT id, tweet, class FROM tweets WHERE class = 3 ORDER BY RAND() LIMIT 400) 
```

要`ORDER BY`应用于每个`UNION`组，组必须包含在 中`()`。

# matlab - 欧拉计划 4

> ID：11595697
> 
> 赞同：1
> 
> 时间：2012-07-21T20:43:02.470
> 
> 标签：matlab

我编写了以下代码并投入了大量时间。但是它本质上是错误的，如果有人可以指导我提高效率，我将无限感激。

它目前不产生任何输出。

```
% A palindromic number reads the same both ways.
% The largest palindrome made from the product of
% two 2-digit numbers is 9009 = 91  99.

% Find the largest palindrome made from the
% product of two 3-digit numbers.

% 1) Find palindromes below 999x999 (product of two 3 digit #s)
% 2) For each palindrome found, find the greatest Factors.
% 3) The first palindrome to have two 3 digit factors is the
%    Solution

%============== Variables ===============================
%
% number = a product of 2 3 digit numbers, less than 100x100\. The
% Palindrome we are looking for.
%
% n1, n2 = integers; possible factors of number.
%
% F1, F2 = two largest of factors of number. multiplied
% together they == number.
%
% finish = boolean variable, decides when the program terminates

% ================= Find Palindrome ================================

% The maximum product of two 3 digit numbers

number = 999*999;
finish = false;
count = 0;

while ( finish == false)

%
% Check to see if number is a Palindrome by comparing
% String versions of the number
%
% NOTE: comparing num2string vectors compares each element
% individually. ie, if both strings are identical, the output will be
% a vector of ONES whose size is equal to that of the two num2string
% vectors.
%
if ( mean(num2str( number ) == fliplr( num2str ( number ) ) ) == 1  )

    % fprintf(1, 'You have a palindrome %d', number);

    % Now find the greatest two factors of the discovered number ==========

    n1 = 100;
    n2 = 100; % temporary value to enter loop

    % While n2 has 3 digits in front of the decimal, continue
    % Searching for n1 and n2\. In this loop, n1 increases by one
    % each iteration, and so n2 decreases by some amount. When n2
    % is no longer within the 3 digit range, we stop searching
    while( 1 + floor( log10( n2 ) ) == 3 )

        n2 = number/n1;

        % If n2 is EXACTLY a 3 digit integer,
        % n1 and n2 are 3 digit factors of Palindrome 'number'
        if( 1 + log10( n2 )  == 3 )

            finish = true;

            Fact1 = n1;
            Fact2 = n2;

        else
            % increment n1 so as to check for all possible
            % 3 digit factors ( n1 = [100,999] )
            n1 = n1 + 1;

        end

    end

    % if number = n1*n2 is not a palindrome, we must decrease one of the
    % Factors of number and restart the search
else

    count = count + 1;

    number = 999 * (999 - count);

end

end

fprintf(1, 'The largest factors of the palindrome %i \n', number )
fprintf(1, ' are %i and %i', Fact1, Fact2 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:58:06.887

由于这是一个欧拉项目，我只会给出一些一般性的建议。

1.  要比较字符串，请使用 strcmp，而不是您的方法（它使代码更简洁）

2.  请参阅艾萨克的评论。添加`floor` *和*检查数字是否为整数的条件（log10 不这样做）

3.  即使你输入了那个 if 语句，你也永远不会真正退出它，因为 while 循环只是继续循环使用相同的两个数字。考虑通过修改你的while循环来终止while和那里。

4.  虽然您的解决方案提供了一个结果，但它不是正确的，因为根据您的代码，数字始终是 999 的倍数，这很可能是不正确的。改变你的构建方式`number`。您必须至少添加另一行定义数字才能这样做。您的解决方案是 90909。正确的解决方案接近 100000（至少这是我发现的最高值）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T22:40:54.787

条件：

```
if( 1 + log10( n2 )  == 3 ) 
```

仅当 时为真，并且当除法时`n2 == 100`​​看到 as`n2`仅是整数，您的循环可能永远不会完成。`n1``number``while`

# objective-c - CoreDataTableViewConView.troller 不滚动

> ID：11595699
> 
> 赞同：0
> 
> 时间：2012-07-21T20:43:11.650
> 
> 标签：objective-c, uitableview

我花了数周时间试图让部分和行在我的表中工作，并最终做到了！接下来我注意到，即使我有大量数据要查看，我也无法向下滚动超过屏幕上第一次显示的内容。此外，滚动条似乎比平时更粗，右上角显示了一个数字 2。

不知道我做错了什么。有人可以引导我朝正确的方向轻推我吗？我无法捕捉到胖滚动条，但它肯定比它应该的要宽。

```
- (void)setupFetchedResultsController  {

    NSString *entityName = @"Regster";

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"addDate" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Regster" inManagedObjectContext:self.managedObjectContext];

    [request setEntity:entity];
    [request setResultType:NSDictionaryResultType]; 
    [request setReturnsDistinctResults:YES];
    //[request setFetchBatchSize:2];

    self.fetchedResultsController.delegate = nil;

    [request setPropertiesToFetch:[NSArray arrayWithObjects:@"addDate", @"regType", nil]];

    NSString *query = self.selectedAccounts.name;
    request.predicate = [NSPredicate predicateWithFormat:@"inAccounts.name CONTAINS[cd] %@", query];        

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"addDate" cacheName:nil];

    [self performFetch];  

    NSError *error = nil;
    NSUInteger count = [_managedObjectContext countForFetchRequest:request error:&error]; 

}  

- (void)viewWillAppear:(BOOL)animated  {
    [super viewWillAppear:animated];
    [self setupFetchedResultsController];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return [[self.fetchedResultsController sections] count];

} 

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    id sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo numberOfObjects];

} 

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section  {

    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo name];

} 

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Account Register";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)  {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }

    [self.tableView setScrollEnabled:YES];    

    NSDictionary *regtype = [self.fetchedResultsController objectAtIndexPath:indexPath];

    cell.textLabel.text = [regtype objectForKey:@"regType"];

    return cell;
} 
```

![在此处输入图像描述](../Images/c51df1991aae429656d5e2b34a3b7268.png) EDIT1：更改 fetchedResultsController 的 sectionNameKeyPath 的 @"addDate" 会导致删除日期和部分，留下一个部分并且滚动工作正常。离开 @"addDate" 可以满足我对部分的要求，但我不明白为什么它不会随着 2 和“胖”滚动而滚动。

EDIT2：我发现了我的问题......我从另一个教学课程中借用了代码来让我的 CoreDataTableViewController 工作，并且它已经实现了 sectionIndexTitlesForTableView。已注释掉并且正在工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:14:39.733

很难看不到您的代码或不了解数据是什么。但我能帮上一点忙。

角落里的 2 是你的表格视图的部分索引列（这也可能是你所说的胖滚动条的意思）。您有 2 个以数字 2 开头的部分。如果部分标题是单词，您会看到按字母顺序排列的索引。

索引仅显示 1 个值这一事实可能意味着您的表格视图未显示您期望的完整数据集，仅显示屏幕上的 2 个部分。

也许显示一些代码？即使只是设置代码也可能会有所帮助。通常，CoreDataTableViewController 需要一个 NSFetchedResultsController、一个标题键等等。显示其中一些代码可能会提供更多线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:39:57.900

我发现了我的问题......我从另一个教学课程中借用了代码来让我的 CoreDataTableViewController 工作，并且它已经实现了 sectionIndexTitlesForTableView。做了一些大规模的搜索，发现这在某个地方出现了。注释掉 sectionIndexTitlesForTableView 方法，它工作得很好！

# android - 如何从 Android SDK Manager 下载示例？

> ID：11595700
> 
> 赞同：0
> 
> 时间：2012-07-21T20:43:17.087
> 
> 标签：android, sdk, sample

我想下载 FingerPaint 示例，但我不知道如何下载。

我已经看过这个链接：http: [//developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

但是，我的 SDK 管理器中没有示例。我究竟做错了什么？

打印：http: [//i.stack.imgur.com/vwvxl.png](http://i.stack.imgur.com/vwvxl.png)

如何下载样本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:46:57.010

在底部栏中，`Show`选项所在的位置，您选中了`Installed`复选框。取消选中它。然后你会看到样本。检查您要下载的示例并单击安装。就这么简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:28:00.830

我再次下载了sdk，出现了一些示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-25T04:24:38.913

在您的 sdk 文件中，打开“SDK Manager”或（Android studio -> Settings ->Android SDK，单击“Launch Standalone SDK Manager”），然后选择 Samples for SDK 下载。

# css - 通过 TinyMCE 设置行高

> ID：11595702
> 
> 赞同：5
> 
> 时间：2012-07-21T20:43:47.710
> 
> 标签：css, configuration, tinymce

有没有办法让用户在 tinyMCE 编辑器中轻松更改段落的行高属性？类似于它的原生“字体大小”或“格式”`<select>`或其他任何东西。我知道我可以使用“编辑 CSS”功能并将其设置在那里。我正在寻找更用户友好的东西。

我在任何地方都找不到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-08-26T09:48:00.643

我发现这个插件适用于 TinyMCE 版本 4.1.5 (2014-09-09)

[https://github.com/castler/tinymce-line-height-plugin](https://github.com/castler/tinymce-line-height-plugin)

像这样设置：

```
tinymce.init({
    plugins: 'lineheight',
    toolbar: 'lineheightselect' 
}); 
```

您也可以像这样配置不同的高度：

```
tinymce.init({
    lineheight_formats: "8pt 9pt 10pt 11pt 12pt 14pt 16pt 18pt 20pt 22pt 24pt 26pt 36pt",
}); 
```

我对此进行了测试，效果很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T11:16:31.220

根据我的评论，

其他人遇到了与您类似的问题，TinyMCE 论坛的成员提供了解决方案：

[http://www.tinymce.com/forum/viewtopic.php?id=28774](http://www.tinymce.com/forum/viewtopic.php?id=28774)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-30T08:44:15.483

使用 TinyMCE 4，您可以使用“style_formats”选项

[http://www.tinymce.com/wiki.php/Configuration:style_formats](http://www.tinymce.com/wiki.php/Configuration:style_formats)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-20T15:01:25.453

事实上，TinyMCE 没有字体名称或字体大小的行高控制，但您可以轻松地将其添加到`style_formats`. 我使用了这个配置：

```
// custom formatting is under Format > formats, so make sure it's in your menu (it is, by default)
const editorOptions = {
  // Notice that it overrides Format > formats
  style_formats: [
      {
          title: 'Line height',
          items: [
            {
              title: 'Default',
              inline: 'span',
              // `inline-block` because CSS `line-height` doesn't affect multiline `span`
              styles: { 'line-height': 'normal', display: 'inline-block' }
            },
            {
              title: '40px',
              inline: 'span',
              styles: { 'line-height': '40px', display: 'inline-block' }
            },
            // add as more as you need
          ]
      },
      // ...
  ]  
} 
```

[codepen 上的工作示例](https://codepen.io/Alendorff/pen/yLNaEbz)

[TinyMCE style_formats 文档](https://www.tiny.cloud/docs/configure/editor-appearance/#style_formats)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-18T14:30:44.007

我找到了一种向 tinymce 添加自定义行高的好方法，但这是一个技巧。我正在使用 tinymce v5，通过这些代码，我可以使用带有不错选择选项的行高。 [![在此处输入图像描述](../Images/e347496cbc13be4202ef8e5aa6689d4a.png)](https://i.stack.imgur.com/S24sP.jpg)

您必须将这些行添加到小 mce 的初始化代码中：

```
 tinymce.init({
            selector: 'textarea',
            height: 500,
            plugins: 'table wordcount',
            toolbar: '  styleselect ',

            content_css: [
                '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',
                '//www.tiny.cloud/css/codepen.min.css'
            ],
    toolbar: 'styleselect'
 content_style: '.lineheight20px { line-height: 20px; }' +
                '.lineheight22px { line-height: 22px; }' +
                '.lineheight24px { line-height: 24px; }' +
                '.lineheight26px { line-height: 26px; }' +
                '.lineheight28px { line-height: 28px; }' +
                '.lineheight30px { line-height: 30px; }' +
                '.lineheight32px { line-height: 32px; }' +
                '.lineheight34px { line-height: 34px; }' +
                '.lineheight36px { line-height: 36px; }' +
                '.lineheight38px { line-height: 38px; }' +
                '.lineheight40px { line-height: 40px; }' +
                '.tablerow1 { background-color: #D3D3D3; }',
            formats: {
                lineheight20px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight20px' },
                lineheight22px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight22px' },
                lineheight24px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight24px' },
                lineheight26px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight26px' },
                lineheight28px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight20px' },
                lineheight30px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight30px' },
                lineheight32px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight32px' },
                lineheight34px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight34px' },
                lineheight36px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight36px' },
                lineheight38px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight38px' },
                lineheight40px: { selector: 'span,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes: 'lineheight40px' }
            },
            style_formats: [
                { title: 'lineheight20px',format: 'lineheight20px' },
                { title: 'lineheight22px', format: 'lineheight22px' },
                { title: 'lineheight24px', format: 'lineheight24px' },
                { title: 'lineheight26px', format: 'lineheight26px' },
                { title: 'lineheight28px', format: 'lineheight28px' },
                { title: 'lineheight30px', format: 'lineheight30px' },
                { title: 'lineheight32px', format: 'lineheight32px' },
                { title: 'lineheight34px', format: 'lineheight34px' },
                { title: 'lineheight36px', format: 'lineheight36px' },
                { title: 'lineheight38px', format: 'lineheight38px' },
                { title: 'lineheight40px', format: 'lineheight40px' }

]
    }); 
```

最后我不得不说你需要在tinymce/themes/silver/theme.min.js的文件中找到一个“段落”字，如果你想看到行高，把它改成“行高”名称而不是段落名称。这个词在该文件的 290855 行中。这个工作在tinymce中被称为自定义格式，如果你想找到它，请检查这个链接： [https](https://www.tiny.cloud/docs/demo/format-custom/) ://www.tiny.cloud/docs/demo/format-custom/ 我不得不说你需要添加这个css代码到您的 css 文件：

```
.lineheight22px{
line-height: 22px;
}
.lineheight24px{
    line-height: 24px;
}
.lineheight26px{
    line-height: 26px;
}
.lineheight28px{
    line-height: 28px;
}
.lineheight30px{
    line-height: 30px;
}
.lineheight32px{
    line-height: 32px;
}
.lineheight34px{
    line-height: 34px;
}
.lineheight36px{
    line-height: 36px;
}
.lineheight38px{
    line-height: 38px;
}
.lineheight40px{
    line-height: 40px;
} 
```

# android - 如何检测用户是否已链接到 Google Market 帐户

> ID：11595704
> 
> 赞同：1
> 
> 时间：2012-07-21T20:44:10.727
> 
> 标签：android, google-play

> **可能重复：**
> [如何找到与 Android Market 关联的 Gmail 帐户？](https://stackoverflow.com/questions/10606976/how-to-find-gmail-account-associated-with-android-market)

在 Android 中，代码中是否有一种简单的方法来检测用户是否使用 gmail 地址将他们的手机链接到 Google Market？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:47:43.637

在我看来，此时问的正确问题是，“你真正想做什么？”

我能想到的最明显的用例是验证用户是否合法地使用您的应用程序，在这种情况下，您可能会在应用程序许可中找到正确的答案：http: [//developer.android.com/guide/google/play/许可/index.html](http://developer.android.com/guide/google/play/licensing/index.html)

我能想到的下一个最明显的用例是您想帮助用户安装某些东西，在这种情况下，您的答案可能是链接到您的应用程序：http: [//developer.android.com/distribute/googleplay/promote/linking .html](http://developer.android.com/distribute/googleplay/promote/linking.html)

对于其他情况，答案可能从客户经理开始。试试这里：http: [//developer.android.com/training/id-auth/identify.html](http://developer.android.com/training/id-auth/identify.html)

# c++ - 可以使用十六进制编辑器从 exe 文件中删除代码吗？(c++)

> ID：11595706
> 
> 赞同：2
> 
> 时间：2012-07-21T20:44:19.207
> 
> 标签：c++, hex, editor, copy-protection

所以我想知道我是否可以简单地在我的应用程序中使用一些识别段落来识别侵犯版权的来源（尚未实施，只是一个想法）。但后来我想，可能有可能在我的代码中简单地剪切相应的段落或在十六进制编辑器或类似工具的帮助下编辑它们以使识别变得不可能。这可能吗？例如，假设我会在代码中添加一个隐藏的注释，该注释可以以某种秘密方式访问（例如，通过单击某处）。现在，如果某人拥有两个程序单元（即出售给两个不同的人），他能否在十六进制编辑器中删除/编辑“差异”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:49:45.723

您可以计算可执行文件（重要部分）的哈希值，对其进行加密签名，并将哈希值和签名嵌入到可执行文件中。如果可执行文件被修改，哈希值也会改变。如果哈希被修改，签名将不匹配。

如果您希望防止侵权，而不仅仅是检测它，那么每次可执行文件运行时，它都可以验证哈希和签名，如果它们被修改则拒绝运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T20:50:24.943

要识别应用程序的来源，您需要能够唯一地识别应用程序。

这通常是通过为每个客户提供一个唯一的密钥来完成的，该密钥必须存在才能使应用程序运行。启动时，应用程序检查密钥是否存在且有效。

您可以通过使用加密方式对密钥进行编码来防止对密钥进行**简单的编辑。**因此，使用十六进制编辑器修改密钥不会生成新密钥，而是生成无效密钥。只需让程序在存在无效密钥时拒绝运行。

# c#-4.0 - System.Data.OleDb.OleDbException 未处理；C# wh 中的“INSERT INTO 语句中的语法错误”

> ID：11595708
> 
> 赞同：0
> 
> 时间：2012-07-21T20:45:17.437
> 
> 标签：c#-4.0

```
using System.Data.OleDb;

namespace ConnectingToMS_Access1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        OleDbDataAdapter da;
        DataSet ds;

        private void Form1_Load(object sender, EventArgs e)
        {
            da = new OleDbDataAdapter("Select * from Record", "Provider=Microsoft.Ace.oledb.12.0;data source='D:\\mydb.accdb'");
            ds = new DataSet();
            da.Fill(ds);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            dataGridView1.DataSource = ds.Tables[0];
        }

        private void button2_Click(object sender, EventArgs e)
        {
            DataRow dr = ds.Tables[0].NewRow();
            dr[0] = "abc"; 
            dr[1] = "def";
            dr[2] = "ghi";
            dr[3] = "jkl";
            ds.Tables[0].Rows.Add(dr);
        }

        private void button3_Click(object sender, EventArgs e)
        {
             OleDbCommandBuilder cb = new OleDbCommandBuilder(da);
             da.Update(ds.Tables[0]);

             MessageBox.Show("Saved in Database");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:39:16.710

您需要在查询中明确定义命名列。

问题是您无法根据列位置更新列。期望调用 Fill 方法将返回记录和列名可能是合理的，但它可能不会。毕竟，运行该选择查询将只返回数据，而不是模式。

# shell - 使用 SED 将 ruby 部分 w('<%= characters) 附加到文件末尾

> ID：11595710
> 
> 赞同：0
> 
> 时间：2012-07-21T20:45:47.030
> 
> 标签：shell, unix, sed

我正在尝试将此行添加到一组文件的末尾：

```
<%= render 'success_guide_menu' %> 
```

所有这些文件都以“school_guide”开头。

我尝试使用以下 sed 脚本：

```
sed "
$ a\
<%= render 'school_guide_menu' %>
" school_guide* 
```

但我收到一条错误消息

```
 sed: 1: "$ a\<\%\= render 'schoo ...": extra characters after \ at the end of a command 
```

我试图转义字符但没有成功，我不确定 sed 在这个错误中指的是什么，因为它似乎不是文件，而且（我认为）它也在读取整个字符串。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:22:52.217

为什么不是 bash 单行脚本？

```
for file in $(ls school_guide*); do echo "<%= render 'success_guide_menu' %>" >> $file; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:38:33.880

一种使用方式`sed`。我使用`-i`带有`.bak`后缀的 switch 来就地修改文件并创建备份。

```
sed -i.bak -e "$ a\<%= render 'success_guide_menu' %>" school_guide* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T07:54:56.267

这可能对您有用（GNU sed）：

```
sed -i '$a\<%= render '\''school_guide_menu'\'' %>' school_guide* 
```

# asp.net - ASP Master.FindControl 对象引用未设置为实例

> ID：11595712
> 
> 赞同：0
> 
> 时间：2012-07-21T20:46:13.253
> 
> 标签：asp.net

这是发生错误的地方，有什么想法吗？我确定这很简单。

```
Control masterC = Master.FindControl("ContactPlaceHolder_Header"); 
```

这被定义`Website.master.cs`为不是嵌套母版页（它没有自己的母版页）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:53:34.430

母版页的`Master`属性是指*其母*版页。

由于您没有定义此代码的母版页，因此`Master`解释`null`异常。

只需将您的代码更改为：

```
Control masterC = FindControl("ContactPlaceHolder_Header"); 
```

世界上一切都会好起来的（或者至少是这个母版页所在的位置）。

# javascript - 使用javascript在表单内部更改输入文本的值

> ID：11595717
> 
> 赞同：2
> 
> 时间：2012-07-21T20:47:14.557
> 
> 标签：javascript, forms, text, input

当我单击按钮时，我希望输入文本值更改为“你好”，但它似乎不起作用，这是我的代码。专业人士请帮助我真的是菜鸟，在此先感谢！

```
<script type="text/javascript">
function selectfile(){
    document.uploadform.selectfile.value='hello';
}
</script>

<body>
<form name="uploadform" id="uploadform">
    <input type="text" name="selectfile" id="selectfile" value="Hi"/>
    <input name="upload_file" type="button" onClick="selectfile()" value="Button"/>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:55:25.957

请看[我在 jsfiddle 上提出的这个例子](http://jsfiddle.net/58svx/)：

```
function selectfile() {
    var form = document.forms['uploadform'];
    form.elements["selectfile"].value = 'Hello';
}

var uploadButton = document.getElementById("upload-button");
uploadButton.addEventListener("click",selectfile); 
```

在处理函数中，我首先通过它获取表单`id`，然后使用名称`selectfile`（您的输入元素）设置元素的值。使用 .添加按钮的事件侦听器[`addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener)。

**您的代码中的问题**是，您同时调用了 function 和 element `selectfile`。因此，您收到“selectfile 不是函数”错误。重命名其中之一，[它的工作原理](http://jsfiddle.net/CmyJC/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T20:55:13.913

那应该工作。那是您使用的完整 HTML 吗？如果是这样，您需要关闭标签。它应该看起来像这样：

```
<html>
<head>
    <script type="text/javascript">
    function selectfile(){
    document.uploadform.selectfile.value='hello';
    }
    </script>
</head>

<body>
    <form name="uploadform" id="uploadform">
        <input type="text" name="selectfile" id="selectfile" value="Hi"/>
        <input name="upload_file" type="button" onClick="selectfile()" value="Button"/>
    </form>
</body>
</html> 
```

# ios - iOS - UIButton 事件崩溃

> ID：11595720
> 
> 赞同：0
> 
> 时间：2012-07-21T20:47:27.277
> 
> 标签：ios, uibutton, nsarray

[我在此链接](https://stackoverflow.com/questions/5656432/create-a-for-loop-to-add-39-buttons-to-an-array)中尝试了 Moshe 的代码，除了“for (UIButton *button in ...”) 的部分之外它都有效，并且每次单击按钮时它都会崩溃。

所以我在 viewDidLoad 方法中尝试了这段代码：

```
UIButton *testButton = [[UIButton alloc]initWithFrame:CGRectMake(20,50,30,30)];
    testButton.backgroundColor = [UIColor orangeColor];
    [testButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [testButton setTitle:@"A" forState:UIControlStateNormal];
    [testButton addTarget:self action:@selector(commonMethodForButtons:) forControlEvents:UIControlEventTouchDown];

    [self.view addSubview:testButton];
    [testButton release]; 
```

我的项目只包含这个和 Moshe 的示例代码。知道应用程序崩溃的原因吗？我没有崩溃日志。

编辑：

在开放范围内我有这个方法：

```
-(void)commonMethodForButtons:(id)sender
{
    NSLog (@"you touched me!");
} 
```

编辑2：

我找到了这个问题的原因：

我在 AppDelegate 中注释掉了`[mvc release];`，所以它现在可以完美运行了 :)

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    MVC *mcv = [[MVC alloc]initWithNibName:nil bundle:nil];

    [self.window addSubview: mcv.view];

    //[mcv release];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

感谢您指出这一点！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:08:41.090

使用 mcv 作为属性

在 AppDelegate 的头文件中：

```
@class MVC;
    @interface AppDelegate : UIResponder {
    MVC *mcv;
}

@property (nonatomic, retain) MVC *mcv; 
```

在实现文件中

```
@implementation AppDelegate

@synthesize mcv;

- (void)dealloc
{
    [mcv release];
    [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:28:51.797

不，您*不*应该通过注释掉来解决您的问题`[mcv release]`（这只是解决症状，而不是问题，并且如果您转换为 ARC 会导致问题，您应该这样做）也不应该像当前接受的答案那样，存储`mcv`（不应该是`mvc`？）作为应用程序委托的 ivar 但（a）未能设置`rootViewController`但（b）仍在使用`addSubview`. 您应该使用应用程序委托的`rootViewController`. 当前的解决方案不会正确配置您的视图控制器层次结构。它应该如下：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    MVC *mvc = [[MVC alloc]initWithNibName:nil bundle:nil]; // really no NIB name?!?

    //[self.window addSubview: mvc.view];
    self.window.rootViewController = mvc;

    [mvc release];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

或者，更好的是，符合`didFinishLaunchingWithOptions`非 ARC Xcode 模板生成的标准，例如：

```
//  AppDelegate.h

#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ViewController *viewController;

@end 
```

和

```
//  AppDelegate.m

#import "AppDelegate.h"

#import "MVC.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[MVC alloc]initWithNibName:nil bundle:nil]; // really no NIB name?!?
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

I've never had to refer to this `viewController` property, but given that this is the default code that Xcode generates, I assume it is good practice.

# java - 从 GWT JSNI 的内部函数调用 Java 方法

> ID：11595722
> 
> 赞同：2
> 
> 时间：2012-07-21T20:47:45.933
> 
> 标签：java, gwt, jsni

我正在使用 W3C Geolocation API 来检索 GWT Web 应用程序中的位置信息。Geolocation API 的构建方式是在检索到位置位置后立即调用回调函数。

我当前的测试代码如下所示：

```
public native void getCoordinates() /*-{
    function onPositionUpdate(position) {
        var lat = position.coords.latitude;
        var lng = position.coords.longitude;
        var alt = position.coords.altitude;

        // not OK,- doesn't get invoked, and function execution stops at this point
        this.@com.test.GpsPanel::testMethod()();

        alert("Coordinates retrieved: " + lat + ";" + lng + ";" + alt);
    }

    function onPositionUpdateFailed(error) {
        alert("Some error");
    }

    if(navigator.geolocation) {
        // OK when invoked somewhere here
        this.@com.test.GpsPanel::testMethod()();

        navigator.geolocation.getCurrentPosition(onPositionUpdate, onPositionUpdateFailed);
    } else {
        alert("Geolocation is not available");
    }
}-*/; 
```

我试图证明该方法`testMethod`不会从内部方法调用`onPositionUpdate`。甚至更多：之后没有显示警报（当 testMethod 调用被删除时它会显示），但在日志中没有发现警告或错误。

我的问题是：如何从内部函数中引用此方法？我觉得这`this.`不是内部功能的正确参考。如果无法正确引用 Java 类，那么可能的解决方法是什么？请注意，我不能将其他任何东西传递给函数`onPositionUpdate()`，因为它是一个回调函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T21:17:53.647

`this`当实际执行 JSNI 块*内*的 javascript 中定义的函数时，超出范围。

在 周围添加一个闭包`this`：

```
public native void getCoordinates()
/*-{

    var that = this;

    function onPositionUpdate(position) {
        var lat = position.Wecoords.latitude;
        var lng = position.coords.longitude;
        var alt = position.coords.altitude;

        that.@com.test.GpsPanel::testMethod()();

        alert("Coordinates retrieved: " + lat + ";" + lng + ";" + alt);
    }

    // ...
}-*/; 
```

我确信这在谷歌的 JSNI 文档中有所记录，至少在一个传递的例子中，但我现在找不到它。

这也可以通过将实例传递给 javascript 注入来完成，例如：

```
public native void getCoordinates(com.test.GpsPanel instance)
/*-{

    function onPositionUpdate(position)
    {
        var lat = position.Wecoords.latitude;
        var lng = position.coords.longitude;
        var alt = position.coords.altitude;

        instance.@com.test.GpsPanel::testMethod()();

        alert("Coordinates retrieved: " + lat + ";" + lng + ";" + alt);
    }

    // ...
}-*/; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-05T11:59:59.630

A related trivial mistake resulting in the same behaviour is to forget the second pair of brackets when invoking Java methods. The first pair restates the method header for identification purposes while the second pair contains the actual argument(s). This mistake is particularly easy to make when there are no arguments, e.g.

```
instance.@com.test.GpsPanel::testMethod()(); 
```

# sql - 如何排除具有重复列的行？

> ID：11595728
> 
> 赞同：0
> 
> 时间：2012-07-21T20:49:11.683
> 
> 标签：sql, sql-server, sql-server-2008

假设我有以下数据：

```
id1   id2    data
----------------------
7     8      test1
7     8      test2
8     7      test1
8     7      test2 
```

对于我的需要 id1 和 id2 可以转置，所以这本质上是重复数据。如何仅选择 id1/id2 及其所有唯一值的一种组合`data`？所以期望的输出是：

```
7   8   test1
7   8   test2 
```

或者

```
8   7   test1
8   7   test2 
```

真的无所谓。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T20:54:07.100

如果真的所有记录都以这种方式复制并且`id1!=id2`，这可以工作吗？

```
select distinct id1, id2, data from test where id1 < id2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:59:04.227

如果您的记录不重复，您可以执行以下操作：

```
select distinct (case when id1 < id2 then id1 else id2 end) as idlow,
       (case when id1 < id2 then id2 else id1 end) as idhigh,
       data
from table t 
```

# c++ - (C++) list.error 方法和使用指针删除内存

> ID：11595729
> 
> 赞同：0
> 
> 时间：2012-07-21T20:49:17.630
> 
> 标签：c++, list, pointers, erase

```
typedef struct  value 
{
    char* contents;
    int size;
}Value;

hash_map<Key,list<Value>,hash<Key>,eqKey> dspace;
list<Value> vallist; 
```

.

`Value`每次创建变量并添加到此列表时，我都在做什么 。

我有一个指针`Value * ptr`，我使用这个指针指向列表的一个成员，最后我从列表中删除该成员。

现在我可以使用指针访问该值，但不能使用列表迭代器。

我有两个问题

1.  确实从列表中删除元素，但分配的内存保持不变，或者内存也被释放。
2.  是否可以使用此 ptr 释放内存。或者如果我将 ptr 设置为列表的其他成员，则前一个成员占用的内存将被释放或不释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:12:31.157

1.  元素不复存在。如果元素是指针，则指针不复存在，但它指向的对象不受影响。然而，元素本身已经消失了。否则，列表将非常难以使用。

2.  您对指针所做的操作对列表完全没有影响。如果您想要指针保持对象处于活动状态，以便对象在且仅当最后一个指向它的指针被销毁时被销毁，您可以使用它们。（比如 Boost 的`shared_ptr`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:19:11.017

当你调用`dspace.erase()`从你的 hashmap 中删除一个元素时，使用的内存被释放。这意味着内存现在可用于其他用途。这并不**意味着**该内存块中的数据被擦除。当您尝试通过指针访问数据时，内存似乎仍然完好无损，这可能就是您询问内存是否已释放的原因。但是，这样做会导致未定义的行为，因为您的指针指向的内存可能随时被重用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T21:23:04.063

1.  如果您`Value`从列表中删除该实例，则其分配的内存将被释放。
2.  通常会调用`delete ptr;`，但这不适用于您的情况，因为实例的内存已被释放。更改普通指针的值根本不会影响内存分配。

你`Value`有一个`char *contents`成员。如果实例被删除，它指向的内存可能会泄漏`Value`- 取决于您分配它的方式。您应该考虑改用 std::string 。

# python - 如何将二度的 polyfit 强制为 0 的 y 截距

> ID：11595740
> 
> 赞同：4
> 
> 时间：2012-07-21T20:51:26.620
> 
> 标签：python, numpy, curve-fitting

我一直在使用该`numpy.polyfit`功能进行一些预测。如果我输入 1 的次数，它可以工作，但我需要进行二次多项式拟合。在某些情况下它有效，在其他情况下，预测图会下降，然后永远上升。例如：

```
import matplotlib.pyplot as plt
from numpy import *

x=[1,2,3,4,5,6,7,8,9,10]
y=[100,85,72,66,52,48,39,33,29,32]
fit = polyfit(x, y, degree) 
fitfunction = poly1d(z4)
to_predict=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]

plt.plot(to_predict,fitfunction(to_predict))
plt.show() 
```

在我运行它之后，这会显示出来（我尝试放一张图片，但stackoverflow不会让我）。

我想强迫它通过零。

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T21:37:33.320

如果您不需要使用原始最小二乘公式计算拟合误差（即最小化 ∑ |y [i] - (ax [i] ² + bx [i] )| ²），您可以尝试执行*线性*拟合`y/x`，因为 (斧头² + bx)/x = 斧头 + b。

如果必须使用相同的误差度量，请直接构造系数矩阵并使用[`numpy.linalg.lstsq`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.lstsq.html#numpy.linalg.lstsq)：

```
coeff = numpy.transpose([x*x, x])
((a, b), _, _, _) = numpy.linalg.lstsq(coeff, y)
polynomial = numpy.poly1d([a, b, 0]) 
```

（请注意，您提供的数据序列看起来不像 y 截距为 0 的抛物线。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-28T06:06:03.077

如果有人必须在截止日期前执行此操作，一个快速的解决方案是在 0 处添加一堆额外的点来抵消权重。我这样做了：

```
for i in range(0,100):
    x_vent.insert(i,0)
    y_vent.insert(i,0)         

slope_vent,intercept_vent=np.polyfit(x_vent,y_vent,1) 
```

# ios - 我需要在没有越狱的情况下从 PC 访问 iOS 5.1.1 上的 /library

> ID：11595744
> 
> 赞同：0
> 
> 时间：2012-07-21T20:52:20.817
> 
> 标签：ios

我知道这可能没用，但我只是想问一下。

我有一部运行 iOS 5.1.1 的 iPhone 4s，几个月前我的妻子确实设置了限制密码，以防止我们的女儿在玩手机游戏时意外更改某些设置。

现在我的妻子忘记了那个代码，需要自己更改一些设置，当然她不能这样做。

我有办法解决这个问题，但必须访问 /library/keychains 才能做到这一点。

由于手机没有越狱，我无法访问该路径（使用i-Funbox）

还有其他方法可以使用它来访问此路径吗？

有什么办法可以重置这个密码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:09:18.670

没有越狱，你不能。但是，您可以使用 Absinthe 2.0.4 轻松越狱手机。

如果您根本不想这样做，您可以使用 iTunes 对设备进行备份，然后将其固件恢复为出厂默认设置，然后密码将消失。与 iTunes 重新同步后，您将取回所有数据。

# php - 检查网页是否使用 php 启用了压缩

> ID：11595746
> 
> 赞同：0
> 
> 时间：2012-07-21T20:52:31.113
> 
> 标签：php, gzip, deflate

我想检查一个网页是否启用了 php 的 gzip/deflate 压缩。可能使用 get_headers 我不会成功，所以任何建议或任何代码都可以在任何地方进行检查（找不到关于该主题的任何内容）。可能我需要在标题中找到压缩，如何在启用压缩的情况下发出 HTTP 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:01:32.233

您可以使用[curl](http://php.net/manual/en/ref.curl.php)并使用[curl_setopt](http://php.net/manual/en/function.curl-setopt.php)，
将 CURLOPT_ENCODING 设置为 gzip,deflate

如果网页启用了 gzip/deflate，
将尊重编码请求并返回 gzip 内容

# wpf - 如何将数据从 C# 传递到 xaml？

> ID：11595749
> 
> 赞同：-3
> 
> 时间：2012-07-21T20:52:56.773
> 
> 标签：wpf, xaml, c#-4.0

我有这个 xaml 代码，需要从 C# 代码动态设置点。

```
<Style x:Key="Mystyle" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>

                            <Polygon  Points="0,0 0,100 50,200" Fill="{TemplateBinding Background}"
                         Stroke="{TemplateBinding BorderBrush}"/>
                        <ContentPresenter HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:28:01.620

MVVM 解决方案：

XAML 文件：

```
<Window x:Class="PolygonBinding.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style x:Key="Mystyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Grid>
                            <Polygon Points="{TemplateBinding Tag}" Fill="{TemplateBinding Background}"
                                    Stroke="{TemplateBinding BorderBrush}"/>
                            <ContentPresenter HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <Button Style="{StaticResource Mystyle}" Tag="{Binding PointsSource}" />
    </Grid>
</Window> 
```

代码隐藏文件：

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            this.DataContext = new MainViewModel();
        }
    } 
```

视图模型文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Practices.Prism.ViewModel;
using System.Collections.ObjectModel;
using System.Windows;
using System.Windows.Media;

namespace PolygonBinding
{
    class MainViewModel : NotificationObject
    {
        public MainViewModel()
        {
            PointsSource.Add(new Point { X = 0, Y =0 });
            PointsSource.Add(new Point { X = 0, Y = 100 });
            PointsSource.Add(new Point { X = 50, Y = 200 });            
        }

        private PointCollection _pointsSource = new PointCollection();
        public PointCollection PointsSource
        {
            get { return _pointsSource; }
            set { _pointsSource = value; RaisePropertyChanged(() => PointsSource); }
        }
    }       
} 
```

# ruby-on-rails - Ruby / Ruby on Rails：如何使用用户指定的夏令时从当地时间获取没有夏令时的当地时间？

> ID：11595750
> 
> 赞同：1
> 
> 时间：2012-07-21T20:53:08.610
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我正在开发的 Web 应用程序（Ruby on Rails）中，用户可以指定世界上任何位置的本地时间。（该位置与用户的位置或服务器的位置无关。）

如果在该位置使用夏令时，则用户键入该时间。我需要从指定的夏令时获取该位置的没有夏令时的当地时间。

例如，服务器在旧金山。用户在纽约。在冬季，用户在夏季输入明尼阿波利斯的当地时间（有夏令时）。而且我需要在没有夏令时偏移的情况下获得与明尼阿波利斯相同的当地时间。假设我们不知道明尼阿波利斯是否使用夏令时。

因为用户可以指定世界上的任何位置，我们无法判断该位置是否使用夏令时。此外，UTC 偏移信息本身并不能说明它是否处于夏令时。

我怎样才能做到这一点？

任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:56:37.920

olson TZ 数据库（可通过 tzinfo gem 获得）确实包含有关每个位置是否使用夏令时（以及该时间段何时开始/结束）的信息。您通常应该使用它提供的时区对象，而不是原始的 UTC 偏移量。当您有一个时区对象时，该`local_to_utc`方法将为您进行转换，并酌情应用 DST。

唯一模棱两可的情况是时钟倒退：一年中有一个小时，本地时间可以对应于两个不同的时间点。例如在英国，在 10 月底，时钟会在 1:59:59 倒退一小时 - 如果用户告诉您当地时间 1:30:00，您将不知道它是第一个还是第二个 1： 30\. Tzinfo 可以告诉您这两种可能性，以便您根据自己的逻辑进行选择。

# nlp - 我应该研究机器学习的哪个领域来自动从消息中提取某些信息

> ID：11595754
> 
> 赞同：2
> 
> 时间：2012-07-21T20:53:16.910
> 
> 标签：nlp

我有一个从传入消息中提取信息的应用程序。这些消息都包含相同的信息，但它们具有不同的形式，具体取决于发送它们的来源。

例子：

来自源 A 的消息：

```
A: You spent $50.00 at Macy's on 2/20/12 
```

来自源 B 的消息：

```
Purchase, $50.00, Macy's, 2Feb2012, Balance $5000.00 
```

但是，来自单一来源的每条消息都具有相同的形式。所以目前，我正在通过编写一组正则表达式来首先识别我正在尝试解码的消息（即它来自什么来源，所以我知道消息的形式是什么），然后提取消息中的必要信息（在上面的示例中，我想知道交易金额、交易发生的商店和日期）。如果我发现消息的新来源，或者消息来源更改了他们的消息格式（不经常发生，但可能发生），我需要手动编写该消息的正则表达式。不过，我确信我可以使用某种机器学习技术自动执行此操作。我只是不太了解机器学习，而且我不知道 甚至不知道从哪里开始寻找适用于我的问题的技术。我希望有人能指出我从哪里开始阅读的正确方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:04:39.267

为了检测和标记金额、日期、人名和类似信息，您可以使用一种称为命名实体识别的技术。[斯坦福命名实体识别](http://nlp.stanford.edu/software/CRF-NER.shtml)器带有经过预训练的即用型模型。您还可以使用迄今为止生成的任何标记数据来为您的应用程序学习自定义模型。用于此目的的标准技术是条件随机场或序列感知器。有许多实现这些模型的工具包，包括：

*   [Wapiti](http://wapiti.limsi.fr) - 一个简单快速的判别序列标记工具包。
*   [Sequor](http://code.google.com/p/sequor/) - 基于柯林斯 (2002) 感知器的序列标记器。

# excel - Excel VBA中“！=”的等价物是什么？

> ID：11595757
> 
> 赞同：101
> 
> 时间：2012-07-21T20:53:36.960
> 
> 标签：excel, vba, function, syntax, inequality

问题是它`!=`在 excel vba 中不起作用。

我希望能够使用

`If strTest != "" Then`代替`If strTest = "" Then`

除此之外还有另一种方法`!=`吗？

我模仿的功能`!=`是

```
Sub test()

Dim intTest As Integer
Dim strTest As String

intTest = 5

strTest = CStr(intTest) ' convert

Range("A" + strTest) = "5"

    For i = 1 To 10
        Cells(i, 1) = i

        If strTest = "" Then
            Cells(i, 1) = i
        End If

    Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-07-21T20:57:13.417

因为 VBA 中的不等式运算符是`<>`

```
If strTest <> "" Then
    ..... 
```

运算符`!=`用于 C#、C++。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-21T21:04:14.010

在 VBA 中，`!=`操作符就是`Not`操作符，像这样：

```
If Not strTest = "" Then ... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-12T08:18:30.773

只是一个注释。如果您想将字符串与 `""`, 在您的情况下进行比较，请使用

```
If LEN(str) > 0 Then 
```

甚至只是

```
If LEN(str) Then 
```

反而。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T12:04:36.473

尝试使用`<>`而不是`!=`.

# java - MongoDB 无法通过国家正则表达式或查询找到

> ID：11595759
> 
> 赞同：0
> 
> 时间：2012-07-21T20:54:19.390
> 
> 标签：java, mongodb, search

看来我错过了一些重要的事情。我有一些记录插入到 mongoDB 中，其中包含带有国家字符的字段。将其插入数据库或找到它们没有问题，所有值看起来都不错。但是，如果我尝试使用“find()”或“regex()”找到特定的，它们什么也不会返回。例如：

```
DBObject query = new BasicDBObject();
query.put("position", Pattern.compile(".*forsøg.*"));
--or--
query.put("position","forsøg");
System.out.println(collection.find(query).count());  // prints 0 
```

在日志中

```
query={ "position" : { "$regex" : ".*������.*"}}
--or---
query={ "position" : "������"} 
```

“位置”的字段值等于“forsøg” ofc。Pattern.matches(".*forsøg.*", "forsøg") 返回真。如果我将模式替换为仅包含 ASCII 字符的模式（例如“ *.abc.* ”），所有方法都会按预期工作。Collection.findAll() 返回所有保存的具有可读和正确值的实例。

版本：MongoDB 2.0.6 64 位、mongo-java-driver 2.8.0、Java 7。我尝试了同样的 spring-data-mongodb 1.0.2.RELEASE 但删除了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:35:55.983

看起来我遇到了一个与 maven + testng 相关的奇怪错误。从 .war 和 testsuit 执行的相同代码在数据库中提供完全不同的结果。

如果将浏览器指向

```
http://127.0.0.1:28017/baseName/collectionName/ 
```

并查看每次执行后的值。

# java - Java如何为这个字符串设置正则表达式

> ID：11595760
> 
> 赞同：0
> 
> 时间：2012-07-21T20:54:31.730
> 
> 标签：java, regex, string, pattern-matching, matcher

因此，我试图通过匹配器对象从存储在我的在线数据库中的一个字符串中提取两个字符串。

每个字符串出现在 s:64: 之后并在引号中 示例 s:64:"stringhere"

我目前正试图让它们如此，但我尝试过的任何正则表达式都失败了，

```
 Pattern p = Pattern.compile("I don't know what to put as the regex");
Matcher m = p.matcher(data); 
```

话虽如此，我所需要的只是将在匹配器中返回两个字符串的正则表达式，因此 m.group(1) 是我的第一个字符串，而 m.group(2) 是我的第二个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:02:13.187

试试这个正则表达式： -

```
s:64:\"(.*?)\" 
```

## 代码：

```
Pattern pattern = Pattern.compile("s:64:\"(.*?)\"");
Matcher matcher = pattern.matcher(YourStringVar);
// Check all occurance
int count = 0;
while (matcher.find() && count++ < 2) {
    System.out.println("Group : " + matcher.group(1));
} 
```

这里`group(1)`返回每个匹配项。

## 输出：

```
Group : First Match
Group : Second Match 
```

参考**[现场演示](http://ideone.com/PsbNB)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:57:04.897

```
String data = "s:64:\"first string\" random stuff here s:64:\"second string\"";
Pattern p = Pattern.compile("s:64:\"([^\"]*)\".*s:64:\"([^\"]*)\"");
Matcher m = p.matcher(data);
if (m.find()) {
  System.out.println("First string: '" + m.group(1) + "'");
  System.out.println("Second string: '" + m.group(2) + "'");
} 
```

印刷：

> 第一个字符串：'第一个字符串'
> 第二个字符串：'第二个字符串'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T20:57:10.560

你需要的正则表达式应该是`compile("s:64:\"(.*?)\".*s:64:\"(.*?)\"")`

# codeigniter - CodeIgniter - 使用“new”来创建

> ID：11595763
> 
> 赞同：0
> 
> 时间：2012-07-21T20:54:38.003
> 
> 标签：codeigniter

我有一个关于 CodeIgniter 的哲学问题，以及它的模型在利用“新”来实例化某些东西方面的​​作用。

在我看来，这个想法是您使用例如使用让我们说一本书的模型

```
$this->load->model("book_model") 
```

代替

```
new book_model 
```

我的意思是，由于你只加载一次 book_model，你将只有一个 book_model 的实例，如果你想为多本书建模，你将在 book_model 中使用 createNewBook 函数，而不是通过 _construct 函数使用“新”后。

这样看是对的吗？我的意思是考虑我使用相同的 book_model 实例和其中的函数“initiateBook”？我们是否应该考虑永远不要在 CodeIgniter 中使用“new”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:39:53.130

Actually when you call `$this->load->model("book_model")` the `CodeIgniter` does the job for you, which means `CodeIgniter`'s `Loader class` has a method `public function model(...)` which instantiate the model that you've passed as an argument, for example `book_model` here.

Taken from `model function` in `Loader class` (located in `system/core`)

```
if (in_array($name, $this->_ci_models, TRUE))
{
    return;
} 
```

It checks the `_ci_models` protected array to see if the requested model is already loaded then it `returns` and if it's not loaded then it loads it, i.e. (the last segment of model method)

```
$CI->$name = new $model(); // here $model is a variable which has the name of the requsted model
$this->_ci_models[] = $name; // stores the instantiated model name in the _ci_models[] array
return; // then returns 
```

So, you don't need to use `new` to instantiate it manually and once a model (same applies with other libraries or classes) is loaded then you can access/use it anywhere in your script.

Since `CodeIgniter` uses the [**Singleton**](http://phpadvocate.com/blog/2011/04/php-using-a-singleton-pattern-with-oop/) ([an answer on SO about singleton pattern](https://stackoverflow.com/questions/7968154/singleton-pattern-in-php)) design pattern so you have only one super global `$CI` object (one instance of CodeIgniter) available and it carries everything you've loaded or you'll load.

To load the `book_model` model and then call the `initiateBook()` method of that model

```
$this->load->model("book_model"); // book_model loaded/instantiated
$this->book_model->initiateBook(); // initiateBook() function has been called 
```

# python - 如何在 Python 中对类似的值进行排序

> ID：11595765
> 
> 赞同：4
> 
> 时间：2012-07-21T20:54:54.553
> 
> 标签：python

我想知道如何对列表中的类似值进行排序，然后将类似的值分解为子列表。

例如：我想要一个可能做类似事情的函数

```
def sort_by_like_values(list):
    #python magic

>>>list=[2,2,3,4,4,10]
>>>[[2,2],[3],[4,4],[10]]
OR
>>>[2,2],[3],[4,4],[10] 
```

我阅读了 sorted api，它可以很好地在他们自己的列表中进行排序，但不会将列表分解为子列表。什么模块可以帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T20:59:08.057

[`groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)从 itertools 模块使用。

```
from itertools import groupby

L = [2, 2, 3, 4, 4, 10]

L.sort()
for key, iterator in groupby(L):
    print key, list(iterator) 
```

结果：

```
2 [2, 2]
3 [3]
4 [4, 4]
10 [10]

```

需要注意的几件事：`groupby`需要按照您希望分组的相同键对它处理的数据进行排序，否则它将不起作用。此外，在继续下一组之前需要使用迭代器，因此请确保存储`list(iterator)`到另一个列表或其他内容。一条线为您提供您想要的结果：

```
>>> [list(it) for key, it in groupby(sorted(L))]
[[2, 2], [3], [4, 4], [10]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T20:59:43.103

检查`itertools`模块，它具有有用的`groupby`功能：

```
import itertools as i
for k,g in i.groupby(sorted([2,2,3,4,4,10])):
    print list(g)

....

[2, 2]
[3]
[4, 4]
[10] 
```

您应该能够修改它以获取列表中的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T21:21:18.663

正如其他人所建议的那样`itertools.groupby`（这将是我的第一选择） - 也可以`collections.Counter`获取密钥和频率，按密钥排序，然后扩展频率时间。

```
from itertools import repeat
from collections import Counter

grouped = [list(repeat(key, freq)) for key, freq in sorted(Counter(L).iteritems())] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T21:57:36.927

如果您不想使用 itertools 并且可以将您的头脑围绕在列表推导上，这也应该可以解决问题：

```
def group(a):
    a = sorted(a)
    d = [0] + [x+1 for x in range(len(a)-1) if a[x]!=a[x+1]] + [len(a)]
    return [a[(d[x]):(d[x+1])] for x in range(len(d)-1)] 
```

`a`你的清单在哪里

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T21:04:35.203

`itertools.groupby()`使用列表理解可以正常工作。

```
In [20]: a = [1, 1, 2, 3, 3, 4, 5, 5, 5, 6]

In [21]: [ list(subgroup) for key, subgroup in itertools.groupby(sorted(a)) ]
Out[21]: [[1, 1], [2], [3, 3], [4], [5, 5, 5], [6]] 
```

请注意，它`groupby()`返回一个迭代器列表，您必须按顺序使用这些迭代器。根据文档：

> 返回的组本身就是一个迭代器，它与 groupby() 共享底层迭代。因为源是共享的，*所以当 groupby() 对象前进时，之前的组不再可见。*因此，如果以后需要该数据，则应将其存储为列表：

# ruby-on-rails - 活动记录#增量！返回 false，但没有错误

> ID：11595773
> 
> 赞同：0
> 
> 时间：2012-07-21T20:56:22.390
> 
> 标签：ruby-on-rails, activerecord, increment

这是我的控制器中的一段代码：

```
 @post.increment!(:views_count) # => false, record not saved, views_count is 0
  @post.errors                   # => is empty
  @post.save!                    # => true, views_count magically incremented to 1 
```

问题是，没有#save！它实际上不起作用：记录未更新，views_count 为 0。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:16:02.660

注意`increment!`来电`update_attribute`，而后者又来电`save(:validate => false)`。这会跳过验证，但[回调链仍在执行](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-save)，并且：

> 如果任何 before_* 回调返回 false，则取消操作并保存返回 false。

您的模型中是否定义了任何`before_*`可能返回 false 但未设置任何内容的回调`errors`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:34:47.420

您是否尝试过重新加载记录？我敢打赌，您正在查看该文件的缓存版本。尝试：

```
@post.increment!(:views_count)
@post.reload 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T21:48:37.130

我认为您使用该方法的方式没有任何问题。

当`increment!`记录无法保存时，返回 false。

我认为您可以尝试的一件可能的事情是将 views_count 属性初始化为 0。我认为它目前可能`nil`不是整数值。而在`nil`价值上，你不能执行`+=`操作员。

要初始化属性的值，请在 db/migrate 文件夹下找到该属性的迁移文件。

将属性代码修改成这样。

```
t.integer :views_count, default: 0 
```

或者，如果您在创建表之外单独添加列...

```
add_column :appropriate_model, :views_count, :integer, default: 0 
```

# c# - 如何从泛型函数返回 null？

> ID：11595777
> 
> 赞同：5
> 
> 时间：2012-07-21T20:56:35.787
> 
> 标签：c#, .net, generics

我有这样的功能：

```
private T DeserializeStream<T>(Stream data) where T : IExtensible
    {
        try
        {
            var returnObject = Serializer.Deserialize<T>(data);
            return returnObject;
        }
        catch (Exception ex)
        {
            this.LoggerService.Log(this.AccountId, ex);
        }

        return null;
    } 
```

一切都很好，除了它抱怨`return null;`部分

> 无法将表达式类型“null”转换为类型“T”

如何从这样的函数返回 null？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T20:57:55.160

您可以添加一个作为类的通用约束`T`（因为结构是值类型并且不能是`null`）。

```
private T DeserializeStream<T>(Stream data) where T : class, IExtensible 
```

正如[@mindandmedia](https://stackoverflow.com/users/1218598/mindandmedia) [评论](https://stackoverflow.com/questions/11595777/how-do-i-return-null-from-generic-function/11595785#comment15346993_11595777)的那样，另一种方法是返回[`default`of`T`](https://stackoverflow.com/q/302096/1583) - 这将允许它处理值类型（例如 a`Nullable<T>`等`int32`）。

# python - 在 Unix 中为 Python 安装命名和善用 shebang

> ID：11595784
> 
> 赞同：8
> 
> 时间：2012-07-21T20:57:52.947
> 
> 标签：python, installation, shebang

我对为 Python 脚本编写 shebang 的标准方法感到困惑。

我有一个普通的“python”链接，取决于系统，它可能是 Python 2.x 或 Python 3.x，这是一个问题，因为两者都不兼容。

作为一个解决方案，我在我的 shebang 中编写了这个版本，并且有类似的东西：

```
#!/bin/env python3.2 
```

但这似乎很愚蠢，因为它会阻止我的脚本在任何其他 3.x 版本中运行

我注意到*有些*系统将 python2 链接到最新版本。这很有帮助，因为这样我就可以编写简单的脚本，比如“Hello World”，它不会在每次发布时都中断。

我已经安装了 Python 2.6、2.7、3.1 和 3.2 从可移植性的角度来看，只使用“python”作为 shebang 没有意义。使用确切的版本会妨碍可维护性。我确实有一个 python2 链接，但不是 python3

是否有任何标准和/或 PEP 指定如何安装 Python？还有一个说我部署到必须有一个 python3 和/或 python2 链接到最新版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:25:09.220

几乎所有适用于 Python 2.x 的东西都可以在 Python 2.7 上保持不变。Python 3.x 和 Python 3.2 也是如此。任何不应该改变的东西（不，应该改变）。

然后它只是通常的命名方案：

### Python 2.x

```
#!/usr/bin/env python 
```

### Python 3.x

```
#!/usr/bin/env python3 
```

# sql - 同时从两个不相关的表中选择

> ID：11595790
> 
> 赞同：1
> 
> 时间：2012-07-21T20:59:13.437
> 
> 标签：sql, select, join

假设我有一个包含很多行和列的表（别名：bigtable），以及一个始终有 1 行但多列的表（别名：1rowtable）。1rowtable 与 bigtable 无关，它只是用于我的脚本使用的一些动态修改的设置。所以我不能为此使用静态 SQLCMD 变量，也不能为此使用普通变量，因为我的脚本有 GO 语句。

现在我想编写一个访问两个表的选择语句。

如果我做：

```
SELECT ... FROM bigtable, 1rowtable 
```

它做了一个 CROSS JOIN 所以这很糟糕，不能走那条路。

如果我对 1rowtable 使用 CTE，我必须使用

```
SELECT field FROM 1rowtable 
```

所以这也很糟糕。与表值函数相同，例如：

```
CREATE FUNCTION getSetting(@name nvarchar(40))
RETURNS TABLE
AS
RETURN (SELECT name FROM 1rowtable WHERE name = @name) 
```

显然我根本不能使用标量函数，因为它只返回特定的数据类型，但设置有不同的数据类型。然而，很明显，我当然想像标量函数一样使用它，而无需执行 'SELECT .. FROM dbo.getfieldfrom1rowtable(..)' 的东西，因为我在查询中经常使用 1rowtable。

我也尝试过：

```
SELECT
  (SELECT
     <expression involving bigtable and 1rowtable>,
     <expression involving bigtable and 1rowtable>,
     <expression involving bigtable and 1rowtable>,
     ...
  FROM 1rowtable)
FROM bigtable 
```

但是当然，如​​果子选择不以存在开头，则它不能选择多个项目...

所以我该怎么做？看来我每次都必须继续使用'SELECT .. FROM dbo.getfieldfrom1rowtable（..）'？只是好奇 ：）

PS。微软 sql 服务器 2008r2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:51:46.493

使用交叉连接将表中的行汇集在一起​​并没有错，尤其是当一个表只有一行时。

使用语法：

```
select bt.*, ort.*
from bigtable bt cross join
     onerowtable ort 
```

当正确使用交叉连接时，它们本质上没有“错误”。问题是当它们被无意使用时。如果您交叉连接具有一百万行的两个表。. . 好吧，您的临时空间将被填满，您的处理器将非常繁忙，并且由于缺乏资源，查询最终会崩溃。

但是，将具有一行的表交叉连接到另一个表完全没有问题。

# android - Android：单个选项卡有多个活动

> ID：11595795
> 
> 赞同：1
> 
> 时间：2012-07-21T20:59:43.853
> 
> 标签：android, tabbar

我需要一个标签才能进行多项活动

例子：

当我单击 ShowGrid Activity 上的按钮时，它需要遍历 Medicine Activity，标签栏指示相同的标签

## 单个选项卡上的 ShopGrid 和医学

```
intent = new Intent().setClass(this, ShopGrid.class); 
spec = tabHost.newTabSpec("Store").setIndicator("Store")  
              .setContent(intent);  
tabHost.addTab(spec);  

intent = new Intent().setClass(this, Medicine.class); 
spec = tabHost.newTabSpec("Store").setIndicator("Store")  
              .setContent(intent);  
tabHost.addTab(spec); 
```

# c# - 将路径存储到 C# 库中的目录

> ID：11595797
> 
> 赞同：0
> 
> 时间：2012-07-21T21:00:25.857
> 
> 标签：c#, .net, architecture, resources

它更多的是“架构”而不是“语言”问题。

我的 .Net 解决方案中有一个类库，它使用与应用程序一起部署的目录中的图像生成一些东西。用户必须能够轻松添加新图像，所以我不能将它们放入资源中。

这个目录附加到这个类库。有没有办法得到它的路径？用于调试的 AppDomain.CurrentDomain.BaseDirectory 返回 /bin/debug/，这当然是不对的。

即 - 我的应用程序安装到 C:\Program Files\MyApp。因此，路径必须是“C:\Program Files\MyApp\ImagesLib”。

但：

我的应用程序从 subversion 下载并保存到 d:\my projects\MyApp。因此，路径必须是“d:\My Projects\MyApp\ImagesLib”。

如何使这条路径通用？该目录是从 Visual Studio 创建的（右键单击/添加/新建文件夹）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:15:00.800

我认为你的架构需要重新思考。

在新的 UAC 世界中，您需要根据每个用户或每台计算机写入特定位置。例如，如果您安装到`Program Files`UAC 下尝试写入您的安装文件夹可能会失败（取决于权限）。

因此，您将需要`Environment.GetSpecialFolder()`与`SpecialFolder`枚举结合使用。

您可以在此处阅读有关这些内容的更多信息：

[http://msdn.microsoft.com/en-us/library/14tx8hby.aspx](http://msdn.microsoft.com/en-us/library/14tx8hby.aspx) [http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

例如，假设您只想在每台计算机上存储：

```
var base_data_folder = Environment.GetSpecialFolder(SpecialFolder.CommonApplicationData);
var data_folder = Path.Combine(base_data_folder,"MyApplication");
var images_folder = Path.Combine(data_folder,"Images"); 
```

在我的 Windows 7 机器上，这相当于：

```
C:\ProgramData\MyApplication\Images 
```

# javascript - Commander.js：脚本不等待用户输入

> ID：11595802
> 
> 赞同：2
> 
> 时间：2012-07-21T21:01:14.743
> 
> 标签：javascript, node.js, command-line-tool

我刚开始使用 node.js 和 command.js 所以这可能是一个愚蠢的问题......

所以我正在尝试制作一个命令行工具，我需要在其中向用户询问一些信息。我正在尝试使用[commander.js](https://github.com/visionmedia/commander.js/)，因为它看起来很简单。问题是当我运行脚本时，它不会等待用户输入答案并执行所有脚本。我怎样才能使这项工作？

这是我组织代码的方式：

```
#!/usr/bin/env node

var program = require('commander');

program
    .version('0.0.1')
    .option('-c, --create', 'Create new stuff')
    .parse(process.argv);

if(program.create){
    console.log('Creating new stuff');

    program.prompt('Name of the stuff: ', function(name){
        var stuffName = name;
    });

    program.prompt('Description of the stuff: ', function(description){
        var stuffDescription = description;
    });
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:14:52.127

您必须将第二个提示放在第一个提示的回调中。

```
program.prompt('Name of the stuff: ', function(name){
    var stuffName = name;
    program.prompt('Description of the stuff: ', function(description){
        var stuffDescription = description;
    });

}); 
```

如果您不这样做，那么两个提示都会立即打印出来；API 是异步的。

# c# - 角色不工作

> ID：11595804
> 
> 赞同：0
> 
> 时间：2012-07-21T21:01:47.353
> 
> 标签：c#, asp.net

我已经通过 ftp 手动发布了我的 asp.net 网站，一切正常（登录、注册等）但角色不起作用，例如：普通用户可以访问仅为管理员创建的页面。

这是我的 web.config：

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="MyConnStrg" connectionString="provider details..etc.."
      providerName="System.Data.SqlClient" />
  </connectionStrings>
    <system.web>
      <roleManager enabled="true" defaultProvider="MyWebsiteTC">
        <providers>
          <add name="MyWebsiteTC"
          type="System.Web.Security.SqlRoleProvider"
          applicationName="/"
          connectionStringName="MyConnStrg" />
        </providers>
      </roleManager>
      <membership defaultProvider="MyWebsiteTCMembershipProvider">
        <providers>
          <add name="MyWebsiteTCMembershipProvider"
          type="System.Web.Security.SqlMembershipProvider"
          connectionStringName="MyConnStrg"
          enablePasswordRetrieval="false"
          enablePasswordReset="true"
          requiresQuestionAndAnswer="true"
          applicationName="/"
          requiresUniqueEmail="true"
          passwordFormat="Hashed"
          maxInvalidPasswordAttempts="5"
          minRequiredPasswordLength="7"
          minRequiredNonalphanumericCharacters="1"
          passwordAttemptWindow="10"
          passwordStrengthRegularExpression=""/>
        </providers>
      </membership>

      <compilation debug="true" targetFramework="4.0" />
      <authentication mode="Forms">
        <forms name=".KKDS"
          timeout="30"
          slidingExpiration="true"
          cookieless="UseCookies"
          defaultUrl="~/Default.aspx"
       />
      </authentication>
    </system.web>
</configuration> 
```

管理文件位于带有此 web.config 的文件夹中：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <customErrors mode="Off"/>
    <authorization>
      <allow roles="Client" />
      <deny users="?"/>
    </authorization>

  </system.web>
</configuration> 
```

为每个用户添加了角色，一切正常，但角色身份验证没有。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:09:29.640

Wiktor Zychla 提出了一个很好的建议。如果该站点在您发布之前正在运行，我认为问题可能与`ApplicationName`...有关。我为其他处理`ApplicationName`. 看这个...

[使用 .net Membership Provider 从开发到生产](https://stackoverflow.com/questions/8945705/going-from-dev-to-prod-with-net-membership-provider/11447246#11447246)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:07:36.200

我认为应该是：

```
 <authorization>
    <allow roles="Client" />
    <deny users="*"/>
 </authorization> 
```

因为您希望允许角色用户`Client`并拒绝**其他任何人**（而不是拒绝未登录的用户，如您的代码段中所示）。

# mysql - 使用 Navicat 在 2 列上创建 Key

> ID：11595805
> 
> 赞同：2
> 
> 时间：2012-07-21T21:01:59.643
> 
> 标签：mysql, sql, navicat

`Design Table`我可以在软件部分使用 Navicat 创建主键。但是，我似乎无法在 2 列上创建一个键，这在 MySQL 语句中将类似于

```
CREATE TABLE casting(movieid INTEGER,
                 actorid INTEGER,
                 PRIMARY KEY (movieid, actorid)
                 ) 
```

可以使用 Navicat 中的 GUI 来完成吗？或者我必须手动编写查询并运行它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:40:46.383

您只需要单击最后一个单元格。

![在此处输入图像描述](../Images/0a1f07984facdf15b6b6edc390cb7914.png)

# iphone - addSubView 一个大视图变成一个小视图会发生什么

> ID：11595806
> 
> 赞同：1
> 
> 时间：2012-07-21T21:02:09.120
> 
> 标签：iphone, uiview

`calendarView`有一个带有暗视图（称为）的xib

![在此处输入图像描述](../Images/71a0e0df1f6a2b9f171e1570caea90a9.png)

接下来是我添加一个名为的子`calendar`视图（这是此[页面](http://tapku.com/)的日历视图）

```
[self.calendarView addSubview:calendar]; 
```

结果是：`calendar`添加了，但覆盖了`calendarView`

![在此处输入图像描述](../Images/bd9dade9b821d6e2c30798a6544b99ae.png)

我的问题 ：

1.  当您尝试将更大的视图添加到小视图中时会发生什么。
2.  如何使大视图适合小视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:17:08.023

一般来说，子视图会比父视图更大。如果您不希望这种情况发生，您应该将子视图的框架设置为小于或等于父视图的边界。如果子视图是您制作的服装类，您可能应该将其更改为正确的大小，否则我认为最好的方法是使用变换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T21:12:46.993

1.  没什么特别的。较大的视图将根据其框架放置。
2.  很简单，只需将它们的大小相等（并且添加的视图的原点为 (0,0) ）。

# c++ - C++ 模板类重载 [] 运算符

> ID：11595810
> 
> 赞同：2
> 
> 时间：2012-07-21T21:02:56.500
> 
> 标签：c++, templates, map, operator-overloading

我想就模板参数重载模板类的 [] 运算符。像这样：

```
template<
    typename T,
    template<typename> class Property, 
    template<typename> class Key1, 
    template<typename> class Key2>
class a_map 
{
public:
    const Property<T>& operator[](const Key1<T>& k) const
    { return _values[k.index()]; }
    const Property<T>& operator[](const Key2<T>& k) const
    { return _values[k.index()]; }
protected:
    std::vector<Property<T> > _values;
}; 
```

我会像这样使用这个类：

```
int main()
{
    a_map<float, prop, key_a, key_b> pm;
} 
```

基本上我希望能够访问`_values`向量内的元素，而不必担心`Key`类型。重要的是他们有一个`index()`成员。

但是我收到以下错误

> 错误 C2535：'const Property &a_map::operator [](const Key1 &) const'：成员函数已定义或声明

即使`key_a`和`key_b`是两个完全不同~~类型~~的类模板。

我错过了什么吗？编译器是否害怕在某些情况下`Key1<T>`并且`Key2<T>`实际上可能是同一类型？

**编辑** 这些是使用的类模板`main`

```
template<typename T>
struct prop 
{
    T weight;
    T height;
};

template<typename T>
class key_a
{
public:
    int index() { return _i; }
private:
    int _i;
};

template<typename T>
class key_b
{
public:
    int index() { return 3; } // Always return 3 
```

**编辑** 我正在使用 MVC++ 2008 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:22:43.407

由于除了参数类型之外，您的两个 operator[] 都是相同的，为什么不将它们模板化呢？

```
 template <typename TT>
    const Property<T>& operator[](const TT& k) const
    {
        return _values[k.index()];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T21:28:06.997

您需要声明您的`index()`函数，`const`因为在`a_map`模板内部您通过`const`对象调用它们

```
template<typename T> class key_a {
public:
    int index() const // <- `const` is necessary
      { return _i; }
private:
    int _i;
};

template<typename T> class key_b {
public:
    int index() const // <- `const` is necessary
      { return 3; } 
}; 
```

但除此之外，一切都可以编译并且对我来说工作正常。

* * *

在 VS2010 编译器中尝试过，得到和你一样的错误。这显然是 MSVC++ 编译器中的编译器错误。模板模板参数的处理不正确。

为了解决这个问题，我能够使用这种技术

```
template<
    typename T,
    template<typename> class Property, 
    template<typename> class Key1, 
    template<typename> class Key2>
class a_map 
{
public:
    const Property<T>& operator[](const typename Key1<T>::self& k) const
    { return _values[k.index()]; }
    const Property<T>& operator[](const typename Key2<T>::self& k) const
    { return _values[k.index()]; }
protected:
    std::vector<Property<T> > _values;
}; 
```

并将关键模板定义为

```
template<typename T> class key_a {
public:
    typedef key_a self;
    int index() const { return _i; }
private:
    int _i;
};

template<typename T> class key_b {
public:
    typedef key_b self;
    int index() const { return 3; } 
}; 
```

这是不优雅的，但它使它与 MSVC++ 编译器一起正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T21:14:27.567

像这样编译得很好...注意应该如何定义 Prop/K1/K2。

```
#include <vector>

template<
    typename T,
    template<typename> class Property, 
    template<typename> class Key1, 
    template<typename> class Key2>
class a_map 
{
public:
    const Property<T>& operator[](const Key1<T>& k) const
    { return _values[k.index()]; }
    const Property<T>& operator[](const Key2<T>& k) const
    { return _values[k.index()]; }
protected:
    std::vector<Property<T> > _values;
};

template <typename T> struct K1 { int index() const { return 0; } };
template <typename T> struct K2 { int index() const { return 0; } };
template <typename T> struct Prop { };

int main()
{
    a_map<float, Prop, K1, K2> m;
} 
```

# c - C程序中bash sleep和sleep的区别

> ID：11595812
> 
> 赞同：1
> 
> 时间：2012-07-21T21:03:08.600
> 
> 标签：c, bash

来自：[http ://www.utdallas.edu/~kcooper/teaching/5375/fall08/Tutorial8/tutorial8.htm](http://www.utdallas.edu/%7Ekcooper/teaching/5375/fall08/Tutorial8/tutorial8.htm)

（“C 程序中 bash sleep 和 sleep 的区别”一节）：

> bash sleep 命令和 C 程序的 sleep 函数的工作方式有很大的不同。C 程序的 sleep 函数是一个简单的函数调用。调用时，它会将 CPU 交给操作系统，以便它可以调度其他需要 CPU 的进程。然后在指定的秒数之后，调用睡眠的进程再次开始工作。
> 
> sleep 命令 bash 的工作方式不同。调用此命令时，它会创建自己的子进程。它运行指定的秒数，然后退出到调用进程。

1.  为什么 bash 睡眠这么复杂？（为什么bash sleep是通过fork实现的？）
2.  为什么 bash sleep 不能像 C sleep 一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:09:35.760

我认为这些信息只是误导。如果`sleep`是由shell调用的外部程序（`/bin/sleep`），那么所有额外的工作都是调用外部程序；睡眠程序本身只是调用睡眠函数。没有理由 shell 不能为`sleep`只调用`sleep`函数而不分叉新进程的命令提供内置命令。然而，这些好处充其量是值得怀疑的。由于标准`sleep`命令将始终休眠至少一秒钟，并且启动外部程序的开销约为微秒，因此我看不出它有任何帮助性能的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T21:13:11.283

> 为什么 bash 睡眠这么复杂？（为什么bash sleep是通过fork实现的？

因为这就是 bash 所做的，所以它运行程序（在 unix 上是通过 fork()/exec() 完成的）所以碰巧有人编写了一个程序，它只`/bin/sleep`休眠指定的秒数。

> 为什么 bash sleep 不能像 C sleep 一样？

如果有人将 sleep 实现为 bash 的内置命令/函数，但还没有人这样做，那么它可能会带来好处，而且可能不值得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T21:55:24.633

因为在执行外部命令时，您可以将“睡眠”（默认为`/bin/sleep`）替换为您自己的睡眠，例如 in `$HOME/bin/sleep`- 只需简单的 PATH 更改...

外部命令=自由。

正如@nos 已经告诉过的：bash 正在为设计的 -> 执行程序所做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T15:38:39.707

那么 bash 只是为了执行其他程序或脚本。想想在后台模式下调用睡眠。Bash 应该执行脚本而不理解和实现其中的逻辑。行为是有道理的。

# python - 如何正确扩展 Python 中的其他类？（蟒蛇v3.3）

> ID：11595815
> 
> 赞同：6
> 
> 时间：2012-07-21T21:03:38.683
> 
> 标签：python, oop, class

在过去的几天里，我开始学习 python，在探索面向对象的编程时遇到了问题。我在运行 pydev 插件时使用 Eclipse，在 python 3.3 beta 上运行，并且使用的是 windows 64 位系统。

我可以很好地初始化一个类并使用其中的任何方法，只要我不尝试扩展超类（我在不同的源文件中编码的每个类）例如，以下代码编译并运行良好。

```
class pythonSuper:
    string1 = "hello"
    def printS():
        print pythonSuper.string1 
```

以及访问和运行它的代码......

```
from stackoverflow.questions import pythonSuper
class pythonSub:
    pysuper = pythonSuper.pythonSuper()
    pysuper.printS() 
```

就像我说的，这行得通。以下代码不

```
class pythonSuper: """Same superclass as above. unmodified, except for the spacing"""
string1 = "hello"
def printS(self):
    print(pythonSuper.string1) 
```

嗯，这并不完全正确。至少据我所知，超类绝对没问题。这是奇怪的子类

```
from stackoverflow.questions import pythonSuper
class pythonSub(pythonSuper):
    pass

pythonObject = pythonSub()
pythonSub.pythonSuper.printS() 
```

当子类运行时 Eclipse 打印出这个错误

```
Traceback (most recent call last):
   File "C:\Users\Anish\workspace\Python 3.3\stackoverflow\questions\pythonSub.py",           
   line 7, in <module>
class pythonSub(pythonSuper):
TypeError: module.__init__() takes at most 2 arguments (3 given) 
```

我不知道是怎么回事。我一直在从 thenewboston 的教程中学习 python，但是那些已经过时了（我认为他的教程代码使用了 python 2.7 版）。他还在 IDLE 中编码，这意味着他的类都包含在一个文件中。然而，我的都编码在自己的文件中。这意味着我不知道我得到的代码错误是由于过时的语法还是我对这种语言缺乏知识的结果。但我离题了。如果有人可以回复解决方案和/或解释代码出错的原因以及我可以做些什么来解决它。最好有解释。我宁愿知道我做错了什么，这样我就可以避免和解决类似情况下的问题，而不仅仅是复制和粘贴一些代码并查看它是否有效。谢谢，期待你的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:21:04.123

我运行了您的代码，尽管进行了一些修改并且运行良好。这是我的代码：

蟒蛇超级：

```
class pythonSuper:
    string1 = 'hello'
    def printS(self):
        print(self.string1) 
```

主要的：

```
from pythonSuper import pythonSuper as pySuper

class pythonSub(pySuper):
    pass

pythonObject = pythonSub()
pythonObject.printS() 
```

**注意：**我对您的代码所做的更改如下：

在您的代码中，您编写的代码`pythonSub.pythonSuper.printS()`不正确，因为`pythonSub`您已经支持`printS()`直接从超类继承的方法。因此，无需在该语句中显式引用超类。我用来代替上述声明的声明`pythonObject.printS()`似乎已经解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:07:28.600

`pythonSuper`指的是模块，而不是类。

```
class pythonSub(pythonSuper.pythonSuper): 
    pass 
```

# excel - 工作表中的行数

> ID：11595816
> 
> 赞同：15
> 
> 时间：2012-07-21T21:03:40.040
> 
> 标签：excel, vba

目标：
变量应包含特定工作表中的行数。

问题：
我需要 Excel VBA 中的什么语法代码来计算工作表中的行数？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-21T22:17:21.440

使用 usedrange 方法是我的最爱之一，但需要小心处理。它有一些缺陷/陷阱。excel 不能很好地跟踪使用的范围是一个已知问题。通过 VBA 对使用范围的任何引用都会将该值重置为当前使用的范围。因此，当您获得使用的范围时，请尝试运行此子过程：

```
Dim lRowCount as Long

Application.ActiveSheet.UsedRange
lRowCount = Worksheets("MySheet").UsedRange.Rows.Count 
```

但请注意，这将为您提供已**使用**的范围计数，因此如果您的工作簿顶部有空白行（人们通常会这样做，以便为过滤条件等内容留出空间），那么它们将不会被计算在内。usedrange 方法也会受到格式化的影响。

如果你想使用最后一行，这就是我认为你想要的，那么你可以使用更可靠的 find 方法：

```
Dim rLastCell As Range
Dim lLastRow  As Long

Set rLastCell = ActiveSheet.Cells.Find(What:="*", After:=.Cells(1, 1), LookIn:=xlFormulas, LookAt:= _
xlPart, SearchOrder:=xlByRows, SearchDirection:=xlPrevious, MatchCase:=False)

If Not rLastCell Is Nothing Then lLastRow = rLastCell.Row 
```

如果您知道您至少有一个包含数据的单元格，那么您可以将上述内容简化为：

```
Dim lLastRow  As Long

lLastRow = ActiveSheet.Cells.Find(What:="*", After:=.Cells(1, 1), LookIn:=xlFormulas, LookAt:= _
xlPart, SearchOrder:=xlByRows, SearchDirection:=xlPrevious, MatchCase:=False).Row 
```

[请参阅此处关于我上面谈到的使用范围](http://www.j-walk.com/ss/excel/tips/tip73.htm)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-21T21:49:49.250

你也可以试试：

```
i = Sheets("SheetName").UsedRange.Rows.Count 
```

但是，如果您开始删除和清除行，这可能会出现一些问题。

一个更好的方法是：

```
i = Cells(Sheets("SheetName").Rows.Count, 1).End(xlup).Row 
```

这假设每一行在第 1 列中都有数据。

# javascript - 在 javascript 中渲染 HTML 时包含外部 CSS

> ID：11595817
> 
> 赞同：0
> 
> 时间：2012-07-21T21:03:48.630
> 
> 标签：javascript, css

我正在创建一个工具，当放置一个简单的 javascript 行时，它会在网站上显示横幅。像这样的东西足以在任何页面上显示横幅。

```
<script type="text/javascript" src="http://mysite.com/mytool/"></script> 
```

基本上它的代码是这样的

```
var div = document.createElement('div')
document.write('<div>all content goes here</div>'); 
```

由于它是一个 300 行的应用程序，因此涉及到很多 CSS。

在通过 javascript 进行这种内联 HTML 渲染时，有没有办法嵌入外部 CSS 文件？

我没有使用 jQuery 或任何其他库，因为我试图尽可能减少输出大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T21:08:28.137

正如@Pointy 指出的那样，您可以打印链接标签：

```
document.write('<link href=stylesheet href=foo/style.css>'); 
```

但更好的是把它放在头部：

```
document.head.innerHTML += '<link href=stylesheet href=foo/style.css>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T21:08:35.527

```
head = document.getElementsByTagName('head')[0],
style = document.createElement('link');
style.type = 'text/css';
style.href = "pathtocss.css"
style.rel = "stylesheet"
head.appendChild(style); 
```

# java - 使用 spring 开始创建标准 Java 应用程序

> ID：11595818
> 
> 赞同：1
> 
> 时间：2012-07-21T21:04:00.523
> 
> 标签：java, spring

我会使用 Spring 框架创建 Java 标准应用程序，但我在网上找到的所有示例都与创建 Web 应用程序有关。如何开始使用 MVC 模式使用 Spring 创建标准应用程序？可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:08:31.593

当您需要一个简单的应用程序时，请尝试在 google 中搜索 - 框架名称 hello world。在这种情况下，这是一个简单的弹簧[http://www.roseindia.net/spring/spring3/spring-3-hello-world.shtml](http://www.roseindia.net/spring/spring3/spring-3-hello-world.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:38:47.377

您是否尝试过 springsource 工具套件（Sts）？它提供了不同的 spring 项目模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T21:09:30.300

您通常会有一个启动类，它使用配置初始化 Spring 上下文。这应该足以初始化并将您的对象连接在一起。

如果需要，您可以从上下文中提取要引用的对象。

# vb.net - 在 WinForms 中模拟禁用的焦点行为

> ID：11595820
> 
> 赞同：0
> 
> 时间：2012-07-21T21:04:19.160
> 
> 标签：vb.net, winforms

根据[这篇文章](https://stackoverflow.com/questions/10873583/enabled-scrollbar-in-a-disabled-textbox-in-vb-net-for-winforms)，我试图模仿

```
Enabled = False 
```

没有实际禁用控件。（在我的情况下是多行文本框）

接下来我要完成的是通过禁用控件的鼠标来模仿焦点行为。如果我单击禁用的控件，它将不会获得焦点，并且以前具有焦点的控件不会失去焦点。

到目前为止我想出了什么：我可以在 WndProc 中拦截 WM_SETFOCUS 消息，这样我的控件就不会收到焦点。

```
Private Const WM_SETFOCUS = &H7

Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
    If Me.ReadOnly AndAlso (m.Msg = WM_SETFOCUS) Then Exit Sub
    MyBase.WndProc(m)
End Sub 
```

这样做的问题是，以前的控制失去了焦点，这不是故意的。如何防止即使单击鼠标也会在焦点行为中做任何事情？有没有办法做到这一点？

**更新：06.08.12**

正如贾斯汀所建议的那样，我通过将其更改为自动滚动面板中的标签来解决问题。一个最小的代码示例如下：

```
Imports System.Windows.Forms

Public Class ScrollableDisabledTextBox
    Inherits TextBox

    Private xLabel As Label
    Private xPanel As Panel

    Public Sub New()
        InizializeComponent()
    End Sub

    Private Sub InizializeComponent()
        xPanel = New Panel
        xPanel.AutoScroll = True
        xPanel.BorderStyle = BorderStyle.FixedSingle

        xLabel = New Label
        xLabel.Enabled = False
        xLabel.AutoSize = True
        xPanel.Controls.Add(xLabel)

        Me.Me_SizeChanged()
    End Sub

    Private Sub Me_EnabledChanged() Handles Me.EnabledChanged
        If Me.Enabled Then
            Me.Show()
            xPanel.Hide()
        Else
            xPanel.Show()
            Me.SendToBack()
            Me.Hide()
        End If
    End Sub

    Private Sub Me_TextChanged() Handles Me.TextChanged
        xLabel.Text = Me.Text
    End Sub

    Private Sub Me_SizeChanged() Handles Me.SizeChanged
        xPanel.Size = Me.Size
        xLabel.MaximumSize = New System.Drawing.Size(xPanel.Size.Width, 0)
    End Sub

    Private Sub Me_ParentChanged() Handles Me.ParentChanged
        xPanel.Location = Me.Location
        'If parent changed multiple times, remember to remove panel from old parent!
        If Not Me.Parent.Controls.Contains(xPanel) Then
            Me.Parent.Controls.Add(xPanel)
        End If
    End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:30:51.443

我不相信你想做的事情是可能的。如果您没有焦点，则滚动将不起作用。

但是，我认为您应该重新考虑最初的问题。为什么不在会自动滚动的面板中使用`AutoSize = true, MaximumSize.Width = ParentWidth`标签（可以禁用）。这听起来像你真正想要的。

# html - 如何设置浏览器的自动完成下拉框的样式？

> ID：11595824
> 
> 赞同：8
> 
> 时间：2012-07-21T21:05:01.320
> 
> 标签：html, css, autocomplete

![http://dns.themeister.se/styleable.png](../Images/50d3bacaa8f3f265ce613258f1ac650f.png)

如您所见，白盒是我经常使用的用户名。

自动完成框有白色背景。是否可以将其更改为我想要的任何内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T21:09:00.833

无法修改浏览器的本机功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-04T09:33:24.317

***因为它不在 DOM 中，所以***不可能设置自动完成下拉菜单的样式。

# android - ImageView 的 xml 中的 android:contentDescription="@string/desc" 是什么？

> ID：11595828
> 
> 赞同：6
> 
> 时间：2012-07-21T21:05:53.863
> 
> 标签：android, image, accessibility

我添加了一个`imageView`输入，`GraphicalLayout`但它在我的真实设备上看起来与在 AVD 上不同。

我发现我需要添加`contentDescription`一个布局`.xml`，但是当我添加时：`contentDescription="@string/desc"`

有一个错误：

> “找不到与给定名称匹配的资源（在 'contentDescription' 处，值为 '@string/desc'）”

这个字符串“desc”是什么？它应该是什么样子？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-21T21:12:26.293

它适用于 Android 的辅助功能。这`contentDescription`是读回给（假设是盲人或视力障碍用户）的内容，因此他们知道图片是什么，因为他们无法查看它。

至于回答你的问题，@iturki 给出了它的开始。您编写用于描述的字符串`strings.xml`并给它一个`name`'desc' 或任何您想要的，然后您将`contentDescription`ImageView 中的值设置为`@string/desc`，无论是在布局中还是以编程方式。就像我之前说的，这是为了帮助视力不佳的用户大致了解图像所描绘的内容:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-21T21:09:34.903

那是为了辅助功能（例如，对于屏幕阅读器）。您应该定义一个描述图像的字符串资源，并在 contentDescription 中引用它。请参阅 iturki 的答案以了解如何执行此操作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-21T21:08:48.633

您需要将其添加到您的`string.xml`文件中：

```
<string name="desc">your desc goes here</string> 
```

虽然我不知道为什么你需要添加`contentDescription`到你的 imageView 来解决不一致的外观问题！我不认为这会解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-23T13:24:12.350

而不是使用内容描述和字符串描述，只需在您的图像视图上使用 tools:ignore="ContentDescription"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-31T07:46:17.367

`public void setContentDescription (CharSequence contentDescription)`定义简要描述视图内容的文本。

> 内容描述简要描述了视图，主要用于辅助功能支持以确定应如何向用户呈现视图。对于没有文本表示的视图，例如 ImageButton，有用的内容描述解释了视图的作用。例如，用于拨打电话的带有电话图标的图像按钮可以使用“呼叫”作为其内容描述。用于保存文件的软盘映像可以使用“保存”。

# spring-mvc - 带有 ActiveMQ、Camel 和 Jetty 的 Spring AsyncServlet

> ID：11595829
> 
> 赞同：0
> 
> 时间：2012-07-21T21:06:09.660
> 
> 标签：spring-mvc, jetty, activemq, apache-camel

我正在尝试将[Spring AsyncServlet](http://blog.springsource.org/2012/05/13/spring-mvc-3-2-preview-adding-long-polling-to-an-existing-web-application/)与 Camel 和 ActiveMQ 一起使用。我正在使用以下版本。

```
 <spring.version>3.2.0.M1</spring.version>
    <camel.version>2.10.0</camel.version>
    <jetty.version>8.1.3.v20120416</jetty.version>
    <activemq.version>5.6.0</activemq.version> 
```

我想将消息推送到连接到服务器（Jetty）的客户端。

我的骆驼路线如下所示。

```
from("mina:udp://source_machine:9998").to("activemq:myqueue"); 
```

我的 Spring/Camel 配置中基于[this](http://camel.apache.org/activemq.html)有以下内容。

```
 <bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="vm://localhost:61616" />
</bean>

<bean id="pooledConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory">
    <property name="maxConnections" value="8" />
    <property name="maximumActive" value="500" />
    <property name="connectionFactory" ref="jmsConnectionFactory" />
</bean>

<bean id="jmsConfig" class="org.apache.camel.component.jms.JmsConfiguration">
    <property name="connectionFactory" ref="pooledConnectionFactory" />
    <property name="transacted" value="false" />
    <property name="concurrentConsumers" value="10" />
</bean>

<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="configuration" ref="jmsConfig" />
</bean> 
```

使用上述配置，我可以将消息输入到我的队列中（至少我没有收到任何错误。）但是，我不知道如何从这个队列中读取。

1.  这是使用 Spring、Camel 和 Jetty 时配置 ActiveMQ 的正确方法吗？
2.  如何添加/注册 MessageListener`javax.jms.MessageListener`以便可以从队列中读取。
3.  如何控制队列大小并使队列非持久化？
4.  可以添加多个监听器

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:22:18.490

你的配置看起来很适合 activemq。不知道码头。您提供的代码段中没有码头配置。

在骆驼路由中，您可以简单地使用 from activemq 端点来监听队列。

from("activemq:myqueue").to("log:test");

顺便提一句。我通常使用 jms ednpoint 而不是 ActiveMQ 。这样做的好处是，如果您必须在某些时候切换到另一个 jms 提供程序，它会更容易。

您还可以使用 connectionfactory 并在 bean 中使用您自己的 DefaultMessageListenerContainer。请参阅 spring 配置以了解如何执行此操作，但这与骆驼无关。

您可以在 activemq 配置中控制队列大小。使用[http://activemq.apache.org/producer-flow-control.html](http://activemq.apache.org/producer-flow-control.html)。

您不能使队列不持久，但可以将发送的消息定义为非持久性。[http://activemq.apache.org/how-do-i-disable-persistence.html](http://activemq.apache.org/how-do-i-disable-persistence.html)

您可以定义许多侦听器，甚至可以使用上面 from 端点上的选项 maxConcurrentConsumers 为一个侦听器定义线程数。

# php - PHP 未解释，显示在查看源代码中

> ID：11595830
> 
> 赞同：14
> 
> 时间：2012-07-21T21:06:12.630
> 
> 标签：php, apache

我希望这将是一个有用的页面，用于开始运行 php 代码以及解决当前问题我有一些非常简单的代码，如下所示：

```
<html>
<head>
<title> Practice</title></head>
<body>
This is HTML
<?php
echo "This is PHP";
?>
</body>
<html> 
```

这是在运行 apache 的 ec2 网站上上传的。代码不会被解释，当您查看页面的源代码时，它会显示 php 代码。

你可以看到[页面](http://ec2-184-72-69-40.compute-1.amazonaws.com/practice1.php)。

有任何想法吗？php 代码是如此基本，以至于我认为它可能与 apache 配置有关。请让我知道您需要的任何其他信息，我会提供它，希望能告诉我如何获得它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-01-19T22:00:14.923

您可以使用安装**libapache2-mod-php5**

```
apt-get install libapache2-mod-php5 
```

为我工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-21T21:10:28.603

你确定你安装了php？如果是，您需要确保 apache 将`.php`文件与 php 处理程序相关联。在中查找类似于以下内容的条目`/etc/apache/apache.conf`

```
 LoadModule php5_module modules/libphp5.so 
```

和

```
 application/x-httpd-php        php php5 
```

更改文件后，您需要通过以下方式重新启动 apache`sudo service httpd restart`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-21T21:10:11.110

您可能在 .htaccess 文件或 Apache 配置本身中需要 addHandler 或 addType：例如 AddType application/x-httpd-php .php

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-16T07:40:48.237

如果您使用的是 php7，请确保您安装了此模块。

```
sudo apt-get install libapache2-mod-php7.0 
```

将 7.0 替换为您正在使用的 php 版本。

要查找 php 的版本，请使用

```
php -v 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-20T13:55:24.810

就我而言，我的`/var/www/`文件夹权限错误。

我不得不跑：

```
sudo chown -R www-data /var/www/
sudo chgrp -R www-data /var/www/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-03T04:28:46.467

如果您在用户目录中有网页的内容，例如：

```
/home/*/public_html 
```

然后你需要启用执行这些，默认情况下它是禁用的：

```
# Running PHP scripts in user directories is disabled by default
# 
# To re-enable PHP in user directories comment the following lines
# (from <IfModule ...> to </IfModule>.) Do NOT set it to On as it
# prevents .htaccess files from disabling it.
<IfModule mod_userdir.c>
    <Directory /home/*/public_html>
        php_admin_flag engine Off
    </Directory>
</IfModule> 
```

只需注释掉文件中的这段代码：

```
/etc/apache2/mods-enabled/php7.3.conf 
```

根据您的系统、PHP 版本等调整路径和文件名。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-13T10:49:55.253

添加行：

```
SetHandler application/x-httpd-php 
```

在配置文件中为我工作

# php - 从 php 检索 jquery 数据

> ID：11595835
> 
> 赞同：0
> 
> 时间：2012-07-21T21:06:58.570
> 
> 标签：php, jquery, ajax

每当我在 Ajax 中使用类和大量包含时，我的数据变量总是包含页面的完整 HTML，而不仅仅是我回显的简单响应。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:11:28.390

创建一个单独的 PHP 文件来处理您的请求。这样，只有响应数据会传递给您的 ajax。

```
 <?php    
    if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
        if(isset($_POST['add_product'])){
            // Add function goes here
        }
        if(isset($_POST['delete_product'])){

            // Delete function goes here
        }
        if(isset($_POST['update_product'])){

            // Update function goes here
        }
    }else{ die('No Direct Access');}
?> 
```

# php - 通过引用传递，在 PHP 中具有可变数量的参数？

> ID：11595836
> 
> 赞同：0
> 
> 时间：2012-07-21T21:07:00.907
> 
> 标签：php, pass-by-reference

我有一个接受可变数量参数的函数，我必须*通过引用*将它们传递给另一个函数。

如

```
function my_function($arg0, $arg1, $arg2, ...)
{
    my_other_function(&$arg0, &$arg1, &$arg2, ...); 
} 
```

这样当我通过引用传递事物时`my_function`，`my_other_function`也会通过引用获取它们。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:13:20.313

我想知道你为什么需要这个。一般来说，PHP 中的[引用很糟糕](http://schlueters.de/blog/archives/125-Do-not-use-PHP-references.html)。

如果你真的想这样做，唯一正确的方法（忽略调用时传递引用黑客，无论如何它不再适用于 PHP 5.4）是使用包装参数的数组：

```
function myfunc(array $data) {
    $data[0] += 42;
    /* ... */
}

$var = 0;
myfunc(array(&$var /*, ... */));
echo $var; // prints 42 
```

为了传递给另一个函数，您可以使用[call_user_func_array()](http://php.net/call_user_func_array)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T21:30:45.300

从技术上讲，您没有这样做：

```
function my_function($arg0, $arg1, $arg2, ...)
{
    my_other_function(&$arg0, &$arg1, &$arg2, ...); 
} 
```

但是这个：

```
function my_function(&$arg0, &$arg1, &$arg2, ...)
{
    my_other_function($arg0, $arg1, $arg2, ...); 
} 
```

然而，正如@johannes[已经写](https://stackoverflow.com/a/11595899/367456)的那样，对于 PHP 中引用的可变数量的参数没有很好的支持（谁知道更好）。[`func_get_args`^(*例如，文档*)](http://php.net/func_get_args)不适用于引用。

而是利用该建议通过数组参数传递所有引用。这样可行。

```
function my_function(array $args)
{
    my_other_function($args); 
} 
```

# jquery - PhoneGap：更新文件 (.html) 以供进一步离线使用

> ID：11595837
> 
> 赞同：1
> 
> 时间：2012-07-21T21:07:20.040
> 
> 标签：jquery, html, cordova

我想要一个只在表格中提供简单信息的应用程序。我使用PhoneGap。我现在得到了我的信息，我可以将它们写在 HTML 文件中。但是会有一些变化，我是否必须等待发布，或者是否可以`infos.html`通过单击刷新按钮从我的服务器获取新文件并将其存储在本地，这样用户仍然可以在不使用的情况下获取它网络连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T23:54:07.347

您无法替换本地文件。您*可以*做的是使用 Javascript 动态构建您的界面，并使用 AJAX 为它们下载 HTML。您可以使用 将其存储在本地以供离线访问`window.localStorage`。

# c# - 防止鼠标按方向移动

> ID：11595839
> 
> 赞同：0
> 
> 时间：2012-07-21T21:07:23.773
> 
> 标签：c#, winforms

如果我的某些情况发生，我正在寻找一种防止鼠标移动的方法。

请注意，我不想处理 OnMouseMove 事件，因为这对我来说太晚了。

我需要类似 Cursor.Clip 属性的东西。是否有任何 API 能够禁用某些鼠标移动方向？一种 ApiMouse.DisableMovement(Directio.Up | Direction.Down | Direction.Left | Direction.Right) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:23:26.427

如果您不喜欢覆盖`OnMouseMove`，那么您可能会喜欢覆盖[WndProc](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)。“捕捉”窗口鼠标移动消息并根据您的规则丢弃它们。这是我知道的最快的方法。

```
private const int WM_MOUSEMOVE = 0x0200;
private const int MK_LBUTTON = 0x0001;
protected override void WndProc(ref Messsage msg)
{
    switch(msg.Msg)
    {
      case WM_MOUSEMOVE: // If you don't want the cursor to move, prevent the code from reaching the call to base.WndProc
              switch (msg.WParam.ToInt32())
              {
                    case MK_LBUTTON: // the left button was clicked
                         break; 
              }
              break;
    }
    base.WndProc(ref msg);
} 
```

使用`LParam`和`WParam`为您提供有关鼠标当前状态的更多信息。检查[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645616%28v=vs.85%29.aspx)以获得更好的理解。

**编辑** 以获得鼠标的坐标，检查这个[问题。](https://stackoverflow.com/questions/4471231/get-the-coordinates-of-a-wm-nchittest-message). 它表明：

```
int x = msg.LParam.ToInt32() & 0x0000FFFF;
int y = (int)((msg.LParam.ToInt32() & 0xFFFF0000) >> 16)
Point pos = new Point(x, y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T02:18:15.390

在对先前答案的评论中，您参考了先前的问题[“在客户端桌面区域内移动表单”](https://stackoverflow.com/questions/11531088/form-move-inside-client-desktop-area)。已接受答案中的代码可防止将窗口移出桌面。现在您想在用户拖动它时将光标“固定”到窗口上。因此，如果窗口不能移动得更远，光标也不应该移动得更远。

如果我对您的问题的理解是正确的，您应该处理[WM_NCLBUTTONDOWN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645620%28v=vs.85%29.aspx)消息来计算鼠标移动的限制。然后，您可以使用`Cursor.Clip`来应用这些限制。

但是，如果您在 WM_NCLBUTTONDOWN 消息中应用剪辑矩形，它将立即被删除。如果你在 WM_MOVING 消息中应用它，它会在拖动结束时自动删除。

这也是上述问题的一个解决方案：如果鼠标只能在用户拖动窗口时在计算出的矩形中移动，那么窗口本身只能在允许的区域内移动。

```
public const int WM_MOVING = 0x0216;
public const int WM_NCLBUTTONDOWN = 0x00A1;
public const int HT_CAPTION = 0x0002;

private Rectangle _cursorClip = Rectangle.Empty;

protected override void WndProc(ref Message m)
{
    switch (m.Msg)
    {
        case WM_NCLBUTTONDOWN:
            if (m.WParam.ToInt32() == HT_CAPTION)
            {
                Point location = Cursor.Position;
                Rectangle screenBounds = Screen.PrimaryScreen.Bounds;
                Rectangle formBounds = Bounds;

                _cursorClip = Rectangle.FromLTRB(location.X + screenBounds.Left - formBounds.Left,
                                                 location.Y + screenBounds.Top - formBounds.Top,
                                                 location.X + screenBounds.Right - formBounds.Right,
                                                 location.Y + screenBounds.Bottom - formBounds.Bottom);
            }
            break;
        case WM_MOVING:
            Cursor.Clip = _cursorClip;
            break;
    }
    base.WndProc(ref m);
} 
```

# c# - 在mvc3 c#中将模型从视图传递到控制器

> ID：11595842
> 
> 赞同：0
> 
> 时间：2012-07-21T21:07:30.663
> 
> 标签：c#, asp.net-mvc-3, view, model, controller

```
 @foreach (var item in Model.AllManagementActions)
{
 <tr>
     <td>
         @Html.DisplayFor(modelItem => item.Id)
     </td>
     <td>
         @Html.DisplayFor(modelItem => item.Name)
     </td> 
```

我想将所有这些值传递给我的控制器。ID、名称等。我不能只传递项目本身吗？这是我当前的代码，但它不起作用。

```
<a class="complete" title="My Action" data-url="@Url.Action("Submit", "Period", new { tpId = Model.Id ,it = item})" style="cursor: pointer;"> 
```

如果我通过 item.name、item.id、item.number 等，它就可以工作

我可以通过模型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:12:56.900

不要在您的视图中迭代 - 使用类型的[编辑器模板](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)。

有一个`.cshtml`呈现单个`ManagementAction`.

在视图中，而不是迭代使用：

```
@Html.EditorFor(model => model.AllManagementActions) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:11:01.593

是的，您可以传递整个模型，但您应该使用提交按钮而不是锚标记，并将您的代码放在

```
using(Html.BeginForm)
{
   @foreach (var item in Model.AllManagementActions)
   {
      //your desire.
   }
   <input type="submit" value="Save" />
} 
```

在您的控制器中，您将在帖子中收到模型

```
 [HttpPost]
 public ActionResult SaveViewData(YourModel model)
 {
    //your logic.
 } 
```

# linux - shell 查找文件，执行它 - 如果“错误”则退出，如果“无错误”则继续

> ID：11595846
> 
> 赞同：-1
> 
> 时间：2012-07-21T21:07:41.160
> 
> 标签：linux, bash, shell, find

我必须编写一个 shell 脚本，但我不知道该怎么做。基本上我必须编写一个脚本来找到一个文件（它可能会以不同的方式命名）。如果任一文件存在，则必须执行，如果返回 0（无错误），则应继续构建，如果不等于 0（返回错误），则应退出。如果没有找到任何一个文件，它应该继续构建。

我必须找到的文件可以是 file.1 或 file.2，因此可以命名为 (file.1) 或 (file.2)。

一些条件使它更清楚。1）如果任何一个文件存在，它应该执行 - 如果它有任何错误它应该退出，如果没有错误它应该继续。2）不存在，如果是这种情况，那么它应该继续构建。3）两个文件不会同时出现（附加信息）

我曾尝试编写一个脚本，但我怀疑它是否更接近我正在寻找的内容。

```
if [-f /home/(file.1) 或 (file.2)]
然后
  -exec /home/(file.1) 或 (file.2)
   如果 [ $! -eq 0]；然后
   echo "没有错误继续构建"
   菲
   别的
   如果 [ $! -ne 0] ; 然后
   出口 ;
   菲
别的
   echo "/home/(file.1) 或 (file.2) 未找到，继续构建"
菲

```

任何帮助深表感谢。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:20:19.410

```
DOIT=""
for f in file1.sh file2.sh; do
  if [ -x /home/$f ]; then DOIT="/home/$f"; break; fi
done
if [ -z "$DOIT" ]; then echo "Files not found, continuing build"; fi
if [ -n "$DOIT" ]; then $DOIT && echo "No Errors" || exit 1; fi 
```

对于那些对我的语法感到困惑的人，请尝试运行以下命令：

```
true && echo "is true" || echo "is false"
false && echo "is true" || echo "is false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:16:09.317

只是把线

```
file.sh 
```

如果您将脚本设置为在错误时退出，那么您的脚本应该可以工作。

例如，如果您的脚本是

```
#!/bin/bash -e
echo one
./file.sh
echo two 
```

然后，如果`file.sh`存在并且是可执行的，它将运行并且您的整个脚本将运行。如果不是，则脚本在尝试执行不存在的文件时会失败。

如果要执行一个文件或另一个，请将想法扩展到以下内容：

```
#!/bin/bash -e
echo one
./file1.sh || ./file2.sh
echo two 
```

这意味着如果`file1.sh`不存在，它将尝试`file2.sh`，如果存在，它将运行并且您的整个脚本将运行。

这当然优先考虑`file1`，这意味着如果它们都存在，那么只有 file1 会运行。

# ruby - 无法在 OSX 上无头运行黄瓜测试 - 在 ubuntu 上工作？

> ID：11595847
> 
> 赞同：0
> 
> 时间：2012-07-21T21:07:42.610
> 
> 标签：ruby, macos, cucumber, headless

在我的`env.rb`文件中，我有这个：

```
if ENV["HEADLESS"] == 'true'
    require "headless"
    @headless = Headless.new
    @headless.start
end 
```

这在 Ubuntu 中运行良好，但在 OSX 中不行。浏览器仍然弹出。我需要做什么才能在 OSX 中完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:49:55.030

Headless 不会隐藏大多数 OSX 应用程序。这是预期的行为。Headless 旨在在 Linux 服务器上运行图形应用程序。

有关详细说明，请参阅[https://github.com/leonid-shevtsov/headless/issues/31#issuecomment-8933108](https://github.com/leonid-shevtsov/headless/issues/31#issuecomment-8933108)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:57:10.933

据我了解，OSX 上的默认 firefox 安装不使用 X11 进行渲染。它使用....可可？

Macports 已安装，但我还没有尝试过。[http://www.macports.org/ports.php?by=library&substr=firefox-x11](http://www.macports.org/ports.php?by=library&substr=firefox-x11)

# c - 任何人都知道如何在 C 中获取路径 USB 的 GUID 和 PID

> ID：11595849
> 
> 赞同：-1
> 
> 时间：2012-07-21T21:08:06.840
> 
> 标签：c, windows, get, device, guid

是否有一个简单的脚本可以按 GUID PID 等列出连接的 USB 设备

例子

```
"\\\\?\\usb#vid_0dca&pid_1054&mi_00#6&9f8cd&0&0000#{80375827-83B8-4A51-B39B-905FEDD4F118}"; 
```

我似乎无法找到你是如何在 C 上做到这一点的，而谷歌的表现并不好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:55:30.260

我不确定这可以用 C 来完成，我之前环顾四周并没有找到一个例子，认为它只是视觉 c++ 等。

# javascript - jquery裁剪图像选择不返回结果

> ID：11595851
> 
> 赞同：0
> 
> 时间：2012-07-21T21:08:17.503
> 
> 标签：javascript, jquery

我已经让这段代码工作了，但我想要一个警报，所以我可以看到 x1 y1 和 x2 和 y2 的所有坐标，任何人都可以帮助我，这个例子来自这个网站[http://odyniec.net/projects /imgareaselect/examples-callback.html#submitting-selection-coordinates-demo](http://odyniec.net/projects/imgareaselect/examples-callback.html#submitting-selection-coordinates-demo)我已经应用了代码，但我没有得到坐标，我可以得到宽度和高度。我的代码在这里[http://jsfiddle.net/qzHSe/](http://jsfiddle.net/qzHSe/)

我想让坐标作为响应，我知道 php 代码会给我一些东西，但我们正在使用 struts 和 java，但除此之外，我只想在屏幕上提醒坐标一些方式，以便我自己先看到它。

谢谢，我对这些东西很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:35:24.723

我已经清理了您的一些代码，并在`selection.x1`值的警报中发现了一个错字（您输入`selction.x1`了 ，缺少一个`e`）。

[http://jsfiddle.net/qzHSe/1/](http://jsfiddle.net/qzHSe/1/)

另外，请注意，您不必`$(img).imgAreaSelect()`每次想要添加更多选项时都调用。只需使用昏迷并像我一样添加它。

通过多次调用该函数，jQuery 必须在 DOM 中查找以获取对象以供您使用。如果你真的需要多次调用它，可以考虑将对象的值缓存在一个变量中：

```
var $img = $(img);

// now you can use $img in all your code as many times you need
// without jQuery search the DOM structure every time

$img.imgAreaSelect();

// some code
$img.attr("src", "some/path/to/image.jpg");

//some more code
$img.remove(); 
```

# c# - /Gh 标志的 C# 等效项

> ID：11595855
> 
> 赞同：2
> 
> 时间：2012-07-21T21:08:41.223
> 
> 标签：c#, windows

[/Gh 编译器标志](http://msdn.microsoft.com/en-us/library/c63a9b7h%28v=vs.80%29.aspx)允许您挂钩库中的所有 C/C++ 函数。是否有等效的 C# 方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:25:29.443

c# 没有这个标志或类似这个标志的东西

但是你可以通过[func的包装器调用函数](http://msdn.microsoft.com/en-us/library/bb549151.aspx)

或使用属性并编写自己的行为

# c# - 处理 Adox 对象的问题

> ID：11595867
> 
> 赞同：0
> 
> 时间：2012-07-21T21:09:45.630
> 
> 标签：c#, adox

使用 ADOX 目录类，我正在尝试创建一个空的 Ms Access 数据库。代码工作正常（据我所知）并生成数据库，但是当我尝试从 Windows 资源管理器打开数据库时，我得到“**无法使用 name.accdb ; 文件已在使用**”错误消息。我检查了文件目录，并且 name.idb 文件也出现在目录中，而没有打开数据库。关闭 C# windows 窗体应用程序后，name.idb 消失，我可以打开数据库。这是我用来使用 ADOX 创建数据库的代码。

```
 public void CreateDatabase()
    {
        string databaseName = txtFileName.Text;
        try
        {
            ADOX.Catalog cat = new ADOX.Catalog();

            if (!File.Exists(databaseName + ".accdb"))
            {
                cat.Create("Provider=Microsoft.Jet.OLEDB.4.0;Data 
                 Source=D:\\" + databaseName + ".accdb" + ";");
                cat = null;
            }
            cat = null;
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message, e.Source);
        }
    } 
```

我还尝试通过实现 IDispaosable 接口来处理 cat 对象，但没有任何改变。你能告诉我如何解决这个问题，用户可以在应用程序生成后打开数据库而不关闭（杀死）应用程序吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T14:11:48.993

也许您需要释放该对象。在调用 Create 后尝试添加以下内容：

```
Marshal.FinalReleaseComObject(cat.Tables);
Marshal.FinalReleaseComObject(cat.ActiveConnection);
Marshal.FinalReleaseComObject(cat); 
```

# java - 当标志在不同的线程中改变时循环没有结束

> ID：11595868
> 
> 赞同：7
> 
> 时间：2012-07-21T21:09:50.683
> 
> 标签：java, multithreading, while-loop

我在我的 Java 程序的 main 方法中运行了一个 while 循环。循环应该一直运行，直到在程序的 keyPressed 方法中将布尔标志变量设置为 true（我将程序作为 KeyListener 添加到 JFrame）。

```
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;

public class ThreadWhile implements KeyListener {
    private boolean flag = false;

    public static void main(String[] args) {
        //Set up key listening on a dummy JFrame
        JFrame frame = new JFrame("Key Detector 9000");
        frame.setVisible(true);
        ThreadWhile tw = new ThreadWhile();
        frame.addKeyListener(tw);

        System.out.println("Looping until flag becomes true...");
        while(!tw.flag) {
            //Commenting the println out makes the loop run forever!
            System.out.println(tw.flag); 
        }
        System.out.println("Flag is true, so loop terminated.");
        System.exit(0);
    }

    public void keyPressed(KeyEvent e) {
        flag = true;
        System.out.println("flag: " + flag);
    }

    public void keyReleased(KeyEvent e) {}
    public void keyTyped(KeyEvent e) {}
} 
```

我的理解是 keyPressed 方法在它们自己的线程中执行，所以当我按下一个键时，变量 'flag' 应该设置为 true，并且在 main 方法中运行的 while 循环应该结束。

但是，当我运行这个程序时，循环会永远运行，即使我们可以看到“flag”变量被正确设置为 true！奇怪的是，如果我在 while 循环中插入“标志”变量的快速 System.out.println 回显，程序会正常运行，但显然我不想在循环中打印任何内容。

我猜这个问题可能是Java编译器试图优化空while循环到它停止实际检查'flag'变量的结果？有没有人有关于使这项工作正常工作的建议，或者可能有一些更漂亮的基于并发的方法来使主线程暂停，直到 keyPressed 线程执行？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T21:14:15.933

您需要声明标志[`volatile`](http://www.javamex.com/tutorials/synchronization_volatile.shtml)，否则编译器可以优化您的代码并跳过标志的读取。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T21:14:46.697

虽然`volatile`其他人提出的解决方案应该可以工作，但除非您需要 while 循环中的代码连续执行，否则您可能应该在同步部分中使用`wait()`和`notify()`（或`notifyAll()`）（以避免“忙等待”）。就像是：

```
public class ThreadWhile implements KeyListener {
    private boolean flag = false;
    private Object flagLock = new Object();

    public static void main(String[] args) {
        //Set up key listening on a dummy JFrame
        JFrame frame = new JFrame("Key Detector 9000");
        frame.setVisible(true);
        ThreadWhile tw = new ThreadWhile();
        frame.addKeyListener(tw);

        System.out.println("Waiting until flag becomes true...");
        synchronized (tw.flagLock) {
            while(!tw.flag)
                tw.flagLock.wait();   // Note: this suspends the thread until notification, so no "busy waiting"
        }
        System.out.println("Flag is true, so loop terminated.");
        System.exit(0);
    }

    public void keyPressed(KeyEvent e) {
        synchronized (flagLock) {
            flag = true;
            System.out.println("flag: " + flag);
            flagLock.notifyAll();
        }
    }

    ... 
```

否则，您将在主线程上反复浪费周期检查`flag`一遍又一遍的值（通常，如果这种情况发生得足够多，可能会减慢其他线程的 CPU 速度，并可能耗尽移动设备上的电池）。这正是为这种情况`wait()`而设计的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T21:32:44.150

**1.**您需要`volatile`为标志使用关键字，因为当我们在实例变量上调用 volatile 时，**这就像告诉 JVM 确保访问它的线程必须将其自己的该实例变量的副本与存储在记忆**。

**2.** Volatile 还**有助于防止线程中值的缓存**。

**3.** Volatile 将使该变量在一个线程中将其更改的值反映到另一个线程，但这**不会阻止竞争条件**。

**4.**所以**在设置标志值的原子语句上使用同步关键字。**

**例如：**

```
public void keyPressed(KeyEvent e) {
     synchronized(this){
        flag = true;
        System.out.println("flag: " + flag);
      }
    } 
```

# php - 使用 curl 下载并恢复文件

> ID：11595871
> 
> 赞同：4
> 
> 时间：2012-07-21T21:10:15.247
> 
> 标签：php, curl

有谁知道如何使用 curl 和 PHP 下载文件并支持简历。并链接到教程或代码演示会很好。我现在正在使用此代码，但它不支持简历，而且我不知道如何处理标题。帮助将不胜感激

```
$start_range = 0; 
$url = URL to remote file 
$end_range = $filesize; 
while($start_range <= $end_range) { 
    if(($start_range + 9999999) > $end_range) $range = $start_range.'-'; 
    else $range = $start_range.'-'.($start_range + 9999999); 
    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_URL, $url); 
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); 
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie); 
    curl_setopt($ch, CURLOPT_REFERER, $refurl); 
    curl_setopt($ch, CURLOPT_RANGE,$range); 
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1'); 
    curl_exec($ch); 
    curl_close($ch); 
    $start_range +=10000000; 
    flush(); 
        ob_flush() 
} 
```

# java - Java中的衍生物？

> ID：11595878
> 
> 赞同：6
> 
> 时间：2012-07-21T21:10:44.123
> 
> 标签：java, android, derivative

我正在为 Android 制作一个计算器应用程序，并且一位用户要求使用衍生计算器。是否有任何预加载的功能或自定义方法可用？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:15:53.517

如果 Internet 访问可用，您可以将差异化委托给[Wolfram Alpha](http://products.wolframalpha.com/api/)。尽管免费使用 API 会限制 API 调用的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:42:02.267

我将尝试回答，从@Ernest 的评论开始。

这在很大程度上取决于您想要包含哪些衍生品。如果您只想区分多项式，那么只需编写自己的微分方法就很容易了，因为它们非常简单。

需要思考的部分是表示多项式。这可以简单地通过将每个项存储为由系数和指数部分组成的对来完成。通过一些简单的乘法和减法，您可以区分。

您可以使用递归更进一步，并实施链式法则进行微分，以允许嵌套多项式的微分。

对于大多数人来说，这可能已经足够好，或者比他们需要的更好。

我的建议：限制你的范围并享受自己做的乐趣

# android - Android 如何设置 RemoteView 的重量？

> ID：11595883
> 
> 赞同：6
> 
> 时间：2012-07-21T21:11:26.003
> 
> 标签：android, android-layout-weight, remoteview

我需要知道允许我设置 RemoteView 权重的代码。

我尝试使用此代码，但这不起作用：

```
RemoteViews remoteViews = new RemoteViews(c.getPackageName(), R.layout.notification);
remoteViews.setInt(R.id.ll_notification, "setWeight", 12); 
```

有办法做到这一点吗？非常感谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T05:38:05.270

我认为 RemoteView 没有权重属性。

我不确定这会奏效，但试一试。

```
 RemoteViews remoteViews = new RemoteViews("", 0);

    LinearLayout.LayoutParams tempLayoutParams =new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);
    tempLayoutParams.weight = 1.0f;

    LinearLayout tempLinearLayout = new LinearLayout(getContext()):
    tempLinearLayout.setLayoutParams(tempLayoutParams);

    tempLinearLayout.addView(remoteViews); 
```

祝你好运。

# html - Rounded corners on images

> ID：11595886
> 
> 赞同：16
> 
> 时间：2012-07-21T21:11:59.333
> 
> 标签：html, css

[http://jsfiddle.net/48Y37/](http://jsfiddle.net/48Y37/)

I want rounded corners on both corners at the top of the image. It technically is there but is being covered by the image. I've looked all over the web and I've seen people talk about `overflow: hidden;` or even JavaScript (which I want to avoid as much as possible) but I never seemed to be able to implement it onto my existing piece of code.

Thanks in advance.

```
<section class="container">
    <header>
        <img src="http://i.imgur.com/CpL8u.png" style="box-shadow: 0px 0px 10px #888;" />
    </header>
    <section class="body">
        Lorem ipsum blahblah I don't know the rest.
    </section>
</section> 
```

CSS:

```
header {
    width: 640px;
    margin-left: -10px;
    margin-top: -10px;
}
section.container {
    background: #fff;
    width: 620px;
    margin: auto;
    -moz-border-radius: 10px;
    border-radius: 10px;
    padding: 10px;
    box-shadow: 0px 0px 20px #888;
}
section.body {
    margin-top:10px;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-21T21:15:31.610

You need to add a `border-radius` to that image: [http://jsfiddle.net/WouterJ/48Y37/1/](http://jsfiddle.net/WouterJ/48Y37/1/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-21T22:16:49.423

To round the actual image, you have to make sure that the `<img>` tag's class actually has the `border-radius` property. For example:

```
<img class="roundrect" src="/whatever-your-source-is.png"> 
```

And the corresponding CSS would look like this:

```
.roundrect {
border-radius: 15px;
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-01-12T15:39:21.323

1.  Copy the picture with Snipping Tool and paste into *Paint*.
2.  Choose the Rounded Rectangle shape and change the color to **white**.
3.  Choose the largest size for the Rectangle.
4.  Then put the white rounded border around the picture.
5.  Then **copy** and **paste** the rounded picture wherever you need it.

# c# - 错误 14 找不到类型或命名空间名称“文档”（您是否缺少 using 指令或程序集引用？）

> ID：11595900
> 
> 赞同：0
> 
> 时间：2012-07-21T21:13:25.823
> 
> 标签：c#, asp.net-mvc-3

```
Document document = new Document();
            MemoryStream stream = new MemoryStream();
            try
            {
                PdfWriter pdfWriter = PdfWriter.GetInstance(document, stream);
                pdfWriter.CloseStream = false;

                document.Open();
                document.Add(new Paragraph("Hello World"));
            }
            catch (DocumentException de)
            {
                Console.Error.WriteLine(de.Message);
            }
            catch (IOException ioe)
            {
                Console.Error.WriteLine(ioe.Message);
            }

            document.Close();

            stream.Flush(); //Always catches me out
            stream.Position = 0; //Not sure if this is required
            return File(stream, "application/pdf"); 
```

我对 pdf writer 和 Paragraph 有同样的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T10:30:16.960

我有同样的问题然后我找到了答案

首先要安静确保 iTextSharp.dll 添加到引用和

然后在主窗体的开头。添加这个

```
using iTextSharp.text; 

using iTextSharp.text.pdf; 
```

iTextSharp.text 负责 Document Object

# android - ArrayAdapter 为 ListView 中的每个项目重复 UI Header

> ID：11595910
> 
> 赞同：4
> 
> 时间：2012-07-21T21:14:53.047
> 
> 标签：android, listview, user-interface, android-arrayadapter

我在 UI 中显示项目列表时遇到问题。

我的 UI 布局页面布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ListOfRecordsContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#454545"
    android:orientation="vertical" >

    <include
        android:layout_weight="1"
        layout="@layout/header" />

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ListOfRecords"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.01"
        android:padding="1dp"
        android:textSize="12sp" >
    </TextView>

</LinearLayout> 
```

在类中，`onSuccess()`一旦从远程系统检索到列表并填充`TextView`到 UI 中，就会调用方法。

但是，布局中包含的 Header 部分对于每条记录都会重复。我在这里错过了什么吗？

例如....实际结果是

```
<Header Button for LogOut>
Item1
<Header Button for LogOut>
Item2 
```

预期结果是

```
<Header Button for LogOut>
Item1
Item2 
```

代码如下所示：

* * *

```
public class ItemMainPage extends ListActivity{

    private String[] AccountName;
    private String[] AccountIds;
    private RestClient client;
    private String apiVersion;

    LinearLayout layout;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ListView lv = getListView();
        apiVersion = getString(R.string.api_version);

        lv.setTextFilterEnabled(true);

        /*layout = (LinearLayout) View.inflate(this, R.layout.list_item_main_page, null);
        Button buyButton = new Button(this);
        buyButton.setText("Search");
        layout.addView(buyButton);*/

    }

    @Override
    public void onResume(){
        super.onResume();

        // Login options
        String accountType = getString(R.string.account_type);
        LoginOptions loginOptions = new LoginOptions(
                null, // gets overridden by LoginActivity based on server picked by uuser 
                ForceApp.APP.getPasscodeHash(),
                getString(R.string.oauth_callback_url),
                getString(R.string.oauth_client_id),
                new String[] {"api"});

        new ClientManager(this, accountType, loginOptions).getRestClient(this, new RestClientCallback() {
            //@Override
            public void authenticatedRestClient(RestClient client) {
                if (client == null) {
                    ForceApp.APP.logout(ItemMainPage.this);
                    return;
                }
                ItemMainPage.this.client = client;
                getAccountList();
            }
        });
        EventsObservable.get().notifyEvent(EventType.RenditionComplete);
    }   

    private void getAccountList(){

        try {

            String soql = "select id, name from Account LIMIT 2";
            RestRequest request = RestRequest.getRequestForQuery(apiVersion, soql);

            client.sendAsync(request, new AsyncRequestCallback() {

                //@Override
                public void onSuccess(RestRequest request, RestResponse response) {
                    try {
                        if (response == null || response.asJSONObject() == null)
                            return;

                        JSONArray records = response.asJSONObject().getJSONArray("records");

                        if (records.length() == 0)
                            return;

                        AccountName = new String[records.length()];
                        AccountIds = new String[records.length()];

                        for (int i = 0; i < records.length(); i++){
                            JSONObject Account = (JSONObject)records.get(i);
                            AccountName[i] = Account.getString("Name");
                            AccountIds[i] = Account.getString("Id");
                        }
                        //ArrayAdapter<String> ad = new ArrayAdapter<String>(ItemMainPage.this, 
                        //                                                 R.layout.list_item_main_page, 
                        //                                                 AccountName);
                        ArrayAdapter<String> ad = new ArrayAdapter<String>(ItemMainPage.this, R.layout.list_item_main_page, R.id.ListOfRecords, AccountName); 
                        setListAdapter(ad);
                        Log.d("Adapter", ad.toString());
                        //EventsObservable.get().notifyEvent(EventType.RenditionComplete);
                    } catch (Exception e) {
                        e.printStackTrace();
                        displayError(e.getMessage());
                    }
                }

                //@Override
                public void onError(Exception exception) {
                    displayError(exception.getMessage());
                    EventsObservable.get().notifyEvent(EventType.RenditionComplete);
                }
            });

        } catch (Exception e) {
            e.printStackTrace();
            displayError(e.getMessage());
        }
    }

    private void displayError(String error) {
        //ArrayAdapter<String> ad = new ArrayAdapter<String>(   AccountList.this, R.layout.list_item, new String[]{"Error retrieving Account data - " + error});
        //setListAdapter(ad);
      ((TextView) findViewById(R.id.welcome_text)).setText(getString(R.string.welcome, client.getClientInfo().username));

    }

} 
```

如果我遗漏任何东西，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:37:18.420

我猜您提供的 XML 被用作行布局，这意味着：

```
<include
    android:layout_weight="1"
    layout="@layout/header" /> 
```

包含在每一行中（就像您所看到的一样）。

如果要向 ListView 添加标题，请尝试：

```
View header = getLayoutInflater().inflate(R.layout.header, null);
listView.addHeaderView(header); 
```

`include`并从行布局中删除元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:38:40.563

使您的标头成为一个单独的 XML 布局并使用 addHeaderView 添加到您的列表视图。IE：

```
 View header = (View)getActivity().getLayoutInflater().inflate(R.layout.listview_header_row, null);
    lv.addHeaderView(header); 
```

希望这可以帮助！

# gpgpu - Crossfire/SLI 是否有利于 Compute Shader 的性能？

> ID：11595917
> 
> 赞同：4
> 
> 时间：2012-07-21T21:16:19.630
> 
> 标签：gpgpu, directx-11, compute-shader, sli

我正在研究 DX11 计算着色器。我想知道如果再添加一张带有 Crossfire/SLI 的视频卡，性能是否会有所提升。或者在不使用 Crossfire/SLI 的情况下再添加一张视频卡。

有没有人尝试过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T15:51:15.063

我运行一个带有两个 Nvidia Maxwell 架构 GPU 的系统。我不使用 Crossfire/SLI。

Crossfire/SLI 本身不会影响着色器计算性能。Crossfire/SLI 操纵图像帧渲染输出做以下几件事之一：

1) 在不同 GPU 上渲染部分帧 2) 在不同 GPU 上渲染替代帧 3) 1) 和 2) 的组合 4) 抗锯齿的改进

请参阅 [http://www.hardwaresecrets.com/article/SLI-vs-CrossFire/391](http://www.hardwaresecrets.com/article/SLI-vs-CrossFire/391)

Crossfire/SLI 对于提高图像、游戏等的渲染性能很有用。它对提高计算性能没有任何作用。

如果您可以在多个 GPU 之间划分工作而不会产生太多开销，那么添加一个没有 Crossfire/SLI 的额外视频卡将有利于计算性能。这可以使用 CUDA 和 OpenCL 通过创建多个设备队列并将工作排队到每个设备来完成。不知道DX11 Shaders能不能做到这一点？

# c# - 按键/属性将列表分组为子列表而不更改列表顺序（只需按属性切入列表）

> ID：11595921
> 
> 赞同：4
> 
> 时间：2012-07-21T21:17:47.610
> 
> 标签：c#, linq, list

我一直在寻找这个，我确信我只是想念它，因为我对 Linq 不是很好。

我有一个看起来像的列表：

```
type=a, value=aaaa
type=a, value=bbbb
type=b, value=cccc
type=d, value=dddd
type=d, value=eeee
type=d, value=ffff
type=a, value=gggg
type=b, value=hhhh
type=b, value=iiii
type=b, value=jjjj 
```

我想将其分解为子列表，而不进行排序（我需要保持原始顺序）。我想按列表或类似列表中的顺序取回这些列表：

```
List 1
type=a, value=aaaa
type=a, value=bbbb

List2
type=b, value=cccc

List 3
type=d, value=dddd
type=d, value=eeee
type=d, value=ffff

List 4
type=a, value=gggg

List 5
type=b, value=hhhh
type=b, value=iiii
type=b, value=jjjj 
```

我想循环不是最好的答案。

任何想法都非常感谢。

stackoverflow.com 万岁！

克里斯

四个答案后编辑：

我检查了以下答案： * Enigmativity * Bert Evans * Risky Martin * david.s

他们都工作得很好。Bert Evans 提出了性能问题，在这种情况下这对我来说并不是一个大问题，但为了这篇文章，我做了一些快速检查。

我没有修改任何人的代码，只是在相当短的列表上安排了 4,000 次这样的操作。

Risky的回答是最快的。伯特的回答只是慢了一点。

david's 和 Enigmativity 的速度几乎没有变慢，真的。

由于性能和早期指向相关帖子，我将 Risky 的答案标记为已接受，然后回来提供答案。

不过，我同意 Bert 的可读性最强。

老实说，我不知道我将使用哪一个...实际上，我将使用 Enigmativity 的解决方案，因为它已经考虑到我只需要每个子组的值和一个键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T23:16:20.910

[从这个答案](https://stackoverflow.com/questions/1478070/how-to-group-consecutive-similar-items-of-a-collection/2528167#2528167)和这个[答案](https://stackoverflow.com/questions/4881363/smart-grouping-with-linq)中使用稍微修改的扩展方法：

```
public static IEnumerable<IGrouping<int, T>> GroupConsecutive<T>(this IEnumerable<T> set, Func<T, T, bool> predicate)
{
    var i = 0;
    var k = 0;
    var ranges = from e in set
                    let idx = ++i
                    let next = set.ElementAtOrDefault(idx)
                    let key = next == null ? k : predicate(e, next) ? k : k++
                    group e by key into g
                    select g;
    return ranges;
} 
```

并给出一个类：

```
public class Foo
{
    public string Type { get; set; }
    public string Value { get; set; }
} 
```

你可以这样做：

```
List<Foo> list = new List<Foo>()
{
    new Foo() { Type = "a", Value = "aaaa" },
    new Foo() { Type = "a", Value = "bbbb" },
    new Foo() { Type = "b", Value = "cccc" },
    new Foo() { Type = "d", Value = "dddd" },
    new Foo() { Type = "d", Value = "eeee" },
    new Foo() { Type = "d", Value = "ffff" },
    new Foo() { Type = "a", Value = "gggg" },
    new Foo() { Type = "b", Value = "hhhh" },
    new Foo() { Type = "b", Value = "iiii" },
    new Foo() { Type = "b", Value = "jjjj" }
};

var groups = list.GroupConsecutive((a, b) => a.Type == b.Type);

foreach (var group in groups)
{
    Console.WriteLine("List " + group.Key);
    foreach (var item in group)
    {
        Console.WriteLine("Type=" + item.Type + "    Value=" + item.Value);
    }
    Console.WriteLine();
} 
```

结果如下所示：

```
List 0
Type=a    Value=aaaa
Type=a    Value=bbbb

List 1
Type=b    Value=cccc

List 2
Type=d    Value=dddd
Type=d    Value=eeee
Type=d    Value=ffff

List 3
Type=a    Value=gggg

List 4
Type=b    Value=hhhh
Type=b    Value=iiii
Type=b    Value=jjjj 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T00:00:28.790

这可以推广或制成扩展方法，但你明白了：

```
public static IEnumerable<List<Item>> GroupConsecutive(IEnumerable<Item> items)
{
    if (items.Any())
    {
        string firstType = items.Select(i => i.Type).First();
        var adjacents = items.TakeWhile(i => i.Type == firstType).ToList();
        yield return adjacents;
        foreach (var group in GroupConsecutive(items.Skip(adjacents.Count)))
        {
            yield return group;
        }
    }
} 
```

使用这个类：

```
public class Item
{
    public string Type { get; set; }
    public string Value { get; set; }
} 
```

编辑：以下是此解决方案的权衡：

优点：

*   返回一个惰性求值的集合
*   不改变任何变量
*   简洁

缺点：

*   迭代`items`两次。`items`如果是一个列表，这没什么大不了的，但如果`items`是一个为每个项目执行昂贵计算的 IEnumerable，则此方法可能比其他方法慢。

如果您想`items`通过惰性评估进行一次迭代，我建议使用[此](https://stackoverflow.com/a/11514313/480799)答案中提到的[GroupAdjacent](http://blogs.msdn.com/b/ericwhite/archive/2008/04/21/the-groupadjacent-extension-method.aspx)扩展方法或使用. 如果您想要一次没有惰性评估的迭代，我建议使用循环或方法。`yield return``Aggregate`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T23:57:35.917

这是一个仅使用 LINQ 的答案`Aggregate`。

我从这个开始：

```
var list = new []
{
    new { type="a", value="aaaa", },
    new { type="a", value="bbbb", },
    new { type="b", value="cccc", },
    new { type="d", value="dddd", },
    new { type="d", value="eeee", },
    new { type="d", value="ffff", },
    new { type="a", value="gggg", },
    new { type="b", value="hhhh", },
    new { type="b", value="iiii", },
    new { type="b", value="jjjj", },
}; 
```

然后这样做：

```
var accumulator = new List<KeyValuePair<string, List<string>>>()
{
    new KeyValuePair<string, List<string>>(
        list.First().type,
        new List<string>()),
};

var results = list.Aggregate(accumulator, (a, x) =>
{
    if (a.Last().Key == x.type)
    {
        a[a.Count - 1].Value.Add(x.value);
    }
    else
    {
        a.Add(new KeyValuePair<string, List<string>>(
            x.type,
            new List<string>(new [] { x.value, })));
    }
    return a;
}); 
```

然后`results`看起来像这样：

![结果](../Images/6eadd75503d89ac04b568ca21261029b.png)

让我知道这是否适合您。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-22T03:54:20.443

没有 LINQ、普通的旧 c# 和每个初级开发人员都希望遵循的单个循环。更别提更快了。

```
public class Foo
{
    public string Type { get; set; }
    public string Value { get; set; }
}

List<Foo> list = new List<Foo>()
{
    new Foo() { Type = "a", Value = "aaaa" },
    new Foo() { Type = "a", Value = "bbbb" },
    new Foo() { Type = "b", Value = "cccc" },
    new Foo() { Type = "d", Value = "dddd" },
    new Foo() { Type = "d", Value = "eeee" },
    new Foo() { Type = "d", Value = "ffff" },
    new Foo() { Type = "a", Value = "gggg" },
    new Foo() { Type = "b", Value = "hhhh" },
    new Foo() { Type = "b", Value = "iiii" },
    new Foo() { Type = "b", Value = "jjjj" }
};

Foo previous = null;
List<List<Foo>> separateLists = new List<List<Foo>>();
List<Foo> currentList = null;
foreach (var foo in list)
{
    if (null == previous || previous.Type != foo.Type)
    {
        currentList = new List<Foo>();
        separateLists.Add(currentList);
    }
    currentList.Add(foo);
    previous = foo;
} 
```

# php - GET/POST 请求在表单提交时缺少参数

> ID：11595922
> 
> 赞同：1
> 
> 时间：2012-07-21T21:17:49.177
> 
> 标签：php, post, get

这个快把我逼疯了。我尝试了几种不同的解决方案均无济于事。基本上发生的事情是，当我提交表单时，发送的请求没有参数。我已经尝试过 POST 和 GET 并使用 Firebug 监控请求。这是一些示例代码：

```
<form action="/year/" id="year-form" method="get">
    <select class="dropdown" id="year" onchange="this.form.submit()">
        <option value="all">All</option>
        <option value="2011">2011</option>
        <option value="2010">2010</option>
        <option value="2009">2009</option>
    </select> 
</form> 
```

也许我应该注意到这是在一个基于 WordPress 的网站上，我将请求返回到它来自的页面。对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T21:19:25.087

它没有提交，因为它缺少名称属性：

```
<select class="dropdown" id="year" onchange="this.form.submit()" name="year"> 
```

所以它与 Wordpress 无关。

# permissions - 为什么我的 AWS S3 存储桶策略没有覆盖我的 IAM 策略？

> ID：11595926
> 
> 赞同：10
> 
> 时间：2012-07-21T21:18:00.610
> 
> 标签：permissions, amazon-web-services, policy, bucket, amazon-iam

我的 IAM 帐户中有一个名为“testuser”的用户，他具有管理员权限，如下所示：

```
{
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "*",
      "Resource": "*"
    }
  ]
} 
```

然后我在我的 S3 存储桶上有一个拒绝此用户访问的策略，如下所示：

```
{
  "Statement": [
    {
  "Effect": "Deny",
  "Principal": {
    "AWS": "my-account-id:user/testuser"
  },
  "Action": "s3:*",
  "Resource": "arn:aws:s3:::my-bucket-name/*"
    }
  ]
} 
```

那么，S3 存储桶策略中的显式拒绝应该覆盖 IAM 策略中的允许，对吗？但是当我以 testuser 身份登录时，我仍然可以访问该存储桶中的所有内容 - 我什至可以更改或删除该存储桶（以及所有其他存储桶）的存储桶策略。为什么我的明确否认没有做任何事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T23:03:34.390

尝试对存储桶策略中的用户 ID 使用完整的 ARN 表单：

```
"Principal": {
  "AWS":["arn:aws:iam::accountid:user/testuser"]
} 
```

# javascript - 如何将xml字段调用到html中

> ID：11595931
> 
> 赞同：0
> 
> 时间：2012-07-21T21:18:19.637
> 
> 标签：javascript, xml, web-services

我有返回一些 xml 数据的 Web 服务的 URL。我需要加载这个 xml 数据，并且只包含我网站上日期标签的值。如何才能做到这一点？

这是返回 xml 的 url：

[http://www.islamicfinder.org/prayer_service.php?country=usa&city=new_york&state=NY&zipcode=10006&latitude=40.7092&longitude=-74.0128&timezone=-5&HanfiShafi=1&pmethod=5&fajrTwilight1=10&fajrTwilight2=10&ishaTwilight=10&ishaInterval=30&hu=10&ishaInterval=30&hu 1&simpleFormat=xml](http://www.islamicfinder.org/prayer_service.php?country=usa&city=new_york&state=NY&zipcode=10006&latitude=40.7092&longitude=-74.0128&timezone=-5&HanfiShafi=1&pmethod=5&fajrTwilight1=10&fajrTwilight2=10&ishaTwilight=10&ishaInterval=30&dhuhrInterval=1&maghribInterval=1&dayLight=1&simpleFormat=xml)

```
<?xml version="1.0"?>
<prayer>
    <fajr>4:12</fajr>
    <sunrise>5:43</sunrise>
    <dhuhr>1:03</dhuhr>
    <asr>5:00</asr>
    <maghrib>8:22</maghrib>
    <isha>9:54</isha>
    <date>July 21, 2012</date>
    <hijri>2 Ramadan 1433</hijri>
    <city>New York</city>
    <country>Usa</country>
    <website>www.IslamicFinder.org</website>
</prayer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:26:30.887

尝试使用 PHP 的[SimpleXMLElement](http://www.php.net/manual/en/simplexml.examples-basic.php#example-5094)

```
<?php
  $url = 'http://www.islamicfinder.org/prayer_service.php?country=usa&city=new_york&state=NY&zipcode=10006&latitude=40.7092&longitude=-74.0128&timezone=-5&HanfiShafi=1&pmethod=5&fajrTwilight1=10&fajrTwilight2=10&ishaTwilight=10&ishaInterval=30&dhuhrInterval=1&maghribInterval=1&dayLight=1&simpleFormat=xml';
  $result = new SimpleXMLElement($url, NULL, true);
  echo $result->date;
?> 
```

NULL 表示我们没有传递任何选项。True 表示我们从 URL 获取数据。看看[这里](http://www.php.net/manual/en/simplexmlelement.construct.php)的论点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T21:54:23.593

我正在使用 php 获取日期，希望它对你有用..

```
<?php

/**
 * @author Waqas Ahmed
 */

$url = "http://www.islamicfinder.org/prayer_service.php?country=usa&city=new_york&state=NY&zipcode=10006&latitude=40.7092&longitude=-74.0128&timezone=-5&HanfiShafi=1&pmethod=5&fajrTwilight1=10&fajrTwilight2=10&ishaTwilight=10&ishaInterval=30&dhuhrInterval=1&maghribInterval=1&dayLight=1&simpleFormat=xml";
$xmlData = file_get_contents($url);
$doc = new DOMDocument;
$doc->loadXML($xmlData);
$dates = $doc->getElementsByTagName('date');
foreach($dates as $date)
{
    echo " Date : ".$date->nodeValue;
}

?> 
```

# opengl - 在打开的 gl 中旋转对象而不再次淹没对象

> ID：11595932
> 
> 赞同：1
> 
> 时间：2012-07-21T21:18:26.463
> 
> 标签：opengl

我想在 OpenGL 中旋转一个对象而不再次绘制，以节省时间。在 init 方法中，我想绘制图片，然后仅根据鼠标事件旋转它。

这是完整的方法：

```
 gl.Clear(OpenGL.GL_COLOR_BUFFER_BIT | OpenGL.GL_DEPTH_BUFFER_BIT);
 gl.LoadIdentity();     
 gl.Rotate(camera_angle_v, 1.0f, 0.0, 0.0);
 gl.Begin(OpenGL.GL_POINTS);

 //Draw

 gl.End(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:51:11.313

OpenGL 从根本上不是这样工作的。您正在渲染的帧本质上是一个二维像素数组。当您绘制图像时，它会更改其中一些像素的值来为您创建图像。一旦绘制了某些东西，它就会一直留在那里，直到您将其清除为止。OpenGL 不会跟踪您过去渲染的内容（除了它填充在帧中的像素），因此除了当前渲染的三角形/线之外，它无法对任何东西进行任何转换。

在您的绘制方法开始时，您清除框架（将所有像素重置为清除颜色）。之后您必须重绘对象。这就是 OpenGL 的工作方式，而且速度非常快。在现代 GPU 上，您可以每帧绘制数百万个三角形，并且仍然保持 60fps。如果你一开始没有清除框架，图像将被绘制在旧框架的顶部，你会得到一种镜厅的效果。

如果性能是一个问题，请考虑学习更现代的 OpenGL。您现在使用的是即时模式 OpenGL，它是 1992 年 OpenGL 1.0 规范的一部分。1997 年，OpenGL 1.1 引入了顶点数组，它为大量顶点提供了显着的速度提升，因为只有一个方法调用对于所有顶点，而不是每个顶点一个方法调用。每个新版本的 OpenGL 都会提供更优化的绘图方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T21:50:29.033

您必须再次绘制对象 - 这就是 OpenGL 的工作原理。

每个帧都根据当前场景几何从头开始渲染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T01:48:52.893

好吧...如果您使用的是即时模式，我想您可以使用显示列表并相应地调用 glRotate 。尽管正如 Robert Rouhani 所说，您使用的技术是古老的（而且 99% 的在线教程都教给您）。使用 VAO（甚至更好的 VBO）来绘制对象。

# java-7 - Java 7 语法错误

> ID：11595933
> 
> 赞同：4
> 
> 时间：2012-07-21T21:18:29.847
> 
> 标签：java-7

我在我的 Mac 上运行 Java 7：

```
 System.out.println(System.getProperty("java.version")); // prints 1.7.0_05 
```

**项目是使用创建的**

![在此处输入图像描述](../Images/e1c4e027e5019d1b537c635220b0a6f3.png)

**项目属性确认，我在 Java 7**

![在此处输入图像描述](../Images/9d4848cf80d0ba4616bdfd944a1eeafc.png)

默认系统 Java 为 7

![在此处输入图像描述](../Images/4464822623c5f7af9e634ce4742ae8a1.png)

然而，以下导致语法错误

```
public static void main(String[] args) {    
    // Underscores in Numeric Litarals are ok here  
    int i = 11_234;
} 
```

Eclipse 抱怨`Syntax error on token "_234", delete this token`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T21:38:39.337

在 Eclipse 的 Project|Properties 对话框中，有两个实体`Java Build Path`和`Java Compiler`. 前者会告诉您在构建过程中使用了哪些类，并且您可能在其中列出了 Java 7 JRE。但是，后者是将用于编译代码的编译器。即使在构建路径上有 Java 7 JRE，也可以让 Eclipse 使用 Java 6 编译器。

我的猜测是您使用的是 Helios，而不是 Indigo。请参阅[在 Eclipse 中编程 Java 7](https://stackoverflow.com/questions/2638622/programming-java-7-in-eclipse)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T21:41:35.483

确保您的 Eclipse 版本是 3.7.1（这是 Eclipse 3.7 Maintenance Build）或更高版本（请参阅[JDT/Eclipse Java 7 Support](http://wiki.eclipse.org/JDT/Eclipse_Java_7_Support_%28BETA%29)），并且您已在 Eclipse 中注册了 Java 7（请参阅[Eclipse 和 Java 7](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/gettingStarted/qs-with-java7.htm)）。

# haskell - 继续输入元组

> ID：11595935
> 
> 赞同：0
> 
> 时间：2012-07-21T21:18:50.350
> 
> 标签：haskell, io, syntax-error

我希望用户**输入**一个元组列表以在其上搜索这样的键我可以这样说吗

```
 data BookInfo = Book Int String [String]
  deriving(Show)
  findbook :: [BookInfo] -> Int -> BookInfo
  findbook vs key = (booker (vs!!(bookFinding vs  key 0 (length vs))) key)

  getBookInfo = do
    putStrLn "Enter book id :"
    k <- read
    putStrLn "Enter book name : "
    r <- getLine
    putStrLn "Enter book subject :"
   m <- getLine 
   let Book book = enter k r [m] 
   return  book
 main = do
   putStr "Enter you first info is :"
   v <- getBookInfo
   let Book vs = v:[]
   c <- getLine
   if c == "N"
   then     
     putStr "You  done"   
   else
    Book booke = getBookInfo
    vs = booke:vs
  putStr "Do you want to search ? :" 
     m <- getch
      if m == 'y'
        then  
         putStr " Enter your key :"  
         s <- readNum  

 let Book w =  findBook vs s
 putStrLn" The result is: " ++ show(w) 
```

但这给了我一个错误：

```
 The last statement in do must be m <- getch 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T21:56:00.923

看起来您正在尝试编写一个程序来将书籍列表读入某种数据库，然后搜索书籍。你开始很好，使用存储书籍信息的数据类型：

```
data BookInfo = Book Int String [String] deriving (Show) 
```

现在让我们看看你的函数，它从用户那里读取书籍信息。

```
getBookInfo = do
    putStrLn "Enter book id :"
    k <- read
    putStrLn "Enter book name : "
    r <- getLine
    putStrLn "Enter book subject :"
    m <- getLine 
    let Book book = enter k r [m] 
    return book 
```

我为您修复了缩进（这里有一个提示：**使用四个空格进行缩进！**）但还有其他问题：

*   这条线`k <- read`没有任何意义。读取的类型是，`read :: Read a => String -> a`但您正在使用它，就好像它是一个 I/O 操作一样。您需要该功能`readLn`。

*   这条线`let Book book = enter k r [m]`没有任何意义。看起来您习惯于使用 C 或 Java 之类的语言编写，您必须在其中指定类型。你不必在 Haskell 中这样做！此外，该`enter`功能是不必要的。你可以只写`let book = Book k r [m]`，这会很好。事实上，您根本不需要临时变量`book`- 您可以`Book`在一行中创建并返回它。

所以你可以写：

```
getBookInfo :: IO BookInfo
getBookInfo = do
    putStrLn "Enter book id: "
    bookid <- readLn 
    putStrLn "Enter book name: "
    name <- getLine
    putStrLn "Enter book subject: "
    subject <- getLine 
    return (Book bookid name [subject]) 
```

现在可以正常编译了。请注意，我还添加了一个类型声明（这是可选的）。

* * *

您的下一个功能 ,`main`试图做的太多了。它包含获取书籍列表的所有规则，以及搜索它们的规则。这是两个独立的任务，所以它们应该在两个独立的函数中。因此，让我们编写一个获取书籍列表的函数：

```
getBookList :: IO [BookInfo]
getBookList = do
    putStr "Any more books? "
    answer <- getLine
    if answer == "N"
        then return []
        else do
            book  <- getBookInfo
            books <- getBookList
            return (book:books) 
```

花点时间了解这个功能是如何工作的。首先，它会询问您是否还有其他书籍要输入。如果你说“N”，那么它会返回空列表，你就完成了。否则，它会做一些神奇的事情——首先，它调用`getBookInfo`获取一本书的信息。然后它会调用*自己*来获取书籍列表！这是递归的一个例子。最后，它将第一本书添加到书籍列表中，并返回整个列表。

* * *

您现在应该尝试自己编写程序的其余部分。我可能会在一天左右重新访问这个答案以添加更多细节。如果你发表评论让我知道你尝试了什么，以及你卡在哪里，我更有可能这样做。记住：

*   正确缩进你的代码！使用四个空格。获得像[Sublime Text 2](http://www.sublimetext.com/2)这样知道如何处理缩进的编辑器。

*   尝试编写小（少于 10 行）函数并将它们链接在一起以构成一个完整的程序。这将防止您在尝试调试您想出的 400 行怪物时失去理智。

*   检查类型！例如，您可以加载 ghci 并键入`:t read`以查看`read`函数的类型。

# ios - 为什么我不能将子窗格 plist 文件粘贴到 Xcode 4.3.3 中项目的 Settings.bundle 文件夹中？

> ID：11595938
> 
> 赞同：0
> 
> 时间：2012-07-21T21:19:20.520
> 
> 标签：ios, sdk, xcode4.3

我正在运行 Xcode 4.3.3，并且一直在关注有关应用程序设置的教程。在我准备为要添加的子窗格添加 plist 之前，一切都进展顺利。

我在一个非常相似的问题（http://stackoverflow.com/q/6978203/1543207）中尝试了这个建议，并且我正在遵循链接帖子中指定的相同教程。

1.  打开 finder，您可以右键单击或两指单击 Settings.bundle 并选择“在 Finder 中显示”。
2.  在查找器窗口中右键单击 Settings.bundle，选择显示包内容。
3.  将新的 plist 文件复制到 Root.plist 旁边的 settings.bundle 中
4.  从主项目中删除新的 plist。

我可以复制 plist 文件，但无法将创建的 plist 文件粘贴到 settings.bundle 中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:30:02.610

我明白了。在 Xcode 4.3.2 中，

1.  右键单击项目导航器中的项目名称，然后选择`Show in Finder`；
2.  在 Finder 中，右键单击 setting.bundle 并选择`Show Package Contents`；
3.  将新的 .plist 复制到 setting.bundle；
4.  回到XCode，打开`setting.bundle`，随意在下添加一项`Preference Items`，然后展开，修改值为。图片上传不了，给`Type`个博客的[链接](http://www.cnblogs.com/submarine/archive/2012/07/25/2607854.html)。`Child Pane`

我希望能帮助你。

# java - Android中的映射结构和动态内存分配

> ID：11595942
> 
> 赞同：1
> 
> 时间：2012-07-21T21:20:01.660
> 
> 标签：java, android

不久前，我在 Android 平台上发布了一款完全用 Java 编写的游戏。目前我正在努力获得尽可能多的性能。在我的游戏案例中，问题似乎是我在可能更适合`ArrayList`的地方更频繁地使用容器。`Map`为了解释自己，我这样做是因为我害怕会在幕后触发的动态内存分配（ Android 上的`Map`/`Tree`结构）。也许在我不知道的 Android/Java 平台上有某种结构，它将为我提供快速的搜索结果，并且在添加新元素时不会动态分配额外的内存？

更新：例如，我使用 ArrayList 结构来保存我游戏的大部分粒子。当然，独立（不是按顺序）删除它们是一件很痛苦的事情，因为系统需要遍历整个容器才能删除一个实体对象（当然是在最坏的情况下）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:30:31.150

除非您特别发现这是一个问题，否则我不会担心由于内存分配而导致的减速。内存分配并不是真正导致 Android 游戏速度变慢的原因，通常是 GC 运行时出现问题。除非您经常在 Map 中插入和删除，否则您可能不必担心分配问题。

更新：

您可能不想使用贴图，而是考虑在不再需要粒子时将它们标记为“死”，并使用该标志在更新迭代中跳过它们。将死粒子的引用存储在一个新的 deadParticles ArrayList 中，当您需要一个新粒子时，只需从该列表中取出一个即可。这样，您可以在需要时立即访问粒子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:24:05.513

您是否在预分配元素对象，并重用空对象而不是分配新对象？

# php - PHP 和 MySQL 内容显示乱序

> ID：11595945
> 
> 赞同：0
> 
> 时间：2012-07-21T21:20:34.713
> 
> 标签：php, mysql, html, dynamic

在动态生成具有不同类型内容的页面时，“帖子”内容出现在正在生成的静态内容之上。我希望它反过来。我的代码中是否有任何东西会导致这种情况发生，或者您认为问题与我的数据库有关吗？谢谢。

```
$query = "SELECT * FROM content WHERE pages LIKE '%$pageID%'";
$result = mysql_query($query) or die(mysql_error());
while ($row = mysql_fetch_assoc($result)) {

// Display pages's static content

if ($row['type'] == "static") {

    echo "
        <h2>" . $row['tile'] . "</h2>
        <content>" . $row['body'] . "</content>
    ";
}

// Display pages's posts

else {
    echo "
        <h2>" . $row['tile'] . "</h2>
        <content>" . $row['body'] . "</content>
    ";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:27:41.560

```
SELECT * FROM content WHERE pages LIKE '%$pageID%' ORDER BY type desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:26:10.203

将此添加到查询的末尾：

```
ORDER BY CASE WHEN type = 'static' THEN 0 ELSE 1 END 
```

# jsf - 注销后重定向在 JSF2 导航规则中不起作用

> ID：11595948
> 
> 赞同：1
> 
> 时间：2012-07-21T21:20:46.750
> 
> 标签：jsf, redirect, jsf-2, navigation, logout

当他单击注销按钮时，我想将用户重定向到开始视图。注销已正确完成，并且在请求开始视图后，会向用户显示一个登录页面。到目前为止一切顺利，这是我想要的，因为开始视图受到保护，并且我使用重定向到登录页面的阶段侦听器进行拦截。

注销操作：

```
public String logout() {

    FacesContext context = FacesContext.getCurrentInstance();
    ExternalContext externalContext = context.getExternalContext();

    // invalidate session
    Object session = externalContext.getSession(false);
    HttpSession httpSession = (HttpSession) session;
    httpSession.invalidate();

    // let the navigation rule decide where to go...
    return null;
} 
```

人脸导航规则：

```
<navigation-rule>
    <navigation-case>
        <from-action>#{loginBean.logout}</from-action>
        <to-view-id>/faces/index.xhtml</to-view-id>
        <redirect />
    </navigation-case>
</navigation-rule> 
```

强制登录监听器：

```
@Override
public void beforePhase(PhaseEvent event) {

    FacesContext context = FacesContext.getCurrentInstance();

    // extract view id from original request
    String viewId = context.getViewRoot().getViewId();

    if (// viewId is an 'protected' view AND not logged in //) {

        Application app = context.getApplication();

        // redirect to the login view
        ViewHandler viewHandler = app.getViewHandler();
        UIViewRoot viewRoot = viewHandler.createView(context, Constants.LOGIN_VIEW);
        context.setViewRoot(viewRoot);

    }

}

@Override
public void afterPhase(PhaseEvent event) {
}

@Override
public PhaseId getPhaseId() {
    return PhaseId.RENDER_RESPONSE;
} 
```

我现在遇到的问题是用户可见的 URL 不是开始视图也不是登录视图，它是在用户按下注销按钮之前处于活动状态的视图。

我认为导航规则中的重定向应该像我所有其他导航案例一样发挥作用，但在这种情况下它不起作用。有人知道为什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:23:44.687

您的奇怪`ForceLoginListener`方法需要替换为普通的[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:35:34.463

我不太了解您的情况到底发生了什么，但是您可以将注销操作更改为使用 重定向`externalContext`，并消除导航规则的所有麻烦：

```
public void logout() throws IOException {
    FacesContext context = FacesContext.getCurrentInstance();
    ExternalContext externalContext = context.getExternalContext();

    // invalidate session
    Object session = externalContext.getSession(false);
    HttpSession httpSession = (HttpSession) session;
    httpSession.invalidate();

    // redirect to your login view:
    externalContext.redirect(Constants.LOGIN_VIEW);
} 
```

# c# - 按钮在单击时不会更改标签

> ID：11595949
> 
> 赞同：0
> 
> 时间：2012-07-21T21:20:53.693
> 
> 标签：c#, asp.net

我有这个 Default.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Xml;
using System.IO;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        Calendar1.SelectedDate = DateTime.Today;
        info.Visible = false;
        meeting.Visible = true;
        member.Visible = true;
        label.Visible = true;
    }

    protected void Button3_Click(object sender, EventArgs e)
    {
        DateTime Now = DateTime.Today;
        DateTime wed1 = getFirstWednesdayOfMonth(Now);
        DateTime wed3 = getThirdWednesdayOfMonth(Now);

        if (Now < wed1)
        {
            Label5.Text = "The next meeting is on" + "\n" + wed1.ToShortDateString() + "\nat 7 pm in room S242";
        }
        else if (Now < wed3)
        {
            Label5.Text = "The next meeting is on" + "\n" + wed3.ToShortDateString() + "\nat 7 pm in room S242";
        }
    }

    protected DateTime getFirstWednesdayOfMonth(DateTime seedDate)
    {
        DateTime wed1 = new DateTime(seedDate.Year, seedDate.Month, 1);
        while (wed1.DayOfWeek != DayOfWeek.Wednesday)
        {
            wed1 = wed1.AddDays(1);
        }
        return wed1;
    }
    protected DateTime getThirdWednesdayOfMonth(DateTime seedDate)
    {
        DateTime wed3 = new DateTime(seedDate.Year, seedDate.Month, 15);
        while (wed3.DayOfWeek != DayOfWeek.Wednesday)
        {
            wed3 = wed3.AddDays(1);
        }
        return wed3;
    }

    protected void btnInfo_Click(object sender, EventArgs e)
    {
        btnInfo.Visible = false;
        info.Visible = true;

    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            if (validateFirst.IsValid && validateLast.IsValid && validatePhone.IsValid && validateEmail.IsValid)
            {
                lblThanks.Text = "Thanks! you will contacted in 2 business days!";
                info.Visible = false;
            }
        }
    }
    protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (ListBox1.SelectedValue == "analyst")
        {

        }
    }
} 
```

**和 Default.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
    <style type="text/css">
        .heading
        {
            text-align: center;
            border-style: double;
            background-color:#F2A988;
            font-family:Sans-Serif;
            font-weight:bold;

        }
        #wrapper {
            margin: 0 auto;
            width: 400px; 
            text-align:left;
        }
        .style1
        {
            text-align: center;
            font-family:Sans-Serif;
        }
        .style2
        {
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>
</head>
<body style="height: 642px; width: 911px; " id="wrapper">
    <form id="form1" runat="server">

    <div class="heading">
        ABC Computer Club - Inquiry Form</div>
        <br />

    <asp:Calendar ID="Calendar1" runat="server" Font-Names="Arial"></asp:Calendar>

        <br />
    <asp:Label ID="lblThanks" runat="server" 
        style="font-family: Arial, Helvetica, sans-serif; font-weight: 700"></asp:Label>
    <br />

        <br />

    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <asp:Button ID="btnInfo" runat="server" Font-Names="Arial" 
         style="font-weight: 700" 
        Text="I'd like to receive more information!" Width="261px" 
        onclick="btnInfo_Click" />

    <div runat="server" id="info" 
        style="position:relative; top: -1px; left: 7px; width: 463px; height: 415px;">
        <span class="style2">If you would like to join the club or receive more 
        information about the club, fill in the form below and click the submit button.</span><br />
        <br />
        <asp:Label ID="Label1" runat="server" 
            style="font-weight: 700; font-family: Arial, Helvetica, sans-serif" 
            Text="First Name:"></asp:Label>
&nbsp;<asp:TextBox ID="txtFName" runat="server"></asp:TextBox>
        <br />
        <br />
        <asp:Label ID="Label2" runat="server" 
            style="font-weight: 700; font-family: Arial, Helvetica, sans-serif" 
            Text="Last Name:"></asp:Label>
&nbsp;<asp:TextBox ID="txtLName" runat="server"></asp:TextBox>
        <br />
        <br />
        <asp:Label ID="Label3" runat="server" 
            style="font-weight: 700; font-family: Arial, Helvetica, sans-serif" 
            Text="Phone #:"></asp:Label>
&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:TextBox ID="txtPhone" runat="server"></asp:TextBox>
        <br />
        <br />
        <asp:Label ID="Label4" runat="server" 
            style="font-weight: 700; font-family: Arial, Helvetica, sans-serif" 
            Text="Email:"></asp:Label>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:TextBox ID="txtEmail" runat="server"></asp:TextBox>
        <br />
        <br />
        <asp:Button ID="Button2" runat="server" onclick="Button2_Click" Text="Submit" />
        <br />
        <br />
        <asp:RequiredFieldValidator ID="validateFirst" runat="server" 
            ControlToValidate="txtFName" ErrorMessage="First Name is Required" 
            style="font-family: Arial, Helvetica, sans-serif"></asp:RequiredFieldValidator>
        <br />
        <br />
        <asp:RequiredFieldValidator ID="validateLast" runat="server" 
            ControlToValidate="txtLName" ErrorMessage="Last Name is Required" 
            style="font-family: Arial, Helvetica, sans-serif"></asp:RequiredFieldValidator>
        <br />
        <br />
        <asp:RegularExpressionValidator ID="validatePhone" runat="server" 
            ControlToValidate="txtPhone" ErrorMessage="Phone Number is invalid" 
            style="font-family: Arial, Helvetica, sans-serif" 
            ValidationExpression="^[01]?[- .]?(\([2-9]\d{2}\)|[2-9]\d{2})[- .]?\d{3}[- .]?\d{4}$"></asp:RegularExpressionValidator>
        <br />
        <br />
        <asp:RegularExpressionValidator ID="validateEmail" runat="server" 
            ControlToValidate="txtEmail" ErrorMessage="Invalid Email" 
            style="font-family: Arial, Helvetica, sans-serif" 
            ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"></asp:RegularExpressionValidator>
    </div>

    <div runat="server" id="meeting" 
        style="position:absolute; top: 150px; left: 580px; width: 232px; height: 64px; text-align: center; margin-top: 0px; font-family: Arial; font-weight:bold;">
        <br />
&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:Label ID="Label5" runat="server" Text="Test"></asp:Label>
        <br />
        </div>

    <div runat="server" id="label" style="width: 308px; position:absolute; top: 45px; left: 550px; margin-top: 0px;" 
        class="style1">
        Click Below to find out when
        <br />
        the club meets next</div>

    <div runat="server" id="member" 

        style="position:absolute; top: 28px; left:880px; width: 274px; height: 441px; font-family:Sans-Serif;">
        <b>View Members by Program:<br />
        <asp:ListBox ID="ListBox1" runat="server" Height="175px" Width="213px" 
            onselectedindexchanged="ListBox1_SelectedIndexChanged">
            <asp:ListItem Value="all">All</asp:ListItem>
            <asp:ListItem Value="programmer">Computer Programmer</asp:ListItem>
            <asp:ListItem Value="itss">Information Technologies Support Services</asp:ListItem>
            <asp:ListItem Value="analyst">Systems Analyst</asp:ListItem>
        </asp:ListBox>
        <br />
        <br />
        </b></div>

    <div style="position:absolute; top: 99px; left: 600px; width: 192px; text-align: center; margin-top: 0px;">
        <asp:Button ID="Button3" runat="server" onclick="Button3_Click" 
            Text="Next Meeting" />
    </div>

    </form>
</body>
</html> 
```

问题是，每当我单击**“下一个会议”**时，什么都没有发生，而*它应该将标签文本设置为 Next Available first or third week of the month*。它以前确实有效，但是自从我将整个代码复制到新网站后，它就不起作用了。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:42:22.503

该代码从未正常工作过。也许它似乎在 2012 年 7 月 18 日之前有效，这是本月的第三个星期三，因为那时`(Now < wed3) == true`.

现在既不是`Now < wed1`也不`Now < wed3`是真的，这是更改标签文本属性的唯一方法。

```
if (Now < wed1)
{
    Label5.Text = "The next meeting is on" + "\n" + wed1.ToShortDateString() + "\nat 7 pm in room S242";
}
else if (Now < wed3)
{
    Label5.Text = "The next meeting is on" + "\n" + wed3.ToShortDateString() + "\nat 7 pm in room S242";
} 
```

也许您需要告诉我们您的真实需求。你的程序应该做什么？

您可能还想`if(!IsPostback)`检查 page_load 中的默认设置，否则`Calendar.SelectedDate`总是会被覆盖。

```
if(!Page.IsPostBack)
{
    // not on postbacks, f.e. when the user selected a date
    Calendar1.SelectedDate = DateTime.Today;
    // ....
} 
```

* * *

> 但是有一点，如果没有可用的第一个或第三个星期三，它应该显示下个月的第一个星期三。对？

这是我要求的缺失要求。由于第三个星期三已经过去，你想返回下个月的第三个星期三：

```
public static DateTime getNextWeekDay(DateTime date, DayOfWeek dayOfWeek, int weekNum)
{
    if (weekNum < 1 || weekNum > 4)
        throw new ArgumentException("Number of week must be between 1 and 4.", "weekNum");

    int inWeekNum = date.Date.Day / 7;
    if (inWeekNum >= weekNum)
    {
        var nextMonth = date.AddMonths(1);
        date = new DateTime(nextMonth.Year, nextMonth.Month, 1);
    }
    DateTime currentDate = date;
    int currentWeekNum = 0;
    while (currentWeekNum < weekNum)
    {
        if (currentDate.DayOfWeek == dayOfWeek)
            currentWeekNum++;
        if (currentWeekNum == weekNum)
            break;
        else
            currentDate = currentDate.AddDays(1);
    }
    return currentDate;
} 
```

Yiou可以这样使用：

```
DateTime wed1 = getNextWeekDay(Now, DayOfWeek.Wednesday, 1);
DateTime wed3 = getNextWeekDay(Now, DayOfWeek.Wednesday, 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T22:05:18.600

你需要第三种情况

```
DateTime getFirstWednesdayOfNextMonth(DateTime seedDate) 
{ 
    int year = seedDate.Year;
    int month = seedDate.Month+1;
    if (month > 12) 
    {
        month = 1; 
        year = year + 1;
    }
    DateTime wed1 = new DateTime(year, month, 1); 
    while (wed1.DayOfWeek != DayOfWeek.Wednesday) 
    { 
       wed1 = wed1.AddDays(1); 
    } 
    return wed1; 
} 
```

并将结尾添加到您的 Button3_Click

```
protected void Button3_Click(object sender, EventArgs e)    
{    
    DateTime Now = DateTime.Today;    
    DateTime wed1 = getFirstWednesdayOfMonth(Now);    
    DateTime wed3 = getThirdWednesdayOfMonth(Now);    
    DateTime wedNext = getFirstWednesdayOfNextMonth(Now);    

    if (Now < wed1)    
    {    
        Label5.Text = "The next meeting is on" + "\n" + wed1.ToShortDateString() + "\nat 7 pm in room S242";    
    }    
    else if (Now < wed3)    
    {    
        Label5.Text = "The next meeting is on" + "\n" + wed3.ToShortDateString() + "\nat 7 pm in room S242";    
    }    
    else     
    {    
        Label5.Text = "The next meeting is on" + "\n" + wedNextMonth.ToShortDateString() + "\nat 7 pm in room S242";    
    }    
} 
```

顺便说一句，当您知道每月的第一个星期三时，计算另外两个很简单，只需将第一个星期三加 14。

```
 DateTime wed1 = getFirstWednesdayOfMonth(Now); 
  DateTime wed3 = wed.AddDays(14);
  DateTime wedNext = wed3.AddDays(14);
  // But it could be in the same month (1,8,15,22,29)
  if(wedNext.Month == wed3.Month)
     wedNext = wedNext.AddDays(7); 
```

# c# - 如何在 C# 泛型容器中实现小于和大于？

> ID：11595950
> 
> 赞同：2
> 
> 时间：2012-07-21T21:20:56.027
> 
> 标签：c#

在 C++ 中，我可以使用优先级队列编写：

```
priority_queue<int, vector<int>, greater<int>> min_pq;
priority_queue<int, vector<int>, less<int>> max_pq; 
```

我想知道在 C# 容器中是否有等效的方法？我正在实现一个优先级队列，当用户使用其构造函数时，我需要一种方法来指定此行为。我可以使用`boolean`旗帜，但它对我来说看起来不合适。任何的想法？

```
public class PriorityQueue<T> where T : IComparable<T> {
     private List<T> data;

     /// <summary>
     /// 
     /// </summary>
     /// <param name="item"></param>
     public void Push(T item) {

     }

     /// <summary>
     /// 
     /// </summary>
     public void Pop() {

     } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T21:24:58.783

C# 中的一个惯用解决方案是将 的实例传递[`IComparer<T>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)给泛型类的构造函数。

```
public class PriorityQueue<T> {
    private readonly IComparer<T> comparer;
    public PriorityQueue(IComparer<T> comp = null) {
        comparer = comp ?? Comparer<T>.Default;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T21:36:03.427

在一般意义上，这可以通过参考来实现`int Comparer<T>.Default.Compare(T x, T y)`。这包含了许多不同的实现模式，包括：

*   `IComparable`（非通用）
*   `IComparable<T>`（通用的）
    *   并通过以下方式处理“提升”操作`Nullable<T>`

这基本上是如何`List<T>`应用`Sort()`的，等等。

然而！没有直接的方法可以通过限制来应用`<`/`>` **运算符**；运算符并不真正适用于泛型 - 它与 C++ 模板不同。

另一种方法是使用`dynamic`. 因为这是按类型检查的，而不是在泛型中“针对所有 T”，这允许`dynamic`使用运算符；但它需要值类型的装箱和一些间接性。

# git - 文件未在 Git 中使用自定义工作树进行更新

> ID：11595954
> 
> 赞同：2
> 
> 时间：2012-07-21T21:21:49.283
> 
> 标签：git, mediatemple

我正在尝试使用单独的工作树创建 Git 存储库。我完全按照本教程进行操作：http: [//caiustheory.com/automatically-deploying-website-from-remote-git-repository](http://caiustheory.com/automatically-deploying-website-from-remote-git-repository)

我可以从我的本地仓库提交并推送到我的远程。我指定为工作树的文件路径不包含我推送的文件。

我在想文件路径可能不正确（我在 MediaTemple GS 上），但是当我推送时 Git 不会抛出任何错误。

这是我遥控器的配置：

```
[core]
repositoryformatversion = 0
filemode = true
bare = false
worktree = /home/xxxxx/domains/xxxxxx.com/html/b

[receive]
denycurrentbranch = ignore 
```

我的 post-receive 和 post-update 钩子都是 777 并且都包含这个：

```
#!/bin/sh
git checkout -f 
```

我真的很感激提供的任何帮助。

谢谢，

- 缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:01:04.547

你会想要这样的东西：

[https://github.com/richo/git_template/blob/master/hooks/post-receive](https://github.com/richo/git_template/blob/master/hooks/post-receive)

或者更简洁地说：

```
#!/bin/sh

# Kludge to read the last ref
while read old new ref; do
real_sha=$new
done

GIT_WORK_TREE=$PWD/../ git checkout -qf $real_sha 
```

基本上，新的 ref 被传入`post-receive`标准输入，所以你需要手动读取它们。

你的钩子正在做的是强行检查现有的参考。

# asp.net - 我将我的 ASP.Net 站点从一个 UNC 路径迁移到另一个路径，但是一个子应用程序给了我一个 AspNetHostingPermission

> ID：11595959
> 
> 赞同：0
> 
> 时间：2012-07-21T21:22:34.373
> 
> 标签：asp.net, code-access-security, full-trust

我已将我的 ASP.Net 网站从一台服务器上的 UNC 路径迁移到新的更大服务器上的新 UNC 路径。

在[弄乱了代码访问安全权限`caspol`](https://stackoverflow.com/a/9552246/205245)并[确保 AppPool 具有正确的设置](https://stackoverflow.com/a/1848756/205245)后，该网站运行正常，没有古怪的“PolicyException：无法获取所需权限”CAS 错误。

不过，我遇到的问题是有一个子目录配置为它自己的 Web 应用程序。该应用程序给了我一个黄屏死机错误：

> System.Security.SecurityException：请求“System.Web.AspNetHostingPermission, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”类型的权限失败。

现在我知道该站点现在以完全信任的方式运行，那么为什么这个 subdir 应用程序不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:22:34.373

（在提问的同时回答我自己的问题）

虽然许多设置是从父站点继承的，但以下内容不一定（它们在子目录应用程序的“高级设置”对话框中可用）：

*   应用程序池
*   物理路径
*   物理路径凭证
*   物理路径凭据登录类型
*   启用的协议

![IIS7 高级设置对话框的屏幕截图](../Images/c6ab466fcab034f7551ab15c7900733a.png)

查看应用程序的高级设置，我可以看到物理路径仍然指的是旧服务器的 UNC 路径。更改了 CAS 政策后，这将不再有效。在此处更正 UNC 路径使问题消失。

## 奖励积分

另一个迹象是应用程序日志中的警告级别条目：

> 事件代码：3006
> 事件消息：发生解析器错误。
> ...
> 事件详细代码：0
> 
> **应用信息：**
> 
> > 应用程序域：/LM/W3SVC/3/ROOT/ *[已编辑]*
> > 信任级别：完整
> > 应用程序虚拟路径：*[已编辑]*
> > 应用程序路径：*[**旧**UNC 路径]*
> > 机器名称：*[已编辑]*
> 
> **处理信息：**
> 
> > 进程 ID：4592
> > 进程名称：w3wp.exe
> > 帐户名称：*[已编辑]*
> 
> **异常信息：**
> 
> > 异常类型：HttpException
> > 异常消息：请求“System.Web.AspNetHostingPermission，System，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”类型的权限失败。

# wordpress - mod_rewrite 规则不起作用

> ID：11595965
> 
> 赞同：0
> 
> 时间：2012-07-21T21:23:05.763
> 
> 标签：wordpress, mod-rewrite

这些年来我经常使用 mod_rewrite 规则，这更让我不明白为什么这不起作用：

```
RewriteRule ^cottage/house/(.*)/(.*)$ /cottage/house/$1?query=$2 [L] 
```

我将它与以下 .htaccess 文件一起使用：

```
RewriteEngine On

Rewritecond %{HTTP_HOST} !^www\.website\.com
RewriteRule (.*) http://www.website.com/$1 [R=301,L]

RewriteBase /
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule  ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]
RewriteRule  ^([_0-9a-zA-Z-]+/)?(.*\.php)$ $2 [L]
RewriteRule . index.php [L] 
```

此代码应该使格式的 URL`/cottage/house/housename/about`转到`/cottage/house/housename?query=about`...任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:25:19.763

当单独使用时，该规则非常有效。

问题是`[L]`规则中的 仅意味着在此处理步骤中不再处理此规则集（.htaccess 文件）中的规则。

但是，重写后的 URL`/cottage/house/housename?query=about`会返回给 URL 解析引擎。由于匹配规则导致内部重定向，URL 将被规则集再次处理（作为子请求）。

我猜不存在真正的文件或目录匹配`/cottage/house/housename?query=about`，并且我还假设此 URL 不会被其他规则捕获。这将导致规则`RewriteRule . index.php [L]`匹配，从而导致另一个子请求，这一次`index.php`将显示索引页面。这就是为什么看起来该规则似乎无法正常工作的原因。

*如何解决这个问题？*

确保第一个子请求被常规规则捕获。实际`RewriteRule`情况取决于您的整体 URL 结构的外观，以及哪些其他规则（示例代码中未给出）处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:39:18.047

我设法解决了这个问题——Wordpress 有自己的处理方式`mod_rewrite`。

下面的代码以 Wordpress 理解的方式在内部重写了 URL：

```
function ong_custom_house_pages() 
{
    function add_query_vars($houseVars) 
    {
        $houseVars[] = "current_house_page"; 
        return $houseVars;
    }
    add_filter('query_vars', 'add_query_vars');
    add_rewrite_rule("^houses/([^/]+)/([^/]+)/?",'index.php?
    houses=$matches[1]&current_house_page=$matches[2]','top');
}
add_action('init','ong_custom_house_pages'); 
```

希望这可以帮助任何有类似问题的人。

# ssh - 是否可以将 ssh 密钥重新限制到特定目录

> ID：11595966
> 
> 赞同：0
> 
> 时间：2012-07-21T21:23:07.287
> 
> 标签：ssh, sftp

我在服务器上有一个帐户，我需要将 sftp 访问权限授予另一个人。然而，这个人只需要访问一小部分目录。是否可以在不创建另一个用户帐户的情况下将 ssh 密钥限制为该目录子集。

基本上，这些目录所在的网站位于特定用户帐户的主目录中。我宁愿不必创建一个单独的用户帐户来锁定这些目录的使用。如果可以使用理想的 ssh 密钥锁定对特定目录的访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:30:17.250

这是可能的，但它有点像黑客。更受欢迎、更简单的方法是仅授予该用户对某些文件和目录的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T20:11:56.527

这是关于如何使用 ssh 而不是 sftp 实现目标的答案。这有一些机会被 OP 接受，因为它仍然使用 ssh 工具链。

该技术使用 ssh 的一项功能，该功能允许 ssh 基于提供给主机的私钥运行命令。当主机看到该密钥时，它会运行相关的命令。对于命令，我们将使用“cat”来转储文件。

1.  添加一条看起来像这样的行`~mr_user/.ssh/authorized_keys2`

```
command="/usr/bin/cat ~/sshxfer/myfile.tar.gz.uu",no-port-forwarding ssh-dss xxxPUBLIC_KEYxxx mr_user@tgtmach 
```

2.  像这样填充文件：

```
uuencode -m myfile.tar.gz /dev/stdout >~mr_user/sshxfer/myfile.tar.gz.uu 
```

3.  通过在目标机器上并运行以下命令来传输文件：

```
ssh -i ~/keys/privatekey.dsa mr_user@srcmach |sed -e's/
//g' |uudecode >myfile.tar.gz 
```

该命令的棘手部分是 sed 命令中有一个换行符，用于从 .uu 文件中删除换行符。

我没有找到一种方法来传递要传输的文件名，因此我必须为每个要传输的文件创建一个密钥。这对我的用例来说没问题，因为我只有两个要传输的文件。

# css - css3pie从ie7,8中的圆形元素泄漏图像

> ID：11595969
> 
> 赞同：0
> 
> 时间：2012-07-21T21:23:34.923
> 
> 标签：css, rounded-corners, css3pie

我试图用 css 和 javascript 创建一个简单的旋转星球。首先，我尝试将图像作为背景，这在所有浏览器中都可以正常工作，但背景位置动画在 IE 中的性能非常差，并且很快提高了 RAM 使用率（每秒增加 50-100 MB），直到浏览器崩溃。然后我决定尝试在行星 div 中使用图像并为其位置设置动画，这会产生平滑的动画和低内存消耗，但正如您在下面的图像中看到的那样，图像泄漏到了边界之外。星球 div 有`border-radius: 50%`.

我试过添加`overflow: hidden`到这个星球，但没有奏效。除了使用某种口罩外，有没有办法防止泄漏发生？

![行星](../Images/5ba1af59ba0e4d7c21bca6e5709b2a05.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:26:14.707

所以要回答我的问题，css3pie 无法在 IE 7 和 8 中剪辑内容，因此不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T08:00:49.190

如果您将 css3pie 的行为应用于 img 标签本身，或者如果您将图像用作圆形容器的背景，则只能使用 css3pie 剪辑图像......我猜您希望月亮围绕垂直（y）轴向右旋转? 围绕 z 轴是可能的......但是 css3pie 会动态生成图像，因此如果您需要为圆形容器的内容设置动画，它将在每一帧上重绘。所以真的没有解决方案。杀死IE也许！？

# php - Mysql评论标签破坏了我的代码（PHP）

> ID：11595970
> 
> 赞同：0
> 
> 时间：2012-07-21T21:23:38.363
> 
> 标签：php, mysql, pdo

我正在使用 PDO 来准备查询，但是当我输入 # 或 -- （SQL 注释）它仍然有效（我知道 PDO 不会禁用它）如何让它停止？此评论破坏了我的整个代码。（我想允许使用它但停止破坏）
例如：
`SELECT * FROM something WHERE var=:var AND value=:value`
我只是放了#，这种情况
`SELECT * FROM something WHERE var=:var# AND value=:value`只会检查 var/:var
（假设 :var 是用户使用 # 输入的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:26:58.593

用单引号将变量括起来：

```
SELECT * FROM something WHERE var=':var#' AND value=':value' 
```

# algorithm - 二叉树中的平衡和

> ID：11595971
> 
> 赞同：5
> 
> 时间：2012-07-21T21:23:53.980
> 
> 标签：algorithm, tree

我发现了一个有趣的算法问题。我们得到一棵二叉树，除了叶子之外，每个顶点的值都为 0。在叶子中，我们有两种选择：

1.  值未知，但我们知道它是一个自然数 >=1

2.  值是已知的，它是一个自然数 >=1

问题是决定是否可以设置叶子中的每个未知值，使得给定树的每个子树在其左右子树的顶点中具有相同的值总和。

例如：

**树1：**

```
 0
     / \
    0   ?
   / \
  0   5
 / \
?   ? 
```

答案是否定的——考虑到每个问号都必须是自然数，这当然是不可能的

**树2：**

```
 0
     /     \
    0      0
   / \    / \
  0   10 ?   ?
 / \
5   ? 
```

答案是肯定的——我们在每个问号中分别设置：5、10、10。

到目前为止，我只提出了一个明显的算法——我们创建线性方程组并检查它是否有自然数的解。但是我认为对于大树来说它可能会很慢，这应该是解决它的更好方法。有人可以帮忙吗？我会很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:31:41.573

这是可并行的。您创建从叶子到根的方程组，在每个顶点合并方程（和计算）。当方程组变得不可能时，中止所有计算。

与此类似的非并行模拟是短路评估。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T00:06:31.410

我认为递归解决方案工作得很好。在每个节点获得左右孩子的权重。您有以下情况：

1.  L 和 R 都是已知的：节点有效当且仅当 L == R
2.  L 或 R 都不知道：这个节点是未知的，其多重性是 L 和 R 的最大多重性的两倍
3.  L 或 R 中的一个是未知的：如果已知子节点的权重可被未知子节点的倍数整除，则此节点有效。它的重量是已知孩子体重的两倍。

这里的想法是您需要跟踪某个节点下方有多少未知子节点，因为值只能是整数。多重性总是加倍，因为在一个节点上，即使它的左孩子有 4 个未知数，而它的右边有 1 个未知数，那么 1 未知数必须是 4 的倍数，所以这个节点的多重性必须是 8。

注意：我在这里使用了多重性这个词，它并不完全正确，但我想不出一个好的词来使用。

这是 Go 中的代码，用于在您的示例中演示此解决方案：

```
package main

import (
  "fmt"
)

// Assume that (Left == nil) == (Right == nil)
type Tree struct {
  Val         int
  Left, Right *Tree
}

func (t *Tree) GetWeight() (weight int, valid bool) {
  if t.Left == nil {
    return t.Val, true
  }
  l, lv := t.Left.GetWeight()
  r, rv := t.Right.GetWeight()
  if !lv || !rv {
    return 0, false
  }
  if l < 0 && r < 0 {
    if l < r {
      return 2 * l, true
    }
    return 2 * r, true
  }
  if l < 0 {
    return 2 * r, r%(-l) == 0
  }
  if r < 0 {
    return 2 * l, l%(-r) == 0
  }
  return r + l, r == l
}

func main() {
  t := Tree{0,
    &Tree{0,
      &Tree{0,
        &Tree{Val: 5},
        &Tree{Val: -1},
      },
      &Tree{Val: 10},
    },
    &Tree{0,
      &Tree{Val: -1},
      &Tree{Val: -1},
    },
  }
  w, v := t.GetWeight()
  fmt.Printf("%d, %t\n", w, v)
  t = Tree{0,
    &Tree{0,
      &Tree{0,
        &Tree{Val: -1},
        &Tree{Val: -1},
      },
      &Tree{Val: 5},
    },
    &Tree{Val: -1},
  }
  w, v = t.GetWeight()
  fmt.Printf("%d, %t\n", w, v)
} 
```

# c++ - Qt - 需要递归重绘，如何？

> ID：11595977
> 
> 赞同：0
> 
> 时间：2012-07-21T21:25:43.337
> 
> 标签：c++, qt, opengl, graphics

我有以下代码：

```
paintGL()
{

    if(mouse_was_clicked)
    {
       ... do the color picking with openGL to identify a clicked element

       ... !!! now I need to call again paintGL() to switch the selected element from the 
              old one to the new one but I can't create a recursive cycle!
    }
    else
    {
       ... normal code to draw the scene and the selected element in red ...
    }
} 
```

正如线条所暗示的那样，我需要一种方法来再次调用绘制事件。有没有办法在不产生潜在活锁的情况下实现这一点？比如推迟一个新的绘画活动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:47:04.430

如果您的控制流程`paintGL()`如此简单，只需确保`else`在每种情况下都执行当前位于块中的内容：

```
void MyWidget::paintGL()
{
    if(mouse_was_clicked)
    {
        ... do the color picking with openGL to identify a clicked element
    }

    ... normal code to draw the scene and the selected element in red ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T21:51:39.550

很难准确地说出你在这里做什么。

如果您在paintGL 检测到已单击鼠标按钮时尝试设置显示小部件（颜色选择器），则您混淆了事件。您应该为处理鼠标单击进行单独的操作，该操作设置标志/变量并触发重绘。IE，将鼠标事件处理移出重绘回调。

I could easily have misunderstood your problem here, however... if so I apologize.

As a general rule, though, if you find yourself needing a recursive repaint in QT, you're probably working against, rather than with, the system.

# php - 向 jquery 事件函数发送多个动态参数

> ID：11595978
> 
> 赞同：0
> 
> 时间：2012-07-21T21:25:52.463
> 
> 标签：php, jquery

我想向 JQUERY 事件函数发送多个参数。为了发送一个数据，我将它放在 html 代码中的 value attr 中。

```
<li id="<?php echo 'v'.$value['vehicleid'] ?>" value="<?php echo $value['vehicleid']; ?>" > 
```

并在 JQuery 事件函数中获取数据`$(this).val()`但我不知道如何将多个 php 数据传递给 JQuery 事件函数！
这些数据是动态的，由 php 代码生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:48:15.913

前几天我遇到了类似的事情。

尝试使用 html5 自定义数据属性。

John Resig（jquery 之王和一般 javascript 忍者）首先在[此处](http://ejohn.org/blog/html-5-data-attributes)发布了有关它的信息。

所以：

```
<li id="vehicle<?php echo 'v'.$value['vehicleid'] ?>" data-vehicle="<?php echo    $value['vehicleid']; ?>" > 
```

然后使用 jquery .data 函数访问它。见[http://api.jquery.com/data/](http://api.jquery.com/data/)。

如果您要添加大量数据，我建议您使用对象文字

```
{ vehicleId:    <?php echo 'v'.$value['vehicleid'] ?>,
vehicleName: <?php echo 'v'.$value['vehicleName'] ?>} 
```

如 jquery 网站上的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:39:25.337

我不能百分百确定您与哪种事件有关。但是你可以在函数内部传递多个参数（..HERE..）。它应该用逗号分隔。就像这样。

```
 $('selector').change(function(arg1,arg2,arg3){
          alert(arg1+arg2+arg3);
   }); 
```

在此示例中，我使用选择器“选择器”的更改事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T21:40:07.770

您不能在`li`应该用于表单元素的表单元素上使用 val()，例如输入，其中有一个名为的有效属性`value`

对于一个 li，您可以使用数据属性

```
<li id="<?php echo 'v'.$value['vehicleid'] ?>" data-vehicleid="<?php echo $value['vehicleid']; ?>" > 
```

并使用：

```
var vehicleId = $(this).data('vehicleid'); 
```

为了传递多个数据，您可以使用“-”之类的字符分隔每个 id：

```
<li id="<?php echo 'v'.$value['vehicleid'] ?>" data-vehicleids="<?php echo $value['vehicleid1']. '-' .$value['vehicleid2']; ?>" > 
```

这应该产生类似的东西：

```
<li id="1234" data-vehicleids="1234-3456-5678" > 
```

然后做

```
var vehicleIdsArray = $(this).data('vehicleids').split('-'); 
```

只需确保用于分隔的字符不用于车辆 ID

这应该可以帮助您：

```
<ul id="list">
<li data-vehicleid="1234" data-vehiclename="renault" data-vehicle-color="silver">Renault</li>
</ul> 
```

* * *

```
$(document).ready(function(){
  $('ul#list li').click(function(e){
    var vehicleId = $(this).attr('vehicleid');
    var vehicleName = $(this).attr('vehiclename');
    var vehicleColor = $(this).attr('vehiclecolor');
    return false;
  });
}); 
```

来自 Resig 的引述：

> 我认为整个规范最吸引人的地方在于，您无需等待任何浏览器实现任何内容即可开始使用它。通过今天开始在您的 HTML 元数据上使用 data- 前缀，您可以放心地知道它会在未来继续正常工作。在 HTML 5 验证器集成到完整的 W3C 验证器时，您的站点已经符合要求（当然，假设您已经是有效的 HTML 5 并使用 HTML 5 Doctype）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T22:05:16.063

我认为您必须创建一个函数来处理事件

```
 function handleEvent(data-vehicleid,data-vehiclename,data-vehiclename)
    {
        alert(data-vehicleid + data-vehiclename + data-vehiclename);
    } 
```

然后在你的礼上，

```
<li onmouseover="handleEvent(<?php echo $variable1;?>,<?php echo $variable2;?>,<?php echo $variable3;?>)">Renault</li> 
```

# mysql - 从 MySQL 中获取 Json 格式的 byte[]

> ID：11595987
> 
> 赞同：0
> 
> 时间：2012-07-21T21:27:29.623
> 
> 标签：mysql, json, blob, gson

我一直在尝试从我的数据库 blob 中获取一个 byte[]，然后将其解析为 json 并将其发送给我的客户。我首先从数据库中获取 blob，然后通过执行以下操作获取字节数组：

```
MyObject temp = new MyObject()
Blob icon = dbResult.getBlob(1);
temp.setIcon(icon.getBytes(1, (int)icon.length())); 
```

稍后我将 MyObject 解析为我发送回客户端的 json 字符串。但是在解析 byte[] 时，json 字符串似乎变得非常损坏。

它的外观示例：

```
[{"icon":"/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAFQAPwDASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAAAgEDBAUGAAcI 
```

我在我的 web 服务中将其解析为 json，这是一个 jersery web 服务。当我尝试将其从 json 解析为客户端的类对象时，它会抛出 IllegalStateException(Gson)。

任何人都知道这是关于什么以及我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:32:19.267

如果您尝试使用 json 传输二进制数据，最好使用[base64](http://en.wikipedia.org/wiki/Base64)对其进行显式编码，然后在接收方进行解码。JSON 不是为包装二进制文件而设计的，因此尝试执行此操作时的问题是可以预料的。

# sql - 从 sql 表中检索最大值

> ID：11595993
> 
> 赞同：0
> 
> 时间：2012-07-21T21:29:22.573
> 
> 标签：sql, sql-server-2008

如何检索该数据：

```
Name     Title      Profit
Peter    CEO        2
Robert   A.D        3
Michael  Vice       5
Peter    CEO        4
Robert   Admin      5
Robert   CEO        13
Adrin    Promotion  8
Michael  Vice       21
Peter    CEO        3
Robert   Admin      15 
```

得到这个：

```
Peter........4
Robert.......15
Michael......21
Adrin........8 
```

我想从每个名字中获得最高的利润值。如果有多个相同的名称，则始终取最大值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T21:33:38.170

```
select name,max(profit) from table group by name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T23:38:53.930

由于这种类型的请求几乎总是跟在“现在我可以包含标题吗？”之后。- 这是一个为每个名称获得最高利润的查询，但可以包含所有其他列，而无需对这些其他列进行分组或应用任意聚合：

```
;WITH x AS 
(
  SELECT Name, Title, Profit, rn = ROW_NUMBER()
    OVER (PARTITION BY Name ORDER BY Profit DESC)
  FROM dbo.table
)
SELECT Name, Title, Profit
FROM x
WHERE rn = 1; 
```

# c# - 使用 Skype API 从呼叫 ID 获取聊天 ID

> ID：11595994
> 
> 赞同：2
> 
> 时间：2012-07-21T21:29:28.420
> 
> 标签：c#, .net, skype

我正在用 C# 为 Skype API 编写一个简单的会议主机。当程序收到通话结束的通知时，我希望它向与刚刚结束的通话相关联的群聊发送“/golive”命令。除了从通话中检索聊天 ID 之外，我可以做任何事情，反之亦然。

从 API 文档中可以看出，聊天和通话之间没有联系，但这没有任何意义，因为每次聊天只能进行一次通话，而 Skype 在聊天顶部为您提供了“加入通话”按钮，因此 Skype 必须在聊天和通话之间建立链接。任何想法如何获得这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T13:37:04.267

转到群聊资料，复制对话链接 - > 它看起来像 skype?chat&blob= 删除该部分然后 api 命令是 CHAT CREATEUSINGBLOB 之后你得到一个#thisisyourchatid 并且你只是聊天到那个地址（包括#）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-10T22:26:30.693

除了之前的答案，您还可以在群聊中使用“/get uri”或“/get blob”聊天命令来获取 blob。

# iphone - iCloud不支持有序集..替代解决方案？

> ID：11595996
> 
> 赞同：1
> 
> 时间：2012-07-21T21:29:57.030
> 
> 标签：iphone, objective-c, ios, icloud, nsset

iCloud 不支持关系的有序集合，只支持集合。现在，我创建了一个名为“entryIndex”的属性，它存储它自己的索引值。当用户删除特定索引处的对象时，我想识别对象并更改索引较高的对象的值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:20:02.960

假设您有连续的索引并希望保持它们“紧密”而没有间隙：

```
NSArray *filtered = [fetchedObjects filteredArrayUsingPredicate:
   [NSPredicate predicateWithFormat:@"entryIndex > %@", 
                                    deletedObject.entryIndex]];
for (NSManagedObject *obj in filtered) {
   obj.entryIndex = [NSNumber numberWithInt:[obj.entryIndex intValue]-1];
}
[self.managedObjectContext save:nil]; 
```