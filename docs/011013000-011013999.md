# StackOverflow 问答 11013000-11013999

# php - php 内容类型图片大小

> ID：11013004
> 
> 赞同：1
> 
> 时间：2012-06-13T10:31:15.007
> 
> 标签：php, image, content-type

我有这个代码来显示用户头像..

```
<?php
include("../core/config.php");

if(isset($_GET['uid'])){
if(is_numeric($_GET['uid'])){
    $uid = $_GET['uid'];
}
else{
    exit();
}

$sql="SELECT avatar FROM users_avatar WHERE user_id = '$uid'";  
$row= getRow($sql);
if(!$row){
    $url = "../usravatars/_default/usravatar_default_m.png";
}
else{
$avatar = $row['avatar'];
$url = "../usravatars/$uid/$avatar";
}   
header("Content-Type: image/jpg");
readfile($url);
}
?> 
```

是否可以为正在显示的图像设置自定义尺寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:02:18.433

以下是动态调整图像大小的示例函数。您可以使用自己的特定宽度/高度或从 get 变量中获取。

```
function CroppedThumbnail($imgSrc,$thumbnail_width,$thumbnail_height) { //$imgSrc is a FILE - Returns an image resource.
//getting the image dimensions  
list($width_orig, $height_orig) = getimagesize($imgSrc);   
$myImage = imagecreatefromjpeg($imgSrc);
$ratio_orig = $width_orig/$height_orig;

if ($thumbnail_width/$thumbnail_height > $ratio_orig) {
   $new_height = $thumbnail_width/$ratio_orig;
   $new_width = $thumbnail_width;
} else {
   $new_width = $thumbnail_height*$ratio_orig;
   $new_height = $thumbnail_height;
}

$x_mid = $new_width/2;  //horizontal middle
$y_mid = $new_height/2; //vertical middle

$process = imagecreatetruecolor(round($new_width), round($new_height)); 

imagecopyresampled($process, $myImage, 0, 0, 0, 0, $new_width, $new_height, $width_orig, $height_orig);
$thumb = imagecreatetruecolor($thumbnail_width, $thumbnail_height); 
imagecopyresampled($thumb, $process, 0, 0, ($x_mid-($thumbnail_width/2)), ($y_mid-($thumbnail_height/2)), $thumbnail_width, $thumbnail_height, $thumbnail_width, $thumbnail_height);

imagedestroy($process);
imagedestroy($myImage);
return $thumb;
}

//Create the thumbnail
$newThumb = CroppedThumbnail("DSC01088.jpg",$_GET['width'],$_GET['height']);

// And display the image...
header('Content-type: image/jpeg');
imagejpeg($newThumb); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:38:44.193

与`header("Content-Type: image/jpg"); readfile($url);`您一起将原始大小的完整图像发送到浏览器，仅此而已。

如果您想显示同一图像的调整大小版本，请尝试类似

```
echo '<img src="' . $url . '" width="desired-width" />'; 
```

如果您想调整原始图像的大小，请查看此页面上的第一个示例[http://php.net/manual/en/function.imagecopyresampled.php](http://php.net/manual/en/function.imagecopyresampled.php)

# c# - C# 拆分十六进制字符串

> ID：11013011
> 
> 赞同：0
> 
> 时间：2012-06-13T10:31:33.570
> 
> 标签：c#, arrays, split, hex, byte

好吧，我得到了我的 HexString（PacketS），例如“70340A0100000000000000”，我想每次在 2 个字符后拆分并将其放入字节数组（流）中。

表示 {70, 34, 0A, 01, 00, 00, 00, 00, 00, 00, 00}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:55:27.007

最短路径（.NET 4+）是（取决于长度或原点）：

```
byte[] myBytes = BigInteger.Parse("70340A0100000000000000", NumberStyles.HexNumber).ToByteArray();
Array.Reverse(myBytes);
myStram.write(myBytes, 0, myBytes.Length); 
```

对于以前的版本 string.length/2 还定义了一个字节数组的长度，该长度可以为每个解析的对填充。这个字节数组可以像上面那样写在流上。

对于这两种情况，如果您的原始字符串太长，并且您希望避免使用巨大的字节数组，请继续执行从您的原始字符串获取 N 个字符组的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:38:48.153

这实际上很完美！很抱歉，如果您的代码相同，但我只是不明白。

```
public static byte[] ConvertHexStringToByteArray(string hexString)
        {
            if (hexString.Length % 2 != 0)
            {
                throw new ArgumentException(String.Format(CultureInfo.InvariantCulture, "The binary key cannot have an odd number of digits: {0}", hexString));
            }

            byte[] HexAsBytes = new byte[hexString.Length / 2];
            for (int index = 0; index < HexAsBytes.Length; index++)
            {
                string byteValue = hexString.Substring(index * 2, 2);
                HexAsBytes[index] = byte.Parse(byteValue, NumberStyles.HexNumber, CultureInfo.InvariantCulture);
            }

            return HexAsBytes; 
```

# java - 绿屏照片合并

> ID：11013012
> 
> 赞同：-1
> 
> 时间：2012-06-13T10:31:33.797
> 
> 标签：java, android

我有两张照片，第一张是背景，第二张是绿屏的人的照片。我想使用 android 应用程序合并它们中的 2 个。所以我最终会得到一张具有我选择的背景的人的图像。

android sdk甚至可以做到这一点吗？如果是这样，你能告诉我怎么做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:34:45.230

是的，如果有人编写软件来做到这一点，这是可能的。Android SDK 中没有内置功能可以执行此操作。

# php - 使用正则表达式获取数据

> ID：11013015
> 
> 赞同：0
> 
> 时间：2012-06-13T10:31:42.907
> 
> 标签：php

我想获取此元标记内`<meta content="Rs.55.09" itemprop="price">`或元标记( ) 之后的内容，`<meta content="Rs.55.09" itemprop="price"> Rs.55.09`即需要产品的价格。是否有任何正则表达式来获取数据。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:38:12.470

这有效：

```
preg_match('/<meta content=\"(.*?)\" itemprop=\"price\">/i', $data, $matches); 
```

但是，我强烈建议您查看 DOMDocument 或其他 HTML 解析器，因为不建议使用正则表达式来解析这样的 HTML。

[在此处阅读有关 HTML 解析器的更多信息，](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)或在此处[阅读有关为什么不使用正则表达式的更多信息](https://stackoverflow.com/a/1732454/625231)。

# android - 清除位图数据并使其为空

> ID：11013018
> 
> 赞同：1
> 
> 时间：2012-06-13T10:32:05.543
> 
> 标签：android

我在一个 android 应用程序中工作，我想清除我的位图数据。场景是我正在对一个小部件（Imageview）进行屏幕截图，并将其存储在位图中。此操作来自按钮单击。所以过了一段时间我得到一个内存错误。所以我想清除位图中的值。为此，我完成了以下代码： BitMap 变量是 mCaptureImageBitmap

```
 public void ButtonClick(View v)
    {
               mCaptureImageBitmap.recycle();   
               mCaptureImageBitmap=null;                        
                View ve = findViewById(R.id.mainscreenGlViewRelativeLayout);
                ve.setDrawingCacheEnabled(true);
                mCaptureImageBitmap = ve.getDrawingCache();
    } 
```

但是我收到 NullPoint 异常的错误。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:37:14.510

您拥有大部分正确的代码，但顺序错误。尝试做这样的事情

```
public void ButtonClick(View v)
{
      Bitmap mCaptureImageBitmap;
      final View ve = findViewById(R.id.mainscreenGlViewRelativeLayout);
      ve.setDrawingCacheEnabled(true);
      mCaptureImageBitmap = ve.getDrawingCache();

      // Do something useful with your image here

      mCaptureImageBitmap.recycle();
      mCaptureImageBitmap = null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:48:17.997

试试这段代码...

```
ve.setDrawingCacheEnabled(true);  

// Add these lines 

ve.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),              MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED)); 
ve.layout(0, 0, ve.getMeasuredWidth(), ve.getMeasuredHeight());   
ve.buildDrawingCache(true); 

Bitmap b = Bitmap.createBitmap(ve.getDrawingCache()); 

mCaptureImageBitmap = b;

ve.setDrawingCacheEnabled(false); // clear drawing cache 
```

# c# - 在 NHibernate 中克隆实体？

> ID：11013019
> 
> 赞同：3
> 
> 时间：2012-06-13T10:32:08.740
> 
> 标签：c#, nhibernate

我想将一个对象保存到数据库中两次。我有这个代码：

```
using (var ss = NHibHelp.OpenSession())
using (var tt = ss.BeginTransaction())
{
    var entity = new Entity();

    ss.Save(entity);
    ss.Save(entity);

    tt.Commit();
} 
```

但这导致只有一行被添加到数据库中。如何将单个对象插入数据库两次（具有两个不同的 ID）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T10:55:04.260

你不应该这样做 - NHibernate 在它的会话中维护“对象身份”，所以它不会区分......好吧......同一个对象。我真的建议不要这样做，更好的解决方案是查看一种克隆对象的方法（通过反射或克隆方法），然后保存克隆的对象。

如果您想忽略我上面的建议，您可以通过从会话中驱逐实体，将其 id 设置回未保存的值（取决于您的映射，但可能为 0），然后再次保存它来使其工作。

如果您只是调用 session.Merge(entity) 两次，它也可能有效（您可能必须在第一次调用后将 id 重置为未保存的值）。

或者，您可以使用带有 session.Merge() 的无状态会话，然后您不必在 Save 之间驱逐实体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:56:23.817

你可以通过两种方式做到这一点：

1.  克隆实体，应该是深拷贝。

    ```
    using (var ss = NHibHelp.OpenSession())
    using (var tt = ss.BeginTransaction())
    {
      var entity = new Entity();
      var clonedEntity = entity.Clone();
      ss.Save(entity);
      ss.Save(clonedEntity);

      tt.Commit();
    } 
    ```

如果您的 ID 已分配，请记住创建一个新 ID。深拷贝对复杂实体有一些问题，如果你有反向集合，你需要重新引用它们。

2.在新会话中打开第二个事务并提交。

```
var entity = new Entity();
using (var ss = NHibHelp.OpenSession())
using (var tt = ss.BeginTransaction())
{      
     ss.Save(entity);

     tt.Commit();
}

using (var ss = NHibHelp.OpenSession())
using (var tt = ss.BeginTransaction())
{      
     ss.Save(entity);

     tt.Commit();
} 
```

# c# - 如何使用 xUnit、SubSpec 和 FakeItEasy 测试抛出的异常

> ID：11013025
> 
> 赞同：14
> 
> 时间：2012-06-13T10:32:29.677
> 
> 标签：c#, unit-testing, bdd, xunit, fakeiteasy

我正在使用 xUnit、SubSpec 和 FakeItEasy 进行单元测试。到目前为止，我已经创建了一些积极的单元测试，如下所示：

```
"Given a Options presenter"
    .Context(() =>
        presenter = new OptionsPresenter(view,
                                         A<IOptionsModel>.Ignored,
                                         service));

"with the Initialize method called to retrieve the option values"
    .Do(() => 
        presenter.Initialize());

"expect the view not to be null"
    .Observation(() =>
        Assert.NotNull(view));

"expect the view AutoSave property to be true"
    .Observation(() => Assert.True(view.AutoSave)); 
```

但是现在我想写一些负面的单元测试并检查某些方法没有被调用，并且抛出异常

例如

```
"Given a Options presenter"
    .Context(() =>
        presenter = new OptionsPresenter(view,
                                         A<IOptionsModel>.Ignored,
                                         service));

"with the Save method called to save the option values"
    .Do(() => 
        presenter.Save());

"expect an ValidationException to be thrown"
    .Observation(() =>
        // TODO 
     );

"expect an service.SaveOptions method not to be called"
    .Observation(() =>
        // TODO 
     ); 
```

我可以看到 FakeItEasy 有一个 MustNotHaveHappened 扩展方法，而 xUnit 有一个 Assert.Throws 方法。

但是我怎么把它们放在一起呢？

我要测试的异常应该在调用 Save 方法时发生。所以我猜我应该在 presenter.Save() 方法调用周围包装一个 Assert.Throws 方法，但我认为应该在 .Do(() => ...

您能否告知我的单元测试是否应该如下所示或其他内容？

```
"Given a Options presenter"
    .Context(() =>    
        presenter = new OptionsPresenter(view,
                                         model,
                                         service));

"expect the Presenter.Save call to throw an Exception"
    .Observation(() =>
        Assert.Throws<FluentValidation.ValidationException>(() => presenter.Save()));

"expect the Service.SaveOptions method not to be called"
    .Observation(() =>
        A.CallTo(() => service.SaveOptions(A<IOptionsModel>.Ignored)).MustNotHaveHappened()); 
```

非常感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T15:44:43.317

我没有听说过 FakeItEasy 或 SubSpec（你的测试看起来很时髦，所以我可能会检查一下 :)）。但是，我确实使用 xUnit，所以这可能会有所帮助：

我将 Record.Exception 与 Assert.ThrowsDelegate 一起使用

所以像：

```
 [Fact]
    public void Test()
    {
        // Arange

        // Act
        Exception ex = Record.Exception(new Assert.ThrowsDelegate(() => { service.DoStuff(); }));

        // Assert
        Assert.IsType(typeof(<whatever exception type you are looking for>), ex);
        Assert.Equal("<whatever message text you are looking for>", ex.Message);
    } 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-16T11:06:46.563

我会这样做：

```
"Given a Options presenter"
    .Context(() =>
        presenter = new OptionsPresenter(view,
                                         (IOptionsModel)null,
                                         service));

"with the Save method called to save the option values"
    .Do(() => 
        exception = Record.Exception(() => presenter.Save()));

"expect an ValidationException to be thrown"
    .Observation(() =>
        Assert.IsType<ValidationException>(exception)
     );

"expect an service.SaveOptions method not to be called"
    .Observation(() =>
        A.CallTo(() => service.SaveOptions(A<IOptionsModel>.Ignored)).MustNotHaveHappened()
     ); 
```

或者更好的是，为 xBehave.net 切换[SubSpec](http://nuget.org/packages/Xbehave)并引入[FluentAssertions](http://nuget.org/packages/FluentAssertions)：-

```
"Given an options presenter"
    .x(() => presenter = new OptionsPresenter(view, (IOptionsModel)null, service));

"When saving the options presenter"
    .x(() => exception = Record.Exception(() => presenter.Save()));

"Then a validation exception is thrown"
    .x(() => exception.Should().BeOfType<ValiationException>());

"And the options model must not be saved"
    .x(() => A.CallTo(() =>
        service.SaveOptions(A<IOptionsModel>.Ignored)).MustNotHaveHappened()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-01T02:39:24.690

这是在**FakeItEasy**中执行此操作的一种方法。

```
Action act = () => someObject.SomeMethod(someArgument);
act.ShouldThrow<Exception>(); 
```

# c - 无法使用 floorf 将数字四舍五入到小数点后两位

> ID：11013029
> 
> 赞同：0
> 
> 时间：2012-06-13T10:32:52.780
> 
> 标签：c, floating-point, decimal, rounding

我在这里找到了这个公式：

```
podrucje[i][j] = floorf(podrucje[i][j]  * 100 + 0.5)/100; 
```

`podrucje[][]`浮点矩阵在哪里。`floorf`返回正确的值 ( `desired * 100`) 但问题出在`/100`. 例如，如果我有`49.599998`，则`floorf`返回`4960.000`并在除以`100`结果后再次返回`49.599998`。

问题出在哪里？

我知道我可以在打印时对其进行舍入，但我将在 Excel 中使用此矩阵，将其转换为范围，因此我无法影响表示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:37:01.017

大多数十进制数不能完全表示为浮点数。

您可能需要将它们存储为整数，或者在转换为人类可见的东西时进行舍入（即打印出数字）。

如果您想使用该数字进行进一步计算并需要先对其进行四舍五入，请使用不同的表示形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:36:15.053

这是浮点运算表示的一个基本问题，它不是以 10 为底的！不过，您可以*打印*以 10 为底的四舍五入到小数点后 2 位。

跨边界安全导出数字的标准安全方法是通过纯文本 ascii 而不是二进制。

# java - 在哪些情况下 equals() 类似于 ==？

> ID：11013032
> 
> 赞同：1
> 
> 时间：2012-06-13T10:32:59.053
> 
> 标签：java

> **可能重复：**
> [等于和 == 之间的差异](https://stackoverflow.com/questions/971954/difference-between-equals-and)

在哪些情况下与操作员`equals()`完全一样`==`？

似乎他们俩的行为相似`primitive data types`。是否还有其他任何情况下两者行为相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:34:34.137

`==`比较`Object`类型的引用位，因此如果您引用相同的对象，情况就是如此

**例如**

`Integer`对于值 -128 和 127（含），它会缓存（在自动装箱时）实例，因此这里提到的值范围就是这种情况`Integer`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:36:02.273

对于原始数据类型，没有`equals()`（因为它们不是对象，也没有方法）。

默认实现（在 Object 类中）`equals()`只是进行对象身份检查（即与 相同`==`）。因此，如果一个类不覆盖它，它将具有与`==`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:35:42.953

运算符`==`将始终比较对象的引用和原始类型的实际值。

请注意，原始数组 like`int[]`仍然是一个对象！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T10:36:37.313

```
 String test1 ="test";
    String test2 = test1;
    System.out.println(test1 == test2);
    System.out.println(test1.equals(test2)); 
```

两者都会打印 -

真的

真的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T10:37:00.823

除了原语（这是一种特殊情况）之外`==`，`equals()`对于引用相等与实际相等的每种情况，其行为相似：

*   实习字符串
*   某些`Integer`引用（通常在 -128 和 +127 之间，但这是可配置的，并且取决于实例的构造方式）
*   单身人士
*   `Object`（以及任何其他不覆盖的类`equals()`）的实例

显然，当有疑问时，使用`equals()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T10:42:23.893

该方法对比较`equals()`进行评估。`hashCode`While`==`通过引用比较对象。

# iphone - 检查 NSMutableArray 是否包含来自文本字段的文本

> ID：11013036
> 
> 赞同：0
> 
> 时间：2012-06-13T10:33:20.723
> 
> 标签：iphone, xcode, tableview, textfield

我想检查文本字段中插入的文本是否也在我的 NSMutableArray 中。所以假设我的 NSMutableArray 有这些对象：“嘿，你好，不，是”。然后当用户输入文本时：“你好”我希望那里出现一个 UIAlertView。我现在有以下内容：

```
for (int slt = 0; slt < [zouten count]; slt++) {
        if (zout.text = [zouten objectAtIndex:slt]) {

            alert = [[UIAlertView alloc]initWithTitle:@"Goedzo!" message:[NSString stringWithFormat:@"Je hebt een zout gevonden"] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

        }
    }

    [alert show]; 
```

但不知何故，这个信息随着每一个字出现。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:42:30.683

当你像这样比较时：

```
if (zout.text = [zouten objectAtIndex:slt]) 
```

您实际上是在分配而不是比较，因此它始终为 TRUE。因此，您应该像这样比较而不是使用 =：

```
if ([zout.text isEqualToString:[zouten objectAtIndex:slt]]) 
```

您的代码应该是：

```
for (int slt = 0; slt < [zouten count]; slt++) {
        if ([zout.text isEqualToString:[zouten objectAtIndex:slt]]) {
            alert = [[UIAlertView alloc]initWithTitle:@"Goedzo!" message:[NSString stringWithFormat:@"Je hebt een zout gevonden"] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
           [alert show];
           [alert release];
            break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:36:08.070

您可以使用`isEqualToString`方法来比较字符串。

```
if([zout.text isEqualToString:[zouten objectAtIndex:slt]]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:39:19.500

或者，您可以通过转换为集合并检查条目来使代码更简洁，例如

```
NSSet *set = [NSSet setWithArray: zouten];
if([set containsObject:zout.text]) {
   ...
} 
```

# clang - LLVM 和 CLANG - 一般信息

> ID：11013039
> 
> 赞同：0
> 
> 时间：2012-06-13T10:33:39.030
> 
> 标签：clang, llvm-clang

我实际上需要 CLANG 工具。请让我知道我是否可以从 GCC 4.1.2 构建 CLANG，或者我需要 LLVM。如果是这样，GCC 4.1.2 会构建 LLVM 和 CLANG 吗？

我还需要一些源到源的翻译（C++ 代码美化 - 在两者之间插入新代码和注释）参考 - 如果可能，请提供一些参考示例？

我的观察是通过 svn / git 从他们的官方网站下载 LLVM / CLANG 非常耗时。仅下载 5% 的代码大约需要 1 小时。我需要部署什么 tar 文件才能克服这个问题？

提前致谢

```
svn: REPORT request failed on '/svn/llvm-project/!svn/vcc/default'
svn: REPORT of '/svn/llvm-project/!svn/vcc/default': Could not read response body: connection timed out. (http://llvm.org)

install_packages/LLVM 1004> git clone http://llvm.org                                                                             /git/llvm.git
Cloning into llvm...
remote: Counting objects: 655903, done.
remote: Compressing objects: 100% (123416/123416), done.
error: RPC failed; result=18, HTTP code = 200MiB | 2 KiB/s
fatal: The remote end hung up unexpectedly
fatal: early EOF
fatal: index-pack failed
warning: http unexpectedly said: '0000' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:56:19.523

我检查了完整的 LLVM 存储库，我花了不到 10 分钟的时间。

按照他们网站上的说明，您可以轻松构建 LLVM 和 CLANG。在我看来，使用 GCC 构建 LLVM 和 CLANG 源代码没有问题，因为我已经多次这样做了。LLVM 和 CLANG 使用现代 C++，而 GCC 很好地支持它。

GCC 是世界上使用最多的开源编译器，它支持的平台比任何其他编译器都梦寐以求。所以，当我看到 GCC 构建 LLVM 或 CLANG 时，我一点也不感到惊讶。

但我在我的系统上使用最新的 GCC 编译器。尝试使用 GCC 4.1.2（2007 年 2 月 13 日发布）构建 LLVM 和 CLANG。如果它不起作用，我对此表示怀疑，请尝试升级 GCC。

# ios - UITapGestureRecognizer 的状态

> ID：11013044
> 
> 赞同：2
> 
> 时间：2012-06-13T10:33:54.850
> 
> 标签：ios, ios5, uigesturerecognizer

`UIGestureRecognizer`参考资料说：“诸如**点击**或滑动之类的离散事件无法报告手势内的变化”

当手指刚刚触摸屏幕（并且还没有离开它）时，我怎样才能得到通知，然后在它离开屏幕时得到通知？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:50:31.127

您可以通过使用检测触摸

> 对象答案：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

> 斯威夫特 3.0 答案：

```
func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?)
func touchesEnded(_ touches: Set<UITouch>, with event: UIEvent?) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T12:41:14.237

那么你的答案在于你的问题标题，即 UIGestureRecognizerState。您需要在目标方法中检查gestureRecognizer 的状态。像：

```
- (void)handleTap:(UITapGestureRecognizer *)sender {
           if (sender.state == UIGestureRecognizerStateEnded)     {
                // handling code     
           } 
           else {
                //do anything else
           }

} 
```

这些是可能的枚举：

```
UIGestureRecognizerStatePossible,
UIGestureRecognizerStateBegan,
UIGestureRecognizerStateChanged,
UIGestureRecognizerStateEnded,
UIGestureRecognizerStateCancelled,
UIGestureRecognizerStateFailed, 
UIGestureRecognizerStateRecognized = UIGestureRecognizerStateEnded 
```

可能会有所帮助。

# linux - 为什么无法在我具有读/写组权限的目录中修改文件

> ID：11013046
> 
> 赞同：0
> 
> 时间：2012-06-13T10:34:10.957
> 
> 标签：linux, chown

我目前正在搞乱我的 linux 系统，现在我遇到了以下情况。

目录 /srv/http 具有以下权限集：

```
drwxrwxr-x 2 root httpdev  80 Jun 13 11:48 ./
drwxr-xr-x 6 root root    152 Mar 26 13:56 ../
-rwxrwxr-x 1 root httpdev   8 Jun 13 11:48 index.html* 
```

我之前使用以下命令创建了组 httpdev：

```
groupadd httpdev 
```

并添加了我的用户瞄准器：

```
gpasswd -a sighter httpdev 
```

然后我使用 chown 和 chmod 命令设置了上述权限。

但是现在我不允许修改 index.html 文件或创建一个新文件，作为用户瞄准器，触摸如下：

```
<sighter [bassment] ~http> touch hallo.php
touch: cannot touch `hallo.php': Permission denied 
```

我理解错了什么。我期待我可以在那里做我想做的事，然后该小组拥有所有权利。

以下输出供您参考。

```
<sighter [bassment] ~http> cat /etc/group | grep sighter
...
httpdev:x:1000:sighter
... 
```

使用的 linux-distro 是 archlinux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:39:46.643

将用户添加到组不会影响当前正在运行的会话。所以你必须注销并再次登录或使用`su - sighter`登录。

在此之后，您应该能够做您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:36:19.347

您不在正确的组中。您需要注销并重新登录。另外，超级用户。

# c# - 我试图通过 C# 调用动作结果方法

> ID：11013047
> 
> 赞同：2
> 
> 时间：2012-06-13T10:34:16.113
> 
> 标签：c#, asp.net-mvc

我有一个我想运行的操作结果方法。我如何通过 C# 代码调用它？

```
public ActionResult Edit(int? id, string error)
        {
           ....
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:49:26.593

试试这个，它应该工作：

```
return RedirectToAction("Edit", new { id = contractInstance.SalesContractId, error = ""}); 
```

要在新页面上打开操作，您需要将 html 属性和控制器名称添加到您的操作中：

```
@Html.ActionLink("Edit", "Edit", "TypeControllerName", new { id = contractInstance.SalesContractId, error = ""}, new {target = "_blank"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:36:33.420

如果您有一个与该控制器同名的页面，它应该在加载该页面时自动调用该操作。

因此，如果您有 Edit.cshtml，则应该调用该操作。

# post - Backbone.save POST 而不是 PUT

> ID：11013049
> 
> 赞同：6
> 
> 时间：2012-06-13T10:34:25.420
> 
> 标签：post, backbone.js, put

只是一个简短的问题：

拥有一个模型的新实例并发出一个`model.save()`URL 设置为 的`/api/store/category`，Backbone 发出一个 POST。据我所知，它应该使用 PUT，就像在这篇[“PUT 或 POST：故事的 REST”](http://jcalcote.wordpress.com/2008/10/16/put-or-post-the-rest-of-the-story/)博文中提到的那样。

谁是对的？BB还是这篇文章的作者？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T10:39:51.760

根据[Backbone 文档](http://backbonejs.org/#Model-save)，保存新模型将导致 POST 请求，保存现有模型（具有 id）将发出 PUT 请求。

> **save** *model.save([attributes], [options])*
> ...
> 如果模型是New，则保存将是“创建”（HTTP POST），如果模型已经存在于服务器上，则保存将是“更新” "（HTTP 放置）。

如果您想知道 Backbone*是否应该*使用 POST 进行创建，请检查

1.  [REST 中的 PUT 与 POST](https://stackoverflow.com/questions/630453/put-vs-post-in-rest)
2.  维基百科上的[RESTful Web 服务](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)

根据这些文章，我想说的是，在 Backbone 的上下文中，动词是正确使用的：

*   保存新模型导致系统发生变化，添加了新的URL，动作不是幂等的，应该是POST，
*   保存已知模型会替换给定 URL 处的资源，该操作是幂等的，它应该是 PUT。

# java - Android中的Loadind系统共享库运行时

> ID：11013052
> 
> 赞同：1
> 
> 时间：2012-06-13T10:34:34.333
> 
> 标签：java, android

我需要编写一个应用程序，它将使用共享库。我需要将该应用程序安装在 Android 1.6 及更高版本的设备上。我在清单文件中添加了共享库信息，如下所示：

```
<uses-library android:name="com.google.android.maps" android:required="false" /> 
```

现在，**android:required**字段是从上面的 Android 2.1 添加的，Android 1.6 将忽略此标记，因此应用程序将无法安装并显示“INSTALL_FAILED_MISSING_SHARED_LIBRARY”。

我的问题是，有什么方法可以不需要在清单中定义共享库信息，而是可以动态加载系统库（在我的情况下为“com.google.android.maps”）并使用反射来访问库的类和方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:01:05.483

我解决了这个问题。不需要在清单文件中提及使用库。该库可以动态加载，我们可以从中加载类和方法。

上面提到的使用 System.loadlibray 加载库的解决方案不起作用。相反，我使用这种方法来实现它：

```
new DexClassLoader("/system/framework/google_sample.jar", "/tmp", null, myService.me.getClassLoader()); 
```

在此之后，应用程序可以加载该类并调用该方法。

谢谢您的帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:07:04.187

我搜索了一下，我找到了这段代码，

```
 static {
try {
    System.loadLibrary("DsmShared");
    System.loadLibrary("DsmTestLib");
}
catch( UnsatisfiedLinkError e ) {
     System.err.println("Native code library failed to load.\n" + e);
 }
} 
```

另外，您的系统共享库是用 C++ 编写的吗？

# xpages - 将内容动态视图复制到字符串

> ID：11013054
> 
> 赞同：0
> 
> 时间：2012-06-13T10:34:38.800
> 
> 标签：xpages

好吧，我有一个动态视图：使用搜索范围变量，我在视图中选择文档并更新视图所在的面板。到目前为止，一切都很好。但就像我之前的帖子（[将内容视图复制到 2 个字符串](https://stackoverflow.com/questions/10895761/copy-contents-view-to-2-strings)）一样，我想将列的视图数据复制到字符串。

当您想从完整视图复制数据时，西蒙给我的解决方案有效，

```
<xp:this.data>
   <xp:dominoView var="view2"
    viewName="<<viewName>>">
</xp:dominoView>
</xp:this.data>

<xp:inputText>
<xp:this.value><![CDATA[#{javascript:
 var length = view2.getEntryCount();
 var entries = view2.getAllEntries();
 var i = 0;
 var currentEntry = entries.getFirstEntry();
 var list = "";

 while(i < length)
 {
    list += currentEntry.getColumnValues().elementAt(1);

    currentEntry = entries.getNextEntry();
    i++;
 }

 return list;
}]]></xp:this.value>
</xp:inputText> 
```

但不会复制我的动态视图数据的数据。（我将它绑定到一个按钮，我在刷新视图后单击该按钮）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:04:17.267

行： var entries = view2.getAllEntries(); 需要更改以反映搜索范围变量而不是整个视图。

# jquery - 使用大 JSON 字符串填充 Kendo UI 组合框

> ID：11013057
> 
> 赞同：1
> 
> 时间：2012-06-13T10:34:46.987
> 
> 标签：jquery, json, asp.net-mvc-3, combobox, kendo-ui

我有一个 MVC3 ASP.NET 项目，我在其中使用 jQuery 和 KendoUI 作为视图。我已经定义了组合框，它是一个数据源，并且我从控制器获取结果，数据源中的 JSON 字符串格式正确。

作为 JSON 字符串返回的数据约为 500kb，组合框没有显示任何内容。它只是在右侧显示加载图标。我认为这里的大量数据确实是一个问题......

任何人都可以帮忙吗？

贝娄是我的代码片段：

`<input id="kendoCboClienti" />`

```
<script type="text/javascript">
    $(document).ready(function () {
        clientiDS = new kendo.data.DataSource({
            transport: {
                read: {
                    url: "/Clienti/",
                    dataType: "json"
                }
            },
            schema: {
                model: {
                    fields: {
                        id: { type: "string" },
                        ragioneSociale: { type: "string" }
                    }
                }
            }
        });

        $("#kendoCboClienti").kendoComboBox({
            placeholder: "Sceglie il cliente",
            dataTextField: "RAGIONE_SOCIALE",
            dataValueField: "ID",
            dataSource: clientiDS
        });
    });
</script> 
```

JSON 字符串与此类似：

```
[  
    {ID:429,RAGIONE_SOCIALE:"AUTOTRASP.PORETTO G."},
    {ID:430,RAGIONE_SOCIALE:"P.G. JOHNNY IMPORT EXPORT"},
    {ID:431,RAGIONE_SOCIALE:"CONFARTIGIANATO TREVISO"},
    .....    
] 
```

在 jsFiddle 中可以工作，但它非常慢、无响应，并且浏览器有时会因大量数据而崩溃。

谢谢！

**编辑 1：**我已经修改了发送到数据源的数据量（只有 10 条记录），但仍然无法正常工作。也许是数据源的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:29:02.837

数据源的网址是否正确？如果您使用的是 mvc，则 url 应该是 /controller/view/。IE：`url: "/Home/Clienti/"`

- 编辑 -

这是一个完整的示例，项目 URL：'http://localhost:52794/Home/ComboBox'

控制器：首页

视图：组合框

组合框视图代码：

```
<input id="kendoCboClient" />

<script type="text/javascript">
    $(document).ready(function () {
        clientDS = new kendo.data.DataSource({
            transport: {
                read: {
                    url: "/Home/JsonData/",  //Note the URL path!
                    dataType: "json"
                }
            },
            schema: {
                model: {
                    fields: {
                        EmployeeId: { type: "number" },
                        name: { type: "string" }
                    }
                }
            }
        });

        $("#kendoCboClient").kendoComboBox({
            placeholder: "Select a name...",
            dataTextField: "Name",
            dataValueField: "EmployeeId",
            dataSource: clientDS
        });
    });
</script> 
```

型号类：

```
public class Employee
{
    public int EmployeeId { get; set; }
    public string Name { get; set; }
} 
```

控制器：

```
public ActionResult ComboBox()
{
    return View();
}

public JsonResult JsonData()
{
    List<Employee> list = new List<Employee>();
    Employee employee = new Employee() { EmployeeId = 1, Name = "John Smith" };
    list.Add(employee);
    employee = new Employee() { EmployeeId = 2, Name = "Ted Teller" };
    list.Add(employee);
    return Json(list, JsonRequestBehavior.AllowGet);
} 
```

- 编辑 -

返回json的另一种方式：

```
public ActionResult JsonData()
{
    List<Employee> list = new List<Employee>();
    Employee employee = new Employee() { EmployeeId = 1, Name = "John Smith" };
    list.Add(employee);
    employee = new Employee() { EmployeeId = 2, Name = "Ted Teller" };
    list.Add(employee);

    JavaScriptSerializer serializer = new JavaScriptSerializer();
    var output = serializer.Serialize(list);

    return Content(output); 
} 
```

- 编辑 -

最后一个简单的 json 字符串示例：

```
public ActionResult JsonData()
{
    String employeesJson = "[{\"EmployeeId\":1,\"Name\":\"John Smith\"},{\"EmployeeId\":2,\"Name\":\"Ted Teller\"}]";
    return Content(employeesJson);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:52:01.397

是的，问题出在我从控制器发送的 JSON 格式上。我正在使用第 3 方 Web 服务（基于[ServiceStack](http://servicestack.net/)）。在控制器中，我正在“读取”字符串（这是一个 JSON 字符串）中的 Web 响应，并将其进一步传递。问题是返回的 JSON 字符串介于“”之间，并且数据源无法处理它。

因此，我的解决方案基于您上面的示例：我创建了一个模型、一个集合并返回了该集合。

结果：一切都很完美。返回的 JSON 不再介于 " " 之间，并且 dataSource 对象已正确初始化。

这是代码：

**ClientiController.cs**

```
public class ClientiController : Controller
{            
        public JsonResult Index()
        {
            StreamReader sr = null;
            string json = string.Empty;

            try
            {
                WebRequest request = WebRequest.Create("urlGoesHere");

                using (WebResponse response = request.GetResponse())
                {
                    sr = new StreamReader(response.GetResponseStream(), true);
                    json = sr.ReadToEnd();
                }
            }
            catch { return Json("", JsonRequestBehavior.AllowGet); }

            JavaScriptSerializer serializer = new JavaScriptSerializer();
            ClientiCollection collection = serializer.Deserialize<ClientiCollection>(json);

            return Json(collection, JsonRequestBehavior.AllowGet);
        }

} 
```

**客户端.cs**

```
public class Client
{
        public string ID { get; set; }
        public string RAGIONE_SOCIALE { get; set; }
} 
```

**ClientiCollection.cs**

```
public class ClientiCollection
{
        public IEnumerable<Client> ClientiList { get; set; }
} 
```

**HTML**

```
<input id="kendoCboClienti" />

<script type="text/javascript">
    $(document).ready(function () {
        var clientiDataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: "/Clienti/",
                    dataType: "json"
                }
            },
            schema: {
                data: "ClientiList"
            }
        });

        $("#kendoCboClienti").kendoComboBox({
            dataTextField: "RAGIONE_SOCIALE",
            dataValueField: "ID",
            dataSource: clientiDataSource,
        });
    });
</script> 
```

但是，我要显示约 8000 条记录，并且组合框有点慢（打开时约 1.5 秒）。我不确定是否可以在不以任何方式修改服务器的情况下以某种方式改善它的响应。

PS非常感谢，Igorrious！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T17:44:08.627

如果你想提高响应时间，你可以试试这个...

```
$(document).ready(function () {
    var clientiDataSource = new kendo.data.DataSource({
        pageSize: 20,
        transport: {
            read: {
                url: "/Clienti/",
                dataType: "json"
            }
        },
        schema: {
            data: "ClientiList"
        }
    });

    $("#kendoCboClienti").kendoComboBox({
        dataTextField: "RAGIONE_SOCIALE",
        dataValueField: "ID",
        dataSource: clientiDataSource,
    });
}); 
```

只需将分页添加到您的数据源。我有超过 20000 行的组合，效果非常好。

# google-chrome - chrome 扩展在 Fedora 中挂起

> ID：11013058
> 
> 赞同：0
> 
> 时间：2012-06-13T10:34:48.220
> 
> 标签：google-chrome, google-chrome-extension, fedora

我做了一个**chrome 扩展**。它与除了**fedora之外的其他****操作系统**一起运行良好。 扩展有一个弹出窗口来选择选项，我观察到我曾经使用**alert()**在**popup.html**文件中显示一些消息（扩展的 default_popup）；浏览器和**fedora 挂起**。最终我必须重新启动系统。可能是由于其他原因而挂起，但它在许多其他**操作系统**中运行良好（我在 ubuntu、windows xp 和 7 中尝试过）。尽管在 Fedora 16（带有 chrome 21）中，当我按下**esc**时它会停止挂起，但为什么它会挂起？ ************请建议我任何解决方案。提前谢谢！************

# asp.net-mvc-3 - 使用自定义错误控制器和 HandleErrorAttribute 的两步 MVC 3 错误处理

> ID：11013061
> 
> 赞同：0
> 
> 时间：2012-06-13T10:34:59.803
> 
> 标签：asp.net-mvc-3, custom-errors, onexception

我在自定义错误部分中使用了 HandleErrorAttribute 和自定义错误控制器的组合来处理 MVC3 应用程序中的错误。逻辑是通过 HandleErrorAttribute 中的 OnException 处理程序处理任何 Ajax 请求错误，并通过 ErrorController 处理其余错误。下面是代码 -

```
// Handle any ajax error via HandleErrorAttribute 
public class HandleAjaxErrorAttribute : System.Web.Mvc.HandleErrorAttribute
 {
    public override void OnException(System.Web.Mvc.ExceptionContext filterContext)
    {

        filterContext.HttpContext.Response.StatusCode = (int)System.Net.HttpStatusCode.InternalServerError;
        var exception = filterContext.Exception;

        if (filterContext.HttpContext.Request.IsAjaxRequest())
        {
            //some logic
            filterContext.ExceptionHandled = true;
        }

    }
}

//Handle remaining errors in the Error Controller

public class ErrorController : Controller
{

    protected override void HandleUnknownAction(string actionName)
    {
        var exception = Server.GetLastError(); //Can't get the exception object here.
        //some logic
    }

} 
```

Web.config 设置：

```
<customErrors mode="On" defaultRedirect="~/Error">
</customErrors> 
```

当任何非 ajax 异常发生时，控制从 OnException 块流向错误控制器中的 HandleUnknownAction。但是我无法获取 Exception 对象。如何在错误控制器中获取异常对象？

另外，您认为这两个步骤的方法是处理 MVC3 中的错误的正确方法吗？我曾想过使用 Application_Error 事件处理程序在集中位置处理错误，但根据我的研究，这不是 MVC 应用程序的推荐方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:29:20.197

我可能错了，但我相信您不必担心控制器中的错误信息，因为 MVC 会自动将其连接到视图中。因此，如果您像这样制作 (Razor) 视图，它应该可以工作：

```
@model System.Web.Mvc.HandleErrorInfo 
```

任何日志记录都可以在您的属性中完成，但如果您需要在错误控制器中执行此操作，请在您的错误控制器上创建一个 LogError 操作，该操作采用 HandleErrorInfo 参数并将其命名为：

@Html.RenderAction("LogError", 模型)

PS我还没有测试过，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T15:02:52.607

我的错误消息没有显示，并且 ErrorController 没有启动，直到我做了以下设置

```
<customErrors mode="On" defaultRedirect="~/Error">
</customErrors> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:14:35.187

关于我上面的评论，我在这里粘贴我的代码以澄清我做了什么。

此代码位于 BaseController 中（强烈建议制作一个，请参阅本文：[http ://weblogs.asp.net/rashid/archive/2009/04/01/asp-net-mvc-best-practices-part-1 .aspx](http://weblogs.asp.net/rashid/archive/2009/04/01/asp-net-mvc-best-practices-part-1.aspx) )

并且我已经覆盖了 OnException 方法（我的主要目标是区分 Ajax 调用和常规调用）：

```
protected override void OnException(ExceptionContext filterContext)
    {
        // Set to true or else it'll still propagate
        filterContext.ExceptionHandled = true;

        string message;

        // Check if it's an Ajax request
        if (filterContext.HttpContext.Request.IsAjaxRequest())
        {
            // Here I check if the custom error is on, if it isn't I'll paste the
            // stacktrace and the error
            if (!filterContext.HttpContext.IsCustomErrorEnabled)
            {
                message = filterContext.Exception.Message + filterContext.Exception.StackTrace;
            }
            else
            {
                message = "Something went wrong";
            }

            // TODO: Decide what to do if ajax
            filterContext.HttpContext.Response.StatusCode = 401;
            var json = new JsonResult {Data = message};
            json.ExecuteResult(this.ControllerContext);
        }
        else
        {
            // This is basically the same conditional, but instead of sending a JSON
            // I'll redirect to a view and give it the exception
            if (!filterContext.HttpContext.IsCustomErrorEnabled)
            {
                ViewData.Model = filterContext.Exception;
                this.View("Error").ExecuteResult(this.ControllerContext);
            }
            else
            {
               this.View("../Error/ServerError").ExecuteResult(this.ControllerContext);
            }

        }
    }
} 
```

关于我上面的评论需要注意的重要一点是，我并不是说不要使用 CustomError，而是仅在确实发生在管道之外的错误（例如 401）时才考虑它。

# ssrs-2008 - 验证参数 ssrs 中的值

> ID：11013067
> 
> 赞同：1
> 
> 时间：2012-06-13T10:35:10.713
> 
> 标签：ssrs-2008, reporting-services

我有一份报告，要求用户输入一个数字。（参数@number1 int）。

如何验证用户输入的内容？

例如。该数字应为 >0 且 <99。

我可以使用一些验证吗？或者对“可用值”中的表达式有什么可做的？

谢谢你和我一起思考！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:22:27.997

没有直接可用的验证。最常见的方法是使用存储过程来验证输入。您还可以使用具有条件可见性的文本框向用户显示值不正确的消息，并使用相同的逻辑将条件可见性放在其他报表项上，以便在用户输入不正确时隐藏它们。

# github - 从另一台机器推送到 github？

> ID：11013070
> 
> 赞同：0
> 
> 时间：2012-06-13T10:35:14.333
> 
> 标签：github

我创建了一个 github 帐户，并在其中创建了一个包含示例项目的存储库。我已经在机器 A 上签出了（克隆）这个项目，我还使用 eclipse（密钥管理）生成了公钥/私钥并将公钥上传到我的 github 帐户。我可以将我在机器 A 上的更改推送到 github repo 就好了。

我现在已经在另一台机器 B 上克隆了存储库（我还在那里生成了公钥/私钥），并在我的机器 B 的 github 帐户上添加了公钥。但是当我将我的更改从机器 B 推送到 github 存储库时，我得到了一个错误，无法推送。

我已经看到“合作者”可以获得对 repo 的读/写访问权限，但这需要我创建一个新帐户，这似乎有点矫枉过正

如何从机器 B 推送到 github 存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:40:48.797

> 当您还没有本地存储库时，要获取另一个用户存储库的完整副本，您 > 将使用 git clone URL。
> 
> 对于公共存储库，URL 可以是只读 URL，如 git://github.com/user/repo.git 或 >HTTP 只读 URL，如[http://github.com/user/repo.git](http://github.com/user/repo.git)。对于您拥有或作为合作者的公共存储库以及所有私有存储库，您必须使用 >private ssh url，例如 git@github.com:user/repo.git。

这是来自 github 的帮助文件的摘录。

编辑：

目前，GitHub 开发了一个用于远程同步 repos 的应用程序。[您可以在http://windows.github.com](http://windows.github.com)上下载它

# entity-framework - EF 4.1 Code First 过滤延迟加载的集合

> ID：11013072
> 
> 赞同：0
> 
> 时间：2012-06-13T10:35:16.363
> 
> 标签：entity-framework, entity-framework-4, filter, ef-code-first, lazy-loading

我有支持软删除的 EF Code First 解决方案，因此我们将实体标记为 IsDeleted，而不是将它们从数据库中删除。我想调整相关对象的集合（延迟加载），以便标记为已删除的实体不会返回给 API 用户。

这是我使用的简单方法：

```
public class FilteredCollection<T> : ICollection<T> where T : DeletableEntity
{
    private List<T> _listWithDeleted = new List<T>();

    protected IEnumerable<T> FilteredItems
    {
        get { return _listWithDeleted.Where(e => e.IsDeleted == false); }
    }

    protected bool _IsReadOnly;

    public virtual T this[int index]
    {
        get
        {                
            return FilteredItems.ToList()[index];
        }
        set
        {
            FilteredItems.ToList()[index] = value;
        }
    }

    public virtual int Count
    {
        get
        {
            return FilteredItems.Count();
        }
    }

    public virtual bool IsReadOnly
    {
        get
        {
            return _IsReadOnly;
        }
    }

    public virtual void Add(T entityObject)
    {
        _listWithDeleted.Add(entityObject);
    }

    public virtual bool Remove(T entityObject)
    {
        if (FilteredItems.Contains(entityObject))
        {
            entityObject.IsDeleted = true;
            return true;
        }
        else
        {
            return false;    
        }
    }

    public bool Contains(T entityObject)
    {
        return FilteredItems.Contains(entityObject);
    }

    public virtual void CopyTo(T[] entityObjectArray, int index)
    {
        var list = FilteredItems.ToList();
        list.CopyTo(entityObjectArray, index);
    }

    public virtual void Clear()
    {
        foreach (var item in _listWithDeleted)
        {
            item.IsDeleted = true;
        }
    }

    public virtual IEnumerator<T> GetEnumerator()
    {
        return FilteredItems.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return FilteredItems.GetEnumerator();
    }
} 
```

我已经实现了 ICollection，所以它在内部过滤对象。我使用此类而不是 ICollection，因此将过滤的实体返回给我。我做了一些测试，看起来效果很好，但我对这个解决方案感到不舒服。

您能否向我提供这种方法的缺点，或者如果您知道更好的方法，请提出建议。

预先感谢，

-石油

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:46:55.673

这是错误的解决方案，因为它会在您的应用程序中进行过滤。如果您的数据库会增长并且会有越来越多的软删除项目，您将始终需要在应用过滤器之前加载所有这些项目。这很快就会成为非常大的性能问题。

您应该在数据库中进行过滤，但这不利于延迟加载和急切加载。解决方案可以是条件映射（只会映射未删除的项目），但它不允许您映射`IsDeleted`属性 - 您必须使用存储过程软删除您的实体，而这反过来又不能先用代码映射。

通过 EF 代码优先 + 软删除的组合，您应该完全避免延迟加载和急切加载，并且使用单独的查询来获取过滤数据或使用显式加载。

# javascript - 元素原型作为字符串

> ID：11013078
> 
> 赞同：0
> 
> 时间：2012-06-13T10:35:34.747
> 
> 标签：javascript

如果可以创建`Element.prototype`一个字符串？

*例如 ：*

**代替 ：**

```
Element.prototype.height = function() { return this.offsetHeight; }; 
```

**写这样的东西：**

```
Element.prototype.height = Element.offsetHeight; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:43:33.133

你可以尝试这样的事情：

```
Element.prototype = {
        get height( ):{   return this.offsetHeight;   }
        constructor : Element
}; 
```

*用法：*

```
new Element().height    //without parenthesis 
```

有关更多信息，请参阅[对象获取器/设置器](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Working_with_Objects#Defining_getters_and_setters)。

# sql - sql“分组依据”和“拥有”

> ID：11013090
> 
> 赞同：2
> 
> 时间：2012-06-13T10:36:26.410
> 
> 标签：sql, sql-server

我正在尝试解决一些问题，但我不确定如何执行以下操作

> **问：**找出两台或多台 PC 中相同的硬盘大小。

[它在这个网站](http://www.sql-ex.ru/learn_exercises.php#answer_ref)上的 q15 。

数据库方案由四个表组成：

```
Product(maker, model, type)
PC(code, model, speed, ram, hd, cd, price)
Laptop(code, model, speed, ram, hd, screen, price)
Printer(code, model, color, type, price) 
```

任何指针将不胜感激。

**编辑：**这是 pc 表中所有硬盘驱动器的列表以及正确答案应该是什么。

![在此处输入图像描述](../Images/0af935e16cc5e386f0b919d0edceb663.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T10:42:09.503

这个怎么样 ？

```
Select PC.hd From PC
group by PC.hd
Having Count(PC.hd) >= 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:41:22.947

```
SELECT DISTINCT p1.hd
  FROM PC p1
  JOIN PC p2
    ON p1.code <> p2.code
 WHERE p1.hd = p2.hd 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:40:08.327

假设：pc.code 是主键。

```
SELECT DISTINCT a.hd
  FROM pc a
 WHERE EXISTS
       (SELECT *
          FROM pc b
         WHERE a.hd = b.hd
           AND a.code != b.code) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T10:41:19.637

试试这个

`select hd from pc group by hd having count(hd)>1`

我注册并尝试了这个，它说对了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-18T13:50:00.957

```
SELECT hd FROM PC GROUP BY hd HAVING COUNT(hd)>1 
```

对。

您的查询结果：

```
hd
5.0
8.0
10.0
14.0
20.0 
```

# php - 我们应该如何在 codeigniter 中使用广播组

> ID：11013094
> 
> 赞同：0
> 
> 时间：2012-06-13T10:36:40.597
> 
> 标签：php, codeigniter, radio-button

我正在为我的一个 PHP 项目使用 codeigniter 框架。

在表单中，我想使用单选按钮来表示性别。

性别*男*女

男性的值为 1 或，女性的值为 2。

选择后单选按钮值应分配给性别。

谁能告诉我如何在 codigniter 中实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:46:24.910

尝试这样的事情

```
<tr><td><?php echo form_radio('gender', '1', TRUE); ?></td><td><?php echo form_label('Male', 'gender');?></td></tr>
<tr><td><?php echo form_radio('gender', '2', FALSE); ?></td><td><?php echo form_label('Female', 'gender');?></td></tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:38:44.557

您可以使用 html 标签在 codeigniter 中创建任何输入

```
 <input type="radio" name="gender" value=1 />Male
 <input type="radio" name="gender" value=2 />Female 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-03T12:36:44.147

**在视图文件中：**

```
<input type="radio" name="gender" value=1 />Male
<input type="radio" name="gender" value=2 />Female 
```

**在控制器中，它看起来像我在下面展示给你的**

```
$user_type=$this->input->post('radio'); 
```

# python - 在 Linux 中使用 GUI 为 unittest 创建应用程序测试服务器的建议

> ID：11013098
> 
> 赞同：1
> 
> 时间：2012-06-13T10:36:55.413
> 
> 标签：python, unit-testing, user-interface

您对此有何建议

我一直在使用 unittest 使用 LDTP 测试我的 Linux 应用程序，所以现在我想为用户提供一个基于 Web 的 GUI：

1.  选择测试
2.  运行测试
3.  查看测试状态

我对python很陌生，非常感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:10:31.783

如果你想做一个 Web 服务，你需要一个用于基于服务器的代码的 Web 框架。

[Flask](http://flask.pocoo.org/)是一个非常方便的 Python 微框架。感谢 Werkzeug，它允许您快速轻松地开发 Web 服务，支持 RESTful 路由，内部有强大的调试器。并且感谢 Jinja2，它支持您的网页模板。

现在，对于 UI 部分，您可以查看常用的 Web 工具包，例如 HTML/CSS + Javascript（可能是 JQuery）

# c# - 在 C# 中记录到 HDF5 文件的示例代码？

> ID：11013106
> 
> 赞同：3
> 
> 时间：2012-06-13T10:37:28.350
> 
> 标签：c#, hdf5

我一直在研究 HDF5 的 C# 包装器，它严重缺乏像样的 C# 示例。有没有人有任何简单的示例代码用于将科学数据记录到文件中？

我想写一个带有一些字符串、整数和浮点值的时间戳。

代码应该**创建**文件，初始化数据集，然后**写入**一些数据。

IE：

20120101 23:12:54.1234 ABC 1111 123.4 567.8 987.6 654.3

...

...

...

我正在研究 HDF5，因为我需要高速并且想要存储大量数据。我不想直接写入数据库。这个想法是，这可以在以后解析，然后在必要时写入数据库。

# php - 通过 HTML/PHP 动态创建表单

> ID：11013107
> 
> 赞同：1
> 
> 时间：2012-06-13T10:37:30.840
> 
> 标签：php, mysql, html

希望有人可以在这里帮助我。我正在制作一个网站，而且我对 HTML 和 PHP 还是很陌生。JavaScript 对我来说是全新的。

我必须允许管理员在我正在制作的网站上动态创建表单。管理员希望能够单击一个按钮，该按钮会将他们带到一个新页面，他们可以在其中命名他们想要出现在表单中的字段，然后保存此表单，然后他们可以填写并保存到数据库等等。他们希望在登录网站时能够做到这一点，所以基本上就像拥有管理员权限但不是通过代码做到这一点，它必须在网站上完成。

我想知道这可能吗？在动态创建数据库中的字段然后将信息也插入数据库中的这些字段时，我真的不明白它是如何工作的。我也不知道如何创建查询来存储信息。

如果有人可以提供帮助，我将非常感激，我真的不知道从哪里开始尝试和实现这个功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:27:10.787

是的，当然可以。

将 HTML 存储在数据库中并不是一个好主意。您可以保存动态数据（例如输入类型、类等），然后在请求时使用简单的 php 脚本将它们输出到页面中。例如：

```
echo '<input type="'.$type.'">'; //$type is data read from db. 
```

据我所知，形成您的评论，您不知道您必须在 db 中为每个用户编写多少注释，因此您需要将其作为数组获取。为此，您可以将输入命名为：`name[]`. 例如，您可以在表单中包含以下 HTML：

```
<input name="fieldName[]" value="myField">
<input name="fieldName[]" value="anotherField"> 
```

当你使用它时，`$_POST`你会得到数组：

```
[fieldName] => array(2)
               {
                    [0] => "myField",
                    [1] => "anotherField"
               } 
```

所以你如果你这样做：

```
foreach ($_POST['fieldName'] as $field)
     echo $field; 
```

输出将如您所见，它是一个接一个执行的，因此您可以使用关键字`myFieldanotherField`将它们存储在 db 中。[这是使用 PDO 保存的方法](http://www.phpeveryday.com/articles/PDO-Insert-and-Update-Statement-Use-Prepared-Statement-P552.html)，[这里是有关 PDO 的更多信息](http://tw.php.net/manual/en/book.pdo.php)[`INSERT`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:31:10.830

从 PHP 端动态创建整个网站没有限制 最好的例子是代码下面的**CMS**我只是想帮助他如何从 PHP 端创建它的逻辑

> admin_rights.php

```
<!--<script src="http://code.jquery.com/jquery-1.7.2.js"></script>-->
<script>
function dynamic_field(type,div_no){
    if(type == 'text'){
        document.getElementById('dynamic_field_'+div_no).innerHTML='TextField Name : <input type = "text" name="txt_field"> -> your text field has been generated just define name';    
    }else if (type == 'textarea'){
        document.getElementById('dynamic_field_'+div_no).innerHTML='TextArea Name : <input type = "text" name="text_area"> -> your text area has been generated just define name';  
    }else if (type == 'table_name'){
        document.getElementById('dynamic_field_'+div_no).innerHTML='Table Name : <input type = "text" name="table_name"> -> your table has been generated just define name';    
    }
}

</script>
Admin Rights <br />
<form action="action.php" method="post">
<input type="button" value="TextField" onclick="dynamic_field('text',1)" />
<input type="button" value="TextArea" onclick="dynamic_field('textarea',2)" />
<input type="button" value="Table Name" onclick="dynamic_field('table_name',3)" />

<br />

<?php 
for($i = 1; $i<=10; $i++){
?>
    <div id="dynamic_field_<?php echo $i;?>"></div>
<?php 
}
?>
<input  type="submit" value="submit" />
</form> 
```

> 动作.php

```
<pre>
<?php

$con = mysql_connect("localhost","root","");
if (!$con){
die('Could not connect: ' . mysql_error());
}

mysql_select_db("dynamic_form", $con);

mysql_query("
CREATE TABLE 
`dynamic_form`.`".$_REQUEST['table_name']."`
( `id` INT(11) NOT NULL AUTO_INCREMENT , `".$_REQUEST['txt_field']."` VARCHAR(225) , `".$_REQUEST['text_area']."` TEXT , PRIMARY KEY (`id`))  ;")
?>

Congrulation you have successfully generated <?php echo $_REQUEST['table_name'];?> table 
```

# c# - 从应用程序访问 SharePoint Intranet 页面

> ID：11013108
> 
> 赞同：1
> 
> 时间：2012-06-13T10:37:40.043
> 
> 标签：c#, .net, sharepoint, html-agility-pack, intranet

我正在尝试从驻留在 Intranet 上的页面中获取数据。Intranet 基于 SharePoint。地址如下所示：[http](http://collab.intranet.com/Pages/Default.aspx) ://collab.intranet.com/Pages/Default.aspx 。

我正在使用 HTML Agility Pack (.NET) 来获取数据，我已经在外部网页上而不是 Intranet 上工作。我可以通过浏览器访问 Intranet 页面。

**编辑：所以问题是：**您如何授予对需要访问 SharePoint Intranet 页面的程序的访问权限？

我用来检索数据的代码（C#）：

```
String webpage = "http://collab.intranet.com/Pages/Default.aspx";
String mainTarget = "table";
String mainAttribute = "id";
String mainId = "activeProjects";

var webGet = new HtmlWeb();
var document = webGet.Load(webpage);

var partOfWebpage = from completeWebpage in document.DocumentNode.Descendants(mainTarget)
                            where
                                 completeWebpage.Attributes[mainAttribute] != null &&
                                 completeWebpage.Attributes[mainAttribute].Value == mainId &&
                                 completeWebpage.Attributes[mainAttribute].Value != null
                            select completeWebpage.InnerHtml; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:44:09.760

没关系，经过一番挖掘和反复试验，我找到了解决方案。由于 Intranet 基于 SharePoint，因此可以使用**WebService 库**并调用“SharePoint 列表”。但我也发现以下代码让我可以访问 SharePoint 页面：

```
WebClient client = new WebClient();
client.Credentials = CredentialCache.DefaultCredentials; 
```

然后，我可以在客户端的帮助下将页面下载为字符串，然后通过*HTML Agility Pack*将其传递给我想要的东西。

# javascript - 正则表达式从方括号内获取文本

> ID：11013110
> 
> 赞同：10
> 
> 时间：2012-06-13T10:37:42.533
> 
> 标签：javascript, jquery, regex

> **可能重复：**
> [正则表达式查找包含在两个字符之间的字符串，同时排除分隔符](https://stackoverflow.com/questions/1454913/regular-expression-to-find-a-string-included-between-two-characters-while-exclu)

我有一个函数，我必须获取包含在方括号中但不是方括号的文本，例如

```
this is [test] line i [want] text [inside] square [brackets] 
```

从上面的行我想要的话：

```
test
want
inside
brackets 
```

我正在尝试这样做，`/\[(.*?)\]/g`但我没有得到满意的结果，我得到括号内的单词，但括号也不是我想要的

我确实在 SO 上搜索了一些类似类型的问题，但是这些解决方案都没有对我正常工作，这是发现`(?<=\[)[^]]+(?=\])`这在 RegEx 教练中有效但不适用于 JavaScript 的一个。这是我得到这个的[参考](https://stackoverflow.com/questions/2403122/regular-expression-to-extract-text-between-square-brackets)

这是我到目前为止所做的：[演示](http://jsfiddle.net/5SNLM/)

请帮忙。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-13T10:48:46.860

一个前瞻应该在这里解决问题：

```
 a = "this is [test] line i [want] text [inside] square [brackets]"
 words = a.match(/[^[\]]+(?=])/g) 
```

但在一般情况下，`exec`或`replace`基于 - 的循环会导致更简单的代码：

```
words = []
a.replace(/\[(.+?)\]/g, function($0, $1) { words.push($1) }) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T10:41:07.380

[这个小提琴](http://jsfiddle.net/5SNLM/2/)使用[RegExp.exec](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)并且只输出括号内的内容。

```
var data = "this is [test] line i [want] text [inside] square [brackets]"
var re= /\[(.*?)\]/g;
for(m = re.exec(data); m; m = re.exec(data)){
    alert(m[1])
} 
```

# c# - C# SignedCms 的 Java 实现

> ID：11013111
> 
> 赞同：9
> 
> 时间：2012-06-12T16:59:30.427
> 
> 标签：c#, java, digital-signature, bouncycastle, asn.1

我正在用 Java 实现 C# SignedCms 功能。

我正在使用 bouncycastle 库。问题是我得到的 java 签名与使用 SignedCms 生成的签名不同。

* * *

## C# 代码

```
X509Certificate2 certificate = new X509Certificate2("myCertPath", "myPass"); 
String text = "text"; 
ContentInfo contentInfo = new ContentInfo(System.Text.Encoding.UTF8.GetBytes(text)); 
SignedCms cms = new SignedCms(contentInfo, false); 
CmsSigner signer = new CmsSigner(certificate); 
signer.IncludeOption = X509IncludeOption.None; 
signer.DigestAlgorithm = new Oid("SHA1"); 
cms.ComputeSignature(signer, false); 
byte[] signature = cms.Encode(); 
print(signature); 
```

* * *

## Java 代码

```
Security.addProvider(new BouncyCastleProvider()); 
char[] password = "myPass".toCharArray(); 
String text = "text"; 
FileInputStream fis = new FileInputStream("myCertPath"); 
KeyStore ks = KeyStore.getInstance("pkcs12"); 
ks.load(fis, password); 

String alias = ks.aliases().nextElement(); 
PrivateKey pKey = (PrivateKey)ks.getKey(alias, password); 
X509Certificate cert = (X509Certificate)ks.getCertificate(alias); 
java.util.List certList = new ArrayList(); 
Store certs = new JcaCertStore(certList); 

CMSSignedDataGenerator gen = new CMSSignedDataGenerator(); 
JcaSimpleSignerInfoGeneratorBuilder builder = new JcaSimpleSignerInfoGeneratorBuilder().setProvider("BC").setDirectSignature(true); 

gen.addSignerInfoGenerator(builder.build("SHA1withRSA", pKey, cert)); 
gen.addCertificates(certs); 

CMSTypedData msg = new CMSProcessableByteArray(text.getBytes()); 
CMSSignedData s = gen.generate(msg, false); 
print(s.getEncoded()); 
```

它们都不包括 x509 证书。

* * *

## C# 生成的签名

长度=434308201AE06092A864886F70D010702A082019F3082019B020101310B300906052B0E03021A0500301306092 A864886F70D010701A006040474657874318201723082016E0201013081CB3081B6310B3009060355040613 02555331173015060355040A130E566572695369676E2C20496E632E311F301D060355040B1316566572695 369676E205472757374204E6574776F726B313B3039060355040B13325465726D73206F6620757365206174 2068747470733A2F2F7777772E766572697369676E2E636F6D2F7270612028632930393130302E060355040 31327566572695369676E20436C617373203320436F6465205369676E696E6720323030392D322043410210 1763F9A88334A01FFB3B7BAB384A9B93300906052B0E03021A0500300D06092A864886F70D0101010500048 1800B866A9A7045E3C86E5DB69CDAD5CED211A4A2362BCC4DDB2742BF0CDB65BC88556C97A6C08D68F8070D 89CC78ACD84A636F15B40D166E461411C6A04D5EC379283988DA4258B684FFEF9F08B293A03A0B40900E245 874D8C0587BBD58BDD915A50D27456E6EEB883846CAC485853BA5E22E45D333C940A958E641A00C9602B9

* * *

## Java 生成的签名

长度=428308006092A864886F70D010702A0803080020101310B300906052B0E03021A0500308006092A864886F70D0 107010000318201723082016E0201013081CB3081B6310B300906035504061302555331173015060355040A 130E566572695369676E2C20496E632E311F301D060355040B1316566572695369676E205472757374204E6 574776F726B313B3039060355040B13325465726D73206F66207573652061742068747470733A2F2F777777 2E766572697369676E2E636F6D2F7270612028632930393130302E06035504031327566572695369676E204 36C617373203320436F6465205369676E696E6720323030392D3220434102101763F9A88334A01FFB3B7BAB 384A9B93300906052B0E03021A0500300D06092A864886F70D01010105000481800B866A9A7045E3C86E5DB 69CDAD5CED211A4A2362BCC4DDB2742BF0CDB65BC88556C97A6C08D68F8070D89CC78ACD84A636F15B40D16 6E461411C6A04D5EC379283988DA4258B684FFEF9F08B293A03A0B40900E245874D8C0587BBD58BDD915A50 D27456E6EEB883846CAC485853BA5E22E45D333C940A958E641A00C9602B9000000000000

我被困在这个问题上。

## 更新

Java 输出经过 BER 编码。我需要 DER 编码签名。要将 BER 转换为 DER，我使用了

```
ByteArrayOutputStream bOut = new ByteArrayOutputStream();
DEROutputStream dOut = new DEROutputStream(bOut);
dOut.writeObject(s.toASN1Structure().toASN1Primitive());
dOut.close();
bytep[ encoded = bOut.toByteArray(); 
```

现在输出是一样的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T22:19:24.580

好消息：没有错。

### 查看 ASN.1 DER 编码

看一下两个生成的 DER 编码的开头：

```
C#:   308201AE...
Java: 3080... 
```

C#编码是定长形式，即`30`表示a `SEQUENCE`，`82`表示使用后面两个字节的定长编码，`01AE`是实际长度值430。后面的430字节加上目前读取的4字节，总共434字节。

另一方面，Java 编码的不同之处在于它指示不定长度编码（the `80`）。严格来说，这不再是DER编码而是BER编码。这意味着该元素没有给出明确的长度，但该元素以一个特殊`END OF CONTENTS`元素结尾，该元素被编码为`0000`. 在 Java 编码结束时，您会注意到其中不少。有关BER/DER[指南](http://luca.ntop.org/Teaching/Appunti/asn1.html)中的详细信息的更多信息。

这两个结构的其余部分完全相同，甚至签名值本身也是如此。只是Java版本使用不定长度，而C#版本使用确定长度。如果验证方理解 BER 和 DER 编码，则这两个签名将与编码相同。并且编码不会在签名验证过程中发挥作用。以下是[CMS RFC](https://www.rfc-editor.org/rfc/rfc3852#section-5.4)对此的说明：

有`signedAttrs`礼物：

> 具体来说，初始输入是应用签名过程的 encapContentInfo eContent OCTET STRING。只有组成 eContent OCTET STRING 值的八位字节被输入到消息摘要算法，而不是标签或长度八位字节。

没有`signedAttrs`：

> 当signedAttrs 字段不存在时，只有包含SignedData encapContentInfo eContent OCTET STRING 的值的八位字节（例如，文件的内容）被输入到消息摘要计算中。这具有在签名生成过程之前不需要知道被签名内容的长度的优点。

换句话说：只有组成实际值的字节`eContent`才会被散列，而且实际上只有那些。它的标签和它的长度以及它的块的标签和长度（在不确定的构造编码的情况下）都不能在这个过程中被散列。我承认，有些实现会出错，这显然是一个相当复杂的问题。

### 为什么在 CMS SignedData 中使用不定长度？

虽然它增加了很多复杂性和互操作性问题，但出于一个原因（除了小几个字节之外）它是有意义的：如果您生成“附加签名”（原始文档嵌入在`EncapContentInfo`元素中的签名），则选择不定长度允许您以流式方式创建和验证签名：您可以逐块读取或写入。而对于确定的长度，您必须一次读取/写入整个内容，因为您需要提前知道长度才能创建 DER 编码的最终标签长度值格式。在这种情况下，能够进行流式 IO 的想法非常强大：假设您想要创建一个数 GB 大的日志文件的附加签名 - 任何非流式处理方法都会很快耗尽内存。

The Java version of Bouncy Castle added streaming support in the context of CMS a while ago, chances are high that it won't be too long until the C# version picks it up.

# php - PHP 内爆奇怪地在其输出中添加了白色字符 - 为什么？

> ID：11013118
> 
> 赞同：0
> 
> 时间：2012-06-13T10:38:24.630
> 
> 标签：php, implode

我对 PHP 的内爆函数有非常非常奇怪的问题。它令人惊讶地向数组元素之一添加了一些白色字符（空格）。

这是我的代码：

```
$cities = array(...,5792753,...);

$where .= ' AND gr.geo_city IN(' . implode(',', $cities) . ') ';

//it displays something like: ... AND gr.geo_city IN(...,5         792753,...)
//but it should display: ... AND gr.geo_city IN(...,5792753,...) 
//PLEASE NOTE SPACES IN THE EXAMPLE ABOVE!!
echo $where; 
```

我做了一些调试，似乎原始值不包含任何白色字符。这是我用来检查它的代码：

```
foreach($cities as $ct)
{
  if(strpos($ct,'792753') !== FALSE)
    echo $ct;//it displays 5792753, not 5...792753
} 
```

为什么要在那里添加这些空格？它是内爆函数的一些已知错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:45:08.580

您几乎可以肯定在原始数组值中有这些字符。正如评论者所说，`implode()`没有什么奇怪的......再次检查您的数据是否有隐藏的选项卡或空格或其他空白字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:52:44.723

如果您想确保没有空格，最好使用一些 php 函数（str_replace、trim 或 reg_exp 函数）去除它们。除了给定的分隔符，Implode 不添加任何内容。

# javascript - jQuery 中的等效代码

> ID：11013120
> 
> 赞同：1
> 
> 时间：2012-06-13T10:38:37.813
> 
> 标签：javascript, jquery, javascript-events

下面的 JavaScript 函数在 jQuery 中的等效代码是什么？

```
function attachSomeHandler(in) {
    for(var i = 0; i < in.length; i++) {
        if(in[i].type == 'submit') 
            in[i].attachEvent("onclick", someFunc);
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:47:34.083

假设参数`in`是一个 DOM 元素数组，并且您已经拥有该数组并且想要重现完全相同的函数`attachSomeHandler()`，您可以使用 jQuery 来执行此操作：

```
function attachSomeHandler(in) {
    $(in).filter('[type="submit"]').click(someFunc);
} 
```

如果您想在代码中备份到更高级别，您可以创建一个 jQuery 选择器，该选择器将获取已过滤的原始 DOM 元素数组，使其仅具有适当类型的元素。

# android - 如何在方法中获取 GPS 坐标

> ID：11013128
> 
> 赞同：0
> 
> 时间：2012-06-13T10:39:17.690
> 
> 标签：android, gps

我有一个注册监听器并请求位置更新的方法。我想在当前方法本身中定位坐标，而不是在 onLocationChanged 方法中。

我的代码是：-

```
myclass {

   onCreate {
      location_Manager = (LocationManager) getSystemService (Context.LOCATION_SERVICE);
      locLstnr = new myLocationlistener();
      locMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, Loc_listener.MINIMUM_TIME_BETWEEN_UPDATES, Loc_listener.MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, locLstnr);
   }

   class myLocationListener () {
      onLocationChanged() { ... }
      onProviderDisabled() { ... }
      onProviderEnabled() { ... }
   }

} 
```

我知道我可以得到 getLastKnownLocation() ，但是如果它不可用，难道根本就不能得到位置吗？[这](https://stackoverflow.com/questions/5233264/how-to-know-gps-location-without-onlocationchange-method)和[这](https://stackoverflow.com/questions/5384389/help-in-using-gps-coordinates-android)是一个类似的问题，但对我没有帮助。使用 onLocationChanged 方法没有问题，但我需要在 onCreate 方法中有位置。那可能吗？一种方法可能是将位置存储到 myLocationListener 中的变量上并访问它，但有替代方案或更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:45:00.480

我认为如果 getLastKnownLocation() 给出 null 那么你必须等待回调....

只是可以做可以请求更新

```
locationManager.requestLocationUpdates(locationProvider, 0, 0, locationListener); 
```

[http://devdiscoveries.wordpress.com/2010/02/04/android-use-location-services/](http://devdiscoveries.wordpress.com/2010/02/04/android-use-location-services/)

从 [链接](https://stackoverflow.com/questions/6068614/get-gps-location-instantly-via-android-app)

```
getLastKnownLocation() is faster after a connection has been established with the GPS satellite. For the first time, it will return null, or no value till no connection is established. You can add a GpsListener to know when the location is obtained. Search about "how to get a gps fix" and you might get answer to your question 
```

并参考[链接](https://stackoverflow.com/questions/6002630/getting-location-instantly-in-android)

# java - 读取里面的页面源码 一个网页的

> ID：11013129
> 
> 赞同：0
> 
> 时间：2012-06-13T10:39:18.453
> 
> 标签：java, html-parsing, jsoup, htmlunit

任何人都可以帮助我阅读标签内的页面源代码。

我已经尝试过使用 htmlUnit 和 jsoup ......但它只返回里面的内容和标签。任何回应都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:44:04.140

用于`element.html()`读取 HTML 而不是[JSoup中标签本身的包含](http://jsoup.org)

**例如：**

```
String html = "<p>An </p><form action="SOMESERVLET"><b>example</b></form> ";
Document doc = Jsoup.parse(html);
String htmlContent = doc.select("form").first().html(); 
```

对于您的情况

```
Document doc = Jsoup.connect("example.com").get(); 
Iterator<Element> itr = doc.select("form").iterator()
while(itr.hasNext()){ 
   Element element = itr.next();
   System.out.println(element.html());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:46:32.993

一步步

*   从 url 读取 html 到字符串
*   找到`<form>`它的标签`start index`
*   找到`</form>`它的标签`last index`，**如果这个标签不存在，最后一个索引是长度**
*   并且只是`substring`从索引`start``end`

这是简单的算法，但我认为有很多工具可以帮助你！！！

# windows-server-2008 - 如何启用 Windows Server 任务计划程序历史记录？

> ID：11013132
> 
> 赞同：213
> 
> 时间：2012-06-13T10:39:20.620
> 
> 标签：windows-server-2008, scheduled-tasks, windows-task-scheduler

我有一个运行计划任务的 Windows Server 2008，主要是调用 PHP 文件的 .bat 文件。我在服务器上有 2 个用户，一个是管理员，另一个是标准用户。

我使用标准用户使用事件查看器清除任务计划程序历史选项卡中的历史日志。现在它不会再记录任何历史了。所有计划任务在“历史记录”选项卡中不再具有历史记录。但是，上次运行结果返回 0x0 并且调度程序工作正常。
请指教。

* * *

## 回答 #1

> 赞同：391
> 
> 时间：2013-02-01T16:50:59.580

第 1 步：打开提升的任务计划程序（即右键单击任务计划程序图标并选择*以管理员身份运行*）

第 2 步：在**Actions 窗格**（右窗格，*而不是*actions*选项卡*）中，单击*Enable All Tasks History*

就是这样。不知道为什么默认情况下不启用此功能，但事实并非如此。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-11-18T17:23:18.230

对于那些想知道为什么事件日志条目没有显示在某些任务的任务计划程序的历史选项卡中的人，我有另一个*可能的*答案，即使启用了所有任务历史记录，这些任务的事件在事件日志中是可见的，以及所有其他任务显示历史就好了。就我而言，我创建了 13 个新任务。其中 5 个事件在“历史”下显示良好，但对于其他 8 个，“历史”选项卡完全空白。我什至使用 Mick Wood 关于使用事件查看器的帖子验证了这些任务已单独启用历史记录（并记录事件）。

然后它击中了我。我突然意识到这 8 个人的共同点是其他 5 个人所没有的。它们的事件名称中都有一个 & 字符。我通过导出我创建的第一个任务“将 E 同步到 N”、重命名导出的文件名、编辑 XML 内容，然后导入新任务来创建它们。Windows Explorer 很高兴地让我将任务重命名，例如“将 C 同步到 N&T”，然后任务计划程序很高兴地让我导入它。但是，由于名称中有讨厌的“&”，它无法从事件日志中检索其历史记录。当我删除原始事件，将 xml 文件重命名为“同步 C 到 N 和 T”并导入它时，瞧，任务计划程序的“历史记录”选项卡中的所有日志条目。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-11-13T18:33:18.493

**Task Scheduler 应用程序**中的调整实际上只是控制了某个事件日志的启用状态，因此您可以等效地通过 Windows 命令行调整 Task Scheduler“历史”模式：

```
wevtutil set-log Microsoft-Windows-TaskScheduler/Operational /enabled:true 
```

要检查当前状态：

```
wevtutil get-log Microsoft-Windows-TaskScheduler/Operational 
```

对于键击厌恶，以下是上述内容的略微缩写版本：

```
wevtutil sl Microsoft-Windows-TaskScheduler/Operational /e:true
wevtutil gl Microsoft-Windows-TaskScheduler/Operational 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-01-27T18:31:58.003

我认为令人困惑的是，在我的服务器上，我必须右键单击左侧的任务计划程序库，然后右键单击以获取启用或禁用所有任务历史记录的选项。

希望这可以帮助

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-02-07T03:37:12.143

这是我在 Windows 2008R2 服务器上找到它的地方。提升的任务计划程序单击“任务计划程序库”它显示为右侧“操作”面板上的一个选项。

![在此处输入图像描述](../Images/f6eeb4236c4cd5c237eb3df26e975c04.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-20T11:05:21.143

这可能会帮助其他人在任务计划程序中的任何地方都没有启用/禁用历史记录的选项。

打开事件查看器（在计算机管理或管理工具 > 事件查看器中）。

在事件查看器中，确保显示预览窗格（应勾选视图 > 预览窗格）

在左侧窗格中，展开应用程序和服务日志，然后展开 Microsoft、Windows、TaskScheduler，然后选择 Operational。

您应该在预览窗格中显示操作，其中包含两个部分 - 操作和在该事件 nnn、TaskScheduler 下方。操作部分中列出的项目之一应该是属性。单击此项目，启用日志记录选项位于常规选项卡上。

我的问题是已达到最大日志大小，即使选择了覆盖旧事件选项，它也没有记录新事件。我怀疑这可能是一个权限问题，但我在满时将其更改为存档，现在一切都恢复正常了。

希望这对其他人有帮助。如果您没有我上面提到的选项，我很抱歉，但我不知道您应该看哪里。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-07-31T17:27:59.900

赢 8.1 专业版

上面布赖恩克拉克的回答对我有用，但我在这里发帖是为了那些可能不得不遵循与我略有不同的顺序的人。

当我运行控制面板 > 管理工具 > 右键单击​​任务计划程序 - “以管理员身份运行”时，我发现“操作”窗格已经包含以下操作：

```
Disable All Tasks History 
```

所以我的机器已经启用了历史记录。但是我的机器需要先禁用历史记录，然后返回并“启用所有任务历史记录”。之后，我的历史记录出现了，我没有收到更多错误。我假设该操作执行了某种类型的初始化或设置，这些初始化或设置从一直到操作系统安装都没有正确完成。

我还要补充一点，我必须退出任务计划程序并重新进入它，然后才能来回切换历史启用/禁用设置。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-09-17T12:48:04.873

如前所述，如果您在提升的“管理员”模式下打开任务管理器（右键单击任务计划程序/快捷方式并选择“以管理员身份运行”），则可以选择打开或关闭历史记录。然后在“任务”下是您停止或启动历史记录的地方。

# ios - 将您的 Mac 通讯录联系人导入 iOS 模拟器

> ID：11013133
> 
> 赞同：1
> 
> 时间：2012-06-13T10:39:35.147
> 
> 标签：ios, ios-simulator, contacts

我需要一个大的联系人列表进行一些测试，我想将我拥有的地址簿联系人导入 iOS 模拟器。有谁知道这是怎么做到的吗？

谢谢

# delphi - 施工期间如何在TPanel后代中设置标题？

> ID：11013136
> 
> 赞同：1
> 
> 时间：2012-06-13T10:39:49.097
> 
> 标签：delphi, vcl

```
TMyPanel = class(TPanel)
public
  procedure AfterConstruction; override;
end;

procedure TMyPanel.AfterConstruction;
begin
  inherited AfterConstruction;
  Caption := '';
end; 
```

我想在构建过程中清除标题，但是这段代码没有按我的预期工作。它不会将标题设置为空字符串。如果我将“”（空格）分配给 Caption，它将保留，但这不是一个合适的解决方案。

我正在使用德尔福 2006。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T10:50:04.990

试试这个：

```
uses
  ExtCtrls, StrUtils;

type
  TMyPanel = class(TPanel)
  public
    procedure Loaded; override;
  end;

procedure TMyPanel.Loaded;
  inherited;
  Caption := EmptyStr;
end; 
```

经过测试，在 XE2 中似乎可以正常工作。

*编辑*：

这在 OP 中显示的方法不起作用的情况下起作用的原因是因为在从 DFM 文件分配对象的属性值*之后*`Loaded`调用。

 *重写的调用`AfterConstruction`发生在对象的初始创建之后，但在从表单的 DFM 分配属性值*之前*，这意味着您在方法中分配的任何属性值都`AfterConstruction`将立即被为同一属性指定的任何值替换在 DFM 中。

`Loaded`发生*在*施工订单的最后，因此您分配的任何值都将是最终的。*

# hibernate - Hibernate 等于和代理

> ID：11013138
> 
> 赞同：15
> 
> 时间：2012-06-13T10:39:59.267
> 
> 标签：hibernate, proxy, equals

我有一个抽象 id 和 version 属性的 BaseEntity。这个类还实现了基于 PK (id) 属性的 hashcode 和 equals。

```
BaseEntity{

    Long id;
    Long version; 

public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((id == null) ? 0 : id.hashCode());
    return result;
}

public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    BaseEntity other = (BaseEntity) obj;
    if (id == null) {
        if (other.id != null)
            return false;
    } else if (!id.equals(other.id))
        return false;
    return true;
}

} 
```

现在两个实体 A 和 B 扩展 BaseEntity 如下

```
A extends BaseEntity{
    `B b`
     B getB(){return b;)
     void setB(B b){this.b=b;}
}

B extends BaseEntity{
}

object b1;
object a1;
a1.set(b1);
session.save(a1) //cascade save; 
```

用惰性 b 关闭会话加载 a 并尝试 a1.getB().equals(b1) 给出错误但如果我与 a1.getB().getId().equals(b1.getId()) 进行比较，则给出真正的奇怪！我认为这是因为 java 辅助代理对象，无论如何要解决这个问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-02T19:13:46.660

为了能够延迟加载`a.b`关联，Hibernate 将`b`字段设置`a`为代理。代理是扩展 B 的类的实例，但不是 B。因此，将非代理 B 实例与代理 B 实例进行比较时，您的 equals() 方法将始终失败，因为它比较了两个对象的类：

```
if (getClass() != obj.getClass())
    return false; 
```

对于 Hibernate 实体，您应该将其替换为

```
if (!(obj instanceof B)) {
    return false;
} 
```

另外，请注意

*   Hibernate 建议不要实现`equals()`并`hashCode()`使用 ID，而是使用自然标识符。使用 ID 实现它可能会导致问题，因为实体在保存并生成 ID 之前没有 ID
*   使用实体继承时，问题更严重。假设 B 是两个子实体 B1 和 B2 的超类。`a.b`Hiberante在加载之前无法知道是哪种类型（B1 或 B2） 。所以`a.b`将被初始化为一个代理，它是 B 的子类，但不是 B1 或 B2 的子类。所以`hashCode()`and`equals()`方法应该在 B 中实现，而不是在 B1 和 B2 中被覆盖。如果两个 B 实例是 B 的实例并且具有相同的标识符，则它们应被视为相等。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-24T12:07:06.410

我用`Hibernate.getClass` 了很多年，我从来没有注意到一个问题：

```
@Override    
public boolean equals(final Object obj) {
    if (this == obj) {
        return true;
    }
    if (obj == null) {
        return false;
    }
    if (Hibernate.getClass(this) != Hibernate.getClass(obj)) {
        return false;
    }

    ... check for values

    return true;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-10T09:50:06.260

你也可以让它以这种方式工作，如果你不知道哪个实例是 B 很有用（如果你`equals`在超类中可能会发生）

```
if (HibernateProxyHelper.getClassWithoutInitializingProxy(this) != HibernateProxyHelper.getClassWithoutInitializingProxy(obj)) 
    return false 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-13T11:45:10.383

这主要是标准 Java 继承的影响。

`a1.getB().equals(b1)`使用`Object.equals()`（除非你在你的类中重写了 equals() ），只有当 a1.getB() 和 b1 是同一个实例时才返回 true。我不知道你到底做了什么（你的代码格式被破坏了），但看起来你已经`a`在不同的会话中再次加载，所以你得到了一个新的`a`and实例`a.getB()`，因此`Object.equals()`返回 false。

`a1.getB().getId().equals(b1.getId())`uses `Long.equals()`，如果 long 值相同（即使对于 Long 对象的不同实例）返回 true，并且这些值显然是相同的。

# database - 如何添加 JDBC 数据源连接到 Hive？

> ID：11013140
> 
> 赞同：0
> 
> 时间：2012-06-13T10:40:10.617
> 
> 标签：database, oracle, oracle11g, business-intelligence, hive

我正在尝试在 oracle BI 发布者中添加一个新的 JDBC 数据源连接到配置单元，我知道如何使用 JDBC 连接到配置单元，但问题是 Oracle BI 发布者不接受空白用户名。如何在不输入用户名的情况下在 Oracle BI 发布者中创建数据源？连接细节：

driverName = org.apache.hadoop.hive.jdbc.HiveDriver

连接字符串 jdbc:hive://localhost:10000/default 用户名：密码：错误：必须为“用户名”输入值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:39:53.500

我相信 Hive JDBC 驱动程序不依赖用户名/密码来授权连接，因此您几乎可以在这些字段中放置任何值。

# java - 通过 DatagramSocket 发送列表？

> ID：11013142
> 
> 赞同：0
> 
> 时间：2012-06-13T10:40:15.910
> 
> 标签：java, list, sockets, client

我有一个 Java 电子表格应用程序，它提供的功能之一（我开发的）是工作表共享。基本上，任何人都可以是客户端或服务器，因为该应用程序同时具有服务器和客户端代码。作为服务器的用户创建共享，指定 IP，然后共享被创建并处于活动状态（最佳情况），服务器在其 IP 和选定端口上侦听客户端。

对于自动发现，我通过 UDP 广播使用 DatagramSockets，而“真正的通信”是基于 TCP 的（在客户端已经连接之后）。但是，我正在尝试`List`通过该 UDP 套接字发送一个，但我不知道该怎么做。它`List`包含我需要发送给客户端的服务器上的活动共享，以便它知道它可以连接到什么。

它是这样的：

客户端 -> 通过向网络发送数据包来查找活动服务器 -> 服务器侦听并发送回数据包。这个数据包应该是`List`（如果可以通过这些类型的套接字发送它）。

任何人都可以对我的问题有所了解吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:44:59.573

您可以在发送之前将您的列表转换为 byte[]，然后使用 Java 序列化将其转换回接收方上的列表。

```
 // Sender
    List list = new ArrayList();
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    ObjectOutputStream outputStream = new ObjectOutputStream(out);
    outputStream.writeObject(list);
    outputStream.close();

    byte[] listData = out.toByteArray();

    // Reciever
    ObjectInputStream inputStream = new ObjectInputStream(new ByteArrayInputStream(listData));
    list = inputStream.readObject(); 
```

只需确保您放入列表中的所有对象都实现了可序列化。

# iphone - 声明和合成的 NSArray 适用于除一种以外的所有方法

> ID：11013143
> 
> 赞同：1
> 
> 时间：2012-06-13T10:40:17.780
> 
> 标签：iphone, objective-c, nsarray

我有一个已排序的 NSMutableDictionaries 数组。

该数组已被声明和合成，因此它可以在代码中的任何位置访问。然而，它不是。

当我尝试在 cellForRowAtIndexPath 中读取它时，使用 po 命令得到 0x5852400 似乎没有指向调试器中的有效对象，并且在使用 NSLog 时出现 EXC_BAD_ACCESS 错误。

代码：

```
- (void)request:(FBRequest *)request didLoad:(NSArray*)result
{
    int counter;
    friendsArray = [[NSMutableArray alloc] init];

    for (NSDictionary *d in [result objectForKey:@"data"])
    {   
        [friendsArray addObject:d];
        counter++;
    }

    NSSortDescriptor *sortDescriptor;
    sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"first_name" ascending:YES] autorelease];
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
    NSArray *sortedArray;

    newfriendsArray = [[NSArray alloc] init];

    newfriendsArray = [friendsArray sortedArrayUsingDescriptors:sortDescriptors];

    NSLog(@"The new array which works and has been sorted: %@", newfriendsArray);

    [[self tableView] reloadData];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.

    NSLog(@"Array still working here: %@", newfriendsArray);

    return [newfriendsArray count];
} 
```

执行与上述相同的 NSlog`cellForRowAtIndexPath`会导致模拟器崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:06:21.350

这是内存管理错误。在这一行：

```
newfriendsArray = [friendsArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

`sortedArrayUsingDescriptors:`如果您想使用它比当前方法更长时间，则返回一个需要保留的自动释放对象。上面的行：

```
newfriendsArray = [[NSArray alloc] init]; 
```

除了在代码中引入内存泄漏之外没有任何影响。您似乎还不太了解何时需要创建新对象以及其他方法何时为您执行此操作。此外，您应该真正使用属性来设置您的 ivars ( `self.newFriendsArray = ...;`) 以避免这些简单的内存管理错误。

# css - 使用 CSS 设置搜索框和搜索按钮的样式

> ID：11013144
> 
> 赞同：-1
> 
> 时间：2012-06-13T10:40:19.170
> 
> 标签：css, xhtml

我的搜索框有问题，搜索框的搜索按钮之间有间隙，并且此问题仅存在于 IE7/8/9 中。但它在 Firefox 中很好。

**编辑：**在 IE 中，光标也更高，但在 Firefox 中完美。

**JSFIDDLE：http:** [//jsfiddle.net/bM7PQ/](http://jsfiddle.net/bM7PQ/)

**HTML：**

```
<form action="search.aspx" method="get" class="topsearchform" name="topsearchform">
    <fieldset>

    <!--<label>Search:</label>-->

    <input type="text" autocomplete="off" id="Text1" class="searchBox" name="SearchTerm" size="15">
    <input width="23" type="image" height="23" border="0" onclick="document.topsearchform.submit()" alt="Submit Form" src="http://i45.tinypic.com/ojkznb.png" class="searchButton">
    </fieldset>
</form> 
```

**CSS：**

```
form.topsearchform {
    left: 70px;
    padding-right: 20px;
    position: absolute;
    top: 87px;
    width: 139px;
}

#topLinks form fieldset {
    vertical-align: middle;
}

#Text1 {
    background-color: transparent;
    background-image: url("http://i46.tinypic.com/35c0n78.png");
    border: 0 none;
    height: 23px;
    padding-left: 3px;
    padding-right: 3px;
    width: 130px;
}

input.searchButton {
    background-color: transparent;
    background-image: url("http://i49.tinypic.com/r0rrtl.png");
    position: absolute;
} 
```

**IE中的问题：**

![在此处输入图像描述](../Images/4c7b087fcb8c0dea50b6d93f5931c228.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:26:57.883

这可以满足您的需要并且没有位置：绝对，检查小提琴：http: [//jsfiddle.net/LvP43/](http://jsfiddle.net/LvP43/)

```
form.topsearchform {
    left: 70px;
    padding-right: 20px;
    position: absolute;
    top: 87px;
    width: 159px;
}

#topLinks form fieldset {
    vertical-align: middle;
}

#Text1 {
    background-color: transparent;
    background-image: url("http://i46.tinypic.com/35c0n78.png");
    border: 0 none;
    height: 23px;
    padding-left: 3px;
    padding-right: 3px;
    width: 130px;
    float: left;
}

input.searchButton {
    background-color: transparent;
    background-image: url("http://i49.tinypic.com/r0rrtl.png");
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:42:56.017

将此行添加到`input.searchButton`

```
left:133px; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:43:14.057

您是否在自己的样式之前应用了任何类型的 CSS 重置？这很有帮助，因为它倾向于规范 html 元素在不同浏览器上的显示方式。

# php - 提交按钮：按钮文本与值不同

> ID：11013154
> 
> 赞同：9
> 
> 时间：2012-06-13T10:41:02.807
> 
> 标签：php, html, forms, submit

我正在用 PHP 编写一个搜索表单。我希望用户能够使用以下提交按钮添加搜索字段：

```
<input type="submit" name="fields" value="<?php echo $fields+1 ?>" /> 
```

现在按钮显示 的值`$fields + 1`。实际上我想要的是显示其他内容的按钮（例如*添加新字段*）。仅在标签之间添加文本`<input>...</input>`无济于事。文本仅显示在按钮的右侧。

如何更改按钮上的文本并仍将值传递`$fields + 1`给 GET/POST？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T10:43:37.863

您可以使用隐藏输入来存储值计数，它将在 GET/POST 之后可用：

```
<input type="submit" name="fields" value="add new field" />
<input type="hidden" name="fieldsCount" value="<?php echo $fields+1 ?>" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-19T15:02:53.730

您可以使用按钮元素：

```
<button type="submit" name="seven" value="7">Push Me</button> 
```

参考：http : [//www.w3schools.com/tags/att_button_type.asp](http://www.w3schools.com/tags/att_button_type.asp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T10:44:42.727

您可以使用隐藏字段来存储或发布`$fields+1`值：

```
<input type="hidden" name="fields" value="<?php echo $fields+1 ?>" />
<input type="submit" name="submitter" value="Send" /> 
```

# client - OpenStack-Swift 客户端？

> ID：11013157
> 
> 赞同：3
> 
> 时间：2012-06-13T10:41:09.717
> 
> 标签：client, openstack

用于 OpenStack 存储的 Cloudberry Explorer 是适合 OpenStack-Swift 的客户端，可在以下链接[http://www.cloudberrylab.com/free-openstack-storage-explorer.aspx](http://www.cloudberrylab.com/free-openstack-storage-explorer.aspx)中找到。我正在搜索与该客户完全相似的其他客户。我确实在谷歌搜索过，但我不太确定我找到的那些。您能说一下作为免费软件提供的类似类型的客户端吗？我正在做一些实验，所以我需要几个类似于 Cloudberry Explorer 的客户端。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-19T02:51:36.627

您还可以查看[相关的 Swift 项目](http://docs.openstack.org/developer/swift/associated_projects.html)以获取更多选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T20:37:03.790

有赛博鸭。有关如何安装和配置它的信息，请参阅[http://trac.cyberduck.ch/wiki/help/en/howto/openstack 。](http://trac.cyberduck.ch/wiki/help/en/howto/openstack)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T12:00:54.170

您还可以使用[ExpandDrive](http://www.expandrive.com/)工具来浏览云存储。

[Swift Stack](http://swiftstack.com/openstack-swift/architecture/)上的解释也有助于理解 Swift 对象存储。

# php - 无法检查已经存在的主键

> ID：11013160
> 
> 赞同：0
> 
> 时间：2012-06-13T10:41:17.080
> 
> 标签：php, sql

我有 10 个表格用于 10 个 php 表单。我正在使用一个主键并将其传递给会话中的所有其他页面以及使用该主键作为外键的相应表中。我的问题是每当我在页面上检查该关键记录是否存在时它总是显示记录存在，因为值已经被传递。

我还有另一个问题..我想让更新查询有点像

```
"UPDATE table SET '.$column.' ='.$value.', WHERE id=".$id." "; 
```

其中，该列应仅是仅包含更改的数据的数组，而不会影响剩余的列和值，并在一个更新查询中更新所有值。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:45:08.703

您是否以以下方式开始页面：

```
<?php
    session_start();
?> 
```

如果您使用的是`$_SESSION`变量，则会话需要这样做。希望能帮助到你。

# django - 使用 i18n 在 Django 中进行语言翻译

> ID：11013165
> 
> 赞同：0
> 
> 时间：2012-06-13T10:41:33.570
> 
> 标签：django, internationalization, translation, multilingual

我创建多语言平面页面。我想根据我选择的语言翻译内容。我参考此代码 [Django i18n setlang 视图给出错误 404](https://stackoverflow.com/questions/10898614/django-i18n-setlang-view-gives-error-404?answertab=active) 当我选择语言时，发布方法调用 i18n/setlang 并再次进入同一页面，但内容没有改变。有人可以帮我解决这个问题吗？

谢谢

**设置**

```
gettext = lambda s: s

LANGUAGES = (
    ('en', gettext('English'),),
    ('no', gettext('Norwegian'),),
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.i18n',
    'multilingual.context_processors.multilingual',
    'django.core.context_processors.media',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
) 
```

**模板**

```
{% load i18n %}
 <form action="/i18n/setlang/" method="post">
  {% csrf_token %}
   <input name="next" type="hidden" value="{{ redirect_to }}" />
   <select name="language">
      {% get_language_info_list for LANGUAGES as languages %}
      {% for language in languages %}
       <option value="{{ language.code }}">{{ language.name }} ({{ language.code }})</option>
      {% endfor %}
 </select>
 <input type="submit" value="Go" />
</form>

 **view.py**
 def index(request):
    return render_to_response('flatpages/index.html', locals(),   context_instance=RequestContext(request))

**index.html**
 {% block content %}
 {% load i18n %}
     <h1>{{ flatpage.title }}</h1>
     Language Code:{{ LANGUAGE_CODE}}<br>
     {% trans "Hello" %}<br>
     {% trans "Home" %}<br>
     {{ flatpage.content }}
 {% endblock content %} 
```

在上面的代码中，我使用了
url (r'^i18n/', include('django.conf.urls.i18n'))，
这意味着当提交表单时，它会从 django 的 i18n.py 文件中调用 set_language 方法。

我检查了那个方法，在那个方法中“check_for_language（lang_code）返回false”
，为什么没有设置会话变量。

谁能告诉我为什么没有设置？
设置语言环境的设置路径会有任何变化。
我在我的项目文件夹中创建了语言环境文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:11:57.900

404 表示您正在调用一个不存在的页面。根据您的评论，我了解您在`/i18n/lang/`.

例子：

```
from django.views.i18n import set_language

url('^i18n/setlang/$', set_language) 
```

但是，如果您想要一些自定义行为，请查看 set_language 并创建您自己的实现

# android - android上的彩信流

> ID：11013166
> 
> 赞同：0
> 
> 时间：2012-06-13T10:41:33.943
> 
> 标签：android, streaming, android-mediaplayer

我想开发一个android应用程序，它通过点击一个按钮来播放现场广播。我正在使用 MediaPlayer 来执行此操作。当我在线播放音频文件时效果很好，例如

```
"http://XXXXXXXXX.com/XXXX.mp3" 
```

但是，我想问一下我如何才能播放以下链接，这是来自香港的无线电广播链接。

```
"http://202.177.192.111/radio1"
"mms://202.177.192.111/radio1" 
```

非常感谢！

# java - 如何使用jsp/java从csv文件的特定列中读取数据？

> ID：11013169
> 
> 赞同：0
> 
> 时间：2012-06-13T10:41:43.943
> 
> 标签：java, jsp, csv

在我的应用程序中，我需要使用 jsp 读取特定列的制表符分隔的 csv 文件。但我可以读取整行而不是特定列的数据。

我需要这方面的帮助。请帮我

谢谢

我的代码：

```
 <%@ page import="java.io.*"%>
    <html>
    <body>
    <% 
    String fName = "c:\\csv\\myfile.csv";
    String thisLine; 
    int count=0; 
    FileInputStream fis = new FileInputStream(fName);
    DataInputStream myInput = new DataInputStream(fis);
    int i=0; 
    %>
    <table>
    <%
    while ((thisLine = myInput.readLine()) != null)
   {
    String strar[] = thisLine.split(",");
    for(int j=0;j<strar.length;j++)
    {
    if(i!=0)
    {
     out.print(" " +strar[j]+ " ");
    }
    else
    {
    out.print(" <b>" +strar[j]+ "</b> ");
    }
    }
    out.println("<br>");
    i++;
    } 
    %>
    </table>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:52:47.543

我不认为您可以读取特定列。最好使用[CSVParser](http://commons.apache.org/csv/apidocs/org/apache/commons/csv/CSVParser.html)读取整行，或者您可以逐行读取 CSV 并将其拆分并获取`String`数组，然后您可以获得特定列，但是是的，您需要读取整行增益。

试试看。

```
 String fName = "C:\\Amit\\abc.csv";
    String thisLine;
    int count = 0;
    FileInputStream fis = new FileInputStream(fName);
    DataInputStream myInput = new DataInputStream(fis);
    int i = 0;
    while ((thisLine = myInput.readLine()) != null) {
        String strar[] = thisLine.split(",");
            System.out.println(strar[3]);
                        // Here column 2
        }
    } 
```

通过这种方式，您可以阅读特定的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:58:21.413

前几天我在Objective C中遇到了类似的问题，但这就是我解决它的方法。

此方法假定您知道所需数据的列号。（即如果你想要第 1 列，共 6 列）

将所有行读入字符串并将它们附加到一个中。

数据样本：（第 1 至 6 列）

```
1,2,3,4,5,6
13,45,63,29,10,8
11,62,5,20,13,2 
```

字符串 1 =`1,2,3,4,5,6`

字符串 2 =`13,45,63,29,10,8`

字符串 3 =`11,62,5,20,13,2`

然后你应该得到这个：

字符串组合 =`1,2,3,4,5,6,13,45,63,29,10,8,11,62,5,20,13,2 //add in the missing "," when you concatenate strings`

接下来，您需要将字符串拆分为所有值的数组。

使用有点像这样的代码：（写在我的头上，所以可能会被关闭。）

```
String[] values = combined.split(","); 
```

现在你应该有这样的东西：

```
Values = `"1", "2", "3", ... etc` 
```

最后一步是遍历整个数组并为您需要的任何列取模：

```
//Remember that java numbers arrays starting with 0.
//The key here is that all remainder 0 items fall into the first column.  All remainder 1 items fall into the second column.  And so on.

    for(int i = 0; i < values.length(); i++)
    {
            //Column1 - Column6 -> array lists of size values.length/number of columns
            //In this case they need to be size values.length/6
        if(i % 6 == 0)
            column1.add(values[i]);
        else if(i % 6 == 1)
            column2.add(values[i]);
        else if(i % 6 == 2)
            column3.add(values[i]);
        else if(i % 6 == 3)
            column4.add(values[i]);
        else if(i % 6 == 4)
            column5.add(values[i]);
        else if(i % 6 == 5)
                column6.add(values[i]);

    } 
```

~~~~~~~~~~~~~~~~

编辑：

您在问题中添加了代码。上面我正在将它们保存到内存中。您只需循环并打印出来。在您的 while 循环中，将每一行分别拆分为一个数组，然后硬编码列号或将数组的长度取模作为索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T15:06:48.613

公共类 ParseCSVs { public static void main(String[] args) {

```
 try {

        // csv file containing data
        String strFile = "./input//SIMNumbers.csv";

        String line = "";

        System.out.println("Enter line number to configure");
        Scanner sc = new Scanner(System.in);
        int lineNumber = sc.nextInt();

        BufferedReader br = new BufferedReader(new FileReader(strFile));
        if ((line = br.readLine()) != null) {

            String cvsSplitBy = ",";
            String blankCell = null;
            // use comma as separator
            String[] cols = line.split(cvsSplitBy);
            for (int i = 0; i < cols.length; i++)
                System.out.println("Coulmns = " + cols[i]);
            // System.exit(0);
        } else
            System.out.println("No data found in csv");
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# java - 当我们打开多个选项卡时，如何在 JTabbedPane 中导航？

> ID：11013171
> 
> 赞同：0
> 
> 时间：2012-06-13T10:41:52.033
> 
> 标签：java, swing

在 jtabbedpane 中，如果我打开了多个选项卡并且方向是相对于 en_GB 区域设置（从左到右），那么它提供了一个导航按钮。但是如果我使用阿拉伯语语言环境（从右到左），那么它不会提供导航按钮来导航选项卡。请对此有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:59:25.997

[您也可以为 JTabbedPane](https://stackoverflow.com/a/10909273/714968)和/或使用 Locale设置/覆盖ComponentOrientation

# android - 使 Facebook SDK 保持最新？

> ID：11013176
> 
> 赞同：0
> 
> 时间：2012-06-13T10:42:17.617
> 
> 标签：android, facebook, sdk

我下载了适用于 Android 的 Facebook SDK，并在我的应用程序中使用了一段时间。我想确保我使用的是最新版本（修复、补丁等）。

我需要一个发布版本，向后兼容，并且是最新的。我在一个已经发布的应用程序中使用 Facebook SDK，它不必破坏任何现有代码或做意想不到的事情。

我只能找到 GitHub 中的 master 分支。是否没有包含详细信息的发布版本（发生了什么变化等），我如何知道我的版本是否是最新的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:46:25.600

如果您通过分叉 master 分支从 github 获得了 sdk，那么您可以执行以下操作：

```
git fetch upstream
git merge upstream/master 
```

如此处所述：[拉入上游更改/Fork A Repo](https://help.github.com/articles/fork-a-repo)

* * *

**编辑**

您需要了解最新信息的是图形 api（您可以使用[Developer Doadmap](http://developers.facebook.com/roadmap/)来完成）。
android SDK 只是 http 请求和 webviews 的包装器，它们是图形的接口。如果安装在设备上，它当然也会使用主要的 facebook 应用程序（katana），但它会自动更新，因此您无需担心。

如果您仍然想确保您拥有最新的稳定版本的 sdk，那么您应该从 master 中提取，您可以从[Commit History](https://github.com/facebook/facebook-android-sdk/commits/master)中检查更新内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T20:02:18.287

如果您只是在寻找当前 Facebook SDK 的版本号，它位于`facebook-android-sdk\facebook\src\com\facebook\FacebookSdkVersion.java`

# objective-c - 当我的 S3PutObjectRequest 完成时，如何添加侦听器？

> ID：11013183
> 
> 赞同：0
> 
> 时间：2012-06-13T10:42:33.870
> 
> 标签：objective-c, ios, amazon-s3, amazon

我正在使用运行良好的 iOS SDK 上传到 Amazon S3，但我希望能够在加载完成时触发一个方法。

这是我的代码：

```
AmazonS3Client *s3 = [[[AmazonS3Client alloc] initWithAccessKey:ACCESS_KEY_ID withSecretKey:SECRET_KEY] autorelease];
// Create the picture bucket.
[s3 createBucket:[[[S3CreateBucketRequest alloc] initWithName:[Constants pictureBucket]] autorelease]];
NSString *picName = [NSString stringWithFormat:@"%@%d", PICTURE_NAME, counter];
// Upload image data.  Remember to set the content type.
S3PutObjectRequest *por = [[[S3PutObjectRequest alloc] initWithKey:picName inBucket:[Constants pictureBucket]] autorelease];
NSLog(@"------------ SUBMITTING img :%@", picName);
por.contentType = @"image/jpeg";
por.data        = imageData;
counter++;                   
// Put the image data into the specified s3 bucket and object.
[s3 putObject:por]; 
```

任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:52:19.827

从[Amazon SDK Docs](http://docs.amazonwebservices.com/AWSiOSSDK/latest/Classes/AmazonServiceResponse.html)看来，您得到了一个`S3PutObjectResponse`

所以

```
S3PutObjectResponse *response  = [s3 putObject:por];
if ([response isFinishedLoading]) {
    //do something
} 
```

或者您可能正在搜索`connectionDidFinishLoading:`哪个是来自 NSURLConnection 的委托方法，它们似乎相应地使用了[AmazonServiceResponse 类参考](http://docs.amazonwebservices.com/AWSiOSSDK/latest/Classes/AmazonServiceResponse.html#//api/name/connectionDidFinishLoading%3a)

在你的 .h 文件中声明你符合 NSURLConnection 的委托协议

```
@interface MyClass : NSObject <NSURLConnectionDelegate> 
```

在你的 .m 文件中实现你想要的委托方法

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
      //do your stuff here
} 
```

并告诉 NSURLConnection 您处理 .m 文件中的委托方法

```
S3PutObjectRequest *por = [[[S3PutObjectRequest alloc] initWithKey:picName inBucket:[Constants pictureBucket]] autorelease];
por.urlRequest.delegate = self; // this is important !!! 
```

一般来说，您应该习惯与代表一起工作，因为它们经常通过漏洞 iOS SDK 使用！

您可以在此处找到其他文档：[代表和数据源](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T09:10:03.330

我还有一件事要添加到评论中（我知道我在这里退出了行为，但代表阻止我发表评论）。为了安全起见，我运行了这两行，因为我发现第一行并没有始终如一地保持其价值：

```
 por.delegate = self;
    [por setDelegate:self]; 
```

由于您是像我这样的新手，因此委托本质上是处理程序，当对象调用有时需要或不需要的强制性方法时，它看起来是这样的。如果将委托设置为`self`，则意味着 putObjectRequest 将在`self`调用它们时引用强制性方法，例如 Pfitz 回答中的方法。例如`UITableView`，委托方法的一个示例是`(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`对象，`UITableView`将引用`self`以查找方法`cellForRowAtIndexPath`以填充其对象的单元队列。

# jena - Jena读取Protege本体文件报错怎么办？

> ID：11013186
> 
> 赞同：2
> 
> 时间：2012-06-13T10:42:52.150
> 
> 标签：jena, ontology

我正在尝试阅读在 Protege 4 上手动设计的本体，以使用 Jena 在 Eclipse 中对其进行更新。现在做简单，我只想从文件中读取本体并将内容打印回控制台。

这是java Jena代码。

```
package soctrace;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.InputStream;
import java.io.InputStreamReader;

import com.hp.hpl.jena.ontology.OntModel;
import com.hp.hpl.jena.ontology.ProfileRegistry;
import com.hp.hpl.jena.rdf.model.ModelFactory;

public class Intology {

    static String xmlbase = "http://www.soctrace.org/ontologies/#";
    static String ontopath = "./ontologies/tima.owl";

    public static void main(String[] args) throws FileNotFoundException {

        manageOntologies();
    }

    public static void manageOntologies() throws FileNotFoundException{
        OntModel domainModel =ModelFactory.createOntologyModel(ProfileRegistry.OWL_DL_LANG);
        domainModel.read((new FileInputStream(ontopath)), null);        
    model.write(System.out);
    }   
} 
```

本体文件如下所示：

```
<?xml version="1.0"?>
<!DOCTYPE Ontology [
    <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
    <!ENTITY xml "http://www.w3.org/XML/1998/namespace" >
    <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
    <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
]>
<Ontology xmlns="http://www.w3.org/2002/07/owl#"
     xml:base="http://www.soctrace.org/ontologies/tima.owl"
 xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns:xml="http://www.w3.org/XML/1998/namespace"
 ontologyIRI="http://www.soctrace.org/ontologies/tima.owl">
<Prefix name="xsd" IRI="http://www.w3.org/2001/XMLSchema#"/>
<Prefix name="owl" IRI="http://www.w3.org/2002/07/owl#"/>
<Prefix name="" IRI="http://www.w3.org/2002/07/owl#"/>
<Prefix name="rdf" IRI="http://www.w3.org/1999/02/22-rdf-syntax-ns#"/>
<Prefix name="rdfs" IRI="http://www.w3.org/2000/01/rdf-schema#"/>
<Annotation>
    <AnnotationProperty abbreviatedIRI=":versionInfo"/>
    <Literal datatypeIRI="&xsd;string">cette version est la promiere</Literal>
</Annotation>
<Annotation>
    <AnnotationProperty abbreviatedIRI="rdfs:comment"/>
    <Literal datatypeIRI="&xsd;string">Cette ontologie est construite pour gerer les traces de TIMA. dans un premier temps nous allons seulement considerer que les evenements sont les elements les plus interessants a regarder, puis nous allons fournir l&#39;ontologie au gré des attentes.</Literal>
</Annotation>
<Declaration>
    <Class IRI="#Event"/>
</Declaration>
<Declaration>
    <Class IRI="#EventDuration"/>
</Declaration>
<Declaration>
    <Class IRI="#EventType"/>
</Declaration>
<Declaration>
    <Class IRI="#ValuePartition"/>
</Declaration>
<SubClassOf>
    <Class IRI="#Event"/>
    <Class abbreviatedIRI=":Thing"/>
</SubClassOf>
<SubClassOf>
    <Class IRI="#EventDuration"/>
    <Class IRI="#ValuePartition"/>
</SubClassOf>
<SubClassOf>
    <Class IRI="#EventType"/>
    <Class IRI="#ValuePartition"/>
</SubClassOf> 
```

但是在运行时我遇到了以下错误：

```
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 18 column 64): {W136} Relative URIs are not permitted in RDF: specifically <ontologyIRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 18 column 64): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 19 column 65): {W136} Relative URIs are not permitted in RDF: specifically <name>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 19 column 65): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 19 column 65): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 19 column 65): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 20 column 62): {W136} Relative URIs are not permitted in RDF: specifically <name>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 20 column 62): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 20 column 62): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 20 column 62): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 21 column 59): {W136} Relative URIs are not permitted in RDF: specifically <name>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 21 column 59): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 21 column 59): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 21 column 59): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 22 column 75): {W136} Relative URIs are not permitted in RDF: specifically <name>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 22 column 75): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 22 column 75): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 22 column 75): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 23 column 70): {W136} Relative URIs are not permitted in RDF: specifically <name>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 23 column 70): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 23 column 70): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 23 column 70): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 25 column 60): {W136} Relative URIs are not permitted in RDF: specifically <abbreviatedIRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 25 column 60): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
ERROR [main] (RDFDefaultErrorHandler.java:40) - (line 26 column 44): {E201} Multiple children of property element
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 26 column 44): {W136} Relative URIs are not permitted in RDF: specifically <datatypeIRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 26 column 44): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
ERROR [main] (RDFDefaultErrorHandler.java:40) - (line 26 column 73): {E202} Expecting XML start or end element(s). String data "cette version est la promiere" not allowed. Maybe there should be an rdf:parseType='Literal' for embedding mixed XML content in RDF. Maybe a striping error.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 29 column 60): {W136} Relative URIs are not permitted in RDF: specifically <abbreviatedIRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 29 column 60): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 ERROR [main] (RDFDefaultErrorHandler.java:40) - (line 30 column 44): {E201} Multiple children of property element
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 30 column 44): {W136} Relative URIs are not permitted in RDF: specifically <datatypeIRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 30 column 44): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 ERROR [main] (RDFDefaultErrorHandler.java:40) - (line 30 column 258): {E202} Expecting XML start or end element(s). String data "Cette ontologie est construite pour gerer les traces de TIMA. dans un premier temps nous allons seulement considerer que les evenements sont les elements les plus interessants a regarder, puis nous allons fournir l" not allowed. Maybe there should be an rdf:parseType='Literal' for embedding mixed XML content in RDF. Maybe a striping error.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 33 column 30): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 33 column 30): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 36 column 38): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 36 column 38): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 39 column 34): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 39 column 34): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 42 column 39): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 42 column 39): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 45 column 30): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 45 column 30): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 ERROR [main] (RDFDefaultErrorHandler.java:40) - (line 46 column 41): {E201} Multiple children of property element
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 46 column 41): {W136} Relative URIs are not permitted in RDF: specifically <abbreviatedIRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 46 column 41): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 49 column 38): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 49 column 38): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
ERROR [main] (RDFDefaultErrorHandler.java:40) - (line 50 column 39): {E201} Multiple children of property element
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 50 column 39): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 50 column 39): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 53 column 34): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 53 column 34): {W102} Unqualified property attributes are not allowed. Property treated as a relative URI.
 ERROR [main] (RDFDefaultErrorHandler.java:40) - (line 54 column 39): {E201} Multiple children of property element
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 54 column 39): {W136} Relative URIs are not permitted in RDF: specifically <IRI>
 WARN [main] (RDFDefaultErrorHandler.java:36) - (line 54 column 39): {W102} Unqualified     property attributes are not allowed. Property treated as a relative URI.

<rdf:RDF
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" > 
</rdf:RDF> 
```

如果有人知道这里缺少什么，那就太好了。

感谢您的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:08:40.370

那不是 OWL RDF 文件。我认为语法是[OWL2 XML](http://www.w3.org/TR/owl2-xml-serialization/)，耶拿不支持。

您应该能够从 protege 输出 OWL RDF，或使用[此在线工具](http://owl.cs.manchester.ac.uk/converter/)进行转换。

# java - 在不使用 Math.abs() 的情况下查找数字的绝对值

> ID：11013187
> 
> 赞同：21
> 
> 时间：2012-06-13T10:42:52.727
> 
> 标签：java, number-formatting, absolute-value

有没有办法在不使用 java 中的 Math.abs() 方法的情况下找到数字的绝对值。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-13T11:00:12.193

如果您查看 Math.abs 内部，您可能会找到最佳答案：

例如，对于花车：

```
 /*
     * Returns the absolute value of a {@code float} value.
     * If the argument is not negative, the argument is returned.
     * If the argument is negative, the negation of the argument is returned.
     * Special cases:
     * <ul><li>If the argument is positive zero or negative zero, the
     * result is positive zero.
     * <li>If the argument is infinite, the result is positive infinity.
     * <li>If the argument is NaN, the result is NaN.</ul>
     * In other words, the result is the same as the value of the expression:
     * <p>{@code Float.intBitsToFloat(0x7fffffff & Float.floatToIntBits(a))}
     *
     * @param   a   the argument whose absolute value is to be determined
     * @return  the absolute value of the argument.
     */
    public static float abs(float a) {
        return (a <= 0.0F) ? 0.0F - a : a;
    } 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-13T10:44:26.910

是的：

```
abs_number = (number < 0) ? -number : number; 
```

对于整数，这很好用（除了`Integer.MIN_VALUE`，其绝对值不能表示为`int`）。

对于浮点数，事情就更微妙了。例如，此方法——以及迄今为止发布的所有其他方法——将无法正确处理[负零](http://en.wikipedia.org/wiki/Signed_zero)。

为了避免自己处理这些微妙之处，我的建议是坚持使用[`Math.abs()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#abs%28double%29).

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-13T10:44:03.383

像这样：

```
if (number < 0) {
    number *= -1;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-13T13:01:13.603

由于 Java 是一种静态类型的语言，我希望采用 int 的 abs 方法返回一个 int，如果它期望一个 float 返回一个 float，对于一个 Double，返回一个 Double。也许它可以总是为双打和双打等返回装箱或未装箱的类型。

因此，每种类型都需要一个方法，但现在出现了一个新问题：对于 byte、short、int、long，负值的范围比正值的范围大 1。

那么该方法应该返回什么

```
byte abs (byte in) {
   // @todo
} 
```

如果用户在 -128 上调用 abs？您总是可以返回下一个更大的类型，以保证范围适合所有可能的输入值。这将长期导致问题，其中不存在正常的更大类型，并使用户在测试后总是降低值 - 可能很麻烦。

第二个选项是抛出一个算术异常。这将防止在已知输入受限的情况下强制转换和检查返回类型，这样 X.MIN_VALUE 就不会发生。想想 MONTH，表示为 int。

```
byte abs (byte in) throws ArithmeticException {
   if (in == Byte.MIN_VALUE) throw new ArithmeticException ("abs called on Byte.MIN_VALUE"); 
   return (in < 0) ? (byte) -in : in; 
} 
```

“让我们忽略 MIN_VALUE 的罕见情况”的习惯不是一种选择。首先使代码工作 - 然后使其快速。如果用户需要一个更快但有问题的解决方案，他应该自己编写。可能可行的最简单的解决方案意味着：简单，但不要太简单。

由于代码不依赖于状态，该方法可以而且应该是静态的。这允许快速测试：

```
public static void main (String args []) {
    System.out.println (abs(new Byte ( "7")));
    System.out.println (abs(new Byte ("-7")));
    System.out.println (abs((byte)  7));
    System.out.println (abs((byte) -7));
    System.out.println (abs(new Byte ( "127")));
    try
    {
        System.out.println (abs(new Byte ("-128")));
    }
    catch (ArithmeticException ae)
    {
        System.out.println ("Integer: " + Math.abs (new Integer ("-128")));
    }
    System.out.println (abs((byte)  127));
    System.out.println (abs((byte) -128));
} 
```

我捕获了第一个异常并让它运行到第二个，只是为了演示。

编程中有一个坏习惯，那就是程序员更关心快速而不是正确的代码。太遗憾了！

* * *

如果你好奇为什么负值比正值多一个，我有一张[图表给你](https://stackoverflow.com/a/5624352/312172)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-01T16:31:18.053

虽然这不应该是一个瓶颈，因为现代处理器上的分支问题通常不是问题，但对于整数，您可以使用此处概述的无分支解决方案：http: [//graphics.stanford.edu /~seander/bithacks.html#IntegerAbs](http://graphics.stanford.edu/~seander/bithacks.html#IntegerAbs)。

```
(x + (x >> 31)) ^ (x >> 31); 
```

但是，在明显的 Integer.MIN_VALUE 情况下，这确实会失败，因此这是一种使用风险自负的解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-31T15:56:16.323

如果整数 x 的绝对值不使用 Math.abs()、条件或按位运算，以下可能是 Java 中的一种可能解决方案。

```
(int)(((long)x*x - 1)%(double)x + 1); 
```

因为 Java 将`a%b`视为`a - a/b * b`，所以无论“b”是什么符号，结果的符号都将与“a”相同；`(x*x-1)%x`将等于`abs(x)-1`；“long”的类型转换是为了防止溢出并`double`允许除以零。

同样，`x = Integer.MIN_VALUE`由于减 1 会导致溢出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T10:45:21.633

您可以使用 ：

```
abs_num = (num < 0) ? -num : num; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-13T10:47:48.207

这是一个返回数字绝对值的单行解决方案：

```
abs_number = (num < 0) ? -num : num; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-07T13:47:27.963

-num 将等于 Integer.MIN_VALUE 的 num 为

```
 Integer.MIN_VALUE =  Integer.MIN_VALUE * -1 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-19T14:31:19.113

使用数学类

```
Math.abs(num); 
```

# python - 查找两个字符串不同的位置

> ID：11013196
> 
> 赞同：2
> 
> 时间：2012-06-13T10:43:24.850
> 
> 标签：python, string, algorithm, pattern-matching, nltk

我有两个非常长的单词序列。

我需要找到它们不同的地方。例如，如果输入是

```
1st sequence: A B C D E F G
2nd sequence: A X D Y Z W G 
```

（这里的每个字符代表一个单词）

输出应该是：

```
B C -> X
E F -> Y Z W 
```

我的想法是：我可以对两个序列都有一个索引。最初，两者都指向 A。增加两个索引。现在第一个索引指向 B，第二个指向 X。我现在可以在整个第二个序列中搜索 B。没有找到它，我可以在整个第二个序列中搜索 C，然后搜索 D。我会找到一个 D，然后因此可以解决问题。

显然，这种‘蛮力’的方法是很可怕的。

什么是更好的方法？

我正在用 Python 编写代码，并使用 NLTK，所以如果可以使用内置的 NLTK 功能部分或完全解决这个问题，它会更快（实现）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T10:57:11.917

`[difflib](http://docs.python.org/dev/library/difflib.html).[SequenceMatcher](http://docs.python.org/dev/library/difflib.html#difflib.SequenceMatcher).[get_opcodes](http://docs.python.org/dev/library/difflib.html#difflib.SequenceMatcher.get_opcodes)`可以做到这一点。

```
import difflib

def diff(a, b):
    for tag, i1, i2, j1, j2 in difflib.SequenceMatcher(a=a, b=b).get_opcodes():
        if tag!='equal':
            yield a[i1:i2], b[j1:j2]

>>> d = list(diff('A B C D E F G'.split(), 'A X D Y Z W G'.split()))
>>> d
[(['B', 'C'], ['X']), (['E', 'F'], ['Y', 'Z', 'W'])]
>>> '\n'.join('{} -> {}'.format(*(' '.join(i) for i in l)) for l in d)
B C -> X
E F -> Y Z W 
```

* * *

旧答案 - 等效功能：

```
import difflib

def diff(a, b):
    add, remove = [], []
    for line in difflib.ndiff(a, b):
        d, line = line[0], line[2:]
        if d in '+-':
            (add if d=='+' else remove).append(line)
        elif add or remove:
            yield remove, add
            add, remove = [], []
    if add or remove:
        yield remove, add 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:45:03.070

这是经典的编辑距离问题。我只是让你谷歌它并了解它是如何工作的。这个不需要代表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:58:16.110

[查看Levenstein distance wikipedia page](http://en.wikipedia.org/wiki/Levenshtein_distance#Computing_Levenshtein_distance)上的伪代码示例。可以轻松修改此示例以满足您的需要。

# nosql - 使用 HBase shell 扫描 HTable 行以获取特定列值

> ID：11013197
> 
> 赞同：38
> 
> 时间：2012-06-13T10:43:28.733
> 
> 标签：nosql, hbase

我想从**hbase shell**扫描 HTable 中的行，其中列族（即 Tweet）具有特定值（即 user_id）。

现在我想找到 tweet:user_id 具有值的所有行，`test1`因为该列具有值`'test1'`

```
column=tweet:user_id, timestamp=1339581201187, value=test1 
```

虽然我可以扫描表以查找特定用途，

```
scan 'tweetsTable',{COLUMNS => 'tweet:user_id'} 
```

但我没有找到任何方法来扫描一行以获取值。

是否可以通过 HBase Shell 做到这一点？

我也检查了[这个问题](https://stackoverflow.com/questions/8189451/how-to-scan-for-a-particular-column-value-in-hbase)。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-25T21:05:57.970

没有 Hive 是可能的：

```
scan 'filemetadata', 
     { COLUMNS => 'colFam:colQualifier', 
       LIMIT => 10, 
       FILTER => "ValueFilter( =, 'binaryprefix:<someValue.e.g. test1 AsDefinedInQuestion>' )" 
     } 
```

注意：为了查找包含**test1**作为问题中指定值的所有行，请在过滤器中使用**binaryprefix:test1** （有关更多示例，请参见此[答案）](https://stackoverflow.com/a/36585239/2777965)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-10-03T10:15:58.920

Nishu，这是我定期使用的解决方案。它实际上比你现在需要的强大得多，但我认为你有一天会使用它的力量。是的，它适用于 HBase shell。

```
import org.apache.hadoop.hbase.filter.CompareFilter
import org.apache.hadoop.hbase.filter.SingleColumnValueFilter
import org.apache.hadoop.hbase.filter.SubstringComparator
import org.apache.hadoop.hbase.util.Bytes

scan 'yourTable', {LIMIT => 10, FILTER => SingleColumnValueFilter.new(Bytes.toBytes('family'), Bytes.toBytes('field'), CompareFilter::CompareOp.valueOf('EQUAL'), Bytes.toBytes('AAA')), COLUMNS => 'family:field' } 
```

仅`family:field`返回应用了过滤器的列。可以改进此过滤器以执行更复杂的比较。

这里还有一些我认为最有用的提示：

*   [http://hadoop-hbase.blogspot.com/2012/01/hbase-intra-row-scanning.html](http://hadoop-hbase.blogspot.com/2012/01/hbase-intra-row-scanning.html) - 行内扫描解释（Java API）。
*   [https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/filter/FilterBase.html](https://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/filter/FilterBase.html) - FilterBase 类的 JavaDoc，带有指向实际上可以使用相同样式的后代的链接。好的，shell 语法会略有不同，但有上面的例子你可以使用它。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-04-12T22:30:58.567

由于有多个要求解释[此答案](https://stackoverflow.com/a/12591051/2777965)，因此已发布此附加答案。

**示例 1**

如果

```
scan '<table>', { COLUMNS => '<column>', LIMIT => 3 } 
```

会返回：

```
ROW     COLUMN+CELL
ROW1    column=<column>, timestamp=<timestamp>, value=hello_value
ROW2    column=<column>, timestamp=<timestamp>, value=hello_value2
ROW3    column=<column>, timestamp=<timestamp>, value=hello_value3 
```

然后这个过滤器：

```
scan '<table>', { COLUMNS => '<column>', LIMIT => 3, FILTER => "ValueFilter( =, 'binaryprefix:hello_value2') AND ValueFilter( =, 'binaryprefix:hello_value3')" } 
```

会返回：

```
ROW     COLUMN+CELL
ROW2    column=<column>, timestamp=<timestamp>, value=hello_value2
ROW3    column=<column>, timestamp=<timestamp>, value=hello_value3 
```

**示例 2**

*如果不*支持：

```
scan '<table>', { COLUMNS => '<column>', LIMIT => 3, FILTER => "ValueFilter( !=, 'binaryprefix:hello_value2' )" } 
```

会返回：

```
ROW     COLUMN+CELL
ROW1    column=<column>, timestamp=<timestamp>, value=hello_value
ROW3    column=<column>, timestamp=<timestamp>, value=hello_value3 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-02-18T16:28:02.680

在表 t1 中对值 BIGBLUE 进行文本搜索的示例，列族为 d:a_content。扫描表格将显示所有可用值：-

```
scan 't1'
...
column=d:a_content, timestamp=1404399246216, value=BIGBLUE
... 
```

要仅搜索限制为 1 的 BIGBLUE 值，请尝试以下命令：-

```
scan 't1',{ COLUMNS => 'd:a_content', LIMIT => 1, FILTER => "ValueFilter( =, 'regexstring:BIGBLUE' )" }

COLUMN+CELL
column=d:a_content, timestamp=1404399246216, value=BIGBLUE 
```

显然，删除限制将显示该表/cf 中的所有事件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-17T12:55:40.187

要根据任何列值扫描 hbase 中的表，SingleColumnValueFilter 可以用作：

```
scan 'tablename' ,
   { 
     FILTER => "SingleColumnValueFilter('column_family','col_name',>, 'binary:1')" 
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T12:38:14.760

从 HBAse shell 我认为这是不可能的，因为它有点像我们使用的查询想要查找特定数据。我们都知道 HBAse 是 noSQL，所以当我们想要应用查询或者如果我们有像你这样的案例时，我认为你应该使用 Hive 或 PIG，因为 Hive 是安静的好方法，因为在 PIG 中我们需要弄乱脚本。[无论如何，您可以从这里HIVE 与 HBase 的集成](http://www.slideshare.net/ydn/hive-with-h-base)以及从[这里](http://www.slideshare.net/hadoopusergroup/hive-h-basehadoopapr2010)
获得有关 hive 的良好指导 如果您的唯一目的是查看数据而不是从（任何客户端的）代码中获取，那么您可以使用 HBase Explorer 或一个新的非常好的产品，但是它在其 beta 版本中是“HBase manager”。您可以从[HBase 管理器获取此信息](http://sourceforge.net/projects/hbasemanagergui/?source=directory)

它很简单，更重要的是，它有助于插入和删除数据，像其他 DBclient 一样从 UI 中对列限定符应用过滤器。试试。
我希望它对你有帮助:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-07T19:51:13.200

略有不同的问题，但如果您想查询并非所有行中都存在的特定列，那么`DependentColumnFilter`您最好的朋友是：

```
import org.apache.hadoop.hbase.filter.DependentColumnFilter
scan 'orgtable2', {FILTER => "DependentColumnFilter('cf1','lan',false,=,'binary:fre')"} 
```

先前的扫描将返回所有列，其中 `lan`列存在并且其关联值等于`fre`。第三个参数是`dropDependentColumn`并且如果设置为 ，将阻止`lan`列本身显示在结果中`true`。

# c# - 获取函数的名称 泛型类型参数

> ID：11013203
> 
> 赞同：0
> 
> 时间：2012-06-13T10:43:58.920
> 
> 标签：c#, generics

我使用 Func 作为要在 Linq 语句中的 GroupBy 操作中使用的方法的参数。TSource 是 IFoo，TKey 是 IFoo 的属性，例如 IFoo.Number，使我的 Func 参数看起来像：

```
foo => foo.Number 
```

到现在为止还挺好。但是，现在我正在尝试获取 TKey 的字符串表示形式，或者更确切地说，我正在尝试从 Func<> 参数中哄骗字符串“Number”。

可以做到吗？如果可以，怎么做？先谢谢大家了。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:51:36.563

你不能使用 Func，你需要一个类型的参数`Expression<Func<TSource, TKey>>`

并在 Expression 的 Body 上工作。

当你需要函数时，只需编译表达式。

从表达式中获取名称： [从 lambda 表达式中检索属性名称](https://stackoverflow.com/questions/671968/retrieving-property-name-from-lambda-expression)

# iphone - iphone - 动态创建充满 NSMutableArrays 的 NSMutableDictionary

> ID：11013206
> 
> 赞同：1
> 
> 时间：2012-06-13T10:44:05.217
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有一个对象数组。每个对象都有属性“日期”和“标题”。我想填充`UITableView`这些项目，如：

```
Section 1 - 2012.06.12 (taken from object.date)
  Cell 1.1: Title 1 (taken from object.name)
  Cell 1.2: Title 2
  Cell 1.3: Title 3
  ...
Section 2 - 2012.06.13
  Cell 2.1: Title 1
  Cell 2.2: Title 2
  ..
Section 3 .. 
```

我可以通过为所有组合手动创建*1..n* NSMutableArrays并用值`date`填充它们来做到这一点。`object.name`但问题是我不知道有多少`date`组合，所以应该动态完成。此外，该`date`属性可以在不同的对象中重复我的对象结构是：

```
Object
 -NSDate - date
 -NSString - title 
```

**更新**：

我在想是否可以创建 NSDictionary，其中键是我的日期，对象是 NSArray，它包含我所有的关键日期项目。但我不知道如何动态地做到这一点。

我希望我足够清楚地解释了我的问题。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:12:14.300

您可以根据日期创建数组。您有对象数组，因此遍历此对象数组以获得不同的日期，如下所示：

```
for(int i =0;i<[objectsArr count];i++)
{
   if(![newDateArr containsObject:[objectsArr objectAtIndex:i].date])
   {
      [newDateArr addObject:[objectsArr objectAtIndex:i].date];
   }
   NSMutableArray *newTitleArray = [newTitleDictionary objectForKey:@"[objectsArr objectAtIndex:i].date"];
   if(newTitleArray != nil)
   {
      [newTitleArray addObject:[objectsArr objectAtIndex:i].title];
   }
   else
   {
      newTitleArray = [[[NSMutableArray alloc] init] autorelease];
      [newTitleArray addObject:[objectsArr objectAtIndex:i].title];
   }
   [newTitleDictionary setValue:newTitleArray forKey:@"[objectsArr objectAtIndex:i].date"];
} 
```

其中 newTitleDictionary 和 newDateArr 在此方法之外声明。现在您可以同时使用 newTitleDictionary 和 newDateArr 来填充 tableview。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:54:57.260

如果我理解正确，您想将一个对象放入一个数组中，然后使用该数组填充一个表格视图？

每次只需将日期对象添加到 NSMutableArray。

```
[myArray addObject:dateObject]; 
```

然后在填充表格视图时..

```
DateObject *newDateObj = [myArray objectAtIndex:index]; 
```

我希望这会有所帮助，我理解你的问题

**编辑**现在回答我明白了一点。

**第 1 步** 检查现有的日期数组，看看是否有任何匹配的可能通过使用 for 循环遍历它。在线搜索如何比较 NSDate。

**第 2 步**如果它**不**匹配，则将其作为一个数组插入到数组中，该数组只有它自己的日期，因此数组计数将为 1。如果它**确实**匹配，则将它与使数组计数为 2 或更多的那个一起插入到数组中。

**第 3 步**在声明表的部分数量时，只需返回 dateHolderArray 计数。

**第 4 步**在声明每个部分中的行数时，返回 dateHolderArray 中的数组的数组计数。

**第 5 步**在使用信息填充单元格时显示内容。它只是使用节 id 和行 id 从数组中获取日期的任务。

我就是这样做的，可能还有很多其他方法。任何问题只要问

# javascript - 如何使用切换？

> ID：11013207
> 
> 赞同：0
> 
> 时间：2012-06-13T10:44:09.150
> 
> 标签：javascript, jquery, html

```
<table border=2>
    <tr>
        <td class="here" one="lorem" two="ipsum"> click </td>
        <td class="here" one="aaa" two="bbb"> click </td>
    </tr>
</table>

$('.here').click(function(){
  $(this).html($(this).attr('one'));
}) 
```

[http://jsfiddle.net/uzhru/](http://jsfiddle.net/uzhru/)

如何修改此 javascript 以进行功能切换或其他解决方案？我想要 - 如果我点击 TD，那么这会显示属性一，如果我接下来单击，那么这会显示属性二、下一个、下两个等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:47:17.947

```
$('.here').click(function(){
  if($(this).html() == $(this).attr('one'))
    $(this).html($(this).attr('two'));
  else 
    $(this).html($(this).attr('one'));
})​ 
```

[演示](http://jsfiddle.net/Nps8B/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:57:35.530

ocanal 的回答完美，但我想我想补充一点，这也可以做到`toggle`，当给定两个函数时，每次点击都会在它们之间切换：

```
$(".here").toggle(function() {
    $(this).html($(this).attr('one'));
}, function() {
    $(this).html($(this).attr('two'));
}); 
```

[http://jsfiddle.net/7pUS4/](http://jsfiddle.net/7pUS4/)

# jquery - jquery用淡入/淡出替换表中的行

> ID：11013209
> 
> 赞同：1
> 
> 时间：2012-06-13T10:44:14.997
> 
> 标签：jquery

我有一个表，我想在 ajax 更新完成后更新其中的一行。这些行都有一个 id，它是订单的行号。我尝试了各种各样的事情，但没有快乐。

这是当前命令...

```
wsHtml += '<tr id="idLine'+data[0].ORDS1_LINE+'">';
wsHtml += '<td class="RightNoWrap"  >' + data[0].ORDS1_LINE + '</td>';
.....
wsHtml += '</tr>';

$('#idLine'+data[0].ORDS1_LINE).fadeOut(1000,function(){ $(this).html(wsHtml).fadeIn(1000); }); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:54:45.090

您最好`<tr>`从 DOM 中完全删除旧的，并在其位置添加一个新的。这应该有效：

```
var the_new_row = $('<tr id="idLine'+data[0].ORDS1_LINE+'">\
                         <td class="RightNoWrap"  >' + data[0].ORDS1_LINE + '</td>\
                     </tr>');

$('#idLine' + data[0].ORDS1_LINE).fadeOut(1000, function() { 
    the_new_row.insertAfter($(this)).hide();
    $(this).remove();
    the_new_row.fadeIn(1000);
}); 
```

这是一个 jsFiddle > [http://jsfiddle.net/ckvgu/](http://jsfiddle.net/ckvgu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:57:57.560

wsHtml 应该只包含元素的 innerHTML。所以你不需要附加 tr 标签，

如果您的代码有效，您可以获得这样的结果，

```
<tr id="idLine223">
<tr id="idLine223">
<td class="RightNoWrap">223</td>
</tr>
</tr> 
```

**解决方案：**

删除附加 tr 标记的行。

```
wsHtml += '<td class="RightNoWrap"  >' + data[0].ORDS1_LINE + '</td>';
..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:53:52.087

TR 行不能直接设置动画。我建议您执行以下步骤：

1.  动态创建一个具有相同样式的单行表，并将其放置在应该动画的行上。

2.  `.contents()`用jQuery的方法获取行的内容，

3.  将内容附加到新创建的表中
4.  动画和更改此表的内容，
5.  然后将内容重新绑定到其相关行并删除临时表。

# blackberry - 异常“记录了已弃用的 API 访问：UiApplication.popScreen()”是什么意思

> ID：11013210
> 
> 赞同：1
> 
> 时间：2012-06-13T10:44:22.057
> 
> 标签：blackberry

当我单击弹出菜单中的 ListField 时，它给出了这个异常“记录了已弃用的 API 访问：UiApplication.popScreen()”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:50:11.930

您正在使用不推荐使用的方法。使用UiApplication的[popScreen](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/UiApplication.html) [(net.rim.device.api.ui.Screen)](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/UiApplication.html#popScreen%28net.rim.device.api.ui.Screen%29)而不是.`popScreen()`

> `public final void popScreen(Screen screen)`
> 
>     从显示堆栈中删除屏幕，并更新屏幕。
> 
>     **指定者：**
> 
>         [`popScreen`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/UiEngine.html#popScreen%28net.rim.device.api.ui.Screen%29)在界面中[`UiEngine`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/UiEngine.html)
> 
>     **参数：**
> 
>         `screen`-[`Screen`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Screen.html)删除。
> 
>     **抛出：**
> 
>         [`IllegalArgumentException`](http://www.blackberry.com/developers/docs/6.0.0api/java/lang/IllegalArgumentException.html)- 如果您的屏幕不在堆栈上。

# c# - .NET 手动重置事件

> ID：11013212
> 
> 赞同：5
> 
> 时间：2012-06-13T10:44:29.023
> 
> 标签：c#, .net, multithreading

在下面的代码中，Main 函数等待设置手动复位事件 (mre)。但是，在**等待**开始之前，同步对象已经被其他线程设置为信号状态。

那么，等待“已经发出信号的同步对象”是否安全？

```
class Program
{
    static void Main(string[] args)
    {
        ManualResetEvent mre = new ManualResetEvent(false);
        ThreadPool.QueueUserWorkItem(new WaitCallback(Func), mre);
        Thread.Sleep(1500);
        mre.WaitOne(100000); // Waiting for already signaled object
        Console.WriteLine("Wait Completed");
    }

    public static void Func(object state)
    {
        ManualResetEvent mre = (ManualResetEvent)state;
        mre.Set();
        Console.WriteLine("Mre Is Set");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T10:48:56.900

是的。如果它已经发出信号，则不会有任何等待。没关系。

实际上，如果您查看 的返回值，`WaitOne(int)`您会发现`true`如果它已经设置（或在超时之前设置），并且`false`如果它没有在您的超时值内设置，它会返回。

这种区别有时很重要，因此请注意存在返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:48:57.610

是的，代码还在继续。

# ruby-on-rails-3.1 - Kaminari分页后如何获得总计数

> ID：11013219
> 
> 赞同：53
> 
> 时间：2012-06-13T10:45:03.287
> 
> 标签：ruby-on-rails-3.1, kaminari

我正在使用导轨 3.2。我正在使用 .page(1).per_page(10) 对结果进行分页

喜欢

```
@users = User.method().page(1).per_page(10) 
```

现在如何从分页中找到用户总数

因为从第一页`@users.count`给出**10**而不是总数

即使在分页后如何获取**用户总数**

编辑：`@users.total_count`给出整个分页计数

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-11-05T13:57:53.000

如问题中所述，您可以通过以下方式获取记录总数

```
@users.total_count 
```

为了完整起见，我将其添加为答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:45:50.307

User.count 会给你计数，但它会击中数据库。如果你使用 mongodb @user.length 会给你总数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-22T19:44:14.940

您可以使用`total_count`.

但是，如果您尝试获取每个页面的总数，例如：

`20 of 135 results`

然后`total_count`将只返回 135，而不是页面上的结果数。

如果您想处理这种情况以及结果数小于分页结果数的情况，那么我会采用这样的方法：

```
(per_size > @users.total_count) ? @users.total_count : per_size 
```

`per_size`您为`per`范围设置的值在哪里（此处的[文档](https://github.com/kaminari/kaminari#the-per-scope)）。

# jsf - 隐藏 facelet 模板 ui:include 的组件？

> ID：11013223
> 
> 赞同：1
> 
> 时间：2012-06-13T10:45:29.113
> 
> 标签：jsf, components, hide, facelets, uiinclude

如何隐藏包含在模板中的 facelets 组件？

在我的 template.xhtml 中：

```
<h:form id="mainForm">    
<div style="overflow:hidden; width:1020px; height:565px; overflow-x:hidden; " >
        <ui:include src="menuSharepoint.xhtml" styleClass="hide" />     
    <ui:insert name="body">Default Body</ui:insert>
</div>
<div style="width: 1000px; height: 6px; float: left"></div>
</h:form> 
```

我试图隐藏 ui:include menuSharepoint.xhtml。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:02:02.973

你可以用一个具有可控`rendered`属性的组件包围它：

```
<h:panelGroup rendered="false">
  <ui:include src="menuSharepoint.xhtml"/>
</h:panelGroup> 
```

还可以将渲染设置为 EL 表达式，如`rendered="#{myBean.menuVisible}"`.

# java - OpenGL-JOGL 颜色

> ID：11013224
> 
> 赞同：1
> 
> 时间：2012-06-13T10:45:30.200
> 
> 标签：java, opengl, graphics

我正在制作的 JOGL 中的 OpenGL 中的简单 2D 游戏存在一些问题。我在这个游戏中映射了一些纹理。当我想用某种颜色（无纹理）渲染一些图形对象（fe Guads）时，我使用 procedure `glColor3d(x,x,x)`。对象得到这种颜色，但所有其他纹理都用这种颜色着色。我只想为一个图形对象设置颜色，但此过程为所有渲染的对象设置颜色阴影。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:49:28.073

正如您已经注意到的那样，`glColor3*`还会更改纹理的颜色。有两种方法可以解决您的问题：

1.  `glColor3d(1.0, 1.0, 1.0);`在渲染纹理对象之前调用
2.  使用`glPushAttrib()`/ `glPopAttrib()`pair 来存储图纸属性。

无论如何，以上所有功能都已被弃用 - 您可能想查看有关新 OpenGL 的教程。

# javascript - Javascript onclick 事件在每次点击时将不同的文本写入元素

> ID：11013225
> 
> 赞同：0
> 
> 时间：2012-06-13T10:45:31.770
> 
> 标签：javascript, onclick

我可以使用哪些 Javascript 代码写入 HTML DOM？我想创建一个按钮，每次单击它时，它都会将不同的文本写入文档元素？例子;

第一次点击：

```
document.getElementById("paragraph").innerHTML= "This is is the initial text." 
```

第二次点击：

```
document.getElementById("paragraph").innerHTML= "This text replaces the initial text" 
```

第三次点击：

```
document.getElementById("paragraph").innerHTML= "This text replaces the text from the second click" 
```

等等等等……

所有没有提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:49:59.457

创建一个包含所有可用文本行的数组。

然后单击按钮，生成一个随机数并用数组中的索引值替换。

```
var contentArray = ["This is is the initial text.", "This text replaces the initial text",    "This text replaces the text from the second click"],
length = countArray.length;

$(btn).bind('click',function(){
  var randomNumber = Math.floor(Math.random()*length);
  document.getElementById("paragraph").innerHTML = contentArray[randomNumber];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:47:25.900

将所有文本选项添加到数组中。

设置一个随每次点击计数的变量。

使用计数器的编号从数组中调用文本。

一些代码：

```
var counter = 0;
var theArray = new Array("This is is the initial text.", "This text replaces the initial text", "This text replaces the text from the second click");

function clicked(){
   document.getElementById("paragraph").innerHTML= theArray[counter++];
} 
```

# actionscript-3 - 将两个声音文件合并为一个新文件

> ID：11013227
> 
> 赞同：0
> 
> 时间：2012-06-13T10:45:46.580
> 
> 标签：actionscript-3, apache-flex, flash-cs5, flex4.6

如何合并两个声音并另存为新文件？一种声音是加载的 mp3 文件，另一种来自麦克风。然后我需要将此声音上传到服务器。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:24:36.640

这一切都可以完成，但如果你看一个简单的例子，调用的方法很少，恐怕不是那么容易。

[您可以使用Sound.extract()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#extract%28%29)从声音中提取字节。该数据是 16 位数字的声音幅度，左右声道交错。使用 ByteArray.readShort() 来获取它们。

可以使用 SampleDataEvent.SAMPLE_DATA 捕获麦克风数据，[请参见此处的示例](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d1d.html)。要将它们与歌曲混合，只需添加声音幅度并将结果写入第三个数组。结果将本质上是 WAV 格式（没有标题）解包的声音数据。您可以将其原始上传，或搜索“as3 mp3 编码器”（谷歌），但这些东西很少见，并且是由爱好者编写的，所以*也许*您可以让它们工作。此外，要正确混合声音，来自麦克风和声音文件的数据频率必须相等。

并上传部分 - 如果这是磁盘上的文件，这将很容易 - `FileReference.upload()`。但是内存中只有数据。所以你可以查看[Socket](http://help.adobe.com/en_US/Flash/CS5/AS3LR/flash/net/Socket.html)类来发送它。

# spring - spring bean通过属性连接以不同方式初始化实例

> ID：11013228
> 
> 赞同：1
> 
> 时间：2012-06-13T10:45:46.800
> 
> 标签：spring

我在属性文件中有以下属性：

```
context1.property1=value1
context1.property2=value2
context1.property3=value3

context2.property1=value4
context2.property2=value5
context2.property3=value6 
```

我有一个具有以下结构的bean：

```
class Bean {
private property1;
private property2;
private property3;
} 
```

有没有更好的方法来初始化 Bean 的 2 个实例而无需编写如下内容：

```
<bean id="bean1" class="com.test.Bean">
 <property name="property1" value="${context1.value1}" />
 <property name="property2" value="${context1.value2}" />
 <property name="property3" value="${context1.value3}" />
</bean>

<bean id="bean2" class="com.test.Bean">
 <property name="property1" value="${context2.value1}" />
 <property name="property2" value="${context2.value2}" />
 <property name="property3" value="${context2.value3}" />
</bean> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:51:11.817

看看[`PropertyOverrideConfigurer`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/factory/config/PropertyOverrideConfigurer.html)：

> 覆盖应用程序上下文定义中的 bean 属性值的属性资源配置器。它将属性文件中的值*推送到 bean 定义中。*
> 
> 配置行应采用以下形式：

```
beanName.property=value 
```

> 示例属性文件：

```
dataSource.driverClassName=com.mysql.jdbc.Driver
dataSource.url=jdbc:mysql:mydb 
```

# 也可以看看

*   [在 Spring 3 中将 PropertyOverrideConfigurer 与带注释的类一起使用](https://stackoverflow.com/questions/10034732)

# java - Java 泛型：参数化泛型类型

> ID：11013229
> 
> 赞同：0
> 
> 时间：2012-06-13T10:45:48.633
> 
> 标签：java, templates, generics

早上好，我正在编写一些 java 代码，我想做这样的事情：

```
public class MyClass <E, T extends MyInterface<T<E>>> { } 
```

这样，T 应该既是泛型又是实现 MyInterface 的类的实例，并且应该是 E 类型的参数。但在 Java 中似乎不可能，或者我解决问题的方法可能是错误的。提前致谢。

**更新：**

首先感谢所有回复的人，现在只是为了让事情清楚并让您了解我想要实现的目标，我想做一个通用 TDA 的通用容器。所以假设我们需要一个基于整数的堆栈容器，那么我需要写这样的东西：MyContainer，当然我需要为插入部分保持类型分离，否则我可以写 MyContainer>。此外，由于我所有的 TDA 都实现了 MyInterface，因此我也想将其设置为绑定。所以我猜

```
public class MyContainer < E, T extends MyInterface < E>> 
```

应该做的伎俩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:04:22.887

这没有意义。

```
public class MyClass <E, T extends MyInterface<T<E>>> { } 
```

因为最右边的 T。为什么要使用自身参数化一个类？我想你真正的意思是这样的：

```
public MyClass<E, T extends MyInterface<E>> 
```

这实质上意味着对于每个 MyClass，您需要一个 E 和一个 T MyInterface 实例，该实例又被参数化以与 E 一起使用。

我发现初学者可能会对泛型非常着迷，这会导致代码完全不可读。谨慎使用泛型，并考虑在每个给定实例中是否真的需要它们。如果您发现自己在编写具有多层嵌套泛型参数化的代码，那么您可能在设计方面做错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:13:45.457

基本上你正在尝试做这样的事情：

```
class MyClass<T<E>> // T has to be a generic class 
```

或这个：

```
class MyClass<T<Integer>> // T has to be a generic with Integer as parameter 
```

你不能也不应该这样做，因为它毫无意义。它没有告诉你任何关于 T 的有用信息。你可以像这样使用任何类作为 T：

```
DummyClass<T> extends Anything {};
MyClass<DummyClass<Integer>> myClass; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:48:27.657

好像应该是

```
public class MyClass <E, T extends MyInterface<E>> { } 
```

有`public class MyClass <E, T extends MyInterface<T<E>>> { }`

意思是`T`

应该是`MyInterface<MyInterface<E>>`这似乎不太可能。

编辑：

因此，如果您需要`MyInterface<Class1<Class2>>`，它似乎应该是这样的：

```
public class MyClass <A, B extends SomeClass<A>, C extends MyInterface<B> { } 
```

或者

```
public class MyClass <E, T extends MyInterface<SomeOtherClass<E>>> { } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:49:29.340

我不确定这是否是你想要的，但我认为它可能只是

```
MyClass<E, T extends MyInterface<E>> 
```

`T<E>`对我来说没有多大意义。

# android - 实现标签栏的正确方法

> ID：11013232
> 
> 赞同：0
> 
> 时间：2012-06-13T10:45:50.700
> 
> 标签：android, android-fragments, android-activity, android-tabhost

我已经浏览了一段时间的网页，并查看了如何实现标签栏的不同示例。

我遇到的问题是决定创建此功能的正确方法。似乎最常用的选项是拥有一个名为 MainActivity 或其他东西的主要活动，并使用片段作为选项卡。这一切都很好，我已经创建了一个这样的应用程序。

我遇到的问题是，对于这是否是来自 iOS 开发背景的正确方法，我有两种看法，由于这些选项卡具有不同的功能，它似乎并不正确。

任何指针都会很棒。

**编辑**我也研究了 ActionBarSherlock 但无法在项目中使用它，因为它不断出现错误，而且我找不到对我遇到的问题进行排序的线程。

迪斯科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:55:48.560

你应该使用片段，是的。这里有一个如何做到这一点的例子：http: [//developer.android.com/guide/topics/ui/actionbar.html#Tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

不过，此“仅”适用于作为操作栏一部分的选项卡。应该不是太大的问题，因为它们通常*应该*是您的操作栏的一部分。如果您对标签的位置不满意，您也可以手动移动标签，或者滚动您自己的看起来像标签的按钮。

请记住，Android 中的选项卡与 iOS 中的选项卡栏并不完全相同。它们看起来相似并且行为相似，但在它们应该如何使用方面存在细微的概念差异。不要将它们用于您的基本应用导航，而是用于在相似的“事物”之间切换。

但是，如果您想在 3.0 之前的设备上使用它，则必须使用 ActionBarSherlock。它工作正常，我们在几个项目中使用它，所以如果你在集成它时遇到问题，我建议为此创建一个新问题，我很乐意提供帮助。

# javascript - 位置感知

> ID：11013233
> 
> 赞同：0
> 
> 时间：2012-06-13T10:45:55.393
> 
> 标签：javascript

我有这个 javascript 代码，它获取位置列表并根据用户位置重新排序列表项。我如何更改代码，使其仅显示 1KM 附近的位置，而不仅仅是重新排序整个列表。

```
 <script type="text/javascript">
$(document).bind("mobileinit", function () {
$.mobile.ajaxEnabled = false;
});
</script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
<script>
function findMe() {
if (navigator.geolocation != undefined) {
navigator.geolocation.watchPosition(onFound, onError);
}
}
function onFound(pos) {
var userLat = pos.coords.latitude;
var userLong = pos.coords.longitude;
$('ol li').each(function (index) {
var locationLat = $(this).find('.lat').html();
var locationLong = $(this).find('.long').html();
var distance = getDistance(userLat, locationLat, userLong, locationLong);
$(this).data("distance", distance);
})

reOrder();
}

function onError(pos) {
alert("Something Went wrong");
}

function reOrder() {
$('ol li').sort(sortAlpha).appendTo('ol');
}

function sortAlpha(a, b) {
return $(a).data('distance') > $(b).data('distance') ? 1 : -1;
};

function getDistance(lat1, lat2, lon1, lon2) {
var R = 6371; // km
var d = Math.acos(Math.sin(lat1) * Math.sin(lat2) +
Math.cos(lat1) * Math.cos(lat2) *
Math.cos(lon2 - lon1)) * R;
return d;

}; 
</script>

<style>
ol .long, ol .lat
{
display: none;
}
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:55:21.813

你可以这样写：

```
function filterList(){
   $('ol li').each(function(){
      if($(this).data('distance') > 1){
        $(this).remove();
      }
   });
} 
```

您可以执行以下操作而不是上述解决方案？

```
function onFound(pos) {
   var userLat = pos.coords.latitude;
   var userLong = pos.coords.longitude;
   $('ol li').each(function (index) {
      var locationLat = $(this).find('.lat').html();
      var locationLong = $(this).find('.long').html();
      var distance = getDistance(userLat, locationLat, userLong, locationLong);
      if(Math.ceil(distance)>1){
         $(this).remove();
      }
      else{
         $(this).data("distance", distance);
      }
  });
 reOrder();
} 
```

您可以删除 filterList 功能。我希望它现在对你有用。

# javascript - 如何最大化和最小化 div

> ID：11013237
> 
> 赞同：9
> 
> 时间：2012-06-13T10:46:16.417
> 
> 标签：javascript, html, javascript-events

如何最大化和最小化 div。我可以根据需要调整 div 的大小吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-13T10:57:00.480

我想你需要这样的东西

[http://jsfiddle.net/miqdad/Qy6Sj/1/](http://jsfiddle.net/miqdad/Qy6Sj/1/)

您可以在 jsfiddle 中查看代码，这里是我所做的代码，它创建了一个 div，里面有另一个 div 作为标题栏和内容框

**html**

```
<div id="widnow">
    <div id="title_bar">
        <div id="button">-</div>
    </div>
    <div id="box">
    </div>
</div> 
```

**css**

```
#widnow{
    width:400px;
    border:solid 1px;
}

#title_bar{
    background: #FEFEFE;
    height: 25px;
    width: 100%;
}
#button{
    border:solid 1px;
    width: 25px;
    height: 23px;
    float:right;
    cursor:pointer;
}
#box{
    height: 250px;
    background: #DFDFDF;
} 
```

**jQuery**

```
$("#button").click(function(){
    if($(this).html() == "-"){
        $(this).html("+");
    }
    else{
        $(this).html("-");
    }
    $("#box").slideToggle();
}); 
```

# maven - 镜像ID在maven中是否应该是唯一的

> ID：11013240
> 
> 赞同：-1
> 
> 时间：2012-06-13T10:46:24.440
> 
> 标签：maven

如果我在 settings.xml 文件中有两个具有相同 id 的镜像会发生什么？

会考虑哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:11:33.493

它不会做超过 1 个回购。您甚至可以使用它来拥有具有相同凭据的不同镜像。

但是考虑一下你可以自己做......这是一个微不足道的问题，需要 1 分钟 + 构建时间来自己测试。

尽管如此 ：

```
<mirrors>
    <mirror>
        <id>mirror.repo.myorg.fr</id>
        <mirrorOf>!tiers-providers-public-snapshots,*</mirrorOf>
        <name>Repository Artifactory for snapshots.</name>
        <url>http://mirror.repo.myorg.fr/artifactory/repo-snapsthot</url>
    </mirror>
    <mirror>
        <id>mirror.repo.myorg.fr</id>
        <mirrorOf>!tiers-providers-public,*</mirrorOf>
        <name>Repository Artifactory for realeases</name>
        <url>http://mirror.repo.myorg.fr/artifactory/repo</url>
    </mirror>
</mirrors> 
```

这是同一台机器，但有两个用于不同目的的镜子。我不确定这种情况会发生，但到目前为止还不是我自己的配置。

我试过了，它显然有效。

# c# - 比较两个函数的负载/性能

> ID：11013253
> 
> 赞同：2
> 
> 时间：2012-06-13T10:47:22.507
> 
> 标签：c#, asp.net, c#-4.0, testing, benchmarking

Iv 编写了一些 C# 代码，这些代码似乎花了不少时间，但完成了工作。然后我将代码重写为稍微快一点的版本，虽然速度不快（它是一个 cms 管理区域功能，因此对站点来说并不重要）

无论如何，它让我想到是否有任何工具/技术允许对 asp.net/C# 中的功能进行 a/b 测试

我基本上想提供两个功能，并获取每个功能的执行时间等。

有人遇到过任何工具吗？

有一个谷歌并在这里查看但找不到任何对两个函数进行基准测试的东西

我想我正在寻找 jsPerf 但在 vs2010 和 C#

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T11:29:05.220

您可以使用 ANTS Profiler [http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)（付费产品，但他们有试用版）或其他 Profiler 产品（ANTS、vTune、 OptimizeIt、DevPartner、YourKit、dotTrace）。

您也可以通过设置一些单元测试来自行测试这些功能，这些单元测试使用手动 StopWatch 检测来比较执行时间（更快且成本更低）来执行这两个功能。如果您以后需要更改实现，单元测试还可以确保您没有任何性能回归。[http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

```
 var stopWatch = new Stopwatch();
        stopWatch.Start();
        var result = CallFunction();
        stopWatch.Stop();
        var executionTime = stopWatch.Elapsed; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T10:52:33.710

任何分析器都会这样做。就像 RedGate 的 ANTS 分析器。

# c# - 绑定 observablecollection 到 wpf 数据网格

> ID：11013255
> 
> 赞同：0
> 
> 时间：2012-06-13T10:47:29.937
> 
> 标签：c#, wpf, xml, wpfdatagrid

我有一个包含 XML 节点的可观察集合，我想将它绑定到数据网格。

我知道我可能应该使用 XML dataprovider 来绑定，但我在滚动时遇到闪烁，所以我正在尝试一些不同的选项。

我正在尝试将定义的列绑定到 xml 中的不同项目。

XML:

```
<name>
    name1
</name>
<id>
    id1
</id> 
```

代码背后：

```
oc = new ObservableCollection<XmlNode>(listNodes);
dtgMain.ItemsSource = oc; 
```

XAML：

```
<DataGrid Grid.Row="0" x:Name="dtgMain" AutoGenerateColumns="false" RowHeight="25" IsReadOnly="True"  >
    <DataGrid.Columns>
        <DataGridTextColumn Header="Name" Binding="{Binding name}" Width="Auto" />
    </DataGrid.Columns>
    <DataGrid.Columns>
        <DataGridTextColumn Header="id" Binding="{Binding id}" Width="Auto" />
    </DataGrid.Columns>
</DataGrid> 
```

如果您需要更多信息，请告诉我。

# javascript - 使用 errback 有什么好处？

> ID：11013257
> 
> 赞同：5
> 
> 时间：2012-06-13T10:47:34.193
> 
> 标签：javascript, callback

程序员似乎对如何获得有关错误的异步通知存在分歧。

一些程序员更喜欢使用带有两个参数的回调：一个值和一个布尔值，用于判断该值是否正确。这样做的好处是它看起来像一个`try catch`语句：

```
asyncFunct(function (value, noError) {
    if (noError) {
        // success, do something with value
    } else {
        // value is the error which is thrown
    }
}); 
```

其他人更喜欢负数（即布尔值应该判断值是否错误）。他们的理由是，如果您知道异步函数永远不会抛出错误，那么您可以安全地省略第二个参数，如下所示：

```
asyncFunction(function (value, isErroneous) {
    if (!isErrorneous) {
        // success, do something with value
    } else {
        // value is the error which is thrown
    }
});

asyncFunction(function (value) {
    // success, do something with value
}); 
```

然后有人提出了异步函数成功执行的单独回调和异步函数错误执行的errbacks。这允许程序员选择是否要处理回调、errbacks、两者或不处理：

```
asyncFunction(function (value) {
    // success, do something with value
}, function (error) {
    // handle the error
});

asyncFunction(function (value) {
    // success, do something with value
});

asyncFunction(null, function (error) {
    // handle the error
}); 
```

我不是在问你喜欢哪种方法。我只是询问每种方法的优缺点，以便我知道何时使用哪种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T09:47:59.400

**设计决策：**

这只是设计决策，仅此而已。如果它是独立参数，您可以拥有独立功能并创建“更漂亮”的代码（对于某人 - 对于某人来说它更混乱 - 这真的很主观）。

**错误复杂度：**

在某些应用程序中，您可能会遇到更复杂的错误（`filesystem.fileRead`可以有 FILE_DONT_EXISTS、FILE_LOCKED、NOT_PERMISSIONS..），而在某些应用程序中，您只需抛出错误（`db.checkConnection`或`db.openConnection`）。

**顺序和区别：**

很棒的 AP​​I 的非常好的示例来自 Amazon，您可以查看它。[http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html)

**响应：**在异步函数上，比如`copyObject(params = {}, callback)`你有回调函数，它总是有 2 个参数：`err (Error)`和`data (Object)`in `function(err, data) { ... }`。错误被设计为第一个参数，因为如果有错误，就没有数据。所以这真的是关于优先级和顺序。

```
// request

getObject({
   param1 : something,
   param2 : something,
   param3 : something
}, callback);

// response

function callback(error, response){
   if error throw err;
   // now deal with responsei
} 
```

**如您所见，您有两种方式。在请求中，您传递对象和函数，作为响应，您得到错误和对象（到该请求函数）。**

# java - 包含多个值并转换为数组的映射的正确语法是什么

> ID：11013259
> 
> 赞同：0
> 
> 时间：2012-06-13T10:47:45.470
> 
> 标签：java, hibernate

它是正确的语法吗？该地图包含多个值并转换为数组。

```
criteria.add(Restrictions.like("os", "%"+( ((ArrayList<String>)map.get("os") ).toArray())+"%" ) ) 
```

它是正确的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:15:20.940

您需要遍历 map 中的条目，并为每个条目添加一个

```
 Restrictions.like("os", "%"+entry+"%" ) 
```

与那些一起加入

```
 Restrictions.or(...) 
```

使用完整的集合添加到条件中

```
 criteria.add 
```

# javascript - 单击已添加到页面的元素？

> ID：11013262
> 
> 赞同：1
> 
> 时间：2012-06-13T10:47:48.657
> 
> 标签：javascript, jquery

用户上传图片后，我会在页面上动态添加删除按钮。

```
$('.galleryImage .delete').bind('click', function() {

//do delete

} 
```

以上不起作用。

据我了解，这是因为删除按钮是在创建后添加到页面中的。

我试过了

```
$('body').on('click', '.galleryImage .delete', function() { 
```

但这仅适用于 jquery 1.7+，我需要使用 1.6。

有什么想法可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:48:40.963

正如您想在 jQuery 1.6 中使用的那样，您可以使用`.delegate()`事件处理。

```
$('.galleryImage').delegate('.delete', 'click', function() { 
```

但如果你使用 jquery 1.7 会更好

和`.on()`事件处理程序

```
$('.galleryImage').on('click', '.delete',function() { 
```

### 根据评论

如果`.galleryImage`是动态添加的，那么你应该使用一个`Static-element`是容器的容器`.galleryImage`，这意味着容器不应该是动态的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:49:55.120

使用`delegate()`：

```
$('.galleryImage').delegate('.delete', 'click', function() {
    //do delete
} 
```

`on()`如果您使用的是 jQuery 1.7+，或者使用委托选择器：

```
$('.galleryImage').on('click', '.delete', function() {
    //do delete
} 
```

如果`.galleryImage`元素也是动态添加的，则应使用与最近的非动态元素相关的选择器。

**不要使用`live()`！**它缓慢、过时且已弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:49:38.800

而不是`on`使用`delegate`或`live`方法

[http://api.jquery.com/live/](http://api.jquery.com/live/)
[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

# android - 此项目与您的设备不兼容 (Galaxy S3)

> ID：11013264
> 
> 赞同：2
> 
> 时间：2012-06-13T10:47:59.513
> 
> 标签：android, android-manifest, galaxy

我在 play.google.com 上发布了一个 Android 应用程序，我的应用程序清单设置是这样的；

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11"/>
<supports-screens android:smallScreens="true"
                  android:normalScreens="true"
                  android:largeScreens="false"
                  android:resizeable="false" 
                  android:anyDensity="true"/>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_UPDATES"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.VIBRATE" /> 
```

一切正常，但今天当我在 play.google.com 上使用 Galaxy S3 检查应用程序时，回复此消息：“此项目与您的设备不兼容”

银河 S3 规格；Android 4.0.4 不带simcard

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:55:17.380

感谢您的回答，问题只是关于我的设备（测试设备）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:51:23.363

尝试添加`android:xlargeScreens="true"`到`supports-screens`

Galaxy S3的分辨率为1280×720，算作`xlarge`/`xhdpi`

# c# - C# 中的计时器调用停止到文本框

> ID：11013267
> 
> 赞同：1
> 
> 时间：2012-06-13T10:48:10.450
> 
> 标签：c#

我正在使用 C# 2010 开发聊天软件，其中所有传入消息都由固定计时器接收。当我键入要发送给用户的任何消息时，并且在我的句子键入过程中，如果传入消息计时器呼叫来了，一切都会停止几秒钟，然后再次恢复。

有没有办法让计时器和输入到文本框独立？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:51:43.803

而不是 System.Forms.Timer 使用 System.Timers.Timer。System.Forms.Timer 将在 UI 线程中运行，而 System.Timers.Timer 在不同的线程中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:59:15.927

考虑一下，计时器可能不是最好的解决方案。

我建议使用某种消息传递系统。与 .NET 一起使用的 Windows 内置技术是 Microsoft 消息队列。

有一些现有的框架位于 MSMQ 之上，以使使用它更加舒适，例如[NServiceBus](http://nservicebus.com/)或开源[MassTransit](http://www.ohloh.net/p/masstransit)。

这将使接收与您的 UI 线程分离，并使您能够在客户端应用程序上获得响应更快的 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:11:44.603

虽然已经发布的建议都是针对同一个问题的，但是这里还没有直接提到你的应用程序挂起的实际原因。

简单地说，就是**在同一个线程中工作太多**。

在您的情况下，计时器事件在 UI 线程上处理并导致一些 CPU 负载，因此 UI 控件中的输入变慢，因为宝贵的 CPU 时间被占用`TimerTick`事件处理方法中发生的任何事情。

因此，解决方案是使用**多个**线程。

如果您需要保留计时器架构而不是使用 MSMQ（我仍然强烈建议），我建议您阅读这篇 MSDN 文章：为[您的基于 .NET 的应用程序提供具有多线程的快速响应式 UI](http://msdn.microsoft.com/en-us/magazine/cc300429.aspx)

这篇文章是“几天前的”，但这些原则在今天仍然绝对有效。

如果您使用的是 .NET 4.x 版本，您还可以使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)来更轻松地处理多个线程。

即将推出的 .NET 4.5 还提供了更加舒适的 await 和 asyc 关键字：[使用 Async 和 Await 进行异步编程](http://msdn.microsoft.com/en-us/library/hh191443%28v=vs.110%29.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:54:11.463

如果您使用的是 winforms，请尝试在单独的线程中获取消息

```
Thread thread = new Thread(new ThreadStart(GetMessage));
thread.Start();

public void GetMessage()
{
     //Message showing code goes here 
      Thread.Sleep(10000);
      GetMessage();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T10:54:26.237

您不需要独立的计时器，您需要计时器的功能。

在你的 timer.Tick 事件中添加这个

```
Task.Factory.StartNew( () =>
{
  //do what you need to do here ie.
      string something ="Hello";

      this.BeginInvoke( new Action(() =>
         {
             //update textbox here
             textBox1.Text=something;
         }));

 }); 
```

您将需要此命名空间

```
using System.Threading.Tasks; 
```

# ruby - 如何在 Ruby 中使用 IsNetworkAlive 函数（Win32API）？

> ID：11013269
> 
> 赞同：1
> 
> 时间：2012-06-13T10:48:20.430
> 
> 标签：ruby, winapi, watir

我需要为 Watir 使用这个函数，但它总是返回 1，即使我手动切断了连接。

```
require 'Win32API'

IsNetworkAlive = Win32API.new('sensapi.dll','IsNetworkAlive', nil, 'i')
boolean = IsNetworkAlive.call() 
```

不确定参数是否正确给出...

第一个是必需的 dll，根据[比尔盖茨的网站](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377522%28v=vs.85%29.aspx)，它是 sensapi.dll。第二个是我要实例化的函数的名称。IsNetWorkAlive，就是这样。第三是函数参数的类型。无，因此无。第4个是返回值的类型。嗯，它是布尔值，但 Ruby 确实有它。它应该是 0 或 1，所以我也许可以使用 int。

# watir - 无法在 Watir-Load 错误中使用 browser.send_keys("{tab}")

> ID：11013270
> 
> 赞同：0
> 
> 时间：2012-06-13T10:48:26.060
> 
> 标签：watir, watir-webdriver

我无法使用 Watir 识别富文本框。所以我试着用`browser.send_keys(“{tab}”)`tab键。但这会产生错误。我尝试卸载`ffi-1.0.10-x86-mingw32.gem`和安装 ffi –v 1.0.9 但这不起作用。我收到这样的错误：

```
irb(main):013:0> browser.send_keys("{tab}")
LoadError: cannot load such file -- ffi_c
        from C:/Ruby193/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.10-x86-mingw32/lib/ffi.rb:11:in `rescue in <top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.0.10-x86-mingw32/lib/ffi.rb:2:in `<top (required)>'
        from C:/Ruby193/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rautomation-0.7.2/lib/rautomation/adapter/win_32.rb:6:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rautomation-0.7.2/lib/rautomation/window.rb:67:in `const_get'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rautomation-0.7.2/lib/rautomation/window.rb:67:in `initialize'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-class.rb:456:in `new'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-class.rb:456:in `rautomation'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/ie-class.rb:475:in `send_keys'
        from (irb):13
        from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):014:0> 
```

我使用 Watir 3.0.0、Ruby 1.9.3。

宝石：

*   大十进制 (1.1.0)
*   建设者（3.0.0）
*   普通人 (3.0.0)
*   ffi (1.0.10 x86-mingw32)
*   锄头 (3.0.6)
*   io 控制台 (0.3)
*   json (1.5.4)
*   迷你测试（2.5.1）
*   nokogiri (1.5.3 x86-mingw32)
*   耙子 (0.9.2.2)
*   r自动化（0.7.2）
*   rdoc (3.9.4)
*   rubygems 更新 (1.8.24)
*   s4t-utils (1.0.4)
*   用户选择 (1.1.6.1)
*   瓦提尔 (3.0.0, 1.5.3)
*   水经典（3.0.0）
*   win32-api (1.4.8)
*   win32 进程 (0.6.5)
*   windows-api (0.4.1)
*   windows-pr (1​​.2.1)
*   xml-简单 (1.1.1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:01:49.067

尝试：

```
browser.send_keys :tab 
```

我相信 Watir 3.0 将 send_keys 方法更改为 Watir-Webdriver 中的方法 - 请参阅[http://watirmelon.com/tag/send_keys/](http://watirmelon.com/tag/send_keys/)

# android - 如何在android中的另一个类中访问其他类的对象

> ID：11013273
> 
> 赞同：0
> 
> 时间：2012-06-13T10:48:31.507
> 
> 标签：android, sqlite

如何在我的线程类中访问传递给 startindexing 方法的 sqlitedatabase 对象？

```
public void startindexing (SQLiteDatabase db) {
    new Thread() {
        public void run() {

            ContentValues values = new ContentValues();
            for (int i = 0; i < filelist.length-1; i++) {
                String cat = "O", ty;   
                values.put(NAME, filelist[i].getName());
                if (!filelist[i].isDirectory()) {
                                        ty = filelist[i].getName().substring(filelist[i].getName().lastIndexOf("."));
                    if (ty.equalsIgnoreCase(".mp3") || ty.equalsIgnoreCase(".wav") || ty.equalsIgnoreCase(".ogg") || ty.equalsIgnoreCase(".acc"))
                        cat = "A";
                    else if (ty.equalsIgnoreCase(".mp4") || ty.equalsIgnoreCase(".wmv") || ty.equalsIgnoreCase(".3gp") || ty.equalsIgnoreCase(".mkv") || ty.equalsIgnoreCase(".divx"))
                        cat = "V";
                    else if (ty.equalsIgnoreCase(".jpg") || ty.equalsIgnoreCase(".gif") || ty.equalsIgnoreCase(".png") || ty.equalsIgnoreCase(".bmp") || ty.equalsIgnoreCase(".webp"))
                        cat = "P";
                    else if (ty.equalsIgnoreCase(".txt"))
                        cat = "T";
                    values.put(TYPE,ty);
                } else { values.put(TYPE, "dir"); cat = "dir"; }
                values.put(CATEGORY, cat);
                values.put(PATH, filelist[i].getAbsolutePath());
                SQLiteDatabase db = ;
                db.insert(TABLE, null, values);
        }
    }
}.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:53:10.930

如果您制作参数`final`，那么您将能够在线程的`run()`方法中直接访问它。请参阅[如何将参数传递给匿名类？](https://stackoverflow.com/questions/5107158/how-to-pass-parameters-to-anonymous-class)

```
public void startindexing (final SQLiteDatabase db) 
```

删除这一行：

```
SQLiteDatabase db=; 
```

# java - Android PhoneGap PHP 代码

> ID：11013278
> 
> 赞同：-3
> 
> 时间：2012-06-13T10:48:55.910
> 
> 标签：java, php, android, cordova

我目前正在使用 Android 的 phonegap 框架创建一个应用程序。应用程序是否可以在不需要外部服务器的情况下运行 PHP 代码？比如本地的 AJAX PHP 应用？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:59:07.077

Phonegap 是客户端的 html5 库，PHP 是服务器端脚本语言，它需要一个解释器才能运行，在大多数情况下是 apache 服务器，所以不，你不能简而言之

> 什么是 PHP？
> 
> PHP 是一种广泛使用的通用脚本语言，特别适用于 Web 开发，并且可以嵌入到 HTML 中。如果您是 PHP 新手并想了解它的工作原理，请尝试入门教程。之后，查看在线手册、示例存档站点以及链接部分中提供的其他一些资源。

[在这里](http://www.php.net/)查看 php 网站

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:11:40.410

你不能，因为 PHP 是一种服务器端脚本语言

# css - 带有显示的 div 中的自动换行：inline-block 不起作用

> ID：11013279
> 
> 赞同：2
> 
> 时间：2012-06-13T10:48:56.283
> 
> 标签：css, word-wrap

我一直在试图弄清楚如何使用 div-elements 用 4 个列创建一行。

第一列和第三列应为 46px 宽。第二和第四列应该是左边位置的 50%（如 100% 窗口宽度 - 46*2）宽。正如您在第一个灰色框中[看到的那样，我已经意识到这一点。](http://jsfiddle.net/5p5V9/)

好吧，第二列和第四列的文本可以更长，我希望它打破 div 。

第二个灰色框显示文本较长时的外观。第三个灰色框向您展示了“display:table-cell”的另一个尝试。唯一的问题是第二列的 50% 的宽度只是减小了，而第四列的宽度增加了。

我需要两列具有相同的宽度。你知道我如何实现它吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:42:03.797

我决定改编你的`display: table-cell`版本。

最重要的变化是添加`table-layout: fixed`. [这样做](http://www.w3.org/TR/CSS2/tables.html#fixed-table-layout)是在没有指定的列之间平均分配剩余的可用宽度`width`。

**见：http:** [//jsfiddle.net/thirtydot/5p5V9/2/](http://jsfiddle.net/thirtydot/5p5V9/2/)

**CSS：**

```
.outer {
    color: #ffffff;
    background-color: #373737;
}

.inner {
    display: table;
    table-layout: fixed;
    width: 100%;
}
.inner > div {
    display: table-cell;
}
.alignC {
    text-align: center;
    font-weight: bold;
    color: #949494;
    background-color: #2e2e2e;
}
.first, .alignC {
    width: 46px;
    font-weight: bold;
}

.alignR, .alignL {
    background: #666;
}​ 
```

**HTML：**

```
<div class="outer">
    <div class="inner">
        <div class="first">1</div>
        <div class="alignR">r</div>
        <div class="alignC">m</div>
        <div class="alignL">This long text shall break in the div</div>
    </div>
</div> 
```

[浏览器支持`display: table-cell`.](http://caniuse.com/css-table)

# c# - C# Socket Server 没有更多的 800 个客户端

> ID：11013282
> 
> 赞同：5
> 
> 时间：2012-06-13T10:48:58.967
> 
> 标签：c#, .net, sockets, networking

我有 C# 套接字服务器。最大客户端数谁能够与服务器连接大约 800。如果客户端超过 800 个新客户端，则会收到套接字错误 WSAECONNREFUSED 10061。如何 raizeup max clients 计数？

socket.BeginXXX 和 socket.EndXXX 之间的套接字写入。目标：框架 4.0。协议：IP4、TCP

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:26:31.180

侦听器积压队列已满。当积压队列已满时，Windows 将开始向进一步的传入连接发送 RST，这些连接在相关客户端上变为“连接被拒绝”。您可以根据此处的其他答案提高积压队列长度，但这真正意味着您处理接受的速度不够快。仔细查看执行此操作的代码，并为路径加油。确保它不做任何*其他事情*，例如阻塞 I/O、磁盘 I/O、其他网络操作。一旦连接被接受，它就会离开积压队列，因此其他传入连接可以成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:00:13.237

将 serversocket 设置为其侦听状态时，您可以设置 backlog。这是可以等待接受的最大连接数。

其他一切都可能是硬件问题 - 尝试在另一台机器上运行程序。

这是一个示例

```
Socket serversocket = ...
serversocket.Listen(1000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T05:07:23.337

嗨，我找到了我的问题的答案。我为接受连接创建了额外的线程。例如：

以前的

```
IPEndPoint myEndpoint = new IPEndPoint(IPAddress.Parse(_serverAddress), _port);
 _serverSocket = new Socket(myEndpoint.Address.AddressFamily, SocketType.Stream, ProtocolType.Tcp);

 _serverSocket.Bind(myEndpoint);
 _serverSocket.Listen((int)SocketOptionName.MaxConnections);

_serverSocket.BeginAccept(new AsyncCallback(AcceptCallback), _serverSocket);

.....

private void AcceptCallback(IAsyncResult result)
        {
            ConnectionInfo connection = new ConnectionInfo();
            try
            {
                Socket s = (Socket)result.AsyncState;
                connection.Socket = s.EndAccept(result);

                connection.Buffer = new byte[1024];
                connection.Socket.BeginReceive(connection.Buffer,
                    0, connection.Buffer.Length, SocketFlags.None,
                    new AsyncCallback(ReceiveCallback),
                    connection);
            }
            catch (SocketException exc)
            {
                CloseConnection(connection, "Exception in Accept");
            }
            catch (Exception exc)
            {
                CloseConnection(connection, "Exception in Accept");
            }
            finally
            {

                    _serverSocket.BeginAccept(new AsyncCallback(AcceptCallback), result.AsyncState);
            }
        } 
```

通过这种方式客户端连接数没有提高800

目前我写这个：

```
 IPEndPoint myEndpoint = new IPEndPoint(IPAddress.Parse(_serverAddress), _port);
 _serverSocket = new Socket(myEndpoint.Address.AddressFamily, SocketType.Stream, ProtocolType.Tcp);

 _serverSocket.Bind(myEndpoint);
 _serverSocket.Listen((int)SocketOptionName.MaxConnections);

acceptThread = new Thread(new ThreadStart(ExecuteAccept));
acceptThread.Start();

......

private void ExecuteAccept()
        {

            while (true)
            {

                ConnectionInfo connection = new ConnectionInfo();
                try
                {
                    connection.Socket = _serverSocket.Accept();

                    connection.Buffer = new byte[1024];
                    connection.Socket.BeginReceive(connection.Buffer, 0, connection.Buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallback), connection);
                }
                catch (SocketException exc)
                {
                    CloseConnection(connection, "Exception in Accept");
                }
                catch (Exception exc)
                {
                    CloseConnection(connection, "Exception in Accept");
                }
            }
        } 
```

通过这种方式，客户端连接数超过 2000。我使用 BeginXXX 和 EndXXX 进行读写。

# html - 使用 CSS 更改链接按钮上的图像

> ID：11013283
> 
> 赞同：1
> 
> 时间：2012-06-13T10:49:12.057
> 
> 标签：html, css

HTML：

```
<a href="" class="buttons_position"><img src="images/order.png" height="49" width="214"></a> 
```

CSS：

```
.buttons_position {
    padding: 0 0 0 10px;
    border: 0px;
    margin: 0px;
}

.buttons_position a:hover {
    background-image: url(images/ask_us_hover.png);
    background-repeat: no-repeat; 
    width: 2149px;
    height: 49px;
    padding: 0 0 0 10px;
    border: 0px;
    margin: 0px;
} 
```

但悬停图像不会改变。如何用 CSS 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:52:35.443

删除 IMG 标签上的图像。像这样写：

```
.buttons_position {
    background-image: url(images/order.png);
    background-repeat: no-repeat;
    display:block;
    width: 2149px;
    height: 49px;
    padding: 0 0 0 10px;
    border: 0px;
    margin: 0px;
}

.buttons_position:hover {
    background-image: url(images/ask_us_hover.png);        
} 
```

**HTML**

```
<a href="#" class="buttons_position"></a> 
```

检查这个[http://jsfiddle.net/X9wCL/](http://jsfiddle.net/X9wCL/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:52:44.557

您的背景图像在悬停时应用到 a 标签，并被 a 标签内的 img 覆盖。用您可以隐藏的文本替换 img 标签（搜索图像替换）并将不同的背景应用于 a 标签的默认和悬停状态。将单个图像（精灵）作为背景并在悬停时使用背景位置将是有益的。

图片替换：[http ://css-tricks.com/css-image-replacement/](http://css-tricks.com/css-image-replacement/)

背景图像精灵： http: [//nicolasgallagher.com/css-background-image-hacks/](http://nicolasgallagher.com/css-background-image-hacks/)

查看其他答案，正确的方法应该是：

```
.buttons_position {
    background-image: url(images/order.png);
    padding: 0 0 0 10px;
    border: 0px;
    margin: 0px;
}

.buttons_position:hover {
    background-image: url(images/ask_us_hover.png);
    background-repeat: no-repeat; 
    width: 2149px;
    height: 49px;
    padding: 0 0 0 10px;
    border: 0px;
    margin: 0px;
} 
```

您可能还需要将`display: block;`宽度/高度属性设置为`.buttons_position`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T10:52:35.720

尝试： HTML：

```
<a href="" class="buttons_position"></a> 
```

CSS：

```
.buttons_position {
    padding: 0 0 0 10px;
    background-image: url(images/order.png);
    background-repeat: no-repeat; 
    width: 2149px;
    height: 49px;
    border: 0px;
    margin: 0px;
}
.buttons_position a:hover {
    background-image: url(images/ask_us_hover.png);
    background-repeat: no-repeat; 
    width: 2149px;
    height: 49px;
    padding: 0 0 0 10px;
    border: 0px;
    margin: 0px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:57:54.407

它应该是：

```
a.buttons_position:hover {
    background-image: url(images/ask_us_hover.png);
    background-repeat: no-repeat; 
    width: 2149px;
    height: 49px;
    padding: 0 0 0 10px;
    border: 0px;
    margin: 0px;
} 
```

您的链接不在具有 .button_position 类的元素内

# android - c2dm C2DMBroadcastReceiver 未执行

> ID：11013287
> 
> 赞同：0
> 
> 时间：2012-06-13T10:49:32.457
> 
> 标签：android

代码片段：

C2DMessaging.java

```
public class C2DMessaging {
public static final String EXTRA_SENDER = "sender";
public static final String EXTRA_APPLICATION_PENDING_INTENT = "app";
public static final String REQUEST_UNREGISTRATION_INTENT = "com.google.android.c2dm.intent.UNREGISTER";
public static final String REQUEST_REGISTRATION_INTENT = "com.google.android.c2dm.intent.REGISTER";
public static final String LAST_REGISTRATION_CHANGE = "last_registration_change";
public static final String BACKOFF = "backoff";
public static final String GSF_PACKAGE = "com.google.android.gsf";
public static final String REGISTRATION_ID="registrationid";

// package
static final String PREFERENCE = "wea.com.google.android.c2dm";

private static final long DEFAULT_BACKOFF = 30000;

/**
 * Initiate c2d messaging registration for the current application
 */
public static void register(Context context,
        String senderId) {
    Intent registrationIntent = new Intent(REQUEST_REGISTRATION_INTENT);
    registrationIntent.setPackage(GSF_PACKAGE);
    registrationIntent.putExtra(EXTRA_APPLICATION_PENDING_INTENT,
            PendingIntent.getBroadcast(context, 0, new Intent(), 0));
    registrationIntent.putExtra(EXTRA_SENDER, senderId);
    context.startService(registrationIntent);
    // TODO: if intent not found, notification on need to have GSF
}

/**
 * Unregister the application. New messages will be blocked by server.
 */
public static void unregister(Context context) {
    Intent regIntent = new Intent(REQUEST_UNREGISTRATION_INTENT);
    regIntent.setPackage(GSF_PACKAGE);
    regIntent.putExtra(EXTRA_APPLICATION_PENDING_INTENT, PendingIntent.getBroadcast(context,
            0, new Intent(), 0));
    context.startService(regIntent);
} 
```

C2DMBroadcastReceiver.java

公共类 C2DMBroadcastReceiver 扩展 BroadcastReceiver {

```
@Override
public final void onReceive(Context context, Intent intent) {
    // To keep things in one place.
    C2DMBaseReceiver.runIntentInService(context, intent);
    setResult(Activity.RESULT_OK, null /* data */, null /* extra */);        
} 
```

}

清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.buuuk.sgweatherlah"
 android:versionCode="1"
 android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_GPS" />
<!-- for push -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.USE_CREDENTIALS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<permission
    android:name="com.buuuk.sgweatherlah.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.buuuk.sgweatherlah.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

<application
    android:name=".MyApp"
    android:icon="@drawable/ic_launcher"
    android:installLocation="preferExternal"
    android:label="@string/app_name"
    android:theme="@style/full_screen" >
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".WeatherLahActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
        <!-- for push -->
        <service
            android:name=".C2DMReceiver"
            android:enabled="true" />

        <!--
      Only Google services can send messages to the app. If this permission
      weren't set any other app would be able to send messages to us.
        -->
        <receiver
            android:name="com.google.android.c2dm.C2DMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >

            <!-- Receive actual messages -->
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />

                <category android:name="com.buuuk.sgweatherlah" />
            </intent-filter>
            <!-- Receive registration ids -->
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.buuuk.sgweatherlah" />
            </intent-filter>
        </receiver>
    </service>
</application> 
```

问题是 ：

我打电话后

```
C2DMessaging.register(Context context,String senderId) 
```

注册我的应用程序的方法。

但我在 C2DMBroadcastReceiver 的 onReceive() 中没有收到任何内容。

这是结构图。我不能在这里张贴图片。所以只需上传到盒子。

```
https://www.box.com/s/22782990e6f0bc34bbeb 
```

请帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:48:00.957

清单文件中的问题

您必须在**应用程序标签中写入****服务**和**接收者**标签

 **例如：

```
<application android:icon="@drawable/icon"
        android:label="@string/app_name">

<service
            android:name=".C2DMReceiver"
            android:enabled="true" />

<!--SAME FOR RECIEVER-->

</application> 
```

还有一件事..你在写

```
<receiver
            android:name="com.google.android.c2dm.C2DMBroadcastReceiver" 
```

您的文件夹结构是 com/google/android/c2dm/ 其中包含 C2DMBroadcastReceiver 类吗？**

# sql - 持久列公式中的嵌套逻辑

> ID：11013291
> 
> 赞同：1
> 
> 时间：2012-06-13T10:49:43.173
> 
> 标签：sql, sql-server, sql-server-2008, nested, persisted-column

我是持久列中的公式语法的新手并且遇到问题。

A - 我需要*case when (CustomerAccountID IS NULL and MissCustNameMatched=0) OR errLicensingProgMissing=1 OR errLicensingSubMissing=1 then (1) else (0) end*

这将无法正确验证。

B - 或者我可以这样做 *

案子

*   当 [MissCustName] 为真时
*   *   当 [CustomerAccountName] 为 NULL 时
*   *   *   (1)
*   *   别的
*   *   *   (0)
*   *   结尾
*   别的
*   *   (0)
*   结尾*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:08:05.047

您的两种情况在列名上不匹配，但在持久字段声明之后显示了如何使用`CASE`语句来完成。

```
CREATE TABLE dbo.Test (
  CustomerAccountID INTEGER
  , MissCustNameMatched INTEGER
  , errLicensingProgMissing INTEGER
  , errLicensingSubMissing INTEGER
  , persistedField AS 
      CASE MissCustNameMatched WHEN 1 
      THEN 
        CASE CustomerAccountID WHEN 1 
        THEN 1 
        ELSE 0 
        END 
      ELSE 0 
      END PERSISTED
) 
```

# templates - 仅通过模板完美转发

> ID：11013297
> 
> 赞同：0
> 
> 时间：2012-06-13T10:50:08.360
> 
> 标签：templates, forwarding

我正在阅读有关“完美转发”的信息。为什么这只适用于模板：

```
// example from justsoftwaresolutions  
void g(X&& t); // 2  
void g(X& t);  // 1  

template<typename T>    
void f(T&& t)  
{  
    g(std::forward<T>(t));   
}    

int main()  
{  
    X x;  
    f(x);   // 1  
    f(X()); // 2  
} 
```

从 f(x) 和 f(X()) 的模板生成什么函数？

std:forward 是什么意思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T02:38:41.060

请阅读[**本文**](https://stackoverflow.com/questions/7257144/when-to-use-stdforward-to-forward-arguments)以了解其`std::forward`工作原理。

关于您关于“为什么这只适用于模板”的问题。我的理解是`std::forward`适用于模板和非模板功能。但是`std::forward`在非模板函数中没有必要使用。例如

```
void f(X&& x)
{
    g(std::move(x));
} 
```

在上面的代码中，我们**确定**这`x`是右值引用。所以我们`std::move(x)`用来“中继”对 function 的右值引用`g(X&& x)`。当然，你也可以`g(std::forward(x))`这样做，但我认为它不可能比`std::move`.

# java - 使用 servlet 从 Web 根文件夹外的文件夹中检索图像

> ID：11013300
> 
> 赞同：2
> 
> 时间：2012-06-13T10:50:26.797
> 
> 标签：java, jsp, servlets, servlet-3.0

我正在尝试创建一个小型 servlet，它可以上传图像并能够在不同的页面中以幻灯片的形式检索它们。

我可以将它们保存在 WebApp 文件夹之外，但是在检索它们时，我需要它们成为 JSP 的一部分，该 JSP 将具有除图像之外的其他内容。目前，我正在使用 BufferedImage 和 ImageIO 类一次一个地流式传输图像。

```
BufferedImage image = ImageIO.read(new File("D:\\"+file.getName()));
ImageIO.write(image, "jpg", response.getOutputStream()); 
```

该文件在代码的前面被检查为 JPEG 文件类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:53:46.593

> 我需要它们成为 JSP 的一部分，该 JSP 将包含其他内容，

在 JSP 中使用图像标签

```
<image src="/context-root/YourServlet?param=value" alt="blah blah"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:26:43.533

您需要了解 HTTP 和 HTML 是如何工作的：

1.  浏览器请求 HTML 页面（第一个请求）
2.  服务器发回 HTML（和仅 HTML），包含 3 个`<img src="..."/>`标签
3.  浏览器发送请求以获取第一张图片的字节数（第二次请求）
4.  服务器发回第一张图片的字节
5.  浏览器发送请求以获取第二张图片的字节数（第三次请求）
6.  服务器发回第二张图片的字节
7.  浏览器发送请求获取第三张图片的字节数（第四次请求）
8.  服务器发回第三张图片的字节

因此，您需要一个 servlet 或 JSP 来生成包含所有`<img src="..."/>`标签的 HTML 页面。每个标签都应具有以下形式：

```
<img src="imageServlet?imageId=564"/> 
```

您需要第二个 servlet，映射到`imageServlet`，它从文件系统读取参数值标识的图像字节`imageId`，并将这些字节写入响应输出流。

# ruby - 基于 BasicObject 的 Ruby 类无法访问其他模块中的代码

> ID：11013306
> 
> 赞同：0
> 
> 时间：2012-06-13T10:50:48.290
> 
> 标签：ruby, metaprogramming, ruby-1.9

我`method_missing`用来为词汇表中的命名空间常量定义一个类。为了有效，我需要继承自 的词汇类`BasicObject`，否则没有任何标准对象方法可用作词汇术语（因为该方法没有丢失:)。但是，当我从 继承时`BasicObject`，我发现我无法在另一个模块中调用实用程序方法。以下代码以精简形式说明了该问题：

```
module Foo
  class Bar
    def self.fubar( s )
      "#{s} has been fubar'd"
    end
  end
end

class V1
  def self.method_missing( name )
    Foo::Bar.fubar( "#{name} in v1" )
  end
end

class V2 < BasicObject
  def self.method_missing( name )
    Foo::Bar.fubar( "#{name} in v2" )
  end
end

# this works
puts V1.xyz
# => xyz in v1 has been fubar'd

# this doesn't
puts V2.xyz
# => NameError: uninitialized constant V2::Foo 
```

当我尝试调用帮助程序模块时，我需要添加什么`V2`以便它不会产生统一的常量错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:00:09.383

如果您`V2`像这样更改方法以便名称解析在全局范围内开始，它会起作用。

```
def self.method_missing( name )
  ::Foo::Bar.fubar( "#{name} in v2" )
end 
```

[我在文档中为您](http://apidock.com/ruby/BasicObject)查找了它：

> BasicObject 不包括内核（用于 puts 等方法），并且 BasicObject 位于标准库的命名空间之外，因此如果不使用完整的类路径，将无法找到通用类。... 通过从根目录（如 ::File 或 ::Enumerator）引用所需的常量，可以在 BasicObject 子类中访问 Ruby 标准库中的类和模块。

# eclipse - 在 SVN 上，如何在移动文件夹/文件时保留对其原始位置的引用？

> ID：11013310
> 
> 赞同：1
> 
> 时间：2012-06-13T10:51:17.653
> 
> 标签：eclipse, svn

我创建了一个功能分支来与主干并行工作。

在分支中，我做了大量的结构（文件夹）更改。例如，我已经移动了之前打开的文件夹：

```
application/views/scripts/users/* 
```

到：

```
application/modules/user/views/scripts/users/* 
```

现在，我正在尝试从主干合并到这个功能分支，并且我正在创建一百万个树冲突！问题是，由于出现了此树冲突，因此该树中的任何文件都不会与任何内容合并。

我的意思是，我发现树冲突：

```
application/views/scripts/users (SVN message: "The last merge operation tried to modify the directory 'users', but it was deleted, moved or renamed locally") 
```

并且该路径内的所有文件和其他文件夹都没有被合并。

有没有办法恢复文件夹的原始位置和当前位置之间的“链接”？

我可以做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:30:33.400

不仅仅是一个解决方案，我还可以提供一个解决方法，即我使用过的解决方法，因为似乎没有真正的解决方案。

经过一番研究，我接近确定 SVN 不支持这种合并功能。在 TortoiseSVN 的文档中，据说：

> **本地缺失，合并时传入的编辑**
> 
> 开发主干的开发人员 A 修改 Foo.c 并将其提交到存储库
> 
> 在分支上工作的开发人员 B 将 Foo.c 移动到 Bar.c 并将其提交到存储库
> 
> 开发人员 A 的主干更改合并到开发人员 B 的分支工作副本会导致树冲突：
> 
> Bar.c 已经在工作副本中，状态为“正常”。
> 
> Foo.c 被标记为缺少树冲突。
> 
> **要解决此冲突**，开发人员 B 必须在冲突编辑器对话框中将文件标记为已解决，这会将其从冲突列表中删除。然后她**必须决定**是否将丢失的文件 Foo.c 从存储库复制到工作副本，是否将开发人员 A 对 Foo.c 的更改合并到重命名的 Bar.c 中，或者是否通过将冲突标记为已解决来忽略更改并且什么也不做。

这意味着你必须决定，一次一棵树冲突，做什么。这还不是最糟糕的部分。在我的情况下，真正不能接受的是，每次我从主干到这个分支进行新的合并时，我都将被迫再次处理这种冲突。

# 解决方法

将在分支上所做的结构更改复制到主干中（以及所需的代码更改）并使其与它们一起使用。

提交此更改后，文件的两个结构，主干和分支将匹配，因此以后的合并操作将不再抱怨。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T11:56:37.497

我从您的问题中了解到的是，您在分支中进行了很多文件夹结构更改，并且由于这些更改不在您的主干中，并且当您尝试合并时，您会收到错误消息。

根据您的声明，“现在，我正在尝试从主干合并到此功能分支”

首先，当您从主干中取出一个分支并在您的分支中进行结构更改时，您应该将这些更改从“分支到主干”合并，或者如果您只是想获得原始结构（“恢复原始位置文件夹”）然后只恢复您在分支中所做的更改。

希望这可以帮助。

# jquery - jQuery - 将正文背景（css 渐变）淡入另一个 CSS 渐变

> ID：11013313
> 
> 赞同：2
> 
> 时间：2012-06-13T10:51:28.077
> 
> 标签：jquery, html, jquery-ui

我已经使用 jQuery 一段时间了，但我不知道我会如何从一个渐变渐变到另一个渐变。我一直在使用 [http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/) 作为我的渐变。例如

```
background: #ffaf4b;
background: -moz-radial-gradient(center, ellipse cover,  #ffaf4b 0%, #ff920a 100%);
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#ffaf4b), color-stop(100%,#ff920a));
background: -webkit-radial-gradient(center, ellipse cover,  #ffaf4b 0%,#ff920a 100%);
background: -o-radial-gradient(center, ellipse cover,  #ffaf4b 0%,#ff920a 100%);
background: -ms-radial-gradient(center, ellipse cover,  #ffaf4b 0%,#ff920a 100%);
background: radial-gradient(center, ellipse cover,  #ffaf4b 0%,#ff920a 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffaf4b', endColorstr='#ff920a',GradientType=1 ); 
```

因此，如果我想单击多个渐变之间的链接淡入淡出，你会怎么做？（我会将它用于导航和/或 div 背景）

目前我一直在尝试将上述代码存储在 var 中并使用

```
$('.li1').click(function(){
$('.navBar').animate(bgVar, 3000);
}); 
```

提前感谢马赫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:04:41.447

除了使用背景渐变，您可以使用两个大`DIV`的，两个不同的渐变放置在所有东西的后面，一个在另一个之上。要进行过渡，`fadeOut`底部的和`fadeIn`顶部的使用相同的持续时间。[http://jsfiddle.net/CeD2q/6/](http://jsfiddle.net/CeD2q/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:59:51.840

我认为目前从背景渐变过渡到另一个背景渐变是不可能的。我见过一些人通过使用大的渐变背景图像或背景渐变来规避这一点，然后使用背景位置属性进行过渡。

此处示例：http: [//sapphion.com/2011/10/css3-gradient-transition-with-background-position/](http://sapphion.com/2011/10/css3-gradient-transition-with-background-position/)

# c# - 获取Window WPF的高度/宽度

> ID：11013316
> 
> 赞同：14
> 
> 时间：2012-06-13T10:51:32.727
> 
> 标签：c#, wpf, xaml, height, width

我有以下代码

```
<Window x:Class="Netspot.DigitalSignage.Client.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" WindowStyle="SingleBorderWindow" 
        WindowStartupLocation="CenterScreen"
        WindowState="Normal" Closing="Window_Closing"> 
```

任何获取高度/宽度的尝试都返回 NaN 或 0.0

谁能告诉我获取方法？

这2个方法都不行

```
//Method1
var h = ((System.Windows.Controls.Panel)Application.Current.MainWindow.Content).ActualHeight;
var w = ((System.Windows.Controls.Panel)Application.Current.MainWindow.Content).ActualWidth;

//Method2
double dWidth = -1;
double dHeight = -1;
FrameworkElement pnlClient = this.Content as FrameworkElement;
if (pnlClient != null)
{
     dWidth = pnlClient.ActualWidth;
     dHeight = pnlClient.ActualWidth;
} 
```

该应用程序不会全屏运行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-04T18:30:08.073

1.) 在后面的代码中订阅窗口调整大小事件：

```
this.SizeChanged += OnWindowSizeChanged; 
```

2.) 使用 SizeChangedEventArgs 对象 'e' 获取您需要的尺寸：

```
protected void OnWindowSizeChanged(object sender, SizeChangedEventArgs e)
{
    double newWindowHeight = e.NewSize.Height;
    double newWindowWidth = e.NewSize.Width;
    double prevWindowHeight = e.PreviousSize.Height;
    double prevWindowWidth = e.PreviousSize.Width;
} 
```

请记住，这是非常普遍的情况，您可能（您也可能不需要）必须进行一些检查以确保您的大小值为 0。

当主窗口发生变化时，我使用它来动态调整列表框的大小。基本上我想要的只是这个控件的高度来改变窗口高度的相同量，因此它的父“面板”在任何窗口变化中看起来都是一致的。

这是代码，更具体的示例：

*注意*我有一个名为“resizeMode”的私有实例整数，它在后面的窗口代码的构造函数中设置为0。

这是 OnWindowSizeChanged 事件处理程序：

```
 protected void OnWindowSizeChanged (object sender, SizeChangedEventArgs e)
    {
        if (e.PreviousSize.Height != 0)
        {
            if (e.HeightChanged)
            {
                double heightChange = e.NewSize.Height - e.PreviousSize.Height;
                if (lbxUninspectedPrints.Height + heightChange > 0)
                {
                    lbxUninspectedPrints.Height = lbxUninspectedPrints.Height + heightChange;
                }
            }
        }
        prevHeight = e.PreviousSize.Height;
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-13T11:01:23.270

您可以在运行后获取窗口在构造函数中的宽度和高度，然后`InitializeComponent`它们不会返回`NaN`，实际高度和宽度必须等到窗口显示出来。

什么时候`WindowState == Normal`你可以从`Width / Height`之后做这个`IntializeComponent()`。

你什么时候`WindowState == Maximized`可以得到这个的屏幕分辨率

```
System.Windows.SystemParameters.PrimaryScreenHeight;
System.Windows.SystemParameters.PrimaryScreenWidth; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T12:40:51.500

`ActualWidth/ActualHeight`在 UI 中加载窗口后，您必须尝试获取这些值。在 Window_Loaded 中执行此操作效果很好。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-11-22T06:05:40.310

**XAML**

```
<Grid x:Name="Grid1">
      <Image x:Name="Back_Image" HorizontalAlignment="Left" VerticalAlignment="Top"/>
</Grid> 
```

**CS** MainWindow() 在 InitializeComponent() 之后；

```
 Back_Image.Width = Grid1.Width;
    Back_Image.Height = Grid1.Height; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T10:58:25.703

WPF 以延迟方式创建控件和窗口。因此，在第一次显示窗口之前，它可能还没有经过布局，因此没有`ActualWidth`/ `ActualHeight`。您可以等到加载窗口并获取属性，或者更好地将这些属性绑定到您需要它们的目标。您也可以通过`UpdateLayout()`.

只是想补充一点：尽量减少大小相关逻辑的数量，几乎总是可以避免它。当然，除非您正在编写布局面板。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-18T23:18:24.517

请注意，当您使用 100% with 的控件时，它们的大小为 NaN，直到它们被表示

您可以仅在触发 Loaded 事件时检查 ActualHeigh 或 ActualWidth，但不要在创建 Windows 控件之前尝试验证它。忘记在构造函数中控制它的想法。

在我看来，控制这类事情的最佳地点是 The SizeChanged 事件

# actionscript-3 - Flash AS3：如何在本地机上保存AIR手游关卡？

> ID：11013317
> 
> 赞同：5
> 
> 时间：2012-06-13T10:51:33.253
> 
> 标签：actionscript-3, air

我只需要知道如何在本地机器上保存我的移动 AIR 游戏关卡。就像所有的细节都应该得到保存，例如。我完成或打开一次并玩了多少关卡，这些关卡应该处于解锁状态。如果之前从未打开的关卡将处于锁定状态。这是我的概念，也是当今所有手机游戏中使用的概念。请通过任何手机游戏级别类型，请让我知道我的概念的编码非常紧急。并提前致谢。任何帮助将不胜感激。

我使用的代码如下：Flash AS3

```
var file = File.applicationStorageDirectory.resolvePath("test.txt"); 
var str = "Locked Levels : Level 1,Level 2,Level 3,Level 4"; 
file.addEventListener(Event.COMPLETE, fileSaved); 
file.save(str); 
function fileSaved(event) 
{ 
    trace("Done."); 
} 
```

在上面的代码中，文本文档正在写入我的本地机器。但我不知道如何检查被锁定的级别是否使用此解锁。我通过使用框架来锁定和解锁位置，将我的水平按钮保持在舞台上。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:07:11.770

1.  您可以使用 Adob​​e AIR 的内置 SQLite 功能。为此，您可以创建一个以后可以查询的本地数据库。

或者

2.  以您自己的格式将数据保存到应用程序存储文件夹，以便您以后阅读和解释它。

就个人而言，我会选择加密的 SQLite，这样你就可以摆脱“坏”家伙的“黑客”分数 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:29:28.620

在这里，您将找到一些有关在 AIR 中使用 SQL 的信息：http: [//help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118676a5497-7fb4.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118676a5497-7fb4.html)

在这里你会找到一个教程： http: [//kirill-poletaev.blogspot.de/2011/05/creating-air-application-with-sqlite.html](http://kirill-poletaev.blogspot.de/2011/05/creating-air-application-with-sqlite.html)

# android - 我可以使用 Android 应用程序来表现得像蓝牙 A2DP 客户端吗？ei 将音乐从我的手机流式传输到 Android 平板电脑

> ID：11013318
> 
> 赞同：4
> 
> 时间：2012-06-13T10:51:34.037
> 
> 标签：android, bluetooth, a2dp

我想编写一个运行平板电脑的 Android 应用程序，该应用程序可以使用 A2DP 连接到我的手机并从手机流式传输音乐。

Android 平板电脑将取代我汽车的音响和导航系统。

我已经阅读了很多关于 Android 蓝牙 API 的内容，我已经导入了一些示例应用程序，并且我阅读了更多内容 我的印象是 Android API 只允许我“发送”音乐流而不是“接收”它如我所愿。

有没有人对此有任何困难或想法？

问候

# facebook - 我怎样才能使一个jsp页面（在facebook上作为facebook标签）启用粉丝门？

> ID：11013325
> 
> 赞同：0
> 
> 时间：2012-06-13T10:51:58.300
> 
> 标签：facebook, jsp

我在 JSP 中制作了一个 facebook 应用程序。然后我将该应用程序作为标签集成到我的 Facebook 页面。现在我想要那个 facebook 标签上的 fangate。那就是我想将该标签设置为显示标签。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:09:40.943

您的 Web 应用程序需要代码来请求和解码 Facebook 传递给粉丝页面的“signed_request”表单变量。

1.  请求“signed_request”字符串形式
    变量的第二个参数。
2.  此参数包含以 JSON 格式编码的用户数据。
3.  将字符串解析为 JSONObject。
4.  查询对象以在“page”参数中查找布尔“liked”参数。
5.  您现在可以根据该参数指定条件内容。

请注意，您需要先将 iFrame 应用程序作为选项卡添加到 Facebook 粉丝页面，然后才能进行任何测试。这是因为如果应用程序位于粉丝页面选项卡的上下文中，它只会从 Facebook 传递重要的用户数据。

这是使用 PHP 的教程：http: [//www.chilipepperdesign.com/2011/02/15/reveal-fan-gate-like-gate-facebook-iframe-tab-tutorial-with-php](http://www.chilipepperdesign.com/2011/02/15/reveal-fan-gate-like-gate-facebook-iframe-tab-tutorial-with-php)

关于“signed_request”的概述：http: [//developers.facebook.com/docs/authentication/signed_request/](http://developers.facebook.com/docs/authentication/signed_request/)

# android - Android：屏幕方向更改 fragment.getActivity 为空

> ID：11013329
> 
> 赞同：2
> 
> 时间：2012-06-13T10:52:14.537
> 
> 标签：android, android-fragments

我将尝试解释我的问题：

我所有的片段都在使用 setRetainInstance(true) 在我的活动 onCreate 我这样做：

```
 if (savedInstanceState == null) {
        fragment = onCreatePane();
        fragment.setArguments(intentToFragmentArguments(getIntent()));

        FragmentTransaction trans = getSupportFragmentManager().beginTransaction();
        trans.add(R.id.root_container, fragment, getFragmentTag());
        trans.commit();
    } else {
        FragmentTransaction trans = getSupportFragmentManager().beginTransaction();
        if ( fragment == null ) {

            fragment = getSupportFragmentManager().findFragmentByTag(getFragmentTag());
        }

        if (fragment == null) {
            fragment = onCreatePane();
            fragment.setArguments(intentToFragmentArguments(getIntent()));
        }           

        trans.add(R.id.root_container, fragment, getFragmentTag());
        trans.commit();

    } 
```

因此，当我创建活动并且 savedInstance 为空时，我创建了 Fragment，设置了它的参数，我开始事务并将我的 Fragment 添加到事务中，并使用它自己的标签（稍后将其取回）。

用户与活动交互并改变方向。活动被销毁并重新创建（作为正常活动生命周期）。所以现在它进入else，片段为空，我做一个`fragment = getSupportFragmentManager().findFragmentByTag(getFragmentTag());`返回片段管理器持有的正确片段。

问题是这个片段包含对已被破坏的旧 Activity 的引用，所以如果我执行 fragment.getActivity 它返回 null。如何将片段引用更新为新的重新创建的 Activity？

**更新**：更准确地说，我在 SearchActivity 上，它在获得新搜索时调用 onNewIntent。所以实际的交互是这样->用户进行搜索->搜索正确显示->用户改变方向，结果显示正确（如果用户与结果交互，他们很好）->用户从搜索按钮进行新搜索，然后这调用了 SearchActivity 的 onNewIntent，它将新的意图分派给具有搜索逻辑的片段。在这里它崩溃了，因为对活动的引用为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:01:42.117

你何时何地打电话`getActivity()`？活动参考确实会自动更新，但不会立即更新。`onActivityCreated()`在被调用后，您应该可以安全地访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:05:53.557

只需从其他部分删除空检查 `if ( fragment == null ) { fragment = getSupportFragmentManager(`......让更新片段与在方向改变时创建的新片段......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:28:33.343

如果 setRetainInstance(true) - 是的，这就是解决方案（按标签查找片段，因为再次实例化它 - 是错误的方式 - 可能正在进行后台例程）。否则，如果您设置了 setRetainInstance(false)，问题可能会再次出现。我也有类似的。我是我的情况——因为我使用了 Loader（在后台）。解决方案很简单：在片段的 onDestroy() 方法中销毁片段的加载器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-19T04:25:10.193

在您的 baseAcvivity 中，您可以覆盖 onSaveInstanceStat 来解决此问题：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    //solution of fragment.getActivity() is null
    outState.remove("android:support:fragments");
} 
```

# regex - 如何匹配除最后一个以外的所有内容

> ID：11013342
> 
> 赞同：0
> 
> 时间：2012-06-13T10:53:13.197
> 
> 标签：regex, bash

我有很多文件，如下所示：

```
/tmp/a/b/a
/var/files/z
/tmp/o
.
.
. 
```

我需要在每一行中匹配所有目录，但不是文件名。我怎样才能用 bash 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:05:44.647

如果您假设每个路径都以文件结尾，那么您可以使用[`dirname`](http://linux.die.net/man/1/dirname).

```
dirname /var/files/z
/var/files 
```

如果您有文件和目录的混合，您可以使用 bash`-d`和`-f` [文件测试运算符](http://tldp.org/LDP/abs/html/fto.html)在运行之前检查`dirname`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:10:08.260

重击：

```
path="$(pwd)"
echo "$path"
echo "${path%/*}" 
```

# javascript - 在不同系统上的 Javascript 中初始化数组的初始值是多少？

> ID：11013343
> 
> 赞同：2
> 
> 时间：2012-06-13T10:53:13.677
> 
> 标签：javascript, arrays, internet-explorer-7, undefined

几个月来，我一直在为一个 JavaScript 问题苦苦挣扎，其中我有一个包含一些属性的数组，后来检查了其中一些属性以决定是否向用户显示消息。

现在这在大多数系统（尤其是更新的浏览器）上一切顺利，但在我客户的一些 IE7 计算机上却不是那么好。

现在我刚刚发现在我的代码中的某个地方我初始化了一个如下所示的新数组，但从未真正设置“完成”的值

```
var qar=new Array('question_no','pos','done');
qar['question_no'] = 1234;
qar['pos'] = 1234; //dont mind these numbers 
```

稍后在一些 for 循环中，我检查：

```
//check if this question was already shown
if(qar['done'])
   continue; //stop here, don't show message
//set done to true, so that this question will not be shown again
qar['done'] = true;
window.alert('messaged!'); 
```

同样，问题是**有时**（实际上经常，但并非总是）消息在 IE7 中根本不显示。

现在问你一个问题：我知道 qar['done'] 应该在初始化后立即未定义，这使得我的代码可以正常工作（在 Chrome 等中），但是在 IE7 中，这种情况的处理方式可能不同吗？例如， qar['done'] 不是未定义的，而是一些随机值，因此有时会被意外地认为是真的？或者这是一个愚蠢的想法？

如果这不是问题，那么我不知道是什么..

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:01:20.663

你的代码应该是这样的：

```
var qar={};
qar['question_no'] = 1234;
qar['pos'] = 1234; //dont mind these numbers

//check if this question was already shown
if(!qar['done']) {
   //set done to true, so that this question will not be shown again
   qar['done'] = true;
   window.alert('messaged!');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:01:21.273

通过做这个：

```
var qar=new Array('question_no','pos','done'); 
```

您只是在创建带有索引的数组。

```
qar[0] will be 'question_no'
qar[1] will be 'pos'
qar[2] will be 'done' 
```

在这种情况下， qas['done'] 将始终未定义。

这就是它引起问题的原因。您应该使用 javascript 对象而不是使用数组。

但是你可以这样做：

```
if(typeof qar['done'] === 'undefined'){
   qar['done'] = true;
   alert('messaged!');
} 
```

# java - 如何将 eval 方法中包含的两个文件作为线程运行？

> ID：11013345
> 
> 赞同：1
> 
> 时间：2012-06-13T10:53:24.723
> 
> 标签：java, javascript, multithreading

在我的项目中，主要方法中的代码就像

```
jsEngine.eval(new FileReader(scrFile1));
jsEngine.eval(new FileReader(scrFile2)); 
```

我需要将这些文件作为线程传递。这个问题有解决办法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:02:04.410

你在用犀牛吗？首先阅读[什么是 Rhino Script Engine 的生命周期和并发语义](https://stackoverflow.com/questions/6936223/what-is-the-lifecycle-andconcurrency-semantics-of-rhino-script-engine)。然后，如果您对彼此可见的两个并发评估效果感到满意，请执行以下操作：

```
Thread t1 = new Thread(new Runnable() {
  public void run() {
    jsEngine.eval(new FileReader(scrFile1));
  }
});

Thread t2 = new Thread(new Runnable() {
  public void run() {
    jsEngine.eval(new FileReader(scrFile2));
  }
});

t1.start();
t2.start(); 
```

# ios - 使用 UIView 掩码时旋转性能不佳

> ID：11013358
> 
> 赞同：1
> 
> 时间：2012-06-13T10:54:38.070
> 
> 标签：ios, ipad, core-animation, calayer, masking

我有几个 UITableViews 应该在顶部淡出。它们在单个 UIView 中彼此相邻放置。由于所有的表格视图都应该在同一个地方淡出，我想我应该在容器 UIView 上设置一个 alpha 掩码。这很好用，所有表格视图中的滚动都很流畅，并且淡入淡出看起来不错。

问题是当界面方向发生变化时。真的很波涛汹涌。并且仅在应用蒙版时。如果我删除淡入淡出，一切都很顺利。

这是应用所述掩码的代码：

```
// If you want the Table Views to "fade out" at the top, use this function to set the height!
- (void) setFadeHeight:(CGFloat)fadeHeight
{
    if (fadeHeight == 0.0) {
        self.layer.mask = nil;
        return;
    }

    // Create a gradient layer to use as mask
    CAGradientLayer *l = [self createGradientLayerWithHeight:fadeHeight];
    l.shouldRasterize = NO;
    [self.layer setMask:l];
}

// Creates a transparency gradient. Helper function for the above function
- (CAGradientLayer *) createGradientLayerWithHeight:(CGFloat)gradientHeight
{
    CAGradientLayer *mask = [CAGradientLayer layer];
    mask.locations = [NSArray arrayWithObjects:
                      [NSNumber numberWithFloat:0.0],
                      [NSNumber numberWithFloat:1.0],
                      nil];

    mask.colors = [NSArray arrayWithObjects:
                   (__bridge id)[UIColor clearColor].CGColor,
                   (__bridge id)[UIColor whiteColor].CGColor,
                   nil];

    mask.frame = CGRectMake(0.0, 0.0, self.bounds.size.width, self.bounds.size.height);

    // vertical direction
    mask.startPoint = CGPointMake(0.0, 0.0); 
    mask.endPoint = CGPointMake(0.0, gradientHeight / self.bounds.size.height);
    return mask;
} 
```

该问题可能与[此 Stack Overflow question 有关](https://stackoverflow.com/questions/4520941/core-animation-calayer-mask-animation-performance "这个")，但由于我在表格中平滑滚动，我不太确定。我还尝试根据该问题的答案将 shouldRasterize 设置为 NO。

# jquery - jQuery 未在本地 wordpress 安装中加载

> ID：11013360
> 
> 赞同：0
> 
> 时间：2012-06-13T10:54:45.560
> 
> 标签：jquery, wordpress

谁能告诉我为什么我的 jQuery 脚本没有[在这里加载](http://pastebin.com/wgYPNqPj)

```
<?php wp_enqueue_script("jquery"); ?>

<?php wp_head(); ?>

<script src="http://gsgd.co.uk/sandbox/jquery/easing/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="<?php bloginfo('stylesheet_directory'); ?>/js/slides.jquery.js"></script>
<script type="text/javascript" src="<?php bloginfo('stylesheet_directory'); ?>/js/my-js-file.js"></script>

        <script>
        $(document).ready(function() {
                        $('#slides').slides({
                                preload: true,
                                preloadImage: 'img/loading.gif',
                                play: 5000,
                                pause: 2500,
                                hoverPause: true
                        });
                });
        </script>

</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:04:37.353

```
<?php
function my_scripts_method() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
    wp_enqueue_script( 'jquery' );
}    

add_action('wp_enqueue_scripts', 'my_scripts_method');
?> 
```

或者直接使用 jquery.com 的最新版本

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

祝你好运！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:01:00.807

不确定双引号是否是导致问题的原因，最好通过functions.php而不是header.php将前端脚本排入队列。像这样；

```
if ( !is_admin() ) {
wp_enqueue_script('jquery');
} 
```

# nginx - 我多久可以将 USR1 用于 nginx？

> ID：11013367
> 
> 赞同：0
> 
> 时间：2012-06-13T10:55:08.547
> 
> 标签：nginx

我多久可以将 USR1 用于 nginx ？例如，如果我想每分钟轮换一次日志 - 它会影响 nginx 服务器的生产力吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:29:15.353

重新加载日志文件会产生少量开销。如果您对操作的性能有疑虑，我建议您使用自己的应用程序进行测试，以确认它可以在生产环境中正常工作。您可以在重复使用 USR1 信号期间观察内存和 CPU 使用情况，并在发生和不发生旋转的情况下对可以处理的请求量进行基准测试。

# node.js - 节点-v 0.6.19。libxmljs。TypeError：无法读取未定义的属性“原型”

> ID：11013371
> 
> 赞同：1
> 
> 时间：2012-06-13T10:55:22.520
> 
> 标签：node.js, freebsd, libxml2

在 Ubuntu 11.10 上，节点 0.6.17、0.6.18 和 0.6.19 安装了 libxml2 (2.7.8) 和 libxml2-dev - 一切正常。

在节点为 0.6.19、libxml2 版本 20708 (xmllint --version; xmllint: using libxml version 20708) 的 FreeBSD 服务器上，它给出以下错误消息：

```
/home/pathtofile/www/node_modules/libxmljs/lib/element.js:24
Element.prototype = bindings.Element.prototype;
                                   ^
TypeError: Cannot read property 'prototype' of undefined
   at Object. (/home/pathtofile/www/node_modules/libxmljs/lib/element.js:24:37)
   at Module._compile (module.js:446:26)
   at Object..js (module.js:464:10)
   at Module.load (module.js:353:31)
   at Function._load (module.js:311:12)
   at Module.require (module.js:359:17)
   at require (module.js:375:17)
   at Object. (/home/pathtofile/www/node_modules/libxmljs/lib/document.js:3:15)
   at Module._compile (module.js:446:26)
   at Object..js (module.js:464:10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T06:59:22.640

在调用 xml 对象之前添加到代码中：

`var xml = require("libxmljs")`

# c# - 用于查询多个数据库的存储库模式

> ID：11013372
> 
> 赞同：1
> 
> 时间：2012-06-13T10:55:23.070
> 
> 标签：c#, entity-framework, nhibernate, architecture, n-tier-architecture

这是一个非常奇怪的架构。请多多包涵。

我们有一个现有的分层应用程序（数据、逻辑/服务、客户端）。最新的要求是服务层要访问两个数据源！！！（没有其他办法）这两个数据源具有相同的数据库架构。

与大多数分层架构一样，我们有如下读写方法：

```
IEnumerable<Product> GetAllProducts(),
Product GetProductById(ProductKey id),
IEnumerable<Product> FindProductsByName(string name) 
```

产品 DTO 是：

```
class Product
{
    public ProductKey Key { get; set;}
    ...
}

class ProductKey
{
    public long ID { get; }
} 
```

我们将其缩小为两种可能的解决方案：

备选方案 1：在读取方法中添加一个参数，以便服务知道要使用什么数据库，如下所示： Product GetProductById(ProductKey id, DataSource dataSource) `DataSource`是一个枚举。

备选方案 2（我的解决方案）：将 DataSource 属性添加到键类。这将在检索对象时由实体框架设置。此外，这不会持久化到数据库中。

```
class ProductKey
{
    public long ID { get; }
    public DataSource Source { get; } //enum
} 
```

优点是更改对客户的影响最小。

但是，人们不喜欢这种解决方案，因为

*   `DataSource`不会增加商业价值。（我的回答是它`ID`也不会增加商业价值。它是一个代理键。它的目的是跟踪持久性）
*   对象图中的孩子也将包含`DataSource`哪些是冗余的

哪种解决方案更合理？你有其他选择吗？

注意：这些服务无处不在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T23:20:07.553

我建议的是 3 号门：

```
[||||||||||||||]
[|||||||||s!   ]
[||||nerics!   ]
[  Generics!   ] 
```

我使用“动态存储库”（或者至少这是我所说的）。它被设置为能够连接到任何数据上下文或数据库集，同时仍处于相同的 using 块中（即无需重新实例化）。

这是我如何使用它的片段：

```
 using (var dr = new DynamicRepo())
            {
                dr.Add<House>(model.House);
                foreach (var rs in model.Rooms)
                {
                    rs.HouseId = model.House.HouseId;
                    dr.Add<Room>(rs);
                }
            } 
```

这使用定义的“默认”dbcontext。每一个都必须在存储库中定义，但不能实例化。这是我使用的构造函数：

```
 public DynamicRepo(bool Main = true, bool Archive = false)
    {
        if (Main)
        {
            this.context = new MainDbContext();
        }
        if (Archive)
        {
            this.context = new ArchiveDbContext();
        }
    } 
```

这是一个简化版本，其中只有两个上下文。可以实施更深入的选择方法来选择要使用的上下文。

然后一旦初始化，这将是 Add 的工作方式：

```
 public void Add<T>(T te) where T : class
    {
        DbSet<T> dbSet = context.Set<T>();
        dbSet.Add(te);
        context.SaveChanges();
    } 
```

这样做的一个很好的优点是只有一个地方来维护与数据库交互的代码。所有其他逻辑都可以抽象为不同的类。以这种方式使用通用存储库无疑为我节省了很多时间——即使我一开始花了一些时间修改它。

我希望我没有误解您要查找的内容，但是如果您尝试为多个数据源创建一个存储库，我相信这是一种好方法。

# javascript - 主干错误，无法读取未定义的属性“c18”

> ID：11013373
> 
> 赞同：0
> 
> 时间：2012-06-13T10:55:24.770
> 
> 标签：javascript, backbone.js, backbone-relational

我正在制作一个庞大的多页主干站点。

我有时会在网站的多个页面上重复使用集合和视图，就好像它们是控件一样。我现在做了一些会出现这样的错误的事情，

无法读取未定义的属性“c18”

目前，c18总是一样的。

我也在使用骨干关系。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:33:34.967

当视图在完成渲染之前关闭时，我发生了奇怪的错误。在您的情况下，可能是在视图完成渲染之前删除了模型。

将来，您可以通过破解 Backbone 代码并在视图和模型初始化（在构造函数中）打印 CID 来调试它。至少这样你就会知道 c18 是什么类型的对象。

# bash - 如果将 STDERR 重定向到 STDOUT 并将 STDOUT 重定向到文件，为什么文件中没有显示 STDERR 消息？

> ID：11013374
> 
> 赞同：1
> 
> 时间：2012-06-13T10:55:26.070
> 
> 标签：bash, unix, io-redirection

我制作了一个快速的小脚本 test.sh，如下所示：

```
echo "StdErr" > /dev/stderr
echo "StdOut" > /dev/stdout 
```

根据这个[SO question](https://stackoverflow.com/questions/637827/redirect-stderr-and-stdout-in-a-bash-script)和[Advanced Bash-Scripting Guide](http://tldp.org/LDP/abs/html/io-redirection.html)的答案，以下内容应将 stderr 从上面的脚本重定向到 stdout：

```
$ sh /tmp/test.sh 2>&1 
```

确实如此：

```
$ sh /tmp/test.sh 2>&1 |tee file;
$ cat file
StdErr
StdOut 
```

我想知道的问题是 stderr 的输出在以下代码中的位置？

```
$ sh /tmp/test.sh > file 2>&1
$ cat file
StdOut 
```

我正在使用 GNU bash，版本 4.0.24(2)-release。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:53:34.847

您的脚本将“StdErr”写入文件。然后，下一行用“StdOut”覆盖文件。`>>`如果要附加到文件，则应使用。由于您正在重定向，`/dev/stderr`并且`/dev/stdout`是常规文件，因此可能会被截断。再次尝试您的测试，但这次制作`file`一个 fifo 而不是常规文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T10:57:59.900

正如预期的那样，我看到 stderr 的输出进入文件：

```
$> sh test.sh > file 2>&1
$> cat file 
StdErr
StdOut 
```

这是 bash 3.2.48。

```
$> bash --version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T13:37:15.817

我在使用 Bash 版本的 RedHat 上遇到了同样的问题`GNU bash, version 3.2.25(1)-release (x86_64-redhat-linux-gnu)`。在我的带有 Bash 和 ZSH 的 Mac 上，两者都按预期工作。

```
[13:31:05][user@machine: ~/src]$ bash test
1STD ERR
2STD ERR
3STD OUT
4STD OUT
[13:31:40][user@machine: ~/src]$ bash test >> log 2>&1
[13:31:48][user@machine: ~/src]$ cat log 
4STD OUT
[13:31:52][user@machine: ~/src]$ 
[13:32:10][user@machine: ~/src]$ bash test > log 2>&1
[13:32:15][user@machine: ~/src]$ cat log 
4STD OUT
[13:32:18][user@machine: ~/src]$ 
```

# objective-c - 在 iphone sdk 中一次使用 AVFoundation 和 MPMovieController 预览视频的问题

> ID：11013380
> 
> 赞同：1
> 
> 时间：2012-06-13T10:55:44.667
> 
> 标签：objective-c, ios5, mpmovieplayercontroller, avfoundation

我正在使用`AVFoundation's` `AVCaptureSession`来捕获视频，并且正在使用`MPMoviePlayerController`从服务器播放流式传输的 url（视频）。当我只捕获视频时`AVCaptureSession`没有问题。但是，当我尝试播放流式传输的 url(with `MPMoviePlayerController`) 以及一次捕获视频`AVCaptureSession`时，会出现问题，因为从`AVCaptureSession`停止捕获。

这就是我所做的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication ]delegate]; 
    if([appDelegate isIpad] == YES)
    controlsView = [[UIView alloc] initWithFrame:CGRectMake(self.view.bounds.origin.x+200, self.view.bounds.origin.y+250, self.view.bounds.size.width, self.view.bounds.size.height)];
    else
     controlsView = [[UIView alloc] initWithFrame:self.view.bounds];
    controlsView.backgroundColor = [UIColor blackColor];
    [self.view addSubview:controlsView];
    [self.view sendSubviewToBack:controlsView];

    //settingsBtn = [[UIButton alloc]initWithFrame:CGRectMake(10,400, 50, 50)];
    settingsBtn = [[UIButton alloc]initWithFrame:CGRectMake(10,400, 50, 50)];
    [settingsBtn setImage:[UIImage imageNamed:@"settings.png"] forState:UIControlStateNormal];
    [settingsBtn addTarget:self action:@selector(settingsAction) forControlEvents:UIControlEventTouchUpInside];
    [controlsView addSubview:settingsBtn];

    callButton = [[UIButton alloc]initWithFrame:CGRectMake(260,400, 50, 50)];

    if(isCallButtonClicked ==NO)
    [callButton setImage:[UIImage imageNamed:@"call.png"] forState:UIControlStateNormal];

    else
        [callButton setImage:[UIImage imageNamed:@"callEnd.png"] forState:UIControlStateNormal];
    [callButton addTarget:self action:@selector(callAction) forControlEvents:UIControlEventTouchUpInside];

    [controlsView addSubview:callButton];

    statusLabel = [[UILabel alloc]initWithFrame:CGRectMake(120, 20, 150, 40)];
    statusLabel.textColor = [UIColor whiteColor];
    statusLabel.backgroundColor = [UIColor clearColor];
    statusLabel.textAlignment = UITextAlignmentLeft;
    statusLabel.font = [UIFont boldSystemFontOfSize:20];

    dot1 = [[UIView alloc] initWithFrame:CGRectMake(75, 20, 7, 7)];
    dot1.layer.cornerRadius = 5;
    dot1.backgroundColor = [UIColor whiteColor];
    [statusLabel addSubview:dot1];

    dot2 = [[UIView alloc] initWithFrame:CGRectMake(84, 20, 7, 7)];
    dot2.layer.cornerRadius = 5;
    dot2.backgroundColor = [UIColor whiteColor];
    [statusLabel addSubview:dot2];

    dot3 = [[UIView alloc] initWithFrame:CGRectMake(93, 20, 7, 7)];
    dot3.layer.cornerRadius = 5;
    dot3.backgroundColor = [UIColor whiteColor];
    [statusLabel addSubview:dot3];

    downStreamView = [[UIView alloc]initWithFrame:CGRectMake(controlsView.bounds.origin.x, controlsView.bounds.origin.y, controlsView.bounds.size.width, controlsView.bounds.size.height - 70)];
    [[controlsView layer] addSublayer:downStreamView.layer];
    downStreamView.layer.backgroundColor = [UIColor greenColor].CGColor;

    AVCaptureSession *captureSession = [[AVCaptureSession alloc]init];
    NSError *error;

    /* getting the device input */

    AVCaptureDeviceInput *videoInput = [AVCaptureDeviceInput deviceInputWithDevice:[self frontFacingCamera] error:&error];
    if(error)
    {
        NSLog(@"%@",@"Could not create video input");
    }

    [captureSession addInput:videoInput];

    AVCaptureDeviceInput *audioInput = [AVCaptureDeviceInput deviceInputWithDevice:[self audioDevice] error:&error];
    [captureSession addInput:audioInput];
    audioOutput = [[AVCaptureAudioDataOutput alloc]init];
    [captureSession addOutput:audioOutput];

    previewLayer = [[AVCaptureVideoPreviewLayer alloc]initWithSession:captureSession];
    [previewLayer setFrame:CGRectMake(controlsView.bounds.origin.x, controlsView.bounds.origin.y, controlsView.bounds.size.width, controlsView.bounds.size.height - 70)];
    [previewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];

    [[controlsView layer] addSublayer:previewLayer];

    [captureSession startRunning];
}

//make call Action
-(void)makeCallAction
{
    if(isCallButtonClicked == NO)
    {
        statusLabel.text = @"Dialling";
        [controlsView addSubview:statusLabel];
        if(!isAnimationStarted)
        [self animate];
        [callButton setImage:[UIImage imageNamed:@"callEnd.png"] forState:UIControlStateNormal];

        [UIView animateWithDuration:2.0
                         animations:^{ 

                             CGRect frame = CGRectMake(downStreamView.layer.bounds.origin.x, downStreamView.layer.bounds.size.height-100, 100, 100);
                             previewLayer.frame = frame;
                             [downStreamView.layer addSublayer:previewLayer];
                         }
                         completion:^(BOOL finished){
                             //Do nothing
                     }];

        isCallButtonClicked = YES;
    }
    else if(isCallButtonClicked == YES)
    {
        [statusLabel removeFromSuperview];
        [callButton setImage:[UIImage imageNamed:@"call.png"] forState:UIControlStateNormal];

        [UIView animateWithDuration:2.0
                         animations:^{ 
                             [previewLayer setFrame:CGRectMake(controlsView.bounds.origin.x, controlsView.bounds.origin.y, controlsView.bounds.size.width, controlsView.bounds.size.height - 70)];
                             [[controlsView layer] addSublayer:previewLayer];
                         } 
                         completion:^(BOOL finished){
                             //Do nothing
                         }];
        isCallButtonClicked = NO;
    }
}

//Settings Action

-(void)settingsAction
{
    NSString *nibName = nil;

    if ([[[UIDevice currentDevice] model] isEqualToString:@"iPhone"] || [[[UIDevice currentDevice] model] isEqualToString:@"iPhone Simulator"]) {
        nibName = @"SettingsViewController";
    }     
    else {
        nibName = @"SettingsViewController_iPad";
    }
    SettingsViewController *settingsController = [[SettingsViewController alloc]initWithNibName:nibName bundle:nil];

    [self.navigationController presentModalViewController:settingsController animated:YES];
}

-(void)callAction
{
    NSURL *theMovieURL = [NSURL URLWithString:@"someURL.m3u8"];
    if (theMovieURL)
    {
        if ([theMovieURL scheme])   // sanity check on the URL
        {
            /* Play the movie with the specified URL. */
            [self playStreamingURL:theMovieURL];
        }
    }
    [self makeCallAction];
}

-(void)playStreamingURL:(NSURL *)aUrlStr
{
    MPMovieSourceType movieSourceType = MPMovieSourceTypeUnknown;
    /* If we have a streaming url then specify the movie source type. */
    if ([[aUrlStr pathExtension] compare:@"m3u8" options:NSCaseInsensitiveSearch] == NSOrderedSame) 
    {
        movieSourceType = MPMovieSourceTypeStreaming;
    }
    [self createAndPlayMovieForURL:aUrlStr sourceType:movieSourceType];
}

-(void)createAndPlayMovieForURL:(NSURL *)movieURL sourceType:(MPMovieSourceType)sourceType
{
    [self createAndConfigurePlayerWithURL:movieURL sourceType:sourceType];

    /* making the player to be visible in full screen mode */
    //if(!self.moviePlayerController.fullscreen)
    //  self.moviePlayerController.fullscreen = YES;

    /* disabling the controls of the movie player */
    self.moviePlayerController.controlStyle = MPMovieControlStyleNone;

    /* Play the movie! */
    [[self moviePlayerController] play];
}

-(void)createAndConfigurePlayerWithURL:(NSURL *)movieURL sourceType:(MPMovieSourceType)sourceType 
{    
    [controlsView addSubview:downStreamView];

    /* Create a new movie player object. */
    MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];

    if (player) 
    {
        /* Save the movie object. */
        [self setMoviePlayerController:player];

        player.contentURL = MPMovieControlStyleNone;
        //if(!player.fullscreen)
        //  player.fullscreen = YES;

        /* Register the current object as an observer for the movie
         notifications. */
        // [self installMovieNotificationObservers];

        /* Specify the URL that points to the movie file. */
        [player setContentURL:movieURL];        

        /* If you specify the movie type before playing the movie it can result 
         in faster load times. */
        [player setMovieSourceType:sourceType];

        /* Apply the user movie preference settings to the movie player object. */
        //[self applyUserSettingsToMoviePlayer];

        /* Add a background view as a subview to hide our other view controls 
         underneath during movie playback. */

        //CGRect viewInsetRect = CGRectInset ([self.view bounds],
        // kMovieViewOffsetX,
        //kMovieViewOffsetY );
        /* Inset the movie frame in the parent view frame. */
        [[player view] setFrame:downStreamView.bounds];

        [player view].backgroundColor = [UIColor redColor];

        /* To present a movie in your application, incorporate the view contained 
         in a movie player’s view property into your application’s view hierarchy. 
         Be sure to size the frame correctly. */
        [downStreamView.layer addSublayer: [player view].layer];        
    }    
}

-(void)installMovieNotificationObservers
{
    MPMoviePlayerController *player = [self moviePlayerController];

    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(loadStateDidChange:) 
                                                  name:MPMoviePlayerLoadStateDidChangeNotification 
                                               object:player];

    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(moviePlayBackDidFinish:) 
                                                 name:MPMoviePlayerPlaybackDidFinishNotification 
                                               object:player];

    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(mediaIsPreparedToPlayDidChange:) 
                                                 name:MPMediaPlaybackIsPreparedToPlayDidChangeNotification 
                                               object:player];

    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(moviePlayBackStateDidChange:) 
                                                 name:MPMoviePlayerPlaybackStateDidChangeNotification 
                                               object:player];        
}

/*  Notification called when the movie finished playing. */
- (void) moviePlayBackDidFinish:(NSNotification*)notification
{
    NSNumber *reason = [[notification userInfo] objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey]; 
    switch ([reason integerValue]) 
    {
        /* The end of the movie was reached. */
        case MPMovieFinishReasonPlaybackEnded:
        /*
        Add your code here to handle MPMovieFinishReasonPlaybackEnded.
        */
        break;

        /* An error was encountered during playback. */
        case MPMovieFinishReasonPlaybackError:
        NSLog(@"An error was encountered during playback");
        [self performSelectorOnMainThread:@selector(displayError:) withObject:[[notification userInfo] objectForKey:@"error"] waitUntilDone:NO];
        [self removeMovieViewFromViewHierarchy];
        break;

        /* The user stopped playback. */
        case MPMovieFinishReasonUserExited:
        [self removeMovieViewFromViewHierarchy];
        break;

        default:
        break;
    }
}

/* Remove the movie view from the view hierarchy. */
-(void)removeMovieViewFromViewHierarchy
{
    MPMoviePlayerController *player = [self moviePlayerController];

    [player.view removeFromSuperview];
}

- (void)animate {

    isAnimationStarted = YES;

    //First Animation
    [UIView animateWithDuration:0.5 animations:^{

        dot1.alpha = 1;
        dot2.alpha = 0.5;
        dot3.alpha = 0.5;

        } completion:^(BOOL finished) {

            //2nd Animation
            [UIView animateWithDuration:0.5 animations:^{

                dot1.alpha = 0.5;
                dot2.alpha = 1;
                dot3.alpha = 0.5; 

                } completion:^(BOOL finished) {

                    //3rd Animation
                    [UIView animateWithDuration:0.5 animations:^{

                        dot1.alpha = 0.5;
                        dot2.alpha = 0.5;
                        dot3.alpha = 1;

                        } completion:^(BOOL finished) {

                            [self performSelector:@selector(animate)];
                            }];
                    }];           
            }];
}

// Find a camera with the specificed AVCaptureDevicePosition, returning nil if one is not found

- (AVCaptureDevice *) cameraWithPosition:(AVCaptureDevicePosition) position
{

    NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];

    for (AVCaptureDevice *device in devices) {

        if ([device position] == position) {

            return device;

        }

    }

    return nil;

}

// Find a front facing camera, returning nil if one is not found

- (AVCaptureDevice *) frontFacingCamera
{
    return [self cameraWithPosition:AVCaptureDevicePositionFront];   
}

// Find a back facing camera, returning nil if one is not found

- (AVCaptureDevice *) backFacingCamera
{    
    return [self cameraWithPosition:AVCaptureDevicePositionBack];   
}

- (AVCaptureDevice *) audioDevice
{
    NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeAudio];
    if ([devices count] > 0) {

        return [devices objectAtIndex:0];
    }
    return nil;
}

-(void)audioData:(id)info
{
    NSArray *connections = audioOutput.connections;
    AVCaptureConnection *connection = [connections objectAtIndex:0];
    NSArray *audioChannels = connection.audioChannels;
    AVCaptureAudioChannel *audioChannel = [audioChannels objectAtIndex:0];
    //[label setText:[NSString stringWithFormat:@"%f", audioChannel.averagePowerLevel]];
} 
```

伙计请帮我解决这个问题:(

问候

# file-io - 如何在硒中创建一个新文件？

> ID：11013382
> 
> 赞同：-1
> 
> 时间：2012-06-13T10:55:48.513
> 
> 标签：file-io, selenium, selenium-rc, selenium-ide

如何在硒中创建一个新文件？

```
And also how can i write a data into the newly created file ? 
```

selenium IDE 和 Selenium RC 有何不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:10:04.693

假设从您的[最后一个问题和您的评论那里](https://stackoverflow.com/questions/11011856/how-to-parse-string-to-get-only-desired-text)，您想从页面中获取一些文本并将其保存在文件中。

我可能是错的，但我认为你不能在 Selenium IDE 中做到这一点，并且需要 Selenium RC（一年前已正式弃用）或 Selenium WebDriver 中的编程语言的全部功能。

一旦您以您喜欢的任何语言使用一种或另一种语言（目前支持 C#、Java、Ruby、Perl 和 PHP），您就可以使用该[语言的](https://www.google.com/search?q=Java%20write%20into%20file) [标准](https://www.google.com/search?q=C%23%20write%20into%20file) [工具](https://www.google.com/search?q=Ruby%20write%20into%20file) [写入](https://www.google.com/search?q=Perl%20write%20to%20file)文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:22:46.120

关于您的文件问题，不清楚您是指测试文件、Selenium 服务器上的文件，还是运行 Selenium 驱动的浏览器的客户端上的文件。

关于 Selenium IDE 与 RC，该问题已在以下位置得到解答：

[Selenium IDE、Server、RC、2.0 和 WebDriver 有什么区别？](https://stackoverflow.com/questions/6995016/what-is-the-difference-between-selenium-ide-server-rc-2-0-and-webdriver).

# php - Doctrine Common 试图创建注释

> ID：11013387
> 
> 赞同：1
> 
> 时间：2012-06-13T10:56:07.250
> 
> 标签：php, doctrine-orm

我正在尝试使用 Doctrine Common 来创建自己的注释。[http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html与](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html)[https://github.com/doctrine/common](https://github.com/doctrine/common)不匹配，因为`Call to undefined method Doctrine\\Common\\Annotations\\AnnotationReader::setDefaultAnnotationNamespace`和`PHP Fatal error: Call to undefined method Doctrine\\Common\\Annotations\\AnnotationRegistry::registerAnnotationNamespace`. 我检查了来源，他们不在那里。根据 git log 他们在一年前被删除。

我有一个 PSR-0 自动加载器（来自 Symfony）。所以我有一个 PSR-0 加载程序期望的文件：

```
namespace My\Test;

/**
 * @Annotation
 */
class Foo {

} 
```

另一个班级

```
namespace My\Annotated

/**
 * @My\Test\Foo
 */
class Test {
} 
```

读者：

```
namespace My\Reader

use ReflectionClass;
use Doctrine\Common\Annotations\AnnotationReader;
use Doctrine\Common\Annotations\AnnotationRegistry;
use My\Test\Foo;

$reader = new AnnotationReader();
$reflectionClass = new ReflectionClass('My\\Annotated\\Test');
$classAnnotations = $reader->getClassAnnotations($reflectionClass);
var_dump($classAnnotations); 
```

Gets：`"[Semantical Error] The annotation "@My\\Test\\Foo" in class My\\Annotated\\test was never imported. Did you maybe forget to add a "use" statement for this annotation?"`我很可能会这样做，但对于我的生活，我无法弄清楚在哪里添加它。如果可能的话，我真的很想使用@Foo。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-20T14:56:19.333

我偶然发现了这个问题，错误消息如下：

```
Fatal error: Uncaught exception
Doctrine\Common\Annotations\AnnotationException' with message '[Semantical Error] 
The annotation "@Symfony\Component\Validator\Constraints\NotNull" in property My\Namespace\Model\Foo\Bar::$name does not exist, or could not be auto-loaded.' 
in var/www/virtual/hive/current/vendor/doctrine/annotations/lib/Doctrine/Common/Annotations/AnnotationException.php on line 54 
```

当我试图让 symfony2 Validator 组件在遗留的非 symfony2 项目中作为独立组件工作时。

我还认为注释应该已经自动加载，而确实必须特别意识到必须使用教义的自动加载器才能使注释正常工作。

我查看了 symfony2 如何加载注册表，他们在`app/autoload.php`

```
<?php

use Doctrine\Common\Annotations\AnnotationRegistry;
use Composer\Autoload\ClassLoader;

/**
 * @var ClassLoader $loader
 */
$loader = require __DIR__.'/../vendor/autoload.php';

AnnotationRegistry::registerLoader(array($loader, 'loadClass')); 
```

返回 $loader;

我的项目使用一个`bootstrap.inc.php`总是会被加载的文件，它有：

```
require_once PROJECT_PATH . '/vendor/autoload.php'; 
```

我只是将它重构为看起来相似：

```
use Doctrine\Common\Annotations\AnnotationRegistry;

...

$loader = require_once PROJECT_PATH . '/vendor/autoload.php';
AnnotationRegistry::registerLoader([$loader, 'loadClass']); 
```

然后找到了注解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:48:03.193

自动加载显然`AnnotationRegistry::registerAutoloadNamespace`是由 PSR-0 自动加载器处理的。[文档/来源](https://github.com/doctrine/common/blob/2.2.2/lib/Doctrine/Common/Annotations/AnnotationRegistry.php#L54)。

我发现你可以`use My\Test\Foo`在带注释的文件中做一个`@Foo`作为注释使用。其原因可能是因为 Doctrine仅针对语句[重新解析文件。](https://github.com/doctrine/common/blob/master/lib/Doctrine/Common/Annotations/PhpParser.php)`use`

# python - django formset中的多个文件名

> ID：11013394
> 
> 赞同：0
> 
> 时间：2012-06-13T10:56:33.007
> 
> 标签：python, django, django-forms

我所有的对象 newmedia 都以相同的名称保存。我怎样才能解决这个问题？

```
#view.py
if request.method == 'POST':
    formset = MediaFormSet(request.POST, request.FILES)
    if formset.is_valid():
        Page_key = Page.objects.get(pk=1)
        slide = SlideshowComponent(page=Page_key, order=0, label="slideshow", x=0, y=0, width=0, height=0, viewport_type="simle_page", keywords="slideshow")
        slide.save()      
        for filename, file in request.FILES.iteritems():
            name = request.FILES[filename].name               
        for form in formset.forms:        
            file_type = file.content_type
            if file_type == "image/png" or file_type == "image/jpeg" or file_type == "image/gif":
                newmedia = formset.save(commit=False)
                newmedia.filename = name
                newmedia.content_type = "photos"
                newmedia.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:08:55.687

我猜你省略了一个表格：

```
 for filename, file in request.FILES.iteritems():
        name = request.FILES[filename].name               
        for form in formset.forms:        
            file_type = file.content_type
            if file_type == "image/png" or file_type == "image/jpeg" or file_type == "image/gif":
                newmedia = formset.save(commit=False)
                newmedia.filename = name
                newmedia.content_type = "photos"
                newmedia.save() 
```

否则它始终保留您处理的最后一个文件的名称。

编辑：事实上，我想这也不是你想要的。您应该跟踪您已处理的 formset.forms，然后指定与尚未处理的 formset.forms 一起出现的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:40:46.673

相反，我有 2 个 for，我只用一个 for 做所有事情。

```
for file in request.FILES.getlist('form-0-source'):
    file_type = file.content_type
    if file_type == "image/png" or file_type == "image/jpeg" or file_type == "image/gif":
        name= file.name.split('.')[0]
        newmedia = Media(source=file, filename=name, content_type = "photos", created='03/25/12')
        newmedia.save()                  
        image2 = ImageComponent(page=Page_key, order=0, label="imagem", x=0, y=0, width=0, height=0, viewport_type="simle_page", keywords="imagem", media=newmedia, is_slideshow='true')
        image2.save()
        slide.image.add(image2)                 
    else:
        return render_to_response('revista_digital/error.html', context_instance=RequestContext(request)) 
```

# c# - Outlook 2010 - C# - 获取与邮件关联的帐户

> ID：11013397
> 
> 赞同：3
> 
> 时间：2012-06-13T10:56:46.637
> 
> 标签：c#, outlook, add-in, account

我正在创建一个 Outlook 加载项，可以将选定的电子邮件保存到外部数据库。

使用`Office.IRibbonControl`我可以获得所选电子邮件的列表，但我需要知道这些邮件与哪个帐户相关联。

我的意思是，如果 Outlook 从`toto@exemple.com`和从接收消息`otot@exemple.com`，当我想保存消息时，我需要知道该信息。

我不能使用发件人/收件人之类的信息，因为它可能是收入电子邮件之类的结果。

目前，我发现的唯一方法是使用当前文件夹路径..

```
public void SayHello(Office.IRibbonControl control)
{
    MessageBox.Show(
        "Folder: " + (control.Context as Outlook.Explorer).CurrentFolder.FolderPath,
        "Test",
        MessageBoxButtons.OK,
        MessageBoxIcon.Information);
} 
```

但方法不够好。如果我打开一条消息（*在一个单独的窗口中*）然后我更改了当前文件夹，它就会失败。

此外，`Outlook.Explorer.CurrentAccount`没有像我预期的那样工作。

所以这是我的问题：如何访问具有`Outlook.MailItem`对象的相关帐户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:01:37.297

您可以获取 an 的父文件夹 ( [`MailItem.Parent`](http://msdn.microsoft.com/en-us/library/ff863655.aspx))[`Outlook.MailItem`](http://msdn.microsoft.com/en-us/library/ff861252.aspx)以确定其文件夹路径 ( [`Folder.FolderPath`](http://msdn.microsoft.com/en-us/library/ff863981.aspx))。

```
Outlook.Folder parent = MailItem.Parent as Outlook.Folder;
string itemPath = parent.FolderPath; 
```

# xml - 使用 XPath 验证 Xml 节点

> ID：11013399
> 
> 赞同：0
> 
> 时间：2012-06-13T10:56:49.310
> 
> 标签：xml, validation, xpath

除了使用 XSD 之外，是否可以使用 XPath验证所有`<AAA>`节点是否包含>？`<BBB`

例如，我需要验证 //AAA/CCC 的计数 = //AAA 的计数

如果可能的话，我需要用一种表达方式做到这一点

```
<root>
  <AAA>
    <CCC/>
  </AAA>
  <AAA>
    <BBB/>
  </AAA>
</root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:14:08.863

考虑到在我的代码中有一个简单的验证选定节点计数为 0，我碰巧自己回答了这个问题：

```
//AAA[not(CCC)] 
```

这给出了 1 个节点计数，即验证成功按预期失败。

# ios5 - 如何处理 xcode 4.2、ios5.0 中的引导错误

> ID：11013408
> 
> 赞同：0
> 
> 时间：2012-06-13T10:57:28.513
> 
> 标签：ios5, xcode4.2, bootstrapping

我在 ios 中做了两个示例应用程序。这两个应用程序我都使用故事板完成了。然后我将一个应用程序的两个类复制到另一个应用程序。然后我保存并编译，它工作>但是第二次当我构建应用程序时我运行该应用程序，我收到这样的错误：

**无法使用引导服务器注册 BundleIdentifier.application 名称。错误：未知错误代码。这通常意味着该进程的另一个实例已经在运行或挂在调试器中。(gdb)**

如何解决这个错误？请给我一些解决这个问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:28:57.220

此错误的原因是您正在模拟器或设备中测试应用程序并突然更改为另一个而不停止它。

为此，您需要在移动以进行另一个 ios 选择之前从导航器中正确关闭应用程序。

如果遇到此问题，请重新启动 xcode 和模拟器（也重置模拟器）。

# mysql - 更改表添加新字段“ON UPDATE CURRENT_TIMESTAMP”

> ID：11013411
> 
> 赞同：14
> 
> 时间：2012-06-13T10:57:35.923
> 
> 标签：mysql

这是我的桌子：

```
CREATE TABLE `megssage`(
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(256) DEFAULT NULL,
  `time_create` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

我想`time_updated`使用默认值“ON UPDATE CURRENT_TIMESTAMP”添加新列。

我试过这个：

```
ALTER TABLE `megssage` 
   CHANGE `time_updated` `time_updated` TIMESTAMP NULL DEFAULT  ON UPDATE CURRENT_TIMESTAMP 
```

但我收到一个错误。有人能帮我吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-13T11:08:41.977

如果要向**`megssage`**表中添加字段：

```
ALTER TABLE `megssage` ADD time_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-15T14:29:38.610

尝试

```
ALTER TABLE `megssage` 
    CHANGE COLUMN `time_updated` `time_updated` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T11:03:16.563

您可以使用 ：

```
ALTER TABLE `megssage` ADD `TIME_UPDATED` TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL AFTER `time_create` 
```

# excel - 将 Excel 工作表数据导入 Sharepoint 列表的工具

> ID：11013412
> 
> 赞同：1
> 
> 时间：2012-06-13T10:57:44.223
> 
> 标签：excel, list, sharepoint-2010, sharepoint-2007

是否有任何工具可以将 Excel 工作表数据导入 Sharepoint 列表？我找到了一个[工具](http://www.rddevsolutions.com/Pages/Magic/MagicScreenshots.aspx#)来做到这一点。有没有其他方法可以完成这项任务？

[应该支持任何Excel版本和任何SharePoint版本]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:11:32.263

恕我直言

简单的复制/粘贴表单 Excel 到 DataSheet 视图可以涵盖更简单的场景（如果您正在复制文本和/或数值）如果您需要复制一些其他数据，例如用户名，事情可能会变得困难。

[批量复制并粘贴到 SharePoint 列表中](http://clintoncherry.wordpress.com/2008/02/27/bulk-copy-and-paste-into-a-sharepoint-list/)

一种替代方法是使用例如编写您自己的解决方案。控制台应用程序和 Web 服务（2007 和 2010）或使用客户端对象模型（2010）。甚至编写 PowerShell 脚本来执行某些特定和/或半通用的导入工作也不难。

有很多不同的可能性（例如，如何格式化 excel 文件），找到通用工具并不是一件容易的事。如果您能够制定一些 Excel 格式标准，那么开发自己的解决方案比购买一些强大的通用工具更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T02:29:07.477

Sharepoint 具有导入 Excel 工作表的 OOB 功能。

你可以在这里查看。

[http://sharepointbuzzer.com/2010/10/22/import-excel-sheet-as-sharepoint-list/](http://sharepointbuzzer.com/2010/10/22/import-excel-sheet-as-sharepoint-list/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-10T09:58:40.197

**从 excel 中复制数据并在IE 浏览器**的数据表视图中打开列表，然后将其粘贴到第二列中。

# javascript - Java Script MVC 窃取/buildjs - 删除空的 .js 文件

> ID：11013413
> 
> 赞同：0
> 
> 时间：2012-06-13T10:57:46.610
> 
> 标签：javascript, lint, javascriptmvc, envjs

当我尝试使用 Javascript MVC 的窃取/buildjs 进行构建时，envJS 默默地无法压缩和检查 JavaScript 文件是否有错误。

我阅读了 envJS 的文档，发现如果在某些情况下您尝试构建空的 .js 文件，envJS 将会失败。

显然是在我的情况下，后来我创建了一些空的 .js 文件。

我需要一种方法来在构建之前添加对空 .js 和 .ejs 文件的检查。

运行steal / buildjs时检查空.js和.ejs的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:24:40.400

我会使用[find](https://superuser.com/questions/266200/find-and-remove-all-empty-files)：

```
find . -type f \( -name *.js -o -name *.ejs \) -size 0 -print 
```

`-print`确定的`-delete`时候再换。

# ms-word - 我可以使用 Microsoft Word 文件作为 JasperReports 的报告模板吗？

> ID：11013415
> 
> 赞同：3
> 
> 时间：2012-06-13T10:57:52.913
> 
> 标签：ms-word, jasper-reports

我在 Microsoft Word 文件中有几个模型合同，每个文件多达 20 页）。我想使用 Jasper Reports 来填写这些合同。

我尝试将 doc 文件导入 iReport，但这不起作用。

有没有办法将 Microsoft Word 文件转换为 JasperReport 模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:26:30.977

尝试将文档转换为 excel，然后将 excel 用作 ireport 中的数据源。

**编辑**：基于 OP 的评论。

您不能将 Microsoft Word 文件用作 JasperReport 模板。您需要为 JasperReports 创建一个 JRXML 文件。可以使用 rtf 或 html 作为文本字段的源，但此类字段的最终格式相当纯粹。

您的另一个选择是不使用 JasperReports 并直接使用[Apache Poi](http://poi.apache.org/)操作 Microsoft Word 文件。

# objective-c - 我应该释放 cStringUsingEncoding 返回的字符串吗？

> ID：11013421
> 
> 赞同：2
> 
> 时间：2012-06-13T10:57:59.297
> 
> 标签：objective-c, memory-management

如果我打电话`[NSString cStringUsingEncoding:]`，我应该`free()`在我用完后打电话吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:00:39.497

不，文档说得很清楚：

> 保证返回的 C 字符串仅在接收器被释放或当前自动释放池被清空之前有效，以先发生者为准。您应该复制 C 字符串，或者`getCString:maxLength:encoding:`如果需要在此时间之后存储 C 字符串，请使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:01:25.647

我认为 cStringUsingEncoding 正在为转换后的字符串分配内存以指定编码因此，如果您不使用自动释放池，则永远不会释放此内存。

# asp.net - 旧页面的 URL 路由和永久页面重定向

> ID：11013428
> 
> 赞同：1
> 
> 时间：2012-06-13T10:58:31.227
> 
> 标签：asp.net, asp.net-mvc, routes, http-status-code-301

假设我们公司有一个由asp.net web form v1.1开发的网站。它已经运行了 5 年。人们通过关键字搜索谷歌并获得链接到我们的网站...这意味着谷歌缓存了我们网站的所有页面。现在我们公司计划用 asp.net 4.0 开发我们的网站，我们公司的 CTO 想使用 asp.net 4.0 的路由功能来对搜索引擎友好。我知道如何使用 url 路由功能....这里是 url 路由的小示例片段。

![在此处输入图像描述](../Images/dc6c060a416814b932490141b63a5b87.png)

我们的新网站页面名称将更改。所以当有人搜索谷歌并获取链接时，当点击这些链接时，请求将来到我们的网站，但页面未找到将显示，因为页面名称将被更改。因此，如何以这样的方式编写逻辑，因为当旧请求到来时，路由将重定向到正确的页面，并为谷歌进行永久重定向，因为下次用户将获得正确的页面 url。所以我关心的是如果旧页面不存在，如何编写将用户驱动到正确页面的逻辑，用户将使用路由重定向到正确的页面。请帮助我的代码和概念。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:08:50.233

您需要使用 HTTP 301 永久重定向

使用 .NET Framework v4：

```
Response.RedirectPermanent("NewPage.aspx"); 
```

编辑：我跳得太快了......一个好的 MVC 解决方案是：[http ://www.eworldui.net/blog/post/2008/04/25/ASPNET-MVC-Legacy-Url-Routing.aspx](http://www.eworldui.net/blog/post/2008/04/25/ASPNET-MVC-Legacy-Url-Routing.aspx)

这会将请求重定向到正确的位置并返回 301...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:36:11.687

如果您通过 MVC 进行操作，您将始终需要管理这些旧路由。我认为最好的方法是直接在这种情况下使用 IIS。IIS 中的 url 模块允许您非常轻松地配置永久重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:09:18.920

我不是 MVC 专家，实际上是初学者，所以我想到的解决方案是您必须为现有页面注册所有路由，例如：

```
routes.MapRoute(
            "BooksCategory", // Route name
            "products/books.aspx", // URL with parameters
            new { controller = "Products", action = "Browse", category = "Books" }
        ); 
```

您可以根据需要对其进行增强。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T11:50:16.840

我建议使用这些工具的混合体。您应该返回 301，因为它是永久移动。谷歌在开始扫描你的新网站时应该注意到这一点。

我建议您还需要将旧网址分开，这样它们就不会干扰当前网站。在将来的某个时候，也许当这个新站点成为旧站点时，您会想要组织您的网址。通过了解应用程序需要什么以及 SEO 需要什么可能会有所帮助。

您可能可以使用 IIS 和它的重定向模块进行 SEO 重定向。另外，看看 Googles（和 Bings）网站管理员工具。他们应该帮助您了解搜索引擎在您的网站上看到的内容。

# objective-c - 带有按钮的 UIScrollView 分页

> ID：11013430
> 
> 赞同：0
> 
> 时间：2012-06-13T10:58:36.720
> 
> 标签：objective-c, ios, uiscrollview, paging

我想知道你如何创建一个以按钮为对象的分页 UIScrollView？

到目前为止，我已经想办法用图像制作一个类似的 UIScrollView，它看起来像这样：

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSArray *pictures = [NSArray arrayWithObjects: [UIImage imageNamed:@"nr1"], [UIImage imageNamed:@"nr2"], nil];

    for (int i = 0; i < pictures.count; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;

        UIImageView *subview = [[UIImageView alloc] initWithFrame:frame];
        subview.image = [pictures objectAtIndex:i];
        [self.scrollView addSubview:subview];
    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * pictures.count, self.scrollView.frame.size.height);

} 
```

任何教程将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:01:03.377

您只需添加按钮而不是图像

替换这个

```
UIImageView *subview = [[UIImageView alloc] initWithFrame:frame];
subview.image = [pictures objectAtIndex:i];
[self.scrollView addSubview:subview]; 
```

和

```
UIButton *subview = [UIButton buttonWithType:UIButtonTypeRoundedRect];
subview.frame = frame;
[subview setTitle:@"Test" forState:UIControlStateNormal];
[self.scrollView addSubview:subview]; 
```

# c# - Nhibernate 3.3.0.4000 错误地孤立子实体

> ID：11013431
> 
> 赞同：2
> 
> 时间：2012-06-13T10:58:37.813
> 
> 标签：c#, nhibernate, fluent-nhibernate

我无法在本地重新创建生产系统中的间歇性问题。似乎正在发生的事情是，在编辑子实体并保存包含集合的父级期间，由于没有明显的原因，子实体上的父级关联已在数据库中删除。有效地孤立子实体。

这是流畅的映射：

```
 mapping.HasMany<ExpenseItem>(x => x.ExpenseItems).Cascade.AllDeleteOrphan(); 
```

实体也可以直接保存（它也是聚合根），但在测试期间，这并没有显示为删除父关联。

子对象中没有对父对象本身的引用，关联全部在 Nhibernate 处理的数据库中。

也不可能将相同的子实体分配给另一个父实体，因为费用项目（子实体）不能直接添加到其父实体之外。请参阅下面的代码。

```
 public virtual ExpenseItem AddNewExpenseItem(ExpenseAnalysis analysis,
            string recipientName,
            string purchaseAccountReference,
            string expenseDescription,
            string expenseNotes,
            Money value,
            VATAnalysis vat)
        {
            Validate.IsNotNull<ExpenseAnalysis>(analysis);
            Validate.IsNotNull(expenseDescription);
....

            ExpenseItem newExpenseItem = new ExpenseItem(analysis,
                recipientName,
                purchaseAccountReference,
                expenseDescription,
                expenseNotes,
                value,
                vat,
                expenseItemUniqueReference,
                true,
                Candidate.Assessment);
            _expenseItems.Add(newExpenseItem);
.... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:47:04.063

查看您的映射肯定会有所帮助，但请看一下

我还将 ExpenseItem 映射到其父级的引用

[如何在 NHibernate 中删除子对象？](https://stackoverflow.com/questions/302720/how-to-delete-child-object-in-nhibernate)

基本上，您必须在关系上设置逆向，以便 NHibernate 不会尝试使用空受害者更新已删除的记录。而你设置 Cascade.All | Cascade.DeleteOrphans 这样我们不仅可以通过取消受害者来破坏关系，还可以删除整个子记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:53:22.947

此问题是由 NHibernate 中的错误引起的。我已将会话设置为从不刷新，但是当您在会话上调用 isdirty 时，会话首先被刷新。用户正在删除费用项目，然后取消编辑，但在 isdirty 检查期间，删除正在刷新。通过更改针对此类对话的会话管理方式来解决此问题。

# ios - 如何制作出现在 iTunes 应用程序选项卡中的应用程序？

> ID：11013433
> 
> 赞同：0
> 
> 时间：2012-06-13T10:58:43.380
> 
> 标签：ios

一些可以使用 iTunes 的应用程序标签栏添加文件的应用程序，如下图所示。

我也想做我的应用程序。我必须在 iTunes 的应用程序选项卡中添加和删除文件。

我怎样才能做到这一点？

![在此处输入图像描述](../Images/2e9825100c0e0b8c1d1826a8db107b1d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:05:19.760

你应该在 info.plist 中添加这个键

应用程序支持 iTunes 文件共享 true

# android - 没有选择选项的微调器

> ID：11013434
> 
> 赞同：1
> 
> 时间：2012-06-13T10:58:53.610
> 
> 标签：android, android-spinner

我正在尝试创建不应该有任何`select`但不是它的微调器，它应该显示空白，单击可以选择的项目后。

这是我的代码，请帮忙。

```
urineGlucoseSpinner =  (Spinner) view.findViewById(R.id.spnner_urine_glucose);

    ArrayList<String> ugList = new ArrayList<String>();
    ugList.add(0,"");
    ugList.add("1.5");
    ugList.add("5.5");
    ugList.add("0.8");
    ugList.add("9.5");
    ugList.add("12.0");

    //ArrayAdapter<String> urineGlucoseAdapter = new ArrayAdapter<String>(getActivity(),android.R.layout.simple_spinner_item, ugList);
    ArrayAdapter<String> urineGlucoseAdapter = new ArrayAdapter<String>(getActivity(),R.layout.custom_spinner_text, ugList);
    urineGlucoseAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    urineGlucoseSpinner.setAdapter(urineGlucoseAdapter);
    urineGlucoseSpinner.setSelection(0);
    urineGlucoseSpinner.setOnItemSelectedListener(new OnUGItemSelected()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:03:58.480

默认情况下，如果您没有选择任何一个，则微调器将采用数组第 0 个元素..您必须制作 ArrayList 的对象，对于第 0 个元素，您必须将“”（null Sting）放在分号内并将其作为第 0 个元素...我认为这个是您问题的唯一解决方案..

```
 ArrayList<String> ugList = new ArrayList<String>();
 ugList.add(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:19:18.893

我可以看到两种方法来做到这一点。

1) 在位置 0 处将空行添加到您的数据中，然后创建一个自定义微调器适配器并覆盖该`getView`方法，并在其中使用`if`将 0 位置视图设置为 GONE（从而摆脱列表中的空行）。

2）另一种方法可能是在您的表单中设置一个空的 EditText，当它获得焦点时，在对话框中弹出一个列表视图，其中包含您可能的选择。

# iphone - grouped tableViewCell - 设置分组表格单元格的背景后没有圆角

> ID：11013435
> 
> 赞同：1
> 
> 时间：2012-06-13T10:58:55.130
> 
> 标签：iphone, objective-c, ios, ipad, ios5

对于分组`UITableViewCell`，我意识到如果设置背景，顶部和底部单元格都会有圆角。但是当你点击它时，它会显示你选中状态的圆角。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:22:52.170

通过代码设置tableview的背景颜色。例如：[tableView setBackgroundColor:[UIColor redColor]];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:11:58.477

```
[tblView.layer setCornerRadius:0.0f]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:45:34.247

然后去创建部分，它会创建你想要的，每个单元格在顶部和底部都有圆形半径。

# javascript - 自闭确认框

> ID：11013436
> 
> 赞同：0
> 
> 时间：2012-06-13T10:59:02.223
> 
> 标签：javascript, confirm

我正在构建一个网络应用程序，并且我正在尝试执行一个功能，其中有一个弹出确认框，在用户处于非活动状态 10 分钟后显示。当弹出窗口打开时，用户可以选择是否继续登录。如果他们没有回答弹出窗口，我需要在 1 分钟后关闭此框。我怎样才能做到这一点。其他一切正常。

**这是我的代码：**

```
function checkTime () {

 setTimeout (function () {

   var dialog = confirm ("Do you want to continue being logged in?");

   if (dialog == true) {

     checkTime ();

   } else {

     window.location = 'LOGOUT URL';    

   }

  }, 10000);

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:04:36.093

您不能使用本机 confirm() 来执行此操作，因为它会停止 JavaScript 在该页面上运行，直到用户单击它为止。

因此，您必须为确认框创建一个插件或尝试其他人。而且它们通常看起来也更好。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:14:47.943

您无法自行关闭确认-作为一种思路，我的银行在其在线银行系统上具有相同的功能-很简单，如果您走开然后回来，那您已经超过 10 分钟了不管你选择什么，它都会道歉并让你退出

该对话框需要人工交互，出于安全原因，它不能被覆盖。为了做你想做的事，你需要使用模态解决方案（如果你不想使用第三方解决方案，这可以用少量的 js 和一些 css 来实现）

我知道这不是您要寻找的答案，对不起，但希望它能给您一些选择的想法

# facebook - 如何使用钛框架获取 Facebook 签名请求

> ID：11013440
> 
> 赞同：0
> 
> 时间：2012-06-13T10:59:18.090
> 
> 标签：facebook, facebook-graph-api, drupal-6, titanium, titanium-mobile

我正在通过钛开发 iphone 应用程序，该应用程序通过服务模块与 drupal 6 服务器通信。

我的要求是当用户从移动设备登录到 facebook 时，它将作为来自服务器端的经过身份验证的用户，以便服务器执行进一步的 facebook 操作。

所以我试图从移动设备获取登录用户的签名请求，但我无法获取登录用户的签名请求。

我调用了以下函数来打开 facebook 登录弹出窗口，

```
Ti.Facebook.authorize(); 
```

在 Facebook 登录后执行以下侦听器，

```
Ti.Facebook.addEventListener('login', function(e) { } 
```

我可以知道如何从设备成功登录到 Facebook 后获取签名请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:35:07.010

我没有从 Titanium 连接到 Facebook 的经验，但两天前安装了他们的一个新示例应用程序：[https ://wiki.appcelerator.org/display/guides/Example+Applications#ExampleApplications-ARti](https://wiki.appcelerator.org/display/guides/Example+Applications#ExampleApplications-ARti)

这个连接到FB，不知道用什么方式。您可以从 GitHub 下载示例代码，也许您觉得它很有用。

# php - 用php做一个拼写检查器

> ID：11013441
> 
> 赞同：3
> 
> 时间：2012-06-13T10:59:23.333
> 
> 标签：php, spell-checking

实际上，我想为印度语言（即旁遮普语）制作拼写检查器。我以前试过做。它首先用空格分解字符串，检查 mysql 是否存在该单词，如果存在，则回显该单词并添加空格，因为explode 删除空格，如果不存在，则回显该单词并带有`similar_text()`建议。但问题是当有标点符号时它会变慢并给出错误......我试图替换标点符号并将它们回显在另一个标签中，`strtr()`但问题是每个单词后都有一个空格，因为爆炸.

除了使用 pspell 或任何其他扩展之外，还有其他方法可以做到这一点，因为我将在共享主机上使用它。

或者有没有其他方法可以在不使用的情况下只检查大字符串中的单词`explode()`？？

请帮忙..

如果需要，您可以向我询问我之前使用的代码...

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:04:05.820

您是否使用[PHP Spell Check](http://www.phpspellcheck.com/)进行了检查？用法很简单：

```
#PHP Source Code
require "phpspellcheck/include.php";

$mySpell = new SpellCheckButton();
$mySpell->InstallationPath = "/phpspellcheck/";
$mySpell->Fields = "ALL";
echo $mySpell->SpellImageButton();

$mySpell = new SpellAsYouType();
$mySpell->InstallationPath = "/phpspellcheck/";
$mySpell->Fields = "ALL";
echo $mySpell->Activate(); 
```

您可以添加自己的旁遮普语词典，让您的工作更轻松。希望能帮助到你！:)

# ios - 获取 JSON 数据时显示活动指示器

> ID：11013442
> 
> 赞同：2
> 
> 时间：2012-06-13T10:59:25.330
> 
> 标签：ios, json

我是IOS编程的初学者。我的问题是我的应用程序从我的 Web 服务器中的 JSON 获取数据，在启动应用程序时，由于获取过程，它会稍微滞后和延迟，所以我想在连接到 JSON 数据时显示活动指示器。我怎样才能做到这一点？

我的 JSON 编码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSURL *urlAddress = [NSURL URLWithString:@"http://emercallsys.webege.com/RedBoxApp/getEvents.php"]; 
    NSStringEncoding *encoding = NULL;
    NSError *error;

    NSString *jsonreturn = [[NSString alloc] initWithContentsOfURL:urlAddress usedEncoding:encoding error:&error];
    NSData *jsonData = [jsonreturn dataUsingEncoding:NSUTF32BigEndianStringEncoding];

    NSDictionary * dict = [[CJSONDeserializer deserializer] deserializeAsDictionary:jsonData error:&error];
    if (dict)
    {
        eventsDetail = [[dict objectForKey:@"eventsDetail"] retain];
    }

    [jsonreturn release];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:19:49.503

使用以下代码

```
//add a UIActivityIndicatorView to your nib file and add an outlet to it
[indicator startAnimating];
indicator.hidesWhenStopped = YES;

dispatch_queue_t queue = dispatch_get_global_queue(
                                                   DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{
    //Load the json on another thread
    NSString *jsonreturn = [[NSString alloc] initWithContentsOfURL:urlAddress usedEncoding:encoding error:NULL];
    [jsonreturn release];        
    //When json is loaded stop the indicator
    [indicator performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:YES];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:45:54.467

您可以使用以下代码：

```
- (void)fetchData
{
    [activityIndicator startAnimating];

    NSURL *url = [NSURL URLWithString:strUrl];

    NSURLRequest *theRequest = [[NSURLRequest alloc]initWithURL:url];

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if(theConnection) {

    }
    else {
        NSLog(@"The Connection is NULL");
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    webData = [[NSMutableData data] retain];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [webData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"ERROR with theConenction %@",error);
    UIAlertView *connectionAlert = [[UIAlertView alloc] initWithTitle:@"Information !" message:@"Internet / Service Connection Error" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [connectionAlert show];
    [connectionAlert release];

    [connection release];
    [webData release];

    return;
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    //NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    //NSLog(@"Received data :%@",theXML);
    //[theXML release];

    NSDictionary * dict = [[CJSONDeserializer deserializer] deserializeAsDictionary: webData error:&error];

    if (dict) {
        eventsDetail = [[dict objectForKey:@"eventsDetail"] retain];
    }

    [activityIndicator stopAnimating];
} 
```

# javascript - JavaScript for 循环

> ID：11013448
> 
> 赞同：0
> 
> 时间：2012-06-13T11:00:07.343
> 
> 标签：javascript, loops, for-loop

写从 1 到 100 的奇数。我为此使用了这段代码：

```
var i=1;
for (i=1; i < 51; i = i + 1){

 document.write(i -1 + i );
  document.write("<br />");
  } 
```

现在，有人可以告诉我这段代码是否正确，或者我可以做得更好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T11:01:46.003

```
for (var i=1; i < 100; i += 2){
  document.write(i);
  document.write("<br />");
} 
```

[http://jsfiddle.net/kX8hn/](http://jsfiddle.net/kX8hn/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T11:01:32.480

```
for (var i=1; i <= 100; i += 2)
    document.write(i + "<br />"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T11:03:52.417

这是错误的，你可以让它变得更好。从 1 开始，以 2 为增量计数到 100：

```
for (var i=1; i < 100; i += 2){
  document.write(i);
  document.write("<br />");
} 
```

`document.write()`关于apply的常见警告。

# python - 如何在 Chameleon 中使用模板继承？

> ID：11013452
> 
> 赞同：11
> 
> 时间：2012-06-13T11:00:13.163
> 
> 标签：python, pyramid, chameleon, template-metal

我正在使用最新的 Pyramid 来构建一个网络应用程序。不知何故，我们开始使用 Chameleon 作为模板引擎。我以前用过 Mako，创建一个基本模板非常简单。变色龙也可以吗？

我试图浏览文档，但似乎找不到简单的解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-14T13:38:55.737

使用 Chameleon >= 2.7.0，您可以使用“加载”TALES 表达式。例子：

主.pt：

```
<html>
<head>
    <div metal:define-slot="head"></div>
</head>
<body>
    <ul id="menu">
        <li><a href="">Item 1</a></li>
        <li><a href="">Item 2</a></li>
        <li><a href="">Item 3</a></li>
    </ul>
    <div metal:define-slot="content"></div>
</body>
</html> 
```

my_view.pt：

```
<html metal:use-macro="load: main.pt">

<div metal:fill-slot="content">
    <p>Bonjour tout le monde.</p>
</div>

</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T00:06:31.453

在 Chameleon 能够从文件系统加载模板之前使用的另一个选项是将“基本”模板作为参数传递。

为了简化事情，我经常将这些东西包装成一个“主题”对象：

```
class Theme(object):

    def __init__(self, context, request):
        self.context = context
        self.request = request

    layout_fn = 'templates/layout.pt'

    @property
    def layout(self):
        macro_template = get_template(self.layout_fn)
        return macro_template

    @property
    def logged_in_user_id(self):
        """
        Returns the ID of the current user
        """
        return authenticated_userid(self.request) 
```

然后可以这样使用：

```
def someview(context, request):
   theme = Theme(context, request)
   ...
   return { "theme": theme } 
```

然后可以在模板中使用：

```
<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    metal:use-macro="theme.layout.macros['master']">
<body>
    <metal:header fill-slot="header">
        ...
    </metal:header>
    <metal:main fill-slot="main">
        ...
    </metal:main>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T04:31:28.020

在此处制作模板：

```
<proj>/<proj>/templates/base.pt 
```

内容：

```
<html>
  <body>
    <div metal:define-slot="content"></div> 
  </body>
</html> 
```

在此处使用模板：

```
<proj>/<proj>/templates/about_us.pt 
```

通过插入内容：

```
<div metal:use-macro="load: base.pt">
    <div metal:fill-slot="content">
        <p>Hello World.</p>
    </div>
</div> 
```

# ruby - 在 linux 上启动 pry shell

> ID：11013454
> 
> 赞同：0
> 
> 时间：2012-06-13T11:00:16.440
> 
> 标签：ruby, linux, gem, pry

当我输入`pry`启动 pry shell 的命令时，我得到了这个：

[在这里输出。无法在 SO 上发布](http://i46.tinypic.com/2pt3prc.png)

为什么撬壳不启动？

安装命令是：

```
rvm pkg install zlib
gem install pry pry-doc
rvm reinstall 1.9.3 
```

# ios - 单击 UIActionSheet 按钮后应用程序挂起

> ID：11013455
> 
> 赞同：1
> 
> 时间：2012-06-13T11:00:20.617
> 
> 标签：ios, uialertview, uiactionsheet

我正在尝试使用 UIAction 表来确认用户的操作。日志打印得很好......但应用程序挂起并在中间显示变亮的圆圈，就像您执行 UIAlert 视图时一样。我确定它很简单......但似乎找不到它。

```
-(IBAction)showActionSheet:(id)sender
{
UIActionSheet *popupQuery = [[UIActionSheet alloc] initWithTitle:@"Are you sure?" delegate:self cancelButtonTitle:@"Cancel Button" destructiveButtonTitle:@"Reset Player" otherButtonTitles:nil];
popupQuery.actionSheetStyle = UIActionSheetStyleBlackOpaque;

[popupQuery showInView:self.view];

}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
if (buttonIndex == 0) {
    NSLog(@"Destructive Button Clicked");
}
else if (buttonIndex == 1) {
    NSLog(@"Cancel Clicked");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:15:48.413

实现这个处理程序而不是`clickedButtonAtIndex`：

```
- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:12:55.570

请释放 UIActionSheet 即您创建的位置

```
[popupQuery release]; 
```

# ipad - 如何为 iPad 显示 apple-touch-startup-image

> ID：11013457
> 
> 赞同：1
> 
> 时间：2012-06-13T11:00:24.380
> 
> 标签：ipad, jquery-mobile

我正在使用以下代码行来显示 start_up 图像

```
 <!-- iPad (Retina, portrait) SPLASHSCREEN-->
<link href="@img_css_scpt/inreviewim_mobile/images/startup_n_icon_images/apple-touch-startup-image-1536x2008.png" media="(device-width: 1536px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
<!-- iPad (Retina, landscape) SPLASHSCREEN-->
<link href="@img_css_scpt/inreviewim_mobile/images/startup_n_icon_images/apple-touch-startup-image-1496x2048.png" media="(device-width: 1536px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
<!-- startup image for web apps - iPad - portrait (768x1004) -->
<link href="@img_css_scpt/inreviewim_mobile/images/startup_n_icon_images/IM_Startup_768x1004.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait)" rel="apple-touch-startup-image" />
<!-- iPad (landscape) SPLASHSCREEN-->
<link href="@img_css_scpt/inreviewim_mobile/images/startup_n_icon_images/apple-touch-startup-image-748x1024.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation: landscape)" rel="apple-touch-startup-image" />
<!-- iPhone (Retina) SPLASHSCREEN-->
<!-- 640x920 for retina display -->
<link rel="apple-touch-startup-image" media="screen and (max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2)" href="@img_css_scpt/inreviewim_mobile/images/startup_n_icon_images/apple-touch-startup-image-640x920.png" />
<!-- iPhone 3GS SPLASHSCREEN-->
<link href="@img_css_scpt/inreviewim_mobile/images/startup_n_icon_images/IM_startup_320x460.png" media="screen and (max-device-width: 320px)" rel="apple-touch-startup-image" /> 
```

**它适用于 iPhone 和 iPhone 视网膜，但不适用于 ipad。**

设备：iPad

iOS：3.2、4.1、4.2、4.3.2

jquery手机版：1.1.0

jQuery：1.7.1

有人可以帮我解决这个问题吗？

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:16:45.283

我认为您的 Retina 横向尺寸向后，应该是：2048x1496 而不是 1496x2048

```
<!-- iPad (Retina, portrait) SPLASHSCREEN-->
<link href="@img_css_scpt/inreviewim_mobile/images/startup_n_icon_images/apple-touch-startup-image-1536x2008.png" media="(device-width: 1536px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />

<!-- iPad (Retina, landscape) SPLASHSCREEN-->
<link href="@img_css_scpt/inreviewim_mobile/images/startup_n_icon_images/apple-touch-startup-image-2048x1496.png" media="(device-width: 1536px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" /> 
```

参考：

*   [http://lineandpixel.com/blog/ios-web-app-icons-and-startup-images](http://lineandpixel.com/blog/ios-web-app-icons-and-startup-images)
*   [https://gist.github.com/2222823](https://gist.github.com/2222823)

有关的：

*   [iOS Web 应用程序（尤其是 iPad）的多个“apple-touch-startup-image”分辨率？](https://stackoverflow.com/questions/4687698/mulitple-apple-touch-startup-image-resolutions-for-ios-web-app-esp-for-ipad)

# entity-framework-4 - 从实体框架生成的 T-SQL 的性能

> ID：11013460
> 
> 赞同：3
> 
> 时间：2012-06-13T11:00:29.563
> 
> 标签：entity-framework-4

尽管我的 DBA 强烈反对，但我最近将实体框架用于一个项目。所以有一天他来到我的办公室抱怨生成的 T-SQL 到达他的数据库。

例如，当我想根据 id 选择产品时，我会这样写：

```
context.Products.FirstOrDefault(p=>p.Id==id); 
```

这转化为

```
SELECT ... FROM (SELECT TOP 1 ... FROM PRODUCTS WHERE ID=@id) 
```

所以他在喊，“你到底为什么要写一个 SELECT * FROM (SELECT TOP 1)”

所以我将代码更改为

```
context.Products.Where(p=>p.Id==id).ToList().FirstOrDefault() 
```

这会产生一个更干净的 T-SQL：

```
SELECT ... FROM PRODUCTS WHERE ID=@id 
```

内部查询和 TOP 1 消失了。够啰嗦了，我的问题是：第一个查询真的会给 SQL Server 带来开销吗？比第二种方法更难解析吗？Id 列上有一个聚集索引。我想要一个好的答案，这样我就可以把它擦在他（或我的）脸上

谢谢，
提莫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:10:23.113

您是否尝试过手动运行查询并比较执行计划？

这里最大的问题不是 SQL 没有完全符合 DBA 的标准（尽管我相当肯定查询引擎会优化掉额外的选择）。第二个查询实际上返回 Products 表的全部内容，然后您在内存中对其进行分析，这绝对是应由 DB 而不是应用程序层执行的任务。

简而言之，他是个书呆子。让它保持原样。

# php - 使用 PHP 从 mysql 数据库中检索的日期减去 2 天

> ID：11013463
> 
> 赞同：-1
> 
> 时间：2012-06-13T11:00:40.370
> 
> 标签：php, mysql

我想取应该在到期日 2 天之前的日期。我从 MYSQL 数据库中获取到期日期。这是我的代码：

```
$result=mysql_query("SELECT * from assets");

while($row=mysql_fetch_array($result))
{

echo "Start date:".$row["start_date"];

echo "Expiry date:".$row["expiry_date"];

$expdate=$row["expiry_date"];

$date=date('Y-m-d',strtotime('+2 days', $expdate));

echo "2 Days before Expiry date:".$date;

} 
```

但我得到这样的输出：

```
Start date:2012-05-01

Expiry date:2012-06-30

2 Days before Expiry date:1970-01-03 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:04:46.623

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

PHP 的 strtotime() 函数的第二个参数需要一个 Unix 时间戳。试试这个：

```
$date=date('Y-m-d',strtotime($expdate.' +2 days')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:11:37.093

strtotime 函数有两个参数

```
int strtotime ( string $time [, int $now = time() ] ) 
```

第二个应该是一个整数，但看起来你正在传递一个字符串。您需要先将其转换为整数。这应该有效：

```
$expdate_int = strtotime($expdate);
$date = date('Y-m-d', strtotime('+2 days', $expdate_int)); 
```

如果合适，您还可以查看在 SQL 中进行日期数学运算

```
SELECT expdate, DATE_SUB(expdate, INTERVAL 2 DAY) AS two_days_before_exp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:07:17.510

您要求的日期是到期日前 2 天。

```
 $date=date('Y-m-d',strtotime($expdate.'-2 days')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T11:07:46.907

```
strtotime('+2 days', $expdate) 
```

第二个参数必须是时间戳

[http://php.net/strtotime](http://php.net/strtotime)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T11:27:47.087

更改以下行

```
$date=date('Y-m-d',strtotime('+2 days', $expdate)); 
```

跟随

```
$date=date('Y-m-d',strtotime('-2 days', strtotime($expdate))); 
```

strtotime 第二个参数需要时间戳（不是字符串日期）。“-2”表示提前 2 天。

# powershell - 使用 powershell 加载 ntuser.dat

> ID：11013466
> 
> 赞同：4
> 
> 时间：2012-06-13T11:00:48.560
> 
> 标签：powershell, registry

我需要检查网络中 Windows 客户端上所有用户的一些设置。所有用户都有漫游配置文件。

我编写了一个 Powershell 脚本，它加载用户 NTuser.dat 的脱机副本并读出特定密钥。然后卸载该文件并将下一个文件加载到注册表中。

问题是大约 10 个用户后没有加载新文件。当脚本再次启动时，用户仍然没有加载。新用户只有在我关闭 Powershell 提示并打开一个新提示之后。该脚本总是在大约 10 个用户之后停止。

```
$userlist = ls "C:\Temp calls\profiles"
foreach ($user in $userlist){
$username = $user.name
#$username = "ciproda"
reg load "hklm\$username" "C:\Temp calls\profiles\$username\NTUSER.DAT" | Out-Null
...

    Here I check the keys

    ...

[gc]::collect()
start-sleep -s 3
reg unload "hklm\$username"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:05:04.390

在您的“*我在这里检查密钥*”部分中，您是否使用以下方式将配置单元安装为 PS 驱动器：

```
new-Psdrive -name <blah> -PSProvider Registry -root <blih>
cd <blah>:
# Some Set-ItemProperty and Get-ItemProperty calls here referring to
# your PSDrive and using PowerShell variables
Remove-PSDrive <blah> 
```

如果您在调用 REG UNLOAD 之前仍然引用了一些 PSDrive 变量，则该调用可能会失败。尝试删除所有仍会通过`Remove-Variable`.

# delphi - 如何在 Delphi 中覆盖 Class 属性获取器

> ID：11013467
> 
> 赞同：4
> 
> 时间：2012-06-13T11:00:51.357
> 
> 标签：delphi, delphi-xe2

我已经定义了一个基类和一些派生类，它们永远不会被实例化。它们只包含类函数和两个类属性。

问题是 Delphi 要求类属性的属性 get 方法用**static**关键字 en 声明，因此不能声明为**virtual**，所以我可以在派生类中覆盖它。

所以这段代码会导致编译错误：

```
 TQuantity = class(TObject)
    protected
      class function GetID: string; virtual; //Error: [DCC Error] E2355 Class property accessor must be a class field or class static method
      class function GetName: string; virtual;
    public
      class property ID: string read GetID;
      class property Name: string read GetName;
    end;

    TQuantitySpeed = class(TQuantity)
    protected
      class function GetID: string; override;
      class function GetName: string; override;
    end; 
```

所以问题是：如何定义一个类属性，其结果值可以在派生类中被覆盖？

使用 Delphi XE2，Update4。

**更新：** 在 David Heffernan 的建议下使用函数而不是属性解决了这个问题：

```
 TQuantity = class(TObject)
    public
      class function ID: string; virtual;
      class function Name: string; virtual;
    end;

    TQuantitySpeed = class(TQuantity)
    protected
      class function ID: string; override;
      class function Name: string; override;
    end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:05:04.877

> 如何定义一个类属性，其结果值可以在派生类中被覆盖？

您不能，正如编译器错误消息所表明的那样：

> E2355 类属性访问器必须是类字段或类静态方法

类字段在通过继承相关的两个类之间共享。所以这不能用于多态性。并且类静态方法也不能提供多态行为。

使用虚拟类函数而不是类属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-19T12:13:58.990

```
type
  // Abstraction is used at sample to omit implementation
  TQuantity = class abstract
  protected
    class function GetID: string; virtual; abstract;
    class procedure SetID(const Value: string); virtual; abstract;
  public
    // Delphi compiler understands class getters and setters
    {class} property ID: string read GetID write SetID;
  end;

var
  Quantity: TQuantity;

begin
  Quantity.ID := '?'; 
```

# java - 在java中检索响应的http代码

> ID：11013468
> 
> 赞同：1
> 
> 时间：2012-06-13T11:00:52.553
> 
> 标签：java, android, http

我有以下代码用于向 url 发布帖子并将响应作为字符串检索。但我还想获得 HTTP 响应代码（404,503 等）。我在哪里可以恢复它？我尝试过使用 HttpReponse 类提供的方法，但没有找到。

谢谢

```
public static String post(String url, List<BasicNameValuePair> postvalues) {
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);

        if ((postvalues == null)) {
            postvalues = new ArrayList<BasicNameValuePair>();
        }
        httppost.setEntity(new UrlEncodedFormEntity(postvalues, "UTF-8"));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        return requestToString(response);
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }

}

private static String requestToString(HttpResponse response) {
    String result = "";
    try {
        InputStream in = response.getEntity().getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        StringBuilder str = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            str.append(line + "\n");
        }
        in.close();
        result = str.toString();
    } catch (Exception ex) {
        result = "Error";
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T11:11:45.427

您可以像这样修改您的代码：

```
//...
HttpResponse response = httpclient.execute(httppost);
if(response.getStatusLine().getStatusCode() == HttpStatus.SC_OK){
  //edit: there is already function for this
  return EntityUtils.toString(response.getEntity(), "UTF-8");
} else {
  //Houston we have a problem
  //we should do something with bad http status
  return null;
} 
```

编辑：还有一件事......而不是`requestToString(..);`你可以使用`EntityUtils.toString(..);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:09:41.393

您是否尝试过以下操作？

```
response.getStatusLine().getStatusCode() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T11:13:25.393

你试过这个吗？

```
 // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);
    response.getStatusLine().getStatusCode(); 
```

# ruby-on-rails - Selenium 打不开火狐

> ID：11013474
> 
> 赞同：1
> 
> 时间：2012-06-13T11:01:04.477
> 
> 标签：ruby-on-rails, selenium, cucumber, capybara, webrat

当我使用 cucumber 和 selenium 运行测试时，浏览器“firefox”仅在我第一次运行测试时打开。
然后每次我运行测试时，它都会失败并出现错误“执行已过期（Timeout::Error）”

我在 Ubuntu 12.04、Ruby 1.8.7、Rails 2.3.5 上。

宝石清单：

*   水豚 (1.1.2)
*   黄瓜 (1.2.0)
*   黄瓜导轨 (0.3.2)
*   硒客户端（1.2.18）
*   硒网络驱动程序（2.21.1）
*   韦拉特 (0.7.3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:15:54.643

我遇到过同样的问题。我不知道原因，但安装 gem launchy 解决了它。看看这是否有帮助 [https://github.com/copiousfreetime/launchy](https://github.com/copiousfreetime/launchy)

# c# - 如何将 IL 代码翻译成 AST

> ID：11013475
> 
> 赞同：2
> 
> 时间：2012-06-13T11:01:04.860
> 
> 标签：c#, abstract-syntax-tree, il

是否可以从 IL 代码生成 AST？只有将源代码（c#/vb）翻译成 AST（[链接](https://stackoverflow.com/questions/213427/translate-c-sharp-code-into-ast)）的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:02:40.087

查看 CodePlex 上的[CCI 项目](http://cciast.codeplex.com/)。

[这与Microsoft Roslyn](http://msdn.microsoft.com/en-US/roslyn)背后的框架相同。

# php - php中的符号问题

> ID：11013476
> 
> 赞同：0
> 
> 时间：2012-06-13T11:01:05.273
> 
> 标签：php, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:04:17.140

`urlencode`在将您的数据提交到贝宝之前使用。

```
$form_custom .= '<input type="hidden" name="item_name" value="'. urlencode($itemName) .'">'; 
```

# vim - Vim 文档文件的存储

> ID：11013488
> 
> 赞同：2
> 
> 时间：2012-06-13T11:01:32.647
> 
> 标签：vim

文件系统中存储了*Vim*`:h something`的文档（输入*Vim*时显示的内容？所有内容都在一个地方还是有例外？我可以通过一些命令找出存储在哪里，例如某个插件的文档文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:06:59.703

做：

```
:set runtimepath 
```

将使用运行时路径中指定的目录在 doc/ 目录中查找文档。

您可以通过以下方式获取更多信息：

```
:he runtimepath 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:09:15.217

如果您下载 src-tree，所有文档都在文件夹中

```
vim/runtime/doc 
```

默认安装文件夹是

```
usr/local/share/vim/vim73/doc/ 
```

# facebook - Windows Phone 7 的 Facebook 客户端登录

> ID：11013500
> 
> 赞同：2
> 
> 时间：2012-06-13T11:02:21.150
> 
> 标签：facebook, windows-phone-7, authentication, login

我想为 WP7 制作一个简单的 Facebook 客户端，我正在研究应该如何登录。这里有[一个教程](http://buildmobile.com/facebook-in-a-windows-phone-7-app/#fbid=XBxiCmsKdBu)，要求客户端通过浏览器进行身份验证。

我更喜欢在我的应用程序中进行登录，我需要的不仅仅是“授予访问权限”，我还需要用户墙提要、朋友列表、消息等。

知道如何进行应用内登录吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:27:47.540

我认为如果没有浏览器的帮助，您无法直接从您的应用程序对用户进行身份验证。Facebook 不会允许的。

无论如何，您都可以借助[Facebook SDK](http://csharpsdk.org/)，这有助于身份验证过程。

请参阅此[博客](http://igrali.com/2012/06/05/facebook-authentication-from-windows-phone-app/)了解 Facebook SDK for WP7 的实现

此外，您可以通过在身份验证过程中指定[扩展权限来获得所需的所有权限。](https://developers.facebook.com/docs/authentication/permissions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T13:13:06.620

如果您想在[此处找到更多信息，还有来自诺基亚的更新文章](http://developer.nokia.com/Community/Wiki/Facebook_authentication_in_Windows_Phone_application)

# javascript - 如何打破极值的高线图

> ID：11013501
> 
> 赞同：6
> 
> 时间：2012-06-13T11:02:24.120
> 
> 标签：javascript, jquery, highcharts

在 highcharts 中，如果有两个系列，第一个系列的值为 20,0000，第二个系列的值为 20，那么第二个系列变得非常小，几乎看不见。

是否有可能打破第一个栏以便第二个系列变得可见？以下是所需的输出...

![期望的输出](../Images/8ff26c3e92b5efd9f74e4ae7cc071e42.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:06:15.113

我过去曾使用数学计算来解决这类问题。这里有几个不同的例子：

**数值：220、110、55、5**

*   [**普通格式**](http://jsfiddle.net/FbKtj/2/)
*   [**平方根格式**](http://jsfiddle.net/FbKtj/)

**数值：1100、220、110、55、5**

*   [**普通格式**](http://jsfiddle.net/FbKtj/3/)
*   [**平方根格式**](http://jsfiddle.net/FbKtj/1/)

我在上面的示例中所做的让低值系列显示更多的是使用所有值的平方根。数据以四舍五入到小数点后三位的平方根形式发送。然后我使用 yAxis 标签和工具提示上的格式化程序来显示正确的值。

另外，在上面的例子中，我使用的是整数。在格式化 yAxis 标签和工具提示时，我将加 1 并强制它们为整数，以使它们恢复到原始所需的数字。这对整数很有效。如果您的数据不是整数，那么您必须从平方根传递整个结果。然后当然不要将其强制为int。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T12:15:09.657

目前没有办法做到这一点。[在此处](http://highcharts.uservoice.com/forums/55896-general/suggestions/1175063-scale-break)查看 HighCharts 用户语音。

# oracle - 如何在 Oracle 11g 中检查序列是否存在？

> ID：11013504
> 
> 赞同：20
> 
> 时间：2012-06-13T11:02:49.713
> 
> 标签：oracle, oracle11g, sequence

我正在使用 Oracle 11g。我希望能够确定是否存在特定序列。我已经尝试了下面的代码，但它不起作用。（当应该有更多时，它返回 0 作为计数值）：

```
SELECT COUNT(*)
FROM user_sequences
WHERE sequence_name = 'SCHEMA.SEQUENCE_NAME'; 
```

如果有人知道这是为什么，请帮助我。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-13T11:08:23.453

如果您以用户身份运行查询，请`MP`尝试如下：

```
SELECT COUNT(*) 
FROM user_sequences 
WHERE sequence_name = 'SEQ_SSO_KEY_AUTHENTICATION'; 
```

否则，试试这样：

```
SELECT COUNT(*) 
FROM all_sequences 
WHERE sequence_name = 'SEQ_SSO_KEY_AUTHENTICATION'
AND sequence_owner = 'MP' ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-09T14:15:30.173

另外，请记住，您可能无法查看数据库中的所有序列。在这种情况下，上面提供的脚本可能不起作用，您应该运行类似

```
SELECT COUNT(*) FROM DBA_SEQUENCES; 
```

但是，如果您无权访问 DBA_SEQUENCES 视图，这也可能不起作用。

检查[Oracle 文档](https://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_2053.htm)。

# android - Android 向 AysncTask 添加加载视图

> ID：11013505
> 
> 赞同：0
> 
> 时间：2012-06-13T11:02:55.817
> 
> 标签：android, android-asynctask

嗨，我有一个 Asynctask，唯一的问题是屏幕是空白的，直到所有内容都加载完毕，所以我创建了一个 loadingcell 视图，但我想知道如何让它显示加载视图，直到所有内容都加载完毕。

这是我尝试过的，但它不起作用

```
public class PostTask extends AsyncTask<Void, String, Boolean> {

        @Override
        protected Boolean doInBackground(Void... params) {
            boolean result = false;

            loadFixtures();
            publishProgress("progress");
            loadResultsFeed();
            publishProgress("progress");
            loadNewsFeed();
            publishProgress("progress");
            return result;
        }

        protected void onProgressUpdate(String... progress) {
            StringBuilder str = new StringBuilder();
                for (int i = 1; i < progress.length; i++) {
                    str.append(progress[i] + " ");

                  loadingView = LayoutInflater.from(getBaseContext()).inflate(R.layout.loadingcell,
                         null);

                }
        }

            @Override
        protected void onPostExecute(Boolean result) {
            super.onPostExecute(result);
            Log.v("BGThread", "begin fillin data");
             FillData();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:07:58.840

```
protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        Log.v("BGThread", "begin fillin data");
         FillData();
     // hide your view here                                <---------
     // for ex:    
      progressbar.setVisibility(View.GONE);                <---------

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:58:03.500

尝试这个。

```
private class BackgroundTask1 extends
        AsyncTask<String, Void, String> {

private ProgressDialog dialog;

    protected void onPreExecute() {
        /** Initialise progress dialog and show*/
        dialog = new ProgressDialog(currentActivity.this);
        dialog.setMessage("Loading.....");
        dialog.setCancelable(false);
        dialog.show();
    }

    protected String doInBackground(final String... args) {
        // do your stuff
               return anyString // as an example

    }

    protected void onPostExecute(String temp) {
        Log.v("String:::::",temp);
        dialog.dismiss();  // dismiss progress dialog
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:48:19.630

我已经这样做了。你可以参考

```
 private class DownloadingProgressTask extends
        AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(ShowDescription.this);

    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();         

    }

    protected Boolean doInBackground(final String... args) {
        try {
            downloadFile(b.getString("URL"));
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        if (success) {
            Toast.makeText(ShowDescription.this,
                    "File successfully downloaded", Toast.LENGTH_LONG)
                    .show();
            imgDownload.setVisibility(8);
        } else {
            Toast.makeText(ShowDescription.this, "Error", Toast.LENGTH_LONG)
                    .show();
        }
    }

} 
```

# javascript - 将 Maya 场景转换为 JavaScript 或 WebGL

> ID：11013506
> 
> 赞同：5
> 
> 时间：2012-06-13T11:03:01.913
> 
> 标签：javascript, webgl, maya

我有一些时间，我想在没有 WebGL 的情况下将 Maya 场景转换为 WebGL 或将其渲染到画布上。该模型是由基元和网格组成的台灯，我已经将部件作为关节的父级而不是将它们绑定到骨架，现在我想使用 JS 库或 WebGL 进行渲染，然后通过鼠标移动和/或进行动画处理触摸事件。如果我可以将模型放到画布上，或者在保留父关系的同时将模型放到启用 WebGL 的应用程序中，然后我可以编写一些函数来将关节旋转绑定到鼠标移动，我只需要一些帮助来实际导出和导入我的 Maya场景，同时维护关系。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:06:50.900

您可以为此尝试[Three.js](https://github.com/mrdoob/three.js/) WebGL 库。他们在[这里](https://github.com/mrdoob/three.js/tree/master/utils/exporters)有从 3D 模型到用 python 编写的 JSON 的导出器。

例如，您可以尝试导出模型，`obj`然后使用 [convert_obj_three.py](https://github.com/mrdoob/three.js/blob/master/utils/exporters/obj/convert_obj_three.py)对其进行转换。

然后您可以使用`THREE.JSONLoader`方法将模型加载到画布中。网上有很多例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:05:04.910

如果您的场景已经在 Maya 中，那么 www.inka3d.com 应该适合您。Inka3d 支持关节，也支持以关节为父对象的对象，您可以在导出的场景中使用与 Maya 中相同的参数名称轻松更改来自 javascript 的旋转参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-13T09:57:28.623

如果你不是程序员，你可以试试[Verge3D for Maya](https://www.soft8soft.com/verge3d-for-maya-released/)。它支持骨骼动画，您可以通过使用可视化脚本（即“拖动时”和“设置旋转”难题）用鼠标/触摸旋转关节。

# amazon-web-services - AWS 上的 memcached-session-manager

> ID：11013509
> 
> 赞同：12
> 
> 时间：2012-06-13T11:03:15.783
> 
> 标签：amazon-web-services, memcached, session-management, session-replication, amazon-elasticache

我有一个在 Amazon Web Services 上运行的网站，该网站使用 Elastic Beanstalk 部署并在至少 2 个 EC2 微实例上运行。有一个 Auto Scaling 策略，因此它可以根据网站中的流量进行扩展和缩减。由于这个自动缩放策略，我想避免使用粘性会话，因此我使用[memcached-session-manager](http://code.google.com/p/memcached-session-manager/)。我将 Amazon ElastiCache（小型实例）用于 memcached 服务器。

context.xml中的配置如下：

```
<Manager className="de.javakaffee.web.msm.MemcachedBackupSessionManager"
    memcachedNodes="sessions.myinstancecode.0001.use1.cache.amazonaws.com:11211"
    sticky="false"
    sessionBackupAsync="false"
    lockingMode="none"
    transcoderFactoryClass="de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory" /> 
```

当流量较低（即在线用户少于 10 个）时，这可以正常工作，但有时会导致 EC2 实例重新启动。您可以想象，如果网站当前在两个实例上运行，并且它们都决定同时重新启动，那么网站将变得无法访问，这是一个大问题。这些是在 EC2 实例决定重新启动之前在 Amazon S3 上轮换的 tail_catalina.log 中的最后几行：

```
Jun 13, 2012 12:32:27 AM de.javakaffee.web.msm.BackupSessionTask handleException
WARNING: Could not store session 42F9761AC24F826E1FC3F2A834FBF442 in memcached.
Note that this session was relocated to this node because the original node was not available.
net.spy.memcached.internal.CheckedOperationTimeoutException: Timed out waiting for operation - failing node: sessions.myinstancecode.0001.use1.cache.amazonaws.com/10.194.23.99:11211
    at net.spy.memcached.internal.OperationFuture.get(OperationFuture.java:73)
    at de.javakaffee.web.msm.BackupSessionTask.storeSessionInMemcached(BackupSessionTask.java:230)
    at de.javakaffee.web.msm.BackupSessionTask.doBackupSession(BackupSessionTask.java:195)
    at de.javakaffee.web.msm.BackupSessionTask.call(BackupSessionTask.java:120)
    at de.javakaffee.web.msm.BackupSessionTask.call(BackupSessionTask.java:51)
    at de.javakaffee.web.msm.BackupSessionService$SynchronousExecutorService.submit(BackupSessionService.java:339)
    at de.javakaffee.web.msm.BackupSessionService.backupSession(BackupSessionService.java:198)
    at de.javakaffee.web.msm.MemcachedSessionService.backupSession(MemcachedSessionService.java:967)
    at de.javakaffee.web.msm.SessionTrackerValve.backupSession(SessionTrackerValve.java:226)
    at de.javakaffee.web.msm.SessionTrackerValve.invoke(SessionTrackerValve.java:128)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:680)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636)
Jun 13, 2012 12:32:28 AM de.javakaffee.web.msm.LockingStrategy onAfterBackupSession
WARNING: An error occurred during onAfterBackupSession.
net.spy.memcached.internal.CheckedOperationTimeoutException: Timed out waiting for operation - failing node: sessions.myinstancecode.0001.use1.cache.amazonaws.com/10.194.23.99:11211
    at net.spy.memcached.internal.OperationFuture.get(OperationFuture.java:73)
    at de.javakaffee.web.msm.LockingStrategy.onAfterBackupSession(LockingStrategy.java:287)
    at de.javakaffee.web.msm.MemcachedSessionService.backupSession(MemcachedSessionService.java:970)
    at de.javakaffee.web.msm.SessionTrackerValve.backupSession(SessionTrackerValve.java:226)
    at de.javakaffee.web.msm.SessionTrackerValve.invoke(SessionTrackerValve.java:128)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:680)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636) 
```

似乎 Amazon ElastiCache 节点出现故障，但问题是，检查 Amazon CloudWatch，我可以看到 CPU 利用率从未超过 8%。Amazon ElastiCache 节点失败是否有任何原因，即使它没有受到太大压力？此外，当 Amazon ElastiChace 节点出现故障时，为什么 Amazon 决定重新启动（或者更好：终止并启动一个新实例）？

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T13:51:02.690

[您应该从文档](http://code.google.com/p/memcached-session-manager/wiki/SetupAndConfiguration#Overview_over_memcached-session-manager_configuration_attributes)中增加 memcached-session-manager 的 sessionBackupTimeout ：

> sessionBackupTimeout（可选，默认 100）
> 
> 会话备份被视为失败后的超时时间（以毫秒为单位）。仅当同步存储会话（通过 sessionBackupAsync 设置）时才评估此属性。默认值为 100 毫秒。

# lisp - 定车！并让方案语言

> ID：11013514
> 
> 赞同：5
> 
> 时间：2012-06-13T11:03:38.127
> 
> 标签：lisp, scheme, racket, mit-scheme

我对这个例子的结果有点困惑：

```
(define mk-q
  (lambda ()
    (let ([l '(x)])
      (cons l l))))

(define q (mk-q))

q
=> ((x) x)

(set-car! (cdr q) 'y)
=> ((y) y) 
```

我想知道为什么两个`x`原子都被`set-car!`程序替换了（我对结果的第一个猜测是`((x) y)`）？

例如：

```
(define mk-q2
  (lambda ()
    (let ([l '(x)])
      (cons l (cons l l)))))

(define q2 (mk-q2))
(set-car! (cdr q2) 'y)
=> ((x) y x) which fits my understanding of set-car! 
```

为什么第一个示例中的两个`x`s 都被替换了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:26:12.800

在第一个示例中，您有与此等效的内容：

```
(define cell (cons 'x null))
(define q (cons cell cell)) 
```

如您所见，该位置只有*一个* `cons`单元格，它在结果列表结构的两个不同部分中共享。当您在单个单元格中执行时，它被共享的所有部分替换。记住这两个单元格实际上是相同的，我们从这个开始：`x``car``(set-car! (cdr q) 'y)``x``y``(cons 'x null)`

```
(cons (cons 'x null) (cons 'x null))
; '((x) x) 
```

对此：

```
(cons (cons 'y null) (cons 'y null))
; '((y) y) 
```

对于第二个例子，同样的考虑也适用（所有三个`(cons 'x null)`单元实际上是同一个被共享的），但是你要替换整个`cons`单元，所以基本上我们从这个开始：

```
(cons (cons 'x null) (cons (cons 'x null) (cons 'x null)))
; '((x) (x) x) 
```

对此：

```
(cons (cons 'x null) (cons 'y (cons 'x null)))
; '((x) y x) 
```

为了证明我的观点，问题中的两个示例都演示了相同的情况，请执行以下表达式：

```
(define q2 (mk-q2))
(set-car! (cadr q2) 'y) ; notice the extra `a`
q2
=> '((y) (y) y) 
```

# wordpress - 显示所有 Wordpress 主类别的子类别

> ID：11013515
> 
> 赞同：0
> 
> 时间：2012-06-13T11:03:38.700
> 
> 标签：wordpress, categories

我想显示类别的分层列表，但我想显示所有类别及其子类别

```
<ul>
   <li ><a href="#">Main category</a>
    <ul >
     <li ><a href="#">Sub cat 1</a></li>
     <li ><a href="#">Sub cat 2</a></li>
        <li ><a href="#">Sub cat 3</a></li>
    </ul>
   </li>
</ul> 
```

请帮我...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:22:10.663

```
<?php wp_list_categories('style=list&depth=0'); ?> 
```

在这里寻找更多参数：http: [//codex.wordpress.org/Template_Tags/wp_list_categories](http://codex.wordpress.org/Template_Tags/wp_list_categories)

# python - wxImage 在 win32 上没有 alpha 通道

> ID：11013516
> 
> 赞同：0
> 
> 时间：2012-06-13T11:03:44.100
> 
> 标签：python, image, wxpython

我有一个绘制渐变文本的功能，在 mac 上效果很好，但在 windows 上不能正常工作。

我把它放在一个可运行的例子中：

```
import wx

def get_gradient_text_solid_bg(text,point_size,top_colour,bottom_colour,bg_colour_tuple):
    dc=wx.MemoryDC()
    f= dc.GetFont()
    f.SetPointSize(point_size)
    dc.SetFont(f)
    dc.SelectObject(wx.EmptyBitmap(0,0))
    w,h= dc.GetTextExtent(text)
    template_bmp= wx.EmptyBitmap(w,h)
    dc.SelectObject(template_bmp)
    dc.SetBackground(wx.Brush(wx.WHITE))
    dc.Clear()
    dc.DrawText(text,0,0)
    dc.SelectObject(wx.NullBitmap)
    template_image= template_bmp.ConvertToImage()
    template_image.ConvertColourToAlpha(*bg_colour_tuple)
    template_bmp= template_image.ConvertToBitmap()
    text_bmp= wx.EmptyBitmap(w,h)
    dc.SelectObject(text_bmp)
    dc.GradientFillLinear((0,0,w,h),top_colour,bottom_colour,wx.SOUTH)
    dc.DrawBitmap(template_bmp,0,0)
    dc.SelectObject(wx.NullBitmap)
    return text_bmp

class Frame(wx.Frame):
    def __init__(self,*args,**kwargs):
        wx.Frame.__init__(self,*args,**kwargs)
        panel= wx.Panel(self)
        bg_colour= (237,237,237)
        panel.SetBackgroundColour(wx.Colour(*bg_colour))
        wx.StaticBitmap(panel,bitmap=get_gradient_text_solid_bg("Testing",30,(255,80,80),(255,215,215),bg_colour))
        self.Show()

if __name__ == "__main__":
    app= wx.App(False)
    Frame(None)
    app.MainLoop() 
```

我不确定它为什么不起作用，我认为这是因为 wxImage 在 Windows 上似乎没有 alpha 通道，但你可以在文本中看到一些红色，所以我认为必须有边缘图像中的一些 alpha（抗锯齿部分）所以这可能是`ConvertColourToAlpha`Windows 上的问题？我怎样才能让它在 Windows 上显示相同？

![在 Mac 上](../Images/df6e99cd9cd81be7ce6a9ec5986ae102.png)![在 Windows 上](../Images/881b34f44658a27db1b48d1ea8e71611.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:25:14.197

wxPython-users 列表上有几个关于这个主题的主题。这是[一个](https://groups.google.com/forum/?fromgroups#!searchin/wxpython-users/alpha%2420transparency/wxpython-users/0PBkCv47E54/WoRDb2k_kTAJ)可能与您相关的内容。还有[一个](https://groups.google.com/forum/?fromgroups#!searchin/wxpython-users/alpha%2420transparency%2420pasco/wxpython-users/_olSkNFI2tA/6geHqn-UOUQJ)给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:10:59.517

我在 Robin 的帮助下找到了解决方案。

这是 C++ 的一个错误，我在 wxpython 错误跟踪器上创建了一个跟踪器，但解决方法是将位深度设置为 24`text_bmp= wx.EmptyBitmap(w,h,24)`

# objective-c - Objective-C，NSTask 不会接触文件

> ID：11013519
> 
> 赞同：0
> 
> 时间：2012-06-13T11:03:53.493
> 
> 标签：objective-c, nsfilemanager, nstask

我的应用程序中有以下代码（如下），它只是尝试使用 NSTask 来触摸一个带有目录时间/日期戳的文件。它在一个始终只访问一个目录的应用程序中工作得很好，但是，它不适用于另一个经常更改目录以访问其中一些数据的应用程序。当我检查 currentfile 和 currentpath 时，它们都显示正确的路径。我已经用尽了所有我能想到的可能性；任何帮助将不胜感激-谢谢。

```
- (void)someMethod:(NSString *)currentfile {

    NSFileManager *filemanager = [[NSFileManager alloc] init];

    if ([filemanager changeCurrentDirectoryPath: @"/"] == NO)
    NSLog (@"Cannot change directory.\n");

    NSString *currentpath = [filemanager currentDirectoryPath];
    NSLog (@"Current directory is %@", currentpath);

    [filemanager release];

    NSArray*arguments = [NSArray arrayWithObjects:@"-r",currentpath,currentfile,nil];

    [self touchFiles:arguments];

    return;
}

- (void)touchFiles:(NSArray *)arguments {

    NSTask *task = [[NSTask alloc] init];

    [task setLaunchPath:@"/usr/bin/touch"];

    [task setArguments:arguments];

    [task launch];

    [task release];

    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:42:54.757

您可以更改文件的修改时间，而无需使用`NSTask`. `-[NSURL setResourceValue:forKey:error:]`与键一起使用`NSURLContentModificationDateKey`。

至于您使用`NSTask`and`touch`失败的原因，可能是您无权修改文件的修改时间。检查控制台日志以查看是否报告了任何错误，`touch`或将任务的标准错误输出重定向到其他地方并检查。

# html - 如何设置 DIV 的宽度以跨越其中的文本（所以不固定）

> ID：11013520
> 
> 赞同：3
> 
> 时间：2012-06-13T11:03:54.767
> 
> 标签：html, css

我想知道如何将 DIV 的宽度设置为跨越 div 元素中文本的大小。请注意，文本必须在 div 中，我不能将其放在跨度中，并且使用 Display:inline-block 会与我的 javascript 函数混淆。另一个问题是 DIV 元素有一个背景（请参阅飞行文本类），并且该背景跨越父元素的宽度，而不是 div 内的文本宽度。怎么做？

我的代码：

CSS：

```
<style>
.container{
width:910px;
height: 380px;
background: url(http://v4m.mobi/php/images/home_back.jpg) center no-repeat;

    margin:0 auto;
    color:#FFF;

    background-color: #000;
}
.flying-text{
    margin-left:-100px;
    color: #fff;
    font-size: 20px;
    height: 50px;
    background: rgba(0, 0, 0, 0.5);
    -webkit-border-radius: 0px 10px 10px 10px;
    border-radius: 0px 10px 10px 0px;
    -moz-border-radius: 0px 10px 10px 0px;
    text-align: left;
    vertical-align: middle;
    padding: 5px 0px;
}
</style> 
```

HTML：

```
<div class="container">
  <div class="flying-text active-text">Text1</div>                        
  <div class="flying-text">Text2</div>                        
  <div class="flying-text">Text3</div>                      
</div>​ 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:09:42.823

几个建议：

1.  浮动 div。例如，如果你给`.flying-text`元素一个`float:left`声明，那么它们会“收缩包装”到它们的内容。（您还需要`clear:left`声明来清除浮动）。

2.  将文本包裹在一个`inline`or`inline-block`元素（例如 a `span`）中，并在`span`. 例如`<div class="flying-text active-text"><span>Text1</span></div>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:17:51.260

您试图让您填充容器的宽度，但您希望它们包装包含的文本。这是两种相反的行为。

保持 div 原样，并将文本包装在（语义正确的）`<p>`标签中。那么你的 CSS 将变为：

```
.flying-text{
    margin-left:-100px;
    color: #fff;
    font-size: 20px;
    height: 50px;
    text-align: left;
    vertical-align: middle;
    padding: 5px 0px;
}

.flying-text p {
    float: left;
    background: rgba(0, 0, 0, 0.5);
    -webkit-border-radius: 0px 10px 10px 10px;
    border-radius: 0px 10px 10px 0px;
    -moz-border-radius: 0px 10px 10px 0px;
} 
```

# css - 在 mixins 中使用未定义数量的参数

> ID：11013528
> 
> 赞同：2
> 
> 时间：2012-06-13T11:04:18.743
> 
> 标签：css, less, less-mixins

我目前`-webkit`在我的 Less CSS 表中有特定的属性，我正在尝试更新它们`mixins`以添加`-moz`属性，如下所示：

```
.transition(@1) {
    -webkit-transition: @1;
    -moz-transition: @1;
}

div {
    .transition(all .5s);
} 
```

上面的例子工作正常，但我也有这样的事情：

```
div {
    -webkit-transition: border-color .3s, background .3s;
} 
```

而且我不能调用`mixin`as`.transition(border-color .3s, background .3s)`因为它的参数比`mixin`. 所以我现在正在做的是：

```
.transition(@1) {
    -webkit-transition: @1;
    -moz-transition: @1;
}
.transition-2(@1, @2) {
    -webkit-transition: @1, @2;
    -moz-transition: @1, @2;
}

div {
    .transition-2(border-color .3s, background .3s);
} 
```

这很烦人，每当我使用一些以前未使用过的参数时，我都需要在工作表中添加冗余代码；我对其他 CSS3 属性也有这个问题，例如`box-shadow`当我需要`inset`在开头添加时。

有什么方法可以`mixins`用 Less 声明其参数数量的灵活性，就像 CSS3 属性一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-02T06:21:32.563

对于这种情况，可以使用以下任何一种选项来避免多余的 mixin 代码。

**选项 1：（**最简单的解决方案 - 感谢 7phases-max[突出显示未命中](https://stackoverflow.com/questions/11013528/using-undefined-number-of-arguments-in-less-mixins/26155408#comment41002886_26155408)）

我们可以使用分号作为参数的分隔符/定界符，当我们在指定所有需要转换的属性（以逗号分隔的格式）后在末尾添加分号时，它之前的整个部分将被视为一个单一的论点。

> **[来自Less官方网站](http://lesscss.org/features/#mixins-parametric-feature-mixins-with-multiple-parameters)的摘录：**
> 
> 使用逗号作为 mixin 分隔符使得无法创建逗号分隔的列表作为参数。另一方面，如果编译器在 mixin 调用或声明中看到至少一个分号，则假定参数用分号分隔，并且所有逗号都属于 css 列表

```
.transition(@1) {
    -webkit-transition: @1;
    -moz-transition: @1;
}

div{
    .transition(border-color .5s, background .3s, color .3s;);
} 
```

所以上面的代码在编译时会导致

```
div {
    -webkit-transition: border-color 0.5s, background 0.3s, color 0.3s;
    -moz-transition: border-color 0.5s, background 0.3s, color 0.3s;
} 
```

* * *

**选项 2：**

在引号内将输入值传递给 mixin（需要转换多少特定属性）。在 mixin 中，使用`~`或`e()`内置函数去除引号。

```
.transition(@1) {
    -webkit-transition: ~"@{1}";
    -moz-transition: ~"@{1}";
}

div {
    .transition("border-color .5s, background .3s");
}
div#sample2 {
    .transition("border-color .3s, background .3s, color .3s");
} 
```

编译时将生成以下 CSS

```
div {
    -webkit-transition: border-color .5s, background .3s;
    -moz-transition: border-color .5s, background .3s;
}
div#sample2 {
    -webkit-transition: border-color .3s, background .3s, color .3s;
    -moz-transition: border-color .3s, background .3s, color .3s;
} 
```

* * *

**选项 3：**

Less 确实允许使用该`...`选项创建允许/接受可变数量的输入的 mixin。因此，您可以使用与原始代码中相同的 mixin，方法是`...`向输入变量添加 并按照您最初想要的方式调用它。

```
.transition(@args...) {
    -webkit-transition: @args;
    -moz-transition: @args;
}

div {
    .transition(border-color .5s, background .3s);
} 
```

以上将成功编译，但唯一的问题是编译时会产生以下输出。如您所见，问题在于参数值是空格分隔的，而不是逗号分隔的（因为它们应该是 CSS 正常工作的原因）。

```
div {
    -webkit-transition: border-color 0.5s background 0.3s;
    -moz-transition: border-color 0.5s background 0.3s;
} 
```

当然，我们可以使用正则表达式编写复杂`replace`的函数，但这确实会使代码变得混乱。相反，我们可以使用循环和一些内置函数来实现所需的输出（如下所示）。

```
.transition(@args...) {
    .loop-args(@argCount) when (@argCount > 0) {
        .loop-args(@argCount - 1);
        @arg: extract(@args, @argCount);
        -webkit-transition+: @arg;
        -moz-transition+: @arg;
    }
    .loop-args(length(@args));
}

div {
    .transition(border-color .5s, background .3s, color .3s);
} 
```

基本上我们所做的是使用`...`接受多个参数作为 mixin 的输入，然后遍历每个参数并将其添加到 CSS 属性的值中。(Less v1.5.0 中引入的[`+:`](http://lesscss.org/features/#merge-feature-comma)合并函数) 用于生成逗号分隔的输出。

编译后，它将产生以下输出：

```
div {
    -webkit-transition: border-color 0.5s, background 0.3s, color 0.3s;
    -moz-transition: border-color 0.5s, background 0.3s, color 0.3s;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:51:03.100

你可以试试

```
.transition(@1) {
    -webkit-transition: @1;
    -moz-transition: @1;
}
.transition-2(@1, @2) {
    .transition(@1); // this includes all the stuff from transition(@1)
    color:red; // additional stuff
} 
```

至于你的实际问题，我不相信 LESS 本身有任何“休息”风格的论据通过。

# php - UTF8工作流程PHP、MySQL总结

> ID：11013537
> 
> 赞同：7
> 
> 时间：2012-06-13T11:04:50.007
> 
> 标签：php, mysql, unicode, utf-8, workflow

我正在为具有所有不同字母表的国际客户工作，因此我试图最终了解 PHP 和 MySQL 之间的完整工作流程，以确保正确插入所有字符编码。我已经阅读了很多关于这方面的教程，但仍然有问题（有很多东西要学），我想我可以把它们放在一起问。

**PHP**

```
header('Content-Type:text/html; charset=UTF-8');
mb_internal_encoding('UTF-8'); 
```

**HTML**

```
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<form accept-charset="UTF-8"> .. </form> 
```

*（虽然后者是可选的，而是一个建议，但我相信我宁愿建议什么都不做）*

**MySQL**

`CREATE database_name DEFAULT CHARACTER SET utf8;`或`ALTER database_name DEFAULT CHARACTER SET utf8;`和/或`utf8_general_ci`用作 MySQL 连接排序规则。

*（这里[需要注意](http://www.adayinthelifeof.nl/2010/12/04/about-using-utf-8-fields-in-mysql/)的是，如果使用 varchar 会增加数据库大小）*

**联系**

```
mysql_query("SET NAMES 'utf8'");
mysql_query("SET CHARACTER_SET utf8"); 
```

**业务逻辑**

检测是否不是 UTF8[`mb_detect_encoding()`](http://www.php.net/manual/en/function.mb-detect-encoding.php)并转换为[`ivon()`](http://php.net/manual/en/function.iconv.php).
验证过长的 UTF8 和 UTF16 序列

```
$body=preg_replace('/[\x00-\x08\x10\x0B\x0C\x0E-\x19\x7F]|(?<=^|[\x00-\x7F])[\x80-\xBF]+|([\xC0\xC1]|[\xF0-\xFF])[\x80-\xBF]*|[\xC2-\xDF]((?![\x80-\xBF])|[\x80-\xBF]{2,})|[\xE0-\xEF](([\x80-\xBF](?![\x80-\xBF]))|(?![\x80-\xBF]{2})|[\x80-\xBF]{3,})/','�',$body);
$body=preg_replace('/\xE0[\x80-\x9F][\x80-\xBF]|\xED[\xA0-\xBF][\x80-\xBF]/S','?', $body); 
```

**问题**

*   在 PHP 5.3 及更高版本中是`mb_internal_encoding('UTF-8')`必需的，如果是这样，这是否意味着我必须使用所有多字节函数而不是其核心函数，例如`mb_substr()`而不是`substr()`？

*   是否仍然需要检查格式错误的输入字符串，如果是这样，那么可靠的函数/类是什么？我可能不想删除不良数据并且对音译知之甚少。

*   真的应该是`utf8_general_ci`还是应该`utf8_bin`？

*   上述工作流程中是否缺少某些内容？

来源：

```
http://coding.smashingmagazine.com/2012/06/06/all-about-unicode-utf8-character-sets/  
http://webcollab.sourceforge.net/unicode.html  
http://stackoverflow.com/a/3742879/1043231  
http://www.adayinthelifeof.nl/2010/12/04/about-using-utf-8-fields-in-mysql/  
http://akrabat.com/php/utf8-php-and-mysql/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T12:06:44.110

*   `mb_internal_encoding('UTF-8')` doesn't do anything by itself, it only sets the default encoding parameter for each `mb_` function. If you're not using any `mb_` function, it doesn't make any difference. If you are, it makes sense to set it so you don't have to pass the `$encoding` parameter each time individually.
*   IMO `mb_detect_encoding` is mostly useless since it's fundamentally impossible to accurately detect the encoding of unknown text. You should either know what encoding a blob of text is in because you have a specification about it, or you need to parse appropriate meta data like headers or meta tags where the encoding is specified.
*   Using [`mb_check_encoding`](http://php.net/mb_check_encoding) to check if a blob of text is valid in the encoding you expect it to be in is typically sufficient. If it's not, discard it and throw an appropriate error.
*   Regarding:

    > does this mean I have to use all multi byte functions instead of its core functions

    If you are manipulating strings that contain multibyte characters, then yes, you need to use the `mb_` functions to avoid getting wrong results. The core string functions only work on a byte level, not a character level, which is what you typically want when working with strings.

*   `utf8_general_ci` vs. `utf8_bin` only makes a difference when *collating*, i.e. sorting and comparing strings. With `utf8_bin` data is treated in binary form, i.e. only identical data is identical. With `utf8_general_ci` some logic is applied, e.g. "é" sorts together with "e" and upper case is considered equal to lower case.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:02:33.330

> 它真的应该是 utf8_general_ci 还是 utf8_bin？

您必须使用 utf8_bin 进行**区分大小写的**搜索，否则 utf8_general_ci

> is mb_internal_encoding('UTF-8') necessary in PHP 5.3 and higher and if so does this mean I have to use all multi byte functions instead of its core functions like mb_substr() instead of substr()?

Yes of course, If you have a multibyte string you need mb_* family function to work with, except for binary safe php standard function like str_replace(); (and few others)

> is it still necessary to check for malformed input stings and if so what is a reliable function/class to do so? I possibly do not want to strip bad data and don't know enough about transliteration.

Hmm, no you can't check it.

# blackberry - 以编程方式获取黑莓手机屏幕处于活动状态的时间

> ID：11013541
> 
> 赞同：0
> 
> 时间：2012-06-13T11:04:58.907
> 
> 标签：blackberry, device

我正在使用一个核心黑莓应用程序，在该应用程序中，我需要检测屏幕处于活动状态而不是空白或在未触摸后未进入睡眠模式的时间。

我搜索了很多，但没有任何有趣的东西。请给我一些有用的东西或片段，以便我可以继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:39:43.263

您可以尝试[Screen类的](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Screen.html)[onExposed](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Screen.html#onExposed%28%29)和[onObscured](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Screen.html#onObscured%28%29)方法。

> 受保护的无效***onObcured()***
> 
> 当此屏幕被遮挡时调用。当屏幕位于最顶部并且不再通过以下方式时，屏幕会被遮挡：
> 
> *   推送到显示堆栈上的新屏幕
> *   此屏幕上方显示一个全局屏幕
> *   此屏幕的应用程序进入后台
> *   此屏幕被推送，被上述规则视为遮挡

> 受保护的无效***onExposed()***
> 
> 此屏幕显示时调用。当一个屏幕通过以下方式成为最顶部时，它就会被暴露：
> 
> *   屏幕从显示堆栈中弹出
> *   弹出一个全局屏幕
> *   此屏幕的应用程序接收前台
> *   此屏幕被推送，被上述规则视为暴露

# java - 使用 TextField 将 Java 程序转换为摇摆 JTextField

> ID：11013543
> 
> 赞同：0
> 
> 时间：2012-06-13T11:05:06.657
> 
> 标签：java, swing, awt

这段代码是我将转换为 swing（使用`JTextField`和`DocumentListener`）的程序的简化版本。我已经阅读了一些教程，但我做不到......我不应该使用全局变量，我必须使用一些类似`getSource()`（`getDocument()`在这种情况下？），因为在原始程序中 JTextField 的数量是可变的（它们是在 a 中生成`for`，因此它们没有“名称”）。此数字取决于写入文本文件中的值。

```
import java.awt.*;
import java.awt.event.*;

class TestWindow extends Frame {
    public TestWindow() {
        Panel p = new Panel(new FlowLayout());
        Label l = new Label("Temp");
        TextField tf1 = new TextField();
        TextField tf2 = new TextField();
        tf1.addTextListener(new myTextListener(l));
        tf2.addTextListener(new myTextListener(l));
        p.add(tf1);
        p.add(tf2);
        tf1.setColumns(10);
        tf2.setColumns(10);
        p.add(l);
        add(p);
        pack();
        setVisible(true);
    }

    class myTextListener implements TextListener {
        Label input;
        myTextListener(Label input) {
            this.input = input;
        }
        public void textValueChanged(TextEvent e) {
            input.setText(((TextField)(e.getSource())).getText());
        }
    }

}

public class Test {

    public static void main(String[] args) {
        new TestWindow();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:33:53.030

这是您发布到 Swing 的代码的直接转换，它执行完全相同的任务：

```
import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.text.BadLocationException;
import java.awt.FlowLayout;

public class TestWindow extends JFrame {

public TestWindow() {
    JPanel p = new JPanel(new FlowLayout());
    JLabel l = new JLabel("Temp");
    JTextField tf1 = new JTextField(10);
    JTextField tf2 = new JTextField(10);
    tf1.getDocument().addDocumentListener(new MyDocumentListener(l));
    tf2.getDocument().addDocumentListener(new MyDocumentListener(l));
    p.add(tf1);
    p.add(tf2);
    p.add(l);
    add(p);
    pack();
    setVisible(true);
}

class MyDocumentListener implements DocumentListener{

    private JLabel label;

    MyDocumentListener(JLabel label) {
        this.label = label;
    }

    @Override
    public void insertUpdate(DocumentEvent e) {
        handleTextChange(e);
    }

    @Override
    public void removeUpdate(DocumentEvent e) {
        handleTextChange(e);
    }

    @Override
    public void changedUpdate(DocumentEvent e) {
        handleTextChange(e);
    }

    private void handleTextChange(DocumentEvent e) {
        try {
            label.setText(e.getDocument().getText(0,e.getDocument().getLength()));
        } catch (BadLocationException ignored) {
            //todo: handle exception properly although this should never happen
        }
    }
}

public static void main(String[] args) {
    new TestWindow();
}

} 
```

请注意，DocumentListener 为处理文本更改事件提供了比 TextListener 更多的控制，但我选择使用一种方法来处理它们，以便与您的示例功能完全匹配

# c# - Autofac：注册相互关联的服务，用name/key/meta/index解析

> ID：11013546
> 
> 赞同：1
> 
> 时间：2012-06-13T11:05:43.767
> 
> 标签：c#, autofac

我有一个 autofac 注册的情况，其中服务相互关联。这是我现在拥有的：

```
var builder = new ContainerBuilder();

const string A = "A";
const string B = "B";

//Part 1
builder.RegisterType<ClassA1>().Named<IClass1>(A);
builder.RegisterType<ClassA2>().Named<IClass2>(A);

builder.RegisterType<ClassB1>().Named<IClass1>(B);
builder.RegisterType<ClassB2>().Named<IClass2>(B);

//Part 2
builder.Register(c => new ClassProcess(A, c.ResolveNamed<IClass1>(A), c.ResolveNamed<IClass2>(A))).Named<ClassProcess>(A).SingleInstance();
builder.Register(c => new ClassProcess(B, c.ResolveNamed<IClass1>(B), c.ResolveNamed<IClass2>(B))).Named<ClassProcess>(B).SingleInstance();

//Part 3
builder.Register(c => new ClassProcessDependency(c.ResolveNamed<ClassProcess>(B), c.ResolveNamed<ClassProcess>(A))); 
```

在第 1 部分中，我定义了两个成对连接的基本类，IClass1 和 IClass2。

在第 2 部分中，我定义了一个连接这两个类的“过程”。这个过程实际上是传递给程序其余部分的，它需要一个 IEnumerable。

在第 3 部分中，我定义了这些进程之间存在的任何依赖关系，以便它们以正确的顺序执行。

我在这里寻找的是 Autofac 中的一些注册方法，它可以使用以前使用 name/key/meta 注册的服务，并使用该数据注册新服务。

编辑：请注意，我正在尝试找出是否有任何 Autofac 特定的方法来执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:23:30.810

假设您将常量放在列表中，您可以枚举...

```
IEnumerable<string> constants 
```

...你有什么理由不能这样做吗？

```
foreach(var constant in constants)
{
  // Careful of the closure...
  var loopItem = constant;
  builder
    .Register(c =>
      new ClassProcess(
        loopItem,
        c.ResolveNamed<IClass1>(loopItem),
        c.ResolveNamed<IClass2>(loopItem)))
    .Named<ClassProcess>(loopItem)
    .SingleInstance();
} 
```

除非我弄错或误解了，否则唯一阻碍您的是标识符常量集不在列表中，这不是 Autofac 可以帮助您的。

如果您不喜欢在代码中使用该 foreach，您可以随时将其隐藏在模块中：

```
public class ProcessModule : Autofac.Module
{
  private IEnumerable<string> _constants;
  public ProcessModule(IEnumerable<string> constants)
  {
    this._constants = constants;
  }

  protected override void Load(ContainerBuilder builder)
  {
    // Put the foreach here and loop over this._constants.
  }
} 
```

然后在您的主代码中注册该模块：

```
builder.RegisterModule(new ProcessModule(constants)); 
```

**如果您不能像那样循环，那么您的自动化方法可能会受到限制。**或者，至少，你会看到更多……*复杂*的东西。

`ContainerBuilder`确实不允许在注册项目集时直接访问它们，因此您必须做一些低级的诡计。您可能可以实现一个`IRegistrationSource`来定位某种类型的所有命名注册并进行自动化。

**不幸的是，如上所述，这个过程有点复杂，所以我不打算写出完整的解决方案。**不过，我基本上会告诉您我认为可行的方法，并为您提供一些参考，以便您查看源代码中的示例。

**在你开始这条路之前**，[Nick Blumhardt 在他的博客上有一篇很好的文章](http://nblumhardt.com/2010/01/declarative-context-adapters-autofac2/)，解释了如何编写其中的一个，并使用一个内置的 Autofac 源作为示例。

首先，您需要**实现一个`Autofac.Core.IRegistrationSource`.** 这是用于执行添加隐式集合支持等操作的接口（因此，如果您注册五个`IFoo`实例，您可以解析`IEnumerable<IFoo>`并且它可以工作）。您可以在核心 Autofac 程序集中的 Autofac 代码中查看注册源示例：

*   [Autofac.Features.Collections.CollectionRegistrationSource](http://code.google.com/p/autofac/source/browse/src/Source/Autofac/Features/Collections/CollectionRegistrationSource.cs)
*   [Autofac.Features.GeneratedFactories.GeneratedFactoryRegistrationSource](http://code.google.com/p/autofac/source/browse/src/Source/Autofac/Features/GeneratedFactories/GeneratedFactoryRegistrationSource.cs)
*   [Autofac.Features.LazyDependencies.LazyWithMetadataRegistrationSource](http://code.google.com/p/autofac/source/browse/src/Source/Autofac/Features/LazyDependencies/LazyWithMetadataRegistrationSource.cs)

注册源中的主要功能是`RegistrationsFor`方法，它返回您的源生成的注册列表：

```
IEnumerable<IComponentRegistration> RegistrationsFor(
  Service service,
  Func<Service, IEnumerable<IComponentRegistration>> registrationAccessor); 
```

您对此方法的实现将检查传入`service`是否...

*   一个`Autofac.Core.KeyedService`（因为您要命名所有服务）并且
*   您期望的类型。

如果所有行星都对齐，则返回一个`IComponentRegistration`为您`ClassProcess`的所有设置都已填写的行星。

现在，这将变得更加困难，因为您`ClassProcess`需要两个已命名的输入参数，并且您可能不想注册已命名`ClassProcess`的参数，除非您确定所有参数依赖项也已注册，因此您必须保留跟踪您看到的服务，并且只有在`ClassProcess`您看到它的所有依赖项后才注册它。（您可以使用`KeyedService`进入来确定服务的名称是什么。）

此外，您不再使用`ContainerBuilder`创建该组件注册，因此您必须找出与“生命周期范围”等内容相对应的注册的所有正确设置。

**一旦你有了你的`IRegistrationSource`，你需要把它连接到`ContainerBuilder`.**

```
builder.RegisterSource(new MyRegistrationSource()); 
```

同样，如果您对此感兴趣，我会查看 Autofac 树中的那些源文件。由于复杂性，这不是很多人走的路。

老实说...**如果您可以遍历常量，我会这样做**。为了避免 foreach 循环，这似乎需要做很多工作。

# android - 获取“java.lang.illegalArgumentException：无效列 data1”

> ID：11013550
> 
> 赞同：0
> 
> 时间：2012-06-13T11:06:00.390
> 
> 标签：android, android-contentprovider, android-contacts, contactscontract

我需要在联系人组中添加联系人。组已添加，但联系人未添加到组中。
这是我的代码。我认为异常发生在

```
ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID 
```

但我不知道为什么..你能帮帮我吗？

```
ops.add(ContentProviderOperation
        .newInsert(ContactsContract.RawContacts.CONTENT_URI)
        .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE,accountType)
        .withValue(ContactsContract.RawContacts.ACCOUNT_NAME,accountName)
        .build());

ops.add(ContentProviderOperation
        .newAssertQuery(ContactsContract.Groups.CONTENT_URI)
        .withValueBackReference(ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID, 0)
        .withSelection(ContactsContract.Groups.TITLE + "=?", new String[]{grupo})
        .withExpectedCount(1)
        .build());

ops.add(ContentProviderOperation
        .newInsert(ContactsContract.Data.CONTENT_URI)
        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
        .withValue(ContactsContract.Data.MIMETYPE,           
                   ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
        .withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, nome)
        .build());

ops.add(ContentProviderOperation
        .newInsert(ContactsContract.Data.CONTENT_URI)
        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
        .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.
                   CommonDataKinds.Email.CONTENT_ITEM_TYPE)
        .withValue(ContactsContract.CommonDataKinds.Email.DATA1, mail)  
        .build());

ops.add(ContentProviderOperation
        .newInsert(ContactsContract.Data.CONTENT_URI)
        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
        .withValue(ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID, 0)
        .withValue(ContactsContract.CommonDataKinds.GroupMembership.MIMETYPE,    
                   ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE)
        .build());

try {
    resolver.applyBatch(ContactsContract.AUTHORITY, ops);
} catch(Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:08:22.183

如果您传入任何它无法处理的数据，编写您正在调用的方法的人错误地决定抛出该异常。我建议咨询 javadocs 看看那里是否有解释。

这叫做检查前置条件；通过合同编程。

# http - Http范围标头请求整个文件

> ID：11013551
> 
> 赞同：7
> 
> 时间：2012-06-13T11:06:06.080
> 
> 标签：http, webserver

我正在使用 codeplex 1.1 版的[c# 网络服务器](http://webserver.codeplex.com/)。我已经实现了 Accept-Range 标头并且它确实有效。但是，当我使用 wireshark（版本 1.4.1（SVN Rev 34476 from /trunk-1.4））捕获流量时，我看到以下内容：

```
GET /movies/i_am_legend%20dvd/main.m4v HTTP/1.1
Host: 10.100.1.199:8081
Accept: */*
Range: bytes=0-1
Accept-Encoding: identity
Connection: keep-alive
User-Agent: AppleCoreMedia/1.0.0.9B206 (iPad; U; CPU OS 5_1_1 like Mac OS X; nl_nl)
X-Playback-Session-Id: 9CED81CC-BFAE-4CF6-A477-0EA62B2C652F

HTTP/1.1 206 PartialContent
Content-Range: bytes 0-1/652965648
Accept-Ranges: bytes
ETag: "0daA8D4/wgt4MFvxdNIPLw=="
Date: Wed, 13 Jun 2012 09:10:18 GMT
Content-Length: 2
Content-Type: video/x-m4v
Server: Tiny WebServer
Connection: keep-alive

..  << 2 bytes data

GET /movies/i_am_legend%20dvd/main.m4v HTTP/1.1
Host: 10.100.1.199:8081
Accept: */*
Range: bytes=0-652965647
Accept-Encoding: identity
Connection: keep-alive
User-Agent: AppleCoreMedia/1.0.0.9B206 (iPad; U; CPU OS 5_1_1 like Mac OS X; nl_nl)
X-Playback-Session-Id: 9CED81CC-BFAE-4CF6-A477-0EA62B2C652F

HTTP/1.1 206 PartialContent
Content-Range: bytes 0-652965647/652965648
Accept-Ranges: bytes
ETag: "0daA8D4/wgt4MFvxdNIPLw=="
Date: Wed, 13 Jun 2012 09:10:18 GMT
Content-Length: 652965648
Content-Type: video/x-m4v
Server: Tiny WebServer
Connection: keep-alive 
```

网络服务器将尝试发送整个文件（>600MB），wireshark 显示整个会话为 159774 字节。如果我对 IIS 做同样的事情，我会得到类似的标头

```
GET /ipod/main.m4v HTTP/1.1
Host: 10.100.1.199
User-Agent: AppleCoreMedia/1.0.0.9B206 (iPad; U; CPU OS 5_1_1 like Mac OS X; nl_nl)
Accept: */*
Range: bytes=0-1
Accept-Encoding: identity
X-Playback-Session-Id: C5BBF91D-78AB-42BA-ACE0-D74AB9D845CE
Connection: keep-alive

HTTP/1.1 206 Partial Content
Content-Type: video/x-m4v
Last-Modified: Mon, 11 Jun 2012 10:33:41 GMT
Accept-Ranges: bytes
ETag: "7243cabbd47cd1:0"
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Wed, 13 Jun 2012 09:21:03 GMT
Content-Length: 2
Content-Range: bytes 0-1/652965648

..  << 2 bytes of data

GET /ipod/main.m4v HTTP/1.1
Host: 10.100.1.199
User-Agent: AppleCoreMedia/1.0.0.9B206 (iPad; U; CPU OS 5_1_1 like Mac OS X; nl_nl)
Accept: */*
Range: bytes=0-652965647
Accept-Encoding: identity
X-Playback-Session-Id: C5BBF91D-78AB-42BA-ACE0-D74AB9D845CE
Connection: keep-alive

HTTP/1.1 206 Partial Content
Content-Type: video/x-m4v
Last-Modified: Mon, 11 Jun 2012 10:33:41 GMT
Accept-Ranges: bytes
ETag: "7243cabbd47cd1:0"
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Wed, 13 Jun 2012 09:21:03 GMT
Content-Length: 652965648
Content-Range: bytes 0-652965647/652965648 
```

Wireshark 显示整个会话是 175615 字节。

我已经搜索了有关 Accept-Range 标头的更多信息，到目前为止我只能发现服务器必须发送请求的范围。但我不敢相信它是为了使用范围请求来一次请求一个巨大的文件。

我的网络服务器尝试发送整个文件，因为它已被请求，但我看到新的范围请求带有更大的范围（只有从请求标头复制的 Range 标头。（@time ...）是Wireshark 的时代

```
Range: bytes=2162688-652965647 (@ time == 1.646204)
Range: bytes=4980736-652965647 (@ time == 2.754322)
Range: bytes=6356992-652965647 (@ time == 2.922479) 
```

读完[这篇](https://stackoverflow.com/a/716693/474535)文章后，每当我收到整个文件的范围请求时，我都会尝试发送更短的范围。但是它根本不起作用。

我想知道：

1.  整个文件的范围请求是否是 iOS 中的某种错误（也可以在 4.3.3 中看到`Range: bytes=0-1`）`Range: bytes=0-65535/652965648`
2.  我可以以某种方式优雅地拒绝这个大请求并告诉请求我可以一次提供最大尺寸吗？（我在 RFC 中没有找到这个）
3.  IIS 是否只是在一定数量的字节后中止此请求？

**编辑**：对于数字 3：不是 IIS，但浏览器似乎只是中止（并关闭）连接。之后提出新的请求。我无法想象 Range Request 是为了请求整个文件或文件的巨大部分。

**编辑**：在 iOS7 中它似乎已经改变了。第一个范围请求仍然相同（字节 0-1）。之后，我看到上面提到的 2 或 3 个范围请求，其中最后一个请求继续传输字节更长的时间。但是仍然完成了多个请求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-24T12:58:41.930

> 1.  整个文件的范围请求是否是 iOS 中的某种错误（在 4.3.3 中也可以看到） 652965648

不知道是不是bug。但是，我可以想到媒体播放器在一个请求中请求整个文件的原因。通过这种方式，媒体播放器获得一个*数据流*，它可以从该数据流中从头到尾读取所有数据。

一旦媒体播放器从流中读取了足够的数据，它就可以开始播放媒体文件。然后它选择在播放媒体时它应该在后台缓冲多少数据。对此可能有几种不同的方法：

*   急切地缓冲整个媒体文件。当带宽很便宜（用户不为数据传输支付或支付统一费率）时，这是一个很好的策略。假设用户想要查看/收听整个媒体文件。

*   延迟缓冲刚好足以避免滞后。当带宽昂贵（用户按字节付费）时，这是一个很好的策略。

    在理想的设置中，媒体播放器根本不需要缓冲任何内容，而是在实时播放媒体时从流中解码数据。但是，这将要求底层网络通道非常稳定，并始终以所需的速度传输数据。

    情况并非如此，因此媒体播放器将选择提前几秒或几分钟缓冲。

重要的是要注意，无论选择何种策略，媒体播放器在单个请求中请求整个资源仍然是有意义的。

但是，在以下情况下，范围请求对媒体播放器至关重要：

*   连接被中止（出于任何原因）。
*   用户在媒体中领先。（例如，想看电影 10 分钟后的内容）

然后媒体播放器可以关闭它最初打开的数据流并发送一个范围请求到所需的位置。

> 2.  我可以以某种方式优雅地拒绝这个大请求并告诉请求我可以一次提供最大尺寸吗？

你不能。范围请求由客户端/浏览器发起，并且声明它支持范围请求（通过`Accept-Ranges`标头）的服务器必须服从客户端并以它请求的任何范围进行响应。

但是，您可以做的是发送带有`Transfer-Encoding: chunked`标头的数据。这将使您的服务器能够控制它应传输的数据块的大小。但是，它仍然是通过单个 HTTP 连接完成的。

# printing - 没有使用屏幕 css 的 print.css 的打印站点？

> ID：11013552
> 
> 赞同：1
> 
> 时间：2012-06-13T11:06:10.693
> 
> 标签：printing, print-css

我试图打印一个没有 print.css 的网站，所以当它出来时，你得到的只是一个未格式化的页面，是否可以以某种方式使用普通屏幕 css 进行打印？

# asp.net - 如何在 ASP.NET 中翻译或重定向 URL

> ID：11013556
> 
> 赞同：0
> 
> 时间：2012-06-13T11:06:17.857
> 
> 标签：asp.net, url

我必须在我的 Web 应用程序中翻译或重定向 URL 请求内容。

即如果请求是......

```
http://localhost/update/homepage.aspx?lang=de 
```

然后，我必须自动将其翻译成更具体的语言环境。

```
http://localhost/update/homepage.aspx?lang=de-DE 
```

我的问题是我如何做到这一点？**我应该使用任何可以将“ de** ”转换为“ **de-DE** ”的客户端javascript吗？

或者有没有更好的解决方案

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:12:46.883

使用[URL 重写](http://msdn.microsoft.com/en-us/library/ms972974.aspx#urlrewriting_topic6)怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:21:05.947

在`Page_Load`您的页面上，您可以检查这个

```
if(lang == "de")
    Server.Transfer("~/update/homepage.aspx?lang=de-DE") 
```

可能这会有所帮助，而无需在您的应用程序中实现任何路由。

# c# - 使用 dbcontext

> ID：11013557
> 
> 赞同：0
> 
> 时间：2012-06-13T11:06:19.307
> 
> 标签：c#, entity-framework, dbcontext, entity-framework-4.3

我在 EF 4.3 CodeFirst 方法中使用 DbContext 类时遇到问题。

至于现在，我已经创建了包含从数据库获取/放入数据库所需的所有方法的存储库。问题是所有这些方法都必须包含这样的代码：

```
 using(var context = new MyDbContext())
  {
    //some code here to run on database
  } 
```

但是，我不知道如何将其重构为单个类，该类执行所有初始化并在每次查询后进行处理。我还听说我不应该为 DbContext 使用静态字段（我最终做到了并且它有效，但也不是优雅的解决方案）。我没有在网上找到任何建设性的信息，也没有书解释如何以优雅的方式做到这一点。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:12:27.267

尝试使用称为“每个请求的 DbContext”的方法。您基本上按需创建一个 DbContext 实例，将其附加到 HttpContext ，然后在 Application_EndRequest 期间检查该实例是否存在，如果存在，则将其丢弃。

**请求上下文.cs**

```
internal static class RequestContext
{
    internal static MyDbContext Current
    {
        get
        {
            if (!HttpContext.Current.Items.Contains("myContext"))
            {
                HttpContext.Current.Items.Add("myContext", new MyDbContext());
            }
            return HttpContext.Current.Items["myContext"] as MyDbContext;
        }
    }
} 
```

**全球.asax.cs**

```
protected void Application_EndRequest(object sender, EventArgs e)
{
     var entityContext = HttpContext.Current.Items["myContext"] as MyDbContext;
     if (entityContext != null)
         entityContext.Dispose();
} 
```

**示例用法：**

```
public class MyDbAccessClass
{
    public static List<Products> GetProducts()
    {
         var products = from o in RequestContext.Current.Products
                        select o;
         return products.ToList();
    }
} 
```

# c# - 从 FTP 服务器检索最后上传的文件目录

> ID：11013559
> 
> 赞同：0
> 
> 时间：2012-06-13T11:06:28.450
> 
> 标签：c#, file, directory, ftp

我在这里问是否有任何C#函数可以让我通过某个`FtpWebRequest`或发现最后上传文件的目录`Stream`，以便我以后可以将它存储在MySQL数据库中？

这个功能：

```
 public static string uploadftp(string filename, string ftpserver, string user, string pass)
    {
        System.Net.FtpWebRequest request = (FtpWebRequest)WebRequest.Create(ftpserver);

        request.Method = WebRequestMethods.Ftp.UploadFile;
        request.Credentials = new NetworkCredential(user, pass);
        Stream ftpStream = request.GetRequestStream();
        FileStream file = File.OpenRead(filename);
        int length = Convert.ToInt32(file.Length);
        byte[] buffer = new byte[length];
        int bytesRead = 0;

        do
        {
            bytesRead = file.Read(buffer, 0, length);
            ftpStream.Write(buffer, 0, bytesRead);
        }
        while (bytesRead != 0);

        file.Close();

        //supposed get directory code

        ftpStream.Close();
        //return directory
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:10:56.653

您可以对 FTP 文件夹的根文件夹使用文件监视器。上传文件时会触发该文件名，您可以将其存储在mysql中。

# java - 嵌入式码头多重战争的一种安全概念

> ID：11013562
> 
> 赞同：0
> 
> 时间：2012-06-13T11:06:33.573
> 
> 标签：java, spring-security, jetty, embedded-jetty

我有一个带有多个战争的嵌入式码头服务器。每场战争都是一个 Web 应用程序的一部分。目标是为所有战争增加相同的安全性。我首选的安全机制是弹簧安全。

可能有两种解决方案：

## a) 在每场战争中定义安全。

我可以在每个 web.xml 中定义一个 servlet 过滤器。问题：如何在不同的战争中使用相同的安全性？冗余：我必须将相同的配置添加到所有 web.xml。

## b) 为路径定义安全过滤器 /*

我如何设置弹簧安全来过滤码头上的所有东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:25:26.000

[使用Apache Shiro](http://shiro.apache.org/)怎么样。有关更多信息，请参阅[Shiro 与 SpringSecurity](https://stackoverflow.com/questions/4991084/shiro-vs-springsecurity)。

[Les Hazlewood 的 Apache Shiro 的超级简单应用程序安全](http://www.youtube.com/watch?v=5ZepGFzYHpE&feature=related)是一个很棒的介绍性截屏视频。

# asp.net-mvc-3 - MVC 3 Authorize 属性在操作方法中不起作用

> ID：11013563
> 
> 赞同：0
> 
> 时间：2012-06-13T11:06:40.277
> 
> 标签：asp.net-mvc-3, authorization, asp.net-authorization

在我的 Web 应用程序中，我想在控制器中的某些操作方法中添加授权，而不是在整个控制器上。我添加了以下内容

```
 [Authorize]
  public ActionResult ManageResturant(long Id = 0)
  {
  } 
```

在 web.config 我添加了

```
<authentication mode="Forms" >
  <forms loginUrl="~/Auth/LogIn"/>
</authentication> 
```

但是当我使用该操作方法时，页面加载正常，这是错误的，我希望页面重定向到登录页面

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:22:54.137

感谢约翰的评论，在您提示问题出在我的代码中后，我真的找到了解决方案

我使用会话来存储登录用户，并使用 FormsAuthentication 确保所有用户都登录以使登录链接出现在他们面前

问题是当会话到期时 FormsAuthentication 仍在验证用户是否已登录，因此看起来用户已注销，但实际上他已使用表单身份验证登录

所以我做了什么 OnActionExecuting 方法我检查会话是否为空我为用户注销所以在这种情况下我确保用户已注销

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:59:13.800

设置看起来没问题，您确定要调用此操作吗？难道您没有其他名称为 ManageResturant 且没有 [Authorize] 注释的操作吗？

# iphone - 使用 Appaccelerator 拍摄后如何直接从 iPhone 上传照片？

> ID：11013566
> 
> 赞同：2
> 
> 时间：2012-06-13T11:06:59.320
> 
> 标签：iphone, upload

使用默认相机拍摄后如何直接从 iPhone 上传照片？

目前我使用以下逻辑（Appaccelerator）存储照片：

```
 <script language="JavaScript">
    var medium = {};
Rf.media.push(medium);

medium.title = 'Photo';
medium.extension = 'jpg';

medium.create = function () {

var medium = this;

Ti.Media.showCamera({
    // TODO: disallow video for ios
    saveToPhotoGallery: false,
    showControls: true,
    success: function (media_item) {
        var name = Rf.util.timestamp()+'.'+medium.extension;
        write_to_new_file(name, media_item.media, function (file) {
        });
    },
});
};
medium.view = function (file) {
var photoView = Ti.UI.createImageView({
    image: file,
});

var photoWindow = Ti.UI.createWindow({
    backgroundColor: Rf.style.backgroundColor,
    color: Rf.style.foregroundColor,
    layout: 'vertical',
    modal: true,
});
photoWindow.add(photoView);
photoWindow.open();
}; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-13T11:27:01.553

```
-(void)camera  
{  

    NSLog(@"image upload");
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select Image from..." delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Camera", @"Image Gallary", nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleAutomatic;
    actionSheet.alpha=0.90;
    actionSheet.tag = 1;

    //[actionSheet showFromTabBar:appDelegate.tabbarcontroller.tabBar];

    [actionSheet showInView:appdelegate.window];

    [actionSheet release];

}

-(void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex  
{ 

    if (buttonIndex==actionSheet.cancelButtonIndex) 
    {   cam = YES;
        NSLog(@"cancel");

        [actionSheet dismissWithClickedButtonIndex:actionSheet.cancelButtonIndex animated:YES];

    }
    else if(buttonIndex==0)
    {
        cam = NO;  
        NSLog(@"Camera");

        UIImagePickerController *picker = [[UIImagePickerController alloc] init];
        picker.delegate = self; 
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
        picker.wantsFullScreenLayout = YES;

        picker.allowsEditing=YES; 
        actionsheet = YES;
        [self presentModalViewController:picker animated:YES]; 

    }
    else if(buttonIndex==1)

    {
        cam = NO;
        NSLog(@"Gallery");

        UIImagePickerController *picker = [[UIImagePickerController alloc] init];
        picker.delegate = self; 
        picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        picker.wantsFullScreenLayout = YES;

        picker.allowsEditing=YES;
                actionsheet = YES;
        [self presentModalViewController:picker animated:YES];

    }

}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo  
{

    [picker dismissModalViewControllerAnimated:YES];

    [self.captureimage setImage:image];

}

 convert it to image data then we can upload it  
  self.imagedata = UIImagePNGRepresentation(self.captureimage.image); 
```

# r - 将 X 列中的值替换为 Y 列中的值，但前提是 X 的值与 Z 列中的值匹配

> ID：11013568
> 
> 赞同：0
> 
> 时间：2012-06-13T11:07:00.773
> 
> 标签：r

我有两个数据框，一个有 1 列（X），另一个有 2 列（Y 和 Z）：

X 列包含数字 1:99，但偶尔会有一些字母而不是数字，即：`1, 2, 3, A, 5, B, 7, 8, C, D, 11, 12 etc.`

Y 列包含这些相同的字母，它们与某些数字配对（如 Z 列中所示），即：

`A 4`

`B 6`

`C 9`

`D 10`

如何根据 X 列中的字母与 Y 列中的字母是否匹配，将 X 列中的字母替换为 Z 列的值？这将导致 X 列`1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 etc.`

直截了当的`merge`行不通（我需要保留 X 中的所有值），而且我不确定如何`sub`有条件地使用。此外，Y 列和 Z 列包含的行数超过 X 列所需的行数，所以我不能只使用`cbind`. 我不是很擅长使用`regex`，虽然这可能是我最好的选择......

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:21:35.633

我只会使用 for 循环。创建数据：

```
df1 <- data.frame(X = c("A", 5, "B", 7, 8, "C", "D", 11, 12))
df2 <- data.frame(Y = c("A", "B", "C", "D"),
                  Z = c(4, 6, 9, 10)) 
```

我们需要确保事物是字符向量，而不是因子，以测试相等性

```
df1$X <- as.character(df1$X)
df2$Y <- as.character(df2$Y) 
```

然后我们可以进行替换：

```
for (i in 1:nrow(df2)) {
    df1$X[df1$X == df2$Y[i]] <- as.character(df2$Z[i])
} 
```

最后，我猜你想要`X`as 数字，因为所有字母都消失了：

```
df1$X <- as.numeric(df1$X) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:22:29.730

怎么样`X[X==Y] <- Z[X==Y]` ？或者，调用您的 Y,Z 数据框`DF`，

`X[X==DF$Y] <- DF$Z[X==DF$Y]`

编辑：这与 Shuja 的答案基本相同，但据我所知，不需要循环。

# sql - 函数执行时间长

> ID：11013570
> 
> 赞同：0
> 
> 时间：2012-06-13T11:07:05.363
> 
> 标签：sql, vb.net, sql-server-2008, ado.net

实际上，我试图找出partno是否存在于数据库表中，并且在count = checkCommand.ExecuteReader sataement中需要很长时间

请在下面找到方法

```
Public Function CheckProductNo(ByVal Partno As String) As Boolean
    Dim count As SqlDataReader
    Dim valid As Boolean = False
    Using connection As New SqlConnection
         connection.Open()
        Using checkCommand As New SqlCommand("PartNo_check", connection)

            checkCommand.CommandType = CommandType.StoredProcedure
            checkCommand.Parameters.Add(New SqlParameter("@PartNo", Partno))
            count = checkCommand.ExecuteReader
            If count.ToString > 0 Then
                valid = True
            End If
        End Using

    End Using
    Return valid

End Function

STORED PROCEDURE
CREATE PROCEDURE PartNo_Check
@PartNo VARCHAR(30)

AS

SELECT PartNo from T_Product where PartNo=@Partno

Thanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:57:05.740

重要的是要具体说明您的代码应该做什么 - 在我看来，您正在尝试确定某物是否存在，而不是它的计数或其他属性。为此，我将修改您的存储过程如下：

```
STORED PROCEDURE
CREATE PROCEDURE PartNo_Check
@PartNo VARCHAR(30)

AS

SET NOCOUNT ON;

SELECT  CASE WHEN EXISTS ( SELECT PartNo 
                           FROM     T_Product
                           where PartNo=@Partno) THEN 1
             ELSE 0
        END 
```

从理论上讲，这应该最适合您尝试做的事情，并且您应该确保 ParNo 列上有一个索引，正如史蒂夫所说的那样。然后你的方法可以写成：

```
 Public Function CheckProductNo(ByVal Partno As String) As Boolean
   Using connection As New SqlConnection
     connection.Open()
    Using checkCommand As New SqlCommand("PartNo_check", connection)
        checkCommand.CommandType = CommandType.StoredProcedure
        checkCommand.Parameters.Add(New SqlParameter("@PartNo", Partno))
        return convert.toboolean(checkCommand.executescalar)
    End Using

End Using

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:14:15.020

假设您的 PartNo_check 只返回一个数值，然后尝试使用

```
Dim result As Integer = Convert.ToInt32(checkCommand.ExecuteScalar()) 
```

使用给定的存储过程代码，然后使用

```
Dim result As String = checkCommand.ExecuteScalar().ToString() 
```

如果您的存储过程只返回一行一列，则 ExecuteScalar 将该唯一结果作为其返回值。其他列或行被忽略

[请参阅 MSDN 参考资料](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx#Y0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:14:20.820

我会尝试自下而上调试问题；您可以通过在某种 SQL 管理工具中查询来检查存储过程是否花费了太多时间。

如果是这种情况，我的第一个解决方案是优化数据库、检查索引等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T12:50:28.530

如果您的目标是确认是否有 Partno 的数据，那么我建议您将查询修改为：

```
STORED PROCEDURE
CREATE PROCEDURE PartNo_Check
@PartNo VARCHAR(30)

AS

SELECT Top 1 PartNo from T_Product where PartNo=@Partno 
```

那么你将不得不

```
count = checkCommand.ExecuteReader
If count.HasRow then valid=true 
```

这是针对您的问题的，但是如果您想操作任何相关的数据，这不是一个好的解决方案。

希望这能像你希望的那样快！

# java - 用于字符串列表的 Initbinder

> ID：11013573
> 
> 赞同：1
> 
> 时间：2012-06-13T11:07:23.650
> 
> 标签：java, spring, data-binding, spring-mvc

大家好，我正在尝试使用 initbinder 注释来匹配我从乘法列表框中收到的值。列表框中的值是字符串值。最初我使用以下方式进行操作，只是为了匹配一个选择（我还没有添加乘法选择），它工作得很好。代码如下：

在控制器我有这个：

```
 @InitBinder 
public void initBinderResearch(WebDataBinder b) {

    b.registerCustomEditor(Research.class, new ResearchEditor());

} 
```

在调试时，我可以看到 research_area 值的绑定不成功。但我没有任何异常或错误。谁能告诉我我做错了什么，这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:03:32.033

您无法覆盖`PropertyEditor.setAsText(List<String> text)`，因为它在父类中不存在，并且`WebDataBinder`不会使用此方法进行字符串到对象的转换。

如果您注册您的原始文件`ResearchEditor`并将属性从类型更改为支持表单模型中的`Research`类型`List<Research>`，WebDataBinder 将转换它们。

# sencha-touch - Sencha Touch 2：动态添加一个css类到一个模板内的div

> ID：11013574
> 
> 赞同：1
> 
> 时间：2012-06-13T11:07:30.493
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect

假设我有一个带有以下 itemTpl 的数据视图

```
 itemTpl: [
        '<div class="category_entry_inner">',
        '    <div class="category_right">',
        '        <div class="category_quantity">{catQty}</div>',
        '    </div>',
        '    <div class="category_left">',
        '        <div class="category_left_content">',
        '            <div class="category_left_icon"></div>',
        '            <div class="category_left_text">{catName}</div>',
        '        </div>',
        '    </div>',
        '</div>'
    ], 
```

现在我想做的是挂钩 dataview 刷新事件，并在触发时选择所有具有 category_entry_inner 的 div 并向所有这些 div 添加一个简单的类 (.someclass{background:red})。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:48:38.130

```
var listObjs = Ext.DomQuery.select("div[class='category_entry_inner']");
Ext.Array.forEach(listObjs, function(elmnt, idx) {
    Ext.get(elmnt).clearListeners();
    Ext.get(elmnt).addListener('tap', this.yourfunctionname, this, {id:elmnt.id});
}, this); 
```

这绝对是你的工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:55:04.323

要选择所有你想要的 div，你可以做

```
var divs = Ext.DomQuery.select('div[class=category_entry_inner]'); 
```

它将返回一个包含所有 div 的数组，然后您只需要遍历它们并添加一个类：

```
var i,j;
for(i=0,j=divs.length;i<j;i++){
    divs[i].className += " bar";
} 
```

希望这可以帮助

# sql - SQL：部分分组依据

> ID：11013575
> 
> 赞同：1
> 
> 时间：2012-06-13T11:07:34.820
> 
> 标签：sql, sql-server, sql-server-2005

这是我的桌子的`TheTable`样子

```
ColA  | ColB  | ColC
------+-------+------
abc   | 2005  | item7
abc   | 2010  | item3
def   | 2009  | item2
def   | 2010  | item4
def   | 2011  | item5
def   | 2012  | item1 
```

我想写一个查询来返回这个结果：

```
ColA  | ColB  | ColC
------+-------+------
abc   | 2010  | item3
def   | 2012  | item1 
```

我最终得到：

```
SELECT TheTable.ColA,TheTable.ColB,TheTable.ColC
FROM TheTable,(SELECT ColA a,MAX(ColB) b FROM TheTable GROUP BY ColA) t
WHERE t.a=TheTable.ColA AND t.b=TheTable.ColB 
```

但我不确定这种嵌套查询是否非常有效。那么问题来了，有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:17:14.630

```
WITH OrderedTable AS
(
    SELECT ColA, ColB, ColC,
        ROW_NUMBER() OVER (PARTITION BY ColA ORDER BY ColB DESC) AS Row
    FROM TheTable
)
SELECT ColA, ColB, ColC FROM OrderedTable WHERE Row = 1 
```

# pdf - PDFSharp - 报告文档颜色和透明度

> ID：11013576
> 
> 赞同：0
> 
> 时间：2012-06-13T11:07:43.103
> 
> 标签：pdf, pdf-generation, pdfsharp

我在使用 PDFSharp 库制作的 PDF 文件时遇到了一些问题。只要我正常查看文件，这些文件就可以了。

但是，我需要使用辅助功能选项（编辑-> 首选项-> 辅助功能（在左侧菜单类别中）-> 报告文档颜色-> 自定义颜色）更改这些文件。每当有带有透明度和/或透明蒙版的图像并且背景颜色设置为黑色时，一切都会消失。

我查看了 PDFSharp 代码，似乎他们正在设置一些透明的 SMask，我没有发现它做任何明显的事情（至少对我来说），但我不确定我是否禁用它会搞砸一些我不能做的事情考虑到。

很可能我不会在这个问题上获得帮助，但我希望有人对 PDF 透明度和辅助功能选项的这个问题有更多的了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:54:51.490

透明度蒙版仅为具有透明度的图像创建。

因此，如果您的图像包含黑色线条和透明背景，并且您将 PDF 页面的颜色更改为黑色，您将在黑色背景上看到黑色线条 - 您什么也看不到。

如果您的图像在白色背景上包含黑色线条，您将看到您所知道的图像：白色背景上的黑色线条。

透明度是一项功能，它是可选的。

PDFsharp 中可能存在错误。如果我查看带有黑色背景颜色的 Graphics 示例的输出，则第 4 页和第 5 页完全是黑色的（对我来说看起来不对）。Hello MigraDoc 示例的输出在我看来是正确的。第 1 页的图像不使用透明度并保持白色背景，第 6 页的图表是透明的（导致黑色背景上的黑线）。但也许这是 Adob​​e Reader 中的一个错误——如果我不设置背景颜色，一切看起来都很好，而是激活透明度网格。

如果您认为您的图像不包含透明度，那么我们将需要文件（PDF 和图像）进行进一步检查。

编辑：我刚刚使用 Adob​​e Acrobat 5 检查了图形示例的输出 - 即使使用黑色背景颜色，所有页面也能正确显示。在 Adob​​e Acrobat 8​​ 和 Adob​​e Reader X 中，第 4 页和第 5 页是黑色的。对我来说，这看起来像是 Adob​​e Acrobat/Reader 中的一个错误。

# javascript - onBlur 和 onSubmit 干扰

> ID：11013577
> 
> 赞同：0
> 
> 时间：2012-06-13T11:07:45.423
> 
> 标签：javascript, forms, post, scroll

这是我的完整脚本...您可以创建 test.php 并将其放入。

它看起来像这样：

```
 <html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script language="javascript" type="text/javascript" src="<?php echo '' . $site_url . '' ?>includes/libary.js"></script>
<script type="text/javascript">

function saveScrollPositions(theForm) {
if(theForm) {
var scrolly = typeof window.pageYOffset != 'undefined' ? window.pageYOffset : document.documentElement.scrollTop;
var scrollx = typeof window.pageXOffset != 'undefined' ? window.pageXOffset : document.documentElement.scrollLeft;
theForm.scrollx.value = scrollx;
theForm.scrolly.value = scrolly;
}
}

</script>
</head>
<body>

<div style="padding: 200px 0 200px 0;">

<?php
    $notes = $_POST['internal_notes'];
    $bonid = $_POST['reciept_id'];

    echo '<form name="notes" method="post" action="test.php" onsubmit="return saveScrollPositions(this);">';
    echo '<input type="hidden" name="scrollx" id="scrollx" value="0" />';
    echo '<input type="hidden" name="scrolly" id="scrolly" value="0" />';
    echo '<input type="hidden" name="reciept_id" value="' . $_POST['reciept_id'] . '">';
    echo '<textarea name="internal_notes">';
        if ($_POST['internal_notes'] == '') { 
        echo 'No internal notes.'; 
        } else {
        echo $_POST['internal_notes'];
        }
    echo '</textarea>';
    echo '<input type="submit" name="submit" value="Save">';
    echo '</form>';     

$scrollx = 0;
$scrolly = 0;

if(!empty($_REQUEST['scrollx'])) {
$scrollx = $_REQUEST['scrollx'];
}

if(!empty($_REQUEST['scrolly'])) {
$scrolly = $_REQUEST['scrolly'];
}
?>

</div>

<script type="text/javascript">
window.scrollTo(<?php echo "$scrollx" ?>, <?php echo "$scrolly" ?>);
</script> 
```

这工作正常。当我按保存时，它会发布并且页面返回到滚动位置。但是我想删除提交按钮，并插入使用 onblur="submit();" 在“internal_notes”字段上。

但是......这不起作用。如何结合提交和“saveScrollPositions()”函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:48:34.770

如果你的js函数没问题，我很想看看submit()，试试这个：

1）在您的表单中添加一个ID，即：`id='notes'`

2）通过此代码更改de onblur：

```
onblur="saveScrollPositions(document.getElementById('notes')); submit();" 
```

[在这里](http://jsfiddle.net/BWgeG/2/)你可以看到一个功能示例

# objective-c - Objective-C中强弱的区别

> ID：11013587
> 
> 赞同：322
> 
> 时间：2012-06-13T11:08:23.790
> 
> 标签：objective-c

我是 Obj-C 的新手，所以我的第一个问题是：

对象指针的声明`strong`和声明之间有什么区别？`weak``@property`

还有，什么`nonatomic`意思？

* * *

## 回答 #1

> 赞同：733
> 
> 时间：2013-08-20T21:04:31.053

从气球的角度考虑强引用和弱引用可能会有所帮助。

只要至少有一个人抓着一根绳子，气球就不会飞走。持有字符串的人数是保留计数。当没有人抓住绳子时，气球会飞走（dealloc）。许多人可以为同一个气球系上绳子。您可以使用强引用和弱引用在被引用对象上获取/设置属性和调用方法。

强引用就像抓住气球的绳子。只要你握住气球上的绳子，它就不会飞走。

弱参考就像看气球。你可以看到它，访问它的属性，调用它的方法，但是你没有那个气球的字符串。如果每个抓住绳子的人都放开，气球就会飞走，你就不能再接触它了。

* * *

## 回答 #2

> 赞同：656
> 
> 时间：2012-06-13T11:16:57.123

强引用（您将在大多数情况下使用）意味着您想要“拥有”您使用此属性/变量引用的对象。只要您使用强引用指向它，编译器就会注意您分配给此属性的任何对象都不会被破坏。只有将属性设置为`nil`，对象才会被销毁（除非一个或多个其他对象也持有对它的强引用）。

相反，使用弱引用表示您不想控制对象的生命周期。您弱引用的对象仅存在，因为至少有一个其他对象持有对它的强引用。一旦不再是这种情况，对象就会被销毁，并且您的弱属性将自动设置为`nil`. iOS 中最常见的弱引用用例是：

1.  委托属性，通常被弱引用以避免保留循环，以及

2.  视图控制器的主视图的子视图/控件，因为这些视图已经被主视图强持有。

原子与非原子是指编译器为属性综合的 getter 和 setter 方法的线程安全性。atomic （默认）告诉编译器使访问器方法线程安全（通过在访问 ivar 之前添加锁），而 nonatomic 则相反。非原子的优点是性能稍高。在 iOS 上，Apple 几乎所有属性都使用非原子，因此一般建议您也这样做。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-06-13T11:14:26.750

**strong**：将传入的值分配给它，它将保留传入的值并释放实例变量的现有值

**weak**：将传入的值分配给它而不保留它。

所以基本的区别是新变量的保留。一般来说，您想要保留它，但在某些情况下您不想拥有它，否则您将获得保留周期并且无法释放对象的内存。例如。obj1 保留 obj2，obj2 保留 obj1。为了解决这种情况，您使用弱引用。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-06-10T06:39:23.720

**一个虚拟的答案：-**

我认为上面的答案给出了解释，所以我只想告诉你在哪里使用**`STRONG`**以及在哪里使用**`WEAK`：**

**使用`Weak`：-** 1\. 代表 2\. 出口 3\. 子视图 4\. 控件等

**使用`Strong`：-** 未包含在任何地方的剩余**`WEAK`**。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-11-26T13:27:39.713

**strong**和**weak**，这些关键字围绕着Objective-C 中的**对象所有权**

**什么是对象所有权？**

指针变量意味着它们指向的对象的所有权。

*   当一个方法（或函数）有一个指向一个对象的局部变量时，这个变量就被称为拥有被指向的对象。
*   当一个对象有一个指向另一个对象的实例变量时，具有该指针的对象被称为拥有被指向的对象。

每当指针变量指向一个对象时，该对象就有一个所有者并且将保持活动状态。这被称为**强**参考。

变量可以选择不获取它指向的对象的所有权。不拥有对象所有权的变量称为**弱**引用。

在这里查看详细说明[Demystifying @property and attributes](https://vinayjn.github.io/posts/properties-and-mysteries)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-08-20T19:53:23.120

在这里，**Apple 文档**使用各种示例解释了弱属性和强属性之间的区别：

[https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW3](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW3)

在这里，在此博客中，作者已将所有属性收集在同一位置。这将有助于比较属性特征：

[http://rdcworld-iphone.blogspot.in/2012/12/variable-property-attributes-or.html](http://rdcworld-iphone.blogspot.in/2012/12/variable-property-attributes-or.html)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-09-02T14:28:39.127

**强**是默认值。只要有一个指向它的强指针，一个对象就保持“活动”。

**弱**指定不保持被引用对象活动的引用。当对象没有强引用时，弱引用设置为 nil。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-10-12T11:19:47.993

要理解强引用和弱引用，请考虑以下示例，假设我们有名为 displayLocalVariable 的方法。

```
 -(void)displayLocalVariable
  {
     UIView* myView = [[UIView alloc] init];
     NSLog(@"myView tag is = %ld", myView.tag);
  } 
```

在上述方法中，myView 变量的作用域仅限于 displayLocalVariable 方法，一旦方法完成，持有 UIView 对象的 myView 变量将从内存中释放。

现在，如果我们想在视图控制器的整个生命周期中保存 myView 变量怎么办。为此，我们可以创建名为 usernameView 的属性，该属性将对变量 myView 进行强引用（参见下面的代码） `@property(nonatomic,strong) UIView* usernameView;`，`self.usernameView = myView;`如下所示，

```
@interface LoginViewController ()

@property(nonatomic,strong) UIView* usernameView;
@property(nonatomic,weak) UIView* dummyNameView;

- (void)displayLocalVariable;

@end

@implementation LoginViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

}

-(void)viewWillAppear:(BOOL)animated
{
     [self displayLocalVariable];
}

- (void)displayLocalVariable
{
   UIView* myView = [[UIView alloc] init];
   NSLog(@"myView tag is = %ld", myView.tag);
   self.usernameView = myView;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

@end 
```

现在在上面的代码中，您可以看到 myView 已分配给 self.usernameView 并且 self.usernameView 对 myView 具有强引用（正如我们在接口中使用 @property 声明的那样）。因此 myView 不会从内存中释放，直到 self.usernameView 还活着。

*   弱参考

现在考虑将 myName 分配给作为弱引用的 dummyNameView，`self.dummyNameView = myView;`与强引用不同，Weak 将只保留 myView，直到有对 myView 的强引用。请参阅下面的代码以了解弱引用，

```
-(void)displayLocalVariable
  {
     UIView* myView = [[UIView alloc] init];
     NSLog(@"myView tag is = %ld", myView.tag);
     self.dummyNameView = myView;
  } 
```

在上面的代码中有对 myView 的弱引用（即 self.dummyNameView 对 myView 有弱引用）但没有对 myView 的强引用，因此 self.dummyNameView 将无法保存 myView 值。

现在再次考虑下面的代码，

```
-(void)displayLocalVariable
      {
         UIView* myView = [[UIView alloc] init];
         NSLog(@"myView tag is = %ld", myView.tag);
         self.usernameView = myView;
         self.dummyNameView = myView;
      } 
```

在上面的代码中 self.usernameView 有一个对 myView 的强引用，因此 self.dummyNameView 现在即使在方法结束后也会有一个 myView 的值，因为 myView 有一个与之关联的强引用。

现在，每当我们对变量进行强引用时，它的保留计数都会增加 1，并且该变量不会被释放，直到它的保留计数达到 0。

希望这可以帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-23T11:11:21.047

**强**：基本上与我们用来从/向其他类获取或发送数据的属性一起使用。 **弱**：通常所有的出口，连接都是来自接口的弱类型。

**Atomic**：这种类型的属性用于我们不想将我们的出口或对象共享到不同的同时线程中的情况。换句话说，原子实例使我们的属性一次处理一个线程。希望它对你有帮助。

# c++ - 将两张地图加在一起

> ID：11013591
> 
> 赞同：5
> 
> 时间：2012-06-13T11:08:39.913
> 
> 标签：c++, gcc, ubuntu, gnu

我想添加两个地图以及以下行为。

如果键存在-> 将两个键值相加。

如果键不存在 -> 插入对映射。

我看过一些标准库算法。即转换，但似乎没有做我想要的。

取自此[链接](http://www.cplusplus.com/reference/algorithm/transform/)

```
template < class InputIterator, class OutputIterator, class UnaryOperator >
  OutputIterator transform ( InputIterator first1, InputIterator last1,
                             OutputIterator result, UnaryOperator op )
{
  while (first1 != last1)
    *result++ = op(*first1++);  // or: *result++=binary_op(*first1++,*first2++);
  return result;
} 
```

我的想法是，在使用时我的第二张地图中只有一个迭代器和适当的仿函数

```
 *result++=binary_op(*first1++,*first2++); 
```

因此，我将无法遍历我的第二张地图以找到关键值。

一个想法是让我自己的算法稍微改变一下。

```
template < class InputIterator, class ContainerType, class BinaryOperator >
  void myTransform ( InputIterator first1, InputIterator last1,
                               ContainerType cont2,  
                               BinaryOperator binary_op )
{
  while (first1 != last1)
    binary_op(first1++, cont2); //cont2 passed by reference 
} 
```

然后我就可以使用：

`cont2.find()`在我的函子中搜索整个地图。

这将是我在想什么的更完整的例子，但我似乎得到了一个我无法解决的编译错误（我有点猜测 BinaryOperator 类型......见下文）？

```
#include <map>
#include <string>
#include <iostream>

template < class InputIterator, class ContainerType, class BinaryOperator >
void myTransform ( InputIterator first1, InputIterator last1,
                 ContainerType &cont2, 
                 BinaryOperator binary_op )
{
  while (first1 != last1)
    binary_op(first1++, cont2); //cont2 passed by reference
}

template<class IteratorType, class ContainerType>
struct AddMapValues:
  std::binary_function<IteratorType, ContainerType, void>
{
  void operator()(IteratorType itr, ContainerType& cont)
  {
    if( cont.find(itr->first) != cont.end() ) cont[itr->first] = cont.find(itr->first).second + itr->second;
    else cont.insert( (*itr) );
  }
};

int main()
{
  typedef std::map<std::string, double> stringDoubleMap;
  typedef std::map<std::string, double>::iterator stringDoubleMapItr;
  typedef void (*ptrfnt)(stringDoubleMapItr, stringDoubleMap& );

  stringDoubleMap map1;
  stringDoubleMap map2;

  map1.insert( stringDoubleMap::value_type("Test1",1.0) );
  map1.insert( stringDoubleMap::value_type("Test2",2.0) );
  map1.insert( stringDoubleMap::value_type("Test3",3.0) );

  map2.insert( stringDoubleMap::value_type("Test1",1.0) );
  map2.insert( stringDoubleMap::value_type("Test2",2.0) );
  map2.insert( stringDoubleMap::value_type("Test3",3.0) );

  myTransform( map1.begin(), map1.end(),
               map2, 
               AddMapValues< stringDoubleMapItr, stringDoubleMap >() );

  return 0;

} 
```

这是我的编译器错误：

```
testingMapTransforms.cxx: In function ‘int main()’:

testingMapTransforms.cxx:52:85: error: no matching function for call to     ‘myTransform(std::map<std::basic_string<char>, double>::iterator, std::map<std::basic_string<char>, double>::iterator, stringDoubleMap&, std::map<std::basic_string<char>, double>::iterator, AddMapValues<std::_Rb_tree_iterator<std::pair<const std::basic_string<char>, double> >, std::map<std::basic_string<char>, double> >)’

testingMapTransforms.cxx:52:85: note: candidate is:

testingMapTransforms.cxx:12:20: note: template<class InputIterator, class ContainerType, class   OutputIterator, class BinaryOperator> OutputIterator myTransform(InputIterator, InputIterator,  ContainerType, OutputIterator, BinaryOperator) 
```

似乎有另一个迭代器来自某个地方并且容器类型没有正确读取？

有任何想法吗？

我在用

gcc - GNU 项目 C 和 C++ 编译器

和

Ubuntu/Linaro 4.6.3-1ubuntu5

谢谢

笔记：

我在答案中更新了上面代码的工作版本。如果您认为我应该更改问题代码，请告诉我。不确定最佳实践

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T11:21:10.167

```
I want to add two maps together with the following behavior:
If key exists add two key values together.
If key does not exist. Insert pair to map. 
```

我认为一个简单的 for 循环会做你想要的：

```
for(auto it = map2.begin(); it != map2.end(); ++it) map1[it->first] += it->second; 
```

如果键存在，则该值将添加到现有键中。如果键不存在，`operator[]`将插入它并且它的值将被默认初始化（0.0 for `double`）。

我不认为在这里使用适用于任何容器的通用函数是明智的。say vector 和 map 的 insert() 和 operator[] 的语义差别太大了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:14:44.197

您的代码不可读。它容易出错。

手动完成，但一次只做一件事。不要混合递增指针、取消引用它们、将元素添加到地图和从另一个地图查询都在同一行中。结果一团糟。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T11:25:08.400

我不认为你可以做到这一点`transform`。你有两个容器，你需要两个迭代器对，当一个元素只在其中一个中时，你需要分别推进它们。两个序列版本`transform`同步推进它们。

用手做应该不会太难。可能类似于以下内容：

```
typedef std::map<std::string, std::double> Map

Map
addValues( Map const& m1, Map const& m2 )
{
    Map results;
    Map::const_iterator i1 = m1.begin();
    Map::const_iterator i2 = m2.begin();
    while ( i1 != m1.end() && i2 != m2.end() ) {
        if ( i1->first < i2->first ) {
            results.insert( results.end(), *i1 );
            ++ i1;
        } else if ( i2->first < i1->first ) {
            results.insert( results.end(), *i2 );
            ++ i2;
        } else {
            results.insert( results.end(),
                            Map::value_type( i1->first, i1->second + i2->second ) );
            ++ i1;
            ++ i2;
        }
    }
    results.insert( i1, m1.end() );
    results.insert( i2, m2.end() );
    return results;
} 
```

（在将其作为模板之前，我会先让它像这样工作。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T13:29:51.343

这是上面的修订版。问题代码中有很多错误，但这似乎有效并且是相同的想法：

```
template < class InputIterator, class ContainerType, class BinaryOperator >
void myTransform ( InputIterator first1, InputIterator last1, ContainerType &cont2, BinaryOperator binary_op )
{
  while (first1 != last1)
    (*binary_op)(first1++, cont2); //cont2 passed by reference
}

template<class IteratorType, class ContainerType>
struct AddMapValues:
  std::binary_function<IteratorType, ContainerType, void>
{
  static void Add(IteratorType itr, ContainerType& cont)
  {
    cont[itr->first] += itr->second;
  }
};

int main()
{

  typedef std::map<std::string, double> stringDoubleMap;
  typedef std::map<std::string, double>::iterator stringDoubleMapItr;
  typedef void (*ptrfnt)(stringDoubleMapItr, stringDoubleMap& );

  stringDoubleMap map1;
  stringDoubleMap map2;

  map1.insert( stringDoubleMap::value_type("Test1",1.0) );
  map1.insert( stringDoubleMap::value_type("Test2",2.0) );
  map1.insert( stringDoubleMap::value_type("Test4",3.0) );

  map2.insert( stringDoubleMap::value_type("Test1",1.0) );
  map2.insert( stringDoubleMap::value_type("Test2",10.0) );
  map2.insert( stringDoubleMap::value_type("Test3",3.0) );

  myTransform( map1.begin(), map1.end(), map2, AddMapValues<stringDoubleMapItr, stringDoubleMap >::Add );

  for(stringDoubleMapItr itr = map2.begin(); itr != map2.end(); ++itr ){
    std::cout << "INFO: Key: " << itr->first << " | Value: " << itr->second  << std::endl;
  }

  return 0;

} 
```

# javascript - 是否可以在 html5 画布上移动已经绘制的形状？

> ID：11013593
> 
> 赞同：3
> 
> 时间：2012-06-13T11:08:45.113
> 
> 标签：javascript, html, canvas

注意：我一次只想移动 1 个形状

```
Circle.prototype.create = function(){
    if ( this.canvas === null ){
        throw "Circle has no canvas";
    }
    if (this.canvas.getContext){
        this.context = this.canvas.getContext("2d");
        this.context.fillStyle = this.color;
        this.context.beginPath();
        this.context.arc(this.x,this.y,this.r,0,Math.PI*2);
        this.context.closePath();
        this.context.fill();
    }
} 
```

这画了一个圆圈，注意`context`变量被保存为对象属性

我已经编写了这个函数来使用原始圆圈移动这个现有的圆圈`context`

```
Circle.prototype.move_to = function(x,y){
    if (this.context === null){
        throw "Circle has no context to move";
    }
    this.x = x; this.y = y;
    this.context.translate(x, y);
    this.context.beginPath();
    this.context.arc(this.x,this.y,this.r,0,Math.PI*2);
    this.context.closePath();
    this.context.fill();
} 
```

然而，这只是画了另一个圆圈。

我怎样才能让它移动现有的？

无需清除原件并绘制另一个！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:43:34.870

这是从我的另一个答案中复制的，但简短的回答是您不能这样做。您可以做的是将信息存储在这样的对象中。

```
var rectangle = {x:10,y:20,width:20,height:40}; 
```

然后您可以更改任何值并*重绘*它，您必须先清除画布，或者至少清除要重绘到的画布部分。

```
//clear the canvas then draw
rectangle.width = 60;
ctx.fillRect(rectangle.x,rectangle.y,rectangle.width,rectangle.height); 
```

**[现场演示](http://jsfiddle.net/loktar/QrCuj/)**

# c++ - 为什么 boost::asio::ip::tcp::socket& socket() 不能是 const

> ID：11013597
> 
> 赞同：0
> 
> 时间：2012-06-13T11:08:53.597
> 
> 标签：c++, sockets, boost, boost-asio

`boost::asio::ip::tcp::socket& socket() const`正在返回`_socket`的类型`boost::asio::ip::tcp::socket`是给我这个错误

```
error: invalid initialization of non-const reference of type ‘boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> >&’ from a temporary of type ‘const boost::reference_wrapper<const boost::asio::basic_stream_socket<boost::asio::ip::tcp, boost::asio::stream_socket_service<boost::asio::ip::tcp> > >’ 
```

`socket()`函数只是getter，并没有改变这个对象的状态，所以如果我做了它为什么会触发错误`const`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:25:36.597

因为该函数正在返回对对象的引用。当调用 const 成员函数时，返回的引用也必须是 const。

`boost::asio::ip::tcp::socket const& socket() const`

但是，根据您要对该套接字引用执行的操作，您可能必须返回一个非常量引用，在这种情况下，另一种选择是将 getter 函数声明为非常量或`mutable`在类定义中声明套接字

`mutable boost::asio::ip::tcp::socket socket_`

# jquery - jQuery选择重复和删除选项

> ID：11013599
> 
> 赞同：0
> 
> 时间：2012-06-13T11:09:02.680
> 
> 标签：jquery, forms, dom

我正在使用 JQuery 插件 twolateralmultiselect [http://www.stevefenton.co.uk/cmsfiles/assets/File/twolateralmultiselect.html](http://www.stevefenton.co.uk/cmsfiles/assets/File/twosidedmultiselect.html)然后一旦将选项放置在动态创建的选择中，它们也会被克隆到第三个选择。但是，如果已经克隆的选项随后从动态选择中删除，它们也需要从第三个选择框中删除，本质上动态选择的内容需要与第三个选择完全相同。

任何人都遇到过这个或知道修复？

或者如何在使用 .focus 函数启动 .clone 之前删除所有以前克隆的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:35:54.793

只是为了关闭这个

return !$('#thirdselect').html($("#dynamicselect").html()).prepend('适用于所有');

# iphone - 用静态方法在 UIView 上用清晰的颜色绘制（切一个洞）

> ID：11013600
> 
> 赞同：6
> 
> 时间：2012-06-13T11:09:11.460
> 
> 标签：iphone, objective-c, ios, uiview, core-graphics

我有一个 iPhone 应用程序，我需要实现以下方法：

```
+(UITextView *)textView:(UITextView *) withCuttedRect:(CGRect)r 
```

此方法必须剪切（填充`[UIColor clearColor]`）矩形`r`并`UITextView`返回`UITextView`对象。

`UITextView`用户将从切割的孔中看到后面的视图。

怎么做到呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T07:35:30.263

当你有类似的东西时：

```
 +(UITextView *)textView:(UITextView *)textView withCuttedRect:(CGRect)r {
} 
```

你实际上可以简单地从核心动画访问textview的层

```
 textView.layer 
```

然后你可以设置一个蒙版进行剪辑。这些蒙版的工作方式如下：您通常绘制一个黑色形状，并且保持不变，其余部分将被剪裁（好吧，您实际上也可以在 Alpha 通道上做一些事情，但大致就是这样）。

所以你需要一个黑色矩形作为蒙版，矩形内有一个矩形是空闲的。为此，您大约可以做到

```
 CAShapeLayer *mask = [[CAShapeLayer alloc] init];
 mask.frame = self.textView.layer.bounds;
 CGRect biggerRect = CGRectMake(mask.frame.origin.x, mask.frame.origin.y, mask.frame.size.width, mask.frame.size.height);
 CGRect smallerRect = CGRectMake(50.0f, 50.0f, 10.0f, 10.0f);

 UIBezierPath *maskPath = [UIBezierPath bezierPath];
[maskPath moveToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];

[maskPath moveToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];

 mask.path = maskPath.CGPath;
[mask setFillRule:kCAFillRuleEvenOdd];
 mask.fillColor = [[UIColor blackColor] CGColor];
 self.textView.layer.mask = mask; 
```

上面的代码也被[Crop a CAShapeLayer 检索外部路径废弃](https://stackoverflow.com/questions/10856353/crop-a-cashapelayer-retrieving-the-external-path)

[Quartz 2D Programming Guide](http://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_paths/dq_paths.html#//apple_ref/doc/uid/TP30001066-CH211-DontLinkElementID_10)中的“Filling a Path”部分很好地解释了填充以这种方式工作的想法

# java - 如何在 Java 中绘制 Mac OS X 的 iCal 中的气泡？

> ID：11013604
> 
> 赞同：0
> 
> 时间：2012-06-13T11:09:35.060
> 
> 标签：java, macos, user-interface

任何人都知道如何在 Java 中绘制类似的东西并为 Linux 和/或 Mac 工作？

我们正在尝试以这种方式为 JDownloader 做一个介绍教程。

![我的意思的截图](../Images/31e60eb215f23947235ca2aee3af1bb0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:47:52.370

它被称为弹出框，是一个 Objective-C 组件。您最好的选择是扩展 JComponent 并通过覆盖来做一个自定义组件`paint(Graphics g)`。我不知道任何带有弹出框的库，但是一些 google-fu 可能会引导您找到一个。

# javascript - :not + :contains 的 jQuery 组合，它有效吗？

> ID：11013609
> 
> 赞同：0
> 
> 时间：2012-06-13T11:09:46.140
> 
> 标签：javascript, jquery, jquery-selectors

[[（从其他问题继续）](https://stackoverflow.com/q/11012455/601179)]

```
<div id="main">
    <div class="a">aaaa</div>
     <div class="b"><p>not me</p></div>
     <div class="b">bbbb</div> <!-- select this-->
     <div class="b">bbbb</div> <!-- select this-->
     <div class="c">cccc</div>
</div> ​ 
```

我正在尝试选择`b`其中没有类的 所有 div `<p>not me</p>`。

我试过这个：

```
$('div.b:not(:has(p:contains(not me)))').css('color', 'red'); 
```

但是由于某些未知的原因它不起作用，有趣的是，如果我删除该`:not()`部分：

```
$('div.b:has(p:contains(not me))').css('color', 'blue'); 
```

它确实选择了不需要的 div，所以问题一定出在`:not`

[**现场演示**](http://jsfiddle.net/XYDk2/)

**我知道还有其他甚至更好的方法，（我什至在那个问题中给出了一些方法）但我很想知道为什么`:not`+`:contains`似乎不在一起。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:14:28.937

您可以使用`.not`而不是`:not`：

```
$('div.b').not(':has(p:contains("not me"))').css('color', 'red'); 
```

[更新的小提琴](http://jsfiddle.net/XYDk2/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:25:23.063

工作示例**:not** + **:contains**

```
$('div.b:not(:contains("not me"))').css('color', 'cyan'); 
```

将更改所有不包含“不是我”的 div.b 的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:17:04.963

我认为这与`:has`

尝试这个：

```
$('div.b:not(:contains(not me))').css('color', 'red'); 
```

# sql - Postgresql 选择行并更新列

> ID：11013613
> 
> 赞同：2
> 
> 时间：2012-06-13T11:09:57.997
> 
> 标签：sql, postgresql, select, sql-update

我有带有 where 子句的 SQL Select 查询。例如

```
select * from table where status = 1 
```

以及如何在选择时同时更新具有选定行的单列？我想标记选定的行，以避免在下一个循环中重新选择。就像是：

```
select * from table where status = 1; update table set proc = 1 where id in (select id from table where status = 1) 
```

但是这个查询不会返回结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:13:45.410

使用返回子句：

```
update table 
    set proc = 1 
where id in (select id from table where status = 1)
returning *; 
```

（顺便说一句：我假设内部选择实际上并不是从同一个表中选择，因为这样该语句就没有真正意义，因为它可以用一个简单的 重写`where stauts = 1`）

# file-io - 使用 Erlang 扫描大二进制文件

> ID：11013618
> 
> 赞同：6
> 
> 时间：2012-06-13T11:10:48.220
> 
> 标签：file-io, erlang, pattern-matching, binaryfiles

我喜欢扫描较大（> 500M）的二进制文件以查找结构/模式。我是这门语言的新手，希望有人能给我开始。实际上，这些文件是一个包含 Segments 的数据库。段以固定大小的标头开始，后跟固定大小的可选部分，然后是可变长度的有效负载/数据部分。对于第一次测试，我只想记录文件中的段数。我已经用谷歌搜索了一些教程，但没有发现任何帮助。我需要一个与我的用例相距不远的提示或教程才能开始。

问候斯特凡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:20:57.693

您需要了解[**位语法**](http://learnyousomeerlang.com/starting-out-for-real#bit-syntax)和**[二进制理解](http://learnyousomeerlang.com/starting-out-for-real#binary-comprehensions)**。更多有用的链接：[http](http://www.erlang.org/documentation/doc-5.6/doc/programming_examples/bit_syntax.html) ://www.erlang.org/documentation/doc-5.6/doc/programming_examples/bit_syntax.html和[http://goto0.cubelogic.org/a/90](http://goto0.cubelogic.org/a/90)。

您还需要学习如何处理文件、读取文件（逐行、逐块、在文件中的给定位置等），以多种方式写入文件。文件处理功能在[这里](http://www.erlang.org/doc/man/file.html)

解释您也可以选择查看erlang包中的大型文件处理库的源代码，例如[Disk Log](http://www.erlang.org/doc/man/disk_log.html)，[Dets](http://www.erlang.org/doc/man/dets.html)和[mnesia](http://www.erlang.org/doc/man/mnesia.html). 这些库对文件进行大量读写，并且它们的源代码是开放的，供您查看。

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:26:58.403

这是一个综合示例问题：我有一个要解析的二进制文件 ( **test.txt )。**我想找到`<<$a, $b, $c>>`文件中的所有二进制模式。

“ **test.txt** ”的内容：

```
I arbitrarily decide to choose the string "abc" as my target string for my test. I want to find all the abc's in my testing file. 
```

一个示例程序（**lab.erl**）：

```
-module(lab).
-compile(export_all).

find(BinPattern, InputFile) ->
    BinPatternLength = length(binary_to_list(BinPattern)),
    {ok, S} = file:open(InputFile, [read, binary, raw]),
    loop(S, BinPattern, 0, BinPatternLength, 0),
    file:close(S),
    io:format("Done!~n", []).

loop(S, BinPattern, StartPos, Length, Acc) ->
    case file:pread(S, StartPos, Length) of
    {ok, Bin} ->
        case Bin of
        BinPattern ->
            io:format("Found one at position: ~p.~n", [StartPos]),
            loop(S, BinPattern, StartPos + 1, Length, Acc + 1);
        _ ->
            loop(S, BinPattern, StartPos + 1, Length, Acc)
        end;
    eof ->
        io:format("I've proudly found ~p matches:)~n", [Acc])
    end. 
```

运行：

```
1> c(lab).
{ok,lab}
2> lab:find(<<"abc">>, "./test.txt").     
Found one at position: 43.
Found one at position: 103.
I've proudly found 2 matches:)
Done!
ok 
```

请注意，上面的代码效率不高（扫描过程一次移动一个字节）并且它是顺序的（没有利用计算机上的所有“核心”）。它只是为了让你开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T14:01:59.667

When your data fits into memory, best thing what you can to do is read data in whole using `file:read_file/1`. If you can't use file in `raw` mode. Then you can parse data using bit_syntax. If you write it in right manner you can achieve parsing speed in tens of MB/s when parsing module is compile using HiPE. Exact techniques of parsing depends on exact segment data format and how robust/accurate result you are looking for. For parallel parsing you can inspire by [Tim Bray's Wide Finder project](http://www.tbray.org/ongoing/When/200x/2007/09/20/Wide-Finder).

# singleton - NancyFX：为什么我的 IUserMapper 单例实例化了两次？

> ID：11013619
> 
> 赞同：1
> 
> 时间：2012-06-13T11:10:52.447
> 
> 标签：singleton, forms-authentication, nancy

我正在尝试实现一个非常简单的 FormsAuthentication 示例。这不是现实生活，但它引发了一个问题。旨在成为应用程序级别单例的 AuthenticationService 似乎被实例化了两次。

这是代码：

```
public class User : IUserIdentity
{
    public string UserName { get; set; }
    public IEnumerable<string> Claims { get; set; }
}

public interface IAuthenticationService
{
    Guid GetIdentifier(string username, string password);
}

public class AuthenticationService : IUserMapper, IAuthenticationService
{
    public readonly Guid Identifier = Guid.NewGuid();
    private readonly string Username = "admin";
    private readonly string Password = "x";

    public Guid GetIdentifier(string username, string password)
    {
        return (username == Username && password == Password) ? Identifier : Guid.Empty;
    }

    public IUserIdentity GetUserFromIdentifier(Guid identifier, NancyContext context)
    {
        return (identifier == Identifier) ? new User { UserName = "admin" } : null;
    }
}

public class MyBootstrapper : DefaultNancyBootstrapper
{
    protected override void ConfigureApplicationContainer(TinyIoCContainer container)
    {
        base.ConfigureApplicationContainer(container);
        container.Register<IAuthenticationService, AuthenticationService>().AsSingleton();
    }
} 
```

我正在使用上面的代码，`LoginModule`如下所示。请注意，我正在`AuthenticationService`通过模块的构造函数注入应用程序级单例实例。

```
public LoginModule(IAuthenticationService authenticationService)
{
    Post["/login"] = _ =>
    {
        var identifier = authenticationService.GetIdentifier(
            (string) Form.Username, 
            (string) Form.Password);

        if (identifier.IsEmpty())
        {
            return Context.GetRedirect("~/login?error=true");
        }
        return this.LoginAndRedirect(identifier);
    };
} 
```

What should happen is that when the user `POSTs` their username and password, these are checked by the `AuthenticationService` via the `GetIdentifier(..)` method. If the credentials match then the single `GUID` identifier is returned. This `GUID` will always be the same because it is created as a `readonly` field and thus set once when the singleton `AuthenticationService` is first instantiated at application startup.

However this is not the case. Instead two distinct instances of the `AuthenticationService` are created, one that is injected into the `LoginModule` constructor and used to call the `GetIdentifier(..)` method and another instance which Nancy uses to call the `IUserIdentity.GetUserFromIdentifier(..)` method.

These two instances have different `GUID` identifiers and so the `GetUserFromIdentifier(..)` method always return null.

I have tested a standard singleton service that does not implement `IUserMapper` and it works as expected, only one instance is created.

So it seems that Nancy is instantiating the `IUserMapper` singleton twice, once for its own internal use during FormsAuthentication, and once to inject into my `LoginModule` constructor!

Can you spot my mistake?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:20:17.327

It's probably because you're using a different interface so you have one singleton for things requesting IUsernameMapper and another for things requesting IAuthenticationService.

You can either:

*   Register both with an instance of your authentication service
*   Split out the username mapper and take a dependency on that in your service (so your Application Service has a dependency on the IUsernameMapper - that will be the same one Nancy is using)
*   Register one of them using a factory that resolves using the other interface (container.Register((c,p) => c.Resolve

My I ask why you're doing any of this though rather than just using the built in forms auth?

# ruby - ruby 打破双重声明

> ID：11013621
> 
> 赞同：2
> 
> 时间：2012-06-13T11:10:54.647
> 
> 标签：ruby, loops, break

如何打破双重声明？

```
a = 1
b = 2
c = 3

if a == 1
    if b == 2
        c = 5
        d = 6
        break
    end
end

puts c
puts d 
```

输出

```
loop.rb:9: Invalid break
loop.rb: compile error (SyntaxError) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T11:33:29.667

你不能从内部中断`if`，你只能从内部循环和块中断。

如果您要问的是如何从两个嵌套循环中中断，您可以`catch`结合使用`throw`— 这些与其他语言中的 try 和 catch 不同。

```
catch(:stop) do
  while some_cond
    while other_cond
      throw :stop
    end
  end
end 
```

当然，您总是可以设置一个标志或类似的东西来告诉外部循环它也应该中断。

# jpa - EclipseLink 持久化和刷新两个关联实体

> ID：11013623
> 
> 赞同：1
> 
> 时间：2012-06-13T11:10:59.180
> 
> 标签：jpa, persistence, refresh, eclipselink

我在我的 Java EE 项目中使用 EclipseLink 和 PostgreSQL 数据库。当我持久/刷新属于 oneToMany/manytoOne 关联的实体时，我很难找到正确行为的正确注释。

例如，我有一个实体“项目”，它首先由用户通过 UI 创建。然后用户可以将“分析”添加到他们创建的项目中。因此，分析是一个项目的一部分，一个项目可以有多个分析。持久操作工作正常（我在我的数据库中看到与项目关联的新分析）但是当我调用“getProject(idProject)”并显示其分析列表时，我看不到刷新的列表。

我该怎么做？

当前的注释是：

在 Projet.java 中

```
 // bi-directional many-to-one association to Analyse
   @OneToMany(mappedBy = "projet", cascade = { CascadeType.ALL })
   private Set<Analyse> analyses; 
```

在分析.java

```
 //bi-directional many-to-one association to Projet
@ManyToOne(cascade={CascadeType.MERGE, CascadeType.REFRESH})
@JoinColumn(name="id_projet", nullable=false)
private Projet projet; 
```

保持新“分析”的代码：

```
public boolean insertAnalyse(Analyse analyse) {
    System.out.println("insertAnalyse");
    boolean success = true;
    fac = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT);
    em = fac.createEntityManager();

    try {
        em.getTransaction().begin();
        em.persist(analyse);
            em.getTransaction().commit();
    }

    catch (Exception ex) {
        em.getTransaction().rollback();
        System.out.println("*** Erreur in MeansDAO. insertAnalyse() : "
                + ex.getMessage());
        success = false;

    } finally {
        em.close();
    }

    return success;
} 
```

通过 projectID 检索当前项目的代码：

```
 public Projet getProject(String p) {
    System.out.println("getProject");
    Projet project = null;

    fac = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT);
    em = fac.createEntityManager();

    try {
        em.getTransaction().begin();
        StringBuilder sql = new StringBuilder();

        Projet proj = em.find(Projet.class, Integer.parseInt(p));

        if (proj != null) {
            project = proj;
        }

    } catch (Exception ex) {
        em.getTransaction().rollback();
        System.out.println("*** Erreur in MeansDAO. getProject() : "
                + ex.getMessage());
    } finally {
        em.close();
    }

    return project;
} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:03:59.777

首先，如果您的代码正确，则不需要刷新。当您持久化分析时，如果它与项目相关，那么您应该以两种方式设置关系。我的猜测是你没有这样做。在 JPA 中，您有责任正确维护您的关系。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side)

您看到关系陈旧状态的原因是（因为您没有维护双方，而且）因为 EclipseLink 默认维护一个共享缓存。你可以禁用这个，

见， [http://wiki.eclipse.org/EclipseLink/FAQ/How_to_disable_the_shared_cache%3F](http://wiki.eclipse.org/EclipseLink/FAQ/How_to_disable_the_shared_cache%3F)

要在 JPA 中刷新对象，您需要对其调用 refresh()，或者使用刷新查询提示执行 Query 或 find() 操作。

有关缓存的更多信息，请参阅 [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching)

# php - 在结果字段上加入两个选择查询

> ID：11013624
> 
> 赞同：0
> 
> 时间：2012-06-13T11:11:12.867
> 
> 标签：php, mysql, select, join, union

我正在尝试在“分钟”字段上加入查询结果 - 这是事件的小时：分钟。我有两个不同的选择查询，我正在尝试 UNION （这可能不对，只是尝试不同的东西，我发现 MySQL 文档很难阅读）。

所以我想要

H:M 然后是 and 的结果`addCount`-`projectsNum`所以对于每一小时/分钟我都有统计数据。

我哪里错了？

```
(
SELECT
    DATE_FORMAT(`when`, '%H:%i') as `min`,
    COUNT(`ipAddress`) AS `addCount`
FROM `metric` m 
WHERE `when` BETWEEN DATE_SUB(NOW(), INTERVAL 3 HOUR) AND NOW()
GROUP BY DAY(`when`), HOUR(`when`), MINUTE(`when`)
)
UNION
(
SELECT
    DATE_FORMAT(v.`created`, '%H:%i') as `min`,
    COUNT(v.`projID`) as `projectsNum`
FROM `projects` v
WHERE v.`created` BETWEEN DATE_SUB(NOW(), INTERVAL 3 HOUR) AND NOW()
GROUP BY DAY(v.`created`), HOUR(v.`created`), MINUTE(v.`created`)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:21:27.777

`UNION`只是将一组结果附加到另一组结果。

您需要将第二个查询用作子查询：

```
SELECT
    DATE_FORMAT(`when`, '%H:%i') as `min`,
    COUNT(`ipAddress`) AS `addCount`,
    projects_subquery.`projectsNum`
FROM `metric` m
JOIN (

    SELECT
        DATE_FORMAT(v.`created`, '%H:%i') as `min`,
        COUNT(v.`projID`) as `projectsNum`
    FROM `projects` v
    WHERE v.`created` BETWEEN DATE_SUB(NOW(), INTERVAL 3 HOUR) AND NOW()
    GROUP BY DAY(v.`created`), HOUR(v.`created`), MINUTE(v.`created`)

) AS projects_subquery ON projects_subquery.`min` = m.`min`
WHERE `when` BETWEEN DATE_SUB(NOW(), INTERVAL 3 HOUR) AND NOW()
GROUP BY DAY(`when`), HOUR(`when`), MINUTE(`when`) 
```

这个查询可能执行得很糟糕。我只是从您的原始查询中强力复制粘贴以使其在语法上正确，但必须有一种优化它的方法。

# r - 我应该如何使用 strsplit 拆分和保留元素？

> ID：11013628
> 
> 赞同：18
> 
> 时间：2012-06-13T11:11:22.737
> 
> 标签：r, strsplit

R 中的 strsplit 函数所做的是匹配并删除给定的正则表达式，以将字符串的其余部分拆分为向量。

```
>strsplit("abc123def", "[0-9]+")
[[1]]
[1] "abc" ""    ""    "def" 
```

但是我应该如何使用正则表达式以相同的方式拆分字符串，同时保留匹配项？我需要类似下面的东西。

```
>FUNCTION("abc123def", "[0-9]+")
[[1]]
[1] "abc" "123" "def" 
```

使用 strapply("abc123def", "[0-9]+|[az]+") 在这里有效，但是如果正则表达式无法捕获除匹配项之外的其余字符串怎么办？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-13T11:51:34.393

从根本上说，在我看来，你想要的不是分裂，而是分裂与其他一切`[0-9]+`之间的过渡。`[0-9]+`在您的字符串中，该转换不是预先存在的。`gsub`要插入它，您可以使用和反向引用进行预处理：

```
test <- "abc123def"
strsplit( gsub("([0-9]+)","~\\1~",test), "~" )

[[1]]
[1] "abc" "123" "def" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-22T07:00:16.763

您可以使用环视断言。

```
> test <- "abc123def"
> strsplit(test, "(?<=\\D)(?=\\d)|(?<=\\d)(?=\\D)", perl=T)
[[1]]
[1] "abc" "123" "def" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T15:03:31.267

您可以使用 gsubfn 包中的 strapply。

```
test <- "abc123def"
strapply(X=test,
         pattern="([^[:digit:]]*)(\\d+)(.+)",
         FUN=c,
         simplify=FALSE)

[[1]]
[1] "abc" "123" "def" 
```

# jquery - 如何在 GMAP3 中使用 KeyDragZoom？

> ID：11013635
> 
> 赞同：1
> 
> 时间：2012-06-13T11:11:42.193
> 
> 标签：jquery, google-maps, google-maps-api-3, keydragzoom

文档显示 - [http://google-maps-utility-library-v3.googlecode.com/svn/tags/keydragzoom/1.0/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/keydragzoom/1.0/docs/examples.html)

```
 function init(){
      var myOptions = { 
        zoom: 13, 
        center: new google.maps.LatLng(49.2903, -123.1294), 
        mapTypeId: google.maps.MapTypeId.ROADMAP 
       };
      var map = new google.maps.Map(document.getElementById("map"), myOptions); 
      map.enableKeyDragZoom({
            boxStyle: {
              border: "thick dashed black",
              backgroundColor: "red",
              opacity: 0.5
            },
            paneStyle: {
              backgroundColor: "gray",
              opacity: 0.2
            }
      });
    } 
```

但是因为我使用的是gmap3，所以我不确定如何实现？这是我初始化地图的代码

```
 $('#dispatcher').gmap3(
      {action: 'init',
        options:{
          center:[53.9783997, -1.5666347],
          zoom:6,
          mapTypeId: google.maps.MapTypeId.MAP,
          mapTypeControl: true,
          mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
          },
          navigationControl: true,
          scrollwheel: true,
          streetViewControl: true
        }
      } 
```

有任何想法吗？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:18:54.317

试试这个：

```
$('#dispatcher').gmap3({action:'get'}).enableKeyDragZoom({
            boxStyle: {
              border: "thick dashed black",
              backgroundColor: "red",
              opacity: 0.5
            },
            paneStyle: {
              backgroundColor: "gray",
              opacity: 0.2
            }
      }); 
```

`.gmap3({action:'get'})`返回`google.maps.Map`对象。因此，您可以对其执行任何操作，该`google.maps.Map`对象可以执行，包括`enableKeyDragZoom`操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:27:00.727

是的，或者您也可以使用“init”中的回调函数，其中包括地图：

```
 callback: function(map){
       map.enableKeyDragZoom({
        boxStyle: {
          border: "thick dashed black",
          backgroundColor: "red",
          opacity: 0.5
        },
        paneStyle: {
          backgroundColor: "gray",
          opacity: 0.2
                }
        });
    } 
```

# php - 如何根据按钮单击移动下一个和上一个

> ID：11013636
> 
> 赞同：0
> 
> 时间：2012-06-13T11:11:43.710
> 
> 标签：php, mysql, button

我正在使用此功能连接并显示数据库中的值

```
function display_content($the_id)
{
$result = mysql_query("SELECT * FROM tbl_ADBTAG WHERE bcv = $the_id");
    while($row = mysql_fetch_array($result))
    {
        echo $row['content'];
    }
//mysql_close($con);
} 
```

我评论了**mysql_close**行，因为我认为如果我关闭数据库连接，我将无法移动下一个和上一个。如果我错了，请纠正我，因为我是 php 和 mysql 的新手。

我实际上正在尝试使用 mysqli，因为在我的另一篇文章中有人说它已被弃用，但是当我使用 mysqli 时我的代码会变得混乱，所以现在我想使用 mysql 完成我的项目并在我有机会查看 mysqli 文档时转移到 mysqli .

现在回到问题，上面的函数是通过表单提交按钮调用的。我实际上有3个按钮。去，上一个，下一个。Go 按钮充当使内容正常的提交按钮。

我现在的目标是能够使用上一个和下一个按钮从数据库的当前行移动上一个和下一个。

知道怎么做吗？

最后，我应该在哪里正确调用 mysql_close() 函数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:21:20.073

使用限制进行分页：

```
mysql> select * from actor limit 0,5;
+----------+------------+--------------+---------------------+
| actor_id | first_name | last_name    | last_update         |
+----------+------------+--------------+---------------------+
|        1 | PENELOPE   | GUINESS      | 2006-02-15 04:34:33 |
|        2 | NICK       | WAHLBERG     | 2006-02-15 04:34:33 |
|        3 | ED         | CHASE        | 2006-02-15 04:34:33 |
|        4 | JENNIFER   | DAVIS        | 2006-02-15 04:34:33 |
|        5 | JOHNNY     | LOLLOBRIGIDA | 2006-02-15 04:34:33 |
+----------+------------+--------------+---------------------+
5 rows in set (0.00 sec)
mysql> select * from actor limit 5,5;
+----------+------------+-----------+---------------------+
| actor_id | first_name | last_name | last_update         |
+----------+------------+-----------+---------------------+
|        6 | BETTE      | NICHOLSON | 2006-02-15 04:34:33 |
|        7 | GRACE      | MOSTEL    | 2006-02-15 04:34:33 |
|        8 | MATTHEW    | JOHANSSON | 2006-02-15 04:34:33 |
|        9 | JOE        | SWANK     | 2006-02-15 04:34:33 |
|       10 | CHRISTIAN  | GABLE     | 2006-02-15 04:34:33 |
+----------+------------+-----------+---------------------+
5 rows in set (0.00 sec)

mysql> select * from actor limit 10,5;
+----------+------------+-----------+---------------------+
| actor_id | first_name | last_name | last_update         |
+----------+------------+-----------+---------------------+
|       11 | ZERO       | CAGE      | 2006-02-15 04:34:33 |
|       12 | KARL       | BERRY     | 2006-02-15 04:34:33 |
|       13 | UMA        | WOOD      | 2006-02-15 04:34:33 |
|       14 | VIVIEN     | BERGEN    | 2006-02-15 04:34:33 |
|       15 | CUBA       | OLIVIER   | 2006-02-15 04:34:33 |
+----------+------------+-----------+---------------------+
5 rows in set (0.00 sec) 
```

其中limit的第一个值是开始，第二个是结果数，在您的代码中，您必须为其提供页码而不是“开始”编号。

示例 2：

```
mysql> select * from bank;
+------+--------+------+
| id   | amount | bank |
+------+--------+------+
|    1 | 100000 |    1 |
|    2 | 256415 |    2 |
|    3 | 142535 |    1 |
|    1 | 214561 |    2 |
|    2 | 123456 |    1 |
|    1 | 987654 |    2 |
+------+--------+------+
6 rows in set (0.00 sec)

mysql> select * from bank limit 0,2;
+------+--------+------+
| id   | amount | bank |
+------+--------+------+
|    1 | 100000 |    1 |
|    2 | 256415 |    2 |
+------+--------+------+
2 rows in set (0.00 sec)

mysql> select * from bank limit 2,2;
+------+--------+------+
| id   | amount | bank |
+------+--------+------+
|    3 | 142535 |    1 |
|    1 | 214561 |    2 |
+------+--------+------+
2 rows in set (0.00 sec)

mysql> select * from bank limit 4,2;
+------+--------+------+
| id   | amount | bank |
+------+--------+------+
|    2 | 123456 |    1 |
|    1 | 987654 |    2 |
+------+--------+------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:29:57.133

因为您想要对数据库表中的内容（记录）进行分页。
那么最好的办法就是像这样使用 SQL 的 start 和 limit 结构。

```
SELECT * FROM tablename WHERE .... LIMIT start_index, number_of_items
WHERE the values are described as below:
    start_index: The value from which to pull the records. The first record is 0
    number_of_items: The maximum number of records to SELECT. e.g. 10 (Note: Phpmyadmin uses 30) 
```

知道了这一点，您将不得不跟踪当前使用的起始索引，以便知道如何拉取`NEXT`或`PREVIOUS`页面

```
Example:
Lets assume that we want our start index variable name to be xs, we could code like so:
$start = (isset($_GET["xs"]) and intval($_GET["xs"]) >= 0)? intval($_GET["xs"]):0;
//the first time on the page -- set the default start index
$_SESSION["start_index"] = $start;
//save it anyhow you want to keep track of the current start index
$sql = "SELECT ..... LIMIT $start,25";
..... //stuff to pull your content 
```

请注意，您最好使用`<a></a>`标签而不是`buttons`和`NEXT`链接`PREVIOUS`。
我还有一个小脚本可以[在 github 上](https://github.com/emmanix2002/PHP-Utility-Scripts/blob/master/utilities/function.pagination.php)
处理这个分页的东西 查看[文档 wiki](https://github.com/emmanix2002/PHP-Utility-Scripts/wiki/Utilities-Pagination)
希望这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:16:41.463

如果您想要一个固定列表向后/向前移动，您可以将`$result`变量移动到会话并使用它来移动。

但是，如果您在单击时想要实时数据，这将不起作用/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T11:17:09.293

你不需要调用 mysql_close() 因为 php 现在就这样做了。您可以在这种情况下执行此操作，因为每次调用脚本时都会创建 mysql-connection。

在您的情况下，您需要读取数据库中上一个和下一个条目的 ID，并将下一个和上一个按钮的路径设置为此 ID。

# copy - jackrabbit - 如何跟踪复制的节点

> ID：11013640
> 
> 赞同：1
> 
> 时间：2012-06-13T11:11:52.620
> 
> 标签：copy, jackrabbit

复制子树时（使用 Workspace.copy() ）我想保留复制的节点 ID 及其对应的新 ID 的映射。

我遇到了 ItemStateListener 但看不到如何获取我想要的信息。

安迪的想法？

干杯。

# php - 字符大小写问题

> ID：11013643
> 
> 赞同：0
> 
> 时间：2012-06-13T11:12:00.837
> 
> 标签：php, mysql, character

所以我的网站上有我的登录表单。

例如，我的用户名是 JuvarAbrera（保存在 mysql 中）。

当我尝试使用此用户名登录时---> juvarabrera

它仍然在我的网站上登录。现在，我希望它不要登录，因为 J 和 A 是大写的。

那么，我该怎么做呢？我想我解释得很好。

谢谢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:14:07.640

将列排序规则更改为`utf8_bin`（即使用时`utf8_general_ci`）

注意`*_general_*`排序规则，因为比较基于语言规则。所以看看

`utf8_general_ci`以下是正确的：， 以下`'a'='A'`是正确的： 这些都不是真的，我认为这就是你想要的`'ä'='A'``utf8_general_cs``'Ä'='A'``utf8_bin`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T11:16:59.527

您可以整理查询中的值：

```
SELECT `id` FROM `users` WHERE `username` = 'php_value' COLLATE utf8_general_cs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:21:40.117

以下 SQL 查询将允许使用大写名称：

```
SELECT * 
FROM   login 
WHERE  uname         = '$username' AND 
       BINARY(uname) = BINARY('$username') 
```

# mysql - 替换存储在数据库中的标签，在它们之间保留字符串

> ID：11013645
> 
> 赞同：2
> 
> 时间：2012-06-13T11:12:02.787
> 
> 标签：mysql

例如，如果我有

```
<b>some king of #1 Text</b> 
```

存储在mysql表中，有没有办法将其更改为

```
<h2>some king of #1 Text</h2> 
```

无需转到每一行并手动更改它。？

在某些情况下 [如果可能] 我需要更换

```
<p><b>some king of #1 Text</b></p><p>other text</p> 
```

和

```
<h2>some king of #1 Text</h2><p>other text</p> 
```

. 我在想也许是 sql 表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:15:50.417

*如果*您的标签只是看起来像并且没有其他属性，请使用该[`REPLACE()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)功能，因为这实际上只是一个简单的字符串替换操作。*`<b>``</b>`*

 *```
UPDATE yourtable SET thecolumn = REPLACE(thecolumn, '<b>', '<h2>');
UPDATE yourtable SET thecolumn = REPLACE(thecolumn, '</b>', '</h2>'); 
```

如果您的标签包含像您这样的其他属性`<b class='something'>`，最好在输出时使用 HTML 解析器对其进行修改。

### 编辑问题后更新：

如果您有没有额外空格的*确切模式* `<p><b>...</b></p>`，您仍然可以使用`REPLACE()`，但您需要在上面列出的两个*之前*运行这对。

```
UPDATE yourtable SET thecolumn = REPLACE(thecolumn, '<p><b>', '<h2>');
UPDATE yourtable SET thecolumn = REPLACE(thecolumn, '</b></p>', '</h2>'); 
```

如前所述，使用适当的 HTML 解析器修改应用程序代码中的 HTML 可以最好地处理超出此复杂性的任何内容。*

# javascript - 如何设置滚动条在多行文本框中移动到最后一行？

> ID：11013646
> 
> 赞同：2
> 
> 时间：2012-06-13T11:12:12.807
> 
> 标签：javascript, jquery, asp.net

我正在使用 asp.net。如何设置滚动条在客户端多行文本框中移动到最后一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:34:06.970

设置`ClientIDMode="Static"`以便您可以使用其 ID 从 jQuery 引用 textarea：

```
<asp:TextBox ID="myTextBox" runat="server" ClientIDMode="Static" TextMode="MultiLine"></asp:TextBox> 
```

并在 jQuery 脚本标签之后添加此脚本：

```
$(document).ready(function () {
    $('#myTextBox').scrollTop($('#myTextBox')[0].scrollHeight - $('#myTextBox').height());
}); 
```

我对兼容性很好奇，所以我在 Chrome、Firefox、Opera 和 IE9 中对其进行了测试，它可以正常工作。:)

这是解决方案的 jsFiddle 示例：http: [//jsfiddle.net/g9KBB/](http://jsfiddle.net/g9KBB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:18:58.527

使用 jquery 的可能解决方案（在 chrome 19 中为我工作）：

```
$('#wmd-input').scrollTop($('#wmd-input').height()) 
```

`wmd-input`textarea的id在哪里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:25:19.743

```
function f(ta_id) {
        var d = document, ta, rng;
        if (d.all) {
            ta = d.all[ta_id];
            if (ta && ta.createTextRange) {
                rng = ta.createTextRange();
                rng.collapse(false);
                rng.select();
            }
        }
    }
    function SetTextBox(ID) {
        var TextBoxes = document.getElementById(ID.id);
        if (TextBoxes != null) {
            for (var i = 0; i < TextBoxes.length; i++) {
                f(TextBoxes[i].id);
            }
        }
    } 
```

# javascript - uglified 代码不会写入文件

> ID：11013648
> 
> 赞同：0
> 
> 时间：2012-06-13T11:12:17.487
> 
> 标签：javascript, node.js, uglifyjs

我想遍历目录并获取 .js 文件并使用 uglifyjs 和 node.js 进行丑化，但我的代码存在一些问题。下面是我的代码：

```
var mkdirp = require( 'mkdirp' ),
    walk = require( 'walk' ),
    fs = require( 'fs' ),
    jsp = require( 'uglify-js' ).parser,
    pro = require( 'uglify-js' ).uglify,
    files   = [],
    htmlfilestouglify = [];
// Walker options
var walker  = walk.walk( 'shreedhar/www' , { followLinks: false } );

walker.on('file', function( root, stat, next ) {
    // Add this file to the list of files
    files.push(root + '/' + stat.name);
    next();
});

walker.on( 'end', function() {
    for( var i=0; i<files.length; i++){
        // console.log(files[i]);
        var ext = files[i].split( '.' ).pop();
        if( ext == 'js' ){ 
            console.log( files[i] );
            var orig_code = fs.readFileSync( files[i] ).toString(); //read the content of the file

            // create directory
            var fnarr = files[i].split('/'),
                fname = fnarr.pop( files[i].length-1 ),

                dirlen = fnarr.length,
                dirname = fnarr.slice( 0, dirlen ).join('/');

            mkdirp('build/'+dirname );

            // create file
            fs.open('build/'+dirname+'/'+fname, 'w');

            // uglify the content of the file
            var ast = jsp.parse(orig_code); // parse code and get the initial AST
            ast = pro.ast_mangle(ast); // get a new AST with mangled names
            ast = pro.ast_squeeze(ast); // get an AST with compression optimizations
            var final_code = pro.gen_code(ast); 

            // write uglified code into file

            fs.writeFileSync('build/'+dirname+'/'+fname, final_code); 

        }
        else if( ext == 'html'){
            htmlfilestouglify.push(files[i]);
        }
    }
}); 
```

问题是：如果我评论 writeFileSync 并运行上面的代码，它将创建目录，并在取消评论 writeFileSync 并运行后再次将缩小的代码写入文件，我无法找出我的代码的问题.. 可以任何人请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:17:56.687

因为`mkdirp`是异步的。调用同步版本，它应该可以工作：

```
mkdirp.sync('build/' + dirname); 
```

# java - 如何编辑音频缓冲区

> ID：11013652
> 
> 赞同：0
> 
> 时间：2012-06-13T11:12:27.980
> 
> 标签：java, android, audio, audio-recording, audioeffect

我创建了一个音频缓冲区并想在播放此声音之前对其进行编辑。我的问题是当数字大于 1 时我会听到很大的噪音。这意味着当我不编辑缓冲区（数据）时，我只能播放没有噪音的缓冲区。背景信息：数据是一个录音缓冲区，包含以下信息：

```
private static final String TAG = "Aufnahme";
private AudioRecord recorder = null;
private boolean isRecording = false;
private int SAMPLERATE = 44100;
private int CHANNELS = AudioFormat.CHANNEL_CONFIGURATION_MONO;
private int AUDIO_FORMAT = AudioFormat.ENCODING_PCM_16BIT;
private int bufferSize = AudioRecord.getMinBufferSize(SAMPLERATE, CHANNELS,
        AUDIO_FORMAT);
private Thread recordingThread = null; 
```

我的效果类：

```
public class verzerrer {    
    public void distortion(short[] data) {      
        output out = new output();
        long[] y = new long[data.length];
        int number =1000;

        for(int i=1;i<data.length;i++){
            y[i]=(data[i]/number)*number;       
        }   

        for(int i=0;i<data.length;i++){
            data[i]=(short) y[i];
        }
        out.send(data);
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:59:57.870

你说“我的问题是当数字大于 1 时我会发出很大的噪音。” 但在我看来，“大噪音”正是你想要创造的：你的效果被称为“失真”，当数字 > 1 时，你正在执行整数除法，这将产生非常大的 IM 失真。

您创建的效果在我看来类似于“有点粉碎”效果：丢弃最不重要的数据。如果您希望创建更传统的失真（如吉他放大器失真），则需要执行“削波”，而不是“位压碎”。像这样：

```
for(int i=1;i<data.length;i++){
    if( data[i] > number )
        y[i]=number;
    else if( data[i] < - number )
        y[i]=-number;       
} 
```

这将产生谐波失真。数字越小，得到的失真就越大。这里，“数字”被称为“阈值”。你可能想使用类似的东西

```
number=(Short) ( Short.MAX_VALUE * ( 1-t ) ) ; 
```

来定义它。这里，t 是一个浮点值。如果 t 接近 1，你会得到更多的失真，而接近 0，你会得到更少的失真。

# cassandra - 压实参数的Cassandra配置

> ID：11013655
> 
> 赞同：4
> 
> 时间：2012-06-13T11:12:53.953
> 
> 标签：cassandra

我正在阅读 cassandra yml 来调整一些参数以优化性能。

```
# Throttles compaction to the given total throughput across the entire
# system. The faster you insert data, the faster you need to compact in
# order to keep the sstable count down, but in general, setting this to
# 16 to 32 times the rate you are inserting data is more than sufficient.
# Setting this to 0 disables throttling. Note that this account for all types
# of compaction, including validation compaction.
compaction_throughput_mb_per_sec: 16 
```

在这里，cassandra 建议将“compaction_throughput_mb_per_sec”保持为数据插入速率的 16 到 32 倍。我们正在使用批量加载器插入数据，它以非常高的速率插入数据。我应该更改此设置吗？或者它应该保持原样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-04T23:45:14.133

那么你知道你的批量加载器每秒会推送多少数据吗？这是持续负载还是突发性负载？如果您确实知道这一点，那么您基本上只需遵循该参数的配置文件注释中的指南即可。

我怀疑您没有该信息，在这种情况下，问题是您的系统是否行为不端（您目前是否看到问题？）。抱歉，我不知道其他预测的好方法，这是一个调整练习。您希望找到一个值，以保证 Cassandra 在压缩方面不会落后，但同时您不希望压缩杀死您的磁盘 i/o。弄清楚这一点（我知道）的唯一方法是尝试观察。

# sql - PERSISTED 列可以引用现有的持久字段吗？

> ID：11013657
> 
> 赞同：2
> 
> 时间：2012-06-13T11:13:00.590
> 
> 标签：sql, sql-server, sql-server-2008, persisted-column

持久列是否可以引用另一个持久列，是否有任何规则，例如它们是按顺序计算持久字段还是至少计算其他列引用的字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:19:01.670

不，计算列不能引用其他计算列。只需重复您要引用的表达式。

这里没有从左到右的评估顺序。例如

```
 CREATE TABLE T
  (
  B AS A*2 PERSISTED,
  A INT
  ) 
```

即使出现在它之后的计算列`B`引用也能正常工作。`A`

# xsd - wsdl 未提供 xsd 架构

> ID：11013658
> 
> 赞同：7
> 
> 时间：2012-06-13T11:13:04.370
> 
> 标签：xsd, wsdl, jax-ws

我正在使用 JAX-WS 开发 WebService（我在 jaxws-maven-plugin 上使用 wsimport 目标）。我编写了一个导入 XSD 模式的 WSDL。

```
WEB-INF/wsdl/service.wsdl
WEB-INF/wsdl/service.xsd 
```

我还生成了 Web 服务类并创建了端点等。到目前为止一切都很好。当我在 Tomcat 7 上运行我的服务时，一切正常。我可以通过以下方式在浏览器中访问 wsdl：

```
http://localhost:8080/webService/servlet-url?wsdl 
```

但我无法访问 xsd 架构。问题出在这个wsdl中：

```
<xsd:schema>
<xsd:import namespace="http://ws.service/domain/1.0" schemaLocation="service.xsd"/>
</xsd:schema> 
```

当然，在生成类 wsdl 和 xsd 的过程中，它们位于本地路径上，但我希望它们在 Web 服务运行时可以远程访问。我知道 schemaLocation 应该是这样的“http://localhost:8080/webService/servlet-url?xsd=1”。

在浏览器导入的 wsdl 中应该如下所示：

```
<xsd:schema>
    <xsd:import namespace="http://ws.service/domain/1.0" schemaLocation="http://localhost:8080/webService/servlet-url?wsdl&resource=service.xsd"/>
    </xsd:schema> 
```

localhost:8080/webService/servlet?wsdl 给了我：

```
wsdl:definitions targetNamespace="http://ws.serv.com/Service/1.0" name="emuiaService">         
<wsdl:types>
    <xsd:schema>
        <xsd:import namespace="http://ws.serv.com/Service/domain/1.0" schemaLocation="schema.xsd"/>
    </xsd:schema>
</wsdl:types>
<wsdl:message name="halloMsg">
    <wsdl:part name="parameters" element="dom:halloRequest"/>
</wsdl:message>
<wsdl:message name="halloResponseMsg">
    <wsdl:part name="return" element="dom:halloResponse"/>
</wsdl:message> 
```

等等...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-02T14:05:28.417

我几乎不敢相信这是一个如此难以解决的问题！

我一直在疯狂搜索以找到解决此问题的方法！然后我一直在努力寻找自己的解决方案。通过调试器单步执行 java-6-openjdk 的默认 javax.xml.ws.spi.Provider 实现（JRE 中创建用于发布 Web 服务的 javax.xml.ws.Endpoint 对象的“工厂”），我终于学到了一些东西，这帮助我制定了一个至少在 Java SE 中有效的解决方案，至少在我当前的 JRE 中是这样的，即：

```
java version "1.6.0_33"
OpenJDK Runtime Environment (IcedTea6 1.13.5) (6b33-1.13.5-1ubuntu0.12.04)
OpenJDK Server VM (build 23.25-b01, mixed mode) 
```

我还不知道这个解决方案是否可以在 Java EE 中使用。

这是我解决它的方法：

```
package myservice;

import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.util.Arrays;
import javax.xml.transform.Source;
import javax.xml.transform.stream.StreamSource;
import javax.xml.ws.Endpoint;

public class App 
{
    private static final String MY_SERVICE_XSD = "/wsdl/MyService.xsd";

    public static void main( String[] args )
    {
        Endpoint ep = Endpoint.create(new MyEndpointImpl());

        ep.setMetadata(Arrays.asList(sourceFromResource(MY_SERVICE_XSD)));

        ep.publish("http://localhost:8080/svc/hello");
    }

    private static Source sourceFromResource(String name) {
        URL resource = App.class.getResource(name);
        String systemId = resource.toExternalForm();
        InputStream inputStream;
        try {
            inputStream = resource.openStream();
        } catch (IOException e) {
            throw new RuntimeException("Failed to create InputStream from resource \""+ name +"\"", e);
        }
        return new StreamSource(inputStream, systemId);
    }
} 
```

关键是我首先使用方法 Endpoint#create（不是 Endpoint#publish）来获取*未发布*的Endpoint。然后我将 XSD 文件作为“元数据”添加到（仍未发布的）端点（代码“ep.setMetaData(...)”）。*然后*我发布端点（代码“ep.publish(...)”）。

现在，当我访问时，`http://localhost:8080/svc/hello?wsdl`我得到：

```
 <definitions targetNamespace="http://somewhere.net/my/namespace" name="MyService">
        <types>
            <xsd:schema>
                <xsd:import namespace="http://somewhere.net/my/namespace"
                            schemaLocation="http://localhost:8080/svc/hello?xsd=1"/>
            </xsd:schema>
        </types>
                  ...
    </definitions> 
```

我的 XSD 文件可从`http://localhost:8080/svc/hello?xsd=1`!

请注意，我在磁盘上的 MyService.wsdl 文件仍然包含：

```
 <xsd:schema>
                <xsd:import namespace="http://somewhere.net/my/namespace"
                            schemaLocation="MyService.xsd"></xsd:import>
            </xsd:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:42:03.563

好的，我们开始吧。

进入 WSDL 文件来修改这样的东西

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<wsdl:definitions
      targetNamespace="http://service.wsr.company.com/" 
      name="webServiceExample" 
      xmlns="http://schemas.xmlsoap.org/wsdl/" 
      xmlns:tns="http://servicio.wsr.baz.com/" 
      xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
      xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
      xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"> 
```

在这个小片段上重要的是 xmlns 标签。这些用于部署模式 XSD。下一个

```
<wsdl:types>
    <xs:schema 
        xmlns:tns="http://service.wsr.company.com/" 
        xmlns:xs="http://www.w3.org/2001/XMLSchema" 
        targetNamespace="http://service.wsr.company.com/" version="1.0">

        ...

    </xs:schema>
</wsdl:types> 
```

在下面的标签中，您将获得`service.xsd`文件中的内容或在`http://localhost:8080/webService/servlet-url?xsd=1`我们继续中显示

```
 <wsdl:message name="your_method_name">
         <wsdl:part name="parameters" element="tns:your_method_name"/>
    </wsdl:message>
    <wsdl:message name="your_method_nameResponse">
         <wsdl:part name="parameters" element="tns:your_method_nameResponse"/>
    </wsdl:message> 
```

以上标签显示您的方法名称。下一个

```
 <wsdl:portType name="webServiceExample">
          <wsdl:operation name="your_method_name">
            <wsdl:input message="tns:your_method_name"/>
              <wsdl:output message="tns:your_method_nameResponse"/>
          </wsdl:operation>
    </wsdl:portType> 
```

上面的 tar 用于放置您的操作。继续

```
 <wsdl:binding name="webServiceExamplePortBinding" type="tns:webServiceExample">
      <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <wsdl:operation name="your_method_name">
          <soap:operation soapAction=""/>
            <wsdl:input>
              <soap:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
              <soap:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding> 
```

下一个 ：）

```
 <wsdl:service name="webServiceExample">
     <wsdl:port name="webServiceExamplePort" binding="tns:webServiceExamplePortBinding">
       <soap:address location="REPLACE_WITH_ACTUAL_URL"/>
</wsdl:port> 
```

终于完成了:)

**请注意，您必须逐个更改当前标签** `<wsdl:...></wsdl:...>`

你保存它，公众和你有乐趣**XSD 模式呈现在 WSDL 中**。

我希望能帮助你。再见。

# php - 使用 cron 作业检查网络服务器状态的 PHP 脚本

> ID：11013659
> 
> 赞同：4
> 
> 时间：2012-06-13T11:13:05.703
> 
> 标签：php, http-headers, httpresponse, cron-task

我正在寻找可以在我的网络主机上作为 cron 作业运行的 PHP 脚本。它需要遍历网站列表并检查以确保每个网站都返回 Http 响应 200 OK。如果网站未返回该响应或不可用，则需要向网站管理员发送电子邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:56:46.683

我已经改进了这个脚本来检查你的网站/网络服务器是否仍在运行。我稍微改进了错误处理并添加了一封安慰电子邮件，让您知道脚本正在成功运行。

安慰电子邮件依赖另一个名为 healthcheck.txt 的文件来存储一些值，直到下次运行脚本。如果它没有自动创建，只需创建一个 0 字节的文本文件，上传并设置正确的文件权限（读/写）。

```
<?php
// set email server parameters
ini_set('sendmail_from', 'server.status@host.example.com' );
ini_set('SMTP', '127.0.0.1' );
ini_set('smtp_port', '25' );

ini_set('allow_url_fopen', true); //enable fopen

// define list of webservers to check
$webservers = array('www.example.com', 'www.example2.com');

function sendemail($subject,$message) // email function using standard php mail
{
$wrapmessage = wordwrap($message,70,"\n",true); // mail function can't support a message more than 70 characters per line
$to = 'you@example.com'; // who to send the emails to
// Headers ensure a properly formatted email
$headers = 'From: server.status@host.example.com' . "\r\n" .
    'Reply-To: server.status@host.example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

return mail($to, $subject, $wrapmessage, $headers); //send the email
}

function getresponse($url) //queries a url and provides the header returned and header response
{
$ch = curl_init(); // create cURL handle (ch)
if (!$ch) { // send an email if curl can't initialise
    $subject = "Web Server Checking Script Error";
    $message = "The web server checking script issued an error when it tried to process ".$url.". Curl did not initialise correctly and issued the error - ".curl_error($ch)." The script has died and not completed any more tasks.";
    sendemail($subject,$message);
    die();
}
// set some cURL options
$ret = curl_setopt($ch, CURLOPT_URL, "http://".$url."/");
$ret = curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);   
$ret = curl_setopt($ch, CURLOPT_HEADER, true);
$ret = curl_setopt($ch, CURLOPT_NOBODY, true);
$ret = curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$ret = curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
$ret = curl_setopt($ch, CURLOPT_TIMEOUT, 30);

// execute
$ret = curl_exec($ch);

if (empty($ret)) {
    // some kind of an error happened
    $subject = "Web Server Checking Script Error";
    $message = "The web server checking script issued an error when it tried to process ".$url.". Curl was trying to execute and issued the error - ".curl_error($ch)." Further URLs will be tried.";
    sendemail($subject,$message);
    curl_close($ch); // close cURL handler
    } else {
        $info = curl_getinfo($ch); //get header info - output is an array
        curl_close($ch); // close cURL handler

        if (empty($info['http_code'])) {
                $subject = "Web Server Checking Script Error";
                $message = "The web server checking script issued an error when it tried to process ".$url."\r\nNo HTTP code was returned";
                sendemail($subject,$message);
        } else {
            // load the HTTP code descriptions
            $http_codes = parse_ini_file("/server/path/to/http-response-codes.ini");

            // results - code number and description
            $result = $info['http_code'] . " " . $http_codes[$info['http_code']];
        return $result; // $result contained a code, so return it
        }
    return None; //$info was empty so return nothing
    }
return None; // $ret was empty so return nothing
}

// this bit of code initiates the checking of the web server
foreach ($webservers as $webserver) { //loop through the array of webservers
    $status = getresponse($webserver); //get the status of the webserver
        if (empty($status)) {
        // nothing happens here because if $status is empty, the function returned nothing and an email was already sent.
        } else {
            if (strstr($status, "200")) { //search for the error code that means everything is ok
            // If found, don't do anything, just process the next one
            } else {
                $timestamp = date("m/d/Y H:i:s a", time()); //get the current date and time
                $error = $webserver." - ".$status." status error detected"; //set error message with server and response code
                $message = "At - ".$timestamp." - a http response error was detected on ".$webserver.".\r\nInstead of a 200 OK response, the server returned ".$status."\r\nThis requires immediate attention!"; //At what time was an error detected on which server and what was the error message
                sendemail($error,$message); //trigger the sendemail function
            }
        }
}

// Health Check. Comfort email twice a day to show script is actually running.
$healthfile = "/server/path/to/healthcheck.txt"; // path with the name of the file to store array data
$hfsize = filesize($healthfile); // filesize of healthcheck file
$notify = "16:00"; // specify the earliest time in the day to send the email - cron job settings dictate how close you'll get to this
$datenow = date("d-m-Y"); //what is current date as of now

if (file_exists($healthfile) && $hfsize !== 0) { //read contents of array from file if it exists and has data, otherwise create array with some defaults
    $valuestor = unserialize(file_get_contents($healthfile));
    } else { // file doesn't exist so we'll create an array with some defaults
    $valuestor = array("email_sent"=>0, "sent_date"=>$datenow, "iterations"=>0);
}
$i = $valuestor['iterations']; //get the iterations number from the valuestor array
$curdate = strtotime($datenow); //convert current date to seconds for comparison
$stordate = strtotime($valuestor['sent_date']); //convert stored date to seconds
if ($valuestor['email_sent'] == 1) { // has the email already been sent today
    if ($curdate == $stordate) { // if it has, is the current date equal to the stored date
        $i++; // yes it is, just increment the iterations
    } else { // it's a new day, reset the array
        $timestamp = date("m/d/Y H:i:s a", time()); //get the current date and time
        $subject = "Web Server Checking Script Health Status"; //set email subject line
        $message = "Message created: ".$timestamp."\r\nThe Web Server Checking script ran successfully for ".$i." time(s) on the ".$valuestor['sent_date']; //email message
        sendemail($subject,$message); //trigger the sendemail function
        $valuestor['email_sent'] = 0; // set email sent to false
        $valuestor['sent_date'] = $datenow; // set email send date to today
        $i = 1; // this is the first time the script has run today, so reset i to 1\. It gets written to the array later.
        // echo $message;
    }
} else { // email has not been sent today
    $checktime = strtotime($notify); //convert $notify time (for current date) into seconds since the epoch
    if (time() >= $checktime) { // are we at or have we gone past checktime
        $i++; // increase the number of script iterations by 1
        $timestamp = date("m/d/Y H:i:s a", time()); //get the current date and time
        $subject = "Web Server Checking Script Health Status"; //set email subject line
        $message = "Message created: ".$timestamp."\r\nThe Web Server Checking script has successfully run and completed ".$i." time(s) today."; //email message
        sendemail($subject,$message); //trigger the sendemail function
        $valuestor['email_sent'] = 1; // set array to show that email has gone
        // echo $message;
    } else { // we haven't reached the check time yet
    $i++; // just increment the iterations
    }
}
$valuestor['iterations'] = $i; // update the array with the iterations number

// save the array to the file again
$fp = fopen($healthfile, 'w+'); // open or create the file, clear its contents and write to it
if (!$fp) { // handle the error with an email if the file won't open
$subject = "Web Server Checking Script Error";
$message = "The web server checking script issued an error when trying to open or create the file ".$healthfile." The script was ended without any new information being stored.";
sendemail($subject,$message);
} else {
fwrite($fp, serialize($valuestor)); // write to the file and serialise the array valuestor
fclose($fp); // close the file connection
} 
die(); // make sure that script dies and cron job terminates
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T07:06:07.260

我发现我花了一段时间来研究这个问题的好答案。因此，为了社区的利益，这是我在对 Stackoverflow 和其他论坛进行研究后得出的结论。

你需要两个文件才能工作。您通过 cron 执行的 PHP 脚本和一个包含 http 响应代码含义的详细描述的 ini 文件。

我希望这对其他人有用。

服务器检查.php

```
<?php
// set email server parameters
ini_set('sendmail_from', 'server.status@host.example.com' );
ini_set('SMTP', '127.0.0.1' );
ini_set('smtp_port', '25' );

// define list of webservers to check
$webservers = array('www.example.com', 'www.example2.com');

function sendemail($subject,$message) // email function using standard php mail
{
$wrapmessage = wordwrap($message,70,"\n",true); // mail function can't support a message more than 70 characters per line
$to = 'you@example.com'; // who to send the emails to
// Headers ensure a properly formatted email
$headers = 'From: server.status@host.example.com' . "\r\n" .
    'Reply-To: server.status@host.example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

return mail($to, $subject, $wrapmessage, $headers); //send the email
}

function getresponse($url) //queries a url and provides the header returned and header response
{
$ch = curl_init(); // create cURL handle (ch)
if (!$ch) {
    $subject = "Web Server Checking Script Error";
    $message = "The web server checking script issued an error when it tried to process ".$url."\r\nCouldn't initialize a cURL handle";
    sendemail($subject,$message);
    die();
}
// set some cURL options
$ret = curl_setopt($ch, CURLOPT_URL, "http://".$url."/");
$ret = curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);   
$ret = curl_setopt($ch, CURLOPT_HEADER, true);
$ret = curl_setopt($ch, CURLOPT_NOBODY, true);
$ret = curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$ret = curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
$ret = curl_setopt($ch, CURLOPT_TIMEOUT, 30);

// execute
$ret = curl_exec($ch);

if (empty($ret)) {
    // some kind of an error happened
    $subject = "Web Server Checking Script Error";
    $message = "The web server checking script issued an error when it tried to process ".$url."\r\ncurl_error ".$ch;
    sendemail($subject,$message);
    curl_close($ch); // close cURL handler
    die();
    } else {
        $info = curl_getinfo($ch);
        curl_close($ch); // close cURL handler

        if (empty($info['http_code'])) {
                $subject = "Web Server Checking Script Error";
                $message = "The web server checking script issued an error when it tried to process ".$url."\r\nNo HTTP code was returned";
                sendemail($subject,$message);
                die(); 
        } else {
            // load the HTTP codes
            $http_codes = parse_ini_file("/server/path/to/http-response-codes.ini");

            // results
            $result = $info['http_code'] . " " . $http_codes[$info['http_code']];
        }

    }
return $result;
}

foreach ($webservers as $webserver) { //loop through the array of webservers
    $status = getresponse($webserver); //get the status of the webserver
        if (strstr($status, "200")) { //search for the error code that means everythings ok
        return None; // Don't do anything, just process the next one
        } else {
        $timestamp = date("m/d/Y H:i:s a", time()); //get the current date and time
        $error = $webserver." - ".$status." status error detected"; //set error message with server and response code
        $message = "At - ".$timestamp." - a http response error was detected on ".$webserver.".\r\nInstead of a 200 OK response, the server returned ".$status."\r\nThis requires immediate attention!"; //At what time was an error detected on which server and what was the error message
        sendemail($error,$message); //trigger the sendemail function
        }
}
?> 
```

http-response-codes.ini

```
[Informational 1xx]
100="Continue"
101="Switching Protocols"

[Successful 2xx]
200="OK"
201="Created"
202="Accepted"
203="Non-Authoritative Information"
204="No Content"
205="Reset Content"
206="Partial Content"

[Redirection 3xx]
300="Multiple Choices"
301="Moved Permanently"
302="Found"
303="See Other"
304="Not Modified"
305="Use Proxy"
306="(Unused)"
307="Temporary Redirect"

[Client Error 4xx]
400="Bad Request"
401="Unauthorized"
402="Payment Required"
403="Forbidden"
404="Not Found"
405="Method Not Allowed"
406="Not Acceptable"
407="Proxy Authentication Required"
408="Request Timeout"
409="Conflict"
410="Gone"
411="Length Required"
412="Precondition Failed"
413="Request Entity Too Large"
414="Request-URI Too Long"
415="Unsupported Media Type"
416="Requested Range Not Satisfiable"
417="Expectation Failed"

[Server Error 5xx]
500="Internal Server Error"
501="Not Implemented"
502="Bad Gateway"
503="Service Unavailable"
504="Gateway Timeout"
505="HTTP Version Not Supported" 
```

# php - 谷歌图表是否有任何 php/sql 包装器

> ID：11013660
> 
> 赞同：0
> 
> 时间：2012-06-13T11:13:06.253
> 
> 标签：php, mysql, google-visualization

我想在我的网站上添加一些使用 Google 图表的报告。报告生成将使用 MySql 和 PHP。是否已经有任何图书馆可以帮助做到这一点，还是我必须重新发明轮子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:18:39.073

[这](http://code.google.com/p/gchartphp/)可能是您正在寻找的。

# php - 空关联数组 SOAP 类型转换

> ID：11013665
> 
> 赞同：0
> 
> 时间：2012-06-13T11:13:47.143
> 
> 标签：php, ruby-on-rails, ruby, soap, casting

我有一个客户端服务器场景，其中由 PHP 中的 SoapClient 类进行类型转换，无法判断空数组是关联数组还是数字数组，因此默认为数字。

所有公开的函数都使用基本类型，没有类。

关联数组，例如`array("something"=>123)`被转换为地图数据类型。但是，当同一个数组为空时，例如`array()`，它会在 Ruby 端转换为数组。类型转换为对象`(object)array()`将导致 Ruby 端的结构数据类型。

论点稍微复杂一点，不像上面那么简单：

```
array(
    "options"=>array(
        "plans"=>array(
            0=>array(
                "name"=>"abc",
                "product_options"=>array(
                    "optional_key_determines_associative_array_data_type"=>0,
                ),
            ),
        ),
    ),
); 
```

如果下面的数组`"product_options"`为空，它将被转换为 Ruby 中的数组，而不是映射。再一次，在 PHP 中将类型转换为对象会在 Ruby 中生成一个结构。

**我可以在 PHP 端做些什么来使空的“关联”数组最终成为 Ruby 端的映射？**

PHP 5.3.3，使用 SoapClient。Ruby 1.8.7、Rails 2.3.2 使用 Action Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:51:21.153

您可以使用编码参数将数组包装在一个[`SoapVar`](http://de.php.net/manual/de/soapvar.soapvar.php)类中。`APACHE_MAP`像这样：

```
array(
    "options"=>array(
        "plans"=>array(
            0=>array(
                "name"=>"abc",
                "product_options"=> new SoapVar(array(), APACHE_MAP),
            ),
        ),
    ),
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:27:01.550

嗯，这正是我的意思：要克服这个问题，您需要更改脚本中的逻辑——而不是 PHP。由于您无法将 PHP 数组**定义**为关联的，因此您需要修改接收脚本。

如果是我，我不会发送一个空数组。将状态字段放入数组中。这可能是一个计算可用产品的字段，在这种情况下计数为 0。您将进行更有意义的通信，并且无论如何数组都会突然关联，例如

```
"product_options" => array ('products'=>0,'...'=>...) and so forth. 
```

我说的是你需要改变逻辑，你不能改变 PHP。

希望有帮助，

乌韦

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T01:36:16.947

我在这里可能是错的，但根据我的理解：

我相信你想要达到的目标是不可能的。数组（我们只讨论数组，没有对象）是数组。内容给出的结构使数组关联或不关联。

空数组不是关联的。

# javascript - 当 jQuery ajax 在 js 函数中调用时，动画在 IE 中不起作用

> ID：11013666
> 
> 赞同：3
> 
> 时间：2012-06-13T11:13:56.347
> 
> 标签：javascript, jquery, ajax, animation, webmethod

当通过javascript调用单击按钮时，我试图在内部显示带有gif动画的div。但问题是，它只在 Firefox 中运行良好。在 IE 和 Chrome 中，动画不会显示。我试过用 alert("stop"); 在动画之前和之后，它确实可以工作，但是在我删除警报之后，它就不再工作了。请问有什么建议吗？

下面是 TestPage.aspx 的片段：

```
<div id="animationDiv" style="display: none;">
    <img src="loading.gif" />
</div>
...
<div>
    <asp:Button ID="testButton" runat="server" Text="Test AJAX" OnClientClick="return testButtonClick();" />
</div>
...
<script type="text/javascript">
<!--
    var docWidth, docHeight;

    function testButtonClick() {
        var o_animationDiv = $("#animationDiv");

        o_animationDiv.width(docWidth);
        o_animationDiv.height(docHeight);
        o_animationDiv.show();

        $.ajax({
            type: "Post",
            url: "TestPage.aspx/TestAjax",
            async: false,
            cache: false,
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: testAjaxSuccess,
            error: testAjaxError
        });

        function testAjaxSuccess(data, status, xhr) {
            // do something here
        };

        function testAjaxError(xhr, status, error) {
            // do something here
        };

        o_animationDiv.hide();

        return false;
    };

    $(document).ready(function () {
        docWidth = $(document).width();
        docHeight = $(document).height();
    });
//-->
</script> 
```

这是 TestPage.aspx.cs 的片段：

```
// using PageMethod for ajax
[System.Web.Services.WebMethod(EnableSession = true)]
public static string TestAjax()
{
    System.Threading.Thread.Sleep(5000); // 5 seconds

    // or do something else here
    // ie. if validation error, throw an exception

    return string.Empty;
} 
```

更新 1：添加了一些 javascript 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:21:40.117

jQuery ajax 是**异步**的，所以不会等待 ajax 结果再次隐藏。

```
 o_animationDiv.hide();
 o_animationDiv.show(); 
```

这条线是串行工作的，你看不到它是否工作正常。所以你应该等待ajax结果隐藏它。试试这个，

```
 $.ajax({
            type: "Post",
            url: "TestPage.aspx/TestAjax",
            async: false,
            cache: false,
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        }).done(function() {
            o_animationDiv.hide();
        }); 
```

# 更新：

抱歉，我错过了您创建同步 ajax 请求的要点。但是已经有问题了。大多数浏览器在运行同步 XHR 时会自行锁定。这有时也会影响先前的过程。

*   [这是一个类似的问题](https://stackoverflow.com/questions/11013666/animation-not-work-in-ie-when-jquery-ajax-calling-inside-js-function/11013796#11013796)

也许如果你使用`beforeSend`，你可以避免这个问题。

***发送前***

```
 A pre-request callback function that can be used to modify the jqXHR 
(in jQuery 1.4.x, XMLHTTPRequest) object before it is sent 
```

试试这个，

```
$.ajax({
            type: "Post",
            url: "TestPage.aspx/TestAjax",
            async: false,
            cache: false,
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            beforeSend : function() {
               o_animationDiv.show();
            }
        }).done(function() {
            o_animationDiv.hide();
        }); 
```

# 更新2：

不行的话试试这个

```
...
o_animationDiv.width(docWidth);
o_animationDiv.height(docHeight);
o_animationDiv.show();

setTimeout(function() {
        $.ajax({
            type: "Post",
            url: "TestPage.aspx/TestAjax",
            async: false,
            cache: false,
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: testAjaxSuccess,
            error: testAjaxError
        }).done(function() {
            o_animationDiv.hide();
        });
}, 600); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:22:50.243

你为什么不调用`.hide()`帖子成功：

```
$.ajax({
  type  : "Post",
  url   : "TestPage.aspx/TestAjax",
  cache : false,
  data  : "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(data) {

    // hide element when POST return as arrived,
    // meaning the "5 seconds" period has ended!
    o_animationDiv.hide();

  }
}); 
```

[您可以在jQuery 文档](http://api.jquery.com/jQuery.ajax/#callback-functions)中阅读有关回调函数的信息！

# php - html页面开头的三个空行

> ID：11013667
> 
> 赞同：-1
> 
> 时间：2012-06-13T11:13:57.610
> 
> 标签：php

我在 php 变量中有 html 代码

```
<?
$HTML_CODE='
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>'.$pg->pgTitle.'</title>
<link rel="stylesheet" href="'.$cssFile.'" type="text/css" />
</head>
<div id="header">
';

echo $HTML_CODE;
?> 
```

当我在浏览器中查看页面的源代码时（右键单击-> 查看源代码）

代码从第 4 行开始

```
1.
2.
3.
4.<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
5.<html>
6.<head>
7.<title>page title</title>
8.<link rel="stylesheet" href="style.css" type="text/css" />
9.</head>
10.<div id="header"> 
```

我使用了修剪功能，现在从第 3 行开始！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:18:36.707

这不是问题；不会产生任何错误，但至少其中一行是由于您的代码：

```
$HTML_CODE='
<!DOCTYPE HTML PUBLIC ... 
```

这引入了换行符。此外，我希望您在 php opening tag 之前有一些空格`<?`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:19:22.327

尝试

```
<? $HTML_CODE='<!DOCTYPE 
```

没有代码中的换行符，也尝试删除之间的换行符

```
'; and echo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:20:03.710

从变量的初始化中删除不必要的分页符

```
$HTML_CODE='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>'.$pg->pgTitle.'</title>
<link rel="stylesheet" href="'.$cssFile.'" type="text/css" />
</head>
<div id="header">'; 
```

# c++ - 为什么变换矩阵在 OpenGL 中不起作用

> ID：11013680
> 
> 赞同：0
> 
> 时间：2012-06-13T11:14:35.050
> 
> 标签：c++, opengl, matrix

假设我想在场景中画一个球，这里有两种不同的方法。

```
float SUN_TRANSLATION_MATRIX[] = {
  1.0f, 0.0f, 0.0f, 0.0f,
  0.0f, 1.0f, 0.0f, 0.0f,
  0.0f, 0.0f, 1.0f, -15.0f,
  0.0f, 0.0f, 0.0f, 1.0f
};

void displaySolarSystem1(){
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
  glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();
  glTranslatef(0.0f, 0.0f, -15.f);
  glColor3f(1.0f, 0.8f, 0.5f);
  glutSolidSphere(2.0, 50, 40);
  glutSwapBuffers();
}

void displaySolarSystem(){
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
  glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();         
  glMultMatrixf(SUN_TRANSLATION_MATRIX);
  glColor3f(1.0f, 0.8f, 0.5f);
  glutSolidSphere(2.0, 50, 40); 
  glutSwapBuffers();
} 
```

displaySolarSystem1 在 displaySolarSystem 使用矩阵运算的地方应用 glTranslatef，问题是 displaySolarSystem1 按预期工作，但矩阵失败。

displaySolarSystem() 出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:51:01.640

[http://www.opengl.org/sdk/docs/man/xhtml/glMultMatrix.xml](http://www.opengl.org/sdk/docs/man/xhtml/glMultMatrix.xml)

> 使用参数 m = [...] 调用 glMultMatrix 会将当前转换替换为 C × M × v

这意味着通过将矩阵乘以向量来应用变换，反之亦然。所以，平移矩阵是这样的 1 0 0 X 0 1 0 Y 0 0 1 Z 0 0 0 1 但这是矩阵，它是按行优先顺序编写的，而 OpenGL 采用列优先顺序矩阵，所以你需要转置它。所以，最后，你只需要使用`glMultTransposeMatrix`哪个，如果我没记错的话，稍微慢一点，或者转置你的矩阵看起来像这样

```
float SUN_TRANSLATION_MATRIX[] = {
  1.0f, 0.0f, 0.0f, 0.0f,
  0.0f, 1.0f, 0.0f, 0.0f,
  0.0f, 0.0f, 1.0f, 0.0f,
  0.0f, 0.0f, -15.0f, 1.0f
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:46:44.110

谢谢放松。通过更改 glMultMatrixf(SUN_TRANSLATION_MATRIX); 解决了这个问题。到 glMultTransposeMatrixf(SUN_TRANSLATION_MATRIX); 感谢您提示“这是一个转置矩阵”

# bazaar - 使用 Bazaar 版本控制系统的厨师独奏

> ID：11013681
> 
> 赞同：0
> 
> 时间：2012-06-13T11:14:38.967
> 
> 标签：bazaar, chef-infra, bzr-svn

我使用以下命令在厨师独奏中创建了食谱

`bzr init`

`bzr branch sftp://username@ip/~/branch-name`

直到`bzr init`它可以工作，但是第二个命令它**需要用户名的密码**是否有任何方法或选项可以用来发送密码或任何不需要密码的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:59:54.243

您应该能够将密码添加到 URL：

```
bzr branch sftp://username:password@ip/~/branch-name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:45:04.587

您可以将登录信息附加到`~/.bazaar/authentication.conf`例如：

```
# Identity on foo.net
[foo.net]
scheme=ftp
host=foo.net
user=joe
password=secret-pass 
```

有关更多信息，请参见：http: [//doc.bazaar.canonical.com/developers/authentication-ring.html](http://doc.bazaar.canonical.com/developers/authentication-ring.html)

# c# - Linq to XML 搜索

> ID：11013685
> 
> 赞同：2
> 
> 时间：2012-06-13T11:14:42.943
> 
> 标签：c#, linq, linq-to-xml

真的只是快速检查。

我有一个 XML 文件，我将使用 Linq to XML 进行搜索。我唯一的问题是，我的用户将提供的 XML 可以使用长代码标签或短代码标签，例如

`<FromPerson>Joe Bloggs</FromPerson>`- 长代码

或者

`<m175>Joe Bloggs</m175>`- 短代码

这是我的代码片段，显示我当前如何搜索文档（目前仅使用长代码搜索）：

```
prod.ProductID = product.Elements("ProductIdentifier").First(t => (t.Element("ProductIDType").Value == "45" || t.Element("ProductIDType").Value == "21")).Element("IDValue").Value; 
```

因此，元素“ProductIdentifier”可以是那个，也可以是“b221”。

只是简单地放置一个 IF 语句来评估 XML 标记是长代码还是短代码，然后获取值或者是否有更快、更有效的方法来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:19:36.070

如果您不关心顺序，您可以查询两者并加入如下结果：

```
var results = document.Descendants("ProductIdentifier")
                      .Union(document.Descendants("b221")); 
```

**编辑**

如果您确实关心元素的顺序，可以使用以下查询：

```
var results = document.Descendants()
                      .Where(e => e.Name == "ProductIdentifier" || e.Name == "b221"); 
```

# android - Twitter API 返回无效回调 - 无法授权

> ID：11013689
> 
> 赞同：0
> 
> 时间：2012-06-13T11:15:19.450
> 
> 标签：android, twitter, twitter-oauth, twitter4j

[已解决，但我愿意接受新的建议...]

我正在使用 twitter4j 将 Twitter 集成到我的 Android 应用程序中。

当我尝试使用 Twitter 进行授权时，我正在使用我的 oauth 令牌调用以下端点：

`https://api.twitter.com/oauth/authenticate?oauth_token=MY_VALID_TOKEN`

这**应该**将我重定向到：

`MY-CALLBACK:///?oauth_token=***&oauth_verifier=***`

但相反，它会将我重定向到：

`https://api.twitter.comMY-CALLBACK///?oauth_token=***&oauth_verifier=***`

这显然不是一个有效的网址。
（另外，`:`缺少 - 它应该是`MY-CALLBACK:///...`）

请注意我正在使用 WebView 进行调用，

我可以操纵这个字符串以使一切正常，但必须有更好的方法......

我将我的回调 URL 传递给

`getOAuthRequestToken("MY-CALLBACK:///");`

并且已经为我的活动设置了意图过滤器

`<data android:scheme="x-oauthflow-twitter" />`

另外，活动有`android:launchMode="singleInstance"`

我做错了什么？

[编辑：更多细节]

```
mTwitter = new TwitterFactory().getInstance();
mTwitter.setOAuthConsumer(Constants.TWITTER_CONSUMER_KEY, Constants.TWITTER_CONSUMER_SECRET);

twitterWebView = new WebView(ActivityTwitterAuthorize.this);

twitterWebView.setWebViewClient(new WebViewClient() {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.startsWith(Constants.TWITTER_CALLBACK_URL)) {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(Uri.parse(url));
            startActivity(intent);

        // HACKY PART!
        // I added the following code to force it to work, but this is a dirty hack...
        // String TWITTER_CALLBACK_INVALID_PREFIX = "https://api.twitter.comx-oauthflow-twitter///";
        // TWITTER_CALLBACK_URL = "MY-CALLBACK:///";
        // BEGIN
        } else if (url.startsWith(TWITTER_CALLBACK_INVALID_PREFIX)) {
            url = url.substring(TWITTER_CALLBACK_INVALID_PREFIX.length());
            url = Constants.TWITTER_CALLBACK_URL + url;
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(Uri.parse(url));
            startActivity(intent);
        // END

        } else {
            view.loadUrl(url);
        }
        return true;
    }

});

mTwitterReqToken = mTwitter.getOAuthRequestToken(Constants.TWITTER_CALLBACK_URL);

twitterWebView.loadUrl(mTwitterReqToken.getAuthenticationURL()); 
```

如果没有 hacky 部分，此代码会导致“网页不可用”错误，因为 url 无效：

`https://api.twitter.comMY-CALLBACK///?oauth_token=***&oauth_verifier=***`

如果 url 是，`MY-CALLBACK:///?oauth_token=***&oauth_verifier=***`那么我的活动将收到一个 Intent，一切都会好起来的......

有了“hacky 部分”，我的代码可以工作，但我想避免使用那段代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:22:44.797

在遵循我在网上看到的指南后，我发现我无法让它以这种方式工作。

我最终使用了我自己的自定义`WebViewClient`代码：

```
if ( url.contains( "MY-CALLBACK:///" ) )
{
    final int start = url.indexOf( '?' ) + 1;
    final String params = url.substring( start );
    final String verifierToken = "oauth_verifier=";
    if ( params.contains( verifierToken ) )
    {
        final int value = params.indexOf( verifierToken ) + verifierToken.length();
        final String token = params.substring( value );
        view.stopLoading();                  
        authoriseNewUser( token );
    }
    else if ( params.contains( "denied" ) )
    {
        view.stopLoading();
        finish();
    }
}
else
{
    view.loadUrl( url );
}
return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:48:01.773

```
public static final String OAUTH_CALLBACK_SCHEME = "x-oauthflow-twitter";
public static final String OAUTH_CALLBACK_HOST = "litestcalback";
public static final String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME+ "://" +OAUTH_CALLBACK_HOST; 
```

在代码和清单文件中使用这种类型的 callback_url ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:40:32.713

为此使用Below CallBack_URI，它可能会对您有所帮助。

```
public static final String  OAUTH_CALLBACK_SCHEME = "x-oauthflow-twitter";
public static final String  OAUTH_CALLBACK_HOST = "callback";
public static final String  CALLBACK_URL = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:43:21.223

我想你的代码没有问题。我昨天得到了同样的结果，但今天它就像一个魅力。这可能是服务器端的问题。你能再试一次你原来的（没有hacky部分）解决方案吗？

# java - 方法类型参数仅在签名中使用一次 - 有什么意义吗？

> ID：11013692
> 
> 赞同：2
> 
> 时间：2012-06-13T11:15:31.247
> 
> 标签：java, generics

[通用方法](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)教程有这个有用的例子：

```
 public <T extends E> boolean addAll(Collection<T> c); 
```

> 但是，[...] 类型参数 T 仅使用一次。返回类型不依赖于类型参数，也不依赖于方法的任何其他参数（在这种情况下，只有一个参数）。[...] 如果是这种情况，应该使用通配符。

我正在处理的项目的代码库有一些这样的方法：

```
public <T extends Something> T getThing(); 
```

和（不在同一个界面）

```
public <D> void storeData(int id, D data); 
```

使用方法类型参数而不是直接使用绑定（`Something`上面，`Object`下面）有什么意义？

（请注意，在前一种情况下，所有少数实现都带有注释，`@SuppressWarnings("unchecked")`重点可能是向该方法的用户隐藏此警告，但我不确定这是一个值得称赞的成就。在后一种情况下，一些实现使用反射以不同的方式存储不同类的实例，但我看不出类型参数如何促进这一点。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:15:02.720

类型参数有五种不同的情况，只出现一次需要考虑。

1）一旦进入返回类型位置：

1.a) 返回类型是类型变量

```
public <T extends Something> T getThing(); 
```

这应该是一个危险信号：调用者可以任意选择预期的返回类型，而被调用者无法知道选择的类型。换句话说，实现不能保证返回的值将是指定的返回类型，除非它 (a) 永远不会返回，(b) 总是抛出异常或 (c) 总是返回 null。在所有这些情况下，返回类型恰好完全无关。

（如果代码非常“动态”，我个人不介意这样的方法。也就是说，无论如何你都冒着类转换异常的风险，并且方法边界仍然足够早，可以引发异常。一个很好的例子是反序列化。调用该方法的各方都必须知道并理解这一点..）

1.b) 类型变量包含在返回类型中，但不包含返回类型本身

非常普遍和有效。示例是番石榴中的各种工厂方法，例如`Lists.newArrayList()`.

2）一旦进入参数类型位置：

2.a) 简单类型参数

```
public static <E> void shuffle(List<E> list); 
```

请注意，实现实际上需要类型参数才能对元素进行洗牌。尽管如此，调用者不必为此烦恼。您可以编写一个“捕获”通配符的内部辅助方法：

```
public static void shuffle(List<?> list) {
  shuffleWithCapture(list);
}

private static <E> void shuffleWithCapture(List<E> list) {
  // implementation
} 
```

2.b) 具有多个边界的类型参数

```
public static <T extends Foo & Bar> void foo(T);
public static <E extends Foo & Bar> void foo(List<E>); 
```

由于 Java 不允许在除类型参数范围之外的任何地方使用交集类型，因此这是表达这些签名的唯一方法。

2.c) 类型参数绑定包含类型参数变量

```
public static <T extends Comparable<? super T>> void sort(List<T> list); 
```

为了表示列表的元素必须相互比较，需要为它们的类型命名。没有办法消除此类类型参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:21:07.777

第一个 -

```
public <T extends Something> T getThing(); 
```

会将返回类型转换为分配的类型，并且通常不安全（编译器会警告您），因此可能会抛出`ClassCastException`. 但由于它不带任何参数，我认为它总是会返回`SomeThing`，并且泛型类型在那里是无用的。

我认为第二个也是没用的，因为它允许任何类型，所以最好`Object`改用
这样的声明使代码的可读性降低并且也没有提供任何好处，我建议使用 -

```
public Something getThing(); 
```

和

```
public static void storeData(int id, Object data); 
```

# primefaces - primefaces 拖放：从数据表中拖动时，内容不可见（在其他数据后面）

> ID：11013700
> 
> 赞同：2
> 
> 时间：2012-06-13T11:15:55.343
> 
> 标签：primefaces

我实现了一个非常类似于 primefaces 拖放数据表示例 ( [http://www.primefaces.org/showcase/ui/dndTable.jsf](http://www.primefaces.org/showcase/ui/dndTable.jsf) )中描述的拖放操作

一列是可拖动的。但是，当我拖动内容（即文本）时，一旦内容离开单元格，就不再可见。我想让它一直可见，所以当拖过其他列时，在表格之外....

primefaces 中的展示也有同样的问题。

任何人的想法？

谢谢

乔

# xquery - XPath 中的外部变量

> ID：11013701
> 
> 赞同：0
> 
> 时间：2012-06-13T11:15:59.387
> 
> 标签：xquery, xquery-sql

我正在尝试使用动态 Xquery 并使用外部变量形成路径。
我的查询是：

```
xquery version "1.0-ml";
declare variable $idValue as xs:string external;
declare variable $element as xs:string external;
for $sectiondiv in doc()//$element 
return $sectiondiv; 
```

在这里，我想`$element`从 java 发送查询并执行查询。元素是 xml 元素的字符串路径。

示例 xml

```
<rationales id="RATIONALE">
    <rationalesbody>
        <rationale>
            <title>Rationales</title>
            <sectiondiv id="RAT_1" population="pediatric">
                <p>THis is sample SectionDiv content </p>
            </sectiondiv>
        </rationale>         
    </rationalesbody>
</rationales> 
```

所以我发送的元素值是`/rationales /rationalesbody/rationale idValue = RAT_1`

它应该返回我 sectiondiv 和它的孩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:16:44.520

我一直在寻找同样的东西，发现了这个：

```
$doc//*[name() eq $element] 
```

# c - 在结构中初始化 char 数组

> ID：11013704
> 
> 赞同：-2
> 
> 时间：2012-06-13T11:16:15.183
> 
> 标签：c, data-structures

我正在写一本书的结构，然后看看它是如何初始化的。我不明白，他是怎么做到的。

```
struct node
{
 char target[50];
 char stack[50];
 char *s,*t;
 int top;
} 
```

初始化函数：

```
void init
{
 p->top = -1;
 strcpy(p->target,"");
 strcpy(p->stack,"");
 p-t = p->target;
 p->s="";
} 
```

所以我想知道他是如何`strcpy`用来初始化数组或字符的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:20:48.483

他**没有**这样做。该语句`strcpy(p->target,"");`不会初始化数组**的**50 个位置。它只是将 0 放在第一个位置。（请参阅此[参考资料](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:20:37.693

看看这个例子：[http ://www.cplusplus.com/reference/clibrary/cstring/strcpy/](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)

# iphone - iPad键盘隐藏文本字段

> ID：11013706
> 
> 赞同：0
> 
> 时间：2012-06-13T11:16:25.933
> 
> 标签：iphone, ipad, uitextfield

这是键盘隐藏文本字段的一个非常常见的问题。在 SO 上也为此发布了很多解决方案。

所以目前我指的是[以下帖子](https://stackoverflow.com/questions/1247113/iphone-keyboard-covers-text-field)，该帖子在 iPad 纵向模式下运行良好，但在 iPad 横向模式下，视图向左滑动，因为我希望视图向上移动。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [self animateTextField: textField up: YES];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    [self animateTextField: textField up: NO];
}

- (void) animateTextField: (UITextField*) textField up: (BOOL) up
{
    const int movementDistance = 80; // tweak as needed
    const float movementDuration = 0.3f; // tweak as needed

    int movement = (up ? -movementDistance : movementDistance);

    [UIView beginAnimations: @"anim" context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: movementDuration];
    self.view.frame = CGRectOffset(self.view.frame, 0, movement);
    [UIView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:46:40.727

由于 iPad 本身为键盘提供了很好的选项，如“Undock”和“Split”，一般我们不需要排列 Text Field。虽然考虑到您是否需要使用`[[UIDevice currentDevice] orientation]`基于该动画文本字段框架检查设备当前方向的问题。

# amazon-ec2 - 在 AWS-Amazon 上设置实例但无法连接

> ID：11013709
> 
> 赞同：1
> 
> 时间：2012-06-13T11:16:41.883
> 
> 标签：amazon-ec2, connection, cloud, amazon

我对 EC2 技术相当陌生，所以我认为我遗漏了一些要点。所以我设置了一个正在运行的实例并创建了两个密钥对。我选择实例，然后选择“连接”，网站会提供相关说明。我跟着他们，当我执行 ssh 命令时返回“网络无法访问”。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:01:39.390

好的，有几件事要检查：

1.  确保您的安全组上有正确的端口对您的个人 IP 或世界开放，具体取决于您的安全要求。例如：端口范围 22，IP 0.0.0.0/0（全球）xx.xx.xx.xx/32（个人 IP）

2.  接下来，我将确保您正确执行命令。如果 1 不起作用，您可以发布命令吗？

3.  另一件要检查的事情，虽然根据您的错误，这可能不是，但您对您的私钥拥有适当的权限。chmod 600 密码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:14:45.157

如果您使用的是 Amazon Linux，则用户名是 ec2-user，然后您可以从中运行 sudo。

# windows - 如何刷新 AviSaveOptions() 提供的列表中显示的视频编解码器以显示新安装的编解码器？

> ID：11013713
> 
> 赞同：2
> 
> 时间：2012-06-13T11:16:53.787
> 
> 标签：windows, delphi, compression, codec, avi

我有一个带有向导的 Delphi 6 应用程序，可以帮助人们选择合适的视频编解码器。它使用 AviSaveOptions() 向用户显示视频编解码器列表，以便他们选择一个。选择保存到磁盘以供以后重复使用。在向导中的某一时刻，如果用户没有合适的视频编解码器，则会指示用户使用其浏览器下载并安装几种流行的视频编解码器中的一种。但是，在他们安装新的视频编解码器并返回我的应用程序后，当我第二次调用 AviSaveOptions() 以便他们可以选择新安装的视频编解码器时，列表不会*显示*新的编解码器。

如果我完全退出我的应用程序并返回到向导，调用 AviSaveOptions()*确实*会在对话框中显示新的编解码器。我显然想从我的应用程序中刷新列表，这样用户就不必重新加载程序来选择新的编解码器。我确实在调用 AviSaveOptions() 的方法中调用了 AviFileInit() 和 AviFileExit()。我还需要做什么才能更新 AviSaveOptions() 对话框中显示的编解码器列表以显示新安装的视频编解码器？下面是我用来调用 AviSaveOptions() 的代码：

```
function doGetUsersCompressorChoice(theCallingForm: TForm; theFccType: FOURCC): FOURCC;
var
    // theCompressionOptionsFile: TAviCompressionOptionsFile;
    theCompressionOptions: TAVICOMPRESSOPTIONS;
    res: LongBool;
    hr: HRESULT;
    intfAviStream: IAVIStream;
    testVideoFilenameSrc, testVideoFilename: string;
    aryCompressOpts: array[0..0] of PAVICOMPRESSOPTIONS;
    fullSaveOptsFilePath: string;
begin
    // fullPathToCompressorOptsFile := '';
    if not Assigned(theCallingForm) then
        raise Exception.Create('(doGetUsersCompressorChoice) The calling form is unassigned.');

    // Make sure the test video file exists.
    testVideoFilenameSrc := getTestVideoPath_compsettings + TEST_COMPRESSION_VIDEO_FILENAME;

    if not FileExists(testVideoFilenameSrc) then
        raise Exception.Create('(doGetUsersCompressorChoice) Unable to find the test video file: ' + testVideoFilename);

    // Copy it since we are about to tinker with it and don't want to damage
    //  the original.
    testVideoFilename := ChangeFileExt(testVideoFilenameSrc, '.comptest.avi');

    if FileExists(testVideoFilename) then
    begin
        // Delete it.
        if not DeleteFile(testVideoFilename) then
            raise Exception.Create('(doGetUsersCompressorChoice) Unable to delete the test video file: ' + testVideoFilename);
    end; // if FileExists(testVideoFilename) then

    // Copy the source to the test file.
    if not CopyFile(PChar(testVideoFilenameSrc), PChar(testVideoFilename), true) then
        raise Exception.Create('(doGetUsersCompressorChoice) Unable to copy the source video file to the test video file (source, dest): ' + testVideoFilenameSrc + ', ' + testVideoFilename);

    AVIFileInit;

    FillChar(theCompressionOptions, SizeOf(theCompressionOptions), 0);

    aryCompressOpts[0] := @theCompressionOptions;

    // theCompressionOptionsFile := TAviCompressionOptionsFile.Create;

    try
        // Open the test video file.
        hr := AVIStreamOpenFromFile(intfAviStream, PChar(testVideoFilename), theFccType, 0, OF_READ, nil);

        checkAviResult('doGetUsersCompressorChoice', hr, 'Unable to open the test video file (AVIStreamOpenFromFile)');

        // Now prompt the user for the desired compressor.
        res := AVISaveOptions(theCallingForm.Handle, 0, 1, intfAviStream, aryCompressOpts[0]);

        if res then
        begin
            {
                IMPORTANT: Microsoft does not use the fccType field for
                audio compressors and leaves it 0 when calling AviSaveOptions().
                To compensate we are using a fake FOURCC equal to
                ('f','a','k','e') for audio compressors.

                Therefore, you can't tell which audio compressor is in
                use.  The fake FOURCC is only to keep the compressor
                options file object and methods happy since they
                need an identifier to use when storing the compressor
                settings.

                We have a message about this on Stack Overflow but
                so far no one has provided an answer on how to ID
                the compressor being returned by

            }

            if theFccType = streamtypeAUDIO then
                Result := stringToFOURCC(FOURCC_FAKE_AUDIO_COMPRESSOR_ID)
            else
                // Result is the FOURCC of the selected compressor.
                Result := aryCompressOpts[0]^.fccHandler;

            try
                fullSaveOptsFilePath := getCompressorOptsFullFilePath(Result);

                // Save the user's selected compressor settings to disk.
                // theCompressionOptionsFile.save(aryCompressOpts[0]^);
                if writeCompOptsFile(fullSaveOptsFilePath, aryCompressOpts[0]^) <> AVIERR_OK then
                    raise Exception.Create('(doGetUsersCompressorChoice) Unable to save the compressor options to disk, file name: ' + fullSaveOptsFilePath);

                // Return the full path to the saved compressor options file.
                // fullPathToCompressorOptsFile :=
                //    theCompressionOptionsFile.fullFilename;
            finally
                // Free the compression options variable.
                AVISaveOptionsFree(1, aryCompressOpts[0]);
            end; // try
        end
        else
        begin
            // User aborted operation.  Just return the Result of 0.
            Result := 0;
        end;
    finally
        // if Assigned(theCompressionOptionsFile) then
        //    theCompressionOptionsFile.Free;

        AviFileExit;
    end; // try
end; 
```

# oracle11g - 从 Oracle 11g 迁移到 SQL Server 2008 Express 的最简单方法是什么？

> ID：11013718
> 
> 赞同：2
> 
> 时间：2012-06-13T11:17:01.227
> 
> 标签：oracle11g, sql-server-2008-express

我正在使用 Oracle 11g，现在我希望迁移到 Microsoft SQL Server 2008 以用于学术学习。我的 DDL 在一个 .txt 文件中，所有语法都与 Oracle 兼容。现在我必须在 SQL Server 中创建相同的表和插入。将我在 Oracle 中创建的现有数据库转换或导入到 SQL Server 的可能选项有哪些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:58:48.613

看看这个链接

[http://technet.microsoft.com/en-us/library/hh313159.aspx](http://technet.microsoft.com/en-us/library/hh313159.aspx)

它逐步描述了将 ORACLE 数据库迁移到 Microsoft Sql Server 数据库的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T07:19:58.460

为了将 Oracle 11g 转换为 SQL Server 2012，Microsoft 提供了一个名为 SQL Server Migration Assistant for Oracle (SSMA) 的工具。

以下是非常高级的步骤：

1.  从此[链接](http://www.microsoft.com/en-us/download/details.aspx?id=43689)下载 SSMA for Oracle 。确保您已下载 SSMA for Oracle 和 SSMA for Oracle Ext Pack。一个接一个地安装。

    *注意：在安装时，它会提供数据库实例的选项以及创建主密码的选项。记下它们。您以后可能需要它们。*

    2.  打开 SSMA 并创建一个新项目。
    3.  连接到 Oracle 数据库。
    4.  连接到 SQL Server 2012。
    5.  转换 Oracle 的架构。
    6.  迁移Oracle的数据。
    7.  与 SQL Server 同步。

用于直接转换的 [Youtube链接。](https://www.youtube.com/watch?v=lKMR6KX5eCY)[数据类型的MSDN PDF](http://download.microsoft.com/download/6/8/D/68D1B83D-284A-40C0-8D81-D2D1EA8A668C/Migration_from_Oracle_Database_to_SQL_Server_2012_FAQ.pdf)链接和有关转换的其他广泛信息。

*以上只是为了让您入门，即使我不确定像 Sequence 和 DBLinks 这样的几个选项。祝你好运。*

# matlab - 处理图像中的伪影

> ID：11013721
> 
> 赞同：14
> 
> 时间：2012-06-13T11:17:13.630
> 
> 标签：matlab, image-processing, filter, noise-reduction

这个问题与我之前的帖子有关Stackoverflow[中 Matlab](https://stackoverflow.com/questions/10863734/image-processing-algorithm-in-matlab)中的图像处理算法，我已经得到了我想要的结果。

但是现在我面临另一个问题，并且在过程图像中得到了一些人工制品。在我的原始图像（600 张图像的堆栈）中，我看不到任何人工制品，请查看指甲的原始图像：

![在此处输入图像描述](../Images/7c38e602728ce59039397cb1734652f1.png)

但在我的 10 个处理结果中，我可以看到以下几行：

![在此处输入图像描述](../Images/33762e64cfdcfbc11c657eff01994834.png)

我真的不知道他们从哪里来？

另外，如果它们属于相机的传感器，为什么我在原始图像中看不到它们？任何想法？

**编辑：**

我添加了@Jonas 建议的以下代码。它减少了伪影，但并没有完全去除它们。

```
%averaging of images
im = D{1}(:,:);
for i = 2:100
 im = imadd(im,D{i}(:,:));
end
im = im/100;
imshow(im,[]);

for i=1:100
SD{i}(:,:)=imsubtract(D{i}(:,:),im(:,:))
end 
```

@belisarius 要求提供更多图片，因此我将上传 4 张带有散斑图案的手指图片和 4 张黑色背景尺寸（1280x1024）的图片：

![图像1](../Images/4386fa6d5432befba94682f71dc506d2.png) ![图2](../Images/e8352fd17aef8acac932022e65ce651a.png) ![图3](../Images/f06346098948133b0ab4dc187113ef8b.png) ![图像4](../Images/b96f4ac655528a1f0f58bf03eb7709fd.png)

这是黑色背景：

![黑色背景1](../Images/4d3f0e2059006d359cc7bbc9be347c46.png) ![黑色背景2](../Images/aac702754d2707a402331eee8f911a27.png) ![黑色背景3](../Images/c21716246aa38223d598768a4caa36c3.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T13:43:44.513

您的工件实际上存在于您的原始图像中，尽管不可见。Mathematica 中的代码：

```
i = Import@"http://i.stack.imgur.com/5hM3u.png" 
```

![在此处输入图像描述](../Images/d78eb4305a39e3aeeabbeef489334663.png)

```
EntropyFilter[i, 1] 
```

![在此处输入图像描述](../Images/6c98d15f5eb42eb522c014f0edc05544.png)

线条很微弱，但您可以通过非常低级别阈值的二值化看到它们：

```
Binarize[i, .001] 
```

![在此处输入图像描述](../Images/f6453046e07db649ce9380e875b11c26.png)

至于是什么原因造成的，我只能推测。我将从相机输出本身开始追踪。此外，您可以发布两到三张“直接来自相机的图像”，让我们进行一些实验。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T14:25:55.130

您使用的相机很可能有一个 CMOS 芯片。由于它们具有独立的列（可能还有行）放大器，其电子特性可能略有不同，因此您可以从一列获得比另一列放大得多的信号。

根据相机的不同，色谱柱强度的这些变化可能是稳定的。在这种情况下，你很幸运：拍摄大约 100 张暗图像（在镜头上粘贴一些东西），对它们进行平均，然后在运行分析之前从每张图像中减去它们。这应该使线条消失。如果线条没有消失（或者如果有额外的线条），则使用[Amro 提出的后处理方案](https://stackoverflow.com/questions/11013721/artifacts-in-processed-images/11015774#11015774)将二值化后的线条去除。

**编辑**

`D`假设您拍摄了 100 张深色图像并将它们存储在具有 100 个元素的元胞数组中，以下是您进行背景减法的方法：

```
% take the mean; convert to double for safety reasons
meanImg = mean( double( cat(3,D{:}) ), 3); 

% then you cans subtract the mean from the original (non-dark-frame) image
correctedImage = rawImage - meanImg; %(maybe you need to re-cast the meanImg first) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T19:42:50.980

这是一个答案，认为会比上述方法更温和地删除线条：

```
im = imread('image.png');   % Original image
imFiltered = im;            % The filtered image will end up here
imChanged = false(size(im));% To document the filter performance 

% 1)
% Compute the histgrams for each column in the lower part of the image
% (where the columns are most clear) and compute the mean and std each
% bin in the histogram.
histograms = hist(double(im(501:520,:)),0:255);
colMean = mean(histograms,2);
colStd = std(histograms,0,2);

% 2)
% Now loop though each gray level above zero and...
for grayLevel = 1:255

    % Find the columns where the number of 'graylevel' pixels is larger than
    % mean_n_graylevel + 3*std_n_graylevel). - That is columns that contains
    % statistically 'many' pixel with the current 'graylevel'. 
    lineColumns = find(histograms(grayLevel+1,:)>colMean(grayLevel+1)+3*colStd(grayLevel+1));

    % Now remove all graylevel pixels in lineColumns in the original image
    if(~isempty(lineColumns))
        for col = lineColumns 
            imFiltered(:,col) = im(:,col).*uint8(~(im(:,col)==grayLevel));
            imChanged(:,col) = im(:,col)==grayLevel;
        end
    end 
end

imshow(imChanged)
figure,imshow(imFiltered) 
```

这是过滤后的图像

![过滤后的图像](../Images/080049ac68876bdd296f2d50384b4319.png)

这显示了受过滤器影响的像素

![受滤镜影响的像素](../Images/5c1c7a1a48112b59abbdf7579d5771c6.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-13T13:21:45.473

您可以使用某种[形态](http://www.mathworks.com/help/toolbox/images/f18-12508.html) [开口](http://en.wikipedia.org/wiki/Opening_%28morphology%29)来删除细垂直线：

```
img = imread('image.png');
SE = strel('line',2,0);
img2 = imdilate(imerode(img,SE),SE);

subplot(121), imshow(img)
subplot(122), imshow(img2) 
```

![截屏](../Images/26af552845e9e0d08fb5a761591c284e.png)

使用的结构元素是：

```
>> SE.getnhood
ans =
     1     1     1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T12:19:14.047

在没有真正深入研究您的图像处理的情况下，我可以想到发生这种情况的两个原因：

1.  处理引入了这些工件。这不太可能，但这是一种选择。检查您的算法和代码。

2.  这是一个副作用，因为您的处理减少了图片的动态范围，就像量化一样。所以实际上，这些伪影可能在处理之前就已经存在于图片本身中，但由于它们的水平非常接近背景水平，因此无法被注意到。至于这些伪影的来源，甚至可能是相机本身。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-16T06:06:38.457

这是一个非常有趣的问题。我曾经用实时红外成像仪（视频系统）来处理这类问题。实际上，在用户看到或拿到图像之前，我们在相机中内置了算法来处理这个问题。几个问题：

1）您是在处理 RAW 图像还是在处理已经预处理的灰度（或 RGB）图像？

2）这些图像的最终目标是什么。目标是简单地消除线条，而不管结果图像的其余部分的质量如何，或者是保持绝对最佳图像质量的关键。之后要进行其他处理吗？

我同意这些线条最有可能出现在您的所有图像中。这些线条出现在图像中的原因有两个，一个是在明亮的场景中，列的运算放大器饱和，从而导致图像的整个列获得相机可以输出的最亮值。另一个原因可能是糟糕的 OP AMP 或 ADC（模数转换器）本身（很可能不是 ADC，因为通常整个传感器基本上有 1 个 ADC，这会使整个图像变差，而不是你的情况）。饱和情况实际上更难处理（我不认为这是你的问题）。注意：传感器上过多的饱和度可能会导致传感器中出现坏像素和列（这就是为什么他们说永远不要将相机对准太阳）。可以处理坏柱问题。以上在另一个答案中，有人让你平均图像。虽然这可能有助于找出坏列（或坏的单个像素，或传感器的噪声矩阵）在哪里（并且您必须将相机平均指向黑色、白色，基本上是纯色），但它不是t 摆脱它们的正确答案。顺便说一句，我用黑白和平均，以及发现坏像素等来解释什么……称为校准传感器。

好的，所以说您能够获得此校准数据，那么您将能够找出哪些列是坏的，甚至是单个像素。

如果您有此数据，则可以擦除列的一种方法是：

```
for each bad column
    for each pixel (x, y) on the bad column
        pixel(x, y) = Average(pixel(x+1,y),pixel(x+1,y-1),pixel(x+1,y+1),
                              pixel(x-1,y),pixel(x-1,y-1),pixel(x-1,y+1)) 
```

这本质上是用一个新像素替换坏像素，这是它周围剩余的 6 个好像素的平均值。以上是算法的过度简化版本。在某些情况下，单个坏像素可能就在坏列旁边，不应该用于平均，或者两个或三个坏列彼此相邻。可以想象你会计算一个坏列的值，然后认为该列是好的，以便移动到下一个坏列，等等......

现在，我询问 RAW 与 B/W 或 RGB 的原因。如果您正在处理 RAW，则取决于传感器本身的构建，可能只有拜耳过滤图像传感器的一个子像素（如果您愿意）具有不良的 OP AMP。如果你能检测到这一点，那么你就不必丢弃其他好的子像素数据。其次，如果您使用 RGB 传感器拍摄灰度照片，并以 RAW 格式拍摄，那么您可以计算自己的灰度像素。许多传感器在使用 RGB 传感器返回灰度图像时，只会将绿色像素作为整体像素传回。这是因为它确实起到了图像发光的作用。这就是为什么大多数图像传感器为每个 r 或 g 子像素实现 2 个绿色子像素。

```
gray = (0.299*r + 0.587*g + 0.114*b) 
```

为冗长的回答道歉，但我希望这对某人来说仍然是信息性的:-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-17T13:08:28.077

由于您看不到原始图像中的线条，它们要么与原始图像范围相比强度差异较小，要么是由您的处理算法添加的。

干扰的形状暗示了第一个选项......（除非你有一个单独处理每一行的算法。）

似乎您的传感器的列不均匀，请尝试使用相同的曝光（和其他）设置在没有手指（仅背景）的情况下拍照，然后从手指的照片中减去它（在其他处理之前）。（在拍摄两张图像之前，请确保背景是统一的。）

# actionscript-3 - 使用 x 和 y 坐标定位影片剪辑

> ID：11013722
> 
> 赞同：1
> 
> 时间：2012-06-13T11:17:13.647
> 
> 标签：actionscript-3, flash

我有一个奇怪的问题。我有一个添加到其他 Sprite 的两个精灵，我使用 localToGlobal() 获取它们的全局 x,y 坐标，但是当我添加另一个影片剪辑并尝试在 ENTER_FRAME 事件上将它们移动到“全局”坐标时，它们被锁定在舞台的 0,0 上？？

我已经追踪了坐标，它们是正确的，但没有定位……为什么？

```
var point:Point = new Point();
addChild(pl_name);
pl_name.addEventListener(Event.ENTER_FRAME, mov);
function mov(e:Event):void
{
for (var i in players)
{

    var gglobal:Point = players[i].localToGlobal(point);
    pl_name.x = gglobal.x;
    pl_name.y = gglobal.y;
    trace ("nameX "+pl_name.x+"    nameY "+pl_name.y);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:01:46.367

你给它的点在使用之前没有设置任何东西。尝试这个。

point.x = 玩家[i].x; point.y = 玩家[i].y; var gglobal:Point = 玩家[i].localToGlobal(point);

# sql-server - 为年度报告选择记录（过去 3 年）

> ID：11013725
> 
> 赞同：2
> 
> 时间：2012-06-13T11:17:18.677
> 
> 标签：sql-server, sql-server-2008, tsql

考虑以下 SQL 语句：

```
DECLARE @CustomerId INT = 48;
DECLARE @CurrentYear INT = DATEPART(YEAR, GETDATE());

SELECT
    YEAR(o.OrderDate) AS Year,
    0 AS Month,
    SUM(o.GrandTotal) AS GrandTotal
FROM [Order] o
WHERE
    o.CustomerId = @CustomerId AND
    o.OrderTypeId = 4 AND
    o.IsVoid = 0 AND
    YEAR(o.OrderDate) BETWEEN @CurrentYear - 2 AND @CurrentYear
GROUP BY
    YEAR(o.OrderDate) 
```

正确产生结果：

```
2012, 0, 89.00
2011, 0, 230.00
2010, 0, 450.0 
```

但是，如果另一个客户仅在 2011 年下订单，我需要生成另外 2 行（尽管值为 0）：

```
2011, 0, 230.00
2012, 0, 0
2010, 0, 0 
```

我该如何*正确地*做到这一点？请注意，将生成过去 3 年的报告。

**第 4 次更新** 我按照建议修改了代码：

```
DECLARE @CustomerId INT = 48;
DECLARE @CurrentYear INT = YEAR(GETDATE());

DECLARE @years TABLE (
    yr INT
);
INSERT INTO @years VALUES
    (@CurrentYear),
    (@CurrentYear - 1),
    (@CurrentYear - 2) 
```

这会产生如下的结果集（我已经检查过并确保是这种情况）。

```
2012
2011
2010 
```

然后我加入表（RIGHT JOIN）如下：

```
SELECT
    y.yr AS Year,
    0 AS Month,
    SUM(ISNULL(o.GrandTotal, 0)) AS GrandTotal
FROM [Order] o
RIGHT JOIN @years y ON y.yr = YEAR(o.OrderDate)
WHERE
    o.CustomerId = @CustomerId AND
    o.OrderTypeId = 4 AND
    o.IsVoid = 0
GROUP BY
    y.yr 
```

但是，考虑到客户还没有下订单，所以，这需要产生 3 行的零值。但是，建议的这些解决方案都没有做到这一点。

**最终更新 [已解决]：** where 子句阻止这些行出现在最终结果集中。所以，正如 Darvin 所建议的，我只是用 AND 替换了 WHERE 子句，问题就消失了。

```
SELECT
    y.yr AS Year,
    0 AS Month,
    SUM(ISNULL(o.GrandTotal, 0)) AS GrandTotal
FROM [Order] o
RIGHT JOIN @years y ON y.yr = YEAR(o.OrderDate) AND
    o.CustomerId = @CustomerId AND
    o.OrderTypeId = 4 AND
    o.IsVoid = 0
GROUP BY
    y.yr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:39:14.797

我在小提琴中编写了示例代码。[http://sqlfiddle.com/#!3/eddfe/9/0](http://sqlfiddle.com/#!3/eddfe/9/0)希望对您有所帮助。

这个想法是您创建一个包含所有年份的 UDF，然后对该表进行外部连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:37:33.320

以下情况如何：

```
DECLARE @CustomerId INT = 48; 
DECLARE @CurrentYear INT = DATEPART(YEAR, GETDATE());  

;with years as 
( 
SELECT YEAR(GETDATE()) as yr 
UNION ALL SELECT YEAR(DATEADD(YY,-1,GETDATE())) 
UNION ALL SELECT YEAR(DATEADD(YY,-2,GETDATE())) 
) 
SELECT      
years.yr 
,0 AS Month 
,SUM(ISNULL(o.GrandTotal,0)) AS GrandTotal  
FROM years 
LEFT OUTER JOIN Order o  
ON YEAR(o.OrderDate) = years.yr 
AND o.customerid = @customerid
AND     o.OrderTypeId = 4  
AND     o.IsVoid = 0  
GROUP BY      
years.yr 
```

# lua - 5.2 中的嵌入式 Lua 沙盒化/从 lua.file 设置函数的环境

> ID：11013727
> 
> 赞同：7
> 
> 时间：2012-06-13T11:17:27.457
> 
> 标签：lua

可以说我至少有两个 lua 脚本文件。

测试1.lua 测试2.lua

两者都定义了一个 init 函数和其他具有相似名称的函数。

如何使用 c++/c 将每个脚本文件加载到使用 Lua 5.2 的单独环境中，以便相同的函数名称不会发生冲突 - 我发现 5.1 的示例代码对我不起作用（因为 setenv 消失了，而 lua_setuservalue 没有似乎工作）

Sample here[使用句柄从 .lua 调用 lua 函数？](https://stackoverflow.com/questions/3432231/calling-lua-functions-from-luas-using-handles?answertab=active#tab-top)

基本上，如果我用 setuservalue 替换 setenv - 我会遇到访问冲突。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T12:31:23.500

[非官方](http://www.luafaq.org/#T1.32)的Lua FAQ有一个关于 Lua 沙盒的条目。我的猜测是，您可以轻松地将该逻辑转换为您的 C/C++ 代码。

另请参阅[lua-users wiki 上的 LuaFiveTo](http://lua-users.org/wiki/LuaFiveTwo)。

**更正**

这确实不像看起来那么微不足道。但最后一点很简单：加载你的块，推送 _ENV 表，使用`lua_setupvalue(L,-2,1)`. 重要的是表格应该在堆栈的顶部。

作为一个小例子，使用 2 个默认为 _G 的环境通过元表读取内容：

```
#include <lua.h>
#include <lualib.h>
#include <lauxlib.h>

int main(void){
        lua_State *L = luaL_newstate();
        char *file1 = "file1.lua";
        char *file2 = "file2.lua";

        luaL_openlibs(L);

        luaL_loadfile(L,file2); // S: 1
        luaL_loadfile(L,file1); // S: 2
        lua_newtable(L); // ENV for file 1: S: 321
        lua_newtable(L); // ENV for file 2: S: 4321

        //lets have each function have its metatable, where missed lookups are
        //instead looked up in the global table _G

        lua_newtable(L); // metatable S: 54321
        lua_getglobal(L,"_G"); // pushes _G, which will be the __index metatable entry S: 654321

        lua_setfield(L,-2,"__index"); // metatable on top S: 54321
        lua_pushvalue(L,-1); // copy the metatable S: 554321
        lua_setmetatable(L,-3); // set the last copy for env2 S: 54321
        lua_setmetatable(L,-3); // set the original for env1  S: 4321
        // here we end up having 2 tables on the stack for 2 environments
        lua_setupvalue(L,1,1); // first upvalue == _ENV so set it. S: 321
        lua_setupvalue(L,2,1); // set _ENV for file S: 21
        // Remaining on the stack: 2 chunks with env set.
        lua_pcall(L,0,LUA_MULTRET,0);
        lua_pcall(L,0,LUA_MULTRET,0);
        lua_close(L);
        return 0;
} 
```

对于 2 个 Lua 文件：

```
-- file1.lua
function init()
        A="foo"
        print("Hello from file1")
        print(A)
end
init()

-- file2.lua
-- this shows that stuff defined in file1 will not polute the environment for file2
print("init function is",tostring(init))
function init()
        A="bar"
        print("Hello from file2")
        print(A)
end
init() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:31:58.380

> 两者都定义了一个 init 函数和其他具有相似名称的函数。

首先，为什么这些功能是*全局*的？它们应该是脚本的本地。如果您要`require`在其他文件中访问它们，它们应该创建并返回一个包含它们希望公开的函数的表。

需要这些文件时的现代习惯用法是执行以下操作：

```
local Library = require 'library'

Library.Func1(...) 
```

因此，您不会污染全局 Lua 命名空间。您使用局部变量。

但是，如果您坚持使用这样的全局变量，您可以完全按照文档中的说明进行操作：更改已编译块的第一个上值。

> 基本上，如果我用 setuservalue 替换 setenv - 我会遇到访问冲突。

你当然知道。那`lua_setuservalue` *不是*。它用于设置与*userdata*关联的值。你想要的被恰当地称为[`lua_setupvalue`](http://www.lua.org/manual/5.2/manual.html#lua_setupvalue).

使用您引用的示例代码，正确答案是：

```
lua_setupvalue(L, -2, 1); 
```

# ios - 核心数据只返回 null

> ID：11013728
> 
> 赞同：1
> 
> 时间：2012-06-13T11:17:28.730
> 
> 标签：ios, core-data

我有许多对象（NSManagedObject 子类），它们“似乎”被正确创建和保存，但是在重新加载时，我只能从对象中的任何变量中获取 null。

保存了正确数量的对象，但没有变量。

我已经多次查看代码，但我无法弄清楚问题是在保存方面还是在加载方面。

非常感谢任何想法！提前致谢

```
//Create a route
- (CNSRoute *) createRoute
{

    CNSRoute *p = [NSEntityDescription insertNewObjectForEntityForName:@"CNSRoute" inManagedObjectContext:context];

    [allRoutes addObject:p];
    //NSLog(@"Route: %@", p);
    return p;
}

//Load all routes from core data
- (void) loadAllRoutes
{
    NSLog(@"All Routes: %@", allRoutes);
    if (!allRoutes) {
        NSFetchRequest *request = [[NSFetchRequest alloc] init];

        NSEntityDescription *e = [[model entitiesByName] objectForKey:@"CNSRoute"];
        [request setEntity:e];

        NSSortDescriptor *sd = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
        [request setSortDescriptors:[NSArray arrayWithObject:sd]];

        NSError *error;
        NSArray *result = [context executeFetchRequest:request error:&error];
        if (!result) {
            [NSException raise:@"Fetch Failed" format:@"Reason: %@", [error localizedDescription]];
        }
        NSLog(@"LOAD RESULT: %@", result);

        for (CNSRoute *route in result) {
            NSLog(@"Loading Route... %@", [route name]);
        }

        allRoutes = [[NSMutableArray alloc] init];

        [allRoutes setArray:result];

        //NSLog(@"%@", allLocations);

    }
}

//Save context
- (BOOL)saveChanges
{
    NSError *err = nil;

    BOOL successful = [context save:&err];
    if (!successful) {
        NSLog(@"ERROR SAVING: %@", [err localizedDescription]);
    }

    return successful;
}

//Save when application enters background
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [[CNSTravelController sharedStore] saveChanges];
} 
```

# svn - svn 复制命令

> ID：11013729
> 
> 赞同：3
> 
> 时间：2012-06-13T11:17:29.683
> 
> 标签：svn, branch, branching-and-merging

我知道这是一个非常菜鸟的问题，但是当我尝试使用以下命令从已经存在的分支（不是主干）创建一个新分支时：

```
svn copy svn+ssh://svn.example.com/software/branches/branch_name svn+ssh://svn.example.com/software/branches/new_branch_name  -m "Message" 
```

我收到以下错误：

> svn：在 'svn+ssh://svn.example.com/software/branches' 中找不到存储库

我一遍又一遍地检查，目录是正确的。我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:42:30.447

啊终于发现了错误……命令应该是：-

`svn copy svn+ssh://user@svn.example.com/software/branches/branch_name svn+ssh://user@svn.example.com/software/branches/new_branch_name -m "Message"`

我错过了指南中没有给出的用户部分。

它现在工作得很好：D

# asp.net - 无法在网页中显示除剃刀字符串类型外的数据

> ID：11013730
> 
> 赞同：-3
> 
> 时间：2012-06-13T11:17:30.323
> 
> 标签：asp.net, razor

我确实定义了这样的变量来显示用户ID

```
 userid = row.userid; 
```

但收到此错误

```
Cannot implicitly convert type 'int' to 'string' 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:22:04.703

`userid = row.userid.ToString()`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:22:06.203

试试这个：

```
userid = row.userid.ToString(); 
```

# php - CakePHP 模型验证错误属性的问题

> ID：11013733
> 
> 赞同：2
> 
> 时间：2012-06-13T11:17:32.630
> 
> 标签：php, validation, cakephp, model, cakephp-2.1

我在我的一个项目中使用 CakePHP 2.1.3，我希望通过控制器以 JSON 格式返回模型验证错误，当我尝试通过 CakePHP 的模型属性 validationErrors 访问验证错误时，它在主要和所有其他关联时返回有效错误数组模型存在验证错误。但是，当主模型有效且关联模型存在验证错误时，它会导致无效的验证错误数组。下面是一个例子：

```
if ($this->request->is('post') || $this->request->is('put')) {
    if ($this->PrimaryModel->saveAll($this->request->data, array('validate' => 'first'))) {
        echo json_encode(array('success' => true));
    } else {
        $errors=array();
        $tablesToModels=$this->PrimaryModel->tableToModel; //List of table names included in the model description. Used for associations.
        foreach($tablesToModels as $tabel => $model) {
            $errors[$model]=$this->{$model}->validationErrors;
        }
        pr($errors);
        //echo json_encode(array('errors' => $errors));
    }
    exit;
} 
```

如果主模型和关联模型存在验证错误，则上面的代码会产生以下输出：

```
Array
(
    [PrimaryModel] => Array
        (
            [field1] => Array
                (
                    [0] => notempty
                )

        )

    [AssociatedModel] => Array
        (
            [field1] => Array
                (
                    [0] => notempty
                )

            [field2] => Array
                (
                    [0] => notempty
                )

        )
) 
```

当所有字段都填写在主模型中，或者主模型没有验证错误时，它会导致以下错误数组：

```
Array
(
    [PrimaryModel] => Array
        (
            [AssociatedModel] => Array
                (
                    [field1] => Array
                        (
                            [0] => notempty
                        )

                    [field2] => Array
                        (
                            [0] => notempty
                        )

                )

        )

    [AssociatedModel] => Array
        (
            [field1] => Array
                (
                    [0] => notempty
                )

            [field2] => Array
                (
                    [0] => notempty
                )

        )

) 
```

我不知道为什么会发生这种情况以及我在哪里做错了什么？

这是一个编辑表单代码，以防你们需要它来整理它：

```
<php
    echo $this->Form->input('PrimaryModel.field1');
    echo $this->Form->input('PrimaryModel.field2');
    echo $this->Form->input('PrimaryModel.field3');
    echo $this->Form->input('PrimaryModel.field4');
    echo $this->Form->input('AssociatedModel.field1');
    echo $this->Form->input('AssociatedModel.field2');
    echo $this->Form->input('AssociatedModel.field3');
    echo $this->Form->input('PrimaryModel.field5');
?> 
```

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:23:50.717

控制器通常`$validationErrors`在渲染动作时构造属性。您应该使用 json 视图，而不是直接从控制器回显 json。让视图处理显示逻辑，在这种情况下，将结果显示为 json 而不是常规的 html。

将扩展名添加到您的路由文件中：

```
Router::parseExtensions('json'); 
```

然后创建一个视图，`/View/Controller/json/action.ctp`用您的控制器和动作名称替换“控制器”和“动作”。视图将如下所示：

```
echo json_encode($this->validationErrors); 
```

您还需要在`/View/Layouts/json/default.ctp`.

```
echo $content_for_layout; 
```

您可以像正常操作一样访问它，但使用`.json`扩展名，例如`http://example.com/controller/action.json`.

# ios - 搜索 NSData 末尾附近的字节时出现 NSRangeException

> ID：11013735
> 
> 赞同：3
> 
> 时间：2012-06-13T11:17:48.450
> 
> 标签：ios, objective-c, cocoa-touch, nsrange

我想检查我的应用程序中文件的最后 2 个字节，以确保它们没有损坏 .jpg

`rangeOfData:options:range:`看起来是个不错的选择，但我很难弄清楚如何获得合适的`NSRange`. 我正在寻找的范围是从接近末尾开始`NSData`，直到结束。

这是我到目前为止所拥有的：

```
NSData *imageData = [NSData dataWithContentsOfFile:filePath];
NSRange range = {([imageData length]-8),[imageData length]};
NSString *str = @"FFD9";
NSData *jpgTest = [str dataUsingEncoding:NSUTF8StringEncoding];
NSRange found = [imageData rangeOfData:jpgTest options:NSDataSearchBackwards range:range]; 
```

这是我得到的错误：

> ** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[NSConcreteData rangeOfData:options:range:]: range {14954, 14962} enxceeds data length 14962”

如何正确获取范围以搜索我的最后几个字节`NSData`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T11:22:09.913

的第二个成员`NSRange`不是范围的终点，而是它的长度。所以在你的情况下应该是：

```
NSRange range = {([imageData length]-8), 8}; 
```

# wordpress - Wordpress 在 php 类别中推送帖子

> ID：11013740
> 
> 赞同：0
> 
> 时间：2012-06-13T11:17:58.520
> 
> 标签：wordpress

我有一个条件语句，当条件变为真时，我想将特定帖子推送到特定类别。

就像是`wp_push_post($post, $category)`

是否存在完成这项工作的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:22:26.997

采用

```
 <?php wp_insert_post( $post, $wp_error ); ?> 
```

和

```
$post = array(
  'ID' => [ <post id> ] //Are you updating an existing post?
  'menu_order' => [ <order> ] //If new post is a page, sets the order should it appear in the tabs.
  'comment_status' => [ 'closed' | 'open' ] // 'closed' means no comments.
  'ping_status' => [ 'closed' | 'open' ] // 'closed' means pingbacks or trackbacks turned off
  'pinged' => [ ? ] //?
  'post_author' => [ <user ID> ] //The user ID number of the author.
  'post_category' => [ array(<category id>, <...>) ] //Add some categories.
  'post_content' => [ <the text of the post> ] //The full text of the post.
  'post_date' => [ Y-m-d H:i:s ] //The time post was made.
  'post_date_gmt' => [ Y-m-d H:i:s ] //The time post was made, in GMT.
  'post_excerpt' => [ <an excerpt> ] //For all your post excerpt needs.
  'post_name' => [ <the name> ] // The name (slug) for your post
  'post_parent' => [ <post ID> ] //Sets the parent of the new post.
  'post_password' => [ ? ] //password for post?
  'post_status' => [ 'draft' | 'publish' | 'pending'| 'future' | 'private' ] //Set the status of the new post. 
  'post_title' => [ <the title> ] //The title of your post.
  'post_type' => [ 'post' | 'page' | 'link' | 'nav_menu_item' | custom post type ] //You may want to insert a regular post, page, link, a menu item or some custom post type
  'tags_input' => [ '<tag>, <tag>, <...>' ] //For tags.
  'to_ping' => [ ? ] //?
  'tax_input' => [ array( 'taxonomy_name' => array( 'term', 'term2', 'term3' ) ) ] // support for custom taxonomies. 
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:54:14.723

另一个有趣的方法是使用 $wpdb：[http ://codex.wordpress.org/Class_Reference/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)

# javascript - Javascript：在字符串中替换类似chan的回复

> ID：11013742
> 
> 赞同：0
> 
> 时间：2012-06-13T11:18:14.050
> 
> 标签：javascript, replace, quote, reply

我在这里是因为我需要帮助解决这个问题。所以我有这个字符串（例如）。哦，显然`&gt;&gt;`显示为>>。

```
Lorem ipsum dolor sit amet &gt;&gt;21, consetetur sadipscin&gt;&gt;22g elitr.

&gt;&gt;11 I agree.

&gt;&gt;61 Lorem ipsumdur. See &gt;&gt;36 
```

我现在要做的是：替换

```
&gt;&gt;INTEGER 
```

具有以下内容：

```
<a href="javascript:void(0);" onclick="scroll(INTEGER)">&gt;&gt;INTEGER</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:24:50.617

试试这个 ：

```
yourString.replace(/&gt;&gt;[0-9]+/g,'firstPart'+'$&'+'secondPart'); 
```

有关详细信息，请参阅[javascript 替换方法](http://www.w3schools.com/jsref/jsref_replace.asp)。其中 "$&" ，插入匹配的子字符串。所以最终的代码是：

```
yourString.replace(/&gt;&gt;[0-9]+/g,'<a href="javascript:void(0);" onclick="alert($1);">'+'$&'+'<\/a>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:38:07.537

您只需在滚动功能中调用**替换。**

ej

```
var stringToReplace = 'Lorem ipsum dolor sit amet &gt;&gt;21, consetetur sadipscin&gt;&gt;22g elitr......',
textReplaced = ' your new value here';

function scroll(integer){

   return stringToReplace.replace(new RegExp('&gt;&gt;'+integer,'g'),textReplaced);

} 
```

# java - 使用 Java POI 覆盖 Excel 文件

> ID：11013747
> 
> 赞同：1
> 
> 时间：2012-06-13T11:18:40.650
> 
> 标签：java, apache-poi

我是 Java POI 的新手，我正在尝试使用 Java POI 覆盖一个 excel 文件。让我说清楚，我不想每次构建代码时都打开一个新的 .xls 文件，但是我写的代码确实如此这样做的目的是，我将在 excel 上构建图表并从数据库中读取图表的值，然后使用 Java POI 将其写入 excel 文件。这是我的代码：

```
HSSFWorkbook workbook = new HSSFWorkbook();
HSSFSheet firstSheet = workbook.createSheet("oldu");
HSSFSheet secondSheet = workbook.createSheet("oldu2");

HSSFRow rowA = firstSheet.createRow(6);
HSSFCell cellA = rowA.createCell(3);
cellA.setCellValue(new HSSFRichTextString("100"));
cellA.setCellValue(100);

HSSFRow rowB = secondSheet.createRow(0);
HSSFCell cellB = rowB.createCell(0);
cellB.setCellValue(new HSSFRichTextString("200"));

FileOutputStream fos = null;
try {
    fos = new FileOutputStream(new File("CreateExcelDemo.xls"));
    workbook.write(fos);
} catch (IOException e) {
    e.printStackTrace();
} finally {
    if (fos != null) {
        try {
            fos.flush();
            fos.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:28:14.733

始终使用相同的文件名，当您运行程序时，它将覆盖该文件。

**编辑** 如果您想修改现有的 excel 文件，请查看[此处](http://poi.apache.org/spreadsheet/how-to.html#Reading+or+modifying+an+existing+file)并向下滚动到“读取或修改现有文件”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:41:04.877

问题是 Apache POI 不支持 Excel 文件格式的所有功能，包括图表。因此无法使用 POI 生成图表，并且在使用 POI 打开现有 Excel 文件并对其进行修改时，Excel 文件中的一些当前“对象”可能会丢失，因为 POI 无法处理它，并且在写入时，只写入生成的新信息和可以处理的现有信息。

Apache 认为这是 POI 的缺陷之一。

我们对现有的 Excel 文件做了类似的处理，在上面填充了新的数据，但是现有的 Excel 文件只包含格式样式，它们是使用 POI 保留的，但我认为图表很有问题。尝试使用 POI 填充数据来更新现有图表是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T06:58:22.550

```
import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
import org.apache.poi.ss.usermodel.*;

import java.io.*;
import java.util.List;

public class WriteExcel {
    public static void writeFile1(List dataList , String path , int columnCount,int forwardIndex)  throws InvalidFormatException, IOException {

        try {
            FileInputStream inputStream = new FileInputStream(new File(path));
            Workbook workbook = WorkbookFactory.create(inputStream);

            Sheet sheet = workbook.getSheetAt(0);
            int rowCount = 1;

            for ( int i = 0+forwardIndex ; i < dataList.size(); i++) {
                Row row = sheet.createRow(++rowCount);
              //  int columnCount = 0;

                Cell cell = row.createCell(columnCount);
                cell.setCellValue((String) dataList.get(i));
            }

            inputStream.close();

            FileOutputStream outputStream = new FileOutputStream(path);
            workbook.write(outputStream);
            workbook.close();
            outputStream.close();

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
import org.apache.poi.ss.usermodel.*;

import java.io.*;
import java.util.List;

public class WriteExcel {
    public static void writeFile1(List dataList , String path , int columnCount,int forwardIndex)  throws InvalidFormatException, IOException {

        try {
            FileInputStream inputStream = new FileInputStream(new File(path));
            Workbook workbook = WorkbookFactory.create(inputStream);

            Sheet sheet = workbook.getSheetAt(0);
            int rowCount = 1;

            for ( int i = 0+forwardIndex ; i < dataList.size(); i++) {
                Row row = sheet.createRow(++rowCount);
              //  int columnCount = 0;

                Cell cell = row.createCell(columnCount);
                cell.setCellValue((String) dataList.get(i));
            }

            inputStream.close();

            FileOutputStream outputStream = new FileOutputStream(path);
            workbook.write(outputStream);
            workbook.close();
            outputStream.close();

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-19T07:23:30.883

```
import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
import org.apache.poi.ss.usermodel.*;

import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.HashMap;
import java.util.Map;

public class UserInput {

    public static Map getUserInput() throws InvalidFormatException, IOException {
        String userName = System.getProperty("user.name");
        String path = "";
        int indexofColumn = 10;
        Map inputFromExcel = new HashMap();
        InputStream inp = new FileInputStream(path);
        int ctr = 4;
        Workbook wb = WorkbookFactory.create(inp);
        Sheet sheet = wb.getSheetAt(0); // Mention Sheet no. which you want to read
        Row row = null;
        Cell cell = null;
            try{
                row = sheet.getRow(ctr);
                cell = row.getCell(indexofColumn); //Mention column no. which you want to read
                inputFromExcel.put("NBKID",cell.toString()) ;
                row = sheet.getRow(ctr+1);
                cell = row.getCell(indexofColumn);
                inputFromExcel.put("Password", cell.toString());
                row = sheet.getRow(ctr+2);
                cell = row.getCell(indexofColumn);
                inputFromExcel.put("NBKIDEmail",cell.toString());
                row = sheet.getRow(ctr+3);
                cell = row.getCell(indexofColumn);
                inputFromExcel.put("sourceExcel" ,cell.toString());

            } catch(Exception e) {
            }

        return inputFromExcel;
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-19T07:28:12.960

```
import java.util;

public class Main {
    public static void main(String[] args) {
        List<String> partyIdList = new ArrayList<String>();
        List<String> phNoList = new ArrayList<String>();
        String userName = System.getProperty("user.name");
        String path = "";
            try {
                Map data = new HashMap(UserInput.getUserInput());
                partyIdList = ReadExcel.getContentFromExcelSheet(data.get("sourceExcel").toString(),0);
                phNoList = ReadExcel.getContentFromExcelSheet(data.get("sourceExcel").toString(),1);
                WriteExcel.writeFile1(partyIdList, path,0,1);
                WriteExcel.writeFile1(phNoList,path,1,0);

            } catch (Exception e) {
                throw new RuntimeException("Error while read excel Sheet" + e);
            }

    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-03-19T09:22:44.423

```
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.WorkbookFactory;

public class ReadExcel {
    public static List getContentFromExcelSheet(String path ,int indexofColumn) throws InvalidFormatException, IOException {
        //System.out.println(path);
        List<String> ItemList = new ArrayList();
        InputStream inp = new FileInputStream(path);
        int ctr = 0;
        Workbook wb = WorkbookFactory.create(inp);
        Sheet sheet = wb.getSheetAt(0); // Mention Sheet no. which you want to read
        Row row = null;
        Cell cell = null;
        boolean isNull = false;
        do{
            try{
                row = sheet.getRow(ctr);
                cell = row.getCell(indexofColumn); //Mention column no. which you want to read
                ItemList.add(cell.toString());
                //   System.out.println(cell.toString());
                ctr++;
            } catch(Exception e) {
                isNull = true;
            }

        }while(isNull!=true);
        inp.close();

        return ItemList;
    }
} 
```

# php - 防止 php 文件 htacces

> ID：11013754
> 
> 赞同：0
> 
> 时间：2012-06-13T11:19:07.983
> 
> 标签：php, .htaccess, iframe, security

我如何防止访问带有 htacces 的文件夹中的所有 php 文件，但是当我希望通过 iframe 访问时可以正常工作？

我不希望用户通过 url 访问，因为这将是一个安全错误..

有什么答案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:31:15.623

通过 iframe 访问页面与通过 url 访问页面相同。如果您以这种方式使页面无法访问，则 iframe 也将无法加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:36:25.463

这是不可能的。你无法拥有你想要的。您可以将 iframe 视为浏览器中的浏览器。iframe 向您的服务器发出独立的新 GET 请求以获取内容的 URL，但没有任何迹象表明它正在 iframe 中使用。

但是，一旦页面已交付给客户端，您可以让页面运行一些 javascript 来检查它是否是 iframe，如果不是，则删除它自己的内容。

```
if (top === self) {
  // not in an iframe. delete all the content
  document.body.innerHTML = 'Not allowed';
} 
```

您可以将其反转以提供不可见的内容，但如果有 javascript 使内容可见`top != self`

现在，当然，这只会影响内容对用户的可见性。它仍在交付中，高级用户仍然可以与之交互。这只是一点视觉技巧 - 安全性为零。

# ruby-on-rails - rails资产管道“无法分配内存-nodejs”

> ID：11013755
> 
> 赞同：30
> 
> 时间：2012-06-13T11:19:21.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline

我们刚刚从 Rails 3.0.7 升级到 Rails 3.2.5，并为临时服务器使用了资产管道编译，但有时我们会遇到这个异常！

```
Showing /var/rails/appname/app/views/common/_my_partial.html.haml where line # raised:

Cannot allocate memory - nodejs /tmp/execjs20120613-17090-thoc8f.js 2>&1

Extracted source (around line #):

Trace of template inclusion: app/views/layouts/application.html.haml 
```

尽管例如在咖啡脚本或图像文件夹中没有做任何花哨或巨大的内存分配！

谢谢...

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-08-07T16:54:17.810

花三分钟（如果键入速度很快，可能需要两分钟）将交换文件添加到服务器很简单。

如果您正在运行 Ubuntu（不确定这对其他 Linux 版本的效果如何），请按照 DigitalOcean 的本教程进行操作：

[https://www.digitalocean.com/community/articles/how-to-add-swap-on-ubuntu-12-04](https://www.digitalocean.com/community/articles/how-to-add-swap-on-ubuntu-12-04)

瞧！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-08-03T13:25:56.280

基于提供的教程链接`Kyle Carlson`

* * *

检查交换空间

`sudo swapon -s`

一个空列表将确认您没有启用任何交换文件：

`Filename Type Size Used Priority`

创建并启用交换文件 (swapfile)

`sudo dd if=/dev/zero of=/swapfile bs=1024 count=256k`

创建一个linux交换区：

`sudo mkswap /swapfile`

输出：

```
Setting up swapspace version 1, size = 262140 KiB no label, UUID=103c4545-5fc5-47f3-a8b3-dfbdb64fd7eb 
```

激活交换文件：

`sudo swapon /swapfile`

检查您是否可以看到交换摘要。

```
swapon -s

Filename                Type        Size    Used    Priority
/swapfile                               file        262140  0   -1 
```

完毕！

* * *

**使交换文件永久化**

`sudo nano /etc/fstab`

粘贴到以下行：

`/swapfile none swap sw 0 0`

文件中的 Swappiness 应设置为 10。跳过这一步可能会导致性能不佳，而将其设置为 10 将导致 swap 充当紧急缓冲区，防止内存不足崩溃。

```
echo 10 | sudo tee /proc/sys/vm/swappiness
echo vm.swappiness = 10 | sudo tee -a /etc/sysctl.conf 
```

将交换文件的正确权限设置为公众不可读：

```
sudo chown root:root /swapfile 
sudo chmod 0600 /swapfile 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-01-19T19:07:18.597

根据@tohi 的回答，我创建了一个脚本，您可以将其粘贴到终端中。

```
# Turn it (off) on
# sudo swapoff -a
sudo swapon -s

# Create a swap file
# 512k --> Swapfile of 512 MB
sudo dd if=/dev/zero of=/swapfile bs=1024 count=512k

# Use the swap file
sudo mkswap /swapfile
sudo swapon /swapfile

# make sure the swap is present after reboot:
sudo echo " /swapfile       none    swap    sw      0       0 " >> /etc/fstab

# Set the swappiness (performance - aware)
echo 10 | sudo tee /proc/sys/vm/swappiness
echo vm.swappiness = 10 | sudo tee -a /etc/sysctl.conf           

# Change the permission to non-world-readable
sudo chown root:root /swapfile 
sudo chmod 0600 /swapfile 
```

**更新**：如果您稍后需要调整大小，`/swapfile`请查看此答案：[https ://askubuntu.com/a/763717/508371](https://askubuntu.com/a/763717/508371)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T12:14:57.737

我们联系了提供商的支持，他们在 2 条消息中得到了回复，如下所示：

1.  有两件事可能导致这种情况：要么**您确实经常耗尽内存，**要么**您的 Webby 没有配置交换**。

我们有系统管理员检查它，我们会尽快回复您的票。

1.  **您的交换因某种原因被禁用**，这就是您遇到内存问题的原因。**我修复了 fstab 条目**，并在正确的分区上启用了交换。你现在应该没事了。

直到现在这个错误还没有显示:) 希望它在未来也不会出现......

感谢和好运 ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-08T12:39:14.347

也许它有助于：

```
RAILS_ENV=production rake assets:clean 
```

重新启动您的网络服务器/例如

```
service apache2 restart 
```

然后：

```
RAILS_ENV=production rake assets:precompile 
```

# spring-mvc - 如何使用 Spring 的 REST 模板传递自定义对象

> ID：11013758
> 
> 赞同：13
> 
> 时间：2012-06-13T11:19:28.200
> 
> 标签：spring-mvc, spring-3, rest-client, resttemplate

我需要使用 RESTTemplate 将自定义对象传递给我的 REST 服务。

```
RestTemplate restTemplate = new RestTemplate();
MultiValueMap<String, Object> requestMap = new LinkedMultiValueMap<String, Object>();
...

requestMap.add("file1", new FileSystemResource(..);
requestMap.add("Content-Type","text/html");
requestMap.add("accept", "text/html");
requestMap.add("myobject",new CustomObject()); // This is not working
System.out.println("Before Posting Request........");
restTemplate.postForLocation(url, requestMap);//Posting the data.
System.out.println("Request has been executed........"); 
```

我无法将自定义对象添加到 MultiValueMap。请求生成失败。

有人可以帮我找到解决方法吗？我可以简单地传递一个字符串对象而不会出现问题。用户定义的对象会造成问题。

感谢任何帮助！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-20T14:34:14.357

[您可以使用 Jackson 相当简单地做到这一点](http://krams915.blogspot.com/2011/02/spring-3-rest-web-service-provider-and_28.html)。

这是我为一个简单 POJO 的帖子所写的内容。

```
@XmlRootElement(name="newobject")
@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL)
public class NewObject{
    private String stuff;

    public String getStuff(){
        return this.stuff;
    }

    public void setStuff(String stuff){
        this.stuff = stuff;
    }
} 
```

* * *

```
....
//make the object
NewObject obj = new NewObject();
obj.setStuff("stuff");

//set your headers
HttpHeaders headers = new HttpHeaders();
headers.setContentType(MediaType.APPLICATION_JSON);

//set your entity to send
HttpEntity entity = new HttpEntity(obj,headers);

// send it!
ResponseEntity<String> out = restTemplate.exchange("url", HttpMethod.POST, entity
    , String.class); 
```

上面的链接应该告诉您如何在需要时进行设置。它是一个很好的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T06:55:48.360

在 RestController 中接收 NewObject

```
@PostMapping("/create") public ResponseEntity<String> createNewObject(@RequestBody NewObject newObject) { // do your stuff} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-07T22:49:12.580

你可以试试这个

```
 public int insertParametro(Parametros parametro) throws LlamadasWSBOException {
        String metodo = "insertParam";
        String URL_WS = URL_WS_BASE + metodo;

        Integer request = null;

        try {
            logger.info("URL_WS: " + URL_WS);

            request = restTemplate.postForObject(URL_WS, parametro, Integer.class);

        } catch (RestClientResponseException rre) {
            logger.error("RestClientResponseException insertParametro [WS BO]: " + rre.getResponseBodyAsString());
            logger.error("RestClientResponseException insertParametro [WS BO]: ", rre);
            throw new CallWSBOException(rre.getResponseBodyAsString());
        } catch (Exception e) {
            logger.error("Exception insertParametro[WS BO]: ", e);
            throw new CallWSBOException(e.getMessage());
        }
        return request;
    } 
```

# ajax - Sinatra + Ajax 加载动态内容

> ID：11013763
> 
> 赞同：0
> 
> 时间：2012-06-13T11:19:45.703
> 
> 标签：ajax, jquery, web, sinatra

我想创建一个页面，其中将使用 Ajax (JQuery) 填充动态信息。该信息将来自我需要在其他 URL 中执行的各种 GET。我将使用 Sinatra + JQuery 来实现这一点，但是由于我的 WEB 经验几乎为零，并且不知道如何正确处理它。这样做的必要条件是：

*   每次 GET 完成时，页面上都会出现一行新信息。
*   如果 GET 无法完成，页面上会显示默认信息。

到目前为止，我的想法是做这样的事情：

*   让我的控制器在线程内执行每个 GET。
*   每次线程结束时，无论成功与否，我都会通知视图结果并呈现部分
*   我将有尽可能多的部分（对于我必须做的每个 GET）
*   第一次加载页面时，我填写了默认信息，它们通过 AJAX 更新成功的 GET 响应

这似乎不是正确的方法，所以我在问已经做过类似事情或者在这方面有更多经验的人一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:00:43.850

您从一个`get('/'){}`包含默认消息（或任何其他 GET 路由）的简单路由开始。然后你有你想要在默认路由上显示的其他 GET 路由。在 Sinatra 中，您可以检查请求是否是 xhr 请求，`request.xhr?`如果您有 xhr 请求，则将 json 值返回到您的视图，否则拒绝请求或使用正确的 html 呈现视图。这是在您的 sinatra 后端。在您的视图中，您可以使用 JQuery 或任何其他 JS 库或普通 JS 来处理异步数据请求。您可以使用`ajax`JQuery 中的函数从您的路由请求数据，然后将它们添加到您的 DOM。就这么简单 ：）

现在您将不得不在 JQuery 站点上研究如何发出 ajax 请求以及如何将数据附加到现有 DOM。这里的所有都是它的。

# ios - IOS如何保留数据？

> ID：11013768
> 
> 赞同：1
> 
> 时间：2012-06-13T11:19:52.413
> 
> 标签：ios, uitabbarcontroller

我有一个应用程序，其中有一个 tabview 控制器。所有数据都是动态的，当我在一个选项卡上输入时，会加载数据，但是如果我更改选项卡并返回初始选项卡，我并没有丢失上面的数据，这太棒了。我现在的问题是我已经构建了一个新的视图控制器（在选项卡之外），当我进入它，然后回到选项卡时，我丢失了所有信息！

有没有办法保留初始数据？因此，当用户转到另一个视图并返回时，不必丢失数据。

还有一个问题。无论如何，定义应用程序中每个视图控制器都可用的变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:26:52.230

当您从一个选项卡移动到另一个选项卡时，数据不会改变您需要检查您的 中是否有一些特殊代码`viewWillAppear`，如果您在此函数中加载数据，您应该知道 viewWillAppear 在您旅行选项卡时被调用

关于全局数据，您可以在 appDelegate 类中定义它们，向 appDelegate 添加属性，然后您可以像这样访问它们

```
//Add this on the header of your class
#import "MyAppDelegate.h"

//Then access the delegate like this
MyAppDelegate *myAppDelegate = [UIApplication sharedApplication].delegate;
//Access your variables
myAppDelegate.myVariables; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:23:53.737

这个一般数据是什么？如果是对象，我会调用retain。但如果它是一种数据类型，请尝试将其设为静态并创建一个返回它的方法。或者您可以将它包装在一个对象中（例如 NSNumber，例如，如果它是一个浮点数、双精度数或整数等），然后调用该对象。

# php - mySQL：使用来自另一个表的 id 显示来自一个表的数据

> ID：11013772
> 
> 赞同：2
> 
> 时间：2012-06-13T11:20:10.267
> 
> 标签：php, mysql, database

我希望我的用户能够制作最喜欢的列表。

我在 mySQL 的数据库中有两个表。一个存储有关企业的信息，另一个存储唯一的用户 id 以及用户标记为收藏的第一个表中的 id。

**表格1**

```
<pre>
ID   | NAME | EMAIL      | PHONE    |
1    | Joe  | a@mail.com | 25634565 |
2    | John | b@mail.com | 43634565 |
3    | Jack | c@mail.com | 65634565 |
4    | James| d@mail.com | 43634565 |
5    | Julie| e@mail.com | 65634565 |
...
</pre> 
```

表 2

```
<pre>
  USERID   |  FAV1  |  FAV2  |  FAV3  | FAV...
2565325489 | 1      | 3      | 5      |
8596854785 | 3      | 2      | NULL   |
2356256263 | 5      | NULL   | NULL   |
...
</pre> 
```

我想要一个用户的输出（在这个例子中是表 2 中的第一个）：

```
<pre>
Joe  | a@mail.com | 25634565 |
Jack | c@mail.com | 65634565 |
Julie| e@mail.com | 65634565 |
</pre> 
```

我已经研究了 JOIN LEFT 和减去查询调用，但我无法让它工作。我对mySQL和PHP有基本的了解，但了解不多。

对于采取何种方法，我将不胜感激。

附言。如果有更好的方法来构建我的数据库，我很想知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:28:19.133

我会使用一个包含两个字段的表格 -`userID`并且`fav`- 为每个条目创建一个条目。进而...

`SELECT table1.name, table1.email, table1.phone FROM table1,table2 WHERE table2.fav = table1.id AND table2.userid = 2565325489`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:23:30.070

```
$result = mysqli_query('SELECT name,email,phone FROM t1 table1 LEFT JOIN table2 t2 ON t1.ID = t2.fav1');  

//iterate the results
while ($row = mysqli_fetch_array($result))
{
    echo $row['name']." ".$row['email']." "$row['phone'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:23:35.313

```
Select * from table1 InnerJoin (Select * from table2) as t4 on table1.ID=t4.FAV1 
```

# c# - 如何使用 Open XML 从 c# 对 Word 文档进行分页

> ID：11013773
> 
> 赞同：0
> 
> 时间：2012-06-13T11:20:16.640
> 
> 标签：c#, asp.net, openxml, export-to-word

例如，如何对 word 文档进行分页

*   如果有 10 页：

    第 1 页，共 10 页

    第 2 页，共 10 页...

*   如果有 15 页

    第 1 页，共 15 页

    15 个中的 2 个 ...

以此类推生成动态页数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-14T18:56:34.700

您提出问题已经三年了，但也许我可以帮助其他面临这个问题的人。

这是可以对word文档进行分页的代码。

```
string documentPath = @"C:\Temp\FooterPOC.docx";

using (WordprocessingDocument package =
    WordprocessingDocument.Create(
    documentPath, WordprocessingDocumentType.Document))
{
    {
        MainDocumentPart objMainDocumentPart = package.AddMainDocumentPart();
        Document objDocument = new Document();
        objMainDocumentPart.Document = objDocument;
        Body objBody = new Body();
        SectionProperties objSectionProperties = new SectionProperties();
        FooterPart objFootPart = objMainDocumentPart.AddNewPart<FooterPart>();
        Footer objFooter = new Footer();
        objFootPart.Footer = objFooter;

        Paragraph objParagraph_1 = new Paragraph();
        ParagraphProperties objParagraphProperties = new ParagraphProperties();
        ParagraphStyleId objParagraphStyleId = new ParagraphStyleId() { Val = "Footer" };

        objParagraphProperties.Append(objParagraphStyleId);
        Justification objJustification = new Justification() { Val = JustificationValues.Right };
        objParagraphProperties.Append(objJustification);
        objParagraph_1.Append(objParagraphProperties);

        Run objRun_1 = new Run();
        Text objText_1 = new Text() { Space = SpaceProcessingModeValues.Preserve };
        objText_1.Text = "Página ";
        objRun_1.Append(objText_1);
        objParagraph_1.Append(objRun_1);

        Run objRun_2 = new Run();
        FieldChar objFieldChar_1 = new FieldChar() { FieldCharType = FieldCharValues.Begin };
        objRun_2.Append(objFieldChar_1);
        objParagraph_1.Append(objRun_2);

        Run objRun_3 = new Run();
        FieldCode objFieldCode_1 = new FieldCode();
        objFieldCode_1.Text = "PAGE";
        objRun_3.Append(objFieldCode_1);
        objParagraph_1.Append(objRun_3);

        Run objRun_6 = new Run();
        FieldChar objFieldChar_3 = new FieldChar() { FieldCharType = FieldCharValues.End };
        objRun_6.Append(objFieldChar_3);
        objParagraph_1.Append(objRun_6);

        Run objRun_7 = new Run();
        Text objText_3 = new Text() { Space = SpaceProcessingModeValues.Preserve };
        objText_3.Text = " de ";
        objRun_7.Append(objText_3);
        objParagraph_1.Append(objRun_7);

        Run objRun_8 = new Run();
        FieldChar objFieldChar_4 = new FieldChar() { FieldCharType = FieldCharValues.Begin };
        objRun_8.Append(objFieldChar_4);
        objParagraph_1.Append(objRun_8);

        Run objRun_9 = new Run();
        FieldCode objFieldCode_2 = new FieldCode();
        objFieldCode_2.Text = "NUMPAGES";
        objRun_9.Append(objFieldCode_2);
        objParagraph_1.Append(objRun_9);

        Run objRun_12 = new Run();
        FieldChar objFieldChar_6 = new FieldChar() { FieldCharType = FieldCharValues.End };
        objRun_12.Append(objFieldChar_6);
        objParagraph_1.Append(objRun_12);

        objFooter.Append(objParagraph_1);

        string strFootrID = objMainDocumentPart.GetIdOfPart(objFootPart);
        FooterReference objFooterReference = new FooterReference()
        {
            Type = HeaderFooterValues.Default,
            Id = strFootrID
        };

        objSectionProperties.Append(objFooterReference);
        objBody.Append(objSectionProperties);
        objMainDocumentPart.Document.Append(objBody);
    }
} 
```

[我在这里](https://social.msdn.microsoft.com/forums/office/en-US/db2f7b5d-da47-48d5-ab3f-2fe10ae9e5a3/handling-page-numbers-via-open-xml)找到了这段代码。有点小问题，但对我帮助很大！

有几行我认为没有必要，所以我删除了它并且效果很好，但我只是 openXML 的新手，所以也许它们实际上是必要的。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:32:25.230

Open Xml SDK 不提供应用程序行为，例如布局（例如 WordprocessingML 文档的分页）或重新计算功能。你可以阅读更多@ [http://blogs.msdn.com/b/brian_jones/archive/2008/10/06/open-xml-format-sdk-2-0.aspx](http://blogs.msdn.com/b/brian_jones/archive/2008/10/06/open-xml-format-sdk-2-0.aspx)

# c# - 如何放大 DirectShow 窗口的特定区域？

> ID：11013775
> 
> 赞同：0
> 
> 时间：2012-06-13T11:20:24.953
> 
> 标签：c#, directshow, directshow.net

![在此处输入图像描述](../Images/c997dfa6e432b206ac3ffc9c21a20564.png)

我正在尝试放大表示视频窗口宽度的标记 A 和标记 B（它是 RangeBar）之间的 DirectShow 窗口区域。我试过使用 SetWindowPosition 但所做的只是移动视频窗口。

我是 DirectShow 的新手，请帮忙！

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:00:38.617

您可以使用[`IVMRMixerControl`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390456%28v=vs.85%29.aspx)渲染器的界面放大视频的一部分。

`IVMRFilterConfig::SetNumberOfStreams`您需要通过调用(2)将过滤器切换到“混合模式”（在连接过滤器之前）。连接渲染器。现在您可以通过调用来设置要显示的矩形`IVMRMixerControl::SetOutputRect`。您需要使用标准化值提供您想要看到的矩形。这意味着，如果您想放大，您将设置`{-0.5, -0.5, 1.5, 1.5}`，如果您想缩小，您将设置`{0, 0, 1, 1}`。

# nginx - PHP：可上传文件的最大数量，$_FILES 最多 25 个条目

> ID：11013776
> 
> 赞同：2
> 
> 时间：2012-06-13T11:20:25.920
> 
> 标签：nginx, php

我有一个相当旧的页面，其中有很多文件上传输入字段。问题是，只有前 25 个上传字段的数据在发布后被填充。

我正在使用 nginx+php5.3-fpm

`max_file_uploads`设置为200，所以这不是问题。除了文件输入之外，还有很多其他输入字段，它们都可以正常到达。

任何想法，我应该在哪里看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:28:30.070

我知道了！这实际上是 suhosin 自己的限制：

suhosin.upload.max_uploads 设置为 25

# heroku - 与 Zerigo 的裸域 heroku

> ID：11013777
> 
> 赞同：4
> 
> 时间：2012-06-13T11:20:26.797
> 
> 标签：heroku

你好这里是我的问题。我有一个域 example.com 和 example.herokuapp.com。该网站不建议安装指向heroku的A记录，这使得裸域不可能，所以我被迫使用www.example.com而不是example.com。

我在互联网上看到这实际上是可能的，到目前为止我听说过 Zerigo。你有什么解决方法吗？

谢谢，n

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T15:10:11.030

是的，您要么需要将 example.com 的 A 记录指向 Heroku Ips，要么最好还是使用 DNSimple 的 ALIAS 来使用 CNAME。

更多信息：[https ://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords)

# javascript - 检查是否返回我是否在智能手机上的 JavaScript？

> ID：11013778
> 
> 赞同：5
> 
> 时间：2012-06-13T11:20:31.070
> 
> 标签：javascript, jquery, device-detection

我想检查我的一个 JavaScript 函数，以确定我是否在智能手机上，然后根据结果决定是否运行该函数。

**在 JavaScript 中检测/检查智能手机（或一般的手持设备）的最佳方法是什么？**

例如

```
if (user is on a smartphone) {
//run this code if on a phone
} else {
//run this code if not on a phone
} 
```

**如果没有一种确定的方法来检查电话，那么在决定运行哪个代码之前，我应该执行的最佳检查选择是什么？**

**编辑/更新：**这个类似帖子的答案和评论应该给我一些继续 -[在 jQuery 中检测移动设备的最佳方法是什么？](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:02:51.287

Ye olde浏览器嗅探似乎是解决方案

```
if( navigator.userAgent.match(/Android/i)
 || navigator.userAgent.match(/webOS/i)
 || navigator.userAgent.match(/iPhone/i)
 || navigator.userAgent.match(/iPad/i)
 || navigator.userAgent.match(/iPod/i)
 || navigator.userAgent.match(/BlackBerry/i)
 ){
 // some code..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:30:02.523

你可以试试 twitter 引导程序， http: [//twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)。特别是响应式设计部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-22T14:59:04.307

您可以使用[Categorizr](https://github.com/skookum/categorizr.js) JS 库来测试用户的设备是手机、平板电脑、智能电视还是台式机。Categorizr 使用用户代理嗅探，因此您应该留意脚本的更新，因为用户代理会随着时间的推移而“进化”。

以下是您如何使用 Categorizr 检查用户是否使用智能手机，而不是智能电视、台式机或平板电脑：

```
if (categorizr.isMobile) {
    //run this code if on a phone
} else {
    //run this code if not on a phone
} 
```

# ruby-on-rails - 轨道中的外部链接路线

> ID：11013779
> 
> 赞同：0
> 
> 时间：2012-06-13T11:20:37.137
> 
> 标签：ruby-on-rails, ruby, url, path, routes

很简单。在制作典型的 restful rails 应用程序时，我们会将所有路线保留在我们的应用程序中。很少有路径链接到外部路径。但如果我们要这样做，我想知道最好的方法是什么。

典型的家居搭配

```
match "home"=>"appcontroller#home" 
```

如果我们将外部 url 与路径变量匹配。我们可能会做类似下面的事情？

# 第一种方法

路由.rb

```
match "external"=>"http:/www.google.ie" 
```

然后在我们的 html.erb

```
<%= link_to 'Google', external_path %> 
```

请注意，这实际上不是合法的做事方式，但可能存在类似的事情。它似乎非常接近当前在轨道中定义路径的方式，但具有外部着陆。

# 第二种方法

我在别处看到的做法是为外部 URL 创建一个全局变量并在链接中使用它。例如。在 environment.rb 或 production.rb 或其他

```
@ext_path="http:/www.google.ie" 
```

然后在我们的 html.erb

```
<%= link_to 'Google', @ext_path %> 
```

* * *

所以回顾一下。在 Rails 中使用外部 URL 的最佳方式是什么？路径？变量？其他？任何输入表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:28:51.597

我只会在视图中保留外部链接。因为这个链接与应用程序的任何逻辑都无关，它只是一个 UI 元素。

所以，这种方式在我看来是最好的：

```
<%= link_to 'Google', "http://google.ie" %> 
```

如果你需要多次使用这个元素，也许把这段代码带入帮助器是有意义的，例如：

```
def search_engine_link
  link_to 'Google', "http://google.ie"
end 
```

而且我真的认为这不是引入更复杂逻辑的好地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:29:22.987

我可能会使用围绕常量的应用程序范围的助手。

助手，因为我宁愿在模板中看不到常量，也不想看到环境特定值的常量。

我可能会使用散列来存储 URL：这会使它们更紧密地耦合，并允许环境范围的默认值，并根据需要覆盖每个环境。

帮助程序可以使用符号，或者从哈希键生成，以生成`xxx_path`方法，就像`routes.rb`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-30T22:27:53.517

我发现自己需要这样做，因为我有一个指向外部站点的链接，我打算在未来将其本地化。

在 Rails 4 中，您可以将其添加到`config/routes.rb`：

```
get '/contact', 
      to: redirect('http://www.example.com/contact.php'), 
      as: 'contact_us' 
```

以额外重定向为代价，您可以编写：

```
<%= link_to "Contact us", contact_us_path %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-20T12:27:37.627

## 301 重定向

关于 `redirect(...)`在路由文件中使用的注释。`Redirect`生成一个 301 重定向，这是一个特定的东西，谷歌将其描述为...

> 如果您需要更改搜索引擎结果中显示的页面 URL，我们建议您使用服务器端 301 重定向。这是确保将用户和搜索引擎定向到正确页面的最佳方式。301 状态代码表示页面已永久移动到新位置。

因此，在您的路由中使用 301 重定向来链接到外部网站可能会起作用，但该重定向携带的状态信息不正确。

如果您在 Web 应用程序中移动了页面并希望将其告知 Google 索引（以及其他所有人），那么请务必使用`redirect()`确保 Google 更新索引，但对于标准外部链接使用您的网络应用程序。

# java - Java ActiveMQ 发送大对象抛出 EOFException

> ID：11013782
> 
> 赞同：0
> 
> 时间：2012-06-13T11:20:44.380
> 
> 标签：java, activemq, large-object-heap, eofexception

使用 AciveMQ 发送大型 java 对象时出现 java.io.EOFException。

下面是我要发送的大对象

```
class TestDataBean implements Serializable
{
private String testName = "TestName";
private String testDesc = "testDesc";

private String bigData = getBigString();

@Override
public String toString() {
    return testName +" : "+testDesc+" : "+bigData.length();
}

private static String getBigString() 
{
    StringBuffer stringBuffer = new StringBuffer();

    for(int i=0;i<1000; i++)
    {
        stringBuffer.append("tsssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss");
    }

    return stringBuffer.toString();
} 
```

}

下面是堆栈跟踪。

```
java.io.EOFException
    at java.io.ObjectInputStream$PeekInputStream.readFully(Unknown Source)
at java.io.ObjectInputStream$BlockDataInputStream.readUTFBody(Unknown Source)
at java.io.ObjectInputStream$BlockDataInputStream.readLongUTF(Unknown Source)
at java.io.ObjectInputStream.readString(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)Recieved MSG : 0 : null

at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at poc_publisher_subsciber.common.CommonUtil.getObject(CommonUtil.java:18)
at blob_messages.bsr_clients.GenesisMessageListener.onMessage(GenesisMessageListener.java:30)
at org.apache.activemq.ActiveMQMessageConsumer.dispatch(ActiveMQMessageConsumer.java:1298)
at org.apache.activemq.ActiveMQSessionExecutor.dispatch(ActiveMQSessionExecutor.java:131)
at org.apache.activemq.ActiveMQSessionExecutor.iterate(ActiveMQSessionExecutor.java:202)
at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:122)
at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:43)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

生产者表明它发送了一个正确的对象。但在消费者方面，它会抛出异常。

我也尝试过使用 ActiveMQConnectionFactory 进行以下配置

```
ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(url);
        factory.setProducerWindowSize(1024000000);
        factory.setSendTimeout(600000); 
```

请建议我一些解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:11:49.127

对不起，这是我的错误。让我解释一下我在做什么。- 我将消息作为 StreamMessage 发送 - 并在字节数组中读取此消息 我发送的数据大小约为 70K 字节，作为一个愚蠢的错误，我拥有的数组只有 10K 容量。n 所以我得到了这个 EOFException。对不起，我占用你的时间。并发布此消息，希望没有其他人会犯类似的错误 :) 谢谢。

# haskell - Haskell 为 Int 和 Double 打字

> ID：11013783
> 
> 赞同：2
> 
> 时间：2012-06-13T11:20:44.917
> 
> 标签：haskell, typing

只是关于打字的快速问题。

如果我输入 ghci`:t [("a",3)]`我会回来`[("a",3)] :: Num t => [([Char], t)]`

在文件中，我将类型定义为：

```
type list = [(String, Int)] 
```

如何更改类型以使用我定义的类型同时支持`Int`s 和`Double`s，类似于我在 ghci 中编写的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:25:19.353

首先，您的代码中有错误。数据类型必须以大写字母开头：

```
type List = [(String, Int)] 
```

（请注意，这`String`是 的类型同义词`[Char]`，即它们是完全相同的类型）。我们将以迂回的方式解决您的问题。请注意，您可以在元组的第二个槽中使类型完全通用：

```
type List a = [(String,a)] 
```

以便您的类型参数化任意类型。如果您需要专门针对某个函数中的数字类型，那么您可以为每个函数单独进行专门化。例如：

```
foo :: Num a => List a
foo = [("Hello",1),("World",2)] 
```

我们可以在数据类型中包含一个约束，如下所示：

```
data Num a => List a = List [(String,a)] 
```

但是您仍然必须`Num a => ...`在每个函数声明中包含约束，因此您实际上不会保存任何类型。出于这个原因，Haskell 程序员通常遵循“不要在数据声明中包含类型约束”的规则。

# objective-c - 检索城市信息（酒店、餐厅、景点等）

> ID：11013784
> 
> 赞同：0
> 
> 时间：2012-06-13T11:20:48.387
> 
> 标签：objective-c, ios, xcode

我正在制作一个记录目的地（城市、州、国家、城镇、郊区等）的应用程序。**仅**使用此信息，我如何检索有关顶级企业的信息，其中包括：

*   购物广场
*   餐厅
*   景点
*   酒店
*   商店（书店、CD店等）

他们的价格（如果有的话）、评论，甚至可能是照片？我不是该领域的专家，更多的是中级程序员，所以我知道这将非常困难......那么是否有一个 API（如果是一个简单的 API）可以提供信息？是否有任何教程或示例代码作为我可以深入研究的基本模板或示例？这是一项雄心勃勃且艰巨的任务吗？

我真正要找的是在线教程或示例代码，因为通常提供的这些教程非常模糊。所以请尽量不要回答：“使用yelp”

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:13:24.103

我建议使用 Yelp 的 API。[http://www.yelp.com/developers/getting_started](http://www.yelp.com/developers/getting_started)

# javascript - javascript 日期参考或值

> ID：11013787
> 
> 赞同：2
> 
> 时间：2012-06-13T11:21:05.267
> 
> 标签：javascript

我将日期存储在一个名为`MyDate`. 如果我写这个：

```
var TheDate = MyDate;

for (var i = 5; i > 0; i--) {
   TheDate = TheDate - i;
} 
```

我只是在改变`TheDate`还是我也在改变`MyDate`？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T11:28:34.000

它只会改变 TheDate。

看到这个[小提琴链接](http://jsfiddle.net/VrcRG/)

这是因为当您这样做时，`TheDate = TheDate - i`TheDate 不再被视为 Date 对象，而是很长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:25:33.430

对象是通过引用，所以它会改变这两个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:38:35.000

你可以简单地检查一下

```
var TheDate = MyDate;
for (var i = 5; i > 0; i--) 
{
   TheDate = TheDate - i;
   alert("TheDate = " + TheDate);
   alert("MyDate = " + MyDate);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-13T11:24:05.483

如果`MyDate`是对象：是，如果是标量：否

# c# - 将字符串值解析为日期时间值

> ID：11013791
> 
> 赞同：-1
> 
> 时间：2012-06-13T11:21:17.543
> 
> 标签：c#

我需要将字符串值解析为日期时间值，我有这种格式的日期：

```
DD.MM.YYYY 
```

我想以这种格式解析值：

```
YYYY-MM-DD 
```

我试着这样做：

```
DateTime.ParseExact(date_req, "yyyy-MM-dd", CultureInfo.InvariantCulture); 
```

但我有一个错误：字符串未被识别为有效的日期时间。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:23:03.580

如果您有格式中的字符串，`DD.MM.YYYY`为什么要传递`YYYY-MM-DD`给 ParseExact 函数？

试试这样：

```
string dateStr = "12.06.2012";
DateTime date = DateTime.ParseExact(dateStr, "dd.MM.yyyy", CultureInfo.InvariantCulture); 
```

然后，当您想在`DateTime`某处输出此实例时，您可以使用`YYYY-MM-DD`格式，如下所示：

```
string result = date.ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:23:47.667

解析日期时，您需要指定要*读取*的格式，而不是稍后要输出的格式。

所以`dd.MM.yyyy`用作`ParseExact`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T11:24:57.260

> 检查[DateTime.ParseExact 方法 (String, String, IFormatProvider)](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx) 将日期和时间的指定字符串表示形式转换为其 DateTime 等效项。字符串表示的格式必须与指定的格式完全匹配，否则将引发异常。

您必须将格式字符串指定为`DD.MM.YYYY`而不是`"yyyy-MM-dd"`.

试试这个：

```
DateTime dateValue = DateTime.ParseExact(date_req, "DD.MM.YYYY", CultureInfo.InvariantCulture );

// use this when you need to show that formatted date value
string formattedDate = dateValue.ToString("yyyy-MM-dd"); 
```

更好的方法是使用[DateTime.TryParseExact Method](http://msdn.microsoft.com/en-us/library/ms131044.aspx)，如果您希望它作为日期而不是字符串修改您的文化信息和日期分隔符。

```
CultureInfo enUS = new CultureInfo("en-US"); 
string dateString;
DateTime dateValue;
dateString = "05.01.2009"; 
if (DateTime.TryParseExact(dateString, "DD.MM.YYYY", enUS, 
                        DateTimeStyles.None, out dateValue))
   Console.WriteLine("Converted '{0}' to {1} ({2}).", dateString, dateValue, 
                     dateValue.Kind);
else
   Console.WriteLine("'{0}' is not in an acceptable format.", dateString); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T11:28:44.907

我认为您想要做的是解析您的`dd.MM.yyyy`然后将其显示为`yyyy-MM-dd`.

您首先必须将其解析`string`为 a `DateTime`：

```
DateTime date = DateTime.ParseExact(date_req, "yyyy-MM-dd", CultureInfo.InvariantCulture); 
```

现在`date`是计算机实际理解的日期的表示（在它只是一个字符串之前）。您现在可以随心所欲地显示此对象：

```
string yyyyMMdd = date.ToString("yyyy-MM-dd");
string arabic = date.ToString("yyyy-MM-dd", new CultureInfo("ar"));
// and so on 
```

不要忘记在字符串之间`DateTime`来回转换日期时，文化和时区值得牢记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T11:25:04.063

首先以现有格式对其进行解析，然后转换为您想要的字符串格式。

```
var date = DateTime.ParseExact(date_req, "dd.MM.yyyy", CultureInfo.InvariantCulture); 
var str = date.ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T11:25:07.683

您可以先将其转换为字符数组。然后您可以将日/月/年分别解析为整数。你知道数字的索引，所以这很容易。之后，您可以按照自己喜欢的方式连接每个元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T11:28:52.797

错误。你有一个蛋糕，你想吃一个木桩。为了让你的胃相信蛋糕是木桩，你必须把蛋糕变成木桩。这是无法做到的。解析是关于接受一个值，并使用一个模式（或更多）将它转换为其他东西而不是转换它。所以你想要的可能是对的，但你问的是错误的。

# asp.net - jsonp ria 服务中的身份验证问题

> ID：11013792
> 
> 赞同：0
> 
> 时间：2012-06-13T11:21:34.657
> 
> 标签：asp.net, authentication, cross-domain, jsonp, ria

我正在使用带有 jsonp 端点的 ria 服务。当我在服务文件中调用我的方法时，它在 ie 和 firefox 中运行良好，但有时在 chrome 中运行，有时我得到“经过身份验证的服务不支持跨域 javascript 回调”。错误。即使我不使用经过身份验证的服务。

这是一段关于我所拥有的代码。

jsonp服务

```
 [EnableClientAccess(RequiresSecureEndpoint = false)]
    public class PPolJsonService : LinqToEntitiesDomainService<PPolAdvEntities>
    {

       public IQueryable<QuestionEntity> GetCompleteSurvey()
       {
        ............
       }
    } 
```

javascript代码

```
 function (data) {
                        var Params = {};
                        Params.type = 'GET';
                        Params.url = 'http://127.0.0.1:81/PPolSilverlight-Web-Services-PPolJsonService.svc/JSONP/GetCompleteSurvey;
                        Params.dataType = 'jsonp';

                        Params.data = { data:'somedata'};
                        Params.success = function (data) { };
                        Params.jsonpCallback = "ppolv2"
                        $.ajax(Params);
                    }); 
```

在 web.config 文件中，我的设置是`<authentication mode="Forms">`

如果我设置`<authentication mode="None">`了，我就能够解决 chrome 的所有问题。但是应用程序的其余部分需要身份验证。所以这就是为什么我必须将它用作“mode=Forms”。如您所见，我的服务不使用身份验证，

为什么我会收到此错误，是否有任何解决方案？

笔记：

顺便说一句，我在 web.config 中还有其他设置，例如

```
 <webHttpEndpoint>
        <standardEndpoint crossDomainScriptAccessEnabled="true"
                          automaticFormatSelectionEnabled="true"/>
      </webHttpEndpoint> 
```

或clientaccesspolicy.xml中的这些

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*">
        <domain uri="http://*"/>
        <domain uri="https://*" />
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

但他们都没有帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:25:48.463

您好尝试将此行添加到您的 web.config 文件中。它支持跨域 Ajax 请求。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
 <system.webServer>
   <httpProtocol>
     <customHeaders>
       <add name="Access-Control-Allow-Origin" value="*" />
     </customHeaders>
   </httpProtocol>
 </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:46:51.457

我没有对其进行足够的测试，但我想我找到了解决方案。

如果您在应用程序中使用安全端点，并且您不需要为 jsonp 服务使用安全端点，

你可以添加 requireSSL="true" 在

```
 <authentication mode="Forms">
  <forms name=".PPolSilverlight_ASPXAUTH" timeout="2880" requireSSL="true" />
</authentication> 
```

使用这一小段代码，您的不安全 jsonp 服务将无需身份验证即可工作。

# javascript - 显示和隐藏 Javascript（显示：无）问题

> ID：11013795
> 
> 赞同：0
> 
> 时间：2012-06-13T11:21:37.317
> 
> 标签：javascript, jquery, html, css

我创建了一个显示/隐藏 javascript 函数，它似乎可以完美运行 - 当您单击链接时，它会显示徽标的 gif 版本。

我遇到的问题是，当您第一次进入登录页面时，[单击此处](http://iamnatesmithen.com/jukebox/index2.html)您可以看到两张图像，只有当您单击静止图像时，该功能才能正常工作 - 一次只显示一张图像。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:24:05.843

您还必须为图像提供`display:none`样式，然后开始：

```
<img id="center-img-gif" alt="main-img" src="css/images/logo.gif" style="display:none;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:24:14.773

对其中一张图片使用 CSS 属性`Display:none;`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:25:14.180

您可以在设计时设置`display:none`一个图像，或者您可以在设计时设置`display:none`一个图像`body onload`

# c# - c#中大类大小的性能开销

> ID：11013802
> 
> 赞同：15
> 
> 时间：2012-06-13T11:22:09.947
> 
> 标签：c#, wcf, class

这是一个相当学术的问题——我已经注意到我在 WCF 服务中编写的一个类很长（大约 3000 行），它应该被分解成更小的类。

服务的范围随着时间的推移而扩大，并且包含许多类似功能的方法，因此我直到现在还没有创建多个较小的类，所以我这样做没有问题（除了这样做需要时间！） ，但它让我思考 - 使用单个大类而不是多个小类是否存在显着的性能开销？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-13T11:26:19.743

它不会产生任何明显的差异。在考虑这种极端的微优化之前，您应该考虑可维护性，这对于大约 3000 LOC 的类来说是相当危险的。

首先编写代码，使其正确且可维护。只有当你真的遇到性能问题时，你才应该首先分析你的应用程序，然后再做出任何关于优化的决定。通常会在其他地方发现性能瓶颈（缺乏并行化、糟糕的算法等）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T11:27:24.887

不，有一个大类不应该影响性能。将大类拆分为小类甚至会*降低*性能，因为您将有更多的重定向。但是，几乎在所有情况下，影响都可以忽略不计。

将一个类拆分成更小的部分的目的不是为了提高性能，而是为了更容易阅读、修改和维护代码。但仅此一项就足够了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-13T11:30:07.027

当决定在单个源文件上添加一些设计良好的类时，性能考虑是您最后的担忧。多想想：

*   可维护性......很难在这么多代码中进行点修复。
*   可读性...如果您必须像恶魔一样上下翻页才能到达任何地方，那么它是不可读的。
*   可重用性...没有分解使事情难以重用。
*   凝聚力...如果你在一个班级里做的事情太多，它可能无论如何都没有凝聚力。
*   可测试性...祝你好运，单元测试 3,000 LoC 一堆意大利面条代码到任何合理的覆盖范围。

我可以继续，但大型单一源文件的心态似乎可以追溯到 VB/Procedureal 编程时代。现在，如果一个方法的圈复杂度超过 15 并且一个类中有超过几百行，我开始害怕。

通常我发现，如果我重构这些 10k 行代码庞然大物之一，新类的代码行总和最终将是原始代码的 40%，如果不是更少的话。更多的类和分解（在合理范围内）导致更少的代码。起初违反直觉，但它确实有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T11:33:39.887

真正的问题不是性能开销。开销在于可维护性和重用性。您可能很难理解面向对象设计的[SOLID原则，其中一些意味着较小的类更好。](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)特别是，我会看看单一责任原则、开放/封闭原则和 Liskov 替换原则，而且……实际上，想想看，它们几乎都意味着较小的类更好，尽管是间接的。

这东西不容易“得到”。如果您一直在使用 OO 语言进行编程，那么您看看 SOLID，它突然变得非常有意义。但在那些灯泡亮起之前，它似乎有点晦涩难懂。

在一个更简单的说明中，有几个类，每个类一个文件，每个类都有一个合理的命名来描述行为，每个类都有一个工作，从纯粹的理智的角度来看，必须比 3,000 长页更容易管理线。

然后考虑您的 3,000 行类中的一个部分是否可能在您程序的另一部分中有用......将该功能放在专用类中是封装它以供重用的极好方法。

本质上，在我写作的时候，我发现我只是在梳理 SOLID 的各个方面。你可能最好[直接从马嘴里读到这一点](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T11:27:43.547

我不会说存在性能问题，而是维护可读性问题。修改更多每个执行其目的的类比使用单个怪物类要容易得多。这太荒谬了。你这样做违反了所有 OOP 原则。

> 因此我直到现在还没有创建多个较小的类所以我这样做没有问题

正是这种情况，我已经在 SO 多次警告过......人们害怕过早的优化，但他们不害怕写一个糟糕的代码，比如“我会在以后出现问题时修复它”。让我告诉你一些事情 - 3000+ LOC 类已经是一个问题，无论性能影响（如果有的话）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T11:31:57.777

这取决于如何使用类以及实例化的频率。当类被实例化一次时，例如合同服务类，典型的性能开销并不显着。

当类经常被实例化时，它可能会降低性能。

**但在这种情况下，不要考虑性能，而要考虑设计。**最好考虑支持以及进一步的开发和可测试性。3K LOC 类是巨大的，通常是反模式书籍。这样的类导致代码重复和错误，进一步的开发将是痛苦的，导致已经修复的错误一次又一次出现，代码很脆弱。

**所以类绝对应该重构。**

# workflow-foundation-4 - 如何在工作流服务 xamlx 文件上显示具有完整设计的 xmal 复合活动？

> ID：11013806
> 
> 赞同：0
> 
> 时间：2012-06-13T11:22:25.000
> 
> 标签：workflow-foundation-4, workflow-foundation

我正在开发一些由几个代码活动和 WF 框架活动组成的复合活动。当我将它放在工作流服务 (xmalx) 上时，它被视为单个活动。我想用工作流服务上的所有子活动来展示完成这个自定义活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:59:29.357

这是一个 MSDN 帖子的链接，其中开发人员有一个可以执行此操作的自定义活动设计器版本。您可能需要进行一些修改，但我敢打赌，只要稍加努力，您就可以让它为您工作。

[http://social.msdn.microsoft.com/Forums/nl/wfprerelease/thread/6bd297b8-23e4-402b-9e1b-56b816dacf42](http://social.msdn.microsoft.com/Forums/nl/wfprerelease/thread/6bd297b8-23e4-402b-9e1b-56b816dacf42)

# php - 为什么 json_decode 为空数组返回 null？

> ID：11013814
> 
> 赞同：9
> 
> 时间：2012-06-13T11:23:00.820
> 
> 标签：php, json, decode

为什么这会回显“NULL”？在我看来，它将被解码为一个空数组。

我错过了什么明显的东西吗？

```
<?php

$json = json_encode(array());
$json_decoded = json_decode($json, true);
// same with json_decode($json);

if ($json_decoded == null){
    echo "NULL";
} else
{
    echo "NOT NULL";
}

?> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-13T11:26:49.547

这是因为`array()==NULL`. 在这种情况下，它不检查对象类型。

`gettype(null)`返回 null，而

`gettype(array())`返回数组。希望你能有所作为。

可能你需要的是

```
if ($json_decoded === null) {
   echo "NULL";
} else
{
   echo "NOT NULL";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:27:43.523

print_r 将 $json_decoded 值返回给空数组。:)

```
$json = json_encode(array());
$json_decoded = json_decode($json, true);

if ($json_decoded == null){
    print_r($json_decoded);
} else
{
    echo "NOT NULL";
} 
```

**output : Array ( )** **这是因为使用 == 运算符时，空数组的类型会被处理为 null**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:26:25.267

这必须解决问题

```
 if ($json_decoded === null) 
```

[手册](http://php.net/manual/en/function.json-encode.php)中的示例：

```
<?php
$a = array('<foo>',"'bar'",'"baz"','&blong&', "\xc3\xa9");

echo "Normal: ",  json_encode($a), "\n";
echo "Tags: ",    json_encode($a, JSON_HEX_TAG), "\n";
echo "Apos: ",    json_encode($a, JSON_HEX_APOS), "\n";
echo "Quot: ",    json_encode($a, JSON_HEX_QUOT), "\n";
echo "Amp: ",     json_encode($a, JSON_HEX_AMP), "\n";
echo "Unicode: ", json_encode($a, JSON_UNESCAPED_UNICODE), "\n";
echo "All: ",     json_encode($a, JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_QUOT | JSON_HEX_AMP | JSON_UNESCAPED_UNICODE), "\n\n";

$b = array();

echo "Empty array output as array: ", json_encode($b), "\n";
echo "Empty array output as object: ", json_encode($b, JSON_FORCE_OBJECT), "\n\n";

$c = array(array(1,2,3));

echo "Non-associative array output as array: ", json_encode($c), "\n";
echo "Non-associative array output as object: ", json_encode($c, JSON_FORCE_OBJECT), "\n\n";

$d = array('foo' => 'bar', 'baz' => 'long');

echo "Associative array always output as object: ", json_encode($d), "\n";
echo "Associative array always output as object: ", json_encode($d, JSON_FORCE_OBJECT), "\n\n";
?> 
```

输出：

```
Normal: ["<foo>","'bar'","\"baz\"","&blong&","\u00e9"]
Tags: ["\u003Cfoo\u003E","'bar'","\"baz\"","&blong&","\u00e9"]
Apos: ["<foo>","\u0027bar\u0027","\"baz\"","&blong&","\u00e9"]
Quot: ["<foo>","'bar'","\u0022baz\u0022","&blong&","\u00e9"]
Amp: ["<foo>","'bar'","\"baz\"","\u0026blong\u0026","\u00e9"]
Unicode: ["<foo>","'bar'","\"baz\"","&blong&","é"]
All: ["\u003Cfoo\u003E","\u0027bar\u0027","\u0022baz\u0022","\u0026blong\u0026","é"]

Empty array output as array: []
Empty array output as object: {}

Non-associative array output as array: [[1,2,3]]
Non-associative array output as object: {"0":{"0":1,"1":2,"2":3}}

Associative array always output as object: {"foo":"bar","baz":"long"}
Associative array always output as object: {"foo":"bar","baz":"long"} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T11:28:51.320

您需要使用严格的相等运算符`===`，请自行观察：

```
$json = json_encode(array());
var_dump($json); // string(2) "[]"
$json_decoded = json_decode($json, true);
var_dump($json_decoded); // array(0) { } 
```

这样做：

```
$json = json_encode(array());
$json_decoded = json_decode($json, true);

if ($json_decoded === null) 
{
   echo "NULL";
} else
{
   echo "NOT NULL";
} 
```

将正确地进行`else`有条件印刷`NOT NULL`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-30T22:46:10.043

如果您的数据包含一些`\n`json_decode 也可能会静默失败。

# wordpress - 为自定义帖子类型启用粘性帖子选项 wordpress

> ID：11013833
> 
> 赞同：0
> 
> 时间：2012-06-13T11:24:22.783
> 
> 标签：wordpress

我正在使用 wordpress 最新版本 3.3.2 我已经制作了自定义帖子类型，现在我想要自定义帖子中的粘性帖子选项。我可以通过编辑核心 wordpress 文件 metaboxes.php 来做到这一点，但我想在不触及任何 wordpress 核心文件的情况下做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:51:08.563

对于您的需要，我会推荐“更多字段”插件：[http ://wordpress.org/extend/plugins/more-fields/](http://wordpress.org/extend/plugins/more-fields/)

您可以选择自定义字段的类型并附加到一个或多个自定义帖子类型。要创建置顶帖子，也许您应该使用自定义字段的复选框并查询最新的 N 个选中的自定义帖子/置顶帖子 :)

我希望它对你有意义。

祝你好运！:)

# google-app-engine - TypeError：无法从未定义中读取属性“tbody”

> ID：11013834
> 
> 赞同：0
> 
> 时间：2012-06-13T11:24:25.607
> 
> 标签：google-app-engine, xml-parsing, google-apps-script, html-parsing

我正在尝试解析谷歌应用程序脚本中的 html，HTML 中元素的 xPath 是：

```
/html/body/table/tbody/tr/td/table/tbody/tr[1]/td/table/tbody/tr[3]/td/table/tbody/tr/td/table/tbody/tr/td[2]/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]/table/tbody/tr[2]/td[1]/table[2]/tbody/tr[3]/td[8] 
```

如何在脚本中访问它？我尝试了以下方法：

```
var doc = Xml.parse(responseText, true);
var number = doc.html.body.table.tbody.tr.td
                .table.tbody.tr[1].td.table.tbody
                .tr[3].td.table.tbody.tr.td.table
                .tbody.tr.td[2].table.tbody.tr[2]
                .td.table.tbody.tr[2].td[2].table
                .tbody.tr[2].td[1].table[2].tbody
                .tr[3].td[1]; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:18:09.407

看起来它是您将其视为单个链的元素层次结构。请张贴 xml 字符串`responseText`而不是这个“xPath”，以便您和我们更清楚地看到它。还请在 xml 中指定您要获取的元素。

当你更新你的问题时，我会更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T11:02:33.483

xPath 本身是错误的，tbody 是由 firefox 添加的。所以检查IE中的路径。

# android - 动态更改 RadioButton 的文本

> ID：11013835
> 
> 赞同：4
> 
> 时间：2012-06-13T11:24:26.327
> 
> 标签：android, radio-button

我正在 android 中创建一个测验应用程序。对于每个问题，我都设置了 4 个单选按钮供用户单击。如何为每个问题动态更改单选按钮的文本？这些单选按钮的文本存储在原始文本文件中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T11:36:44.167

干得好。

> 我设置了 4 个单选按钮供用户单击。

您一定在 radioGroup 中定义了它们，对吧？

然后您可以在 RadioGroup 中迭代以将名称设置为 RadioButton，或者您可以通过索引获取 RadioButton 并将名称设置为它。

```
RadioGroup radioGroup = (RadioGroup)findViewById(R.id.group);

    for (int i = 0; i < radioGroup .getChildCount(); i++) {
            ((RadioButton) radioGroup.getChildAt(i)).setText(String.valueOf(i));
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T11:29:51.733

您可以通过使用获取按钮的对象

```
RadioButton button = (RadioButton)findViewById(R.id.yourButtonId); 
```

然后写：

```
button.setText("This is another text..."); 
```

没有尝试运行它，但它应该可以工作......

# php - 应用内购买服务器验证

> ID：11013837
> 
> 赞同：0
> 
> 时间：2012-06-13T11:24:54.923
> 
> 标签：php, ios, in-app-purchase, verification, storekit

我目前正在尝试使用服务器端验证（在 PHP 中）通过 AppStore 验证我的应用内购买收据。

这是我的代码：

```
// ViewController.m:
NSString *receiptDataString = [[NSString alloc] initWithData:[transaction transactionReceipt] encoding:NSUTF8StringEncoding];
NSString *verificationDataString = [NSString stringWithFormat:@"receiptData=%@", receiptDataString];
NSData *verificationData = [NSData dataWithBytes:[verificationDataString UTF8String] length:[verificationDataString length]];

NSMutableURLRequest *verificationRequest = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://update.csundm.de/inapp/verifyReceipt.php"]];
[verificationRequest setHTTPMethod:@"POST"];
[verificationRequest setHTTPBody:verificationData];

NSData *verificationResultData = [NSURLConnection sendSynchronousRequest:verificationRequest returningResponse:nil error:nil];
NSString *verificationResultString = [[NSString alloc] initWithData:verificationResultData encoding:NSUTF8StringEncoding];
NSLog(@"%@", verificationResultString);

********************************************************

// verifyReceipt.php:
$receiptData = $_POST["receiptData"];
$receiptDataEncoded = base64_encode($receiptData);
$receiptJSONString = json_encode(Array("receipt-data" => $receiptDataEncoded));

$contextData = array ( 
                      "method" => "POST",
                      "header" => "Connection: close\r\n".
                      "Content-Length: ".strlen($receiptJSONString)."\r\n",
                      "content" => $receiptJSONString);
$context = stream_context_create (array ( 'https' => $contextData ));
$result =  file_get_contents ("https://sandbox.itunes.apple.com/verifyReceipt", false, $context);

$jsonResult = json_decode($result);
if ($jsonResult -> {"status"} != 0) {
    echo "Receipt invalid: ".$result;
}
else {
    echo "Receipt valid";
} 
```

不幸的是，我收到 »Receipt invalid: {"status":21000}« 谁能想象问题出在哪里？我什至无法在互联网上找到有关此错误代码的信息。我发现了一个错误描述，但他们说这仅适用于不可更新的订阅。

非常感谢，致以诚挚的问候，朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:44:07.170

尝试先在 iphone/client 端对其进行编码，然后将编码后的数据发送到 php/server 端。object-c 上 base64 的输出看起来像`chunk_split(base64_encode($receiptData), 65)`PHP 端的输出，因此略有不同。

我还尝试使用上面的代码在服务器端对其进行编码，但这似乎也不起作用，即使在对所有要使用的新行进行规范化`\r`并在编码之前去除任何尾随空格时也是如此。一定是我遗漏的一些小细节，无论如何，只需在 iphone 端对其进行编码，就可以省去麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:41:09.267

来自 StoreKitGuide：

**自动更新订阅的状态代码**

```
Status Code | Description
21000 | The App Store could not read the JSON object you provided. 
```

# android - ksoap2 Android 仅适用于 4.0.x

> ID：11013839
> 
> 赞同：1
> 
> 时间：2012-06-13T11:25:00.380
> 
> 标签：android, ksoap2, android-ksoap2

我使用 ksoap2-android-assembly-2.6.5-jar-with-dependencies.jar 与肥皂网络服务对话。这在运行 android 4.0.4 的设备上完美运行，返回预期的响应。然而，在我尝试的所有其他设备（2.1、2.2 等）上，它会引发以下异常：

```
06-13 12:16:34.154: E/Soap(849): unterminated entity ref (position:TEXT �������������`I�...@1:18 in java.io.InputStreamReader@43d66f08) 
06-13 12:16:34.154: E/Soap(849): org.xmlpull.v1.XmlPullParserException: unterminated entity ref (position:TEXT �������������`I�...@1:18 in java.io.InputStreamReader@43d66f08) 
```

活动代码：

```
private static final String METHOD_NAME = "TopGoalScorers";
private static final String SOAP_ACTION = "http://footballpool.dataaccess.eu/data/TopGoalScorers";
private static final String NAMESPACE = "http://footballpool.dataaccess.eu";
private static final String URL = "http://footballpool.dataaccess.eu/data/info.wso?WSDL";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    PropertyInfo propertyInfo = new PropertyInfo();
    propertyInfo.setName("iTopN");
    propertyInfo.setValue("5");
    propertyInfo.setType(int.class);
    request.addProperty(propertyInfo);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);

    HttpTransportSE httpTransport = new HttpTransportSE(URL);
    httpTransport.debug = true;

    try {
        httpTransport.call(SOAP_ACTION, envelope);
        Log.d("Soap", "Finished Call");
    } catch (IOException e) {
        Log.e("Soap", e.getMessage(), e);
    } catch (XmlPullParserException e) {
        Log.e("Soap", e.getMessage(), e);
    }
} 
```

任何想法可能是什么问题？我尝试将 dotNet 标志设置为 true，但没有成功。

任何帮助将不胜感激。

谢谢

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:54:07.890

我目前有同样的问题。我使用 ksoap2 库版本 2.5.7 解决了它。希望能帮助到你。接收到的编码一定是 2.6.5 上的错误。

# objective-c - 在 iOS 中手动更新界面方向

> ID：11013843
> 
> 赞同：2
> 
> 时间：2012-06-13T11:25:10.460
> 
> 标签：objective-c, ios, cocoa-touch, orientation

我的 iOS 应用程序支持除 PortraitUpsideDown 之外的所有方向。但是在应用程序中，我有一个带有偏好的视图，我希望它只以纵向显示。因此，无论何时显示此视图，都会根据需要对其进行旋转，使其处于纵向模式。这意味着用户也将在纵向模式下旋转设备以设置首选项，然后在关闭此视图界面后现在应该具有纵向。问题是，隐藏首选项视图后，界面保持横向，因为在显示此视图后我阻止了自动旋转。因此，隐藏视图后，我想手动将界面更新为当前设备方向。我该怎么做？

* * *

```
self.view.hidden=NO;
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.3];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
self.view.alpha=1.0;
[UIView commitAnimations]; 
```

此代码在其父视图上的 LongPressGesture 之后从 OptionsViewController 调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-11T10:51:14.080

基于 Marek R 提出的解决方案，我创建了一个 UIViewController 扩展来强制更新控制器的方向。由于 iOS 的新版本，他的解决方案不再起作用。我在这里发布我的解决方案来强制更新方向（为了考虑到控制器支持的方向方法）而不会产生副作用。希望能帮助到你。

```
UIViewController *vc = [[UIViewController alloc]init];
[[vc view] setBackgroundColor:[UIColor clearColor]];
[vc setModalPresentationStyle:(UIModalPresentationOverFullScreen)];
[self presentViewController:vc animated:NO completion:^{
    dispatch_async(dispatch_get_main_queue(), ^{
        [vc dismissViewControllerAnimated:YES completion:completion];
    });
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:34:07.880

您所要做的就是将以下内容添加到您正在使用的视图控制器中以满足您的偏好。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T14:29:31.940

调用此解决方法对我有用：

```
-(void)forceOrientationUpdate {
    UIViewController *c = [[UIViewController alloc]init];
    [self presentModalViewController:c animated:NO];
    [self dismissModalViewControllerAnimated:NO];
    [c release];
} 
```

# java - 为什么比较器声明等于？

> ID：11013850
> 
> 赞同：26
> 
> 时间：2012-06-13T11:25:20.447
> 
> 标签：java, lambda, java-8, comparator, functional-interface

Comparator 接口有自己的`equals()`方法。默认情况下，任何类都将`equals()`通过 Object 类获得。`equals()`接口内部需要有什么方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T11:31:58.167

`Comparator`细化合约`Object.equals`：它必须满足由`Object.equals` *and then some*设置的约束。

> 此外，只有当指定的对象也是一个比较器并且它强制执行与此比较器相同的排序时，此方法才能返回 true。因此，`comp1.equals(comp2)`意味着`sgn(comp1.compare(o1, o2))==sgn(comp2.compare(o1, o2))`对于每个对象引用`o1`和`o2`.

声明一个`equals`inside`Comparator`允许您以 javadoc 的形式记录它。

请注意，API 的文档也用作合同，因此这里不仅仅是化妆品。这是其他代码和您的代码可以依赖的显式约束。

在您没有建立较少方法的类似情况下，它也可以用作记录意图。即，`Interface.method`应该在那里，不管它的超级接口如何发展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T11:27:56.167

从 Java[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html#equals%28java.lang.Object%29)`Comparator`中，有它自己的`equals()`方法的原因：

*但是，在某些情况下，重写此方法可能会通过允许程序确定两个不同的比较器施加相同的顺序来**提高性能。***

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T11:30:06.467

阅读它的[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#equals%28java.lang.Object%29)。`equals()`如果您选择在实现比较器的类中覆盖它，它只是为了解释必须返回的内容。您可能认为没有比较器可以等于任何其他比较器，但事实并非如此。如果两个比较器对任何参数返回相同的值，您可能会认为它们是相等的，但事实并非如此。javadoc 解释说，如果两个比较器强加相同的顺序，则无论给出什么参数，它们都是相等的。javadoc还说：

> 请注意，不要覆盖 Object.equals(Object) 总是安全的

大多数时候，您不会`equals()`在比较器中覆盖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T11:35:29.943

从技术上讲，方法的声明是多余的（编译器不在乎），但是......

在此接口中声明 equals 方法使其成为调用者和不同比较器之间**合同的一部分，并允许它指定/扩展其语义。**

它指定两个比较器只有在它们使用它们的 compare() 方法强制相同的排序时才相等。这*扩展*了 Object.equals() 的语义，因此必须在接口中记录。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T11:30:48.387

来自[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html#equals%28java.lang.Object%29)：

不覆盖 Object.equals(Object) 总是安全的。但是，**在某些情况下，重写此方法可能会通过允许程序确定两个不同的比较器施加相同的顺序来提高性能**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T11:35:18.077

```
Comparator interface have their own equals() method 
```

出色地，。首先，应该清楚的是，每当您实现 Comparable 接口时，您应该提供您的程序来决定对象何时相等、更少或更大。

```
I am quite confuse about have equals() inside Comparator. Any class will get equals() by default through Object class. 
```

从 Object 类继承的 equals() 方法实现只检查两个引用是否指向同一个对象。它不适用任何比较。您将在您的班级（或可能在您的界面）中提供对象相等的标准。

```
Then what is need to have equals() method inside an interface? 
```

显然，每当你在对象小于时实现，大于时你必须在它们相等时实现。因此，您应该提供检查相等性的逻辑，而不是依赖默认的 Object equals() 方法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T11:30:41.203

提供 in的`equals()`方法`Comparator`是为了强制实现`Comparator`接口的用户`equals()`使用一些额外的规则和约束来实现，除了已经应用在`equals()`from上的规则和约束`Object`。

附加规则是：

> 此方法必须遵守*Object.equals(Object)*的一般约定。此外，只有当指定的对象也是一个比较器并且它强制执行与此比较器相同的排序时，此方法才能返回 true。因此，*comp1.equals(comp2)*意味着 *sgn(comp1.compare(o1, o2))==sgn(comp2.compare(o1, o2))*对于每个对象引用*o1*和*o2*。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-13T11:32:20.503

将 Object 方法放在接口声明中允许 Javadoc 声明的含义 equals 需要在实现该接口的类中具有。

# c++ - 使用 distutils 加快构建过程

> ID：11013851
> 
> 赞同：35
> 
> 时间：2012-06-13T11:25:21.820
> 
> 标签：c++, python, distutils

我正在为 Python 编写 C++ 扩展，并且正在使用 distutils 来编译项目。随着项目的发展，重建它需要的时间越来越长。有没有办法加快构建过程？

我读到`make -j`distutils 无法进行并行构建（如 ）。有没有比 distutils 更快的替代品？

我还注意到每次调用时它都会重新编译所有目标文件`python setup.py build`，即使我只更改了一个源文件。应该是这种情况还是我在这里做错了什么？

如果有帮助，这里是我尝试编译的一些文件：[https ://gist.github.com/2923577](https://gist.github.com/2923577)

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-01T12:11:31.980

1.  尝试使用环境变量`CC="ccache gcc"`进行构建，这将在源未更改时显着加快构建速度。（奇怪的是，distutils`CC`也用于 c++ 源文件）。当然，安装 ccache 包。

2.  由于您有一个由**多个已编译目标文件**组装而成的**扩展**，因此您可以对 distutils 进行猴子补丁以并行编译它们（它们是独立的） - 将其放入您的 setup.py （根据需要调整）：**`N=2`**

     **```
    # monkey-patch for parallel compilation
    def parallelCCompile(self, sources, output_dir=None, macros=None, include_dirs=None, debug=0, extra_preargs=None, extra_postargs=None, depends=None):
        # those lines are copied from distutils.ccompiler.CCompiler directly
        macros, objects, extra_postargs, pp_opts, build = self._setup_compile(output_dir, macros, include_dirs, sources, depends, extra_postargs)
        cc_args = self._get_cc_args(pp_opts, debug, extra_preargs)
        # parallel code
        N=2 # number of parallel compilations
        import multiprocessing.pool
        def _single_compile(obj):
            try: src, ext = build[obj]
            except KeyError: return
            self._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)
        # convert to list, imap is evaluated on-demand
        list(multiprocessing.pool.ThreadPool(N).imap(_single_compile,objects))
        return objects
    import distutils.ccompiler
    distutils.ccompiler.CCompiler.compile=parallelCCompile 
    ```** 
***   为了完整起见，如果您有**多个扩展名**，则可以使用以下解决方案：

    ```
    import os
    import multiprocessing
    try:
        from concurrent.futures import ThreadPoolExecutor as Pool
    except ImportError:
        from multiprocessing.pool import ThreadPool as LegacyPool

        # To ensure the with statement works. Required for some older 2.7.x releases
        class Pool(LegacyPool):
            def __enter__(self):
                return self

            def __exit__(self, *args):
                self.close()
                self.join()

    def build_extensions(self):
        """Function to monkey-patch
        distutils.command.build_ext.build_ext.build_extensions

        """
        self.check_extensions_list(self.extensions)

        try:
            num_jobs = os.cpu_count()
        except AttributeError:
            num_jobs = multiprocessing.cpu_count()

        with Pool(num_jobs) as pool:
            pool.map(self.build_extension, self.extensions)

    def compile(
        self, sources, output_dir=None, macros=None, include_dirs=None,
        debug=0, extra_preargs=None, extra_postargs=None, depends=None,
    ):
        """Function to monkey-patch distutils.ccompiler.CCompiler"""
        macros, objects, extra_postargs, pp_opts, build = self._setup_compile(
            output_dir, macros, include_dirs, sources, depends, extra_postargs
        )
        cc_args = self._get_cc_args(pp_opts, debug, extra_preargs)

        for obj in objects:
            try:
                src, ext = build[obj]
            except KeyError:
                continue
            self._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)

        # Return *all* object filenames, not just the ones we just built.
        return objects

    from distutils.ccompiler import CCompiler
    from distutils.command.build_ext import build_ext
    build_ext.build_extensions = build_extensions
    CCompiler.compile = compile 
    ```** 

 *** * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-24T21:44:36.473

我已经使用 clcache 在 Windows 上进行了这项工作，源自 eudoxos 的回答：

```
# Python modules
import datetime
import distutils
import distutils.ccompiler
import distutils.sysconfig
import multiprocessing
import multiprocessing.pool
import os
import sys

from distutils.core import setup
from distutils.core import Extension
from distutils.errors import CompileError
from distutils.errors import DistutilsExecError

now = datetime.datetime.now

ON_LINUX = "linux" in sys.platform

N_JOBS = 4

#------------------------------------------------------------------------------
# Enable ccache to speed up builds

if ON_LINUX:
    os.environ['CC'] = 'ccache gcc'

# Windows
else:

    # Using clcache.exe, see: https://github.com/frerich/clcache

    # Insert path to clcache.exe into the path.

    prefix = os.path.dirname(os.path.abspath(__file__))
    path = os.path.join(prefix, "bin")

    print "Adding %s to the system path." % path
    os.environ['PATH'] = '%s;%s' % (path, os.environ['PATH'])

    clcache_exe = os.path.join(path, "clcache.exe")

#------------------------------------------------------------------------------
# Parallel Compile
#
# Reference:
#
# http://stackoverflow.com/questions/11013851/speeding-up-build-process-with-distutils
#

def linux_parallel_cpp_compile(
        self,
        sources,
        output_dir=None,
        macros=None,
        include_dirs=None,
        debug=0,
        extra_preargs=None,
        extra_postargs=None,
        depends=None):

    # Copied from distutils.ccompiler.CCompiler

    macros, objects, extra_postargs, pp_opts, build = self._setup_compile(
        output_dir, macros, include_dirs, sources, depends, extra_postargs)

    cc_args = self._get_cc_args(pp_opts, debug, extra_preargs)

    def _single_compile(obj):

        try:
            src, ext = build[obj]
        except KeyError:
            return

        self._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)

    # convert to list, imap is evaluated on-demand

    list(multiprocessing.pool.ThreadPool(N_JOBS).imap(
        _single_compile, objects))

    return objects

def windows_parallel_cpp_compile(
        self,
        sources,
        output_dir=None,
        macros=None,
        include_dirs=None,
        debug=0,
        extra_preargs=None,
        extra_postargs=None,
        depends=None):

    # Copied from distutils.msvc9compiler.MSVCCompiler

    if not self.initialized:
        self.initialize()

    macros, objects, extra_postargs, pp_opts, build = self._setup_compile(
        output_dir, macros, include_dirs, sources, depends, extra_postargs)

    compile_opts = extra_preargs or []
    compile_opts.append('/c')

    if debug:
        compile_opts.extend(self.compile_options_debug)
    else:
        compile_opts.extend(self.compile_options)

    def _single_compile(obj):

        try:
            src, ext = build[obj]
        except KeyError:
            return

        input_opt = "/Tp" + src
        output_opt = "/Fo" + obj
        try:
            self.spawn(
                [clcache_exe]
                + compile_opts
                + pp_opts
                + [input_opt, output_opt]
                + extra_postargs)

        except DistutilsExecError, msg:
            raise CompileError(msg)

    # convert to list, imap is evaluated on-demand

    list(multiprocessing.pool.ThreadPool(N_JOBS).imap(
        _single_compile, objects))

    return objects

#------------------------------------------------------------------------------
# Only enable parallel compile on 2.7 Python

if sys.version_info[1] == 7:

    if ON_LINUX:
        distutils.ccompiler.CCompiler.compile = linux_parallel_cpp_compile

    else:
        import distutils.msvccompiler
        import distutils.msvc9compiler

        distutils.msvccompiler.MSVCCompiler.compile = windows_parallel_cpp_compile
        distutils.msvc9compiler.MSVCCompiler.compile = windows_parallel_cpp_compile

# ... call setup() as usual 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-13T22:54:08.297

如果你有 Numpy 1.10 可用，你可以很容易地做到这一点。只需添加：

```
 try:
     from numpy.distutils.ccompiler import CCompiler_compile
     import distutils.ccompiler
     distutils.ccompiler.CCompiler.compile = CCompiler_compile
 except ImportError:
     print("Numpy not found, parallel compile not available") 
```

使用`-j N`或设置`NPY_NUM_BUILD_JOBS`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T12:02:04.170

在您在链接中提供的有限示例中，很明显您对该语言的某些功能存在一些误解。例如，`gsminterface.h`有很多命名空间级别`static`，这可能是无意的。包含该标头的每个翻译单元都将为该标头中声明的每个符号编译它自己的版本。这样做的副作用不仅是编译时间，还有代码膨胀（更大的二进制文件）和链接时间，因为链接器需要处理所有这些符号。

还有很多影响构建过程的问题你还没有回答，比如每次重新编译之前是否清理。如果您正在这样做，那么您可能需要考虑`ccache`，这是一个*缓存*构建过程结果的工具，这样如果您运行`make clean; make target`任何未更改的翻译单元，则只运行预处理器。请注意，只要您继续维护标头中的大部分代码，这不会提供太多优势，因为标头中的更改会修改包含它的所有翻译单元。（我不知道你的构建系统，所以我不能告诉你是否`python setup.py build`会*清理*）

否则这个项目看起来并不大，所以如果编译时间超过几秒钟，我会感到惊讶。**

# android - Android：什么时候适合使用仪表板模式？

> ID：11013855
> 
> 赞同：0
> 
> 时间：2012-06-13T11:25:32.347
> 
> 标签：android, dashboard

简而言之：什么样的应用程序最能从仪表板模式中受益？你什么时候会一起避开仪表板模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:16:37.567

无法给出明确的答案，因为这都是基于个人意见。

我从不太喜欢仪表板模式。引用[Juhani Lehtimäki 的](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html)话：

> 对使用仪表板的主要批评是它会减慢用户访问应用程序内容的速度。每次启动应用程序时，您必须先点击一个图标才能到达您想要的位置......仪表板可能仍然有用，但使用它会受到更多限制。在极少数情况下，可能无法选择应用程序的任何屏幕作为登录屏幕。在这些情况下，仪表板可能仍然是一个不错的选择。此外，大规模复杂的应用程序可能会使初次使用的用户更容易通过在首次启动应用程序时呈现一个不令人生畏的仪表板而不是压倒性的屏幕来掌握应用程序。

我基本同意他的评价。引用的段落来自支持侧滑导航面板的新模式的帖子 - 虽然这当然是可能的，但对于 Android 恕我直言的初学者开发人员来说有点太新了。但是，设计良好的操作栏可以在应用程序的主要区域之间提供类似的导航，而无需通过仪表板引导每个人。

# jquery - jQuery DIV 容器在 1 秒后消失

> ID：11013865
> 
> 赞同：-1
> 
> 时间：2012-06-13T11:26:00.520
> 
> 标签：jquery, html

我通过按一个按钮用 ajax 内容填充一个隐藏的 div 容器。按下按钮后，我希望容器显示新内容。

使用以下方法对我来说效果很好：

```
$(document).ready(function () {
    $('.display').css({'display':'none'});

    $('.button').click(function() { 
        $('.display').show(); return false; 
    });
}); 
```

由于我有很多内容，显示 div 有时会在加载 DOM 之前和之前显示。

我通过在样式表中隐藏显示 div 解决了这个问题。

现在的问题是，只要我按下按钮，div 容器就会显示一秒钟然后消失，即使我没有在我的 jquery 代码中编写来隐藏它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:28:14.983

像这样检查

```
 $(document).ready(function () {
    $('.display').css({'display':'none'});

$('.button').click(function() { 
         $('.display').css({'display':'block'});
         return false; 
    });
}); 
```

# c++ - g ++共享库找不到 与-L相同的目录

> ID：11013875
> 
> 赞同：6
> 
> 时间：2012-06-13T11:26:36.543
> 
> 标签：c++, linker, g++, shared, ld

我只是看不到我在这里做错了什么：

**问：为什么在使用共享对象编译程序时，g++ 找不到我的库？**

我试图在我的 c++ 程序中包含一个共享库：

```
g++ -fpic -c sha.cpp
g++ -shared -o libsha.so sha.o
g++ main.cpp -o main -L. -lsha 
```

其中 sha.cpp 和 sha.h 是库文件，而 main.cpp 是我的程序。

我已经尝试了相同的静态库，它可以找到：

```
g++ -static -c sha.cpp -o libsha.o
ar rcs libsha.a libsha.o
g++ main.cpp -o main -L. -lsha 
```

平台是 Windows 上的 cygwin，输出如下：

```
rob@pc /cygdrive/c/src/a
$ g++ main.cpp -o shatest -L. -lsha
/usr/lib/gcc/i686-pc-cygwin/4.3.4/../../../../i686-pc-cygwin/bin/ld: cannot find -lsha
collect2: ld returned 1 exit status 
```

我已经阅读了所有论坛帖子，但图书馆在同一个文件夹中！

```
$ ls
libsha.so  main.cpp  sha.cpp  sha.h  sha.o 
```

我这样做的原因是，在另一个平台上，正在创建一个库，当调用一个对象时，它可以工作，但是在构造第二个对象时应用程序崩溃。我将上述作为一个简单的测试！（烦人的不是那么简单）。

源文件如下：

主文件

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include "sha.h"

void *thread_one( void *ptr );
void *thread_two( void *ptr );

main()
{
     pthread_t thread1, thread2;
     int  iret1, iret2;

     /* Create independent threads each of which will execute function */
     iret1 = pthread_create( &thread1, NULL, thread_one, 0);
     iret2 = pthread_create( &thread2, NULL, thread_two, 0);

     /* Wait till threads are complete before main continues. Unless we  */
     /* wait we run the risk of executing an exit which will terminate   */
     /* the process and all threads before the threads have completed.   */
     pthread_join( thread1, NULL);
     pthread_join( thread2, NULL); 

     printf("Thread 1 returns: %d\n",iret1);
     printf("Thread 2 returns: %d\n",iret2);
     exit(0);
}

void *thread_one( void *ptr )
{
    printf("Run thread_one\n");
    CObj1 obj;
}

void *thread_two( void *ptr )
{
    printf("Run thread_two\n");
    CObj2 obj;
} 
```

sha.cpp

```
#include <stdio.h>
#include <stdlib.h>

#include "sha.h"

CObj1::CObj1()
{
    printf("CObj1\n");
    a = 10;
    printf("CObj1: %d \n", a);
}

CObj2::CObj2()
{
    printf("CObj2\n");
    a = 10;
    printf("CObj2: %d \n", a);
} 
```

沙.h

```
#ifndef LIB
#define LIB

class CObj1
{
public:
    CObj1();

private:
    int a;
};

class CObj2
{
public:
    CObj2();

private:
    int a;
};

#endif 
```

# .net - 启动 Windows 服务时出错

> ID：11013885
> 
> 赞同：1
> 
> 时间：2012-06-13T11:26:58.293
> 
> 标签：.net, c#-4.0, windows-services, unity-container

我有一个使用 installutil 成功安装的 Windows 服务，但是当我运行它时，我收到一条错误消息，指出该服务无法启动，因为它未能及时响应。在事件查看器中，我可以看到此错误。

```
Application: AuctionControl.Service.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: Microsoft.Practices.Unity.ResolutionFailedException
Stack:
   at Microsoft.Practices.Unity.UnityContainer.DoBuildUp(System.Type, System.Object, System.String, System.Collections.Generic.IEnumerable`1<Microsoft.Practices.Unity.ResolverOverride>)
   at Microsoft.Practices.Unity.UnityContainer.Resolve(System.Type, System.String, Microsoft.Practices.Unity.ResolverOverride[])
   at Microsoft.Practices.Unity.UnityContainerExtensions.Resolve[[System.__Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]](Microsoft.Practices.Unity.IUnityContainer, Microsoft.Practices.Unity.ResolverOverride[])
   at AuctionControl.Service.Service1..ctor()
   at AuctionControl.Service.Program.Main() 
```

我的代码如下

```
using System.ServiceProcess;
using Microsoft.Practices.Unity;

namespace AuctionControl.Service
{
    public partial class Service1 : ServiceBase
    {
        #region Constructor(s)

        public Service1()
        {
            InitializeComponent();

            _container = new UnityContainer();

            _auctionControl = _container.Resolve<Services.Engine.AuctionControl>();
        }

        #endregion

        #region Fields

        private readonly Services.Engine.AuctionControl _auctionControl;
        private readonly UnityContainer _container;

        #endregion

        protected override void OnStart(string[] args)
        {
            _auctionControl.StartAuctionControl();
        }

        protected override void OnStop()
        {
            _auctionControl.StopAuctionControl();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:30:11.220

这与明确成为 Windows 服务无关，这是因为您尚未设置 IoC，以便 Unity 在构造函数中被要求提供某些实例时知道要注入什么。

大概你的`AuctionControl.Service.Service1`构造函数中有一个接口，但你还没有告诉你的 Unity 容器绑定/解析该接口的具体类。

编辑：

你真的需要`Unity`吗？它似乎没有做任何有用的事情。

尝试：

```
public Service1() 
{ 
    InitializeComponent(); 

   _auctionControl = new Services.Engine.AuctionControl();
} 
```

这行得通吗？

Unity 应该允许您（通常）在运行时将接口绑定到具体类型，从而为您提供测试的灵活性并减少组件的耦合。你知道为什么这里的代码中有一个Unity容器吗？

这一行：

```
_auctionControl = _container.Resolve<Services.Engine.AuctionControl>(); 
```

说'我想要一个具体的实例`AuctionControl`，但我不想'想确切地确定在编译时是什么类型，`Resolve`并将在运行时弄清楚'。但是，为了`Unity`确定在您请求 时要给您什么`AuctionControl`，您必须告诉它该`Resolve`调用应该返回什么。为此，您需要`RegisterType`在执行任何`Resolve`-ing 之前设置一个调用，例如：

```
_container.RegisterType<Services.Engine.AuctionControl, Services.Engine.AuctionControl>(); 
```

在这种情况下，这是毫无意义的，因为它`Services.Engine.AuctionControl`总是会自行解决。( `RegisterType<WhenAskedForThisType, GiveMeThisType>();`)。

# java - 我们是否只需要导入一个包来创建一个对象或从该对象调用一个方法？

> ID：11013890
> 
> 赞同：4
> 
> 时间：2012-06-13T11:27:26.057
> 
> 标签：java

```
class TestFormat
{
    public static void main(String[] args)
    {
        System.out.println("hello");
    }
} 
```

在上面的简单代码中，`out`对象的类型是`java.io.PrintStream`。该`println()`方法也是类的`PrintStream`。`PrintStream`驻留在不同的包中，然后`java.lang`是默认的 java 包。

我的问题是我们如何能够使用`java.io`我们甚至没有导入的包（）中的类的方法？假设该类的对象已经提供给我们，但这是否意味着我们只需要导入一个包来从该包中创建一个类的对象而不是之后使用它的方法？

提前Thnax！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T11:30:49.630

您误解了 import 的作用。

是的，您可以在没有 import 语句的情况下使用类及其方法。这意味着您必须输入`java.io.PrintStream`而不是使用短名称`PrintStream`。

当你第一次使用一个类时，*类加载器*会在类路径中搜索一个 .class 文件； *导入*与此过程无关。这只是一种让您不必输入完全解析的类名的方法。

如果您愿意，您可以成功编写 Java，并且*永远不要*使用导入。你只需要成为一个优秀的打字员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:43:32.603

如果您导入可以编写 PrintStream 的类， import 只是让您免于输入总路径，否则您必须编写完整路径 java.io.PrintStream

# sql-server - 将原始数据分布在多列中

> ID：11013891
> 
> 赞同：0
> 
> 时间：2012-06-13T11:27:32.630
> 
> 标签：sql-server

我有一个名为“MyTable”的表，如下所示：

```
ID | Item | Type | Value
1  | 100  | 60   | 37
2  | 100  | 72   | 24
3  | 200  | 60   | 18
4  | 300  | 60   | 43
5  | 300  | 72   | 76 
```

我想组合一个 MS SQL 查询来获得以下信息：

```
Item | Type_60 | Type_72
100  | 37      | 24
200  | 18      | NULL
300  | 43      | 76 
```

很可能我不允许使用 PIVOT（无论如何我不明白如何用于此目的！）。

到目前为止，我只能得出以下结论：

```
select Item,
    CASE Type WHEN 60 THEN Value END as 'Type_60',
    CASE Type WHEN 72 THEN Value END as 'Type_72'
from MyTable 
```

但这给了我以下信息：

```
Item | Type_60 | Type_72
100  | 37      | NULL
100  | NULL    | 24
200  | 18      | NULL
300  | 43      | NULL
300  | NULL    | 76 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:50:25.813

你快到了，只需`group by Item`在最后添加，然后将其包装`case`在一个聚合中：

```
select Item,
    max(CASE Type WHEN 60 THEN Value END) as 'Type_60',
    max(CASE Type WHEN 72 THEN Value END) as 'Type_72'
from MyTable
group by Item 
```

# c# - Calling database function from C#

> ID：11013892
> 
> 赞同：0
> 
> 时间：2012-06-13T11:27:33.657
> 
> 标签：c#, linq, entity-framework, function

Ok, so I'm not using Sql Client.

I have an .edmx file in my project and in it are the tables, the views and the stored procedures. I know how to call them from my project. But I have some functions in the Server Explorer. How to call them via code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:00:44.190

You just need to add those function to EDMX in Wizard (update model from database) and after that you have to manually create static function accepting parameters with same names and marked with `EdmFunction` attribute (examples in [this question](https://stackoverflow.com/questions/5866705/function-imports-cannot-be-created-for-composable-functions)). Now you have mapped function which can be used inside Linq-to-entities queries. EF provider will correctly translate your CLR call to SQL function call in SQL query.

EF 4.0 不支持表值函数（在 EF 4.5 / .NET 4.5 中添加了此支持）。此外，此映射仅适用于 EDMX - 不适用于代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:48:35.690

我所做的是使用与存储过程相同的代码编写一个存储过程，并将其导入到 .edmx 文件中。

# .net - 使用 oledb 从 excel 中读取公式值

> ID：11013893
> 
> 赞同：2
> 
> 时间：2012-06-13T11:27:38.400
> 
> 标签：.net, excel, c#-4.0, oledb

我正在使用 C#.net (4.0) 并尝试通过将参数放入 excel 文件来计算一些结果。此 excel 文件已准备好所需的公式。例如，当我在单元格 A1、A2 和 A3 中输入参数时，计算结果值并显示在单元格 a4 中。单元格 a4 有一个公式，该公式利用来自 a1、a2 和 a3 的值。

我可以使用 oledb 提供程序（v4.0）轻松连接到这个 excel 文件，然后我还可以设置 a1、a2 和 a3 的单元格值。结果出现在单元格 a4 中（我打开了 excel 文件进行检查）。但唯一的问题是当我从单元格 a4 读取值时，它没有按原样返回。

在 a4 中计算的值：6.67% 我在同一单元格的 .net 代码中得到的值：0.092323323211 ...（类似这样）

作为解决方案，我尝试将 a3 的“值”部分复制到其他单元格中（例如 b3 = VALUE(a3)）并尝试读取 b3。但我得到相同的结果。

有什么解决办法吗？我在这里错过了特定于配方细胞的东西吗？还是MS oledb的错误？

感谢您的任何输入....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:46:02.353

尝试将 IMEX=1 添加到您的连接字符串。

# java - 需要帮助才能在 onClickListener 中获取 listitem 的位置

> ID：11013894
> 
> 赞同：1
> 
> 时间：2012-06-13T11:27:39.573
> 
> 标签：java, listview

我正在使用以下 LazyAdapter。我需要在点击事件中获取点击位置。我在第 20 行收到以下建议。有什么建议吗？

> 不能引用在不同方法中定义的内部类中的非最终变量位置

```
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private List<String> data;
    private static LayoutInflater inflater = null;
    public ImageLoader imageLoader;
ArrayList<String> text= new ArrayList<String>();
    public LazyAdapter(MainActivity a, List<String> parsed_string) {
        // TODO Auto-generated constructor stub
        activity = a;
        data = parsed_string;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader = new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public static class ViewHolder {
        public TextView text;
        public ImageView image;
        public Button click;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        ViewHolder holder;

        if (convertView == null) {
            vi = inflater.inflate(R.layout.item, null);
            holder = new ViewHolder();
            holder.text = (TextView) vi.findViewById(R.id.text);
            ;
            holder.image = (ImageView) vi.findViewById(R.id.image);
            holder.click = (Button) vi.findViewById(R.id.btn_click);
            holder.click.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Toast.makeText(activity, "clicked the button in the row",
                            Toast.LENGTH_LONG).show();
                    holder.click.setText(text.get(position)); // line 20
                }
            });
            vi.setTag(holder);
        } else
            holder = (ViewHolder) vi.getTag();

        holder.text.setText("item " + position);
        holder.image.setTag(data.get(position));

        imageLoader.DisplayImage(data.get(position), activity, holder.image);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T11:30:14.923

像这样声明`getView`：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;
    //...
} 
```

从 a`anonymous inner class`你只能访问`final`局部变量。

发生这种情况是因为内部类的代码可能在初始化类的方法完成并且它的局部变量被垃圾收集之后被调用。声明变量`final`使变量成为常量，并将其作为值发送到内部类，而不是作为引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T17:47:05.817

只需使用具有构造函数 -> MyOwnClickListener（位置）的属性位置实现您自己的 OnClickListener 类，并实现 onClick 的逻辑。

```
class MyOwnClickListener implements OnClickListener {
        int position;

        public MyOwnClickListener(int position) {
            this.position = position;
        }

        @Override
        public void onClick(View v) {
.... 
```

并在 getView 方法中设置您的侦听器：

```
holder.click.setOnClickListener(new MyOwnClickListener(position) { 
```

# c# - emgu 两只手检测

> ID：11013895
> 
> 赞同：1
> 
> 时间：2012-06-13T11:27:41.060
> 
> 标签：c#, emgucv, image-segmentation, haar-wavelet

我想检测两只手（使用 HSV 过滤图像）。

问题是当我把两只手放在一起时，头会夹在中间，然后就无法识别手了。

我在应用程序启动时使用 Haar 检测两只手，然后我将图像转换为 HSV（黑白）。然后我使用分割来检测物体的中心质量，这样我就可以跟随它们。我忽略了它们面积足够小的物体。

任何想法我该如何解决这个问题？

# python - 用于从 Facebook 帐户中删除照片/相册的 Python 代码。

> ID：11013898
> 
> 赞同：0
> 
> 时间：2012-06-13T11:27:43.610
> 
> 标签：python, facebook, facebook-graph-api

我想构建一个 python 程序，从我的 facebook 帐户中删除所有照片。稍后，我可能想扩展代码以删除我所有的朋友。

我阅读了有关 OAuth、图形数据库的信息，并对 facebook api 有一个模糊的想法。

我试过这个：[使用 python 登录 facebook](https://stackoverflow.com/questions/2030652/logging-into-facebook-with-python)。登录。但由于某种原因它不起作用。而且我不确定这是否是满足我要求的正确方法。

任何人都可以帮助我朝着正确的方向启动吗？

如果我错过了什么，谢谢并道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:08:21.627

尝试使用 SDK [http://pypi.python.org/pypi/facebook-sdk](http://pypi.python.org/pypi/facebook-sdk)登录。然后您可以使用 DELETE HTTP 方法删除您需要的对象。有关更多信息，请参见[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

# php - 使用正则表达式过滤姓名和姓氏

> ID：11013899
> 
> 赞同：0
> 
> 时间：2012-06-13T11:27:44.410
> 
> 标签：php, regex

在我的 PHP 脚本中，我有一个如下变量：

```
$names = '<a href="%URL$%" rel="tag">Name Surname</a>, <a href="%URL$%" rel="tag">Name Surname</a>, <a href="%URL$%" rel="tag">Name Surname</a>'; 
```

是否可以过滤 $names 以获得此结果？

```
$names = '<a href="%URL$%" rel="tag">N. Surname</a>, <a href="%URL$%" rel="tag">N. Surname</a>, <a href="%URL$%" rel="tag">N. Surname</a>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T19:28:11.507

你可以使用`preg_replace_callback`：

```
$names = preg_replace_callback(
             '/(<a[^>]*>)(\w+)( \w+</a>)',
             function($matches) {
                 return $matches[1] . substr($matches[2], 0, 1) . "." . $matches[3];
             },
             $names
         ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T11:32:26.843

非常简短的回答：使用 HTML 解析器（如[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)）

正则表达式和 HTML 仅在您确定您只是在分解一个真正可预测的代码字符串时才起作用。

# c# - 在请求期间，参数以奇怪的方式编码

> ID：11013901
> 
> 赞同：1
> 
> 时间：2012-06-13T11:27:47.357
> 
> 标签：c#, asp.net, string, encoding, character-encoding

有时我会遇到以下问题：

```
string txt = con.Request.Params["Par_name"].ToString();//the original par value is arabic text 
```

我得到以下结果！！

```
��� ������ ������� ����� 
```

这个问题的原因是什么以及如何获得原始阿拉伯文字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:35:18.337

当您通过 url 参数发送字符串时，即使是通过 ajax 及其 utf-8 以避免冲突，您必须使用 .js 等 javascript 函数对其进行编码`encodeURIComponent`。只编码值的一部分，而不是参数和完整的 url ！然后读取代码后面的参数时，默认情况下它们通常是 UrlDecode，但如果不是，请手动执行。

例如来自[https://stackoverflow.com/a/10968848/159270](https://stackoverflow.com/a/10968848/159270)的代码将是：

```
jQuery.ajax({
    url: "/LogAction.ashx?par_name=" + encodeURIComponent(par_name) + "&par_address=" + encodeURIComponent(par_address),
    type: "GET",
    timeout: 3000,
    async: true, // you can try and async:false - maybe is better for you
    data: action=4, // here you send the log informations
    cache: false,
    success: function(html) {
        jQuery("#FormID").submit();
    },
    error: function(responseText, textStatus, XMLHttpRequest) {                 
        jQuery("#FormID").submit();
    }
}); 
```

我没有在上一个答案中包含此编码，因为通常它们不是将字符串作为参数发送，而是变量，并且因为答案不关注这个细节。

您还可以阅读：http: [//xkr.us/articles/javascript/encode-compare/](http://xkr.us/articles/javascript/encode-compare/)

# android - 在 Android 应用程序中禁用本地化

> ID：11013904
> 
> 赞同：5
> 
> 时间：2012-06-13T11:27:54.953
> 
> 标签：android, localization

有什么方法可以禁用 Android 应用程序中的本地化？它必须只使用英文字符串。我们有带有法语本地化字符串的库项目。一些使用这些库的应用程序必须只有英文版，有些则不是。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T00:14:50.327

**2019 - 基于 Gradle 的方法**

[正如Nidhin](https://stackoverflow.com/users/1944894)在[他们的回答](https://stackoverflow.com/a/54302531/3209170)中指出的那样，现在这比 2012 年更容易且更不容易出错。在文件`defaultConfig`部分的`android`部分中`build.gradle`，您可以设置[`resConfigs`](https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.ProductFlavor.html#com.android.build.gradle.internal.dsl.ProductFlavor:resConfigs(java.lang.String%5B%5D))为您支持的单一语言。例如：

```
android {
    defaultConfig {
        resConfigs "en"
    }
} 
```

这不仅仅是为了禁用本地化——`resConfigs`只是告诉构建系统要保留哪些资源。它可以设置为一种语言，理想情况下可以设置为多种语言，它还可以用于按语言以外的其他方式过滤资源，例如屏幕密度。因此，说“仅包含英语资源”有效地强制应用程序始终使用该语言。

为特定语言加载资源的编程方式有时仍然很有用，因此仍然提供了我 2012 年的答案：

**2012 - 程序化方法**

在调用或任何其他加载特定于语言环境的资源之前执行以下`setContentView()`操作应确保您始终仅加载英文字符串。

```
Resources res = getApplicationContext().getResources();

Locale locale = new Locale("en");
Locale.setDefault(locale);

Configuration config = new Configuration();
config.locale = locale;

res.updateConfiguration(config, res.getDisplayMetrics()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-01-22T06:36:56.910

在 build.gradle 中添加具体的资源配置

```
 defaultConfig {

          resConfigs "en"
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T11:53:45.283

Android 的正常行为是仅在您支持给定语言时才定义它。对于法语，这将是 values-fr/strings.xml。如果您不想支持法语，请不要包含法语的 strings.xml，它将退回到 values 文件夹中的 strings.xml

[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

如果您无法控制提供的字符串，或者如果您想动态设置语言环境以支持您可以覆盖默认语言环境。

[http://developer.android.com/reference/java/util/Locale.html#setDefault(java.util.Locale](http://developer.android.com/reference/java/util/Locale.html#setDefault(java.util.Locale) )

编辑

我忘了提到的是您必须使用新配置更新配置

```
Configuration config = new Configuration();
config.locale = locale;
getBaseContext().getResources().updateConfiguration(config,getBaseContext().getResources().getDisplayMetrics()); 
```

# python - python：如何拥有可以从所有应用程序访问的字典

> ID：11013911
> 
> 赞同：3
> 
> 时间：2012-06-13T11:28:11.367
> 
> 标签：python, google-app-engine, python-2.7

我是 Python 新手，已经学习了 3 个月的基础知识，学习类型、函数和算法。现在我开始练习使用 GAE 框架开发 Web 应用程序。

目标：拥有一个非常大的字典，可以从整个 Web 应用程序中的所有 .py 文件中访问它，而无需多次存储或在每次有人访问应用程序的 URL 时重新创建它。

我想将一个简单的 DB 表渲染到字典中，希望能够提高速度，因为它会在内存中。

我也计划在内存中创建一个 DAWG - TRIE

我不希望每次调用页面时都创建这个字典，我希望它在内存中存储一​​次，保存在那里并由所有会话使用和访问，如果可能的话也进行修改。

我怎样才能做到这一点？就像一个简单的内存数据库，但实际上是一个 Python 字典？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T11:35:17.257

使用[内存缓存](https://developers.google.com/appengine/docs/python/memcache/usingmemcache)。您可以将腌制的字典存储在内存缓存中，但您也可以直接将键/值存储在内存缓存中。编写一个包装类，确保从数据存储中加载值（如果它们尚未在内存缓存中）。

或者更好的是，只需使用[ndb](https://developers.google.com/appengine/docs/python/ndb/overview)，它会自动为您在 memcache 中缓存值。这样您只需从数据存储中查询值，ndb 会自动为您缓存内存中的值（跨多个请求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:19:08.280

我将对此进行尝试并提出标准的python[搁置](http://docs.python.org/library/shelve.html#module-shelve)模块。这提供了一个由 dbm 文件支持的简单持久字典。

有一些特别与并发相关的警告。*如果启用了回写*，它确实提供了一些缓存，但同样可能存在内存消耗问题。另一个限制是键必须是字符串。

不过，它可能值得一看。它绝对符合“纯 Python hack”的描述。

简单的例子：

```
import shelve

d = shelve.open('my_shelf')
for i in range(100000):
    d[str(i)] = 'Item %s' % i
d.close()
d = shelve.open('my_shelf')
>>> d['50000']
'Item 50000' 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-13T11:30:06.280

这是不可能的（没有外部服务）。为此，DB 可以存储比一个请求更长的数据。您可以做的是保护用户会话“中”的字典，但我不建议这样做。除非您有数百万个条目，否则每个 DB 都足够快，即使是 sqlite。

# javascript - 如何更改日期控件的背景颜色？

> ID：11013918
> 
> 赞同：0
> 
> 时间：2012-06-13T11:28:28.803
> 
> 标签：javascript, jquery-ui, datepicker

我使用以下样式更改 jquery 中的日期选择器颜色。如何更改日期背景颜色。这里它将显示 1、2、3 后面的蓝色，最多 30。我需要更改那个蓝色？怎么办这个？

```
 <style type="text/css">
.ui-datepicker {
   background: #333;
   border: 1px solid #555;
   color: #EEE;
 }
</style> 
```

![在此处输入图像描述](../Images/3b8cb96df18b3a3a9af04000795b1f52.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:34:20.767

在“.ui-datepicker td”类中添加颜色

例如

```
.ui-datepicker td {
border: 0;
padding: 1px;
background: #f00;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:39:43.683

尝试这个，

```
.ui-state-default {
    background-color: #ccc !important;
    background-image: none !important;
} 
```

[演示](http://jsfiddle.net/uGEzp/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:42:24.990

```
 <style type="text/css">
     .ui-datepicker {
      background: #999;
      border: 1px solid #555;
       color: #EEE;
       }
     </style> 
```

# jquery - Rails 3.1 - 动态选择菜单

> ID：11013921
> 
> 赞同：0
> 
> 时间：2012-06-13T11:28:33.663
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3.1

我已经按照并正在使用修改后的 Railscast（第 88 集）中显示的动态选择菜单来选择主要流派和相关的子流派。一切似乎都运行良好，但我现在注意到某些主要类型并没有通过它们的子类型。似乎名称中带有空格的流派正在停止工作。在 Railscast 示例中，我看不到任何有关处理此问题的参考。任何人都可以建议解决这个问题吗？我想这是进行某种解析的情况，但不确定从哪里开始。

Railscast 在这里 [http://railscasts.com/episodes/88-dynamic-select-menus-revised](http://railscasts.com/episodes/88-dynamic-select-menus-revised) 我完全按照它。唯一的区别是我有主要流派/子流派，例如：

摇滚 / 朋克摇滚 / 独立摇滚 / 硬摇滚

电子舞曲 / Techno 电子舞曲 / Drum & Bass 电子舞曲 / Electronica

摇滚选择工作正常，舞蹈和电子则不行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:13:22.790

听起来您可能错过了在第一个选择菜单中转义文本的步骤？

```
country = $('#person_country_id :selected').text()
escaped_country = country.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1') 
```

查看最后一部分：[http ://railscasts.com/episodes/88-dynamic-select-menus-revised?view=asciicast](http://railscasts.com/episodes/88-dynamic-select-menus-revised?view=asciicast)

# php - 在 PHP 中打破 $_POST 数组

> ID：11013931
> 
> 赞同：1
> 
> 时间：2012-06-13T11:28:52.547
> 
> 标签：php, arrays

我有一个`$_POST`数组如下

```
Array
(
    [questionTitle1] => question one
    [questionNote1] => note one
    [oprtionValue11] => green 1
    [oprtionValue21] => blue 1
    [oprtionValue31] => orange 1
    [questionTitle2] => question two
    [questionNote2] => note two
    [oprtionValue5] => green 2
    [oprtionValue6] => blue 2
    [oprtionValue7] => orange 2
    [oprtionValue8] => red 2
) 
```

在这里，我想在 $key like questionTitle% 出现时将数组分解为单独的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:32:39.677

尝试这个

```
$filteredArray = array();
$indexPattern = '/questionTitle(.*)/';
foreach($_POST as $key => $value) {
    if(preg_match($indexPattern, $key)) {
        $filteredArray[$key] = $value;
    }
} 
```

# jsp - 如何完成“ " 使用 Struts

> ID：11013934
> 
> 赞同：0
> 
> 时间：2012-06-13T11:29:06.873
> 
> 标签：jsp, servlets, struts

在我的 JSP 页面中，添加了一个标记`<jsp:include page="servletName" />`。这里 servletName 是 HttpServlet 类，该类向 Request 对象添加了一些属性。然后，再次在 jsp 页面中，检索设置为请求对象的值（已完成此操作以减少 jsp 页面中的代码行）。

我想在 Struts 2 应用程序中执行此操作。

我想调用一个动作类（类似于`<jsp:include />`普通的 jsp 应用程序），然后该类将一些值设置为 Request object(Value Stack) 。然后应该使用 Struts Tags 在 jsp 类中检索这些值。

我怎样才能做到这一点？

另外，如何发送绑定到jsp页面的请求参数并将其发送到动作类？ [这里](http://www.coderanch.com/t/59108/Struts/include-struts-action-jsp)显示了我想要的东西：

```
<s:action name="Login" flush="true" executeResult="true" namespace="/secure"/> 
```

但是我不清楚如何编写`execute()`struts.xml 和使用的属性。任何人都可以为我清除它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:46:48.030

使用 Struts 之`IncludeAction`类的。

```
<jsp:include page=”/App1/legacyA.do” />

<action path=”/legacyA”
parameter=”/xoom/LegacyServletA”
type=”org.apache.struts.actions.IncludeAction” /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:52:40.073

使用[`<s:action>`标签](http://struts.apache.org/2.x/docs/action.html)。

然而，我质疑这样做的必要性；如果这样做的频率足以保证这一点，请考虑使用实现 Preparable 的基本操作类，并创建一个特定于应用程序的子类方法来为需要自己准备的操作添加行为。

IMO 依赖视图添加它需要的对象是违反关注分离的。

# spring - spring mvc:resources 使带注释的控制器不可用

> ID：11013935
> 
> 赞同：1
> 
> 时间：2012-06-13T11:29:09.560
> 
> 标签：spring, model-view-controller, tomcat, spring-mvc

我在 spring 3.1 配置中使用 mvc:resources 时遇到问题。

最初，我正在研究在 tomcat 6 上集成 spring 3.0、JPA 的项目。在 tomcat 6 服务器上，我使用 web.xml 中的以下 servlet 映射从我的应用程序访问静态内容（css、js 和 png 等）。

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/static/*</url-pattern>
</servlet-mapping> 
```

我不确定这是否是最佳实践，但它在 tomcat6 环境中运行良好。它在 tomcat 7 上不起作用。所以我切换到 spring 3.1 以使用 applicationContext 中的 mvc:resources 元素。我为 3.1 更改了 xml 命名空间，并在 applicationContext.xml 中添加了这两行。

```
<mvc:annotation-driven/>
<mvc:resources location="/resources/" mapping="/static/**"/> 
```

在我添加上述两行配置之前，整个应用程序运行良好。但是现在框架没有检测到所有带注释的控制器。我在应用程序根目录中没有 index.jsp 或任何欢迎文件，我将根请求“/”映射到带注释的 RootController.java。所以应用程序主页甚至没有加载。

当我在网上搜索解决方案时，我发现 mvc:annotation-driven 替换了一些我认为是由框架隐式定义的默认 bean 配置。我在这个论坛中找到了一些适用于某些人的解决方案，即我自己明确定义一些 bean 配置。我尝试添加以下两行

```
<bean class ="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"/> 
<bean class ="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"/> 
```

但不幸的是，这并不能解决我的问题。我不确定这是否是我现在面临的真正问题，所以这是我的 applicationContext.xml 供您检查我当前的配置。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:component-scan base-package="com.yewintko.uog.emailcampaignmanager">
        <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
    </context:component-scan>

    <tx:annotation-driven/>
    <mvc:annotation-driven/>

    <mvc:resources location="/resources/" mapping="/static/**"/>
<bean class = "org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" /> 
<bean class = "org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"/>   

<context:property-placeholder location="classpath:database.properties"/>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${database.driver}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="EmailCampaignManager"/>
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="databasePlatform" value="${database.platform}"/>
                <property name="showSql" value="${database.showSql}"/>
                <property name="generateDdl" value="${database.generateDdl}"/>
            </bean>
        </property>
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.ejb.naming_strategy">org.hibernate.cfg.ImprovedNamingStrategy</prop>
            </props>
        </property>
    </bean>
</beans> 
```

我对spring很陌生，不知道我的applicationContext中缺少哪个配置。如果你有一点空闲时间，请有人帮助我。如果您需要更多信息，请告诉我。

关于 Yewint

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:11:19.073

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/static/*</url-pattern>
</servlet-mapping> 
```

将您的控制器放在`http://localhost:8080/{warname}/static/{controller}` 但是映射您的资源 servlet 映射到相同的 url。您可以通过更改任一映射来解决此问题。因为我假设我希望您的资源 servlet 指向 /static/* 路径，所以您要做的就是将 servlet 更改为 /

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

然后你的控制器在`http://localhost:8080/{warname}/{controller}` 并且你的静态内容在`http://localhost:8080/{warname}/static/`

尝试将 mvc:resources 视为一个控制器，其方法带有 /static/** 注释，它将捕获您尝试对服务执行的所有请求。

出于生产环境中的性能原因，最好使用常规网络服务器来提供静态内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:14:26.770

Spring 没有扫描您的带注释的控制器是因为 applicationContext.xml 文件中的以下行。

```
<context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/> 
```

请删除该行，它将解决您的问题。希望这可以帮助你欢呼。

# sqlite - 使用和关联多个数据库

> ID：11013936
> 
> 赞同：0
> 
> 时间：2012-06-13T11:29:20.607
> 
> 标签：sqlite, sqlalchemy, multiple-databases

我似乎找不到一个好的答案。SQLAlchemy（声明式）连接两个 SQLite 数据库的正确方法是什么？我还需要在这两个单独的数据库中的两个表之间建立关系。

**编辑：** 这是某种评论系统。我已经有一个包含数据（帖子）的数据库，现在我正在围绕它构建一个社交 Flask 网络应用程序，用户可以在其中注册和评论这些帖子。最好，我希望帖子数据库的代码尽可能保持不变，这样我就可以将相同的代码用于 Web 和桌面应用程序。

这就是它的基本外观：

```
database1 (created and controlled by flask-sqlalchemy):
  - users
  - comments

database2 (created and controlled by SQLAlchemy):
  - posts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:08:01.283

请查看[Simple Vertical Partitioning](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#simple-vertical-partitioning)的文档，从那里引用：

> 垂直分区在多个数据库中放置不同类型的对象或不同的表：

```
engine1 = create_engine('postgresql://db1')
engine2 = create_engine('postgresql://db2')

Session = sessionmaker(twophase=True)

# bind User operations to engine 1, Account operations to engine 2
Session.configure(binds={User:engine1, Account:engine2})

session = Session() 
```

[另请阅读SQLAlchemy Declarative + 跨多个不同数据库的关系](https://stackoverflow.com/q/7410010/99594)问题中的答案，这将为您提供更多示例代码

# python - 针对 Ubuntu 12.04 中的 openssl 错误的 Google App Engine SDK urlfetch 解决方法

> ID：11013941
> 
> 赞同：1
> 
> 时间：2012-06-13T11:29:55.733
> 
> 标签：python, google-app-engine, openssl, urlfetch, ubuntu-12.04

Ubuntu 12.04 有一个关于 openssl 的开放错误。如果您尝试连接到不支持 TLS 1.2 的主机（例如 Evernote），您会收到“EOF 违反协议”。见[https://bugs.launchpad.net/ubuntu/+source/openssl/+bug/965371](https://bugs.launchpad.net/ubuntu/+source/openssl/+bug/965371)

在对该错误的评论中，httplib.py 有一个解决方法，其中强制使用 TLS 1.1。不幸的是，这不适用于 GAE SDK，因为它使用自己的基于 urlfetch 的自定义 httplib。

如何强制 urlfetch 使用 TLS 1.1 或以其他方式解决此错误？当我将我的应用程序上传到 GAE 时，它工作正常，所以我只需要对我的 SDK 进行本地修复。我曾尝试用 Python 2.7 中的已修补库存 httplib.py 替换自定义 httplib.py，但这只会导致进一步的问题，因为该模块需要 ssl 和套接字，而后者又需要另一个操作系统等。

编辑：回溯的最后一部分：

```
 File "evernote-sdk/lib/thrift/transport/THttpClient.py", line 122, in flush
    self.code, self.message, self.headers = self.__http.getreply()
  File "google_appengine/google/appengine/dist27/httplib.py", line 592, in getreply
    response = self._conn.getresponse()
  File "google_appengine/google/appengine/dist27/httplib.py", line 502, in getresponse
    raise HTTPException(str(e))
HTTPException: ApplicationError: 6 [Errno 8] _ssl.c:504: EOF occurred in violation of protocol 
```

问题在于 Ubuntu 12.04、Evernote 的服务器/SDK 和 Google App Engine SDK 的组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:19:19.603

回溯显示错误源自此处： [http](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/dist27/httplib.py#490) ://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/dist27/httplib.py#490 此代码块使用 self._fetch在同一文件的第 363 行分配为 urlfetch.fetch。

现在我们现在使用 urlfetch 并且由于问题仅在 dev_appserver 上，让我们看一下 urlfetch_stub.py。存根模块使用 fancy_urllib 库来发出请求。我们也知道 ubuntu 启动板错误建议做一个

```
< self.sock = ssl.wrap_socket(sock, self.key_file, self.cert_file)
---
> self.sock = ssl.wrap_socket(sock, self.key_file, self.cert_file, ssl_version=ssl.PROTOCOL_TLSv1) 
```

这暗示了我们要修补的电话。在 fancy_urllib 中寻找 'ssl.wrap_socket' 给了我们 1 次命中：init.py#159"> **http://code.google.com/p/googleappengine/source/browse/trunk/python/lib/fancy_urllib/fancy_urllib/init** .py#159

您可以尝试修补此方法吗？我无法验证，因为我不知道如何重现该问题。

FWIW，在所有 SDK 代码中搜索“ssl.wrap_socket”也指向 httplib2 第三方库中的几行，但现在我认为这不是需要修补的地方。

# javascript - 使用 Chrome 的 webkit 检查器删除事件侦听器

> ID：11013943
> 
> 赞同：18
> 
> 时间：2012-06-13T11:29:57.727
> 
> 标签：javascript, google-chrome, webkit, inspector

我知道您可以在 Chrome Inspector 中看到事件侦听器，但我正在做一些调试工作，周围有很多事件侦听器，我想在不编辑代码的情况下禁用一些

![在此处输入图像描述](../Images/df99308cf0e7bb02ee8d1a5a36a4a6fe.png)

有没有办法从 Webkit 检查器中快速禁用事件侦听器？

也许看看并在控制台中输入一些代码给`removeEventListener`听众？我该怎么做？例如，我将如何删除上面的“点击”侦听器

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-08-24T21:24:03.843

您可以使用`getEventListeners(element).click[index].listener`来获取对侦听器的引用（在 WebKit 控制台中）。

因此，要删除第一个侦听器，您可以执行以下操作：

```
document.removeEventListener('click', getEventListeners(document).click[0].listener) 
```

同样，要删除所有侦听器，您可以使用此函数：

```
function removeEventListeners(element, listenerMap) {
    Object.keys(listenerMap).forEach(function (name) {
        var listeners = listenerMap[name];
        listeners.forEach(function (object) {
            element.removeEventListener(name, object.listener);
        });
    });
}

removeEventListeners(document, getEventListeners(document)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T12:24:49.053

抱歉，您不走运（至少暂时如此。）`removeEventListener`需要确切的侦听器函数对象作为参数，而 DevTools 不会让您以任何方式掌握侦听器函数。

[如果您确实需要此功能，请在http://new.crbug.com](http://new.crbug.com)（针对 Chrome）或[http://bugs.webkit.org](http://bugs.webkit.org)（针对 WebKit，首选方式）提交错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-06T09:14:56.713

您可以在 javascript 控制台中删除事件侦听器。首先找到此事件侦听器附加到的元素。让我们称之为e。然后你执行： `e.onclick=null`. 比如很多事件监听器都附加在“body”上，那么上面的代码就变成了： `document.body.onclick=null`。之后，事件侦听器被删除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-20T08:33:09.473

也许晚了，但是。

在 chrome 中有一个特定的按钮来删除特定事件的方法调用。

右键单击 html 输入（在我的示例中为按钮）检查元素，chrome 打开元素查看器选项卡（在 html 模式下），另一个面板由该面板中的子选项卡组成，单击“事件侦听器”选项卡并展开您正在处理的事件有兴趣（在我的示例中为 onclick）将鼠标指向您检查的按钮的名称，然后会出现一个“删除”按钮，单击事件侦听器会为当前加载的页面删除。

[![等等瞧](../Images/3ac317f833a1dae2b50fb7b5763ec6b5.png)](https://i.stack.imgur.com/95AbB.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-31T05:30:01.983

简单地：

```
getEventListeners(document).click[0].remove() 
```

这也适用于其他元素：

```
getEventListeners($('#submit-button')[0]).click[0].remove() 
```

和其他类型的事件：

```
getEventListeners($('#login-form')[0]).submit[0].remove() 
```

# c# - 向后移动树视图

> ID：11013946
> 
> 赞同：1
> 
> 时间：2012-06-13T11:30:03.593
> 
> 标签：c#, treeview

![在此处输入图像描述](../Images/ccc6bfa745aaccb9174bd06837683f41.png)

我希望向后移动 - 让我在“背景”节点中说。然后我想搬家：

```
->backgrounds
->component 6
->components
->assembly 3
->component 5
->component 4
->components
->assembly 2
->component 3
 ... 
```

谁能帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:08:38.177

由于我的评论很有帮助，我发布了这个答案。

您想要的称为后序中的最右遍历。您可以像这样递归地执行此操作：

```
public void traverse(TreeNode t)
{
    for (int i = t.Nodes.Count-1; i >= 0; i--)
    {
        traverse(t.Nodes[i]);
    }
    /*Do something*/
} 
```

您可以在此处阅读有关树遍历方法的更多信息：[树遍历](http://en.wikipedia.org/wiki/Tree_traversal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:47:52.177

这是一个内置功能，您可以使用 TreeNode.PrevVisibleNode 属性。像这样：

```
 private void MoveUp_Click(object sender, EventArgs e) {
        var node = treeView1.SelectedNode;
        if (node != null && node.PrevVisibleNode != null) 
            treeView1.SelectedNode = node.PrevVisibleNode;
        treeView1.Focus();
    } 
```

# sql - 排序、排序、筛选 SQL Server 的复杂组合

> ID：11013950
> 
> 赞同：4
> 
> 时间：2012-06-13T11:30:08.453
> 
> 标签：sql, sql-server, sql-order-by, filtering

基本上我必须从 SQL 数据库中构建项目列表，但是用户可以选择对 7 个过滤器的任意组合进行过滤，也可以选择要排序的列以及按方向排序。

正如您可以想象的那样，这会以大量不同的组合进行编码，并且数据集非常大，所以我想避免在应用程序中这样做。

到目前为止，在我的存储过程中，我尝试过：

*   构建一个查询字符串，虽然这非常简单且易于遵循，但它会使应用程序对 SQL 注入开放，所以我宁愿避免这种情况。

*   使用一组`IF ELSE`语句来运行适当的参数化 SQL，但这很快就会变成一棵巨大的树，维护起来将是一场噩梦。

我不是第一个需要这样的解决方案的人，一定有比上述更好的方法吗？`IF`另外作为一个附带问题，除了做很多s之外，是否有一种以参数化方式进行排序和按方向排序的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:41:21.193

> 构建一个查询字符串，虽然这非常简单且易于遵循，但它会使应用程序对 SQL 注入开放，所以我宁愿避免这种情况。

如果您使用**sp_executesql**并将参数作为参数传递给该存储过程，则不会。由于您将数据作为参数提供，因此不会有 sql 注入

[http://sqlinthewild.co.za/index.php/2009/04/03/dynamic-sql-and-sql-injection/](http://sqlinthewild.co.za/index.php/2009/04/03/dynamic-sql-and-sql-injection/)

[http://blogs.msdn.com/b/raulga/archive/2007/01/04/dynamic-sql-sql-injection.aspx](http://blogs.msdn.com/b/raulga/archive/2007/01/04/dynamic-sql-sql-injection.aspx)

> 我也尝试过使用一组 IF ELSE 语句来运行正确的参数化 SQL，但这很快就会变成一棵巨大的树，维护起来将是一场噩梦。

如果您使用 IF ELSE 则同意，但还有一种称为**捕获所有查询的模式**

```
WHERE (ProductID = @Product Or @Product IS NULL)
AND (ReferenceOrderID = @OrderID OR @OrderID Is NULL)
... 
```

更多信息在这里 [http://sqlinthewild.co.za/index.php/2009/03/19/catch-all-queries/](http://sqlinthewild.co.za/index.php/2009/03/19/catch-all-queries/)

请务必在末尾指定 OPTION (RECOMPILE)，否则您的查询可能会因所谓的**参数嗅探而受到影响**

```
Also as a side question is there a good way to do order by and order by direction in a parameterised way, besides doing lots of IFs? 
```

[SQL 存储过程](https://stackoverflow.com/questions/149380/dynamic-sorting-within-sql-stored-procedures)中的动态排序可能重复

最后，您可以使用 sp_executesql 或捕获所有查询（这是这两种尝试过的解决方案的常见问题）。我通常更喜欢捕获所有查询，但不要忘记指定选项（重新编译）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:42:00.570

对于过滤，使用[`COELSCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)来按任何条件组合进行过滤。在您的存储过程中，将有一个用户将搜索的所有参数的列表，然后在您的查询中将类似于：

```
 SELECT * 
 FROM YourTable t
 WHERE 1 = 1
 AND t.FirstColumn = COALESCE(@FirstColumnParam, t.FirstColumn)
 AND t.SecodndColumn = COALESCE(@SecondColumnParam, t.SecondColumn) 
 .... 
```

如果任何参数为空，则跳过该条件。`1=1`如果没有过滤器代码传递给您的查询。

对于排序：您可以使用该`CASE`语句按任何选择的列排序：

```
ORDER BY ( CASE WHEN @OrderByParam = 1 Then FirstColumn ELSE .... END) 
```

# c# - 防止 TcpClient 的 NetworkStream ReadTimeout 关闭套接字

> ID：11013951
> 
> 赞同：2
> 
> 时间：2012-06-13T11:30:09.023
> 
> 标签：c#, .net, tcp

我有一个通过 TCP 与设备通信的类。我发送命令，然后`stream.Read(reply, 0, 1)`在 TcpClient 的 GetStream() 上发出。我读出每个字节，然后将读取的字节组合成一个字符串，并将该字符串与终止字符串进行比较，让我知道何时停止读取。

设备软件存在一些缺陷，因此并不总是发送终止字符串。我想以适当的方式处理这个问题，并使用一段时间来确定是否应该停止读取。

如果我将 设置`stream.ReadTimeout`为 以外的其他`-1`值，则超过此超时时套接字将关闭，这是我不希望的。

如果我`stream.BeginRead(..)`与 a 一起使用，`stream.ReadTimeout = -1`那么我会在一段时间后吸干线程池。

可以构建什么智能解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:51:07.527

你可以检查`stream.DataAvailable()`

如果 stram 中有可用数据：读取它，将读取的字节组合成一个字符串，并将该字符串与终止字符串进行比较。

如果没有终止字符串，则设置超时（您可以使用线程）并等待任何传入数据，如果没有新的传入数据将 ReadTimeout 设置为 1，否则读取新数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:14:44.487

~~我设法使用`stream.DataAvailable`.~~

它是这样的：

```
do
{
    try
    {
        if (socket.Poll(socketTimeout, SelectMode.SelectRead))
        {
            socket.Receive(reply, 0, 1, SocketFlags.None);
        }
        else
        {
            throw new SocketException((int)SocketError.TimedOut);
        }
        replyString.Append(Encoding.ASCII.GetString(reply, 0, reply.Length));
        // Termination string logic...
    }
    catch (SocketException e)
    {
        // Check on e.SocketErrorCode if necessary.
        break;
    }

} while (!terminationReached); 
```

在哪里`socket = _tcpClient.Client;`

**编辑：**
`socket.Receive`也会在超时时关闭套接字，`socket.Poll`但不会。 ~~改为使用`socket.Receive(..)`而不是`stream.Read(..)`.~~

# c# - 从 Azure Blob 存储读取文件

> ID：11013953
> 
> 赞同：11
> 
> 时间：2012-06-13T11:30:11.193
> 
> 标签：c#, azure, azure-storage, azure-blob-storage

我想从 azure 存储中读取 PDF 文件字节，因为我有一个文件路径。

```
https://hostedPath/pdf/1001_12_Jun_2012_18_39_05_594.pdf 
```

那么可以通过直接传递其路径名称来从 blob 存储中读取内容吗？我也在使用c#。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T12:42:13.387

只要 blob 是*public*，您绝对可以传递 blob url。例如，您可以将其嵌入到 html 图像或链接中：

```
<a href="https://myaccount.blob.core.windows.net/pdf/1001_12_Jun_2012_18_39_05_594.pdf">click here</a> 
```

默认情况下，blob 容器是*私有*的。要启用公共读取访问权限，您只需在创建容器时更改容器权限。例如：

```
var blobStorageClient = storageAccount.CreateCloudBlobClient();
var container = blobStorageClient.GetContainerReference("pdf");
container.CreateIfNotExist();

var permissions = container.GetPermissions();
permissions.PublicAccess = BlobContainerPublicAccessType.Container;
container.SetPermissions(permissions); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T13:24:12.557

就像 David 解释的那样，只要容器不是私有的，您就可以通过其 url 访问任何 blob。

[如果容器是私有的，您仍然可以使用共享访问签名](https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/)(SAS)通过 url 访问您的文件 。这将允许您授予用户下载文件的权利（通过向他们提供 SAS，[通常附加到 URL](http://blogs.msdn.com/b/eugeniop/archive/2010/04/13/windows-azure-guidance-using-shared-key-signatures-for-images-in-a-expense.aspx)）但及时限制他们。

例如，当您需要付费下载时，这是完美的选择，以保护您的文件，但如果有人付费，则允许在有限的时间内下载它们。

现在，在您的问题中，您声明您正在使用 C#。如果您想在 WPF/Windows Forms/Console 应用程序中下载该文件，您可以简单地使用 WebClient 下载该文件（如果容器是公共的或者您将 URL 附加到 SAS）：

```
WebClient myWebClient = new WebClient();
myWebClient.DownloadFile("https://myaccount.blob.core.windows.net/pdf/1001_12_Jun_2012_18_39_05_594.pdf", @"D:\Data\myPdfFile.pdf"); 
```

# django - django 对 Sqlite3 中的 models.IPAddressField() 使用什么列类型

> ID：11013955
> 
> 赞同：0
> 
> 时间：2012-06-13T11:30:16.167
> 
> 标签：django, django-models

我会自己尝试，但我不能。有人可以帮我查一下吗？我运行 Django 1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:37:09.427

这样的事情应该得到正确的答案：

```
from django.db import connection

for field in Model._meta._fields():
    print field, field.db_type(connection) 
```

在 sqlite3 上应该给你这样的 IPAddressField ：

```
<django.db.models.fields.IPAddressField object at 0x101520410> char(15) 
```

或者如果您使用多个数据库：

```
from django.db import connections

connection = connections['your_db_alias']

for field in Model._meta._fields():
    print field, field.db_type(connection) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:14:07.910

我认为这只是一个 varchar(15)。IPAddressField() 的定义并没有改变很多正常的 Field 行为。

# .net - WCF Web 服务的控制台主机正在关闭

> ID：11013961
> 
> 赞同：0
> 
> 时间：2012-06-13T11:30:39.583
> 
> 标签：.net, wcf, web-services

我的 WCF Web 服务 PROGRAM.CS 有这个控制台主机

```
 class Program
     {
        static void Main(string[] args)
        {
            WebServiceHost Host = new WebServiceHost(typeof(Service1));

            try
            {
                Host.Open();
                Console.ReadLine();
                Host.Close();
            }

            catch (Exception e)
            {
                Console.WriteLine(e);
                Host.Abort();
            }

        } 
```

这是我的主机 app.config

```
<configuration>
  <system.web>
    <compilation debug="true"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service name="Csvpost.Service1">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8000/"/>
          </baseAddresses>
        </host>
      </service>
    </services>
  </system.serviceModel>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
</configuration> 
```

这是服务的 Service1 类

```
 public class Service1 : IService1
    {
        public Stream HandleMessage(Stream request)
        {
            StreamReader reader = new StreamReader(request);
            string text = reader.ReadToEnd();
            System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
            MemoryStream ms = new MemoryStream(encoding.GetBytes(text));
            WebOperationContext.Current.OutgoingResponse.ContentType = "text/html";
            string[] sites = text.Split('\n');
            int y = sites.Length;
            int i;
            for (i = 0; i < y; i++)
            {
                /logic/
                System.Data.SqlClient.SqlConnection con;
                System.Data.SqlClient.SqlCommand cmd;
                con = new System.Data.SqlClient.SqlConnection(connection);
                cmd = new System.Data.SqlClient.SqlCommand(query, con);
                con.Open();
                cmd.ExecuteNonQuery();
                con.Close();
            }
            return ms;
        }
    } 
```

我的主机一开始运行就会关闭。我犯了什么错误？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:01:16.967

您正在尝试在控制台中启动 WebServiceHost。您需要启动一个 ServiceHost。这也可能是您没有收到错误消息的原因，因为 WebServiceHost 不会写入控制台。

而且您没有将服务附加到配置中的端口。这是一个为我工作的控制台主机。

```
<services>
  <service name="MajicEightBallServiceLib.MagicEightBallService"
           behaviorConfiguration="EightBallServiceMEXBehavior" >
    <endpoint address=""
              binding="wsHttpBinding"
              contract="MajicEightBallServiceLib.IEightBall" />
    <endpoint address="mex"
              binding ="mexHttpBinding"
              contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8000/MagicEightBallService"/>
      </baseAddresses>
    </host>             
  </service>
</services> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:49:32.077

尝试使用 WCF 的 Trace 选项。它将为您记录错误。您的应用程序被提前终止。Trace 将帮助您识别问题。

# jquery - Android/Iphone 支持“data-”属性

> ID：11013968
> 
> 赞同：0
> 
> 时间：2012-06-13T11:31:17.090
> 
> 标签：jquery, html

我正在为 Android/Iphones 开发应用程序

我正在使用 JQuery Mobile 和 PhoneGap。

我需要在链接列表中存储一些数据，所以我正在考虑使用它：

它似乎可以在我的手机（Android 2.3.3）上使用，但是当看到这个列表时：http: [//html5test.com/compare/feature/elements-dataset.html](http://html5test.com/compare/feature/elements-dataset.html)（向下滚动到 Android 手机）

似乎很多手机网络浏览器不支持“数据”属性功能。这真的正确吗？为什么它可以在我的 Android 2.3.3 手机上运行，​​而在上面的链接中它说它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:39:32.847

似乎 html5test.com 站点有误，或者它对“嵌入自定义不可见数据”有一些特殊含义。

通常的参考 caniuse.com 表示`data-`所有浏览器都支持此类属性，但访问它们的方式有所不同：http: [//caniuse.com/#feat=dataset](http://caniuse.com/#feat=dataset)

# android - Android：如何获得互联网连接上传速度和延迟？

> ID：11013971
> 
> 赞同：3
> 
> 时间：2012-06-13T11:31:22.553
> 
> 标签：android, file-upload, network-programming

我想查找设备网络上传速度和延迟，我尝试了 FTP 文件上传但没有成功。有人可以帮我确定网络上传速度吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T11:48:49.433

获取当前网络连接类型：

```
TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
int networkType = telephonyManager.getNetworkType(); 
```

对于延迟：

```
String host = "172.16.0.2";
int timeOut = 3000; 
long[] time = new long[5];
Boolean reachable;

for(int i = 0; i < 5; i++)
{
  long BeforeTime = System.currentTimeMillis();
  reachable = InetAddress.getByName(host).isReachable(timeOut);
  long AfterTime = System.currentTimeMillis();
  Long TimeDifference = AfterTime - BeforeTime;
  time[i] = TimeDifference;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T13:11:49.720

我点击了[这个链接](http://www.gregbugaj.com/?p=47)并获得了几乎正确的下载速度。为了提高上传速度，我创建了一个 PHP api，将其上传到 FTP 服务器并从设备调用它并上传一个文件。然后我计算上传前和上传后的时间以获得上传速度。

# iphone - 读取 Emai 的控制器 - IPad App - Objective C/xcode

> ID：11013972
> 
> 赞同：0
> 
> 时间：2012-06-13T11:31:28.617
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想在我的 iPad 应用程序中撰写或阅读电子邮件。有没有办法可以实现这个功能？我的意思是有没有用于阅读电子邮件的控制器？我是目标 C 的新手。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:34:48.577

没有用于阅读电子邮件的 api，对于撰写电子邮件，您可以使用`MFMailComposeViewController` 查看以下[教程](http://geekios.wordpress.com/2011/11/05/how-to-send-mail-in-iphone-using-msmailcomposer-framework/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:42:13.503

没有办法阅读我所知道的电子邮件，但要显示电子邮件撰写弹出窗口，您可以`MFMailComposeViewController`在 MessageUI 框架中使用。

```
MFMailComposeViewController* mail = [[MFMailComposeViewController alloc] init];
[mail setMailComposeDelegate:self];
[self presentViewController:mail animated:YES completion:nil]; 
```

您需要`MFMailComposeViewControllerDelegate`通过将其添加到您的类头来使您的类符合：

```
#import <MessageUI/MessageUI.h>

@class MyViewController : UIViewController <MFMailComposeViewControllerDelegate> {
    ... 
```

并在你的类中的某个地方实现它的回调方法：

```
-(void) mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {

    // Hide the message composer
    [self dismissViewControllerAnimated:YES completion:nil];

} 
```

您还需要链接到 MessageUI.framework。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:21:11.903

我认为没有办法阅读电子邮件。除非您使用 UIWebView 来实现它。（据我所知）。但是，这不符合您的要求，因为这只会加载电子邮件站点；更像一个浏览器。

不过，您可以通过 MFMailComposeViewController（MessageUI 框架）撰写和发送电子邮件。试试这个有用的[教程](http://mobile.tutsplus.com/tutorials/iphone/mfmailcomposeviewcontroller/)。

# python - 当不同的应用程序访问它时维护mysql中的数据完整性

> ID：11013976
> 
> 赞同：2
> 
> 时间：2012-06-13T11:31:50.497
> 
> 标签：python, mysql, ruby-on-rails, database, triggers

好的，我们有 Rails webapp，它将数据存储在 mysql 数据库中。表格设计阅读效率不高。所以我们求助于在 mysql 中创建一组单独的只读表，并让我们所有的内部 API 调用都使用这些表进行读取。我们使用回调来保持两个表集之间的数据同步。现在我们有另一个 Python 应用程序将与同一个数据库混淆 - 现在我们如何继续维护数据完整性？

不能再使用活动记录回调。我们知道我们可以使用触发器来做到这一点。但是还有其他优雅的方法可以做到这一点吗？人们如何实现维护此类派生数据的完整性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:36:02.530

是的，重构代码以将数据 Web 服务放在数据库前面，并让 Ruby 和 Python 应用程序与该服务对话。让它保持所有完整性和业务规则。

“不要重复自己”——这是一个很好的规则。

# css - 链接的css边距在Firefox中是可点击的，而不是在webkit中

> ID：11013981
> 
> 赞同：2
> 
> 时间：2012-06-13T11:32:06.533
> 
> 标签：css, firefox, webkit, margin

我有两个按钮来循环浏览一些内容，它们在每个按钮的左侧都有一个边距，在 chrome 和 safari 中这很好，但在 Firefox 中，边距是可点击的，让您可以点击一个按钮并意外击中另一个并朝错误的方向循环。如果您使用填充，也会发生同样的情况

我附上了问题的 jsFiddle [http://jsfiddle.net/JKhjm/1/](http://jsfiddle.net/JKhjm/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:36:21.890

改变：

```
.proj-nav img {margin: 0 0 0 70px;} 
```

到：

```
.proj-nav a {margin: 0 0 0 70px;} 
```

换句话说，将 应用于`margin`链接而不是其内容。

# java - 是否有任何工具或库可以将 YAML 或 XML 文件转换为 Java 代码？

> ID：11013985
> 
> 赞同：0
> 
> 时间：2012-06-13T11:32:28.507
> 
> 标签：java, xml, code-generation, yaml, xstream

是否有工具或库可以将序列化为 YAML 或 XML 文件的对象转换为创建该对象的 Java 代码？

从技术角度来看，我认为这里没有困难。Yaml 和 XStream（或其他类似工具）都需要通过反射找到 Java 类名，找到构造函数，调用它，然后找到 setter 并调用它们。反射调用可以替换为执行相同操作的 Java 代码生成。但是，它需要一些工作。

这样的工具存在吗？或者也许有人正在开发它并想与公众分享？

PS 任何能够将给定 Java 对象转换为 Java 代码的库都可以满足我的需求。

**澄清**

我希望该工具能够转换示例 YAML：

```
--- !pl.example.Contact
name: Nathan Sweet
age: 28 
```

或 XML：

```
<contact>
  <name>Nathan Sweet</name>
  <age>28</age>
</contact> 
```

进入代码：

```
pl.example.Contact contact = new pl.example.Contact();
contact.setName("Nathan Sweet");
contact.setAge(28); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T09:31:01.143

我问过关于将 YAML 或 XML 转换为 Java 代码的问题，但我真正需要的是生成能够创建给定 Java 对象的 Java 代码。可以通过许多 Java YAML 库之一来读取现有的 YAML。

但是，我找不到任何可以从给定 Java 对象创建 Java 代码的库。可能是我搜索了错误的关键字，也可能是我太早完成了搜索，但我没有找到任何东西。

我自己写了那个工具。代码非常原始，在很多情况下可能还不够（它不支持抽象类和接口等），但对于我想要完成的任务来说已经足够了。所以我发布了我的解决方案的源代码作为我的问题的答案：

```
import java.beans.PropertyDescriptor;
import java.lang.reflect.InvocationTargetException;
import java.util.*;

import org.apache.commons.beanutils.PropertyUtils;
import org.apache.commons.lang.StringEscapeUtils;

public class BeanCodeGenerator {

    private class Context {
        private int index;
        private StringBuilder sb = new StringBuilder();
        private String br = "\n\t\t";
    }

    public String generateBeanMethod(Object bean, String methodName) {
        Context ctx = new Context();
        Class type = _getBeanClass(bean);
        ctx.sb.append("\tpublic ").append(type.getCanonicalName()).append(" ").append(methodName)
            .append("() {").append(ctx.br);

        String vname = "null";
        try {
            vname = _valueStr(bean, type, ctx);
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        }
        ctx.sb.append("return ").append(vname).append(";\n");
        ctx.sb.append("\t}\n");
        return ctx.sb.toString();
    }

    private String _outputBean(Object bean, Context ctx) throws IllegalAccessException, IllegalArgumentException, InvocationTargetException {
        // output block of code creating bean
        String vname = "v" + ctx.index;
        String cname = bean.getClass().getCanonicalName();
        ctx.sb.append(cname).append(" ").append(vname).append(" = new ").append(cname).append("();").append(ctx.br);
        PropertyDescriptor[] props = PropertyUtils.getPropertyDescriptors(bean);
        for (PropertyDescriptor prop : props) {
            if (prop.getReadMethod() == null || prop.getWriteMethod() == null)
                continue; // skip such 'properties'
            Object value = prop.getReadMethod().invoke(bean);
            if (value == null)
                continue;
            String valueStr = _valueStr(value, prop.getReadMethod().getReturnType(), ctx);
            if (valueStr != null) {
                ctx.sb.append(vname).append(".").append(prop.getWriteMethod().getName()).append("(")
                    .append(valueStr).append(");").append(ctx.br);
            }
        }
        return vname;
    }

    private Class _getBeanClass(Object bean) {
        if (bean == null)
            return null;
       if (_isCollection(bean)) {
           if (bean instanceof List)
               return ArrayList.class;
           if (bean instanceof Set)
               return HashSet.class;
           if (bean instanceof Map)
               return HashMap.class;
       }
       return bean.getClass();
    }

    private String _valueStr(Object value, Class type, Context ctx) throws IllegalAccessException, IllegalArgumentException, InvocationTargetException {
        String valueStr = _outputValue(value, type);
        if (valueStr == null) {
            if (_isBean(value)) {
                ctx.index++;
                valueStr = _outputBean(value, ctx);
            } else if (_isCollection(value)) {
                ctx.index++;
                valueStr = _outputCollection(value, ctx);
            }
        }
        if (valueStr == null)
            valueStr = "null";
        return valueStr;
    }

    private String _outputCollection(Object collection, Context ctx) throws IllegalAccessException, IllegalArgumentException, InvocationTargetException {
        String vname = "v" + ctx.index;
        if (collection instanceof List) {
            ctx.sb.append("java.util.ArrayList ").append(vname).append(" = new java.util.ArrayList();").append(ctx.br);
            List list = (List) collection;
            for (Object value : list) {
                if (value == null) {
                    ctx.sb.append(vname).append(".add(null);").append(ctx.br);
                    continue;
                }
                String valueStr = _valueStr(value, value.getClass(), ctx);;
                ctx.sb.append(vname).append(".add(").append(valueStr).append(");").append(ctx.br);
            }
        } else if (collection instanceof Set) {
            ctx.sb.append("java.util.HashSet ").append(vname).append(" = new java.util.HashSet();").append(ctx.br);
            Set set = (Set) collection;
            for (Object value : set) {
                if (value == null) {
                    ctx.sb.append(vname).append(".add(null);").append(ctx.br);
                    continue;
                }
                String valueStr = _valueStr(value, value.getClass(), ctx);;
                ctx.sb.append(vname).append(".add(").append(valueStr).append(");").append(ctx.br);
            }
        } else if (collection instanceof Map) {
            ctx.sb.append("java.util.HashMap ").append(vname).append(" = new java.util.HashMap();").append(ctx.br);
            Map map = (Map) collection;
            for (Object item : map.entrySet()) {
                Map.Entry entry = (Map.Entry) item;
                String valueStr = "null";
                String keyStr = "null";
                if (entry.getKey() != null) {
                    keyStr = _valueStr(entry.getKey(), entry.getKey().getClass(), ctx);
                }
                if (entry.getValue() != null) {
                    valueStr = _valueStr(entry.getValue(), entry.getValue().getClass(), ctx);
                }
                ctx.sb.append(vname).append(".put(").append(keyStr).append(", ").append(valueStr).append(");").append(ctx.br);
            }
        }
        return vname;
    }

    private boolean _isBean(Object value) throws SecurityException {
        if (value == null)
            return false;
        if (_isCollection(value))
            return false;
        Class type = value.getClass();
        try {
            type.getConstructor();
            return true;
        } catch (NoSuchMethodException e) {
            return false;
        }
    }

    private boolean _isCollection(Object value) {
        if (value == null)
            return false;
        Class type = value.getClass();
        return List.class.isAssignableFrom(type) || Set.class.isAssignableFrom(type) || Map.class.isAssignableFrom(type); 
    }

    // output simple value, returns null for non-singleliners
    private String _outputValue(Object value, Class type) {
        if (value == null)
            return null;
        Class vtype = value.getClass();
        if (type == long.class) {
            return value.toString() + "L";
        }
        if (type == float.class) {
            return value.toString() + "F";
        }
        if (type == short.class) {
            return "(short) " + value.toString() + "";
        }
        if (type.isPrimitive()) {
            return value.toString();
        }
        if (String.class.isAssignableFrom(type)) {
            return '"' + StringEscapeUtils.escapeJava(value.toString()) + '"';
        }
        if (Integer.class == type || Double.class == type || Boolean.class == type) {
            return type.getName() + ".valueOf(" + value.toString() + ")";
        }
        if (Long.class == type) {
            return type.getName() + ".valueOf(" + value.toString() + "L)";
        }
        if (Short.class == type) {
            return type.getName() + ".valueOf((short)" + value.toString() + ")";
        }
        if (Float.class == type) {
            return type.getName() + ".valueOf(" + value.toString() + "F)";
        }
        if (Date.class.isAssignableFrom(type)) {
            Date date = (Date) value;
            return "new java.util.Date(" + date.getTime() + "L)";
        }
        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:35:22.500

您可以在此处查看[YamlBeans](http://code.google.com/p/yamlbeans/)库。

它可以读写 Yaml 格式的 bean。

这是他们文档中的示例：

```
name: Nathan Sweet
age: 28

public class Contact {
        public String name;
        public int age;
}

YamlReader reader = new YamlReader(new FileReader("contact.yml")); 
Contact contact = reader.read(Contact.class);
System.out.println(contact.age); 
```

此外，似乎有[对 JAXB 的 Yaml 支持](http://docs.jboss.org/resteasy/docs/1.0.1.GA/userguide/html/Content_Marshalling_Providers.html#Built_in_YAML_Provider)

**编辑：**

根据您的说明，不，我不知道任何开箱即用的库，但是做到这一点应该不难（取决于您要加载的对象的复杂程度）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T11:42:16.443

是的，您可以使用 swagger hub，它可以为您提供来自 YAML 的客户端和服务器的代码（多种语言）。我也使用相同的，它具有为 REST API 生成偶数代码的能力。

网址：[http ://editor.swagger.io/](http://editor.swagger.io/)

教程网址：[https ://swagger.io/tools/open-source/getting-started/](https://swagger.io/tools/open-source/getting-started/)

# objective-c - Apple 的可达性文件中的奇怪错误

> ID：11013997
> 
> 赞同：17
> 
> 时间：2012-06-13T11:33:40.757
> 
> 标签：objective-c, ios

我正在尝试在我的项目中使用可达性。我添加了 Reachability.h 和 Reachability.m 文件。但是在构建项目后，xCode 向我显示了奇怪的错误：

```
Undefined symbols for architecture i386:
"_SCNetworkReachabilityCreateWithName", referenced from:
  +[Reachability reachabilityWithHostname:] in Reachability.o
"_SCNetworkReachabilityCreateWithAddress", referenced from:
  +[Reachability reachabilityWithAddress:] in Reachability.o
"_SCNetworkReachabilitySetCallback", referenced from:
  -[Reachability startNotifier] in Reachability.o
  -[Reachability stopNotifier] in Reachability.o
"_SCError", referenced from:
  -[Reachability startNotifier] in Reachability.o
"_SCErrorString", referenced from:
  -[Reachability startNotifier] in Reachability.o
"_SCNetworkReachabilitySetDispatchQueue", referenced from:
  -[Reachability startNotifier] in Reachability.o
  -[Reachability stopNotifier] in Reachability.o
"_SCNetworkReachabilityGetFlags", referenced from:
  -[Reachability isReachable] in Reachability.o
  -[Reachability isReachableViaWWAN] in Reachability.o
  -[Reachability isReachableViaWiFi] in Reachability.o
  -[Reachability connectionRequired] in Reachability.o
  -[Reachability isConnectionOnDemand] in Reachability.o
  -[Reachability isInterventionRequired] in Reachability.o
  -[Reachability reachabilityFlags] in Reachability.o 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-13T11:37:50.603

可能您忘记将 SystemConfiguration.framework 添加到您的项目中。如果您不知道如何添加框架，请查看这个[SO question](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T11:42:06.513

添加这些框架.. SystemConfiguration.framework Security.framework CFNetwork.framework

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T12:22:11.510

添加 Reachability .h 和 .m 文件时，我遇到了同样的错误。

解决方案是确保 Reachability .m 与您的其余 .m 文件一起编译。你需要这样做。

1.  单击项目导航器 - 播放/停止按钮下左上角的文件夹图标。
2.  选择目标
3.  单击“构建阶段”。
4.  单击“+”图标。并将 Reachability.m 文件添加到您的编译源中。

# sharepoint - excel vba 关闭在其他计算机上打开的工作簿

> ID：11013998
> 
> 赞同：0
> 
> 时间：2012-06-13T11:33:50.820
> 
> 标签：sharepoint, excel, vba

在 excel vba 中，我想检查存储在 SharePoint 服务器上的工作簿是否被任何人打开，如果它被打开，我想关闭它，以便能够在本地打开它并在其中写一些东西。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T04:27:50.610

寻找答案的方向，很抱歉没有直接的帮助，因为我不是 VBA 专家。

您可以检测是否在 SharePoint 文档库中签出文档（包括 Excel 工作簿）。如果您有足够的权限，您可以放弃结帐，但您将无法在可能打开它的远程计算机上“关闭工作簿”。请注意，它可能在没有被检出的情况下打开，也可能在特定时刻没有被打开而被检出。您应该能够使用 SharePoint Web 服务进行结帐检测。

通过在 shraepoint 上使用 http://... 位置，甚至在 SharePoint 服务器上启用它，甚至使用 \server 位置，在本地打开工作簿并保存应该相对容易。