# StackOverflow 问答 10087000-10087999

# c++ - 您应该如何在不取消的情况下处理线程中的文件打开错误？

> ID：10087004
> 
> 赞同：2
> 
> 时间：2012-04-10T10:27:22.823
> 
> 标签：c++, multithreading, fopen

我有一个服务应用程序，它读取包含要打开的文件列表的配置文件。问题是当它在目录中找不到文件时，它会引发异常，从而取消线程并停止服务应用程序。

这是在线程中调用的函数的代码块：

```
FILE* file_;
ServiceApp::File::File( const char* filename, const char* mode) :
file_(fopen(filename, mode))
{
    if( !file_ )
    {
    // throwing will stop the service when file doesn't exist, what work around could we do?
    throw std::runtime_error("file open failure");
} 
```

**问题：** 我们如何防止这种情况发生，以便当在目录中找不到配置文件中列出的文件时，应用程序会忽略它并继续该过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:37:47.843

我建议使用`std::async`. 如果通过 运行的函数抛出`std::async`，异常将保存在`std::future`. 当你打电话时，我会被重新抛出`std::future::get()`。但是，如果您不这样做，它将被“忽略”，因此您的应用程序将继续运行。

例子：

```
auto lambda = [] {
    throw std::runtime_error("error");
};

auto handle = std::async(std::launch::async, lambda); 
```

有关`std::async`阅读[此](http://en.cppreference.com/w/cpp/thread/async)内容的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:15:08.867

最简单的方法是将 try / catch 语句放在处理文件的代码块周围。在其他特殊情况下（例如读取网络文件时，在读取过程中消失），您很有可能会遇到其他异常，因此请仔细检查代码是否存在其他异常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:31:02.320

最简单的方法是在线程中尝试捕获您自己的异常，然后检查它是否是*该*异常（忽略它），如果是其他异常则重新抛出。

我不确定是否可以将信息添加到抛出的异常或遗留代码？在后一种情况下，您将不得不求助于字符串比较，这当然很难看。反正。

```
// pseudo-code
while(GotFilesInQueue())
{
  try
  {
    LoadNextFile();
  }
  catch(std::exception& e)
  {
    if(!IgnoreExceptionPredicate(e))
    {
      throw;
    }
  }
} 
```

[关于重新投掷](https://www-01.ibm.com/support/knowledgecenter/SSLTBW_2.2.0/com.ibm.zos.v2r2.cbclx01/cplr153.htm)

# grails - Hql or Criteria for selecting row with max value from groups

> ID：10087006
> 
> 赞同：0
> 
> 时间：2012-04-10T10:27:26.690
> 
> 标签：grails, hql, grails-orm, criteria

I need to write a criteria or HQL that selects InterfaceVersion only with the latest version for each interfaceCode. Version consists of majorVersion.minorVersion.editVersion.

exemple:

InterfaceVersion table:

```
id | interface_code_id | major_version | minor_version | edit_version
---|-------------------|---------------|---------------|-------------
 1 |                 1 |             1 |             1 |            6
 2 |                 1 |             1 |             5 |            0
 3 |                 2 |             1 |             0 |            0
 4 |                 2 |             0 |             1 |            0
 5 |                 2 |             2 |             0 |            1
 6 |                 2 |             1 |             3 |            6 
```

expected result would be:

```
InterfaceVersions instances with ids [2, 5] 
```

I have this GORM domain classes(simplified):

```
InterfaceCode{
    int id
    String code

    static hasMany = [ versionList: InterfaceVersion]
}

InterfaceVersion{
    int id
    InterfaceCode interfaceCode
    int majorVersion
    int minorVersion
    int editVersion

    static belongsTo = [ InterfaceCode ]

    static constraints = {
        interfaceCode(unique:['majorVersion','minorVersion','editVersion'])
    }
} 
```

So far I've been able to come up with this sql:

```
SELECT t1.*
FROM Interface_Version  t1
  Left Outer Join Interface_Version  T2
    On (T1.Interface_Code_Id = T2.Interface_Code_Id And 
      (T1.Major_Version < T2.Major_Version Or 
      (T1.Major_Version = T2.Major_Version And T1.Minor_Version < T2.Minor_Version) Or 
      (T1.Major_Version = T2.Major_Version And T1.Minor_Version = T2.Minor_Version And T1.Edit_Version < T2.Edit_Version ) )
      )
WHERE t2.id IS NULL 
```

Can you please convert this sql to hql or critearia or come up with something nicer ?

# asp.net - Auto log in to different domain without entering username and password

> ID：10087010
> 
> 赞同：0
> 
> 时间：2012-04-10T10:28:00.683
> 
> 标签：asp.net, jsp, login

I am in a system which developed by Java EE, the link is inside a jsp page, like in this jsp page i have `<a href="http://www.differnet.com/a.aspx" target="_blank">Visit W3Schools</a>`, need to log in to this aspx page in different domain without entering username and password. What should put in the target attribute?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:47:21.657

In a different domain, pass username and password as query string and fetch this in the aspx page. In the page_load of aspx page, check the username and password with database and allow user accordingly.

# javascript - JQuery easySlider not working in Chrome/Safari

> ID：10087012
> 
> 赞同：0
> 
> 时间：2012-04-10T10:28:22.400
> 
> 标签：javascript, jquery, easyslider

Any feedback on this would be great. I have installed the latest version of easySlider along with the latest version of JQuery but I am unable to get the images to slide in Chrome or Safari.

The initial image loads but no automatic sliding and the buttons don't work on click. I have included the code for the page and the easySlider js code.

Thanks in advance,

view page [here](http://resultclothing.com/main.php)...

CODE FOR PAGE:

```
<?php
  require_once("inc_header.php");
?>

<script type="text/javascript" src="/_js/easySlider1.7.js"></script>
<script type="text/javascript">

  $(document).ready(function () {
      $("#slider").easySlider({
          auto: true,
          continuous: true
      });
  });

</script> 
```

CODE FOR easySlider:

```
(function ($) {

    $.fn.easySlider = function (options) {

        // default configuration properties
        var defaults = {
            prevId: 'prevBtn',
            prevText: '',
            nextId: 'nextBtn',
            nextText: '',
            controlsShow: true,
            controlsBefore: '',
            controlsAfter: '',
            controlsFade: true,
            firstId: 'firstBtn',
            firstText: 'First',
            firstShow: false,
            lastId: 'lastBtn',
            lastText: 'Last',
            lastShow: false,
            vertical: false,
            speed: 1000,
            auto: true,
            pause: 2000,
            continuous: false,
            numeric: false,
            numericId: 'controls'
        };

        var options = $.extend(defaults, options);

        this.each(function () {
            var obj = $(this);
            var s = $("li", obj).length;
            var w = $("li", obj).width();
            var h = $("li", obj).height();
            var clickable = true;
            obj.width(w);
            obj.height(h);
            obj.css("overflow", "hidden");
            var ts = s - 1;
            var t = 0;
            $("ul", obj).css('width', s * w);

            if (options.continuous) {
                $("ul", obj).prepend($("ul li:last- child", obj).clone().css("margin-left", "-" + w + "px"));
                $("ul", obj).append($("ul li:nth-child(2)", obj).clone());
                $("ul", obj).css('width' (s + 1) * w);
            };

            if (!options.vertical) $("li", obj).css('float', 'left');

            if (options.controlsShow) {
                var html = options.controlsBefore;
                if (options.numeric) {
                    html += '<ol id="' + options.numericId + '"></ol>';
                } else {
                    if (options.firstShow) html += '<span id="' + options.firstId + '"><a  href=\"javascript:void(0);\">' + options.firstText + '</a></span>';
                    html += ' <span id="' + options.prevId + '"><a href=\"javascript:void(0);\">' + options.prevText + '</a></span>';
                    html += ' <span id="' + options.nextId + '"><a href=\"javascript:void(0);\">' + options.nextText + '</a></span>';
                    if (options.lastShow) html += ' <span id="' + options.lastId + '"><a href=\"javascript:void(0);\">' + options.lastText + '</a></span>';
                };

                html += options.controlsAfter;
                $(obj).after(html);
            };

            if (options.numeric) {
                for (var i = 0; i < s; i++) {
                    $(document.createElement("li")).attr('id', options.numericId + (i + 1)).html('<a rel=' + i + ' href=\"javascript:void(0);\">' + (i + 1) + '</a>').appendTo($("#" + options.numericId)).click(function () {
                        animate($("a", $(this)).attr('rel'), true);
                    });
                };
            } else {
                $("a", "#" + options.nextId).click(function () {
                    animate("next", true);
                });
                $("a", "#" + options.prevId).click(function () {
                    animate("prev", true);
                });
                $("a", "#" + options.firstId).click(function () {
                    animate("first", true);
                });
                $("a", "#" + options.lastId).click(function () {
                    animate("last", true);
                });
            };

            function setCurrent(i) {
                i = parseInt(i) + 1;
                $("li", "#" + options.numericId).removeClass("current");
                $("li#" + options.numericId + i).addClass("current");
            };

            function adjust() {
                if (t > ts) t = 0;
                if (t < 0) t = ts;
                if (!options.vertical) {
                    $("ul", obj).css("margin-left", (t * w * -1));
                } else {
                    $("ul", obj).css("margin-left", (t * h * -1));
                }
                clickable = true;
                if (options.numeric) setCurrent(t);
            };

            function animate(dir, clicked) {
                if (clickable) {
                    clickable = false;
                    var ot = t;
                    switch (dir) {
                    case "next":
                        t = (ot >= ts) ? (options.continuous ? t + 1 : ts) : t + 1;
                        break;
                    case "prev":
                        t = (t <= 0) ? (options.continuous ? t - 1 : 0) : t - 1;
                        break;
                    case "first":
                        t = 0;
                        break;
                    case "last":
                        t = ts;
                        break;
                    default:
                        t = dir;
                        break;
                    };
                    var diff = Math.abs(ot - t);
                    var speed = diff * options.speed;
                    if (!options.vertical) {
                        p = (t * w * -1);
                        $("ul", obj).animate({
                            marginLeft: p
                        }, {
                            queue: false,
                            duration: speed,
                            complete: adjust
                        });
                    } else {
                        p = (t * h * -1);
                        $("ul", obj).animate({
                            marginTop: p
                        }, {
                            queue: false,
                            duration: speed,
                            complete: adjust
                        });
                    };

                    if (!options.continuous && options.controlsFade) {
                        if (t == ts) {
                            $("a", "#" + options.nextId).hide();
                            $("a", "#" + options.lastId).hide();
                        } else {
                            $("a", "#" + options.nextId).show();
                            $("a", "#" + options.lastId).show();
                        };
                        if (t == 0) {
                            $("a", "#" + options.prevId).hide();
                            $("a", "#" + options.firstId).hide();
                        } else {
                            $("a", "#" + options.prevId).show();
                            $("a", "#" + options.firstId).show();
                        };
                    };

                    if (clicked) clearTimeout(timeout);
                    if (options.auto && dir == "next" && !clicked) {;
                        timeout = setTimeout(function () {
                            animate("next", false);
                        }, diff * options.speed + options.pause);
                    };

                };

            };
            // init
            var timeout;
            if (options.auto) {;
                timeout = setTimeout(function () {
                    animate("next", false);
                }, options.pause);
            };

            if (options.numeric) setCurrent(0);

            if (!options.continuous && options.controlsFade) {
                $("a", "#" + options.prevId).hide();
                $("a", "#" + options.firstId).hide();
            };

        });

    };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:20:50.703

In your html you have some errors (can see these in view source so not a javascript issue)

Change

`<div id="slider" align="center" margin-left:10px;>`

to

`<div id="slider">`

The `align` attribute is what is actually causing the issue. Tested on Chrome (PC) v18

Hope that helps :)

# mysql - Search query in XML datatype

> ID：10087016
> 
> 赞同：1
> 
> 时间：2012-04-10T10:28:31.070
> 
> 标签：mysql, sql, sql-server, xml, sql-server-2008

I have a requirement that i want to search for data in xml data type, from the front end i will get firstname,lastname,dob,email all the fields are not mandatory some fields will come as empty or null i want to search according to that if i will get firstname as 'test' and lastname i will get as empty or null

If it is a varchar datatype then i can create query as

```
FirstName= ISNULL(@firstname, FirstName) or COALESCE(@firstname, FirstName, '') = '') 
```

but in XML doc how can i use this type of query.

```
xmlDoc.value('(/personalDetails/firstname)[1]','varchar(100)') 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:17:06.150

在 SQLServer 2008 中，我会写如下内容：

```
select 
    xmlDoc.value('(personalDetails/firstname/text())[1]','varchar(100)') as firstname 
from 
    myTable 
where 
    not xmlDoc is null
    and xmlDoc.exist('personalDetails/firstname[.!='''']')>0 
```

如果你想为不存在的值返回 NULL，你也可以做一个 CASE WHEN ... ELSE ... END

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-04T06:29:22.583

我认为您可以使用公用表表达式来实现这一点。PFB示例代码-

```
DECLARE @XMLData XML
SET @XMLData ='
<STUDENTS>
  <STUDENT>
    <StudentID>1</StudentID>
    <Name>John Smith</Name>
    <Marks>200</Marks>
  </STUDENT>
  <STUDENT>
    <StudentID>2</StudentID>
    <Name>Mark Johnson</Name>
    <Marks>300</Marks>
  </STUDENT>
<STUDENT>
    <StudentID>3</StudentID>
    <Name></Name>
    <Marks>400</Marks>
  </STUDENT>
</STUDENTS>'
;with cte as(
SELECT StudentID = Node.Data.value('(StudentID)[1]', 'INT')
        , [Name] = Node.Data.value('(Name)[1]', 'VARCHAR(MAX)')
        , [Marks] = Node.Data.value('(Marks)[1]', 'INT')
FROM    @XMLData.nodes('/STUDENTS/STUDENT') Node(Data)
)
Select * from cte where Name='' 
```

# visual-studio-2010 - Automatic project references update in VS2010

> ID：10087030
> 
> 赞同：0
> 
> 时间：2012-04-10T10:29:19.107
> 
> 标签：visual-studio-2010, reference

Are you tired of checking if a newer version of the library you're using has been released, or when you update to new versions, change all references in all csproj projects?

For example, I have many csproj projects using those references:

```
 <HintPath>..\..\..\Referencias Externas\Microsoft.Practices.EnterpriseLibrary 4.1\Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging.dll</HintPath>  
    ...more...more...    
    <HintPath>..\..\..\Referencias Externas\Unity 1.2\Microsoft.Practices.Unity.dll</HintPath>
    ...more...more...  
     <HintPath>..\..\..\Referencias\Company\2.0\Company.Common.dll</HintPath> 
```

Now, I would like use new versions, EnterpriseLibrary 5.0, Unity 2.1, NHibernate 3.2, etc, and references to Company Framework (Company.Common.dll, etc), but I need changes all references in many,many projects.

any extension in VS2010 for do it easy and quick?

I would like any like ProjectConverter - Auto update DevExpress references [http://www.devexpress.com/Support/Center/p/Q308968.aspx](http://www.devexpress.com/Support/Center/p/Q308968.aspx)

Reference: [http://feedback.wovs.com/forums/71955-extension-ideas/suggestions/1003595-automatic-reference-update](http://feedback.wovs.com/forums/71955-extension-ideas/suggestions/1003595-automatic-reference-update)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:31:30.980

使用包管理器[nuget](http://nuget.org/)来管理您的依赖项。

> NuGet 是一个 Visual Studio 扩展，可以轻松地在 Visual Studio 中安装和更新第三方库和工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:33:53.203

作为一种解决方法，您可以创建一个库项目来处理和转发对 .dll 的访问，并且每个其他项目都使用这个。然后，您只需要更新这一包装项目中的 .dll 引用。

# java - 如何分析JVM崩溃文件hs_err_pidXYZ.log

> ID：10087032
> 
> 赞同：14
> 
> 时间：2012-04-10T10:29:22.057
> 
> 标签：java, jvm

在 Eclipse 和 Tomcat (wtp) 中处理 webapp 时，tomcat 崩溃并创建一个文件：hs_err_pid20216.log

我尝试使用 eclipse MAT 来分析文件，但 MAT 无法将文件识别为它可以处理的文件，我也尝试了 DAT，结果是一样的。它不会显示在打开的文件对话框中。

它是什么样的文件？

我应该用什么来分析它？

我是否必须对此文件进行更改，以便这些工具可以解析它。

日志文件可作为[GitHub gist](https://gist.github.com/2350178#file_hs_err_pid20216.log)

更新：

有关如何处理 hs_err_pidXYZ.log 文件的更多信息，请参阅@Dan Cruz 回复。出于好奇，崩溃的原因是杰克逊被循环关系（双向一​​对多）弄糊涂了，但这是另一个故事......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T11:33:43.200

> 它是什么样的文件？

这是一个文本格式的 HotSpot 错误日志文件。

> 我应该用什么来分析它？

首先下载[OpenJDK 6 源包](http://download.java.net/openjdk/jdk6/)。在热点`*.cpp`文件中搜索错误日志中的字符串。查看源文件以了解错误日志包含的内容。

例如，使用 OpenJDK 7 的源代码，可以在 的方法中找到`siginfo`（操作系统进程信号信息），在 的`os::print_siginfo()`方法中[`os_linux.cpp`](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/81d815b05abb/src/os/linux/vm/os_linux.cpp)找到（CPU 寄存器的`Registers`值）等。`os::print_context()`[`os_linux_x86.cpp`](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/81d815b05abb/src/os_cpu/linux_x86/vm/os_linux_x86.cpp)

> 我是否必须对此文件进行更改，以便这些工具可以解析它。

这是不可能的，因为[Eclipse 内存分析器](http://www.eclipse.org/mat/)需要一个堆文件，而 HotSpot 错误日志则不需要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-05T08:09:00.180

[https://fastthread.io](https://fastthread.io)对文件进行了很好的描述性分析。它只需要上传它，它会提供以下项目：

1.  崩溃的原因
2.  推荐解决方案
3.  活动线程（当应用程序崩溃时）
4.  核心转储位置
5.  所有线程
6.  ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T10:35:20.040

这是一个文本文件。在编辑器中打开它并尝试理解它的含义。

# jquery - 我们如何访问 ajaxSubmit 函数的“jqXHR”的“服务器响应”？

> ID：10087035
> 
> 赞同：0
> 
> 时间：2012-04-10T10:29:29.483
> 
> 标签：jquery, ajax, forms, submit, jqxhr

[ajaxSubmit](http://jquery.malsup.com/form/#api)返回表单元素。我们如何访问其ajax请求的“jqXHR”的“服务器响应”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:39:41.197

您需要访问`success:`事件处理程序。

请参阅他们页面上的示例：http: [//jquery.malsup.com/form/#ajaxSubmit](http://jquery.malsup.com/form/#ajaxSubmit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:11:57.607

```
 var response,xhr;
        $(form).ajaxSubmit({
            success:function (d, t, x) {                  
                response=d;
                xhr=x;
            }
        }); 
```

# sql - What constitutes a nonzero value in tsql?

> ID：10087039
> 
> 赞同：2
> 
> 时间：2012-04-10T10:29:31.340
> 
> 标签：sql, tsql

In t-sql, when you convert anything to datatype bit any nonzero value is converted to true. I am working on the premise of the column not being nullable. I would consider NULL to be a nonzero value, and surely if you convert the value null into datatype bit you would expect it to be 0 (AKA false).

This being said I wonder what exactly constitutes a nonzero value, as based on null being (as I consider it) a nonzero value it would be converted to the value 1 (true).

So my question really becomes is NULL a nonzero value, or is the value NULL (being the lack of a value) actually completely separate and does not count as a nonzero value or zero, and counts simply as NULL itself - and if this is the case then what would it be converted to if inserted into a non nullable column?

Many Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:41:03.600

在 TSQL 中，NULL 被认为是一个未知值，这就是为什么`NULL <> 0 = NULL`在转换为位时而不是 1。

# java - 从访问者计算机上的网页运行 java 类文件？

> ID：10087040
> 
> 赞同：2
> 
> 时间：2012-04-10T10:29:37.030
> 
> 标签：java, browser, file-io, applet

我编写了一个 Java 程序来读取和修改计算机上的文件。该计划仅基于 1 个班级。

目前谁想使用它必须从终端运行它，我正在研究如何将它插入网页并使其在访问者的计算机上运行。有一个文件选择器会很好（用户会想要这个修改）。

我在互联网上搜索并找到了 Java 小程序，但我读到它们没有在本地下载和执行，因此该程序无法运行。

如何从网页提供 Java 类文件，以在最终用户的计算机上使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:31:42.973

如果您真的想下载 Java 程序并在本地运行它，您应该查看[Java Web Start](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136112.html)。

简而言之，它允许用户在他们的机器上本地下载和运行 Java 程序。它会做一些聪明的事情，比如识别是否有更新的版本可供下载，如果是当前版本，它将运行缓存的版本。

这是一个[教程](http://docs.oracle.com/javase/tutorial/deployment/webstart/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:38:09.360

小程序可以在本地修改文件，前提*是*它们已签名*并且*用户允许它们这样做。

阅读已签名的小程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:11:29.697

> ..有一个文件选择器就好了..

在这种情况下，基本上有两个选项，正如我在整个问题和答案的评论中概述的那样。我会在这里收集它们：

1.  对小程序进行数字签名，让用户在提示时（在加载小程序之前）接受数字签名代码，然后提供`JFileChooser`浏览文件的权限。
2.  如果用户有一个插件 2 JRE（查看[JWS 信息页面](https://stackoverflow.com/tags/java-web-start/info)中的链接以获取更多详细信息），则可以不经提示将小程序交付给用户，然后利用 JNLP API 生成文件选择器。在对话框出现之前将提示用户，这次是更具体的警告。

## JWS

*   例如，请参阅我的基于小程序的[GIF 动画工具](http://pscode.org/gifanim/#applet)，它在用户加载图像帧或保存动画 GIF 时使用 JNLP API。
*   该小程序不是开源的（主要是因为我不想重新访问和整理代码的懒惰），但是有一个更好[的例子来使用](http://pscode.org/jws/api.html#fs)源代码随附的 JNLP 文件服务。

## 数字签名

我没有关于数字签名代码过程的任何重要链接，但请注意，上面列出的“使用 JNLP 文件服务的示例”为 2 个不同的安全环境提供了一组签名的 Jar。它还（希望很明显）演示了如何使用 Ant 对代码进行数字签名（这一切都是通过调用 中的默认任务来实现的`build.xml`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T10:33:37.433

> 我读到它们没有在本地下载和执行

无论你在哪里读到，它都是 100% 不正确的。小程序被下载到浏览器中并在客户端主机上执行。

# asp.net-mvc - 在 asp.net mvc 中的表中发布值

> ID：10087047
> 
> 赞同：1
> 
> 时间：2012-04-10T10:30:23.887
> 
> 标签：asp.net-mvc, asp.net-mvc-2

我有一张桌子：

```
 <table id="selectedInv">
        <thead>
            <tr class="alternate">
                <th>
                    Barcode
                </th>
                <th>
                    OverAll Count
                </th>
                <th>
                    Transfer Count
                </th>
            </tr>
        </thead>
        <tbody>
           <tr class="1">
                <td> 2323 </td><td> 9 </td><td><input type="text" value="3"></td></tr>
           <tr class="2">
                <td> 2329 </td><td> 5 </td><td><input type="text" value="2"></td></tr>
           <tr class="3">
                <td> 2329 </td><td> 3 </td><td><input type="text" value="1"></td></tr>
        </tbody>
    </table> 
```

单击按钮后，我想收集数据，例如

> [{1,3},{2,2},{3,1}]

在哪里

> [{a,b}] a=行的类名，b=该行的输入文本值。

并将这些数据发布到操作方法，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:52:28.180

正如我所见，你有两个字段可以从每一行收集数据，即 Class 和 Transfer 计数。我会为它制作一个视图模型

```
public class ViewModel
{
    public int CodeClass{get;set;} //class is reserved word
    public int TransferCount{get;set;}
} 
```

在我看来，我会编写一个循环来创建以下 html

```
<table id="selectedInv">
        <thead>
            <tr class="alternate">
                <th>
                    Barkod
                </th>
                <th>
                    OverAll Count
                </th>
                <th>
                    Transfer Count
                </th>
            </tr>
        </thead>
        <tbody>
           <tr class="1">
                <td> 2323 </td><td> 9 </td><td><input name="data[0].TransferCount" type="text" value="3"><input type="hidden" value = "1" name = "data[0].CodeClass"/></td></tr>
           <tr class="2">
                <td> 2329 </td><td> 5 </td><td><input type="text" value="2" name="data[1].TransferCount"><input type="hidden" value = "1" name = "data[1].CodeClass"/></td></tr>
           <tr class="3">
                <td> 2329 </td><td> 3 </td><td><input type="text" value="1" name="data[2].TransferCount"><input type="hidden" value = "1" name = "data[2].CodeClass"/></td></tr>
        </tbody>
    </table> 
```

假设您将表单发布到索引方法。它看起来像

```
public ActionResult index(IEnumerable<ViewModel> data)
{
 //do something with data
} 
```

不要忘记提交按钮以发布表单。有关更多信息，请阅读[本文](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)
以下[搜索](https://www.google.com.pk/webhp?rlz=1C1_____enPK456PK456&sourceid=chrome-instant&ix=uh&ie=UTF-8#hl=en&rlz=1C1_____enPK456PK456&output=search&sclient=psy-ab&q=modelbinding%20to%20list%20asp.net%20mvc&oq=&aq=&aqi=&aql=&gs_l=&pbx=1&fp=4a9852210d308dea&ix=uh&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&biw=1366&bih=667)也对您有好处

# crystal-reports - VS 2010、SAP 水晶报表、Windows Server 2008

> ID：10087049
> 
> 赞同：0
> 
> 时间：2012-04-10T10:30:29.623
> 
> 标签：crystal-reports

我需要帮助我开发了一个网站并在调试模式下从 VS 2010 运行它时添加了 SAP Crystal 报告，所有报告都工作正常，但是当我尝试从具有系统 IP 的 IIS 运行它并且它没有显示任何错误并且水晶报告显示没有报告甚至没有空白报告。. 在生产环境中运行 SAP Crystal Reports 是否有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:55:54.400

看看将[asp.net 应用程序部署到服务器时不会加载水晶报表查看器](https://stackoverflow.com/questions/9624701/crystal-reports-viewer-does-not-load-when-asp-net-application-is-deployed-to-ser/9625485#9625485)

通常是未安装运行时或版本不正确等问题。

# android - 如何重新启动 Activity 以重新加载静态库？

> ID：10087050
> 
> 赞同：0
> 
> 时间：2012-04-10T10:30:31.707
> 
> 标签：android, c, android-ndk

我需要重新启动一个活动来重新加载一个静态库。如果我想调用同一个静态库的一些函数，我的系统就会失败。它仅适用于第一次调用，在它没有找到正确的符号并失败并出现下一个错误之后：

```
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000100 
```

如果我终止进程并再次启动活动，则再次加载静态库，从那一刻起，我可以调用第二个函数，但如果我想调用库的另一个第三个函数，我必须重复相同的过程来终止处理并启动活动。

要终止活动进程，我使用下一个命令：

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

我杀死和启动的方法有效，但它没有用，我认为它必须存在更好的解决方案。也许我应该每次在活动中删除并加载静态库，但我不知道它是否可行，我有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:41:07.453

每项活动都有其独特之处`process id`，因此我建议您参加一项与您的图书馆有关的临时活动。

现在您的主要活动将`startActivityForResult(temporaryact)`在临时调用的 onDestroy() 中调用`android.os.Process.killProcess(android.os.Process.myPid());`

然后在主要活动中`onAcitivityResult()`再次调用临时活动，依此类推。

这对我有用，愿你也远离它。

# ruby-on-rails - 如何使用 ROR+linkedin 获取用户配置文件

> ID：10087055
> 
> 赞同：1
> 
> 时间：2012-04-10T10:30:47.003
> 
> 标签：ruby-on-rails, linkedin

嗨，一旦身份验证成功，我正在尝试获取这样的用户个人资料信息，

```
class LinkController < ApplicationController
  def callback
    client = LinkedIn::Client.new("ddddd", "ffffff")

    if session[:atoken].nil?

      pin = params[:oauth_verifier]
      atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
      session[:atoken] = atoken
      session[:asecret] = asecret
    else

      client.authorize_from_access(session[:atoken], session[:asecret])
    end

    @profile = client.profile
    @connections = client.connections

    puts client.profile(:fields => [:positions]).positions 
    puts client.connections
  end
end 
```

我得到的结果如下：

```
#<LinkedIn::Profile:0x4a6fdd8>
#<LinkedIn::Profile:0x4a58f30>
#<LinkedIn::Profile:0x4a58af8>
#<LinkedIn::Profile:0x4a58708>
#<LinkedIn::Profile:0x4a583a8> 
```

我真的不明白这是什么以及信息是否正确而不是如何将其转换为用户可读的，

我是 ROR 的新手，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:27:28.800

那些是对象；使用[检查](http://ruby-doc.org/core-1.9.3/Object.html#method-i-inspect)方法返回人类可读的表示：

`client.profile.inspect`

# .net - 使用 WPF 将发票打印到 A5 页面

> ID：10087059
> 
> 赞同：0
> 
> 时间：2012-04-10T10:31:09.483
> 
> 标签：.net, wpf, c#-4.0

这些天我正在使用 WPF 和 C# 开发 POS 系统。我想将公司名称、客户名称、日期和列表视图表格打印到 A5 页面以用于发票。我不知道使用发票格式（包括表格和其他数据）打印。谁能给我有关发票打印的想法或链接？谢谢

# c# - ASP .NET 中的首选验证

> ID：10087063
> 
> 赞同：1
> 
> 时间：2012-04-10T10:31:17.407
> 
> 标签：c#, asp.net

首选哪些验证：客户端（使用 Javascript）或服务器端（使用 C# asp.net 中的验证控件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T10:34:03.537

您应该*始终*在服务器上进行验证。客户端验证可以很好地增强用户体验，但是来自客户端的任何内容都可能是脏的，应该再次在服务器上进行验证，因为您的服务器端代码不易受到恶意用户操作的影响（至少，不是以与客户端代码相同的方式）。

**总是最终在服务器上验证！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:33:37.423

两个都。

> JavaScript 很重要，因为它可以防止对服务器的无效回发。
> 
> 如果客户端从浏览器中禁用 JavaScript 而不是绕过 JavaScript 验证，那么服务器端很重要。

我还建议您在数据库级别进行验证。为了可靠性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:34:16.393

两者都很好，至少服务器端验证是必须的。由于客户端可能在浏览器上禁用了 javascript

> **不应该依赖客户端验证的原因**

*   最终用户可以关闭 javascript
*   甚至没有使用您的网站的人可以将数据直接发送到您的服务器，并使用专门设计的自定义应用程序
*   您页面上的 Javascript 错误（由多种原因引起）可能会导致您的部分验证运行，但不是全部

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T11:17:05.170

您应该在服务器端和客户端执行验证。客户端验证增加了应用程序的交互性。换句话说，使您的应用程序更加用户友好。但是客户端验证可能有其缺点，如果您的用户禁用 javascript，那么他可以很好地输入无意义的数据值并将它们发送到您的服务器。您不希望这种情况发生。为此，您需要执行服务器端验证。服务器端验证控件过滤输入并确保输入正确的数据。有很好的Asp.Net 提供的验证控件。您可以很好地利用它们。我建议您同时使用客户端和服务器端验证来混合交互性和保护。谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T12:18:51.917

基本的验证，如字段的空性、有效的电子邮件、数字、字符串或日期应该在客户端完成，但您应该始终在服务器上验证任何潜在的黑客攻击，如跨站点脚本或标签（例如 php 标签) 并且为了越来越安全，始终使用存储过程，并确保有一个函数用这个“””替换“'”或用空字符串和任何其他危险字符替换 <>。

# mysql - 用两个表SQL的字符串合并替换表id

> ID：10087072
> 
> 赞同：0
> 
> 时间：2012-04-10T10:32:17.937
> 
> 标签：mysql, sql, select

我有这种情况：

```
Table A:
+----+------------+
| id | text       |
+----+------------+
| 33 | str1       | 
| 34 | str2       | 
| 35 | str3       | 
| 36 | str4       | 
+----+------------+

Table B:
+----+--------+------+------------+----------+-------+
| id | title  | teme | year       | ed       | cont |
+----+--------+------+------------+----------+-------+
|  8 |     33 |   34 | 2012-04-06 |       35 |    36 | 
+----+--------+------+------------+----------+-------+ 
```

一个查询有可能得到这个结果吗？：

```
+----+--------+------+------------+----------+-------+
| id | title  | teme | year       | ed       | cont |
+----+--------+------+------------+----------+-------+
|  8 |   str1 | str2 | 2012-04-06 |     str3 |  str4 | 
+----+--------+------+------------+----------+-------+ 
```

表 A 来自其他两个表之间的 JOIN。

我使用的 DBMS 是 Mysql

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:41:27.583

我唯一能想到的是

```
select b.id, 
       (select a.text from tableA a where a.id = b.title) as title, 
       (select a.text from tableA a where a.id = b.teme) as teme, 
       year, 
       (select a.text from tableA a where a.id = b.ed) as ed, 
       (select a.text from tableA a where a.id = b.cont) as cont
from tableB b
where b.id = 8 
```

# bash - 从文本文件设置环境变量

> ID：10087077
> 
> 赞同：1
> 
> 时间：2012-04-10T10:32:30.200
> 
> 标签：bash, shell, export, environment-variables, ksh

我正在尝试根据文本文件中的文本导出一些路径名，但是我遇到了一些麻烦，

```
file="config.txt"

while read line
do
    LINE= "$line"
    echo "$line"

done <"$file"
export LINE 
```

我尝试使用上面的代码，但它没有将 config.txt 中的字符串保存到 LINE。任何建议都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:51:29.340

我认为您需要消除赋值运算符周围的空格：

```
LINE="$line" 
```

此外，脚本只会将文件的*最后*一行保存到变量中。当代码循环时，所有先前的行都将被覆盖。

# machine-learning - 文件名中的键值对是否有标准的文件命名约定？

> ID：10087079
> 
> 赞同：0
> 
> 时间：2012-04-10T10:32:32.477
> 
> 标签：machine-learning, filenames, human-computer-interface, human-readable, long-filenames

我有多个以它们包含的内容命名的数据文件。例如

```
machine-testM_pid-1234_key1-value1.log 
```

键和值由 - 和 _ 分隔。有更好的语法吗？是否有自动读取这些类型的文件/文件名的解析器？

这里的想法是文件名是人类**和**机器可读的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-11T10:37:27.597

8年后...

我建议您查看[https://en.wikipedia.org/wiki/Query_string](https://en.wikipedia.org/wiki/Query_string)

它们不是漂亮的文件名，但您不必重新发明轮子，例如转换为 dict/json，因为有经过充分测试的方法来解析查询字符串，例如在 requests 库中。

[https://unix.stackexchange.com/questions/44153/good-style-practices-for-separators-in-file-or-directory-names](https://unix.stackexchange.com/questions/44153/good-style-practices-for-separators-in-file-or-directory-names)有一个相关问题，其中包含一些有用的信息，其中包含一些想法以获得更好的视觉分隔符（`_-_`和`___`），在这种情况下可能会更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:19:29.727

键值似乎没有标准的文件命名约定。

# linux - linux中的自定义GUI设计

> ID：10087081
> 
> 赞同：0
> 
> 时间：2012-04-10T10:32:43.943
> 
> 标签：linux, user-interface

我想知道它是否有某种方式来设计更漂亮、更个性化的 GUI。到目前为止，我看到的所有应用程序都是基于 Gtk 的，它们具有“linux face”。它并不难看，但是如果我想在我的应用程序中使用自己的设计怎么办？linux 有没有像 Windows Presentation Foundation 这样的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:36:12.627

试试 QT 框架。随着 Ubuntu 12.04 的出现——他们正在从基于 GTK 和 Gnome 的应用程序转向基于 QT 的 GUI。QT 有更漂亮和个性化的 GUI。

[http://qt.nokia.com/products/](http://qt.nokia.com/products/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:36:56.040

主要的 GUI 框架是 Qt 和 GTK+。如果您不喜欢 GTK+ 程序的外观，那么定义自定义 GTK+ 主题可能比从头开始编写新程序更容易。您还可以定义自定义小部件，它们的外观和工作方式完全符合您的要求。还有一个更底层（和跨平台）的框架，称为 SDL。在那里，您必须从头开始做所有事情。它基本上只提供绘制到屏幕和读取键盘和鼠标事件的功能。但是您可以使用 SDL 创建一个看起来与您完全一样的程序。正因为如此，而且速度很快，所以 SDL 经常用于游戏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:45:07.850

wxWidgets 是另一个很棒的跨平台框架。

# javascript - 动态更改 Div 的颜色 - Javascript

> ID：10087086
> 
> 赞同：0
> 
> 时间：2012-04-10T10:32:55.050
> 
> 标签：javascript, dynamic, html, colors

我认为这应该是一个简单的问题，但我无法弄清楚。我在父 div 中有两个 div，我想更改正确 div (javascript) 的颜色。我的代码循环遍历子 div，然后更改两者的颜色。我不知道如何选择正确的 div 并更改其颜色。这是我的代码（这会改变两者的颜色）：

```
 var color = "#fdd42e";
    var element = document.getElementById(user_id).childNodes;

    for (i=0;i< element.length;i++) {

        if(element[i].id = 'right') {
            element[i].style.background = color;
        }
        else {
        }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T10:35:24.267

> 我不知道如何选择正确的 div 并更改其颜色。

使用`==`代替`=`：

```
if(element[i].id = 'right') {
                 ^
            -----| 
```

# android - System.load 用于库加载

> ID：10087094
> 
> 赞同：3
> 
> 时间：2012-04-10T10:33:12.120
> 
> 标签：android, load, java-native-interface

我成功地从`/system/libs/my_lib.so`目录加载了一个库。如何使用该库中定义的 C/C++ 函数？

```
public class MainFrom extends Activity {

    private static final String LOG_TAG = "MainFrom";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.main); 
        // How to use the functions of test_lib.so? 

        /*
            java.lang.UnsatisfiedLinkError: stringFromC

        String s1 = stringFromC(), s2 = stringFromCpp();

        Log.w(LOG_TAG, stringFromC());   
        Log.w(LOG_TAG, stringFromCpp());  */
    }

    public native String stringFromC();
    public native String stringFromCpp();

    static {
        try { 
            System.load("/system/lib/test_lib.so");
            Log.i(LOG_TAG, "MainFrom. Success!");
        } catch (UnsatisfiedLinkError e) {
            Log.e(LOG_TAG, "MainFrom. UnsatisfiedLinkError");
        }
    }

} 
```

`stringFromC`并存`stringFromCpp`在于编译成的文件`.c`中`.cpp``test_lib.so`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:51:32.780

我已经解决了我的问题。

有必要写

```
System.load("/system/lib/libtest_lib.so"); 
```

代替

```
System.load("/system/lib/test_lib.so"); 
```

这么奇怪。如果我跑

```
adb shell 
ls /system/lib 
```

我会看到 test_lib.so 文件。**为什么使用lib**前缀正确加载库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:34:54.677

你需要在你的 Android.mk 文件中放入`LOCAL_CPPFLAGS := $(YOURMODULE_CPPFLAGS)`和 in`LOCAL_SRC_FILES := yourfile.cpp`以使用 android NDK 编译 .cpp 文件。

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-08T00:49:39.870

从 Android 7.0 开始，系统会阻止应用动态链接非 NDK 库，这可能会导致您的应用崩溃。这种行为改变旨在跨平台更新和不同设备创建一致的应用体验。

[android 7.0 更改说明](https://developer.android.com/about/versions/nougat/android-7.0-changes.html#ndk)

# eclipse-plugin - 所有视图的动态弹出菜单

> ID：10087095
> 
> 赞同：0
> 
> 时间：2012-04-10T10:33:19.063
> 
> 标签：eclipse-plugin

我需要为所有视图提供一个动态弹出菜单。我可以创建一个动态弹出菜单贡献，但我必须设置 URI 并为特定视图注册它。现在，当用户选择另一个视图时，我正在尝试动态注册菜单：

```
public class GlobalSelectionListener implements ISelectionListener {
    HashSet<IWorkbenchPart> extended = new HashSet<IWorkbenchPart>();

    @Override
    public void selectionChanged(IWorkbenchPart part, ISelection selection) {
        if (!extended.contains(part)) {
            IWorkbenchPartSite wps = part.getSite();
            if (wps == null)
                return;
            //creates popup menu for this part
            MenuManager mgr = new MenuManager();
            mgr.add(new DynamicMenu()); //DynamicMenu extends ContributionItem
            wps.registerContextMenu("identifier." + mgr.hashCode(), mgr, wps.getSelectionProvider());
            extended.add(part);
            System.out.println(part + " menu extended");
        }
    }
} 
```

但这不起作用。弹出菜单中没有任何菜单项出现。我不知道，是否有可能这样做。有什么方法可以动态添加任意视图的弹出菜单吗？看来，该`registerContextMenu()`方法做了其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:57:54.143

问题没有解决，但是有一个解决方法。`plugin.xml`可以在文件中为所有需要的视图和编辑器注册弹出菜单。通常插件用例的数量是有限的。如果你正在编写一个插件，你就知道你需要这个插件做什么。使用[Spy 插件](http://www.eclipse.org/pde/incubator/spy/)(ALT+SHIFT+F1) 查看活动菜单贡献标识符并将您的贡献注册到您需要的所有视图和编辑器的弹出菜单中。

# c++ - 我们可以有多少级别的指针？

> ID：10087113
> 
> 赞同：464
> 
> 时间：2012-04-10T10:34:17.970
> 
> 标签：c++, c, pointers, language-lawyer, limit

`*`单个变量中允许有多少个指针 ( )？

让我们考虑以下示例。

```
int a = 10;
int *p = &a; 
```

同样我们可以有

```
int **q = &p;
int ***r = &q; 
```

等等。

例如，

```
int ****************zz; 
```

* * *

## 回答 #1

> 赞同：412
> 
> 时间：2012-04-10T10:45:00.040

该`C`标准规定了下限：

> ### [5.2.4.1 翻译限制](http://c0x.coding-guidelines.com/5.2.4.1.html)
> 
> 276 实施应能够翻译和执行至少一个程序，该程序至少包含以下每个限制的一个实例：[...]
> 
> 279 - 12 个指针、数组和函数声明符（以任意组合形式）修改声明中的算术、结构、联合或 void 类型

上限是特定于实现的。

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2012-04-10T15:44:27.307

实际上，C 程序通常使用无限指针间接寻址。一到两个静态级别是常见的。三重间接很少见。但是无限是很常见的。

无限指针间接是在结构的帮助下实现的，当然，不是直接声明符，这是不可能的。并且需要一个结构，以便您可以在此结构中可以终止的不同级别包含其他数据。

```
struct list { struct list *next; ... }; 
```

现在你可以拥有`list->next->next->next->...->next`. 这实际上只是多指针间接：`*(*(..(*(*(*list).next).next).next...).next).next`. 当`.next`它是结构的第一个成员时，它基本上是一个 noop，所以我们可以把它想象成`***..***ptr`.

这实际上没有限制，因为可以用循环而不是像这样的巨型表达式来遍历链接，而且结构可以很容易地做成圆形。

因此，换句话说，链表可能是添加另一个间接级别来解决问题的最终示例，因为您在每次推送操作时都动态地执行此操作。:)

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2012-04-10T10:35:59.573

**理论上：**

您可以根据需要拥有尽可能多的间接级别。

**几乎：**

当然，任何消耗内存的东西都不是无限的，由于主机环境上可用的资源，会有限制。所以实际上，实现可以支持的内容有一个最大限制，并且实现应该适当地记录它。因此，在所有此类工件中，标准并未指定最大限制，但确实指定了下限。

这是参考：

**C99 标准 5.2.4.1 翻译限制：**

> — 12 个指针、数组和函数声明符（任意组合），用于修改声明中的算术、结构、联合或 void 类型。

**这指定了每个实现必须**支持的下限。请注意，在脚注中，该标准进一步说明：

> 18) 实施应尽可能避免施加固定的翻译限制。

* * *

## 回答 #4

> 赞同：80
> 
> 时间：2012-04-10T11:12:01.883

正如人们所说，“理论上”没有限制。但是，出于兴趣，我使用 g++ 4.1.2 运行它，它的大小可达 20,000。编译虽然很慢，所以我没有尝试更高。所以我猜 g++ 也没有施加任何限制。`size = 10`（如果不是很明显，请尝试设置并查看 ptr.cpp。）

`g++ create.cpp -o create ; ./create > ptr.cpp ; g++ ptr.cpp -o ptr ; ./ptr`

创建.cpp

```
#include <iostream>

int main()
{
    const int size = 200;
    std::cout << "#include <iostream>\n\n";
    std::cout << "int main()\n{\n";
    std::cout << "    int i0 = " << size << ";";
    for (int i = 1; i < size; ++i)
    {
        std::cout << "    int ";
        for (int j = 0; j < i; ++j) std::cout << "*";
        std::cout << " i" << i << " = &i" << i-1 << ";\n";
    }
    std::cout << "    std::cout << ";
    for (int i = 1; i < size; ++i) std::cout << "*";
    std::cout << "i" << size-1 << " << \"\\n\";\n";
    std::cout << "    return 0;\n}\n";
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：64
> 
> 时间：2012-04-10T18:36:16.660

检查听起来很有趣。

*   Visual Studio 2010（在 Windows 7 上），您可以在收到此错误之前有 1011 个级别：

    > 致命错误 C1026：解析器堆栈溢出，程序太复杂

*   gcc (Ubuntu), 100k+`*`没有崩溃！我想硬件是这里的限制。

（仅使用变量声明进行测试）

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2012-04-10T10:37:38.800

没有限制，请[在此处](http://www.indiabix.com/technical/c/pointers/)查看示例。

答案取决于您所说的“指针级别”是什么意思。如果您的意思是“在单个声明中可以有多少级间接性？” 答案是“至少 12 个”。

```
int i = 0;

int *ip01 = & i;

int **ip02 = & ip01;

int ***ip03 = & ip02;

int ****ip04 = & ip03;

int *****ip05 = & ip04;

int ******ip06 = & ip05;

int *******ip07 = & ip06;

int ********ip08 = & ip07;

int *********ip09 = & ip08;

int **********ip10 = & ip09;

int ***********ip11 = & ip10;

int ************ip12 = & ip11;

************ip12 = 1; /* i = 1 */ 
```

如果您的意思是“在程序难以阅读之前您可以使用多少级指针”，那是一个品味问题，但有一个限制。具有两个间接级别（指向某物的指针的指针）很常见。比这更容易想起来有点困难。除非替代方案更糟，否则不要这样做。

如果您的意思是“在运行时可以有多少级指针间接”，则没有限制。这一点对于循环列表尤其重要，其中每个节点都指向下一个节点。您的程序可以永远遵循指针。

* * *

## 回答 #7

> 赞同：26
> 
> 时间：2012-04-10T14:16:47.007

实际上，使用指向函数的指针更有趣。

```
#include <cstdio>

typedef void (*FuncType)();

static void Print() { std::printf("%s", "Hello, World!\n"); }

int main() {
  FuncType const ft = &Print;
  ft();
  (*ft)();
  (**ft)();
  /* ... */
} 
```

如此处所示[，](http://ideone.com/JFS14)这给出了：

> 你好世界！
> 你好世界！
> 你好世界！

而且它不涉及任何运行时开销，因此您可以随意堆叠它们......直到您的编译器阻塞文件。

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2012-04-11T10:39:52.333

没有**限制**。指针是一块内存，其内容是地址。
如你所说

```
int a = 10;
int *p = &a; 
```

指向指针的指针也是一个变量，其中包含另一个指针的地址。

```
int **q = &p; 
```

这`q`是指向持有地址的指针的指针，该地址`p`已经持有 的地址`a`。

指向指针的指针没有什么特别之处。
因此，持有另一个指针地址的指针链没有限制。
IE。

```
 int **************************************************************************z; 
```

被允许。

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2012-06-12T12:27:17.937

每个 C++ 开发人员都应该听说过（臭名昭著的）[三星级程序员](http://c2.com/cgi/wiki?ThreeStarProgrammer)

而且似乎真的有一些必须伪装的魔法“指针屏障”

> > 来自 C2 的报价：
> > 
> > > **三星级程序员**
> > > 
> > > > C 程序员的评级系统。您的指针越间接（即变量前的“*”越多），您的声誉就越高。No-star C 程序员几乎不存在，因为几乎所有重要的程序都需要使用指针。大多数是一星程序员。在过去（嗯，我还年轻，所以至少在我看来，这些看起来像旧时代），偶尔会发现一段由三星级程序员完成的代码，并且敬畏地颤抖。有些人甚至声称他们在不止一个间接级别上看到了包含函数指针的三星级代码。对我来说听起来像不明飞行物一样真实。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2012-04-10T11:41:37.407

请注意，这里有两个可能的问题：我们可以在 C 类型中实现多少级指针间接，以及我们可以将多少级指针间接填充到单个声明符中。

C 标准允许对前者施加最大值（并为此给出最小值）。但这可以通过多个 typedef 声明来规避：

```
typedef int *type0;
typedef type0 *type1;
typedef type1 *type2; /* etc */ 
```

所以最终，这是一个实现问题，与 C 程序在被拒绝之前可以制作多大/复杂的想法有关，这是非常特定于编译器的。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2014-10-14T08:40:04.883

我想指出，生成具有任意数量 * 的类型是模板元编程可能发生的事情。*我忘记了我到底在做什么，但有人建议我可以通过使用递归*T* 类型来生成新的不同类型，这些类型在它们之间具有某种元操作。

模板元编程是一种缓慢下降到疯狂的过程，因此在生成具有数千个间接级别的类型时没有必要找借口。例如，这只是将 peano 整数映射到模板扩展作为函数式语言的一种便捷方式。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-05-07T03:59:57.543

**2004 [MISRA C标准的](http://en.wikipedia.org/wiki/MISRA_C)**规则 17.5**禁止超过 2 级的指针间接寻址。**

 *** * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-30T07:15:19.707

没有*真正的极限*这样的东西，但极限是存在的。所有指针都是变量，通常存储在 stack**而不是 heap**中。堆栈通常很小（在某些链接期间可以更改其大小）。所以假设你有 4MB 堆栈，这是相当正常的大小。假设我们有 4 字节大小的指针（指针大小因架构、目标和编译器设置而异）。

在这种情况下`4 MB / 4 b = 1024`，可能的最大数量为 1048576，但我们不应忽视堆栈中存在其他一些东西的事实。

然而，一些编译器可能有最大数量的指针链，但限制是堆栈大小。因此，如果您在与无穷大链接期间增加堆栈大小并拥有运行具有无穷大内存的机器来运行处理该内存的操作系统，那么您将拥有无限的指针链。

如果您使用`int *ptr = new int;`并将指针放入堆中，那么*通常的*方式限制将是堆大小，而不是堆栈。

**编辑**只是意识到`infinity / 2 = infinity`。如果机器有更多内存，则指针大小会增加。因此，如果内存是无穷大并且指针的大小是无穷大，那么这是个坏消息...... :)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-08-01T20:00:00.857

这取决于您存储指针的位置。如果它们在堆栈中，则限制*非常低*。如果将其存储在堆中，则限制要高得多。

看看这个程序：

```
#include <iostream>

const int CBlockSize = 1048576;

int main() 
{
    int number = 0;
    int** ptr = new int*[CBlockSize];

    ptr[0] = &number;

    for (int i = 1; i < CBlockSize; ++i)
        ptr[i] = reinterpret_cast<int *> (&ptr[i - 1]);

    for (int i = CBlockSize-1; i >= 0; --i)
        std::cout << i << " " << (int)ptr[i] << "->" << *ptr[i] << std::endl;

    return 0;
} 
```

它创建 1M 指针，并在显示什么指向什么时很容易注意到链指向第一个变量`number`。

顺便提一句。它使用`92K`RAM，所以想象一下你能走多深。**

# java - “非 Web”Spring 应用程序中的 Hibernate LazyInitializationExceptioin

> ID：10087114
> 
> 赞同：3
> 
> 时间：2012-04-10T10:34:20.787
> 
> 标签：java, spring, hibernate, lazy-loading

我在**控制台应用程序**中使用 Spring 3.1 和 Hibernate 4 （我正在尝试这些框架的一些功能及其集成）。

如何`LazyInitializationExceptioin`在*非 Web 应用程序*中解决 Hibernate 问题？

我对 using 感到不满`OpenSessionInViewFilter`，但对不使用 servlet 的应用程序却一无所知...解决问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:00:51.853

在将 hibernate 加载的实例返回到控制台应用程序的视图层之前，请始终确保您需要在视图层中显示或访问的实体已初始化。

您可以使用以下方法强制初始化实体：

1.  [Hibernate.initialize()](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/Hibernate.html#initialize%28java.lang.Object%29)：

    例如，您必须在视图层中显示所有的 `orderDetail`，`Order`但您的控制台应用程序只加载一个`order`实例。假设 `orderDetail`是延迟加载，在返回`order`视图层之前，调用 `Hibernate.initialize(order.getOrderDetail())`

2.  使用[fetch 连接](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins)来获取`orderDetail`以及`order`导致返回的`order`对象`orderDetail`完全初始化：

    SELECT order FROM Order order **join fetch** order.orderDetail

* * *

更新 ：

`fetch = FetchType.EAGER`上 `@OneToMany`是第三个选项。这将导致如果 a`order`被加载，它`orderDetail`也将被自动加载和初始化。但这会影响全局。我们通常不会将默认的惰性获取计划更改为`@OneToMany`在映射元数据中急切获取，除非绝对确定这样做。相反，我们使用`fetch join`（选项 2）来覆盖默认的延迟获取计划，以便为特定的用例急切地获取。

# rest - Prestashop：获取父母类别的网址

> ID：10087116
> 
> 赞同：0
> 
> 时间：2012-04-10T10:34:43.523
> 
> 标签：rest, prestashop

我使用此网址获取类别： http: [//192.168.1.26/prestashop/api/categories](http://192.168.1.26/prestashop/api/categories)
但此链接返回所有类别。
我怎样才能得到父母的类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:03:48.593

我找到了，这就是我在你过滤的 url 中做
http://192.168.1.26/prestashop/api/categories/?display=full&filter[id_parent]=[]
的方式，没有父的类别

# c++ - 在它自己的声明中使用一个类

> ID：10087118
> 
> 赞同：-3
> 
> 时间：2012-04-10T10:34:52.790
> 
> 标签：c++, list, copy, private

好的，所以我的问题是这个。我需要复制一个定制的列表，并且该函数必须是我的列表类的私有成员。看起来像这样的自动取款机：

```
private:
struct List_Node* head_;
List* copy(List* list); 
```

看起来像我知道的废话，但我被告知要这样做。得到编译错误：

```
error: `List* List::copy(List*)' is private 
```

有什么方法可以解决这个问题还是我理解我的方向错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:37:16.470

您需要从另一个成员函数（即`public`.

您不能`private`从类外部调用成员函数。该错误表明您正在这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:38:24.090

如果您`List::copy`从（如标题所示）的成员函数中调用`List`，您应该没有问题。

如果你想从类外部调用它，你将无法访问私有成员函数（例如`copy`），除非你声明`friend`类的调用函数 a

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:49:01.277

尝试使用复制构造函数或运算符`=`重载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T11:19:55.513

我认为您被告知这样做是因为此类的用户不应该直接复制列表。列表节点也被声明为私有结构，外部函数无法访问。列表节点的构造和销毁都应该由这个类的成员方法来处理。

可能是因为这些原因，copy 方法应该受到保护，在这种情况下，声明为 private。

您可以在该类的任何成员方法中调用私有复制方法，包括公共方法。

尽管这不太可能发生，但您可以简单地声明一个仅调用此私有方法的公共成员方法，这会将私有方法暴露给外部函数。但是，首先将复制方法声明为私有是没有意义的。

# sqlite - 是否有可用于 OpenVMS 的 sqlite 的工作分布？

> ID：10087119
> 
> 赞同：0
> 
> 时间：2012-04-10T10:34:52.987
> 
> 标签：sqlite, vms, openvms

我正在寻找适用于 OpenVMS 的 SQLite 的工作发行版。我尝试使用我在邮件列表中找到的补丁，从合并文件构建 SQLite 3.7.9，但它并不完全有效。

我在 OpenVMS Alpha 7.3-2 上使用 HP C V7.1-015。由于我无法安装似乎包含 SQLite3 的 python，我必须从源代码构建。

我使用以下命令进行编译：

```
$ CC /OPTIMIZE -
     /DEFINE=(SQLITE_THREADSAFE=0, -
              SQLITE_OMIT_LOAD_EXTENSION=1, -
              SQLITE_OMIT_COMPILEOPTION_DIAGS=1, -
              SQLITE_OMIT_MEMORYDB=1, -
              SQLITE_OMIT_TEMPDB=1, -
              SQLITE_OMIT_DEPRECATED=1, -
              SQLITE_OMIT_SHARED_CACHE=1, -
              _USE_STD_STAT=ENABLE) -
     /FLOAT=IEEE_FLOAT -
     sqlite3.c
$ CC /OPTIMIZE -
     /DEFINE=(SQLITE_THREADSAFE=0, -
              SQLITE_OMIT_LOAD_EXTENSION=1, -
              SQLITE_OMIT_COMPILEOPTION_DIAGS=1, -
              SQLITE_OMIT_MEMORYDB=1, -
              SQLITE_OMIT_TEMPDB=1, -
              SQLITE_OMIT_DEPRECATED=1, -
              SQLITE_OMIT_SHARED_CACHE=1, -
              _USE_STD_STAT=ENABLE) -
     /FLOAT=IEEE_FLOAT -
     shell.c 
```

我从邮件列表中复制了定义，并添加了 /FLOAT=IEEE_FLOAT 以消除大多数关于浮点的警告（与指数 308 引起的溢出有关）。

在编译期间，我得到了一些信息和警告。链接时收到以下消息：

```
$ LINK shell.obj,sqlite3.obj
...
%LINK-W-NUDFSYMS, 2 undefined symbols:
%LINK-I-UDFSYM,         __STD_FSTAT
%LINK-I-UDFSYM,         __STD_STAT
... 
```

由于我在这里有点迷失，我宁愿拥有在 OpenVMS 上编译的 SQLite3 源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:18:46.017

您从链接器获得的具体问题源于您在编译时请求了系统没有的功能。我相信 _USE_STD_STAT 选项首先在 OpenVMS v8.2 中可用，但您使用的是 7.3-2。你的编译器和你的头文件知道当 _USE_STD_STAT 被定义时要做什么，但是在你的系统上的 C 运行时（VMS 中的 CRTL）中不存在处理 X/Open-compliant stat 结构的函数，并且你的链接器是告诉你，“没有这些功能。”

理想情况下，您将能够升级您的操作系统。在撰写本文时，当前版本是 v8.4。v7.3-2 是八年半前发布的，v8.2 是七年前发布的。我知道有技术、预算甚至政治原因导致升级并非总是可行的。如果是我，并且我被困在 OpenVMS Alpha v7.3-2 上，我会尝试从编译中删除 _USE_STD_STAT=ENABLE ，看看会发生什么。

启用 _USE_STD_STAT 的副作用之一是您还会获得 _LARGEFILE。如果这是 SQLite 需要该选项的唯一原因，您可能没问题，但仅限于 4GB 数据库。我怀疑它的作用远不止于此，即 SQLite 很可能会使用 stat 结构中确实需要更新结构的元素。

[您可以在http://h71000.www7.hp.com/doc/84final/5763/5763profile_062.html#index_x_1699](http://h71000.www7.hp.com/doc/84final/5763/5763profile_062.html#index_x_1699)阅读传统和符合标准的统计结构的差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:21:00.753

我最近改进了我的 SQLite VMSish 补丁，并使其可用于 SQLite 版本 3.7.14.1：http://www.mail-archive.com/sqlite-users@sqlite.org/msg73570.html （或[http](http://www.mail-archive.com/sqlite-users@sqlite.org/msg73570.html) [:// sqlite.1065341.n5.nabble.com/Building-SQLite-3-7-14-1-for-OpenVMS-td65277.html](http://sqlite.1065341.n5.nabble.com/Building-SQLite-3-7-14-1-for-OpenVMS-td65277.html)）。

POSIX 锁定仍然不起作用，我无法找出原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:44:09.720

好吧，[在 sqlite-users 邮件列表](http://www.mail-archive.com/sqlite-users@sqlite.org/msg66405.html)上有一条关于让 SQLite 3.7.9 在 OpenVMS 上运行的消息。我不知道这与您拥有的版本有多相关（或者该补丁是否被 SQLite 开发人员采用；出于法律原因 IIRC，他们有点挑剔），但它看起来可能很有用。祝你好运。

# jquery - Autoellipsis 不适用于淡入淡出的内容

> ID：10087121
> 
> 赞同：0
> 
> 时间：2012-04-10T10:35:08.183
> 
> 标签：jquery, ellipsis

我正在使用以下 jQuery 插件：

[http://pvdspek.github.com/jquery.autoellipsis/](http://pvdspek.github.com/jquery.autoellipsis/)

省略号插件适用于我在页面加载时选择的选择器。当我使用fadeIn 和fadeOut 将另一个部分加载到站点中时，淡入的新内容似乎没有省略号。

我看过使用省略号的“实时”选项，但没有任何运气。

对此的任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:45:16.043

该插件仅适用于页面加载时 DOM 中可用的元素。因此，我假设您正在通过 AJAX 动态加载新内容？

在这种情况下，就在您调用之前，您`fadeIn()`需要`$("#mySelector").ellipsis()`再次调用，以便它可以处理新内容。

# java - JAVA - 围棋算法

> ID：10087136
> 
> 赞同：0
> 
> 时间：2012-04-10T10:35:59.857
> 
> 标签：java, algorithm, baduk

我正在尝试实现一种算法来清除围棋游戏中的死子。

我听说 Floodfill 是实现这一目标的最佳方法，因为递归使用它会最有效且更容易实现。

我在我的代码中使用它时遇到了麻烦，我想知道我应该如何去实现它。

这是我的一门课，很容易解释。

```
import java.io.*;

public class GoGame implements Serializable {

    int size;
    char[][] pos; // This is the array that stores whether a Black (B) or White (W) piece is stored, otherwise its an empty character.

    public GoGame(int s){
        size = s;
    }

    public void init() {
        pos = new char[size][size];
        for (int i=0;i<size;i++) {
            for (int j=0;j<size;j++) {
                pos[i][j] = ' ';
            }
        }
    }

    public void ClearAll() {
        for (int i=0;i<size;i++) {
            for (int j=0;j<size;j++) {
                pos[i][j] = ' ';
            }
        }
    }

    public void clear(int x, int y) {
        pos[x][y]=' ';
    }

    public void putB(int x, int y) { //places a black stone on the board+array
        pos[x][y]='B';
        floodfill(x,y,'B','W');

    }

    public void putW(int x, int y) { //places a white stone on the board+array
        pos[x][y]='W';
        floodfill(x,y,'W','B');

    }

    public char get(int x, int y) {
        return pos[x][y];
    }

    public void floodfill(int x, int y, char placed, char liberty){

        floodfill(x-1, y, placed, liberty);
        floodfill(x+1, y, placed, liberty);
        floodfill(x, y-1, placed, liberty);
        floodfill(x, y+1, placed, liberty);

    }

} 
```

`x`和`y`是正方形的坐标，`placed`是放下石头的字符，`liberty`是另一个字符

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:21:08.877

虽然其他答案在技术上是正确的，但您也缺少更多与 go 相关的逻辑。你需要做的是，我认为（在 B 移动）：

```
for each W neighbour of the move:
   check that W group to see if it has any liberties (spaces)
       remove it if not 
```

洪水填充对于查找一组石头的范围很有用，但是您的例程需要的远不止这些（我在这里进行了简化，并且还试图猜测该例程的用途 - 请参阅此答案下方的评论）。

鉴于上述情况，识别组中所有石头的洪水填充将是这样的（请注意，它使用第二个数组进行填充，因为您不想`pos`仅仅为了找到一个组而进行更改）：

```
public void findGroup(int x, int y, char colour, char[][] mask) {
    // if this square is the colour expected and has not been visited before
    if (pos[x][y] == colour && mask[x][y] == ' ') {
        // save this group member
        mask[x][y] = pos[x][y];
        // look at the neighbours
        findGroup(x+1, y, colour, mask);
        findGroup(x-1, y, colour, mask);
        findGroup(x, y+1, colour, mask);
        findGroup(x, y-1, colour, mask);
    }
} 
```

您可以调用它来识别单个组（并将其复制到掩码中），因此它将帮助您识别与 B 移动相邻的 W 组的成员（例如），但这只是整个逻辑的一小部分你需要。

最后，请注意，如果您想对组中的每一块石头做某事，您有两种选择。你可以像上面那样调用一个例程，然后循环`mask`查找组，或者你可以将你想要做的动作直接放在例程中（在这种情况下你仍然使用`mask`控制洪水填充的程度测试`&& mask[x][y] == ' '`，但您没有使用它作为结果 - 所有工作都在例程返回时完成）。

（按照所有规则编程要正确处理的东西实际上非常复杂 - 你还有很多工作要做......：o）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-17T09:09:49.690

我会为此使用虚假证据。以下是我如何找到捕获的石头：

```
private static final int SIZE = 8;
private static final int VACANT = 0;       //empty point
private static final int MY_COLOR = 1;     //Black
private static final int ENEMY_COLOR = 2;  //White
private static final int CHECKED = 50;     //Mark for processed points
private static final int OUT = 100;        //points out of the board

private static boolean isCaptured(int col, int row, int[][] board) {
    boolean result = !isNotCaptured(col, row, board);
    cleanBoard(board);
    return result;
}

private static boolean isNotCaptured(int col, int row, int[][] board) {
    int value = board[col][row];
    if (!(value == MY_COLOR || value == CHECKED))
        return true;

    int top = row < SIZE - 1 ? board[col][row + 1] : OUT;
    int bottom = row > 0 - 1 ? board[col][row - 1] : OUT;
    int left = col > 0 ? board[col - 1][row] : OUT;
    int right = col < SIZE - 1 ? board[col + 1][row] : OUT;

    if (top == VACANT || right == VACANT || left == VACANT || bottom == VACANT)
        return true;

    board[col][row] = CHECKED;

    return (top == MY_COLOR && isNotCaptured(col, row + 1, board))
            || (bottom == MY_COLOR && isNotCaptured(col, row - 1, board))
            || (left == MY_COLOR && isNotCaptured(col - 1, row, board))
            || (right == MY_COLOR && isNotCaptured(col + 1, row, board));
}

private static void cleanBoard(int[][] board) {
    for (int i = 0; i < SIZE; i++) {
        for (int j = 0; j < SIZE; j++) {
            if (board[i][j] == CHECKED)
                board[i][j] = MY_COLOR;
        }
    }
} 
```

然后你可以像这样调用方法：

```
isCaptured(5, 4, board) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T17:37:05.370

我认为 BFS 对于这种情况会更好，因为你需要先探索邻居，这样如果他们中的任何一个被捕获，那么这个点就会被捕获。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-12T07:27:35.567

正如其他人指出的那样，围棋中还有一个“ko规则”，大致意思是当你捕获一块石头时，你不能立即夺回（*简化*）。总之，您可能希望为此使用现有的库。

我推荐**brugo**存储库，它在 maven 中可用。

```
<!-- https://mvnrepository.com/artifact/be.brugo/brugo -->
<dependency>
    <groupId>be.brugo</groupId>
    <artifactId>brugo</artifactId>
    <version>0.1.0</version>
</dependency> 
```

它大致是这样工作的。（警告：代码未经测试）

```
// create a starting position
Position position = new Position(boardSize, komi);

// play a move
Intersection whereToPlay = Intersection.valueOf(4,4);
IntStatus colorToPlay = IntStatus.BLACK;
Position position2 = position.play(whereToPlay, colorToPlay);

// watch the result.
IntStatus[][] matrix = position2.getMatrix() 
```

它还包含要导出到加载/保存 SGF 的对象。SGF 文件的加载不仅支持`UTF-8`亚洲编码，还支持亚洲编码。这是一个屏幕截图，显示了实现自己的难度：

[![部分代码图片](../Images/552d3ac3d4aad980ed86e93cf4b97427.png)](https://i.stack.imgur.com/ONZiJ.png)

如果您还计划使用 javafx，请运行此演示：`brugo.go.ui.javafx.goban.GobanComponentDemo`

足以让您入门。

# java - jsp在html5中包含函数？

> ID：10087141
> 
> 赞同：0
> 
> 时间：2012-04-10T10:36:27.860
> 
> 标签：java, html, jsp

html5 中是否有一个类似于 jsp 包含的函数？

可以通过使用单个源自动将其添加到页面中的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:38:28.670

你在寻找类似的东西`iframe`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:39:50.583

不，如果您需要这种行为，请使用 PHP 等服务器端语言。如果你不能这样做，你必须使用 JavaScript 通过 AJAX 获取另一个页面，然后将其添加到 DOM 中来“包含”另一个页面。

**PHP 示例：**

```
<?php include 'header.html'; ?>
<h1>hi</h1>
<p>blah blah</p>
<?php include 'footer.html'; ?> 
```

**[使用 jQuery 的](http://api.jquery.com/load/)JS 示例：**

```
<!doctype html>
<body>
    static stuff
    <div id="content"></div>
    <script>
        $('#content').load('content.html');
    </script>
</body> 
```

不要像**这样**使用 JS 解决方案。任何没有支持 JS 的浏览器（例如搜索引擎）的人都无法使用该页面。

# javascript - javascript中类中私有函数的实例创建

> ID：10087142
> 
> 赞同：1
> 
> 时间：2012-04-10T10:36:33.243
> 
> 标签：javascript

当创建 tempobj 的多个实例时，以下代码是否会创建函数 fun1 的多个实例？我知道为每个对象创建了单独的 fun2 实例。我需要知道 fun1 是否也会发生同样的情况。

```
function tempobj(){
 var fun1 = function(){ 
  //do something;
 }
 this.fun2 = function(){
  //do something;
  }
}
var obj1 = new tempobj();
var obj2 = new tempobj();
var obj3 = new tempobj(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:38:49.520

答案是肯定的，每次创建对象时都在定义 fun1。

# php - 格式化显式内容的实用方法

> ID：10087143
> 
> 赞同：11
> 
> 时间：2012-04-10T10:36:37.620
> 
> 标签：php, html, content-management-system, standards

作为博主，我想根据内容的明确程度（暴力、色情、剧透、淫秽等）标记我的 CMS 中的任何内容。是否有适当的实用库和标准？

我读过 RTA、ICRA、PICS 和 W3C POWDER，但它们用元数据或标题标记整个页面。POWDER 似乎太复杂了——据我了解，它在页面之外添加了元数据？如果我使用 HTML5 文档类型，您能否提供一个简单有用的示例。

我想要的是一种根据评分来标记 HTML 元素的方法。我还希望它符合任何父母过滤。将 EXIF 数据添加到图像中以使它们独立于上下文进行过滤也会很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T17:23:35.327

据我所知，没有任何广泛使用的标准可以做到你所描述的。另外，最终目标是什么？让浏览器自动识别（并以某种方式处理/过滤）显式内容？

如果您打算自己处理过滤，则可以使用 HTML5 自定义数据属性。有了它们，您可以执行以下操作：

```
<li class="blogpost" data-rating="G"> [content] </li> 
```

然后使用该自定义属性通过 JavaScript、CSS、PHP 或任何其他语言过滤/隐藏内容，例如：

```
li.blogpost[data-rating="R"] { [some styling] } 
```

如何处理这种范式的选择非常广泛。这并不完全是一个标准，显然需要大量的规划和编码。但是，它允许您根据您定义的指标过滤内容。这种类型的解决方案可以很好地与其他评论中建议的简单登录系统配对，其中用户可以选择他们想要过滤的内容。您还可以为其定义年龄限制，或使用任意数量的其他选项。

这可能不会为您提供任何基于标准的自动过滤器或类似的东西，但据我所知，这些技术并没有得到广泛支持。

如果这甚至与您要查找的内容不相近，您能否提供有关您希望最终产品如何运行的更多详细信息？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T16:16:16.500

由于没有微格式，我决定制作一个。将其命名为 xrate 1.0，写了[一篇关于它](http://kurapov.name/eng/tech/explicit_content_format/)的文章并将[草稿添加到 microformats.org](http://microformats.org/wiki/xrate)

基本上它是关于基于这些 HTML 属性的危险从 0-100 对内容进行评级：

*   `data-xrate-lang`- 淫秽语言
*   `data-xrate-sex`- 浪漫、色情、色情
*   `data-xrate-nude`- 裸露程度
*   `data-xrate-disgust`- 可能引起厌恶（粪便、幼虫、腐烂）
*   `data-xrate-violence`- 暴力及其后果 - 武器、伤口、尸体、鲜血
*   `data-xrate-asocial`- 吸烟、酗酒、吸毒、赌博、卖淫
*   `data-xrate-blink`- 可能导致癫痫的闪烁动画
*   `data-xrate-spoiler`- 故事被重述
*   `data-xrate-camera`- 如果应用程序（闪存/小程序？）可以访问摄像机
*   `data-xrate-malware`- 如果资源会导致查看者机器上的感染（病毒、木马等）

请告知是否有更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:01:47.347

我在为您浏览解决方案时偶然发现了这一点

[http://www.ehow.com/how_7580400_filter-explicit-content-apache-server.html](http://www.ehow.com/how_7580400_filter-explicit-content-apache-server.html)

也许它会帮助你

> 指示
> 
> ## 1
> 
> 下载并安装 mod_sed Apache 模块（请参阅 [参考资料](http://httpd.apache.org/docs/trunk/mod/mod_sed.html)）。一些主机账户可能已经安装了这个 Apache 模块；在这种情况下，请联系您的网络托管服务提供商以检查该模块是否已经可用。
> 
> ## 2
> 
> 登录到您的 Web 服务器并在记事本中打开“httpd.conf”文件。如果使用本地 Web 服务器，则可以在 Apache 文件夹中找到此文件，在大多数主机帐户上，该文件位于“/etc/httpd/conf”文件夹中。如果您无法找到此文件，请联系您的 Web 托管服务提供商寻求帮助。
> 
> ## 3
> 
> 添加用于过滤显式内容的命令。例如，要将所有 HTML 文件中的单词“damn”自动替换为“darn”，请在“httpd.conf”文件中键入以下内容：
> 
> AddOutputFilter Sed html
> 
> OutputSed "s/damn/darn/g"
> 
> ## 4
> 
> 保存您的更改。
> 
> 阅读更多：如何过滤 Apache Web 服务器中的显式内容 | eHow.com [http://www.ehow.com/how_7580400_filter-explicit-content-apache-server.html#ixzz1rw85S300](http://www.ehow.com/how_7580400_filter-explicit-content-apache-server.html#ixzz1rw85S300)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T10:41:37.617

有一个用于评级的元标记：`name="rating" content="general"`，但是据我了解，许多行业并未真正使用它，因此可能有点毫无意义-尽管我不能谈论过滤软件。

我从未听说过 EXIF 中有任何关于评级的图像。

如果某些东西*那么*敏感，它应该在年龄检查登录之后，如果不是，你应该相信用户和他们在使用它时的自动过滤。

# matlab - MATLAB - 在矩阵的第一列添加值

> ID：10087148
> 
> 赞同：0
> 
> 时间：2012-04-10T10:37:02.603
> 
> 标签：matlab, matrix

例如，我想在矩阵的开头添加一个值，我的矩阵是

```
0,0,0,0,0,0
0,1,1,1,0,0
1,0,0,1,0,0
1,1,1,0,0,0 
```

然后我想在第一列添加“1”或“0”因此它会变成这样

```
1,0,0,0,0,0,0
1,0,1,1,1,0,0
1,1,0,0,1,0,0
1,1,1,1,0,0,0

0,0,0,0,0,0,0
0,0,1,1,1,0,0
0,1,0,0,1,0,0
0,1,1,1,0,0,0 
```

我怎么能在 MATLAB 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T10:46:22.653

您可以连接矩阵，而无需像这样从头开始创建另一个矩阵：

```
% your matrix
A = [ 0,0,0,0,0,0;
      0,1,1,1,0,0;
      1,0,0,1,0,0;
      1,1,1,0,0,0 ];

A_with_zeros = [zeros(size(A,1),1) A]
A_with_ones = [ones(size(A,1),1) A]

% Output:
%  A_with_zeros = [ 0 0 0 0 0 0 0
%                   0 0 1 1 1 0 0
%                   0 1 0 0 1 0 0 
%                   0 1 1 1 0 0 0 ]
% 
%  A_with_ones = [ 1 0 0 0 0 0 0 0
%                  1 0 0 1 1 1 0 0
%                  1 0 1 0 0 1 0 0
%                  1 0 1 1 1 0 0 0 ] 
```

**关于连接矩阵的文档**：

*   [horzcat](http://www.mathworks.com/help/techdoc/ref/horzcat.html)
    *   [垂直猫](http://www.mathworks.com/help/techdoc/ref/vertcat.html)

    这两个文档页面详细描述了允许您水平连接数组（我在上面的示例中所做的）和垂直连接数组（如果您想向矩阵添加行）的现有方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:48:26.517

使用数组连接语法 -`[a b]`将矩阵水平粘合在一起，`[a; b]`将它们垂直粘合在一起。

像这样：

```
>> a = ones(3,1)

a =

     1
     1
     1

>> b = magic(3)

b =

     8     1     6
     3     5     7
     4     9     2

>> c = [a b]

c =

     1     8     1     6
     1     3     5     7
     1     4     9     2 
```

垂直：

```
>> d = ones(1,3)

d =

     1     1     1

>> e = [d; b]

e =

     1     1     1
     8     1     6
     3     5     7
     4     9     2 
```

如果尺寸不匹配，MATLAB 会给您一个错误。不要这样做：

```
>> f = ones(1,10)

f =

     1     1     1     1     1     1     1     1     1     1

>> g = magic(3)

g =

     8     1     6
     3     5     7
     4     9     2

>> [f; g]
??? Error using ==> vertcat
CAT arguments dimensions are not consistent. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:39:02.470

创建一个带有额外列的新矩阵，复制旧矩阵，然后将新列的数据放入 (:, 1)。

```
output = zeros(size(input, 1), size(input, 2) + 1);
output(:, 2:end) = input;
output(:, 1) = new_column; 
```

或者，如果您的意思是要获得两个矩阵，一个具有 1 列，一个具有 0 列：

```
output0 = zeros(size(input, 1), size(input, 2) + 1);
output0(:, 2:end) = input;
output1 = ones(size(input, 1), size(input, 2) + 1);
output1(:, 2:end) = input; 
```

# payment-gateway - 是否可以让 PayPal 标准默认展开“客人付款”选项卡？

> ID：10087150
> 
> 赞同：3
> 
> 时间：2012-04-10T10:37:07.290
> 
> 标签：payment-gateway, paypal, opencart, paypal-adaptive-payments

我正在使用 PayPal Standard 来处理订单。我将“Paypal Account Optional”功能设置为开启，这样就可以接受没有 Paypal 帐户的客户的付款。OpenCart 是我正在使用的购物系统。

**这是客户想要购买商品时显示的屏幕：**

![在此处输入图像描述](../Images/9ae7456b9d23866948ef6a6d8eeee18e.png)

**当您单击“没有 PayPal 帐户？”时 链接，选项卡被展开：**

![在此处输入图像描述](../Images/b969dbf900e9d697716bdf2fff0ed46c.png)

**是否可以默认扩展此选项卡，也许通过首先发送到站点的代码以及订单详细信息？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:15:51.407

我发现 PayPal 在您登录时会存储一个 cookie。如果您在 PayPal 上有用户，它将显示“登录”选项卡。如果您从未使用过 PayPal，或者您已删除 cookie，则 paypal 将显示“访客付款”选项卡。

我可以忍受这一点，但始终让它默认显示访客付款仍然会很好。

# cygwin - 将 cygwin 主目录设为 Windows 的用户配置文件

> ID：10087151
> 
> 赞同：21
> 
> 时间：2012-04-10T10:37:07.743
> 
> 标签：cygwin

当我在 Windows 机器上开发 Ruby on Rails 时，我需要使用 cygwin 来模拟 Unix 命令提示符。现在的问题是，每次打开 cygwin 终端时，我都会被带到这个目录 C:/cygwin/home/my_user_name，而不是 Windows 的默认用户目录 C:/Users/my_user_name。

有谁知道如何将 cygwin 的默认主目录设置为 Windows 默认 C:/Users/my_user_name 目录？

我浏览了 Stack Overflow 中提供的各种解决方案，但它们都不适合我，“mkpasswd”也不起作用。这与我的操作系统版本有关，还是与其他有关？

我使用的是 cygwin 1.7.5，我的操作系统是 Windows 7 Business 64 位。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-18T03:43:45.410

```
mount -f "$USERPROFILE" ~
mount -m > /etc/fstab 
```

有关的

[安全地更改主目录](https://stackoverflow.com/q/225764)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-27T16:27:59.970

我只需将 Windows 中的 HOME 环境变量设置为`C:\Users\MyUsername`. 当我启动 Cygwin 时，它现在看起来在那里。这有一个额外的好处，即导致常规 Win32 上的 Emacs（即，不是通过 Cygwin）在正确的位置而不是在`C:\Users\MyUsername\AppData\Roaming`（因此在那里寻找 .emacs 和 .emacs.d）开始

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-05T17:43:22.677

根据[Cygwin 文档](https://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-mapping-nsswitch-passwd)，您可以编辑`/etc/nsswitch.conf`和更改 de db_home 参数。

*   %u - Cygwin 用户名（小写的 u）。
*   %U - Windows 用户名（大写的 U）。
*   %D - NetBIOS 样式的 Windows 域。
*   %H - POSIX 风格的 Windows 主目录。请注意，对于 db_home: 设置，
*   %_ - 由于空格和 TAB 字符用于分隔模式，因此文件名中的空格必须以 %_ 形式给出（即下划线）。
*   %% - 百分比字符。

这是我的 /etc/nsswitch.conf 的内容，用于`home`在每个用户目录中创建一个目录

```
# /etc/nsswitch.conf
#
#    This file is read once by the first process in a Cygwin process tree.
#    To pick up changes, restart all Cygwin processes.  For a description
#    see https://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-mapping-nsswitch    
# Defaults:
# passwd:   files db
# group:    files db
# db_enum:  cache builtin
# db_home: /home/%U <------ This was the default setting
db_home: /%H/home # db_home: /home/%U <- This was the default setting
# db_shell: /bin/bash
# db_gecos: <empty> 
```

重新启动任何 Cygwin 进程

# sql - 我可以使用 DBCC CHECKIDENT 来处理表变量中的标识列吗？

> ID：10087159
> 
> 赞同：0
> 
> 时间：2012-04-10T10:37:27.017
> 
> 标签：sql, sql-server, dbcc

我在脚本中创建了一个带有标识列的表变量，我想重新设置该列的种子。我可以使用下面的脚本吗？

```
DBCC CHECKIDENT (tableVariableName, reseed, @NewStartSeedValue) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:50:09.773

您不能重新设定表变量的标识列，您需要改用临时*表*。根据您要执行的操作，排名函数 ( `row_number()`) 可能有用。

# java - 是否可以在跨平台上使用 .NET 调用 Java 方法（或调用对象）？

> ID：10087161
> 
> 赞同：1
> 
> 时间：2012-04-10T10:37:38.543
> 
> 标签：java, .net, cross-platform, hive

1) 我在 Hive (Hadoop) 中实现了一项任务。

2）还有一些在.NET中的GUI。我的任务来自这个 GUI，我想将所有参数从 .NET 中的 GUI 发送到 Hive (Ununtu)，然后再从 Hive 发送到 GUI 以获取处理结果。

我的问题是，是否可以使用 .NET 调用 Java 方法（或调用对象）？因为我在 Java 中为 Hive 和 Hadoop 使用 VM（Ubuntu）。我也在处理 Windows 中的 .NET。

我也是 .NET 的新手

请向我建议一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:55:34.093

对于跨平台（和跨语言）通信，有几个选项：

*   [CORBA](http://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture)和[替代品](http://linuxfinances.info/info/corbaalternatives.html)
*   网络服务（例如使用[SOAP](http://en.wikipedia.org/wiki/SOAP)）
*   宁静的服务
*   等等

您使用的内容取决于您的要求（复杂性、性能等）以及您已经拥有的内容（我对 Hadoop 和 Hive 都不了解，但我假设它们已经提供了 Web 服务或 REST 接口）。

# php - 如何添加面包屑？

> ID：10087168
> 
> 赞同：5
> 
> 时间：2012-04-10T10:38:12.723
> 
> 标签：php, drupal, drupal-7, drupal-theming, breadcrumbs

如何将面包屑添加到我的出勤模块中的页面。

我使用了以下钩子，但它也更改了其他模块中所有页面的面包屑。

```
function attendance_init() {
// set the breadcrumb
$breadcrumb = array();
$breadcrumb[] = l('Home', '<front>');
$breadcrumb[] = l('People', 'group/node/'. arg(2) .'/people');
$breadcrumb[] = l('Attendance', 'group/node/'. arg(2) .'/people/attendance');
drupal_set_breadcrumb($breadcrumb);         
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T07:30:10.323

如果您试图更改特定内容类型节点的面包屑，请尝试使用[hook_node_view_alter](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_view_alter/7) ()

这是一个例子：

```
function attendance_node_view_alter(&$build)
{
    $node = $build['#node'];
    if($build['#view_mode'] == "full" && $node->type == "attendance")
    {
        $breadcrumb = array();
        $breadcrumb[] = l('Home', '<front>');
        $breadcrumb[] = l('People', 'group/node/'. arg(2) .'/people');
        $breadcrumb[] = l('Attendance', 'group/node/'. arg(2) .'/people/attendance');
        drupal_set_breadcrumb($breadcrumb);
    }
} 
```

希望这行得通……穆罕默德

# c++ - 使用 doxygen 记录 C++ 概念？

> ID：10087171
> 
> 赞同：7
> 
> 时间：2012-04-10T10:38:28.280
> 
> 标签：c++, documentation, doxygen

有没有一种方便的方法可以在 doxygen 中记录 C++ 概念？我想[在 boost 文档中有这样的文档](http://www.boost.org/doc/libs/1_49_0/libs/graph/doc/BidirectionalGraph.html)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T15:21:55.580

在与 Doxygen 进行了一番挣扎之后，我终于找到了以下解决方案。

1.  为您的概念定义一个组：使用页面并不合适，因为页面应该指示其子页面（从树的顶部到底部），而组指示可能有许多父组。这允许：

    *   将概念添加到一个（或多个）父概念，而不改变父概念本身（概念的细化/概括）
    *   在不改变概念本身的情况下将实体链接到多个概念（例如，将类添加到实现特定概念的库时）

    例子

    ```
    /*!@defgroup measurement_functor_concepts Measurement function objects
     * @ingroup generalconcepts
     * @{
     * @par Description
     * blablabla
     *
     * @par Notations
     * Let @c F be the type of the function object, @c f an instance.
     *
     * @par Valid Expressions
     * - @c f function object is ...
     * - <b>f.result()</b> returns ...
     * @}
     */ 
    ```

2.  `concept`使用一个参数定义自定义命令：

    ```
    ALIASES += concept{1}="@ingroup \1\n@par Implemented concepts:\n@ref \1" 
    ```

    命令：

    *   将实体包含在定义概念的组中：实体将出现在概念的文档中（实体可能出现在多个组中）
    *   添加一个段落，`Implemented concepts`提供指向已实现概念的链接。
3.  表明一个特定的类/结构实现了这个概念：

    ```
    //!@brief Does things...
    //!@concept{measurement_functor_concepts}
    template <class T>
    struct my_struct: public std::unary_function<T, void> {}; 
    ```

我没有找到一种方法来生成像 Boost 中那样的好文档（有效表达式的好表等），但至少文档的这种组织可以正确地分离事物。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T13:31:21.003

您可以做的是定义一个名为 Concept 的自定义标签，然后您可以按照您的描述使用它。这方面的一个[例子](http://www.doxygen.nl/manual/custcmd.html "自定义标签")是使用 Doxygen 中的别名机制，例如：

ALIASES += "con=\xrefitem con \"Concept\" \"Concepts\" "

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T10:43:36.023

您可以`\tparam`用来评论/记录[模板参数](http://www.doxygen.nl/manual/commands.html#cmdtparam)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T02:18:49.197

我目前使用单独的手册页来记录概念并将 with`\section`和`\subsection`. 然后，我可以使用 链接到它们`\ref`。只要您在提供的链接中使用表格描述概念，这就会起作用，但遗憾的是不会启用指向单个部分的链接。

我还有一个别名来创建类型模型的概念列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-09T20:38:19.557

我建议你考虑以下几点：

a) 查看 Boost 概念检查库的文档。本文档向您展示了如何创建一个可在您的代码中使用的类，以验证 at 类型实际上满足您要定义的概念的要求。你像这样使用它：

```
template<typename T>
my_class{
  MyConcept(T); // provokes compile error if T does not match concept
  T m_t;
}; 
```

仅供参考，用于创建概念检查类的元素与概念精简版提案之间存在一对一的对应关系。因此，当概念精简版真正起作用时，过渡应该很容易。

b) 现在使用 DOxygen 记录 MyConcept 检查类！！！

c) 在 my_class 文档中使用 DOxygen /tparam 来参考 MyConcept

c）所以现在你得到了你想要的东西！！！- 您的概念的单独页面，以及从需要该概念的所有课程中引用它的能力。

# ruby-on-rails - 在狂欢中改变完整的布局

> ID：10087176
> 
> 赞同：1
> 
> 时间：2012-04-10T10:38:45.110
> 
> 标签：ruby-on-rails, views, spree

我正在开发 spree 1.0.0，并一直在为我的电子商务网站做一些研究。

我已经在我的应用程序中制作并使用了一些现有的扩展。现在，我正在研究布局，并一直试图找出最好的方法。

我的需要是与 spree 提供的相比，我必须更改商店的完整前端布局。

从我的角度来看，一些选项是

-> 使用扩展来编写覆盖 spree 提供的模板的所有视图，

-> 使用 Deface 覆盖视图（这会很忙，因为我必须更改几乎每一页上的所有内容）

-> 使用上述选项的混合功能。

还是有其他方法可以做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T17:47:24.013

您可能很快就会遇到一个新问题：告诉您的新控制器使用您的新 spree_application 布局。

spree google group 表示可以在任何地方使用继承来使用主应用程序：[https ://groups.google.com/forum/?fromgroups#!topic/spree-user/mB02WqMnCnw%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/spree-user/mB02WqMnCnw%5B1-25%5D)

但是，我仍然没有弄清楚如何解决这些控制器的路由问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:40:08.757

您可以通过在应用程序目录中`app/views/layouts/spree_application.html.erb`放置一个同名文件来覆盖 。`app/views`

# iphone - 带有图像的自定义工具栏

> ID：10087179
> 
> 赞同：1
> 
> 时间：2012-04-10T10:38:51.443
> 
> 标签：iphone, objective-c, ios, custom-controls, uitoolbar

我打算使用我自己的图像实现自定义工具栏。或多或少完全像[this](http://www.lovelyui.com/post/20592987385/music-player-on-madonna%5C)或[this](http://www.lovelyui.com/post/20418666273/navigation-on-zaarly)的东西。这样做需要什么。我可以从 UIView 派生一个控件，然后创建另一个子类来显示实际的工具栏项并自己处理所有绘图`drawRect`，还是使用标准 UIKit 控件来处理图像的绘制会更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:28:00.927

您可以使用标准的 UITabBar - 它是非常可定制的。您可以设置自定义`backgroundImage`并`selectionIndicatorImage`完全改变其外观。在 UITabBarItems 上，您可以使用`finishedSelectedImage`和`finishedUnselectedImage`属性控制外观。

希望它有所帮助，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:05:13.720

让它按照我想要的方式工作的唯一方法是使用自定义控件。

# iphone - 在自定义静态单元格中按下 UIButton 时没有动作

> ID：10087184
> 
> 赞同：0
> 
> 时间：2012-04-10T10:39:10.620
> 
> 标签：iphone, objective-c, ipad

使用iOS5。我将 UIButton 对象拖到自定义静态单元格内。因为我没有使用动态属性，所以我没有使用数据源模板。问题是在单元格内按下 UIButton 时我无法触发任何事件。我在我的表格视图控制器中运行对开代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSIndexPath *myIP = [NSIndexPath indexPathForRow:1 inSection:1];
    UITableViewCell *cell = [medicareTableView cellForRowAtIndexPath:myIP];
    UIButton *stepNumberOfChildren = (UIButton *)[cell viewWithTag:222];

    [stepNumberOfChildren addTarget:self action:@selector(dontTouchMe:) forControlEvents:UIControlEventTouchUpInside]; 

}
- (void)dontTouchMe:(id)sender {
    NSLog(@"Touched Button %i",((UIButton *)sender).tag);
} 
```

运行应用程序，按下 UIButton 并没有记录任何内容......我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:41:57.397

将您的插座连接到 dontTouchMe 功能 (TouchUpInside)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:52:52.987

我希望您只想将目标添加到 row=1 和 section=1 处的单元格

所以代码如下，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   if(indexpath.row==1&&indexpath.section==1)
   {
   //add the button target
   }
} 
```

# c# - 以数字作为字段名称的 JsonResult

> ID：10087186
> 
> 赞同：2
> 
> 时间：2012-04-10T10:39:24.203
> 
> 标签：c#, asp.net-mvc, json, jsonresult

我需要从我的 ASP.NET MVC 3 应用程序返回一个 JSON 结果，如下所示：

```
{ 0: value1, 1: value2 } 
```

但是我无法创建一个匿名类型的对象，该对象将数字作为字段名称。那么我能做什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T10:47:05.943

```
var dict = new Dictionary<string,string>();
dict["0"] = "value1";
dict["1"] = "value2";

var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
var output = serializer.Serialize(dict); 
```

输出是

```
 {"0":"value1","1":"value2"} 
```

# iphone - 在pdf文件中定位字节并读取行

> ID：10087192
> 
> 赞同：0
> 
> 时间：2012-04-10T10:39:56.283
> 
> 标签：iphone, objective-c, ipad

我尝试阅读pdf文件。我想使用这个功能

```
databuffer = [file readDataOfLength : 7] but i want read all the byte in the line . 
```

这意味着我`seekToFileOffset`用来查找字节，但我想读取该行。

```
NSMutableArray      *nameArray = [[NSMutableArray alloc] initWithObjects:nil];

NSMutableArray      *nameArrayDict = [[NSMutableArray alloc] initWithObjects:nil];
NSString            *path          = [[NSBundle  mainBundle] pathForResource:@"testpdf" ofType:@"pdf"];
NSString            *contents      = [NSString   stringWithContentsOfFile:path encoding:NSASCIIStringEncoding error:nil];

    int var=[[nameArray objectAtIndex:[nameArray count]-2] intValue];

     NSFileHandle *file;
     NSData *databuffer;
     file = [NSFileHandle fileHandleForReadingAtPath: appFile];

     int i=0;
     while (file!=nil ) {
        [file seekToFileOffset: var+i];

        databuffer = [file readDataOfLength : 7];
        NSString* aStr;
        aStr = [[NSString alloc] initWithData: databuffer encoding:NSASCIIStringEncoding];

        NSLog(@"%@",aStr);

        i=i+[databuffer length];
    } 
```

现在我尝试您的解决方案，但我什么也不能显示！！！！

```
CGPDFPageRef page = CGPDFDocumentGetPage (myDocument, 1);// 2

CGPDFDictionaryRef d;

d = CGPDFPageGetDictionary(page);

CGPDFScannerRef myScanner; 

CGPDFOperatorTableRef myTable;
myTable = CGPDFOperatorTableCreate();

CGPDFContentStreamRef myContentStream = CGPDFContentStreamCreateWithPage (page);// 3

myScanner = CGPDFScannerCreate (myContentStream, myTable, NULL);// 4

CGPDFScannerScan (myScanner);// 5

CGPDFOperatorTableSetCallback(myTable,  "BT", &op_BT);//Begin text object
CGPDFOperatorTableSetCallback(myTable,  "ET", &op_ET);//End text object
CGPDFOperatorTableSetCallback (myTable, "MP", &op_MP);
CGPDFOperatorTableSetCallback (myTable, "DP", &op_DP);
CGPDFOperatorTableSetCallback (myTable, "BMC", &op_BMC);
CGPDFOperatorTableSetCallback (myTable, "BDC", &op_BDC);
CGPDFOperatorTableSetCallback (myTable, "EMC", &op_EMC); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:51:06.167

我建议不要以您喜欢的方式解析您的 pdf。

尝试使用`CGPDFScanner`（[此处的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CGPDFScanner/Reference/reference.html)）

正如 JeremyP 所说：很多 zlib 压缩的东西都在 PDF 文件中。搜索行尾。使用 CGPDFScanner 提取字体图、图像等。

但并不是那么容易。我可以告诉你。:)

# java - 上下文菜单不出现

> ID：10087193
> 
> 赞同：1
> 
> 时间：2012-04-10T10:40:10.327
> 
> 标签：java, android

看看下面的代码......为什么我的上下文菜单没有被创建？？？这可能是什么原因......？

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);

    MenuInflater inflator = getMenuInflater();

    inflator.inflate(R.menu.contextmenudisplayer, menu);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    switch(item.getItemId())
    {
    case R.id.delete:
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

          String s = (String) ((Cursor) getListView().getItemAtPosition(info.position))
                    .getString(2);
          Log.v("ID is", s);

    default:

    return super.onContextItemSelected(item);
    }
} 
```

这是上下文菜单显示器中 xml 文件的代码 `contextmenudisplayer.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/delete"
        android:title="Delete Message">
    </item>
    <item
        android:id="@+id/forward"
        android:title="Forward">
    </item>

</menu> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:44:21.030

您需要使用此方法注册菜单：http: [//developer.android.com/reference/android/app/Activity.html#registerForContextMenu](http://developer.android.com/reference/android/app/Activity.html#registerForContextMenu(android.view.View) (android.view.View )

阅读此页面，它解释了一切：http: [//developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

# python - Django 管理错误

> ID：10087201
> 
> 赞同：1
> 
> 时间：2012-04-10T10:41:00.133
> 
> 标签：python, django, django-admin

在修改[django-userena](http://django-userena.org/) `settings.py`时遇到此错误

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/admin/

Django Version: 1.3.1
Python Version: 2.7.2
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.admin',
 'easy_thumbnails',
 'guardian',
 'south',
 'userena',
 'userena.contrib.umessages',
 'demo_project.profiles']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'userena.middleware.UserenaLocaleMiddleware')

Traceback:
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/contrib/admin/sites.py" in wrapper
  214\.                 return self.admin_view(view, cacheable)(*args, **kwargs)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  93\.                     response = view_func(request, *args, **kwargs)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  79\.         response = view_func(request, *args, **kwargs)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/contrib/admin/sites.py" in inner
  196\.                 return self.login(request)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  79\.         response = view_func(request, *args, **kwargs)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/contrib/admin/sites.py" in login
  331\.         return login(request, **defaults)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  93\.                     response = view_func(request, *args, **kwargs)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  79\.         response = view_func(request, *args, **kwargs)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/contrib/auth/views.py" in login
  59\.     current_site = get_current_site(request)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/contrib/sites/models.py" in get_current_site
  92\.         current_site = Site.objects.get_current()
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/contrib/sites/models.py" in get_current
  25\.             current_site = self.get(pk=sid)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/db/models/manager.py" in get
  132\.         return self.get_query_set().get(*args, **kwargs)
File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/db/models/query.py" in get
  349\.                     % self.model._meta.object_name)

Exception Type: DoesNotExist at /admin/
Exception Value: Site matching query does not exist. 
```

你知道是什么导致了这个错误吗？

**编辑**

按照**哈克哈姆斯顿的**指示`Site.objects.get(pk=settings.SITE_ID)`返回了这个错误

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/db/models/manager.py", line 132, in get
    return self.get_query_set().get(*args, **kwargs)
  File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/db/models/query.py", line 349, in get
    % self.model._meta.object_name)
DoesNotExist: Site matching query does not exist.
>>> Site.objects.get(pk=settings.SITE_ID)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/db/models/manager.py", line 132, in get
    return self.get_query_set().get(*args, **kwargs)
  File "/home/elie/.django-projects/userena-demo/local/lib/python2.7/site-packages/django/db/models/query.py", line 349, in get
    % self.model._meta.object_name)
DoesNotExist: Site matching query does not exist. 
```

在我的数据库中有一个`site_id http://127.0.0.1:8000/' which is the domain name that i used instead of`example.com`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:29:17.743

您`SITE_ID`的设置值可能与对象的主键不对应`Site`。您可以通过运行以下命令进行验证：

```
$ ./manage.py shell
Python 2.7.1 [...]
>>> from django.contrib.sites.models import Site
>>> from django.conf import settings
>>> Site.objects.get(pk=settings.SITE_ID)
<Site: example.com> 
```

如果最终命令的响应不是`Site`对象（它可能会引发`Site.DoesNotExist`异常），那么这就是问题所在。您可以通过不设置来解决它，`SITE_ID`如果您不使用[django.contrib.sites](https://docs.djangoproject.com/en/dev/ref/contrib/sites/) ，这是不必要的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T11:30:15.663

我知道这听起来可能很奇怪，但我曾经看到过这样的错误。尝试删除 django.contrib.sites。它与该人安装的另一个应用程序发生冲突。

# paypal - 从结帐页面中删除贝宝快速结帐单选按钮

> ID：10087205
> 
> 赞同：0
> 
> 时间：2012-04-10T10:41:03.650
> 
> 标签：paypal, magento-1.4, magento-1.5, magento

我的购物车页面和结帐页面中有 paypal 快速结帐按钮。我只想从一页结帐的付款信息步骤中删除贝宝快速结帐单选按钮。

我尝试从位于的 xml 文件中删除以下代码

应用程序/设计/前端/默认/默认/布局/paypal.xml

```
<checkout_cart_index>
    <reference name=\"checkout.cart.top_methods\">
        <block type=\"paypal/express_shortcut\" name=\"checkout.cart.methods.paypal_express\" template=\"paypal/express/shortcut.phtml\"/>
    </reference>

    <reference name=\"checkout.cart.methods\">
        <block type=\"paypal/express_shortcut\" name=\"checkout.cart.methods.paypal_express\" template=\"paypal/express/shortcut.phtml\"/>
    </reference>
</checkout_cart_index> 
```

但它不起作用。知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:23:48.323

您正在编辑 checkout_cart_index - 这意味着您正在从购物车中删除按钮。您可以使用 css 和一些修改 template/checkout/onepage/payment/methods.phtml 来做到这一点：更改

```
<dt> 
```

至

```
<dt class="<?php echo $_code; ?>"> 
```

例如和

```
<dd> 
```

至

```
<dd class="<?php echo $_code; ?>"> 
```

现在你把它添加到你的样式表中：

```
.sp-methods .paypal_express { display:none; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:40:00.767

您能否刷新magento缓存并再次检查。

# asp.net - Web.config Forms Auth > 保护根目录但允许访问子目录

> ID：10087216
> 
> 赞同：0
> 
> 时间：2012-04-10T10:41:49.763
> 
> 标签：asp.net, iis, iis-7, web-config, forms-authentication

这是我的问题...

我有一个以 II7 集成管道模式运行的网站，我想在整个网站上启用表单身份验证，除了包含登录表单的“/secure/”目录。

我的网络配置目前看起来像这样......

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.web>
        <customErrors mode="Off"/>
        <authentication mode="Forms">
            <forms name=".ASPXAUTH" loginUrl="secure/login.aspx" protection="All" path="/" timeout="999999" slidingExpiration="true" enableCrossAppRedirects="true">
                <credentials passwordFormat="Clear">
                    <user name="user1" password="xxxxxx"/>
                </credentials>
            </forms>
        </authentication>
        <authorization>
            <allow users="user1"/>
            <deny users="*"/>
        </authorization>    
    </system.web>
    <location path="secure">
        <system.web>
            <authorization>
                <allow users="*"/>
            </authorization>
        </system.web>
    </location>
    <system.webServer>
        <!--Enabling Forms Authentication for the Entire Application-->
        <modules> 
            <remove name="FormsAuthenticationModule" />    
            <add name="FormsAuthenticationModule" type="System.Web.Security.FormsAuthenticationModule" />    
            <remove name="UrlAuthorization" />    
            <add name="UrlAuthorization" type="System.Web.Security.UrlAuthorizationModule" />    
            <remove name="DefaultAuthentication" />    
            <add name="DefaultAuthentication" type="System.Web.Security.DefaultAuthenticationModule" />    
        </modules>
    </system.webServer>
</configuration> 
```

当我访问网站 URL 时，我只会得到一个无休止的重定向循环。我尝试将特定位置的身份验证规则放在 system.web 部分之上，但这没有效果。

有任何想法吗？

干杯，

罗宾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:46:53.877

访问权限是分层的。也就是说，如果您被禁止访问某个父级，则无论为子级设置什么权限，您都被禁止访问其所有子级。您可以将登录表单移动到根目录并设置表单的权限 - 它会起作用。

# file - 文件格式需要倒排索引

> ID：10087218
> 
> 赞同：0
> 
> 时间：2012-04-10T10:41:57.287
> 
> 标签：file, indexing, format, inverted-index

我一直在研究反向索引，它索引文档集合，将每个术语与信息一起存储，并将其引用存储在发布文件中（文档 ID、位置等）。

目前我将它存储为 .txt 文件格式，需要为与该 .txt 文件相关的每个查询进行字符串匹配，这需要更多时间并且更复杂。

现在我想将该信息存储在像链表样式数据结构这样的文件中。对于这种情况，这是否可能......（而且我正在使用 PHP 语言进行索引）。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:22:30.697

倒排索引的要点是允许对任何给定术语的出现列表（发布列表）进行极快的访问。如果您想使用简单、现成的数据结构来实现它，那么您可能做的最好的事情就是

*   使用哈希存储从术语到发布列表的映射
*   将每个发布列表存储为一个连续的排序整数块（例如`ArrayList`，在 Java 或`std::vector`C++ 中）。不要使用链表，因为这会浪费大量空间用于指针

一个更合适（和更复杂）的实现将考虑到：

*   帖子列表可能会变得*非常*大，因此您必须将其分成多个块，每个块都存储为一个连续的块
*   帖子列表可以而且应该被压缩

这些技术的详细描述可在经典书籍[管理千兆字节](http://www.librarything.com/work/84105/covers/)中找到。

# java - 需要帮助将 ArrayList 输入到我的 WordSearchPuzzle 程序中

> ID：10087221
> 
> 赞同：-1
> 
> 时间：2012-04-10T10:42:10.890
> 
> 标签：java, arraylist, multidimensional-array

嗨，我是 Java 新手，在创建我的单词搜索拼图程序时遇到了困难。我正在尝试让用户输入单词的 ArrayList，以便可以将其输入到我的难题中，但是当我输入字符串数组时，我一直收到错误，有人可以帮忙吗？

```
 import java.io.* ;
import java.util.ArrayList ;
public class WordSearchPuzzle
{
    private char[][] puzzle ;
    private ArrayList<String> puzzleWords ;
    private int letterCount = 0 ;
    private int gridDimensions;

    public WordSearchPuzzle(ArrayList<String> userSpecifiedWords)
    {
        this.puzzleWords = userSpecifiedWords ;

    }

    private void createPuzzleGrid()
    {
        int i;
        for(i = 0; i < puzzleWords.size() ; i++){
            letterCount = puzzleWords.size() + letterCount ;
        }
        gridDimensions = letterCount * 2;
        puzzle = new char[gridDimensions][gridDimensions] ;
    }

    private void generateWordSearchPuzzle()
    {

    }

    public void fillPuzzle()
    {
        int i, j, r;
        for (i = 0; i < this.gridDimensions; i++)
            for (j = 0; j < this.gridDimensions; j++)
                if (puzzle[i][j] == ' ') {
                    r = (int) (Math.random() * letterCount);
                    puzzle[i][j] = letterCount.charAt(r);
        }
    }

    public void fill() 
    {
        int i, j, gridDimensions, r, c;
        boolean added;
        this.clear();
        for (i = 0; i < WordSearch.words.size(); i++) {
            ws = (WSWord) WordSearch.words.elementAt(i);
            row = (int) (Math.random() * this.rows);
            col = (int) (Math.random() * this.cols);
            added = false;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:46:44.137

If you're referring to puzzle as your array of Strings, it isn't, it's a two-dimensional array of char. Perhaps you need

```
private String puzzle[]; 
```

Unfortunately it's not very clear from the given code example what exactly are you having an issue with.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:47:43.557

You can't just use the = to copy arraylist and its contents: From a similar question: [clone(): ArrayList.clone() I thought does a shallow copy](https://stackoverflow.com/questions/4592478/clone-arraylist-clone-i-thought-does-a-shallow-copy)

Adapted to your case:

```
this.puzzleWords = new ArrayList(userSpecifiedWords) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:47:45.883

Initialize puzzleWords.

```
private ArrayList<String> puzzleWords = new ArrayList<String> (); 
```

# c - Lua 5.2 LUA_GLOBALSINDEX 替代方案

> ID：10087226
> 
> 赞同：18
> 
> 时间：2012-04-10T10:42:46.740
> 
> 标签：c, lua

我有一个嵌入 Lua 并实现一种惰性函数查找形式的程序。

它在 Lua 5.1 中的工作方式，每当一个符号未定义时，解释器将调用一个全局函数钩子，然后解析该符号。

这是实现这个惰性函数查找的一小部分 C 代码：

```
int function_hook(lua_State *pLuaState)
{
  // do the function lookup here
  ....
  return 1;
}

......

//-- create table containing the hook details
lua_newtable(pLuaState);
lua_pushstring(pLuaState, "__index");
lua_pushcfunction(pLuaState, function_hook);
lua_settable(pLuaState, -3);

//-- set global index callback hook
lua_setmetatable(pLuaState, LUA_GLOBALSINDEX); 
```

我现在正试图将此代码移至 Lua 5.2 并遇到问题。

在 Lua 5.2 中，不再定义 LUA_GLOBALSINDEX 值，因此这行代码不再编译。

```
//-- set global call back hook
lua_setmetatable(pLuaState, LUA_GLOBALSINDEX); 
```

有一个对 LUA_GLOBALSINDEX 更改的[引用，但不幸的是它没有帮助。](http://www.lua.org/manual/5.2/)

重写这一行代码以让解释器在找到未解析的符号时调用 function_hook 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-10T11:38:04.510

[全局环境](http://www.lua.org/manual/5.2/manual.html#2.2)现在存储在[注册表](http://www.lua.org/manual/5.2/manual.html#4.5)中的一个特殊索引处。尝试：

```
//-- get global environment table from registry
lua_rawgeti(pLuaState, LUA_REGISTRYINDEX, LUA_RIDX_GLOBALS);

//-- create table containing the hook details
lua_newtable(pLuaState);
lua_pushstring(pLuaState, "__index");
lua_pushcfunction(pLuaState, function_hook);
lua_settable(pLuaState, -3);

//-- set global index callback hook
lua_setmetatable(pLuaState, -2);

//-- remove the global environment table from the stack
lua_pop(pLuaState, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-04T16:46:51.490

这是补丁： http: [//lua-users.org/lists/lua-l/2013-01/msg00352.html](http://lua-users.org/lists/lua-l/2013-01/msg00352.html)

```
lua_pushvalue(L,LUA_GLOBALSINDEX);
=>
lua_pushglobaltable(L);

len = luaL_getn(L, -1);
=>
len = lua_rawlen(L, -1);

lua_getfenv(L, lo);
=>
lua_getuservalue(L, lo);

lua_setfenv(L, lo);
=>
lua_setuservalue(L, lo); 
```

# javascript - 同源策略能否被违反虚拟网络测试

> ID：10087227
> 
> 赞同：1
> 
> 时间：2012-04-10T10:42:50.343
> 
> 标签：javascript, security, virtual, same-origin-policy

我正在研究工作项目的同源政策

看来同源政策是很强的政策，不能破？

我已经测试了 iframes、CSS history url hack 作为可能的方法来破坏它。

我想知道是否有任何关于我可以执行的可能测试的想法，无论它们是否适用于测试相同的原产地政策。是否有关于如何在虚拟 netkit 环境中进行 DNS 重新绑定的简单教程？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:52:03.947

首先，您应该了解同源策略 (SOP) 的含义，[浏览器安全手册](http://code.google.com/p/browsersec/wiki/Part2)是一个很好的资源。

话虽如此，网站有很多方法可以撤销 SOP 给予他们的保护。XSS 就是一个很好的例子，因为它可以用来访问另一个域上的数据，一个很好的例子就是[samy worm](http://namb.la/popular/tech.html)。

SOP 无法阻止跨站点请求伪造攻击。这个想法是您可以发送请求，但您无法读取响应。在这种攻击中，请求会引起副作用，例如更改用户密码。

Clickjacking 是另一个缺陷示例，其中事件（鼠标移动事件、单击事件、击键事件）被传递到另一个域并可能导致问题。

然后人们故意绕过 SOP，CORS 和 JSONP 就是一个很好的例子。还有flash的crossdomain.xml文件。

最后但并非最不重要的一点是， **[SOP 绕过漏洞在浏览器中非常普遍。](http://osvdb.org/search/search?search%5Bvuln_title%5D=same%20origin%20policy%20bypass&search%5Btext_type%5D=titles&search%5Bs_date%5D=&search%5Be_date%5D=&search%5Brefid%5D=&search%5Breferencetypes%5D=&search%5Bvendors%5D=&search%5Bcvss_score_from%5D=&search%5Bcvss_score_to%5D=&search%5Bcvss_av%5D=%2a&search%5Bcvss_ac%5D=%2a&search%5Bcvss_a%5D=%2a&search%5Bcvss_ci%5D=%2a&search%5Bcvss_ii%5D=%2a&search%5Bcvss_ai%5D=%2a&kthx=search)**.

# mysql - 具有给定开始日期和结束日期的 MySQL 每周报告

> ID：10087228
> 
> 赞同：0
> 
> 时间：2012-04-10T10:42:53.217
> 
> 标签：mysql, group-by

我有一个存储以下数据的表：

```
recordDate  itemID  price
2012-03-30  2       15.1
2012-03-30  13      15.1
2012-04-06  2       15.2
2012-04-06  13      15.3
2012-04-15  2       16.2
2012-04-16  13      16.3
2012-04-26  2       14.9
2012-04-26  13      15.0
... 
```

我想要一份从周五开始到下周四结束的每周报告。并且所选数据仅记录在给定日期。

例如：`startDate = "2012-04-01", endDate = "2012-04-30"`

我的预期结果是这样的：

```
weekStart   weekEnd     itemID   price
2012-04-06  2012-04-12  2        15.2
2012-04-06  2012-04-12  13       15.3
2012-04-13  2012-04-19  2        16.2
2012-04-13  2012-04-19  13       16.3
2012-04-20  2012-04-27  2        14.9
2012-04-20  2012-04-27  13       15.0
... 
```

我怎样才能得到这个结果？我不熟悉 SQL，所以我不知道如何编写语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:07:19.370

```
SELECT 
  DAYNAME('2012-04-06') AS `start_week`,
  DAYNAME('2012-04-12') AS `End_week`,
  item_id,
  price 
FROM
  store 
WHERE record_date BETWEEN '2012-04-06' 
  AND '2012-04-12' ; 
```

尝试这个 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:39:45.477

```
SELECT * from store where DAYNAME(recordDate) in ('Friday','Saturday','Sunday','Monday','Tuesday') and 
start_date = '2012-01-01' and end_date = '2012-04-10' 
```

# android - Android 应用程序在更改视图期间崩溃

> ID：10087229
> 
> 赞同：0
> 
> 时间：2012-04-10T10:42:56.933
> 
> 标签：android, crash, titanium-mobile

我正在用钛创建一个 android 应用程序。当我从应用程序的第 3 个屏幕导航到第 4 个屏幕时，会出现一条警报，指出应用程序已通过强制关闭按钮意外关闭。

我更改了屏幕的顺序，但这并没有解决我的问题。

请在这方面帮助我 - 我是android开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:46:07.643

Have you added the activity to the manifest file?

# macos - 如何取回 Spotlight For Help 菜单项

> ID：10087231
> 
> 赞同：1
> 
> 时间：2012-04-10T10:43:08.557
> 
> 标签：macos, cocoa, menu, menuitem, spotlight

我有一个需要身份验证的应用程序。在用户进行身份验证之前，菜单栏中仅存在一部分菜单项。用户成功通过身份验证后，我将应用程序的主菜单替换为`[NSApp setMainMenu:aMainMenu];`不幸的是，这会删除 Spotlight For Help 菜单项，该菜单项允许用户在帮助手册中搜索菜单项。菜单项在我替换主菜单之前存在。

如何在不替换特定菜单项而不是整个主菜单的情况下恢复 Spotlight For Help 菜单项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:52:20.030

重置主菜单时，请不要内置新的帮助菜单。保持该部分分开......

...因为在重置主菜单后，您*还*需要通过重置帮助菜单[`[NSApp setHelpMenu:];`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/setHelpMenu%3a)（我已经为您链接了 Apple 的文档）。这就是重新安装 Spotlight for Help 的原因。

# sql - SQL - 使用子选择

> ID：10087232
> 
> 赞同：0
> 
> 时间：2012-04-10T10:43:09.457
> 
> 标签：sql

我有一个包含 3 行的表：AccountNum、InvoiceAcc 和 Blocked。我的表的大多数行都有 InvoiceAcc 但不是全部。AccountNum 是唯一标识符，多个 AccountNum 可能具有相同的 InvoiceAcc。Blocked 是一个从 0、1 和 2 变化的 int 值。

InvoiceAcc 是基于 AccountNum 的，因此可以将其视为一个父办公室，然后有一个正在进行的子办公室。

例如，像这样的父办公室：

`AccountNum - 1, InvoiceAcc - null, Blocked - 2`可能有一个像这样的子办公室：

```
AccountNum - 1-1, InvoiceAcc - 1, Blocked - 0

AccountNum - 1-2, InvoiceAcc - 1, Blocked - 1 
```

我想做的是检查一行的 InvoiceAcc 及其后续 AccountNum 阻止值。所以在我上面的例子中，如果我做了这样的查询：

```
SELECT BLOCKED FROM CustTable WHERE AccountNum = '1-1' 
```

它将返回 0，因为这是被阻止的值。我想做的是返回 2 ，因为它具有更高的价值和它的父帐户。此外，如果父 acc 的阻止值为 1，而我正在查询的子帐户的阻止值为 2，那么它应该返回 2。我假设这里需要一个子选择？

如果它有父账户，它应该根据自己或其父账户返回最高的阻止值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:05:39.233

您可以添加这样的查询，因为您只有一个级别（例如父级 -> 子级）

```
SELECT CASE 
  WHEN child.blocked > COALESCE(parent.blocked,0)
  THEN child.blocked 
  ELSE parent.blocked 
END as blocked
FROM CustTable child 
LEFT JOIN CustTable parent ON child.InvoiceAcc = parent.AccountNum
WHERE child.AccountNum = '1-1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:57:25.183

这有点乱。是“1-？” 这把你搞砸了。

ParentAccount = 1，SubAccount = 2，将解决该问题

然后你可以通过 ParentAccount 选择类似的东西

```
Select parent.Blocked From SomeTable parent
inner join SomeTable Children On Parent.ParentAccount = Child.ParentAccount 
```

保持你当前的结构，你将不得不想出一堆字符串函数来从“AC”中提取 A

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:22:23.163

用这个 ：

```
select AccountNum ,(select count(*) from CustTable  where AccountNum like t.AccountNum +'-%') as Totalsubacc from CustTable t where AccountNum not like '%-%' 
```

# c++ - C++ 索引 TCHAR 字符串

> ID：10087233
> 
> 赞同：1
> 
> 时间：2012-04-10T10:43:10.517
> 
> 标签：c++, tchar

我正在对一些旧的 C++ 代码做一些静态分析工作，而我的 C++ 不是最强的。我有这段代码：

```
void NIDP_clDPLogger::log(TCHAR *logString)
{
    TCHAR temp_logString[1024] = {0};
    _tcsncpy(temp_logString,logString,1024);
    temp_logString[1023] = NULL;
            ... 
```

静态分析工具在这里抱怨在 1024 处索引**logString**（传递给函数的参数），而它可能更短（大小不同，我猜 1024 是最大大小）。所以我想我的解决方法是检查**logString**的大小并使用它，如下所示：

```
void NIDP_clDPLogger::log(TCHAR *logString)
{

    size_t tempSize = sizeof(logString);
    TCHAR temp_logString[tempSize] = {0};
    _tcsncpy(temp_logString,logString,tempSize);
    temp_logString[tempSize-1] = NULL; 
```

我只是想知道，这行得通吗？任何人都可以看到任何缺陷/问题吗？构建和测试这个项目有点困难，所以在我完成所有这些之前，我基本上只是在寻找一个健全性检查。或者我有更好的方法吗？我可以将 size_t 值传递给 _tcsncpy，因为之前有硬编码的 int 吗？

感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:45:49.327

`sizeof(logString)``TCHAR*`当作为参数传递时，将返回 a 的大小，而不是作为数组衰减到指针的数组的大小。

如果保证它`logString`是空终止的，您可以使用`_tcslen()`. 否则，知道大小的唯一方法`logString`是将其作为另一个参数传递给函数。

# java - JMS 临时队列丢弃第一条消息

> ID：10087235
> 
> 赞同：2
> 
> 时间：2012-04-10T10:43:19.943
> 
> 标签：java, jms, weblogic

我通过命名的 JMS 队列向 Weblogic 10.3 服务器发送 JMS 请求，并通过临时队列接收回复。

客户端（准系统）：

```
//init
Destination replyQueue = session.createTemporaryQueue();
replyConsumer = session.createConsumer(replyQueue);
...
//loop
TextMessage requestMessage = session.createTextMessage();
requestMessage.setText("Some request")
requestMessage.setJMSReplyTo(replyQueue);
requestProducer.send(requestMessage);
Message msg = replyConsumer.receive(5000);
if (msg instanceof TextMessage) {
    ...
} else { ... }
//loop end 
```

服务器 MDB（消息驱动 bean）：

```
public void onMessage(Message msg) {
    if (msg instanceof TextMessage) {
        ...
        TextMessage replyMessage = jmsSession.createTextMessage();
        replyMessage.setText("Some response");
        replyMessage.setJMSCorrelationID(msg.getJMSCorrelationID());
        replyProducer.send(replyMessage);
    }
} 
```

问题是第一个服务器回复经常丢失！也就是说，`replyConsumer.receive(5000)`每第 4 到第 5 个回复消费者以超时结束。当消费者收到第一个答案时，它会继续接收所有其余的，因此问题仅在于创建临时队列后通过临时队列发送的第一条消息。

**我的问题：**我是否必须为临时队列设置一些特殊的东西才能让它在创建后从一开始就工作？还是有其他提示？

更多信息：

*   在对我的本地开发机器进行测试时，临时队列可以正常工作。仅当针对我们的集群 Weblogic 服务器进行测试时，消息才会丢失。但是，我已经关闭了所有集群成员，但只有一个实例。
*   我已经验证服务器*成功*回复了客户端发送的所有请求（通过计算发送的请求和发送的回复）。服务器以毫秒为单位进行回复，即使是丢失的回复也是如此。
*   当我用常规命名队列替换临时队列时，问题就消失了！所以问题似乎（对我来说）不在我的代码中。
*   我还尝试修改回复消息的过期、持久性、延迟等，但没有成功。这样我排除了响应在客户端开始读取队列之前到达的情况，然后消息立即过期而不给客户端处理它的机会。
*   **编辑：**`replyConsumer.receive(5000)`我也尝试使用异步而不是同步`replyConsumer.setMessageListener(this)`。行为没有改变，临时队列的第一条消息仍然丢失。

**编辑：**我正在使用的 Weblogic 服务器（或集群）似乎有问题。因为当我将服务器应用程序部署到我们拥有的另一个 Weblogic 集群时，一切都开始正常工作了！两个集群的配置应该相同——那么区别在哪里呢？Weblogic 没有错误信号让我感到害怕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:19:11.747

您的问题似乎是有时服务器正在接收发布并在您的消费者开始接收之前将其丢弃。

解决方法是使用异步接收 (replyConsumer.setMessageListener) 调用而不是您当前拥有的阻塞调用 (replyConsumer.receive(5000))，并将调用与您的其余使用者代码一起添加到代码中。

这样，您在发出请求之前就已经在收听回复了。

希望有帮助。

编辑：刚刚读到您正在使用临时队列，所以我的第一句话不正确。但是，作为实验，请尝试我的其余回复，看看它是否会改变您所看到的行为

# c# - .Net 4 中的多线程 C# 队列

> ID：10087248
> 
> 赞同：1
> 
> 时间：2012-04-10T10:44:02.503
> 
> 标签：c#, .net, multithreading

我正在为网页开发一个简单的爬虫。我搜索了很多实现多线程爬虫的解决方案。创建线程安全队列以包含唯一 URL 的最佳方法是什么？

编辑：.Net 4.5 中有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:45:52.407

使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)并使用使用 ThreadPool 的默认调度程序。

* * *

好的，这是一次将 30 个 URL 排队的**最小**实现：

```
 public static void WebCrawl(Func<string> getNextUrlToCrawl, // returns a URL or null if no more URLs 
        Action<string> crawlUrl, // action to crawl the URL 
        int pauseInMilli // if all threads engaged, waits for n milliseconds
        )
    {
        const int maxQueueLength = 50;
        string currentUrl = null;
        int queueLength = 0;

        while ((currentUrl = getNextUrlToCrawl()) != null)
        {
            string temp = currentUrl;
            if (queueLength < maxQueueLength)
            {
                Task.Factory.StartNew(() =>
                    {
                        Interlocked.Increment(ref queueLength);
                        crawlUrl(temp);
                    }
                    ).ContinueWith((t) => 
                    {
                        if(t.IsFaulted)
                            Console.WriteLine(t.Exception.ToString());
                        else
                            Console.WriteLine("Successfully done!");
                        Interlocked.Decrement(ref queueLength);
                    }
                    );
            }
            else
            {
                Thread.Sleep(pauseInMilli);
            }
        }
    } 
```

假人用法：

```
 static void Main(string[] args)
    {
        Random r = new Random();
        int i = 0;
        WebCrawl(() => (i = r.Next()) % 100 == 0 ? null : ("Some URL: " + i.ToString()),
            (url) => Console.WriteLine(url),
            500);

        Console.Read();

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:21:53.250

[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)确实是框架的线程安全队列实现。但是由于您可能会在[生产者-消费者](http://en.wikipedia.org/wiki/Producer-consumer_problem)场景中使用它，因此您真正追求的类可能是无限有用的[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:51:41.237

`System.Collections.Concurrent.ConcurrentQueue<T>`符合要求吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T10:52:21.130

我会使用 System.Collections.Concurrent.ConcurrentQueue。

您可以安全地从多个线程排队和出队。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T11:13:50.893

查看 System.Collections.Concurrent.ConcurrentQueue。如果需要等待，可以使用 System.Collections.Concurrent.BlockingCollection

# java - 在谷歌应用引擎（java）上解析 JSON

> ID：10087256
> 
> 赞同：10
> 
> 时间：2012-04-10T10:44:26.340
> 
> 标签：java, json, google-app-engine

我使用**org.json**库在我的应用程序中处理 JSON 数据。但似乎谷歌应用引擎不允许使用它，在 GAE 应用程序上使用 JSON 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T11:08:12.440

一周前我有类似的问题，在比较了一些 Java JSON 库（包括 JSonLIB 和 GSON）之后，我选择了[Jackson](http://wiki.fasterxml.com/JacksonHome)。查看 StackOverflow 上的其他比较，其中大多数会推荐 Jackson。

在 Google Appengine 上使用了两周后，我非常喜欢它。它不仅比其他提到的库具有更多的功能，而且速度也快得多（请参阅[此处](https://github.com/eishay/jvm-serializers/wiki/)的基准测试）。它是[Jersey](http://jersey.java.net/)的 Json 引擎，如果你想在 Appengine 上做任何 Restful 的事情，我也会推荐它。

它是稳定的并且仍在积极开发中，版本 2 刚刚在几周前发布。

更新：[这](http://blog.iparissa.com/googles-app-engine-java/google-app-engine-jax-rs-jersey/)是一个将 Jackson 与 GAE 结合使用的示例演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:48:48.510

试试格森

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:48:40.403

我希望[这](http://nadacode.com/2010/06/30/using-json-in-your-google-app-engine-java-app/)会有所帮助

你也可以在[这里使用 google-json api](http://code.google.com/p/google-gson/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-30T01:07:18.517

使用快速 JSON 是一个非常高效的 API。杰克逊拿了太多的代码。

[http://code.alibabatech.com/wiki/display/FastJSON/Home](http://code.alibabatech.com/wiki/display/FastJSON/Home)

[https://github.com/alibaba/fastjson](https://github.com/alibaba/fastjson)

只需将库复制到 WEB-INF/lib 文件夹并使用`com.alibaba.fastjson.JSON`类似的静态方法`JSON.toJSONString(object)`

# jquery - 属性未通过函数设置

> ID：10087257
> 
> 赞同：1
> 
> 时间：2012-04-10T10:44:31.797
> 
> 标签：jquery

我有以下函数，我正在设置具有 sortBy id 的 select 标记的属性，但它不能从这个函数工作我在设置属性后在这个函数中给出了警报，但它给出了 null 值。

请帮我。

```
function getXmlByPrice(mi,mx)
{

    if(mi!="" && mx!="")
    {
        $("#min").text(mi);
        $("#max").text(mx);

        $("#sortBy").attr('onchange','getDataFromXmlByStar();');
        alert($("#sortBy").attr('onchange'));

        getDataFromXmlByStar();

    }
    else
    {
        getXml();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:47:37.803

```
$("#sortBy").attr('onchange','getDataFromXmlByStar();'); 
```

而不是这个

```
$("#sortBy").change(function(){
    getDataFromXmlByStar();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:48:04.013

要在元素上设置事件处理程序，您不能只设置`onchange`属性，您需要分配一个事件处理程序。试试这个：

```
$("#sortBy").change(getDataFromXmlByStar); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:48:13.357

如果您尝试添加`onchange`处理程序，而不是

```
$("#sortBy").attr('onchange','getDataFromXmlByStar();'); 
```

做这个：

```
$("#sortBy").on('change',function{
    getDataFromXmlByStar()
}); 
```

# list - 在 prolog 脚本中定义列表

> ID：10087265
> 
> 赞同：10
> 
> 时间：2012-04-10T10:45:09.493
> 
> 标签：list, variables, prolog

我是 prolog 编程的新手，并且在教程中被告知要定义结构列表（在脚本中），以便我可以将其作为数据库进行查询。但是我发现不可能将此列表定义为脚本中的变量。当我定义一个列表时，例如

```
X=[a,b,c]. 
```

我只是收到一个错误说

```
No permission to modify static_procedure `(=)/2' 
```

prolog 不支持定义这样的变量吗？我在 linux 下使用 SWI-Prolog。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-10T11:26:49.660

在 Prolog 中，我们谈到*逻辑*变量，表示*文字*之间的*同一性*。

 *也就是说，一个程序是一组规则，它们共同说明我们的文字的真实情况，并且文字是未*解释*的。*我们使用变量*编写规则来描述个人之间的*关系*，并且在尝试证明我们的查询是否可以成为真的时，Prolog将变量*绑定*为规则所指示的。

一个*列表它只是一个术语（**头部*）和（注意这里的递归）一个*列表*之间的二元关系的语法糖。通常，当我们谈到*数据库*时，我们使用绑定原子文字的事实（没有主体的规则，始终为真）。

因此，该教程可能用与您报告的不同的词语来表达任务，或者它有些误导。无论如何，您都可以将列表存储在数据库中，如下所示：

```
mylist([a,b,c]). 
```

并编写您的程序，例如：

```
myprog(X) :- mylist(L), member(X, L). 
```

然后你可以像这样查询你的程序：

```
?- myprog(X). 
```

和 Prolog，试图证明 myprog/1，试图证明 mylist/1*和*member/2...为了证明 mylist(L)，*变量*L 被绑定到 [a,b,c]。

高温高压

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-10T10:55:39.583

当你写

```
X = [a, b, c]. 
```

它被读作

```
=(X, [a, b, c]). 
```

它被解读为关于`=/2`谓词的事实的定义。任何自由变量都等于 的事实`[a, b, c]`。也就是说，你重新定义`=/2`. 这显然不是你想要的！

你必须记住，在 Prolog 中，变量只在局部范围内，在谓词内。可行的是：

```
main :-
    X = [a, b, c],
    % do stuff with X. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-30T21:15:02.400

我在linux下使用swipl，在prolog中定义一个列表。

```
mylist([element1,element2,elementn]). 
```

然后你可以查询你的程序：

```
?- mylist(A). 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T10:54:18.753

不，你不能这样做。你基本上在写什么：

```
=(X,[a,b,x]). 
```

正如错误所说，您无法重新定义 =/2

你可以做的是：

```
x([a,b,c]). 
```

当你想使用 X 时：

```
...
x(X),
foo(X)
... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-28T18:23:09.263

**如果 Y = [a,b,c]，在函数 makeList(Y,F) 函数调用之后，F = [a,b,c]**

```
makeList(Y,F) :-
append(Y,[],X),
F = X. 
```

例如）

```
?- makeList([a,b,c],X).
X = [a,b,c]. 
```*

# java - 代码库属性出现在 tag We have a piece of code that calls an applet and the applet tag is configured with the 'code' and 'archive' attributes, something like this: < 问问题 问问题 2012-04-10T10:45:16.670 285 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. We have a piece of code that calls an applet and the applet tag is configured with the 'code' and 'archive' attributes, something like this: In some of the environments the applet however doesn't load properly. We run traces and found that the 'Codebase' attribute appeared in the applet tag with the session cookie value in these environments. We don't understand what and why is inserting the codebase attribute into the applet tag. Could someone shed some light on this? We run a lot of network monitoring but no third party components inserts this in the call. If you have a lot of options to show then using <select>is not the best option. Better check http://ivaynberg.github.com/select2/ or http://livedocs.dojotoolkit.org/dijit/form/FilteringSelect or any other JS based component which can load options on demand via Ajax. javahtmlapplet 4 0 回答 0 Related 3 c# - 使用抽象覆盖并调用基类 1 uiview - iOS 7 - 透明的 UIView 阻塞手势识别器 2 eclipse - Appcelerator Studio 与 Titanium Studio 1 ruby-on-rails - 用 Ruby 构建 SQL 0 html - 如何在 div 中弹出表单并携带 id 4 macos - 如何在 Mac 上的 NetBeans Cordova 项目的 PATH 上设置 cordova？ 0 cassandra - 如何让 Cassandra 快速 2 ruby - 有没有办法通过实例方法知道类名？红宝石 1 android - 构建文件：build.xml 不存在！- 带有 ant + cronjob 的 Android 应用 1 freemarker - 如何从 FTL 读取 XML 节点并遍历它们 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 ID：10087270 赞同：0 时间： 标签：java, html, applet We have a piece of code that calls an applet and the applet tag is configured with the 'code' and 'archive' attributes, something like this: <applet code='some.class' Archive='absolute path'/> In some of the environments the applet however doesn't load properly. We run traces and found that the 'Codebase' attribute appeared in the applet tag with the session cookie value in these environments. We don't understand what and why is inserting the codebase attribute into the applet tag. Could someone shed some light on this? We run a lot of network monitoring but no third party components inserts this in the call.</select>

# c# - 无法保存负十进制值

> ID：10087272
> 
> 赞同：0
> 
> 时间：2012-04-10T10:45:39.550
> 
> 标签：c#, entity-framework-4.1, ef-code-first, sql-server-2008-r2

我首先使用实体​​框架代码。尝试将负十进制值保存到 SQL Server 数据库时发生错误。下面列出了我要保存的模型。

```
public class Material
{
        public Material()
        {
            Categories = new List<Category>();
        }

        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public Guid Id { get; set; }
        [Required]
        public string Name { get; set; }
        public string Description { get; set; }
        [Required]
        public DateTime Taken { get; set; }
        public decimal? Latitude { get; set; }
        public decimal? Longitude { get; set; }
        public virtual ICollection<Category> Categories { get; set; }
    } 
```

在这里，我试图在模型材料中设置小数点（纬度/经度）的精度。

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
 {
        modelBuilder.Entity<Material>().Property(x => x.Latitude).HasPrecision(8, 7);
        modelBuilder.Entity<Material>().Property(x => x.Longitude).HasPrecision(8, 7);
 } 
```

在数据库中，列信息如下所示：

```
dbo.Materials.Latitude (decimal(8, 6), null)

dbo.Materials.Longitude (decimal(8, 6), null) 
```

如果我尝试保存一个负值，就像`-1m`一切正常。但是一旦我尝试保存任何更大的值或带有小数的值，`-123`或者`-123.123456`数据上下文在保存时总是抛出异常。

我得到的例外是：

> 保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。通过在实体类型中公开外键属性，可以更轻松地在保存时处理异常。有关详细信息，请参阅 InnerException。

查看内部异常，我们可以看到这可能是问题的原因：

> {"参数值 '-117.246108' 超出范围。"}

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:55:26.010

据我所知，扩展名为“HasPrecision(8, 7)”，您将十进制定义为总共有 8 位数字；右侧最多有 7 个数字。十进制 -117.246108 有 9 位，尝试更改“HasPrecision(9, 7)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:55:37.853

它的行为与您配置模型的行为完全相同。`HasPrecision(8,7)`表示小数点两边允许的总位数为8，小数点右侧的总位数为7。所以小数点左侧只能有一位数。要存储“-117.246108”，您至少需要精度 9 和比例尺 6。

# mysql - mysql：concat的特殊使用

> ID：10087273
> 
> 赞同：0
> 
> 时间：2012-04-10T10:45:40.010
> 
> 标签：mysql, concat

我有具有多对一关联的表 A 和 B（b 包含 fk_a）。假设样本表如下：

A：

```
id first 
1  sample
2  sample 
```

乙：

```
id fk_a  type value
1  1      som  thing
2  1      oth  other
3  2      som  thing
4  2      oth  any 
```

我希望表 A 中的“第一”列是唯一的，并且我希望通过以下方式实现它：

想要的答：

```
id first 
1  sample-thing-other
2  sample-thing-any 
```

是否可以使用纯 MYSQL 在表 A 上使用 UPDATE 和 CONCAT 来获得所需的更新？

如果我把所有东西都放在一张桌子上会很容易，我可以写

```
UPDATE A 
SET first = CONCAT(first, value) 
```

但不幸的是，我有多对一的关联，我不确定在这种情况下是否有可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:52:25.433

[Group_Concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)是您的朋友。

但是我可以提醒你第一范式吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:17:09.267

我没有mysql的实例，也没有测试。使用[group_concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
UPDATE A, (SELECT fk_a, GROUP_CONCAT(value SEPARATOR '-') as concat_value FROM B GROUP BY fk_a) AS t

SET A.first = CONCAT(A.first, '-', t.concat_value) 

WHERE A.id = t.fk_a; 
```

# java - UI thread waiting for other threads to execute - Not working

> ID：10087274
> 
> 赞同：0
> 
> 时间：2012-04-10T10:45:43.160
> 
> 标签：java, android, multithreading, imageview

I have read that the main UI thread in android should not call sleep.

However, my application needs to :

1.  call thread1 from main UI thread
2.  call thread2 from main UI thread.

Use the output (2 images) of the 2 thread, add them and then display them.

I am using Thread.sleep() so that the main thread waits thread1 and thread2 till they are done. However mImageview.setbitmap is not working after i call it in the main thread (after sleep).

can u pls advise me how i should do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:51:45.963

Android中的多线程应该异步完成。为此，您应该使用[`AsyncTask`-class](http://developer.android.com/reference/android/os/AsyncTask.html)。

对于您的情况，例如，您将创建一个任务来加载（或处理）这两个图像。当进程正在运行时（在另一个线程中，在 UI 线程之外），您可以[`ProgressBar`](http://developer.android.com/reference/android/widget/ProgressBar.html)向用户显示您的应用程序当前很忙（然后在 UI 线程上完成）。

任务完成后，您会从任务中获取结果（您的两张图像），隐藏进度条并向用户显示所有内容。

尽管一个无反应的 GUI 总是有你的应用程序冻结的感觉，如果一个 UI 线程被阻塞超过 5 秒（这是一个很长的时间），你的应用程序将被强制关闭，因为它不是"反应”（并且会引发[ANR ）。](http://developer.android.com/guide/practices/design/responsiveness.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:24:51.320

我建议使用[ExecutorService](http://developer.android.com/reference/java/util/concurrent/ExecutorService.html)。这是如何

1.  将两个图像加载活动创建为 Runnable 任务。
2.  使用 ExecutorService 执行它们。
3.  使用`ExecutorService.awaitTermination()`；让主线程等待 Runnable 任务完成。它的文档显示

> 在关闭请求后阻塞，直到所有任务都完成执行，或者发生超时，或者当前线程被中断，以先发生者为准。

这是异步的方式，我想应该是首选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:59:32.013

这不仅仅是 Thread.Sleep()。在 GUI 线程中，执行所需的任何操作来启动两个线程/任务/任何操作，然后退出事件处理程序。

不要在 GUI 事件处理程序中等待！不在 Java、C++、C、Delphi 中。使用异步任务或处理程序，并向 GUI 线程发出信号。线程 1 表示已完成，线程 2 表示已完成。在任何一种情况下，检查数据是否已被另一个线程返回。如果有，则您拥有两组返回的数据，因此您可以添加它们并显示它们。

不要在 GUI 事件处理程序中等待。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T11:51:38.480

为此，您可以简单地使用线程和处理程序。这是一个小演示，

像这样在你的 onCreate 中创建一个**处理程序，**

```
Drawable d=null;    

Handler handler=new Handler()
{

public void handleMesaage(Message msg)
{
   if(msg.what==0)
{
   imageView.setBackgroundDrawable(d);
}

}

}; 
```

现在像这样调用你的线程，

```
Thread t=new Thread(new Runnable()
{
@Override
public void run() {
   InputStream is = (InputStream) new URL(url).getContent();
   d = Drawable.createFromStream(is, "src name");
    handler.sendEmptyMessage(0);
}
});t.start(); 
```

# java - "Resource not available" message for an applicarion created with spring roo

> ID：10087281
> 
> 赞同：1
> 
> 时间：2012-04-10T10:46:06.333
> 
> 标签：java, spring, spring-mvc, spring-roo

Hi i'm an absolute beginner in spring roo.I followed a tutorial on web and created a sample roo application. When i run the application using tomcat it always gives the message "The requested resource (/phonebook) is not available." i have mentioned the commands i entered in roo shell. can someone please tell me, why i'm getting that message?

```
project phonebook
jpa setup --provider HIBERNATE --database HYPERSONIC_IN_MEMORY    
entity jpa --class Contact    
field string --fieldname name    
field string --fieldName mobile    
web mvc setup    
web mvc all --package ~.web    
quit

mvn tomcat:run 
```

# sql - SQL：如何查找丢失的 ID？

> ID：10087287
> 
> 赞同：0
> 
> 时间：2012-04-10T10:46:40.557
> 
> 标签：sql, database

假设我有一个表，其中有很多由唯一 ID 标识的行。现在我有一个（相当大的）用户输入的 id 列表（**不是**表），我想检查它已经在数据库中。

所以我想输出列表中的 id，而不是表中的 id。我如何用 SQL 做到这一点？

**编辑：我知道我可以使用临时表来做到这一点，但如果可能的话，我真的很想避免这种情况。**

**编辑：使用外部编程语言的相同评论。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T10:49:16.143

试试这个：

```
SELECT t1.id FROM your_list t1
LEFT JOIN your_table t2
  ON t1.id = t2.id
WHERE t2.id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:58:55.083

你没有提到：

*   将使用哪个 RDBMS；
*   ID的来源是什么。

所以我会考虑使用 PostgreSQL，并将要检查的 ID 加载到（*临时*）表中。

考虑以下：

```
CREATE TABLE test (id integer, value char(1));
INSERT INTO test VALUES (1,'1'), (2,'2'), (3,'3');

CREATE TABLE temp_table (id integer);
INSERT INTO temp_table VALUES (1),(5),(10); 
```

你可以得到这样的结果：

```
SELECT * FROM temp_table WHERE NOT EXISTS (
    SELECT id FROM test WHERE id = temp_table.id); 
```

或者

```
SELECT * FROM temp_table WHERE id NOT IN (SELECT id FROM test); 
```

或者

```
SELECT * FROM temp_table LEFT JOIN test USING (id) WHERE test.id IS NULL; 
```

您可以选择任何选项，具体取决于您的卷，您可能有不同的性能。

请注意：某些 RDBMS 可能对在`IN()`构造内部指定的表达式数量有限制，请记住这一点（我用 ORACLE 打了几次）。

**编辑：**为了匹配*没有临时表*和*没有外部语言*的约束，您可以使用以下构造：

```
SELECT DISTINCT b.id
  FROM test a RIGHT JOIN (
       SELECT 1 id UNION ALL
       SELECT 5 UNION ALL
       SELECT 10) b ON a.id=b.id
 WHERE a.id IS NULL; 
```

不幸的是，您必须生成大量`SELECT x UNION ALL`条目才能在此处创建单列多行表。我`UNION ALL`用来避免不必要的排序步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:06:36.267

It is hardly possible to make a single pure and general SQL query for your task, since it requires to work with a list (which is not a relational concept and standard set of list operations is too limited). For some DBMSs it is possible to write a single SQL query, but it will utilize SQL dialect of the DBMS and will be specific to the DBMS.

# javascript - 如何从最左边开始获取 Highcharts X 轴类别

> ID：10087294
> 
> 赞同：14
> 
> 时间：2012-04-10T10:46:58.067
> 
> 标签：javascript, highcharts

我有一个 Highcharts 面积图，X 轴上有字符串类别。我希望图表从 x 轴的最左边开始并在最右边结束，没有任何填充。在下图中，红色箭头显示了我想要去除的间距。如果没有文本类别，这很容易实现，但我似乎无法弄清楚。任何帮助表示赞赏，谢谢。

![带有不需要的填充的图表](../Images/c9d1dbba57626fa7a33209a5c6a83607.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T19:30:09.677

您可以通过在轴上重新定义 labels.formatter 来实现所需的结果。[jsFiddle](http://jsfiddle.net/vnJLG/)在这里。

但是如果你想保持简单并`axis.categories`以传统方式传递（我认为这是一种更好的方式），我建议你使用一个小技巧并重新定义一个`Axis.init`函数。在[jsFiddle](http://jsfiddle.net/2S3fK/)上试试。

**UPD：**我已经稍微更新了我之前的小提琴。[检查出来](http://jsfiddle.net/2S3fK/4/)。我认为您可以结合我所有的解决方案来获得更好的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T08:01:56.197

您可以使用 spacingLeft 和 spacingRight 来设置间距：

```
chart: {
         renderTo: 'chart1',
         type: 'area',
         spacingLeft: -21,      
         spacingRight: -21,      
         spacingBottom: 1
}, 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-09T21:04:32.960

更简洁的解决方案是使用[Highchart API](http://api.highcharts.com/highcharts#plotOptions.area.pointPlacement)`pointPlacement`中提供的参考。

添加`pointPlacement: 'on'`，你应该在做生意。（作为参考，[这里是他们的例子 JSFiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-pointplacement-between/)）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-06-24T12:55:12.513

```
xAxis: {
categories: ['cat1', 'cat2', 'cat3', 'cat4', 'cat5']
},
series: [
    {
      name: 'name of series',
      data: [0, 2, 0, 2, 0],
      pointPlacement: 'on',
    }
] 
```

这个解决方案对我有用，也许有帮助。我无法确认这是否适用于其他输入数据的方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-10T14:31:58.430

只需添加：

```
...
xAxis: {
  startOnTick: true,
  ...
},
... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T12:53:42.107

您需要以下设置。

```
xAxis: {           
  plotLines: [{
    value: 0, 
    color: '#color'
  }],
  tickmarkPlacement: 'on'
},
yAxis: {           
  lineWidth: 0,
} 
```

# sql - SQL - SELECT max(someDate) 和另一个字段 -> 返回不连贯的内容

> ID：10087302
> 
> 赞同：0
> 
> 时间：2012-04-10T10:47:34.170
> 
> 标签：sql, select

我有一个名为 myTable 的表，如下所示：

```
id, myDate, name, group  
1, 2012-04-09, john, subGroup-A  
2, 2012-04-10, marc, subGroup-B 
```

对于以“subGroup”开头的子组，我想检索带有 maxDate 及其名称的记录。所以我正在做以下查询：

```
SELECT max(myDate) AS maxDate, name FROM myTable WHERE group LIKE "subGroup%"; 
```

我希望这个查询返回给我这个：

```
maxDate, name  
2012-04-10, marc 
```

但相反，它给了我这个：

```
maxDate, name  
2012-04-10, john 
```

所以基本上 maxDate 是正确的，但名称不是对应于该日期的名称。我真的不明白。希望有人能帮助我理解。预先感谢您的回复。干杯。马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:51:26.977

您可以参考这篇文章[我需要一个 sql 查询来按名称分组，但根据最新条目返回其他字段](https://stackoverflow.com/questions/10079013/i-need-a-sql-query-to-group-by-name-but-return-other-fields-based-on-the-most-re/10079155#10079155) MSSQL 有 2 种解决方案，一种是通用的。

主要规则：永远不要包含`SELECT`未包含在`GROUP BY`子句中或具有聚合功能的列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:55:28.867

您的查询是：

```
 SELECT max(myDate) AS maxDate, name FROM myTable WHERE group LIKE "subGroup%"; 
```

我认为您需要以下内容：

```
SELECT MAX(myDate) AS maxDate, name 
FROM  myTable 
GROUP BY NAME 
HAVING group LIKE "subGroup%" 
```

或者

```
SELECT myDate AS maxDate, name 
FROM myTable 
WHERE group LIKE "subGroup%" AND myDate = (SELECT MAX(myDate) FROM myTable) 
```

# javascript - 在 html5 画布中的形状内传播图像

> ID：10087308
> 
> 赞同：1
> 
> 时间：2012-04-10T10:48:05.777
> 
> 标签：javascript, drag-and-drop, html5-canvas, kineticjs

是否可以在 html5 画布内传播图像.. 比如说我有 2,3 个形状.. 像一个矩形一个圆形和一些正方形和一些随机的不成比例的形状.. 我有一个图像列表.. 它们是纹理不完全是颜色只是纹理，如果我点击一个我希望它在任何形状内传播（相应地变换自身而不扭曲饰面）可能通过映射坐标然后传播图像或乘以它..有什么办法吗所以？？当然，在 html5 画布中解释起来有点困难，但如果有人对此有任何想法，那么一些指针会很好..

问候， 阿希什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:18:32.643

首先，您必须保存形状的坐标并点击测试您的鼠标点击以查找匹配项。

要使用图像填充形状，请使用带有参数“repeat”的 createPattern 函数。为您的图案定义 fillstyle 属性，并根据形状的坐标进行填充。

可能有用的链接：

[http://www.tutorialspoint.com/html5/canvas_pattern_shadow.htm](http://www.tutorialspoint.com/html5/canvas_pattern_shadow.htm)

[http://simonsarris.com/blog/140-canvas-moving-selectable-shapes](http://simonsarris.com/blog/140-canvas-moving-selectable-shapes)

# .htaccess - 使用子目录中的 404 ErrorDocument

> ID：10087323
> 
> 赞同：5
> 
> 时间：2012-04-10T10:49:23.767
> 
> 标签：.htaccess, http-status-code-404, errordocument

我在子文件夹中有一个 htaccess 文件，如下所示：

```
/subfolder/.htaccess 
```

在 htaccess 文件中使用以下代码设置 404 ErrorDocument

```
ErrorDocument 404 /404.php 
```

问题是加载了根目录中的 404 页面，而不是`/subfolder/`文件夹中的页面。我不能简单地将 htaccess 文件更改为使用 /subfolder/404.php，因为系统将安装在许多不同的地方。

有没有办法引用 htaccess 所在目录中的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T17:40:27.630

我刚刚遇到了同样的问题并找到了您的页面...如果您有域/文件夹并且想要将文件夹中的任何内容重定向回域的索引，请使用**`ErrorDocument 404 /`**

...我不确定这是进入根文件夹还是一个文件夹，但在你的情况下（和我的）它们是相同的。

希望这可以帮助！

# jquery-plugins - DataTables - 向列添加过滤功能

> ID：10087327
> 
> 赞同：2
> 
> 时间：2012-04-10T10:49:43.933
> 
> 标签：jquery-plugins, datatables

我有一个表，其中包含我想从搜索框中排除的信息。例如，在其中一列中，我有一些文本，然后是链接，它看起来像这样：

```
<td>
  <div>John Doe</div>
  <div>
    <a href="/usr/johndoe/view">View</a> | 
    <a href="/usr/johndoe/edit">Edit</a> |
    <a href="/usr/johndoe/delete">Delete</a>
  </div>
</td> 
```

当然，在这种情况下，我希望搜索框仅将“John Doe”视为要搜索的文本。

我在 php 中绘制我的表格（我使用 Symfony-2）并使用带有 jQ​​uery 的 dataTable 函数应用 DataTable 插件。我的印象是我想要的东西是可能的，但无法实现。[http://www.datatables.net/forums/discussion/255/customising-the-way-the-filter-works/p1](http://www.datatables.net/forums/discussion/255/customising-the-way-the-filter-works/p1)等其他讨论都没有帮助我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:21:35.740

我确定有一些方法可以自定义实际的搜索功能（您可以使用 mDataProp 指定列的类型，然后为该类型编写[自定义过滤器](http://datatables.net/plug-ins/filtering)？）。

但另一种方法是让您的 PHP 脚本只提供名称：John Doe。这将是单元格的原始数据。

然后在您的列定义中，使用`fnRender()`您在问题中使用的布局来格式化单元格 - 并让它自动解析名称以创建您想要的链接（假设所有名称都是第一个和最后一个，并且所有链接只使用组合的名字/姓氏，这应该很容易实现）。

然后为该列设置`bUseRendered`为`false`，它将根据原始内容而不是新内容执行所有排序和过滤。 [在这里查看更多](http://datatables.net/ref#bUseRendered)。

# sql-server - SQL Server 上 DISTINCT 大量性能损失的解决方法？

> ID：10087335
> 
> 赞同：2
> 
> 时间：2012-04-10T10:50:41.873
> 
> 标签：sql-server

当我将以下查询发送到我们的数据库时，它会在 < 2 秒内返回 4636 行：

```
select
    company3_.Un_ID as col_0_0_ 
from
    MNT_Equipments equip
inner join
    DynamicProperties dprops
        on equip.propertiesId=dprops.id
inner join
    DynamicPropertiesValue dvalues
        on dprops.id=dvalues.dynamicPropertiesId
inner join
    Companies company3_
        on dvalues.companyId=COMPANY.Un_ID
where
    equip.discriminator='9000'
    and equip.active=1
    and dvalues.propertyName='Eigentuemer' 
```

但是当我向 select 子句添加 distinct 时，返回剩余的 40 个条目需要将近 4.5 分钟。这似乎有点不成比例 - 我能做些什么来改进它，解决它或者至少找出这里到底发生了什么？

执行计划

**没有区别**

![计划一](../Images/26ee16b3d68876e383f69ba4d8345aac.png)

**具有鲜明的**

![计划 2](../Images/039c9cee496ccb4a0cc0a71e28ff5b2a.png)

非常感激您的帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:00:37.517

聚集索引扫描表明查询的表上没有好的索引。如果您创建以下索引，则执行时间应该会有所改善。

```
CREATE NONCLUSTERED INDEX [IX_MNT_Equipments_Active] ON [MNT_Equipments] 
(
    [propertiesId] ASC,
    [discriminator] ASC,
    [active] ASC
)
GO

CREATE NONCLUSTERED INDEX [IX_DynamicPropertiesValue_Name] ON [DynamicPropertiesValue] 
(
    [propertyName] ASC
)
GO 
```

# ios - 在iOS中，是否可以获取当前音轨的波形或频谱数据？例如：均衡器

> ID：10087339
> 
> 赞同：2
> 
> 时间：2012-04-10T10:51:11.173
> 
> 标签：ios, avaudioplayer, waveform, equalizer

是否可以从 iOS 中当前播放的曲目中读取频谱数据？例如，制作一个类似于 iTunes 中的均衡器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:41:40.027

Apple 有一个示例程序“aurioTouch”，它可以显示时域和频域波形。

[http://developer.apple.com/library/ios/#samplecode/aurioTouch/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/aurioTouch/Introduction/Intro.html)

# mysql - 我需要更快的 SQL 查询来查找过期的订阅者

> ID：10087340
> 
> 赞同：1
> 
> 时间：2012-04-10T10:51:11.860
> 
> 标签：mysql, join

我在 MySQL 成员和订阅者中有 2 个表。我想做的是；我想查找至少有 1 个过期订阅且没有有效订阅的订阅者。

```
SELECT mem.id as id 

FROM members as mem 
INNER JOIN subscriptions as sub ON sub.member_id = mem.id 

WHERE 
sub.active = 0 AND 
NOT EXISTS ( SELECT 1 FROM subscriptions as sub2 WHERE sub2.member_id = mem.id AND sub2.active = 1 )

Group By mem.id 
```

这个查询处理时间太长（考虑到2张表的记录量，这是正常的）。

我等了大约 2 分钟才看到结果，但由于它仍在尝试加载，我只是取消了它。我需要更快的结果。有没有其他方法可以做到这一点？

感谢您的时间和关心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:01:33.137

我猜不出你为什么要这样做你的 sql 但这可能有效

```
SELECT mem.id as id 
FROM members as mem 
INNER JOIN subscriptions as sub ON sub.member_id = mem.id 
WHERE sub.active = 0 
Group By mem.id 
```

更新：我猜您可能会添加`deactivted_date`列或其他内容以指示到期

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:21:08.183

干得好。（确保你有正确的索引）。另请注意，我离开了原始联接，因为我假设您在某些时候需要的不仅仅是 member_id。但是如果你想要的只是 member_id，你可以一起删除 members 表。

```
/*
insert members (member_name) values ('tom')
insert members (member_name) values ('bob')
insert members (member_name) values ('jim')

declare @tom int
set @tom = (select member_id from members where member_name = 'tom')

insert subscriptions (member_id, is_active) values (@tom, 1)
insert subscriptions (member_id, is_active) values (@tom, 0)

declare @bob int
set @bob = (select member_id from members where member_name = 'bob')

insert subscriptions (member_id, is_active) values (@bob, 0)
insert subscriptions (member_id, is_active) values (@bob, 0)
*/

SELECT m.member_id
FROM members as m 
INNER JOIN subscriptions as s ON s.member_id = m.member_id 
LEFT JOIN subscriptions s2 on s2.member_id = m.member_id and s2.is_active = 1
WHERE 
s.is_active = 0 and
s2.subscription_id is null

Group By m.member_id 
```

或者

```
SELECT s.member_id
FROM subscriptions as s
LEFT JOIN subscriptions s2 on s2.member_id = s.member_id and s2.is_active = 1
WHERE 
s.is_active = 0 and
s2.subscription_id is null

Group By s.member_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:22:56.670

DISTINCT 和 group by 应该执行相同的操作，但我发现使用 DISTINCT 查询更具可读性。

活动索引可能会加快查询速度。

```
SELECT DISTINCT mem.id as id
FROM members as mem, subscriptions as sub WHERE sub.member_id = mem.id AND 
sub.active = 0 AND NOT EXISTS (
   SELECT * FROM subscriptions as sub2
   WHERE sub2.member_id = mem.id AND sub2.active = 1
) 
```

# iphone - 如何创建自定义索引

> ID：10087346
> 
> 赞同：2
> 
> 时间：2012-04-10T10:51:37.290
> 
> 标签：iphone, xcode, uitableview, custom-controls

![在此处输入图像描述](../Images/c2ab73a10b29057fb010ad2b23c26166.png)

如何创建这样的自定义索引。我试图在后面给出图像和颜色，但它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:15:48.247

请参阅[UIButton TouchUpInside 触摸位置](https://stackoverflow.com/questions/7374937/uibutton-touchupinside-touch-location)- 就像拥有 26 * n 像素高度的自定义按钮一样简单，y 值除以 26 并转换为字符将为您提供索引。

# ios - 自定义 TCP 服务与 HTTP IOS

> ID：10087350
> 
> 赞同：0
> 
> 时间：2012-04-10T10:51:49.450
> 
> 标签：ios, tcp, firewall

我正在实现一个客户端（IOS 设备）和服务器。我希望将请求/响应的负载保持在最低限度，因此计划实施基于 TCP 的自定义服务。我唯一担心的是我是否可以依靠我使用的端口始终通过 3G 等打开。必须有其他应用程序使用非标准端口和 TCPon IOS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:57:03.667

如果可以，您可以将端口 80/443(SSL) 用于自定义 TCP 服务器。您只需要确保您的服务器上有一个免费 IP 即可将您的自定义服务器应用程序绑定到端口 80。如果它不是端口 80/443(SSL) 后面的 HTTP(D)，那不是问题！

使用其他端口时，您可能会遇到防火墙规则中阻止流量的问题。但这是标准情况。就像 VOIP/SIP iOS 应用程序需要 SIP 端口 5090。因此，如果您尝试在仅支持 5090 以外的某些端口的大学 WiFi 中拨打电话，则该应用程序将无法运行/连接。

所以。你应该像[Viber](http://itunes.apple.com/ch/app/viber-free-phone-calls-text/id382617920?mt=8)或[WhatsApp Messenger](http://www.whatsapp.com/)那样做。使用端口 80/443(SSL) 并尝试通过可能的防火墙获得最大可能的连接。

# parsing - 如何从语法生成代码示例？

> ID：10087352
> 
> 赞同：1
> 
> 时间：2012-04-10T10:52:04.263
> 
> 标签：parsing, grammar

我可以访问语法，并希望使用它来生成遵循语法的代码示例。

是否有一些现有的工具可以做到这一点？如果没有，正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:59:06.127

您可以尝试[mutt或](http://www.schneertz.com/rmutt/)[此处列出](http://www.quiveringbrain.com/TextGenerators.html)的一些工具可能会满足您的需求。

如果您想自己实现一个文本生成器，您可以随机选择当前符号的可能扩展并沿着路径向下直到您不能再或达到限制，然后尝试选择一个终止符号（如果可用）

# database - 创建游标，是否正在复制数据？

> ID：10087353
> 
> 赞同：2
> 
> 时间：2012-04-10T10:52:04.543
> 
> 标签：database, oracle, cursor

我现在正在使用游标，这对我来说变得很乱，希望你能向我强调一些问题。

我已经检查了有关游标的 oracle 文档，但我找不到：

打开游标时，是否会在内存中创建结果的本地副本？

*   是的：如果我有一个包含大量数据的表，这真的有意义吗？我认为它不会真正有效，不是吗？
*   否：整个数据是否锁定到其他进程？

    1.  是的：如果我为每一行做一个真正繁重的过程，数据将在很长一段时间内不可用......

    2.  否：如果另一个进程修改了我当前与游标一起使用的数据，或者如果它添加了新行，会为游标更新它会发生什么？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:28:34.697

您可能想阅读[概念指南中有关](http://docs.oracle.com/cd/E11882_01/server.112/e25789/toc.htm)[数据并发和一致性](http://docs.oracle.com/cd/E11882_01/server.112/e25789/consist.htm#i13945)的部分。

您的具体问题的答案：

> 打开游标时，是否会在内存中创建结果的本地副本？

不，但是通过 Oracle 的“多版本读取一致性”（参见上面的链接），游标获取的行都将与打开游标的时间点一致 - 即，获取时的每一行都将是当cursor 已打开并且仍然具有相同的值（即使另一个会话可能同时更新甚至删除了它）。

> 否：整个数据是否锁定到其他进程？

不

> 否：如果另一个进程修改了我当前与游标一起使用的数据，或者如果它添加了新行，会为游标更新它会发生什么？

您的游标不会看到这些更改，它会继续处理打开游标时存在的行。

概念指南详细解释了这一点，但其工作方式的本质如下：

*   Oracle 维护着一个称为[系统更改号 (SCN)](http://www.adp-gmbh.ch/ora/concepts/scn.html)的东西，它会不断增加。
*   当您的光标打开时，它会记录 SCN 的当前值。
*   当游标获取行时，它会查看标记在它们上的 SCN。如果此 SCN 与光标的起始 SCN 相同或更低，则数据是最新的并被使用。但是，如果该行的 SCN 高于游标的 SCN，则这意味着另一个会话已经更改了该行（并提交了更改）。在这种情况下，Oracle 在回滚段中查找该行的旧版本并使用它。如果查询运行了很长时间，则有可能在回滚段中旧版本已被覆盖。在这种情况下，查询失败并出现 ORA-01555 错误。

如果需要，您可以修改此默认行为。例如，如果在游标运行期间没有其他会话修改您正在查询的行是至关重要的，那么您可以使用该`FOR UPDATE`子句来锁定行：

```
CURSOR c IS SELECT sal FROM emp FOR UPDATE OF sal; 
```

现在，在查询运行时尝试修改查询中使用的行的任何会话都会被阻止，直到您的查询完成提交或回滚。

# java - 如何将字体颜色应用于使用 DefaultTableModel 的 JTable 上的特定单元格

> ID：10087361
> 
> 赞同：1
> 
> 时间：2012-04-10T10:52:26.667
> 
> 标签：java, swing, jtable, defaulttablemodel

我正在尝试创建一个连接到 MS Access 的简单 To-Do 列表 Java 应用程序，我使用**JTable**和**DefaultTableModel**来显示列表。我想通过单击按钮时更改其颜色来标记已完成的任务。我有一个名为“*已完成*”的布尔字段用作指示器。

```
String header[] = {"priority", "task"};
String data[][];
DefaultTableModel model = new DefaultTableModel(data, header);
JTable table = new JTable(model);

// to be replaced with code that affects only specific cells not the whole table
table.setFont(customFont); 
```

我已经有一个名为*customFont*的 Font 对象，可以应用它了。我的问题是，如何仅将其应用于已完成 == true 的特定单元格。

示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:03:26.987

*   最简单的方法是查看[prepareRenderer()](https://stackoverflow.com/a/9737299/714968)，最好的是 @camickr [Table Row Rendering](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/)

*   `JTable`是视图，基于，在大多数情况下，您必须从or内部`TableModel`针对模型[converXxxToXxx](https://stackoverflow.com/a/7625488/714968)转换视图，因为可以对过滤进行排序`prepareRenderer``getTableCellRendererComponent``JTable`

*   方法

代码

```
public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
Component c = super.prepareRenderer(renderer, row, column); 
```

返回对 JTable 中特定单元格的访问 - ( [TableCellRenderer renderer, int row, int column](https://stackoverflow.com/a/6901508/714968) )

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T11:09:01.117

使用 DefaultTableCellRenderer，然后可以使用 setForeground() 和 setBackground()。

参考页面.. [http://www.jyloo.com/news/?pubId=1282737395000](http://www.jyloo.com/news/?pubId=1282737395000)

或者看这个例子......

```
/*This is the raw code I have written.*/ 
JTable Tbl=new JTable(2,2){ 
    DefaultTableCellRenderer colortext=new DefaultTableCellRenderer();
    {
        colortext.setForeground(Color.RED);
    }
    @Override
    public TableCellRenderer getCellRenderer(int arg0, int arg1) {
        return colortext;
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:58:59.973

我相信您可以在

```
TableCellRenderer.getTableCellRendererComponent(JTable table, Object value,
                        boolean isSelected, boolean hasFocus, 
                        int row, int column) 
```

表法

# facebook - 使用 XFBML 邀请时间轴

> ID：10087363
> 
> 赞同：0
> 
> 时间：2012-04-10T10:52:30.817
> 
> 标签：facebook, fbml, timeline, xfbml, invite

在我的应用程序中，我正在显示自定义邀请对话框。这是通过使用 FB.XFBML.parse 方法来实现的，该方法将 FBML fb:serverFbml 与其他负责显示多用户列表的内容一起解析。

在应用程序方面，一切看起来都不错，邀请已发送。

但是已经切换到时间线的用户在接受以这种方式完成的请求时遇到了问题。他们无法单击它并进入应用程序，甚至无法将其删除。尚未使用时间轴的用户可以使用此方法访问应用程序。

下面的屏幕没有工作示例和我正在使用的部分编辑代码：

[链接到图片](http://www.freeimagehosting.net/gv54q)

这是从浏览器复制的代码：

```
<form method="POST" target="" action="http://application_link/index.php/player/invitedfriend" content="Some content &lt;fb:req-choice label='Example label' url='http://apps.facebook.com/app_name/' /&gt; " type="closer" invite="true" id="req_form_4f840..."> 
```

我知道 FBML 已被弃用，并且从 6 月 1 日起将不再受支持，但基于[facebook 提供的文档](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)我应该能够毫无问题地使用 fb:serverFbml，这要归功于 FB.XFBML.parse。知道可能有什么问题/解决方案吗？我宁愿不想使用标准的 facebook 对话框。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:45:51.223

您应该`Requests 2.0`为您的应用程序启用（如果尚未启用）并使用新方法发送邀请。[请求对话框](http://developers.facebook.com/docs/reference/dialogs/requests/)页面可以帮助您。使用新方法的代码也很简单：

```
FB.ui({method: 'apprequests',
    message: 'My Great Request'
}, requestCallback); 
```

新方法比旧的 FBML 版本有更多的优势。XFBML 是 FBML 的网站版本。两者都将在 6 月删除，因此您应尽快切换到上述方法。

# c# - 颜色数据网格视图的问题

> ID：10087365
> 
> 赞同：0
> 
> 时间：2012-04-10T10:52:45.447
> 
> 标签：c#

我的表单上有 DataGridView，我正在尝试为单元格着色。

这是代码：

```
public partial class Form1 : Form
    {
        DataTable dtToGrid = new DataTable();
        BindingSource bs = new BindingSource();

        public Form1()
        {
            InitializeComponent();

            dtToGrid.Columns.Add("Group");

            DataRow dr;

            dr = dtToGrid.NewRow();
            dr["Group"] = "must become lightGreen";

            dtToGrid.Rows.Add(dr);        

            bs.DataSource = dtToGrid;
            dataGridView1.DataSource = bs;

            ColorData();

            dataGridView1.Refresh();
        }

        public void ColorData()
        {
            dataGridView1[0, 0].Style.BackColor = Color.LightGreen;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            ColorData();
        }
    } 
```

如您所见，函数 ColorData 调用了两次，但是当它从构造函数调用时 - 没有任何反应并且单元格仍然是白色的。从 button1_Click 调用，它是事件函数，正确地为单元格着色。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:52:34.020

我自己找到了答案。首先 - 应该加载表单，然后才能更改单元格的颜色。我在主窗体的事件函数加载中更改颜色，一切正常。

# asp.net-mvc-3 - 存储库接口中的单元测试功能 - ASP.net MVC3 & Moq

> ID：10087369
> 
> 赞同：0
> 
> 时间：2012-04-10T10:53:00.600
> 
> 标签：asp.net-mvc-3, unit-testing, testing, moq

我开始编写单元测试并实现了一个很好的存储库模式/起订量，允许我在不使用“真实”数据的情况下测试我的功能。到目前为止一切顺利..但是..

在我的“帖子”存储库界面中，`IPostRepository`我有一个功能： `Post getPostByID(int id);` 我希望能够从我的测试类中对其进行测试，但无法弄清楚如何。

到目前为止，我正在使用这种模式进行测试：

```
[SetUp]
public void Setup()
{
    mock = new Mock<IPostRepository>();
}

[Test]
public void someTest()
{
    populate(10);  //This populates the mock with 10 fake entries

    //do test here
} 
```

在我的函数“someTest”中，我希望能够调用/测试该函数`GetPostById`。我可以找到函数，`mock.object.getpostbyid`但“对象”为空。

任何帮助，将不胜感激 ：）

iPost 存储库：

```
public interface IPostRepository
{
    IQueryable<Post> Posts {get;}

    void SavePost(Post post);
    Post getPostByID(int id);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:34:10.597

我不确定您使用的是什么单元测试框架，但我使用的是 NUnit。我不是单元测试专家，但我知道足以让我开始并获得结果。

我通常有一个服务层，这将调用我的帖子存储库：

```
public class PostService
{
     private readonly IPostRepository postRepository;

     public PostService(IPostRepository postRepository)
     {
          if (postRepository== null)
          {
               throw new ArgumentNullException("postRepository cannot be null.", "postRepository");
          }

          this.postRepository = postRepository;
     }

     public Post GetPostById(int id)
     {
          return postRepository.GetPostById(id);
     }
} 
```

您的单元测试可能如下所示：

```
[TestFixture]
public class PostServiceTests
{
     private PostService sut;
     private Mock<IPostRepository> postRepositoryMock;
     private Post post;

     [SetUp]
     public void Setup()
     {
          postRepositoryMock = new Mock<IPostRepository>();

          sut = new PostService(postRepositoryMock.Object);

          post = new Post
          {
               Id = 5
          };
     }

     [Test]
     public void GetPostById_should_call_repository_to_get_a_post_by_id()
     {
          int id = 5;
          postRepositoryMock
               .Setup(x => x.GetPostById(id))
               .Returns(post).Verifiable();

          // Act
          Post result = sut.GetPostById(id);

          // Assert
          Assert.AreEqual(post, result);
          postRepositoryMock.Verify();
     }
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:15:03.843

如果您想测试 的真实实现`GetPostById`，请通过`IPostRepository`. Moq（以及一般的模拟）仅适用于您不想使用真实物品的情况。

换句话说，用一些帖子来准备你的数据库，新建真正的存储库，调用`GetPostById`并对结果进行断言。这不是严格意义上的单元测试，而是集成测试，因为它包含数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:25:55.320

如果你希望你的模拟对象返回一个结果（非空），你需要设置它：

```
mock.Setup( m => m.GetPostByID( 5 ) ).Returns( new Post() ); 
```

您返回的具体内容当然取决于您。

**更新：**

如果您需要使用方法参数，您还可以设置[CallBack](http://code.google.com/p/moq/wiki/QuickStart#Callbacks)。例如：

```
mock.Setup( m => m.GetPostByID( It.IsAny<int>() ) )
    .Callback( id => return new Post{ Id = id; } ); 
```

这可能会使您的设置代码更容易，因为您不需要使用数据来启动模拟。

# jquery - 如何关闭移动应用程序的jquery对话框

> ID：10087370
> 
> 赞同：1
> 
> 时间：2012-04-10T10:53:02.390
> 
> 标签：jquery, mobile

我正在做一个在移动设备中查看的网站，我需要一个弹出/对话框来显示内容以避免页面重定向。我已经使用了代码

```
<a href="<?=site_url('cart/terms_conditions/'.$cart['Product_ID'])?>"  data-rel="dialog" style="color:#27d9fb; font-size:100%;">Terms & Conditions</a> 
```

对话框出现了，看起来不错我的问题是如何关闭对话框。当用户关闭条款和条件页面时，我需要留在主页。我使用过 jquery，javascript

> location.reload(true);

但它不起作用。如果有人知道，请帮忙。

蚂蚁帮助将被接受

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:02:08.183

你不能只使用：`$('.ui-dialog').dialog('close')`？

例如。在您的条款和条件页面中添加一个“关闭”按钮，然后`.dialog('close')`在单击该按钮时触发。

```
<button id="close-button">Close</button>

$('#close-button').click(function() {
  $('.ui-dialog').dialog('close');
}); 
```

[http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-dialogs.html](http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-dialogs.html)

# jquery - 如何通过 jquery 对字段集进行排序？

> ID：10087372
> 
> 赞同：0
> 
> 时间：2012-04-10T10:53:24.373
> 
> 标签：jquery, draggable, twitter-bootstrap

我有一个包含多个字段集的表单，其中包含多个输入。如何通过 jquery 和拖放对这些字段集进行排序？

```
 <fieldset>
    <legend>Fieldset1
      <span class="pull-right">
        <a href="#"><i class="icon-move"></i></a>
      </span>
    </legend>

    <label for="f1_i1">Field1-Input1</label>
    <input id="f1_i1" name="f1_i1" size="50" type="text"/>

    <label for="f1_i...">Field1-Input...</label>
    <input id="f1_i..." name="f1_i..." size="50" type="text"/>

  </fieldset>

  <fieldset>
    <legend>Fieldset2
      <span class="pull-right">
        <a href="#"><i class="icon-move"></i></a>
      </span>
    </legend>

    <label for="f2_i1">Field2-Input1</label>
    <input id="f2_i1" name="f2_i1" size="50" type="text"/>

    <label for="f2_i...">Field2-Input...</label>
    <input id="f2_i..." name="f2_i..." size="50" type="text"/>

  </fieldset>

  <fieldset>
    <legend>Fieldset
    ...
  </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:59:36.933

```
$(function() {
        $( "#sortable" ).sortable();
        $( "#sortable" ).disableSelection();
    });

<ul id="sortable">
      <li>
          fieldset>
    <legend>Fieldset1
      <span class="pull-right">
        <a href="#"><i class="icon-move"></i></a>
      </span>
    </legend>

    <label for="f1_i1">Field1-Input1</label>
    <input id="f1_i1" name="f1_i1" size="50" type="text"/>

    <label for="f1_i...">Field1-Input...</label>
    <input id="f1_i..." name="f1_i..." size="50" type="text"/>

  </fieldset>
    </li>
..
.
..
</ul> 
```

# c# - 查询以查找 Mongo 中特定行号之间的数据

> ID：10087373
> 
> 赞同：0
> 
> 时间：2012-04-10T10:53:24.950
> 
> 标签：c#, mongodb

我正在我的 .net 应用程序中实现分页，并且我想根据页码获取数据，例如，如果我总共有 100 个项目并且每页显示 10 个项目，并且如果用户单击“2”它应该显示来自的项目11 到 20，我只想从 11 到 20 之间的 mongo 获取数据，我知道如何在 SQL 中执行此操作，但我是 Mongo 的新手。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:07:05.847

不能很好扩展的简单解决方案是：

`db.col.find(..).skip(i * s).limit(s)`其中 i = 页码（基于 0）和 s = 页大小（在您的情况下为 10）。

正如我所提到的，此解决方案不适用于大量数据，因为 skip(N) 是一个 o(N) 操作，并且会随着 N 的增加而减慢。可扩展的解决方案更复杂，并且通常在本质上是情境化的。

# symfony - Symfony2：时事通讯订阅

> ID：10087374
> 
> 赞同：1
> 
> 时间：2012-04-10T10:53:29.873
> 
> 标签：symfony, newsletter, fosuserbundle

我需要让时事通讯订阅工作正常进行。我使用的逻辑是当用户提交他的电子邮件时，我检查是否已经有用户使用该电子邮件注册到该站点。如果是，我会检查他是否订阅了时事通讯并进行适当的订阅。如果电子邮件不在注册用户列表中，那么我有一个匿名用户的通讯表。我在这里检查他是否订阅并执行必要的操作。

这是我的控制器操作代码：

```
/**
 * @Route("/newsletter/", name="site_newsletter")
 * @return array
 */
public function newsletterSubscriptionAction(httpRequest $request)
{  
    $email = $request->request->get('email');

    try {

        $email = $request->request->get('email');
        $em = $this->getDoctrine()->getEntityManager();
        $query = $em->createQuery(
            'SELECT u FROM MyBundle:User u WHERE u.email = :email'
        )->setParameter('email', $email);

        $user = $query->getSingleResult();

        if(!is_object($user)){ //this means anonymous user not registered to site
            $em = $this->getDoctrine()->getEntityManager();
            $query = $em->createQuery(
                'SELECT n FROM MyBundle:Newsletter n WHERE n.email = :email AND n.isSubscribed = 1'
            )->setParameter('email', $email);

            $record = $query->getSingleResult();

            if($record){
                $msg = "You are already subscribed!";
            }else{
                $newsletter = new Newsletter();
                $newsletter->setEmail($email);
                $newsletter->setIsSubscribed(true);

                $em = $this->getDoctrine()->getEntityManager();
                $em->persist($newsletter);
                $em->flush();

                $msg = "You have been subscribed to our newsletter! Thank You.";
            }
        }else{
            if($user->getNewsletterSubscription()){
                $msg = "You are already subscribed!";
            }else{
                $user->setNewsletterSubscription(1);
                $em = $this->getDoctrine()->getEntityManager();
                $em->flush();                    
                $msg = "You have been subscribed to our newsletter! Thank You.";
            }                
        }

    }
    catch (\Exception $e) {
        $msg = 'Some problem occured. Please try again later';
    }

    if ($this->getRequest()->isXmlHttpRequest()) {
        return new \Symfony\Component\HttpFoundation\Response($msg);
        return array('msg' => $msg);
    }

} 
```

我正在使用 ajax 来调用这个控制器动作。这是行不通的。返回到 ajax 的数据是重定向的登录页面。

我正在使用 FOSUSerBundle 来管理用户。这会导致任何问题吗？实现它的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:35:26.737

听起来您需要授予匿名用户使用您的订阅路线的权限。

在您的 security.yml 文件中，添加如下内容：

```
security:
    access_control:
        - { path: ^/subscribe, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

# git - 如何将dev分支中的文件合并到master分支

> ID：10087379
> 
> 赞同：2
> 
> 时间：2012-04-10T10:53:57.257
> 
> 标签：git

我是 git 新手。我在开发分支工作。我需要将一个文件合并到本地 repo 中的 master 分支，然后签入 master。我怎么做？

我在 Guthub 备忘单上看到了这一点，但对 nkt 来说很清楚其中的逻辑。

```
git merge laptop/xyz 
```

所以如果文件 myfile 然后

```
git merge myfile master/origin? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:01:48.500

请按照以下步骤操作：

```
1) git branch
* master
  your_new_brach
2) git checkout your_new_brach my_file1 my_file2 my_file3
3) git status # You will see new changes into master branch 
4) git commit -m "'Merge' changes from 'your_new_brach' branch" 
```

我认为链接类似于您的问题： [如何将选择性文件与 git-merge 合并？](https://stackoverflow.com/questions/449541/how-do-you-merge-selective-files-with-git-merge)

# android - 在 ICS 模拟器中从 sd 卡获取推送文件

> ID：10087380
> 
> 赞同：4
> 
> 时间：2012-04-10T10:54:00.070
> 
> 标签：android, emulation, android-4.0-ice-cream-sandwich, snapshot

我已经将一些歌曲推送到 ICS Emulator 的 SD 卡中。然后我通过选中“擦除用户数据”选项重新启动模拟器。然后模拟器打开，里面有音乐文件。但我无法在这种模式下运行我的应用程序。表明：

```
ERROR: Unable to load VM from snapshot. The snapshot has been saved for a different hardware configuration. 
```

然后我退出了模拟器，再次通过检查“从快照启动”选项启动它。但是这些歌曲在音乐文件夹中不可用，我无法在我的应用程序中使用它。

我应该怎么做才能得到歌曲？？？

# upload - django 1.4 中未显示上传的内容

> ID：10087384
> 
> 赞同：0
> 
> 时间：2012-04-10T10:54:21.517
> 
> 标签：upload, django-1.4

我最近将我正在开发的平台更新为 django 1.4。由于我已对其进行了更新，因此对用户上传内容的所有访问都会返回 HTTP 302（重定向）代码，从而导致现在正在加载图像或无法访问内容。我不知道在哪里搜索，因为我们没有修改平台中的任何代码，除了`manage.py`文件。

生成的访问文件的 URL 是可以的，所以我不明白为什么 django 返回 302 代码。

有什么线索吗？我对此有点迷茫。在更新到 1.4 之前，用户上传的内容运行良好。

[您可以在http://github.com/cidadania/e-cidadania](http://github.com/cidadania/e-cidadania)中找到当前代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:48:20.927

解决了这个问题。django 1.4 的新 i18n URL 搞得一团糟，除了我在 url.py 文件中硬编码上传目录这一事实之外，我将其替换为“settings.MEDIA_ROOT”并解决了问题

# css - CSS：为什么这些列表元素的缩进不对齐？

> ID：10087386
> 
> 赞同：2
> 
> 时间：2012-04-10T10:54:29.140
> 
> 标签：css, html-lists, alignment, indentation, text-alignment

我手上有一个简单的 CSS 问题——<em>或者我是这么想的……</em>——我基本上只是想使用生成为列表标记的伪元素创建一个**左对齐**的列表 ( `ul`) 。`::before``content: "» "`

现在不管我尝试什么，尽管我根本无法重现此[A List Apart: Taming Lists](http://www.alistapart.com/articles/taminglists#custom-gen)文章的结果。在链接到的示例中，列表正是我想要的样式。

我在此处的 JS Fiddle 中复制了该示例，该示例显示了未对齐文本的问题：http: [//jsfiddle.net/jannis/f8TxN/](http://jsfiddle.net/jannis/f8TxN/)

这里还有一张快速图片可以更好地说明这一点。左边是 ALA 的例子，右边是我的版本：

![列表错位](../Images/acf5fd015603d33ff0a7953c98aa2f03.png)

但是，正如您在 Fiddle 中看到的那样，`li`简单的第一行将不会与 this 中的其余文本左对齐`li`。

我真的很感激有人看看并告诉我我在这里做错了什么。

非常感谢您的阅读，

詹尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:03:09.997

这是导致问题的原因`text-indent: -1em;`。`<ul>`将其设置为固定值`-13px`可修复小提琴。

但是，根据生成内容的宽度，特别受`font-size`使用的影响，如果要继续使用**em**值，可能需要不同的值。**px**与当前字体无关。

只是为了`text-indent`使文本看起来是对齐的，因为作者知道会生成将第一行向前推进的内容。我假设选择的值适合使用任何浏览器和字体的原始文章。

将以下 CSS（来自 ALA 文章）复制到小提琴`font-family: Verdana, sans-serif;font-size: 11px;`中更正了我浏览器中的对齐方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:04:36.317

在我看来，即使是 ALA 版本也有（几个？）像素，而且远非完美，尽管它们对您有相反的问题，第一行的文本比其他文本更深入。

我通过将以下内容从 -1em 更改为 -0.85em 来使您的示例生效：

```
text-indent: -0.85em; 
```

即使使用不同的字体大小，这仍然有效。

看起来所用字符的宽度也被考虑在内，因此您的示例与 ALA 之间存在差异的原因甚至可能取决于所使用的字体。

# android - PreferenceScreen 中的屏幕黑屏

> ID：10087389
> 
> 赞同：3
> 
> 时间：2012-04-10T10:54:54.153
> 
> 标签：android, android-preferences

我正在运行时创建一个 PreferenceScreen 。但是尝试滚动时屏幕停电。

因为`ListView`有一种状态可以避免这种情况，

```
android:cacheColorHint="@android:color/transparent" 
```

但是 PreferenceScreen 没有这样的状态。

如何避免 PreferenceScreen 中的屏幕停电？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:59:38.473

试试这个东西。

```
getListView().setBackgroundColor(Color.TRANSPARENT);
getListView().setBackgroundColor(Color.rgb(4, 26, 55)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T06:11:36.693

这是一个古老的问题，但也许这个答案会帮助那些找到它的人：

试试这个：

在您的 Android 清单文件中，将“@android:style/Theme.Light.WallpaperSettings”添加到您的偏好活动中。

例子：

```
<activity
        android:label="@string/cube2_settings"
        android:name=".CubeWallpaper2Settings"
        android:theme="@android:style/Theme.Light.WallpaperSettings"
        android:icon="@drawable/ic_launcher_wallpaper"
        android:exported="true"
        android:screenOrientation="unspecified" >
</activity> 
```

# php - PHP转换日期没有一年

> ID：10087390
> 
> 赞同：1
> 
> 时间：2012-04-10T10:54:57.880
> 
> 标签：php, date, time

我有一个字符串`09-10`，它代表`mm-dd`. 我需要类似的格式`Monday 10th September`？问题是我没有一年，我不能有一个包含月份和日期的数组，因为我想知道一周中的哪一天（周一、周二、周三等）

知道如何在 PHP 中执行此操作，最好使用`date()`格式化日期？注意：这不在 MySQL 中...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T10:55:47.760

在不知道年份的情况下，您无法获得日期（星期一、星期二等）。

您可以使用`date('jS F', strtotime('2012-09-10'));`获取月份和月份的日期，只需将任何旧年份推入其中即可。不过，我会确保使用闰年，以确保你能正确捕捉到那些讨厌的 2 月日期。

示例：[http ://codepad.org/JfUeTQlH](http://codepad.org/JfUeTQlH)

所以，像这样：

```
$d_m = '09-10';

$my_date = date('jS F', strtotime('2012-'.$d_m)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:05:31.863

很明显，一年中的每一天都不是星期天，它发生在定期间隔之后所以只是说没有年份的日期并不清楚日期（星期一，星期二......）。它会给你那一年的天数，即 365 天。因此，如果您在一年内工作还可以，但如果超出它，您将无法获得这一天（星期一，星期二...）。

# java - java order arraylist string[] by number

> ID：10087391
> 
> 赞同：3
> 
> 时间：2012-04-10T10:55:05.893
> 
> 标签：java, sorting, collections, types

我有一个字符串 [] 类型的数组列表。我想通过 String[0] 作为 int 来订购它。我有这个：

```
Collections.sort(listitems, new Comparator<String[]>() {
 @Override
 public int compare(String[] lhs, String[] rhs) {
  return lhs[0].compareToIgnoreCase(rhs[0]);
 }
}); 
```

但是这个顺序是这样的：
10
11
12
2
20
21
3
4
5
我试图将`lhs[0]`and转换`rhs[0]`为`int`，但`int`类型没有任何比较，我不确定`int`我需要返回什么类型

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T10:58:38.033

结果`compare`是：

*   如果第一个参数在逻辑上“小于”第二个参数，则为负
*   如果第一个参数在逻辑上“大于”第二个参数，则为正
*   如果第一个参数在逻辑上等于第二个参数，则为零

因此，如果您*确定*每个数组的第一个字符串可以解析为整数，我会使用：

```
@Override
public int compare(String[] lhs, String[] rhs) {
    int leftInt = Integer.parseInt(lhs[0]);
    int rightInt = Integer.parseInt(rhs[0]);
    return leftInt < rightInt ? -1
        : leftInt > rightInt ? 1
        : 0;
} 
```

Java 1.7 有这个有用的`Integer.compare`方法，但我认为您不会使用它。您可以使用`Integer.compareTo`，但这可能会在移动设备上产生比您真正想要的更多的垃圾......

请注意，即使`leftInt`和`rightInt`非常大，或者可能为负数，这也会起作用 - 仅从另一个值中减去一个值的解决方案假定减法不会溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:59:34.233

如果我们假设数组的内容是整数的字符串表示，我认为这应该为您工作：

```
Collections.sort(listitems, new Comparator<String[]>() {
 @Override
 public int compare(String[] lhs, String[] rhs) {
  return Integer.valueOf(lhs[0]).compareTo(Integer.valueOf(rhs[0]));
 }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:56:20.433

您的比较是基于数字的字母顺序。要在数字上比较它们：

```
Integer.parseInt(lhs[0]) - Integer.parseInt(rhs[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T11:02:28.283

你可以试试 Integer.parseInt(1hs[0])-Integer.parseInt(rhs[0]);

或者

int compareTo(Integer anotherInteger) 语法

或者

解码（字符串纳米）

# javascript - 在javascript中引用对象数组中的对象

> ID：10087395
> 
> 赞同：0
> 
> 时间：2012-04-10T10:55:19.177
> 
> 标签：javascript

```
var Bar = function(){

}

Bar.prototype.drawBar = function(obj){ 

}

var bars = [];// Creating array 
for (i = 0;i < ar.length ;i++){
    bars[i] = [new Bar(ar[i],i)]; // Creating array of objects
    bars[i].drawBar(i);// I am looking for something like this, Currently it doesn't work
} 
```

我有这样的东西，我如何绘制条形图，给出参考/索引，它应该用测量值绘制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:06:02.513

您试图将它当作一个对象来使用`bars[i]`，`Bar`但它是一个对象数组。

使用它来访问数组中的第一个对象：

```
bars[i][0].drawBar(i); 
```

如果您对数组数组没有任何用处，只需将对象直接存储在数组中即可：

```
bars[i] = new Bar(ar[i],i); 
```

然后您访问该对象的原始代码就可以工作了。

# android - mqtt mosquitto linux连接限制

> ID：10087396
> 
> 赞同：9
> 
> 时间：2012-04-10T10:55:22.423
> 
> 标签：android, mqtt, mosquitto

用户如何通过 MQTT 进行推送通知来超过 Linux 中的 1024 连接限制？

我正在使用 Mosquitto 服务器，我想我读到的它在 linux 版本中没有内置 1024 连接限制。那么，我可以使用单个服务器（无桥接等）并获得 5,000、10,000 多个用户吗？

或者，我绝对需要桥接吗？除了 mosquitto 的配置设置手册页之外，我还没有看到很多关于如何设置的文章。

或者，我可以只修改一些 linux 配置设置，我就可以使用单个 mosquitto 服务器了吗？

我的应用程序或多或少是一个即时消息应用程序，因此我预计会有大约 10,000 甚至 20,000 人使用它，并与 mosquitto 保持 24/7 全天候连接以提醒他们消息。

嗯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T16:30:34.130

从理论上讲，您可以将 Linux 设置为 mosquitto 的最大套接字数设置为您需要的值。那么问题是围绕性能。关键指标是每秒消息总数。如果您连接了 20k 个客户端，有多少是活动的，每个将发送多少条消息？

例如，如果您的一半客户端处于活动状态并且每秒发送 1 条消息，则有 10k msps - 当然只是传入。如果这些消息中的每一个都是 10 个字节，那么您将处于持续的 100kB/s 或 800kbps。

另一个方面是您的主题层次结构是如何排列的。我不能告诉你什么是最好的，但它肯定会产生影响。

我最好的建议是编写一个模拟真人的客户端，然后用它来对你的场景进行如此真实的测试。

我见过极端客户数量的例子：http: [//bit.ly/HytRpK](http://bit.ly/HytRpK)但没有更多细节。

最后一点：IBM 目前正在制作一本关于 MQTT 的红皮书。它应该在“春天”可用，即很快。我认为它将涵盖扩展问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T04:51:21.810

对于一个客户，我们测试了 IBM WebSphere MQ 的 MQTT，将每个队列管理器的并发客户端连接数增加到 240,000 个（MQ 运行时，一个 MQ 集群中可以有很多）。有人告诉我，这比 Apache Web 服务器合理处理的要多 10 倍。测试期间的服务器 CPU 低于 5%。会不断增加并发 MQTT 客户端的数量，远远超过 240,000，但实验室的负载测试客户端机器用完了。IBM MQ 是嵌入在 WebSphere Message Broker ESB 中的 pub/sub 提供程序，所以我希望它会产生相同的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T13:16:19.150

我不知道有谁对这个数量的连接进行过 mosquitto 的批量测试。我想您可以做的一件事是在您选择的运行时测试 mosquitto 实例，并在系统测试期间将大量客户端线程连接到它。

IBM 使用 WebSphere MQ 作为 MQTT 代理的实施已被证明支持多达 100,000 个并发连接。我相信 IBM 的免费代理 RSMB 仅限于 1024 个连接。

您可能需要考虑如何使用网桥和配置服务扩展您的代理，以确定将新用户连接到哪个代理。

# iphone - 我想像在我的轮播视图中一样查看

> ID：10087403
> 
> 赞同：-1
> 
> 时间：2012-04-10T10:55:40.923
> 
> 标签：iphone, ios, core-animation, core-graphics, icarousel

我想在这个视图中制作一个 UIImage 数组[http://i42.tinypic.com/25z1na0.png](http://i42.tinypic.com/25z1na0.png)

我从 Github 上的 icarousel 代码中获取它们，任何人都可以帮助我提出这个观点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:06:54.630

查看[iCarousel](https://github.com/nicklockwood/iCarousel/tree/master/Examples)。

# .net - 是否可以在单元测试中传递 WebRequest 使用的 Windows/网络凭据来访问本地文件夹而不是远程 FTP？

> ID：10087411
> 
> 赞同：4
> 
> 时间：2012-04-10T10:56:10.007
> 
> 标签：.net, unit-testing, ftp, credentials, webrequest

我有从 FTP 服务器获取文件列表的方法，如下所示：

```
 public List<string> FetchFilesList()
    {
        var request = WebRequest.Create(FtpServerUri);
        request.Method = WebRequestMethods.Ftp.ListDirectory;

        request.Credentials = Credentials;

        using (var response = request.GetResponse())
        {
            var responseStream = response.GetResponseStream();

            using (var reader = new StreamReader(responseStream))
            {
                var fileNamesString = reader.ReadToEnd();
                var fileNames = fileNamesString.Split(
                    Environment.NewLine.ToCharArray(), 
                    StringSplitOptions.RemoveEmptyEntries);

                return fileNames.ToList();
            }
        }
    } 
```

我正在尝试编写 UT，它将访问我的本地目录而不是 FTP。

这是我的UT：

```
// ftpFetcherTestWrapper is thin wrapper to expose properties to UT
// TODO: For some reason providing credentials like this doesn't work :(
// It also doesn't work for DefaultNetworkCredentials
ftpFetcherTestWrapper.CredentialsExposed = CredentialCache.DefaultCredentials;
// As we are using wrapper we substitude FtpServerUri to our fake-local folder
ftpFetcherTestWrapper.ServerUriExposed = new Uri(directoryName);

var filesList = ftpSFetcherTestWrapper.FetchFilesList(); 
```

我收到`System.Net.WebException: "Access to the path 'D:\\SomePathToUnitTestsExecutionFolder\\XmlFiles' is denied."`

问：**是否可以通过 WebRequest 使用的 Windows/网络凭据来访问本地文件夹而不是单元测试中的远程 FTP？**

**[编辑]**

请注意，在提供本地文件路径而不是 ftp 时，我可以测试获取文件内容：

```
public XDocument FetchFile(string fileName)
{
    var client = new WebClient();
    client.Credentials = Credentials;

    var fileUri = new Uri(FtpServerUri, fileName);
    var downloadedXml = client.DownloadString(fileUri);
    return XDocument.Parse(downloadedXml);
} 
```

我也知道我所做的并不是 100% 定义单元测试，但我仍然认为这是一个很好的测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:06:49.420

测试 fetchFilesList() 及其依赖项（对 Webrequest）称为集成测试。我想你想写一个单元测试，即测试 fetchFilesList() 是专门做的。您不想在单元测试中测试 WebRequest。你应该断言它做了它应该做的事情。为此，您需要封装它并模拟它。我会亲自创建一个配置并返回 WebRequest 的 FtpWebRequestFactory。

```
private FtpWebRequestFactory ftpWebRequestFactory;

public FtpFetcher(FtpWebRequestFactory ftpWebRequestFactory) {
    this.ftpWebRequestFactory = ftpWebRequestFactory;
}

public List<string> FetchFilesList()
{
    var request = ftpWebRequestFactory.Create(FtpServerUri);

    using (var response = request.GetResponse())
    {
        var responseStream = response.GetResponseStream();

        using (var reader = new StreamReader(responseStream))
        {
            var fileNamesString = reader.ReadToEnd();
            var fileNames = fileNamesString.Split(
                    Environment.NewLine.ToCharArray(),
                    StringSplitOptions.RemoveEmptyEntries);

            return fileNames.ToList();
        }
    }
} 
```

现在在您的单元测试中，使用模拟框架（如[moq](http://code.google.com/p/moq/)）为 FtpWebRequestFactory 创建模拟。配置mock返回一个mock请求，配置这个mock请求返回一个mock响应。此时，您可以轻松配置响应以返回正确的流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:17:50.467

您可能应该将地址[**方案**](http://msdn.microsoft.com/en-us/library/system.uri.scheme.aspx)（即“文件”）添加到请求中的 Uri。否则，.NET 不知道使用哪个协议来访问资源。而且由于您访问的是本地文件，因此在大多数情况下，您已经获得授权，因此无需设置凭据。请尝试以下代码：

```
 static void Main(string[] args)
    {
        Uri uri = new Uri(@"file:///C:\BuddyBuild\x.xml");
        FetchFilesList(uri);
        Console.ReadLine();
    }

    static List<string> FetchFilesList(Uri uri)
    {
        var request = WebRequest.Create(uri);
        request.Method = WebRequestMethods.Ftp.ListDirectory;
        //request.Credentials = CredentialCache.DefaultCredentials;

        using (var response = request.GetResponse())
        {
            var responseStream = response.GetResponseStream();
            using (var reader = new StreamReader(responseStream))
            {
                var fileNamesString = reader.ReadToEnd();
                var fileNames = fileNamesString.Split(
                    Environment.NewLine.ToCharArray(),
                    StringSplitOptions.RemoveEmptyEntries);

                return fileNames.ToList();
            }
        }
    } 
```

**注意****Main**中的第一行：“file:///path_to_your_file”。

然而，正如**Pierre-Henri指出的那样，这对于****Unit Test**来说看起来并不是一个好的设计。您要测试的“**单元”是哪个？****FtpWebRequest**部分还是您将文件内容拆分为列表的部分？我会将您的 FetchFilesList 方法拆分为 2：

```
 public static List<String> FetchList(Stream stream)
    {
        using (var reader = new StreamReader(stream))
        {
            var fileNamesString = reader.ReadToEnd();
            var fileNames = fileNamesString.Split(
                Environment.NewLine.ToCharArray(),
                StringSplitOptions.RemoveEmptyEntries);

            return fileNames.ToList();
        }
    }

    public static List<string> FetchFilesList2(Uri uri)
    {
        var request = WebRequest.Create(uri);
        request.Method = WebRequestMethods.Ftp.ListDirectory;

        using (var response = request.GetResponse())
        {
            return FetchList(response.GetResponseStream());
        }
    } 
```

这样，您可以分别对 2 方法进行单元测试。尤其是，您可以使用您喜欢的任何**Stream**对象（FileStream、MemoryStream、来自 WebResponse 的 Stream...）来测试**FetchList(Stream stream )。**

 ****编辑**：抱歉，我没有意识到您正在尝试通过将 URI 设置为本地目录来列出（本地）目录中的文件。我认为使用 WebRequest/Response 类族不可能做到这一点。将 URI 参数设置为本地路径后，WebRequest.Create 调用返回一个**FileWebRequest**对象，该对象在内部使用[**FileWebStream**](http://reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/fx/src/Net/System/Net/filewebrequest@cs/1305376/filewebrequest@cs)访问本地文件。**FileWebStream**继承**[FileStream](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)**，并且不能用于目录。顺便说一句，如果将 URI 参数设置为 FTP 地址，则 WebRequest.Create 调用将返回 FtpWebRequest 对象。这也是我认为这不是一个好的单元测试的原因之一:)。也许您可以尝试扩展 FileWebRequest（FtpWebRequest 是密封的）来处理目录列表请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:23:09.837

共享该文件夹然后像网络路径一样访问它呢？即 \\my-pc-name\the-folder？

google了一下：[http ://www.velocityreviews.com/forums/t78357-webrequest-and-shared-files.html](http://www.velocityreviews.com/forums/t78357-webrequest-and-shared-files.html)

```
WebRequest request = WebRequest.Create("http://localhost/tempasp/temp/trace.txt" );
request.PreAuthenticate = true;
request.Credentials = new NetworkCredential("user", "pass", "domain" );

WebResponse response = request.GetResponse();
StreamReader reader = new StreamReader( response.GetResponseStream() );

string line = String.Empty;
while ( ( line = reader.ReadLine() ) != null )
{
    Response.Write( line );
    Response.Write( "<BR>" );
}
reader.Close();
response.Close(); 
```

这对你有用吗？**

# sql - 提高性能 union all+group by+order by+count

> ID：10087413
> 
> 赞同：0
> 
> 时间：2012-04-10T10:56:31.437
> 
> 标签：sql, group-by, sql-order-by, union-all

我有一张桌子：物品（ID，描述）。在我的程序中，我得到一个单词列表（word1 到 wordN）作为输入，我需要计算这些单词中有多少出现在表中的每个描述中，并根据该数字对结果进行排序。这是我的解决方案，但我欢迎有关如何提高性能的建议。谢谢。

```
SELECT x, COUNT(*) 
FROM (SELECT description as x, id FROM items where description LIKE '%word1%'
      UNION ALL
      SELECT description as x, id FROM items where description LIKE '%word2%'
      UNION ALL
       ...
      UNION ALL
      SELECT description as x, id FROM items where description LIKE '%wordN%')
GROUP BY (id)
ORDER BY COUNT(*) DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:12:05.947

如果您查看执行计划，您可能会看到对您联合在一起的每个 SELECT 进行单独的表扫描。当您使用该术语的通配符前缀进行搜索时，这意味着该查询是不可搜索的 - 因此即使描述列上有索引，它也无法使用它，因此会进行扫描。

通过将条件组合为一个，您可以将其缩小为只扫描一次表，而不是 n 次：

```
SELECT description as x, id 
FROM items 
WHERE description LIKE '%word1%'
    OR description LIKE '%word2%'
    OR description LIKE '%wordn%' 
```

运行它现在应该向您展示一个带有单个表扫描的执行计划，因此它在一次扫描中完成所有匹配。

但是，您的原始查询略有不同，因为它似乎根据项目匹配的这些术语的数量对结果进行排名。因此，出于性能和功能的原因，可能值得研究[全文搜索。](http://msdn.microsoft.com/en-us/library/ms142571%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:06:46.257

```
SELECT x, COUNT(*) 
FROM (SELECT description as x, id FROM items where description LIKE '%word1%' 
       or description LIKE '%word2%'
       or description LIKE '%wordN%')
GROUP BY (id)
ORDER BY COUNT(*) DESC 
```

这个应该更好...

# entity-framework - 实体框架和 ASP.NET 动态数据上的自定义插入/更新

> ID：10087414
> 
> 赞同：1
> 
> 时间：2012-04-10T10:56:33.420
> 
> 标签：entity-framework, insert-update, asp.net-dynamic-data

我需要使用 ASP.NET 动态数据和实体框架为 CRUD 应用程序上的实体自定义插入/更新方法。[我在http://extremedev.blogspot.com.es/2011/03/custom-insertupdate-on-linqtosql-and.html](http://extremedev.blogspot.com.es/2011/03/custom-insertupdate-on-linqtosql-and.html)上找到了使用 Linq To SQL 的应用程序的解决方案。自定义是为了添加一些业务逻辑。

我没有找到任何方法来重载 EF 或类似的东西，有什么建议吗？是否可以不使用触发器或修改模板页面中表单上的 ItemInserted 或 ItemUpdated 方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:45:48.893

您上面引用的方法很好，我看到的另一种方法是：

您可以覆盖数据上下文的 SubmitChanges 方法并检查更改集并捕获每个对象和每个更改类型（插入、更新、删除）

```
public override void SubmitChanges(System.Data.Linq.ConflictMode failureMode)
{
    ChangeSet changeset = GetChangeSet();

    foreach (var f in changeset.Inserts.OfType<Foo>())
    {
        DoSomethingSpecial(f);
    }

    private void DoSomethingSpecial(Foo instance)
    {
    ... // do something with another datacontext instance
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T13:13:50.673

尝试下一个链接。我认为这就是你需要的 [http://csharpbits.notaclue.net/2008/05/dynamicdata-automatic-column-update.html](http://csharpbits.notaclue.net/2008/05/dynamicdata-automatic-column-update.html)

# regex - 替换某些列之间的所有不匹配字符

> ID：10087415
> 
> 赞同：3
> 
> 时间：2012-04-10T10:56:34.450
> 
> 标签：regex, search, vim, pattern-matching, substitution

我正在尝试在某些列之间的单行中替换所有**不匹配的字符（搜索后）。**

***示例***：
搜索可以是所有内容
在下面的示例中搜索 =`test`
不匹配字符的替换字符：空格。

我想在第*10 列和第 30 列之间*`test`替换所有不属于 " "的字符。 第 10 列和第 30 列用 *`|`*

 *```
before:  djd<aj.testjal.kjetestjaja testlala ratesttsuvtesta !<-a-
                  |                   |   
after:   djd<aj.test       test     testlala ratesttsuvtesta !<-a- 
```

我怎么能意识到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:43:32.360

在该行上使用以下替换命令。

```
:s/\(test\)\zs\|\%>9v\%<31v./\=submatch(1)!=''?'':' '/g 
```

如果使用视觉选择指定列的范围，请运行

```
:'<,'>s/\(test\)\zs\|\%V./\=submatch(1)!=''?'':' '/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:02:09.553

一种方法可能是使用可视模式 (control+v) 选择适当的列范围

选择后，可以使用（[请参阅此问题](https://stackoverflow.com/questions/773137/find-and-replace-within-selection-in-vi)）进行搜索和替换

```
 %s/\%Vfoo/bar/g 
```

可以在此处找到不测试的正则表达式：[正则表达式匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)*

# java - Spring 注入和全局初始化对象

> ID：10087420
> 
> 赞同：0
> 
> 时间：2012-04-10T10:57:10.170
> 
> 标签：java, spring, dependency-injection

我有一个弹簧注入服务

```
 class A{
      List l = new ArrayList();

      public m1(){
           //do some additions in list 
      }

      public m2(){
           //do some new additions in list
      }
 } 
```

现在因为创建 , 的对象`A`是在 spring 的手中，所以程序的行为不是预期的。（我希望列表始终为空，但由于某些有线原因没有被方法初始化）

Spring 将始终只创建一个实例`A`，因此该列表`l`将继续增长，我已在应用程序上下文中将 bean 配置为单例。

如果是，自然我必须初始化函数内的列表`m1`&`m2`或被调用者必须超过引用，在我的情况下，被调用者是 struts2 动作，它们不是单例的，所以这个问题可以解决吗？

或者

spring 是否在配置中提供任何支持以在每次调用或其他情况下初始化成员变量？

更一般地说，在编写 Spring 注入的服务时，关于使用成员变量/局部变量来提高性能和效率的最佳实践是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:23:26.160

试图回答以下问题：spring 是否在配置中提供任何支持以在每次调用或其他时初始化成员变量？

默认情况下，Spring bean 是单例的。仅初始化一次并一次又一次地使用相同的对象。

但是，如果要求按照您的要求更改。您需要了解 Spring 提供的范围属性。

```
<bean id="id" class="com.test.TP" scope="prototype">
</bean> 
```

详细了解请参考以下内容。范围说明

*   单身人士

    将单个 bean 定义限定为每个 Spring IoC 容器的单个对象实例。

*   原型

    将单个 bean 定义限定为任意数量的对象实例。

*   要求

    将单个 bean 定义限定为单个 HTTP 请求的生命周期；也就是说，每个 HTTP 请求都将有自己的 bean 实例，该实例是在单个 bean 定义的后面创建的。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

*   会议

    将单个 bean 定义限定为 HTTP 会话的生命周期。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

*   全球会议

    将单个 bean 定义限定为全局 HTTP 会话的生命周期。通常仅在 Portlet 上下文中使用时才有效。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

[http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html)

也可以有用户定义的范围，例如线程范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:05:45.240

**您可以按如下方式配置您的 bean：-**

```
<bean id = "serviceBeanA" class = "somepkg.A" scope="prototype">
    <property name = "l">
        <value>
            <list>
                 <value>ABC</value>
                 .....
            </list>
        </value>
    </property>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:47:00.763

我不确定我是否理解这个问题，但你的示例类应该可以在 spring 中正常工作。除非您在配置文件中传入构造函数参数，否则 Spring 将调用默认构造函数。只要您`id="..."`在 bean 中有一个，那么它将创建该类的单例。然后，第一个调用的类`a.m1()`将`l`被视为一个空列表。

可能发生的情况是您有多个`A`正在创建的实例。请参阅此处了解[Spring 单例与非](http://static.springsource.org/spring/docs/1.2.x/reference/beans.html#beans-factory-modes). 去引用：

> bean 被定义为以两种模式之一部署：单例或非单例。（后者也被称为原型，尽管该术语使用松散，因为它不太合适）。当 bean 是单例时，将只管理 bean 的一个共享实例，并且所有对具有 id 或 id 与该 bean 定义匹配的 bean 的请求将导致返回一个特定的 bean 实例。

因此，如果您的 Spring 配置中没有`id`or`name`指定，那么您可能会得到多个`A`created 实例。

> bean 部署的非单例原型模式导致每次完成对该特定 bean 的请求时都会创建一个新的 bean 实例。这是理想的情况，例如每个用户需要一个独立的用户对象或类似的东西。

# java - 获取 JUnitCore 的 RunNotifier

> ID：10087422
> 
> 赞同：2
> 
> 时间：2012-04-10T10:57:44.997
> 
> 标签：java, junit

我想调用 JUnitCore 的 RunNotifier。它称为 fNotifier，在 JUnitCore 类中启动。来源：

[https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/runner/JUnitCore.java](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/runner/JUnitCore.java)

我能以某种方式通过反射得到这个吗，或者有没有其他方法可以调用这个 RunNotifier。

我想用他的`pleaseStop()`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:54:31.917

使用反射不是最好的方法，但你可以这样做：

```
public static void main(String[] args) throws Exception {
    Computer computer = new Computer();

    JUnitCore jUnitCore = new JUnitCore();
    Field field = JUnitCore.class.getDeclaredField("fNotifier");
    field.setAccessible(true);
    RunNotifier runNotifier = (RunNotifier) field.get(jUnitCore);
    runNotifier.pleaseStop();
    jUnitCore.run(computer, BeforeAfterTest.class, AssertionErrorTest.class);
} 
```

这将抛出[org.junit.runner.notification.StoppedByUserException](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/runner/notification/StoppedByUserException.java)。

如果您想要更多的灵活性或控制，执行上述操作的更好方法是将您想要的位从 JUnitCore 复制到您的类中，然后您可以直接控制通知器和侦听器等。这是最好的方法来做到这一点。JUnitCore 并没有真正设计为扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-18T08:12:26.507

使用 JUnit 4.1.2，字段名称已更改为 'notifier ：

```
 Field field = JUnitCore.class.getDeclaredField("notifier"); 
```

# c# - 如何动态检查复选框？

> ID：10087423
> 
> 赞同：0
> 
> 时间：2012-04-10T10:58:17.233
> 
> 标签：c#, wpf, xaml, checkbox

我正在动态生成 CheckBoxes，我想根据应该选择的选项来检查它们。

我有以下 XAML：

```
 <StackPanel>
            <StackPanel x:Name="ArmingPanel" />
        </StackPanel> 
```

以及以下代码：

```
 private void AddCheckBoxes(OptionsVM options)
    {
        var converter = new FlagsEnumValueConverter();
        foreach (Arming arming in Enum.GetValues(typeof(Arming)))
        {
            if (arming != Arming.None)
            {

                var binding = new Binding()
                {
                    Path = new PropertyPath("Arming"),
                    Converter = converter,                        
                    ConverterParameter = arming
                };

                var checkBox = new CheckBox()
                                   {
                                       Content = arming.ToString(),
                                       IsChecked = (options.Options.Arming & arming) != Arming.None
                                   };

                checkBox.SetBinding(CheckBox.IsCheckedProperty, binding);
                ArmingPanel.Children.Add(checkBox);
            }
        }
    } 
```

根据已设置的标志，应将以下内容设置为`true`或`false`：

```
IsChecked = (options.Options.Arming & arming) != Arming.None 
```

我可以在调试时看到这个值设置正确，但是当复选框列在屏幕上时，它们总是未选中。

我怎样才能让它们按预期进行检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:09:56.847

在调用您的`CheckBox`构造函数时，您设置了复选框`IsChecked`，它设置`IsCheckedProperty`了复选框。然后，您`IsCheckedProperty`使用 a 再次设置`Binding`，因此第一个设置被覆盖。

我怀疑您的问题`Converter`出`ConverterParameter`在 Binding 中

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T11:08:16.643

**编辑：**这不是对 OP 问题的回答，但我觉得值得一提。

看来您正在检查枚举标志，正确的布尔表达式是：

`(options.Options.Arming & arming) == arming`

如果此表达式返回`true`，则`options.Options.Arming`包含存储在`arming`

`enum Arming`正确定义您的成员也很重要！

# java - jcifs.smb.SmbException：找不到网络名称

> ID：10087424
> 
> 赞同：3
> 
> 时间：2012-04-10T10:58:27.920
> 
> 标签：java, web-applications, smb

以下是我的一段代码

```
SmbFile catalExp = new SmbFile("smb://<Shared machine name>/Project share/Home/4\.  Folders/planning - Design & Exec/sample.txt",
                    new NtlmPasswordAuthentication(LoadProp.getShrdDomain(),"user","paswd")); 
```

在这我得到了错误

```
jcifs.smb.SmbException: The network name cannot be found
    at jcifs.smb.SmbTransport.send(SmbTransport.java:753)
    at jcifs.smb.SmbSession.sessionSetup(SmbSession.java:140)
    at jcifs.smb.SmbSession.send(SmbSession.java:103)
    at jcifs.smb.SmbTree.treeConnect(SmbTree.java:132)
    at jcifs.smb.SmbFile.connect(SmbFile.java:674)
    at jcifs.smb.SmbFile.connect0(SmbFile.java:644)
    at jcifs.smb.SmbFile.open0(SmbFile.java:700)
    at jcifs.smb.SmbFile.createNewFile(SmbFile.java:2027) 
```

这与该特定共享文件夹的用户权限有关还是我做错了什么请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-26T05:07:12.770

我遇到了这个错误信息，原来问题是我的网络路径不正确。您需要确保`NtlmPasswordAuthentication`对象配置正确，网络路径正确，并且您已正确设置 jcifs.netbios.wins 属性，如[本页第](http://jcifs.samba.org/src/docs/api/)一个示例所示。

例如，要加载远程属性文件：

```
final NtlmPasswordAuthentication AUTH = new NtlmPasswordAuthentication("domainname", "username", "password");

Config.setProperty("jcifs.netbios.wins", "10.10.1.1");

Properties props = new Properties();
InputStream in = new SmbFileInputStream(new SmbFile("smb://10.10.1.1:445/rootfolder/path/filename.properties", AUTH));
props.load(in); 
```

（您需要添加 try/catch 和输入流关闭）

确保所有参数正确的一个好方法是使用 smb/cifs 客户端测试登录和定位文件。例如 linux/unix 上的 smbclient：

```
smbclient -Uusername -p 139 //10.10.1.1/rootfolder 
```

当您使用 smbclient 登录时，域会显示在顶部：

```
Domain=[DOMAINNAME] 
```

..您可以导航到您的文件以确保您的路径正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-08T06:50:46.967

在遇到这个问题将近 1 天后，我意识到这些异常毫无意义

*   我只是给出了错误的服务器端位置路径

下面是为我工作的 groovy 代码的平静

```
 String domain = "domain"
        String user = "username"
        String pass = "password"
        String IP = "xx.yy.zz.aa"
        String sharedFolder="//my//path//to//server//";

    String path="smb://$IP"+sharedFolder+"test.txt";
    NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(domain, user, pass );
    SmbFile smbFile = new SmbFile(path,auth);
    SmbFileOutputStream smbfos = new SmbFileOutputStream(smbFile);
    smbfos.write("testing....and writing to a file".getBytes());
    System.out.println("completed ...nice !"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T15:17:37.347

我遇到了这个问题，结果我没有看到映射到我的 Windows 共享驱动器的共享名称是什么......所以，使用 Mac OS，我运行：

`smbutil view smb://MYUSERNAME@HOSTNAME`

在提示我输入密码后，我看到了一个共享名称列表（当我使用 Windows 查看这些内容时，这并不明显）。一旦我找到我的共享名称，它就像在连接 JCIFS 时使用它一样简单：

`new SmbFile("smb://HOSTNAME/SHARENAME/path/I/was/trying/to/access", auth);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T09:38:14.107

好吧，我也收到此错误，但仅在一台设备上，我在 Android 4.04 上运行的代码是

```
 String strprog = "STRING CREATED| "; //debug log string
    try {
        strprog += "NTLM| ";
        NtlmPasswordAuthentication auth =  new NtlmPasswordAuthentication("username:password");
        strprog += "SMB| ";
        SmbFile file = new SmbFile("smb://<pcname>/foldername/filename.txt",auth);

        strprog += "EXIST| ";
        String there = String.valueOf(file.exists());

        strprog += "View| ";
        TextView pp;
        pp = (TextView) findViewById(R.id.tv);
        pp.setText(there);

    } catch (Exception e) {
        // TODO Auto-generated catch block
        strprog += "ERROR! ";
        TextView ll;
        ll = (TextView) findViewById(R.id.tv);

        ll.setText(strprog + e.getStackTrace().toString() + "    " +  e.getMessage() + "   " + e.getLocalizedMessage() );
    } 
```

我看到的唯一区别是您`NtlmPasswordAuth`与我的比较。`param`但是正如我所说的那样，当我深入了解 smb://host 时，这会在 Andriod 2.0 上引发空输入，但我希望这对您有所帮助。

# iphone - 如何通过在 imageView 上调用 touchEvent 来获取 UIimageView 中图像的像素？

> ID：10087425
> 
> 赞同：1
> 
> 时间：2012-04-10T10:58:35.663
> 
> 标签：iphone, objective-c, uiimageview, touch-event, getpixel

我想在 imageView 上调用 touchEvent。在触摸 imageView 时，我想获取 Image 的像素。我正在使用这个：-

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [[event allTouches] anyObject];
[sampleImage setBackgroundColor:[UIColor redColor]];
//CGPoint location = [touch locationInView:self.view];
if ([touch view] == sampleImage) 
{

    url1 = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/Na.wav", [[NSBundle mainBundle] resourcePath]]];
    [sampleImage setBackgroundColor:[UIColor colorWithRed:10.0/255.0 green:10.0/255.0 blue:10.0/255.0 alpha:1.0]];
}
NSError *error;
audio = [[AVAudioPlayer alloc] initWithContentsOfURL:url1 error:&error];
audio.numberOfLoops = 0;
[audio play];
[sampleImage setBackgroundColor:[UIColor redColor]];   
} 
```

有可能吗？如果是，请帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:13:04.553

您应该在您的图像视图中添加一个手势识别器，并让代理为您处理播放的声音。

在您的 viewDidLoad 中，您实现了以下内容：

```
UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapGesture:)];
    tap.numberOfTapsRequired = 1;
    [YourImageView addGestureRecognizer:tap];
    [tap release]; 
```

在您的代码中，您可以将委托和声音播放如下：

```
- (void)tapGesture:(UIGestureRecognizer*)sender {
NSString *path = [[NSBundle mainBundle] pathForResource:@"YourSound" ofType:@"mp3"];

    AVAudioPlayer * theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate = self;
    [theAudio play];
    [theAudio release];
} 
```

给你！

编辑：

* * *

要将上述选项与 touchesMoved 一起使用，请执行以下操作：

```
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *) event {
        UITouch *touch = [[event allTouches] anyObject];
            CGPoint location = [touch locationInView:self.view];
        if ([touch view] == YourImageView) {
        //play the sound
        NSString *path = [[NSBundle mainBundle] pathForResource:@"YourSound" ofType:@"mp3"];

            AVAudioPlayer * theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
            theAudio.delegate = self;
            [theAudio play];
            [theAudio release];

        }
    } 
```

你去吧:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:02:44.350

您可以使用`UITapGestureRecognizer`并且可以设置`target`为您的`imageview`：

![在此处输入图像描述](../Images/9eaa79d678dd3d1314b49fc96ed2ca09.png)

# javascript - 如何在 javascript 中为 Facebook.ui 提供 html 标签？

> ID：10087427
> 
> 赞同：1
> 
> 时间：2012-04-10T10:58:38.097
> 
> 标签：javascript, html, jspx

我正在使用 facebook ui 的发送方法，它包含一个描述参数，我在其中编写特定消息。我需要将一个特定文本显示为黑色、粗体、普通字体。

代码就像， $('#send').click(function () {

```
 FB.ui({
                                    method: 'apprequests',
                                    message: "FaceBook Friends"
                                },Api); 

            });

            function Api(responses) 
            {      
                var eventName = document.getElementById("eventName").value;

                 var Message ="You have been invited for an event &lt;html&gt;&lt;body&gt;&lt;font color=\"black\"&gt;" + eventName +  "&lt;/           font&gt;&lt;/body&gt;&lt;/html&gt; " ;     //to give black font to eventName
                //var varMessage ='You have been invited for an event  <html><body><font color="black"><b>' +eventName+ '</b></font></body></html>' ;   

               FB.ui
                ({
                    method: 'send',
                    to: responses.to,
                    name: document.getElementById("eventName").value,
                    link : 'www.google.com', 
                        description: Message

                }); 
```

现在它也将html标签作为文本。可以显示吗？欢迎您的想法。

# iphone - 防止应用程序缓存在 iOS 上提取文件

> ID：10087428
> 
> 赞同：0
> 
> 时间：2012-04-10T10:58:38.283
> 
> 标签：iphone, ios, ipad, data-protection

我有一个 iOS 应用程序，它将所有下载`*.pdf`的文件存储在其缓存中。有没有办法防止这些数据被提取？加密还是其他？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:22:18.537

加密文件的方法有很多，我相信每个人都会对最好的方法有意见。

在我最近从事的一个项目中，我们一直在使用 CommonCrypto (https://github.com/AlanQuatermain/aqtoolkit)。只需获取任何 NSData，对其进行加密，然后将其保存到文件中，反之亦然。你甚至可以通过继承 NSValueTransformer 来编写一个简单的 Transformer，它将所有的加密抽象到一个地方，你再也不用担心它了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:49:37.547

您可以使用密码保护 PDF 文件。我假设您不是在应用程序内而是在外部创建 PDF 文件。例如，您可以在 Mac OS X 中使用*Preview.app*使用密码保护现有 PDF 文件*（点击 Cmd-P，然后在打印菜单中选择 PDF，您可以在其中设置安全选项。或者更简单：在菜单中选择出口...）*。

在 iOS 中，您可以像这样打开 PDF 文件：

```
CGPDFDocumentRef documentRef = CGPDFDocumentCreateWithURL((__bridge CFURLRef)[NSURL fileURLWithPath:filePath]);
if (!CGPDFDocumentIsUnlocked(documentRef))
    CGPDFDocumentUnlockWithPassword(documentRef, password);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T00:31:22.327

实际上有 2 个 Documents 文件夹，您的应用可以在其中存储内容。一个可以提取，一个是私有的。检查此票证中接受的答案。

[访问通过 iTunes 传输的“私人文档”文件夹中的文件](https://stackoverflow.com/questions/3917573/access-files-in-private-documents-folder-transferred-with-itunes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T20:22:04.880

假设您希望在越狱设备上提取 PDF 文件，最直接的方法将遵循以下几行：

*   在应用程序首次启动期间生成随机字符串
*   将随机字符串保存`NSUserDefaults`在您自己应用程序沙箱内的状态文件中
*   使用这个随机字符串创建一个使用确定性但难以计算的算法的密钥
*   使用此密钥，您不会将其存储在任何地方，但始终按需生成，使用 AES 或类似的东西对称地加密您的缓冲区

您可能会发现[这里](http://dotmac.rationalmind.net/2009/02/aes-interoperability-between-net-and-iphone/)的源代码很有帮助。

# javascript - 在 Google Contacts API 3.0 版上使用 oauth2 检索刷新令牌

> ID：10087429
> 
> 赞同：2
> 
> 时间：2012-04-10T10:58:43.377
> 
> 标签：javascript, node.js, google-api, oauth-2.0, google-contacts-api

我正在使用 oauth2（node.js 和[connect-oauth](https://github.com/ciaranj/connect-auth)库）连接到[google 联系人 API 版本 3.0](https://developers.google.com/google-apps/contacts/v3/)。

这样做，我得到如下响应：

```
{ access_token : "...",
"token_typen": "Bearer",
"expires_in" : 3600,
"id_token": "..." } 
```

一旦后者过期，我就错过了用于获取新访问令牌的刷新令牌。

oauth2 的选项

```
{ host: 'accounts.google.com',
  port: 443,
  path: '/o/oauth2/token',
  method: 'POST',
  headers: 
   { 'Content-Type': 'application/x-www-form-urlencoded',
     Host: 'accounts.google.com',
     'Content-Length': 247 } } 
```

post-body 'redirect_uri=http%3A%2F%2Flocalhost%2Foauth2callback&grant_type=authorization_code&client_id=CLIENTID&client_secret=CLIENTSECRET&type=web_server&code=4%2F3gbiESZTEOjiyFPLUhKfE_a_jr8Q'

注意：我尝试将来自[类似问题](https://stackoverflow.com/questions/8942340/get-refresh-token-google-api)的approval_prompt=force 添加到request-post_body 但这导致错误

```
{ statusCode: 400, data: '{\n  "error" : "invalid_request"\n}' } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:19:26.687

> 注意：我尝试将来自类似问题的approval_prompt=force 添加到request-post_body 但这导致错误

`approval_prompt`当您要求令牌时，您不需要参数。*approval_prompt* 参数用于授权部分。

* * *

> 我错过了刷新令牌...

您不会获得 *refresh_token* 的唯一方法是：

*   使用[客户端应用程序](https://developers.google.com/accounts/docs/OAuth2#clientside)流程；

*   在授权码请求中包含[access_type=online 参数。](https://developers.google.com/accounts/docs/OAuth2WebServer#formingtheurl)

因此，请尝试`access_type=offline`在授权码请求中添加: , 。

**编辑**：

IE：

```
https://accounts.google.com/o/oauth2/auth?client_id=**your_client_id**&scope=https://www.googleapis.com/auth/plus.me&redirect_uri=http://localhost&response_type=code&access_type=offline 
```

如果你得到`400`是因为你添加了一个无效的参数或缺少一个。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T20:18:15.627

有一次我这样做是为了测试——我已经从应用程序中删除了谷歌授权令牌——所以它试图获得另一个，但它没有刷新令牌。

因此，请检查您正在测试的应用程序是否未经您正在测试的帐户授权（这有意义吗？）

# c - 客户端服务器 tcp/ip 聊天室应用

> ID：10087432
> 
> 赞同：1
> 
> 时间：2012-04-10T10:58:46.663
> 
> 标签：c, multithreading, sockets, client, chatroom

我已将连接到我的服务器的客户端的所有端口号存储在链接列表中。想要向连接到服务器的所有客户端发送消息。所以client1向服务器发送消息，服务器将此消息发送给所有其他连接的客户端，但是我应该如何在我存储所有客户端.ports的send（）中传递链表.....（我使用过TCP/IP，穿线）

```
#include <stdio.h>

#include <stdlib.h>

#include <string.h>

#include <unistd.h>

#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <pthread.h>
#define MYPORT 2012

#define BACKLOG 10

void *Myfunction(void *arg);

struct NODE 
{
int port;
struct NODE *next;
};

void insert(struct NODE *list, int new_fd);
void display(struct NODE *list);
struct NODE *list;

int new_fd;
int n;
    //int i,port[10],*ptr;
char buffer[4096];
//char msg[] ="a";
int main()
{
struct sockaddr_in serv_addr,cli_addr;
int sockfd;
int cli_len,n;

list = (struct NODE *)malloc(sizeof(struct NODE));
list->port = 0 ;
list->next = NULL;

pthread_t thr;

//==============socket creating==================================//
sockfd = socket(AF_INET, SOCK_STREAM, 0);
if(sockfd == -1)
{
    printf("server- socket() err");
    exit(1);
}
else
    printf("server-socket....... created\n");

bzero((char *) &serv_addr, sizeof(serv_addr));
//====================set info=====================================//
serv_addr.sin_family = AF_INET;
serv_addr.sin_port = htons(MYPORT);
serv_addr.sin_addr.s_addr= INADDR_ANY;

//======================bind=======================================//
if (bind(sockfd, (struct sockaddr *)&serv_addr, sizeof(struct sockaddr)) == -1)
{
    printf("server-bind failed");
    exit(1);
}
else
    printf("server-socket bind....... done\n");

//=================listen=====================//
if(listen(sockfd, BACKLOG) == -1)
{
  printf("listen error ");
  exit(1);
}
else
  printf("server-listening....... start\n");

//=============client addr=================//
cli_len = sizeof(cli_addr);
    //printf("%d\n",cli_len);

while(1)
{
new_fd = accept(sockfd, (struct sockaddr *)&cli_addr, &cli_len);
                                        insert(list, new_fd);
                                        display(list);
    /*port[i]=new_fd;
    i++;
    ptr=&port[i];*/

pthread_create( &thr ,NULL ,Myfunction ,(void *) list);
    //printf("client joined is %s \n",inet_ntoa(cli_addr.sin_addr.s_addr));
printf("client joined port %d \n",cli_addr.sin_port);

}
    pthread_join(thr, NULL);

return 0;
}

void *Myfunction(void *Arg)
{
int size;
int Client = (int)Arg;
while(1)
{

    bzero(buffer,4096);
//size=recv(Client, buffer , sizeof(buffer) , 0);
//buffer[size] = '\0';
//printf("%s\n" , buffer);

    n = read(new_fd,buffer,4096);
//scanf("%s", (char *) &msg);
//send(Client,buffer,sizeof(buffer),0);
    printf("new message: %s\n",buffer);

    //printf("process id: %d\n", getpid());
    //printf("thread id: %u\n", (unsigned int)pthread_self());

    //fgets(buffer,4096,stdin);
    n = write(new_fd,buffer,strlen(buffer));
    if (n < 0) error("ERROR writing to socket");

}
    close(new_fd);
}

void insert(struct NODE *list, int new_fd) 
{
                                         while(list->next != NULL)
list = list->next;

                                         list->next = (struct NODE *)malloc(sizeof(struct NODE));
                                         list->next->port = new_fd;
                                         list->next->next = NULL;
}

void display(struct NODE *list){
while(list->next != NULL) 
{
printf("%d \n", list->port);
list = list->next;
}

printf("%d\n", list->port);} 
```

和客户端代码___>>>

```
#include <stdio.h>
#include <stdlib.h>     
#include <string.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>

#define DEST_PORT 2012

int main()
{
int sockfd,n;
struct sockaddr_in serv_addr;
struct hostent *server;
char buffer[4096];
//char msg[] ="a";
int size;

const char *host= "EICPU3138";

sockfd = socket(AF_INET, SOCK_STREAM, 0);
printf("Client-socket() is OK...\n");
server = (struct hostent *)gethostbyname(host);

bzero((char *) &serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
serv_addr.sin_port = htons(DEST_PORT);

if(connect(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) == -1)
{
  printf("Client-connect() error ");
  exit(1);
}
else
  printf("Client-connect() is OK...\n"); 

while(1)
{
    printf(" enter  message: ");

        bzero(buffer,4096);
        fgets(buffer,4096,stdin);

        n = write(sockfd,buffer,strlen(buffer));
            if (n < 0) 
            printf("ERROR writing to socket");
            bzero(buffer,256);
        //Get msg
                 /* scanf("%s", (char *) &msg);
                  //Sending message to server
    send(sockfd,buffer,sizeof(buffer),0);

    size=recv(sockfd , buffer , sizeof(buffer) , 0);
    buffer[size] = '\0';
    printf("%s\n" , buffer);*/

        n = read(sockfd,buffer,4096);
            if (n < 0) 
            error("ERROR reading from socket");
            printf("%s\n",buffer);
}
    //close(sockfd);
printf("client out\n");

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:10:42.660

你没有，你自己迭代列表并发送到每个套接字。

# ajax - 删除/更新/创建后返回成功消息

> ID：10087436
> 
> 赞同：0
> 
> 时间：2012-04-10T10:58:59.123
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3

这是我的`GesAgence`页面操作：

```
 public ActionResult GesAgence()
    {
        var test = new Models.J2VEntities();
        return View(test.agence);
    } 
```

这是我的行动`Deleting`：

```
 public ActionResult DeleteAg(string id)
    {
        Models.J2VEntities entity = new Models.J2VEntities();

        Models.agence model = (from p in entity.agence
                               where p.Idag == id
                               select p).SingleOrDefault();

        //Sauvgarde ds la BD
        entity.agence.DeleteObject(model);
        entity.SaveChanges();
        return View("gesAgence");
    } 
```

所以我想知道删除后如何返回成功消息（我尝试使用 TempData 但没有成功，因为我`gesAgence`必须返回模型不是`TempData`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:06:26.107

您可以将成功设置为 ViewBag

```
 public ActionResult DeleteAg(string id)
    {
        Models.J2VEntities entity = new Models.J2VEntities();

        Models.agence model = (from p in entity.agence
                               where p.Idag == id
                               select p).SingleOrDefault();

        //Sauvgarde ds la BD
        entity.agence.DeleteObject(model);
        entity.SaveChanges();

        ViewData["Success"] = true;

        return View("gesAgence");
    } 
```

在视野中

```
@if(ViewData["Success"] != null && (bool)ViewData["Success"]){
    <script>alert("Sucess!");</script>
} 
```

这是我的观点：

```
 <% if(ViewData != null && ViewData["Success"] != null && (bool)ViewData["Success"]){ %>
    <script type="text/javascript"> alert("Sucess!");</script>
<% } %>
      <div class="clear">
              &nbsp;
            </div>
            <div id="main">
            <h1> Demande preinscrit</h1>
            <ul class="listing">
    <% foreach (var item in Model) { %>
                <li>
               <div class="listinfo">
                    <h3>
                      <%: Html.DisplayFor(modelItem => item.Nomag) %>
                    </h3>
                    <p>
                      <%: Html.DisplayFor(modelItem => item.Idag) %>
                    </p>
                    <span class="price"> <%: Html.DisplayFor(modelItem => item.Adrag) %> <%: Html.DisplayFor(modelItem => item.Vilag) %> <%: Html.DisplayFor(modelItem => item.Gov) %></span> <span class="media">Tel : <%: Html.DisplayFor(modelItem => item.Telag) %> |</span> <%: Html.DisplayFor(modelItem => item.Mailag) %>
                  </div>
                  <div class="listingbtns">
                    <span class="listbuttons"><%: Html.ActionLink("Bloque", "Bloque", new {id= item.Idag}) %> </span>
                    <span class="listbuttons"><%: Html.ActionLink("Supprime", "DeleteAg", new { id = item.Idag })%></span>
                  </div>
                  <div class="clear">
                    &nbsp;
                  </div>
                </li>
    <% } %> 
```

我收到了这个错误：`System.NullReferenceException: Object reference not set to an instance of an object`在这条线上`<% foreach (var item in Model) { %>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:10:52.700

您可以使用 Ajax 从您的视图页面调用您的控制器并弹出消息，无论您的控制器返回什么，尝试这样的事情。

**在您的视图页面上编写脚本。**

```
function onDeleteAg (id) {
        var answer = confirm("Are you sure you want to delete AG ?")
        if (answer) {
            $.ajax(
                {
                    type: "Get",
                    url: '<%= Url.Action("DeleteAg","YourControllerName") %>',
                    data: { agId: id },
                    success: function (data) {                        
                        //HERE--data is the message you that your controller DeleteAg method will return after it's called. you need to do something here to display this message(data) anywhere you want to . something like below. 
                         alert(data);                          

                    },
                    error: (function () { alert("Error! Ag was not deleted." ); })
                });
        }
    }; 
```

**控制器上的方法。**

```
public string DeleteAg(string agId)
    {
       try{

        Models.J2VEntities entity = new Models.J2VEntities();

        Models.agence model = (from p in entity.agence
                               where p.Idag == id
                               select p).SingleOrDefault();

        //Sauvgarde ds la BD
        entity.agence.DeleteObject(model);
        entity.SaveChanges();
}
       catch(Exception ex)
        {
          return "AG has not been deleted successfully;
        }

        return "AG has been deleted successfully;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:02:42.143

您可以通过 ajax 调用此方法并返回**JsonResult**而不是**ActionResult**，通过查看结果您可以向用户显示消息。

```
public JsonResult DeleteAg(string id)
{
    Models.J2VEntities entity = new Models.J2VEntities();

    Models.agence model = (from p in entity.agence
                           where p.Idag == id
                           select p).SingleOrDefault();

    //Sauvgarde ds la BD
    entity.agence.DeleteObject(model);
    entity.SaveChanges();
    var json = new
            {
                success = true
            };
    return Json(json);
} 
```

# facebook - curl 的对话/oauth 响应

> ID：10087441
> 
> 赞同：1
> 
> 时间：2012-04-10T10:59:09.897
> 
> 标签：facebook, authentication, facebook-php-sdk

我从 facebook 示例[http://developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)使用它来验证我页面上的用户

```
<?php 

$app_id = "YOUR_APP_ID";
$app_secret = "YOUR_APP_SECRET";
$my_url = "YOUR_URL";

session_start();
$code = $_REQUEST["code"];

if(empty($code)) {
 $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
 $dialog_url = "http://www.facebook.com/dialog/oauth?client_id=" 
 . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
 . $_SESSION['state'];

echo("<script> top.location.href='" . $dialog_url . "'</script>");
}

if($_REQUEST['state'] == $_SESSION['state']) {
 $token_url = "https://graph.facebook.com/oauth/access_token?"
 . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
 . "&client_secret=" . $app_secret . "&code=" . $code;

$response = file_get_contents($token_url);
$params = null;
parse_str($response, $params);

$graph_url = "https://graph.facebook.com/me?access_token=" 
. $params['access_token'];

$user = json_decode(file_get_contents($graph_url));
echo("Hello " . $user->name);
}
else {
 echo("The state does not match. You may be a victim of CSRF.");
}

?> 
```

我可以从

```
$dialog_url = "http://www.facebook.com/dialog/oauth?client_id=" 
 . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
 . $_SESSION['state']; 
```

卷曲？或者我可以通过 top.location 等其他方式获取状态参数吗？

# ipad - 视频播放器给出错误（EXC_BAD_ACCESS）

> ID：10087444
> 
> 赞同：0
> 
> 时间：2012-04-10T10:59:30.117
> 
> 标签：ipad

我正在创建一个 iPad 应用程序，我想打开媒体播放器来播放视频。为此，我在 ViewDidLoad() 方法中创建了一个按钮。贝娄是我的代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad]
    self.view.backgroundColor = [[[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"1.png"]] autorelease];

    m_btn2000 = [[UIButton buttonWithType:UIButtonTypeCustom] autorelease];
    m_btn2000.frame = CGRectMake(180, 330, 130, 200);
   [m_btn2000 setImage:[UIImage imageNamed:@"2.png"] forState:UIControlStateNormal];
    m_btn2000.clipsToBounds = YES;
   [m_btn2000 addTarget:self action:@selector(btnClicked:) forControlEvents:UIControlEventTouchUpInside];
   [self.view addSubview:m_btn2000];
} 
```

波纹管是我的按钮单击方法代码：

```
- (void)btnClicked:(id)sender
{
    NSString *filePath1 = [[NSBundle mainBundle] pathForResource:@"test_video" ofType:@"m4v"];
    NSURL *fileURL = [NSURL fileURLWithPath:filePath1];
    m_moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
    m_moviePlayer.controlStyle = MPMovieControlStyleFullscreen;
   [m_moviePlayer.view setFrame:CGRectMake(0, 0, 1026, 748)];
   [self.view addSubview:m_moviePlayer.view];
   [m_moviePlayer play];
} 
```

当我要单击按钮时，它给了我 EXC_BAD_ACCESS 错误。但是我注意到一件事，当我将整个代码放在按钮单击方法中放入 ViewDidLoad() 方法中时，它会以正确的方式在播放器中播放视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:06:01.867

原因是：您正在使用 + （工厂方法）创建一个按钮并且您正在发送`autorelease`消息。

你需要改变这一行：
`m_btn2000 = [[UIButton buttonWithType:UIButtonTypeCustom] autorelease];`

至

```
 m_btn2000 = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

# java - 构造函数执行后的初始化字段

> ID：10087452
> 
> 赞同：1
> 
> 时间：2012-04-10T11:00:12.357
> 
> 标签：java, oop, parameter-passing

假设一个 Car Validator 和许多读取其属性以验证它们的方法。因此，构造它的最佳方式是使 Car 成为实例字段。

两种制作方法：

**1)**创建一个以 Car 作为参数的构造函数，然后调用 validate()。

**2)**删除所有构造函数，而是将 Car 作为参数传递给 validate 方法：validate(Car car)。

如果我们想象这个验证器必须不断地验证，比如说 500 辆汽车。

使用**1)**方法，必须实例化 500 个验证器对象……即使垃圾收集器的工作做得非常好，它似乎也不是最佳实践。好处是 Car 字段的初始化是由构造函数 => 进行的，所以更自然。

使用**2)**方法，我们避免了**1)**的缺点，但是我们必须在方法 validate 中初始化 Car 字段，这意味着在对象构造之后。这被认为是一种好习惯吗？实际上，只有 validate 方法使用 Car 字段，此外，只有 validate 方法不是私有的。

当然，还有第三种方法可以避免所有疑虑=>将 Car 从 validate 方法传递给每个私有方法……但我觉得这很丑陋……

我应该选择三种方法中的哪一种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:10:01.383

我认为第二种方法是一种反模式，应该避免，它类似于臭名昭著的`SimpleDateFormat`类（它看起来像无状态和线程安全的，但事实并非如此）。

关于其他方法，如果你真的有很多私有方法，最好使用第一种方法，否则你可以使用第三种方法，它对我来说看起来并不太难看。

另请注意，“按原样”使用第一种方法比第三种方法涉及更多的耦合。在第三种情况下，您可以通过注入预先配置的验证器实例将验证器的客户端与其实现分离，而在第一种情况下，您需要引入工厂来实现相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:11:29.697

**好的做法通常是避免缺点的做法。**

使用第二种方法。如果您要创建一个`CarValidator`类并调用`validate(car)`它来检查对象的有效性，这似乎是一种非常有效的方法。我不明白为什么你会认为这不是最佳实践？

您是否担心设置一个私有`Car`变量并在整个验证过程中引用它，而不是通过所有私有方法传递一个实例？只要`validate`方法是同步的，这种方法就不会有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:41:50.857

**我将使用第四种方法，并通过将 Validator 对象注入 Car 构造函数来**尽早检查汽车的有效性。我发现，与让无效汽车实例闲置并且必须稍后在多个地方检查有效性（通过有效性（）或通过 Validator 对象中的属性）（即不会快速失败）相比，它的缺点要小得多。

* * *

更新：如果您在构建期间无法验证 Car 实例，例如因为您在客户端，我会将 Car 实例视为服务器端的受污染值，并使用[污染检查器](http://types.cs.washington.edu/checker-framework/current/checkers-manual.html#tainting-checker)和您的方法 2 来清除它们。

# php - PHP - 换行符和 BR 删除

> ID：10087454
> 
> 赞同：0
> 
> 时间：2012-04-10T11:00:22.893
> 
> 标签：php, string

我有一个字符串

```
"PRINT CHIFFON<BR /><BR />

" 
```

我正在尝试删除任何换行符和
标签。

```
$i->colour_code = str_replace('<br>', '', strip_tags($i->colour_code));
$i->colour_code = str_replace('<br \/>', '', strip_tags($i->colour_code));
$i->colour_code = preg_replace("/[\n\r]/","",$i->colour_code); 
```

那仍然行不通。任何想法都会受到赞赏，因为这个问题会导致整个系统停止工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:03:10.557

您不需要在第二行替换中转义斜线。事实上，既然你正在运行它`strip_tags`，你甚至不需要前两个替换。试试这个：

```
$i->colour_code = str_replace(Array("\n","\r"),"",strip_tags($i->colour_code)); 
```

只要确保那`$i->colour_code`不是只读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:04:55.100

你是什​​么意思它不起作用？我刚刚做了一个测试，你的代码确实有效，你的 $i->colour_code 有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:12:12.657

由于您似乎可以使用 preg_replace，我建议使用这行代码：

```
$i->color_code = preg_replace('/(<br>|<br ?\/>|\r|\n)/i', '', $i->color_code); 
```

与您的示例不同，它也将不区分大小写，因此它是 br 还是 BR 都没有关系。

# c# - 如何让我的代码在崩溃前创建转储文件？

> ID：10087458
> 
> 赞同：8
> 
> 时间：2012-04-10T11:00:57.673
> 
> 标签：c#, .net, debugging, windbg

我有一些 C# 和 C++ 代码（在一个项目中）。这段代码有一些崩溃，我试图找到它。但这种崩溃不会在任何时候重现 - 我找不到它。

我想配置代码/ Windows 操作系统以在崩溃时创建转储文件。

我的限制是……我无法访问发生此崩溃的机器 - 这不是开发机器……这是测试实验室机器

那么，该怎么做呢？如何更改解决方案中的属性，以便在任何崩溃时创建新的转储文件？

（目的是能够分析windbg工具中的转储）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T18:36:20.627

您可以注册未处理的异常过滤器和 PInvoke [MiniDumpWriteDump](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)。执行此操作的代码示例位于[此处](http://brakertech.com/howto-c-generate-dump-file-on-crash/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T11:06:33.303

您可以在注册表中启用在 vista 上保存转储：

1.  打开注册编辑
2.  导航到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows 错误报告
3.  在 Windows 错误报告下，创建一个名为 LocalDumps 的新注册表项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T11:27:12.757

[我发现使用ProcDump](http://technet.microsoft.com/en-us/sysinternals/dd996900)更容易。尝试使用 -e（在未处理的异常上创建转储）、-ma（使用完整进程内存）和 -t（在应用程序终止时创建转储）选项。

# cruisecontrol - 如何配置 CruiseControl 以在代码签入时自动触发构建

> ID：10087460
> 
> 赞同：1
> 
> 时间：2012-04-10T11:01:10.487
> 
> 标签：cruisecontrol

我们如何配置 Cruisecontrol 以自动触发构建代码签入？我们目前在 Windows 机器上使用 CruiseControl 2.8.4。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:09:07.627

您可能想阅读[本教程](http://www.javaranch.com/journal/200409/DrivingOnCruiseControl_Part1.html)。

简而言之，您需要使用[svn](http://cruisecontrol.sourceforge.net/main/configxml.html#svn)之类的源代码管理来定义[修改集](http://cruisecontrol.sourceforge.net/main/configxml.html#modificationset)。

这将以定义的时间间隔（例如`quietperiod="300"`（5 分钟，600 秒）的修改集）轮询存储库，它不会是即时的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:06:57.640

那是不可能的。CruiseControl 必须轮询 SVN 以进行更改。

# java - 将注释属性传递给元注释

> ID：10087467
> 
> 赞同：43
> 
> 时间：2012-04-10T11:02:00.180
> 
> 标签：java, annotations

假设我有一个带有属性的注释：

```
@Named(name = "Steve")
private Person person 
```

我想用几个元注释创建一个复合注释，包括一个带有属性的注释

```
@Named
@AnotherAnnotation
@YetAnotherAnnotation
public @interface CompoundAnnotation {

    ...
} 
```

有没有一种方法可以将复合注释的属性传递给元注释之一？

例如，像这样：

```
@CompoundAnnotation(name = "Bob")
private Person person; 
```

这相当于，但比

```
@Named(name = "Bob")
@AnotherAnnotation
@YetAnotherAnnotation
private Person person; 
```

谢谢！

PS 为我对示例注释的错误选择表示歉意 - 我没有想到 javax.inject.@Named 注释，只是一些具有属性的任意注释。

* * *

谢谢大家的回答/评论。

显然，这是不可能的。然而，碰巧我的案例有一个简单的解决方法，我将分享它以防它帮助任何人：

我正在使用 Spring 并希望创建自己的注释，将 @Component 作为元注释，从而被组件扫描自动检测到。但是，我还希望能够设置 BeanName 属性（对应于 @Component 中的 value 属性），这样我就可以拥有自定义 bean 名称。

好吧，事实证明，Spring 的深思熟虑的人使这样做成为可能 - AnnotationBeanNameGenerator 将采用它传递的任何注释的“值”属性并将其用作 bean 名称（当然，默认情况下，它会仅获得传递的 @Component 或将 @Component 作为元注释的注释）。回想起来，这对我来说从一开始就应该是显而易见的——这就是现有的以@Component 作为元注释的注释，例如@Service 和@Registry，可以提供 bean 名称。

希望这对某人有用。我仍然认为这是一种耻辱，虽然这不可能更普遍！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2016-04-10T09:08:52.297

现在是几年后了，由于您使用的是 Spring，因此您现在可以使用 @AliasFor 注释来实现您的要求。

例如：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
@SpringApplicationConfiguration
@ActiveProfiles("test")
public @interface SpringContextTest {

    @AliasFor(annotation = SpringApplicationConfiguration.class, attribute = "classes")
    Class<?>[] value() default {};

    @AliasFor("value")
    Class<?>[] classes() default {};
} 
```

现在您可以使用 注释您的测试`@SpringContextTest(MyConfig.class)`，令人惊奇的是它实际上以您期望的方式工作。

注意当您需要以编程方式获取属性值时，Spring 自动别名仅在您使用[`AnnotatedElementUtils`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/annotation/AnnotatedElementUtils.html)而不是时才有效[`AnnotationUtils`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/annotation/AnnotationUtils.html)，如文档所述：

> `AnnotatedElementUtils`为 Spring 的元注释编程模型定义公共 API，支持*注释属性覆盖*。如果您不需要对注释属性覆盖的支持，请考虑`AnnotationUtils`改用。

例子：

```
final Named namedAnnotation = AnnotatedElementUtils.findMergedAnnotation(Person.class, Named.class);
final String name = namedAnnotation.name();
assertEquals("Steve", name); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-10T12:40:52.280

> 有没有一种方法可以将复合注释的属性传递给元注释之一？

我认为简单的答案是“不”。没有办法询问`Person`它上面有什么注释并得到`@Named`例如。

更复杂的答案是您可以链接注释，但您必须通过反射来调查这些注释。例如，以下工作：

```
@Bar
public class Foo {
    public static void main(String[] args) {
        Annotation[] fooAnnotations = Foo.class.getAnnotations();
        assertEquals(1, fooAnnotations.length);
        for (Annotation annotation : fooAnnotations) {
            Annotation[] annotations =
                annotation.annotationType().getAnnotations();
            assertEquals(2, annotations.length);
            assertEquals(Baz.class, annotations[0].annotationType());
        }
    }

    @Baz
    @Retention(RetentionPolicy.RUNTIME)
    public @interface Bar {
    }

    @Retention(RetentionPolicy.RUNTIME)
    public @interface Baz {
    }
} 
```

但是，以下语句将返回 null：

```
// this always returns null
Baz baz = Foo.class.getAnnotation(Baz.class) 
```

这意味着任何正在寻找`@Baz`注释的第 3 方类都不会看到它。

# mongodb - MongoDB c#驱动程序覆盖字符串的默认值从null到string.empty

> ID：10087472
> 
> 赞同：4
> 
> 时间：2012-04-10T11:02:15.593
> 
> 标签：mongodb, mongodb-.net-driver

使用 10gen mondgo db c# 驱动程序。我有以下课程

```
[BsonId]
public ObjectId Id { get; set; }
public int AttemptId { get; set; }
public int UserId { get; set; }
public int QId { get; set; }
public string UserInput { get; set; }  
public string Feedback{ get; set; } 
```

默认情况下，如果我不发送 UserInput 或 Feedback（任何字符串）的值，mongodb 会将它们作为`null`. 有没有办法`string.empty`在插入或获取数据时覆盖它。尝试设置`[BsonDefaultValue("")]`，但这也没有用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-10T14:55:31.477

[BsonDefaultValue("")] 仅在从数据库中读取没有相应字段值的文档时适用。如果您希望在内存中创建的新对象具有 null 以外的值，则需要在构造函数中设置该值。此外，当您将对象保存到数据库时，如果该字段为空，那么这就是保存和读回的内容。

因此，只需在构造函数中设置默认值来处理在内存中创建的新对象（并且可能插入到数据库中）并使用 [BsonDefaultValue] 来处理可能没有相应字段的回读文档。

# windows-phone-7 - 在 WP7 中，数据不会在写入到 IsolatedStorage 后立即保存

> ID：10087473
> 
> 赞同：0
> 
> 时间：2012-04-10T11:02:20.057
> 
> 标签：windows-phone-7, isolatedstorage

我在完善我的 WP7 应用程序时遇到了这个问题。

尽管我遵循 Microsoft 的指南在游戏停用时存储游戏状态，但我也想在运行时保存一些数据。

原因是当电池从设备中取出时，不会触发停用/关闭回调。

当用户在玩游戏时不小心从她的设备中取出电池时，就会出现问题——所有游戏进度都会丢失。

这就是为什么我会在一些中间检查点保存游戏状态，但我注意到数据不会立即存储。这是我的“保存”功能：

```
 public void SaveAppModelToIsolatedStorage()
    {
        using (var store = IsolatedStorageFile.GetUserStoreForApplication())
        using (var stream = new IsolatedStorageFileStream(APPMODEL_DATAFILE,
                                                          FileMode.Create,
                                                          FileAccess.Write,
                                                          store))
        {
            var serializer = new XmlSerializer(typeof(AppModel));

            try
            {
                serializer.Serialize(stream, AppModel);
            }
            catch (Exception ex)
            {
                Debug.WriteLine("Cant serialize AppModel:" + ex.Message);
            }
        }
    } 
```

调用后，如果我在几秒钟内取出电池（不确定多少，但总是少于 30），应用程序最终会丢失游戏进度。如果我在取出电池之前等待，数据将成功保存。在各种 WP7 手机上都观察到了这种行为。

我还尝试序列化为字符串缓冲区，然后通过调用将该字符串缓冲区写入文件`stream.Write()`，但结果是相同的。另外，`stream.Flush()`好像没什么效果。

这种行为是平台功能吗？

就市场应用程序的 Microsoft 认证而言，是否可以？

或者有没有办法立即保存数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:33:53.197

只需`stream.Close`在需要刷新数据时调用。

另外，试着打电话`stream.Flush(true);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:40:29.537

这对于隔离存储的性能可能很有趣：forums.create.msdn.com/forums/p/71708/71708.aspx

# javascript - 如何只获得第一级div？

> ID：10087477
> 
> 赞同：6
> 
> 时间：2012-04-10T11:02:46.227
> 
> 标签：javascript, jquery, html, jquery-selectors

我有一个 id 的 div ，`content`我想获取`id`第一级`div`元素的 ，例如。`box1`, `box2`, `box3`. 如何才能做到这一点 ？

```
<div id="content">
    <div id="box1" class="box1class">
        <div>...</div>
    </div>
    <div id="box2" class="box1class">
        <div>...</div>
    </div>
    <div id="box3" class="box1class">
        <div>...</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T11:04:46.157

使用`>`儿童选择器。

```
var ids = [];
$("#content > div").each(function() {
    ids.push(this.id);
}); 
```

您可以使用以下方法进一步缩短此时间`map()`：

```
var ids = $("#content > div").map(function() {
    return this.id;
}).get(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T11:04:34.973

```
$("#content > div") 
```

像这样。你可以得到这样的div数组

```
 var array =  $("#content > div").map(function(){
       return this.id;
    }).get(); 
```

参见 jsfiddle [http://jsfiddle.net/DsyzV/](http://jsfiddle.net/DsyzV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:04:31.747

采用：

```
$("#content > div").each(function() {
  var divId = this.id;
}); 
```

# java - 使用 kasoap2-Android 进行 XML 解析

> ID：10087480
> 
> 赞同：3
> 
> 时间：2012-04-10T11:02:51.357
> 
> 标签：java, android, android-ksoap2

我在解析这个结构 xml 时遇到了困难：

```
<Publications>
<Publication>
<PublicationID>1</PublicationID>
<PublisherID>1</PublisherID>
<Date>2012-03-28 13:39:04</Date>
</Publication>
<Publication>
<PublicationID>2</PublicationID>
<PublisherID>1</PublisherID>
<Date>2012-01-23 10:00:03</Date>
</Publication>
</Publications> 
```

也许有人可以给我一些如何解析它的想法？

我的请求看起来：

```
String method_name = "GetPublications";

// creating new SoapObject
soap = GetSoapObject(method_name);

SoapSerializationEnvelope envelope = GetEnvelope(soap);

HttpTransportSE androidHttpTransport = new HttpTransportSE(REQUEST_URL);

androidHttpTransport.call(NAMESPACE + method_name, envelope);

soap = (SoapObject) envelope.getResponse(); 
```

kSoap2-Android 正在返回：

```
anyType{Publications=anyType{Publication=anyType{PublicationID=1; PublisherID=1; Date=2012-03-28 13:39:04; }; Publication=anyType{PublicationID=2; PublisherID=1; Date=2012-01-23 10:00:03; }; }; } 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:20:57.237

解析xml文件，如：

Step1：创建类java bean，如：

```
public class Publication { 
Integer PublicationId;
Integer PublisherID;
Date    date; 

//define methods get, set for fields
} 
```

Step2：使用 KSOAP2 来实现你的想法 Using ：

```
soap = (SoapObject) envelope.bodyIn
soapResult = (SoapObject)soap.getProperty(0);
for(int i=0;i<soapResult.getPropertyCount();i++)
{
   SoapObject so = (SoapObject) soapResult.getProperty(i);
 //here, you can get data from xml using so.getProperty("PublicationID") 
 //or the other tag in xml file.
} 
```

希望它对你有用。

# java - java中的xpath提取所有xml元素

> ID：10087487
> 
> 赞同：0
> 
> 时间：2012-04-10T11:03:12.643
> 
> 标签：java, xpath

任何人都可以提供一个使用java中的xpath从xml文件中提取所有元素及其属性和值的示例吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T11:25:24.927

几年前我为我的团队写了这篇文章。会有帮助的。

## 什么是 xPath？

1.  XPath 是一种用于在 XML 文档中查找信息的语言。
2.  XPath 是一种用于定义部分 XML 文档的语法。
3.  XPath 使用路径表达式在 XML 文档中导航。
4.  XPath 包含一个标准函数库。
5.  XPath 是 XSLT 中的主要元素。
6.  XPath 是 W3C 推荐的。

在 XPath 中，有七种节点：元素、属性、文本、名称空间、处理指令、注释和文档（根）节点。XML 文档被视为节点树。树的根称为文档节点（或根节点）。

考虑以下 Xml 文档。

```
<information>
    <person id="1">
        <name>Tito George</name>
        <age>25</age>
        <gender>Male</gender>
        <dob>
             <date>25</date>
             <month>october</month>
             <year>1983</year>
        </dob>
    </person>

     <person id="2">
        <name>Kumar</name>
        <age>32</age>
        <gender>Male</gender>
        <dob>
             <date>28</date>
             <month>january</month>
             <year>1975</year>
        </dob>
    </person>

    <person id="3">
        <name>Deepali</name>
        <age>25</age>
        <gender>Female</gender>
        <dob>
             <date>17</date>
             <month>january</month>
             <year>1988</year>
        </dob>
    </person>

</information> 
```

从文档中获取信息

```
DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
//Getting the instance of DocumentBuilderFactory 
domFactory.setNamespaceAware(true);
//true if the parser produced will provide support for XML namespaces; 
DocumentBuilder builder = domFactory.newDocumentBuilder();
//Creating document builder
Document doc = builder.parse("C:\\JavaTestFiles\\persons.xml");
XPath xpath = XPathFactory.newInstance().newXPath();
//getting instance of xPath
expr = xpath.compile("//@id");
result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
 for (int i = 0; i < nodes.getLength(); i++) {
     System.out.println(nodes.item(i).getNodeValue());
} 
```

上面的红色行是用于编译 xPath 表达式的行， //@id 是实际的表达式。表达式 //@id 将返回文档中属性 id 的值。IE。程序的输出将是 1 2 和 3。在下表中，您可以找到本文档中可以使用的各种表达式。

上述代码片段中的两个重要语句是

*   expr = xpath.compile("//@id"); --> 这个编译表达式。如果不可编译，此方法将抛出 XPathExpressionException。
*   expr.evaluate(doc, XPathConstants.NODESET); --> 在指定的上下文中计算一个 XPath 表达式并将结果作为指定的类型返回。在这个第二个参数定义了方法将返回什么（returnType）。如果 returnType 不是 XPathConstants（NUMBER、STRING、BOOLEAN、NODE 或 NODESET）中定义的类型之一，则抛出 IllegalArgumentException。

**基本上：** XML 文档是节点的树结构（分层）集合。与分层目录结构一样，指定指向层次结构中特定节点的路径很有用（因此规范的名称为：XPath）。

事实上，目录路径的大部分符号都被原封不动地保留下来：

*   正斜杠 (/) 用作路径分隔符。
*   从文档根开始的绝对路径以 / 开头。
*   从给定位置开始的相对路径以其他任何内容开头。
*   双句点 (..) 表示当前节点的父节点。
*   单个句点 (.) 表示当前节点。

## 信息

*   //@id --> 选择所有名为 id 的属性
*   //@* --> 选择文档中的所有属性节点
*   //@id='1' --> 测试文档中是否存在属性 id = '1' 的节点。如果存在，该语句将评估为真。在这种情况下，XPathConstants.BOOLEAN 应该用作评估方法中的返回类型。
*   /information/person [age='24']name/text() 或
    //person[age='24'] name/text() --> 返回 'Kumar'.. 让我们先拆分查询：/information /person[age='24']/name/text() 第 1 部分：搜索具有元素 'age' = 24 的节点 'person' 第 2 部分：获取该节点的元素 'name' 第 3 部分：文本() -- 是一个xPath函数，将返回元素'name'的文本节点 注意：这里的信息是根节点，如果我们从根节点开始，一个斜杠就足够了，即它是一个绝对路径。如果我们从子节点开始使用必须使用双斜杠'//'，即它是一个相对路径。
*   //person/dob[year>'1978'][year<1985]/../name/text() --> 这个表达式正在搜索 YOB 在 1978 到 1985 之间的人。检查标记为红色的文本. 这是因为元素 year 不是 person 的直接子元素，而是兄弟元素，或者换句话说 year 的直接父元素是 node 。所以我们需要上一层来获取元素“名称”。
*   //person/dob[year>'1978'][year<1985]/../@id --> 这将返回满足上述条件的节点的id。注意：不需要调用 text() 方法来获取属性值
*   //person[age='25']//dob[date=25]/../name/text() --> 此表达式将返回年龄 = 25 且日期 = 25 的人的姓名。
*   /information/person[1] /name/text() 搜索第一个人节点的名称。
*   /information/person/ dob/child:: */text() --> 这将返回dob的所有子节点。我们也可以这样写 child::information/child::person/child::dob/child::* /text()

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T11:17:59.457

`"//*"`以这种方式使用此 XPath 表达式

```
Document doc = ... // the document on which apply XPath
XPathExpression xp = XPathFactory.newInstance().newXPath().compile("//*");
NodeList elements = (NodeList) xp.evaluate(doc, XPathConstants.NODESET); 
```

它会返回给您任何级别的所有元素。

# javascript - MonoTouch UIWebView 和 EvaluateJavascript

> ID：10087489
> 
> 赞同：2
> 
> 时间：2012-04-10T11:03:24.120
> 
> 标签：javascript, ios, uiwebview, mono, xamarin.ios

我有一个在以下环境中工作的应用程序：

*   单点触控 2.1
*   MonoDevelop 2.4.2
*   macOS 10.6.8
*   iOS SDK 4.3

迁移到 iOS 5.0/5.1 和 Monotouch 5.2.10 下的 MonoDevelop 2.8.8.4 的相同应用程序存在以下问题：当我单击按钮在 UIWebView 中导航时不起作用。

代码是这样的：（显然它在 Monotouch 2.1 中是一样的）

```
public void ScrollToTop (object sender, EventArgs evt)
{
    webView.EvaluateJavascript("window.scrollTo(0,0)");
} 
```

我能做什么？

已解决（在 Jonathan.Peppers 的帮助下）：

```
public void ScrollToTop (object sender, EventArgs evt)
{
    if((UIDevice.CurrentDevice.CheckVersion(5, 0)){                 
                System.Drawing.PointF p = new System.Drawing.PointF(0, 0);
                webView.ScrollView.SetContentOffset(p,true);
            }
            else{
                webView.EvaluateJavascript("window.scrollTo(0,0)");                 
            }
} 
```

我这样做是因为在 4.3 webView.ScrollView.SetContentOffset 上使应用程序崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:04:45.237

试试这个：

```
string error = webView.EvaluateJavascript("try { window.scrollTo(0,0); } catch (e) { return e.message; }"); 
```

*（仔细检查我的代码）*

它应该为您提供更好的错误消息。告诉我们返回的字符串的值。

我怀疑问题不是 MonoTouch，而是 iOS5？Safari 在 iOS5、新的 javascript 引擎等方面发生了翻天覆地的变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:57:55.417

注意`UIWebView`不是可[重入的](http://iosapi.xamarin.com/?link=M%3aMonoTouch.UIKit.UIWebView.LoadRequest%28MonoTouch.Foundation.NSUrlRequest%29)。如果在 iOS 版本之间加载（或只是时间）页面的方式发生了变化，那么这可能会成为一个问题。

为了避免这种情况，只需确保在加载完成之前不会回调*任何* 实例，例如或被调用。`UIWebView`[`LoadFinished`](http://iosapi.xamarin.com/?link=E%3aMonoTouch.UIKit.UIWebView.LoadFinished)`LoadError`

如果这没有帮助，请创建一个小型、独立的测试用例来复制问题并将其附加到[http://bugzilla.xamarin.com的错误报告中](http://bugzilla.xamarin.com)

# sqlite - 在 sqlite 中排序日期

> ID：10087492
> 
> 赞同：2
> 
> 时间：2012-04-10T11:03:36.207
> 
> 标签：sqlite

我想按升序选择日期。日期以`dd-MMM-yy`(02-Mar-12) 格式存储。这是我的查询：

```
SELECT EventDate,Event,ID from EventCalenderTable Order By EventDate ASC 
```

输出是：

```
10-03-12
12-02-12
15-01-12
18-07-12 
```

但输出应该是：

```
15-01-12
12-02-12
10-03-12
18-07-12 
```

事件日期是日期数据类型。

我看过很多关于在 sql 中存储日期的帖子。我注意到该`Convert`函数在 sql server 中完成了技巧。但是我怎么能在 Sqlite 中做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T11:15:51.737

SQLite 只知道三种[日期格式](http://www.sqlite.org/datatype3.html)：

*   文本 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）
*   自公元前 4714 年 11 月 24 日以来的实际儒略日数
*   自 1970-01-01 00:00:00 UTC 以来的整数秒数

SQLite 确实有[五个日期/时间函数](http://www.sqlite.org/lang_datefunc.html)用于在格式之间进行转换。

# javascript - 通过jquery清除cookie？

> ID：10087494
> 
> 赞同：2
> 
> 时间：2012-04-10T11:03:51.087
> 
> 标签：javascript, jquery, asp.net, cookies

我安装了 DNN，但其中一个门户已损坏，并且“注销”按钮似乎无法清除 cokoie。是否可以使用 jquery 来清除特定的 cookie？还是单独的 ASP.NET 页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T11:05:02.253

当然，使用这样的[cookie 插件](http://plugins.jquery.com/project/Cookie)

```
$.cookie("name", null); 
```

**更新：**

```
if($('a[href="webiste.co.uk\/en-gb\/admin.aspx"]').length) {
    $.cookie("name", null);
} 
```

* * *

**更新 2：**纯 Js

```
function deleteCookie(name) {
    document.cookie = name+'="";-1; path=/';
}

var login = document.getElementById("loginlink");
login.onclick = function() {
  deleteCookie("name");
}; 
```

# emacs - 无法为键 Ctrl- 设置键盘映射；

> ID：10087495
> 
> 赞同：7
> 
> 时间：2012-04-10T11:03:52.990
> 
> 标签：emacs, elisp

我正在尝试为 C- 设置全局密钥；通过将以下代码放在 init.el 文件中来创建密钥。

```
(global-set-key "\C-;" 'backward-kill-word) 
```

但这会在 *Warning* 缓冲区中出现以下错误

```
error "Invalid modifier in string" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T11:55:07.663

试试这个，

```
 (global-set-key [(control ?\;)] 'backward-kill-word) 
```

另一种方式，我想最简单的方法是使用`kbd`功能

```
 (global-set-key (kbd "C-;") 'backward-kill-word) 
```

# javascript - 选中一个复选框 选中数组中的所有复选框

> ID：10087499
> 
> 赞同：0
> 
> 时间：2012-04-10T11:04:13.323
> 
> 标签：javascript, jquery, asp.net

如果选中一个复选框，我想检查所有其他复选框。我的复选框是一个数组。如果选中一个复选框，我希望选中该行中的所有复选框。我的代码

```
<tr>
  <td class="small">
    <asp:CheckBox ID="chkReportModuleName" runat="server" name="report"></asp:CheckBox>
  </td>
  <td class="particulrs"></td>
  <td class="small">
    <asp:CheckBox ID="chkReportAdd" runat="server" name="reports"></asp:CheckBox>
  </td>
  <td class="small">
    <asp:CheckBox ID="chkReportEdit" runat="server" name="reports"></asp:CheckBox>
  </td>
  <td class="small">
    <asp:CheckBox ID="chkReportDelete" runat="server" name="reports"></asp:CheckBox>
  </td>
  <td class="small">
    <asp:CheckBox ID="chkReportView" runat="server" name="reports"></asp:CheckBox>
  </td>
  <td class="small">
    <asp:CheckBox ID="chkReportPrint" runat="server" name="reports"></asp:CheckBox>
  </td>
  <td class="othr">
    <span><input type="checkbox" id="chkReportActivity1" name="reports" /></span>
  </td>
</tr> 
```

检查名为报告的复选框。我想检查所有名称为报告的复选框。复选框 chkReportModuleName 是一个数组。单击它时，我只想检查该行中的复选框。

我试过的jquery如下：

```
 $('input[name="ctl00$MainContent$chkTransModuleName"]').click(function () {
   $('input[name="trans"][i]').attr("checked", this.checked);
   $('input[id="MainContent_chkTransAdd"]').attr("checked", this.checked);
   $('input[id="MainContent_chkTransEdit"][i]').attr("checked", this.checked);
   $('input[id="MainContent_chkTransDelete"][i]').attr("checked", this.checked);
   $('input[id="MainContent_chkTransView"][i]').attr("checked", this.checked);
   $('input[id="MainContent_chkTransPrint"][i]').attr("checked", this.checked);
 }); 
```

它运行，但我希望仅选中该行中的那些复选框。

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:06:55.643

假设名称`ctl00$MainContent$chkTransModuleName`是正确的

```
$('input[name="ctl00$MainContent$chkTransModuleName"]').click(function () {
    var chk = !!this.checked;
    $(this).closest('tr').find('.small > input[type="checkbox"]').attr('checked', chk);    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:11:49.027

首先，给复选框`CssClass`以使其更易于识别：

```
<tr>
    <td class="small"><asp:CheckBox ID="chkReportModuleName" CssClass="reportModule" runat="server" name="report"></asp:CheckBox></td>
    <td class="particulrs"></td>
    <td class="small"><asp:CheckBox ID="chkReportAdd" CssClass="checkbox" runat="server" name="reports"></asp:CheckBox></td>
    <td class="small"><asp:CheckBox ID="chkReportEdit" CssClass="checkbox" runat="server" name="reports"></asp:CheckBox></td>
    <td class="small"><asp:CheckBox ID="chkReportDelete" CssClass="checkbox" runat="server" name="reports"></asp:CheckBox></td>
    <td class="small"><asp:CheckBox ID="chkReportView" CssClass="checkbox" runat="server" name="reports"></asp:CheckBox></td>
    <td class="small"><asp:CheckBox ID="chkReportPrint" CssClass="checkbox" runat="server" name="reports"></asp:CheckBox></td>
    <td class="othr">
        <span><input type="checkbox" id="chkReportActivity1" name="reports" /></span>
    </td>
</tr> 
```

然后你可以使用这个jQuerycode：

```
$('.reportModule').click(function () {
    var $el = $(this), $parentTR = $el.closest("tr"), checked = $el.is(":checked");
    $(".checkbox", $parentTR).attr("checked", checked);
}); 
```

此代码使用最接近的`tr`元素作为上下文，在其中查找要切换的相关复选框。

# ruby-on-rails - Rails + Flex 通过套接字？

> ID：10087500
> 
> 赞同：0
> 
> 时间：2012-04-10T11:04:13.667
> 
> 标签：ruby-on-rails, apache-flex, sockets, polling

您能否在构建一个通过套接字与 Flex 进行良好通信的 Rails 应用程序时提出一些建议。目前我发现只有两种通信方式：Simple HttpRequest、RemoteObject。但我需要一些“多人”风格。我需要 Flex 与套接字对话，Rails 应用程序从这些套接字中获取数据做一些工作并将某些内容推回套接字，以便 Flex 可以“即时”读取它。

任何糟糕的设计流程？:) 提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:50:43.777

取决于您究竟需要它做什么以及您需要它的响应速度。您可以查看[Ruby AMF 插件](https://github.com/victorcoder/rubyamf_plugin)，它是 Flash 的原生类型，它使传输类变得轻而易举。Java 实现有一个内置的流服务器，不确定 Ruby 版本是否有。

除此之外，如果您希望它真正响应，您可以使用 2 种不同的方法：RTMP 服务器（SmartFoxServer、Wowza、Red5、LCDS 等 - 全部基于 Java）或者您可以尝试做 p2p（Adobe 称之为[Cirrus](http://labs.adobe.com/technologies/cirrus/) -它仍处于预生产阶段）。如果您确实使用 p2p 路线，您仍然需要一个备用方案，以防万一出现问题。

# android - 获取模拟器的自动截图

> ID：10087503
> 
> 赞同：3
> 
> 时间：2012-04-10T11:04:32.253
> 
> 标签：android, automation, emulation

我想对正在运行的模拟器进行自动截图，例如每 10 秒一次，然后将它们保存到一个目录中。

我发现我可以使用 DDMS 进行屏幕捕获，但只能通过 UI。是否有任何基于控制台的脚本 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:12:44.593

如果您想在系统端执行此操作，请查看[Android-DDMLIB](http://sourceforge.net/apps/trac/android4maven/wiki/ddmlib)。还有[Droid@Screen](http://blog.ribomation.com/droid-at-screen/)也可以看看这个教程[Android: How to take screenshots from command line](http://android.amberfog.com/?p=168)。

或者，如果您想在 android 设备端执行所有这些操作，那么您必须`root permission`阅读并阅读`device framebuffer`它。

# c++ - 如何在 C++ 中正确返回数组（类成员）？

> ID：10087506
> 
> 赞同：11
> 
> 时间：2012-04-10T11:04:39.593
> 
> 标签：c++

我对 C++ 很陌生，所以这可能是一个微不足道的问题：

我的类有一个私有成员变量，它是一个数组。我需要返回该数组，但我不确定如何正确执行此操作。

```
class X {
    // ...
    private: double m_Array[9];
    public: double* GetArray() const { return m_Array; }
}; 
```

这段代码有问题吗？这会返回一个指向类成员的指针，对吧？- 所以如果我从这个类的一个实例中获取该数组并修改它（从类外部），原来的类成员数组也会被改变？如果是这种情况，我该如何返回数组的副本呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T11:08:48.250

> 这会返回一个指向类成员的指针，对吧？

几乎 - 它返回一个指向数组第一个元素的指针。

> 如果我从此类的实例中获取该数组并修改它（从类外部），那么原始类成员数组也会被更改吗？

这是正确的。

> 如果是这种情况，我该如何返回数组的副本呢？

实现这一目标的最简单方法是使用`std::array`or`std::vector`代替。您应该返回`const`对它的引用 - 然后调用者在不需要时避免复制成本。例子：

```
class X {
    std::array<double, 9> array;
public:
    std::array<double, 9> const & GetArray() const {return array;}
};

X x;
double d = x.GetArray()[5]; // read-only access, no copy

auto array = x.GetArray();  // get a copy
array[5] = 42;              // modify the copy 
```

或者，如果数组具有固定大小（如您的示例中那样），您可以返回包含在结构中的数组 - 这就是`std::array`。否则，您可以将指针（最好是智能指针，以避免内存泄漏）返回到新分配的数组 - 这或多或少是什么`std::vector`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:09:58.137

为了返回一个`new`数组的副本，`double`需要动态分配，填充当前值`m_Array`并返回给调用者（具体来说是指向第一个元素的指针）。调用者将负责`delete[]`返回的数组。就目前而言，调用者不知道返回数组中的元素数量。

由于这是 C++，建议改为 a `std::vector<double>`：这将为您处理复制并为调用者提供有关 s 数量的信息`double`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T11:10:34.737

是的，当您更改数组时，您也会更改类成员。

我建议您在 c++ 中使用 std::vector 而不是 c 样式的数组。它将使您的生活更轻松，并使代码更易于阅读。如果你还有理由坚持使用数组，你需要分配一个新的数组并返回一个指向它的指针。请注意，这将迫使您处理动态内存并注意释放它：

```
public:
  double* GetArray() {
    double* res = new double[9];
    for (int i = 0; i < 9; ++i) {
      res[i] = m_Array[i];
    }
    return res;
  } 
```

您还可以使用 memcpy 复制数组的元素。

# php - 如何在 HTML 助手中添加标签

> ID：10087507
> 
> 赞同：0
> 
> 时间：2012-04-10T11:04:39.873
> 
> 标签：php, cakephp, cakephp-1.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:07:06.990

我的建议是不要尝试对每一项任务都使用帮助程序，此外，您应该使用 CSS 将粗体添加到注销链接。

```
echo $this->Html->link('Logout', array('controller'=>'users', 'action'=>'logout'), array('class' => 'logout')); 
```

然后在你的 CSS 中：

```
.logout {
    font-weight: bold;
} 
```

**更新：如果您真的必须在代码中使用已弃用的 HTML 标记：**

```
echo $this->Html->link('<b>Logout</b>', array('controller'=>'users', 'action'=>'logout'), array('class' => 'logout', 'escape' => false)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T11:49:22.923

请记住，样式不应该是您的 HTML 输出的一部分，并且 - 正如我以前的海报所建议的那样 - 应该在您的 CSS 中。

但是，你去（注意`escape=false`）：

```
echo $this->Html->link(
    '<b>' . __('Logout') . '</b>',
    array(
        'controller' => 'users',
        'action'     => 'logout',
    ),
    array(
        'escape' => false,
    )
); 
```

甚至更多 HtmlHelper 魔术师：

```
echo $this->Html->link(
    $this->Html->tag('b', __('Logout')),
    array(
        'controller' => 'users',
        'action'     => 'logout',
    ),
    array(
        'escape' => false,
    )
); 
```

编辑：添加了 Ish Kumar 的本地化建议，在 cakephp 2.0 中我们不再需要“true”；）

还有一件事：如果您使用`escape=false`记住自己*清理**标签*内容（在这种情况下为`<b>Logout</b>`），尤其是如果它生成的用户内容，例如.*`<b>$userInputVar</b>`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:11:55.747

这相当于这样做：

```
<b><?php echo $this->Html->link('Logout', '/users/logout'); ?></b> 
```

正如 Dunhamzzz 所指出的，您最好使用 CSS 类并以这种方式对其进行样式设置。*

# c# - GZip 标头中的幻数不正确。确保您传入的是 GZip 流

> ID：10087508
> 
> 赞同：6
> 
> 时间：2012-04-10T11:04:44.297
> 
> 标签：c#, entity-framework, asp.net-web-api

我正在尝试使用 WebAPI 从 EntityFramework 检索产品名称及其 ID 作为 NameID 对象。代码如下。

```
public class ProductController : ApiController
{
    protected MainDataContext db = new MainDataContext();
    // GET /api/values
    public IQueryable<NameID> Get()
    {
        return db.Products.Select(x=>new NameID{ ID=x.ID,Name=x.Name }).AsQueryable();
    }

    // GET /api/values/5
    public NameID Get(long id)
    {
        var result = db.Products.Select(x=>new NameID{ ID=x.ID,Name=x.Name }).SingleOrDefault(x => x.ID == id);
        if (id == 0 || result == null)
            throw new HttpResponseException(HttpStatusCode.NotFound); 
        return result;
    }

}
public class NameID {
    public long ID {get;set;}
    public string Name {get;set;}
} 
```

它抛出如下错误

```
The magic number in GZip header is not correct.
Make sure you are passing in a GZip stream.

at System.IO.Compression.GZipDecoder.ReadHeader(InputBuffer input) 
at System.IO.Compression.Inflater.Decode() 
at System.IO.Compression.Inflater.Inflate(Byte[] bytes, Int32 offset, Int32 length) 
at System.IO.Compression.DeflateStream.Read(Byte[] array, Int32 offset, Int32 count) 
at System.IO.Compression.GZipStream.Read(Byte[] array, Int32 offset, Int32 count) 
at System.Xml.XmlTextReaderImpl.InitStreamInput(Uri baseUri, String baseUriStr, Stream stream, Byte[] bytes, Int32 byteCount, Encoding encoding) 
at System.Xml.XmlTextReaderImpl..ctor(Stream stream, Byte[] bytes, Int32 byteCount, XmlReaderSettings settings, Uri baseUri, String baseUriStr, XmlParserContext context, Boolean closeInput) 
at System.Xml.XmlReaderSettings.CreateReader(Stream input, Uri baseUri, String baseUriString, XmlParserContext inputContext) 
at System.Xml.XmlReader.Create(Stream input, XmlReaderSettings settings, String baseUri) 
at System.Xml.Linq.XDocument.Load(Stream stream, LoadOptions options) 
at System.Data.Entity.Migrations.Edm.ModelCompressor.Decompress(Byte[] bytes) 
at System.Data.Entity.Migrations.History.HistoryRepository.GetLastModel(String& migrationId) 
at System.Data.Entity.Migrations.History.HistoryRepository.GetLastModel() 
at System.Data.Entity.Internal.InternalContext.QueryForModel() 
at System.Data.Entity.Internal.ModelCompatibilityChecker.CompatibleWithModel(InternalContext internalContext, ModelHashCalculator modelHashCalculator, Boolean throwIfNoMetadata) 
at System.Data.Entity.Internal.InternalContext.CompatibleWithModel(Boolean throwIfNoMetadata) 
at System.Data.Entity.CreateDatabaseIfNotExists`1.InitializeDatabase(TContext context) 
at System.Data.Entity.Internal.InternalContext.<>c__DisplayClass8.<PerformDatabaseInitialization>b__6() 
at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) 
at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization() 
at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c) 
at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input) 
at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action) 
at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase() 
at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) 
at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() 
at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext() 
at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() 
at System.Linq.Queryable.Select[TSource,TResult](IQueryable`1 source, Expression`1 selector) 
at ProductAPI.Controllers.ProductController.Get() in D:\Demo\ProductAPI\Controllers\ProductController.cs:line 24 
at lambda_method(Closure , Object , Object[] ) 
at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments) 
at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.Execute(HttpControllerContext controllerContext, IDictionary`2 arguments) 
at System.Web.Http.Controllers.ApiControllerActionInvoker.<>c__DisplayClass2.<InvokeActionAsync>b__0() 
at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T11:46:36.993

堆栈跟踪似乎表明从数据库读取实体框架模型元数据时出现问题。

`HistoryRepository.GetLastModel`用于从. `ModelCompressor.Decompress`_ 这会失败，并且数据库中的模型元数据很可能已损坏。`XDocument.Load``GZipStream`

您可以尝试重新创建数据库来解决此问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-23T05:24:13.333

它有点晚了，已经有一个可以接受的答案，这将起作用。但是，如果您已经有一个工作数据库并且不想刷新数据库，那么您可以`Database.SetInitializer`在 Global.asax 的 application_start 函数中调用 null。这不会查找`__migrationhistory`包含损坏数据的表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-08T15:07:38.187

无法为我重新创建数据库，我已经在`Database.SetInitializer`使用`null`.

幸运的是，我在另一个数据库上有一个最新的`__MigrationHistory`表，我使用这个 Sql 查询在目标数据库中设置了正确的值：

```
INSERT INTO TargetDbName.dbo.__MigrationHistory (MigrationId, Model, ProductVersion)
SELECT MigrationId, Model, ProductVersion
FROM SourceDbName.dbo.__MigrationHistory
WHERE MigrationId = 'YYYYMMDDHHMMSSFFF_LastMigration' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-04T16:09:06.347

就我而言，我通过使用**UPDATE-DATABASE**运行数据库迁移来消除此错误。它运行所有迁移文件，创建迁移历史表以及模型的哈希值。

为了让您了解之前发生的事情：我之前在 Dev 环境中运行了迁移脚本，并从生产环境中复制了迁移历史数据。每当我运行我的 Web API 时，EF 都会读取数据库并发现数据库上下文未与迁移历史表中的规范同步。

在我运行 UPDATE-DATABASE 之后，一切都很顺利。

# php - 如何使用 PHP 将字符串发送到特定端口？

> ID：10087510
> 
> 赞同：0
> 
> 时间：2012-04-10T11:04:48.037
> 
> 标签：php, port

我必须使用 PHP 将字符串从 HTML 页面发送到特定的 ip 和端口地址。

**示例：**单击按钮（在我的 HTML 站点上）应导致将字符串发送到ip`"hello"`端口。`7474``x.x.x.x`

我怎么能用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:06:43.870

使用[fsockopen](http://php.net/fsockopen)打开与端口的连接并获取文件句柄，然后使用[fwrite](http://php.net/fwrite)写入该文件句柄。

完成后，您通常希望使用[fclose](http://php.net/fclose)关闭连接。如果您忘记了，PHP 将在脚本结束时为您关闭连接。

# java - Android偏好问题

> ID：10087511
> 
> 赞同：0
> 
> 时间：2012-04-10T11:04:50.683
> 
> 标签：java, android, preferences, securityexception

我正在尝试为我的 android 应用程序制作一个偏好屏幕，但我完全失败了。我正在遵循[本指南](http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html)。当我尝试安装该应用程序时，我收到此错误消息，并且它不会在我的手机上安装该应用程序：

```
[2012-04-10 12:54:45 - AndroidCurrencyConverter] ------------------------------
[2012-04-10 12:54:45 - AndroidCurrencyConverter] Android Launch!
[2012-04-10 12:54:45 - AndroidCurrencyConverter] adb is running normally.
[2012-04-10 12:54:45 - AndroidCurrencyConverter] Performing ValutaConverter.namespace.AndroidValutaConverterActivity activity launch
[2012-04-10 12:54:45 - AndroidCurrencyConverter] Automatic Target Mode: using device '3134BC2BBCA800EC'
[2012-04-10 12:54:45 - AndroidCurrencyConverter] Uploading AndroidCurrencyConverter.apk onto device '3134BC2BBCA800EC'
[2012-04-10 12:54:46 - AndroidCurrencyConverter] Installing AndroidCurrencyConverter.apk...
[2012-04-10 12:54:49 - AndroidCurrencyConverter] Success!
[2012-04-10 12:54:49 - AndroidCurrencyConverter] Starting activity ValutaConverter.namespace.AndroidValutaConverterActivity on device 3134BC2BBCA800EC
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=ValutaConverter.namespace/.AndroidValutaConverterActivity }
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=ValutaConverter.namespace/.AndroidValutaConverterActivity } from null (pid=11486, uid=2000) requires android.permission.INTERNET
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: at android.os.Parcel.readException(Parcel.java:1327)
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: at android.os.Parcel.readException(Parcel.java:1281)
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1631)
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: at com.android.commands.am.Am.runStart(Am.java:433)
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: at com.android.commands.am.Am.run(Am.java:107)
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: at com.android.commands.am.Am.main(Am.java:80)
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: at com.android.internal.os.RuntimeInit.finishInit(Native Method)
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: at com.android.internal.os.RuntimeInit.main(RuntimeInit.java:238)
[2012-04-10 12:54:52 - AndroidCurrencyConverter] ActivityManager: at dalvik.system.NativeStart.main(Native Method) 
```

我从这段代码中了解到，当它尝试启动 Intent 时，它失败了，因为它需要 android.permission.INTERNET。但这已经在我的清单文件中定义了。

我让应用程序在某个时候工作，但我在我的活动中添加了一些东西，添加了另一个活动和一些 XML 文件。在此之后，它不会在手机上安装该应用程序。我补充的是：

在活动课上：

```
addPreferencesFromResource(R.xml.preferences);

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(Menu.NONE, 0, 0, "Show current settings");
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case 0:
        startActivity(new Intent(this, ShowSettingsActivity.class));
        return true;
    }
    return false;
} 
```

如果您需要有关代码或类似内容的任何其他信息，我很乐意发布其中的一些信息。

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:16:01.813

它应该是，

```
<uses-permission 
        android:name="android.permission.INTERNET" />
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name"
        android:name=".AndroidValutaConverterActivity"
        android:theme="@android:style/Theme.DeviceDefault" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".ShowSettingsActivity"/>
</application> 
```

从清单文件中的活动标签中删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:15:20.230

确实，但是您*不允许*清单中的 INTERNET 权限（相反，您明确地说该活动*需要*INTERNET 权限）。

如文档中所述，您应该在清单的根目录中有一个[`<permission>`元素。](http://developer.android.com/guide/topics/manifest/permission-element.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:42:15.690

有两件事要检查。

1.  您的活动正在扩展 PreferenceActivity，并且

2.  您的布局有一个默认的 ListView，其 id 为 android:list

    ```
    <ListView 
        android:id="@+id/android:list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/> 
    ```

如果您需要处理首选项更改，您可能还需要考虑在您的活动中实现 OnSharedPreferenceChangeListener。

# android - Android - 在网络上同步短信/通话

> ID：10087513
> 
> 赞同：0
> 
> 时间：2012-04-10T11:04:59.747
> 
> 标签：android

我想将我的短信/通话存储在远程数据库上。我的 Q 更多的是架构设计而不是实际代码。

我想使用广播接收器立即捕捉短信/电话。广播接收器可以调用耗时的操作，例如连接到远程数据库吗？

而且目前也有可能没有互联网连接。所以可能最好的主意是使用本地sqlite作为记录的缓冲区，然后将其转储到远程数据库上。所以下一个问题是 - 将本地 sqlite 转储到远程数据库有什么用？一些后台服务和计时器或另一个等待互联网状态变化的广播接收器..或两者的组合？

最后一个问题是使用哪种方法联系远程数据库？通过直接登录到远程 sql 或通过 http 帖子 + php + json。

所以工作流程就像：事件 -> 广播接收器 -> 本地 SQLite -> (?receiver/service?) -> (?direct conn/http+php+json?) -> 远程数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:59:19.677

> 广播接收器可以调用耗时的操作，例如连接到远程数据库吗？

是的。在您的情况下不需要。

> 将本地 sqlite 转储到远程数据库有什么用？

它可以定期将其转储到远程数据库。此外，如果出现呼叫或事件，则在定期间隔之前，在此期间您还可以转储已保存的事件和实时事件。它就像两者的结合。

> 使用哪种方法联系远程数据库？

通过 php、XML、json、posts 等接口。因为将来您甚至可以更改数据库。所以它不需要改变客户。

# android - Android - 覆盖不同分辨率的图像

> ID：10087517
> 
> 赞同：0
> 
> 时间：2012-04-10T11:05:17.987
> 
> 标签：android

尽管我知道图像分辨率并在 android 上支持它们是围绕 android 的一个相当普遍的问题，但我似乎无法在网上找到任何与我想做的事情有关的问题或帖子。

我有一张地图，我将其设置为 android 设备的背景。然后，我在特定城市所在的位置叠加可触摸点和图像。我的问题是我应该如何正确处理在不同设备上定位城市？

如果有人要问，我有不同 dpi 的不同图像。但是，在这种情况下，使用基于背景缩放大小的百分比来固定 x 和 y 的位置是正确的方法。这是我不断回归的解决方案，但是我还没有找到一种方法来获得背景图像的缩放大小。

对于任何反馈，我们都表示感谢。瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:05:36.567

在 Android 中，尝试使用 dpi/weights 的某种组合将图像分层到背景中的特定位置是非常困难的。问题之一是背景如何缩放？您是在使用建议的 9-patch 图像还是只是让 android 裁剪或缩小图像？即使在此之后手机的“dpi”值也不准确，操作系统只是使用预定义的乘数（例如 hdpi 的 1.5x）来快速估计图像的大小。要获得“真实”的 dpi，您需要以下内容：

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);

float xDpi = dm.xdpi;
float yDpi = dm.ydpi; 
```

并在计算中使用这些值。最后，最好只使用屏幕的真实值并使用您所说的百分比。我相信大多数 OpenGL 应用程序也是这样做的（如果我错了，请有人纠正我），并且像这样即将使用图形引擎的应用程序可能应该表现类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:11:54.920

尝试布局权重，这是一个很好的解释：

[http://www.chess-ix.com/2012/01/17/the-use-of-layout_weight-with-android-layouts/](http://www.chess-ix.com/2012/01/17/the-use-of-layout_weight-with-android-layouts/)

# json - JSON 到 JSON 的转换（最好在 Apache Camel 内部）

> ID：10087519
> 
> 赞同：3
> 
> 时间：2012-04-10T11:05:29.107
> 
> 标签：json, apache-camel, transformation

我有一些独特的要求，到目前为止我找不到答案。我需要一个 JSON 到 JSON 的转换。最好，如果我可以将它插入 Apache Camel，那就太好了。

作为旁注，我也欢迎任何建议以最佳方式存储 JSON 到 JSON 的映射。是否有任何基于 XSLT 的方法来实现这一点？

谢谢！马里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:47:53.447

ZORBA with jsonIQ : [http://www.jsoniq.org/](http://www.jsoniq.org/) 它是一个本地库，但具有高性能。您在网页中有示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T23:28:05.900

这里有一个简单的设计： [https ://rawgithub.com/chunqishi/edu.brandeis.cs.json2json/master/docs/design-2014-04-09.html](https://rawgithub.com/chunqishi/edu.brandeis.cs.json2json/master/docs/design-2014-04-09.html)

也许你可以通过源代码改进它， [https://github.com/chunqishi/edu.brandeis.cs.json2json](https://github.com/chunqishi/edu.brandeis.cs.json2json)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-20T20:18:42.487

我知道这是一个老问题，但要刷新答案，从 Camel **2.16**开始，有一个用于[JOLT](https://github.com/bazaarvoice/jolt)集成的新[组件。](https://camel.apache.org/components/3.12.x/jolt-component.html)它非常强大！

# iphone - 如何ping服务器？

> ID：10087521
> 
> 赞同：0
> 
> 时间：2012-04-10T11:05:30.247
> 
> 标签：iphone, ios5, xcode4.3, ios5.1

我正在尝试使用 Reachability ping 服务器。以下是我正在尝试的代码片段，但我得到了空的可达性对象，我解决了将 AF_INET6 更改为 AF_INET 的问题。现在这个代码片段只是检查连接性。但我想检查我正在 ping 的枯萎服务器是否有效。

```
 #import "Reachability.h"
    #import <netinet/in.h>
    #import <netinet6/in6.h>
    #import <sys/socket.h>
    #import <arpa/inet.h>

    - (IBAction)checkConnection:(id)sender {
        struct sockaddr_in callAddress;
        callAddress.sin_len = sizeof(callAddress);
        callAddress.sin_family = AF_INET;
        callAddress.sin_port = htons(24);
        callAddress.sin_addr.s_addr = inet_addr("10.29.6.48");
        Reachability *reachibility = [Reachability reachabilityWithAddress:&callAddress];

        NetworkStatus netStatus = [reachibility currentReachabilityStatus];
        NSLog(@"%@",netStatus);
} 
```

如何ping服务器？

# android - 使用嵌套的 setOnItemClickListener 时，ListView 会丢失当前选择

> ID：10087523
> 
> 赞同：0
> 
> 时间：2012-04-10T11:05:38.293
> 
> 标签：android, listview

安卓大师！我想请你帮帮我。我有一个包含两个 ListViews 的活动布局。逻辑是当有人在菜单 ListView 中选择一个项目时，第二个 ListView 会填充一些也可点击的项目。我使用嵌套的 setOnItemClickListener 实现了它。顶部侦听器绑定到菜单 ListView 项。嵌套侦听器在填充后绑定到第二个 ListView。当我不进行嵌套时，就可以了。菜单 ListView 向我显示当前选定的项目。如果我做嵌套。除了一件事，一切都很好。我的菜单 ListView 丢失了当前项目选择标记。怎么了？我需要菜单 ListView 中的当前选择。代码如下。

```
menu.setOnItemClickListener(new AdapterView.OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> arg0,
  android.view.View arg1, int arg2, long arg3) {
    mainList = (ListView) findViewById(R.id.listView2);
    aaMainList = new cArrayAdapter(this, R.layout.mainlistitem, ALfiles);
    mainList.setAdapter(aaMainList);
    mainList.setOnItemClickListener(new AdapterView.OnItemClickListener(){          
      @Override
      public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        lounchFileInDefaultVewer("file:/"+ ALfiles.get(arg2).getAbsolutePath());
        Log.d("ssapp", items[arg2].getAbsolutePath());
      }
    });
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:14:39.257

如果您希望仅在选择“菜单”列表中的元素后才能看到另一个列表，只需将其默认设置为 visibility `GONE`，在第一个之外执行所有这些操作`OnItemClickListener`：

```
 final ListView mainList = (ListView) findViewById(R.id.listView2);
    aaMainList = new cArrayAdapter(this, R.layout.mainlistitem, ALfiles);
    mainList.setAdapter(aaMainList);
    mainList.setOnItemClickListener(new AdapterView.OnItemClickListener(){          
      @Override
      public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        lounchFileInDefaultVewer("file:/"+ ALfiles.get(arg2).getAbsolutePath());
        Log.d("ssapp", items[arg2].getAbsolutePath());
      }
    }); 
```

并且只在第一个中设置它`OnItemClickListener`：

```
menu.setOnItemClickListener(new AdapterView.OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> arg0,
  android.view.View arg1, int arg2, long arg3) {
    mainList.setVisibility(View.VISIBLE);
  }
}); 
```

您还可以更改上述侦听器中的适配器内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:21:29.053

可能是您的第一个列表不再具有焦点，因此所选项目不再位于第一个列表中。您是否查看过使用支持库并将两个列表实现为两个片段。这样，两个列表上的操作相互独立，但您仍然可以从第一个列表开始设置第二个列表的值，您的第一个列表也将保留所选项目。

[http://developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html)

# iphone - 内存使用量是否取决于 iOS 版本

> ID：10087526
> 
> 赞同：0
> 
> 时间：2012-04-10T11:05:49.173
> 
> 标签：iphone, ios

我知道阈值内存（应用程序崩溃之后）取决于设备的 RAM，但它是否取决于具有旧硬件的更高**iOS版本。**

我将 3GS 中的操作系统版本从 4.3 更改为 5.0.1。是否影响前台正在运行的应用程序的最大内存使用限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:13:32.610

由于这个“最大内存使用限制”很可能根本不是恒定的，我认为你的问题没有多大意义。例如，操作系统可能有不同的内存阈值来杀死前台应用程序时，当有电话进来并且您在后台在 Safari 中流式传输音频时，而不是在设备系统的其余部分空闲时。

也就是说，几乎可以肯定，不同的操作系统版本对自己的服务有不同的内存要求。较新的操作系统是否需要更少（因为苹果方面的优化）或更多（因为新的操作系统功能）内存是任何人的猜测。在大多数情况下，我猜是后者。

# sql - 在单个查询中从 DB2 中的表中删除重复行

> ID：10087527
> 
> 赞同：9
> 
> 时间：2012-04-10T11:05:50.930
> 
> 标签：sql, db2, sql-delete

我有一个包含 3 列的表格，如下所示：

```
one   |   two    |  three  |   name
------------------------------------
 A1       B1          C1        xyz
 A1       B1          C1        pqr      -> should be deleted
 A1       B1          C1        lmn      -> should be deleted
 A2       B2          C2        abc
 A2       B2          C2        def      -> should be deleted
 A3       B3          C3        ghi
------------------------------------ 
```

该表没有任何主键列。我对表没有任何控制权，因此无法添加任何主键列。

如图所示，我想删除一、二、三列组合相同的行。因此，如果 A1B1C1 出现三次（如上例所示），则应删除另外两个，只留下一个。

如何通过 DB2 中的一个查询来实现这一点？

我的要求是单个查询，因为我将通过 java 程序运行它。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-10T13:03:11.197

（假设您使用的是 DB2 for Linux/Unix/Windows，其他平台可能略有不同）

```
DELETE FROM
    (SELECT ROWNUMBER() OVER (PARTITION BY ONE, TWO, THREE) AS RN
     FROM SESSION.TEST) AS A
WHERE RN > 1; 
```

应该能得到你想要的东西。

该查询使用[OLAP 函数](https://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.sql.ref.doc/doc/r0023461.html) 为每个, ,组合`ROWNUMBER()`中的每一行分配一个数字。然后，DB2 能够将(A)引用的行匹配为[语句](https://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.sql.ref.doc/doc/r0000939.html)应该从表中删除的行。为了能够使用 a作为删除子句的目标，它必须匹配可[删除视图](https://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.sql.ref.doc/doc/r0000935.html)的规则（请参阅注释部分下的“可删除视图”）。`ONE``TWO``THREE``fullselect`[`DELETE`](https://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.sql.ref.doc/doc/r0000939.html)`fullselect`

以下是一些证明（在 LUW 9.7 上测试）：

```
DECLARE GLOBAL TEMPORARY TABLE SESSION.TEST (
    one CHAR(2),
    two CHAR(2),
    three CHAR(2),
    name CHAR(3)
) ON COMMIT PRESERVE ROWS;

INSERT INTO SESSION.TEST VALUES 
    ('A1', 'B1', 'C1', 'xyz'),
    ('A1', 'B1', 'C1', 'pqr'),
    ('A1', 'B1', 'C1', 'lmn'),
    ('A2', 'B2', 'C2', 'abc'),
    ('A2', 'B2', 'C2', 'def'),
    ('A3', 'B3', 'C3', 'ghi');

DELETE FROM
    (SELECT ROWNUMBER() OVER (PARTITION BY ONE, TWO, THREE) AS RN
     FROM SESSION.TEST) AS A
WHERE RN > 1;

SELECT * FROM SESSION.TEST; 
```

2017 年 3 月 2 日编辑：

针对Ahmed Anwar的问题，如果需要捕获被删除的内容，还可以将删除与“[数据更改语句](https://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.apdv.routines.doc/doc/c0011133.html)”结合起来。在此示例中，您可以执行以下操作，这将为您提供“ *rn* ”列、*一*、*二*和*三*：

```
SELECT * FROM OLD TABLE (
    DELETE FROM
        (SELECT 
             ROWNUMBER() OVER (PARTITION BY ONE, TWO, THREE) AS RN
            ,ONE
            ,TWO
            ,THREE
         FROM SESSION.TEST) AS A
    WHERE RN > 1
) OLD; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:30:30.973

```
DELETE FROM the_table tt
WHERE EXISTS ( SELECT *
    FROM the_table ex
    WHERE ex.one = tt.one
    AND ex.two = tt.two
    AND ex.three = tt.three
    AND ex.zname < tt.zname -- tie-breaker...
    ); 
```

注意：您的 SQL 方言可能会有所不同。注2：“名称”在某些平台上是保留字。最好避免它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-26T22:16:39.200

@a_horse_with_no_name answer db2 for iseries 的变体，不使用 group by 子句和 in 子句。它确实有效

```
DELETE from the_table a 
where rrn(a) < (
select max(rrn(a)) from the_table b 
where a.one = b.one and a.two = b.two and a.three = b.three
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:11:43.807

这是 levenlevi 答案的变体，不需要表上的主键（现在无法测试语法）

```
DELETE FROM the_table
WHERE  rid_bit(the_table) NOT IN (SELECT MAX(rid_bit(the_table))
                                  FROM the_table
                                  GROUP BY one,two,three) 
```

我认为在 iSeries 上`rid_bit()`不支持，但`rrn()`保存相同的目的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T11:10:48.320

```
Please take backup of table before deleting the data

Delete from table where Name in (select name from table
group by one,two,three
having count(*) > 2) 
```

您可以使用

```
 DELETE from TABLE Group by one,two,three Having count(*) > 2; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T11:11:36.283

```
DELETE  FROM Table_Name
WHERE   Table_Name_ID NOT IN ( SELECT  MAX(Table_Name_ID)
                                    FROM    Table_Name
                                    GROUP BY one ,
                                             two, 
                                             three ) 
```

一二三是你重复的列，Table_Name_ID 是 PK

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-31T20:40:40.490

对于其他使用非常旧版本的 db2 SQL 的人：这些帖子的组合有助于识别和删除两次发布的 2 个批次中的重复数据。

```
SELECT   * FROM     LIBRARY.TABLE a
WHERE    a.batch in (115131, 115287)
AND      EXISTS ( SELECT 1 from LIBRARY.TABLE d 
    WHERE d.batch in (115131, 115287)
     AND a.one = d.one AND a.two = d.two AND a.three = d.three 
    GROUP BY d.one, d.two, d.three 
    HAVING count(*) <> 1 )

    AND RRN(a) > (SELECT MIN(RRN(b)) FROM LIBRARY.TABLE b 
        WHERE b.batch in (115131, 115287)
        AND a.one = b.one AND a.two = b.two AND a.three = b.three ); 
```

# php - Mysql查询查找2个表中的最高和最低

> ID：10087532
> 
> 赞同：2
> 
> 时间：2012-04-10T11:06:14.080
> 
> 标签：php, mysql

我有两张桌子说tableA和tableB。两个表都有文件说 pointA 和 pointB。我需要一个查询来查找pointA 和pointB 列中的最高值和最低值。

```
 tableA
 idA    pointA
 1        20
 2        12
 3        41
 4        8     

 tableB
 idB    pointB
 1        24
 2        74
 3        2
 4        16 
```

我想得到这样的结果

```
 HIGHEST     LOWEST
    74         2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:09:50.900

尝试：

```
SELECT MAX(point) as HIGHEST, MIN(point) as LOWEST
FROM
  (SELECT pointA as point FROM tableA
   UNION
   SELECT pointB as point FROM tableB) t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:07:31.810

```
select max(pointB) AS result from tableB
union
select min(pointA) AS result from tableA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:12:34.907

```
SELECT MAX(high) AS highest
     , MIN(low)  AS lowest
FROM
  ( SELECT MAX(pointA) AS high
         , MIN(pointA) AS low
    FROM tableA
  UNION ALL
    SELECT MAX(pointB) 
         , MIN(pointB) 
    FROM tableB
  ) AS tmp 
```

# java - Java.io：性能调优

> ID：10087534
> 
> 赞同：4
> 
> 时间：2012-04-10T11:06:25.780
> 
> 标签：java, file-io, io, nio, filereader

我有一个大约 4MB 的文件，该文件是一个仅包含普通键盘字符的 ascii 文件。我尝试了 java.io 包中的许多类来将文件内容读取为字符串。逐个字符读取它们（使用 FileReader 和 BufferedReader）大约需要 40 秒，使用 java.nio 包（FileChannel 和 ByteBuffer）读取内容大约需要 25 秒。据我所知，这是更长的时间。有人知道有什么方法可以将这个时间消耗减少到大约 10 秒吗？甚至像使用 C 创建文件阅读器和从 java 调用这样的解决方案也可以。我使用下面的代码片段在 22 秒内读取了 4 MB 文件-

```
public static String getContents(File file) {
    try {
        if (!file.exists() && !file.isFile()) {
            return null;
        }
        FileInputStream in = new FileInputStream(file);
        FileChannel ch = in.getChannel();
        ByteBuffer buf = ByteBuffer.allocateDirect(512);            
        Charset cs = Charset.forName("ASCII");          
        StringBuilder sb = new StringBuilder();
        int rd;
        while ((rd = ch.read(buf)) != -1) {
            buf.rewind();
            CharBuffer chbuf = cs.decode(buf);
            for (int i = 0; i < chbuf.length(); i++) {
                sb.append(chbuf.get());
            }
            buf.clear();
        }
        String contents = sb.toString();
        System.out.println("File Contents:\n"+contents);
        return contents;
    } catch (Exception exception) {
        System.out.println("Error:\n" + exception.getMessage());
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T11:09:58.780

我无法想象你的硬件可能是什么，但对于一个 4 MB 的文件，它应该花费不到 0.1 秒的时间。

一次读取文件的一种快速方法是将其读入一个字节[]

```
public static String readFileAsString(File file) {
    try {
        DataInputStream in = new DataInputStream(FileInputStream(file));
        byte[] bytes = new byte[(int) file.length()];
        in.readFully(bytes);
        in.close();
        return new String(bytes, 0); // ASCII text only.

    } catch (FileNotFoundException e) {
        return null;
    } catch (IOException e) {
        System.out.println("Error:\n" + e.getMessage());
        return null;
    }
}

public static void main(String... args) throws IOException {
    File tmp = File.createTempFile("deleteme", "txt");
    tmp.deleteOnExit();

    byte[] bytes = new byte[4 * 1024 * 1024];
    Arrays.fill(bytes, (byte) 'a');
    FileOutputStream fos = new FileOutputStream(tmp);
    fos.write(bytes);
    fos.close();

    long start = System.nanoTime();
    String s = readFileAsString(tmp);
    long time = System.nanoTime() - start;
    System.out.printf("Took %.3f seconds to read a file with %,d bytes%n",
            time / 1e9, s.length());
} 
```

印刷

```
Took 0.026 seconds to read a file with 4,194,304 bytes 
```

如果您想更快地读取文件，我建议使用内存映射文件，因为它需要不到 10 毫秒的时间，但在这种情况下，这太过分了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T00:36:51.077

1.  在这里使用直接字节缓冲区没有任何好处。
2.  您的 512 缓冲区大小太小。至少使用 4096。
3.  在这里使用 NIO 并没有真正的好处。由于这是文本，我会使用 BufferedReader。
4.  您将整个文件读入内存的基本目标是有缺陷的。它不会扩展，并且已经使用了过多的内存。您应该设计一种策略来一次处理一行文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:10:56.720

您可以增加缓冲区大小，例如增加到 2048 或 4096 字节。

不要使用本机 API，因为您不会获得诸如编译时类型检查之类的 Java 功能。

# android - 在 LibGDX 中更改 3D 坐标系

> ID：10087536
> 
> 赞同：-2
> 
> 时间：2012-04-10T11:06:28.963
> 
> 标签：android, opengl-es, libgdx

目前在 3D 坐标系中，point(0,0) 从中心开始。但我需要它位于左上角。那么如何使用透视相机或任何其他方式来实现它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-11T06:12:44.353

谢谢史蒂夫布莱克威尔..

将相机在 +x 轴向右移动并在 -y 轴向下移动，它将我的视图移动到左上角。

# printing - 物理页面/作业完成时如何从打印机获取通知

> ID：10087539
> 
> 赞同：6
> 
> 时间：2012-04-10T11:06:43.027
> 
> 标签：printing, driver, monitoring

我希望能够在网络打印机物理完成打印页面（和/或整个作业）时收到通知。这将用于我正在编写的通过网络进行打印管理的应用程序，并且由于用户按页面收费，并且在页面实际完成之前费用不应该下降。

我不确定这是否需要编写驱动程序、某种插件或客户端应用程序是否可以。我的平台很灵活，因为我的客户端还没有编写，所以我想听听 Windows 或 Linux 中任何合适的解决方案，任何编程语言/级别。

我知道假脱机程序和打印机之间存在差异。我正在尝试检查当页面或作业物理完成时打印机可能会在哪个级别通过 IPP 通知机器。

我目前正在研究 Java，使用[jspi](http://code.google.com/p/jspi/)或[cups4j](http://www.cups4j.org/)包在 IPP 属性更改时获取通知[`job-impressions-completed`](https://www.rfc-editor.org/rfc/rfc2911#section-4.3.18.2) ，或者轮询它。我正在使用连接本地打印机的 CUPS IPP 接口。运行一个简单的测试器（`HelloPrint.java`附在下面；或`CupsTest.java`包含在 cups4j 中），我没有收到任何`job-impressions-completed`属性更改，也没有在我轮询时列出作业的属性。

所以这里有问题：

*   这样做对吗？如果没有，那我该怎么做？
*   由于这是本地打印机的 CUPS 接口，因此`job-impressions-completed`属性可能没有更新，特别是因为它充当真实打印机的假脱机程序。假设真正的打印机*将*通知或列出此属性，这将是特定于打印机的，还是任何支持 IPP 的打印机都*必须*提供并更新此属性？

系统信息：Ubuntu 11.10，CUPS 1.5.0，打印机是 Brother HL-2240D（[PPD 可在此处获得](http://welcome.solutions.brother.com/bsc/public_s/id/linux/en/download_prn.html#HL-2240D)）

注意：HL-2240D**不是**我将用于最终项目的打印机（具体来说，它不支持 IPP）；我打算使用 HP HL4250DN 或三星 3741ND 或类似产品。

`javax.print`这是一个使用包和 jspi的示例应用程序：

**HelloPrint.java**

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.Date;

import javax.print.*;
import javax.print.attribute.*;
import javax.print.attribute.standard.*;
import javax.print.event.*;

import de.lohndirekt.print.IppPrintService;

public class HelloPrint {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // create request attributes
        PrintRequestAttributeSet requestAttributeSet = new HashPrintRequestAttributeSet();
        requestAttributeSet.add(MediaSizeName.ISO_A4);
        requestAttributeSet.add(new Copies(1));
        requestAttributeSet.add(Sides.DUPLEX);

        // find an appropriate service
        // using jspi (http://code.google.com/p/jspi/)
        URI printerURI;
        try {
            printerURI = new URI("ipp://localhost:631/printers/HL2240D-local");
        } catch (URISyntaxException e2) {
            e2.printStackTrace();
            return;
        }
        IppPrintService service = new IppPrintService(printerURI);

        // by enumerating       
        //      PrintService[] services = PrintServiceLookup.lookupPrintServices(
        //              DocFlavor.INPUT_STREAM.PDF, requestAttributeSet);
        //      for (PrintService service1 : services) {
        //          System.out.println(service1);
        //      }
        //      PrintService service = services[0];

        // add listeners to service
        service.addPrintServiceAttributeListener(new PrintServiceAttributeListener() {
            @Override
            public void attributeUpdate(PrintServiceAttributeEvent event) {
                PrintServiceAttributeSet serviceAttributeSet = event
                        .getAttributes();
                StringBuilder s = new StringBuilder();
                s.append("=== PrintServiceAttributeEvent: (" + serviceAttributeSet.size() + " attributes)\n");
                for (Attribute attribute : serviceAttributeSet.toArray()) {
                    PrintServiceAttribute printServiceAttribute = (PrintServiceAttribute) attribute;

                    s.append(printServiceAttribute.getCategory().getName()
                            + "/" + printServiceAttribute.getName() + " = "
                            + printServiceAttribute.toString() + "\n");

                }
                System.out.println(s.toString());
            }
        });

        // add file (blank.pdf is a blank page exported as PDF from LibreOffice
        // Writer)
        FileInputStream inputStream;
        try {
            inputStream = new FileInputStream("blank.pdf");
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return;
        }

        // create a new doc and job
        DocAttributeSet docAttributeSet = new HashDocAttributeSet();
        docAttributeSet.add(MediaSizeName.ISO_A4);
        docAttributeSet.add(Sides.DUPLEX);

        Doc doc = new SimpleDoc(inputStream, DocFlavor.INPUT_STREAM.PDF,
                docAttributeSet);

        DocPrintJob job = service.createPrintJob();

        // listen to print job attribute change events
        // attribute set is null, means this means to listen on all dynamic
        // attributes that the job supports.
        job.addPrintJobAttributeListener(new PrintJobAttributeListener() {
            @Override
            public void attributeUpdate(PrintJobAttributeEvent event) {
                PrintJobAttributeSet jobAttributeSet = event.getAttributes();
                StringBuilder s = new StringBuilder();
                s.append("=== PrintJobAttributeEvent: (" + jobAttributeSet.size() + " attributes)\n");
                for (Attribute attribute : jobAttributeSet.toArray()) {
                    PrintJobAttribute jobAttribute = (PrintJobAttribute) attribute;

                    s.append(jobAttribute.getCategory().getName() + "/"
                            + jobAttribute.getName() + " = "
                            + jobAttribute.toString() + "\n");

                }
                System.out.println(s.toString());

            }
        }, null);

        // listen to print job events
        job.addPrintJobListener(new PrintJobListener() {

            @Override
            public void printJobRequiresAttention(PrintJobEvent pje) {
                System.out.println("=== PrintJobEvent: printJobRequiresAttention");
            }

            @Override
            public void printJobNoMoreEvents(PrintJobEvent pje) {
                // TODO Auto-generated method stub
                System.out.println("=== PrintJobEvent: printJobNoMoreEvents");
                System.out.println(pje.getPrintEventType());
                System.out.println(pje.toString());
            }

            @Override
            public void printJobFailed(PrintJobEvent pje) {
                // TODO Auto-generated method stub
                System.out.println("=== PrintJobEvent: printJobFailed");
                System.out.println(pje.getPrintEventType());
                System.out.println(pje.toString());
            }

            @Override
            public void printJobCompleted(PrintJobEvent pje) {
                // TODO Auto-generated method stub
                System.out.println("=== PrintJobEvent: printJobCompleted");
                System.out.println(pje.getPrintEventType());
                System.out.println(pje.toString());
            }

            @Override
            public void printJobCanceled(PrintJobEvent pje) {
                // TODO Auto-generated method stub
                System.out.println("=== PrintJobEvent: printJobCanceled");
                System.out.println(pje.getPrintEventType());
                System.out.println(pje.toString());
            }

            @Override
            public void printDataTransferCompleted(PrintJobEvent pje) {
                System.out.println("=== PrintJobEvent: printDataTransferCompleted");
                System.out.println(pje.getPrintEventType());
                System.out.println(pje.toString());
            }
        });

        // print
        try {
            job.print(doc, requestAttributeSet);
        } catch (PrintException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
            return;
        }

        // try polling
        while (true) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
                return;
            }

            System.out.println("=== Polling: I'm alive and it's " + new Date());
            System.out.println("Job attributes");
            for (Attribute attribute : job.getAttributes().toArray()) {
                System.out.println((attribute.getCategory().getName() + "/"
                        + attribute.getName() + " = " + attribute.toString()));
            }
            System.out.println("Service attributes");
            for (Attribute attribute : service.getAttributes().toArray()) {
                System.out.println((attribute.getCategory().getName() + "/"
                        + attribute.getName() + " = " + attribute.toString()));
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-11T10:34:33.447

最后，这一切都取决于打印机固件。**IPP 将属性 job-impressions-completed 指定为 optional**。这意味着如果打印机无法判断打印了哪一页，您将无法读取它——无论您的编程是否正确。

制造商通常声称支持 IPP，但没有很好地记录他们可能已实施（或未实施）的可选部分。

在进行任何编程之前，我建议使用`ipptool`CUPS 提供的所有可用工作属性：

```
#!/usr/bin/env ipptool -tv -d job=482 ipp://192.168.2.113/ipp
{
OPERATION Get-Job-Attributes
GROUP operation-attributes-tag
ATTR charset attributes-charset utf-8
ATTR language attributes-natural-language en
ATTR uri printer-uri $uri
ATTR integer job-id $job
} 
```

`job-state`是一个强制属性，应该在一段时间后达到最终状态`completed`：`aborted`或`canceled`. 如果您可以在其他地方获得作业页面的数量，这可能就足够了。

实现提示：[IppJob](https://github.com/gmuth/ipp-client-kotlin/blob/master/src/main/kotlin/de/gmuth/ipp/client/IppJob.kt)提供方法`waitForTermination()`

# algorithm - 在单个时钟周期内执行的verilog中的余数运算算法

> ID：10087543
> 
> 赞同：0
> 
> 时间：2012-04-10T11:06:53.117
> 
> 标签：algorithm, numbers, verilog, modulo, xilinx

任何讨论该算法的文献链接就足够了。我正在研究 xilinx 中的 verilog 代码。它使用 verilog 的内置 % 运算符。问题是 % 不能在 xilinx 中合成。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T23:04:33.043

在大多数工具中，% 可以模拟但不能合成。

例如，如果你需要 m % n，如果 n 是一个固定数，尤其是 2 的幂，你可以很容易地写出一个。

如果 n 不是 2 的幂，但 m 的取值范围足够小，可以建一个表，并行比较来做调制。

通常，如果 m 是随机的或 n 不固定，则在硬件中很难做到。如果可能，最好更改硬件算法以避免这种调制。

大多数时候，您不需要精确调制，降低 m 和 n 的精度会有所帮助。

# php - 非编码人员最简单的 SOLR 安装？是CMS吗？低预算

> ID：10087549
> 
> 赞同：1
> 
> 时间：2012-04-10T11:06:58.670
> 
> 标签：php, drupal, solr, ezpublish

我需要一种简单的方法来进行强大的搜索。我非常有信心 Solr 是这里的正确解决方案 [solr 可以像 CMS 那样提供单个文档吗？](https://stackoverflow.com/questions/10052453/can-solr-serve-individual-documents-like-a-cms-would)

但是，我正在尝试找到可以与该非程序员一起使用的最佳现成解决方案，该解决方案尽可能轻巧。

在这个阶段，我已经安装了 Solr 3.5 及其工作。

我尝试了 D7，但无法轻松地将所需的数据加载到节点中，它非常非常慢。

我已经尝试过 Joomla，我对此很满意，但是没有可用的真正有效的 SOLR 解决方案，无法与它们连接，而且文档很差。这当然不支持额外的字段，这意味着没有方面。

我们只需要一个非常丑陋、非常轻量级的解决方案，并且更喜欢开箱即用的东西。

我看过一些 PHP 客户端，但据我所知，大多数都不是一个完整的解决方案，我仍然需要编写搜索/结果页面等代码。那部分超出了我的能力。

我可以破解代码但不会编写代码。

Ez publish + Ez find 看起来不错，但我没有这方面的经验，也找不到任何有关定价的信息。

所以我的问题是，我应该坚持并尝试 php 路线吗？有人有现成的解决方案吗？

在将数据加载到节点方面是否对 Drupal6 有更好的支持（大约 150k 记录和 50 个 CCK 字段开始但快速移动到 500k 记录） - 这使用 feed 模块烧毁了 drupal7。

任何想法表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:29:28.780

我只能给你一些关于 eZ Publish 的提示。

## 关于免费/企业版的注意事项

关于 eZ Publish 和 eZ Find，除非您想从 eZ Systems 获得官方支持、维护和专业服务，否则无需支付任何费用。如果您想澄清（或要求更多），请参阅此帖子：[Ez Publish 4.5 是免费的还是只有企业版？](https://stackoverflow.com/questions/5962627/ez-publish-4-5-is-free-or-is-only-enterprise-edition)

## eZ Find 是什么

eZ Find 是您的内容存储库和搜索引擎 (Solr) 之间的高级连接器。启用 eZ Find 后，一旦您发布内容，它就会在 Solr 中编入索引并在搜索模块/视图中可用（如果您要发布大量内容并且不需要更新索引，您也可以启用延迟索引那么多）。

使用 eZFind 和 Solr 时 eZ Publish 支持和实现的功能：

*   模糊匹配
*   方面搜索
*   拼写检查建议（基于 Solr 索引和同义词文件）
*   多语言
*   高级角色和策略管理
*   突出显示
*   相关性计算（可以调整）
*   ...

## 安装

安装 eZ Find 时会提供一个内置的 Solr 服务器，并带有用于常见 Linux 发行版的启动/停止脚本，因此您无需通过 yum、apt-get 或其他方式安装它。如果您愿意，您也可以将其安装在您的服务器（或专用服务器）上，因为您的搜索引擎后端可在 eZ Find 设置中进行配置。

## 发展

取决于您想要做什么，是的，您需要学习一点 eZ Publish，但是使用 eZ Find，在您的网站中随处实施搜索功能将非常容易。不要犹豫，在以下网址寻求帮助：[http](http://share.ez.no) ://share.ez.no 您可能会迷路，但是当您了解 eZ Publish 的概念和基础知识时，这并不难。

最后但并非最不重要的一点是，您需要知道 eZ Find 搜索请求可以使用 Solr 语法进行扩展，因此您不应该被困在任何地方。

## 要发布/索引的内容量

应该不是问题，因为很多安装会处理其数据库中的数百万内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:35:21.533

eZ Find 非常强大，显然在 eZ Publish 中效果很好。安装它实际上非常非常容易。但是，因为它是 eZ Publish，所以会涉及一些模板。查看[这篇文章](http://bit.ly/GNHVMs "安装 eZ Find")，了解如何将 eZ Find 安装到 eZ Publish 中。您遇到 Drupal 速度慢的问题的可能原因是它需要一些非常繁重的服务器端缓存，而 eZ Publish 开箱即用。我不知道有比 eZ Find 更好的 CMS Solr 搜索。另外，请务必查看[文档](http://bit.ly/Is390N "eZ 查找文档")。

# jquery - jqgrid自定义排序与重复

> ID：10087551
> 
> 赞同：0
> 
> 时间：2012-04-10T11:07:06.297
> 
> 标签：jquery, jqgrid

我有一个 jQgrid 列，它将显示数据，如下例所示。

1.  10 个中的 5 个
2.  2 个，共 2 个
3.  5 个，共 5 个
4.  2 of 10....等

    我想实现一个自定义排序，它首先根据“of”之前的数字进行排序，然后对于重复项，它应该使用“of”之后的数字。

我已经使用以下函数实现了主排序。

```
sorttype: function (cellValue, cellObject) {
                        var sortValueArr = cellValue.split(" ");
                        return parseInt(sortValueArr[0]);
                        //return [parseInt(sortValueArr[0]), parseInt(sortValueArr[2])];
                    } 
```

但是我坚持实施重复的二次排序。我用上面的注释行试过了。但它不起作用。

请帮帮我。

所需的输出是

1.  2 个，共 2 个
2.  10 个中的 2 个
3.  5 个，共 5 个
4.  10 个中的 5 个

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:24:52.767

好吧，这不是一个*漂亮*的答案，但是如果您知道第二个数字的硬最大值，则可以将其作为浮点数运行。例如，如果您可以确定第二个数字不会超过 1000，则可以使用以下

```
sorttype: function (cellValue, cellObject)
{
    var sortValueArr = cellValue.split(" ");
    return (parseFloat(sortValueArr[0]) + parseFloat(sortValueArr[2])/1000);
} 
```

# c# - 页面库中所有页面的交互

> ID：10087558
> 
> 赞同：0
> 
> 时间：2012-04-10T11:07:24.847
> 
> 标签：c#, sharepoint, sharepoint-2007, moss, wss

我和我的同事正在调查 SharePoint MOSS 2007 中的过多 SPRequest。我们看到，可能的原因是当单击链接时，页面库中的**所有**页面都被调用（这是基于查看 SQL 分析器）。将有多个 SQL 调用，这意味着在 SPWeb 的页面库中的所有页面中都有迭代。我们检查了所有自定义代码以及 ULS 日志，我们认为这不是我们的代码。

是否可以配置此行为，或者可能有比我们更多的东西？

希望知道这是怎么回事，因为这个问题令人抓狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:13:29.527

过多的 SPRequest 警告可能不一定是因为自定义代码错误，尽管它是原因之一。如果您有大量页面和站点，也可能会导致此问题，因为 PortalSiteMapProvider 会遍历所有页面和站点节点。

[http://insomniacgeek.com/how-to-debug-potentially-excessive-number-of-sprequest-objects-error-message/](http://insomniacgeek.com/how-to-debug-potentially-excessive-number-of-sprequest-objects-error-message/)

# iphone - UIManagedDocument 嵌套上下文

> ID：10087560
> 
> 赞同：3
> 
> 时间：2012-04-10T11:07:30.947
> 
> 标签：iphone, core-data, nsmanagedobjectcontext, uimanageddocument

我一直在阅读苹果文档，但仍然有一个问题，ai 无法找到答案。我有一个 UIManagedDocument 对象，它有两个嵌套的上下文——一个在主线程上的子上下文和一个在私有线程上的父上下文。接下来，我有一个服务器端。因此，当数据从服务器到达时，我想将其插入到后台线程上的托管文档中。

它是线程安全的吗，创建一个异步队列，在那里创建一个 NSManagedObjectContext 并将其设置为在主线程中创建的父 UIManagedDocument 的子上下文？

```
dispatch_queue_t fetchQ = dispatch_queue_create("Data fetcher", NULL);
dispatch_async(fetchQ, ^{
     //here goes some code for downloading data from the server

    NSManagedObjectContext * backgroundContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [backgroundContext setParentContext:self.eventDatabase.managedObjectContext]; // is this thread safe?

    //some code for creating objects in backgroundContext

    NSLog(@"inserting data in background thread");

});
dispatch_release(fetchQ); 
```

换句话说 - 分配给在主线程上创建的私有线程父级上创建的上下文是否线程安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:22:09.880

您正在使用私有并发类型。这意味着，您应该在自己的队列上运行代码（通过 performBlock）。所以，如果你想这样做，你应该这样做......

```
NSManagedObjectContext * backgroundContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
backgroundContext.parentContext = self.eventDatabase.managedDocument;
backgroundContext.performBlock:^{
    //here goes some code for downloading data from the server
    //some code for creating objects in backgroundContext

    NSLog(@"inserting data in background thread");

    // Calling save on the background context will push the changes up to the document.
    NSError *error = nil;
    [backgroundContext save:&error];

    // Now, the changes will have been pushed into the MOC of the document, but
    // the auto-save will not have fired.  You must make this call to tell the document
    // that it can save recent changes.
    [self.eventDatabase updateChangeCount:UIDocumentChangeDone];
}); 
```

如果您想自己管理队列，您可能应该使用限制 MOC，您应该使用 NSConfinementConcurrencyType 或标准 init 进行初始化，因为这是默认设置。然后，它看起来像这样......

```
dispatch_queue_t fetchQ = dispatch_queue_create("Data fetcher", NULL);
dispatch_async(fetchQ, ^{
    backgroundContext.parentContext = self.eventDatabase.managedDocument;

    //here goes some code for downloading data from the server

    NSManagedObjectContext * backgroundContext = [[NSManagedObjectContext alloc] init];

    // Everything else is as in the code above for the private MOC.
});
dispatch_release(fetchQ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:22:39.633

没有安德鲁 managedobjectcontext 不是线程安全的。为了实现你想要的，你必须创建一个子托管上下文，做你的事情，然后保存对子上下文和父上下文的更改。请记住，保存只会将更改推高一级。

```
NSManagedObjectContext *addingContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[addingContext setParentContext:[self.fetchedResultsController managedObjectContext]];

[addingContext performBlock:^{
    // do your stuffs
    [addingContext save:&error];

    [parent performBlock:^{
        [parent save:&parentError];
    }];
}]; 
```

# mysql - 无法添加新的 MySQL 数据连接 VS2010

> ID：10087567
> 
> 赞同：2
> 
> 时间：2012-04-10T11:08:34.597
> 
> 标签：mysql, visual-studio-2010

我试图在 Visual Studio 2010 中添加一个新的数据连接，但每次我尝试输入一个 IP 地址到我的 MySQL 服务器。对话框消失，没有给我任何原因或错误消息。在听到任何解决方案之前，有没有人看到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:16:08.183

我找到了解决问题的方法。这是卸载并重新安装最新版本的 MySQL 连接器。[对于有相同问题的其他人，可以在此处找到](http://bugs.mysql.com/bug.php?id=55623)谈论该问题的网站。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:44:04.453

我有一个类似的问题。基本上，每次我打开 Visual Studio 2010 并尝试添加 MySQL 连接时，在任何字段中键入一个字母后，对话框都会消失。我尝试了各种方法，包括多次重新安装 Visual Studio、MySQL 连接器和 MySQL 服务器本身，但都没有解决问题。

然而，我也安装了 Visual Studio 2008，我注意到我可以毫不费力地添加 MySQL 连接，但这并没有帮助，因为项目是在 VS2010 中。这让我觉得这一定是我的机器上安装 Framework 4.0 的方式有问题。长话短说，这就是我解决问题的方法：

1) 导航到 Framework 4 文件夹（在我的例子中是'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config'）

2) 打开 machine.config 文件并在该部分`<DbProviderFactories>`下查找标签。`<system.data>`

3) 在这里，我注意到 Framework 2.0 的设置方式有所不同。在 4.0 中，有两组`<DbProviderFactories>`标签，而 2.0 有一组。

4）我所做的就是`<DbProviderFactories>`通过删除`</DbProviderFactories><DbProviderFactories>`中间的来合并一组标签下的所有内容。

5）我保存了 machine.config 文件（顺便说一下，我必须保存到另一个目录，然后复制并粘贴到原始目录上），重新启动 Visual Studio 2010，对话框停止消失。

希望这可以帮助任何面临类似问题的人。花了3天时间试图弄清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T17:55:02.300

我遇到了同样的问题——输入一个字符后数据连接——>添加连接对话框消失——但仅适用于 MySQL。在我的研究中，我发现了一个帖子（我不知道在哪里了 - 抱歉）它与 IIS 身份验证有关。我在“控制面板”->“程序和功能”中有 IIS，但在“管理工具”中没有。从进一步的研究中，我感觉到我需要在新的（ish）PC 上激活 IIS。下一页给出了相关说明。我不得不向下滚动到 Win 8 部分。

[http://msdn.microsoft.com/en-us/library/hh167503%28v=nav.70%29.aspx](http://msdn.microsoft.com/en-us/library/hh167503%28v=nav.70%29.aspx)

在这些步骤之后，我能够在管理工具中看到 IIS，并在 VS 2012 中正确填写数据连接 - > 添加连接对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-15T12:39:07.210

大家好，我给了你简单的解决方案。我有同样的问题，这浪费了我很多时间。我给了你一个简单的解决方案，你首先从这里安装 Microsoft .NET Framework Version 1.1 Redistributable Package

[http://www.microsoft.com/en-us/download/confirmation.aspx?id=26](http://www.microsoft.com/en-us/download/confirmation.aspx?id=26)

然后从这里下载连接器/网络

[http://dev.mysql.com/downloads/connector/net/](http://dev.mysql.com/downloads/connector/net/)

之后重新启动视觉工作室，然后连接你填写的数据库，没有错误或错误。

如果您有同样的问题，请尝试这个。

# drupal - 在 Drupal 中定义内容类型时

> ID：10087568
> 
> 赞同：0
> 
> 时间：2012-04-10T11:08:46.873
> 
> 标签：drupal, drupal-7, drupal-modules

目前我有一个模块可以上传文件、提取文件、读取一些文件并将其存储在数据库中。因为我只是一名 PHP 开发人员而不是 Drupal 开发人员，所以我不熟悉 Content Types 、 Views 和其他 Drupal 东西。我只想将数据库中的一些内容显示到多个页面并编辑一些内容（不是所有内容）。

用 PHP 做这件事就像把简报放在信封里一样容易，但在 Drupal 中，就像你把轮椅放在那个信封里一样。

我必须为它定义一个内容类型吗？

**如果我不使用内容类型并手动控制权限，是否容易？**

假设我必须定义一个内容类型。我的数据库有 5 个表。我应该定义 5 种不同的内容类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:28:17.277

如果您也需要一些 Drupal 的东西来处理您的数据，那么您不必以 Drupal 的方式进行操作。我还开发了一个模块。它访问数据库，显示其中的数据，然后授权用户可以更新数据，我的模块将保存它。但这些不会是节点。除非您需要（例如）一些在节点上运行的钩子以在您的内容上运行，否则只需使用您的 PHP 知识为页面创建内容。

您使用 hook_menu 来定义将显示您的页面的路径。例如，在我的代码（detail_pages 模块）中，查询在 example.com/strain/3/4 之类的路径中获取两个参数，我将其定义如下，我在 detail_page($arg1, $ arg2) 函数定义。

```
function detail_pages_menu() {
  $items = array();
  $items['strain/%/%'] = array(
      'title' => t('Strain Detail Page'),
      //'page callback' => 'strain_form',
      'page callback' => 'detail_page',//'drupal_get_form',
      //'page arguments' => array('strain_detail_form'),
      'page arguments' => array(1,2),
      'access callback' => TRUE,
      'access arguments' => array('access content'),
      'description' => t('Detail Page'),
      'type' => MENU_NORMAL_ITEM,
  );
.... 
```

回答您的具体问题

> 我必须为它定义一个内容类型吗？

不，您可以使用页面渲染数组，甚至可以将直接 html 添加到 PHP 中的页面。

> 如果我不使用内容类型并手动控制权限，是否容易？

是的。在上面我写的例子中，这一行是权限：'access callback' => TRUE 这允许每个人查看。您可以分配一个函数来代替 TRUE，以返回一个布尔值来表示用户是否有权查看该页面。

> 假设我必须定义一个内容类型。我的数据库有 5 个表。我应该定义 5 种不同的内容类型吗？

特别是如果您需要一个好的数据库结构，您可能希望避免使用节点和定义内容类型。Drupal 为按节点 ID 逻辑键控的列创建一个表。所以你有很多不必要的桌子......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:16:44.553

有很多方法可以实现您想要的。根据您的描述，我认为您想在某些页面上显示一些信息（不知道您所说的“编辑某些东西”是什么意思）。

1.  您可以有一个块（=多个页面上的定义区域） 在 Drupal 中，您可以使用规则或 PHP 来控制该块将出现哪些页面（例如内容类型“页面”）。
2.  具有自定义节点结构的内容类型类似于 page.tpl.php 和 node.tpl.php（可能会在这里混淆扩展，已经有一段时间了）定义主题所包含的某些部分的结构，您可以拥有您的内容类型-节点使用 PHP、HTML 和 CSS 显示您想要的任何信息。（就像该内容类型的所有对象的包装器）
3.  面板面板用于拆分页面。您的菜单项可以指向单独的面板，例如，页面的上部是静态“页面”（=该内容类型的节点），下部是另一个“页面”，其中包含用于显示您的信息的 PHP 代码。

在所有三个选项中，您都可以显示个性化数据，这意味着您有全局变量来告诉您用户 ID、姓名、角色等，以便从数据库加载特定数据并相应地呈现。

结论：内容类型使一切更容易组织，但如果您只有一个该类型/结构的实例（=节点），您可以将代码放在“页面”中。

随时询问更多细节。

# linux - 给定两个目录树如何找到相同的文件？

> ID：10087571
> 
> 赞同：39
> 
> 时间：2012-04-10T11:08:53.317
> 
> 标签：linux, bash, diff

我正在编写一个 bash 脚本，我想知道两个目录树中哪些文件是相同的。

这与使用差异相反。

好吧，我自己找到了答案。我以前尝试过，但我认为它不起作用。

```
diff -srq dir1/ dir2/ | grep identical 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-06T09:01:48.950

好吧，我自己找到了答案。我以前尝试过，但我认为它不起作用。

```
diff -srq dir1/ dir2/ | grep identical 
```

**-srq**是什么意思？从**diff --help**：

```
-s  --report-identical-files  Report when two files are the same.
-r  --recursive  Recursively compare any subdirectories found.
-q  --brief  Output only whether files differ. 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-09T16:52:36.617

您可以使用*fdupes*或*rdfind 之*类的实用程序来列出重复文件。例如：

```
fdupes --recurse dir1 dir2 
```

您可能还希望使用该`--sameline`标志在同一行而不是在文本块中列出所有重复项，具体取决于您要如何解析结果。

# filter - SEO，我是否应该出于 SEO 目的操纵网站中显示的 URI？

> ID：10087572
> 
> 赞同：0
> 
> 时间：2012-04-10T11:08:53.317
> 
> 标签：filter, seo, uri

我正在设计一个网站，就像[Reddit](http://www.reddit.com)一样，首页有许多过滤器，例如“新”、“顶部”、“历史”、“活动”......

如果您要单击过滤器“新”，我们的网址将从

```
www.mywebsite.com/main/ 
```

至

```
www.mywebsite.com/main/new 
```

并且显示的数据会更改其顺序以显示“最新”内容。

但是，我听说出于 SEO 的目的，指向您网站的链接越多越好，我认为即使在您点击过滤器后保持 URI 相同的方式可能是个好主意，所以您会点击'new' 并且 URI 仍会显示

```
www.mywebsite.com/main/ 
```

这样做，如果有 4 个人共享我的网站，它会更好地显示在谷歌上，对吗？因为谷歌会看到这一点（即使他们在查看过滤器时复制粘贴 URI）并且所有 4 个链接都是相同的。

```
www.mywebsite.com/main/
www.mywebsite.com/main/
www.mywebsite.com/main/
www.mywebsite.com/main/ 
```

如果我不这样做，人们可能会像这样分享 4 个链接

```
www.mywebsite.com/main/new
www.mywebsite.com/main/active
www.mywebsite.com/main/top
www.mywebsite.com/main/ 
```

谷歌会将它们视为不同的链接，从而减少我的主页的“声誉”并通过不同的过滤器传播它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:12:19.043

AFAIK，您可以在元标记中向页面 (1) 添加规范链接，并且 (2) 是的，同一页面应该只有一个链接，否则看起来像是重复的内容，目前谷歌没有喜欢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:17:15.893

使用规范标签来避免重复的内容惩罚，但仍然对 new/top/etc 使用不同的 URL，这样您仍然可以在 Google 的 SERP 中获得良好的结果，并且链接也对用户有用。

# jquery - 在最后一个 div jquery 之前在另一个 div 中附加一个 div

> ID：10087573
> 
> 赞同：1
> 
> 时间：2012-04-10T11:08:58.213
> 
> 标签：jquery

假设我有 div 喜欢

```
<div id='main'>
  <div id='child'>my static content</div>
</div>

$('#main').append("<div class='mycontent'>I'm new box by append</div>");
or
$('#main').appendTo("<div class='mycontent'>I'm new box by append</div>"); 
```

我知道我可以使用**append() 和 appendTo**方法将任何内容插入主 div。但我需要知道如何在子 div 之前将内容插入主 div。内容将在子 div 之前推送到主 div。请帮助我的概念。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:11:45.983

[http://api.jquery.com/before/](http://api.jquery.com/before/)

如果你想要它在最后一个子 div 之前：

```
$("#main > div:last-child").before("<div class='mycontent'>I'm new box by append</div>"); 
```

或者如果你想在特定的 div 之前使用它：

```
$("#child").before("<div class='mycontent'>I'm new box by append</div>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:12:34.723

这边走：

```
$('#main #child').before('<p>Something</p>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:11:37.217

尝试这个：

```
$('#child').before("<div class='mycontent'>I'm new box by append</div>"); 
```

也可能会有用：

```
$('#child').after("<div class='mycontent'>I'm new box by append</div>"); 
```

# perl - Archive::Zip 复制添加的文件 - 如何正确更新 zip 中的文件？

> ID：10087576
> 
> 赞同：0
> 
> 时间：2012-04-10T11:09:07.610
> 
> 标签：perl

我有一个 zip 文件，我必须更新文件夹下的文件，以下块工作“很好”，它在指定的路径下正确添加文件 node.ndf。

但是如果我第二次或更多次运行它，它会复制文件夹下的文件

例如：

* * *

第一次运行：

文件.zip 内容：

清单.v3

ns/adapt/node.ndf

* * *

第二次运行：

清单.v3

ns/adapt/node.ndf

ns/adapt/node.ndf

* * *

等等...

这是我当前使用的代码：

```
$obj = Archive::Zip->new();  

$status = $obj->read($file); 

if ($status != AZ_OK) {
die('Error in file!');
    } else {
        @files = ('node.ndf');

       foreach $filea (@files) {
    $obj->addFile($filea); 
    $obj->addTreeMatching( '.', 'ns/adapt/', 'node.ndf' );
   }

   if ($obj->overwrite() != AZ_OK) {  
    print "Error in archive creation!";
    exit;

    } else {
    print "Archive created successfully!";
    }
unlink('node.ndf');
 } 
```

任何人都知道 Archive::Zip 的正确用法是为了更新 zip 文件的文件夹结构下的文件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:08:54.720

你可以

```
$obj->removeMember('ns/adapt/node.ndf');
$obj->addFile('node.ndf', 'ns/adapt/node.ndf'); 
```

或者，如果您的`node.ndf`文件已更改大小或修改时间，您可以在一个步骤中完成这两项操作

```
$obj->updateMember('ns/adapt/node.ndf', 'node.ndf'); 
```

# java - 是否有任何工具可以帮助我将数据从 Java Swing 代码转换为模板文件？

> ID：10087577
> 
> 赞同：0
> 
> 时间：2012-04-10T11:09:10.587
> 
> 标签：java, swing, templates

我使用 Swing 设计了一个基于文本区域的表单，当我将数据输入文本字段并单击提交按钮时，我希望将该数据转换为 xml 格式的模板文件。有什么工具可以帮助我实现这个目的吗？

谢谢纳夫尼特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:42:31.940

我不知道...这就是我的做法：

1.  创建一个保存数据的 java bean
2.  使用[jgoodies binding](http://www.jgoodies.com/downloads/libraries.html)之类的东西将上面的 bean 实例绑定到 gui 表单。对于不是表格或树形表的任何事情，它都是微不足道的。
3.  [使用简单](http://simple.sourceforge.net/)的东西将你的bean序列化为xml。

# jquery - jquery问题将数据从div复制到输入文本

> ID：10087578
> 
> 赞同：0
> 
> 时间：2012-04-10T11:09:12.537
> 
> 标签：jquery, in-place

我正在为表单进行就地编辑。我有两个 div，其中一个包含显示元素，另一个包含输入表单。

当您单击编辑数据时，会从显示 div 移动到输入表单。当我使用 val(text) 时，我看到了变化，但是当我将表单序列化为 json 元素时是旧的。

我需要一些帮助来了解这里的问题是什么？

这是一些代码：

```
function editForm2(){
    $("#editLink").click(function() {
        if (this.text == 'Edit') {
            console.log('editing');
            $("#display div.edit").each(function(i) {
                var e = $("#input :input")[i];
                $(e).val($(this).text());
            });
            $("#display").hide();
            $("#input").show();
            $(this).text('Save');
        }
        else if (this.text =='Save') {
            // problem is here... When I serialize the form I got nothing ?!
            console.log('saving');
            console.log($("#form1 :input")); // old values

            var json_form = $('#form1').serializeObject();
            console.log(json_form); // old values?
            $(this).text('Edit');

            $("#display").show();
            $("#input").hide();
        }
    });

    console.log(this);
}

$(document).ready(function() {
    editForm2();
});​ 
```

这是html

```
<div class="editSection" id="display" >
    <div id="person_firstName" class="edit" width="200">
        Hello
    </div>
    <div id="person_lastName" class="edit">
        World
    </div>
</div>

<div class="editSectionEdit" id="input" >
    <form id="form1">
        <input name="person_firstName_in" type="text" class="edit" value="123" >
        <input name="person_lastName_in" type="text" class="edit" value="456" >
    </form>
</div><br/>

<div id="buttons">
    <a href="#" id="editLink">Edit</a>
    <a href="#" id="cancelLink">Cancel</a>
</div><br>

<pre id="result"></pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:31:28.563

问题是`.serializeObject()`萤火虫报告为未定义。

这是您的解决方案

```
var json_form = $('#form1').serialize(); 
```

[在这里检查](http://jsfiddle.net/Starx/hBC39/)

# aptana - files\folders 在 Aptana Studio 的 Project Explorer 中出现两次

> ID：10087579
> 
> 赞同：0
> 
> 时间：2012-04-10T11:09:17.510
> 
> 标签：aptana, aptana3

由于某种原因，许多不同类型的文件甚至文件夹在我的设置中的 Aptana 项目资源管理器中出现了两次。在每一对这样的夫妇中，其中一件物品`+`旁边有一个小物品，而一件没有。

怎么来的？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:28:34.257

一种解决方法是从 Project Explorer 的下拉菜单中使用 Custom View... 并取消选中 Content > Local Filesystem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:57:14.523

虽然我从未见过这种情况，但这听起来像是一个错误，可能是您的设置所特有的。我建议在[http://jira.appcelerator.org](http://jira.appcelerator.org)提交更多详细信息。

# c++ - 应用程序定义的异常

> ID：10087590
> 
> 赞同：0
> 
> 时间：2012-04-10T11:10:02.537
> 
> 标签：c++, c++builder

谁能解释一下C++ Builder XE中的以下**“调试器故障通知”是什么意思：**

```
"Project ... faulted with message: 'application-defined exception (code 0x0eefface) at 0x755ad36f. Process Stopped. Use Step or Run to continue." 
```

它仅在我需要抛出异常时发生 - throw 的调用会引发此错误。我找不到有关此问题的任何信息。

抛出异常：

```
#define MY_ERROR_CODE 0xE0000046

throw TMyTrouble(MY_ERROR_CODE, "My error message"); // calling of this raises the application-defined exception... 
```

捕捉：

```
try{
Function(); // function that raises the exception TMyTrouble
}
catch(...){ // this catch should catch the exception but it doesn't
// do something
throw; // throw to upper layer
} 
```

异常定义：

```
class TMyTrouble{
      public:
        TMyTrouble(int errorCode = 0xFFFFFFFF, AnsiString errorMessage = "Unknown error") { FMessage = errorMessage; FCode = errorCode;}
        __property AnsiString Message = {read = FMessage};
        __property unsigned long Code = {read = FCode};

      private:
        unsigned long FCode;
        AnsiString FMessage;
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:57:49.967

您所看到的是完全正常的行为。您所看到的称为“第一次机会异常”消息。在应用程序看到异常之前，调试器正在报告该消息。这可以从消息中的文本中看出：“进程已停止。使用 Step 或 Run 继续”。只需按照消息中的说明进行操作 - 只需按 F9 或按工具栏上的“运行”按钮即可继续执行，异常将被传递回应用程序以在其`try/catch`块中进行正常处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:33:16.297

我向你们所有人道歉，问题出在 throw 语句之前的构造中：

```
byte value;
sscanf(buffer, "%02x", &value); 
```

你能看出问题吗？该`sscanf`函数为该格式字符串返回`"%02x"`一个长值（4个字节），但我有一个字节变量`value`（1个字节） - 所以3个字节被写入某处并且堆栈被损坏（或其他东西），是什么导致我的问题......

感谢您的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:05:35.563

这不只是调试器的说法，“我刚刚注意到抛出了一个异常，你想做什么？”

如果您不希望调试器在抛出异常时停止，则可以使用相应的设置。

如果您选择继续，那么您的代码应该会捕获它。

# android - 从模拟器内部获取 BOOT_COMPLETED

> ID：10087593
> 
> 赞同：0
> 
> 时间：2012-04-10T11:10:19.020
> 
> 标签：android, scripting, emulation

如果 ACTION_BOOT_COMPLETED 在模拟器中出现，外部应用程序（如 bash 脚本）是否可以得到通知？我想将一些模拟器的东西一起编写脚本，然后等待固定的 120 秒，让模拟器启动可能有点不太准确。

# assembly - MIPS 返回值不正确

> ID：10087595
> 
> 赞同：0
> 
> 时间：2012-04-10T11:10:23.383
> 
> 标签：assembly, mips

我有这个 C 函数：

```
int bin_img(unsigned char *ptr, int w, int h, unsigned char limiar); 
```

在我的代码中，我使用这样的函数：

```
printf("The value is %d\n",bin_img(dp, width, height, LIMIAR)); 
```

想象一下变量是这样定义的：

```
#define LIMIAR 128
unsigned char *dp;
int w = 5;
int h = 0;

dp[] = {74,250,153,28,26} 
```

我必须在 MIPS 中编写我的 bin_img 函数。

想象一下我有这个代码：

```
bin_img:

    lb  $15,0($4)   
    move    $2,$15
    jr  $31 
```

它将打印 74 女巫是我数组的第一个元素。如果我做

```
bin_img:

    lb  $15,1($4)   
    move    $2,$15
    jr  $31 
```

或这个：

```
bin_img:

    lb  $15,2($4)   
    move    $2,$15
    jr  $31 
```

它会打印一些负数，如果我这样做：

```
bin_img:

    lb  $15,3($4)   
    move    $2,$15
    jr  $31 
```

或这个

```
bin_img:

    lb  $15,4($4)   
    move    $2,$15
    jr  $31 
```

它将分别打印 28 和 26。为什么要打印负数？

它不应该打印 250 和 153 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:36:41.287

它正在打印负数，因为您使用的是 LoadByte 的签名版本`lb`而不是未签名版本`lbu`。

该`lb`指令从内存中读取一个字节并将其存储在目标寄存器的 8 个最低有效位中，并将剩余的 24 个位设置为所读取字节的最高有效位的值。该`lbu`指令将这 24 位设置为零。

因此，您发出的打印数字的系统调用将寄存器内容视为 A2 补充，因此当您的输入字节> = 128 时打印负数。要修复您的程序，您应该使用该`lbu`指令。

# c++ - 用户定义对象的 C++ 数据转换

> ID：10087598
> 
> 赞同：1
> 
> 时间：2012-04-10T11:10:36.487
> 
> 标签：c++

在这个程序中，我们使用从 a 类到 c 类的数据转换。当我们使用

```
a(c c1)
{
   return (c1.getd()*100)
}
// constructor in class a, this is correct, but when when we use

c(a a1)
{
   return (a1.getb()/100)
}
// constructor, then compile error comming that getb is not a member of a please clear what is the problem.

#include<iostream.h>
#include<conio.h>

    class a;
    class c {
       int d;
       public:
          c() {
             d=0;
          }
          c(int x) {
             d=x;
          }
          int getd() {
             return d;
          }
          void putdata() {
             cout<<d;
          }
          c(a a1){ 
             d=(a1.getb()/100);//here is compile error coming --getb is not a member of a
          }
  };
  class a {   
     int b;
     public:
       a() {
     b=0;
       }
       a(int x) {
     b=x;
       }
       void putdata() {
         cout<<b;
       }
       int getb() {
         return b;
       } 
   };

  void main() {
    c c1;
    a a1=100;
    a a2(100);
    c1=a1;

    c1.putdata();
    getch();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:17:38.973

`a`被（前向）声明，但在遇到该函数定义时未定义。将定义移到 的定义之后`class a`：

```
class a;

class c {
    int d;
public:
    c() { d=0; }
    c(int x) { d=x; }
    int getd() { return d; }
    void putdata() { cout<<d; }

    c(a& a1); // Pass a1 as reference as class a is not yet defined.
  };

class a
{
...
};

c::c(a& a1)
{ 
    d=(a1.getb()/100);
} 
```

此外，`#include <iostream>`而不是`#include <iostream.h>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:20:22.803

当你写

```
class a; 
```

您承诺您将在稍后阶段定义“a 类”。

然后，您在定义它之前使用了类 a。可以通过在定义类 a 之后编写使用类 a 的代码来使代码工作。

```
#include<iostream>
#include<conio.h>

using namespace std;

class a;
class c
{
    int d;
public:
    c():d(0)         {}
    c(int x):d(x)    {}
    int getd()       {return d;}
    void putdata()   {cout<<d;}
    c(a a1);     // defined after class a is defined

};

class a
{   int b;
public:
    a():b(0)         {}
    a(int x): b(x)   {}

    void putdata()   {cout<<b;}
    int getb()       {return b;}     
};

c::c(a a1)
{
    // uses class a after it is defined
    d=(a1.getb()/100);
}

void main()
{
    c c1;
    a a1=100;
    a a2(100);
    c1=a1;

    c1.putdata();
    getch();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:20:36.977

编译器总是从顶部解析您的文本文件，因此在使用方法或函数之前，您必须定义它。

您的行`class a;`告诉编译器有一个名为 a 的类，但此时编译器不知道任何成员函数。

如果你把下面的代码放在类 c 的声明之前，那么编译器就知道在`getb`类 a 的对象上使用 mehod 是不违法的，即使它不知道方法做了什么。

```
class a
{
    public:
        int getb();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T11:47:25.293

我认为问题在于声明类的顺序。尝试以下操作：

```
#include<iostream.h>
#include<conio.h>

class a
{
  int b;

public:

  a()
  {
    b=0;
  }

  a(int x)
  {
    b=x;
  }

  void putdata()
  {
    cout<<b;
  }

  int getb()
  {
    return b;
  }

};

class c
{
  int d;

public:

  c()
  {
    d=0;
  }

  c(int x)
  {
    d=x;
  }

  int getd()
  {
    return d;
  }

  void putdata()
  {
    cout<<d;
  }

  c(a a1)
  {
    d=(a1.getb()/100);//here is compile error coming --getb is not a member of a
  }

 };

int main()
{
c c1;
a a1=100;
a a2(100);
c1=a1;

c1.putdata();
getch();

return 0;
} 
```

# winforms - 在 DataGridView 中隐藏列会导致 HeaderRow 也隐藏？

> ID：10087600
> 
> 赞同：0
> 
> 时间：2012-04-10T11:10:45.443
> 
> 标签：winforms, datagridview

当我试图隐藏我的 DataGridView 中的第一列时，它是一个非空的 CheckBox 列，它也隐藏了标题行。

```
dgvWeeklyReport.Columns[0].Visible = false; 
```

这样做的正确方法是什么？

# c# - 如何在 mydevexpress gridview 中插入全选复选框？

> ID：10087602
> 
> 赞同：1
> 
> 时间：2012-04-10T11:10:52.210
> 
> 标签：c#, asp.net-mvc, gridview, devexpress

我使用 gridview 并为每一行插入了带有 gridview 功能行选择的复选框（http://mvc.devexpress.com/GridView/RowSelection）。现在我想要一个功能来在单击某个按钮时选择所有复选框，但我无法让它工作。我尝试使用谷歌搜索并找到了很多答案，但它们对我不起作用，因为我对 Microsoft Visual Studio 还很陌生，或者我可能做错了。我希望你能把我推向正确的方向。

编辑：我修好了，它比我想象的要简单得多。

解决方案：将以下内容添加到您的 gridview 中，您的 gridview 中有一个 selectall 功能：

```
settings.CommandColumn.SetHeaderTemplateContent(c =>
{
    Html.DevExpress().CheckBox(settingsCheckBox =>
    {
        settingsCheckBox.Name = "cbSelectAll";
        settingsCheckBox.Properties.ClientSideEvents.CheckedChanged =
        string.Format("function(s, e) {{ if(s.GetChecked()) {0}.SelectRows(); else {0}.UnselectRows();     }}",
        settings.Name);
        settingsCheckBox.Checked = c.Grid.VisibleRowCount == c.Grid.Selection.Count;
    }).Render();
}); 
```

我为我糟糕的英语道歉。谢谢，马可

# sql - 在给定开始日期和结束日期的情况下获取具有一周间隔的所有日期

> ID：10087605
> 
> 赞同：2
> 
> 时间：2012-04-10T11:10:57.207
> 
> 标签：sql, sql-server, sql-server-2008, tsql, datetime

我有一个事件记录数据库，我需要找到每个客户的所有事件，并从每个客户的最后一条记录到第一个记录以一周的间隔对它们进行分组。

```
FirstEvent                  LastEvent               Client
==
2011-01-01 06:55:21.000 |2011-04-30 21:46:09.000    |Client1
2011-01-01 06:20:00.000 |2011-02-23 12:43:55.000    |Client2
2011-01-03 08:34:33.000 |2011-04-30 09:00:39.000    |Client3
2011-01-01 02:14:45.000 |2011-04-30 15:31:41.000    |Client4
2011-01-01 08:08:12.000 |2011-02-21 09:41:28.000    |Client5
2011-02-01 11:29:28.000 |2011-04-29 09:13:25.000    |Client6 
```

现在我必须计算每个客户的记录并像这样对它们进行分组

```
Client     From                    To                        Records
==
Client1   |2011-04-30 21:46:09.000 |2011-04-23 21:46:09.000  |200
Client1   |2011-04-16 21:46:09.000 |2011-04-09 21:46:09.000  |400
                                 ...Until the the first date
Client1   |2011-01-08 06:55:21.000 |2011-01-01 06:55:21.000  |250
Client2   |2011-02-23 12:43:55.000 |2011-02-16 12:43:55.000  |50
                                 ...The same for each user 
```

我希望有人可以帮助我找到一种方法来输出这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:29:54.897

您可以使用 DATEDIFF 函数按周分组。

```
SELECT e.[Client]
, [From] = MIN(e.EventDate)
, [To] = MAX(e.EventDate)
, [Records] = COUNT(*)
FROM Events AS e
GROUP BY e.[Client]
, DATEDIFF(week, '1900-01-01', e.EventDate) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:37:47.010

好的，我认为这正是您想要的：

```
SELECT CONVERT(datetime, '2011-01-01 06:55:21.000', 120) AS event, 'client1' AS Client
INTO #EVENTS
UNION ALL SELECT '2011-01-08 06:55:20.000', 'client1'
UNION ALL SELECT '2011-04-30 21:46:09.000', 'client1'

;WITH E AS (
    SELECT
        Client,
        MIN(event) AS FirstEvent
    FROM #EVENTS
    GROUP BY Client
)
,B AS (
    SELECT
        E.Client,
        E.FirstEvent,
        COUNT(*) AS Records,
        DATEDIFF(DAY, 0, c.event - E.FirstEvent) / 7 AS [weeks]     
    FROM #EVENTS c
    JOIN E ON E.Client = c.Client
    GROUP BY E.Client, E.FirstEvent, DATEDIFF(DAY, 0, c.event - E.FirstEvent) / 7
)
SELECT
    Client,
    DATEADD(WEEK, weeks, FirstEvent) AS [From],
    DATEADD(WEEK, weeks + 1, FirstEvent) AS [To],
    Records
FROM B
ORDER BY Client, weeks;

DROP TABLE #EVENTS 
```

但是，如果某一周没有记录，它将忽略该行，而不是返回包含 Records 值为 0 的行：

**编辑：**

如果您想知道为什么我使用`DAY`而不是`WEEK`for my `DATEDIFF`，这是为了避免周日或周一是一周的第一天的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:53:43.107

如果开始和结束之间的周数小于 2048，这应该有效，如果不是，那么我建议使用数字表。

```
SELECT
client
,DATEADD(WK,(number * -1) -1,fromdate) as [from]
,DATEADD(WK,number * -1,fromdate) as [to]
,COUNT(client) as records
from #sample
LEFT OUTER JOIN (SELECT number FROM dbo.spt_values WHERE type = 'p') nums 
on nums.number <= DATEDIFF(WK,todate,fromdate)
GROUP BY client
,DATEADD(WK,(number * -1) -1,fromdate) 
,DATEADD(WK,number * -1,fromdate) 
ORDER BY 
client
,DATEADD(WK,(number * -1) -1,fromdate) DESC 
```

# mysql - SQL：如何强制关系运算符考虑 NULL 值

> ID：10087607
> 
> 赞同：3
> 
> 时间：2012-04-10T11:11:10.663
> 
> 标签：mysql, sql, where-clause

我有 2 个表（表 1 和表 2）。我想执行以下查询：

```
UPDATE TABLE1 a,TABLE1 b
SET a.desg=CASE WHEN b.attribute_id=74 THEN b.value ELSE a.desc END
WHERE a.entity_id=b.entity_id; 
```

但是我在 TABLE1 中有一些行，entity_id 为 NULL。
评估时未考虑这些`WHERE a.entity_id=b.entity_id;`

我什至希望为这个 WHERE 子句考虑 NULL。

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T11:14:58.467

```
UPDATE TABLE1 a, TABLE1 b
SET a.desg = CASE WHEN b.attribute_id=74 THEN b.value ELSE a.desc END
WHERE a.entity_id=b.entity_id OR (a.entity_id IS NULL AND b.entity_id IS NULL) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:13:53.163

尝试使用类似的东西

```
WHERE IFNULL(a.entity_id, 0) = IFNULL(b.entity_id, 0); 
```

# android - 显示进度条，然后在我恢复活动时将其隐藏

> ID：10087609
> 
> 赞同：2
> 
> 时间：2012-04-10T11:11:18.747
> 
> 标签：android, android-activity, progress-bar, onresume

好吧。例如，当我按下按钮时，我想将进度条的可见性设置为 VISIBLE ......然后我想在恢复相同的活动时将可见性设置为 GONE。

如果可能，同时加载其他数据。

这是我正在尝试的：

```
public void onPause(){
super.onPause();
final ProgressBar progressBar = (ProgressBar) findViewById(R.id.progressBar);
progressBar.setVisibility(View.GONE);
} 
```

和

```
 Button aButton = (Button) findViewById(R.id.abutton);
    aButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
        final ProgressBar   progressBar = (ProgressBar) findViewById(R.id.progressBar);
        progressBar.setVisibility(View.VISIBLE);

    Intent i = new Intent("org.packagename.etc.etc");
        startActivity(i);
        }
    }); 
```

但它不起作用，因为当我单击按钮时它不显示栏它只是直接跳到活动（加载数据所以需要几秒钟）。所以它需要穿线还是什么？

咳咳！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:36:52.990

这里的问题（如果我是对的）是进度条是您当前正在运行的活动的一部分，并且您想在另一个活动（“org.packagename.etc.etc”）正在做一些工作时显示它？

如果是这种情况，您应该在完成工作的活动中启动进度条。但这本身也行不通。您必须在单独的线程中完成工作！您应该考虑使用 AsyncTask 进行数据加载。

本教程可能会帮助您。[http://www.vogella.de/articles/AndroidPerformance/article.html](http://www.vogella.de/articles/AndroidPerformance/article.html)

当您启动进度条时，它会在 UI 线程上运行，但如果您也在 UI 线程上进行工作，则在其他工作完成之前它不会显示进度条。到那时，您很可能已经再次隐藏了进度条。

# facebook - 如何使用 cfhttp 自动发布到 facebook 的 graph api？

> ID：10087616
> 
> 赞同：2
> 
> 时间：2012-04-10T11:11:44.487
> 
> 标签：facebook, oauth, coldfusion, facebook-oauth

我已经按照 facebook 网站上的教程/文档进行操作，并且距离使用冷融合发布到用户的墙/时间线只有一步之遥。我还有最后一步，使用 cfhttp 自动发布。我无法让它工作。

```
<!--- This is the page that you call and also use as the redirect_uri... facebook returns code and state in the URL --->
<cfparam name="URL.code" default="" type="string">
<cfparam name="URL.state" default="" type="string">
<cfif #URL.code# EQ "">
    <cfparam name="URL.error_reason" default="" type="string">
    <cfparam name="URL.error" default="" type="string">
    <cfparam name="URL.error_description" default="" type="string">
    <cfmail charset="utf-8" type="html" server="mail.mysite.com" from="messages@mysite.com" to="messages@mysite.com" subject="Facebook Authentication Denial">
    #SESSION.my_profile_id#: #SESSION.my_profile_username#
    #URL.error_reason#<br/>
    #URL.error#<br/>
    #URL.error_description#<br/>
    </cfmail>
    <cfabort>
<cfelse>
    <cfhttp 
    method="get"
    url="https://graph.facebook.com/oauth/access_token?client_id=myappid&redirect_uri=http://www.mysite.com/dbf/_my-controller/fb_user_code.cfm&client_secret=216792f1a1ddbb568c57624a988028dc&code=#Trim(URL.code)#"
    result="my_fb_user_token"/>
    <cfif #my_fb_user_token.filecontent# CONTAINS "access_token=">
        <cfset new_token = ReplaceNoCase(#my_fb_user_token.filecontent#,"&expires","|","all")>
        <cfset new_token = REReplaceNoCase(#new_token#,"\|.*$","")>
        <cfquery name="fb_confusion" datasource="#dsn#" maxrows="1">
        SELECT facebook_id
        FROM my_profile
        WHERE my_profile_id = '#SESSION.my_profile_id#'
        </cfquery>
        <cfoutput>#new_token#</cfoutput>
        <hr/>
        <cfhttp 
        method="get"
        url="https://graph.facebook.com/me?#new_token#"
        result="my_fb_user"/>
        <cfoutput>https://graph.facebook.com/#fb_confusion.facebook_id#/feed?#new_token#</cfoutput>
        <hr/>
        <cfoutput>
        <cfhttp url="https://graph.facebook.com/me/mysite:add?group=http://www.mysite.com/dbf/test_group.cfm&#new_token#"
        result="fb_publish" 
        method="post" 
        multipart="yes">
            <cfhttpparam name="appID" value="myappid" encoded="no" type="url">
            <cfhttpparam name="access_token" value="#my_fb_user_token.filecontent#" encoded="no" type="url">
            <cfhttpparam name="message" value="Test" encoded="no" type="url">
            <cfhttpparam name="link" value="http://www.mysite.com" encoded="no" type="url">
            <cfhttpparam name="name" value="Test" encoded="no" type="url">
            <cfhttpparam name="caption" value="Testing fb api" encoded="no" type="url">
            <cfhttpparam name="description" value="Testing to see if this posts" encoded="no" type="url">
        </cfhttp>
        </cfoutput>
        <cfdump var="#fb_publish.filecontent#">
    </cfif>
</cfif> 
```

从 fb_publish 转储返回的消息是：

{"error":{"message":"无效的 OAuth 访问令牌。","type":"OAuthException","code":190}}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:56:07.093

试试[https://github.com/affinitiz/facebook-cf-sdk](https://github.com/affinitiz/facebook-cf-sdk)

或尝试替代方法（我使用的肮脏方法:)）

[http://cfmitrah.com/blog/post.cfm/update-facebook-status-using-email-without-graph-api](http://cfmitrah.com/blog/post.cfm/update-facebook-status-using-email-without-graph-api)

# android - 运行代码直到按下按钮

> ID：10087617
> 
> 赞同：0
> 
> 时间：2012-04-10T11:11:45.937
> 
> 标签：android, android-activity

我有一项活动在一定时间后开始。一旦这个活动开始，用户应该按下一个按钮来启动一个新的计时器。

但是，如果用户没有按下按钮，我希望每 5 分钟显示一次 toast，直到按下按钮。

我有一个按钮监听器：

```
 startBreakButton = (Button) findViewById(R.id.startBreakButton);
    startBreakButton.setOnClickListener(mStartListener); 
```

我有显示吐司的代码，其他一切都运行良好。

我只是不确定在单击按钮之前将要运行的代码放在哪里。在 mStartListener 代码中还是在其他地方，例如在 onCreate 方法中？

**更新**

```
 public class BreakActivity extends Activity {

Button startBreakButton; // button to start the break timer
Boolean clicked= false;
CountDownTimer counter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.breakscreen); // sets layout to breakscreen.xml

    MyCount counter;
    counter=new MyCount(5000,1000);
    counter.start();

  startBreakButton = (Button) findViewById(R.id.startBreakButton);
    startBreakButton.setOnClickListener(mStartListener);

  View.OnClickListener mStartListener = new OnClickListener() { 

 clicked=true;
 //other listener code
 };

 public class MyCount extends CountDownTimer{
    public MyCount(long millisInFuture, long countDownInterval) {
    super(millisInFuture, countDownInterval);
    }
    @Override
    public void onFinish() {
      if(clicked==false){
        Toast.makeText(getApplicationContext(), "TAKE A BREAK", Toast.LENGTH_LONG).show();
        counter= new MyCount(5000,1000);
     counter.start();
        }

    }
    @Override
    public void onTick(long millisUntilFinished) {
        long s1 = millisUntilFinished;

    }
    }
    }; 
```

编辑 - 上面的解决方案不起作用，它需要被点击==false，而不是点击=false！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:26:27.217

试试这样。。

在 oncreate 创建一个倒计时..

```
 MyCount counter;
 counter=new MyCount(300000,1000);
 counter.start(); 
```

MyCount 类..

```
 public class MyCount extends CountDownTimer{
public MyCount(long millisInFuture, long countDownInterval) {
super(millisInFuture, countDownInterval);
}
@Override
public void onFinish() {
  if(clicked=false){
  //put the toast here
    counter= new MyCount(300000,1000);
 counter.start();
    }

}
@Override
public void onTick(long millisUntilFinished) {
    s1=millisUntilFinished;

}
}
} 
```

并在 startBreakButton 的 onclicklistener 中放置

```
clicked=true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:14:18.277

您可以使用 AlarmManager 从现在开始设置 5 分钟的闹钟。

然后检查用户是否没有点击按钮，显示 toast 并设置另一个警报。如果用户点击了按钮，什么也不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:19:03.860

保留一个标志来确定是否单击了按钮。如果单击它，则使该标志为真。如果标志为假，则每 5 分钟调用一次方法，该方法将敬酒以按下按钮。您可以每 5 分钟调用一次 schedule 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:04:58.347

您应该将吐司代码放在onClicklistener方法中。使用if条件来了解按钮是否按下的状态。我希望它会起作用。

# .net - MSTest 失败并显示错误消息“结果文件不存在。发布失败'

> ID：10087622
> 
> 赞同：2
> 
> 时间：2012-04-10T11:11:50.717
> 
> 标签：.net, .net-4.0, msbuild, mstest

我们正在使用 TFS 2010 构建我们的解决方案并运行单元测试 (MSTest)。过去一切正常，当所有单元测试都通过时，我们的构建成功。

但是，在将我们的测试项目更新到 .Net 4 后，所有构建都失败并显示错误消息“结果文件不存在。发布失败”。即使所有测试都通过，也会发生这种情况。

我们尝试安装[http://support.microsoft.com/kb/983504](http://support.microsoft.com/kb/983504)无济于事。

使用诊断日志运行 MSTest 会创建一个巨大的文件，但该日志不包含错误消息。我觉得唯一有趣的一行是

> TestFormatsConverter.LoadAsCurrentVersion: <path_to_build>\TestResults\tfsservice_<service> 2012-03-28 09_51_49_Any CPU_Debug.trx 已经是当前文件格式。

我们尚未更新的旧解决方案仍然成功。

**更新**

在构建过程中观察构建机器上的构建文件夹后，我注意到未在 TestResults 文件夹中创建失败解决方案的 .trx 文件。对于旧解决方案，将创建文件。*升级到 .Net 4 是否有任何原因可能导致 .trx 文件未创建？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:26:00.453

所以事实证明，这个问题毕竟有解决方案！

实际发生的是 MSTest 运行了两次；一次使用 MSTest 10，一次使用 MSTest 9。第一次运行涵盖了我们所有的 .Net 4 测试项目，并按预期创建和发布测试结果。

但是，我们的源代码还包含一个名为 .Net 2 的程序集`Microsoft.Reactive.Testing.dll`，它包含在 Reactive Framework (1.0.10621) 的最新 (.Net 4) 安装程序中。MSTest 10 无法运行 .Net 2 测试，因此开始另一个测试运行。

不幸的是，`Microsoft.Reactive.Testing.dll`它只包含在测试运行中，因为它的名称中包含“test”。它实际上不包含任何单元测试。因此，不会运行任何测试，不会创建结果文件，也不会发布任何结果文件。

解决方案很简单：将 .Net 2 版本换成`Microsoft.Reactive.Testing.dll`.Net 4 版本。这可以使用 NuGet 下载。

# ios - 从超级视图中删除视图时出错

> ID：10087634
> 
> 赞同：0
> 
> 时间：2012-04-10T11:12:28.620
> 
> 标签：ios, subview, addsubview

我是 iOS 开发的新手，我遇到了麻烦想问你。

我的目的是在基本视图上显示一个视图（不是全屏），并且仍然在子视图外的背面看到一个父级。所以我在当前视图控制器上添加了一个子视图（UIViewController 的子类），然后我打开子视图：

```
AViewController *a = [[AViewController alloc] initWithNibName:nil bundle:nil];
[self.view addSubView:a.view];
[a release]; 
```

在这里它可以正常工作并按我的预期显示这个子视图。在这个子视图上，我有关闭按钮来关闭这个子视图并在子视图上这样做：

```
- (IBAction)BackTouchUp:(id)sender 
{
    [self.view removeFromSuperview];
} 
```

当我单击关闭按钮时，出现错误 EXC_BAD_ACCESS。当我在父级上删除 [a release] 命令时，它可以工作，但存在内存泄漏。

你能解释一下这个错误的原因以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:17:52.270

你可以设置一个视图标签没有

```
[a.view setTag:3];
uiView *f=[self.view viewWithTag:3];
[f removeFromSuperview]; 
```

我想这会解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:40:33.723

在接口和实现中定义`AViewController`对象（AViewController *a），初始化值如下：

```
a = [[AViewController alloc] initWithNibName:nil bundle:nil];

[self.view addSubView:a.view]; 
```

每当你想删除简单的 put `[a removeFromSuperview]`and in dealloc

```
[a release]; 
```

# javascript - Is there a way to update the status of a login when we go backward in an application

> ID：10087639
> 
> 赞同：3
> 
> 时间：2012-04-10T11:12:39.530
> 
> 标签：javascript, jquery

Currently I'm logging into my account. After proceeding some of the pages I have log-out my account. Now if I go back page using **back** button in browser, still I'm in login state. Is there anyway to set this status as logout?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T11:23:18.553

The problem with browsers is that using the back button doesn't refresh the page to any data form a server or force the browser to run any loading JavaScript functions.

What you could do is have a JavaScript function set on a time-out to check if they are logged in every 10 seconds using AJAX.

I wouldn't bother though as you are adding additional server load for no real benefit, as when the user refreshes the page or clicks on a link they would still be logged out and wouldn't be able to perform any logged in actions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:27:23.933

Most probably, pages get cached in the browser.

Set the application to server pages disabling their caching - thus, going back will reload them from the server and display logged out state, instead of pulling them out from browser cache.

How to do that is out the question scope. Google for 'no-cache' and 'Expires' headers.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:34:46.143

Add nocache tags in `<head>...</head>` of your secret pages.

```
<META http-equiv="Pragma" content="no-cache"> 
```

This is happening because when you visit a page in your website, the page is automatically cached in browser. And when you go back after logout, those pages are served directly from browser-cache. You need to to disable the cache so that when you come back after logout, those pages get called again from server.

# java - 在 Java 中合并两个 XML 文件并添加额外信息

> ID：10087641
> 
> 赞同：1
> 
> 时间：2012-04-10T11:12:57.277
> 
> 标签：java, xml, merge

我有两个 XML 文件，我想使用 java 将它们合并到最后一个 XML 文件中。

File1的格式：

```
 <root>
          <a>
            <a>--include two lines under <a>
           <c/>
          </a>
            <d/> 
         </root> 
```

File2的格式：

```
 <root>
          <a>
           <c/>
          </a>
            <d/> -- include 1 more line at the last
         </root> 
```

谁能告诉我在两个文件中添加特定信息后如何合并这些文件。

这是我尝试过的，但它并没有解决我的目的..

```
 public class Xml {

               public static void main(String[] args) throws Exception {

              Writer output = null;
             output = new BufferedWriter(new FileWriter("H:\\merged_xml.xml"));
             String newline = System.getProperty("line.separator");
             output.write("<a>");

            // Read in xml file 1
            FileInputStream in = new FileInputStream("file1.xml");
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String strLine;

           while ((strLine = br.readLine()) != null) {

           if (strLine.contains("<a>")){
           strLine = strLine.replace("<a>", "info to include");
            }
           if (strLine.contains("</a>")){
           strLine = strLine.replace("</a>", "info to include");
            }

           output.write(newline);
           output.write(strLine);

          System.out.println(strLine);
           }

          // Read in xml file 2
           FileInputStream in2 = new FileInputStream("file2.xml");
           BufferedReader br2 = new BufferedReader(new InputStreamReader(in2));
           String strLine2;

            while ((strLine2 = br2.readLine()) != null) {

             if (strLine2.contains("<d>")){
               strLine2 = strLine2.replace("<d>", "info to include");
              }

            output.write(strLine2);
            output.write(newline);
            System.out.println(strLine2);
           }

          output.write("</d>");
          output.close();

          System.out.println("Merge Complete");

              }

               } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:27:58.580

您需要使用 XML 解析器来实现您想要的 - 无需使用 Java IO 类来读取和写入新文件。您可以使用流式 XML 解析器（google for 'java StAX'）。如果您使用 javax.xml.stream 库，您会发现 XMLEventWriter 有一个方便的方法 XMLEventWriter#add(XMLEvent)。您所要做的就是遍历每个文档中的顶级元素，并使用此方法将它们添加到您的编写器以生成合并结果。唯一时髦的部分是实现仅在顶级节点上考虑（仅调用“添加”）的阅读器逻辑。

# jquery - JQuery 在鼠标悬停时在另一个 DIV 上显示 DIV

> ID：10087642
> 
> 赞同：3
> 
> 时间：2012-04-10T11:13:00.210
> 
> 标签：jquery, mouseover

我知道这可能有一个简单的解决方案，但我是一个 Jquery 菜鸟。请帮忙。如何在鼠标悬停时在另一个 DIV 上显示 DIV？

例如，我有这个：

```
<div class="box"> Info about a game </div> 
```

我想在 div“框”上“覆盖”另一个 div

```
<div class="overlay"> Play </div> 
```

我怎么能用 JQuery 做到这一点？

抱歉，提前谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-10T11:16:33.813

如果我理解正确，您只想`overlay`在悬停时显示`box`.

您可以使用 CSS psuedo [`:hover`](http://www.w3schools.com/cssref/sel_hover.asp)：

```
<div class="box">
    Info about a game
    <div class="overlay"> Play </div>
</div>​

div.box div.overlay
{
    display:none;
}

​div.box:hover div.overlay
{
 display:block;   
}​ 
```

[http://jsfiddle.net/Curt/BC4eY/](http://jsfiddle.net/Curt/BC4eY/)

* * *

如果您希望使用动画/jquery 来显示/隐藏`overlay`您可以使用以下内容：

```
$(function(){
    $(".box").hover(function(){
      $(this).find(".overlay").fadeIn();
    }
                    ,function(){
                        $(this).find(".overlay").fadeOut();
                    }
                   );        
});​ 
```

[http://jsfiddle.net/Curt/BC4eY/2/](http://jsfiddle.net/Curt/BC4eY/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T11:19:14.490

您可以拥有另一个带有“about”类的 DIV 元素，该元素将位于您想要的位置。并且会有 CSS 样式：opacity:0;

然后在 JS 中你必须编写一个小脚本，它位于 onload / ready 函数中，如下所示：

```
$(document).ready(function() {
  $('div.box').hover(function() {
    $(this).children('.overlay').fadeIn();
  }, function() {
    $(this).children('.overlay').fadeOut();
  });
}); 
```

如果这个元素会在上面覆盖一些东西，那么最好使用 CSS 属性“display:none”来防止这个透明元素接管鼠标事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-23T18:01:40.137

这是一种使用原生 JavaScript 的方法（不需要 jQuery 库）。如果你不使用[ES6](http://es6-features.org/#Constants) ，你可以用常规的旧[函数表达式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/function)替换[箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)：

```
var box = document.getElementById("box");
var overlay = document.getElementById("overlay");

var init = () => {
  overlay.style.display = 'none'; //hide by default when page is shown

  box.addEventListener('mouseover', () => {
    overlay.style.display = 'inline';
  });

  box.addEventListener('mouseout', () => {
    overlay.style.display = 'none';
  });
};

init();
```

```
<div id="box"> Info about a game<br />
  <div id="overlay">Play</div>
</div>
```

# iphone - 打开现有的 facebook 应用程序并带有发布链接

> ID：10087644
> 
> 赞同：1
> 
> 时间：2012-04-10T11:13:09.400
> 
> 标签：iphone, facebook

我已经完成了 FBConnect 框架。我可以选择在我目前正在开发的应用程序中发布到 facebook 的链接。我想知道有没有办法打开已经安装在 iPhone 中的现有 facebook 应用程序并发布一条消息。当我浏览时，我知道我们可以使用以下方法打开应用程序。

```
NSURL *url = [NSURL URLWithString:@"fb://<insert function here>"];
[[UIApplication sharedApplication] openURL:url]; 
```

但这只是打开的，我无法发布我的动态文本或链接。当 facebook 应用程序关闭时，我还必须回到我的应用程序。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:46:15.673

为什么不在您的应用程序中尝试类似 Facebook 的功能？如果您想在应用程序 facebook 中使用类似功能，请参考以下链接

[http://angelolloqui.blogspot.in/2010/11/facebook-like-button-on-ios.html](http://angelolloqui.blogspot.in/2010/11/facebook-like-button-on-ios.html)

[http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app)

[http://www.facebook.com/note.php?note_id=192575157422917](http://www.facebook.com/note.php?note_id=192575157422917)

# asp.net - 向 MembershipProvider 添加扩展方法

> ID：10087646
> 
> 赞同：1
> 
> 时间：2012-04-10T11:13:22.617
> 
> 标签：asp.net, membership

我目前正在研究自定义 MembershipProvider 实现。但我需要其他方法。我想直接在我的 Controller 中的 Membership 对象上调用这些方法，如下所示：

Membership.DoStuff()

是否可以使用扩展方法来做到这一点？我从哪里开始？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:17:25.397

更多地了解扩展方法是一个好的开始。请参考以下文章

[http://technico.qnownow.com/2012/03/17/how-to-create-extension-methods-in-net/](http://technico.qnownow.com/2012/03/17/how-to-create-extension-methods-in-net/)

[扩展方法 (MSDN)](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:26:39.507

你为什么不直接将它添加到你的类（有自定义的 MemebershipProvider）然后将成员资格分类到你的然后你会找到它。

如果您询问它应该适用于任何类的扩展方法，那么您的问题的答案是肯定的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:56:50.620

在尝试了很多示例之后，我发现[了这篇文章](https://stackoverflow.com/questions/249222/can-i-add-extension-methods-to-an-existing-static-class)，他们指出您不能将扩展方法写入静态类。

成员资格是一个静态类，您不能扩展它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T10:16:57.327

是的，Membership 是可扩展的，但你不扩展静态类`Membership`（因为它是不可能的），你必须扩展抽象类`MembershipProvider`，并调用扩展方法，如`Membership.Provider.DoStuff()`.

例如：

扩展类

```
namespace Infrastructure.Extensions
{
    public static class MembershipProviderExtensions
    {
        public static void DoStuff(this MembershipProvider provider)
        {
             // do stuff
        }
    }
} 
```

在你的代码中

```
using Infrastructure.Extensions;
...
Membership.Provider.DoStuff()
... 
```

# monetdb - monetdb - 有人在生产中使用它吗？

> ID：10087647
> 
> 赞同：21
> 
> 时间：2012-04-10T11:13:23.160
> 
> 标签：monetdb

我对使用 monetdb 作为数据集市非常感兴趣，拥有一些用于查询和报告的庞大数据表

然而，经过一番搜索，我找不到任何关于他们在任何生产能力中使用 Monetdb 的在线帖子/博客。

此外，关于 Monetdb 的在线活动似乎很少或几乎没有。

这对 Monetdb 的未来来说是一个坏兆头吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T14:47:10.997

> 我对使用 monetdb 作为数据集市非常感兴趣，它拥有一些用于>查询和报告的巨大数据表

我的老板也对 MonetDB 感兴趣，我的反应和你一样。没有人写有关 MonetDB 的文章……没有人使用 MonetDB 吗？

无论如何，我一直在对 500,000 到 1,000,000 条记录的数据集进行性能测试，比较 MonetDB（面向列的 dbms）与 MySQL（面向行的 dbms），并且 MonetDB 在所有方面都击败了 MySQL——即使是在批量插入中……假设它应该不擅长。

我无法推测这一切对 MonetDB 的未来意味着什么，但当它出现时，你可能想看看它，因为它表现良好。

（我运行 Windows 7 并使用 PHP 与每个数据库进行通信）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-07T09:25:41.300

我对这篇文章的反应有点晚，但我想为那些在生产环境中使用 MonetDB 的人添加我的声音。我们将它用作[Spinque](http://www.spinque.com)的后端，这是一个用于设计复杂搜索解决方案的框架。我已经使用 MonetDB 大约 10 年了，但仅在过去 3 年中在生产环境中使用。显然，它与所有其他产品一样有优缺点和错误，但它正在非常积极地开发和改进（我不明白你提到的低活动迹象）。如果你想要一个能让你领先于市场标准的数据库，这是一个不错的选择。否则，就去 MS SQL ;)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-02T06:10:50.147

我最近一直在为客户评估它，所以我花了一些时间。在这一点上我的印象是，它刚刚从一个学术实验场完成“成长”。它显然还没有真正被发现，尽管它确实有一些可能会阻碍某些应用的粗糙边缘。

在我写的时候，我正在尝试将超过 1 亿行加载到一个实例中（目前为 2700 万行）。到目前为止，它在某些领域（聚合）表现得非常好，但在其他领域却异常缓慢（迄今为止我尝试过的大多数连接）；也就是说，我还没有运行推荐的采样过程，我强迫它只存在于具有 32GB RAM 的单一服务中。

我发现了一些小故障和导致完整服务崩溃的一件事（模糊和报告），但我认为对于许多应用程序来说，MonetDB 可能只是票。列式存储（而不是 NoSQL）似乎是未来的 IMO。

如果我发现任何特别有趣的东西，我会更新这个。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-20T09:56:14.053

MonetDB 首先是一个研究系统，但已经远远超出了平均研究原型的水平。它是我所知道的（唯一的）开源关系列存储平台，它支持完整的 SQL。我自己在 CWI 的许多研究项目中使用过它，这些项目不是核心数据库研究，但确实需要先进的数据库技术。

您可以在[用户的​​邮件列表](https://www.monetdb.org/pipermail/users-list/)中看到部署发生在许多不同的组织中。正如 Roberto Cornacchia 在另一个答案中所说，它是所有 Spinque 部署的后端，我们很高兴 MonetDB 用户。MonetDB 也用于各种非盈利项目，如 open streetmap 和 open kvk。

越来越多的商业方部署 MonetDB 进行分析。（他们并不总是喜欢宣传他们的分析依赖于开源系统。）最近，[MonetDB Solutions](https://www.monetdbsolutions.com/)已经开始为这些部署提供专门的商业支持。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-16T12:38:29.813

我们一直在我们的业务中使用 MonetDB。我们分析具有数百万行的非常大的数据集。SQL 数据库上的传统数据仓库方法变得如此缓慢。我们面临的问题是数据只会变得更大！唯一的出路是走向柱状。

结果是惊人的。当您的连接很少时，它的速度非常快。即使在我们正在查看的数据集上加入了连接，它的恢复速度仍然令人恐惧。

看到一些商业伙伴关系后，我认为 MonetDB 将在未来几年蓬勃发展。我相信一些主要的 BI 供应商正在使用 Monet 来执行大数据工作。

# c# - 如何从托管代码沙箱调用外部非托管应用程序？

> ID：10087650
> 
> 赞同：4
> 
> 时间：2012-04-10T11:13:30.240
> 
> 标签：c#, asp.net, .net-4.0, sandbox

我们正在为 ASP.NET 中的 XSLT 处理器开发一个在线测试应用程序，但是，我有点担心如何限制我们系统的漏洞。**.NET 是否可以沙箱第三方非托管或托管应用程序？**它应该：

*   不允许以任何方式或漏洞启动任何其他进程；
*   无法访问系统上的其他现有进程；
*   当需要太多的处理能力或内存时被杀死；
*   使用托管和非托管外部应用程序；
*   应该不能访问系统调用

一些应用程序具有托管 API，但这还不够，因为我需要在与 ASP.NET 相同的处理空间中运行它，并且存在所有潜在风险（堆栈溢出、内存异常、缓冲区溢出）。我不知道 .NET 是否提供非托管应用程序的沙盒。

我们目前在具有特定关联性的控制台中执行外部程序并对其进行监视，但这感觉不是正确的，甚至不是非常安全的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:47:28.927

[您可以在AppDomain](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)中执行托管代码，可以将其配置为提供一定程度的保护，但是一旦您允许非托管代码运行，它就几乎可以访问其运行的用户可以访问的所有内容。我很确定您可以防止在 AppDomain 中执行非托管/不安全的代码。

# java - Android 应用程序文件类似于 Blackberry 中的 .cod 和 .jad 文件

> ID：10087652
> 
> 赞同：0
> 
> 时间：2012-04-10T11:13:33.880
> 
> 标签：java, android, eclipse, blackberry

我有一个黑莓应用程序，其中包含`.jad`文件`.cod`和速度文件`.vm`被自动创建。现在我想在 Android 上使用相同的应用程序。那么需要哪些文件呢？我目前在 Windows XP 上使用 Simulator 2.2。

我再次面临一个问题，即浏览器 URL 太小。所以我使用 Bitly 来缩短 URL。我再次无法复制和粘贴 URL？

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:12:02.453

J2ME BlackBerry 应用程序与 Android Java 应用程序无关。您必须使用 Android SDK 从头开始​​并重新编写应用程序。

BTW：请一次只问一个问题。

# clearcase - clearcase: rebase -reco 和更改其他人的代码

> ID：10087653
> 
> 赞同：1
> 
> 时间：2012-04-10T11:13:33.987
> 
> 标签：clearcase

如果这是 Bob 和 Jane 的工作流程：

```
Bob:
ct setview bob_stream_x
ct rebase -reco

Jane:
ct setview jane_stream_x
<make a new build> 
```

Jane 所做的构建是否包含 Bob 对 stream_x 的 rebase 的更改？或者 Bob 是否必须执行“ct rebase -complete”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:35:08.883

实际上有两件事：

1.  Bob 必须完成变基，它才能被其他视图看到
2.  如果`jane_stream_x`view 与 view 位于同一流上`bob_stream_x`，那么 Jane 必须先执行 ' `cleartool setcs -stream -tag jane_stream_x`，然后她的视图才会反映新配置。

但是，如果`jane_stream_x`view 位于专用“ `jane_stream_x`”流上（不同于`bob_stream_x`），那么 Jane 也必须执行`cleartool rebase -reco`，才能看到与view`cleartool rebase -complete`中相同的配置。 Bob 所做的变基不会对 Jane 的 Stream 和 Jane 的观点产生任何影响。 `bob_stream_x`

考虑到您之前的问题“ [Clearcase：在您的快照视图中重新定位流是否会影响该流上的其他用户视图](https://stackoverflow.com/questions/10025850/clearcase-does-rebasing-a-stream-in-your-snapshot-view-affect-other-users-views)”，这很可能是这种情况（即每个开发人员一个流，[我总是发现这不是一个非常令人满意的模型](https://stackoverflow.com/questions/1567135/clearcase-issue/1567308#1567308)；） ）。

# javascript - 为什么 JavaScript 代码在 for 循环后停止执行

> ID：10087656
> 
> 赞同：0
> 
> 时间：2012-04-10T11:13:52.673
> 
> 标签：javascript, forms

这是我创建注册页面的尝试，但是在 for 循环之后，接下来的任何内容都不会执行，我不知道为什么？下面是javascript代码和表格

```
<script type='text/javascript'>
myArray = ['username','email','password','password2'];
reply = ['User Name','Email','Password','Password Again'];
message = "Please Type you're ";
start = "<font color = red size='-1'>";
end = "</font>";
test = 10;
obj = validate();
alert (obj);
function validate(){

for (var i=0; i<=myArray.length; i++) {
               if (document.getElementById("in"+myArray[i]).value == "")
               {
                   document.getElementById(myArray[i]).innerHTML = start+message+reply[i]+end;
                   test = 30;
               }
                }
alert ("test");
} 
```

```
<form action="echo.php" method="post" name="register" onsubmit="return validate();">
<table>
    <tr>
      <td width="185"><font size="2">First Name</font></td>
      <td width="499">
        <input id = "infirst_name" name="first_name" type="text" /><div id="first_name"></div></td>
    </tr>
    <tr>
      <td><font size="2">Last Name</font></td>
      <td><input id = "inlast_name" name="last_name" type="text" /><div id="last_name"></font></div></td>
    </tr>
    <tr>
      <td><font size="2">Username*</font></td>
      <td>
        <input id = "inusername" name="username" type="text" /><div id="username"></div></td>
    </tr>
    <tr>
      <td><font size="2">Email*</font></td>
      <td><input id = "inemail" name="email" type="text" /><div id="email"></div></td>
    </tr>
    <tr>
      <td><font size="2">Password*</font></td>
      <td><input id = "inpassword" name="password" type="password" /><div id="password"></div></td>
    </tr>
    <tr>
      <td><font size="2">Repeat Password*</font></td>
      <td>
        <input id = "inpassword2" name="password2" type="password" /><div id="password2"></div></td>
    </tr>
    <tr>
    <tr>
      <td><font size="2">I have read and Agree to the Terms and Conditions</font></td>
      <td>
        <input id = "incheckme" name="checkme" type="checkbox" /><div id="checkme"></div></td>
    </tr>
    <tr>
      <td><input type="submit" value="Register" /></td>
      <td>&nbsp;</td>
    </tr>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T11:18:12.007

尝试修复你的循环：

```
for (var i=0; i < myArray.length; i++) { 
```

如果遇到未捕获的错误，JavaScript 将停止执行任何操作。在您的情况下，您似乎已经遍历了最后一个元素（并试图在未定义的对象上设置 innerHTML）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:18:03.083

很可能是因为您遍历数组的末尾，但引用它就像那里有东西一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:18:52.393

请参阅 JS 控制台输出：也许它说您有错误。 `i`超出`myArray`长度：将循环条件从“i<=”更改为“i<”，你会没事的。

# android - 当主要活动是透明的时，如何*立即*确认应用程序的执行？

> ID：10087659
> 
> 赞同：0
> 
> 时间：2012-04-10T11:13:57.870
> 
> 标签：android

我的应用程序的主要活动在具有以下属性的 Android 清单文件中定义：

`android:theme="@style/Theme.Translucent.NoTitleBar"`

这使活动变得透明，从而可以通过操作主视图对象（例如，通过调用`setVisibility(View.INVISIBLE)`主视图）在代码中控制我的应用程序的透明度。这工作正常。

但是，这种方法的一个不良后果是，当应用程序启动时，在显示我的主视图之前没有可见的响应。通常，应用程序的主要活动的默认黑色背景在应用程序启动时立即可见，这提供了应用程序开始运行的即时确认，以响应用户在启动器中点击其图标。*但是对于透明*背景，用户会继续在启动应用程序的显示器上查看背景，直到显示主视图，因此它（在该间隔期间）看起来好像什么也没发生。

即使在性能一般的设备（例如，摩托罗拉 Droid）上，我的视图也会在大约一秒钟内出现，这还不错。然而，在一个非常慢的设备（例如，G1）上，它可能需要将近四秒钟。虽然这不是一场灾难，但我更喜欢立即响应，这样用户就不会怀疑应用程序是否真的被触发了。

我尝试删除透明主题，这会像往常一样通过黑色背景立即确认。但是，一旦应用程序初始化，我就无法在代码中将活动背景设置为透明。

我在第一次`setTheme()`调用之前调用了活动`setContentView()`，并传递给它一个透明的主题，但这不会使活动透明。

我也试过这个`onCreate()`（再次，就在调用之前`setContentView()`）：

```
ColorDrawable transparentDrawable = new ColorDrawable(Color.TRANSPARENT);
getWindow().setBackgroundDrawable(transparentDrawable); 
```

这似乎也没有效果。

我还尝试在我的清单中使用一个主题，该主题已`android:windowBackground`设置为一个主要是透明 PNG 的可绘制对象，但在透明背景上叠加了一些文本（例如，应用程序的名称），这将为用户提供一个提示：应用程序正在加载。不幸的是，当我将可绘制对象用作主题的一部分时，在初始化主视图之前，背景根本无法显示。

所有耗时的初始化都已经在一个工作线程中完成，所以我不是在寻找关于如何完成它的建议。视图本身只需要一定的时间来显示，虽然它相当快，但没有什么能比应用程序启动时看到主要活动背景的即时响应更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:30:18.897

> 即使在性能一般的设备（例如，摩托罗拉 Droid）上，我的视图也会在大约一秒钟内出现，这还不错。然而，在一个非常慢的设备（例如，G1）上，它可能需要将近四秒钟。

它应该在几毫秒内出现。确保您没有在主应用程序线程上做过多的工作。

> 视图本身只需要一定的时间来显示，虽然它相当快，但没有什么能比应用程序启动时看到主要活动背景的即时响应更好。

然后首先显示其他更便宜的东西（例如，`ProgressBar`），当它准备好时用你的常规 UI 替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:28:24.160

我赞成 CommonsWare 的回答，因为他为我指出了正确的方向，这与尝试在启动后更改主要活动的透明度相去甚远（我开始怀疑这是不容易做到的）。

但是，该建议本身并不能成为公认的答案，因为它只是指向正确方向的指针。

鉴于此指导，我决定的答案是创建一个启动画面。但是，我在任何地方都找不到真正好的 android splash 示例。所以，我设计了一个，它对我来说效果很好，完全解决了我的问题。

因为创建一个启动画面是一个比我开始的问题更普遍的问题，所以我已经将我的详细描述作为关于如何实现启动画面的问题的答案，并链接到该答案以下：

[创建一个真正的闪屏](https://stackoverflow.com/questions/6519649/create-a-true-splash-screen/10202161#10202161)

# jquery - jquery.fancybox.js 和 jquery.fancybox.pack.js 有什么区别？

> ID：10087660
> 
> 赞同：3
> 
> 时间：2012-04-10T11:14:03.110
> 
> 标签：jquery, fancybox

我正在设计一个新网站，我在其中使用 Fancybox，我只是有点困惑：有 2 个 JS 文件，jquery.fancybox.js 和 jquery.fancybox.pack.js，无论我使用哪个， Fancybox 工作。我想知道它们之间有什么区别以及哪个更好用？我不是 JS 专家，所以请原谅我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:17:09.850

.pack 版本已“打包”。这意味着代码已经通过一种算法，该算法减小了它的大小，使其更小，并且访问您网站的访问者下载所需的时间更短，并且您的带宽成本更低。

在生产环境中，您应该**始终**使用打包的 javascript。

在开发环境中，查看您正在使用的任何 3rd 方插件背后的源代码是有帮助的，这就是为什么有两个版本的代码。

有关包装的更多信息，[请阅读此](http://www.mechanicalrobotfish.com/posts/122-javascript-packing-unpacking-and-beautifying/)。要打包您自己的代码，请使用此在线[打包工具](http://dean.edwards.name/packer/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:21:37.303

.packed 版本通常意味着通过特定压缩减少库的代码，这需要通过`eval()`语句评估代码

由于 eval() 在许多方面（安全性和性能）不鼓励使用，因此更好的方法是使用`minified`库的版本（就像 jQuery 对生产版本所做的那样）。通常从原始版本中获得缩小的代码，删除所有空格、注释并用较短的变量名替换标识符

# matlab - 如何在 MATLAB 中创建这样的图？

> ID：10087661
> 
> 赞同：1
> 
> 时间：2012-04-10T11:14:06.430
> 
> 标签：matlab, plot, matlab-figure

我正在尝试在 MATLAB 中绘制不同蜂窝基站的范围，如下所示：

![样本图](../Images/73eb848d584f6e21a314a37bcdcd8808.png)

但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:17:10.097

这是一个如何创建这样的情节的示例。[请注意，我通过使用均匀分布的伪随机数](http://www.mathworks.com/help/techdoc/ref/rand.html)随机生成蜂窝基站的位置来为绘图创建样本数据：

```
%# Initializations:
minRange = 0;       %# Lower x and y range
maxRange = 3.5;     %# Upper x and y range
resolution = 1000;  %# The number of data points on the x and y axes
cellRange = linspace(minRange, maxRange, resolution);
[x, y] = meshgrid(cellRange);   %# Create grids of x and y coordinates
cellCoverage = zeros(size(x));  %# Initialize the image matrix to zero

%# Create the sample image data:
numBases = 200;
cellRadius = 0.75;
for iBase = 1:numBases
    point = rand(1,2).*(maxRange - minRange) + minRange;
    index = ((x - point(1)).^2 + (y - point(2)).^2) <= cellRadius^2;
    cellCoverage(index) = cellCoverage(index) + 1;
end

%# Create the plot:
imagesc(cellRange, cellRange, cellCoverage);  %# Scaled plot of image data
axis equal;  %# Make tick marks on each axis equal
set(gca, 'XLim', [minRange maxRange], ...  %# Set the x axis limit
         'YLim', [minRange maxRange], ...  %# Set the y axis limit
         'YDir', 'normal');                %# Flip the y axis direction
xlabel('X-distance (km)');  %# Add an x axis label
ylabel('Y-distance (km)');  %# Add a y axis label
colormap(jet);              %# Set the colormap
colorbar;                   %# Display the color bar 
```

这是结果图：

![在此处输入图像描述](../Images/1f593253f95e73443e7e786dd879aa7b.png)

还要注意，图像矩阵中的数据`cellCoverage`不包含噪声并且没有应用平滑，这就是为什么边缘看起来比帖子中的原始图像更清晰的原因（我猜这是从*真实*数据生成的，而不是“假”样本数据）就像我在这里使用的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:19:33.343

使用“图像”

image(x),colormap(hsv) <- 其中 x 是细胞强度矩阵 (x,y)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:27:10.593

您需要获取每个站点的坐标，然后在其周围创建一个圆形多边形（具有给定的半径），然后将此多边形转换为网格。然后将这些网格（矩阵）叠加在一起。为了速度，您还可以定义站点将覆盖哪些单元格，而不是使用多边形，例如站点的 5 行或列中的所有单元格都将获得该值。您还可以对矩阵应用 2D 高斯滤波器，其中只有包含站点的单元格的值为 1。高斯内核的带宽将是您的覆盖半径（范围）。[http://www.mathworks.ch/help/toolbox/images/ref/fspecial.html](http://www.mathworks.ch/help/toolbox/images/ref/fspecial.html)

# c - 为什么 C 中的运算符之间存在不同的关联性？

> ID：10087666
> 
> 赞同：2
> 
> 时间：2012-04-10T11:14:33.273
> 
> 标签：c, operators, associativity

谈到 C 中运算符的关联性，我想知道为什么具有相同优先级的运算符之间存在不同的关联性。例如，后缀自增和后缀自减有左结合性；而前缀递增和前缀递减具有正确的关联性。对所有相同的优先级运算符仅具有左或右关联性不是很简单吗？

这背后有什么原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T11:22:53.797

> 对所有相同的优先级运算符仅具有左或右关联性不是很简单吗？

是的，[在 C 中就是这种情况](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)。**可能您认为前缀和后缀具有相同的优先级，这是错误的**。后缀的优先级高于前缀！

还有另一个奇怪的案例要考虑***为什么某些运算符具有一定的关联性***。来自[维基](http://en.wikipedia.org/wiki/Operator_associativity)，

> 例如，在 C 中，赋值 a = b 是一个返回值（即 b 转换为 a 的类型）的表达式，其副作用是将 a 设置为该值。可以在表达式的中间执行赋值。（一个表达式可以通过在它后面加上一个分号来构成一个语句；即a = b 是一个表达式，但a = b; 是一个语句）。= 运算符的右结合性允许将 a = b = c 等表达式解释为 a = (b = c)，从而将 a 和 b 都设置为 c 的值。替代 (a = b) = c 没有意义，因为 a = b 不是左值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:44:49.120

二元运算符都是左结合的，除了赋值运算符是右结合的。

后缀运算符有时（例如在 K&R 2nd 中）被认为是右结合的，但这是为了表达它们比一元运算符具有更高优先级的想法。

# vba - 获取 Excel 行索引

> ID：10087667
> 
> 赞同：1
> 
> 时间：2012-04-10T11:14:38.997
> 
> 标签：vba, excel

我有一个 Excel 电子表格，其中有一列包含货币对`USD/XYZ`或`XYZ/USD`等。我想知道单元格的行号`USD/ABC`（假设）。另外，我想知道哪些行有`USD`前三个字符，哪些没有。

我想使用 VBA 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:27:41.297

假设货币对在 A 列中，您可以使用公式：

```
=MATCH("USD/EUR",A:A,0) 
```

它将返回货币所在的行（如果有重复，则返回它第一次出现的行）。

如果您想使用 VBA，您可以读取数组中的数据并遍历数组（下面是一个查找“EUR/USD”的示例，您可以根据自己的需要进行调整）：

```
Sub test()

    Dim row As Long

    row = findCurrencyPair("EUR/USD")
    If row = 0 Then
        MsgBox "EUR/USD not found"
    Else
        MsgBox "EUR/USD found in row " & row
    End If

End Sub

Function findCurrencyPair(pair As String) As Long

    Dim data As Variant
    Dim i As Long
    Dim lastRow As Long

    With Sheets("SpotRates")
        lastRow = .Cells.Find(What:="*", after:=.Range("A1"), LookIn:=xlFormulas, _
            SearchOrder:=xlByRows, SearchDirection:=xlPrevious).EntireRow.row

        data = .Range("A1:A" & lastRow) 'Replace A with the relevant column name
    End With

    If IsArray(data) = False Then Exit Function 'Empty sheet
    For i = LBound(data, 1) To UBound(data, 1)
        If data(i, 1) = pair Then
            findCurrencyPair = i
            Exit Function
        End If
    Next i

    'if not found, returns 0

End Function 
```

**编辑**

在@Readify 评论之后，一个更简单的解决方案是（假设数据只出现在一列中）：

```
Function findCurrencyPair(pair As String) As Long
    On Error Resume Next
    findCurrencyPair = Sheets("SpotRates").Cells.Find(What:=pair).Row
End Function 
```

# c# - 如何通过 LAN 在两个不同的 WPF 应用程序之间进行通信？

> ID：10087671
> 
> 赞同：3
> 
> 时间：2012-04-10T11:14:56.493
> 
> 标签：c#, wpf, .net-4.0

我想在两个不同的 WPF 窗口之间进行通信。第一台计算机中的 WPF UI 生成一些数据并添加到数据库表中，然后它生成一条消息，其中包含表中新数据的唯一 ID，并将其转发到另一台计算机。在同一台计算机收到具有唯一 ID 的消息后，它会在其中查询该数据并显示在其 UI 中。

我不希望第二台计算机中的 WPF 应用程序重复（基于计时器）检查数据库。相反，我想在这个应用程序中有一些事件监听器，它只是在接收到消息时启动一个动作。;

一切都在局域网中运行，显然，两台计算机连接在同一个网络中。

一个建议和更好的解决方案将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:56:28.713

所以 WPF1 生成 ID 并且 WPF2 必须知道它。

将 WPF2 公开为 Web 服务。在 WPF1 中使用 web 服务。

当 WPF1 生成 ID 时，它会插入 ID 并调用 WPF2 Webservice。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:58:20.173

微软为此提供了一个框架：

[https://msdn.microsoft.com/en-us/library/ms731082(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ms731082(v=vs.110).aspx)

WCF 有多种风格取决于您的具体要求，上面的链接是您开始研究的好地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:56:51.323

通过 LAN 进行通信有多种方式：

1.  TCP 监听器
2.  UDP
3.  MSMQ
4.  远程处理

您可以根据自己的要求进行选择。

# sap-ase - 如何创建包含数据的 Sybase 表的副本？

> ID：10087673
> 
> 赞同：6
> 
> 时间：2012-04-10T11:15:00.830
> 
> 标签：sap-ase

**我知道oracle**中复制结构和数据的语句。

```
create table mytable1 as select * from mytable; 
```

但是如何在**Sybase ASE**中实现相同的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T12:15:26.563

可以使用`select into`！

[在这里](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc32300.1570/html/sqlug/X89970.htm)查看更多信息！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-20T22:07:15.703

在 Sybase ASE 16 中，复制数据和结构的语法是

```
SELECT field1, field2 INTO NewTable FROM OldTable 
```

如果您只想复制结构，请使用此

```
SELECT field1, field2 INTO NewTable FROM OldTable WHERE 1=0 
```

# oracle - 我安装 oracle 时创建的这些服务是什么？

> ID：10087678
> 
> 赞同：2
> 
> 时间：2012-04-10T11:15:21.927
> 
> 标签：oracle, installation, oracle10g, oracle11g, oracle9i

我已经在我的系统中安装了 oracle，我看到创建了不同的服务，有人可以对这些服务进行一些描述。或我可以找到一些描述的来源。

```
oracle INNOVATEST VSS Writer Service

OracleDBConsoleInnovaTest

OracleJobSchedulerINNOVATEST

OracleOraDb11g_home1TNSListener

OracleOraDb11g_home1ConfigurationMangager

OracleServiceINNOVATEST 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:08:51.197

为您找到了一些文档。

我建议您在[此处找到的 Oracle 文档页面上四处逛逛](http://docs.oracle.com/cd/E11857_01/index.htm)

[oracle INNOVATEST VSS 编写器服务](http://docs.oracle.com/cd/B28359_01/install.111/b32006/whatsnew.htm#CEGHIGGC)

[OracleJobSchedulerINNOVATEST](http://docs.oracle.com/cd/B28359_01/server.111/b28310/scheduse.htm)

[OracleOraDb11g_home1TNSListener](http://docs.oracle.com/html/B13738_01/ch5.htm#i25111)

[OracleOraDb11g_home1配置管理器](http://docs.oracle.com/cd/E28601_01/doc.1037/e26168/ccrqs.htm)

# ruby-on-rails - 活动管理员和内部连接

> ID：10087680
> 
> 赞同：1
> 
> 时间：2012-04-10T11:15:30.090
> 
> 标签：ruby-on-rails, ruby, activeadmin

在 Active Admin (RoR) 中，我从表中获取数据，这没问题。但我想添加一个侧边栏，其中包含与内部连接相关的信息。但我不知道该怎么做。

这是我的代码：

```
ActiveAdmin.register Project do
   show do |project|
   ... works ...
   end
end

sidebar "Resources for this project", :only => :show do
  table_for project.project_resources.where('project_id = ?', project.id) do |row|
     column "Resource", Resource.where('id = ?', :resource_id) do |resource|
      :resource_name
    end
  end
end 
```

如您所见，我正在尝试从资源表中获取资源名称。第 3 个表 project_resource 包含一个 project_id 的所有 resource_id。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:24:49.930

好的，这就是我一直在寻找的答案：

```
sidebar "Resources for this project", :only => :show do
  table_for project.resources do |resource|
    column :resource_name do |row|
      link_to row.resource_name, admin_resource_path(row)
    end
  end
end 
```

# c# - 如何让 SMO 应用程序在另一台机器上运行

> ID：10087682
> 
> 赞同：0
> 
> 时间：2012-04-10T11:15:47.697
> 
> 标签：c#, sql-server, visual-studio-2010, smo

我使用 SMO 编写了一个应用程序，它在我的开发 PC 上安装并运行良好，甚至安装在另一个位置并运行它，但是当我将它移动到另一台机器时，它会出现以下错误

```
Log Name:      Application
Source:        .NET Runtime
Date:          4/10/2012 12:03:56 PM
Event ID:      1026
Task Category: None
Level:         Error
Keywords:      Classic
User:          N/A
Computer:      ip-0A3AF6C2
Description:
Application: DataExport.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: Microsoft.SqlServer.Management.Common.ConnectionFailureException
Stack:
   at Microsoft.SqlServer.Management.Common.ConnectionManager.Connect()
   at DataExport.Data.SqlDataService.GetTableNames(System.String)
   at DataExport.Adapter.DataExportAdapter.GetTableNames(System.String)
   at DataExport.DataExportForm.SetInitialEditDisplay(DataExport.Adapter.IDataExportAdapter)
   at DataExport.DataExportForm..ctor(DataExport.Adapter.IDataExportAdapter)
   at DataExport.Program.Main()

Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name=".NET Runtime" />
    <EventID Qualifiers="0">1026</EventID>
    <Level>2</Level>
    <Task>0</Task>
    <Keywords>0x80000000000000</Keywords>
    <TimeCreated SystemTime="2012-04-10T11:03:56.000Z" />
    <EventRecordID>72945</EventRecordID>
    <Channel>Application</Channel>
    <Computer>ip-0A3AF6C2</Computer>
    <Security />
  </System>
  <EventData>
    <Data>Application: DataExport.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: Microsoft.SqlServer.Management.Common.ConnectionFailureException
Stack:
   at Microsoft.SqlServer.Management.Common.ConnectionManager.Connect()
   at DataExport.Data.SqlDataService.GetTableNames(System.String)
   at DataExport.Adapter.DataExportAdapter.GetTableNames(System.String)
   at DataExport.DataExportForm.SetInitialEditDisplay(DataExport.Adapter.IDataExportAdapter)
   at DataExport.DataExportForm..ctor(DataExport.Adapter.IDataExportAdapter)
   at DataExport.Program.Main()
</Data>
  </EventData>
</Event> 
```

我不知道如何解决这个问题，SMO dll 包含在包中

![安装后的文件列表](../Images/827977ed604347c98cf7a27f6be4142b.png)

旧版本的 smo (pre 10) 是否有可能覆盖包含的 dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:25:34.437

OK the solution is that SMO 10 is only for Server 2008, it will not work with 2005 SQL Express So the answer was to lower the version to 9.0

# mysql - 复杂的Mysql字符串不返回行

> ID：10087685
> 
> 赞同：0
> 
> 时间：2012-04-10T11:15:55.977
> 
> 标签：mysql, sql

我在“服务”表上有 3 行：

```
ID | name | ObrID
 0 |   A  |  1
 1 |   B  |  2
 2 |   C  |  -1 
```

-1 是不存在的 Obr，服务 2 不包含任何 Obr 或已被删除。

如果我用 fetch `select * from Services`，它按预期工作，但如果我做我的搜索 sql：

```
select 
    *,
    (select Name from Obrs where ID=ObrID) as ObrName
from
    Services
where
    (select Name from Obrs where ID=ObrID) like '%SEARCH_STRING%' 
```

它不返回最后一行。有什么办法让它返回类似的东西：

```
ID | name | ObrID | ObrName
 0 |   A  |   1   |   ObrA
 1 |   B  |   2   |   ObrB
 3 |   C  |   -1  |   NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:20:14.123

您想使用左连接。

[http://www.tizag.com/mysqlTutorial/mysqlleftjoin.php](http://left%20join%20tutorial)

```
SELECT s.*,o.ObrName from Services s
    LEFT JOIN Obrs o ON ID=ObrID
    WHERE OrbName LIKE '%$SEARCH_STRING%' OR OrbName IS NULL 
```

或者：

```
SELECT * FROM (select s.*,o.ObrName from Services s
    LEFT JOIN Obrs o ON ID=ObrID) tmp
    WHERE OrbName LIKE '%$SEARCH_STRING%' OR OrbName IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:27:17.550

下面可能会有所帮助：

```
select s.*,ob.Name from Services as s left join Obrs as ob on s.ID=ob.ObrID where  ob.Name like '%$SEARCH_STRING%'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-10T11:19:46.337

如果没有`Obrs.Name`，因为你`ObrID`的存在`-1`，那么`Obrs.Name`就会存在`NULL`，因此不存在`LIKE '%$SEARCH_STRING%'`。您可以添加一个附加条件来包括这些情况：

```
where 
    (select Name from Obrs where ID=ObrID) like '%$SEARCH_STRING%'
    OR ObrID = -1 
```

并按照[Flöcsy](https://stackoverflow.com/a/10087745/1220835)的建议使用`LEFT JOIN`. 联接始终是首选方法，尤其是与相关子查询相比。使用时的工作条件`LEFT JOIN`是

```
WHERE 
    Obrs.Name LIKE '%$SEARCH_STRING%'
    OR Obrs.Name IS NULL 
```

# sql - 在 PL/SQL 或 SQL 中使用循环终止 oracle 会话

> ID：10087686
> 
> 赞同：2
> 
> 时间：2012-04-10T11:15:56.620
> 
> 标签：sql, oracle, plsql, oracle10g, oracle11g

我们有这个查询：

```
ALTER SYSTEM KILL SESSION 'sid,serial#' IMMEDIATE; 
```

我需要杀死所有具有相同 SQL ID 的会话

我不确定如何将事物连接在一起，但到目前为止我有这个：

```
for rec in (SELECT se.sid,ss.serial# 
              FROM v$session ss, v$sesstat se, v$statname sn 
             WHERE se.statistic# = sn.statistic# 
               AND name like '%CPU used by this session%' 
               AND se.sid = ss.sid 
               AND ss.status = 'ACTIVE' 
               AND ss.username is not null 
               AND ss.sql_id ='f7frew3erwe'
             ORDER BY value ASC) loop
  ALTER SYSTEM KILL SESSION 'rec.sid,rec.serial#' IMMEDIATE; //this is the tricky part!
end loop; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T12:27:40.103

问题类似于[如何终止连接到我的 oracle 数据库的所有会话？](https://stackoverflow.com/questions/55342/how-can-i-kill-all-sessions-connecting-to-my-oracle-database)，尽管并非适用于所有会话。

您需要使用[`execute immediate`](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/executeimmediate_statement.htm)以更改 PL/SQL 块中的系统：

```
execute immediate 'Alter System Kill Session '''|| rec.Sid  
                       || ',' || rec.Serial# || ''' IMMEDIATE'; 
```

我询问您是否需要使用所有额外的系统表。如果您想要杀死的只是特定的，则类似以下查询*可能*`SQL_ID`就足够了：

```
SELECT se.sid,ss.serial# 
  FROM v$session
 WHERE status = 'ACTIVE' 
   AND username is not null 
   AND sql_id ='f7frew3erwe' 
```

# android - getXml(id) - 找不到资源异常

> ID：10087691
> 
> 赞同：3
> 
> 时间：2012-04-10T11:16:14.817
> 
> 标签：android, android-layout

`View`我的目标是在个人s上应用样式。我创建了`styles.xml`这样的样式：

```
<style name="trLinearLayout">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:orientation">vertical</item>
    <item name="android:background">@android:color/white</item>
</style> 
```

对应`ID`的生成在`R.java`，下面的代码使用了上面的样式：

```
 XmlResourceParser parser =    context.getResources().getXml(R.style.apptheme_black);
    AttributeSet attribs = Xml.asAttributeSet(parser);

    LinearLayout tr = new LinearLayout(context, attribs); 
```

运行时出现以下异常：

```
04-10 16:41:52.053: W/ResourceType(283): Requesting resource 0x7f050005 failed because it is complex
04-10 16:41:52.065: W/System.err(283): android.content.res.Resources$NotFoundException: Resource ID #0x7f050005
04-10 16:41:52.065: W/System.err(283):  at android.content.res.Resources.getValue(Resources.java:891)
04-10 16:41:52.065: W/System.err(283):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1865)
04-10 16:41:52.065: W/System.err(283):  at android.content.res.Resources.getXml(Resources.java:779) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:18:57.350

**getXml**方法用于从**res/xml**文件夹中获取 xml 资源。

# jsf - 如何在响应呈现之前处理多个提交？

> ID：10087692
> 
> 赞同：10
> 
> 时间：2012-04-10T11:16:19.310
> 
> 标签：jsf, jsf-2, java-ee-6

据测试报告，如果响应呈现速度不够快，有时可能会多次按下按钮，从而导致多次调用后端代码，这是我们不希望的。

应用程序是在 Glassfish 3.1.1 中使用 JSF 2.0 的 Java EE 6 Web Profile。

我想知道这应该如何*正确*处理，并想到了一些场景：

*   提交应在呈现响应时使用 javascript 禁用所有按钮。
*   Session 范围内的标志表明它已经处于活动状态，因此敏感代码被跳过并继续重新呈现上一次提交的响应。
*   延迟处理直到前一个请求完成的同步块。然后应该检测到它已经被处理并跳过了。
*   使用转换之类的“新”范围之一来处理检测？

我的直接直觉是，最好的方法是让敏感代码块原子化，但问题在于呈现正确的响应。

我应该如何处理这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T14:44:03.327

> *提交应在呈现响应时使用 javascript 禁用所有按钮。*

这是最容易以通用方式实现的。如果您碰巧`<f:ajax>`专门使用，您可以使用`jsf.ajax.addOnEvent()`以通用方式执行工作。另一种 JavaScript 方法是创建一种“正在加载”的覆盖层，它会阻止 UI，这样最终用户将无法再与底层页面进行交互。这基本上是一个绝对定位的隐藏，它以一些（透明度）`<div>`跨越整个视口。`opacity`您可以在提交时显示它并在渲染时隐藏它。这种技术的关键词是[“模态对话”](https://www.google.com/search?q=javascript%20modal%20dialog)。面向 UI 的 JSF 组件库中至少有这样一个组件。例如[PrimeFaces](http://www.primefaces.org)[`<p:dialog modal="true">`](http://www.primefaces.org/showcase/ui/dialogHome.jsf)里面有 a ，[`<p:ajaxStatus>`](http://www.primefaces.org/showcase/ui/ajaxStatusHome.jsf)或者[`<p:blockUI>`](http://www.primefaces.org/showcase/ui/blockUI.jsf)

唯一的缺点是，如果客户端禁用了 JS 或不使用它，它将无法工作，因此不会阻止 HTTP 客户端重复提交。

* * *

> *Session 范围中的一个标志表明它已经处于活动状态，因此敏感代码被跳过并继续重新呈现上一次提交的响应。*

这更多地被称为[“同步器令牌模式”](https://www.google.com/search?q=synchronizer%20token%20pattern)，并且曾经被[规范问题 559](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-559)要求为 JSF，该问题目前在针对 2.2 的票证上，但似乎没有任何活动。检测和阻塞部分在技术上很容易实现，但是如果您希望最终用户最终检索到初始请求生成的响应，则同步响应处理部分就不容易实现。异步响应处理很简单：只需不指定任何要更新的组件，即清空由`PartialViewContext#getRenderIds()`. 毕竟，这比使用 JS 禁用按钮或阻塞 UI 更健壮。

据我所知，[Seam 2](http://seamframework.org/)是唯一为此提供可重用 JSF 组件的，[`<s:token>`](http://docs.jboss.org/seam/2.1.2/reference/en-US/html/controls.html#d0e28828). 然而，我必须承认，对于一个新的[OmniFaces](http://omnifaces.org/)组件来说，这是一个有趣的想法。也许我会亲自去看看。

* * *

> *延迟处理直到前一个请求完成的同步块。然后应该检测到它已经被处理并跳过了。*

这通常不容易实现，这需要更改所有操作方法以检查工作是否已经完成。如果 webapp 在多个服务器上运行，它也将不起作用。同步器令牌更容易，因为它会在调用操作方法之前执行。同步器令牌也更便宜，因为您最终不会在队列中出现多个请求，这只会花费线程/资源。

* * *

> *使用转换之类的“新”范围之一来处理检测？*

这个问题不能通过使用托管 bean 范围来解决。托管 bean 作用域有不同的用途：bean 实例的生命周期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:46:32.573

正如 Adrian 提到的，我也会使用 BlockUI。Primefaces有一个[BlockUI 组件](http://www.primefaces.org/showcase/ui/misc/blockUI.xhtml)。当您通过 ajax 提交表单时，您还可以在请求期间使用覆盖。有关示例，请参阅 Primefaces的[Ajax 状态](http://www.primefaces.org/showcase/ui/ajax/status.xhtml)。

# mysql - 字段值的Mysql逗号计数

> ID：10087693
> 
> 赞同：2
> 
> 时间：2012-04-10T11:16:31.213
> 
> 标签：mysql, database, stored-procedures

我想从 MySQL 查询中计算字符串分隔符，这意味着如果字段值是这样的：-

```
 1,2,3,4,5 
```

由于字符串以逗号分隔，因此分隔符计数为 4。

任何想法然后请分享

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:21:11.493

您可以尝试计算字符串的长度并减去不带逗号的字符串长度，如下所示：

```
LENGTH('1,2,3,4,5') - LENGTH(REPLACE('1,2,3,4,5', ',', '')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:21:59.483

```
select length('1,2,3,4,5') - length(replace('1,2,3,4,5', ',', '')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:44:06.453

我建议以下设计：

```
Table name : USER_HOBBIES

| USER_ID | HOBBY_ID |
     1         1
     1         2
     1         3
     2         2
     2         4
     2         5 
```

现在您可以轻松计算给定用户的用户爱好：

```
SELECT count(*) FROM USER_HOBBIES WHERE USER_ID = <user-id> 
```

虽然它需要另一个表，但它更清晰，并且在一个长长的爱好列表中，这将比使用操作字符串的函数快得多。

# ios - NSPredicate to-many 关系

> ID：10087694
> 
> 赞同：6
> 
> 时间：2012-04-10T11:16:32.820
> 
> 标签：ios, nspredicate, one-to-many, relationship

如何找到所有具有超过 1 个项目的子类别的类别？我正在使用以下代码，但我得到“这里不允许多对多键”。

我需要使用子查询吗？

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Categories"];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY subcategories.items > 0"];
[request setPredicate:predicate]; 
```

帮助！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T08:42:50.190

根据我的经验，您应该更改谓词格式字符串

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY subcategories.items > 0"]; 
```

从

```
@"ANY subcategories.items > 0" 
```

进入

```
@"subcategories.items.@count > 0" 
```

请注意，ANY 关键字也需要使用，否则您将以错误的方式查询属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T08:57:24.203

在您的 NSPredicate 中，您应该`subcategories.items.@count >0`改用。

抱歉，仅当类别子类别是一对一时才有效。

真的，你应该做的是删除所有没有项目的子类别，我想。

Than tou 应该只检查是否有任何子类别，这意味着它们不是空的。 `subcategories.@count >0`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T14:58:02.357

您只能在 SQL 后端使用一对多关系。这会做到这一点，但您必须将“反向链接”添加到有序集中（如果您使用排序则保留顺序 - 和唯一性，因为您可能会获得多个子类别指向同一类别）。考虑到限制，不理想，但还不错。

```
// Search for all subcategories with item count > 0
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Subcategory"];
request.predicate = [NSPredicate predicateWithFormat:@"items.@count > 0"];
NSError *error = nil;
// They should have an inverse relationship to their category...
// We have to iterate and insert them in to a set, but there is no additional
// disk access.
NSMutableOrderedSet *results = [NSMutableOrderedSet orderedSet];
[[self.projectDatabase.managedObjectContext executeFetchRequest:request error:&error] enumerateObjectsUsingBlock:^(Subcategory *obj, NSUInteger idx, BOOL *stop) {
    [results addObject:obj.category];
}]; 
```

**编辑**

不幸的是，我认为 SQL 存储不可能做到这一点。首先，让我强调一下，我不是 SQL 专家，而且我通常会尝试设计我的 CoreData 存储，以便不需要这些类型的查询。但是，以下 SUBQUERY 与 InMemory 存储一起使用，因此它是一个格式正确的子查询。

```
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"SUBQUERY(subcategories, $s, $s.items.@count > 0).@count > 0"]; 
```

但是，该谓词在使用 SQL 存储时会出错。文档确实说在 SQL 存储中使用谓词时存在相当多的限制，所以我既不感到惊讶，也不倾向于花太多时间研究这一点。

> 包含 KVC 聚合的 Keypath 不应该有；未能处理 $s.items.@count

# mysql - 使用具有 3600 万条记录的 MyISAM 表提高 MySQL 基本更新性能

> ID：10087696
> 
> 赞同：0
> 
> 时间：2012-04-10T11:16:36.780
> 
> 标签：mysql, performance, dataset

这个问题已经被问过很多次了，但是我所做的更新非常简单，我想知道我是否可以提高性能。

我有一张表，目前存储了大约 3600 万条记录，总共 1.76 亿条记录。这是定义：

```
CREATE  TABLE IF NOT EXISTS `mydb`.`africaPop` (
  `geokey` VARCHAR(14) NOT NULL ,
  `xpos` DECIMAL(7) NULL ,
  `ypos` DECIMAL(7) NULL ,
  `cellvalue` DECIMAL(14,5) NULL DEFAULT -9999 ,
  `classCode` INT(11)  NULL DEFAULT -9999 ,
  `classColour` VARCHAR(9) NULL DEFAULT NULL ,
  PRIMARY KEY (`geokey`) ,
  INDEX `IDXVALUE` (`cellvalue` ASC) ); 
```

该表有两个索引。主键和 idxvalue。

我所做的更新非常简单：

1.  使用 classCode = -9999 更新所有记录；

    ```
    update africaPop set classCode = -9999; 
    ```

2.  更新 classCode = 10 其中 cellvalue BETWEEN 0 AND 25

    ```
    update africaPop set classCode = 10 where cellvalue BETWEEN 0 AND 25; 
    ```

更新在具有 8 个独立内核的 48GB RAM Linux 数据库服务器中完成。服务器是新的，只有一个用户，因此它只处理该更新。

第一次更新需要 2 分 17 秒。第二个需要 2 分 28 秒。

这可能听起来很傻，但 2 分钟对于我们的要求来说太长了。我设法通过使用`LOAD LOCAL IN FILE`key_buffer_size 并将其增加到 RAM 的 25% 来显着减少插入时间。

如何减少更新时间？

# wpf - 从列表视图中的组合框和文本框获取值

> ID：10087698
> 
> 赞同：0
> 
> 时间：2012-04-10T11:16:42.097
> 
> 标签：wpf, user-controls, wpf-controls

我所拥有的是一个`ListView`带`TextBlock`列的列，一个`ComboBox`列和一个`TextBox`列。我想要做的是从包含文本块、组合框和文本框的选定行中获取值。我能够从`TextBlock`using 中获取值：

```
string id = (listView1.SelectedItems[i] as DataRowView).Row[0].ToString();//works 
```

但无法从组合框和文本框中获取值。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:26:02.080

您需要获取代表所选行的项目容器。

它会是这样的：

```
listView1.ItemContainerGenerator.ContainerFromItem(listView1.SelectedItems[i]); 
```

一旦你拥有了代表你的行的控件，你应该能够访问它的逻辑树。

# c - C中的哥德巴赫理论

> ID：10087700
> 
> 赞同：1
> 
> 时间：2012-04-10T11:17:01.610
> 
> 标签：c, primes

我想编写一些代码，它采用任何正数、偶数（大于 2）并给我求和到这个数字的最小素数对。我需要这个程序来处理任何长达 9 位的整数。

我的目标是制作如下所示的东西：

> ```
> Please enter a positive even integer ( greater than 2 ) :
> 10
> The first primes adding : 3+7=10.
> Please enter a positive even integer ( greater than 2 ) :
> 160
> The first primes adding : 3+157=160.
> Please enter a positive even integer ( greater than 2 ) :
> 18456
> The first primes adding : 5+18451=18456. 
> ```

除了stdio.h，我不想使用任何库。除了最基本的工具箱之外，我不想使用数组、字符串或其他任何东西：scanf、printf、for、while、do-while、if、else if、break、continue 和基本运算符（<、>、 ==、=+、!=、%、*、/ 等...）。请不要使用其他功能，尤其是 is_prime。

我知道如何将输入限制为我的需要，以便它循环直到给出有效条目。

所以现在我正在尝试找出算法。

我想像这样开始一个while循环：

```
 #include <stdio.h>
long first, second, sum, goldbach, min;
long a,b,i,k; //indices

int main (){

    while (1){
        printf("Please enter a positive integer :\n");
        scanf("%ld",&goldbach);
        if ((goldbach>2)&&((goldbach%2)==0)) break;
        else printf("Wrong input, ");
        }

    while (sum!=goldbach){
        for (a=3;a<goldbach;a=(a+2))
            for (i=2;(goldbach-a)%i;i++)
                first = a;
        for (b=5;b<goldbach;b=(b+2))
            for (k=2;(goldbach-b)%k;k++)
        sum = first + second;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:23:45.723

具有测试素数的功能

```
int is_prime(unsigned long n) 
```

然后你只需要测试是否`a`和`goldbach - a`都是素数。你当然可以假设`a <= goldbach/2`。

并且一定要`goldbach = 4`正确处理。

如果需求不允许定义和使用您自己的函数，请先忽略它们。使用您认为有用且方便的任何功能来解决问题。当您有一个使用不允许的功能的有效解决方案时，您开始用允许的构造替换它。自定义函数可以直接内联，将 替换为`return`赋值，因此`if (is_prime(a))`您可以使用代码来确定是否`a`为素数，而不是对结果进行`return`赋值`is_prime = result;`并测试该变量`if (is_prime)`。在你使用过库函数的地方，自己重新实现它们——效率并不重要——然后也内联它们。

# python - 命令“gcc”失败，退出状态为 1（安装 psyco）

> ID：10087704
> 
> 赞同：1
> 
> 时间：2012-04-10T11:17:13.060
> 
> 标签：python, gcc, compiler-errors

我运行 Ubuntu 11.10，gcc 版本 4.6.1。

我一直在尝试安装 psyco，但不断收到此错误：

```
PROCESSOR = 'i386'
running build
running build_py
running build_ext
building 'psyco._psyco' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DALL_STATIC=1 -Ic/i386 -I/usr/include/python2.7 -c c/psyco.c -o build/temp.linux-i686-2.7/c/psyco.o
In file included from c/initialize.h:55:0,
                 from c/psyco.c:14:
c/mergepoints.c:242:3: error: ‘JUMP_IF_FALSE’ undeclared here (not in a function)
c/mergepoints.c:242:3: error: ‘JUMP_IF_TRUE’ undeclared here (not in a function)
c/codegen.c:127:19: warning: ‘psyco_source_condition’ defined but not used [-Wunused-function]
c/codegen.c:747:10: warning: ‘integer_lshift’ defined but not used [-Wunused-function]
c/Objects/plistobject.c:115:10: warning: ‘PsycoList_SingletonNew’ defined but not used [-Wunused-function]
error: command 'gcc' failed with exit status 1 
```

我已经安装了 python-setuptools 但到目前为止没有任何效果。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:27:34.970

[Google 是您的朋友：如相应的Ubuntu 错误报告](https://bugs.launchpad.net/ubuntu/+source/psyco/+bug/685177)中所述，psyco 不构建 Python 2.7，也不能与 Python 2.7 一起使用。

为什么需要 Psyco？如果您需要优化紧密循环，[Cython](http://cython.org/)可能会为您提供帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-26T02:31:33.783

也许你应该得到“ [https://github.com/develersrl/gccwinbinaries](https://github.com/develersrl/gccwinbinaries) ”安装路径：C:/mingw 和安装路径：C:/mingw/bin 。最后在python安装目录D:/Python26找到distutils.cfg /Lib/distutils

# c - GCC 函数名冲突

> ID：10087706
> 
> 赞同：5
> 
> 时间：2012-04-10T11:17:20.730
> 
> 标签：c, gcc

我在测试一个示例代码时遇到了一些问题，因为我的 abs 函数没有返回正确的结果。abs(-2) 正在输出 -2 （顺便说一下，这应该是绝对值函数，如果不清楚的话）

在变得有点绝望之后，我最终得到了以下代码

```
#include <stdio.h>

unsigned int abs(int x) {
    return 1;
}

int main() {
    printf("%d\n", abs(-2));
    return 0;
} 
```

这没有任何用处，但它可以显示我的问题。这是输出 -2，而预期输出 1。

如果我将函数名称更改为其他名称（例如 abs2），则结果现在是正确的。此外，如果我将其更改为接收两个参数而不是一个，它也可以解决问题。

我的明显猜测：与标准 abs 函数冲突。但这仍然不能解释为什么输出是 -2（如果使用标准 abs 函数，它应该是 2）。我尝试检查两个版本的汇编输出（使用名为 abs 和 abs2 的函数）

这是两个程序集的差异输出：

```
23,25c23,25
< .globl abs
<   .type   abs, @function
< abs:
---
> .globl abs2
>   .type   abs2, @function
> abs2:
54c54
<   .size   abs, .-abs
---
>   .size   abs2, .-abs2
71c71,74
<   movl    -4(%rbp), %edx
---
>   movl    -4(%rbp), %eax
>   movl    %eax, %edi
>   call    abs2
>   movl    %eax, %edx 
```

据我了解，第一个版本（函数名为 abs）只是丢弃函数调用，因此使用参数 x 而不是 abs(x)

总结一下：为什么会发生这种情况，特别是因为我找不到一种方法来获得任何关于此的警告或错误。

在 Debian Squeeze、ggc 4.4.5 和 gcc 4.1.2 上测试

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T11:34:58.057

由于以下因素的相互作用，GCC 正在捉弄你：

*   `abs`是一个内置函数；
*   您声明在标准（和内置）`abs`返回时返回。`unsigned int``abs``signed int`

尝试编译`gcc -fno-builtin`；在我的盒子上，这给出了预期的结果`1`。在没有该选项但`abs`声明为返回的情况下进行编译`signed int`会导致程序打印`2`。

（这个问题的真正解决方案是不要为你自己的函数使用库标识符。还要注意你不应该打印一个`unsigned int`with `%d`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:36:59.247

`gcc`优化调用以`abs()`使用其内置的`abs()`. 因此，如果您使用该`-fno-builtin`选项（或将您的定义`abs()`为返回`int`），您会注意到您得到了正确的结果。据此（[引用](http://gcc.gnu.org/onlinedocs/gcc-4.4.7/gcc/Other-Builtins.html)）：

> GCC 包括标准 C 库中许多函数的内置版本。即使您指定了 -fno-builtin 选项，带有 _ *builtin*前缀的版本将始终被视为与 C 库函数具有相同的含义。（请参阅 C 方言选项）其中许多功能仅在某些情况下进行了优化；**如果它们在特定情况下未优化，则会发出对库函数的调用**。

如果你首先`stdlib.h`声明`abs()`了 include ，你会在编译时得到一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:38:15.113

听起来很像[这个错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=34130)，它是从 2007 年开始的，并指出已修复。

您当然应该尝试在没有 GCC 的内在函数的情况下进行编译，即在编译时通过`-fno-builtin`（或仅`-fno-builtin-abs`用于狙击`abs()`）。

# java - 从 Java 应用程序提交 ASP 表单

> ID：10087707
> 
> 赞同：1
> 
> 时间：2012-04-10T11:17:25.003
> 
> 标签：java, javascript, asp.net

我正在编写一个具有登录屏幕的 Java 应用程序。理想情况下，我想获取用户提供的数据（姓名、密码），并将其提交到可以验证其凭据的 ASP 表单。我没有自己的 ASP 表单，我只能访问 URL。我也不希望用户直接在 Web 表单中输入他们的凭据。他们会将他们的凭据输入我的程序，我的程序会将数据放入表单并提交，并根据响应允许/拒绝用户。

当然，ASP 表单上的提交按钮是一个 POST 请求。但是，构建 URL (...login?username=name&password=pass) 不起作用，因为必须通过填写了文本框的按钮提交表单。

我尝试了两种方法：

1.  使用 Java 的 URLConnection 类。这似乎不起作用，因为表单提交仅限于我上面提到的方法，即构造 URL。

2.  使用 Javascript 访问和编辑页面上的元素。这也不起作用，因为 Javascript 是从我的程序运行的，该程序不是 Web 浏览器，因此无法访问常用的“文档”或“窗口”。

我能想到的其他潜在解决方案：

1.  打开浏览器到登录页面，但不给它焦点，运行脚本来填写和提交表单，解析响应，然后关闭浏览器。除了在我的 Java 程序中输入登录页面外，这根本不会涉及用户。

2.  使用第 3 方 Java 库（建议？参考教程？）。

3.  将 URL 嵌入我的登录屏幕（在这方面的任何帮助将不胜感激）。

无法更改的事情是我的程序是用 Java 编写的，并且登录 URL 是一个 ASP 表单，它隐藏了 URL 中的 POST 数据。

让我知道是否有任何需要澄清的地方。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:27:02.777

尝试 htmlunit，虽然它是为测试而设计的，但它非常适合。您可以将它与 Selenium webdriver 结合使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:49:24.050

为什么不使用 javascript 在 IFrame 中打开 ASP 表单填充所有字段然后发布它。

这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T02:50:23.870

Sfk 是正确的，我遇到了类似的问题并设法填写表格并使用[Htmlunit](http://htmlunit.sourceforge.net/ "html单元")提交。@sfk 非常感谢，你让我走上了正确的道路。

所以用 htmlunit

```
 //for chrome simulation
 WebClient webClient = new WebClient(BrowserVersion.CHROME_16);
 //has getting an error from [http://www.google-analytics.com/ga.js with javascript on.
 webClient.setJavaScriptEnabled(false);

 HtmlPage page = webClient.getPage("http://yourtargetpage/Default.aspx");

//get the form by name, check page source for name
 HtmlForm form = page.getFormByName("aspnetForm");
 HtmlPasswordInput inputPass =  form.getInputByName("your input password text field name");    
 HtmlTextInput userName =  form.getInputByName("your input user text field name");

 HtmlSubmitInput button=form.getInputByName("your target submit button");

 //set username and password
  userName.setText("myuser");
  inputPass.setText("mypassword");
//click the submit button and get the returned page
  HtmlPage page2 = button.click(); 
```

就是这样..您获得了回复页面并在字段上发送了信息..您现在可以解析页面并获取站点响应..

# iphone - 在一个 wifi 中 Asyncsocket 连接成功，但在另一个 wifi 中没有

> ID：10087710
> 
> 赞同：0
> 
> 时间：2012-04-10T11:17:42.470
> 
> 标签：iphone, .net, ios, ipad, asyncsocket

我正在使用 cocoaasyncsocket（在 iPad 上）连接到 tcp/ip 服务器（在 PC 上的 dotnet）。这里有几个 wifi 网络。当 iPad 和 PC 都在一个特定的 wifi 中时，一切正常。但是如果他们俩都加入了另一个wifi，他们就无法相互连接。其他一切都完全一样。它可能是什么？有什么建议么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:03:12.683

弄清楚了。工作的 wifi 没有阻塞我正在使用的端口，但其他 wifi 阻塞了。打开该端口可以解决此问题。

# css - 如何在父菜单项而不是子菜单项下划线？

> ID：10087711
> 
> 赞同：0
> 
> 时间：2012-04-10T11:17:43.783
> 
> 标签：css, wordpress

使用 Wordpress 菜单“builder”，我得到以下代码：

```
 //Pseaudo code

  <ul id="main-menu-main">
    <li class="menu-item"><a></a></li>
    <li class="menu-item current-menu-ancestor">
      <a></a>
      <ul class="sub-menu">
        <li class="menu-item"><a></a></li>
        <li class="menu-item current-menu-item"><a></a></li>
      </ul>
    </li>
  </ul>

  // and I use the following CSS 
  #menu-main-menu a:hover { text-decoration: underline; }
  #menu-main-menu .current-menu-ancestor a { text-decoration: underline; } 
```

我最后一行 css 的问题是下面的所有`a`元素`current-menu-ancestor`都带有下划线。我只希望链接中`current-menu-ancestor`带有下划线。

我认为这应该很简单，但是现在我的头没有集中：-/

*父/子的完整代码如下所示：*

```
<ul id="menu-main-menu" class="menu">
  <li id="menu-item-401" class="menu-item-first menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor current-menu-ancestor current-menu-parent current-page-parent current_page_parent current_page_ancestor menu-item-401">
  <a>menu 1</a>    
  <ul class="sub-menu">
    <li id="menu-item-444" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-415 current_page_item menu-item-444">
    <a> sub 1</a>
    </li>
  </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:25:47.833

使用以下 CSS 片段：

```
#menu-main-menu .current-menu-ancestor > a { text-decoration: underline; } 
```

这`>`是“子组合器”，只会选择其左侧选择器的直接子代。

请参阅[此处](http://css-tricks.com/child-and-sibling-selectors/)了解子选择器和同级选择器的出色汇总。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:25:59.833

如果你想直接在**.current-menu-ancestor上进行****文本装饰**，那么可以这样写：**`child`**

 **```
#menu-main-menu .current-menu-ancestor > a { text-decoration: underline; } 
```**

# sql - T-SQL 重新排序表中的行

> ID：10087712
> 
> 赞同：2
> 
> 时间：2012-04-10T11:17:43.980
> 
> 标签：sql, sql-server-2008, tsql

如果这是一个重复的问题，请提前道歉，我没有查到:(

我有一个看起来像的表：

```
VersionID DocumentID VersionNo
111       12345         1
112       12345         2
113       12345         3 
```

我需要将“VersionNo”列的顺序（所有其他列保持不变）颠倒如下：

```
VersionID DocumentID VersionNo
111       12345         3
112       12345         2
113       12345         1 
```

我在考虑 CTE 和 ROW_NUMBER() OVER 的思路，但无法让它正常工作......

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T11:21:40.887

试试这个：

```
SELECT VersionID, DocumentID, ROW_NUMBER() OVER(PARTITION BY DocumentID ORDER BY VersionID DESC) as VersionNo 
FROM YOUR_TABLE 
```

如果您需要更新表格，请使用以下命令：

```
;WITH CTE AS (
    SELECT VersionID, DocumentID, ROW_NUMBER() OVER(PARTITION BY DocumentID ORDER BY VersionID DESC) as VersionNoNew
    FROM YOUR_TABLE
)
UPDATE CTE
SET VersionNo = VersionNoNew 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T11:22:53.663

```
SELECT VersionID
, DocumentID 
, ROW_NUMBER()OVER(PARTITION BY DocumentID ORDER BY VersionID DESC) as VersionNo 
FROM Version V
ORDER BY VersionID, DocumentID, VersionNo DESC 
```

**编辑**：如果您需要更新表格，以下应该可以工作：

```
WITH V as(
    SELECT VersionID
    , DocumentID 
    , VersionNo
    , ROW_NUMBER()OVER(PARTITION BY DocumentID ORDER BY VersionID DESC) as CalculatedVersionNum
    FROM Version
)
UPDATE V
SET VersionNo=CalculatedVersionNum; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:59:17.513

当前的答案没有考虑版本号中的差距或其他值。

无论值是什么，这都会反转版本：

测试数据：

```
declare @t table(VersionID int, DocumentID int, VersionNo int)
insert @t 
select 111,12345,1 
union select 112,12345,2 
union select 113,12345,4 
```

更新：

```
;with a as
(
  select VersionID, DocumentID, VersionNo, 
  row_number() over (partition by documentid order by VersionID desc) rn1 ,
  row_number() over (partition by documentid order by VersionID asc) rn2 
from @t
)
update a 
set versionno = b.versionno
from a
join a b on a.documentid = b.documentid and a.rn1 = b.rn2

select * from @t 
```

# python - Python - 比较来自同一 python 脚本的两个 CSV 文档从更新到另一个

> ID：10087713
> 
> 赞同：0
> 
> 时间：2012-04-10T11:17:47.547
> 
> 标签：python, csv, compare, row

**背景**：使用 Python 脚本，我从网站上抓取数据 (html) 并将这些数据放入 CSV 文档中。

此 CSV 文档如下所示：

```
Hong Kong;The Jardine Engineering Corporation Limited
Hong Kong;Towngas
Hong Kong;Tricor Services Limited
Hong Kong;UL International Limitied
Hong Kong;Urban Property Management Limited
Hong Kong;VTECH Corporate Services Ltd.
Vietnam;Cam Ranh Computer Co. Ltd
Vietnam;CFTP Company
Vietnam;Chevron Vietnam 
```

第一栏：国家

第二列：名称

我的文件有超过 5000 行。

**我需要将此 CSV 文档与另一个文档（来自相同的脚本，因此相同的结构）进行比较，以跟踪潜在的变化（如果我们有新的行，或者删除了一个）。** *最好的办法是创建一个包含所有更改的文件，或在终端中打印它们。*

**请记住，如果 CSV 文件（多行）发生变化，所有数据都会被转移 **

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:20:55.663

使用[GNU`diff`](http://en.wikipedia.org/wiki/Diff)。它是一个命令行工具，旨在**完全按照**您的意愿行事。提供 GUI 版本。

来自维基百科：

> 在计算中，`diff`是一种**文件比较实用程序，可输出两个文件之间的差异**。它通常用于显示文件的一个版本与同一文件的旧版本之间的更改。Diff 显示对文本文件的每行所做的更改。现代实现也支持二进制文件。 [1] 输出称为“差异”或补丁，因为输出可以与 Unix 程序补丁一起应用。类似文件比较实用程序的输出也称为“差异”；就像使用“grep”这个词来描述搜索行为一样，diff 这个词在行话中被用作计算任何差异的动词。[需要引用]

让您从怀疑中受益，您可能尝试在 Google 上搜索“*从 Python 中查找两个 csv 文件之间的差异*”之类的内容。如果您忘记了文件是`csv`格式化的，或者它们是使用 Python 创建的，那么搜索`find differences between text files`会`diff`为您找到 GNU。

* * *

编辑：

添加一行对 GNU 没有问题`diff`。它会找到改变的那一行，并告诉你。

例子：

```
lws@helios:~$ cat file1
alpha
beta
charlie
delta
echo
foxtrot

lws@helios:~$ cat file2
alpha
beta
charlie
CHAMELEON
delta
echo
foxtrot

lws@helios:~$ diff file1 file2
3a4
> CHAMELEON 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:28:42.143

欢迎来到 StackOverflow。:)

您的问题归结为在两个列表之间进行比较。这可以通过[difflib](http://docs.python.org/library/difflib.html)在 Python 中使用。

手册中的这个例子应该可以帮助你：

```
>>> diff = ndiff('one\ntwo\nthree\n'.splitlines(1),
...              'ore\ntree\nemu\n'.splitlines(1))
>>> diff = list(diff) # materialize the generated delta into a list
>>> print ''.join(restore(diff, 1)),
one
two
three
>>> print ''.join(restore(diff, 2)),
ore
tree
emu 
```

打印对文件的更改：

```
>>> s1 = ['bacon\n', 'eggs\n', 'ham\n', 'guido\n']
>>> s2 = ['python\n', 'eggy\n', 'hamster\n', 'guido\n']
>>> for line in unified_diff(s1, s2, fromfile='before.py', tofile='after.py'):
...     sys.stdout.write(line)   
--- before.py
+++ after.py
@@ -1,4 +1,4 @@
-bacon
-eggs
-ham
+python
+eggy
+hamster
 guido 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T02:02:30.913

```
OLD_PATH = r'/Users/abelrossignol/Desktop/1.csv'
NEW_PATH = r'/Users/abelrossignol/Desktop/2.csv'

out = open("Out.txt", 'w')

old = open(OLD_PATH, 'r')
old_lines = list(old)
old.close()

new = open(NEW_PATH, 'r')
new_lines = list(new)
new.close()

for line in unified_diff(old_lines, new_lines, fromfile=OLD_PATH, tofile=NEW_PATH):
    out.write(line)
    print("Writter") 
```

似乎工作完美。我仍在尝试理解 Out.txt 的结构，但最困难的已经完成。

非常感谢您的帮助 ;-）

我希望有一天这可能对其他人有所帮助。

# emacs - Emacs：mediawiki 保存错误

> ID：10087723
> 
> 赞同：1
> 
> 时间：2012-04-10T11:18:25.040
> 
> 标签：emacs, mediawiki

我刚刚开始使用 mediawiki.el 来编辑内部 wiki 页面。我已经按照描述进行了设置。我连接到 wiki，编辑我想要的文件。当我想提交我点击的编辑时`C-x C-s`，它会提示我提供摘要，但在此之后我收到以下错误：

```
let*: The server encountered an error: (unknown_action) Unrecognized value for parameter 'action': edit 
```

知道我在做什么错吗？非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:36:50.683

根据[这个线程](http://wikimedia.7.n6.nabble.com/Problem-with-action-edit-td1148687.html)，该错误很可能意味着您拥有 MediaWiki 的旧版本（不太可能），或者您禁用了 API。

要通过 API 启用编辑，您需要在 wiki 的 LocalSettings.php 中设置`$wgEnableAPI`和`$wgEnableWriteAPI`to `true`。

# mongodb - 如何将新的按类型归档的数据添加到现有文档 Mongodb？

> ID：10087724
> 
> 赞同：0
> 
> 时间：2012-04-10T11:18:27.383
> 
> 标签：mongodb, timestamp

我正在尝试添加字段（键）现有文档的所有记录。我想；保存新记录时，自动保存到当前日期该字段；

现在我的一个文档实例 studen { "_id" : ObjectId("4f83ed9bcba9560ea474465d"), "name" : "", "lastname" : "", "number" : "", .....}

我想要这个；

{ "_id" : ObjectId("4f83ed9bcba9560ea474465d"), "name" : "", "lastname" : "" "Date" : currentTime() }

当新记录保存到文档时，自动将当前时间保存到文档中。我不想从客户端这样做，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:26:11.277

只是为了确保我理解正确，您是否希望使用新的“日期”字段更新集合中的每个文档，或者您只是希望在插入新文档时将当前日期添加到新文档中？

给定一个集合（为简洁起见），如下所示：

```
> db.students.find()
{ "_id" : 1, "name" : "Joe" }
{ "_id" : 2, "name" : "Jane" }
{ "_id" : 3, "name" : "Sam" }
> 
```

可以在单个更新语句中将日期添加到集合中的每个文档，如下所示：

```
> db.students.update({}, {$set:{"Date": new Date()}}, false, true)
> db.students.find()
{ "Date" : ISODate("2012-04-10T15:06:34.608Z"), "_id" : 1, "name" : "Joe" }
{ "Date" : ISODate("2012-04-10T15:06:34.608Z"), "_id" : 2, "name" : "Jane" }
{ "Date" : ISODate("2012-04-10T15:06:34.608Z"), "_id" : 3, "name" : "Sam" }
> 
```

传递给更新函数的 false 和 true 值表示 upsert=false 和 multi=true。更多信息可以在 Mongo 文档的 update() 函数中找到： [http ://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29](http://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29)

要在将新文档添加到集合时将新的 Date 对象添加到新文档，只需在保存文档时创建一个新的 Date 对象：

```
> db.students.save({ "_id" : 4, "name" : "Chris", "Date":new Date()})
> db.students.find()
{ "Date" : ISODate("2012-04-10T15:06:34.608Z"), "_id" : 1, "name" : "Joe" }
{ "Date" : ISODate("2012-04-10T15:06:34.608Z"), "_id" : 2, "name" : "Jane" }
{ "Date" : ISODate("2012-04-10T15:06:34.608Z"), "_id" : 3, "name" : "Sam" }
{ "_id" : 4, "name" : "Chris", "Date" : ISODate("2012-04-10T15:12:03.161Z") }
> 
```

当在 Java Script 中创建 Date 对象时，没有将任何值传递给构造函数，它将创建一个具有当前 UTC（通用或 GMT）时间的日期对象。关于 Java Script Date 对象的更多信息可以在这里找到： http: [//www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

不同的语言处理日期的方式不同，因此根据您的应用程序编写的语言，您必须查看该语言的文档以了解它如何实现日期对象。

希望这会让你指出正确的方向。

# sql - 跟踪标志 1211 不起作用 - SQL Server 2008 R2

> ID：10087726
> 
> 赞同：0
> 
> 时间：2012-04-10T11:18:32.087
> 
> 标签：sql, sql-server, sql-server-2008, locking, deadlock

在 SSIS 加载期间，当员工表得到更新时，锁定就会生效。

但是，已使用以下语句禁用表上的锁升级：

1.  `ALTER TABLE dbo.Employee SET (LOCK_ESCALATION = DISABLE)`
2.  `DBCC TRACEON (1211,-1)`

但是，表（对象）确实被锁定并保留了将近一个小时。总数 更新（插入、更新、删除语句）约为 200,000

这里的最终目标并不是真正避免锁定，而是成功地允许对表进行读取。

没有。更新（插入/更新/删除）的数量非常高，每天 50,000 次，而实际上由于锁而受到影响的表上只有大约 50-100 个搜索/选择查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:04:28.070

来自 BOL：

> SET LOCK_ESCALATION = 禁用
> 
> 在大多数情况下防止锁升级。表级锁并不是完全不允许的。例如，当您在可序列化隔离级别下扫描没有聚集索引的表时，数据库引擎必须获取表锁以保护数据完整性。

Serializable 是 SSIS 包上的默认 IsolationLevel（单击控制流上的任何空白区域并检查包的属性）。任何更改您的表都没有聚集索引？

# azure - Windows Azure 服务总线主题计费

> ID：10087732
> 
> 赞同：2
> 
> 时间：2012-04-10T11:19:11.610
> 
> 标签：azure, servicebus

我需要有关 Windows Azure 服务总线主题计费的详细信息。例如。

我会为我的应用程序发布的内容或我的应用程序收到的内容付费吗？

例如。假设我有一个出版商和 5 个主题。每个主题每秒有 1000 条消息，其中每条消息的大小为 1KB。另一方面，我有一个订阅者只订阅了一个主题并且还应用了过滤器，因此它每秒只接收 10 条消息，而不是 1000 条。

在出版商方面，我们有。5 * 1000 msg/sx 60*60*24*30 * 1KB = 12 960 000 000 条消息 * 1KB 用于一个月内的五个主题。

在订阅者端，我们有 1 * 10 msg/sx 60*60*24*30 * 1KB = 25 920 000 条消息 * 1KB。

那么，我要为 A 或 B 付费吗？A：12 960 000 000 条消息 * 1KB B：25 920 000 条消息 * 1KB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:27:45.543

我发现这篇文章对理解定价结构很有帮助：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh667438.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh667438.aspx)

从本质上讲，将消息放入队列算作一条消息*。*从队列中读取消息（或尝试读取）也算作一条消息。在主题和订阅者的情况下，将消息*放在*主题上是一条消息，每个订阅者阅读一条消息也是*一条*消息。

在您的示例中，您需要为 12 960 000 000 + 25 920 000 = 12985920000 条消息付费。或者约 13000 美元——考虑到您正在通过事务排队系统推送大约 12TB 的数据，这还不算太糟糕。

请注意，您应该使用内置的长轮询支持来读取队列，因为您将因尝试读取空队列而被收费。

另请记住，获取身份验证令牌需要支付象征性费用，因此请确保您的代码不会为每个 put 或 get 获取新令牌。请参阅本文底部的费用表：http: [//msdn.microsoft.com/en-us/library/hh767287%28VS.103%29.aspx](http://msdn.microsoft.com/en-us/library/hh767287%28VS.103%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:26:18.000

您将被收取 A+B 费用...

> 同一消息的多次传递（例如，消息扇出到多个侦听器或在放弃、延迟或死信后检索消息）将被计为独立消息。例如，对于具有三个订阅的主题，发送和随后接收的单个 64 KB 消息将生成四个计费消息（一个“输入”加上三个“输出”，假设所有消息都传递到所有订阅）。

有关更多信息，请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/hh667438.aspx#BKMK_SBv2FAQ2_6](http://msdn.microsoft.com/en-us/library/hh667438.aspx#BKMK_SBv2FAQ2_6)

# ruby-on-rails - ActiveAdmin 错误：没有超类方法“按钮”

> ID：10087737
> 
> 赞同：17
> 
> 时间：2012-04-10T11:19:28.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin

我从 Rails 开始（我也是来自 Python 的 Ruby 新手），我目前正在尝试为 Rails 3.2.3（Ruby 1.9.3）设置 ActiveAdmin。我正在遵循[本指南](http://activeadmin.info/documentation.html "本指南")，但我无法正确运行它。当我运行`rails s`命令访问时，`localhost:3000/admin`我得到

```
NoMethodError in Active_admin/devise/sessions#new

Showing /home/lex/.rvm/gems/ruby-1.9.3-p125/gems/activeadmin-0.4.3/app/views/active_admin/devise/sessions/new.html.erb where line #11 raised:

super: no superclass method `buttons' for #<ActiveAdmin::FormBuilder:0xb429ae0> 
```

我在谷歌上找不到任何有用的东西，这里有什么问题？

如果您需要有关此异常的更多信息，请告诉我。

```
Extracted source (around line #11):

8:       f.input :password
9:       f.input :remember_me, :as => :boolean, :if =>  false  #devise_mapping.rememberable? }
10:     end
11:     f.buttons do
12:       f.commit_button "Login"
13:     end
14:   end 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-10T15:11:57.040

# **对于 Rails 4+**

如果您正在运行 Rails 4+，请使用`f.actions`而不是`f.buttons`. 这是一个在 ActiveAdmin 存储库中讨论此更改的问题[https://github.com/activeadmin/activeadmin/issues/1085](https://github.com/activeadmin/activeadmin/issues/1085)

# **2012年OP问题的原始答案**

似乎 formtastic 2.2.0（今天发布）打破了 active_admin 并且由于 active_admin 需要 formtastic >= 2.0.0 ... 放入你的 Gemfile 这个

```
gem "formtastic", "~> 2.1.1"
gem "activeadmin", "~> 0.4.3" 
```

然后运行

```
bundle update formtastic 
```

然后重新启动您的服务器（如果您正在运行）..

并且应该可以正常工作...

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-12-12T03:39:02.837

我有同样的问题，它杀死了我大约几个小时。

我正在使用 rails 4 和活动管理员表单 master git：

```
gem 'activeadmin', github: 'gregbell/active_admin' 
```

我只是使用“f.actions”而不是“f.buttons”

```
form do |f|
  f.inputs "Enter Todo details" do
    f.input :quote_id, :as => :select, :collection => Quote.all.map {|q| [ q.contact,q.id]}, :include_blank => false 
    f.input :name, :label => "Name of customer"
    f.input :state, :as => :select, :collection => ['Active','Closed'], :include_blank => false
    f.input :moving_date
    f.input :revisit
    f.input :address
    f.input :status
  end
  f.actions
end 
```

它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T16:05:26.347

我已经完成了 gemfile 中的更改

宝石'activeadmin'，'0.4.2'宝石'formtastic'，'2.0.0'

它解决了同样的问题。原因与上面解释的相同。formtastic 2.2.0 与 activeadmin 当前版本不兼容

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T04:27:25.883

我按照上面的说明进行操作，但同样的错误不断出现。它在我关闭并重新打开后自行解决`rails server`，但只是给遇到此问题的其他人的说明；确保重新启动服务器。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T12:53:27.043

您是否运行了“bundle”命令来获取必要的 gem 和依赖项（ActiveAdmin、Formtastic 等）？这是启动rails时的常见错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T02:45:14.397

我继承了一个在 2012 年 7 月左右编写的项目，该项目使用 ActiveAdmin 0.4.0 和`formtastic-bootstrap`（关闭 Git）。

由于那个版本的 AA 中的 URL 生成错误，我升级到 0.5.0，但现在我得到了超类错误。任何人都知道我应该如何处理这条线：

```
gem 'formtastic-bootstrap',   :git => "git://github.com/cgunther/formtastic-bootstrap.git", :branch => "bootstrap-2" 
```

# php - 文件下载 x-server

> ID：10087743
> 
> 赞同：0
> 
> 时间：2012-04-10T11:19:53.970
> 
> 标签：php, windows, download, fileserver

我有以下设置：

*   1 个网络服务器
*   4 个 Windows 文件服务器

所有都在同一个域中，并且在同一个网络上（10.13.1。）

如何让用户从文件服务器下载文件，而无需先将文件存储在网络服务器上？

目的是用户可以访问到文件 \FILESERVER1\relative\path\to\file的 URL（比如说[http://download/?server=1&path=/relative/path/to/file.zip](http://download/?server=1&path=/relative/path/to/file.zip) ） 。压缩

# yii - 数组中的 CGridView 过滤器下拉列表

> ID：10087747
> 
> 赞同：10
> 
> 时间：2012-04-10T11:20:20.467
> 
> 标签：yii

我有提供者表（id、title、onoff），其中 onoff 列是一个状态：1 = on，0 = off 我在 DB 中没有这些状态的表，所以我没有状态模型。

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'provider-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        array(
            'name'=>'id',
            'htmlOptions'=>array('width'=>'40px'),
        ),
        'title',
        array(
            'name'=>'onoff',
            'filter'=>CHtml::dropDownList('Provider[onoff]', '',  
                array(
                    ''=>'All',
                    '1'=>'On',
                    '0'=>'Off',
                )
            ),
        ),
        array(
            'class'=>'CButtonColumn',
            'template'=>'{update}{delete}'
        ),
    ), 
```

它过滤数据，但是在ajax之后忘记了下拉列表的状态在这种情况下构建下拉列表的最佳方法是什么？

在数据网格单元格中将 1 替换为 On 并将 0 替换为 Off 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T07:01:48.987

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'provider-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'columns'=>array(
    array(
        'name'=>'id',
        'htmlOptions'=>array('width'=>'40px'),
    ),
    'title',
    array(
        'name'=>'onoff',
        'value'=>'Crud::getOnoff($data->onoff)',
        'filter'=>CHtml::listData(Crud::getOnoffs(), 'id', 'title'),,
    ),
    array(
        'class'=>'CButtonColumn',
        'template'=>'{update}{delete}'
    ),
), 
```

在模型中

```
public function getOnoffs()
{
return array(
    array('id'=>'1', 'title'=>'On'),
    array('id'=>'0', 'title'=>'Off'),
);
}
public function getOnoff($onoff)
{
if($onoff == 1) 
    return 'On';
else 
    return 'Off';
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-12T09:37:32.670

```
array( 'name' => 'language',
 'value' => '$data->language',
 'filter' => CHtml::listData( Vediodesc::model()->findall(), 'language', 'language'),
 ), 
```

# php - 如何在同一个文件中与 Eclipse 一起调试 javascript 和 PHP 脚本

> ID：10087749
> 
> 赞同：-1
> 
> 时间：2012-04-10T11:20:23.963
> 
> 标签：php, javascript, jquery, eclipse

我可以使用 eclipse 在同一个文件中调试 javascript 和 PHP 吗？

我已经尝试了很多，但它不起作用。我有“面向 PHP 开发人员的 Eclipse”

```
Version: Helios Release
Build id: 20100617-1415" 
```

我已经安装了 JRE/JDK。我已经安装了 zendserver/wamp。我已经安装了 jsdt，但我无法在 Eclipse 上运行 JavaScript。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:54:33.687

您在浏览器中调试 JavaScript。

[IE8](http://msdn.microsoft.com/en-us/library/dd565625%28v=vs.85%29.aspx) +、[Chrome](https://stackoverflow.com/questions/66420/how-do-you-launch-the-javascript-debugger-in-google-chrome)和[Safari](http://developer.apple.com/library/safari/#documentation/appleapplications/Conceptual/Safari_Developer_Guide/DebuggingYourWebsite/DebuggingYourWebsite.html)都内置了 JavaScript 调试器。

Firefox 有[Firebug](http://www.getfirebug.com)。

# android - 如何在相机预览中获取图像叠加层

> ID：10087754
> 
> 赞同：2
> 
> 时间：2012-04-10T11:21:02.167
> 
> 标签：android

```
public class PreviewDemo extends Activity {
    private SurfaceView preview=null;
    private SurfaceHolder previewHolder=null;
    private Camera camera=null;
    private boolean inPreview=false;
    private boolean cameraConfigured=false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        preview=(SurfaceView)findViewById(R.id.preview);
        previewHolder=preview.getHolder();
        previewHolder.addCallback(surfaceCallback);
        previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    public void onResume() {
        super.onResume();

        camera=Camera.open();
        startPreview();
    }

    @Override
    public void onPause() {
        if (inPreview) {
            camera.stopPreview();
        }

        camera.release();
        camera=null;
        inPreview=false;

        super.onPause();
    }

    private Camera.Size getBestPreviewSize(int width, int height,
            Camera.Parameters parameters) {
        Camera.Size result=null;

        for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
            if (size.width<=width && size.height<=height) {
                if (result==null) {
                    result=size;
                }
                else {
                    int resultArea=result.width*result.height;
                    int newArea=size.width*size.height;

                    if (newArea>resultArea) {
                        result=size;
                    }
                }
            }
        }

        return(result);
    }

    private void initPreview(int width, int height) {
        if (camera!=null && previewHolder.getSurface()!=null) {
            try {
                camera.setPreviewDisplay(previewHolder);
            }
            catch (Throwable t) {
                Log.e("PreviewDemo-surfaceCallback",
                    "Exception in setPreviewDisplay()", t);
                Toast
                    .makeText(PreviewDemo.this, t.getMessage(), Toast.LENGTH_LONG)
                    .show();
            }

            if (!cameraConfigured) {
                Camera.Parameters parameters=camera.getParameters();
                Camera.Size size=getBestPreviewSize(width, height,
                    parameters);

                if (size!=null) {
                    parameters.setPreviewSize(size.width, size.height);
                    camera.setParameters(parameters);
                    cameraConfigured=true;
                }
            }
        }
    }

    private void startPreview() {
        if (cameraConfigured && camera!=null) {
            camera.startPreview();
            inPreview=true;
        }
    }

    SurfaceHolder.Callback surfaceCallback=new SurfaceHolder.Callback() {
        public void surfaceCreated(SurfaceHolder holder) {
            // no-op -- wait until surfaceChanged()
        }

        public void surfaceChanged(SurfaceHolder holder,
                int format, int width,
                int height) {
            initPreview(width, height);
            startPreview();
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            // no-op
        }
    };
} 
```

上面的代码工作正常，当我启动应用程序时，会显示相机预览，但没有执行任何操作。但我想在实时摄像头上获得图像叠加。请帮我.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:13:02.703

如果你仍然卡住，我会给你一个提示。在您的布局定义中，您可以定义框架布局或相对布局，使视图彼此重叠或看起来重叠。你可以在这里看到一个例子：

[http://littlesaiph.blogspot.de/2011/07/getting-images-laid-pause-over-video-in.html](http://littlesaiph.blogspot.de/2011/07/getting-images-laid-pause-over-video-in.html)

# iphone - 横向时的 BAD_ACCESS

> ID：10087760
> 
> 赞同：0
> 
> 时间：2012-04-10T11:21:11.420
> 
> 标签：iphone, ios, ipad

我想保持我的视野。为此，我正在使用此代码，但 BAD_ACCESS 即将到来。在这里，我正在为相机叠加视图编写此代码。

```
 -(void)viewDidLoad
 {
     [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeLeft];
     //Set Notifications so that when user rotates phone, the orientation is reset to landscape.
     [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
     //Refer to the method didRotate:   
     [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(didRotate:)
              name:@"UIDeviceOrientationDidChangeNotification" object:nil];
     [super viewDidLoad];
 }

 - (void) didRotate:(NSNotification *)notification
 {
        //Maintain the camera in Landscape orientation
        [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeLeft];
 } 
```

为什么它给 BAD ACCESS ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:36:55.643

要保持您的视图横向，只需返回纵向方向`NO`的`shouldAutorotateToInterfaceOrientation:`方法，例如 tihs ：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

# javascript - 如何获得“真正的”单引号

> ID：10087766
> 
> 赞同：0
> 
> 时间：2012-04-10T11:21:21.043
> 
> 标签：javascript, asp.net, code-behind, quotes

我有一个 asp.net 网页。

是否有可能获得“真正的”单引号客户端？

服务器端：

```
this.Attributes["onclick"] = "$('#button').click();"; 
```

客户端：

```
onclick="$(&amp;#39;#button&amp;#39;).click();" 
```

给出一个错误。

警报工作得很好，即客户端：

```
onclick="alert(&amp;#39;hello#amp;39;);". 
```

似乎我需要“真正的”单引号才能使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:38:48.363

这是标准的 ASP.NET 还是 ASP.NET MVC？似乎输出正在被转义，但没有示例代码或更多细节，我无法确定。

您的代码示例

```
this.Attributes["onclick"] = "$('#button').click();"; 
```

那是如何从服务器呈现的？从控制？

**更新**

此属性值编码是在 .NET 4.0 中引入的。如果必须，可以`controlRenderingCompatibilityVersion`在 web.config 中将其设置为“3.5”，请参见[pages Element (ASP.NET Settings Schema)](http://msdn.microsoft.com/en-us/library/950xf363%28v=VS.100%29.aspx) & [PagesSection.ControlRenderingCompatibilityVersion Property](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.controlrenderingcompatibilityversion.aspx)。

您能否（而不是将 onclick 逻辑直接放在属性值中）将函数记录在其他地方并将函数名称设置为 onclick 值？或者使用 jQuery 注册点击处理程序客户端？

# c# - 使用 SQL Server 作为数据库时如何保护或隐藏后端数据？

> ID：10087768
> 
> 赞同：0
> 
> 时间：2012-04-10T11:21:29.437
> 
> 标签：c#, sql-server, vb6

是否可以对用户隐藏我的应用程序中使用的数据库。我需要的是，当用户打开 SQL Server 管理工作室时，他不应该看到我用 C# 和 VB6 开发的应用程序中使用的数据库

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:26:01.200

有两种方法可以禁止访问数据库内容：

*   加密数据库内容：会降低性能
*   Autorisations：您专门为您的应用程序创建一个用户，将其作为数据库所有者，并删除所有用户的访问权限。您还需要在 MsSQL 服务器中禁用 Windows 身份验证连接，以便管理员无法以这种方式连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:29:28.683

使用用户登录访问数据库仅授予对已获得该使用权限的数据库的访问权限。不同的用户可以访问不同的数据库。也许你有 3 个用户：root、admin、user。

作为起点，请尝试查看 [http://msdn.microsoft.com/en-us/library/ms187936.aspx](http://msdn.microsoft.com/en-us/library/ms187936.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:26:34.627

您需要从角色 PUBLIC（SQL SERVER 2005 及更高版本）撤消“查看任何数据库”权限。来自 Stackoverflow。有关更多详细信息，请参阅 Management Studio 中的 ans[隐藏 SQL 数据库](https://stackoverflow.com/questions/935018/hide-sql-database-from-management-studio)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T11:27:24.850

不要授予用户访问数据库的权限。而是将凭据嵌入到您的程序中，以允许它通过专用帐户访问数据库。当用户使用您的程序时，程序的用户被授予访问权限，但如果用户尝试直接连接，他将被拒绝访问。

# mongoid - Mongoid - 数组赋值

> ID：10087775
> 
> 赞同：0
> 
> 时间：2012-04-10T11:21:46.197
> 
> 标签：mongoid

我在 Mongoid 2.3.4 中看到了一些奇怪的行为

```
 class Student
   has_and_belongs_to_many: teachers
 end

 class Teacher
   has_and_belongs_to_many: students
 end 
```

现在在 IRB

```
s = Student.first
s.teachers
=> []

s.teacher_ids = [Teacher.first.id, Teacher.last.id]
s.teacher_ids
=> [[BSON::ObjectId4f7c3300913417162c000008, BSON::ObjectId4f7c333b913417162c00000d]] 
```

不知道为什么这个数组是这样嵌套的。我期望

```
[BSON::ObjectId4f7c3300913417162c000008, BSON::ObjectId4f7c333b913417162c00000d] 
```

这会破坏 Rails 中的多选字段，其中 id 的大量分配会发生，如 IRB 中所示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:47:16.583

这可能与您尝试将`teachers_ids`属性设置为对象数组的事实有关`Teacher`。

您可以尝试这些作为替代方案：

```
s.teachers = [Teacher.first, Teacher.last] 
```

或者

```
s.teachers << Teacher.first
s.teachers << Teacher.last 
```

**更新：**

我刚刚进行了一点测试，可以确认您的分配方法在 Mongoid 2.4.6（这正是我碰巧安装的）和 2.4.8 中运行良好。

如果由于某种原因您无法升级到 Mongoid 2.4，您也可以尝试将 ID 作为`String`对象而不是 as`ObjectId`传递，如果这是通过 POST 参数传递的，将是这样处理的。

```
s.teacher_ids = [Teacher.first.id.to_s, Teacher.last.id.to_s] 
```

# ios - IOS 中 AFNetworking 缓存图像中的内存泄漏

> ID：10087777
> 
> 赞同：0
> 
> 时间：2012-04-10T11:21:54.257
> 
> 标签：ios, memory-leaks, afnetworking

我刚从 ASIHTTP 转移到 AFNetworking 库。我还在使用 Olivier Poitrey 和 Peter Steinberg 的 SDURLCache 库。我想缓存我将在我的应用程序中使用的所有图像。对于这些，我尝试了这个：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
        for(NSURLRequest *imageRequest in imageRequestArray){
            AFURLConnectionOperation *operation2 = [[[AFURLConnectionOperation alloc] initWithRequest:imageRequest] autorelease];
            [queue addOperation: operation2];
            [operation2 waitUntilFinished];
} 
```

当我需要显示图像时，我对每张图像都这样做：

```
 NSURL *url = [NSURL URLWithString:[cat imagePath]];
        NSURLRequest *imageRequest = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:30.0];

        AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:imageRequest 
                                                                                  imageProcessingBlock:nil
                                                                                             cacheName:@"nscache"
                                                                                               success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image){
                                                                                                   //NSData *responseData = [request responseData];
                                                                                                   imageView.alpha = 0.0;
                                                                                                   [imageView setImage:image forState:UIControlStateNormal];
                                                                                                   [UIView beginAnimations:@"ToggleViews" context:nil];
                                                                                                   [UIView setAnimationDuration:1.0];                
                                                                                                   imageView.alpha = 1.0;
                                                                                                   [UIView commitAnimations];
                                                                                               }
                                                                                               failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error){}
                                              ];
        [operation start]; 
```

一段时间后，应用程序发出内存警告，然后关闭。为此，我做了以下事情：

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
[[NSURLCache sharedURLCache] removeAllCachedResponses];
NSLog(@"Memory Warning...");
} 
```

它清除了缓存（我没有什么），但过了一会儿，应用程序再次关闭。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:09:34.447

问题可能是因为 ARC 没有自动设置在队列或后台线程上。我遇到了同样的问题，并通过以下文章解决了它：

[https://agilewarrior.wordpress.com/2012/04/09/memory-leaks-with-arc/](https://agilewarrior.wordpress.com/2012/04/09/memory-leaks-with-arc/)

# sql-server-2008-r2 - 错误：指定的强制转换无效。(SqlManagerUI)

> ID：10087782
> 
> 赞同：16
> 
> 时间：2012-04-10T11:22:05.733
> 
> 标签：sql-server-2008-r2, database-restore

我在 SQL Server 2008 R2 中有一个数据库备份。当我想将此备份还原到 SQL Server 时，我收到此错误：“错误：指定的强制转换无效。（SqlManagerUI）”如何解决此错误？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-29T05:58:52.730

当您尝试在较旧的 SQL 数据库中恢复较新版本的备份时，也会发生这种情况。例如，当您尝试恢复在 2012 年创建的具有 110 兼容性的数据库备份并且您尝试在 2008 R2 中恢复它时。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-12T14:21:31.413

通过这个家伙将旧数据库恢复到 SQL 2008中有一些[有趣的事情；](http://social.msdn.microsoft.com/forums/en-us/sqlsetupandupgrade/thread/071DA5BB-32C5-4C3F-9378-7E67C5DF2D44)你试过通过 TSQL 做吗？

```
Use Master
Go
RESTORE DATABASE YourDB
FROM DISK = 'C:\YourBackUpFile.bak'
WITH MOVE 'YourMDFLogicalName' TO 'D:\Data\YourMDFFile.mdf',--check and adjust path
MOVE 'YourLDFLogicalName' TO 'D:\Data\YourLDFFile.ldf' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-25T01:13:14.837

有时是因为2008年的store 2012 db这样的版本变化而发生的，那么如何检查呢？

```
RESTORE VERIFYONLY FROM DISK = N'd:\yourbackup.bak' 
```

如果它给出如下错误：

消息 3241，级别 16，状态 13，第 2 行设备“d:\alibaba.bak”上的媒体系列格式不正确。SQL Server 无法处理此媒体系列。消息 3013，级别 16，状态 1，行 2 验证数据库异常终止。

进一步检查：

```
RESTORE HEADERONLY FROM DISK = N'd:\yourbackup.bak' 
```

BackupName 为“ *** INCOMPLETE *** ”，Position 为“1”，其他字段为“NULL”。

意味着您的备份已损坏或取自较新版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-08T00:04:21.767

我从 SQL Server 2012 恢复到 SQL Server 2008 R2 时遇到了类似的错误“指定的转换无效”

首先，我得到了 MDF 和 LDF 名称：

```
RESTORE FILELISTONLY 
FROM  DISK = N'C:\Users\dell laptop\DotNetSandBox\DBBackups\Davincis3.bak' 
GO 
```

其次，我使用返回的这些名称使用 MOVE 进行了恢复：

```
RESTORE DATABASE Davincis3 
FROM DISK = 'C:\Users\dell laptop\DotNetSandBox\DBBackups\Davincis3.bak'
WITH 
   MOVE 'JQueryExampleDb' TO 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\Davincis3.mdf', 
   MOVE 'JQueryExampleDB_log' TO 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\Davincis3.ldf', 
REPLACE
GO 
```

我不知道“JQueryExampleDb”这个名字，但这对我有用。

然而，备份（和数据库）不向后兼容旧版本。

# java - 如何从java加载matlab中的图像

> ID：10087786
> 
> 赞同：0
> 
> 时间：2012-04-10T11:22:14.763
> 
> 标签：java, matlab

基本上我正在尝试创建一个小程序，允许我从 java GUI 在 matlab 中进行调用

它主要用于图像处理和去模糊，但我正在努力寻找一种能够有效地让我从 java 端完全控制 matlab 的方法

我希望它像这样工作：

```
{
    //create matlab execution call
    String loadImage = " image1 = imread ('imageOnComputer.jpg'); ";

    //send instruction to matlab and save the path to it so java can 
    //use the newly created variable
    resultingVariablePath = java.sendInstructionToMatlab(loadImage);

    //display on the screen
    java.displayImage(resultingVariablePath);
} 
```

基本上我只是想找出是否有一个matlab插件（或一些java包）可以让你（几乎）完全控制matlab。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:25:10.697

这是一个谈论它的[帖子](http://shatterednirvana.wordpress.com/2007/07/12/howto-call-matlab-from-java-kinda/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:57:55.107

这可以通过使用[matlabcontrol](http://matlabcontrol.googlecode.com)轻松完成。对于您的情况，最好的调用方法是 MatlabProxy 的[returnEval](http://matlabcontrol.googlecode.com/svn/javadocs/doc/matlabcontrol/MatlabProxy.html#returningEval%28java.lang.String,%20int%29)。

# django - 将 Django 的 Paginator 类与 MongoDB 游标一起使用

> ID：10087787
> 
> 赞同：2
> 
> 时间：2012-04-10T11:22:19.780
> 
> 标签：django, mongodb, pagination, pymongo

是否有扩展 MongoDB 游标对象以使其与 Django`django.core.paginator.Paginator`类兼容的已知方法？

或者，也许，扩展 Django 的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:04:33.330

您的临时解决方案（https://gist.github.com/2351079）看起来不错 - 但不是强制光标使用 获取所有结果`list()`并使用 分页`[bottom:top]`，而是尝试在光标上显式使用`.skip()`和`.limit()`- 它可能会提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-08T11:52:01.137

我遇到了同样的问题并实现了我自己的 Paginator 类。这是代码：

```
from django.core.paginator import Paginator, Page

class MongoPaginator(Paginator):
    """
    Custom subclass of Django's Paginator to work with Mongo cursors.
    """
    def _get_page(self, *args, **kwargs):
        """
        Returns an instance of a single page. Replaced with our custom
        MongoPage class.
        """
        return MongoPage(*args, **kwargs)

    def page(self, number):
        """
        Returns a Page object for the given 1-based page number.
        Important difference to standard Paginator: Creates a clone of the
        cursor so we can get multiple slices.
        """
        number = self.validate_number(number)
        bottom = (number - 1) * self.per_page
        top = bottom + self.per_page
        if top + self.orphans >= self.count:
            top = self.count
        return self._get_page(
            self.object_list.clone()[bottom:top], number, self
        )

class MongoPage(Page):
    """
    Custom Page class for our MongoPaginator. Just makes sure the cursor is
    directly converted to list so that we can use len(object_list).
    """
    def __init__(self, object_list, number, paginator):
        self.object_list = list(object_list)
        self.number = number
        self.paginator = paginator 
```

主要变化是：

*   每个页面都应该获得光标的克隆，因为切片每个光标只工作一次
*   每个页面还应该直接将其转换为列表，以便 len() 工作

这是在视图中使用它的辅助函数：

```
def get_paginated_cursor(request, cursor, per_page=25, param='page'):
    """
    Helper to deal with some standard pagination. Pass a request and a
    cursor and it will return a paginated version of it.
    """
    paginator = MongoPaginator(cursor, per_page)

    page = request.GET.get(param, 1)
    try:
        cursor = paginator.page(page)
    except PageNotAnInteger:
        # If page is not an integer, deliver first page.
        cursor = paginator.page(1)
    except EmptyPage:
        # If page is out of range (e.g. 9999), deliver last page of results.
        cursor = paginator.page(paginator.num_pages)

    return cursor 
```

然后你可以这样做：

```
def some_view_function(request):
    messages_cursor = db.messages.find({})
    messages = get_paginated_cursor(request, messages_cursor) 
```

# android - 如何为安卓应用设计遥控器？

> ID：10087789
> 
> 赞同：0
> 
> 时间：2012-04-10T11:22:26.363
> 
> 标签：android, automation

我编写了一个 android 应用程序，我想通过向运行我的应用程序的设备发送 HTTP 请求来使其对其他机器可控。我编写了一个小型 HTTP 服务器，并让它在我的应用程序启动时启动。我知道我可以翻译 HTTP 请求并将消息发送到各种活动以执行 UI 操作，这需要将侦听器添加到我的所有活动中。但是为了使遥控器代码可重用，我希望将遥控器代码与现有的应用程序代码分开，因此我需要找到一种方法来减少对应用程序代码的更改以使其可远程控制。

有人可以分享你的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:27:53.647

我不明白你在问什么，但在我朋友创建的一个应用程序中，他只是实现了一个可以在任何安卓手机上使用的鼠标指针。通过该应用程序，他可以设法使用安卓电视。

当他实现该应用程序时，他利用了套接字编程并从遥控器（在这种情况下是电话）向其他设备发送消息并从中获取数据。在我看来，如果您遵循这种方式，您就不需要在其他应用程序中应用这么多的更改。到头来都是交流。

# java - Java 中用于 C# 构造的加密/解密等价物

> ID：10087794
> 
> 赞同：3
> 
> 时间：2012-04-10T11:22:54.693
> 
> 标签：java, android, encryption

我有一个使用 Rijndael 加密的 mp4，我正在以以下方式在 C# 中解密。

```
System.Security.Cryptography.Rijndael crypt = System.Security.Cryptography.Rijndael.Create();

crypt.Key = convertedSecureString;

byte[] initializationVectorLength = new byte[sizeof(int)];
CryptoStream cryptostream = new CryptoStream(inputStream, crypt.CreateDecryptor(), CryptoStreamMode.Read);
byte[] buffer = new byte[1024];
int len;
while ((len = cryptostream.Read(buffer, 0, buffer.Length)) > 0)
{
    outputStream.Write(buffer, 0, len);
    buffer = new byte[1024];
}

outputStream.Flush();
cryptostream.Close();
inputStream.Close(); 
```

现在我需要将此代码转换为 Java/Android 等效代码。我不知道从哪里开始坦率地说。我对这么多的选择感到困惑——有人说使用 Bouncy Castle，有人说 Apache Commons，还有一些本地 Java 库。我该怎么做呢。我该如何处理 CryptoStream 等？

**更新**

我在 C# 中使用以下代码来分配密钥

```
byte[] convertedSecureString = new byte[this.key.Length];
IntPtr ptr = System.Runtime.InteropServices.Marshal.SecureStringToBSTR(this.key);

for (int i = 0, j = 0; i < this.key.Length * UnicodeByteLength; i = i + UnicodeByteLength, j++)
{
    convertedSecureString[j] = System.Runtime.InteropServices.Marshal.ReadByte(ptr, i);
}

try
{
    crypt.Key = convertedSecureString;
} 
```

密钥是安全的。我在 Java 中有等效的不安全密钥。我如何将这段代码转换为Java

**更新**

```
 Rfc2898DeriveBytes newKey = new Rfc2898DeriveBytes(crypt.Key.ToString(), crypt.IV);
                Array.Copy(newKey.GetBytes((int)crypt.KeySize / 8), crypt.Key, (int)crypt.KeySize / 8);
                Array.Copy(newKey.GetBytes((int)crypt.BlockSize / 8), crypt.IV, (int)crypt.BlockSize / 8); 
```

我在 C# 中使用它来修改使用 Rfc 2898 的密钥并派生字节 - 我在 Java 中找不到等价物 - 我在第二条评论中找到[了 C# 的 Rfc2898DerivedBytes 的 Java 等价物](https://stackoverflow.com/questions/1012363/java-equivalent-of-cs-rfc2898derivedbytes)- 但是我为迭代器和 dklen 提供什么值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T11:35:36.997

您需要获取[Cipher](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html)对象。这是获取它的一种方法，使用`byte[] aesKey`, 和`byte[] iv`（初始化向量，对于 AES，必须始终为 16 个字节）。

```
// aesKey is 128, 196 or 256-bit key (8, 12 or 16 byte array)
SecretKeySpec key = new SecretKeySpec(aesKey, "AES");

// initialization vector
IvParameterSpec ivSpec = new IvParameterSpec(iv);

// create and initialize cipher object
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5PADDING");
cipher.init(Cipher.DECRYPT_MODE, key, ivSpec); 
```

一旦`Cipher`对象处于解密模式，就可以使用[`update`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html#update%28byte%5b%5d%29)方法向它提供加密数据，它会返回纯文本数据。完成后，您必须调用其中一种[`doFinal`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html#doFinal%28%29)方法来获取最终块。

或者，您可以[`CipherInputStream`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/CipherInputStream.html) 使用 Cipher 对象和提供加密数据的原始输入流来创建。您从 读取数据`CipherInputStream`，后者又从原始输入流中读取数据，对其进行解密，然后将纯文本数据返回给您。

对于加密，您需要传入`Cipher.ENCRYPT_MODE`方法`Cipher.init`，然后使用`CipherOutputStream`。

**更新：完整示例，**或多或少等同于原始 C# 代码：

```
// Algorithm, mode and padding must match encryption.
// Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5PADDING");

// If you have Bouncycastle library installed, you can use
// Rijndael/CBC/PKCS7PADDING directly.
Cipher cipher = Cipher.getInstance("Rijndael/CBC/PKCS7PADDING");

// convertedSecureString and initVector must be byte[] with correct length
cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(convertedSecureString, "AES"),
    new IvParameterSpec(initVector));

CipherInputStream cryptoStream = new CipherInputStream(inputStream, cipher);
byte[] buffer = new byte[1024];
int len = cryptoStream.read(buffer, 0, buffer.length);
while (len > 0) {
    outputStream.write(buffer, 0, len);
    len = cryptoStream.read(buffer, 0, buffer.length);
}

outputStream.flush();
cryptoStream.close();
// no need to close inputStream here, as cryptoStream will close it 
```

默认情况下，Java 不支持 Rijndael 算法（AES 可能有效也可能无效，请参阅其他答案）和 PKCS7 填充。您需要为此安装 Bouncycastle 扩展，然后使用`Cipher.getInstance("Rijndael/CBC/PKCS7PADDING");`. 为什么选择 CBC 和 PKCS7 填充？这些似乎是[System.Security.Cryptography.Rijndael](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndael.aspx)类的默认值。如果我弄错了，请根据您的情况使用正确的模式和填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:32:25.573

不用担心 C# 中的实现。通过以下链接进行 Java 语言的加密/解密。[Java中的RjIndeal实现](https://stackoverflow.com/questions/587357/rijndael-support-in-java)

# java - java 安卓反射

> ID：10087796
> 
> 赞同：0
> 
> 时间：2012-04-10T11:23:09.060
> 
> 标签：java, android, reflection

我有一个包含 2 个包的项目。现在一个包 P1 有一个类 A，方法是 mA

其他包 P2 有一个 B 类，方法是 mB

我已经在 P2 中导入了包 P1

现在当我使用replection方法时

```
Class objClass = Class.forName("A"); 
```

它说“找不到类”异常

如何解决此错误？我不想使用全名作为 P1.A

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:57:04.887

导入在运行时无关紧要（反射是运行时特性）——它只是对编译器的提示。使用全限定类名来解析类对象

# objective-c - 如何使用 Objective-C 中的参数向服务发送 JSON 请求

> ID：10087798
> 
> 赞同：0
> 
> 时间：2012-04-10T11:23:19.640
> 
> 标签：objective-c

我正在创建一个 iPhone 应用程序，并试图弄清楚如何创建对包含参数的 web 服务的 JSON 请求。在 Java 中，这看起来像这样

```
HashMap<String, String> headers = new HashMap<String, String>();

JSONObject json = new JSONObject();

            json.put("nid", null);
            json.put("vocab", null);
            json.put("inturl", testoverview);
            json.put("mail", username); // something@gmail.com
            json.put("md5pw", password); // donkeykong

        headers.put("X-FBR-App", json.toString()); 
```

在服务识别请求之前，标头必须包含 JSON 对象和“X-FBR-App”。这将如何在 Objective-C 中实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:40:09.403

使用 Post 方法。试试这个

```
 NSString *method =  @"addProduct"; 
 NSString *jsonstring=@"http://yourdomain.com/product_review_api/product-review.php?"; 
 NSString *urlString = [NSString stringWithFormat:@"%@",jsonstring];
 NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
 [request setURL:[NSURL URLWithString:urlString]];
 [request setHTTPMethod:@"POST"]; 
  NSMutableData *body = [NSMutableData data];
    // image file
   NSData *imageData = UIImageJPEGRepresentation( labelimage, 0.8);
   NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

      //  parameter method
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"method\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[method dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

   //  parameter categoryid
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"category_id\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[selectedID dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body];

    // now lets make the connection to the web
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"%@",returnString);
    NSDictionary *profile = (NSDictionary*)[returnString JSONValue];
    NSLog(@"profile=%@", profile); 
```

您可以像这样附加所有参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:01:06.423

JSON 并未融入 iOS，但如果您查看[www.JSON.org](http://www.JSON.org/)，就会有许多提供所需功能的 Objective-C 框架。我对其中任何一个都没有经验，所以我无法提出建议，但这是寻找解决方案的良好开端。

另请查看此 SO 问题[post-data-through-json-webservices-in-iphone](https://stackoverflow.com/questions/6813905/post-data-through-json-webservices-in-iphone)

# java - 将 java.net.InetAddress 转换为 long

> ID：10087800
> 
> 赞同：4
> 
> 时间：2012-04-10T11:23:23.460
> 
> 标签：java, byte, unsigned, signed

我想转换 a`java.net.InetAddress`并且我与签名/未签名问题作斗争。这样的痛苦。

我在 Java 中读取[从短到字节的转换，反之亦然，](https://stackoverflow.com/questions/3114935/convert-from-short-to-byte-and-viceversa-in-java)为什么[字节 b =（字节）0xFF 等于整数-1？](https://stackoverflow.com/questions/1677957/why-byte-b-byte-0xff-is-equals-to-integer-1)

结果想出了：

```
 final byte [] pumpeIPAddressRaw =
        java.net.InetAddress.getByName (pumpeIPAddressName).getAddress ();

     final long pumpeIPAddress =
         ((pumpeIPAddressRaw [0] & 0xFF) << (3*8)) +
         ((pumpeIPAddressRaw [1] & 0xFF) << (2*8)) +
         ((pumpeIPAddressRaw [2] & 0xFF) << (1*8)) +
         (pumpeIPAddressRaw [3] &  0xFF);

     android.util.Log.i (
        Application.TAG, "LOG00120: Setzte Pumpen Addresse : " +
        pumpeIPAddress + ":" + pumpeIPPort); 
```

猜猜日志仍然显示什么：

```
04-10 13:12:07.398 I/ch.XXXX.remote.Application(24452): LOG00120: Setzte Pumpen Addresse : -1063035647:27015 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T11:36:11.093

`& 0xff``byte`在从to转换期间阻止符号扩展`int`，但您的表达式还包含从`int`to的转换，`long`并且您还需要在此转换期间阻止符号扩展：

```
final long pumpeIPAddress =
      (((pumpeIPAddressRaw [0] & 0xFF) << (3*8)) + 
      ((pumpeIPAddressRaw [1] & 0xFF) << (2*8)) +
      ((pumpeIPAddressRaw [2] & 0xFF) << (1*8)) +
      (pumpeIPAddressRaw [3] &  0xFF)) & 0xffffffffl; 
```

或者，您可以通过将操作的第二个操作数标记为使用后缀来一步转换 from `byte`to ：`long``& 0xff``long``l`

```
final long pumpeIPAddress =
      ((pumpeIPAddressRaw [0] & 0xFFl) << (3*8)) + 
      ((pumpeIPAddressRaw [1] & 0xFFl) << (2*8)) +
      ((pumpeIPAddressRaw [2] & 0xFFl) << (1*8)) +
      (pumpeIPAddressRaw [3] &  0xFFl); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-05T09:51:40.300

I think that the answer by [user2660727 is good](https://stackoverflow.com/a/22070468/198397), because it uses only standard Java, is short and efficient. Correcting a few issues (negative values, buffer length), my suggested solution is:

```
InetAddress bar = InetAddress.getByName(ip);
ByteBuffer buffer = ByteBuffer.allocate(Long.BYTES).order(ByteOrder.BIG_ENDIAN);
buffer.put(new byte[] { 0,0,0,0 });
buffer.put(bar.getAddress());
buffer.position(0);
long address = buffer.getLong(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-27T13:48:00.787

```
String ip = "127.0.0.1";
InetAddress inetAddress = InetAddress.getByName(ip);

// ByteOrder.BIG_ENDIAN by default
ByteBuffer buffer = ByteBuffer.allocate(Long.SIZE);
buffer.put(inetAddress.getAddress());
buffer.position(0);
Long longValue = buffer.getLong(); 
```

# c++ - 如何调试“检测到堆栈粉碎”？

> ID：10087804
> 
> 赞同：26
> 
> 时间：2012-04-10T11:23:48.127
> 
> 标签：c++, stack-smash

我有一个复杂的 C++ 代码。它是一个 FastCGI 程序，使用[FastCGI C++ 类库](http://althenia.net/fcgicc)。

当我要求它提供一个非常长的网址时，我得到：

```
*** stack smashing detected ***: ./tileserve terminated
Erreur de segmentation 
```

对于现实生活中的应用程序，这不是问题，因为我从不使用这么长的 URL，但这意味着任何人都可以终止我的服务器……我不喜欢这样。

有没有工具可以找出这个问题出现在哪里？我该如何使用它？

## 编辑：已解决

我正在这样做：

```
int len;
char uri[200];

len = strlen(request.params[std::string("REQUEST_URI")].c_str());
printf("%d\n", len);

if (len > 200) return 1;

strcpy(uri, request.params[std::string("REQUEST_URI")].c_str()); 
```

看起来对测试`200`来说太高了。`len`它实际上在`194`.

所以我这样做了：

```
if (len > 190) return 1; 
```

现在，很好。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-10T11:43:16.737

如果您阅读该网站，您会意识到这是对 C 库的简单 C++ 包装器。

C 库的一个典型问题是缓冲区溢出：

```
#include <cstring>
#include <cstdio>

int main(int argc, char* argv[]) {
  char buffer[16]; // ought to be sufficient

  strcpy(buffer, argv[1]);
  printf("%s", buffer);
} 
```

试试这个程序：

```
> ./test "a"
a
> ./test "abcdefghijklmnoprqstuvwxyz"
??? 
```

因为缓冲区只能包含 16 个字符，所以剩余的字符将被写入其末尾。这是*堆栈粉碎*和**未定义的行为**。

运行时库或您的操作系统的许多实现可能会在某些情况下检测到这种情况并终止程序。

要么*你*做错了什么，要么*图书馆*是。

要定位问题，您可以使用 Valgrind 或在调试器中运行您的程序。或者，如果您的系统允许，您可能会在程序被终止时进行内存转储。您还可以在调试器中查看此内存转储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:11:51.187

你可以使用类似 valgrind 的东西，或者你的编译器可能有静态分析，可以找到你可能超出缓冲区的地方。

Also you can just audit your code for uses of error prone functions like strcpy and replace them with safe functions like strncpy, or better yet just use objects that manage their own memory like std::string.

# mongodb - 通过类似sql的语法访问mongodb

> ID：10087806
> 
> 赞同：7
> 
> 时间：2012-04-10T11:24:01.883
> 
> 标签：mongodb

有没有我可以使用类似 sql 的语法访问 mongodb 的库。

例子

```
use db
select * from table1
insert into table1 values (a,b,c)
delete from table
select a,b,count(*) from table1 group by a,b
select a.field1,b.field2 from a,b where a.id=b.id 
```

谢谢拉曼

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T19:21:11.503

仅当您只执行极其简单的 sql 查询时，学习曲线才会很小。如果您的 SQL 查询范围是“从 X 中选择 *”，那么 MongoDB 看起来是一个绝妙的主意，可以切断所有过于复杂的 SQL。但是，如果您需要执行左外连接、测试空值、检查范围、子选择、分组和求和，那么在移动到 Mongo 之后，您很快就会在办公桌上留下一个圆形凹痕。病态的妙语是有一半的时间，您尝试做的事情无法在 Mongo 界面中完成。Mongo 代表了一个大胆的新世界，它不是数据库做聚合和查询优化之类的事情，它只是存储数据，所有的魔法都是通过缓慢地检索所有内容来完成的，将其存储在应用程序内存中，然后在代码中完成所有这些事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-13T18:56:22.753

是的！

一家名为 UnityJDBC 的公司为 mongodb 制作了 JDBC 驱动程序。与 mongo java 驱动程序不同，此 JDBC 驱动程序允许您对 MongoDB 运行 SQL 查询，并且任何使用 JDBC 的 Java 应用程序都支持该驱动程序。

要下载此驱动程序，请访问...

[http://www.unityjdbc.com/mongojdbc/mongo_jdbc.php](http://www.unityjdbc.com/mongojdbc/mongo_jdbc.php)

它也可以免费下载！

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-30T21:11:01.560

[MoSQL](https://github.com/stripe/mosql)可能会满足您的需求。它需要您运行一个新的 PostgreSQL 实例，但您可以从那里使用 SQL 查询整个 Mongo 数据集。

“MoSQL 将 MongoDB 数据库集群的内容导入 PostgreSQL 实例，使用 oplog tailer 使 SQL 镜像保持最新。这使您可以针对 MongoDB 数据库运行生产服务，然后使用离线分析或报告SQL 的全部功能。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-26T03:49:19.223

有一些解决方案，但几乎所有解决方案都无法以“关系型”的 ODBC/JDBC 应用程序和用户希望/需要的方式真正代表 MongoDB 数据模型。最近发布的商业产品解决了这些挑战

ODBC： http: [//www.progress.com/products/datadirect-connect/odbc-drivers/data-sources/mongodb](http://www.progress.com/products/datadirect-connect/odbc-drivers/data-sources/mongodb)

JDBC： http: [//www.progress.com/products/datadirect-connect/jdbc-drivers/data-sources/mongodb](http://www.progress.com/products/datadirect-connect/jdbc-drivers/data-sources/mongodb)

为满足对 ODBC/JDBC (SQL) 访问的需求...虽然使用 Mongo 的客户端编写新应用程序有强烈的论据，但市场仍然强烈需要高质量的 ODBC/JDBC 和基于 SQL 的 MongoDB 访问。这种需求主要来自依赖 ODBC/JDBC 连接并且不提供与 MongoDB 的本机集成的所有报告、分析和 BI 应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-22T00:09:58.420

看看这个最近的项目：[http](http://www.mongosql.com/) ://www.mongosql.com/ 。过去几周我一直在研究它，它看起来很有希望。

对于那些质疑 SQL 对 MongoDB 的有用性的人，请考虑许多组织中大量技术不高的用户，例如业务分析师，他们可能知道 SQL，但不想跳到 JavaScript 和JSON。像 mongoSQL 这样的工具可以帮助推动 MongoDB 在组织中的采用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-07T08:41:15.163

免费的 NoSQL Viewer 支持将 SQL 查询转换为 MongoDB shell 语法。此外，在 SQL Viewer 中，您甚至可以使用 SQL SELECT 语句来查询 MongoDB 集合数据，而无需了解 MongoDB 查询语法。在此处查看 NoSQL 查看器[www.spviewer.com/nosqlviewer.html](http://www.spviewer.com/nosqlviewer.html)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-04-10T20:00:36.990

有几个项目正在进行中来模拟 MongoDB 的 SQL 接口。虽然它们提供了熟悉的界面，但通常应避免使用它们。它们在一个根本有缺陷的前提下运行，因为它们解析字符串并将它们转换为方法调用。

使用 MongoDB 后，您会发现使用类和方法的方法是一个更易于访问的接口，因为它的工作方式与应用程序的所有其他部分完全一样。是的，刚开始时有一个小的学习曲线，但在大多数情况下，MongoDB 中的界面可以按照您的预期工作。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-04-10T11:59:06.350

Mongodb 及其当前驱动程序不支持类似 SQL 的直接语法。但是，所有操作都可以通过驱动程序特定的操作轻松完成。这是 mongodb 操作到相应 SQL 查询的简要映射：

[http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart](http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart)

# c# - C# 远程（交换）powershell

> ID：10087809
> 
> 赞同：0
> 
> 时间：2012-04-10T11:24:29.410
> 
> 标签：c#, powershell

我做了一个控制台应用程序（在 c# 中），它执行一些 powershell 命令。我使用远程 powershell 连接到（交换）powershell。但是当应用程序运行时；

```
RunspaceFactory.CreateRunspace(connectioninfo) 
```

我得到以下异常：

> 无法加载文件或程序集“Microsoft.Management.Infrastructure，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

我唯一不明白的是为什么它以前可以完美地工作。我搜索了我的解决方案，在任何地方都找不到对该 dll 的引用。我还搜索了我的 c# 驱动器，它也无处可寻。我从 2-3 个月大的备份中恢复了我的解决方案，并且出现了同样的错误。有人可以给我一些关于出了什么问题的指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:06:22.167

发现了问题。显然我的电脑出了点问题（我猜是在安装了 VS11 的 Beta 之后）

无论如何，在安装了 VS2010 的另一台机器上使用该项目后，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T14:35:03.720

错误消息具有误导性。

我收到了错误，因为我使用了对 System.Management.Automation.dll 版本 3.0.0.0（这意味着 PowerShell 3.0）的引用。

问题是，Exchange Server 2007/2010 与 PowerShell 3.0 不兼容，因此您必须将引用绑定到 System.Management.Automation.dll 版本 1.0.0.0 (Windows PowerShell 2.0)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-10T12:20:17.717

1.  检查所有项目引用
2.  检查**app.config**
3.  看看[这里](http://forums.asp.net/t/1664323.aspx/1)

* * *

更新

看看[这里](http://support.microsoft.com/kb/968929)

# batch-file - 批处理（.bat）：获取第一个脚本的名称，而不是当前的

> ID：10087812
> 
> 赞同：9
> 
> 时间：2012-04-10T11:24:46.680
> 
> 标签：batch-file

我有`first.bat`和`second.bat`。

first.bat 是：`call second.bat`

第二个是：（`echo %~n0`显示执行批处理的文件名）

输出是`Second.bat`，但我希望它显示调用者文件名，而不是它自己的。

这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-03-30T16:35:37.323

此批处理检测调用者脚本的名称，或者即使它是直接从命令行调用的

```
@echo off
setlocal DisableDelayedExpansion
set "func=%~0"
for /F "delims=\" %%X in ("%func:*\=%") do set "func=%%X"
if ":" == "%func:~0,1%" (
    goto %func%
)
REM *** Get the name of the caller
(
    (goto) 2>nul
    setlocal DisableDelayedExpansion
    call set "caller=%%~f0"
    call set _caller=%%caller:*%%~f0=%%
    if defined _caller (
        set "callType=batch"
        call "%~d0\:mainFunc\..%~pnx0" %*
    ) ELSE (
        set "callType=cmd-line"
        cmd /c "call "%~d0\:mainFunc\..%~pnx0" %*"
    )
    endlocal
)
echo NEVER REACHED
exit /b

:mainFunc
echo :mainFunc of %~nx0 arg1=%1 is called from '%caller%'/%callType%
exit /b 
```

它使用了这样一个事实，即一条`(goto)`语句将从堆栈中删除一个级别。
这将导致离开当前的批处理文件，并且`%~f0`将是调用者脚本的名称（以及`%~0`该批处理的当前函数）或`%~f0`从命令行调用的文本。

然后再次调用自己的脚本`"%~d0\:mainFunc\..%~pnx0"`

**外部脚本**

为了方便使用，您可以添加一个帮助批处理文件。
使用此行在您自己的脚本中使用它

```
@echo off
<:GetCaller <nul call GetCaller.bat myCallerVar
echo This batch was called from "%myCallerVar%" 
```

将帮助程序批处理文件命名为**GetCaller.bat**

```
@echo off
setlocal DisableDelayedExpansion
set "func=%~0"
for /F "delims=\" %%X in ("%func:*\=%") do set "func=%%X"
if ":" == "%func:~0,1%" (
    goto %func%
)

REM *** STEP1
REM *** Get the filename of the caller of this script, needed for later restart that
(
    (goto) 2>nul
    setlocal DisableDelayedExpansion %= it could be reenabled by the GOTO =%
    set "_returnVar=%~1"
    call set "_lastCaller=%%~f0"
    call set "_argToLastCaller=%%*"
    call "%~d0\:Step2\..%~pnx0" %*
)
exit /b %= This is never reached =%

:Step2
REM *** STEP2
REM *** Get the filename/cmd-line of the caller of the script
(
    (goto) 2>nul
    (goto) 2>nul
    setlocal DisableDelayedExpansion %= it could be reenabled by the GOTO =%    
    set "_returnVar=%_returnVar%"
    set "_lastCaller=%_lastCaller%"
    set "_argToLastCaller=%_argToLastCaller%"
    call set "caller=%%~f0"
    call set _caller=%%caller:*%%~f0=%%
    if defined _caller (
        set "callType=batch"
        call "%~d0\:Step3batch\..%~pnx0"
    ) ELSE (
        set "callType=cmd-line"
        cmd /c "call "%~d0\:Step3batch\..%~pnx0" "
    )
    endlocal
)
exit /b %= This is never reached =%

:Step3batch
REM *** STEP3 Restart the requester batch, but jump to the label :GetCaller
call :GetCaller
exit /b %= This is never reached =%

:GetCaller
REM *** This uses the trick, that starting a batch without CALL will jump to the last used label
if "%_returnVar%" NEQ "" set "%_returnVar%=%_caller%"
%_lastCaller% %_argToLastCaller%

echo #6 never reached 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T11:41:01.837

我认为最简单的方法是将第一批的文件名作为参数传递给第二批，就像这样。

```
REM First.bat
call Second.bat %~n0

REM Second.bat
echo %1 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-10T11:30:34.427

`%~n0`在调用之前将的值存储在环境变量中`second.bat`

# jquery-validate - jQuery Validate - 将类添加到正在验证的元素之外的另一个元素

> ID：10087813
> 
> 赞同：0
> 
> 时间：2012-04-10T11:24:48.430
> 
> 标签：jquery-validate

我有一个需要验证的文本字段，它被放置在提交按钮旁边，就好像在视觉上形成一个独特的元素一样。像这样的东西：

```
 ___________________________
|                      | |\ |
|______________________|_|/_|
 ^text part here          ^badly drawn arrow here (submit button) 
```

现在，如果密码无效（少于 5 个字符），我已经设置了脚本以使文本字段边框变为红色。由于这种设计，我还需要向提交按钮添加一个类，这样我也可以将其设为红色边框。

关于我应该如何去做的任何线索？

编辑：或者如果有一种方法可以将类添加到祖先元素，这样我就可以走得更高并包括提交按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:21:49.027

使用 highlight 和 unhighlight 属性做到了。

[http://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)

# c# - 如何避免 2 页的表单身份验证

> ID：10087815
> 
> 赞同：0
> 
> 时间：2012-04-10T11:24:52.467
> 
> 标签：c#, asp.net, webforms

我在我的 Web 项目中使用了表单身份验证。我不想对两个页面进行表单身份验证。我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:33:34.960

编写以下位置标记，将 Logout.aspx 和 Login.aspx 页面名称替换为您的两个页面名称。

```
<location path="Logout.aspx">
  <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
  </system.web>
</location>

<location path="Login.aspx">
   <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
   </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:33:53.373

您可以在配置中添加一个部分以允许匿名访问某些页面：

```
<configuration>

  <location path="Welcome.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>

</configuration> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:34:38.567

使用该[`<location>`](http://msdn.microsoft.com/en-us/library/b6x6shw7.aspx)元素来“细化”身份验证要求：

```
<location path="path/to/resource">
  <system.web>
    <authorization>
      <allow users="*"/>
    </authorization>  
  </system.web>
<location> 
```

除了 MSDN 文档之外，[这也是一篇关于设置授权规则的合理帖子](http://weblogs.asp.net/gurusarkar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx)。

您还可以将单独的、专用的 web.config 文件放在子目录中，以便在该目录中进行独立控制——不过我不喜欢这个，更喜欢结构良好的根配置。

# c# - 如何在c#中逐行读取数据表中的数据

> ID：10087816
> 
> 赞同：2
> 
> 时间：2012-04-10T11:24:58.170
> 
> 标签：c#, asp.net, c#-4.0

我正在处理 C# 中的数据表。我想将数据表中的数据逐行检索到一个数组中。但我得到了例外。我想明智地读取数据行。

我努力了，

```
 System.Data.DataTable _dtDataFile = new System.Data.DataTable();  
        myCommand.Fill(_dtDataFile);
        string[] arr1 = new string[3];
       _dtDataFile.Rows.CopyTo(arr1,0);
         Response.Write("DONE" + arr1[0]+ "<BR>" + "<BR>"); 
```

我收到无效的演员表异常。

任何人都可以帮助它如何完成。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:37:35.690

您正在尝试将元素类型`DataRow`( `DataTable.Rows`) 的集合复制到字符串数组 ( `string[] arr1`)。

如果您对数据表上的特定（字符串）列感兴趣，可以使用以下代码提取值：

```
string[] arr = _dtDataFile.Rows
  .Cast<DataRow>()
  .Select(r => Convert.ToString(r["SomeColumnName"]))
  .ToArray(); 
```

# activerecord - 更改 Rails 记录中的 updated_at

> ID：10087817
> 
> 赞同：11
> 
> 时间：2012-04-10T11:25:02.303
> 
> 标签：activerecord, ruby-on-rails-3.1

我有一个基于内存的会话表，其中包含以下内容：

```
id

sessnhash

userid

created_at

updated_at 
```

这个想法是，当用户第一次登录时，`sessnhash`会创建一个随机数并将其传回，以便所有进一步的操作都必须为服务器请求发送该会话哈希。这些通过登录？应用程序控制器上的方法，它只是检查表中是否存在该会话哈希的行。

我现在想扩展此功能以保留该用户最后一次发生任何活动的标签，我认为这样做的一种方法是在找到 sessionhash 后立即进行保存，希望这会更新' updated_at' 属性。

然而，Rails 太聪明了，并没有更新任何东西，因为实际上没有任何更新。

有什么方法可以强制 Rails 更新 updated_at 属性而不必对任何其他属性进行任何数据更改？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-10T14:23:33.510

我刚刚知道我需要这样做。

```
sessn.touch 
```

这将更新`updated_at`属性。

都在这里：[`touch`](http://apidock.com/rails/ActiveRecord/Persistence/touch)。

# javascript - 在 JavaScript 中将日期转换为另一个时区

> ID：10087819
> 
> 赞同：432
> 
> 时间：2012-04-10T11:25:05.613
> 
> 标签：javascript, timezone

我正在寻找一种将一个时区中的日期转换为另一个时区的函数。

它需要两个参数，

*   日期（格式为“2012/04/10 10:10:30 +0000”）
*   时区字符串（“亚洲/雅加达”）

[http://en.wikipedia.org/wiki/Zone.tab](http://en.wikipedia.org/wiki/Zone.tab)中描述了时区字符串

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：341
> 
> 时间：2019-01-10T10:54:24.663

这是单线：

```
function convertTZ(date, tzString) {
    return new Date((typeof date === "string" ? new Date(date) : date).toLocaleString("en-US", {timeZone: tzString}));   
}

// usage: Asia/Jakarta is GMT+7
convertTZ("2012/04/20 10:10:30 +0000", "Asia/Jakarta") // Tue Apr 20 2012 17:10:30 GMT+0700 (Western Indonesia Time)

// Resulting value is regular Date() object
const convertedDate = convertTZ("2012/04/20 10:10:30 +0000", "Asia/Jakarta") 
convertedDate.getHours(); // 17

// Bonus: You can also put Date object to first arg
const date = new Date()
convertTZ(date, "Asia/Jakarta") // current date-time in jakarta. 
```

这是[MDN 参考](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleString)。

请注意警告：上面的函数依赖于解析 toLocaleString 结果来工作，该结果是在`en-US`locale 中格式化的日期字符串，例如`"4/20/2012, 5:10:30 PM"`. 每个浏览器可能不接受`en-US`其 Date 构造函数的格式化日期字符串，并且可能会返回意外结果（它可能会忽略夏令时）。

目前所有现代浏览器都接受这种格式并正确计算夏令时，它可能不适用于旧浏览器和/或外来浏览器。

> 旁注：如果现代浏览器具有 toLocaleDate 功能会很棒，所以我们不必使用这个 hacky 工作。

* * *

## 回答 #2

> 赞同：139
> 
> 时间：2013-09-04T11:26:19.743

对于[moment.js](http://momentjs.com/)用户，您现在可以使用[moment-timezone](http://momentjs.com/timezone/docs/)。使用它，您的函数将如下所示：

```
function toTimeZone(time, zone) {
    var format = 'YYYY/MM/DD HH:mm:ss ZZ';
    return moment(time, format).tz(zone).format(format);
} 
```

* * *

## 回答 #3

> 赞同：123
> 
> 时间：2014-08-29T00:08:50.980

[大多数浏览器都](https://caniuse.com/mdn-javascript_builtins_date_tolocalestring_options)支持带参数的[toLocaleString](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleString)函数，较旧的浏览器通常会忽略参数。

```
const str = new Date().toLocaleString('en-US', { timeZone: 'Asia/Jakarta' });
console.log(str);
```

* * *

## 回答 #4

> 赞同：98
> 
> 时间：2012-04-10T11:40:54.663

无耻地盗取自：[http ://www.techrepublic.com/article/convert-the-local-time-to-another-time-zone-with-this-javascript/6016329](http://www.techrepublic.com/article/convert-the-local-time-to-another-time-zone-with-this-javascript/6016329)

```
/** 
 * function to calculate local time
 * in a different city
 * given the city's UTC offset
 */
function calcTime(city, offset) {

    // create Date object for current location
    var d = new Date();

    // get UTC time in msec
    var utc = d.getTime();

    // create new Date object for different city
    // using supplied offset
    var nd = new Date(utc + (3600000*offset));

    // return time as a string
    return "The local time in " + city + " is " + nd.toLocaleString();
} 
```

此函数通过提供城市/国家名称和偏移值来计算时区值很有用

* * *

## 回答 #5

> 赞同：55
> 
> 时间：2012-04-10T12:51:12.270

好的，找到了！

我正在使用[timezone-js](https://github.com/mde/timezone-js)。这是代码：

```
var dt = new timezoneJS.Date("2012/04/10 10:10:30 +0000", 'Europe/London');
dt.setTimezone("Asia/Jakarta");

console.debug(dt); //return formatted date-time in asia/jakarta 
```

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2018-04-04T09:55:53.323

如果您不想导入一些大型库，您可以使用[Intl.DateTimeFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/format)将 Date 对象转换为不同的时区。

```
// Specifying timeZone is what causes the conversion, the rest is just formatting
const options = {
  year: '2-digit', month: '2-digit', day: '2-digit',
  hour: '2-digit', minute: '2-digit', second: '2-digit',
  timeZone: 'Asia/Jakarta',
  timeZoneName: 'short'
}
const formatter = new Intl.DateTimeFormat('sv-SE', options)
const startingDate = new Date("2012/04/10 10:10:30 +0000")

const dateInNewTimezone = formatter.format(startingDate) 
console.log(dateInNewTimezone) // 12-04-10 17:10:30 GMT+7
```

偏移量、夏令时和过去的变化将为您处理。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-02-17T01:19:51.190

知道了！

想要强制**显示的日期**=**服务器日期**，无论本地设置 (UTC)。

我的服务器是**GMT-6** --> `new Date().getTimezoneOffset()`= 360

```
myTZO = 360;
myNewDate = new Date(myOldDateObj.getTime() + (60000*(myOldDateObj.getTimezoneOffset()-myTZO)));
alert(myNewDate); 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-07-10T08:13:17.487

您可以使用 toLocaleString() 方法来设置时区。

```
new Date().toLocaleString('en-US', { timeZone: 'Indian/Christmas' }) 
```

对于印度，您可以使用“印度/圣诞节”，以下是各个时区，

```
"Antarctica/Davis",
    "Asia/Bangkok",
    "Asia/Hovd",
    "Asia/Jakarta",
    "Asia/Phnom_Penh",
    "Asia/Pontianak",
    "Asia/Saigon",
    "Asia/Vientiane",
    "Etc/GMT-7",
    "Indian/Christmas" 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-10-16T09:50:36.823

这是我的代码，它运行良好，你可以试试下面的演示：

```
$(document).ready(function() {
   //EST
setInterval( function() {
var estTime = new Date();
 var currentDateTimeCentralTimeZone = new Date(estTime.toLocaleString('en-US', { timeZone: 'America/Chicago' }));
var seconds = currentDateTimeCentralTimeZone.getSeconds();
var minutes = currentDateTimeCentralTimeZone.getMinutes();
var hours =  currentDateTimeCentralTimeZone.getHours()+1;//new Date().getHours();
 var am_pm = currentDateTimeCentralTimeZone.getHours() >= 12 ? "PM" : "AM";

if (hours < 10){
     hours = "0" + hours;
}

if (minutes < 10){
     minutes = "0" + minutes;
}
if (seconds < 10){
     seconds = "0" + seconds;
}
    var mid='PM';
    if(hours==0){ //At 00 hours we need to show 12 am
    hours=12;
    }
    else if(hours>12)
    {
    hours=hours%12;
    mid='AM';
    }
    var x3 = hours+':'+minutes+':'+seconds +' '+am_pm
// Add a leading zero to seconds value
$("#sec").html(x3);
},1000);

});
```

```
<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
<p class="date_time"><strong id="sec"></strong></p>
</body>
</html>
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-04-22T16:19:53.147

如果您只需要转换时区，我已经上传了一个[精简版](https://github.com/scorredoira/timezone.js)的[时刻时区](https://github.com/moment/moment-timezone)，只有最低限度的功能。它的 ~1KB + 数据：

```
S.loadData({
    "zones": [
        "Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|11e6",
        "Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1GQg0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|40e5",
    ],
    "links": [
        "Europe/Paris|Europe/Madrid",
    ]
});

let d = new Date();
console.log(S.tz(d, "Europe/Madrid").toLocaleString());
console.log(S.tz(d, "Australia/Sydney").toLocaleString()); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-09-26T13:33:05.570

使用 ,设置变量`year`，`month`并用符号`day`分隔，加上 a和**HH:mm:ss**模式中的时间，然后是字符串的末尾（在我的情况下，时区是）。然后将此字符串用作日期构造函数的参数。`-``T`**`+01:00``+1`**

 **```
// desired format: 2001-02-04T08:16:32+01:00
dateAndTime = year+"-"+month+"-"+day+"T"+hour+":"+minutes+":00+01:00";

var date = new Date(dateAndTime ); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-11-25T16:26:21.897

我应该注意，我在可以使用哪些外部库方面受到限制。moment.js 和 timezone-js 不是我的选择。

我拥有的 js 日期对象是 UTC。我需要在特定时区（在我的情况下为“美国/芝加哥”）中的该日期获取日期和时间。

```
 var currentUtcTime = new Date(); // This is in UTC

 // Converts the UTC time to a locale specific format, including adjusting for timezone.
 var currentDateTimeCentralTimeZone = new Date(currentUtcTime.toLocaleString('en-US', { timeZone: 'America/Chicago' }));

 console.log('currentUtcTime: ' + currentUtcTime.toLocaleDateString());
 console.log('currentUtcTime Hour: ' + currentUtcTime.getHours());
 console.log('currentUtcTime Minute: ' + currentUtcTime.getMinutes());
 console.log('currentDateTimeCentralTimeZone: ' +        currentDateTimeCentralTimeZone.toLocaleDateString());
 console.log('currentDateTimeCentralTimeZone Hour: ' + currentDateTimeCentralTimeZone.getHours());
 console.log('currentDateTimeCentralTimeZone Minute: ' + currentDateTimeCentralTimeZone.getMinutes()); 
```

UTC 目前比“美国/芝加哥”早 6 小时。输出是：

```
currentUtcTime: 11/25/2016
currentUtcTime Hour: 16
currentUtcTime Minute: 15

currentDateTimeCentralTimeZone: 11/25/2016
currentDateTimeCentralTimeZone Hour: 10
currentDateTimeCentralTimeZone Minute: 15 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-08-14T03:52:37.570

Provide the desired time zone, for example "Asia/Tehran" to change the current time to that timezone. I used "Asia/Seoul".

You can use the following codes. change the style if you need to do so.

please keep in mind that if you want to have h:m:s format instead of HH:MM:SS, you'll have to remove "function kcwcheckT(i)".

```
function kcwcheckT(i) {
  if (i < 10) {
    i = "0" + i;
  }
  return i;
}
function kcwt() {
var d = new Date().toLocaleString("en-US", {timeZone: "Asia/Seoul"});
d = new Date(d);
  var h = d.getHours();
  var m = d.getMinutes();
  var s = d.getSeconds();
  h = kcwcheckT(h);
  m = kcwcheckT(m);
  s = kcwcheckT(s);
  document.getElementById("kcwcurtime").innerHTML = h + ":" + m + ":" + s;
  var days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
document.getElementById("kcwcurday").innerHTML = days[d.getDay()]
}
kcwt();
window.setInterval(kcwt, 1000);
```

```
@import url('https://fonts.googleapis.com/css2?family=Nunito&display=swap');

.kcwsource {color:#040505;cursor: pointer;display:block;width: 100%;border: none;border-radius:5px;text-align:center;padding: 5px 10px 5px 10px;}
.kcwsource p {font-family: 'Nunito', sans-serif;}

.CurTbx {color:#040505;cursor: pointer;display:block;width: 100%;border: none;border-radius:5px;text-align:center;padding: 5px 10px 5px 10px;}
.kcwcstyle {font-family: 'Nunito', sans-serif; font-size: 22px;display: inline-block;}
.kcwcurstinf {font-family: 'Nunito', sans-serif; font-size: 18px;display: inline-block;margin: 0;}
.kcwcurday {margin: 0;}
.kcwcurst {margin: 0 10px 0 5px;}

/*Using the css below you can make your style responsive!*/

@media (max-width: 600px){
  .kcwcstyle {font-size: 14px;}
  .kcwcurstinf {font-size: 12px;}
}
```

```
<div class="kcwsource"><p>This Pen was originally developed for <a href="http://kocowafa.com" target="_blank">KOCOWAFA.com</a></p></div>
<div class="CurTbx"><p class="kcwcurst kcwcstyle" id="kcwcurday"></p><p class="kcwcurst kcwcstyle" id="kcwcurtime"></p><p class="kcwcurstinf">(Seoul, Korea)</p></div>
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-09-13T12:08:46.597

看了很多，包括这个页面的链接，我发现了这篇很棒的文章，使用时刻时区：

[https://www.webniraj.com/2016/11/23/javascript-using-moment-js-to-display-dates-times-in-users-timezone/](https://www.webniraj.com/2016/11/23/javascript-using-moment-js-to-display-dates-times-in-users-timezone/)

总结一下：

获取用户的时区

```
var tz = moment.tz.guess();
console.info('Timezone: ' + tz); 
```

返回例如：时区：欧洲/伦敦

设置默认用户时区

```
moment.tz.setDefault(tz); 
```

设置自定义时区

```
moment.tz.setDefault('America/Los_Angeles'); 
```

将日期/时间转换为本地时区，假设原始日期/时间为 UTC

```
moment.utc('2016-12-25 07:00').tz(tz).format('ddd, Do MMMM YYYY, h:mma'); 
```

返回时间：2016 年 12 月 25 日，星期日，上午 7:00

将日期/时间转换为洛杉矶时间

```
moment.utc('2016-12-25 07:00').tz('America/Los_Angeles').format('ddd, Do MMMM YYYY, h:mma'); 
```

返回：2016 年 12 月 24 日星期六晚上 11:00

将洛杉矶时间转换为伦敦时间

```
moment.tz('2016-12-25 07:00', 'America/Los_Angeles').tz('Europe/London').format( 'ddd, Do MMMM YYYY, h:mma' ); 
```

返回：2016 年 12 月 25 日星期日下午 3:00

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-09-29T07:15:29.780

您也可以尝试将日期时区转换为印度：

```
var indianTimeZoneVal = new Date().toLocaleString('en-US', {timeZone: 'Asia/Kolkata'});
var indainDateObj = new Date(indianTimeZoneVal);
indainDateObj.setHours(indainDateObj.getHours() + 5);
indainDateObj.setMinutes(indainDateObj.getMinutes() + 30);
console.log(indainDateObj); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-12-06T06:51:16.697

做起来很简单：

```
const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
console.log(timeZone);

var d = new Date();
console.log(d.toLocaleString('en-US', { timeZone }));
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-11-01T06:49:44.927

您也可以使用 [https://www.npmjs.com/package/ctoc_timezone](https://www.npmjs.com/package/ctoc_timezone)

它有很多简单的实现和格式定制。

更改 toTimeZone 中的格式：

`CtoC.toTimeZone(new Date(),"EST","Do MMM YYYY hh:mm:ss #{EST}");`

输出 ：

`28th Feb 2013 19:00:00 EST`

您可以在文档中探索多种功能。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-05-24T13:22:59.940

我不知道将日期对象转换为任何时区的简单方法，但是如果要将其转换为本地时区，则可以将其转换`Date.prototype.getTime()`为相应的毫秒数，然后再转换回来。

```
date = new Date('2016-05-24T13:07:20');
date = new Date(date.getTime()); 
```

例如，如果您像我一样在奥地利（现在是夏天） ，`date.getHours()`现在将返回`15`而不是返回。`13`

我已经读到各种日期时间函数可能在某些浏览器中表现出非标准行为，所以首先测试一下。我可以确认它在 Chrome 中有效。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-05-29T15:57:14.160

我最近在 Typescript 中这样做了：

```
// fromTimezone example : Europe/Paris, toTimezone example: Europe/London
private calcTime( fromTimezone: string, toTimezone: string, dateFromTimezone: Date ): Date {
  const dateToGetOffset = new Date( 2018, 5, 1, 12 );

  const fromTimeString = dateToGetOffset.toLocaleTimeString( "en-UK", { timeZone: fromTimezone, hour12: false } );
  const toTimeString = dateToGetOffset.toLocaleTimeString( "en-UK", { timeZone: toTimezone, hour12: false } );

  const fromTimeHours: number = parseInt( fromTimeString.substr( 0, 2 ), 10 );
  const toTimeHours: number = parseInt( toTimeString.substr( 0, 2 ), 10 );

  const offset: number = fromTimeHours - toTimeHours;

  // convert to msec
  // add local time zone offset
  // get UTC time in msec
  const dateFromTimezoneUTC = Date.UTC( dateFromTimezone.getUTCFullYear(),
    dateFromTimezone.getUTCMonth(),
    dateFromTimezone.getUTCDate(),
    dateFromTimezone.getUTCHours(),
    dateFromTimezone.getUTCMinutes(),
    dateFromTimezone.getUTCSeconds(),
  );

  // create new Date object for different city
  // using supplied offset
  const dateUTC = new Date( dateFromTimezoneUTC + ( 3600000 * offset ) );

  // return time as a string
  return dateUTC;
} 
```

我使用“en-UK”格式，因为它很简单。可能是“en-US”或任何工作。

如果第一个参数是您的语言环境时区，第二个参数是您的目标时区，它将返回一个具有正确偏移量的 Date 对象。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-07-25T06:04:21.760

您可以使用一个名为**timezones.json的 npm 模块。**它基本上由一个 json 文件组成，其中包含有关夏令时和偏移信息的对象。

对于**asia/jakarta**，它将能够返回此对象：

```
{
  "value": "SE Asia Standard Time",
  "abbr": "SAST",
  "offset": 7,
  "isdst": false,
  "text": "(UTC+07:00) Bangkok, Hanoi, Jakarta",
  "utc": [
    "Antarctica/Davis",
    "Asia/Bangkok",
    "Asia/Hovd",
    "Asia/Jakarta",
    "Asia/Phnom_Penh",
    "Asia/Pontianak",
    "Asia/Saigon",
    "Asia/Vientiane",
    "Etc/GMT-7",
    "Indian/Christmas"
  ]
} 
```

你可以在这里找到它：

[https://github.com/dmfilipenko/timezones.json](https://github.com/dmfilipenko/timezones.json)

[https://www.npmjs.com/package/timezones.json](https://www.npmjs.com/package/timezones.json)

希望它有用

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-11-03T23:13:16.820

使用**luxon**库：

```
import { DateTime } from "luxon";

// Convert function:
const convertTz = (datetime, fromTz, toTz, format='yyyy-MM-dd HH:mm:ss') => {
  return DateTime.fromFormat(datetime, format, { zone: fromTz }).setZone(toTz).toFormat(format);
}

// Use it like this:
console.log(convertTz('2021-10-03 19:00:00', 'Europe/Lisbon', 'America/New_York')); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-12-21T06:48:22.953

有服务器问题选择 gmt+0000 标准时区您可以通过在 javascript 中使用库 moment-timezone 来更改它

```
const moment = require("moment-timezone")
const dateNew = new Date()
const changeZone = moment(dateNew);
changeZone.tz("Asia/Karachi").format("ha z");
// here you can paste "your time zone string" 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-02-28T15:29:17.460

这在 React Native Application 中对我有用。

```
import moment from 'moment-timezone'

function convertTZ(date, tzString) {
  const formatedDate = moment(date).tz(tzString).format()
  return formatedDate
}

export {convertTZ} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-12-14T00:14:19.063

熟悉 java 8`java.time`包的人，或者`joda-time`可能会喜欢这个新的孩子：[js-joda](https://js-joda.github.io/js-joda/)库。

安装

```
npm install js-joda js-joda-timezone --save 
```

例子

```
<script src="node_modules/js-joda/dist/js-joda.js"></script>
<script src="node_modules/js-joda-timezone/dist/js-joda-timezone.js"></script>
<script>
var dateStr = '2012/04/10 10:10:30 +0000';
JSJoda.use(JSJodaTimezone);
var j = JSJoda;
// https://js-joda.github.io/js-joda/esdoc/class/src/format/DateTimeFormatter.js~DateTimeFormatter.html#static-method-of-pattern
var zonedDateTime = j.ZonedDateTime.parse(dateStr, j.DateTimeFormatter.ofPattern('yyyy/MM/dd HH:mm:ss xx'));
var adjustedZonedDateTime = zonedDateTime.withZoneSameInstant(j.ZoneId.of('America/New_York'));
console.log(zonedDateTime.toString(), '=>', adjustedZonedDateTime.toString());
// 2012-04-10T10:10:30Z => 2012-04-10T06:10:30-04:00[America/New_York]
</script> 
```

在真正的 Java 本质中，它非常冗长，哈哈。但是，作为一个移植的 java 库，特别是考虑到他们移植了 1800'ish 测试用例，它也可能非常准确地工作。

计时操作很难。这就是为什么许多其他库在边缘情况下存在缺陷的原因。Moment.js 似乎得到了正确的时区，但我见过的其他 js 库，包括`timezone-js`，似乎并不值得信赖。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-04-04T12:01:46.220

只需设置您想要的国家时区，您就可以轻松地在 html 中显示它每分钟后使用 SetInteval() 函数更新。函数 formatAMPM() 管理 12 小时格式和 AM/PM 时间显示。

```
$(document).ready(function(){
        var pakTime = new Date().toLocaleString("en-US", {timeZone: "Asia/Karachi"});
        pakTime = new Date(pakTime);

        var libyaTime = new Date().toLocaleString("en-US", {timeZone: "Africa/Tripoli"});
        libyaTime = new Date(libyaTime);

         document.getElementById("pak").innerHTML = "PAK  "+formatAMPM(pakTime);
         document.getElementById("ly").innerHTML = "LY   " +formatAMPM(libyaTime);

        setInterval(function(today) {
            var pakTime = new Date().toLocaleString("en-US", {timeZone: "Asia/Karachi"});
            pakTime = new Date(pakTime);

            var libyaTime = new Date().toLocaleString("en-US", {timeZone: "Africa/Tripoli"});
            libyaTime = new Date(libyaTime);

           document.getElementById("pak").innerHTML = "PAK  "+formatAMPM(pakTime);
           document.getElementById("ly").innerHTML = "LY  " +formatAMPM(libyaTime);

        },10000);

         function formatAMPM(date) {
            var hours = date.getHours();
            var minutes = date.getMinutes();
            var ampm = hours >= 12 ? 'pm' : 'am';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            minutes = minutes < 10 ? '0'+minutes : minutes;
            var strTime = hours + ':' + minutes + ' ' + ampm;
            return strTime;
        }

    }); 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-03-13T19:15:05.063

所有这些答案都有些多余，但这对我来说可以获取具有特定小时偏移量的当前 Date 对象。

```
 function hourToMs(hour)
    {
        return hour * 60 * 1000 * 60;
    }

    function minToMs(min)
    {
        return min * 60 * 1000;
    }

    function getCurrentDateByOffset(offset)
    {
        // Get the current timezone in milliseconds to reset back to GMT aka +0
        let timezoneOffset = minToMs((new Date()).getTimezoneOffset());

        // get the desired offset in milliseconds, invert the value because javascript is dum
        let desiredOffset = hourToMs(offset * -1);

        return new Date(Date.now() + timezoneOffset - desiredOffset);
    }

    // -6 hours is central timezone
    console.log("The time is: " + getCurrentDateByOffset(-6));
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-06-06T13:54:04.710

[我在使用Moment Timezone 时](http://momentjs.com/timezone/)遇到问题。我添加这个答案只是为了如果其他人面临同样的问题。所以我有一个日期字符串`2018-06-14 13:51:00`来自我的`API`. 我知道这是存储的，`UTC`但字符串本身并不能说明问题。

我让时刻时区知道，这个日期来自哪个时区：

```
let uTCDatetime = momentTz.tz("2018-06-14 13:51:00", "UTC").format();
// If your datetime is from any other timezone then add that instead of "UTC"
// this actually makes the date as : 2018-06-14T13:51:00Z 
```

现在我想通过执行以下操作将其转换为特定时区：

```
let dateInMyTimeZone = momentTz.tz(uTCDatetime, "Asia/Kolkata").format("YYYY-MM-DD HH:mm:ss");
// now this results into: 2018-06-14 19:21:00, which is the corresponding date in my timezone. 
```

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2018-02-15T04:49:47.983

Time Zone Offset for your current timezone

```
date +%s -d '1 Jan 1970' 
```

For my GMT+10 timezone (Australia) it returned -36000

* * *

## 回答 #29

> 赞同：-7
> 
> 时间：2019-07-13T04:36:19.367

快速而肮脏的手动小时更改器和返回：

```
return new Date(new Date().setHours(new Date().getHours()+3)).getHours() 
```**

# javascript - js替换方法的正则表达式不起作用

> ID：10087822
> 
> 赞同：0
> 
> 时间：2012-04-10T11:25:15.947
> 
> 标签：javascript, regex, internet-explorer

为什么这不起作用

```
var value = arr[row][col].replace(new RegExp('"', 'g'),'""'); 
```

**错误：**网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；InfoPath。 2；平板电脑 2.0) 时间戳：2012 年 4 月 10 日星期二 11:22:01 UTC

消息：对象不支持此属性或方法行：1041 字符：25 代码：0 URI：[http](http://example.com/) ://example.com/ ？

消息：对象不支持此属性或方法行：1041 字符：25 代码：0 URI：[http](http://example.com/) ://example.com/ ？

消息：对象不支持此属性或方法行：1041 字符：25 代码：0 URI：[http](http://example.com/) ://example.com/ ？

**注意：** : 直接从 IE8 的调试器复制的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:30:05.610

两个原因：您没有替换子字符串的出现，而是尝试在 DOM 元素上使用字符串操作方法。最好做这样的事情：

```
var value = arr[row][col].innerHTML.replace(new RegExp('"', 'g'),'""'); 
```

但在这种情况下，我真的不喜欢正则表达式（我喜欢正则表达式，但仅在需要时）。我会`"`用`""`这样的方式替换所有内容：

```
var value = arr[row][col].innerHTML.split('"').join('""'); 
```

更快，更容易阅读，并为您提供相同的结果。虽然要记住一件事：如果源字符串已经包含双引号 ( `""`)，这些将是四倍。如果这是一种可能的情况，您确实需要这样的正则表达式：

```
var value = arr[row][col].innerHTML.replace(/(?:[^"]"(?:[^"]))/g,'""'); 
```

这将只匹配既没有前面也没有后面的引号...选择上述任何解决方案，但请记住：如果您选择使用第一个选项，研究表明您有 50% 的可能性有更少的朋友;-)。

# multithreading - QProcess, QEventLoop - 可用于并行处理

> ID：10087824
> 
> 赞同：0
> 
> 时间：2012-04-10T11:25:23.917
> 
> 标签：multithreading, qt, multiprocessing, qprocess, qtconcurrent

我想知道是否可以使用 QEventLoop (QProcess?) 来并行化对 Qt 同一函数的多个调用。QtConcurrent 或 QThread 究竟有什么区别？更准确地说，什么是流程和事件循环？我读到 QCoreApplication 必须在 main() 方法中尽早 exec() ，所以我想知道为什么它与主线程不同。

您能否指出对 Qt 进程和线程的一些有效参考？我是通过官方文档来的，这些事情仍然不清楚。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:06:37.200

进程和线程不是 Qt 特定的概念。您可以在任何地方搜索“进程与线程”以解释该区别。例如：[线程之间共享哪些资源？](https://stackoverflow.com/questions/1762418/process-vs-thread)

尽管相关概念，但与在现有进程中生成新线程相比，生成新进程是一种更“重量级”的并行形式。默认情况下，进程相互保护，而进程*内*的执行线程可以直接读取和写入彼此的内存。从生成进程中获得的保护会带来更大的运行时成本……而且由于独立进程无法读取彼此的内存，因此您必须使用[进程间通信的](http://en.wikipedia.org/wiki/Inter-process_communication)方法在它们之间共享数据。

奇怪的是你想要线程，因为在一个程序中编写所有代码的情况下它们更容易使用。考虑到多线程编程的所有复杂性，我建议先看一本好书或阅读一些网站。请参阅：[学习线程编程有哪些好的资源？](https://stackoverflow.com/questions/2482/what-are-some-good-resources-for-learning-threaded-programming)

但是，如果您想深入了解 Qt 中的线程外观，您可以花时间查看示例：

[http://qt-project.org/doc/qt-4.8/examples-threadandconcurrent.html](http://qt-project.org/doc/qt-4.8/examples-threadandconcurrent.html)

QtConcurrent 是一个抽象库，可以更轻松地实现某些类型的并行编程模式。它建立在 QThread 抽象之上，没有什么可以做的是你不能通过直接写入 QThread 来编写自己的代码。但这可能会使您的代码更容易编写并且不易出错。

至于事件循环......这只是程序中任何给定执行线程如何等待工作项处理、处理它们并决定何时不再需要它的通用术语。如果一个线程的工作仅仅是启动，做一些数学运算，然后退出……那么它就不需要事件循环。但是启动和停止线程需要时间并且会搅动资源。所以通常线程的生存时间更长，并且有一个事件循环知道如何等待它需要响应的事件。

如果您构建在 QtConcurrent 之上，您将不必担心工作线程中的事件循环，因为它们是在线程池中自动管理的。字数统计示例非常简单：

[http://qt-project.org/doc/qt-4.8/qtconcurrent-wordcount-main-cpp.html](http://qt-project.org/doc/qt-4.8/qtconcurrent-wordcount-main-cpp.html)

# algorithm - 建议请开放数据图表

> ID：10087829
> 
> 赞同：0
> 
> 时间：2012-04-10T11:25:38.517
> 
> 标签：algorithm, graph

我应该为即将到来的包含大量图表的任务做好准备。我需要一些数据（可在免费域中获得）来训练自己。更大——更好……你能推荐一些开放的数据资源吗？我会很感激的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:35:23.773

您可以访问[http://snap.stanford.edu/data/](http://snap.stanford.edu/data/)。它包含许多不同类型的网络或图形数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T06:40:59.917

这是您的答案，`could you suggest some open data resource?`而不是`which consist of a lot of graphs`. 所以，请记住。

[在这里](http://data.gov.au/)（data.gov.au），您可以找到不同格式（txt、csv、xml、）的不同类型的巨大数据集（864 个！）。您将找到*Finance*、*Industry*、*Geography*等数据集。

在其他情况下，如果您想要一些特殊的（和有意义的数据，例如，全球人口密度），您可以从 readwriteweb.com看到这个（有点过时但有用的）[源。](http://www.readwriteweb.com/archives/where_to_find_open_data_on_the.php)

还有一个来源：“[开放政府数据集](http://linkeddata.deri.ie/node/72)”——确实值得一看。

# android - 安卓相机屏幕尺寸

> ID：10087830
> 
> 赞同：0
> 
> 时间：2012-04-10T11:25:43.237
> 
> 标签：android

当相机加载时，我只想打开相机特定区域。不需要全屏打开。 ![在此处输入图像描述](../Images/22cd9f7743968b6f55c8b7717c33e776.png)

在这里，黑色区域仅显示相机视图。我该怎么做？

我写了这样的代码..

```
 public class CameraActivity extends Activity{

private static final int CAMERA_PIC_REQUEST = 15;  
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
    getParent().getParent().setTitle("Image Capture");

    startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);  
    onActivityResult(15, 0, cameraIntent);

}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == CAMERA_PIC_REQUEST) {
        }
} 
```

请任何人帮助我解决这个问题。

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:23:54.467

在您的应用程序中尝试此相机活动代码

```
protected void startCameraActivity() {
        selectedImagePath = Environment.getExternalStorageDirectory() + "/default" + image_count+ ".jpg";
        image_count++;
        File file = new File(selectedImagePath);
        Uri outputFileUri = Uri.fromFile(file);
        Intent intent = new Intent (android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        startActivityForResult(intent, 0);
        }
        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (resultCode) {
        case -1:
        onPhotoTaken();
        break;
        }
        }
        protected void onPhotoTaken() {
        _taken = true;
        bitmap = decodeFile();
        img_logo.setImageBitmap(bitmap);

        }
        @Override
        protected void onRestoreInstanceState(Bundle savedInstanceState) {
        if (savedInstanceState.getBoolean(PHOTO_TAKEN)) {
        onPhotoTaken();
        }
        }
        @Override
        protected void onSaveInstanceState(Bundle outState) {
        outState.putBoolean(PHOTO_TAKEN, _taken);
        }
        private Bitmap decodeFile() {
        try {
        // decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream( selectedImagePath), null, o);
        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
        if (width_tmp / 2 < REQUIRED_SIZE
        || height_tmp / 2 < REQUIRED_SIZE)
        break;
        width_tmp /= 2;
        height_tmp /= 2;
        scale++;
        }
        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(selectedImagePath), null, o2);
        } catch (FileNotFoundException e) {
        }
        return null;
        }
        public boolean onKeyDown(int keyCode, KeyEvent event) {
            if(keyCode==KeyEvent.KEYCODE_BACK)
            {
                finish();
            }
            return super.onKeyDown(keyCode, event);
        } 
```

我希望这可以帮助你

# css - CSS对齐每页不同，找不到原因

> ID：10087833
> 
> 赞同：0
> 
> 时间：2012-04-10T10:59:39.633
> 
> 标签：css

我在主页和公司详细信息页面上列出产品。我使用完全相同的 HTML，但由于某种原因，产品看起来不同：

产品名称是“Artikel 1”。

此处产品显示正确：[http](http://www.zorgbeurs.nl/) ://www.zorgbeurs.nl/ 请注意绿色价格区域如何位于产品正下方。

但在这里：[http](http://www.zorgbeurs.nl/bedrijven/76/mymedical) ://www.zorgbeurs.nl/bedrijven/76/mymedical 绿色价格区域一直在页面底部。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:32:24.080

您在 mymedical 页面中缺少标签。

```
<ul class="product_item"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:32:39.233

在第一个链接中，您的`li`元素已`position:relative`设置，这使得产品块的绝对定位相对于`li`. 第二`li`个链接中的 没有设置相对定位，因此绝对定位规则相对于文档起作用。

正如 Hamurabi 所说，这是因为`ul`缺少 ，因此该规则`.product_item li`不再适用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T12:08:58.970

该`li`元素没有获得分配的类，因为没有`ul`包含它的元素。所以价格元素的绝对位置是相对于其他元素定位的（[css定位](http://www.w3schools.com/css/css_positioning.asp)）。

要获得相同的最终类，请考虑样式是从所有父级继承的。尝试将`li`元素括在`<ul class="product_item">`和之间`</ul>`。

# html - 如何增加链接的大小？

> ID：10087847
> 
> 赞同：1
> 
> 时间：2012-04-10T07:12:04.413
> 
> 标签：html, hyperlink, fonts

嗨，我需要在页脚中将我的链接显示为“由 Arun 提供支持”，它应该是指向我主页的链接。**我需要对Powered by**旁边的名称进行不同的外观。那么如何增加链接的大小以及自定义链接的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:27:59.297

使用一个`<span>`元素：

```
<span>Powered By</span> Arun 
```

然后，您可以将样式应用于跨度或类：

*   内联样式：

    ```
    <span style="font-size:1.2em;"></span> 
    ```

*   课堂风格：

    应用类：

    ```
    <span class="mySpanClass"></span> 
    ```

    并指定相应的样式（在样式表中）：

    ```
    .mySpanClass { font-size:1.2em; } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:39:11.810

我想，你需要这样的东西，

```
<a href='linkToHomePage' style='font-size:1.2em'>Powered by<span style="font-weight:bold">Arun</span></a> 
```

（我猜你不是技术人员，所以这对你来说很容易）

如果你能做到，请这样做，

添加这个CSS，

```
.poweredby {
  font-size:1.2em;
}
.author {
  font-weight:bold;
} 
```

并添加此标记，

```
<a href='linkToHomePage' class='poweredby'>Powered by<span class="author">Arun</span></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:35:49.013

正如失望先生在他的回答中所说，您可以使用`<span>`.

要显示通过链接使用它的示例，请参见下文。

```
<a href="LinkToYouHomePage.htm"><span style="font-size: small">Powered by</span> <span
    style="font-size: larger">Arun</span> </a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-20T00:09:48.057

如果您想为链接提供一些基本样式，您不能这样做吗？

```
<p><a href="https://iden.example.org"><i style="font-size:1.5em ;color: blue; ">Powered by</i><strong> Arun</strong></a></p> 
```

# entity-framework-4 - 错误 11007：实体类型“tableName”未映射。是因为该表的主键是标识列吗？

> ID：10087848
> 
> 赞同：4
> 
> 时间：2012-04-10T11:26:48.400
> 
> 标签：entity-framework-4

我正在使用 EF 4 从数据库中生成我的实体。我在尝试编译我的`Model`程序集（单独程序集中的 edmx 文件）时收到以下错误。我只在具有主键作为标识列的表上得到错误。这是一个问题吗？还是我只是做出错误的判断？

```
Error 11007: Entity type 'tableName' is not mapped. 
```

脚步

1.  使用`Entity data model wizard`我创建了我的`Model`（edmx 文件）。
2.  右键单击 edmx 文件并`Add Code Generation Item`创建实体（使用 `Ado.net self tracking entity generator`）。
3.  通过移动`x.tt`和编辑实体以指向不同装配中的 edmx 文件，将实体移动到不同装配。
4.  现在实体和模型（edmx）处于不同的组合中，使我能够拥有一个多层应用程序。

我无法构建`Model`程序集并且出现错误

```
Error 11007: Entity type 'tableName' is not mapped. 
```

我已经在网上查了解决方案。是的，我所有的表都有一个主键，它们之间的关联是用外键定义的。对此有任何指示吗？

谢谢，多莉

# objective-c - objectAtIndex 目标 c 超出范围

> ID：10087850
> 
> 赞同：0
> 
> 时间：2012-04-10T11:26:57.077
> 
> 标签：objective-c, cocos2d-iphone

`children_`( )的计数`CCArray`输出 15，我收到错误：

```
'NSInternalInconsistencyException', reason: 'index out of range in objectAtIndex(14), index 15'

for (NSInteger i=[children_ count]-1; i>=0; i++) {

        CCNode *c = [children_ objectAtIndex:i];

        if ([c isKindOfClass:[CCLabelTTF class]]) {
            [c removeFromParentAndCleanup:YES];
        }
    } 
```

我将如何解决这个问题？尝试删除所有标签以更改其字符串值。在我的 CCLayer 上，我还有一些 CCMenuItemLabel 和 CCMenuItemLabelAndSprite...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:28:47.897

看起来您想通过集合类向后迭代，因此您需要执行`i--`修改索引变量：

```
for (NSInteger i=[children_ count]-1; i>=0; i--) {

    CCNode *c = [children_ objectAtIndex:i];

    if ([c isKindOfClass:[CCLabelTTF class]]) {
        [c removeFromParentAndCleanup:YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T11:38:06.567

如果可能，您应该使用[快速枚举](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html)：

```
for (id obj in [childres_ reverseObjectEnumerator]){
    if ([obj isKindOfClass:[CCLabelTTF class]]) {
        [obj removeFromParentAndCleanup:YES];
    }
} 
```

或使用[块语法](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Enumerators.html#//apple_ref/doc/uid/20000135-BBCFABCB)

```
[children_ enumerateObjectsWithOptions:NSEnumerationReverse usingBlock:^(id obj, NSUInteger idx, BOOL *stop){
    if ([obj isKindOfClass:[CCLabelTTF class]]) {
        [obj removeFromParentAndCleanup:YES];
        stop= YES;
    };
}]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T11:30:39.113

似乎您正在使用 count-1 初始化 for 循环计数器并递增，因此 i 的第一个值是 14 ，下一个值是 15 （超出范围）

尝试这个 ：

```
for (NSInteger i=0; i<[children_ count]; i++) {
} 
```

# ruby-on-rails - 在rails中对habtm数据进行排序

> ID：10087851
> 
> 赞同：0
> 
> 时间：2012-04-10T11:26:58.307
> 
> 标签：ruby-on-rails, sorting, has-and-belongs-to-many

我有以下数据库：

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :apps

class App < ActiveRecord::Base
  has_and_belongs_to_many :users 
```

在 User ( `users/show.html.haml`) 视图中，我想列出*所有*按当前用户拥有的应用程序排序的应用程序。

```
%table
  %thead
    %tr
      %th Name
      %th Available
  -  for app in App.order("??????")
    %tr
      %td= link_to app.name, app_path(app)
      %td 
        - if @user.apps.include?(app)
          %i.icon-ok
        - else
          %i.icon-remove 
```

我的问题是我在 order 函数中放入什么来进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:53:09.543

或通过类似这样的方式：

```
App.all.partition{|app| @user.apps.include?(app)}.flatten 
```

有不止一种方法可以做到！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:30:27.083

如果我理解正确，您希望将属于当前用户的应用程序排在第一位。我认为这在一个查询中是不可能的。我认为最简单的方法是将其拆分为两个查询：

```
user_apps     = current_user.apps
non_user_apps = App.where(:id.not_in => current_user.app_ids)
@apps         = user_apps + non_user_apps 
```

然后你可以迭代这个`@apps`数组，元素将按照你想要的顺序排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:20:29.673

试试这个：@user.apps.order(:name)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T11:59:10.613

在 order 方法中，您可以输入您想要的任何 App 的方法名称。有可能

```
App.order(:id)
App.order(:name)
App.order(:created_at) 
```

或其他任何东西。

# c - 未解决的包含在 JNI 中的 java 标头中

> ID：10087853
> 
> 赞同：7
> 
> 时间：2012-04-10T11:27:03.073
> 
> 标签：c, opencv, java-native-interface

这是我的 java 文件，我想使用 javah 为 android opencv 应用程序生成头文件。

```
package com.hosa;

public class edgejava{
static{
    System.loadLibrary("edgejava");
}
public native int main(``);
} 
```

生成的头文件如下。

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class com_hosa_edgejava */

#ifndef _Included_com_hosa_edgejava
#define _Included_com_hosa_edgejava
#ifdef __cplusplus
extern "C" {
#endif
/*
* Class:     com_hosa_edgejava
* Method:    main
* Signature: ()I
*/
JNIEXPORT jint JNICALL Java_com_hosa_edgejava_main
(JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

日食指出在头文件中包含 jni.h 尚未解决。要采取什么步骤来解决这个问题？？？？

问候，斯里吉斯

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-27T07:19:17.417

我也有这个问题，所以对于任何偶然发现这个的人......

我从 eclipse 中解决了 JNI 问题 - 你可能已经完成了第 1 步或类似的事情

1.  文件 -> 新建 -> 其他 -> C++ > 转换为 C++ 项目

2.  右键单击项目头 -> 属性 -> C++ 常规 -> 路径和符号

3.  在 GNU 和 GNUC++ 语言条目下添加类似的路径

    /NDK/Platforms/Android-9/arch-arm/usr/include

    您的路径会有所不同，具体取决于您的设置方式、平台编号等。

    完成后，在提示您时重建索引

4.  关闭你的项目，重新打开它，然后清理构建（或者它可能立即发生）

在我的情况下，然后找到了 JNI.h，但 JNIEnv 等仍然无法识别，即使它们在 JNI.h 文件中。

另请注意，对于遇到此问题的任何人，它不会阻止您构建，您只需要关闭有问题的文件，然后打开并关闭您的项目以消除错误（多么痛苦）

更新：已修复！

在 Indigo 的上述版本中，从菜单/对话框中执行以下操作

Window->Preferences->C/C++->Index 检查"Index Unused Headers" reindex/build 如有必要

您可能还需要在我上面提到的包含上方添加“/NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.4.3/include”到语言条目。

现在可以识别所有符号 - 希望这可以帮助那些让我发疯的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T14:03:05.550

**固定的！**

添加到`Application.mk`：
`APP_STL := gnustl_shared`

转到`Properties -> C/C++ General -> Preprocessor Include-> Entries -> Add -> Include Directory -> File System Path`，然后选择包含的路径，例如：

```
${NDK_ROOT}\platforms\android-21\arch-arm\usr\include
${NDK_ROOT}\sources\cxx-stl\gnu-libstdc++\4.8\libs\armeabi-v7a\include
${NDK_ROOT}\sources\cxx-stl\gnu-libstdc++\4.8\include
${NDK_ROOT}\toolchains\arm-linux-androideabi-4.8\prebuilt\darwin-x86_64\lib\gcc\arm-linux-androideabi\4.8\include 
```

**！！！**选中`"Contains system headers"`每个包含路径的复选框。**！！！**

转到`Properties -> C/C++ General -> Preprocessor Include-> Providers -> Check CDT GCC Built-in Compiler Settings -> OK`

清理并重建您的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T20:21:46.270

我对 Android JNI 有同样的问题。我通过将项目指向 NDK 源中的 android jni.h 的包含路径来修复它 请参阅如何从此处下载 NDK： [https ://developer.android.com/tools/sdk/ndk/index.html](https://developer.android.com/tools/sdk/ndk/index.html)

有关修复的详细信息在这里：

[Android 添加原生支持 - 未解决的 jni.h、android/log.h 等](https://stackoverflow.com/questions/12584255/android-add-native-support-unresolved-jni-h-android-log-h-etc/23347945#23347945)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-08-20T04:55:35.100

就我而言，我只是关闭并打开项目，然后错误消失了。

# mysql - 使用 C 执行插入查询

> ID：10087854
> 
> 赞同：1
> 
> 时间：2012-04-10T11:27:05.700
> 
> 标签：mysql, c, insert

我想从 C 插入 mysql 数据库。
这是我的代码：

...

```
for (i=0;i<nb_of_subscribers*hits_subscriber;i++)

   { RandomSub= rand() % nb_of_subscribers + 1;
   RandomContent= rand() % (contents_tag*tags) + 1;

    mysql_query(conn, "INSERT INTO CONTENT_HITS(CONTENT_ID,SUBSCRIBER_ID) VALUES(RandomContent,RandomSub)");} 
```

...问题是：插入查询未执行，数据库中没有任何内容。
谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:44:46.510

在字符串中写入变量的名称与写入其值不同。

将值放入查询字符串的一种方法是使用 sprintf() ，如下所示：

```
for ( i = 0; i < nb_of_subscribers * hits_subscriber; i++ ) {
    char query[80] = {0};

    RandomSub= rand() % nb_of_subscribers + 1;
    RandomContent= rand() % (contents_tag * tags) + 1; 
    sprintf(query, "INSERT INTO CONTENT_HITS(CONTENT_ID,SUBSCRIBER_ID) VALUES (%d,%d)", RandomContent, RandomSub);
    mysql_query(conn, query);
} 
```

但你真的应该使用这里记录的准备好的语句：http:
[//dev.mysql.com/doc/refman/5.1/en/c-api-prepared-statements.html](http://dev.mysql.com/doc/refman/5.1/en/c-api-prepared-statements.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:53:53.127

`RandomSub`和（您已声明的）的值如何`RandomContent`实际进入您正在执行的查询？你正在尝试运行

```
INSERT INTO CONTENT_HITS(CONTENT_ID,SUBSCRIBER_ID) VALUES(RandomContent,RandomSub) 
```

这将失败，因为它试图将两个字符串放入（我猜）两个整数字段中。

您需要将`RandomContent`和的值替换`RandomSub`为字符串：

```
char q[1024];
for (i=0;i<nb_of_subscribers*hits_subscriber;i++)
{

    RandomSub= rand() % nb_of_subscribers + 1;
    RandomContent= rand() % (contents_tag*tags) + 1;

    sprintf(q,"INSERT INTO CONTENT_HITS(CONTENT_ID,SUBSCRIBER_ID) VALUES(%d,%d)",RandomContent,RandomSub);

    mysql_query(conn, q);
} 
```

正如@SpacedMonkey 所说-您应该为此使用准备好的语句

老实说，非常基本的C语言。

PS - 做一些接受 - 10% 不是很好

# html - CSS Inline-table 添加底部边距

> ID：10087855
> 
> 赞同：0
> 
> 时间：2012-04-10T11:27:11.960
> 
> 标签：html, css, margin, css-tables, divider

我有一个包含 x 表格的分隔线，格式如下：

```
<div class="container">
  <table>....</table>
  <table>....</table>
  <table>....</table>
  <table>....</table>
</div> 
```

与此对应的 CSS 代码为：

```
.container{
  width: 100%;
  clear: both;
  border-bottom: solid 2px #036;
  white-space: nowrap;
}

table{
  display: inline-table;
  border-bottom: solid 1px #000;
} 
```

然而，当它被应用时，表格的底部边框和分隔线的底部边框之间有 ~12px 的间隙。如果我设置“margin-bottom：-12px;” 在桌子上它纠正了定位错误，但不是在所有浏览器中。

有谁知道为什么会有保证金？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:52:18.040

似乎有问题`display: inline-table`，当您将其替换`float: left`为问题时，问题就消失了。我也设置`overflow: hidden`了`.container`div，所以它占用了里面浮动表的全高。

编辑：为了防止表格包装，您可以将表格放在另一个已`white-space: nowrap;`设置的左侧浮动 div 中。

**CSS**

```
* {
  margin: 0;
  padding: 0;  
}
.container {
  overflow: hidden;
  border-bottom: solid 2px #036;
}
.nowrap {
  float: left;
  overflow: hidden;
  white-space: nowrap;
}
table {
  float: left;
  border-bottom: solid 1px #000;
  border-spacing: 0px;
  padding: 0px;
} 
```

**​HTML**

 **```
<div class="container">
  <div class="nowrap">
    <table><tbody><tr><td>test test test test test</td></tr></tbody></table>
    <table><tbody><tr><td>test test test test test</td></tr></tbody></table>
    <table><tbody><tr><td>test test test test test</td></tr></tbody></table>
    <table><tbody><tr><td>test test test test test</td></tr></tbody></table>
  </div>
</div>
Test<br />​ 
```

看到这个更新[的 JSFiddle](http://jsfiddle.net/w5R6V/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:40:35.580

你必须使用`<table>`吗？我强烈建议您`<div>`改用。但是在表格中（可能你应该`td`在你的css中添加）将边框设置为0。这应该会有所帮助。**

# ruby-on-rails-3 - 在初始创建后更新未使用的字段不起作用 rails

> ID：10087858
> 
> 赞同：1
> 
> 时间：2012-04-10T11:27:15.990
> 
> 标签：ruby-on-rails-3

作为参考，这是使用 Rails 3.0.9。

我似乎无法弄清楚为什么，但我无法更新在最初创建对象/行时留空的字段。

如果我的模型如下所示：

名称 - 字符串

日期 - 日期

消息 - 字符串

如果我在初始创建时将信息放入所有字段中，则以后可以毫无障碍地更新所有内容。但是，如果我没有将信息放在其中一个字段中，比如标题，我将无法在初始创建后更新该字段。

我没有做任何不寻常的事情，形式很简单，简：

```
<%= form_for @event do |f| %>
   <%= f.error_messages %>
   <p>
      <%= f.label :name %><br />
      <%= f.text_field :name %>
   </p>
   <p>
      <%= f.label :date %><br />
      <%= f.date_select :date %>
   </p>
   <p>
      <%= f.label :message %><br />
      <%= f.text_field :message %>
   </p>
   <p><%= f.submit %></p>
<% end %> 
```

我的控制器同样简单：

```
def update
   if @event.update_attributes(params[:event])
       redirect_to @event, :notice  => "Successfully updated event."
   else
       render :action => 'edit'
   end
end 
```

和模型：

```
class Event < ActiveRecord::Base
has_many :races, :dependent => :destroy
has_many :price_groups, :dependent => :destroy

accepts_nested_attributes_for :races, :reject_if => lambda{ |a| a[:name].blank? }, :allow_destroy => true
accepts_nested_attributes_for :price_groups, :reject_if => lambda{ |a| a[:name].blank? }, :allow_destroy => true

attr_accessible :name, :date, :message, :races_attributes, :price_groups_attributes
end 
```

# android - 活动之间平滑过渡，无黑屏

> ID：10087859
> 
> 赞同：5
> 
> 时间：2012-04-10T11:27:16.447
> 
> 标签：android, android-layout, android-animation

我使用带有 ImageView 的活动，并通过单击按钮切换到带有 VideoWiew 的活动并播放电影，电影的第一帧是上一个活动的图像。我通过使用禁用了活动之间的动画

```
Intent intent = new Intent(ImageClass.this, MovieClass.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
startActivity(intent); 
```

但它仍然在它们之间闪烁黑屏，我该如何禁用它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T11:32:14.810

最简单的方法之一是将所有昂贵（耗时）的处理从活动的**onCreate**和**onStart**方法转移到**onResume**方法。这样，您新启动的活动将在其启动后立即可见，但随后需要一些额外的时间才能使其可供用户交互。此外，我建议您将所有繁重的工作转移到**AsyncTask**中，以获得更流畅的 UI 体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-25T02:08:09.117

我最近遇到了平滑过渡的问题。即使我在 AsyncTask 中加载冗长的任务，加载仍然需要时间，并且屏幕必须等待。

例如，如果您有一个 WebView，它需要一段时间才能加载，并且在 WebView 下，您有一些 TextView 和其他东西，据说是一个布局。布局将首先加载，WebView 稍后加载，从而使屏幕加载失败。

解决方案是在加载之前将所有对象的 Visibility 设置为 GONE，然后在 WebView 加载后设置为 VISIBLE。

```
webView.setWebViewClient(new WebViewClient() {
        public void onPageFinished(WebView view, String url) {

            webView.setVisibility(View.VISIBLE);
            LinearLayout ll_load_after_web_view_bottom = findViewById(R.id.ll_load_after_web_view_bottom);
            LinearLayout ll_load_after_web_view_top = findViewById(R.id.ll_load_after_web_view_top);
            ll_load_after_web_view_bottom.setVisibility(View.VISIBLE);
            ll_load_after_web_view_top.setVisibility(View.VISIBLE);
        }
    }); 
```

# android - Android中的网络连接数

> ID：10087866
> 
> 赞同：4
> 
> 时间：2012-04-10T11:27:54.650
> 
> 标签：android, networking, android-asynctask

1.  Android 网络连接有限制吗？
2.  如果我们想限制后台运行的网络连接数，我们该如何实现呢？
3.  如果我们在 AsyncTask 中启动一个网络连接，如果我们使用 取消它`AsyncTask_object.cancel(true)`，它会关闭所有相应的内部网络连接吗？
4.  如何在 Android 中取消正在运行的网络连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:40:28.553

我不确定限制是什么，因为它是基于 Linux 的。

3.

我认为您应该检查该`onCancelled(Object)`方法。

4.

假设我们这样做： `ConnectivityManager connec = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);`

这应该关闭连接：`connec.getNetworkInfo(0).setState(NetworkInfo.State.DISCONNECTED);`

也看看 [http://vikaskanani.wordpress.com/2011/08/03/android-proper-way-to-cancel-asynctask/](http://vikaskanani.wordpress.com/2011/08/03/android-proper-way-to-cancel-asynctask/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:43:24.833

回答你的第三个问题：

调用 AsyncTask_object.cancel(true) 不会关闭内部连接，而是调用 AsyncTask 类的回调方法 onCancelled()。因此，您有责任在 onCancelled() 中编写代码，该代码将取消/回滚 AsyncTask 中正在进行的所有工作。您可以调用 isCancelled() 来了解任务是否被取消。

例子：

```
if(task.getStatus() != AsyncTask.Status.FINISHED)
  task.cancel(true); 
```

在异步任务中：

```
@Override
protected void onCancelled() {
//cancell/rollback the work being done
} 
```

# php - 验证模型值不会引发异常

> ID：10087870
> 
> 赞同：1
> 
> 时间：2012-04-10T11:28:09.230
> 
> 标签：php, kohana

我在 Kohana ORM 中验证模型时遇到问题，它应该抛出 ORM_Validation_Exception，但是它没有。我正在尝试验证电子邮件地址。

型号_电子邮件地址

```
public function rules()
{
    return array(
        'emailaddress' => array(
            array(
                'Valid::email'
            ),
        ),
    );
} 
```

Controller_Test

```
public function action_valid()
    {
        $email = ORM::factory('emailaddress');

        $email->emailaddress = 'test';

        try
        {
            $email->create();

        }
        catch(ORM_Validation_Exception $e)
        {
            echo Debug::dump($e->errors());
        }
    } 
```

这个例子应该将一个有错误的数组转储到屏幕上，但它只是保存了电子邮件地址，没有进一步的通知。

当我将 'Valid::email' 更改为 'not_empty' 时，它确实会引发异常。经过一些调试后，我发现 Valid::email 返回 false，这是应该的。

编辑：正如一些人所说，将 'Valid::email' 更改为 'email' 没有帮助。此外，当我在电子邮件方法中放置一个出口时，脚本执行将停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:04:13.387

经过一些繁重的调试后，我发现 Kohana 验证类包含一个与 php 5.3.3 结合使用的错误。它应该工作，但它没有。

在 Kohana_Validation::check()

改变

```
$data[$field] = Arr::get($this, $field); 
```

至

```
$data[$field] = Arr::get($this->_data, $field); 
```

在 Kohana_Validation::errors()

改变

```
':value' => Arr::get($this, $field), 
```

至

```
':value' => Arr::get($this->_data, $field), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:45:40.853

哎呀..如何使用：

```
 'email' insert  'Valid::email' 
```

更好的使用 save() 方法:)

# php - 事务中的 PHP PDO 多个准备语句

> ID：10087878
> 
> 赞同：1
> 
> 时间：2012-04-10T11:28:51.860
> 
> 标签：php, mysql, pdo

我有这个代码：

```
 $this->db->beginTransaction();
    $query = 'INSERT INTO `table1` VALUES (NULL,:a,:b,NULL,NOW())';
    $sth = $this->db->prepare($query);
    foreach ($values as $k => $v) {
      $sth->bindParam(':' . $k, $v, PDO::PARAM_INT);
    }

    $this->executeQueryRollbackOnException($sth, 'Message_1');
    $resetId = $this->db->lastInsertId();

    $query = 'UPDATE `table2` SET c=:c,d=:d WHERE reset_id IS NULL';
    $sth = $this->db->prepare($query);
    foreach ($values2 as $k => $v) {
      $sth->bindParam(':' . $k, $v, PDO::PARAM_INT);
    }

    $this->executeQueryRollbackOnException($sth, 'Message_2');

    Zend_Debug::dump($sth->rowCount(), 'Affected'); // This is 0

    // Commit
    $this->db->commit(); 
```

...

```
 private function executeQueryRollbackOnException($sth, $message) {
    try {
      $sth->execute();
    } catch (Exception $e) {
      $this->logSQLError($e);
      $this->db->rollBack();
      throw new Exception($message);
    }
  } 
```

第一个查询已执行，但第二个未执行。没有产生mysql错误。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:55:25.953

我找到了解决方案。

```
foreach ($values as $k => $v) {
   $sth->bindParam(':' . $k, $v, PDO::PARAM_INT);
} 
```

应该

```
foreach ($values as $k => $v) {
   $sth->bindParam(':' . $k, $values[$k], PDO::PARAM_INT);
} 
```

对不起，我第一次没有发布正确的代码，我排除了 foreaches 以简化代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:57:58.227

为 0的事实`$sth->rowCount()`并不意味着查询未运行。如果您的 PHP 错误日志中没有报告错误，则查询运行良好。如果行数为 0，则表示没有更新任何行。这很可能是由于您的条件不匹配任何行。

运行以下；如果你得到 0，那么你知道问题是你的`UPDATE`条件：

```
SELECT COUNT(*) FROM `table2` WHERE reset_id IS NULL 
```

# watin - WaitUntilExists() 方法调用

> ID：10087879
> 
> 赞同：0
> 
> 时间：2012-04-10T11:29:06.053
> 
> 标签：watin

我对 WatiN 比较陌生，但我原以为以下行会起作用：

```
WebBrowser.Current.Table("grid").FindRow(value, columnNum).WaitUntilExists(); 
```

目前它失败了，但有以下例外：

```
System.NullReferenceException: Object reference not set to an instance of an object. 
```

我猜这与 tet 运行时未填充相关行的事实有关，因此 FindRow 返回空值。

我已将该行替换为：

```
while (WebBrowser.Current.Table("grid").FindRow(value, columnNum) == null){} 
```

哪个有效 - 但更愿意在内置方法中使用 WatiN（有超时）。

关于如何修复我的第一行代码的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:01:14.317

好吧， WaitUntilExits() 与 WaitUntilIsNotNull 不同（这不是一种方法：D）您可能可以使用

```
WebBrowser.Current.Table("grid").FindRow(value, columnNum).WaitForComplete() 
```

或者

```
WebBrowser.Current.Table("grid").FindRow(value, columnNum).WaitUntilExists() 
```

或者

```
WebBrowser.Current.Table("grid").FindRow(value, columnNum).WaitUntil(attribute, value) 
```

取决于你需要什么

# android - 外部存储器（SD卡）上的文件夹应该只能由特定的android应用程序访问.....有没有办法？

> ID：10087881
> 
> 赞同：0
> 
> 时间：2012-04-10T11:29:17.003
> 
> 标签：android, database, passwords, android-sdcard

实际上，由于空间限制，我的 android 应用程序将图像和存储存储到外部存储器而不是内部存储器中。图像必须仅对该特定应用程序可用

虽然所有应用程序都可以访问 sd 卡中的数据，但我希望我的图像存储在外部，但必须确保其他应用程序不应该使用这些图像。

有没有一种方法可以通过密码以编程方式保护该特定文件夹，如果只有那个 android 应用程序可以使用文件夹内容？

如果我将我的应用程序数据库本身存储在外部存储器中，那么另一个问题是。数据库是否可以被其他应用程序访问？

请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:35:54.403

确保这一点的唯一方法是直接在 SDCard 上安装应用程序。然后所有私人数据都将存储在那里（除了您之外的任何人都看不到）。

为此，只需将此参数放在 AndroidManifest 文件中的“manifest”标记处：

```
android:installLocation="preferExternal" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:41:26.733

您是否尝试过使用 -

```
SQLiteDatabase.openOrCreateDatabase(String, SQLiteDatabase.CursorFactory) 
```

您可以简单地将“/sdcard/info.db”作为第一个参数传递，并将 null 作为第二个参数传递。

并且通过谷歌搜索，您可以得到许多用于通过用户密码保护文件的应用程序。

# objective-c - JSONKit 无法从 php 解析简单的 JSON？

> ID：10087882
> 
> 赞同：3
> 
> 时间：2012-04-10T11:29:18.987
> 
> 标签：objective-c, json, jsonkit

我在我的 iOS 应用程序中使用 JSONKit。它加载了一个由我的 php 文件提供的极其简单的 JSON：

[http://staging.comwerks.net/terrence/ecitizen/article.php](http://staging.comwerks.net/terrence/ecitizen/article.php)

不知何故，它产生了一个错误：“意外的令牌，想要'{'，'}'，'['，']'，'，'，'：'，'true'，'false'，'null'，' “字符串”，“数字”。}

当我尝试使用[http://jsonlint.com/](http://jsonlint.com/)对上面的 URL 进行 lint 处理时。它给出了一个类似的错误抱怨开放括号！

我的 php 再简单不过了：

```
<?php
header('Content-type: application/json');
$json = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
echo json_encode($json);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:40:28.750

它可能在响应开始时抱怨 Unicode 字节顺序标记。如果我将输出复制并粘贴到 linter 中，它会验证。它可能在您的 article.php 文件的开头。您的文本编辑器应该有一个选项可以在没有它的情况下进行保存（可能在“另存为...”对话框中）。

[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:50:15.730

我同意尼克的观点。当我将 json 直接拉到一个文件中时，我的编辑说编码是带有 BOM 的 UTF-8。

此外，您使用的 JSON 验证器给了我这个错误：

`JSON Parse error: Unrecognized token '?'`

# cakephp-2.0 - 如何在 cakephp 中执行 cron 作业？

> ID：10087892
> 
> 赞同：0
> 
> 时间：2012-04-10T11:30:16.130
> 
> 标签：cakephp-2.0

```
 # Cron Job for Cakephp # 
```

> 我创建了 1 个文件 cron_scheduler.php，它是 wamp/www/projectname/app/webroot/index.php 文件的副本，它也在同一个文件夹中
> 
> 我试图运行 throw 命令提示符但没有得到任何结果。
> 
> 如何为 Cakephp 运行 cronjob？我不知道如果有人知道，请帮助我。提前致谢。

* * *

```
 <?php
    if (!defined('DS')) {
            define('DS', DIRECTORY_SEPARATOR);
    }
   /**
      * These defines should only be edited if you have cake installed in
      * a directory layout other than the way it is distributed.
      * Each define has a commented line of code that explains what you
        would change.
      *
      */
        if (!defined('ROOT')) {
            //define('ROOT', 'FULL PATH TO DIRECTORY WHERE APP DIRECTORY IS
            //LOCATED DO NOT ADD A TRAILING DIRECTORY SEPARATOR';
            //You should also use the DS define to seperate your directories
            define('ROOT', dirname(dirname(__FILE__)));
    }
    if (!defined('APP_DIR')) {
            //define('APP_DIR', 'DIRECTORY NAME OF APPLICATION';
            define('APP_DIR', basename(dirname(__FILE__)));
    }
      /**
        * This only needs to be changed if the cake installed libs are located
        * outside of the distributed directory structure.
       */
           if (!defined('CAKE_CORE_INCLUDE_PATH'))
              {
            //define ('CAKE_CORE_INCLUDE_PATH', FULL PATH TO DIRECTORY WHERE
            //CAKE CORE IS INSTALLED DO NOT ADD A TRAILING DIRECTORY SEPARATOR';
             //You should also use the DS define to seperate your directories
             define('CAKE_CORE_INCLUDE_PATH', ROOT);
              }

            ///////////////////////////////
            //DO NOT EDIT BELOW THIS LINE//
            ///////////////////////////////

            if (!defined('WEBROOT_DIR')) 
             {
            define('WEBROOT_DIR', 'webroot');
    }
    if (!defined('WWW_ROOT')) {
            //define('WWW_ROOT', dirname(__FILE__) . DS);
            define('WWW_ROOT', dirname(__FILE__) . DS . 'webroot' . DS);
    }
    if (!defined('CORE_PATH')) {
            if (function_exists('ini_set')) {
                    ini_set('include_path', CAKE_CORE_INCLUDE_PATH . 
                    PATH_SEPARATOR .
                    ROOT . DS . APP_DIR . DS . PATH_SEPARATOR . ini_get('include_path'));
                    define('APP_PATH', null);
                    define('CORE_PATH', null);
            } else {
                    define('APP_PATH', ROOT . DS . APP_DIR . DS);
                    define('CORE_PATH', CAKE_CORE_INCLUDE_PATH . DS);
            }
    }
    require CORE_PATH . 'cake' . DS . 'bootstrap.php';

    define('CRON_DISPATCHER',true);
    if($argc == 2) 
    {
            $Dispatcher= new Dispatcher();
            $Dispatcher->dispatch($argv[1]);
    }

          ?> 
```

* * *

```
> i have tried to run throw command promt but didn't get any result 
> how to run cronjob for Cakephp ? i don't have any idea
  if anyone knows , please help me.
  Thanks 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T20:56:37.017

Step1：创建一个名为 ReminderShell.php 的 shell 文件，路径应该是 PROJECT_DIR_PATH/PROJECT_NAME/app/Console/Command/ReminderShell.php 复制下面的脚本并粘贴它

```
class ReminderShell extends Shell { 
         var $tasks = array('Mail'); 
         function main() { 
               $this->Mail->enroll_reminder(); 
                         }
          } 
```

Step2：创建名为 MailTask​​.php 的任务文件，路径应为 PROJECT_DIR_PATH/PROJECT_NAME/app/Console/Command/Task/MailTask​​.php

```
<?php

App::uses('CakeEmail', 'Network/Email');

class MailTask extends Shell {

var $uses = array('Contact');

public function enroll_reminder() {
    $Email = new CakeEmail();
    $Email->config('default');
    $reminder = $this->Contact->find('all');
    if (!empty($reminder)) {
        foreach ($reminder as $val) {
        $id = $val['Contact']['id'];
        $name = $val['Contact']['first_name'];
        $email = $val['Contact']['email'];
        $Email->template('reminder')
            ->viewVars(array('fname' => $name))
            ->emailFormat('html')
            ->subject('xyz.com: Enrollment Reminder')
            ->to($email)
            ->from('noreply@xyz.com');
        if ($Email->send()) {
            $update_val['Contact']['id'] = $id;
            $update_val['Contact']['enroll_reminder'] = 'sent';
            $update_val['Contact']['enroll_reminder_date'] = date("Y-m-d H:i:s");
            $this->Contact->save($update_val['Contact']);
            $this->out($email.' Mail Sent');
        }
        }
    }
} 
```

Step3：创建一个名为remind.ctp的电子邮件模板，路径应为PROJECT_DIR_PATH/PROJECT_NAME/app/View/Emails/html/reminder.ctp

Step4：在config目录下创建email.php

Step5：在终端中运行以下命令：控制台/蛋糕提醒

```
PROJECT_DIR_PATH/PROJECT_NAME/app Console/cake Reminder 
```

[从https://github.com/pankajkumarjha2010/cronjob-in-cakephp2.3.x](https://github.com/pankajkumarjha2010/cronjob-in-cakephp2.3.x)查看完整的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T00:35:17.730

对于 CakePHP 中的 cronjobs，您可以查看[http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html](http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html)。这对我来说很好。

但请注意，有时并非所有环境参数都可用。`env('HTTP_HOST')`在 cronjob 方法中访问时遇到了这个问题。但是考虑到这一点，应该没有问题。

# python - 如何在 OpenERP 6.1 中调试 python 代码

> ID：10087899
> 
> 赞同：1
> 
> 时间：2012-04-10T11:30:38.303
> 
> 标签：python, openerp

我正在使用 OpenERP 6.1，我无法通过在 python 代码中提供打印语句来调试 python 代码。

这在 OpenERP 6.0 中非常容易/可能，我们给出了服务器路径，后跟模块名称和数据库名称来调试代码。

我如何使用 OpenERP 6.1 实现这一目标？

请帮忙！！提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:44:48.190

要在 eclipse 中调试 Openerp+python 代码，请在调试透视图中启动 eclipse 并按照给定的步骤操作：

1：按“ctr+c”停止你的openERP运行服务器。

2：在 Eclipse 中，转到菜单“运行/调试配置”。在“Python Run”下的配置窗口中，创建新的调试配置（双击“Python Run”）。

3：创建新的调试配置后，请按照给定的步骤操作：

3.1：在“项目”下的“主”选项卡中，从工作区中选择“服务器”项目或文件夹（Openerp Server 所在的文件夹）。

3.2：在“主模块”下写入“openerp-server”的位置。

> 例如：${workspace_loc:server/openerp-server}。

3.3：在“程序参数”下的“参数”选项卡中，单击“变量”按钮，将出现新窗口。

3.4：然后单击“编辑变量”按钮创建新的“变量”，将出现新窗口。

3.5：按下“新建”按钮并将您的插件路径作为值。

> 例如：--addons ../addons,../your_module_path

3.6：在所有打开的窗口中按确定，然后“应用”。

4：现在进入“PyDev Package Explorer”视图，转到 6.1/server 并右键单击“openerp-server”文件，选择“Debug As --> Python Run”。

5：现在在“控制台”中你可以看到你的服务器已经启动了。

6：现在打开您要调试的 .py 文件并设置断点。

7：现在从'gtk'或'web-client'开始你的模块表单，当执行到达断点时执行将停止。

8：现在通过按“F5、F6、F7”来调试您的代码，您可以看到变量的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T09:22:07.240

嗨朋友你可以安装 ipython。使用 ipython，您可以在命令提示符下调试 openerp 6.1。请确保您已经安装了这些软件包。

```
sudo apt-get install python-dateutil python-feedparser python-gdata python-ldap python-libxslt1 python-lxml python-mako python-openid python-psycopg2 python-pybabel python-pychart python-pydot python-pyparsing python-reportlab python-simplejson python-tz python-vatnumber python-vobject python-webdav python-werkzeug python-xlwt python-yaml python-zsi 
```

我从 [http://www.theopensourcerer.com/2012/02/22/how-to-install-openerp-6-1-on-ubuntu-10-04-lts/ 获取了这份清单](http://www.theopensourcerer.com/2012/02/22/how-to-install-openerp-6-1-on-ubuntu-10-04-lts/)

你也可以试试pycharm。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T16:44:17.150

检查您是否拥有：

```
logfile = None 
```

在您的 openerp-server.conf 中，通过标准输出为您提供日志。

它有帮助吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T16:43:27.310

[我在Eclipse](http://www.eclipse.org/downloads/packages/eclipse-classic-372/indigosr2)和[PyDev](http://pydev.org/manual_101_root.html)下运行 6.1 服务器没有任何问题。这让我可以添加断点并单步执行代码。以下是我使用的论点：

```
--addons-path ${workspace_loc:openerp-addons-trunk},${workspace_loc:openerp-web-trunk}/addons --config ${workspace_loc:openerp-config/src/server.config} 
```

我发现最有用的两个断点位于 RPC 调用的两端。在服务器端，我在这一行放置了一个断点[`netsvc.dispatch_rpc()`](http://bazaar.launchpad.net/~openerp/openobject-server/6.1/view/4327/openerp/netsvc.py#L344)：

```
result = ExportService.getService(service_name).dispatch(method, params) 
```

我不经常调试客户端，而且并非所有请求都通过相同的路径，但一个有用的断点是[`rpc.tinySocket_gw.execute()`](http://bazaar.launchpad.net/~openerp/openobject-client/6.1/view/2101/bin/rpc.py#L123).

当然，这两个断点都看到了很多流量，所以我只有在探索一些我不熟悉的功能时才使用它们，而且我不知道代码会在哪里执行。在断点上设置条件也很有用，因此它仅在对特定模型或参数值的请求通过时触发。

这是我使用的配置文件：

```
[options]
debug_mode = False

admin_passwd = ******
db_user = ******
db_password = *******
price_accuracy = 5
smtp_server = **********
ftp_server_port = 8022
ftp_server_passive_ports = 8192:8447
translate_data = False
#log_level = debug_rpc_answer 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-07T13:38:21.277

第一的：`import logging`

然后 ：

```
def ExampleFunction(self,cr,uid,ids,context):
        log = logging.getLogger("ExampleClass -- ExampleFunction")
        log.info('test') 
        return True 
```

在您的 openerp 文件夹`/server/server/openerp-server.log`文件中，您将在`log.info`此处看到内容（ExampleClass -- ExampleFunction: test）

# c# - app.config 文件是存储密码的安全地方吗？

> ID：10087905
> 
> 赞同：11
> 
> 时间：2012-04-10T11:30:57.047
> 
> 标签：c#, .net, winforms, passwords, app-config

我需要在代码中存储机密密码。我不能使用散列技术，因为需要密码本身。如何将这些数据安全地存储在 app.config 文件中？

还有其他方法可以安全地完成此任务吗？

DPAPI 和 ProtectData 类不是一个选项，因为密钥是系统特定的，例如：连接字符串不能以这种方式存储用于不同的最终用户系统。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T12:45:53.490

您可以使用 DPAPI（数据保护 API）来加密配置文件的某些部分。您的代码仍将使用 ConfigurationManager，并且框架将负责解密。有关相同的更多信息，请参阅此模式和实践文档[How To: Encrypt Configuration Sections in ASP.NET 2.0 Using DPAPI](http://msdn.microsoft.com/en-us/library/ff647398.aspx)

**更新**

要加密或解密代码中的信息，您可以使用[ProtectedData.Protect](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.protect.aspx)和[ProtectedData.Unprotect](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.unprotect.aspx)。这可以作为安装程序中自定义操作的一部分运行，或者在用户在使用您的应用程序时输入凭据时运行。

**示例代码**

```
class SecureStringManager
{
    readonly Encoding _encoding = Encoding.Unicode;

    public string Unprotect(string encryptedString)
    {
        byte[] protectedData = Convert.FromBase64String(encryptedString);
        byte[] unprotectedData = ProtectedData.Unprotect(protectedData,
            null, DataProtectionScope.CurrentUser);

        return _encoding.GetString(unprotectedData);
    }

    public string Protect(string unprotectedString)
    {
        byte[] unprotectedData = _encoding.GetBytes(unprotectedString);
        byte[] protectedData = ProtectedData.Protect(unprotectedData, 
            null, DataProtectionScope.CurrentUser);

        return Convert.ToBase64String(protectedData);
    }
} 
```

# android - android中的后退按钮功能

> ID：10087912
> 
> 赞同：0
> 
> 时间：2012-04-10T11:31:46.863
> 
> 标签：android

暂时我的android设备中没有后退按钮，为此我需要实现后退按钮功能。

使用接近传感器或光传感器等传感器。因此，当用户点击或靠近手指接近时，前台的任何应用程序都应该返回到先前的活动（它应该像后退按钮一样）。

如何在安卓中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:34:32.683

你不能只打电话 onBackPressed() 吗？

# java - 如何使用 InterruptibleChannel？

> ID：10087914
> 
> 赞同：0
> 
> 时间：2012-04-10T11:31:58.117
> 
> 标签：java

我正在尝试在 Android 中实现一个使用蓝牙通信的线程。我希望线程即使在 I/O 阻塞时也是可中断的，所以[InterruptibleChannel](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/channels/InterruptibleChannel.html)似乎是一个很好的解决方案。我的问题是代码应该是什么样子？到目前为止，我似乎没有发送任何东西。这里是：

```
this.outstream = Channels.newChannel(outstream);
this.outstream.write(message); 
```

`outstream`我从蓝牙套接字派生的 OutputStream在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:51:07.383

假设您在评论中提到的计时器线程将在一定时间后中断通道，那么您需要处理两种情况，每种情况都有自己的已检查异常：

*   `close()`情况 1：当您的线程在 I/O 操作上被阻塞时，在通道上调用了另一个线程。您的呼叫`write`将中止，并带有`AsynchronousCloseException`.
*   情况 2：另一个线程`interrupt()`在阻塞 I/O 操作时调用了您的线程。您的呼叫`write()`将中止，并带有`ClosedByInterruptException`.

您可能希望更新代码以处理这些异常：

```
this.outstream = Channels.newChannel(outstream);
try {
    outstream.write(message);
}
catch(AsynchronousCloseException e) {
    System.out.println("Another thread closed the stream while this one was blocking on I/O!");
}
catch(ClosedByInterruptException e) {
    System.out.println("This thread has been interrupted while blocking on I/O!");
} 
```

请注意，合同规定只有*当当前线程在 I/O 操作中被阻塞时*`InterruptibleChannel`才会抛出这些异常。如果你的线程*没有*阻塞，那么这些异常都不会被抛出。在这种情况下，如果另一个线程关闭了通道，您可能会因为尝试写入已关闭的通道而获得不同的 IOException，并且如果您不注意当前线程的中断状态，它会继续写入。但是，由于接口未指定该情况的行为，因此由实现者决定要做什么。

# python - 用python按空格分割引用字符串的更有效方法？

> ID：10087915
> 
> 赞同：2
> 
> 时间：2012-04-10T11:32:04.337
> 
> 标签：python, lexical-analysis

最近我正在处理nginx分析工作与python的访问日志。

我找到了`shlex`根据[这个使用空格分割引用字符串的方法](https://stackoverflow.com/questions/79968/split-a-string-by-spaces-preserving-quoted-substrings-in-python)

但是真的很慢，分析2000行日志需要1.2秒多。我的 nginx 服务器每秒生成超过 2500 行。

所以我尝试过使用`re`或更多原生（和粗鲁）的方式来索引字符串。

这些代码在虚拟机中运行，对于 2000 行日志，两者都花费了大约 0.5 秒以上

我还有其他选择可以提高效率吗？

提前致谢

这是我的代码

```
import re
import time
import datetime
line = '0.278 0.264 113.116.52.174 - 10.10.3.41:20080  [08/Apr/2012:23:59:08 +0800] shenzhen.anjuke.com "GET /ajax/propext/?proid=104178677&commid=97047&brokerid=262646&rand=0.905798233768953 HTTP/1.0" 200 10914 "http://shenzhen.anjuke.com/prop/view/104178677" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; 360SE)" "-" "-" - "114.80.230.198 026AF756-C5DF-3EDA-B96A-F31A39F7C65E"'
def convert(line):
    line = re.split('\"', line)
    line_pre = re.split('\s+', line[0])

    r =re.compile(r"^((?:GET|POST|OPTIONS))\s+?.*HTTP\/1\.[10]$")
    http_method =r.findall(line[1])
    #http_method =re.findall(r"^((?:GET|POST|OPTIONS))\s+?.*HTTP\/1\.[10]$", line[1])
    if len(http_method):
        http_method = http_method[0]
    else:
        http_method = ''
    r = re.compile(r"^\s+(\d{1,3})\s+(\d+)")
    code_byte = r.findall(line[2])
    #code_byte = re.findall(r"^\s+(\d{1,3})\s+(\d+)", line[2])
    status = int(code_byte[0][0])
    bytes_sent = int(code_byte[0][1])
    r = re.compile(r":\d+$")
    upstream_addr = r.sub("", line_pre[4])
    request_time = int(float(line_pre[0])*1000)
    if line_pre[1] == '-':
        upstream_response_time = -1
    else:
        upstream_response_time = int(float(line_pre[1])*1000)
    remote_addr = line_pre[2]
    host = line_pre[7].replace(' ','')
    logdatetime = line_pre[5].replace('[','')
    dt = datetime.datetime.strptime(logdatetime, "%d/%b/%Y:%H:%M:%S")
    year = int(str(dt)[0:4])
    monthday = int(str(dt)[4:10].replace("-",""))
    hour = int(str(dt)[11:13])
    logtime = int(str(dt)[14:16])
    sec = time.mktime(dt.timetuple())
    r = re.compile(r"^[A-Z]+\s+?(.*)HTTP\/1\.[10]$")
    request_uri = r.findall(line[1])
    #request_uri = re.findall(r"^[A-Z]+\s+?(.*)HTTP\/1\.[10]$", line[1])
    http_referer = line[3]
    user_agent = line[5]
    gzip_ratio = line[7]
    http_x_forwarded_for = line[9]
    r = re.compile(r"^([0-9\.]+)\s+(.*)")
    serad_guid = r.findall(line[11])
    server_addr = serad_guid[0][0]
    guid = serad_guid[0][1]
    doc = {
                    "hour":hour,
                    "year":year,
                    "date":monthday,
                    "time":logtime,
                    "sec":sec,
                    "request_time":request_time,
                    "upstream_response_time":upstream_response_time,
                    "remote_addr":remote_addr,
                    "upstream_addr":upstream_addr,
                    "host":host,
                    "method":http_method,
                    "request_uri":request_uri,
                    #"request_protocal":"",
                    "status":status,
                    "bytes_sent":bytes_sent,
                    "http_referer":http_referer,
                    "user_agent":user_agent,
                    "gzip_ratio":gzip_ratio,
                    "http_x_forwarded_for":http_x_forwarded_for,
                    "server_addr":server_addr,
                    "guid":guid

    }
    return doc
t2 = time.time()
count =0
for i in range(12000):
    convert(line)
    count += 1
    if count % 2000 == 0:
    t1 = t2
        t2 = time.time()
        print str(t2-t1) 
```

和

索引方式

```
import time
import datetime
line = '0.278 0.264 113.116.52.174 - 10.10.3.41:20080  [08/Apr/2012:23:59:08 +0800] shenzhen.anjuke.com "GET /ajax/propext/?proid=104178677&commid=97047&brokerid=262646&rand=0.905798233768953 HTTP/1.0" 200 10914 "http://shenzhen.anjuke.com/prop/view/104178677" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; 360SE)" "-" "-" - "114.80.230.198 026AF756-C5DF-3EDA-B96A-F31A39F7C65E"'

def pair(l):
    for i in range(0, len(l), 2):
        yield (l[i], l[i+1])

def convert(line):
    line = line.replace("  ", "")
    quotes_positions = allindices(line, "\"")
    if len(quotes_positions) <= 0 or len(quotes_positions)% 2 != 0:
        return None

    space_positions = allindices(line, " ")

    target_positions = []

    for s in space_positions:
        true_target = True
        for qs, qe in pair(quotes_positions):
            if s > qs and s < qe:
                true_target = False
                break
        if true_target:
            target_positions.append(s)

    ret = []
    for i in range(0, len(target_positions)):
        if i + 1 == len(target_positions):
            ret.append(line[target_positions[i] + 1:])
        else:
            ret.append(line[target_positions[i] + 1:target_positions[i + 1]])
    return ret

# def allindices(string, sub, listindex=[], offset=0):
def allindices(string, sub):
    listindex = list()
    i = string.find(sub)
    while i >= 0:
        listindex.append(i)
        i = string.find(sub, i + 1)
    return listindex

t2 = time.time()
count =0
for i in range(12000):
    convert(line)
    count += 1
    if count % 2000 == 0:
    t1 = t2
        t2 = time.time()
        print str(t2-t1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:33:01.077

这看起来有点像 CSV；我想知道是否可以滥用 csv 模块来使用它？

```
>>> for row in csv.reader([line], delimiter=' '):
...     print repr(row)
... 
['0.278', '0.264', '113.116.52.174', '-', '10.10.3.41:20080', '', '[08/Apr/2012:23:59:08', '+0800]', 'shenzhen.anjuke.com', 'GET /ajax/propext/?proid=104178677&commid=97047&brokerid=262646&rand=0.905798233768953 HTTP/1.0', '200', '10914', 'http://shenzhen.anjuke.com/prop/view/104178677', 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; 360SE)', '-', '-', '-', '114.80.230.198 026AF756-C5DF-3EDA-B96A-F31A39F7C65E'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:36:15.850

只是根据示例行写了一个正则表达式，我实际上并不知道某些字段的含义，所以我为它们使用了占位符名称，您可以将它们重命名为更有意义的名称。在我的机器上，这个片段比你的第一个片段快 4~5 倍。

```
log_line_re = re.compile(
r"""
(?P<float1>[0-9.]+)
\s
(?P<float2>[0-9.]+)
\s
(?P<ip1>\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})
\s
(?P<field1>.+?)
\s
(?P<ip_port_1>\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}:\d{1,5})
\s+
\[(?P<request_date>.+?)\]
\s
(?P<host>.+?)
\s
"
(?P<http_method>[A-Z]+)
\s
(?P<request_path>.+?)
\s
HTTP/(?P<http_version>[0-9.]+)
"
\s
(?P<status_code>\d{3})
\s
(?P<number>\d+)
\s
"
(?P<referer>.+?)
"
\s
"(?P<user_agent>.+?)"
\s
"(?P<field2>.+?)"
\s
"(?P<field3>.+?)"
\s
(?P<field4>.+?)
"
(?P<ip2>\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})
\s
(?P<request_guid>.+?)
"
""", re.VERBOSE)

def convert(line):
    return log_line_re.match(line).groupdict() 
```

# python - 如何将 MoinMoin 集成到 Pyramid 中？

> ID：10087918
> 
> 赞同：0
> 
> 时间：2012-04-10T11:32:21.303
> 
> 标签：python, wsgi, moinmoin

有谁知道如何将 MoinMoin 集成到 Pyramide 中？有说明书吗？这个[pylons+moinmoin的相似性](http://wiki.pylonshq.com/display/pylonscookbook/A+Pylons+controller+with+MoinMoin+as+a+WSGI+callable)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:07:22.350

您可能想问“如何将任何 WSGI 应用程序集成到金字塔中”。

如果得到回答，您可以将其应用于 moin，因为它只是一个 WSGI 应用程序。

# wcf - vb 脚本中的 GUID（WCF 服务名字对象）

> ID：10087919
> 
> 赞同：0
> 
> 时间：2012-04-10T11:32:21.637
> 
> 标签：wcf, vbscript

我从 vbscript 调用的 Web 服务有问题。该服务有一个我需要调用的方法，它有一个 Guid 作为参数之一。我不知道如何将 guid 传递给 web 服务。像这样尝试过：

```
proxy.SiteExists "{A523D7D2-692A-4464-9B0F-FED023641F03}", "/site" 
```

代理对象（WCF 服务名字对象）的创建没有任何问题，我可以调用测试 ping 确定。以上导致以下错误消息：

```
"Type 'System.Collections.Generic.Dictionary`2[TKey, TValue]' 
cannot be exported as a schema type because it is an open generic type. 
You can only export a generic type if all generic parameter types are 
actual types." 
```

也许我传递参数的方式有问题，或者将 Guid 作为字符串传递不正确？

# java - 整数java的双端队列列表

> ID：10087922
> 
> 赞同：-1
> 
> 时间：2012-04-10T11:32:25.743
> 
> 标签：java, list, deque

这是我的SSCCE

[http://pastebin.com/rABzKgAx](http://pastebin.com/rABzKgAx)

[http://pastebin.com/SypQxApe](http://pastebin.com/SypQxApe)

我正在尝试使用 Deque of Integer 的数据结构列表。

所以我向双端队列添加了几个整数，然后将它添加到 finalList，但由于我使用双端队列进一步操作并删除元素，它也会从 finalList 中删除这些元素。那么我应该如何将这些项目保存到列表中呢？因为例如，我向 finalList 添加了 30 个元素，但是由于我从 Deque 中删除了原始项目，所以我在 finalList:/ 中只有 30 个空元素。您可以从代码中读取其余部分，在第 57 行，stdout 上有一个输出，它返回空字符串，因此您可以看到问题所在。

所以问题是我只复制对对象的引用，而不是对象，那么我应该如何复制对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:37:07.547

`final`仅表示以后不能更改该变量以指向另一个列表，并不意味着该列表不能更改。如果您需要原始列表，则必须在更改之前复制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:39:20.547

这是使用调试器很有帮助的地方。

您正在使用

```
finalList.add(tokens); 
```

并假设您添加了列表的副本，但您只是添加了对列表的引用的副本。

所以

```
 tokens.add(token);
            Func(places, index+1, tokens);
            tokens.removeLast(); 
```

删除它添加的每个元素，并且列表为空。

看来您的意图是

```
 finalList.add(new LinkedList<Integer>(tokens)); 
```

# actionscript-3 - 多个文本颜色在一个火花中：TextInput

> ID：10087924
> 
> 赞同：2
> 
> 时间：2012-04-10T11:32:39.407
> 
> 标签：actionscript-3, apache-flex, colors, textinput, flex-spark

如何在**spark:TextInput**中用*两种或多种颜色*为单词着色？

我使用带有**htmlText属性的****mx:TextInput做到了，但我在****spark**组件中找不到它。

 ****谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:25:32.210

```
<s:TextArea id="txt_ar"  textAlign="justify"
borderAlpha="0" editable="false"> 
```

然后写你的html字符串

```
textrichtml:String = "your html string" 
```

然后使用以下代码。

```
txt_ar.textFlow = TextConverter.importToFlow(textrichtml,TextConverter.TEXT_FIELD_HTML_FORMAT); 
```****

# asp.net-mvc-3 - 模态对话框内的部分视图不起作用（jQuery）

> ID：10087927
> 
> 赞同：0
> 
> 时间：2012-04-10T11:32:45.500
> 
> 标签：asp.net-mvc-3, jquery-ui, jqgrid

我在 JQGRID 中有一个带有两个控件（文本框和按钮）的列，单击按钮我应该显示一个包含部分视图内容的对话框。这是我正在使用的代码：

```
function RenderModalPopup(rowid, event) {
    debugger;

    $("#dvedit_showDialog").dialog({
        modal: true,
        autoOpen: false,
        width: 500,
        height: 800
    });

    $.ajax({
        url: '/Edit/GetPopupPartial',
        type: 'POST',
        success: function () {
            debugger;
            //$('#dvedit_showDialog').html(Data);
            $('#dvedit_showDialog').load("@Url.Action('GetPopupPartial','Edit')").dialog('open');

        }
    });
} 
```

我的意图是我需要创建一个可以在整个项目中重复使用的模式对话框。部分观点可能会有所不同。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:40:05.430

首先加载局部视图，然后创建模态对话框。

```
$.ajax({
            url: '/Edit/GetPopupPartial',
            type: 'POST',
            success: function (data) {
                debugger;
                $('#dvedit_showDialog')
                    .html(data)
                    .dialog({
                        modal: true,
                        autoOpen: true,
                        width: 500,
                        height: 800
                    });

           }
        }); 
```

# spring - Spring maven 依赖项未复制到 WEB-INF/lib 文件夹中

> ID：10087928
> 
> 赞同：0
> 
> 时间：2012-04-10T11:32:46.883
> 
> 标签：spring, gwt, maven

在我在 POM 中添加 Spring 依赖项之前，我有一个有效的 GWT-App Engine Web 项目。现在，当我运行应用程序时，会引发此错误（最终应用引擎不会加载）：

> java.lang.ClassNotFoundException：org.springframework.web.context.ContextLoaderListener

我认为问题在于 Spring jar 没有复制到 WEB-INF/lib 文件夹中，因为我看不到那个文件夹中的那些。

任何想法如何将 Spring jar 复制到该文件夹​​？

**更新：**

[这是完整的 POM.xml](http://pastebin.com/86qFkhMx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:54:46.213

我认为你应该添加

```
<packaging>war</packaging> 
```

后

```
<groupId>mygwtapp</groupId>
<artifactId>mygwtapp</artifactId>
<version>0.0.1-SNAPSHOT</version> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:56:59.260

添加`<packaging>war</packaging>`. 当前，Maven 不会将任何依赖项工件复制到`WEB-INF/lib`其中，因为这是`jar`您迄今为止用于此工件的默认打包行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:34:49.297

将它们作为 Maven 依赖项添加到您的战争中，并确保它们的范围未“提供”。

# c# - 为什么 IPAddress 有时会抛出 ArgumentOutOfRangeException？

> ID：10087929
> 
> 赞同：9
> 
> 时间：2012-04-10T11:32:49.817
> 
> 标签：c#

我只是想调试以下异常：

```
Exception has been thrown by the target of an invocation.: System.Reflection.TargetInvocationException: 
Exception has been thrown by the target of an invocation. ---> 
System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values.
Parameter name: newAddress
   at System.Net.IPAddress..ctor(Int64 newAddress) 
```

这是有问题的代码：

```
int hostToNetworkOrder = IPAddress.HostToNetworkOrder( (int)computer.IpAddress );
IPAddress ipAddress = new IPAddress( hostToNetworkOrder ); 
```

`computer.IpAddress`设置为`1582281193`。这将转换为`hostToNetworkOrder`，即`-374255778`。

现在，如果我尝试`new IPAddress( -374255778 );`在 Visual Studio 的即时窗口中构建，我会得到一个包含正确 IP 地址的 IPAddress 对象。

但是如果我越过代码中的那一行，它**总是**会抛出一个 ArgumentOutOfRangeException。为什么？

* * *

## 更新

我知道我的意见是负面的，很可能是这个问题的根源。这就是我解决它的方法：

```
UInt32 hostToNetworkOrder = (UInt32)IPAddress.HostToNetworkOrder( (Int32)computer.IpAddress );
IPAddress ipAddress = new IPAddress( hostToNetworkOrder ); 
```

我仍然不明白为什么它在立即窗口中起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T12:03:14.970

查看 ILSpy 中的 IPAddress 类，有一个内部构造函数采用 int 并且不执行参数超出范围检查 - 我感觉它可能在监视窗口中调用该构造函数，但在实际代码中它调用public ctor(long)，它确实验证了这个数字。

为了测试我的理论，我只是尝试了这段代码：

```
var ipAddress = (IPAddress) typeof (IPAddress)
                                        .GetConstructor(
                                            BindingFlags.NonPublic | BindingFlags.Instance,
                                            null,
                                            new[] {typeof (int)},
                                            null)
                                        .Invoke(new object[] {hostToNetworkOrder }); 
```

而且，果然，IPAddress 类的构造没有错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:39:20.263

> 我仍然不明白为什么它在立即窗口中起作用。

这是你问题的症结所在。您不指望的是用于在即时窗口中解析您的表达式的调试器表达式评估器的有些奇怪的行为。最好使用具有类似于 IPAddress 的代码的示例解决方案来演示这一点。创建一个控制台模式项目并添加一个类库项目。使类库源代码文件如下所示：

```
using System;

namespace Foo {
    public class Test {
        public string how;
        internal Test(int arg) { how = "internal"; }
        public Test(long arg) { how = "public"; }
        public string ToString() { return how; }
    }
} 
```

控制台应用程序的 Program.cs 文件如下所示：

```
using System;
using Foo;

class Program {
    static void Main(string[] args) {
        new Test(999);
    }   // <== set breakpoint here
} 
```

当断点命中时，按 F5 并切换到“立即”窗口。类型：

```
new Foo.Test(-1).ToString() 
```

你会看到：

```
"internal" 
```

**它选择了*内部*构造函数而不是公共构造函数**

与 IPAddress 发生的事情相同，它有一个内部构造函数，该构造函数接受一个不检查参数的 int。虽然这听起来像一个错误，但提供对私有和内部成员的访问是正常的调试器行为。通常，请始终牢记调试器表达式求值器*不是*由 C# 编译器驱动的。它没有使用与语言完全相同的规则，也没有像语言那样具有完全的表现力。希望 Roslyn 项目完成后的某一天会有所改善。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:47:12.113

`System.ArgumentOutOfRangeException`当 ip 地址低于零或高于 0x00000000FFFFFFFF 时，您会得到一个，如此处[所示](http://msdn.microsoft.com/en-us/library/13180abx.aspx)。

IPAddress 构造函数接受一个 long 类型的参数（一个 64 位整数），但是您传递给它的是一个 32 位整数，该整数将被转换为一个 long。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T06:37:56.697

我遇到了同样的问题，我正在将 IP 转换为 int32：

```
 Int32 IP1 = Convert.ToInt32(arrIP[0]);
    Int32 IP2 = Convert.ToInt32(arrIP[1]);
    Int32 IP3 = Convert.ToInt32(arrIP[2]);
    Int32 IP4 = Convert.ToInt32(arrIP[3]);
    long ipInt = IP1 + (IP2 * 256) + (IP3 * 256 * 256) + (IP4 * 256 * 256 * 256);
    IPAddress ipadr = new IPAddress(ipInt);
    IPEndPoint ipe = new IPEndPoint(ipadr, port); 
```

对于某些 IP，它正在转换为负数。我所做的唯一更改是使用 int64，它解决了我的问题。

```
 Int64 IP1 = Convert.ToInt64(arrIP[0]);
        Int64 IP2 = Convert.ToInt64(arrIP[1]);
        Int64 IP3 = Convert.ToInt64(arrIP[2]);
        Int64 IP4 = Convert.ToInt64(arrIP[3]); 
```

# c# - 如何使用silverlight禁用对htmlpage的右键单击？

> ID：10087931
> 
> 赞同：0
> 
> 时间：2012-04-10T11:33:02.980
> 
> 标签：c#, asp.net, silverlight-4.0

我最近开始在 Silverlight 应用程序中进行编码。我对此没有很好的想法。现在我在 HTML 页面中禁用右键单击 Silverlight 应用程序时遇到问题。我尝试了很多事情但没有成功。请帮助我**如何使用 silverlight 禁用对 htmlpage 的右键单击**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:41:16.280

如果您可以在这里使用 javascript 是您的答案，但通常不建议禁用右键单击。这会惹恼一些用户。

```
<script type="text/javascript" >
        var BM = 2; // button middle
        var BR = 3; // button right
        var msg = "MOUSE RIGHT CLICK IS NOT SUPPORTED ON THIS PAGE";

        function mouseDown(e) {
            try { if (event.button == BM || event.button == BR) { return false; } }
            catch (e) { if (e.which == BR) { return false; } }
        }
        document.oncontextmenu = function() {  return false; }
        document.onmousedown = mouseDown;
   </script> 
```

# python - 编写一个遍历字符串列表并以 int 形式返回不同单词的 int 数量的函数

> ID：10087933
> 
> 赞同：-4
> 
> 时间：2012-04-10T11:33:15.367
> 
> 标签：python

我必须编写一个函数 count_words()，它接受一个字符串列表并以 int 的形式返回该列表中不同单词的 int 数量。清单如下：

```
List = ['twas', 'brillig', 'and', 'the', 'slithy', 'toves', 'did', 'gyre',
        'and', 'gimble', 'in', 'the', 'wabe', 'all', 'mimsy'] 
```

我已经尝试使用以下代码进行操作：

```
def count_words(url): #this is the first line of the code but it was not included with the lines below for some reason.

    mylist = function(url)  #the function function(url) reads through the url and returns all words from the website in a list of strings. 
    counts = 0
    for i in mylist:
        if i not in mylist:
            counts = counts + 1
        else:
            continue
        return counts 
```

从这里我不知道该怎么办。我收到“for i in mylist”行的错误，我不知道如何解决。我仍然是初学者，所以非常基本的答案就可以了。我不介意我是否必须更改整个代码。我唯一不能改变的是 'mylist = function(url)' 行，因为该部分有效，我们必须包含它。

我回来的错误是：

```
 Traceback (most recent call last):
    File "<web session>", line 1, in <module>
    File "/home/karanyos/foc/proj1-karanyos/karanyos.py", line 24, in count_words
       for i in mylist:
 TypeError: 'NoneType' object is not iterable 
```

提前致谢，

基利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:38:56.863

提示：使用[模块`collections`。](http://docs.python.org/library/collections.html)

至于您的代码，还有一些关于样式和其他事项的额外提示：

*   不要使用这个词`function`作为函数的名称。`function`是一个“特殊”词，将其用作普通的旧函数名称会掩盖其特殊含义。
*   不要`i`对循环变量使用单字母名称 ( ) ** - 使用描述性名称。这里`for word in mylist:`是合适的。
*   您的代码有逻辑错误 - 如果 a`word`出现在列表中，根据定义`word in list == True`。所以`counter`永远不会超过零。

* * *

** 旁注：单字母变量名的风格不好，因为它们没有提供有关变量*含义*或它应该*包含*什么的信息。我个人只认为`n`,和`m`,是数学代码中可接受的循环变量名称，并且只有在以与数学家使用. 这是出于[历史原因。](https://stackoverflow.com/questions/4137785/why-are-variables-i-and-j-used-for-counters)`p``i``j``k``n,m,p i,j,k`

* * *

寻找逻辑错误的提示：

```
# Relevant part of your code
my_list = ['a','b','c','d']
for item in my_list:
    if item in my_list:
        print "item %s in list" % item
    else:
        print "item %s not in list" % item 
```

输出是：

```
item a in list
item b in list
item c in list
item d in list 
```

这是因为上面的代码是一个重言式：你从一个列表中获取一个值，他们立即询问该值是否出现在该列表中。答案**总是**“是”。

这不是您真正想要的逻辑测试。你真正想做的是跟踪你已经看过的单词。也许您需要一些方法来记录您已经看过哪些单词？或者您可能只需要一段神奇的代码来记录您看到的所有独特单词？（提示：查看`collections`模块。）

一般来说，学习如何使用调试器也会对您有好处。这将让您在程序执行时查看程序的中间状态。`Spyder`是一个带有`pdb`调试器集成（以及许多其他不错的功能）的 Python IDE。检查一下。

* * *

**编辑 4：**您提到您尝试使用该`collections`模块 - 对您有好处！- 但是输出不合适，因为你“需要返回一个`int`”。

沉思于此：

```
>>> import collections
>>> my_string = "abc aabc ccab a acbbbaa"
>>> my_counter = collections.Counter(my_string)
>>> my_counter
Counter({'a': 8, 'b': 6, 'c': 5, ' ': 4}) 
>>> my_counter.keys() # Get a list of unique things in the counter
['a', ' ', 'c', 'b']
>>> 
```

你知道如何确定列表中有多少东西吗？

**提示2：**你可以通过调用一个对象来查看它的属性`dir()`。如果你不知道你可以对一个对象做什么，或者你可以在一个对象上调用什么方法，这样做来找出：

```
>>> dir(my_counter)
['__add__', '__and__', '__class__', '__cmp__', '__contains__', '__delattr__',
 '__delitem__', '__dict__', '__doc__', '__eq__', '__format__', '__ge__',
 '__getattribute__', '__getitem__', '__gt__', '__hash__', '__init__',
 '__iter__', '__le__', '__len__', '__lt__', '__missing__', '__module__',
 '__ne__', '__new__', '__or__', '__reduce__', '__reduce_ex__', '__repr__',
 '__setattr__', '__setitem__', '__sizeof__', '__str__', '__sub__',
 '__subclasshook__', '__weakref__', 'clear', 'copy', 'elements', 'fromkeys',
 'get', 'has_key', 'items', 'iteritems', 'iterkeys', 'itervalues', 'keys',
 'most_common', 'pop', 'popitem', 'setdefault', 'subtract', 'update', 'values',
 'viewitems', 'viewkeys', 'viewvalues'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:36:21.043

(1) 该[`collections`](http://docs.python.org/library/collections.html)库有一个类允许您执行此操作。

(2) 如果您想自己实现此功能，只需使用 a `set`，并取其`len`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:01:11.403

回归本源，

如果您使用的是 IDE（比如 IDLE），请学习如何调试代码。你可以开始使用[pdb弄脏你的手](http://docs.python.org/library/pdb.html)

有时只用简单的`print`语句记录就足以找出根本原因。

1.  调用后变量 mylist 的值是多少`function(url)`
2.  错误信息说什么？你看到类似的东西`TypeError: 'NoneType' object is not iterable`吗？

解决你的问题。来自其他语言的人很少不习惯 Python 提供的数据结构和库。

所以你知道有一个叫做[set](http://docs.python.org/library/stdtypes.html#set)的东西会从重复列表中生成一个唯一的项目列表吗？你知道有一个 python 内置函数[len](http://docs.python.org/library/functions.html#len)可以返回一个对象的长度吗？

如果您仍然面临完成此操作的问题。请重新开始[Python 的非正式介绍](http://docs.python.org/tutorial/introduction.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T11:44:51.397

```
import collections

collections.Counter(['twas', 'brillig', 'and', 'the', 'slithy', 'toves', 'did', 'gyre', 'and', 'gimble', 'in', 'the', 'wabe', 'all', 'mimsy']) 
```

这将返回

```
s = Counter({'and': 2, 'the': 2, 'slithy': 1, 'brillig': 1, 'gyre': 1, 'gimble': 1, 'did': 1, 'in': 1, 'all': 1, 'toves': 1, 'mimsy': 1, 'twas': 1, 'wabe': 1}) 
```

您可以从这里轻松获得结果

```
>>> count = 0 
>>> for a in s:
...     if s[a] == 1:
...         count = count + 1
>>> print count 
```

# android - Android 应用程序在第二次启动时冻结

> ID：10087941
> 
> 赞同：1
> 
> 时间：2012-04-10T11:33:55.773
> 
> 标签：android, dialog, webview, cocos2d-iphone, launch

我正在为 android 开发游戏，我一直在尝试实现一个对话框来显示 web 横幅广告的 webview。（我正在使用 cocos2d 进行开发）。我使用静态方法 ads() 静态打开对话框。但是，自从这样做以来，我开始遇到问题。

在第一次启动时，它运行良好，但是当应用程序关闭并重新打开时，“openscreen”场景开始但随后不播放运行淡入淡出或继续进入菜单场景。

活动（ads() 方法所在的位置）

```
package wingdev.defence;

import java.util.Timer;
import java.util.TimerTask;
import org.cocos2d.layers.CCScene;
import org.cocos2d.nodes.CCDirector;
import org.cocos2d.opengl.CCGLSurfaceView;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.webkit.WebView;
import android.widget.Button;

public class DefenceActivity extends Activity{
        protected CCGLSurfaceView _glSurfaceView;
        public static int highscore = 0;
        public static int mode= Activity.MODE_PRIVATE;
        public static SharedPreferences  mySharedPreferences ;
        public static String CurrentLevel = "";
        public static boolean firstlaunch=true;
        public static int screenforchoice = 0;
        public static boolean choicemade=false;
        public static boolean choice=false;
        public static DefenceActivity  context;

            @Override
                    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON, WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
            _glSurfaceView = new CCGLSurfaceView(this);
            setContentView(_glSurfaceView);
            CCScene scene = OpenScreen.scene();
            CCDirector.sharedDirector().runWithScene(scene);
        }

        @Override

        public void onStart()

        {
            super.onStart();
            CCDirector.sharedDirector().attachInView(_glSurfaceView);
            CCDirector.sharedDirector().setDeviceOrientation(CCDirector.kCCDeviceOrientationLandscapeLeft);

            CCDirector.sharedDirector().setAnimationInterval(1.0f / 60.0f);
            mySharedPreferences=getSharedPreferences("HighScore",mode);
            highscore= mySharedPreferences.getInt("HighScore",0);
            SharedPreferences.Editor editor= mySharedPreferences.edit();
                editor.remove("HighScore");
                editor.putInt("HighScore", highscore);
                editor.commit();
                CCScene scene = OpenScreen.scene();
            CCDirector.sharedDirector().runWithScene(scene);
            Config.context = this;
            context = this;
            }
        public void startgame()
            {
            CCDirector.sharedDirector().attachInView(_glSurfaceView);

            CCDirector.sharedDirector().setDeviceOrientation(CCDirector.kCCDeviceOrientationLandscapeLeft);;

            CCDirector.sharedDirector().setAnimationInterval(1.0f / 60.0f);

            CCScene scene = GameLayerSurvival.scene();
            CCDirector.sharedDirector().runWithScene(scene);

            }
        @Override
        public void onPause()
        {
            super.onPause();
            CCDirector.sharedDirector().pause();
        }

        @Override
        public void onResume()
        {
            super.onResume();
        }
        @Override
        public void onStop()
        {
            super.onStop();
            finish();

            CCDirector.sharedDirector().end();
        }
        static public void newhighscore()
        {if(GameLayerSurvival.score>highscore){
        highscore=GameLayerSurvival.score;
        }
        SharedPreferences.Editor editor= mySharedPreferences.edit();
        editor.remove("HighScore");
        editor.putInt("HighScore", highscore);
        editor.commit();
        }

        public static void ads(){
        context.runOnUiThread(new Runnable() {
        public void run() {
        final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.main);
        dialog.setTitle("Advert");
        dialog.setCancelable(true); 
        WebView mWebView = (WebView) dialog.findViewById(R.id.webbanner);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.loadUrl("http://www.example.co.uk/");
        Button bc_btn1 = (Button) dialog.findViewById(R.id.button1);
        bc_btn1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v){
                killDialog(dialog);
            }
        });
        dialog.show();
            }
        });
        }
        public static void killDialog(Dialog dialog){
            dialog.cancel();
        }
} 
```

Openscreen - 启动时使用的第一个场景

```
package wingdev.defence;

import org.cocos2d.actions.instant.CCCallFunc;
import org.cocos2d.actions.interval.CCDelayTime;
import org.cocos2d.actions.interval.CCFadeIn;
import org.cocos2d.actions.interval.CCFadeOut;
import org.cocos2d.actions.interval.CCSequence;
import org.cocos2d.layers.CCColorLayer;
import org.cocos2d.layers.CCScene;
import org.cocos2d.nodes.CCDirector;
import org.cocos2d.nodes.CCLabel;
import org.cocos2d.nodes.CCSprite;
import org.cocos2d.types.CGSize;
import org.cocos2d.types.ccColor4B;

public class OpenScreen extends CCColorLayer {

CCLabel _start; 
CCLabel _easy; 
CCLabel _normal; 
CCLabel _highscore; 
CCLabel _howto; 
CCLabel _hard; 
CCLabel _reset;
CCSprite wingdev = CCSprite.sprite("wingdevpresents.png");
CCSprite darkorange = CCSprite.sprite("PirateTea.png");
CCSprite plane = CCSprite.sprite("plane.png");
CCSprite back2 = CCSprite.sprite("black.png");
public static CCScene scene()
{ 
    //
    CCScene scene = CCScene.node();
    CCColorLayer layer = new OpenScreen(ccColor4B.ccc4(255, 255, 255, 255));
    scene.addChild(layer);

    return scene;
}
protected OpenScreen(ccColor4B color) {
super(color);
CGSize winSize = CCDirector.sharedDirector().displaySize();
this.setIsTouchEnabled(true);
back2.setPosition(winSize.width / 2.0f, winSize.height / 2.0f);
back2.setScaleX(winSize.width / back2.getContentSize().width);
back2.setScaleY(winSize.height / back2.getContentSize().height);
addChild(back2);
wingdev.setPosition(winSize.width / 2.0f, winSize.height / 2.0f);
wingdev.setScaleX(winSize.width / wingdev.getContentSize().width);
wingdev.setScaleY(winSize.height / wingdev.getContentSize().height);
addChild(wingdev);
wingdev.runAction(CCSequence.actions(CCFadeIn.action(1.0f),CCDelayTime.action(2.0f),CCFadeOut.action(1.0f), CCCallFunc.action(this,"openscreen2")));
}
public void openscreen()
{   
    CCDirector.sharedDirector().replaceScene(Menu.scene());
}
public void openscreen2(){
    CGSize winSize = CCDirector.sharedDirector().displaySize();
    removeChild(wingdev,true);
    darkorange.setPosition(winSize.width / 2.0f, winSize.height / 2.0f);
    darkorange.setScaleX(winSize.width / darkorange.getContentSize().width);
    darkorange.setScaleY(winSize.height / darkorange.getContentSize().height);
    addChild(darkorange);
        darkorange.runAction(CCSequence.actions(CCFadeIn.action(1.0f),CCDelayTime.action(2.0f),CCFadeOut.action(1.0f),CCCallFunc.action(this,"openscreen")));
}
} 
```

任何有助于理解我哪里出错的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:44:37.063

你暂停你的 CCDirector

```
 @Override
 public void onPause()
 {
  super.onPause();
  CCDirector.sharedDirector().pause();
 } 
```

我认为您需要在 onResume() 中重新启动它

```
 @Override
 public void onResume()
 {
  super.onResume();
  CCDirector.sharedDirector().resume();
 } 
```

如果应用程序没有被杀死，onStart() 将不会被调用。

[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

# automation - 在 C++ 项目中调用 OpenXML 对象

> ID：10087942
> 
> 赞同：0
> 
> 时间：2012-04-10T11:34:01.157
> 
> 标签：automation, c++-cli, openxml

如何使用 OpenXML 调用 C++/CLi 中的 DocumentFormat 和其他相关对象作为添加到程序中的引用。我找不到任何关于如何调用这些对象的文档。“使用 DocumentFormat.OpenXML.Package”在 c++ 项目中给出错误，如下所示：“1>clitest.cpp(7): error C2143: syntax error: missing ';' 前 '。' 1>clitest.cpp(7): 错误 C2873: 'DocumentFormat': 符号不能用于 using-declaration 1>clitest.cpp(7): error C2059: 语法错误: '.' " 但是我添加了 DocumentFormat，作为我项目的参考。

问候瑜伽士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:38:41.750

C++ 命名空间语法使用 :: 作为分隔符。此代码编译::

```
#include "stdafx.h"
using namespace System;
using namespace DocumentFormat::OpenXml::Packaging; 

int main(array<System::String ^> ^args)
{
    WordprocessingDocument^ doc = WordprocessingDocument::Create("C:\\mydoc.xdoc",DocumentFormat::OpenXml::WordprocessingDocumentType::Document);    
} 
```

# php - Gentoo 用 postgresql 安装 php 和用 postgresql 安装 pdo

> ID：10087943
> 
> 赞同：0
> 
> 时间：2012-04-10T11:34:07.287
> 
> 标签：php, postgresql, gentoo

我已经安装了`php`，现在我想`postgresql`在 php.ini 中安装支持。我已经在我的`postgres`and中添加了and但是仍然编译了 php`pgsql``/etc/make.conf``/etc/portage/package.use``--without-pdo-pgsql`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:06:20.980

您在猜测 USE 标志。您需要启用的是`postgres`. 安装并运行 ufed 以查看有效 USE 标志的完整列表。

# solr - solr：如何获取整个语料库中的关键字数量？

> ID：10087944
> 
> 赞同：0
> 
> 时间：2012-04-10T11:34:08.313
> 
> 标签：solr

我正在使用 solr 建立的引擎对 PMI 进行研究。我想获取语料库中的关键字数量（而不是 numofDocs）。有没有直接的方法来获得这个？另一个问题：我可以在solr系统中搜索包含逻辑运算符（例如NEAR）的搜索吗？或类似的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:19:56.127

`NEAR`是“邻近搜索”；[solr 以“草率的短语查询](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_search_for_one_term_near_another_term_.28say.2C_.22batman.22_and_.22movie.22.29)”的形式提供了类似的东西，其形式如下：

```
field:"phrase of words"~10 
```

这`10`是短语中的单词必须有多接近。

# windows - 在 Windows 上的两个网络套接字之间传输数据

> ID：10087945
> 
> 赞同：3
> 
> 时间：2012-04-10T11:34:10.050
> 
> 标签：windows, sockets, haskell, network-programming

1.  给定两个网络套接字，在不以任何方式接触内容的情况下，将数据从一个连接到另一个的最有效方法是什么？

2.  有没有一种方法（系统调用 API）来管理内核空间中的套接字到套接字数据管道，类似于[`splice`Linux 上提供的](http://kerneltrap.org/node/6505)方法？这就是我`splice`目前在 Haskell 中使用的方式：[使用 GNU/Linux 系统调用 `splice` 在 Haskell 中进行 Socket 到 Socket 数据传输的零拷贝](https://stackoverflow.com/questions/10080670/using-gnu-linux-system-call-splice-for-zero-copy-socket-to-socket-data-transfe)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:11:18.760

Windows 上的零拷贝 API 称为 TransmitFile。它读取文件句柄并写入套接字 - 它通常用于从 Web 服务器提供静态文件。我认为你可以提供一个套接字句柄作为文件句柄，因为你通常可以，即使在 Windows 上也是如此。如果是这样，那应该可以解决您的问题。我不确定，因为我没有尝试过，而且文档在这一点上没有明确说明。虽然它是*零*拷贝 API，所以如果它不起作用，呃，它当然应该。

# silverlight - 按 DisplayValue 对 Silverlight DataGridComboBoxColumn 进行排序

> ID：10087948
> 
> 赞同：0
> 
> 时间：2012-04-10T11:34:21.480
> 
> 标签：silverlight, datagridcomboboxcolumn

我有 SL DataGridComboboxColumn。我已将 SortMemberPath 设置为与 DisplayMemberPath 相同；并且排序不会发生。如果我将 SortMemberPath 设置为与 ValueMemberPath 相同，则会发生排序。但我需要按照 DisplayMember 进行排序。我试过了

```
 Public Function CompareTo(obj As Object) As Integer Implements System.IComparable.CompareTo
        Return Me.Name.CompareTo(CType(obj, Person).Name)
    End Function 
```

没运气 ：（

有什么帮助吗？？

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:01:45.160

我也有同样的问题。从我所做的研究来看，这是因为底层的 CollectionViewSource 正在进行排序，而 CVS 不知道组合列的任何显示成员（只有值成员/外键），因此它无法按该字段排序。

我想出的唯一解决方案是将 ReadOnly 属性 (AutoGenerateField:=False) 添加到网格数据源，但这是一个垃圾解决方案。

我很惊讶这个问题的报道很少，希望有人有更好的解决方案......

# android - 带有正则表达式的过滤器适配器

> ID：10087955
> 
> 赞同：4
> 
> 时间：2012-04-10T11:34:58.660
> 
> 标签：android, regex, filter, android-listview

我已经实现了一个列表视图和一个过滤列表视图中数据的编辑框。我用

```
myAdapter.getFilter().filter(txt); 
```

当 txt 包含我数据开头的字符序列时，它工作正常。例如，对于值“这是我的值”和过滤“值”，它会通过过滤器，但是当我删除“v”并且过滤文本为“alue”时，过滤器会将其从适配器中删除。

有没有办法（除了实现我自己的过滤器）通过正则表达式或类似的东西进行过滤。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-12T13:28:52.817

听起来您在“完全匹配”与“部分匹配”语义方面存在问题。

1.  你可以尝试一个领先的`.*`.
2.  你可以玩一个像`^`.

# android - Android 风格主题

> ID：10087958
> 
> 赞同：1
> 
> 时间：2012-04-10T11:35:19.530
> 
> 标签：android, android-layout

我正在构建一个应用程序，并且我想构建一个具有自定义 UI 元素（如 Dropbox/Instagram 中的元素）的应用程序。我不想使用原生元素进行构建。

我看到 Android 允许您为元素设置[主题。](http://developer.android.com/guide/topics/ui/themes.html)现在我正在寻找的是类似 Android 主题的“Twitter Bootstrap”。试过搜索，没找到。有什么帮助吗？

# linux - 如何知道 libspotify 是否可以在我的设备上使用

> ID：10087960
> 
> 赞同：0
> 
> 时间：2012-04-10T11:35:26.793
> 
> 标签：linux, spotify

我拥有一个 VU+ Duo，它是一个类似于 Dreambox 的 SAT 接收器。我还订阅了 Spotify Premium，并且有兴趣为我的设备开发 Spotify 插件。

我可以从 Spotify 开发者页面访问为不同处理器架构编译的 libspotify 库。但是，我找不到足够的信息来确定这些库中的任何一个是否可以在我的设备上运行。我只知道它有一个博通 BCM7335 芯片组。

所以基本上我的问题是：我如何确定任何提供的 Spotify 库是否适用于 VU+。对不起，如果这是一个愚蠢的问题，但我以前从未在基于 Linux 的平台上开发过。只有窗户。所以我的知识比较有限。但我愿意学习它。但首先我想知道这是否值得付出努力。

谁能给我提供一些细节。基本上，我想知道的是：是否有一个 Linux 命令可以告诉我：是或否，这个设备可以使用给定的库吗？或者也许我需要编写一个使用该库的基本程序并查看它的编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:58:58.140

看起来 BCM7335 芯片组使用 MIPS，并且 Spotify 开发者网站上没有可用的 libSpotify 的 MIPS 构建，所以它怀疑你能否走得很远。

# ruby-on-rails - 发送自动邮件

> ID：10087961
> 
> 赞同：1
> 
> 时间：2012-04-10T11:35:35.347
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, email

我目前正在开发一个基于 ruby​​ on rails 的项目。该网站的一项特殊功能包括通过邮件及时发送通知，其中包含网站上发布的所有帖子的摘要。邮件的发送默认间隔为 30 天。因此，每个用户在不同的日子收到一封邮件，这取决于他的注册日期以及最后一封发送的新闻信函的日期，这是与用户相关的数据之一。

但现在我正在考虑向时事通讯添加设置，以便用户可以配置他想要获取时事通讯的时间间隔。因此，我不想根据最后一封新闻信的发送日期发送时事通讯，而是想在每月的特定日期将时事通讯发送给所有用户。

例如，如果用户希望每周接收一份时事通讯，它将在每周的每个星期日发送。每月的时事通讯将在每个月的 1 日发送，依此类推。

我想到的一种方法是创建一个用于发送时事通讯的基类，然后为每月、每周……等等创建子类，以利用 ruby​​ 的面向对象特性。但我不确定这是否是解决问题的最佳方法。

我想知道是否有其他方法可以解决这个问题。我不需要 ruby​​ on rails 解决方法，任何有使用任何其他编程语言解决此问题的经验的人都可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:41:25.887

我不觉得每月/每天/每周的电子邮件不同到足以值得不同的课程。就我个人而言，我将处理此问题的方式是存储用户所需的邮寄频率，然后存储用户的下一个电子邮件日期。

找出今天需要电子邮件的人只是在下一个电子邮件到期日期之前选择用户（如果您索引该列，这将很快）。当您发送电子邮件时，将列更新为今天 + 适当的偏移量。如果用户在那里更改偏好，则重新计算他​​们的下一个电子邮件日期。您可以通过记录每次向用户发送时事通讯（由于其他原因可能是有趣的数据）或通过在用户表上维护上一个电子邮件日期和下一个电子邮件日期来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:03:31.353

这是一个设计问题，可能归结为将调度行为分解为多个类是否会变得更加麻烦。您将避免使用 case 语句，这表明可以使用多态性。

但是，如果您选择使用单独的类，那么现在是实现类型字段的 ActiveRecord 的好时机。每个订阅者都属于一个时间表。（我建议安排一个订阅者。）

schedules 表将有一个 type 字段，其中包含类的名称。您不必设置类型。相反，要存储计划，请使用来自订阅者对象的关联创建计划对象，ActiveRecord 将设置类型字段。

现在，每当您从数据库中获取计划对象时，它将是类型字段中指定的类。您可以为一周中的某天设置课程，为每月的日期设置不同的课程，以及与不同日期计算行为一样多的不同课程。

请存储下一个到期电子邮件日期。这应该在 schedules 表中，但如果这样更方便，您可以将它放在subscribers 表中。

使用一种方法来计算下一个到期日。确保该方法在所有类中具有相同的签名。因此，对于每月计划，将月份的日期存储在表中，不要将月份的日期传递给常用方法。这样，交付代码可以调用该方法来更新到期日期，而无需了解有关调度算法或数据的任何信息。

# mysql - 如何在单个 mysql 查询中执行此操作

> ID：10087963
> 
> 赞同：0
> 
> 时间：2012-04-10T11:35:39.567
> 
> 标签：mysql

```
user table
========
id(int) | name(varchar)
------------------------
1       | user1
2       | some_other_user

product table
===============
id(int) | user_id(int) | product(varchar) | status(varchar)
------------------------------------------------------------
1       | 1            | product1         | bought
2       | 1            | product3         | sold
3       | 2            | product22        | sold
4       | 2            | product2         | bought
5       | 2            | product4         | sold
6       | 1            | product5         | bought
7       | 1            | product7         | sold 
```

`status = sold`我需要使用单个 mysql 查询来获取用户的姓名、他拥有多少产品以及这些产品中有多少具有. 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:41:06.723

尝试这个

```
SELECT u.id, u.name, 
COUNT(p.id) AS totalproducts,
COUNT(IF(p.status="sold",p.user_id,NULL))
FROM users u
INNER JOIN products p ON p.user_id = u.id
GROUP BY u.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:41:28.880

尝试以下查询：

```
select 
    u.id, 
    u.name, 
    count(p.product) as totalproducts,
    sum(case when p.status = 'sold' then 1 else 0 end) as soldproducts
from user u
inner join product p on u.id=p.user_id
group by u.id, u.name 
```

# php - php自提交和记录更新

> ID：10087968
> 
> 赞同：0
> 
> 时间：2012-04-10T11:35:55.993
> 
> 标签：php, forms

我在一个页面上有多个按钮。当我单击一个重新加载同一页面的按钮时，我需要更新一个计数器和单击的按钮名称。正如我多次这样做，应维护单击按钮列表和按钮名称。有点像网站概念和柜台的访客。

例如

Button1（值“牛奶”） Button2（值“谷物”）等...

现在按下上面的任何按钮都会像：

列表：项目 1：按钮 1 - 按钮项目 2 的值：....等

然后我将有一个提交按钮，一旦完成添加我需要列出的项目，我点击并查看我选择的内容......

知道如何在没有 JS 的情况下仅通过 php 完成此操作吗？

谢谢，如果不是很清楚，很抱歉，但我尽力了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:49:52.763

```
< ?php
     if($_POST['mil'])
     {
            $_SESSION['count']++;
    ....     // milk button only
     }
 if($_POST['cre'])
     {
           $_SESSION['count']++;
    ....     // cereals button only

     } 
     if($_POST['mil'] or $_POST['cre'])
     {
            $_SESSION['count']++;
    ....   // Any (milk or cereals) button 
                cked this block executed
 }
 echo $_SESSION['count'];      // get total 
?>
<form method='post' action=''>
<input type='submit' name='mil' value='Milk'>
<input type='submit' name='cre' value='Cereals'>
</form> 
```

单击了哪个提交按钮，该块仅执行。表单提交了相同的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:52:59.713

您可以创建一个提交给自身的表单，并与会话一起保留数据，只要您想要它。

```
<?php
session_start();

if(isset($_POST)):

foreach ($_POST as $key => $value) {
    $_SESSION[$key] = (isset($_SESSION[$key]) ? $_SESSION[$key]+= 1 : 1);
}
endif;
?>
<!doctype>
<html>
<head>
</head>
<body>
<form method='post' action=''>
<input type='submit' name='milk' value='Milk'>
<input type='submit' name='cereals' value='Cereals'>
</form>
Milk: <?php echo $_SESSION['milk']; ?>
Cereals: <?php echo $_SESSION['cereals']; ?>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:04:40.993

使用会话

```
< ?php
session_start();
     if($_POST['mil'])
     {
     $count = ($_SESSION['count'] = $count++);
        // $count would hold the incremented value for each time it is clicked
     }
 if($_POST['cre'])
     {
       $count1 = ($_SESSION['count1'] = $count1++);

     } 
     if($_POST['mil'] or $_POST['cre'])
     {
    ....   // Any (milk or cereals) button 
                cked this block executed
 }
?>
<form method='post' action=''>
<input type='submit' name='mil' value='Milk'>
<input type='submit' name='cre' value='Cereals'>
</form> 
```

这是基本思想。

# facebook - Facebook Graph API，内容未正确抓取

> ID：10087970
> 
> 赞同：4
> 
> 时间：2012-04-10T11:36:05.147
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我创建了一个 Facebook 画布应用程序。这个画布应用程序本质上是一个图像库，用户可以通过单击“下一步”按钮来查看图像——非常简单。

当用户“查看”图像时，我正在使用 Graph API 发布到自定义对象。我这样做（PHP SDK）：

```
$this->data['facebook']->api('/me/myapp:look_at', 'post', array(
        'picture' => current_url()
    )); 
```

current_url() 是 Facebook 画布的当前 URL (https://apps.facebook.com/myapp/image/id)。此页面有一系列 og 元标记：

```
 <meta property="og:title" content="<?=$image->title?>" />
   <meta property="og:description" content="Pic of <?=$image->title?>" />
   <meta property="og:image" content="https://www.***.com/***/images/<?=$image->src?>" />
   <meta property="fb:app_id" content="<?=FB_APP_ID?>" />
   <meta property="og:url" content="<?=current_url();?>" />
   <meta property="og:type" content="myapp:picture" /> 
```

我已经读过，在将图像添加到库时，我需要让 Facebook 为 og:tags 抓取页面。我使用以下方法执行此操作：

```
file_get_contents('https://graph.facebook.com?id=https://apps.facebook.com/myapp/image/'.url_title($_POST['title']).'/'.$data['image_id'].'&scrape=true'); 
```

但是，我很确定这是行不通的，在应用程序中调用 mail() 后，访问该 URL 并等待什么都没有通过，这表明它没有被抓取。

运行第一个代码块（调用 Graph API myapp:look_at）时，我从 Facebook 收到以下异常：

```
Fatal error: Uncaught OAuthException: (#3502) Object at URL https://apps.facebook.com/myapp/image/img/id has og:type of 'website'. The property 'picture' requires an object of og:type 'myapp:picture'. thrown in /****/application/libraries/base_facebook.php on line 1106 
```

如果我使用 Facebook 的调试器工具来抓取页面，我会得到所有信息。如果我然后重新访问进行 FB Graph API 调用的画布页面，那么一切都会顺利进行。我在其他 SO 帖子上读到这是一个常见问题，我需要在调用 Graph API 之前让 Facebook 抓取页面，这正是我在上面的第三个代码块（file_get_contents）中尝试做的事情没有运气。

我想我的问题是：我是否以正确的方式处理这件事？当以这种方式使用该过程时，我正在努力寻找有关该过程的任何明确文档。

如果我以正确的方式进行操作，为什么在调用 file_get_contents('https://app....) 时我的页面没有被抓取？

抱歉，帖子太长了，我试图给你完整的图片。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:18:44.033

您无需手动抓取即可让对象注册。根据 Facebook 文档：

> 当您的应用程序尝试通过 Open Graph 上的操作在用户和对象之间建立连接时，Facebook 将抓取对象网页并读取元标记以将用户与对象关联。对象刮擦发生在以下情况：
> 
> *   用户第一次对对象执行操作（例如：喜欢、收听、阅读或对对象的任何自定义操作）。详细
>     了解如何发布操作。
> *   项目清单
> *   通过对象调试器检查对象 URL
> *   在第一次抓取后每 7 天通过 Linter API 对对象 URL 进行检查

如果发布代码被调用，连接的对象在第一次被引用时会被自动抓取。否则，正如您提到的那样，使用调试器将产生相同的效果。

编辑-> 但是，有一些不一致的地方（正如你提到的），开发人员注意到他们的“新鲜”对象没有被正确地抓取。Facebook 不是这个错误，希望能尽快解决。一种解决方法似乎是强制使用调试器对项目进行 linting。

[https://developers.beta.facebook.com/bugs/141650809281976/?browse=search_4f488911648042f90826189](https://developers.beta.facebook.com/bugs/141650809281976/?browse=search_4f488911648042f90826189)

文档：[https ://developers.facebook.com/docs/opengraph/objects/#connect](https://developers.facebook.com/docs/opengraph/objects/#connect)

希望这有帮助，祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:27:24.030

解决它。我需要对发布 Graph API 的代码进行用户代理检查，以防止在 FB 命中时发布该代码：

```
if(strpos($_SERVER['HTTP_USER_AGENT'], 'facebookexternalhit') === false) 
```

# php - PHP 使用用户 ID 创建一个从 1 到 9 的唯一数字

> ID：10087971
> 
> 赞同：0
> 
> 时间：2012-04-10T11:36:05.333
> 
> 标签：php, random, integer

为了对日历的每一行进行颜色编码，我希望能够使用字段 userid 创建一个从 1 到 9 的唯一整数。我需要使用日历另一部分的颜色来显示分配给教师的学生。

请记住，用户 ID 可以是任意长度。

起初我想使用最低有效数字，但这不适用于用户 ID 01、21、22 等。

然后我想把左边加到右边，例如userID 22 = 2+2=4，但这也行不通。

有什么想法可以根据用户 ID 创建一个唯一的 0-9 整数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:43:50.357

如果 N 大于 9，任何从 [0..N] 到 [1..9] 的函数映射都会发生冲突，因此不存在唯一映射它们的方案。

在您的情况下，您可以做的只是检查用户 ID，如果您之前没有看到此用户 ID，则为其分配下一个免费号码。这是一个简单的 for 循环 + 一个数组。

伪代码：

```
colors = array()
for userid in userids_to_color:
    if userid not in colors:
        colors[count(colors)] = userid 
```

然后，颜色是用户 ID 的映射索引（=颜色编号）。`count(colors)`如果大于您的最大颜色数，您可以跳出循环。

# java - 在android应用程序中接收彩信

> ID：10087972
> 
> 赞同：4
> 
> 时间：2012-04-10T11:36:06.810
> 
> 标签：java, android, xml, listview, mms

我必须开发一个 android 应用程序，它的一项活动是：

1.  检测新彩信
2.  获取发件人号码以检查它是否是我想在我的应用程序中收到的号码
3.  从彩信中获取（txt + 图像）
4.  在 ListView 中显示 (Txt + Image) 数据

好吧，我找到了一个可以帮助我完成第二个和第三个任务的代码，但是我尝试了它并在我的手机上对其进行了测试，它可以工作，但是它没有检索到任何东西，只是黑色界面！！！

也许我不理解这段代码的某些部分的问题，

我在每个我无法理解的声明上方写了我的评论，请回答我在代码中的评论并帮助我理解我所缺少的希望早日得到你的回复。请清楚。

```
 import java.io.BufferedReader;
   import java.io.IOException;
   import java.io.InputStream;
   import java.io.InputStreamReader;
   import java.text.MessageFormat;

   import android.app.Activity;
   import android.content.ContentResolver;
   import android.content.ContentValues;
   import android.content.Context;
   import android.database.Cursor;
   import android.graphics.Bitmap;
   import android.graphics.BitmapFactory;
   import android.net.Uri;
   import android.os.Bundle;
   import android.telephony.SmsMessage;
   import android.view.LayoutInflater;
   import android.view.View;
   import android.view.ViewGroup;
   import android.widget.ImageView;
   import android.widget.ListView;
   import android.widget.TextView;
     import android.app.Activity;
     import android.os.Bundle;

   public class MMSReceiverActivity extends Activity {

  private final Uri CONTENT_URI_PART = Uri.parse("content://mms/part");
   private static final String MSG_ID_STR = "mid=%1$s"; // I don't understand it

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Start Copying Code
    // I don't know how can I retrieve mms id
    long msg_id = this.getIntent().getLongExtra("msg_id", 0);
    // What's different between ViewGroup and ListView
    ViewGroup listview = (ViewGroup) findViewById(R.id.mmsdetaillist);
    // What's different between "content://mms/part" and "content://mms/"
    Cursor cursor = getContentResolver().query(CONTENT_URI_PART, null,
            String.format(MSG_ID_STR, msg_id), null, null);

    if (cursor.moveToFirst()) {
        do {
            // Why he puts partID
            String partId = cursor.getString(cursor.getColumnIndex("_id"));
            String type = cursor.getString(cursor.getColumnIndex("ct"));

            if ("text/plain".equals(type)) {
                String data = cursor.getString(cursor
                        .getColumnIndex("_data"));
                String body;
                // What's the different between if it's null or not all of
                // them will return (text)
                if (data != null) {
                    // implementation of this method below
                    body = getMmsText(partId);
                } else {
                    body = cursor.getString(cursor.getColumnIndex("text"));
                }

                // Why he declared it like this i mean why it didn't declare
                // like this findViewById (R.) etc
                TextView t = new TextView(this);
                t.setText(body);
                listview.addView(t);

                // Why here else ?? it should be only if because if MMS
                // contains Text + img : so it'll ignore the (else = img)
                // part !

            } else if ("image/jpeg".equals(type)
                    || "image/bmp".equals(type) || "image/gif".equals(type)
                    || "image/jpg".equals(type) || "image/png".equals(type)) {
                Bitmap bitmap = getMmsImage(partId);
                ImageView iv = new ImageView(this);
                iv.setImageBitmap(bitmap);
                listview.addView(iv);
            }
        } while (cursor.moveToNext());
    }
    cursor.close();

}

public String getMmsText(String id) {
    Uri partURI = Uri.parse("content://mms/part/" + id);
    InputStream is = null;
    StringBuilder sb = new StringBuilder();
    try {
        is = getContentResolver().openInputStream(partURI);
        if (is != null) {
            InputStreamReader isr = new InputStreamReader(is, "UTF-8");
            BufferedReader reader = new BufferedReader(isr);
            String temp = reader.readLine();
            while (temp != null) {
                sb.append(temp);
                temp = reader.readLine();
            }
        }
    } catch (IOException e) {
    } finally {
        if (is != null) {
            try {
                is.close();
            } catch (IOException e) {
            }
        }
    }
    return sb.toString();
}

public Bitmap getMmsImage(String _id) {
    Uri partURI = Uri.parse("content://mms/part/" + _id);
    InputStream is = null;
    Bitmap bitmap = null;
    try {
        is = getContentResolver().openInputStream(partURI);
        bitmap = BitmapFactory.decodeStream(is);
    } catch (IOException e) {
    } finally {
        if (is != null) {
            try {
                is.close();
            } catch (IOException e) {
            }
        }
    }
    return bitmap;
}
 } 
```

注意：每次我搜索发送或接收彩信时，我都会得到这个链接，但直到现在我还没有得到它

我应该使用 repo 和 Git 吗？什么是 repo 和 Git？为什么要在彩信中使用？

我应该在发送和接收彩信时使用它吗？如果是，为什么？我可以用这个代码吗

```
 content://mms-sms/conversations 
```

而不是回购和git？

[回购和 Git](http://source.android.com/source/downloading.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:52:47.493

你的大部分问题都与你作业中的彩信部分无关。其中大部分是标准的 java 和/或 Android，在执行此类任务之前您需要了解这些内容。

除此之外，短信和彩信没有直接支持，而且大多是无证的，所以很难使用。

我一直在玩短信和彩信，发现这些链接非常有用：

[如何在 Android 中读取彩信数据？](https://stackoverflow.com/questions/3012287/how-to-read-mms-data-in-android)

[http://groups.google.com/group/android-developers/browse_thread/thread/d0c15ec17c12af0e?fwc=1&pli=1](http://groups.google.com/group/android-developers/browse_thread/thread/d0c15ec17c12af0e?fwc=1&pli=1)

既然我已经解决了，我不妨回答你的一些更简单的问题：

**“ViewGroup 和 ListView”**

ViewGroup 是可以包含其他视图（LinearLayout、RelativeLayout ...）的大多数视图的超类，其中 ListView 是“创建可滚动项列表的 ViewGorup”。

**“为什么他这样声明我的意思是为什么它没有像这样声明 findViewById (R.) 等”**

当您有一个 xml 布局文件并希望在该布局中引用一个视图时，使用 findViewById。在这种情况下，他会在运行时创建一个 TextView（而不是在 xml 文件中定义它）并将其添加到 ListView。

# html - 为什么使用浮点数而不是 css 属性表

> ID：10087973
> 
> 赞同：0
> 
> 时间：2012-04-10T11:36:07.733
> 
> 标签：html, css, css-tables

我已经开始使用 CSS 中的“display:table”属性来正确构建我的 html5 元素，并且效果很好。

有人能告诉我为什么使用花车更好吗？具有讽刺意味的是，这似乎是未来？这很容易，简单易懂吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:42:23.027

只要表格布局适合您，您就可以使用它。

但是，最好让自己熟悉控制布局的其他方法。一旦你想做一些不符合表格强加给你的严格网格的事情，你就需要使用完全不同的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-06-17T00:26:00.647

让自己熟悉控制布局的其他方法是个好主意。一旦你想做一些不符合表格强加给你的严格网格的事情，你就需要使用完全不同的东西。

# php - 如何隔离整个代码..请检查

> ID：10087974
> 
> 赞同：0
> 
> 时间：2012-04-10T11:36:08.847
> 
> 标签：php, javascript, jquery, jquery-ui

嗨，我在这里使用此代码[http://jsfiddle.net/bryanjamesross/pyNJ9/](http://jsfiddle.net/bryanjamesross/pyNJ9/)我将整个代码隔离在一页中..就像这个标签下的 javascript

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
</script> 
```

和下的css代码

```
<script type="text/css"> 
 </script> 
```

并在 html 标签中使用了 html 代码。但我也得到了文本框，而不是单个登录 href 链接。

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/cupertino/jquery-ui.css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
<script type="text/javascript">
$('a.loginlink').click(function(e) {
    $('#loginform').dialog('open');
    e.preventDefault();
    return false;
});

$('#loginform').dialog({
    autoOpen: false,
    modal: true,
    resizable: false,
    draggable: false
});
</script>
</head>
<body>
<a href="mytest.html" class="loginlink">Log In</a>

<div id="loginform">
    <form action="/login" method="post">
        <table>
            <tr>
                <td>User Name:</td>
                <td>
                    <input name="username" type="text" />
                </td>
            </tr>
            <tr>
                <td>Password:</td>
                <td>
                    <input name="password" type="password" />
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align:center;">
                    <input type="submit" value="Login" />
                </td>
            </tr>
        </table>
    </form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:40:56.297

您还需要包含[jQuery UI](http://jqueryui.com/)。

您发布的 jsfiddle 使用的文件是[CDN 托管脚本](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js)和[CDN 托管样式表](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/cupertino/jquery-ui.css)

所以将您的代码更改为

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
<script type="text/javascript">
</script> 
```

并在您的页面头部添加

```
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/cupertino/jquery-ui.css" /> 
```

* * *

**更新**

**重要**您需要将代码包装起来，`$(function(){ ... })`以便在加载 DOM 后运行。

```
$(function(){
    $('a.loginlink').click(function(e) {
        $('#loginform').dialog('open');
        e.preventDefault();
        return false;
    });

    $('#loginform').dialog({
        autoOpen: false,
        modal: true,
        resizable: false,
        draggable: false
    });
}); 
```

并确保您的 jquery 版本与 jquery UI 版本使用兼容

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

代替

```
<script type="text/javascript" src="jquery.js"></script> 
```

完整代码在[http://jsfiddle.net/gaby/k6KjS/](http://jsfiddle.net/gaby/k6KjS/)

# php - 借助数组上传图片

> ID：10087975
> 
> 赞同：1
> 
> 时间：2012-04-10T11:36:08.983
> 
> 标签：php, mysql, image, file, upload

昨天我开始编写上传文件以将图像上传到目录。因为我认识到我必须使用数组来处理我现在使用的更好的方法：

```
 if(!empty($_FILES['image']['tmp_name'])){  

                $allowed_extension = array('jpg', 'jpeg', 'png', 'bmp', 'tiff', 'gif');

                foreach($_FILES['image']['name'] as $key => $array_value){

                    $file_name = $_FILES['image']['name'][$key];
                    $file_size = $_FILES['image']['size'][$key];
            $file_tmp = $_FILES['image']['tmp_name'][$key];

                    $file_extension = strtolower(end(explode('.', $file_name)));
                    if (in_array($file_extension, $allowed_extension) === false){
                        $errors[] = 'file is not accepted';
                        }

                    if ($file_size > 2097152){
                        $errors[] = 'maxsize: 2MB';
                        }

                    $path = "a/b/c/"; 
                    $uploadfile = $path."/".basename($_FILES['image']['name'][$key]);

                    if (move_uploaded_file($_FILES['image']['tmp_name'][$key], $uploadfile)){
                        echo "Das Bildmaterial wurde hochgeladen.";
                        }
                } 
        } 
```

问题是即使给出了不可接受的结尾，我也可以一直上传文件。我不明白为什么在应该显示错误消息而不是上传错误消息时会发生上传。我喜欢通过将允许的扩展嵌入到代码中来获得更高的安全性。如果有人可以告诉我我做错了什么，我将不胜感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:42:21.960

你应该使用“继续”

例如

```
foreach($_FILES['image']['name'] as $key => $array_value){

    $file_name = $_FILES['image']['name'][$key];
    $file_size = $_FILES['image']['size'][$key];
    $file_tmp = $_FILES['image']['tmp_name'][$key];

    $file_extension = strtolower(end(explode('.', $file_name)));
    if (in_array($file_extension, $allowed_extension) === false){
        $errors[] = 'file is not accepted';
        continue;
    }

    // the rest of your loop goes here
} 
```

然后它将转到循环中的下一个图像而不上传图像。

更多信息在这里： http: [//php.net/manual/en/control-structures.continue.php](http://php.net/manual/en/control-structures.continue.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:43:16.567

您有两个 if 语句检查异常，但随后什么也不做。

也许以下会有所帮助？

```
if(!empty($_FILES['image']['tmp_name'])){  

    $allowed_extension = array('jpg', 'jpeg', 'png', 'bmp', 'tiff', 'gif');

    foreach($_FILES['image']['name'] as $key => $array_value){

        $file_name = $_FILES['image']['name'][$key];
        $file_size = $_FILES['image']['size'][$key];
        $file_tmp = $_FILES['image']['tmp_name'][$key];

        $errors = array ();
        $file_extension = strtolower(end(explode('.', $file_name)));
        if (in_array($file_extension, $allowed_extension) === false){
            $errors[] = 'file is not accepted';
        }

        if ($file_size > 2097152){
            $errors[] = 'maxsize: 2MB';
        }

        if (count ($errors) == 0) {
            $path = "a/b/c/"; 
            $uploadfile = $path."/".basename($_FILES['image']['name'][$key]);

            if (move_uploaded_file($_FILES['image']['tmp_name'][$key], $uploadfile)){
                echo "Das Bildmaterial wurde hochgeladen.";
            }
        }
        else {
            // do stuff with errors
        }
    }
} 
```

# nhibernate - 关于会话构建的休眠建议

> ID：10087980
> 
> 赞同：0
> 
> 时间：2012-04-10T11:36:21.083
> 
> 标签：nhibernate, session, sessionfactory

我遇到了大问题，因为我对 nhibernate 没有那么经验，我需要为项目选择最佳会话解决方案，所以这里是会话使用示例：

- 会话打开并进行查询以填充 gridview
- 人员双击填充的 gridview 并使用编辑选项重定向到另一个页面
- 他编辑他从 gridview 获得的
对象 - 他保存对象并返回到 gridview
-Gridview 正在替换保存的对象
-他编辑另一个....

那么什么是对我来说最好的会话以及何时打开/关闭新会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:30:52.227

我会为[每个请求创建一个会话](https://community.jboss.org/wiki/SessionsAndTransactions?_sscc=t)（这是[一个资源](http://ayende.com/blog/4117/nhibernate-unit-of-work-multiple-reuqests)，谷歌会找到更多）。
您描述的场景很常见；我会使用 a`QueryOver`来填充您的 gridview，并`Load`获取所选项目。简单的。

# iphone - Xcode 看不到我的 iOS 设备，但 iTunes 可以

> ID：10087985
> 
> 赞同：137
> 
> 时间：2012-04-10T11:36:32.497
> 
> 标签：iphone, ios, xcode, ipad, provisioning

我有一个奇怪的问题。

我的 Mac 上安装了带有 iOS 5.0.1 (9A405) 和带有 Xcode 4.2 (Build 4C199) 的 iOS SDK 5.0.1 的 iPad。

Xcode 看不到我的设备。它像往常一样显示“iOS 设备”而不是“Sauron 的 iPad”。
（我确定该设备已连接，因为我在 iTunes 中看到它。）Xcode 拒绝在设备上启动我的应用程序。它说：

> “Xcode 无法使用选定的设备运行。没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。”

Xcode 可以看到我的另一台装有 iOS 4.3.3 的 iPad，并且可以在此设备上运行应用程序。我试图重新启动我的 Mac - 没有结果。

我还检查了配置文件、开发人员证书等。

有人有想法吗？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2014-12-10T10:31:23.880

即使这个没有解决 OP 的具体问题，它也可能是其他人找到这个问题的解决方案。

在某些情况下，即使 Mac OS/iOS/Xcode 版本没有变化，Xcode 也不会识别（甚至看不到）以前识别的连接设备。如果您在 Mac 和/或连接设备时锁定设备时连接设备，似乎会发生这种情况。即使您已经这样做了，设备也会询问您是否要信任计算机，但该设备在 Xcode 中仍然不可见。

重新启动 Xcode 或设备似乎没有任何效果。一种解决方案是重新启动 Mac。另一个更快的解决方案是重新启动`usbmuxd`：

1.  退出 Xcode
2.  断开设备
3.  在终端窗口中，键入：（`sudo pkill usbmuxd`它将自动重新启动）
4.  重启 Xcode
5.  连接设备

您的设备现在应该在 Xcode 中再次可见！

希望对一些人有所帮助。显然是的！

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-04-10T11:48:22.477

1.  在 Xcode 中选择 Window ➜ Organizer。现在在设备下，选择您的设备。如果尚未准备好进行开发，请单击用于开发。

2.  如果上述方法不能解决您的问题，那么从您的项目设置中，将部署目标设置为您的应用程序开发的目标或更低。

3.  否则，证书和配置文件会出现一些问题。确保您的设备的 UDID 已添加到您正在使用的配置文件中。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-10-13T00:48:41.970

有同样的问题，重新启动xcode，它又找到了我的手机。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-04-05T22:16:11.587

我今天遇到了这个问题，Xcode 8.2.1 突然决定连接的 ipad (ios 10.2) 不再连接。拔下插头，重新插上电源，重新启动我的 macbook，并尝试了上面的许多建议。 **为我解决问题的方法是关闭并重新启动 ipad 设备本身。**

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-10-07T12:50:17.390

我曾经遇到过这个问题，使用的是非官方的 Apple 电缆。

希望能帮助到你。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-04-10T13:49:49.710

对于可能有相同问题且上述答案不起作用的其他人：确保您设备上安装的 iOS 版本与您在 Mac 上安装的 iOS SDK 版本相匹配。如果这些不匹配，您将无法构建到设备。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2018-01-03T15:12:41.477

就我而言，我做了接下来的步骤

1.  退出 XCode
2.  断开设备
3.  在你的终端`sudo launchctl stop com.apple.usbmuxd`
4.  重新启动 Xcode
5.  连接设备

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-05-26T06:17:28.690

可能是我的回答对新开发人员有帮助。只需按照这些步骤，您就可以使用 X-code 连接您的 iPhone/iPad。[![在此处输入图像描述](../Images/bebce20f5a1e7ff9b880f0559778bf2f.png)](https://i.stack.imgur.com/Pw9C5.png)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-06-03T20:04:24.260

我几乎没有尝试过上面建议的所有解决方案。唯一有效并解决了我的问题的方法是进入 xcode 的“管理器”，右键单击我的 iPhone，单击“从管理器中删除”，然后等待大约 10 秒钟，而 xcode 会自动重新添加设备。

我之前插入了我的手机，iTunes 识别它并与之同步，等等，但是管理器中的所有 xcode 都说是“设备当前未连接”，如果 iTunes 正在与它同步而不是同步，它肯定是连接的无线上网。

为什么 xcode 需要我删除并重新添加手机超出了我的理解，但现在我这样做了，效果很好。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-05-11T01:42:00.423

我尝试了以上所有方法均无济于事。我已经使用手机很久了，突然组织者认为“此设备当前未连接”。手机重置为我修复了它（按住 Home & Power 直到出现 Apple 标志）。我这样做时它仍然连接到 MacBook，但它不应该是必要的。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-09-05T05:57:02.523

对于`Xcode 7`（并且可能在上面），

```
go to Window -> Devices, 
```

击中`plus sign`底部并`select the device`连接 和`hit next`，然后**`Use for development`**。

这仅在`Xcode`读取您的设备时有效，但您无法在设备上运行您的应用程序。

还要确保`device's OS version is greater than or equal to your app's` **`Deployment Target`**操作系统版本。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-05-16T02:55:20.700

如果这些都不起作用，请尝试重新启动您的 iPhone 或设备！每次都为我工作（：

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-05-13T10:51:00.737

一些未经许可的电缆也有同样的问题。适用于 Apple 和 Belkin 的 USB 电缆。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-02-19T19:53:20.337

我的应用程序可以在所有模拟器上运行，但不能在我的设备上运行。我几乎尝试了每条评论中的所有步骤，但没有任何运气。我去了我的设备设置并将我的“个人热点”从关闭切换到打开。然后一切都很好！

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-11-03T16:03:19.590

这是我发现问题的方法。转到 Xcode -> 窗口 -> 设备和模拟器 -> 设备。在那里你可以看到错误和警告。我发现我的 Xcode 必须更新，因为我的设备的 IOS 版本更高。[![在此处输入图像描述](../Images/225520ac86fd831321950089b6d1a718.png)](https://i.stack.imgur.com/xkevR.png)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-04-10T11:43:58.147

您是否尝试在 Apple Developer 门户中删除并重新安装设备？如果是，请尝试将您的 xcode 升级到 4.3.2，我记得我需要在将我的 iPhone 更新到 iOS 5.1 后更新到 xCode 4.3.2

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-12-06T13:10:40.580

Xcode 没有看到我的 iPad，iTunes 也没有看到我的设备。重新启动 Mac 纠正了这种情况。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-07-31T14:54:52.537

将我的 iPhone 更新为 后`10.3.3`，Xcode`8.3.3`无法在`Device`窗口中找到它，但 iTunes 可以。重新启动 Xcode 解决了这个问题。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-01-10T04:47:21.767

经过20分钟的调试，我意识到我必须将鼠标悬停在`Devices`左上角选择器顶部的向上按钮（）上，运行应用按钮的右侧

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-05-28T00:29:25.933

我在 XCode 中遇到的错误是“iOS 版本低于部署目标”，我不知道如何修复。错误显示在应该将 iPhone 指示为设备的位置（左上角）。我在 Project Navigator 中选择了该项目，并注意到 iOS 部署目标设置为 11.3，但是当我检查我的 iPhone 时，它​​设置为 11.2.1（或低于 11.3 的版本）。所以我在手机上打开设置，向下滚动到常规并点击软件更新。由于更新说它已计划但没有开始，我决定将 SIM 卡从我的另一部手机中取出，并将其放入我用于测试的 iPhone 中。然后升级很快就开始了。然而，在手机上完成更新后，XCode 仍然无法识别手机。我拔掉了USB线，但没有听到任何声音，所以我将它插入电脑上的另一个 USB 端口，然后听到声音。然后 XCode 注意到了电话。所以问题是 iPhone 没有通知我我有更新（或者我忽略了它并忘记了它）并且它可能需要 SIM 卡，而且我的 USB 连接不好。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-08-25T08:32:50.037

有同样的问题。就我而言，这是我的 USB 线。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2012-04-10T11:44:51.930

我有这个问题。我以某种方式在苹果上为通用团队注册了该设备。我不记得我现在是怎么做到的。然后我能够克服这个错误。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-04-15T12:02:26.867

只需用 Mac 拔下 iPhone 的电缆，然后将电缆插入 mac 即可为我工作。我希望它对某人有用。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-08-23T17:57:18.363

即使在计算机重新启动后，Xcode 6.3 也没有看到我的 iPhone 运行 iOS 8.3。然后我重新启动了我的 iPhone，一切都恢复了。喜欢有问题的软件！

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-12-06T03:05:48.930

当您尝试构建和运行当前方案但遇到此警报消息时：

> “运行目标 iPhone 对运行方案无效。”

另外，您已经检查了您的手机并且它已正确连接到您的 Mac， **您只需重新启动 Xcode 并重新构建它即可**。这将完成这项工作。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-02-06T17:50:44.183

从 XCode 9 升级到 10.1 时遇到了这个问题。尽管执行了其他答案中列出的所有步骤，但 XCode 中根本没有出现任何设备。

对我来说，解决方案是做一个干净的 CMake 构建，删除旧的 Xcode 项目文件。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-07-17T12:48:36.520

Xcode 10.2.1 无法识别我的 ipad mini。我拔下并重新启动了迷你，它变得可见。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-05-28T12:49:21.320

当我使用原装电缆时，问题就解决了。您还可以获得原装电缆。

# sql-server-2008 - 通过 SQL Server 作业运行时，SSIS 包不会执行任何操作

> ID：10087987
> 
> 赞同：1
> 
> 时间：2012-04-10T11:36:38.067
> 
> 标签：sql-server-2008, ssis, sql-job

我有一个简单的 SSIS 包，它在控制流上有一个执行 SQL 任务控件，它从数据库中获取一些值

在 DataFlow 中，我使用了一个脚本组件，它基于“执行 SQL 任务”给出的值，执行以下操作：

```
public override void CreateNewOutputRows()
    {

        try
        {

            string loginURL = "http://maps.googleapis.com/maps/api/geocode/xml?address=" + Variables.ProjectAddress + "&sensor=true";
            WebClient client = new WebClient();

            string downloadString = client.DownloadString(loginURL);
            XmlDocument xml = new XmlDocument();
            xml.LoadXml(downloadString);

    ///// setting output buffer variables
         }
       catch(Exception ex)
       {

       }
} 
```

所以基本上我在请求包内的纬度和经度的网络服务。然后将检索到的值更新到数据库中：

当我从 Visual Studio SSIS 项目控制台运行包时，一切正常。但是当我尝试通过 SQL Server 2008 R2 Job 运行包时，什么也没有发生。作业执行成功，但没有更新（或插入）行。

我尝试将包导入 SQL MSDB 并将保护级别设置为下拉列表中的所有项目，如此处给出[的](http://technet.microsoft.com/en-us/library/dd440760%28v=sql.100%29.aspx) ......然后从 SQL Job 运行这个导入的包。还是……什么都没发生。

有谁知道怎么了？？我如何处理以下事实：

1.  它与 sql 用户发出 Web 服务请求的权限有关。我该如何配置呢？

2.与导入的ssis包的配置文件有关。我应该寻找什么？

请帮帮我：我希望我已经提供了调查问题所需的所有信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:22:51.243

是您计算机上的 SQL Server 实例上的作业吗？我问是因为它可能是从 SQL Server 到您拥有 Web 服务的计算机的防火墙或权限问题。

此外，我建议删除该 try catch 并启用包配置，以便您查看它是否引发错误

关于保护级别，如果您使用 EncryptSensitiveWithUserKey，则该程序包不会加载数据库敏感信息（登录名和密码），除非它位于您开发它的计算机上。同样的事情适用于 EncryptAllWithUserKey 但在这种情况下它甚至不会打开包

# java - 如何反射性地调用以 null 作为参数的方法？

> ID：10087989
> 
> 赞同：36
> 
> 时间：2012-04-10T11:36:44.007
> 
> 标签：java, reflection

我正在尝试在 Java 中反射性地调用此方法：

```
public void setFoo(ArrayList<String> foo) { this.foo = foo; } 
```

问题是我想将 null 作为传递`null`，因此 foo 变为 null。

但是，在以下方法中，它假定没有参数，我得到`IllegalArgumentException`( `wrong number of arguments`)：

```
method.invoke(new FooHolder(), null);
// -----------------------------^ - I want null to be passed to the method... 
```

这是如何实现的？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-04-10T11:38:31.513

尝试

```
method.invoke(new FooHolder(), new Object[]{ null }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-13T04:55:01.950

对我来说，这不起作用：

> m.invoke ( c.newInstance() , new Object[] { null } );

但这有效：

> m.invoke ( c.newInstance() , new Object[] { } );

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-10T11:44:58.637

编译器警告应该让您意识到问题；

> 应将 null 类型的参数显式转换为 Object[]，以便从 Method 类型调用可变参数方法 invoke(Object, Object...)。也可以将其转换为 Object 以进行 varargs 调用

你可以这样修复它；

```
Object arg = null;
method.invoke(new FooHolder(), arg); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-10T11:45:42.550

对已经发布的解决方案的一些解释。

`Method.invoke()`被声明为变量 arity 函数，这意味着通常您不需要显式创建对象数组。只是因为您传递了一个可以解释为对象数组本身的参数，才会`method.invoke( obj, null)`失败。

例如，如果您的方法有两个参数，则`method.invoke( obj, null, null)`可以正常工作。

但是，如果您的方法只有一个`Object[]`参数，您总是必须包装它。

# html - CSS 内联文本，随机行填充/排水沟

> ID：10087990
> 
> 赞同：0
> 
> 时间：2012-04-10T11:36:47.083
> 
> 标签：html, css, padding

我正在尝试对副标题做一些不同的事情，从而使文本看起来有些混乱。我不想将标记更改为具有`<br/>`s 和其他元素。

我想知道是否有人对如何**纯粹在 css**中完成此操作有一个巧妙的想法。看一下图片：

![在此处输入图像描述](../Images/7a32f7fcb1f617679126ac8701b724eb.png)

所以在这个例子中，我们在左边和右边都有一些......奇怪的排水沟和边距。

我想知道这是否可能。同样，我宁愿不更改简单的标记，即：

```
<h2>The quick brown fox jumps over the lazy dog.</h2> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:56:22.077

尝试这个。

```
<html>
<head>
<style type="text/css">
p
{
white-space:pre;
}
</style>
</head>
<body>

<p>
The quick brown fox 
   jumps over the  
 lazy dog
</p>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:21:34.323

在不更改原始标记的情况下，我做到了这一点：[jsFiddle](http://jsfiddle.net/QT9v8/2/)

```
h2 {
 width:10em; text-indent:-2em; margin-left:1em;
}
h2:before {
 display:block; content:''; float:left; width:1em; height:2em;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:40:38.607

在不更改标记的情况下，使用纯 CSS 是不可能的

# android - 如何在kindle fire上运行谷歌地图应用程序

> ID：10087991
> 
> 赞同：0
> 
> 时间：2012-04-10T11:36:50.640
> 
> 标签：android, google-maps, kindle-fire

我开发了谷歌地图应用程序，它在移动设备上运行良好。但是在kindle fire中它不起作用，当我`<uses-library android:name="com.google.android.maps" />` 从清单文件中删除应用程序在kindle fire中运行良好时。我的问题是如何在 kindle fire 中使用谷歌地图运行应用程序......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:49:32.753

谷歌地图在火上不存在。你需要使用一个替代的映射库，也许是 OpenStreetMaps - 它有 Android 集成。 [http://wiki.openstreetmap.org/wiki/Android](http://wiki.openstreetmap.org/wiki/Android)

或必应地图。 [http://bingmapsandroidsdk.codeplex.com/](http://bingmapsandroidsdk.codeplex.com/)

# php - Magento 自定义定价/报价项目的属性

> ID：10087999
> 
> 赞同：0
> 
> 时间：2012-04-10T11:37:22.200
> 
> 标签：php, magento

我在我的`checkout_cart_product_add_after`观察者方法中创建了直接保存到报价项的属性，不会保留该值，因为它似乎在观察者退出后被还原。

请参阅下面的代码示例：

**config.xml（片段）：**

```
<checkout_cart_product_add_after>
    <observers>
      <module>
        <type>model</type>
        <class>NativeRemedies_OrderGroove_Model_Observer</class>
        <method>productAddAfter</method>
      </module>
    </observers>
  </checkout_cart_product_add_after> 
```

**Observer.php（片段）：**

```
public function handleOrderGroove()
{       
    foreach($this->og->products as $_product){
        if($_product->every>0){
            foreach($this->_quote->getAllVisibleItems() as $_item){
                //if sku is in the active list of recurring products selected add quote item id to array
                if($_item->getSku()==$_product->id){
                    Mage::helper('nrordergroove')->setRecurringItem($_item->getItemId());
                    $_item->setOrdergrooveActive(true)->save();
                    $_item->getProduct()->setPrice(2);
                    $_item->setCustomPrice(2);
                    $_item->setOriginalCustomPrice(2);
                    $_item->getProduct()->setIsSuperMode(true);
                }
            }
        } // else, do nothing
    } 
```

此示例中的 $_item 对象没有提供将属性保留为设置的功能 - 即使在调用`->save()`.

提前感谢您的帮助。我已经看过所有关于设置自定义价格和属性的教程 - 似乎没有什么可以补救这种情况！

# 编辑 1

我开始觉得这是 1.6+ 中的错误。我在 >=1.4 中看到了很多关于这个工作的讨论。

# 编辑 2

绝对清楚，这里的问题是自定义定价属性被 Product 模型或 collectTotals 方法有效地覆盖。我需要一个解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:35:00.693

事实上，我的工作代码确实有效。与 Amasty 的特别促销的扩展冲突导致自定义定价未设置。这被测试为与以下 Magento 版本一起使用：

*   1.5 社区
*   1.6.1 社区
*   1.11.1.1 企业

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:29:37.123

这是您问题的答案，是的，这是在 Magento 1.5+ 的较新版本中：

结帐时，商品会从报价转换为订单，此时您的属性将丢失。

您需要添加类似于此观察者的内容，以便在结帐时保留您的属性：

```
<sales_convert_quote_item_to_order_item>
    <observers>
        <extra_options>
            <type>model</type>
            <class>extra_options/observer</class>
            <method>salesConvertQuoteItemToOrderItem</method>
        </extra_options>
    </observers>
</sales_convert_quote_item_to_order_item> 
```

在这里，我们将选项从报价项目移动到订单项目。

```
public function salesConvertQuoteItemToOrderItem(Varien_Event_Observer $observer)
{
    $quoteItem = $observer->getItem();
    if ($additionalOptions = $quoteItem->getOptionByCode('additional_options')) {
        $orderItem = $observer->getOrderItem();
        $options = $orderItem->getProductOptions();
        $options['additional_options'] = unserialize($additionalOptions->getValue());
        $orderItem->setProductOptions($options);
    }
} 
```

在这里查看更多详细信息： [Magento - 基于用户输入的报价/订单产品项目属性](https://stackoverflow.com/questions/9412074/magento-quote-order-product-item-attribute-based-on-user-input/9496266#9496266)