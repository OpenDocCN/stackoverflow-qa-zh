# StackOverflow 问答 000430000-000430999

# sql - SQL 从表中排除 LIKE 项目

> ID：430000
> 
> 赞同：5
> 
> 时间：2009-01-09T22:35:40.490
> 
> 标签：sql, subquery

我试图弄清楚如何使用表 B 中的排除列表从表 A 中的 select 语句中排除项目。问题是我是根据字段的前缀排除的。

因此，一个字段值可能是“FORD Muffler”并将其从基本查询中排除，我会这样做：

```
SELECT FieldName 
FROM TableName 
WHERE UPPER(ColumnName) NOT LIKE 'FORD%' 
```

但是要使用从不同表中排除的值列表，我会使用子查询，例如：

```
SELECT FieldName 
FROM TableName 
WHERE UPPER(ColumnName) NOT IN (Select FieldName2 FROM TableName2) 
```

问题是它只排除完全匹配而不是 LIKE 或通配符 (%)。

我怎样才能完成这项任务？重新设计表格不是一种选择，因为它是正在使用的现有表格。

编辑：对不起，我使用的是 SQL Server (2005)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-09T22:40:11.527

我认为这会做到：

```
SELECT FieldName
FROM TableName
LEFT JOIN TableName2 ON UPPER(ColumnName) LIKE TableName2.FieldName2 + '%'
WHERE TableName2.FieldName2 IS NULL 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T22:41:52.337

不知道这会有多有效，但它应该可以工作：

```
SELECT FieldName 
FROM TableName t1
WHERE NOT EXISTS (
    SELECT *
    FROM TableName2 t2
    WHERE t1.FieldName LIKE t2.FieldName2 + '%'
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T22:44:17.853

```
SELECT * FROM table_A 
LEFT OUTER JOIN table_B 
    ON (locate(table_b.column, UPPER(table_a.column)) == 1)
WHERE table_b.column IS NULL 
```

# java - XML 差异和合并

> ID：430001
> 
> 赞同：11
> 
> 时间：2009-01-09T22:36:00.350
> 
> 标签：java, xml, xslt, merge, diff

我想我有一个相当独特的问题要解决。好吧，我无法使用谷歌找到足够的信息。就这样，

我在一个 Java EE SOA 应用程序上工作，该应用程序使用 Oracle XML DB 将 XML 文档存储为 XML。每当 XML 更改时，我都会增加版本并将以前的版本放入不同的表中。

现在的要求是，我应该将两个版本之间的差异存储为 XML，而不是整个 XML 文档。

1.  有没有可以进行 XML 比较的 Java 库？（XMLUnit，...？）
2.  是否有用于捕获 XML 差异的标准 XML 模式？
3.  我可以使用什么转换技术将“差异”应用于 XML 以在版本之间来回切换？（XSLT、Groovy、....？）

我很感激你的时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-10T02:22:56.413

In my last job, we had a similar problem: We had to detect changes, insertions, and deletions of specific items between two XML files. The files weren't arbitrary XML; they had to adhere to our XSD.

Our solution was to implement a kind of merge sort: Parse the files (using a SAX parser, not a DOM parser, to permit arbitrarily large files), and store the parsed data in separate HashMaps. Then, we compared the contents of the two maps using a merge-sort type of algorithm.

Naturally, the larger the files got, the more memory pressure we experienced, so I ultimately wrote a FileHashMap class that pushed the HashMap's value space to random access files. While theoretically slower, this solution allowed our comparisons to work with very large files, without thrashing or OutOfMemoryError conditions. (A version of that FileHashMap class is available in this library: [http://www.clapper.org/software/java/util/](http://www.clapper.org/software/java/util/))

I have no idea whether what I just described is even remotely close to what you need, but I thought I'd share it, just in case.

Good luck.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-12T09:25:14.127

旁注：现在在[RFC 5261](http://www.ietf.org/rfc/rfc5261.txt)中有一种可识别 XML 的“补丁”的标准格式。至少有一个自由软件程序[xmlpatch](http://sourceforge.net/projects/xmlpatch)来实现它。它是用 C 编写的，您可以从 Java 中调用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T22:43:29.510

有许多用 Java 编写的开源 XML diff 工具可供您借鉴。此类工具的一个列表在[这里](http://www.roseindia.net/opensource/xmldiff.php)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-12-10T13:45:21.510

尝试使用漂亮的差异。它旨在与基本 XML 语法的几个不同扩展一起使用。

[http://prettydiff.com/](http://prettydiff.com/)

# grails - 没有 ID 字段或部分为 NULL 复合字段的 Grails 域类

> ID：430004
> 
> 赞同：4
> 
> 时间：2009-01-09T22:36:38.650
> 
> 标签：grails, null, dns, composite

根据对上一个问题的回答（在此回答：[Grails 中的 SQL/Database Views](https://stackoverflow.com/questions/425294/sql-database-views-in-grails#427691)），我尝试使用域类来表示数据库中的视图。然而，这在大多数情况下都非常有效：

我有一个没有单一唯一键的视图。假设基础表如下所示：

A:
id,varX
1,"Blah"
2,"Foo"
3,"Bar"

B:
id,A.id,C.id
1,2,1
2,2,2
3,3,1

C:
id,varY
1,"Boom"
2,"Fizzle"

我的观点是这样的：
A.id,varX,B.id,C.id,varY
1,"Blah",NULL,NULL,NULL
2,"Foo",1,1,"Boom"
2,"Foo" ,2,2,"Fizzle"
3,"Bar",3,1,"Boom"

这正是它应该如何寻找我们的目的。但是，如您所见，我们可以为视图构造的最佳唯一复合 id 是 ['A.id','C.id']，因为它唯一标识每个元素，但 Grails 失败了，因为它似乎无法处理复合 ID 的一部分为 NULL（实际上，list() 返回 4 个对象的列表，第一个是空指针，其余是视图的实际域实例）。

请注意，我们也可以使用 A.id 和 B.id，但它会遇到同样的问题。

另请注意，我们希望至少显示一次表 A 中的元素（表 B/C 中未找到的任何字段为空值），如果表 B 中有多个对应条目，则可能显示多次。

**所以，我的问题是两个部分：
1：是否可以定义一个没有任何 ID 字段的 grails 域类？我们不需要任何视图条目的永久句柄，我们只需要列出该视图中的数据。
2：如果不是，是否可以使用复合 ID 字段定义一个 grails 域类，其中一部分可能为 NULL，但即使复合 ID 的一部分为 NULL，它也将唯一标识一行？**

我知道我们可以直接使用 Groovy SQL 来直接查询视图而无需关联的域类（实际上我们现在正在这样做），但理想情况下我们希望用域类来表示视图。此外，抛开所有争论不谈，这两个问题可以更通用地应用，而不仅仅是我们的特定问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-21T23:19:05.327

我们以前遇到过这个问题。

根据我的经验，复合 ID 在 Grails 或 Hibernate 中没有得到很好的支持。

我们总能找到一种方法来为所有域类设置唯一 ID。

对于真实的表，我们只需添加一个自增字段，即使我们不使用 grails，我们也会使用复合键。

对于数据库视图，我们通常在其中一个连接表中已经有一个 ID，该 ID 在该上下文中最终是唯一的，但如果我们不这样做，有办法破解/模拟它。例如，在 SQL 中，只需将您将在复合键中使用的键连接为单个字段并将其用作键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T03:36:19.247

您是否尝试过此[参考](http://grails.org/GORM+-+Mapping+DSL)页面上的 Composite Ids 部分提到的内容？我自己没有尝试过使用它，我不确定这在最新版本中是否发生了变化。

另外，如果您查看表 B，A.id 的唯一值是 2 和 3，所以您不认为当 A.id 为 1 时，B.id、C.id 和 varY 的结果将为空吗？或者这只是一个例子？

# time - 您将如何存储可能的重复时间？

> ID：430012
> 
> 赞同：6
> 
> 时间：2009-01-09T22:38:31.547
> 
> 标签：time, calendar, recurrence

我需要存储某事是否发生一次，每天，工作日，每周，一周中的某些天，一个月中的某些天，这可能是数字或符号，例如每个月的第一个星期一，等等。

有什么建议吗？有什么要查看的代码、数据结构或架构吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-09T22:57:31.260

有复杂的解决方案和简单的解决方案。两个最简单的解决方案是：

1.  将重复事件扇出到某个恒定数量的实例，或最多到将来某个固定的日期范围。为每个指向重复描述的实例存储一个 FKrecurrence_id，并允许批量编辑和取消。

    预先计算的扇出方法的优点是它可以非常容易地实现重复异常，这几乎肯定是您获得的第一个功能请求。

2.  在显示时计算。计算机速度很快，根据您希望能够回答的有关数据的问题，计算一个日期范围内的所有事件通常很容易。您可以聪明地尝试在进行重复计算之前快速将您的日期范围括起来，或者您可以从开始日期开始强制使用它。

除此之外，您只需要一个存储重复规则的解决方案，该规则适用于您用于计算重复的任何内容。（例如，如果您使用 iCalendar 启用库，则您的架构是 varchar(255)，其中包含 RRULE 值）

如果您必须推出自己的重复周期计算器，并且希望保持简单，则将重复周期限制为每天、每周、每月或每年覆盖您的前 80% 用例，并且非常容易计算。

此时您的潜在重复模式看起来像：

```
id
recurrence_start
recurrence_end
type (daily|weekly|monthly|yearly)
day_of_week (for weekly)
month
day_of_month 
```

坦率地说，复杂的解决方案可能不值得:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-04T23:47:57.060

Martin Fowler 就此写[了一篇非常棒的论文](http://martinfowler.com/apsupp/recurring.pdf)。您可以在 runt 中找到许多与他讨论的相同想法，[runt](http://runt.rubyforge.org)是一个用于处理时间表达式的 Ruby 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T22:47:52.387

尝试一个具有调度功能的开源项目？

一些调度接口/定义

[https://www.rfc-editor.org/rfc/rfc4791](https://www.rfc-editor.org/rfc/rfc4791)

和

[http://en.wikipedia.org/wiki/ICalendar](http://en.wikipedia.org/wiki/ICalendar)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T22:47:58.830

这听起来像是 Outlook 中的“重复事件”。我将使用一个名为 RecurrenceType 的表来存储每个时间段（每天、每周等）。另一个名为 Event 的表将按键引用 RecurrenceType。然后可以使用标准日期函数计算大多数重复类型的未来日期。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T22:58:04.690

问题是指定这样的间隔有无限的可能性。例如 - “如果日期是偶数，但不是 4，并且该月不是长年的二月，则每隔一个月的第一个星期一”。你愿意走多远？最终，您只需要让用户输入一个布尔表达式，该表达式在事件再次发生的日子里计算为 TRUE。从 UI 的角度来看不是很好。

您应该确定系统的一些限制。一旦你知道了这些，剩下的就应该很容易了——或者至少可以对 SO 负责。:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-11-09T03:08:45.140

此处描述的架构捕获重复日期

[http://github.com/bakineggs/recurring_events_for](http://github.com/bakineggs/recurring_events_for)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T15:48:35.423

在[一个相关的、有用的 SO 线程](https://stackoverflow.com/questions/85699/whats-the-best-way-to-model-recurring-events-in-a-calendar-application)中提到了它，但是如果你碰巧使用 Ruby，一个很好的、积极维护的 Runt 替代品是[ice_cube](https://github.com/seejohnrun/ice_cube)。您还没有提到您的存储后端要求是什么，但对于数据库模式，@kellan 和上述线程中的一些是好的开始。

# css - Firefox 3 居中错误（任何 CSS 黑客或修复？）

> ID：430028
> 
> 赞同：2
> 
> 时间：2009-01-09T22:41:54.083
> 
> 标签：css, firefox-3

我在 Firefox 3 中遇到了居中项目的问题。（我搜索并找不到这个答案——希望不是重新发布）

我将代码简化为两个元素来演示这一点——你可以在这里看到它：http: [//prwmusic.com/misc/csstest/home-sample-fix.html](http://prwmusic.com/misc/csstest/home-sample-fix.html)

现在慢慢让浏览器窗口变宽变窄。假设您使用的是 Firefox 3，您是否看到蓝色 DIV 左侧的白色背景如何随着您拖得更宽或更窄的每个其他像素而弹出和弹出？然而 IE6、IE7、Safari 甚至 FF2 都很好。

我所做的是创建一个 DIV 并向该 DIV 添加一个“[带阴影背景的白页](http://prwmusic.com/misc/csstest/v3-page_bg_middle.gif)”，以便访问者可以在水平滚动条出现之前使浏览器尽可能窄。然后是一个嵌套的 DIV，其背景为蓝色。背景中的白色区域和蓝色 div 都是 970 像素宽，因此它们应该始终匹配，因为它们都居中。

似乎正在发生的事情是，当窗口大小为奇数时，Firefox 会在背景图像的右侧添加 1，但在前景的左侧添加 1，这会将所有内容都扔掉。

第一个想法可能是“只在背景图像中包含蓝色”。但我正在从事的项目的实际设计相当复杂，而且这种奇怪现象发生在整个网站，所有页面的上下部分——我不能选择让蓝色成为背景的一部分。我只是用这个简单的例子来演示。

有没有办法让 Firefox 3 中的项目始终对齐，以确保如果某人的浏览器宽度奇数，则不会出现显示异常？（显然，没有在所有其他浏览器中破坏它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T23:28:49.777

这是一个舍入误差。请参阅[此 mozillaZine 论坛主题](http://forums.mozillazine.org/viewtopic.php?f=25&t=746155)，了解血腥细节和可能的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T22:48:24.023

您在另一个元素中有固定宽度的元素。

尝试使用固定元素作为容器，并将内部元素的宽度设置为 100%。

# python - 正则表达式：替换以 '.js' 但不是 'min.js' 结尾的字符串的后缀

> ID：430047
> 
> 赞同：3
> 
> 时间：2009-01-09T22:47:16.753
> 
> 标签：python, regex

假设 infile 是一个保存输入文件名称的变量，类似地是输出文件的 outfile。如果 infile 以**.js**结尾，我想用**.min.js**替换，这很容易（我认为）。

**outfile = re.sub(r'\b.js$', '.min.js', infile)**

但我的问题是如果 infile 以**.min.js 结尾**，那么我不希望发生替换。（否则，我会得到**.min.min.js**）我怎样才能通过使用正则表达式来完成这个？

PS：这不是作业。如果你好奇这是做什么用的：这是一个小型 python 脚本，用于对目录中的 JavaScript 文件进行大规模压缩。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T22:53:16.323

你想做一个否定的后向断言。例如，

```
outfile = re.sub(r"(?<!\.min)\.js$", ".min.js", infile) 
```

您可以在此处找到更多相关信息：http: [//docs.python.org/library/re.html#regular-expression-syntax](http://docs.python.org/library/re.html#regular-expression-syntax)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-10T13:14:08.067

对于这么简单的任务，不需要正则表达式。字符串方法可以更具可读性，例如：

```
if filename.endswith('.js') and not filename.endswith('.min.js'):
    filename= filename[:-3]+'.min.js' 
```

# vb.net - 动态地址

> ID：430056
> 
> 赞同：0
> 
> 时间：2009-01-09T22:49:49.823
> 
> 标签：vb.net, delegates

引用动态委托的最佳方式是什么。我想对从配置数据库返回的方法名称执行以下操作。

```
AddressOf "MethodName" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T22:52:53.297

通过反射（特别是[Type.GetMethod](http://msdn.microsoft.com/en-us/library/system.type.getmethod.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T22:53:05.637

使用 System.Reflection 命名空间中的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T22:53:25.697

AddressOf 不是这样工作的，但是如果您还知道方法的程序集/类，则可以使用反射来获取方法的委托。

# sharepoint - 仅使用 Windows SharePoint Services 3.0 制作表单？

> ID：430071
> 
> 赞同：0
> 
> 时间：2009-01-09T22:55:50.607
> 
> 标签：sharepoint, forms, wss-3.0

在大多数情况下，我的组织对 WSS 3.0（不升级到 MOSS）感到满意，但有一个例外，实际上我们只想以某种方式提出一种形式。这是相当大的表格（基本上是 IT 服务的更改请求，在纸面上很容易 2 个完整的 8.5 x 11 页）。我们将自定义 ASP.NET 编码视为单独的独立页面或 Web 部件。外面的其他人做了什么？MOSS 和 Infopath 并不是一个真正的选择，因为此时它对我们来说确实太贵了。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T23:24:07.010

您可以将其构建为独立的 HTML/ASP.Net 页面并将其作为页面查看器 Web 部件包含在内，或者为它滚动您自己的 Web 部件。如果您还不了解 SharePoint 开发，后者会稍微复杂一些，尽管[STSDEV](http://www.codeplex.com/stsdev)之类的工具可以消除很多痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T23:32:08.397

如果您必须自己开发，请直接在 asp.net 中进行。没有理由在 sharepoint 中这样做。学习曲线陡峭。开发基础设施对于一次性解决方案来说过于繁重。

大多数情况下，IT 服务的变更请求是工作流程的一部分。我相信最好的工作流工具是错误跟踪器。他们使用基于状态的工作流程。在大多数情况下，这更适合现实世界。所以，如果你有这样的工具，你应该有。选中要使用的选项用于变更请求管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-05-06T20:43:37.267

您可以使用 Infowise Smart List Pro 完成大部分工作。它旨在成为满足 80% 常见表单需求的简单解决方案。它具有出色的 SharePoint 列表增强功能，例如 - 字段权限、选项卡式视图、查看权限、默认值、规则等。关键是 Smart List Pro 不需要 MOSS 或 SharePoint Server。它只能在 WSS 或 SharePoint Foundations 上运行。它在 WSS 3.0 和 SharePoint 2010 上运行良好。

这是链接：[http ://www.infowisesolutions.com/product.aspx?id=SmartListPro](http://www.infowisesolutions.com/product.aspx?id=SmartListPro)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T23:33:00.437

您可以将 SharePoint 设计器与 WSS v3 结合使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T23:37:38.480

您可能需要考虑简化变更申请表。2 页的东西是相当多的信息来填写更改请求。

我使用标准的共享点列表来收集更改请求，并发现我很幸运能让人们填写前 4-5 个字段。

dataview webpart 可用于添加数据，而不是标准的新项目表单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-10T18:35:22.957

调查列表是表单的一个很好的简单替代方案，无需任何编码即可使用。输入“问题”，即。输入字段，然后附加插入的邮件警报。缺点是您无法控制表单的布局，它严格来说每个输入字段只有一行。这使得它可能不适合您的大型表格。但是它很容易使用，无论如何你都应该看看它。

如果您决定自己开发，请编写一个 Web 部件，并将其添加到 WSS 页面。（最简单的部署：从 ASP.Net WebPart 类继承，放入 GAC，在 SharePoint webapp 的 wpcatalog 文件夹中创建一个 .webpart 文件）。关于写 SharePoint 中的学习曲线太陡峭的人，我假设如果您将 WSS 用于您的内部 Web 应用程序，您将来会发现对 SharePoint 自定义的更多需求。学习如何做到这一点是一项很好的投资。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-23T10:04:31.097

我想说的最好方法是创建一个 Web 用户控件并将其添加到 Web 部件（容器 Web 部件）中 - 用户控件可以添加到 12 个配置单元中并从那里挑选。我已经尝试过了，并且鉴于页面有很多内容，它的开发方式非常简单。Webpart 和标准 asp 页面开发的问题是，没有设计视图。

# javascript - 如何在对象中使用嵌套函数

> ID：430074
> 
> 赞同：3
> 
> 时间：2009-01-09T22:58:27.527
> 
> 标签：javascript, object

假设您使用以下结构：

```
var Args = new Object();
Args.Age = '10';
Args.Weight = '10';

Args.GetAge = function() {
    return 'I am ' + Age + ' years old';
}

Args.GetWeight = function() {
    return 'I weigh ' + Weight + ' pounds';
} 
```

这很好用。但是是否可以使用泛型，这样您就不必为每个变量创建一个函数？例如，如下所示：

```
Args.GetValue = function(i) {
    return this.i;
} 
```

这似乎不起作用，但我什至不知道这是否可能。有人知道这个谜语的答案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T23:02:33.120

您可以通过 [] 表示法访问属性：

```
alert(Args["Age"]); 
```

而且，如下所述，您也可以通过 .Age 或 .Weight 读取值：

```
alert(Args.Age); 
```

这似乎很明显，所以我以为你在寻找其他东西。

顺便说一句，您可以将对象创建简化为：

```
var args = { Age : '10', Weight : '10' }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T23:05:00.463

```
var Args = {};
Args.Age = '10';
Args.Weight = '10';

alert(Args.Age);
alert(Args.Weight); 
```

它们都可用于读/写，您不需要设置器/获取器。

# bash - Shell 脚本模板

> ID：430078
> 
> 赞同：27
> 
> 时间：2009-01-09T23:01:55.040
> 
> 标签：bash, unix, scripting, standards, ksh

对于将一个好的 bash/ksh 脚本模板用作所有新创建的脚本的标准，您有什么建议？

我通常（`#!`在行之后）从带有文件名、概要、用法、返回值、作者、更改日志的注释掉的标题开始，并且适合 80 个字符的行。

所有文档行我都以双哈希符号开头，`##`因此我可以轻松地为它们进行 grep，并且本地 var 名称以“__”开头。

还有其他最佳实践吗？尖端？命名约定？返回码呢？

关于版本控制的评论：我们使用 SVN 可以，但是企业的另一个部门有一个单独的 repo，这是他们的脚本。如果没有@author 信息，我如何知道与 Q 联系的人？即使在 shell 上下文中，使用类似于 javadocs 的条目也有一些优点，恕我直言，但我可能错了。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-01-10T06:43:25.983

我会将 Norman 的答案扩展到 6 行，最后一个是空白的：

```
#!/bin/ksh
#
# @(#)$Id$
#
# Purpose 
```

第三行是一个版本控制标识字符串——它实际上是一个混合了一个`@(#)`可以被（SCCS）程序识别的SCCS标记''`what`和一个RCS版本字符串，当文件放在RCS下时扩展，默认VCS我用于我的私人用途。RCS 程序`ident`采用 的扩展形式`$Id$`，它可能看起来像`$Id: mkscript.sh,v 2.3 2005/05/20 21:06:35 jleffler Exp $`. 第五行提醒我，脚本顶部应该有其用途的描述；我将这个词替换为脚本的实际描述（例如，这就是它后面没有冒号的原因）。

在那之后，shell 脚本基本上没有任何标准。出现了标准片段，但没有出现在每个脚本中的标准片段。（我的讨论假设脚本是用 Bourne、Korn 或 POSIX (Bash) shell 表示法编写的。关于为什么有人在`#!`sigil 之后放置 C Shell 衍生品的人生活在罪恶中，有一个完整的单独讨论。）

例如，每当脚本创建中间（临时）文件时，此代码就会以某种形式出现：

```
tmp=${TMPDIR:-/tmp}/prog.$$
trap "rm -f $tmp.?; exit 1" 0 1 2 3 13 15

...real work that creates temp files $tmp.1, $tmp.2, ...

rm -f $tmp.?
trap 0
exit 0 
```

第一行选择一个临时目录，如果用户没有指定替代目录，则默认为 /tmp（$TMPDIR 已被广泛认可并由 POSIX 标准化）。然后它会创建一个包含进程 ID 的文件名前缀。这不是安全措施；这是一个简单的并发措施，防止脚本的多个实例践踏彼此的数据。（为了安全起见，在非公共目录中使用不可预测的文件名。）第二行确保如果 shell 接收到任何信号 SIGHUP (1) `rm`、`exit`SIGINT (2)、 SIGQUIT (3)、SIGPIPE (13) 或 SIGTERM (15)。' `rm`' 命令删除任何与模板匹配的中间文件；该`exit`命令确保状态不为零，表示某种错误。这 '`trap`' of 0 表示如果 shell 出于任何原因退出，代码也会被执行——它涵盖了标记为“实际工作”部分中的粗心。最后的代码然后删除所有幸存的临时文件，*然后*在退出时解除陷阱，最后以零（成功）状态退出。显然，如果您想以其他状态退出，您可以 - 只需确保在运行`rm`and`trap`行之前将其设置在变量中，然后使用`exit $exitval`.

我一般用下面的方法把脚本中的路径和后缀去掉，这样`$arg0`报错的时候就可以用了：

```
arg0=$(basename $0 .sh) 
```

我经常使用一个shell函数来报错：

```
error()
{
    echo "$arg0: $*" 1>&2
    exit 1
} 
```

如果只有一个或两个错误退出，我不会打扰该功能；如果还有更多，我会这样做，因为它简化了编码。我还创建了或多或少复杂的函数`usage`，以提供如何使用命令的摘要 - 同样，只有在不止一个地方可以使用它的情况下。

另一个相当标准的片段是一个选项解析循环，使用[`getopts`](https://www.gnu.org/software/bash/manual/bash.html#Bourne-Shell-Builtins)shell 内置：

```
vflag=0
out=
file=
Dflag=
while getopts hvVf:o:D: flag
do
    case "$flag" in
    (h) help; exit 0;;
    (V) echo "$arg0: version $Revision$ ($Date$)"; exit 0;;
    (v) vflag=1;;
    (f) file="$OPTARG";;
    (o) out="$OPTARG";;
    (D) Dflag="$Dflag $OPTARG";;
    (*) usage;;
    esac
done
shift $(expr $OPTIND - 1) 
```

或者：

```
shift $(($OPTIND - 1)) 
```

"$OPTARG" 周围的引号处理参数中的空格。Dflag 是累积的，但这里使用的符号会丢失参数中的空格。也有（非标准）方法可以解决该问题。

第一个移位符号适用于任何 shell（或者如果我使用反引号而不是 ' `$(...)`' 会这样做。第二个适用于现代 shell；甚至可能有方括号而不是括号的替代方案，但这有效，所以我已经没有费心去弄清楚那是什么。

现在的最后一个技巧是，我经常同时拥有 GNU 和非 GNU 版本的程序，我希望能够选择我使用的程序。因此，我的许多脚本都使用以下变量：

```
: ${PERL:=perl}
: ${SED:=sed} 
```

然后，当我需要调用 Perl or`sed`时，脚本使用`$PERL`or `$SED`。当某些行为不同时，这对我很有帮助——我可以选择操作版本——或者在开发脚本时（我可以在不修改脚本的情况下向命令添加额外的仅调试选项）。（有关和相关符号的信息，请参阅[Shell 参数扩展。）](https://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)`${VAR:=value}`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2011-10-13T14:19:01.927

我将第一组## 行用于使用文档。我现在不记得我第一次看到这个的地方。

```
#!/bin/sh
## Usage: myscript [options] ARG1
##
## Options:
##   -h, --help    Display this message.
##   -n            Dry-run; only show what would be done.
##

usage() {
  [ "$*" ] && echo "$0: $*"
  sed -n '/^##/,/^$/s/^## \{0,1\}//p' "$0"
  exit 2
} 2>/dev/null

main() {
  while [ $# -gt 0 ]; do
    case $1 in
    (-n) DRY_RUN=1;;
    (-h|--help) usage 2>&1;;
    (--) shift; break;;
    (-*) usage "$1: unknown option";;
    (*) break;;
    esac
  done
  : do stuff.
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-10T07:39:38.693

任何将在野外发布的代码都应具有以下短标题：

```
# Script to turn lead into gold
# Copyright (C) 2009 Ima Hacker (i.m.hacker@foo.org)
# Permission to copy and modify is granted under the foo license
# Last revised 1/1/2009 
```

在代码头中保留更改日志是版本控制系统非常不方便时的倒退。最后修改日期向某人显示脚本的年龄。

如果您要依赖 bashism，请使用 #!/bin/bash 而不是 /bin/sh，因为 sh 是任何 shell 的 POSIX 调用。即使 /bin/sh 指向 bash，如果通过 /bin/sh 运行它，许多功能也会被关闭。大多数 Linux 发行版不会采用依赖于 bashism 的脚本，而是尽量做到可移植。

在继承其他人的脚本时，我发现人们倾向于在不需要的地方（例如`# loop over $var`）和非常零星地在需要注释*的*地方（例如超长的 Perl 单行代码或带有数十个参数的 JVM 执行）进行大量注释）。这根本不是 shell 脚本所独有的，在许多已建立的代码库中都是一个问题，但在脚本中尤其令人沮丧。我不知道`/bin/foo -- {mile long list of arguments}`通过查看它会做什么，但我确实知道编写脚本的结构。评论也非常感谢您所做的事情在表面上看起来有点疯狂。

有些 shell 不喜欢输入类型化的“局部”变量。我相信直到今天 Busybox（一种常见的救援外壳）就是其中之一。改为使用 GLOBALS_OBVIOUS，它更容易阅读，尤其是在通过 /bin/sh -x ./script.sh 进行调试时。

我个人的偏好是让逻辑自己说话，并尽量减少解析器的工作。例如，很多人可能会写：

```
if [ $i = 1 ]; then
    ... some code 
fi 
```

我只是在哪里：

```
[ $i = 1 ] && {
    ... some code
} 
```

同样，有人可能会写：

```
if [ $i -ne 1 ]; then
   ... some code
fi 
```

...我会在哪里：

```
[ $i = 1 ] || {
   ... some code 
} 
```

我唯一一次使用传统的 if / then / else 是如果有一个 else-if 可以混合使用。

只需查看大多数使用 autoconf 的免费软件包中的“配置”脚本，就可以研究非常好的可移植 shell 代码的一个可怕的疯狂示例。我说疯狂是因为它的 6300 行代码迎合了人类已知的每一个拥有类似 UNIX 外壳的系统。你不想要那种膨胀，但是研究其中的一些各种可移植性黑客是很有趣的..比如对那些可能将 /bin/sh 指向 zsh 的人很好 :)

我能给出的唯一其他建议是观看您在此处文档中的扩展，即

```
cat << EOF > foo.sh
   printf "%s was here" "$name"
EOF 
```

... 将扩展 $name，当您可能希望将变量保留在适当位置时。通过以下方式解决此问题：

```
 printf "%s was here" "\$name" 
```

这会将 $name 保留为变量，而不是扩展它。

我还强烈建议学习如何使用陷阱来捕获信号......并将这些处理程序用作样板代码。用一个简单的 SIGUSR1 告诉正在运行的脚本放慢速度非常方便 :)

我编写的大多数新程序（面向工具/命令行）都是从 shell 脚本开始的，这是对 UNIX 工具进行原型设计的好方法。

您可能还喜欢 SHC shell 脚本编译器，[请在此处查看](http://www.datsi.fi.upm.es/%7Efrosal/)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-04-11T14:30:44.773

这是我用于脚本外壳（bash 或 ksh）的标头。它`man`看起来很相似，也用于显示usage()。

```
#!/bin/ksh
#================================================================
# HEADER
#================================================================
#% SYNOPSIS
#+    ${SCRIPT_NAME} [-hv] [-o[file]] args ...
#%
#% DESCRIPTION
#%    This is a script template
#%    to start any good shell script.
#%
#% OPTIONS
#%    -o [file], --output=[file]    Set log file (default=/dev/null)
#%                                  use DEFAULT keyword to autoname file
#%                                  The default value is /dev/null.
#%    -t, --timelog                 Add timestamp to log ("+%y/%m/%d@%H:%M:%S")
#%    -x, --ignorelock              Ignore if lock file exists
#%    -h, --help                    Print this help
#%    -v, --version                 Print script information
#%
#% EXAMPLES
#%    ${SCRIPT_NAME} -o DEFAULT arg1 arg2
#%
#================================================================
#- IMPLEMENTATION
#-    version         ${SCRIPT_NAME} (www.uxora.com) 0.0.4
#-    author          Michel VONGVILAY
#-    copyright       Copyright (c) http://www.uxora.com
#-    license         GNU General Public License
#-    script_id       12345
#-
#================================================================
#  HISTORY
#     2015/03/01 : mvongvilay : Script creation
#     2015/04/01 : mvongvilay : Add long options and improvements
# 
#================================================================
#  DEBUG OPTION
#    set -n  # Uncomment to check your syntax, without execution.
#    set -x  # Uncomment to debug this shell script
#
#================================================================
# END_OF_HEADER
#================================================================ 
```

这是要使用的使用功能：

```
 #== needed variables ==#
SCRIPT_HEADSIZE=$(head -200 ${0} |grep -n "^# END_OF_HEADER" | cut -f1 -d:)
SCRIPT_NAME="$(basename ${0})"

  #== usage functions ==#
usage() { printf "Usage: "; head -${SCRIPT_HEADSIZE:-99} ${0} | grep -e "^#+" | sed -e "s/^#+[ ]*//g" -e "s/\${SCRIPT_NAME}/${SCRIPT_NAME}/g" ; }
usagefull() { head -${SCRIPT_HEADSIZE:-99} ${0} | grep -e "^#[%+-]" | sed -e "s/^#[%+-]//g" -e "s/\${SCRIPT_NAME}/${SCRIPT_NAME}/g" ; }
scriptinfo() { head -${SCRIPT_HEADSIZE:-99} ${0} | grep -e "^#-" | sed -e "s/^#-//g" -e "s/\${SCRIPT_NAME}/${SCRIPT_NAME}/g"; } 
```

这是您应该获得的：

```
# Display help
$ ./template.sh --help

    SYNOPSIS
    template.sh [-hv] [-o[file]] args ...

    DESCRIPTION
    This is a script template
    to start any good shell script.

    OPTIONS
    -o [file], --output=[file]    Set log file (default=/dev/null)
    use DEFAULT keyword to autoname file
    The default value is /dev/null.
    -t, --timelog                 Add timestamp to log ("+%y/%m/%d@%H:%M:%S")
    -x, --ignorelock              Ignore if lock file exists
    -h, --help                    Print this help
    -v, --version                 Print script information

    EXAMPLES
    template.sh -o DEFAULT arg1 arg2

    IMPLEMENTATION
    version         template.sh (www.uxora.com) 0.0.4
    author          Michel VONGVILAY
    copyright       Copyright (c) http://www.uxora.com
    license         GNU General Public License
    script_id       12345

# Display version info
$ ./template.sh -v

    IMPLEMENTATION
    version         template.sh (www.uxora.com) 0.0.4
    author          Michel VONGVILAY
    copyright       Copyright (c) http://www.uxora.com
    license         GNU General Public License
    script_id       12345 
```

您可以在此处获取完整的脚本模板：[http ://www.uxora.com/unix/shell-script/18-shell-script-template](http://www.uxora.com/unix/shell-script/18-shell-script-template)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2011-11-01T14:32:06.123

启用错误检测可以更轻松地及早检测脚本中的问题：

```
set -o errexit 
```

在第一个错误时退出脚本。这样你就可以避免继续做一些依赖于脚本前面的东西的事情，也许最终会出现一些奇怪的系统状态。

```
set -o nounset 
```

将对未设置变量的引用视为错误。避免运行诸如`rm -you_know_what "$var/"`unset 之类的东西非常重要`$var`。如果您知道可以取消设置变量，并且这是一种安全的情况，您可以在未`${var-value}`设置时使用不同的值，或者在未设置*或*为空`${var:-value}`时使用不同的值。

 *```
set -o noclobber 
```

很容易犯错误，即在要插入的`>`位置插入`<`，并覆盖您要读取的某些文件。如果您需要在脚本中破坏文件，您可以在相关行之前禁用它，然后再次启用它。

```
set -o pipefail 
```

使用一组管道命令的第一个非零退出代码（如果有）作为完整命令集的退出代码。这使得调试管道命令变得更加容易。

```
shopt -s nullglob 
```

如果没有匹配该表达式的文件，请避免按*字面意思*`/foo/*`解释您的 glob 。

 *您可以将所有这些组合成两行：

```
set -o errexit -o nounset -o noclobber -o pipefail
shopt -s nullglob 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-18T11:50:25.387

我的 bash 模板如下（在我的[vim 配置](https://github.com/hzheng/vimconf/blob/master/templates/sh)中设置）：

```
#!/bin/bash

## DESCRIPTION: 

## AUTHOR: $USER_FULLNAME

declare -r SCRIPT_NAME=$(basename "$BASH_SOURCE" .sh)

## exit the shell(default status code: 1) after printing the message to stderr
bail() {
    echo -ne "$1" >&2
    exit ${2-1}
} 

## help message
declare -r HELP_MSG="Usage: $SCRIPT_NAME [OPTION]... [ARG]...
  -h    display this help and exit
"

## print the usage and exit the shell(default status code: 2)
usage() {
    declare status=2
    if [[ "$1" =~ ^[0-9]+$ ]]; then
        status=$1
        shift
    fi
    bail "${1}$HELP_MSG" $status
}

while getopts ":h" opt; do
    case $opt in
        h)
            usage 0
            ;;
        \?)
            usage "Invalid option: -$OPTARG \n"
            ;;
    esac
done

shift $(($OPTIND - 1))
[[ "$#" -lt 1 ]] && usage "Too few arguments\n"

#==========MAIN CODE BELOW========== 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-01-10T05:16:53.567

我会建议

```
#!/bin/ksh 
```

就是这样。shell脚本的重量级块注释？我得到了威利斯。

建议：

1.  文档应该是数据或代码，而不是注释。至少一个`usage()`功能。看看 ksh 和其他 AST 工具如何在每个命令上使用 --man 选项记录自己。（无法链接，因为网站已关闭。）

2.  用 声明局部变量`typeset`。这就是它的用途。不需要讨厌的下划线。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-10-11T16:36:39.230

一般来说，对于我编写的每个脚本，我都有一些我喜欢遵守的约定。我编写所有脚本时都假设其他人可能会阅读它们。

我用我的标题开始每个脚本，

```
#!/bin/bash
# [ID LINE]
##
## FILE: [Filename]
##
## DESCRIPTION: [Description]
##
## AUTHOR: [Author]
##
## DATE: [XX_XX_XXXX.XX_XX_XX]
## 
## VERSION: [Version]
##
## USAGE: [Usage]
## 
```

我使用该日期格式，以便更轻松地进行 grep/搜索。我使用“[”大括号来表示人们需要自己输入的文本。如果它们出现在评论之外，我会尝试以“#[”开头。这样，如果有人按原样粘贴它们，就不会被误认为是输入或测试命令。检查手册页上的用法部分，以查看此样式作为示例。

当我想注释掉一行代码时，我使用一个'#'。当我将评论作为注释时，我使用双“##”。也使用该 `/etc/nanorc`约定。我发现它有助于区分选择不执行的评论；诗句作为注释创建的评论。

我所有的 shell 变量，我更喜欢用 CAPS 来做。我尽量保持在 4 到 8 个字符之间，除非另有必要。这些名称尽可能与它们的用法相关联。

如果成功，我也总是以 0 退出，如果错误则以 1 退出。如果脚本有许多不同类型的错误（实际上会帮助某人，或者可以以某种方式在某些代码中使用），我会选择一个记录在案的序列而不是 1。通常，退出代码在 * 中没有严格执行尼克斯世界。不幸的是，我从来没有找到一个好的通用数字方案。

我喜欢以标准方式处理参数。我总是更喜欢 getopts，而不是 getopt。我从不使用“读取”命令和 if 语句进行一些破解。我也喜欢使用 case 语句来避免嵌套 if。我对长选项使用翻译脚本，所以 --help 意味着 -h 到 getopts。我用 bash（如果可以的话）或通用 sh 编写所有脚本。

我从不在文件名或任何名称中使用 bash 解释符号（或任何解释符号）。具体来说..." ' ` $ & * # () {} [] -，我使用 _ 表示空格。

请记住，这些只是约定。最佳实践，粗略，但有时你被迫在界外。最重要的是在您的项目中和项目中保持一致。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-10-28T02:54:17.393

您可以做的是制作一个脚本，为脚本创建一个标题并让它在您最喜欢的编辑器中自动打开。我看到一个人在这个网站上这样做：

[http://code.activestate.com/recipes/577862-bash-script-to-create-a-header-for-bash-scripts/?in=lang-bash](http://code.activestate.com/recipes/577862-bash-script-to-create-a-header-for-bash-scripts/?in=lang-bash)

```
#!/bin/bash -       
#title           :mkscript.sh
#description     :This script will make a header for a bash script.
#author          :your_name_here
#date            :20110831
#version         :0.3    
#usage           :bash mkscript.sh
#notes           :Vim and Emacs are needed to use this script.
#bash_version    :4.1.5(1)-release
#=============================================================================== 
```

# python - 如何将字符串拆分为文本和数字？

> ID：430079
> 
> 赞同：78
> 
> 时间：2009-01-09T23:02:16.897
> 
> 标签：python, string, split

我想拆分这样的字符串

```
'foofo21'
'bar432'
'foobar12345' 
```

进入

```
['foofo', '21']
['bar', '432']
['foobar', '12345'] 
```

有人知道在 python 中执行此操作的简单方法吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2009-01-09T23:12:01.137

我将通过`re.match`以下方式使用来解决此问题：

```
import re
match = re.match(r"([a-z]+)([0-9]+)", 'foofo21', re.I)
if match:
    items = match.groups()
print(items)
>> ("foofo", "21") 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2009-01-10T06:17:25.597

```
>>> def mysplit(s):
... 头 = s.rstrip('0123456789')
... 尾 = s[len(head):]
...返回头部，尾部
...
>>> [mysplit(s) for s in ['foofo21', 'bar432', 'foobar12345']]
[('foofo', '21'), ('bar', '432'), ('foobar', '12345')]
>>>

```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2009-01-10T00:54:09.243

另一种选择：

```
>>> [re.split(r'(\d+)', s) for s in ('foofo21', 'bar432', 'foobar12345')]
[['foofo', '21', ''], ['bar', '432', ''], ['foobar', '12345', '']] 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2009-01-09T23:12:16.533

```
>>> r = re.compile("([a-zA-Z]+)([0-9]+)")
>>> m = r.match("foobar12345")
>>> m.group(1)
'foobar'
>>> m.group(2)
'12345' 
```

因此，如果您有一个具有该格式的字符串列表：

```
import re
r = re.compile("([a-zA-Z]+)([0-9]+)")
strings = ['foofo21', 'bar432', 'foobar12345']
print [r.match(string).groups() for string in strings] 
```

输出：

```
[('foofo', '21'), ('bar', '432'), ('foobar', '12345')] 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-01-09T23:40:54.463

我总是提出 findall() =)

```
>>> strings = ['foofo21', 'bar432', 'foobar12345']
>>> [re.findall(r'(\w+?)(\d+)', s)[0] for s in strings]
[('foofo', '21'), ('bar', '432'), ('foobar', '12345')] 
```

请注意，我使用的正则表达式比以前的大多数答案更简单（键入更少）。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-08-05T13:44:37.413

这是一个从任意长度的字符串中分隔多个单词和数字的简单函数，re 方法仅分隔前两个单词和数字。我认为这将在未来对其他人有所帮助，

```
def seperate_string_number(string):
    previous_character = string[0]
    groups = []
    newword = string[0]
    for x, i in enumerate(string[1:]):
        if i.isalpha() and previous_character.isalpha():
            newword += i
        elif i.isnumeric() and previous_character.isnumeric():
            newword += i
        else:
            groups.append(newword)
            newword = i

        previous_character = i

        if x == len(string) - 2:
            groups.append(newword)
            newword = ''
    return groups

print(seperate_string_number('10in20ft10400bg'))
# outputs : ['10', 'in', '20', 'ft', '10400', 'bg'] 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-04-25T06:27:21.067

不使用正则表达式，使用 isdigit() 内置函数，仅当起始部分是文本且后部分是数字时才有效

```
def text_num_split(item):
    for index, letter in enumerate(item, 0):
        if letter.isdigit():
            return [item[:index],item[index:]]

print(text_num_split("foobar12345")) 
```

**输出 ：**

```
['foobar', '12345'] 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-11-19T19:28:53.407

```
import re

s = raw_input()
m = re.match(r"([a-zA-Z]+)([0-9]+)",s)
print m.group(0)
print m.group(1)
print m.group(2) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-22T18:27:59.483

这是该问题的简单解决方案，无需`regex`：

```
user = input('Input: ') # user = 'foobar12345'
int_list, str_list = [], []

for item in user:
 try:
    item = int(item)  # searching for integers in your string
  except:
    str_list.append(item)
    string = ''.join(str_list)
  else:  # if there are integers i will add it to int_list but as str, because join function only can work with str
    int_list.append(str(item))
    integer = int(''.join(int_list))  # if you want it to be string just do z = ''.join(int_list)

final = [string, integer]  # you can also add it to dictionary d = {string: integer}
print(final) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-08T12:38:35.930

对于字符串中有多个随机放置的数字的情况，这有点长，但更通用。此外，它不需要导入。

```
def getNumbers( input ):
    # Collect Info
    compile = ""
    complete = []

    for letter in input:
        # If compiled string
        if compile:
            # If compiled and letter are same type, append letter
            if compile.isdigit() == letter.isdigit():
                compile += letter

            # If compiled and letter are different types, append compiled string, and begin with letter
            else:
                complete.append( compile )
                compile = letter

        # If no compiled string, begin with letter
        else:
            compile = letter

    # Append leftover compiled string
    if compile:
        complete.append( compile )

    # Return numbers only
    numbers = [ word for word in complete if word.isdigit() ]

    return numbers 
```

# java - 在 Java 中，Class.forName 可以返回 null 吗？

> ID：430089
> 
> 赞同：6
> 
> 时间：2009-01-09T23:05:46.610
> 
> 标签：java, classloader

在 Java 中，Class.forName 是否可以返回 null，或者如果找不到该类，它是否总是抛出 ClassNotFoundException 或 NoClassDefFoundError？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-09T23:09:22.513

Java Docs 说如果找不到类，它将抛出 ClassNotFoundException，所以我会说它永远不会返回 null。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T23:09:09.473

由于此方法的文档中的任何地方都没有提到 null ，而且似乎没有任何情况让该方法返回 null 而不是抛出异常是有意义的，我认为假设它是非常安全的从不返回 null。

它不会抛出 NoClassDefFoundError，但可能会抛出 ClassNotFoundException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T00:29:17.003

使用默认的类加载器，你肯定不会收到空值。但是，正如 jdigital 所说，您可能会受到任意数量的自定义类加载器的影响，具体取决于您可能正在使用的安全模型或其他类型的代理加载器（有意或无意）。

哎呀，即使 forName 也可以将 ClassLoader 作为参数... :)

皮科

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-01-10T03:13:39.197

@Dan Dyer 错了， Class.forName*可以*throw `NoClassDefFoundError`，如果它尝试的类在其静态初始化程序中出现 ClassNotFoundException 错误。以下是unte

```
class Outer {
  public static final void main(final String[] args) throws Exception{
    Class.forName("Inner");
  }
} 
```

如果你在没有其他文件的目录中编译并运行它，你会得到`ClassNotFoundException: Inner`

现在将以下内容添加到同一目录中，编译所有内容并`java Outer`查看它运行正常。

```
class Inner {
  static Inner2 _i2 = new Inner2();
}

class Inner2 {} 
```

最后，删除Inner2.class并重新运行Outer，你*会*得到`NoClassDefFoundError: Inner2`，`caused by ClassNotFoundException: Inner2`

# windows - 适用于 Windows 的开源 Syslog 守护程序

> ID：430107
> 
> 赞同：20
> 
> 时间：2009-01-09T23:14:55.297
> 
> 标签：windows, open-source, logging, syslog

任何人都可以推荐一个适用于 Windows 的开源 Syslog Daemon（特别是 Windows 2008 64 位）。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-01-10T01:09:43.783

[Kiwi Syslog](http://www.kiwisyslog.com/kiwi-syslog-server-overview/)或[Star Syslog daemon lite](http://www.thestarsoftware.com/syslogdaemonlite.html) -free，但不是 OSS。

或[Windows 的 Syslog](http://syslog-win32.sourceforge.net/) - 免费和 OSS。

或[BazSysLog](http://www.oocities.org/bazsyslog1/) - 免费的、基于 gui 的日志捕获，但不一定是请求的“守护程序”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-05T15:19:40.190

[这](https://github.com/thenotandy/FantailSyslogServer)是一个用 C# 编写的记录到 SQL Server 的日志。只有源代码可供下载，但它具有很大的潜力。

# process - 客户端和服务器之间必须发生的过程，Kerberos 身份验证

> ID：430109
> 
> 赞同：0
> 
> 时间：2009-01-09T23:17:04.917
> 
> 标签：process, client, kerberos

我试图学习和理解 Kerberos，我需要了解客户端和服务器之间必须发生的过程——Windows 和非 Windows 平台——以启用 Kerberos 身份验证。寻找一些帮助来更好地解释这个过程。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T23:59:11.447

网上资源很多。您的问题必须更具体。以下是一些资源：

[http://technet.microsoft.com/en-us/library/bb742516.aspx](http://technet.microsoft.com/en-us/library/bb742516.aspx)

[http://www.markwilson.co.uk/blog/2005/06/kerberos-authentication-explained.htm](http://www.markwilson.co.uk/blog/2005/06/kerberos-authentication-explained.htm)

谷歌建议。

# c# - C# 引用和指针有什么区别？

> ID：430112
> 
> 赞同：91
> 
> 时间：2009-01-09T23:20:45.457
> 
> 标签：c#, pointers, reference

我不太明白 C# 引用和指针之间的区别。他们都指向记忆中的一个地方，不是吗？我能弄清楚的唯一区别是指针不那么聪明，不能指向堆上的任何东西，免于垃圾收集，并且只能引用结构或基类型。

我问的一个原因是人们认为人们需要很好地理解指针（我猜是从 C 语言）才能成为一名优秀的程序员。许多学习高级语言的人错过了这一点，因此有这个弱点。

我只是不明白指针有什么复杂之处？它基本上只是对内存中某个位置的引用，不是吗？它可以返回其位置并直接与该位置的对象交互吗？

我错过了重要的一点吗？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2009-01-10T02:37:28.193

指针和引用之间存在细微但极其重要的区别。指针指向内存中的位置，而引用指向内存中的对象。指针不是“类型安全的”，因为您无法保证它们指向的内存的正确性。

以下面的代码为例

```
int* p1 = GetAPointer(); 
```

这是类型安全的，因为 GetAPointer 必须返回与 int* 兼容的类型。然而，仍然不能保证 *p1 实际上会指向一个 int。它可以是 char、double 或只是指向随机内存的指针。

然而，引用指向特定对象。对象可以在内存中移动，但引用不能无效（除非您使用不安全的代码）。在这方面，引用比指针安全得多。

```
string str = GetAString(); 
```

在这种情况下 str 具有以下两种状态之一：1）它不指向任何对象，因此为 null 或 2）它指向一个有效的字符串。就是这样。CLR 保证是这种情况。它不能也不会用于指针。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2009-01-09T23:22:03.393

C# 引用可以并且将被垃圾收集器重定位，但普通指针是静态的。这就是为什么我们`fixed`在获取指向数组元素的指针时使用关键字，以防止它被移动。

编辑：从概念上讲，是的。它们或多或少是相同的。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-01-09T23:46:48.023

引用是一个“抽象”指针：你不能用引用做算术，你不能用它的值玩任何低级技巧。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-11-13T00:48:58.737

引用和指针之间的主要区别在于，指针是位的集合，其内容仅在它被主动用作指针时才有意义，而引用不仅封装了一组位，还封装了一些元数据，这些元数据保存了告知其存在的基础框架。如果存在指向内存中某个对象的指针，并且该对象被删除但指针没有被擦除，则指针的继续存在不会造成任何伤害，除非或直到尝试访问它指向的内存。如果不尝试使用指针，则不会关心它的存在。相比之下，.NET 或 JVM 等基于引用的框架要求系统始终可以识别存在的每个对象引用，并且存在的每个对象引用必须始终要么是`null`或者识别其正确类型的对象。

请注意，每个对象引用实际上封装了两种信息：(1) 它标识的对象的字段内容，以及 (2) 对同一对象的其他引用集。尽管没有任何机制可以让系统快速识别对象的所有引用，但对象的其他引用集通常可能是引用封装的最重要的东西（尤其是在类型`Object`的东西用作锁定令牌之类的东西）。尽管系统为每个对象保留了一些数据以供在 中使用`GetHashCode`，但对象除了存在于它们的引用集之外没有真正的身份。如果`X`持有对对象的唯一现存引用，则替换`X`引用具有相同字段内容的新对象将没有可识别的效果，除了更改返回的位`GetHashCode()`，甚至不能保证这种效果。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-01-09T23:25:56.317

指针指向内存地址空间中的一个位置。引用指向一个数据结构。垃圾收集器（用于压缩内存空间）一直在移动数据结构（嗯，不是那么频繁，但时不时地）。此外，正如您所说，没有引用的数据结构会在一段时间后被垃圾收集。

此外，指针只能在不安全的上下文中使用。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-01-09T23:28:04.660

首先，我认为您需要在语义中定义一个“指针”。你的意思是你可以在不安全的代码中用[fixed](http://msdn.microsoft.com/en-us/library/f58wzh21(VS.80).aspx)创建的指针吗？您的意思是从本地调用或[Marshal.AllocHGlobal获得的](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.allochglobal.aspx)[IntPtr](http://msdn.microsoft.com/en-us/library/system.intptr(VS.71).aspx)吗？你的意思是[GCHandle](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.gchandle.aspx)吗？所有这些本质上都是相同的东西——存储某些东西的内存地址的表示——可以是类、数字、结构等等。并且为了记录，他们当然可以在堆上。

指针（以上所有版本）是固定项。GC 不知道该地址是什么，因此无法管理对象的内存或生命周期。这意味着您将失去垃圾收集系统的所有好处。您必须手动管理对象内存，并且您有泄漏的可能性。

另一方面，引用几乎是 GC 知道的“托管指针”。它仍然是一个对象的地址，但现在 GC 知道目标的详细信息，因此它可以移动它、执行压缩、完成、处置以及托管环境所做的所有其他好事情。

实际上，主要区别在于您将如何以及为什么要使用它们。对于托管语言中的绝大多数情况，您将使用对象引用。指针对于进行互操作和很少需要真正快速的工作变得很方便。

**编辑：**事实上[，这是一个很好的例子](http://blog.opennetcf.com/ctacke/2007/06/08/ASimpleExampleOfComplexMarshaling.aspx)，说明您何时可以在托管代码中使用“指针”——在这种情况下，它是一个 GCHandle，但可以使用 AllocHGlobal 或在字节数组或结构上使用固定来完成完全相同的事情。我倾向于更喜欢 GCHandle，因为它对我来说感觉更像“.NET”。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-01-09T23:31:46.243

我认为对于开发人员来说理解指针的*概念*很重要——即理解间接性。这并不意味着他们必须使用指针。同样重要的是要理解**引用**的**概念与指针**的概念不同，虽然只是细微的差别，但引用的实现几乎总是**指针**。

也就是说，持有引用的变量只是持有指向对象的指针的指针大小的内存块。但是，不能像使用指针变量一样使用此变量。在 C#（和 C，和 C++，...）中，指针可以像数组一样被索引，但引用不能。在 C# 中，垃圾收集器会跟踪引用，而指针则不能。在 C++ 中，可以重新分配指针，而不能重新分配引用。在语法和语义上，指针和引用是完全不同的，但在机制上，它们是相同的。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-01-09T23:58:30.450

指针可以指向应用程序地址空间中的任何字节。引用受到 .NET 环境的严格约束、控制和管理。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-03-03T01:35:06.293

引用相对于指针的最大好处之一是更简单和可读性更高。与往常一样，当您简化某些东西时，您会使其更易于使用，但会以灵活性和控制为代价，您可以使用低级别的东西（正如其他人提到的那样）。

指针经常被批评为“丑陋”。

```
class* myClass = new class(); 
```

现在每次使用它时，您都必须先取消引用它

```
myClass->Method() or (*myClass).Method() 
```

尽管失去了一些可读性并增加了复杂性，但人们仍然需要经常使用指针作为参数，以便您可以修改实际对象（而不是按值传递）并获得不必复制巨大对象的性能增益。

对我来说，这就是为什么引用首先“诞生”以提供与指针相同的好处，但没有所有指针语法。现在你可以传递实际的对象（不仅仅是它的值）并且你有一种更易读、更正常的与对象交互的方式。

```
MyMethod(&type parameter)
{
   parameter.DoThis()
   parameter.DoThat()
} 
```

C++ 引用与 C# / Java 引用的不同之处在于，一旦您为其分配了一个值，您就无法重新分配它（并且必须在声明它时分配它）。这与使用 const 指针（不能重新指向另一个对象的指针）相同。

Java 和 C# 是非常高级的现代语言，它们清理了多年来在 C / C++ 中积累的许多混乱，而指针绝对是需要“清理”的东西之一。

至于您关于了解指针的评论使您成为更强大的程序员，这在大多数情况下都是正确的。如果您知道某些东西的“工作原理”，而不是在不知道的情况下使用它，我会说这通常会给您带来优势。有多少优势总是会有所不同。毕竟，在不知道如何实现的情况下使用某些东西是 OOP 和接口的众多优点之一。

在这个具体的例子中，知道指针对你的引用有什么帮助？理解 C# 引用不是对象本身而是指向对象是一个非常重要的概念。

**#1：你不是按值传递的** 。对于初学者来说，当你使用指针时，你知道指针只保存一个地址，就是这样。变量本身几乎是空的，这就是为什么它作为参数传递非常好。除了性能提升之外，您正在使用实际对象，因此您所做的任何更改都不是临时的

**#2：多态/接口** 当你有一个接口类型的引用并且它指向一个对象时，你只能调用那个接口的方法，即使这个对象可能有更多的能力。对象也可以不同地实现相同的方法。

如果你很好地理解了这些概念，那么我认为你不会因为没有使用指针而错过太多。C++ 经常被用作学习编程的语言，因为有时候弄脏你的手是件好事。此外，使用较低级别的方面可以让您欣赏现代语言的舒适性。我从 C++ 开始，现在是一名 C# 程序员，我确实觉得使用原始指针帮助我更好地理解了底层发生的事情。

我不认为每个人都必须从指针开始，但重要的是他们理解为什么使用引用而不是值类型，理解它的最佳方法是查看它的祖先，即指针。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-09T23:27:09.140

使指针变得有些复杂的不是它们是什么，而是你可以用它们做什么。而当你有一个指向指针的指针时。那是它真正开始变得有趣的时候。

# postgresql - 如何启用 PostgreSQL 函数分析器？

> ID：430123
> 
> 赞同：12
> 
> 时间：2009-01-09T23:27:25.737
> 
> 标签：postgresql, function, profiling, plpgsql

我花了一段时间才弄清楚，几周前我在外语维基上找到了答案，这非常有帮助，所以我想我会分享。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T23:31:08.693

在 Win32 上的 PostgreSQL 8.3 上，分析插件默认安装，但未加载。只需执行此 SQL：

```
LOAD '$libdir/plugins/plugin_profiler.dll';
SET plpgsql.profiler_tablename = 'bazzybar'; 
```

...然后当你想分析一些代码时，

```
drop table if exists bazzybar; -- reset the profiling stats
select my_function_here('lala',123);  -- this line and variations as many times as you deem fit
select * from bazzybar; -- show the time spent on each line of your function 
```

# c# - 你将如何实现？：C# 中的树上有很多规则

> ID：430125
> 
> 赞同：2
> 
> 时间：2009-01-09T23:28:35.003
> 
> 标签：c#, tree, design-patterns, rules, traversal

我有一个表示 C# 代码的数据结构，如下所示：

```
class Namespace:
    string Name;
    List<Class> Classes;

class Class:
    string Name;
    List<Property> Properties;
    List<Method> Methods;
    List<Method> Constructors;
    List<Field> Fields;
    List<Class> InnerClasses;
    Class Parent;
    List<Interface> Implements; 
```

...我正在使用简单的词法分析器/解析器组合构建它。我需要遍历树并应用大量规则（超过 3000 条）。规则在遇到树中不同（且相当复杂）的模式时运行。例如，当一个类仅在同一个程序集中实现接口时，就会运行一条规则。

我最初的幼稚实现迭代每个规则，然后每个规则遍历树以查找其特定模式。当然，这需要相当多的时间，即使是少量的源代码。

我想这可以比作防病毒软件的工作原理，识别大量二进制代码上的复杂模式。

你会如何建议使用这种软件？

EDT：只是想补充一下：不，我不会重新实现 FxCop。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T23:34:43.697

您可以尝试汇总您的 3000 条规则。3000 中的一些，我猜想假设 3000 中的另一个成员。假设规则 12 检查“类实现接口”。规则 85 可能是“一个类只在同一个程序集中实现接口”。如果规则 12 失败，则根本不需要运行规则 85。

这种方法（alpha-beta pruning）要么需要您重新构建算法以搜索类树，同时查找所有规则模式。或者存储先前规则通过已识别当前规则通过不相关的记录。

评论：我有一个小块级别的帐户，所以我不能直接评论。你能举一个可能还有 2 条规则的例子吗？我目前认为您的算法是 0(n*n) （从大 0 符号帖子复制后）

O(n*log(n))：一种执行某种分而治之策略的算法。对大 n 有害。典型例子：归并排序

O(n*n)：某种嵌套循环。即使 n 很小也会很痛。常见于朴素矩阵计算。如果可以的话，你想避免这种算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T00:18:18.960

我会考虑为模式/上下文创建某种表示形式，然后创建一个从模式到一组动作的哈希映射。在不了解更多需求的情况下，很难更具体，但作为示例，字符串`"Namespace/Class"`可能是一组操作的键，这些操作依赖于知道命名空间和它包含的单个类，`"Class/Interface"`可能是集合的键处理单个类和它实现的单个接口的操作等。

树遍历算法可以跟踪它自己的上下文（父节点、当前节点等），根据它在树中的位置形成一个键，检索该键的动作集，然后触发所有这些动作，给每个参数结构，该结构提供与键模式相对应的实际节点。

这相当于创建了一个特殊用途的规则引擎，它处理形式为“如果我有一个类`C`，并且它实现了一个接口`I`，那么……用`C`和`I`”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T02:49:20.057

@吉米麦克纳尔蒂

这是一个很好的方法。Alpha-beta pruning 你说它叫什么？它正在重新安排规则，这样如果一个人失败了，它就会排除其他人。我对吗？我要调查一下。

以下是其他规则的一些示例：

*   类是最终的，并且不实现/扩展程序集之外的类。
*   方法是虚拟的，但类是私有的或内部的。
*   类或方法具有特定的属性。
*   方法参数在编译时是已知的。

我很想听听任何其他可以让我更快/更智能地执行这种逻辑的技术。

谢谢

# powershell - 使用 PowerShell 停止 IIS6 中的“默认网站”

> ID：430127
> 
> 赞同：5
> 
> 时间：2009-01-09T23:29:44.050
> 
> 标签：powershell, iis-6

我已经进行了几次 Google 搜索，但找不到使用 PowerShell 停止/启动“默认网站”（在 II6 中）的好示例。

这...

```
$server = "localhost"
$siteName = "default web site"
$iis = [ADSI]"IIS://$server/W3SVC"
$site = $iis.psbase.children | where { $_.keyType -eq "IIsWebServer" 
        -AND $_.ServerComment -eq $siteName } 
```

从[这里](https://stackoverflow.com/questions/330608/changing-iis6-site-home-directory-with-powershell-answered)开始，但我无法正确使用“开始”/“停止”语法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-10T21:07:05.427

检查 serverState 属性。值 2 表示正在运行，值 3 表示停止，您可以这样设置它们：

## 启动网站

$site.serverState = 2

$site.setInfo()

## 停止网站

$site.serverState = 3

$site.setInfo()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T06:42:26.827

不能使用[Adsutil.vbs 管理脚本 (IIS 6.0)](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/d3df4bc9-0954-459a-b5e6-7a8bc462960c.mspx?mfr=true)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T15:23:23.857

[http://www.microsoft.com/technet/scriptcenter/scripts/default.mspx?mfr=true](http://www.microsoft.com/technet/scriptcenter/scripts/default.mspx?mfr=true)。该示例使用 VBScript，但它与 PowerShell 中的技术完全相同。

# javascript - 可以使用 Google 代码为最终用户托管 javascript 应用程序吗？

> ID：430128
> 
> 赞同：0
> 
> 时间：2009-01-09T23:30:43.330
> 
> 标签：javascript, web-applications

我正在开发一个用户通过可配置脚本标签加载的 javascript 应用程序。我把它托管在它自己的谷歌代码项目上，因为它是开源的。可以将加载应用程序的 url 指向其代码站点上的文件下载链接吗？例如：

```
<script type="text/javascript" src="http://myprojectname.googlecode.com/files/myproject.js"></script> 
```

我知道像 jQuery 和原型这样的常见 JS 库的托管方式类似，但我想确定一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T23:37:15.000

[http://code.google.com/tos.html](http://code.google.com/tos.html)

> 您同意 Google 对删除或未能存储由 Google 服务维护或传输的任何内容和其他通信不承担任何责任或义务。您承认 Google 可能对您通过 Google 服务发送或接收的传输数量或使用的存储空间量没有设置固定上限；但是，我们保留自行决定随时设置限制的权利，无论是否通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T23:55:41.343

如果有人在 Google 代码中对应用程序进行了更改，那么它将影响使用它的页面的访问者。这可能是也可能不是您想要的。您可能宁愿有机会在实施更改之前查看更改。

# amazon-ec2 - 对 EC2 实例进行分类

> ID：430141
> 
> 赞同：3
> 
> 时间：2009-01-09T23:35:28.357
> 
> 标签：amazon-ec2, amazon-web-services, cloud

有没有办法区分[EC2](http://aws.amazon.com/ec2/)实例集？

我的用例是我有一堆网络层机器和一堆搜索层机器；目前，跟踪每个实例正在执行的操作的唯一方法是在您自己的资产目录中，例如 LDAP 或数据库。

理想情况下，我希望能够从 AWS API 提供的元数据中确定机器的*角色。*

目前，我想出的唯一方法是在不同的安全组中拥有不同的机器角色（即使不是严格要求）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T23:52:47.777

**更新：** EC2 现在支持对实例进行分类的“标签”。

[http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/index.html?Using_Tags.html](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/index.html?Using_Tags.html)

* * *

我一直使用安全组进行分类。我认为使用它们没有任何问题！

组不仅允许分类，还允许不同的防火墙规则。每个实例还可以有多个组，例如“生产”、“数据库”

参考：[http ://docs.amazonwebservices.com/AWSEC2/2008-12-01/DeveloperGuide/index.html?ApiReference-SOAP-RunInstances.html](http://docs.amazonwebservices.com/AWSEC2/2008-12-01/DeveloperGuide/index.html?ApiReference-SOAP-RunInstances.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-13T17:23:38.683

您可能想查看一些第三方工具，例如 rightscale，它添加了一些管理云资源的功能，以及附加元数据，例如卷和实例上有意义的标签。我现在只使用免费版本，有点受限，但它仍然比亚马逊提供的管理工具增加了很多。

亚马逊刚刚宣布了他们自己的控制台 ( [https://console.aws.amazon.com/](https://console.aws.amazon.com/) )，最初让我对 RightScale 免费版本的前景感到兴奋。然而，它看起来只是一个功能等同于 ElasticFox 的 Web UI。那好吧。

我仍然在本地保存一个电子表格来跟踪这个混乱。另外，这是非常低的技术，但是我在每台机器的桌面上（在管理员帐户下）放置了一个文本文件，文件名中包含机器的目的，所以我可以将它们区分开来（生成的机器名称绝对没有没有备忘单的帮助。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-15T22:53:10.500

如果您只想在线关注您的 EC2 实例，我会支持 John 使用免费 RightScale 帐户的投票。付费版本为您提供了更多功能，但价格可能会非常昂贵。

新的 AWS 管理控制台是一个不错的 UI，比 ElasticFox 更容易执行常见操作，例如启动实例、创建和附加 EBS 卷等，但我真的很惊讶他们没有添加标记实例的功能和卷。那些亚马逊 ID 字符串并不容易记住，是吗 ;-)

AWS 控制台确实显示了每个实例的安全组，因此 Gerald 使用安全组来识别不同实例组的建议可以在那里工作，但它仍然不如为每个设备设置一个可编辑的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-17T15:36:11.187

虽然它不在 AWS 元数据中，但您始终可以使用[iClassify 之](https://wiki.hjksolutions.com/display/IC/Home)类的东西。它被设计为服务器的元数据存储库，无论是否为 EC2。

# algorithm - 什么算法计算地图上从 A 点到 B 点的方向？

> ID：430142
> 
> 赞同：559
> 
> 时间：2009-01-09T23:35:58.483
> 
> 标签：algorithm, path-finding

地图提供商（例如 Google 或 Yahoo! Maps）如何建议路线？

我的意思是，他们可能有某种形式的真实世界数据，当然包括距离，也可能包括行驶速度、人行道的存在、火车时刻表等。但假设数据采用更简单的格式，比如一个非常大的有向图边缘权重反映距离。我希望能够快速计算从一个任意点到另一点的方向。有时这些点会靠近（在一个城市内），而有时它们会相距很远（越野）。

像 Dijkstra 算法这样的图算法将不起作用，因为图是巨大的。幸运的是，像 A* 这样的启发式算法可能会起作用。但是，我们的数据非常结构化，也许某种分层方法可能有效？（例如，存储相距较远的某些“关键”点之间的预先计算的方向，以及一些局部方向。那么两个远点的方向将涉及到一个关键点的局部方向，到另一个关键点的全局方向，然后是局部方向再次指示。）

在实践中实际使用了哪些算法？

PS。这个问题的动机是发现在线地图方向的怪癖。与三角不等式相反，有时谷歌地图认为[XZ比在](http://maps.google.com/maps?f=d&saddr=Place+Jacques+Bonsergent,+75010+Paris&daddr=Place+Louis+Lepine,+75004+Paris&hl=en&geocode=&mra=ls&dirflg=w&sll=48.861295,2.35161&sspn=0.013778,0.029655&ie=UTF8&z=14 "雅克·邦瑟金特广场 - 路易斯·勒平广场")[XYZ](http://maps.google.com/maps?f=d&saddr=Place+Jacques+Bonsergent,+75010+Paris&daddr=Square+Emile+Chautemps,+75003+Paris+to:Place+Louis+Lepine,+75004+Paris&hl=en&geocode=&mra=ls&dirflg=w&sll=48.869359,2.357833&sspn=0.006888,0.014827&ie=UTF8&z=14 "通过 Square Emile Chautemps")中使用中间点需要更长的时间和更远的距离。但也许他们的步行方向也针对另一个参数进行了优化？

聚苯乙烯。这是对三角不等式的另一个违反，这表明（对我而言）他们使用某种分层方法：[XZ](http://maps.google.com/maps?f=d&saddr=214,+boulevard+de+la+Villette,+75019+Paris&daddr=Passage+des+Patriarches,+75005+Paris&hl=en&geocode=&sll=48.86278,2.35595&sspn=0.05511,0.118618&mra=cc&dirflg=w&ie=UTF8&z=13 "214, boulevard de la Villette - Passages des Patriarches")与[XYZ](http://maps.google.com/maps?f=d&saddr=214,+boulevard+de+la+Villette,+75019+Paris&daddr=Square+Emile+Chautemps,+75003+Paris+to:Passage+des+Patriarches,+75005+Paris&hl=en&geocode=&mra=ls&dirflg=w&sll=48.86278,2.35595&sspn=0.05511,0.118618&ie=UTF8&ll=48.862682,2.357941&spn=0.05511,0.118618&z=13 "通过 Square Emile Chautemps")。前者似乎使用了著名的 Boulevard de Sebastopol，尽管它有点偏僻。

**编辑**：这些示例似乎都不再有效，但在原始帖子发布时都有效。

* * *

## 回答 #1

> 赞同：539
> 
> 时间：2009-01-11T12:41:34.683

作为一个在地图公司工作了 18 个月的人，其中包括研究路由算法……是的，[Dijkstra](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)确实有效，但有一些修改：

*   不是从源头到目的地做一次[Dijkstra](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，而是从每一端开始，然后扩展两边，直到它们在中间相遇。这消除了大约一半的工作（2*pi*(r/2)^2 vs pi*r^2）。
*   为避免探索源和目的地之间每个城市的小巷，您可以拥有多个地图数据图层：仅包含高速公路的“高速公路”图层，仅包含次要街道的“次要”图层，等等。然后，您只探索更详细层的较小部分，并根据需要进行扩展。显然，这个描述遗漏了很多细节，但你明白了。

通过按照这些方式进行修改，您甚至可以在非常合理的时间范围内进行跨国路由。

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2009-02-21T22:12:28.193

这个问题在过去几年一直是一个活跃的研究领域。主要思想是对图进行**一次****预处理**，以**加快**所有**后续查询**。有了这些附加信息，可以非常快速地计算行程。尽管如此，**Dijkstra 算法**仍然是所有优化的基础。

 *******Arachnid*描述了基于分层信息的双向搜索和边缘修剪的用法。这些加速技术工作得很好，但最新的算法无论如何都优于这些技术。使用当前算法，可以在大陆道路网络上以不到**一毫秒的时间计算出最短路径。**Dijkstra 未修改算法的快速实现大约需要**10 秒**。

《[Engineering Fast Route Planning Algorithms](http://algo2.iti.uni-karlsruhe.de/1040.php) 》一文概述了该领域的研究进展。有关详细信息，请参阅该论文的参考资料。

已知最快的算法不使用数据中关于道路分层状态的信息，即它是高速公路还是地方道路。相反，他们在预处理步骤中计算自己的层次结构，该层次结构经过优化以加快路线规划。然后可以使用此预计算来修剪搜索：在 Dijkstra 算法期间，不需要考虑远离起点和目的地的慢速道路。好处是非常好的**性能**和结果的**正确性**保证。

第一个优化的路线规划算法只处理静态道路网络，这意味着图中的一条边具有固定的成本值。这在实践中并非如此，因为我们想要考虑交通拥堵或车辆相关限制等动态信息。最新的算法也可以处理此类问题，但仍有问题需要解决，研究仍在进行中。

如果您需要最短路径距离来计算**TSP**的解决方案，那么您可能对包含源和目的地之间所有距离的矩阵感兴趣。为此，您可以考虑[使用 Highway Hierarchies 计算多对多最短路径](http://algo2.iti.uni-karlsruhe.de/1044.php)。请注意，在过去 2 年中，这种情况已通过更新的方法得到改善。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-02-24T23:52:30.860

只是解决违反三角不等式的问题，希望他们优化的额外因素是常识。您不一定想要最短或最快的路线，因为它可能导致[混乱](http://www.theregister.co.uk/2006/04/05/crackpot_satnav/) [和](http://www.theregister.co.uk/2007/03/26/subaquatic_merc/) [破坏](http://www.theregister.co.uk/2007/02/20/hampshire_satnav/)。如果您希望您的方向更喜欢卡车友好的主要路线，并且可以应对每个卫星导航跟随的司机发送它们，您很快就会放弃三角不等式[1]。

如果 Y 是 X 和 Z 之间的一条狭窄住宅街道，您可能只想在用户明确要求 XYZ 时使用通过 Y 的快捷方式。如果他们要求 XZ，他们应该坚持主要道路，即使它有点远并且需要更长的时间。这类似于[Braess 悖论](http://en.wikipedia.org/wiki/Braess_paradox)——如果每个人都试图走最短、最快的路线，那么由此产生的拥堵意味着它不再是任何人最快的路线。从这里我们从图论转向博弈论。

[1] 事实上，当您允许单向道路并失去对称性要求时，任何希望产生的距离将是数学意义上的距离函数的希望都会消失。失去三角不等式也只是在伤口上撒盐。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2010-10-26T17:37:38.607

以下是世界上最快的路由算法比较和正确性证明：

[http://algo2.iti.uka.de/schultes/hwy/schultes_diss.pdf](http://algo2.iti.uka.de/schultes/hwy/schultes_diss.pdf)

这是关于该主题的谷歌技术讲座：

[http://www.youtube.com/watch?v=-0ErpE8tQbw](http://www.youtube.com/watch?v=-0ErpE8tQbw)

这是 schultes 讨论的高速公路层次算法的实现（目前仅在柏林，我正在编写界面，并且正在开发移动版本）：

[http://tom.mapsforge.org/](http://tom.mapsforge.org/)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-02-25T14:50:36.957

我以前没有在谷歌、微软或雅虎地图上工作过，所以我不能告诉你它们是如何工作的。

然而，我确实为一家能源公司设计了一个定制的供应链优化系统，其中包括他们的卡车车队的调度和路由应用程序。然而，我们的路线标准远比施工或交通放缓或车道关闭的地方更具业务针对性。

我们采用了一种称为 ACO（蚁群优化）的技术来安排和安排卡车路线。该技术是一种人工智能技术，应用于旅行商问题以解决路由问题。ACO 的诀窍是根据路由的已知事实构建错误计算，以便图形求解模型知道何时退出（何时错误足够小）。

您可以在谷歌 ACO 或 TSP 上找到有关此技术的更多信息。但是，我没有为此使用任何开源 AI 工具，因此无法推荐一个（尽管我听说 SWARM 非常全面）。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-08-25T18:55:25.767

就静态道路网络的查询时间而言，当前最先进的技术是 Abraham 等人提出的 Hub 标记算法。[http://link.springer.com/chapter/10.1007/978-3-642-20662-7_20](http://link.springer.com/chapter/10.1007/978-3-642-20662-7_20)。最近以 Microsoft 技术报告[http://research.microsoft.com/pubs/207102/MSR-TR-2014-4.pdf](http://research.microsoft.com/pubs/207102/MSR-TR-2014-4.pdf)的形式发布了对该领域的全面且出色的书面调查。

短版是...

Hub 标记算法为静态道路网络提供了最快的查询，但需要大量 ram 才能运行 (18 GiB)。

中转节点路由稍微慢一些，但它只需要大约 2 GiB 的内存并且具有更快的预处理时间。

收缩层次结构在快速预处理时间、低空间要求 (0.4 GiB) 和快速查询时间之间提供了很好的折衷。

没有一种算法是完全主宰...

彼得桑德斯的这个谷歌技术演讲可能会引起人们的兴趣

[https://www.youtube.com/watch?v=-0ErpE8tQbw](https://www.youtube.com/watch?v=-0ErpE8tQbw)

还有安德鲁·戈德堡的这个演讲

[https://www.youtube.com/watch?v=WPrkc78XLhw](https://www.youtube.com/watch?v=WPrkc78XLhw)

可从 KIT 的 Peter Sanders 研究小组网站获得收缩层次结构的开源实现。[http://algo2.iti.kit.edu/english/routeplanning.php](http://algo2.iti.kit.edu/english/routeplanning.php)

还有一篇由微软撰写的关于 CRP 算法使用情况的易于访问的博客文章... [http://blogs.bing.com/maps/2012/01/05/bing-maps-new-routing-engine/](http://blogs.bing.com/maps/2012/01/05/bing-maps-new-routing-engine/)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-01-10T00:47:11.630

> 像 Dijkstra 算法这样的图算法将不起作用，因为图是巨大的。

这个论点不一定成立，因为 Dijkstra 通常不会查看完整的图，而只会查看一个非常小的子集（图的互连越好，这个子集越小）。

Dijkstra 实际上对于表现良好的图可能表现得相当好。另一方面，经过仔细的参数化，A* 将始终表现得一样好，或者更好。您是否已经尝试过它将如何处理您的数据？

也就是说，我也很想听听其他人的经历。当然，像谷歌地图搜索这样的突出例子特别有趣。我可以想象类似有向最近邻启发式的东西。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-12-09T00:04:39.660

我有点惊讶地没有看到这里提到[的 Floyd Warshall 的算法。](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)该算法的工作原理与 Dijkstra 的非常相似。它还有一个非常好的功能，即只要您想继续允许更多中间顶点，它就允许您进行计算。所以它自然会很快找到使用州际公路或高速公路的路线。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2009-11-02T17:29:18.357

实际上，我已经这样做了很多次，尝试了几种不同的方法。根据地图的大小（地理），您可能需要考虑使用 hasrsine 函数作为启发式方法。

我做出的最佳解决方案是使用具有直线距离的 A* 作为启发式函数。但是，您需要为地图上的每个点（交点或顶点）提供某种坐标。您还可以为启发式函数尝试不同的权重，即

```
f(n) = k*h(n) + g(n) 
```

其中 k 是某个大于 0 的常数。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-02-26T01:21:10.140

可能类似于主要位置和分层地图之间预先计算的路线的答案，但我的理解是，在游戏中，为了加速 A*，你有一个非常粗略的宏观导航地图，以及一个细粒度的地图导航到宏观方向的边界。所以你有 2 条小路径要计算，因此你的搜索空间比简单地做一条到目的地的路径要小得多。如果你经常做这件事，你会有很多预先计算的数据，所以至少部分搜索是搜索预先计算的数据，而不是搜索路径。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-01-09T23:48:02.310

这纯粹是我的猜测，但我想他们可能会使用覆盖有向图的影响图数据结构来缩小搜索范围。这将允许搜索算法在所需行程较长时将路径指向主要路线。

鉴于这是一个 Google 应用程序，我们也可以合理地假设很多魔法都是通过大量缓存完成的。:) 如果缓存前 5% 最常见的 Google Map 路线请求允许通过简单查找来回答大部分请求（20%？50%？），我不会感到惊讶。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-02-21T23:31:16.380

我对此有更多的想法：

1) 请记住，地图代表一个物理组织。存储每个交叉点的纬度/经度。除了目标方向上的点之外，您不需要检查太多。只有当你发现自己被封锁时，你才需要超越这一点。如果您存储高级连接的叠加层，则可以对其进行更多限制-通常您永远不会以远离最终目的地的方式遇到其中一个。

2）将世界划分为由有限连接定义的一大堆区域，定义区域之间的所有连接点。查找您的源和目标所在的区域，从您的位置到每个连接点的起始和结束区域路线，对于连接点之间的简单映射之间的区域。（我怀疑很多后者已经预先计算过了。）

请注意，区域可以小于大都市区。任何具有将其划分的地形特征（例如河流）的城市都将是多个区域。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2011-01-08T03:52:10.997

我对所使用的启发式方法非常好奇，不久前我们得到了从圣罗莎附近的同一个起点到优胜美地国家公园的两个不同露营地的路线。这些不同的目的地产生了截然不同的路线（通过 I-580 或 CA-12），尽管这两条路线在最后 100 英里（沿 CA-120）汇合，然后在最后再次分叉了几英里。这是相当可重复的。这两条路线相距最多 50 英里，大约 100 英里，但距离/时间非常接近，如您所料。

唉，我无法重现 - 算法一定已经改变了。但这让我对算法感到好奇。我所能推测的是，有一些定向修剪恰好对从远处看到的目的地之间的微小角度差异非常敏感，或者通过选择最终目的地选择了不同的预计算段。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-09-03T18:45:10.797

说到[GraphHopper](https://graphhopper.com/)，一个基于 OpenStreetMap 的快速开源路线规划器，我阅读了一些文献并实现了一些方法。最简单的解决方案是 Dijkstra，一个简单的改进是双向 Dijkstra，它大约只探索一半的节点。使用双向 Dijkstra 穿越整个德国的路线已经需要 1 秒（对于汽车模式），在 C 语言中可能只有 0.5 秒左右；）

我在[这里](http://karussell.files.wordpress.com/2012/06/bidijkstra.gif)创建了一个带有双向 Dijkstra 的真实路径搜索的动画 gif 。还有一些[让 Dijkstra 更快](http://karussell.wordpress.com/2012/12/03/make-your-dijkstra-faster/)的想法，比如做 A*，这是一个“面向目标的 Dijkstra”。我还为它创建了一个[gif 动画](http://karussell.files.wordpress.com/2012/07/astar.gif)。

**但是如何（很多）更快地做到这一点？**

问题是，对于路径搜索，必须探索位置之间的所有节点，这确实非常昂贵，因为在德国已经有数百万个节点。但 Dijkstra 等的另一个痛点是此类搜索使用大量 RAM。

有启发式解决方案，也有将图形（道路网络）组织在层次结构中的精确解决方案，两者都有优缺点，主要解决速度和 RAM 问题。我在[这个答案](https://gis.stackexchange.com/a/29963/9006)中列出了其中一些。

对于 GraphHopper，我决定使用[Contraction Hierarchies](http://en.wikipedia.org/wiki/Contraction_hierarchies)，因为它相对“容易”实现并且不需要很长时间来准备图表。它仍然会产生非常快的响应时间，就像您可以在我们的在线实例[GraphHopper Maps](https://graphhopper.com/maps)上进行测试一样。例如[，从南非到中国东部](https://graphhopper.com/maps/?point=-34.307144%2C20.742188&point=59.564941%2C150.792847)，这导致了 23000 公里的距离和近 14 天的汽车驾驶时间，并且在服务器上仅花费了 ~0.1 秒。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-07-20T13:43:47.723

我从事路由工作已有几年了，最近由于客户的需求引起了活动的爆发，我发现 A* 很容易就足够快了；确实没有必要寻找优化或更复杂的算法。在巨大的图表上进行路由不是问题。

但是速度取决于整个路由网络，我的意思是弧和节点的有向图，分别代表路线段和路口，在内存中。主要的时间开销是创建这个网络所花费的时间。一些基于运行 Windows 的普通笔记本电脑的粗略数据，并在整个西班牙进行路由：创建网络所需的时间：10-15 秒；计算路线所需的时间：太短而无法测量。

另一件重要的事情是能够重用网络进行尽可能多的路由计算。如果您的算法以某种方式标记了节点以记录最佳路线（到当前节点的总成本，以及到它的最佳弧线） - 正如它在 A* 中所必须的那样 - 您必须重置或清除这些旧信息。与其通过数十万个节点，使用代号系统更容易。用数据的代号标记每个节点；计算新路线时增加世代编号；任何具有较老代号的节点都是陈旧的，可以忽略其信息。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-01-10T01:53:41.840

我看到了 OP 中的地图是怎么回事：

查看指定中间点的路线：由于那条路不直，路线稍微向后退。

如果他们的算法不会回溯，它就不会看到更短的路线。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-04-20T06:39:47.983

全对最短路径算法将计算图中所有顶点之间的最短路径。这将允许预先计算路径，而不是每次有人想要找到源和目的地之间的最短路径时都需要计算路径。Floyd-Warshall 算法是一种全对最短路径算法。

* * *

## 回答 #18

> 赞同：-4
> 
> 时间：2015-11-03T00:33:09.890

地图从不考虑整个地图。我的猜测是：- 1\. 根据您的位置，他们加载一个地方和那个地方的地标。2.当你搜索目的地时，他们加载地图的另一部分并用两个地方制作一个图表，然后应用最短路径算法。

此外，还有一种重要的技术动态编程，我怀疑它被用于计算最短路径。你也可以参考一下。

# c# - 如何在 Visual Studio 中反转等号周围的代码？

> ID：430145
> 
> 赞同：30
> 
> 时间：2009-01-09T23:38:28.400
> 
> 标签：c#, visual-studio-2008

在编写代码以从对象填充文本框后，例如：

```
txtFirstName.Text = customer.FirstName;
txtLastName.Text = customer.LastName;
txtAddress.Text = customer.Address;
txtCity.Text = customer.City; 
```

在 Visual Studio（甚至像 Resharper 之类的东西）中有没有办法将此代码复制并粘贴到保存函数中，并在等号周围反转代码，使其看起来像：

```
customer.FirstName = txtFirstName.Text;
customer.LastName = txtLastName.Text;
customer.Address = txtAddress.Text;
customer.City = txtCity.Text; 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-01-09T23:44:18.810

VS2012之前：

*   复制并粘贴原始代码块
*   在要切换的地方再次选择
*   按 Ctrl-H 以获取“替换”框
*   在“查找内容”下放置：`{[a-zA-Z\.]*} = {[a-zA-Z\.]*};`
*   在“替换为”下放置：`\2 = \1;`
*   查看：“选择”
*   使用：“正则表达式”
*   点击全部替换

使用 .NET 正则表达式的 VS2012（可能是更高版本）：

*   复制并粘贴原始代码块
*   在要切换的地方再次选择
*   按 Ctrl-H 以获取“替换”框
*   在“查找内容”下放置：`([a-zA-Z\.]*) = ([a-zA-Z\.]*);`
*   在“替换为”下放置：`${2} = ${1};`
*   确保`.*`选中（正则表达式）图标（替换文本框下方的第三个）
*   点击全部替换

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T23:41:40.967

据我所知没有。当然，如果您使用许多可用的绑定方法中的一种，那么您不必这样做 - 绑定将在两个方向上进行更新（包括通过通知进行更改）。

所以对于winforms：

```
txtFirstName.DataBindings.Add("Text", customer, "FirstName"); 
```

ETC

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T10:46:35.933

我有同样的需求，但我必须接受比`a-zA-Z\.`John 提供的解决方案更多的字​​符，所以我稍微修改了它的常规异常，如下所示：

找什么 ：`{^[^\=]*} = {.*}`

用。。。来代替 ： `\2 = \1`

这将反转在一行中找到的**第一个等号**周围的**任何内容**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T23:46:18.023

首先使用 Resharper 以这种方式将它们放入其中的一个选项是定义一个类似于以下内容的实时模板：

```
$uiElement$ = $dto$;
$dto$ = $uiElement$; 
```

这将允许您键入一次，它会为您复制它，然后您可以将保存版本剪切并粘贴到另一种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-26T06:42:27.210

对我有用的*搜索词*RegEx：

搜索 `([^= ]*) = ([^= ]*);`

# javascript - 在javascript中设置多值参数

> ID：430161
> 
> 赞同：1
> 
> 时间：2009-01-09T23:44:42.333
> 
> 标签：javascript, html, struts

当我在 HTML 中提交表单时，我可以多次传递一个参数，例如

```
<input type="hidden" name="id" value="2">
<input type="hidden" name="id" value="4"> 
```

然后在 struts 中，我可以拥有一个具有属性 String[] id 的 bean，它会正确填充数组。

我的问题是，我怎样才能在 Javascript 中做到这一点？当我有一个数组并设置 form.id.value = myArray 时，它只是将值设置为一个逗号分隔的列表。那么在 Struts 端，我只得到一个元素数组，即字符串“2,4”。

我应该补充一下，我需要以表格形式提交，所以我不能只生成一个 GET 请求，例如 id=2&id=4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T00:09:47.057

这是你要找的吗？它为 JavaScript 数组的每个元素生成一个隐藏的表单字段：

```
var el;
for (var i = 0; i < myArray.length) {
    el = document.createElement("input");
    el.type = "hidden";
    el.name = "id";
    el.value = myArray[i];

    // Optional: give each input an id so they can easily be accessed individually:
    el.id = "hidden-myArray-" + i;

    // Optional: give all inputs a class so they can easily be accessed as a group:
    el.className = "hidden-myArray";

    form.appendChild(el);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T00:11:49.503

不确定您要做什么，但可以尝试一下：

```
var inputs = document.getElementsByName('id');
for(var i=0; i<inputs.length; i++) {
    var input = inputs[i];
    input.value = myArray[i];
} 
```

它遍历所有名称为 ' `id`' 的输入，并从 myArray 中分配相应的值。

你最好确定`myArray.length == document.getElementsByName('id').length`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T23:55:41.530

一种方法是给每个输入一个唯一的 ID：-

```
<input id="id1" type="hidden" name="id" value="2">
<input id="id2" type="hidden" name="id" value="4"> 
```

然后在javascript中： -

```
document.getElementById("id1").value = myArray[0];
document.getElementById("id2").value = myArray[1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T00:16:17.823

`forms[0].elements.theName`包含具有名称属性“theName”的所有元素的集合。例子：

```
<form>
<input type="text" name="test"><br>
<input type="text" name="test">
</form>
<script>
var values = ['foo', 'bar'];
var testElements = document.forms[0].elements.test;
for(var i = 0; i < testElements.length; ++i)
    testElements[i].value = values[i];
</script> 
```

# c - 为什么 malloc 分配的字节数与请求的不同？

> ID：430163
> 
> 赞同：10
> 
> 时间：2009-01-09T23:45:17.310
> 
> 标签：c, debugging, gcc, malloc

我有这段代码

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <string.h>

int main(){
    void *a, *b;

    a = malloc(16);
    b = malloc(16);
    printf("\n   block size (for a): %p-%p : %li", b, a, b-a);

    a = malloc(1024);
    b = malloc(1024);
    printf("\n   block size (for a): %p-%p : %li", b, a, b-a);  
} 
```

这不应该打印最后分配的块大小（16 或 1024）吗？它改为打印 24 和 1032，因此分配的内存量似乎有 8 个额外字节。

我的问题是（在制作这个测试用例之前）我`malloc()`在一个函数（1024 字节）中执行，并返回分配的结果。当检查函数返回的块大小时，我得到 516 个块......我不明白为什么。我想这可能是对分配的缓冲区进行一些处理后发生内存损坏的原因:)

**编辑：**我已经看到[如何从 C 中的指针获取数组的大小？](https://stackoverflow.com/questions/232691/array-size-from-pointer-in-c)似乎问同样的事情，抱歉重新发布。

我已将示例重做为更具体的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <string.h>

short int * mallocStuff(long int number, short int base){
    short int *array;
    int size=1024;

    array=(short int*)calloc(1,size);
    //array=(short int*)malloc(size);

    return array;
}

int main(){
    short int **translatedArray;

    translatedArray=malloc(4*sizeof(short int));

    int i;
    for(i=0;i<4;i++){
        translatedArray[i]=mallocStuff(0,0);

        if(i>0)
            printf("\n   block size (for a): %p-%p : %i",
                translatedArray[i], translatedArray[i-1], translatedArray[i]-translatedArray[i-1]);
    }

    return 0;
} 
```

输出是

```
 block size (for a): 0x804a420-0x804a018 : 516
   block size (for a): 0x804a828-0x804a420 : 516
   block size (for a): 0x804ac30-0x804a828 : 516 
```

根据上面的帖子大于1024。我错了吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-01-09T23:48:53.870

首先，Malloc 不保证两个连续的 malloc 调用返回连续的指针。

其次，根据您的具体架构，应用不同的对齐规则；有时您可能会要求一个字节，但该体系结构更喜欢以 8 或 4 字节为间隔进行分配。

第三， malloc 需要一些开销来存储分配的块有多大，等等。

不要假设 malloc 所做的事情超出了文档所说的内容！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-01-09T23:47:20.707

该`malloc`函数总是分配比你要求的多一点，以便存储一些簿记信息。毕竟，当你调用它时，`free()`它需要知道块有多大。

此外，通常`malloc`实现会将请求的大小四舍五入到下一个 8 或 16 的倍数或其他一些四舍五入的数字。

**更新**：您问题的真正答案在于您对`short int`类型的使用。在类型化指针之间进行指针算术（减法）时，C 和 C++ 返回指向的事物*数量的差异。*由于您指向`short int`大小为两个字节的 ，因此返回的值是您期望值的一半。

另一方面，`malloc`始终分配给定数量的*bytes*，无论您将结果转换为什么。试试这个：

```
 array=(short int*)malloc(sizeof(short int) * size); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-01-09T23:49:53.757

不能保证两个 malloc 调用会返回完全打包在一起的块——事实上，根本无法保证结果，除非它不是 NULL，它将指向一个至少与请求的块一样大的块。

在内部，大多数 malloc 保存工作数据以帮助它们管理堆。例如，这 8 个字节可能包含两个指针——一个指向下一个块，一个指向前一个块。我不知道那 8 个字节是什么，因为您没有提到您正在运行哪个操作系统，但是 malloc 在幕后为自己使用一些内存是完全正常的。

一些分配器（例如在 Windows 上）提供了一个库函数来发现给定指针的块大小，但是，有些则没有，因为它是一个相当深奥的功能。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-01-10T00:04:29.750

你有一个错误。代替：

```
translatedArray=malloc(4*sizeof(short int)); 
```

你应该有

```
translatedArray=malloc(4*sizeof(short int*)); 
```

请注意代码中缺少的指针。我怀疑这就是您观察到的行为的根源。

* * *

还要注意`0x804a420 - 0x804a018 = 1032`，不是`516`。该公式`translatedArray[i] - translatedArray[i - 1]`为您提供两个地址之间的**元素**数（短整数，或更简单地说，短整数），而不是**字节**数。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-01-09T23:53:14.610

malloc 返回的内容取决于 malloc 的实现和架构。正如其他人已经说过的那样，您可以保证至少获得请求的内存量，即 NULL。这也是为什么有时，您可以写到数组的末尾，而不会出现分段错误。这是因为您实际上确实可以有效地访问此内存，只是您不知道而已。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-10T00:04:14.573

malloc() 通常通过将可用堆拆分为各种大小的块来实现。在您的情况下， malloc() 返回 2 个连续的 1024（或 16）字节块。您提到的 8 字节空间由 malloc() 用于簿记信息。

请参阅 Doug Lea 的 malloc() impl 注释，以了解幕后发生的事情：http: [//g.oswego.edu/dl/html/malloc.html](http://g.oswego.edu/dl/html/malloc.html)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-01-09T23:47:31.190

`malloc()`会有它自己的开销。

更不用说不能保证 2 个连续的分配从一开始就会彼此相邻。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-01-09T23:49:46.567

如果返回 null 以外的任何内容，*则为您的程序*`malloc`分配的内存具有您传递给的大小。取两个差异调用的返回值之间的指针差异可以具有任何值，并且与第一个分配块的块大小无关（很少）。*`malloc``malloc`*

 ** * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-13T04:29:15.140

我找到了这个..并检查下面的链接以获取更多信息。

## 分配

通过首先将请求的字节转换为存储桶数组中的索引，从空闲池中分配一个块，使用以下等式：

需要 = 请求 + 8

如果需要 <= 16，则桶 = 0

如果需要 > 16，则 bucket = (log(needed)/log(2) 向下舍入到最接近的整数) - 3

桶所锚定的列表中每个块的大小为块大小 = 2 桶 + 4。如果桶中的列表为空，则使用 sbrk 子例程分配内存以将块添加到列表中。如果块大小小于页，则使用 sbrk 子例程分配页，并将块大小除以页大小得到的块数添加到列表中。如果块大小等于或大于一页，则使用 sbrk 子例程分配所需的内存，并将单个块添加到存储桶的空闲列表中。如果空闲列表不为空，则将列表头部的块返回给调用者。列表中的下一个块然后成为新的头。

[http://publib.boulder.ibm.com/infocenter/systems/index.jsp?topic=/com.ibm.aix.genprogc/doc/genprogc/sys_mem_alloc.htm](http://publib.boulder.ibm.com/infocenter/systems/index.jsp?topic=/com.ibm.aix.genprogc/doc/genprogc/sys_mem_alloc.htm)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-09T23:46:39.303

指针前代表后面数组的大小，是一个32/64位整数（不知道有符号还是无符号）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-20T08:21:00.017

*所以分配的内存量似乎有 8 个额外的字节？* `malloc()`您系统上的实现似乎分配了额外的字节来维护元数据信息，例如堆部分有多大，起始地址是什么等信息。

虽然它在不同的平台上有所不同。在我的 X86 系统`malloc()` 上`17`，即使我请求`malloc(0)`.

```
int main(void) {
    int *p = malloc(0);
    if(p == NULL) {
        /* error handling */
    }
    printf("%d\n",p[-1]);/ *it prints 17 bytes */
    /* some code */
    return 0;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-16T10:09:19.690

malloc() 可以分配连续的内存，但是当您调用 malloc() 2 次并且不能期望通过减去两个指针变量来分配的内存是连续的...

但是分配的内存是虚拟内存，它是内核实现的一部分，具体来说是内存管理（VFS）。它可能不会影响应用程序功能。

# linux - 在初始化/bash 脚本中同时执行多个程序

> ID：430176
> 
> 赞同：4
> 
> 时间：2009-01-09T23:52:02.460
> 
> 标签：linux, bash, scripting, rcs

您好，我正在使用一个使用 rcS 脚本启动的模拟器，这是我的脚本

```
cd /tests
./test1 &
./test2 &
./test3 &
./test4 
exit 
```

我想要的是同时运行所有测试，并且只有在所有先前的测试都完成后才执行退出命令。不仅当测试 4 完成时，这可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-09T23:59:08.903

您可以使用等待：

```
./test1 &
./test2 &
./test3 &
./test4 &
wait 
```

从 bash 手册页：

> wait [n ...] 等待每个指定进程并返回其终止状态。每个 n 可以是一个进程 ID 或一个作业规范；如果给出了作业规范，则等待该作业管道中的所有进程。如果没有给出n，则等待所有当前活动的子进程，返回状态为零。如果 n 指定一个不存在的进程或作业，则返回状态为 127。否则，返回状态为最后等待的进程或作业的退出状态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-08-22T09:16:15.317

`xargs`可以支持并行

所以就像这样：

```
seq 4|xargs -i -n 1 -P 4 ./test{} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T23:57:24.227

类似的东西

```
cd /tests
./test1 &
./test2 &
./test3 &
./test4 &
wait
exit 
```

（我假设 bash shell）

# c - C是强类型的吗？

> ID：430182
> 
> 赞同：92
> 
> 时间：2009-01-09T23:54:48.193
> 
> 标签：c, strong-typing, weakly-typed

引用[维基百科](http://en.wikipedia.org/wiki/Weak_typing)：

> 支持多种隐式转换的两种常用语言是 C 和 C++，有时声称它们是弱类型语言。然而，其他人认为这些语言对如何混合不同类型的操作数施加了足够的限制，因此这两种语言应该被视为强类型语言。

有没有更确定的答案？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2009-01-10T02:24:17.877

“强类型”和“弱类型”是没有广泛认可的技术含义的术语。具有明确含义的术语是

*   **动态类型**意味着类型在运行时附加到值，尝试混合不同类型的值可能会导致“运行时类型错误”。例如，如果在 Scheme 中您尝试通过编写`(+ 1 #t)`this 来为 true 加一，则会导致错误。仅当您尝试执行有问题的代码时才会遇到错误。

*   **静态类型**意味着在编译时检查类型，没有静态类型的程序会被编译器拒绝。例如，如果在 ML 中您尝试通过编写 来将 1 添加到 true `1 + true`，则程序将被拒绝并显示（可能是神秘的）错误消息。即使代码可能永远不会执行，您也总是会收到错误消息。

不同的人喜欢不同的系统，部分取决于他们对灵活性的重视程度以及对运行时错误的担忧程度。

有时“强类型”被松散地用来表示“静态类型”，而“弱类型”被错误地用来表示“动态类型”。术语“强类型”更好的用法是“你不能解决或颠覆类型系统”，而“弱类型”意味着“类型系统中存在漏洞”。相反，大多数具有静态类型系统的语言都有漏洞，而许多具有动态类型系统的语言则没有漏洞。

这些术语都没有以任何方式与语言中可用的隐式转换的数量相关联。

如果你想准确地谈论编程语言，最好避免使用“强类型”和“弱类型”这两个术语。我会说 C 是一种静态类型的语言，但它有很多漏洞。一个漏洞是您可以自由地将任何指针类型转换为任何其他指针类型。您还可以通过声明一个具有两个成员的 C 联合，在您选择的任何两种类型之间创建一个漏洞，每个成员对应一个所讨论的类型。

我在[why-interpreted-langs-are-mostly-ducktyped-while-compiled-have-strong-typing](https://stackoverflow.com/questions/376611/why-interpreted-langs-are-mostly-ducktyped-while-compiled-have-strong-typing#376828)上写了更多关于静态和动态类型的文章。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-01-10T00:01:27.777

很难将每种语言分类为“弱”或“强”类型——它更像是一个连续体。但是，与其他语言相比，C 是相当强类型的。每个对象都有一个编译时类型，编译器会（大声地）让你知道，如果你正在对一个对象做一些它的类型不允许你做的事情。例如，您不能使用错误类型的参数调用函数、访问不存在的结构/联合成员等。

但也有一些弱点。一个主要的弱点是类型转换——它们本质上是说你会胡乱处理对象的类型，编译器应该保持安静（如果可以的话）。 `void*`这也是另一个弱点——它是一个指向未知类型的通用指针，当你使用它们时，你必须格外小心，以确保你在做正确的事情。编译器无法静态检查`void*`. `void*`也可以在没有强制转换的情况下转换为指向任何类型的指针（仅在 C 中，而不在 C++ 中），这是另一个弱点。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-01-10T00:26:56.443

C 被认为是弱类型，因为您可以通过强制转换将任何类型转换为任何其他类型，而不会出现编译器错误。[您可以在此处](http://en.wikipedia.org/wiki/C_programming_language#Syntax)阅读有关该问题的更多信息。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-01-10T00:16:36.403

文献对此并不清楚。我认为强类型不是是/否，强类型有不同程度。

编程语言有一个关于它如何执行程序的规范。有时不清楚如何使用某些程序执行。例如，尝试从数字中减去字符串的程序。或除以零的程序。有几种方法可以处理这些情况。有些语言有处理这些错误的规则（例如它们抛出异常）。其他语言只是没有规则来处理这些情况。这些语言通常具有类型系统，以防止编译导致未指定行为的程序。并且还有一些语言具有未指定的行为并且没有类型系统来在编译时防止这些错误（如果您编写的程序遇到未指定的行为，它可能会发射导弹）。

所以：

指定每种情况下运行时发生的情况的语言（例如向字符串添加数字）称为动态类型。防止在编译时执行错误程序的语言是静态类型的。没有指定会发生什么并且没有类型系统来防止错误的语言称为弱类型。

那么Java是静态类型的吗？是的，因为它的类型系统不允许从数字中减去字符串。不，因为它允许您除以零。您可以使用类型系统在编译时防止除以零。例如，通过创建一个不能为零的数字类型（例如 NonZeroInt），并且只允许除以具有这种类型的数字。

那么C是强类型还是弱类型？C 是强类型的，因为类型系统不允许某些类型错误。但是在其他情况下，当它未定义会发生什么（并且类型系统不能保护您）时，它的类型很弱。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-01-09T23:59:01.463

C 的类型比 Javascript 强，比 Ada 的类型弱。

我想说它更多地属于连续体的强类型方面。但其他人可能不同意（即使他们错了）。

怎么确定的？

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-01-10T00:33:42.610

C 被认为是静态类型的（您不能将变量从 int 更改为 float）。一旦声明了一个变量，它就会被卡住。

但它被认为是弱类型，因为类型可以翻转。

什么是0？'\0'、FALSE、0.0 等。

在许多语言中，您不能说 IF（变量），因为条件只会从布尔表达式中获取布尔值。这些是更强类型的。这同样适用于字符和整数之间的转换。

基本上 c 有两种主要的简单数据类型，整数和浮点数（尽管精度不同）。其他所有布尔值、枚举（不简单但很合适）等都作为其中之一实现。甚至字符基本上都是整数。

与存在字符串类型的其他语言相比，枚举类型只能分配给定义的值，布尔类型只能使用生成布尔值或真/假的表达式。

但是你可以争辩说，与 Perl C 相比，C 是强类型的。所以它是那些著名的论点之一（vi vs emacs，linux vs windows，等等）。C# 的类型比 C 强。基本上你可以争论任何一种方式。你的答案可能会是双向的 :) 还有一些教科书/网页会说 C 是弱类型的，有些人会说 C 是强类型的。如果你去维基百科，C 条目会说“部分弱类型”。我想说与 Python C 相比，C 是弱类型的。所以 Python/C#、C、Perl 在连续统一体上。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-09-08T13:58:53.240

根据 Dennis Ritchie（**C 的创建者**）和 Brian Kernighan 的说法，C 不是强类型语言。以下几行来自**《C 编程语言**第 3 页第 5 段》一书

> C 不是一种强类型语言，但随着它的发展，它的类型检查得到了加强。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-01-10T20:50:43.150

这里有很多很好的答案。我想从[Real World Haskell](http://book.realworldhaskell.org/read/types-and-functions.html)中提出一个重要的观点：

> 了解许多语言社区对“强类型”有自己的定义是很有用的。尽管如此，我们还是会简要而广泛地讨论类型系统中强度的概念。

（剪断）

> 类型系统周围的烟花起源于普通英语，人们对“弱”和“强”这两个词赋予价值观念：我们通常认为强胜于弱。更多的程序员说简单的英语而不是学术术语，而且很多时候，学者们真的在向任何不适合他们喜欢的类型系统扔砖头。结果往往是那种流行的网络消遣，一场火焰大战。

因此，请查看有关 C 和 C++ 的答案，但请记住，“强”和“弱”并不对应于“好”和“坏”。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-01-09T23:58:29.293

在我看来，C/C++ 是强类型的。允许类型转换（void *）的黑客类型存在，因为 C 与机器的接近。换句话说，您可以从 Pascal 调用汇编程序命令并操作指针，并且 Pascal 仍然被认为是一种强类型语言。您可以通过 JNI 从 Java 调用汇编程序和 C 可执行文件，但它不会使 Java 成为弱类型。

C 只是在其中“嵌入”了带有原始指针等的汇编程序。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-01-10T11:38:33.063

术语*强类型*没有一个公认的定义。因此，除非您定义“强类型”的*含义*，否则无法回答您的问题。

以我的经验，“强类型”和“弱类型”这两个术语*仅*由巨魔使用，因为它们缺乏定义允许巨魔重新定义它们以适应他们的议程。除了开始激烈的战争之外，这些术语几乎没有用。

您可能还想看看[强类型语言的关键方面是什么？](http://StackOverflow.Com/questions/121385/#122751)在 StackOverflow 上。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-01-10T00:53:08.547

在“弱类型”和“强类型”之间存在多个并行途径的连续统一体，这两个术语甚至都没有很好的定义。

C 是*静态*类型的，因为编译器知道每个局部变量和结构成员的*声明类型是什么。*

如果每个对象都有特定类型但编译器无法知道该类型，则动态类型语言可能仍然是强类型的。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-01-10T03:07:17.730

不是强类型。

考虑以下函数原型告诉您参数的数据类型：

```
void func (int n, char ch, ...); 
```

没有。所以我建议强类型在这里不适用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-10T00:01:35.047

您查询的原因是什么？我问的原因是这是一个很小的区别，您对“强类型”的特殊用法可能需要或多或少的澄清。我肯定会说 Java 和其他语言对隐式类型对话有更严格的限制。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-01-10T00:44:08.097

当没有“强类型”的具体定义时，很难提供具体的答案。我会说 C 是强类型的，因为每个变量和每个表达式都有一个类型，但弱类型是因为它允许您使用强制类型转换来更改类型并将一种类型的表示重新解释为另一种类型。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-01-10T02:01:19.017

我会说 C 的类型与您的编译器/平台要求的一样强。例如，如果您在严格的平台上构建，取消引用类型双关指针可能会中断：

```
void m_free(void **p)
{
        if (*p != NULL) {
                free(*p);
                *p = NULL;
        }
}

....
char *str = strdup("foo");
m_free((void **) &foo); 
```

现在，如果您告诉编译器跳过严格的别名，这将不是问题，但不是很便携。所以，从这个意义上说，突破语言的界限是可能的，但可能不是最好的主意。这超越了典型的铸造，即铸造 int as long 并且确实显示了 void 可能的陷阱之一。

所以，我想说 C 基本上是严格类型的，但它的各种编译器假定程序员最了解并允许一定的灵活性。这真的取决于编译器，有些人不会接受那些潜在的 oops。所以从这个意义上说，选择的编译器在回答问题时确实发挥了作用。正确的通常与您的编译器允许您摆脱的不同。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2010-09-06T09:16:21.500

c 是弱类型，b 是无类型。

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2009-01-10T00:21:01.417

我会说它是强类型，因为每个表达式都有一个不是它的值的函数的类型；ei 它可以在运行前知道。

OTOH 我不确定这是对强类型的正确描述。我能看到的唯一更强有力的主张是保证你不能在运行时通过重新解释类型转换、联合、调用其他语言、指针、汇编语言等来颠覆类型系统。像这样的语言存在但如此残缺，以至于除了高度保证和学术界之外的程序员似乎对它们没有太大兴趣。正如有人指出的那样，要真正做到这一点，您开始需要拥有`nonZeroInt`诸如此类的类型。呸。

# mysql - 尝试设计/建模简单的数据库应用程序

> ID：430188
> 
> 赞同：1
> 
> 时间：2009-01-09T23:56:53.650
> 
> 标签：mysql, database, modeling

我正在尝试了解有关数据库交互的更多信息，这让我开发了一个本地应用程序以开始使用。嗯，基本上，到目前为止，我所做的事情有一些不同的结果，我改变了很多东西，我什至不确定我现在改变了什么，哈哈。我不太确定我的一张桌子是否正确，所以我决定重新开始。这就是我希望我愚蠢的本地应用程序做的事情。

*   最多存储 9 个特定的 RSS 提要（我之前做过 url/链接，但我不想被我以前做过的任何事情弄糊涂，所以我将其更改为 RSS 提要）
*   默认情况下将填充 1 个提要（因此每个用户都有一个共同提要 - 他们可以更改）
*   提要应存储在某种排序方案中，以便可以按照输入的顺序检索/打印它们。

将有一个带有 9 个文本字段的编辑屏幕，由相应的数据库条目填充，如下所示：

```
feed 1: <input type="text" value="http://rss.news.yahoo.com/rss/topstories"> **the default feed for everyone, but they can change it**
feed 2: <input type="text" value="http://content.usatoday.com">
feed 3: <input type="text" value="http://newsrss.bbc.co.uk/rss/newsonl.../world/rss.xml">
feed 4: <input type="text" value="">
feed 5: <input type="text" value="">
feed 6: <input type="text" value="">
feed 7: <input type="text" value="">
feed 8: <input type="text" value="">
feed 9: <input type="text" value="">
        <input type="submit" value="update"> 
```

我希望能够在此处编辑/添加新提要并以相同的顺序检索这些提要 - 这是我之前尝试中困惑的一个重要原因。

将有一个输出屏幕以相同的顺序输出提要 URL。

我有 2 个表，**users**和 now **feeds**，我相信我的 users 表很好，它基本上存储了一些个人信息。我认为那里的一切都应该很明显。“状态”列将存储来自选择/下拉列表的 2 个字符的状态缩写，我已将其编入索引，因为我希望能够按状态搜索用户。我在检索/编辑/更新该数据时没有任何问题。

```
CREATE TABLE users (
    user_id              SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    first_name           VARCHAR(20) NOT NULL,
    last_name            VARCHAR(40) NOT NULL,
    state                CHAR(2) NOT NULL,
    email                VARCHAR(60) NOT NULL,
    pass                 CHAR(32) NOT NULL,
    registration_date    DATETIME NOT NULL,

    PRIMARY KEY(user_id),
    UNIQUE (email),
    INDEX login (email, pass),
    INDEX state (state)                              
); 
```

这是我的新提要表

```
CREATE TABLE feeds (
    user_id      SMALLINT UNSIGNED NOT NULL,
    feed_url     VARCHAR(255) NOT NULL DEFAULT 'http://rss.news.yahoo.com/rss/topstories',
    feed_id      SMALLINT UNSIGNED NOT NULL DEFAULT 1,

    PRIMARY KEY(user_id, feed_url)                                                                          
); 
```

当用户输入新的提要时，假设提要 #2，该值将插入到 feed_url 中，而 feed_id 将插入值为**2**。如果输入 feed #3，则 feed_id 将插入值为**3**。那应该给我一些东西来 ORDER BY 来按顺序检索记录，对吧？

**数据编辑屏幕应始终显示提要的输入方式。
数据输出屏幕应始终显示提要的输入方式。**

那么，这看起来合适吗？我错过了一些东西吗？我的 feed_url VARCHAR(255) 可能不是万无一失的，但我只会使用短网址进行测试。它也总是很容易被撞到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T00:09:13.877

由于您的提要表将为您的所有用户保存提要，因此您可能需要重新考虑这一点。

您已将 feed_id 的默认值设置为 1，因此您将获得 1 的所有内容 - 在为用户添加第二个提要时您不会获得 2。你需要逻辑。

也许当用户创建一个新的提要时，您会查询他们的所有记录，找到最高的提要 ID，然后将其加 1。然后，您将使用它作为您的新提要 ID。

要找到你的最高 id，你会做类似的事情（语法可能是错误的，我通常是 T-SQL）

从 user_id = @user_id 的提要中选择 max(feed_id)

我从来没有做过任何事情，让用户订购物品，所以你可能想在决定任何事情之前先调查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T00:14:12.103

忘记最后一篇文章 - 我认为您需要能够重新订购您的提要。如果没有，您只需将 auto_increment 添加到该 feed-id 字段。然后使用 ORDER BY feed-id 升序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-27T20:50:45.417

为了强制每个用户都有一个他们可以更改的初始默认提要的功能，我建议您删除`feeds`表中的默认值并在应用程序代码中实现该功能。在创建（注册）新用户的代码中，将行添加到`users`表中，然后将行添加到`feeds`包含此用户的第一个提要的表中，并使用默认 URL（您可以将其存储在应用程序配置设置中）。

如果您必须保持提要的顺序，那么有两个主要选项。使用您的`feed_id`列，但将其填充为自动增量。但是，这在某些情况下可能会中断（不能保证总是增加）。另一种选择是更改`feed_id`为`feed_sequence`并从您的代码中填充它，使其始终为每个用户的 1-9。

我发现您要求保留提要 URL 的顺序（显然不惜一切代价）是非常不典型的。为什么需要它，为什么它如此重要？

`users`我注意到你的桌子有几个问题。一方面，该`email`领域不够大（60 太小了，320 是我认为的真正最大值）。另一方面，我想知道您是否存储`pass`为纯文本，这将是一个巨大的安全问题。我还注意到它`pass`被声明为`CHAR`而不是`VARCHAR`. 您没有说，但是您的使用是否`CHAR`表明您没有将密码存储为纯文本，而是将其混淆为固定大小（32）的字段？

当然，提要 URL 也很容易超过 255 个字符。

很高兴看到您已经合理地规范了您的数据，例如通过不做`feedUrl1`...`feedUrl9`列。

最好的祝愿。

# .net - 如何静态编译 Microsoft .NET 代码？

> ID：430198
> 
> 赞同：4
> 
> 时间：2009-01-09T23:59:03.710
> 
> 标签：.net, mono

我看到这篇关于 .NET Mono 版本的[Ars 文章](http://arstechnica.com/news.ars/post/20090108-open-source-mono-framework-brings-c-to-iphone-and-wii.html)被用于静态编译并且没有适用于 iPhone 和 Wii 的 JIT 或 CLR。我假设您也可以为未安装 .NET 的 PC 执行此操作。这些文章似乎暗示这只能通过 Mono 来完成，但这里有没有人知道是否有办法通过 Microsoft .Net 实现来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T00:06:19.093

有一些工具可以让你做到这一点。有一些缺点，因为实际上有充分的理由拥有一个可更新的框架。但是，肯定有一些优点。更好的产品之一是 PostBuild：

[http://www.xenocode.com/Landing/Run-NET-Without-NET.aspx?gclid=CNWvof_ZgpgCFRRhnAodsgLkDQ](http://www.xenocode.com/Landing/Run-NET-Without-NET.aspx?gclid=CNWvof_ZgpgCFRRhnAodsgLkDQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T00:06:16.987

这里有两个不同的问题。编译部分可以在 .net 上使用[ngen](http://msdn.microsoft.com/en-us/library/6t9t5wcf(VS.71).aspx)完成。

另一个问题是.net中[缺少链接器。](http://www.joelonsoftware.com/articles/PleaseLinker.html)它的工作（如果存在的话）只是从框架中获取所需的部分。并且无需在客户端上进行完整的 .net 安装。正如其他人所建议的，.net 中有链接器的替代方案。并不是说我尝试过其中任何一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T00:01:38.820

Salamander .NET Linker 是可以在 PC 上执行此操作的工具之一：

[http://www.remotesoft.com/linker/index.html](http://www.remotesoft.com/linker/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T00:01:47.837

嗯，“ [ngen](http://msdn.microsoft.com/en-us/library/6t9t5wcf(VS.80).aspx) ”可以预先 JIT 一个应用程序。还有[其他工具](http://www.yoda.arachsys.com/csharp/faq/#framework.required)可以避免安装完整的 .NET，但我尽量避免使用它们。一般来说：是的，您需要一个框架（但如果您想要轻量级，它可以是 Client Profile、Compact Framework、Micro Framework 或 Silverlight；所有这些都是 MS CLR 变体）。

# c# - 如何以编程方式从 HLDS 读取服务器日志？

> ID：430218
> 
> 赞同：1
> 
> 时间：2009-01-10T00:08:33.410
> 
> 标签：c#, php, udp

如何读取和解析从 HLDS（半衰期专用服务器）远程发送的服务器日志？

我的理解是，您可以使用命令指定服务器将日志传递到何处`log_address`。在此之后，服务器应该通过 UDP 传递日志。

如何使用 PHP 或 ASP.NET C# 来监听这些日志？我不知道我是否应该监听传入的数据包，或者向 HLDS 发送数据包请求。我尝试使用 监视我的 UDP 连接`netstat -a`，但似乎无法弄清楚这一点。

注意：我想使用 log_address 实现，因为我无法在服务器上安装任何第三方模块来协助记录过程。我也知道 HLSW，我不是在寻找这样的客户端应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T11:02:32.513

你应该看看[Steam HLDS Log Parser](https://github.com/tomav/steam_hlds_log_parser) gem。

它在 Ruby 中并且像这样工作：

*   在您的 hlds 上，使用ip 在哪里以及`logaddress xxx.xxx.xxx.xxx yyyy`您的端口将使用 UDP 发送日志`x``y`
*   获取 gem，并检查示例：它接收并解析日志，并显示内容。

当我说`display`时，实际上你可以用返回的内容做你想做的事情（推送到 irc，写入数据库......）。只需编写自己的“显示器”

我几天前发布了这个宝石，请随时尝试和贡献。我最近添加了对英语和法语翻译的 i18n 支持。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:44:13.243

I know this is an old question, but it's not answered anywhere that I can find. I'd rather not explain about UDP since that's been covered over and over. However, if you have properly given the server your public IP address and the same port you're listening to with UDP and you're not getting any data, there is one trick to actually receiving packets.

You have to send a message to the server, on the server's standard gameplay port. It doesn't matter what it is, it can be 'hello' for all the server cares. After that you should start getting data from the server. I'm not sure exactly why this is, but it's probably a strategy by Valve to avoid their server spamming just any old IP.

# python - 轮询 Web 服务的最佳方式（例如，对于 twitter 应用程序）

> ID：430226
> 
> 赞同：5
> 
> 时间：2009-01-10T00:10:56.947
> 
> 标签：python, twitter, polling

我需要轮询一个 Web 服务，在这种情况下是 twitter 的 API，我想知道关于这个主题的传统智慧是什么。我不确定这是否重要，但过去我一直发现反馈很有用。

我想出了几个场景：

1.  查询过程每 X 秒启动一次，例如 cron 作业运行 python 脚本

2.  一个过程在每次迭代中不断循环和查询，例如……嗯，这是我进入陌生领域的地方。我只是运行一个没有结束的python脚本吗？

谢谢你的建议。

ps - 关于 twitter 的细节：我知道它会发送电子邮件用于关注和直接消息，但有时可能需要解析@replies 的灵活性。在这些情况下，我相信民意调查是最好的。

pps - twitter 将机器人限制为每 60 分钟 100 个请求。我不知道这是否也限制了网页抓取或 RSS 提要阅读。有谁知道被列入白名单有多容易或多难？

再次感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T00:31:53.767

"Do I just run a python script that doesn't end?"

How is this unfamiliar territory?

```
import time
polling_interval = 36.0 # (100 requests in 3600 seconds)
running= True
while running:
    start= time.clock()
    poll_twitter()
    anything_else_that_seems_important()
    work_duration = time.clock() - start
    time.sleep( polling_interval - work_duration ) 
```

It's just a loop.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T00:22:11.103

您应该有一个类似于 Ping 或 Heartbeat 页面的页面。如果您有另一个“触发”或点击该页面的进程，通常您可以在您的网络主机的控制面板中执行此操作，或者如果您有本地访问权限，则使用 cron。然后，此脚本可以统计它在数据库或某些数据存储中轮询的频率，然后您可以根据实际需要频繁地轮询服务，当然将其限制在提供者限制的范围内。您绝对不想（当然也不想依赖）“不会结束”的 python 脚本。:)

# javascript - 是否可以使用 JS 打开 HTML 选择以显示其选项列表？

> ID：430237
> 
> 赞同：139
> 
> 时间：2009-01-10T00:17:53.750
> 
> 标签：javascript, html-select

是否可以使用 JavaScript 打开 HTML 选择以显示其选项列表？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2009-01-10T00:20:56.410

不幸的是，这个问题有一个简单的答案，那就是“不”

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2009-09-28T21:44:47.350

我遇到了这个问题......并找到了一个可行的解决方案。

在用户单击一些纯 HTML 之前，我不希望显示选择框。所以我用`opacity=.01`. 单击后，我将其更改回`opacity=100`. 这允许我隐藏选择，当用户单击文本时，选择出现并显示选项。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-01-03T15:19:42.360

这适用于谷歌浏览器

```
dropDown = function (elementId) {
    var dropdown = document.getElementById(elementId);
    try {
        showDropdown(dropdown);
    } catch(e) {

    }
    return false;
};

showDropdown = function (element) {
    var event;
    event = document.createEvent('MouseEvents');
    event.initMouseEvent('mousedown', true, true, window);
    element.dispatchEvent(event);
}; 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2009-10-09T18:56:54.033

我使用这个...但它需要用户单击选择框...

这是2个javascript函数

```
function expand(obj)
{
    obj.size = 5;
}
function unexpand(obj)
{
    obj.size = 1;
} 
```

然后我创建选择框

```
<select id="test" multiple="multiple" name="foo" onFocus="expand(this)" onBlur="unexpand(this)">
<option >option1</option>
<option >option2</option>
<option >option3</option>
<option >option4</option>
<option >option5</option>
</select> 
```

我知道这段代码有点晚了，但我希望它能帮助和我有同样问题的人。

ps/fyi 我没有测试上面的代码（我动态创建我的选择框），我写的代码只在 FireFox 中测试过。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-09T12:55:04.910

在尝试解决此问题一段时间后，我设法提出了一个同样有效的工作解决方案：

```
var event = new MouseEvent('mousedown');
element.dispatchEvent(event); 
```

我也尝试在 Jquery 中实现这一点，使用`trigger`and `mousedown`or only`mousedown`但没有成功。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-24T01:48:07.230

这已经很晚了，但我认为如果有人参考这个问题，这可能对他们有用。我相信下面的 JS 会做所要求的。

```
<script>     
         $(document).ready(function()
           {
          document.getElementById('select').size=3;
           });
    </script> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-01-10T00:21:46.800

我相当肯定答案是：不。您可以使用 JavaScript 选择选项，但不能打开选择。您必须使用自定义解决方案。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-01-23T02:40:26.507

我提出的解决方案安全、简单并且与 Internet Explorer、FireFox 和 Chrome 兼容。

这种方法是新的和完整的。我在互联网上找不到与该解决方案相同的东西。简单，跨浏览器（Internet Explorer、Chrome 和 Firefox），保留布局，使用 select 本身并且易于使用。

注意：JQuery 是必需的。

**代码**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>CustonSelect</title>
<script type="text/javascript" src="./jquery-1.3.2.js"></script>
<script type="text/javascript" src="./CustomSelect.js"></script>
</head>
<div id="testDiv"></div>
<body>
    <table>
        <tr>
            <td>
                <select id="Select0" >
                    <option value="0000">0000</option>
                    <option value="0001">0001</option>
                    <option value="0002">0002</option>
                    <option value="0003">0003</option>
                    <option value="0004">0004</option>
                    <option value="0005">0005</option>
                    <option value="0006">0006</option>
                    <option value="0007">0007</option>
                    <option value="0008">0008</option>
                    <option value="0009">0009</option>
                    <option value="0010">0010</option>
                    <option value="0011">0011</option>
                    <option value="0012">0012</option>
                    <option value="0013">0013</option>
                    <option value="0014">0014</option>
                    <option value="0015">0015</option>
                    <option value="0016">0016</option>
                    <option value="0017">0017</option>
                    <option value="0018">0018</option>
                    <option value="0019">0019</option>
                    <option value="0020">0020</option>
                    <option value="0021">0021</option>
                    <option value="0022">0022</option>
                    <option value="0023">0023</option>
                    <option value="0024">0024</option>
                    <option value="0025">0025</option>
                    <option value="0026">0026</option>
                    <option value="0027">0027</option>
                    <option value="0028">0028</option>
                    <option value="0029">0029</option>
                    <option value="0030">0030</option>
                    <option value="0031">0031</option>
                    <option value="0032">0032</option>
                    <option value="0033">0033</option>
                    <option value="0034">0034</option>
                    <option value="0035">0035</option>
                    <option value="0036">0036</option>
                    <option value="0037">0037</option>
                    <option value="0038">0038</option>
                    <option value="0039">0039</option>
                    <option value="0040">0040</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <select id="Select1" >
                    <option value="0000">0000</option>
                    <option value="0001">0001</option>
                    <option value="0002">0002</option>
                    <option value="0003">0003</option>
                    <option value="0004">0004</option>
                    <option value="0005">0005</option>
                    <option value="0006">0006</option>
                    <option value="0007">0007</option>
                    <option value="0008">0008</option>
                    <option value="0009">0009</option>
                    <option value="0010">0010</option>
                    <option value="0011">0011</option>
                    <option value="0012">0012</option>
                    <option value="0013">0013</option>
                    <option value="0014">0014</option>
                    <option value="0015">0015</option>
                    <option value="0016">0016</option>
                    <option value="0017">0017</option>
                    <option value="0018">0018</option>
                    <option value="0019">0019</option>
                    <option value="0020">0020</option>
                    <option value="0021">0021</option>
                    <option value="0022">0022</option>
                    <option value="0023">0023</option>
                    <option value="0024">0024</option>
                    <option value="0025">0025</option>
                    <option value="0026">0026</option>
                    <option value="0027">0027</option>
                    <option value="0028">0028</option>
                    <option value="0029">0029</option>
                    <option value="0030">0030</option>
                    <option value="0031">0031</option>
                    <option value="0032">0032</option>
                    <option value="0033">0033</option>
                    <option value="0034">0034</option>
                    <option value="0035">0035</option>
                    <option value="0036">0036</option>
                    <option value="0037">0037</option>
                    <option value="0038">0038</option>
                    <option value="0039">0039</option>
                    <option value="0040">0040</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <select id="Select2" >
                    <option value="0000">0000</option>
                    <option value="0001">0001</option>
                    <option value="0002">0002</option>
                    <option value="0003">0003</option>
                    <option value="0004">0004</option>
                    <option value="0005">0005</option>
                    <option value="0006">0006</option>
                    <option value="0007">0007</option>
                    <option value="0008">0008</option>
                    <option value="0009">0009</option>
                    <option value="0010">0010</option>
                    <option value="0011">0011</option>
                    <option value="0012">0012</option>
                    <option value="0013">0013</option>
                    <option value="0014">0014</option>
                    <option value="0015">0015</option>
                    <option value="0016">0016</option>
                    <option value="0017">0017</option>
                    <option value="0018">0018</option>
                    <option value="0019">0019</option>
                    <option value="0020">0020</option>
                    <option value="0021">0021</option>
                    <option value="0022">0022</option>
                    <option value="0023">0023</option>
                    <option value="0024">0024</option>
                    <option value="0025">0025</option>
                    <option value="0026">0026</option>
                    <option value="0027">0027</option>
                    <option value="0028">0028</option>
                    <option value="0029">0029</option>
                    <option value="0030">0030</option>
                    <option value="0031">0031</option>
                    <option value="0032">0032</option>
                    <option value="0033">0033</option>
                    <option value="0034">0034</option>
                    <option value="0035">0035</option>
                    <option value="0036">0036</option>
                    <option value="0037">0037</option>
                    <option value="0038">0038</option>
                    <option value="0039">0039</option>
                    <option value="0040">0040</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <select id="Select3" >
                    <option value="0000">0000</option>
                    <option value="0001">0001</option>
                    <option value="0002">0002</option>
                    <option value="0003">0003</option>
                    <option value="0004">0004</option>
                    <option value="0005">0005</option>
                    <option value="0006">0006</option>
                    <option value="0007">0007</option>
                    <option value="0008">0008</option>
                    <option value="0009">0009</option>
                    <option value="0010">0010</option>
                    <option value="0011">0011</option>
                    <option value="0012">0012</option>
                    <option value="0013">0013</option>
                    <option value="0014">0014</option>
                    <option value="0015">0015</option>
                    <option value="0016">0016</option>
                    <option value="0017">0017</option>
                    <option value="0018">0018</option>
                    <option value="0019">0019</option>
                    <option value="0020">0020</option>
                    <option value="0021">0021</option>
                    <option value="0022">0022</option>
                    <option value="0023">0023</option>
                    <option value="0024">0024</option>
                    <option value="0025">0025</option>
                    <option value="0026">0026</option>
                    <option value="0027">0027</option>
                    <option value="0028">0028</option>
                    <option value="0029">0029</option>
                    <option value="0030">0030</option>
                    <option value="0031">0031</option>
                    <option value="0032">0032</option>
                    <option value="0033">0033</option>
                    <option value="0034">0034</option>
                    <option value="0035">0035</option>
                    <option value="0036">0036</option>
                    <option value="0037">0037</option>
                    <option value="0038">0038</option>
                    <option value="0039">0039</option>
                    <option value="0040">0040</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <select id="Select4" >
                    <option value="0000">0000</option>
                    <option value="0001">0001</option>
                    <option value="0002">0002</option>
                    <option value="0003">0003</option>
                    <option value="0004">0004</option>
                    <option value="0005">0005</option>
                    <option value="0006">0006</option>
                    <option value="0007">0007</option>
                    <option value="0008">0008</option>
                    <option value="0009">0009</option>
                    <option value="0010">0010</option>
                    <option value="0011">0011</option>
                    <option value="0012">0012</option>
                    <option value="0013">0013</option>
                    <option value="0014">0014</option>
                    <option value="0015">0015</option>
                    <option value="0016">0016</option>
                    <option value="0017">0017</option>
                    <option value="0018">0018</option>
                    <option value="0019">0019</option>
                    <option value="0020">0020</option>
                    <option value="0021">0021</option>
                    <option value="0022">0022</option>
                    <option value="0023">0023</option>
                    <option value="0024">0024</option>
                    <option value="0025">0025</option>
                    <option value="0026">0026</option>
                    <option value="0027">0027</option>
                    <option value="0028">0028</option>
                    <option value="0029">0029</option>
                    <option value="0030">0030</option>
                    <option value="0031">0031</option>
                    <option value="0032">0032</option>
                    <option value="0033">0033</option>
                    <option value="0034">0034</option>
                    <option value="0035">0035</option>
                    <option value="0036">0036</option>
                    <option value="0037">0037</option>
                    <option value="0038">0038</option>
                    <option value="0039">0039</option>
                    <option value="0040">0040</option>
                </select>
            </td>
        </tr>
    </table>
    <input type="button" id="Button0" value="MoveLayout!"/>
</body>
</html> 
```

**JAVASCRIPT代码**

```
var customSelectFields = new Array();

// Note: The list of selects to be modified! By Questor
customSelectFields[0] = "Select0";
customSelectFields[1] = "Select1";
customSelectFields[2] = "Select2";
customSelectFields[3] = "Select3";
customSelectFields[4] = "Select4";

$(document).ready(function()
{

    //Note: To debug! By Questor
    $("#Button0").click(function(event){ AddTestDiv(); });

    StartUpCustomSelect(null);  

});

//Note: To test! By Questor
function AddTestDiv()
{
    $("#testDiv").append("<div style=\"width:100px;height:100px;\"></div>");
}

//Note: Startup selects customization scheme! By Questor
function StartUpCustomSelect(what)
{

    for (i = 0; i < customSelectFields.length; i++)
    {

        $("#" + customSelectFields[i] + "").click(function(event){ UpCustomSelect(this); });
        $("#" + customSelectFields[i] + "").wrap("<div id=\"selectDiv_" + customSelectFields[i] + "\" onmouseover=\"BlockCustomSelectAgain();\" status=\"CLOSED\"></div>").parent().after("<div id=\"coverSelectDiv_" + customSelectFields[i] + "\" onclick=\"UpOrDownCustomSelect(this);\" onmouseover=\"BlockCustomSelectAgain();\"></div>");

        //Note: Avoid breaking the layout when the CSS is modified from "position" to "absolute" on the select! By Questor
        $("#" + customSelectFields[i] + "").parent().css({'width': $("#" + customSelectFields[i] + "")[0].offsetWidth + 'px', 'height': $("#" + customSelectFields[i] + "")[0].offsetHeight + 'px'});

        BlockCustomSelect($("#" + customSelectFields[i] + ""));

    }
}

//Note: Repositions the div that covers the select using the "onmouseover" event so 
//Note: if element on the screen move the div always stand over it (recalculate! By Questor
function BlockCustomSelectAgain(what)
{
    for (i = 0; i < customSelectFields.length; i++)
    {
        if($("#" + customSelectFields[i] + "").parent().attr("status") == "CLOSED")
        {
            BlockCustomSelect($("#" + customSelectFields[i] + ""));
        }
    }
}

//Note: Does not allow the select to be clicked or clickable! By Questor
function BlockCustomSelect(what)
{

    var coverSelectDiv = $(what).parent().next();

    //Note: Ensures the integrity of the div style! By Questor
    $(coverSelectDiv).removeAttr('style');

    //Note: To resolve compatibility issues! By Questor
    var backgroundValue = "";
    var filerValue = "";
    if(navigator.appName == "Microsoft Internet Explorer")
    {
        backgroundValue = 'url(fakeimage)';
        filerValue = 'progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=\'scale\', src=\'fakeimage\' )';
    }

    //Note: To debug! By Questor
    //'border': '5px #000 solid',

    $(coverSelectDiv).css({
        'position': 'absolute', 
        'top': $(what).offset().top + 'px', 
        'left': $(what).offset().left + 'px', 
        'width': $(what)[0].offsetWidth + 'px', 
        'height': $(what)[0].offsetHeight + 'px', 
        'background': backgroundValue,
        '-moz-background-size':'cover',
        '-webkit-background-size':'cover',
        'background-size':'cover',
        'filer': filerValue
    });

}

//Note: Allow the select to be clicked or clickable! By Questor
function ReleaseCustomSelect(what)
{

    var coverSelectDiv = $(what).parent().next();

    $(coverSelectDiv).removeAttr('style');
    $(coverSelectDiv).css({'display': 'none'});

}

//Note: Open the select! By Questor
function DownCustomSelect(what)
{

    //Note: Avoid breaking the layout. Avoid that select events be overwritten by the others! By Questor
    $(what).css({
        'position': 'absolute', 
        'z-index': '100'
    });

    //Note: Open dropdown! By Questor
    $(what).attr("size","10");

    ReleaseCustomSelect(what);

    //Note: Avoids the side-effect of the select loses focus.! By Questor
    $(what).focus();

    //Note: Allows you to select elements using the enter key when the select is on focus! By Questor
    $(what).keyup(function(e){
        if(e.keyCode == 13)
        {
            UpCustomSelect(what);
        }
    });

    //Note: Closes the select when loses focus! By Questor
    $(what).blur(function(e){
        UpCustomSelect(what);
    });

    $(what).parent().attr("status", "OPENED");

}

//Note: Close the select! By Questor
function UpCustomSelect(what)
{

    $(what).css("position","static");

    //Note: Close dropdown! By Questor
    $(what).attr("size","1");

    BlockCustomSelect(what);

    $(what).parent().attr("status", "CLOSED");

}

//Note: Closes or opens the select depending on the current status! By Questor
function UpOrDownCustomSelect(what)
{

    var customizedSelect = $($(what).prev().children()[0]);

    if($(what).prev().attr("status") == "CLOSED")
    {
        DownCustomSelect(customizedSelect);
    }
    else if($(what).prev().attr("status") == "OPENED")
    {
        UpCustomSelect(customizedSelect);
    }

} 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2018-04-09T21:00:27.873

```
<select id="myDropDown">
  <option>html5</option>
  <option>javascript</option>
  <option>jquery</option>
  <option>css</option>
  <option>sencha</option>
</select> 
```

通过 jQuery：

```
var myDropDown=$("#myDropDown");
var length = $('#myDropDown> option').length;
//open dropdown
myDropDown.attr('size',length);
//close dropdown
myDropDown.attr('size',0); 
```

通过 javascript:

```
var myDropDown=document.getElementById("myDropDown");
var length = myDropDown.options.length;
//open dropdown
myDropDown.size = length;
//close dropdown
myDropDown.size = 0; 
```

复制自： [打开关闭选择](http://html5wood.com/how-to-automatically-openclose-dropdown-with-javascript-and-jquery/)

* * *

## 回答 #10

> 赞同：-11
> 
> 时间：2013-04-09T11:57:28.093

```
//use jquery
$select.trigger('mousedown') 
```

# http - multipart/x-mixed-replace 是否等待客户端请求？

> ID：430254
> 
> 赞同：4
> 
> 时间：2009-01-10T00:29:17.593
> 
> 标签：http, multipart-mixed-replace

我试图弄清楚在发送 multipart/xmixed-replace 响应时是否可以减慢服务器速度。我希望我的客户尝试对运动 jpeg 流进行速率限制。我发现了很多关于**服务器**在 HTTP 响应中发送什么的文档，但没有关于**客户端**发送什么的文档。

在 multipart/x-mixed-replace 响应中的每个部分之后，客户端会发送什么（如果有的话）？如果它不发送任何东西，服务器是否只是继续堆积零件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T19:47:52.217

实际上，我认为 multipart 的东西是一个红鲱鱼，因为 multipart 的概念只是在同一消息正文中描述内容类型。因此，从服务器的角度来看（就发送内容的速率而言），它与发送一大块数据并没有真正的不同。

所以，我想知道您是否可以 Range 标头只请求一个特定的范围——一次一个“部分”。

从响应头的末尾开始计算字节数。当您到达第一部分的末尾时，请注意读取的字节数并关闭连接。发送对同一文档的请求，但将起始范围指定为块末尾的字节。再次读取响应，当您到达部分末尾时，将当前响应字节添加到前一个字节，关闭连接并重复令人作呕...

还没有尝试过，但如果服务器支持范围标头并且您能够在客户端进行一些修补，听起来它会起作用。

编写一个通过丢弃数据包来限制速率的客户端代理可能更容易......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T13:19:13.967

尝试使用 Mozilla 的 LiveHTTPHeaders 插件。我去了 Gmail（它使用 AJAX）并跟踪了客户端和服务器之间的对话几分钟。看来这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T19:31:07.947

在 HTTP 级别，我认为客户端不会发送任何内容。服务器假定只要连接打开，它就可以继续发送响应。

我认为这个问题没有简单的 HTTP 级解决方案，因为客户端-服务器交换中没有“ack”概念。

对于这个问题，显然有 TCP-/IP 级别的解决方案。

我想知道当客户端实际接收到服务器的响应标头并识别出响应是多部分的时，它是否可以做一些不同的事情 - 然后它是否可以中止连接并打开一个新的非保持活动状态，然后一个接一个地获取这些部分...

# php - 我如何在 php 动态内容中编写为静态页面？

> ID：430255
> 
> 赞同：-1
> 
> 时间：2009-01-10T00:29:59.403
> 
> 标签：php, qcodo

我有一些他们愿意公开和可搜索的用户信息。我在想 ala LinkedIn 这些应该是生成的静态页面，它们驻留在我们的服务器上，具有固定的 URL。

从技术上讲，推荐的方法是什么？

下面是用例：用户表明他在某个帐户（例如 Gymboree）中有联系人。他的用户名是冲锋队。他知道 IT 部门主管和网络运营部门主管。

我想要一个静态的、可搜索的页面，他还可以通过电子邮件将人们发送到该页面，该页面将呈现以下内容：

“stormtrooper”在 Gymboree 知道以下头衔：

*   信息技术总监
*   网络总监

"stormtrooper" 需要以下公司的联系人：

*   签证
*   威廉姆斯-索诺玛

点击右边的表格联系他，看看你能不能给他一些联系方式。

我希望该页面是搜索“Gymboree”的人可能会偶然发现以帮助他们建立联系的东西，所以我的想法（可能是错误的）是它应该是一个静态页面。会有其他来自类似类型页面的入站链接指向它。

如果他不希望它可搜索，我希望该帐户和用户名对的页面被简单地删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T00:39:55.047

Your question is a little vague, but PHP can cache dynamically created pages into static ones. A very simplistic system would use output buffering to capture the dynamic contents and write them to a file. You then need to decide how to invalidate this cache (for example, by deleting the static file).

However, you should use caching only when you've encountered a specific performance problem, otherwise it just adds to the complexity of your application needlessly. You can also just cache the underperforming resource (for example database results) instead of the entire page.

If you would elaborate more on what you want to achieve, you'll get a more specific answer.

EDIT: I've reread your modified question. Your approach is incorrect - a person/web crawler requesting the page could not infer from the contents whether it was dynamically generated or not. It could try to guess from the URL format, but those can be controlled by the application. The page can be bookmarked and indexed by search engines just the same.

Caching to actual static files should be used as a optimization when generating those pages on the fly is too expensive.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T00:38:58.713

If you already have these pages as dynamic content, [wget](http://www.gnu.org/software/wget/) them as HTML and save as static pages somewhere on your server. Serve as usual HTML. Regenerate when necessary. I just don't see a reason why you want to make them static (performance? server security policy? why only these pages?).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-17T01:51:34.223

假设您有一个将内容发布到另一个 php 的表单，该表单显示动态结果，但您希望能够与其他人“共享”结果（因此，将动态结果转换为静态页面）。想想 GoogleDocs。这就是我想要做的（以及我是如何找到这个线程的）。那么最好的方法是什么？

# .net - 如何确定文件系统在 .net 中是否区分大小写？

> ID：430256
> 
> 赞同：14
> 
> 时间：2009-01-10T00:30:13.130
> 
> 标签：.net, linux, mono, filesystems, case-sensitive

.net 是否有办法确定本地文件系统是否区分大小写？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-10T00:37:01.493

您可以在临时文件夹中创建一个文件（使用小写文件名），然后检查该文件是否存在（使用大写文件名），例如：

```
string file = Path.GetTempPath() + Guid.NewGuid().ToString().ToLower();
File.CreateText(file).Close();
bool isCaseInsensitive = File.Exists(file.ToUpper());
File.Delete(file); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-10T09:50:43.937

请记住，您可能有多个具有不同大小写规则的文件系统。例如，根文件系统可能区分大小写，但您可以将不区分大小写的文件系统（例如，带有 FAT 文件系统的 U 盘）安装在某处。因此，如果您进行此类检查，请确保将它们放在您要访问的目录中。

此外，如果用户将数据从区分大小写的文件系统复制到不区分大小写的文件系统怎么办？如果您的文件仅按大小写不同，其中一个会覆盖另一个，从而导致数据丢失。在另一个方向复制时，您也可能会遇到问题，例如，如果文件 A 包含对文件“b”的引用，但文件实际上名为“B”。这适用于原始不区分大小写的文件系统，但不适用于区分大小写的系统。

因此，如果可以，我建议您避免取决于文件系统是否区分大小写。不要生成仅大小写不同的文件名，使用标准文件选择器对话框，准备好大小写可能会改变等。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-10T00:34:17.600

.NET 类库中没有这样的函数。

但是，您可以推出自己的：尝试使用小写名称创建文件，然后尝试使用其名称的大写版本打开它。可能有可能改进这种方法，但你明白了。

**编辑**：您实际上可以只获取根目录中的第一个文件，然后检查 filename.ToLower() 和 filename.ToUpper() 是否存在。不幸的是，同一文件的大写和小写变体很可能同时存在，因此您应该比较小写和大写变体的 FileInfo.Name 属性，看看它们是否确实相同。这不需要写入磁盘。

显然，如果卷上根本没有文件，这将失败。在这种情况下，只需退回到第一个选项（参见 Martin 的实现答案）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-04-20T22:31:14.373

它不是一个 .NET 函数，但来自 Windows API 的 GetVolumeInformation 和 GetVolumeInformationByHandleW 函数将执行您想要的操作（请参阅 yje lpFileSystemFlags 参数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-23T19:30:19.923

这个启发式怎么样？

```
public static bool IsCaseSensitiveFileSystem() {
   var tmp = Path.GetTempPath();
   return !Directory.Exists(tmp.ToUpper()) || !Directory.Exists(tmp.ToLower());
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-26T13:25:49.577

这是不使用临时文件的方法：

```
using System;
using System.Runtime.InteropServices;

static bool IsCaseSensitive()
{
    if (RuntimeInformation.IsOSPlatform(OSPlatform.Windows) ||
        RuntimeInformation.IsOSPlatform(OSPlatform.OSX))  // HFS+ (the Mac file-system) is usually configured to be case insensitive.
    {
        return false;
    }
    else if (RuntimeInformation.IsOSPlatform(OSPlatform.Linux))
    {
        return true;
    }
    else if (Environment.OSVersion.Platform == PlatformID.Unix)
    {
        return true;
    }
    else
    {
       // A default.
       return false;
    }
} 
```

相反，它包含有关操作环境的根深蒂固的知识。

作为 NuGet 包随时可用，适用于所有 .NET 4.0+ 并定期更新：[https ://github.com/gapotchenko/Gapotchenko.FX/tree/master/Source/Gapotchenko.FX.IO#iscasesensitive](https://github.com/gapotchenko/Gapotchenko.FX/tree/master/Source/Gapotchenko.FX.IO#iscasesensitive)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-10T00:33:18.740

尝试创建一个全小写的临时文件，然后使用大写检查它是否存在。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-09T14:53:41.323

实际上有两种方法可以解释原始问题。

1.  如何确定特定文件系统是否能够在文件名中保持区分大小写？
2.  如何确定当前操作系统在使用特定文件系统时是否区分大小写解释文件名。

这个答案基于第二种解释，因为我认为这是 OP 想知道的，也是对大多数人来说重要的。

以下代码大致基于 M4N 和 Nicolas Raoul 的回答，并尝试创建一个真正强大的实现，该实现能够确定操作系统是否在指定目录（不包括子目录，因为这些可能是从另一个文件系统挂载）。

它通过连续创建两个新文件来工作，一个是小写的，另一个是大写的。这些文件被独占锁定，并在关闭时自动删除。这应该避免由创建文件引起的任何负面影响。当然，这个实现只有在指定的目录存在并且当前用户能够在其中创建文件的情况下才有效。

*该代码是为 .NET Framework 4.0 和 C# 7.2（或更高版本）编写的。*

```
using System;
using System.IO;
using System.Reflection;

/// <summary>
/// Check whether the operating system handles file names case-sensitive in the specified directory.
/// </summary>
/// <param name="directoryPath">The path to the directory to check.</param>
/// <returns>A value indicating whether the operating system handles file names case-sensitive in the specified directory.</returns>
/// <exception cref="ArgumentNullException"><paramref name="directoryPath"/> is null.</exception>
/// <exception cref="ArgumentException"><paramref name="directoryPath"/> contains one or more invalid characters.</exception>
/// <exception cref="DirectoryNotFoundException">The specified directory does not exist.</exception>
/// <exception cref="UnauthorizedAccessException">The current user has no write permission to the specified directory.</exception>
private static bool IsFileSystemCaseSensitive(string directoryPath)
{
    if (directoryPath == null)
    {
        throw new ArgumentNullException(nameof(directoryPath));
    }

    while (true)
    {
        string fileNameLower = ".cstest." + Guid.NewGuid().ToString();
        string fileNameUpper = fileNameLower.ToUpperInvariant();

        string filePathLower = Path.Combine(directoryPath, fileNameLower);
        string filePathUpper = Path.Combine(directoryPath, fileNameUpper);

        FileStream fileStreamLower = null;
        FileStream fileStreamUpper = null;
        try
        {
            try
            {
                // Try to create filePathUpper to ensure a unique non-existing file.
                fileStreamUpper = new FileStream(filePathUpper, FileMode.CreateNew, FileAccess.Write, FileShare.None, bufferSize: 4096, FileOptions.DeleteOnClose);

                // After ensuring that it didn't exist before, filePathUpper must be closed/deleted again to ensure correct opening of filePathLower, regardless of the case-sensitivity of the file system.
                // On case-sensitive file systems there is a tiny chance for a race condition, where another process could create filePathUpper between closing/deleting it here and newly creating it after filePathLower.
                // This method would then incorrectly indicate a case-insensitive file system.
                fileStreamUpper.Dispose();
            }
            catch (IOException ioException) when (IsErrorFileExists(ioException))
            {
                // filePathUpper already exists, try another file name
                continue;
            }

            try
            {
                fileStreamLower = new FileStream(filePathLower, FileMode.CreateNew, FileAccess.Write, FileShare.None, bufferSize: 4096, FileOptions.DeleteOnClose);
            }
            catch (IOException ioException) when (IsErrorFileExists(ioException))
            {
                // filePathLower already exists, try another file name
                continue;
            }

            try
            {
                fileStreamUpper = new FileStream(filePathUpper, FileMode.CreateNew, FileAccess.Write, FileShare.None, bufferSize: 4096, FileOptions.DeleteOnClose);

                // filePathUpper does not exist, this indicates case-sensitivity
                return true;
            }
            catch (IOException ioException) when (IsErrorFileExists(ioException))
            {
                // fileNameUpper already exists, this indicates case-insensitivity
                return false;
            }
        }
        finally
        {
            fileStreamLower?.Dispose();
            fileStreamUpper?.Dispose();
        }
    }
}

/// <summary>
/// Determines whether the specified <see cref="IOException"/> indicates a "file exists" error.
/// </summary>
/// <param name="ioException">The <see cref="IOException"/> to check.</param>
/// <returns>A value indicating whether the specified <see cref="IOException"/> indicates a "file exists" error.</returns>
private static bool IsErrorFileExists(IOException ioException)
{
    // https://referencesource.microsoft.com/mscorlib/microsoft/win32/win32native.cs.html#dd35d7f626262141
    const int ERROR_FILE_EXISTS = 0x50;

    // The Exception.HResult property's get accessor is protected before .NET 4.5, need to get its value via reflection.
    int hresult = (int)typeof(Exception)
        .GetProperty("HResult", BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic)
        .GetValue(ioException, index: null);

    // https://referencesource.microsoft.com/mscorlib/microsoft/win32/win32native.cs.html#9f6ca3226ff8f9ba
    return hresult == unchecked((int)0x80070000 | ERROR_FILE_EXISTS);
} 
```

如您所见，竞争条件极有可能导致误报。如果这种竞争条件是您真正担心的事情，我建议您在结果为假时再次进行检查，无论是在`IsFileSystemCaseSensitive`方法内部还是外部。但是，在我看来，遇到这种竞态条件一次，更不用说连续两次的概率是天文数字的小了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-25T03:46:00.127

```
/// <summary>
/// Check whether the operating system is case-sensitive.
/// For instance on Linux you can have two files/folders called
//// "test" and "TEST", but on Windows the two can not coexist.
/// This method does not extend to mounted filesystems, which might have different properties.
/// </summary>
/// <returns>true if the operating system is case-sensitive</returns>
public static bool IsFileSystemCaseSensitive()
{
    // Actually try.
    string file = Path.GetTempPath() + Guid.NewGuid().ToString().ToLower() + "test";
    File.CreateText(file).Close();
    bool result = ! File.Exists(file.ToUpper());
    File.Delete(file);

    return result;
} 
```

基于 M4N 的回答，有以下变化：

*   静态名称，以便我们确定它包含一个字母而不仅仅是数字。
*   也许更具可读性？
*   包裹在一个方法中。
*   文档。

更好的策略是将路径作为参数，并在同一个文件系统上创建文件，但在那里写入可能会产生意想不到的后果。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-05T17:32:50.997

我调用作弊：

```
Path.DirectorySeparatorChar == '\\' ? "I'm insensitive" : "I'm probably sensitive" 
```

# ruby-on-rails - 在 Rails 中，如何将 RESTful 控制器与 Haml 一起使用？

> ID：430259
> 
> 赞同：4
> 
> 时间：2009-01-10T00:32:43.017
> 
> 标签：ruby-on-rails, ruby, rest, haml

我开始研究如何使用 RESTful 设计。我有这个动作：

```
# GET /feedback_messages
# GET /feedback_messages.xml
def index
  page = params[:page]
  page ||= 1
  @feedback_messages = FeedbackMessage.paginate(
    :all,
    :page => page,
    :per_page => 20,
    :order => 'updated_at'
  )

  respond_to do |format|
    format.html # index.html.erb
    format.xml  { render :xml => @feedback_messages }
  end
end 
```

我有模板...

```
views/feedback_message/index.haml 
```

当我点击它时，`app.get '/feedback_messages'`我收到一条错误消息“缺少模板反馈信息/index.erb”。

如何告诉 Rails 我希望它使用 Haml 模板？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-10T00:45:53.363

如果您正在运行 HAML - 首先确保您已将 HAML 安装到应用程序...通过`haml --rails .`在项目的根目录运行。然后从那里确保您所有的 HAML 文件都命名为 [filename].html.haml - 它分解为 filename.format.interpreter。由于 respond_to 格式块，您在 REST 中执行此操作很重要。

# c# - 下一个或上一个枚举

> ID：430264
> 
> 赞同：4
> 
> 时间：2009-01-10T00:34:29.160
> 
> 标签：c#, enums

给定一个已分配值的枚举，在给定值的情况下获取下一个或上一个枚举的最佳方法是什么。例如，考虑这个枚举：

```
public enum TimeframeType {
    None = 0,
    [Description("1 month")]
    Now = 30,
    [Description("1-3 months")]
    Short = 90,
    [Description("3-6 months")]
    Medium = 180,
    [Description("6+ months")]
    Long = 360
} 
```

有没有一种好方法可以创建一个可以执行 EnumPrevious(TimeframeType.Short) 返回 TimeframeType.Now 并且 EnumNext(TimeframeType.Short) 将返回 TimeframeType.Medium 的函数？

我已经写了一个丑陋的 EnumNext 实现，但我不相信这是最好的方法。我希望其他人已经解决了这个问题。

```
public static T EnumNext<T>(T value) where T : struct {
    T[] values = (T[])Enum.GetValues(typeof(T));

    int i;
    for (i = 0; i < values.Length; i++) {
        if (object.Equals(value, values[i])) {
            break;
        }
    }
    if (i >= values.Length - 1) {
        return values[values.Length - 1];
    } else {
        return values[i + 1];
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T00:38:33.457

您正在尝试解决错误的问题。这对于一个简单的枚举来说太复杂了。将枚举重构为一个类并使用比较接口。

如果这条路线对您开放，请查看一个类如何*实现*它：

```
public class TimeFrame: IComparable
{
   private int days;

   public int Days
   {
        set 
        {
             days = value;
        }
   }

   public int CompareTo(object other)
   {
        //see this for implementation -- http://msdn.microsoft.com/en-us/library/system.icomparable.aspx#Mtps_DropDownFilterText
   }

   public string Description
   {
       get code to return the description string , ie "1-3 months"
   }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T00:39:10.383

.NET 中的枚举并不是真的要订购的，所以你不应该依赖它。稍后其他人可能会来并在中间某处添加一个不正常的值。因此也没有内置这样的功能。您可以编写自己的函数（类似于您已经编写的函数），但这完全取决于您。我还建议您在您的方法中自己进行排序，而不是依赖 .NET 来保持项目“排序”。

**补充：**那，我也赞同你应该选择另一种数据结构的观点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T00:42:29.613

据我所知，没有内置的方法可以做到这一点，而且您的解决方案看起来很花哨 - 假设 enum 是在这里使用的正确构造......

我确实认为您正在尝试对枚举做一些事情。也许 TimeframeType 应该是一个类，还是应该有一个 Timeframe 数据的静态数组？

（刚刚看到吉米的帖子——看起来我们有类似的看法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T01:28:08.037

**请注意，这仅在您不关心枚举的值并且只希望它们排序时才有效**

如果您可以更改枚举，我将执行以下操作

```
public enum TimeframeType {
    None = 0,
    [Description("1 month")]

    TimeFrameStep = 30,
    [Description("Step from previous to next")]

    Now = None + TimeFrameStep,
    [Description("1-3 months")]

    Short = Now + TimeFrameStep,
    [Description("3-6 months")]

    Medium = Now + TimeFrameStep,
    [Description("6+ months")]

    Long = Medium + TimeFrameStep,
    [Description("12 months")]
} 
```

然后我将通过 TimeFrameStep 递增增量器从 Now 循环到 Long。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-10T03:58:56.983

请参阅问题[Enum in C++ like Enum in Ada](https://stackoverflow.com/questions/300592/enum-in-c-like-enum-in-ada)以获取有关 Ada 功能的信息 - 尽管在评论中写了什么，但我认为在 C、C++ 和（我认为）中提供相同的功能并不是一件容易的事C# 或 Java，除非这些系统自动提供帮助。

# sql - Oracle：`(+)` 在 WHERE 子句中的作用是什么？

> ID：430274
> 
> 赞同：65
> 
> 时间：2009-01-10T00:41:31.283
> 
> 标签：sql, oracle, operators

*在我们正在迁移（通用）*的基于 Oracle 的应用程序中发现以下内容：

```
SELECT
    Table1.Category1,
    Table1.Category2,
    count(*) as Total,
    count(Tab2.Stat) AS Stat
FROM Table1, Table2
WHERE (Table1.PrimaryKey = Table2.ForeignKey(+))
GROUP BY Table1.Category1, Table1.Category2 
```

WHERE 子句中的作用是什么`(+)`？我以前从未见过这样使用它。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2009-01-10T00:46:45.453

根据“=”的哪一侧，“（+）”表示左外连接或右外连接（在这种情况下，它是左外连接）。这是旧的 Oracle 语法，有时会被那些首先学习它，因为他们喜欢它使他们的代码更短。

不过，为了便于阅读，最好不要使用它。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-01-10T00:52:50.853

正如其他人所说，该`(+)`语法是过时的，Oracle 多年来使用的专有语法来实现与`OUTER JOIN`. 我假设他们在 SQL-92 决定标准语法之前采用了他们的专有语法。

使用标准 SQL`OUTER JOIN`语法（现在所有主要 RDBMS 实现都支持）的等效查询如下：

```
SELECT
    Table1.Category1,
    Table1.Category2,
    COUNT(*) AS Total,
    COUNT(Table2.Stat) AS Stat
FROM Table1
  LEFT OUTER JOIN Table2 ON (Table1.PrimaryKey = Table2.ForeignKey)
GROUP BY Table1.Category1, Table1.Category2; 
```

意思是：

*   来自的所有行都`Table1`包含在查询结果中。
*   如果 中有匹配的行，则包括这些行（如果 中有多个匹配的行，则`Table2`重复内容）。`Table1``Table2`
*   如果 中没有匹配的行`Table2`，则`NULL`用于查询结果中的所有`Table2`列。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-10T00:42:18.363

这是一种非 ANSI 左外连接表示法。从 Oracle9i 开始，使用 '(+)' 符号的令人困惑的外连接语法已被 ISO 99 外连接语法所取代。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-27T21:03:50.030

一个值得注意的考虑是经典的 Oracle 表示法不直观，最好从代码清晰度和可维护性的角度避免。

为了说明这一点，我已经包含了这个例子。

为了实现`LEFT outer join`表之间的a `A`，`B`人们会期望左边的表A应该在它旁边有（+）运算符。这是有道理的，因为我们想要表示我们将包括 A 的所有行，而不管与 B 的连接标准是否成功。然而，情况并非如此，连接是通过如下方式实现的

```
select b.age, a.name
from Employees a, EmployeeUNI b
where a.id = b.id(+) 
```

我更喜欢明确的 ANSI SQL 版本：

```
select b.age, a.name
From Employees a 
    LEFT outer join EmployeeUNI b
on a.id = b.id 
```

两种方法都产生相同的输出，但是 ANSI 方法不会带来新手程序员错误地将 (+) 放在错误位置的风险。

# c# - 使用 CSS 在 iTextSharp 中从 HTML 渲染 PDF

> ID：430280
> 
> 赞同：21
> 
> 时间：2009-01-10T00:45:15.283
> 
> 标签：c#, html, pdf, itextsharp

知道如何使用 iTextSharp 呈现 PDF，以便它使用 CSS 呈现页面。css 可以嵌入到 HTML 中，也可以单独传入，我真的不在乎，只是希望它工作。

将不胜感激具体的代码*示例*。

此外，我真的很想坚持使用 iTextSharp，但如果您确实对其他内容有建议，它必须是免费的、开源的，并且拥有允许在商业软件中使用它的许可证。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-10T04:21:04.333

现在不可能，但没有什么能阻止你启动开源项目来做到这一点。我实际上可能会开始一个，因为我也需要它！

基本上，您将需要将 html 和 css 标记转换为 iTextSharp 类的解析器。如此`<table>`成为`iTextSharp.SimpleTable`等等。

很容易想出能够使用有限的 html 和 css 子集的原型。

**更新：**在这成为可能之前，这就是我暂时为自己解决的方法。只需两步：

*   [**告诉您的用户下载名为PDFCreator**](http://www.pdfforge.org/)的开源应用程序[](http://www.pdfforge.org/)
***   通过提供用于打印的样式表，使您的所有 html 报告打印机友好。

    *如果您的某些多页报告需要在每个页面上都有标题，请在 THEAD html 标记中设置它们。*** 

 **现在用户将能够打印友好，如果他们选择 PDFCreator 打印机驱动程序，他们甚至可以获得 PDF 格式的报告（还有其他 pdf 打印机驱动程序，但这个是免费和开源的）。

我也知道 HTML 不如 PDF 灵活，但它可能已经足够好了。我正在与真实用户进行一些测试，他们真的很喜欢它，因为他们现在不仅可以将任何内容打印到 PDF（甚至超出我的应用程序），而且他们的工作流程更快，因为他们不必下载并等到他们的 pdf 阅读器打开向上。他们只是直接从他们的网络浏览器打印（或导出为 pdf）他们在网站上看到的内容......有点道理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-08-31T13:47:42.183

试试 WKHTMLTOPDF。

它是 webkit 的开源实现。两者都是免费的。

我们在[这里设置了一个小教程](http://beebole.com/en/blog/general/convert-html-to-pdf-with-full-css-support-an-opensource-alternative-based-on-webkit/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-22T12:19:09.863

```
 List<DateTime[]> getListWeeks(int annee)
        {
            List<DateTime[]> weeks = new List<DateTime[]>();
            DateTime beginDate = new DateTime(annee, 1, 1);
            DateTime endDate = new DateTime(annee, 12, 31);
            int nb =(int)beginDate.DayOfWeek;
            DateTime monday = beginDate.AddDays(-nb+1); ;
            DateTime saturday = monday.AddDays(6);
            while (monday < endDate)
            {
                    weeks.Add(new DateTime[] { monday, saturday });
                    monday = monday.AddDays(7);
                    saturday = monday.AddDays(6);
            }
            return weeks;
        } 
```

# redirect - 一个满足我需求的专属门户

> ID：430282
> 
> 赞同：2
> 
> 时间：2009-01-10T00:46:12.520
> 
> 标签：redirect, dns, portal

我正在为我的组织寻找强制门户。我看到其中有很多可以让用户在 a.)输入凭据或 b.)付款后通过。我正在寻找的是有点不同。让我介绍一下我的系统的一些基础知识，我正在使用活动目录和内部 DNS 运行基于 Windows 的网络。我有一个内部网，我们的员工每天都在其中使用，它使用该人的 Windows 凭据在系统上对他们进行身份验证。

员工必须每天输入时间，如果他们不这样做，那么我希望有一个强制门户将他们重定向到他们的时间输入页面，并且在输入时间之前不要让他们进入广阔的互联网世界。

我是一名开发人员，因此我可以编写一个向系统返回 True 或 False 的脚本，但我需要的是一个可以与 AD 登录交互并且可以在用户请求访问网络外部时运行此脚本的系统。

**编辑：** 我接受了一个答案作为我的问题的答案，但是，在研究了基于套接字的方法的编码之后，我没有时间。

作为一种解决方法，我发现我的防火墙有一个可自定义的免责声明页面，该页面允许使用 javascript。我将查询网络服务以查看是否输入了时间，然后触发免责声明页面的“允许”功能，否则我将重定向到时间输入页面。似乎是一个足够简单的解决方案，唯一的问题是这个人是否让他们的浏览器会话在一夜之间保持打开状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-10T03:54:04.250

好吧，现在我只在 .NET 中编写代码，一些 OSS 可能有更好的想法。

如果不使用代理，我无论如何都看不到这样做，最好是网关上的透明代理服务器。一定有人写过这样的东西。当然，每个商业 wifi 热点都有一个，但您可能想要一个在服务器而不是设备上运行的热点。

我对此一无所知，但这是我过去考虑过的事情。

您也许可以找到具有该功能的路由器/防火墙盒。Microsoft IAS 我有一个插件可以做到这一点（它不太可能便宜）。对谷歌的简要介绍并没有像其他软件那样做。

[温盖特](http://www.wingate.com/products/wingate/index.php)- 可能会，我想不通

否则，您可以编写一个透明代理应用程序（这意味着，除非您编写嵌入式代码，否则您需要使用应用服务器作为默认网关），或者如果您可以锁定用户浏览器代理设置，则只需一个普通代理。我想编码这可能不是一个简单的选择！但这是可能的。您甚至可以使用 IIS 和 ASP.NET。

[iisproxy](http://www.iisproxy.net/)是一个代理，实现为带有源代码的 IIS ISAPI 过滤器。我怀疑这是在 C 或 C++ 中。

在 Codeplex 上是一个反向代理代码[示例](http://www.codeproject.com/KB/web-security/HTTPReverseProxy.aspx?fid=51158&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=26#xx0xx)。您可以更改它并扩展到完整代理。

您可能能够使用套接字完成所有工作并完全脱离应用程序层。这可能会使生活更简单，所以我希望有一个原因不能像这样完成！让基于套接字的代理重定向到不合规用户到时间记录应用程序，当他们填写了他们的时间表后，只需透明地传递套接字之间的所有数据。

我会对您或任何人的想法感兴趣，因为我一直希望 AUP 每天向我们办公室的用户显示一次，并带有一个继续框。更好的是，如果代理收集了该信息，它可以列出用户昨天在 Facebook 等上花费了多少时间。我认为足以改变人们的行为。事实上，可以使用易于更改或可扩展的 HTTP 代理来完成许多有用的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T18:05:21.957

克里斯托弗·爱德华兹或多或少是对的。[Captive 门户](http://en.wikipedia.org/wiki/Captive_portal)基本上是一个防火墙，它透明地将所有连接转发到请求用户身份验证的本地 Web 服务器。成功验证后，防火墙规则会重新配置为已验证用户的 IP，以便他/她可以访问 Internet 或其他网络。

您可以通过脚本和 Web 服务器或代理设置自己的 Captive 门户，但强制要求物理上所有网络流量都穿过充当防火墙的机器。

我有使用基于 BSD 发行版的名为[m0n0wall](http://m0n0.ch/wall/)的 OSS 发行版的经验，它可以直接嵌入[专用硬件](http://m0n0.ch/wall/installation_embedded.php)或安装在任何 PC 上。这个发行版虽然是 OSS，但非常专业，提供的功能与任何商业 FW 设备（即[Watchguard 产品](http://www.watchguard.com/products/)或[Cisco 产品](http://www.cisco.com/en/US/products/ps5708/Products_Sub_Category_Home.html)）基本相同或更多。它提供了一个 Web 管理界面来完全管理防火墙。

如果您决定采用这种方式，唯一的问题是 m0n0wall 强制门户只有两种身份验证方式：本地用户数据库列表或外部 Radius 服务器。在您的情况下，您需要设置一个集成在 AD 身份验证服务中的外部 Radius 服务器。这是一个如何做到这一点的[例子。](http://support.mof.go.th/radius_windows.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T00:54:46.493

这是它的工作原理。你需要：

*   一个*iptable*通用防火墙，
*   一个开放的路由器固件，比如*dd-wrt*，它有更多支持热点的选项
*   像*apache这样的服务器*
*   *dhcp3-server*作为 DHCP 服务器
*   *bind9*作为 DNS 服务器，因此用户在连接到热点时不必手动配置他们的计算机网络配置
*   *PHP*或其他语言编写您选择的服务器端脚本。

当用户在登录页面上得到验证时，您需要标记您不打算重定向到 Internet 而是登录页面的数据包，他或她的 IP 将从列表中删除，以便他可以自由浏览，或者如果他尝试浏览他的数据包会标明你会用什么来识别他。由于 iptables 的东西，我建议您为此使用 linux。

这是它的工作原理：

1.  每个连接到无线热点的用户都通过网关连接到互联网。
2.  网关本身充当路由器和防火墙（并且可能还充当门户网站服务器，就像在本实验中一样）。
3.  每个未经身份验证的用户发往 Internet 的 HTTP 数据包都被防火墙“标记”为特殊代码，因此可以拦截（重定向）到门户网站服务器。
4.  门户网站服务器透明地向用户提供认证网页，并识别用户使用的计算机。
5.  用户通过网络服务器接受/验证自己，因此他们的计算机身份（在这种情况下是他们的网络接口 MAC 地址）被输入到防火墙的白名单中。
6.  只要用户的网络接口在防火墙的白名单内，从它们发送的数据包就不会被标记为拦截。然后，路由器将数据包转发到互联网，而不会再次被拦截到 Web 门户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-24T14:22:03.057

[DNS Redirector](http://dnsredirector.com)是一个强制门户产品，您可以在其中开发自己的 HTML/ASP/任何内容的欢迎/阻止页面。既然您的服务器已经在运行 Windows，为什么不为此使用 IIS 和 ASP。

# visual-studio - 如何添加两个项目。视觉工作室 2008

> ID：430295
> 
> 赞同：1
> 
> 时间：2009-01-10T00:54:01.477
> 
> 标签：visual-studio

我刚刚创建了一个项目，所以我的解决方案资源管理器看起来像这样：（ [来源：][[kalleload.net](http://www.kalleload.net/uploads/gwdgdm/yszoerpnieed.jpg)][）][![探索者](https://i.stack.imgur.com/FXcbd.jpg)](https://i.stack.imgur.com/FXcbd.jpg)

但是我想添加另一个与该项目相关的项目，但它将是一个类库，它将输出一个我可以在任何其他项目中使用的 DLL。

那么如何创建一个包含多个项目的“解决方案”呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-10T00:58:02.467

只是一个相关信息：

还有一个名为“始终显示解决方案”的选项（在工具/选项/项目和解决方案中）。启用后，始终显示解决方案，即使只有 1 个项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T00:55:37.167

**文件 -> 添加 -> 新项目..**

# unit-testing - Microsoft 的实体框架如何抑制测试驱动开发？

> ID：430300
> 
> 赞同：5
> 
> 时间：2009-01-10T00:58:45.133
> 
> 标签：unit-testing, entity-framework, testing, agile

MS 的实体框架在敏捷社区的开发人员中被认为是为了抑制测试驱动的开发。它被一群有影响力的 .Net 开发人员[攻击](http://efvote.wufoo.com/forms/ado-net-entity-framework-vote-of-no-confidence/)，因为它没有真正反映敏捷运动的原则。

敏捷开发人员在使用实体框架时面临的主要缺点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T01:07:45.410

这是因为它没有模拟 - 它鼓励您将应用程序基于直接 ping 数据库的对象，而无法模拟它。敏捷开发的主要原则之一是测试*速度快*，因此运行它们很轻松，并且您可以不断测试您的代码，但是使用 EF，您的对象总是 ping 数据库，您必须进行可怕的黑客攻击才能绕过EF 为您生成的用于测试的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T02:07:23.373

除了不包含 Mocks 框架外，它还鼓励通过 UI 提示（智能感知）在您要测试的代码*之后编写测试。*

# windows - 在 Windows Vista 中打开 .sln 文件

> ID：430302
> 
> 赞同：0
> 
> 时间：2009-01-10T01:01:55.313
> 
> 标签：windows, visual-studio, windows-vista

这似乎很荒谬，但是我如何在 Windows Vista 中双击打开一个 VS 解决方案文件呢？

每次我这样做时都会收到一个奇怪的错误，即该文件不存在。我很确定这是一个 Vista 配置，但我找不到任何相关信息。

每次要打开解决方案时都必须打开 VS IDE 真的很烦人。我宁愿只点击文件，就是这样！

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-10T01:06:49.673

右键单击解决方案文件--->属性-->更改--> VS exe---->单击框以用作默认值

在vista中，您还需要“以管理员身份运行”

编辑：您不需要以管理员身份启动每个项目，您只需要确保您的 VS 进程以管理员身份运行

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-19T00:52:26.627

如果您将 VSLauncher 设置为以管理员身份运行，则双击将起作用。\Common Files\microsoft shared\MSEnv\VSLauncher.exe。右键单击并将文件设置为以管理员身份运行。这是 VS2005 解决方案的一个问题，因为 VS2005 总是需要在 Vista 上以管理员身份运行。VSLauncher 负责读取 .sln 文件中的元数据以确定要执行哪个版本的 devenv.exe。由于 VS2005 的 devenv.exe 需要以管理员身份运行，因此 VSLauncher.exe 必须以管理员身份运行才能启动它。

# c# - 例外/类所需的解释

> ID：430313
> 
> 赞同：0
> 
> 时间：2009-01-10T01:13:45.197
> 
> 标签：c#, design-patterns

考虑以下代码段：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;

namespace ForumLogins {
    public class VBULLETIN {

        HttpWebRequest request;

        public void ForumLogins(string url) {          
            request = (HttpWebRequest)WebRequest.Create(url);
        }
    }
} 
```

根据 MSDN，“创建”方法可以返回 4 个异常。现在我无法解决这些异常......因为否则该类将无法运行。但是我该怎么办？我还应该将它包装在 try/catch 块中吗？并在“抛出一个新异常”中捕获......或者让实现这个类的人处理异常？

因为这是一个构造函数..我猜构造函数真的应该失败吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T01:26:43.250

如果您的构造函数可能失败，那么您可能应该让实现该类的人处理错误。请务必记录它可能会失败的事实，以便他们知道尝试/捕捉。

在相关的说明中，构造函数永远不应该失败。=)

相反，将可能失败的逻辑放入“Go()”方法中。这样你可以实例化一个真正的类，但是在代码段周围放置一个 try/catch，并且稍后仍然引用 try-catch 块之外的对象。只是我的 0.02 美元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T01:25:10.900

你做什么取决于代码的作用。如果这是您要共享的库，我建议您包装所有异常并为您的库重新抛出有意义的异常。这将帮助您实现实现封装。

例如

```
try
{
   if (string.isNullOrEmpty(url))
   {
      //This will stop the arugment null exception and you can throw a meaningful message
   } 
    request = (HttpWebRequest)WebRequest.Create(url);
}
catch(SecurityException sex)
{
   //Can't handle this but maybee you can provide more information about how to configure security here...

     throw new YourCustomerException(msg,sex); //It's good practice to put the current exception in the inner exception
} 
```

如果您没有构建组件并且这是您的应用程序，那么我建议您沿着堆栈的某个位置捕获错误并记录它。

此外，这不是您在 WebRequest 上调用名为 Create 的 Factory 方法的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T01:31:36.970

在我看来，此代码不是您将要使用的确切代码，因此我正在尝试根据您要问的问题来回答您的问题。

我会建议在可能的情况下，您处理异常。如果那不可能，我认为在您的情况下，最好的方法是将 WebRequest.Create 异常包装为 InnerException 并重新抛出它。这样可以保持抽象，同时在必要时仍然可以提供更多细节。大概是这样的：

```
try{
    request = (HttpWebRequest)WebRequest.Create(url);
}
catch(Exception e) {
    throw new ForumLoginException(e);
} 
```

# javascript - 表格数据上的 G-mail 样式表单提交

> ID：430314
> 
> 赞同：0
> 
> 时间：2009-01-10T01:14:25.413
> 
> 标签：javascript, html, c, forms, cgi

我有从 CGI 应用程序填充的 html 中的表数据行。我希望每一行旁边都有一个复选框，这样我就可以删除多行，就像在 gmail 中一样。

我想出了基本的文本表单，并能够将其发送到 CGI 程序以删除该行，但我不想一次输入行名称来删除单个文件。

当您可以通过复选框选择多个删除时，表单两侧（html-browser 和 C-CGI 应用程序）的代码是什么样的？某处有例子吗？（我仅限于 JS 和 HTML，但我认为 JS 无论如何都是用于验证，现在不需要。CGI 应用程序端的 C 编码。）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T01:54:57.313

查看“AJAX”风格的 javascript。当您向服务器发出 AJAX 请求时，传递所有删除。服务器端应编码为在单个请求中接受多个删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T02:03:18.950

好吧，您可以通过以下几种方式做到这一点：

1) 使所有元素具有相同的形式。将每个复选框命名为相同，但为每个复选框指定一个值，以区分它所代表的记录/ID/文件。当浏览器（如果兼容）提交表单时，CGI 应用程序应该能够将 HTTP 参数视为 POST 或 GET 提交的一部分。许多像 PHP 这样的 CGI 应用程序将同名参数组合到一个数组中。您也可以随时使用 C 自己遍历参数列表。

```
// Client side html
<table>
<form>
<tr><td><input type="checkbox" name="id" value="1"/></td><td>Row 1</td></tr>
<tr><td><input type="checkbox" name="id" value="2"/></td><td>Row 2</td></tr>
<tr><td><input type="checkbox" name="id" value="3"/></td><td>Row 3</td></tr>
<tr><td><input type="checkbox" name="id" value="4"/></td><td>Row 4</td></tr>
</form>
</table>

// Server side CGI, using pseudo-code
String[] ids = request.getArrayOfParametersNamed("id");
if(!empty(ids)) {
 for(id in ids) {
   DatabaseControllerModelThingWhatever.deleteById(id);
 }

 // Actually if SQL based you should use a batch statement instead of 
 // one-at-a-time deletes like above
}

// Ok the rows are deleted, either print out the page, or better yet,
// send a redirect so that a user-refresh does not try and re-delete 
// already deleted stuff and also give the user a wierd "resubmit form" warning
// Done 
```

2) 使用 AJAX，最好是某种类型的 Javascript 库，当用户单击删除时，执行基于 ajax 的提交，提交删除检查记录的请求。同时使用 Javascript 从 HTML 表中删除行。这意味着用户的页面永远不会完全刷新，嗯，有点。

```
 // Client side HTML is same as before, only this time there is a DELETE button with
 // an onclick handler. Also, add a "class" or "id" to each "tr" so we can find it 
 // in the HTML table

 // Pseudo-javascript because I am lazy
 function onDeleteButtonClick() {

  // Get our ids
  var idElements = document.getElementsById("id");

  // Submit an async AJAX request (e.g. use Jquery and send ids as URL params)
  ajaxedDeleteSubmission(idElements);

  // Delete all the rows that should not be there
  for(i = 0; i < tablex.rows.length; i++) {
   // Grab the value of the "id" attribute of each table row (<tr id="?">...</tr>)
   id = tablex.rows[id].id;
   if(id in ids) {
    // Remove the row, forget how because now I just use Jquery.
    tablex.deleteRow(i);
   }
  }
 } 
```

# closures - 闭包和上下文无关语法

> ID：430324
> 
> 赞同：6
> 
> 时间：2009-01-10T01:19:07.603
> 
> 标签：closures, computer-science, grammar, context-free-grammar

我正在查看我的理论计算机科学课程的教学大纲，并在上下文无关语法的标题中列出了“闭包属性”。我翻阅了关于这个主题的教科书，发现很少。目前它所拥有的东西有点超出我的想象（我还没有上过这门课程），但我了解一点。

我想知道上下文无关语法中的闭包概念是否与函数式编程中的闭包概念相同或相关。据我所知，它谈到了结合语法和解决重叠问题。书中的部分有很多部分我还不明白，所以我不确定这些想法是否相同。

（更多背景信息：我正在给教授写一封电子邮件，询问是否可以将课程从 Perl 切换到 Ruby 或 Python。如果这些概念相关，那可能是我们应该使用 Ruby 而不是 Perl 的另一个原因。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-10T02:49:32.193

术语“闭包”以多种方式使用，在某种意义上主要追溯到数学的完成概念。

*   如果将该运算符应用于集合中的值总是从给定集合中产生一个值，则该运算符被“封闭”一组值。例如，加法对整数是封闭的，但除法不是（4 / 2 是整数，但 5 / 2 不是）。因此，整数的加法在某种意义上是“完整的”，而除法不是。

*   关系的“传递”闭包通过遵循（所有可能的）多个应用程序来“完成”关系。在日常术语中，“is a descendent of”的概念是“is a child of”关系的传递闭包。

*   通过例如指定如何解析自由变量来“完成”功能性“闭包”。在伪代码表达式中：

    ```
    bump = function(x) (x + y) 
    ```

    `x`是 的论点`bump`，但定义似乎留下了“开放”的解决问题`y`。另一方面，如果我们定义：

    ```
    bumper = function(y) (function(x) (x + y)) 
    ```

    然后调用`bumper`返回一个函数，该函数将 的原始参数添加`bumper`到创建的函数的参数中，因此：

    ```
    add3 = bumper(3) 
    ```

    相当于定义：

    ```
    add3 = function(x) (x + 3) 
    ```

    嵌套定义“封闭”（或完成）在其定义点可用的变量。

所以，实际上，“闭包”的使用上面都有不同的具体含义，乍一看似乎无关，但有一种微妙的潜在关系。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-10T01:32:39.323

闭包属性是这样的：如果 L 和 M 是上下文无关语言，那么 L|M 也是。函数闭包是实现一流函数的一种方式。所以不，他们几乎没有任何关系。

那为什么叫同名呢？函数闭包“封闭”其自由变量：

```
def adder(n): return lambda m: n + m 
```

这里 n 是 lambda 的一个自由变量。这个名字强调了这一点，因为 Lisp 最初*并没有*关闭自由变量——当调用内部函数时，它们会从堆栈上的任何绑定中获取它们的值。

数学中属性的闭包更为明显：如果一个集合在一个操作下是封闭的，那么在该集合中应用该操作不会让你脱离它。如果你添加整数，你得到的仍然是一个整数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-10T02:12:27.573

大流士是正确的；“闭包属性”与“函数闭包”无关。只有这么多话要说:-(

闭包属性的思想被应用在整个计算机科学中，但它也被广泛应用于不同类别的语言。不同类别的语言很重要，因为您需要不同的技术来扫描或识别话语。例如，正则表达式可以告诉您是否有保留字，但不能告诉您是否有带平衡括号的表达式——因为您需要上下文无关的语法。

人们普遍感兴趣的是，如果你学习一种特定的语言并且你与另一种语言相交或联合，或者只是补充这种语言，你是否会在同一个班级中获得另一种语言。例如，是否可以编写一个正则表达式来完全匹配那些*不是*保留字的标记？我们可以回答一个响亮的“是”，因为正则语言在补语下是封闭的，也就是说，正则语言的补语本身就是正则语言。这是一个闭包属性的例子。通常证明是建设性的，也就是说，它不仅告诉你*存在*一个描述所有非保留字标记的正则表达式，闭包属性的证明会告诉你如何*找到*这样的正则表达式。

# php - PHP: Holding two matching items in an array of data from MySQL

> ID：430326
> 
> 赞同：0
> 
> 时间：2009-01-10T01:20:02.047
> 
> 标签：php, mysql, arrays

```
$story_query = "SELECT table_name, id FROM planning WHERE parent = '$novelnum'";
$story_result = db_query($story_query);
while($story_row = db_fetch_array($story_result)) {
    $taleTable_Name = $story_row['table_name'];
    $postid[] = $story_row['id'];

    $q2 = "Select * from $taleTable_Name where approved='Y' order by id";
    $bset2 = db_query($q2);
    while($rset2 = db_fetch_array($bset2)) {
        $i[] = $rset2['id'];
        $t[] = $rset2['thread'];
        $s[] = $rset2['subject'];
        $a[] = $rset2['author'];
        $d[] = $rset2['datestamp'];

    }
}

if(isset($d)) {
    $fc = count($d);
    if($fc > 20) {
        $xs = $fc - 20;
    }
    else {
        $xs = 0;
    }

    for($c=$xs;$c<$fc;$c++) {
        if($s[$c] != "") {
            $newpost .= $d[$c];
            $newpost .= " <a href='../forums/read.php?f=";
            $newpost .= end($postid);
            $newpost .= "&i=";
            $newpost .= $i[$c];
            $newpost .= "&t=";
            $newpost .= $t[$c];
            $newpost .= "'>" ;
            $newpost .= $s[$c];
            $newpost .= "</a> by "; 
            $newpost .= $a[$c];
            $newpost .= $taleTable_Name;
            $newpost .= "<br>\n";
        }
    }
}
else {
    $newpost = "There are no posts for this scroll yet.";
} 
```

The above code correctly presents me with all the entries found with $taleTable_Name, but only presents the last variable of $postid when I print $newpost. I want the id ($postid to match the table_name ($taleTable_Name) so that the url created actually goes to the correct forum.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T03:55:27.507

首先，我不知道你的变量名是什么意思。我试图猜测，但你应该考虑重命名它们。保持您的维护程序员的理智。

查看您的代码，我知道它在做什么，但我不知道它应该做什么，或者为什么。下面是重命名变量名的尝试，但我不知道它是否正确或接近正确：

* * *

```
$story_query = "SELECT table_name, id FROM planning WHERE parent = '$novelnum'";
$story_result = db_query($story_query);
while($story_row = db_fetch_array($story_result)) {
    $taleTable_Name = $story_row['table_name'];
    $postid[] = $story_row['id'];

    $query2 = "Select * from $taleTable_Name where approved='Y' order by id";
    $bset2 = db_query($query2);
    while($rowset2 = db_fetch_array($bset2)) {
        $id[] = $rowset2['id'];
        $thread[] = $rowset2['thread'];
        $subject[] = $rowset2['subject'];
        $author[] = $rowset2['author'];
        $datetime[] = $rowset2['datestamp'];

    }
}

if(isset($datetime)) {
    $forumcount = count($datetime);
    if($forumcount > 20) {
        $xs = $forumcount - 20;
    }
    else {
        $xs = 0;
    }

    for($postnum=$xs;$postnum<$forumcount;$postnum++) {
        if($subject[$postnum] != "") {
            $newpost .= $datetime[$postnum];
            $newpost .= " <a href='../forums/read.php?f=";
            $newpost .= end($postid);
            $newpost .= "&id=";
            $newpost .= $id[$postnum];
            $newpost .= "&thread=";
            $newpost .= $thread[$postnum];
            $newpost .= "'>" ;
            $newpost .= $subject[$postnum];
            $newpost .= "</a> by "; 
            $newpost .= $author[$postnum];
            $newpost .= $taleTable_Name;
            $newpost .= "<br>\n";
        }
    }
}
else {
    $newpost = "There are no posts for this scroll yet.";
} 
```

* * *

以下变量是什么意思？: `$xs`, `$c`, `&i`, `&t`, 和`$fc`? 这些应该是有意义的名称。我已经重命名了你的其他变量，但对于这些我只是猜到了。我可能会走得很远。有意义的变量名在帮助人们阅读没有注释的代码方面大有帮助。事实上，如果你有有意义的变量名，[我可能不需要评论](https://stackoverflow.com/questions/36432/commenting-code)——尽管“20”的[神奇数字](https://stackoverflow.com/questions/47882/what-is-a-magic-number-and-why-is-it-bad)是什么？这个数字有什么意义？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T04:52:17.970

关于您的代码，我注意到的一件事是 $newpost 没有打印出来。在 for 循环结束之前，需要用 $newpost 做一些事情。在这种情况下，您只是每次都丢弃结果（或者更准确地说，覆盖它）。您需要使用 $newpost 做一些事情（打印它，将其存储在另一个值中，将其发送回浏览器等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-20T11:46:35.200

怎么样 ？

```
unset($post); // ensure start afresh

$story_query = "SELECT table_name, id FROM planning WHERE parent = '$novelnum'";
$story_result = db_query($story_query);
while($story_row = db_fetch_array($story_result)) {
    $taleTable_Name = $story_row['table_name'];
    $postid         = $story_row['id'];

    $q2 = "Select * from $taleTable_Name where approved='Y' order by id";
    $bset2 = db_query($q2);
    while($rset2 = db_fetch_array($bset2)) {
        $post[$postid] = $rset2;
    }
}

if(isset($post)) {
    /***
     * Page control here    
     ****/

    foreach($post as $id => $msg) {
        if($row['subject'] != "") {
            $newpost .= $msg['datestamp'];
            $newpost .= " <a href='../forums/read.php?f=";
            $newpost .= $id;
            $newpost .= "&i=".$msg['id'];
            $newpost .= "&t=".$msg['thread'];
            $newpost .= "'>" ;
            $newpost .= $msg['subject'];
            $newpost .= "</a> by "; 
            $newpost .= $msg['author'];
            $newpost .= $taleTable_Name;
            $newpost .= "<br>\n";
        }
    }
}
else {
    $newpost = "There are no posts for this scroll yet.";
} 
```

# c# - 如何检查或查找 .NET 属性？

> ID：430330
> 
> 赞同：1
> 
> 时间：2009-01-10T01:24:26.110
> 
> 标签：c#, .net, attributes

我有一个任务状态的枚举。有些状态被认为是过时的，我已将它们标记为过时，如下所示：

```
public enum TaskStatus
{
    [Description("")]
    NotSet = 0,
    Pending = 1,
    Ready = 2,
    Open = 3,
    Completed = 4,
    Closed = 5,
    [Description("On Hold")][Obsolete]
    OnHold = 6,
    [Obsolete]
    Canceled = 7
} 
```

在我的用户界面中，我使用枚举值填充下拉列表，但我想忽略那些标记为过时的值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T01:32:02.180

您可以编写一个 LINQ 查询：

```
var availableTaks = typeof (TaskStatus).GetFields(BindingFlags.Static | BindingFlags.GetField | BindingFlags.Public)
    .Where(f => f.GetCustomAttributes(typeof (ObsoleteAttribute), false).Length == 0);
foreach(var task in availableTaks)
    Console.WriteLine(task); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T01:41:13.270

```
Type enumType = typeof(testEnum);
enumType.GetFields(BindingFlags.Static | BindingFlags.GetField | BindingFlags.Public)[i].GetCustomAttributes(true); 
```

然后您可以使用您选择的方法循环遍历数组并检查是否有任何自定义属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T01:27:52.657

您可以使用[DebuggerHiddenAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerhiddenattribute.aspx)，我知道有一个可以隐藏属性资源管理器，但似乎不记得名称。

# naming-conventions - 应用程序版本或里程碑命名方案

> ID：430338
> 
> 赞同：4
> 
> 时间：2009-01-10T01:28:09.987
> 
> 标签：naming-conventions, version, milestone

## **我正在寻找应用程序版本或里程碑命名的“方案”**。

我想找到一个适合我当前项目的命名方案，但我认为我们应该在这里收集更有趣的方案来分享有关该主题的知识和想法。

**您还应该提供可能名称的数量以及建议的方案或估计值。**

例如 ：

*   **[OGRE（面向对象的图形渲染引擎）](http://www.ogre3d.org/)**：[每个版本](http://www.ogre3d.org/wiki/index.php/Roadmap)都被命名为洛夫克拉夫特的“克苏鲁的呼唤”神话中的“伟大[的](http://en.wikipedia.org/wiki/Cthulhu)[旧](http://en.wikipedia.org/wiki/Great_Old_One)时代”之一- 67 个可能的名称。
*   **[Ubuntu（基于 Linux 的操作系统）](http://www.ubuntu.com/)**： [如此处所述](https://wiki.ubuntu.com/DevelopmentCodeNames)

> 一个版本的开发代号采用“形容词动物”的形式。例如：Warty Warthog (Ubuntu 4.10)、Hoary Hedgehog (Ubuntu 5.04)、Breezy Badger (Ubuntu 5.10)，是 Ubuntu 的前三个版本。通常，人们使用形容词来指代发布，例如“warty”或“breezy”。

这允许有限但非常大的可能名称计数。

*   一些硬件和软件版本被命名为**真实世界的大城市**——数百个可能的名称；
*   一些硬件和软件版本被命名为**（希腊-罗马-随便）神话中的神或国王/军阀/皇帝**——我的神话中可能的名字的十分之一；
*   等等

对于我自己的项目，我正在考虑使用一种命名方案来命名公共版本，例如流行的软件原则/哲学/规则/模式，如 DRY、KISS、YAGNI、Singleton、Factory、Visitor 等。但感觉可能是有点太多了……电脑极客。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T01:34:15.670

将编程术语作为项目名称的问题在于它们让大多数用户感到困惑。他们会做出很棒的内部代号。

我听说主要河流被用作项目名称——尼罗河、布里斯班等。

查看[http://en.wikipedia.org/wiki/List_of_rivers](http://en.wikipedia.org/wiki/List_of_rivers)

按字母顺序发布有助于用户记住哪个版本更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-10T02:38:45.587

我个人觉得用神话生物、毛茸茸的动物和地理标志来命名软件产品的发布版本都只是有点新时代和自命不凡。可能适用于 beta 版或内部工作代号，但在发布给最终用户时，无法替代正确的版本号。

只是我的 2c
Kev

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-10T01:32:26.780

我们曾经使用地狱及其神话中的所有不同名称。我们的生产服务器是我最喜欢的：Horus。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T01:33:13.770

如何使用[集体名词](http://www.ojohaven.com/collectives/)对（故意省略撇号）：

土豚军械库

铁匠砧

乌鸦谋杀

坦克叮当声

狙击小精灵

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-10T01:39:13.070

坦率地说，我没有得到 Ubuntu 的发布命名方案——太多的名字经常被扔给我们。Windows 可以不时地使用 XP 和 Vista（每 3-4 年？），但 Ubuntu 过于激进，每 6 个月就会出现大杂烩。

回答您的问题 - 好的旧 8.10 和 9.04 有什么问题？确实是亲吻

# html - 撇号替换输入字段中脚本标记中的引号

> ID：430339
> 
> 赞同：0
> 
> 时间：2009-01-10T01:29:28.050
> 
> 标签：html, django, scripting, quotes, apostrophe

我有这个输入形式：

```
<input type="text" value="<script src='/js/script.js' type='text/javascript'></script>"  name="embed"/> 
```

一般来说，引号必须是双引号，所以我在 value 属性中放了单引号。

但是，当我这样做时，结果是：

```
<script src=’/js/script.js’ type=’text/javascript’&gt;</script> 
```

请注意，这些是撇号，而不是单引号！在 HTML 方面有很大的不同。

我正在使用 Django，并且已经尝试过使用几个模板标签，但它没有帮助。

我也尝试过`&#39`，但是当它包含在属性值中时它不会被转换，所以这也无济于事。

这似乎是那些 HTML 101 的事情之一，但它真的很烦人。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T01:37:40.547

尝试：

```
<input type="text" value="&lt;script src=&quot;/js/script.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;" name="embed"/> 
```

# java - 为什么 Java 不支持无符号整数？

> ID：430346
> 
> 赞同：394
> 
> 时间：2009-01-10T01:35:33.890
> 
> 标签：java, language-design, unsigned, integer

为什么 Java 不包含对无符号整数的支持？

在我看来，这是一个奇怪的遗漏，因为它们允许人们编写不太可能在意外大输入时产生溢出的代码。

此外，使用无符号整数可以是一种自我证明的形式，因为它们表明无符号整数打算保存的值永远不会是负数。

最后，在某些情况下，无符号整数对于某些操作（例如除法）可能更有效。

包含这些有什么缺点？

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2009-01-10T01:43:35.853

这是来自对[Gosling 和其他人的采访](http://www.gotw.ca/publications/c_family_interview.htm)，关于简单性：

> Gosling：作为一名语言设计师，我现在并不认为自己是这样的，“简单”最终的真正含义是我能否期望 J. Random Developer 将规范牢记在心。该定义表明，例如，Java 不是——事实上，这些语言中的许多最终都会出现很多极端情况，即没有人真正理解的事情。向任何 C 开发人员询问有关无符号的问题，很快你就会发现几乎没有 C 开发人员真正了解无符号的情况，无符号算术是什么。这样的事情使 C 变得复杂。我认为 Java 的语言部分非常简单。您必须查找的库。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2009-01-10T04:29:03.693

在字里行间阅读，我认为逻辑是这样的：

*   一般来说，Java 设计者希望简化可用数据类型的全部内容
*   对于日常目的，他们认为最常见的需求是签名数据类型
*   为了实现某些算法，有时需要无符号算术，但是将实现此类算法的程序员也将具备“工作”的知识，以使用有符号数据类型进行无符号算术

大多数情况下，我会说这是一个合理的决定。可能，我会：

*   使字节无符号，或者至少为这种数据类型提供了可能具有不同名称的有符号/无符号替代方案（使其有符号有利于一致性，但是您何时需要有符号字节？）
*   取消了“short”（你最后一次使用 16 位有符号算术是什么时候？）

尽管如此，对不超过 32 位的无符号值的操作还算不错，而且大多数人不需要无符号的 64 位除法或比较。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2011-07-27T20:22:49.883

这是一个较老的问题，pat 确实简要提到了 char，我只是想我应该为其他将在路上看到这个的人扩展这个。让我们仔细看看 Java 原始类型：

`byte`- 8 位有符号整数

`short`- 16 位有符号整数

`int`- 32 位有符号整数

`long`- 64 位有符号整数

`char`- 16 位字符（无符号整数）

虽然`char`不支持`unsigned`算术，但本质上可以将其视为`unsigned`整数。您必须将算术运算显式转换回`char`，但它确实为您提供了一种指定`unsigned`数字的方法。

```
char a = 0;
char b = 6;
a += 1;
a = (char) (a * b);
a = (char) (a + b);
a = (char) (a - 16);
b = (char) (b % 3);
b = (char) (b / a);
//a = -1; // Generates complier error, must be cast to char
System.out.println(a); // Prints ? 
System.out.println((int) a); // Prints 65532
System.out.println((short) a); // Prints -4
short c = -4;
System.out.println((int) c); // Prints -4, notice the difference with char
a *= 2;
a -= 6;
a /= 3;
a %= 7;
a++;
a--; 
```

是的，没有对无符号整数的直接支持（显然，如果有直接支持，我不必将大部分操作转换回 char ）。但是，肯定存在无符号原始数据类型。我也希望看到一个无符号字节，但我想将内存成本加倍，而使用 char 是一个可行的选择。

* * *

## 编辑

JDK8 提供了新的 API [`Long`](http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html)，它们在将和值视为无符号值[`Integer`](http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html)时提供了帮助方法。`long``int`

*   `compareUnsigned`
*   `divideUnsigned`
*   `parseUnsignedInt`
*   `parseUnsignedLong`
*   `remainderUnsigned`
*   `toUnsignedLong`
*   `toUnsignedString`

此外，[Guava](https://github.com/google/guava/wiki)提供了许多帮助方法来为整数类型做类似的事情，这有助于缩小由于缺乏对`unsigned`整数的原生支持而留下的差距。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2009-10-12T07:20:10.270

Java 确实有无符号类型，或者至少有一种： char 是无符号短类型。所以无论高斯林抛出什么借口，这实际上只是他的无知，为什么没有其他无符号类型。

也短类型：短裤一直用于多媒体。原因是您可以在单个 32 位无符号长整数中拟合 2 个样本并矢量化许多操作。8 位数据和无符号字节也是如此。您可以将 4 或 8 个样本放入寄存器中以进行矢量化。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2009-01-10T02:05:31.143

一旦有符号和无符号整数在表达式中混合，事情就会开始变得混乱，您可能*会*丢失信息。将 Java 限制为已签名的整数只会真正解决问题。我很高兴我不必担心整个已签名/未签名的业务，尽管我有时确实会错过一个字节中的第 8 位。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2009-01-10T01:42:05.060

[http://skeletoncoder.blogspot.com/2006/09/java-tutorials-why-no-unsigned.html](http://skeletoncoder.blogspot.com/2006/09/java-tutorials-why-no-unsigned.html)

这家伙说，因为 C 标准定义了涉及无符号和有符号整数的操作被视为无符号。这可能会导致负符号整数滚动到一个大的无符号整数，从而可能导致错误。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2009-01-10T08:39:20.100

我认为 Java 本身就很好，添加 unsigned 会使它复杂化而没有太多收获。即使使用简化的整数模型，大多数 Java 程序员也不知道基本数字类型的行为 - 只需阅读《[Java Puzzlers](http://www.javapuzzlers.com/contents.html) 》一书，看看你可能持有哪些误解。

至于实用建议：

*   如果您的值有些随意大小并且不适合`int`，请使用`long`. 如果它们不适合`long`使用`BigInteger`。

*   当您需要节省空间时，仅对数组使用较小的类型。

*   如果您恰好需要 64/32/16/8 位，请使用`long`/ `int`/ `short`/`byte`并停止担心符号位，除了除法、比较、右移和强制转换。

另请参阅[有关](https://stackoverflow.com/questions/397867/port-of-random-generator-from-c-to-java#397997)“将随机数生成器从 C 移植到 Java”的答案。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-01-30T09:18:46.580

我知道这篇文章太旧了；但是为了您的兴趣，在 Java 8 及更高版本中，您可以使用`int`数据类型来表示无符号的 32 位整数，其最小值为 0，最大值为 2 ^(32) -1。使用`Integer`该类将`int`数据类型用作无符号整数，并且已将 等静态方法`compareUnsigned()`添加`divideUnsigned()`到`Integer`该类中以支持无符号整数的算术运算。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-02-24T15:30:09.313

使用[JDK8](https://blogs.oracle.com/darcy/entry/unsigned_api)，它确实对它们有一些支持。

尽管 Gosling 担心，但我们可能会看到 Java 完全支持无符号类型。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2009-01-10T01:45:42.433

我听说它们将被包含在原始 Java 版本附近。Oak 是 Java 的前身，在一些规范文档中提到了 usigned 值。不幸的是，这些从未进入 Java 语言。据任何人都能够弄清楚他们只是没有得到实施，可能是由于时间限制。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-11-01T19:13:40.967

我曾经和 C++ 标准委员会的某个人一起上过 C++ 课程，他暗示 Java 做出了正确的决定来避免使用无符号整数，因为 (1) 大多数使用无符号整数的程序在使用有符号整数时也能做得很好，这在就人们的思维方式而言，以及 (2) 使用无符号整数会导致许多易于创建但难以调试的问题，例如整数算术溢出和在有符号和无符号类型之间转换时丢失重要位。如果你错误地使用有符号整数从 0 中减去 1，它通常会更快地导致你的程序崩溃，并且比如果它环绕到 2^32 - 1 更容易找到错误，并且编译器和静态分析工具和运行时检查必须假设您知道自己在做什么，因为您选择使用无符号算术。还，

很久以前，当内存有限且处理器不能一次自动在 64 位上运行时，每一位都更重要，因此有符号字节与无符号字节或短路实际上更重要，显然是正确的设计决策。今天，在几乎所有常规编程案例中，仅使用带符号的 int 就绰绰有余了，如果您的程序确实需要使用大于 2^31 - 1 的值，那么您通常只需要 long 。一旦你进入使用长整数的领域，就更难想出一个你真的不能用 2^63 - 1 个正整数的原因。每当我们使用 128 位处理器时，问题就更小了。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-08-06T20:44:51.117

您的问题是“为什么 Java 不支持无符号整数”？

我对你的问题的回答是 Java 希望它的所有原始类型：**byte**、**char**、**short**、**int**和**long**应该分别被视为**byte**、**word**、**dword**和**qword**，就像在汇编中一样，并且 Java 运算符是有**符号的对除****char**之外的所有原始类型的操作，但仅在**char**上，它们仅是无符号的 16 位。

**所以静态方法也**假设是32 位和 64 位的**无符号**操作。

 **您需要最终类，可以为**无符号**操作调用其静态方法。

您可以创建这个最终类，将其命名为您想要的任何名称并实现它的静态方法。

如果您不知道如何实现静态方法，那么此[链接](http://www.javamex.com/java_equivalents/unsigned.shtml)可能会对您有所帮助。

**在**我看来，如果Java**既不**支持无符号类型**也不支持运算符重载，Java 与 C++ 一点****也不**相似，所以我认为 Java 应该被视为与 C++ 和 C 完全不同的语言。

 ******顺便说一句，语言的名称也完全不同。

所以我不建议在 Java 中键入类似于 C 的代码，我根本不建议键入类似于 C++ 的代码，因为在 Java 中你将无法在 C++ 中做你接下来想做的事情，即代码将不会继续像 C++ 一样，对我来说，这样的代码是不好的，改变中间的样式。

我建议也为签名操作编写和使用静态方法，因此您不会在代码中看到用于签名和未签名操作的运算符和静态方法的混合，除非您只需要代码中的签名操作，并且可以仅使用运算符。

此外，我建议避免使用**short**、**int**和**long**原始类型，并分别使用**word**、**dword**和**qword**，并且您将调用静态方法来进行无符号操作和/或有符号操作，而不是使用运算符。

如果您打算只进行有符号操作并且只在代码中使用运算符，那么可以使用这些原始类型**short**、**int**和**long**。

实际上**word**，**dword**和**qword**在语言中不**存在**，但是您可以为每个创建新类，并且每个的实现应该很容易：

类**word**仅包含原始类型**short**，类**dword**仅包含原始类型**int**，类**qword**仅包含原始类型**long**。现在所有的无符号和有符号方法都是静态的或者不是你的选择，你可以在每个类中实现，即所有的 16 位操作都是无符号的和有符号的，通过在**单词**类上给出含义名称，所有的 32 位操作都是无符号和通过在**dword**类上给出含义名称进行签名，所有 64 位操作都通过在**qword**类上给出含义名称来进行无符号和有符号操作。

如果您不喜欢为每个方法提供太多不同的名称，您总是可以在 Java 中使用重载，很高兴看到 Java 也**没有**删除它！

如果您想要方法而不是用于 8 位有符号操作的操作符和用于完全没有操作符的 8 位无符号操作的方法，那么您可以创建**Byte**类（请注意，第一个字母“B”是大写的，所以这不是原始类型**byte**）并实现此类中的方法。

关于值传递和引用传递：

如果我没记错的话，就像在 C# 中一样，原始对象自然是按值传递的，但类对象自然是按引用传递的，这意味着**Byte**、**word**、**dword**和**qword**类型的对象将按引用而不是按值传递默认情况下。我希望 Java 有C#的**struct对象，所以所有****Byte**、**word**、**dword**和**qword**都可以实现为**struct**而不是**class**, 所以默认情况下它们是按值传递而不是默认通过引用传递的，就像 C# 中的任何结构对象一样，像原始类型一样，默认情况下是按值传递而不是按引用传递，但是因为 Java 比 C# 差，我们有为了解决这个问题，只有类和接口，默认情况下通过引用而不是值传递。因此，如果您想通过值而不是通过引用传递**Byte**、**word**、**dword**和**qword**对象，就像 Java 和 C# 中的任何其他类对象一样，您将不得不简单地使用复制构造函数，仅此而已。

这是我能想到的唯一解决方案。我只是希望我可以将原始类型定义为 word、dword 和 qword，但 Java 既不支持 typedef 也不支持 using，这与支持**using**的 C# 不同，这相当于 C 的 typedef。

关于输出：

对于相同**的位序列**，您可以通过多种方式打印它们：二进制、十进制（如 C printf 中 %u 的含义）、八进制（如 C printf 中 %o 的含义）、十六进制（如C printf 中 %x 的含义）和整数（类似于 C printf 中 %d 的含义）。

请注意，C printf 不知道作为参数传递给函数的变量的类型，因此 printf 仅从传递给函数的第一个参数的 char* 对象中知道每个变量的类型。

所以在每个类：**Byte**、**word**、**dword**和**qword**中，您可以实现 print 方法并获得 printf 的功能，即使该类的原始类型是有符号的，您仍然可以通过遵循一些涉及的算法将其打印为无符号逻辑和移位操作以获取要打印到输出的数字。

不幸的是，我给您的链接没有显示如何实现这些打印方法，但我相信您可以通过谷歌搜索实现这些打印方法所需的算法。

这就是我能回答你的问题并建议你的全部内容。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-02-02T22:36:56.023

因为`unsigned`类型是纯粹的邪恶。

`unsigned - int`在 C 中产生的事实`unsigned`更加邪恶。

这是不止一次让我着迷的问题的快照：

```
// We have odd positive number of rays, 
// consecutive ones at angle delta from each other.
assert( rays.size() > 0 && rays.size() % 2 == 1 );

// Get a set of ray at delta angle between them.
for( size_t n = 0; n < rays.size(); ++n )
{
    // Compute the angle between nth ray and the middle one.
    // The index of the middle one is (rays.size() - 1) / 2,
    // the rays are evenly spaced at angle delta, therefore
    // the magnitude of the angle between nth ray and the 
    // middle one is: 
    double angle = delta * fabs( n - (rays.size() - 1) / 2 ); 

    // Do something else ...
} 
```

你注意到这个错误了吗？我承认我只是在使用调试器后才看到它。

因为`n`是无符号类型`size_t`，所以整个表达式的`n - (rays.size() - 1) / 2`计算结果为`unsigned`。该表达式旨在成为中间光线的有*符号*位置`n`：左侧中间光线的第一条光线的位置为-1，右侧的第一条光线的位置为+1，依此类推。取 abs 值并乘以`delta`角度，我会得到`n`光线和中间光线之间的角度。

对我来说不幸的是，上面的表达式包含邪恶的无符号，而不是评估为 -1，而是评估为 2^32-1。随后的转换以`double`密封该错误。

在由于误用算术引起的一两个错误之后，`unsigned`人们不得不开始怀疑获得的额外位是否值得额外的麻烦。我正在尽可能地避免`unsigned`在算术中使用任何类型，尽管仍然将它用于非算术运算，例如二进制掩码。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-06-27T15:03:37.720

Java 出于实用的原因放弃了“C”规范中的一些宝石，但随着开发人员的需求（闭包等），这些宝石正在慢慢回升。

我提到第一个是因为它与这个讨论有关；指针值对无符号整数算术的遵守。并且，关于这个线程主题，在 Java 的签名世界中维护无符号语义的困难。

我猜如果有人要让 Dennis Ritchie 改变自我来建议 Gosling 的设计团队，它会建议给 Signed 一个“无穷处为零”，这样所有地址偏移请求都会首先添加它们的 ALGEBRAIC RING SIZE 以避免负值。

这样，在数组中抛出的任何偏移量都不会生成 SEGFAULT。例如，在一个封装类中，我称之为需要无符号行为的双精度环数组 - 在“自旋转循环”上下文中：

```
// ...
// Housekeeping state variable
long entrycount;     // A sequence number
int cycle;           // Number of loops cycled
int size;            // Active size of the array because size<modulus during cycle 0
int modulus;         // Maximal size of the array

// Ring state variables
private int head;   // The 'head' of the Ring
private int tail;   // The ring iterator 'cursor'
// tail may get the current cursor position
// and head gets the old tail value
// there are other semantic variations possible

// The Array state variable
double [] darray;    // The array of doubles

// somewhere in constructor
public RingArray(int modulus) {
    super();
    this.modulus = modulus;
    tail =  head =  cycle = 0;
    darray = new double[modulus];
// ...
}
// ...
double getElementAt(int offset){
    return darray[(tail+modulus+offset%modulus)%modulus];
}
//  remember, the above is treating steady-state where size==modulus
// ... 
```

上面的 RingArray 永远不会从负索引中“获取”，即使恶意请求者试图这样做。请记住，还有许多合法请求要求提供先前（负）索引值。

注意：外部 %modulus 取消引用合法请求，而内部 %modulus 从比 -modulus 更负面的负面中掩盖了公然的恶意。如果这曾经出现在 Java +..+9 || 8+..+ 规范，那么问题将真正成为“无法“自转”故障的程序员”。

我确信所谓的Java unsigned int '缺陷'可以用上面的单线来弥补。

PS：只是为了给上面的 RingArray 管家提供上下文，这里有一个候选的 'set' 操作来匹配上面的 'get' 元素操作：

```
void addElement(long entrycount,double value){ // to be called only by the keeper of entrycount
    this.entrycount= entrycount;
    cycle = (int)entrycount/modulus;
    if(cycle==0){                       // start-up is when the ring is being populated the first time around
        size = (int)entrycount;         // during start-up, size is less than modulus so use modulo size arithmetic
        tail = (int)entrycount%size;    //  during start-up
    }
    else {
        size = modulus;
        head = tail;
        tail = (int)entrycount%modulus; //  after start-up
    }
    darray[head] = value;               //  always overwrite old tail
} 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2009-01-11T23:56:55.957

我能想到一个不幸的副作用。在 Java 嵌入式数据库中，32 位 id 字段可以拥有的 id 数量是 2^31，而不是 2^32（约 20 亿，而不是约 40 亿）。

* * *

## 回答 #16

> 赞同：-8
> 
> 时间：2012-03-10T21:37:56.123

恕我直言的原因是因为他们/太懒惰而无法实施/纠正该错误。建议 C/C++ 程序员不懂无符号、结构、联合、位标志……简直是荒谬。

以太您正在与即将开始编写 la C 语言的基本/bash/java 程序员交谈，没有任何真正的语言知识，或者您只是在胡说八道。;)

当您每天处理来自文件或硬件的格式时，您开始质疑，他们到底在想什么。

一个很好的例子是尝试使用无符号字节作为自旋转循环。对于那些不明白最后一句话的人，你到底如何称自己为程序员。

直流

# apache-flex - 我需要担心 Flex/AIR 代码中的并发问题吗？

> ID：430347
> 
> 赞同：4
> 
> 时间：2009-01-10T01:36:09.097
> 
> 标签：apache-flex, actionscript, air

我有一种情况，我正在启动许多对象，当它们准备好处理一些输入数据时，调用一个处理程序。

该处理程序从待处理请求的 ArrayCollection 中获取数据集，将其分配给对象，然后从 ArrayCollection 中删除数据集。

（我无法从 ArrayCollection 中弹出，因为我需要搜索它以找到合适的数据集 - 它并不总是最重要的。）

是否有可能两个对象可以通过以下方式调用我的处理程序：（1）第一个被分配一个数据集，（2）第二个被分配相同的数据集，然后服务于第一个的处理程序实例删除它，我猜(3) 试图从 ArrayCollection 中删除数据集时处理程序的第二个实例出错。

我对 Flash Player 运行时不够熟悉，不知道这种故障情况是否可能发生，或者我是否应该花额外的时间来设置某种锁定以防止它发生。

* * *

编辑：到目前为止，答案对 Flex 给出了热烈的评价，但我不确定他们是否回答了这个问题。需要明确的是，我并不是要决定是否使用 Flex。

如果我有一个方法：

1.  从 ArrayCollection 中的某处获取一条数据
2.  用这些数据做点什么
3.  从 ArrayCollection 中删除该数据

是否有可能在第一次调用 #1 之后但在 #3 之前，同一方法的另一个调用可以执行 #1？

le dorfier，您说 Flex/AS “正常工作” - 你能澄清一下它在这种情况下“正常工作”吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-10T01:55:10.417

您不需要进行锁定，但您可能想要跟踪对您的状态的修改顺序。正在运行的不同异步调用可能会以与发出异步调用时不同的顺序返回和修改模型状态。

Flex 和 AIR 应用程序具有单线程编程模型。然而，他们的架构依赖于异步 I/O 来与服务器层进行交互。

现在在 Java Swing 应用程序或 .NET Winforms 应用程序中，可能会在后台线程上进行 i/o 交互，并将参数/结果编组到主 GUI 线程或从主 GUI 线程编组。（那些图形 UI 库不允许其他线程更改图形工具包对象/小部件的状态，因此数据交互必须与其他后台处理线程进行编组。）

相比之下，Flex 和 AIR 的 i/o 类库是在这些类异步实现 i/o 操作的地方编写的。例如，要执行 HTTP GET，可以调用 HttpSerivce send() 方法，这不是阻塞调用。相反，只要调用最终完成并返回，就可以提供一个 ActionScript3 闭包来处理结果。

同时，Flex/AIR 应用程序可以允许 GUI 继续与用户完全交互。它甚至可以显示进度指示器和/或取消按钮。

因此事实证明，尽管 Flex/AIR 单线程 GUI 模型比多线程 Java Swing 或 .NET Winform 应用程序更简单、更易于编程，但它能够实现与那些富客户端应用程序。

一个简单的事件驱动的单线程 GUI、异步 i/o（通过服务调用和/或消息传递），再加上用于处理结果或故障的 ActionScript3 闭包，是 Flex/AIR 统治世界的秘诀。（当然，我应该提到对属性、事件和良好的声明式（或命令式）数据绑定的良好支持，作为这个世界征服战略的一部分。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T17:48:53.597

正如您所描述的那样，您的问题的答案是否定的。虽然了解事件注册、事件分派、优先级、异步性等都是有价值的，但事实仍然是您正在主线程上的单个函数范围内修改 ArrayCollection，随后将该函数的第二次调用，也在主线程上——所以你在并发方面没有什么可担心的：虽然你可能不知道哪个对象首先到达那里（出于很多原因），但你可以肯定第二个会得到第一个所做的工作的产品。

所以不，你可以走了。摇滚吧！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T02:00:31.437

在将自己埋在 Flex 和 Actionscript 中几个月之后，我又回到了 .NET。我对我必须选择的所有各种模式感到有点不知所措——或者，我必须从中选择和编排。

相比之下，Flex/AIR 有一组简单但完整的 SDK 调用，用于数据和文件操作，每个调用都有同步和异步变体。它更容易理解和一致使用。

根据我的经验，罗杰是对的。Flex/AS# 可以正常工作。.NET，逐渐减少（来自选项重载，恕我直言）。结果之一是 .NET 更好地适应边缘场景。但如果 Flex/AS3 可以满足您的要求，它可能会很容易做到。想想 80/20 规则（或者可能更好。）

我认为 Roger 已经解决了您的问题，但让我按照我听到的方式说出来。

您的方法是通用 UI 线程上的单线程（以及其他 UI 活动）。但是资源（文件、dbms 端口等）通常会经历一个简单的序列，您通常会像这样设置：

1.  实例化所需资源类的对象，
2.  为对象上的返回事件注册一个事件处理程序（比如“fileonOpen”），
3.  调用对象的异步执行方法（比如“file.open”）。
4.  UI 事件循环继续，
5.  资源最终完成其方法执行，并触发您注册的事件处理程序，该处理程序现在在 UI 线程上运行，也许您的问题的答案是事件处理程序被赋予了一个参数，该参数是它所属的对象，所以你可以将其从您的收藏中删除。大概您的对象已经足够自我识别，以防止在处理它所属的集合时出现混淆。如果它是一个数据库结果行，它大概会知道它自己的 PK 值。File 对象具有 nativePath、isDirectory、parent（另一个 File 对象）等属性。

# javascript - 当 iframe 的来源是 javascript 时浏览器会做什么

> ID：430349
> 
> 赞同：8
> 
> 时间：2009-01-10T01:37:34.960
> 
> 标签：javascript, iframe

当 iframe 的来源是：

```
javascript:''; 
```

如：

```
<iframe id="SpControlFrame1" name="SpControlFrame1" src="javascript:'';" path_src="index.php?cmd=YYY" ></iframe> 
```

到底是怎么回事？src="javascript:'';" 是什么意思 告诉浏览器做什么？

“path_src”是做什么的？

谢谢克里斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-10T01:44:32.247

它告诉浏览器显示执行空字符串文字的结果。因此，它只会显示一个空字符串。

`javascript:'http://stackoverflow.com';`您可以通过在普通窗口/选项卡的地址栏中输入来测试其效果。您将获得一个显示“ [http://stackoverflow.com](http://stackoverflow.com) ”的白页，您实际上不会被带到该 URL。

这就是为什么小书签经常将代码包装在里面`void()`或一个不返回任何内容的匿名函数来阻止浏览器尝试显示小书签的执行结果。例如：

```
javascript:void(window.open("dom_spy.html")) 
```

或者：

```
javascript:(function () { window.open("dom_spy.html"); })() 
```

如果您直接使用返回某些内容的代码（在这种情况下为新窗口实例），浏览器将最终显示：

```
javascript:window.open("dom_spy.html"); 
```

在 Firefox 中，上面将显示：

```
[对象窗口]
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T01:45:08.020

据我所知，`src`属性映射到`iframe`元素`location.href`。所以设置`src`为`javascript:'';`有点荒谬，浏览器会做两件事之一：

*   忽略它，因为它不是 URI 并且不解析为任何可显示的资源
*   执行什么也没产生的javascript

无论哪种方式，你完成的很少。这段代码是你继承的还是你想用 ? 做一些棘手的事情`iframe`？

# php - 基本的 php 表单帮助 - 引用标题

> ID：430358
> 
> 赞同：1
> 
> 时间：2009-01-10T01:43:48.257
> 
> 标签：php, http-referer

我现在已经设置好了，当人们在填写表格后进入“谢谢”页面时，他们会进入一个页面，上面写着：

```
 thanks for coming <a href="<?php echo $_SERVER['HTTP_REFERER'] ?>here's a link back to where you came from</a> 
```

我想要的是它说：

```
 thanks for coming <a href="<?php echo $_SERVER['HTTP_REFERER'] ?>here's a link back to <?php echo TITLE OF REFERRING PAGE ?></a> 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T01:54:49.917

在表单中放置一个隐藏类型输入，以页面标题为值。然后使用提交的隐藏值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T01:55:13.710

最简单的方法是将页面标题作为会话变量传递：

```
<?php

  $_Session["referrerTitle"] = $pageTitle;

 ?> 
```

如果您正在使用头文件包含，您可能已经在引用页面中设置了此变量。

然后在您的链接中：

```
<p>   thanks for coming <a href="<?= $_SERVER['HTTP_REFERER']"?>here's a link back to <?= $_Session["referrerTitle"] ?></a></p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T01:52:40.860

如果引用页面在您的控制之下，您可以在您网站的每个页面上设置一个与标题相同的 cookie。

然后在感谢页面上，您可以读取 HTTP 请求提供的 cookie，并将其插入 HTML。

同样，您可以跟踪会话信息，因此 cookie 实际上并不包含标题，而是为每个访问者保存一个唯一的 ID。然后，您的数据库可以保存每个 id 的最后一页的标题。对于您的要求，这有点矫枉过正，但是如果您无论如何都需要跟踪会话数据，它可能会更干净。

两种解决方案都依赖于用户的浏览器支持 cookie。

# api - Where to get started with APIs

> ID：430374
> 
> 赞同：8
> 
> 时间：2009-01-10T01:56:29.510
> 
> 标签：api

I have never worked with APIs before (and have very little programming experience outside of HTML and CSS) and I am struggling to find any clear tutorials or explanations.

Do APIs all work in the same way? Can you use any programming language or only a specific language or does that depend on the API? Is there a common way to work with some of the major APIs? Do you know of any really basic API tutorials or do you really need to be au fait with particular coding languages before you start down that road?

There is no specific API that I "need" to work on but I would be interested to have a play with services such as Twitter, Flickr, Google Maps, Facebook, Last.fm, etc. if it's accessible.

Any advice would be much appreciated thanks,

Luke

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T02:01:06.350

An API is an Application Programming Interface. This is really a generic term for a lot of different sort of things. I'm assuming you mean "Web APIs" which are usually RESTful or SOAP based. The sort of API that is used really differs from one service to another. Some have multiple ways of working with the API, like Amazon has REST based and SOAP based services.

The best way to get started if you are doing this from the client side, is to really start learning Javascript and then learn JQuery. Then from there choose a service you'd like to program to. You could learn a lot of Javascript by coding for the Google Maps API. This is probably the best place to start as it is a pretty neat system, not too difficult, requires you to have a good level of knowledge of Javascript (which you can learn along the way).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T02:03:46.140

I would suggest you learn a programming language before you get too involved in APIs. Once you understand how those work, APIs will make a lot more sense

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T02:10:41.557

Woah I've heard this before. You dont want to rush into learning APIs, you need to get aquainted with a nice little programming language first. Once you have a little bit of programming skill the mystery of API will be revealed. Maybe give Ruby or Python a look as I've seen many people get started using those.

[http://wiki.python.org/moin/BeginnersGuide](http://wiki.python.org/moin/BeginnersGuide)

Oh and if you have a Mac or Linux based machine the best part is you probably already have Python installed!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T02:58:52.830

Jaroslav Tulach在他的优秀著作《[Practical API Design: Confessions of a Java Framework Architect](https://rads.stackoverflow.com/amzn/click/com/1430209739)》中提出了一个令人信服的论点，即系统的 API 确实由你所知道的所有东西（函数签名、公开对象、配置文件格式等）组成。必须知道才能使用一个软件。

对于您的具体问题，没有关于如何设计 API 的通用标准；编程语言、语言社区、组织等之间的风格和实践差异很大。

要开始使用，请在您最喜欢的语言中找到一些库，并寻找展示如何运用其所有功能的代码示例。然后尝试使用这些样本来改变它们的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-10T02:27:27.840

API's aren't all that sophisticated. The word takes on mystical proportions.

Let's take a look at a specific API. For example, Twitter. Google Twitter API. First of the results is [http://apiwiki.twitter.com/](http://apiwiki.twitter.com/)

You can find some Twitter API implementations in Python: [http://apiwiki.twitter.com/Libraries#Python](http://apiwiki.twitter.com/Libraries#Python)

Get Python. Get the API implementation. Start hacking.

# windows - 批处理文件，vista x64，if 和括号

> ID：430376
> 
> 赞同：7
> 
> 时间：2009-01-10T01:58:22.080
> 
> 标签：windows, windows-vista, batch-file, 64-bit

Windows 上的一些批处理文件使用多行的 IF 语法，如下所示：

```
if var==rule (
  some comands
) else (
  else commands
) 
```

现在，Windows Vista x64 决定将所有 32 位文件放在“C:\Program Files (x86)”下。不幸的是，每当您在不带引号的多行 IF 中使用环境变量（例如 PATH）时，变量值内的括号会混淆 IF，从而中止批处理文件。例如：

```
if "%OS%"=="Windows_NT" (
  @setlocal
  call :set_home
  set _ARGS=%*
) else (
  set _SCALA_HOME=%SCALA_HOME%
  rem The following line tests SCALA_HOME instead of _SCALA_HOME, because
  rem the above change to _SCALA_HOME is not visible within this block.
  if "%SCALA_HOME%"=="" goto error1
  call :set_args
) 
```

*即使 %SCALA_HOME% 出现的行没有被执行，*带有这个的批处理文件也会失败。这很烦人。有解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-10T04:54:16.530

`%SCALA_HOME%`更改to的所有实例`!SCALA_HOME!`，并在文件顶部附近添加以下内容：

```
setlocal enableextensions enabledelayedexpansion 
```

后者开启了“延迟变量扩展”，这意味着写在表单`!VAR!`中的变量在被使用之前不会被扩展，而不是在语句本身被解析的时候。（根据我有限的经验，当然在这种情况下，这意味着变量扩展不太可能被误解为实际的批处理文件语法结构。）感谢 Patrick Cuff 在评论中指出了这种更好的方法。

PS：正如您所发现的，`cmd.exe`批处理文件语言在许多方面都被*严重破坏了。*如果您不能使用真正的脚本语言（例如，如果您的任务需要在其他计算机上执行），我强烈建议您敲出一个可以完成这项工作的快速 C/C++“脚本”，并将其编译为 .EXE。

# python - 用 PIL 在照片上画圆角

> ID：430379
> 
> 赞同：0
> 
> 时间：2009-01-10T02:00:31.077
> 
> 标签：python, python-imaging-library, rounded-corners

除了用户上传照片的缩略图外，我的网站在每个框和图片上都充满了圆角。

如何使用 Python Imaging Library 在每个缩略图上“绘制”白色或透明圆角？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-10T02:17:46.283

从弗雷德里克隆德：

创建一个带圆角的蒙版图像（使用您最喜欢的图像编辑器或使用 ImageDraw/aggdraw 或类似的）。

在您的程序中，加载蒙版图像，并使用“裁剪”剪切掉四个角。

然后，对于每个图像，像往常一样创建一个缩略图，并在缩略图的角落使用角落蒙版。

*   如果您想要透明角，请创建一个与缩略图大小相同的“L”图像，使用“粘贴”在该图像中添加角蒙版，然后使用“putalpha”将 alpha 图层附加到缩略图。

*   如果您想要实心角，请在缩略图上使用“粘贴”，使用纯​​色作为来源。

[http://mail.python.org/pipermail/python-list/2008-January/472508.html](http://mail.python.org/pipermail/python-list/2008-January/472508.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T02:21:03.517

使用 HTML 和 CSS 在这些图片上放置一些圆形边框可能不是一个更好的主意（假设 HTML 是输出）？那样的话，如果你想改变你的网站的外观，你不需要做任何图像重新处理，你也不需要首先做任何图像处理。

# c# - C# 可能不是安全应用程序的最佳选择？

> ID：430386
> 
> 赞同：2
> 
> 时间：2009-01-10T02:03:33.583
> 
> 标签：c#, c++, security, winapi, api

我在网上偶然发现了这句话：

> 对于这样的系统级应用程序，C# 可能不是最佳选择。我相信纯 C++ 在这里要好得多，因为您需要进行大量低级 API 调用。

我正在搜索使用 C# 制作的安全程序，例如防火墙、家长控制、防病毒、反间谍软件等。

那么，C# 可能不是安全应用程序的最佳选择，这是真的吗？

[编辑]
我正在研究 c# 安全程序，我发现了 2 个程序：
1) **Keepass** ( [http://keepass.info/compare.html](http://keepass.info/compare.html) ) 一个令人印象深刻的密码管理器，它正在从 c++ 迁移到 c# ！！！
2) **Home Again** ( [http://www.codeplex.com/totty530](http://www.codeplex.com/totty530) ) 是使用 c#
[/edit]制作的数据包嗅探器

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-10T02:09:37.643

防火墙之类的东西通常需要挂钩到内核级设施，这些设施不会（微不足道）被 .NET 等托管运行时公开。你可以跳过箍来使用 C# 语言来做这种事情，但是，那么，你会跳过箍。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-10T02:16:22.263

好吧，如果你在安全部门工作，你可能想要一把枪。C++ 是比 C# 更好的枪，但要注意 - 用 C++ 更容易击中自己的脚。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-10T02:11:48.650

如果您正在编写示例中的防火墙或防病毒软件，那么用 C++ 编写它会更容易，因为它可以访问 C# 不适合的东西。在编写应用程序方面，C# 比 C++ 更安全，因为它更难搞砸。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-10T02:11:54.050

C# 暗示您正在使用 .Net 框架。这会在您的应用程序中添加很多您几乎无法控制的代码。如果该版本的 .Net 存在安全风险，它现在就在您的应用程序中。

对于您在 C++ 中使用的任何其他框架可能也是如此，但也可以在没有任何其他框架的情况下编写 C++ 代码。

不过，这两种方式都不能防止您添加不安全的代码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-12T10:55:27.953

同意。您想要调用的许多函数都是必须从 C# 中 P/Invoke 的函数。从操作系统到 C# 程序的回调也不是很漂亮，比如 System.Runtime.InteropServices.CallingConvention。

现在，对于上述密码管理器之类的东西，这可能并不重要。这实际上只是一个精美的数据库，具有智能导入/导出/存储/转换功能。不过，如果它们可以与其他程序交互，那将是有用的。您根本无法在随机进程中注入 C# DLL。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-10T02:15:06.507

也许你应该看看**C++/CLI**。它将提供 .NET 的便利，同时提供 C++ 可能需要的低级访问。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-26T06:36:59.417

.Net 应用程序，开箱即用，完全可逆为可读代码。（试试看：[http](http://www.reflector.net/) ://www.reflector.net/ ）只有代码中的注释会丢失！;) 如果人们是否可以轻松地查看您的应用程序的引擎盖是否很重要。使用 C/C++ 会更安全，因为逆向工程有点困难。但是用于您的 C/C++ 应用程序的 .Net 混淆器或打包程序会使您的应用程序的逆向工程变得更加困难。因此，它永远是不可能的。但要小心。一些 .Net 混淆器不能很好地处理您的代码中的 SOAP WSDL 服务，并且仅通过混淆您的代码而导致错误！

# winapi - 使用 VB6 和 RAS API 进行 VPN 连接的可行性

> ID：430388
> 
> 赞同：0
> 
> 时间：2009-01-10T02:05:25.483
> 
> 标签：winapi, vb6, connectivity

我们有一个用 VB6 编写的调制解调器终端应用程序。它非常适合我们需要它做的事情，但是在拨打特定提供商时需要启动 VPN 连接。我查看了一些相关的帖子，看起来这可能使用 RAS API 是可能的。任何人都可以建议在 MSDN 之外使用此 API 的资源/建议吗？

困难 - .NET 不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T02:52:43.873

.Net 完全不是一种选择，还是不能将您拥有的所有东西切换到 .Net 中？您可以创建一个 .Net 类库并启用 COM+，然后在现有的 VB6 应用程序中使用该库。

如果这也不是一种选择，我们深表歉意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-12T19:03:01.433

在更糟糕的情况下，您只能找到 .NET 示例，我会使用 .NET Reflector 来查看 .NET 框架正在调用哪些 API 以及它正在传递哪些参数。我在 VB6 中尝试使用 GDI+ 时这样做了。一种算法在 .NET 中运行良好，但当我在 VB6 中使用直接 API 时却失败了。使用反射器，我发现我搞砸了参数，然后它开始工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-12T19:12:38.683

这可能不像您需要的那么强大，但我过去曾在需要设置 VPN 连接的简单情况下调用系统 rasdial 命令。

```
USAGE:
        rasdial entryname [username [password|*]] [/DOMAIN:domain]
                [/PHONE:phonenumber] [/CALLBACK:callbacknumber]
                [/PHONEBOOK:phonebookfile] [/PREFIXSUFFIX]

        rasdial [entryname] /DISCONNECT

        rasdial 
```

不是工业实力，但很适合在脚本等中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-12-08T15:27:56.153

如果您可以处理互操作并了解将 C# 转换为 VB6，那么我的开源项目中几乎所有的 RAS API 都已完成。您可以将所需的零碎部分取出并放入您的项目中。只需查看项目上的源代码选项卡，它就在下面。

[http://dotras.codeplex.com](http://dotras.codeplex.com)

您感兴趣的组件是 RasDialer，请注意该组件在引擎盖下非常复杂。

# c++ - C++ 标准和全局符号删除

> ID：430401
> 
> 赞同：1
> 
> 时间：2009-01-10T02:14:59.987
> 
> 标签：c++, compiler-construction, linker

任何人都可以链接到 C++ 标准关于编译器删除全局和静态符号的内容？我以为您不能保证如果未引用全局符号，编译器将删除它们。我的一位同事断言，如果您的全局符号包含在主翻译单元中，即使未引用这些符号，也不会删除它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T03:35:04.927

有趣的是，我在 C++2003 标准中能找到的只是：

> 3.7.1 静态存储时长[basic.stc.static]
> 
> 所有既不具有动态存储持续时间也不是本地对象的对象具有静态存储持续时间。这些对象的存储应持续到程序的持续时间（3.6.2、3.6.3）。
> 
> 如果静态存储持续时间的对象具有初始化或具有副作用的析构函数，则即使它看起来未使用，也不应将其消除，除非可以按照 12.8 中的规定消除类对象或其副本。

这意味着该标准允许在静态存储中删除项目，如果它们的初始化和销毁​​没有副作用并且它们未被使用。

如果有更直接的许可，我没有看到（但也许其他人会看到）。

但是，应该注意的是，让链接器消除最终图像中未使用的对象是一种非常常见的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T06:00:00.047

你问的是关于链接的问题，尽管 C++ 标准说链接应该作为翻译的最后阶段发生，但它没有说明应该*如何*发生。例如，它说函数引用被解析，但它不要求它们按名称解析，并且它没有说明解析后引用会发生什么。

要确定编译器在目标代码中包含哪些符号，以及链接器删除或不删除哪些符号，您需要分别查阅您正在使用的编译器和链接器的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T13:19:34.920

我相信这是这种方式（我们之前在评论线程中就堆栈溢出进行了长时间的讨论）：

1.  如果具有命名空间范围的对象（即具有静态存储持续时间的对象）的初始化或析构函数没有副作用，则如果在其翻译单元中没有使用函数或对象，则可以优化该对象。
2.  对于初始化或销毁导致副作用的对象，编译器可能不会优化该变量，即使没有使用其翻译单元的对象或函数。

在任何情况下，编译器都必须在使用完成之前初始化对象，但不一定在 main 之前。我做了测试，因为 stackoverflow 的某个人说如果没有这样的用途，gcc 可以有效地优化具有副作用的对象的初始化。我现在测试了，我已经看到 gcc 没有这样做。此外，据我了解标准，无论如何都不允许这样做。

如果您只获取要初始化的对象的翻译单元的对象或函数的地址就足够了。为了安全起见，最好始终这样做，即使对于具有副作用的初始化对象也是如此。假设您的朋友是对的，我认为对于 main 的翻译单元，`main`总是被视为正在*使用*，因此该条件立即得到满足。规则可以在`3.6.2p3`,`3.7.1p2`和`3.2p2`(*使用*的定义), `1.9p7`(*副作用的*定义)中找到。

# c# - 在 C# .NET 应用程序上显示 ñ

> ID：430403
> 
> 赞同：1
> 
> 时间：2009-01-10T02:16:11.217
> 
> 标签：c#, unicode, localization, character-encoding

我有一个本地化问题。

我的一位勤奋的同事用字典中包含的常量替换了整个应用程序中的所有字符串。一旦用户选择一种语言（默认为英语，但目标语言是德语、西班牙语、法语、葡萄牙语、普通话和泰语），该词典就会在其中放置各种字符串。

为了测试此功能，我们希望更改一个按钮以包含具有 ñ 字符的文本，该字符以西班牙语和 Arial Unicode MS 字体（我们在整个应用程序中使用）显示。

问题是，ñ 显示为一个方块，就好像程序不知道如何显示它一样。当我调试从磁盘读取的特定字符串时，调试器也会将该字符报告为方块。

那么失败在哪里呢？我觉得可能有几个地方：

1) 记事本可能无法识别 unicode，因此此处显示的 ñ 与 vs2008 所期望的不同，因此程序将字符解释为正方形（编辑：记事本显示与 vs 相同的字符；即，它们都显示ñ. 在同一个地方。）。

2) vs2008 无法处理ñ。我觉得非常非常难以相信。

3）文字读入正确，但是vs2008的默认字体无法显示，这也是调试器显示正方形的原因。

4）文本没有正确读入，我应该使用常规 StreamReader 以外的东西来获取字符串。

5) 文本被正确读入，但 C# 中默认的 String 类处理不好。我觉得非常非常难以相信。

6) 我拥有的 Arial Unicode MS 版本没有ñ，尽管它被[http://www.fileinfo.info](http://www.fileinfo.info)列为 50k 个字符之一。

还有什么我可以遗漏的吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T02:25:20.467

我会说，最肯定记事本是罪魁祸首。记事本不能很好地处理 unicode 字符。如果您想手动编辑此文件，请使用可以处理 unicode 的[Notepad++](http://notepad-plus.sourceforge.net/uk/site.htm)，并确保将文件保存为 UTF-8。您可能只使用 VS 来编辑文件，而完全忘记记事本或 Notepad++。.Net 和 Visual Studio 实际上非常擅长处理重音字符。默认情况下，所有字符串都是 UTF-8，所以问题几乎肯定出在记事本上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T03:33:35.913

你是如何阅读字符串的？

您是否尝试过像这样读取文本文件（编码设置为 UTF8）：

```
using(StreamReader sr = new StreamReader(File.Open("file.txt", FileMode.Open), Encoding.UTF8))
{
// add your string to dictionary
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T07:31:41.657

我有一个关于调试 Unicode 问题的简短[指南](http://pobox.com/~skeet/csharp/debuggingunicode.html)。它的目标是从数据库中获取文本，但同样的原则通常适用。

IMO 最重要的起点是在字符串仅显示一个框时知道它的实际内容。将内容转储到控制台，代码如下：

```
static void DumpString (string value)
{
    foreach (char c in value)
    {
        Console.Write ("{0:x4} ", (int)c);
    }
    Console.WriteLine();
} 
```

[然后在 unicode.org 上的代码图表](http://www.unicode.org/charts/)中查找该字符。我怀疑你想要 U+00F1，但可能还有另一个类似的字符具有不同的代码点——我以前被愚弄过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T02:24:57.113

前几天我遇到了类似的问题 - 请参阅[System.Windows.Forms.TextBox 中未显示的 Unicode 字符](https://stackoverflow.com/questions/420659/unicode-characters-not-showing-in-system-windows-forms-textbox)。我能够通过将 TextBox 更改为 RichTextBox 来修复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-10T02:26:04.800

在分配 button.Text 属性并为正确的 IFormatProvider 提供西班牙语 CultureInfo 对象时，您是否尝试过使用 String.Format？

我不知道这是否会产生影响，但可能会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-10T13:51:21.033

你检查过你的*源*文件编码真的是 utf-8 吗？可能不适用于默认的 vs2008 安装，但 IDE 可能会检测您的操作系统的默认语言环境（或文件系统编码）并为您的所有文件设置匹配的非 utf-8 编码。您可能想尝试使用双重编码的混乱（您经常在网络上遇到）“Ã±”，而无需更改设置中的任何内容来测试您的编码不匹配。

当我开始编写同事的上帝知道什么编辑器在什么编码代码上工作时，我被这件事咬住了。

我很确定并假设您的所有 api 调用都支持 utf-8，因此您的所有文本都被解释为 utf-8，即使它不是。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-05-31T22:24:01.083

要正确读取西班牙语字符（ñ、á、é 等），您可以尝试使用 Codepage 1252 进行编码。

# visual-c++ - 包含 gl.h 时 VC++ 编译错误

> ID：430413
> 
> 赞同：23
> 
> 时间：2009-01-10T02:24:14.133
> 
> 标签：visual-c++, opengl

使用 Visual C++ 编译使用 OpenGL 的文件时，当我尝试包含 gl.h 头文件时，我得到大约 150 个无用的编译错误：

错误 C2144: 语法错误: 'void' 应该以 ';' 开头

错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

错误 C2146：语法错误：缺少“；” 在标识符“glAccum”之前

等等

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-01-10T05:58:55.777

就`#include <windows.h>`在`<gl/gl.h>`或之前`<gl/glu.h>`。某些类型需要它，例如`WINGDIAPI`和`APIENTRY`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-12-25T12:12:51.137

如果您使用 Visual c++，请确保您已经拥有 opengl 库。`#include <windows.h>`之前使用，`#include <GL/gl.h>` 如果你`#include <glut.h>`在你的程序中使用，请确保你不是这样输入的 `#include <GL/glut.h>`，如果你这样输入，它可能是错误“GL/glut.h没有这样的文件或目录”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T02:37:41.580

听起来您在 C++ 项目中包含 C 标头。尝试将您的 include 语句包含在其中：

```
extern "C" {
#include "gl.h"
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-01-10T05:50:02.143

要考虑的第一种可能性是编译器的消息实际上是*正确*的。这些错误消息中肯定包含行号，所以您是否查看了有问题的行以及它们之前的一些行，以尝试确定真正的原因是什么？

在您引用的那些信息之前是否还有其他信息？（例如，缺少标题？）总是从第一个开始处理编译器消息；后来的有时只是由此引起的副作用。

你能在一个简单的项目中重现这个问题吗？`#include <gl.h>`只写一个空文件并尝试编译它就足够了吗？或者是否有更多关于导致错误发生的源代码？

请记住，*您是*可以访问您的代码的人；我在上面问的问题是您需要考虑的各种事情，因为您不能总是让其他人为您调试代码。

# c++ - 是否有任何宏来确定我的代码是否正在编译到 Windows？

> ID：430424
> 
> 赞同：37
> 
> 时间：2009-01-10T02:30:03.373
> 
> 标签：c++, c, operating-system, c-preprocessor

我想检测我正在编译的操作系统是否是 Windows。我可以检查一个简单的宏来验证吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-01-10T02:39:48.953

*[编辑：我假设您想使用编译时宏来确定您所在的环境。也许您想确定您是在 Linux 下的 Wine 上运行还是在 Windows 上运行，但一般来说，您的编译器针对特定环境，即 Windows (DOS) 或不是，但很少（从不？） 两个都。]*

一些编译器提供宏来指示 Windows 构建环境。但是这些会因编译器而异，如果目标环境*不是*专门的 Windows，甚至在 Windows 上的相同编译器上也会有所不同。通常是`__WIN32__`，但并非总是如此。

```
#if defined (__WIN32__)
  // Windows stuff
#endif 
```

有时它可以是`_WIN32`, `__CYGWIN32__`，或者可能只是编译器指示符 ( `_MSC_VER`)。

如果您知道将要构建的环境（来自 makefile），那么您通常可以在`#define`命令行中传入，例如“ `g++ -D __WIN32__ yourfile.c`”。

[更多信息在这里](http://predef.sourceforge.net/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-01-10T09:18:36.030

有许多不同的方法可以检测编译、主机和运行时环境。一切都取决于你想知道什么。有三种广泛的环境类型：

*   **Build**：这是编译程序的环境。
*   **主机**：这是程序运行的环境。
*   **目标**：对于代码生成工具（例如编译器），这是生成的代码将运行的地方。

如果您是*交叉编译*，则构建和宿主环境可能完全不同（这在构建嵌入式应用程序时很常见，但在构建桌面/服务器应用程序时并不常见），并且您通常无法在过去的系统上运行编译后的二进制文件编译它。否则，宿主环境必须与构建环境兼容：例如，在 XP 上构建将在 Vista 上运行的应用程序。

C 预处理器宏不能用于告诉您主机系统的详细信息（即您正在运行的系统）；他们只能告诉你代码是为了什么而编译的。在 windows 的情况下，两个最重要的宏是：

*   **_WIN32**表示 Win32 API 可用。它不会**告诉**您您正在使用哪个编译器，实际上 _WIN32 是在使用 Cygwin 的 GCC 和 MinGW 的 GCC 时定义的。因此，不要使用 _WIN32 来确定您是否正在使用 Visual Studio 进行编译。
*   **`_MSC_VER`**告诉您程序正在使用 Microsoft Visual C/C++ 编译。嗯，差不多。在使用旨在替代 Visual C++ 的英特尔 C++ 编译器时也定义`_MSC_VER`了**。**

Visual Studio 文档中描述了许多其他宏。

如果您想知道您使用的是哪个确切版本的 Windows，则必须使用运行时函数，例如 GetVersion()（如其他答案中所述）。

如果您确切地告诉我们您要检查的内容，您可能会得到更具体的答案。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-01-10T04:21:14.817

```
% touch foo.C ; g++ -dM -E foo.C 
```

将很好地列出您的 [机器特定] g++ 编译器为您自动定义的所有宏（#define's）。

微软的编译器可能有类似的东西......

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-06-19T21:48:18.763

这三行将帮助您进行检测，首先我们或将大多数预定义的 windows 提示合并到一个 OS_WIN 宏定义中：

```
#如果定义（_WIN32）|| 定义(WIN32) || 定义（__CYGWIN__）|| 定义(__MINGW32__) || 定义（__BORLANDC__）
#define OS_WIN
＃万一

```

然后你可以使用预处理器 ifdef 检查它：

```
#ifdef OS_WIN
//Windows特定的东西
＃别的
//普通的东西
＃万一

```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-10T02:57:08.077

如果您正在运行 MS Windows 目标代码，您可以调用 GetVersion() 或 GetVersionEx() 以获取更多信息，并识别您正在运行的 Windows 的变体。

有关更多信息，请查看 MSDN 信息。

[http://msdn.microsoft.com/en-us/library/ms724451(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms724451(VS.85).aspx)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-10T07:28:48.637

MSVC++ 编译器（不是`windows.h`）`_WIN32`为*所有*构建定义，因此它是一个更安全的宏检查。MinGW gcc 编译器也可以。任何针对 Win32 的交叉编译环境*也应该*设置这个。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-11-19T07:17:36.287

这个东西在 Visual Studio 2012 和其他 cgwin 的 g++ 编译器中工作。剪切并粘贴它，但它通常尽可能薄它所做的只是检测 Windows 操作系统。只需应用量化：如果没有获胜，那么 *inux :D 享受

```
#include <string>
#include <iostream>
#include <fstream>
#include <cstdlib>
Using namespace std;

int main(){    
    char chCap;    int i = 0;
    const int MAX_BUFFER = 70; 
    char buffer[MAX_BUFFER];

    string cmd="ver";   
    FILE *stream = _popen(cmd.c_str(), "r");

    if (0 != stream){
        while (!feof(stream)){  
            //One way is here
            //chCap = fgetc(stream);
            //cout << chCap;
            //buffer[i++] = chCap;

            //This one seams better
            fgets(buffer, MAX_BUFFER, stream);      
        }
        _pclose(stream);
    }       
    cout << endl;
    cout << buffer << endl;

    //The op sys detection starts here
    string opSys(buffer);   //char array to string
    if("Microsoft" == opSys.substr(0,9)){
        cout << "You are in a Microsoft envornment " << endl;
    }
    system("pause");
    return 0;    
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-01-10T02:53:45.493

到目前为止提到的链接指示编译时的信息。您可以在编译时在这些代码段中设置标志。

但是，我认为您要问的更多是“我在哪个版本的 Windows 下运行？”而不是“我是否编译为在 Windows 下运行？” 我希望这是一个正确的假设。

在C#下，比较简单。您可以参考 System.Environment.OSVersion 然后在“平台”下查看。

但是，您是在询问 C++。你用的是什么编译器？这对于您如何检查操作系统的版本有很大的不同，因为没有单一的标准来获取这些信息（我已经找到）。

在 Visual C++ 下，使用 Google 查找有关 GetVersion/GetVersionEx 的信息。两者都会为您提供包含有关当前运行程序的 Windows 版本的信息的结构。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-01-10T05:05:58.020

实际上我会选择环境。getenv() 是一个标准库函数，因此可能是唯一可能实现此目的的可移植方式。诀窍是找出所有操作系统独有的变量。Windows 有 ComSpec、appdata、Windir、systemroot 和 systemdrive 应该设置。您还可以 strstr WINDOWS 或 WINNT 的路径变量，但这可能不准确。我不是 Linux shell/Solaris/MacOS 专家，因此其他人可能能够告诉您这些操作系统中存在哪些“标准”环境变量。CygWin 也可能会给您带来一些问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-10T02:49:48.467

上面列出的宏将告诉您程序是否在（或者更确切地说，*用于*）Windows 机器上**编译，而****不是**它是否在 Windows 机器上**运行**。

 *****如果您编写的东西完全与平台无关（即它只处理打开/读取/处理/写入）文件流..您将不得不做一些测试，例如打开一个在计算机运行 Windows 时应该存在的文件。如果您的程序仅使用标准 stdio、数学等。情况就是这样。

否则，如果您的代码包含 Windows 特定的系统调用，它根本不会在任何其他平台上运行。

您可以编写一些宏，例如：

```
#define RUNNING_ON_WINDOWS ( ... some test ) 
```

只是不要将它用于条件编译，即：

```
if (RUNNING_ON_WINDOWS) {
  ... 
} else 
   printf("Windows Required\n"); 
```

# php - PHP Pull Image And Display

> ID：430439
> 
> 赞同：1
> 
> 时间：2009-01-10T02:43:00.400
> 
> 标签：php, gd

I have a PHP file which I have used mod rewrite to make a .jpg extension. I want to grab an image from a url

example: [http://msn.com/lol.gif](http://msn.com/lol.gif)

take the data and then display it in my .jpg with jpeg headers, so as far as the user is concerned it is a normal image. Is this possible and if so can anyone give me some pointers?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T02:47:01.733

如果您结合使用 curl 和 PHP 的图像处理方法（您可以在[此处](http://www.tutorialized.com/tutorials/PHP/Image-Manipulation/1)了解） ，您将获得所需的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T04:43:08.470

使用 php GD 库：

```
header('Content-type: image/jpeg');
$pic = imagecreatefromgif($url);
Imagejpeg($pic);
ImageDestroy($pic); 
```

使用 imagick 库：

```
header('Content-type: image/jpeg');
$image = new Imagick($url);
$image->setImageFormat( "jpg" );
echo $image; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T04:42:42.497

根据您的需要（您需要处理图像吗？），您可以打开远程文件并将其输出到浏览器。

查看有关[readfile](http://us.php.net/manual/en/function.readfile.php)函数和[http wrapper](http://us.php.net/manual/en/wrappers.http.php)的文档。

# eclipse - 用于链接和编辑现有 Web 应用程序的 Eclipse 配置文档

> ID：430446
> 
> 赞同：0
> 
> 时间：2009-01-10T02:47:10.250
> 
> 标签：eclipse, jakarta-ee

我一直在尝试学习如何使用 eclipse 进行 J2ee Web 开发，并且听说过很多关于它的好消息。当我从头开始一个项目并在 Eclipse 工作空间内构建所有内容时，我自己取得了很多成功。然而，这一切都很有趣和游戏。

作为我工作的一部分，我是一个团队的一员，该团队使用已经存在多年的自己定义良好的目录结构构建 Web 应用程序。构建脚本中的许多钩子取决于目录结构以及源存储库。

我们用IDEa很久了，但是版本已经过时了，

我想单独保留目录结构，但能够利用 eclipse 中提供的一些新功能。然而，我对 Eclipse 的新手印象似乎是 Eclipse 坚持你要遵守它的规则，将所有内容导入它的工作区，并屈服于它的意志。我已经能够链接源文件夹以进行严格的 java 开发，但我在动态 Web 项目中没有这样的运气。

我确信我错过了一些东西，并希望有人会指出一个体面的教程来解决我的问题，因为我真的很想克服我对 J2EE 开发代码辅助的 IDEa 依赖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-10T02:51:45.637

我能够在 Eclipse 中启动一个 Java servlet 项目，并让它按照自己喜欢的方式设置一个新项目，然后只需将现有项目中的文件夹和配置文件添加到新的 Eclipse 项目中，直到它看起来就像旧项目。

我希望我能找到一种更好的方法来告诉 eclipse 我在哪里可以找到现有文件，但最终它可以像这样倒退。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T04:05:12.853

不，那没有用。我仍然必须将文件导入工作区。我必须能够处理现有的目录结构，这是一个交易破坏者。

# c# - 如何在 C# 中将 int 格式化为货币？

> ID：430458
> 
> 赞同：20
> 
> 时间：2009-01-10T02:54:11.360
> 
> 标签：c#, formatting, currency

我想将 int 格式化为 C# 中的货币，但没有分数。例如，100000 应该是“$100,000”，而不是“$100,000.00”（由 100000.ToString("C") 给出）。

我知道我可以使用 100000.ToString("$#,0") 来做到这一点，但这是特定于 $ 的。有没有办法使用货币（“C”）格式化程序来做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-01-10T03:00:16.587

使用格式“C0”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-07-13T12:37:08.293

可以使用提供逗号的 n0，如 1,234。货币符号不会出现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:28:23.893

尝试

```
using System.Globalization
@string.Format(new CultureInfo("en-IN"), "{0:c}", moneyvalue) 
```

将以卢比显示格式。

# java - 如何在 Java 中使用与 C++ 引用参数等效的参数？

> ID：430479
> 
> 赞同：7
> 
> 时间：2009-01-10T03:06:54.907
> 
> 标签：java, c++, reference

假设我在 C++ 中有这个：

```
void test(int &i, int &j)
{
    ++i;
    ++j;
} 
```

这些值在函数内部更改，然后在外部使用。我怎样才能编写在 Java 中执行相同操作的代码？我想我可以返回一个封装这两个值的类，但这看起来真的很麻烦。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-10T15:47:16.727

## 使用包装器模拟引用。

以某种方式模拟这种行为的一种方法是创建一个通用包装器。

```
public class _<E> {
    E ref;
    public _( E e ){
        ref = e;
    }
    public E g() { return ref; }
    public void s( E e ){ this.ref = e; }

    public String toString() {
        return ref.toString();
    }
} 
```

我不太相信这段代码的价值，因为我情不自禁，我不得不编写它:)

所以就在这里。

示例用法：

```
public class Test {

    public static void main ( String [] args ) {
        _<Integer> iByRef = new _<Integer>( 1 );
        addOne( iByRef );
        System.out.println( iByRef ); // prints 2

        _<String> sByRef = new _<String>( "Hola" );
        reverse( sByRef ); 
        System.out.println( sByRef ); // prints aloH

    }

    // Change the value of ref by adding 1
    public static void addOne( _<Integer> ref ) { 
        int i = ref.g();
        ref.s( ++i  );

        // or 
        //int i = ref.g();
        //ref.s( i + 1 );

    }
    // Reverse the vale of a string.
    public static void reverse( _<String> otherRef ) { 
        String v = otherRef.g();
        String reversed = new StringBuilder( v ).reverse().toString();
        otherRef.s( reversed );
    }

} 
```

这里有趣的是，通用包装类名称是“_”，它是一个有效的类标识符。所以声明如下：

对于整数：

```
_<Integer> iByRef = new _<Integer>( 1 ); 
```

对于字符串：

```
_<String> sByRef = new _<String>( "Hola" ); 
```

对于任何其他班级

```
_<Employee> employee = new _<Employee>( Employee.byId(123) ); 
```

方法“s”和“g”代表设置和获取：P

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-10T03:10:15.367

Java 没有等效的 C++ 引用。使其工作的唯一方法是将值封装在另一个类中并交换类中的值。

这是关于这个问题的冗长讨论：[http ://www.yoda.arachsys.com/java/passing.html](http://www.yoda.arachsys.com/java/passing.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-10T03:11:27.300

好吧，有几个解决方法。你自己提到了一个。另一个是：

```
public void test(int[] values) {
    ++values[0];
    ++values[1];
} 
```

不过，我会使用自定义对象。这是一种更清洁的方式。此外，尝试重新安排您的问题，以便单个方法不需要返回两个值。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-01-10T03:12:29.777

Java 没有按引用传递。您必须封装以实现所需的功能。Jon Skeet 简要[解释](http://www.yoda.arachsys.com/java/passing.html)了为什么从 Java 中排除了引用传递。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-10T16:23:00.680

一个更好的问题：为什么要创建具有这种副作用的方法？

通常，这强烈表明您应该将数据提取到单独的类中，并使用描述操作发生原因的公共访问器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-14T17:52:18.387

Java 按值传递参数，并且没有允许按引用传递的机制。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-11T20:33:09.317

这两个整数有关系吗？像一对 x/y 坐标？如果是这样，我会将整数放入一个新类中并将该类传递给方法。

```
class A{ 
  public void test(Coord c)
  {
    c.x++;
    c.y++;
  }
  private class Coord{
    public int x, y;
  }
} 
```

如果这两个整数不相关，您可能想首先考虑为什么要将它们传递给同一个方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-10T03:52:45.920

你必须以某种方式（以你的方式）装箱。

整数是不可变的。太没用了。int 是可变的，但由于 java 是按值传递的，因此在这种情况下它再次无法使用。有关更多解释，请参阅这些页面：[Java 是按值传递，该死！](http://javadude.com/articles/passbyvalue.htm)和[int 与整数](http://mindprod.com/jgloss/intvsinteger.html)

Apache commons lang 有一个 MutableInt 类。或者你可以自己写。

无论如何，它不应该那么糟糕，因为它不应该经常发生。如果是这样，那么您应该彻底改变您在 Java 中编码的方式。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-29T19:26:02.070

最简单的解决方案是使用不需要自己编写的[org.apache.commons.lang.mutable.MutableInt类。](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/mutable/MutableInt.html)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-01-23T07:29:52.563

虽然它是一个糟糕的设计模式恕我直言，另一种可能的解决方案是

```
static void test(AtomicInteger i, AtomicInteger j)
{
    i.incrementAndGet();
    j.incrementAndGet();
} 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2009-01-10T03:14:55.123

您可以构造盒装对象，即

```
Integer iObj = new Integer(i);
Integer jObj = new Integer(j); 
```

并将您的例程编写为

```
public void test(Integer i, Integer j){
  i = i.add(1);
  j = j.add(1);
} 
```

出于各种原因，Java 的设计者认为按值调用更好。他们故意不包括通过引用调用的方法。（严格来说，它们将引用的副本传递给对象，原始类型的特殊情况是它们纯粹按值调用。但效果是一样的。）

# css - IE CSS 错误：表格边框显示具有可见性的 div：隐藏，位置：绝对

> ID：430485
> 
> 赞同：9
> 
> 时间：2009-01-10T03:08:26.947
> 
> 标签：css, internet-explorer

## 问题

我`<div>`在一个页面上有一个最初用`visibility: hidden; position: absolute`. 问题是，如果以`<div>`这种方式隐藏的表格包含一个表格，该表格使用`border-collapse: collapse`并在其单元格上设置了边框，则该边框仍会“通过” `<div>`IE 上的隐藏项显示。

通过在 IE6 或 IE7 上运行以下代码自己尝试一下。你应该得到一个白页，但你会看到：

[替代文字 http://img.skitch.com/20090110-enuxpb5aduqceush46dyuf4wk7.png](http://img.skitch.com/20090110-enuxpb5aduqceush46dyuf4wk7.png)

## 可能的解决方法

由于这发生在 IE 上而不是其他浏览器上，我认为这是一个 IE 错误。一种解决方法是添加以下将覆盖边框的代码：

```
.hide table tr td {
    border: none;
} 
```

我想知道：

*   这是一个已知的 IE 错误吗？
*   有没有更优雅的解决方案/解决方法？

## 编码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <style type="text/css">

            /* Style for tables */
            .table tr td {
                border: 1px solid gray;
            }
            .table {
                border-collapse: collapse;
            }

            /* Class used to hide a section */
            .hide {
                visibility: hidden;
                position: absolute;
            }

        </style>
    </head>
    <body>
        <div class="hide">
            <table class="table">
                <tr>
                    <td>Gaga</td>
                </tr>
            </table>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-02-04T16:15:47.823

这是一个 IE 错误。Firefox 无法使用“border-spacing”识别“border-collapse”，这不会导致此问题。使用“display:none”的解决方案有效，但还有另一种可能性。如果使用 Javascript 设置了可见性属性，则边框也会被隐藏（如预期的那样）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-11-11T05:25:17.350

我找到的解决方案包括添加一个顶部/左侧以将渲染移出屏幕，这可以保护我们免受此类 IE 错误的影响。在上面的示例中，这意味着您将`hide`类的 CSS 定义为：

```
.hide {
    visibility: hidden;
    position: absolute;
    top: -10000px;
    left: -10000px;
} 
```

更多信息：[在 IE 上显示表格边框的解决方法](http://wiki.orbeon.com/forms/doc/contributor-guide/ie-bugs#TOC-Workaround-for-table-borders-showin)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-25T06:25:00.120

如果您不使用绝对定位，我会假设在隐藏时保持 div 的大小对您来说仍然很重要。但是，由于您使用的是绝对定位，因此您可以使用

```
display: none; 
```

这将完成同样的事情（在 IE7 中测试）。

使用可见性：隐藏，您隐藏的元素占用相同的屏幕空间，就好像它仍然在那里一样。当您使用 display: none 时，它​​几乎就像从 DOM 中删除一样。

您看到的原始问题可能是 IE 错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-06-08T11:10:30.877

另一种可能的解决方法是添加“过滤器：alpha（opacity=100）；” 融入餐桌的风格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-10T07:24:28.973

关于您可能的解决方法：由于您想要可见性：隐藏而不是显示：无我认为表格保持相同大小很重要。恐怕将边框设置为无可以改变这一点。

如果您知道要查看白色矩形，则将边框颜色设置为白色会更安全。当然，如果你有背景想透过隐藏表看，那是行不通的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-08-09T16:14:15.673

基于这些不同的评论，我通过在我的主 CSS 表中添加这个 CSS 类来解决这个问题：

```
.hidden {
    position: absolute;
    visibility: hidden;
} 
```

以及专用于 IE 的 CSS 表中的那些行（通过 html 页面上的 hack 包含）：

```
table.hidden, .hidden table {
    visibility: hidden;
    position: absolute;
    border-collapse: separate;
    left: -1000px;
    top: -1000px;
} 
```

现在在 IE8 上对我来说效果很好。

非常感谢您的提示；）

# apache-flex - 全屏模式下的 Flex DisplayObject

> ID：430499
> 
> 赞同：1
> 
> 时间：2009-01-10T03:18:02.153
> 
> 标签：apache-flex, flash, actionscript-3, charts, fullscreen

我想在我的 Flex 应用程序中全屏显示对象。[我知道在 flex (example)](http://blog.flexexamples.com/2007/08/07/creating-full-screen-flex-applications/)中制作完整的 Stage 全屏很容易。但是我的舞台上有两个图表，我想在单击按钮（或双击图表区域）时使其中一个图表全屏显示，并且根据我的理解，ColumnChart is a DisplayObject [(API reference)](http://livedocs.adobe.com/flex/3/langref/mx/charts/ColumnChart.html)。

有可能这样做吗？如果可能的话，请发布代码片段。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T03:25:03.467

在这种情况下，我所做的就是使用包含您选择的两个容器的 Flex HDDividedBox。然后你可以将 HDividedBox 设为 100% x 100%；并根据您的选择隐藏或显示这两个容器。

它是一个非常不错的分页书模拟器。它还可以轻松地使用分隔条拖动调整两者之间的相对分割的大小，例如，图像可以平滑缩放。

我在左侧和右侧使用 TabNavigators，以便轻松浏览每一侧的类似页面的选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T07:31:10.723

请参阅： http: [//www.adobe.com/devnet/flashplayer/articles/full_screen_mode.html](http://www.adobe.com/devnet/flashplayer/articles/full_screen_mode.html) 只需为您的组件设置一个全屏源矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T18:53:45.400

你可以试试这样的...

```
 private var myLeftColumnChart : ColumnChart;
private var myRightColumnChart : ColumnChart;

private function onButtonClick() : void{
   myRightColumnChart.visible = myRightColumnChart.includeInLayout = false;

   myLeftColumnChart.y = myLeftColumnChart.x = 0;
   myLeftColumnChart.width = Application.application.width;
   myRightColumnChart.height = Application.application.height;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T12:38:59.093

您应该在舞台上使用 fullScreenSourceRect 属性并将其设置为具有您想要全屏显示的图表位置的 Rectangle。

# css - 你如何摆脱 Safari/webkit 中 iframe 中的所有滚动条？

> ID：430503
> 
> 赞同：5
> 
> 时间：2009-01-10T03:21:50.540
> 
> 标签：css, iframe, safari, webkit

我试过 scrolling="no" 和 overflow:hidden; Safari/webkit 上的 iframe 中似乎没有什么能让垂直滚动条消失。有人知道吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-10T03:24:14.293

在包含的主体上使用溢出：隐藏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T04:42:33.837

是的，这是一个错误。有关预期行为，请参阅 W3C。

[http://www.w3schools.com/TAGS/tryit.asp?filename=tryhtml_iframe_scrolling](http://www.w3schools.com/TAGS/tryit.asp?filename=tryhtml_iframe_scrolling)

# actionscript-2 - Flash AS2 命令行编译器功能

> ID：430508
> 
> 赞同：0
> 
> 时间：2009-01-10T03:27:18.360
> 
> 标签：actionscript-2, flash, swf-compiler, mtasc

尽管[MTASC 命令行编译器](http://www.mtasc.org/#usage)可以将[ActionScript](http://en.wikipedia.org/wiki/ActionScript)类文件编译成[SWF](http://en.wikipedia.org/wiki/SWF)，但我需要通过命令行开关具体了解它的功能。

*   配置您的目标**[Flash Player](http://en.wikipedia.org/wiki/Adobe_Flash_Player)***版本， 6 / 7 / 8*

> **`-version n`**: 指定 SWF 版本 : 6 以生成与 Player 6r89 兼容的 SWF 或 8 以访问 Flash8 功能。

*   配置电影的哪一**帧**，包含所有代码。

> **`-frame f`**: 将 AS2 类导出到 swf 的目标框架中。

* * *

*   但是如何配置电影的哪些**帧**，包含哪些 ActionScript 代码？
*   换句话说，将**A**类放入 Flash 电影的第1 帧，**B 类**放入第 2 帧，**C 类**放入 Flash 电影的第 3 帧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T21:38:13.117

据我所知，您无法指定哪些类进入哪些框架。但是，您可以指定将导出所有类代码的框架。由于 SWF 格式是一种流格式（它是逐帧下载的），您可以例如在第 2 帧中导出所有类。如果您随后将代码放在基本上以*stop() 开头的第 1 帧中；*然后您将进入一个循环来测量加载了多少 SWF，您可以在第一帧上创建一个 SWF 预加载器。

您还可以看看[swfmill](http://www.swfmill.org/)，它可以让您布置 SWF 的框架并导入资源。您可以使用 MTASC 将代码注入 swfmill 生成的 SWF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T03:50:16.317

使用 AS2，您的所有代码都将导入同一个框架，您可以选择要导入的框架。

然而，对于 AS3，在根目录中导入的代码进入第 1 帧，使用形状导入的代码进入形状的帧。

# embedded - 嵌入式软件编程资源（微控制器、EPROM）

> ID：430512
> 
> 赞同：3
> 
> 时间：2009-01-10T03:34:06.397
> 
> 标签：embedded

有谁知道任何使用 C 或汇编程序资源的好的在线嵌入式软件编程？谷歌并没有真正帮助其搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T03:47:52.390

[Microchip](http://www.microchip.com)有免费（学生版）编译器和大量应用笔记。

[嵌入式系统编程](http://www.embedded.com/)杂志/网站有文章、论坛等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T05:35:33.140

查看[Embedded.com](http://Embedded.com)以及 Jack Ganssle 的[文章](http://www.ganssle.com/articles.htm)集。非常值得一读。[EmbeddedRelated.com](http://www.embeddedrelated.com/)也是一个很好的资源，可以访问各种新闻组档案。

要熟悉微控制器，获取数据表总是有帮助的，例如，飞思卡尔 S12X 提供了广泛的功能（来自 CAN、SCI 等）。搜索飞思卡尔的[网站](http://www.freescale.com)以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T07:57:58.687

如果您选择其中一个微控制器系列，您可能会更幸运。在我看来，AVR 是一个很好的起点，另请参阅[这个答案](https://stackoverflow.com/questions/412444/recommendations-for-embbededrealtime-development-training#412726)。

我也推荐[Embedded.com](http://www.embedded.com)。

**编辑：**如果您说德语，请查看[mikrocontroller.net](http://www.mikrocontroller.net)。

# command-line - HXML 文档在哪里？

> ID：430525
> 
> 赞同：10
> 
> 时间：2009-01-10T03:48:29.673
> 
> 标签：command-line, actionscript-2, haxe, swf-compiler, hxml

我浏览了整个[Haxe](http://haxe.org/) Flash 命令行编译器网站，但找不到任何描述编译的**[HXML 文件](http://haxe.org/doc/start/flash)****的详细文档** *（向下滚动到“更改 SWF 属性”部分）*。

有人知道参考[来源吗？](http://haxe.org/wiki/search?s=HXML)

* * *

找到 HXML：

*   **-swf** MyApp.swf ....*编译为 SWF*
*   **-main** MyAppClass ....*入口点类（.AS 文件）*
*   **-swf-header** 200:300:25:FFFFFF ....*宽度:高度:FPS:BackColor (SWF)*

* * *

**编辑：使用****完整**的命令列表 向下滚动以获取我的答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-10T13:49:37.917

知道了！这是 Haxe 编译器的 HXML/命令行**选项的完整列表**

*   —cp : 添加目录以查找源文件
*   —js : 将代码编译成 JavaScript 文件
*   --as3 : 生成 AS3 代码到目标目录
*   —swf : 将代码编译为 Flash SWF 文件
*   —swf9 : 将代码编译为 Flash9 SWF 文件
*   —swf—version ：更改 SWF 版本（6 到 10）
*   —swf—header : 定义 SWF 标头 (width:height:fps:color)
*   —swf—lib ：将 SWF 库添加到编译的 SWF
*   —neko：将代码编译为 Neko Binary
*   —php : 生成 PHP 代码到目标目录
*   —x : 编译和执行 neko 文件的快捷方式
*   --xml : 生成 XML 类型描述
*   --main : 选择启动类
*   —lib ：使用 haxelib 库
*   -D : 定义条件编译标志
*   --resource [@name] : 添加一个命名资源文件
*   --exclude : 不为此文件中列出的类生成代码
*   -v : 打开详细节点
*   --debug : 在编译后的代码中添加调试信息
*   —prompt : 错误提示
*   --cmd : 编译成功后运行指定命令
*   ——flash—strict : 更严格的 flash API
*   ——no——traces：不在程序中编译trace调用
*   ——flash—use—stage : 将找到的对象放置在 SWF lib 的舞台上
*   ——neko——source：保留生成的neko源
*   ——gen—hx—classes : 从 SWF9 文件中生成 hx 头文件
*   ——next：分离几个haxe编译
*   ——display : 显示代码提示
*   ——no——输出：编译但不生成任何文件
*   ——times：衡量编译时间
*   ---no-inline ：禁用内联
*   ——php——front ：选择PHP前端文件的名称
*   ——remap : 将一个包重新映射到另一个包
*   --help : 显示这个选项列表
*   ——help : 显示这个选项列表

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-10T13:14:05.633

你有没有尝试过：

```
haxe --help 
```

据我所知，.hxml 文件只是传递命令行参数的一种便捷方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-18T16:27:29.433

对于**高级用法**和一些提示，这里是 Andy Li 的一篇很棒的文章 ( [https://stackoverflow.com/users/267998/andy-li](https://stackoverflow.com/users/267998/andy-li) )

[http://blog.onthewings.net/2013/03/04/hxml-tricks-every-haxe-user-should-know/](http://blog.onthewings.net/2013/03/04/hxml-tricks-every-haxe-user-should-know/)

* * *

# 注释 hxml 文件

以哈希 (#) 开头的行不会被视为参数。

```
#Yay! Comments! 
```

# 编译后立即运行项目

用于`-cmd`在编译成功后运行任何命令行。

```
#C++
-cpp bin
-main Test
-cmd ./bin/Test

#Flash
-swf Test.swf  
-main Test  
-cmd path/to/FlashDebugger Test.swf

#Neko
-neko Test.n  
-main Test  
-cmd neko Test.n 
```

对于 Neko 目标，构建和运行有特殊的快捷方式`-x Test`。

# 额外的论点

附加参数也可以，例如，如果你想构建调试版本

```
haxe project.hxml -debug 
```

# 一次编译多个

用于`--next`分隔不同的目标/配置构建。用于`--each`将参数应用于 hxml 中的每个构建。

```
#lib will be used in every '--next' build
-lib jQueryExtern  
--each  

#build MainPage
-js script/MainPage.js  
-main MainPage  
--next  

#build ContactPage
-js script/ContactPage.js  
-main ContactPage  

#build AlbumPage
--next  
-js script/AlbumPage.js  
-main AlbumPage 
```

# 包括 hxmls

您可以通过为每个配置创建一个 hxml 来进一步分离不同的构建配置。

客户端.hxml：

```
-main Client
-js client.js 
```

服务器.hxml：

```
-main Server
-neko server.n 
```

所有.hxml：

```
client.hxml
--next
server.hxml 
```

构建两者：`haxe all.hxml`

# iphone - 在 UITableViewCell 上设置编辑样式

> ID：430538
> 
> 赞同：14
> 
> 时间：2009-01-10T04:05:20.950
> 
> 标签：iphone, cocoa-touch

我正在尝试在 Cocoa Touch (iPhone) 应用程序中设置 UITableViewCell 的编辑样式属性。

有关此外观的示例，请查看联系人应用程序，您可以在其中看到一些单元格左侧的绿色小加号。

Interface Builder 中的 UITableViewCell 检查器有一个编辑样式下拉菜单，但它似乎没有做任何事情。

同样，对于一个似乎也不起作用的 UITableViewCell，还有一个名为 -setEditingStyle: 的未记录方法的 CodeSense 完成。

这是表格视图数据源中的设置吗？苹果以外的人有没有让这个工作？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-01-10T04:31:21.460

确实是UITableViewDelegate中的一个方法：

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath 
```

现在我得到一排绿色加号！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2011-08-11T07:30:13.830

下面的代码让您清楚地了解如何用户编辑样式

```
 - (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        if(indexPath.row == 0)
        { 
            return  UITableViewCellEditingStyleInsert;
        }
        else
        {
            return UITableViewCellEditingStyleDelete;
        }
    } 
```

# ruby-on-rails - Ruby on Rails：hash.each {} 问题

> ID：430548
> 
> 赞同：15
> 
> 时间：2009-01-10T04:24:47.807
> 
> 标签：ruby-on-rails, ruby, hash

这是我的代码：

```
records_hash = records[:id].inject({}) { |result,h|
  if result.has_key?(h)
    result[h] += 1
  else
    result[h] = 1
  end
  result
}

@test2 = records_hash.each{|key,value| puts "#{key} is #{value}"} 
```

我的输出应该是这样的：

```
bozo is 3
bubba is 4
bonker is 5 
```

但它在页面 ( `<%= @test2 %>`) 上呈现如下：

```
bozo3bubba4bonker5 
```

我用类似的块尝试过 .each_key & .each-value ，它们都返回上面相同的字符串。我在 IRB 中运行相同的代码，它按预期工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-01-10T05:51:40.457

您的问题是您正在使用 each 方法来构建您的字符串。你想要的是地图方法。每个方法都返回哈希值，map 返回块的值。

你想要这样的东西：

```
@test2 = records_hash.map { |k,v| "#{k} is #{v}" } 
```

此外，您不应该像这样构建视图代码，除非它是一个简单的字符串。您的示例意味着您想要每行上的每个唯一元素。所以你的观点应该是这样的：

```
<% @records_hash.each do |k,v| %>
<%= "#{k} is #{v}" %>
<% end -%> 
```

如果您的视图是 HTML 视图，您还需要在每一行之间设置一些分隔符：

```
<% @records_hash.each do |k,v| %>
<%= "#{k} is #{v}" %><br/>
<% end -%> 
```

或者

```
<ul>
  <% @records_hash.each do |k,v| %>
  <li><%= "#{k} is #{v}" %></li>
  <% end -%>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T04:29:02.713

问题是，`puts`返回零。

你想做的是：

```
@test2 = ""
@test2 = records_hash.each { |k,v| s<< "#{k} is #{v}" } 
```

或类似的东西。

编辑：您`@test2`在代码示例中分配的是块的返回值`.each`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T05:00:00.013

您可以将其放在您的视图中，而不是将其分配给变量。

# vim - VIM 我如何搜索一个 单字节表示

> ID：430554
> 
> 赞同：11
> 
> 时间：2009-01-10T04:29:22.493
> 
> 标签：vim

当我从 Word 文档剪切并粘贴到 VIM 中时，引号会被转换为 a-circumflex，然后是 <99>，其中 <99> 是单字节表示。（我知道是因为当我移动到它时，输入一个“l”会将我移动到所有四个字符）。

我想做搜索和替换，我知道如何使用 control-K a> 找到 a-cirumflex digraph，但我不知道如何搜索 <99>，并搜索文字 /<99 > 不起作用。

所以我真的有两个问题：

我应该在 vim 中咨询什么帮助主题来了解 <99> 是什么类型的野兽（因为它似乎不是一个有向图）（或者它可能是一个有向图，我错过了一些东西）？

如何搜索由 <99> 表示的单个字符？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-01-10T04:44:54.117

试试这个：

将光标放在字符上，键入**`ga`**，您将看到该字符的十六进制表示，然后您可以将其替换为：

:%s/\%xNN//g

其中**NN**是字符的十六进制代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T04:39:56.917

它是否与[vim 显示问号而不是字符有关](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=397162)？

它可能是 Unicode 字符 0x0099，它没有图形表示。

如何插入 unicode -“插入模式下的 u0099 插入 unicode 值为 0x0099 的字符。” （从[这里](http://forums.fedoraforum.org/archive/index.php/t-90866.html)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T05:52:22.467

@CMS 详细搜索直接查找字符值。如果字符本身就是一个单词（或者您可以快速添加空格来使其如此），您还可以将光标悬停在字符上并输入 ***** -- 这将向前搜索最接近光标的单词（**#**倒退）。

# performance - VBO 何时比“简单”的 OpenGL 基元 (glBegin()) 更快？

> ID：430555
> 
> 赞同：36
> 
> 时间：2009-01-10T04:29:24.117
> 
> 标签：performance, opengl, graphics, vbo, vertex-buffer

在多年听说顶点缓冲区对象 (VBO) 之后，我终于决定尝试使用它们（我的东西通常不是性能关键，显然......）

我将在下面描述我的实验，但长话短说，我看到“简单”直接模式（glBegin()/glEnd()）、顶点数组（CPU 端）和 VBO（GPU 端）之间的性能无法区分渲染模式。我试图理解为什么会这样，以及在什么条件下我可以期望看到 VBO 显着超过它们的原始（双关语）祖先。

## 实验详情

对于实验，我生成了一个包含大量点的（静态）3D 高斯云。每个点都有与之关联的顶点和颜色信息。然后我在连续的帧中围绕云旋转相机，形成一种“轨道”行为。同样，这些点是静态的，只有眼睛在移动（通过 gluLookAt()）。数据在任何渲染之前生成一次并存储在两个数组中以用于渲染循环。

对于直接渲染，整个数据集在单个 glBegin()/glEnd() 块中渲染，循环包含对 glColor3fv() 和 glVertex3fv() 的单个调用。

对于顶点数组和 VBO 渲染，整个数据集通过一个 glDrawArrays() 调用来渲染。

然后，我只是在一个紧凑的循环中运行它一分钟左右，并使用高性能计时器测量平均 FPS。

## 性能结果##

如上所述，我的台式机（XP x64、8GB RAM、512 MB Quadro 1700）和笔记本电脑（XP32、4GB 内存、256 MB Quadro NVS 110）的性能无法区分。然而，它确实随着点数的增加而按预期缩放。显然，我也禁用了垂直同步。

笔记本电脑运行的具体结果（使用 GL_POINTS 渲染）：

glBegin()/glEnd():

*   1K 点 --> 603 FPS
*   10K 点 --> 401 FPS
*   100K 点 --> 97 FPS
*   1M 点 --> 14 FPS

顶点数组（CPU 端）：

*   1K 点 --> 603 FPS
*   10K 点 --> 402 FPS
*   100K 点 --> 97 FPS
*   1M 点 --> 14 FPS

顶点缓冲区对象（GPU 端）：

*   1K 点 --> 604 FPS
*   10K 点 --> 399 FPS
*   100K 点 --> 95 FPS
*   1M 点 --> 14 FPS

我用 GL_TRIANGLE_STRIP 渲染了相同的数据并且得到了类似的无法区分（尽管由于额外的光栅化而比预期的要慢）。如果有人想要，我也可以发布这些数字。.

## 问题）

*   是什么赋予了？
*   我必须做什么才能实现 VBO 承诺的性能提升？
*   我错过了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-01-10T05:46:40.217

优化 3D 渲染有很多因素。通常有4个瓶颈：

*   CPU（创建顶点、APU 调用、其他一切）
*   总线（CPU<->GPU 传输）
*   Vertex（固定函数管道执行上的顶点着色器）
*   像素（填充、片段着色器执行和 rops）

您的测试给出了偏斜的结果，因为您在最大化顶点或像素吞吐量的同时拥有大量 CPU（和总线）。VBO 用于降低 CPU（更少的 api 调用，与 CPU DMA 传输并行）。由于您不受 CPU 限制，因此它们不会给您任何收益。这是优化 101。例如，在游戏中 CPU 变得很宝贵，因为它需要用于 AI 和物理等其他事物，而不仅仅是发出大量的 api 调用。很容易看出，将顶点数据（例如 3 个浮点数）直接写入内存指针比调用将 3 个浮点数写入内存的函数要快得多 - 至少可以节省调用的周期。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-02-14T15:14:46.953

可能缺少一些东西：

1.  这是一个疯狂的猜测，但您的*笔记本电脑的*卡可能根本没有这种操作（即模拟它）。

2.  您是在将数据复制到 GPU 的内存（通过`glBufferData`（`GL_ARRAY_BUFFER`使用 any`GL_STATIC_DRAW`或`GL_DYNAMIC_DRAW`param）还是在内存中使用指向主（非 GPU）数组的指针？（这需要每帧都复制它，因此性能很慢）

3.  您是否将*索引*`glBufferData`作为通过和参数发送的另一个缓冲区传递`GL_ELEMENT_ARRAY_BUFFER`？

如果这三件事都做好了，性能提升是很大的。对于 Python (v/pyOpenGl)，它在大于 100 个元素的数组上快 1000 倍，C++ 快 5 倍，但在 50k-10m 个顶点的数组上。

这是我对 c++ (Core2Duo/8600GTS) 的测试结果：

```
 pts   vbo glb/e  ratio
 100  3900  3900   1.00
  1k  3800  3200   1.18
 10k  3600  2700   1.33
100k  1500   400   3.75
  1m   213    49   4.34
 10m    24     5   4.80 
```

因此，即使使用 10m 顶点，它也是正常的帧速率，而使用 glB/e 它是缓慢的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-13T19:21:41.753

From reading the Red Book, I remember a passage that stated that VBOs are possibly faster *depending on the hardware*. Some hardware optimizes those, while others don't. It's possible that your hardware doesn't.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-19T21:10:05.670

14Mpoints/s 并不是很多。很可疑 我们可以看到绘制的完整代码以及初始化吗？（将 14M/s 与 Slava Vishnyakov 获得的 240M/s (!) 进行比较）。更令人怀疑的是，它在 1K 绘制时降至 640K/s（与他的 3.8M/s 相比，无论如何，这看起来被 ~3800 SwapBuffers 所限制）。

我敢打赌，测试并不能衡量您认为它衡量的内容。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-01-13T19:24:39.877

Assuming I remember this right my OpenGL teacher, who is well known in the OpenGL community, said they are faster on static geometry which is going to be render a lot of time's on a typical game this will be tables chair and small static entities.

# asp.net - ASP.NET: Does implementing a custom MembershipProvider class needs you to implement a custom Membership class too?

> ID：430567
> 
> 赞同：2
> 
> 时间：2009-01-10T04:45:18.530
> 
> 标签：asp.net, membership, membership-provider

I have this question: "Does implementing a custom MembershipProvider class needs you to implement a custom Membership class too?" I am a bit confused about implementing a custom membership framework on ASP.NET.

I dont have sample classes to show you but what if the previous website used a database or schema that is different to the ones ASP.NET uses?

Many thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T04:51:33.150

In the MembershipProvider class you override the methods that you want to implement in a custom fashion, for example authenticating the user against the custom database or letting someone change their password. This will allow you to use the .NET login controls.

Usually this means you have your own user class of some sort already or will need to write one. You don't have to inherit MembershipUser to do so.

# asp.net - 隐藏 ASP.NET 菜单项

> ID：430573
> 
> 赞同：9
> 
> 时间：2009-01-10T04:51:22.260
> 
> 标签：asp.net, webforms

我有一个带有菜单控件的 ASP.NET 网络表单应用程序。如何通过代码隐藏特定的菜单项？我看过一些文章指出如何使用 ASP.Net 成员资格/基于角色的安全性来做到这一点，但这个特定的用例与此无关。我只需要一种以编程方式从代码中删除菜单项的方法。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2010-11-02T19:41:01.463

使用起来会更直接

```
myMenu.Items.RemoveAt(0); 
```

这将删除第一个菜单项

```
myMenu.Items[0].ChildItems.RemoveAt(1); 
```

这将删除第一个菜单项的第二个孩子

```
myMenu.Items[0].ChildItems[1].ChildItems.RemoveAt(1) 
```

这将删除第一个菜单项的第二个孩子的第二个孩子

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-10T04:54:22.647

嗬！好的，我想通了。正确的语法是（VB.Net）：

```
mnuMyMenu.Items.Remove(mnuMyMenu.Items(1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-09-12T11:52:29.980

```
myMenu.Items(0).ChildItems.Remove(myMenu.Items(0).ChildItems(1)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-25T14:54:23.320

如果要通过菜单项 Text 属性删除菜单项，可以使用：

```
myMenu.Items.Remove(myMenu.FindItem("Item Text")) 
```

# django - 使用 Django 向手机发送短信

> ID：430582
> 
> 赞同：20
> 
> 时间：2009-01-10T04:56:47.523
> 
> 标签：django, sms, mobile-phones, mobile-website

我正在构建一个应用程序，其中有这个小调查模块，它向我提供的电话号码发送一条简单的短信，并且必须收集响应（如果用户触发它）并将其显示给我。我正在使用 django 构建我的项目。我已经尝试过 django-sms 谷歌代码项目，但我无法将消息从我的手机发回我的服务器。我浏览了许多关于短信网关/运营商的教程。但我迷路了。谁能帮我推荐一个关于从我的应用程序（django）发送短信到任何手机的教程？关于向手机发送短信，是否会花费我（就像我如何从一部手机向另一部手机发送短信一样）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-01-14T00:19:23.993

嗨，我的名字是 Jarod，我在 Twilio.com 工作，所以我有点偏见。[但话虽如此，使用Twilio Rest Api](https://www.twilio.com/docs/api/rest/sending-messages?utm_source=stack_overflow&utm_medium=jan2014&utm_campaign=stackathon)从 Python Web 应用程序发送 SMS 非常容易。这是一个简单的例子：

```
# Download the Python helper library from twilio.com/docs/python/install 
from twilio.rest import TwilioRestClient

# Your Account Sid and Auth Token from twilio.com/user/account
account_sid = "{{ account_sid }}"
auth_token  = "{{ auth_token }}"
client = TwilioRestClient(account_sid, auth_token)

message = client.messages.create(
    body="Jenny please?! I love you <3",
    to="+15558675309",
    from_="+14158141829",
    media_url="http://www.example.com/hearts.png")
print message.sid 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-10T05:08:37.890

从技术角度来看，使用任何网络应用程序完成 SMS 发送的最简单方法是通过电子邮件。大多数手机提供商通常会向他们的用户提供电子邮件帐户，向该帐户发送邮件更有可能通过 SMS 将邮件重定向到他们的手机。但是，并非所有运营商都这样做，有些运营商会为此类服务收取额外费用。在这种情况下，您可以查看以下[Django 文档页面来处理此问题](http://docs.djangoproject.com/en/dev/topics/email/)

但是，如前所述，这并不是一个真正完整的解决方案，因此最简单的方法是使用 SMS 网关。大多数情况下，它们提供简单的基于 REST 的 API，用于向手机发送文本消息。API 会因运营商而异。如果您正在寻找免费和开源的解决方案（假设您想在服务器上安装实际网关），我建议您查看[Kannel 。](http://www.kannel.org/)

无论如何，我会开始尝试让它与电子邮件场景一起工作，然后如果您确实需要它，然后继续使用运营商。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-16T21:59:39.450

我在另一篇文章中回答了一个类似的问题，有点晚了。此处提供更多信息。希望能帮助到你：

我为此苦苦挣扎了一段时间，真的很喜欢 Twilio 选项。但后来我更深入地挖掘，发现有一个名为的 Google Voice API`pygooglevoice`有效。干净，简单...无需运营商查找...例如，设置[`virtualenv`](https://pypi.python.org/pypi/virtualenvwrapper)并安装`pip`：

`pip install pygooglevoice`

然后使用这样的东西：

```
from googlevoice import Voice
from googlevoice.util import input

def send(number, message):
    user = 'user@gmail.com'
    password = 'password'

    voice = Voice()
    voice.login(user, password)

    #number = input('Number to send message to: ') # use these for command method
    #message = input('Message text: ')

    voice.send_sms(number, message) 
```

请注意，我对此进行了有限的测试，所以我不确定所有的利弊。很有可能存在我尚未发现的限制。但在我玩它的那段时间里，我很高兴。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-10T05:08:19.030

看看[django-sms](http://code.google.com/p/django-sms/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-08-17T07:30:55.550

查看[twilio.com](http://twilio.com)。它们提供易于使用的 API（Python 中的几行代码）以及在用户响应时在应用程序中接收 SMS 消息和触发回调的可能性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-09-16T23:22:42.403

[http://bitbucket.org/vgavro/django-smsgate](http://bitbucket.org/vgavro/django-smsgate)显然是您正在寻找的，但您必须为您的 sms-gateway 编写自定义后端。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-29T09:05:04.277

我还找到了[TextMagic](https://www.textmagic.com/docs/api/python/)。虽然对于我居住的国家来说有点贵，但它看起来很有希望。对于您感兴趣的国家来说，它可能具有具有竞争力的价格，因此**请在提前收费之前检查价格。**

用法似乎很简单：

通过 pip 快速安装：

```
pip install textmagic 
```

发送短信似乎很简单，如下所示：

```
from textmagic.rest import TextmagicRestClient

username = "your_textmagic_username"
token = "your_apiv2_key"
client = TextmagicRestClient(username, token)

message = client.messages.create(phones="9990001001", text="Hello TextMagic") 
```

# c# - 具有完整 CSS 支持的开源 HTML 到 PDF 渲染器

> ID：430590
> 
> 赞同：63
> 
> 时间：2009-01-10T05:08:48.793
> 
> 标签：c#, html, css, pdf, pdf-generation

[在此](https://stackoverflow.com/questions/430280/render-pdf-in-itextsharp-from-html-with-css)之前，我曾询问过让 iTextSharp 从 HTML 和 CSS 表呈现 PDF，但似乎这可能是不可能的……所以我想我将不得不尝试其他方法。

是否有可以将 HTML***和***CSS 作为输入并正确呈现的开源 .NET/C# 库？

我必须重申......图书馆必须是免费的，最好是具有相当自由许可证的东西。我在这里工作基本上没有预算。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2010-09-30T19:17:39.800

这个命令行工具就是生意！ [https://wkhtmltopdf.org/](https://wkhtmltopdf.org/)

它使用 webkit 渲染引擎（用于 safari 和 KDE），我在一些复杂的网站上对其进行了测试，它比任何其他工具都要好得多。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-01-10T05:11:55.060

我一直在命令行上使用它而不是作为库使用它，但是[HTMLDOC](https://www.msweet.org/htmldoc/)给了我很好的结果，它至少可以处理*一些*CSS（我看不出有多少）。

这是一个示例命令行

```
htmldoc --webpage -t pdf --size letter --fontsize 10pt index.html > index.pdf 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-01-25T19:12:09.430

你有看到 ：

*   [http://www.xhtml2pdf.com](http://www.xhtml2pdf.com)
*   [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

它们看起来像 PrinceXML

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T13:25:12.020

你可以试试我的 wkhtmltopdf 包装器：[https](https://github.com/pruiz/WkHtmlToXSharp) ://github.com/pruiz/WkHtmlToXSharp ;)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-01-10T06:35:14.890

它不是开源的，但您至少可以获得[Prince](http://princexml.com)的免费个人使用许可证，这确实做得很好。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2010-04-27T06:04:16.417

试试 webSupergoo 的 ABCpdf。这是一个商业解决方案，不是开源的，但标准版可以免费获得，并且会按照您的要求做。

ABCpdf 完全支持 HTML 和 CSS、实时表单和实时链接。它还在呈现时使用 Microsoft XML Core Services (MSXML)，因此结果应该与您在 Internet Explorer 中看到的完全匹配。

在线演示可用于测试 HTML 到 PDF 的渲染，无需安装任何软件。见：[http ://www.abcpdfeditor.com/](http://www.abcpdfeditor.com/)

以下 C# 代码示例展示了如何呈现单页 HTML 文档。

```
Doc theDoc = new Doc();
theDoc.AddImageUrl("http://www.example.com/");
theDoc.Save("htmlimport.pdf");
theDoc.Clear(); 
```

要呈现多个页面，您需要 AddImageToChain 函数，此处记录： [http ://www.websupergoo.com/helppdf7net/source/5-abcpdf6/doc/1-methods/addimagetochain.htm](http://www.websupergoo.com/helppdf7net/source/5-abcpdf6/doc/1-methods/addimagetochain.htm)

# django - Django-Admin：作为 TextArea 的 CharField

> ID：430592
> 
> 赞同：97
> 
> 时间：2009-01-10T05:10:23.517
> 
> 标签：django, django-admin

我有

```
class Cab(models.Model):
    name  = models.CharField( max_length=20 )
    descr = models.CharField( max_length=2000 )

class Cab_Admin(admin.ModelAdmin):
    ordering     = ('name',)
    list_display = ('name','descr', )
    # what to write here to make descr using TextArea?

admin.site.register( Cab, Cab_Admin ) 
```

如何将 TextArea 小部件分配给管理界面中的“descr”字段？

**upd：**
仅 在**管理**界面中！

使用 ModelForm 的好主意。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2009-01-10T05:57:05.513

您将必须创建一个`forms.ModelForm`描述您希望该`descr`字段如何显示的内容，然后告诉`admin.ModelAdmin`使用该表单。例如：

```
from django import forms
class CabModelForm( forms.ModelForm ):
    descr = forms.CharField( widget=forms.Textarea )
    class Meta:
        model = Cab

class Cab_Admin( admin.ModelAdmin ):
    form = CabModelForm 
```

的`form`属性`admin.ModelAdmin`记录在官方 Django 文档中。这里有[一个地方可以看](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-custom-validation-to-the-admin)。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2009-01-10T17:46:50.637

对于这种情况，最好的选择可能只是在模型中使用 TextField 而不是 CharField。您还可以覆盖类的`formfield_for_dbfield`方法`ModelAdmin`：

```
class CabAdmin(admin.ModelAdmin):
    def formfield_for_dbfield(self, db_field, **kwargs):
        formfield = super(CabAdmin, self).formfield_for_dbfield(db_field, **kwargs)
        if db_field.name == 'descr':
            formfield.widget = forms.Textarea(attrs=formfield.widget.attrs)
        return formfield 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2011-06-05T20:00:40.510

Ayaz 有很多亮点，除了一点点变化（？！）：

```
class MessageAdminForm(forms.ModelForm):
    class Meta:
        model = Message
        widgets = {
            'text': forms.Textarea(attrs={'cols': 80, 'rows': 20}),
        }

class MessageAdmin(admin.ModelAdmin):
    form = MessageAdminForm
admin.site.register(Message, MessageAdmin) 
```

因此，您无需重新定义 ModelForm 中的字段来更改它的小部件，只需在 Meta 中设置小部件 dict。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-05-25T04:29:16.693

您不需要自己创建表单类：

```
from django.contrib import admin
from django import forms

class MyModelAdmin(admin.ModelAdmin):
    def get_form(self, request, obj=None, **kwargs):
        kwargs['widgets'] = {'descr': forms.Textarea}
        return super().get_form(request, obj, **kwargs)

admin.site.register(MyModel, MyModelAdmin) 
```

请参阅[ModelAdmin.get_form](https://docs.djangoproject.com/en/2.0/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_form)。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2009-01-10T06:02:15.270

`formfield`您可以使用所需的方法对自己的字段进行子类化：

```
class CharFieldWithTextarea(models.CharField):

    def formfield(self, **kwargs):
        kwargs.update({"widget": forms.Textarea})
        return super(CharFieldWithTextarea, self).formfield(**kwargs) 
```

这将影响所有生成的表单。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-07-20T18:57:40.660

如果您尝试更改 admin.py 上的 Textarea，这是对我有用的解决方案：

```
from django import forms
from django.contrib import admin
from django.db import models
from django.forms import TextInput, Textarea

from books.models import Book

class BookForm(forms.ModelForm):
    description = forms.CharField( widget=forms.Textarea(attrs={'rows': 5, 'cols': 100}))
    class Meta:
        model = Book

class BookAdmin(admin.ModelAdmin):
    form = BookForm

admin.site.register(Book, BookAdmin) 
```

如果您使用的是 MySQL DB，您的列长度通常会自动设置为 250 个字符，因此您需要运行 ALTER TABLE 来更改 MySQL DB 中的长度，以便您可以利用新的更大的 Textarea在您的 Admin Django 站点中。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-01-10T05:46:47.877

代替 a `models.CharField`，使用`models.TextField`for `descr`。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-05-17T00:26:07.947

您可以`models.TextField`为此目的使用：

```
class Sample(models.Model):
    field1 = models.CharField(max_length=128)
    field2 = models.TextField(max_length=1024*2)   # Will be rendered as textarea 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-02-17T20:52:22.193

想要扩展 Carl Meyer 的答案，直到现在它都非常有效。

我总是使用`TextField`代替`CharField`（有或没有选择）并在 UI/API 端而不是在数据库级别施加字符限制。要使其动态工作：

```
from django import forms
from django.contrib import admin

class BaseAdmin(admin.ModelAdmin):
    """
    Base admin capable of forcing widget conversion
    """
    def formfield_for_dbfield(self, db_field, **kwargs):
        formfield = super(BaseAdmin, self).formfield_for_dbfield(
            db_field, **kwargs)

        display_as_charfield = getattr(self, 'display_as_charfield', [])
        display_as_choicefield = getattr(self, 'display_as_choicefield', [])

        if db_field.name in display_as_charfield:
            formfield.widget = forms.TextInput(attrs=formfield.widget.attrs)
        elif db_field.name in display_as_choicefield:
            formfield.widget = forms.Select(choices=formfield.choices,
                                            attrs=formfield.widget.attrs)

        return formfield 
```

我有一个型号名称`Post`，其中`title`, `slug`&`state`是`TextField`s 并且`state`有选择。管理员定义如下所示：

```
@admin.register(Post)
class PostAdmin(BaseAdmin):
    list_display = ('pk', 'title', 'author', 'org', 'state', 'created',)
    search_fields = [
        'title',
        'author__username',
    ]
    display_as_charfield = ['title', 'slug']
    display_as_choicefield = ['state'] 
```

认为寻找答案的其他人可能会发现这很有用。

# c# - C# 的好面板界面组件？

> ID：430593
> 
> 赞同：3
> 
> 时间：2009-01-10T05:10:41.257
> 
> 标签：c#, vb.net, user-interface, activex

任何漂亮的**面板用户界面**组件 COM/ **ActiveX /** **C#** /VB的源代码？

就像 VS 内部的一样：

*   停靠到屏幕边缘
*   幻灯片打开/关闭（未固定）
*   引脚打开
*   在选项卡中分组

如果可能**的话，开源**/免费。

好吧，因为否则我必须自己开发一个界面系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T05:22:26.350

**[码头面板套件！](http://sourceforge.net/projects/dockpanelsuite/)**它是一个用于 .NET Windows 窗体开发的开源**对接库，它****模仿 Visual Studio .NET**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T18:45:32.717

我们使用 DevExpress (devexpress.com) 组件套件，它有一个做这类事情的对接管理器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T19:49:36.920

我刚刚评估了一些。

**Crownwoods DotNet Magic** *[（停产产品）](http://www.dotnetmagic.com/)*
这已经存在了很长时间，最初是最好的对接管理器之一，但现在它有点长，我们有很多崩溃，它不允许浮动窗口要垂直和水平停靠，并且选项卡上的工具提示有徘徊的习惯。

**Telerik**
视觉上很棒，但其中有很多错误，而且它的占用空间很大（8MB）。事件模型也有点难以使用。我将它集成到我们的应用程序中，只是为了放弃更改。

**Actipro**
我认为这是 3 个中最好的，它支持您期望的所有功能，而且我没有遇到任何错误。它看起来不像 Telerik 的东西那么好，但至少它可以正常工作，具有合理的对象模型和事件结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T05:19:55.760

[OpenTheme](http://www.codeproject.com/KB/cs/OpenTheme.aspx)在样式支持方面过于花哨，但**没有镶板。**

# c# - 在 BrowserBack 上调用的注册警报脚本

> ID：430598
> 
> 赞同：2
> 
> 时间：2009-01-10T05:15:13.273
> 
> 标签：c#, asp.net, javascript

我有一个通过 Javascript 显示警报的小类。我在一个页面上使用这个类来检查用户是否输入了有效的邮政编码。如果未输入有效的邮政编码，则会显示警报，并将页面发布回同一页面，以便他们更改。如果他们输入有效的邮政编码，他们将被重定向到另一个页面。问题是，如果他们点击浏览器上的后退按钮，无论邮政编码是否有效，都会显示警报。

这是流程：

Zip 入口页面 -> 输入 Zip -> 检查 Zip

如果 zip 有效 -> 转到 overview.aspx 如果 zip 无效，则转到 zip 入口页面

在 上`overview.aspx`，如果他们点击浏览器的后退按钮，则会显示警报。我不希望这种情况发生。下面是我为警报类提供的代码，效果很好。在其下方是单击 LinkBut​​ton 时检查并显示警报的代码。

```
protected void GotoReview(object sender, EventArgs e) {
    if (ValidateZipCode(ZipCode)) {
        Response.Redirect(string.Format("~/checkout/overview.aspx?pc={0}&zc={1}",
        ProductCode, ZipCode));
    }
    else {
        Alert.Show("The entered zip code is invalid. Please ensure the zip code is a valid zip code.");
    }
}

private bool ValidateZipCode(string zip) {
    if (zip.Length < 5 || zip.Length > 5) {
        return false;
    }
    if (!Regex.IsMatch(zip, @"^(\d{5}-\d{4})|(\d{5})$")) {
        return false;
    }
    return true;
}

public static class Alert {
    public static void Show(string message) {
        string cleanMessage = message.Replace("'", "\\'");
        string script = "<script type=\"text/javascript\">alert('" + cleanMessage + "');</script>";
        Page page = HttpContext.Current.CurrentHandler as Page;
        if (page != null && !page.ClientScript.IsClientScriptBlockRegistered("alert")) {
            page.ClientScript.RegisterClientScriptBlock(typeof(Alert), "alert", script);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-10T05:29:12.747

我认为 zipcode 的值在您重定向时会丢失（但添加的脚本保持原样）。

为什么不将验证放在 javascript 中（在具有邮政编码输入字段的页面上）？
它看起来不像，验证需要来自服务器端的东西（因为你正在做长度检查和正则表达式检查）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T06:36:21.677

我可以确认邮政编码已正确存储 ( `Session["zc"]`)，并已从 .aspx 发送到 overview.aspx `zip.aspx`。为简化起见，当用户打开`overview.aspx`并单击浏览器上的后退按钮时，就会执行警报脚本。我尝试在调试器中放置一个断点，但它永远不会被调用。所以我现在唯一的假设是注册脚本在使用后退按钮时被调用？

我不明白为什么脚本在*返回**时*执行，即使 zip 是有效的。:\

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T12:09:19.943

when you click the LinkButton browser requests the same page (zip code entry page) and then gets redirected to overview.aspx (if everything's fine). But when you click Back button, it seems that browser performs previous request - validates zip code, not displays zip code entry page.

In any case, it's better to perform such a check on client, as stated shahkalpesh

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T12:17:54.263

Back buttons work differently on all browsers, some browsers will retrieve the newest version, others will simply return what the latest on disk copy is.

The best thing to do here is probably to bust out the old javascript and add an OnSubmit to the form to check for proper validations, jquery would be a great tool in this instance.

With this method, no matter the browsers back strategy, your alert will not be called unless they click on the submit button.

# c# - signedXml.CheckSignature 总是返回 false

> ID：430599
> 
> 赞同：2
> 
> 时间：2009-01-10T05:15:28.593
> 
> 标签：c#, cryptography, encryption

我正在努力使这种加密解密正常工作。我正在使用Wolfwyrd 提供的[这个类和](http://www.chaosink.co.uk/files/code/encryptionutils.zip)[这个](https://stackoverflow.com/questions/359342/an-effective-method-for-encrypting-a-license-file)说明。

下面是代码：

```
RSACryptoServiceProvider rsaKey = EncryptionUtils.GetRSAFromSnkFile(@"c\:a.snk");

XmlDocument xmlDoc = new XmlDocument();
xmlDoc.PreserveWhitespace = true;
xmlDoc.LoadXml("<foo />");

SignXml(xmlDoc, rsaKey); //http://msdn.microsoft.com/en-us/library/ms229745.aspx

bool result = VerifyXml(xmlDoc, rsaKey); //http://msdn.microsoft.com/en-us/library/ms229950.aspx

System.Diagnostics.Debug.Write(result); //false 
```

返回`false`。请注意，我使用了相同的 snk 文件，以及我试图验证的相同的加密 xml 文档，为什么它会返回`false`？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-07T06:19:35.003

谢谢你们的回复。我最终只是创建了一个私钥/公钥对并使用它来签署文档，公钥与应用程序一起使用。如果我足够早地看到这个，我可能会使用它，但我相信其他人会发现它很有用。再次感谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-20T22:26:18.090

尝试将 Wolfwyrd 代码中 GetRSAFromSnkBytes(byte[]) 的实现更改为：

```
private static RSACryptoServiceProvider GetRSAFromSnkBytes(byte[] snkBytes)
{
  if (snkBytes == null)
    throw new ArgumentNullException("snkBytes");

  RSAParameters param = GetRSAParameters(snkBytes);

  RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
  rsa.ImportParameters(param);
  return rsa;
} 
```

我真的不明白他为什么首先生成一个密钥，然后将 snk-key 导入到容器中，而不是从一个空的密钥容器开始。

您也可以考虑只使用 .NET 来生成您的密钥，而不是使用 snk 格式。

如果您将示例中的第一行更改为

```
RSACryptoServiceProvider rsaKey = new RSACryptoServiceProvider(1024); 
```

您的代码也可以正常工作（您可以自己序列化生成的密钥）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T14:46:34.957

Good spot, left over cruft from the project I pulled it from. Library has been updated.

# xml - TClientDataset - XML 映射

> ID：430601
> 
> 赞同：1
> 
> 时间：2009-01-10T05:16:59.887
> 
> 标签：xml, delphi, delphi-2009, tclientdataset

我正在尝试将 TClientDataSet 中的数据保存到 XML 文件中，但它不喜欢我的某些字段。帮助文件说以两种方式之一创建定义：使用我的 \bin 文件夹中的 xmlmapper.exe 文件或使用 IDOMDocument 接口。

问题是，xmlmapper.exe 不存在，并且 IDOMDocument 是 Delphi 2009 发布时没有为其编写文档而发布的那些烦人的结构之一。因此，我必须在不存在的 EXE 或没有文档且没有指示哪些对象实现它或如何创建它们的接口之间进行选择。

有谁知道在这种情况下我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T11:13:26.950

如果您使用的是 delphi 的 XML 序列化不支持的字段，您需要创建自己的函数来加载/保存 XML。

这并不难，如果你这样做，该代码可以扩展为其他序列化格式（JSON、CSV、XLSX、...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T06:29:11.237

XMLMapper.exe**在**我的\bin 目录中，它也在我的工具菜单下（虽然我可能已经将它添加到那里......）你有什么版本的Delphi？我查看了[特征矩阵](http://www.codegear.com/article/38548/images/38548/Delphi2009FeatureMatrix.pdf)，我没有看到任何看起来不在*所有三个版本*中的东西。您可能会再次运行您的安装，看看您是否跳过了它的安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T06:32:32.760

您可能会查看一些第 3 方 Delphi 书籍（Marco Cantu 有一些），看看它们是否记录了 IDOMDocument。您也可以[四处寻找一些示例](http://www.google.com/search?q=Delphi+example+of+IDOMDocument)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-09-15T06:37:01.210

第三种选择是使用 OmniXML 或 NativeXml 之类的 XML 库，简单地遍历所有记录并将字段写入 XML，并使用自己编写的代码。

这样做的好处是可以完全控制所有字段类型和特定字段的转换。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-02-14T01:49:32.227

宣言：

```
void __fastcall SaveToFile(const System::UnicodeString FileName = System::UnicodeString(), TDataPacketFormat Format = (TDataPacketFormat)(0x0));
Mem1->SaveToFile("C:\wateverfile.xml",dfXMLUTF8); 
```

或者

```
Mem1->SaveToFile("C:\wateverfile.xml",dfXML); 
```

或者

```
Mem1->SaveToFile("C:\wateverfile.cds",dfBinary); //for a binary save 
```

*   `dfBinary`：信息以二进制格式编码。
*   `dfXML`：信息以 XML 编码，扩展字符使用转义序列编码。
*   `dfXMLUTF8`：信息以 XML 编码，扩展字符使用 UTF8 表示。

# php - 超链接有效 - 带有提交按钮的 Html 表单无效

> ID：430602
> 
> 赞同：0
> 
> 时间：2009-01-10T05:17:36.843
> 
> 标签：php, forms, http-headers, hyperlink, download

我有一个 PHP 脚本，它推送标题以允许下载文件。此脚本在通过超链接或通过使用链接的浏览器调用时可以正常工作。这是它的样子：

```
<a href="download.php?file=test.mp3&properFilename=Testing File">Download</a> 
```

我希望这是一个按钮（sbumit），所以我这样做了：

```
<form action="download.php?file=test.mp3&properFilename=Testing File" method="get">
<input type="submit" value="Download Audio" name="download"/>
</form> 
```

但是，这不起作用。当我点击它时。它会启动下载对话框，但文件名是空的。它将文件名显示为“.mp3”（不带引号）！通过超链接的相同链接显示了确切的文件名“测试文件”。为什么是这样？？以下是相关的 PHP 代码段：

```
$filename = '../'.$_GET['file'];
$properFilename = $_GET['properFilename'].'.mp3';

header("Content-Disposition: attachment; filename=\"".basename($properFilename)."\";" );
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".filesize($filename));
readfile("$filename");
exit(); 
```

**谢谢你的帮助**。这让我一整天都在发疯！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T05:24:31.883

我认为它已被 urlencoded 的操作 url，并且未发送硬编码的 GET 参数。

您可以尝试将操作 url 简单地设置为 download.php 并有两个包含“file”和“properFilename”参数的隐藏字段，如下所示：

```
<form action="download.php" method="GET">
  <input type="submit" value="Download Audio" name="download"/>
  <input type="hidden" name="file" value="test.mp3" />
  <input type="hidden" name="properFilename" value="Testing File" />
</form> 
```

或者您可以使用输入类型 =“按钮”，即使没有表单：

```
<input type="button" 
      onclick="location.href='download.php?file=test.mp3&properFilename=Testing File';" 
      value="Download"/> 
```

或图像按钮：

```
<a href="download.php?file=test.mp3&properFilename=Testing File">
   <img src="IMAGE_BUTTON_HERE" />
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T13:30:14.617

除了像CMS建议的那样使用 <input type='button'> 之外，您还可以使用 button 元素（这实际上是语义正确的元素，因为您不在表单中）

```
<button onclick="document.location = 'bla.php?f=vars'">Download</button> 
```

更好的做法当然是将 onclick 事件从按钮中移出到单独的 javascript 文件中。

# sql - SQL 查询受限与调用整行时的性能优势？

> ID：430605
> 
> 赞同：3
> 
> 时间：2009-01-10T05:20:55.853
> 
> 标签：sql, linq-to-sql

通过在查询中只选择必填字段而不是查询整行，有多少性能优势？例如，如果我有一行 10 个字段但只需要显示 5 个字段，是否值得只查询这 5 个字段？如果需要，此限制与稍后必须返回并在 sql 查询中添加字段的风险相比，性能优势是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-10T06:03:04.333

您需要考虑的不仅仅是额外的数据方面。选择所有列将否定覆盖索引的用处，因为需要对聚集索引（或表）进行书签查找。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-10T05:30:28.330

这取决于选择了多少行，以及这些额外字段消耗了多少内存。例如，如果存在多个文本/blob 字段，或者选择了许多行，它的运行速度可能会慢得多。

以后添加字段有什么风险？修改查询以适应不断变化的需求是开发过程的一个自然部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-10T05:39:41.557

我知道在 select 语句中明确命名列的唯一好处是，如果您的代码使用的列被重命名，您的 select 语句将在您的代码之前失败。如果您的 select 语句在 proc 中，则更好，您的 proc 和 DB 脚本将无法编译。如果您使用 VS DB 版本之类的工具来编译/验证 DB 脚本，这将非常方便。否则性能差异可以忽略不计。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-10T05:46:26.113

相对于 SQL 请求本身的大量开销，检索到的字段数量是对性能的二阶影响——退出进程、通过网络到另一台主机，并且可能到该主机上的磁盘需要比铲几个额外的数据字节。

显然，如果额外的字段包含一个兆字节的 blob，那么等式就会出现偏差。但我的经验是，事务开销与检索的实际数据相同或更大。我模糊地记得很多年前，一个“空”的 NOP TNS 请求在网络上大约有 100 个字节。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-10T05:48:58.603

如果 SQL 服务器不是您查询的同一台机器，那么选择额外的列通过网络传输更多数据（这可能是一个瓶颈），不要忘记它必须从磁盘读取更多数据，分配更多内存来保存结果。

没有一件事本身会导致问题，但是将它们加起来会导致性能问题。当您有大量查询或数据时，每一点都会有所帮助。

我猜的风险是您必须稍后将字段添加到查询中，这可能意味着更改代码，但是您通常必须添加更多代码来处理额外的字段。

# c# - 在 WPF 中呈现日志视图的快速方法是什么？

> ID：430609
> 
> 赞同：2
> 
> 时间：2009-01-10T05:29:07.287
> 
> 标签：c#, wpf

我正在编写一个需要类似日志的视图的应用程序（类似于 IM 客户端在对话中显示消息的方式），每秒可能有很多更新。速度在这里是个问题；由于大量传入事件而导致应用程序锁定是一个可能的问题。我需要选择和基本的文本格式，所以手动渲染可能会变得相当复杂，如果可能的话我想避免它。我还想底部锚定滚动条，即如果它在底部，则在添加新项目时保持在底部。什么是实现这一点的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T07:03:19.187

你可以很容易地在 WPF 中实现它。

1.  创建 Log 实体的 ObservableCollection 并绑定到 ListBox。
2.  为 ListBox.ItemTemplate 提供一个 DataTemplate。

*实时运行时，您需要 UI 端或数据端虚拟化查看我的 PaginatedObservableCollection，以便 DataVirtualization 自动运行[。](http://jobijoy.blogspot.com/2008/12/paginated-observablecollection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T05:52:57.067

我认为您应该看看 ListView/ListBox 控件，它们支持 UI 虚拟化并提供您正在寻找的功能。您还可以通过数据虚拟化/延迟加载来提高性能 - 即不要在内存中保存不可见的项目并按需加载所需的数据

# c# - 获取火狐网址？

> ID：430614
> 
> 赞同：6
> 
> 时间：2009-01-10T05:40:04.363
> 
> 标签：c#, .net, firefox

如何使用 .NET 2.0 windows/console 应用程序从正在运行的 firefox 实例获取 url？C# 或 VB 代码都可以。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-03-16T08:12:40.580

基于 Rob Kennedy 的答案并使用[NDde](http://www.codeplex.com/ndde)

```
using NDde.Client;

class Test
{
        public static string GetFirefoxURL()
        {
            DdeClient dde = new DdeClient("Firefox", "WWW_GetWindowInfo");
            dde.Connect();
            string url = dde.Request("URL", int.MaxValue);
            dde.Disconnect();
            return url;
        }
} 
```

注意：这非常慢。在我的电脑上需要几秒钟。结果将如下所示：

```
"http://stackoverflow.com/questions/430614/get-firefox-url","Get Firefox URL? - Stack Overflow","" 
```

有关浏览器 DDE 的更多信息，请[点击此处](http://support.microsoft.com/kb/160957)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-10T07:10:30.250

对于大多数浏览器，包括 Internet Explorer、Navigator、Firefox 和 Opera，支持和认可的方法是[使用 DDE](http://lists.elists.org/pipermail/delphi/2004-October/026023.html)。它们中的主题名称都是`WWW_GetWindowInfo`; 只有目标窗口的名称不同。但是，这种技术对您来说会很困难，因为 .Net 不支持 DDE。如果您能找到解决该限制的方法，那么您将万事俱备。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-10T06:28:42.987

似乎这可能很困难，这里有一些讨论：[http ://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/c60b1699-9fd7-408d-a395-110c1cd4f297/](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/c60b1699-9fd7-408d-a395-110c1cd4f297/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T05:48:36.937

您可能需要查看 WatiN 的源代码。他们的下一个版本是开源的并支持 Firefox，所以我想这样做的功能就在其中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-03-10T01:42:56.403

使用 MozRepl：[https](https://github.com/bard/mozrepl/wiki/) ://github.com/bard/mozrepl/wiki/ + mozRepl .NET 连接器：[http ://mozreplconnector.codeplex.com/releases/view/17398](http://mozreplconnector.codeplex.com/releases/view/17398)

```
 var connect = new MozReplConnectDotNet.MozReplConnect(4242);
  connect.Connect();
  Console.WriteLine(connect.SendRecieve("gBrowser.currentURI.spec")); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-01T14:07:16.150

```
 [DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr FindWindowEx(IntPtr parentHandle,
    IntPtr childAfter, string className, IntPtr windowTitle);

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern int SendMessage(IntPtr hWnd,
        int msg, int wParam, StringBuilder ClassName);

    private static string GetURL(IntPtr intPtr, string programName, out string url)
    {
        string temp=null;
        if (programName.Equals("chrome"))
        {
            var hAddressBox = FindWindowEx(intPtr, IntPtr.Zero, "Chrome_OmniboxView", IntPtr.Zero);
            var sb = new StringBuilder(256);
            SendMessage(hAddressBox, 0x000D, (IntPtr)256, sb);
            temp = sb.ToString();
        } 
        if (programName.Equals("iexplore"))
        {
            foreach (InternetExplorer ie in new ShellWindows())
            {
                var fileNameWithoutExtension = Path.GetFileNameWithoutExtension(ie.FullName);
                if (fileNameWithoutExtension != null)
                {
                    var filename = fileNameWithoutExtension.ToLower();
                    if (filename.Equals("iexplore"))
                    {
                        temp+=ie.LocationURL + " ";
                    }
                }
            }
        }
        if (programName.Equals("firefox"))
       {
            DdeClient dde = new DdeClient("Firefox", "WWW_GetWindowInfo");
            dde.Connect();
            string url1 = dde.Request("URL", int.MaxValue);
            dde.Disconnect();
            temp = url1.Replace("\"","").Replace("\0","");
        }
        url = temp;
        return temp;
    } 
```

请执行以下操作以在您的项目中从 VS.NET 添加参考 > Com > Microsoft.Internet.Controls 来运行此代码

从[http://ndde.codeplex.com/](http://ndde.codeplex.com/)下载DdeClient 类的 bin 并将其添加到您的项目中

如果有任何问题请告诉我

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-10T10:07:38.830

穷人的解决方案，如果其他任何事情都失败了：激活 Firefox 窗口，发送 Ctrl+L（激活地址栏），发送 Ctrl+C（复制选择，即 URL，到剪贴板）并读取剪贴板。

这种方法有很多问题（其中如果用户在电脑前，它会对用户产生奇怪的影响）所以它只是一个备份解决方案......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-14T14:58:50.947

试试这个：

```
 //get all running process of firefox
        Process[] procsfirefox = Process.GetProcessesByName("firefox");
        foreach (Process firefox in procsfirefox)
        {
            //the firefox process must have a window
            if (firefox.MainWindowHandle == IntPtr.Zero)
            {
                continue;
            }
            AutomationElement sourceElement = AutomationElement.FromHandle(firefox.MainWindowHandle);

            AutomationElement editBox = sourceElement.FindFirst(TreeScope.Descendants, new PropertyCondition(AutomationElement.NameProperty, "Search with Google or enter address"));             
            // if it can be found, get the value from the editbox
            if (editBox != null)
            {
                ValuePattern val = ((ValuePattern)editBox.GetCurrentPattern(ValuePattern.Pattern));

                Console.WriteLine("\n Firefox URL found: " + val.Current.Value);
            }

            //-----------------------------find titlebar element for site title---------------------------------// 

            AutomationElement elmTitleBar = sourceElement.FindFirst(TreeScope.Descendants,
            new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.TitleBar));
            if (elmTitleBar != null)

                Console.WriteLine("\n Firefox TitleBar found: " + elmTitleBar.Current.Name);
            } 
```

完整源代码：[https ://github.com/Moeedahmad899/GetFirefoxURL](https://github.com/Moeedahmad899/GetFirefoxURL)

# c# - 在 ASP.NET 中创建验证码的代码？

> ID：430615
> 
> 赞同：5
> 
> 时间：2009-01-10T05:40:28.573
> 
> 标签：c#, .net, asp.net-2.0

我想创建一个类似于[http://www.gigbooks.com/getcaptcha.php](http://www.gigbooks.com/getcaptcha.php)这个的验证码。但它在 PHP 中的任何人都提供我在 ASP.NET 中创建相同的代码？

我正在使用 ASP.NET 2.0 (C#)

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-10T05:44:56.240

对于 reCAPTCHA 的编程 API，从[重新捕获主页](https://www.google.com/recaptcha/intro/)开始。

如果您只想隐藏联系电子邮件，请查看 Google 的[reCAPTCHA mailhide](https://www.google.com/recaptcha/admin#mailhide)。

# .net - MFC 与 CLR？

> ID：430616
> 
> 赞同：2
> 
> 时间：2009-01-10T05:44:43.590
> 
> 标签：.net, c++, visual-studio, mfc, clr

在 Visual Studio C++ 项目中，MFC 会比使用 CLR 更快吗？我会特别使用2008。

哦，我问的原因是因为我有 .NET 的经验，但没有那么多的 MFC 经验。我了解 MFC 是什么，但从未真正使用过它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T05:50:05.373

如果您指的是开发时间，如果您有 .NET 方面的经验并且运行时环境要求不是问题，那么您可能最好进行某种 CLR 项目。MFC 的学习曲线相当陡峭，而且 .NET 体验很容易跨语言翻译。

如果您谈论的是运行时速度，MFC（本机代码）几乎肯定会更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-10T05:48:23.363

如果您谈论的是启用 /clr 的 Visual C++ 项目，那么肯定没有 /clr 的项目会更快。但是，在某些情况下（某些情况：并非全部），没有 /clr 的 Visual C++ 项目可能会超过 Visual C# 项目，这主要是因为可以在 CLR 层进行优化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-10T05:49:27.947

在这种情况下，我可以说 - 使用你所知道的。
.net（winforms）与 MFC 相比并不小（除非您正在做一些需要平台支持的事情）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-09-06T06:00:18.273

我建议同时使用两者。我认为 MFC 核心和 CLR 模块是很好的应用程序结构。

# php - 为活动页面的菜单项提供“选定”ID 以更改 CSS 的最有效方法是什么？

> ID：430648
> 
> 赞同：1
> 
> 时间：2009-01-10T06:01:05.133
> 
> 标签：php, css, xhtml, menu

假设我有 5 页：A、B、C、D 和 E。我还有一个水平菜单，每个项目都有浅灰色背景。

每个菜单项都有一个：悬停，它给它一个中灰色背景，但我希望活动页面有一个黑色背景，所以我定义

```
#black {
    background-color: #000;
} 
```

现在，当用户在 B.php 上时，我希望 B 菜单项带有#black id。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-10T06:12:06.827

一条建议; 不要定义你的风格“是”什么，定义你的风格“做什么”。不要称它为#black，而是称它为.current。

另一件需要注意的是，ID 用于识别唯一元素（#header、#footer、#main、#sidebar、#navbar 等）。将可重复项定义为当前项应该使用一个类来完成，因为您可以将多个类与一个元素关联，但只有一个 ID。同样，该 ID 保留用于唯一命名。

```
.current
{
    background-color: #000;
} 
```

要将其与页面相关联，您可以在页面上设置一个变量来指示其所在的页面，然后使用 if 块或 switch case 将样式添加到与当前页面相关的元素：

**（伪代码，我的PHP语法生疏了）**

```
$current_page = "B"

// -- snip --

<ul>
    <li id="navigation-a" <? if ($current_page == "A") { ?> class="current" <? } ?> >Page A</li>
    <li id="navigation-b" <? if ($current_page == "B") { ?> class="current" <? } ?> >Page B</li>
</ul> 
```

或者，您可以尝试从请求中的页面 url 派生 $current_page 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-10T06:56:31.947

当我可以将 PHP 用于项目（不是由 CMS 提供支持）时，我通常使用 PHP 数组来构造菜单。从数组中添加、移动或删除页面非常容易，并且通过让 PHP 将其作为真正的菜单输出，您不必一遍又一遍地重写相同的代码。

要指定应将哪个页面视为活动页面，您可以使用类似于以下的代码：

```
$currentPage = "b.php"; 
```

请注意，我故意使用完整的文件名。我会简短地解释为什么。

由于每个菜单项至少需要两个变量（名称、url），因此我在菜单数组中为每个条目使用了一个*数组*。一个例子：

```
$menu = array(array("a.php", "A Title"), array("b.php", "B Title"), array("c.php", "C Title")); 
```

现在，为了让 PHP 发挥它的魔力，我使用了一个 foreach 循环，该循环遍历每个项目并以我想要的任何方式显示它。

```
foreach($menu as $num => $options){
  $s = ((isset($activePage) && $options[0] == $activePage) OR ($options[0] == basename($_SERVER['PHP_SELF'])) ? " class=\"active\"" : "";
  echo "\n\t<li{$s}><a href=\"" . $options[0] . "\">" . $options[1] . "</a></li>";
} 
```

您可以扩展此概念以包括目标、标题标签等。

这种方式的美妙之处在于你不必为每个项目都写那么多。您可以复制/粘贴所有内容，然后更改 $menu 数组中的小部分，如果需要（即对于子菜单项）指定 $currentPage。如果未指定 $currentPage，它将回退到检查当前页面是什么（通过 $_SERVER['PHP_SELF']）并以此为基础激活状态。

我希望我解释得足够好，并且它足以供您使用！

（小免责声明，我*刚*醒来并从头开始编写此代码。虽然这个概念有效——我已经使用它多年了——但我可能在这里和那里打错了字。如果是这种情况，请道歉！）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-10T06:11:20.523

`<body>`您可以为与当前页面相关的元素分配一个类或 id 。然后使用此样式设置每个页面的本地导航等。给每个导航列表项一个与链接指向的内容相关的类。

IE。

```
ul.navigation a:link, ul.navigation a:visited {background-color:#eee}
ul.navigation a:active, ul.navigation a:hover, ul.navigation a:focus {background-color:#ccc}

body.about-us .navigation li.about-us-link a:link, body.about-us .navigation li.about-us-link a:visited {background-color:#000} 
```

# c++ - 不能按值复制的指针容器类

> ID：430672
> 
> 赞同：2
> 
> 时间：2009-01-10T06:31:01.123
> 
> 标签：c++, templates

我的项目需要一个智能指针，它可以作为参数发送到多个方法。我已经从 boost中检查了*auto_ptr*和*shared_ptr 。*但是IMO，这不适合我的要求。以下是我的发现

auto_ptr ：当传递给另一个方法时，所有权将被转移，当该方法的作用域结束时，底层指针将被删除。我们可以通过引用传递 auto_ptr 来解决这个问题，但是没有编译时机制来确保它总是通过引用传递。如果用户错误地忘记传递引用，就会出现问题。

boost::shared_ptr ：这看起来很有希望，并且可以满足我的需要。但我觉得这对我的项目来说太过分了，因为它是一个非常小的项目。

所以我决定编写一个简单的模板化指针容器类，它不能按值复制，并注意删除底层指针。这里是

```
template <typename T>
class simple_ptr{
public:
    simple_ptr(T* t){
       pointer = t;
    }
    ~simple_ptr(){
       delete pointer;
    }
    T* operator->(){
       return pointer;
    }
private: 
    T* pointer;
    simple_ptr(const simple_ptr<T>& t);
}; 
```

这个实现正确吗？我已将复制构造函数设为私有，因此当有人尝试按值传递它时，编译器会发出警报。

如果指针被偶然删除，对析构函数的删除操作将抛出断言错误。我该如何解决这个问题？

我对 C++ 很陌生，非常感谢您的建议。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-10T08:27:24.260

请按照 Martin York 的建议使用[boost::scoped_ptr<>](http://www.boost.org/doc/libs/1_36_0/libs/smart_ptr/scoped_ptr.htm)，因为它：

*   完全符合您的要求（这是一个不可复制的指针）
*   没有高于标准 C 指针的开销
*   由超级智能 C++ 向导精心打造，以确保其行为符合预期。

虽然我看不出你的实现有任何问题（在应用了 ChrisW 建议的更改之后），但 C++ 有很多黑暗的角落，如果有一些你、我和其他人未能做到的晦涩的角落案例，我不会感到惊讶点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-10T08:11:54.697

你所做的是 boost::scoped_ptr

另请阅读 j_random_hacker 的评论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-10T06:51:35.967

> 这个实现正确吗？我已将复制构造函数设为私有...

您可以对赋值运算符执行相同的操作：

```
simple_ptr& operator=(const simple_ptr<T>& t); 
```

取消引用运算符的 const 版本也可能有用，并且智能指针通常也定义另一种类型的取消引用运算符：

```
const T* operator->() const { return pointer; }
const T& operator*() const { return *pointer; }
T& operator*() { return *pointer; } 
```

> 如果指针被偶然删除，对析构函数的删除操作将抛出断言错误。我该如何解决这个问题？

你的意思是，如果我这样做：

```
//create instance
Car* car = new Car;
//assign to smart ptr
simple_ptr<Car> ptr(car);
//explicit delete
delete car;
//... assertion when ptr is destroyed ... 
```

防止这种情况的一种方法（我不知道这是否是一种*好*`private`方法）是将 T 类的构造函数和/或析构函数和/或删除运算符声明为，并说这`simple_ptr`是`friend`T 类的（这样只有`simple_ptr`类才能创建和/或销毁和/或删除 T 的实例）。

> 在 T 类中将新运算符标记为私有似乎是不可能的，因为我必须修改将与 simple_ptr 一起使用的所有类

是的，这是真的：要立即执行我上面的建议，您需要修改类定义。

如果您的问题是“如何在不修改类定义的情况下使双重删除成为不可能？” 那么我认为答案是：

*   你不能：要小心应用程序代码（使用这些类）
*   您可以： 通过提供您自己的堆管理器，即您自己的全局运算符 new 和全局运算符 delete 的实现，并在您的`smart_ptr`代码中询问您的堆管理器以查看此指针的此化身是否仍被分配，然后再删除它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T06:51:34.140

要回答你的第一个问题，你能得到的最好的保证是围绕它实施一个测试工具来完成一些简单的任务，并确保你得到你期望的行为。对我来说，这比一些随机阅读它的人的意见要好得多。

至于您的第二个问题，您可以通过在第一次删除后将**指针设置为某个标记值来解决****删除**引发断言错误的问题。就像是：

 **```
if (pointer) {
    delete pointer;
    pointer = NULL;
} else {
    error("Attempted to free already freed pointer.");
} 
```

您将在这里遇到的问题是您的重载 -> 运算符返回指针的值，这意味着无论您将其返回给谁也可以调用**delete**，导致我上面建议的检查不起作用。例如：

```
simple_ptr<int> myPtr = someIntPointer;
...
delete myPtr.operator->(); /* poof goes your pointered memory region */ 
```

我可能会建议您不要依赖**operator->**重载，而只要求那些使用此类的人在将该值传递回用户之前调用一个在内部取消引用指针的方法。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-10T12:46:17.543

你有两个选择：

1.  `boost::scoped_ptr`j_random_hacker 已经详细说明了，因为它是不可复制的（不像 shared_ptr 那样共享所有权）和不可移动的（不像 auto_ptr 那样转移所有权。auto_ptr 有一个复制构造函数，但是那个不复制。它移动原始指针到*这个）。`boost::scoped_ptr`正是您所需要的。
2.  `const auto_ptr`不允许转让所有权。并通过引用 const ( `auto_ptr<T> const&`) 来获取您的参数。如果函数的编写者改为按值接受，如果您尝试传递一个 const auto_ptr，它仍然无法工作，因为它的复制构造函数需要一个非常量 auto_ptr。

在 C++1x 之前，boost::scoped_ptr 是满足您需求的最佳选择，如果您必须使用官方标准的东西（阅读[此](http://www.gotw.ca/publications/using_auto_ptr_effectively.htm)内容），则为 const auto_ptr。在 C++1x 中，您可以将`std::unique_ptr`其用作 auto_ptr 的更好替代方案，因为您必须明确说明何时要转移所有权。尝试复制它会导致编译时错误。unique_ptr 在[这个](https://stackoverflow.com/questions/395123/raii-and-smart-pointers-in-c#395519)答案中有一些详细说明。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-10T12:52:00.887

正如已经提到的，您应该使用 boost::scoped_ptr<> 。

不过一般来说，如果你需要让一个类不可复制，你应该从 boost::noncopyable 继承，即

```
#include <boost/utility.hpp>

class myclass : boost::noncopyable
{
    ...
}; 
```

这完成了使其不可复制的所有工作，并且很好地自我记录。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-10T07:50:23.413

我有时看到使用简单的 DISABLE_COPY 宏：

```
#define DISABLE_COPY(Class) \
        Class(const Class &); \
        Class &operator=(const Class &); 
```

因此，将复制构造函数和赋值运算符定义为任务私有是一种常见的做法。

# c - 为什么 pcap_next_ex 的第三个参数是不兼容的指针类型？

> ID：430678
> 
> 赞同：0
> 
> 时间：2009-01-10T06:40:28.873
> 
> 标签：c, pointers, pcap

免责声明：这是针对家庭作业的，但问题不在于作业，而在于一般语法怪异。

我试图在一个更大的程序的上下文中使用 libpcap，但是当我尝试获取每个数据包的数据包头和数据时，gcc 抱怨 pcap_next_ex 的第三个参数是不兼容的指针类型。这是一些示例代码，可以查看我在说什么：

```
#include <stdio.h>
#include <stdlib.h>
#include <pcap.h>

int main()
{
    pcap_t *pcap;
    char pcapErr[PCAP_ERRBUF_SIZE];
    struct pcap_pkthdr *pktHeader;
    u_char *pktData;

    pcap = pcap_open_offline("somefile.pcap", pcapErr);
    if (pcap == NULL)
    {
        fprintf(stderr, "pcap_open_offline failed: %s\n", pcapErr);
        exit(EXIT_FAILURE);
    }

    while (pcap_next_ex(pcap, &pktHeader, &pktData) == 1)
    {
        // do things here
    }

    pcap_close(pcap);

    return EXIT_SUCCESS;
} 
```

手册页表明 pcap_next_ex() 的原型是：

```
int pcap_next_ex(pcap_t *p, struct pcap_pkthdr **pkt_header, const u_char **pkt_data) 
```

我传递不兼容的指针类型到底是什么？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-10T07:14:38.837

将 pktData 的声明更改为：

```
const u_char *pktData; 
```

gcc 应该停止抱怨。

# asp.net-mvc - MVC 存储库模式：创建模型类

> ID：430681
> 
> 赞同：4
> 
> 时间：2009-01-10T06:46:10.843
> 
> 标签：asp.net-mvc, model-view-controller, repository-pattern

查看 Conery 的店面，我不明白他为什么使用 Linqs 自动生成的类（即 Order 类），然后他定义了另一个 Order 类，它不是部分类。何时使用存储库模式应该手动创建类，而完全忽略 Datacontext？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T06:54:32.793

Rob 在他的一个节目中回答了这个问题。

他使用 POCO 类来了解所有数据访问类。例如，当他将 LINQ-to-SQL 更改为 NHibernate 时，他需要做的就是更改过滤器中的“映射”，而他不必对业务逻辑进行任何更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-08T07:35:51.653

如果您不使用中间类将前端与 linq 类分离，则无法控制数据上下文是否会被垃圾收集。通常对于实例的数据上下文类型，您希望在使用完它们后立即删除它们。以下是您可能希望使用 linq to sql 上下文执行此操作的方法：

```
using (MyDataContext data = new MyDataContext())
{
    SomeThing thing = data.Things(t => t.ID == 1);
    return thing;
}
... the MyDataContext instance is gone 
```

使用“使用”块，您将在最后一个“}”处处理 MYDataContext 的实例。但是，如果你这样做，你会得到一个错误，然后尝试使用“事物”，因为数据上下文实例已经消失了。如果您*不*处理数据上下文，它就会一直徘徊，直到最终被垃圾收集。

如果您引入一个中间类以将 linq to sql 代码与调用应用程序分离，您仍然可以摆脱数据上下文实例并返回相同的数据（只是在不同的对象中）：

```
using (MyDataContext data = new MyDataContext())
{
    SomeThing thing = data.Things(t => t.ID == 1);
    SometThingElse otherThing = ConvertSomethingToSomethingElse(thing);
    return otherThing;
}
... the MyDataContext instance is gone 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-10T06:54:07.287

他在最近的一个视频中说，他不喜欢 LINQ to SQL 进行映射的方式。我同意，尽管我认为这完全是矫枉过正。

我想说只要您坚持存储库模式本身，您就不会破坏任何主要的设计模式。我认为拥有2套classa是一个选择问题，尽管很糟糕，但仍然是一个选择。

# windows - Windows 上 Apache<2.2 的带宽限制（mod_throttle？）

> ID：430687
> 
> 赞同：0
> 
> 时间：2009-01-10T06:55:04.913
> 
> 标签：windows, apache, bandwidth, throttling

有谁知道用于 Apache 2.2 或更低版本的 mod_throttle 的 Windows 版本？

或者也许是另一种限制带宽的方法。我需要将油门降低到 64k 以进行本地速度测试演示

最好是 Apache 而不是浏览器插件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-10T07:24:55.383

我不熟悉 mod_throttle，但我刚试过[Traffic Shaper XP](http://bandwidthcontroller.com/trafficShaperXp.html)，它低至 33K（它可能会更低）。我实际上在另一个堆栈溢出[帖子](https://stackoverflow.com/questions/39107/tool-for-degrading-my-network-connection)中“找到”了您问题的答案。过去我需要一个这样的工具，但从未找到一个好的工具（但这个看起来不错）。最后一点，我不想在我的开发机器上弄乱我的网络堆栈，所以我使用了[Virtual PC](http://www.microsoft.com/downloads/details.aspx?FamilyID=21eabb90-958f-4b64-b5f1-73d0a413c8ef&displaylang=en) Win XP 映像（我用这些来测试各种版本的 IE）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-21T09:27:22.483

哟可以尝试 mod_bandwith 解释[here](http://www.securityhacking.info/2010/01/limit-download-speed-in-apache-2-2-windows/)。

# css - 使用 CSS Hacks 时如何使用 Safari 和 Opera 导入 CSS？

> ID：430689
> 
> 赞同：0
> 
> 时间：2009-01-10T06:56:42.353
> 
> 标签：css

我在这里有一个艰难的，但我认为好处会很大......

我将以下 CSS hack 与 PHP 一起使用。下面文件中的 U 变量是一个常量，之前定义（在我包含此文件之前）为 URL，例如[http://example.com/](http://example.com/)。P 常量变量定义为物理文件路径，如 /var/www/example.com/。（我必须使用 U 和 P 进行绝对路径的原因是因为我通过 Apache RewriteRule 使用了漂亮的 URL，它弄乱了相对路径。）

如您所见，我使用“link rel”技术来加载默认样式表，一个用于 IE，另一个用于 IE6。但是对于 Safari 和 Opera，我尝试了 linkrel CSS hack 技术，但它失败了——当我认为它可能在 linkrel 标签上失败时，FF 正在加载和解释 Opera 和 Safari 样式表。因此，我不得不将其切换为内联 CSS 并使用 @import url() 调用，但失败了，因为 Opera 和 Safari 不会解释 @import url() 调用。因此，我别无选择，只能将上下文切换回 PHP 并使用 require() 语句内联加载它。

好吧，下面文件中的当前排列是可行的，但这意味着 Opera 和 Safari 的样式表正在加载所有浏览器（它只是不被 Opera 和 Safari 解释）。

我想知道如何让链接或 @import 为 Opera 和 Safari 工作，而不是。

```
<?php ?>
<? /*
***************************************************
  DEFAULT STYLING (AND FIREFOX)
***************************************************  
*/ ?>
<link rel="stylesheet" media="all" href="<?= U ?>css/default.css"/>
<style type='text/css'>

<? /*
***************************************************
  SAFARI & GOOGLE CHROME STYLING (WEBKIT STYLING)
***************************************************  

NOTE A LINKREL WILL GET INTERPRETED BY FF IF YOU DO IT LIKE THIS...

<link rel="stylesheet" media="screen and (-webkit-min-device-pixel-ratio:0)" 
href="<?= U ?>css/safari.css"/>

...SO THAT CAN'T WORK. ALSO, IF YOU USE AN @import url('<?= U ?>css/safari.css'); TO
REPLACE WHERE I HAVE THE require() BELOW, THAT WON'T WORK EITHER BECAUSE 
OPERA AND SAFARI DON'T SEEM TO UNDERSTAND THE @import DIRECTIVE IN CSS.

*/ ?>
@media screen and (-webkit-min-device-pixel-ratio:0){
<? require(P . 'css/safari.css'); ?>
}

<? /*
***************************************************
  OPERA STYLING
*************************************************** 
*/ ?>
@media all and (-webkit-min-device-pixel-ratio:10000), not all and (-webkit-min-device-pixel-ratio:0){
<? require(P . 'css/opera.css'); ?>
}
</style>

<? /*
***************************************************
  IE (ALL) STYLING
***************************************************  
*/ ?>
<!--[if IE]>
<link rel="stylesheet" media="all" href="<?= U ?>css/ie.css"/>
<![endif]-->

<? /*
***************************************************
  IE6 STYLING
***************************************************  
*/ ?>
<!--[if lte IE 6]>
<link rel="stylesheet" media="all" href="<?= U ?>css/ie6.css"/>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T13:34:15.967

我将假设您已经尝试为 webkit/ff/opera 使用相同的样式表，并且这是最后的手段，因为您正在做一些奇怪的事情？

无论如何，Opera 确实支持`@import`. （必须，@import 用于[6.79% 的样式表](http://dev.opera.com/articles/view/mama-css-syntax/#atrule)。）

此外，Opera CSS 之前的媒体查询**永远不会**在 Opera 中运行，因为您`(-webkit-min-device-pixel-ratio:10000)`在规则中使用。根据[媒体查询规范错误处理规则](http://www.w3.org/TR/css3-mediaqueries/#error)：“当指定媒体功能之一未知时，用户代理将忽略媒体查询。”。我怀疑 Opera 是否尊重 -webkit 供应商的媒体功能。

有关 Opera 支持和不支持的完整列表，请查看[Opera 功能图表](http://www.opera.com/docs/specs/presto211/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-18T19:46:10.910

`@import`没有工作，因为不能`@import`进入`@media`规则。[`@import`s 必须在所有其他规则之前](http://www.w3.org/TR/css3-cascade/#at-import)。

您必须将媒体查询放在`@import`自身上：

```
@import url('<?= U ?>css/safari.css') screen and (-webkit-min-device-pixel-ratio:0); 
```

此外，[Firefox 还不支持媒体查询（它们将在 3.1 中出现）](https://developer.mozilla.org/En/CSS/Media_queries)。我认为这意味着它现在只是忽略元素`media`属性中的未知媒体类型`link`并愉快地加载文件。

你必须小心。媒体查询不适用于浏览器嗅探。您对 Opera 的媒体查询有效这一事实很可能意味着一旦支持媒体查询，它最终也将适用于 Firefox。否则它将在 Opera 的下一个版本中停止工作。

# c# - 为什么我的抽象基本控制器中的用户（如 User.Identity.Name）为空？

> ID：430704
> 
> 赞同：25
> 
> 时间：2009-01-10T07:27:26.173
> 
> 标签：c#, asp.net-mvc, controller, user-controls, httpcontext

我在问一个相关的问题，但把标题弄乱了，没有人能理解。由于我现在能够更准确地提出问题，因此我决定将其重新表述为一个新问题并关闭旧问题。对此感到抱歉。

所以我想要做的是将数据（存储在数据库中的我的自定义用户昵称）传递给 LoginUserControl。这个登录是通过 Html.RenderPartial() 从母版页呈现的，所以我真正需要做的是确保每次调用都存在 ViewData["UserNickname"]。但我不想在每个控制器的每一个动作中填充 ViewData["UserNickname"]，所以我决定使用[这种方法](http://www.asp.net/Learn/mvc/tutorial-13-cs.aspx)并创建一个抽象的基础控制器来为我完成工作，如下所示：

```
public abstract class ApplicationController : Controller
    {
        private IUserRepository _repUser;

        public ApplicationController()
        {
            _repUser = RepositoryFactory.getUserRepository();
            var loggedInUser = _repUser.FindById(User.Identity.Name); //Problem!
            ViewData["LoggedInUser"] = loggedInUser;
        }
    } 
```

这样，无论我的派生控制器做什么，用户信息都已经存在。

到现在为止还挺好。现在解决问题：

我不能调用 User.Identity.Name 因为`User`已经为空。在我的所有派生控制器中并非如此，因此这是特定于抽象基础控制器的。

我在代码中的另一个位置通过 FormsAuthentication 设置 User.Identity.Name ，但我认为这不是问题 - afaik User.Identity.Name 可以为空，但不是用户本身。

在我看来，HttpContext 不可用（因为也是 null ;-)，而且我在这里遗漏了一个简单但重要的观点。谁能给我一些提示？我真的很感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-01-19T11:42:58.310

这个问题的答案其实很简单。由于 Raimond 指出的原因，我无法从构造函数中执行代码，但我可以在构造函数之外执行。

所以我所做的是在基本控制器类中覆盖 onActionExecuting() （我为它创建了一个自定义属性，但只是覆盖该方法也应该有效），然后从那里进行我的用户查找。

现在它按预期工作，我没有重复的代码。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-11-26T19:14:57.790

User 属性直到 Controller 被实例化后才被分配，但您可以通过以下方式从构造函数获得早期访问权限：

```
System.Web.HttpContext.Current.User 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-01-10T09:34:38.820

我的猜测是 Controller 的基本构造函数没有填充 User，但只有稍后为 Controller 设置 ControllerContext 时才知道。您应该在有关 MVC 应用程序生命周期的文档中检查这一点（[这里](http://www.techtribe.com/viewBlogEntry.html?blogEntryId=68c62b34-47bd-102b-9fc2-000f1f68a9bf)的可能会这样做，尽管它可能有点过时，因为它是预览版），或者只是检查 MVC 的源代码。

从我拥有的 MVC 代码（也是预览版，但这应该没问题）：（在控制器中）

```
 public IPrincipal User {
            get {
                return HttpContext == null ? null : HttpContext.User;
            }
        } 
```

...

```
public HttpContextBase HttpContext {
        get {
            return ControllerContext == null ? null : ControllerContext.HttpContext;
        }
    } 
```

我没有在代码中看到默认构造函数的实现。这将证明 ControllerContext 在构造时为空。

所以你应该在其他地方执行你的代码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-10T09:01:06.097

你能用类似的东西抓住这个：

```
HttpContext currentContext = HttpContext.Current;
string userName = currentContext.User.Identity.Name; 
```

还是 HttpContext 总是空的？

你能通过抽象类的构造函数设置httpContext吗？并以这种方式使用它？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-10T15:54:16.743

谢谢雷蒙德。我太累了，看不到明显的东西。@Keeney：是的，上下文始终为空。雷蒙德指出了原因。无论如何，谢谢，我也不明白为什么:-)

我当前的工作解决方案（尽管不是我想要的）是我用来装饰所有控制器操作的属性。这是实现：

```
public class MasterPageDataAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            base.OnActionExecuting(filterContext);
            IUserRepository _repUser = RepositoryFactory.getUserRepository();
            IPrincipal siteUser = filterContext.Controller.ControllerContext.HttpContext.User;
            User loggedInUser = null;

            if (siteUser == null || siteUser.Identity.Name == null)
            {
                //do nothing
            }
            else
            {
                loggedInUser = _repUser.findUserById(siteUser.Identity.Name);
            }
            filterContext.Controller.ViewData["LoggedInUser"] = loggedInUser ?? new User { Nickname = "Guest" };
        }
    } 
```

我将研究如何以遵循 DRY 原则的方式执行该代码，因为为此使用属性肯定意味着重复自己。也许某种拦截器（[有趣的想法](http://weblogs.asp.net/fredriknormen/archive/2007/11/19/asp-net-mvc-framework-creating-a-iroutehandler-which-will-support-interceptors.aspx)）或钩子可能会有所帮助。

为此干杯。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-11T22:23:14.383

我在基本控制器实现中这样做，它按预期工作。

```
public abstract class BaseController : Controller
{
    public bool LoggedOn
    {
        get { return User.Identity.IsAuthenticated; }
    }
} 
```

这总是对我返回 true 或 false 所以`User != null`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-17T02:55:37.610

to Masterfu：我在您的帮助下做了类似的事情，希望对后来的访客有所帮助。就我而言，我需要为不同的用户创建控制器的存储库，但在控制器的构造函数中，（主要）用户尚未准备好。所以我为控制器创建了一个属性：

```
[CreateRepositoryByUser]
public class MFCController : Controller
{
    protected MFCRepository _repository
    {
        get { return ViewData["repository"] as MFCRepository; }
    }
... 
```

_repository 确实不是控制器的私有变量，而是由属性创建的东西：

```
public class CreateRepositoryByUser : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        CreateRepository(filterContext);
    }

    public static void CreateRepository(ActionExecutingContext filterContext)
    {
        if (filterContext.Controller.ViewData["repository"] == null)
        {
            filterContext.Controller.ViewData["repository"] =
                MFCRepository.CreateMFCRepository(filterContext.Controller.ControllerContext.HttpContext.User);
        }
    }
} 
```

我将创建存储库的代码放在单独的方法中，以防其他属性在触发此属性之前可能想要使用（主要）用户。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-16T15:08:26.033

在 MVC 管道中从构造函数调用为时过早。

将代码移至 OnAuthorization，您将在参数中获得授权用户。为我工作！

从你的例子我会做这样的事情：

```
public abstract class ApplicationController : Controller {
    private IUserRepository _repUser;

    protected override void OnAuthorization(AuthorizationContext filterContext)
    {
        _repUser = RepositoryFactory.getUserRepository();
        var loggedInUser = _repUser.FindById(filterContext.HttpContext.User.Identity.Name); //Problem!
        ViewData["LoggedInUser"] = loggedInUser;
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-28T23:23:46.710

`IPrincipal`如果您需要`User`在构造函数中注入。

```
 // startup.cs
 // Inject IPrincipal
 services.AddTransient<IPrincipal>(provider => provider.GetService<IHttpContextAccessor>().HttpContext.User); 
```

然后`IPrincipal`在你的构造函数中添加。请注意，它保证`ClaimsPrincipal`与 ASPNET 一起使用 - 因为就是这样`HttpContext.User`。

[类似的问题](https://stackoverflow.com/a/54411397/16940)

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2020-09-14T07:52:48.223

```
Select Project -> press F4 -> anonymous login -> false  | windows authentication - > True 
```

# php - 如何从 PDF 文件中提取图像？

> ID：430707
> 
> 赞同：21
> 
> 时间：2009-01-10T07:30:04.407
> 
> 标签：php, perl, pdf

我需要从服务器上的 PDF 文件中提取所有图像。我不想要 PDF 页面，只想要原始大小和分辨率的图像。

我如何使用 Perl、PHP 或任何其他基于 UNIX 的应用程序（我将使用 PHP 的 exec 函数调用）来做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-01-10T15:03:07.223

[pdfimages](http://linuxcommand.org/man_pages/pdfimages1.html)就是这样做的。它是 poppler-utils 和 xpdf-utils 软件包的一部分。

从手册页：

> Pdfimages 将可移植文档格式 (PDF) 文件中的图像保存为可移植像素图 (PPM)、可移植位图 (PBM) 或 JPEG 文件。
> 
> Pdfimages 读取 PDF 文件，扫描一页或多页 PDF 文件，并为每个图像写入一个 PPM、PBM 或 JPEG 文件 image-root-nnn.xxx，其中 nnn 是图像编号，xxx 是图像类型（.ppm、.pbm、.jpg）。
> 
> 注意：pdfimages 从 PDF 文件中提取原始图像数据，而不执行任何额外的转换。由 PDF 内容流完成的任何旋转、剪切、颜色反转等都将被忽略。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-10T09:32:14.550

关于 Perl，你检查过[CPAN](http://search.cpan.org)吗？

*   [PDF::GetImages](http://search.cpan.org/search?query=PDF-GetImages&mode=module) - 从 pdf 文档中获取图像
*   [PDF::OCR](http://search.cpan.org/search?query=PDF-OCR&mode=module) - 从 pdf 文件中获取 ocr 和图像
*   [PDF::OCR2](http://search.cpan.org/search?query=PDF-OCR2&mode=module) - 从 pdf 中提取所有文本和所有图像 ocr

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-22T12:13:04.100

pdfimages 很好，因为它不会重新编码，而只会提取 jpeg。但是有一个错误：

pdfimages 来自包“poppler-utils”或来自更大的“xpdf-utils”。至少在 Ubuntu 中已经预装了“poppler-utils”。poppler-utils 10.0.3 (Ubuntu 9.04 Jaunty) 中的 pdfimages 仍然没有对提取“.jpg”的选项“-j”做出反应。它总是提取“.ppm”。

作为一种解决方法，您可以将“poppler-utils”替换为“xpdf-utils”： $ sudo apt-get install xpdf-utils

亲切的问候，

+++ 奥利弗

# linux - 如何擦除控制台应用程序（Linux）中的打印字符？

> ID：430713
> 
> 赞同：15
> 
> 时间：2009-01-10T07:42:01.293
> 
> 标签：linux, console, character, erase

我正在创建一个需要进度条的小型控制台应用程序。就像是...

```
Conversion: 175/348 Seconds   |==========          |  50% 
```

我的问题是，你如何删除已经打印到控制台的字符？当我达到第 51 个百分比时，我必须从控制台中删除这一行并插入一个新行。在我目前的解决方案中，这就是发生的事情......

```
Conversion: 175/348 Seconds   |==========          |  50%
Conversion: 179/348 Seconds   |==========          |  52%
Conversion: 183/348 Seconds   |==========          |  54%
Conversion: 187/348 Seconds   |===========         |  56% 
```

我使用的代码是...

```
print "Conversion: $converted_seconds/$total_time Seconds   $progress_bar  $converted_percentage%\n"; 
```

我正在使用 PHP 在 Linux 中执行此操作（只有我会使用该应用程序 - 所以请原谅语言选择）。因此，该解决方案应该可以在 Linux 平台上运行——但如果您有一个跨平台的解决方案，那就更可取了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-10T07:50:19.827

我认为您无需为语言选择道歉。PHP 是一种非常适合控制台应用程序的语言。

试试这个：

```
<?php
for( $i=0;$i<10;$i++){
  print "$i \r";
  sleep(1);
}
?> 
```

"\r" 将用新文本覆盖该行。要创建一个新行，你可以使用“\n”，但我猜你已经知道了。

希望这可以帮助！我知道这适用于 Linux，但我不知道它是否适用于 Windows 或其他操作系统。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-05-08T17:47:15.793

要擦除以前打印的字符，您有三个选项：

*   `echo chr(8) . " ";`回显后面的字符，并将光标向后移动一位，然后空格覆盖字符。您可以`chr(8)`连续使用多次来向后移动多个字符。

*   `echo "\r";`将光标返回到当前行的开头。您现在可以用新文本替换该行。

*   第三个选项是使用 ANSI 转义码设置光标位置的行和列，然后打印替换字符。它可能不适用于所有终端：

```
 function movecursor($line, $column){
      echo "\033[{$line};{$column}H";
  } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-10T08:37:39.917

\r 成功了。

为了将来参考，\b 在 Linux 中的 PHP 中不起作用。我很好奇 - 所以我也用其他语言做了一些实验（我在 Linux 中做了这个 - 我不知道在 Windows/Mac 中结果是否相同）..

\b 适用于...

*   Perl
*   红宝石
*   Tcl - 带代码`puts -nonewline "Hello\b"`

\b 不工作

*   PHP - 代码`print "Hello\b";`打印出来`Hello\b`
*   Python 代码`print "Hello\b"`打印出来`Hello<new line>`。结果相同`print "Hello\b",`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-10T07:45:19.383

我不确定它在 Linux 中是否相同，但在 Windows 控制台应用程序中，您可以打印 \r 并且光标将返回到该行的第一个左侧位置，允许您覆盖右侧的所有字符。

您可以使用 \b 移回单个字符，但由于您要更新进度条，所以使用 \r 比打印 \bx 次数更简单。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-14T13:37:02.293

这似乎是一个很老的话题，但我会把我的 5 放进去。

```
for ($i; $i<_POSITION_; $i--) {
   echo "\010"; //issue backspace 
} 
```

前段时间在网上找到的，可惜不记得在哪里了。所以所有的学分都归原作者所有。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-10T07:44:46.157

要擦除以前打印的字符，我在它之后打印一个退格键： print "a" print "\b"

*什么都不*打印（实际上它会打印，然后是退格键，但你可能不会注意到它）

# erlang - 学习二郎？speedbump 线程，常见，小问题

> ID：430726
> 
> 赞同：10
> 
> 时间：2009-01-10T07:58:23.180
> 
> 标签：erlang

我只想知道当你刚接触 Erlang 时，你和最终解决方案之间的所有小问题。

例如，这是我遇到的第一个减速带：

1.  如果您在多个线程中生成，请使用 control_process(Socket, Pid)。正确的数据包到正确的线程。
2.  您要开始与另一台服务器通话吗？记住 net_adm:ping('car@bsd-server')。在外壳中。否则无法进行任何沟通。
3.  Timer:sleep(10)，如果你什么都不想做。调试时总是有用的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-26T19:03:05.860

*   Learning to browse the standard documentation

    Once you learn how the OTP documentation is organised it becomes much easier to find what you're looking for (you tend to need to learn which applications provide which modules or kinds of modules).

    Also just browsing the documentation for applications is often quite rewarding - I've discovered lots of really useful code this way - `sys`, `dbg`, `toolbar`, etc.

*   The difference between shell erlang and module erlang

    Shell erlang is a slightly different dialect to module erlang. You can't define module functions (only funs), you need to load record definitions in order to work with records (`rr/1`) and so on. Learning how to write erlang code in terms of anonymous functions is somewhat tricky, but is essential for working on production systems with a remote shell.

    Learning the interaction between the shell and {start,spawn}_link ed processes - when you run some shell code that crashes (raises an exception), the shell process exits and will broadcast exit signals to anything you linked to. This will in turn shut down that new gen_server you're working on. (*"Why does my server process keep disappearing?"*)

*   The difference between erlang expressions and guard expressions

    Guard expressions (when clauses) are not Erlang expressions. They may look similar, but they're quite different. Guards cannot call arbitrary erlang functions, only guard functions (`length/1`, the type tests, `element/2` and a few others specified in the OTP documentation). Guards succeed or fail and don't have side effects. Erlang expressions on the other hand can do what they like.

*   Code loading

    Working out when and how code upgrades work, the incantation to get a gen_server to upgrade to the latest version of a callback module (`code:load(Mod), sys:suspend(Pid), sys:change_code(Pid, Mod, undefined, undefined), sys:resume(Pid).`).

    The code server path (`code:get_path/0`) - I can't count how many times I ran into undefined function errors that turned out to be me forgetting to add an ebin directory to the code search path.

*   Building erlang code

    Working out a useful combination of emake (`make:all/0` and `erl -make`) and gnu make took quite a long time (about three years so far :).

    My current favourite makefiles can be seen at [http://github.com/archaelus/esmtp/tree/master](http://github.com/archaelus/esmtp/tree/master)

*   Erlang distribution

    Getting node names, dns, cookies and all the rest right in order to be able to `net_adm:ping/1` the other node. This takes practise.

*   Remote shell IO intricacies

    Remembering to pass `group_leader()` to `io:format` calls run on the remote node so that the output appears in your shell rather than mysteriously disappearing (*I think the SASL report browser `rb` still has a problem with sending some of its output to the wrong node when used over a remote shell connection*)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-27T15:14:55.930

*   调试很困难。我所知道的就是在我的代码中调用“error_logger:info_msg”。
*   文档参差不齐——它们是正确的，但非常简洁。
*   这是我自己的错，但是：我在理解 eunit 之前就开始编码，所以我的很多代码都比应有的更难测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-25T17:21:17.283

将它集成到 msvc 6 中，这样我就可以使用编辑器，并在输出窗口中查看结果。

我创建了一个工具，

**命令**- erlc 的路径

**参数**- +debug_info $(FileName)$(FileExt)

**初始目录**- $(fileDir)

选中**使用输出窗口**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T08:42:04.120

**控制进程（）**

如果您在多个线程中生成，请使用 control_process(Socket, Pid)。正确的数据包到正确的线程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-11T08:42:35.960

**net_adm:ping()**

您要开始与另一台服务器通话吗？记住 net_adm:ping('car@bsd-server')。在外壳中。否则无法进行任何沟通。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-11T08:43:43.853

**定时器：睡眠（）**

暂停 X 毫秒。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-24T02:01:08.470

让我花最多时间思考的事情就是完全围绕函数调用和消息传递来构建我的代码的想法。其余部分要么只是从那里掉出来（生成，远程节点），要么感觉就像你必须用任何新语言（语法，stdlib）学习的常见东西。

# php - 性能基准：PHP 生成的内容 VS。基于 AJAX 的 javascript 和 DOM

> ID：430733
> 
> 赞同：3
> 
> 时间：2009-01-10T08:09:14.437
> 
> 标签：php, javascript, ajax, soap

对于以下非常简单的任务：**从数据库中查询产品列表并将其显示在网页上，**请 考虑 2 种设置：

**Setup1**：PHP 脚本查询。所有内容都建立在服务器上，整个页面都返回给客户端。

**Setup2**：使用 AJAX 请求内容的静态 HTML“页面框架”。接收到的内容在客户端使用 Javascript 进行解析，并使用 innerHTML 或类似方法呈现。

当然，只有当您有页面、类别和标签供客户端用户选择时，第二个设置才有意义。

我需要**比较**这两者，至少通过以下方式：

*   提供内容所需的时间
*   用户体验（setup1 整体交付，setup2 分“两部分”交付）
*   可扩展性 - 当我每天有 100,000 个查询时，设置如何比较

对此问题的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-10T14:27:40.507

您可能会发现以下问题很有帮助：**[Smarty Vs。Javascript/AJAX](https://stackoverflow.com/questions/415699/smarty-vs-javascript-ajax)**

我在回答这个问题时提出了几点：

*   **您应该使用服务器端脚本来显示加载页面时已知的任何数据**。在这种情况下，您知道应该显示产品列表。应该显示问题的答案这一事实在页面加载时是已知的。

*   **您应该只使用 AJAX 调用来加载页面加载时未知的*动态***数据。例如，当您单击 Stack Overflow 上的问题或答案下的“评论”链接时。您想要查看特定问题的评论这一事实在页面加载时是未知的。

*   **访问您网站的核心功能*不需要*Javascript**。

*   **当 Javascript 被禁用时，您应该优雅地降级功能**。例如，Stack Overflow 在禁用 Javascript 的情况下工作得很好。您无法访问实时 Markdown 预览或动态徽章通知，但核心功能仍然完好无损。

*   **对服务器生成页面的单个 HTTP 请求的加载速度明显快于加载进行五到六个额外 AJAX 调用的页面的请求**，尤其是在高延迟连接（如蜂窝网络）上。请参阅 Yahoo**[加快网站速度的最佳实践](http://developer.yahoo.com/performance/rules.html)**。

您应该将 Javascript 视为可能无法启用的附加功能，而不是应该用于构建您网站的关键部分的东西。这条规则有例外。如果您想进行某种分页，在其中单击“下一页”按钮并且仅更改产品列表，那么 AJAX 可能是正确的选择。但是，您应该确保没有 Javascript 的用户不会被排除在查看整个列表之外。

**[没有比网页开发者不遵守KISS 原则](http://en.wikipedia.org/wiki/KISS_principle)****而无法访问页面更令人沮丧的了**。[以Friendly's Restaurants](http://www.friendlys.com)为例。我在商场的时候想看看[他们的菜单](http://www.friendlys.com/menu/index.aspx)，所以我在我的 iPhone 上加载了他们的网站，结果发现如果没有 Flash，你实际上无法获得任何关于餐厅的有意义的信息。很高兴有精美的菜单和到处飞扬的甜点，但最后，我只是想看看他们菜单上的项目。我不能这样做，因为他们需要 Flash。在这种情况下，服务的优雅降级会有所帮助。

没有 Javascript 就无法有效地完成网络上的某些事情。显示产品列表*不是*其中之一。如果您仍然不确定，请查看其他流行网站的操作方式。我想你会发现大多数成功的、精心设计的网站都遵循上面列出的指导方针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T08:20:46.987

当只有一小部分页面发生变化时，AJAX 可能是更好的选择。

我建议从服务器端版本开始，然后在此基础上构建 AJAX。通过这种方式，您还将获得一个无需 javascript 的网站版本，如果您关心在搜索引擎中被索引，您可能仍然需要它。

但首先要专注于创建一个可以正常工作的页面——你以后总是可以优化它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T13:56:45.797

客户端的性能有很多因素。当时正在运行什么，什么浏览器，内容是什么，页面的CSS是什么，浏览器的缓存有多满，安装了什么插件，网络上发生了什么等等。只要记住当你在玩数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T14:06:26.667

除非实现很糟糕，否则 AJAX 应该会赢得胜利。其中的好处是：

*   由于客户端的并行请求而产生的并行性（即，您可以使用多个服务器 CPU 内核来服务于一个服务网页的部分内容，这使用 PHP 无法轻松完成）

*   只刷新页面的一小部分更快（传输的数据更少，生成......）

*   它的扩展性要好得多，因为服务器要做的工作更少（尤其是如果您可以将生成 html 所需的一些处理卸载到客户端而不是仅仅交付它）

[像http://www.startpagina.nl/](http://www.startpagina.nl/)这样的动态页面在最近的 AJAX 流行之前就已经成功地做到了这一点（交付了 1 个静态文件，所有自定义都在客户端完成 - 无论如何我上次检查）。

当然，您可以用任何一种方法搞砸事情，使其变得比另一种慢。

# fluent-nhibernate - 读取 FluentNHibernate API 生成的 Mapping Xml 文件

> ID：430734
> 
> 赞同：3
> 
> 时间：2009-01-10T08:10:36.040
> 
> 标签：fluent-nhibernate

如何读取 Fluent NHibernate API 生成的映射 XML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T08:32:59.460

配置 FluentNhibernate 后

```
Configuration config = new Configuration();
config.Configure();
PersistenceModel persistenceModel = new PersistenceModel ();
persistenceModel.Configure (config); 
```

您可以使用

```
persistenceModel.WriteMappingsTo (path); 
```

# php - 跨 PHP、MySQL 等管理日期的最佳方法是什么？

> ID：430736
> 
> 赞同：5
> 
> 时间：2009-01-10T08:12:05.930
> 
> 标签：php, mysql, date, time, timezone

我的服务器在达拉斯。我在纽约市.. PHP 和 MySQL 都有用于设置时区的配置变量。

我如何让他们一起工作？我应该在 MySQL 中存储哪些日期？如何让 PHP 根据用户的偏好来处理更改日期？

请记住：我认为我从来没有让 PHP 明确设置日期，它总是在查询中使用“NOW()”。但是我预见到有必要这样做。这将如何完成？

我希望SO的经验可以帮助我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-10T09:33:35.360

到处使用 Unix 时间。它使用 UTC，因此每个时区都相同。日期方法通常使用它们拥有的时区信息转换为它并从它返回，因此您将拥有一个正确的时间。

或者，您可以仅使用 Unix Time 将时间从一台计算机传输到另一台计算机（例如从 DB 到运行 PHP 的服务器或 JavaScript 客户端）。每种语言都有可以转换成它和从它转换成它的功能。对于 MySQL，它是：

```
UNIX_TIMESTAMP(date)
FROM_UNIXTIME(unix_timestamp) 
```

这样，您可以在数据库和日志中正确格式化您的时间，但在任何地方仍然有正确的本地时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T14:01:46.707

对于环境，我更喜欢使用原生形式的日期和时间，即 PHP 中的 Unix 时间戳和 MySQL 中的 DATE/TIME/DATETIME/TIMESTAMP 字段。[`FROM_UNIXTIME()`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_from-unixtime)我使用and将这两个值转换为另一个值[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_unix-timestamp)。我更喜欢这个而不是 Unix 时间戳，因为本地日期/时间更容易阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T08:22:57.047

在 GMT 中记录您的日期（零偏移），然后根据当地时区计算偏移（例如，EST 为 +6，因此您将在 GMT 上增加 6 小时）。

检查该功能的[日期文档](http://ca.php.net/date)`date_default_timezone_set()`。

请记住，在写入数据库时​​，您必须更改时区，存储日期，然后再更改回来。同样，当您检索日期时，不要忘记添加时区偏移量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T12:31:50.397

mysql-server 以独立于时区的格式 (UTC) 存储日期。
但在存储日期之前，它将使用其时区进行转换。

您可以更改每个连接的 mysql 时区 *1：

```
mysql_query('SET time_zone = "'.$timezone.'"'); 
```

您还可以更改每个脚本的时区。

```
date_default_timezone_set($timezone); 
```

如果将它们设置为相同的时区“2009-01-10 13:30:00”对 mysql 和 php 意味着相同的事情。

但请记住，两台服务器具有不同的内部时钟值，因此如果您想根据当前时间生成时间戳。在 mysql 或 php 中执行此操作。

*1) MySQL 时区支持可能需要额外的配置。检查[手册](http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html)

# sockets - 在两个单独的套接字连接之间进行连接

> ID：430745
> 
> 赞同：0
> 
> 时间：2009-01-10T08:28:52.167
> 
> 标签：sockets, proxy, port

我编写了监听端口 8000 和 8001 的 ac# 应用程序。

有两个不同的应用程序连接到 8000 和 8001。我使用了套接字数组，以便接受任意数量的连接。

我是否能够以某种方式附加一个 8000 连接和 8001 连接，以使连接在 8000 的应用程序发送的任何数据都将被应用程序在 8001 接收，反之亦然。这个概念被称为什么？抱歉，如果这是一个非常基本的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T08:34:30.797

这听起来有点像代理或隧道。

[http://en.wikipedia.org/wiki/Proxy_server](http://en.wikipedia.org/wiki/Proxy_server)

在这种情况下，是的，这是完全可能的。

但是，如果您在两个端口上允许多个连接，您如何知道哪个连接与哪个连接？假设在 8000 上存在连接 A、B 和 C，在 8001 上存在连接 X、Y 和 Z。来自 A 的数据到 Y，反之亦然，还是来自 B 的数据到 Y，反之亦然？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T11:45:00.290

在 Java 中有[PipedInputStream](http://java.sun.com/j2se/1.5.0/docs/api/java/io/PipedInputStream.html)和[PipedOutputStream](http://java.sun.com/j2se/1.5.0/docs/api/java/io/PipedOutputStream.html)。也许 C# 库提供了类似的东西？

# php - PHP / Apache阻塞每个请求？

> ID：430750
> 
> 赞同：1
> 
> 时间：2009-01-10T08:37:04.007
> 
> 标签：php, apache

好的，这可能是一个愚蠢的问题，但这里有。前几天，当我在 PHP 中使用不同的 HTML 到 PDF 转换器时，我注意到了一些事情。我尝试过的一个（dompdf）花了很长时间才能在我的 HTML 上运行。最终它耗尽了内存并结束了，但当它仍在运行时，我的其他 PHP 脚本都没有响应。就好像一个请求阻塞了整个 Web 服务器。

现在我假设这不可能是正确的，或者我应该在某个地方设置一些东西来控制这种行为。有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-10T09:43:41.640

您是否为每个脚本打开了会话？:) 他们可能会重复使用相同的会话，并且会阻塞直到会话被最后一个请求释放......所以他们基本上等待对方完成（在你的情况下是长 -运行pdf生成器）。这仅适用于您使用相同的浏览器。

提示，不确定为什么要将 html 转换为 pdf，但您可以查看 FOP [http://xmlgraphics.apache.org/fop/](http://xmlgraphics.apache.org/fop/)以生成 PDF。我正在使用它并且效果很好..而且速度很快:) 虽然它确实有它的怪癖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T08:45:50.587

可能是您尝试的所有脚本都在同一个应用程序池中运行。（至少，这就是它在 IIS 中的名称。）

然而，另一种解释是，一些浏览器将通过单个连接对请求进行排队。这让我在过去有些困惑。如果您的网络浏览器正在等待 yourdomain.com/script1.php 的响应，并且您打开另一个窗口或选项卡到 yourdomain.com/script2.php，则该请求将不会发送，直到第一个请求收到回复，*看起来*像你的整个网络服务器都挂了。一个简单的方法来测试这是否正在发生在两个不同的浏览器上尝试两个请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T09:16:51.307

听起来服务器只是不堪重负并且负载过大而无法完成请求。将 HTML 文件转换为 PDF 是一个相当复杂的过程，因为 PHP 脚本必须有效地提供与 Web 浏览器相同的功能并使用 PDF 绘图功能呈现 HTML。

我建议您将 HTML 拆分为单独的较小文件，或者直接通过 PHP 独立于服务器将脚本作为计划任务运行。

# lucene - 所有这些词的特点

> ID：430751
> 
> 赞同：0
> 
> 时间：2009-01-10T08:37:28.700
> 
> 标签：lucene

我有一个在 Lucene 中索引的“描述”字段。该字段包含一本书的描述。如何使用 BooleanQuery 类在此字段上实现“所有这些单词”功能？例如，如果用户输入“畅销书”，那么它应该返回在其描述中包含所有这些词的书籍。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T09:27:19.817

有两个部分可以让这个工作：

1.  您需要正确分析传入的文档，以便单独对单个单词进行标记和索引
2.  用户查询需要被标记化，并且标记与`AND`操作符结合。

对于 #1，[Lucene 附带](http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc/)了许多分析器和标记器- 查看`org.apache.lucene.analysis`包中的内容。有许多不同语言、词干、停用词等的选项。

对于#2，Lucene 附带了很多查询解析器，主要在`org.apache.lucene.queryParser`包中。`MultiFieldQueryParser`可能对您有好处：要求每个术语都存在，只需致电

```
QueryParser.setDefaultOperator(QueryParser.AND_OPERATOR) 
```

[Lucene in Action](https://rads.stackoverflow.com/amzn/click/com/1932394281)尽管有几个旧版本，但对于分析和查询解析的更多信息仍然准确且非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T09:16:40.947

我相信如果您通过添加所有查询部分（每个术语一个）

```
BooleanQuery.add(Query, BooleanClause.Occur) 
```

并将第二个参数设置为常量`BooleanClause.Occur.MUST`，那么你应该得到你想要的。等效的查询语法是“+term1+term2 +term3 ...”。

# java - jnlp中的jar资源不是由同一个证书签名的

> ID：430755
> 
> 赞同：17
> 
> 时间：2009-01-10T08:43:01.263
> 
> 标签：java, rcp, java-web-start, jnlp

我已经使用 web start 工作了几年，并且有签署 jar 的经验以及其他方面的经验。我第一次尝试使用 web start 部署 RCP 应用程序，虽然我实际上已经使用相同的证书签署了所有 jar，但我不断收到此错误：'jnlp 中的 jar 资源没有由相同的证书签名'

有没有其他人遇到过这个？如果是这样，关于如何解决的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-10T08:53:02.553

当我在检查罐子后遇到类似问题时，结果发现某些第 3 方罐子是由其他人签名的。

您应该为其他证书签名的 jar 创建一个单独的 jnlp 文件，并从您的 jnlp 文件中读取此 jnlp：

```
<resources>
  ...
  <extension name="other" href="other.jnlp"/>
</resources> 
```

[在这里](http://mindprod.com/jgloss/jnlp.html#MULTIPLE)或[这里](http://www.java.net/blogs/kirillcool/archive/deployment/index.html)你可以找到一个例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-10T14:25:25.957

这可能是您用作库的已签名 jar 中的陈旧清单条目。我通过 webstart 遇到了 jogl 的这个问题。试试这个：

解压所有 jars，清除所有 META-INF 目录，jar 并再次签名。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-07T18:26:24.350

我发现 JNLP/Webstart 不喜欢通过 jarsigner.exe 对给定 JAR 进行多个签名/签名。如果像 BouncyCastle（预先签名的）这样的 JAR 使用贵公司的证书再次签名，目视检查让我相信新的证书和签名在 JAR 中正确执行。但是 JNLP 可能只读取 META-INF 中的第一个（按字母顺序排列的？）签名，因此抱怨它与您的其他 JAR 不匹配（每个 JAR 上只有一个 Corporate 签名）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-07T23:09:17.507

The following script lists serial number of the RSA certificate in each jar in /some/lib directory and helps to find jars that are signed by the wrong certificate:

```
for f in $( find /some/lib -type f -name '*.jar' )
do 
   serial=$( unzip -p $f 'META-INF/*.RSA' | 
             openssl pkcs7 -inform der -print -noout |
             grep --max-count=1 serialNumber | cut -d: -f2- | tr -d ' ' )
   printf "%40s: %s\n" "$serial" "$f"
done 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-11-09T18:17:00.873

请参阅常见问题解答之一的说明：[如何使用由不同证书签名的多个 JAR 文件？](http://docs.oracle.com/javase/8/docs/technotes/guides/javaws/developersguide/faq.html#s213)

正确的解决方案。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-06-08T08:30:34.823

我对预先签名的 BouncyCastle JAR 的体验与 Matthew 所描述的完全相同。但是，我发现 JRE 版本 1.6.0_14 及更高版本将很乐意接受具有多个签名的 JAR（如我所料）。因此，我不需要使用上述 JNLP 的“组件扩展机制”。

PS 在 1.6.0_14 发行说明中没有找到任何明显的对这个修复的引用。但是，我已经验证了多个签名的 JAR 在所有更高版本（至少 14 - 17 + 24）中都有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T19:25:08.103

In my project, what happened is that there are couple of instances in the load balancer pool, there are some instances with old version of code and some with new version. Thus there are certificates not signed by same certificate...

# python - 用于管理字符串文字等项目的转义字符的正则表达式

> ID：430759
> 
> 赞同：9
> 
> 时间：2009-01-10T08:45:09.840
> 
> 标签：python, regex

我希望能够将字符串文字与转义引号选项相匹配。例如，我希望能够搜索“这是一个'带有转义\'值的测试'ok”并让它正确地将反斜杠识别为转义字符。我尝试了以下解决方案：

```
import re
regexc = re.compile(r"\'(.*?)(?<!\\)\'")
match = regexc.search(r""" Example: 'Foo \' Bar'  End. """)
print match.groups() 
# I want ("Foo \' Bar") to be printed above 
```

看了这个，有一个简单的问题，就是使用的转义字符“ `\`”本身不能转义。我不知道该怎么做。我想要一个像下面这样的解决方案，但是消极的后向断言需要是固定的长度：

```
# ...
re.compile(r"\'(.*?)(?<!\\(\\\\)*)\'")
# ... 
```

任何正则表达式大师能够解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2011-03-28T07:10:00.493

## re_single_quote = r"`'[^'\\]*(?:\\.[^'\\]*)*'"`

首先请注意，MizardX 的答案是 100% 准确的。我只想添加一些关于效率的额外建议。其次，我想指出这个问题很久以前就已经解决和优化了 - 请参阅：[掌握正则表达式（第 3 版）](https://rads.stackoverflow.com/amzn/click/com/0596528124 "通过杰弗里弗里德尔。 关于正则表达式的最佳书籍 - 永远！")，（其中非常详细地介绍了这个特定问题 -*强烈*推荐）。

首先让我们看一下子表达式以匹配可能包含转义单引号的单引号字符串。如果要允许转义单引号，则最好至少也允许转义转义（Douglas Leeder 的回答就是这样做的）。但只要你在它上面，它就很容易让逃脱的任何东西。带着这些要求。MizardX 是唯一一个表达正确的人。这里有短格式和长格式（我冒昧地在`VERBOSE`模式下写了这个，有很多描述性的评论——你应该*总是*为非平凡的正则表达式做这些）：

```
# MizardX's correct regex to match single quoted string:
re_sq_short = r"'((?:\\.|[^\\'])*)'"
re_sq_long = r"""
    '           # Literal opening quote
    (           # Capture group $1: Contents.
      (?:       # Group for contents alternatives
        \\.     # Either escaped anything
      | [^\\']  # or one non-quote, non-escape.
      )*        # Zero or more contents alternatives.
    )           # End $1: Contents.
    '
    """ 
```

这有效并正确匹配以下所有字符串测试用例：

```
text01 = r"out1 'escaped-escape:        \\ ' out2"
test02 = r"out1 'escaped-quote:         \' ' out2"
test03 = r"out1 'escaped-anything:      \X ' out2"
test04 = r"out1 'two escaped escapes: \\\\ ' out2"
test05 = r"out1 'escaped-quote at end:   \'' out2"
test06 = r"out1 'escaped-escape at end:  \\' out2" 
```

好的，现在让我们开始改进这一点。首先，备选方案的顺序有所不同，人们应该始终将最可能的备选方案放在首位。在这种情况下，非转义字符比转义字符更有可能，因此颠倒顺序将提高正则表达式的效率，如下所示：

```
# Better regex to match single quoted string:
re_sq_short = r"'((?:[^\\']|\\.)*)'"
re_sq_long = r"""
    '           # Literal opening quote
    (           # $1: Contents.
      (?:       # Group for contents alternatives
        [^\\']  # Either a non-quote, non-escape,
      | \\.     # or an escaped anything.
      )*        # Zero or more contents alternatives.
    )           # End $1: Contents.
    '
    """ 
```

## “展开循环”：

这稍微好一点，但可以通过应用 Jeffrey Friedl 的*“展开循环”*效率技术（来自[MRE3](https://rads.stackoverflow.com/amzn/click/com/0596528124 "掌握正则表达式（第 3 版）") ）进一步改进（显着）。上面的正则表达式不是最优的，因为它必须煞费苦心地将星量词应用于两个备选方案的非捕获组，每个备选方案一次只消耗一个或两个字符。通过认识到类似的模式一遍又一遍地重复，可以完全消除这种交替，并且可以制作等效的表达式以在没有交替的情况下做同样的事情。这是一个优化的表达式，用于匹配单引号字符串并将其内容捕获到 group 中`$1`：

```
# Better regex to match single quoted string:
re_sq_short = r"'([^'\\]*(?:\\.[^'\\]*)*)'"
re_sq_long = r"""
    '            # Literal opening quote
    (            # $1: Contents.
      [^'\\]*    # {normal*} Zero or more non-', non-escapes.
      (?:        # Group for {(special normal*)*} construct.
        \\.      # {special} Escaped anything.
        [^'\\]*  # More {normal*}.
      )*         # Finish up {(special normal*)*} construct.
    )            # End $1: Contents.
    '
    """ 
```

这个表达式在一个“gulp”中吞噬了所有非引号、非反斜杠（绝大多数字符串），这大大减少了正则表达式引擎必须执行的工作量。你问好多少？好吧，我将这个问题中提出的每个正则表达式输入到[RegexBuddy 中](http://www.regexbuddy.com/ "用于制作和调试正则表达式的出色工具")，并测量了正则表达式引擎完成对以下字符串的匹配（所有解决方案都正确匹配）需要多少步骤：

`'This is an example string which contains one \'internally quoted\' string.'`

以下是上述测试字符串的基准测试结果：

```
r"""
AUTHOR            SINGLE-QUOTE REGEX   STEPS TO: MATCH  NON-MATCH
Evan Fosmark      '(.*?)(?<!\\)'                  374     376
Douglas Leeder    '(([^\\']|\\'|\\\\)*)'          154     444
cletus/PEZ        '((?:\\'|[^'])*)(?<!\\)'        223     527
MizardX           '((?:\\.|[^\\'])*)'             221     369
MizardX(improved) '((?:[^\\']|\\.)*)'             153     369
Jeffrey Friedl    '([^\\']*(?:\\.[^\\']*)*)'       13      19
""" 
```

这些步骤是使用 RegexBuddy 调试器函数匹配测试字符串所需的步骤数。“NON-MATCH”列是从测试字符串中删除右引号时声明匹配失败所需的步骤数。如您所见，对于匹配和不匹配的情况，差异都很显着。另请注意，这些效率改进仅适用于使用回溯的 NFA 引擎（即 Perl、PHP、Java、Python、Javascript、.NET、Ruby 和大多数其他引擎。）DFA 引擎不会看到这种技术的任何性能提升（请参阅：[正则表达式匹配可以简单快速](http://swtch.com/~rsc/regexp/regexp1.html)）。

## 关于完整的解决方案：

原始问题（我的解释）的目标是从较大的字符串中挑选出单引号子字符串（可能包含转义引号）。如果已知引用的子字符串之外的文本永远不会包含转义单引号，那么上面的正则表达式将完成这项工作。但是，要正确匹配带有转义引号和转义转义和转义任何其他内容的文本海洋中的单引号子字符串（这是我对作者所追求的解释），~~需要从头开始解析字符串~~No, （这是我最初的想法），但事实并非如此——这可以使用 MizardX 非常聪明的`(?<!\\)(?:\\\\)*`表达式来实现。以下是一些测试字符串来练习各种解决方案：

```
text01 = r"out1 'escaped-escape:        \\ ' out2"
test02 = r"out1 'escaped-quote:         \' ' out2"
test03 = r"out1 'escaped-anything:      \X ' out2"
test04 = r"out1 'two escaped escapes: \\\\ ' out2"
test05 = r"out1 'escaped-quote at end:   \'' out2"
test06 = r"out1 'escaped-escape at end:  \\' out2"
test07 = r"out1           'str1' out2 'str2' out2"
test08 = r"out1 \'        'str1' out2 'str2' out2"
test09 = r"out1 \\\'      'str1' out2 'str2' out2"
test10 = r"out1 \\        'str1' out2 'str2' out2"
test11 = r"out1 \\\\      'str1' out2 'str2' out2"
test12 = r"out1         \\'str1' out2 'str2' out2"
test13 = r"out1       \\\\'str1' out2 'str2' out2"
test14 = r"out1           'str1''str2''str3' out2" 
```

鉴于此测试数据，让我们看看各种解决方案的表现如何（'p'==pass，'XX'==fail）：

```
r"""
AUTHOR/REGEX     01  02  03  04  05  06  07  08  09  10  11  12  13  14
Douglas Leeder    p   p  XX   p   p   p   p   p   p   p   p  XX  XX  XX
  r"(?:^|[^\\])'(([^\\']|\\'|\\\\)*)'"
cletus/PEZ        p   p   p   p   p  XX   p   p   p   p   p  XX  XX  XX
  r"(?<!\\)'((?:\\'|[^'])*)(?<!\\)'"
MizardX           p   p   p   p   p   p   p   p   p   p   p   p   p   p
  r"(?<!\\)(?:\\\\)*'((?:\\.|[^\\'])*)'"
ridgerunner       p   p   p   p   p   p   p   p   p   p   p   p   p   p
  r"(?<!\\)(?:\\\\)*'([^'\\]*(?:\\.[^'\\]*)*)'"
""" 
```

## 一个工作测试脚本：

```
import re
data_list = [
    r"out1 'escaped-escape:        \\ ' out2",
    r"out1 'escaped-quote:         \' ' out2",
    r"out1 'escaped-anything:      \X ' out2",
    r"out1 'two escaped escapes: \\\\ ' out2",
    r"out1 'escaped-quote at end:   \'' out2",
    r"out1 'escaped-escape at end:  \\' out2",
    r"out1           'str1' out2 'str2' out2",
    r"out1 \'        'str1' out2 'str2' out2",
    r"out1 \\\'      'str1' out2 'str2' out2",
    r"out1 \\        'str1' out2 'str2' out2",
    r"out1 \\\\      'str1' out2 'str2' out2",
    r"out1         \\'str1' out2 'str2' out2",
    r"out1       \\\\'str1' out2 'str2' out2",
    r"out1           'str1''str2''str3' out2",
    ]

regex = re.compile(
    r"""(?<!\\)(?:\\\\)*'([^'\\]*(?:\\.[^'\\]*)*)'""",
    re.DOTALL)

data_cnt = 0
for data in data_list:
    data_cnt += 1
    print ("\nData string %d" % (data_cnt))
    m_cnt = 0
    for match in regex.finditer(data):
        m_cnt += 1
        if (match.group(1)):
            print("  quoted sub-string%3d = \"%s\"" %
                (m_cnt, match.group(1))) 
```

# 呸！

ps 感谢 MizardX 非常酷的`(?<!\\)(?:\\\\)*`表达。每天学些新东西！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-10T09:18:39.647

我认为这会起作用：

```
import re
regexc = re.compile(r"(?:^|[^\\])'(([^\\']|\\'|\\\\)*)'")

def check(test, base, target):
    match = regexc.search(base)
    assert match is not None, test+": regex didn't match for "+base
    assert match.group(1) == target, test+": "+target+" not found in "+base
    print "test %s passed"%test

check("Empty","''","")
check("single escape1", r""" Example: 'Foo \' Bar'  End. """,r"Foo \' Bar")
check("single escape2", r"""'\''""",r"\'")
check("double escape",r""" Example2: 'Foo \\' End. """,r"Foo \\")
check("First quote escaped",r"not matched\''a'","a")
check("First quote escaped beginning",r"\''a'","a") 
```

正则表达式`r"(?:^|[^\\])'(([^\\']|\\'|\\\\)*)'"`只前向匹配字符串中我们想要的东西：

1.  不是反斜杠或引号的字符。
2.  转义报价
3.  转义反斜杠

编辑：

在前面添加额外的正则表达式以检查第一个引号是否已转义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-10T20:01:43.453

Douglas Leeder 的模式 ( `(?:^|[^\\])'(([^\\']|\\'|\\\\)*)'`) 将无法匹配`"test 'test \x3F test' test"`和`"test \\'test' test"`。（包含引号和反斜杠以外的转义字符的字符串，以及前面有转义反斜杠的字符串。）

cletus 的模式 ( `(?<!\\)'((?:\\'|[^'])*)(?<!\\)'`) 将无法匹配`"test 'test\\' test"`。（字符串以转义的反斜杠结尾。）

我对单引号字符串的建议是这样的：

```
(?<!\\)(?:\\\\)*'((?:\\.|[^\\'])*)' 
```

对于单引号或双引号字符串，您可以使用以下命令：

```
(?<!\\)(?:\\\\)*("|')((?:\\.|(?!\1)[^\\])*)\1 
```

使用 Python 测试运行：

```
Doublas Leeder´s test cases:
"''" matched successfully: ""
" Example: 'Foo \' Bar'  End. " matched successfully: "Foo \' Bar"
"'\''" matched successfully: "\'"
" Example2: 'Foo \\' End. " matched successfully: "Foo \\"
"not matched\''a'" matched successfully: "a"
"\''a'" matched successfully: "a"

cletus´ test cases:
"'testing 123'" matched successfully: "testing 123"
"'testing 123\\'" matched successfully: "testing 123\\"
"'testing 123" didn´t match, as exected.
"blah 'testing 123" didn´t match, as exected.
"blah 'testing 123'" matched successfully: "testing 123"
"blah 'testing 123' foo" matched successfully: "testing 123"
"this 'is a \' test'" matched successfully: "is a \' test"
"another \' test 'testing \' 123' \' blah" matched successfully: "testing \' 123"

MizardX´s test cases:
"test 'test \x3F test' test" matched successfully: "test \x3F test"
"test \\'test' test" matched successfully: "test"
"test 'test\\' test" matched successfully: "test\\" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T08:56:48.333

如果我明白你在说什么（我不确定我是否明白）你想在你的字符串中找到带引号的字符串，忽略转义的引号。是对的吗？如果是这样，试试这个：

```
/(?<!\\)'((?:\\'|[^'])*)(?<!\\)'/ 
```

基本上：

*   以不带反斜杠的单引号开头；
*   匹配零次或多次出现：反斜杠然后引号或引号以外的任何字符；
*   以报价结束；
*   不要对中间括号（?: 运算符）进行分组；和
*   结束引号前面不能有反斜杠。

好的，我已经在 J​​ava 中对此进行了测试（抱歉，这比 Python 更像我的 schtick，但原理是一样的）：

```
private final static String TESTS[] = {
        "'testing 123'",
        "'testing 123\\'",
        "'testing 123",
        "blah 'testing 123",
        "blah 'testing 123'",
        "blah 'testing 123' foo",
        "this 'is a \\' test'",
        "another \\' test 'testing \\' 123' \\' blah"
};

public static void main(String args[]) {
    Pattern p = Pattern.compile("(?<!\\\\)'((?:\\\\'|[^'])*)(?<!\\\\)'");
    for (String test : TESTS) {
        Matcher m = p.matcher(test);
        if (m.find()) {
            System.out.printf("%s => %s%n", test, m.group(1));
        } else {
            System.out.printf("%s doesn't match%n", test);
        }
    }
} 
```

结果：

```
'testing 123' => testing 123
'testing 123\' doesn't match
'testing 123 doesn't match
blah 'testing 123 doesn't match
blah 'testing 123' => testing 123
blah 'testing 123' foo => testing 123
this 'is a \' test' => is a \' test
another \' test 'testing \' 123' \' blah => testing \' 123 
```

这似乎是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-10T11:10:10.343

在 Python 的 re.findall() 中使用[cletus ' 表达式：](https://stackoverflow.com/users/18393/cletus)

```
re.findall(r"(?<!\\)'((?:\\'|[^'])*)(?<!\\)'", s) 
```

在一个字符串中找到多个匹配项的测试：

```
>>> re.findall(r"(?<!\\)'((?:\\'|[^'])*)(?<!\\)'",
 r"\''foo bar gazonk' foo 'bar' gazonk 'foo \'bar\' gazonk' 'gazonk bar foo\'")
['foo bar gazonk', 'bar', "foo \\'bar\\' gazonk"]
>>> 
```

使用 cletus 的 TESTS 字符串数组：

```
["%s => %s" % (s, re.findall(r"(?<!\\)'((?:\\'|[^'])*)(?<!\\)'", s)) for s in TESTS] 
```

奇迹般有效。（自己测试或相信我的话。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-27T01:02:14.603

```
>>> print re.findall(r"('([^'\\]|\\'|\\\\)*')",r""" Example: 'Foo \' Bar'  End. """)[0][0] 
```

'Foo \'酒吧'

# open-source - 什么是好的第一个开源项目？

> ID：430767
> 
> 赞同：11
> 
> 时间：2009-01-10T09:02:05.220
> 
> 标签：open-source

我目前正在学习计算机科学并寻找一种练习和磨练我的编程技能的好方法。对我来说，为开源项目做贡献似乎是一种自然的方式。我目前了解 Java、Python 和一些 C，但想将其开放给任何已建立的语言。

特别是，我正在寻找一个相当活跃并且为经验不足的编码人员提供大量工作的项目。

像 Firefox 这样更知名的项目可能具有在简历上更容易识别的优势，但也许对较小的项目产生更大的影响。对此有什么想法吗？

在此先感谢=）-马特

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-10T09:38:53.227

如果您知道 C 是 GNOME，则可以开始使用一种流行的方法 - www.gnome.org

另一件很棒的事情是通过查看 Sourceforge 上的 Help Wanted 列表来寻找需要帮助的项目：

[http://sourceforge.net/people/](http://sourceforge.net/people/)

Python 网站也有一个志愿者机会页面：

[http://wiki.python.org/moin/VolunteerOpportunities](http://wiki.python.org/moin/VolunteerOpportunities)

贡献的一个好方法是查看您定期使用的开源软件的网站和邮件列表，询问他们是否需要帮助，或者只是浏览他们的错误跟踪器以查看您可以提供哪些帮助。这对您来说可能会更有趣，因为您可能能够利用现有的软件知识更快地做出更有意义的贡献。

祝你好运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-10T09:17:52.457

首先，它必须是你感兴趣并且会喜欢工作的东西。否则，它可能会成为一件苦差事，或者您可能无法像其他方式那样做出贡献。

其次，我会确保该项目是活跃的，并且有工作人员可以向他们学习（通过查看他们所做的工作以及他们在您签入并查看代码后可能对您的代码进行的任何更改）。

最后，如果您知道在寻找开发人员工作时可能想做什么，那么请尝试找到与该编程领域相关的东西，例如该领域的开发人员使用的工具，因为那将帮助您了解问题领域以及如何编程，这有助于提高您的简历/简历。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-10T09:14:08.393

无论做什么听起来很有趣，这对我来说都是辅助项目的经验法则。我建议你自己开始，这总是更令人兴奋，并且可以教会你“把事情做好”的技能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T09:39:12.337

我更喜欢为已经开始的开源项目做出贡献。根据您的需要，您会找到游戏、数据库……任何您想到的东西肯定都需要您的贡献。

我真正的第一个贡献是对一个使用 opengl ...space stariods 的游戏，我认为它更像是一种优化或错误修复，我真的不记得了。

I've done a plugin for GAIM (now known as Pidgin).. but never get to publish it as it changed name and api structure. It should have display the currently played song in the status-bar..with lots of configure options. Never finished it though.

Another thing was a 'echo' plugin for XMMS, but i found some bugs, it crashed easily and random (during development phase) ..and it was no longer maintained in the moment i've started developing, so left it in the dark also:) This one i liked a lot.. lots of cool and weird sound effects.

They were all cool as they all used different structures, and already established rules for coding, and commenting. Lots of thing to learn like this instead of starting my own project which wouldn't change my programming skills in any way:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-18T16:46:11.110

[jHeidi](http://www.heidisql.com/jheidi/ "jHeidi 阿尔法")是我喜欢使用的一个程序，但它有点错误，可以进行一些开发。它是用 Java 编写的。

有一个明确的路线图：它遵循其姊妹项目 HeidiSQL 的更高级开发。

# list - Ocaml List：实现追加和映射功能

> ID：430771
> 
> 赞同：11
> 
> 时间：2009-01-10T09:08:34.490
> 
> 标签：list, functional-programming, map, ocaml, lazy-evaluation

我目前正在尝试扩展朋友的 OCaml 程序。这是一些数据分析所需的大量函数。由于我不是真正的 OCaml 破解者，因此我目前陷入（对我而言）奇怪的 List 实现：

```
type 'a cell = Nil
    | Cons of ('a * 'a llist)
and 'a llist = (unit -> 'a cell);; 
```

我发现这实现了某种“惰性”列表，但我完全不知道它是如何工作的。我需要基于上述类型实现一个 Append 和一个 Map 函数。有没有人知道如何做到这一点？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-10T12:03:43.123

```
let rec append l1 l2 = 
    match l1 () with
        Nil -> l2 | 
        (Cons (a, l)) -> fun () -> (Cons (a, append l l2));;

let rec map f l =
    fun () -> 
        match l () with
            Nil -> Nil | 
            (Cons (a, r)) -> fun () -> (Cons (f a, map f r));; 
```

这种惰性列表实现的基本思想是，每个计算都通过 fun () -> x 封装在一个函数中（技术术语是闭包）。只有当函数应用于 () （单位值，不包含任何信息）时，才会评估表达式 x。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-10T14:56:51.743

注意到函数闭包本质上等同于惰性值可能会有所帮助：

```
lazy n : 'a Lazy.t    <=>    (fun () -> n) : unit -> 'a
force x : 'a          <=>    x () : 'a 
```

所以类型`'a llist`等价于

```
type 'a llist = 'a cell Lazy.t 
```

即，惰性单元格值。

根据上述定义，地图实现可能更有意义

```
let rec map f lst =
  match force lst with
    | Nil -> lazy Nil
    | Cons (hd,tl) -> lazy (Cons (f hd, map f tl)) 
```

将其转换回闭包：

```
let rec map f lst =
  match lst () with
    | Nil -> (fun () -> Nil)
    | Cons (hd,tl) -> (fun () -> Cons (f hd, map f tl)) 
```

与追加类似

```
let rec append a b =
  match force a with
    | Nil -> b
    | Cons (hd,tl) -> lazy (Cons (hd, append tl b)) 
```

变成

```
let rec append a b =
  match a () with
    | Nil -> b
    | Cons (hd,tl) -> (fun () -> Cons (hd, append tl b)) 
```

我通常更喜欢使用`lazy`语法，因为它可以更清楚地说明发生了什么。

还要注意，惰性暂停和闭包并不*完全*等价。例如，

```
let x = lazy (print_endline "foo") in
  force x;
  force x 
```

印刷

```
foo 
```

然而

```
let x = fun () -> print_endline "foo" in
  x ();
  x () 
```

印刷

```
foo
foo 
```

不同之处在于只`force`计算*一次*表达式的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T19:21:01.147

是的，列表可以是无限的。其他答案中给出的代码将附加到无限列表的末尾，但是您没有可以编写的程序可以观察无限列表后面附加的内容。

# java - Apache Ant + Ivy 构建一个部署到本地 Tomcat 的 Web 应用程序

> ID：430787
> 
> 赞同：2
> 
> 时间：2009-01-10T09:26:29.023
> 
> 标签：java, apache, ant, ivy

我将使用 Apache Ant 和 Apache Ivy 构建一个部署到本地 Tomcat 实例的 Web 应用程序（在开发期间）。我有一些疑问：

1.  我想从运行良好的 Maven2 存储库中获取我的大部分依赖项，但是对于 servlet JAR，我想使用 Tomcat 提供的那个。有没有办法使用 Ivy 做到这一点？你觉得这样做怎么样？
2.  我使用 Ant 下载 Ivy JAR 以将其“自动安装”到 ~/.ivy2/jar/ivy.jar 中，并且 Ivy 缓存位于其默认位置 ~/.ivy2/cache 。我故意将这两个位置都保留在项目目录之外。好主意？
3.  您是否有一个示例，说明如何使用 Ant 构建文件、Ivy 解决依赖关系、编译 WAR 文件并将其部署到本地（目前）Tomcat 安装？我正在寻找可以作为最佳实践的东西，然后我可以进一步修改。
4.  我在 Ivy 网站上使用了一些示例并对其进行了修改。有什么我应该改变的吗？构建文件可以在[http://pastebin.com/f7b34abc2](http://pastebin.com/f7b34abc2)看到，因为我在这里粘贴 XML 代码时遇到了问题。

（请注意，我**不是**在寻找我应该使用**Maven2**的建议，即使这个建议是好的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T21:59:53.107

在运行时，tomcat 将使用它自己的，因为它的类加载器将排除其中包含的任何 jar `javax.servlet.Servlet`。如果您真的必须针对它进行编译，则必须在 ant 脚本中进行，然后复制它或在编译类路径中引用它。

另一方面，按需下载 ivy 是一个好主意，因为它会阻止像我过去所做的那样将 ivy jar 检查到项目 scm repo 中，无论您将其下载到项目目录还是用户主目录都是一个问题个人喜好。另一方面，常春藤缓存应该与其他项目共享，因此用户主目录是一个很好的位置。

完成 ivy:retrieve 后，构建 war 文件并没有什么不同，因为所需的 jar 文件将是项目的本地文件，只需像往常一样使用 ant war 任务来创建 war。这是 ivy 的一个优势，一旦 jar 被下载，它在构建中就没有更多的事情要做了，你可以使用 ant 来编译和打包你的项目。

快速查看您的构建文件，看起来非常理智。

希望这可以帮助。

# cocoa - iSight 中的曝光锁定

> ID：430794
> 
> 赞同：3
> 
> 时间：2009-01-10T09:31:08.530
> 
> 标签：cocoa, macos, isight

我正在 Mac 上创建对象检测程序。我想在手动曝光模式下使用 iSight 来提高检测质量。

我尝试了 iGlasses 和 QTKit Capture 来做到这一点，它确实有效，但程序运行非常缓慢且不稳定。所以我想尝试其他解决方案。

在 PhotoBooth.app 中，iSight 似乎在固定曝光模式下运行，因此可能有办法做到这一点。我阅读了 QTKit Capture 文档和 OpenCV 文档，但找不到答案。

如果您有任何想法，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-21T00:39:36.247

QTKit Capture 使用起来非常简单，但无法设置手动相机参数，如增益、亮度、焦点等。如果您使用的是 Firewire 相机，我建议您查看[libdc1394](http://damien.douxchamps.net/ieee1394/libdc1394/)库，它可以让您控制如果您使用的是 IIDC Firewire 相机（如旧的外部 iSight），则可以查看所有这些值以及更多值。我使用这个库从机器人平台上的 CCD 摄像机进行视频捕获和控制。

不过，我猜您对内置 iSight 摄像头（即 USB）感兴趣。Wil Shipley 在他的帖子[“Frozen in Carbonite”](http://www.wilshipley.com/blog/2006/10/pimp-my-code-part-12-frozen-in.html)中简要提到了对内部 USB iSight 参数的控制，但他列出的大部分 Carbon 代码控制 IIDC Firewire 相机中的这些值。

不幸的是，根据Brad Ford 在 QuickTime 邮件列表中的[这条消息](http://lists.apple.com/archives/QuickTime-API/2007/Sep/msg00024.html)，听起来您无法通过公开的界面以编程方式控制内置 iSights 上的饱和度和锐度。他推测 iGlasses 正在软件中对图像进行后处理，这是您可以使用 Core Image 滤镜完成的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-04T21:44:36.490

我终于设法从我的 Cocoa 应用程序中锁定了 iSight 的自动曝光/自动白平衡。

查看 www.paranoid-media.de/blog 了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-16T16:33:54.067

嗯，

这些天我尝试了很多，但我找不到一个好主意。我认为 OpenCV + cocoa + iGlasses 是最快的，但仍然不稳定。

如果你有好的想法，请回复。谢谢你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-28T18:29:52.557

[phoboslab的 Mac OSX](http://phoboslab.org/log/2009/07/uvc-camera-control-for-mac-os-x)的UVC 摄像头控件使用基本的 USB 命令和记录的 USB 接口来访问网络摄像头控件。上面列出的 paranoid-media.de/blog 链接到 PhobosLab，并为 iSight 的该方法提供了一些额外的调整。（这些调整现在也可以在 phoboslab 的评论中找到。

# rest - 用于查找平均值的 REST 接口

> ID：430809
> 
> 赞同：6
> 
> 时间：2009-01-10T09:48:13.427
> 
> 标签：rest

假设我想创建一个 REST 接口来查找数字列表的平均值。假设一次提交一个数字。你会怎么做？

1.  将数字发布到[https://example.com/api/average](https://example.com/api/average)
2.  如果这是第一个数字，将返回哈希
3.  将数字发布到[https://example.com/api/average/hash](https://example.com/api/average/hash) ....
4.  获取[https://example.com/api/average/hash](https://example.com/api/average/hash)以找到平均值
5.  删除[https://example.com/api/average/hash](https://example.com/api/average/hash)因为我们不再需要它了

这是正确的方法吗？有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-10T10:00:41.357

将数字列表视为资源更有意义。假设每个列表的资源 URL 是`/list/{id}`列表`{id}`ID 的占位符。然后：

1.  `POST /list`创建一个新列表，服务器生成一个列表 ID（或“哈希”）并`/list/{id}`在响应的`Location`标头中指定 URL。
2.  `POST /list/{id}`向列表中添加一个数字
3.  `GET /list/{id}/average`返回平均值
4.  `DELETE /list/{id}`删除列表。

一种替代方法是`GET /list/{id}/average`将`GET /list/{id}`列表作为结构化数据（例如 XML）返回，其中包括作为生成属性的平均值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-21T21:06:37.700

您不能只返回哈希或 ID，您必须返回 URI 或 URI 模板以及字段值。唯一可以成为 API 一部分的 URI 是入口点，否则您的 API 不是 REST。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-17T17:42:40.760

您所说的是将请求表示（数字列表）无状态转换为响应表示（单个数字）。

让我们对您的资源进行分类：

*   无状态——请求是无状态的，但资源也是。它应该能够接受您的请求、处理它并返回响应，而无需维护任何内部状态。下面进一步讨论。
*   不太可能是可缓存的——我在这里假设您的数字列表永远/很少相同。
*   幂等——请求没有副作用。这是因为资源是无状态的。

现在让我们检查不同的 HTTP 方法：

*   GET - 获取资源的状态。由于您的资源没有状态，因此不适合您的情况。（幂等，可缓存）
*   DELETE - 删除资源或清除其状态。也不适合你的情况。（非幂等，不可缓存）
*   PUT - 用于设置资源的状态（或者如果它不存在则创建它）。（幂等，不可缓存）
*   POST - 用于处理可能会或可能不会修改资源状态的请求。可能会创建其他资源。（不保证幂等性——取决于资源是有状态还是无状态，不可缓存）

正如您在其他答案中看到的那样，POST 最常用作“创建”的同义词。虽然这没问题，但 POST 不仅限于在 REST 中“创建”。Mark Ba​​ker 在这里很好地解释了这一点：http: [//www.markbaker.ca/2001/09/draft-baker-http-resource-state-model-01.txt](http://www.markbaker.ca/2001/09/draft-baker-http-resource-state-model-01.txt)（第 3.1.4 节）。

虽然 POST 对您的问题没有完美的语义映射，但它是所有 HTTP 方法中最好的。它还导致了一个简单、无状态和可扩展的解决方案，这就是 REST 的重点。

总而言之，您的问题的答案是：

*   方法：POST
*   请求：数字列表的表示
*   响应：单个数字的表示（列表的平均值）

虽然这可能看起来像 SOAP 样式的 Web 服务调用，但事实并非如此。不要让您对 SOAP 的本能反应影响您对 POST 方法的使用并对其施加不必要的限制。

亲吻（保持简单，愚蠢）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-01-10T10:29:14.107

为了最大化 REST 哲学，我会做以下事情

执行`PUT`此操作以指示将生成散列的新结构，而**不是**基于传递的数字。只是一个“随机”哈希。然后每个后续帖子将包含 id-hash 以及返回的发送数字的结果散列。然后，当出现 get 时，您可以缓存结果。

```
1\. PUT    /api/average/{number} //return id-hash
2\. POST   /api/average/{id-hash}/{number} // return average-hash
3\. GET    /api/average/{average-hash}
4\. DELETE /api/average/{id-hash} 
```

然后，您可以缓存平均哈希的获取，即使您可能以不同的方式获得结果，或者不同的服务器获得相同的平均值。

# debugging - 枚举或列出 [您最喜欢的语言] 程序中的所有变量

> ID：430811
> 
> 赞同：80
> 
> 时间：2009-01-10T09:51:08.257
> 
> 标签：debugging, variables, enumeration

上周一位朋友问我如何枚举或列出程序/函数/等中的所有变量。出于调试的目的（基本上是获取所有内容的快照，以便您可以查看设置了哪些变量，或者是否设置了它们）。我环顾四周，发现了一个相对较好的 Python 方法：

```
#!/usr/bin/python                                                                                                                                                                                                                           
foo1 = "你好世界"
foo2 = "酒吧"
foo3 = {"1":"a",
        "2":"b"}
foo4 = "1+1"

对于 dir() 中的名称：
    我的价值 = 评估（名称）
    print name, "is", type(name), "and is equal to ", myvalue

```

这将输出如下内容：

```
__builtins__ 是 <type 'str'> 并且等于 <module '__builtin__' (built-in)>
__doc__ 是 <type 'str'> 并且等于 None
__file__ 是 <type 'str'> 并且等于 ./foo.py
__name__ 是 <type 'str'> 并且等于 __main__
foo1 是 <type 'str'> 并且等于 Hello world
foo2 是 <type 'str'> 并且等于 bar
foo3 是 <type 'str'> 并且等于 {'1': 'a', '2': 'b'}
foo4 是 <type 'str'> 并且等于 1+1

```

到目前为止，我在 PHP 中找到了一种部分方法（由[link text](http://www.phpro.org/examples/List-all-variables.html)提供），但它只列出了所有变量及其类型，而不是内容：

```
<?php
// 创建一些变量
$bar = 'foo';
$foo ='酒吧';
// 创建一个新的数组对象
$arrayObj = new ArrayObject(get_defined_vars());
// 遍历数组对象并回显变量和值
for($iterator = $arrayObj->getIterator(); $iterator->valid(); $iterator->next())
        {
        回声 $iterator->key() 。' => ' 。$iterator->current() 。'<br />';
        }
?>

```

**所以我告诉你：你如何用你最喜欢的语言列出所有变量及其内容？**

* * *

[VonC](https://stackoverflow.com/users/6309/vonc)编辑：我建议这个问题遵循一点“[代码挑战](https://stackoverflow.com/questions/172184)”的精神。
如果您不同意，只需编辑并删除标签和链接。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2009-01-10T11:30:39.630

在 python 中，使用返回包含所有本地绑定的字典的 locals，从而避免 eval：

```
>>> foo1 = "Hello world"
>>> foo2 = "bar"
>>> foo3 = {"1":"a",
...         "2":"b"}
>>> foo4 = "1+1"

>>> import pprint
>>> pprint.pprint(locals())
{'__builtins__': <module '__builtin__' (built-in)>,
 '__doc__': None,
 '__name__': '__main__',
 'foo1': 'Hello world',
 'foo2': 'bar',
 'foo3': {'1': 'a', '2': 'b'},
 'foo4': '1+1',
 'pprint': <module 'pprint' from '/usr/lib/python2.5/pprint.pyc'>} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-06T21:29:37.410

IPython：

```
whos
```

您还可以向您的朋友推荐[Spyder](http://code.google.com/p/spyderlib/)，它非常像 Matlab 那样显示这些变量，并提供用于逐行调试的 GUI。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-10T11:10:17.380

[这就是它在Ruby](http://Ruby-Lang.Org/)中的样子：

```
#!/usr/bin/env ruby

foo1 = 'Hello world'
foo2 = 'bar'
foo3 = { '1' => 'a', '2' => 'b' }
foo4 = '1+1'

b = binding
local_variables.each do |var|
  puts "#{var} is #{var.class} and is equal to #{b.local_variable_get(var).inspect}"
end 
```

这将输出

```
foo1 是字符串，等于“Hello world”
foo2 是字符串，等于 "bar"
foo3 是字符串，等于 {"1"=>​​"a", "2"=>"b"}
foo4 是字符串，等于“1+1”
```

但是，您不是要输出变量引用的对象类型，而不是用于表示变量标识符的类型吗？IOW，的类型`foo3`应该是`Hash`（或`dict`）而不是`String`，对吗？在这种情况下，代码将是

```
#!/usr/bin/env ruby

foo1 = 'Hello world'
foo2 = 'bar'
foo3 = { '1' => 'a', '2' => 'b' }
foo4 = '1+1'

b = binding
local_variables.each do |var|
  val = b.local_variable_get(var)
  puts "#{var} is #{val.class} and is equal to #{val.inspect}"
end 
```

结果是

```
foo1 是字符串，等于“Hello world”
foo2 是字符串，等于 "bar"
foo3 是哈希，等于 {"1"=>​​"a", "2"=>"b"}
foo4 是字符串，等于“1+1”
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-01-10T13:17:46.887

在 php 中你可以这样做：

```
$defined = get_defined_vars(); 
foreach($defined as $varName => $varValue){
 echo "$varName is of type ".gettype($varValue)." and has value $varValue <br>";
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-05-23T18:28:11.923

在 Lua 中，基本的数据结构是*表*，甚至全局环境 _G 也是表。因此，一个简单的枚举就可以解决问题。

```
for k,v in pairs(_G) do
  print(k..' is '..type(v)..' and is equal to '..tostring(v))
end 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-26T03:33:42.337

**重击：**

```
set 
```

免责声明：不是我最喜欢的语言！

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-05-26T11:24:21.777

一个完全递归的 PHP 单行：

```
print_r(get_defined_vars()); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-03-06T20:28:52.623

在 R 语言中

```
ls() 
```

并从工作记忆中删除所有对象

```
rm(list=ls(all=TRUE)) 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-01-10T10:03:01.820

首先，我只需使用调试器；-p Visual Studio，例如，具有“Locals”和“Watch”窗口，它们将显示您想要的所有变量等，完全可以扩展到任何级别。

在 C# 中，您不能真正轻松地获取方法变量（并且它们很可能会被编译器删除） - 但您可以通过反射访问字段等：

```
static class Program { // formatted for minimal vertical space
    static object foo1 = "Hello world", foo2 = "bar",
                  foo3 = new[] { 1, 2, 3 }, foo4;
    static void Main() {
        foreach (var field in typeof(Program).GetFields(
                BindingFlags.Static | BindingFlags.NonPublic)) {
            var val = field.GetValue(null);
            if (val == null) {
                Console.WriteLine("{0} is null", field.Name);
            } else {
                Console.WriteLine("{0} ({1}) = {2}",
                    field.Name, val.GetType().Name, val);
            }
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-03-19T16:42:59.340

珀尔。不处理`my`本地，也不会过滤掉一些无用的引用，但是包范围内的一切都可以看到。

```
my %env = %{__PACKAGE__ . '::'};
while (($a, $b) = each %env) {
    print "\$$a = $$b\n";
    print "\@$a = (@$b)\n";
    print "%$a = (@{[%$b]})\n";
    print "*$a = $b\n";
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-05-23T18:49:02.870

MATLAB：

```
who 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-01-10T13:23:07.703

在java中，问题类似于C#，只是在更详细的模式下（我知道，**[我知道](https://stackoverflow.com/questions/236737#236873)**；）Java很冗长......[你已经说清楚了；）](https://stackoverflow.com/questions/234075#234445)）

您可以通过 Refection 访问对象字段，但您可能无法轻松访问方法局部变量。所以以下不是静态分析代码，仅用于运行时调试。

```
package test;

import java.lang.reflect.Field;
import java.security.AccessController;
import java.security.PrivilegedAction;

/**
 * 
 * @author <a href="https://stackoverflow.com/users/6309/vonc">VonC</a>
 */
public class DisplayVars
{

    private static int field1 = 1;
    private static String field2 = "~2~";
    private boolean isField = false;

    /**
     * @param args
     */
    public static void main(final String[] args)
    {
        final Field[] someFields = DisplayVars.class.getDeclaredFields();
        try
        {
            displayFields(someFields);
        } catch (IllegalAccessException e)
        {
            e.printStackTrace();
        }
    }

    /**
     * @param someFields
     * @throws IllegalAccessException
     * @throws IllegalArgumentException
     */
    @SuppressWarnings("unchecked")
    public static void displayFields(final Field[] someFields)
            throws IllegalAccessException
    {
        DisplayVars anObject = new DisplayVars();
        Object res = null;
        for (int ifields = 0; ifields < someFields.length; ifields++)
        {
            final Field aField = someFields[ifields];
            AccessController.doPrivileged(new PrivilegedAction() {
                public Object run()
                {
                    aField.setAccessible(true);
                    return null; // nothing to return
                }
            });
            res = aField.get(anObject);
            if (res != null)
            {
                System.out.println(aField.getName() + ": " + res.toString());
            } else
            {
                System.out.println(aField.getName() + ": null");
            }
        }
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-26T08:54:01.410

在 REBOL 中，所有变量都存在于type的*上下文*`object!`中。有一个全局上下文，每个函数都有自己隐含的局部上下文。您可以通过创建新上下文`object!`（或使用`context`函数）显式创建新上下文。这与传统语言不同，因为变量（在 REBOL 中称为“单词”）随身携带对其上下文的引用，即使它们已离开定义它们的“范围”。

所以，底线是，给定一个上下文，我们可以列出它定义的变量。我们将使用 Ladislav Mecir 的[`context-words?`](http://www.fm.tul.cz/~ladislav/rebol/contexts.html#section-12)函数。

```
context-words?: func [ ctx [object!] ] [ bind first ctx ctx ] 
```

现在我们可以列出在全局上下文中定义的所有单词。（有**很多**。）

```
probe context-words? system/words 
```

我们还可以编写一个函数，然后列出它定义的变量。

```
enumerable: func [a b c /local x y z] [
  probe context-words? bind? 'a
] 
```

据我所知，我们在 REBOL**中不能**做的是沿着上下文树向上走，尽管解释器在决定如何将单词绑定到其上下文时似乎能够很好地做到这一点。我认为这是因为上下文树（即范围）在绑定单词时可能具有一个“形状”，但在评估时却完全不同。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-05-26T20:12:40.837

如果您安装了 FireBug（或其他带有 console.log 的浏览器），则快速而肮脏的 JavaScript 解决方案。如果不这样做，则必须将 console.log 更改为 document.write，并在 . 将 MAX_DEPTH 更改为您想要的递归级别（小心！）。

```
(function() {
    var MAX_DEPTH = 0;
    function printObj(name, o, depth) {
        console.log(name + " type: '"+typeof o+"' value: " + o);

        if(typeof o == "function" || depth >= MAX_DEPTH) return;
        for(var c in o) {
            printObj(name+"."+c, o[c], depth+1);
        }
    }
    for(var o in window) {
        printObj(o, window[o], 0);
    }
})(); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-23T18:55:52.810

普通 Lisp：

```
(do-all-symbols (x) (print x)) 
```

要同时显示所有绑定值：

```
(do-all-symbols (x) (print x) (when (boundp x) (print (symbol-value x)))) 
```

这是一个很长的列表，并不是特别有用。我真的会使用集成调试器。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-25T16:19:26.227

这是 oo 语言的一个想法。

首先，您需要 Java 中的 toString() 之类的东西来打印有意义的内容。其次 - 您必须将自己限制在一个对象层次结构中。在根对象的构造函数中（如 Eiffel 中的 Any），您在创建时将实例注册到某种全局列表中。在销毁期间，您取消注册（一定要使用一些允许快速插入/搜索/删除的数据结构）。在程序执行期间的任何时候，您都可以遍历这个数据结构并打印在那里注册的所有对象。

由于它的结构，埃菲尔可能非常适合此目的。其他语言对非用户定义的对象（例如 jdk 类）有问题。在 Java 中，可以使用一些开源 jdk 创建自己的 Object-class。

# asp.net - 如何将域映射到另一个域的子文件夹？

> ID：430812
> 
> 赞同：4
> 
> 时间：2009-01-10T09:52:47.473
> 
> 标签：asp.net, iis, mapping, dns

我有一个非常快的 Web 服务器（IIS6、ASP.NET），我想将它用于**多个**站点。现在，我已经有一个直接映射到服务器 IP 地址的域，但是如何让另一个域映射到同一台计算机上的子文件夹（即单独的 ASP.NET 应用程序）？理论上可行吗？（注意：只有 80 端口是开放的，我不能打开其他的。）

**接受的答案：**如下所示。我实际上遵循了教程并让它工作。万岁！谢谢大家！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-10T09:59:06.180

当然，您可以使用域名主机标头来做到这一点。只需创建一个新网站并选择不同的主机标头（例如 www.example.com）并让它指向所需的文件夹。如果您愿意，您可以在单个服务器上创建数百个网站。

这是一个如何做到这一点的[教程。](http://www.visualwin.com/host-header/)

1.  打开 IIS 管理器
2.  在左侧，展开您的计算机名称，然后单击“网站”，在右侧单击鼠标右键，将鼠标放在“新建”上并选择“网站...”
3.  在对话框中单击下一步，然后输入您正在创建的新网站的描述（可以是任何内容）
4.  再次单击下一步并转到最后一个文本框并输入您希望新主机头的内容
5.  现在输入新站点的路径，并确保选中“允许匿名访问”
6.  如果尚未选中，请选中“运行脚本”（用于 ASP.NET 执行）。
7.  在下一个对话框中单击完成，您就完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T10:00:31.187

只需在“IIS 管理器”应用程序中创建一个新站点 - 向导将询问新站点的 DNS 主机名。

要稍后查看（或更改）该值，请在该站点的属性页面的“网站”选项卡上，使用“高级...”选项来选择使用 HTTP/1.1“主机：”标头的哪些值去那个特定的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T10:01:20.810

它必须是子文件夹吗？您可以在 iis 中设置不同的站点，并使用主机标头将每个域定向到相关站点，所有这些都使用一个 ip。

但是，如果您需要 ssl，则不能这样做；你真的需要多个ips。

如果它必须是一个子目录，您可以像上面那样创建另一个站点并将其设置为重定向到其他地方。

# sql - 防止触发器的相互递归执行？

> ID：430830
> 
> 赞同：17
> 
> 时间：2009-01-10T10:25:06.253
> 
> 标签：sql, sql-server, sql-server-2005, recursion, triggers

假设您有表格`Presentations`和`Events`. 保存演示文稿并包含基本事件信息（例如位置和日期）时，将使用触发器自动创建事件。（恐怕由于技术原因，不可能简单地将数据保存在一个地方并使用视图。）此外，稍后在演示文稿中更改此信息时，触发器也会将更新复制到事件中，像这样：

```
CREATE TRIGGER update_presentations
ON Presentations
AFTER UPDATE
AS
BEGIN
    UPDATE Events
    SET Events.Date = Presentations.Date,
        Events.Location = Presentations.Location
    FROM Presentations INNER JOIN Events ON Presentations.EventID = Events.ID
    WHERE Presentations.ID IN (SELECT ID FROM inserted)
END 
```

现在，客户想要这样，如果用户更改了*事件*中的信息，它也应该返回到演示文稿。由于显而易见的原因，我不能反过来：

```
CREATE TRIGGER update_events
ON Events
AFTER UPDATE
AS
BEGIN
    UPDATE Presentations
    SET Presentations.Date = Events.Date,
        Presentations.Location = Events.Location
    FROM Events INNER JOIN Presentations ON Events.PresentationID = Presentations.ID
    WHERE Events.ID IN (SELECT ID FROM inserted)
END 
```

毕竟，这会导致每个触发器一个接一个地触发。我可以做的是`last_edit_by`在两个表中添加一个包含用户 ID 的列。如果触发器使用特殊的无效 ID 填充（例如，通过使实际人员的所有用户 ID 为正，但脚本的用户 ID 为负），我可以将其用作退出条件：

```
 AND last_edit_by >= 0 
```

这可能可行，但我想做的是向 SQL 服务器指示，在事务中，触发器应该只触发一次。有没有办法检查这个？或者也许是为了检查一个表是否已经受到触发器的影响？

* * *

**感谢史蒂夫·罗宾斯（Steve Robbins）的**回答：****

 **只需将潜在的嵌套`UPDATE`语句包装在 IF 条件检查中即可`trigger_nestlevel()`。例如：

```
CREATE TRIGGER update_presentations
ON Presentations
AFTER UPDATE
AS
BEGIN
    IF trigger_nestlevel() < 2
        UPDATE Events
        SET Events.Date = Presentations.Date,
            Events.Location = Presentations.Location
        FROM Presentations INNER JOIN Events ON Presentations.EventID = Events.ID
        WHERE Presentations.ID IN (SELECT ID FROM inserted)
END 
```

请注意，这`trigger_nestlevel()`似乎是基于 1 的，而不是基于 0 的。如果您希望两个触发器中的每一个都执行一次，但不是更频繁，只需检查`trigger_nestlevel() < 3`两个触发器。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-10T10:33:43.443

我不确定是否要按事务执行此操作，但是您是否需要为其他部分打开嵌套触发器？如果您在服务器上将它们关闭，则触发器不会从另一个触发器更新表时触发。

编辑（评论中的答案）：**您需要更改触发器 A 以使用[TRIGGER_NESTLEVEL](http://msdn.microsoft.com/en-us/library/ms182737.aspx)**

# iphone - Cocoa Touch：发布什么，什么时候发布？

> ID：430839
> 
> 赞同：1
> 
> 时间：2009-01-10T10:37:16.383
> 
> 标签：iphone, cocoa, cocoa-touch

我正在努力理解我必须在 Cocoa Touch 中发布的时间和内容，因为它没有垃圾收集。

此代码块来自苹果 iphone 示例 PeriodicElements，他们发布 anElement 和 rawElementArray 但不发布 thePath、firstLetter、existingArray 和 tempArray？

我会认为至少 tempArray 和 existingArray 应该被释放。

有聪明人能解释一下为什么吗？

谢谢 ：）

```
- (void)setupElementsArray {
NSDictionary *eachElement;

// create dictionaries that contain the arrays of element data indexed by
// name
self.elementsDictionary = [NSMutableDictionary dictionary];
// physical state
self.statesDictionary = [NSMutableDictionary dictionary];
// unique first characters (for the Name index table)
self.nameIndexesDictionary = [NSMutableDictionary dictionary];

// create empty array entries in the states Dictionary or each physical state
[statesDictionary setObject:[NSMutableArray array] forKey:@"Solid"];
[statesDictionary setObject:[NSMutableArray array] forKey:@"Liquid"];
[statesDictionary setObject:[NSMutableArray array] forKey:@"Gas"];
[statesDictionary setObject:[NSMutableArray array] forKey:@"Artificial"];

// read the element data from the plist
NSString *thePath = [[NSBundle mainBundle]  pathForResource:@"Elements" ofType:@"plist"];
NSArray *rawElementsArray = [[NSArray alloc] initWithContentsOfFile:thePath];

// iterate over the values in the raw elements dictionary
for (eachElement in rawElementsArray)
{
    // create an atomic element instance for each
    AtomicElement *anElement = [[AtomicElement alloc] initWithDictionary:eachElement];

    // store that item in the elements dictionary with the name as the key
    [elementsDictionary setObject:anElement forKey:anElement.name];

    // add that element to the appropriate array in the physical state dictionary 
    [[statesDictionary objectForKey:anElement.state] addObject:anElement];

    // get the element's initial letter
    NSString *firstLetter = [anElement.name substringToIndex:1];
    NSMutableArray *existingArray;

    // if an array already exists in the name index dictionary
    // simply add the element to it, otherwise create an array
    // and add it to the name index dictionary with the letter as the key
    if (existingArray = [nameIndexesDictionary valueForKey:firstLetter]) 
    {
    [existingArray addObject:anElement];
    } else {
        NSMutableArray *tempArray = [NSMutableArray array];
        [nameIndexesDictionary setObject:tempArray forKey:firstLetter];
        [tempArray addObject:anElement];
    }

    // release the element, it is held by the various collections
    [anElement release];

}
// release the raw element data
[rawElementsArray release];

// create the dictionary containing the possible element states
// and presort the states data
self.elementPhysicalStatesArray = [NSArray arrayWithObjects:@"Solid",@"Liquid",@"Gas",@"Artificial",nil];
[self presortElementsByPhysicalState];

// presort the dictionaries now
// this could be done the first time they are requested instead

[self presortElementInitialLetterIndexes];

self.elementsSortedByNumber = [self presortElementsByNumber];
self.elementsSortedBySymbol = [self presortElementsBySymbol]; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-10T10:48:23.693

它们`rawElementsArray`通过发送`+alloc`到类来创建，因此该对象归上面示例中的代码所有，并且必须释放。与`anElement`. 请注意`thePath`和`tempArray`不是通过发送`+alloc`,`+new`或`-copy`消息创建的，因此调用代码不对这些对象的生命周期负责。请看一下这个 Cocoa 内存管理文章合集：

[http://iamleeg.blogspot.com/2008/12/cocoa-memory-management.html](http://iamleeg.blogspot.com/2008/12/cocoa-memory-management.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T10:53:38.177

您不必释放 tempArray 的原因是它已被分配，然后立即自动释放。Autorelease 是一种在未来某个时间安排发布调用的方法，因此 API 的调用者不必对结果进行任何显式释放。

[Matt Dillard](https://stackoverflow.com/questions/6578/understanding-reference-counting-with-cocoa-objective-c)提供了关于 Objective C 内存管理策略的详细解释，并且比我能解释得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T12:40:12.813

约定是，当您使用类方法创建对象时，它应该已被自动释放。这意味着在运行循环结束时，当自动释放池被刷新时，这些对象将被释放。但是，如果您使用 +alloc] -init] 或 -copy、-mutableCopy 或 +new（与 +alloc] -init] 相同）创建某些内容，则它不会被自动释放。

例如：

```
NSArray *array1 = [NSArray arrayWithObject:@"foo"];
NSArray *array2 = [[NSArray alloc] initWithObject:@"foo"]; 
```

Array1 将被自动释放，您无需担心。Array2 需要手动释放。或者，您可以这样做：

```
NSArray *array2 = [[[NSArray alloc] initWithObject:@"foo"] autorelease]; 
```

这几乎就是 +arrayWithObject: 所做的。

当然，这会导致一个重要的考虑实例变量的生命周期。如果您像使用 array2 一样创建实例变量，那么它会很好，因为它的保留计数为 1。但是，array1 需要保留，否则它将在运行循环结束时自动释放，使其保留计数为 0所以它会被释放，你会留下一个悬空的指针。

# linq - 如何查询（LINQ）多表关联链接？

> ID：430840
> 
> 赞同：0
> 
> 时间：2009-01-10T10:38:06.150
> 
> 标签：linq

我有表关联，例如（CaseClient 是一个桥表）：

*   Cases有很多CaseClients
*   客户有很多 CaseClients
*   ClientType 有很多 CaseClient

最简单的方法只是使用数据库中的视图，但我听说使用 linq 你可以以某种方式加入它？或者我应该只是在数据库中创建视图并针对该视图进行 linq 查询？

我很感激你的评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-16T18:46:04.807

这是我为非常相似的情况所做的改编。只有名字被更改以保护无辜者。

```
IEnumerable<Case> getCaseByClient(int client_id)
{
    var ret = from c in Cases
              join cc in CasesClients
                on c.Id equals cc.ClientId
              join cl in Clients
                on cc.ClientId equals client_id
              select c;
    return ret;
} 
```

当然，这假设您的 client_id 字段是一个 int，但这很容易修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T10:47:41.200

我认为您想从您的桥接表中使用 Join 方法并解决您的每个关系。例如

```
// Where CaseId and TypeId are your members of CaseClient
var x = caseClients.Join( cases, cc => cc.CaseId, c => c.Id)
                                .Join( types, cc => cc.TypeId, t => t.Id)
                                .Select(); 
```

以上代码未经测试（到目前为止）并且来自内存。您可能需要在两个连接之间放置一个 Select。

# wpf - 如何将自定义值绑定到 ListBox DataTemplate 内 TextBlock 的 Text 属性？

> ID：430849
> 
> 赞同：0
> 
> 时间：2009-01-10T10:50:21.227
> 
> 标签：wpf, listbox, datatemplate, wcf-binding

我希望我的**ListBox**使用其索引 + 1对每个**ListItem进行编号。**

我将如何对**ListBox**的**DataTemplate中的****TextBlock的****Text**属性执行此操作？

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T11:05:51.820

如果每个都`ListBoxItem`使用`SelectedIndex + 1`，它们都将显示相同的值，因为`SelectedIndex`它是一个标量。而且，这个数字会随着用户选择的不同而改变`ListBoxItems`。我怀疑您实际上想在`ListBox`+ 1 中显示每个项目的索引。

要实现这一点，您最好使用[ItemsContainerGenerator](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainergenerator.aspx)来获取容器内项目的索引（请参阅`ListBox`IndexFromContainer[方法](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainergenerator.indexfromcontainer.aspx)）。您可以查看从数据类中公开它，或者查看为您检索此值的附加只读属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-10T18:57:17.307

我也[有同样的问题](https://stackoverflow.com/questions/660528/how-to-display-row-numbers-in-a-listview)。到目前为止，我只是使用我的数据模型来提供数字......

# ruby-on-rails - 在 vps 切片上运行的 Ruby on Rails

> ID：430853
> 
> 赞同：5
> 
> 时间：2009-01-10T10:55:50.920
> 
> 标签：ruby-on-rails, vps, slice

在一小块（256MB）上运行 Rails 时有哪些主要的陷阱和技巧？狭小空间的最佳服务器设置是什么？乘客、Nginx、Mongrel？在这种环境下，最好的后台任务处理器是什么？你需要注意什么？我很想听听那些做过这件事并撞到一些虚拟墙的人的故事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-12T12:36:38.733

我在一个 256mb 的 slicehost 上运行乘客，没问题。比任何其他替代方案更容易设置。对于背景素材，我使用 Starling 和 Workling，Ryan Bates 有一个[出色的截屏视频](http://railscasts.com/episodes/128-starling-and-workling)，介绍了如何将两者结合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T11:06:58.743

Nginx 代理几个杂种。更新 gem 可能会导致内存不足，但这可以通过从源代码下载和编译 ruby​​gems 来解决。将 cron 用于后台任务不会有任何问题，因为它非常轻量级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T20:18:04.917

在我的 256 切片上，我在一对瘦服务器前运行 nginx。无论您决定使用什么，请确保您使用 God 或 monit 来控制您的堆栈。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-13T19:06:48.163

我建议Passenger，因为它简单且占用空间小。我的 VPS 上有几个域（RailsPlayground 上的 256MB VPS），到目前为止没有问题。此外，Starling/Workling 组合效果很好，或者如果您的网站不是很大，您甚至可以使用 spawn 插件（这很简单）。

# c# - ASP.NET 应用程序中的文件锁定（读/写）

> ID：430879
> 
> 赞同：3
> 
> 时间：2009-01-10T11:46:55.933
> 
> 标签：c#, locking

我有两个 ASP.NET Web 应用程序。一个负责处理一些信息并**写入日志文件**，另一个应用程序负责**读取日志**文件并根据用户请求显示信息。

这是我的 Writer 代码

```
public static void WriteLog(String PathToLogFile, String Message)
{
    Mutex FileLock = new Mutex(false, "LogFileMutex");
    try
    {
        FileLock.WaitOne();
        using (StreamWriter sw = File.AppendText(FilePath))
        {
            sw.WriteLine(Message);
            sw.Close();
        }    
    }
    catch (Exception ex)
    {
        LogUtil.WriteToSystemLog(ex);
    }
    finally
    {
        FileLock.ReleaseMutex();
    }
} 
```

这是我的阅读器代码：

```
private String ReadLog(String PathToLogFile)
{
    FileStream fs = new FileStream(
          PathToLogFile, FileMode.Open, 
          FileAccess.Read, FileShare.ReadWrite);
    StreamReader Reader = new StreamReader(fs);
    return Reader.ReadToEnd();
} 
```

我的问题是，上面的代码是否足以防止锁定在网络花园环境中？

**编辑1：**脏读没关系。 **编辑 2：**使用 new Mutex(false, "LogFileMutex") 创建 Mutex，关闭 StreamWriter

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-10T15:22:36.700

听起来你试图实现一个基本的队列。为什么不使用可以保证可用性的队列。您可以将消息放入 MSMQ，然后实现一个 Windows 服务，该服务将从队列中读取并将消息推送到数据库。如果写入数据库失败，您只需将消息留在队列中（尽管您将希望处理位置消息，因此如果失败导致数据错误，您不会陷入无限循环）

这将消除所有锁定问题，并为您提供保证交付给您的读者......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T15:41:28.893

您还应该处理您的互斥锁，因为它派生自 WaitHandle，并且 WaitHandle 实现了 IDisposable：

```
using (Mutex FileLock = new Mutex(true, "LogFileMutex"))
{
    // ...
} 
```

此外，也许考虑一个比“LogFileMutex”更独特的名称（也许是 GUID），因为另一个不相关的进程可能会无意中使用相同的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T12:01:55.090

在基于 Web 的环境中执行此操作，您将遇到很多文件锁定问题，您可以将其更改为使用数据库吗？

大多数托管解决方案最多允许 250mb 的 SQL 数据库。

数据库不仅可以帮助解决锁定问题，还可以让您更轻松地清除旧数据，但经过一段时间后，日志读取会变得非常慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T12:25:14.997

不，不会的。首先，您将在每次调用时创建一个全新的互斥锁，因此多个线程将访问写入临界区。其次，您甚至没有在读取临界区中使用互斥锁，因此一个线程可能正在尝试读取文件，而另一个线程正在尝试写入。此外，您没有在 ReadLog 方法中关闭流，因此一旦第一个读取请求通过您的应用程序将无法写入任何日志条目，直到垃圾收集出现并为您关闭流......这可能需要一段时间。

# string - 字符串搜索

> ID：430882
> 
> 赞同：0
> 
> 时间：2009-01-10T11:52:52.940
> 
> 标签：string, search, forum, title

搜索论坛之类的字符串的最佳方法是什么？我看到了可怕的字符串搜索，通常使用的字符串越多越糟糕，而不是越好。

我也可以实现标题搜索，所以如果搜索标题的方式比字符串体更好，我也很乐意听到

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T12:05:09.873

看看使用[Lucene](http://lucene.apache.org/java/docs/) (Java)（或[Lucene.Net](http://incubator.apache.org/lucene.net/)）进行全文搜索。Lucene 是一个文本挖掘 API，允许您按标题、文本、作者等索引和搜索文档。我使用 Lucene 的 Ruby 端口（Ferret 或[acts_as_ferret](http://rm.jkraemer.net/projects/show/aaf)）来索引一个专门的邮件列表，发现它非常有效好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-10T12:13:25.880

在大多数情况下，我会建议使用“Boyer Moore”字符串搜索算法。

你可以在维基百科上阅读它：

[http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)

如果您对尝试自己实现它不感兴趣，还有很多示例代码可供查看。

如果性能根本不重要，我会同意使用正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T12:11:02.013

不确定“论坛”的确切含义，但[正则表达式](http://www.regular-expressions.info/tutorial.html)可能是一个不错的起点。

太笼统了？

# .net - 来自 Visual Studio 2008 的 .NET 2.0 中的 AjaxControlKit

> ID：430898
> 
> 赞同：0
> 
> 时间：2009-01-10T12:18:58.817
> 
> 标签：.net, asp.net, .net-3.5, asp.net-ajax, ajaxcontroltoolkit

我正在开发一个在 Visual Studio 2005 (.NET 2.0) 中开发的项目。我有 Visual Studio 2008 并在打开解决方案时将文件转换为旧框架。

但是该项目使用了一个 AjaxControlKit，我猜它在 ASP.NET 2.0 中默认不可用，因此它会引发一个错误，即在 2008 年转换和编译时缺少引用/库。

可以添加任何库/参考来解决这个问题吗？我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T12:21:28.733

AjaxControlToolkit 不包含在基本的 .Net 框架中，您需要将其安装在您的开发机器上。

[您可以在AjaxTookit 网站](http://www.codeplex.com/AjaxControlToolkit)上找到更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T12:24:20.617

您是否在转换过程中或尝试编译转换后的应用程序时遇到错误？您是否尝试过删除引用并重新添加它？在转换之前将其删除，升级到 .NET 3.5 并重新添加更新的、[依赖](http://www.codeplex.com/AjaxControlToolkit)于 3.5 的版本？

# java - StaleObjectStateException 错误

> ID：430899
> 
> 赞同：3
> 
> 时间：2009-01-10T12:19:20.720
> 
> 标签：java, hibernate, jpa

任何人都可以指出我的错误吗？

注意：这是从我的真实应用程序中提取的简化测试用例。因此 3 个实体管理器和 em1.getTransaction().begin(); 的奇怪用法 em1.clear(); em1.close(); 在每个部分的末尾。在真实的应用程序中，它发生在不同的时间。HibernateUtil 基本上是从教程中复制过来的。

```
 HibernateUtil.open();

        EntityManager em1 = HibernateUtil.reserveEntityManager();
        em1.getTransaction().begin();
        StringType st1 = new StringType();
        st1.setName("a");
        em1.persist(st1);
        em1.getTransaction().commit();
        em1.getTransaction().begin();
        em1.clear();
        em1.close();

        EntityManager em2 = HibernateUtil.reserveEntityManager();
        em2.getTransaction().begin();
        StringType st2 = new StringType();
        st2.setName("a");
        st2.setId(st1.getId());
        em2.merge(st2);
        em2.getTransaction().commit();
        em2.getTransaction().begin();
        em2.clear();
        em2.close();

        EntityManager em3 = HibernateUtil.reserveEntityManager();
        em3.getTransaction().begin();
        StringType st3 = new StringType();
        st3.setName("a");
        st3.setId(st1.getId());
        [b]em3.merge(st3);[/b]
        em3.getTransaction().commit();
        em3.getTransaction().begin();
        em3.clear();
        em3.close();

public static EntityManager reserveEntityManager()
    {
        return emf.createEntityManager();
    }

public static void open()
    {
        try
        {           
            emf = Persistence.createEntityManagerFactory("manager1");
        }
        catch (Throwable e)
        {
            throw new ExceptionInInitializerError(e);
        }
    } 
```

javax.persistence.OptimisticLockException：org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存的值映射不正确）：org.hibernate.ejb.AbstractEntityManagerImpl 的 [WebOrganizer.classes.types.StringType#174]。 wrapStaleStateException(AbstractEntityManagerImpl.java:646) 在 org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:600) 在 org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:237) 在 WebOrganizer.web.servlets.TypeServlet .test2(TypeServlet.java:356) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ）在java。lang.reflect.Method.invoke(Method.java:597) at org.testng.internal.MethodHelper.invokeMethod(MethodHelper.java:580) at org.testng.internal.Invoker.invokeMethod(Invoker.java:517) at org .testng.internal.Invoker.invokeTestMethod(Invoker.java:669) 在 org.testng.internal.Invoker.invokeTestMethods(Invoker.java:956) 在 org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:126) 在org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:110) 在 org.testng.TestRunner.runWorkers(TestRunner.java:720) 在 org.testng.TestRunner.privateRun(TestRunner.java:590) 在 org.testng .TestRunner.run(TestRunner.java:484) at org.testng.SuiteRunner.runTest(SuiteRunner.java:332) at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:327) at org.testng.SuiteRunner.privateRun( SuiteRunner.java:299) 在 org.testng.SuiteRunner.run(SuiteRunner.java:204) at org.testng.TestNG.createAndRunSuiteRunners(TestNG.java:864) at org.testng.TestNG.runSuitesLocally(TestNG.java:830) at org.testng.TestNG.run (TestNG.java:748) 在 org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:73) 在 org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:124) 在 sun.reflect.NativeMethodAccessorImpl.invoke0( Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597)在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:90)runSuitesLocally(TestNG.java:830) at org.testng.TestNG.run(TestNG.java:748) at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:73) at org.testng.remote.RemoteTestNG.main (RemoteTestNG.java:124) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在com.intellij.rt.execution.application.AppMain.main(AppMain.java:90) 上的 java.lang.reflect.Method.invoke(Method.java:597)runSuitesLocally(TestNG.java:830) at org.testng.TestNG.run(TestNG.java:748) at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:73) at org.testng.remote.RemoteTestNG.main (RemoteTestNG.java:124) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在com.intellij.rt.execution.application.AppMain.main(AppMain.java:90) 上的 java.lang.reflect.Method.invoke(Method.java:597)NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 com.intellij.rt.execution .application.AppMain.main(AppMain.java:90)NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 com.intellij.rt.execution .application.AppMain.main(AppMain.java:90)

原因：org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存的值映射不正确）：org.hibernate.event.def.DefaultMergeEventListener.entityIsDetached 处的 [WebOrganizer.classes.types.StringType#174] (DefaultMergeEventListener.java:261) 在 org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:53) 在 org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:120)。 impl.SessionImpl.fireMerge(SessionImpl.java:677) 在 org.hibernate.impl.SessionImpl.merge(SessionImpl.java:661) 在 org.hibernate.impl.SessionImpl.merge(SessionImpl.java:665) 在 org.hibernate .ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:228) ... 28 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T18:33:09.873

我会尝试这样的事情：

```
EntityTransaction tx1 = em1.getTransaction();
// make your modifications
em1.merge(st1);
tx1.commit(); 
```

不确定为什么要在清理 EntityManager 之前开始交易。我不以编程方式处理 JPA 事务，所以这只是一个有根据的猜测。另外，如果它返回相同的实例，为什么每次都创建一个新的 EntityManager ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-28T18:17:02.873

为什么要保存对象的中间状态？如果必须，请尝试另一种方法。传递标识符，确保您在之前`get`和`flush`之后开始交易。

请记住，刷新会话比调用提交更好。由于flush实际上在数据库中执行写入，所以您不需要调用close。

# visual-studio - 是否可以让 nant 在 Web 应用程序项目上运行发布

> ID：430904
> 
> 赞同：8
> 
> 时间：2009-01-10T12:26:10.457
> 
> 标签：visual-studio, ftp, nant, publish, nant-task

是否可以让 nant 在 mvc 项目或一个好的旧 Web 应用程序项目上运行发布，
并在发布后让 nant FTP 文件到 Web 服务器

***更新：***找到 ftp 问题的解决方案
[Nant ftp 任务](http://www.spinthemoose.com/~ftptask/)感谢 Paco

我所说的 publich
是指有一个命令行应用程序或 nant 任务可以像 Visual Studio 一样公开发布...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-10T15:55:23.793

Visual Studio 发布命令重建您的解决方案，然后将解决方案目录中的文件复制到新目录。我使用以下目标来做几乎相同的事情：

```
<target name="copyToPublish">
    <delete dir="${dir.publish}" />
    <mkdir dir="${dir.publish}" />
    <mkdir dir="${dir.publish}\wwwroot"/>
    <copy todir="${dir.publish}\wwwroot" includeemptydirs="false">
      <fileset basedir="${website.dir}">
        <exclude name="**/*.cs"/>
        <exclude name="**/*.pdb"/>
        <exclude name="**/*.csproj*"/>
        <exclude name="**/obj/**"/>
        <include name="**/*.*"/>
      </fileset>
    </copy>
    <mkdir dir="${dir.publish}\database"/>
    <copy todir="${dir.publish}\database" includeemptydirs="false">
      <fileset basedir="${dir.databasescripts}">
        <include name="**/*.sql" />
      </fileset>
    </copy>
    <xmlpoke
            file="${dir.publish}\wwwroot\Web.config"
            xpath="/configuration/system.web/compilation/@debug"
            value="false" />
    <xmlpoke
            file="${dir.publish}\wwwroot\Web.config"
            xpath="/configuration/system.web/trace/@enabled"
            value="false" />
    <move file="${dir.publish}\wwwroot\Web.config" tofile="${dir.publish}\wwwroot\Release.config" overwrite="true" />
    <delete file="${dir.publish}\wwwroot\Web.config" />
</target> 
```

在此目标之前，您当然必须运行正常的构建过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-10T12:43:26.397

nant有一个[Ftp 任务](http://www.spinthemoose.com/~ftptask/ "FTP任务")。除此之外，您必须创建一个脚本来复制您需要的文件和目录以及配置文件。我不会自动执行此操作，因为我想控制数据库更新脚本和 web.config 中的更改。

# php - 如何将 PHP 和 MySQL 上传到网络服务器

> ID：430912
> 
> 赞同：-2
> 
> 时间：2009-01-10T12:37:41.760
> 
> 标签：php, mysql, upload, webserver

我正在 vertigoserver 中开发一个站点。现在我需要在 webserver 中测试网页。

我正在使用网络服务器 Host-Europe VirtualServer 3.0。

1.  现在上传 PHP 页面需要哪些步骤？
2.  上传 MySQL 查询需要什么软件？
3.  有什么教程或建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T12:46:39.837

这似乎是基本的东西，但我会给你一些指示！

使用 FTP 客户端或类似客户端上传页面。如果你有 shell 访问权限，像[rsync](http://samba.anu.edu.au/rsync/)这样的工具可以让这更容易。

您可能已经拥有某种基于 Web 的 MySQL 前端，例如[phpMyAdmin](http://www.phpmyadmin.net/home_page/docs.php) - 这将允许您上传和恢复数据库转储。如果您有 shell 访问权限，或者 MySQL 服务器对 Internet 开放，则可以将转储通过管道传输到 MySQL 命令行客户端，例如，

```
mysql -h<hostname> -u<username> -p<password> mydatabase < dump.mysql 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T13:37:39.017

好的，你有一个虚拟机，不知道如何上传东西？这已经在 Host-Europe 论坛中讨论了一段时间。如果您不了解基础知识，您可能不想自己运行服务器。如果您不知道如何使用 Linux，请不要从会给您带来很多麻烦的机器开始。目前，托管包可能更适合您。

我遇到的问题是您没有指定您拥有的操作系​​统。如果您将 Linux 与[Plesk](http://en.wikipedia.org/wiki/Plesk)一起使用，则需要激活 FTP 等。如果您在没有 Plesk 的情况下使用 Linux，则需要使用[WinSCP](http://en.wikipedia.org/wiki/WinSCP)并通过 SSH ( [SCP](http://en.wikipedia.org/wiki/Secure_copy) ) 上传 PHP 文件。

如果您使用 Plesk 运行 Windows，请使用 FTP。如果没有，您应该在机器上安装一个 FTP 服务器。

关于 MySQL 的东西，你最好安装 MySQL 的 webfrontend。

！不要忘记保护它！

# mysql - 如何计算MySQL中表之间的差异？

> ID：430922
> 
> 赞同：2
> 
> 时间：2009-01-10T12:49:43.137
> 
> 标签：mysql, database

什么是计算 MySQL 中表之间差异的好方法（从某种意义上说，应该从一个表中添加和删除什么以获得另一个）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-11T03:52:53.690

到目前为止发布的答案（来自 BrynJ 和 Vadim）都没有做非常彻底的工作。做彻底的工作也非常困难。这两个答案都假定知道每个表中存在哪些 ID 号就足够了。但是，一般来说，表格有不止一列。

让我们称表 A 和 B。

一个重要的问题是“这两个表是否具有相同的架构”？如果不是，那么一个问题是哪些列需要添加到 A 中，哪些列需要添加到 B 以使其架构相同。这是一个元数据查询，可以从系统目录中回答。应该在添加到表的列中插入哪些值是一个有趣的问题。

让我们假设这些表实际上具有相同的架构，包括相同的主键和列之间相同的功能依赖关系。我们还假设有一个 ID 列（存储一个唯一的整数）、一个 Name 列（一个字符串）和一个 DATE 类型的 RefDate 列。

```
Table A                                 Table B
ID  Name         RefDate                ID  Name         RefDate
1   Frederick    2007-01-23             1   Josephine    2009-01-10 
```

现在，需要从每个表中插入、删除、更新什么以使它们相同？

我认为可以公平地说，如果不了解更多上下文，就没有单一的答案。可能是弗雷德里克从 2007 年开始接受了变性手术，而 B 中的条目代表了她的新身份。或者这可能是一个错误；数据库不应存储这两个记录。或者可能有另一个解决方案。

不幸的是，来自 BrynJ 和 Vadim 的查询都表明 A 和 B 之间没有区别，这对我来说是一个可疑的命题。

顺便说一句，请注意，当行可能有空值时比较行比没有空值时更复杂。例如，考虑比较名称：

没有空值：

```
(A.Name = B.Name) 
```

使用空值：

```
(A.Name = B.Name OR (A.Name IS NULL AND B.Name IS NULL)) 
```

尽可能避免使用空值的另一个原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T12:50:21.560

```
SELECT DISTINCT id FROM a WHERE NOT EXISTS (SELECT * FROM b WHERE a.id = b.id);
SELECT DISTINCT id FROM b WHERE NOT EXISTS (SELECT * FROM a WHERE a.id = b.id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T14:02:42.600

您还可以使用左外连接（第一个告诉您行在表 a 而不是 b 中存在的位置，第二个反之亦然）：

```
SELECT a.id FROM a LEFT JOIN b ON a.id = b.id WHERE b.id IS NULL
SELECT b.id FROM b LEFT JOIN a ON b.id = a.id WHERE a.id IS NULL 
```

# .net - 从 Visual Studio 部署 .NET 应用程序以供公众使用的正确且完整的步骤是什么？

> ID：430927
> 
> 赞同：4
> 
> 时间：2009-01-10T12:52:40.543
> 
> 标签：.net, visual-studio-2008, deployment

我通常为自己编写 C# 程序，或者只是其他应用程序的一部分。现在，我一直在从事一个我希望最终将其商业化的项目，并且我对从 VS 2008 部署一个简单应用程序的最简单方法感兴趣，该应用程序主要是下载和安装的。我不仅对安装程序的选择感兴趣，而且对构建选项、异常处理设置和任何其他基本细节感兴趣。

MSDN 上的文档有点压倒性。仅关于部署方法的部分就有 100 多个主题！

[http://msdn.microsoft.com/en-us/library/ms184415.aspx](http://msdn.microsoft.com/en-us/library/ms184415.aspx)

我应该关注什么以及以什么顺序？有没有人有一个他们运行的个人清单只是为了确保所有的基础都被覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T13:04:11.127

对于那种情况，我会避免 clickonce，所以[这个](http://msdn.microsoft.com/en-us/library/k3bb4tfd.aspx)似乎与部署最相关。

在编译器选项方面，标准的 Release 构建应该足够好；您可能需要考虑使用代码混淆工具，这取决于如果人们决定对您的代码进行逆向工程，您能负担得起的律师有多好……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T13:11:47.243

1.  弄清楚您的许可机制。序列号，激活，等等。**测试一下**。
2.  构建您的程序集并混淆它们。如果组件很小，我实际上也会`ILMerge`使用它们 - 使整个事情更易于管理。
3.  做一个安装程序。ClickOnce**是**一种选择，尽管它是勇敢的。它的主要特点是它可以自我更新。如果您想为更新收费，这是有问题的。我只会使用 WiX 并自行更新代码 - 并不难。

# jquery - 如何在 Flash 电影成功加载时捕获事件触发器？

> ID：430928
> 
> 赞同：1
> 
> 时间：2009-01-10T12:55:33.627
> 
> 标签：jquery, flash, embed, swfobject, preloader

我目前正在使用 jQuery 以及 swfObject 将 swf 电影动态嵌入到我的网页中。

我目前在将 immem 的音乐播放器嵌入我的网页时遇到问题，因为他们的嵌入代码没有任何加载屏幕。因此，当我使用 swfObject 替换元素时，该区域通常为空白。在最坏的情况下，这意味着用户不会知道嵌入歌曲正在加载。

所以，我试图找出在加载闪存后绑定事件的方法。因为我的计划是将图像放置`z-index`在顶部并使用此触发器隐藏图像。我想我已经尝试过使用`$('#embed').load(function(){ ... });`，但没有运气。

有人对此有任何解决方案吗？我只是想知道这是否可能，因为我不想对闪存进行黑客攻击并尝试将“加载程序”添加到闪存文件中。

**更多注意事项：**为了更清楚，我想将 imeem 的音乐播放器嵌入到我的网页中。所以，我真的对flash文件没有任何控制权，即我不能自己创建flash文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T16:07:59.510

通常，最简单的做法是普通的 ol' `<body onload="..."`，它会在调用您的处理程序之前等待您的外部资源完成加载。

但是，如果您使用 swfObject 动态添加嵌入式插件，则浏览器将为您的 Flash 电影以外的主体触发 onload（它对您的插件一无所知）。

有关与您的类似讨论，请参阅[http://blog.deconcept.com/swfobject/forum/discussion/271/javascript-onload-event-does-not-reflect-page-load-using-swfobject/](http://blog.deconcept.com/swfobject/forum/discussion/271/javascript-onload-event-does-not-reflect-page-load-using-swfobject/)。*我的最佳猜测是，如果不以某种*方式修改原始 swf，您将无法做您想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T07:58:53.553

注意，如果你打算用图像或 html 的东西来掩盖 flash，你将需要 wmode=transparent

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T20:21:37.920

上述使用 window.load() 的解决方案的问题是，如果您的主 swf 仅重 1 kb 但它实际上不显示任何内容（只是作为加载额外内容的容器，通常是闪存文件中的情况。

我要做的是使用 Actionscript 的 ExternalInterface 类，它允许您的 flash 播放器与包含 flash 文件的 html 文件中可用的 javascript 函数进行通信。您可以让您的 flash 文件调用一个 javascript 函数，该函数触发一个函数，告诉您的 javascript 处理脚本 flash 已准备好。这样做的好处是，当 javascript 接管时，您可以准确控制应该在 flash 文件中加载的内容。

有关使用 ExternalInterface 的更多信息，请参阅此：http: [//blog.circlecube.com/2008/02/01/actionscript-javascript-communication/](http://blog.circlecube.com/2008/02/01/actionscript-javascript-communication/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T12:59:00.467

您可以从 Flash 电影中执行此操作。但是，您将需要控制电影（您可能​​没有）。

# java - 用于 Apache Axis2 的 Eclipse 插件，用于创建 Web 服务

> ID：430936
> 
> 赞同：2
> 
> 时间：2009-01-10T13:10:19.820
> 
> 标签：java, web-services

请给我下载 apache 轴插件的链接，我在一些网站上试过，但链接不是最新的，所以我无法下载。

在此先感谢，马赫什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-12T12:00:39.913

最好的办法是下载 Eclipse J2EE 包，它已经包含创建axis2 Web 服务所需的所有内容：

[http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/ganymede/SR1/eclipse-jee-ganymede-SR1-win32.zip](http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/ganymede/SR1/eclipse-jee-ganymede-SR1-win32.zip)

你也可以通过 Ganymede 更新站点的更新管理器安装 WTP 包

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-06-09T09:19:56.073

我为初学者找到了另一篇简单的文章。有兴趣可以看看。 [**使用 Apache Axis2 和 Eclipse IDE 创建 Web 服务**](http://blog.sencide.com/2011/06/create-web-service-using-apache-axis2.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T13:22:16.550

我认为最全面的插件是[MyEclipse](http://www.myeclipseide.com/)。但它是商业的。（不是免费的）

# javascript - 告诉我的库函数的用户传递的变量不是正确类型的最佳方法是什么

> ID：430937
> 
> 赞同：5
> 
> 时间：2009-01-10T13:10:20.053
> 
> 标签：javascript, typechecking

我目前正在创建一个 javascript 函数库。主要供我自己使用，但您永远无法确定其他人是否最终在他们的项目中使用它，我至少正在创建它，就好像这可能发生一样。
大多数方法仅在传递的变量具有正确的数据类型时才有效。现在我的问题是：提醒用户变量类型不正确的最佳方法是什么？应该抛出这样的错误吗？

```
function foo(thisShouldBeAString){ //just pretend that this is a method and not a global function
 if(typeof(thisShouldBeAString) === 'string') {
  throw('foo(var), var should be of type string');
 }
 #yadayada
} 
```

我知道 javascript 会进行内部类型转换，但这会产生非常奇怪的结果（即 '234' + 5 = '2345' 但 '234' * 1 = 234），这可能会使我的方法做非常奇怪的事情。

**编辑**
为了让事情更加清楚：我不希望进行类型转换，传递的变量应该是正确的类型。告诉我的库用户传递的变量类型不正确的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-10T15:41:22.760

类型检查的问题在于它实际上很难做到。例如：-

```
var s = new String("Hello World!");
alert(typeof s); 
```

什么会被提醒？答：“对象”。它确实是一种初始化字符串的愚蠢方法，但我经常看到它。我更喜欢在必要时尝试转换，或者什么也不做。

话虽如此，在我完全控制的 Javascript 环境中（如果您只是提供一个库，则***不是这样）我使用了这组原型调整：-***

```
String.prototype.isString = true;
Number.prototype.isNumber = true;
Boolean.prototype.isBoolean = true;
Date.prototype.isDate = true;
Array.prototype.isArray = true; 
```

因此，对常见类型的测试可以很简单：-

```
if (x.isString) 
```

尽管您仍然需要注意 null/undefined:-

```
if (x != null && x.isString) 
```

除了避免这个问题之外`new String("thing")`，这种方法在日期和数组上特别有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T20:26:03.263

关于类型检查的一些小评论 - 它实际上并不那么复杂：

用于`typeof`检查原语和`instanceof`检查特定对象类型。

示例：检查字符串

```
typeof x === 'string' 
```

或者

```
typeof x === 'string' || x instanceof String 
```

如果要包含字符串对象。

要检查数组，只需使用

```
x instanceof Array 
```

这应该工作得相当好（有一些已知的例外——例如 Firefox 3.0.5 有一个 bug where `window instanceof Object === false`）`window.__proto__ instanceof Object === true`。

**编辑：**功能对象的检测还有一些问题：

原则上，您可以同时使用`typeof func === 'function'`和`func instanceof Function`。

问题是，在一家大公司的未命名浏览器中，这些检查会为某些预定义函数返回错误的结果（它们的类型以 给出`'object'`）。我知道没有解决方法 - 检查只对用户定义的函数可靠地工作......

**edit2：**从其他窗口/框架传递的对象也存在问题，因为它们将从不同的全局对象继承 - 即`instanceof`会失败。存在内置对象的解决方法：例如，您可以通过`Object.prototype.toString.call(x) === '[object Array]'`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T13:40:35.593

像 jQuery 这样的库不会将错误通知用户。

如果一个函数需要一个数字，而用户传递了一个字符串，则该函数只是返回而不做任何事情。

这样，您将避免在实时网站上弹出 JavaScript 错误。

*PS。只需确保始终键入检查您输入的参数，以避免抛出 JavaScript 错误。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T13:52:44.337

怎么样`throw`： [https ://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Statements/throw](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Statements/throw)

Array、Null、Object 的 type 也不能很好的区分。看看这里的功能：http: [//javascript.crockford.com/remedial.html](http://javascript.crockford.com/remedial.html)，还有其他一些方法可以做到这一点。

就我个人而言，我不会进行类型检查，因为它只会增加代码的处理时间。如果您关心性能，您会希望尽可能多地减少几毫秒的处理时间。良好的文档将解决检查的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-10T13:34:30.723

在函数启动时将字符串静默转换为数字数据类型是什么意思？

您始终可以确定“字符串”的数据类型。你不能吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-10T14:24:47.643

您可以检查一些值，例如“debug=1”设置。如果有 - 您可以输出警报等错误。所以在开发模式下用户会看到它们，但在真实站点上他会关闭它。同样的方式浏览器不会向您显示错误消息 - 您需要查看 JS 控制台。

还有FireBug。您可以检测到这一点并同时放置 FB 调试消息。

# c# - C# PDF 打印库

> ID：430941
> 
> 赞同：0
> 
> 时间：2009-01-10T13:15:05.083
> 
> 标签：c#, html, pdf, pdf-generation

是否有任何免费库可以“打印”到 PDF 而无需在系统上实际安装 PDF 打印机。我想要一些可以完全自包含在我的应用程序中的东西。我说我希望它“打印”的原因是我已经尝试并试图找到一种解决方案，将带有 CSS 的 HTML 直接转换为 PDF，但这似乎不太可能。所以我想使用 System.Windows.Forms.WebBrowser 控件首先呈现页面，然后将该呈现输出到 PDF。我只是不希望用户被要求安装 PDFPrinter。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T13:19:36.213

[PDFsharp](http://pdfsharp.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T13:18:57.337

它必须是免费的吗？上次我查看[ABCpdf](http://www.websupergoo.com/abcpdf-1.htm)时，它看起来相当不错，并声称支持 css（[此处](http://www.websupergoo.com/helppdf5net/source/3-concepts/g-htmlrender.htm)）。

[HTMLDOC](http://www.easysw.com/htmldoc/)应该在某个时候支持 css，但上次我检查 css 的东西仍处于测试阶段。并且已经有“一段时间”了；我已经放弃等待......它不是 .NET，但您可以使用`Process`它来调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T15:17:47.973

[http://www.html-to-pdf.net/](http://www.html-to-pdf.net/) - 这不是免费的，但它既便宜又有效。我现在使用它来将带有 CSS 的 HTML 转换为 PDF。本质上，我们向用户显示页面，然后单击按钮，他们可以下载页面的 PDF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T15:27:28.607

[http://itextsharp.sourceforge.net/](http://itextsharp.sourceforge.net/)真的很棒。您可以在 stochfit.sourceforge.net 的存储库中查看如何使用它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-09-28T17:22:15.840

另一个工具（不是免费的）： http: [//www.winnovative-software.com/](http://www.winnovative-software.com/)

# cocoa-touch - 在屏幕上滚动的可调整大小的 UILabel

> ID：430942
> 
> 赞同：10
> 
> 时间：2009-01-10T13:15:53.163
> 
> 标签：cocoa-touch

是的，我正在尝试获取一个带有文本的标签（显然已经完成），它会在屏幕上滚动。

输入到标签中的文本由 UITextField 和 UIButton 完成。这更新很好。

但我试图让 UILabel 根据文本输入量调整大小，以便整个文本在屏幕上滚动。

这是我目前用于滚动标签的代码：

```
[lblMessage setText: txtEnter.text];

CABasicAnimation *scrollText;

scrollText=[CABasicAnimation animationWithKeyPath:@"position.x"];
scrollText.duration = 3.0;
scrollText.repeatCount = 10000;
scrollText.autoreverses = NO;
scrollText.fromValue = [NSNumber numberWithFloat:500];
scrollText.toValue = [NSNumber numberWithFloat:-120.0];

[[lblMessage layer] addAnimation:scrollText forKey:@"scrollTextKey"]; 
```

问题是，有时在屏幕中间开始滚动，有时在完全穿过之前就消失了。

由于标签是一种尺寸，它也会削减文本。我不知道如何改变它。

提前致谢。

多姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-10T16:29:50.637

我相信类似于[这个问题的解决方案的](https://stackoverflow.com/questions/419710/how-do-i-pan-the-image-inside-a-uiimageview)东西适用于这种情况。

您可以将 UILabel 嵌入到 UIScrollView 中，并将 UIScrollView 设置为您希望一次在屏幕上显示的标签的最大大小。UIScrollView 需要使用它的 showsHorizo​​ntalScrollIndicator 和 showsVerticalScrollIndicator 属性来关闭其滚动指示器。在更改文本时，您可以执行以下操作：

```
[lblMessage setText: txtEnter.text];
[lblMessage sizeToFit];
scrollView.contentSize = lblMessage.frame.size; 
```

后面是上述链接问题中描述的平移动画代码，要平移到 UILabel 最右侧的帧。这将导致文本以恒定速率在标签上滚动。如果您希望标签回滚到开头，您可以在动画块的开头使用 UIView setAnimationRepeatAutoreverses: 和 setAnimationRepeatCount: 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T17:10:14.487

标签调整大小非常感谢！

现在，我已经将标签放入滚动视图中并且我已经显示出来了..但我现在不确定要添加的确切动画。我在你给我的链接上尝试了一些，但它们不起作用。

编辑：没关系，我现在已经全部工作了。

CGPointMake(x, x) 是我需要的 contentOffset。

# .net - .net / c# 测试非技术 MD

> ID：430949
> 
> 赞同：1
> 
> 时间：2009-01-10T13:20:45.087
> 
> 标签：.net

亲爱的，我正在寻找一个完成一半的 .net 应用程序来测试我的 .net c# 申请人。

由于我来自不同的编码背景，我很难评估人际交往能力，因此一个好的测试会做得很好！

关于检查考生的考试成绩，我可以问朋友，没问题！

是否存在实际测试？我需要为此付费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T19:50:14.117

要为此目的创建合适的 C# 程序，准确了解您要测量的内容会有所帮助：

*   知识或技能（或两者兼有）？
*   桌面、Web 还是服务器？
*   基础、中级还是高级？
*   开发还是维护？
*   有没有数据库知识？
*   错误处理和可靠性？
*   表现？
*   安全？
*   用户界面？
*   算法？
*   测试？
*   基类库知识？
*   …………

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-13T15:54:12.063

您可能会对本网站感兴趣。他谈到了招聘程序员，并且有一个“修复这个臭代码”测试的好例子。

[http://codebetter.com/blogs/karlseguin/archive/2006/12/01/How-to-hire-a-programmer- *2D00* -Part-2- *2D00 -Improve* -this-code.aspx](http://codebetter.com/blogs/karlseguin/archive/2006/12/01/How-to-hire-a-programmer-_2D00_-Part-2-_2D00_-Improve-this-code.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T15:04:43.507

这听起来不错，但我仍然热衷于在受控环境中的 PC 前完成适当的 c# 测试，开发人员需要阅读代码，了解它的作用并添加必要的修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T13:56:21.210

我建议在面试时给申请人一个小问题来解决。让他们在白板上用伪代码写出问题的解决方案，并让他们解释他们的思考过程。

一旦他们这样做了，然后让他们访问安装了必要工具的计算机，并观察他们编写解决方案的代码。

我最喜欢的面试问题是转换为罗马数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-12T10:41:47.170

嘿路勇士谢谢！

这是我的回答：

我需要测试：

知识和技能 web 和 sql
中级技能 维护 60%
开发 40% 具有 DB 知识
错误处理和可靠性
性能原样具有高
流量 Hybernate

没有别的

# authorization - What are the best wiki engine with good authorization features?

> ID：430951
> 
> 赞同：0
> 
> 时间：2009-01-10T13:21:19.503
> 
> 标签：authorization, wiki

What is the best wiki engine with good authorization features?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T13:51:23.200

[**DokuWiki**](http://www.dokuwiki.org/dokuwiki) is a great open source PHP Wiki, clean syntax, straightforward install, simple report for read-only and private pages, plus a full ACL system, and a active community of plugin developers.

**[MediaWiki](http://www.mediawiki.org/wiki/MediaWiki)** is amazing from a feature stand point, if you need SVG and MathML support, but I find it too hard to customize and hack on personally.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T15:04:09.763

They use [MoinMoin](http://moinmo.in/) in some subjects at my uni. It has really good authorisation, controlled via simple ACLs at the top of each page. Each student submits work on pages private to them and the subject staff, so it definitely seems to work...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-10T13:25:24.063

We use [atlassian confluence](http://www.atlassian.com/software/confluence/) it has authorization features like restricting viewing or editing of pages for groups or users. But it's a commercial product (not free)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T13:45:58.877

Define "good". =)

Some would say that the original wiki script has the best authorization features in a [wiki](http://wiki.org/wiki.cgi?WhatIsWiki) sense of the word, seeing that Ward Cunningham defined Wiki as:

> The simplest online database that could possibly work.

That said, I can share my experience with hosting [Mediawiki](http://www.mediawiki.org/) sites and that is that I often find that I would like to be able to define privileges on a group/page and group/section kind of way. But it always depends on the application. I use [UseModWiki](http://www.usemod.com/cgi-bin/wiki.pl) for [robowiki.net](http://robowiki.net) and it works excellently even though it has the most rudimentary authorization system (next after the original wiki script then).

# c# - 从表单打开表单的最快方法是什么？

> ID：430955
> 
> 赞同：2
> 
> 时间：2009-01-10T13:23:11.697
> 
> 标签：c#, windows-mobile

从 Form1 打开 Form2 的快速有效的方法是什么？

我在 WinCE 中工作（内存和 CPU 能力有限），所以这很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T17:52:17.503

根据您的要求，您可能会欺骗用户在应用程序加载时看到启动画面。在此期间，您在后台实例化重要的表单。这种方法应该会给您额外的几秒钟，大多数用户并不认为这是“慢”。用户通常会接受应用程序启动速度较慢，如果它之后运行得相当快的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T14:13:05.483

简单的方法：

```
OtherFormClass NewForm = new OtherFormClass();
NewForm.Show(); 
```

如果您可以处理内存，您可以在后台创建表单并在需要时弹出。这应该给用户一个好的，快速的体验。

可能还有其他优化可以减轻内存压力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T16:31:02.163

如果您希望表单在用户响应方面更快地打开并且您可以处理您可能会考虑“预加载”表单的内存开销。在应用程序的启动过程中实例化表单并将表单缓存在全局变量中（或使其成为单例并创建实例）。这会增加应用程序的启动时间，但会在您稍后显示表单时提高响应速度。如果表单有很多调用 show 的控件，那么在启动时对表单隐藏也将预加载表单控件，进一步减少随后显示表单所需的时间。

在完整的 .net 框架上通常不建议这样做！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-19T11:51:26.640

尝试缓存表单。杀手级部分是表单的创建（窗口句柄的创建，例如 InitializeComponent 的运行）。如果您在应用程序启动时创建表单，那么稍后显示表单时您会注意到性能有小幅（但值得注意）的提升。这显然是以启动时间为代价的。

所以在启动时：

```
Form1 form = new Form1();
FormStore.Add(form); 
```

然后：

```
Form1 form = FormState.GetForm<Form1>();
form.Show(); 
```

那种事。

# sql - 使用 MSDTC 的链接服务器错误

> ID：430956
> 
> 赞同：1
> 
> 时间：2009-01-10T13:25:22.147
> 
> 标签：sql, sql-server, stored-procedures, linked-server, msdtc

我正在展示一个通过 Internet 在两个系统之间使用“链接服务器”进行数据事务的存储过程示例

```
Alter Proc [dbo].[usp_Select_TransferingDatasFromServerCheckingforExample]

@RserverName varchar(100), ----- Server Name  
@RUserid Varchar(100),           ----- server user id
@RPass Varchar(100),              ----- Server Password 
@DbName varchar(100)           ----- Server database    

As
Set nocount on
Set Xact_abort on
Declare @user varchar(100)
Declare @userID varchar(100)
Declare @Db Varchar(100)
Declare @Lserver varchar(100)
Select @Lserver = @@servername
Select @userID = suser_name()
select @User=user
Exec('if exists(Select 1 From [Master].[' + @user + '].[sysservers] where srvname = ''' + @RserverName + ''') begin Exec sp_droplinkedsrvlogin ''' +  @RserverName + ''',''' + @userID + ''' exec sp_dropserver ''' + @RserverName + ''' end ')

set @RserverName='['+@RserverName+']'
declare @ColumnList varchar(max)
set @ColumnList = null
select  @ColumnList = case when @ColumnList is not null then @ColumnList + ',' + quotename(name) else quotename(name) end  from syscolumns where id = object_id('bditm') order by colid
set identity_insert Bditm on
exec ('Insert Into Bditm ('+ @ColumnList +') Select * From '+ @RserverName + '.'+ @DbName + '.'+ @user + '.Bditm')
set identity_insert Bditm off

set @RserverName=replace(replace(@RserverName,'[',''),']','')

Exec sp_droplinkedsrvlogin  @RserverName,@userID
Exec sp_dropserver @RserverName 
```

当我运行存储过程时，我在不同的执行时间得到不同的错误

有时会显示此错误

```
"The operation could not be performed because OLE DB provider "SQLNCLI" for linked server "ServerName" was unable to begin a distributed transaction." 
```

另一次显示此类错误

```
OLE DB provider "SQLNCLI" for linked server "70.38.11.49" returned message "Protocol error in TDS stream".
OLE DB provider "SQLNCLI" for linked server "70.38.11.49" returned message "Communication link failure".
Msg 65535, Level 16, State 1, Line 0
Session Provider: Physical connection is not usable [xFFFFFFFF]. 
OLE DB provider "SQLNCLI" for linked server "70.38.11.49" returned message "Communication link failure".
Msg 65535, Level 16, State 1, Line 0
Session Provider: Physical connection is not usable [xFFFFFFFF]. 
OLE DB provider "SQLNCLI" for linked server "70.38.11.49" returned message "Communication link failure".
Msg 10054, Level 16, State 1, Line 0
TCP Provider: An existing connection was forcibly closed by the remote host. 
```

我在客户端使用 Windows Xp 和 SQL Server 2005，在 Net Server 中使用 Windows Server 2003 和 Sql server 2005

我在两个系统中都设置了 MSDTC

我该如何解决这个问题（并提供正确的信息以在 Windows XP 和 Windows server 2003 中设置 MSDTC）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-13T16:10:53.013

你可能想看看：

[http://support.microsoft.com/kb/306212](http://support.microsoft.com/kb/306212)

和

[http://support.microsoft.com/kb/937517](http://support.microsoft.com/kb/937517)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-12T04:46:16.500

我同意上面的帖子，这可能是一个协议问题，但它可能需要使用命名管道作为接口。

或者可能是运行 DTC 服务的用户帐户仅具有本地权限而没有网络权限。使用在两台计算机上具有足够权限的域帐户来运行 DTC。

或者，您可能需要在流程的前端使用 BEGIN DISTRIBUTED TRANSACTION 启动分布式事务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-12-17T18:10:21.157

您还必须检查 IP 网络配置中的 DNS 名称解析。

例如，您有一台名为**server-a.mydomain.com**的服务器和另一台名为**server-b.otherdomain.com**的服务器，登录**server-a**并执行**ping server-b**（没有域）。

如果它响应“ *Ping 请求找不到主机服务器-b。请检查名称并重试。* ”这就是问题所在。

转到控制面板>网络连接>右键单击网卡>属性> Internet协议>属性>高级> DNS>按顺序附加此DNS后缀。在这里添加本地域：**mydomain.com**，然后添加远程域：**otherdomain.com**。单击确定直到退出

现在，如果您执行**ping server-b**，它应该会响应如下内容：

*ping server-b.otherdomain.com [192.168.1.2] 32 字节数据： 来自 192.168.1.2 的回复：字节=32 时间=12ms TTL=64 来自 192.168.1.2 的回复：字节=32 时间=9ms TTL=64*

现在再次尝试执行分布式事务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-21T21:30:17.827

我可以确认这是网络连接问题。我以前见过这个。

MSDTC 代理必须能够连接到它们正在协调的所有数据库实例。

有一些经过 MS 认证的程序来测试这个……google for msdtc ping。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-12T01:05:21.313

很长一段时间，但不久前我在 MSSQL Server 7 上遇到了类似的问题。事实证明，两个系统都需要通过 NetBios 名称相互联系，因为它们不是域的一部分（但正在通信在你的情况下通过广域网）。

一个简单的解决方案，至少要检查是否是这种情况，是编辑 lmhosts 文件以映射每个计算机的 IP 地址（在客户端和服务器中）。

看到我当时写的一个有点困惑的帖子： [http ://groups.google.com/group/microsoft.public.sqlserver.server/browse_thread/thread/2c246bd2afc7c4d9](http://groups.google.com/group/microsoft.public.sqlserver.server/browse_thread/thread/2c246bd2afc7c4d9)

# python - html文本中链接的正则表达式

> ID：430966
> 
> 赞同：7
> 
> 时间：2009-01-10T13:45:28.470
> 
> 标签：python, html, regex, hyperlink, href

我希望这个问题不是 RTFM 问题。我正在尝试编写一个从标准 HTML 网页（`<link href...`标签）中提取链接的 Python 脚本。我在网上搜索了匹配的正则表达式，发现了许多不同的模式。是否有任何商定的标准正则表达式来匹配链接？

亚当

**更新：** 我实际上正在寻找两个不同的答案：

1.  什么是解析 HTML 链接的库解决方案。[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)似乎是一个很好的解决方案（谢谢`Igal Serban`！`cletus`）
2.  可以使用正则表达式定义链接​​吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-10T13:52:47.753

带有 HTML 的正则表达式变得混乱。只需使用像 Beautiful Soup 这样的 DOM 解析器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-10T17:53:02.963

正如其他人所建议的那样，如果不需要类似实时的性能，BeautifulSoup 是一个很好的解决方案：

```
import urllib2
from BeautifulSoup import BeautifulSoup

html = urllib2.urlopen("http://www.google.com").read()
soup = BeautifulSoup(html)
all_links = soup.findAll("a") 
```

至于第二个问题，是的，HTML 链接应该是明确定义的，但您实际遇到的 HTML 不太可能是标准的。BeautifulSoup 的美妙之处在于它使用类似浏览器的启发式方法来尝试解析您可能实际遇到的非标准、格式错误的 HTML。

如果您确定要使用标准 XHTML，则可以使用（快得多）像 expat 这样的 XML 解析器。

正则表达式，由于上述原因（解析器必须保持状态，而正则表达式不能做到这一点）永远不会是一个通用的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-10T13:53:19.797

不，没有。

您可以考虑使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)。您可以将其称为解析 html 文件的标准。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-10T15:10:23.387

> 链接不应该是定义明确的正则表达式吗？

不，[X]HTML 在一般情况下不能用正则表达式解析。考虑以下示例：

```
<link title='hello">world' href="x">link</link>
<!-- <link href="x">not a link</link> -->
<![CDATA[ ><link href="x">not a link</link> ]]>
<script>document.write('<link href="x">not a link</link>')</script> 
```

这只是一些随机的有效示例；如果您必须处理现实世界的标签汤 HTML，则存在一百万种格式错误的可能性。

如果您知道并且可以依赖目标页面的确切输出格式，则可以使用正则表达式。否则，它是完全错误的抓取网页的选择。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-10T15:50:51.307

> 链接不应该是定义明确的正则表达式吗？这是一个比较理论的问题，

我第二PEZ的回答：

> 我认为 HTML 不适合“定义明确的”正则表达式，因为它不是常规语言。

据我所知，任何 HTML 标签都可能包含任意数量的嵌套标签。例如：

```
<a href="http://stackoverflow.com">stackoverflow</a>
<a href="http://stackoverflow.com"><i>stackoverflow</i></a>
<a href="http://stackoverflow.com"><b><i>stackoverflow</i></b></a>
... 
```

因此，原则上，要正确匹配标签，您必须至少能够匹配以下形式的字符串：

```
BE
BBEE
BBBEEE
...
BBBBBBBBBBEEEEEEEEEE
... 
```

其中 B 表示标签的开始，E 表示结束。也就是说，您必须能够匹配由任意数量的 B 和*相同*数量的 E 组成的字符串。为此，您的匹配器必须能够“计数”，而正则表达式（即有限状态自动机）根本无法做到这一点（为了计数，自动机至少需要一个堆栈）。参考 PEZ 的回答，HTML 是一种上下文无关语法，而不是常规语言。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-10T14:19:18.620

这在一定程度上取决于 HTML 的生成方式。如果它受到一定程度的控制，您可以逃脱：

```
re.findall(r'''<link\s+.*?href=['"](.*?)['"].*?(?:</link|/)>''', html, re.I) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-10T14:24:30.467

在那里回答你的两个子问题。

1.  我有时将 SGMLParser 子类化（包含在核心 Python 发行版中）并且必须说它是直截了当的。
2.  我认为 HTML 不适合“定义明确的”正则表达式，因为它不是常规语言。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-10T15:48:48.423

针对问题 #2（链接不应该是定义明确的正则表达式），答案是……不。

HTML 链接结构是递归的，很像编程语言中的括号和大括号。必须有相同数量的开始和结束构造，并且“链接”表达式可以嵌套在其自身中。

要正确匹配“链接”表达式，需要正则表达式来计算开始和结束标签。正则表达式是有限自动机的一类。根据定义，有限自动机不能“计数”模式中的构造。需要语法来描述这样的递归数据结构。正则表达式无法“计数”这就是为什么您会看到用语法描述的编程语言而不是正则表达式。

因此，不可能创建一个 100% 正则匹配所有“链接”表达式的正则表达式。当然，有一些正则表达式可以匹配大量的“链接”，并且准确度很高，但它们永远不会完美。

我最近写了一篇关于这个问题的博客文章。 [正则表达式限制](http://blogs.msdn.com/jaredpar/archive/2008/10/15/regular-expression-limitations.aspx)

# c# - 创建不压缩的 zip 样式文件

> ID：430973
> 
> 赞同：0
> 
> 时间：2009-01-10T13:51:52.967
> 
> 标签：c#

我知道那里有很多免费和不那么免费的压缩库，但是对于我正在处理的项目，我需要能够从流中获取文件数据并将其放入某种 zip 或打包文件中，但没有压缩，因为我需要快速访问这些文件，而不必等待它们解压缩。

任何人都知道如何解决这个问题，或者是否有一些我不知道的图书馆可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-10T13:54:57.657

您可以为此使用 Zip。您将使用“无”或“存储”之类的压缩级别，它只是组合文件而不进行压缩。[本网站](http://help.globalscape.com/help/cutezip2/Compression_levels__effects.htm)列举了其中一些：

> *   最大 - 最慢的压缩选项，但对创建小型档案最有用。
> *   正常 - 默认值。
> *   低 - 比默认值快，但效果较差。
> *   最小 - 极快的压缩，但不如其他方法有效。
> *   **无**- 创建 ZIP 文件但**不压缩它**。如果存档被加密或自解压，文件大小可能会稍大。

以下是一些 C# 示例：

*   [代码项目](http://www.codeproject.com/KB/recipes/ZipStorer.aspx)
*   [蛋头咖啡厅](http://www.eggheadcafe.com/tutorials/aspnet/9ce6c242-c14c-4969-9251-af95e4cf320f/zip--unzip-folders-and-f.aspx)

对于不知道的unix，这正是`tar`它所做的。当你看到 .tar.gz 文件时，它只是一堆文件组合成一个`tar`文件，然后通过 gzip 运行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-10T14:14:13.687

看看[System.IO.Packaging](http://msdn.microsoft.com/en-us/library/system.io.packaging.aspx)命名空间。

引用 MSDN：

> System.IO.打包
> 
> 提供支持在单个容器中存储多个数据对象的类。
> 
> 包是一个抽象类，可用于将对象组织成具有已定义物理格式的单个实体，以实现可移植性和高效访问。
> 
> ZIP 文件是包的主要物理格式。其他包实现可能使用其他物理格式，例如 XML 文档、数据库或 Web 服务。

您可以为您的包选择不同的[压缩选项：](http://msdn.microsoft.com/en-us/library/system.io.packaging.compressionoption.aspx)

*   **NotCompressed** - 压缩已关闭。
*   **正常**- 压缩已针对大小和性能之间的平衡进行了优化。
*   **最大**- 压缩针对大小进行了优化。
*   **快速**- 压缩针对性能进行了优化。
*   **SuperFast** - 压缩针对高性能进行了优化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-10T14:14:35.230

也许只是使用压缩设置为“无”的 zip；SharpZipLib 就足够了。

但是，请小心假设压缩速度较慢 - 实际上（取决于场景）压缩可能会**更快**，因为您减少了物理 IO 和 IPC 的数量（通常是瓶颈），并且只需做更多的 CPU 工作；但你通常有足够的 CPU。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T14:12:33.220

windows下传统的简单存储文件都是cabinet文件，支持压缩，还有签名，zip不支持。

看看是否有办法在 .net 中创建文件柜文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-10T15:54:42.157

记得先配置文件。您的硬盘驱动器比您的 CPU 或内存慢得多。如果文件位于磁盘上，读取较小的压缩文件将比读取未压缩的 blob 花费更少的时间。差异可能超过解压缩所需的时间。

操作系统也可以将文件缓存在内存中。发生这种情况时，硬盘驱动器将完全从循环中移除（对您来说是透明的）。这可能会使减压时间过于昂贵。

在处理缓慢的互联网连接时，我学会了这种“技术”。客户需要快速的数据，我们有空闲的周期。发送压缩数据包会增加应用程序的吞吐量/延迟。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-27T17:57:30.203

我还有一个额外的要求，即生成的包文件可以使用标准工具（至少 FAR 管理器）浏览。

到目前为止，我已经尝试过：

*   *OPC*（开放打包约定，System.Packaging 命名空间，基于 ZIP，MSO .docx 文件的后端）。内置和标准，但速度很慢，可能是因为它实际上首先将所有数据复制到一个临时位置，以防它必须被压缩（即使不是这样），然后才写入最终目的地。慢得无法忍受。请注意，还有一个不基于 .NET 的 Windows 内置实现，它可能会更快，但并不涵盖我必须支持的所有操作系统版本。

*   *ITSS*（InfoTech 存储系统，CHM 文件的后端）。内置在 Windows 中，有点标准。令人惊讶的是，实现是不完整的，而且速度非常慢，甚至比 OPC 还要慢。

*   *DOC*（COM 复合文件结构化存储、MSO .doc 文件、.msi 文件等的后端）。内置Windows，相当标准。不支持长度超过 32 个字符的文件名，这对我来说是一个很大的缺点。在中小型规模上足够快（完全超过 .NET OPC impl），但在达到千兆字节时存在一些可扩展性问题。

各种 ZIP 实现仍有待测试。

# linux - Linux系统来管理服务器的配置？

> ID：430980
> 
> 赞同：1
> 
> 时间：2009-01-10T13:55:47.717
> 
> 标签：linux, configuration, sysadmin

我需要一种软件来在一个中心位置管理 linux 服务器的配置。它应该能够自动将更改推送到服务器。版本控制将是一个优势......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-10T15:35:38.357

我听说过关于[Puppet](http://reductivelabs.com/trac/puppet/)（正如[matli](https://stackoverflow.com/users/23896/matli)建议的那样）和[Cfengine](http://en.wikipedia.org/wiki/Cfengine)的好消息，它们都列在[http://en.wikipedia.org/wiki/Comparison_of_open_source_configuration_management_software](http://en.wikipedia.org/wiki/Comparison_of_open_source_configuration_management_software)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T13:59:39.860

看看[木偶](http://reductivelabs.com/trac/puppet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-11-04T14:39:43.817

还有 Chef 和 bcfg2。如果您是 Java 人，控制层很好。python 领域也有一些新项目可以解决这个问题：Kokki、Overmind、Edison。

他们基本上都以不同的方式做同样的事情。如果您是 Ruby 开发人员，Chef 会感觉非常熟悉。如果您不是开发人员并且不关心该语言，那么 puppet 在使用 Ruby 编写时会将其全部抽象为 DSL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-04T06:01:39.937

签出 Bluepring 和 Blueprint I/O。Blueprint 是一个开源工具，用于确定对服务器做了什么。包、文件修改和源代码安装被检测并打包成可重用的格式——蓝图。蓝图 I/O 是将蓝图移动到另一台服务器的工具。它们共同构成了一个非常简单的配置管理工具。希望这可以帮助。

[https://github.com/devstructure/blueprint](https://github.com/devstructure/blueprint)（蓝图@Github）

[https://github.com/devstructure/blueprint-io](https://github.com/devstructure/blueprint-io)（蓝图 I/O @ Github）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-01-09T15:24:53.577

老问题，但仍然可能对您有所帮助：我们正在发布 ConfigChief，这是一个托管的中央配置存储库，具有版本控制、审计、访问控制，它通过从服务器中提取配置而不是推送它来解决问题，这是 Puppet 提供的解决方案其余的。

如果您愿意，可以在[http://woot.configchief.com](http://woot.configchief.com)注册测试版。

# asp.net - ASP.NET 应用程序架构：冗长后台进程的最佳实践？

> ID：430981
> 
> 赞同：4
> 
> 时间：2009-01-10T13:55:55.533
> 
> 标签：asp.net

我会尽量简短。

从启动必须运行的冗长“后台”进程的 asp.net Web 应用程序调用例程的最佳实践是什么？

例如，我想单击网页上显示“运行数据转换”的按钮（例如）。此数据转换例程可能需要 20-40 分钟才能运行，因此在我看来，将所有代码放入 asp.net 网页并不可行....无需通过IIS 服务器。一个单独的服务或应用程序等似乎是要走的路......

Web 应用程序和后台进程都将在我的专用 Win2003 服务器上运行，所以我有很多选择 - 但最好的选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-10T14:00:48.393

如果您控制服务器，我建议创建一个 Windows 服务 - 将数据转换任务完全放在 ASP.NET 之外；您不希望 ASP.NET 在 40 分钟的转换例程中途重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T15:51:04.270

有很多选择，基本上归结为您需要可以与之通信的任何类型的过程。我能想到的选项是：在另一个应用程序池下运行的 Web 服务；一个窗口服务；由您的 ASP.NET 代码启动的命令行进程。

下一个问题是如何与其他进程通信。如果您使用的是数据库，则可以设置两个进程都可以访问的两个公用表。该网站会将工作请求放入第二个流程将监控的表格中。然后可以使用第二个表格来显示结果，该网站将对其进行监控。另一种选择是使用诸如[Windows Communication Foundation (WCF)](http://en.wikipedia.org/wiki/Windows_Communication_Foundation "Windows 通信基础")或 .NET 远程处理之类的东西在进程之间发送事件。

# xml - 命名空间 URI 中的尾部斜杠有什么意义？

> ID：430990
> 
> 赞同：13
> 
> 时间：2009-01-10T14:02:41.853
> 
> 标签：xml, soap, namespaces

我一直在研究 SOAP 和 WSDL 以准备实现 Web 服务。我遇到的一件令我困惑的事情是，我看到的一些 URI 使用了斜杠，例如：

```
http://www.w3.org/some-namespace/ 
```

而我研究过的其他示例则省略了这个斜杠。我对此真的有几个问题：

*   尾部斜线的意义是什么？
*   URI http://www.w3.org/some-namespace 是否与 http://www.w3.org/some-namespace/ 相同？
*   如果它们不相同，我如何决定何时需要一种形式与另一种形式？
*   我已经阅读了 w3c 给出的关于 URI 的指导方针，这些指导方针似乎表明只有当 URI 字符串的区分大小写比较被认为相等时，该 URI 才应该被认为是相等的。这种解释正确吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-10T16:50:36.413

**是的，您已阅读的有关 URI 的 w3c 指南是正确的**。

**两个不具有相等字符串 uri 的命名空间是不同的命名空间。甚至大写和空格也很重要**。

namespace-uri 并不意味着对其发出请求应该产生网络响应。因此，任何应该或不应该以“/”结尾的推理都没有太大意义。

事实上，namespace-uri 甚至可能不满足 URI 的语法规则，它仍然可以用于定义命名空间。使用命名空间非常有用，例如：

**`"\/^%$#sdhfgds"`**

只要它是独一无二的（请注意，我绝不推荐这样使用:)）。现有的 XML 处理器（例如解析器、XPath 或 XSLT 处理器）在遇到此类命名空间时不会引发任何错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-10T17:44:14.777

命名空间 URI 只是作为唯一标识符（[这里](http://www.w3.org/TR/REC-xml-names/#NSNameComparison)是比较规则的链接）。URI 的使用（相对于“foo”）可以追溯到（我相信）在 XML DOCTYPE 中使用 URI。

这也是，我认为关于此类 URI 的“可检索性”的混淆来自哪里。[XML Spec](http://www.xml.com/axml/target.html#dt-sysid)要求可以使用 DOCTYPE 中的SYSTEM 标识符来检索文档的 DTD（我链接到 Annotated XML Spec，而不是 W3C 版本，因为我相信 Tim Bray 的评论非常有用）。

尽管其他规范（例如，XML 模式）不需要这种行为，但我相信遵循它是一个有用的习惯——尤其是在模式目标名称空间的情况下。一方面，它使您的模式的消费者很容易总是找到正确的定义。另一方面，如果您有权将文档放在公共 URL 中，那么您还可以确保 URI 是唯一的。

最后：统一资源标识符 (URI) 是统一资源定位符 (URL) 的超集。您还可以有一个统一资源名称 (URN)，我相信（但没有方便的规范）存在第三种形式的标识符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-10T14:11:27.123

不，他们不一样。

最大的区别在于从该基础形成相对uris；使用斜线，相对 uri 将是一个后代；如果没有斜线，它将是兄弟 - 即（C# 示例）：

```
 Uri uri = new Uri(@"http://www.w3.org/some-namespace/");
    Console.WriteLine(new Uri(uri, "foo")); // http://www.w3.org/some-namespace/foo

    uri = new Uri(@"http://www.w3.org/some-namespace");
    Console.WriteLine(new Uri(uri, "foo")); //http://www.w3.org/foo 
```

# visual-studio - 更改接口后更新类

> ID：430993
> 
> 赞同：0
> 
> 时间：2009-01-10T14:09:17.020
> 
> 标签：visual-studio, eclipse, shortcuts

假设我将一个函数添加到一个出色的接口。在 Visual Studio 中，在实现它的类中，我可以右键单击接口声明并重新实现它。这将更新代码以反映所做的更改。无论如何在eclipse中做同样的事情吗？如果有就好了 我已经在网上搜索过，唉，不高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T14:30:54.277

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-14T15:24:38.270

You can also use the source menu. Select Source > Override/Implement methods.

# ruby-on-rails - 在 Rails 中，是否使用表单助手？

> ID：430997
> 
> 赞同：6
> 
> 时间：2009-01-10T14:12:12.160
> 
> 标签：ruby-on-rails, performance, form-helpers

在 Rails 中，是否建议使用表单助手？在内部，一切都归结为纯 html，那么为什么不直接编写 html 呢？编写直接 html 的性能显然会比使用帮助程序更好。使用表单助手是像约定还是 Rails 开发人员必须遵循的东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-10T14:35:13.707

定义性能。你的表现还是应用？假设您有相同的 rhtml 片段分布在您的视图中。假设您在数千个地方都有它。也许你甚至没有在所有地方都得到**完全相同的结果。**现在您的客户想要更改此设置（可能是不同的演示顺序等）。在所有视图中执行此操作需要一段时间，对吗？很可能你不会第一次就做对了。事实上，您可能会在几年内不断收到错误报告，这些错误报告会出现在您错过更改的地方。

客户最终会为获得的“性能”付出很多。也许数百个工作小时。如果您在原则上避免 DRY 原则，可能会成千上万。想想她可以为这些工作时间购买的所有服务器和所有 RAM。如果她把所有的钱都花在硬件上，她的应用程序的运行速度可能会快上百倍。想想你可以使用的所有有趣的东西，而不是胡乱改变 html 片段。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-10T14:22:23.857

我认为表单助手反映了 DRY（不要重复自己）原则。与其编写相同的代码来完成类似的任务，不如创建一个允许您重用该代码的表单助手。这样，如果您需要进行更改或修复，您只需在一个地方进行。它还有助于使您的代码更加紧凑和可读，以将复杂的操作抽象为表单助手。部分视图也是如此，尽管部分视图倾向于封装比表单助手更复杂的标记。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-10T14:23:34.167

表单助手对于让 rails 处理基于您的模型创建表单特别有用。引用 API 文档的示例：

以下代码

```
<% form_for :person, @person, :url => { :action => "create" } do |f| %>
  <%= f.text_field :first_name %>
  <%= f.text_field :last_name %>
  <%= submit_tag 'Create' %>
<% end %> 
```

生成这个 html

```
<form action="/persons/create" method="post">
  <input id="person_first_name" name="person[first_name]" size="30" type="text" />
  <input id="person_last_name" name="person[last_name]" size="30" type="text" />
  <input name="commit" type="submit" value="Create" />
</form> 
```

您可以自己编写 html，但是通过使用表单助手，您必须减少键入内容并减少表单创建对 rails 实现的依赖。当您点击提交按钮时，您总是会得到一个将数据写入模型的表单。如果 Rails 开发人员改变了它的实现，你会自动从你的助手那里得到正确的 html 输出。如果您手动编写了 html，则必须更新所有内容以反映 rails 内部工作的变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T11:59:55.020

当开发人员具有相同的类名称，id 并且输入字段没有值时，如果他需要不同的名称 id 并且还给出值，那么他必须编写**<%= text_field_tag "name", :value=>"value" , :id=>"id" ,:class=>""class %>**并且对于相同的 html 可以是**< input type ="text" value ="value" class="class" name ="name" id="id "/>** 现在考虑开销**1.**将第一个助手评估为 html **2.**现在还要考虑助手中的长度，我们还必须编写 : , => **3.**有时您忘记使用 : 或 ,错误地，所以我认为在这种情况下我们更喜欢 html 如果您的服务器收到大量请求，那么它会变得太忙并且响应时间将增加，因为 <%= %> 应该必须执行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-16T10:03:58.690

这是一个非常古老的问题，但我是一个新手。我会争辩说，而不是写这个

```
<label class="input-group__label" for="email">Email</label>
<input class="input-group__field" id="email" type="email" name="email" placeholder="e.g. me@something.com"> 
```

像这样用 rails helpers 写同样的东西

```
<%= label_tag 'email', nil, class: 'input-group__label' %>
<%= email_field_tag "email", nil, placeholder: "e.g. me@something.com", class: "input-group__field" %> 
```

in a`form_tag`是一种非常干燥的做事方式。第一个可读性更好。大家可以理解。不需要 Rails 知识。不评估和转换特定于 Rails 的标签（性能略有提高）。代码量是一样的。如果那是在`form_for`从模型创建表单的内部，我了解特定于 Rails 的标签和助手的使用。这说得通。但是我没有看到像上面的示例中那样对简单的 html 使用 rails 助手的真正优势。************************************